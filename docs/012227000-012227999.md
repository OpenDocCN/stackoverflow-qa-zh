# StackOverflow 问答 12227000-12227999

# javascript - 缓存主干视图及其事件

> ID：12227002
> 
> 赞同：3
> 
> 时间：2012-09-01T10:32:10.933
> 
> 标签：javascript, caching, view, backbone.js, backbone-events

我正在开发一个相对较大的应用程序，就像某种应用程序集合。

我所有的应用程序都有一个引导视图，它加载基本布局和嵌套视图。

我现在开始对视图实现单例模式：

```
var SomeView = Backbone.View.extend({});

if (SomeView._instance) return SomeView._instance;

SomeView._instance = new SomeView();

return SomeView._instance; 
```

现在我提到当我在不同的应用程序（视图）之间切换时，事件系统被破坏了。这实际上是很合逻辑的，最后我们将视图从文档中移除。但是，我对总是建立新的观点有某种抵抗力。这是非常无效的：一切都必须重新加载（数据）并重建。

**那么有没有办法将事件重新绑定到缓存的视图，或者这整个想法很糟糕，我应该接受必须重建视图？**

**更新：**

```
define(['jquery', 'underscore', 'backbone', 'views/settings/profile'], function($, _, Backbone, ProfileSettingsView) {

    var ContentView = Backbone.View.extend({

        tagName: "div",

        className: "content well",

        initialize: function() {
            this.on('change:section', this.change, this);

            this.views = {};
            this.views.profile = new ProfileSettingsView();
        }, 

        render: function() {
            this.$el.empty();

            return this;
        },

        events: {
            "click": "click"
        },

        // the router triggers this one here
        change: function(query) {
            console.log(query);

            // if I uncomment this then nothing is rendered at all
            //this.$el.detach();

            var el;
            if (query === 'profile') {
                el = this.views.profile.render().el;
            } else {
                this.$el.empty();
            }

            if (el) {
                this.$el.empty().append(el);
            }

        },

        click: function(e) {
            console.log('clicked, content should disapear');
        }

    });

    if (ContentView._instance) return ContentView._instance;

    ContentView._instance = new ContentView();

    return ContentView._instance;

}); 
```

我对如何使用 jQuery 的`detach()`. 我查看了官方文档中的演示，发现仅调用`.detach()`jQuery 对象是不够的。`.detach`返回一个看起来像 jQuery 的新对象**并**包含绑定的事件。困难在于我必须保存这个从`detach()`某个地方返回的东西，我现在必须知道它来自谁。现在我没有任何看透。我现在将搜索一些`Backbone.View`使用示例，`detach()`但我认为它是特定的....

**更新2：**

是的！我找到了一种解决方法：而不是保存事件然后将其重新插入 DOM。我们可以调用`this.delegateEvents()`来重新绑定所有事件。这确实只是一种解决方法，如果有人能给我一个例子，我会很高兴:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:29:30.683

就个人而言，我更喜欢重建我的观点。

但是，我知道很多人喜欢重复使用它们。在这种情况下，请按照 Tim Branyen 的这篇博文中的说明进行操作：http: [//tbranyen.com/post/missing-jquery-events-while-rendering](http://tbranyen.com/post/missing-jquery-events-while-rendering)

# php - 使用 cookie 进行 php 日志记录，Internet Explorer 9

> ID：12227007
> 
> 赞同：0
> 
> 时间：2012-09-01T10:32:51.167
> 
> 标签：php, cookies

为什么 cookie 在 IE9 中不起作用，而在其他浏览器中起作用？

在登录时我使用代码

```
$expires = 60 * 60 * 24 * 365;
$time = time() + $expires;
setcookie ("username", $user, $time, "/");
setcookie ("password", $pass , $time, "/"); 
```

在注销时我使用代码

```
$expires = 60 * 60 * 24 * 365;
$time = time() - $expires;
setcookie ("username", "", $time, "/");
setcookie ("password", "" , $time, "/"); 
```

在检查我使用的登录用户时

```
if (isset($_COOKIE['username']) && isset($_COOKIE['password'])) {
    $result = mysql_query ( "select * from users where user=$_COOKIE['username'] and passwd=$_COOKIE['password']" );
    while ( $row = mysql_fetch_assoc ( $result ) ) {
        return $row;
    }
    return array();
} 
```

如何解决所有浏览器中的日志记录？谢谢你的提示

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:12:19.223

它适用于所有主流浏览器，尤其是 IE

要保存 cookie：

```
setcookie('username', trim($username), time() + 6000000, '/');
setcookie('password', trim($password), time() + 6000000, '/'); 
```

要删除它：

```
setcookie('username', '', 0);
setcookie('password', '', 0);
unset($_COOKIE['username']);
unset($_COOKIE['password']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:08:13.290

Cookies 不会写入密码和用户名。这不安全。

# php - 如何获取视频的嵌入代码

> ID：12227009
> 
> 赞同：6
> 
> 时间：2012-09-01T10:32:53.697
> 
> 标签：php, api, codeigniter, video, video-capture

我正在使用[嵌入](http://embed.ly/)，它工作正常，但问题是某些视频会出错- `not a valid key`。我知道我们必须在他们的网站上注册并为密钥支付一些钱，但我不想这样做。有没有其他解决方案获取视频的嵌入代码，以便我可以使用嵌入以外的代码。如果是，请帮助我，或者如果可能，请提供一些示例来执行此操作。下面给出了密钥的代码。

```
$pro = new Embedly_API(array(
    'key' => 'xxxxxxxxxxxxxxxx', //need a pro key for this
    'user_agent' => 'Mozilla/5.0 (compatible; mytestapp/1.0)'
)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:51:04.040

您*无需*为轻度使用支付任何费用。

您应该尝试在定价页面上向下滚动：http: [//embed.ly/pricing](http://embed.ly/pricing)

然后选择*免费*选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:59:14.640

我已经为您的脚本构建了代码来解决您的问题。请找到下面的代码并根据您的需要使用它。

```
<!DOCTYPE>
<html>
  <head>
    <title>Page Title</title>
    <script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
    <script type="text/javascript">
        /*
 * Embedly JQuery v2.2.0
 * ==============
 * This library allows you to easily embed objects on any page.
 */
(function(a){window.embedlyURLre=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;a.embedly=a.embedly||{};if(a.embedly.version){return}a.extend({embedly:function(k,q,n){var c=[];var p="http://api.embed.ly/";var d;q=q?q:{};d=a.extend({},a.embedly.defaults,q);if(!d.urlRe){d.urlRe=window.embedlyURLre}if(typeof k==="string"){k=new Array(k)}if(typeof n!=="undefined"){d.success=n}if(d.secure){p="https://api.embed.ly/"}if(!d.success){d.success=function(i,t){var r,s=a(t.node);if(!(i)){return null}if((r=d.method)==="replace"){return s.replaceWith(i.code)}else{if(r==="after"){return s.after(i.code)}else{if(r==="afterParent"){return s.parent().after(i.code)}else{if(r==="replaceParent"){return s.parent().replaceWith(i.code)}}}}}}if(!d.error){d.error=function(i,r){}}var m=function(i){return d.urlRe.test(i)};var o=function(r){var i="urls="+r;if(d.maxWidth){i+="&maxwidth="+d.maxWidth}else{if(typeof dimensions!=="undefined"){i+="&maxwidth="+dimensions.width}}if(d.maxHeight){i+="&maxheight="+d.maxHeight}if(d.chars){i+="&chars="+d.chars}if(d.words){i+="&words="+d.words}if(d.secure){i+="&secure=true"}if(d.frame){i+="&frame=true"}i+="&wmode="+d.wmode;if(typeof d.autoplay==="string"||typeof d.autoplay==="boolean"){i+="&autoplay="+d.autoplay}if(d.width){i+="&width="+d.width}return i};var j=function(){if(typeof d.autoplay==="string"){if(d.endpoint.search(/objectify/i)>=0){return p+"2/objectify"}else{if(d.endpoint.search(/preview/i)>=0){return p+"1/preview"}}}return p+"1/oembed"};var b=function(){var i=[];if(d.addImageStyles){if(d.maxWidth){units=isNaN(parseInt(d.maxWidth,10))?"":"px";i.push("max-width: "+(d.maxWidth)+units)}if(d.maxHeight){units=isNaN(parseInt(d.maxHeight,10))?"":"px";i.push("max-height: "+(d.maxHeight)+units)}}return i.join(";")};var g=function(v,t){if(d.endpoint!=="oembed"){return d.success(v,t)}var w,s,r,y,u,i,x,z;if((w=v.type)==="photo"){y=v.title||"";s="<a href='"+t.url+"' target='_blank'><img style='"+b()+"' src='"+v.url+"' alt='"+y+"' /></a>"}else{if(w==="video"){s=v.html}else{if(w==="rich"){s=v.html}else{y=v.title||t.url;i=v.thumbnail_url?"<img src='"+v.thumbnail_url+"' class='thumb' style='"+b()+"'/>":"";z=v.description?'<div class="description">'+v.description+"</div>":"";x=v.provider_name?"<a href='"+v.provider_url+"' class='provider'>"+v.provider_name+"</a>":"";s=i+"<a href='"+t.url+"'>"+y+"</a>";s+=x;s+=z}}}if(d.wrapElement&&d.wrapElement==="div"&&a.browser.msie&&a.browser.version<9){d.wrapElement="span"}if(d.wrapElement){s="<"+d.wrapElement+' class="'+d.className+'">'+s+"</"+d.wrapElement+">"}v.code=s;if(typeof t.node!=="undefined"){a(t.node).data("oembed",v).trigger("embedly-oembed",[v])}return d.success(v,t)};var e=function(i){var t,v,u,s,r;u=a.map(i,function(x,w){if(w===0){if(x.node!==null){r=a(x.node);s={width:r.parent().width(),height:r.parent().height()}}}return encodeURIComponent(x.url)}).join(",");a.ajax({url:j(),dataType:"jsonp",data:o(u),success:function(w){return a.each(w,function(x,y){return y.type!=="error"?g(y,i[x]):d.error(i[x].node,y)})}})};a.each(k,function(s,r){var u=typeof d.elems!=="undefined"?d.elems[s]:null;if(typeof u!=="undefined"&&!m(r)){a(u).data("oembed",false)}var t={url:r,error_code:400,error_message:"HTTP 400: Bad Request",type:"error"};return(r&&m(r))?c.push({url:r,node:u}):d.error(u,t)});var l=[];var h=c.length;for(var f=0;(0<=h?f<h:f>h);f+=20){l=l.concat(e(c.slice(f,f+20)))}if(d.elems){return d.elems}else{return this}}});a.embedly.version="2.2.0";a.embedly.defaults={endpoint:"oembed",secure:false,frame:false,wmode:"opaque",method:"replace",addImageStyles:true,wrapElement:"div",className:"embed",elems:[]};a.fn.embedly=function(d,g){var e=typeof d!=="undefined"?d:{};if(typeof g!=="undefined"){d.success=g}var f=new Array();var c=new Array();this.each(function(){if(typeof a(this).attr("href")!=="undefined"){f.push(a(this).attr("href"));c.push(a(this))}else{a(this).find("a").each(function(){f.push(a(this).attr("href"));c.push(a(this))})}e.elems=c});var b=a.embedly(f,e);return this}})(jQuery);

        </script>
    <script type="text/javascript">
      $('document').ready(function(){
        $('div.content').embedly({
          maxWidth: 450,
          wmode: 'transparent',
          method: 'after'       
        });
      });
    </script>
  </head>
  <body>
    <div class="content">
      <article>
        <h2>Title</h2>
        <p>Lorizzle ma nizzle dolor sit amizzle, brizzle adipiscing elit. </p>
        <a href="http://www.youtube.com/watch?v=ZbcgyPtYBY0">youtube</a>
        <p>Maecenizzle owned bow wow wow. Nam eros.</p>
      </article>
      <article>
        <h2>Title 2</h2>
        <p>Lorizzle ma nizzle dolor sit amizzle, brizzle adipiscing elit. </p>
        <a href="http://www.flickr.com/photos/churchclothing/2597225382/">flickr</a>
        <p>Maecenizzle owned bow wow wow. Nam eros.</p>
      </article>
    </div>
  </body>
</html> 
```

它工作正常。，测试它并根据你的意愿使用它。

# operating-system - 处理器如何知道一条指令正在进行系统调用

> ID：12227015
> 
> 赞同：8
> 
> 时间：2012-09-01T10:33:39.540
> 
> 标签：operating-system, kernel, system-calls, processor

系统调用——它是一条产生中断的指令，使操作系统获得对处理器的控制。

因此，如果正在运行的进程发出系统调用（例如创建/终止/读/写等），则会产生一个中断，导致内核控制处理器，然后执行所需的中断处理程序例程。正确的？

那么任何人都可以告诉我处理器如何知道该指令应该阻止进程，进入特权模式并带来内核代码。

我的意思是，作为一名程序员，我只需键入 stream1=system.io.readfile(ABC) 或其他内容，这将转换为打开和读取文件 ABC。

现在是什么监控这个进程的执行，cpu里有什么神通可以检测到这个吗？

从我读过的内容来看，一个处理器一次只能执行一个进程，那么监视器程序在哪里运行？

当它不在运行状态时，内核如何监视是否进行了系统调用！

或者计算机是否有一个系统调用指令表，在执行任何指令之前它会与之进行比较？

请帮忙

感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T10:35:51.060

内核不监视进程以检测系统调用。相反，该进程会生成一个中断，将控制权转移给内核，因为根据指令集参考手册，这是软件生成的中断所做的事情。

例如，在 Unix 上，进程将系统调用号填入`eax`并运行一条`int 0x80`指令，该指令会生成中断`0x80`。CPU 通过查看[中断描述符表](http://wiki.osdev.org/Interrupt_Descriptor_Table)以找到内核处理该中断的处理程序来对此作出反应。这个处理程序*是*系统调用的入口点。

因此，在 32 位 x86 Linux中调用`_exit(0)`（原始系统调用，而不是刷新缓冲区的 glibc函数）：`exit()`

```
movl  $1, %eax   # The system-call number.  __NR_exit is 1 for 32-bit
xor   %ebx,%ebx  # put the arg (exit status) in ebx
int   $0x80 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T21:02:08.317

让我们分析您提出的每个问题。

1.  是的，你的理解是正确的。

2.  看，如果任何进程/线程想要进入内核，只有两种机制，一种是通过执行 TRAP 机器指令，另一种是通过中断。通常中断是由硬件生成的，因此任何其他进程/线程想要进入内核它都会通过 TRAP。所以像往常一样，当进程执行 TRAP 时，它会向内核发出中断（主要是软件中断）。与陷阱一起，您还将提到系统调用号，这将作为内核内部中断处理程序的输入。根据系统调用号，您的内核在系统调用表中找到系统调用函数并开始执行该函数。当内核开始处理中断时，内核将在 cs 寄存器中设置模式位以提示处理器，因为当前指令是特权指令。这样，您的处理器将知道当前指令是否具有特权。一旦你的系统调用函数完成它的执行，你的内核将执行 IRET 指令。这将清除 CS 寄存器中的模式位，以告知从现在开始向内的任何指令都来自用户模式。

3.  处理器内部没有神奇的力量，在用户和内核上下文之间切换让我们认为处理器是一个神奇的东西。它只是一个硬件，能够以非常高的速率执行大量指令。

4..5..6。所有这些问题的答案都在上述案例中得到了解答。

我希望我在一定程度上回答了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T14:18:21.033

您正在寻找的是`mode bit`. 基本上有一个寄存器叫做`cs register`. 通常它的值设置为 3（用户模式）。对于特权指令，内核将其值设置为 0。查看此值，处理器就知道它是哪种指令。如果您有兴趣挖掘更多内容，请参阅这篇[出色的文章](https://manybutfinite.com/post/cpu-rings-privilege-and-protection/)。

其他参考。

[模式位在哪里](https://stackoverflow.com/a/13209180)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T04:10:14.057

中断控制器向 CPU 发出中断已经发生的信号，传递中断号*（因为中断被分配了优先级以处理同时中断）*，因此中断号以确定要启动的处理程序。CPU 跳转到中断处理程序，当中断完成时，程序状态重新加载并恢复。

*[参考：Silberchatz，操作系统概念第 8 版]*

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-08T19:39:06.627

现代硬件支持多个用户会话。如果您的硬件支持多用户模式，我提供了一种称为中断的机制。中断基本上停止当前代码的执行以执行其他代码（例如内核代码）。执行哪个代码由传递给中断的参数决定，由发出中断的代码决定。硬件将增加运行级别，将内核代码加载到内存中并强制 cpu 执行此代码。当内核代码返回时，它再次直接通知硬件并且运行级别降低。然后，硬件将恢复中断前的 cpu 状态，并将 cpu 设置为启动中断的代码的下一行。完毕。由于代码在主动调用硬件，而硬件又主动调用内核，内核本身不需要进行任何监控。

旁注：尽量让你的问题简短。明确你想要什么。第一个答案对于您发布的问题是正确的，只是您没有很好地表达它。明确表明您是该主题的新手，需要对基本概念进行详细解释，而不是解释到目前为止您所理解的内容并且不要使用大写锁定。

请接受 cnicutar 提供的答案。谢谢你。

# chef-infra - 如何在 Chef 配方中动态查找主机的 IP

> ID：12227017
> 
> 赞同：3
> 
> 时间：2012-09-01T10:34:35.140
> 
> 标签：chef-infra

我需要找到一个节点的 IP，如果有的话。问题是“cluster_nodes.first”没问题，但它没有任何方法，“.ip”不存在，cluster_nodes.first[:ip] 也不存在，我在 Chef Wiki 上找不到任何信息。

```
cluster_nodes = search(:node, "name:cluster1*")

if cluster_nodes.size > 0
  node[:primary_node] = cluster_nodes.first.ip
else
  node[:primary_node] = ''
end 
```

错误：

```
[Sat, 01 Sep 2012 10:29:22 +0000] ERROR: Running exception handlers
[Sat, 01 Sep 2012 10:29:22 +0000] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[Sat, 01 Sep 2012 10:29:22 +0000] ERROR: Exception handlers complete
[Sat, 01 Sep 2012 10:29:22 +0000] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[Sat, 01 Sep 2012 10:29:22 +0000] FATAL: ArgumentError: Attribute ip is not defined! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:20:25.333

haproxy recipe 它有一个很好的例子，这是从该食谱中摘录的片段：

```
cluster_nodes = search(:node, "name:cluster1*")
member = cluster_nodes.first if cluster_nodes

if cluster_nodes && cluster_nodes.size > 0
  primary_node = begin
    if member.attribute?('cloud')
      if node.attribute?('cloud') && (member['cloud']['provider'] == node['cloud']['provider'])
         member['cloud']['local_ipv4']
      else
        member['cloud']['public_ipv4']
      end
    else
      member['ipaddress']
    end
  end
else
  primary_node = ''
end 
```

这个对我有用。第一个节点获取空值，第二个、第三个等获取 IP 地址。

# winapi - BS_OWNERDRAW 和 GDI+

> ID：12227021
> 
> 赞同：1
> 
> 时间：2012-09-01T10:35:31.737
> 
> 标签：winapi, gdi+

我正在尝试创建一个带有 5 个“不可见”按钮的启动器窗口，这些按钮的中心有一个较小的部分透明图像。里面的图像会根据用户是否将鼠标悬停在按钮上而发生变化。在此示例中，图像是资源 IDB_Website1 和 IDB_Website2。

图像为 .png 格式。我正在使用 GDI+ 并使用[http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI](http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI)从资源中加载 PNG 文件。

我使用 BS_OWNERDRAW 来处理按钮的图形。问题是**我不知道如何将“资源中的 PNG”代码链接到父级的 WM_DRAWITEM**。使用我目前完成代码的方式，我通过 HBITMAP 失去了 .png 的透明度。

全局变量：

```
HBITMAP globalpic; 
```

主要的wndproc：

```
 case WM_CREATE:
    {
        HWND hwndButton = CreateWindow(TEXT("button"), NULL,
                          WS_CHILD | WS_VISIBLE | BS_OWNERDRAW,
                          190, 230, 260, 50, // <- the larger rect size
                          hWnd, (HMENU) HT_BUTTON1, hInst, NULL);
        HTButton = (WNDPROC) SetWindowLong(hwndButton, GWL_WNDPROC, (LONG) ButtonProc);
    }

    case WM_DRAWITEM:
    {
        DRAWITEMSTRUCT* lpDrawItem = (DRAWITEMSTRUCT*)lParam;
        HBITMAP hBmp;
        HDC hdc = CreateCompatibleDC(NULL);

        if (hovering) // <- mousehover detection, not included
        {
            gdi.CreateBM(IDB_Website2, _T("PNG"), hInst, hdc, 62, 100, 200, 40);
        } else {
            gdi.CreateBM(IDB_Website1, _T("PNG"), hInst, hdc, 62, 100, 200, 40);
        }

        hBmp = globalpic; // get the global var gdi.CreateBM created
        DeleteDC(hdc);

        BITMAP bm;
        GetObject(hBmp, sizeof(bm), &bm);
        HDC hMemDC = CreateCompatibleDC(NULL);
        HBITMAP hOldBmp = (HBITMAP)SelectObject(hMemDC, hBmp);
        StretchBlt (lpDrawItem->hDC,
                    lpDrawItem->rcItem.left + 30,
                    lpDrawItem->rcItem.top + 5,
                    200, <- the width of image
                    40, <- the height of image
                    hMemDC,
                    0, 0,
                    bm.bmWidth,
                    bm.bmHeight,
                    SRCCOPY);
        SelectObject(hMemDC, hOldBmp);
        DeleteDC(hMemDC);
        DeleteObject(hBmp);
        break;
    } 
```

类 GDI 的方法 CreateBM。

目前，由于我不知道更好的方法，它将 HBITMAP 发送到全局变量 globalpic。问题是这样做，我失去了透明度。

```
void CreateBM(UINT menuid, LPCTSTR pType, HMODULE hInst, HDC hdc, int x, int y, int w, int h)
{
    CGdiPlusBitmapResource m_pBitmap;
    m_pBitmap.Load(menuid, pType, hInst);
    m_pBitmap.m_pBitmap->GetHBITMAP(RGB(255, 255, 0), &globalpic);
    //m_pBitmap.m_pBitmap->GetHBITMAP(GetBkColor(hdc), &globalpic); // <- no-go either
} 
```

有什么办法可以更直接地做到这一点？我觉得通过 HBITMAP 路线是完全没有必要的，但我一生都无法弄清楚我应该怎么做。

再说一次，如果使用 HBITMAP 方式很好，任何关于我如何使颜色（我猜 (RGB(255, 255, 0) ...？）在当前实现中透明的指针？

* * *

回复汉斯：

我也有一个像这样的 GDI 方法，但它目前没有使用，因为我无法在绘制后删除图像（悬停更改图像时需要）：

```
void Create(UINT menuid, LPCTSTR pType, HMODULE hInst, HDC hdc, int x, int y, int w, int h)
{
    Graphics grpx(hdc);

    ht_img = new CGdiPlusBitmapResource();
    ht_img -> Load(menuid, pType, hInst);
    grpx.DrawImage(*ht_img, x, y, w, h);
    delete ht_img;
} 
```

# android - 从Android中的SD卡获取歌曲路径

> ID：12227023
> 
> 赞同：2
> 
> 时间：2012-09-01T10:35:47.127
> 
> 标签：android, media-player, android-mediaplayer, android-sdcard, android-sdk-2.1

在我的 android 应用程序中，我想从 SD 卡中获取歌曲，但我无法获取该特定文件的路径。我使用的是不支持以下方法的 android api level 7。

```
Environment.getExternalStoragePublicDirectory (Environment.DIRECTORY_MUSIC); 
```

我也尝试过以下代码：

```
path = Environment.getExternalStorageDirectory(); 
```

但我不知道如何指定音乐文件的路径。请提出一些解决方案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T10:39:28.187

从 SD 卡获取路径和歌曲名称。您可以从 MediaStore 中找到歌曲的路径。

媒体提供程序包含内部和外部存储设备上所有可用媒体的元数据。

```
private String[] STAR = { "*" };

public void ListAllSongs() 
    { 
        Cursor cursor;
        Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

        if (isSdPresent()) {
            cursor = getContentResolver().query(allsongsuri, STAR, selection, null, null);

            if (cursor != null) {
                if (cursor.moveToFirst()) {
                    do {
                        String songname = cursor
                                .getString(cursor
                                        .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
                        int song_id = cursor.getInt(cursor
                                .getColumnIndex(MediaStore.Audio.Media._ID));

                        String fullpath = cursor.getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.DATA));

                        String albumname = cursor.getString(cursor
                                .getColumnIndex(MediaStore.Audio.Media.ALBUM));

                    } while (cursor.moveToNext());
                }
                cursor.close();
            }
        }
    }

public static boolean isSdPresent() 
{
    return android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:57:45.447

您可以扫描整个 sd 卡以查找任何文件格式，这里我用于 mp3 和 mp4。
您可以将其用于您需要的任何格式。

```
 /** To store the available media files */
    private List<String> mediaList = new ArrayList<String>();

    externalStoragePath = Environment.getExternalStorageDirectory()
                .getAbsolutePath();

        targetDir = new File(externalStoragePath);

        Log.d(" externalStoragePath ::: ", targetDir.getAbsolutePath());
public File[] mediaFiles = targetDir.listFiles();

/**
     * scanFiles
     * 
     * @param scanFiles
     */
    public void scanFiles(File[] scanFiles) {

        if (scanFiles != null) {
            for (File file : scanFiles) {

                if(mediaList.size() > 4){
                    return;
                }

                if (file.isDirectory()) {
                    // Log.d(" scaned File ::isDirectory: ",
                    // file.getAbsolutePath());
                    scanFiles(file.listFiles());

                } else {

                    addToMediaList(file);

                }

            }
        } else {

            Log.d(SCANNER,
                    " *************** No file  is available ***************");

        }
    }

/**
     * 
     * @param file
     */

    private void addToMediaList(File file) {

        if (file != null) {

            String path = file.getAbsolutePath();

            int index = path.lastIndexOf(".");

            String extn = path.substring(index + 1, path.length());

            if (extn.equalsIgnoreCase("mp4") || extn.equalsIgnoreCase("mp3")) {// ||

                Log.d(" scanned File ::: ", file.getAbsolutePath()
                        + "  file.getPath( )  " + file.getPath());// extn.equalsIgnoreCase("mp3"))
                                                                    // {
                Log.d(SCANNER, " ***** above file is added to list ");
                mediaList.add(path);

            }
        }

    } 
```

# cordova - 如何在jsouth中设置纯文本消息签名者

> ID：12227027
> 
> 赞同：1
> 
> 时间：2012-09-01T10:36:06.113
> 
> 标签：cordova, jsoauth

我正在科尔多瓦 2.0 中使用 jsoauth 1.3 创建 oauth 连接，谁能告诉我如何以纯文本形式发送消息签名者方法，因为我的服务器仅支持纯文本消息签名者方法。我的 oauth.get 函数工作正常，默认签名者是 HMAC-SHA1

**这是我的代码**

```
function oauthStart1() {
        var oauth;
        var requestParams;
        var options = {
            consumerKey : 'blahblah',
            consumerSecret : 'blahblah',
            callbackUrl : 'stx://blahblah'
        // signatureMethod: 'PLAIN_TEXT'
        };
        // information in
         var twitterKey = "twttrKey"; // what we will store our twitter user information in

        // our storedAccessData and Raw Data
        var storedAccessData, rawData = localStorage.getItem(twitterKey);

        // First thing we need to do is check to see if we already have the user saved!
        if(localStorage.getItem(twitterKey) != null){
            alert("localStorage not null")
            storedAccessData = JSON.parse(rawData); // Parse our JSON object
            options.accessTokenKey = storedAccessData.accessTokenKey; // This is saved when they first sign in
            options.accessTokenSecret = storedAccessData.accessTokenSecret; // this is saved when they first sign in
            localStorage.clear()
        } 
        else{ 
            alert("localStorage is null" ); 
            oauth = OAuth(options);
            alert(JSON.stringify(oauth));
            oauth
                    .get(
                            'http://231.123.123.243:8081/blahblah/oauth/initiate.action',
                            function(data) {
                                requestParams = data.text;
                                alert("requestParams" + requestParams);
                                window.plugins.childBrowser.showWebPage('http://231.123.123.243:8081/blahblah/oauth/authorize.action?'
                                        + data.text, { showLocationBar: true});                                                                                                                                             // page
                                        window.plugins.childBrowser.onLocationChange = function(loc) {
                                            if(loc.indexOf(options.callbackUrl) >=0 ){
                                                window.plugins.childBrowser.close();
                                                var index, verifier = '';            
                                                var params = loc.substr(loc.indexOf('?') + 1);
                                                alert("params"+ params);
                                                params = params.split('&');
                                                for (var i = 0; i < params.length; i++) {
                                                    var y = params[i].split('=');
                                                    if(y[0] === 'oauth_verifier') {
                                                        verifier = y[1];
                                                    }
                                                }
                                                oauth.get('http://231.123.123.243:8081/blahblah/oauth/authorize.action?oauth_verifier='+verifier+'&'+requestParams,
                                                    function(data) { 
                                                        alert("verify Success" + data)
                                                        var accessParams = {};
                                                        var qvars_tmp = data.text.split('&');
                                                        for (var i = 0; i < qvars_tmp.length; i++) {
                                                            var y = qvars_tmp[i].split('=');
                                                            accessParams[y[0]] = decodeURIComponent(y[1]);
                                                        }
                                                        var accessData = {};
                                                        accessData.accessTokenKey = accessParams.oauth_token;
                                                        accessData.accessTokenSecret = accessParams.oauth_token_secret;
                                                        alert("fine")
                                                        //localStorage.setItem(twitterKey, JSON.stringify(accessData));
                                                    },
                                                    function(data) {
                                                        alert("varify error");
                                                    }
                                                );

                                            }
                                }; 

                            }, function(data) {
                                alert("ERROR: " + data);
                            });
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:32:17.103

好吧，我检查了 jsoauth1.3.4 的代码，jsoauth 不支持纯文本消息签名器。

但如果有人想使用这个我有一个方法（不推荐）

在 jsoauth1.3.4.js的方法中附加以下函数，`OAuth.signatureMethod`以使 jsoauth 将您的 menthod 识别`messagesigner`为 PLAIN_TEXT

```
'PLAIN_TEXT': function (consumer_secret, token_secret) {
        var passphrase, signature, encode = OAuth.urlEncode;

        consumer_secret = encode(consumer_secret);
        token_secret = encode(token_secret || '');

        passphrase = consumer_secret + '&' + token_secret;

        return global.btoa(passphrase);
    } 
```

**未测试**

# runtime - 冒泡排序和快速排序的运行时间比较

> ID：12227028
> 
> 赞同：3
> 
> 时间：2012-09-01T10:36:19.160
> 
> 标签：runtime, quicksort, bubble-sort

我希望对两种排序算法进行运行时比较——Bubble sot 和 Randomized Quick sort。我的代码工作正常，但我想我正在使用一些原始技术。“时钟”计算发生在`int`，所以即使我尝试以微秒为单位获取时间，我也会得到类似 20000.000 微秒的结果。

代码：冒泡排序：

> ```
> #include <stdio.h>
> #include <stdlib.h>
> #include <stdbool.h>
> #include <time.h> 
> ```

```
int bubblesort(int a[], int n);

int main()
{
int arr[9999], size, i, comparisons;
clock_t start;
clock_t end;
float function_time;    

printf("\nBuBBleSort\nEnter number of inputs:");
scanf("%d", &size);
//printf("\nEnter the integers to be sorted\n");
for(i=0;i<size;i++)
    arr[i]= rand()%10000;

start = clock();    
comparisons= bubblesort(arr, size);
end = clock();
/* Get time in milliseconds */
function_time = (float)(end - start) /(CLOCKS_PER_SEC/1000000.0);

printf("Here is the output:\n");
for(i=0;i<size ;i++)
    printf("%d\t",arr[i]);
printf("\nNumber of comparisons are %d\n", comparisons);
printf("\nTime for BuBBle sort is: %f micros\n ", function_time);

return 0;
}

  int bubblesort(int a[], int n)
{
bool swapped = false;
int temp=0, counter=0;

for (int j = n-1; j>0; j--)
    {
        swapped = false;
        for (int k = 0; k<j; k++) 
            {
                counter++;
                if (a[k+1] < a[k]) 
                {
                    //swap (a,k,k+1)
                    temp= a[k];
                    a[k]= a[k+1];
                    a[k+1]= temp;
                    swapped = true;
                }
            }
        if (!swapped)
            break;

    }
return counter;
} 
```

样本输出：

> BuBBleSort
> 输入输入数：2000
> BuBBle 排序时间为：20000.000000 微

快速排序：

> ```
> #include <stdio.h>
> #include <stdlib.h>
> #include <time.h> 
> ```

```
int n, counter=0;
void swap(int *a, int *b)
{
int x;
x = *a;
*a = *b;
*b = x;
}

void quicksort(int s[], int l, int h)
{
int p; /* index of partition */
if ((h- l) > 0) 
{
    p= partition(s, l, h);
    quicksort(s, l, p- 1);
    quicksort(s, p+ 1, h);
}
}

int partition(int s[], int l, int h)
{

int i;
int p; /* pivot element index */
int firsthigh; /* divider position for pivot element */

p= l+ (rand())% (h- l+ 1);
swap(&s[p], &s[h]);
firsthigh = l;

for (i = l; i < h; i++)
if(s[i] < s[h]) 
    {
        swap(&s[i], &s[firsthigh]);
        firsthigh++;
    }

swap(&s[h], &s[firsthigh]);

return(firsthigh);
}  

int main()
{
int arr[9999],i;
clock_t start;
clock_t end;
float function_time;    

printf("\nRandomized Quick Sort");
printf("\nEnter the no. of elements…");
scanf("%d", &n);
//printf("\nEnter the elements one by one…");

for(i=0;i<n;i++)
    arr[i]= rand()%10000;

start = clock();    
quicksort(arr,0,n-1);
end = clock();
/* Get time in milliseconds */
function_time = (float)(end - start) / (CLOCKS_PER_SEC/1000.0);

printf("\nCounter is %d\n\n", counter);
printf("\nAfter sorting…\n");

for(i=0;i<n;i++)
    printf("%d\t",arr[i]);

printf("\nTime for Randomized Quick Sort is: %f ms\n", function_time);

return 0;
} 
```

样本输出：

> 随机快速排序
> 输入编号。元素数…9999
> 随机快速排序的时间为：0.000000 ms

如您所见，即使输入大小比冒泡排序大得多，快速排序也不会显示我的技术的任何运行时间。

有人可以通过运行时间比较的那部分来帮助改进它吗？

*ps：代码大量借鉴网上资源*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T19:40:54.847

试试下面的代码。

```
printf("Clock() %ld", clock());
sleep(1);
printf("\t%ld\n", clock()); 
```

我的结果是……

时钟（） 6582 6637

gettimeofday(2) 比时钟(3) 好。因为 gettiemofday(2) 将时间存储在结构中

```
struct timeval {  
    time_t      tv_sec;     /* seconds */  
    suseconds_t tv_usec;    /* microseconds */  
}; 
```

记录开始时间和停止时间，然后你可以通过公式得到以微秒为单位的经过时间

```
(stop.tv_sec - start.tv_sec) * 1000000\. + stop.tv_usec - start.tv_usec 
```

# java - 如何映射地图 使用 Eclipselink/MongoDB @NoSQL

> ID：12227031
> 
> 赞同：4
> 
> 时间：2012-09-01T10:36:41.233
> 
> 标签：java, mongodb, jpa, eclipselink, nosql

我尝试了各种方法，例如最简单的：

```
// Value object
@Embeddable
@NoSql(dataFormat=DataFormatType.MAPPED)
public class Attribute implements Serializable {

   @Basic
   private String someProp;

   // ... getter/setter omitted
}

@Entity
@NoSql(dataFormat=DataFormatType.MAPPED)
public class FancyEntity implements Serializable {

   @Id
   @GeneratedValue
   @Field(name="_id")
   private String id;

   @ElementCollection
   private Map<String,Attribute> attributes = new HashMap<>();

   // ... getter/setter omitted
} 
```

但这会产生错误：

```
Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.4.1.v20120825fb0a20b): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [myPersistenceUnit] failed.
Internal Exception: java.lang.ClassCastException: org.eclipse.persistence.eis.mappings.EISCompositeCollectionMapping cannot be cast to org.eclipse.persistence.mappings.foundation.MapComponentMapping
at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:221)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:1541)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1532)
at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:208) 
```

任何的想法？

我在 Glassfish 3.1.2 上使用最新的 2.4.1-SNAPSHOT。

**解决方案**

添加 @MapKey 注释并在可嵌入类中选择所需的键字段：

```
 @ElementCollection
   @MapKey(name="name")
   private Map<String,Attribute> attributes = new HashMap<>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:48:49.757

您应该能够使用 @MapKey 从 Attribute 对象定义映射键（我假设它的名称）。

EclipseLink 当前的 NoSQL 支持不支持 @MapKeyColumn、@MapKeyJoinColumn 和 @MapKeyClass。

请记录有关异常的错误，您应该得到更好的错误，或者应该更好地默认映射键。

# javascript - 无法在快捷方式管理器扩展中执行 chrome.tabs.XX 功能

> ID：12227034
> 
> 赞同：0
> 
> 时间：2012-09-01T10:37:11.160
> 
> 标签：javascript, linux, google-chrome, plugins

我正在尝试在快捷方式管理器中分配一个 javascript 块，

```
chrome.tabs.getSelected(null, function(tab) {
  alert (tab.url);
}); 
```

执行时，它告诉我 chrome.tabs 未定义，

所以我尝试在开发面板中执行它：

![在此处输入图像描述](../Images/4b4e698c4e1fd7bc732f25d1bd74bcc6.png)

这里可能缺少什么？需要加载内部 js 库吗？

铬版：`Version 21.0.1180.89 (154005)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:41:39.873

我认为`chrome.tabs`只能在扩展内部访问，因此您将无法从开发工具或快捷方式中访问它。

# java - 找不到所需的类（javax.activation.DataHandler 和 javax.mail.internet.MimeMultipart）。附件支持已禁用

> ID：12227035
> 
> 赞同：43
> 
> 时间：2012-09-01T10:37:20.767
> 
> 标签：java, xml, web-services, soap

我在调用 Web 服务中存在的方法时遇到问题。wsdl 是使用 AXIS 创建的。

当我尝试使用我的 java 代码调用它时，我从服务响应中获取空值。

我在控制台中打印出警告消息：

> 找不到所需的类（javax.activation.DataHandler 和 javax.mail.internet.MimeMultipart）。附件支持被禁用。

在尝试解决这个问题时，我在我的工作区构建路径中添加了 activation.jar 和 mail.jar，重新启动了服务器。

**编辑：**

右键单击 WSDL ==> 生成客户端

然后我得到了一个代理类，我用它写了这个来调用服务方法：

```
public class CallingWebService1 {

public static void main(String[] args) throws Exception {

    WebService1Proxy proxy1 = new WebService1Proxy();
    proxy1.setEndpoint("http://localhost:8045/WebService1/services/WebService1");

    EmployeeDetails details = proxy1.getDetails();
    System.out.println("Employee Id: " + details.getEmpId());
    System.out.println("Employee Name: " + details.getEmpName());
    System.out.println("Dept Id: " + details.getDeptId());
    System.out.println("Dept Name" + details.getDeptName());
    System.out.println("Age: " + details.getAge());
} 
```

但问题仍然存在:(

**更多信息：**

getDetails() 方法正在执行从 Oracle DB 获取一些记录的 DB 操作。为了执行 DB 操作，使用了 class12.jar。它与我正在做的调用服务方法有关吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-01T11:06:27.327

为了修复 javax.activation.DataHandler 问题，您必须在类路径中添加[JavaBeans Activation Framework](http://www.oracle.com/technetwork/java/javase/downloads/index-135046.html) activation.jar。

为了修复 javax.mail.internet.mimeMultipart 问题，您必须在类路径中添加[Java Mail API](http://www.oracle.com/technetwork/java/javamail/index.html) mail.jar。

控制台中打印的警告消息表明上述 jar 不在类路径中。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-08T05:46:51.097

只有**一个 jar (mail.jar) 就足以**解决这个问题。这个 jar 应该出现在你的类路径中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-15T06:18:58.253

不幸的是，wsdl 仍在使用中：（您可以通过在下面添加依赖项来解决此警告。

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.7</version>
    </dependency>
    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1.1</version>
    </dependency> 
```

# python - GAE 和 Python：我的字典值返回 None 而不是对象

> ID：12227036
> 
> 赞同：1
> 
> 时间：2012-09-01T10:37:34.850
> 
> 标签：python, google-app-engine

我正在使用 Python 和 GAE，我正在尝试创建一个字典，其中键是用户 ID，值是“学生”对象。但是，我的字典的值是 None 而不是学生对象。

```
{'60': , '59': } 
```

如果有人能指出我正确的方向，我将不胜感激！

学生.py

```
class Student:

def __init__(self, name, s_id, rew = {}):
    self.name = name.strip()
    self.rewards = {"Creativity": 0, "Helping Others":0, "Participation":0, "Insight":0}
    self.totalRewardPoints = 0   
    self.s_id = s_id 
```

Main.py（我只包含了相关代码）

```
class PageHandler(webapp2.RequestHandler):
def write(self, *a, **kw):
    self.response.out.write(*a, **kw)

def initialize(self, *a, **kw):
    webapp2.RequestHandler.initialize(self, *a, **kw)

def create_students(self):
    user = db.GqlQuery("SELECT * FROM User WHERE position='student'")

    for u in user:

        temp_id = str(u.key().id())
        self.students[temp_id] = student.Student(u.name, temp_id)

class MainPage(PageHandler):

students = {}

def get(self):

    user = db.GqlQuery("SELECT * FROM User WHERE position='student'")

    for u in user:

        temp_id = str(u.key().id())
        self.students[temp_id] = student.Student(u.name, temp_id)

    self.write(self.students)

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:47:51.230

对于初学者来说，Student 类需要从一些实现 appengine 数据存储持久性的模型类继承。如果您使用的是原始数据存储 api，则使用 db.Model，如果使用 ndb，则使用 nbd.Model。

其次，您没有展示如何将 (put()) 学生实体写入数据存储区。基于您没有从任何一个（db 或 ndb）继承的事实，您不太可能将任何内容保存到数据存储区。

当然，除非你不包括你的实际代码。如果您使用 db.Model 作为基类，那么您的奖励字段将不起作用。您可能应该将 ndb 作为替代起点并使用结构化属性。

您可能需要通过查看文档 [https://developers.google.com/appengine/docs/python/datastore/overview#Python_Datastore_API](https://developers.google.com/appengine/docs/python/datastore/overview#Python_Datastore_API)阅读 appengine 存储数据的内容， 您的代码看起来与 GAE（Google Appengine 代码）完全不同

您的学生班级应该看起来像（如果您希望奖励字段具有某种结构）

```
class Reward(ndb.Model):
    reward = ndb.StringProperty()
    value = ndb.IntegerProperty()

class Student(ndb.Model):
    name = ndb.StringProperty(required=True)
    rewards = ndb.StructuredProperty(Reward, repeated=True)
    total_reward_points = ndb.IntegerProperty()
    s_id = ndb.StringProperty() 
```

否则，如果您使用 db.Model，那么奖励将是 db.BlobProperty()，然后您将使用 json 来编码奖励字典，使用 pickle.dumps 或 json.dumps 在保存数据时。

# vb.net - 在移动的喷气式飞机上计算一天中的实时时间

> ID：12227044
> 
> 赞同：-3
> 
> 时间：2012-09-01T10:38:31.560
> 
> 标签：vb.net, time, date-arithmetic

使用 VB.Net 编码，我想计算我在移动喷气式飞机上旅行时的实时时间。当时间接近以下时间时，我将使用此信息提醒自己：04:00、13:00、17:00、19:00 和 21:00

飞行时间为9小时50分钟。该航班于 12:50 离开肯尼迪机场，并于 05:40 抵达伊斯坦布尔。

如果你能告诉我找到 19:00 和 04:00 所需的编码，那将非常感激，我可以根据你的编码找出其他时间。

我在想，如果我能算出 1 秒比我想我能算出的目标时间快多少。

示例：如果我手表上的 1 秒 = 飞机上的 3 秒，我可以算出在 10 分钟的旅行中，实际时间提前了 1/2 小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:19:53.593

如果您没有 GPS 位置或飞机的速度和航向，您将无法获得准确的时间。你能做的是近似的。

如果飞行时间为 10 小时，并且您在 12.00 离开，如果您在同一时区，您将在 22.00 到达。如果您要经过 6 个时区，那么目的地的实际时间将是 04.00。

这意味着过去 16 个小时只是“实时”时间的 10 个小时。所以 16/10 = 1.6 小时/实际小时。这意味着时间比“现实”快 1.6 倍。

创建一个有计时器的程序，每秒钟增加 0.6 秒。在起飞时启动计时器。

或者反过来。每 1/1.6 秒触发一次计时器，并为您的时钟增加一秒。这当然不是您当前位置的实时时间，而是近似值。

# html - 使 Jscript 不太可能从站点被复制？

> ID：12227045
> 
> 赞同：-2
> 
> 时间：2012-09-01T10:38:37.380
> 
> 标签：html, jscript

问题是我有一点 jscript，一旦用户在文本区域中输入文本，它就会更改文本并放入另一个文本区域。

我想要发生的是，如果有人复制它，那么当复制它的人在文本区域中出现一条消息说请征求我的许可。

这是一个我发现有人让它工作但不确定他们是如何做到的示例？

```
function flip(){var _0x4f33=["\x68\x72\x65\x66","\x66\x73\x79\x6D\x62\x6F\x6C\x73\x2E\x63\x6F\x6D\x2F","\x73\x65\x61\x72\x63\x68","\x74\x65\x78\x74\x2D\x73\x79\x6D\x62\x6F\x6C\x73\x2E\x63\x6F\x6D\x2F","\x66\x69\x6C\x65\x3A\x2F\x2F","\x48\x69\x21\x20\x3D\x29\x20\x50\x6C\x65\x61\x73\x65\x2C\x20\x63\x6F\x6E\x74\x61\x63\x74\x20\x6D\x65\x20\x61\x74\x20\x69\x68\x6F\x72\x2E\x69\x62\x6D\x40\x67\x6D\x61\x69\x6C\x2E\x63\x6F\x6D\x20\x69\x66\x20\x79\x6F\x75\x20\x77\x61\x6E\x74\x20\x74\x6F\x20\x75\x73\x65\x20\x61\x62\x6F\x71\x65\x20\x6F\x6E\x20\x79\x6F\x75\x72\x20\x77\x65\x62\x73\x69\x74\x65\x2E\x20\x49\x2C\x20\x61\x74\x20\x6C\x65\x61\x73\x74\x2C\x20\x77\x61\x6E\x74\x20\x74\x6F\x20\x62\x65\x20\x73\x75\x72\x65\x2C\x20\x79\x6F\x75\x27\x6C\x6C\x20\x6C\x69\x6E\x6B\x20\x74\x6F\x20\x6D\x79\x20\x46\x53\x79\x6D\x62\x6F\x6C\x73\x2E\x63\x6F\x6D\x20\x66\x72\x6F\x6D\x20\x74\x68\x65\x20\x70\x61\x67\x65\x20\x6F\x6E\x20\x77\x68\x69\x63\x68\x20\x79\x6F\x75\x20\x75\x73\x65\x20\x69\x74\x2E","\x76\x61\x6C\x75\x65","\x6F\x72\x69\x67\x69\x6E\x61\x6C","\x66","\x66\x6C\x69\x70\x70\x65\x64"];var result,hr=location[_0x4f33[0]];if(hr[_0x4f33[2]](_0x4f33[1])==-1&&hr[_0x4f33[2]](_0x4f33[3])==-1&&hr[_0x4f33[2]](_0x4f33[4])==-1){result=_0x4f33[5];}else{var result=flipString(document[_0x4f33[8]][_0x4f33[7]][_0x4f33[6]]);};document[_0x4f33[8]][_0x4f33[9]][_0x4f33[6]]=result;}function flipString(aString){var _0xf177=["\x6C\x65\x6E\x67\x74\x68","\x68\x72\x65\x66","\x63\x68\x61\x72\x41\x74","\x74\x6F\x4C\x6F\x77\x65\x72\x43\x61\x73\x65","","\x6A\x6F\x69\x6E","\x66\x69\x6C\x65\x3A\x2F\x2F","\x73\x65\x61\x72\x63\x68","",""];var last=aString[_0xf177[0]]-1;var hr=location[_0xf177[1]];var result=new Array(aString[_0xf177[0]]);for(var i=last;i>=0;--i){var c=aString[_0xf177[2]](i);var r=flipTable[c];r=r?r:flipTable[c[_0xf177[3]]()];result[last-i]=r?r:c;};var res=result[_0xf177[5]](_0xf177[4]);if(hr[_0xf177[7]](_0xf177[6])!==-1){res+=_0xf177[8]+_0xf177[9];};return res;}var flipTable={'?':'\u00BF','!':'\u00A1',a:'\u0250',b:'q',c:'\u0254',d:'p',e:'\u01DD',f:'\u025F',g:'\u0183',h:'\u0265',i:'\u0131',j:'\u027E',k:'\u029E',m:'\u026F',n:'u',r:'\u1d1a',t:'\u0287',v:'\u028C',w:'\u028D',y:'\u028E',A:'\u2200',E:'\u018e',F:'\u2132',H:'H',N:'N',I:'I',O:'O',W:'M',Z:'Z',S:'S',X:'X',T:'\u22a5',V:'\u039B',C:'\u03FD',P:'\u0500',R:'\u1588',U:'\u2229','.':'\u02D9','[':']','(':')','{':'}',"\'":',','<':'>','"':'\u201e','_':'\u203E','2':'5','3':'\u0190','4':'\u152d','6':'9','7':'\u2c62','\u203F':'\u2040','\u2045':'\u2046','\u2234':'\u2235','\r':'\n'};var _0xc5da=[];for(i in flipTable){flipTable[flipTable[i]]=i;}; 
```

如果有人对我如何做到这一点有任何想法，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T10:45:06.770

**没有 100% 完整的方法可以阻止用户复制您的源代码。无论您做什么，坚定的用户仍然可以获得代码。**
也就是说，这两个网站可能会对您有所帮助：[http://www.javascriptobfuscator.com](http://www.javascriptobfuscator.com)和[http://htmlobfuscator.com/](http://htmlobfuscator.com/)。不过请记住，这仍然可以被绕过。还有其他在线工具可以“去混淆”Javascript。并且无法查明用户何时复制您的代码，因此您不能让他们请求许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:43:02.877

他们可能会加密页面上的文本并用 JavaScript 解密。

评论：我认为这行不通。它只会困扰您的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:45:38.777

我同意没有绝对的治愈方法。

曾经有一个名为“HTML Armor”的商业程序可以完成您要求的所有事情，包括使完成的页面不会从用户自己保存的（“被盗”）网页副本中显示。

不幸的是，如果它可以被人类加密，它也可以很容易地被另一个人破解！

另一个缺点是，许多防病毒软件产品一旦将这些脚本中的大部分复制到用户的临时 Internet 文件夹中，就会将它们标记为恶意。毕竟，这就是他们的设计目的。这是因为许多恶意编码人员编写了蠕虫和其他“恶意软件”，并且通常在其脚本中使用某种形式的加密。实际上只有这么多方法可以将脚本加密到可以在需要时对其进行解密的地方！

所以我真的没有其他答案给你。

# apache - 无法显示 Apache2 (LAMP) 的默认页面

> ID：12227051
> 
> 赞同：1
> 
> 时间：2012-09-01T10:40:17.030
> 
> 标签：apache, lamp

我以前使用 WAMP，现在决定使用 LAMP。我按照 youtube 上的以下教程设置了 LAMP 服务器。

[http://www.youtube.com/watch?v=MrGD2X-sDQY](http://www.youtube.com/watch?v=MrGD2X-sDQY)

但是，我无法在视频中显示 apache2 的欢迎页面。

[http://www.youtube.com/watch?v=MrGD2X-sDQY&feature=player_detailpage#t=1045s](http://www.youtube.com/watch?v=MrGD2X-sDQY&feature=player_detailpage#t=1045s)

即使我在控制面板中卸载了 WAMP，我也怀疑端口 80 是否被 WAMP 占用。

有什么方法可以释放端口 80 还是有其他问题阻止我显示 apache2 的欢迎页面？

非常感谢！

# iphone - 选项卡推送通知 cocos2d 游戏崩溃

> ID：12227057
> 
> 赞同：5
> 
> 时间：2012-09-01T10:41:26.973
> 
> 标签：iphone, ios, cocos2d-iphone, push-notification

我正在开发一个 box2d 游戏。在游戏中我使用的是 PushWoosh 推送通知。它工作正常（从 PushWoosh 服务器获取推送通知），但是当我点击推送通知时，我的游戏崩溃了。在 Appdelegate 中像这样实现

-在 Appdelegate.h 中：

```
 @interface AppDelegate:NSObject<UIApplicationDelegate,AdColonyDelegate,PushNotificationDelegate,UIAlertViewDelegate>{
        UIWindow            *window;
        RootViewController  *viewController;
        PushNotificationManager *pushManager;
    }
    @property (nonatomic, retain) PushNotificationManager *pushManager;
    @property (nonatomic, retain) UIWindow *window;
    @property (nonatomic, retain) RootViewController    *viewController;
    @end

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
        // Init the window
    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationType)(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];   

    //initialize push manager instance
    pushManager = [[PushNotificationManager alloc] initWithApplicationCode:@"PushWoosh App_ID" appName:@"App_Name" ];
     pushManager.delegate = self;
     [pushManager handlePushReceived:launchOptions];
    /*pushManager = [[PushNotificationManager alloc] initWithApplicationCode:@"FA7CF-665BF" navController:self.viewController appName:@"Cricket" ];
    pushManager.delegate = self;
    [pushManager handlePushReceived:launchOptions];*/

    // Try to use CADisplayLink director
    // if it fails (SDK < 3.1) use the default director
    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    CCDirector *director = [CCDirector sharedDirector];

    // Init the View Controller
    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;

    //
    // Create the EAGLView manually
    //  1\. Create a RGB565 format. Alternative: RGBA8
    //  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
    //
    //
    EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                                   depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                        ];

    // attach the openglView to the director
    [director setOpenGLView:glView];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad)
    {
        if( ! [director enableRetinaDisplay:YES] )
            CCLOG(@"Retina Display Not supported");
    }

    //
    // VERY IMPORTANT:
    // If the rotation is going to be controlled by a UIViewController
    // then the device orientation should be "Portrait".
    //
    // IMPORTANT:
    // By default, this template only supports Landscape orientations.
    // Edit the RootViewController.m file to edit the supported orientations.
    //
#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeRight];
#endif

    [director setAnimationInterval:1.0/60];
    [director setDisplayFPS:YES];

    // make the OpenGLView a child of the view controller
    [viewController setView:glView];

    // make the View Controller a child of the main window
    [window addSubview: viewController.view];

    [window makeKeyAndVisible];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // Removes the startup flicker
    [self removeStartupFlicker];    

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if(![defaults integerForKey:@"First"]) {

        [[CCDirector sharedDirector]runWithScene:[MainMenu scene]];
    }
    else {

        [[CCDirector sharedDirector]runWithScene:[PlayAsGuestScene scene]];
    }

    return YES;
}

    - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{

         [pushManager handlePushReceived:userInfo];
}
   - (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken{
    [pushManager handlePushRegistration:deviceToken];

    //you might want to send it to your backend if you use remote integration
    NSString *token = [pushManager getPushToken];
} 
```

在控制台中我收到此错误： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AppDelegate onPushAccepted:]：无法识别的选择器已发送到实例 0xf50d290”

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:06:21.157

终于我明白了。我改为

```
-(void)applicationDidFinishLaunching:(UIApplication*)application{

  pushManager = [[PushNotificationManager alloc] initWithApplicationCode:@"PushWoosh App_ID" appName:@"App_Name" ];
     pushManager.delegate = self;

}

-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{

         //write own code
} 
```

我的应用程序正常工作而不会崩溃。

# multithreading - 当 InstanceContextMode 为具有 Net.Tcp 绑定的 WCF 服务的 PerCall 时，Multiple 的 ConcurrencyMode 是否具有相关性？

> ID：12227059
> 
> 赞同：10
> 
> 时间：2012-09-01T10:41:55.633
> 
> 标签：multithreading, wcf

我一直认为将 InstanceContextMode 设置为 PerCall 会使并发模式无关紧要，即使使用像 net.tcp 这样的会话感知绑定也是如此。这就是 MSDN 所说的 [http://msdn.microsoft.com/en-us/library/ms731193.aspx](http://msdn.microsoft.com/en-us/library/ms731193.aspx) “在 PerCallinstancing 中，并发是不相关的，因为每条消息都由一个新的 InstanceContext 处理，因此永远不会超过一个线程在 InstanceContext 中处于活动状态。”

* * *

但是今天我正在阅读 Juval Lowy 的书 Programming WCF Services，他在第 8 章中写道

> 如果per-call服务有传输级会话，是否允许并发处理调用是服务并发模式的产物。如果服务配置了 ConcurrencyMode.Single，则不允许同时处理挂起的调用，并且一次调度一个调用。[...] 我认为这是一个有缺陷的设计。如果服务配置了 ConcurrencyMode.Multiple，则允许并发处理。调用在到达时被分派，每个调用到一个新实例，并同时执行。这里有一个有趣的观察结果是，为了提高吞吐量，使用 ConcurrencyMode.Multiple 配置每次调用服务是一个好主意——实例本身仍然是线程安全的（因此您不会承担同步责任） ,

* * *

这与我的理解和 MSDN 所说的相矛盾。哪个是对的 ？在我的情况下，我有一个 WCF Net.Tcp 服务使用我的许多客户端应用程序创建一个新的代理对象，进行调用然后立即关闭代理。该服务具有 PerCall InstanceContextMode。如果我将 InstanceContextMode 更改为 Multiple 且线程安全行为不比 percall 更差，我会提高吞吐量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:53:31.807

阅读 Lowy 声明的关键词是“<em>in the interest of throughput”。Lowy 指出，在使用 ConcurrencyMode.Single 时，WCF 会盲目地实现一个锁来强制对服务实例进行序列化。锁很昂贵，而且这个不是必需的，因为 PerCall 已经保证第二个线程永远不会尝试调用同一个服务实例。

**在行为方面：** ConcurrencyMode 对于 PerCall 服务实例无关紧要。

**在性能方面：** ConcurrencyMode.Multiple 的 PerCall 服务应该稍​​微快一些，因为它没有创建和获取 ConcurrencyMode.Single 正在使用的（不需要的）线程锁。

我写了一个快速的基准测试程序，看看我是否可以测量单个与多个 PerCall 服务的性能影响：***基准测试显示没有有意义的差异。***

如果您想尝试自己运行它，我将其粘贴在下面的代码中。

**我试过的测试用例：**

*   600 个线程调用服务 500 次
*   200 个线程调用服务 1000 次
*   8个线程调用服务10000次
*   1个线程调用服务10000次

我在运行 Service 2008 R2 的 4 CPU VM 上运行它。除了 1 线程情况外，所有情况都受 CPU 限制。

**结果：所有的运行都在大约 5% 的范围内。** 有时 ConcurrencyMode.Multiple 更快。有时 ConcurrencyMode.Single 更快。也许适当的统计分析可以选出赢家。在我看来，它们足够接近，无关紧要。

这是一个典型的输出：

在 net.pipe://localhost/base 上 启动**单一服务... Type=SingleService ThreadCount=600 ThreadCallCount=500****运行时：45156759 滴答 12615** 毫秒

在 net.pipe://localhost/base 上 启动**多项服务... Type=MultipleService ThreadCount=600 ThreadCallCount=500****运行时：48731273 滴答** 13613 毫秒

在 net.pipe://localhost/base 上 启动**单一服务... Type=SingleService ThreadCount=600 ThreadCallCount=500****运行时：48701509 滴答 13605** 毫秒

在 net.pipe://localhost/base 上 启动**多项服务... Type=MultipleService ThreadCount=600 ThreadCallCount=500****运行时：48590336 滴答** 13574 毫秒

**基准代码：**

通常的警告：这是基准代码，它采用了不适合生产使用的捷径。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Description;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace WCFTest
{
    [ServiceContract]
    public interface ISimple
    {
        [OperationContract()]
        void Put();
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Single)]
    public class SingleService : ISimple
    {
        public void Put()
        {
            //Console.WriteLine("put got " + i);
            return;
        }
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)]
    public class MultipleService : ISimple
    {
        public void Put()
        {
            //Console.WriteLine("put got " + i);
            return;
        }
    }

    public class ThreadParms
    {
        public int ManagedThreadId { get; set; }
        public ServiceEndpoint ServiceEndpoint { get; set; }
    }

    public class BenchmarkService
    {
        public readonly int ThreadCount;
        public readonly int ThreadCallCount;
        public readonly Type ServiceType; 

        int _completed = 0;
        System.Diagnostics.Stopwatch _stopWatch;
        EventWaitHandle _waitHandle;
        bool _done;

        public BenchmarkService(Type serviceType, int threadCount, int threadCallCount)
        {
            this.ServiceType = serviceType;
            this.ThreadCount = threadCount;
            this.ThreadCallCount = threadCallCount;

            _done = false;
        }

        public void Run(string baseAddress)
        {
            if (_done)
                throw new InvalidOperationException("Can't run twice");

            ServiceHost host = new ServiceHost(ServiceType, new Uri(baseAddress));
            host.Open();

            Console.WriteLine("Starting " + ServiceType.Name + " on " + baseAddress + "...");

            _waitHandle = new EventWaitHandle(false, EventResetMode.ManualReset);
            _completed = 0;
            _stopWatch = System.Diagnostics.Stopwatch.StartNew();

            ServiceEndpoint endpoint = host.Description.Endpoints.Find(typeof(ISimple));

            for (int i = 1; i <= ThreadCount; i++)
            {
                // ServiceEndpoint is NOT thread safe. Make a copy for each thread.
                ServiceEndpoint temp = new ServiceEndpoint(endpoint.Contract, endpoint.Binding, endpoint.Address);
                ThreadPool.QueueUserWorkItem(new WaitCallback(CallServiceManyTimes),
                    new ThreadParms() { ManagedThreadId = i, ServiceEndpoint = temp });
            }

            _waitHandle.WaitOne();
            host.Shutdown();

            _done = true;

            //Console.WriteLine("All DONE.");
            Console.WriteLine("    Type=" + ServiceType.Name + "  ThreadCount=" + ThreadCount + "  ThreadCallCount=" + ThreadCallCount);
            Console.WriteLine("    runtime: " + _stopWatch.ElapsedTicks + " ticks   " + _stopWatch.ElapsedMilliseconds + " msec");
        }

        public void CallServiceManyTimes(object threadParams)
        {
            ThreadParms p = (ThreadParms)threadParams;

            ChannelFactory<ISimple> factory = new ChannelFactory<ISimple>(p.ServiceEndpoint);
            ISimple proxy = factory.CreateChannel();

            for (int i = 1; i < ThreadCallCount; i++)
            {
                proxy.Put();
            }

            ((ICommunicationObject)proxy).Shutdown();
            factory.Shutdown();

            int currentCompleted = Interlocked.Increment(ref _completed);

            if (currentCompleted == ThreadCount)
            {
                _stopWatch.Stop();
                _waitHandle.Set();
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            BenchmarkService benchmark;
            int threadCount = 600;
            int threadCalls = 500;
            string baseAddress = "net.pipe://localhost/base";

            for (int i = 0; i <= 4; i++)
            {
                benchmark = new BenchmarkService(typeof(SingleService), threadCount, threadCalls);
                benchmark.Run(baseAddress);

                benchmark = new BenchmarkService(typeof(MultipleService), threadCount, threadCalls);
                benchmark.Run(baseAddress);
            }

            baseAddress = "http://localhost/base";

            for (int i = 0; i <= 4; i++)
            {
                benchmark = new BenchmarkService(typeof(SingleService), threadCount, threadCalls);
                benchmark.Run(baseAddress);

                benchmark = new BenchmarkService(typeof(MultipleService), threadCount, threadCalls);
                benchmark.Run(baseAddress);
            }

            Console.WriteLine("Press ENTER to close.");
            Console.ReadLine();

        }
    }

    public static class Extensions
    {
        static public void Shutdown(this ICommunicationObject obj)
        {
            try
            {
                if (obj != null)
                    obj.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Shutdown exception: {0}", ex.Message);
                obj.Abort();
            }
        }
    }
} 
```

# css - 如何更改 CSS 模板中的列顺序以将重要内容放在首位？

> ID：12227062
> 
> 赞同：2
> 
> 时间：2012-09-01T10:42:15.600
> 
> 标签：css, templates, css-float

我有一个 3 列 CSS 模板，其中包含 tertiaryContent（右）、primaryContent（中）和 secondaryContent（左）列。当我使用 Lynx 来“查看机器人看到的内容”时，右列首先出现，因为它在 index.php 和 CSS 中的顺序中排在第一位，完全破坏了我的 SEO。即使在 SERP 上，右栏中的文本也会显示在链接下方。

这是我在 index.php 中得到的：

```
 <div id="outer">
    <div id="header">
    </div>
    <div id="content">
    <div id="tertiaryContent">
    </div>
    <div id="primaryContentContainer">
    <div id="primaryContent">
    </div>
    </div>
    <div id="secondaryContent">
    </div>
    <div class="clear">
    </div>
    </div> 
```

这就是我在 default.css 文件中得到的：

```
 #outer {padding: 0em; margin: 0em; width: 100%;}
    #header {position: relative; height: 10px;}
    #primaryContentContainer {float: right; margin: 0em -15em 0em -19em; width: 100%;}
    #primaryContent {margin: 0em 15em 0em 15em; padding: 0em 0em 1.5em 4.25em;}
    #secondaryContent {position: relative; float: left; width: 15em; padding: 0 0em 1.5em 1em;}
    #secondaryContent .xbg {position: absolute; right: 0em; bottom: -64px; height: 64px; width: 128px;}
    #tertiaryContent {position: relative; float: right; width: 16em; margin: 0em 0em 0em 0em; padding: 0em 1em 0em 0em;}
    #tertiaryContent .xbg {position: absolute; left: 0em; bottom: -64px; height: 64px; width: 128px;} 
```

我的问题是 - 我如何更改此代码以保持相同的布局，但首先按顺序显示 primaryContent，以便在阅读网站的文本版本时它是 #1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:21:05.500

使用绝对定位，您可以轻松地四处移动块，而不管它们在标记中的显示方式。

[简化演示](http://codepen.io/anon/pen/sqxAe)

HTML：

```
<div class="wrap">
<div class="primary content">one</div>
<div class="secondary content">two</div>
<div class="tertiary content">three</div>
</div> 
```

CSS：

```
.wrap{width:600px; position:relative; margin:0 auto;}
.content{width:200px; height: 500px; position: absolute; top:0;}
.primary {background: salmon; left:200px;}
.secondary{background: lightblue; left: 400px; }
.tertiary{background: goldenrod;} 
```

# php - PHP Curl 获取日志文件中的所有操作

> ID：12227063
> 
> 赞同：0
> 
> 时间：2012-09-01T10:42:17.167
> 
> 标签：php, sockets, curl, encode

我有一个 PHP **ENCODED**脚本，它使用**CURL**连接到其他服务器。所以我想获取该脚本通过 CURL 访问的所有 URL。

是否可以在文本文件中记录所有 CURL 动作？这怎么可能？

我应该更改 PHP 中 error_reporting 中的任何内容吗？

是否可以使用防火墙或其他任何东西来监控 PHP 套接字？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:26:50.877

我找到了一种方法，您可以使用 TCPDUMP 转储所有 tcp 连接，并可以在其上过滤主机目标。

谢谢

# wordpress - Wordpress add_rewrite_rule 页面重定向错误

> ID：12227064
> 
> 赞同：7
> 
> 时间：2012-09-01T10:42:34.090
> 
> 标签：wordpress, rewrite, add, rule

我正在尝试使用 wordpress 的 add_rewrite_rule 函数添加自定义规则，但它们不起作用。奇怪的是，每当我使用**Monkeyman Rewrite Analyzer**插件检查它们时，都会添加规则并匹配我的 URL。

当我尝试访问该页面时，它会重定向到错误的位置。

这是我的代码：

```
add_rewrite_tag('%cc%','([a-zA-Z]+)');
add_rewrite_tag('%id%','([0-9]+)');

add_rewrite_rule('job-details/([0-9]+)$', 'index.php?pagename=jobs&cc=show&id=$matches[1]', 'top');

global $wp_rewrite;
$wp_rewrite->flush_rules(); 
```

至于我的 URL，如果我尝试访问 URL site.com/job-details/1 ，它会将我重定向到 /jobs/ ，这是与我的插件关联的页面。

这是我的 .htaccess 文件

```
RewriteEngine On
RewriteBase /

RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:32:33.437

原来，我的脚本使用自定义函数通过 $_REQUEST 对象获取 GET 参数，该对象已被 wordpress 取消。

我使用以下代码来获取它。

```
global $wp_query;
$wp_query->query_vars['cc']; 
```

# joomla - 我们如何在 joomla 的组件视图中获取模块参数

> ID：12227065
> 
> 赞同：7
> 
> 时间：2012-09-01T10:42:50.163
> 
> 标签：joomla

如何在 Joomla 1.5 的组件中获取模块参数？我正在使用此代码，但它显示一个空结果。

```
jimport( 'joomla.application.module.helper' );
$module = &JModuleHelper::getModule( 'mod_used_car_image');

$params = new JParameter($module->params);

print_r($params); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:45:46.037

我得到了参数值。使用此代码获取它：

```
jimport( 'joomla.html.parameter' );
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModule('mod_name');
$moduleParams = new JRegistry();
$moduleParams->loadString($module->params);
$position = $moduleParams->get('position', '1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T21:59:48.623

您需要调用模块的“名称”，而不是模块的“类型”。

假设您将模块命名为“二手车图像”，您的代码应为：

```
jimport( 'joomla.application.module.helper' );
$module = &JModuleHelper::getModule( 'Used Car Image');

$params = new JParameter($module->params);

print_r($params); 
```

这是手册：

[http://docs.joomla.org/JModuleHelper/getModule](http://docs.joomla.org/JModuleHelper/getModule)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T08:50:14.953

```
$module = JModuleHelper::getModule('modulename');
$params = new JRegistry($module->params);
var_dump($params); 
```

这就是joomla 3.0之后的使用方法

# tfs - Team Foundation Server：按版本和修补程序进行分支

> ID：12227072
> 
> 赞同：1
> 
> 时间：2012-09-01T10:43:23.617
> 
> 标签：tfs, release, branching-and-merging, hotfix

我在问自己如何通过发布和修补程序管理分支。

例如，如果我们有一个主分支，一个发布分支 V1，以及每个发布分支（developmet V1 和 V2）的发布分支 V2 和开发分支，并且我们在发布分支 V1 中发现了一个错误。我们必须开发一个修补程序，但是如何在发布分支 V2 和开发分支中合并这个修补程序。像这样：将 V1 发布到 Main 以发布 V2，将 main 发布到开发 V1 和 V2 ？

如果我这样合并，发布到发布 V2 是否已过时？

但是如何管理主分支？它不应该尽可能稳定吗？以及这个主分支是如何管理的，因为有很多合并，所以哪个版本的开发在 main 中？

通过这种模式，我将介绍客户可以拥有不同版本的产品的情况。

谢谢。

![在此处输入图像描述](../Images/a5a0a05b766f8402e9d1218a3c2695c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:02:21.213

您按以下顺序执行此操作：

1.  `Release 1`在分支中创建修补程序
2.  合并到`Main`
3.  合并到`Release 2`
4.  将其合并到`Development`您拥有的任何分支

（当然，每次合并后都有一个稳定）

> 但是如何管理主分支？它不应该尽可能稳定吗？

是的，它应该。这就是为什么它必须被测试覆盖。

# java - 未能加载 sigar-amd64-winnt：java.lang.NullPointerException

> ID：12227074
> 
> 赞同：1
> 
> 时间：2012-09-01T10:43:27.753
> 
> 标签：java, nullpointerexception, sigar

我是 sigar 和 java 中的本机库编程的新手，所以也许这只是一个简单的问题，但我自己找不到结果。我在 win 7（64 位）操作系统上使用 eclipse indigo。我已采取以下步骤：

将 sigar.jar 和 log4l.jar 添加到 jre6/lib，将 sigar-amd64-winnt.dll（也是 x86 的文件）文件添加到 ./Program Files/Java/jre6/lib。然后我只想创建一个新的 sigar() 但得到以下异常：

```
Failed to load sigar-amd64-winnt: java.lang.NullPointerException
org.hyperic.sigar.SigarException: Failed to load sigar-amd64-winnt: java.lang.NullPointerException
    at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:170)
    at org.hyperic.sigar.Sigar.<clinit>(Sigar.java:100)
    at MemExample.<clinit>(MemExample.java:8)
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.hyperic.sigar.Mem.gather(Lorg/hyperic/sigar/Sigar;)V
    at org.hyperic.sigar.Mem.gather(Native Method)
    at org.hyperic.sigar.Mem.fetch(Mem.java:30)
    at org.hyperic.sigar.Sigar.getMem(Sigar.java:304)
    at MemExample.getInformationsAboutMemor 
```

我已经尝试操作 VM-Arguments（在 中`Run Config -DJava.library.path="path/of/lib"`），将 java 构建路径中的本机库设置为 sigar/lib 的路径，并在我自己的程序中使用`System.setProperty("path", "-")`. 直到现在，所有这些都是不成功的。我一步一步地屈服于绝望。

**编辑：** sigar 是否可能仅适用于 AMD？一些朋友在 AMD 处理器上尝试了相同的代码并获得了 win 7 (32b) 并且它可以工作。我已经在 hyperic sigar 开发者论坛中寻找答案，但我找不到任何有用的提示或答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:10:15.617

似乎缺少 sigar-amd64-winnt.lib：http: [//communities.vmware.com/message/1947455#1947455](http://communities.vmware.com/message/1947455#1947455)

# android - 按下后停止手电筒

> ID：12227078
> 
> 赞同：0
> 
> 时间：2012-09-01T10:44:48.860
> 
> 标签：android, multithreading, android-camera

我正在使用一个线程来运行手电筒，我想在按下背部后停止该线程。

我使用以下代码启动线程：

```
progressDialog = new ProgressDialog(MainActivity.this);
progressDialog.setMessage("Flashing...");
progressDialog.show();

thread = new Thread(MainActivity.this);
thread.start(); 
```

线程正在做：

```
public void run() {
    isOn = false;
    cam = Camera.open();
    p = cam.getParameters();
    try {
        for (int i = 0; i < pattern.length; i++) {
            if (isOn) {
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                cam.setParameters(p);
                Thread.sleep(pattern[i]);
                isOn = false;
            } else {
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                cam.setParameters(p);
                Thread.sleep(pattern[i]);
                isOn = true;
            }
        }
    }
    catch (InterruptedException e) {
        e.printStackTrace();
    }
    cam.release();
    handlerFinish.sendEmptyMessage(0);
}

private Handler handlerFinish = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        progressDialog.dismiss();
    }
}; 
```

我已经尝试停止，但只有进度对话框被关闭，但手电筒仍在工作：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    p.setFlashMode(Parameters.FLASH_MODE_OFF);
    cam.setParameters(p);
    isOn = false;
    thread.stop();
} 
```

我可以做些什么来实现我的目标（按下后停止线程和手电筒）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:52:51.790

试试这个循环来停止线程

```
 boolean retry = true;

  while (retry) {

 try {

  thread.join();

   retry = false;

  } catch (InterruptedException e) {

  // try again shutting down the thread

  }

  } 
```

# winforms - 将 CUDA 添加到 WFA

> ID：12227079
> 
> 赞同：0
> 
> 时间：2012-09-01T10:44:56.627
> 
> 标签：winforms, visual-studio-2010, cuda, nvidia

我正在尝试在 WFA 应用程序中使用 cuda 内核（Cuda Toolkit 中包含的一些 CUPTI 示例来获取有关 GPU 和性能的信息）。我应该怎么做？

当我尝试添加 .cu 文件时，它会向我显示此类错误：

“此声明没有存储类或类型说明符”

带下划线的内容是 cuda 包含文件，因此是其他 cuda 元素。

需要明确的是，我可以运行 CUDA 运行时项目和 cuda 应用程序——这不会造成任何问题。

我正在使用 win 7、visual studio 2010，我有最新的工具包、驱动程序和 Nsight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:44:21.640

在解决方案资源管理器中，右键单击您的项目并选择“Build Customizations...”，然后选中“CUDA 4.X(.targets,.props)”。

# python - 一种在 Linux 和 OS X 操作系统上获取用户安装包路径的方法？（可用于 2.5 - 2.7 之间的 Python 版本）

> ID：12227084
> 
> 赞同：0
> 
> 时间：2012-09-01T10:45:13.357
> 
> 标签：python, linux, macos, path, python-2.x

```
>>> import distutils.sysconfig
>>> distutils.sysconfig.get_python_lib()
/usr/lib/python2.7/dist-packages 
```

但我想要这条路：`/usr/local/lib/python2.7/dist-packages`. 我无法使用该`sysconfig`模块，因为它仅在 python2.7 上受支持，并且该模块没有 PyPI 下载。所以我什至不能使用需求文件让其他用户用 pip 下载它。

那么，有什么方法可以获取适用于 Linux 和 OS X 操作系统的已安装软件包的路径吗？（甚至所有基于 Unix 的操作系统）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:02:37.403

如果您需要函数的特定功能，[该模块的源代码](http://hg.python.org/cpython/file/2370e331241b/Lib/distutils/sysconfig.py)`get_python_lib`非常简单，根本不使用任何 Python 2.7 特定语法；你可以简单地向后移植它。

您基本上需要以下定义和两个功能：

```
import os
import sys
from distutils.errors import DistutilsPlatformError

PREFIX = os.path.normpath(sys.prefix)
EXEC_PREFIX = os.path.normpath(sys.exec_prefix)

def get_python_version():
    """Return a string containing the major and minor Python version,
    leaving off the patchlevel.  Sample return values could be '1.5'
    or '2.2'.
    """
    return sys.version[:3]

def get_python_lib(plat_specific=0, standard_lib=0, prefix=None):
    """Return the directory containing the Python library (standard or
    site additions).

    If 'plat_specific' is true, return the directory containing
    platform-specific modules, i.e. any module from a non-pure-Python
    module distribution; otherwise, return the platform-shared library
    directory.  If 'standard_lib' is true, return the directory
    containing standard Python library modules; otherwise, return the
    directory for site-specific modules.

    If 'prefix' is supplied, use it instead of sys.prefix or
    sys.exec_prefix -- i.e., ignore 'plat_specific'.
    """
    if prefix is None:
        prefix = plat_specific and EXEC_PREFIX or PREFIX

    if os.name == "posix":
        libpython = os.path.join(prefix,
                                 "lib", "python" + get_python_version())
        if standard_lib:
            return libpython
        else:
            return os.path.join(libpython, "site-packages")

    elif os.name == "nt":
        if standard_lib:
            return os.path.join(prefix, "Lib")
        else:
            if get_python_version() < "2.2":
                return prefix
            else:
                return os.path.join(prefix, "Lib", "site-packages")

    elif os.name == "os2":
        if standard_lib:
            return os.path.join(prefix, "Lib")
        else:
            return os.path.join(prefix, "Lib", "site-packages")

    else:
        raise DistutilsPlatformError(
            "I don't know where Python installs its library "
            "on platform '%s'" % os.name) 
```

当然，您可以将长函数缩减为您的平台所需的分支；对于 OS X 那将是：

```
def get_python_lib(plat_specific=0, standard_lib=0, prefix=None):
    if prefix is None:
        prefix = plat_specific and EXEC_PREFIX or PREFIX

    libpython = os.path.join(prefix,
                             "lib", "python" + get_python_version())
    if standard_lib:
        return libpython
    else:
        return os.path.join(libpython, "site-packages") 
```

请注意，Debian[修补此函数](http://ftp.de.debian.org/debian/pool/main/p/python2.7/python2.7_2.7.3-4.diff.gz)以在默认情况下返回`dist-packages`，这不适用于 OS X。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:09:07.360

如果你想要路径，你可以使用 sys.path：

```
import sys
print sys.path 
```

如果要配置它，可以设置环境变量 PYTHON_PATH：

```
export PYTHON_PATH=/usr/local/lib/python2.7/dist-packages 
```

如果您想在不更改 PYTHON_PATH 的情况下动态添加它，也可以在 python 中扩展它：

```
import sys
sys.path.extend(['/usr/local/lib/python2.7/dist-packages']) 
```

# perl - 在迭代 for 循环中使用 srand(time¦$$) 时如何避免重复？

> ID：12227085
> 
> 赞同：1
> 
> 时间：2012-09-01T10:45:20.220
> 
> 标签：perl, for-loop, srand

我在 for 循环中迭代 perl 脚本并`srand(time¦$$)`在我的脚本中使用来播种随机数。

在我的输出中，如果我一次只做一个而不是使用 for 循环，当我得到单个结果时，我会得到重复的结果。是因为`srand`线吗？有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T10:51:05.583

使用相同号码的调用会`srand`导致以下`rand`调用返回相同的数字序列。因此，如果您`srand(time() | $$)`快速连续执行（例如，在同一秒内），那么您就是在这样做：`srand`使用相同的值调用会产生相同的序列`rand`。

请参阅 perldoc 页面以[`srand`](http://perldoc.perl.org/functions/srand.html).

文档还提到的一件事是，如果您在`rand`没有`srand`先调用的情况下调用，那么 Perl 实际上会`srand`为您调用。因此，您实际上并不需要`srand`首先在脚本中调用 to。

该文档还强烈建议不要对`srand`每个进程多次调用，因为这会导致熵损失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T10:53:12.790

不是 Perl 专家，但这肯定是由于循环的一次迭代快于 1 毫秒，因此使用相同的种子值多次调用 srand 函数。您应该在 for 循环之外初始化随机数生成器（或完全省略它）；在循环内部，只需使用 rand。

# c# - 亲子关系

> ID：12227087
> 
> 赞同：-2
> 
> 时间：2012-09-01T10:45:40.470
> 
> 标签：c#, asp.net, sql, sql-server-2008

我想在子页面的关闭事件中调用一个函数来绑定父页面的网格视图。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:54:30.323

如果我正确理解了您的问题，那么前段时间我也有类似的要求。看看这个页面： http: [//www.codeproject.com/Articles/13358/Refresh-a-GridView-control-on-the-parent-page-from](http://www.codeproject.com/Articles/13358/Refresh-a-GridView-control-on-the-parent-page-from)。我当时发现它很有用。如果我不理解您的问题，请告诉我，我将修改我的答案。

# python - 如何在python中导入ab？

> ID：12227097
> 
> 赞同：0
> 
> 时间：2012-09-01T10:48:00.433
> 
> 标签：python, import

我尝试使用`__init__.py`.

我的目录：

```
 sam@sam-M51Kr:~/code/python$ tree
 .
 |-- __init__.py
 |-- lib
 |   |-- __init.py
 |   |-- sam_lib.py
 |   `-- sam_lib.pyc
 `-- test.py

 1 directory, 5 files
 sam@sam-M51Kr:~/code/python$ 
```

我`__init__.py`的都是空的。

我的`lib/sam_lib.py`：

```
k='hello!' 
```

我的`test.py`：

```
import python.lib.sam_lib
print(sam_lib.k) 
```

当我运行时：

```
 sam@sam-M51Kr:~/code/python$ python test.py 
 Traceback (most recent call last):
   File "test.py", line 1, in <module>
     import python.lib.sam_lib
 ImportError: No module named python.lib.sam_lib
 sam@sam-M51Kr:~/code/python$ 
```

如何用语法解决它`import x.x`？

我应该使用`__init.py__`吗？

===============================

我修改`lib/__init.py`为`lib/__init__.py`

我尝试修改`test.py`：

```
 from . import lib.sam_lib as sam_lib
 print(sam_lib.k) 
```

它会导致错误：

```
 sam@sam-M51Kr:~/code/python$ python test.py 
   File "test.py", line 1
     from . import lib.sam_lib as sam_lib
                      ^
 SyntaxError: invalid syntax
 sam@sam-M51Kr:~/code/python$ 
```

当我修改为：

```
 import lib.sam_lib as sam_lib
 print(sam_lib.k) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T10:55:51.877

您的代码在不同级别有错误

*   该文件`__init.py`应该是`__init__.py`
*   在python中，您需要使用其相对路径访问对象：当您这样做时`import a.b.c`， `c.x`必须使用对象访问对象，`a.b.c.x`除非您使用`import a.b.c as c`

要修复代码，请使用：

```
import lib.sam_lib as sam_lib
print(sam_lib.k) 
```

Note that `import python.lib.sam_lib as sam_lib` or `from .lib import sam_lib`would have worked if test.py is imported as a module as in `import python.test` from a code in the upper level directory, not when you run test.py directly.

# refinerycms - 如何在 RefineyCMS 的添加新用户视图中创建新的自定义字段

> ID：12227099
> 
> 赞同：0
> 
> 时间：2012-09-01T10:48:26.487
> 
> 标签：refinerycms

我可以在 RefineryCMS 管理员的添加新用户视图中添加新的自定义字段吗？我以超级用户身份登录我想创建一个新用户并希望能够与一个国家/地区关联，我创建了一个单独的扩展来添加国家/地区。请帮忙。卡在这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:17:11.580

大家好，这就是我在我的应用程序中的做法，它 100% 工作......你需要覆盖这个视图 [**查看 app/views/refinery/admin/users/_form.html.erb** ]。按照下面给出的步骤

第 1 步：转到终端并浏览到您的项目文件夹并运行此命令

**耙炼油厂：覆盖视图=炼油厂/admin/users/_form.html**

**不要使用 .erb**这将在您的 app>views>refinery>admin>user 中复制与 add_new_user 相关的特定视图（基本上是部分视图），名称为 _form.html.erb。现在您有了页面代码添加任何字段想。

# php - 在 CakePHP 中使用日期作为路由

> ID：12227101
> 
> 赞同：0
> 
> 时间：2012-09-01T10:48:43.607
> 
> 标签：php, cakephp

我的视图中有以下链接，它通过传递帖子的日期和 slug 来调用帖子：

`<?php echo $this->Html->link($post['Post']['title'], array('controller' => 'posts', 'action' => 'view', 'date'=>date('Y/m', strtotime($post['Post']['datetime'])), 'slug'=> $post['Post']['slug'])); ?></h2> <h4><?php echo $post['Post']['datetime']; ?><`

如您所见，我使用 strtotime 使日期时间更漂亮，以便在 URL 中使用。

我实际上并没有使用控制器中的日期来将帖子从数据库中拉出，只是使用蛞蝓，所以它并不重要。

然而问题在于，由于日期中有一个`/`，路由器会感到困惑并认为它是 url 的两个独立部分。我该如何解决？

我的路线如下：

```
Router::connect('/news/:date/:slug',
                array('controller' => 'posts', 'action' => 'view'),
                array(
                    //'date'   => '[A-Za-z0-9\._]+',
                    'slug' => '[A-Za-z0-9\._]+',
                    'pass' => array('date', 'slug')
                )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:56:40.053

你在用蛋糕2吗？如果你这样做，你可以试试这个，正如书中所说：

> 除了贪心星之外，`/*`还有`/**`尾星语法。使用尾随双星，将捕获 URL 的其余部分作为单个传递的参数。当您想使用包含 / 的参数时，这很有用：

```
<?php
Router::connect(
    '/pages/**',
    array('controller' => 'pages', 'action' => 'show') );
?> 
```

> /pages/the-example-/-and-proof 的传入 URL 将导致 the-example-/-and-proof 的单个传递参数。

但我想你应该先通过slug。

否则，您可以更改您`/`的 by `-`（或其他任何内容）。但是，如果您想保留它们，您可以将日期声明为路由中的单独参数，例如：

```
Router::connect(
    '/news/:year/:month/:day',
    array('controller' => 'posts', 'action' => 'view', 'day' => null),
    array(
        'year' => '[12][0-9]{3}',
        'month' => '0[1-9]|1[012]',
        'day' => '0[1-9]|[12][0-9]|3[01]'
    )
); 
```

# javascript - IE9 javascript嵌套`createElement`失败

> ID：12227113
> 
> 赞同：0
> 
> 时间：2012-09-01T10:51:33.677
> 
> 标签：javascript, internet-explorer-9

我有 2 个嵌套`with`语句，每个语句都有一个`createElemet`函数，它在除 IE9 之外的所有浏览器中都能正常运行，在 IE9 中它甚至没有给出错误，这是什么问题？

编码：

```
with(block = document.createElement('div')){
    with (detaildiv = document.createElement('div'))
    {
        alert('test');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:07:34.860

从技术上讲，问题是ie中的一个错误。

实际上，问题在于您正在编写糟糕的代码，创建嵌套的本地范围是因为您可以，而不是因为您需要它 - 结果对可维护性和性能造成了很大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:43:35.790

[正如我在评论](https://stackoverflow.com/questions/12227113/ie9-javascript-nested-createelement-fails#comment16396537_12227113)中已经提到的，我找到了一个非常简单的解决方案：
使用`window.document.***`而不是直接`document.***`在内部使用`with`：

```
with(block = document.createElement('div')) { 
    with (detaildiv = window.document.createElement('div')) { 
        alert('test'); 
    } 
} 
```

您还应该考虑重构代码并用`with`其他构造替换语句。

# android - 如何在 android 中知道设备是移动设备还是打印机？

> ID：12227114
> 
> 赞同：0
> 
> 时间：2012-09-01T10:51:58.573
> 
> 标签：android, printing

我想通过蓝牙从安卓手机打印。
我使用蓝牙适配器获取列表中的所有设备。
我只想知道列表中的哪些设备是移动设备，哪些是打印机。
是否有任何代码、方法或函数可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:12:06.037

每个蓝牙设备都实现了一组[蓝牙配置文件](http://en.wikipedia.org/wiki/Bluetooth_profile)，这些配置文件决定了设备的类型。这么说配置文件定义了设备的能力。因此，像 BT 鼠标或操纵杆这样的设备以这种方式实现 HID（人机接口设备），您的系统会为这些任务识别它们。即使您在手机上扫描设备，您也会在具有不同功能的设备前面看到不同的图标

每个配置文件都有特定的 UUID，您需要使用它来识别该设备。这是[UUID 的列表](http://www.avetana-gmbh.de/avetana-gmbh/produkte/doc/javax/bluetooth/UUID.html)

因此，打印机可能会实施[BPP](http://en.wikipedia.org/wiki/Bluetooth_profile#Basic_Printing_Profile_.28BPP.29)配置文件。每当您通过 BT 提供打印作业时，您的系统都会搜索所有附近的 BT 设备。然后对于每个这些设备，搜索它实现的配置文件列表，然后将最佳匹配设备提供给您确认打印。现在，由于配置文件由它们的 UUID 标识，系统会查找特定的 UUID 集。

基于 UUID 可以在一定程度上识别打印机。但是你不能总是确定（我认为）。

# jquery - CSS 菜单列表项需要显示在 div 容器内

> ID：12227121
> 
> 赞同：3
> 
> 时间：2012-09-01T10:52:39.370
> 
> 标签：jquery, css, html, menu, overflow

我正在使用这个下拉菜单：[css-tricks simple jquery drop down](http://css-tricks.com/examples/SimplejQueryDropdowns/)，我需要它完全显示在另一个 div 中。

我的 div 是可拖动的`$('#textbox')`。您可以在此处的 jsfiddle 中看到它：http: [//jsfiddle.net/asaakius/5nGYS/13/](http://jsfiddle.net/asaakius/5nGYS/13/)。我已将相关的 CSS 放在这个 jsfiddle 中。

你会看到有一个带有 的可拖动框`x`，这是可以滚动的菜单。问题是菜单应该显示**在**文本框中，但它没有。`$('#textbox')`我认为这是因为它从右侧溢出。有没有办法让这个菜单显示在左边？

我还在页面的一侧放了一个扁平的 x，而不是任何容器的一部分，因此您知道菜单正常工作时的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:03:07.010

演示[在这里](http://jsfiddle.net/5nGYS/15/)。
这是我所做的：
首先，可拖动对象内的下拉菜单根本没有出现。我把下拉菜单`ul`放在`li`有“x”按钮的里面。然后，在 CSS 规则中`ul.dropdown ul`（就在 之后`/* LEVEL TWO */`），我更改`left: 0;`为`right: 0;`并更改宽度以使其适合可拖动的内容。
希望这可以帮助！
注意：如果您希望下拉文本右对齐，请添加`text-align: right;`到`ul.dropdown ul`规则中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:11:12.067

这是你的答案：http: [//jsfiddle.net/5nGYS/17/](http://jsfiddle.net/5nGYS/17/)

# asp.net - Excel 从第 3 行导入，无需格式化

> ID：12227123
> 
> 赞同：0
> 
> 时间：2012-09-01T10:52:57.243
> 
> 标签：asp.net, excel, import, asp.net-4.0, import-from-excel

我想导入具有动态列的 excel 文件（列将因文件而异）。
情况是
1 。在第一行它有表名和日期。
2\. 第二行包含列名
3\. 第三行包含需要导入的数据。
4\. 此列（第二行标题）将根据表格而有所不同。
请参阅示例 excel 格式。

```
----------
Table Name                  Exported Date: 09_01_2012
----------
Col1   Col2  Col3  Col4     Col5               Col6
----------
2      3     4     0        8/27/2012 13:04    0
4      3     4as   0        8/27/2012 13:04    0
8      3     aas   0        8/27/2012 13:04    3
---------- 
```

我想根据行号来具体获取。意味着我想拆分标题行和数据行。并根据列名（第二行）将数据行保存到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:00:34.787

我有同样的问题，我已经部分解决了。列的顺序对于此工作很重要。
如果第一行是标题，则可以轻松地将列作为 SQL 导入，并且可以按任意顺序：

```
SELECT Col1 AS [DBCol1], 
Col2 AS [DBCol2], 
Col3 AS [DBCol3], 
Col4 AS [DBCol4], 
Col5 AS [DBCol5], 
Col6 AS [DBCol6]
FROM SheetName$ 
```

如果第一行不是标题，则列的顺序很重要。它可以从 SQL 导入为：

```
SELECT F1 AS [DBCol1],
F2 AS [DBCol2],
F3 AS [DBCol3],
F4 AS [DBCol4],
F5 AS [DBCol5],
F6 AS [DBCol6]
FROM SheetName$
WHERE F2 IS NOT NULL AND F3 IS NOT NULL AND F1 <> 'Col1' 
```

注意列名的不同。我遇到的问题是让第二个导入没有错误。第一个导入使用第一行作为标题，第二个不是。对于第二个工作来说，重要的是您知道空列和标题的第一列是固定名称。您可以尝试使用文件命名约定来更改数据指向的表。
**编辑：**在从 Excel 导入中找到答案[- 标题不在第 1 行](https://stackoverflow.com/questions/4761234/importing-from-excel-header-is-not-on-row-1)

```
SELECT F1 AS [DBCol1],
F2 AS [DBCol2],
F3 AS [DBCol3],
F4 AS [DBCol4],
F5 AS [DBCol5],
F6 AS [DBCol6]
FROM [SheetName$A3:G65536] 
```

**Edit:** I finally found the answer that I needed.
First - My entire problem happened because the first row of the spreadsheet was not the header.
The problem I was having had to do with the first column having to be required to be text only. No mixed data types. Any data in that first column had to be forced to be text by pre-pending an apostrophe (') to any numerical cells. This was not necessary if the header row was the first row and the "First row is header" checkbox was checked. Many of the other parts of the solution were required also. The "WHERE" clause was necessary but the array selection (A3:G65536) was not.

# php - 从 mysql 数据库中获取值

> ID：12227124
> 
> 赞同：-1
> 
> 时间：2012-09-01T10:53:09.787
> 
> 标签：php, mysql

嗨，我编写了以下函数来从我的数据库中获取一个值：

```
function getSlCreatedate($sid) {
    $query1 = "SELECT Sub_type FROM `Sub` where `Sub_id` = $sid";
    $queryresult1 = mysql_query($query1);
    $row1 = mysql_fetch_assoc($queryresult1);
    $type1 = $row1['created_ts'];
    if($type1 == 'SL') {
    $query2 = "SELECT Sub_attr_value FROM `Sub_attr_list` WHERE `Sub_attr_type_id` = 20 AND `Sub_id` = $sid";
    $queryresult2 = mysql_query($query2);
    $row2 = mysql_fetch_assoc($queryresult2);
    $type2 = $row2['Sub_attr_value'];
    if($type2 == " "){
    $query3 = "SELECT Created_ts FROM `Sub` WHERE `Sub_id`= $sid";
    $queryresult3 = mysql_query($query3);
    $row3 = mysql_fetch_assoc($queryresult3);
    return $row3['Created_ts'];
    }
    else {
    return $type2['Sub_attr_value'];
    }
    }
    else
    return 0;
} 
```

什么条件是我需要首先检查数据库中的 Sub_type 以获得给定的“sid”值，如果返回“SL”作为结果，那么我需要从“Sub_attr_list”表中获取“Sub_attr_value”，如果该值返回空行或值为NULL，然后我必须将该sid的“Created_ts”值返回到页面，当我在我的PHP MyAdmin中单独执行时，这里所有的查询都工作正常，谁能指导我完成这个，我不能从这里获取值到页面。

我的页面中的函数调用如下：

```
 $sldate = db_func::getSlCreatedate($sub_list[$i]['Sub_id']); 
```

幸运的是，它没有显示任何错误，也没有显示预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:23:04.420

```
function getSLCreatedDate($sid) {

    $query = "SELECT s.created_ts, sa.Sub_attr_value FROM Sub s
              LEFT JOIN Sub_attr_list sa ON sa.Sub_id=s.Sub_id AND sa.Sub_attr_type_id='20'
              WHERE s.Sub_id='" . mysql_real_escape_string($sid) . "'"
    $sql = mysql_query($query);

    $row = mysql_fetch_array($sql);

    if($row['created_ts'] == 'SL')
        return isset($row['Sub_attr_value']) ? $row['Sub_attr_value'] : $row['created_ts'];

    return 0;
} 
```

# c++ - 除法为乘法和LUT？/ 快速浮点除法倒数

> ID：12227126
> 
> 赞同：2
> 
> 时间：2012-09-01T10:53:15.900
> 
> 标签：c++, c, optimization, fpu

是否可以以查找表的形式进行浮点除法的倒数（例如 1/f -> 1*inv[f] ）？怎么可能做到？我认为 some 和 mask 和 shift 应该应用于 float 以使其成为一种索引形式？究竟会怎样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T13:38:41.117

You can guess an approximate inverse like this:

```
int x = bit_cast<int>(f);
x = 0x7EEEEEEE - x;
float inv = bit_cast<float>(x); 
```

In my tests, 0x7EF19D07 was slightly better (tested with the effects of 2 Newton-Raphson refinements included).

Which you can then improve with Newton-Raphson:

```
inv = inv * (2 - inv * f); 
```

Iterate as often as you want. 2 or 3 iterations give nice results.

## Better Initial Approximations

To minimize the relative error:

*   0x7EF311C2 (without refinement)
*   0x7EF311C3 (1 refinement)
*   0x7EF312AC (2 refinements)
*   0x7EEEEBB3 (3 refinements)

To minimize the absolute error for inputs between 1 and 2 (they work well enough outside that range, but they may not be the best):

*   0x7EF504F3 (without refinement)
*   0x7EF40D2F (1 refinement)
*   0x7EF39252 (2 refinements)

For three refinement steps, the initial approximation barely affects the maximum relative error. 0x7EEEEEEE works great, and I couldn't find anything better.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T11:39:51.063

一种方法是：

1.  从输入中提取符号、指数和尾数
2.  使用一些最重要的尾数位在表中查找其倒数
3.  取反指数，并根据尾数比例的变化进行调整
4.  重新组合符号、指数和尾数以形成输出

In step 2, you'll need to choose the number of bits to use, trading between accuracy and table size. You could obtain more accuracy by using the less significant bits to interpolate between table entries.

In step 3, the adjustment is necessary because the input mantissa was in the range (0.5, 1.0], and so its reciprocal is in the range [1.0, 2.0), which needs renormalising to give the output mantissa.

I won't try to write the code for this, since there are probably some slightly fiddly edge cases that I'd miss.

You should also investigate methods involving numerical calculations, which might give better results if memory access is slow; on a modern PC architecture, a cache miss might be as expensive as dozens of arithmetic operations. [Wikipedia](http://en.wikipedia.org/wiki/Division_%28digital%29) looks like a good starting point. And of course, whatever you do, measure it to make sure it is actually faster than an FPU division operation.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T11:07:24.493

如果您的最小步长类似于 0.01，那么您可以支持表格中的 inverse-f。每个索引乘以 100，因此您可以拥有

```
table[1]----->1.0/0.01
table[3]----->1.0/0.03
table[105]--->1.0/1.05
...
table[10000]->1.0/100.0

10000 elements for a range of (0.00,100.00) 
```

如果你想要更好的精度，你将需要更多的内存。

另一个例子：

```
range................: 0.000 - 1000.000
minimum increments ..: 0.001
total element number.: 1 million

something like this: table[2343]=1.0/2.343 
```

另一个例子：

```
range................: 0.000000 - 1.000000
minimum increments ..: 0.000001
total element number.: 1 million

something like this: table[999999]=1.0/0.999999 
```

# ruby-on-rails - 使用 form_for 和 simple_form 升级到 3.1.8 后，rails 表单不显示

> ID：12227128
> 
> 赞同：0
> 
> 时间：2012-09-01T10:53:37.057
> 
> 标签：ruby-on-rails, ruby, forms, login, form-for

下面的代码显示了 rails 2.3.8 到 3.0.10 的登录表单，但随着最新升级到 rails 3.1.8，该表单不再显示（但页面的其余部分会显示）。form_tag 可能有问题？

```
%h3 Login
- form_tag do
  %fieldset
    %legend Please Log In
    %table
      %tr
        %td
          %label{:for => "name"} Name:
        %td= text_field_tag :username, params[:username]
      %tr
        %td
          %label{:for => "password"} Password:
        %td
          = password_field_tag :password, params[:password]
      %tr
        %td{:colspan => "2"}
          = submit_tag "Login" 
```

结果： ![在此处输入图像描述](../Images/85ad3c25365f1c2efa16b30daeb88154.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:53:37.057

相当简单的一个 - 改变

```
- form_for 
```

到

```
= form_for 
```

现在它显示了！

![在此处输入图像描述](../Images/7009b5b3093ace0e9d2fdbc9797b3cd8.png)

# buffer - 具有双队列的消费者生产者

> ID：12227132
> 
> 赞同：0
> 
> 时间：2012-09-01T10:54:44.317
> 
> 标签：buffer, swap, producer-consumer

你好=）我正在尝试为以下问题提出一个伪代码，但我对信号量的同步有点困惑，所以我希望有人能提供帮助！

我们有 M 个消费者和 M 个生产者以及 2 个相同 N 大小的缓冲区。消费者从一个缓冲区消费，生产者在另一个缓冲区生产。当消费者缓冲区为空而生产者缓冲区已满时，缓冲区交换并且进程继续。

关于如何使用信号量同步这些进程的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:57:31.110

您可以使用 2 个信号量：一个用于生产者缓冲区，一个用于消费者缓冲区。生产者在每次写操作时都被锁定，消费者在每次读操作时都被锁定。切换需要锁定两个缓冲区。

顺便说一句，如果生产者缓冲区已满而消费者缓冲区*不*为空，会发生什么？

# php - 如何获取wiki的类别树？

> ID：12227134
> 
> 赞同：1
> 
> 时间：2012-09-01T10:54:52.550
> 
> 标签：php, web-crawler, wikipedia

我想获取所有 wiki 类别 ID、类别名称和父类别 ID。但是，我不想在我自己的服务器上进行完整的 wiki 安装。wiki 服务器上的任何 xml / bz 文件是否有 API 或所有类别数据可用？那我可以用吗？

我想在[此链接中获取以下所有类别](http://en.wikipedia.org/w/index.php?title=Special%3aCategoryTree&target=Wikipedia_categories&mode=0&hideprefix=20&showcount=1&namespaces=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T20:40:11.187

我认为您基本上有两种选择：

1.  使用[API](https://www.mediawiki.org/wiki/API)（特别[是`categorymembers`module](https://www.mediawiki.org/wiki/API%3aCategorymembers)）递归地遍历树（实际上，它不是树，它是[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)）。这意味着要发出很多请求，所以这样做会很慢。

2.  下载包含类别信息的[SQL 转储。](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)您需要的大部分信息都在`categorylinks`表格中，但您还需要`page`表格将页面 ID 映射到其名称。

# json - Yesod 通过 JSON 修改和删除

> ID：12227142
> 
> 赞同：2
> 
> 时间：2012-09-01T10:57:00.253
> 
> 标签：json, haskell, yesod

我是Yesod Haskell的新手，我非常喜欢它，但是我必须在一个月后离开它，因为我无法解决这个问题：我有版本 yesod-core version:1.0.1.3 我遵循了这个例子： [More Client Side Yesod：todo 示例](http://www.yesodweb.com/blog/2012/04/yesod-js-todo) 我可以创建自己的页面并通过 json 使用数据填充它使用 json 添加新记录后但我无法删除或更改记录，因为我找不到带回密钥的方法。我不能使用这个系统来导出数据，如下所述：[Parsing a JSON post](https://stackoverflow.com/questions/10822171/parsing-a-json-post) and [Correct way to do a "join" in persist with yesod](https://stackoverflow.com/questions/9779253/correct-way-to-do-a-join-in-persist-with-yesod) and aeson [-0.6.0.2: Fast JSON parsing and encoding](http://hackage.haskell.org/packages/archive/aeson/latest/doc/html/Data-Aeson-TH.html)因为我总是收到这个错误：

```
Exception when trying to run compile-time code:
  Data.Aeson.TH.withType: Unsupported type: TySynD Model.Elarticoli [] (AppT (ConT Model.ElarticoliGeneric) (ConT Database.MongoDB.Query.Action))
  Code: deriveFromJSON (id) ''Elarticoli 
```

如果我使用这个系统：

```
Elarticoli
   marca         Text
   descrizione   Text
   idum          Int
   prezzo        Double

instance FromJSON (Key id Elarticoli) where
    parseJSON = fmap Key . parseJSON

instance FromJSON Elarticoli where
    parseJSON (Object v) = Elarticoli
                   <$> v .: "marca"
                   <*> v .: "descrizione"
                   <*> v .: "idum"
                   <*> v .: "prezzo"
parseJSON           _  = fail "Invalid Elarticoli"

postAeldatidelR :: Handler ()
postAeldatidelR = do
    id <- parseJsonBody_
    runDB (delete id)
    sendResponseStatus status204 () 
```

我总是收到这个错误：

```
Handler/Aeldati.hs:72:12:
    Ambiguous type variable `val0' in the constraint:
      (PersistEntity val0) arising from a use of `delete'
    Probable fix: add a type signature that fixes these type variable(s)
    In the first argument of `runDB', namely `(delete id)'
    In a stmt of a 'do' block: runDB (delete id)
    In the expression:
      do { id <- parseJsonBody_;
           runDB (delete id);
          sendResponseStatus status204 () } 
```

对于持久性，我使用 MongoDB。我必须回去用Java工作吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:38:17.580

问题是 GHC 无法知道函数`id`中的类型。说它必须是. 说它必须是. 但可能有数百个实例可以与之匹配。`postAeldatidelR``parseJsonBody_``FromJSON``delete``PersistEntity`

在这种情况下，最简单的解决方案是提供显式类型签名。也许这会起作用：

`haskell runDB (delete (id :: ElarticoliId))`

# php - Capifony 使用 symfony2 部署，不包括我的 Bundles

> ID：12227145
> 
> 赞同：1
> 
> 时间：2012-09-01T10:57:24.157
> 
> 标签：php, symfony, ssh, amazon-ec2, capifony

我正在尝试将我的 symfony2 项目部署到亚马逊 ec2，但似乎它没有部署我的自定义包。

我收到此错误：

> PHP 致命错误：在第 20 行的 /var/www/html/releases/20120901100611/app/AppKernel.php 中找不到类“MyCompany\MainBundle\MainBundle”

已安装所有供应商捆绑包。我的错误是什么？

# iphone - 如何判断 UITextView 文本是否换行？

> ID：12227149
> 
> 赞同：0
> 
> 时间：2012-09-01T10:58:02.580
> 
> 标签：iphone, ios, xcode, uiview, uitextview

我正在尝试用笔划绘制一块文本。所以做一些搜索和实验似乎这样做的方法是继承UIView并在drawRect中用笔画绘制文本。绘图代码如下。

我设置它的方式是，我使用 UITextView 以交互方式输入我想要的文本，然后将文本传递给用笔划绘制的 UIView 子类广告。

这似乎工作得很好。唯一的问题是当按下回车键（创建一个新行），或者换行因为它变得对于 UITextView 来说太宽，这个信息没有传递，所以在我绘制的渲染（描边）文本中没有新行在 UIView 子类中。

有什么帮助吗？

绘制代码（注意 theText 是传递 UITextView 文本的属性）：

```
 UIFont *font =  [UIFont fontWithName:@"Arial" size:fontSize];
    CGPoint point = CGPointMake(0,0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1.0);
    CGContextSetLineWidth(context, 4.0);
    CGContextSetTextDrawingMode(context, kCGTextFillStroke);
    CGContextSaveGState(context);
    [theText drawAtPoint:point withFont:font];
    CGContextRestoreGState(context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:12:05.173

您必须复制 uitextview 的包装逻辑。询问字符串子字符串需要多长时间，以及它何时长到适合它的包装。

您还可以查看 DTCoreText，这是一个可让您呈现属性文本的类。然而，模仿文本视图并支持文本输入的版本需要一些成本。最后，成本可能是值得的，因为复制 textview 需要时间。

# c++ - 使用分离轴定理的碰撞检测

> ID：12227153
> 
> 赞同：1
> 
> 时间：2012-09-01T10:58:40.410
> 
> 标签：c++, algorithm, 2d, collision-detection

最近我一直致力于为我的游戏实现一个好的碰撞检测系统。在将它应用到我的游戏中之前，我决定进行一种模拟。我已经学习了很多教程（主要是[这个](http://www.codezealot.org/archives/55)），但我可以让它工作。我一步一步地跟着它，但我不知道我的错误是在重叠（检查两个投影是否重叠）还是在整个代码本身。

该代码也有 Vector2D 和 ConvexPolygon 实现。这是代码：

[http://pastebin.com/whV31SDi](http://pastebin.com/whV31SDi)

它被粘贴在 pastebin 中，因为它很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:07:21.293

好吧，正如您所说，代码相当长，我并没有全部看完。但是出现了两个错误

1）你`operator-`是倒退的

```
 Vector2D& operator - (const Vector2D& other)
    {
            Vector2D resultant;
            resultant = Vector2D(other.x - this->x,other.y - this-> y);
            return resultant;
    } 
```

应该

```
 Vector2D& operator - (const Vector2D& other)
    {
            Vector2D resultant;
            resultant = Vector2D(this->x - other.x, this->y - other.y);
            return resultant;
    } 
```

2）您的代码存在很多样式问题。最大的一个是通过引用局部变量来返回所有值。那只是自找麻烦，因为函数返回后变量不再存在。`operator+`这是编写例如的更好方法

```
 Vector2D operator+ (const Vector2D& other) const
   {
            return Vector2D(other.x + this->x, other.y + this->y);
   } 
```

仍然不完美，因为对称运算符`operator+`应该是全局函数而不是类成员，但比你拥有的更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T12:06:27.880

我认为这与您使用布尔函数来检查是否存在重叠的事实有关。

在你的 for 循环中，每次形状没有重叠时，你都会退出函数，并且 for 循环的每一帧都重新开始，并在同一个地方退出。将其更改为 void 函数。

我可能会弄错，因为我并没有真正彻底阅读所有代码，但我自己也遇到过这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T19:25:21.047

这个答案可能有点晚了，但是在查看您的代码之后，您似乎只检查了一个凸多边形的轴。SAT 要求您检查两个形状轴，这很可能是您的问题。要解决此问题，只需对未检查的其他形状轴重复您的碰撞检查。

# iphone - iPhone App 在其他设备上速度极慢

> ID：12227156
> 
> 赞同：0
> 
> 时间：2012-09-01T10:58:53.590
> 
> 标签：iphone, ios, performance, cordova

我知道这不是一个非常具体的问题，但我希望有人遇到相同（或相似）的问题并且知道错误在哪里。

我有一个简单的应用程序。它基本上只是显示一个网页。我已经意识到使用 phonegap （是的，我知道，只需一个简单的 webview 就可以了，但我直到现在才学习objective-c）。

由于应用商店、启动屏幕等所需的图形，该应用有点大（18MB）。

所以在我的应用程序上，该应用程序只需 2 秒即可启动并运行。但在其他 iPhone 上（我用 iPhone 4 和 4s 测试过）大约需要 1-2 分钟（！！！！）才能启动。有什么问题？这不可能是服务器故障，因为完全相同的站点在不到 2 秒的时间内显示在浏览器中（Safari 或 iPhone 上的 chrome）。

我不明白。你知道一些初学者的错误吗？提前致谢。

# php - Codeigniter 中国家和城市的 Ajax 下拉菜单？

> ID：12227159
> 
> 赞同：-3
> 
> 时间：2012-09-01T10:59:06.810
> 
> 标签：php, codeigniter, drop-down-menu

我在我们的 codeigniter 框架中借助 ajax 使国家和城市下拉。

数据库的结构如下所示。

**国家**

```
country_id,country_name 
```

**状态**

```
country_id,state_id,state_name 
```

**城市**

```
country_id,state_id,city_id,city_name 
```

**用户控制器**

```
function country(){
 $data['header']='Deal Management';
 $data['page'] = 'admin/page/user-view';
 $data['Country'] = $this->deal->getCountry(); 
 $this->load->view($this->_admin_container,$data);  
}

function get_cities($Country){
  $this->load->model('city_model');
  header('Content-Type: application/x-json; charset=utf-8');
  echo(json_encode($this->cities_model->get_cities($dealCountry)));
} 
```

**用户视图视图**

```
<?php $cities['#'] = 'Please Select'; ?>

<label for="country">Country: </label><?php echo form_dropdown('country_id', $Country, '#', 'id="country"'); ?><br />

<label for="city">City: </label><?php echo form_dropdown('city_id', $cities, '#', 'id="cities"'); ?><br /> 
```

**交易模块 country_model**

```
 function getCountry(){
    $this->db->select("*");
    $query=$this->db->get("deal_country");
    $countries = array();
    if($query->result()){
          foreach ($query->result() as $country) {
              $countries[$country->country_id] = $country->country_name;
          }
        return $countries;
        }else{
        return FALSE;
        }
    } 
```

**city_model 模块**

```
function get_cities($dealCountry = null){
        echo $dealCountry;die;
      $this->db->select('city_id, city_name');

      if($dealCountry != NULL){
          $this->db->where('country_id', $dealCountry);
      }

      $query = $this->db->get('deal_city');

      $cities = array();

      if($query->result()){
          foreach ($query->result() as $city) {
              $cities[$city->id] = $city->city_name;
          }
      return $cities;
      }else{
          return FALSE;
      }
} 
```

**我在头文件中包含 ajax 脚本。**

```
<script type="text/javascript">// <![CDATA[
    $(document).ready(function(){
        $('#country').change(function(){ //any select change on the dropdown with id country trigger this code
        $("#cities > option").remove(); //first of all clear select items
            var country_id = $('#country').val();  // here we are taking country id of the selected one.
            $.ajax({
                type: "POST",
                url: "home/get_cities/"+country_id, //here we are calling our user controller and get_cities method with the country_id

                success: function(cities) //we're calling the response json array 'cities'
                {
                    $.each(cities,function(city_id,city) //here we're doing a foeach loop round each city with id as the key and city as the value
                    {
                        var opt = $('<option />'); // here we're creating a new select option with for each city
                        opt.val(id);
                        opt.text(city);
                        $('#cities').append(opt); //here we will append these new select options to a dropdown with the id 'cities'
                    });
                }

            });

        });
    });
    // ]]>
</script> 
```

制作代码后它不起作用。

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T22:00:18.960

```
function get_cities($Country){
  $this->load->model('city_model');
  header('Content-Type: application/x-json; charset=utf-8');
  echo(json_encode($this->cities_model->get_cities($dealCountry)));
} 
```

在此函数中，您输入了错误的变量名称**$dealCountry**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:13:33.470

创建一个javascript变量

```
var base_url = "<?=base_url()?>"; 
```

在你的 javascript 代码中将它连接起来

```
url: base_url+"home/get_cities/"+country_id, 
```

使用 firefox 和 firebug 调试你的 ajax 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:35:49.327

正如我在评论中所说，您可以使用[Firebug](https://getfirebug.com/wiki/index.php/Main_Page)或[Chrome 开发工具](https://developers.google.com/chrome-developer-tools/docs/overview)（网络选项卡）来确定您的问题：

控制器：

```
<?php
class ctrl extends ci_controller{
    function index(){ //I just used this one to test out if its outputing anything
        $names = ['apple','ball','cat','dog'];
        echo json_encode($names);
    }

    function load_view(){ 
        $this->load->view('ctrl_view');
    }
}
?> 
```

看法：

```
<script src="/tester/ci/js/jquery172.js"></script>
<input type="text" list="names" id="name" autocomplete="off"/>
<datalist id="names">
</datalist>

<script>
$.post('ctrl/', function(data){ //you can just call out your controller here
    var parsed_data = JSON.parse(data);

    //its a good practice to use a document fragment to append new elements to and not append a    new element on every iteration of the loop in an existing element in the dom
    var fragment = document.createDocumentFragment();

    for(var x in parsed_data){
        var val = parsed_data[x];
        var option = $("<option>").val(val).text(val);
        fragment.appendChild(option[0]); 
    }

    $('#names').append(fragment); //append the whole fragment outside the loop
});
</script> 
```

我真的不知道您的实际问题是什么，所以请帮我们一个忙，编辑您的问题并粘贴您在 firebug 上看到的错误。

# wav - 计算波形块的幅度，忽略短峰值

> ID：12227160
> 
> 赞同：0
> 
> 时间：2012-09-01T10:59:26.863
> 
> 标签：wav, noise, amplitude

我有一个来自麦克风的输入正弦测试信号。我知道我可以通过扫描 vaweform 样本并寻找最大幅度来找到峰值幅度（考虑到它也可能是负数）。我需要大约 500 毫秒的块。

问题在于，由于噪声，输入信号可能包含偶尔的短峰值。这就是为什么我无法测量最大幅度的原因——我可能会找到噪声的峰值。

是否有一些稳定的算法可以让我计算波形块的主要峰值但丢弃一些无用信号的短噪声峰值？

我不需要超级准确的东西，我只想扔掉大部分可能的噪声峰值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:11:42.387

第一种方法：对于阈值 s > 0 的每个（来自某个网​​格），计算超过 s 的数据点的数量。这将为您提供声音大于 s 的持续时间的度量。现在定义噪声必须有多短才能被视为“噪声”。

如果您在不近和不远的过去观察到许多这样的数据点，则不仅可以通过计数，还可以通过增加超过 s 的数据点的权重来改进这一点，这使您可以区分非常短的峰值和更高振幅的更长时期。

# jquery - 我可以用 HTML5 验证替换我的 jQuery 验证以进行必需的现场测试吗？

> ID：12227162
> 
> 赞同：0
> 
> 时间：2012-09-01T10:59:54.960
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, html

如果我使用的是最新的 IE、Firefox 和 Chrome 浏览器，我是否需要对简单的输入字段进行 jQuery 验证**需要/不需要检查？**

如果我的 ASP MVC3 应用程序不需要旧版浏览器支持，那么使用 jQuery 有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:07:21.197

我建议你为旧浏览器和新浏览器都使用 Jquery 使用 HTML5 输入功能，以支持用户端的所有浏览器，因为你永远不知道他们使用的是哪个浏览器。

我个人使用[http://www.rapidexp.com/h5form/](http://www.rapidexp.com/h5form/)它与它检测到的所有浏览器兼容，无论浏览器是否支持 HTML5。如果不是

**第二种方法** 您可以手动选择使用`Modernizer`和应用输入字段来检测浏览器支持html5只需下载它并检查教程以支持输入字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:28:34.080

您需要 jQuery 验证或其他一些 JavaScript 驱动的检查来使所有现代浏览器都进行检查。例如，IE 9 没有实现该`required`属性。此外，实现它的浏览器有自己的方式向用户指示问题，在这里他们使用浏览器的 UI 语言，不一定使用格式良好的文本。要控制向用户发出的错误消息，您需要 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:01:33.830

`required`如果您使用支持 HTML 5属性的最新浏览器，则不需要 jQuery 验证。

如果浏览器可以为您处理它，为什么还要包含额外的脚本？

# ios - iOS 联系人应用程序

> ID：12227163
> 
> 赞同：-2
> 
> 时间：2012-09-01T11:00:14.030
> 
> 标签：ios

我正在尝试创建一个与 iphone 中的联系人应用程序完全相同的联系人应用程序。我在我的 FirstView 中有一个添加按钮，单击它会在我们单击完成时向“NewContact”视图呈现模态，它将创建一个 plist 并将所有值写入 plist，然后将视图关闭回 firstView。我发现很难在 firstView 中显示名称。

我的第一个观点：

```
-(void)btnrightClicked:(id)sender
{
    NewContactViewController *newContact= [[NewContactViewController alloc]initWithNibName:@"NewContactViewController" bundle:nil];
    [self presentModalViewController:newContact animated:YES];  
} 
```

我的第三个观点：

```
-(IBAction)btnDoneClicked:(id) sender
{       
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentsDirectory = [path objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Details.plist"];

    NSFileManager *fm = [NSFileManager defaultManager];
    BOOL success = [fm fileExistsAtPath:filePath];
    if(!success)
    {
        NSString *path = [[NSBundle mainBundle]pathForResource:@"Details" ofType:@"plist"];
        [fm copyItemAtPath:path toPath:filePath error:nil];
    }

    NSMutableArray *contacts = [NSMutableArray arrayWithContentsOfFile:filePath];
    NSMutableDictionary *dict = [NSMutableDictionary new];

if ([txtfirst.text length] > 0) 
{
    [dict setObject:txtfirst.text forKey:@"first"];
}
else {
    alertView = [[UIAlertView alloc] initWithTitle:@"" message:@"Dont leave name blank" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
}

if ([txtlast.text length] > 0) 
{
    [dict setObject:txtlast.text forKey:@"last"];
}

if ([txtwork.text length] > 0) 
{
    [dict setObject:txtwork.text forKey:@"work"];
}

if ([txtnumber1.text length] > 0) 
{
    [dict setObject:txtnumber1.text forKey:@"number1"];
}
else {
    alertView = [[UIAlertView alloc] initWithTitle:@"" message:@"Dont leave number blank" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
}

if ([txtnumber2.text length] > 0) 
{
    [dict setObject:txtnumber2.text forKey:@"number2"];
}

if ([txtringtone.text length] > 0) 
{
    [dict setObject:txtringtone.text forKey:@"ringtone"];
}

if ([txtemailid1.text length] > 0) 
{
    [dict setObject:txtemailid1.text forKey:@"emailid1"];
}

if ([txtemailid2.text length] > 0) 
{
    [dict setObject:txtemailid2.text forKey:@"emailid2"];
}

[contacts addObject:dict];
[contacts writeToFile:filePath atomically:YES];
[dict release];

{
    if ([txtfirst.text length] > 0 && [txtnumber1.text length] > 0) {
        alertView = [[UIAlertView alloc] initWithTitle:(txtfirst.text) message:@"Your details saved" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
    }
}
    [self.parentViewController.parentViewController dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:19:42.290

您应该做的是在您的第一个视图控制器中创建一个委托协议，并让您的第二个视图控制器实现协议方法，当您返回堆栈时更新第一个视图控制器中的数据。

我做了一个[简单的演示项目](http://goo.gl/y22Tf)，你可以下载并看看我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:34:10.460

您需要使用 Core Data，它解决了将任何数据通知或委托给 super 的问题。创建联系人后，包含所有联系人的视图控制器将自动更新。

# javascript - 如何在 Chrome 扩展开发中删除标签 URL

> ID：12227164
> 
> 赞同：8
> 
> 时间：2012-09-01T11:00:26.440
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试制作一些 Google Chrome 扩展，我想记住最近删除的标签信息。但我有一个问题。每次我用该方法得到删除的标签信息，如 URL、标题等`chrome.tabs.get`，但有一个错误说`'Error during tabs.get: No tab with id'`。

我认为这是因为在 tabs.get 方法获取标签信息之前标签已被删除。但是我怎样才能获得最近删除的标签 URL？

这是我的代码：

```
chrome.tabs.onRemoved.addListener(getRemovedTabs);
function getRemovedTabs(tabId, removeInfo) {
    chrome.tabs.get(tabId, function (tab) {
        //do stuffs
    });
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T14:29:06.133

该[`chrome.tabs.onRemoved`](http://developer.chrome.com/extensions/tabs.html#event-onRemoved)事件在标签被**移除**时触发，而不是在“它即将被移除”时触发。删除标签后，无法获取有关标签的信息。

必须在删除选项卡之前收集信息。该[`chrome.tabs.onUpdated`](http://developer.chrome.com/extensions/tabs.html#event-onUpdated)事件是最方便的事件：

```
// Background script
var tabToUrl = {};
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    // Note: this event is fired twice:
    // Once with `changeInfo.status` = "loading" and another time with "complete"
    tabToUrl[tabId] = tab.url;
});

chrome.tabs.onRemoved.addListener(function(tabId, removeInfo) {
    do_stuff_with( tabToUrl[tabId] );

    // Remove information for non-existent tab
    delete tabToUrl[tabId];
}); 
```

显然，您不仅限于在`tabToUrl`对象中存储 URL。每种`tab`类型都包含原始值（布尔值、整数和字符串），因此存储`tab`对象不会导致严重的内存消耗。
但这些属性可能不准确，因为`onUpdated`仅在页面（重新）加载时触发。如果其他属性是相关的，请确保您还将事件侦听器绑定到[其他`chrome.tab`事件](http://developer.chrome.com/extensions/tabs.html#events)。

# android - 如何解决 android 中的此 Windows 管理器错误？

> ID：12227165
> 
> 赞同：3
> 
> 时间：2012-09-01T11:00:39.827
> 
> 标签：android, bluetooth

我无法理解代码到底发生了什么。我的代码有时运行良好，有时不能。

我正在创建蓝牙连接。单击搜索按钮时，我正在搜索设备。它给了我设备列表，我在列表视图上显示它。这一切都很好。

现在单击 listItem，我想将我的设备与列表中的选定设备配对。我已经使用此代码来执行此操作。

```
 listViewDetected.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
            {
                Log.i("Log", "ListItem is clicked at :"+position);
                posn = position;
                String str = (String) listViewDetected.getItemAtPosition(position);
                Log.i("Log", "ListItem is :"+str);
                bluetoothDevice=arrayListBluetoothDevices.get(position);
                final BluetoothDevice device = arrayListBluetoothDevices.get(position);
                Log.i("Log", "UUID string is :"+uid);
                new Thread() {
                    public void run() {
                        connect(device);
                    };
                }.start();
            }

            private void connect(BluetoothDevice bluetoothDevicess) {
                // TODO Auto-generated method stub
                Log.i("Log", "connect method after click: ");
                ParcelUuid[] uuids = servicesFromDevice(bluetoothDevicess);
                adapterPaired.notifyDataSetChanged();
                Log.i("Log", "service method executed");
            }
        });

public ParcelUuid[] servicesFromDevice(BluetoothDevice device) {
    try {
        Log.i("Log", "service method is called ");
        Class cl = Class.forName("android.bluetooth.BluetoothDevice");
        Class[] par = {};
        Method method = cl.getMethod("createBond", par);
        Object[] args = {};
        ParcelUuid[] retval = (ParcelUuid[]) method.invoke(device, args);
        if(retval==null)
        {
            Log.i("Log", "GOT the Array as null:");
        }
        else
        {
            Log.i("Log", "GOT the Array:"+retval.length);
        }
        /* for(int i = 0;i<retval.length;i++)
        {               Log.i("Log", "GOT  :  "+retval[i]);
        }*/
        return retval;
    } catch (Exception e) {
        Log.i("Log", "Inside catch of serviceFromDevice Method");
        e.printStackTrace();
        return null;
    }
} 
```

**有时它工作得很好。但有时它不起作用。**

我重复

**有时它工作得很好。但有时它不起作用。甚至没有一行正在执行 listItem clicked() 方法。**

当它不工作时，我在 logcat 上得到它：

```
09-01 16:17:26.405: I/KeyInputQueue(171): Enqueueing touch event0
09-01 16:17:26.405: I/WindowManager(171): Read next event 0
09-01 16:17:26.405: I/WindowManager(171): Delivering pointer 0 > Window{4a6ea918 com.bdm/com.bdm.BluetoothDemo paused=false}
09-01 16:17:26.515: I/KeyInputQueue(171): Enqueueing touch event1
09-01 16:17:26.515: I/WindowManager(171): Read next event 1
09-01 16:17:26.515: I/WindowManager(171): Delivering pointer 1 > Window{4a6ea918 com.bdm/com.bdm.BluetoothDemo paused=false} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:34:35.247

我得到了这个问题的解决方案。这是因为广播接收器而发生的。我当时正在单击列表项，同时我的接收器被触发。并且我正在调用线程对象。所以有时，如果我的线程没有被调用，那么 listitem click 工作正常。感谢您感兴趣的朋友。谢谢。

# java - java.security.AccessControlException：运行小程序时发生

> ID：12227171
> 
> 赞同：1
> 
> 时间：2012-09-01T11:02:36.270
> 
> 标签：java, multithreading, applet, accesscontrolexception

我正在从 Herbert Schildt Book Java2 Complete Reference Fifth Edition 逐步学习 Java。在我通过创建线程并调用 Applet 的 Repaint() 方法来创建简单的横幅 Applet 的过程中，该 Applet 显示横幅并在 Applet 查看器上滚动。但是在创建可运行目标的线程对象时，它会抛出这样的异常

```
java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:345)
at java.security.AccessController.checkPermission(AccessController.java:555)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
at sun.applet.AppletSecurity.checkAccess(AppletSecurity.java:252)
at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:304)
at java.lang.ThreadGroup.<init>(ThreadGroup.java:119)
at java.lang.ThreadGroup.<init>(ThreadGroup.java:95)
at Applet.SimpleBanner.start(SimpleBanner.java:49)
at sun.applet.AppletPanel.run(AppletPanel.java:475)
at java.lang.Thread.run(Thread.java:713) 
```

我读了其他文章说它需要安全权限，但在我的 applet.policy 文件中已经允许所有权限

```
grant { permission java.security.AllPermission;}; 
```

这只是我的第二个小程序。谁能用简单的术语详细解释为什么它是 Throwing Security Exception 及其解决方案？

这是我的小程序代码。

```
import java.applet.Applet;
import java.awt.*;

/* A Simple Banner Applet.
 * This Banner Applet Creates a thread that scrolls the message contained
 * in msg right to left across banner's window.
 */

/*
 * <applet code="SimpleBanner" width=300 height=50>
 * </applet>
 */

public class SimpleBanner extends Applet implements Runnable{
private static final long serialVersionUID = 1L;
String msg = "Hello World";
Thread t = null;
ThreadGroup Grp;
int state;
boolean stopflag;

/**
 * Initialization method that will be called after the applet is loaded into
 * the browser.
 */
@Override
public void init() 
    {
    //Set Foreground and background color
    setBackground(Color.cyan);
    setForeground(Color.red);
    }

@Override
public void start()
    {
    //Start Thread
    Grp = new ThreadGroup("Group");
    t = new Thread(Grp, this);
    stopflag = false;
    t.start();
    }
//Entry Point for Thread that Runs The banner
@Override
public void run() 
{
char ch;
//Display Banner
for(;;)
    {
        try {
            repaint();
            Thread.sleep(250);
            ch=msg.charAt(0);
            msg =msg.substring(1,msg.length());
            msg +=ch;
            if (stopflag) 
            {
                break;
            }
        } catch (InterruptedException ex) {

        }
    }
}

@Override
public void stop()
{
// Pause The Banner
stopflag=true;
t=null;
}

@Override
public void paint(Graphics g)
{
//Display The Banner
    g.drawString(msg, 50, 30);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:24:00.163

出于安全原因，Applet 默认情况下在权限受限的沙盒环境中运行。小程序没有创建或修改线程组的运行时权限，因此您会遇到异常。不要创建新的线程组。否则，通过授予运行时创建或修改线程组的权限，覆盖您的安全策略以明确允许您的小程序创建一个。要覆盖默认权限，请在用户主目录的 .java.policy 文件中定义适当的策略。建议您编辑用户特定的策略文件，而不是 JRE 安全目录下的全局策略文件。

使用 JDK 的策略工具来定义策略或手动执行。请参考以下模板：

```
grant codeBase "<code base>" {
  permission <type> "<target>", "<actions>";
  permission <type> "<target>", "<actions>";
  ...
};

For eg. 
grant codeBase "http://geosim.cs.vt.edu/geosim/-" {
  permission java.lang.RuntimePermission "modifyThreadGroup";
  ...
}; 
```

# android - android膨胀布局包含片段

> ID：12227172
> 
> 赞同：0
> 
> 时间：2012-09-01T11:02:39.420
> 
> 标签：android, android-fragments

问题是什么？我如何膨胀包含片段的布局？我不知道错误消息的含义。请帮我。谢谢

错误消息

```
09-01 18:44:58.698: E/AndroidRuntime(20617): Caused by:
java.lang.IllegalArgumentException: Binary XML file line #7: Duplicate id 0x7f080002,
tag null, or parent id 0x0 with another fragment for com.example.testing.ListFragment 
```

我的代码

```
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.e("555", "hello");
        return inflater.inflate(R.layout.main, null);

        /*
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;*/
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.example.testing.ListFragment" ></fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.testing.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

哎呀！您的问题无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:11:08.557

你不能有一个`Fragment`里面另一个`Fragment`。

# javascript - jQuery/$ 如何既是函数又是“原型根”

> ID：12227173
> 
> 赞同：2
> 
> 时间：2012-09-01T11:02:50.953
> 
> 标签：javascript, jquery, prototype

这个比较难解释，欢迎评论询问详情。基本上使用 jQuery 你可以做以下事情：

.

## 我想要的是

```
$.ajax().etc()
$("selector").doStuff().etc() 
```

这意味着 $ 充当函数（然后可链接）以及对象（也可链接）。

.

## 我有什么

我自己正在编写一些 javascript，并成功地制作了一组可链接的函数，如下所示：

```
myF.func1().func2()
myF('text') //Cannot get this working! 
```

.

我`window.myF=(new myFuncs())`用来让第一行工作，但我不能使用 myF 作为函数。我也做了它，以便 myF 可以用作一个函数，但是我不能链接其他函数。

我非常困惑，尽管我尝试过搜索这个网站和谷歌，但我一定是在搜索错误的东西，因为我不知道从这里去哪里！

欢迎和期待评论中的问题！

.

## 我的设置（简化）

```
(function(){
    var myFuncs=function(){

    };

    myFuncs.prototype = {
          foo: function() {
          }
          ,bar: function() {
          }
    }

    window.myF = (new myFuncs());
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:04:50.697

Just make your `myF` a function. The *static* methods on the jQuery object are just assigned to that function directly.

```
(function(exports) {

    exports.myF = function() {
        // This function can return an instance of itself, to make
        // it chainable.
    };

    exports.myF.staticFunction = function() {
        // This is a *static* function, available directly on `myF`
        // in the global space.
    };

})(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T11:20:53.397

我快速查看了 jQuery 源代码，看起来它没有使用 jQuery 对象的原型 - `window.$`.

相反，它使用`$.extend`：

```
var myF = function(){};
$.extend(myF, {
   actAsAnObject: function(){}
}); 
```

然而，对于我称之为 jQuery 响应对象的东西，它确实使用了原型。因此，如果您调用`myF()`此代码，则运行：

```
var myF = function(){
    return new myF.prototype.init(arguments); // based on the jQuery code
}; 
```

`$.post`是一个对象属性，如果调用函数本身就无法获取。`$().html`是一个jQuery响应对象函数，它不是`window.$`对象的成员。

* * *

回答您的更新：http: [//jsfiddle.net/rmpW8/](http://jsfiddle.net/rmpW8/)

```
(function(){
    var myFuncExternal = function(num){
        return new myFunc(num);           
    };
    var myFunc = function(num){
        this.num = num;
    };

    $.extend(myFuncExternal, {
        foo: function(num){
            console.log("In foo with: " + num);
        }
    })

    myFunc.prototype = {
          foo: function() {
              myFuncExternal.foo(this.num);
          },
          bar: function() {
              console.log("In bar with: " + this.num)
          }
    }

    window.myF = myFuncExternal;
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T11:10:29.627

你会做这样的事情：

```
myF = function () {
  ...
}
myF.method1 = function (){
  ...
}
myF.method2 = function (){
  ...
}
... 
```

在 Javascript 中，您必须记住，**任何**数据都可以具有属性，即使它本身不是“对象”。所以字符串、数字、函数，所有这些都可以（并且确实）具有属性。例如，字符串具有属性`length`。

# python - Django 管理员输入导致 UnicodeDecodeError，怎么办？

> ID：12227177
> 
> 赞同：2
> 
> 时间：2012-09-01T11:03:18.967
> 
> 标签：python, django, unicode, python-unicode

今天我通过 Django 管理员收到了无法编码的数据。不知何故，数据的编码不是 unicode。这怎么可能？

我的模型中有一个`name`属性，`Client`它以 unicode 格式返回数据：

```
@property
def name(self):
    return u'{0} {1}'.format(self.firstname, self.lastname).strip() 
```

但这不起作用：

```
>>> client
<Client: [Bad Unicode data]>

>>> client.lastname
'Dani\xc3\xabl'

>>> client.lastname.__class__
<type 'str'>

>>> u"{0} {1}".format(client.firstname, client.lastname)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 4: ordinal not in range(128) 
```

足够奇怪，将名字/姓氏编码为常规字符串确实有效：

```
>>> "{0} {1}".format(client.firstname, client.lastname)
'Test Dani\xc3\xabl'

>>> "{0} {1}".format(client.firstname, client.lastname).decode('utf-8')
u'Test Dani\xebl' 
```

这里发生了什么？这个输入是如何通过管理员进入我的模型的？

系统堆栈（它是一个外部服务器）：

*   Debian 6.0.5（挤压）
*   Django 1.4.1
*   Python 2.6.6
*   MySQL 5.1.49
*   MySQL-python==1.2.2

这是相关的模型代码：

```
class Client(models.Model):
    firstname = models.CharField(_("Firstname"), max_length=255)
    lastname = models.CharField(_("Lastname"), max_length=255)
    email = models.EmailField(_("Email"), unique=True, max_length=255)

    class Meta:
        db_table = u'clients'
        ordering = ('firstname', 'lastname', 'email')

    def __unicode__(self):
        return u'{0} <{1}>'.format(self.name, self.email)

    @property
    def name(self):
        return u'{0} {1}'.format(self.firstname, self.lastname).strip() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:44:38.257

这可能是由于您用于 MySQL 数据库的排序规则。

实际上，Django 的行为是在从数据库中检索数据时始终返回`unicode`字符串——这将适用于您的代码，因为它没有任何问题。

但是，正如您在[关于数据库设置的 django 文档](https://docs.djangoproject.com/en/dev/ref/databases/#collation-settings)中看到的，部分排序规则设置，使用 MySQLdb 版本 1.2.2 和排序的`utf8_bin`MySQL 数据库将导致您在从数据库中检索字符字段时获取的不是 unicode 字符串，而是字节字符串。

您可能想要调查此问题（即检查您的 MySQL 排序规则设置），但您的问题很可能来自那里。

如果是这种情况，您将不得不手动解码从 MySQL 获得的任何输入。或者，您可以更改数据库的排序规则设置。

您可以使用`SHOW TABLE STATUS FROM %YOURDB%`来获取数据库中表的排序规则。

* * *

###  摘自相关文档部分：

> 默认情况下，对于 UTF-8 数据库，MySQL 将使用 utf8_general_ci_swedish 排序规则。这会导致所有字符串相等比较以不区分大小写的方式进行。也就是说，“Fred”和“freD”在数据库级别被认为是相等的。如果您对字段有唯一约束，则尝试将“aa”和“AA”都插入同一列是非法的，因为它们与默认排序规则比较相等（因此，非唯一）。
> 
> 在许多情况下，此默认设置不会有问题。但是，如果您确实想要对特定列或表进行区分大小写的比较，则可以更改列或表以使用 utf8_bin 排序规则。在这种情况下要注意的主要事情是，如果您使用的是 MySQLdb 1.2.2，那么 Django 中的数据库后端将为它从数据库接收的任何字符字段返回字节字符串（而不是 unicode 字符串）。这与 Django 总是返回 unicode 字符串的正常做法有很大的不同。

# c# - 使用 FtpWebRequest 将文件上传到 AS400

> ID：12227181
> 
> 赞同：1
> 
> 时间：2012-09-01T11:04:26.563
> 
> 标签：c#, ftp, ibm-midrange, ftpwebrequest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:15:59.470

您构建的 URL 有点错误，您在`/`文件名之前缺少一个，应该是这样的；

```
FtpWebRequest ftpRequest = 
    (FtpWebRequest)WebRequest.Create(@"ftp://110.123.1.23/ABCD/” + file.Name); 
```

您也没有存储在与交互式示例相同的目录中；

```
ftp> cd ABCD
ftp> put c:/sample.txt ABCD/XYZ 
```

将文件 XYZ 存储在目录 ABCD/ABCD 中，而不仅仅是您的 URL 示例中的 ABCD。

第三，如果您使用的是 .NET 4.0 或更高版本，您可能[会被目录发送到服务器的**这种**](https://stackoverflow.com/questions/9621755/550-file-unavailable-error-with-ftpwebrequest-class-file-upload-works-fine-in-f)变化行为所困扰。

# iphone - 应用程序导致泄漏工具崩溃

> ID：12227182
> 
> 赞同：0
> 
> 时间：2012-09-01T11:04:35.890
> 
> 标签：iphone, memory, memory-leaks, crash, instruments

我的应用程序在一段时间后自动关闭。设备中也没有崩溃日志。经过一番谷歌搜索后，我猜这将是内存泄漏问题。但是仪器中的泄漏在针对我的应用程序时崩溃。

谁能建议我我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:09:40.440

尝试查看其他工具，尤其是分配工具。此外，您可能需要重新安装 sdk。该工具会像那样崩溃，这很奇怪。

# ruby-on-rails - Rails Guide: Association Basics, inverse_of relationships, failure to understand outcome of self tests

> ID：12227187
> 
> 赞同：0
> 
> 时间：2012-09-01T11:05:12.877
> 
> 标签：ruby-on-rails, ruby, associations, relationships

I'm not completely new to Rails, but I'm taking another pass at all the basic guides in an exploratory repo I've been using to flush out my own knowledge.

I'm on this one right now: [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

I got to section "3.5 Bi-Directional Associations".

I understood that model instances could be duplicated and out-of-sync when accessed in two-different ways in the same process which is something I want to ensure I learn how to avoid.

So I wrote a simple unit test to detect the problem in this commit: [https://github.com/BadQuanta/simple-rails/commit/5e88ff08d5ba2743c4dbcaa0479e9adc8edc2a1f](https://github.com/BadQuanta/simple-rails/commit/5e88ff08d5ba2743c4dbcaa0479e9adc8edc2a1f)

The unit test seemed to work since it failed with the error I expected.

So I implemented the fix prescribed by the guide in this commit: [https://github.com/BadQuanta/simple-rails/commit/7ac75b45730e3230162b8da280ba713004b8745c](https://github.com/BadQuanta/simple-rails/commit/7ac75b45730e3230162b8da280ba713004b8745c)

Yet my unit test still would not pass and I could not figure out why.

So I did this to my unit test and I'm kinda stumped because this is exactly what I thought I wouldn't have to do with these relationships: [https://github.com/BadQuanta/simple-rails/commit/7ac75b45730e3230162b8da280ba713004b8745c](https://github.com/BadQuanta/simple-rails/commit/7ac75b45730e3230162b8da280ba713004b8745c)

Basically, what can I do to figure out what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:27:40.810

从相同的指导方针：

> inverse_of 支持有一些限制：
> 
> *   它们不适用于 :through 关联。
> *   它们不适用于 :polymorphic 关联。
> *   它们不适用于 :as 关联。
> *   对于**belongs_to**关联，**has_many**反向关联被**忽略**。

那么为什么指南将它们用作**示例**？

# iphone - UIImage *rightIcon = [UIImage imageNamed:@"fb.jpg"];

> ID：12227188
> 
> 赞同：-1
> 
> 时间：2012-09-01T11:05:53.630
> 
> 标签：iphone

```
UIImage *rightIcon = [UIImage imageNamed:@"fb.jpg"];
UIBarButtonItem *btnFB = [[UIBarButtonItem alloc] initWithImage:rightIcon 
                                                          style:UIBarButtonItemStylePlain 
                                                         target:self 
                                                         action:@selector(FBConnect)];
[_barItems insertObject:btnFB atIndex:0]; 
```

我已经编写了这段代码，但我无法在`TabBar`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:12:25.203

```
self.navigationItem.rightBarButtonItem = [self getfbBtn];

- (UIBarButtonItem *) getfbBtn
{
    UIButton * backBtn=[UIButton buttonWithType:UIButtonTypeCustom];
    [backBtn setFrame:CGRectMake(0.0f,0.0f,22.0f,22.0f)];
    [backBtn setImage:[UIImage imageNamed:@"fb.jpg"] forState:UIControlStateNormal];
    [backBtn addTarget:self action:@selector(FBConnect) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn];
    return backBarButton;    
}

//Action For RightBarButton - FBBtn
- (void)FBConnect
{
    NSLog(@"fb connect btn press");
} 
```

# c# - How to open web page after installation and uninstallation?

> ID：12227189
> 
> 赞同：0
> 
> 时间：2012-09-01T11:06:04.830
> 
> 标签：c#, deployment, installation, setup-project

In a setup project i want to automatically open a website directly after the installation finished dialog and uninstallation as well.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:10:10.547

是的，你可以这样做。使用自定义安装程序覆盖安装程序类中的 Install 和 UnInstall 方法，您可以在其中开始在 IExplore 中打开网页的新过程。

可以在[此处找到有关它的完整实现](http://www.codeproject.com/Articles/146626/Extending-Visual-Studio-Setup-Project)

# java - JFreeChart 的条形图

> ID：12227205
> 
> 赞同：0
> 
> 时间：2012-09-01T11:09:09.323
> 
> 标签：java, swing, jpanel, jfreechart, jtabbedpane

我创建了一个数据集（类型），用于使用api:`DefaultCategoryDataSet`创建条形图（比如 barChart）。然后我创建了一个- CP，并将 barChart 添加到其中。最后，我将 CP 添加到. 这被绑定到用于显示包含我的条形图的面板的选项卡。除了条形图没有完全适合可用的面板空间之外，一切都运行良好。条形图的某些部分（左侧和右侧）正在被剪切且未显示。有没有办法容纳整个条形图。请注意，这不是因为它没有完全显示的数据（即使数据较少，问题仍然存在）。此外，我可以在我的选项卡中显示饼图而不会出现任何问题。`JFreeChart``ChartFactory.createBarChart(...)``ChartPanel``JPanel``JPanel``JTabbedPane`

# android - Android：如何真正通过代码移动控件

> ID：12227212
> 
> 赞同：0
> 
> 时间：2012-09-01T11:10:16.927
> 
> 标签：android, android-layout, android-widget

最近我正在做一个项目，它的功能可以用手指移动，`ImageView`同时它可以改变`Image src`. 我使用 ImageView 的 Layout 功能和更改src的功能。 但是当函数结束时，我又回到了原来的地方。 我猜是因为激发了函数然后它移动到原来的地方。所以也许控件并没有真正移动。 我怎样才能真正移动控件或设置src 而不让我的控件回到原来的位置？`ImageView`
`setImageBitmap``ImageView``Bitmap`
`setImageBitmap``ImageView``layout.xml`
`setImageBitmap``Invalidate`
`Bitmap`

# wpf - 获取网格的中间行以填充可用空间

> ID：12227215
> 
> 赞同：6
> 
> 时间：2012-09-01T11:10:55.423
> 
> 标签：wpf, user-interface

我已经为此编写了很多示例代码，最后决定问这个：我有一个网格，它有一个固定位置的按钮，里面还有另一个网格。外部网格没有设置宽度/高度。它应该根据显示分辨率而变化。我将窗口的 W/H 设置为：

```
Width = 200;
Height = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height - 5; 
```

在内部网格内，我有 3 行，上面是一个按钮（高度自动），中间是一个列表视图，其高度可能会有所不同（并且必须填充可用空间），最后一行由一个文本框组成，它应该始终保持在窗口的底部。为此的xaml如下：

```
<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Click="Button_Click" Width="32" Height="32" FontSize="16" VerticalAlignment="Center" 
            HorizontalAlignment="Left" FontWeight="Bold" ToolTip="Click here to hide the Sidebar">&gt;</Button>
<Grid VerticalAlignment="Top" Background="Transparent" Grid.Row="1">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- This is the settings bar-->
            <RowDefinition Height="*" />
            <!-- This will contain the listbox-->
            <RowDefinition Height="Auto" />
            <!-- This is to maintain vertical arrangement and future use-->
        </Grid.RowDefinitions>

        <Button Content="hello" Grid.Row="0" />
        <ListView x:Name="lstView" Background="Transparent" Grid.Row="1"/>
        <TextBox TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Height="50" Margin="2" BorderBrush="Black" Grid.Row="2" />` 
```

但我只是不能让中间行填满整个空间，并且文本框在屏幕底部对齐。任何人都可以建议如何让文本框与底部和中间行对齐以填充整个剩余高度以及如何在更改显示模式时不显式设置高度的情况下完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:56:35.267

如果您不告诉`Grid`占用所有可用空间，则无法分发它，您可能应该将 的设置`VerticalAlignment`为。`Grid``Stetch`

# mysql - MySQL COUNT 意外结果

> ID：12227216
> 
> 赞同：1
> 
> 时间：2012-09-01T11:11:02.800
> 
> 标签：mysql, sql, database

我的数据库结构如下所示：

[https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c](https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c)

一些表的解释：

1.  `answer_chk_results`- 检查答案表。因此，如果此表上不存在某些答案，则表示未选中
2.  `lesson_questions`- 课程 <-> 问题关联（按 id）表

当我这样查询数据库时：

```
SELECT
    q.id,
    q.content,
    q.type
FROM
    `questions_and_exercises` q,
    `lesson_questions` lq
WHERE
    q.id = lq.qid
AND lq.lid = 1 
```

我得到了所有的问题清单。但我想要的是每个问题的答案计数和检查答案。当我使用这个查询时：

```
SELECT
    q.id,
    q.content,
    q.type,
    COUNT(DISTINCT a.ID) answer_count,
    COUNT(DISTINCT acr.id) checked_count
FROM
    `questions_and_exercises` q,
    `lesson_questions` lq
LEFT JOIN answers a ON a.qid = lq.qid,
LEFT JOIN `answer_chk_results` acr ON acr.aid = a.id
WHERE
    q.id = lq.qid
AND lq.lid = 1 
```

结果只有 1 个问题，答案计数错误。（我的数据库中有大约 9-10 个问题）我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T11:15:21.310

A`group by`会有所帮助，例如：

```
select  q.id
,       q.content
,       q.type
,       count(distinct a.id) as answer_count
,       count(acr.checked) as checked_count
from    questions_and_exercises q
join    lesson_questions lq
on      q.id = lq.id
left join
        answers a 
on      a.qid = lq.qid
left join
        answer_chk_results acr 
on      acr.aid = a.id
group by
        q.id
,       q.content
,       q.type 
```

请注意，它返回表格中`count(acr.checked)`一行的答案数。`answer_chk_results`并`count(distinct acr.checked)`返回选中列的不同值的数量。如果选中的是布尔值，则始终为一或零。

# java - 如何压缩整数序列？

> ID：12227220
> 
> 赞同：5
> 
> 时间：2012-09-01T11:11:31.727
> 
> 标签：java, arrays, multidimensional-array, arraylist, compression

我有一个数组，其中包含 -255 到 +255 范围内的数据。例如，数组可以是这样的：

```
 int data[]={234,56,-4,24,56,78,23,89,234,68,-12,-253,45,128}; 
```

在这里，必须在解压缩时保留顺序，例如在第 1 项 234 之后，必须有 56 来。

那么，有哪些方法可以压缩无法观察到任何重复模式的任意数字序列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T11:16:08.373

-255 到 255 的范围表示 511 个值 -> 9 位。如果单独取符号，则符号为 1 位，值为字节。

您可以将数组编写为字节数组，每个字节值将是相关 int 的绝对值。

在一个单独的区域（一个长数组，或者可能是一个字节数组）中，存储符号位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T11:24:56.117

如果数据中确实没有模式，那么有用的压缩算法是不可能的。甚至不要费心尝试！

当然，在这种情况下，因为所有数字都在有限范围内，所以您确实在位中有一个模式 - 即您的高位要么全为 0（正），要么全为 1（负）。

因此，如果您想合理有效地压缩（假设您有足够长的数字数组使其值得），则像 zip 这样的标准压缩算法将起作用。

或者，您可以利用您有效地使用 9 位数字这一事实。因此，您可以通过将数字排列为一长串 9 位块并将其放入字节数组中来推出自己的压缩算法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T11:29:02.660

在您的情况下（当无法观察到重复模式时），**可变长度编码**可能会对您有所帮助。

例如，[Elias 伽玛编码](http://en.wikipedia.org/wiki/Elias_gamma_coding)和[指数哥伦布编码](http://en.wikipedia.org/wiki/Exponential-Golomb_coding)。**一般的想法是，小数字只需要很少的比特进行编码。**Exp-Golomb 编码用于 H.264/MPEG-4 AVC 视频压缩标准。用它对序列进行编码和解码非常容易，实现这种编码也不是很难。

编码所有整数的方法是建立一个双射，将整数 (0, 1, -1, 2, -2, 3, -3, ...) 映射到 (1, 2, 3, 4, 5, 6 , 7, ...) 在编码之前。

例如：

序列（双射后）`[ 0, 2, 5, 8, 5, 2 ]`将被编码为 `101100110000100100110011`-**如您所见 - 此序列中没有重复模式，但它仅用 24 位编码。**

解码过程的简短描述：

1.  从输入流中读取并计算前导零位（直到找到非零位）-> **zero_bits_count**

2.  从输入流中读取下一个**（ zero_bits_count + 1 ）**位 ->**二进制**

3.  将**二进制**转换为**十进制**

4.  返回**（十进制 - 1）**

`1... -> no leading zeros, zero_bits_count = 0 -> read next 1 bit -> [1]... -> [1] is 1 -> 1 - 1 = 0`

`011... -> [0] - one leading zero, zero_bits_count = 1 -> read next 2 bits -> [11]... -> [11] is 3 -> 3 - 1 = 2`

`00110... -> [00] - two leading zeros, zero_bits_count = 2 -> read next 3 bits -> [110]... -> [110] is 6 -> 6 - 1 = 5`

等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T15:04:48.210

如果数字本质上是随机且均匀分布的，并且要保留顺序，那么您可以做的最好的事情是每个符号大约 9 位。在 9 位时，将不使用单个 9 位值，即 2 的补码表示中的 -256。这很方便，因为您可以使用它作为结束符号来标记列表的结尾。然后你还编码了列表的长度，无论如何都需要它。

# php - 将 MySQL 数据存储在文本文件中，如果行数超过 100，则自动创建新文件

> ID：12227225
> 
> 赞同：0
> 
> 时间：2012-09-01T11:11:46.220
> 
> 标签：php, mysql

我将数据库输出存储在 .txt 文件中。我没有任何问题，但我只想将 100 行 MySQL 数据存储在一个 .txt 文件中，其余的存储在其他文本文件中，每个文件中有 100 行。

这是我的代码，它只在一个文本文件中生成所有数据。

```
<?php 
  $File = "yourfile.txt"; 

  $Handle = fopen($File, 'w');
  $res = mysql_query("SELECT * from tableA");

  while ($row = mysql_fetch_array($res)) {
    $oumu .= ''.$row4['title'].'';
  }

  $Data = $oumu; 
  fwrite($Handle, $Data); 
  print "Data Added"; 
  fclose($Handle); 
?> 
```

它将所有数据放在一个文本文件中，但我只想在一个文本文件中存储 100 行，并且我想自动创建下一个文件，以便它可以在每个文本文件中存储 100 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:18:29.077

```
$i = 0;

while ($row = sql_fetch_array($res)) {

if($i == 100)
    break;

$oumu .= ''.$row4['title'].'';
$i++; 
```

}

还有什么是“sql”？你的意思是“mysql_ ...”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:21:02.790

尝试这样的事情：

```
<?php 
$res = mysql_query("SELECT * from tableA");
$rows = 0;
$oumu = array();
while ($row = mysql_fetch_array($res)) {
$oumu[floor($rows)] .= ''.$row['title']."\r\n";
$rows += 0.01;
}
foreach ($oumu as $k => $v) {
$File = "yourfile" . ($k + 1)  . ".txt"; 
$Handle = fopen($File, 'w');
fwrite($Handle, $v); 
fclose($Handle); 
}
print "Data Added"; 
?> 
```

# python - 滚动到 wx.ScrolledWindow 中的子窗口

> ID：12227226
> 
> 赞同：1
> 
> 时间：2012-09-01T11:11:47.687
> 
> 标签：python, wxpython, wxwidgets

我有一个`wx.ScrolledWindow`带有一些子窗口的窗口。

我想要一个滚动到子窗口的功能。

例如：`scrollToChild(childWindow)`。此功能将滚动到子窗口。

这个函数看起来很有用，但我在 API 中找不到这样的函数。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:59:45.487

`ScrolledPanel`，它是 的子类`ScrolledWindow`，具有[ScrollChildIntoView() 方法](http://wxpython.org/docs/api/wx.lib.scrolledpanel.ScrolledPanel-class.html#ScrollChildIntoView)。这似乎可以满足您的需求。

# api - 不能宣传帖子

> ID：12227232
> 
> 赞同：4
> 
> 时间：2012-09-01T11:13:02.777
> 
> 标签：api, facebook-graph-api, graph

谁知道如何使用graph api进行促销帖子？我的意思是来自下一个链接的功能： [https ://www.facebook.com/help/promote](https://www.facebook.com/help/promote)

我应该从我的应用程序可以将帖子发送到某个粉丝页面，然后能够“推广”这个帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T11:21:23.080

您可以按照以下步骤手动推广帖子

1.  单击任何 Facebook 页面右上角的 并选择帐户设置
2.  点击左侧栏中的付款
3.  点击购买历史旁边的查看

要通过您的应用程序执行此操作，您应该有权访问 facebook Ads API。请注意，如果您想申请 Ads API Access，您需要在[https://www.facebook.com/help/contact/517221111658494](https://www.facebook.com/help/contact/517221111658494)填写表格。

# regex - 交换单词的内部字母

> ID：12227233
> 
> 赞同：1
> 
> 时间：2012-09-01T11:13:19.477
> 
> 标签：regex, vb.net, string, linq, scramble

您如何实施打乱单词内部字母的“旧”技巧？

对于那些不知道它的人，[维基百科](http://en.wikipedia.org/wiki/Typoglycemia)很好地描述了它。

正如对[这个问题](https://stackoverflow.com/q/6975437/256431)的评论中提到的，这已经对最初在这个模因的最早形式中提到的“研究”进行了一些[研究。](http://www.mrc-cbu.cam.ac.uk/people/matt.davis/cmabridge/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:18:49.090

马克赫德的回答是有缺陷的。即使纠正了重复字母的问题，使用排序算法也不会产生有效的结果。// 见[http://okmij.org/ftp/Haskell/perfect-shuffle.txt](http://okmij.org/ftp/Haskell/perfect-shuffle.txt)

这是我的尝试，使用递归。非常简单易懂，但性能有待提高。显然它不使用正则表达式、vb.net 或 linq（见标签）。我把它留给读者。

```
Random _rng = new Random();

string Scramble(string text) {
  return String.Concat(text[0], Shuffle3(text.Substring(1, text.Length - 2)), text[text.Length - 1]);
}

string Shuffle3(string text) {
  return ShuffleStep(text, _rng.Next(text.Length));
}

string ShuffleStep(string text, int i) {
  return (text.Length == 1) ? text : text[i] + ShuffleStep(text.Remove(i, 1), _rng.Next(text.Length-1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:13:19.477

我在VB的“一个”行中实现了这个：

```
Dim outText = Regex.Replace(inText, _
        "\b([a-zA-z])([a-zA-Z]+)([a-zA-Z])\b", _
        Function(g) (g.Groups(1).Value & String.Join("", _
            (g.Groups(2).Value.ToCharArray.OrderBy( _
                            Function(c) (Rnd(1))) _
                            )) & _
            g.Groups(3).Value)) 
```

更好的解决方案将提供“更正确”`Function`的方法，因为`OrderBy`它会为字符串中的特定字符返回相同的值，但在这种情况下，只需设置`Rnd`种子即可获得（某种程度上）可重复的结果。

（请注意，将 设置`Function`为直接依赖于`c`提供的意味着所有内部字符都根据某种随机顺序重新排序，因此所有内部重复字母总是在打乱的单词中组合在一起。）

输出示例：

> （请注意，在`Fictunon`前一阶段，所有的`c`内部线程都被指定为 smoe ronadm oidrreng，因此所有的线程都被指定为 srlmceabd 世界。）

# php - 2 加入 MYSQL 和 LIMIT 1

> ID：12227236
> 
> 赞同：2
> 
> 时间：2012-09-01T11:13:34.377
> 
> 标签：php, mysql, sql, join

我有 3 个表，想要进行 sql 查询以正确查看它们。

1.) 扎卡兹

```
id | Comment 
```

2.) 托瓦尔

```
id  | id_clients | zakaz 
```

3.) 用户

```
id | name 
```

它们连接为：

```
zakaz.id = tovar.zakaz
tovar.id_clients = users.id 
```

我想看看

```
zakaz.id | users.name 
```

但我只想限制每个 zakaz 1 个字符串，所以我做了：

```
SELECT zakaz.id, zakaz.comment, tovar.id_clients
    FROM zakaz
    JOIN tovar ON zakaz.id = tovar.zakaz
GROUP BY zakaz.id 
```

然后我想加入用户，但它不起作用

```
SELECT zakaz.id, zakaz.comment, tovar.id_clients, users.name
    FROM zakaz
    JOIN tovar ON zakaz.id = tovar.zakaz
    GROUP BY zakaz.id
JOIN users ON users.id = tovar.id_clients 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:25:10.167

它将显示最新的 id`Zakaz`

```
SELECT  a.name, c.id
FROM    Users a
            INNER JOIN
            (
                SELECT id_clients, zakaz, MAX(id) maxID
                FROM Tovar
                GROUP BY id_clients, zakaz
            ) d 
                ON d.id_clients = a.id
            INNER JOIN Zakaz c
                ON d.zakaz = c.id 
```

# asp.net-mvc - 这是 MVC 中的 DropDownListFor 默认行为吗？

> ID：12227237
> 
> 赞同：0
> 
> 时间：2012-09-01T11:13:59.490
> 
> 标签：asp.net-mvc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:44:17.560

在 HttpPost 方面，View 将所有的 FormCollection 返回给控制器。因此，它始终具有存储在表单元素中的值，即文本框、下拉列表或隐藏字段。

在您的情况下， homeViewModel 必须包含 SelectedCountry 属性的值，因为它在表单集合中并与 DropDown 元素相关联，但 CountryList 不与任何元素相关联，这就是它返回 null 的原因。

要将集合从视图返回到控制器，请找到[此](https://stackoverflow.com/questions/9218602/how-do-i-return-list-or-collection-to-controller-from-view-in-mvc-3)线程。

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:18:44.367

非常感谢Kundan，多个隐藏字段将解决问题，

```
 @Html.DropDownListFor(model => model.SelectedCountry, new SelectList(Model.CountryList, "CountryCode", "CountryName"), "---SELECT COUNTRY---",
                                    new { @class = "chosen", @onchange = "this.form.action='/Home/Index'; this.form.submit(); " })
            @if (Model.CountryList != null)
            {
                for (int i = 0; i < Model.CountryList.Count; i++)
                {
                    @Html.HiddenFor(model => model.CountryList[i].CountryCode) 
                    @Html.HiddenFor(model => model.CountryList[i].CountryName)
                }
            } 
```

# mysql - mySQL - 将连接中的数据加倍

> ID：12227240
> 
> 赞同：0
> 
> 时间：2012-09-01T11:14:27.400
> 
> 标签：mysql

我有一个 sql 查询，它使用 LEFT JOINS 将几个表连接在一起。从查询中检索到的数据加倍。

询问;

```
SELECT 

        T.url AS track_url,
        T.name AS track_name,

        S.status,

        E.action,
        E.ID,
        E.timestamp,

        F.ID AS follower_ID,
        F.follows_ID,

        A.name,
        A.DP,
        A.url AS artist_url

      FROM events E

      LEFT JOIN 
      TRACKS T
      ON T.ID = E.ID AND E.action = 'has uploaded a track.'

      LEFT JOIN 
      STATUS S
      ON S.ID = E.ID AND E.action = 'has some news.'

      LEFT JOIN 
      ARTISTS A
      ON A.ID = E.ID

      LEFT JOIN artist_follows F
      ON F.follows_ID = E.ID

      WHERE E.ID != '2'  AND F.ID = '2'

     ORDER BY E.timestamp DESC LIMIT 5 
```

结果（仅显示来自`status`AND的数据`events`）；

```
+--------------------------------------------------------------------+
| status | action        | ID | timestamp | follower_id | follows_id |
+--------------------------------------------------------------------+
| test   | has some news.| 3  | T.1       | 4           | 3          |
| another| has some news.| 3  | T.1       | 4           | 3          |
| test   | has some news.| 3  | T.2       | 4           | 3          |
| another| has some news.| 3  | T.2       | 4           | 3          |
+--------------------------------------------------------------------+ 
```

如您所见，来自的数据`status`翻了一番。`T.2`属于 status `another`， T.1 属于 status `test`。显示的是来自的数据`status`显示了两次，一次是`T.1's`来自 的数据集，`events`一次是来自`T.2's`的数据集`events`。这意味着当一个 ID 发布了多个状态时，该状态将与事件表中该 ID 的每一位数据相连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:17:30.760

我不在我的常规计算机上，所以我无法测试它，但你不应该在你的连接上`AND`替换吗？`WHERE`

# objective-c - NSTokenField 指定的初始化器是什么？

> ID：12227242
> 
> 赞同：2
> 
> 时间：2012-09-01T11:14:43.927
> 
> 标签：objective-c, cocoa, nstokenfield

我正在尝试子类`NSTokenField`化，我需要在初始化期间设置一些 ivars，但我无法工作我必须覆盖哪个初始化程序。文档没有说明令牌字段的指定初始化程序`NSTokenField`或`NSTextField`继承自哪个初始化程序。

我尝试覆盖`-initWithFrame:`，`-init:`但他们也没有被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:53:28.067

`initWithFrame:`如果您在代码中创建文本字段，或者`initWithCoder:`该字段是在 XIB（Interface Builder）文件中创建的，则它应该是。

这是因为`NSTokenField`继承自`NSView`，它符合`NCoding`协议。所以这对于其他继承自`NSView`.

所以基本上，你应该在子类中覆盖两者：

```
- ( id )initWithFrame: ( NSRect )frame;
- ( id )initWithCoder: ( NSCoder * )decoder; 
```

# javascript - 函数 Empty() {} 在哪里？

> ID：12227243
> 
> 赞同：4
> 
> 时间：2012-09-01T11:14:45.880
> 
> 标签：javascript, google-chrome

在 Chrome 中，

```
(function(){}).__proto__ 
```

是

```
function Empty() {} 
```

所以我会期待

```
new Function(); 
```

是`function Empty() {}`, 但 是`function anonymous() {}`.

我在哪里可以找到`function Empty() {}`？是在里面`Function`还是在`Object`某个地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T11:22:08.297

一个空函数对象（其名称为`Empty`）是`Function`.

```
Function.prototype.toString() === "function Empty() {}"

Object.getPrototypeOf(new Function()).toString() === "function Empty() {}" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T11:32:26.663

这些名称并不意味着您可以使用这些标识符访问它们。

至于函数的原型，名称是[在启动时设置的](http://code.google.com/p/v8/source/browse/trunk/src/bootstrapper.cc#489)。该函数已被命名，但除了公开它之外`.name`，它并没有真正起到任何作用。`.toString()`

例如`new Function()`，名称仅[打印为`.toString()`](http://code.google.com/p/v8/source/browse/trunk/src/v8natives.js#1565). `.name`空字符串也是如此。再一次，它没有多大用处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T11:27:10.933

Empty 是函数原型的名称。从 Chrome 控制台：

```
dir(Function)
  function Function() { [native code] }
  arguments: null
  caller: null
  length: 1
  name: "Function"
    prototype: function Empty() {}
    __proto__: function Empty() {}
    apply: function apply() { [native code] }
    arguments: null
    bind: function bind() { [native code] }
    call: function call() { [native code] }
    caller: null
    constructor: function Function() { [native code] }
    length: 0
    name: "Empty"
    toString: function toString() { [native code] }
    __proto__: Object 
```

# android - Android listview 第一行

> ID：12227244
> 
> 赞同：-1
> 
> 时间：2012-09-01T11:14:48.453
> 
> 标签：android, listview, row, adapter

我有需要从 url 下载数据并将其显示在 listview 中的新闻应用程序，但我希望第一行与其他行不同，因为在那里将显示主要新闻可以说，我有这个适配器类来显示所有行相同，而且我不能修改它来做我上面写的，有人可以帮我吗

这是适配器类的代码

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    View vi=convertView;
    if(convertView==null){
        vi = inflater.inflate(R.layout.list_row, null);
    }

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    //TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView author = (TextView)vi.findViewById(R.id.einfo1); // duration
    TextView datetime = (TextView)vi.findViewById(R.id.einfo);
    TextView story = (TextView)vi.findViewById(R.id.einfo2);
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> n = new HashMap<String, String>();
    n = data.get(position);

    // Setting all values in listview
    title.setText(n.get(Home.TAG_TITLE));
    author.setText(n.get(Home.TAG_AUTHOR));
    datetime.setText(n.get(Home.TAG_DATETIME));
    story.setText(n.get(Home.TAG_STORY));
    thumb_image.setTag(n.get(Home.TAG_IMG));
    imageLoader.DisplayImage(n.get(Home.TAG_IMG), thumb_image);
    return vi;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:20:14.290

你可以使用这个 UI 模式，这很酷 :)

我想它是为你写的：[https ://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:36:24.710

AliSh 的回答很好。它给你一个很好的外观。但是，如果您希望保持简单，请尝试此操作。在 getView() 方法中，

```
if(position==0)
{
    // do stuff for your headline
}
else
{
    // do other stuff
} 
```

谢谢！拉胡尔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T11:37:12.807

您可以使用`ListView`s [addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)方法在顶部添加自定义视图。

# android - 从 URL 获取资源

> ID：12227245
> 
> 赞同：0
> 
> 时间：2012-09-01T11:15:01.360
> 
> 标签：android, url, android-assets

我正在制作一个 Android 应用程序，其核心功能围绕单个 CSV 文件展开，该文件存储在“资产”文件夹中。这是一个字典类型的应用程序，一旦我完成了编码，我可以预见的唯一更新（它是一个非常简单的应用程序）将是在我修改字典内容时更新这个 CSV 文件。

每次更新 CSV 文件时，不必重新编译并向 Google Play 商店提交新版本，用户只需下载应用程序一次，并且应用程序会定期在线检查更新的 CSV 文件，这似乎是明智的。

我将如何从 URL 中检索资源并自动将其复制到“资产”文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:56:41.647

```
public InputStream getHttpContentEasily(String url) {
                    HttpURLConnection conn;

                    try {
                            conn = (HttpURLConnection) new URL(url).openConnection();
                            conn.setConnectTimeout(CONNECTION_TIMEOUT);
                            conn.setReadTimeout(READ_TIMEOUT);
                            conn.setInstanceFollowRedirects(true);
                            return (conn.getInputStream());
                    } catch (MalformedURLException e) {
                            e.printStackTrace();
                    } catch (IOException e) {
                            e.printStackTrace();
                    }
                    return (null);
            } 
```

然后你只需要在你想要的地方用返回的流写你的文件。

# css - 流体高度 div 包括边距

> ID：12227248
> 
> 赞同：0
> 
> 时间：2012-09-01T11:15:28.537
> 
> 标签：css, html, margin, fluid-layout

我有一个带有文本块的 div。有时 4 段，有时 44 段。

我将 div 高度设置为 height:100%：

div 中的文本的下边距为 1em，以使段落空间很好，而无需我`<br>`在代码中放置或类似的东西。

问题是，底部边距推动了这个之后的 div。由于文本底部边距，它会产生 1em 空间。

有没有办法让文本 div 拉伸到 100%，包括边距空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:02:56.913

使用不同的盒子模型：

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; } 
```

有可能完成我认为您所描述的内容，您可以[在此处](http://paulirish.com/2012/box-sizing-border-box-ftw/)阅读更多内容。

# mobile - 有人可以向我指出非常好的 NFC 指南链接和在线材料吗？

> ID：12227249
> 
> 赞同：-1
> 
> 时间：2012-09-01T11:15:42.833
> 
> 标签：mobile, nfc

我正在尝试了解这项技术，并且需要非常好的教程资源。我发现的不够详细。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T18:52:06.213

NFC有几种模式：读卡器/写卡器模式、卡仿真模式和点对点模式。此外，移动设备中的 NFC 使用特定的数据格式：NDEF。在您能够正确理解特定 NFC api（例如 Android NFC API）的文档之前，了解更多关于 NFC 的底层技术是有意义的。本教程可能是一个很好的起点：[http ://www.radio-electronics.com/info/wireless/nfc/near-field-communications-tutorial.php](http://www.radio-electronics.com/info/wireless/nfc/near-field-communications-tutorial.php)

今天可能不太相关的 NFC API 是 JSR 257。但是，本教程提供了 NFC 的一个很好的概述：http: [//java.sun.com/developer/technicalArticles/javame/nfc/](http://java.sun.com/developer/technicalArticles/javame/nfc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T08:23:29.773

WILEY有一本很棒的书名为**NFC From Theory to Practice**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T14:00:32.300

**Android从**[此处](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)或[此处](http://code.google.com/p/nfc-eclipse-plugin/wiki/GettingStartedAndroid)
开始。

1.  如果你想探索 NDEF 格式，试试这个[Eclipse 插件](http://code.google.com/p/nfc-eclipse-plugin/)的图形编辑器。

2.  尝试Android样板项目的[NDEF 工具。](http://code.google.com/p/ndef-tools-for-android/downloads/detail?name=ndeftools-boilerplate-1.0.zip)

3.  如果你通过实践而不是阅读来学习，试试这个[研讨会](https://github.com/skjolber/Fagmote/tree/master/Android/Near%20Field%20Communications)。

Android 上许多 NFC 教程的弱点是它们没有使用高级 API 来读取和写入 NDEF 内容——这就是 NDEF Tools for java 的用武之地。

# android - 在设备本地存储数据

> ID：12227258
> 
> 赞同：2
> 
> 时间：2012-09-01T11:16:56.627
> 
> 标签：android, encryption

我正在制作一个用户可以在设备上存储数据的应用程序。我正在考虑使用数据库存储。但我一直在某处读到可以操作本地存储在设备上的数据。那么，避免这种对数据的“攻击”的最佳方法是什么？我一直在考虑加密数据库中的每个字段，但是我又必须在设备上存储一个加密密钥（？），我想这又可以找到？那么有人对我的想法有任何其他想法/改进吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:40:16.160

> 我正在寻找一种方法让它成为一个巨大的挑战

接受挑战 ：）

您应该做的第一件事是将数据存储在您的应用程序目录中，因为普通设备上的用户/其他应用程序无法读取它。应用程序数据的链接可以从`Context`例如[`Context.html#getDir()`](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29). 您从中获取的目录`Environment`是公开的。

这会阻止普通用户获取数据。但是很多人都有root设备并且可以毫无问题地访问数据，所以这仍然很不安全。

为了使它更难，你需要加密。任何没有像 WEP 那样从根本上破坏的强加密都可以。使用加密会强制用户找到密钥（和加密方法），因为加密的数据无法在合理的时间内解密。

这会导致您的应用程序在某处可以使用密钥但用户无法使用的问题。这是您需要发挥创造力的部分，因为没有安全的方法可以做到这一点。

最简单的方法是将密钥以明文形式放在您的应用程序代码中。喜欢`private static final String SECRET = "42"`。通过简单地拥有加密文件，您将阻止大多数用户进一步挖掘，因为此时您需要一些编程技能来读取数据。

如果用户具有这些技能，他可能会开始查看您的应用程序的代码（使用例如[dex2jar](http://code.google.com/p/dex2jar/) + [jd-gui](http://java.decompiler.free.fr/?q=jdgui)）。如果您想知道对您的应用程序进行逆向工程有多难，您也应该这样做。

如果您使用 proguard 来混淆代码，那么理解代码/查找加密方法 + 密码将变得更加困难，因为应用程序内部的类、方法和变量名称将被缩短为`A.B.c(d)`类似代码。但是无法重命名对 Android API 的方法调用，因为您需要重命名设备上的方法。`"42"`也不会更改字符串常量。

让它更难的下一步是用你的代码动态生成的东西替换那个常量。例如，下面的基本示例通过将数字除以二来构建密码。使用这种方法的优点是密码不再以明文形式存储，您需要了解/反向工程将数据转换为密码的方法。

```
private static final byte[] password = {8, 4};
private String getPassword(byte[] data) {
    StringBuilder sb = new StringBuilder();
    for (byte b : data) {
        sb.append(String.valueof(b / 2));
    }
    return sb.toString();
}
// returns "42" if I did not make a mistake 
```

下一个易受攻击的点是可以轻松定位对设备加密 API 的调用（因为它们无法重命名），这使得找出在哪里寻找加密变得容易得多。如果您不想编写自己的加密方法，我强烈建议您不要这样做，因为这里的轻微错误可能会损坏数据或破坏完整的加密。

例如，如果您使用反射（通过提供 a 中提供的方法/类的名称来调用方法），则该问题可能会更加严重`String`。这`String`也可以像上面的示例一样使用密码进行混淆。

If you do all that and don't use a method not as simple as this one you can make it really hard. [dexguard](http://www.saikoa.com/dexguard) for example can do that for you but it's not free and has the problem that the same method is used for many apps and a lot more people will try to break that than your custom method.

Finding a good method to hide information in your app that is used to generate a key and a method to hide the key generation & encryption / decryption is best figured out by yourself so the method itself is not public knowledge.

You can use combine a lot of techniques to hide the information like moving parts of that into native code so Java guys like me have a hard time or use a network connection to let your server do some work.

But in the end it's all [Security through obscurity](http://en.wikipedia.org/wiki/Security_through_obscurity) and all the extra security measures don't benefit the user but require extra processing time & additional app size.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:32:10.493

> 那么，避免这种对数据的“攻击”的最佳方法是什么？

请勿将其放在设备上。

> 我想让数据对应用程序的用户安全。

然后不要把它放在设备上。它是*用户的*设备和*用户的*带宽，因此它是*用户的*数据。

> 但是如果用户发现他/她会尝试这样做，我正在寻找一种方法来使其成为一个巨大的挑战。

只需在内部存储上使用数据库或其他东西，就会阻止 99% 的 Android 设备用户访问您的数据。你无法阻止剩下的 1%。

# php - 使用 PHP 从 SimpleDB 获取域列表

> ID：12227259
> 
> 赞同：0
> 
> 时间：2012-09-01T11:17:05.367
> 
> 标签：php, amazon-simpledb

我正在尝试使用 PHP 和官方 Amazon AWS PHP SDK 从 SimpleDB 获取域列表。我的代码得到了一些东西，但它似乎在循环错误的东西。

这是我的代码：

```
<?php
// Include the SDK
require_once 'sdk.class.php';

// Include the SDK
$sdb = new AmazonSDB();

$domainList = $sdb->listDomains();

echo "<pre>";
print_r($domainList, false);
echo "</pre>";

echo "<br><br><br>";

if ($domainList) {
  foreach ($domainList as $domainName) {

    $domain_name = $domainName->ListDomainsResult->DomainName;
    echo "Domain: " . $domain_name . "<br>";

  }
}

echo "<br><br><br>";

$request_id = $response->body->ResponseMetadata->RequestId;
$cost = $response->body->ResponseMetadata->BoxUsage;

echo "Request ID: " . $request_id . "<br>";
echo "Cost: " . $cost . "<br>";

?> 
```

我得到以下输出的那一刻

```
Domain: 
Domain: test05
Domain: 
```

我应该得到：

```
test05
test06
test07 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:49:32.257

这比我想象的要容易。有一个更容易使用的命令：

这是代码：

```
<?php
// Include the SDK
require_once 'sdk.class.php';

// Include the SDK
$sdb = new AmazonSDB();

// Get list of domains
$domains = $sdb->get_domain_list();

// echo "<pre>";
// print_r($domains, false);
// echo "</pre>";

foreach ($domains as $domain)
{ 
  echo "Domain: " . $domain . "<br>";
}
?> 
```

# mysql - 休眠性能：很多孩子的同一个基类

> ID：12227263
> 
> 赞同：1
> 
> 时间：2012-09-01T11:17:31.680
> 
> 标签：mysql, oracle, hibernate

我有很多课程 C1、C2、..、Cn (n~100)。每个类都有对其他类（子类）的引用。但是一个类可以在不同的类中引用（孩子可能有不同类型的父母）。例如，C1 可能有以下子项：C2、C3、C4。但 C2 也可能是 C4 的子代。

```
class C1 extends AbstractEntity{
   C2 c2;
   C3 c3;
   C4 c4;
}

class C4 extends AbstractEntity {
   C2 c2;
   C5 c5;
} 
```

有一个实体，我想得到它的父母。所以我创建 AbstractEntity 类

```
class abstract AbstractEntity{
   Long id;
   AbstractEntity parent;
} 
```

当我在 Hibernate 中使用 JPA 注释将对象持久保存到数据库时。所以我得到以下 AbstractEntity 表：

```
table AbstractEntity (id long primary key, parent_id long foreign key references AbstractEntity(id), discriminator varchar(40)); 
```

现在要对具体实体执行任何操作（添加、更新、删除），将执行与 AbstractEntity 的连接。每次操作！所以所有操作都需要访问同一个表。这将如何影响性能？这是否允许我同时对不同的资源类型执行操作，它们不会阻塞吗？

我知道在事务期间并非整个表都被锁定，这在很大程度上取决于所使用的 DBMS。但总的来说，在使用hibernate时考虑为大量子类摆脱普通超类的方法可能更好？如果 DBMS 真的很重要，那就是 MySQL 和 Oracle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:17:05.187

不同子类上的操作不会互相阻塞。hibernate 不会自行阻塞表。查看性能是否足够好的最简单方法是尝试一下。

# c++ - 如何在 Qt 中绘制和编辑折线图

> ID：12227268
> 
> 赞同：1
> 
> 时间：2012-09-01T11:18:22.087
> 
> 标签：c++, qt, graph, qwt, linegraph

我需要在 Qt 中绘制图表。用户拥有创建和删除顶点（点）和边（线）的能力。用户也可以用鼠标移动顶点。

[Qwt](http://qwt.sourceforge.net/)可以帮助我还是我应该使用其他东西（例如使用 QWidget + QPainter 自己绘制）

PS 可能存在未连接的顶点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:34:52.333

我找到了 Qt 示例 - [Eastic Nodes](http://qt-project.org/doc/qt-4.8/graphicsview-elasticnodes.html)。经过一些工作，我做了我想要的。
更新：如果有人感兴趣，[这是我的代码。](https://github.com/Stals/animationEditor/tree/master/animetionEditor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:24:26.637

使用 QGLWidget 结合 QStack 来保存顶点、实体类型及其信息（颜色、线宽）。

你重载 QGLWidgets 虚函数 initializeGL ， resizeGL 和 paintGL

这是一个例子：

```
#ifndef DDEVICE_H
#define DDEVICE_H

#include <QtOpenGL/QGLWidget>
#include "Renderer.h"

class dDevice : public QGLWidget
{
    Q_OBJECT
public:
    explicit dDevice(QWidget *parent = 0);
protected:
    void initializeGL(){            Renderer::Engine()->init();     }
    void resizeGL(int w, int h){    Renderer::Engine()->resize(w,h);}
    void paintGL(){                 Renderer::Engine()->draw();     }
};

#endif // DDEVICE_H 
```

和渲染器单例。

```
#ifndef RENDERER_H
#define RENDERER_H
#include <QtOpenGL/QtOpenGL>
#include "Types.h"

class Renderer : public EStack
{
    int width,height,aspect_ratio;
public:
    static Renderer* Engine();
    bool init();
    bool resize(int W,int H);
    bool draw();
private:
    Renderer():EStack(){ }
    static Renderer* m_pInstance;
};

#endif // RENDERER_H 
```

EStack 是实体堆栈，一个包含 QStacks 的线、贝塞尔曲线、圆弧、圆盘、圆和折线的类。哪些是包含顶点、颜色、线宽结构的实体结构。

绘制带有**四个控制点**和 #defined REGEN 量常数通常高于 36 的 Bezier 曲线。在 Renderer::draw 中添加它。reziseGL 也调用paintGL。

```
 Entities::Bezier temp = bcurves().at(i);
                glLineWidth(temp.LW.value); // change LWidth

                glColor3f( temp.CL.R, temp.CL.G, temp.CL.B );
                double A[] = { temp.cPoints.points[0].X , temp.cPoints.points[0].Y };
                double B[] = { temp.cPoints.points[1].X , temp.cPoints.points[1].Y };
                double C[] = { temp.cPoints.points[2].X , temp.cPoints.points[2].Y };
                double D[] = { temp.cPoints.points[3].X , temp.cPoints.points[3].Y };
                glBegin(GL_LINE_STRIP);
                double a = 1.0;
                for(int ii=0;ii<=WW_BEZIER_ACCURACY;ii++){
                    double b = 1.0-a;
                    double X = A[0]*a*a*a + B[0]*3*a*a*b + C[0]*3*a*b*b + D[0]*b*b*b;
                    double Y = A[1]*a*a*a + B[1]*3*a*a*b + C[1]*3*a*b*b + D[1]*b*b*b;
                    glVertex2d(X,Y);
                    a = a - 1.0/WW_BEZIER_ACCURACY;
                }
                glEnd(); 
```

或使用其实体结构的简单线条。

```
 Entities::Line temp = lines().at(i);

            glLineWidth(temp.LW.value); // change LWidth
            glBegin(GL_LINE_STRIP);
            glColor3f(temp.CL.R,temp.CL.G,temp.CL.B);

            glVertex2d(temp.A.X,temp.A.Y);
            glVertex2d(temp.B.X,temp.B.Y);
            glEnd();
            glLineWidth(WW_DEFAULT_LWIDTH); // reset LWidth 
```

这也绘制了一条线带。

```
glBegin(GL_LINE_STRIP);
glVertex2d(0,0);
glVertex2d(.5,.5);
glEnd(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T13:43:19.920

Qwt 可用于执行此操作。查看 Qwt 包的示例目录中的 event_filter 示例。该示例不允许添加和删除顶点，但添加它应该不会太难。

我会推荐 Qwt，因为它提供了许多您需要的基本绘图功能并且非常可扩展，因此您可以轻松添加新功能。

# android - 在状态栏中创建动态变化的图标和状态通知（正在进行），Android

> ID：12227270
> 
> 赞同：2
> 
> 时间：2012-09-01T11:18:57.127
> 
> 标签：android, user-interface, android-notifications

我想创建动态更改/动画图标，这些图标将显示在状态栏和 android 的通知中。以下是一些可以阐明我想要什么的示例：

![在此处输入图像描述](../Images/a864f170733c6a06890554d0f5ca48d3.png)

![在此处输入图像描述](../Images/bb357cda85f80d4746ebbea0e2edb633.png)

在上面的示例中，状态栏左侧的第二个图标随时间变化！我想在我的应用程序中添加类似的功能，但我无法弄清楚如何做到这一点。

另外请告诉我应该制作的图像图标的尺寸是多少？

# django - 使用 django 1.4 的 url 语言环境

> ID：12227271
> 
> 赞同：1
> 
> 时间：2012-09-01T11:19:08.033
> 
> 标签：django, localization

我正在尝试按照此处所述应用 django URL 语言环境

[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#translating-url-patterns](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#translating-url-patterns)

下面是我的设置文件

```
LANGUAGE_CODE = 'en'

gettext = lambda s: s

LANGUAGES = (
    ('ar', gettext('Arabic')),
    ('en', gettext('English')),
) 
```

我的 urls.py 如下

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf.urls.i18n import i18n_patterns

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^sitemap\.xml$', 'sitemap.view', name='sitemap_xml'),
)

urlpatterns += i18n_patterns('',

    url(r'^', include('bon_app.apps.bonz.urls')),

    url(r'^', include('bon_app.apps.pages.urls')),

) 
```

它目前仅适用于英语，当我尝试 127.0.0.1/en/ 时它可以工作，但是当我尝试 127.0.0.1//ar/ 时，它不知道为什么会这样？

我目前使用 django 1.4

更新

bon_app/apps/bonz/urls.py

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('bon_app.apps.bonz.views',

    url(r'^$',              'home',                               name='bonz-home'),
    url(r'^promotion/$',    'home',  {'model'   : 'Promotion'},   name='bonz-promo'),
    url(r'^event/$',        'home',  {'model'   : 'Event'},       name='bonz-event'),
    url(r'^directory/$',    'directory',                          name='bonz-directory')
) 
```

bon_app/apps/pages/urls.py

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('bon_app.apps.pages.views',

    url(r'^contact-us/$', 'contact_us', name='pages-contactus'),
    url(r'^about-us/$', 'about_us', name='pages-aboutus'),

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:12:55.997

你说：

> 它目前仅适用于英语，当我尝试 127.0.0.1/en/ 时它可以工作，但是当我尝试 127.0.0.1//ar/ 时，它不知道为什么会这样？

在“ar”之前有一个双斜杠“//”而不是一个斜杠“/”。

也许这已经是问题所在了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:42:30.873

您必须将 LocaleMiddleware 添加到您的 MIDDLEWARE_CLASSES

# ruby-on-rails - 如何查询中间表？

> ID：12227272
> 
> 赞同：1
> 
> 时间：2012-09-01T11:19:10.710
> 
> 标签：ruby-on-rails

我有两门红宝石课：-

```
 class Role < ActiveRecord::Base
       # attr_accessible :title, :body
       acts_as_authorization_role :subject_class_name => 'User', :join_table_name =>   "roles_users"
    end 
```

和

```
 class User < ActiveRecord::Base
      acts_as_authentic
          acts_as_authorization_object :role_class_name => 'Role', :subject_class_name => 'User'
          acts_as_authorization_subject :association_name => :roles , :join_table_name => 'roles_users'
          has_one:employee_detail ,:foreign_key => "User_id"

     end 
```

和迁移文件是： -

```
 class CreateUsers < ActiveRecord::Migration
    def change
    create_table :users do |t|
     t.string :username
     t.string :email
     t.string :crypted_password
     t.string :password_salt
     t.string :persistence_token
     t.timestamps
   end
 end
end

 class CreateRoles < ActiveRecord::Migration
   def change
    create_table "roles" , :force => true  do |t|
      t.string  :name ,             :limit => 40
      t.string  :authorizable_type, :limit => 40
      t.integer :authorizable_id
      t.timestamps
   end
 end
end

 class RolesUsers < ActiveRecord::Migration
   def change
    create_table "roles_users", :id => false, :force => true do |t|
    t.references  :user
    t.references  :role
  end
 end
end 
```

我有用户 ID 并想检索角色 ID，但无法查询中间表。任何人都可以为此提供一些解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:51:44.620

很明显，您的用户将拥有多个角色

您可以在用户中为角色定义一个 habtm 关系并获取检索角色角色，如下所示

```
class User < ActiveRecord::Base
      acts_as_authentic
      acts_as_authorization_object :role_class_name => 'Role', :subject_class_name => 'User'
      acts_as_authorization_subject :association_name => :roles , :join_table_name => 'roles_users'
      has_one:employee_detail ,:foreign_key => "User_id"
      has_and_belongs_to_many :roles
end 
```

并检索用户的角色，如下所示

```
user = User.find user_id
user.roles # this will give you roles array
role_ids = user.roles.map { |r| r.id } # if you only want array of ids 
```

# rpm - 为其他包创建包装器 rpm

> ID：12227274
> 
> 赞同：0
> 
> 时间：2012-09-01T11:19:20.227
> 
> 标签：rpm, rpm-spec

我正在尝试创建一个 RPM（“我的”）以方便安装另一个 RPM“其他”（不是由我维护）。这个第三方 RPM 需要包“foo”和“bar”。我希望我的 RPM 提供包“foo”和“bar”，但使用我自己的实现。是否可以定义一个 RPM 来指定它提供其他包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:29:52.537

我非常确定我正在寻找一种方法来为包名称起别名，但我错过了明显的“提供”部分。

```
Provides: foo bar 
```

解决了这个问题。

# c# - 在 MVC 中使用实体框架的分层数据表示

> ID：12227277
> 
> 赞同：0
> 
> 时间：2012-09-01T11:19:46.893
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-sql, entity-framework-4

嘿，我正在尝试在 DB 优先模式下使用实体框架。我有一个存储在一个名为“DomainEntities”的表中的实体层次结构。

当我使用实体框架生成模式时，我得到了看起来像这样的正确映射。

## ![域实体模式 EDMX 文件。](../Images/c44f868956f6e49ea6b9efd5234fa659.png)

现在我想知道我应该使用这个模型执行插入的方式是什么。如果我想插入一个带有某个父项的新条目，我需要执行所有这些操作：

```
[HttpPost]
public ActionResult Create(DomainEntity i_EntityToCreate, int ParentEntityID)
{
    using (var db = new CamelotShiftManagementEntities())
    {
        var parentEntity = db.DomainEntities.Find(ParentEntityID);
        i_EntityToCreate.ParentEntity = parentEntity;
        i_EntityToCreate.EntityTypeID = 1;

        db.DomainEntities.Add(i_EntityToCreate);

        db.SaveChanges();
    }
    return RedirectToAction("Index");
} 
```

这是正确的还是我应该遵循另一种设计来表示使用实体框架的实体层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:52:53.747

无需找到ParentEntity，您可以像这样直接将ParentEntityID与DomainEntity对象一起使用，要获取模型中的外键列，请在将表导入EDMX时勾选“在模型中包含外键列”选项。

之后使用下面的代码：

```
[HttpPost]
public ActionResult Create(DomainEntity i_EntityToCreate, int? ParentEntityID)
{
  using (var db = new CamelotShiftManagementEntities())
  {
    i_EntityToCreate.ParentEntityId = ParentEntityID;
    i_EntityToCreate.EntityTypeID = 1;

    db.DomainEntities.Add(i_EntityToCreate);

    db.SaveChanges();
  }

  return RedirectToAction("Index");

} 
```

如果 ParentEntityID 不为空，则删除？标记使其成为不可为空的类型。

# c# - 将静态类中的方法调用到部分类中以打乱列表

> ID：12227285
> 
> 赞同：0
> 
> 时间：2012-09-01T11:21:51.500
> 
> 标签：c#, methods, static, partial

使用 C# 完成程序的主要功能后，我可以轻松地编写代码，但是遇到了障碍，并且已经搜索了几个小时该做什么。

我的程序是在部分类中编写的。我想打乱一个列表，一个图像列表，但我似乎无法从我的部分类中调用静态方法？我从[Randomize a List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)中挖掘了该方法，这正是我想要做的。您可能会注意到我有一个 shuffle 方法，但该方法会随机播放一个数组，而不是一个列表。我已将所有代码添加为折叠状态，仅扩展了感兴趣的方法。我尝试使用内部的 shuffle 方法创建一个新类，但在我的部分类中调用 if 时运气不佳：我希望这不是太多不必要的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Threading;

namespace MemoryMortalKombatStyle
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        //generate random number
        Random r = new Random();
        //int for matching panels loop in matching method
        int v = 0;
        //Counts how many times the music stop/start buttin has been clicked
        int musicCount = 0;
        //timer counter for starting and stopping timer
        int time = 1;
        //First picture to be compared against next clicked
        int myPBox1;
        //Second picture to be compared against first
        int myPBox2;
        //counts the number of clicks events occured during play
        int mouseClicks = 0;
        //create image list for easy
        List<Image> imagesEasy;
        //create image list for hard1
        List<Image> imagesHard1;
        //create image list for hard2
        List<Image> imagesHard2;
        //List for final images picked to be used in the pictureBoxes on easy mode
        List<Image> imagesFinalEasy;
        //List for final images picked to be used in the pictureBoxes hard mode
        List<Image> imagesFinalHard;
        //create array to pick numbers 1-54 for the images to be chosen for the game
        int[] picSlotArray = new int[8];
        //Array to hold what pictures the user has mached
        int[] picsMatched = new int[16];
        //an array for the eight pictures already picked to be stored but now shuffeled in an array
        int[] randArrayEightEasy = new int[8];
        //an array for the eight pictures already picked to be stored but now shuffeled in an array
        int[] randArrayEightHard = new int[8];
        //array containing all panels that match
        int[] matchedPanels = new int[16];
        //the pics picked for easy doubled up twice into one array
        int[] randArraySixteenEasy = new int[16];
        //the pics picked for hard doubles up twice into one array
        int[] randArraySixteenHard = new int[16];
        //random array of 16 from 0-15 including 0 & 15
        int[] randArray1616 = new int[16];
        //Array for pictureBoxes
        PictureBox[] myPics = new PictureBox[16];
        //Array for panels
        Panel[] myPanels = new Panel[16];

        private void Form2_Load(object sender, EventArgs e)...

        private void InitialiseMyPics()...

        private void InitialisePanels()...

        private void Theme()...

        private void ImageListEasy()...

        private void ImageListHard1()...

        private void ImageListHard2()...

        private void ImageListEasyFinal()...

        private void ImageListHardFinal()
        {
            imagesFinalHard = new List<Image>();
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[0])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[1])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[2])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[3])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[4])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[5])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[6])]);
            imagesFinalHard.Add(imagesHard1[(randArraySixteenHard[7])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[0])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[1])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[2])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[3])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[4])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[5])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[6])]);
            imagesFinalHard.Add(imagesHard2[(randArraySixteenHard[7])]);
        }

        private void Randoms()...

        private void ShuffleEasy()...

        //need to some how shuffle the hardFinalList
        private void ShuffleHard()...

        private void SetImagesEasy()...

        private void SetImagesHard()...

        private void ArrayEightTwiceEasy()...

        private void ArrayEightTwiceHard()...

        private void Tags()...

        private void TagsHard1()...

        private void TagsHard2()...

        private void Names1()...

        private void Names2()...

        private void Compare()...

        private void MatchedPics()...

        private void CheckForFinished()...

        private void HidePanels()...

        private void ShowPanels()...

        private void DisableAllPanles()...

        private void EnablePanels()...
        {
        private void HidePictureBoxes()...

        private void RevealPictureBoxes()...

        private void ShowPics()...

        private void panel2_Click_1(object sender, EventArgs e)...

        private void button6_Click(object sender, EventArgs e)...

        private void button7_Click(object sender, EventArgs e)...

        private void New_Game_Click(object sender, EventArgs e)...

        private void timer1_Tick_1(object sender, EventArgs e)...

        private void Music_Stop_Click(object sender, EventArgs e)...

        private void button1_Click(object sender, EventArgs e)
        {
            ImageListHard1();
            ImageListHard2();
            Randoms();
            ArrayEightTwiceHard();
            ShuffleHard();
            TagsHard1();
            ImageListHardFinal();
            //Shuffle Needs to be called here when button is clicked
            SetImagesHard();
            HidePictureBoxes();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:49:17.543

你没有理由不能从你的类中调用一个`static`方法。`partial`以下是一些需要检查的事项：

*   您的类中是否声明了静态方法？如果不是，则必须指定它所在的类的名称。例如，`Shuffler.Shuffle()`
*   如果该方法在另一个类中，请确保该类和方法是可访问的——`public`如果不是，则将该类和方法设置为。
*   确保您以正确的顺序传递正确的参数类型。

# javascript - chrome.tabs.getSelected 在使用清单版本 2 的最新 Chrome 上未定义？

> ID：12227296
> 
> 赞同：0
> 
> 时间：2012-09-01T11:23:39.980
> 
> 标签：javascript, google-chrome, dom-events

我正在尝试创建一个`chrome.tabs.getSelected`用于查找当前 URL 的插件，

下面我附上了一个最小的例子，当按下任何键时，会弹出一个对话框，但它一直告诉我`chrome.tabs.getSelected`未定义：

清单文件：

```
{
    "content_scripts": [
    {
        "matches": ["http://*/*" , "https://*/*"],
        "js" : [ "main.js" ]
    }
    ],
        "manifest_version": 2,
        "description": "XX",
        "icons": {
            "128": "icon.png",
            "16": "button.png",
            "32": "button.png",
            "48": "icon.png"
        },
        "name": "XX",
        "permissions": [ "tabs", "http://*/*", "https://*/*" ],
        "version": "1.2"
} 
```

和 main.js：

```
window.addEventListener("keyup", function(e) {
    chrome.tabs.getSelected(null, function(tab) { // undefined 
        alert (tab.url);
    });

} , false); 
```

铬版： `Version 21.0.1180.89 (154005)`

**编辑**

```
window.addEventListener("keyup", function(e) {
    chrome.tabs.query( {active:true}, function(tab) {
        alert (tab.url);
    });

} , false); 
```

我现在真的不明白，tabs.query 也不起作用。

![在此处输入图像描述](../Images/1bb06c874fc3eac378338a92f973966c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:32:36.497

编辑：抱歉，刚刚意识到您不能`chrome.tabs`在内容脚本中使用。您必须向扩展程序的背景页面发送消息才能访问它。以下是有关消息传递的一些信息：[https](https://developer.chrome.com/extensions/messaging.html) ://developer.chrome.com/extensions/messaging.html 。

# javascript - 使用可可将 JavaScript 注入网站时遇到问题

> ID：12227297
> 
> 赞同：0
> 
> 时间：2012-09-01T11:23:45.303
> 
> 标签：javascript, jquery, objective-c, cocoa, code-injection

我正在尝试将一些 javascript 注入我不拥有的网站。我试图注入的代码如下：

```
function submitFormForTime(time){
    $(".t_h").each(function(i, obj){ // find each element with the class t_h
        if ($(this).text() != time) return; // not the right one
        $(this).parent().find("form").each(function(i, obj){
            obj.submit(); // submit that form
        });
    });
} 
```

这不起作用。看来我使用的方法`stringByEvaluatingJavaScriptFromString`, 不适用于嵌套括号或其他任何东西。它适用于简单的代码。

**问题是代码根本没有被注入**

我的完整代码如下：

```
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"var script = document.createElement('script');"
                            "script.type = 'text/javascript';"
                            "script.text = \"function submitFormForTime(time){ "
                                "$(\".t_h\").each(function(i, obj){"
                                "if ($(this).text() != time) return;"
                                    "$(this).parent().find(\"form\").each(function(i, obj){"
                                        "obj.submit();"
                                    "});"
                                "});"
                            "}\";"
                            "document.getElementsByTagName('head')[0].appendChild(script);"]]; 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:57:51.243

好吧，没有很多麻烦，我可以看到一些小东西。我重写了，也许你可以试试。

```
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@
                        "var script = document.createElement('script');"
                        "script.type = 'text/javascript';"
                        "script.text = function submitFormForTime(time) { $('.t_h').each(function(i, obj) { if ($(this).text() == time) $(this).parent().find('form').each(function(i, obj){ obj.submit(); }); }); } document.getElementsByTagName('head')[0].appendChild(script);"]]; 
```

我希望它像那样工作。

基本上我删除了一些双引号，并用单引号替换了一些，而不必转义它们。我将所有脚本文本写在一行上。

如果 form 是一个类，则 find('form') 应该是 find('.form')，如果 form 是一个 id，则应该是 find('#form')。

# android - onmouseover 在 jquery 中不起作用

> ID：12227308
> 
> 赞同：0
> 
> 时间：2012-09-01T11:25:25.127
> 
> 标签：android, jquery, cordova

我已经使用 html 和 jquery 开发了 android phonegap 应用程序。我需要显示文本框的工具提示。所以我尝试在 jquery 中使用鼠标悬停，但它像正常的单击事件一样工作。单击文本框后，我收到警报。我试过了javascript也。

这是我的代码：

```
 $('#text').qtip({
       content: "element",
       show: 'mouseover',
       hide: 'mouseout'
    });

 <input type="text" id="text" placeholder="first"/>
 <script src="jquery.qtip-1.0.0-rc3.min.js" type="text/javascript"></script> 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:32:36.710

您在电话上没有任何鼠标，因此不能有任何“鼠标悬停”。我知道对于 iOS 有一个运动事件，也许在 Android 上类似的东西可能有用。

# android - 我们如何在 R.id 中使用变量

> ID：12227310
> 
> 赞同：5
> 
> 时间：2012-09-01T11:25:28.563
> 
> 标签：android, absolutelayout

xml的内容是

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainFrame"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<AbsoluteLayout
    android:id="@+id/AbsoluteLayout1"
    android:layout_width="match_parent"
    android:layout_height="172dp"
    android:layout_x="12dp"
    android:layout_y="26dp"
    android:visibility="invisible" >

</AbsoluteLayout>

  <AbsoluteLayout
    android:id="@+id/AbsoluteLayout2"
    android:layout_width="match_parent"
    android:layout_height="172dp"
    android:layout_x="20dp"
    android:layout_y="184dp" android:visibility="invisible">

</AbsoluteLayout>

</AbsoluteLayout> 
```

这是主要代码

```
String layoutid;
int ctr = 1;
AbsoluteLayout [] mainlayout = new AbsoluteLayout[12];

   while (ctr<3)
   {
        layoutid = "AbsoluteLayout" + ctr;
        mainlayout[ctr] = (AbsoluteLayout)findViewById(R.id.layoutid);
        ctr++;
   } 
```

我们需要做一个循环来制作

```
 ctr = 1 
 AbsoluteLayout + ctr = AbsoluteLayout1 
 ctr++; 

 AbsoluteLayout + ctr = AbsoluteLayout2 
```

我们想声明 AbsoluteLayout1 和 AbsouluteLayout2 但它不起作用。我们知道 R.id.layoutid 是罪魁祸首。那么我们该如何解决呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-02T03:56:30.980

我使用 getIdentifier 方法解决了它

```
Button[] buttons; 
for(int i=0; i<buttons.length; i++) {
{
   String buttonID = "sound" + (i+1);

   int resID = getResources().getIdentifier(buttonID, "id", getPackageName());
   buttons[i] = ((Button) findViewById(resID));
   buttons[i].setOnClickListener(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:29:29.307

id 是一个整数值而不是字符串：希望你能从下面的代码中得到一个想法

```
 while (ctr<3)
{
   int layoutid;
    if(ctr==1)
    { layoutid = R.id.AbsoluteLayout1;}
    else{
     layoutid = R.id.AbsoluteLayout2;}
    mainlayout[ctr] = (AbsoluteLayout)findViewById(layoutid);
    ctr++;
}
--------------------------------------------- 
```

所有这些都将发布一个错误，因为它们被处理为 int 本身可以按照您的意愿进行操作，您不能按原样使用它

```
int[] ctra={R.id.xx,R.id.xxx};
  int i=0;
 while (ctr<3)
{
mainlayout[i]=(AbsoluteLayout)findViewById(ctra[i]);
i++;} 
```

# asp.net - asp.net 会话在时间限制之前到期

> ID：12227311
> 
> 赞同：0
> 
> 时间：2012-09-01T11:25:29.807
> 
> 标签：asp.net, session, session-variables

我有 asp.net 应用程序，其中我使用谷歌的开放 id 进行身份验证，我曾经在 vb.net 中的标签控件上显示从谷歌返回的电子邮件地址

```
lblemail.Text = Session("U_EMAIL").ToString() 
```

问题是，过了一段时间这个错误显示，我必须重新登录，然后页面正常工作，错误就`Obeject Reference is not Set To an Instance of Object`在这条线上 `lblemail.Text = Session("U_EMAIL").ToString()`

我试图增加 web.config 中的会话限制，例如

```
<system.web>
    <sessionState mode="InProc" cookieless="false" regenerateExpiredSessionId ="true" timeout="129600" /> 
```

但仍然没有区别，因为当页面加载时并在一段时间后显示上述错误，请帮助我删除此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:36:53.650

您的网站可能还发生了其他事情。是在开发吗？您可能会重新启动网络服务器。如果您更改了网站文件夹中的许多文件，或者您触摸了 bin 目录中的任何内容，应用程序池将重新启动*。*

# xcode - 跳转到 XCode 3 C++ 项目中的#include 文件

> ID：12227313
> 
> 赞同：0
> 
> 时间：2012-09-01T11:25:41.247
> 
> 标签：xcode, xcode3.2

如果我的代码执行以下任一操作：

`#include "file.h"` `#include <file.h>`

我怎样才能跳转到这些文件？我知道“快速查找”和“包含文件的弹出”下拉“#”菜单，但这些都只适用于我的本地包含。

我确定我曾经找到过一种方法，但是当我停止在 Mac 上工作一段时间后就忘记了它，现在我再也找不到它了 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:27:10.933

您是否尝试过单击导入的命令？

# c# - C# 图像更改源

> ID：12227315
> 
> 赞同：-1
> 
> 时间：2012-09-01T11:25:50.617
> 
> 标签：c#, wpf, image

如何在 image1 的 c# 中更改图像源，WPF？

```
<Image 
            Visibility="Visible"
           Name="image1"
            Source="/Panorama-Kocka;component/slike/kocka.PNG"
            Grid.Column="1"
            Grid.Row="0" 
            Stretch="Fill"
            /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:33:09.893

在遇到与您相同的问题并阅读后，我发现了解决方案 - Pack URIs。

我在代码中做了以下事情：

```
Image finalImage = new Image();
finalImage.Width = 80;
...
BitmapImage logo = new BitmapImage()
logo.BeginInit();
logo.UriSource = new Uri("pack://application:,,,/ApplicationName;component/Resources/logo.png");
logo.EndInit();
...
finalImage.Source = logo; 
```

URI 分为几部分：

```
Authority: application:///

Path: The name of a resource file that is compiled into a referenced assembly. The path must conform to the following format: AssemblyShortName[;Version][;PublicKey];component/Path
    AssemblyShortName: the short name for the referenced assembly.
    ;Version [optional]: the version of the referenced assembly that contains the resource file. This is used when two or more referenced assemblies with the same short name are loaded.
    ;PublicKey [optional]: the public key that was used to sign the referenced assembly. This is used when two or more referenced assemblies with the same short name are loaded.
    ;component: specifies that the assembly being referred to is referenced from the local assembly.
    /Path: the name of the resource file, including its path, relative to the root of the referenced assembly's project folder. 
```

应用后的三个斜杠：必须用逗号替换：

```
Note: The authority component of a pack URI is an embedded URI that points to a package and must conform to RFC 2396\. Additionally, the "/" character must be replaced with the "," character, and reserved characters such as "%" and "?" must be escaped. See the OPC for details. 
```

当然，请确保将图像上的构建操作设置为 Resource。

# sql - GROUP BY 显示总和错误的结果

> ID：12227317
> 
> 赞同：0
> 
> 时间：2012-09-01T11:25:58.763
> 
> 标签：sql, oracle

这返回2条记录，但是第二行总和显示为null，这是怎么回事？

```
SELECT nvl(X_CDTR_AGT_ID_2AND,' ')

      ,COUNT(CASE P_PMNT_SRC WHEN 'FDR_ATM' THEN 1 END) as atmCount

      ,( SELECT sum(X_STTLM_AMT) AS IVRSUM
           FROM v_minf_report b 
           WHERE b.X_CDTR_AGT_ID_2AND = ass.X_CDTR_AGT_ID_2AND  
           GROUP BY X_CDTR_AGT_ID_2AND ) as nyun

      ,COUNT(CASE P_PMNT_SRC WHEN 'FDR_INB' THEN 1 END) as inbCount
      ,COUNT(CASE P_PMNT_SRC WHEN 'FDR_IVR' THEN 1 END) as ivrCount
      ,COUNT(CASE P_PMNT_SRC WHEN 'FDR_BV' THEN 1 END) as bvcount
      ,COUNT(CASE P_PMNT_SRC WHEN 'FDR_MANUAL' THEN 1 END) as manualcount

FROM v_minf_report ass
WHERE P_TX_CTGY = 'CTO'
GROUP BY X_CDTR_AGT_ID_2AND 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:45:11.010

```
SELECT
 X_CDTR_AGT_ID_2AND, atmCount, IVRSUM, inbCount, ivrCount, bvcount, manualcount
FROM (
 SELECT nvl(X_CDTR_AGT_ID_2AND,' ') X_CDTR_AGT_ID_2AND,
 COUNT(CASE P_PMNT_SRC WHEN 'FDR_ATM' THEN 1 END) as atmCount,
 COUNT(CASE P_PMNT_SRC WHEN 'FDR_INB' THEN 1 END) as inbCount,
 COUNT(CASE P_PMNT_SRC WHEN 'FDR_IVR' THEN 1 END) as ivrCount,
 COUNT(CASE P_PMNT_SRC WHEN 'FDR_BV' THEN 1 END) as bvcount,
 COUNT(CASE P_PMNT_SRC WHEN 'FDR_MANUAL' THEN 1 END) as manualcount
 FROM v_minf_report
 WHERE P_TX_CTGY = 'CTO'
 group by X_CDTR_AGT_ID_2AND
) as ass JOIN (
 SELECT nvl(X_CDTR_AGT_ID_2AND,' ') X_CDTR_AGT_ID_2AND,
 sum(X_STTLM_AMT) AS IVRSUM
 from v_minf_report 
 GROUP BY X_CDTR_AGT_ID_2AND
) as nyun USING(X_CDTR_AGT_ID_2AND) 
```

# magento - 购物车中的 Magento 运费

> ID：12227318
> 
> 赞同：0
> 
> 时间：2012-09-01T11:26:00.730
> 
> 标签：magento, cart, shipping

我知道这种问题已经被问过几次了，但请听我说完！

我只需要在统一费率运输（确实显示在购物车中）和表费率之间切换。这纯粹是因为一个国家的费率不同（英国是 3.95 英镑，爱尔兰是 20 英镑）。该网站的大多数客户都来自英国，因此我希望购物车假设用户在英国并显示 3.95 英镑作为运费总额。那么如果用户指定收货地址为爱尔兰，它就会改变。

我还有一个购物车促销活动，其中规定如果小计大于 15 英镑，并且用户不是来自爱尔兰，则免运费。这工作正常。运费都很好，我只想在购物车上展示它，基于在英国！

如果我不能自动执行此操作，我将根据小计在其中对成本进行硬编码，我宁愿不这样做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:44:14.213

你试过这个吗：

[http://www.danneh.org/2010/08/adding-shipping-costs-to-the-cart-automatically-in-magento/](http://www.danneh.org/2010/08/adding-shipping-costs-to-the-cart-automatically-in-magento/)

它与 sales_quote_save_before 挂钩，应该做你想做的事。

您将需要知道我不太记得的 tablerate 代码。

如果您的客户不想将大箱子发送到外赫布里底群岛或有不在 3.95 括号内的物品，那么也值得推出您自己的英国运输模块。

无论如何，你启发了我为我的一个客户添加自动送货显示在购物篮中，该客户拥有类似的英国客户。

# sql - 我怎样才能成功完成这个复杂的 CakePHP 多模型 SQL 请求？

> ID：12227332
> 
> 赞同：0
> 
> 时间：2012-09-01T11:28:09.500
> 
> 标签：sql, cakephp, cakephp-2.0

我需要帮助才能使用 CakePHP 发出 SQL 请求。

所以我有一个表出版物：

```
Id

Network_id

User_id

Content 
```

我有3个表链接：

```
Publication to users: publications_users

Publication to clans: publications_clans

Publication to alliances: publications_alliances 
```

在此请求的输入中，我提供了一个包含 ID 的数组`clans`，另一个包含 ID的数组`alliance`a`User_id`和 a `Network_id`。

我需要发出一个 CakePHP 请求，该请求将为我提供属于我的数组`clans`&& 我的数组`alliances`&& my `User_id`&& my的所有出版物`Network_id`。

问题是我不知道如何使用 CakePHP $this->Publication->find(« all »,array()) 语法创建这样一个复杂的。

至少可以这样做吗？有没有人可以帮助我成功地做到这一点，因为我将需要创建很多这样一个复杂的请求，我不知道该怎么做。

非常感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:39:56.700

只需使用可包含行为，阅读此[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:47:56.233

您可以使用正确的 Join Query，然后使用 CakePHP 函数解析，而不是使用 2 或 3 个不同的查询，然后将其存储在数组中。

# jquery - 如果单词以 @ 开头，则分配 css 类

> ID：12227333
> 
> 赞同：0
> 
> 时间：2012-09-01T11:28:10.827
> 
> 标签：jquery, css

我正在开发 twitter 网络应用程序。在段落中，如果我提到@username，我想使用css 突出显示段落中的@username。什么是最容易做到这一点。我有 jquery，但不知道如何。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:38:39.063

您可以通过创建一个名为“highlight”的 CSS 类来实现这一点，该类将用于突出显示和抓取段落内容。并替换为

```
$(function(){
    var str = paragraphtext;
    str = str.replace(/\B@([\w-]+)/gm, '<span class="highlight">@$1</span>');
    alert(str);
}); 
```

检查这个快速**[演示](http://jsfiddle.net/VdJaa/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:34:35.273

仅使用纯 css 是不可能的。你可以 - 正如 rahul 所说 - 将样式应用于整个段落......但是`@something`直接使用样式来定位单词是不可能的，除非它已经用 dom 元素包装.

你最好的办法是用 javascript 来寻找它，然后用`<span class="user">@something</span>`... 替换它们，然后你可以用 css 来定位它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:35:16.870

围绕您要突出显示的所有单词创建一个包含类的跨度，并将所需的 css 分配给该类。

例子：

```
<p>This is text <span class="hl">@forsomeone</span> . 
You should also check <span class="hl">@abc</span> . 
What you say?</p> 
```

和CSS

```
.hl {
  color: red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T11:36:02.560

检查这个 jquery 插件

[http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

# php - 没有 cron 的预定 PHP 脚本执行

> ID：12227335
> 
> 赞同：3
> 
> 时间：2012-09-01T11:28:42.207
> 
> 标签：php, cron, schedule

我有一个 PHP 脚本，需要在每个月底执行。如果不在类 Unix 系统上使用 cron 或在 Windows 系统上使用任务计划程序，我将如何做到这一点？php中没有一些内置功能吗？因为使用 cron/scheduler 并不是 IMO 的可移植方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T11:37:12.937

唯一的另一种方法是在加载网站时触发它。例如，您将存储脚本上次运行的时间。然后每次加载页面时，您都会检查是否该运行它。如果是这样，那么您将把它作为页面加载的一部分运行。当然，这取决于（1）任务是一个非常快的任务，以及（2）任务不必完全按计划运行，直到第二个。这基本上是`wp_cron()`Wordpress 中的工作原理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T11:33:30.953

php 只是一种脚本语言，而不是一种能够感知时间并可能在所需时刻触发事件的进程。

一旦您在服务器上安顿下来，您就不必担心可移植性：迁移到另一个地方不会是一个自动过程，因为环境可能非常不同。

所以坚持使用 cron，或者自己编写一个与操作系统无关的层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T11:41:42.357

在我工作的系统中，我有一个小模块保存了最后一次运行的脚本，并且在每次运行主脚本时，它都会检查脚本是否不应该运行。如果它应该有，它会在执行任何其他操作之前完成，因此系统无论如何都有正确的数据，即使定期脚本没有“按时”运行。它还检查脚本是否不应该运行多次，并在需要时运行多次。有点粗糙，但是除了 PHP/mysql 之外没有任何东西可以产生正确的结果。

# c# - 绑定和级联下拉列表 mvc 3

> ID：12227338
> 
> 赞同：2
> 
> 时间：2012-09-01T11:29:28.400
> 
> 标签：c#, asp.net-mvc, entity-framework

我的看法是

```
<div id="Countryy">
        <div class="editor-label">
        @Html.LabelFor(model => model.Country, "Country")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Country", String.Empty)
        @Html.ValidationMessageFor(model => model.Country)
    </div>
    </div>

   <div id="Statess">
    <div class="editor-label">
        @Html.LabelFor(model => model.State, "State")
    </div>
    <div class="editor-field">
        @Html.DropDownList("State", String.Empty)
        @Html.ValidationMessageFor(model => model.State)
    </div>
    </div>

    <div id="Cityy">
    <div class="editor-label">
        @Html.LabelFor(model => model.City, "City")
    </div>
    <div class="editor-field">
        @Html.DropDownList("City", String.Empty)
        @Html.ValidationMessageFor(model => model.City)
    </div>
    </div 
```

我的控制器

```
public ActionResult Edit(int id)
    {
        Student student = db.Students.Single(s => s.ID == id);

        ViewBag.Country = new SelectList(db.Couns, "ID", "CountryName", student.Country);
        ViewBag.State = new SelectList(db.States.Where(d => d.CountryID.Equals(student.Country)), "StateID", "StateName", student.State);
        ViewBag.City = new SelectList(db.Cities.Where(x => x.StateID.Equals(student.State)), "CityID", "CityName", student.City);

        return View(student);
    } 
```

> 块引用

我的问题是如何级联国家、州和城市下拉列表。当我想编辑数据时会生成此视图。从 db 中保存的数据被检索并绑定到控件，但是当用户更改国家下拉列表的值而不是状态时下拉菜单也应该根据它填充。我在数据库中有国家、州、城市 3 个不同的表，其中包含所需的 pk 和 fk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:13:09.803

这是使用 Ajax 在 MVC 中国家和州级联下拉列表的解决方案：-
通过控制器保留视图包来绑定第一个下拉列表，对于第二个下拉列表，我们可以使用 JavaScript/Jquery 根据所选国家/地区填充值。
下面是cshtml页面上使用的代码：

```
 <div class="editor-label">
                @Html.LabelFor(m => m.Country)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.Country, new SelectList(Model.Country,       "Value", "Text"), "Select Contry", new { onchange = "CountryChange()" })
            </div>
            <div class="editor-label">
             @Html.LabelFor(m => m.State)
            </div>
            <div class="editor-field">
            @Html.DropDownList("state","Select State")
           </div> 
```

我们使用“CountryChange()” javascript 函数来根据国家变化在状态下拉列表中获取和填充数据。下面是 JavaScript 函数的实现。

```
 <script language="JavaScript" type="text/JavaScript">
    function CountryChange () {
        var url = '@Url.Content("~/Account/GetState")';

        var ddlsource = "#Country";
        var ddltarget = "#State";
        if ($(ddlsource).val() != "") {
            $.ajaxSetup({ cache: false });
            $.getJSON(url, { Sel_Country: $(ddlsource).val() }, function (data) {
                $(ddltarget).empty();
                $("#State").append("<option  value=''>Select State</option>");
                $.each(data, function (index, optionData) {
                $("#State").append("<option value='" + optionData.Value + "'>" +     optionData.Text + "</option>");
                 });
             });
        }
        else {
           $("#State").empty();
            $("#State").append("<option value=''>Select State</option>");
       }
   }
 </script> 
```

这里指定的json url“~/Account/GetState”是“Account”控制器中可用的方法“GetState”，用于检索数据并以json格式传递数据。

```
 public JsonResult GetState (string Sel_Country)
        {
        CountryService db = new CountryService ();
        JsonResult result = new JsonResult();
        var vStateList = db.GetStateList(Convert.ToInt64(Sel_Country));
        result.Data = vStateList.ToList();
        result.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
         return result;
        } 
```

# php - 覆盖子包中的 Doctrine Mappgins

> ID：12227343
> 
> 赞同：3
> 
> 时间：2012-09-01T11:30:03.050
> 
> 标签：php, orm, symfony, doctrine-orm

有没有办法为子包中的某些实体覆盖 Doctrine 映射。

我有第三方捆绑包中的父实体，它启用了 softdeleatable 扩展，我想禁用它。

因此，在第三方捆绑包中有：

`<gedmo:soft-deleteable field-name="deletedAt" />`

有没有办法在我的子包中覆盖/禁用它而不更改第三方代码并仍然保留父实体功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:07:28.877

唯一的方法是扩展父实体并自己编写整个映射。使用外部映射——而不是注释——是一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T21:16:03.657

一种可能的解决方案是通过覆盖实体元类映射`EventListener`。

在此处查看示例：[Symfony 2 + Doctrine 2 覆盖实体配置](https://stackoverflow.com/questions/12872523/symfony-2-doctrine-2-overriding-entity-configuration/31603942#answer-31603942)

# c++ - 我的 C++ 应用程序如何调用驱动程序的接口？

> ID：12227344
> 
> 赞同：7
> 
> 时间：2012-09-01T11:30:18.617
> 
> 标签：c++, windows, driver

我有驱动源代码，看懂了。我在用户模式下编写了一个应用程序。我想调用驱动程序的功能。我应该怎么做？

一些驱动程序头代码：

```
...
BYTE ReadRegister(DEVICE_CONTEXT *pDevice, BYTE SlavAddr, BYTE SlavMode, WORD RegAddr, BYTE* pData, BYTE DataCont);

BYTE WriteRegister(DEVICE_CONTEXT *pDevice, BYTE SlavAddr, BYTE SlavMode, WORD RegAddr, BYTE* pData, BYTE DataCont);
... 
```

驱动cpp代码片段：

```
BYTE ReadRegister(DEVICE_CONTEXT *pDevice, BYTE SlavAddr, BYTE SlavMode, WORD RegAddr, BYTE* pData, BYTE DataCont)
{
.....
}

//-----------------------------------------------------------------------------
BYTE WriteRegister(DEVICE_CONTEXT *pDevice, BYTE SlavAddr, BYTE SlavMode, WORD RegAddr, BYTE* pData, BYTE DataCont)
{
....
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T11:43:09.347

您不能直接调用内核模式驱动程序 API 函数。您应该改用[IOCTL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363219%28v=vs.85%29.aspx) API。

通常的工作流程场景是这样[的](http://undocumented.rawol.com/sbs-w2k-6-calling-kernel-api-functions-from-user-mode.pdf)：

1.  用户模式应用程序发布一个 IOCTL 请求，传入有关要调用的函数的信息，以及指向其参数堆栈的指针。
2.  内核模式驱动程序分派请求，将参数复制到自己的堆栈中，调用函数，并将结果传递回 IOCTL 输出缓冲区中的调用者。
3.  调用者获取 IOCTL 操作的结果并像在正常的 DLL 函数调用之后那样继续。

# bash - 如何多次使用管道？

> ID：12227348
> 
> 赞同：0
> 
> 时间：2012-09-01T11:30:41.983
> 
> 标签：bash, pipe

我试图用函数来做到这一点：

```
filter-root () {
echo $1 | perl -pe 's/ /\n/g' | perl -pe 's/.*(emacs|libreoffice|autokey|bkubuntu).*//' | perl -pe 's/^\n//'
} 
```

但它不起作用：

```
$ myList=`git ls-files`
$ filter-root myList
myList 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:45:55.310

`bash`当您为变量赋值时，您单独编写变量：

```
MYLIST=`ls *.txt` # Remember to avoid blanks aroud the "=" 
```

但是如果你想`bash`扩展它们，你必须`$`在它们前面添加一个：

```
echo $MYLIST # Usually is "safer" to wrap the variable with quotes - echo "$MYLIST" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:34:20.650

您需要预先添加 a`$`来传递变量：

```
filter-root $myList 
```

此外，您应该传递`"$myList"`以防止 myList 的内容被 Bash 拆分为令牌......或者您可以使用`echo "$*"`

# ruby-on-rails - 为什么我的 .where 语句不适用于 ActiveRecord 中的联接？

> ID：12227352
> 
> 赞同：0
> 
> 时间：2012-09-01T11:31:08.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, where-clause

在我的应用程序中，我有一个查询来确定游戏是否有喜欢，

```
@games = Like.select('l.*').where(:game_id => @game.id).joins('join likes l on likes.user_id=l.likes and l.user_id=likes.likes') 
```

游戏需要有一个特定的id并且2个用户都必须喜欢这个游戏

第一个 where(:game_id => @game.id) 不起作用，尽管它返回来自多个 game.id 的结果，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:56:57.217

如果你已经像这样建立了两个模型之间的关系：

```
class Game < ActiveRecord::Base
    has_many :likes
end

class Like < ActiveRecord::Base
    belongs_to :game
end 
```

然后在您的控制器中，您只需要：

```
@game = Game.find_by_id(game.id)
@likes = @game.likes.count 
```

无论如何，在这种情况下，我认为最好的方法可能是使用添加喜欢作为属性并使用 counter_cache_column。

# mysql - 给定索引之前最后更改值的 SQL

> ID：12227354
> 
> 赞同：3
> 
> 时间：2012-09-01T11:31:45.890
> 
> 标签：mysql, sql

我的表会跟踪对其他情况下不变的值的更改。

例如，如果资源 1 和 2 分别以 100 和 50 的值开始，则可能会出现这种情况 - 然后资源 1 在第 5 天增加到 110 `(but resource 2 is unchanged)`，然后资源 2 在第 7 天更改为 60。

```
 resource_id | date_id | value
 ------------+---------+------
 1           | 1       | 100
 2           | 1       |  50
 1           | 5       | 110
 2           | 7       |  60 
```

是否有一个简单的查询来获取特定日期的资源价值？就像是：

```
SELECT resource_id, date_id, value FROM Resources WHERE ??? -- day = 6 
```

* * *

```
resource_id | date_id | value
------------+---------+------
1           | 5       | 110
2           | 1       |  50 
```

注意：***我不想插值 - 只是最后一个设定值。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:34:54.323

我认为这应该有效：

```
SELECT resource_id, 
       date_id, 
       value 
FROM   resources, 
       (SELECT resource_id, 
               Max(date_id) AS date_id 
        FROM   resources 
        WHERE  date_id <= 6 
        GROUP  BY resource_id ) temp 
WHERE  resources.resource_id = temp.resource_id 
       AND temp.date_id = resources.date_id 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/b1cc9/3)

# android - 从应用程序资源加载 WebView 中的图像

> ID：12227359
> 
> 赞同：0
> 
> 时间：2012-09-01T11:32:54.920
> 
> 标签：android, android-webview

是否可以从应用程序资源（`/res`目录）加载图像？

PD：我知道我可以从资产中加载，但对于商品，为了避免重复图像，如果可能的话，我想从资源中加载一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:37:05.553

在安卓 2.2 中工作

```
<img src = "file:///android_res/drawable/test.png" /> 
```

其中 tes.png 在 res/drawable-mdpi 文件夹中

或者使用这个。

```
"android.resource://[package]/[res id]" 
```

# vbscript - 仅在第一次执行脚本时出现 VBS 脚本 (VBScript) 错误 800A0035 和/或 800A004C

> ID：12227370
> 
> 赞同：0
> 
> 时间：2012-09-01T11:35:01.437
> 
> 标签：vbscript, path, runtime-error, wsh

我对所有这些 VBS 东西都很陌生，因为基本上我需要做的就是制作一个简单的 VBS 脚本，我可能已经编写了该脚本，但是，我的问题是当我第一次执行它时它会给我`800A0035`或错误`800A004C`一台特定的 PC，只要我第二次执行它，它就可以正常运行并完成它应该做的事情。顺便说一句，在我自己的计算机上，即使在第一次执行时它也可以正常工作。我知道这些错误与错误的路径有关，但我已经多次检查了我的脚本，我 100% 肯定它们是正确的。

这是脚本：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
objFSO.MoveFile "rar.bat" , "rarp.bat"
'HideBat.vbs
CreateObject("Wscript.Shell").Run "rarp.bat", 0, True 
```

该脚本应该做的是将`rar.bat`文件重命名为`rarp.bat`并运行该批处理文件 ( `rarp.bat`) 而不会弹出命令提示符。我猜批处理文件的作用无关紧要，但无论如何，它只是运行*WinRAR*。

该`rar.bat`文件和 VBS 脚本在同一个文件夹中，这就是我在脚本中使用相对路径的原因。我不能使用绝对路径，因为我需要在多台计算机上运行脚本。

我在互联网上的某处读到默认情况下 VBS 脚本在`C:\Windows\System32`使用相对路径时首先查找文件。我什至尝试在脚本中使用绝对路径，但也没有用。这是我需要它们的样子：`%systemdrive%\users\%username%\appdata\roaming\rar.bat`但这在 VBS 脚本中根本不起作用。

我真的认为我需要的是一个简单的脚本，但显然很难让它正常工作。我会非常感谢那些帮助我的人。

非常感谢您。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:08:27.840

您的脚本（至少是已发布的部分）可能会出错的唯一方法是找不到要重命名的源文件，您应该添加完整的脚本和错误消息以确保。我想这是由你的电脑上的安全设置引起的，它比其他电脑上的更宽容，例如 UAC ？在另一台电脑上，尝试将文件放在像 c:\test 这样的映射中，然后在检查文件 rar.bat 确实存在于同一个映射中之后再次运行它。您在另一台电脑上是否有相同的凭据（管理员）？如果您只想运行隐藏的bat文件，为什么要重命名？

你是怎么下载bat的？然后如何调用脚本？可能是第二次不再是问题的时间问题。在这种情况下，如果文件已经准备好，请检查您的脚本，并在没有的情况下循环睡眠

如果你想使用绝对路径，你可以试试这个

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set WshShell = CreateObject("WScript.Shell")
Set WshSysEnv = WshShell.Environment("PROCESS")
path = WshSysEnv("USERPROFILE") & "\appdata\roaming\rar.bat"
wscript.echo path
objFSO.MoveFile path , "rarp.bat"
CreateObject("Wscript.Shell").Run "rarp.bat", 1, True 
```

# android - TextToSpeech 如何知道语音何时结束

> ID：12227372
> 
> 赞同：1
> 
> 时间：2012-09-01T11:35:10.200
> 
> 标签：android

```
TextToSpeech tts = new TextToSpeech(context, this);
tts.speak(text, TextToSpeech.QUEUE_ADD, null); 
```

我怎么知道讲话何时结束，因为停止讲话时我需要执行一些额外的代码。但我有问题，因为我不知道如何检查讲话是否结束。

有什么选项可以检查吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:50:57.123

是的，有两个听众：

*   API 4-14：[OnUtteranceCompletedListener](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html)
*   API 15+：[UtteranceProgressListener](http://developer.android.com/reference/android/speech/tts/UtteranceProgressListener.html)

* * *

UtteranceProgressListener我没用过，但是OnUtteranceCompletedListener很特别。这里有两个提示：

*   在回调中设置此侦听`onInit()`器，以前从未如此。
*   您必须将第三个参数传递`params`给`speak()`valid `KEY_PARAM_UTTERANCE_ID`，否则永远不会调用此侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:50:39.580

据我所知，没有监听器，但我们调用了方法`isSpeaking()`来检查 TTS 引擎是否忙于说话。这样你就可以借助这个方法来检查它是否在说话

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T17:51:23.573

```
public boolean isDoneSpeaking() {
                   if(!mTts.isSpeaking())
                {
                    return true;
                }
                else
                {
                    return false;
                }

            } 
```

# r - 如何在R中转换编码

> ID：12227379
> 
> 赞同：2
> 
> 时间：2012-09-01T11:36:11.623
> 
> 标签：r

这是python中的一些转换，语言环境是“utf-8”

```
>>> s1="你好"   #你好 = how are you?
>>> s2=unicode(s1,"utf-8")
>>> s2
u'\u4f60\u597d'                #s2  is the unicode form of s1
>>> s3=s2.encode("utf-8")
>>> s3
'\xe4\xbd\xa0\xe5\xa5\xbd'     #s3  is the utf-8 form of s1
>>> s4=s2.encode("gbk")
>>> s4 
'\xc4\xe3\xba\xc3'              #s3  is the gbk  form of s1 
```

我怎么能在R中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:19:03.227

有两个函数可以帮助您从 转换`utf-8`为`hexmode`：

*   `utf8ToInt`
*   `as.hexmode`

尝试这个：

```
as.hexmode(utf8ToInt(s1))
[1] "4f60" "597d" 
```

* * *

但至于`gbk`转换，我很抱歉我不知道。

# iphone - 如何在不阻塞 UI 的情况下将大数据加载到 UITableView

> ID：12227390
> 
> 赞同：1
> 
> 时间：2012-09-01T11:37:35.850
> 
> 标签：iphone, uitableview

我有一个表格视图，我需要在其中显示大约 10,000 行（数据本地存储在 sqlite 中）

但是当我们跳转到该视图时，应用程序在加载所有这些行时被阻塞（冻结）。

有没有在不冻结 UI 的情况下加载数据？

PS。我们的app被拒绝了，是不是这个原因？

谢谢

编辑：他们拒绝并给出以下信息“你好。

我们注意到您的应用缺少原生 iOS 功能。

请查看视频以获取应用程序设计信息：“入门视频：出色 iPhone 应用程序的成分”和“iPhone 用户界面设计”，可在 iOS 开发人员中心[http://developer.apple.com/devcenter/ios](http://developer.apple.com/devcenter/ios)，尤其是 iOS 人机界面指南[http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf)，“伟大的 iOS 应用程序拥抱平台和 HI 设计原则”部分[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)和“人机界面原理”[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Principles/Principles.html%23//apple_ref/doc/uid/TP40006556-CH5-SW1](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Principles/Principles.html%23//apple_ref/doc/uid/TP40006556-CH5-SW1)。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:54:11.723

对于一万行，您别无选择，只能按需加载数据。否则，您的应用程序就没有机会达到不错的水平。像您描述的冻结肯定足以看到您的应用被拒绝¹。

这种方法在内存方面也相当浪费，因为在一万行中，您在任何给定时间最多需要两打。

一个相当简单的加快速度的方法是`NSCache`为您的数据页准备一个（例如，每页十个项目），添加获取记录总数的代码，并修改检索数据的代码以从单个读取记录页（使用[`LIMIT/OFFSET`](http://www.sqlite.org/syntaxdiagrams.html#select-stmt)）。当您的表显示行时，它应该尝试从缓存中获取该行的一页。如果页面不存在，它应该从 sqlite 加载它，并放入缓存中。使用页面将最小化到数据库的往返次数；使用缓存将让您管理内存的最佳使用。

* * *

¹这一次看起来您的应用程序没有因为冻结而被拒绝，但是一旦您修复了“缺少本机 iOS 功能”，冻结将触发另一个拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:54:25.647

检查[此](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394-Intro-DontLinkElementID_2)演示以延迟加载所有数据以及图像。

此示例演示了加载和显示 UITableView 的多阶段方法。它首先从 RSS 提要加载相关文本，以便尽快加载表格，然后异步下载每一行的图像，以便 UI 响应更快。

# ios - *等待应用程序启动* MonoTouch 中的调试选项

> ID：12227391
> 
> 赞同：3
> 
> 时间：2012-09-01T11:37:41.043
> 
> 标签：ios, xcode, debugging, xamarin.ios, monodevelop

MonoTouch 中是否有这样的调试选项？

![描述](../Images/389d122186578fc6be2e66c551d1d108.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:03:36.053

在设备上开始调试，然后点击主页按钮。重新启动应用程序时，调试器应保持连接`HandleOpenUrl`状态。

# image - vb 调整图像大小，使其自动适合

> ID：12227395
> 
> 赞同：2
> 
> 时间：2012-09-01T11:38:28.410
> 
> 标签：image, vb6, resize

我是 VB 6 的新手，我遇到了一个问题。我有一张大图。我想把它放在一个很小的形式中，这样它看起来很短的文本。

但是，当我在图片框中添加图片时，图片是从左上角添加的，而右下部分被切断。有时我还需要重新调整图片框的大小。所以我想知道如何使图像自动适合图片框，并在我重新调整图片框大小时自动调整大小。我已经寻求帮助，但在这种情况下找不到任何帮助。我还尝试将 AutoSize 和 AutoRedraw 选项设置为“true”，但它仍然无法正常工作。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T12:14:45.363

假设这*是*一个 VB6 问题，而不是您标记的 VB.NET ......

如果您只想显示图片并且不需要与 a 关联的任何其他属性、方法和事件，`PictureBox,`您可以使用`Image`控件并将其`Stretch`属性设置为`True.`

如果你*确实*需要它，`PictureBox,`你可以通过添加第二个隐藏的 AutoSizing 来做到这一点，`PictureBox`它被设置为所需的图片，然后使用这样的代码将它重新绘制到可见的`PictureBox.`

```
pbxShown.PaintPicture pbxHidden.Picture, _
        0, 0, pbxShown.ScaleWidth, pbxShown.ScaleHeight, _
        0, 0, pbxHidden.ScaleWidth, pbxHidden.ScaleHeight, _
        vbSrcCopy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T05:54:11.497

将图片框属性的 AutoSize 属性设置为 True

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-22T13:32:46.607

自动拉伸图片框中加载的图片的代码，

```
Private Sub AutoSizeToPicture(Picture1 As PictureBox)
    Picture1.ScaleMode = 3
    Picture1.AutoRedraw = True
    Picture1.PaintPicture Picture1.Picture, _
    0, 0, Picture1.ScaleWidth, Picture1.ScaleHeight, _
    0, 0, Picture1.Picture.Width / 26.46, _
    Picture1.Picture.Height / 26.46
End Sub 
```

# ios - 如何防止未经授权的 HTTP 请求？

> ID：12227399
> 
> 赞同：3
> 
> 时间：2012-09-01T11:39:35.273
> 
> 标签：ios, http, authorization

我的 iOS 应用程序中有一些代码，如下所示：

```
URL *url = [NSURL URLWithString:@"http://urltomyapp.com/createaccount"];
ASIFormDataRequest *createAccountRequest = [ASIFormDataRequest requestWithURL:url];
[createAccountRequest setPostValue:email forKey:@"email"];
[createAccountRequest setPostValue:password forKey:@"password"];
[createAccountRequest startAsynchronous]; 
```

在我的服务器实现中，我只是通过 self.request.get('email') 获取这些信息并创建一个帐户，而不做任何检查或任何事情。但是，似乎任何人都可以轻松运行上面的代码（我的意思是您需要做的就是复制上面的代码并将其放入您自己的应用程序中，对吧？），他们只需要知道服务器地址，他们可以将任何他们想要的数据附加到请求中，服务器会继续为他们创建一个帐户。

我将如何授权请求以知道它们来自我的应用程序并且仅来自我的应用程序？这是一个普遍的担忧吗？其他产品如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:48:41.670

使用 HTTPS 并在您的应用程序中放置一个证书以验证允许客户端与您的服务器通信。

但相信我，这真的不值得。单独使用 HTTPS 通常是可以的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T16:55:01.123

首先，免责声明。我当然不是**网络**专家，也不是安全专家。事实上，我回答的唯一原因是因为 stackmonster 的回复中的讨论。

但是，我确实知道拦截 SSL 连接非常容易，尤其是在用户同谋的情况下。

不过，总的来说，我认为以下内容是有一些好处的。

您必须确定您要保护的对象/内容。如果你只是想保护应用程序和服务器之间通信中的数据，https 就可以了。外部窥探将与窥探其他 SSL 流量一样有效（或无效）。

但是，如果您试图保护您的 API（您的问题似乎暗示了这一点），那么用户查看您发送的命令是微不足道的（正如您自己通过使用 Charles 发现的那样）。

那么，您想防止任何人知道您的 API 的详细信息吗？您是只想防止 DOS 攻击，还是只让有效用户发出命令，还是什么？

然后，您可以担心身份验证和授权（两个不同的主题）。也许验证请求来自已知实体就足够了。

无论如何，提供指导非常困难，因为您首先必须确定您的网络隐私目标是什么。

然后，如果他们很崇高，那么你就需要大量阅读。

但是，在某些时候，您必须决定什么对您的应用程序/业务至关重要，什么不是。就像任何好的软件设计一样，然后创建一组需求。然后，按某种顺序对它们进行优先级排序（例如，强制性的、必不可少的、很高兴拥有、可以没有）。

这将告诉您是否需要额外的安全性，以及需要什么样的安全性。

然而，大多数人发现，即使锁上所有的门并堵住窗户，也不值得花时间和投资（更不用说保护烟囱，在墙壁、地板和天花板上加混凝土，建造安全室和雇用武装警卫）。

# android - 片段替换现有片段

> ID：12227400
> 
> 赞同：0
> 
> 时间：2012-09-01T11:39:42.337
> 
> 标签：android

我有 MainActivity，它包含 ListFragment 和 framelayout，我可以在单击项目时更改列表中的片段。

我有一个问题，`Fragment1`用新的`Fragment2`，在按钮单击时替换现有的`Fragment1`，`Fragment2`应该替换`Fragment1`，并且应该在左侧具有相同的 ListFragment，并且应该正确处理后退按钮，这意味着当我进入`Fragment2`并按下后退按钮时它应该显示相同的 ListFragment 和 Fragment1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T12:09:11.817

您需要使用`.replace`来切换两个片段，还需要将原始添加到 backstack 以便您可以调用它，并且您需要覆盖 back 键操作才能以这种方式运行。它看起来像这样（使用我的一个项目中的代码，使用支持库）：

要显示您的第一个片段：

```
menu = new MenuFragment_Main();   // instantiate fragment
getSupportFragmentManager().beginTransaction().replace(R.id.pane, menu).commit();  // display fragment 
```

要将其交换为新片段并将其添加到后台堆栈：

```
ListFragment_ShopListItem shoplist = new ListFragment_ShopListItem();  // instantiate fragment
getSupportFragmentManager().beginTransaction().replace(R.id.pane, shoplist).addToBackStack(null).commit();  //  replace original fragment with new fragment, add original to backstack 
```

并覆盖后退键以返回上一个片段：

```
public void onBackPressed() {
    FragmentManager fm = getActivity().getSupportFragmentManager();
    fm.popBackStack();
    return;
} 
```

# java - 连接到 GWT 中的数据库和奇怪的错误

> ID：12227405
> 
> 赞同：0
> 
> 时间：2012-09-01T11:40:33.603
> 
> 标签：java, gwt

我正在尝试在 GWT（服务器端）中建立与 oracle 数据库的连接，这是我的代码：

客户端：

包 com.db.client;

```
 import com.google.gwt.core.client.EntryPoint;
 import com.google.gwt.core.client.GWT;
 import com.google.gwt.user.client.rpc.AsyncCallback;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class Db_connection implements EntryPoint {

private final GreetingServiceAsync greetingService = GWT
        .create(GreetingService.class);

/**
 * This is the entry point method.
 */

public void onModuleLoad() {
    greetingService.greetServer(new AsyncCallback<String>() {
        public void onFailure(Throwable caught) {
            System.out.println("FAILED");
        }

        public void onSuccess(String result) {
            System.out.println(result);
        }
    });
}
} 
```

接口（客户端）：

```
package com.db.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

/**
 * The client side stub for the RPC service.
 */
@RemoteServiceRelativePath("greet")
public interface GreetingService extends RemoteService {
        String greetServer() throws IllegalArgumentException;
} 
```

和：

```
package com.db.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

/**
 * The async counterpart of <code>GreetingService</code>.
 */
public interface GreetingServiceAsync {
    void greetServer(AsyncCallback<String> callback)
            throws IllegalArgumentException;
}} 
```

和服务器端：

```
package com.db.server;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import com.db.client.GreetingService;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import oracle.jdbc.driver.*;

public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer() throws IllegalArgumentException {
        String date = "data";

        try {
            Class.forName("oracle.jdbc.OracleDriver");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Connection conn = null;
        try {
            conn = DriverManager.getConnection(
                    "jdbc:oracle:thin:@//localhost:1521/xe", "test", "test");
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
            Statement stmt = conn.createStatement();
            try {
                ResultSet rset = stmt
                        .executeQuery("select BANNER from SYS.V_$VERSION");
                try {
                    while (rset.next())
                        date = (rset.getString(1)); // Print col 1
                } finally {
                    try {
                        rset.close();
                    } catch (Exception ignore) {
                    }
                }
            } finally {
                try {
                    stmt.close();
                } catch (Exception ignore) {
                }
            }
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                conn.close();
            } catch (Exception ignore) {
            }
        }

        return date;
    }

} 
```

和堆栈跟踪：

```
java.lang.NoClassDefFoundError: java.lang.management.ManagementFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at oracle.jdbc.driver.OracleDriver.registerMBeans(OracleDriver.java:320)
    at oracle.jdbc.driver.OracleDriver$1.run(OracleDriver.java:199)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.jdbc.driver.OracleDriver.<clinit>(OracleDriver.java:195)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.db.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
2012-09-01 13:16:24 com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.db.client.GreetingService.greetServer() throws java.lang.IllegalArgumentException' threw an unexpected exception: java.security.AccessControlException: access denied (java.net.SocketPermission localhost resolve)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.security.AccessControlException: access denied (java.net.SocketPermission localhost resolve)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
    at java.lang.SecurityManager.checkConnect(Unknown Source)
    at java.net.InetAddress.getAllByName0(Unknown Source)
    at java.net.InetAddress.getAllByName(Unknown Source)
    at java.net.InetAddress.getAllByName(Unknown Source)
    at oracle.net.resolver.HostnameNamingAdapter.resolve(HostnameNamingAdapter.java:167)
    at oracle.net.resolver.NameResolver.resolveName(NameResolver.java:133)
    at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:416)
    at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:687)
    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:247)
    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1102)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:546)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:236)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.db.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more 
```

我做错了什么？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:25:42.373

如果您不打算在那里部署应用程序，请在您的项目中禁用 App Engine。

# linq - Linq 的多个不同之处

> ID：12227406
> 
> 赞同：3
> 
> 时间：2012-09-01T11:40:42.340
> 
> 标签：linq, entity-framework

鉴于我在数据库表中的以下信息：

```
Col 1, Col2, Col3
1    , x   , G
1    , y   , H
2    , z   , J
2    , a   , K
2    , a   , K
3    , b   , E 
```

我可以在 Linq 中做什么（因为我正在使用实体框架）来获得以下内容：

```
1    , x   , G
1    , y   , H
2    , z   , J
2    , a   , K
3    , b   , E 
```

你明白了，我可以在 SQL 中很好地使用以下方法：

```
Select Col 1, Col 2, Col 3 
from Table
group by Col 1, Col 2, Col 3 
```

不知道如何在代码中执行此操作，因为我只能找到一种方法在一个列上执行不同的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:48:21.783

试试这个 ：

```
var Result = Context.Table.Select(C => 
                     new { 
                           Col1 = C.Col1, 
                           Col2 = C.Col2, 
                           Col3 = C.Col3 }).Distinct(); 
```

或交替：

```
var Result = Context.Table.GroupBy(G=> new { G.Col1, G.Col2, G.Col3 })
                           .Select(C => new { 
                                             Col1 = C.Key.Col1, 
                                             Col2 = C.Key.Col2, 
                                             Col3 = C.Key.Col3 
                                            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T11:53:36.100

您还可以在 linq 中对多个字段使用 group by：

```
myList.GroupBy(x=>new {x.Col1,x.Col2,x.Col3}).Select(x=>x.First()).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T11:51:44.743

很简单，如果表中只有这三列。

```
var result = Context.Table.Distinct(); 
```

这将返回您想要的结果。

如果您有更多列，那么您可以按照`@Saeed Amiri`他的回答中所述尝试。

`@Kundan Singh Chouhan's`替代方案将为您提供与您在问题中陈述的完全相同的 sql 查询

# javascript - 如何处理使用 facebook javascript sdk 的 Web 应用程序中的 javascript 加载错误

> ID：12227407
> 
> 赞同：3
> 
> 时间：2012-09-01T11:40:43.100
> 
> 标签：javascript, facebook, facebook-graph-api

我正在按照[本教程将 Web 应用程序与 facebook 集成](http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/)

它正常工作，但是当 AVG 不跟踪处于活动状态时，浏览器无法加载 Facebook JavaScript SDK，所以我想向用户展示，在这种情况下，他需要禁用 AVG 不跟踪当前网站。

有没有办法处理 JavaScript 中的加载错误？我们在 Java 中尝试了 catch - JavaScript 中是否有类似的东西，以便我可以处理加载错误。

对不起，如果这是一个简单的问题......我是 JavaScript 的菜鸟 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:53:08.927

我在教程提供的代码末尾附加了一个小函数来提供反馈。

[http://jsfiddle.net/PRvJs/1/](http://jsfiddle.net/PRvJs/1/)

问题在于，由于您的脚本在 Web 应用程序中运行并且阻塞发生在浏览器应用程序级别，您只能推断出事情出错了，即使这样您也必须做出假设——脚本有`load`和`error`事件，但大多数Facebook 阻塞脚本绕过了整个事情，甚至在 HTTP 请求发出之前就将其终止……所以你永远无法真正知道！

作为后备，我做出了等待 30 秒的主观决定，如果脚本注入仍然没有`load`或没有`error`解决方案，则做出任意 [1] 的决定，即您的代码和 Facebook 之间的某个地方根本上搞砸了。据我所知，这是你能确定的最多，也是唯一确定的方法……</p>

[1] 如果 30 秒内没有发生任何事情，大多数连接都会关闭。

# drools-planner - 使用 Drools Planner 组建团队

> ID：12227410
> 
> 赞同：0
> 
> 时间：2012-09-01T11:41:09.903
> 
> 标签：drools-planner, optaplanner

Drools Planner 提供有关是否可以实施的建议：

问题涉及团队组建。强约束：学生必须被分到 N 个组中 每个组必须包含 X 个组成员 弱约束（可能是有序或加权的）：每个组必须有一个数学分数 > Y 的成员 每个组必须由具有相同兴趣的成员组成（可能需要在运行时添加弱约束）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:54:33.530

是的，它看起来很像 Manners2009 示例，它是关于将每张桌子（= 组）的每个座位（= 组位置）分配给客人（= 学生）并确保每张桌子（= 组）至少有 1民主主义者（= 数学分数 > Y 的学生）。然后只需为相同的兴趣规则添加一个软约束。

Manners2009 示例在 5.4.0.Final（它将在 5.5.0.Beta1 中）中的通用移动工厂不是最新的，并且使用 SimpleScore 而不是 HardAndSoftScore，所以还要看看课程课程灵感的例子。

为了避免在同一兴趣规则的软约束上出现“分数陷阱”（参见手册），我怀疑您也必须使用 swapPillarMove（在正常的 changeMove 和 swapMove 之上）。

# django - collectstatic 在 dotcloud 上抛出 'OSError: [Errno 2] No such file or directory:'

> ID：12227413
> 
> 赞同：1
> 
> 时间：2012-09-01T11:41:38.067
> 
> 标签：django, dotcloud

按照 dotcloud 教程中的说明，这是我的代码`postinstall`：

```
#!/bin/sh  
python createdb.py  
python some_project/manage.py syncdb --noinput
python mkadmin.py
mkdir -p /home/dotcloud/data/media /home/dotcloud/volatile/static
ln -sf /home/dotcloud/volatile/static /home/dotcloud/static
python some_project/manage.py collectstatic --noinput 
```

...`nginx.conf`

```
location /media/ { root /home/dotcloud/data ; } 
```

...和`settings.py`

```
....
MEDIA_ROOT = '/home/dotcloud/data/media/'

MEDIA_URL = '/media/'

STATIC_ROOT = '/home/dotcloud/volatile/static/'

STATIC_URL = '/static/'

....

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'some_project',
) 
```

运行时`postinstall`，抛出此错误：
`OSError: [Errno 2] No such file or directory: '/home/dotcloud/rsync-1346498181296/some_project/static'`

我已经使用它很长时间了，它令人困惑，因为文档说`/static/`已经由 python 服务设置并链接到`/home/dotcloud/static`

有人可以帮忙吗？在我开始为静态内容设置应用程序之前，一切都运行良好。Django 版本是 Python 2.7 上的 1.4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:42:40.997

睡了一会儿，我发现我的“静态”文件夹不在我在“settings.py”文件中指定的位置。

此外，dotCloud 更新了他们的文档，警告“/static/”不再像前面所说的那样自动创建，所以我更改了`postinstall`脚本以删除到“/static/”的符号链接，并`nginx.conf`按照更新文档中的说明调整了文件。

参考：
[在 dotCloud 上处理静态文件](http://docs.dotcloud.com/0.4/tutorials/python/django/#handle-static-and-media-assets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:04:38.070

任何像“./postinstall failed with return code”这样的错误消息都意味着您自己的脚本有问题，而不是平台有问题。

为了在 dotCloud 上轻松调试安装后执行，您可以执行以下操作：

假设您的应用是“拉面”，而您的服务是“www”。

```
$ dotcloud -A ramen run www
> ~/current/postinstall 
```

它将重新执行安装后，但这次从您的会话开始，因此您将能够轻松更新安装后代码并重新运行它，而无需一次又一次地推送。

找到根本原因后，在本地修复它并重新推送您的应用程序。

# svg - 基于每次使用的 SVG 符号样式

> ID：12227415
> 
> 赞同：2
> 
> 时间：2012-09-01T11:41:42.043
> 
> 标签：svg, cross-browser, css-selectors

如[http://jsfiddle.net/xMnea/4/](http://jsfiddle.net/xMnea/4/)所示，我定义了一个包含多个元素的符号，每个元素都有自己的类属性。在主体中，我多次使用该符号。我正在使用内联 CSS 来单独设置每个使用的样式。

在 Firefox 15 中，这按预期工作，但在 IE9 和 Chrome 中，我得到黑色方块。后者的浏览器似乎没有检测/识别符号中的类定义。如果结构是内联的（右下角），它们会按预期工作。

这仅仅是 Firefox 比其他更兼容的情况，还是有更好的方法来实现 SVG 元素的重用同时允许单独的样式？

额外信息：如果我使用“defs”而不是符号，或者如果我使用外部样式表而不是内联样式表，则会出现同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:02:21.397

[由于https://bugzilla.mozilla.org/show_bug.cgi?id=265894](https://bugzilla.mozilla.org/show_bug.cgi?id=265894)，恐怕它的 Firefox 不太合规

[如果您想要重用和个性化样式，这里](http://www.w3.org/TR/SVGParamPrimer/)有一种 javascript 方法，最终可能由 UA 本地实现

# git - Git - 未更改已提交文件中的行尾

> ID：12227424
> 
> 赞同：5
> 
> 时间：2012-09-01T11:43:24.247
> 
> 标签：git

我阅读了 .gitattributes 并告诉 git 不要更改一些文件的行尾。问题是，他们已经承诺了。愚蠢聪明的 git 现在不想撤销它所做的事情。删除和重新添加文件没有帮助（它优化了更改）。现在，每当我从存储库中提取时，我都必须手动重新复制这些文件。

我能做些什么？将此报告为错误并等待修复？以某种方式删除提交对象以强制 git 重新创建它们？后者似乎很困难/危险。

编辑：我[在 GitHub 上找到了这个很好的指南，](https://help.github.com/articles/remove-sensitive-data)用于从存储库中完全删除文件。问题是，我真的不想将它从整个历史中删除。我必须这样做，还是只能在最后一次提交时这样做？如果我在最后一次提交时这样做，Git 会重新查找并再次优化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:31:21.150

现在我已经深入挖掘了这个问题（我原来的描述有点偏离），我将重新解释这个问题，并解释解决方法。

我的 Windows 机器上的问题文件有 LF 结尾。当我将它们推送到 beanstalkapp.com 时，它们保留了 LF 结尾（无论 Git 设置如何）。当我将它们拉到另一台 Windows 机器上时，它们被更改为 CRLF。我添加了 .gitattributes 以将它们视为二进制文件，但是在另一台 Win 机器上拉取这个文件并没有让它将它们作为 LF 检出。

其他 Win 上的 Git 应该在检测到新的 .gitattributes 时正确地重新检查它们，但没有。此外，在一次提交中删除，在下一次重新添加它们，但是在 1 步中推送它们并在 1 步中拉取它们也不起作用。

我不得不将提交拉到它们都被删除的地方。然后，当它们重新添加时，我不得不再次拉动。这让另一台 Win 机器正确地检查它们。我没有尝试在另一台 Win 机器上删除它们并执行 reset --hard，有人建议这可能也清除了 Git 的大脑。

我会写信给邮件列表，说明拉动 .gitattributes 的行为应该是什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T13:23:05.313

1）将您的历史记录重置为最后一次正确的提交（**警告：仅当您或其他人没有在项目中进行新的更改时才这样做**）

2）更新`.gitattributes`为正确的值

3) 提交

`--force`4) 带属性推送。

# android - hello-jni 示例 ndk-build 失败

> ID：12227430
> 
> 赞同：0
> 
> 时间：2012-09-01T11:44:56.697
> 
> 标签：android, windows, android-ndk

我正在按照[此处](http://developer.android.com/tools/sdk/ndk/index.html#Samples)的说明获取 hello-jni 示例：

关于这个还有其他一些关于 SO 的问题，但没有一个具有相同的信息。

我的命令行：

我已经设置了环境变量`ndkroot`

```
From the project dir>%ndkroot%/ndk-build
Gdbserver : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver
/usr/bin/sh: -c: line1: syntax error: unexpected end of file
make: *** [libs/armabi/gdbserver] Error 1 
```

我已经按照指示制作了 build.xml 文件，并且我的 Android.mk 文件没有受到影响，但不确定是否应该这样做：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.c

include $(BUILD_SHARED_LIBRARY) 
```

我正在使用 NDK 7b。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:34:37.927

我猜这是说明和 NDK 版本之间的不匹配。我有v7b，但最新的是v8b。一旦我下载了 v8b，它就按照说明工作。

# database - 如何使用 Django models.py 在多个数据库中创建表

> ID：12227433
> 
> 赞同：0
> 
> 时间：2012-09-01T11:45:12.500
> 
> 标签：database, django, django-models, multi-database

我想通过 Django 使用 models.py 在一个数据库中创建表“A”（假设在 SQL Server 2008 中）和“B”（My SQL）中的另一个表。

表结构“A”和“B”可能不同。我已经验证通过router.py可以做到这一点。

我想在没有“router.py”文件的情况下做到这一点。

有人可以指导我吗？

谢谢，湿婆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T17:55:05.567

尝试[`super`](http://docs.python.org/library/functions.html#super)在`save()`方法中使用。
保存时，它将启动其他命令，例如写入其他数据库。

例如 ：

你有 ：

```
class Chair(models.Model) :
  name = models.Charfield(max_length=30) 
```

你可以这样实现`save()`def ：

```
class Chair(models.Model) :
  name = models.Charfield(max_length=30)

  def save(self, *args, **kwargs):
    <your cmd here>
    super(Chair, self).save(*args, **kwargs) 
```

这似乎是不可能的，但你可以使用参数来制作你想要的任何东西。

# machine-learning - 如何评估来自不完整数据的预测，其中并非所有数据都不完整

> ID：12227435
> 
> 赞同：0
> 
> 时间：2012-09-01T11:45:26.683
> 
> 标签：machine-learning, evaluation, prediction, least-squares, collaborative-filtering

我正在使用非负矩阵分解和非负最小二乘法进行预测，并且我想根据给定的数据量评估预测的好坏。例如原始数据是

```
original = [1, 1, 0, 1, 1, 0] 
```

现在我想看看当给定数据不完整时我能重建原始数据有多好：

```
incomplete1 = [1, 1, 0, 1, 0, 0],
incomplete2 = [1, 1, 0, 0, 0, 0],
incomplete3 = [1, 0, 0, 0, 0, 0] 
```

我想对大数据集中的每个示例都这样做。现在的问题是，原始数据的正数据量不同，在上面的原始数据中有 4 个，但对于数据集中的其他示例，它可能或多或少。假设我进行了一轮评估，给出了 4 个正例，但我的数据集的一半只有 4 个正例，另一半有 5,6 或 7 个。我应该排除有 4 个正例的那一半，因为它们没有丢失数据使“预测”更好？另一方面，如果我排除数据，我会更改训练集。我能做些什么？或者在这种情况下我根本不应该用 4 进行评估？

编辑：

基本上我想看看我能重建输入矩阵有多好。为简单起见，假设“原始”代表观看了 4 部电影的用户。然后我想知道我能预测每个用户有多好，仅基于用户实际观看的一部电影。我得到了很多电影的预测。然后我绘制 ROC 和 Precision-Recall 曲线（使用预测的 top-k）。我将用用户实际观看的 n 部电影重复所有这些。对于每个 n，我都会在我的图中得到一条 ROC 曲线。当我使用例如用户实际观看的 4 部电影来预测他观看的所有电影时，但他只看了这 4 部电影，结果变得太好了。

我这样做的原因是为了看看我的系统需要多少“观看电影”才能做出合理的预测。如果它在已经观看了 3 部电影时只返回好的结果，那在我的应用程序中就不会那么好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:17:24.847

我认为首先要清楚你要衡量什么，以及你的输入是什么。

你真的在测量重建输入矩阵的能力吗？在协同过滤中，输入矩阵本身本质上是非常不完整的。推荐人的全部工作就是填补一些空白。如果它完美地重建了输入，它不会给出任何答案。通常，在使用 NNMF 进行协同过滤时，您的评估指标与此完全不同。

*FWIW 我正在将其商业化——基于矩阵分解的 CF——作为[Myrrix](http://myrrix.com)。它基于我在[Mahout](http://mahout.apache.org)中的工作。[您可以阅读文档，了解对产品中曲线下面积 (AUC) 等测试](http://myrrix.com/evaluating-recommenders/)的一些基本支持。*

这里的“原始”是输入矩阵中一行的示例吗，可能是针对一个用户的？当您谈论一半（不包括在内）时，您指的是什么训练/测试拆分？拆分每个用户，还是跨用户获取一个子集？因为您似乎在谈论测量重建误差，但这不需要排除任何东西。您只需将矩阵因子相乘并查看它们与输入的接近程度。“关闭”意味着低 L2 / Frobenius 范数。

但是对于完全不同的约定推荐测试（如 AUC 或精确召回），您可以按时间（最近的数据是测试数据）或值（最喜欢或相关的项目是测试数据）。如果我理解 0 是输入矩阵的缺失元素，那么它们并不是真正的“数据”。您永远不会遇到测试数据全为 0 的情况，因为一开始就没有输入它们。问题是，哪些 1 用于训练，哪些 1 用于测试。

# paypal - 通过 PayPal API 从任何帐户向任何其他帐户付款

> ID：12227436
> 
> 赞同：1
> 
> 时间：2012-09-01T11:45:42.097
> 
> 标签：paypal

我试图弄清楚是否可以通过 PayPal API 直接从任何贝宝账户向任何其他账户汇款。

我尽力在 API 文档中找到答案，但不幸的是没有找到:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T18:20:36.240

两种选择：Mass Pay 和 Adaptive Payments API。

批量付款是两者中最简单的一种，也是旧的传统付款（另请注意，它一次仅限于 250 笔付款）。

[https://www.x.com/developers/paypal/products/mass-pay](https://www.x.com/developers/paypal/products/mass-pay)

自适应支付 API 是下一代 API，允许更复杂的场景和实现。

[https://www.x.com/developers/paypal/products/adaptive-payments](https://www.x.com/developers/paypal/products/adaptive-payments)

希望这可以帮助。

# c - 在 Linux C 中检索 DHCP 分配的域后缀

> ID：12227438
> 
> 赞同：7
> 
> 时间：2012-09-01T11:45:56.470
> 
> 标签：c, linux, dns, network-programming

我正在尝试在 ANSI C (Linux) 中以编程方式检索主机的本地域后缀。例如：我的机器是ironside.0ffnet.net，我想检索“0ffnet.net”。

我已经看到许多帖子通过使用 getnameinfo() 和 getaddrinfo() 来解决这个问题，但是这些函数似乎从 /etc/hosts 文件中提取它们的信息，以获取机器本地的任何接口地址。

如果我的机器通过 DHCP 分配了一个地址（和相应的域后缀），则 /etc/hosts 文件不会更新，而是将此信息存储在 /etc/resolv.conf 例如：

```
dfex@ironside:~/hush$cat /etc/resolv.conf 
domain 0ffnet.net
search 0ffnet.net
nameserver 139.130.4.4 
```

因此，getnameinfo() 和 getaddrinfo() 都使用 /etc/hosts 信息简单地返回机器的主机名，不带后缀，如下所示：

```
dfex@ironside:~/hush$ cat /etc/hosts
::1             ironside localhost6.localdomain6 localhost6
127.0.1.1       ironside
127.0.0.1       localhost
::1             localhost ip6-localhost ip6-loopback 
```

有谁知道一个函数可以在不诉诸 system() 调用的情况下提取这些信息？我一直在梳理 Beej 的指南，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T22:29:26.883

我将不得不将这个问题分开并分别回答各个部分。首先是标题问题。

## DHCP 域

真正知道 DHCP 客户端从 DHCP 服务器接收到什么的唯一方法是读取客户端留下的文件`/var/lib/dhcp`。如果有其他东西控制了`resolv.conf`.

## “我的主机的本地域后缀”

主机可能属于多个域，也可能不属于任何域，这使得这个概念很难定义。`resolv.conf`指定将搜索您正在解析的主机名的域；*当应用于您自己的*主机名时，没有基本保证搜索会成功。

## 任何！解析器搜索列表是我真正想要的。我如何得到它？

调用`res_init`然后查看`_res.dnsrch`和/或`_res.defdname`。或者解析`resolv.conf`自己；这是一种非常简单且稳定的格式。

## 那么 getdomainname() 有什么用呢？

它适用于您可能不想要的 NIS(YP)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:54:10.823

您可以尝试使用：

```
int getdomainname(char *name, size_t len); 
```

尝试运行这个程序：

```
#include <unistd.h>
#include <stdio.h>

int main()
{
 char buf[255];
 getdomainname(buf, 255);
 printf("Domain: %s\n", buf);
 return 0; 
} 
```

编辑：

不，经过多次尝试，我怀疑您将不得不使用系统调用和丑陋的 C 解析器（在其中使用 AWK`popen`会使这段代码更短一些）。

这段代码似乎对我有用：

```
#include <stdio.h>
#include <string.h>

int main()
{
 char buf[255];
 const char reqhostname[255] = "ENTER_YOUR_HOSTNAME_HERE";

 FILE *fd;
 char readbuf[255];
 char *pch;
 int token_counter = 0;

 memset(buf, 0, 255);
 strcat(buf, "host ");
 strcat(buf, reqhostname);
 fd = popen(buf, "r");
 fgets(readbuf, 255, fd);
 printf("Host returned: %s\n", readbuf);
 pclose(fd);

 pch = strtok(readbuf, " ");
 while (pch != NULL)
   {
        strcpy(buf, pch);
        break;
   }

 memset(buf2, 0, 255);
 pch = strtok(buf, ".");
 while (pch != NULL)
   {
        pch = strtok(NULL, ".");
        if (pch == NULL)
           {
                memset(buf, 0, 255);
                strncpy(buf, buf2, strlen(buf2) - 1);
                break;
           }
        token_counter++;
        strcat(buf2, pch);
        strcat(buf2, ".");
   }

 printf("Domain: %s\n", buf);

 return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T10:33:50.117

感谢@alan-curry，它确实为我指明了正确的方向。对于其他为此苦苦挣扎的人， res_init 绝对是要走的路。这是获取本地域后缀的快速方法：

```
#include <stdio.h>
#include <resolv.h>

int main (int argc, char *argv[]) {

res_init();

printf ("Default domain: %s\n", _res.defdname);
return 0;
} 
```

# c# - 如何使用 C# 使用诺基亚 PC 连接 api 创建应用程序

> ID：12227439
> 
> 赞同：1
> 
> 时间：2012-09-01T11:46:06.067
> 
> 标签：c#, nokia

我是“诺基亚 PC 连接 api”的新手，我是 C# 的新手。我必须创建一个使用诺基亚手机 X2-01 发送短信的应用程序。那么是否有任何链接或是否有任何示例应用程序可以帮助我并指导我创建应用程序。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:23:30.230

我会忘记任何诺基亚“连接 API”，并使用更简单、更容易理解的“AT”命令发送 SMS .. 示例：

```
AT+CMGF=1
OK
AT+CMGS="7789952010"
> Hello World<Ctrl>+<Z>
+CMGS: 44

OK 
```

在 Google 上搜索“AT+CMGS”以获得许多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T14:38:05.880

您需要安装诺基亚电脑套装才能发送 AT 命令，如以下链接中的项目 [http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using- GSM调制解调器](http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem)

如果您在项目中使用诺基亚 PC 连接 API，则无需安装 PC 套件。现在我也需要实现这种技术。

上面链接中的项目适用于我的诺基亚 7210

# java - 重构 JDBC 函数

> ID：12227441
> 
> 赞同：1
> 
> 时间：2012-09-01T11:46:48.163
> 
> 标签：java, jsp, jdbc

我正在尝试创建一个简单的 Web 应用程序，它将用户数据从表单保存到数据库，并根据请求将数据库的内容读回浏览器。以下是我到目前为止编写的函数。

```
connectToDB()            // connects to database
addEmployee()            // adds employee to database
displayEmployee()        // returns a resultSet 
isExisted(int staffID)   // checks if the staff already exists 
```

数据库连接功能：

```
public void connectToDB(){
   try{
       // load Apache derby driver
       Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
   } catch(ClassNotFoundException e) {
       System.err.println(e);
   }

   try{
       connection = DriverManager.getConnection(DBNAME, USERNAME, PASSWORD);
   } catch(SQLException e){
       System.err.println(e);
   }
} // end connectToDB 
```

显示员工功能：

```
public ResultSet displayEmployee(){
   connectToDB(); 
   ResultSet result = null;

   try{
       Statement stmt = connection.createStatement();
       String query = "SELECT * FROM APP.ADDRESSBOOK";
       result = stmt.executeQuery(query);

   } catch(SQLException e) {
       System.err.println(e);
   }

   return result;

} 
```

检查员工是否存在：

```
public boolean isExisted(int StaffID){
   connectToDB();
   try{
       Statement stmt = connection.createStatement();
       String query = "SELECT StaffNum FROM APP.ADDRESSBOOK WHERE StaffNum = " + staff_number;
       ResultSet result = stmt.executeQuery(query);

       while(result.next()){
           int temp = result.getInt(1);
           if(temp == staff_number){return true;}
       }
   } catch(SQLException e) {
       System.err.println(e);
   }
   return false;
} 
```

如您所见，如果您比较`displayEmployee()`and `isExisted()`，我在重复 mysel。这两个功能都有效，但我希望重构代码。在那些功能中，我没有关闭连接。如果 Web 应用程序中有 20 个函数连接到数据库，我的代码会很糟糕。

我看起来像这样： *******此代码不起作用***** ** *** ****

```
private Statement queryDB(query){
   connectToDB(); 

   Statement stmt;
    try{
       stmt = connection.createStatement();

   } catch(SQLException e) {
       System.err.println(e);
   }
   return stmt;

   // code for closing connection
}

public ResultSet DisplayEmployee(){
   String query = "SELECT * FROM APP.ADDRESSBOOK";
   Statement stmt = queryDB(query);
   ResultSet result = stmt.executeQuery(query);
   return result;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:05:52.053

一些评论：

1.  的 catch 语句`ClassNotFoundException`应该抛出一个异常并且不应该继续下去。
2.  从在语句执行时获取结果集的方法返回结果集不是一个好主意，因为关闭它是该方法的责任。`CachedRowSet`相反，如果您的下游函数需要结果集，您应该将结果读出到对象中或将它们缓存到。
3.  connectToDB 方法应该返回一个成功的连接或抛出异常。
4.  您可以编写一个接受 SQL 查询并将结果作为对象返回的方法，这样只要您检索相同类型的对象，就可以使用此方法根据不同的条件进行检索。
5.  isExisted 正在使用人员编号，我认为您打算将其用作人员编号。如果您找到了具有该值的行，则无需检查结果集中是否包含具有该值的行，对吗？

我的两分钱！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:40:34.730

使用原始 JDBC 会产生很多难看的样板代码。一种解决方案是使用[Spring JDBC Template](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html)。

此外，您将获得 sql 异常层次结构，它将自动将底层 JDBC 异常作为运行时异常进行管理。

有关更多信息，请参阅：

[Spring框架JDBC介绍](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)

# python - 是否有用于鼻子测试的 pylint 和 pyflakes 插件？

> ID：12227443
> 
> 赞同：5
> 
> 时间：2012-09-01T11:47:15.963
> 
> 标签：python, testing, pylint, nosetests, pyflakes

我想知道是否有用于 pylint 和/或 pyflakes 的鼻子插件？

目前我正在使用[覆盖](http://pypi.python.org/pypi/coverage)和[组织](http://pypi.python.org/pypi/tissue)(PEP8) 插件进行鼻子测试。

提前 Tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:00:10.137

我曾经写过一个使用 Pyflakes 的测试生成器。它不是一个鼻子插件，但它足够接近我的需要：

```
import os
import _ast

from pyflakes import checker

import your_application

TOP = os.path.dirname(os.path.dirname(your_application.__file__))

class PyflakesError(AssertionError):
    def __str__(self):
        path = self.args[0]
        messages = self.args[1]
        messages.sort(key=lambda m: m.lineno)
        return 'checking %s\n' % path + '\n'.join(map(str, messages))

def check(path):
    code = open(os.path.join(TOP, path)).read()
    tree = compile(code, path, "exec", _ast.PyCF_ONLY_AST)
    w = checker.Checker(tree, path)
    if w.messages:
        raise PyflakesError(path, w.messages)

def test():
    for root, dirs, files in os.walk(TOP):
        for name in files:
            if not name.endswith('.py'):
                continue
            yield check, os.path.relpath(os.path.join(root, name), TOP)

        def is_package(d):
            return os.path.exists(os.path.join(root, d, '__init__.py'))
        dirs[:] = filter(is_package, dirs) 
```

该`test`函数为包含`your_application`. 您可以`TOP`根据需要调整以测试其他目录。

# texinfo - 纺织信息国际化

> ID：12227444
> 
> 赞同：0
> 
> 时间：2012-09-01T11:47:33.647
> 
> 标签：texinfo

我是 Texinfo 的新手用户。我想知道是否可以使用 Texinfo 编写我的波斯语手册。我知道如何用英语写，但不知道用波斯语。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:54:38.577

是的，Texinfo 支持[Internationalization](https://www.gnu.org/software/texinfo/manual/texinfo/html_node/Internationalization.html#Internationalization)。

# php - android和php json utf-8失败

> ID：12227445
> 
> 赞同：0
> 
> 时间：2012-09-01T11:47:43.920
> 
> 标签：php, android, json

我在将 utf-8 从 android 传输到 php 时遇到问题。我在网上查找了许多解决方案，但它们都以某种方式无法发送 UTF-8。

我的 Java 代码

```
 String str = "";
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(params[0]);
    try {
        // set up post data
        JSONObject json = getJSON();

        JSONArray postjson=new JSONArray();
        postjson.put(json);

        // Post the data:
        httppost.setHeader("json",json.toString());
        httppost.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));

        httppost.getParams().setParameter("jsonpost",postjson);
        httppost.getParams().setParameter("jsonpost",postjson);
        HttpResponse response = httpclient.execute(httppost);
        if(response != null)
        {
            str = getInputString(response);
            return str;
        }
    }
    catch (UnsupportedEncodingException e) {
        return "";
    }
    catch (Exception e) {
        return "";
    }
    return ""; 
```

另一方面，我的 php

```
<?php
header'Content-Type:text/plain; charset=utf-8');

$json = $_SERVER['HTTP_JSON'];
$data = json_decode($json);
$message = $data->message;

echo $message;
?> 
```

我收到的输出只是一个空白字符串，如果它是一个像“欢迎”这样的汉字，但如果它像“欢迎”。该消息将有一个输出 Welcome。这里的主要问题是什么？如果有人提供帮助，它将不胜感激。谢谢。

**解决方案：**

```
$data = json_decode(file_get_contents('php://input'));
$message = $data->message;

echo $message;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T12:53:25.703

即使这个问题的日期是 2012 年，似乎问题还没有解决，同样的问题也没有解决。

由于我正在开发 APP，使用平板电脑和 PHP Web 服务器之间的大量数据传输，使用法语和葡萄牙语语言，所以使用“stange char”，我做了一些测试：

*   当您使用 Android 平板电脑向 PHP 网站发送数据时，您只需使用以下方式准备数据：

    ```
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("op","_CID1"));
    nameValuePairs.add(new BasicNameValuePair("la",la));
    nameValuePairs.add(new BasicNameValuePair("lo",lo));
    nameValuePairs.add(new BasicNameValuePair("id",codigo));

    // Encoding URL for GET
    String the_param = URLEncodedUtils.format(nameValuePairs,"utf-8");
    String url = the_url + "?" + the_param; 
    ```

在 PHP 方面，您必须使用 isset 测试值的存在（因此在这种情况下 isset($_GET['op']); 等等，然后，您必须使用 SQL 执行数据验证，以便防止 SQL 注入和解码 de 值。为此，只需使用：

```
$result = @mysqli_real_escape_string ($handle,$var); 
```

其中 hanlde 是您打开数据库后获得的句柄，而 $var 是您从 Android 获得的值。（示例是使用 SQLi）

*   当您从 PHP 获取数据时，意味着您的 PHP 网站“回显”数据，平板电脑获取它们。两种选择：

简单的一个是在 PHP 端执行 utf8_decode （我写的是 DECODE 而不是编码！！）所以，如果你这样做，在 PHP 端：

```
$str = "Não, l'été c'est pour bientôt";
echo $str; 
```

在 Android 下你会得到错误的字符串。要获得完美的价值观，您必须这样做：

```
 $str = "Não, l'été c'est pour bientôt";
    $str = utf8_decode($str);
    echo $str; 
```

要在 Android 上获取字符串，只需执行以下操作：

```
 HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url[0]);
            HttpResponse resp = httpclient.execute(httppost);
            HttpEntity ent = resp.getEntity();
            text = EntityUtils.toString(ent); 
```

说明：基本上，在 PHP 端，字符串是 UTF8。当您执行 utf8-decode 时，您将字符串设置为 ISO-8859-1，这是 Android 上的默认值（请参阅 EntityUtils 文档）。

如果您不在 PHP 端进行 utf8_decode，您将使用 utf8 传输数据，这在 Android 上是默认未知的。在这种情况下，您必须使用参数 utf8 执行 EntityUtils。

实际上，或者您在 PHP 端将 UTF8 转换为 ISO-8859-1，然后传输并使用 ISO-8859-1（选项 1），或者您传输 UTF8 等，需要在 Android 端使用 EntityUtils（选项 2）进行转换。

希望这会帮助彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:08:04.547

在你的 ini 上设置 utf-8 也在 php 脚本上使用这个函数：

```
ini_set('default_charset', 'utf-8'); 
```

把这段代码放在：

```
<?php
 ini_set('default_charset', 'utf-8');
$json = $_SERVER['HTTP_JSON'];
$data = json_decode($json);
$message = $data->message;

echo $message;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:04:24.240

你为什么用一个`BiteArray`？你可以简单地这样做：

`httpPost.setEntity(new UrlEncodedFormEntity(values, HTTP.UTF_8)`

其中 values ( `List<NameValuePair>`) 将是参数。

# java - 后台服务Android中的位置侦听器

> ID：12227446
> 
> 赞同：6
> 
> 时间：2012-09-01T11:47:59.593
> 
> 标签：java, android, implementation, locationlistener

哪种方法更好，直接`LocationListener`像这样实现

```
public class BackgroundService extends Service implements LocationListener {} 
```

还是通常`LocationListener`在班级内部声明？

```
LocationListener locationListener = new LocationListener() {}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T12:25:54.093

在第二段代码中，您必须在调用`locationListener`接口的方法之前调用属性。

在第一段代码中，您可以直接访问接口方法。

因此，如果您知道每个方法调用都会花费 cpu 时间，那么直接在类中实现它而不是将其作为属性将是有益的。

在这种情况下，您有 1 个引用`BackgroundService`，您可以使用它访问 LocationListener 的方法

```
public class BackgroundService extends Service implements LocationListener {} 
```

在这种情况下，您有 2 个引用，一个指向*BackgroundService*，另一个指向*locationListener*

```
public class BackgroundService extends Service {
    private LocationListener locationListener = new LocationListener() {};
} 
```

但是话又说回来，如果您的程序没有关键的时间限制，那并不重要。最重要的是你的代码是可读的。

我希望这能回答你的问题。

# apache-flex - 带有 flex 的 adobe air，新建文件，打开并保存桌面软件程序

> ID：12227453
> 
> 赞同：0
> 
> 时间：2012-09-01T11:48:59.330
> 
> 标签：apache-flex, air, adobe, desktop-application

我已经从所有的搜索中头疼了。我不敢相信这是一个如此令人困惑的话题，因为我们创建的每个软件程序都必须能够保存用户输入，对吧。

问题出在：小说写作软件主窗口有tabnavigator，有四个navigatorcontent pages 1.characters,2.worlds,3.objects,4.Editor

每个 navigatorcontent 页面都有 textinput 组件、textarea 组件、richtexteditor 组件等形式的用户输入字段。

问题 1：用户需要能够打开一个新项目并给它一个名称和必须保存它的状态。Novel 写作软件程序中的所有用户输入都必须附加到用户指定的文件名 - 无法提供示例代码，因为我什至不知道从哪里开始查找。

问题 2：如果用户现在定义了一个新的项目名称，他所有来自不同输入组件的输入都必须编译成一个可以保存的文件。（Dan Pichelman 在使用 file.borwseforsave 函数时给了我一个满意的答案。）这是有道理的，但我首先需要将所有用户输入放入该单个文件中。我确信它必须是一个 xml 文件，并且会有关于如何执行此操作的指南，但是......

问题3：这给我带来了另一个问题。到目前为止，我研究过的所有页面都告诉我如何将 xml 文件中的数据加载到组件中，但没有告诉我如何将组件中的文本写入 xml 文件。而且这个xml文件不能是storage目录下的prefs文件，它必须由用户命名，然后在软件的不同选项卡中填写他的所有文本后，必须保存在这个xml文件中，并保存在用户所在的位置选择。

问题 4：现在用户输入了他的文本并将其写入了一个他命名并设置了路径的 xml 文件，他去度假并在两周内打开他保存的文件以再次处理他的项目。现在必须将存储在 xml 中的所有数据写回到不同的用户输入组件中，这样他才能继续处理他的项目，说实话，有一些关于这个主题的示例和教程，但同样来自一个页面透视不是多选项卡透视。

问题 5：现在用户已经删除和/或更改了他开始时输入的一些文本，他在 textareas 和 texteditor 中写了更多文本，然后单击文件 - 保存按钮。xml 文件或任何需要使用的文件必须更新并保存，所有更改都会覆盖旧文件。

问题 6：用户输入的数据最终会变成一本 400 页的书。这些数据显然主要在richtexteditor 组件中，因此无论使用什么保存方法，数据库或xml 或其他任何方法，都需要能够包含所有这些数据。

想一想，如果您正在使用例如 microsoft powerpoint，它有多个页面，所有页面都包含不同的用户输入，当您单击文件 - 保存时，它会将所有输入保存到一个文件中。当我作为用户打开该保存的文件时，它会将所有内容加载回其位置，我可以更改和操作输入并再次保存。我原以为这将是 adobe 或任何其他软件会教的第一件事，因为这就是软件程序的全部内容。但是很可惜，关于 adobe air for Desktop 应用程序的这个主题的教程非常少见。

我的承诺是，如果有人可以帮我解决这个问题，或者那里有一个正确涵盖这个的教程，我会在我一步一步地为其他新手写一个关于这个的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:41:38.993

我相信您面临的主要问题是从 UI 输入到 XML 数据（以及返回）的转换。这更像是一个架构问题，而不是纯粹的技术问题，这可以解释为什么您很难找到信息。

# 演示模型

有很多方法可以解决您的用例，但最重要的是您需要一个演示模型。这是与特定视图同时使用的模型类。您可以在各种表示模型和真实数据模型（在这种特殊情况下表示为 XML 数据结构）之间来回转换。这有点抽象，但我会大致尝试与您交谈。请意识到我要向您展示的只是众多可能的方法之一。我相信这是传达这个想法的最简单的方法。

# 下午班

首先，我们需要为每个视图创建一个表示模型，即 1\. 角色、2\. 世界、3\. 对象、4\. 编辑器。我们将为它们命名，以便我们知道这些是模型并将它们放在自己的包中；例如

*   my.app.pm.CharactersModel
*   my.app.pm.WorldsModel
*   my.app.pm.ObjectsModel
*   my.app.pm.EditorModel

（“pm”在这里表示演示模型）
然后这些类中的每一个都会接收与您的视图中的输入和/或显示相匹配的属性。这些可以简单也可以复杂。例如，假设 'characters' 视图有一个 'title' 文本输入和一个可选字符列表，你会得到一个像这样的类：

```
public class CharactersModel {
    [Bindable] public var title:String;
    [Bindable] public var characters:IList; //list of Character model instances
    [Bindable] public var selectedCharacter:Character;
} 
```

并且该 IList 中的每个字符都是以下实例：

```
public class Character {
    [Bindable] public var firstname:String;
    [Bindable] public var lastname:String;
} 
```

请注意这些属性是如何标记为 Bindable 的：我们将在下一段中了解原因。

# 查看课程

您现在可以创建一个看起来像这样的视图类：

```
<fx:declarations>
    <pm:CharactersModel id="pm" />
</fx:declarations>

<s:FormItem label="Title">
    <s:TextInput text="@{pm.title}" />
</s:FormItem>

<s:FormItem label="Edit character">
    <s:DropdownList dataProvider="{pm.characters}" 
                    selectedItem="@{pm.selectedCharacter}" />
</s:FormItem>

<s:FormItem label="First name">
    <s:TextInput text="@{pm.selectedCharacter.firstName}" />
</s:FormItem>

<s:FormItem label="Last name">
    <s:TextInput text="@{pm.selectedCharacter.lastName}" />
</s:FormItem> 
```

（警告：这是伪代码；我是在头脑中写的）
看看我们如何使用双向绑定来读取和写入 UI 的值到 Presentation Model 中？

# 转换

现在剩下要做的就是编写一个类，它将您的 PM 转换为您的 XML 数据结构，反之亦然。这是一个技术问题，所以我相信您可以找到有关此的信息，但基本上

当用户点击“保存”按钮时，您应该可以调用类似

```
var xmlToSave:XML = Convertor.pmToXml(
    charactersView.pm, worldsView.pm, objectsView.pm, editorsView.pm
); 
```

当用户点击“加载”按钮时：

```
charactersView.pm = Convertor.xmlToCharactersPm(loadedXML);
worldsView.pm     = Convertor.xmlToWorldsPm(loadedXML);
objectsView.pm    = Convertor.xmlToObjectsPm(loadedXML);
editorView.pm     = Convertor.xmlToEditorPm(loadedXML); 
```

# 写入磁盘

阅读我之前写的这个答案：
[Storing/Saving XML in local assets folder in AIR](https://stackoverflow.com/questions/8998058/storing-saving-xml-in-local-asset-folder-in-air/9000279#9000279)

# java - 选中时禁用 JToggleButton 的标准重绘

> ID：12227455
> 
> 赞同：1
> 
> 时间：2012-09-01T11:49:11.867
> 
> 标签：java, swing, jtogglebutton

我希望我的 JToggleButton 在它被选中时不要重新绘制。我用一对单词（“check/next”）表示状态变化。标准行为是蓝光，但我想禁用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:27:06.530

见： [`AbstractButton.setContentAreaFilled(false)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setContentAreaFilled%28boolean%29)。

但请注意，用户通常更喜欢遵循“最不意外路径”的 GUI 元素。这种类型的渲染可能更好地描述为在路径旁边的灌木丛中发生一点碰撞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T12:08:14.877

也许您可以在 ImageIcons 上显示这些文字。例如：

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JToggleButton;

public class ToggleFun {
   private static final Color BACKGROUND_COLOR = new Color(200, 200, 255);

   public static void main(String[] args) {
      int biWidth = 60;
      int biHeight = 30;
      BufferedImage checkImg = new BufferedImage(biWidth, biHeight, BufferedImage.TYPE_INT_RGB);
      BufferedImage nextImg = new BufferedImage(biWidth, biHeight, BufferedImage.TYPE_INT_RGB);

      Graphics2D g2 = checkImg.createGraphics();
      g2.setColor(BACKGROUND_COLOR);
      g2.fillRect(0, 0, biWidth, biHeight);
      g2.setColor(Color.black);
      g2.drawString("Check", 10, 20);
      g2.dispose();

      g2 = nextImg.createGraphics();
      g2.setColor(BACKGROUND_COLOR);
      g2.fillRect(0, 0, biWidth, biHeight);
      g2.setColor(Color.black);
      g2.drawString("Next", 15, 20);
      g2.dispose();

      ImageIcon checkIcon = new ImageIcon(checkImg);
      ImageIcon nextIcon = new ImageIcon(nextImg);

      JToggleButton toggleBtn = new JToggleButton(checkIcon);
      toggleBtn.setSelectedIcon(nextIcon);
      toggleBtn.setContentAreaFilled(false);
      toggleBtn.setBorder(BorderFactory.createLineBorder(Color.black));

      JPanel panel = new JPanel();
      panel.add(toggleBtn);
      JOptionPane.showMessageDialog(null, panel);

   }
} 
```

# objective-c - 不兼容的指针类型？

> ID：12227461
> 
> 赞同：0
> 
> 时间：2012-09-01T11:50:38.400
> 
> 标签：objective-c

我是编程新手，目前在我的第一份学校工作中遇到了一些困难。谁能告诉我我在正确的轨道上做事吗？这段代码的目的是添加两个大约 70 位的数字，这在 Objective-C 中使用 int 或 long int 类型无法完成。以下代码不断收到警告：**从结果类型“MPInteger *”返回“NSString *__strong”的不兼容指针类型**请帮助，我已经研究了很长时间，但一无所获。

**MPInteger.h**

```
#import <Foundation/Foundation.h>

@interface MPInteger : NSObject
@property (copy, nonatomic) NSString * description;

-(id) initWithString: (NSString *) x;
-(NSString *) description;
-(MPInteger *) add: (MPInteger *) x; 
```

**MPInteger.m**

```
#import "MPInteger.h"

@implementation MPInteger

@synthesize description;

-(id) initWithString: (NSString *) x {
    self = [super init];
    if (self) {
        description = [NSString stringWithString: x];
    }
    return self;
}

-(NSString *) description {
    return description;
}

-(MPInteger *) add: (MPInteger *) x
{
    int carry = 0;
    int index = 0;
    int index2 = 0;
    int i;
    int num1;
    int num2;
    int result;

    index = [description length];
    index2 = [x.description length];

    while (index2 < index) {
        x.description = [x.description stringByPaddingToLength:index withString:@"0" startingAtIndex:0];
    }

    for (i = index; i <= index || carry != 0; i--) {
        num1 = [description characterAtIndex:index];
        num2 = [x.description characterAtIndex:index];
        result = num1 + num2 + carry;
        // if the sum is less than 10
        if (result < 10) {
            NSString *intString = [NSString stringWithFormat:@"%i", result];
            [description replaceValueAtIndex:index inPropertyWithKey:intString withValue:@"%@"];
            // replace the description index value with the sum
        } else { //otherwise
            NSString *intString = [NSString stringWithFormat:@"%i", result];
            //getting the index'1' is the value replace the description index value
            [description replaceValueAtIndex:index inPropertyWithKey:[intString substringFromIndex:1] withValue:@"%@"];
            carry = 1;
        }
        index--; // decrement index
    }
    return description;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:00:04.757

这几乎正​​是错误所说的：

```
@property (copy, nonatomic) NSString * description;
[...]
-(MPInteger *) add: (MPInteger *) x
{
[...]
    return description;
} 
```

您说您的`add`方法将返回对`MPInteger`对象的引用，但您的代码将返回对 a 的引用`NSString`。您需要通过为方法声明返回值的字符串类型或返回`MPInteger`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:02:32.170

你声明你的方法返回一个 MPInteger：

```
- (MPInteger *)add:(MPInteger *)other; 
```

但你最终 return `description`，这是一个`NSString`实例。

您可能打算在返回之前从字符串中创建一个 MPInteger 实例：

```
return [[MPInteger alloc] initWithString:description]; 
```

（`autorelease`如果您不使用 ARC，请添加）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:11:55.430

警告是因为您正在`description`从您的`add:`方法返回，但`description`它是一个`NSString`. 你需要`description`成为一个`MPInteger`.

不幸的是，`NSObject`已经有一个格式字符串中的方法`called`描述`which returns an`NSString `. It's this method that's called each time you use`%@`，即

```
NSLog(@"I am %@", self); 
```

实际上会调用`description`并将`self`其放入字符串中以代替`%@`.

在您的方法结束时，您需要返回 an`MPInteger`而不是`description`. 尝试更换

```
return description; 
```

和

```
MPInteger newInteger = [MPInteger new];
newInteger.description = description;
return newInteger; 
```

返回一个新的整数。

# php - 如何创建一个php字符串剥离函数

> ID：12227465
> 
> 赞同：0
> 
> 时间：2012-09-01T11:51:33.797
> 
> 标签：php, string, split

我正在尝试创建一个操作邮政编码的功能，但由于英国的邮政编码大小不同，我正在努力解决，我试图通过（例如“DN11AA”）这将需要返回以下内容，“ dn|dn1-1|dn1-1aa"

另一个例子是传递“B32B”——这将返回“b|b3-2|b3-2b”

感谢您抽出时间来阅读 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:59:59.973

有用于处理英国邮政编码的标准正则表达式代码。

一个完整的表达式如下所示：

```
(GIR 0AA)|(((A[BL]|B[ABDFHLNRSTX]?|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]?|F[KY]|G[LUY]?|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]?|M[EKL]?|N[EGNPRW]?|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKLMNOPRSTY]?|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)[1-9]?[0-9]|((E|N|NW|SE|SW|W)1|EC[1-4]|WC[12])[A-HJKMNPR-Y]|(SW|W)([2-9]|[1-9][0-9])|EC[1-9][0-9]) [0-9][ABD-HJLNP-UW-Z]{2}) 
```

您可以在 PHP 中按如下方式使用它（为简洁起见，我假设您已将上述代码放入名为 的变量中`$postcode_regex`）：

```
$pc_is_valid = preg_match($postcode_regex, $input_string); 
```

根据您想用它做什么，您可能需要使用其他`preg_xxx()`函数，并且可能需要修改上面的字符串，但是如果没有更多信息，很难给出更清晰的建议。

有关如何解析邮政编码的更多信息，请参阅 Wikipedia 文章：[http ://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:11:20.950

这应该有效。

```
function post($post){
 for($i = 0; $i < strlen($post); $i++)
    if(is_numeric(substr($post, $i, 1))){
       $j=$i;
       if(is_numeric(substr( $post, $i+2, 1)))$j++;          
       return substr($post, 0, $i).'|'.substr($post, 0, $j+1).'-'.substr($post, $j+1,1).'|'.substr($post, 0, $j+1).'-'.substr($post, $j+1);
    }

 } 
```

编辑，测试，工作

# symfony - 无法使用 symfony2 连接数据库

> ID：12227468
> 
> 赞同：1
> 
> 时间：2012-09-01T11:52:12.423
> 
> 标签：symfony, doctrine-orm

我创建了一个简单的注册表单，它需要一些数据。我已经在另一个系统上准备了代码。当我在我的系统上安装时。我已经创建了捆绑包并注册到`AppKernel.php`. 我已经使用`php app/console doctrine:databse:create`. 数据库已成功生成。然后我在`sql`那里导入了我的文件并使用命令行更新了架构。

但是现在当我运行代码时，我可以看到注册页面，但是当我点击提交按钮时，我得到了一个错误。

```
Error in signing up, Please try again 
```

可能的原因是什么？

```
public function registerAction(){

    $logger = $this->get('logger');
    $request = $this->get('request');
    $user_id = $request->cookies->get('formbuilder_login');

    if (is_null($user_id)){
        return $this->render('FormBuilderFBBundle:Login:register.html.twig', array('page_title' => 'SignUp'));
    }

    return $this->render('FormBuilderFBBundle:Login:loggedin.html.twig', array('page_title' => 'LoggedIn'));

} 
```

# c++ - iter_swap 可以特化吗？

> ID：12227474
> 
> 赞同：9
> 
> 时间：2012-09-01T11:53:02.803
> 
> 标签：c++, algorithm, vector, c++11, containers

如果我有一个 container `std::vector<T*> items`，我可以创建一个`IndirectIterator`which 包装`std::vector<T*>::iterator`并允许迭代`T`'s 而不是`T*`'s。

我可以专门`iter_swap`制作`IndirectIterator`标准算法（例如`std::sort`）通过指针交换项目吗？

即，如果我写以下内容，它会对标准算法产生影响吗？

```
namespace some_namespace
{
    template <typename IterT>
    class IndirectIterator
    {
            IterT m_base;
        public:
            typedef IterT base_iterator;
            typedef /* ... */ reference;

            /* ... */

            reference operator*() const { **m_base; }

            const base_iterator& base() const { return m_base; }
            base_iterator& base() { return m_base; }
    };

    template <typename T>
    void iter_swap(IndirectIterator<T>& a, IndirectIterator<T>& b)
    {
        using std::iter_swap;
        iter_swap(a.base(), b.base());
    }
} 
```

这种专业化的好处是它交换指针而不是完整的 T 实例，因此它更快（可能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:57:35.827

据我所知，`iter_swap`仅在 中使用`std::reverse`，并且没有提及任何类型的参数相关查找：它始终使用`std::iter_swap`. 而且由于不允许您在`std`命名空间中重载函数，因此您很不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T07:43:49.760

> 我可以专门`iter_swap`制作`IndirectIterator`标准算法（例如`std::sort`）通过指针交换项目吗？

你总是可以让你的超载/专业化。但是，您的问题是您是否可以在 namespace`iter_swap` *内*`std`进行专业化。

我认为标准中的答案尚不清楚。我发现在某些情况下，我必须定义一个特殊的`iter_swap`内部`std`以便`std::sort`使用它。在 gcc 标准库`std::sort`中使用合格的`std::iter_swap`.

这可能是`std::sort`. IMO`std::sort`应称为不合格的`swap_iter`.

> 即，如果我写以下内容，它会对标准算法产生影响吗？

不是在 GCC 中（至少），因为标准算法使用合格`std::iter_swap`的（错误？）我认为标准并不清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-07T07:52:09.227

只要您为用户定义的类型专门化它们，您就可以重新打开`std`命名空间并专门化其中的模板。`std`在您的情况下，您实际上可以专门`std::iter_swap`针对您的目的，只需确保您在`std`命名空间中进行，而不是在您自己的命名空间中（如您的示例中所示）。这不是很优雅，但它是允许的。

# shell - Emacs：终端与外壳？

> ID：12227476
> 
> 赞同：18
> 
> 时间：2012-09-01T11:53:43.097
> 
> 标签：shell, emacs, terminal

我一直在阅读如何在 EMACS 中使用外壳，一路上我发现了终端的概念，它是与外壳交互的旧物理设备的抽象。
但是，现在，我真的不明白它的使用有哪些优点，所以，你能指出一些应该在 Emacs 中使用它而不是 shell 的情况或示例吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T18:54:23.893

运行术语缓冲区更接近实际终端。以下是一些不同之处：

*   Shell 模式提供非常有限的终端仿真。利用终端全屏功能的程序（例如`less`、`mtr`、`mutt`、`top`）将无法正常运行。终端模式通常会毫无问题地处理这些。
*   在 shell 模式下，emacs 提供了 tab 补全。在终端模式下，shell 或命令行程序自己提供。
*   Shell 模式缓冲输入并将其发送到换行符上的进程。终端模式立即将字符发送到正在运行的进程。
*   Shell 模式的工作方式类似于具有通常的 emacs 键绑定的常规缓冲区。终端模式不会拦截大多数控制字符，除非您明确将其置于行模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T12:20:42.433

shell 就像另一个 emacs 缓冲区，因此在其中工作的键与在其他缓冲区中工作的键相同。对于终端来说，情况并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T12:21:26.357

`mc`您可以像在终端中一样启动清除屏幕的控制台程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T20:47:31.200

物理终端早已过时，但替代*它们*的终端仿真器非常重要，而且我认为 Emacs 之外的大多数 shell 都在一个内运行，因此在 Emacs 内使用一个也不是什么神秘的概念。

这与您的问题无关，但[The TTY demystified](http://www.linusakesson.net/programming/tty/)是一篇出色的文章，您可能会发现它很有启发性。

# 7zip - 7zip解压后做点什么

> ID：12227479
> 
> 赞同：0
> 
> 时间：2012-09-01T11:54:05.153
> 
> 标签：7zip

7zip解压文件后，

我怎样才能让它运行一个程序？该程序在提取的文件中。

有没有办法可以添加代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:21:18.260

您可以使用 7z SFX 模块来做到这一点，它们是 7z Extras 包的一部分。

这允许您使用 7z 创建安装程序。[有关详细信息，请参阅此处](http://www.7-zip.org/download.html)的 7z 下载站点。

下载包含一个自述文件，以及一个示例配置文件。

# python - Pandas & Scikit：切片 DataFrame 时的内存使用情况

> ID：12227483
> 
> 赞同：2
> 
> 时间：2012-09-01T11:54:46.807
> 
> 标签：python, pandas, scikit-learn

我有一个`DataFrame`从 csv 文件（大约 300MB）加载的大文件。

从中，我提取了几十个要在 a 中使用`RandomForestClassifier`的特征：一些特征只是从数据中的列派生而来，例如：

```
 feature1 = data["SomeColumn"].apply(len)
 feature2 = data["AnotherColumn"] 
```

`DataFrame`其他的则使用原始数据帧上的索引从 numpy 数组中创建为 new ：

```
feature3 = pandas.DataFrame(count_array, index=data.index) 
```

然后将所有这些功能合并为一个`DataFrame`：

```
features = feature1.join(feature2) # etc... 
```

我训练了一个随机森林分类器：

```
classifier = RandomForestClassifier(
    n_estimators=100,
    max_features=None,
    verbose=2,
    compute_importances=True,
    n_jobs=n_jobs,
    random_state=0,
)
classifier.fit(features, data["TargetColumn"]) 
```

使用这些`RandomForestClassifier`功能可以正常工作，构建一棵树需要 O（数百兆字节的内存）。**但是**：如果在加载我的数据后，我会取其中的一*小*部分：

```
data_slice = data[data['somecolumn'] > value] 
```

然后为我的随机森林构建一棵树突然需要**很多 GB**的内存——即使特征的大小`DataFrame`现在是原始大小的 O(10%)。

我可以相信这可能是因为对数据的切片视图不允许有效地完成进一步的切片（尽管我不知道如何将其传播到特征数组中），所以我尝试了：

```
data = pandas.DataFrame(data_slice, copy=True) 
```

但这无济于事。

*   为什么获取数据子集会大量增加内存使用？
*   是否有其他方法可以压缩/重新排列 a`DataFrame`可能会使事情再次变得更有效率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:05:59.777

这`RandomForestClassifier`是在内存中多次复制数据集，特别是当`n_jobs`它很大时。我们知道这些问题，并优先解决这些问题：

*   我目前正在研究标准库类的子类，当实例传递给子进程工作者`multiprocessing.Pool`时，它不会进行内存复制。`numpy.memmap`这将使工作人员之间共享源数据集的内存+一些预先计算的数据结构成为可能。[解决此问题后，我将在 github tracker 上](https://github.com/scikit-learn/scikit-learn/issues/936)关闭此问题。

*   正在进行[的重构](https://github.com/scikit-learn/scikit-learn/pull/986)将进一步减少`RandomForestClassifier`2 的内存使用量。然而，重构的当前状态是主节点的两倍慢，因此仍需要进一步的工作。

然而，这些修复都不会使其成为计划于下周发布的 0.12 版本。很可能它们将在 0.13 版本中完成（计划在 3 到 4 个月内发布），但是 master 分支中的 offcourse 将很快可用。

# user-interface - Android：由于广告管理 UI 高度

> ID：12227485
> 
> 赞同：1
> 
> 时间：2012-09-01T11:55:05.003
> 
> 标签：user-interface, android-layout, height, footer

在我的 Android 应用程序中，我为所有活动设置了一个通用页脚。

像这样实现[如何为我的 Android 应用程序创建一个页眉或页脚按钮栏，](https://stackoverflow.com/questions/7831044/how-do-i-create-a-header-or-footer-button-bar-for-my-android-application) 其中包含最顶部的 Activity “MyActivity”。

在我的其他活动中，我编码为：

```
public class TestActivity extends MyActivity implements OnClickListener {

private static final String TAG = "TEST";
private AlertDialog.Builder builder = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);
    // Pick up the group from head_foot.xml for middle data to be displayed
    ViewGroup vg = (ViewGroup) findViewById(R.id.lldata);
    ViewGroup.inflate(Mumbai77Activity.this, R.layout.main, vg); 
```

在其他活动中，我通过 Inflate Layout 创建 AlertDialog 并显示的 MyActivity 的子活动，AlertDialog 的高度应小于达到的高度页脚。如何处理 AlertDialog 的高度。

我用于创建对话框的代码是：

```
 public AlertDialog createAlertDialog(String title, String[] items, OnItemClickListener clickListener) {

    LayoutInflater layoutInflater   = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              // scrollview1 is the root of this activiy layout
    ViewGroup vg = (ViewGroup) findViewById(R.id.scrollView1);
    LinearLayout view = (LinearLayout) layoutInflater.inflate(R.layout.gen_list_layout, vg, false);

<?xml version="1.0" encoding="utf-8"?>

<ScrollView android:layout_height="wrap_content" android:id="@+id/scrollView1" 
    android:layout_width="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"> 
```

我尝试在视图组的 AlertDialog 中设置 LayoutParams，但它也不起作用。

如何使 AlertDialog 的高度与滚动视图或 lldata 的高度相同？

# git - 用于替换 CVS 的免费源代码控制工具 - 需要单独的存储库/工作文件夹

> ID：12227486
> 
> 赞同：-5
> 
> 时间：2012-09-01T11:55:14.490
> 
> 标签：git, svn, version-control, mercurial, cvs

我与 CVS 合作多年，很高兴继续使用更高级的工具。

是否有任何源代码控制工具可以像过去一样将工作目录和存储库保存在单独的目录中？

虽然这个请求在今天似乎已经过时，但将存储库保留在单独的位置主要允许对存储库和用户文件（包括保管箱等）进行灵活的备份/恢复计划。

我更喜欢避免使用 24/7 外部/本地 VCS 服务器。我对商业工具也不感兴趣。

有没有办法配置 git/mercurial为存储库和项目使用***单独的本地文件夹？***还是我坚持使用 CVS/SVN？

谢谢亚历克斯

* * *

```
Edit 
```

我从一些评论中看到，VCS 服务器的想法对一些用户来说是必不可少的。这不是我要找的。对于那些急于指出 cvs 需要服务器这一事实的人 - 这不是真的。cvs 存储库可以存储在公司网络存储中，从而无需服务器端。我假设SVN是一样的。原因很简单——网络共享比专用的 24/7/365 服务器更便宜/更易于操作。

* * *

```
Answer (with robert's help): 
```

看起来有一个简单的解决方法可以解决 Git/Mercurial 中缺少中央本地存储库的问题。诀窍是将本地存储库克隆/推送/拉到一个专用的本地/共享存储库，该存储库可以用作中央存储库。

虽然它在存储方面不是很有效，但这似乎是对 Git/Mercurial 工具所包含的所有好处的合理折衷。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:46:40.287

这个问题表明您在网络共享上拥有中央 Mercurial 存储库应该没有问题，考虑到某些限制：[您可以在 64 位 Windows 7 上使用 Mercurial '推送'到网络共享吗？](https://stackoverflow.com/questions/3250031/can-you-push-to-network-share-using-mercurial-on-64bit-windows-7)

但是，个人用户仍将拥有存储库的本地副本。

在排除非共享文件夹方法之前，您应该查看 Mercurial 关于[发布存储库](http://mercurial.selenic.com/wiki/PublishingRepositories)的页面。[此外，请查看此 Git 页面](http://git-scm.com/about)（特别是“分布式”部分）的一半。你想要的应该可以同时使用 Mercurial 和 Git，但这不是人们倾向于使用这些版本控制系统的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:31:34.110

git 和 mercurial 都允许您将文件夹用作存储库。您可以共享该文件夹（使用您想要的：Samba、Windows 共享、投递箱）并将它们用作其他位置的存储库。看：

[http://www.kernel.org/pub/software/scm/git/docs/git-clone.html#URLS](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html#URLS)

另外，看看什么是`bare`存储库： [http ://www.kernel.org/pub/software/scm/git/docs/git-init.html](http://www.kernel.org/pub/software/scm/git/docs/git-init.html)

# .net - 如何调试服务器端 JScript 代码

> ID：12227492
> 
> 赞同：1
> 
> 时间：2012-09-01T11:56:59.110
> 
> 标签：.net, debugging, asp-classic, jscript

我需要维护一个需要调试服务器端 JScript 代码的经典 ASP 项目。例如，考虑具有以下代码的 A.aspx 文件：

```
<% @Page Language="JScript" aspcompat="true" %>
<%
var a = 1;
var b = a + a;
...// Other statements here
Response.Write(b);
%> 
```

在 Visual Studio 中，我不能在任何服务器端 jscript 行或块上放置任何断点，例如在行上放置断点`var b = a + a;`

但是，它可以用于客户端 javascript 代码调试。像这样调试代码对我来说是一个很大的痛苦。

我想知道如何调试服务器端 jscript 代码或者是否有任何工具支持这些功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:53:19.583

我在网上看到了[这个](http://blogs.msdn.com/b/mikhailarkhipov/archive/2005/06/24/432308.aspx)，但我以前没有尝试过。

到目前为止，我尝试通过将它写在屏幕上进行调试

```
<%@ LANGUAGE="JavaScript" %>
<%
var blnTrace;
var strTrace = Application("g_Trace");
if (strTrace && strTrace.toUpperCase() == "TRUE")
    blnTrace = true;
else
    blnTrace = false;

var a = 1;
var b = a + a;
...// Other statements here

if (blnTrace)
{
    Response.Write(b);
}

...// Other statements here 
```

%>

这样我就可以打开/关闭调试消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T17:32:11.577

我最近在一个旧网站上工作时遇到了同样的问题。

[您可以通过调用Debugger.Break](http://msdn.microsoft.com/en-us/library/vstudio/system.diagnostics.debugger.break)导致应用程序中断。

按`F5`调试网站，当应用程序遇到该行代码时，它的行为与那里有断点一样。

确保在移动到生产环境或设置之前将其删除`Debug="false"`

```
<% @Page Language="JScript" aspcompat="true" %>
<%
var a = 1;
System.Diagnostics.Debugger.Break();
var b = a + a;
...// Other statements here
Response.Write(b);
%> 
```

# ruby-on-rails - 如何比较重构前后的 Rails“可执行文件”？

> ID：12227494
> 
> 赞同：2
> 
> 时间：2012-09-01T11:57:18.130
> 
> 标签：ruby-on-rails, ruby, jruby, rubinius

在 C 中，我可以生成一个可执行文件，进行广泛的仅重命名重构，然后再次比较可执行文件以确认可执行文件没有更改。这对于确保重构不会破坏任何东西非常方便。

有没有人用 Ruby 做过类似的事情，尤其是 Rails 应用程序？策略和方法将不胜感激。理想情况下，我可以运行一个脚本来输出某种纯字节码且不会因命名更改而更改的单个文件。我猜 JRuby 或 Rubinus 在这里会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:35:07.443

我认为这种策略不适用于 Ruby。与编译器丢弃名称的 C 不同，您在 Ruby 中命名的大多数东西都带有该名称。这包括类、模块、常量和实例变量。

自动化单元和集成测试是支持 Ruby 重构的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T03:32:41.390

有趣的问题——我喜欢你可以从这个回归策略中得到明确的“是”答案，至少对于重命名重构的具体情况。

我不够专业，无法判断您是否可以编译 ruby​​（或者至少是一个子集，没有类似的东西`eval`），但似乎有一些提示：

*   [http://www.hokstad.com/the-problem-with-compiling-ruby.html](http://www.hokstad.com/the-problem-with-compiling-ruby.html)
*   [http://rubini.us/2011/03/17/running-ruby-with-no-ruby/](http://rubini.us/2011/03/17/running-ruby-with-no-ruby/)

假设不可能进行完整的编译，那么抽象解释方法呢？您可以将 ruby​​ 解析为 AST，从 AST 发出某种 C 代码，然后编译 C 代码。C 代码不需要完全捕获 ruby​​ 代码的行为。只要红宝石是不同的，它就只需要是可编译的并且是不同的。（实际上运行它可能会导致乱码，或者可能是立即的内存违规错误。）

举个简单的例子，假设 ruby​​ 支持乘法，而 C 不支持。`mult`然后，您可以在 C 代码中 包含一个静态函数并从：`a = b + c*d` 到 转换`a = b + mult(c,d)` ，生成的编译代码在名称重构下将保持不变，但在其他类型的更改下会显示出差异。该`mult`函数实际上不需要实现乘法，您可以使用其中之一：

```
static int mult( int a, int b ) { return a + b; } // pretty close
static int mult( int a, int b ) { return *0; } // not close at all, but still sufficient 
```

只要 C 编译器不会内联定义，您仍然可以获得所需的不变性。同样的翻译，从一个不可编译的 ruby​​ 结构到一个功能较少但独特的 C 结构，应该适用于对象操作等等，将类操作映射到 C 结构引用。关键在于您希望在牺牲实际行为的同时保持命名关系完整。

（我想知道您是否可以使用具有以 ruby​​ 代码中的所有类和属性名称命名的成员（指向同一结构类型的所有指针）的单个 C 结构做一些事情。然后，类和对象操作将对应于嵌套的取消引用操作，使用这个单一的结构。只是一个概念。）

即使您无法制定精确的映射，遗漏一些细微差别的不精确映射可能仍然足以增加对原始名称重构的信心。

实现这种方案的最快方法可能是从字节码映射到 C（而不是从 ruby​​ AST 到 C）。这将节省大量解析，但映射将更难理解和验证。

# c# - HttpActionContext.Request.Headers.Authorization 为空

> ID：12227495
> 
> 赞同：4
> 
> 时间：2012-09-01T11:57:28.967
> 
> 标签：c#, rest, iis, iis-7, asp.net-mvc-4

我正在使用 asp.net mvc 4 rest 并编写自己的 basec 身份验证逻辑。

```
 public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if (actionContext.Request.Headers.Authorization == null)
        {
            actionContext.Response = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
        }
        else
        {
            //do staff here
        }
    } 
```

它适用于本地iis。但它不适用于生产站。我总是得到空值。我在 IIS 上设置了基本身份验证。我正在使用 Fiddler 进行测试，我的请求如下所示：

```
User-Agent: darwin/1.0 CFNetwork/548.1.4 Darwin/11.0.0
Authorization: Basic cmFkaWt2b3N0b2tAZ21haWwuY65tJjE6QkFBREVEcHlQYmtjQkFOcXh4UmFrdG1JMUJ2bjBPYXVQVk9NcnFZMEg4V3BhakljSlk2WkJMTWtra1FIWHFrcEZmdEkyNmFEZEppYWlKVVZJOTZpUGJuMzRMc1luemJHM2FPV3paQk5DTG1Xak9FZGU3YTdGWVhVem1QeTlEWkM4cW02YWZoWkJGWkIzbGFXMTNaQjlKdQ==
Content-Length: 10128
Accept: application/json
Content-Type: application/json
Connection: keep-alive
Host: 192.168.7.4 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:19:45.643

首先，实现`OnAuthorization()`而不是`OnActionExecuting()`. `OnAuthorization()`在 之前执行`OnActionExecuting()`。`OnActionExecuting()`即使在用户到达代码之前检查授权也很重要。

但**您的回答**：最可能的情况是在生产*web.config*文件`<authentication>`中设置为“无” 。如下更改它，您将全部设置好：

 *```
<authentication mode="Forms"/> 
```*

# c++ - XCode 4.4.1 - C++ - Apple Mach-O 链接器 (ID) 错误 - 未找到架构 i386 的符号

> ID：12227499
> 
> 赞同：0
> 
> 时间：2012-09-01T11:57:58.833
> 
> 标签：c++, xcode, linker-errors

我在 XCode 4.4.1 中编写了一些简单的 C++ 程序，每当我编译它们时，都会出现以下错误：

```
"Main()", referenced from:
mainWrapper() in libStanfordCPPLib.a(startup.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

它是在引用`mainWrapper()`in`libStanfordCPPLib.a`吗？提供了后一个​​文件，是否可以修改内容？否则，我是否需要进行更改以消除对 的引用`mainWrapper()`？谢谢。

**更多细节：**

```
Ld ./BlankProject.app/Contents/MacOS/BlankProject normal i386
    cd "/Users/benjamin/Documents/Programming/iTunes U/Stanford/CS106B Programming Abstractions/Summer 2012/Programs/Section Handout #2 Question 2"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 "-L/Users/benjamin/Documents/Programming/iTunes U/Stanford/CS106B Programming Abstractions/Summer 2012/Programs/Section Handout #2 Question 2" -LStanfordCPPLib "-L/Users/benjamin/Documents/Programming/iTunes U/Stanford/CS106B Programming Abstractions/Summer 2012/Programs/Section Handout #2 Question 2/StanfordCPPLib" "-F/Users/benjamin/Documents/Programming/iTunes U/Stanford/CS106B Programming Abstractions/Summer 2012/Programs/Section Handout #2 Question 2" -filelist "/Users/benjamin/Library/Developer/Xcode/DerivedData/BlankProject-fxnhpjsyinnahlexvnlrhbilvwkd/Build/Intermediates/BlankProject.build/Debug/Section Handout #2 Question 4a.build/Objects-normal/i386/BlankProject.LinkFileList" -framework Cocoa -framework Carbon -framework QuickTime -lStanfordCPPLib -o "/Users/benjamin/Documents/Programming/iTunes U/Stanford/CS106B Programming Abstractions/Summer 2012/Programs/Section Handout #2 Question 2/./BlankProject.app/Contents/MacOS/BlankProject"

Undefined symbols for architecture i386:
"Main()", referenced from:
mainWrapper() in libStanfordCPPLib.a(startup.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:06:52.240

似乎您使用的任何库都希望您定义一个名为`Main()`（注意大写 M）的函数，而您还没有这样做。

# javascript - Javascript 向对象添加属性 - 原生 VS underscore.js .extend 方法

> ID：12227502
> 
> 赞同：1
> 
> 时间：2012-09-01T11:58:36.880
> 
> 标签：javascript, underscore.js

我最近一直在探索主干js，发现Model和其他的使用是这样
`Backbone.Model.extend({ /* bla bla */ });`
的：它使用下划线js的扩展函数来做到这一点

我看到扩展只是用于向对象添加属性所以，如果我使用 而不是
，有什么大不了的`myObj.extend({myProp: myPropValue});`
`myObj.myProp = myPropValue;`

**更新：**

我发现[这](https://stackoverflow.com/a/11467305/1181782)是补充。我觉得很酷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:01:35.833

他们都达到了相同的结果。但是，该`extend`方法更加灵活，因为您可以在一次调用中添加多个属性。

but`extend`是一个源自 jQuery 且不是 JavaScript 原生的函数，并且已经在 underscore.js 中实现，因此原生方法的`myObj.myProp = myPropValue;`效率会更高，并且无需借助 jQuery 或 underscore.js 即可使用。

不过，性能上的差异可能非常微不足道，因此使用`extend`不应该是值得担心的事情。

# html - 标题中的 HTML 标记 - SharePoint 2010

> ID：12227504
> 
> 赞同：0
> 
> 时间：2012-09-01T11:59:05.903
> 
> 标签：html, sharepoint

*使用 SharePoint 2010 Web 编辑器*

**我创建了一个标题为CO<sub>2</sub>**的（子菜单）页面。在浏览器中呈现时，页面的标题是：**CO<sub>2</sub>**而菜单项显示**CO [2]**。

显然它正在转义页面中的 HTML 标签，但在菜单中正确呈现。

如何使页面标题看起来与菜单项相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:36:00.800

HTML 规则（和浏览器实践）在标题元素中不识别任何标签；它们确实是这样渲染的。原则上，您可以在标题元素中使用特殊字符，例如“₂”SUBSCRIPT TWO U+2082。您甚至可以使用字符引用来表示它们：

```
<title>CO&#x2082;</title> 
```

但是，只有一些字体支持 SUBSCRIPT TWO，并且很有可能标题元素的呈现（例如在浏览器顶部栏或选项卡标签中）使用不支持它的字体。在这种情况下，可能会出现矩形、竖线、空格或其他缺少字形的通用指示符。

请注意，外观通常与菜单中的不完全相同，因为浏览器`sup`通过减小字体大小并将字形置于较低位置来实现。这只是偶然地与字体中的“₂”设计相吻合。但是，如果文本以两种不同的字体显示（可能是这样），这通常不是一个严重的问题。

# php - PHP & JavaScript 表单验证脚本的问题

> ID：12227505
> 
> 赞同：0
> 
> 时间：2012-09-01T11:59:07.150
> 
> 标签：php, javascript, forms, validation

我在使用此脚本进行表单验证时遇到了一些问题，最初使用 JavaScript，然后再次验证，然后使用 PHP 提交。任何人都可以在这里看到这个问题吗？打开文件时，我什么也看不到。我对 PHP 相当陌生。忽略表格格式。这是一本书的实验室，所以重点是 PHP 和 JavaScript。我知道 CSS 布局等。

任何帮助将不胜感激。提前致谢

```
<?php

error_reporting(~0); ini_set('display_errors', 1);

//PHP adduser.php

//Start with the PHP code

$forename=$surname=$password=$age=$email="";

if(isset($_POST['forename']))
$forename = fix_string($_POST['forename']);
if(isset($_POST['surname']))
$surname = fix_string($_POST['surname']);
if(isset($_POST['password']))
$password = fix_string($_POST['password']);
if(isset($_POST['age']))
$age = fix_string($_POST['age']);
if(isset($_POST['email']))
$email = fix_string($_POST['email']);

$fail= validate_forename($forename);
$fail.= validate_surname($surname);
$fail.= validate_password($password);
$fail.= validate_age($age);
$fail.= validate_email($email);

echo "<html><head><title>An example form</title></head><body>";

if($fail==""){
  echo "Form data successfully validated: $forename,
  $surname, $password, $age, $email";        
}

//This is where you'd enter post fields to the DB
exit;

//Now the HTML & JavaScript goes here 
```

回声<<<_SOQ

```
<style type="text/css">.signup{
  border:1px solid #999999;
  font:normal 14px helvetica;
  color:#444444;
  }
</style>

 <script type="text/javascript">

   function validate(form){

    fail = validateForename(form.forename.value);
    fail += validateSurname(form.surname.value);
    fail += validatePassword(form.password.value);
    fail += validateAge(form.age.value);
    fail += validateEmail(form.email.value);

      if(fail=="") return true;
      else alert(fail); return false;

    }

</script>

</head>
    <body>
      <table class="signup" border="0" cellpadding="2" cellspacing="5" 
       bgcolor="#eeeeee">
        <th colspan="2" align="center">Sign up form</th>

  <tr>
    <td colspan="2">Sorry, the following errors were found<br/>
     in your form: <i>$fail</i>
    </td>
  </tr>

<form method="post" action="adduser.php" onsubmit="validate(this.form)">

<tr><td>Forename:</td><td><input type="text" maxlength="32"
  name="forename" value="$forename"/></td>
</tr>

<tr><td>Surname:</td><td><input type="text" maxlength="32"
  name="surname" value="$surname"/></td>
</tr>

<tr><td>Password:</td><td><input type="text" maxlength="32"
  name="password" value="$password"/></td>
</tr>

<tr><td>Age:</td><td><input type="text" maxlength="32"
  name="age" value="$age"/></td>
</tr>

<tr><td>Email:</td><td><input type="text" maxlength="32"
  name="email" value="$email"/></td>
</tr>

<tr><td colspan="2" align="center">
   <input type="submit" value="Sign-up"/></td>
</tr>

  </form>
</table> 
```

```
<script type="text/javascript">

function validateForename(field){
  if(field=="") return "No surname was entered";
  return "";
}

function validateSurname(field){
  if(field=="") return "No surname was entered";
  return "";
}

function validatePassword(field){
   if(field=="") return "No surname was entered";
   else if(field.length<6) return "Passwords, must be at least 6 characters";
   else if([^/a-zA-Z0-9_-/]) return "Only a-zA-Z0-9_- characters are allowed ";
   return "";
 }

function validateAge(field){
   if((field=="") || (isNaN(field)) return "No age was entered";
   else if((field<18) || (field>101))  return "Age must be between 18 and 101 years";
   else if(/[^a-zA-Z0-9_-]/.test(field)) 
   return "Only a-zA-Z0-9_- characters are allowed ";
   return "";
 }

 function validateEmail(field){
   if(field=="") return "No surname was entered";
   else if(!((field.indexOf('@')>0) && (field.indexOf('.')>0)) ||
   /[^a-zA-Z0-9-]/.test(field)) return "E-mail address invalid";
   return "";
 }

</script>

  </body>
</html> 
```

_SOQ;

//最后是PHP函数

```
function validate_forename($field){
  if($field=="") return "No forename was entered";
  return "";
}

function validate_surname($field){
  if($field=="") return "No surname was entered";
  return "";
}

function validate_password($field){
  if($field=="") return "No password was entered";
  elseif(strlen($field) <6) return "Passwords, must be at least 6 characters";
  elseif(!preg_match("/[^a-zA-Z0-9_-]/", $field)) 
  return "Only a-zA-Z0-9_- characters are allowed ";
  return "";
}

function validate_age($field){
  if($field<18 || field>101) return "Age must be between 18 and 101 years";
  return "";
}

function validate_email($field){
  if($field=="") return "No surname was entered";
  elseif(!(strpos($field, ".")>0) && 
         (strpos($field, "@")>0) ||
          preg_match("/[^a-zA-Z0-9_]/",$field)) 
        return "E-mail address invalid";
        return "";
}

//sanitise the PHP input

function fix_string($string){
  if(get_magic_quotes_gpc($string)) stripslashes($string);
  return htmlentities($string);

 } 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:31:44.493

```
if($fail=""){ 
```

您分配而不是检查是否相等。然后，由于分配的值是假的，相应的成功代码将永远不会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:32:18.313

看起来您`$fail=""`在实际需要时使用`$fail==""`. 第一个是赋值表达式，第二个 with`==`是比较表达式。`false`无论`$fail`之前设置什么，您的使用将始终解析为（通过您刚刚设置的空字符串），因为您只是将其重置：

```
$fail = "hello";
var_dump($fail); //string(5) "hello"
var_dump($fail=""); //string(0) ""
var_dump(""); //string(0) "" 
```

所以你的 if 语句然后变成

```
if("") {
    //never get here
} else {
    //always get here, but you have nothing defined
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:05:44.040

如果你没有看到任何东西，你有一个 php 错误

转到 php.ini 并将错误报告设置为 E_ALL 并将错误显示为 on 或

```
<?php
     error_reporting(E_ALL);
     ini_set("display_errors", 1);
?> 
```

# java - 将输入作为比特流处理

> ID：12227507
> 
> 赞同：2
> 
> 时间：2012-09-01T11:59:37.957
> 
> 标签：java, input, bit

我正在处理一种情况，即我必须读取的输入是比特流。所以输入可以是以下形式。第一行告诉我将要接收的比特数，然后下一行是一次性的比特流。

```
10
011011110 
```

现在我正在尝试的是是否可以处理我收到的输入。我知道[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类有一个方法 nextByte() 将输入的下一个标记作为字节处理。我想知道是否可以将输入作为位数组处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:06:23.197

在 Java 7 中，您有一个`BitSet`可以这样使用的类：

```
public static BitSet fromByte(byte b)  
{  
    BitSet bits = new BitSet(8);  
    for (int i = 0; i < 8; i++)  
    {  
       bits.set(i, (b & 1) == 1);  
       b >>= 1;  
     }  
     return bits;  
 } 
```

您必须`byte`从流中获取，然后简单地调用它的`fromByte`方法。

# android - Android 按钮样式布局

> ID：12227508
> 
> 赞同：0
> 
> 时间：2012-09-01T11:59:57.833
> 
> 标签：android, android-layout

我有一个带有图标和文本的仪表板，如下图所示。我想要的是“我的状态”文本后面的圆角填充背景。我在图片上画了我想要的东西，但它需要填充，不仅像这里一样有边框（只是为了清楚起见，我在图片上这样画了它）。

![我拥有和想要的](../Images/b325047658cff4f20dbc4bcb1cd9bb7a.png)

现在这个按钮是通过一种风格制作的：

```
 <style name="DashboardButton">
        <item name="android:layout_gravity">center_vertical</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:gravity">center_horizontal</item>
        <item name="android:drawablePadding">2dp</item>
        <item name="android:textSize">14dp</item>
        <item name="android:textColor">#877871</item>
        <item name="android:background">@null</item>
 </style> 
```

我怎样才能适应这种风格来实现它？我还可以通过样式设置悬停和活动状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:08:06.230

对于按钮文本的背景，您可以尝试使用自定义背景图形来执行此操作，但我认为将“按钮”分成两部分并将图标部分呈现为 ImageButton 并将标签部分呈现为更容易背景为自定义[ShapeDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)的普通按钮，例如：

```
 <shape>
        <solid android:color="#0000FF" />
        <stroke
            android:width="2dp"
            android:color="#FFFFFF" />
        <corners
            android:radius="8dp" />
        <padding
            android:left="8dp"
            android:top="8dp"
            android:right="8dp"
            android:bottom="8dp" />
    </shape> 
```

要设置**悬停和活动状态**，您可以使用 Android 的[StateListDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)。

# python - 如何在python中解密未加盐的openssl兼容河豚CBC/PKCS5Padding密码？

> ID：12227510
> 
> 赞同：4
> 
> 时间：2012-09-01T12:00:01.590
> 
> 标签：python, encryption, blowfish

我一直在寻找一个python库来帮助解密openssl河豚加密密码。

我已经设法在 Java 中实现了这一点，但支持这一点的 python 库似乎更像是一个学习曲线，需要自己动手。

就我们需要实现的目标而言，密码是未加盐的并使用密码短语，出于这个问题的目的，我将其设置为“AAAAAAA”。密码是“Blowfish/CBC/PKCS5Padding”。加密文本将作为字符串读入，与密钥和 iv 相同。

在 openssl 中，这是“简单的”：

```
~$ # This is encrypting
~$ echo -n 'password' | openssl enc -bf -nosalt -a -K AAAAAAAA -iv AAAAAAAA
eAIUXziwB8QbBexkiIDR3A==
~$ # This is reversing the encryption
~$ echo 'eAIUXziwB8QbBexkiIDR3A==' | openssl enc -d -bf -nosalt -a -K AAAAAAAA -iv AAAAAAAA
password 
```

在 java 中，解密是这样的：

```
private static final String KEY = "AAAAAAAA000000000000000000000000";
private static final String IV = "AAAAAAAA00000000";
private static final String FCN = "Blowfish/CBC/PKCS5Padding";
private static final String CN = "Blowfish";

final byte[] encoded = Base64.decode("eAIUXziwB8QbBexkiIDR3A==");
final SecretKeySpec key =
new SecretKeySpec(Hex.decodeHex(KEY.toCharArray()), CN);
final Cipher cipher = Cipher.getInstance(FCN, JCE_PROVIDER);
cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(Hex.decodeHex(IV.toCharArray())));
final byte[] decrypted = cipher.doFinal(encoded);
return new String(decrypted); 
```

有人可以为python提供一些指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:20:41.070

内置解码十六进制和 base64 编码字符串：

```
In [1]: "AAAAAAAA000000000000000000000000".decode('hex')
Out[1]: '\xaa\xaa\xaa\xaa\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'

In [2]: "eAIUXziwB8QbBexkiIDR3A==".decode('base64')
Out[2]: 'x\x02\x14_8\xb0\x07\xc4\x1b\x05\xecd\x88\x80\xd1\xdc' 
```

[PyCrypto](https://www.dlitz.net/software/pycrypto/)库处理[BlowFish](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.Blowfish-module.html)（以及其他）。

```
In [1]: from Crypto.Cipher import Blowfish

In [2]: KEY = "AAAAAAAA000000000000000000000000".decode('hex')

In [3]: IV = "AAAAAAAA00000000".decode('hex')

In [4]: cipher = Blowfish.new(KEY, Blowfish.MODE_CBC, IV)

In [5]: ciphertext = "eAIUXziwB8QbBexkiIDR3A==".decode('base64')

In [6]: cipher.decrypt(ciphertext)
Out[6]: 'password\x08\x08\x08\x08\x08\x08\x08\x08' 
```

如果您想一次性从明文中去除填充：

```
In [14]: cipher.decrypt(ciphertext).replace('\x08', '')
Out[14]: 'password' 
```

# jquery - check 属性不是未定义的 jQuery 中

> ID：12227512
> 
> 赞同：0
> 
> 时间：2012-09-01T12:00:05.020
> 
> 标签：jquery

我想检索我的表中存在的所有行的属性值。我知道如何做到这一点，但开始和结束值是“未定义”。

如何对其应用验证。我尝试了一些代码，但似乎不起作用。

```
function currentTicketStatus() {
    var ids;
    $('tbody tr').each(function() {
        ids += ((ids == '' && ids !== 'undefined') ? '' : '|') + $(this).attr('title');
    });
    alert(ids);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:03:26.453

您可以使用`map`方法：

```
titles = $('tbody tr[title]').map(function() {
            return this.title
         }).get()

console.log(titles.join('|')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:04:56.453

这会做你的工作

```
 var ids = '';
   $('tbody tr').each(function() {
   if($(this).attr('title')!='undefined' && $(this).attr('title')!='')
   {
      ids+=$(this).attr('title') + '|';
   }
   });
   alert(ids); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:09:56.743

你可以试试这个

```
var ids = '';

$('tbody tr[title]').each(function() {
      ids+=$(this).attr('title') + '|';
});
alert(ids); 
```

或者你可以试试这个

```
var ids = [];

$('tbody tr[title]').each(function() {
      ids.push($(this).attr('title'));
});
alert(ids.join('|')); 
```

# c++ - 蛇和梯子，编号块

> ID：12227513
> 
> 赞同：0
> 
> 时间：2012-09-01T12:00:11.637
> 
> 标签：c++, graphics

我正在制作蛇和梯子游戏。我将屏幕划分为 10 条水平线和 10 条垂直线，但我发现的下一个问题是对特定插槽进行编号。

使用 outextxy() 函数我只能显示特定的数字并且尝试使用数组将不起作用：

```
int a[100];
for(i=0;i<100;i++)
{
    a[i]=i;
    outtextxy( x,y,a[i]);
} 
```

此方法不起作用，因为 outtextxy() 显示 char 值。
所以或者我这样做了：

```
char a[100];
for(i=0;i<100;i++)
{
    a[i]=i;
    outtextxy( x,y,a[i]);
} 
```

但后来我才知道 outtextxy() 仅适用于字符串。

这样我将不得不使用 100 个 outtextxy() 语句。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:13:01.607

如果我正确理解了您的问题，则需要将整数转换为字符串，然后再将其提供给`outtextxy`，因此您需要以下内容：

```
int a[100];
char output[MAX_OUTPUT_SIZE]; // For 0 to 99, MAX_OUTPUT_SIZE = 5 is more than enough
for(i=0;i<100;i++)
{ 
   a[i]=i;
   sprintf( output, "%d", i );
   outtextxy( x,y,output);
} 
```

请注意，该数组`a`完全是附带的，因此除非您以后需要该数组，否则以下内容也可以正常工作：

```
char output[MAX_OUTPUT_SIZE]; // For 0 to 99, MAX_OUTPUT_SIZE = 5 is more than enough
for(i=0;i<100;i++)
{ 
   sprintf( output, "%d", i );
   outtextxy( x,y,output);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:14:45.740

基本思想是这样的：

```
int rows = 10;
int cols = 10;

for(int r = 0; r < rows; ++r){
 for(int c = 0; c < cols; ++c){
   cout << r << ", " << c;
   if(c != cols-1) cout << " ";
 }
cout << endl;
} 
```

* * *

现在，如果您想在数组中显示值，您有两种选择，具体取决于数组。如果它是一个二维数组，它看起来像

```
cout << arr[r][c]; // you should understand the difference between row-major / column major 
```

如果它是一维数组：

```
cout << arr[ (r * cols) + c ] 
```

# validation - IValidatableObject 通过验证，但 StringLength 无效

> ID：12227516
> 
> 赞同：9
> 
> 时间：2012-09-01T12:00:45.750
> 
> 标签：validation, c#-4.0, tdd, entity, ivalidatableobject

我有一个测试类，其中包含几个测试来检查实体是否`IsValid`. 我从拥有自己的自定义验证转向使用`IValidatableObject`，但我坚持使用正确的验证技术。

**这是我的测试课：**

```
[TestFixture]
public class StudentTests {
    private static Student GetContactWithContactInfo()
    {
        return new Student(new TestableContactRepository())
                            {
                                Phone = "7275551111"
                            };
    }

    private static Student GetContactWithoutContactInfo()
    {
        return new Student(new TestableContactRepository());
    }

    [Test]
    public void Student_Saving_StudentHasInfo_IsValid ()
    {
        // Arrange
        Student student = GetContactWithContactInfo();
        // Act
        student.Save();
        // Assert
        Assert.IsTrue(student.IsValid);
    }

    [Test]
    public void Student_Saving_StudentDoesNotHaveInfo_IsNotValid ()
    {
        // Arrange
        Student student = GetContactWithoutContactInfo();
        // Act
        student.Save();
        // Assert
        Assert.IsFalse(student.IsValid);
    }
} 
```

**这是我的实体：**

```
public class Student : IValidatableObject
{
    private readonly IContactRepository contactRepository;

    public Student(IContactRepository _contactRepository)
    {
        contactRepository = _contactRepository;
        Contacts = new List<Student>();
    }

    [Required]
    public int Id { get; private set; }

    [StringLength(10, MinimumLength = 10)]
    public string Phone { get; set; }

    public List<Student> Contacts { get; private set; }

    public bool IsValid { get; private set; }

    public void Save()
    {
        if (IsValidForPersistance())
        {
            IsValid = true;
            Id = contactRepository.Save();
        }
    }

    private bool IsValidForPersistance()
    {
        return Validator.TryValidateObject(this, new ValidationContext(this), null, true);
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrEmpty(Phone) && Contacts.All(c => string.IsNullOrEmpty(c.Phone)))
            yield return new ValidationResult("The student or at least one contact must have a phone number entered", new[] { "Phone Number" });
    }
} 
```

正如您可以看到`IsValid`通过调用`IsValidForPersistance`. `Validate`最终会有更多的验证。

上述测试都使用此方法通过，但下面的测试也通过但不应该通过。

```
[Test]
public void Student_Saving_HasContactInfoWithInvalidLength_IsNotValid()
{
    // Arrange
    Contact student = GetContactWithoutContactInfo();
    student.Phone = "string";

    // Act
    student.Save();

    // Assert
    Assert.IsFalse(student.IsValid);
} 
```

在这里，我设置了我自己`Phone`的无效长度字符串的值。我希望验证失败，因为`StringLength`注释设置为最小和最大 10 个字符。

为什么会这样过去？

**更新** 自定义验证出现问题，使用更改更新了代码。除了 nemesv 关于`private`在属性上没有修饰符的建议之外，`Phone`它现在可以工作了。我已将所有代码更新为正常工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-01T17:07:12.193

默认情况下，[Validator.TryValidateObject](http://msdn.microsoft.com/en-us/library/dd411772)**仅检查**`RequiredAttribute`s（以及类型级别属性和`IValidatableObject`实现等其他内容）。

如果您需要验证**所有属性**等`StringLength`，您需要将`validateAllProperties`方法的参数设置为`true`

```
private bool IsValidForPersistance() {
    return Validator.TryValidateObject(this, 
                                       new ValidationContext(this), 
                                       null,
                                       true /* validateAllProperties */);
} 
```

# python - python中的"""是什么？

> ID：12227519
> 
> 赞同：0
> 
> 时间：2012-09-01T12:01:06.687
> 
> 标签：python

我的代码：

```
 """
 def
 """
 k="""
 abc
 """
 print(k)
 print('abc2') 
```

我尝试运行它：

```
 sam@sam-M51Kr:~/code/python$ python test.py 

  abc

  abc2
  sam@sam-M51Kr:~/code/python$ 
```

在代码的开头，似乎“””变成了注释。

但是为什么k是'abc'的两个空行？

谢谢~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T12:06:50.383

""" 是字符串分隔符。

从[PEP 257](http://www.python.org/dev/peps/pep-0257/)

> 文档字符串是作为模块、函数、类或方法定义中的第一条语句出现的字符串文字。这样的文档字符串成为该`__doc__`对象的特殊属性。

因此，方法后面的字符串是注释，其他工具可以使用它来记录您的代码。如果您在其他地方使用未分配的字符串文字，它只是帮助阅读代码的人的注释（上一个链接中提到的几种情况除外）

来自[python参考](http://docs.python.org/reference/lexical_analysis.html#string-literals)

> 在三引号字符串中，允许（并保留）未转义的换行符和引号，除非一行中的三个未转义的引号终止字符串。（“引号”是用于打开字符串的字符，即 ' 或 "。）

因此包括回车/换行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:02:34.203

**问：** “但是为什么 k 是两个带有‘abc’的空行？”

```
k="""
 abc
 """ 
```

`"""`(also `'''`) 是***保留****换行符*的多行字符串定界符，因此在 initial 之后有一个换行符，在此之后有一个换行符，`"""`这`abc`就是你得到空行的原因。

使用`repr()`你可以明确地看到这一点：

```
repr(k)
"'\\n abc\\n '" 
```

`"""`用于编写长的、多行的、字符串，或作为文档[字符串](http://www.python.org/dev/peps/pep-0257/#what-is-a-docstring)（或[this](http://epydoc.sourceforge.net/docstrings.html)）形式的文档辅助，正如您也正确指出的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:03:01.310

`""" ... """`只是一个多行字符串。所以

```
"""
abc
""" 
```

是一个换行符，然后是`abc`另一个换行符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T12:06:57.763

任何对象（在本例中为模块）的第一个未分配字符串称为“文档字符串”。它会自动分配给`__doc__`定义它的范围内的特殊变量。

另一个是多行字符串。这些是保留嵌入换行符的“原样”字符串。因此，分配 的第一行在`k`字符串的开头和结尾都有一个换行符。您通常不会在终端中看到它。

# c# - WebBrowser Control c#：查找特定链接并以编程方式“单击”它？

> ID：12227520
> 
> 赞同：3
> 
> 时间：2012-09-01T12:01:07.503
> 
> 标签：c#, webbrowser-control

我正在研究 csv 下载器项目，我需要下载网页上生成的 CSV 文件。并使用 html 敏捷性，我找到了包含 csv 文件链接的确切链接

```
<a href="/content/fo/contractvol/datafiles/OPTIDX_NIFTY_CE_31-08-2012_TO_31-08-2012.csv" target="_blank">Download file in csv format</a> 
```

现在我想要，在我没有任何活动的情况下，应用程序必须在网页中检测到这个链接（我可以通过 Htmlagility 来完成），并且一旦网页在我的应用程序的 Web 浏览器中完全导航，就应该下载文件。我在其中一个 SO [click here](https://stackoverflow.com/questions/3479490/click-an-html-link-inside-a-webbrowser-control)帖子中尝试了一些示例，但得到

> 错误：对象引用未设置为对象的实例。

```
HtmlElementCollection links = webBrowser.Document.GetElementsByTagName("A");

foreach (HtmlElement link in links)  // this ex is given another SO post 
{
    if (link.InnerText.Equals("My Assigned"))
        link.InvokeMember("Click");
} 
```

任何机构都可以建议怎么做吗？

解决了 ：

我改为`HtmlElementCollection links = webBrowser.Document.GetElementsByTagName("A");` 使用`HtmlElementCollection links = webBrowser1.Document.Links`

```
 if (link.InnerText.Contains("My Assigned"))
{
        link.InvokeMember("Click");
} 
```

. 谁有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:15:37.040

实际上，我会摆脱 HTMLAgility 包（它非常糟糕），然后自己去/循环它。另外，不要使用innerText，因为根据您的示例，至少一个链接中似乎没有innertext。使用 .href 属性并检查 .csv 扩展名。

```
link.href.EndsWith(".csv") 
```

如果每个页面上有多个 .cvs，请查找一些 url 字符串或内部文本属性来完善它。

此外，您的 .GetElementsByTagName("A") 不起作用的原因是因为 TagName 是指任何特定 TAG 的名称属性。所以，你是说，获取所有带有*TagType name="A"*的 TAG ......这有意义吗？我认为有一个 .GetElementsByTag[Type] 或类似的东西，您可以使用它来基于标签类型而不是标签的名称属性。

另外，您如何下载 .csv 文件？是出现“下载对话框”框还是只是在 webbrowser 控件中显示人员？（好奇你是如何处理那部分的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:05:08.120

InnerText 可能为空，因此请构建安全措施，以检查是否为空：

```
if ((link.InnerText != null) && (link.InnerText.Equals("My Assigned")) )
        link.InvokeMember("Click"); 
```

# android - RelativeLayout 中的大背景图像导致 layout_below 和 centerInParent 出现意外行为

> ID：12227533
> 
> 赞同：0
> 
> 时间：2012-09-01T12:03:35.483
> 
> 标签：android, xml, android-relativelayout

我有一个奇怪的问题，我希望有人可以帮助我。

我试图让 3 个按钮出现在另一个下方，从屏幕中心开始，上边距为 10dp。所以第一个按钮在屏幕的中心，第二个按钮在那个按钮的下方（没有向上推屏幕按钮的中心），第三个按钮在第二个下方。

每当我向我的 RelativeLayout（填满整个屏幕）添加一个大的（大于屏幕大小）背景图像时，它会导致第二个和第三个图像回到屏幕顶部（它们应该是如果我从第一个按钮中删除了 centerInParent 属性）。第一个按钮仍然停留在屏幕中间。

我想知道是否有人以前遇到过这个问题，最好的解决方案是什么？使用较小的图像可以工作，但并不理想，因为问题再次出现在较小的屏幕尺寸上，这需要我缩小所有图像，并且有时仍会出现在某些屏幕尺寸上。

这是我的 XML 文件：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg" >
<Button
    android:id="@+id/button1"
    android:layout_centerInParent="true"
    style="@style/Button" />
<Button
    android:id="@+id/button2"
    android:layout_marginTop="10dp"
    android:layout_centerHorizontal="true"
    android:layout_below="@id/button1"
    style="@style/Button" />
<Button
    android:id="@+id/button3"
    android:layout_marginTop="10dp"
    android:layout_centerHorizontal="true"
    android:layout_below="@id/button2"
    style="@style/Button" />
</RelativeLayout> 
```

按钮样式很简单：

```
<style name="Button">
    <item name="android:layout_width">200dp</item>
    <item name="android:layout_height">40dp</item>
    <item name="android:gravity">center</item>
    <item name="android:padding">0dp</item>
    <item name="android:textStyle">bold</item>
</style> 
```

由于我在谷歌搜索时找不到任何对此问题有答案的人，所以一定是我误解了。这似乎应该是一个普遍的问题。

我也尝试将按钮包装在 LinearLayout 中，但它没有达到预期的效果，因为 LinearLayout 越大（通过添加按钮）它会越高，我有点希望按钮从屏幕中间向下。基本上，它与没有RelativeLayout 并且只是将您的重力设置为LinearLayout 中的中心并且方向设置为垂直时达到了相同的结果。

非常感谢任何帮助，我现在有点迷失了！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:43:41.840

我无法解决这个问题（在我看来，这似乎是某种错误），所以我只是在如何在屏幕上显示按钮方面做出妥协，并将其简化为仅使用带有按钮的 LinearLayout屏幕下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:49:44.883

如果我理解得很好，请告诉我。您想要在屏幕上放置一个背景图像，并在屏幕中央放置三个按钮？如果这是问题，您可以尝试放入您的布局：

```
<ImageView
android:id="@+id/your_id"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:src="@drawable/your_image"
android:scaleType="fitXY"
/> 
```

关于按钮，我会在所有按钮中添加以下内容，而不是 android:layout_centerInParent="true"：

```
android:layout_centerVertical="true" 
```

# hibernate - TABLE_PER_CLASS 的鉴别器

> ID：12227536
> 
> 赞同：1
> 
> 时间：2012-09-01T12:04:14.520
> 
> 标签：hibernate, jpa, eclipselink

我有以下 JPA 映射。

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
@DiscriminatorColumn
public class BaseEntity implements Serializable {
    @Id
    @GeneratedValue(strategy=GenerationType.TABLE)
    private Long pk;
    @ManyToOne(fetch = FetchType.LAZY)
    private BaseEntity parent;
}

@Entity
@Table(name="sclBase")
@DiscriminatorValue("sclBase")
public class SclBase extends BaseEntity {
    private String attr;
}

@Entity
@Table(name="scls")
@DiscriminatorValue("scls")
public class Scls extends BaseEntity {
    private String attr;
}

@Entity
@Table(name="scl")
@DiscriminatorValue("scl")
public class Scl extends BaseEntity {
    private String attr;
} 
```

所以每个实体在编译时都可以有一个类型未知的父级。由于使用了 table_per_class 层次结构，因此不会生成 BaseEntity 表，但其属性将在每个子类中重复。所以每个子类都会有以下字段：pk - 主键，attr - 一些属性，parent_id - 对父级的引用。但是父 id 不会是外键，因为我们不知道它引用的是哪个表。

因此，当我想获得实体的父级时，Hibernate/EclipseLink 将遍历所有实体，直到找到具有给定 parent_id 的实体。不是很有效，不是吗？如果将 parent_type 存储为鉴别器列，则该过程可能会简单得多。因此，将通过父类型和 parent_id 找到父级。

有没有办法让 hibernate/EclipseLink 生成这个鉴别器列来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:07:36.323

在 EclipseLink 中，您可以为此使用 @VariableOneToOne 映射。

但是，一般来说，您可能希望重新考虑您对 TABLE_PER_CLASS 的使用，与其他继承策略相比，它效率低下。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_variableonetoone.htm](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_variableonetoone.htm)

# html - Notepad++ 的正则表达式

> ID：12227539
> 
> 赞同：3
> 
> 时间：2012-09-01T12:04:50.683
> 
> 标签：html, regex, excel, html-table, notepad++

长话短说，我有一个非常大的表格（1200 多行），从自定义 Excel 到 html 转换，除了最后缺少的部分外，它工作得很好。我不擅长 RegEx，我认为我需要它来在 Notepad++ 中进行查找和替换。以下是我拥有的和需要的。

**输入：**

```
<td>image1</td>
<td>image2</td>
...
<td>image1242</td> 
```

**需要的输出：**

```
<td><img src="image1.png" alt="" /></td>
<td><img src="image2.png" alt="" /></td>
...
<td><img src="image1242.png" alt="" /></td> 
```

请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:07:57.840

使用这个正则表达式：

```
<td>image(.+)</td> 
```

和以下模式作为替代：

```
<td><img src="image\1.png" alt"" /></td> 
```

作为旁注，使用正则表达式解析 HTML 通常[不是一个好习惯](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)——在像这样的简单情况下，这可能就足够了，但对于更复杂的情况，最好像 XML 文件一样解析 HTML。

如果您了解一些 C#，则可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:17:29.460

这样做： -

## 找什么：

```
<td>image(\d+)</td> 
```

## 用。。。来代替：

```
<td><img src="image\1.png" alt="" /></td> 
```

参考截图：

![查找替换为正则表达式](../Images/0b5263fceeec843bc074f5058acbe98d.png)

# c# - 如何知道 VPN 连接是否已建立？

> ID：12227540
> 
> 赞同：12
> 
> 时间：2012-09-01T12:04:55.200
> 
> 标签：c#, network-programming, vpn

我有一个 VPN 连接。为了建立 VPN 连接，必须执行一个 PPTP.bk 文件。运行此文件并输入凭据后，将建立 VPN 连接。

我正在尝试以编程方式连接和断开 VPN 连接。问题是 Windows 中没有创建 VPN 连接，因此我需要能够随时验证任何 VPN 连接，如果不存在则建立一个。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-01T16:45:54.777

我使用类检查 VPN 连接状态`NetworkInterface`。这是我为此目标编写的代码：

```
if (NetworkInterface.GetIsNetworkAvailable())
{
    NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
    foreach (NetworkInterface  Interface in interfaces)
    {
        if (Interface.OperationalStatus == OperationalStatus.Up)
        {
            if ((Interface.NetworkInterfaceType == NetworkInterfaceType.Ppp) && (Interface.NetworkInterfaceType != NetworkInterfaceType.Loopback))
            {
                IPv4InterfaceStatistics statistics = Interface.GetIPv4Statistics();
                MessageBox.Show(Interface.Name + " "  + Interface.NetworkInterfaceType.ToString() + " " + Interface.Description);
            }
            else
            {
                MessageBox.Show("VPN Connection is lost!");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-17T17:47:26.290

稍作修改 - 这是对我有用的代码。

```
public bool CheckForVPNInterface()
    {
        if (NetworkInterface.GetIsNetworkAvailable())
        {
            NetworkInterface[] interfaces = 
NetworkInterface.GetAllNetworkInterfaces();
            foreach (NetworkInterface Interface in interfaces)
            {
                // This is the OpenVPN driver for windows. 
                if (Interface.Description.Contains("TAP-Windows Adapter")
                  && Interface.OperationalStatus == OperationalStatus.Up)
                {
                        return true;
                }
            }
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-28T01:42:21.913

在我的网络驱动程序`Cisco`中有描述文本。这是一个更新的版本，只有几行：

```
public static class VPNCheck
{
    public static bool IsOn()
    {
        return ((NetworkInterface.GetIsNetworkAvailable())
                && NetworkInterface.GetAllNetworkInterfaces()
                                   .FirstOrDefault(ni => ni.Description.Contains("Cisco"))?.OperationalStatus == OperationalStatus.Up);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-04T07:55:29.457

对我来说，我发现这很有帮助，但我想在遍历所有接口并找到一个 UP 后检查特定的 VPN 名称......

```
 if (NetworkInterface.GetIsNetworkAvailable())
            {
                NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
                foreach (NetworkInterface Interface in interfaces)
                {
                    if (Interface.OperationalStatus == OperationalStatus.Up)
                    {
                        if (Interface.Description.Contains("VPN_Name"))
                        {
                            connected = true;
                            break;
                        }                           
                    }
                }
            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-24T12:40:54.470

如果 VPN 连接存在且正常，您将始终找到一个名为“<strong>tun0”的网络接口。因此，使用与 NetworkInterface 相同的方法，我编写了一个简单的代码：

```
public static boolean isVpnOk(){
    List<String> networks = new ArrayList<>();
    try {
        for (NetworkInterface networkInterface : Collections.list(NetworkInterface.getNetworkInterfaces())) {
            if (networkInterface.isUp()) networks.add(networkInterface.getName());
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return networks.contains("tun0");
} 
```

# file-io - 如何在输出文件中为mathematica中的r和k的每个值打印f[r]和f[k]值？

> ID：12227544
> 
> 赞同：0
> 
> 时间：2012-09-01T12:05:03.850
> 
> 标签：file-io, wolfram-mathematica

如何使用mathematica 打印输出文件中的f[r] 和f[k] 值以及r 和k 值？有什么方法可以自动将此输出导出到 .txt 文件，而无需重新编写 Print[] 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:45:15.783

保存 Mathematica 表达式的最简单方法是使用`Save`函数。你可以写

```
Save[filename,x] 
```

Mathematica 会将与变量关联的定义保存`x`到您命名的文件中。笔记

*   `Save`附加到已经存在的文件；
*   表达式用`InputForm`;
*   `<<`您可以使用(aka ) 函数将表达式加载回您的工作区`Get`，该函数读取*并评估*存储在文件中的表达式。

您实际用于`Save`存储数据的方式取决于您自己。也许，您可以将调用的结果分配`Table[{k,f[k]},{k,min,max,step}]`给一个变量，并保存该结果变量，该变量将在文件中显示为一个`k,f[k]`配对表。

由于`Save`可以附加到现有文件，如果您使用循环，则`k,f[k]`在每次迭代时保存一对。但是你为什么要在 Mathematica 中使用循环呢？

# javascript - 如何检测我在 eval() 调用中？

> ID：12227546
> 
> 赞同：18
> 
> 时间：2012-09-01T12:05:22.820
> 
> 标签：javascript, eval

是否存在`s`这样的字符串

```
(new Function(s))(); 
```

和

```
eval(s); 
```

表现不同？我正在尝试“检测”如何评估字符串。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-01T12:09:06.473

检查`arguments`对象。如果它存在，那么您就在函数中。如果不是，它已被`eval`编辑。

请注意，您必须将检查放在这样`arguments`的`try...catch`块中：

```
var s = 'try {document.writeln(arguments ? "Function" : "Eval") } catch(e) { document.writeln("Eval!") }';
(new Function(s))();
eval(s); 
```

[演示](http://pastehtml.com/view/ca61zq8sa.html)

[解决了`nnnnnn`的顾虑。](http://jsfiddle.net/amaan/yA4dL/2/)为此，我编辑了 eval 函数本身：

```
var _eval = eval;
eval = function (){
    // Your custom code here, for when it's eval
    _eval.apply(this, arguments);
};

function test(x){
    eval("try{ alert(arguments[0]) } catch(e){ alert('Eval detected!'); }");
}
test("In eval, but it wasn't detected");​ 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-19T19:59:55.787

当前答案在严格模式下不起作用，因为您无法重新定义 eval。此外，`eval`由于许多其他原因，重新定义是有问题的。

区分它们的方法是基于这样一个事实……它们中的一个创建了一个函数，而什么没有。函数能做什么？他们可以`return`东西:)

我们可以简单地利用它并做一些事情`return`：

```
// is in function
try {
     return true;
} catch(e) { // in JS you can catch syntax errors
     false; //eval returns the return of the expression.
} 
```

所以在例子中：

```
var s = "try{ return true; }catch(e){ false; }";
eval(s); // false
Function(s)(); // true
(new Function(s))(); // true, same as line above
(function(){ return eval(s); })(); // the nested 'problematic' case - false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-21T09:53:46.457

```
if (new Error().stack.indexOf('at eval') > -1) {
    console.log('Oh noo, I am being evaled');
} 
```

# javascript - now.js 从现在空间中删除数据并仅将其保存在客户端中

> ID：12227547
> 
> 赞同：0
> 
> 时间：2012-09-01T12:05:39.443
> 
> 标签：javascript, node.js, nowjs-sockets

我刚刚开始使用 now.js。

我想在服务器和客户端之间的共享空间中使用特定的 clientId 放置一些数据。然后我想将该数据移出现在的空间并仅将其保留在特定客户端中。这意味着我想从现在的空间中删除数据，以免堵塞我的服务器内存。我的数据可能是自定义对象或特定函数，而不是文本。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:21:11.127

这现在应该是一个问题：在服务器上设置 var，将其同步到客户端，然后将其从客户端删除并同步回来。

伪代码：

服务器端： `now.foo = 'bar';`

客户端： `var foo = now.foo;` `delete now.foo;`

当客户端同步回服务器时 now.foo 不应再定义。

# algorithm - Floyd 的循环查找算法 - 需要两个指针吗？

> ID：12227551
> 
> 赞同：4
> 
> 时间：2012-09-01T12:06:07.667
> 
> 标签：algorithm, floyd-cycle-finding

我今天正在查看弗洛伊德的循环查找算法，并且有一个疑问。为什么他需要两个指针并以不同的速度移动它们？

相反，他可以创建两个指针，保持一个静态并将它的指针与另一个指针进行比较，然后递增？我的意思是即使这样也会导致找到周期，对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T12:10:42.733

他们需要移动的原因是循环不一定要循环整个节点列表。

例如，假设我们有 4 个节点 A->B->C->D->B

如果我们让一个指针指向 A，我们永远不会检测到循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T12:10:32.673

原因是后面的指针（增加得更慢）需要增加以使其脱离循环的任何分支。

例如。边 A => B、B => C、C => A、D => B、E => D。

假设两个指针都从 E 开始。那么如果你不改变一个指针，另一个指针将变为 E => D => B => C => A => B => C => ...，永远不会到达E.

当其他人说您不会获得相同的算法复杂性时，他们意味着您将不得不尝试从每个顶点开始（这更慢）。使用快/慢指针方法，您只需尝试从图形的每个“组件”开始一次。组件是相互连接的所有顶点。单独的组件意味着顶点不通过边连接。

通过增加慢指针，它也将进入 A => B => C 循环。

而且它永远不会错过，因为指针变化的有效差异只有1。即。如果快指针赶上慢指针，则它们之间的距离每次迭代仅变化 1。所以最终距离会达到0。

# android - 如何将多个连接到连接到汽车的单个 Obd2 蓝牙设备

> ID：12227559
> 
> 赞同：6
> 
> 时间：2012-09-01T12:07:15.890
> 
> 标签：android, multithreading, bluetooth, obd-ii

我必须做一个 Android 应用程序，通过蓝牙从连接到汽车 OBD-II 端口的蓝牙设备读取值。

我使用 UUID SPP UUID 00001101-0000-1000-8000-00805F9B34FB 。

如果我创建了 4 个线程想要连接到 OBD-II 设备，3`connect()`秒失败，只有一个线程能够连接到设备。

有没有办法通过蓝牙将更多线程连接到 OBD-II 设备？

我不知道`elm-237`设备是否能够与更多线程通信。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T12:21:52.810

我不是 OBD/OBD-II 方面的专家，但我对串行端口知之甚少。

其实，你看到的一点也不让我吃惊。串行端口设备通常必须在独占模式下运行，因此只有一个参与者可以在单个时间点与它们交谈。为此创建多个线程完全没有意义——这不会让你的串口“说话更快”，也不会让外部设备（OBD芯片）响应更快！这不是网络！要并行与多个设备通信，您需要实际使用几根电缆 - 可能还需要几个芯片。

ELM327 是您的 OBD-2 电缆中的设备。它调解汽车中的芯片和您的 USB 端口之间的通信，并通过 USB 总线公开一个虚拟串行端口。我从未听说过任何便宜的支持蓝牙的 ELM327 克隆，但我知道有 OBD-II 蓝牙适配器——我见过的最后一个~~成本约为 2000 美元，因为它配备了一个大型诊断软件和汽车零件数据库~~（罢工：见评论）当然没有任何电缆工作。但我认为它仍然只提供 1 个虚拟串行端口来与 1 个设备通信。

# security - 如何安全地存储和使用客户的 AWS 密钥

> ID：12227564
> 
> 赞同：2
> 
> 时间：2012-09-01T12:08:17.747
> 
> 标签：security, node.js, amazon-web-services

是否可以在我的服务器上存储客户的密钥和访问密钥 ID 以允许我代表他们访问 AWS API？

对于密码，只需使用散列来存储加密版本，但我每次调用 AWS 时都需要使用实际的密钥值，因此我无法对其进行散列。

简单来说，对于每个经过身份验证的用户，我都会存储一个类似这样的对象：

```
{userdId: [myUserId],
 secretKey: 'jHuiU-jiuhd...',
 accessKeyId: 'abcdef...',
 etc} 
```

然后我可以在每次调用 AWS 时访问它。

现在，我可以对其进行 base64 编码和/甚至自己加密，但在某些阶段我必须对其进行解码和解密才能发出我的请求，并且我需要执行这些选项的所有内容都将存储在服务器上的某个位置。

如果数据保存在服务器上——从不发送回客户端——并且如果从服务器到 AWS 的传输是通过 SSL 完成的，那么这就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-09T14:37:28.823

> 如何安全地存储和使用客户的 AWS 密钥

### Ansible

如果您使用 Ansible，请考虑使用[Vault 保护敏感的 Ansible 数据](https://www.digitalocean.com/community/tutorials/how-to-use-vault-to-protect-sensitive-ansible-data-on-ubuntu-16-04)。因此，您可以将其配置为加密敏感内容，例如私钥。

### 密钥库

另一种方法是使用[Keybase](https://keybase.io/)应用程序，它在您的所有设备上提供端到端的加密数据。

### PGP

使用[pgp](/questions/tagged/pgp "显示标记为“pgp”的问题")加密来加密和解密敏感密钥。

### OpenSSL

使用您的[公钥加密文件](https://stackoverflow.com/q/2811528/55075)，然后使用您的私钥解密它。

### SSH 保险库

检查`ssh-vault`它如何使用 SSH 密钥加密/解密数据。

# javascript - 为什么我得到这个 with 语句的语法错误，但我实际上并没有使用任何语句？

> ID：12227565
> 
> 赞同：2
> 
> 时间：2012-09-01T12:08:25.457
> 
> 标签：javascript

在下面的代码中，我没有使用任何“with 语句”，但是当我设置断点时，它给了我错误：

`SyntaxError: 'with' statements are not valid in strict mode`

```
(function () {
    'use strict';
    function addItem() {
        var orderListElement, newLi, childCount;
        orderListElement = document.getElementById('orderList');
        newLi = document.createElement('li');
        childCount = orderListElement.children.length;
        newLi.textContent = 'new item ';
        orderListElement.appendChild(newLi);
    }
    function deleteItem() {
        var orderListElement, lastLi;
        orderListElement = document.getElementById('orderList');
        lastLi = orderListElement.lastChild;
        orderListElement.removeChild(lastLi);
    }
    function registHandler() {
        var addItemButton, deleteItemButton;
        addItemButton = document.getElementById('addItem');
        deleteItemButton = document.getElementById('deleteItem');
        addItemButton.addEventListener('click', addItem, false);
        deleteItemButton.addEventListener('click', deleteItem, false);
    }
    window.addEventListener('load', registHandler, false);
}()); 
```

这太烦人了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-07T20:51:28.267

这似乎是 Safari 的一个已知问题：[https ://bugs.webkit.org/show_bug.cgi?id=65829](https://bugs.webkit.org/show_bug.cgi?id=65829)

要重现错误，您只需在断点处停止并处于严格模式时将*任何代码键入控制台。*

这是错误报告中的代码：

```
(function(){
    "use strict";
    debugger;
})(); 
```

因此，当您在断点处时，转到控制台并键入`2+3`（或任何表达式），您将得到错误。

![在此处输入图像描述](../Images/3ec23323d0274f5ad3be57401a6b7cc1.png)

# javascript - 评估字符串的方法

> ID：12227566
> 
> 赞同：0
> 
> 时间：2012-09-01T12:08:57.153
> 
> 标签：javascript

给定一个字符串`s`，如何在 JavaScript 中“执行”它？

我知道两种方法，即`eval(s)`和`(new Function(s))()`。

还有其他方法可以评估字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:19:24.400

在 HTML 文档中，您可以创建`<script>`元素，但我认为不适`<script>.innerHTML`用于所有浏览器（但在 Firefox 中可以）。

```
var strToEval = "window.alert(1);";
window.onload = function() {
        var scrEl = document.createElement('script');
        scrEl.innerHTML = strToEval;
        document.body.appendChild(scrEl);
}; 
```

或者，而不是设置`innerHTML`：

```
scrEl.src = "data:text/javascript," + strToEval; 
```

# .net - msmq 基础知识以及如何能够跟踪消息的进出时间

> ID：12227569
> 
> 赞同：2
> 
> 时间：2012-09-01T12:09:07.120
> 
> 标签：.net, msmq

我已经阅读了许多教程和 msdn 文档，如下所示，但没有一个解释了当您从队列中读取消息时会发生什么......

1.  [http://msdn.microsoft.com/en-us/library/ms978425.aspx](http://msdn.microsoft.com/en-us/library/ms978425.aspx)
2.  [http://msdn.microsoft.com/en-us/library/ms978430.aspx](http://msdn.microsoft.com/en-us/library/ms978430.aspx)

首先需要对 msmq 有一个基本的了解，因为我以前没有真正使用过它。因此，我有一些相当“新手”的问题：

1.  收听队列的客户端收到消息后会发生什么情况？它会自动从队列中删除吗？
2.  如果一个队列被许多客户端监听怎么办？msmq 会保证消息将到达任何（且仅）“一个”侦听客户端吗？
3.  公共/私人队列之间的真正区别是什么？我应该什么时候去公共队列？

我还需要知道如何跟踪消息何时进入队列以及何时被消耗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:37:15.713

1.  当从队列中取出一条消息时，它被视为已接收并从队列中删除。Msmq 是强排序的 - 您将无法在其前一条消息之前收到一条消息。如果您希望根据消息接收对您的应用程序的意义来控制从队列中删除消息，则可以使用[事务队列。](http://msdn.microsoft.com/en-us/library/ms702030%28VS.85%29.aspx)除非它被删除，否则您将继续一遍又一遍地收到相同的消息。这被称为[队列中毒](http://msdn.microsoft.com/en-us/library/aa395218.aspx)，本身就是一个值得讨论的话题。

2.  收到一条消息时会删除，因此一次只有一个客户端可能会收到一条消息。`Peek`如果您想要其他语义，您可以将接收与。

3.  私有队列和公共队列在编程访问方面并没有太大区别。主要区别在于它如何暴露给目录服务。私有队列仍然可以通过队列路径公开。[关于 MSDN 上的目标队列类型](http://msdn.microsoft.com/en-us/library/ms706878%28VS.85%29.aspx)有一个很好的解释。

WCF 有一个对队列进行抽象的 MSMQ 绑定，因此如果您更倾向于使用合同（尽管我个人不推荐它），这是一个替代方案。

# android - 在三星 Galaxy S 上以人像模式“拍照并呈现”

> ID：12227572
> 
> 赞同：8
> 
> 时间：2012-09-01T12:09:18.950
> 
> 标签：android, android-intent, galaxy

我试图简单地拍照并用我的三星 Galaxy s 将其呈现在 ImageView 中。当我在横向而**不是**纵向时它工作正常。我没有收到任何错误或异常 - 只是没有收到任何东西......关于这个主题有很多问题，而且似乎有问题（关于相机方向的问题）但无法找出简单“的最终解决方案”拍照并呈现”代码。这是我的（有问题的）代码不起作用：

```
private void setUpListeners() {
    takePicture.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_PIC_REQUEST) {
            Log.d("onActivityResult", "CAMERA_PIC_REQUEST returned");
            dishImage = (Bitmap) data.getExtras().get("data");
            if (dishImage==null)
                Log.d("onActivityResult", "dishImage==null");
            imageView = (ImageView) findViewById(R.id.dishinfodishimageview);
            imageView.setImageBitmap(dishImage);
            imageView.setVisibility(View.VISIBLE);
            takePicture.setVisibility(View.GONE);
            (new UploadImage()).execute(null);
        }
    } else {
        Log.e("onActivityResult",
                "no able to presenting the picture of the dish");
    } 
```

}

我只需要一个有效的代码（在任何设备上）或修复我的代码......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:29:47.937

之所以`onCreate()`被调用，是因为当您在纵向期间调用相机活动时，它会改变方向并破坏您之前的活动。完成后`onActivityResult()`，您的活动将被重新创建。

解决此问题的一种方法是将清单设置为忽略方向更改时的更改，您可以使用以下方法来做到这一点：

```
<activity android:name=".MyMainActivity"
     android:configChanges="orientation"
     android:label="@string/app_name" /> 
```

如果您使用从级别 13 开始的 API，则可以考虑`screenSize`使用 configChanges 清单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:45:26.763

试试下面的代码..它适用于三星 Galaxy S2 在 onActivityResult() 中插入以下代码

```
ExifInterface exif = new ExifInterface(cameraimagename);
                    String orientString = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
                    int orientation = orientString != null ? Integer.parseInt(orientString) : ExifInterface.ORIENTATION_NORMAL;
                    int rotationAngle = 0;
                    System.out.println("orientation is : "+orientation);
                    System.out.println("ExifInterface.ORIENTATION_ROTATE_90 : "+ExifInterface.ORIENTATION_ROTATE_90);
                    System.out.println("ExifInterface.ORIENTATION_ROTATE_180 : "+ExifInterface.ORIENTATION_ROTATE_180);
                    System.out.println("ExifInterface.ORIENTATION_ROTATE_270 : "+ExifInterface.ORIENTATION_ROTATE_270);

                    if (orientation == ExifInterface.ORIENTATION_ROTATE_90) rotationAngle = 90;
                    if (orientation == ExifInterface.ORIENTATION_ROTATE_180) rotationAngle = 180;
                    if (orientation == ExifInterface.ORIENTATION_ROTATE_270) rotationAngle = 270;
                    System.out.println("Rotation Angle is : "+rotationAngle);
                    Matrix matrix = new Matrix();
                   // matrix.setRotate(rotationAngle, (float) photo.getWidth() / 2, (float) photo.getHeight() / 2);
                    matrix.postRotate(rotationAngle);

                    Bitmap rotatedBitmap=null;
                    try {
                        rotatedBitmap = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:29:47.687

对于这个问题，我只能建议一个 hack。将您的结果保存在共享首选项中`onActivityResult()`和`onCreate`从共享首选项加载您的内容期间。我知道这是一个糟糕的解决方案，但这会让你继续前进，直到你找到更好的答案。完成后不要忘记清除您的共享偏好，否则您的活动将始终使用旧数据进行初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T11:37:09.293

使用以下方法很容易检测图像方向并替换位图：

```
 /**
 * Rotate an image if required.
 * @param img
 * @param selectedImage
 * @return 
 */
private static Bitmap rotateImageIfRequired(Context context,Bitmap img, Uri selectedImage) {

    // Detect rotation
    int rotation=getRotation(context, selectedImage);
    if(rotation!=0){
        Matrix matrix = new Matrix();
        matrix.postRotate(rotation);
        Bitmap rotatedImg = Bitmap.createBitmap(img, 0, 0, img.getWidth(), img.getHeight(), matrix, true);
        img.recycle();
        return rotatedImg;        
    }else{
        return img;
    }
}

/**
 * Get the rotation of the last image added.
 * @param context
 * @param selectedImage
 * @return
 */
private static int getRotation(Context context,Uri selectedImage) {
    int rotation =0;
    ContentResolver content = context.getContentResolver();

    Cursor mediaCursor = content.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            new String[] { "orientation", "date_added" },null, null,"date_added desc");

    if (mediaCursor != null && mediaCursor.getCount() !=0 ) {
        while(mediaCursor.moveToNext()){
            rotation = mediaCursor.getInt(0);
            break;
        }
    }
    mediaCursor.close();
    return rotation;
} 
```

为避免大图像无法记忆，我建议您使用以下方法重新缩放图像：

```
private static final int MAX_HEIGHT = 1024;
private static final int MAX_WIDTH = 1024;
public static Bitmap decodeSampledBitmap(Context context, Uri selectedImage)
        throws IOException {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    InputStream imageStream = context.getContentResolver().openInputStream(selectedImage);
    BitmapFactory.decodeStream(imageStream, null, options);
    imageStream.close();

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, MAX_WIDTH, MAX_HEIGHT);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    imageStream = context.getContentResolver().openInputStream(selectedImage);
    Bitmap img = BitmapFactory.decodeStream(imageStream, null, options);

    img= rotateImageIfRequired(img, selectedImage);
    return img;
} 
```

由于 Android 操作系统问题，无法使用 ExifInterface 获取方向： [https ://code.google.com/p/android/issues/detail?id=19268](https://code.google.com/p/android/issues/detail?id=19268)

# webview - 如何在 viewpager 中使用 webview 平滑翻转

> ID：12227580
> 
> 赞同：2
> 
> 时间：2012-09-01T12:11:10.910
> 
> 标签：webview, scroll, android-viewpager

我有很多webviews要在viewpager中显示。每当我拖动webview时，都会执行invidate()来重绘。如果webview很复杂，重绘需要很长时间，所以滚动不流畅。我试过了在 webview 中使用 setDrawingCacheEnabled(true)，但它没有效果。有人有想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:21:21.617

一种想法是研究使用 PageChangeListener 来检测聚焦的视图，以及用户是否正在拖动视图。

PageChangeListener 中有一个方法覆盖，如下所示。您可以打开滚动状态来设置一个属性，让您知道什么时候可以重绘/实例化视图，什么时候不可以。

```
/**
 * Called when the scroll state changes. Useful for discovering when the user
 * begins dragging, when the pager is automatically settling to the current page,
 * or when it is fully stopped/idle.
 *
 * @param state The new scroll state.
 * @see ViewPager#SCROLL_STATE_IDLE
 * @see ViewPager#SCROLL_STATE_DRAGGING
 * @see ViewPager#SCROLL_STATE_SETTLING
 */
@Override
public void onPageScrollStateChanged(int state) {
    switch (state) {
    case ViewPager.SCROLL_STATE_IDLE:
        // Allow updating of views by view adapter
        this.isAnimating = false;
        break;
        /**
         * Indicates that the pager is currently being dragged by the user
         */
    case ViewPager.SCROLL_STATE_DRAGGING:
        // do not allow updating of views
        this.isAnimating = true;
        break;
        /**
         * Indicates that the pager is in the process of settling to a final position.
         */
    case ViewPager.SCROLL_STATE_SETTLING:
        this.isAnimating = true;
        break;
    }
} 
```

将 pagechangelistener 添加到 viewpager 很容易。

```
pageChangeListener = new PageChangeListener(viewIndicator, viewAdapter);
viewPager.setOnPageChangeListener(pageChangeListener); 
```

接下来，我将研究如何使用 webview 来防止它在用户主动滚动时重绘。想到的一种想法是在 Web 视图中覆盖无效，并且仅在用户不滚动且视图空闲时才使其无效。

# ruby-on-rails - 下拉值列表，从结果集中选择用作 Ruby in Rails 中的过滤器

> ID：12227581
> 
> 赞同：0
> 
> 时间：2012-09-01T12:11:14.873
> 
> 标签：ruby-on-rails

我有一个搜索结果表单，它返回类 Document 的 @documents 列表。一个文档有一个类型。一个类型有很多文档。

我在搜索结果上有一个下拉列表过滤器，可以根据类型过滤@document 列表，但目前，该列表包含所有可能的类型。如果该类型的列表中至少有一个文档，我只希望该类型出现在下拉列表中。

（状态有第二个下拉菜单，同样的问题适用）

这是我到目前为止所拥有的，但它正在返回所有类型。

```
<%= form_for :document_filter, :url => search_results_home_index_path, :html => {:class=>"form-inline"} do |f| %>
  <%= f.collection_select :document_type_id , DocumentType.alphabetically , :id,:name,{:prompt=>"Select document type"} %>
  <%= f.collection_select :document_status , Status.for_filter , :id,:name,{:prompt=>"Select document status"}  %>
  <%= f.submit "Go" %>
<%end%> 
```

Rails 有一个简单的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:25:01.790

您可以为包含文档的文档类型创建一个范围，如下所示（在 models/document_type.rb 中）：

```
scope :has_documents, lambda{
  joins(:documents).
  group("document_types.id")
} 
```

然后在您的 collection_select 中，使用范围：

```
 <%= f.collection_select :document_type_id , DocumentType.has_documents.alphabetically , :id,:name,{:prompt=>"Select document type"} %> 
```

（还没有尝试过，所以不能 100% 确定它会按原样工作）

# c++ - 单个MFC对话框上的OpenGL两个不同的3d渲染图片控件不起作用

> ID：12227586
> 
> 赞同：0
> 
> 时间：2012-09-01T12:11:41.690
> 
> 标签：c++, opengl, mfc, render

我正在使用 VC++ MFC 制作一个应用程序，其中我有两个不同的 opengl 窗口。我已按照[此处输入链接描述的教程进行操作](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c10975/Setting-Up-OpenGL-in-an-MFC-Control.htm)

我能够成功使用一个图片控件，其中 opengl 窗口显示正确的渲染，但如果我创建该控件的两个不同对象，则一个窗口不显示任何内容。

在这里解释更多是代码

m_WinGL 和 m_WinGL2 是 initDialog 内部自定义类的两个不同对象。

```
// Get size and position of the template textfield we created before in the dialog editor
CRect rect;
GetDlgItem(IDC_STATIC_GL)->GetWindowRect(rect);
ScreenToClient(rect);// Convert screen coordinates to client coordinates

m_WinGL.oglCreate(rect, this);// Create OpenGL Control window
m_WinGL.m_unpTimer = m_WinGL.SetTimer(1, 1, 0);// Setup the OpenGL Window's timer to render

GetDlgItem(IDC_STATIC_GL2)->GetWindowRect(rect);
ScreenToClient(rect);// Convert screen coordinates to client coordinates

m_WinGL2.oglCreate(rect, this,L"X");// Create OpenGL Control window
m_WinGL2.m_unpTimer = m_WinGL2.SetTimer(1, 1, 0);// Setup the OpenGL Window's timer to render 
```

这是自定义控件的类

头文件

```
#pragma once
#include "afxwin.h"

#include <gl/gl.h>
#include <gl/glu.h>

class COpenGLControl : public CWnd
{
    public:
        /******************/
        /* Public Members */
        /******************/
        UINT_PTR m_unpTimer;
        // View information variables
        float    m_fLastX;
        float    m_fLastY;
        float    m_fPosX;
        float    m_fPosY;
        float    m_fZoom;
        float    m_fRotX;
        float    m_fRotY;
        bool     m_bIsMaximized;

    private:
        /*******************/
        /* Private Members */
        /*******************/
        // Window information
        CWnd  *hWnd;
        HDC   hdc;          
        HGLRC hrc;          
        int   m_nPixelFormat;
        CRect m_rect;
        CRect m_oldWindow;
        CRect m_originalRect;

    public:
        COpenGLControl(void);
        virtual ~COpenGLControl(void);

        void oglCreate(CRect rect, CWnd *parent,CString strWindowName=L"OpenGl");
        void oglInitialize(void);
        void oglDrawScene(void);

        // Added message classes:
        afx_msg void OnPaint();
        afx_msg void OnSize(UINT nType, int cx, int cy);
        afx_msg void OnDraw(CDC *pDC);
        afx_msg int  OnCreate(LPCREATESTRUCT lpCreateStruct);
        afx_msg void OnTimer(UINT nIDEvent);
        afx_msg void OnMouseMove(UINT nFlags, CPoint point);

        DECLARE_MESSAGE_MAP()
}; 
```

.cpp 文件

```
 #include "stdafx.h"
    #include "OpenGLControl.h"

    COpenGLControl::COpenGLControl(void)
    {
        m_fPosX = 0.0f;     // X position of model in camera view
        m_fPosY = 0.0f;     // Y position of model in camera view
        m_fZoom = 10.0f;    // Zoom on model in camera view
        m_fRotX = 0.0f;     // Rotation on model in camera view
        m_fRotY = 0.0f;     // Rotation on model in camera view
        m_bIsMaximized = false;
    }

    COpenGLControl::~COpenGLControl(void)
    {
    }

    BEGIN_MESSAGE_MAP(COpenGLControl, CWnd)
        ON_WM_PAINT()
        ON_WM_SIZE()
        ON_WM_CREATE()
        ON_WM_TIMER()
        ON_WM_MOUSEMOVE()
    END_MESSAGE_MAP()

    void COpenGLControl::OnPaint()
    {
        //CPaintDC dc(this); // device context for painting
        ValidateRect(NULL);
    }

    void COpenGLControl::OnSize(UINT nType, int cx, int cy)
    {
        CWnd::OnSize(nType, cx, cy);

        if (0 >= cx || 0 >= cy || nType == SIZE_MINIMIZED) return;

        // Map the OpenGL coordinates.
        glViewport(0, 0, cx, cy);

        // Projection view
        glMatrixMode(GL_PROJECTION);

        glLoadIdentity();

        // Set our current view perspective
        gluPerspective(35.0f, (float)cx / (float)cy, 0.01f, 2000.0f);

        // Model view
        glMatrixMode(GL_MODELVIEW);

        switch (nType)
        {
            // If window resize token is "maximize"
            case SIZE_MAXIMIZED:
            {
                // Get the current window rect
                GetWindowRect(m_rect);

                // Move the window accordingly
                MoveWindow(6, 6, cx - 14, cy - 14);

                // Get the new window rect
                GetWindowRect(m_rect);

                // Store our old window as the new rect
                m_oldWindow = m_rect;

                break;
            }

            // If window resize token is "restore"
            case SIZE_RESTORED:
            {
                // If the window is currently maximized
                if (m_bIsMaximized)
                {
                    // Get the current window rect
                    GetWindowRect(m_rect);

                    // Move the window accordingly (to our stored old window)
                    MoveWindow(m_oldWindow.left, m_oldWindow.top - 18, m_originalRect.Width() - 4, m_originalRect.Height() - 4);

                    // Get the new window rect
                    GetWindowRect(m_rect);

                    // Store our old window as the new rect
                    m_oldWindow = m_rect;
                }

                break;
            }
        }
    }

    int COpenGLControl::OnCreate(LPCREATESTRUCT lpCreateStruct)
    {
        if (CWnd::OnCreate(lpCreateStruct) == -1) return -1;

        oglInitialize();

        return 0;
    }

    void COpenGLControl::OnDraw(CDC *pDC)
    {
        // If the current view is perspective...
        glLoadIdentity();

        glTranslatef(0.0f, 0.0f, -m_fZoom);
        glTranslatef(m_fPosX, m_fPosY, 0.0f);
        glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);
        glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);
    }

    void COpenGLControl::OnTimer(UINT nIDEvent)
    {
        switch (nIDEvent)
        {
            case 1:
            {
                // Clear color and depth buffer bits
                glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

                // Draw OpenGL scene
                oglDrawScene();

                // Swap buffers
                SwapBuffers(hdc);

                break;
            }

            default:
                break;
        }

        CWnd::OnTimer(nIDEvent);
    }

    void COpenGLControl::OnMouseMove(UINT nFlags, CPoint point)
    {
        int diffX = (int)(point.x - m_fLastX);
        int diffY = (int)(point.y - m_fLastY);
        m_fLastX  = (float)point.x;
        m_fLastY  = (float)point.y;

        // Left mouse button
        if (nFlags & MK_LBUTTON)
        {
            m_fRotX += (float)0.5f * diffY;

            if ((m_fRotX > 360.0f) || (m_fRotX < -360.0f))
            {
                m_fRotX = 0.0f;
            }

            m_fRotY += (float)0.5f * diffX;

            if ((m_fRotY > 360.0f) || (m_fRotY < -360.0f))
            {
                m_fRotY = 0.0f;
            }
        }

        // Right mouse button
        else if (nFlags & MK_RBUTTON)
        {
            m_fZoom -= (float)0.1f * diffY;
        }

        // Middle mouse button
        else if (nFlags & MK_MBUTTON)
        {
            m_fPosX += (float)0.05f * diffX;
            m_fPosY -= (float)0.05f * diffY;
        }

        OnDraw(NULL);

        CWnd::OnMouseMove(nFlags, point);
    }

    void COpenGLControl::oglCreate(CRect rect, CWnd *parent,CString strWindowName)
    {
        CString className = AfxRegisterWndClass(CS_HREDRAW | CS_VREDRAW | CS_OWNDC, NULL, (HBRUSH)GetStockObject(BLACK_BRUSH), NULL);

        CreateEx(0, className,strWindowName, WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN, rect, parent, 0);

        // Set initial variables' values
        m_oldWindow    = rect;
        m_originalRect = rect;

        hWnd = parent;
    }

    void COpenGLControl::oglInitialize(void)
    {
        // Initial Setup:
        //
        static PIXELFORMATDESCRIPTOR pfd =
        {
            sizeof(PIXELFORMATDESCRIPTOR),
            1,
            PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,
            PFD_TYPE_RGBA,
            32, // bit depth
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            16, // z-buffer depth
            0, 0, 0, 0, 0, 0, 0,
        };

        // Get device context only once.
        hdc = GetDC()->m_hDC;

        // Pixel format.
        m_nPixelFormat = ChoosePixelFormat(hdc, &pfd);
        SetPixelFormat(hdc, m_nPixelFormat, &pfd);

        // Create the OpenGL Rendering Context.
        hrc = wglCreateContext(hdc);
        wglMakeCurrent(hdc, hrc);

        // Basic Setup:
        //
        // Set color to use when clearing the background.
        glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        glClearDepth(1.0f);

        // Turn on backface culling
        glFrontFace(GL_CCW);
        glCullFace(GL_BACK);

        // Turn on depth testing
        glEnable(GL_DEPTH_TEST);
        glDepthFunc(GL_LEQUAL);

        // Send draw request
        OnDraw(NULL);
    }

    void COpenGLControl::oglDrawScene(void)
    {
        // Wireframe Mode
        glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);

        glBegin(GL_QUADS);
                // Front Side
                glVertex3f( 1.0f,  1.0f, 1.0f);
                glVertex3f(-1.0f,  1.0f, 1.0f);
                glVertex3f(-1.0f, -1.0f, 1.0f);
                glVertex3f( 1.0f, -1.0f, 1.0f);

                // Back Side
                glVertex3f(-1.0f, -1.0f, -1.0f);
                glVertex3f(-1.0f,  1.0f, -1.0f);
                glVertex3f( 1.0f,  1.0f, -1.0f);
                glVertex3f( 1.0f, -1.0f, -1.0f);

                // Top Side
                glVertex3f( 1.0f, 1.0f,  1.0f);
                glVertex3f( 1.0f, 1.0f, -1.0f);
                glVertex3f(-1.0f, 1.0f, -1.0f);
                glVertex3f(-1.0f, 1.0f,  1.0f);

                // Bottom Side
                glVertex3f(-1.0f, -1.0f, -1.0f);
                glVertex3f( 1.0f, -1.0f, -1.0f);
                glVertex3f( 1.0f, -1.0f,  1.0f);
                glVertex3f(-1.0f, -1.0f,  1.0f);

                // Right Side
                glVertex3f( 1.0f,  1.0f,  1.0f);
                glVertex3f( 1.0f, -1.0f,  1.0f);
                glVertex3f( 1.0f, -1.0f, -1.0f);
                glVertex3f( 1.0f,  1.0f, -1.0f);

                // Left Side
                glVertex3f(-1.0f, -1.0f, -1.0f);
                glVertex3f(-1.0f, -1.0f,  1.0f);
                glVertex3f(-1.0f,  1.0f,  1.0f);
                glVertex3f(-1.0f,  1.0f, -1.0f);
        glEnd();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:36:24.647

OpenGL 是一个线程全局上下文状态机。这意味着，您必须将当前线程的 OpenGL 上下文切换到正确的窗口，以便绘图命令最终到达您想要的位置。

在您进行 OpenGL 调用的每个成员函数中，放在开头

```
wglMakeCurrent(hdc, hrc); 
```

在你离开函数之前（即在最后，或者在返回之前）

```
wglMakeCurrent(NULL, NULL); 
```

顺便说一句：您可以为任意数量的窗口使用单个 OpenGL 上下文，只要它们共享相同的视觉属性，即，如果您`SetPixelFormatDescriptor`为每个希望上下文使用的窗口使用相同的 PFD 调用。

最后但并非最不重要的一点是，所有在中找到的代码`OnSize`和所有“基本设置”`onInitialize`都应放入绘图代码中。你`OnDraw`的也不是很有用。

# c# - WPF 按钮覆盖流

> ID：12227588
> 
> 赞同：0
> 
> 时间：2012-09-01T12:11:58.020
> 
> 标签：c#, wpf, xaml, .net-4.0, coverflow

我有这个 XAML：我`DataTemplate`为类 creditCard创建了一个

```
<Window.Resources>
    <DataTemplate x:Key="creditTemplate"
                  DataType="DataTemplate:MonthBill.creditCard">
        <Button Content="{Binding creditCardNumber}"
                Click="OpenCardBillings" />
    </DataTemplate>
</Window.Resources> 
```

在运行时，我`DataContext`使用信用卡列表更新，然后将项目控件绑定到数据上下文，并为每个项目生成按钮。

```
<ItemsControl x:Name="MainPanel"
              ItemTemplate="{StaticResource creditTemplate}"
              Margin="101,75,0,93"
              ClipToBounds="True"
              Width="408"
              HorizontalAlignment="Left"
              UseLayoutRounding="False"
              ItemsSource="{Binding}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Horizontal">
            </VirtualizingStackPanel>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

我想将此按钮创建到一个封面流，我找到了创建封面流的教程，但不是我在运行时创建的。有任何想法吗？

# android - 程序的按钮不起作用。为什么？

> ID：12227589
> 
> 赞同：0
> 
> 时间：2012-09-01T12:12:02.450
> 
> 标签：android, button

我正在阅读 Hello Android 书，我正在 eclipse 中编写书中的代码，但按钮不起作用。这是为什么？

数独/src/org.example.sudoku/Sudoku.java

```
package org.example.sudoku;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class Sudoku extends Activity implements OnClickListener {
private static final String TAG = "Sudoku";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up click listeners for all the buttons
    View continueButton = findViewById(R.id.continue_button);
    continueButton.setOnClickListener(this);
    View newButton = findViewById(R.id.new_button);
    newButton.setOnClickListener(this);
    View aboutButton = findViewById(R.id.about_button);
    aboutButton.setOnClickListener(this);
    View exitButton = findViewById(R.id.exit_button);
    exitButton.setOnClickListener(this);
 }

 // ...
 public void onClick(View v) {
     switch (v.getId()) {
     case R.id.about_button:
         Intent i = new Intent(this, About.class);
         startActivity(i);
         break;
     // More buttons go here (if any) ...

     }
  }
} 
```

数独/src/org.example.sudoku/About.java

```
package org.example.sudoku;

import android.app.Activity;
import android.os.Bundle;

public class About extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);
}
 } 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.example.sudoku"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
             android:name=".MainActivity"
             android:label="@string/title_activity_main" >
             <intent-filter>
                  <action android:name="android.intent.action.MAIN" />

                  <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
        </activity>
        <activity android:name=".About"
            android:label="@string/about_label">     
        </activity>            

    </application>

 </manifest> 
```

我单击关于按钮，但不工作且不运行活动。如果您需要其他程序文件，请告诉我。请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:13:46.847

试试这个。**在您编写 MainActivity 的清单文件中，请将其更改为数独。**

对于此错误无法从视图转换为按钮

您需要将视图转换为 Button：

```
Button aboutButton  = (Button)findViewById(android.R.id.aboutButton ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:26:49.030

您可以尝试使用特定的 Button 类：

```
Button aboutButton = (Button) findViewById(R.id.about_button);
aboutButton.setOnClickListener(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:29:44.397

首先将所有视图更改为按钮

```
Button continueButton = (Button) findViewById(R.id.continue_button); 
```

**AND SECOND 将点击事件中的活动上下文作为**

```
public void onClick(View v) {
     switch (v.getId()) {
     case R.id.about_button:
         Intent i = new Intent(Sudoku.this, About.class);
    /////////       change here ^^^^^^^^^^^     
         startActivity(i);
         break;
     // More buttons go here (if any) ...

     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T07:52:08.623

在 activity_main.xml 文件中，你应该声明你的按钮，

```
<Button
    android:id="@+id/about_button"
    android:layout_width="319dp"
    android:layout_height="wrap_content"
    android:text="About" /> 
```

然后在你的课上，sudoku.java，

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up click listeners for all the buttons

    Button aboutButton = (Button) findViewById(R.id.about_button);
    aboutButton.setOnClickListener(new View.OnClickListener() 
{
            @Override
            public void onClick(View v) 
            {
                            //Code for whatever you want to perform on this button click
                        }
 } 
```

# mysql - 对对象的信息进行排序，使用 php 排序方法或 mysql

> ID：12227590
> 
> 赞同：0
> 
> 时间：2012-09-01T12:12:05.963
> 
> 标签：mysql, sorting, temp

我从 API 中提取信息，信息以对象数组的形式呈现，我循环并提取我需要的信息，有时它涉及从多个对象中提取，例如我可能想从用户对象中提取用户名，然后从活动对象该用户工作了多少小时。

我用 php 编码，我可以显示信息，但我希望能够钻取和排序信息，所以我想创建一个 Mysql 临时表，插入所有值并以我喜欢的任何方式对它们进行排序。

那是最好的选择吗，这是一个时钟系统，所以我将是运行报告的主要系统，所以速度并不是真正的问题，其中一些查询很简单，有些更复杂，但只谈论 100-200 条记录一天，并且在大多数情况下，我只对 1-2 个月的数据运行查询，只有几千条记录。

我使用 SQL 的主要原因是轻松地按日期、从、之间、在类型之后排序。还有什么是处理删除临时表的最佳方法，我认为每隔几天删除一次就足够了。

还有一件事我不确定，假设我的大部分报告将在过去 60 天运行，默认情况下我应该基本上在过去 60 天运行报告，当有人在这 60 天内过滤它时，它会告诉我相关的来自临时表的数据，基本上一遍又一遍地重复使用这些信息。然后我可以输入一个 IF 语句，如果起始日期超过 60 天，我需要再次从 api 中提取所有信息并执行另一个新的临时表，或者我应该一直将所有数据加载到 mySQL 中并过滤为我想使用具有 1 个大型初始查询的同一张表？

FWIW 从 api 检索信息是最慢的部分，似乎是几秒钟的延迟，因此直接使用来自 SQL 的信息应该更顺畅。

我是 SQL 新手，所以我不确定最好的解决方案是什么，我可能会偏离我所采取的方法，所以我基本上是在寻找最有效的选项，以最大限度地减少编码并且对新手友好。我在 php 中编码 btw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:45:55.850

SQL 通常是一种很好的创建报告的语言。您是否总是可以从 API 中提取您需要的所有数据，即如果您运行过去两个月的报告，API 是否提供所有历史信息？如果没有，您将不得不定期检索数据并将其存储在数据库中。另一方面，如果您拥有所需的所有数据，PHP 也可以很好地过滤和排序数据，如果您省略数据库部分会容易得多。

# jvm - JNLP 安装扩展 JAR

> ID：12227593
> 
> 赞同：0
> 
> 时间：2012-09-01T12:12:18.927
> 
> 标签：jvm, java, jnlp, java-web-start

我们在使用 webstart 部署 Java 客户端时需要打包一个扩展 jar 文件。扩展 jar 需要安装在`jre/lib/ext`WebStart 启动时，并使其可供 java 客户端使用。

我设法将文件复制到正确的位置，但我面临的问题是，在我安装了扩展 jar 之后`lib/ext`，我需要重新启动客户端 JVM 才能获取新的 jar。

如何避免需要重启 JVM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:55:40.997

> 如何避免需要重启 JVM？

你不能AFAIU。类加载器通常不会重新加载类或其他资源，我想改变引导程序和其他与 JRE 相关的类加载器（或尽快改变它们以产生影响）是不可能或不切实际的。

另一种策略可能是：

*   检查资源是否存在
*   如果未找到，则假定它们是使用`installer-desc`此运行的扩展安装的，并且：
    *   使用 JNLP URL调用[`BasicService.showDocument(URL)`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/BasicService.html#showDocument%28java.net.URL%29)以启动新实例。
    *   调用`System.exit(0)`当前实例来结束它。

弹出`JOptionPane`确认重启可能会有所帮助。例如

> 要立即编码 OGG，请重新启动应用程序。
> 重新开始？
> 
> `OK` `Cancel`

作为旁白。通常建议***不要***将档案放入 JRE 的任何目录中。

# javascript - Unary Plus/Number(x) 和 parseFloat(x) 有什么区别？

> ID：12227594
> 
> 赞同：192
> 
> 时间：2012-09-01T12:12:31.683
> 
> 标签：javascript, optimization

我问这个只是为了节省几个字节。

我知道我可以使用`+x`(unary plus) 而不是`Number(x)`. 那些 和 有区别`parseFloat`吗？

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2012-12-03T02:13:23.710

## parseFloat 和 Number 的区别

`parseFloat`/`parseInt`用于解析字符串，而`Number`/`+`用于将值强制为数字。他们的行为不同。但首先让我们看看它们在哪里表现相同：

```
parseFloat('3'); // => 3
Number('3'); // => 3
parseFloat('1.501'); // => 1.501
Number('1.501'); // => 1.501
parseFloat('1e10'); // => 10000000000
Number('1e10'); // => 10000000000 
```

因此，只要您有标准的数字输入，就没有区别。但是，如果您的输入以数字开头，然后包含其他字符，`parseFloat`则将数字从字符串中截断，同时`Number`给出`NaN`（不是数字）：

```
parseFloat('1x'); // => 1
Number('1x'); // => NaN 
```

此外，`Number`理解十六进制输入，`parseFloat`但不理解：

```
parseFloat('0x10'); // => 0
Number('0x10'); // => 16 
```

但是`Number`对于空字符串或仅包含空格的字符串会表现得很奇怪：

```
parseFloat(''); // => NaN
Number(''); // => 0
parseFloat(' \r\n\t'); // => NaN
Number(' \r\n\t'); // => 0 
```

总的来说，我觉得`Number`更合理，所以我几乎总是`Number`亲自使用（你会发现很多内部 JavaScript 函数`Number`也使用）。如果有人键入`'1x'`，我更愿意显示错误，而不是将其视为他们键入了`'1'`. 我真正例外的唯一一次是当我将样式转换为数字时，在这种情况下`parseFloat`很有帮助，因为样式以类似的形式出现`'3px'`，在这种情况下，我想删除`'px'`部分并获得`3`，所以我觉得`parseFloat`很有帮助这里。但实际上，您选择哪一种取决于您以及您想接受哪种形式的输入。

请注意，使用一元运算`+`符与使用函数完全相同`Number`：

```
Number('0x10'); // => 16
+'0x10'; // => 16
Number('10x'); // => NaN
+'10x'; // => NaN
Number('40'); // => 40
+'40'; // => 40 
```

所以我通常只是简单地使用`+`。只要你知道它的作用，我觉得它很容易阅读。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-01T12:20:28.330

不同之处在于当输入不是“正确的数字”时会发生什么。在“尽可能多地”解析时`Number`返回。如果在 parseFloat 返回时调用空字符串返回。`NaN``parseFloat``Number``0``NaN`

例如：

```
Number("") === 0               // also holds for false
isNaN(parseFloat("")) === true // and null

isNaN(Number("32f")) === true
parseFloat("32f") === 32 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-01T12:21:16.293

在这些示例中，您可以看到不同之处：

```
Number('') = 0;
Number(false) = 0;
Number('1a') = NaN;

parseFloat('') = NaN;
parseFloat(false) = NaN;
parseFloat('1a') = 1; 
```

parseFloat 有点慢，因为它在字符串中搜索数字的第一次出现，而 Number 构造函数从包含带有空格的数值或包含假值的字符串创建一个新的数字实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T12:16:14.930

对于空字符串，它们是不同的。

`+""`并`Number("")`返回 0，而`parseFloat("")`返回 NaN。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-01T12:17:20.450

据我所知，这只是从同事那里听到的，所以可能完全不知情， parseFloat 稍微快一点。

尽管在进一步研究中，这种性能差异似乎取决于浏览器。

[http://jsperf.com/parseint-vs-parsefloat/6](http://jsperf.com/parseint-vs-parsefloat/6)

看看这些 jsPerf 结果，然后就可以打电话了。（它也包括 +x 测试）

正如@xdazz 的回答中所述，`+""`并在`Number("")`返回`0`时`parseFloat("")`返回`NaN`，所以我会再次使用 parseFloat，因为空字符串并不表示数字 0，只有带有字符的字符串`"0"`表示 0；

# python - Yacc - 具有函数支持的方程解析器

> ID：12227597
> 
> 赞同：2
> 
> 时间：2012-09-01T12:12:42.850
> 
> 标签：python, function, grammar, yacc, lex

我正在尝试为以下等式编写一个等式解析器：`4*sin(1+cos(10/2))` 我`lex`用来获取令牌并`yacc`作为解析器模块。

我现在的实际问题是我不知道如何定义函数的语法。一个函数通常是这样构造的，`FunctionName( Expression)`所以对于解析器语法来说`function : FUNCTION LPAREN expression RPAREN`（我希望）。

但是我将如何处理这样构建的功能`sin(3+cos(0)*10)`。这将是一个函数中的一个函数，不要忘记关心`3+`and `*10`。希望我已经指出我的问题足够好。

这是我的代码：

```
import ply.lex as lex
import ply.yacc as yacc
import math

tokens = (
    'DIV',
    'TIMES',
    'MINUS',
    'PLUS',
    'FUNCTION',
    'NUMBER',
    'LPAREN',
    'RPAREN',
)

t_PLUS = r'\+'
t_MINUS = r'-'
t_TIMES = r'\*'
t_DIV = r'/'
t_LPAREN = r'\('
t_RPAREN = r'\)'

t_ignore = ' '

def t_NUMBER(t):
    r'([0-9]*\.[0-9]+|[0-9]+)'
    t.value = float(t.value)
    return t

def t_FUNCTION(t):
    r'sin|cos|tan'
    return t

def t_error(t):
    print("Illegal character '%s'" % t.value[0])
    t.lexer.skip(1)

# Parser
'''
Here i need some help
'''
def p_function_exp(p):
    'function : expression PLUS function'
    p[0] = p[1] + p[3]

def p_function(p):
    'function : FUNCTION LPAREN expression RPAREN'
    if p[1] == 'sin':
        p[0] = math.sin(p[3])

def p_expression_minus(p):
    'expression : expression MINUS term'
    p[0] = p[1] - p[3]

def p_expression_plus(p):
    'expression : expression PLUS term'
    p[0] = p[1] + p[3]

def p_expression_term(p):
    'expression : term'
    p[0] = p[1]

def p_term_div(p):
    'term : term DIV factor'
    p[0] = p[1] / p[3]

def p_term_times(p):
    'term : term TIMES factor'
    p[0] = p[1] * p[3]

def p_term_factor(p):
    'term : factor'
    p[0] = p[1]

def p_factor(p):
    'factor : NUMBER'
    p[0] = p[1]

def p_factor_exp(p):
    'factor : LPAREN expression RPAREN'
    p[0] = p[2]

# Error rule for syntax errors
def p_error(p):
    print("Syntax error in input!")

# Build the parser
parser = yacc.yacc()

while True:
    try:
        s = input('>> ')
        equation = lex.lex()
        equation.input(s)
        while True:
            tok = equation.token()
            if not tok: break
            print(tok)
    except EOFError:
        break
    if not s: continue
    result = parser.parse(s)
    print(result) 
```

提前致谢！约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:24:26.707

用于简单表达式的传统 Yacc 语法通常如下所示：

```
expression
    : add_sub_expr
    ;

add_sub_expr
    : mul_div_expr
    | mul_div_expr '+' add_sub_expr
    | mul_div_expr '-' add_sub_expr
    ;

mul_div_expr
    : funcall_expr
    | funcall_expr '*' mul_div_expr
    | funcall_expr '/' mul_div_expr
    ;

funcall_expr
    : prim_expr
    | FUNCTION_NAME '(' expression_list ')'
    ;

prim_expr
    : NUMBER
    | '(' expression ')'
    ;

expression_list
    : expression
    | expression ','  expression_list
    ; 
```

上述语法将使函数调用成为表达式的直接部分，其优先级高于乘法和除法。

因为`FUNCTION_NAME`您可以为每个函数各有一行（如果您的函数列表很短），或者一个包含函数标识符列表的非终端，或者一个特殊终端（如我的语法中）或只是一个通用标识符终端.

# javascript - 如何在 Indesign JavaScript 中访问 MSO 幻灯片控件

> ID：12227598
> 
> 赞同：2
> 
> 时间：2012-09-01T12:12:53.060
> 
> 标签：javascript, controls, slideshow, adobe-indesign

**如何访问幻灯片控件。**

```
function mso_html_convertion_slide_show() {

        var mso_total_count = MSO.states.length;

          for (var i = 0; i < mso_total_count; i++) {

             MSO.states[i].name;
       }

} 
```

![在此处输入图像描述](../Images/b1c79663dcc34974a150e0eab057914d.png)

谢谢，

# algorithm - 可逆排序算法？

> ID：12227599
> 
> 赞同：2
> 
> 时间：2012-09-01T12:12:56.183
> 
> 标签：algorithm, sorting

有谁知道一种可逆的排序算法？所以鉴于此：

5,39,196,0,15,243

排序将创建：

0,5,15,39,196,243

然后在不需要知道任何知识的情况下反转它，除了可能使用了哪种排序算法以及运行了多少次迭代，它会回到：

5,39,196,0,15,243

我突然想到冒泡排序可能会奏效——只要我知道排序必须运行多少次，我可能只需将步骤反转该次数即可回到原来的状态。还有其他人吗？

这是一个实验，所以时间复杂度不是问题（我不在乎它有多慢）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:34:27.210

通常一个排序算法需要 n 个以上的步骤（通常是 O(nlogn)）来对 n 个项目进行排序。这意味着您最好保留副本（这只是 n < O(nlogn)）。

如果副本太多（对象太大），您可以按初始顺序保留一组引用（指针或 ID）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:20:46.290

如果您真的不关心运行时效率，可以使用[Permutation Sort](http://rosettacode.org/wiki/Sorting_algorithms/Permutation_sort)。

它将生成列表的所有排列，并检查哪个排列对列表进行了排序。如果您知道在找到排序列表之前已经运行了多少轮，那么您确切地知道为了到达那里而交换了哪些值。

如果您在未排序的列表上运行它并且必须运行 50 轮才能到达已排序的列表，您将确切地知道交换了哪些元素以到达那里并且可以反转排序。

# iphone - 如何防止覆盖 UITableViewCell 中的值？

> ID：12227611
> 
> 赞同：0
> 
> 时间：2012-09-01T12:14:09.753
> 
> 标签：iphone, objective-c, ios, uitableview

当我选择 UISegmentControl 的按钮时，我在另一个视图控制器上传递了两个 UITextField 值。这些值存储在 NSMutableDictionary 中。我将 NSMutableDictionary 存储在 NSMutableArray 中。

我的问题是，当我第二次传递值然后从 NSMutableDictionary 中删除前一个值时，只显示最后传递的值。

这是我写的代码：

```
-(IBAction)actionOfSaveandSettingSegment:(id)sender
{
    switch ([self.SaveSgCon selectedSegmentIndex])
    {
        case 0:
        {
                UILocalNotification *localNotiStr = [[[UILocalNotification alloc] init] autorelease];
                localNotiStr.fireDate = self.DatePicker.date;
                localNotiStr.alertBody = @"Please Get Up With New Dream...!!!";
                localNotiStr.alertAction=@"View";
                localNotiStr.soundName = UILocalNotificationDefaultSoundName;

               [UIApplication sharedApplication].applicationIconBadgeNumber = [[UIApplication sharedApplication]applicationIconBadgeNumber]+1;
                [[UIApplication sharedApplication] scheduleLocalNotification:localNotiStr];

                SaveAlarmViewController *addView=[[SaveAlarmViewController alloc] init];
                addView.alarmNm=self.alaramName.text;
                addView.alarmTime=self.alaramTime.text;
                addView.notificationsArray=[[UIApplication sharedApplication] scheduledLocalNotifications];
                [self.navigationController pushViewController:addView animated:YES];
                [addView release];

           break;
        }
        default:
            NSLog(@"InValid Selection..!!!");
    }
} 
```

SaveAlarmViewController.h

```
#import <UIKit/UIKit.h>

@interface SaveAlarmViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>
{
    NSString *alarmNm;
    NSString *alarmTime;

    IBOutlet UITableView *tblAlarmList;
    NSMutableDictionary *AlarmDataDictonry;

    NSArray *notificationsArray;
    NSMutableArray *alramArr;

}

@property(nonatomic,retain)NSMutableArray *alramArr;
@property(nonatomic,retain)NSArray *notificationsArray;
@property(nonatomic,retain)NSString *alarmNm;
@property(nonatomic,retain)NSString *alarmTime;
@property(nonatomic,retain)UITableView *tblAlarmList;
@property(nonatomic,retain)NSMutableDictionary *AlarmDataDictonry;

@end 
```

SaveAlarmViewController.m

```
- (void)viewDidLoad
{
    self.AlarmDataDictonry=[[NSMutableDictionary alloc] init];
    self.alramArr=[[NSMutableArray alloc] init];
    [self.AlarmDataDictonry setObject:self.alarmNm forKey:@"ALARM_NAME"];
    [self.AlarmDataDictonry setObject:self.alarmTime forKey:@"ALARM_TIME"];    
    [self.alramArr addObject:self.AlarmDataDictonry];

   [super viewDidLoad];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.alramArr count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
            NSString *strRowNo=[NSString stringWithFormat:@"%d )",indexPath.row+1];

            UILabel * rowCount = [[UILabel alloc] initWithFrame:CGRectMake(07,20,25,25)];
            rowCount.text = strRowNo;

            [cell.contentView addSubview:rowCount];
    }

    UILabel * firstNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(50,20,100,25)];
    firstNameLabel.text = [[self.alramArr objectAtIndex:indexPath.row] objectForKey:@"ALARM_NAME"];

    UILabel * lastNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(50,70, 100, 25)];
    lastNameLabel.text = [[self.alramArr objectAtIndex:indexPath.row] objectForKey:@"ALARM_TIME"];

      [cell.contentView addSubview:firstNameLabel];
    [cell.contentView addSubview:lastNameLabel];

    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
     return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:51:30.157

每次`SaveAlarmViewController`加载时，它都会创建一个`self.alramArr`只有一个字典的新数组。因此，表格视图将始终只显示一行。

您应该将数组与`SaveAlarmViewController`. 然后您可以向数组中添加一个项目并将整个数组传递给视图控制器以将其显示为表格。

# ruby-on-rails - 停止记录 ActionController::RoutingError Rails 3.2

> ID：12227613
> 
> 赞同：8
> 
> 时间：2012-09-01T12:14:22.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, passenger

如何禁用**ActionController::RoutingError**错误的日志记录？
我的生产日志文件充满了搜索 phpMyAdmin 和其他内容的**机器人。**
然后忽略真正的应用程序错误。
请帮忙。我正在运行 Rails 3.2 和乘客。

在我的 routes.rb 中，我将所有其他 url 映射到`get ":code" => "shared#code"`，然后，如果找不到，我会显示一个带有消息的页面。但是当机器人搜索 url 之类的 url 时`http://mywebsite.com/phpMyAdmin/index.php`，会显示经典的错误页面“您要查找的页面不存在。”。没关系。但我只是不想在日志文件中记录这些错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-01T12:40:08.713

记录/显示错误的是`ActionDispatch::DebugExceptions`中间件。您可以只覆盖该`log_error`方法，例如将其粘贴在初始化程序中：

```
class ActionDispatch::DebugExceptions
  alias_method :old_log_error, :log_error
  def log_error(env, wrapper)
    if wrapper.exception.is_a?  ActionController::RoutingError
      return
    else
      old_log_error env, wrapper
    end
  end
end 
```

# java - 编译/打开 Eclipse 捆绑插件

> ID：12227616
> 
> 赞同：1
> 
> 时间：2012-09-01T12:14:57.080
> 
> 标签：java, eclipse, plugins, jar

我已经下载了 Eclipse 4.2 (Juno)，我想对其进行一些更改。

我可以看到它的插件文件夹包含插件的源代码，例如：`org.eclipse.ui.workbench.source_3.103.0.v20120530-1824.jar`

我在 java 文件中找到了我想更改的内容，但我不知道如何将该 jar 文件作为 Eclipse 项目打开。

我已经尝试从 CVS repo 中检出插件`dev.eclipse.org`，但是在将其导出为 jar 文件后，Eclipse 没有启动。

那么你能告诉我导入/打开 Eclipse 内置插件，编译它们，然后用它们覆盖现有的 jar 文件的确切过程是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:24:01.083

您刚刚导入`existing project`工作区。在导入对话框中选择`from archived file`.

安装插件的建议方法是使用`update site`. 然后你应该创建/导入`feature project`和`update site project`. 但这不是必需的，您可以将 jar 放入`plugins`文件夹中。

请注意，当您在工作台中作为 eclipse 项目运行时，新工作台是使用已安装的项目插件创建的。

但是，这个 jar 文件有不同的用途，可以作为源 jar 附加到库二进制 jar 中。

# javascript - javascript嵌套数组

> ID：12227620
> 
> 赞同：3
> 
> 时间：2012-09-01T12:16:06.147
> 
> 标签：javascript, arrays, nested, push

嗨，我想在我的 javascript 函数中使用嵌套数组，但它不起作用。这是我的功能：

```
var arr = [];

function test(id, value){
   arr.push(new Array("id" = id, "value" = value));
} 
```

所以当你发现我想创建这样的东西时：

```
arr[0][id = "example0", value = "value0"];
arr[1][id = "example1", value = "value1"];
arr[2][id = "example2", value = "value2"];
... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T12:17:36.490

因为`new Array("id" = id, "value" = value)`不是数组。

您想要一个包含对象的数组。

```
arr.push({"id":id, "value":value}); 
```

读取值

```
console.log(arr[0].id); 
```

# c++ - 如何禁用 Xcode C++11 警告？

> ID：12227622
> 
> 赞同：1
> 
> 时间：2012-09-01T12:16:19.827
> 
> 标签：c++, xcode, c++11, compiler-warnings

有没有办法可以禁用这些警告？ ![警告](../Images/7fbd6d233a5a578e85e7aa073f3fb480.png)

他们有点惹恼我，因为它总是打开问题导航器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:57:54.440

您应该更改项目的设置以允许使用 C++11。

这是[一个答案的链接，它解释了它是如何完成的](https://stackoverflow.com/a/7791906/335858)。

# php - 如何在 PHP 中为取决于用户输入的长查询显示 MySQL 错误？

> ID：12227626
> 
> 赞同：31
> 
> 时间：2012-09-01T12:16:46.300
> 
> 标签：php, mysql, mysqli

在 PHP 中，我试图执行一个取决于用户输入的长 MySQL 查询。但是，我的查询失败并显示以下消息，

```
"Query Failed". 
```

实际上，每当查询失败时，我都会打印此消息，但我很难找到此失败背后的原因。不幸的是，我找不到它，因为网页上没有指定错误。有没有办法在网页上显示导致失败的错误消息？

这是我的代码，

```
$from = "Findings";
$where = "";

if ($service != null)
{
    $from = $from . ", ServiceType_Lookup";
    $where= "Findings.ServiceType_ID= ServiceType_Lookup.ServiceType_ID AND ServiceType_Name= ". $service;

    if ($keyword != null)
        $where= $where . " AND ";
}

if ($keyword != null)
{
    $where= $where . "Finding_ID LIKE '%$keyword%' OR
                     ServiceType_ID LIKE '%$keyword%' OR
                     Title LIKE '%$keyword%' OR
                     RootCause_ID LIKE '%$keyword%' OR
                     RiskRating_ID LIKE '%$keyword%' OR
                     Impact_ID LIKE '%$keyword%' OR
                     Efforts_ID LIKE '%$keyword%' OR
                     Likelihood_ID LIKE '%$keyword%' OR
                     Finding LIKE '%$keyword%' OR
                     Implication LIKE '%$keyword%' OR
                     Recommendation LIKE '%$keyword%' OR
                     Report_ID LIKE '%$keyword%'";
}

$query = "SELECT Finding_ID,
                 ServiceType_ID,
                 Title,
                 RootCause_ID,
                 RiskRating_ID,
                 Impact_ID,
                 Efforts_ID,
                 Likelihood_ID,
                 Finding,
                 Implication,
                 Recommendation,
                 Report_ID  FROM ".$from . " WHERE " . $where;

echo "wala 2eshiq";

$this->result = $this->db_link->query($query);
if (!$this->result) {
    printf("Query failed: %s\n", mysqli_connect_error());
    exit;
}

$r = mysqli_query($this->db_link, $query);
if ($r == false)
    printf("error: %s\n", mysqli_errno($this->db_link)); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-01T12:19:39.547

用这个：

```
mysqli_query($this->db_link, $query) or die(mysqli_error($this->db_link)); 
# mysqli_query($link,$query) returns 0 if there's an error.
# mysqli_error($link) returns a string with the last error message 
```

您也可以使用它来打印错误代码。

```
echo mysqli_errno($this->db_link); 
```

看看[这里](http://www.nusphere.com/kb/phpmanual/function.mysqli-error.htm)和[这里](http://php.net/manual/en/mysqli.error.php)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-16T18:30:29.560

我使用以下命令打开 MySQLi 的所有错误报告

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); 
```

***注意：**不要在生产环境中使用它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-01T12:21:10.440

使用函数[die()](http://php.net/manual/en/function.die.php)：

```
or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:27:16.957

这些建议不起作用，因为它们适用于标准 MySQL 驱动程序，而不适用于 mysqli：

`$this->db_link->error`如果确实发生了错误，则包含错误

或者

```
mysqli_error($this->db_link) 
```

将工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-11T04:48:29.937

Try something like this:

```
$link = @new mysqli($this->host, $this->user, $this->pass)
$statement = $link->prepare($sqlStatement);
                if(!$statement)
                {
                    $this->debug_mode('query', 'error', '#Query Failed<br/>' . $link->error);
                    return false;
                } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-12T08:15:46.183

对您有用的一行代码是：

```
$sql = "Your SQL statement here";
$result = mysqli_query($this->db_link, $sql) or trigger_error("Query Failed! SQL: $sql - Error: ".mysqli_error($this->db_link), E_USER_ERROR); 
```

此方法优于`die`，因为您可以将其用于开发和生产。这是永久的解决方案。

# java - 通过 Apache Camel 获取消息？

> ID：12227627
> 
> 赞同：-1
> 
> 时间：2012-09-01T12:16:55.460
> 
> 标签：java, activemq, apache-camel

我必须在 activemq 的消费者端集成骆驼。我已经设置了activemq并尝试在消费者语言上配置camel（使用java DSL），但它对我不起作用。这是代码：

```
public class TestConsumer {
    static String url = ActiveMQConnection.DEFAULT_BROKER_URL;
    static String subject = "Test-AMQ";

    public static void main(String[] args) throws Exception {
        CamelContext context = new DefaultCamelContext();
        BrokerService broker = new BrokerService();
        //broker.addConnector(url);
        //broker.setBrokerName("localhost");
        broker.start();

        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory("vm://localhost?create=false&waitForStart=10000");
        context.addComponent("jms", JmsComponent.jmsComponentAutoAcknowledge(connectionFactory));
        context.addRoutes(new Routes());
        context.start();
    }
}

class Routes extends RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("jms:"+new TestConsumer().subject).process(new Processor() {
            @Override
            public void process(Exchange arg0) throws Exception {
                System.out.println("Camel Test Message: " + arg0.toString());
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T07:52:13.750

一个与您类似的示例。

```
import org.apache.activemq.ActiveMQConnection;
//import org.apache.activemq.broker.BrokerService;
import org.apache.activemq.camel.component.ActiveMQComponent;
import org.apache.camel.CamelContext;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.impl.DefaultCamelContext;

public class TestConsumer {
  static String url = ActiveMQConnection.DEFAULT_BROKER_URL;
  static String subject = "Test-AMQ";

public static void main(String[] args) throws Exception {
    CamelContext context = new DefaultCamelContext();
  //  BrokerService broker = new BrokerService();

  //  broker.start();

    ActiveMQComponent comp = ActiveMQComponent.activeMQComponent("vm://localhost?broker.persistent=false");
    context.addComponent("jms",comp); 
    context.addRoutes(new Routes());
    context.start();        
}
}

class Routes extends RouteBuilder {
@Override
public void configure() throws Exception {
    from("jms:"+TestConsumer.subject).process(new Processor() {
        @Override
        public void process(Exchange arg0) throws Exception {
            System.out.println("Camel Test Message: " + arg0.toString());
        }
    });

    from("timer://foo?fixedRate=true&period=2000").setBody(simple("Hello, World")).to("jms:"+TestConsumer.subject);
}
} 
```

不过，不确定您希望设置最终如何工作。使用虚拟机传输实际上不需要您启动专用代理，而是使用虚拟机实例。我只是放置了一个计时器路由来触发一些示例消息到该 ActiveMQ 队列，这些消息将被消耗。

# c# - 在网络浏览器中收听 UDP 或 TCP

> ID：12227632
> 
> 赞同：0
> 
> 时间：2012-09-01T12:18:13.647
> 
> 标签：c#, javascript, node.js, google-chrome, webserver

有没有办法在浏览器中启动网络服务器？

我需要能够接受来自另一台计算机上运行的 c# 的连接，我真的不在乎我使用什么技术，只要我可以在“服务器”浏览器上触发 javascript 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:58:04.150

您无法在浏览器中启动“真正的”网络服务器（没有 API，出于安全原因，您不允许绑定和侦听 TCP 端口）。但是，如果您连接到充当“总线”并将消息转发给您的 HTTP 服务器，那么您本质上具有相同的功能。这就是[浏览器](http://browserver.org/)的工作原理。

# ruby-on-rails - 如何访问 Rack 中间件的特定实例？

> ID：12227633
> 
> 赞同：4
> 
> 时间：2012-09-01T12:18:13.320
> 
> 标签：ruby-on-rails, rack

在我的 Rails 3.2 应用程序中，我必须在某个类类型的中间件实例上调用一个方法。

我尝试使用`Rails.application.middleware`，但这不起作用，因为它只包装中间件*类*而不是它们的实例。

现在我正在从`Rails.application.app`使用 Ruby 的`instance_variable_get`and开始走中间件链`is_a?`，但这感觉不对，特别是因为没有指定的中间件存储上下文的方式。例如`Rack::Cache::Context`，将下一个实例存储在一个名为的变量中`@backend`，而大多数其他实例使用`@app`.

有没有更好的方法来查找中间件实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T19:35:36.233

您可以让中间件将自身添加到机架环境中，如下例所示：

```
require 'rack'

class MyMiddleware
  attr_accessor :add_response
  def initialize app
    @app = app
  end
  def call env
    env['my_middleware'] = self # <-- Add self to the rack environment
    response = @app.call(env)
    response.last << @add_response
    response
  end
end

class MyApp
  def call env
    env['my_middleware'].add_response = 'World!' # <-- Access the middleware instance in the app
    [200, {'Content-Type'=>'text/plain'}, ['Hello']]
  end
end

use MyMiddleware
run MyApp.new 
```

# r - ggplot中按比例大小的符号

> ID：12227634
> 
> 赞同：9
> 
> 时间：2012-09-01T12:18:15.130
> 
> 标签：r, ggplot2

使用 ggplot 绘制比例区域符号似乎需要使用`sqrt()`来实现真正的比例：

```
require(ggplot2)

t <- data.frame(x=rep(c(1:5),5), y=rep(c(1:5),each=5), s=round(seq(1,100,length.out=25)))
t
p <- ggplot(data=t, aes(x=x,y=y))

# direct size-to-variable mapping
p + geom_point(aes(size=s), pch=22, fill='#0000FF75', col=NA) +
  scale_size(range = c(1, 40)) +
  geom_text(data=t, aes(x=x,y=y,label=s),size=3,vjust=1)

# proportional area size-to-variable mapping
p + geom_point(aes(size=sqrt(s)), pch=22, fill='#0000FF75', col=NA) +
  scale_size(range = c(1, 40)) +
  geom_text(data=t, aes(x=x,y=y,label=s),size=3,vjust=1) 
```

![在此处输入图像描述](../Images/9f4771d9b583c3da41191298187d6269.png)

正如您所看到的，当我需要它们显示原始数据时，这些标签是植根的。尝试使用 scale_size 选项，但没有任何效果。任何人都知道解决这个问题，或者是否有一个模糊的设置来实现比例区域大小映射？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T13:28:29.683

您可以使用`scale_area`代替`scale_size`：

```
p + geom_point(aes(size=s), pch=22, fill='#0000FF75', col=NA) +
  scale_area(range = c(1, 40)) +
  geom_text(data=t, aes(x=x,y=y,label=s),size=3,vjust=1) 
```

![在此处输入图像描述](../Images/86d715edfd97e813c1b421afb5b93af2.png)

* * *

我同意，这不是很明显，但也不是那么模糊——`scale_area`在帮助中有一个例子`?scale_size`。

# iphone - CMBlockBuffer创建内存管理

> ID：12227636
> 
> 赞同：7
> 
> 时间：2012-09-01T12:18:24.627
> 
> 标签：iphone, objective-c, avfoundation, core-media

我有一些代码可以创建 CMBlockBuffers，然后创建一个 CMSampleBuffer 并将其传递给 AVAssetWriterInput。

这里的内存管理有什么问题？根据 Apple 文档，[您在名称中使用“Create”的任何内容都应使用 CFRelease 发布](http://disanji.net/iOS_Doc/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029)。

但是，如果我使用 CFRelease，那么我的应用程序会因 'malloc: ***对象 0xblahblah 的错误：未分配指针被释放而中止。

```
CMBlockBufferRef tmp_bbuf = NULL;
CMBlockBufferRef bbuf = NULL;
CMSampleBufferRef sbuf = NULL;
status = CMBlockBufferCreateWithMemoryBlock(
                                            kCFAllocatorDefault, 
                                            samples, 
                                            buflen, 
                                            kCFAllocatorDefault, 
                                            NULL, 
                                            0, 
                                            buflen, 
                                            0, 
                                            &tmp_bbuf);

if (status != noErr || !tmp_bbuf) {
    NSLog(@"CMBlockBufferCreateWithMemoryBlock error");
    return -1;
}
// Copy the buffer so that we get a copy of the samples in memory.
// CMBlockBufferCreateWithMemoryBlock does not actually copy the data!
// 
status = CMBlockBufferCreateContiguous(kCFAllocatorDefault, tmp_bbuf, kCFAllocatorDefault, NULL, 0, buflen, kCMBlockBufferAlwaysCopyDataFlag, &bbuf);
//CFRelease(tmp_bbuf); // causes abort?!
if (status != noErr) {
    NSLog(@"CMBlockBufferCreateContiguous error");
    //CFRelease(bbuf);
    return -1;
}

CMTime timestamp = CMTimeMake(sample_position_, 44100);

status = CMAudioSampleBufferCreateWithPacketDescriptions(
    kCFAllocatorDefault, bbuf, TRUE, 0, NULL, audio_fmt_desc_, 1, timestamp, NULL, &sbuf);

sample_position_ += n;
if (status != noErr) {
    NSLog(@"CMSampleBufferCreate error");
    return -1;
}
BOOL r = [audioWriterInput appendSampleBuffer:sbuf]; // AVAssetWriterInput
//memset(&audio_buf_[0], 0, buflen);
if (!r) {
    NSLog(@"appendSampleBuffer error");
}
//CFRelease(bbuf);
//CFRelease(sbuf); 
```

那么，在这段代码中，我应该`CFRelease`在任何东西上使用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-21T19:31:46.347

关键是 CMBlockBufferCreateWithMemoryBlock 的 blockAllocator 参数：

> 如果 memoryBlock 为 NULL，则分配器用于分配 memoryBlock。如果 memoryBlock 不为​​ NULL，则此分配器将用于释放它（如果提供）。传递 NULL 将导致使用默认分配器（在调用时设置）。**如果不需要解除分配，则传递 kCFAllocatorNull。**

由于您不希望在释放 CMBlockBuffer 时释放“样本”，因此您希望将 kCFAllocatorNull 作为第 4 个参数传入，如下所示：

```
status = CMBlockBufferCreateWithMemoryBlock(
                                            kCFAllocatorDefault, 
                                            samples, 
                                            buflen, 
                                            kCFAllocatorNull, 
                                            NULL, 
                                            0, 
                                            buflen, 
                                            0, 
                                            &tmp_bbuf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T03:24:56.817

```
CMAudioSampleBufferCreateWithPacketDescriptions(kCFAllocatorDefault, bbuf, TRUE, 0, NULL, audio_fmt_desc_, 1, timestamp, NULL, &sbuf); 
```

这应该是：

```
CMAudioSampleBufferCreateWithPacketDescriptions(kCFAllocatorDefault, bbuf, TRUE, 0, NULL, audio_fmt_desc_, 1024, timestamp, NULL, &sbuf); 
```

# c++ - 简化复杂的 C++ 模板符号

> ID：12227640
> 
> 赞同：4
> 
> 时间：2012-09-01T12:19:22.400
> 
> 标签：c++, templates, clang, debug-symbols, clang++

我正在开发一个调试/内存工具。我想显示来自 C++ 的符号，问题是它们非常冗长。目前我只是在使用`__cxa_demangle`，但这通常会导致超过 500 个字符的巨大字符串，因为包含默认模板参数。

`clang++`当它报告符号时可以清楚地做聪明的事情，有什么办法可以利用它吗？

作为一个简单的例子，我们来看：

```
std::map<std::string const, unsigned int, std::less<std::string const>, std::allocator<std::pair<std::string const, unsigned int> > >::find(std::string const&) 
```

这显然可以报告为：

```
std::map<std::string const, unsigned int>::find(std::string const&) 
```

..如果我有一个足够聪明的工具。很明显，如果没有额外的知识（比如最初使用的包含 - 我可能会得到这些），这通常很难做到，但我会很感激任何指针。

到目前为止，我一直指向[libcxxabi](http://llvm.org/svn/llvm-project/libcxxabi/trunk/include/cxa_demangle.h "自卫队")，但除了没有解析树的公共接口（它本身不会阻止我）之外，似乎我必须努力确定哪些参数是默认值. 如果我能以某种方式欺骗 clang 为我做这件事，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T13:29:21.590

[STLFilt](http://www.bdsoft.com/tools/stlfilt.html)可以帮助你。有两个 perl 脚本，STLFilt.pl（用于 Visual C++）和 gSTLFilt.p（用于 gcc）。它旨在用于简化错误消息，但我已经将它用于后处理 __cxa_demangle 的输出。

用于您的简单示例，没有任何选项：

```
echo "std::map<std::string const, unsigned int, std::less<std::string const>, std::allocator<std::pair<std::string const, unsigned int> > >::find(std::string const&)" \
| perl ./gSTLFilt.pl 
```

获取输出：

```
BD Software STL Message Decryptor v3.10 for gcc 2/3/4
map<string const, unsigned int>::find(string const &) 
```

如果您想使用它的选项，您应该能够获得自定义的重新格式化（我还没有尝试过）。

# python - 为什么我们在隐式查找特殊方法时会绕过实例属性？

> ID：12227642
> 
> 赞同：4
> 
> 时间：2012-09-01T12:19:30.933
> 
> 标签：python, function, methods, method-call

从Python 文档中“数据模型”一章的“[新式类的特殊方法查找”部分](http://docs.python.org/reference/datamodel.html#special-method-lookup-for-new-style-classes)（粗体强调我的）：

> 对于新式类，特殊方法的隐式调用只有在对象类型上定义时才能保证正常工作，而不是在对象的实例字典中。这种行为是以下代码引发异常的原因（与旧式类的等效示例不同）：
> 
> ```
> >>> class C(object):
> ...     pass
> ...
> >>> c = C()
> >>> c.__len__ = lambda: 5
> >>> len(c)
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> TypeError: object of type 'C' has no len() 
> ```
> 
> **这种行为背后的基本原理在于许多特殊方法，例如`__hash__()`和 `__repr__()`由所有对象实现，包括类型对象。如果这些方法的隐式查找使用常规查找过程，则在类型对象本身上调用它们时会失败：**
> 
> ```
> >>> 1 .__hash__() == hash(1)
> True
> >>> int.__hash__() == hash(int)
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> TypeError: descriptor ’__hash__’ of ’int’ object needs an argument 
> ```
> 
> **以这种方式错误地尝试调用类的未绑定方法有时被称为“元类混淆”，并且可以通过在查找特殊方法时绕过实例来避免：**
> 
> ```
> >>> type(1).__hash__(1) == hash(1)
> True
> >>> type(int).__hash__(int) == hash(int)
> True 
> ```

粗体字我听不懂……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:08:25.400

要了解这里发生了什么，您需要对常规属性查找过程有一个（基本的）了解。举一个典型的面向对象的介绍性编程示例 -`fido`是`Dog`：

```
class Dog(object):
    pass

fido = Dog() 
```

如果我们说`fido.walk()`，Python 做的第一件事就是寻找一个 in 调用的函数`walk`（`fido`作为 in 的一个条目`fido.__dict__`）并在不带参数的情况下调用它——所以，一个定义如下的函数：

```
def walk():
   print "Yay! Walking! My favourite thing!"

fido.walk = walk 
```

并将`fido.walk()`工作。如果我们没有这样做，它会`walk`在`type(fido)`(which is `Dog`) 中查找一个属性，并使用实例作为第一个参数 (ie, `self`) 调用它——这是由我们在 Python 中定义方法的常用方式触发的：

```
class Dog:
    def walk(self):
         print "Yay! Walking! My favourite thing!" 
```

现在，当您调用时`repr(fido)`，它最终会调用特殊方法`__repr__`。它可能（很差，但说明性地）定义如下：

```
class Dog:
    def __repr__(self):
          return 'Dog()' 
```

但是，粗体字表示这样做也很有意义：

```
 repr(Dog) 
```

在我刚刚描述的查找过程中，它首先要查找的是一个名为`__repr__`assigned to `Dog`...的方法，嘿，看，有一个，因为我们只是很糟糕但说明性地定义了它。因此，Python 调用：

```
Dog.__repr__() 
```

它在我们面前炸开了锅：

```
>>> Dog.__repr__()
Traceback (most recent call last):
  File "<pyshell#38>", line 1, in <module>
    Dog.__repr__()
TypeError: __repr__() takes exactly 1 argument (0 given) 
```

因为`__repr__()`期望一个`Dog`实例作为它的`self`参数传递给它。我们可以这样做以使其工作：

```
class Dog:
    def __repr__(self=None):
       if self is None:
           # return repr of Dog
       # return repr of self 
```

*但是，我们每次*编写自定义`__repr__`函数时都需要这样做。它需要知道如何找到`__repr__`类的 是一个问题，但问题不大 - 它可以委托给`Dog`自己的类 ( `type(Dog)`) 并将其调用`__repr__`with`Dog`作为它的`self`参数：

```
 if self is None:
   return type(Dog).__repr__(Dog) 
```

但首先，如果类名在未来发生变化，这会中断，因为我们需要在同一行中提到它两次。但更大的问题是，这基本上是样板文件：99% 的实现将只是委派到链上，或者忘记委派并因此产生错误。因此，Python 采用了那些段落中描述的方法 -`repr(foo)`跳过查找`__repr__`附加到`foo`，并直接转到：

```
type(foo).__repr__(foo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:36:15.187

您必须记住的是，类是其**元类**的实例。有些操作不仅需要在实例上执行，还需要在类型上执行。如果实例上的方法被运行，那么它将失败，因为实例上的方法（在这种情况下实际上是一个类）将需要类的实例而不是元类。

```
class MC(type):
  def foo(self):
    print 'foo'

class C(object):
  __metaclass__ = MC
  def bar(self):
    print 'bar'

C.foo()
C().bar()
C.bar() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-12T23:28:29.583

普通属性检索在 的*实例*属性和*类*属性中`obj.attr`查找。它在和中定义。`attr`**`obj``object.__getattribute__``type.__getattribute__`**

 **隐式特殊方法调用`special(obj, *args, **kwargs)`（例如）在（例如）的类属性中`hash(1)`查找（例如），*绕过实例属性*而不是执行正常的属性检索，并调用它。理由是实例属性可能需要一个接收器参数（通常*称为*called ) 这是*要调用*的类的一个实例（例如函数属性），并提供一个：`__special__``__hash__``obj``1`*`obj``obj.__special__``obj``self``obj` *`special(obj, *args, **kwargs)``obj``self``type(obj)` *`special(obj, *args, **kwargs)``obj`.***

 ***## 例子

特殊方法`__hash__`采用单个参数。比较这两个表达式：

```
>>> 1 .__hash__
<method-wrapper '__hash__' of int object at 0x103c1f930>
>>> int.__hash__
<slot wrapper '__hash__' of 'int' objects> 
```

*   第一个表达式从*类*属性中检索`vars(type(1))['__hash__'].__get__(1)`绑定到的方法。所以类属性需要一个接收器参数，它是一个被调用的实例，我们已经提供了一个：`1`*`vars(type(1))['__hash__']``type(1)``1`*
**   第二个表达式`vars(int)['__hash__'].__get__(None, int)`从*实例*属性中检索函数`vars(int)['__hash__']`。所以 instance 属性需要一个接收器参数，它是一个`int`被调用的实例，我们还没有提供一个。*

 *```
>>> 1 .__hash__()
1
>>> int.__hash__(1)
1 
```

由于内置函数`hash`采用单个参数，`hash(1)`因此可以`1`在第一次调用（类属性调用）中提供所需，而在第二次调用（实例属性调用）`hash(int)`中无法提供所需。`1`因此，`hash(obj)`应该绕过实例属性`vars(obj)['__hash__']`并直接访问类属性`vars(type(obj))['__hash__']`：

```
>>> hash(1) == vars(type(1))['__hash__'].__get__(1)()
True
>>> hash(int) == vars(type(int))['__hash__'].__get__(int)()
True 
```******

# php - if 和空行为怪异

> ID：12227644
> 
> 赞同：4
> 
> 时间：2012-09-01T12:19:40.540
> 
> 标签：php, if-statement, string

当我写

```
$char='a' 
if (!empty($char)){
   echo 'true';
} else {
   echo 'false';
} 
```

我是真的，但是当：

```
if ($char='a' && !empty($char)){
   echo 'true';
} else {
   echo 'false';
} 
```

为什么我得到'假'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:22:42.180

因为第二种方式是一样的：

```
if ($char = ('a' && !empty($char))){
   echo 'true';
} else {
   echo 'false';
} 
```

`&&`具有比 更高的优先级`=`，因此`$char`将是`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:23:18.830

因为你在写`if($char = 'a' && !empty($char))`，你正在使用赋值运算符，使用`==`，你应该得到正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:26:58.073

因为单有单等号。

```
if ($char='a' 
```

确实

```
if ($char=='a' 
```

# iphone - iPad 的 WebView 未加载页面

> ID：12227645
> 
> 赞同：0
> 
> 时间：2012-09-01T12:19:44.067
> 
> 标签：iphone, objective-c, ios, ipad, webview

我正在实现一个基本上加载网页的应用程序（适用于 iphone 和 ipad）。iPhone 的 webview 加载正确，但 iPad WebView 什么也没做？！

这是我的 ViewController.m

```
#import "ViewController.h"

@interface ViewController ()
@property (weak, nonatomic) IBOutlet UIWebView *webView;
@property (weak, nonatomic) IBOutlet UIWebView *webViewiPad;

@end

@implementation ViewController
@synthesize webView = _webView;
@synthesize webViewiPad = _webViewiPad;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.at"]]];
    [self.webViewiPad loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.at"]]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:24:12.633

加载 ViewController 时执行以下操作：

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

   self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
  }
 else
 {
   self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
 } 
```

**将 webViewiPad 绑定到 iPad Xib 和 webView 分别绑定到 iPhone Xib**

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) //load differnt xib according to iphone and ipad
{
    [self.webViewiPad loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.at"]]];

 }
 else
 {
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.at"]]];

 } 
```

# c++ - 项目符号：加载/保存碰撞形状

> ID：12227646
> 
> 赞同：4
> 
> 时间：2012-09-01T12:19:53.727
> 
> 标签：c++, serialization, game-engine, game-physics, bulletphysics

我试图防止循环所有三角形并将每个三角形添加到 btTriangleMesh。（只有加载要快，保存速度可以忽略。）

那么从文件中加载碰撞数据的最快方法是什么。这两个怎么样：

1.  保存 Vertex(bt3Vector) & Index(DWORD) 数组并在加载时调整 btTriangleMesh 的大小并立即设置数据。

2.  使用 serializeSingleShape() 保存和加载 ReadBulletSample 之类的东西（或初始化一个新的 btDynamicsWorld，使用 BulletWorldImporter 读取文件，获取碰撞对象并清理 btDynamicsWorld var）

如果还有其他方法，请告诉我。模型几何具有以下两个缓冲区：

```
Vertex = vector<float[3]>
Index = vector<DWORD> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T23:35:26.643

我使用了子弹的序列化代码。我相信它已经过优化，看不出你应该重新发明它的理由。

`bt_col`- 是子弹碰撞对象

```
 int maxSerializeBufferSize = 1024*1024*5;
    btDefaultSerializer*    serializer = new btDefaultSerializer(maxSerializeBufferSize);

    serializer->startSerialization();
    bt_col->serializeSingleShape(serializer);
    serializer->finishSerialization();

    FILE* file = fopen(filename, "wb");
    fwrite(serializer->getBufferPointer(),serializer->getCurrentBufferSize(),1, file);
    fclose(file);

    delete serializer; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:47:03.350

如果我是你，我会做以下事情：

*   如果碰撞文件真的很大，那么分块读取它，直到你得到你想要的。
*   使用**内存池**来存储块，以避免在新建/删除时产生堆碎片。
*   然后进行实际的碰撞测试。

如果您尝试保存数据，可以将它们保存为结构。

```
struct Triangle
{
  float vertices[9]; // 3x3
  int index;
}; 
```

如果结构的大小不同，那么它会变得更复杂一些。

```
struct Triangle
{
  int prevOffset; // Offset to the beginning of the previous struct in bytes .. ie. 20 bytes
  int nextOffset; // Offset at the beginning of the next struct
  std::vector<float[3]> Vertices;
  int index;
}; 
```

阅读：

```
int offset = 0;
char* m_Data; // Pointer to the contents of the file
Triangle *getTriangle(){

   Triangle* tri = (Triangle*)( m_Data+offset );
   offset = tri->Next;
   return tri;

} 
```

您在存储偏移量时将结构写为字节。

```
 // Writing the pool
    tri->next = ( (int)tri-(int)m_Data )+tri->Vertices.size()*4+16;
    // For a 32bit system 
    // +12 for the ints (next/prev/id)
    // *4 for the floats 
```

这正是内存池链接它们的块头的方式。使用指向上一项和下一项的指针，以便您可以**两种方式进行迭代**。

# python - Python 3.2.3 ValueError：无法将字符串转换为浮点数

> ID：12227653
> 
> 赞同：1
> 
> 时间：2012-09-01T12:21:10.717
> 
> 标签：python

```
import math
pi = 3.1415

r = float(input("Enter the radius: "))
angle = float(input("Enter the angle: "))
x = r * math.cos(angle)
y = r * math.sin(angle)

print ('x =', x, 'y =', y) 
```

当我输入 pi 或任何带有 pi 的东西作为角度提示的答案时，我收到此错误：

```
ValueError: could not convert string to float: 'pi' 
```

有什么建议该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:22:47.683

您收到错误是因为`"pi"`不是数字。如果您希望它识别该字符串，则需要在尝试将其转换为浮点数之前手动执行此操作。

```
def get_number(what):
    # Get value from user; remove any leading/trailing whitespace
    val = input('Enter the {}:'.format(what)).strip()
    if val.lower() == 'pi': # case insensitive check for "pi"
        return math.pi
    try: # try converting it to a float
        return float(val)
    except ValueError: # the user entered some crap that can't be converted
        return 0 
```

然后，在您的主代码中，只需使用以下代码：

```
r = get_number('radius')
angle = get_number('angle') 
```

并且请摆脱`pi = 3.1415`- 当您需要 pi 时，您可以使用[`math.pi`](http://docs.python.org/library/math.html#math.pi)更准确的方法和要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:26:19.063

此代码在 python 2 中运行良好，但`input`函数在 python 2 和 python 3 之间更改，符合[PEP 3111](http://www.python.org/dev/peps/pep-3111/)：

*   python 2 中的内容现在只在 python 3 中`raw_input`调用。`input`
*   python 2中`input(x)`的内容等同`eval(input(x))`于 python 3 中的内容。

这本来应该是这样，因为调用`eval`用户输入是不安全和不直观的，当然不应该是用户输入的默认设置，如果这是你真正想要的，仍然很容易做到。

将您的代码示例作为玩具示例，您可以通过替换使其工作

```
r = float(input("Enter the radius: "))
angle = float(input("Enter the angle: ")) 
```

和

```
r = float(eval(input("Enter the radius: ")))
angle = float(eval(input("Enter the angle: "))) 
```

但你不想在现实世界的代码中这样做*。*相反，您可能希望使用此问题中建议的解决方案之一：[Equation parsing in Python](https://stackoverflow.com/questions/594266/equation-parsing-in-python)。

# c# - 如何覆盖 ContentControlThemeFontFamily

> ID：12227669
> 
> 赞同：6
> 
> 时间：2012-09-01T12:23:13.687
> 
> 标签：c#, microsoft-metro, windows-runtime, winrt-xaml

是否可以在standardstyles.xaml 中的WinRt 应用程序中为ContentControlThemeFontFamily 设置自定义字体？

你有什么例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T15:24:26.490

创建您自己的资源字典并覆盖主题。

```
<ResourceDictionary.ThemeDictionaries>
    <ResourceDictionary x:Key="Default">
         <FontFamily x:Key="ContentControlThemeFontFamily">Times new roman</FontFamily>
     </ResourceDictionary>
</ResourceDictionary.ThemeDictionaries> 
```

# java - 位图大小超过 VM 预算与使用 drawables android

> ID：12227671
> 
> 赞同：0
> 
> 时间：2012-09-01T12:23:18.623
> 
> 标签：java, android, bitmap, drawable

在我的应用程序中，我从 url 获取 4-5 个位图，并像画廊一样使用它们。

如果我切换图像超过 6-10 次，我会收到此错误：

```
09-01 12:08:45.217: E/AndroidRuntime(350): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-01 12:08:45.217: E/AndroidRuntime(350):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
09-01 12:08:45.217: E/AndroidRuntime(350):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:459)
09-01 12:08:45.217: E/AndroidRuntime(350):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:515) 
```

这是我的代码：

```
try {
                            bitmapResult = BitmapFactory.decodeStream((InputStream)new URL(url[newPage+1]).getContent());
                          } catch (MalformedURLException e) {
                          e.printStackTrace();
                        } catch (IOException e) {
                          e.printStackTrace();
                        }

                        v.setImageBitmap(bitmapResult); 
```

我的问题是：

这只会在模拟器中发生吗？

更重要，更重要。如果使用drawable insted，我会更有效率吗？在这种情况下，我将使用下面的代码将我的位图转换为可绘制的，然后我将设置Imageresource。我必须“释放”任何东西吗？

```
Drawable d = new BitmapDrawable(getResources(),bitmapResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:25:13.197

当您从内部存储加载位图时 - 之后回收位图！

这里有很多线程与问题VM内存不足......

# php - PHP 脚本适用于本地主机，但不适用于托管

> ID：12227673
> 
> 赞同：0
> 
> 时间：2012-09-01T12:23:22.767
> 
> 标签：php

我有一个奇怪的问题。我有一个 PHP 脚本（witj js、ajax 等），它在 localhost 上运行得很好。但是在互联网上托管这个脚本不起作用。脚本如下：

```
 $value = $_POST['web_url'];
        $tag = get_meta_tags("http://".$value);

        if(count($tag['keywords']) == 0)
        {
            echo "<div id='no_keywords'>No keywrds:</div>";
        }
        else
        {
            echo "<div id='title'>My keywords:</div>";
            echo "<br/>";
            print_r($tag['keywords']);
        } 
```

例如，在本地主机中，当我输入： bbc.com - 我得到所有关键字列表（ELSE 构建工程），但在托管时当我输入 bbe.com - 我得到“没有关键字”（如果构建总是有效） )...很奇怪...我不明白为什么？你有什么想法吗？((

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:29:54.413

您的主机服务器不允许打开 URL：请参阅[http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

# symfony - Symfony2：我可以为 symfony 2.0 和 symfony 2.1 使用相同的实体吗？

> ID：12227674
> 
> 赞同：0
> 
> 时间：2012-09-01T12:23:38.827
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我有一个 Bundle，其中包含由不同主机中的两个应用程序共享的一些实体和资源。这些实体是使用 symfony 2.0 编码的。现在我想将其中一个应用程序升级到 symfony 2.1，而另一个继续使用 symfony 2.0。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:15:39.920

Symfony 2.0 和 2.1 使用不同的 Doctrine 版本。这不是关于 Symfony 的问题，而是关于 Doctrine（这是一个单独的项目）的问题。

您应该检查 Doctrine 中是否有任何向后不兼容的更改。但我想你会没事的。如果你有一个测试套件，它应该会捕捉到所有的行为变化。

# android - Android 2.3.3 AsyncTask 调用抛出 NoSuchFieldError

> ID：12227682
> 
> 赞同：5
> 
> 时间：2012-09-01T12:24:51.853
> 
> 标签：android

这在 android 4.0.3 上运行良好，但我在 android 2.3.3 中出现错误，任何帮助将不胜感激。粗体线会引发错误。

```
public class TestLoadingTask extends AsyncTask<Object, Object, Void> {
}

btndownload.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        if (util.isNetworkAvailable(NewTakeTest.this)) {
                TestLoadingTask task;
        task = new TestLoadingTask();
        task.currentposition = position;
        task.testname = productsOnCloudList.getList().get(position).getProductname();
        **task.executeOnExecutor(task.THREAD_POOL_EXECUTOR, null);**
    }
    }
}); 
```

我是stackoverflow的新手，所以如果我无法正确解释我的问题，请原谅我。

整个日志如下所述。

```
09-01 17:07:10.853 E/AndroidRuntime(21188): FATAL EXCEPTION: main
09-01 17:07:10.853 E/AndroidRuntime(21188): java.lang.NoSuchFieldError: in.informationworks.app.CATapp.store.NewTakeTest$TestLoadingTask.THREAD_POOL_EXECUTOR
09-01 17:07:10.853 E/AndroidRuntime(21188): at in.informationworks.app.CATapp.store.NewTakeTest$CloudCustomAdapter$1.onClick(NewTakeTest.java:973)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.view.View.performClick(View.java:2533)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.view.View$PerformClick.run(View.java:9320)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.os.Handler.handleCallback(Handler.java:587)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.os.Handler.dispatchMessage(Handler.java:92)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.os.Looper.loop(Looper.java:150)
09-01 17:07:10.853 E/AndroidRuntime(21188): at android.app.ActivityThread.main(ActivityThread.java:4389)
09-01 17:07:10.853 E/AndroidRuntime(21188): at java.lang.reflect.Method.invokeNative(Native Method)
09-01 17:07:10.853 E/AndroidRuntime(21188): at java.lang.reflect.Method.invoke(Method.java:507)
09-01 17:07:10.853 E/AndroidRuntime(21188): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
09-01 17:07:10.853 E/AndroidRuntime(21188): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
09-01 17:07:10.853 E/AndroidRuntime(21188): at dalvik.system.NativeStart.main(Native Method)
09-01 17:07:10.863 E/EmbeddedLogger(  180): App crashed! Process: in.informationworks.app.CATapp 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T12:28:43.183

您已使用 API 级别 11 或更高级别的构建目标编译您的应用程序，但您正在 API 级别 10 或更低级别上运行该应用程序。`executeOnExecutor()`并`THREAD_POOL_EXECUTOR`在 API 级别 11 中添加，并且在早期版本的 Android 中不存在。您将需要使用来检测您使用的 Android 版本，并在此类设备`android.os.Build`上使用旧方法。`execute()`

例如：

```
 @TargetApi(11)
  static public <T> void executeAsyncTask(AsyncTask<T, ?, ?> task,
                                          T... params) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
      task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
    }
    else {
      task.execute(params);
    }
  } 
```

要使用它，请创建您的`AsyncTask`实例并调用`executeAsyncTask()`，将`AsyncTask`对象作为第一个参数传递，并将您想要传递的任何内容`doInBackground()`作为剩余参数传递：

```
fooTask=new FooTask();
executeAsyncTask(fooTask, "these", "are", "optional"); 
```

# android - Android Phonegap：存储和处理数组的最佳方式

> ID：12227685
> 
> 赞同：0
> 
> 时间：2012-09-01T12:25:16.723
> 
> 标签：android, cordova

似乎 phonegaps 文档在其假设是好的编码实践和坏的编码实践方面相当有限。根据您的经验，使用 phonegaps api 存储数组以进行处理的最佳方式是：i) 数据库 ii) 写入文件请解释原因并请回答，即使您有上述选项中未提及的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:34:13.797

这取决于情况，有很多方法可以保存数组之类的数据集......在我看来，如果你有一些静态数据（在运行时不会更改），最好将它们保存在 string.xml 中（存储在 res 文件夹中）或者如果您的数据具有某些无法保存在 strings.xml 中的结构，因此您可以将它们保存在 raw 文件夹内的单独 xml 文件中，但如果您有动态数据，还有其他方法，如数据库（简单和快速）或在单独的文件（xml、文本）中。

# r - R中的函数内的函数

> ID：12227689
> 
> 赞同：6
> 
> 时间：2012-09-01T12:25:58.363
> 
> 标签：r

你能解释一下为什么代码抱怨说`Samdat`没有找到吗？

我试图在模型之间切换，所以我声明了一个包含这些特定模型的函数，我只需将此函数作为函数中的参数之一`get.f`调用，其中重采样将更改模型中每个设计矩阵的结构。`Samdat`代码在找到时抱怨找不到。

另外，有没有办法可以制作条件语句`if(Model == M1())`，而不必`M`为 set创建另一个参数`if(M==1)`？

这是我的代码：

```
dat <-  cbind(Y=rnorm(20),rnorm(20),runif(20),rexp(20),rnorm(20),runif(20), rexp(20),rnorm(20),runif(20),rexp(20))
nam <- paste("v",1:9,sep="")
colnames(dat) <- c("Y",nam)

M1 <- function(){
    a1 = cbind(Samdat[,c(2:5,7,9)])
    b1 = cbind(Samdat[,c(2:4,6,8,7)])
    c1 = b1+a1
    list(a1=a1,b1=b1,c1=c1)}

M2 <- function(){
    a1= cbind(Samdat[,c(2:5,7,9)])+2
    b1= cbind(Samdat[,c(2:4,6,8,7)])+2
    c1 = a1+b1
    list(a1=a1,b1=b1,c1=c1)}

M3 <- function(){
    a1= cbind(Samdat[,c(2:5,7,9)])+8
    b1= cbind(Samdat[,c(2:4,6,8,7)])+8
    c1 = a1+b1
    list(a1=a1,b1=b1,c1=c1)}
#################################################################
get.f <- function(asim,Model,M){
    sse <-c()
    for(i in 1:asim){
        set.seed(i)
        Samdat <- dat[sample(1:nrow(dat),nrow(dat),replace=T),]
        Y <- Samdat[,1]
        if(M==1){
            a2 <- Model$a1
            b2 <- Model$b1
            c2 <- Model$c1
            s<- a2+b2+c2
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            coff <-Model$cof
            sse <-c(sse,coff)
        }
        else if(M==2){
            a2 <- Model$a1
            b2 <- Model$b1
            c2 <- Model$c1
            s<- c2+12
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            coff <-Model$cof
            sse <-c(sse,coff)
        }
        else {
            a2 <- Model$a1
            b2 <- Model$b1
            c2 <- Model$c1
            s<- c2+a2
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            coff <- Model$cof
            sse <-c(sse,coff)
        }
    }
    return(sse)
}

get.f(10,Model=M1(),M=1)
get.f(10,Model=M2(),M=2)
get.f(10,Model=M3(),M=3) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T13:22:27.667

您可能想查看[R 范围规则](http://cran.r-project.org/doc/manuals/R-lang.html#Scope-of-variables)。特别是，没有理由期望您在函数中定义的变量在其他函数中可见。

您可能会感到困惑，因为全局环境（即所有函数之外的顶级环境）是该规则的一个例外。我不打算讨论您的其他问题，但请注意，整个脚本在我看来非常混乱 - 即本质`M1`上`M3`是一个功能，并且复制/粘贴的一叠`get.f`绝对是可怕的。无论您尝试做什么，都绝对可以以一种不那么复杂的方式编写。

让我们先看一下`M`s - 为什么不是一个带参数的函数？包括解决您的范围问题的解决方案，这会产生两个参数 -

```
M <- function(sampleData, offset) { 
    a1 = sampleData[,c(2:5,7,9)] + offset
    b1 = sampleData[,c(2:4,6,8,7)] + offset
    c1 = b1+a1
    list(a1=a1,b1=b1,c1=c1)
} 
```

如果您坚持定义别名，您还可以执行类似的操作

```
M1 <- function(sampleData) M(sampleData, 0) 
M2 <- function(sampleData) M(sampleData, 2) 
M3 <- function(sampleData) M(sampleData, 8) 
```

这已经不那么重复了，但理想情况下，您希望计算机为您完成重复（[DRY！](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）：

```
offsets <- c(0,2,8)
Models <- sapply(offsets, FUN=function(offset) function(sampleData) M(sampleData, offset)) 
```

看着`get.f`，不太清楚您要做什么-您正在尝试拟合某些内容并从结果中收集某些内容，但是 about 部分`Model$cof`指的是未定义的变量（您`Model`只有`a1`,`b1`和`c1`条目）。假设您要实际收集`cof`和丢弃临时代码，`get.f`可能如下所示：

```
M <- function(sampleData, offset) { 
    a1 = sampleData[,c(2:5,7,9)] + offset
    b1 = sampleData[,c(2:4,6,8,7)] + offset
    c1 = b1+a1
    list(a1=a1,b1=b1,c1=c1)
}

get.f <- function(asim,Model,M){
    sse <-c()
    for(i in 1:asim){
        set.seed(i)
        Samdat <- dat[sample(1:nrow(dat),nrow(dat),replace=T),]
        Y <- Samdat[,1]
        model <- Model()
        if(M==1){
            a2 <- model$a1
            b2 <- model$b1
            c2 <- model$c1
            s<- a2+b2+c2
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            sse <-c(sse,cof)
        }
        else if(M==2){
            a2 <- model$a1
            b2 <- model$b1
            c2 <- model$c1
            s<- c2+12
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            sse <-c(sse,cof)
        }
        else {
            a2 <- model$a1
            b2 <- model$b1
            c2 <- model$c1
            s<- c2+a2
            fit <- lm(Y~s)
            cof <- sum(summary(fit)$coef[,1])
            sse <-c(sse,cof)
        }
    }
    return(sse)
}

get.f(10,Model=M1,M=1) 
get.f(10,Model=M2,M=2)
get.f(10,Model=M3,M=3) 
```

这仍然非常重复，所以我们为什么不考虑一下呢？您对样本所做的只是从它们中计算一列以供您使用。我不明白为什么您需要在`M`函数中进行计算，然后提取单个值`get.f`（取决于您使用的特定 M） - 这似乎表明提取应该是 M 的一部分。 .. 但是如果您需要将它们分开，好吧，让我们使用单独的提取函数。在合理编写的 R 中，代码大小仍然不到您的一半：

```
# Set up test data
dat <-  cbind(Y=rnorm(20),rnorm(20),runif(20),rexp(20),rnorm(20),runif(20), rexp(20),rnorm(20),runif(20),rexp(20))
nam <- paste("v",1:9,sep="")
colnames(dat) <- c("Y",nam)

# calculate a1..c1 from a sample
M <- function(sampleData, offset) { 
    a1 = sampleData[,c(2:5,7,9)] + offset
    b1 = sampleData[,c(2:4,6,8,7)] + offset
    c1 = b1+a1
    list(a1=a1,b1=b1,c1=c1)
}

# create a fixed-offset model from the variable offset model by fixing offset
makeModel <- function(offset) function(sampleData) M(sampleData, offset)   

# run model against asim subsamples of data and collect coefficients
get.f <- function(asim,model,expected) 
    sapply(1:asim,  function (i){
        set.seed(i)
        Samdat <- dat[sample(1:nrow(dat),nrow(dat),replace=T),]
        Y <- Samdat[,1]
        s <- expected(model(Samdat))
        fit <- lm(Y~s)
        sum(summary(fit)$coef[,1])
    })

# list of models to run and how to extract the expectation values from the model reslts
todo <- list(
        list(model=makeModel(0), expected=function(data) data$a1+data$b1+data$c1),
        list(model=makeModel(2), expected=function(data) data$c1+12),
        list(model=makeModel(8), expected=function(data) data$c1+data$a1))

sapply(todo, function(l) { get.f(10, l$model, l$expected)}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T15:43:44.987

你打电话时

```
get.f(10, Model=M1(), M=1) 
```

您的`M1`函数会立即被调用。它死了，因为在`M1`你的身体内部使用`Samdat`的是稍后才定义的，在`get.f`.

不知何故，您需要在定义`M1` *之后调用。* `Samdat`一种方法是使`M1`（函数）成为函数的参数`get.f`并从内部调用函数`get.f`：

```
get.f <- function(asim, Model.fun, M) {
   ...
   Sambat <- ...
   Model  <- Model.fun()
   ...
}
get.f(10, Model.fun = M1, M=1) 
```

此外，一般来说，使用全局变量是不好的编程，也就是说，让你的函数使用在其范围之外定义的变量。相反，建议将函数使用的所有内容作为输入参数传递。您的代码中有两种这样的情况：`M1`(`M2`和`M3`) use`Samdat`和`get.f`uses `dat`。它们应该是你的函数的参数。这是您的代码的更好版本。我还没有解决所有问题，所以你必须做更多的工作才能让它工作：

```
M1 <- function(sampled.data) {
   a1 <- sampled.data[, c("v1", "v2", "v3", "v4", "v6", "v8")]
   b1 <- sampled.data[, c("v1", "v2", "v3", "v5", "v7", "v6")]
   c1 <- a1 + b1
   list(a1 = a1, b1 = b1, c1 = c1)
}

get.f <- function(dat, asim, Model.fun, offset, M) {
   sse <- c()
   for(i in 1:asim){
      set.seed(i)
      Samdat <- dat[sample(1:nrow(dat), nrow(dat), replace = TRUE), ]
      Y      <- Samdat[, "Y"]
      Model  <- Model.fun(sampled.data = Samdat)
      a2     <- Model$a1
      b2     <- Model$b1
      c2     <- Model$c1      
      s      <- switch(M, a2 + b2 + c2, c2 + 12, c2 + a2)
      fit    <- lm(Y ~ s)
      cof    <- sum(summary(fit)$coef[,1])
      coff   <- Model$cof        # there is a problem here...
      sse    <- c(sse, coff)     # this is not efficient
   }
   return(sse)
}

dat <- cbind(Y = rnorm(20), v1 = rnorm(20), v2 = runif(20), v3 = rexp(20),
                            v4 = rnorm(20), v5 = runif(20), v6 = rexp(20),
                            v7 = rnorm(20), v8 = runif(20), v9 = rexp(20))

get.f(dat, 10, Model.fun = M1, M = 1) 
```

跳出来的最后一件事：如果`s`(我收集的`switch()`内容与`Model`您使用的有关，则考虑将 和 的定义合并`Model`在一起`s`：添加`s`到您的`M1`, `M2`,`M3`函数的列表输出中，以便`s`可以将其定义为`s <- Model$s`,然后您可以将`M`输入拖放到`get.f`.

# jquery - 从标题属性中获取

> ID：12227697
> 
> 赞同：0
> 
> 时间：2012-09-01T12:27:35.090
> 
> 标签：jquery, html

我有一个工具提示，它在对象翻转时从其标题属性中获取信息并显示它。

我想显示三个不同的东西：姓名、地址和图像。由于只允许一个标题属性，我该如何实现？

我可以将其另存为，`title="John, Address 55, image.jpg"`但不知道如何将每条单独的信息（名称、地址、链接）与 jquery 一起使用。

如果有更好的解决方案，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:56:29.810

使用 HTML5 数据属性

HTML

```
<div data-name="John"
  data-location="Address 55"
  data-image="image.jpg">
</div> 
```

JavaScript

```
var el = $('div')
el.data('name')
el.data('location')
el.data('image') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:12:34.370

你可以试试这个

***代码***

```
<div>
    <div title="John,Address 55,image.jpg" class="facedata"> fdgfdsg
    </div>
</div> 
```

***JS代码***

```
var s, arr=new Array();
s= $('.facedata').attr('title');
arr=s.split(",");
for(var a=0; a<arr.length;a++){
  console.log(arr[a]);
} 
```

[http://jsfiddle.net/hCMJ5/29/](http://jsfiddle.net/hCMJ5/29/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:39:33.337

工具提示之类的东西。

```
<a href="#" class="tooltip" title="name, address, image">tool tip</a>
<div id="tooltip-content">
    <span class="name field"></span>
    <span class="address field"></span>
    <span class="image field"></span>
</div>

<script type="text/javascript">

jQuery(document).ready( function (){ 
    jQuery(".tooltip").hover(function(){
        var str = jQuery(this).attr("title").split(",");
        jQuery.each(str, function(index, value){
            value = value.trim();
            jQuery(".field:eq("+index+")").text(value);
        });
        jQuery("#tooltip-content").fadeIn();
    }, function(){
        jQuery("#tooltip-content").fadeOut();
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:47:16.510

把你的标题写成这样：

```
title='{"name":"John","age":"55","img":"image.jpg"}'

then use this is js code

var myString = $("#myObject").attr('title').
var obj = jQuery.parseJSON(myString);

alert(obj.name);
alert(obj.age);
alert(obj.img) 
```

显然不要在实践中提醒用户，而是在您的自定义工具提示中使用这些值

# r - 如何在 R 中训练和交叉验证

> ID：12227701
> 
> 赞同：2
> 
> 时间：2012-09-01T12:27:52.970
> 
> 标签：r, linear-regression

您好，我是 R 新手，

我正在为机器学习做 coursera 课程，我知道在数据集上进行训练和交叉验证，以便在 octave 中进行预测，但是我如何在 R 中进行这些操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:00:06.140

查看机器学习任务视图，了解许多在 R 中处理 ML 的包。此外，谷歌搜索“R 机器学习”也可能会为您带来一些不错的结果。在研究了这些之后，您可能对使用哪些包有了一个很好的了解，尤其是当您已经拥有 ML 经验时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T14:26:36.587

线性回归：

```
> model <- lm(y ~ ., data = mydata)
> predict(model, mydata[1, ]) 
```

LM 的交叉验证：

```
> install.packages("DAAG")   # if not already installed 
> library(DAAG)
> cv.lm(df = mydata, form.lm = formula(y ~ .)) 
```

线性模型（函数`lm()`）在 R 中默认可用，但其他机器学习算法不可用。有关一组最流行的 ML 算法，请参阅 package [`e1071`](http://cran.r-project.org/web/packages/e1071/e1071.pdf)。

# javascript - Javascript 部分号码匹配

> ID：12227702
> 
> 赞同：1
> 
> 时间：2012-09-01T12:27:58.657
> 
> 标签：javascript, regex

我正在尝试在 JS 中创建部分正则表达式匹配。我想要实现的是，当用户在输入字段中输入内容时，JS 总是会在按键时对数字序列进行部分匹配，而不仅仅是在完成整个 RegEx 匹配时。

所以，这就是 RegEx 规则：

```
^[12][^1-6]\d{2}$ 
```

当用户输入数字 1 或 2 时，这是正确的匹配，但 3 是不正确的。接下来，如果没有输入1到6之间的数字，那也是正确的，最后任意2个数字都是正确的。正如我所说，现在正则表达式匹配只有在输入所有 4 个数字时才完成。

如何实现部分输入检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:40:13.663

嗯，最简单的解决方案是将可选组件包装到相应的`(?:)?`构造中。您实际上有两个可选组件，因此您需要考虑到这一点。

结果看起来像......

```
^[12](?:[^1-6]\d{0,2})?$ 
```

...因为您必须同时匹配“2x”、“2x1”和“2x11”，看来。) 因此`{0,2}`是量词。

问题显然是您不能使用*单个*正则表达式来检查用户是否已在您的字段中输入了一些值 - 或没有。换句话说，如果您希望“中间”`1`匹配，但结果`1`不匹配，那么使用单个正则表达式检查是不可能的。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:45:27.587

您可以“或”您的正则表达式，但这意味着重复：

```
^([12]|[12][^1-6]|[12][^1-6]\d{2})$ 
```

要打破这一点：

```
^      From the start of the string / line
       match either
[12]   The numbers 1 or 2
|      or
[12]   The numbers 1 or 2
       followed by
[^1-6] Any character which is not the numbers 1 through 6
|      or
[12]   The numbers 1 or 2
       followed by
[^1-6] Any character which is not the numbers 1 through 6
       followed by
\d     Any number
{2}    repeated two times
$      followed by the end of the string / line 
```

这将匹配以下任何一项：

```
1
2
1N
2N
1NXX
2NXX 
```

`N`不是数字 1 到 6的任何数字都在哪里`X`。

注意：如果您真的只想匹配正则表达式第二部分中的数字 0 和 7-9，只需更改`[^1-6]`为`[07-9]`.

# slick2d - Slick Java 库 - 更新方法

> ID：12227703
> 
> 赞同：0
> 
> 时间：2012-09-01T12:27:59.493
> 
> 标签：slick2d

好的，我正在开发一个游戏，我正在尝试找出为什么光滑的更新方法不起作用，基本上在教程中我正在观看它，但在我的它没有。我在你管教程视频上问过，没有人知道为什么会这样。所以任何帮助将不胜感激。这是我的代码：

```

`package phex.launcher;

import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.opengl.*;
import org.lwjgl.*;
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Phex extends BasicGameState{

    public static int screen;
    private Image tweet;
    private Image logo;
    private Image base;
    private Graphics g;
    private GameContainer gc;

    public Phex() throws SlickException
    {
        new LoginButton();
        try {
            Display.setDisplayMode(new DisplayMode(800, 650));
            Display.setTitle("Phex Launcher");
            Display.setResizable(true);
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
            Display.destroy();
            System.exit(1);
        }

        init(gc, null);

        //Initialisation code(OpenGL)
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity(); // Resets any previous projection matrices
        glOrtho(0, 800, 650, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);
        glEnable(GL_TEXTURE_2D);

        while(!Display.isCloseRequested())
        {
            //render
            render(gc, null, g);
            update(gc, null, 0);
        }
        Display.destroy();

    }   

    public static void main(String args[]) throws SlickException
    {
        new Phex();
    }
    public void init(GameContainer container, StateBasedGame game)
            throws SlickException {
        tweet = new Image("img/twitter-logo.png");
        logo = new Image("img/logo.png");
        base =  new Image("img/base-for-login.png");

    }
    public void render(GameContainer container, StateBasedGame game, Graphics g)
            throws SlickException {
        if(Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
        {
            Display.destroy();
            System.exit(0);
        }

        base.draw(0,0);
        logo.draw(50, 5);
        tweet.draw(200, 5);

        //screen renderer
        screen = 0;
        if(screen == 0)
        {

        }
        if(screen == 1)
        {

        }

        Display.update();
        Display.sync(60);

    }
    public void update(GameContainer container, StateBasedGame game, int delta)throws SlickException {
        int posx = Mouse.getX();
        int posy = Mouse.getY();

        if((posx>50 && posx<150)&&(posy>5 && posy<100))
        {
            System.out.println("in area");
            if(Mouse.isButtonDown(0))
            {
                Display.destroy();

            }
        }

    }
    @Override
    public int getID() {
        return 0;
    }
}` 

            回答 #1

赞同：1

时间：2012-09-05T08:01:15.770

坐在早餐时阅读这篇文章（即不要太深入！）看起来你是压倒一切`BasicGameState`的，而不是`StateBasedGame`。我在任何地方都看不到后者的任何证据？

```

# jquery - 有没有办法简化我的 jQuery Selector 代码？

> ID：12227705
> 
> 赞同：2
> 
> 时间：2012-09-01T12:28:05.267
> 
> 标签：jquery, jquery-selectors

你能帮我简化这个选择器吗？

这是代码：

```
$("input[name='grpQuestion1'], input[name='grpQuestion2'], input[name='grpQuestion4']").change(function (event) {
    /* Some code here */ 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:30:06.660

试试这个

```
$('input[name^="grpQuestion"]').change(function (event) { /* Some Code Here */ }); 
```

jquery 有一些属性选择

比如`$("[attribue^=value]")`属性以值词开头的元素。 `$("[attribue$=value]")`属性以值词结尾的元素。 `$("[attribue*=value]")`属性包含作为部分或单词或确切单词的值的元素。 `$("[attribue~=value]")`属性包含值作为精确词的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:31:24.310

```
$('input[name^="grpQuestion"]').change(/** your code */) 
```

它所做的基本上是选择所有以“grpQuestion”开头的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:31:41.083

你可以试试这个

```
$('input[name^="grpQuestion"]').change(function (event) { /* Some Code Here */ }); 
```

***方法***

输入以 name="grpQuestion" 开头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:33:21.010

试试这个

```
$("input[name^=grpQuestion]").change(function (event) {
/* Some Code Here */ }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T12:44:11.317

要选择名称属性以“grpQuestion”开头的前四个输入元素，可以使用以下 jQuery 选择器：

```
$('input[name^="grpQuestion"]:lt(4)') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T12:52:55.150

你在评论中说你需要这三个名字，所以

```
 var names = ['grpQuestion1', 'grpQuestion2', 'grpQuestion4'];
 $.each(names, function(i, v) { 
   $('input[name='+v+']').change(function (event) {
        /* Some Code Here */ 
   });
 }); 
```

会使其更容易维护。

# css - 对固定 Div 内的 Div 应用相等的边距

> ID：12227706
> 
> 赞同：-1
> 
> 时间：2012-09-01T12:28:06.513
> 
> 标签：css, html, margin, fixed

我正在尝试在页面底部创建一个固定面板，该面板从底部、左侧和右侧有 5px 的边距。我虽然最好的方法是将一个 div 放在一个固定的 div 中，然后使用边距和填充......但我无法做到这一点。左边或右边都否认边距！您可以在此处查看实时示例：

```
http://codepen.io/anon/pen/uEBqD 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:56:30.867

你做了太多的 CSS 规则，只是给内部 DIV 一些边距/填充，而保留其他属性。

您更新的 CodePen：[http ://codepen.io/anon/pen/cJled](http://codepen.io/anon/pen/cJled)

# java - Springframework + Tiles

> ID：12227707
> 
> 赞同：2
> 
> 时间：2012-09-01T12:28:09.610
> 
> 标签：java, spring, tiles

我是 Spring 框架的新手。在我的项目中，我使用 Spring 框架和图块 2（菜单、页眉、正文和页脚）。我想创建动态菜单并将其加载到菜单磁贴（为菜单磁贴创建控制器）。我怎样才能做到这一点？如果我跳过一些帖子，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:42:49.900

您尝试的是某种基于组件的东西（如 JSF），但这不适用于 Spring MVC，因为 Spring MVC 是基于命令的 Web 框架。

最后，您的问题是，您需要在任何其他控制器创建的所有模型中添加由菜单控制器生成的模型。我看到了两种方法。后处理

*   手动：在每个正常的控制器方法中，您手动添加菜单的模型
*   使用[HandlerInterceptor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)：A`org.springframework.web.servlet.HandlerInterceptor`是一种被调用的过滤器（在调用每个控制器方法之前，在控制器方法返回之后，在 jsp 被“调用”之前，在 jsp “返回”之后）。因此，您将菜单控制器重写为使用`postHandle`方法（控制器和 jsp 之间的方法）的 HandlerInterceptor，并在那里为您的菜单添加模型。

@看

*   [在 MVC Webapp 中使用 Spring 拦截器 - Captain Debug 的博客](http://www.captaindebug.com/2011/09/using-spring-interceptors-in-your-mvc.html)
*   [Spring MVC 处理程序拦截器示例](http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/)
*   [Spring参考第15.4.1章拦截请求——HandlerInterceptor接口](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)

# sql-server - 在 SQL Server try/catch 块中查找遇到错误的 objectid

> ID：12227713
> 
> 赞同：-2
> 
> 时间：2012-09-01T12:28:48.707
> 
> 标签：sql-server, exception-handling, try-catch, sysobjects

我正在使用 try...catch 指令来处理 SQL Server 中的错误，我需要识别对象（例如遇到错误的字段的代码），以便我可以显示自己的消息而不是默认的系统错误消息.

这是我的存储过程：

```
USE [ArbitraryDB]    
GO
SET ANSI_NULLS ON    
GO    
SET QUOTED_IDENTIFIER ON    
GO

ALTER PROCEDURE [dbo].[CTInsert_UserSkills]    
(    
@UserID_int int, @SkillSN_int int, @Ordering_tinyint tinyint,     
@SkillLevelSN_tinyint tinyint, @SkillYearcount_tinyint tinyint    
)    
AS    
BEGIN    
SET NOCOUNT ON;

DECLARE @ErrorMessage varchar(200), @ErrorCode int    
BEGIN TRY

INSERT INTO CT_UserSkills (UserID_int, SkillSN_int, Ordering_tinyint,     
SkillLevelSN_tinyint, SkillYearcount_tinyint)    
VALUES (@UserID_int, @SkillSN_int, @Ordering_tinyint, @SkillLevelSN_tinyint,     
@SkillYearcount_tinyint)    
END TRY

BEGIN CATCH    
SELECT ERROR_MESSAGE()    
END CATCH

END 
```

这是输出：

```
Cannot insert duplicate key row in object 'dbo.CT_UserSkills' with unique index 'IX_CT_UserSkills'. The duplicate key value is (4, 1). 
```

但实际上我希望在以下错误消息的模式中找到 '%.*ls'，系统消息中的代码为 2601：

```
Cannot insert duplicate key row in object '%.*ls' with unique index '%.*ls'. 
The duplicate key value is %ls. 
```

你能指导我找到那个（'%.*ls'）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:20:48.947

向存储过程添加另一个 OUTPUT 参数：

```
ALTER PROCEDURE [dbo].[CTInsert_UserSkills]    
(    
@UserID_int int, @SkillSN_int int, @Ordering_tinyint tinyint,     
@SkillLevelSN_tinyint tinyint, @SkillYearcount_tinyint tinyint,    
@ObjectID int OUTPUT
) 
```

然后在您的 catch 块中，将此变量设置为您需要发送回调用程序的任何值。

# css - CSS背景图像未加载

> ID：12227716
> 
> 赞同：3
> 
> 时间：2012-09-01T12:29:18.863
> 
> 标签：css, google-chrome, background-image

我最近在 chrome 中遇到了一个非常奇怪的错误，那就是当您第一次加载页面时，或者在没有背景图像显示的隐身模式下。

当您然后 F5 页面时，背景图像全部加载。

当您检查 css 时，它会在 css 面板中显示图像 url，但是当您将鼠标悬停在 url 上时，它不会显示带有图像预览的工具提示。

当您检查下载的资源时，甚至都没有提到背景图像下载。

然后刷新页面，它工作正常，css url的工具提示甚至显示预览。

该错误仅在第一次加载时随机发生，无法保证重现。

另外值得注意的是，如果您取消勾选然后重新勾选 chrome 上的 background-image 属性，然后它会下载并显示图像。

我有一段 jquery 可以解决这个问题，但你可以看到它几乎不是很优雅！

```
$('*').each(function(){
var bg = $(this).css('background-image');
$(this).css('background-image', 'none');
$(this).css('background-image', bg);

}); 
```

这发生在多个版本的 chrome 中的每个窗口实例上。

任何想法都会很棒！谢谢你！

您也许可以在[http://ensa.ac.uk上看到它的发生](http://ensa.ac.uk)

这是一个视频演示[@http ://youtu.be/oLTyhk5rXgE](http://youtu.be/oLTyhk5rXgE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:10:14.777

只是要注意。

问题已经解决了。

问题是浏览器最后下载了所有的 CSS 背景图像。因此，如果您在完成下载图像之前刷新页面，当页面再次加载时，它会从缓存中加载。但由于图像没有完全下载，它们无法正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:37:45.910

首先，修复这些：

```
backg1round-color: #c7dfe3;
backg1round-color: rgba(255,255,255,0.67); 
```

如果 images 是子文件夹，则使用

```
url('images/logo-bg2.jpg'); 
```

代替

```
url('/images/logo-bg2.jpg'); 
```

在 main.css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:09:25.020

试试这个。虽然没有测试；

```
$('*').each(function(){
var bg = $(this).css('background');
$(this).css('background', 'none');
$(this).css('background', bg);
}); 
```

并在您的 CSS 中进行相关更改（即`background-image`to ）。`background`

**或尝试；**

```
$('*').each(function(){
var bg = $(this).css('background-image');
$(this).css('background-image', 'none');
$(this).css('background-image','url(bg)'); // or try url("bg") i am confused :P
}); 
```

通过一些搜索和研究，我得出了一个结论；

> 我解决这个问题的方法是上课。每个状态都有一个单独的 CSS 类，然后只需使用 jQuery 来更改类。这将确保在设置类时所有图像都已实际下载并可用——我认为这是 Chrome 失败的地方（可能所有 WebKit 浏览器都会这样做）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T13:34:27.433

```
Change css class as:

#nav
{
    background-image: url(../images/logo-bg2.jpg);
    height: 180px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T19:32:30.527

欧文，

我仍然在我正在处理的应用程序上看到这个问题。我知道这也是一个 hacky 解决方案，但它比您发布的 jquery 解决方案要少一些。我只是在css包含之后根据时间抛出了一个版本号

例如“ rel="stylesheet" type="text/css" />

我知道这会导致 css 永远不会被缓存，但我还没有找到任何其他解决方案。

# trigger.io - TriggerIO：在不同的端口上运行网络

> ID：12227720
> 
> 赞同：0
> 
> 时间：2012-09-01T12:29:36.613
> 
> 标签：trigger.io, forge

如何`forge web`在不同的端口上运行？我在文档上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:58:15.713

对不起，你还不能！如果您迫切需要更改它，请参阅 中的`run_web`方法`.template/generate_dynamic/web_tasks.py`。

**注意**，如果您手动更改端口，如果我们重新下载您的模板，更改将会丢失！

正如 TODO 所暗示的那样，我们确实有更好的解决方案......

# javascript - 在javascript中读取文本文件的第一行

> ID：12227729
> 
> 赞同：4
> 
> 时间：2012-09-01T12:30:04.697
> 
> 标签：javascript, html, version, text-files

假设我的 Web 服务器上有一个文本文件，在该文件下`/today/changelog-en.txt`存储有关我的网站更新的信息。每个部分都以版本号开头，然后是更改列表。

正因为如此，文件的第一行总是包含最新的版本号，我想用纯 JavaScript *(no jQuery)*读出它。这是可能的，如果是的话，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T12:46:31.417

使用 XHR 应该足够简单。像这样的东西对你来说很好：

```
var XHR = new XMLHttpRequest();
XHR.open("GET", "/today/changelog-en.txt", true);
XHR.send();
XHR.onload = function (){
    console.log( XHR.responseText.slice(0, XHR.responseText.indexOf("\n")) );
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:51:22.160

所以看到txt文件是外部可用的，即：对应一个URL，我们可以做一个XHR/AJAX请求来获取数据。注意没有 jQuery，所以我们将编写稍微冗长的 vanilla JavaScript。

```
var xmlHttp;

function GetData( url, callback ) {

    xmlHttp = new XMLHttpRequest(); 
    xmlHttp.onreadystatechange = callback;
    xmlHttp.open( "GET", url, true );
    xmlHttp.send( null );
}

GetData( "/today/changelog-en.txt" , function() {

    if ( xmlHttp.readyState == 4 && xmlHttp.status == 200 {

        var result = xmlHttp.responseText;
        var allLines = result.split("\n");

        // do what you want with the result 
        // ie: split lines and show the first line

        var lineOne = allLines[0];

    } else {
        // handle the error
    }
}); 
```

# model-view-controller - 如何在 Zend Framework 中从索引控制器调用自定义控制器

> ID：12227733
> 
> 赞同：0
> 
> 时间：2012-09-01T12:30:13.540
> 
> 标签：model-view-controller, zend-framework

我是 Zend 框架的新手。我在 netbeans 中制作了示例项目。它可以正常显示 index.phtml 。但是，我需要调用我的控制器。我尝试过的如下。

```
IndexController.php

<?php

class IndexController extends Zend_Controller_Action
{

    public function init()
    {

    }

    public function indexAction()
    {
        firstExample::indexAction();
    }    

} 
```

而且我已经删除了 index.phtml 的所有内容（只是一个空白文件），因为我不想渲染这个视图。我的自定义控制器是：

```
firstExampleController.php

<?php
class firstExample extends Zend_Controller_Action{
    public function indexAction(){
        self::sum();
    }

    public function sum(){
        $this->view->x=2;
        $this->view->y=4;
        $this->view->sum=x + y;
    }
}
?>

firstExample.phtml

<?php
echo 'hi';
echo $this->view->sum();
?> 
```

如何在 firstExample.php 中显示 sum 方法。

它只是在点击以下 URL 后显示空白页面。

```
http://localhost/zendWithNetbeans/public/ 
```

我想在点击上面的 URL 之后，首先执行到 public 文件夹中的 index.php。我没有更改 index.php 的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:57:43.580

您错误地使用了控制器（MVC），在您的情况下，控制器不应该执行任何业务逻辑 sum 方法。控制器只负责控制请求并将模型和视图粘合在一起。这就是你现在调用它时遇到问题的原因。

创建模型添加方法总和，并在您想要的任何控制器中使用。从控制器您可以将模型传递给视图。

这是示例： http: [//framework.zend.com/manual/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)它使用数据库，但没有必要与数据库一起使用。

基本上，您的总和示例可能如下所示：

```
class Application_Sum_Model {

 public function sum($x, $y) {
   return ($x + $y);
 }
}

class IndexContoler extends Zend_Controller_Action {

   public function someAction() {

    $model = new Application_Sum_Model(); 

    //passing data to view that's okay
    $this->view->y   = $y;
    $this->view->x   = $x;
    $this->view->sum = $model->sum($x, $y); //business logic on mode

   }
} 
```

请阅读控制器是如何工作的， http: [//framework.zend.com/manual/en/zend.controller.quickstart.html](http://framework.zend.com/manual/en/zend.controller.quickstart.html)

# javascript - 如何在 JavaScript 中获取函数正文？

> ID：12227735
> 
> 赞同：36
> 
> 时间：2012-09-01T12:30:46.480
> 
> 标签：javascript, function

```
function derp() { a(); b(); c(); } 
```

`derp.toString()`将返回`"function derp() { a(); b(); c(); }"`，但我只需要函数体，所以`"a(); b(); c();"`，因为我可以评估表达式。是否有可能以跨浏览器的方式执行此操作？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-01T12:34:02.250

```
var entire = derp.toString(); 
var body = entire.slice(entire.indexOf("{") + 1, entire.lastIndexOf("}"));

console.log(body); // "a(); b(); c();" 
```

请使用搜索，这是[这个问题的重复](https://stackoverflow.com/questions/3179861/javascript-get-function-body)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-01T12:34:55.873

由于您想要第一个`{`和最后一个之间的文本`}`：

```
derp.toString().replace(/^[^{]*{\s*/,'').replace(/\s*}[^}]*$/,''); 
```

请注意，我将替换分解为正则表达式，而不是一个覆盖整个事物的正则表达式 ( `.replace(/^[^{]*{\s*([\d\D]*)\s*}[^}]*$/,'$1')`)，因为它占用的内存要少得多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-05T23:57:42.697

注意：接受的答案取决于解释器不做疯狂的事情，比如在“function”和“{”之间抛出评论。IE8 很乐意这样做：

```
>>var x = function /* this is a counter-example { */ () {return "of the genre"};
>>x.toString();
"function /* this is a counter-example { */ () {return "of the genre"}" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-30T18:14:06.530

一个单行简短的正则表达式示例：

```
var body = f.toString().match(/^[^{]+\{(.*?)\}$/)[1]; 
```

如果你最终想要`eval`脚本，并假设函数不带参数，这应该会快一点：

```
var body = '(' + f.toString() + ')()'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-01T12:41:42.227

你需要这样的东西：

```
var content = derp.toString();
var body = content.match(/{[\w\W]*}/);
body = body.slice(1, body.length - 1);

console.log(body); // a(); b(); c(); 
```

# c# - 删除行后在sqlite中重置rowid

> ID：12227736
> 
> 赞同：0
> 
> 时间：2012-09-01T12:30:55.817
> 
> 标签：c#, sql, sqlite

当我从表中删除一行时，rowID 号被删除；这意味着 rowID 不再真正排序。在这种情况下，我想重置 rowID 以便新的 ID 将被排序和连续。我试图用 ALTER TABLE 来做到这一点：

```
ALTER TABLE my_table DROP ID;
ALTER TABLE my_table AUTO_INCREMENT = 1;
ALTER TABLE my_table ADD ID int UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST; 
```

...但这不起作用。我怎样才能得到连续的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:43:07.670

在技​​术上是可行的，如果有些不明智 -[在 SQLite 中为 AUTOINCREMENT 设置起始值](https://stackoverflow.com/questions/692856/set-start-value-for-autoincrement-in-sqlite)。但听起来你使用了错误的自动增量，你绝对不应该在每次从表中删除一行时更改每一行的 id 值。这使得在查询中连接其他表非常困难，并且在大表上速度会非常慢。为什么 id 是`1,2,4`而不是`1,2,3`无论如何都重要？你仍然`ORDER BY`可以用同样的方式。

# c# - 浏览需要记录信息的网站

> ID：12227737
> 
> 赞同：0
> 
> 时间：2012-09-01T12:31:01.327
> 
> 标签：c#, session, cookies, httpwebrequest

我一直试图让它工作几个小时，但收效甚微。从第一次请求后的源代码中，我可以看到登录成功，但使用 cookie 访问其他人不断询问登录信息。

这是我要访问的网站：http: [//gpro.net/](http://gpro.net/)

这是我正在使用的代码： string formUrl = "http://gpro.net/pl/Login.asp?langCode=pl&Redirect=gpro.asp"; // 注意：这是表单发布到的 URL，而不是表单的 URL（您可以在 HTML 表单标签字符串的“action”属性中找到它 formParams = "textLogin=user&textPassword=pass&Logon=Login&LogonFake=Sign+in ";

```
 string strResponse;
        HttpWebRequest requestLogin = (HttpWebRequest)WebRequest.Create(formUrl);
        requestLogin.Method = "POST";
        requestLogin.CookieContainer = cookieJar;
        requestLogin.ContentType = "application/x-www-form-urlencoded";

        requestLogin.ContentLength = formParams.Length;
        StreamWriter stOut = new StreamWriter(requestLogin.GetRequestStream(), System.Text.Encoding.ASCII);
        stOut.Write(formParams);
        stOut.Close();

        HttpWebResponse responseLogin = (HttpWebResponse)requestLogin.GetResponse();
        StreamReader stIn = new StreamReader(responseLogin.GetResponseStream());
        strResponse = stIn.ReadToEnd();
        stIn.Close();
        sb.Append(strResponse);
        sb.AppendLine();
        sb.AppendLine();
        sb.AppendLine();
        //Add cookies to CookieJar (Cookie Container)
        foreach (Cookie cookie in responseLogin.Cookies)
        {
            cookieJar.Add(new Cookie(cookie.Name.Trim(), cookie.Value.Trim(), cookie.Path, cookie.Domain));
            sb.AppendLine(cookie.Name.ToString() + Environment.NewLine + cookie.Value.ToString() + Environment.NewLine + cookie.Path.ToString() + Environment.NewLine + cookie.Domain.ToString());
        }

        //Grab the cookie we just got back for this specifc page

        string cookies = cookieJar.GetCookieHeader(requestLogin.RequestUri);

        //put it back in the cookie container for the whole server

        cookieJar.SetCookies(new Uri("http://www.gpro.net/"), cookies);

        string testResults = string.Empty;
        HttpWebRequest runTest = (HttpWebRequest)WebRequest.Create("http://www.gpro.net/pl/RaceAnalysis.asp");
        runTest.Referer = "http://gpro.net/pl/gpro.asp";
        runTest.CookieContainer = cookieJar;
        //runTest.Method = "POST";
        //runTest.ContentType = "application/x-www-form-urlencoded";
        //StreamWriter stOut2 = new StreamWriter(runTest.GetRequestStream(), System.Text.Encoding.ASCII);
        //stOut2.Write(formParams);
        //stOut2.Close();
        StreamReader stIn2 = new StreamReader(runTest.GetResponse().GetResponseStream());
        testResults = stIn2.ReadToEnd();
        stIn2.Close();
        sb.Append(testResults);
        e.Result = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:03:40.197

我发现上面的代码和堆栈溢出中发布的每个类似代码有什么问题（我已经尝试过所有标记为工作）。当我使用浏览器重定向登录时工作正常，但使用上述方法，我的请求被重定向到相同的地址，但没有 www 前缀。这导致了两个不同的 cookie 集合。我从解决登录问题的每个请求中删除了 www 前缀。

# linq - 选择中的 C# LINQ

> ID：12227738
> 
> 赞同：1
> 
> 时间：2012-09-01T12:31:07.557
> 
> 标签：linq

```
Enumerable.Range(1, 999).Select((n,i) =>{ return n*i;}) 
```

“我”每次都进入什么？

```
Enumerable.Range(1, 999).Select((n,i,j) =>{ return n*i*j;}) 
```

为什么我不能添加“j”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:34:34.817

IEnumerable 上的 Select() 扩展方法的第一个参数有两种形式。一个接受一个参数（枚举的当前元素）和第二个两个参数（当前元素和索引）。没有采用三个参数的版本。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb548891.aspx](http://msdn.microsoft.com/en-us/library/bb548891.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:35:52.497

接受带有两个参数的 lambda的`Select`重载将从序列中获取第一个参数，第二个参数是元素的索引。

在您的示例`i`中将始终为`n-1`，因此第二个参数的使用不多。当使用非平凡序列或非数字类型的序列时，在选择表达式中使用元素的顺序号有时可能是一个优势。

没有三参数版本。这就是为什么`(n,i,j)`不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:36:05.917

i 是您用于当前投影的元素的索引的名称。您不能指定第三个参数，因为 Select 没有重载，它定义了一个接受三个参数的委托。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T12:36:07.340

您可以基于 value ( `Select(n)`) 或基于 value 和 index ( `Select(n, i)`) 构建新元素。`Select()`没有定义三个参数。

比较：http: [//msdn.microsoft.com/en-us/library/system.linq.enumerable.select](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select)

# c# - 如何遍历 GridView 中的每一行、每一列和每一单元格并获取其值

> ID：12227742
> 
> 赞同：7
> 
> 时间：2012-09-01T12:31:37.613
> 
> 标签：c#, asp.net, gridview

我有一个`GridView`数据绑定，在 button_click 上我想逐行读取`GridView`每一列并读取一行中每个单元格的值并更新数据库中的表？我也知道如何检查该单元格是否包含空值。

我正在尝试这样的事情并陷入困境：

```
protected void SAVE_GRID_Click(object sender, EventArgs e)
{
    int rowscount = GridView2.Rows.Count;
    int columnscount = GridView2.Columns.Count;
    for (int i = 0; i < rowscount; i++)
    {
        for (int j = 1; j < columnscount; j++)
        {
            // I want to get data of each cell in a row
            // I want to read the corresponding header and store
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-01T12:39:12.077

最简单的方法是使用`foreach`：

```
foreach(GridViewRow row in GridView2.Rows)
{
    // here you'll get all rows with RowType=DataRow
    // others like Header are omitted in a foreach
} 
```

编辑：根据您的编辑，您访问的列不正确，您应该从 0 开始：

```
foreach(GridViewRow row in GridView2.Rows)
{
    for(int i = 0; i < GridView2.Columns.Count; i++)
    {
        String header = GridView2.Columns[i].HeaderText;
        String cellText = row.Cells[i].Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-18T15:36:11.313

正如“Tim Schmelter”所说，这是最好的方法：只需将其代码更改为 seconde 循环（ GridView2.Columns[i].Count by row.Cells.Count ），因此看起来似乎是：

```
foreach(GridViewRow row in GridView2.Rows)
{
    for(int i = 0; i < GridView2.Columns.Count; i++)
    {
        String header = GridView2.Columns[i].HeaderText;
        String cellText = row.Cells[i].Text;
    }
} 
```

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T12:48:40.310

```
foreach (DataGridViewRow row in GridView2.Rows)
            {
                if ( ! row.IsNewRow)
                {
                    for (int i = 0; i < GridView2.Columns.Count; i++)
                    {
                        String header = GridView2.Columns[i].HeaderText;
                        String cellText = Convert.ToString(row.Cells[i].Value);
                    }
                }
            } 
```

这里在迭代单元格值之前需要检查 NewRow。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-11T01:30:54.670

```
foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            for (int i = 0; i < dataGridView1.Columns.Count; i++)
            {
                String header = dataGridView1.Columns[i].HeaderText;
                //String cellText = row.Cells[i].Text;
                DataGridViewColumn column = dataGridView1.Columns[i]; // column[1] selects the required column 
                column.AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells; // sets the AutoSizeMode of column defined in previous line
                int colWidth = column.Width; // store columns width after auto resize           
                colWidth += 50; // add 30 pixels to what 'colWidth' already is
                this.dataGridView1.Columns[i].Width = colWidth; // set the columns width to the value stored in 'colWidth'
            }
        } 
```

# objective-c - UIView 下方有按钮

> ID：12227744
> 
> 赞同：0
> 
> 时间：2012-09-01T12:31:54.887
> 
> 标签：objective-c, ios, uiview, uibutton, transparent

这张图我的问题很简单：

[![界面视图](../Images/ebe0cb02a7fe225ed5087cf6a5ebbd3f.png)](https://i.stack.imgur.com/DYYqz.png)

我在蓝色笔划上方有一个视图。我们可以看到后面的按钮，因为这个 UIView 背景图片在按钮的左边是透明的。

我的问题是视图后面的按钮不可点击。有没有办法让它们可以点击（不用添加或删除上面的视图）？

谢谢 ！

问候，塞巴斯蒂安；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T20:52:40.207

尝试设置

```
[viewAboveTheBlueStroke setUserInteractionEnabled:false]; 
```

因为通常会`UIView`从其他视图中窃取事件处理它所涵盖的内容（即您的按钮），并且之后不会传递它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:12:08.690

您的图片链接已损坏。

但是，您可以将`buttonType`您`UIBUtton`的`UIButtonTypeCustom`

然后把它们带到前面：

```
[self.view bringSubViewToFron:myBut]; 
```

您也可以考虑`UIGestureRecognizers`在前面添加图像。

# java - 如何将 if 语句中的多个字符串与 Java 进行比较？

> ID：12227746
> 
> 赞同：-2
> 
> 时间：2012-09-01T12:31:58.473
> 
> 标签：java, string, if-statement

我不完全确定如何措辞。我想知道如何检查变量中是否存在多个字符串之一。有人告诉我这会起作用，但它没有达到我的预期。

```
 String lett2array=arr[i];
       String[] lett=lett2array.split("");
       int y = 0;
       while(y != lett.length){
           if(lett[1].equals("a")||lett[1].equals("e")||lett[1].equals("i")||lett[1].equals("o")||lett[1].equals("u")){
               inputField.append(" \n"+lett[y]);
           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:48:02.087

您的代码是以非常迂回的方式编写的。

1.  每个循环都检查字符串的第二个字母是没有意义的 - 事先检查并存储结果
2.  `.split("")`当你想要的只是一个字符数组时不要使用
3.  使用 for 循环而不是使用 while 循环进行迭代

我是这样写的：

```
String str = arr[i];
char[] letters = str.toCharArray();

boolean secondLetterIsVowel = letters[1] == 'a'
                           || letters[1] == 'e'
                           || letters[1] == 'i'
                           || letters[1] == 'o'
                           || letters[1] == 'u';
for(char letter : letters) {
    if(secondLetterIsVowel) {
        inputField.append(" \n" + letter);
    }
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:34:42.180

你应该使用`||`，而不是`|`

```
if(lett[1].equals("a") || lett[1].equals("e") || lett[1].equals("i") || lett[1].equals("o") || lett[1].equals("u")) {
    inputField.append(" \n"+lett[y]);
} 
```

`|`是按位或运算符，而`||`是短路逻辑或运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:35:26.977

使用 Apache Commons：

```
StringUtils.startsWithAny(String  string, String [] searchStrings) 
```

更多信息：[http ://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)

问候，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:34:49.020

你用过| （按位或）而不是 || （逻辑或）

每当您想“测试条件一或条件 2”时，请使用“||”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T12:34:54.807

如果你有这样的事情：

```
if( a.equals( b ) || a.equals( c ) || a.equals( d ) ) 
```

您可以将其重写为：

```
if( Arrays.asList( b,c,d).contains( a ) ) 
```

当然，如果 b、c 和 d 是常量，您也可以将列表创建为常量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T12:46:26.980

这是我的解决方案。使用`charAt(int index)`代替`split`，这是 O(n) 时间复杂度，并比较`chars`，而不是`String`s，它更快。

```
 String currString = arr[i]; // Get the current string
    char secondLet = currString.charAt(1); // Get the second letter

    // chars are primitive, so == will suffice
    if(secondLet == 'a' || secondLet == 'e'
        || secondLet == 'i' || secondLet == 'o' || secondLet == 'u') {
        // The second letter is a vowel!
        // Do whatever you want to do.......
        // I didn't understand if you wanted to output the whole String,
        // Or just the vowels. Whatever. Just do what you want.
    } 
```

# cryptography - AVR Crypto Lib 中的 AES 函数未编译

> ID：12227747
> 
> 赞同：2
> 
> 时间：2012-09-01T12:32:02.247
> 
> 标签：cryptography, aes, avr, winavr

我正在尝试在我的 AVR 项目中使用 AVR Crypto Lib (http://avrcryptolib.das-labor.org/trac/wiki/AES) 中的 AES 函数，但是当我复制所有必需的文件时，它给了我以下错误. 我在 Windows 上使用 WinAVR，并且在 AVR Studio 5 上也尝试过使用默认项目但没有成功。

```
main.o: In function `main':
c:\.../main.c:40: undefined reference to `aes128_init'
c:\.../main.c:41: undefined reference to `aes128_enc'
"make.exe": *** [main.elf] Error 1 
```

就好像它甚至没有尝试读取确实存在这些函数的 .c 文件。网站上的示例说调用#include“aes.h”，如果您查看该文件，它会调用所有其他.h 文件。

如果我编辑 .h 文件并告诉他们包含自己的 .c 文件 - 例如在 aes_keyschedule.h 中，我告诉它包含“aes_keyschedule.c”这样的作品并使“aes128_init”消息消失但引入更多问题。最终当我到达 asm .S 文件时它不会编译。当然这不是它应该如何工作的，但我不知道其他人是如何编译的。

所以我想我会问 - 有没有其他人经历过这个，或者有没有人有一个非常简单的 AES 示例我可以看一下？也许有比 AVR Crypto Lib 更好的东西？

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:19:57.267

发现问题，只好修改makefile。

我将 SRC 更改为以下内容，一切正常：

```
SRC = $(TARGET).c aes128_dec.c aes128_enc.c aes_dec.c aes_enc.c aes_invsbox.c aes_keyschedule.c aes_sbox.c 
```

另外，我将 ASRC 更改为： `ASRC = gf256mul.S`

# jquery-mobile - jquery移动函数调用两次

> ID：12227751
> 
> 赞同：0
> 
> 时间：2012-09-01T12:32:19.457
> 
> 标签：jquery-mobile

我在带有多视图插件的jquery mobile中使用更改页面事件，当页面更改函数调用两次时，这意味着如果使用警报，它会显示相同的警报两次，当我单击后退按钮时，它会显示页面，但是当我经常这样做时它在插件文件中显示错误任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:30:13.597

你是说`pagebeforechange`事件吗？此事件的触发次数是设计的两倍。这两个调用之间的区别在于数据的`toPage`属性：

```
jQuery(document).bind('pagebeforechange', function(e, data) {
    var toPage = data.toPage;
    if(typeof toPage === 'string') {
        // -- triggered first
        // -- toPage is a string containing the page`s url
    } else {
        // -- triggered second
        // -- toPage is an jQuery collection object containing the page
    }
}); 
```

# database - 什么是数据库缓存以及如何使用它？

> ID：12227752
> 
> 赞同：2
> 
> 时间：2012-09-01T12:32:35.087
> 
> 标签：database, caching, heroku, playframework, playframework-2.0

我主要是在 Play 的上下文中谈论数据库和缓存！Heroku 上的应用程序：

缓存对数据库有什么作用以及如何使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:40:23.133

缓存用于避免过多地查询数据库。

一些查询需要特别长的时间才能运行。通过缓存结果（例如，将其保存在内存中），不需要再次执行昂贵的查询（在数据仍然有效的一段时间内 - 有效性可能是几分钟，或者直到某些数据某个表发生变化）。

缓存通常只是实现为一个巨大的哈希表，将键和值。键用于查找值。

[http://www.playframework.org/documentation/2.0/ScalaCache](http://www.playframework.org/documentation/2.0/ScalaCache)描述了缓存的使用。为它编写代码非常容易。要将某些内容存储在缓存中：

```
Cache.set("item.key", connectedUser) 
```

在这里，您只需传递存储对象的密钥和对象。

要检索它：

```
val user: User = Cache.getOrElseAs[User]("item.key") {
  User.findById(connectedUser)
} 
```

基本上，getOrElseAs[将数据投射到此处的类]（此处的键）。

注意你可以传递给的块`getOrElseAs`，这样如果没有找到，你可以查询数据库。

否则，您也可以使用`Cache.getAs[User]("item.key")`（但如果找不到，您可能还是想查询）。

# android - Android - 从 SD 线安装 apk

> ID：12227754
> 
> 赞同：0
> 
> 时间：2012-09-01T12:33:06.830
> 
> 标签：android

我正在分发我的 android 应用程序 (apk) 以及 SD 卡中的一些加密音频文件。在android手机上安装apk后，我希望自动删除apk。其实我不希望apk被别人复制。是否有任何解决方案使apk无法被其他人安装或复制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:34:38.353

通过在 SD 卡上分发它，您可以**很**容易地进行复制。是什么阻止他们只是复制卡？即使您想出一种方法来防止在 Android 上执行此操作，他们也可以将卡插入任何其他类型的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:49:58.707

> 我希望自动删除 apk

自动删除 no ，您可以提示用户最多删除。

我不知道你为什么要这样做，但你绝对可以让你的应用程序处于非活动状态，实现：

x 次运行策略或实施运行 x 天仅取决于您的需要，但当他们重新安装应用程序时再次运行。

所以添加一个在线激活模块并保留电话详细信息以避免重新激活

# sms - 通过 PSTN 发送和接收 SMS

> ID：12227757
> 
> 赞同：1
> 
> 时间：2012-09-01T12:33:42.237
> 
> 标签：sms, telephony

我想知道如何`SMS`通过 PC 调制解调器发送和接收`PSTN`？是否有任何应用程序可以为我执行此操作，或者此过程的协议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:50:24.623

如果您只是想通过 PC 发送短信，请尝试使用[Google Voice](http://www.google.com/googlevoice/about.html)。它是免费的，它允许您从网络浏览器发送和接收短信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:14:18.510

您需要一个支持固网 SMS 的运营商，并且您需要一个可以发送 SMS 的调制解调器，例如：

[http://www.ntstelecom.co.uk/SMSmodem.htm](http://www.ntstelecom.co.uk/SMSmodem.htm)

可以使用 GSM 调制解调器和 AT 命令发送 SMS 的应用程序可能能够使用上述代替 GSM 调制解调器，通过 PSTN 发送 SMS。

# ruby-on-rails - 升级后 Rails 删除链接不起作用

> ID：12227758
> 
> 赞同：0
> 
> 时间：2012-09-01T12:33:45.930
> 
> 标签：ruby-on-rails, ruby, hyperlink, destroy

使用 rails 2.3.8 我有

```
= link_to 'old_Delete', link_path(@link), :confirm => 'Are you sure?',  
:method => :delete 
```

对于 rails 3.1.8，这不再有效，没有错误，日志只显示一个显示请求。

我尝试将其更改为

```
= link_to 'Delete', link_path(@link), method: :delete, 
data: { :confirm => 'Are you sure?' } 
```

但这也无济于事。

我怎样才能有一个有效的删除链接。

我创建了一个带有“发布”资源的新应用程序（rails 3.2.7），以查看链接在新应用程序中的外观。

为此生成的链接是：

```
= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } 
```

但是当我尝试使用该格式时，将帖子（帖子资源、模型等）替换为@link，即我在页面其他位置使用的链接实例，即

```
= link_to 'Destroy', @link, method: :delete, data: { confirm: 'Are you sure?' } 
```

它不起作用（没有错误）。

我尝试将 rails.js 保存在我的 public/javascripts 文件夹中（我关闭了评估编译）并包含 `config.action_view.javascript_expansions[:defaults] = %w(jquery rails)`在我的 config/application.rb 中，但它没有帮助，仍然看到获取并且没有发生删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:46:51.007

正如其他人所说，您可能有一个错字，`link`与`@link`. 但是删除停止工作的原因可能集中在对 UJS 的更改上。长答案，谷歌“rails 在 3.0 中更改为 ujs”。简短的回答，确保您的应用程序是`rails.js` 从适当的 ujs 助手提供程序加载的，例如[https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)

确保与您更改的其他更改一起：

```
= javascript_include_tag "application" 
```

至

```
= javascript_include_tag :defaults 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:41:38.187

最后一种方法是您的变量“链接”还是“@link”？你可以尝试使用后者吗？

# iphone - 如何将表格视图控制器放入标签栏控制器？

> ID：12227759
> 
> 赞同：1
> 
> 时间：2012-09-01T12:33:50.943
> 
> 标签：iphone, ios, xcode

我开始学习表格视图。我的应用程序使用选项卡栏控制器，所有选项卡都是简单视图。我想添加另一个选项卡，并在其中放置一个表格视图..我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:36:56.833

如果我想将另一个视图控制器添加到标签栏控制器，我通常会这样做：

```
NSMutableArray *items = [tabBarController.viewControllers mutableCopy];
MyTableViewController *c = [[MyTableViewController alloc] init];
[items addObject:c];
[c release];
tabBarController.viewControllers = items;
[items release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:10:45.337

这取决于您如何创建标签栏控制器。如果它是在 IB 中设计的，则将另一个选项卡栏项拖到主窗口。然后，我在选项卡栏中嵌入了一个视图控制器，并将其分配给相关的 tableview 类。需要编写该类的 .h 文件：

```
@interface myClass : UITableViewController <UITableViewDelegate, UITableViewDataSource> 
```

Apple 在您首次设置基本选项卡栏应用程序时使用的另一种方法是使用应用程序委托以编程方式处理它。看：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

对于相关代码。

# google-chrome - Google Chrome 左/右导航箭头 - 始终显示

> ID：12227760
> 
> 赞同：1
> 
> 时间：2012-09-01T12:34:01.800
> 
> 标签：google-chrome, navigation

在 OSX 上使用 Google Chrome 时，向左或向右滑动，您会在任一角看到一个带有箭头的圆圈，表示在您的历史记录中后退和前进，请参见此处：

[http://cld.jxpr.se/image/1Z3D1R3K141B](http://cld.jxpr.se/image/1Z3D1R3K141B)

在我正在开发的网站上，这些箭头始终存在，相互叠加，请参见此处：

[http://cld.jxpr.se/image/2o0N2O1d2e0t](http://cld.jxpr.se/image/2o0N2O1d2e0t)

那是在页面的中间，全屏。这些箭头仅在浏览器窗口扩展超出最大站点宽度时显示。

有什么想法吗？

谢谢戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:27:14.767

我遇到同样的问题。我正在使用 27" imac，所以它可能比大多数人对我的影响更大。我通常只是创建一个新标签并将我的 url 复制粘贴到其中。然后我关闭旧标签。虽然不是长期修复:(

# java - ICEFaces 3.1：重新渲染视图时引发 NullPointerException

> ID：12227765
> 
> 赞同：0
> 
> 时间：2012-09-01T12:34:34.100
> 
> 标签：java, xml, icefaces, spring-webflow, icefaces-3

我正面临 ICEFaces 的问题。似乎无法正确刷新视图。
我将为您提供视图、流程、bean 和我发现的奇怪行为的详细信息，这要归功于一些调试会话。

基本上，我正在处理一个延迟加载的 ace:DataTable。

```
<ace:dataTable id="blocchiTable" [..] /> 
```

我选择了一些行并单击标有“Modifica”（意大利语为“编辑”）的按钮：

```
<ace:menuItem id="modificaBloccoButton" value="Modifica" action="modificaBlocco" icon="ui-icon ui-icon-pencil" />` 
```

正如您将在流程中看到的，相关的点击事件将流程引导至决策状态：

```
<view-state id="creablocco" view="creablocco.xhtml">
    [.. other stuff ..]
    <transition on="modificaBlocco" to="decidiModifica">
        <evaluate expression="flowScope.blocchiBean.getRigheSelezionate()" result="flowScope.righeSelezionate"/>
    </transition>
</view-state>
<decision-state id="decidiModifica">
    <if test="!(flowScope.righeSelezionate).isEmpty()" then="modificaBlocco" else="fine" />
</decision-state> 
```

然后，另一个视图状态，与初始状态的相同视图相关联。在进入新的视图状态时，流程会要求 bean 为正确的行启用 cellEditor，以便在重新呈现视图时，选定的行将是可编辑的。

```
<view-state id="modificaBlocco" view="creablocco.xhtml">
    <on-entry>
        <evaluate expression="flowScope.blocchiBean.abilitaModifica()"/>
    </on-entry>    
    <transition on="salvaModificheBlocco" to="fine">
        <evaluate expression="flowScope.blocchiBean.salvaBlocchi()"/>
    </transition>
</view-state> 
```

不幸的是，在重新渲染视图时（我已经检查过该`<on-entry>`部分中指定的方法是否被实际调用），引发了以下**异常**：

```
AVVERTENZA: queued exception
java.lang.NullPointerException
    at org.icefaces.impl.util.DOMUtils.isWhitespaceText(DOMUtils.java:394)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:351)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:355)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:355)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:355)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:306)
    at org.icefaces.impl.util.DOMUtils.printNode(DOMUtils.java:290)
    at org.icefaces.impl.context.DOMResponseWriter.endDocument(DOMResponseWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:410)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.springframework.faces.webflow.FlowLifecycle.render(FlowLifecycle.java:80)
    at org.springframework.faces.webflow.JsfView.render(JsfView.java:89)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    at org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:221)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.traceNextValve(HttpRequestOperationCollectionValve.java:112)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:94)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

这是**完整的视图**：

```
<?xml version="1.0"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:ace="http://www.icefaces.org/icefaces/components" 
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/resources/includes/templates/template.xhtml">
    <ui:param name="pageTitle" value="Crea blocco" />
    <ui:define name="page-content">
        <ace:panel id="personalInfoInputPanel" header="Crea blocco">
            <div class="div_creablocco">
                <h:form id="creabloccoform">
                    <h:panelGrid id="creabloccoInputGrid" columns="1" styleClass="table_creablocco">
                        <ace:textEntry id="numeroFile" value="#{creaBloccoBean.numeroFile}" label="Numero file:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="numeroColonne" value="#{creaBloccoBean.numeroColonne}" label="Numero colonne:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="posizioneX" value="#{creaBloccoBean.posizioneX}" label="Coordinata X:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="posizioneY" value="#{creaBloccoBean.posizioneY}" label="Coordinata Y:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:pushButton id="pushBttnCreaBlocco"  value="Crea blocco" action="creaBlocco"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </ace:panel>

        <ace:panel id="blocchiPanel" header="Blocchi">
            <h:form id="blocchiTableForm">
                <ace:menuBar id="iconeBloccoMenu" rendered="#{!blocchiBean.modificaInCorso}">
                    <ace:menuItem id="dettagliBloccoButton" value="Dettagli" action="dettagliBlocco" icon="ui-icon ui-icon-search" />
                    <ace:menuItem id="modificaBloccoButton" value="Modifica" action="modificaBlocco" icon="ui-icon ui-icon-pencil" />
                    <ace:menuItem id="cancellaBloccoButton" value="Cancella" action="cancellaBlocco" icon="ui-icon ui-icon-closethick" />
                </ace:menuBar>
                <ace:menuBar id="iconeModificaBloccoMenu" rendered="#{flowScope.blocchiBean.modificaInCorso}">
                    <ace:menuItem id="annullaModificheButton" value="Annulla" action="annullaModificheBlocco" icon="ui-icon ui-icon-arrow-1-w" />
                    <ace:menuItem id="salvaModifiche" value="Salva" action="salvaModificheBlocco" icon="ui-icon ui-icon-disk" />
                </ace:menuBar>
                <ace:dataTable id="blocchiTable" value="#{blocchi}"
                    binding="#{flowScope.blocchiBean.table}" stateMap="#{flowScope.blocchiBean.stateMap}"
                    selectionMode="multiple" doubleClickSelect="false"
                    rowSelectListener="#{flowScope.blocchiBean.selectListener}"
                    rowUnselectListener="#{flowScope.blocchiBean.deselectListener}" var="blocco"
                    lazy="true" rows="10" paginator="true" paginatorPosition="bottom">
                    <ace:column id="idBloccoColumn" headerText="ID" styleClass="id">
                        <h:outputText id="idBloccoText" value="#{blocco.id}" />
                    </ace:column>
                    <ace:column id="numeroFileBloccoColumn" headerText="Numero file"
                        styleClass="numFile">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="numeroFileBloccoText"
                                    value="#{blocco.numeroFile}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="numeroFileBloccoInput"
                                    value="#{blocco.numeroFile}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="numeroColonneBloccoColumn"
                        headerText="Numero colonne" styleClass="numColonne">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="numeroColonneBloccoText"
                                    value="#{blocco.numeroColonne}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="numeroColonneBloccoInput"
                                    value="#{blocco.numeroColonne}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="posizioneXBloccoColumn" headerText="Posizione X"
                        styleClass="posX">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="posizioneXBloccoText"
                                    value="#{blocco.posizioneX}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="posizioneXBloccoInput"
                                    value="#{blocco.posizioneX}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="posizioneYBloccoColumn" headerText="Posizione Y"
                        styleClass="posY">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="posizioneYBloccoText"
                                    value="#{blocco.posizioneY}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="posizioneYBloccoInput"
                                    value="#{blocco.posizioneY}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                </ace:dataTable>
            </h:form>
        </ace:panel>
    </ui:define>
</ui:composition> 
```

这是**完整的流程**：

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="creaBloccoBean" class="com.infoone.siglo.viewbeans.CreaBloccoBean" />
    <var name="blocchiBean" class="com.infoone.siglo.viewbeans.BlocchiBean" />

    <view-state id="creablocco" view="creablocco.xhtml">
        <on-entry>
            <evaluate expression="flowScope.blocchiBean.getBlocchi()" result="flowScope.blocchi" />
        </on-entry>
        <transition on="creaBlocco" to="fine">
            <evaluate expression="gestoreBlocchiCtr.creaBlocco(creaBloccoBean)" />
        </transition>
        <transition on="cancellaBlocco" to="decidiCancellazione">
            <evaluate expression="flowScope.blocchiBean.getRigheSelezionate()" result="flowScope.righeSelezionate"/>
        </transition>
        <transition on="modificaBlocco" to="decidiModifica">
            <evaluate expression="flowScope.blocchiBean.getRigheSelezionate()" result="flowScope.righeSelezionate"/>
        </transition>
    </view-state>

    <decision-state id="decidiCancellazione">
        <if test="!(flowScope.righeSelezionate).isEmpty()" then="cancellaBlocco" else="fine" />
    </decision-state>
    <decision-state id="decidiModifica">
        <if test="!(flowScope.righeSelezionate).isEmpty()" then="modificaBlocco" else="fine" />
    </decision-state>

    <action-state id="cancellaBlocco">
        <evaluate expression="gestoreBlocchiCtr.rimuoviBlocchi(flowScope.righeSelezionate)" />
        <transition to="fine"/>
    </action-state>
    <view-state id="modificaBlocco" view="creablocco.xhtml">
        <on-entry>
            <evaluate expression="flowScope.blocchiBean.abilitaModifica()"/>
        </on-entry>    
        <transition on="salvaModificheBlocco" to="fine">
            <evaluate expression="flowScope.blocchiBean.salvaBlocchi()"/>
        </transition>
    </view-state>

    <end-state id="fine" />

</flow> 
```

我试图了解哪个 UI 组件导致了这种异常，幸运的是，我能够通过在调试模式服务器上启动 webapp 来隔离它。基本上，它是一个`<script>`有 22 个 textElement 子节点的节点。第三个孩子导致异常：

```
<script>
    |------ null_icefaces_config
    |------ ', '
    |------ null <<===== (This is the node which causes the exception. I mean exactly the null value associated to the "NULL type", here)
    |------ ', '
    |------ unknownWindow
    |------ [.. other children ..] 
```

我还检查了*writer*对象的内容，该对象是包含逐渐填充响应内容的输出流的对象。渲染这个元素生成的部分是：

```
<script>ice.setupBridge('null_icefaces_config 
```

你有没有遇到过类似的问题？你认为我应该将这个案例报告给ICEFaces的工作人员，以便他们检查它是否是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:45:45.960

Webflow 导航模型与 JSF 集成的方式存在问题。ICEFaces 代码使用阶段侦听器从请求中提取信息位，并且此阶段侦听器不在 POST-Redirect-GET Spring 导航模型的 GET 部分中执行。有一种解决方法，即实现 FlowExecutionListener 在这些情况下代替 PhaseListener。在此处查看 Listener 的教程和示例实现：

[http://wiki.icesoft.org/display/ICE/Spring+Web+Flow+2.3.1](http://wiki.icesoft.org/display/ICE/Spring+Web+Flow+2.3.1)

# vaadin - Panel 的标题与 Form 中其他组件的标题不对齐

> ID：12227770
> 
> 赞同：0
> 
> 时间：2012-09-01T12:34:41.927
> 
> 标签：vaadin

我们正在使用 vaadin 的 Form 实例。现在 TreeTable 或 TextField 的标题位于组件的左侧。但在面板上，标题在面板上方，而不是在左侧。

有没有办法解决它？例如，通过手动放置标题或告诉面板，他们的标题就像普通标题？

费边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:55:58.887

在 Vaadin 中，大多数组件将其标题处理委托给父组件容器。但是，组件可能会自行处理其标题。Button 和 Panel 就是此类组件的示例。

您可以通过将面板包装在 CssLayout 中并将标题从面板移动到布局来解决您的问题。

# javascript - 加载的 XML 文档为空 (Javascript)

> ID：12227776
> 
> 赞同：1
> 
> 时间：2012-09-01T12:35:32.980
> 
> 标签：javascript, xml

我正在尝试将 XML 文档加载到 Javascript 中，以便可以将其输出到网站上，但是当我加载 XML 文档时它为空，因此每次尝试从中读取时都会出现异常。这是我的代码：

网页上的代码

```
 var xmlDoc;

    loadXML();

    function loadXML(){
        xmlDoc = loadXMLDoc("http://www.tomrichardsonweb.co.uk/ABC/xml/pubs.xml");
    }

    function loadPub(){ 
        if(xmlDoc != null){ 
            document.getElementById('pub').innerHTML=
            xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue;
        }else{
            alert("null");
        } 
```

loadXMLDoc 方法

```
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
{
    xhttp=new XMLHttpRequest();
}
else
{
    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xhttp.open("GET",dname,false);
xhttp.send();
return xhttp.responseXML; 
```

}

XML 文件

```
 < ?xml version="1.0" encoding="UTF-8" ?>
<pub>
    <name>Bay Horse</name>
    <description>Situated at the foot of the stunning Pennine Range, amidst the          breathtaking landscape of Rivington, you will find The Bay Horse Inn. With open fires, cosy corners and a warm friendly atmosphere, this family run inn really does have something for everyone.

The perfect place to relax with family and friends our well stocked bar offers the finest cask ales, refreshing lagers and ciders, quality wines and spirits and a wide selection of soft drinks, teas and coffees.

 For diners our chalkboards boast classic pub food, all freshly prepared and cooked to order, alongside a great range of award winning "Pieminister" pies.

 And for those visiting the area on business or pleasure, or just passing through on a wider journey, and looking for somewhere to rest their heads then our bed and breakfast rooms could be just the answer!  Our friendly team (and our friendly regulars!) will try to make your stay as enjoyable as possible.</description>
    <web>N/a</web>
    <email>N/a</email>
    <phone>N/a</phone>
    <image></image>
</pub> 
```

我不断得到 xmlDoc = null。这里有什么问题？

编辑：在 Chrome 中，在网络选项卡下，它表示已加载 xml 文档。我在我的网站托管的服务器上测试所有这些，而不是在我的机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:31:59.067

首先，您应该将所有内联脚本移动到 js 文件中，以便代码易于管理，现在至于您的函数

```
function loadPub(i, xml){....}

function loadXMLHTTP(url, callbackfn, args) {//callbackfn:fn you need to load after xml loads, args:argument array to pass to the call back function
  if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  } else {
    alert("No browser support for XML-HTTP-request object")
  }
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        args.push( xmlhttp.responseXML);
        callbackfn.apply(this,args)
    }
  }
  xmlhttp.open("GET", url, false);
  xmlhttp.send(null);
}
function loadXML(){
        xmlDoc = loadXMLHTTP("xml/pubs.xml",loadPub,[0]);
}
loadXML(); 
```

在此函数中，ajax 请求等待从服务器加载 xml，然后它调用您通过 args 和 xml 传入的函数

# python - Python 语句打印错误

> ID：12227783
> 
> 赞同：0
> 
> 时间：2012-09-01T12:36:22.223
> 
> 标签：python, if-statement, while-loop

我正在编写一个程序，它应该在输入行中读取，直到输入一个空白行。如果该行以 Simon 开头说它应该打印出该行的其余部分。不以西蒙说开头的行应该被忽略。所以我无法编写程序，因为它需要像这样输出：

```
Enter: jump
Enter: Simon says shout loudly
shout loudly
Enter: simon would like you to eat a frog
Enter: Simon says clap your hands
clap your hands
Enter: 
```

我正在制作的代码是这样的：

```
word = raw_input("Enter: ")
i = ""
while word != i:
    if 'Simon says' in word:
        print word 
    word = raw_input("Enter: ") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:56:24.497

您的代码有两个问题：首先，您的`if`-condition 会巧妙地做错事 - 例如，

```
>>> 'hello, simon'.startswith('simon')
False
>>> 'simon' in 'hello, simon'
True 
```

`in`测试子字符串是否在字符串中的*任何位置*。为了测试它是否正好在*开始*，Python 提供了一个方便地调用的函数`startswith`：

```
>>> 'simon'.startswith('s')
True 
```

您唯一的另一个问题是，目前，您将打印出整个输入字符串，包括您想要删除的“Simon says”。删除它的最简单方法是使用`str.replace`：

```
>>> 'simon says'.replace('simon', 'fred')
'fred says' 
```

并且用空字符串 ( `''`) 替换将有效地删除子字符串。但这又出现了同样的问题——它会替换字符串中的*任何地方：*

```
>>> 'simon says lets play simon says'.replace('simon says', '')
' lets play ' 
```

但是你可以告诉它最多只替换一个 - 因为你已经知道字符串以“Simon says”开头，所以你知道那将是开头的那个：

```
>>> 'simon says lets play simon says'.replace('simon says', '', 1)
' lets play simon says' 
```

或者，您可以使用字符串切片 -`'fred'[2:]`要求从`'fred'`（所以，从 'e'）的第二个字符之后开始的字符串，一直到结尾：

```
>>> 'fred'[2:]
'ed' 
```

“西蒙说”有 10 个字母，所以：`word[10:]`将是`word`之后的一切。但是，如果您错误地计算了字母的数量，这很容易导致细微的错误 - 为避免这种情况，您可以让 Python 为您做这件事，如下所示：

```
word[len('Simon says'):] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:46:40.723

在伪代码中：

```
forever (while True) do the following:
  input a sentence
  if its length is 0: break
  else if it starts with 'Simon says':
     print sentence from the n-th character (sentence[n:]), 
     where n is the length of the string 'Simon says' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:48:10.397

好像你快到了，你只需要从输出中删除“Simon says”：

```
print word.replace('Simon says', '') 
```

# ios - GameCenter 提交分数但在 iOS 中返回错误

> ID：12227786
> 
> 赞同：1
> 
> 时间：2012-09-01T12:36:43.767
> 
> 标签：ios, game-center

我已按照[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/)上的教程进行操作，并设法让一切正常工作。事情是什么时候我提交了一个分数，一直说“缺少方法”。我该如何解决这个问题？谢谢..

```
- (void) callDelegate: (SEL) selector withArg: (id) arg error: (NSError*) err
{
    assert([NSThread isMainThread]);
    if([delegate respondsToSelector: selector])
    {
        if(arg != NULL)
        {
            [delegate performSelector: selector withObject: arg withObject: err];
        }
        else
        {
            [delegate performSelector: selector withObject: err];
        }
    }
    else
    {
        NSLog(@"Missed Method");
    }
} 
```

PS：[代码](https://mobiletuts.s3.amazonaws.com/iOS-SDK_Game-Center/GameCenter-ProjectCode.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:42:09.107

什么是选择器，什么是委托？

如果打印“Missed Method”，则表示选择器描述的方法未在委托对象上实现。

也许您传递了一个不正确的选择器，或者委托对象未设置或未完全实现？

**根据以下评论进行编辑：** 您似乎没有在 MainViewControllerClass 上实现 GameCenterManagerDelegate 协议的可选方法，而它被设置为 GameCenterManager 的委托。这没关系，但如果你想摆脱“缺少方法”日志消息，你应该确保你的 MainViewControllerClass 实现了整个协议：

```
@protocol GameCenterManagerDelegate <NSObject>
@optional
- (void) processGameCenterAuth: (NSError*) error;
- (void) scoreReported: (NSError*) error;
- (void) reloadScoresComplete: (GKLeaderboard*) leaderBoard error: (NSError*) error;
- (void) achievementSubmitted: (GKAchievement*) ach error:(NSError*) error;
- (void) achievementResetResult: (NSError*) error;
- (void) mappedPlayerIDToPlayer: (GKPlayer*) player error: (NSError*) error;
@end 
```

对于您所描述的情况，它是“- (void) scoreReported: (NSError*) error;” 那是缺失的。GameCenterManager 提交所有分数，一旦完成，它会尝试在其委托上调用 scoreReported 回调。然后它注意到它的委托上不存在该方法并打印出“Missing Method”。如果您在报告分数后不想做任何事情，您可以保持原样。

# java - 如何读取具有可变数组深度和结构的复杂 JSON 字符串？

> ID：12227787
> 
> 赞同：0
> 
> 时间：2012-09-01T12:36:45.960
> 
> 标签：java, json, algorithm, nested-lists

我有很多以嵌套列表形式组织的 JSON 数据。每个列表由其他列表组成，这些列表可以包含其他列表，依此类推。最深的列表由一对经度和纬度组成，例如

> [[[.....[16.353542354,48.2354242424],[16.46353535,48.2546754646]....].....]。

它看起来像这样的图表：

![坐标列表](../Images/b7957817b8491bc501298502a3a3a7a6.png)

我基本上不知道这些列表的嵌套程度。他们一直都不同。下一个困难的部分是我需要从中获取“坐标多边形”。这意味着仅由坐标对组成的列表属于同一个多边形。例如：

> [......[[16.23542424,48.2342424242],[16.2423242352354,48.12342534634],[16.35353453535,48.345635353]]......

这意味着有一个由 3 对坐标（即 3 个角）组成的多边形。我确信这可以通过某种字符串解析来解决。我想知道这是否可以通过基本的 JSON.simple（或者任何其他 API）的可能性实现。问题是 JSON 对它正在解析的数据一无所知。我必须告诉 JSON 对象是什么，并且必须使用类型转换来获取正确的数据。[请在此处](http://code.google.com/p/json-simple/wiki/DecodingExamples)查看这些示例。现在我需要另一种方式，但我永远不知道数据是什么类型*（“它还是另一个列表还是数据是坐标对”）*，因为这些列表非常动态。如何以方便的方式做到这一点？我可以编写一些带有一些“推送和弹出行为”的字符串解析算法来逐个字符地比较 JSON 字符串，但我想知道是否有更好的方法来做到这一点？

**[更新]**
我发现这是一种标准化的 JSON 格式，称为 GeoJSON。如果您知道如何读取数据，那就很清楚了。多多边形由多边形组成，多边形可以有孔，由多边形对象中的第二个数组表示。见规范： [多边形](http://www.geojson.org/geojson-spec.html#id4)，[多多边形](http://www.geojson.org/geojson-spec.html#id7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:22:50.033

> 我基本上不知道这些列表是如何嵌套的

您确切地知道这些列表的嵌套程度。在你的 json 的顶部，你有：

```
"type": "Multipolygon" 
```

对我来说，这意味着`List<Polygon>`。现在，什么是`Polygon`？嗯，这显然是一个`List<Coordinate>`. 最后，我们知道 a`Coordinate`是一个包含两个元素的列表。

总而言之，我们有`List<List<List<double>>>`. 阵列的深度是已知的。

```
class Location {
    private double _lat;
    private double _long;

    public Location(double lat, double long) { _lat = lat; _long = long }

    public static Location fromJSONArray(JSONArray json) {
        int n = json.length();
        if(n != 2) throw new IllegalArgumentException('json');

        return new Location(json.getDouble(0), json.getDouble(1));
    }
}
class Polygon : List<Location> {
    public static Polygon fromJSONArray(JSONArray json) {
        int n = json.length();
        Polygon p = new Polygon();
        for(int i = 0; i < n; i++) {
            p.add(Location.fromJSONArray(json.getJSONArray(i)));
        }
        return polygon;
    }
}

private List<Polygon> parseLists(JSONArray nestedList) throws JSONException
{
    List<Polygon> polygons = new ArrayList<Polygon>();
    int n = json.length();
    for(int i = 0; i < n; i++) {
        polygons.add(Polygon.fromJSONArray(json.getJSONArray(i)));
    }
    return polygons;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:04:25.360

用什么语言来解析 JSON。从理论上讲，这个想法可以适用于大多数语言。如果它的 javascript 你可以使用

```
 for(var key in myJSONObjectVariable){
       var current = myJSONObjectVariable[key];
       //Have some logic or inner loops taking place on current
  } 
```

然而，根据 JSON 数据的不可预测性，我认为您可能是对的。字符串解析可能是要走的路

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:12:28.970

您在这里有多个问题，因此我首先建议您将问题分解为多个步骤。

第 1 步，您需要以某种方式在嵌套中的某个位置找到一个不同的列表。

您没有提及您使用的是哪种编程语言，因此该问题的答案会有所不同。如果您直接在 JavaScript 中执行此操作，那么访问任何不同的列表都是一种简单的数据访问：

```
geometry.coordinates[0][1] 
```

或作为列表的 Java 映射（不检查空返回或无效数组索引的错误，只是一个示例）

```
geometry.get("coordinates").get(0).get(1) 
```

如果您使用 Java 或 C++ 或类似的东西，您可能会发现使用 JSON 库并将数据转换为适合语言的结构（例如矢量映射）更容易。我不会尝试直接操作 JSON 字符串。

然后，一旦您能够以适当的语言方式获取数据内容，第 2 步将根据您的规则评估您检索的内容并确定您检索的数据*类型*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T13:16:24.507

下面的代码将递归提取任意深度的纬度和经度值`resultantArray`，使用[JSON Java 库](http://www.json.org/java/index.html)（jar 可以从[这里](http://mvnrepository.com/artifact/org.json/json/20090211)下载）：

```
public void run() throws JSONException
{
    JSONArray nestedList =
        new JSONArray("[" + "[ 1, 2 ]," + "[ [ 1, 2 ], [ 1, 2 ], [ 1, 2 ] ]," + "[ 3, 4 ],"
            + "[ [ [ [ 1, 2 ], [ 2, 3 ], [ 3, 4 ] ], [ 1, 2 ], [ 1, 2 ], [ 1, 2 ] ] ] ]");
    parseLists(nestedList);
}

private void parseLists(JSONArray nestedList) throws JSONException
{
    List<Location> resultantArray = new ArrayList<Location>();
    parseNestedList(nestedList, resultantArray);
    System.out.println(resultantArray.size());
}

private void parseNestedList(JSONArray json, List<Location> resultantArray) throws JSONException
{
    int elementCount = json.length();
    if (elementCount <= 0)
    {
        return;
    }
    if (json.get(0) instanceof JSONArray)
    {
        for (int i = 0; i < elementCount; i++)
        {
            parseNestedList((JSONArray) json.get(i), resultantArray);
        }
    }
    else
    {
        resultantArray.add(new Location(Double.parseDouble(json.get(0).toString()), Double.parseDouble(json
            .get(1)
            .toString())));
    }
} 
```

完成后，您应该运行算法来识别多边形，并考虑`resultantArray`as 点中的条目。

# android - 在 Android 中使用自定义 AutoCompleteTextView 会导致错误

> ID：12227792
> 
> 赞同：2
> 
> 时间：2012-09-01T12:37:37.893
> 
> 标签：android, autocompletetextview

`AutoCompleteTextView`我在android中扩展。当我在我的 XML 布局文件中使用该新自定义`AutoCompleteTextView` 时，Eclipse 显示一条错误消息：

> 在尝试显示弹出窗口之前，您必须通过调用 setContentView() 来指定有效的内容视图。异常详细信息记录在“窗口”>“显示视图”>“错误日志”中。

编辑的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<com.mypackage.MyAutoCompleteTextView
android:id="@+id/countries_list_custom"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:completionHint="Test">
<requestFocus />
</com.mypackage.MyAutoCompleteTextView>
<TextView android:layout_width="match_parent"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

通过简单地从 XML 中取出我的自定义视图，布局显示得很好。

任何帮助将不胜感激，谢谢。

# java - JasperReports Virtualizer 即使在 20 分钟后也没有生成报告

> ID：12227796
> 
> 赞同：1
> 
> 时间：2012-09-01T12:38:05.610
> 
> 标签：java, jasper-reports

我们正在通过 Web 应用程序生成*JR报告。*

我的主报告（景观）包括 5 个子报告（景观）。

直到我包含 4 个子报表，报表才会在*iReport*和 Web 应用程序中生成。

当我们包含第 5 个子报告时，*iReport*无法生成任何报告 - JVM 抛出`OutOfMemoryException`。

然后我浏览了论坛/博客/终极指南，发现了有关*Virtualizer*的信息。

我正在使用大小为 100 的*FileVirtualizer 。*

我的报告包含数据和大量图表（现在将生成 400 页，其中 200 页包含图表。从数据库中获取的数据。）。

使用*FileVirtualizer*，JVM 不会抛出任何异常，但不会生成报告。*在为FileVirtualizer*指定的目录中生成了许多文件，但是即使 30 分钟后也没有生成报告。当条件仅为 2 时，我在*FileVirtualizer*提到的目录中计算了近 1,30,211 个文件。

使用*FileSwap*，该过程继续进行，没有输出。

使用值为 1024 的*GZip*，进程继续运行，没有报告。

谁能指导一下可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:20:48.273

这是通过更改边距解决的。子报表边距大于主报表边距，因此它进入了无限循环......一个简单的解决固有复杂问题的方法......

# ruby - 使用选择器小工具和 nokogiri 显示所有结果？

> ID：12227797
> 
> 赞同：0
> 
> 时间：2012-09-01T12:38:24.040
> 
> 标签：ruby, nokogiri

我第一次使用选择器小工具时遇到了问题，当我运行下面的代码时，为什么我只能在终端中显示第一个结果？

另外，有没有更简单的方法来获取示例页面中 ICD-10 代码之后的文本，因为到目前为止选择器小工具只获取链接，而不是纯文本？

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "http://en.wikipedia.org/wiki/ICD-10_Chapter_XVII:_Congenital_malformations,_deformations_and_chromosomal_abnormalities"
doc = Nokogiri::HTML(open(url))
puts doc.at_css("li li:nth-child(1) li a , li li ul:nth-child(5) :nth-child(1), .new, li:nth-child(3) li a, li li li:nth-child(10) li:nth-child(9) li:nth-child(4) :nth-child(1) li:nth-child(5) :nth-child(1) :nth-child(1) li:nth-child(2) :nth-child(1), li a:nth-child(4), li li li:nth-child(1), #mw-content-text li a:nth-child(5), li :nth-child(4) ul:nth-child(4) :nth-child(1), #mw-content-text li a:nth-child(3)").text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:25:23.220

这将获取带有 Q 代码的项目符号后面的所有文本：

```
puts doc.search('//li[contains(a[@class="external text"]/@href, "icd10")]').map(&:text) 
```

XPath 匹配`li`包含 URL 中的外部链接的列表项 ( ) `icd10`，然后从中提取文本。

这有点粗略：它获取*所有*文本，这意味着如果您不想要代码或没有代码的子项，则需要进一步操作。但无论如何，这都是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:50:01.020

看这里：

[http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_css)

> 在此节点中搜索第一次出现的 CSS 规则。等效于 css(rules).first 有关详细信息，请参阅 Node#css。

因此，如果您想查看所有文本，我建议您这样做：

```
selectors = ["li li:nth-child(1) li a", "li li ul:nth-child(5) :nth-child(1)", ".new", "li:nth-child(3) li a", "li li li:nth-child(10) li:nth-child(9) li:nth-child(4) :nth-child(1) li:nth-child(5) :nth-child(1) :nth-child(1) li:nth-child(2) :nth-child(1)", "li a:nth-child(4)", "li li li:nth-child(1)", "#mw-content-text li a:nth-child(5)", "li :nth-child(4) ul:nth-child(4) :nth-child(1)", "#mw-content-text li a:nth-child(3)"]
selectors.each do |s|
  puts doc.at_css(s).text
end 
```

# binding - Sublime Text 2 - 更改语法的键绑定

> ID：12227798
> 
> 赞同：52
> 
> 时间：2012-09-01T12:38:51.777
> 
> 标签：binding, syntax, sublimetext2, key-bindings

我想创建一个新的键绑定来将语法更改为 HTML 或 CSS。我搜索了官方和非官方文档，看看是否有任何问题的答案。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-09-01T12:43:01.897

使用以下组合键调出命令面板：

`Ctrl`+ `Shift`+`P`

然后输入：

`sshtml`（例如，将语法设置为 HTML）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-02T11:32:27.380

这就是我滚动的方式，如果这就是你的意思的话：

```
// Syntax Change
{"keys": ["alt+shift+h"], "command": "set_file_type",
"args": {"syntax": "Packages/HTML/HTML.tmLanguage"}
},

{"keys": ["alt+shift+m"], "command": "set_file_type",
"args": {"syntax": "Packages/Markdown/Markdown.tmLanguage"}
},

{"keys": ["alt+shift+p"], "command": "set_file_type",
"args": {"syntax": "Packages/PHP/PHP.tmLanguage"}
},

{"keys": ["alt+shift+j"], "command": "set_file_type",
"args": {"syntax": "Packages/Javascript/JSON.tmLanguage"}
}, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-07T08:29:27.297

有一种简单的方法可以做到这一点。
在右下角，有一个按钮，单击该按钮您将获得所有可用的语法。[![在此处输入图像描述](../Images/d0cc1965ff50dd9bf62687945c31e9fd.png)](https://i.stack.imgur.com/a2iGI.gif)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-12T18:16:17.447

您可以使用命令托盘 (ctrl + shift + p) 更改语法，但有时使用“ss”或“sshtml”会显示与“设置语法”选项无关的其他命令。

**您还可以添加一个新的键绑定用户首选项，它会显示命令面板，其中已经包含文本“设置语法：”。然后你只需要输入你想要设置的语言。**

要设置此键绑定快捷方式：

1.  打开命令托盘（ctrl + shift + p）
2.  查找并选择“首选项：键绑定”选项
3.  更新您的用户“.sublime-keymap”文件以在数组中列出“keys”json-object：

```
[
    "// additonal/exsiting key comands go here...",
    { "keys": ["ctrl+alt+l"], "command": "show_overlay", "args": {"overlay": "command_palette", "text": "Set Syntax: "} }
] 
```

现在您可以使用 ctrl+alt+l 调出命令提示符。然后只需键入 HTML、CSS 或您想要切换的任何语言。

随意将“键”组合从 ctrl+alt+l 更改为您希望快捷方式的任何其他内容。

# c# - 如何更改 HttpWebRequest 中 UserAgent 的编码？

> ID：12227801
> 
> 赞同：5
> 
> 时间：2012-09-01T12:39:46.177
> 
> 标签：c#, .net, ios, unicode, user-agent

今天在尝试使用 HttpWebRequest 发布请求时遇到了 UserAgent 的编码问题。

通常，UserAgent 由拉丁字母和标点符号组成。但是，我需要模拟其 UA 包含一些 Unicode（特别是中文）字符的 iOS 应用程序的 Web 请求。

使用 Fiddler 获取原始请求，我发现该应用程序在其 UA 中使用了 Unicode 编码。我无法在 C# 中发布它；我收到了这个错误：

> 您可能不会尝试在 UserAgent 中发送 Unicode。但这对我的项目非常重要。现在我可以在没有UA字节的情况下模拟App的请求。

如何更改 UA 编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:36:18.610

根据标准（[rfc 2616 (http/1.1), sec 2.2, 3.8\. 14.43](http://www.ietf.org/rfc/rfc2616.txt)和[rfc 2047 (mime, part 3), sec 4, 5](http://www.ietf.org/rfc/rfc2047.txt)），您不能使用除 iso-8859-1 之外的任何其他编码任何 http 标头字段，例如用户代理。

但是，您可以应用 rfc 2047 的编码方案将 unicode 字符串映射到 8859-1 - 字符串；简而言之，您用字符集标识符包装您的文本，并用各自编码中的八位字节序列的十六进制值替换 unicode 代码点。

例子：

`User-Agent: Million-€-Browser`变成`User-Agent: =?utf-8?q?Million-=e2=82=ac-Browser?=`,`e2 82 ac`是欧元符号的 utf-8 八位字节序列。

# uiviewcontroller - 当我在 VC1 中有标题时更改 VC2 中按钮的属性

> ID：12227807
> 
> 赞同：0
> 
> 时间：2012-09-01T12:40:21.790
> 
> 标签：uiviewcontroller, uibutton, xcode4.2, segue

我有两个 UIViewControllers：VC1 和 VC2。VC1 有一个带我到 VC2 的按钮，而 VC2 有几个带图像的按钮。

在 VC1 中，我有一些 VC2 按钮标题的列表（从 sqlite db 查询）。我需要更改与 VC1 中的标题匹配的 VC2 按钮图像。换句话说，当按下按钮从 VC1 移动到 VC2 时，我只需要为 VC1 的结果查询中列出的按钮更改图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:15:59.370

我在 VC2.h 文件中使用了以下声明：

```
@interface VC2 : UIViewController 
{
    NSArray *buttons;
}
@property (nonatomic, retain) IBOutletCollection(UIButton) NSArray *buttons;
@end 
```

VC2 中的所有按钮都与 Collection 有关。在 VC1 中，我通过以下方式使用 prepareforsegue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender  
{
    if ([[segue identifier] isEqualToString:@"VC1Segue"] == TRUE) 
    {
        [self getPictureNamesFromDB];
        VC2 *vc = [segue destinationViewController];     
        UIImage *backgroundImage = [UIImage imageNamed:@"XXXXX.png"];
        for(UIButton *button in vc.buttons) {
            [button setBackgroundImage:backgroundImage forState:UIControlStateNormal];
        }
    }
} 
```

我知道按钮 Collection 仅在我移至下一个视图时才被初始化，而且我不明白您通过 throw 构造函数传递的意思...

谢谢

# fpga - 选择具有足够输入的 FPGA

> ID：12227809
> 
> 赞同：0
> 
> 时间：2012-09-01T12:40:24.753
> 
> 标签：fpga

我需要一个可以有 50 个 I/O 引脚的 FPGA。我打算将它用作 MUX。我虽然想使用 MUX 或 CPLD，但我为其设计此电路的人说他将来可能需要更多功能，所以它必须是 FPGA。

所以我正在互联网上寻找一个有足够设计示例的。你能推荐什么吗（例如一个家庭）？另外，如果您能告诉我在挑选时应该考虑什么，那就太好了。我是新手，仍在学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T20:03:40.597

这是一个非常开放的问题，如果可能的话，给出所有选项的答案可能会很长。我向您建议的是列出所有当前和未来的要求。这将帮助您传达您的需求（在这里和其他地方），并迫使您以及与您一起参与该项目的人更仔细地考虑它们。说“未来需要更多功能”是没有意义的；您会购买市场上功能最强大的 FPGA 吗？不。

当您编制了这份清单并考虑了需求后，再次将它们发布在这里，然后您会得到很多帮助。

获得反馈和帮助的另一种可能性是描述您正在尝试做/解决的事情。也许 FPGA 不是最好的解决方案——这里的人会告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:43:45.347

我同意 Saar 的观点，但你必须退后一步：当你决定以哪种技术为目标时，请记住 FPGA 需要运行很多东西，即内核、I/O、辅助和可能更多。您还需要某种配置机制，因为 FPGA 通常（有例外）基于 SRAM，因此需要在启动时进行配置。CPLD 不太灵活，但更容易处理......

# android - 如何在android订阅中的“应用内计费”中实现订阅

> ID：12227814
> 
> 赞同：0
> 
> 时间：2012-09-01T12:40:57.547
> 
> 标签：android, in-app-purchase, in-app-billing, subscription

我已经通过托管产品成功实施了 InApp 计费。现在我想用订阅（IAB V2）替换它。我已经完成了订阅所需的所有更改，如下面链接中所述

[http://developer.android.com/guide/google/play/billing/billing_subscriptions.html](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)

当我购买物品时，我得到一个`request purchse error`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:01:05.793

您是否收到测试项目的错误？

如果是，那么您还没有按照信函进行所有更改。请发布代码和/或 logcat，以便我们提供帮助。

如果测试项目有效，并且您在活动项目中遇到错误，并且您确定您已按信函实施所有更改，那么您可能只需要等待几分钟/几小时，新订阅项目才能正常工作。

# php - 未定义的变量问题

> ID：12227815
> 
> 赞同：-4
> 
> 时间：2012-09-01T12:41:04.723
> 
> 标签：php, variables

**init.php**代码中有3个编译错误：

> 未定义的变量 $ind
> 
> 未定义的变量 $popsize
> 
> 未定义变量 $chrom

如何以正确的方式解决这个问题？

**主文件**

```
include_once 'init.php';

class Individual {
    public $genes = array();
    //...
}

class Population {
    public $ind = array();
    public $ind_ptr;
    public function setIndPtr(Individual $ind) {
        $this->ind_ptr = $ind;
    }   
}

$popsize = 10;
$chrom = 5;
$pop = new Population();
$pop_ptr = new Population();

$pop = init(pop_ptr); 
```

**初始化文件**

```
 function init(Population $pop_ptr) {
      $pop_ptr->setIndPtr($ind[0]);  
      for ($i = 0 ; $i < $popsize ; $i++) { 
        for ($j = 0; $j < $chrom; $j++) {
          $d = rand(0,1);
          if($d >= 0.5) {
             $pop_ptr->ind_ptr->genes[$j] = 1;
          }
          else {
             $pop_ptr->ind_ptr->genes[$j] = 0;
          } 
        }
        $pop_ptr->setIndPtr($ind[$i+1]);
      }
      $pop_ptr->setIndPtr($ind[0]);

      return $pop_ptr;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:42:59.370

这是一个范围问题：变量不会在文件中共享，除非您将它们设为全局！

（不好解释）变量，例如

公司.php

```
$a=1; 
```

主文件

```
include "inc.php";
print $a 
```

会工作

然而

公司.php

```
function func()
{
 $a=1;
} 
```

主文件

```
include "inc.php";
func();
print $a; 
```

a 不可用。

希望这能让它更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:47:22.190

函数范围内的全局变量需要在使用前显式声明为全局**变量**：

```
<?php
function foo()
    {
    global $global_variable_from_outside_function_scope;
    $global_variable_from_outside_function_scope += 1;
    } 
```

至于`$ind`，那里没有这样的变量。你想要更类似于`$pop_ptr -> ind`. 再次阅读关于类、范围等的[PHP 文档。](http://php.net/manual/en/)

# java - 在 Java 中导入相邻包

> ID：12227816
> 
> 赞同：0
> 
> 时间：2012-09-01T12:41:08.857
> 
> 标签：java, import, package

我有文件`/project/src/config/configInterface.java`。

在相邻目录（`/project/src/anotherfolder/hereItryToUse.java`）我不能使用`configInterface`类，因为我不知道如何导入这个包。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:44:58.483

你用什么IDE？

ctrl(cmd)+shift+o 是Eclipse中导入包的快捷方式（别人不知道），但是你绝对可以使用包

# z3 - 如何使用 Z3 重命名变量？

> ID：12227817
> 
> 赞同：0
> 
> 时间：2012-09-01T12:41:16.597
> 
> 标签：z3

给定表达式 x'=x+1，我希望将 x' 重命名为 y。如何使用z3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:31:07.263

有许多 API 函数可让您修改术语并用新子术语替换旧子术语。它们在包含修饰符 Z3_update_term、z3_substitute 和 Z3_substitute_vars 的修饰符部分下进行了描述（还有 Z3_translate 用于在两个上下文之间移植术语）。链接在这里：

```
http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#gaa7497c70a827db2d61ba98889fe657b5 
```

您还可以直接遍历术语并编写实用程序来修改术语。display_ast 示例显示了递归遍历术语的主要情况：

```
http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0 
```

# android - 带有切换按钮的列表视图

> ID：12227818
> 
> 赞同：1
> 
> 时间：2012-09-01T12:41:25.490
> 
> 标签：android

我正在编写一个应用程序，例如带有切换按钮的列表视图。这是我的源代码。

```
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     ArrayAdapter<String> adapter=new ArrayAdapter<String>(getApplicationContext(),R.layout.main,R.id.textView1,getResources().getStringArray(R.array.Strings));
     setListAdapter(adapter);

   }

 @Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
  String item = (String) getListAdapter().getItem(position);
  Toast.makeText(this, item+" selected", Toast.LENGTH_LONG).show();
} 
```

我正在从字符串资源导入列表，我的 sring.xml 是 MyListViewWithToggleButton 你好世界！设置 MyListViewWithToggle 开/关

```
 <string-array name="Strings">

   <item >Relay1</item>
  <item >Relay2</item>
  <item >Relay3</item>
  <item >Relay4</item>
  <item >Relay5</item>
  <item >Relay6</item>
  <item >Relay7</item>
  <item >Relay8</item>
  </string-array>
  </resources> 
```

在 mu main.xml 我使用文本视图和切换按钮

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
   android:layout_height="match_parent" >

   <TextView
     android:id="@+id/textView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_toLeftOf="@+id/toggleButton1"
     android:textSize="20dp" >
  </TextView>   

  <ToggleButton
     android:id="@+id/toggleButton1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
     android:layout_marginLeft="4dp"
     android:layout_marginRight="10dp"
      android:text="@string/On_Off" >

      </ToggleButton>

       </RelativeLayout> 
```

当我单击切换按钮时，它显示开和关。但是当我点击列表时，我没有得到任何回复。

对于我的应用程序，我需要在按下相对于按钮条件的切换按钮时发送一些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:52:04.073

```
ListView menuListView;  

@Override
protected void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.menuitem);
    menuListView = (ListView) findViewById(R.id.menu);
    TextView cartItem = (TextView) findViewById(R.id.cartItem);
    Bundle b = getIntent().getExtras();
    int catId = b.getInt("categoryId");     
    List<MenuItem>  menuItems = getMenuItemsByCatId(catId); 

    MenuLazyAdapter menuLazyAdapter = new MenuLazyAdapter(this, menuItems);
    // Set the ListView adapter

    menuListView.setAdapter(menuLazyAdapter);
    menuListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Toast.makeText(getApplicationContext(), "Clicked on :: "+ position, Toast.LENGTH_SHORT).show();

        }
    });

}
private List<MenuItem> getMenuItemsByCatId(int catId) {
    RomDbAdapter dbAdapter = new RomDbAdapter(MenuListView.this);
    dbAdapter.open();

    List<MenuItem> items = dbAdapter.getAllMenuByCatId(catId);
    dbAdapter.close();

    return items;
} 
```

**菜单项.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout 
         android:id="@+id/cart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:layout_marginRight="5dip"       
        android:padding="3dip" >
        <TextView
        android:id="@+id/cartItem"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Menu drop here"
        android:gravity="right"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>
    <ListView
        android:id="@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:cacheColorHint="#cccccc"
        android:scrollbars="vertical"
        android:smoothScrollbar="true" >
    </ListView>

</LinearLayout> 
```

**项目.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="10dip" >

    <!-- ListRow Left sied Thumbnail image -->

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:background="@drawable/image_bg"
        android:padding="3dip" >

        <ImageView
            android:id="@+id/item_image"
            android:layout_width="50dip"
            android:layout_height="50dip" />
    </LinearLayout>

    <!-- Title Of item -->

    <TextView
        android:id="@+id/itemName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Item Name"        
        android:textSize="15dip"
        android:textStyle="bold"
        android:typeface="sans" />

        <!-- Item  description -->

    <TextView
        android:id="@+id/ItemDesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/itemName"
        android:layout_toRightOf="@+id/thumbnail"
        android:text=" Fresh salad with lentils leafs"
        android:textSize="10dip" />

    <TextView
        android:id="@+id/itemPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/ItemDesc"
        android:layout_below="@+id/ItemDesc"
        android:text="$10.00"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

# android - ActivityNotFoundException - 意图过滤器不再起作用

> ID：12227822
> 
> 赞同：1
> 
> 时间：2012-09-01T12:42:02.600
> 
> 标签：android, android-intent, intentfilter

我有一个想要处理 SGF 文件的应用程序。它在清单中有这些过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:scheme="http"/>
            <data android:host="*"/>
            <data android:pathPattern=".*\\.sgf"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:scheme="http"/>
            <data android:mimeType="application/x-go-sgf"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:scheme="file"/>
            <data android:mimeType="*/*" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.sgf"/>
        </intent-filter> 
```

这个想法是处理在浏览器中或从文件中打开的 SGF 文件。这一直工作到最近。我不确定它何时停止工作，但这不是因为代码更改。我有另一个应用程序正在尝试启动活动，但出现异常：

没有找到处理 Intent 的活动 { act=android.intent.action.VIEW dat=file:///mnt/sdcard/gogrinder/Mastering%20the%20Basics/Vol.%202%20-%20One%20Thousand%20and%20One %20生死%20问题/6%20-%20五招%20问题%20-%20黑色%20to%20kill/prob144.sgf }

这个意图不应该与上面的过滤器之一匹配吗？从浏览器或文件资源管理器打开 SGF 文件确实会导致我的活动开始，但以编程方式执行上述操作不再有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:48:46.637

我还有一个可以打开 SGF 文件的应用程序，它运行良好。与您的代码相比，我添加了附加`mimeType`和`host`属性：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:host="*" />
            <data android:scheme="file" />
            <data android:pathPattern=".*\\.sgf" />
            <data android:mimeType="*/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:host="*" />
            <data android:scheme="http" />
            <data android:pathPattern=".*\\.sgf" />
            <data android:mimeType="*/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:host="*" />
            <data android:scheme="http" />
            <data android:mimeType="application/x-go-sgf" />
        </intent-filter> 
```

如果还是不行，可能是文件路径有问题。当`pathPattern`路径包含多个点时，它不能很好地工作。检查这个问题：

[如果文件名中的其他位置存在句点，则匹配文件扩展名的路径模式不起作用？](https://stackoverflow.com/questions/3400072/pathpattern-to-match-file-extension-does-not-work-if-a-period-exists-elsewhere-i)

# android - 我在哪里可以找到适用于 android SDK 的官方 Galaxy Tab 模拟器？

> ID：12227824
> 
> 赞同：3
> 
> 时间：2012-09-01T12:42:47.790
> 
> 标签：android, sdk, avd, samsung-mobile, galaxy-tab

一切都在标题中...，我想找到 android-sdk 的 Galaxy Tab 插件。

我发现： http: [//innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=9500) ?platformId=1&cntsId=9500但它不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:58:32.130

**Android SDK 管理器**中唯一的“GALAXY Tab”包适用于Google 随 Android SDK 提供的 Android 2.2 (API 8)，据我所知，它与您可以从您提供的链接下载的相同.

我从您的链接下载了软件包并将其安装在我的“android-sdk\add-ons”文件夹中，然后启动“AVD Manager”并基于**Target** “GALAXY Tab Addon（三星电子有限公司）创建了一个新设备。 ) - API 级别 8"。

一切似乎对我来说都很好，请参阅 AVD 运行的屏幕截图： ![在此处输入图像描述](../Images/404d2826d703ace6162fbb883ac3613a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T14:54:19.503

[SamsungSellerOffice](http://seller.samsungapps.com/)包括在许多三星设备上的真实设备测试。

# asp.net-mvc-3 - 为了在果园内托管/集成/展示我现有的 MVC3 项目，正确的方法是什么？

> ID：12227830
> 
> 赞同：1
> 
> 时间：2012-09-01T12:43:18.383
> 
> 标签：asp.net-mvc-3, orchardcms, asp.net-mvc-areas

我有一个实现特定功能的现有 MVC3 项目，这个项目有它自己的视图和一个单独的数据库。

现在我需要在我的一个果园项目中使用相同的功能，所以我认为我可以在某个地方托管这个解决方案并在 iframe 或其他东西中查看它。

我想对了吗？为了在果园内实现这一要求，这是正确的步骤吗？

为了更清楚，我需要做的就是查看这个解决方案并从果园内的托管页面与它的控件和视图进行交互，随后的请求应该由我的解决方案处理，以便访问它自己的数据存储并获取返回请求的数据，以便显示给用户。

任何帮助，将不胜感激。

**更新：**

感谢 Bertrand Le Roy 的回答，我现在可以在我的果园网站中查看我的解决方案。我遇到了另一个巨大的问题，即我的应用程序无法再连接到我的外部数据库。

我有一个托管在其他地方的数据库，我正在使用 EntityFramework 来处理它。问题是，如果我将连接字符串放在我的模块 web.config 或主果园 web.config 中，我会遇到几种类型的错误，例如：

**“ *System.Reflection.TargetException：对象与目标类型不匹配。* ”**

或者

**“System.Data.MetadataException：无法加载指定的元数据资源。”**

我的问题是：假设我使用实体框架作为我的 ORM，我怎么能正确地将我的连接字符串传递给我的解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:01:12.427

您需要将其放入模块中。

您必须将路由定义移动到 Routes.cs 文件（查看任何现有的此类文件以获取示例）。

为了访问您的数据存储，您还需要选择退出围绕数据访问代码 ( `using (var scope = new TransactionScope(TransactionScopeOption.Suppress))`) 的环境 Orchard 事务。

如果您使用依赖注入，您可能需要做一些工作才能将其转移到 Orchard 中基于 Autofac 的处理方式。

如果您希望您的工作在 Orchard 管理员中无缝显示，您可能需要使用 Admin 属性来装饰您的管理员控制器。如果您希望前端使用当前主题，则必须添加 Themed 属性并可能重构您的视图，以便它们只为内容区域而不是整个页面发出 HTML。

将清单（module.txt）添加到您的模块文件夹中，您应该一切顺利。

# java - Java - 简单邮件

> ID：12227833
> 
> 赞同：2
> 
> 时间：2012-09-01T12:43:48.293
> 
> 标签：java, email

我想用java发送电子邮件。

我正在使用[简单的 Java 邮件](http://www.simplejavamail.org)

我的代码：

```
final Email email = new Email();
email.setFromAddress("Name", "username@test.com");
email.setSubject("hey");
email.addRecipient("Name", "myemail@test.com", RecipientType.TO);
email.setText("Testing...");
new Mailer("smtpout.secureserver.net", 25, "username@test.com", "password").sendMail(email); 
```

我总是得到错误

```
[MailException: Generic error: null] 
```

被抛出`new Mailer`

我不知道是什么导致了这个异常，我希望你能把事情弄清楚。

更新1：

好的，我得到一个`AuthenticationFailedException`. 这很奇怪。

smtp服务器正确，端口正确，用户名密码也正确。

```
org.codemonkey.simplejavamail.MailException: Generic error: null
    at org.codemonkey.simplejavamail.Mailer.sendMail(Mailer.java:249)
    at controllers.SignUp.blank(SignUp.java:46)
    at Routes$$anonfun$routes$1$$anonfun$apply$9$$anonfun$apply$10.apply(routes_routing.scala:156)
    at Routes$$anonfun$routes$1$$anonfun$apply$9$$anonfun$apply$10.apply(routes_routing.scala:156)
    at play.core.Router$HandlerInvoker$$anon$4$$anon$1.invocation(Router.scala:1086)
    at play.core.j.JavaAction$$anon$1.call(JavaAction.scala:33)
    at play.GlobalSettings$1.call(GlobalSettings.java:57)
    at actions.UserAction.call(UserAction.java:18)
    at play.core.j.JavaAction$class.apply(JavaAction.scala:74)
    at play.core.Router$HandlerInvoker$$anon$4$$anon$1.apply(Router.scala:1085)
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126)
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:17)
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:125)
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115)
    at akka.actor.Actor$class.apply(Actor.scala:318)
    at play.core.ActionInvoker.apply(Invoker.scala:113)
    at akka.actor.ActorCell.invoke(ActorCell.scala:626)
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197)
    at akka.dispatch.Mailbox.run(Mailbox.scala:179)
    at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:516)
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104)
Caused by: javax.mail.AuthenticationFailedException
    at javax.mail.Service.connect(Service.java:319)
    at javax.mail.Service.connect(Service.java:169)
    at javax.mail.Service.connect(Service.java:118)
    at org.codemonkey.simplejavamail.Mailer.sendMail(Mailer.java:241)
    ... 24 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:13:33.357

这段代码在我的机器上运行良好（我在给定参数的 sendMail 上收到了 ConnectException，但这是正常的）。您确定所有必要的依赖项都在您的类路径上吗？您需要类路径上[http://code.google.com/p/simple-java-mail/downloads/list](http://code.google.com/p/simple-java-mail/downloads/list)上的所有 5 个 jar。

# css - 我可以使元素的填充（或边框）不可点击吗？

> ID：12227834
> 
> 赞同：4
> 
> 时间：2012-09-01T12:43:54.100
> 
> 标签：css

我有几个单选按钮，我用 PNG 背景图像进行样式设置，`:hover`用于将背景图像换成带有周围光环的背景图像。相邻单选按钮的光环区域重叠，因此它们不应成为可点击区域的一部分。然而，它们仍然是同一图像的一部分。

理想情况下，我想在填充区域后面显示光环，所以我需要每个单选按钮的内容区域是可点击的，但*不是*填充。我找不到任何控制它的 CSS 属性。该[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)属性几乎是我所需要的，但并不完全是我所需要的，而且它的大部分值都只适用于 SVG。

谷歌搜索出现的所有内容都是关于如何使用填充使可点击区域更大而不是更小的指针。如有必要，我可以使用仅限 CSS3 的属性，但不希望在我的 HTML 中添加任何额外的标记。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:35:08.993

如果不添加额外的标记，恐怕这是不可能的。如果您使用 s ，则可以添加一个包含背景图像的伪元素，但不幸的是，元素 (和)`div`上是不可能的。`input``:before``:after`

您需要添加一个处理背景图像的包装器 div：http: [//jsfiddle.net/sQGV9/](http://jsfiddle.net/sQGV9/)

此外，请注意这可能导致的可用性问题，悬停效果通常意味着该元素是可点击的，因此在 jsfiddle 中我添加了一个`cursor: pointer`，以便清楚您应该点击的精确区域。

如果你附加一张带有你想要实现的光环效果的图像，它可能可以在 css3 中实现效果，无需额外的标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-23T17:15:53.107

您应该将其更改为边距。应该是不可点击的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:16:48.220

如果您的边框或填充较厚，那么您可以在其上保留一个新的 div，其绝对位置、较高的 z-index 和使用“top”和“left”的对齐方式

# mysql - 将唯一索引放在多个表中

> ID：12227835
> 
> 赞同：0
> 
> 时间：2012-09-01T12:43:58.653
> 
> 标签：mysql

我遇到了一个问题，最简单的解决方案是在 mysql 中添加一个跨多个表的唯一索引。这可能吗？

为了这个问题的目的，我将有三个表格；`status`,`tracks`和`events`. 和表都有一个自动递增的 ID（`status`或） 。来自它们的信息通过触发器添加到表中。问题是 和 中可能有相同的自动递增 ID ，这意味着它们在 中可能不止一次是相同的 ID 。`tracks``T_ID``S_ID``events``tracks``status``events`

`tracks`;

```
CREATE TABLE `tracks` (
`ID` int(11) NOT NULL,
`url` varchar(200) COLLATE latin1_general_ci NOT NULL,
`name` varchar(100) COLLATE latin1_general_ci NOT NULL,
`timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
`T_ID` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`T_ID`),
UNIQUE KEY `url` (`url`),
UNIQUE KEY `T_ID` (`T_ID`),
KEY `ID` (`ID`),
CONSTRAINT `tracks_ibfk_1` FOREIGN KEY (`ID`) REFERENCES `members` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

`status`

```
CREATE TABLE `status` (
`ID` int(11) NOT NULL,
`status` varchar(300) COLLATE latin1_general_ci NOT NULL,
`timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
`S_ID` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`S_ID`),
UNIQUE KEY `S_ID` (`S_ID`),
KEY `ID` (`ID`),
CONSTRAINT `status_ibfk_1` FOREIGN KEY (`ID`) REFERENCES `artists` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

`events`

```
CREATE TABLE `events` (
`ID` int(11) NOT NULL,
`action` varchar(100) COLLATE latin1_general_ci NOT NULL,
`timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
`E_ID` int(11) NOT NULL,
KEY `ID` (`ID`),
CONSTRAINT `events_ibfk_1` FOREIGN KEY (`ID`) REFERENCES `members` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci COMMENT='This table shows what the artist has done and is used feed' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:11:22.500

同意，您不能在多个表中建立索引。

但是，请考虑通过向事件表添加“源”列并对源和外键的组合进行唯一约束来更改架构。这将防止从同一来源插入重复的密钥。

# sql - 如何在查询中仅显示字段的前 5 位数字

> ID：12227839
> 
> 赞同：3
> 
> 时间：2012-09-01T12:44:25.503
> 
> 标签：sql, sql-server-2000

> **可能重复：**
> [在 sql server 中修剪左边的字符？](https://stackoverflow.com/questions/4662496/trim-left-characters-in-sql-server)

我在下面有一个查询，它从我们的数据库中获取客户信息以发送优惠券。关于邮政编码，我们只需要该字段的前 5 位数字......我怎样才能只返回前 5 位？我的代码如下：

```
SELECT        Invoice_Tb.Customer_First_Name AS firstname, Invoice_Tb.Customer_Last_Name AS lastname, Invoice_Tb.Customer_Address AS add1, Invoice_Tb.City, 
                         Invoice_Tb.Customer_State AS State, Invoice_Tb.ZIP_Code AS ZIP, Invoice_Tb.Customer_Email_Address AS [Email Address], 
                         Invoice_Tb.Vehicle_Mileage AS [Vehicle Mileage], Invoice_Tb.Invoice_Date AS [Date Of Service], Invoice_Tb.Store_Number, @startdate AS Start_Date, @enddate AS End_Date
FROM            Invoice_Detail_Tb INNER JOIN
                         Invoice_Tb ON Invoice_Detail_Tb.Invoice_Number = Invoice_Tb.Invoice_Number AND Invoice_Detail_Tb.Invoice_Date = Invoice_Tb.Invoice_Date
WHERE        (Invoice_Detail_Tb.Store_Category_Code = 'FS') AND (Invoice_Tb.Invoice_Date BETWEEN CONVERT(DATETIME, @startdate, 102) AND CONVERT(Datetime, 
                         @enddate, 102)) AND (Invoice_Tb.Reminder_Mail_Flag = 'Y') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T12:45:55.933

尝试

```
LEFT(FieldName, 5) 
```

例如

```
SELECT LEFT(FieldName, 5) as SomeAlias FROM SomeTable 
```

桌子：

```
FieldName
---------
Hello World 
```

结果：

```
SomeAlias
---------
Hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:54:13.410

如果您的字段是 Invoice_Tb.ZIP_Code，您可以使用 substring 函数：

```
substring(Invoice_Tb.ZIP_Code, 1, 5) AS 'Trimmed Zip Code' 
```

另一种选择是使用 LEFT 功能：

```
LEFT(Invoice_Tb.ZIP_Code, 5) AS 'Trimmed Zip Code' 
```

由于存在从整数到 nvarchar 和 nvarchar 等价物的隐式转换，因此无需担心在这里进行 CAST。

# android - Android 计算器：退格键

> ID：12227843
> 
> 赞同：1
> 
> 时间：2012-09-01T12:45:44.663
> 
> 标签：android

我最近在设计一个安卓计算器，显示名为 fakedisplay。我现在为计算器添加一个退格按钮，代码如下：

```
 backspace.setOnClickListener(new View.OnClickListener() {        
        @Override 
        public void onClick(View v) { 

            clearCalcDisplay = DONT_CLEAR; 
            String str=Fakedisplay.getText().toString();
            if (str.length() >=1 ) { 
                str = str.substring(0, str.length() - 1);
                Fakedisplay.setText(str);
                };
            if (str.length() <1 ) {
                Fakedisplay.setText("0");
            }
    }); 
```

我的问题是

1.  我已经尝试过上面的方法，它适用于超过 1 个字符的输入，例如 145 它会给出 14，当它是 14 时它会给出 1，但是当进一步按下时，程序将被强制关闭。为什么？

2.  以及如何考虑十进制输入？

这个功能会有更好的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T12:54:13.797

将代码更改为

```
 backspace.setOnClickListener(new View.OnClickListener() {        
    @Override 
    public void onClick(View v) { 

        clearCalcDisplay = DONT_CLEAR; 
        String str=Fakedisplay.getText().toString();
        if (str.length() >1 ) { 
            str = str.substring(0, str.length() - 1);
            Fakedisplay.setText(str);
            }
       else if (str.length() <=1 ) {
            Fakedisplay.setText("0");
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T03:34:01.220

我结合了两个代码并得到了完美的代码

```
backspace.setOnClickListener(new             View.OnClickListener() {        
    @Override 
    public void onClick(View v) { 

        String str=Fakedisplay.getText().toString();
        if (str.length() >=1 ) { 
            str = str.substring(0, str.length() - 1);
            Fakedisplay.setText(str);
            } else if (str.length() <=1 ) {
        Fakedisplay.setText("0");
    }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-24T03:02:17.720

//需要一个额外的右括号。如果您不包含 0 而只是留下 //"" ，那么您将有一个空格而不是一个零。

```
backspace.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                String str = Fakedisplay.getText().toString();
                if (str.length() > 1) {
                    str = str.substring(0, str.length() - 1);
                    Fakedisplay.setText(str);
                } else if (str.length() <= 1) {
                    Fakedisplay.setText("0");
                }
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T08:31:40.787

我只是这样做了：

```
void delete(EditText expr) {
        String str = expr.getText().toString();
        if(str.length() == 0)
            return;
        str = str.substring(0, str.length() - 1);
        expr.setText(str);
} 
```

我使用了 xml onclick 元素。有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T17:29:48.220

```
 String str=Fakedisplay.getText().toString();
    if (str.length() >1 ) { 
        str = str.substring(0, str.length() - 1);
        Fakedisplay.setText(str);
        }
   else if (str.length() <=1 ) {
        Fakedisplay.setText("0");
    } 
```

**我在 buttonBackspace public void 部分中使用了此代码**

# c++ - 语法错误：意外 $end at token " " 带有任何着色器的 GLSL

> ID：12227847
> 
> 赞同：1
> 
> 时间：2012-09-01T12:46:09.040
> 
> 标签：c++, opengl

我见过其他类似的问题，现在我通常是由于错误的着色器加载代码，但我尝试了很多不同的方法来加载它们，我总是得到这个错误。这是我目前正在使用的加载代码（对于顶点着色器，我对片段着色器执行相同操作）：

```
GLuint VertexShaderID = glCreateShader(GL_VERTEX_SHADER);
std::string VertexShaderCode;
std::ifstream VertexShaderStream(vertex_file_path, std::ios::in);
if(VertexShaderStream.is_open()){
    std::string Line = "";
    while(getline(VertexShaderStream, Line))
        VertexShaderCode += "\n" + Line;
    VertexShaderStream.close();
}
GLint Result = GL_FALSE;
int InfoLogLength;

// Compile Vertex Shader
printf("Compiling shader : %s\n", vertex_file_path);
char const * VertexSourcePointer = VertexShaderCode.c_str();
glShaderSource(VertexShaderID, 1, &VertexSourcePointer , NULL);
glCompileShader(VertexShaderID);

// Check Vertex Shader
glGetShaderiv(VertexShaderID, GL_COMPILE_STATUS, &Result);
glGetShaderiv(VertexShaderID, GL_INFO_LOG_LENGTH, &InfoLogLength);
std::vector<char> VertexShaderErrorMessage(InfoLogLength);
glGetShaderInfoLog(VertexShaderID, InfoLogLength, NULL, &VertexShaderErrorMessage[0]);
fprintf(stdout, "%s\n", &VertexShaderErrorMessage[0]); 
```

我也试过这个：

```
 GLuint VertexShaderID = glCreateShader(GL_FRAGMENT_SHADER);
    std::ifstream shaderFile(vertex_file_path);
    //Error out here.
    stringstream shaderData;
    shaderData << shaderFile.rdbuf();  //Loads the entire string into a string stream.
    shaderFile.close();
    const std::string &VertexShaderCode = shaderData.str(); //Get the string stream as a std::string.
    GLint Result = GL_FALSE;
    int InfoLogLength;
    printf("Compiling shader : %s\n", vertex_file_path);
    char const * VertexSourcePointer = VertexShaderCode.c_str();
    glShaderSource(VertexShaderID, 1, &VertexSourcePointer , NULL);
    glCompileShader(VertexShaderID);

    // Check Vertex Shader
    glGetShaderiv(VertexShaderID, GL_COMPILE_STATUS, &Result);
    glGetShaderiv(VertexShaderID, GL_INFO_LOG_LENGTH, &InfoLogLength);
    std::vector<char> VertexShaderErrorMessage(InfoLogLength);
    glGetShaderInfoLog(VertexShaderID, InfoLogLength, NULL, &VertexShaderErrorMessage[0]);
    fprintf(stdout, "%s\n", &VertexShaderErrorMessage[0]); 
```

这是链接代码：

```
// Link the program
fprintf(stdout, "Linking program\n");
GLuint ProgramID = glCreateProgram();
glAttachShader(ProgramID, VertexShaderID);
glAttachShader(ProgramID, FragmentShaderID);
glLinkProgram(ProgramID);

// Check the program
glGetProgramiv(ProgramID, GL_LINK_STATUS, &Result);
glGetProgramiv(ProgramID, GL_INFO_LOG_LENGTH, &InfoLogLength);
std::vector<char> ProgramErrorMessage( max(InfoLogLength, int(1)) );
glGetProgramInfoLog(ProgramID, InfoLogLength, NULL, &ProgramErrorMessage[0]);
fprintf(stdout, "%s\n", &ProgramErrorMessage[0]); 
```

我也尝试将`(GLint *)VertexShaderCode.size()`而不是 NULL 传递给 glShaderSource() 的长度参数，但我得到了同样的错误。我在编译和链接时都会遇到这些错误

如果有帮助，我正在使用 Opengl 3.3、GLEW、GLFW、Visual c++ 2010 和 windows 7 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:54:01.950

您是如何将长度参数传递给 glShaderSource 的。你执行的类型转换应该会触发你一个厚厚的警告。正确的方法是将结果`size()`放入变量中。然后将指向该变量的指针提供给 glShaderSource。

# c# - 在 c# 应用程序中图案化 3d 模型的最佳解决方案

> ID：12227849
> 
> 赞同：2
> 
> 时间：2012-09-01T12:46:28.557
> 
> 标签：c#, opengl, 3d

我对 c# 有很好的了解，并且我使用 OpenGL，但不是 3d 专家，所以请为我提供以下问题的报价和最佳实践：

我想要的 windows 应用程序应该加载一个 3d 模型（例如房间的 3d 模型）并使用用户选择的材料图案（例如，特定的墙壁和屋顶的特定部分）对房间的指定部分进行图案化。由于模型因项目而异，我认为在 3dMax 或此类 3d 建模软件中创建模型并将其动态加载到应用程序中可能是最好的，但我不知道这是否可能，如果是，如何我是否指定了我希望在 c# 应用程序中对它们进行模式化的部分，以及如何对它们进行模式化。

请为我提供一些要搜索的主题，最佳实践，任何可以帮助我弄清楚的事情都是可观的。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:23:44.157

总的来说，您所描述的是正确的方法，只需要在这里和那里指定一点。有几个问题你必须先回答：

1.  您需要自己创建模型吗？或者可以从互联网上免费下载模型吗？这个问题实际上是：“您是否需要如此特别的东西以至于无法找到免费模型”？提供免费 3d 模型的网站之一是：[http ://thefree3dmodels.com/](http://thefree3dmodels.com/)
2.  如果您需要创建模型 - 您是否拥有 3dStudio 的许可证？学生可以用吗？如果没有 - [Blender](http://www.blender.org/)可能是您的首选应用程序。请注意，您需要一些时间来熟悉该应用程序。
3.  你想用什么库？您提到您熟悉 OpenGL。我相信将 OpenGL 与 C#/.NET 应用程序一起使用的最佳方法是使用[OpenTK](http://www.opentk.com)。你也可以考虑使用[XNA](http://msdn.microsoft.com/en-us/centrum-xna.aspx)或者很瘦的。DirectX 上的托管包装器 - [SlimDX](http://slimdx.org)

在屏幕上显示模型应该很容易。您可以在 Internet 上轻松找到很多教程，展示如何实现这一目标。完成此操作后，您唯一需要考虑的是更改模型的属性，因此新纹理（图案）将应用于模型。您还可以更改一些其他属性，例如材料的颜色和属性（正如某些库所称的那样）。

# oracle - 通过域用户使用 SqlPlus 连接 Oracle

> ID：12227850
> 
> 赞同：0
> 
> 时间：2012-09-01T12:46:30.060
> 
> 标签：oracle, oracleclient

客户端和服务器机器在域下。我正在尝试使用 SqlPlus 工具连接 orace db。我正进入（状态

```
ERROR:
ORA-01017: invalid username/password; logon denied 
```

虽然用户名和密码是正确的。

连接命令：

```
SqlPlus DomainName\UserName/passowrd@school 
```

tnsnames.ora 中的数据库地址

```
school =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = machinename)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = PRD)
    )
  ) 
```

数据库地址有问题吗？连接方式？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:24:02.067

在 sqlplus 中，无需在用户名前指定 DomainName 即可连接到实例。

```
sqlplus username/password@connect_identifier 
```

还要检查这些选项

1.  尝试在 tnsnames.ora 中使用 IP 地址而不是计算机名
2.  `NAMES.DEFAULT_DOMAIN`设置参数`sqlnet.ora`
3.  `computername.domain`在_`tnsnames.ora`

# caching - 处理器的指令在哪里？在 CPU 缓存中还是？

> ID：12227855
> 
> 赞同：3
> 
> 时间：2012-09-01T12:46:48.263
> 
> 标签：caching, cpu, instructions

我的问题是关于 CPU 及其指令的。我知道它们必须存放在某个地方，所以我想知道它们存放在哪里？我想在缓存中...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:49:36.820

在缓存和内存中（对于所有可能很快不需要的程序指令）。

确切的缓存取决于 CPU。缓存实际上只是一个通用术语，用于描述 CPU 芯片上的任何“内存”，而不是单独的 RAM 芯片。

现代 CPU 通常有多个缓存。这意味着用于存储指令的缓存称为“指令缓存”。

有关缓存的一般信息可以在 Wikipedia - [http://en.wikipedia.org/wiki/CPU_cache](http://en.wikipedia.org/wiki/CPU_cache)中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T12:53:53.300

一些最新的 CPU 有类似循环缓存的东西（用于解码指令）。当您的关键循环为 64 字节或更小时，它是最快的。然后是外部缓存，如 L1 指令缓存和 L2-L3 缓存。指令的最外层是 RAM。当然，它们都是从 ROM、HDD、调制解调器、软盘、CD-ROM 等加载的。这些都是用编程语言编写的，使用键盘用于在你的脑海中传递指令/意见。----> Brain是source，cache和cpu-registers是最后一站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:57:38.313

指令就是数据，就像数据就是数据一样。一切都是二进制的，一切都存储在 RAM 中，一切都从内存加​​载到 CPU 中（并在途中被缓存）。CPU 知道它何时加载指令，而不是数据，因为 CPU 知道它在做什么（例如，我现在正在运行这条指令，接下来我需要运行这条指令，我需要加载它......啊，我'正在加载指令）。

# ruby-on-rails - Rails中数组的简单下拉列表

> ID：12227857
> 
> 赞同：1
> 
> 时间：2012-09-01T12:46:49.773
> 
> 标签：ruby-on-rails

这似乎应该在 Rails A1 中，但我在任何地方都找不到。我有一堆位置存储在位置表中，由文本字段城市、县、国家等组成。（在我看来，这一切都应该被规范化，但是你去吧......）。

用户可以按位置搜索，然后输入单独的搜索字段。目前，我希望“国家/地区”这样的框成为国家/地区的下拉列表。我目前在数据库中获得的国家列表如下：

```
@countries = Location.find(:all, :select=>"DISTINCT country") 
```

搜索框目前只是一个文本字段：

```
<%= f.text_field :country,{:placeholder => "Country",:size=>20 } %> 
```

但我希望它成为@countries 变量中已经存在的国家/地区的下拉框。它只会将国家作为字符串传递。我是一个完整的 Rails 新手，即使是基础知识也让我感到困惑......帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:04:56.047

如果`name`是您所在国家/地区模型中县的实际名称：

```
 <%= f.select(:country, @countries.map(&:name), {:include_blank => 'Select a Country'}) %> 
```

您可以做不同的事情，使字段的值与显示的值不同。文档[位于此处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)。

仅供参考，我通常使用名为[Carmen](https://github.com/jim/carmen-rails)的非常方便的 gem来处理国家/地区列表等...

# ios - 在文本字段外隐藏触摸键盘

> ID：12227859
> 
> 赞同：3
> 
> 时间：2012-09-01T12:46:50.937
> 
> 标签：ios, uitextfield, uikeyboard

触摸屏幕上的其他任何位置后，我试图隐藏键盘。我正在使用的代码基于[此答案](https://stackoverflow.com/a/1552758/393964)here。

```
IBOutlet UITextView *myTextView; 
```

和方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    if ([myTextView isFirstResponder] && [touch view] != myTextView) {
        [myTextView resignFirstResponder];
    }
    [super touchesBegan:touches withEvent:event];
} 
```

我不明白我应该如何将我的 UITextField 链接到该`touchesBegan`方法。我需要使用哪个已发送事件？此外，该方法不应该是 IBAction，因为现在我无法将我的 UITextField 连接到它。

我也尝试了[这段代码](https://stackoverflow.com/questions/5306240/iphone-dismiss-keyboard-when-touching-outside-of-textfield)，但那个代码破坏了我的导航按钮（即使使用评论中提到的解决方案）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-01T14:21:36.367

目标 C：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
     [[self view] endEditing:YES];
} 
```

迅速：

```
 override func touchesBegan(touches: Set<UITouch>, withEvent event: UIEvent?) {
    self.view.endEditing(true)
} 
```

这是我找到的最好的方法，而且非常简单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T12:50:32.200

> 我应该如何将我的 UITextField 链接到 touchesBegan 方法。我需要使用哪个已发送事件？此外，该方法不应该是 IBAction，因为现在我无法将我的 UITextField 连接到它。

因为你没有。您必须在文本字段是子视图的视图上覆盖此方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-01T12:57:05.117

我所做的是将整个 UIView 类更改为 UIControl。 ![在此处输入图像描述](../Images/708a923fd12ea4757ec2c41e763a8632.png)

这为您提供了一个 touchDown 事件，您可以将其链接到 resignFirstResponder 的方法。 ![在此处输入图像描述](../Images/65befd8bc9a890d183f8df59a4dc7bc2.png)
UIControl 仍然为您提供 UIView 的所有功能。

```
-(IBAction)backgroundTap:(id)sender
{
    [text1 resignFirstResponder];
    [text2 resignFirstResponder];
    [textLogin resignFirstResponder];
    [textPassword resignFirstResponder];
} // Resign all responders 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T07:32:13.290

```
- (void)viewDidLoad
{
     //for keybord hide when touch outside:

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(hidekeybord)];
    [self.view addGestureRecognizer:tap];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

-(void)hidekeybord
{

    [_yourtextfield.txt resignFirstResponder];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T13:49:17.633

```
In .h
@property (nonatomic, assign) id currentResponder;

In .h
//in viewDidLoad:

UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(resignOnTap:)];
    [singleTap setNumberOfTapsRequired:1];
    [singleTap setNumberOfTouchesRequired:1];
    [self.view addGestureRecognizer:singleTap];

//Implement the below delegate method:

- (void)textFieldDidBeginEditing:(UITextField *)textField {
    self.currentResponder = textField;
}

//Implement resignOnTap:

- (void)resignOnTap:(id)iSender {
    [self.currentResponder resignFirstResponder];
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-01T12:52:17.803

尝试快速而肮脏的方式：

取一个按钮并将其链接到一个操作方法（我们称之为背景）。拉伸按钮，使其覆盖整个视图。调整视图的图层，以便只有用户通过触摸进行交互的内容位于按钮顶部。将按钮的类型更改为自定义，这会使按钮不可见。关闭方法 Background 中的 firstResponder。

# css - 标题显示块一行文字

> ID：12227860
> 
> 赞同：0
> 
> 时间：2012-09-01T12:46:55.553
> 
> 标签：css, text, html-heading

这是我的网站 [http://maximearchambault.com/index.php/contact/](http://maximearchambault.com/index.php/contact/)

我的问题是关于我的一个标题。我用它作为页面的主标题，联系方式/信息

我的问题是该块与文本不成一行。我希望文本以青色块为中心

```
h2 { font-size: 30px;  
     font-weight: bold; 
     background: #00FFFF; 
     width: 600px;
     HEIGHT: 33px; 
     display: block; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:00:05.047

```
h2 {
    background: none repeat scroll 0 0 #00FFFF;
    font-size: 30px;
    font-weight: bold;
    height: 33px;
    line-height: 33px;
    text-align: center;
    width: 600px;
 }

 1\. Remove the properly "display: block" from h2 class properties because h2 is block element
 2\. Add a property - "text-align: center" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:52:06.583

添加`line-height:33px;`到您的`h2 {... }`

```
h2 { font-size: 30px;  
     font-weight: bold; 
     background: #00FFFF; 
     width: 600px;
     HEIGHT: 33px; 
     display: block; 
     line-height:33px;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:55:31.200

只是改变：

```
display: block; 
```

至：

```
display: inline; 
```

另请记住，CSS 区分大小写，因此 HEIGHT 不是有效属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:56:09.150

您可以将您的 css 更改为：

```
h2{
    background: none repeat scroll 0 0 #00FFFF;
    display: table-cell;
    font-size: 30px;
    font-weight: bold;
    height: 33px;
    vertical-align: middle !important;
    text-align:center;
    width: 600px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T12:58:00.587

你可以尝试类似的东西；

```
h2 {
    font-size: 30px;  
    font-weight: bold; 
    background: #00FFFF;
    width: 600px;
    display: block;
    padding-top: 2px;
    padding-bottom: 2px;   
} 
```

***[这](http://jsfiddle.net/blasteralfred/maHQJ/)***是工作现场演示。

# c# - Windows 窗体设计器使用 Visual C# 2010 Express 冻结

> ID：12227862
> 
> 赞同：1
> 
> 时间：2012-09-01T12:47:11.087
> 
> 标签：c#, winforms, visual-studio-2010, freeze

当我打开表单设计器时，它会冻结 - 显示空白页面或之前显示的内容。这是它的外观：

[![冻结的表单设计器屏幕截图](../Images/a30794eddbce5219f247a91637f5c700.png)](https://i.stack.imgur.com/JaaRc.png)

我`FormMain.cs`打开了 [Design]，但它显示了之前存在的选项卡的内容（这也会导致解决方案资源管理器中出现另一个问题，但是当我单击解决方案资源管理器中的任意位置时，问题就会得到解决）。我尝试删除`.suo`文件，但没有解决问题。

同样出于某种原因，我可以右键单击并锁定控件，然后解锁并暂时解决问题，当我打开另一个选项卡并返回设计器时，它又被冻结了。它只发生在`FormMain.cs`，其他两种形式都可以，所以我认为它可能是设计器代码中的东西 - [http://pastebin.com/AxTdEbg3](http://pastebin.com/AxTdEbg3) - 但即使我从 中删除所有控件`FormMain.Designer.cs`，它仍然会冻结。

我有适用于 Visual C#、.NET Framework 4 SP1 的 Hotfix (KB2635973) 和 Service Pack 1 (KB983509)（但该项目使用 3.0）。感谢所有答案，如果您需要更多信息（例如整个项目文件夹），那么我会上传它。

# c# - 在特定时间之间更改背景图像

> ID：12227863
> 
> 赞同：0
> 
> 时间：2012-09-01T12:47:13.877
> 
> 标签：c#, datetime, background

我有一个网站，我希望在 18:00 和 06:00（晚上 7 点和早上 6 点）之间更改背景。我尝试了一个解决方案`DateTime`，但我无法让它工作：

```
protected void Page_Load(object sender, EventArgs e) {
    int intTime = DateTime.Today.TimeOfDay;

    if (intTime >= 1300 && intTime <= 0600) {
        ImgNatPic.ImageUrl = "img/jantelov.jpg";
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:52:28.213

[TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday)返回 TimeSpan 而不是 int。在[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan)上，您有一个 Hours 属性，可以为您提供所需的内容。

```
 TimeSpan time = DateTime.Now.TimeOfDay; 

    if ((time.Hours >= 18) || (time.Hours <= 6)) 
    { 
        ImgNatPic.ImageUrl = "img/jantelov.jpg"; 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T12:55:15.917

`DateTime.Today.TimeOfDay`返回时间跨度，而不是整数！

实现它的最简单方法是使用`DateTime.Now.Hour`它，它看起来像：

```
int time = DateTime.Now.Hour 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:54:32.357

我认为您需要使用`DateTime.Now.TimeOfDay;`而不是`.Today`因为该`.Today`属性仅包含时间设置为午夜的日期。

还`.TimeOfDay`返回 a `TimeSpan`not an `int`，因此您需要相应地调整 if 语句。如果您只对小时组件感兴趣，您可以使用`DateTime.Now.Hour`将返回一个小时。

# mysql - 左连接，返回不匹配的行，右表的where子句，分组依据

> ID：12227868
> 
> 赞同：2
> 
> 时间：2012-09-01T12:47:31.933
> 
> 标签：mysql, sql

抱歉标题复杂。

我有两张桌子，客户和订单：

客户 - 名称可能重复，ID 是唯一的：

```
name | cid
 a   |  1
 a   |  2
 b   |  3
 b   |  4
 c   |  5 
```

订单 - pid 是唯一的，加入 cid：

```
pid | cid | date
 1  |  1  | 01/01/2012
 2  |  1  | 01/01/2012
 3  |  2  | 01/01/2012
 4  |  3  | 01/01/2012
 5  |  3  | 01/01/2012
 6  |  3  | 01/01/2012 
```

所以我用这段代码来计算：

```
select customers.name, orders.date, count(*) as count
from customers
left JOIN orders ON customers.cid = orders.cid
where date between '01/01/2012' and '02/02/2012'
group by name,date 
```

当客户的 cid 与订单中的 cid 不匹配时，它工作正常但没有给我空行，例如 name-c、id-5

```
select customers.name, orders.date, count(*) as count
from customers
left JOIN orders ON customers.cid = orders.cid
AND date between '01/01/2012' and '02/02/2012'
group by name,date 
```

因此，我更改了应用于联接的位置，效果很好，它给了我空行。所以在这个例子中我会得到：

```
name | date       | count
 a   | 01/01/2012 | 3
 b   | null       | 1
 b   | 01/01/2012 | 3
 c   | null       | 1 
```

但是因为名称有不同的 cid，所以即使名称本身确实有订单行，它也会给我一个空行，这是我不想要的。

因此，我正在寻找一种方法，仅当共享相同名称的任何其他 cid 也没有订单中的任何行时才返回空行。

谢谢你的帮助。

- -编辑 - -

我已经编辑了空行的计数，计数从不返回空值而是 1。

的结果

```
select * from (select customers.name, orders.date, count(*) as count
from customers
left JOIN orders ON customers.cid = orders.cid
AND date between '01/01/2012' and '02/02/2012'
group by name,date) as t1 group by name 
```

是

```
name | date       | count
 a   | 01/01/2012 | 3
 b   | null       | 1
 c   | null       | 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:24:26.453

首先，选择按 分组的日期`(name, date)`，不包括`NULL`s，然后加入一组不同的名称：

```
SELECT names.name, grouped.date, grouped.count
FROM ( SELECT DISTINCT name FROM customers ) as names
LEFT JOIN (
  SELECT customers.name, orders.date, COUNT(*) as count
  FROM customers
  LEFT JOIN orders ON customers.cid = orders.cid
  WHERE date BETWEEN '01/01/2012' AND '02/02/2012'
  GROUP BY name,date
) grouped
ON names.name = grouped.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:23:43.250

最好的方法是根据 Cid 和其他参数将它们组合在一起。因此，您将获得基于 Left Outer Join 的具有 NULL 值的正确输出。

# python - Python：插值的集成

> ID：12227869
> 
> 赞同：3
> 
> 时间：2012-09-01T12:47:53.013
> 
> 标签：python, numpy, integration, scipy, interpolation

我有一些我无法解决的问题：

```
#! /usr/bin/env python
import numpy as np
from scipy.interpolate import UnivariateSpline
from scipy.integrate import quad
import pylab as pl

x = ([0,10,20,30,40,50,60,70,...,4550,4560])
y = ([0,0,0,0,0,0,0,3,2,3,2,1,2,1,2,...,8,6,5,7,11,6,7,10,6,5,8,13,6,8,8,3])
s = UnivariateSpline(x, y, k=5, s=5)
xs = np.linspace(0, 4560, 4560)
ys = s(xs) 
```

这是我对一些数据进行插值的代码。另外，我绘制了这个函数。

但现在我想整合它（从零到无穷大）。

我试过了

```
results = integrate.quad(ys, 0, 99999) 
```

但它没有用。

你能给我一些提示（或解决方案）吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:33:11.590

根据文档`quad`，您需要将函数作为第一个参数，然后是积分范围的下限和上限，以及函数的一些额外参数（`help(quad)`在 shell 中键入以获取更多信息。

您传递了一个数组作为第一个参数 ( `ys`)，这就是它不起作用的原因。您可能想尝试以下方法：

```
results = quad(s, xs[0], xs[-1]) 
```

或者

```
results = quad(s, 0, 9999) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:42:27.290

正如 Pierre GM 所说，您必须为 quad 提供一个函数（我认为您也可以将`np.inf`其用于上限，尽管在这里它并不重要，因为样条曲线无论如何都会很快变为 0）。但是，您想要的是：

```
s.integral(0, np.inf) 
```

由于这是一条样条曲线，因此该`UnivariateSpline`对象已经实现了一个应该更好更快的积分。

# servlets - 在 Servlet 中访问 ViewScoped Managedbean

> ID：12227871
> 
> 赞同：0
> 
> 时间：2012-09-01T12:48:09.540
> 
> 标签：servlets, jsf-2, cdi

有人知道在 Servlet 中访问 ViewScoped ManagedBean 的方法吗？

例如，我可以通过这种方式访问​​ SessionScoped ManagedBean：

```
MyBean bean = (MyBean) request.getSession().getAttribute("myBean"); 
```

但是，如果我将范围设置为 ViewScoped，它将返回 null。我知道原因是 Servlet 尝试尽早访问 bean。但是我该如何解决这个问题？

支持bean：

```
@ManagedBean(name = "statistikHandler")
@SessionScoped //or ViewScoped
public class StatistikHandler {

    private Object someAttribute

    //Do something nice here
    //getter and setter

} 
```

小服务程序：

```
public class ImageStreamServlet extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        System.out.println("+++++ CALL THE IMAGESERVLET +++++");

        //try to "inject" the Bean here

        StatistikHandler handler = (StatistikHandler) request.getSession().getAttribute("statistikHandler");

        try {
            if (handler != null) {
                //Do something with the ManagedBean
            } else {
                System.out.println("HANDLER NOT FOUND");
            }

        } finally {
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }
} 
```

而已。如果我将 StatistikHandler 设置为 SessionScope 它工作正常。如果我将处理程序设置为 ViewScoped 它不起作用。

* * *

第一： THX 为您的遮阳篷。

阿扬·蒂姆斯：

> 第二件事是视图范围仅在处理视图时才存在。它不能凭空出现。

这是有道理的，我知道。我试图解释流程，希望你能理解我。我的英语不是最好的，但我认为已经足够了。所以让我们试试：

我设置了对视图的请求，因此设置了视图范围 bean 的实例。所以视图和 bean 存在，但 servlet 不是必需的。

现在我与视图交互并且必须渲染另一部分。现在这部分需要 servlet，我设置了对 servlet 的请求。

所以：视图和 bean 作为实例存在，然后（在部分重新加载之后）我请求 servlet。

阿扬·蒂姆斯：

> 您将必须有一些代码将引用存储在请求范围内，Servlet 可以在其中找到并获取它。

恕我直言，这是重要的部分。正如你所说，我不能将视图范围的 bean 作为会话属性。我非常感谢你这个事实，因为我以前不知道。

现在我可以继续思考解决方案了。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T08:40:12.763

有两件事需要注意。

第一个是您无法通过请求会话属性来获取视图范围 bean 的实例。这些 bean 根本不（直接）存储在那里。

第二件事是视图范围仅在处理视图时才存在。它不能凭空出现。

Java 代码中的一个示例来说明最后一条语句：

```
// How to access i here???

while (foo) {
    int i = 1;
    // ...
} 
```

正如在循环`i`中声明的`while`那样，在该循环之前访问它是没有意义的。

在 Servlet 的情况下，如果您的 Servlet 在同一个请求中分派给 Faces Servlet，那么您只能在之后访问视图范围的 bean，并且仍然不能直接访问。您将必须有一些代码将引用存储在请求范围内，Servlet 可以在其中找到并获取它。

再次使用 Java 类比，这将是：

```
int bar = 0;

while (foo) {
    int i = 1;
    // ...
    bar = i;
}

// use bar here 
```

如果您需要 Servlet 设置视图范围 bean 使用的某些内容，则将该内容存储在请求范围中并让视图范围 bean 在那里拾取它。再次与 Java 类比：

```
int bar = 23;

while (foo) {
    int i = bar;
    // ...
} 
```

换句话说，使用一个共同的“通道”让这两者相互交流。

# php - 查找两个页面的相似性

> ID：12227873
> 
> 赞同：0
> 
> 时间：2012-09-01T12:48:19.130
> 
> 标签：php, artificial-intelligence, web-scraping

我在某个地点开发了一个项目，有人分享了一条新闻，为了确认这条新闻，另一个用户必须附加来自另一个来源的相同新闻，这样原始新闻得分就会增加为可信新闻。

比较两个页面并找到它们之间的相似概率的解决方案是什么？

我用 PHP 编写代码，因此任何与此语言兼容的解决方案都受到高度赞赏。

我读到神经网络非常繁重且性能成本很高，所以我需要一些轻量级的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:54:21.307

你可以

[http://php.net/manual/en/function.similar-text.php](http://php.net/manual/en/function.similar-text.php)

或者

使用任何比较软件（那里真的有很多）并在终端中使用它们，这样你就可以在 php 中处理它

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# visual-studio-2010 - 使 Visual Studio C++ 2010 Express 打印其构建命令

> ID：12227876
> 
> 赞同：3
> 
> 时间：2012-09-01T12:48:55.887
> 
> 标签：visual-studio-2010, build, compilation

在构建解决方案/项目时，是否可以查看 Microsoft Visual C++ 2010 Express 实际执行了哪些命令？我发现在`Configuration Properties`一个解决方案中，编译器（C/C++）和链接器（Linker）都有一个`Command Line`窗口，但这并没有真正显示所有参数（例如源文件和对象/二进制文件）。

我想查看这些命令，以便编写一个`nmake`构建脚本，我可以使用它来编译/链接 x86 和 x64 平台的二进制文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:06:16.907

您可以将 Visual Studio 构建的输出设置为详细。转到菜单*Tools -> Options -> Projects and Solutions -> Build and Run*。更改*MSBuild 项目构建输出详细程度*选项，通常从默认的*Minimal*更改为*Normal*、*Detailed*或*Diagnostic*。

另请查看*[/VERBOSE（打印进度消息）](http://msdn.microsoft.com/en-us/library/wdsk6as6%28v=vs.80%29.aspx)*以将链接器输出设置为更详细。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:55:11.743

对于 Visual Studio 2010 和 2005

*   查看-> 输出或 Alt+2
*   显示输出：构建

对于编译器/链接器参数

*   项目->项目属性
*   配置属性 -> C/C++ -> 命令行
*   配置属性 -> 链接器 -> 命令行

# pdf - Heroku 上的 PDFBox - 渲染 PDF - 标准字体不可用

> ID：12227878
> 
> 赞同：1
> 
> 时间：2012-09-01T12:49:19.673
> 
> 标签：pdf, heroku, fonts, render, pdfbox

我正在使用 Apache PDFBox 在 Heroku 上呈现 PDF 文档的缩略图。我用来测试我的代码的 PDF 在 Mac 上本地渲染良好，在 Heroku 上某些字体不渲染。

我怀疑 PDFBox 找不到 14 种标准字体。我可以将它们包含在我的应用程序中，但我不知道如何告诉 PDFBox 在哪里搜索字体。

在我深入研究 PDFBox 的内部之前，也许有人知道解决这个问题的简单方法？

# iphone - 为 tableView 单元格投射到正确的对象

> ID：12227879
> 
> 赞同：0
> 
> 时间：2012-09-01T12:49:30.300
> 
> 标签：iphone, objective-c, uitableview, tableview

我正在使用 tableView 来显示每个带有不同数据的 tam tableView。当我回到所有 tableView 代表的界面时，我正在`*list`用基于前一个视图的数据（带有字段的不同数组）来吸引

```
if(select = names )...
  list = myData.Names;
if (select = workers)...
  list = myData.Workers; 
```

等等...

在我使用的代表表中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [list count];
} 
```

但是当我初始化表格单元格的对象时，我怎样才能为单元格设置正确的对象。现在硬编码我使用：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
          cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];       
    }
    //HARD-CODED
    names *s = [list objectAtIndex:indexPath.row];
    cell.textLabel.text = names.firstName;
    cell.detailTextLabel.text=s.lastName;
    return cell;   
} 
```

当我将其设置为时`list`，`workers`我怎么知道每次都将其投射到正确的对象上？不用写几百万`if`？

例如，如果

```
 if (select = workers)...
          list = myData.Workers; 
```

[列表计数] 将返回正确的数字，但我想根据列表显示数据，我该如何转换它以便它自动声明工人

```
workers *s = [list objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:24:38.463

我想我理解你的问题，所以让我试着解释一下：

这可以使用协议轻松解决，并将单元配置责任交给实际对象。

首先，声明你的类将遵循的协议：

```
@class MyTableViewCell;

@protocol CellConfiguring

- (void)configureCell:(MyTableViewCell *)cell;

@end 
```

现在创建一些类并确保它们都符合这个协议：

```
@interface Workers : NSObject <CellConfiguring>

@property (retain, nonatomic) NSString *company;
@property (retain, nonatomic) NSString *salary;

@end 
```

和：

```
@interface Names : NSObject <CellConfiguring>

@property (retain, nonatomic) NSString *firstName;
@property (retain, nonatomic) NSString *lastName;

@end 
```

ETC...

在他们的实现中，他们每个人都会以不同的方式处理单元格的配置：

```
#import "MyTableViewCell.h"

@implementation Workers

- (void)configureCell:(MyTableViewCell *)cell
{
    cell.textLabel.text = self.company;
    cell.detailTextLabel.text = self.salary;
}

@end 
```

和：

```
#import "MyTableViewCell.h"

@implementation Names

- (void)configureCell:(MyTableViewCell *)cell
{
    cell.textLabel.text = self.firstName;
    cell.detailTextLabel.text = self.lastName;
}

@end 
```

请记住，您收到的单元格是您创建的自定义单元格。例如：

```
@interface MyTableViewCell : UITableViewCell

@property (retain, nonatomic) UILabel *textLabel;
@property (retain, nonatomic) UILabel *detailTextLabel;

@end 
```

现在，在您的委托电话中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
          cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];       
    }

    id myObject = [list objectAtIndex:indexPath.row];
    if ([myObject conformsToProtocol:@protocol(CellConfiguring)]
        [myObject configureCell:cell];    
    return cell;   
} 
```

就是这样。没有更多的 if-else 语句，也没有更多的强制转换。

提示：每当你开始在你的类中看到太多的 if-else 语句，弄脏你的代码，开始考虑责任。对象是否应该负责弄清楚如何配置单元？或者我们可以将该任务委托给另一个对象吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:09:17.420

在 .h 文件中设置一个标志，如 BOOL 标志。数据将根据标志填充。

ViewDidLoad 中的标志最初将为 TRUE。

现在设置这样的列表：

```
if()...
listNames = myData.Names;
if ()...
listWorkers = myData.Workers; 
```

并在代表表中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
 if(flag){
 return [listNames count];
 else
 {
  return [listWorkers count];
 }
} 
```

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
          cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];       
    }
    if(flag)
    {
       names *s = [listNames objectAtIndex:indexPath.row];
       cell.textLabel.text = names.firstName;
       cell.detailTextLabel.text=s.lastName;
       return cell;  
    }
    else
   {
       names *s = [listWorkers objectAtIndex:indexPath.row];
       cell.textLabel.text = names.firstName; // change for listWorkers
       cell.detailTextLabel.text=s.lastName; // change for listWorkers
       return cell;
   } 
} 
```

现在当你想改变的时候

```
flag = FALSE; //worker data will be filled
[tableView reloadData] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:58:23.267

您也许可以使用以下解决方案...

为每种类型的对象创建一个符合 UITableViewDataSource 的自定义对象。例如 WorkerDataSource、NamesDataSource 等...

根据要显示的数据，为tableView设置正确的dataSource。我从事的一个项目的一个例子......

```
#define SECTION_HEADER_HEIGHT 20.0f

@interface FSMatchProgrammeDataSource ()

@property (nonatomic, copy) NSArray *matches;
@property (nonatomic, copy) NSArray *groupedMatches;

@end

@implementation FSMatchProgrammeDataSource

@synthesize matches               = _matches;
@synthesize groupedMatches        = _groupedMatches;
@synthesize didSelectMatchHandler = _didSelectMatchHandler;

+ (FSMatchProgrammeDataSource *)dataSourceWithMatches:(NSArray *)matches
{
    FSMatchProgrammeDataSource *dataSource = [[FSMatchProgrammeDataSource alloc] init];
    if (dataSource)
    {
        dataSource.matches = matches;
    }
    return dataSource;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return _groupedMatches.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSArray *matches = [_groupedMatches objectAtIndex:section];
    return matches.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MatchProgrammeCellIdentifier";

    FSMatchProgrammeCell *cell = (FSMatchProgrammeCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell)
    {
        cell = [[FSMatchProgrammeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];        
    }

    NSArray *matches = [_groupedMatches objectAtIndex:indexPath.section];
    cell.match = [matches objectAtIndex:indexPath.row];

    DLog(@"%@", cell.match);

    return cell;
}

#pragma mark - Table view delegate

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
   // custom view created here ...
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return SECTION_HEADER_HEIGHT;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44.0f;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (_didSelectMatchHandler)
    {
        NSArray *matches = [_groupedMatches objectAtIndex:indexPath.section];
        FSMatch *match   = [matches objectAtIndex:indexPath.row];

        _didSelectMatchHandler(match);
    }
}

#pragma mark - Properties

- (void)setMatches:(NSArray *)matches
{
    // matches property set, also an sorted / grouped copy is created for display called groupMatches ...
}

@end 
```

并且 dataSource 在 tableViewController 中分配，如下所示：

```
- (void)refreshView
{
    BOOL showInfoLabel = NO;

    switch (_tabBar.selectedSegmentTag)
    {
        case TabProgramme:
            _tableView.dataSource = _programmeDataSource;
            _tableView.delegate   = _programmeDataSource;
            break;
        case TabResults: 
            _tableView.dataSource = _resultsDataSource;
            _tableView.delegate   = _resultsDataSource;
            break;
        case TabStandings:
            _tableView.dataSource = _standingsDataSource;
            _tableView.delegate   = _standingsDataSource;
            break;
        default: break;
    }

    [self.tableView reloadData];
} 
```

# python-2.7 - scikit学习多核和伽玛值？

> ID：12227881
> 
> 赞同：4
> 
> 时间：2012-09-01T12:49:42.810
> 
> 标签：python-2.7, scikit-learn

我将使用具有多项式内核的 scikit SVC，格式如下：(1 + xTn.xm)^4。含义（xTn.xm 的乘积的一加），次数为 4。xTn 是转置的 xn 值。当我查看 scikit 文档时，他们指定了 SVC 的参数：

```
 degree : int, optional (default=3)
 |      Degree of kernel function.
 |      It is significant only in 'poly' and 'sigmoid'.
 |  
 |  gamma : float, optional (default=0.0)
 |      Kernel coefficient for 'rbf' and 'poly'.
 |      If gamma is 0.0 then 1/n_features will be used instead.
 |  
 |  coef0 : float, optional (default=0.0)
 |      Independent term in kernel function.
 |      It is only significant in 'poly' and 'sigmoid'. 
```

参数“degree”是相关的，我应该使用 4。参数 coef0 是相关的，我应该使用值 1。它正确吗？在“Poly”案例中，伽玛非常不清楚。我应该为伽玛使用哪个值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T13:17:07.810

来自 libsvm 文档：`(gamma * u'* v + coef0)^degree`（scikit-learn 基于它的 SVC 模型）。总是欢迎提出改进文档的请求:)

# android - 如何更改时间选择器和日期选择器的文本颜色？

> ID：12227884
> 
> 赞同：2
> 
> 时间：2012-09-01T12:49:48.180
> 
> 标签：android, datepicker, android-4.0-ice-cream-sandwich, timepicker

目前我正在开发我的第一个应用程序。在这个应用程序中，我有一个`TimePicker`和一个`DatePicker`. 我的电流`Activity`有一个黑暗的背景。现在我想要`TimePicker`/中的白色文本颜色`DatePicker`。

在我的布局中，我定义了我的选择器：

```
<DatePicker android:id="@+id/dpDateOfValue" android:calendarViewShown="false" />
<TimePicker android:id="@+id/tpTimeOfValue" /> 
```

该解决方案应适用于 2.3 - 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T04:52:19.340

利用：

```
<style name="MyHolo" parent="android:Theme.Holo.NoActionBar">

        ...

        <item name="android:editTextColor">#000000</item>
</style> 
```

为 API >= 11 设置 TimePicker 文本颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-21T10:54:44.770

对于 DatePicker，我使用以下代码：

```
public static void setDatePickerTextColor(DatePicker dp, int color) {
    LinearLayout l = (LinearLayout) dp.getChildAt(0);
    if (l != null) {
        l = (LinearLayout) l.getChildAt(0);
        if (l != null) {
            for (int i = 0; i < 3; i++) {
                NumberPicker np = (NumberPicker) l.getChildAt(i);
                if (np != null) {
                    setNumberPickerTextColor(np, color);
                }
            }
        }
    }
}

public static boolean setNumberPickerTextColor(NumberPicker numberPicker, int color) {
    final int count = numberPicker.getChildCount();
    for (int i = 0; i < count; i++) {
        View child = numberPicker.getChildAt(i);
        if (child instanceof EditText) {
            try {
                Field selectorWheelPaintField = numberPicker.getClass()
                        .getDeclaredField("mSelectorWheelPaint");
                selectorWheelPaintField.setAccessible(true);
                ((Paint) selectorWheelPaintField.get(numberPicker)).setColor(color);
                ((EditText) child).setTextColor(color);
                numberPicker.invalidate();
                return true;
            } catch (NoSuchFieldException e) {
                Log.w("NumberPickerTextColor", e);
            } catch (IllegalAccessException e) {
                Log.w("NumberPickerTextColor", e);
            } catch (IllegalArgumentException e) {
                Log.w("NumberPickerTextColor", e);
            }
        }
    }
    return false;
} 
```

虽然，它仅在 Lollipop 上进行了测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T13:25:23.190

我认为您可以使用 Coding 来做到这一点，请尝试以下操作：

```
DatePicker your_picker = (DatePicker) findViewById(R.id.dpDateOfValue);
EditText edittext = (EditText) your_picker.findViewById(Resources.getSystem().getIdentifier("datepicker_input", "id",  "android"));

edittext.setTextColor(Color.BLUE); 
```

# r - R：根据另一列中的值从一列中选择每10个随机条目

> ID：12227888
> 
> 赞同：3
> 
> 时间：2012-09-01T12:50:14.043
> 
> 标签：r, sample

抱歉，如果之前有人问过这个问题 - 我确实使用了搜索功能。

变量 X 有 1-100 个类别，每个类别的行数可变（均超过 10）。变量 Y 具有与每个 X 相关联的值。如何提取 Y 的随机子样本，每个 X 有 10 个 Y？目标是减少文件中的数据总量（现在它有 11000 行，理想情况下使用二进制编码列 Z 的输出来包含/排除案例（其中 Z 分配给每个类别 X 的随机 10 个 Y。

我猜这应该很容易？

问候， KCW

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T17:02:12.860

`sample`使用和`ave`函数的组合很容易做到这一点：

```
dfrm$Z <- ave(dfrm$X, dfrm$X, FUN= 
             function(x) sample(c( rep(TRUE,10), rep(FALSE, length(x)-10))) )
dfrm[dfrm$Z , "Y"] 
```

在 X 的每个类别中，sample 将返回一个逻辑向量，其中包含 10 个 TRUE 和已置换的其余 FALSE，因为这是`sample`没有给出第二个长度参数时的行为。这留下了 Z 列，因此您可以对`FALSE`-Z 进行其他测试。的第一个参数`ave`基本上被忽略并丢弃。它唯一真正的目的是提供一个向量，其长度用于构造逻辑返回值。

在构建函数时`ave`，想象应该返回的内容将具有相同的长度并以正确的顺序与单个分组变量类别中的一个 X 选择中的项目对齐，这很有用。因为分组变量是作为三点项目输入的，所以您总是需要指定“FUN=”，否则您会收到难以理解的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T17:04:39.957

由于 R 的工作方式，这可能是一个非常快速的选择。

首先，一些示例数据：

```
set.seed(1)
dat <- data.frame(x = rep(1:10, times = sample(10:30, 10)))
dat$y <- rnorm(nrow(dat)) 
```

然后，创建一个`z`包含所有值的变量`FALSE`。

```
dat$z <- FALSE 
```

使用`rle`和`cumsum`找出您的样本，对它们进行子集化，并将它们标记为`TRUE`.

```
RLE = c(1, cumsum(rle(dat$x)$lengths))
dat$z[c(sapply(1:(length(RLE)-1), 
           function(x) sample(RLE[x]:RLE[x+1], 10)))] <- TRUE 
```

## 基准，有人吗？

使用本文中的示例数据，这里比较了 DWin 的解决方案、themel 的解决方案、这个基本的子集解决方案，以及来自 base R 的其他两个选项：

```
library(rbenchmark)
benchmark(BY = do.call(rbind, 
                       by(dat, dat$x,
                          FUN = function(i) { 
                            i$z <- FALSE; 
                            i[sample(nrow(i), 10), "z"] <- TRUE; 
                            i })), 
          LAPPLY = do.call(rbind, 
                           lapply(split(dat, dat$x), 
                                  FUN = function(i) { 
                                    i$z <- FALSE;
                                    i[sample(nrow(i), 10), "z"] <- TRUE;
                                    i })), 
          SUBSET = { 
            RLE = c(1, cumsum(rle(dat$x)$lengths));
            dat$z <- FALSE; 
            dat$z[c(sapply(1:(length(RLE)-1),
                           function(x) 
                             sample(RLE[x]:RLE[x+1], 10)))] <- TRUE },
          DDPLY = ddply(df, "x" , function(df) {
            pick <- rep(FALSE,nrow(df));
            pick[sample(nrow(df),10)] = TRUE; 
            cbind(df, "z"=pick) 
          }), 
          AVE = { dat$z <- FALSE; 
                  ave(dat$x, dat$x, 
                      FUN=function(x) 
                        sample(c(rep(TRUE, 10), rep(FALSE, length(x)-10))))},
          columns = c("test", "replications", "elapsed", 
                      "relative", "user.self"),
          order = "relative")
#     test replications elapsed   relative user.self
# 3 SUBSET          100   0.044   1.000000     0.044
# 5    AVE          100   0.078   1.772727     0.080
# 2 LAPPLY          100   0.601  13.659091     0.600
# 1     BY          100   0.675  15.340909     0.680
# 4  DDPLY          100   6.016 136.727273     6.008 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:00:19.310

使用[`plyr`](http://plyr.had.co.nz/)，它是单行的：

```
df <- data.frame(x=rep(1:10, times=1000),y=1:10000)
ddply(df, "x" , function(df) df[sample(nrow(df), 10),]) 
```

遵循与我相同的原则，您的逻辑向量可能会更复杂一些

```
ddply(df, "x" , function(df) { 
    pick <- rep(FALSE,nrow(df)); 
    pick[sample(nrow(df),10)] = TRUE; 
   cbind(df, "z"=pick) 
}) 
```

可以肯定的是，可以改进。

# python - 使用rope从方法签名中删除*args和**kwargs

> ID：12227892
> 
> 赞同：1
> 
> 时间：2012-09-01T12:51:42.593
> 
> 标签：python, refactoring, signature, variadic-functions, rope

我正在使用 eric4 及其绳索插件来重构一些代码。我有很多方法，其签名使用`*args`and`**kwargs`语法。我想更改这些签名并删除此参数。

我试过使用，`Refactoring>Refactoring>Change Method Signature`但这不会删除`*args`和`**kwargs`参数。

请问这是rope本身的限制，还是eric的插件不支持这个功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:17:39.980

为什么要删除`*args`and `**kwargs`？要重构这些函数，重构库需要执行相当多的自省才能知道正确的参数。

例如，您将如何重构以下函数：

```
def f(*args, **kwargs):
    a = args[0]
    b = args[1]
    c = kwargs.get('c', 3)
    d = kwargs.get('d', 4)
    print a, b, c, d 
```

你可以把它变成：

```
def f(a, b, c=3, d=4):
    print a, b, c, d 
```

它已经需要相当多的代码分析才能做到这一点，而对于真正的功能来说，这更加困难。位置参数和关键字参数的数量可能会有所不同（例如，函数可以迭代`args`），这使得很难确定正确的函数参数。

除非有真正的需要，否则我会保留`*args`and`**kwargs`并专注于其他重构工作。

# .net - 如何在 .Net 中创建一个 Web 应用程序，在运行时为网站的每个用户生成一个子域 URL

> ID：12227893
> 
> 赞同：0
> 
> 时间：2012-09-01T12:51:55.060
> 
> 标签：.net, iis-7, url-rewriting, saas, wildcard-subdomain

技术人员您好，

我打算使用***SaaS***模型创建一个 Web 应用程序。

为此，我想以这样一种方式开发应用程序，即应用程序应该在运行时为每个网站用户创建一个唯一的子域 URL，例如：

如果网站是 **www.mydomain.com**，那么它应该在运行时创建子域 URL，即 **User1 的 www.user1.mydomain.com 和 User2 的** www.user2.mydomain.com **等等**。

该网站将使用 .NET framework 4.0 和 Sql server 2008 创建。托管环境将是 IIS 7.0。

关于这一点，我有一些想法，我需要使用在 IIS 7.0 上为 Web 应用程序激活的通配符域工具进行 URL 重写。

但是，在 IIS 上激活通配符域工具的实际过程和显示用户特定子域 url 的代码段对我来说并没有清除。

早期的回应将不胜感激。

干杯！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:54:53.617

**第 1 步：**从用户那里获取所有绑定信息，即（IP 地址、主机名、应用程序池）。

**第 2 步：**检查网站名称是否已存在于您的 IIS 中，如果是，则必须提供唯一名称。

**第 3 步：**在 IIS 中创建一个包含所有绑定信息的新站点。

我之前做了同样的任务，在每个新站点创建时也创建了新的数据库。

# jquery - 使用 jQuery 淡入背景图像

> ID：12227901
> 
> 赞同：0
> 
> 时间：2012-09-01T12:52:32.750
> 
> 标签：jquery, html, css, internet-explorer, fadein

这是我第一次使用 jQuery。我正在加载一个大的背景图像，当它被加载时，我会在三秒钟内将其淡化。该脚本适用于 Firefox 和 Chrome，但不适用于 IE（当然！）。是否有任何故障安全方法可以让它在 IE 中神奇地工作，是否有一些更漂亮的编写方式？

```
<div class="bgImage" /> 
```

* * *

```
$(document).ready(function () {
  // add bg image and fade
  var _image = new Image();
  _image.id = 'newImageId';
  _image.src = "./css/background.jpg";

  $(_image).load(function () {
    $('div.bgImage').css('background-image', 'url(./css/background.jpg)');
    $('div.bgImage').fadeTo(3000, 1);
  });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T13:11:12.657

采用

```
 $('div.bgImage').animate({ opacity: 1 }, { duration: 3000 }); 
```

假设你开始`style="opacity: 0;"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:56:21.587

## HTML

```
<body>
  <div class="bgImage"></div>
  ...
</body> 
```

## CSS

```
.bgImage {
  position: fixed;
  top: 0; left: 0;
  right: 0; bottom: 0;
  z-index: 1;
  display: none;
} 
```

## Javascript

```
$(function() {
  var src = '../css/background.jpg';
  var ele = $('.bgImage');
  var img = $('<img>', {
    src: src
  }).hide().appendTo(ele).load(function() {
    $(this).remove();
    ele.css('background-image', 'url('+src+')').fadeIn(3000);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:06:59.897

为此，您不需要编写那么多行代码，这个简单的代码将为您工作...

```
$(document).load(function () {
  $('div.bgImage').css('background-image', 'url(./css/background.jpg)');

  $(document).ready(function () {
    $('div.bgImage').fadeIn(3000);
  });
}); 
```

# c# - 在“异步”方法上达到“等待”时线程会发生什么？

> ID：12227906
> 
> 赞同：17
> 
> 时间：2012-09-01T12:53:17.323
> 
> 标签：c#, multithreading, asynchronous, async-await, ctp

正如标题所暗示的，我的问题是关于“异步”和“等待”的背景。

说当前线程到达'await'关键字，它进入“睡眠”，并在await方法完成时唤醒是真的吗？

谢谢！

盖伊

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-01T13:02:23.590

> 说当前线程到达'await'关键字，它进入“睡眠”，并在await方法完成时唤醒是真的吗？

不，关键`async`是要*避免*线程在可以做其他工作时休眠。此外，如果运行 async 方法的线程是 UI 线程，那么您*根本*不希望它处于休眠状态 - 您希望它可用于其他事件。

当执行到达一个`await`表达式时，生成的代码将检查您正在等待的东西是否已经可用。如果是，您可以使用它并继续前进。否则，它将在“等待”部分添加一个*延续，**并立即返回*。

延续确保在等待值准备好时运行其余的异步方法。发生在哪个线程取决于您正在等待的上下文 - 如果异步方法在线程池线程中运行，则延续可以在与方法启动的线程不同的线程上运行......但这不应该事情。（上下文的其余部分仍将被传播。）

请注意，异步方法可以在没有完成的情况下返回 - 因为异步方法不能直接返回值 - 它总是返回一个`Task<T>`（或`Task`，或`void`）......并且该方法返回的任务只会被完成当异步方法真正结束时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:02:58.143

不，当前线程实际上并没有进入睡眠状态。执行继续。这就是它的全部技巧。您可能有一些代码在异步操作仍处于挂起状态时处理数据。这意味着当这些异步完成时，您的主线程可以自由运行和处理其他数据。

至于问题的另一部分 - async 只是在另一个线程上执行，而不是当前线程。我相信 CLR 负责旋转这些线程，以便同时允许许多异步操作（即，您可能同时从不同的 Web 服务器异步检索数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T06:18:24.190

`async`只是允许`await`使用关键字的语法糖。

如果`async, await`在 ASP.NET Core 中使用，那么您的请求线程将被释放到线程池。

[正如斯蒂芬·克利里所说：](https://docs.microsoft.com/en-us/archive/msdn-magazine/2014/october/async-programming-introduction-to-async-await-on-asp-net)

> 异步请求处理程序的操作方式不同。当一个请求进来时，ASP.NET 获取它的一个线程池线程并将它分配给那个请求。这次请求处理程序将异步调用该外部资源。这会将请求线程返回到线程池，直到对外部资源的调用返回。图 3 说明了在请求异步等待外部资源时具有两个线程的线程池。

[![在此处输入图像描述](../Images/9b1ef460074bcfe79cf9b7b1fc95807a.png)](https://i.stack.imgur.com/pAtsE.png)

> 重要的区别是请求线程在异步调用进行时已经返回到线程池。当线程在线程池中时，它不再与该请求相关联。这一次，当外部资源调用返回时，ASP.NET 会采用其线程池线程之一并将其重新分配给该请求。该线程继续处理请求。当请求完成时，该线程再次返回到线程池。请注意，对于同步处理程序，同一线程用于请求的生命周期；相反，对于异步处理程序，不同的线程可能被分配给同一个请求（在不同的时间）。

**对于桌面应用程序：**

> `await`释放当前线程，但不释放到线程池。UI 线程并非来自线程池。如果你运行异步方法，例如[`ExecuteScalarAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.data.common.dbcommand.executescalarasync?view=net-6.0)没有`async, await`关键字，那么无论如何这个方法都会异步运行。调用线程不会受到影响。
> 
> 特别感谢对[Panagiotis Kanavos](https://stackoverflow.com/users/134204/panagiotis-kanavos)的好评。

例如，您有一个繁重的存储过程，而您的存储过程需要 10 分钟才能执行。如果您在没有`async, await`关键字的情况下从 C# 运行此代码，那么您的执行线程将等待您的存储过程 10 分钟。而这个等待线程什么也不做，它只会等待存储过程。

但是，如果`async, await`使用关键字，那么您的线程将不会等待存储过程。该线程将有资格工作。

# android - Android Spinner 值不显示答案

> ID：12227910
> 
> 赞同：0
> 
> 时间：2012-09-01T12:53:46.063
> 
> 标签：android

我的微调器有问题，它没有显示任何内容，并且出现错误。请检查以下代码：

```
 private void createSpinnerValues(){

    spinnerValues = new HashMap<String, Double>();
    spinnerValues.put( "Sedentary", 1.2 );
    spinnerValues.put( "Lightly Active", 1.375 );
    spinnerValues.put( "Moderately Active", 1.55 );
    spinnerValues.put( "Heavily Active", 1.725 );

} // end of createSpinnerValue   

private Double getAnswer(String age, String in, String ft, String weight, Double selectedItemValueFromSpinner) {

    double answer = ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + 
            ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) ) 
            - ( 6.8 * Double.parseDouble( age ) ) ) * selectedItemValueFromSpinner ); 
    return answer;

} // end of getAnswer method

private Double getSelectedItemValueFromSpinnerText( String spinnerText ) { 

    Double val = spinnerValues.get(  spinnerText ); 
    if( val==null ){ 
        Log.i( "DEMO", "Value is null" ); } 
    return val; 

} 

        private void calculateWomen(){

    String f1a = etft.getText().toString();
    String f2a = etin.getText().toString();
    String f3a = etweight.getText().toString();
    String f4a = etage.getText().toString();

    if ( ( f1a.isEmpty() || f2a.isEmpty() || f3a.isEmpty() || f4a.isEmpty() ) ) 
        // call for custom toast
        viewErrorToast();
    else{
    // Metric Formula for BMR (Women) English Unit
    //655 + ( 4.3379 x weight in pounds ) + 
    //( 4.6980 x height in inches ) - ( 4.6756 x age in years )
     String age, in, ft, weight;
     Double answer;

     age =  etage.getText().toString();
     in =  etin.getText().toString();    
     ft = etft.getText().toString();
     weight = etweight.getText().toString();

     answer =  ( ( 665 + ( 4.3379 * Double.parseDouble( weight ) ) + 
             ( 4.6980 * ( Double.parseDouble( in ) ) * 12 + Double.parseDouble( ft ) )
             - ( 4.6756 * Double.parseDouble( age ) ) )  * 1.2);
     BigDecimal bd = BigDecimal.valueOf( answer );
     bd = bd.setScale( 2, BigDecimal.ROUND_FLOOR );
     etanswer.setText( bd.toString() );  

     // call for custom toast
     viewBMRSavedToast();
    }

} // end of calculateWomen method 
```

请帮我找出我的问题，我是android编程的新手。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T14:07:56.657

我假设您以稍微错误的方式使用微调器，有一个小例子。设置适配器和微调器 int pos =0; //类变量 List list = new ArrayList(); Spinner spin = (Spinner) findViewById(R.id.id); ArrayAdapter 适配器 = new ArrayAdapter(this, android.R.layout.simple_spinner_item, list); 适配器 .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); spinPriceFor.setAdapter（适配器）；

填充列表（您可以在设置适配器之前填充它并跳过此步骤）

```
list.add(item);
runOnUiThread(new Runnable() {
            public void run() {
                adapterRegion.notifyDataSetChanged();
            }
        }); 
```

从微调器中获取所选元素

```
spinSettle.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                pos=position;
String a = list.get(pos); //do what ever you want with selected item
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
            }
        }); 
```

当您需要来自 spinnerValues 的第二个值时

```
spinnerValues.get(list.get(pos)); 
```

# php - PHP删除现有数组

> ID：12227920
> 
> 赞同：0
> 
> 时间：2012-09-01T12:54:41.497
> 
> 标签：php, arrays, class

如何删除现有数组（参见下面的代码）？，我知道 CodeIgniter 是一个很好的框架，但我想了解 CI 如何管理他们的 $this->data 方法。

我的代码：

```
<?php
class simple {

   public $data;

   public function set($key, $value)
   {
      $this->data[$key] = $value;
   }
}

class testa extends simple {

   function yoop()
   {
      $this->set('name', 'excelent');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

   function noop()
   {
      $this->set('level', 'normal');
      $this->set('power', 'high');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }
}

$testa = new testa;
$testa->yoop();
$testa->noop();

/* EOF */ 
```

当前结果：

```
Array
(
    [name] => excelent
)
Array
(
    [name] => excelent
    [level] => normal
    [power] => high
) 
```

我想删除现有的数组，我想要的最终结果是：

```
Array
(
    [name] => excelent
)
Array
(
    [level] => normal
    [power] => high
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:02:55.547

我真的不明白你在这里的目的是什么。为什么不简单：

```
class testa {
   public $data;

   function yoop()
   {
      $this->data = array('name' => 'excellent');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

   function noop()
   {
      $this->data = array(
          'level' => 'normal',
          'power' => 'high'
      );
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:12:32.480

尝试为您的`testa`类创建另一个函数：

```
function qoop(){
     unset($this->data['name']); // this function remove $data key by 'name'
     $this->set('level', 'normal');
     $this->set('power', 'high');
     echo '<pre>'.print_r($this->data, TRUE).'</pre>';
} 
```

* * *

结果将是：

```
Array
(
    [name] => excelent
)
Array
(
    [level] => normal
    [power] => high
) 
```

* * *

**原始代码**：

```
<?php
class simple {

   public $data;

   public function set($key, $value)
   {
      $this->data[$key] = $value;
   }
}

class testa extends simple {

   function yoop()
   {
      $this->set('name', 'excelent');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

   function noop()
   {
      $this->set('level', 'normal');
      $this->set('power', 'high');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

   function qoop()
   {
      unset($this->data['name']); // this function remove $data key by 'name'
      $this->set('level', 'normal');
      $this->set('power', 'high');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

}

$testa = new testa;
$testa->yoop();
$testa->qoop();

/* EOF */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:56:37.187

```
$testa = new testa;
$testa->yoop();

$testa1 = new testa;
$testa1->noop(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T13:00:17.653

你不能这样做，

您正在尝试访问同一个数组，但期望得到不同的结果？如果你真的想这样做（不知道为什么），你可以再次设置数组，或者可以使用两个实例

只是

```
<?php
class simple {

   public $data;

   public function set($key, $value)
   {
      $this->data[$key] = $value;
   }

   public function reset(){
       this->data = array();
   }
}

class testa extends simple {

   function yoop()
   {
      $this->reset();
      $this->set('name', 'excelent');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }

   function noop()
   {
      $this->reset();
      $this->set('level', 'normal');
      $this->set('power', 'high');
      echo '<pre>'.print_r($this->data, TRUE).'</pre>';
   }
}

$testa = new testa;
$testa->yoop();
$testa->noop();

/* EOF */ 
```

# javascript - 在“it”块之外运行代码会破坏我的 Jasmine 测试

> ID：12227922
> 
> 赞同：1
> 
> 时间：2012-09-01T12:55:05.210
> 
> 标签：javascript, jasmine

*我正在尝试使用jasmine*编写一些测试用例（第一次）

 *```
describe("Widget App core logic", function () {
  WAPP.widgets = []; 
```

addwidget 将在我的 WAPP.widgets 数组中添加一个小部件

```
 WAPP.addWidget('testRecord', 'testRecordContent');
  it("added", function () {
        expect(WAPP.widgets.length).toEqual(1);
    }); 
```

删除小部件将删除相同的小部件

```
 WAPP.removeWidget('1'); 
  it("record removed correctly", function () {
        expect(WAPP.widgets.length).toEqual(0);
    }) 
```

在编写第二个规范后，我的第一个规范失败了，因为它显示*WAPP .widgets*是空的。即使在第一个规范的时候WAPP .widgets*中有一个值*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:22:13.580

这里的问题是您不应该在`it`. 外部的代码在`it`所有测试用例执行之前运行一次。在您的情况下可能发生的事情是您在测试开始之前删除了所有小部件。

你的测试代码应该是这样的：

```
describe("Widget App core logic", function () {
  beforeEach(function () {
    WAPP.widgets = [];
  });

  it("added", function () {
    WAPP.addWidget('testRecord', 'testRecordContent');
    expect(WAPP.widgets.length).toEqual(1);
  });

  it("record removed correctly", function () {
    WAPP.addWidget('1', '1');
    WAPP.removeWidget('1'); 
    expect(WAPP.widgets.length).toEqual(0);
  })    

}); 
```

请注意，您的测试代码应该是独立的，所有初始化都应该在`it`or with内完成`beforeEach`。*

# intellij-idea - intellij 想法，如何从代码中找到包名？

> ID：12227926
> 
> 赞同：0
> 
> 时间：2012-09-01T12:55:47.603
> 
> 标签：intellij-idea, package

例如，在 Eclipse 中，当您从 Internet 复制代码并粘贴到 IDE 中时，当您将鼠标放在方法上方时，Eclipse 会显示该方法属于哪个包和类。因此，您可以一键将其添加到代码中。

我已将以下代码复制/粘贴到 IntelliJ IDE 中：

```
double d1, d2;
Scanner scannerObject = new Scanner(System.in);
d1 = scannerObject.nextDouble();
d2 = scannerObject.nextDouble();
System.out.println("You entered " + d1 + " and " + d2); 
```

我的问题是，有没有像 eclipse 这样的方法将包和类名添加`Scanner`到代码中，而不是`import java.util.Scanner;`手动输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:06:11.190

按 `alt + enter`-> `import class`on class，你会得到可能的包列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T16:11:04.773

还有一个有用的首选项“**设置>编辑器>自动导入>动态优化导入**”你可以打开。

问候

# php - Magento 产品页面调整

> ID：12227930
> 
> 赞同：0
> 
> 时间：2012-09-01T12:56:22.073
> 
> 标签：php, magento, model, controller, product

我需要在产品页面上显示来自 MANUFACTURERS 表相应行的几个字段

我不知道如何找到该任务所需的模型和控制器。

制造商表是制造商存储的表

还有另外一张表Manufacturer_products(manufacturer_id,product_id)

我所做的是将 2 个复选框添加到后端添加/编辑制造商表单，并添加到制造商表中此复选框的字段中。

现在我需要在制造商创建过程中根据用户选择为每个字段显示 2 种类型的字符串。

例如，如果第一个复选框被选中，那么在所有具有相同制造商的产品上，必须出现文本行，告诉第一个复选框被选中。第二个也是一样。

实际上我需要这个复选框参与产品比较和过滤。

任何信息都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:33:21.137

这是我的解决方案。

1) 为制造商模块布局（**manufacturers.xml** ）添加了新块，位于前端站点主题的布局文件夹中

2）在制造商模块块文件夹中创建新的块类，并在我的块的**类型**属性中指定它，在**第一步添加**

3）在block类中，必须扩展protected方法

`_tohtml()`

通过添加您自己的行为。别忘了打电话

`parent::_tohtml()`

4) 要使用**Manufacturers表，您必须向该模块的****Manufacturers**模型添加新方法，并在此处调用

```
$this->getRequest()->yourNewMethodName() 
```

**5）在Manufacturers**模型中添加新的同名方法，放在本模块的**Mysql4**文件夹或**Model文件夹中。**您必须在此处添加查询，该查询将从制造商表中检索数据

您还可以创建启用/禁用配置参数。为此，您必须阅读 Magento **system.xml**配置（**选项卡、部分、组、字段**）

此解决方案步骤对于任何 magento 模块都是可接受的。希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:37:32.500

如果要获取扩展的模型和控制器，则需要检查模块文件。为了检查只是

a) 转到 app/code/community 或 app/code/local 那里您会找到像 FME 这样的包名称，在该文件夹中您会找到您的模块名称。

b）为了检查模型，只需进入 Module 文件夹 - > etc 文件夹并检查 config.xml

c）在 config.xml 中，您会找到类似的代码

```
 <entities>
          <modelname>
                <table>tablename</table>
          </modelname>
  </entities> 
```

在上面的代码中 Modelname 标签将给出模型名称

d) 为了找到控制器，您需要检查控制器文件夹。

希望这可以帮助！！

# php - 从 PHP 脚本中保留 SQL 中的值？（更新声明）

> ID：12227938
> 
> 赞同：2
> 
> 时间：2012-09-01T12:56:56.553
> 
> 标签：php, mysql, sql, pdo, sql-update

我有一个接收一些参数的 PHP 函数。每个参数对应一个 SQL 行的 VALUE。我想做的是根据参数更新值；但有一些参数不是强制性的。因此，如果参数设置为“keep”，则 VALUE 必须保持其当前值。这就是我卡住的地方。

这是功能：

```
function upt($id, $p1, $p2)
{
    if ($p1 === 'keep')
        $p1 = 'columnName1';
    if ($p2 === 'keep')
        $p2 = 'columnName2';
    $REQ = $DB->prepare('UPDATE ms_cart_products SET columnName1=:P1, columnName2=:P2 WHERE ID=:ID');
    $REQ->execute(array(
        ':P1' => $p1,
        ':P2' => $p2,
        ':ID' => $id));
    $REQ->closeCursor();
} 
```

显然，这是行不通的（即使我暗中希望使 $p1 = 'columnName1' 能够像我直接在 SQL 控制台中创建 COL1=COL1 一样工作）。VALUE 按字面意思设置为“columnName”。

有任何想法吗 ？

谢谢你，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:02:13.927

让我们假设您使用 PostgreSQL 或 MySQL（我在这里没有提及其他 RDBMS，如果您使用其他东西请告诉我们）。然后你可以写一个`UPDATE`like

```
...
SET columnName1 = COALESCE(NULLIF(:your_value, 'keep'), columnName1)
... 
```

`NULLIF`当提供的值不同时返回其第一个值，否则返回`NULL`. `COALESCE`然后返回第一个非 NULL 值。这样，如果您将 'keep' 传递给此表达式，则内部`NULLIF`部分的计算结果为 NULL，因此`COALESCE`返回值保留在`columnName1`. 否则`NULLIF`返回传递的值并`COALESCE`对其进行评估。

请参阅文档：

[http://www.postgresql.org/docs/9.1/static/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL](http://www.postgresql.org/docs/9.1/static/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)

或者

[http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_nullif](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_nullif)

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:04:10.650

如果我是你，我会创建一个类，但这也有效。

```
# Outside the function 
$col1;
$col2;

function upt($id, $p1, $p2)
{
    # Inside the function
    global $col1;
    global $col2;
    if ($p1 === 'keep')
    {
        $col1 = 'columnName1';
    }
    if ($p2 === 'keep')
    {
        $col2 = 'columnName2';
    }
    $REQ = $DB->prepare('UPDATE ms_cart_products SET columnName1=:P1, columnName2=:P2 WHERE ID=:ID');
    $REQ->execute(array(
        ':P1' => $col1,
        ':P2' => $col2,
        ':ID' => $id));
    $REQ->closeCursor();
} 
```

# c# - 如何将 DrawingVisual 转换为位图？

> ID：12227941
> 
> 赞同：3
> 
> 时间：2012-09-01T12:57:10.607
> 
> 标签：c#, image, bitmap, drawingvisual

使用 Visual C# 2010，我试图从从 Windows Kinect 接收的帧中编写一个 .avi 文件。使用 BitmapEncoder 和 PngBitmapEncoder（保存到流），可以很容易地将帧保存为 .png 文件，但我不能自行决定将这些图像添加到此处提供的 VideoStream： [http://www.codeproject。 com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library) ，因为我需要能够将 RenderTargetBitmap 或 DrawingVisual 转换为 System.Drawing.Bitmap。

我找到了做类似事情的示例代码，但它们似乎都想实例化 Visual Studio 告诉我的 Image 类是抽象的并且无法实例化。

我绕着圈子转，什么也没有。

我只想做这样的事情：

```
...
renderBitmap.Render(dv);
Bitmap bmp=new Bitmap(dv);
VideoStream aviStream=aviManager.AddVideoStream(true,60,bmp);
... 
```

但是 Bitmap 没有有用的构造函数来让我从 dv (DrawingVisual) 到 bmp。:(

这 3 行来自此代码段：

```
var renderBitmap=new RenderTargetBitmap(colorWidth,colorHeight,96.0,96.0,PixelFormats.Pbgra32);
DrawingVisual dv=new DrawingVisual();
using(DrawingContext dc=dv.RenderOpen())
{
    VisualBrush backdropBrush=new VisualBrush(Backdrop);
    dc.DrawRectangle(backdropBrush,null,new Rect(0,0,colorWidth,colorHeight));
    VisualBrush colorBrush=new VisualBrush(MaskedColor);
    dc.DrawRectangle(colorBrush,null,new Rect(0,0,colorWidth,colorHeight));
    VisualBrush watermarkBrush=new VisualBrush(Watermark);
    dc.DrawRectangle(watermarkBrush,null,new Rect(colorWidth-96,colorHeight-80,64,48));
}
renderBitmap.Render(dv);
Bitmap bmp=new Bitmap(dv);
VideoStream aviStream=aviManager.AddVideoStream(true,60,bmp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T16:55:34.757

使用[RenderTargetBitMap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)的结果是一个 WPF [BitMapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx)它不会将 Visual 本身转换为 a `BitmapSource`，它包含转换结果为 a `BitmapSource`。为了将 a 转换`BitmapSource`为`System.Drawing.Bitmap`尝试使用此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/13147707-a9d3-40b9-82e4-290d1c64ccac/)中代码的修改版本。

```
renderBitmap.Render(dv);
BitmapSource bmp = renderBitmap;

using(MemoryStream outStream = new MemoryStream())
{
    BitmapEncoder enc = new BmpBitmapEncoder();
    enc.Frames.Add(BitmapFrame.Create(bmp));
    enc.Save(outStream);
    System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(outStream);
    VideoStream aviStream=aviManager.AddVideoStream(true,60,bitmap);  
} 
```

* * *

创建了一个方法来返回您的位图

```
renderBitmap.Render(dv);
BitmapSource bmp =renderBitmap;

VideoStream aviStream = aviManager.AddVideoStream(true, 60, ConvertToBitmap(bmp)); 
```

* * *

```
private System.Drawing.Bitmap ConvertToBitmap(BitmapSource target)
{
    System.Drawing.Bitmap bitmap;

    using (MemoryStream outStream = new MemoryStream())
    {
        BitmapEncoder enc = new BmpBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(target));
        enc.Save(outStream);
        bitmap = new System.Drawing.Bitmap(outStream);
    }

    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T11:49:04.637

```
private BitmapSource ToBitmapSource(Visual visual, Brush transparentBackground)
{
    var bounds = VisualTreeHelper.GetDescendantBounds(visual);
    var scale = VisualTreeHelper.GetDpi(visual);
    var bitmapSource = new RenderTargetBitmap(
        (int)(bounds.Width * scale.DpiScaleX),
        (int)(bounds.Height * scale.DpiScaleY),
        scale.PixelsPerInchX,
        scale.PixelsPerInchY,
        PixelFormats.Pbgra32);
    var drawingVisual = new DrawingVisual();
    using (var drawingContext = drawingVisual.RenderOpen())
    {
        drawingContext.DrawRectangle(transparentBackground, null, new Rect(bounds.Size));
        drawingContext.DrawRectangle(new VisualBrush(visual), null, new Rect(bounds.Size));
    }
    bitmapSource.Render(drawingVisual);
    return bitmapSource;
}

private System.Drawing.Bitmap BitmapFromSource(BitmapSource bitmapsource)
{
    System.Drawing.Bitmap bitmap;
    using (MemoryStream outStream = new MemoryStream())
    {
        BitmapEncoder enc = new BmpBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(bitmapsource));
        enc.Save(outStream);
        bitmap = new System.Drawing.Bitmap(outStream);
    }
    return bitmap;
} 
```

# javascript - 讲解 Eloquent Javascript 第 6 章中的匿名函数代码示例

> ID：12227943
> 
> 赞同：3
> 
> 时间：2012-09-01T12:57:32.707
> 
> 标签：javascript, anonymous-function

我在调用[Eloquent Javascript（第 6 章）](http://eloquentjavascript.net/chapter6.html)中的匿名函数代码示例的 sum 函数时遇到了困难，虽然我理解这篇[文章](https://stackoverflow.com/questions/11827477/eloquent-javascript-cant-understand-how-the-number-value-is-determined-in-the)中澄清的内容，但我真的不明白匿名函数是如何被调用的。

据我了解这段代码：

```
function forEach(array, action) {
  for (var i = 0; i < array.length; i++)
    action(array[i]);
}

function sum(numbers) {
  var total = 0;
  forEach(numbers, function (number) {
    total += number;
  });
  return total;
}
alert(sum([1, 10, 100, 1000])); 
```

类似于此代码（感谢@CKKiller 在另一个线程中的帮助）：

```
numbers = [1, 10, 100, 1000];
for (var i = 0; i < numbers.length; i++) {
  var number = numbers[i];

  function (number) {
    total += number;
  }
}
alert(total); 
```

但是我无法运行第二个代码示例，它有什么问题？据我了解，无法调用语法**函数 (number) {}**，但这不是第一个示例指示函数执行的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:00:24.707

在第二个代码片段中，您只是声明了一个匿名函数。*调用*它，它应该可以正常工作。要“立即调用函数表达式”，您应该这样做：

```
(function (){
    // Your code
})(); 
```

或者

```
(function (){
    // Your code
}()); 
```

他们被称为IIFE。（在上面的引用中）

正如 user1600680 在下面的评论中指出的那样，要编辑您的代码，您必须`number`从参数列表中删除。它会是这样的：

```
(function () {
  total += number;
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:19:57.453

> 但是我无法运行第二个代码示例，它有什么问题？

您有一个没有名称的**函数声明**：

```
function (number) {
    total += number;
} 
```

函数声明**总是**必须包含函数的名称。请参阅规范中的[第 13 节](http://es5.github.com/#x13)。

> 根据我的理解，不可能调用 syntax `function (number) {}`，但这不是第一个示例指示函数执行的操作吗？

不是它不是。在第一个示例中，您有一个**函数表达式**，因为该函数是在表达式上下文中定义的（它作为参数传递给另一个函数）。函数表达式不需要名称。表达式被评估为一个函数对象，然后作为参数传递给`forEach`. `function (number) {}`不调用函数，它定义它。

> 我真的不明白匿名函数是怎么调用的

它没有什么特别之处。重要的方面是函数是第一类对象，即它们可以像任何其他值（原始值或对象）一样被分配给变量并传递给其他函数。 `action`指的是一个函数，因此您可以使用 . 调用该函数`action()`。该函数直接传递给`forEach`：

```
forEach(numbers, function (number) {
    // ...
}); 
```

虽然它是在内部调用`forEach`的，但它可以更新 的值，`total`因为它是在其中*定义*的`sum`，因此是一个可以访问内部所有局部变量的闭包`sum`。

您也可以事先定义函数：

```
function sum(numbers) {
    var total = 0;
    function add(number) {
       total += number;
    }
    forEach(numbers, add);
    return total;
} 
```

但是，如果您只使用一次值，则无需先将其分配给变量（或为此声明一个函数）。例如，您还将数组直接传递给`sum`：

```
sum([1, 10, 100, 1000]) 
```

而不是首先将其分配给变量：

```
var numbers = [1, 10, 100, 1000];
sum(numbers); 
```

* * *

与显示类似行为的第一个代码等效的是：

```
var numbers = [1, 10, 100, 1000],
    total = 0,
    action = function(number) { // variable assignment -> expression context
        total += number;
    };

for (var i = 0; i < numbers.length; i++) {
  var number = numbers[i];
  action(number);
}

alert(total); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T13:05:35.563

第二个例子不**调用**匿名函数，它只声明函数。`total`因此，for 循环对变量没有任何作用（我假设它之前在某处声明过）。`alert(total)`只会输出最后分配给 total 的内容（因为匿名函数永远不会被调用，不会`total`被更新）。

# javascript - davis.js 带有完整的地址链接

> ID：12227948
> 
> 赞同：0
> 
> 时间：2012-09-01T12:57:46.787
> 
> 标签：javascript, html, url, browser-history

我正在尝试使用 davis.js 历史插件，但我有问题（使用 codeigniter，但这并不重要）。

```
var app = Davis(function () {
this.get('http://localhost/folder/controller/:id', function (req) {
        alert("Hello " + req.params['id'])
    })
})

app.start() 
```

和链接：

```
<a href="http://localhost/folder/controller/2">ID</a> 
```

这样它不起作用，因为它是完整的地址，我怎样才能让戴维斯看起来完整的地址？

或者你可以建议我另一个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:53:16.460

找到了相对网址的解决方案..

# xml-serialization - 使用 XMLEncoder/Decoder 默认调用 newInstance？

> ID：12227950
> 
> 赞同：0
> 
> 时间：2012-09-01T12:57:56.827
> 
> 标签：xml-serialization, xmlencoder

通过反复试验，我发现标准 java.bean XMLEncoder/Decoder 将始终使用静态工厂“newInstance”方法，而不是 null 构造函数（但仅当它被命名为“newInstance”时）。我找不到这是任何文档或在 DefaultPersistence 委托中。

我找错地方了吗？

例子：

```
public class TestClass {

private boolean changed = false;

public TestClass() {
}

public static TestClass newInstance() {
    Thread.dumpStack();
    return new TestClass();
}

public boolean isChanged() {
    return changed;
}

public void setChanged(boolean changed) {
    this.changed = changed;
}

public static void doTestSave() throws FileNotFoundException, IOException {
    BufferedOutputStream buffer = new BufferedOutputStream(new java.io.FileOutputStream("Test.xml"));
    XMLEncoder e = new XMLEncoder(buffer);
    Thread.currentThread().setContextClassLoader(TestClass.class.getClassLoader());
    TestClass t = new TestClass();
    t.setChanged(true);
    e.writeObject(t);
    e.close();
    buffer.close();
}

public static Object loadTestFile() throws FileNotFoundException, IOException {
    BufferedInputStream buffer = new BufferedInputStream(new FileInputStream("Test.xml"));
    XMLDecoder e = new XMLDecoder(buffer);
    e.close();
    buffer.close();
        return e.readObject();
}
} 
```

`

运行 loadTestFile 时来自 newInstance 的堆栈转储是：

```
at java.lang.Thread.dumpStack(Thread.java:1273)
at kcl.waterloo.XMLCoder.TestClass.newInstance(TestClass.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:37)
at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
at java.beans.Statement.invokeInternal(Statement.java:239)
at java.beans.Statement.access$000(Statement.java:39)
at java.beans.Statement$2.run(Statement.java:140)
at java.security.AccessController.doPrivileged(Native Method)
at java.beans.Statement.invoke(Statement.java:137)
at java.beans.Expression.getValue(Expression.java:98)
at com.sun.beans.MutableExpression.getValue(ObjectHandler.java:445)
at com.sun.beans.ObjectHandler.getValue(ObjectHandler.java:108)
at com.sun.beans.ObjectHandler.eval(ObjectHandler.java:130)
at com.sun.beans.ObjectHandler.startElement(ObjectHandler.java:238)
at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(SAXParser.java:142)
at java.beans.XMLDecoder.getHandler(XMLDecoder.java:238)
at java.beans.XMLDecoder.readObject(XMLDecoder.java:201)
at kcl.waterloo.XMLCoder.TestClass.loadTestFile(TestClass.java:74) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:48:31.860

我想我已经解决了这个问题。

与 Oracle 错误 ID 4920456 相关，建议将*newInstance()*设为静态作为解决方案 - 但这会导致调用静态方法而不是 null 构造函数。

*java.beans.Statement 调用*方法内联文档解释说：“对于类方法，[它]通过将实际类的静态方法与“Class.class”和构造函数定义的重载“newInstance”方法。”

副作用似乎是，当类中存在名为*newInstance*的无参数静态方法时，应调用*java.lang.Class.newInstance()方法以调用 null 构造函数时调用此方法。*

解决方案是不要在使用 XMLEncoder 的类中使用“newInstance”作为方法名。

# ruby-on-rails - 禁止 403 - Rails 应用程序

> ID：12227957
> 
> 赞同：0
> 
> 时间：2012-09-01T12:59:03.557
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, nginx, capistrano

一些帮助将不胜感激 - 不断收到 Forbidden 403 错误。Nginx 配置：

```
listen       80;
server_name  www.xxx.com;   
passenger_enabled   on;
#charset koi8-r;
#access_log  logs/host.access.log  main;
root   /home/deploy/xxx.com/current; 
```

我已经使用 Capistrano 进行了部署，并且它是成功的（cap deploy）。其次，我删除了我的“公共”文件夹，并在 routes.rb 中启用了我的“路由”。

```
root to: 'static_pages#home' 
```

最初我有“公共”文件夹，但它一直在“index.html”，而不是 Rails / Home。我已经在本地尝试过，它与 localhost:3000 上的“rails 服务器”完美配合。

似乎 NGINX 现在不知道如何查找或提供 Rails 页面。

附言。我确实审查了 StackOverflow，但运气不好。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:49:48.233

Yihhaaaaa 好的，明白了！

问题似乎是评论中提到的两件事：

> (a) 预编译错误；“图像”未加载。进入
> config/environments/production.db 并打开“true”进行资产编译。
> 
> (b) 第二件事是因为我在 Mac OS X 上开发，默认包含 Javascript 运行时，而我的生产 Ubuntu 没有。所以我添加到 GemFile - gem "therubyracer"。

你知道它有效吗！关键是查看 production.log (/home/deploy/xxx.com/current/log/)。这将说明一切。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T15:23:47.983

与此错误有关的原因有多种，请查看此帖子以获取更多详细信息： http: [//thelazylog.com/posts/how-to-fix-403-fobidden-issue-on-nginx-rails-application](http://thelazylog.com/posts/how-to-fix-403-fobidden-issue-on-nginx-rails-application)

# jquery - jQuery Slider：未捕获的 TypeError：无法调用未定义的方法“addClass”

> ID：12227959
> 
> 赞同：6
> 
> 时间：2012-09-01T12:59:16.877
> 
> 标签：jquery, exception, slider

我有以下 jquery 滑块代码：

```
 $(function() {
    var select = $( "#ppp" );
    var slider = $( "<div id='slider' style='width:575px;'></div>" ).insertAfter( select ).slider({
        min: 3,
        max: 60,
        range: "min",
        value: window.slidervalue,
        step:3,
        slide: function( event, ui ) {
            select[ 0 ].value = ui.value;

        },
        stop: function( event, ui ) {
            document.getElementById('vpp').innerHTML=ui.value;
            show_products('1','Y','N','N','N','N','Y');
        }
    }); 
```

window.slidervalue 指的是在其他地方设置的数字。#ppp 指的是当我使用 jQuery 1.7.2 时一切正常。然而，当我切换到 1.8.1 时，它抛出了一个异常：“Uncaught TypeError: Cannot call method 'addClass' of undefined” 不知道为什么......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T13:04:01.180

1.8.1 现在也处于测试和开发阶段，并且存在一些错误 - 如果您没有错误，请改用 1.7.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:02:02.773

1.8.1 在某些方面似乎有问题 - 如果您没有错误，我更喜欢使用 1.7.2，您需要 1.8 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:03:24.753

问题也存在于 1.8.2 中，在 Michael 的评论之后，我猜 1.8.0、1.8.1 和 1.8.2 都存在同样的问题。我个人使用的是 1.8.2，现在我不得不切换到 1.7.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:20:49.493

> “未捕获的类型错误：无法调用未定义的方法‘addClass’”

我在 1.8.20 中遇到了这个问题，但在 1.10.0 中没有发生

# iphone - 如何每周更新申请徽章？

> ID：12227962
> 
> 赞同：0
> 
> 时间：2012-09-01T12:59:46.270
> 
> 标签：iphone, objective-c, badge, week-number

如何在后台模式下每周更新我的应用程序徽章。

我正在开发一个用于周数的应用程序，然后我的应用程序徽章是当前周数，所以我希望它每周自行更新。

我该怎么做，我已经搜索了谷歌，但我没有找到任何东西。

也许这很简单，但我从未在应用程序委托中使用所有这些方法`UILocalnotifications`或应用程序徽章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:25:49.477

您可以使用 setApplicationIconBadgeNumber 设置徽章编号。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

# vb.net - 使用 MS 访问数据库作为 DataGridView 的数据源似乎无法使用常规方法更新或刷新 DataGridView

> ID：12227963
> 
> 赞同：0
> 
> 时间：2012-09-01T12:59:57.630
> 
> 标签：vb.net, datagridview, datasource, ms-access-2010

我已经彻底搜索了有关通过调用子例程来更新 dataviewgrid 的直接方法的问题的答案。但我必须走运，所以我要在这里发布问题，并附上一些背景代码和细节，以帮助您进一步了解正在发生的事情。

所以我目前有 2 个表单，一个是 frmMain，这个表单包含三个按钮 btnAddItem - 调出 frmAdd btnSearch - 还没有代码 BtnPrint - 还没有代码

frm main 还有一个 dataviewgrid - 当前名为 dvgPEBGrid 我已将此绑定到一个访问数据库，其数据源名为 PEBTableBindingSource

现在到 frmAdd 我有一些字段最终会更新到数据库中我成功地做到了但是在表单关闭后我无法让数据网格更新我已经尝试了很多事情通常发生的是我的数据网格只是清除了所有数据，在我关闭程序并重置之前，我无法让网格返回数据。任何建议将不胜感激。

# oracle - 无法从授予 DBA 的“scott”帐户创建用户

> ID：12227968
> 
> 赞同：2
> 
> 时间：2012-09-01T13:00:20.357
> 
> 标签：oracle

目前，在 Windows XP 上使用 Oracle DB 11g。以 scott 用户（不是 sysdba）身份登录并授予 DBA 角色。根据 Oracle 文档“DBA = 带有 ADMIN OPTION 的所有系统权限”。为什么创建新用户会出现错误“ORA-01031 权限不足...”？下面是使用 SQL Developer 执行的 DDL 命令：

```
CREATE USER john identified by 123 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:15:56.033

查看[`document`](http://docs.oracle.com/cd/B10500_01/server.920/a96521/privs.htm#14895)SET ROLE 和默认角色

要为当前会话启用授予您的所有角色，请发出以下语句：

全部设置角色；

或者修改用户默认角色

ALTER USER scott DEFAULT ROLE ALL;

# c# - 如何在单选按钮列表中的正确站点上设置文本

> ID：12227972
> 
> 赞同：2
> 
> 时间：2012-09-01T13:01:12.617
> 
> 标签：c#, asp.net, controls

我在cs文件中有以下代码

```
QueMAnsM[] Answers = Curr.AnsM;

                        rdbAns.DataSource = Answers;
                        rdbAns.DataTextField = "Answer";
                        rdbAns.DataValueField = "AnsId";
                        rdbAns.DataBind();                        
                        rdbAns.TextAlign = TextAlign.Right; 
```

其中 rdbAns 是 asp:radiobuttonlist 控件

我已将 TextAlign 属性设置为右侧（此代码在页面加载时）但文本仍显示在左侧此代码有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:03:42.367

在列表中将属性设置`TextAlign`为“右”。

```
<asp:RadioButtonList id="RadioButtonList1"
     RepeatDirection="Vertical" 
     RepeatLayout="Table"  
     TextAlign="Right"  
     runat="server"> 
```

或者，在后面的代码中：

```
RadioButtonList1.TextAlign = TextAlign.Right; 
```

或者，也许你可以使用一些 CSS。给你的列表一个`CssClass="rbListWrap"`并添加以下样式：

```
.rbListWrap {
            width: 500px;
         }

         .rbListWrap tr td {
           height:20px;
            vertical-align: middle;  
            padding: 5px;
            width: 33%;
         }

         .rbListWrap input { 
            float:right;
         }

         .rbListWrap label { 
            position: relative;
            padding-left:20px;
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T08:42:45.333

如果要将单选按钮的文本向左移动，请将CheckAlign**属性**设置为**MiddleLeft 。**如果需要，您可以将其移动到其他位置。

[![在此处输入图像描述](../Images/299cb93342a4de0c133529cf1a0ffe82.png)](https://i.stack.imgur.com/lytDR.png)

# javascript - iPhone 移动网络应用程序视网膜图像替换

> ID：12227973
> 
> 赞同：0
> 
> 时间：2012-09-01T13:01:23.997
> 
> 标签：javascript, iphone, css, web-applications

我正在创建一个可以通过任何智能手机访问的网络应用程序。我在这里有 index.html 文件：

[http://www.mediafire.com/view/?hy2jttea705ukpw](http://www.mediafire.com/view/?hy2jttea705ukpw)

我有 2 个 jQuery 函数。一种是检测用户正在通过它查看 Web 应用程序的是否是 iPhone，并出现一个小气泡，详细说明将其添加到主屏幕的说明。接下来是一个脚本，用我的根文件夹中的视网膜图像替换图像，名称中带有“@2x”。

这是我的问题。它有时会起作用，但并不总是能找到视网膜图像来替换原始图像。有任何想法吗？

您可以通过 iPhone在[www.iammarksummerton.co.uk](http://www.iammarksummerton.co.uk)查看该项目，了解我的意思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:35:10.960

我在那里查看了您的应用程序，并认为我看到了问题。假设未显示的图像是名称中带有@2x 后缀的图像，问题是它们返回 404 错误。
由于 htaccess 中的某些内容，图像可能无法访问。这些图像的路径可能是错误的 它可能图像根本不存在

请检查一下，这可能会解决您的问题

**重要**的是，尽管如此，我建议放弃使用 javascript 来查找这个视网膜图像，而是使用 css 路由。我喜欢 javascript，但它对于你想要做的事情来说太过分了。

每个带有 css 类 .heading 的图像都可以用代码绘制。我向您保证，它会让您的应用程序加载速度更快作为奖励。这就是 id 用 css 替换它的方式。我试过了，它看起来完全一样，但不需要替换图像。

```
 **The html would be something like for each of those heading divs**
 <p class="heading">Can I access your social media?</p>

 **The css would be like**

 .heading {
      min-height: 53px;
      border: solid 2px #FD8B25;
      border-radius: 5px;
      line-height: 53px;
      text-transform: uppercase;
       font-weight: 600;
      font-size: 13px;
      padding: 0 12px;}

  .heading:after {
      content: '▼';/*You can replace '▼' with url(path/to/image) if needed */
      float: right;
  } 
```

这不会替换图像，但由于基于代码，它看起来会非常清晰。如果您仍想通过 css 将图像更改为更清晰的图像，请避免 javascript 的较慢开销。用这个...

```
 @media only screen and (-webkit-min-device-pixel-ratio: 2) {
      .myCSSClass {
           background:url('path/to/image');
           /*in the case of an image tag, add lots of padding margin so that original image is not visible*/
      }
  } 
```

希望这可以帮助。为避免此分辨率问题，如果您没有发现此问题，请始终尝试在图像上使用代码。只有当你必须支持旧版本的 IE 并且你必须保留每个图形元素时，我才认为这是一个问题。对于图像重的网站，我通常会避免将图像优化为视网膜优化。快速加载时间有时比高分辨率更重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:07:12.383

目前对于响应式图像没有明确的解决方案。[Chris Coyier](http://css-tricks.com/which-responsive-images-solution-should-you-use/)概述了我们的一些选择。

无论您选择哪一个，*都不要*只向 iPhone 提供 2x 图像。一方面，并​​非所有 iPhone 都有视网膜显示屏——其次，如果你想打造一些面向未来的产品，你会希望以像素密度为目标，而不是手机型号。在不久的将来，其他品牌和操作系统可能会有高 DPI 屏幕。最后，它对你的工作会更少。

# import - 如何在我的 python 包中包含 pandas 库？

> ID：12227974
> 
> 赞同：0
> 
> 时间：2012-09-01T13:01:35.830
> 
> 标签：import, module, pandas

我必须在我的包中包含 pandas 库才能在没有安装 pandas 库但具有所有正确依赖项的集群服务器上运行我的软件。

我试图在我的电脑上从源代码（版本 0.8.1）构建熊猫库：

```
python setup.py build_ext --inplace 
```

如果我将构建的 pandas 文件夹移动到我电脑中其他文件夹中的任何位置，我可以将它导入我的软件（例如 ./mySoftwareFolder/pandas）

但是当我在集群服务器上使用 pandas libray 移动我的软件时，它会引发错误：

```
File "testPandas.py", line 9, in <module>
    import pandas
File "/home/TEST/pandas/__init__.py", line 15, in <module>

raise ImportError('C extensions not built: if you installed already '
ImportError: C extensions not built: if you installed already verify that you are not importing from the source directory 
```

就像它没有编译一样。

我包含库的方式有什么问题？

多谢！

更新：我复制到集群服务器的目录包含：

```
-bash-4.2$ ll -a pandas
totale 11476
drwxr-xr-x. 14 francesco dottor    4096  1 set 13.37 .
drwxr-xr-x. 10 francesco dottor    8192  1 set 13.36 ..
-rwxr-xr-x.  1 francesco dottor 2648299  1 set 13.36 _algos.so
drwxr-xr-x.  2 francesco dottor    4096  1 set 13.36 compat
drwxr-xr-x.  2 francesco dottor    4096  1 set 13.36 core
-rw-r--r--.  1 francesco dottor     394  1 set 13.36 info.py
-rw-r--r--.  1 francesco dottor     557  1 set 13.36 info.pyc
-rw-r--r--.  1 francesco dottor    1269  1 set 13.36 __init__.py
-rw-r--r--.  1 francesco dottor    1643  1 set 13.37 __init__.pyc
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 io
-rwxr-xr-x.  1 francesco dottor 7437108  1 set 13.36 lib.so
-rwxr-xr-x.  1 francesco dottor  474199  1 set 13.36 _period.so
drwxr-xr-x.  2 francesco dottor    4096  1 set 13.36 rpy
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 sandbox
-rw-r--r--.  1 francesco dottor     844  1 set 13.36 setup.py
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 sparse
-rwxr-xr-x.  1 francesco dottor 1065313  1 set 13.36 _sparse.so
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 src
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 stats
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 tests
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 tools
drwxr-xr-x.  3 francesco dottor    4096  1 set 13.36 tseries
drwxr-xr-x.  2 francesco dottor    4096  1 set 13.36 util
-rw-r--r--.  1 francesco dottor      42  1 set 13.36 version.py
-rw-r--r--.  1 francesco dottor     204  1 set 13.36 version.pyc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:22:38.857

您在哪个平台上构建 C 扩展？在集群机器上，验证扩展共享对象（Linux/OSX 上的 .so 文件和 Windows 上的 .pyd 文件）是否在您复制的文件夹中：

```
08:21 ~/code/pandas/pandas  $ ll
total 12568
-rw-r--r--   1 wesm  staff     1269 Aug 25 04:49 __init__.py
-rw-r--r--   1 wesm  staff     1645 Aug 25 04:52 __init__.pyc
-rwxr-xr-x   1 wesm  staff   799464 Aug 25 04:50 _algos.so
-rwxr-xr-x   1 wesm  staff    65712 Aug 25 04:48 _engines.so
-rwxr-xr-x   1 wesm  staff   197056 Sep  1 22:13 _period.so
-rwxr-xr-x   1 wesm  staff   341032 Aug 25 04:53 _sparse.so
drwxr-xr-x   6 wesm  staff      204 Aug 25 04:52 compat
drwxr-xr-x  44 wesm  staff     1496 Sep  1 17:34 core
drwxr-xr-x   3 wesm  staff      102 Aug 25 04:49 finance
-rw-r--r--   1 wesm  staff      394 Aug 25 04:49 info.py
-rw-r--r--   1 wesm  staff      535 Aug 25 04:52 info.pyc
drwxr-xr-x  15 wesm  staff      510 Sep  1 23:14 io
-rwxr-xr-x   1 wesm  staff  2490600 Sep  1 22:13 lib.so
drwxr-xr-x   9 wesm  staff      306 Sep  1 17:34 rpy
drwxr-xr-x   6 wesm  staff      204 May 20 19:13 sandbox
-rw-r--r--   1 wesm  staff      844 Feb 22  2012 setup.py
drwxr-xr-x  17 wesm  staff      578 Aug 25 04:52 sparse
drwxr-xr-x  55 wesm  staff     1870 Sep  1 22:57 src
drwxr-xr-x  23 wesm  staff      782 Aug 25 04:52 stats
drwxr-xr-x  40 wesm  staff     1360 Sep  1 17:34 tests
drwxr-xr-x  16 wesm  staff      544 Aug 25 04:52 tools
drwxr-xr-x  28 wesm  staff      952 Sep  1 17:34 tseries
drwxr-xr-x  18 wesm  staff      612 Aug 25 04:52 util
-rw-r--r--   1 wesm  staff       54 Sep  1 22:57 version.py
-rw-r--r--   1 wesm  staff      204 Sep  1 22:58 version.pyc 
```

# objective-c - textDidChange 与 controlTextDidChange

> ID：12227975
> 
> 赞同：6
> 
> 时间：2012-09-01T13:01:48.630
> 
> 标签：objective-c

**有人可以解释一下为什么 textDidChange 没有处理我的委托，但 controlTextDidChange 可以从 NSTextField 工作。**

```
 - (void)controlTextDidChange:(NSNotification *)aNotification{
    NSBeep();
} 
```

从

```
 - (void)textDidChange:(NSNotification *)aNotification{
    NSBeep();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T14:37:54.843

[`controlTextDidChange:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/controlTextDidChange:)`NSTextField`是在（继承自`NSControl`）上定义的正确委托方法。

[`textDidChange:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTextField/textDidChange:)是一种方法，当调用 on 时`NSTextField`，它的行为就好像它的文本发生了变化（包括调用上述方法）。它不是您要实现的委托方法。

Apple 有点不一致，因为他们在[UISearchBarDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchBarDelegate_Protocol/Reference/Reference.html)`textDidChange:`上有一个委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:14:43.727

文本更改：`Informs the delegate that the text object has changed its characters or formatting attributes.`

我猜这意味着它的字体（文本属性）发生了变化，而不是输入的文本。

# google-maps - Google Maps API v3 多个可点击标记

> ID：12227976
> 
> 赞同：1
> 
> 时间：2012-09-01T13:01:49.283
> 
> 标签：google-maps, hyperlink, google-maps-markers

我试图在谷歌地图上放置多个标记，但让它们每个都指向一个 URL。我将所有标记放在一个循环中，但只执行最后一个。我希望他们所有人都能工作。这是我的代码：

```
<script type="text/javascript">
            function initialize() {

                var json = [
                  {
                    "title": "title1",
                    "lat": 46.077428,
                    "lng": 18.229837

                  },
                  {
                    "title": "title2",
                    "lat": 46.042229,
                    "lng": 18.227134

                  },
                  {
                    "title": "title3",
                    "lat": 46.082831,
                    "lng": 18.225911

                  },
                  {
                    "title": "title4",
                    "lat": 46.092058,
                    "lng": 18.185645

                  },
                  {
                    "title": "title5",
                    "lat": 46.075493,
                    "lng": 18.22885,
                    "description": "some description to the 5th element",
                    "url": "http://www.pannon-home.hu/"
                  },
                  {
                    "title": "title6",
                    "lat": 46.075344,
                    "lng": 18.227713,
                    "description": "some description to the 6th element",
                    "url": "http://www.pannon-home.hu/"
                  }
                ]

                var latlng = new google.maps.LatLng(46.071325, 18.233185);
                var myOptions = {
                    zoom: 12,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP                
                };
                var firstmap = new google.maps.Map(document.getElementById("allmap"),myOptions);
                for (var i = 0, length = json.length; i < length; i++) {
                  var data = json[i],
                      latLng = new google.maps.LatLng(data.lat, data.lng); 
                  // Creating a marker and putting it on the map
                  var marker = new google.maps.Marker({
                    position: latLng,
                    map: firstmap,
                    title: data.title,
                    url: data.url,
                    icon: 'home.png'
                  });
                }
                var infoWindow = new google.maps.InfoWindow();
                google.maps.event.addListener(marker, "mouseover", function(e) {
                  infoWindow.setContent(data.description);
                  infoWindow.open(firstmap, marker);
                });
                google.maps.event.addListener(marker, "mouseout", function() {
                  infoWindow.setContent("");
                  infoWindow.close();
                });
                google.maps.event.addListener(marker, "click", function() {
                  location.assign(marker.url);
                });
            }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:08:47.427

太多的逻辑位于 for 循环之外，导致大部分逻辑仅应用于最后一个标记。试试这个调整：

```
 <script type="text/javascript">
        function initialize() {

            var json = [
                {
                    "title":"title1",
                    "lat":46.077428,
                    "lng":18.229837

                },
                {
                    "title":"title2",
                    "lat":46.042229,
                    "lng":18.227134

                },
                {
                    "title":"title3",
                    "lat":46.082831,
                    "lng":18.225911

                },
                {
                    "title":"title4",
                    "lat":46.092058,
                    "lng":18.185645

                },
                {
                    "title":"title5",
                    "lat":46.075493,
                    "lng":18.22885,
                    "description":"some description to the 5th element",
                    "url":"http://www.pannon-home.hu/"
                },
                {
                    "title":"title6",
                    "lat":46.075344,
                    "lng":18.227713,
                    "description":"some description to the 6th element",
                    "url":"http://www.pannon-home.hu/"
                }
            ]

            var latlng = new google.maps.LatLng(46.071325, 18.233185);
            var myOptions = {
                zoom:12,
                center:latlng,
                mapTypeId:google.maps.MapTypeId.ROADMAP
            };
            var firstmap = new google.maps.Map(document.getElementById("allmap"), myOptions);
            for (var i = 0, length = json.length; i < length; i++) {
                var data = json[i],
                        latLng = new google.maps.LatLng(data.lat, data.lng);
                // Creating a marker and putting it on the map
                var marker = new google.maps.Marker({
                    position:latLng,
                    map:firstmap,
                    title:data.title,
                    url:data.url,
                    icon:'home.png'
                });

                var infoWindow = new google.maps.InfoWindow();
                google.maps.event.addListener(marker, "mouseover", function (e) {
                    infoWindow.setContent(data.description);
                    infoWindow.open(firstmap, marker);
                });
                google.maps.event.addListener(marker, "mouseout", function () {
                    infoWindow.setContent("");
                    infoWindow.close();
                });
                google.maps.event.addListener(marker, "click", function () {
                    location.assign(marker.url);
                });
            }
        }

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:03:18.620

创建一个新的标记对象

和marker.setMap（地图）；

# audio - 开源信号处理库

> ID：12227979
> 
> 赞同：1
> 
> 时间：2012-09-01T13:02:12.123
> 
> 标签：audio

[是否有与http://www.tagattitude.fr/en/products/technology](http://www.tagattitude.fr/en/products/technology)类似的开源库/项目？

我试图理解这个过程。起初我认为这可以像您将传真发送到传真机一样工作。

它基本上是将手机的麦克风用作捕捉器，将其音频通道用作传输器。

是否有任何库用于生成信号然后能够对其进行解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:11:26.360

*   看看这个图书馆[saajoby](http://saajoby.sourceforge.net/)。
*   [在](https://electronics.stackexchange.com/questions/9340/how-could-you-transfer-data-over-an-audio)这里
*   [在](http://awesomegeekblog.blogspot.gr/2009/04/file-transfer-over-sound-card.html)这里

# php - 检索多值选择“值”

> ID：12227981
> 
> 赞同：1
> 
> 时间：2012-09-01T13:02:36.180
> 
> 标签：php, select, multivalue

谁能告诉我如何从多值选择中获取选定项目的“价值”？

我有以下内容：

```
 <select id="category" name="category[]" multiple="multiple">';

        /* Select categories */ 
        [...]
        <option value"' . $row->id . '">' . $row->name . '</option>'; 
```

这将返回：

```
 <option value"1">itemName1</option> 
```

为什么下面的代码给了我选定的文本而不是它们的值？这里有什么问题？

```
 $category = $_POST['category'];
        if (count($category) > 0){ 

            foreach ($category as $key => $value) {
                echo  $value . "<br>\n";
            }
        } 
```

这正在返回`itemName1`，我需要实际的`value (1)`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:05:59.497

您的 HTML 无效。你有：

```
<option value"1">itemName1</option> 
```

虽然它应该是：

```
<option value="1">itemName1</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:09:28.463

mulple select 将返回这样的查询（name = name and values = int）

```
name=1&name=4&name=99 
```

所以它返回数组看起来像的选定值：

```
array(
    name => array(
        [0] => 1
        [1] => 4
        [2] => 99
    )
) 
```

ps 如果你修复了 HTML 错误，你很可能会得到一个有效的结果

# c# - 可以在 NHibernate 中将 1 个表与 1 个表连接超过 1 次吗？

> ID：12227989
> 
> 赞同：2
> 
> 时间：2012-09-01T13:03:59.433
> 
> 标签：c#, nhibernate

当将 1 个表与 1 个表连接超过 1 次时，我遇到了 NHibernate 问题。我使用 ICriteria。我有 2 张桌子。让我们来看看：

tbl员工：

```
EmployeeID (PK)
Gender (will join with table tblCommons) (this is Key data in tblCommons)
Status (will join with table tblCommons) (this is Key data in tblCommons) 
```

注意：tblEmployees 没有 tblCommons 的任何 PK。

tblCommons：

```
ID (PK)
Code (will use to specific Gender data and Status data) (ex: 1 is Gender, 2 is Status)
Key
Value 
```

这是 tblEmployees 中的数据：

```
EmployeeID                 Gender                  Status 
  1                          1                        1
  2                          1                        2
  3                          2                        1 
```

这是 tblCommons 中的数据

```
ID                  Code                  Key                   Value
1                     1                     1                   Male
2                     1                     2                   Female
3                     2                     1                   Active
4                     2                     2                   Inactive 
```

在Employees.hbm.xml 文件中

```
<class name="Demo.Employees, Demo" table="tblEmployees">
    <id name="EmployeeID" column="EmployeeID" type="String">
    </id>
    <many-to-one class="Demo.Commons, Demo" name="Gender" column="Gender" />
    <many-to-one class="Demo.Commons, Demo" name="Status" column="Status" />
</class> 
```

在员工类

```
namespace Demo
{
    public class Employees
    {
        public Employees(){}
        public virtual string EmployeeID { get; set; }
        public virtual Commons Gender{ get; set; }
        public virtual Commons Status{ get; set; }
    }
} 
```

在 Commons.hbm.xml 中

```
<class name="Demo.Commons, Demo" table="tblCommons">
    <id name="Key" column="Key" type="String">
    </id>
    <property name="Code" column="Code" type="String" />
    <property name="Value" column="Value" type="String" />
    <set name="Genders" table="tblEmployees" generic="true" inverse="true">
      <key column="Gender" />
      <one-to-many class="Demo.Employees, Demo"/>
    </set>
    <set name="Status" table="tblEmployees" generic="true" inverse="true">
      <key column="Status" />
      <one-to-many class="Demo.Employees, Demo"/>
    </set>
</class> 
```

注意：在 xml 中，我将“id”设置为“Key”，因为我在 NHibernate 中看到，“id”是将与另一个表连接的数据。这里，在 tblEmployees 中，tblEmployees 中的 Gender 和 Status 是 tblCommons 中的“关键”数据。所以，我在xml中设置“id”是“Key”

在公共课上

```
namespace Demo
{
    public class Commons
    {
        public Commons(){}
        public virtual string Key { get; set; }
        public virtual string Code { get; set; }
        public virtual string Value { get; set; }
        public virtual Iesi.Collections.Generic.ISet<Employees> Genders { get; set; }
        public virtual Iesi.Collections.Generic.ISet<Employees> Status { get; set; }
    }
} 
```

注意：我没有在 xml 文件和 Commons 类的 tblCommons 中设置“ID”，因为我的项目中没有使用“ID”数据

这是我用来获取员工数据的代码

```
ICriteria criteria = session.CreateCriteria(typeof(Employees));
criteria.CreateCriteria("Gender", "Gender", NHibernate.SqlCommand.JoinType.InnerJoin);
criteria.Add(Restrictions.Eq("Gender.Code", "1"));
criteria.CreateCriteria("Status", "Status", NHibernate.SqlCommand.JoinType.InnerJoin);
criteria.Add(Restrictions.Eq("Status.Code", "2"));
IList<Employees> list = new List<Employees>();
list = criteria.List<Employees>(); 
```

我这里有个问题：

在“列表”中，如果我这样更改，Employees 对象中的“性别”具有“状态”数据：首先是 CreateCriteria“状态”，然后是 CreateCriteria“性别”，“状态”具有“性别”数据。

我不知道为什么。我只使用 NHibernate 大约 1 个月。请帮助我为什么我有这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:52:31.647

您的问题是您使用 Key 列作为 Commons 对象中的 ID 属性。ID 属性应该是唯一的并且与任何“有意义的”数据分离。您应该将 ID 属性添加到您的 Commons 类，并将 Key 转换为常规属性。更改您的映射，注意“设置”映射 -

```
 <class name="Demo.Commons, Demo" table="tblCommons">
       <id name="ID" column="ID" type="String">
          <generator class="identity"/>
       </id>
       <property name="Key" column="Key" type="String" />
       <property name="Code" column="Code" type="String" />
       <property name="Value" column="Value" type="String" />
       <set name="Genders" table="tblEmployees" generic="true" inverse="true">
         <key column="Key" property-ref="Gender" />
         <one-to-many class="Demo.Employees, Demo"/>
       </set>
       <set name="Status" table="tblEmployees" generic="true" inverse="true">
          <key column="Key" property-ref="Status" />
          <one-to-many class="Demo.Employees, Demo"/>
       </set>
  </class>

  <class name="Demo.Employees, Demo" table="tblEmployees">
      <id name="EmployeeID" column="EmployeeID" type="String">
      </id>
      <many-to-one class="Demo.Commons, Demo" name="Gender" column="Gender" property-ref="Key"/>
      <many-to-one class="Demo.Commons, Demo" name="Status" column="Status" property-ref="Key"/>
  </class> 
```

# c++ - Qt Designer，在上下文菜单中缺少“转到插槽”？

> ID：12227993
> 
> 赞同：5
> 
> 时间：2012-09-01T13:04:13.460
> 
> 标签：c++, qt, netbeans, signals-slots, qt-designer

我一直在 YouTube 上观看 Qt 教程系列，其中作者展示了按下按钮时如何调用函数。[他右键单击 Qt Creator IDE 中的按钮并选择“Go to slot”，从中选择将触发生成函数的信号](http://www.youtube.com/watch?v=2edb0VOkx-k3#t=361s). 由于我习惯于使用 Netbeans 进行开发，因此我只是尝试使用嵌入式 Qt 设计器来效仿他的示例。不幸的是，当我右键单击我的按钮或任何小部件时，没有“转到插槽...”条目。当然，我可以为我的主窗口创建一个新插槽，然后将按钮的信号连接到它，但是对我来说，用一个函数来做这件事似乎更方便和干净。有没有办法解决，或者如果没有，至少可以完全通过代码来处理，而不必为每个用于不同目的的按钮添加一个新插槽到主窗口？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T13:23:50.977

虽然我不知道为什么 Netbeans 中的 QtDesigner 不提供此功能，但我知道该功能的作用：它只是在您的小部件类中创建一个具有特殊名称的插槽。请注意，它不会**添加**连接语句。它使用自动连接功能，其工作原理如下：

对于名称与此模式匹配的每个插槽：

`void on_X_Y(...)`

它将连接到名为`Y`的对象的信号名`X`。因此，如果您有一个名为 的 QPushButton `button`，并且您想处理信号`pressed`，只需创建一个具有以下签名的插槽：

`void on_button_pressed()`

如果您想知道这个插槽是如何连接到信号的：这发生在`ui_...h`文件末尾的文件中`setupUi()`：

```
 QMetaObject::connectSlotsByName(WidgetName); 
```

# rest - SEO 和 Javascript 数据加载

> ID：12227996
> 
> 赞同：0
> 
> 时间：2012-09-01T13:04:23.087
> 
> 标签：rest, seo, web-crawler

如今，现代网站变得越来越面向服务，例如 facebook/gmail。

加载一个主页，然后使用 ajax 请求调用各种数据并将它们添加到站点上。这也是使用 Web API 在 ASP.NET MVC4 上推广的东西。

所以现在假设我们要为 eshop 创建一个产品类别页面。据我了解，采用这种实现的方法是创建一个漂亮的布局并创建一个 Web API，该 API 将根据请求检索所有数据。

所以我们会有一个像

```
/api/Products 
```

这将使用我们所有的产品重新调整一个 json，然后我们可以通过添加过滤器/分页可能 (/api/Products?sort-by=name) 或任何其他将返回过滤后的 json 的东西来构建这个 api，我们可以通过通过 ajax 请求来回为用户提供出色的体验。

我现在的问题是搜索引擎优化会发生什么。

所以几年前，如果没有 onepage ajax/面向服务的网站，我们将拥有

```
http://website.com/apples/
http://website.com/apples/2/ 
```

这将加载带有分页的苹果列表。

现在该网站将是

```
http://website.com/apples/ 
```

但是它不会立即加载苹果，而是加载一个空白页面并调用该服务

```
/api/apples 
```

这将返回一个 json，然后在网站上加载数据。

我在 Google [https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot](https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot)上阅读了这篇文章，但并没有说服我。我真的不想在后面加载服务然后字符串替换。

有可能有

```
http://website.com/apples/ 
```

这将调用该服务

```
/api/apples 
```

并加载数据并同时对 Google 友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:12:19.640

You have a couple of options. Either you can use HTML5 pushState to update the URL, but then you also will need to create a version of your site that works without JavaScript turned on.

Another option is to use [Googles AJAX Crawling specification](https://developers.google.com/webmasters/ajax-crawling/). I don't know which search providers that currently supports it, but should be a good way to at least get into Googles search results.

# asp.net-mvc-3 - MVC3 环境中 Global.asax 方法中的访问会话

> ID：12227998
> 
> 赞同：1
> 
> 时间：2012-09-01T13:04:35.203
> 
> 标签：asp.net-mvc-3, session, razor

> **可能重复：**
> [为什么 HttpContext.Current.Session 在 Global.asax 中为空？](https://stackoverflow.com/questions/4185871/why-httpcontext-current-session-is-null-in-global-asax)

我正在开发一个 MVC3 项目（Razor）。
我在一些控制器/操作中向我的会话添加了一个变量（每个用户不同）。
我想在`Application_AuthenticateRequest`方法（global.asax）中访问这个变量。

发生了这个异常：

> 会话状态在此上下文中不可用。

[示例项目](https://rapidshare.com/files/2871787764/MVCSession.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:27:52.823

有关开始，请参阅[https://stackoverflow.com/a/4185982/717732](https://stackoverflow.com/a/4185982/717732)

关键是它`Session`不可用，并且在这个时间点永远不会可用：“时间”是指“当这个事件被触发时”。

例如在 devproconnections.com/article/aspnet2/ 上阅读生命周期

Session 对象是在**很晚才**准备好的：在`AcquireRequestState`活动期间。这是您第一次可以访问 Session 状态包并对其进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:39:02.207

谢谢 quetzalcoatl，这是真的。

```
 try
        {                
            if (Session != null)
            {
                if (Session["mys"] != null)
                {
                    //Error
                    string s = HttpContext.Current.Session["mys"].ToString();
                }
                else
                {
                    Response.Redirect("~/Home/Index");
                    Response.End();
                }
            }
        }
        catch {
            Response.Redirect("~/Home/Index");
            Response.End();
        } 
```