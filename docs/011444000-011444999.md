# StackOverflow 问答 11444000-11444999

# javascript - 为什么我会收到错误 Uncaught TypeError: Cannot set property 'display' of undefined in Javascript？

> ID：11444000
> 
> 赞同：1
> 
> 时间：2012-07-12T01:46:44.203
> 
> 标签：javascript

我正在尝试了解`document`对象类型的使用并挑战自己，我正在尝试隐藏所有`div`标签。当我执行该函数时，我返回了错误`Uncaught TypeError: Cannot set property 'display' of undefined`但是我不确定它的确切含义。什么是未定义的？

代码的输出可以在[http://jsfiddle.net/Bdbtq/找到](http://jsfiddle.net/Bdbtq/)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />
    <meta name="robot" content="noindex, nofollow" />

    <title>js features</title>

    <base href="" />

    <link rel="stylesheet" type="text/css" media="all" href="" />

    <style type="text/css" media="all">

    </style>
</head>
<body>
    <div id="container">
        <div id="header"></div>
        <div id="content">
            <p>This is sample content</p>
        </div>
        <div id="footer">&copy; 2012</div>
    </div>

    <script type="text/javascript">

    function hideMe() {
        //hide all div elements
        var div = document.getElementsByTagName("div");

        for(var i = 0; i < div.length; i = i + 1) {
            div.style.display="none";
        }
    }

    </script>
    <p onClick="hideMe();">Click to hide</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T01:48:49.437

`getElementsByTagName`返回一个数组。所以你需要：

```
 var divs = document.getElementsByTagName("div");

    for(var i = 0; i < divs.length; i = i + 1) {
        divs[i].style.display="none";
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T01:48:31.613

Div 是一个元素数组，而不是单个元素。尝试这个：

```
for(var i = 0; i < div.length; i = i + 1) {
    div[i].style.display="none";
} 
```

我认为如果你调用你的 variable`divs`或类似的东西表明它不是一个元素，那么避免这些错误会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:48:17.277

您的变量`div`此时是一个节点列表，而不是单个变量，因为它[`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)返回一个节点列表。您需要通过循环中的数组索引访问它，如`div[i]`

```
for(var i = 0; i < div.length; i = i + 1) {
    // div[i] holds the current loop iteration
    div[i].style.display="none";
} 
```

# mysql - 在 AWS Elastic Beanstalk 上连接到 Mysql

> ID：11444005
> 
> 赞同：2
> 
> 时间：2012-07-12T01:47:27.790
> 
> 标签：mysql, linux, amazon-web-services, amazon-elastic-beanstalk

我是一个相对较新的 LAMP 开发人员，主要尝试通过 AWS 学习 Linux。我有一个正在运行的 Elastic Beanstalk 实例。我对以下软件包进行了 yum 安装：

```
mysql55.x86_64 mysql55-bench.x86_64 mysql55-common.x86_64 mysql55-devel.x86_64 mysql55-libs.x86_64 mysql55-server.x86_64 mysql55-test.x86_64 
```

这一切似乎都安装得很好......然后输入......

```
mysql -V 
```

这让我

```
mysql Ver 14.14 Distrib 5.5.20, for Linux (x86_64) using readline 5.1 
```

...确认安装了mysql ...但是当我输入...

```
mysql -u ec2-user -p
Enter password: /*leaving blank*/ 
```

我得到...

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) 
```

现在问题是我正在使用我在 AWS 控制台中创建的安全组密钥对 ssh 进入该服务器。因此，当我以 ec2-user 身份登录该框时，关键是对我进行身份验证（来自 .ppk 文件）。据我所知，那是我的“root”用户，没有密码，但我可能弄错了。

所以，基本上我不了解如何在 linux 环境中开始使用 MySQL 的基础知识。到目前为止，我只真正使用过 PHPMyAdmin 和 WAMP 中的 MySQL 命令行。

有人可以帮我解决我的电线交叉在这里吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T13:23:59.420

哇。耽误。在您执行任何其他操作之前，请在 beanstalk 之外停止并启动您的 mysql 机器，或者使用[Amazon RDS](http://aws.amazon.com/rds/)。Beanstalk 旨在自动扩展应用程序的 Web 层，而不是保存数据库。当它扩展您的应用程序时，那台新机器将不会拥有您的数据。当它缩小时，它可能会删除您的数据库机器。如果该实例最终出现在退役或损坏的硬件上，beantalk 将替换它。

[阅读 Beanstalk 架构概述。](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/concepts.concepts.architecture.html)注意图表。您的数据库层存在于 beanstalk 环境之外，而不是其中。

![在此图中，beantalk 环境由黄色虚线描绘。](../Images/a6fdea6d899a23b773833973ad75a364.png)

# sql-server - 关注点的单页应用服务器分离

> ID：11444009
> 
> 赞同：1
> 
> 时间：2012-07-12T01:48:14.457
> 
> 标签：sql-server, asp.net-mvc, client-server, scalability, asp.net-web-api

我只是在为多租户企业系统组装基本框架的过程中。

客户端将是一个 asp.net mvc 网页，通过 ajax 通过 asp.net web api 与数据库通信。

我的问题确实与可扩展性有关。我应该将客户端与服务器分开吗？即一个项目中的客户端/前端代码/视图和另一个单独的项目服务器中的webapi。因此，如果一台服务器开始（服务器 A）的负载/大小达到峰值，那么只需创建另一个服务器实例（服务器 B），所有新客户将指向服务器 B 上的 webapi。

还是应该将其全部集成为一个项目，并随着负载的增加（动态云扩展）扩展 sql server 端？

在将我们的帽子扔进戒指之前需要一些建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:51:14.367

我们采用了分离 API 和单页应用程序的路线。这里的原因是它迫使您将单页应用程序视为另一个客户端，这反过来会导致 API 提供完整客户端所需的所有功能......

在部署方面，我们将单页应用程序作为网站根目录，并使用包含 API 部署的 /api 应用程序。在前提下，我们可以使用应用程序请求路由或一些内容感知路由机制在必要时将内容发送到不同的服务器。在 Azure 中，我们使用每个角色机制的多个网站 (http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx) 并根据负载扩展此角色。

看起来生活在同一个域中会使事情变得更容易，因为您不必为 JSONP 或 CORS 的丑陋而烦恼！

干杯，院长

# c - 声明 void** 在 C 语言中是什么意思？

> ID：11444025
> 
> 赞同：6
> 
> 时间：2012-07-12T01:49:40.130
> 
> 标签：c, arrays, pointers, declaration, void-pointers

我开始学习 C 并阅读以下代码：

```
public void** list_to_array(List* thiz){
    int size = list_size(thiz);
    void **array = malloc2(sizeof(void *) * size);
    int i=0;
    list_rewind(thiz);
    for(i=0; i<size; i++){
        array[i] = list_next(thiz);
    }
    list_rewind(thiz);
    return array;
} 
```

我不明白 的意思`void**`。有人可以用一些例子来解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:59:23.257

void** 是指向 void 的指针（未指定类型）。这意味着变量（内存位置）包含一个内存位置的地址，它包含另一个内存位置的地址，并且没有指定存储在那里的内容。在这个问题的情况下，它是一个指向 void* 指针数组的指针。

旁注：不能取消引用 void 指针，但 void** 可以。

```
void *a[100];
void **aa = a; 
```

通过这样做，应该能够执行例如 aa[17] 以获取数组 a 的第 18 个元素。

要了解此类声明，您可以使用[此](http://cdecl.ridiculousfish.com/?q=void**%20list_to_array)工具，还不如检查一两个[相关](https://stackoverflow.com/questions/9040818/how-to-use-void-pointer-correctly)[问题](https://stackoverflow.com/q/1448849/170339)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:54:00.160

`void**`是指向 的指针，如果您愿意`void*`，也可以是指向`pointer`a的指针`void pointer`！例如，这种符号传统上用于`C`实现矩阵。因此，在矩阵情况下，这将是 a`pointer`到 a `array of pointers`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T01:59:04.287

通常`void *`，指针用于表示指向未知数据类型的指针。在这种情况下，您的函数返回一个这样的指针数组，因此是双星。

在 C 中，指针通常用于引用数组。例如，以下分配是完全合法的：

```
char str1[10];
char *str2 = str1; 
```

现在，当使用 void 时，这意味着您有一个未知类型的变量，而不是 char。

指向未知数据类型的指针对于编写通用算法很有用。例如。标准 C 库中的 qsort 函数定义为：

```
void qsort ( void * base, 
             size_t num, 
             size_t size, 
             int ( * comparator ) 
             ( const void *, const void * ) ); 
```

排序算法本身是通用的，但不知道数据的内容。因此，用户必须提供可以处理它的比较器的实现。该算法将使用两个指向要比较的元素的指针调用比较器。这些指针是`void *`类型的，因为现在有关于正在排序的数据类型的信息。

查看此线程以获取更多示例 [http://forums.fedoraforum.org/showthread.php?t=138213](http://forums.fedoraforum.org/showthread.php?t=138213)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T07:57:20.897

void 指针用于保存任何数据类型的地址。`void**`表示指向 void 指针的指针。空指针用于我们希望函数应该接收不同类型的数据作为函数参数的地方。请检查以下示例

```
void func_for_int(void *int_arg)
{
    int *ptr = (int *)int_arg;
    //some code
}

void func_for_char(void *char_arg)
{
    char *ptr = (char *)char_arg;
    //some code
}

int common_func(void * arg, void (*func)(void *arg))
{
    func(arg);
}

int main()
{
    int a = 10;
    char b = 5;

    common_func((void *)&a, func_for_int);
    common_func((void *)&b, func_for_char);

    return 0;
} 
```

# .htaccess - htaccess 重定向网址，其中包含空格

> ID：11444026
> 
> 赞同：1
> 
> 时间：2012-07-12T01:50:06.963
> 
> 标签：.htaccess

愚蠢的是，我没有检查链接就发出了通讯。其中一个坏了，所以我想用 htaccess 处理这个。

我被链接到的 URL 是：

[http://www.domain.com.au/www.domain.com.au/campers-and-motorhomes/ne%20w-zealand/camper-rentals/](http://www.domain.com.au/www.domain.com.au/campers-and-motorhomes/ne%20w-zealand/camper-rentals/)

实际页面在哪里： http: [//www.domain.com.au/campers-and-motorhomes/new-zealand/camper-rentals/](http://www.domain.com.au/campers-and-motorhomes/new-zealand/camper-rentals/)

注意新西兰的空间以及额外的 www.domain.com.au

如何在 htaccess 中进行设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:54:07.560

由于您不必操作 URL，因此可以使用简单的[Redirect](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect)：

```
Redirect /www.domain.com.au/campers-and-motorhomes/ne%20w-zealand/camper-rentals/  http://www.domain.com.au/campers-and-motorhomes/new-zealand/camper-rentals/ 
```

**编辑**如果 Apache 不喜欢未引用的空格`%20`，请尝试用其中的真实空格引用整个内容：

```
Redirect "/www.domain.com.au/campers-and-motorhomes/ne w-zealand/camper-rentals/"  http://www.domain.com.au/campers-and-motorhomes/new-zealand/camper-rentals/ 
```

**Edit2**如果要附加查询字符串，恐怕您需要使用 mod_rewrite 来摆脱查询字符串，而不是简单的重定向。

```
RewriteEngine On
# If the request starts with www.domain.com.au, it is the broken link
# Rewrite to the proper URL and put ? on the end to remove the query string
RewriteRule ^www\.domain\.com\.au http://www.domain.com.au/campers-and-motorhomes/new-zealand/camper-rentals/? [L,R=301] 
```

# ios - 当帧分布到多个纹理中时如何利用 CCSpriteBatchNode

> ID：11444027
> 
> 赞同：1
> 
> 时间：2012-07-12T01:50:10.210
> 
> 标签：ios, cocos2d-iphone, ccsprite

在我的游戏中，有很多敌人（子类`CCNode`），它们的动画帧分布在多个纹理文件（enemy01.png、enemy02.png...）中，并且可能在同一场景中生成来自不同纹理的敌人。

我想要一种统一的方式来动态地将随机生成的敌人添加到正确的`CCSpriteBatchNode`中，但是查找表似乎并不那么优雅。有没有更好的处理方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:48:26.577

由于每个敌人都使用自己的纹理，因此您可以为每个敌人使用一个精灵批处理节点。因此，当您创建敌人“X”时，从您存储它的任何位置（可能是 NSDictionary）获取相应的精灵批处理节点应该不难。

请记住，每个敌人类型的一个精灵批处理节点违背了目的，特别是如果每​​个敌人的纹理图集相当小并且甚至不接近最大允许尺寸（旧设备为 1024x1024，iPhone 3GS 和更新设备为 2048x2048 或更大） ）。如果可能，将尽可能多的图像填充到一个纹理图集中并使用一个精灵批处理节点。

# javascript - jQuery页面结构使用$(document).ready(function(){})的最佳实践

> ID：11444028
> 
> 赞同：2
> 
> 时间：2012-07-12T01:50:18.180
> 
> 标签：javascript, jquery, architecture

我目前在我的网站上有很多小部件，它们可以执行各种 jquery 函数、动画、ajax 调用等。我一直在网上阅读，尝试将你的 js 捆绑到一个文件中是一种好习惯感觉。我的每个小部件都在我的网站上广泛使用，因此将这些小部件的所有 jquery/javascript 放入一个文件中似乎是有意义的。现在，如果我有`$(document).ready(function(){})`每次都想调用一个小部件的按钮，自动加载一些准备好的文档数据，等等。这样做的最佳实践是什么？不是每个小部件都在每个页面上，所以如果所有内容都在一个 javascript 文件中，那么调用不存在的 dom 元素会是不好的做法吗？

我想我真的很难找到围绕我的 Web 应用程序构建我的 jquery/javascript 以提供最佳性能的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:46:17.027

最好让 js 文件充满可重用的代码，这样你的所有功能都在一个页面中，所有页面都加载。我通常使用 default.js 作为该文件。然后在每个需要特定实现的页面中，我调用在页面底部的 doc.ready 内对该页面执行特定任务的函数。

这样你就只做每页需要的事情。在任何情况下，您都应该尝试在 default.js 文件中包含执行任务的函数，而不是在应该包含在整个站点中的文件中非常具体的 js

# wcf - CQRS 实施

> ID：11444032
> 
> 赞同：-2
> 
> 时间：2012-07-12T01:51:31.210
> 
> 标签：wcf, ravendb, cqrs, servicebus

我正在尝试 CQRS 原理。例如：

*   我要管理供应商列表
*   供应商有自己的地址，供应商地址可以从现有地址列表中更改。
*   在更改供应商地址之前，我需要确保该地址没有被删除。
*   我正在使用 RavenDB 数据库来存储供应商、地址。
*   UI 应该使用 WCF 进行同步调用：应用程序 <-> WCF 服务 <-> 服务总线 <-> 数据库

你能告诉我如何实现这个示例吗？

谢谢， 福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:19:11.520

RavenDB 源代码中包含一个事件源示例，可以帮助您入门，请参见[此处](https://github.com/ayende/ravendb/tree/master/Samples/Raven.Bundles.Sample.EventSourcing.ShoppingCartAggregator)和[此处](https://github.com/ayende/ravendb/tree/master/Samples/Raven.Sample.EventSourcing)

# objective-c - Objective-C：从外部应用程序获取菜单信息

> ID：11444033
> 
> 赞同：7
> 
> 时间：2012-07-12T01:51:35.467
> 
> 标签：objective-c, macos, cocoa, menubar, scripting-bridge

我正在尝试编写一个 Mac OS 菜单额外应用程序，当用户按下某个热键时，它会显示一个包含当前活动应用程序菜单栏项的上下文菜单。上下文菜单的显示我可以做得很好，但我似乎无法获得当前活动应用程序的菜单栏项。目前我正在使用`[[[NSWorkspace sharedWorkspace] runningApplications] filteredArrayUsingPredicate:]`获取活动应用程序的名称，但 NSRunningApplication 似乎包含很少的其他信息。有什么方法可以从外部应用程序获取有关应用程序菜单的信息？

**更新：**

如果您对使用 AppleScript 感到满意，使用[ScriptingBridge](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)框架似乎效果很好：

```
 SystemEventsApplication* sevApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.systemevents"];
    SystemEventsProcess* proc = [[sevApp applicationProcesses] objectWithName:appName];

    for (SystemEventsMenuBar* menuBar in proc.menuBars) {
        for (SystemEventsMenuBarItem* menuBaritem in menuBar.menuBarItems) {
            NSLog(@"%@", menuBaritem.name);
        }
    } 
```

将打印出应用程序菜单栏中可用的菜单列表。还没有找到获取上下文菜单的方法，所以我不会称之为回答...

这也很有用：[http ://robnapier.net/blog/scripting-bridge-265](http://robnapier.net/blog/scripting-bridge-265)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:36:48.077

您可以使用[AppleScript模拟单击](http://www.macosxautomation.com/applescript/index.html)[​​此处](http://hints.macworld.com/article.php?story=20060921045743404)所示的菜单项，但我不确定是否可以动态获取所有菜单项的名称，以使用您需要已经将名称硬编码到应用程序中的方法。

# android - 为什么我无法使用在 .so 库中声明的函数？

> ID：11444039
> 
> 赞同：0
> 
> 时间：2012-07-12T01:53:01.343
> 
> 标签：android, c++, android-ndk, dlopen, shared-libraries

我正在尝试编写一个程序来调用我在 Android 中的 .so 库中的函数。

主.cpp：

```
#include <stdio.h>
#include <dlfcn.h>
#include <stdlib.h>

typedef int (*test_ptr)(int, int);

int main()
{
    int rc;
    void *handle;
    const char *error;

    handle = dlopen("./testdll.so", RTLD_LAZY);
    if(!handle){
        printf("dlopen %s\n", dlerror());
        return -1;
        }
    printf("dlopen success.\n");

    test_ptr test = (test_ptr)dlsym(handle, "max");
    error = dlerror();
    if (error)  {
        printf("error %s\n", error);
        dlclose(handle);
        return -1;
    }
    rc = test(10, 20);
    printf("rc = %d\n", rc);

    dlclose(handle);
    return 1;
} 
```

测试dll.cpp：

```
#include<stdio.h>

int max(int x,int y){
    return x>y?x:y;
} 
```

安卓.mk：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES:= \
    testdll.cpp
LOCAL_MODULE_TAGS := optional
LOCAL_PRELINK_MODULE := true
LOCAL_LDFLAGS := -Wl,--export-dynamic
LOCAL_MODULE:= testdll
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_SRC_FILES:= \
    main.cpp
LOCAL_LDLIBS := -ldl
LOCAL_SHARED_LIBRARIES := \
libcutils   \
libdl
LOCAL_MODULE_TAGS := optional
LOCAL_PRELINK_MODULE := true
LOCAL_MODULE := mytest
LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_EXECUTABLES)
include $(BUILD_EXECUTABLE) 
```

我使用**mmm**制作文件并将**testdll.so**推入**/system/lib**并将**mytest**推入**/data/data**。

然后我运行**./mytest**，它可以**打开 testdll.so** succeeded ，但无法连接我的功能。

错误是：

```
Symbol not found: 
```

有人知道如何解决这个问题吗？

==================================================== =========================================

谢谢大家！

我称我的函数成功使用**extern "C"**。

但是现在，我改用 C++ 编写 .so 库并得到相同的错误消息。

测试dll.cpp：

```
#include <sys/types.h>
#include <unistd.h>
#include <grp.h>

#include <binder/IPCThreadState.h>
#include <binder/ProcessState.h>
#include <binder/IServiceManager.h>
#include <utils/Log.h>

#include <private/android_filesystem_config.h>

#include <stdio.h>
#include "testdll.h"

using namespace android;
extern "C" {
    int TestClass::max(int x,int y){
        return x>y?x:y;
    }
} 
```

测试dll.h：

```
using namespace android;

class TestClass
{
    public:
        int max(int, int);
}; 
```

主.h：

```
#include <stdio.h>
#include <dlfcn.h>
#include <stdlib.h>

typedef int (*test_ptr)(int, int);

int main()
{
    int rc;
    void *handle;
    const char *error;

    handle = dlopen("./testdll.so", RTLD_LAZY);
    if(!handle){
        printf("dlopen %s\n", dlerror());
        return -1;
    }
    printf("dlopen success.\n");

    test_ptr test = (test_ptr)dlsym(handle, "max");
    error = dlerror();
    if (error)  {
        printf("error %s\n", error);
        dlclose(handle);
        return -1;
    }
    rc = test(10, 20);
    printf("rc = %d\n", rc);

    dlclose(handle);
    return 1;
} 
```

然后我得到了同样的错误信息：**找不到符号：**

我使用 objdump -TC 来显示：

```
DYNAMIC SYMBOL TABLE:
000003f5 g    DF .text  0000000a TestClass::max(int, int)
00000000      DF *UND*  00000000 __aeabi_unwind_cpp_pr0
00000000      DF *UND*  00000000 __cxa_finalize
000010f0 g    D  .bss   00000000 __dso_handle
00001000 g    D  .init_array    00000000 __INIT_ARRAY__
00001008 g    D  .fini_array    00000000 __FINI_ARRAY__
00000410 g    D  *ABS*  00000000 __exidx_end
00000400 g    D  *ABS*  00000000 __exidx_start
000010ec g    D  *ABS*  00000000 __data_start
000010ec g    D  *ABS*  00000000 _edata
000010ec g    D  *ABS*  00000000 __bss_start
000010ec g    D  *ABS*  00000000 __bss_start__
00001100 g    D  *ABS*  00000000 _bss_end__
00001100 g    D  *ABS*  00000000 __bss_end__
00001100 g    D  *ABS*  00000000 __end__
00001100 g    D  *ABS*  00000000 _end
00080000 g    D  *ABS*  00000000 _stack 
```

我该如何修改？

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:26:20.727

TestClass::max(int, int) 在你的符号表中 - 这是否意味着你的 max 函数是一个类的方法？

好吧，如果是这样，您需要为您的 TestClass 创建一个 C 包装，例如

```
extern "C"
{
    int max (void *pHandle, int x, int y) 
    {
      TestClass *tcObject = (TestClass *)pHandle;
      return tcObject->max(x, y);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:28:26.540

`dlopen`必须声明您计划通过其访问的任何函数`extern "C"`。原因是[名称混乱](http://en.wikipedia.org/wiki/Name_mangling)。

# javascript - 如何根据下拉选择更改跨度的内容

> ID：11444042
> 
> 赞同：4
> 
> 时间：2012-07-12T01:53:33.847
> 
> 标签：javascript, jquery, html

我有一个选择框和一个带有跨度的标签，我想在用户更改下拉框中的选择时替换跨度内容。

```
<select class="text_select" id="field_6" name="field_6">    
<option value="- Select -">- Select -</option>  
<option value="Option One">Option One</option>  
<option value="Option Two">Option Two</option>  
<option value="Option Three">Option Three</option>  
</select>

<label class="form_field">Your selected <span id="aggregator_name"></span>?</label> 
```

我正在使用这个脚本

```
<script type="text/javascript">
function notEmpty(){

var e = document.getElementById("field_6");
var strUser = e.options[e.selectedIndex].value;
document.getElementById('aggregator_name').innerHTML = strUser;

}
notEmpty()
</script> 
```

问题是，每当我刷新页面时，span 都会替换为“- Select -”，但是当我将下拉菜单更改为另一个选项时，它不会更改 span 的内容吗？请帮助各位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T01:56:11.810

您需要从下拉列表的更改事件中调用您的函数：

```
document.getElementById("field_6").onchange = notEmpty; 
```

演示：http: [//jsfiddle.net/Mj4Vj/](http://jsfiddle.net/Mj4Vj/)

或者，由于您使用了“jquery”标签，以下内容将替换您的所有 JS：

```
$(document).ready(function() {
    $("#field_6").change(function() {
        $('#aggregator_name').html($(this).val());
    }).change();
}); 
```

演示：http: [//jsfiddle.net/Mj4Vj/1/](http://jsfiddle.net/Mj4Vj/1/)

（注意：如果上述内容包含在出现在“field_6”元素之后的脚本块中，例如，如果您的脚本位于正文的末尾，那么您不需要将代码包装在文档就绪处理程序中。 )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:56:23.150

**工作演示** [http://jsfiddle.net/GEfwE/1/](http://jsfiddle.net/GEfwE/1/)

行为：当你改变任何东西时，你会看到跨度的变化，

希望这会有所帮助，如果我错过了什么，请让我知道！`:)~

**代码**

```
$('select').change(function(){

    $('#aggregator_name').html($(this).val());
});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T02:09:47.457

你可以使用onchange。

```
var e = document.getElementById("field_6");
e.onchange = function() {
    var strUser = e.options[e.selectedIndex].value;
    document.getElementById('aggregator_name').innerHTML = strUser;
} 
```

# php - Fat Free：使用复杂的 SQL 查询

> ID：11444044
> 
> 赞同：2
> 
> 时间：2012-07-12T01:53:37.263
> 
> 标签：php, pdo, fat-free-framework

问题：在 Fat Free Framework 中运行更复杂的 SQL 查询是否有更简单/更安全的方法。我的解决方案是使用 PDO，但它又乱又丑，因为我不能轻易抛出异常。

背景：

Fat Free 为数据库的“安全”操作提供了 AXON 类，但我想做一个 AXON 可以处理的更复杂的查询。

DB 类已公开，但我需要求助于“mysql_real_escape_string()”来构建不能保证安全的查询。所以解决方案似乎是使用暴露的 PDO。

暴露的 PDO 作为默认错误处理，这很痛苦，并导致代码丑陋。

```
 $pdo = F3::get('DB')->pdo;
        $sql = 'INSERT INTO config(config_name, config_value, comments) VALUES( :config_name , :config_value , :config_comments)
                     ON DUPLICATE KEY UPDATE config_value= :config_value2';
        if (!$stmt = $pdo->prepare($sql)) {
            $errorInfo = $pdo->errorInfo();
            trigger_error('PDO Error: ' . $pdo->errorCode(). ' ' . $errorInfo[2]);
            exit();
        }

        $stmt->bindValue(':config_name', $field, PDO::PARAM_STR);
        $stmt->bindValue(':config_value', $value, PDO::PARAM_STR);
        $stmt->bindValue(':config_comments', $comments, PDO::PARAM_STR);
        $stmt->bindValue(':config_value2', $value, PDO::PARAM_STR);
        if ($stmt->execute() === false) {
            $errorInfo = $stmt->errorInfo();
            trigger_error('PDO Error: ' . $stmt->errorCode(). ' ' . $errorInfo[2]);
            exit();
        } 
```

那么我错过了一些更整洁的东西吗？或者 AXON 可以处理更复杂的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:58:52.300

您是否查看过 DB 对象并编写参数化查询？您可以[在此处查看文档](http://bcosca.github.com/fatfree/#sql-handler)，并向下选择参数化查询。

它比直接使用 PDO 要干净一些。

```
DB::sql(
    'SELECT * FROM users WHERE userID=:uID',
    array(':uid'=>array(F3::get('POST.userID'),PDO::PARAM_INT))
); 
```

# c# - MVC：如何将代码解码为使用 JavaScriptSerializer 在 c# 中编码的 JS

> ID：11444045
> 
> 赞同：0
> 
> 时间：2012-07-12T01:53:37.957
> 
> 标签：c#, javascript, asp.net-mvc

我使用 System.Web.Script.Serialization 库对来自 C# 的元素进行编码。如何从 JS 函数中解码它。

例如我有：

```
JavaScriptSerializer js = new JavaScriptSerializer();
string ModelString=  js.Serialize(Model); 
```

并希望在 JS 中做：

```
var element=decode('@ModelString'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:33:30.710

您需要使用 jQuery。

```
var _Model=$parseJSON(ModelString); 
```

那么你可以使用：

```
_Model.Name;
_Model.Address; //etc... 
```

我希望这是你想要的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:58:47.417

您可以在视图中执行以下操作：

```
var element = @Html.Raw(Json.Encode(Model)) 
```

其中“模型”是一个对象。在这种情况下，它不必被序列化，Json.Encode() 会处理这个问题。

或者，如果您想在控制器中序列化您的对象，您可以在视图中执行以下操作：

```
var element = @Html.Raw(ModelString) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:00:37.483

您可以创建一个返回序列化模型的方法：

```
using System.Web.Script.Serialization;
namespace SO11444045.Models
{
    public class HomeIndex
    {
        public HomeIndex()
        {
            this.Name = "Alfred";
            this.Age = 33;
        }

        public string Name { get; set; }

        public int Age { get; set; }

        public string Me()
        {
            var serializer = new JavaScriptSerializer();
            return serializer.Serialize((object)this);
        }
    }
} 
```

并在视图中获取 Modelo 实例：

```
@model SO11444045.Models.HomeIndex

@{
    ViewBag.Title = "Index";
}

<script type="text/javascript">
    var json = @Html.Raw(Model.Me());
    alert(json.Name);
</script> 
```

# jsp - JSP 编程 - response.getWriter().flush(); 不工作

> ID：11444047
> 
> 赞同：3
> 
> 时间：2012-07-12T01:53:45.423
> 
> 标签：jsp, tomcat, flush

```
<%
response.getWriter().write("Hello world<BR>\n");
response.getWriter().flush();
wait(10000); // 10 seconds
response.getWriter().write("Goodbye happiness.<BR>\n");
%> 
```

预期结果：浏览器中显示“Hello World”。10秒后，“再见幸福”。被展示。

发生了什么：页面在那里加载了 10 秒，然后最后显示“Hello World Goodbye Happiness”。

我想做的是在达到不同的里程碑时显示长时间运行的操作的状态。这可能吗？

我在 Windows 7 上使用 Eclipse EE（带有 Tomcat）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:22:40.403

```
<html>
<body>
 You didn't tell us which browser you were using. Chrome and Firefox behave as you   expect them to do. 
But, IE needs some filler at the start of the page. IE will wait for a certain amount of content to render.
I am testing with IE8 and this works for me.
<br/>
<%
   out.print("Hello world<br/>");
   out.flush();
   Thread.sleep(3000); // 3 seconds for easy testing.
   out.print("Goodbye happiness.");
 %>
 </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:02:13.480

我认为这里的问题是`wait(10000); // 10 seconds`。不确定您看到的是什么响应，但您必须先锁定才能执行`wait()`。您应该将`wait(10000);` 行更改为以下之一：

```
synchronized (this){
    wait(10000); //10 secs
} 
```

或者

```
Thread.sleep(10000); 
```

即使那样，如果它不起作用，您也应该检查是否有任何东西在覆盖写入器并缓冲数据直到关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:06:28.787

在编写内容之前，您必须设置“Transfer-Encoding：chunked”标头。

```
response.setHeader("Transfer-Encoding", "chunked"); 
```

# android - TextView 动画 - 淡入、等待、淡出

> ID：11444051
> 
> 赞同：27
> 
> 时间：2012-07-12T01:54:37.090
> 
> 标签：android, android-animation, textview, fadein, fadeout

我正在制作一个图片库应用程序。我目前有一个底部带有文本视图的图像视图。目前它只是半透明的。我想让它淡入，等待 3 秒，然后淡出 90%。将焦点放在它上面或加载新图片将使其重复循环。我已经阅读了十几页并尝试了一些事情，但没有成功。我得到的只是淡入和瞬间淡出

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-15T17:52:43.717

```
protected AlphaAnimation fadeIn = new AlphaAnimation(0.0f , 1.0f ) ; 
protected AlphaAnimation fadeOut = new AlphaAnimation( 1.0f , 0.0f ) ; 
txtView.startAnimation(fadeIn);
txtView.startAnimation(fadeOut);
fadeIn.setDuration(1200);
fadeIn.setFillAfter(true);
fadeOut.setDuration(1200);
fadeOut.setFillAfter(true);
fadeOut.setStartOffset(4200+fadeIn.getStartOffset()); 
```

非常适合白色背景。否则，您需要在实例化`AlphaAnimation`类时切换值。像这样：

```
AlphaAnimation fadeIn = new AlphaAnimation( 1.0f , 0.0f ); 
AlphaAnimation fadeOut = new AlphaAnimation(0.0f , 1.0f ); 
```

这适用于黑色背景和白色文本颜色。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-06-16T23:52:33.457

Guy Cothal 回答的 Kotlin 扩展函数：

```
inline fun View.fadeIn(durationMillis: Long = 250) {
    this.startAnimation(AlphaAnimation(0F, 1F).apply {
        duration = durationMillis
        fillAfter = true
    })
}

inline fun View.fadeOut(durationMillis: Long = 250) {
    this.startAnimation(AlphaAnimation(1F, 0F).apply {
        duration = durationMillis
        fillAfter = true
    })
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-05-26T09:41:11.483

这就是我在我的项目中用于在 TextViews 上循环淡入/淡出动画的解决方案：

```
private void setUpFadeAnimation(final TextView textView) {
    // Start from 0.1f if you desire 90% fade animation
    final Animation fadeIn = new AlphaAnimation(0.0f, 1.0f);
    fadeIn.setDuration(1000);
    fadeIn.setStartOffset(3000);
    // End to 0.1f if you desire 90% fade animation
    final Animation fadeOut = new AlphaAnimation(1.0f, 0.0f);
    fadeOut.setDuration(1000);
    fadeOut.setStartOffset(3000);

    fadeIn.setAnimationListener(new Animation.AnimationListener(){
        @Override
        public void onAnimationEnd(Animation arg0) {
            // start fadeOut when fadeIn ends (continue)
            textView.startAnimation(fadeOut);
        }

        @Override
        public void onAnimationRepeat(Animation arg0) {
        }

        @Override
        public void onAnimationStart(Animation arg0) {
        }
    });

    fadeOut.setAnimationListener(new Animation.AnimationListener(){
        @Override
        public void onAnimationEnd(Animation arg0) {
            // start fadeIn when fadeOut ends (repeat)
            textView.startAnimation(fadeIn);
        }

        @Override
        public void onAnimationRepeat(Animation arg0) {
        }

        @Override
        public void onAnimationStart(Animation arg0) {
        }
    });

    textView.startAnimation(fadeOut);
} 
```

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-05T23:46:27.257

您可以使用额外的动画对象（不修改其 alpha）来防止即时淡出，为您的淡入效果设置 animationListener 并在淡入的 on animationEnd 中启动额外的动画对象，然后您开始在额外动画对象的动画结束时淡出，试试下面的链接，它会有所帮助..

[textview的自动淡入淡出效果](http://kunmii.blogspot.com/2014/04/how-to-create-easy-android-textview.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T06:51:25.703

我正在寻找类似问题的解决方案（TextView 淡入/等待/淡出）并想出了这个（事实上，官方文档也指出了这一点）。您显然可以通过添加更多参数来改善这一点。

```
public void showFadingText(String text){
    txtView.setText(text);
    Runnable endAction;
    txtView.animate().alpha(1f).setDuration(1000).setStartDelay(0).withEndAction(
            endAction = new Runnable() {
                public void run() {
                    txtView.animate().alpha(0f).setDuration(1000).setStartDelay(2000);
                }
            }
    );
} 
```

前提是您在其他地方声明了 txtView，alpha 从零开始。

# javascript - 将图像加载到 document.body 背景中

> ID：11444052
> 
> 赞同：0
> 
> 时间：2012-07-12T01:54:40.020
> 
> 标签：javascript, css, image, dom

我正在尝试提取图像（在这种情况下，`/camera/frame`是已知良好的 JPG），并将其加载为我的`document.body`.

到目前为止，这是我的代码：

```
var backgroundImage = new Image();
backgroundImage.onload = function ()
{
    console.log("onload");
    document.body.style.backgroundImage = this.src;
};

backgroundImage.src = 'camera/frame'; 
```

`"onload"`按预期打印，并且 this.src 打印出完整的 URL 到`/camera/frame`，但`document.body.style.backgroundImage`仍然存在`""`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:59:47.687

我相信你可能错过了两件事。

```
var path = 'path/to/image.jpg';
document.body.style.background='url('+path+')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:39:48.827

Canvas 2D 来救援！

```
var backgroundImage = new Image();
backgroundImage.onload = function ()
{    
    var canvas = document.getElementById('canvas');
    canvas.width = this.width;
    canvas.height = this.height;

    var canvasContext = canvas.getContext('2d');
    canvasContext.drawImage(this, 0, 0, this.width, this.height);
};

backgroundImage.src = 'camera/frame'; 
backgroundImage.width = $(window).width();
backgroundImage.height = $(window).height(); 
```

在背景中加载图像，然后将其无缝绘制到画布中！

# ruby-on-rails - 在 Heroku Cedar 上使用 expire_page？

> ID：11444059
> 
> 赞同：1
> 
> 时间：2012-07-12T01:56:05.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, heroku

有没有人设法在 Cedar 堆栈上将 expire_page 与 Heroku 一起使用？我有一个来回的支持，但一直没有成效。根据我的测试，它适用于单个测功机，但是当您有多个测功机时，只有一个会使页面过期。因此，它有时会提供旧页面。我知道 Varnish 在以前的堆栈中是一个选项，但是 Cedar 的 HTTP 缓存解决方案是什么？现在我只是将 expire_action 与 memcached 一起使用，但这并不好，因为它仍然会命中 Rails 堆栈。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:49:09.130

Rack::Cache 就是答案。您可以使用 Last Modified 使使用标题的页面过期。除了 expire_action 之外，我可能还会使用它。这是它的教程：

[https://devcenter.heroku.com/articles/rack-cache-memcached-static-assets-rails31](https://devcenter.heroku.com/articles/rack-cache-memcached-static-assets-rails31)

这并不完美，因为我认为请求仍会排队，但总比没有好。

# ruby-on-rails - Cap deploy - 错误：找不到存储库

> ID：11444065
> 
> 赞同：3
> 
> 时间：2012-07-12T01:56:34.253
> 
> 标签：ruby-on-rails, capistrano

我继承了一个项目并且对事物的开发方面感到满意，但是系统操作员很差，Capistrano 部署失败了。对于上一个开发者之前已经部署的项目：

```
cap deploy:check 
```

运行良好，导致

```
You appear to have all necessary dependencies installed 
```

但是当我尝试部署时，我得到

```
...
ERROR: Repository not found.
... 
```

我有：

*   三重检查了 github repo 地址
*   确认我可以从本地机器上的 repo 推送和拉取罚款
*   确认我可以通过 SSH 从服务器正常连接到 github
*   确认我可以在服务器上克隆 repo
*   尝试开启和关闭代理转发
*   确认 .git/config 和 config/deploy.rb 中的 repo 路径匹配

目前，当代理转发关闭时，从服务器到 github 的 SSH 正在返回前一个开发人员的信息，该开发人员仍然可以访问 github 存储库。

```
Hi xxxxxx! You've successfully authenticated, but GitHub does not provide shell access. 
```

当代理转发打开时，我显示为经过身份验证的用户。

有关解决此问题的任何提示？非常高兴有一个体面的 URL 来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:03:33.180

好的，通过消除过程弄清楚了。这是“deploy.rb”中的以下行

```
set :deploy_via, "remote_cache" 
```

当它被注释掉时，它部署得很好。如果我取消注释它，它会再次因相同的错误而中断。所以这肯定是问题所在。

我不知道为什么会这样。但现在，我将关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T03:31:55.180

我知道我迟到了，但我刚刚从 Github 转移到 Bitbucket 的项目中遇到了这个问题。我能够毫无问题地从 Bitbucket 上的存储库中结帐、更新、推送/拉取，但是我最初的上限部署在移至 Bitbucket 后中断了。

简短的回答是需要删除服务器上的远程缓存。SSH 进入您的服务器，并删除在capistrano 创建的`cached-copy`目录中找到的整个目录。`shared`您的共享和发布目录的位置可能与我的不同，但这就是我所要做的：

`rm -rf www/shared/cached-copy`

在此之后，我能够毫无问题地进行部署。

希望对可能遇到此问题的其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:50:58.953

对于故障排除技巧——尤其是因为您是从 GitHub 存储库进行部署的——我建议查看 GitHub 指南以[使用 Capistrano 进行部署](https://help.github.com/articles/deploying-with-capistrano)。该指南还链接到另一个您应该查看的关于[管理部署密钥](https://help.github.com/articles/managing-deploy-keys)的内容。

`default_run_options[:pty]`中可能丢失或不正确`config/deploy.rb`。这可能会导致“身份验证成功，但您无法访问 shell”错误。

关于仍然使用前一个开发人员凭据的脚本，capistrano 脚本在服务器上登录时使用的系统帐户（例如）可能具有脚本可能使用`set :user, "deployer"`的前一个开发人员的私钥。`~/.ssh`如果是这种情况，您应该根据指南重新配置脚本以使用 SSH 代理转发，这将使脚本开始使用您的密钥。

# java - 字符串数组到十六进制数组（Java）

> ID：11444072
> 
> 赞同：4
> 
> 时间：2012-07-12T01:58:11.723
> 
> 标签：java, arrays, string, hex, hmac

我有一个实际上由十六进制字符组成的字符串数组。

假设内容是->

```
String array[] = {8C,D9,26,1D,69,B7,96,DB}; 
```

现在我希望将它们解释为每个 1 个字节的十六进制字符，而不是每个条目为 2 个字节的字符串。

```
StringBuilder output = new StringBuilder();
for (int j = 0; j < array.length; j++) {
        String temp = "\u00"+ array[j];
        output.append(temp);
    } 
```

尝试过类似的事情，但这是不可能的，因为它一直在抱怨“非法的 unicode 转义”。我尝试使用“\u00”（即 u 之前的两个反斜杠，但 stackoverflow 在那里只显示一个）而不是“\u00”来解决该错误，但是我没有在数组中看到真正的十六进制值，而是我看到一堆字符串，如 -> "\U008C" ， "\U00D9" 等等..

我希望转换后的值为 0x8C、0xD9、0x26...

谢谢。

编辑：我已经更新了这个问题，只是为了澄清数组本身没有逗号。最终我需要将所有这些值放在一起，并将其用作 HMAC 密钥，它是十六进制字符串而不是文本字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T02:20:38.030

让 JDK 为您完成工作：

```
String[] array = {"8C", "D9", "26", "1D", "69", "B7", "96", "DB"};

StringBuilder output = new StringBuilder();
for ( String hex : array ) {
    output.append( (char)Integer.parseInt( hex, 16 ) );
} 
```

基本上只需要循环内的一行即可。

如果您希望您的输入只是一个大字符串（这看起来更方便），只需这样做：

```
String input = "8CD9261D69B796DB";

StringBuilder output = new StringBuilder();
for ( String hex : input.replaceAll( "..(?!$)", "$0," ).split( "," ) ) {
    output.append( (char)Integer.parseInt( hex, 16 ) );
} 
```

### 编辑：

如果您想要 byte[] 结果，请执行以下操作：

```
String[] array = {"8C", "D9", "26", "1D", "69", "B7", "96", "DB"};

byte[] bytes = new byte[array.length];
for ( int i = 0; i < array.length; i++ ) {
    bytes[i] = (byte)Integer.parseInt( array[i], 16 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:09:32.333

使用 String.split 方法在 ,

对于返回数组中的每个元素 go data[i] = "0x" + data[i];

对于数组中的每个元素 str += data[i]

EZ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:10:15.570

您可以按如下方式拆分它：

```
public static void main(String[] args) {
    String givenString = "8C,D9,26,1D,69,B7,96,DB";
    String[] splitString = givenString.split("[,]");

    for(int index = 0; index < splitString.length; index++){
        System.out.print("0x"+ splitString[index]);
        System.out.print((index == splitString.length - 1) ? "":",");
    }
    System.out.println();

} 
```

为了加入他们，而不是我的`System.out`陈述，使用 StringBuilder 或 StringBuffer 并附加到它。

# php - PHP 变量“如何从变量中复制特定数据”

> ID：11444075
> 
> 赞同：0
> 
> 时间：2012-07-12T01:58:51.910
> 
> 标签：php, string, variables

如果我在我的 php 变量中声明了数据，我如何将 santance 从“any”复制到“Would”。

**数据示例：**

如果您**对麦克米伦有任何疑问，我们很**乐意听取您的意见。

谢谢您的帮助。

亲切的问候，卷轴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:05:51.720

使用[`preg_match()`](http://php.net/manual/en/function.preg-match.php)：

```
$somestr = 'If you have any questions about Macmillan we would love to hear from you.';
if (preg_match('/(\bany\b.+?\bwould\b)/i', $somestr, $matches)) {
    echo $matches[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:06:04.317

你可以试试这个：

```
$string = 'If you have any questions about Macmillan we would love to hear from you.';

preg_match('/( any )(.*?)( would )/', $string, $matches);

echo $matches[0]; // any questions about Macmillan we would 
```

**编辑 1**

要匹配多个结果（如果存在）：

```
preg_match_all('/( any )(.*?)( would )/', $string, $matches); 

foreach($matches[0] as $value)
    echo 'Found: ' . $value . '<br />'; 
```

# c++ - 参数传递的不同矩阵结构

> ID：11444077
> 
> 赞同：0
> 
> 时间：2012-07-12T01:58:53.983
> 
> 标签：c++, pointers, parameters, struct, matrix

我在 GenericObject 类中有一个函数，该函数需要获取一个结构作为参数，但该结构将由其子类提供。所有这些结构都具有相同的成员，但它们将具有不同的矩阵大小。

此函数获取结构（参数明显错误）：

```
void GenericObject::SetTexture(struct* _myStructOffset)
{
    for (int i = 0; i < stateNumber; i++)
    {
        for (int j = 0; j < indexNumber; j++)
        {
            SetTextureOffset(i, j, _myStructOffset[i][j]->xTex0, _myStructOffset[i][j]->xTex1, _myStructOffset[i][j]->yTex0, _myStructOffset[i][j]->yTex1, 100/*_myGenericOffset->imageW*/, 100/*_myGenericOffset->imageH*/);
        }
        GetMyAnimatedSprite()->SetAnimationToList();
    }
} 
```

结构示例：

```
 struct ButtonsData
    {
        float xTex0;
        float yTex0;
        float xTex1;
        float yTex1;
    }
    ButtonOffset1[3][1]
    ; 
```

并且应该以这样的方式工作：

```
void Button::SetTexture()
{
    GenericObject::SetTexture(&ButtonOffset1);
} 
```

我怎样才能做到？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:28:13.033

如果结构都具有相同的成员，那么为什么要在子类中重新定义它呢？

我怀疑答案是“不同的矩阵大小”意味着它们有一个静态声明大小不同的二维数组成员，换句话说，它们没有相同的成员。

三种解决方案。

*   只有一个结构定义并在运行时分配所需的矩阵大小
*   虚拟访问器函数。使用返回矩阵的虚函数创建一个基本结构，并且只能通过它们访问矩阵。
*   模板函数。

如果您的结构的成员都具有相同的名称，那么这应该足够了：

```
template <typename STRUCT_T>
void GenericObject::SetTexture(struct STRUCT_T *_myStructOffset)
{
...
} 
```

显然，因为它是一个模板，所以函数定义必须出现在您的头文件中，而不是 .cpp 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:36:48.977

谢谢@亚当！我将把我得到的解决方案放在这里，以供进一步研究。

将函数模板化确实是一种选择，但我对将它与结构一起使用感到困惑。经过昨天和今天的一些测试，我得到了这个工作版本：

```
template <typename STRUCT_T>
void SetTexture(STRUCT_T _myStructOffset[][])
{
    ...
} 
```

还有一个示例结构声明：

```
struct Buttons 
{
    float xTex0;
    float yTex0;
    float xTex1;
    float yTex1;
}
ButtonOffset1[3][1]
; 
```

非常感谢。

# linux - 破解 whoami 以返回假用户名

> ID：11444079
> 
> 赞同：1
> 
> 时间：2012-07-12T01:59:09.713
> 
> 标签：linux, path, hadoop, hdfs

我创建了一个`whoami`需要假用户名的新命令，并通过将其添加到 ~/.profile 将其放入 PATH 中。`whoami`它是以一种在实际来自 Linux 的实际 whoami 之前被调用的方式创建的。

这样做的主要原因是因为我正在远程访问 Hadoop 集群并希望复制的文件位于假用户名下。

当我`whoami`在 shell 中调用时，这工作正常，甚至调用 $PATH 会先显示我创建的 whoami 的路径。但是由于某种原因，当调用 Hadoop 时，它不会选择创建的“whoami”。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:05:10.520

大多数应用程序不使用`whoami`来确定用户的用户名或组。例如，在 bash 中，您可以使用命令`id`来查找有关您自己的更多详细信息，或者`id [username]`（例如`id root`）查找有关其他用户的更多详细信息。组也可以找到`groups`。此外，不同的编程语言（例如 C）有自己的方法来确定用户身份，例如`getuid()`命令。

如果您真的“需要”伪造您的用户帐户，则需要深入到操作系统级别并在处理这些方法的内核/API 中创建挂钩。

您是否有可能只是`chown`复制文件后的文件？

**更新：**

似乎某些 Hadoop 版本确实使用`whoami`了（我自己的集群实现没有）。

在这种情况下，最好的（一个松散使用的术语）建议是移动合法的`whoami`可执行文件并创建一个`whoami`shell 脚本来代替它。自定义脚本应该验证当前用户，如果它是“hadoop”，则返回您想要的任何伪造用户名 - 否则返回有效输出。在这种情况下，伊戈尔的回答会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:24:47.380

我想hadoop使用其他`PATH`变量然后你在你的shell中。您可以调整其 PATH 并将带有 fake 的目录添加`whoami`到其开头。

如果不可能，您可以为`whoami`（我不确定这是一个好主意，但如果您愿意，您可以这样做）编写一个小包装器，它将运行原始文件，`whoami`除非脚本由 hadoop 执行：

```
#!/bin/sh
WHOAMI=/bin/whoami.orig
if [ "$($WHOAMI)" = hadoop ]
then
  echo fake
else
  exec $WHOAMI "$@"
fi 
```

# macos - 如何以及在哪里为 MAC OS X 10.5.8 安装 Git

> ID：11444088
> 
> 赞同：1
> 
> 时间：2012-07-12T02:00:08.523
> 
> 标签：macos, git

我找到了一些如何安装 git 的说明，但它们似乎都需要 leopard 或我没有的东西，或者需要一些技能来手动进行安装。我对计算机很烂，所以我真的会寻找针对计算机文盲的答案。

我的电脑是装有 MAC OS X 10.5.8 的 Macbook air。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:37:06.237

您可以尝试 MacPorts——安装 MacPorts .dmg 文件，然后在终端中执行以下操作：

`sudo port install git`

如果你想要一个 GIT 的 GUI 前端，你可以查看[GitX](http://gitx.frim.nl)和/或 GitHub for Mac。（我相信后者将适用于非 GitHub 帐户）。还有付费软件[Tower 。](http://www.git-tower.com/)

# wpf - 多绑定到 ObservableCollection

> ID：11444089
> 
> 赞同：0
> 
> 时间：2012-07-12T02:00:22.673
> 
> 标签：wpf, binding, observablecollection

我正在使用 wpf 并多重绑定到 ViewModel 列表。

假设我有一个相同类型的 ViewModel 的 ObservableCollection，如下所示：

代码：

```
public class ShapeVM
{

    public Color Color { get; set; }
    public string Name { get; set; }

}

ObservableCollection ShapeVMs = new ObservableCollection();
ShapeVMs.Add(...);
ShapeVMs.Add(...);
ShapeVMs.Add(...);
ShapeVMs.Add(...);
ShapeVMs.Add(...);
// There are 5 ShapeVM in the collection. 
```

看法：

```
<UserControl .........>

    <ColorBox SelectedColor="{Binding Path=Color, Mode=TwoWay}" />

</UserControl> 
```

是否有可能每当 ColorBox 的 SelectedColor 发生变化时，5 个 ShapeVM 的 Color 会同时自动变为 ColorBox 的 SelectedColor？

如果我将 UserControl 的 DataContext 设置为任一 ShapeVM，则只会更改任一 ShapeVM 的颜色。

但是，我想在 ColorBox 的 SelectedColor 更改的同时更改 5 个 ShapeVM。我怎么能这样做？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:50:11.573

Bind the VM's Color property to your ColorBox:

1.  Derive ShapeVM from DependencyObject
2.  Let Color be a dependency property
3.  Give ColorBox a name (x:Name="TheColorBox")
4.  For every ShapeVM you instantiate, create a binding in code-behind:

    Binding binding = new Binding(); inding.source = TheColorBox; binding.Path = new PropertyPath(ColorBox.SelectedColorProperty); shapeVM.SetBinding(ShapeVM.ColorProperty, binding);

(for some reason code markup doesn't work, sorry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:56:08.787

您的问题的另一个简单解决方案是

```
<ComboBox x:Name="cmb" Grid.Row="0" ItemsSource="{Binding ShapeVMs}" DisplayMemberPath="Color" Height="40" SelectedValue="{Binding Path=SelectedColor,ElementName=clrbox}" SelectedValuePath="Color"/>
    <ColorBox x:Name="clrbox"/> 
```

我希望这个会有所帮助。

# asp.net - 重定向到 login.aspx 但不重定向到 default.aspx

> ID：11444090
> 
> 赞同：0
> 
> 时间：2012-07-12T02:00:37.020
> 
> 标签：asp.net, web-config

所以我设置了我的 web.config 来验证表单。我的 web.config 中有两段代码，但它表现得很奇怪。当您转到 www.mysite.com 时，它会重定向到 login.aspx 页面，但当您转到 www.mysite.com/default.aspx 时，它不会重定向。为什么要这样做？我还将默认文档设置为 default.aspx

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
        <forms loginUrl="~/Login.aspx" timeout="2880"         defaultUrl="account/default.aspx" />
    </authentication>
    <authorization>
        <deny users="?" />
    </authorization>

<location path="default.aspx">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:03:45.507

正如配置文件中清楚显示的那样，您已允许未经身份验证的用户显式访问“default.aspx” URL。“/” URL 没有这样的东西。请注意，它们（可能）最终指向磁盘上的相同物理文件并不重要。只有 URL 对授权很重要。您可以克隆您的`<location>`标签并简单地拥有另一个标签，以`path="/"`允许所有用户访问，无论他们的身份验证状态如何。

# eclipse-plugin - 安装有依赖关系的插件时，是否会自动安装必需的插件？

> ID：11444091
> 
> 赞同：6
> 
> 时间：2012-07-12T02:00:55.973
> 
> 标签：eclipse-plugin

我正在开发一个依赖 CodePro 和 Sonar 插件的插件。我在插件清单编辑器的“必需插件”部分添加了这些插件。当我尝试在新的 Eclipse 实例上安装我的插件时，我收到错误消息：“缺少要求：XYZ 插件需要捆绑 'ABC'，但找不到它。”。是否要求用户在安装我的插件之前必须手动安装这些必需的插件？或者更新管理器有没有办法在我之前自动下载和安装这些必需的插件？如果有办法，我该怎么做？我已经阅读了很多很多文章、博客和论坛，但对此没有明确的回应。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T20:06:11.250

打开功能清单编辑器，转到信息选项卡，转到要访问的站点子选项卡。为您的插件所依赖的插件添加所有更新站点。安装插件时，请选中“安装期间联系所有更新站点以查找所需软件”选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T19:06:16.603

p2 将遵循插件依赖项来安装所有必需的插件（或功能，取决于配置的内容）。如果您使用`Help>Install New Software`更新站点，所有插件必须可用，并且必须选中“安装期间联系所有更新站点以查找所需软件”。

使用命令行 p2 director 时，您必须在该命令行上列出您需要的所有更新站点。前任：

```
eclipse/eclipse \
-application org.eclipse.equinox.p2.director \
-noSplash \
-repository \
http://download.eclipse.org/egit/updates-nightly,\
http://download.eclipse.org/e4/updates/0.12-I-builds,\
http://download.eclipse.org/releases/juno,\
file://$HOME/eclipseUpdate \
-installIUs \
org.eclipse.egit.feature.group,\
org.eclipse.egit.source.feature.group,\
org.eclipse.jgit.feature.group,\
org.eclipse.jgit.source.feature.group,\
org.eclipse.egit.fetchfactory.feature.group,\
org.eclipse.emf.sdk.feature.group,\
org.eclipse.xtext.sdk.feature.group,\
org.eclipse.wst.xml_ui.feature.feature.group,\
org.eclipse.pde.api.tools.ee.feature.feature.group,\
org.eclipse.e4.core.tools.feature.feature.group,\
org.eclipse.e4.tools.css.spy.feature.feature.group,\
org.eclipse.e4.tools.css.editor.feature.feature.group 
```

# c++ - 设置精度为双精度

> ID：11444095
> 
> 赞同：0
> 
> 时间：2012-07-12T02:01:55.823
> 
> 标签：c++

我正在尝试为用户输入的双精度类型数据设置两个十进制数字，并且我有正确的头文件，但显示的结果只有整数，没有小数？我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T01:24:54.693

您可能希望使用以下格式。

```
cout << setprecision(# of places past decimal) << fixed << varName << endl; 
```

固定输入输出操纵器告诉它您正在设置小数点后位数的精度。

# ruby - Ruby 中的数组返回是如何发生的？

> ID：11444109
> 
> 赞同：-1
> 
> 时间：2012-07-12T02:03:52.890
> 
> 标签：ruby, arrays, memory-management

1.  是返回数组索引还是返回整个数组？

2.  那么阵列的寿命呢？如果我们不返回创建的数组，它是继续占用内存空间还是在我们离开函数时自动释放？

我是 OOP 和 Ruby 的新手。我以前做过C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:30:27.833

关于 Ruby 的一些事情。首先，Ruby 是一种垃圾收集语言，所以根据 Ruby 的实现，垃圾收集器会在不同的时间释放内存空间。

其次，不清楚“数组返回”是什么意思。如果您指的是一种方法，那么幕后发生的事情可能也是实现的问题之一。从程序员的角度来看，返回的是一个完整的数组。是否引用了同一块内存很可能是关于变量范围的问题，当然可以按值而不是按引用返回整个数组。

Ruby 的“标准”实现，也称为 MRI 或 Matz 的 Ruby，是用 C 语言编写并开源的，因此您可以看到[数组的 C 代码](https://github.com/ruby/ruby/blob/trunk/array.c)，包括它的内存分配和释放函数。

# c# - 删除信息后自动更新主键

> ID：11444117
> 
> 赞同：-2
> 
> 时间：2012-07-12T02:04:58.750
> 
> 标签：c#, mysql, linq, primary-key

有人知道如何解决这个ID问题吗？

例如 ：

```
ID | Message
1  |  Hi
2  |  Philemon
3  |  Car              <-- Delete this row
4  |  Tay
5  |  Bye 
```

当您删除第 3 行时，该行后面的 ID 将自动更新并填写 ID。

```
ID  | Message
1   | Hi
2   | Philemon
3   | Tay
4   | Bye 
```

更多信息 ：

```
private void btnDel_Click(object sender, EventArgs e)
    {
        using (testEntities Setupctx = new testEntities())
        {
            int ID = Int32.Parse(lblID.Text);
            var DeleteSh = (from delsh in Setupctx.shifthours
                            where delsh.idShiftHours == ID
                            select delsh).Single();
            Setupctx.DeleteObject(DeleteSh);
            Setupctx.SaveChanges();
            txtStart.Text = "";
            txtStop.Text = "";
            this.Edit_Shift_Hours_Load(null, EventArgs.Empty);
            MessageBox.Show("Selected Shift Timing Has Been Deleted.");
        }
    } 
```

这是删除行的代码。删除后，我需要 ID 自动更新，以便用下一个数据填充已删除的 ID。目前我可以删除信息，但 ID 保持不变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T02:12:16.687

不要这样做，假设有人链接到您的页面**http://mysite.com/article.aspx?ArticleID=1234** [，](http://mysite.com/article.aspx?ArticleID=1234)并且您删除了它之前的一些索引，突然 1234 引用了完全不同的东西。更不用说所有必须更新的外键约束（意味着您的数据库已正确规范化）。

这将是并发性和可用性的噩梦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:38:44.513

我相信这样做的唯一方法是首先删除有问题的项目，然后选择表中的项目，删除表，然后再次创建它，然后再次插入表数据。

这只有在您的数据库中没有链接外键的情况下才有可能，否则您会收到参考错误。

除此之外..只是不要这样做。

如果您确实需要具有连续 ID 的列，请添加另一个不是主键列的列，您可以在不破坏与其他表的关系的情况下进行更新。但是话又说回来，您将无法从其他表中引用它

# php - codeigniter：为什么当我在锚标记的 href 属性中回显 base_url() 时，它会回显两次

> ID：11444121
> 
> 赞同：5
> 
> 时间：2012-07-12T02:06:02.413
> 
> 标签：php, codeigniter, url, anchor, base-url

所以基本上当我在锚标记的 href 属性中回显 codeigniter 函数 base_url() 时，它似乎回显了两次。例子：

```
<a href="<?php echo base_url(); ?>">somelink</a> 
```

以上，如果您检查它，您的 chrome 浏览器会显示：

```
<a href="www.mysitedomainname.com/www.mysitedomainname.com/">somelink</a> 
```

“mysitedomainname.com”只是我为这个例子编的一个名字。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T02:19:36.203

我知道这有三个原因可能导致这种情况。

第一个是`config.php`第 17 行写错了`$config['base_url'] = '';`——最好留空，就像下载 CI 时一样。

第二个是如果您`$config['base_url']`为某些东西设置了值，而没有使用`http://`或其他协议作为前缀。

第三个是如果你在`base` `href`某个地方设置了：

```
<base href="http://www.mysitedomainname.com/" /> 
```

当您需要链接到其他页面时，您*应该*使用`site_url()`,`base_url()`可用于链接样式表、js、img src 属性和其他*真实*URL。原因很简单，不`base_url()`包括`index_page`.`config.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:32:21.120

如果您使用它会正常工作

```
<a href="<?php echo base_url('Controller/Function'); ?>">somelink</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T13:34:53.293

试试这个

做这个

```
$config['base_url'] = "http://www.mysitedomainname.com" 
```

进入这个

```
$config['base_url'] = "" 
```

在 config.php 中

# crystal-reports-2010 - 如何在水晶报告中对“-”和 9 个条码中的 3 个进行条码编码？（公式）

> ID：11444123
> 
> 赞同：0
> 
> 时间：2012-07-12T02:06:12.620
> 
> 标签：crystal-reports-2010

我在水晶报告中对“58-04105-01”和“TY 89”等字符串进行条形码编码时遇到问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:10:11.353

如果您使用数据库字段，您可以执行以下操作（假设每个数字都是一个单独的字段）：

```
{dataset.field} & "-" & {dataset.field2} 
```

# javascript - 我需要帮助让我的幻灯片到顶部手风琴停止在我的固定顶部标题下方

> ID：11444126
> 
> 赞同：0
> 
> 时间：2012-07-12T02:06:38.473
> 
> 标签：javascript, css, accordion

我认为这是一个`css`问题，但它可能是`js`. 当我的手风琴链接被点击时，它们应该会打开并滑到页面的顶部——它们会这样做。但是，我有一个固定的顶部标题，它们在后面向上滑动。我需要它在页面上停止大约 60 像素，以便它可见。

[http://imip.rvadv.com/index3.html](http://imip.rvadv.com/index3.html)

[http://jsfiddle.net/imakeitpretty/ruwjn/](http://jsfiddle.net/imakeitpretty/ruwjn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:26:55.230

在第 102 行，`jquery.accordion.js`为手风琴中的每个项目设置了偏移值。您可以简单地为每个数字减去一个静态数字（您建议 60px）来更改文档滚动的距离。为了优雅地做到这一点，我会将它作为另一个选项传递，然后您可以通过执行以下操作从脚本中访问它（假设您命名您的选项`scrollOffset`：

```
_saveDimValues    : function() {
    scrollOffset = this.options.scrollOffset;
    this.$items.each( function() {

      var $item   = $(this);

      $item.data({
        originalHeight  : $item.find('a:first').height(),
        offsetTop   : $item.offset().top - scrollOffset
      });

    });

}, 
```

[http://jsfiddle.net/ruwjn/7/](http://jsfiddle.net/ruwjn/7/)

# multithreading - 我什么时候应该在多线程编程中使用“锁定”？

> ID：11444127
> 
> 赞同：5
> 
> 时间：2012-07-12T02:06:42.690
> 
> 标签：multithreading, pthreads, pthread-join

我什么时候应该在多线程编程中使用“锁定”？只是锁定每个线程将要修改的区域或锁定每个线程可以访问的区域，即使它不会被修改？

```
struct share_data {
    /* share data */
    thread_id;
}

thread 1 will exceute main() function:
   Initial share data. /* need lock */

   join all thread(share_data.thread_id, &status)   /* access share data thread_id, lock or not? */
   exit.

other threads will:
   access share_data, /* lock or not? */
   modify share_data, /* lock */
   exit. 
```

感谢您的关注，如果您有更多的时间，关于真实代码的更多细节：

```
/* 
the number of threads will be input by user. Structure "tdata" and "tlist" stores 
information of each thread, including: "tid" - thread id which is gaven by 1st argument 
of pthread_create(), "torder" which is the order of calling pthread_create() for each 
thead, "status" stores work status of each thread. I allocate memory for "tlist" 
dynamically. Now, we assume that the number of threads is NUM_THREADS(5). I do not use 
the 4th argument to pass data to each thread, I use global variable "tdata", "tlist" as 
shared data to them. "mutex" variable is used to make sure those threads share data safely,
but it seems not works correctly.

I wanna each thread can get "torder", and maybe modify the status before calling 
pthread_exit().
*/
#include <pthread.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

/* #define NUM_THREADS 5 */
struct tdata {
        pthread_t tid;
        int torder;
        int status;
        struct tdata *next;
};
typedef struct tdata tdata_t;
struct tdatalist {
        tdata_t *head;
        tdata_t *tail;
}tlist;

pthread_mutex_t mutex;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
void *tfunc() {
        tdata_t *p, *q;
        unsigned long int tid;
        int torder;

        p = tlist.head;
        q = NULL;
        pthread_mutex_lock(&mutex);

        tid = pthread_self();

        while (p->tid!=tid && p->next!=NULL) {
                q = p;
                p = p->next;
        }
        tid = p->tid;
        torder = p->torder;
        /* p->status = 0; */
        pthread_mutex_unlock(&mutex);
        /* printf ("I am thread %lu, myorder %d, thread_exit.\n", tid, torder); */
        printf ("I am thread %0x, myorder %d, thread_exit.\n", tid, torder);

        pthread_exit((void *)torder);
}

int main (int argc, char *argv[]) {
/*        pthread_t thread[NUM_THREADS]; */

        pthread_attr_t attr;
        int t;
        tdata_t *tdata_p;
        int num_threads;
        printf ("Input number of threads:");
        scanf ("%d", &num_threads);
        printf ("\n");

        printf ("Main thread id: %08x\n", pthread_self());

        pthread_mutex_init(&mutex, NULL);
        pthread_attr_init(&attr);
        pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);

        tlist.head=tlist.tail=NULL;     /* create and initial tlist */
        for (t=0; t<num_threads; t++) {

                pthread_mutex_lock(&mutex);
                tdata_p = (tdata_t *) malloc (sizeof (tdata_t));
                pthread_create (&tdata_p->tid, &attr, tfunc, NULL);
                /* tdata_p->tid = thread[t]; */
                tdata_p->torder = t;
                tdata_p->status = 1;          /* for 0,finished the work.  for 1,not*/
                tdata_p->next = NULL;

                if(tlist.head == NULL) {
                        tlist.head = tlist.tail = tdata_p;
                }
                else {
                        tlist.tail->next = tdata_p;
                        tlist.tail = tdata_p;
                }
                pthread_mutex_unlock(&mutex);

        }

        /*  Join child threads */
        pthread_attr_destroy(&attr);
        pthread_mutex_lock (&mutex);
        tdata_t *p;
        tdata_t *q;
        void *status;
        p = tlist.head;
        while (p != NULL) {
                q = p->next;
                pthread_join(p->tid, &status);
                p = q;
        }

        pthread_mutex_unlock (&mutex);

        pthread_mutex_destroy(&mutex);
        /* delete the list */
        p = tlist.head;
        while (p != NULL) {
                q = p->next;
                free (p);
                p = q;
        }
        tlist.head = tlist.tail = NULL;

        printf ("Main exit.\n");
        pthread_exit(NULL);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:15:30.793

每当您要读取或写入数据时，都需要锁定它。这可以防止数据尝试读取尚未写入的数据。

另一种说法是线程或进程之间共享的任何数据都应在更改或读取之前锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:14:10.193

除了像生产者-消费者队列这样的高级线程间通信的短期锁定之外，我会说“尽可能少地逃脱”。锁会产生死锁，并且死锁的可能性会随着锁的增加而以超线性方式成倍增加。

此外，应用程序中的大量 pthread_join() 调用是 0。<0 是不可能的，1 或更多太多。

# javascript - 单击按钮时在地图上画线（使用 Google Maps API 3，Javascript）

> ID：11444128
> 
> 赞同：1
> 
> 时间：2012-07-12T02:07:19.473
> 
> 标签：javascript, button, google-maps-api-3, drawing, line

我正在使用 Google Maps API 3。我有一张地图和一个按钮。在地图上，我有两个标记。当我单击按钮时，我想在两个标记之间画一条线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:27:02.297

不确定为什么需要 Ajax。使用 2 个标记和 google maps API v3，您可以在它们之间画一条直线。

像这样（单击按钮时运行）应该使用正确的marker1和marker2名称：

```
var polyline = new google.maps.Polyline({path:[marker1.getPosition(), marker2.getPosition()}); 
```

在这张[地图上用 IE 测试](http://www.geocodezip.com/v3_MW_example_map3.html)

在地址栏中使用这个：

```
javascript:{var polyline = new google.maps.Polyline({path:[gmarkers[0].getPosition(), gmarkers[1].getPosition()], map:map});} 
```

# sharepoint - 在 ItemUpdating 事件中从 SPItemEventDataCollection 创建 SPListItem

> ID：11444132
> 
> 赞同：0
> 
> 时间：2012-07-12T02:08:05.730
> 
> 标签：sharepoint, properties, updating, splistitem

在 SharePoint 2010 中，我想在列表项更新时执行一些代码 - 当 ItemUpdating 事件被触发时。

我需要的是一个包含旧值（更新前）的 SPListItem 和另一个包含新值的 SPListItem。

我可以通过以下方式轻松获取具有旧值的 SPListItem：

```
SPItemEventProperties properties;
properties.ListItem; 
```

但我无法获得具有新值的 SPListItem。我唯一能得到的是

```
SPItemEventProperties properties
properties.AfterProperties 
```

但这给了我一个 SPListEventDataCollection。我想将此 SPListEventDataCollection 转换为 SPListItem - 这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:35:37.103

更新的 SPListItem 尚不存在于 ItemUpdating 事件中。

检查[这个页面](http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=122)。

您想收听 ItemUpdat* *ed* * 事件，并且可以在那里获取新的 ListItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T16:00:05.250

你可以这样做...

```
if (properties.ListItem["title"] != properties.AfterProperties["title"])
{
    //do something because the title has changed
} 
```

# visual-studio-2010 - VS2010 RDLC正文背景图预览

> ID：11444139
> 
> 赞同：0
> 
> 时间：2012-07-12T02:08:49.203
> 
> 标签：visual-studio-2010, rdlc

我在 VS2010 中创建了一个报告 (RDLC)，并选择了一个嵌入图像作为正文“背景图像”，但在使用 RDLC 设计器时我没有看到该图像的预览。如果我选择“外部”图像文件似乎也没有任何区别 - 设计器中仍然没有预览。

是否有一个开关我必须翻转以使 VS2010 在报表设计器中向我显示背景图像，或者在设计时没有办法看到正文背景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:23:34.587

您可能必须从属性部分的下拉菜单中设置相应的 MIMEType，填充子部分：

*   图片/bmp
*   图片/JPEG
*   图片/gif
*   图片/png
*   图片/x-png

[http://msdn.microsoft.com/en-us/library/ms154003%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms154003%28v=sql.90%29.aspx)

# javascript - 禁用标题中的滚动条，但不在网页内容中

> ID：11444148
> 
> 赞同：1
> 
> 时间：2012-07-12T02:10:03.167
> 
> 标签：javascript, jquery, html, css

我有一个带有标题和内容的简单网页，它可能看起来像

```
<div id="wrap">
    <div id="header">
    </div>
    <div id="content">
    </div>
</div> 
```

默认情况下，它在右侧有一个滚动条，但我想禁用/冻结标题中的滚动条，但将其保留在内容中，是否可以通过 javascrip/jquery 或 css 执行此操作？

谢谢

前 ![在此处输入图像描述](../Images/be514b6407d81e5c4cfbcf0a059a8102.png)

后 ![在此处输入图像描述](../Images/5578b60816ca2db1c9533911fcac4246.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:15:32.997

您可以通过给内容一个固定的高度，并设置`overflow-y: scroll`.

示例：http: [//jsfiddle.net/XLaVa/](http://jsfiddle.net/XLaVa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:13:42.807

你将不得不重组你的 html/css：

```
<div id='wrap'>
   <div id='header'></div>
   <div id='content-outer'>
      <div id='content-inner'>
      </div>
   </div>
</div> 
```

CSS：

```
.content-outer {
   height: 600px; /* or desired height */
   overflow-y: scroll;
}
.content-inner {
   height: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:12:25.217

`overflow:hidden`在 CSS 中为标题和内容设置`overflow:scroll`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T02:13:52.667

添加这些 CSS 规则：

```
#header { overflow: hidden; }
#content { overflow: auto; } 
```

您还需要限制内容的高度，以免页面本身溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T02:30:13.840

如果您想向内容元素本身添加滚动条，请查看其他答案。要通过浏览器的滚动条达到类似的效果，请尝试`position:fixed`标题：

```
#header {
    position : fixed;
    top : 0px;
    width : 100%;
    height : 30px;
    background-color:white;
}
#content{
    margin-top : 30px;
} 
```

演示：http: [//jsfiddle.net/GUeUe/](http://jsfiddle.net/GUeUe/)

（注意：IE <=6 不支持`position:fixed`.）

# jquery-ui - jQuery UI 自动完成，仅当用户输入特殊字符时如何启用自动完成？

> ID：11444149
> 
> 赞同：0
> 
> 时间：2012-07-12T02:10:09.583
> 
> 标签：jquery-ui, autocomplete

我将自动完成附加到不同类型的输入框。每当用户开始输入任何可以的内容时，它都会加载项目。但是，在**其中一个 textarea**中，我想默认禁用自动完成功能，并在用户输入“@”时启用它。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:04:46.990

这可以解决问题：

```
$('textarea').autocomplete({
    source: availableTags
})
    .autocomplete('disable')
    .on('keypress', function(event) {
        //Detect whether '@' was keyed.
        if (event.shiftKey && event.keyCode === 64) {
            $(this).autocomplete('enable');
            return false;
        }
    }); 
```

**现场示例**- [http://jsfiddle.net/tj_vantoll/rRu4A/3](http://jsfiddle.net/tj_vantoll/rRu4A/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-14T07:50:35.873

我发现如果您以“@”开始输入，则接受的答案效果很好，但当“@”嵌入段落中间的更深处时效果不佳。我仍在研究更好的解决方案，但这是我目前所拥有的。

```
$(document).ready(function() {
        function getCurrentWord(el) {
            var $t = $(el),
                v = $t.val(),
                minLength = $t.data('uiAutocomplete').options.minLength,
                start = $t.prop('selectionStart'),
                end = $t.prop('selectionEnd'),
                re = /(\@[^\s]+)/g,
                matches = [], m;

            if (start !== end) // user has text highlighted
                return false;

            while((m = re.exec(v)) != null) {
                var endIndex = m.index + m[1].length;
                if (start >= m.index && start <= endIndex) {
                    var result = { 
                        start: m.index,
                        end: endIndex,
                        value: m[1]
                    };
                    return result.value.length >= minLength && result;
                }
            }
            return false;
        }

        $('textarea').autocomplete({
            minLength: 2,
        focus: function() {
          //  Don't let navigating the menu overwrite textarea value
          return false;
        },
            search: function(event, ui) {
                var word = getCurrentWord(this);
                if (word) return word.value;
                return false;
            },
        select: function(event, ui) {
          var fullValue = ui.item.value;
          var target = getCurrentWord(this);
          var value = $(this).val();
          if (target)
            $(this).val(
                value.slice(0, target.start) 
                + fullValue 
                + value.slice(target.end)
              );

                  return false;
        },
        source: function(req, response) {
          var word = getCurrentWord(this.element);
          response([
            'Adam',
            'Alice',
            'Bjorn',
            'Cathryn',
            'Chris',
            'David',
            'Edward',
            'Francis',
            'George',
            'Hermen',
            'Heidi',
            'Issac',
            'Jennifer',
            'Katie',
            'Kristen',
            'Larry',
            'Melinda',
            'Nina',
            'Oliver',
            'Peter',
            'Quagmire',
            'Rodger',
            'Stacey',
            'Trevor',
            'Ulysses',
            'Victor',
            'William'
            ].map(function(s) { return '@' + s; })
             .filter(function(s) {
                if (!word) return true;
                else return s.toLowerCase().startsWith(word.value.toLowerCase());
             }));
        }
      });
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<textarea></textarea>
```

# c# - Asp.Net MVC 和 WebForm

> ID：11444156
> 
> 赞同：0
> 
> 时间：2012-07-12T02:11:31.620
> 
> 标签：c#, asp.net-mvc

我可以在同一个站点/虚拟目录中拥有 MVC 和 WebForms 吗？

我有一个运行 WebForms 的网站，但我想实现 MVC。注意：该网站也有一些经典的 ASP 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:16:08.247

是的，您可以在同一个项目中混合所有内容。

请参阅显示如何混合所有技术的[Plug-In Hybrids 。](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)

您可以毫无问题地将 MVC 添加到现有的 WinForms 应用程序。您可能需要`IgnoreRoute`为现有页面添加规则。经典的 ASP 可能需要特殊处理（只是潜在的 - 真的不知道）。

```
routes.IgnoreRoute("{myWebForms}.aspx/{*pathInfo}"); 
```

# iphone - 在 XCode 4 中使用 AlertView 对 TableView 单元格进行排序

> ID：11444157
> 
> 赞同：0
> 
> 时间：2012-07-12T02:11:45.283
> 
> 标签：iphone, xcode, sorting, tableview, uialertview

我在 NavigationBar 中添加了一个“排序”按钮来对 TableView 进行排序。TableView 是这样构建的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *myfile = [[NSBundle mainBundle]
                    pathForResource:@"Object" ofType:@"plist"];

    sortedObjectes = [[NSMutableArray alloc]initWithContentsOfFile:myfile];

    NSSortDescriptor * sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Popularity" ascending:YES];
    [sortedObjects sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];
    [super viewDidLoad];
 } 
```

这是排序按钮的操作：

```
- (IBAction)SortButton:(id)sender;

{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sort by" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Name", @"Country", @"Popularity", nil];                                                                                                                                   
[alert show];
[alert release];
} 
```

这是捕捉按钮点击的委托方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
    //Sort by name
    }
    else if (buttonIndex == 1)
    {
    //Sort by country
    }
    else if (buttonIndex == 2)
    {
    //Sort by popularity
    }
} 
```

如何在 ClickedButtonAtIndex 中实现 SortDescriptor 方法，并更新 TableView？

我希望 tableview 默认按受欢迎程度排序。

Plist结构（字典数组）：

```
plist version="1.0">
array>
    dict>
    key>Country /key>
    string>Italy /string>
    key>Name /key>
    string>Fezzudo /string>
            key>Popularity /key>
            integer>1 /integer>
        /dict>
   dict>
    key>Country /key>
    string>Spanin /string>
    key>Name /key>
    string>Alamos Malbec /string>
            key>Popularity /key>
            integer>2 /integer>
       /dict>
/array>
/plist> 
```

必须删除 html 代码的开头才能显示..它看起来像一团糟，所以我猜有人知道如何为我修复它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:57:59.170

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSSortDescriptor *sortDesc;
switch (buttonIndex) {
    case 0:
        return;
        break;
    case 1:
        sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES];
        break;
    case 2:
        sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Country" ascending:YES];
        break;
    case 3:
        sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"Popularity" ascending:NO comparator:^(id obj1, id obj2) { return [obj1 compare:obj2 options:NSNumericSearch]; }];
        break;
    }
    [sortedObjects sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:12:20.883

要显示超过 2 个按钮（选项），最好使用 UIACtionSheet 而不是 UIAlertView。操作表对我来说更好，因为我希望弹出菜单中最多有 10 个按钮。

# c# - 使用真实类作为超类而不是简单工厂模式中的抽象类有什么负面影响？

> ID：11444158
> 
> 赞同：1
> 
> 时间：2012-07-12T02:11:50.123
> 
> 标签：c#, design-patterns

我使用这样的简单工厂模式：

```
public class Father
{
    public virtual int field1;
    public virtual int Dosth()
    {

    }

}

public class Son:Father
{
    //inherit field1 from Father
    public override int Dosth();//override Father's method

    public string ex_field;
    public string string Ex_method()
    {
    }
}

public class Factory
{
    public static Father CreateObj(string condition)
    {
        switch(condition)
        {
            case("F"):
                return new Father();
            case("S"):
                return new Son();
            default:
                throw new exception("you have no choice");

        }

    }

} 
```

在代码中，我使用一个真正的类而不是抽象类作为工厂类。因为子类只是在父类基础中有一些扩展（大多数上下文可以使用父类）。如果父类和子类各自继承一个抽象类。类子不能继承父类的字段和方法。所以我的问题是：如果写成流，将来会发生什么不好的事情（我感觉不好但找不到更好的）？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:23:38.643

如果您的类没有那么多共同点，请使用接口并让工厂创建具有特定接口而不是特定类的对象

使用公共字段/方法创建一个接口，并让父亲和儿子都实现它：

```
public interface IFamily
{
   int field1;
   int Dosth();
}

public class Father : AbstractA, IFamily
{
   // Implementation goes here
   int field1;
   int Dosth() {
      // Do magic
   }
}

public class Son : AbstractB, IFamily
{
   // Implementation goes here
   int field1;
   int Dosth() {
      // Do magic
   }
} 
```

您的工厂将是：

```
public class Factory
{
    public static IFamily CreateObj(string condition)
    {
        switch(condition)
        {
            case("F"):
                return new Father();
            case("S"):
                return new Son();
            default:
                throw new exception("you have no choice");
        }
    }
} 
```

此实现优于创建深层继承层次结构。

# ruby-on-rails - 如何在特定时区（最好是我的应用程序的默认时区，而不是 UTC）中创建新的 DateTime 对象？

> ID：11444164
> 
> 赞同：42
> 
> 时间：2012-07-12T02:12:26.063
> 
> 标签：ruby-on-rails, datetime, ruby-on-rails-3.1, timezone

我已在`/config/application.rb`_ `DateTime`_ 我怎样才能让它在我的应用程序的时区？`.new``GMT`

**/config/application.rb**

```
config.time_zone = 'Pacific Time (US & Canada)' 
```

**irb**

```
irb> DateTime.now
=> Wed, 11 Jul 2012 19:04:56 -0700 

irb> mydate = DateTime.new(2012, 07, 11, 20, 10, 0)
=> Wed, 11 Jul 2012 20:10:00 +0000                    # GMT, but I want PDT 
```

使用`in_time_zone`不起作用，因为这只是将 GMT 时间转换为 PDT 时间，这是错误的时间：

```
irb> mydate.in_time_zone('Pacific Time (US & Canada)')
=> Wed, 11 Jul 2012 13:10:00 PDT -07:00               # wrong time (I want 20:10) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-12T02:49:56.443

您可以使用 ActiveSupport 的[TimeWithZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html) ( `Time.zone`) 对象在应用程序的时区中创建和解析日期：

```
1.9.3p0 :001 > Time.zone.now
 => Wed, 11 Jul 2012 19:47:03 PDT -07:00 
1.9.3p0 :002 > Time.zone.parse('2012-07-11 21:00')
 => Wed, 11 Jul 2012 21:00:00 PDT -07:00 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-22T22:00:12.347

没有字符串解析的另一种方法：

```
irb> Time.zone.local(2012, 7, 11, 21)
=> Wed, 07 Nov 2012 21:00:00 PDT -07:00 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-08T17:02:46.047

如果我有它，我通常只在实例化 Time.new 或 DateTime.new 时指定 utc_offset。

```
[1] pry(main)> Time.new(2013,01,06, 11, 25, 00) #no specified utc_offset defaults to system time
 => 2013-01-06 11:25:00 -0500
[2] pry(main)> Time.new(2013,01,06, 11, 25, 00, "+00:00") #UTC
 => 2013-01-06 11:25:00 +0000
[3] pry(main)> Time.new(2013,01,06, 11, 25, 00, "-08:00") #PST
 => 2013-01-06 11:25:00 -0800 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-26T15:43:00.243

如果要在与设置*不同*`config.time_zone`的本地时区创建 DateTime ：

```
la_date = ActiveSupport::TimeZone["America/Los_Angeles"].parse('2020-02-01')
DateTime.new(la_date.year, la_date.month, la_date.day, la_date.hour, la_date.min, la_date.sec, la_date.zone) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-11T20:51:14.673

这也可以在 DateTime 类中通过包含时区来实现。

```
2.5.1 :001 > require 'rails'
 => true
2.5.1 :002 > mydate = DateTime.new(2012, 07, 11, 20, 10, 0)
 => Wed, 11 Jul 2012 20:10:00 +0000
2.5.1 :003 > mydate = DateTime.new(2012, 07, 11, 20, 10, 0, "PST")
 => Wed, 11 Jul 2012 20:10:00 -0800 
```

或者

[https://docs.ruby-lang.org/en/2.6.0/DateTime.html](https://docs.ruby-lang.org/en/2.6.0/DateTime.html)

```
2.6.0 :001 > DateTime.new(2012, 07, 11, 20, 10, 0, "-06")
 => Wed, 11 Jul 2012 20:10:00 -0600
2.6.0 :002 > DateTime.new(2012, 07, 11, 20, 10, 0, "-05")
 => Wed, 11 Jul 2012 20:10:00 -0500 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T02:22:40.303

我在 ApplicationController 中执行以下操作以将时区设置为用户的时间。

我不确定这是否是你想要的。

```
class ApplicationController < ActionController::Base
  before_filter :set_timezone
  def set_timezone
    # current_user.time_zone #=> 'London'
    Time.zone = current_user.time_zone if current_user && current_user.time_zone
  end

end 
```

# android - 在android中编译boost时出错

> ID：11444169
> 
> 赞同：5
> 
> 时间：2012-07-12T02:14:32.837
> 
> 标签：android, c++, boost

我正在尝试根据[this](https://groups.google.com/forum/?fromgroups#!topic/android-ndk/cVWzSa2kfuw)将boost 1.5安装到android中。

当我编译时，我得到一个错误。这是编译错误的片段：

```
gcc.compile.c++ bin.v2/libs/thread/build/gcc-android4.4.3/release/link-static/runtime-link-    static/threading-multi/pthread/thread.o
<command-line>: warning: "BOOST_FILESYSTEM_VERSION" redefined
<command-line>: warning: this is the location of the previous definition
In file included from ./boost/thread/thread.hpp:17,
             from libs/thread/src/pthread/thread.cpp:11:
./boost/thread/pthread/thread_data.hpp: In member function 'void    boost::thread_attributes::set_stack_size(size_t)':
./boost/thread/pthread/thread_data.hpp:42: error: 'PAGE_SIZE' was not declared in this scope

"../../toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic --sysroot=../../platforms/android-9/arch-arm -mthumb -Os -fno-strict-aliasing -O2 -DNDEBUG -g -lstdc++ -I../../sources/cxx-stl/gnu-libstdc++/include -I../../sources/cxx-stl/gnu-libstdc++/libs/armeabi/include -D__GLIBC__ -DBOOST_NO_INTRINSIC_WCHAR_T -DBOOST_FILESYSTEM_VERSION=2 -pthread -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_CHRONO_STATIC_LINK=1 -DBOOST_FILESYSTEM_VERSION=3 -DBOOST_SYSTEM_NO_DEPRECATED -DBOOST_SYSTEM_STATIC_LINK=1 -DBOOST_THREAD_BUILD_LIB=1 -DBOOST_THREAD_POSIX -DNDEBUG  -I"." -c -o "bin.v2/libs/thread/build/gcc-android4.4.3/release/link-static/runtime-link-static/threading-multi/pthread/thread.o" "libs/thread/src/pthread/thread.cpp"

...failed gcc.compile.c++ bin.v2/libs/thread/build/gcc-android4.4.3/release/link-static/runtime-link-static/threading-multi/pthread/thread.o... 
```

我发现了这个我不明白的错误......

`./boost/thread/pthread/thread_data.hpp:42: error: 'PAGE_SIZE' was not declared in this scope`. 它说`PAGE_SIZE`没有声明，但我不知道这是什么意思。当我试图查看代码中的那个特定位置时，我没有找到`PAGE_SIZE`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T14:24:51.247

1.50 boost, ndk-r8b 有这个问题。

感谢这个线程，我设法通过以下更改修复它：

文件 boost/thread/thread.hpp

```
// Fix for missing macro
#define PAGE_SIZE sysconf(_SC_PAGESIZE)

#include <boost/thread/pthread/thread_data.hpp> 
```

请注意，自 1.50 提升以来，我还需要更改此设置：

文件 boost/libs/filesystem/src/operations.cpp

```
# ifdef BOOST_POSIX_API

    const fs::path dot_path(".");
    const fs::path dot_dot_path("..");
#   include <sys/types.h>
#   include <sys/stat.h>
#   if !defined(__APPLE__) && !defined(__OpenBSD__) && !defined(ANDROID)
#     include <sys/statvfs.h>
#     define BOOST_STATVFS statvfs
#     define BOOST_STATVFS_F_FRSIZE vfs.f_frsize
#   elif defined (ANDROID)
#     include <sys/vfs.h>
#     define BOOST_STATVFS statfs
#     define BOOST_STATVFS_F_FRSIZE static_cast<boost::uintmax_t>(vfs.f_bsize)
#   else
#     ifdef __OpenBSD__
#     include <sys/param.h>
#     endif
#     include <sys/mount.h>
#     define BOOST_STATVFS statfs
#     define BOOST_STATVFS_F_FRSIZE static_cast<boost::uintmax_t>(vfs.f_bsize)
#   endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T02:37:08.397

像这样的编译错误通常可以通过首先查看预处理输出来解决。尝试替换`-c`并`-E`更改`foo.o`to `foo.pp`（或其他内容）并查看`foo.pp`文件是否有错误（搜索`set_stack_size`）。

这是相关代码：

```
 void set_stack_size(std::size_t size) BOOST_NOEXCEPT {
          if (size==0) return;
          std::size_t page_size = getpagesize();
#ifdef PTHREAD_STACK_MIN
          if (size<PTHREAD_STACK_MIN) size=PTHREAD_STACK_MIN;
#endif
          size = ((size+page_size-1)/page_size)*page_size; 
```

`getpagesize()`扩展到引用的东西`PAGE_SIZE`。我很确定`sysconf`这些天是获取页面大小的正确方法（tm），但 boost 维护者可能有充分的理由使用`getpagesize()`. `-DPAGE_SIZE=2048`无论如何，您可以使用编译器参数或目标的页面大小来避开此特定错误。要么，要么修补要使用的源`sysconf(_SC_PAGESIZE)`。

# ruby-on-rails - 在heroku cedar上部署redmine

> ID：11444170
> 
> 赞同：11
> 
> 时间：2012-07-12T02:14:46.013
> 
> 标签：ruby-on-rails, heroku, redmine, cedar

我一直在努力尝试在heroku cedar上部署redmine 2.0.3。

我在使用 sqlite gem 进行部署时遇到了很多问题，所以我从我的 Gemefile 中删除了所有 sqlite 引用，删除了 Gemfile.lock，运行 bundle install，并愉快地推送到 heroku。

我跑了`heroku run rake db:migrate`，浏览了我的应用程序（[http://blooming-river-8784.herokuapp.com/](http://blooming-river-8784.herokuapp.com/)），我看到以下内容：

更新！！-> 当我运行时，`heroku run rake db:migrate`我收到以下警告消息：

```
Running rake db:migrate attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
Plugins in vendor/plugins (/app/vendor/plugins) are no longer allowed. Please, put your Redmine plugins in the `plugins` directory at the root of your Redmine directory (/app/plugins)

Application Error
An error occurred in the application and your page could not be served. Please try again in a few moments.
If you are the application owner, check your logs for details. 
```

我检查了日志，并看到以下消息：

```
2012-07-12T01:34:47+00:00 heroku[run.1]: Starting process with command bundle exec rake db:migrate  
2012-07-12T01:34:47+00:00 heroku[run.1]: State changed from starting to up  
2012-07-12T01:34:53+00:00 heroku[run.1]: Process exited with status 1  
2012-07-12T01:34:53+00:00 heroku[run.1]: State changed from up to complete
2012-07-12T01:36:03+00:00 heroku[router]: Error H10 (App crashed) -> GET blooming-river-8784.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

我用谷歌搜索了最后一行但没有成功。所以这就是为什么我在这里发帖希望有人能提供帮助:)

这是我的 Gemfile

```
source 'http://rubygems.org'

gem 'rails', '3.2.6'  
gem 'prototype-rails', '3.2.1'  
gem "i18n", "~> 0.6.0"  
gem "coderay", "~> 1.0.6"  
gem "fastercsv", "~> 1.5.0", :platforms => [:mri_18, :mingw_18, :jruby]  
gem "builder"  

# Optional gem for LDAP authentication
group :ldap do  
  gem "net-ldap", "~> 0.3.1"  
end  

# Optional gem for OpenID authentication  
group :openid do  
  gem "ruby-openid", "~> 2.1.4", :require => "openid"  
  gem "rack-openid"  
end  

# Database gems  
platforms :mri, :mingw do  
  group :postgresql do  
    gem "pg", ">= 0.11.0"  
  end  
end  

platforms :jruby do  
  gem "jruby-openssl"  

  group :postgresql do  
    gem "activerecord-jdbcpostgresql-adapter"  
  end  
end  

group :development do  
  gem "rdoc", ">= 2.4.2"  
  gem "yard"  
end  

group :test do  
  gem "shoulda", "~> 2.11"  
  gem "mocha"  
end  

local_gemfile = File.join(File.dirname(__FILE__), "Gemfile.local")  
if File.exists?(local_gemfile)  
  puts "Loading Gemfile.local ..." if $DEBUG # 'ruby -d' or 'bundle -v'
  instance_eval File.read(local_gemfile)  
end  

# Load plugins' Gemfiles  
Dir.glob File.expand_path("../plugins/*/Gemfile", __FILE__) do |file|  
  puts "Loading #{file} ..." if $DEBUG # 'ruby -d' or 'bundle -v'  
  instance_eval File.read(file)  
end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T11:37:19.877

我正在尝试同样的问题。

问题来自这里：

[https://github.com/redmine/redmine/commit/6fca0289055fae8f066eeb493a590b35e6f26cc0](https://github.com/redmine/redmine/commit/6fca0289055fae8f066eeb493a590b35e6f26cc0)

看起来新插件的警告不仅仅是一个警告，它退出了应用程序。如果您在 app/vendor/plugins 中没有任何插件也没关系，因为 heroku 在您推送时添加它们（在我的情况下，它是添加 rails_log_stdout、rails31_enable_runtime_asset_compilation 和 rails3_serve_static_assets）。

目前最简单的修复方法是注释或删除 config/environment.rb 中的“exit 1”行。看起来一切正常。我猜这个警告和退出只是某种硬性弃用警告，但代码仍然可以使用这些插件运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:07:26.530

我在我的博客中写了一篇关于如何逐步将 redmine 2 部署到 heroku 的文章：[如何将 redmine 部署到 heroku](http://www.google.by/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDIQFjAB&url=http%3A%2F%2Frailsguides.net%2F2012%2F04%2F28%2Fhow-to-deploy-redmine-to-heroku%2F&ei=lMRsUMPNKKag4gSa6oHYCw&usg=AFQjCNFRk9XEBOud5LPHtTOeH5e2iZKcfQ&sig2=5t1QAaA3Dx1QD1k9FywhSA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:25:47.787

```
 gem 'taps'  #Please add to Gemfile. 
```

# php - PHP 转 JSON 格式

> ID：11444171
> 
> 赞同：0
> 
> 时间：2012-07-12T02:14:50.997
> 
> 标签：php, json

我得到的 JSON 格式是：

```
{
    "test":[
        {"key1":"value1"},
        {"key2":"value2"}
     ]
} 
```

但是是否有可能获得这种格式呢？

```
{
    "test": {
        "key1":"value1",
        "key2":"value2"
    }
} 
```

我的php代码是这样的：

```
$key=$row[1];
$value=$row[2];
$posts[] = array($key => $value);

$response['strings'] = $posts;
fwrite($out, json_Encode($response)) 
```

我已经坚持了几个小时，请有人帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:18:05.227

你要

```
$posts[$key] = $value; 
```

问题是带有字符串键的 PHP 数组是 JSON 术语中的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:18:08.920

第一个是数组，第二个是对象。

```
$posts = new stdClass();
$posts->key1 = "value1";
$posts->key2 = "value2";

$response['strings'] = $posts;
fwrite($out, json_Encode($response)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T02:18:15.180

我假设您的代码如下所示：

```
$posts = array();
while( somthing )
{
  $row = ...

  $key=$row[1];
  $value=$row[2];
  $posts[] = array($key => $value);
}

$response['strings'] = $posts;
fwrite($out, json_Encode($response)) 
```

您的解决方法是这样做：

```
$posts = array();
while( somthing )
{
  $row = ...

  $key=$row[1];
  $value=$row[2];
  $posts[$key] = $value;
}

$response['strings'] = $posts;
fwrite($out, json_Encode($response)) 
```

# python - 嵌入式python中的双打

> ID：11444173
> 
> 赞同：1
> 
> 时间：2012-07-12T02:15:30.353
> 
> 标签：python, python-c-api

所以我正在编写一组运行 Python 脚本的 C++ 类。我已经让代码可以从指定的目录运行我想要的任何脚本，并且我可以很好地传递和返回值。

但是我遇到的一个问题是我似乎无法找到如何将 Python 设置为双打。例如，当我使用长值时，我可以使用“PyLong_AsLong([我试图从 PyObject 转换为长值的任何值])”——但是我可以使用 Python/C API 中的 PyDouble_Something为了那个原因？我的谷歌搜索到目前为止一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:18:50.393

你想要[PyFloat_AsDouble](http://docs.python.org/c-api/float.html#PyFloat_AsDouble)，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:37:38.187

我找到了答案。我错了，我认为 Python 中有双精度数，但实际上没有。我使用“PyFloat”对象让它工作，并像这样转换双精度：

“PyFloat_FromDouble（[我想要作为 PyObject 的双精度]）”

# c# - SharePoint Web 服务 Lists.GetListCollection 未返回所有列表

> ID：11444178
> 
> 赞同：0
> 
> 时间：2012-07-12T02:15:39.980
> 
> 标签：c#, xml, vb.net, web-services, sharepoint

我正在使用 SharePoint 的列表 Web 服务，我尝试了 GetListCollection，但它没有返回所有列表。这是我的代码（SBALists 是我的网络参考名称）：

```
Dim Lists As New SBALists.Lists
Lists.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials
Dim Result As XmlElement = Lists.GetListCollection
Dim XR As New XmlTextReader(Result.OuterXml, XmlNodeType.Element, Nothing)
Dim DS As New DataSet
DS.ReadXml(XR)
DataGridView1.DataSource = DS.Tables(0) 
```

我还尝试为凭据传递我的用户名/密码，但没有改变结果。

```
Dim Cred As New Net.NetworkCredential("username", "password")
Lists.Credentials = Cred 
```

知道为什么有些列表没有返回吗？

*编辑

![公告和链接返回正常。 项目队列没有。](../Images/93d1be73cdd4a9b736b2cbcbf7cc6904.png)

# iphone - 向服务器发出请求时如何将数组作为参数传递，iphone

> ID：11444182
> 
> 赞同：1
> 
> 时间：2012-07-12T02:16:17.547
> 
> 标签：iphone, nsurlrequest

**给定**：

```
a chunk of books and each book will associated with unique id 
```

**场景**：

```
user can order more than one book 
```

**目标**：

```
 making an NSMutableURLRequest and send this request to server and let server know which books 
    are being picked 
```

**问题**：

```
 For example, user A will choose 3 books whose id are a, b ,c. How can I send an array 
  containing with these id in the request so that server can know that user A are ordering these books 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:24:15.277

取决于您的服务器期望的格式，例如，如果您使用 RESTful，那么您将不得不在 post 或 get 之间进行选择，并基于该构建您的查询。如果您确实使用了 restful，那么请使用 RestKit API 并使用 params 属性。（或者您可以直接使用基本的 ios api 自己构建它们）。您也可以以 JSON 格式发送数据，但服务器必须知道如何解析它。

# sudo - JSch：须藤 有时不工作

> ID：11444183
> 
> 赞同：1
> 
> 时间：2012-07-12T02:16:23.397
> 
> 标签：sudo, jsch

我有三台机器，我需要`ssh`一个接一个，然后 sudo 一个命令。

我需要 JSch 来做以下事情：

```
ssh <user>@<machine>
sudo <some command> 
```

这是我用来运行 JSch 的代码块：

```
String homeFolder = System.getProperty("user.home");
JSch jsch = new JSch();
jsch.addIdentity(homeFolder + "/.ssh/id_rsa.pub");
jsch.setKnowHosts(homeFolder + "/.ssh/known_hosts");

final Session session = jsch.getSession(user, machine);
session.connect();

StringBuilder response = new StringBuilder();
try {
    final Channel channel = session.openChannel("exec");
    ((ChannelExec) channel).setCommand("sudo /etc/init.d/eedir status")
    channel.connect();

    try {
        InputStream in = channel.getInputStream();
        OutputStream out = channel.getOutputStream();

        out.write((password + System.getProperty("line.separator")).getBytes());

        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line = null;
        while (null != (line = reader.readLine())) {
            System.out.println(line);
        }
    } finally {
        channel.disconnect();
    }
} finally {
    session.disconnect();
} 
```

我的问题是我可以成功地使用这个程序在我拥有的三台机器中的两台上获取 eedir 服务的状态，但不是最后一台。

我可以使用给定的用户名 ssh 到远程机器，然后直接运行这个命令：

```
sudo /etc/init.d/eedir status 
```

ssh 中使用的用户名已经在我的`/etc/sudoers`.

所以，我的问题是：

1.  为什么 JSch 可以在三台机器中的两台上运行这个程序，而另一台不能？sudoers 的配置在这些机器上完全相同。

2.  还有一个问题是：为什么我在sudoers中配置了当前用户，而JSch sudo需要在程序中输入密码，为什么真机上的sudo不需要再次输入密码就可以运行？

任何方向都非常感谢。如果在我目前的情况下可能有一些潜在的错误，欢迎大家指出。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:57:19.187

1.  您从故障机器上的 jsch sudo 尝试得到什么输出？要获得您可能需要的错误输出：

    ```
    (ChannelExec)commandChannel.getErrStream(); 
    ```

    ssh 服务器可能有不同的设置。在我的服务器上，您需要 pty：

    ```
    (ChannelExec)commandChannel.setPty(true);
    (ChannelExec)commandChannel.setPtyType("VT100"); 
    ```

2.  通常，您只需在每个会话中输入一次密码即可使用 sudo。也许在真机上你已经执行了一次 sudo 并且没有注销。上面的代码每次都会重新连接，所以每次都需要发送密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T09:28:54.463

我在 CentOS 上遇到了同样的问题。
通过1) 在通道上执行 setCommand 后解决它：

```
((ChannelExec) channel).setPty(true); 
```

2) 确保您最终有 block/s 来关闭输入流、通道和会话

注意：如果用户不需要密码，则不需要打开输出流（与上面示例中显示的不同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:18:57.493

迄今为止的[最新版本](http://www.jcraft.com/jsch/)`sudo`有一个使用远程主机上的命令的示例 java 类。下载项目**.zip**文件和**.jar**文件，因为它们是分开的，原因只有上帝知道！

# java - 编程风格：尝试 Catch 和外部依赖

> ID：11444186
> 
> 赞同：3
> 
> 时间：2012-07-12T02:17:11.197
> 
> 标签：java

我有一个简单的风格问题。在我正在编写的应用程序中，有几个类方法包括 try/catch 块以及取决于块结果的块外部函数。例如（在伪代码中）：

```
try {
   start_transaction;
   persist_data;
   stop_transaction;
}
catch {
   rollback_transaction;
}
finally {
}

if (transaction_successful)
   send_message; 
```

我能想到的测试事务是否成功的唯一方法是在 try catch 块中设置一个方法变量标志，然后在 if 语句中对其进行测试。当然这会起作用，但是我很想知道传统的“智慧”是什么？也许“send_message”应该在try catch块中，尽管这可能是不必要的混乱？我想这是一个相当直截了当的问题 - 只是试图确保我的代码结构良好/组织良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T02:30:12.657

看来您需要更多地考虑软件的正确分层/增加此类/方法的凝聚力。从提供的示例看来，这里您有 DAL/业务层组合（持久性 + 一些业务活动），这是您需要在 catch 块之后以相同方法对事务结果做出反应的主要原因。

通过适当的分层，它可能如下所示：

*   持久性失败，您通过向调用层抛出检查/运行时异常来指示这一事实（由您决定如何准确指示失败，取决于您的架构方法），
*   调用类捕获异常并进行错误处理 - 或在调用“**持久**”方法之后立即在相应的**尝试**块中发送消息

 **当然，您可以设置标志（如您所建议的那样）并使用 AOP 建议来处理这种情况（尤其是如果**'send_message'**是辅助功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:19:44.620

`try`将它放在块中会很简单。“杂乱的代码”是个人喜好的问题，但这使事情变得简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T02:22:30.447

假设（*尽管这在您的代码中看起来很明显*）当且仅当事务成功时您才尝试发送消息，我认为将其作为 try 块本身的一部分是有意义的。

在我看来，这不会是“不必要的混乱”，因为消息需要在成功时发送。如果即使交易失败，消息也有部分要发送，那么保留标志并跟踪交易状态显然是有意义的（*并相应地修改您的消息*）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T02:22:56.387

将它放在`try`块内，但万一在执行时抛出异常`send_message`，最好有自己的`catch`块 - 这是通过指定适当的异常类来完成的。**

# css - HTML/CSS 嵌套问题

> ID：11444193
> 
> 赞同：1
> 
> 时间：2012-07-12T02:18:37.040
> 
> 标签：css, html, tags, nested

我希望“辅助功能”链接只是纯文本，例如“欢迎访问我的网站！” 但它一直采用我为标签设置的属性。这是我第一次建立一个网站，所以如果你有关于我的代码外观的提示，我愿意接受建议。谢谢你！

[http://jsfiddle.net/kSNmS/1/](http://jsfiddle.net/kSNmS/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:21:52.753

如何在导航链接上使用一个类，并以这种方式定位它们？

[http://jsfiddle.net/kSNmS/4/](http://jsfiddle.net/kSNmS/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:22:25.267

最简单的解决方案是更改 `<a>`标签的 CSS 特性。这是一篇关于 CSS 特异性的文章，可能会对您有所帮助：http: [//www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)。

因此，要实现您想要的，请更改以下内容

```
a
{ 

    float:left;
    font-family: 'Alike', serif;
    width:17.50em;
    text-decoration:none;
    color:green; 
    background-color:silver;
    letter-spacing:5px;
    padding:0.5em 0.9em;
    border-width: 3px 1.5px 3px 1.5px   
} 
```

更具体的东西，比如

```
ul a
{ 

    float:left;
    font-family: 'Alike', serif;
    width:17.50em;
    text-decoration:none;
    color:green; 
    background-color:silver;
    letter-spacing:5px;
    padding:0.5em 0.9em;
    border-width: 3px 1.5px 3px 1.5px   
} 
```

# php - 如果搜索到的号码在 MySQL 数据库中存在，则转到某个链接

> ID：11444198
> 
> 赞同：0
> 
> 时间：2012-07-12T02:19:08.427
> 
> 标签：php, mysql

我有一家公司，我们向人们开具发票。然后我上传这张带有“TicketNumber”和“日期”的发票

我想做的事情在逻辑上相当简单，但我的思绪无法围绕 MySQL 进行，我找不到我想做的教程。

我创建了一个类似于搜索的表单，它需要“搜索票号”并将其提交给“proceed.php”

如果在我的数据库中找到票号，并且提交的票号日期相对于我提交的日期和时间小于当前时间的 72 小时，则转到链接 A，如果其大于 72 小时，则转到链接 B，如果搜索没有找到任何东西转到链接 C，

如果它很复杂，我不希望任何人为我写出来，但也许会指导我想要我想做的教程或告诉我我应该寻找什么。但是，如果您愿意为我编写脚本，以便我可以看到我应该做的事情，那将非常感激。

现在这就是我的proceed.php文件中的内容：

```
<?
$username="data";
$password="data1";
$database="data";

$TicketNumber=$_POST['TicketNumber'];

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$query="SELECT * FROM plate";
$result=mysql_query($query);

$num=mysql_numrows($result);

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:24:56.277

你可以这样做：

```
while($row = mysql_fetch_array($result))
  {
   if($row['ticketId'] == n)
       /* do the following */
  } 
```

因此，如果勾选的 id 与正在搜索的 ID 匹配，您可以对其进行处理。并且不要忘记在使用 break 语句找到循环时退出循环；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:30:10.473

```
$query = "SELECT date, TicketNumber FROM invoices WHERE TicketNumber=";
$query = $query.$TicketNumber;
$result = mysql_query($query);
if(mysql_num_rows($result) == 0)
{
    // Do link C
}
while ( $row = mysql_fetch_array($result) )
{
    if ( calculate 72 hours against date in this row )
    {
        // Do stuff
    }
    else
    {
        // Do other stuff
    }
} 
```

然后对于时间部分，我发现了这个： [Calculate elapsed time in php](https://stackoverflow.com/questions/7850259/calculate-elapsed-time-in-php)

那么你所要做的就是

我不是 PHP 专家，但我希望它有所帮助。

编辑：在 SO 上格式化的分隔连接。编辑：另外，我不能说足够重要的用户输入清理。如果您不清理输入，任何人都可能弄乱您的数据库或访问您不希望他们访问的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:50:03.463

使用 MySQL 的`DATEDIFF()`函数，您可以计算提交票证的时间与今天之间的日期差。

```
<?php
$username="data";
$password="data1";
$database="data";
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

// get and 'validate" the ticketNumber
$ticketNumber = (isset($_POST['ticketNumber']) && is_numeric($_POST['ticketNumber'])) ? (int)$_POST['ticketNumber'] : 0;

// build the MySQL query selecting the number of days between today (NOW()) and the ticket's date
$sql = 'SELECT DATEDIFF(date, NOW()) AS daysElapsed FROM invoices WHERE TicketNumber = ' . $ticketNumber;
if (($result = mysql_query($query)) && (mysql_num_rows($result) > 0)) {
    // we only want a single row/ticket, so no need to loop
    $row = mysql_fetch_array($result);
    $location = '/link_b.php';
    if ($row[0] <= 3) {
        // less than 3 days, or 72 hours
        $location = '/link_a.php';
    }
    mysql_close();
    header('Location: ' . $location);
    die();
} else {
    header('Location: /link_c.php');
    die();
}

?> 
```

对于今天的日期，我会`NOW()`专门使用 MySQL，因为您要求两个日期之间的“小时”。如果您需要几天而不是几小时，您可以使用`NOW()`PHP`date('Y-m-d')`或 MySQL 替代方案，尽管它`NOW()`似乎可以根据您的需要工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T02:53:51.383

小心在查询字符串中直接使用来自 $_POST 的值（并且“小心”，我的意思是避免它就像这是你的工作，因为它是。熟悉（[这个概念](http://en.wikipedia.org/wiki/SQL_injection)。

我首选的构建查询的方法是使用准备好的语句。这是目前最安全的方法。建议您研究一种更新的与 SQL 对话的方式（mysql_ 函数现在已经过时，有利于[MySQLi](http://www.php.net/manual/en/book.mysqli.php)）。这里的许多人更喜欢[PHP 数据对象 (PDO)](http://us.php.net/manual/en/book.pdo.php)。至少，您应该“转义”用户提供的字符串：

```
$username="data";
$password="data1";
$database="data";

$mysqli = new mysqli("localhost", $username, $password, $database);

// Do this if it's a string:    
// $ticketNumber = $mysqli->real_escape_string($_POST['TicketNumber']);
// since it should be an int, we can do better: 
$ticketNumber = intval($_POST['TicketNumber']);

$results = $mysqli->query("SELECT * FROM plate WHERE ticket_number = $ticketNumber");
if( ! $results->num_rows) {
  header("Location: /scriptC.php");
  die();
}
$ticket = $results->fetch_assoc();
$ticketTime = strtotime($ticket['date']);
$requestTime = strtotime($_POST['date']);

if(($requestTime - $ticketTime) < 72*60*60) {
  header("Location: /scriptA.php");
  die();
} 
header("Location: /scriptB.php");
die();

$mysqli->close(); 
```

# iphone - 滚动地图后解锁缩放

> ID：11444202
> 
> 赞同：1
> 
> 时间：2012-07-12T02:19:28.893
> 
> 标签：iphone, ios, xcode

我有这两种方法可以用来锁定用户在地图中的位置，而且效果很好……

但是，我想它工作得很好，哈哈，每当我用户移动地图以查看地图上的其他位置时......它会迫使用户回到当前位置所在的位置。

所以我想我的问题是，如何在用户滚动地图后禁用对用户位置的锁定。

```
- (void)viewDidLoad {

     // more code here that i didn't post

     [self.mapView.userLocation addObserver:self 
                            forKeyPath:@"location" 
                       options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld) 
                       context:NULL];
    }

- (void)observeValueForKeyPath:(NSString *)keyPath  
                  ofObject:(id)object  
                    change:(NSDictionary *)change  
                   context:(void *)context {  

    if ([self.mapView showsUserLocation]) {  

    MKCoordinateRegion region;
    region.center = self.mapView.userLocation.coordinate;  

    MKCoordinateSpan span; 
    span.latitudeDelta  = 1; // Change these values to change the zoom
    span.longitudeDelta = 1; 
    region.span = span;

    [self.mapView setRegion:region animated:YES];
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:54:24.193

好的，所以我想我想通了...我目前在上面做的方式似乎很困难...在iOS 5中，他们允许使用这种方法，而且效果很好

```
[mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES]; 
```

# python - 在excel中使用pywin32设置单元格的填充RGB颜色？

> ID：11444207
> 
> 赞同：4
> 
> 时间：2012-07-12T02:20:37.920
> 
> 标签：python, excel, pywin32

我避免使用任何其他模块集。

我要做的是使用 pywin32 库在 Excel 中设置单元格的颜色。到目前为止，我已经找到了如何获取单元格颜色：

```
print xl.ActiveSheet.Cells(row, column).interior.color 
```

您可以通过以类似方式分配它来简单地设置它：

```
xl.ActiveSheet.Cells(row, column).interior.color = 0 #black 
```

**我的问题是如何在 RGB 中设置单元格的颜色？**

我需要一个叫做 ColorTranslator to OLE 的东西，但我不知道如何访问`system.drawing`，因为它看起来像是一`.NET`件事。[http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.tool.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.toole.aspx)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T04:47:47.097

internal.color 需要 BGR 中的十六进制值。如果您想以 RGB 形式指定，可以使用下面的代码。

```
def rgb_to_hex(rgb):
    '''
    ws.Cells(1, i).Interior.color uses bgr in hex

    '''
    bgr = (rgb[2], rgb[1], rgb[0])
    strValue = '%02x%02x%02x' % bgr
    # print(strValue)
    iValue = int(strValue, 16)
    return iValue

ws.Cells(1, 1).Interior.color = rgb_to_hex((218, 36, 238)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-24T17:04:59.177

Excel 可以使用由公式 Red + (Green * 256) + (Blue * 256 * 256) 计算的整数

```
def rgbToInt(rgb):
    colorInt = rgb[0] + (rgb[1] * 256) + (rgb[2] * 256 * 256)
    return colorInt

ws.Cells(row,col).Font.Color = rgbToInt((255,255,128)) 
```

# javascript - 文件加载时的事件

> ID：11444209
> 
> 赞同：0
> 
> 时间：2012-07-12T02:20:49.750
> 
> 标签：javascript, dom

下面的代码在页面上运行：

```
(function() {
  function asyncLoad() {
    var urls = ["https://something.com/script.js"];
    for (var i = 0; i < urls.length; i++) {
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = urls[i];
      var x = document.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    }
  }
  window.attachEvent ? window.attachEvent('onload', asyncLoad) : window.addEventListener('load', asyncLoad, false);
})();
//]]> 
```

我需要一个事件监听器，当这个文件在 DOM 中可用时触发。

我需要利用这个脚本中的变量。

我需要知道何时`https://something.com/script.js`加载，如果没有加载，我希望启动备份。如果文件在指定的时间段内未加载，则可能会发生这种情况。

或者，我可以在 script.js 文件中的变量可用时使用事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:29:53.953

例如，如果您`script.js`有一个功能：`function a()`那么您可以像这样捕获它何时可用

```
var checkScript = function(){
   if (typeof a  === "function"){
      //fire event
   }else{
      setTimeout(checkScript, 1000);
   }
}
checkScript (); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:38:17.507

脚本元素支持加载事件，因此您应该在将脚本元素插入 DOM 之前在脚本元素上设置监听器，例如

```
 s.src = urls[i];

  s.onload = asyncLoad; // add load listener

  var x = document.getElementsByTagName('script')[0];
  x.parentNode.insertBefore(s, x); 
```

如果您想知道它是否成功到达，请使用 XMLHttpRequest 获取内容，然后将其分配给脚本元素的*text*属性。这样您就可以知道脚本是否被检索，在失败的情况下设置超时并采取纠正措施，同时不锁定浏览器。

# jquery - jQuery 验证失败，除非调用 $('#form').valid()

> ID：11444210
> 
> 赞同：1
> 
> 时间：2012-07-12T02:20:58.740
> 
> 标签：jquery

我有一个使用大量 jQuery 的大型应用程序，我今天在测试中遇到了一个页面，但无法正确验证。我已经保存了页面的副本并删除了所有其他 jQuery，除了用于验证我遇到问题的单个字段的代码。

在以下代码中，它可以完美运行：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnSave').click(function (e) { validateRegisterForm(e); });
    });

    function validateRegisterForm(e) {

        $('#EMasterForm').validate();
        alert('validation result is : '+ $('#EmasterForm').valid());
        $('#txtMaxCommute').rules                 
            ('add', { 
                required: true, 
                minlength: 2,
            }); // end of rules(add) function call

            if ($('#EmasterForm').valid() == false) {
                e.preventDefault();
        }
    }

</script> 
```

但是，如果我注释掉警报，它就不起作用。并且警报始终显示值“真”。

这对我来说似乎是一个愚蠢的问题。但我还有 50 个其他页面像发条一样进行验证。我在这个方面做得不够。我们到处都在使用 jquery 进行各种操作。但是这一页是行不通的。

任何人都可以解释为什么警报会使其起作用吗？我很高兴被回答这个问题的人责备:)

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:44:49.370

我假设你有 btnSave 作为提交按钮。

您正在尝试绑定提交按钮的 validate onclik。所以在点击提交事件时没有做任何验证，这就是你需要再次调用 .valid() 的原因。

我建议只是移动 **$('#EMasterForm').validate();** 和规则相关的代码在点击之外，你不需要在点击事件上绑定任何东西。

只需执行以下操作，您就完成了。

```
 $(document).ready(function () {
        $('#EMasterForm').validate();
        $('#txtMaxCommute').rules                 
            ('add', { 
                required: true, 
                minlength: 2,
            }); // end of rules(add) function call
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:16:44.753

jQuery 验证函数和所有其他函数需要在 DOM 就绪时进行初始化。如上所述 $('#YOUR_FORM_ID').validate(); 应该在 Document ready 中调用。查看演示，它一定会对您有所帮助。

[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

# c# - 在 C# 中实现函数树

> ID：11444217
> 
> 赞同：2
> 
> 时间：2012-07-12T02:21:44.323
> 
> 标签：c#, math, tree

想象一下，您有一个[函数树](http://upload.wikimedia.org/wikipedia/commons/7/77/Genetic_Program_Tree.png)，其中有许多节点，这些节点可以是**运算符节点**（一元或二元运算符），也可以是**终端节点**（常量）。

我刚刚开始将手指放在键盘上，但遇到了一个小障碍。我创建了一个接口`Node`、、、`Operator:Node`和`BinaryOperator:Operator`构造。`UnaryOperator:Operator``Terminal:Node`

我的问题在这里。我现在是否为每个可预见的功能创建一个单独的类？我要创建一个`SinOperator:UnaryOperator`等等`CosOperator:UnaryOperator`吗`AddOperator:BinaryOperator`？如果您包括正向和反向三角函数及其双曲表亲，则可以考虑很多。

或者，我可以将它留在二元和一元运算符，并传入一个委托，该委托根据其子节点评估该节点的值。

```
var sinOperator = new UnaryOperator(
                    childNode,
                    delegate()
                    {
                      return Math.Sin(childNode.GetValue());
                    }); 
```

但是实际上并没有什么能阻止我在代表中放入各种疯狂的东西，打破了它只是一个操作员的整个概念。

*注意：是的，我意识到只有几个**运算符**（+-*/^√），而 sin/cos 实际上是**函数**……但出于本项目的目的，我们可以假设它是一个运算符*

那么你将如何在 C# 中构造它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:37:00.480

为什么不看看[Linq.Expressions](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx)是如何工作的？它是 C# 中这种（以及整个 .NET 语言）的现有模型。

在这里，您有一个[很好的](http://blogs.southworks.net/dgeffner/2011/09/26/implementing-complex-case-analysis/)使用 Linq.Expressions 实现的派生程序示例（您可以检查它如何处理运算符、正弦、余弦等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:40:47.997

让我们尝试定义`SinOperator:UnaryOperator`

假设你已经做了`GetValue`virtual on `Node`，`SinOperator`应该只提供一个实现，`GetValue`它通过对通过计算它期望的单个子节点获得的操作数进行操作来计算一个数字的 Sin。

“计算单个子节点”的任务对于每个节点都是多余的`UnaryOperator`，因此本质上应该属于`UnaryOperator`类，并且`SinOperator`本身必须覆盖一个`Eval`接受单个`double`参数并返回的方法`double`。

```
abstract class UnaryOperator:Operator //specializes GetValue
{
    //....Rest of the implementatiom
    //....
    public sealed override double GetValue()
    {
        return Eval(_childNode.GetValue());  
    }

    protected abstract double Operate(double arg);
}

class SinOperator:UnaryOperator
{
    public override double Eval(double arg)
    {
        return Math.Sin(arg);          
    }    
} 
```

请注意 SinOperator 如何偏离节点“以特殊方式获取价值”的目标。相反，它已将其职责转变为“评估价值”。这是一个全新的职责，似乎不属于原来的继承链。

那么该怎么做呢？答案是组合（可以看作 UnaryOperator '具有'算法来计算一元函数）。

```
interface UnaryFunction
{
   double Eval(double arg);
}

class UnaryOperator:Operator //specializes GetValue
{
    private UnaryFunction _evaluator; //For Sin this is SinFunction

    //....Rest of the implementatiom
    //....
    public sealed override double GetValue()
    {
        return _evaluator.Eval(_childNode.GetValue());  
    }
}

class SinFuntion:UnaryFunction
{
    public override double Eval(double arg)
    {
        return Math.Sin(arg);          
    }    
} 
```

又如何获得 SinOperator？我建议使用工厂，以便可以集中创建绑定到 Sinfunction 的 UnaryOperator 并且始终保持一致。稍后，如果您发现一种新的更快的计算方式，`Sine`您`Math.Sin`可以轻松创建一个`SinFunctionFast`类，并在您的工厂中种植这个类而不是`SinFunction`.

在像 Java 这样的语言中，您可能会这样做，但由于 C# 允许委托，您可以使用委托来避免定义大量函数类。（无论如何，委托都是定义诸如 SinFunction 之类的类的简写）。

说了这么多，我想提醒您注意您目前的想法：

```
var sinOperator = new UnaryOperator(
                    childNode,
                    delegate()
                    {        
                      return Math.Sin(childNode.GetValue());
                    }); 
```

为了防止任意委托，您应该将 Math.Sin 本身传递给委托，并且`UnaryOperator`应该期望一元委托（即接受双精度类型的单个参数并返回双精度）。

```
var sinOperator = new UnaryOperator(childNode, Math.Sin);

//In UnaryOperator Class
public override double GetValue()
{
     return _OpDelegate(_childNode.GetValue());
} 
```

在这种情况下，也建议使用工厂来创建不同的操作符。

在这里使用委托的一个潜在缺点是，在 C# 中，无法阻止提供多播委托，而在您的情况下，您只需要单播委托。此外，根据[Microsoft 的指南](http://msdn.microsoft.com/en-us/library/ms173173.aspx)（特别注意 的示例`IComparable`），您应该为此特定实现选择接口而不是委托。

单播委托相对于接口的一个优势是它们只是快了一个档次。但是为了从中获得任何可以想象的性能增益，您将需要一个包含大量运算符的巨大函数树。

# python - 如何为numpy数组的每个元素设置alpha值

> ID：11444222
> 
> 赞同：2
> 
> 时间：2012-07-12T02:22:03.107
> 
> 标签：python, arrays, image, numpy, matplotlib

我想填充一个数组，然后像图像一样显示它。我想为每个数组元素设置两个参数：“颜色值”和“透明度值”。我正在使用 matplotlib 中的 imshow，但我对其他解决方案持开放态度。我试过这样的东西，其中 ca_map 是一个 MxN 数组。

```
ca_map = np.array(ca_map)

palette = cm.jet
palette.set_under('w', 1.0)

plt.axis('off')
plt.imshow(ca_map, cmap=palette, norm=colors.Normalize(vmin=0, clip=False), interpolation='sinc')
plt.show() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:33:24.117

文档（[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.imshow](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.imshow)）说您可以将 RGBA 值的 MxNx4 数组传递给 imshow。因此，假设 ca_map 是 MxNx3，您可以执行以下操作：

```
plt.imshow(np.dstack([ca_map, alpha], ...) 
```

或者如果 ca_map 是 MxN，那么：

```
plt.imshow(np.dstack([ca_map, ca_map, ca_map, alpha], ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:57:21.000

Luke 的回答对 MxNx3 很好，但对于 MxN 情况，他的解决方案将为您的图像提供灰色阴影（相等的 rgb 值）。如果您想要图像中的任何颜色，以下可能会有所帮助：

```
import matplotlib.pyplot as plt
import numpy

data = numpy.arange(12.).reshape(3, 4)

import matplotlib.colors
norm = matplotlib.colors.Normalize(data.min(), data.max())

img_array = plt.get_cmap('jet')(norm(data))
print img_array.shape
img_array[..., 3] = 1 - (norm(data)/2)  # <- some alpha values between 0.5-1

plt.imshow(img_array)
plt.show() 
```

# php - 记住 cookie 中的表单值以便稍后完成

> ID：11444228
> 
> 赞同：1
> 
> 时间：2012-07-12T02:23:48.350
> 
> 标签：php, javascript, jquery, html, cookies

我有一个表格，在客户填写各种表格后，我希望它能够浏览网站，并返回表格并保持填写。

我考虑过将 cookie 保存在浏览器的客户端中，您可能会推荐其他方法吗？

关于代码，这是我想到的javascript部分，我真的不知道如何处理服务器端部分，但我想使用一个类来定义cookie。我是这个 OOP 的新手，所以如果你能指出我正确的方向，我将不胜感激

```
 fieldsToSave = ['nome','sobrenome','endereco','codigopostal','localidade','telemovel','email','codigopostal2','localidade2','endereco2','nif','entidade','codigopostal3','localidade3','endereco3','nserie','modelo'];      

        function ajaxrequest(){
            var params = [];
            for (var i=0; i < fieldsToSave.length; i++) {
                var ele = required[i];
                params[i] = ele + '=' + $('#' + ele).attr('value');
            }
            params = params.join('&');
            $(".agendarleft").html("LOADING");
            $.ajax({
            type: "GET",
            url: "ajaxload/como.php",
            data: params,
            success: function() {
            $(".agendarleft").html("SUCESS");
            }
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:38:26.110

如果您只是为了节省客户重新填写表格的时间，那么您可能想试一试 Sisyphus jQuery 插件：

引用插件站点：

> 插件开发用于将 html 表单数据保存到 LocalStorage，以便在浏览器崩溃、选项卡关闭和其他灾难后恢复它们。

[http://simsalabim.github.com/sisyphus/](http://simsalabim.github.com/sisyphus/)

*尽管您应该注意，它需要支持 HTML5 的现代浏览器。

* * *

使用起来非常直接。在 jQuery 之后包含插件，然后使用以下（默认选项）调用它：

```
$('#form_id').sisyphus({
  customKeyPrefix: '',
  timeout: 0,
  autoRelease: true,
  name: null,
  onSave: function() {},
  onBeforeRestore: function() {},
  onRestore: function() {},
  onRelease: function() {},
  excludeFields: []
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:12:31.313

```
You can use cookies to store data at client-side as:
fieldsToSave = ['nome','sobrenome','endereco','codigopostal','localidade','telemovel','email','codigopostal2','localidade2','endereco2','nif','entidade','codigopostal3','localidade3','endereco3','nserie','modelo'];      

        function ajaxrequest(){
            var params = [];
            for (var i=0; i < fieldsToSave.length; i++) {
                var ele = required[i];
                params[i] = ele + '=' + $('#' + ele).attr('value');
            }
            document.cookie = "params="+params;
            $(".agendarleft").html("LOADING");
            $.ajax({
            type: "GET",
            url: "ajaxload/como.php",
            data: params,
            success: function() {
            $(".agendarleft").html("SUCESS");
            }
            });
        } 
```

# ios - 在 iPad 中打开测试应用程序的数据库

> ID：11444229
> 
> 赞同：0
> 
> 时间：2012-07-12T02:23:52.747
> 
> 标签：ios, sqlite, core-data

有没有办法让我在 iPad 中打开测试应用程序的数据库？由于某种原因，我必须手动将数据插入其中。那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:49:58.960

是的，有一种方法可以打开数据库。文件位置应如下所示：

*主页*/库/应用程序支持/iPhone 模拟器/用户/应用程序/

根据您希望如何查看它，我建议您查看[如何打开核心数据数据库？](https://stackoverflow.com/questions/1405549/how-to-open-a-core-data-database)或者[如何查看存储在 Core Data 中的数据？](https://stackoverflow.com/questions/2268102/how-view-data-stored-in-core-data)

希望有帮助！

# php - 如何修复mysql子查询显示

> ID：11444231
> 
> 赞同：1
> 
> 时间：2012-07-12T02:24:41.097
> 
> 标签：php, mysql

```
SELECT User.username,
       IFNULL(SUM(credit) - SUM(debit), 0) AS total,
       ( SELECT SUM(Bid.credit) - SUM(Bid.debit) AS freebids
           FROM users AS User
           LEFT
           JOIN bids AS Bid
             ON Bid.user_id = User.id
          WHERE Bid.type = 2
       ) AS FreeBids,
       ( SELECT SUM(Bid.credit) - SUM(Bid.debit) AS Normalbids
           FROM users AS User
           LEFT
           JOIN bids AS Bid
             ON Bid.user_id = User.id
          WHERE Bid.type = 0
             OR Bid.type = 1
       ) AS NormalBids
  FROM users AS User
  LEFT
  JOIN bids AS Bid
    ON Bid.user_id = User.id
 GROUP
    BY User.id 
```

这是我的示例表：对于用户

```
id username 
1  user1
2  user2
3  user3
4  user4 
```

投标

```
id user_id debit credit type
1  1       0     10     0
2  1       1     5      2 
3  1       1     0      2
4  3       0     10     0
6  2       0     10     0
7  4       1     10     0
8  4       1     0      1 
```

但是我在显示子查询时遇到问题（Freebids 和 Normalbids）都具有相同的值，这里是示例显示：

```
username    total   FreeBids    NormalBids
user1       10       12809          965
user2       20       12809          965
user3       9        12809          965
user4       0        12809          965 
```

我不知道我在查询中去哪儿了。有什么建议可以解决我的问题吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:44:17.430

之所以出现所有相同的值，是因为`users`外部查询中的`users`表和内部查询中的表没有区别。他们都有相同的别名。您必须通过为其分配不同的别名（例如）来区分外部`users`表或内部表，以便子查询知道要为外部值引用哪个表：`users``u`

```
... FROM users AS u ... 
```

话虽如此，使用这样的子查询效率非常低，因为它们需要对表中的***每一***行执行`users`（我们正在讨论整个表需要连接和过滤的次数与用户 x2 一样多）。

使用条件聚合可以更有效地重写您的查询：

```
SELECT
    a.username,
    IFNULL(SUM(b.credit) - SUM(b.debit), 0) AS total,
    SUM(IF(b.type = 2, b.credit, 0)) - SUM(IF(b.type = 2, b.debit, 0)) AS freebids,
    SUM(IF(b.type IN (0,1), b.credit, 0)) - SUM(IF(b.type IN (0,1), b.debit, 0)) AS normalbids
FROM users a
LEFT JOIN bids b ON a.id = b.user_id
GROUP BY a.id, a.username 
```

基本上说：仅当类型为*value**时才对贷方/借方求和`x`*，并且您可以求和/计数/平均/等。在任何情况下，您只想使用一个表连接。

* * *

## [SQL-Fiddle 演示](http://sqlfiddle.com/#!2/7e606/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:33:38.883

您的子查询和联接的组合并没有真正意义：对于外部查询的每一行，每个子查询将返回相同的多行集合，而不是返回与外部查询的行相对应的正确单个值。

有几种方法可以做你想做的事，但我认为最简单的是完全消除连接，并使用相关子查询：

```
SELECT User.username,
       ( SELECT IFNULL(SUM(credit) - SUM(debit), 0)
           FROM bids AS Bid
          WHERE Bid.user_id = User.id
       ) AS total,
       ( SELECT IFNULL(SUM(credit) - SUM(debit), 0)
           FROM bids AS Bid
          WHERE Bid.user_id = User.id
            AND Bid.type = 2
       ) AS FreeBids,
       ( SELECT IFNULL(SUM(credit) - SUM(debit), 0)
           FROM bids AS Bid
          WHERE Bid.user_id = User.id
            AND Bid.type IN (0, 1)
       ) AS NormalBids
  FROM users AS User
; 
```

每个子查询都引用`User`外部查询中的记录，从而使所有内容井井有条。

# rubymine - Rubymine 关闭文件快捷方式（Mac 或 Windows）

> ID：11444237
> 
> 赞同：0
> 
> 时间：2012-07-12T02:25:19.690
> 
> 标签：rubymine

如何关闭我正在使用的当前文件（在 Rubymine 中）？我不想点击“x”，因为我讨厌鼠标，我不想“关闭所有修改”我只想关闭当前具有焦点的文件，就像我在任何其他程序中一样Mac 按 Command W。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:31:17.853

我敢打赌你已经错过了[这个文档部分](http://www.jetbrains.com/ruby/webhelp/closing-files-in-the-editor.html)。

快捷键取决于键盘映射并且可以自定义，但默认的是Windows上的`Ctrl`+和Mac上的+ 。`F4``Cmd``F4`

`Settings`验证|中的快捷方式 `Keymap`，确保它不与其他应用程序冲突，尝试将`Close`操作映射到不同的快捷方式。它工作正常，我已经仔细检查过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T15:58:07.077

Command-W 应该可以关闭当前版本的 Rubymine (6.2) 中的当前文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:24:08.337

同 CrazyCoder 所说的一样。以下是将关闭和关闭所有窗口映射到 Rubymine 中的快捷键的确切步骤：

```
Rubymine | Preferences | Keymap | Main Menu | Edit | Select Word at Caret  >> Remove Keyboard Shortcut: command+W
Rubymine | Preferences | Keymap | Main Menu | Edit | Unselect Word at Caret  >> Remove Keyboard Shortcut: command+shift+W
Rubymine | Preferences | Keymap | Window | Editor Tabs | Close  >> Remove Keyboard Shortcut: command+F4
Rubymine | Preferences | Keymap | Window | Editor Tabs | Close  >> Add Keyboard Shortcut: command+W
Rubymine | Preferences | Keymap | Window | Editor Tabs | Close All >> Add Keyboard Shortcut: command+shift+W 
```

详情在这里： http: [//lexsheehan.blogspot.com/2013/01/fixing-close-window-keyboard-shortcuts.html](http://lexsheehan.blogspot.com/2013/01/fixing-close-window-keyboard-shortcuts.html)

# android - Jelly Bean DatePickerDialog --- 有没有办法取消？

> ID：11444238
> 
> 赞同：148
> 
> 时间：2012-07-12T02:25:20.490
> 
> 标签：android, datepicker, android-4.2-jelly-bean, android-datepicker

---***版主注意：****今天（7 月 15 日），我注意到[这里](https://stackoverflow.com/q/11383592/489607)已经有人遇到了这个问题。但我不确定将其作为副本关闭是否合适，因为我认为我对这个问题提供了更好的解释。我不确定我是否应该编辑其他问题并将此内容粘贴到那里，但我不愿意过多地更改其他人的问题。*---

我这里有一些*奇怪*的东西。

我不认为问题取决于您构建的 SDK。设备操作系统版本很重要。

# 问题 #1：默认情况下不一致

`DatePickerDialog`在 Jelly Bean 中已更改 (?)，现在只提供了一个*完成*按钮。以前的版本包括一个*取消*按钮，这可能会影响用户体验（与以前的 Android 版本不一致、肌肉记忆）。

***复制：***创建一个基本项目。把这个放在`onCreate`：

```
DatePickerDialog picker = new DatePickerDialog(
        this,
        new OnDateSetListener() {
            @Override
            public void onDateSet(DatePicker v, int y, int m, int d) {
                Log.d("Picker", "Set!");
            }
        },
        2012, 6, 15);
picker.show(); 
```

***预期：***对话框中出现的*取消按钮。*

***当前：***不出现取消*按钮。*

***截图：*** [4.0.3](https://imgur.com/2QDe7lo,kBqDoGL#0)（OK）和[4.1.1](https://imgur.com/2QDe7lo,kBqDoGL#1)（可能错了？）。

# 问题 #2：错误的解雇行为

对话框调用它确实应该调用的任何监听器，然后*总是*调用`OnDateSetListener`监听器。取消仍然调用 set 方法，设置它调用该方法两次。

***复制：***使用#1 代码，但在下面添加代码（你会看到这解决了#1，但只是视觉/UI）：

```
picker.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", 
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d("Picker", "Cancel!");
            }
        }); 
```

***预期的：***

*   按 BACK 键或在对话框外单击应该**什么都不做**。
*   按“取消”应该打印**Picker Cancel！**.
*   按“Set”应该会打印**Picker Set！**.

***当前的：***

*   按 BACK 键或在对话框外单击会打印**Picker Set！**.
*   按“取消”打印**Picker Cancel！**然后**是选择器集！**.
*   按“设置”打印**选择器设置！**然后**是选择器集！**.

显示行为的日志行：

```
07-15 12:00:13.415: D/Picker(21000): Set!

07-15 12:00:24.860: D/Picker(21000): Cancel!
07-15 12:00:24.876: D/Picker(21000): Set!

07-15 12:00:33.696: D/Picker(21000): Set!
07-15 12:00:33.719: D/Picker(21000): Set! 
```

# 其他注释和评论

*   将它包裹在 a`DatePickerFragment`上并不重要。我为您简化了问题，但我已经对其进行了测试。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-15T16:46:41.493

*注意：**[从 Lollipop 开始修复](https://code.google.com/p/android/issues/detail?id=34833#c39)，[来源在这里](https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r1/core/java/android/app/DatePickerDialog.java)。[用于客户端的](https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f)自动化类（与所有 Android 版本兼容）也已更新。***

# TL;DR：全球解决方案的 1-2-3 简单步骤：

1.  下载[这个](https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f)课程。
2.  在您的活动中实施`OnDateSetListener`（或更改课程以满足您的需要）。
3.  使用此代码触发对话框（在此示例中，我在 a 中使用它`Fragment`）：

    ```
    Bundle b = new Bundle();
    b.putInt(DatePickerDialogFragment.YEAR, 2012);
    b.putInt(DatePickerDialogFragment.MONTH, 6);
    b.putInt(DatePickerDialogFragment.DATE, 17);
    DialogFragment picker = new DatePickerDialogFragment();
    picker.setArguments(b);
    picker.show(getActivity().getSupportFragmentManager(), "frag_date_picker"); 
    ```

**仅此而已！**我仍然将我的答案保持为“已接受”的原因是因为我仍然更喜欢我的解决方案，因为它在客户端代码中占用的空间非常小，它解决了基本问题（在框架类中调用侦听器），在配置更改中运行良好并且它将代码逻辑路由到不受此错误困扰的先前 Android 版本中的默认实现（请参阅类源）。

# *原始答案（出于历史和教学原因保留）：*

# 错误来源

好的，看起来它确实是一个错误，并且其他人已经填充了它。[问题 34833](http://code.google.com/p/android/issues/detail?id=34833)。

我发现问题可能出在`DatePickerDialog.java`. 上面写着：

```
private void tryNotifyDateSet() {
    if (mCallBack != null) {
        mDatePicker.clearFocus();
        mCallBack.onDateSet(mDatePicker, mDatePicker.getYear(),
                mDatePicker.getMonth(), mDatePicker.getDayOfMonth());
    }
}

@Override
protected void onStop() {
    tryNotifyDateSet();
    super.onStop();
} 
```

我猜它可能是：

```
@Override
protected void onStop() {
    // instead of the full tryNotifyDateSet() call:
    if (mCallBack != null) mDatePicker.clearFocus();
    super.onStop();
} 
```

现在，如果有人能告诉我如何向 Android 提出补丁/错误报告，我会很高兴。同时，我建议了一个可能的修复（简单）作为该`DatePickerDialog.java`问题的附加版本。

# 避免错误的概念

**在构造函数中设置监听器，稍后`null`创建您自己的`BUTTON_POSITIVE`**按钮。就是这样，下面的详细信息。

问题的发生是因为`DatePickerDialog.java`，正如您在源代码中看到的那样，调用了一个全局变量 ( `mCallBack`)，该变量存储了在构造函数中传递的侦听器：

```
 /**
 * @param context The context the dialog is to run in.
 * @param callBack How the parent is notified that the date is set.
 * @param year The initial year of the dialog.
 * @param monthOfYear The initial month of the dialog.
 * @param dayOfMonth The initial day of the dialog.
 */
public DatePickerDialog(Context context,
        OnDateSetListener callBack,
        int year,
        int monthOfYear,
        int dayOfMonth) {
    this(context, 0, callBack, year, monthOfYear, dayOfMonth);
}

    /**
 * @param context The context the dialog is to run in.
 * @param theme the theme to apply to this dialog
 * @param callBack How the parent is notified that the date is set.
 * @param year The initial year of the dialog.
 * @param monthOfYear The initial month of the dialog.
 * @param dayOfMonth The initial day of the dialog.
 */
public DatePickerDialog(Context context,
        int theme,
        OnDateSetListener callBack,
        int year,
        int monthOfYear,
        int dayOfMonth) {
    super(context, theme);

    mCallBack = callBack;
    // ... rest of the constructor.
} 
```

所以，诀窍是提供一个`null`监听器作为监听器存储，然后滚动你自己的一组按钮（下面是#1的原始代码，已更新）：

```
 DatePickerDialog picker = new DatePickerDialog(
        this,
        null, // instead of a listener
        2012, 6, 15);
    picker.setCancelable(true);
    picker.setCanceledOnTouchOutside(true);
    picker.setButton(DialogInterface.BUTTON_POSITIVE, "OK",
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d("Picker", "Correct behavior!");
            }
        });
    picker.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", 
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d("Picker", "Cancel!");
            }
        });
picker.show(); 
```

现在它将起作用，因为我在上面发布了可能的更正。

**并且由于在读取时`DatePickerDialog.java`检查 a （[从 API 3/1.5 开始，似乎](http://grepcode.com/search?query=DatePickerDialog&start=0&entity=type&n=)--- 当然无法检查 Honeycomb），因此它不会触发异常。`null``mCallback`**考虑到 Lollipop 解决了这个问题，我不打算研究它：只需使用默认实现（包含在我提供的类中）。

起初我害怕不调用`clearFocus()`，但我在这里测试过，日志行很干净。所以我提出的那条线可能根本就没有必要，但我不知道。

# 与以前的 API 级别的兼容性*（已编辑）*

正如我在下面的评论中指出的那样，这是一个概念，您可以[从我的 Google Drive 帐户下载我正在使用的课程](https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f)。我使用的方式，默认系统实现用于不受该错误影响的版本。

我做了一些适合我需要的假设（按钮名称等），因为我想将客户端类中的样板代码减少到最低限度。完整使用示例：

```
class YourActivity extends SherlockFragmentActivity implements OnDateSetListener

// ...

Bundle b = new Bundle();
b.putInt(DatePickerDialogFragment.YEAR, 2012);
b.putInt(DatePickerDialogFragment.MONTH, 6);
b.putInt(DatePickerDialogFragment.DATE, 17);
DialogFragment picker = new DatePickerDialogFragment();
picker.setArguments(b);
picker.show(getActivity().getSupportFragmentManager(), "fragment_date_picker"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-10T03:48:39.183

我将在 David Cesarino 发布的解决方案上添加我自己的 riff，以防您不使用 Fragments，并且想要一种简单的方法在所有版本（2.1 到 4.1）中修复它：

```
public class FixedDatePickerDialog extends DatePickerDialog {
  //I use a Calendar object to initialize it, but you can revert to Y,M,D easily
  public FixedDatePickerDialog(Calendar dateToShow, Context context, OnDateSetListener callBack) {
    super(context, null, dateToShow.get(YEAR), dateToShow.get(MONTH), dateToShow.get(DAY_OF_MONTH));
    initializePicker(callBack);
  }

  public FixedDatePickerDialog(Calendar dateToShow, Context context, int theme,
    OnDateSetListener callBack) {
    super(context, theme, null, dateToShow.get(YEAR), dateToShow.get(MONTH), dateToShow.get(DAY_OF_MONTH));
    initializePicker(callBack);
  }

  private void initializePicker(final OnDateSetListener callback) {
    try {
      //If you're only using Honeycomb+ then you can just call getDatePicker() instead of using reflection
      Field pickerField = DatePickerDialog.class.getDeclaredField("mDatePicker");
      pickerField.setAccessible(true);
      final DatePicker picker = (DatePicker) pickerField.get(this);
      this.setCancelable(true);
      this.setButton(DialogInterface.BUTTON_NEGATIVE, getContext().getText(android.R.string.cancel), (OnClickListener) null);
      this.setButton(DialogInterface.BUTTON_POSITIVE, getContext().getText(android.R.string.ok),
          new DialogInterface.OnClickListener() {
              @Override
              public void onClick(DialogInterface dialog, int which) {
                picker.clearFocus(); //Focus must be cleared so the value change listener is called
                callback.onDateSet(picker, picker.getYear(), picker.getMonth(), picker.getDayOfMonth());
              }
          });
    } catch (Exception e) { /* Reflection probably failed*/ }
  }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-03T21:24:39.520

在修复错误之前，我建议不要使用 DatePickerDialog 或 TimePickerDialog。将定制的 AlertDialog 与 TimePicker/DatePicker 小部件一起使用；

更改 TimePickerDialog 为；

```
 final TimePicker timePicker = new TimePicker(this);
    timePicker.setIs24HourView(true);
    timePicker.setCurrentHour(20);
    timePicker.setCurrentMinute(15);

    new AlertDialog.Builder(this)
            .setTitle("Test")
            .setPositiveButton(android.R.string.ok, new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Log.d("Picker", timePicker.getCurrentHour() + ":"
                            + timePicker.getCurrentMinute());
                }
            })
            .setNegativeButton(android.R.string.cancel,
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            Log.d("Picker", "Cancelled!");
                        }
                    }).setView(timePicker).show(); 
```

更改 DatePickerDialog 为；

```
 final DatePicker datePicker = new DatePicker(this);
    datePicker.init(2012, 10, 5, null);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        datePicker.setCalendarViewShown(false);
    }

    new AlertDialog.Builder(this)
            .setTitle("Test")
            .setPositiveButton(android.R.string.ok, new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Log.d("Picker", datePicker.getYear() + " "
                            + (datePicker.getMonth() + 1) + " "
                            + datePicker.getDayOfMonth());
                }
            })
            .setNegativeButton(android.R.string.cancel,
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            Log.d("Picker", "Cancelled!");
                        }
                    }).setView(datePicker).show(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-27T13:14:48.977

TimePicker 基于**David Cesarino 的解决方案，“TL;DR: 1-2-3 dead easy steps for a global solution”**

TimePickerDialog 不提供 DatePickerDialog.getDatePicker 之类的功能。因此，必须提供**OnTimeSetListener**侦听器。为了保持与 DatePicker 解决方案的相似性，我保持了旧的 mListener 概念。如果需要，您可以更改它。

呼叫和侦听器与原始解决方案相同。只包括

```
import android.app.TimePickerDialog;
import android.app.TimePickerDialog.OnTimeSetListener; 
```

扩展父类，

```
... implements OnDateSetListener, OnTimeSetListener 
```

实施

```
 @Override
 public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
 ...
 } 
```

示例调用

```
 Calendar cal = Calendar.getInstance();
    int hour = cal.get(Calendar.HOUR_OF_DAY);
    int minute = cal.get(Calendar.MINUTE);

    Bundle b = new Bundle();
    b.putInt(TimePickerDialogFragment.HOUR, hour);
    b.putInt(TimePickerDialogFragment.MINUTE, minute);

    DialogFragment picker = new TimePickerDialogFragment();
    picker.setArguments(b);
    picker.show(getSupportFragmentManager(), "frag_time_picker"); 
```

（更新以处理取消）

```
public class TimePickerDialogFragment extends DialogFragment {

    public static final String HOUR = "Hour";
    public static final String MINUTE = "Minute";

    private boolean isCancelled = false; //Added to handle cancel
    private TimePickerDialog.OnTimeSetListener mListener;

    //Added to handle parent listener
    private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            if (!isCancelled)
            {
                mListener.onTimeSet(view,hourOfDay,minute);
            }
        }
    };
    //
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        this.mListener = (TimePickerDialog.OnTimeSetListener) activity;
    }

    @Override
    public void onDetach() {
        this.mListener = null;
        super.onDetach();
    }

    @TargetApi(11)
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Bundle b = getArguments();
        int h = b.getInt(HOUR);
        int m = b.getInt(MINUTE);

        final TimePickerDialog picker = new TimePickerDialog(getActivity(), getConstructorListener(), h, m,DateFormat.is24HourFormat(getActivity()));

        //final TimePicker timePicker = new TimePicker(getBaseContext());
        if (hasJellyBeanAndAbove()) {
            picker.setButton(DialogInterface.BUTTON_POSITIVE,
                    getActivity().getString(android.R.string.ok),
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            isCancelled = false; //Cancel flag, used in mTimeSetListener
                        }
                    });
            picker.setButton(DialogInterface.BUTTON_NEGATIVE,
                    getActivity().getString(android.R.string.cancel),
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            isCancelled = true; //Cancel flag, used in mTimeSetListener
                        }
                    });
        }
        return picker;
    }
    private boolean hasJellyBeanAndAbove() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN;
    }

    private TimePickerDialog.OnTimeSetListener getConstructorListener() {
        return hasJellyBeanAndAbove() ? mTimeSetListener : mListener; //instead of null, mTimeSetListener is returned.
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T22:58:22.260

我的简单解决方案。当你想让它再次触发时，只需运行“resetFired”（比如再次打开对话框时）。

```
private class FixedDatePickerDialogListener implements DatePickerDialog.OnDateSetListener{
    private boolean fired;

    public void resetFired(){
        fired = false;
    }

    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        if (fired) {
            Log.i("DatePicker", "Double fire occurred.");
            return;//ignore and return.
        } 
        //put your code here to handle onDateSet
        fired = true;//first time fired 
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-27T19:07:56.403

如果有人想要快速解决方法，这是我使用的代码：

```
public void showCustomDatePicker () {

final DatePicker mDatePicker = (DatePicker) getLayoutInflater().
        inflate(R.layout.date_picker_view, null);
//Set an initial date for the picker
final Calendar c = Calendar.getInstance();
int year = c.get(Calendar.YEAR);
int month = c.get(Calendar.MONTH);
int day = c.get(Calendar.DAY_OF_MONTH);
//Set the date now
mDatePicker.updateDate(year, month, day);

//create the dialog
AlertDialog.Builder mBuilder = new Builder(this);
//set the title
mBuilder.setTitle(getString(R.string.date_picker_title))
    //set our date picker
    .setView(mDatePicker)
    //set the buttons 
.setPositiveButton(android.R.string.ok, new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        //whatever method you choose to handle the date changes
            //the important thing to know is how to retrieve the data from the picker
        handleOnDateSet(mDatePicker.getYear(), 
                mDatePicker.getMonth(), 
                mDatePicker.getDayOfMonth());
    }
})
.setNegativeButton(android.R.string.cancel, new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        dialog.dismiss();
    }
})
//create the dialog and show it.
.create().show(); 
```

}

其中 layout.date_picker_view 是一个简单的布局资源，其中 DatePicker 是唯一的元素：

```
<!xml version="1.0" encoding="utf-8">
<DatePicker xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/date_picker"
android:layout_width="fill_parent"   
android:spinnersShown="true" 
android:calendarViewShown="false"
android:layout_height="fill_parent"/> 
```

如果您有兴趣，这里是[完整的教程。](http://suspendedthoughts.com/2013/07/12/working-with-date-pickers/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-16T17:34:18.293

根据 Ankur Chaudhary对类似问题的精彩[回答](https://stackoverflow.com/a/26034036/905801)`TimePickerDialog`，如果我们检查内部`onDateSet`是否给定视图`isShown()`，它将以最小的努力解决整个问题，无需扩展选择器或检查代码周围的一些可怕标志甚至检查操作系统版本，只需执行以下操作：

```
public void onDateSet(DatePicker view, int year, int month, int day) {
    if (view.isShown()) {
        // read the date here :)
    }
} 
```

`onTimeSet`当然，根据 Ankur 的回答也可以这样做

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-09-01T01:17:04.903

我处理这种情况的方法是使用标志并覆盖 onCancel 和 onDismiss 方法。

仅当用户在对话框或后退按钮之外触摸时才会调用 onCancel。onDismiss 总是被调用

在 onCancel 方法中设置一个标志可以帮助在 onDismiss 方法中过滤用户的意图：取消操作或完成操作。下面的一些代码显示了这个想法。

```
public class DatePickerDialogFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    private boolean cancelDialog = false;
    private int year;
    private int month;
    private int day;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        DatePickerDialog dpd = new DatePickerDialog(getActivity(), this, year, month, day);
        return dpd;
    }

    public void setDatePickerDate(int year, int month, int day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }

    @Override
    public void onCancel(DialogInterface dialog) {
        super.onCancel(dialog);
        cancelDialog = true;
    }

    @Override
    public void onDismiss(DialogInterface dialog) {
        super.onDismiss(dialog);
        if (!cancelDialog) {
          #put the code you want to execute if the user clicks the done button
        }
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        setDatePickerDate(year, monthOfYear, dayOfMonth);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-13T08:51:51.400

如果您的应用程序不使用操作栏，则有一个非常简单的解决方法。顺便注意，一些应用程序依赖此功能来工作，因为取消日期选择器具有特殊含义（例如，它将日期字段清除为空字符串，这对于某些应用程序是有效且有意义的输入类型) 并使用布尔标志来防止在 OK 上设置两次日期在这种情况下对您没有帮助。

关于。实际修复，您不必创建新按钮或您自己的对话框。关键是要兼容旧版本的 Android、有缺陷的 Android 版本 (4\. *) 和任何未来的版本，当然，后者无法确定。请注意，在 Android 2.*中，android.app.Dialog 的 onStop() 根本不执行任何操作，而在 4.* 中，它执行 mActionBar.setShowHideAnimationEnabled(false)，这仅在您的应用具有操作栏时才重要。从 Dialog 继承的 DatePickerDialog 中的 onStop() 仅贡献 mDatePicker.clearFocus() （截至 Android 源 4.3 的最新修复），这似乎不是必需的。

因此，在许多情况下，将 onStop() 替换为不执行任何操作的方法应该可以修复您的应用程序，并确保它在可预见的将来仍然如此。因此，只需用您自己的扩展 DatePickerDialog 类，并用一个虚拟方法覆盖 onStop() 。根据您的要求，您还必须提供一两个构造函数。另请注意，不应试图通过例如尝试直接对活动栏执行某些操作来尝试过度修复此问题，因为这会将您的兼容性限制为仅适用于最新版本的 Android。另请注意，能够为 DatePicker 的 onStop() 调用 super 会很好，因为该错误仅在 DatePickerDialog 本身的 onStop() 中，而不在 DatePickerDialog 的超类中。但是，这需要您从自定义类中调用 super.super.onStop()，Java 不会让你这样做，因为它违背了封装理念:) 下面是我用来验证 DatePickerDialog 的小类。我希望这个评论对某人有用。沃伊泰克·雅罗斯

```
public class myDatePickerDialog extends DatePickerDialog {

public myDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
    super(context, callBack, year, monthOfYear, dayOfMonth);
}

@Override
protected void onStop() {
    // Replacing tryNotifyDateSet() with nothing - this is a workaround for Android bug https://android-review.googlesource.com/#/c/61270/A

    // Would also like to clear focus, but we cannot get at the private members, so we do nothing.  It seems to do no harm...
    // mDatePicker.clearFocus();

    // Now we would like to call super on onStop(), but actually what we would mean is super.super, because
    // it is super.onStop() that we are trying NOT to run, because it is buggy.  However, doing such a thing
    // in Java is not allowed, as it goes against the philosophy of encapsulation (the Creators never thought
    // that we might have to patch parent classes from the bottom up :)
    // However, we do not lose much by doing nothing at all, because in Android 2.* onStop() in androd.app.Dialog //actually
    // does nothing and in 4.* it does:
    //      if (mActionBar != null) mActionBar.setShowHideAnimationEnabled(false); 
    // which is not essential for us here because we use no action bar... QED
    // So we do nothing and we intend to keep this workaround forever because of users with older devices, who might
    // run Android 4.1 - 4.3 for some time to come, even if the bug is fixed in later versions of Android.
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-20T10:17:35.090

试试下面的概念。

```
DatePickerDialog picker = new DatePickerDialog(
        this,
        new OnDateSetListener() {
            @Override
            public void onDateSet(DatePicker v, int y, int m, int d) {
                Log.d("Picker", "Set!");
            }
        },
        2012, 6, 15);
picker.show(); 
```

onDateSet() 方法调用两次（如果您正在检查模拟器。它会调用两次。如果使用的是真实设备，那么它将正确调用一次。如果您使用的是模拟器，则使用计数器。如果您在真实设备中工作，那么忽略计数器变量。对于真实设备，它对我有用。）
当用户单击 DatePickerDialog 中的按钮时。
为此，您应该维护一个计数器值，并且在该方法第一次调用时什么都不做，而在该方法第二次调用时执行该操作。
请参阅以下代码片段

```
 static int counter=0;       //Counter will be declared globally.

    DatePickerDialog picker = new DatePickerDialog(
            this,
            new OnDateSetListener() {
                @Override
                public void onDateSet(DatePicker v, int y, int m, int d) {

                   counter++;
                   if(counter==1) return;
                   counter=0;
                   //Do the operations here

                }
            },
            2012, 6, 15);
    picker.show(); 
```

对于取消 datepicker dilalog 它为我工作。对于模拟器它不是 wokring

```
DialogInterface.OnClickListener dialogOnClickListener=new DialogInterface.OnClickListener()
        {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                if(which==Dialog.BUTTON_NEGATIVE)
                {
                    Log.i(tagName, "dialog negative button clicked");
                    dialog.dismiss();
                }

            }

        };

        mDatePickerDialog.setButton(Dialog.BUTTON_NEGATIVE, "Cancel", dialogOnClickListener); 
```

它为我的真实设备工作。但对于模拟器它不能正常工作。我认为它是一个 android 模拟器错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-13T10:29:58.357

一个简单的解决方案是使用布尔值跳过第二次运行

```
boolean isShow = false; // define global variable

// when showing time picker
TimePickerDialog timeDlg = new TimePickerDialog( this, new OnTimeSetListener()
            {

                @Override
                public void onTimeSet( TimePicker view, int hourOfDay, int minute )
                {
                    if ( isShow )
                    {
                        isShow = false;
                        // your code
                    }

                }
            }, 8, 30, false );

timeDlg.setButton( TimePickerDialog.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener()
            {
                @Override
                public void onClick( DialogInterface dialog, int which )
                {
                    isShow = false;
                }
            } );
timeDlg.setButton( TimePickerDialog.BUTTON_POSITIVE, "Set", new DialogInterface.OnClickListener()
            {
                @Override
                public void onClick( DialogInterface dialog, int which )
                {
                    isShow = true;
                }
            } );

timeDlg.show(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-31T11:59:15.337

您可以覆盖 onCancel() 并使用 setOnDismissListener() 来检测负面的用户操作。并且使用 DatePickerDialog.BUTTON_POSITIVE 您知道用户想要设置一个新日期。

```
 DatePickerDialog mDPD = new DatePickerDialog(
                      getActivity(), mOnDateSetListener, mYear, mMonth, mDay);
 mDPD.setOnCancelListener(new OnCancelListener() {
    @Override
    public void onCancel(DialogInterface dialog) {
        // do something onCancek
        setDate = false;
    }
 });

 mDPD.setOnDismissListener(new OnDismissListener() {
    @Override
    public void onDismiss(DialogInterface arg0) {
        // do something onDismiss
        setDate = false;
    }
});

mDPD.setButton(DatePickerDialog.BUTTON_POSITIVE, "Finish", new DatePickerDialog.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // user set new date
        setDate = true;
    }
}); 
```

然后检查 setDate：

```
public void onDateSet(DatePicker view, int year, int month, int day) {
    if(setDate){
        //do something with new date
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-31T16:58:29.493

这是我在取消按钮上的 DatePickerDialog 以及通过后退按钮放弃它的解决方法类。复制并使用 DatePickerDialog 的样式（因为监听器是有状态的，所以我们必须在使用时创建一个新的实例，否则需要更多的代码才能使它工作）

采用：

```
new FixedDatePickerDialog(this,
            new FixedOnDateSetListener() {

                @Override
                public void onDateSet(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth) {
                    if (isOkSelected()) {
                        // when DONE button is clicked
                    }
                }

            }, year, month, day).show(); 
```

班级：

```
public class FixedDatePickerDialog extends DatePickerDialog {
private final FixedOnDateSetListener fixedCallback;
public FixedDatePickerDialog(Context context,
        FixedOnDateSetListener callBack, int year, int monthOfYear,
        int dayOfMonth) {
    super(context, callBack, year, monthOfYear, dayOfMonth);
    fixedCallback = callBack;
    this.setButton(DialogInterface.BUTTON_NEGATIVE,
            context.getString(R.string.cancel), this);
    this.setButton(DialogInterface.BUTTON_POSITIVE,
            context.getString(R.string.done), this);
}

@Override
public void onClick(DialogInterface dialog, int which) {
    if (which == BUTTON_POSITIVE) {
        fixedCallback.setOkSelected(true);
    } else {
        fixedCallback.setOkSelected(false);
    }
    super.onClick(dialog, which);
}

public abstract static class FixedOnDateSetListener implements
        OnDateSetListener {
    private boolean okSelected = false;

    @Override
    abstract public void onDateSet(DatePicker view, int year,
            int monthOfYear, int dayOfMonth);

    public void setOkSelected(boolean okSelected) {
        this.okSelected = okSelected;
    }

    public boolean isOkSelected() {
        return okSelected;
    }
} 
```

}

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-20T22:53:36.803

我正在使用日期选择器、时间选择器和数字选择器。每当用户选择一个数字时，数字选择器就会调用 onValueChanged，在选择器被关闭之前，所以我已经有了这样的结构，只有在选择器被关闭时才对值做一些事情：

```
public int interimValue;
public int finalValue;

public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
    this.interimValue = newVal;
}

public void onDismiss(DialogInterface dialog) {
    super.onDismiss(dialog);
    this.finalValue = this.interimValue;
} 
```

我对此进行了扩展，为我的按钮设置自定义 onClickListeners，并带有一个参数来查看单击了哪个按钮。现在我可以在设置最终值之前检查点击了哪个按钮：

```
public int interimValue;
public int finalValue;
public boolean saveButtonClicked;

public void setup() {
    picker.setButton(DialogInterface.BUTTON_POSITIVE, getString(R.string.BUTTON_SAVE), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            picker.onClick(dialog, which); // added for Android 5.0
            onButtonClicked(true);
        }
    });
    picker.setButton(DialogInterface.BUTTON_NEGATIVE, getString(R.string.BUTTON_CANCEL), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            picker.onClick(dialog, which); // added for Android 5.0
            onButtonClicked(false);
        }
    });
}

public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
    this.interimValue = newVal;
}

public void onButtonClicked(boolean save) {
    this.saveButtonClicked = save;
}

public void onDismiss(DialogInterface dialog) {
    super.onDismiss(dialog);
    if (this.saveButtonClicked) {
        // save
        this.finalValue = this.interimValue;
    } else {
        // cancel
    }
} 
```

然后我将其扩展为使用日期和时间选择器的日期和时间类型以及数字选择器的 int 类型。

我发布这个是因为我认为它比上面的一些解决方案更简单，但是现在我已经包含了所有代码，我想它并没有简单多少！但它非常适合我已经拥有的结构。

**Lollipop 更新：**显然这个错误不会发生在所有 Android 4.1-4.4 设备上，因为我收到了一些用户的报告，他们的日期和时间选择器没有调用 onDateSet 和 onTimeSet 回调。该错误已在 Android 5.0 中正式修复。我的方法仅适用于存在错误的设备，因为我的自定义按钮没有调用对话框的 onClick 处理程序，这是在错误不存在时调用 onDateSet 和 onTimeSet 的唯一位置。我更新了上面的代码以调用对话框的 onClick，所以现在无论错误是否存在，它都可以工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-06T02:46:34.247

我喜欢上面 David Cesarino 的回答，但想要一些可以替代损坏的对话框的东西，并且可以处理任何可能缺少取消/具有不正确取消行为的对话框。以下是 DatePickerDialog / TimePickerDialog 的派生类，它们应该可以作为替代品使用。这些不是自定义视图。它使用系统对话框，但只是将取消/后退按钮的行为更改为按预期工作。

这应该适用于 API 级别 3 及更高级别。所以，基本上任何版本的Android（我专门在果冻豆和棒棒糖上测试过）。

日期选择器对话框：

```
package snappy_company_name_here;

import android.content.Context;
import android.content.DialogInterface;
import android.widget.DatePicker;

/**
 * This is a modified version of DatePickerDialog that correctly handles cancellation behavior since it's broken on jellybean and
 * kitkat date pickers.
 *
 * Here is the bug: http://code.google.com/p/android/issues/detail?id=34833
 * Here is an SO post with a bunch of details: http://stackoverflow.com/questions/11444238/jelly-bean-datepickerdialog-is-there-a-way-to-cancel
 *
 * @author stuckj, created on 5/5/15.
 */
public class DatePickerDialog extends android.app.DatePickerDialog implements DialogInterface.OnClickListener
{
    final CallbackHelper callbackHelper;

    // NOTE: Must be static since we're using it in a super constructor call. Which is annoying, but necessary
    private static class CallbackHelper implements OnDateSetListener
    {
        private final OnDateSetListener callBack;
        private boolean dialogButtonPressHandled = false; // To prevent setting the date when the dialog is dismissed...

        // NOTE: Must be static since we're using it in a super constructor call. Which is annoying, but necessary
        public CallbackHelper(final OnDateSetListener callBack)
        {
            this.callBack = callBack;
        }

        @Override
        public void onDateSet(final DatePicker view, final int year, final int monthOfYear, final int dayOfMonth)
        {
            if (!dialogButtonPressHandled && (callBack != null))
            {
                callBack.onDateSet(view, year, monthOfYear, dayOfMonth);
            }
        }
    }

    /**
     * Sets the positive and negative buttons to use the dialog callbacks we define.
     */
    private void setButtons(final Context context)
    {
        setButton(DialogInterface.BUTTON_NEGATIVE, context.getString(android.R.string.cancel), this);
        setButton(DialogInterface.BUTTON_POSITIVE, context.getString(android.R.string.ok), this);
    }

    @Override
    public void onClick(final DialogInterface dialog, final int which)
    {
        // ONLY call the super method in the positive case...
        if (which == DialogInterface.BUTTON_POSITIVE)
        {
            super.onClick(dialog, which);
        }

        callbackHelper.dialogButtonPressHandled = true;
    }

    @Override
    public void onBackPressed()
    {
        getButton(DialogInterface.BUTTON_NEGATIVE).performClick();
    }

    // Need this so we can both pass callbackHelper to the super class and save it off as a variable.
    private DatePickerDialog(final Context context,
                             final OnDateSetListener callBack,
                             final int year,
                             final int monthOfYear,
                             final int dayOfMonth,
                             final CallbackHelper callbackHelper)
    {
        super(context, callbackHelper, year, monthOfYear, dayOfMonth);
        this.callbackHelper = callbackHelper;
        setButtons(context);
    }

    /**
     * @param context The context the dialog is to run in.
     * @param callBack How the parent is notified that the date is set.
     * @param year The initial year of the dialog.
     * @param monthOfYear The initial month of the dialog.
     * @param dayOfMonth The initial day of the dialog.
     */
    public DatePickerDialog(final Context context,
                            final OnDateSetListener callBack,
                            final int year,
                            final int monthOfYear,
                            final int dayOfMonth)
    {
        this(context, callBack, year, monthOfYear, dayOfMonth, new CallbackHelper(callBack));
    }

    // Need this so we can both pass callbackHelper to the super class and save it off as a variable.
    private DatePickerDialog(final Context context, final int theme, final OnDateSetListener listener, final int year,
                             final int monthOfYear, final int dayOfMonth, final CallbackHelper callbackHelper)
    {
        super(context, theme, callbackHelper, year, monthOfYear, dayOfMonth);
        this.callbackHelper = callbackHelper;
        setButtons(context);
    }

    /**
     * @param context The context the dialog is to run in.
     * @param theme the theme to apply to this dialog
     * @param listener How the parent is notified that the date is set.
     * @param year The initial year of the dialog.
     * @param monthOfYear The initial month of the dialog.
     * @param dayOfMonth The initial day of the dialog.
     */
    public DatePickerDialog(final Context context, final int theme, final OnDateSetListener listener, final int year,
                            final int monthOfYear, final int dayOfMonth)
    {
        this(context, theme, listener, year, monthOfYear, dayOfMonth, new CallbackHelper(listener));
    }
} 
```

时间选择器对话框：

```
package snappy_company_name_here;

import android.content.Context;
import android.content.DialogInterface;
import android.widget.TimePicker;

/**
 * This is a modified version of TimePickerDialog that correctly handles cancellation behavior since it's broken on jellybean and
 * kitkat date pickers.
 *
 * Here is the bug: http://code.google.com/p/android/issues/detail?id=34833
 * Here is an SO post with a bunch of details: http://stackoverflow.com/questions/11444238/jelly-bean-datepickerdialog-is-there-a-way-to-cancel
 *
 * @author stuckj, created on 5/5/15.
 */
public class TimePickerDialog extends android.app.TimePickerDialog implements DialogInterface.OnClickListener
{
    final CallbackHelper callbackHelper;

    // NOTE: Must be static since we're using it in a super constructor call. Which is annoying, but necessary
    private static class CallbackHelper implements OnTimeSetListener
    {
        private final OnTimeSetListener callBack;
        private boolean dialogButtonPressHandled = false; // To prevent setting the date when the dialog is dismissed...

        // NOTE: Must be static since we're using it in a super constructor call. Which is annoying, but necessary
        public CallbackHelper(final OnTimeSetListener callBack)
        {
            this.callBack = callBack;
        }

        @Override
        public void onTimeSet(final TimePicker view, final int hourOfDay, final int minute)
        {
            if (!dialogButtonPressHandled && (callBack != null))
            {
                callBack.onTimeSet(view, hourOfDay, minute);
            }
        }
    }

    /**
     * Sets the positive and negative buttons to use the dialog callbacks we define.
     */
    private void setButtons(final Context context)
    {
        setButton(DialogInterface.BUTTON_NEGATIVE, context.getString(android.R.string.cancel), this);
        setButton(DialogInterface.BUTTON_POSITIVE, context.getString(android.R.string.ok), this);
    }

    @Override
    public void onClick(final DialogInterface dialog, final int which)
    {
        // ONLY call the super method in the positive case...
        if (which == DialogInterface.BUTTON_POSITIVE)
        {
            super.onClick(dialog, which);
        }

        callbackHelper.dialogButtonPressHandled = true;
    }

    @Override
    public void onBackPressed()
    {
        getButton(DialogInterface.BUTTON_NEGATIVE).performClick();
    }

    // Need this so we can both pass callbackHelper to the super class and save it off as a variable.
    private  TimePickerDialog(final Context context,
                              final OnTimeSetListener callBack,
                              final int hourOfDay, final int minute, final boolean is24HourView, final CallbackHelper callbackHelper)
    {
        super(context, callbackHelper, hourOfDay, minute, is24HourView);
        this.callbackHelper = callbackHelper;
        setButtons(context);
    }

    /**
     * @param context Parent.
     * @param callBack How parent is notified.
     * @param hourOfDay The initial hour.
     * @param minute The initial minute.
     * @param is24HourView Whether this is a 24 hour view, or AM/PM.
     */
    public TimePickerDialog(final Context context,
                            final OnTimeSetListener callBack,
                            final int hourOfDay, final int minute, final boolean is24HourView)
    {
        this(context, callBack, hourOfDay, minute, is24HourView, new CallbackHelper(callBack));
    }

    // Need this so we can both pass callbackHelper to the super class and save it off as a variable.
    private TimePickerDialog(final Context context, final int theme, final OnTimeSetListener callBack, final int hourOfDay,
                            final int minute, final boolean is24HourView, final CallbackHelper callbackHelper)
    {
        super(context, theme, callbackHelper, hourOfDay, minute, is24HourView);
        this.callbackHelper = callbackHelper;
        setButtons(context);
    }

    /**
     * @param context Parent.
     * @param theme the theme to apply to this dialog
     * @param callBack How parent is notified.
     * @param hourOfDay The initial hour.
     * @param minute The initial minute.
     * @param is24HourView Whether this is a 24 hour view, or AM/PM.
     */
    public TimePickerDialog(final Context context, final int theme, final OnTimeSetListener callBack, final int hourOfDay,
                            final int minute, final boolean is24HourView)
    {
        this(context, theme, callBack, hourOfDay, minute, is24HourView, new CallbackHelper(callBack));
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-27T11:44:36.107

我使用 Lambda 表达式的 ClearButton 工作版本：

```
public class DatePickerFragment extends DialogFragment {
    private OnDateSelectListener dateSelectListener;
    private OnDateClearListener dateClearListener;

    public void setDateSelectListener(OnDateSelectListener dateSelectListener) {
        this.dateSelectListener = dateSelectListener;
    }

    public void setDateClearListener(OnDateClearListener dateClearListener) {
        this.dateClearListener = dateClearListener;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        DatePickerDialog dialog = new DatePickerDialog(getActivity(), null, year, month, day);
        dialog.setCancelable(true);
        dialog.setCanceledOnTouchOutside(true);
        dialog.setTitle("Select Date");
        dialog.setButton(BUTTON_POSITIVE, ("Done"), (dialog1, which) -> {
            DatePicker dp = dialog.getDatePicker();
            dialog.dismiss();
            dateSelectListener.onDateSelect(dp.getYear(), dp.getMonth(), dp.getDayOfMonth());
        });
        dialog.setButton(BUTTON_NEUTRAL, ("Clear"), (dialog1, which) -> {
            dialog.dismiss();
            dateClearListener.onDateClear();
        });
        dialog.setButton(BUTTON_NEGATIVE, ("Cancel"), (dialog1, which) -> {
            if (which == DialogInterface.BUTTON_NEGATIVE) {
                dialog.cancel();
            }
        });
        dialog.getDatePicker().setCalendarViewShown(false);
        return dialog;
    }

    public interface OnDateClearListener {
        void onDateClear();
    }

    public interface OnDateSelectListener {
        void onDateSelect(int year, int monthOfYear, int dayOfMonth);
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-22T10:20:35.400

对于 TimePickerDialog，解决方法如下：

```
TimePickerDialog createTimePickerDialog(Context context, int themeResId, TimePickerDialog.OnTimeSetListener orignalListener,
                                                         int hourOfDay, int minute, boolean is24HourView) {
        class KitKatTimeSetListener implements TimePickerDialog.OnTimeSetListener {
            private int hour;
            private int minute;

            private KitKatTimeSetListener() {
            }

            @Override
            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                this.hour = hourOfDay;
                this.minute = minute;
            }

            private int getHour() { return hour; }
            private int getMinute() {return minute; }
        };

        KitKatTimeSetListener kitkatTimeSetListener = new KitKatTimeSetListener();
        TimePickerDialog timePickerDialog = new TimePickerDialog(context, themeResId, kitkatTimeSetListener, hourOfDay, minute, is24HourView);

        timePickerDialog.setButton(DialogInterface.BUTTON_POSITIVE, context.getString(android.R.string.ok), (dialog, which) -> {
            timePickerDialog.onClick(timePickerDialog, DialogInterface.BUTTON_POSITIVE);
            orignalListener.onTimeSet(new TimePicker(context), kitkatTimeSetListener.getHour(), kitkatTimeSetListener.getMinute());
            dialog.cancel();
        });
        timePickerDialog.setButton(DialogInterface.BUTTON_NEGATIVE, context.getString(android.R.string.cancel), (dialog, which) -> {
            dialog.cancel();
        });

        return timePickerDialog;
    } 
```

我将所有事件委托给包装器 KitKatSetTimeListener，并且仅在单击 BUTTON_POSITIVE 时才回火到原始 OnTimeSetListener。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-03-02T13:44:14.430

在测试了这里发布的一些建议之后，我个人认为这个解决方案是最简单的。我在 DatePickerDialog 构造函数中将“null”作为侦听器传递，然后当我单击“确定”按钮时，我调用我的 onDateSearchSetListener：

```
datePickerDialog = new DatePickerDialog(getContext(), null, dateSearch.get(Calendar.YEAR), dateSearch.get(Calendar.MONTH), dateSearch.get(Calendar.DAY_OF_MONTH));
    datePickerDialog.setCancelable(false);
    datePickerDialog.setButton(DialogInterface.BUTTON_POSITIVE, getString(R.string.dialog_ok), new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            Log.d("Debug", "Correct");
            onDateSearchSetListener.onDateSet(datePickerDialog.getDatePicker(), datePickerDialog.getDatePicker().getYear(), datePickerDialog.getDatePicker().getMonth(), datePickerDialog.getDatePicker().getDayOfMonth());
        }
    });
    datePickerDialog.setButton(DialogInterface.BUTTON_NEGATIVE, getString(R.string.dialog_cancel), new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            Log.d("Debug", "Cancel");
            dialog.dismiss();
        }
    }); 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-04-12T15:55:44.713

我知道这篇文章已经发布了将近一年，但我认为我应该发布我的发现。您仍然可以保留侦听器（而不是将其设置为仔细考虑）并且仍然可以按预期进行这项工作。关键是隐式设置“确定”或（和）“取消”按钮。我对其进行了测试，它对我来说非常有用。听众不会被解雇两次。

看这个例子，

```
private void setTime(){
final Calendar c = Calendar.getInstance();
int hour = c.get(Calendar.HOUR_OF_DAY);
int minute = c.get(Calendar.MINUTE);

final TimePickerDialog timepicker = new TimePickerDialog(this.getActivity(),
        timePickerListener,
        hour, 
        minute, 
        DateFormat.is24HourFormat(getActivity()));

timepicker.setButton(DialogInterface.BUTTON_POSITIVE, "Print", new    
    android.content.DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog,int which) {
            print = true;
            timepicker.dismiss();           
        }
});

timepicker.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new 
    android.content.DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog,int which){
            print = false;
            timepicker.dismiss();       
        }
});

timepicker.setCancelable(false);
timepicker.show();
} 
```

# android - JSON 响应没有从谷歌应用引擎 servlet 进入 Android

> ID：11444241
> 
> 赞同：0
> 
> 时间：2012-07-12T02:25:38.010
> 
> 标签：android, json, google-app-engine, servlets

我正在尝试实现从 android 到 GAE servlet 的 http 请求响应。来自android的请求是正常的http post请求。它工作正常。问题是我发送回 android 是 json 响应。我使用 GSON (gson v2.2.2) 创建了 json 对象。当我在浏览器中测试时，它正确显示了 gson 格式。

json fromat 是，

```
{"data1":100,"data2":"hello","list":["String 1","String 2","String 3"]} 
```

我试图通过

```
/*json is my json format*/

response.getWritet().println(json); 
```

和

```
system.out.println(json); 
```

当我试图在 android 中读取 json 对象时，我得到了异常，

```
Value <html><head> of type java.lang.String cannot be converted to JSONArray 
```

请建议一些其他方法或帮助我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:31:29.737

`<html><head>`您的页面在输出 JSON 之前先输出 HTML 代码 ( )。要么剥离所有 HTML，然后处理 JSON（也许将 JSON 放在一个特殊的容器中，这样你就可以更容易地找到它），或者不输出任何 HTML，只输出 JSON。

# python - 如何让 pyflakes 在 Windows 上运行？

> ID：11444245
> 
> 赞同：4
> 
> 时间：2012-07-12T02:26:28.210
> 
> 标签：python, windows, pyflakes

无法让 pyflakes 在 Windows 上运行。

在 Windows 上没有`apt install`，所以...怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-21T14:42:43.273

也许这个问题有点老了，因为运行“pip install pyflakes”对我来说在 Windows 上运行完美......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T10:57:03.300

从 Christoph Gohlke 优秀的[windows 软件包存储库](http://www.lfd.uci.edu/~gohlke/pythonlibs/)中获取[windows 基础软件包](http://www.lfd.uci.edu/~gohlke/pythonlibs/#base)。它包括 pyflakes。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T02:28:06.087

[我从Pypi](http://pypi.python.org/pypi/pyflakes/)下载了 pyflakes tgz 文件（v0.5.0），并且能够使用[tar tool](http://cheesoexamples.codeplex.com/releases/view/76708)解压它。

现在我有一个如下所示的目录：

```
C:\temp>dir pyflakes-0.5.0
 Volume in drive C has no label.
 Volume Serial Number is A421-40B4

 Directory of C:\temp\pyflakes-0.5.0

07/11/2012  06:28 PM    <DIR>          .
07/11/2012  06:28 PM    <DIR>          ..
09/03/2011  10:09 AM    <DIR>          bin
07/11/2012  06:28 PM    <DIR>          build
09/03/2011  09:02 AM             1,057 LICENSE
09/03/2011  09:02 AM             1,696 NEWS.txt
09/03/2011  10:09 AM               763 PKG-INFO
09/03/2011  10:09 AM    <DIR>          pyflakes
09/03/2011  09:30 AM             1,075 setup.py
               4 File(s)          4,591 bytes
               5 Dir(s)  74,326,130,688 bytes free 
```

接下来我尝试了明显的：运行`setup.py`文件。它告诉我要使用`install`，所以

```
\python27\python.exe setup.py install 
```

这给了我一个关于构建和安装模块的快乐信息，最终

```
 Writing C:\Python27\Lib\site-packages\pyflakes-0.5.0-py2.7.egg-info 
```

现在没事了 ...

（午休）

现在，pyflakes 的安装会将一个名为“pyflakes”的文件放入`c:\Python27\Scripts`.

要运行 pyflakes 检查器，请使用以下命令：

```
\Python27\python.exe \Python27\Scripts\pyflakes myfile.py 
```

就是这样！有用。

* * *

但还有更多的故事。该文件的内容`c:\Python27\Scripts\pyflakes`是python源代码。现在，您可能会想，*没有 .py 扩展名的 python 模块有什么用？* 该目录中的其他文件正确地标有 .py 扩展名。关闭扩展程序只是*感觉不对。*他们为什么要那样做？如果您有创意并将名为“pyflakes”的文件重命名为“pyflakes.py”，然后尝试运行它，您将收到此错误：

```
C:\dev\python>\Python27\python.exe \Python27\Scripts\pyflakes.py import1.py
Traceback (most recent call last):
  File "\Python27\Scripts\pyflakes.py", line 3, in <module>
    from pyflakes.scripts.pyflakes import main
  File "C:\Python27\Scripts\pyflakes.py", line 3, in <module>
    from pyflakes.scripts.pyflakes import main
ImportError: No module named scripts.pyflakes 
```

问题是（重命名的）pyflakes.py 文件与其导入的模块之间的命名冲突，该模块位于`c:\Python27\Lib\site-packages\pyflakes`. 所以，不要这样重命名。如果您坚持使用 .py 扩展名，请选择 pyflakes.py 以外的名称作为名称 - 例如，pyflakes_driver.py 就可以了。有些人使用 runpyflakes.py 。

如果您确实遇到了上述问题，您还需要删除可能已在 c:\Python27\Scripts 目录中创建的 pyflakes.pyc。

* * *

人们可能还想创建一个 .bat 或 .cmd 文件来启动 pyflakes。为了解决这个问题，我创建了 c:\Python27\pyflakes.cmd，其中包含以下内容：

```
@echo off
SETLOCAL
if  _%1==_ goto USAGE
%~dp0\python.exe %~dp0\Scripts\pyflakes %*
goto ALL_DONE

:USAGE
  echo usage:  pyflakes ^<file^> [^<optionalargs^>]
  echo run the pyflakes syntax checker on a python source file.

:ALL_DONE
ENDLOCAL 
```

好的，就是这样。

# php - 如果我从接口实现，我可以将自己的函数放在 UserRepository 中吗

> ID：11444247
> 
> 赞同：0
> 
> 时间：2012-07-12T02:26:59.533
> 
> 标签：php, symfony, entity

我从 symfony 文档中关注这个

[http://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html)

```
class UserRepository extends EntityRepository implements UserProviderInterface
{
    public function loadUserByUsername($username)
    { 
```

现在我的问题是，如果我想拥有自己的函数，`retrievePassowrd()`那么我可以在存储库中声明它还是我需要创建一个新接口，然后从该接口扩展 userRepo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:29:05.667

是的，您可以在存储库中拥有自己的功能。

# c++ - c++静态库依赖，头包括头

> ID：11444250
> 
> 赞同：0
> 
> 时间：2012-07-12T02:27:16.197
> 
> 标签：c++, c, types, module

所以我正在努力将应用程序的架构升级为更加模块化的设计。这是一个 C++ 应用程序，如果我们正在为特定目标构建，它使用底层的整体 c 库，否则它使用不同的库后端。

目前，应用程序前端代码，即 GUI 代码，直接与单一的 c 库相关联，该库仅适用于一个目标。所做的是将整体 c 库放入一个“模块”中，该模块公开了一个通用 C++ 接口，供应用程序的 GUI 部分使用。这样我们就可以改变构建目标，而 GUI 代码不会改变。先前存在的 GUI 代码使用在 C 库中定义的结构，这些结构对所有可能的 C 库都是通用的。

在 C++ 模块中，我定义了如下所示的代理类型：

```
//ModuleTypes.hpp
typedef CPP_TYPE C_LEGACY_TYPE; 
```

并且 GUI 代码只是使用 CPP_TYPE 代替先前存在的 C_LEGACY_TYPE。

在模块项目的其他地方，Module.hpp 看起来像：

```
//Module.hpp
#include "C_LEGACY_TYPES.hpp"
...
#include "ModuleTypes.hpp" 
```

因此，当 C++ 模块编译为静态库时，Module.hpp 在 ModuleTypes.hpp 之前包含 C_LEGACY_TYPES.hpp（因此 ModuleTypes.hpp 知道 C_LEGACY_TYPE 是什么），并且静态库编译得很好。

问题出在 GUI 模块中，例如：

```
//Gui1.hpp
class Gui1 {
    void Method1(CPP_TYPE value);
}; 
```

由于不能向前声明 CPP_TYPE，因此我在顶部添加了 #include "ModuleTypes.hpp" 到 Gui1.hpp。

```
//Gui1.hpp
#include "ModuleTypes.hpp"
class Gui1 {
    void Method1(CPP_TYPE value);
}; 
```

当我去编译 GUI 模块时，它会出错，因为它无法弄清楚 C_LEGACY_TYPE 是什么。解决此问题的唯一方法是在 ModuleTypes.hpp 中 #include "C_LEGACY_TYPE.hpp"。然而，这导致 GUI 在编译时必须知道遗留 C 头文件在哪里。

我希望 GUI.hpp #include "ModuleTypes.hpp" 但使用静态库中 C_LEGACY_TYPE 的定义，而不必在 "ModuleTypes.hpp" 中 #include "C_LEGACY_TYPES.h"。

我了解错误发生的原因，我正在寻找替代解决方案。如何让 GUI 模块能够使用 ModuleTypes.hpp 中定义的类型，而不必在编译 GUI 模块时包含旧头文件？

随着架构的变化，我们正在迁移 C++11，所以我愿意接受任何建议。VC2010 是我们正在构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:36:35.613

通过将后端 C 库分离在一个公共接口层（包装类）后面，您正在做正确的事情，因此您可以在以后轻松地用其他东西替换后端。

但是，您还需要确保 C 库接口中使用的类型在包装类中同样隔离。由于您的 GUI 层需要包含`C_LEGACY_TYPE.hpp`头文件，我怀疑您的类型没有像应有的那样被隔离。

这可能意味着您需要在包装类中进行一些类型转换，以将 GUI 知道的类型转换为 C 库使用的类型。包装类的接口（即公共接口）不得包含任何特定于后端 C 库的类型。

# c# - 与 linq 等效的 SQL 查询

> ID：11444252
> 
> 赞同：0
> 
> 时间：2012-07-12T02:27:41.170
> 
> 标签：c#, linq, tsql

我使用 LINQ 搜索此查询的等效项：

```
SELECT  *
FROM Shapes
ORDER BY ABS(45.403703 - Latitude), ABS(- 71.948638 - Longitude) 
```

有人有想法吗？我从 linq 开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:36:27.823

像这样的东西？

```
var result = shapes
    .OrderBy(s => Math.Abs(45.403703 - s.Latitude))
    .ThenBy(s => Math.Abs(-71.948638 - s.Longitude)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:38:44.230

```
 var results = 
    from x in shapes 
    orderby Math.Abs(45.403703 - x.Latitude),
            Math.Abs(- 71.948638 - x.Longitude)
    select x; 
```

# python - pycurl 等效于“curl --data-binary”

> ID：11444257
> 
> 赞同：9
> 
> 时间：2012-07-12T02:28:23.607
> 
> 标签：python, pycurl

我想知道pycurl中这个curl命令的等价物：

```
curl --data-binary @binary_data_file.bin 'http://server/myapp/method' 
```

注意：上面的 curl 语句使用的是 POST 方法。我需要使用它来与我的服务器脚本兼容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T02:44:35.197

该`requests`库旨在保持这样的简单：

```
import requests
r = requests.post('http://server/myapp/method', data={'aaa': 'bbb'}) 
```

或者取决于接收端如何期望数据：

```
import requests
r = requests.post('http://server/myapp/method',
    data=file('binary_data_file.bin','rb').read()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T05:34:38.710

从 libcurl，setopt(...) 尝试这个选项：

**CURLOPT_POSTFIELDSIZE**

*如果您想在不让 libcurl 执行 strlen() 来测量数据大小的情况下将数据发布到服务器，则必须使用此选项。使用此选项时，您可以发布完全二进制数据，否则可能会失败。如果此大小设置为 -1，则库将使用 strlen() 来获取大小。*

[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPOSTFIELDSIZE](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPOSTFIELDSIZE)

# objective-c - Objective C - 如何在窗口中放置关闭按钮？

> ID：11444261
> 
> 赞同：-1
> 
> 时间：2012-07-12T02:28:45.230
> 
> 标签：objective-c, button, window

我在目标 C 中的窗口中放置关闭按钮时遇到问题，我已经创建了按钮，但我不知道我需要调用什么方法来关闭窗口，我已经这样做了：

```
 -(void)awakeFromNib{

//Create a button
    NSRect frame = NSMakeRect(350, 10, 100, 50);
    NSButton *btn = [[NSButton alloc]initWithFrame:frame];
    [btn setButtonType:NSMomentaryPushInButton];
    [btn setBezelStyle:NSRoundedBezelStyle];
    [btn setTitle:@"Close"];
    [btn setTarget:self];
    [btn setAction:@selector(closeWindow)];
    [view addSubview:btn];

}

-(void)closeWindow{} 
```

我不知道在关闭窗口方法中放置什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:49:08.627

您可以使用以下内容关闭当前窗口：

```
NSWindow *window = [[NSApplication sharedApplication] keyWindow];
[window close]; 
```

但是，这不会主动模拟用户关闭窗口，因为它不会调用委托方法，也不会突出显示关闭按钮。您可能想改用它：

```
NSWindow *window = [[NSApplication sharedApplication] keyWindow];
[window performClose:sender]; 
```

在这种情况下，您可能希望将您的按钮作为发件人传递。您可以将`closeWindow`方法中的按钮作为对象接收，以使事情变得简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:01:05.480

如果您从 NSWindowController 子类中执行此操作，只需调用`[self close]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T03:01:07.860

如果你触摸一个视图来当前这个视图，你可以使用 removeFromSuperview。只需简单添加 [self removeFromSuperview];

# android - Android 如何使用这个 Horizo ntalListView 来替换 Gallery？

> ID：11444264
> 
> 赞同：2
> 
> 时间：2012-07-12T02:29:19.563
> 
> 标签：android, listview, gallery, horizontal-scrolling

我目前正在使用图库来显示项目列表。除了我不喜欢的中心锁定功能外，一切都很好。我从这里[http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)找到了这个 Horizo​​ntalListView 实现，并希望用它来替换 Android Gallery。我下载了Horizo​​ntalListView.java，将其放入我的项目并将Gallery更改为Horizo​​ntalListView，但是当我运行该应用程序时，什么也没有出现。Gallery 的项目（现在是Horizo​​ntalListView）是使用ArrayAdapter 设置的。我是不是设置错了什么？这是代码：

布局Horizo​​ntalListView：

```
 <com.myapp.HorizontalListView
      android:id="@+id/related"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="#ebebeb" >
    </com.myapp.HorizontalListView> 
```

Horizo​​ntalListView 项：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#fff"
android:orientation="vertical" >

<ImageView
    android:id="@+id/gameicon"
    android:layout_width="120dip"
    android:layout_height="120dip"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    android:src="@drawable/iconbig" />

<TextView
    android:id="@+id/gamename"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    android:gravity="center_horizontal|center_vertical"
    android:text="Title"
    android:textSize="15sp"
    android:textColor="#000000" 
    android:textStyle="bold"/>
</LinearLayout> 
```

物品适配器：

```
public class RelatedListAdapter extends ArrayAdapter<GameInfo> {

private ArrayList<GameInfo> items;
public static HashMap<String, String> relatedImageMap;

public RelatedListAdapter(Context context, int textViewResourceId,
        ArrayList<GameInfo> items) {
    super(context, textViewResourceId, items);
    this.items = items;
    if (relatedImageMap == null)
        relatedImageMap = new HashMap<String, String>();
}

public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater mInflater = (LayoutInflater) getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = mInflater.inflate(R.layout.related_items, null);
    }

    GameInfo game = items.get(position);
    if (game != null) {
        TextView name = (TextView) v.findViewById(R.id.gamename);
        ImageView icon = (ImageView) v.findViewById(R.id.gameicon);
        if (name != null) {         
            name.setBackgroundColor(Color.parseColor("#ebebeb"));
            name.setText(NewDetailActivity.TruncateString(game.getName(), 8) );
        }
        if (icon != null) {
            icon.setBackgroundColor(Color.parseColor("#ebebeb"));
            if (EfficientAdapter.imageMap.containsKey(game.getId())) {
                String filePath = EfficientAdapter.imageMap.get(game
                        .getId());
                Bitmap bm = BitmapFactory.decodeFile(filePath);
                icon.setImageBitmap(bm);
            } else if (relatedImageMap.containsKey(game.getId())) {
                String filePath = relatedImageMap.get(game.getId());
                Bitmap bm = BitmapFactory.decodeFile(filePath);
                icon.setImageBitmap(bm);
            } else {
                String storagePath = Environment
                        .getExternalStorageDirectory().toString()
                        + getContext().getResources().getString(
                                R.string.imgCacheFolder);
                String image = game.getImgUrl().replaceAll(
                        "[^a-zA-Z 0-9]+", "");
                String filePath = storagePath + image;
                EfficientAdapter.LoadImageFromWebOperations(game.getImgUrl(),
                        filePath, null);
                if (relatedImageMap != null) {
                    synchronized (relatedImageMap) {
                        relatedImageMap.put(game.getId(), filePath);
                    }
                }
                Bitmap bm = BitmapFactory.decodeFile(filePath);
                icon.setImageBitmap(bm);
            }
        }
    }

    return v;
} 
```

}

在我的活动中：

```
HorizontalListView related = (HorizontalListView) findViewById(R.id.related);
data = new ArrayList<GameInfo>();
adap = new RelatedListAdapter(this, R.layout.related_items, data);
related.setAdapter(adap); 
```

如果我将 Horizo​​ntalListView 更改为 Gallery，一切正常并显示列表。但是使用 Horizo​​ntalListView，什么也没有出现。谁能帮我解决这个问题？

**编辑：**我现在发现了一些不同的东西。Horizo​​ntalListView 确实出现了，但不是我第一次打开它。例如，我在选项卡 3 中有 3 个选项卡和 Horizo​​ntalListView。当我开始活动时，它显示选项卡 1。然后我单击选项卡 3，什么都没有显示。我更改为选项卡 1 或选项卡 2，然后返回选项卡 3，现在显示列表。奇怪吧？有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:05:35.737

之前我也用过Horizo​​ntalListView。但是很难适应我的特定用例。

然后我找到了这个类Horizo​​ntalScrollView。它在 android SDK 中定义 - 更易于使用和通用。

# windows - Rails 3.2.3 保护捆绑器错误而不是失败

> ID：11444276
> 
> 赞同：0
> 
> 时间：2012-07-12T02:31:04.260
> 
> 标签：windows, ruby-on-rails-3, guard

我在 Windows 上运行 Rails 3.2.3，并正在学习本教程： http: [//net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/](http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/)。当我运行“守卫”（时间 4:34）时，我收到以下错误，而不是看到失败。我已经从我的 gemfile 中删除了已删除的 minitest。有什么建议么？

```
 C:\Users\Steven\Documents\Sites\tasks>guard
     ←[0m
     Guard here! It looks like your project has a Gemfile, yet you are running
     `guard` outside of Bundler. If this is your intent, feel free to ignore this
     message. Otherwise, consider using `bundle exec guard` to ensure your
     dependencies are loaded correctly.
     (You can run `guard` with --no-bundler-warning to get rid of this message.)
     ←[0m
     ←[0mGuard could not detect any of the supported notification libraries.←[0m
     ←[0mGuard is now watching at 'C:/Users/Steven/Documents/Sites/tasks'←[0m
     ←[0mGuard::RSpec is running, with RSpec 2!←[0m
     ←[0m←[0mRunning all specs←[0m
     ansi: 'gem install win32console' to use color on Windows
     gem install minitest
     C:/Ruby192/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/minitest.rb:23:in `<top
     (required)>': MiniTest v1.6.0 is out of date. (RuntimeError)
     `gem install minitest` and add `gem 'minitest' to you test helper.
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn.rb:13:in `r
     equire'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn.rb:13:in `<
     top (required)>'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:68:in `require'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:68:in `block (2 levels) in require'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:66:in `each'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:66:in `block in require'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:55:in `each'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runti
     me.rb:55:in `require'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler.rb:11
     9:in `require'
     from C:/Users/Steven/Documents/Sites/tasks/config/application.rb:13:in `
     <top (required)>'
     from C:/Users/Steven/Documents/Sites/tasks/config/environment.rb:2:in `r
     equire'
     from C:/Users/Steven/Documents/Sites/tasks/config/environment.rb:2:in `<
     top (required)>'
     from C:/Users/Steven/Documents/Sites/tasks/spec/spec_helper.rb:3:in `req
     uire'
     from C:/Users/Steven/Documents/Sites/tasks/spec/spec_helper.rb:3:in `<to
     p (required)>'
     from C:/Users/Steven/Documents/Sites/tasks/spec/requests/tasks_spec.rb:1
     :in `require'
     from C:/Users/Steven/Documents/Sites/tasks/spec/requests/tasks_spec.rb:1
     :in `<top (required)>'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/configuration.rb:780:in `load'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/configuration.rb:780:in `block in load_spec_files'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/configuration.rb:780:in `map'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/configuration.rb:780:in `load_spec_files'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/command_line.rb:22:in `run'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/runner.rb:69:in `run'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.0/lib/rspec/cor
     e/runner.rb:8:in `block in autorun'
     > C:/Ruby192/lib/ruby/gems/1.9.1/gems/listen-0.4.7/lib/listen/adapters/windows.r
     b:42:in `join': Interrupt
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/listen-0.4.7/lib/listen/adapter
     s/windows.rb:42:in `stop'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/listen-0.4.7/lib/listen/listene
     r.rb:55:in `stop'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/guard-1.2.3/lib/guard.rb:169:in
     `stop'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/guard-1.2.3/lib/guard/cli.rb:10
     2:in `rescue in start'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/guard-1.2.3/lib/guard/cli.rb:99
     :in `start'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.15.2/lib/thor/task.rb:27
     :in `run'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.15.2/lib/thor/invocation
     .rb:120:in `invoke_task'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.15.2/lib/thor.rb:275:in
     `dispatch'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.15.2/lib/thor/base.rb:40
     8:in `start'
     from C:/Ruby192/lib/ruby/gems/1.9.1/gems/guard-1.2.3/bin/guard:6:in `<to
     p (required)>'
     from C:/Ruby192/bin/guard:23:in `load'
     from C:/Ruby192/bin/guard:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:25:51.750

我通过进入我的 Ruby 目录并删除 minitest.rb 文件解决了这个问题。然后我转到 turn.rb 文件并注释掉以下内容：

```
require 'turn/minitest' 
```

希望这可以帮助！

# android - admob 和活动

> ID：11444285
> 
> 赞同：-1
> 
> 时间：2012-07-12T02:32:27.080
> 
> 标签：android, admob, android-activity

在过去的几周里，我一直在尝试设置它，但没有成功。如何将这 2 个代码块放在同一个 Java 类中？

```
private int entries = 6;
private String phoneNum[];
private String buttonLabels[];

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    phoneNum = new String[entries];
    buttonLabels = new String[entries];

    // Populate the data arrays
    populateArrays();

    // Set up buttons and attach click listeners

    Button button1 = (Button)findViewById(R.id.button1);
    button1.setText(buttonLabels[0]);
    button1.setOnClickListener(this);

    Button button2 = (Button)findViewById(R.id.button2);
    button2.setText(buttonLabels[1]);
    button2.setOnClickListener(this);

    Button button3 = (Button)findViewById(R.id.button3);
    button3.setText(buttonLabels[2]);
    button3.setOnClickListener(this);

    Button button4 = (Button)findViewById(R.id.button4);
    button4.setText(buttonLabels[3]);
    button4.setOnClickListener(this);

    Button button5 = (Button)findViewById(R.id.button5);
    button5.setText(buttonLabels[4]);
    button5.setOnClickListener(this);

    Button button6 = (Button)findViewById(R.id.button6);
    button6.setText(buttonLabels[5]);
    button6.setOnClickListener(this);
}

// Launch the phone dialer

public void launchDialer(String number){
    String numberToDial = "tel:"+number;
     startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(numberToDial)));
}

/** Method to populate the data arrays */

public void populateArrays(){

    /** In a practical application the arrays phoneNum and buttonLabels could be 
     * updated dynamically from the Web in this method.  For this project we just 
     * hard-wire in some values to illustrate how to use such data, once obtained,
     * to make phone calls.*/

    phoneNum[0] = "000-000-0001";
    phoneNum[1] = "000-000-0002";
    phoneNum[2] = "000-000-0003";
    phoneNum[3] = "000-000-0004";
    phoneNum[4] = "000-000-0005";
    phoneNum[5] = "000-000-0006";

    buttonLabels[0] = "Jane D. Arc";
    buttonLabels[1] = "John Doe";
    buttonLabels[2] = "Jane Doe";
    buttonLabels[3] = "Abe Linking";
    buttonLabels[4] = "Mona Liza";
    buttonLabels[5] = "Issac Nuton";
}

/** Process button events */

@Override
public void onClick(View v) {
    switch (v.getId()) {

        case R.id.button1:
            launchDialer(phoneNum[0]);
            break;

        case R.id.button2:
            launchDialer(phoneNum[1]);
            break;

        case R.id.button3:
            launchDialer(phoneNum[2]);
            break;

        case R.id.button4:
            launchDialer(phoneNum[3]);
            break;

        case R.id.button5:
            launchDialer(phoneNum[4]);
            break;

        case R.id.button6:
            launchDialer(phoneNum[5]);
            break;

    }
} 
```

当我尝试覆盖`onStart()`时，应用程序崩溃。

```
public void onStart(){
    super.onStart();
    AdView layout = (AdView)this.findViewById(R.id.adView);
    // Initiate a generic request to load it with an ad
    AdRequest adRequest = new AdRequest();
    adRequest.setTesting(true);
    layout.loadAd(adRequest); 
} 
```

我知道问题是这一行：

```
public void onStart(){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:42:15.517

如果您只是想让 AdMob 正常工作，则不应使用 onStart。改用你的 onCreate 。

它位于**添加 com.google.ads.AdView**部分下的[Google Admob 文档中。](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

 **如果您的 xml 中已有 AdView，则可以获取它并加载 AdRequest。如果您不这样做，文档的示例会动态添加一个。

您还需要确保调用 .destroy(); 在视图上，因此您需要覆盖 onDestroy 函数。这一切都在文档的示例中。**

# php - HighStock Graph 未使用 PHP JSON 显示

> ID：11444289
> 
> 赞同：0
> 
> 时间：2012-07-12T02:33:27.347
> 
> 标签：php, json, highcharts, highstock

为什么这不起作用，它让我头脑清醒。我已经采用了他们的示例代码并做了同样的完全相同

他们的 JSON 文件[http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=](http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=) ?

我 [的 http://crm.vipcashback.com/system/db/mongo.php?task=count](http://crm.vipcashback.com/system/db/mongo.php?task=count)

HTML

```
<script language='javascript'>
$.getJSON('http://crm.vipcashback.com/system/db/mongo.php?task=count&callback=?', function(data) {
        window.chart = new Highcharts.StockChart({
            chart : {
                renderTo : 'container'
            },
            rangeSelector : {
                selected : 1
            },
            title : {
                text : 'AAPL Stock Price'
            },
            series : [{
                name : 'AAPL',
                data : data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
});   
</script> 
```

# eclipse - 是否有在打开的文件上运行 google 的 cpplint.py 的 eclipse 插件？

> ID：11444295
> 
> 赞同：4
> 
> 时间：2012-07-12T02:34:51.407
> 
> 标签：eclipse, eclipse-plugin

我希望能够`cpplint.py`从 Eclipse 中运行，这样我就可以找到我做出错误样式决定的地方（至少根据 Google 样式指南）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:03:21.640

我不知道`cpplint.py`，但您应该能够从 Eclipse 中将任何工具作为“外部工具”运行。

见下文`Run >> Externals Tools`

参数甚至可以[参数化](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)，因此您可以包含当前项目或类似项目的路径。输出放置在控制台视图中，如果来自该工具的消息与来自其他工具的消息类似（例如“file:line:message”），您甚至应该有从 out 到相关文件的超链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T01:51:02.520

也许你可以试试这个[http://wangzw.github.io/CppStyle/](http://wangzw.github.io/CppStyle/) 它是一个在保存时运行 cpplint.py 的 eclipse 插件。它还添加了 clang-format 作为另一个 c/c++ 代码格式化程序。

# iphone - iOS AVAudioPlayer 让其他应用的背景音乐停止

> ID：11444297
> 
> 赞同：19
> 
> 时间：2012-07-12T02:35:09.277
> 
> 标签：iphone, ios

我有一个需要播放声音的锻炼应用程序。我使用 AVAudioPlayer 播放声音。但是当音频开始播放时，来自另一个应用程序（广播流应用程序）的背景音乐被关闭。

我怎样才能让它不打断背景音乐？因为我希望用户在锻炼时听到音乐。

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-12T04:20:34.657

您可以在使用 AVAudioPlayer 的地方使用以下代码：

```
 // Set AudioSession
    NSError *sessionError = nil;
   [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:&sessionError];
   [[AVAudioSession sharedInstance] setActive:YES error:&sessionError]; 
```

如果你想设置一个委托，你可以添加这行代码：

```
 [[AVAudioSession sharedInstance] setDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-17T15:17:26.163

就我而言，我希望以较低的音量播放背景音频，因为我的应用程序播放的声音更像是一个警报。我用这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // prevents our app from stopping other audio,
    // e.g. music, podcats, etc. that may be playing when launched
    // our audio will be played at a higher volume
    // and the background audio will "duck" until done
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryMultiRoute 
                                     withOptions:AVAudioSessionCategoryOptionDuckOthers
                                           error:nil];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-03T16:37:29.437

根据 SujithPt 的回答，这里是同样的事情：

```
AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient, error: nil) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-14T15:42:04.440

对于斯威夫特 4.2

```
import AVFoundation

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

    do {
        try AVAudioSession.sharedInstance().setCategory(.ambient, mode: .default, options: AVAudioSession.CategoryOptions.mixWithOthers)
    } catch let error {
        print(error.localizedDescription)
    }

    return true
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-10T15:55:53.417

对于 Swift 2.2，在播放或准备播放之前将其添加到任何地方：

```
_ = try? AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient) 
```

# ruby-on-rails - 用 Cucumber 测试无效的表单提交

> ID：11444303
> 
> 赞同：2
> 
> 时间：2012-07-12T02:36:19.450
> 
> 标签：ruby-on-rails, cucumber, capybara, bdd

我有一个简单的 Cucumber 测试，以查看在输入无效凭据时是否将用户发送回注册页面。

我的最后一步如下所示：

```
Then /^I should be on the registration page$/ do
  current_path.should == new_user_registration_path
end 
```

但是，当有人提交表单并返回错误时，他们实际上最终会出现在“/users”，而不是“/users/sign_up”

我假设这是因为 user_registration POST 方法映射到 /users。但我不等待测试 /users，因为理论上这可能是用户的索引，我不想成为错误页面。

有没有更好的方法来测试 Rails 中的表单错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:37:32.610

您应该测试用户最终访问的页面是否包含错误文本。将 Cucumber 测试视为手动测试：提交表单后不会检查 url，但会查看页面内容以了解提交是否成功

# android - android ndk 构建在 build-binary.mk:369 上失败

> ID：11444305
> 
> 赞同：1
> 
> 时间：2012-07-12T02:36:31.120
> 
> 标签：android, android-ndk

我有一个包含数百个 c++ 文件的大项目，我应该将它们移植到 Android。我也是该项目和 NDK 的新手。我摆脱了大多数错误，并且 ndk 构建进​​展到这里：

> 编译++拇指：mylib <= MyApp.cpp
> 
> 共享库：libmylib.so
> 
> ./obj/local/armeabi/objs/mylib/MyApp.o：在函数“MyClass::MyFunction(unsigned long, void*, unsigned long long)”中：
> 
> C:\Development/./jni/AClass.h:249: 未定义对 `MyClass::Function(unsigned long, void*, unsigned long long)' 的引用
> 
> ....这里有很多这些错误消息...
> 
> collect2: ld 返回 1 个退出状态
> 
> /cygdrive/c/Android/android-ndk/android-ndk-r8/build/core/build-binary.mk:369：目标“obj/local/armeabi/libmylib.so”的配方失败
> 
> 制作：*** [obj/local/armeabi/libmylib.so] 错误 1

它现在甚至转到“SharedLibrary：libmylib.so”，但后来我得到了一堆这些错误“未定义的引用”，就像上面一样。包含类并定义了功能。

build-binary.mk 中的第 369 行是：

> @$(调用主机-mkdir,$(dir $@))

但我不知道那是什么意思。我阅读了一些关于共享库权限问题的内容，并将所有文件设置为允许一切，但这并没有改变任何东西。会不会是 mkdir 由于某种原因失败了？有谁知道是什么问题？

任何帮助是极大的赞赏！

这是我的 Android.mk 文件：

> LOCAL_PATH := $(调用我的目录)
> 
> 包括 $(CLEAR_VARS)
> 
> LOCAL_MODULE := mylib
> 
> LOCAL_SRC_FILES := MyApp.cpp
> 
> LOCAL_CFLAGS := -D_Android_ -D_Debug_
> 
> 包括 $(BUILD_SHARED_LIBRARY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:13:52.460

可能正在发生以下三件事之一：

*   您实际上并没有为这些函数编译代码，可能是因为它被#ifdef 包围，或者因为有问题的文件没有被构建。您可以检查是否存在与其源对应的 .o 文件。您还可以将#error 放在函数的主体中并验证那里的构建是否失败（我知道这听起来很愚蠢，但它会捕捉到浪费您时间的愚蠢错误）

*   这些函数位于未链接的目标文件或库中。在这种情况下，您需要将缺少的部分添加到链接中。

*   这些函数位于不同的动态库中，该动态库将在加载您正在构建的库之前预加载，或者至少会在加载依赖它们的函数之前加载。您可以使用一个特殊标志来允许共享库中未定义的符号 - 我忘记它是什么，但您可以查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:02:13.743

MyApp.cpp 中是否定义了 MyClass 类？

如果没有，您还需要在 LOCAL_SRC_FILES 中添加 MyClass 源文件，例如，

LOCAL_SRC_FILES := MyApp.cpp AClass.cpp。

# ruby-on-rails - 渲染 :action 引发 ActionView::MissingTemplate

> ID：11444308
> 
> 赞同：0
> 
> 时间：2012-07-12T02:36:35.860
> 
> 标签：ruby-on-rails

我有两个控制器，`foo`并且`bar`.

`bar#dobar`有一个对应的`dobar.js.erb`文件，直接用accept header调用就可以正确渲染

```
*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript 
```

`foo#dofoo`以命令结束`render :action => '/bar/dobar'`。这会导致以下错误消息：

```
ActionView::MissingTemplate (Missing template foo/bar/action, /application/bar/action with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text,
 :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee]}. 
Searched in:
  * "/Developer/Workspace/MyProj/app/views"
  * "/Users/bdares/.rvm/gems/ruby-1.9.3-p194/gems/twitter-bootstrap-rails-2.1.0/app/views"
):
  app/controllers/foo_controller.rb:16:in `dofoo' 
```

我也试过：

*   `render :action => '/bar/dobar', :format => [:js]`
*   `render :action => 'bar/dobar'`
*   `render :template => '/bar/dobar', :format => [:js]`

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:41:03.413

如果您只是调用模板而不是操作，请尝试此操作，

```
render :template => 'bar/dobar', :format => [:js] 
```

# ajax - 多个 AJAX 函数

> ID：11444309
> 
> 赞同：0
> 
> 时间：2012-07-12T02:36:52.243
> 
> 标签：ajax, function

我正在尝试将一个 ajax 函数添加到一个脚本中，该脚本本质上做了两件事：

Step 1: 确定是需要搜索用户还是新建一个 Step 2: 根据选择 1，要么转到所选脚本（该部分有效），要么调用一个新函数（该部分无效，然而）。现在，我知道第二个函数本身可以完美地工作，因为我直接在锚标记中调用它并且没有任何问题，所以它必须是我在函数本身中尝试所有它的方式。这是我到目前为止所拥有的：

```
function changecm(){
var txt = 'Select An Option To Continue:<br>
<input type="radio" name="type" id="type" value="search" style="font-size:22px;"><br>
<input type="radio" name="type" id="type" value="create" style="font-size:22px;">';

$.prompt(txt,{ 
    buttons:{Confirm:true, Cancel:false},
    submit: function(v,m,f){
        var flag = true;
        if (v) { }
        return flag;
    },
    callback: function(v,m,f){

        if(v){      
        var type = f.type;
            if(type == 'create'){
                $.post('changecm',{type:type},
                       function(data){
                       $("div#customer").html(data);
                       }
                );
            }
            else{
            function(changecmnow);
            }
        }
    }
}); 
```

}

那是功能 1。这是功能 2：

```
function changecmnow(){
var txt = 'Enter the first name, last name, or telephone number of the customer to limit your results:<br>
<input type="text" name="terms" id="terms" style="font-size:22px; width:400px;">';

$.prompt(txt,{ 
    buttons:{Confirm:true, Cancel:false},
    submit: function(v,m,f){
        var flag = true;
        if (v) { }
        return flag;
    },
    callback: function(v,m,f){

        if(v){      
        var terms = f.terms;
            $.post('changecm',{terms:terms},
                   function(data){
                   $("div#customer").html(data);
                   }
            );
        }
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:18:43.247

如果您只想调用该函数，为什么不只是

`else { changecmnow(); }`

# c++ - 自定义套接字继承自 boost::asio::ip::tcp::socket

> ID：11444313
> 
> 赞同：1
> 
> 时间：2012-07-12T02:37:12.760
> 
> 标签：c++, oop, sockets, boost-asio

我对 C++ 继承相当陌生，我正在使用 boost 套接字。我想为同步提升套接字创建类似于 Java 的 DataOutputStream 的东西。即，我想要 SendInt、ReadLong 等方法。我尝试创建一个从套接字继承的类，但我不断收到错误消息。现在，我有这样的事情：

数据套接字流.h

```
#include "boost/asio.hpp"
#include <vector>
namespace Server {
using namespace std;
namespace as = boost::asio;
namespace ip = boost::asio::ip;
class DataSocketStream : public ip::tcp::socket{
public:
    DataSocketStream(as::io_service);
    virtual ~DataSocketStream();
    void WriteInt(int);
    void WriteLong(long);
    int ReadInt(boost::system::error_code);
    long ReadLong(boost::system::error_code);
    void Flush (boost::system::error_code);
    string ReadString(boost::system::error_code);
    double ReadDouble(boost::system::error_code);
    void WriteDouble(double);
private:
    ip::tcp::socket* socketFormPtr
    std::vector<char> Message;
}; 
```

数据套接字流.cpp

```
#include "DataSocketStream.h"

namespace Server {
namespace as = boost::asio;
namespace ip = boost::asio::ip;
using namespace std;
DataSocketStream::DataSocketStream(as::io_service ios)
: ip::tcp::socket(ios)
{
    socketFormPtr = this;

}

DataSocketStream::~DataSocketStream()
{

}

void DataSocketStream::WriteInt(int toWrite){
    //Implementation that pushes the bytes onto the vector Message
}
void DataSocketStream::WriteLong(long toWrite){
    //...
}

void DataSocketStream::Flush(boost::system::error_code e)
{
    as::write(*socketFormPtr, as::buffer(Message), as::transfer_all(),e);
    delete (&Message);
    std::vector<char> Message;
}

int DataSocketStream::ReadInt(boost::system::error_code e)
{
    char Af[4];
    as::read(*socketFormPtr, as::buffer(Af), e);
    return ((Af[0]<<24)| (Af[1]<<16) | (Af[2]<<8) | (Af[3]));

}

long DataSocketStream::ReadLong(boost::system::error_code e)
{
    //...
}

string DataSocketStream::ReadString(boost::system::error_code e)
{
    //...
}

double DataSocketStream::ReadDouble(boost::system::error_code e)
{
    //...
}
void DataSocketStream::WriteDouble(double val)
{
    //...
}
} 
```

但是，当我尝试类似::io_service io_service; DataSocketStream CLsocket(io_service);

编译器给了我一个错误，错误：'boost::noncopyable_::noncopyable::noncopyable(const boost::noncopyable_::noncopyable&)' 是私有的，我认为这与我的类不是提升的一部分有关图书馆。

我尝试从其他 boost::asio::basic_stream_socket 继承，但这样做也出错了。（这是一个非常奇怪的'Invalid use of "::"'错误）我还尝试创建一个普通的 boost::asio::ip::tcp::socket 然后将指针转换为 DataSocketStream 的指针，但这并没有也不行。

我知道我可以以辅助方法的形式完成所有这些工作，例如：

```
int ReadInt(boost::asio::ip::tcp::socket* S, boost::system::error_code e)
{
    char Af[4];
    as::read(*S, as::buffer(Af), e);
    return ((Af[0]<<24)| (Af[1]<<16) | (Af[2]<<8) | (Af[3]));

} 
```

但继承方式似乎是更好的设计。是否有我遗漏的东西，或者 boost 库真的不是为了以我尝试的方式扩展的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:41:36.383

```
DataSocketStream(as::io_service); 
```

如错误所示，io_service 不可复制，请通过引用传递

```
DataSocketStream(as::io_service&);
                               ^ 
```

# java - 如果未手动处理，则继续传播 MouseWheelEvent

> ID：11444314
> 
> 赞同：1
> 
> 时间：2012-07-12T02:37:19.707
> 
> 标签：java, swing, jscrollpane

我在 a 中有一个组件`JScrollPane`，我想处理一些滚动事件。但是，我不想处理所有这些。不幸的是，当我将 a 添加`MouseWheelListener`到我的子组件时，滚动停止接收滚动事件。

如何“传递”我不想手动处理的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:18:30.067

关于什么？

```
Component.dispatchEvent(AWTEvent e); 
```

基本上你需要打电话：

```
getParent().dispatchEvent(mouseEvent); 
```

现在您可能需要挖掘 scrollPane，但您可以尝试一下这个想法

# drupal - 在 solr 中包含同义词而不使用 synonyms.txt

> ID：11444317
> 
> 赞同：0
> 
> 时间：2012-07-12T02:37:40.930
> 
> 标签：drupal, solr, drupal-6

我正在使用 Drupal Apache Solr 进行搜索。在这个我找到了一个 synonyms.text 文件，您可以在其中手动包含您想要的单词的同义词。

但是我认为，由于我的应用程序有大量数据，因此很难为每个单词手动包含同义词。

我想要实现的搜索结果如下：

> 当用户搜索 allu 代替土豆时，我们将显示土豆作为第一个结果。
> 
> 另一个例子：当用户搜索“raw apple”时，我们会将“apple”显示为第一条记录，因为“raw apple”是“apple”的同义词。

但问题是 10 万条记录，每条记录有 4-5 个同义词。无法手动输入它们。

另一个问题是，如果我想更改特定记录的同义词，我将不得不手动进行，这也很耗时。

我想知道是否有任何其他选项，这样我就不需要手动输入同义词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:46:32.497

IMO 这接近于搜索引擎优化。此外，您可能很难手动管理同义词。

关注印度电子零售网站为容纳同义词所做的事情。例如，电子零售商店通过重命名某个产品的**[肚皮鞋](http://www.jabong.com/women/shoes/womens-belly-shoes/shoes/)**进行了调整，因为购物者往往会误读和拼写“**芭蕾**”。在用户实际搜索它们之前，他们不会预料到它。

所以**记录所有返回很少结果的请求**（否则会让客户不满意）。在索引中维护同义词列表。并在添加新产品时将这些同义词包含在关键字中：添加产品时`x y z`，自动获取所有同义词`x`，`y`并`z`让您的数据输入人员从中选择。

```
'type':'synonym'
'terms':'ballet','belly'

'type':'synonym'
'terms':'potato','allu','aloo'

'type':'product'
'name':'home garden potato planter'
'keywords':'allu','aloo'

'type':'product'
'name':'aloo mutter fry mix'
'keywords':'potato','allu','cheese' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T07:01:46.543

我们可以在索引中维护同义词列表。并通过添加新产品将这些同义词包含在关键字中。添加新产品 abc 时，它可以获取 a、b 和 c 的同义词。

'type' :product' 'name' :'money carlo shirt for men' 'keywords' : 'montey carlo', 'shirts'

示例：[在线购物商店](http://www.onlinesuvidha.com)已适应重命名某些产品和拼写错误的名称。

# javascript - 将属性设置为对对象的引用

> ID：11444326
> 
> 赞同：0
> 
> 时间：2012-07-12T02:38:53.050
> 
> 标签：javascript

我有一个表，它有一个名为“recordsource”的属性，它将保存填充表内容的对象的名称。

```
<table id="tbl" recordsource="myobj"> 
```

现在这是我的功能：

```
var myobj;

function obj()
{
  this.code = new Array();
  this.name = new Array();
}

myobj = new obj();
myobj.code = ["a","b","c"];
myobj.name = ["apple","banana","carrot"];

function populate_table()
{
  mytable = document.getElementById("tbl");
  mytableobj = mytable.getAttribute("recordsource"); //this will return a string
  //my problem is how to reference the recordsource to the myobj object that have
  //the a,b,c array
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:46:20.353

一种方法是将对象用作您希望能够访问的所有其他对象的列表。

```
...

var obj_list = {
  'myobj': myobj
};

function populate_table()
{
  mytable = document.getElementById("tbl");
  mytableobj = mytable.getAttribute("recordsource");

  // Then obj_list[mytableobj] == myobj

  obj_list[mytableobj].code[0] // Gives "a"
  obj_list[mytableobj].name[0] // Gives "apple"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:48:48.697

试试这个`window[ mytableobj ]`它会返回`myobj`

# c# - 如何以编程方式启动应用程序？

> ID：11444327
> 
> 赞同：0
> 
> 时间：2012-07-12T02:38:58.947
> 
> 标签：c#, .net, windows-phone-7

我正在尝试以编程方式调用事件以在 Windows Phone 7 中启动应用程序。我该怎么做呢？

我正在寻找的是如何安排此活动电话？（例如，在 WP7 中打开应用程序）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:00:29.223

我想你在谈论`Tasks`. 所有可用的任务都可以在这里查阅：http: [//msdn.microsoft.com/en-us/library/microsoft.phone.tasks (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks(v=vs.92).aspx)

您正在谈论的通话应用程序是：http `PhoneCallTask`: [//msdn.microsoft.com/en-us/library/microsoft.phone.tasks.phonecalltask (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.phonecalltask(v=vs.92).aspx)

如果你想打电话和app，也就是从手机上**打开**一个应用程序，你真的做不到。请看：[以编程方式在 Windows phone 7 中启动其他应用程序](https://stackoverflow.com/questions/5042353/launching-other-applications-in-windows-phone-7-programatically)

# python - wxpython小部件不响应事件

> ID：11444328
> 
> 赞同：0
> 
> 时间：2012-07-12T02:39:08.690
> 
> 标签：python, wxpython

我是 wxpython 的新手，一直在尝试将一些小部件放入书籍（treebook、notebook、choicebook）中，我经常将一些小部件放置在不响应事件的容器中。我不确定我做错了什么。下面是我的代码之一

```
import wx

class ChoicePanelTwo(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent=parent, id=wx.ID_ANY)
        self.SetBackgroundColour('blue')
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.List = wx.ListCtrl(self, -1, style=wx.LC_REPORT)
        for i in range(seed):
            self.List.InsertStringItem(i, str(i))
        sizer.Add(self.List, 1, wx.ALL|wx.EXPAND, 5)
        self.SetSizer(sizer)

class ChoicePanelOne(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent=parent, id=wx.ID_ANY)
        self.SetBackgroundColour('green')
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.RegisterList = wx.Choicebook(self, wx.ID_ANY)
        sizer.Add(self.RegisterList, 1, wx.ALL|wx.EXPAND, 5)
        for i in range(seed):
            self.RegisterList.AddPage(ChoicePanelTwo(self, seed*50),  str(i))
        self.SetSizer(sizer)

class TreePanel(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent, id=wx.ID_ANY)
        self.SetBackgroundColour('cyan')
        self.Choicbook = wx.Choicebook(self, wx.ID_ANY)
        for i in range(seed):
            self.Choicbook.AddPage(ChoicePanelOne(self, seed*2), str(i))
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.Choicbook, 1, wx.ALL|wx.EXPAND, 5)
        self.SetSizer(sizer)

class AppFrame(wx.Frame):
    """ The main frame of the application
    """
    title = 'Application'
    WindowSize = (1024, 768)
    seed = 2

    def __init__(self):
        wx.Frame.__init__(self, None, -1, self.title, size=self.WindowSize, style=wx.MINIMIZE_BOX|wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX|wx.CLIP_CHILDREN)
        self.create_main_panel()

    def create_main_panel(self):
        self.panel = TreePanel(self, self.seed)        

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = AppFrame()
    app.frame.Show()
    app.MainLoop() 
```

在这个例子中。选择书和清单似乎确实有效。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:15:58.737

这是育儿问题。当它应该是 ChoicBook 时，您将所有 ChoicePanelOne 实例的父级设置为 TreePanel。你在 ChoicePanelOne 中做同样的事情，你创建了一大堆 ChoicePanelTwo，它们的父级是 ChoicePanelOne，而它们应该是 RegisterList。查看下面稍微更改的代码：

```
import wx

class ChoicePanelTwo(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent=parent, id=wx.ID_ANY)
        self.SetBackgroundColour('blue')
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.List = wx.ListCtrl(self, -1, style=wx.LC_REPORT)
        for i in range(seed):
            self.List.InsertStringItem(i, str(i))
        sizer.Add(self.List, 1, wx.ALL|wx.EXPAND, 5)
        self.SetSizer(sizer)

class ChoicePanelOne(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent=parent, id=wx.ID_ANY)
        self.SetBackgroundColour('green')
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.RegisterList = wx.Choicebook(self, wx.ID_ANY)
        sizer.Add(self.RegisterList, 1, wx.ALL|wx.EXPAND, 5)
        for i in range(seed):
            self.RegisterList.AddPage(ChoicePanelTwo(self.RegisterList, seed*50),  str(i))
        self.SetSizer(sizer)

class TreePanel(wx.Panel):
    def __init__(self, parent, seed):
        wx.Panel.__init__(self, parent, id=wx.ID_ANY)
        self.SetBackgroundColour('cyan')
        self.Choicbook = wx.Choicebook(self, wx.ID_ANY)
        for i in range(seed):
            self.Choicbook.AddPage(ChoicePanelOne(self.Choicbook, seed*2), str(i))
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.Choicbook, 1, wx.ALL|wx.EXPAND, 5)
        self.SetSizer(sizer)

class AppFrame(wx.Frame):
    """ The main frame of the application
    """
    title = 'Application'
    WindowSize = (1024, 768)
    seed = 2

    def __init__(self):
        wx.Frame.__init__(self, None, -1, self.title, size=self.WindowSize, 
                          style=wx.MINIMIZE_BOX|wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX|wx.CLIP_CHILDREN)
        self.create_main_panel()

    def create_main_panel(self):
        self.panel = TreePanel(self, self.seed)        

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = AppFrame()
    app.frame.Show()
    app.MainLoop() 
```

你应该下载 wxPython 演示，因为它有很多很好的例子。另请参阅[wiki](http://wiki.wxpython.org/Choicebook)或我的[博客文章](http://www.blog.pythonlibrary.org/2009/12/03/the-book-controls-of-wxpython-part-1-of-2/2/)。

您可以使用[小部件检查工具](http://wiki.wxpython.org/Widget%20Inspection%20Tool)来帮助您诊断问题，并且它会向您显示父级在哪里以及您的尺寸器是如何布置的，等等。

# mp4 - MP4 文件可以包含多个电影原子吗？

> ID：11444332
> 
> 赞同：2
> 
> 时间：2012-07-12T02:39:49.870
> 
> 标签：mp4

我们知道 MP4 容器文件中的电影原子存储描述电影数据的信息。我想知道一个 MP4 文件是否可以包含多个电影原子（“moov”的原子类型）？

有谁知道？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:37:52.430

一个有效的 MP4 文件可能只包含一个“moov”框。这在 ISO 14496-12 规范的 8.2.1 中有说明：

> 演示文稿的元数据存储在文件顶层的单个电影盒中。通常，此框靠近文件的开头或结尾，但这不是必需的。

如果您使用的是碎片化的 MP4 文件，则“moov”的角色主要由“moof”框扮演，并且这些框通常存在多次。

# google-plus - 针对 Google Hangout API 中的特定参与者？

> ID：11444340
> 
> 赞同：1
> 
> 时间：2012-07-12T02:41:09.227
> 
> 标签：google-plus, hangout

我正在尝试将 Google Hangout 应用程序构建为游戏，但我不确定当前的 Google Hangout API 如何针对特定用户。因此，例如，如果我希望特定参与者成为唯一可以在应用程序中看到 div 的人，我将如何根据特定用户 ID 进行限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:39:08.823

您可以使用 gapi.hangout.getParticipantById( gapi.hangout.getParticipantId() ) 获取当前用户的 Participant（参见[https://developers.google.com/+/hangouts/api/gapi.hangout#gapi.hangout .getParticipantById](https://developers.google.com/+/hangouts/api/gapi.hangout#gapi.hangout.getParticipantById)了解更多详情）。

Google ID 存储在 person.id 字段的 Participant 对象中（有关 Participant 对象的详细信息，请参阅[https://developers.google.com/+/hangouts/api/gapi.hangout#gapi.hangout.Participant](https://developers.google.com/+/hangouts/api/gapi.hangout#gapi.hangout.Participant)）。

因此，一旦您拥有当前用户的 Participant，您就可以检查 person.id 字段以查看它是否与相关人员匹配。但是，还有其他领域可能更适合您的确切需求，因此我鼓励您查看并尝试不同的领域和方法。

# java - 如果 someClass.class 是从 anotherClass.class 派生的，请检查编译时间？

> ID：11444343
> 
> 赞同：1
> 
> 时间：2012-07-12T02:41:51.883
> 
> 标签：java, runtime, compile-time, typechecking

这似乎是一个新手问题，在 Java 中，我如何在编译时检查 someClass.class 是否派生自 anotherClass.class 或在运行时是否在编译时是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:47:42.900

在代码中：

```
anotherClass.class.isAssignableFrom( someClass.class ); 
```

如果您还想检查另一个类是否是真正的类（而不是接口），请添加对[`isInterface()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isInterface%28%29)：

```
!anotherClass.class.isInterface() && anotherClass.class.isAssignableFrom( someClass.class ); 
```

例子：

```
System.out.println( Number.class.isAssignableFrom( Integer.class )); // true 
```

请注意，这`instanceof`对您不起作用，因为您没有实例，只有类。

Javadoc 的摘录[`Class.isAssignableFrom`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)：

> 确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口。如果是，则返回 true；否则返回false。如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:49:07.240

您可以在运行时检查`Class.isAssignableFrom()`您是否只有类，或者`instanceof`如果您有实例，则检查运算符。

至于编译时间，我不明白这个问题。为什么编写代码的人在编译*之前不知道呢？*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:45:33.943

正如其他人已经建议的那样，签入运行时很简单。但是，可以通过一些小技巧在编译时完成。

您可以使用泛型来拥有这样的方法：

```
public static <A, B extends A> void isExtends(Class<A> clazzA, Class<B> clazzB) {
    // empty
} 
```

如果您想确保 someClass.class 是从 anotherClass.class 派生的，只需输入您的代码：

```
isExtends(AnotherClass.class, SomeClass.class); 
```

编译器将帮助您验证 SomeClass 是否从 AnotherClass 扩展而来。

（但老实说，我想知道这在现实生活中是否真的有用：P）

# bash - Curl - 用户身份验证/密码中的感叹号

> ID：11444347
> 
> 赞同：41
> 
> 时间：2012-07-12T02:42:15.107
> 
> 标签：bash, curl, escaping

CURL 和 HTTP 用户和密码 Auth 方法有问题，它不喜欢感叹号，我尝试过以下方式转义：

试过了，失败了……

```
/usr/bin/curl -u 'UserName\WithSlash:PasswordWithExclamation!' https://test.com/
/usr/bin/curl -u UserName\\WithSlash:PasswordWithExclamation\! https://test.com/ 
```

如果重要，则不适用于基本或摘要（使用--anyauth）...被401拒绝...

我做错了什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-12T04:00:15.943

```
 curl -u UserName\\WithSlash:PasswordWithExclamation\!  http://.... 
```

工作正常。

它发送

```
 GET / HTTP/1.1
 Authorization: Basic VXNlck5hbWVcV2l0aFNsYXNoOlBhc3N3b3JkV2l0aEV4Y2xhbWF0aW9uIQ==
 User-Agent: curl/7.21.0
 Host: teststuff1.com:80
 Accept: */* 
```

这是“用户名\WithSlash:PasswordWithExclamation！” 在身份验证字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-25T09:20:15.997

没那么复杂，用“”就行了。至少它适用于Linux。

例如：

```
curl -u "username:passwdwithspecialchar" GET https://.... 
```

# javascript - 如何扩大光晕的半径？

> ID：11444349
> 
> 赞同：1
> 
> 时间：2012-07-12T02:42:37.510
> 
> 标签：javascript, algorithm, graphics, effects

我正在编写一个软件过滤器对象并尝试实现光晕效果。我正在使用一种简单的两遍卷积方法，除了效果半径很小而且我似乎无法控制半径之外，它工作得很好。我玩过更大的盒子过滤器并调整了各种像素的权重，但这些似乎都没有任何效果。效果似乎有一个最大尺寸（不是很大），然后对参数的所有更改都只是为了使其更小。

我希望能够创建一个任意半径的光晕。经过大量的实验和在线搜索，我开始怀疑这是否无法完成。我一直在考虑替代方法——等离子、梯度和各种播种方案——但我想先把这条路埋在地下。有谁知道如何创建任意大小的光晕（在软件中）？

javascript 如下（这在 HTML5 画布上运行；如果需要，我可以在代码中添加注释）：

```
// the kernel functions are called via Array.map on this.backBuffer.data, a canvas surface color array
this.kernelFirstPass = function(val, index, array)
{
    if(index<pitch || index>=array.length-pitch || index%pitch<4 || index%pitch>pitch-5 || index%4==3)
        return;
    var c = 1,
        l1 = 1,
        l2 = 1,
        l3 = 1,
        r1 = 1,
        r2 = 1,
        r3 = 1;
    var avg =
    (
        c*this.frontBuffer.data[index]+
        l1*this.frontBuffer.data[index-4]+
        l2*this.frontBuffer.data[index-8]+
        l3*this.frontBuffer.data[index-12]+
        l1*this.frontBuffer.data[index+4]+
        l2*this.frontBuffer.data[index+8]+
        l3*this.frontBuffer.data[index+12]
    )/(c+l1+l2+l3+l1+l2+l3);
    //this.frontBuffer.data[index] = avg;
    array[index] = avg;
}
this.kernelSecondPass = function(val, index, array)
{
    if(index<pitch || index>=array.length-pitch || index%pitch<4 || index%pitch>=pitch-4 || index%4==3)
        return;
    var c = 1,
        l1 = 1,
        l2 = 1,
        l3 = 1,
        r1 = 1,
        r2 = 1,
        r3 = 1;
    var avg =
    (
        c*array[index]+
        l1*array[index-pitch]+
        l2*array[index-(pitch*2)]+
        l3*array[index-(pitch*3)]+
        l1*array[index+pitch]+
        l2*array[index+(pitch*2)]+
        l3*array[index+(pitch*3)]
    )/(c+l1+l2+l3+l1+l2+l3);
    array[index] = avg;
} 
```

* * *

也许我在最初的问题中遗漏的一个重要点是解释我不是试图模拟任何真实或特定的现象（我称之为“光”绽放可能无济于事）。可能是，在处理真实的光现象时，为了获得具有任意半径的半影，您需要具有任意半径的光源（即“完全饱和区域”）。如果这实际上是真正的光绽放的行为方式，那么 Jim 和 tskuzzy 的解释似乎是模拟这种情况的合理方法。无论如何，这不是我想要完成的。我想独立于大小/强度/等来控制绽放的“渐变”部分的半径。的来源。我希望能够设置一个单一的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:52:06.187

In order to achieve a good bloom effect, you should be using [high-dynamic range rendering](http://en.wikipedia.org/wiki/High_dynamic_range_rendering) . Otherwise, your whites will not be bright enough.

The reason for this is that pixel brightnesses are typically represented from the range [0,1]. Thus the maximum brightness is clamped to 1\. However in a real world situation, there isn't really a maximum. And although really bright lights are all perceived as a "1", the visual side-effects like bloom are not the same.

So what you have to do is allow for really bright areas to exceed the maximum brightness, at least for the bloom convolution. Then when you do the rendering, clamp the values as needed.

Once you have that done, you should be able to increase the bloom radius simply by increasing the size of the [Airy disk](http://en.wikipedia.org/wiki/Airy_disk) used in the convolution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:12:39.130

tkuzzy 的答案的简单总结是：使用浮点缓冲区来存储预开花图像，然后卷积成第二个浮点缓冲区（从那里将像素饱和回整数格式）或动态饱和以转换每个输出像素在将其直接存储在整数输出缓冲区之前返回整数。

Airy 卷积必须使用余量来完成（即在定点或浮点中，现在前者通常不值得为如此常见的快速 FPU 带来麻烦），因此图像中较亮的点会相应地流血更多他们的邻近地区。

注意：颜色的动态饱和度并不像单独裁剪通道那么简单——如果你这样做，你可能会在裁剪的点周围出现色调失真和轮廓。

# c# - 如何访问多个按钮或文本框或任何控件？

> ID：11444353
> 
> 赞同：-1
> 
> 时间：2012-07-12T02:43:18.740
> 
> 标签：c#, .net, winforms, textbox

我想通过循环而不是单个名称访问多个`textbox`名称*textbox1、textbox2、textbox3 等。*出于这个原因，我创建了一个创建这个 var 名称的函数。

```
public string[] nameCre(string cntrlName, int size)
{
    string[] t = new string[size];

    for (int i = 0; i < size; i++)
    {
        t[i] = cntrlName.ToString() + (i + 1);
    }
    return t;
} 
```

对于`nameCre("Textbox",5);`所以这个，函数成功返回我 TextBox1，TextBox2 ... TextBox5。

但是当我试图将此字符串转换为 TextBox 控件时

```
string[] t = new string[50];
t=  nameCre("TextBox",5);    
foreach (string s in t)
{
    ((TextBox) s).Text = "";
} 
```

它给了我错误：

> 无法将类型“字符串”转换为“System.Windows.Forms.TextBox”......

我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:58:31.573

```
string[] t= new string[50];
    t= nameCre("TextBox",5);

foreach (string s in t){
TextBox tb = (TextBox)this.Controls.FindControl(s);
tb.Text = "";
} 
```

如果你有很多文本框

```
foreach (Control c in this.Controls)
{
  if (c.GetType().ToString() == "System.Windows.Form.Textbox")
  {
    c.Text = "";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:10:47.740

```
var t = nameCre("TextBox",5);

foreach (var s in t)
{
    var textBox = new TextBox {Name = s, Text = ""};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:58:24.910

也许你需要这个 -

```
 string[] t = new string[50];
        t = nameCre("TextBox", 5);

        foreach (string s in t)
        {
            if (!string.IsNullOrEmpty(s))
            {
                Control ctrl = this.Controls.Find(s, true).FirstOrDefault();
                if (ctrl != null && ctrl is TextBox)
                {
                    TextBox tb = ctrl as TextBox;
                    tb.Text = "";
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T07:45:24.603

这篇文章很老了，无论如何我想我可以给你（或任何其他有类似问题的人）一个答案：

我认为使用文本框的数组（或列表）将是最好的解决方案：

 `````
 // using an Array:
        TextBox[] textBox = new TextBox[5];
        textBox[0] = new TextBox() { Location = new Point(), /* etc */};
        // or
        textBox[0] = TextBox0; // if you already have a TextBox named TextBox0

        // loop it:
        for (int i = 0; i < textBox.Length; i++)
        {
            textBox[i].Text = "";
        }

        // using a List:  (you need to reference System.Collections.Generic)
        List<TextBox> textBox = new List<TextBox>();
        textBox.Add(new TextBox() { Name = "", /* etc */});
        // or
        textBox.Add(TextBox0); // if you already have a TextBox named TextBox0

        // loop it:
        for (int i = 0; i < textBox.Count; i++)
        {
            textBox[i].Text = "";
        } 
````  `我希望这有帮助 ：）``

# python - blo 蟒蛇树

> ID：11444367
> 
> 赞同：0
> 
> 时间：2012-07-12T02:46:27.677
> 
> 标签：python

嗨，在 bio pythons trie 实现中有一个字典单词列表

我有一个名为 t 的 trie 对象，其中加载了一个巨大的字典。

我有一个从整数到字母表的字典映射，用于一些奇怪的加密算法

什么是最优雅或 Pythonic 的方式，所以当我使用 N 个字母词搜索 trie 时，忽略并删除长度小于或大于 N 的所有结果，并且只存储具有精确 N 长度的结果

假设输入是 227 和 8733，它们映射到字典中的字母，例如 ([bar,car,carpet][tree,tree's,treed,used]) 我只想保持输出的长度相同，所以当输入是 227 只有 car 和 bar 会输出我想要的结果应该是 ([bar,car],[tree,used])

所以我想省略所有从 trie 产生的结果，这些结果的长度大于或小于原始输入长度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:08:36.850

```
for word in t.with_prefix(string): # I assume with_prefix() returns a list of words
    if len(word) == len(string):
       words.append(word) 
```

或使用基因expr：

```
words.extend(w for w in t.with_prefix(string) if len(w) == len(string)) 
```

# php - 如果我从 FOSUserBundle 用户实体扩展，哪些字段会保存到数据库

> ID：11444371
> 
> 赞同：1
> 
> 时间：2012-07-12T02:46:54.977
> 
> 标签：php, symfony, doctrine-orm

我正在从 FOSUserbundle 扩展我的 UserBundle。`Model/User.php`我看到里面有一个完整的用户类 `Entity/User.php`

我正在扩展我的课程

```
namespace MYS\CoreBundle\Entity;
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**

 * @ORM\Entity

 * @ORM\Table(name="fos_user")

 */

class User extends BaseUser

{

     /**

 * @ORM\Column(type="string", length="255")

 *

 * @Assert\NotBlank(message="Please enter your name.", groups={"Registration", "Profile"})

 * @Assert\MinLength(limit="3", message="The name is too short.", groups={"Registration", "Profile"})

 * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})

 */

protected $firstName; 
```

我的问题是：

1.  是否为 FOSUSerbundle 用户实体生成了任何数据库表，或者它们只是类并且没有持久化

2.  在我上面的代码中，我的用户表将只有名字作为属性或`Model/User.php`FosUserBundle 中的所有其他属性

3.  FOSUserBundle 持久化他的表的逻辑在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:45:49.003

1.  不可以。您必须只更新数据库架构，并且字段 $firstName 将是 fos_user 中的另一列。
2.  见 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:11:00.123

1 - 是的，将创建一个表。但请记住，由于您使用自己的扩展 FOSUserBundle 提供的用户实体，实际的表结构可能包含 FOSUserBundle 实体没有的附加字段。

2 - 您的用户表将包含在 FOSUserBundle 的用户实体中定义的所有字段，以及在您的子类中定义的任何字段。

3 - 我不确定，但看看源代码，你会找到答案。

# android - 通过代理的谷歌云消息GCM

> ID：11444372
> 
> 赞同：7
> 
> 时间：2012-07-12T02:46:58.183
> 
> 标签：android, google-cloud-messaging

我无法通过公司代理向设备发送消息。
我已经在谷歌网站上完成了 GCM 教程，并成功地在谷歌服务器上使用 android 模拟器注册了一个设备，也在我端的服务器上注册了一个设备。
为此，我必须通过公司代理，将其设置在模拟器的接入点中。现在我遇到的问题是通过同一个代理从我的服务器向设备发送消息。我正在使用演示中的 servlet 代码，它使用

```
com.google.android.gcm.server.Sender 
```

帮助类来发送消息。

我在 tomcat 7 上运行 servlet。

我已经尝试在 catalina.properties 文件中设置代理，就像这样。

```
http.proxyHost=proxy.company.com  
http.proxyPort=8080 
```

我已经尝试在 servlet 内部设置属性，如下所示。

```
System.setProperty("http.proxyHost", "proxy.company.com");  
System.setProperty("http.proxyPort", "8080"); 
```

但我仍然得到超时。我知道它是公司代理，因为我在没有代理的情况下在家中进行消息传递。

我已经看到在 java 代码中创建了一个代理对象，然后用它创建了一个连接，但我认为这在这里不可用，因为我使用 Sender 帮助程序类来发送消息。

这是超时失败的行。

```
Result result = sender.send(message, registrationId, 5); 
```

任何帮助，将不胜感激。

问候

账单

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T07:54:54.343

好吧，我终于让它工作了。在我的评论中，我提到我已成功发送消息，但模拟器没有收到它。我忘记了遵循我自己之前的建议，并使用这样设置的代理参数从命令行运行模拟器：

emulator.exe -avd avd22google -http-proxy proxy.company.com:8080 -debug-proxy

总而言之，我最初的问题是我已经在 GCM 和我的本地服务器上注册了模拟器，但是当我点击发送消息时，我遇到了超时。

我最初以为是防火墙，所以我做了一些研究并在 tomcats catalina.properties 文件中设置了代理。这没什么区别。

我使用“Charles”网络代理调试器软件查看消息试图发送到的位置，结果显示为[https://android.googleapis.com:443](https://android.googleapis.com:443)

所以我最初将以下内容添加到我的 catalina.properties 文件中：

```
https.proxyHost=proxy.company.com  
https.proxyPort=443 
```

它仍然没有工作。我的一位同事告诉我，我们公司的代理通过端口 8080 处理所有类型的请求，所以我将 poort 行更改为：

```
https.proxyPort=8080 
```

这允许发送消息。但是后来消息没有通过模拟器，我在 LogCat 中收到以下错误。

```
[GTalkConnection.12] doConnect: caught XMPPError connecting to mtalk.google.com:5228.: -- caused by: java.net.SocketException: The operation timed out 
```

然后我记得你需要用命令行启动模拟器才能让它使用代理。一旦我这样做了，我的模拟器上就会出现大量消息！

所以我终于让它端到端地工作了。我花了大约一周的时间才让 GCM 在我的公司防火墙内完全正常工作，所以希望这篇文章可以帮助其他一些可怜的草皮在未来这样做。

干杯

账单

# java - Java 翻译 API

> ID：11444374
> 
> 赞同：0
> 
> 时间：2012-07-12T02:47:15.867
> 
> 标签：java, translation, google-translate, microsoft-translator

是否有任何免费的 Java 在线/离线翻译 API，不需要您像 Google 和 Microsoft 那样付费或注册？我一直在尝试找到一些，但它们都有限制或需要以某种形式付款。我所需要的只是偶尔翻译一两个字符串。如果没有，谷歌翻译是否有解决方法？我看过一篇涉及使用电子表格的帖子，但它是用 JavaScript 编写的，我需要这个用于 Java 而不是 JavaScript。

我注册没问题。这是我得到的报酬，因为我正在向公众发布这个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T16:27:52.277

microsoft Translator 每月提供 200 万个免费字符。

# c# - C# DriveInfo 类导致 windows 错误弹出

> ID：11444375
> 
> 赞同：1
> 
> 时间：2012-07-12T02:47:23.773
> 
> 标签：c#, .net, windows

使用 DriveInfo 类时，偶尔会显示一个窗口消息弹出窗口：

![驱动器中没有磁盘。 请将磁盘插入驱动器 \Device\Harddisk1\DR1](../Images/9a7d5b79a86a8a669c8af48f7ce56663.png)

我正在使用的代码是相当标准的：

```
var driveInfos = DriveInfo.GetDrives();
foreach (DriveInfo driveInfo in driveInfos)
{
    if (driveInfo.IsReady &&
        (driveInfo.DriveType == DriveType.Network || driveInfo.DriveType == DriveType.Removable))
        try
        {
            var driveText = string.Format("{0} ({1})", driveInfo.VolumeLabel, driveInfo.Name); 
```

在网上查看后发现这是一个不常见的错误，但似乎是由于机器上的环境问题造成的（人们报告它在运行 chrome 之类的东西时发生）。很多人通过清理旧的 USB 引用解决了这个问题。

除了显示消息之外，该错误实际上并不会阻止程序正常工作。（并且不会被困在 catch 块中）

由于它是一个 wpf 应用程序，它将在最终用户的 PC 上分发和运行，我宁愿不显示消息框。我该怎么做？有什么影响？

编辑：

进一步调查表明，这种行为可能是由于代码正在通过后台工作程序执行并且它的两个实例同时运行而引起的。

采用相同的代码并在不使用后台工作人员的情况下执行它似乎可以毫无问题地运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:15:43.450

我测试了你的代码，它运行没有问题。它似乎正在使用`driveInfo.IsReady`导致您的问题，因为它需要每个驱动器（CD/DVD/...）。先查`DriveType`后查`IsReady`；像这样：

```
if (driveInfo.DriveType == DriveType.Network || 
    driveInfo.DriveType == DriveType.Removable)
    if (driveInfo.IsReady)
    {
       var driveText = string.Format("{0} ({1})",
                                     driveInfo.VolumeLabel, driveInfo.Name);
    } 
```

# github-pages - 使用 GitHub Pages，不使用 Jekyll 时是否可以指定根 web 目录？

> ID：11444377
> 
> 赞同：9
> 
> 时间：2012-07-12T02:47:32.310
> 
> 标签：github-pages

我正在使用另一个静态站点生成器，我希望能够将源文件（在 markdown 中）以及生成的站点签入到我的 username.github.com 存储库中。所以，很像 Jekyll，但我没有使用 Jekyll。我的结构是：

```
- 资源
  1.md
  2.md
- 目标
  索引.html
  1.html
  2.html
  --css
    应用程序.css
index.html（GitHub Pages 想要这里的根目录）

```

GitHub Pages 正在为 index.html 提供服务，并希望站点的其余部分位于根目录下。我希望从 target/index.html 提供该网站。这将允许我创建一个 source/3.md，在本地生成它，然后推送 source/3.md 和 target/3.html。

我能想到的唯一方法是：

1.  有 2 个存储库 - 一个用于降价，另一个仅用于 html。

2.  有一个包含降价的分支并将源提交到该分支并在提交生成的目标 html 之前切换到 master。

3.  将markdown保留在根目录（而不是'source'）并将html生成到相同的根目录

4.  作为一个长镜头，采用 Jekyll 目录结构，并希望它不会因为认为它是一个真正的 Jekyll 风格的网站而以某种方式干扰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T23:31:08.373

查看 jekyll 文档[https://help.github.com/articles/using-jekyll-with-pages](https://help.github.com/articles/using-jekyll-with-pages)似乎这是不可能的。源目录不能更改。

# jquery - JQuery：如果元素有文本，则将类添加到元素

> ID：11444378
> 
> 赞同：3
> 
> 时间：2012-07-12T02:47:37.797
> 
> 标签：jquery, css, class, addclass

我在 ul 中有一系列链接。有些有文字，有些没有，例如：

```
<ul>
<li><a href="google.com">Google</a></li>
<li><a href="yahoo.com">Yahoo</a></li>
<li><a href="bing.com">Bing</a></li>
<li><a href="#"></a></li>
<li><a href="#"></a></li>
<li><a href="#"></a></li>
</ul> 
```

我想使用 JQuery 将一个类仅应用于其中包含文本的 a 标记。

到目前为止，我有这个：

```
var buttontext =  $('ul a').text();

if (buttontext.length > 0){
$('ul a').addClass('buttoneffect');
} 
```

但是该类仍然影响所有标签。我只是想知道是否有人可以在这里为我指出正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:15:23.057

当我写它时，这似乎最简单：

```
$('a').filter(
    function(){
        var child = this.firstChild;
        if (child){
            return child.nodeType == 3 && child.nodeValue.length;
        }
    }).addClass('buttoneffect');​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uawBL/1/)。

或者在纯 JavaScript 中：

```
var aElems = document.getElementsByTagName('a');

for (var i=0,len=aElems.length; i<len; i++){
    var child = aElems[i].firstChild;
    if (child && child.nodeType == 3 && child.nodeValue.length >= 1) {
        aElems[i].className += ' buttoneffect';
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uawBL/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:42:27.040

试试这个

```
$('ul a').each(function()
               {                                        
                  if($(this).text()!='')    
                  {
                     $(this).addClass('buttoneffect');   
                  }
               }); 
```

检查[http://jsfiddle.net/uawBL/11/](http://jsfiddle.net/uawBL/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:50:22.340

```
$("ul a").each(function (i, e) {
    var $e = $(e);
    if ($e.text().length > 0) {
        $e.addClass("buttoneffect");
    }
}); 
```

# salesforce - Salesforce 到 Salesforce 往返字段更新问题

> ID：11444381
> 
> 赞同：5
> 
> 时间：2012-07-12T02:47:50.943
> 
> 标签：salesforce

自从我不得不进行 S2S 集成以来，已经发布了几个版本，但我遇到了一个意想不到的问题，希望有人能更有效地解决这个问题。

我有两个组织，通过 S2S 共享联系人。

每个组织中的联系人具有相同的架构，即标准字段和自定义字段。我已经复制了一个只有两个自定义字段的基本案例：复选框字段 A 和 Number(18,0) 字段 B。

组织 1 发布字段 A，并订阅字段 B。

组织 2 订阅字段 A，并发布字段 B。

组织 1 通过通过 S2S 与组织 2 共享联系人来启动所有 S2S 工作流程。组织 2 已启用自动接受。

Org 2 有一个 Contact Before Insert 触发器，它只使用字段 A 来计算字段 B 的值。例如，如果选中字段 A，则使用 2 填充字段 B，如果未选中，则填充 0。（这当然是对我真正需要做的，但这是基本的可重复案例。）

这在组织 2 中一切正常 - 联系人在字段 A 中遇到很好，我看到字段结果被计算到字段 B 中。

问题是结果 - 字段 B - 在下一次联系人更新之前不会自动共享回 Org 1。就像我在组织 2 中编辑同一联系人的非共享字段一样简单，例如“描述”，然后我立即看到字段 B 的先前计算值被推回组织 1。

我假设这是因为，由于字段 B 的计算发生在插入前，S2S 连接假定当前更新事务仅由它自己执行（我可以看到这个逻辑如何防止无限 S2S 更新循环）。

我首先尝试创建一个工作流字段更新，当字段 B 更改时强制更新一个（新的，虚拟的）共享字段，但这仍然没有导致更新回流，大概是因为它位于 Salesforce 认为可以免除 re -分享。还尝试了在字段更改时将潜在客户转发回连接队列的工作流规则，但它也不起作用。

然后，我在 AfterUpdate 触发器中尝试了重新更新语句 - 如果共享字段已更新，则重新加载并重新更新共享对象。那也没用。

我确实找到了一个解决方案，它是由 AfterUpdate 触发器调用的 Future 方法，该方法重新加载并触及其共享字段被 BeforeUpdate 触发器更改的任何记录。这确实会导致现场结果在原始组织中近乎实时地显示。

这个解决方案现在对我有用，但我觉得我必须遗漏一些东西。它导致执行的 Future 调用和 DML 超出了必要的范围。

有没有人对此有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-03T00:49:07.033

遇到了同样的问题，一位了不起的 Salesforce 支持代表发现了这份文档，其中涵盖了 Salesforce 在此处的具体指导：[https ://web.archive.org/web/20210603004222/https://help.salesforce.com/articleView?id=sf .business_network_workflows.htm&type=5](https://web.archive.org/web/20210603004222/https://help.salesforce.com/articleView?id=sf.business_network_workflows.htm&type=5)

> 有时使用 Apex 触发器而不是工作流是有意义的。假设您有一个工作流规则，当字段 A 更新时，它会更新辅助字段字段 B。即使您的 Salesforce 到 Salesforce 合作伙伴订阅了字段 A 和 B，由您的工作流规则触发的字段 B 更新也不会发送到您的合作伙伴的组织。这可以防止更新循环。
> 
> 如果您希望将此类次要字段更新发送到您的 Salesforce 到 Salesforce 合作伙伴，**请将工作流替换为使用提交后逻辑更新次要字段的 Apex 触发器。**
> 
> 在双向连接中，Salesforce 到 Salesforce 更新仅在“之后”触发器（例如，“插入之后”或“更新之后”）上触发，而不是在“之前”触发器上。

这就是 OP 最终所做的事情，但来自 Salesforce 的这份文档至少澄清了作为讨论的一部分在这里所做的假设和猜测。它还有助于指出，在这些情况下使用“之前”触发器并不是最佳实践，以供将来参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T13:15:08.920

我认为没有比你正在做的更好的解决方法了。未来标注的限制增加到相当高的水平，这不应该是您的关注点。

可能您可以做的另一件事是（不确定这是否会起作用，因为我们仍然处于相同的上下文中） - 组织 1 - 字段 A 已更新，发布合同

组织 2 - 更新组织 2 中的合同之前；如果 A 已更新 - 将合同的 ID 保存在新的自定义对象中。在更新新自定义对象后，更新给定合同 ID 的字段 B。B 的更新将被发布

# c# - C# 编译器将静态类解释为命名空间

> ID：11444383
> 
> 赞同：0
> 
> 时间：2012-07-12T02:48:07.123
> 
> 标签：c#, visual-studio-2010, compilation, compiler-errors

我有一个非常奇怪的问题。我尝试了一切来修复它，但到目前为止没有任何效果。

正如您在第一张图片中看到的，当我尝试从“UnnamedGameServer”外部的命名空间中引用静态类“SharedConstants”时，编译器返回以下错误：

> 命名空间“SharedConstants”中不存在类型或命名空间名称“ServerInfo”

我发现使用 UnnamedGameServer.SharedConstants 而不是 SharedConstants 并使用 UnnamedGameServer 引用此类来解决此问题；在 .cs 文件的顶部。但我更喜欢避免在我使用该类的每一行上引用它。

这是我的代码的一些屏幕截图：

第一张截图：

![Visual Studio 中的错误](../Images/fa884dedf4512e101ff3a3a006c21b79.png)

第二张截图：

![Visual Studio 中的错误](../Images/b0d86ac428e30bffe6678b466a9c341d.png)

**编辑：**使用语句的屏幕截图：

![Visual Studio 中的错误](../Images/249e479aad6b5899cbaf5ac871010e5f.png)

**编辑2：**没有截图的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Collections;
using ProtoBuf;
using UnnamedGameServer;
using System.Threading;

namespace Unnamed_game
{
    class Connection
    {
        public struct UserInformation
        {
            public string Username;
            public int UserID;
        }

        static private Connection instance;

        private Connection()
        {
            client = new TcpClient();
            header = new PacketHeader();
            _isLoggedCharacter = false;
            _isLoggedUser = false;
            magicByte = UnnamedGameServer.SharedConstants.ServerInfo.MagicByte;
        }

        // properties
        TcpClient client;
        PacketHeader header;
        Thread serverCommThread;
        byte[] magicByte;
        bool _isLoggedCharacter;
        CharacterInformation chInformation
        {
            get
            {
                return Player.Instance().Information;
            }
        }
        bool _isLoggedUser;
        public UserInformation Information;

        // methods
        static public Connection Instance()
        {
            if(instance == null)
            {
                instance = new Connection();
                return instance;
            }
            else
            {
                return instance;
            }
        }
        /// <summary>
        /// Should never be used. Use the parameterless one to get the server address and information. It doesn't use try-catch, the exception handling should be done on Game1.Initialize()
        /// </summary>
        public void ConnectServer(IPEndPoint endPoint)
        {
            if (client.Connected)
            {
                return;
            }
            else
            {
                client.Connect(endPoint);
                serverCommThread = new Thread(HandleServerCommunication);
                serverCommThread.Start();
            }
        }
        public void ConnectServer()
        {
            this.ConnectServer(new IPEndPoint(UnnamedGameServer.SharedConstants.ServerInfo.ServerAddress, UnnamedGameServer.SharedConstants.ServerInfo.Port));
        }
        private void HandleServerCommunication()
        {
            if (client == null)
            {
                throw new Exception("The TcpClient is null");
            }
            else
            {
                // this doesn't work
                byte[] magicByte = SharedConstants.ServerInfo.MagicByte;
                // this works
                magicByte = UnnamedGameServer.SharedConstants.ServerInfo.MagicByte;
            }
        }
        private void SendPacket(ActionType actionType, object packetStruct)
        {
            try
            {
                header.ActionTypeNumber = (short)actionType;
                using (NetworkStream stream = client.GetStream())
                {
                    stream.Write(magicByte, 0, magicByte.Length);
                    Serializer.SerializeWithLengthPrefix<PacketHeader>(stream, header, PrefixStyle.Base128);
                    switch (actionType)
                    {
                        case ActionType.Connect:
                            Serializer.SerializeWithLengthPrefix<PacketConnect>(stream, (PacketConnect)packetStruct, PrefixStyle.Base128);
                            break;
                    }
                    stream.Write(magicByte, 0, magicByte.Length);
                }
            }
            catch (Exception)
            {
                // error
                return;
            }
        }
        public void CreateNewCharacter(string characterName, CharacterClass chClass, CharacterRace chRace)
        {
            var info = new NewCharacterInfo();
            info.Name = characterName;
            info.OwnerUsername = Information.Username;
            info.Class = chClass;
            info.Race = chRace;
            CreateNewCharacter(info);
        }
        public void CreateNewCharacter(NewCharacterInfo info)
        {
            var packet = new PacketCreateNewCharacter();
            packet.chInfo = info;
            SendPacket(ActionType.CreateNewCharacter, packet);
        }
        public void ConnectUser(string username, string unhashedPassword)
        {
            var packet = new PacketConnect();
            packet.Username = username;
            packet.UnhashedPassword = unhashedPassword;
            ConnectUser(packet);
        }
        public void ConnectUser(PacketConnect packet)
        {
            if (_isLoggedCharacter || _isLoggedUser)
            {
                return;
            }
            else
            {
                SendPacket(ActionType.Connect, packet);
            }
        }
        public void ConnectCharacter(string characterName, short serverID)
        {
            var packet = new PacketLoginCharacter();
            packet.CharacterName = characterName;
            packet.ServerID = serverID;
            ConnectCharacter(packet);
        }
        public void ConnectCharacter(PacketLoginCharacter packet)
        {
            if (_isLoggedCharacter || !_isLoggedUser)
            {
                return;
            }
            else
            {
                SendPacket(ActionType.LoginCharacter, packet);
            }
        }
        public void Disconnect(PacketDisconnect packet)
        {
            if (!_isLoggedUser)
            {
                return;
            }
            else
            {
                SendPacket(ActionType.Disconnect, packet);
            }
        }
    }
} 
```

**编辑 3:** : 存储 SharedConstants 的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Runtime.InteropServices;

namespace UnnamedGameServer
{
    /// <summary>
    /// ALL CONSTANTS THAT ARE SHARED BY THE CLIENT AND THE SERVER ARE STORED HERE. DONT ADD MORE CLASSES THAT STORE CONSTANTS. Use GameConstants for game-only constants.
    /// </summary>
    public static class SharedConstants
    {
        /// <summary>
        /// Server information with port, IP and MagicByte
        /// </summary>
        public static class ServerInfo
        {
            public const short Port = 6483;
            public static readonly IPAddress ServerAddress = IPAddress.Loopback;
            public static byte[] MagicByte
            {
                get
                {
                    return new byte[4] { 0xF1, 0x64, 0x83, 0xC4 };
                }
            }
        }
        /// <summary>
        /// Character constants shared by client/server
        /// </summary>
        public static class CharacterConstants
        {
            public static class Movement
            {
                /// <summary>
                /// Coordinates per update
                /// </summary>
                public const float DefaultCoordinatePerUpdate = 8;
                public const float ModifierNormal = 1f;
                public const float ModifierFrozen = 0.8f;
                public const float ModifierSpeedBuff = 1.2f;
                public const float ModifierStop = 0f;
            }
        }
        /// <summary>
        /// Networking constants
        /// </summary>
        public static class Networking
        {
            public const int MilisecondsPerMovementUpdate = 100;
            public const ushort ActionTypeNonMetaActionStart = 0x0FFF + 1;
            /// <summary>
            /// What is the number of actions a non-logged user can perform
            /// </summary>
            public const ushort ActionTypeNonLoggedUser = 0x000F;
        }
    }

    enum CharacterDirection
    {
        NoMovement = 0x00,
        Top = 0x01,
        TopRight = 0x02,
        TopLeft = 0x03,
        Right = 0x04,
        BottomRight = 0x05,
        Bottom = 0x06,
        BottomLeft = 0x07,
        Left = 0x08
    }
    enum CharacterStatus
    {
        Alive = 0x01,
        Dead = 0x02
    }
    enum CharacterClass
    {
        Mage = 0x01,
        Knight = 0x02
    }
    enum CharacterRace
    {
        Human = 0x01
    }
    enum CharacterType
    {
        Player = 0x01,
        GameMaster = 0x02
    }
    enum CharacterFaction
    {
        Newbie = 0x01,
        Army = 0x02,
        Chaos = 0x03
    }
    enum CharacterMovementStatus
    {
        Normal = 0x01,
        Frozen = 0x02,
        SpeedBuff = 0x03,
        Stop = 0x04
    }
    struct CharacterExperience
    {
        public CharacterExperience(short level, int experience)
        {
            Level = level;
            Experience = experience;
        }

        public short Level;
        public int Experience;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:17:33.790

有一个 using 语句应该可以工作。如果在 using 语句之前有任何代码，那么这可能会导致问题。

您可以尝试将 using 语句放在命名空间之后，例如：

```
namespace Unnamed_game
{
    using UnamedGameServer;
    class Connection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:56:50.017

这应该有效：

```
using UnnamedGameServer;

class MyClass {
byte[] b = SharedConstants.ServerInfo.MagicByte;
} 
```

如果这不能解决您的问题，请发布显示问题的简短但完整示例的代码（以文本形式，而不是屏幕截图）。

# jquery - 在表单提交偶数处理函数上获取此表单的属性

> ID：11444384
> 
> 赞同：1
> 
> 时间：2012-07-12T02:48:36.880
> 
> 标签：jquery, html

我希望能够获得表单属性之一（`url`属性），并将其保存为提交时的变量。我在从评论框中获取值时也遇到了问题。

这是我的 HTML 表单：

```
<form class="comment_form" action="" url="comments/12/3/addcomment" method="post">
    <textarea name="commentField">Write your comment here...</textarea>
    <p align="center">
        <input type="submit" class="form-button" value="Submit Comment" />
        <input type="button" class="form-button" values="Cancel" />
    </p>
</form> 
```

这是我当前的javascript：

```
$('.comment_form').submit(function() { 
    alert("Working!"); // "Working!"
    var urlAttr = $(this).attr("url"); // Want to get the 'url' contained in the form tag. 
    alert(urlAttr); // undefined
    var dataString = 'comment=' + $("textarea#").value(); // want to get everything from the comment box
    alert(dataString) // No message at all here. 
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:25:09.063

工作jsfiddle：http:
[//jsfiddle.net/AWpbg](http://jsfiddle.net/AWpbg)

您在 . 末尾缺少一个分号`alert(dataString)`。

jQuery中没有`.value()`，所以我也改为`$('textarea').value()`，`$('textarea').html()`但`$('textarea').val()`也可以。

# blackberry - 命中 ClassCastException

> ID：11444397
> 
> 赞同：1
> 
> 时间：2012-07-12T02:50:19.920
> 
> 标签：blackberry, popup, classcastexception

我正在调用这个类`PopupScreen`。

```
public class Custom_LoadingScreen extends PopupScreen {
private VerticalFieldManager vfm;
private Util_AnimateGifField anmtFldCycle = null;
private GIFEncodedImage gifImgCycle;

public Custom_LoadingScreen() {
    super(new VerticalFieldManager());
    Background bg = BackgroundFactory.createSolidTransparentBackground(
            Color.BLACK, 190);
    setBackground(bg);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(),
            Border.STYLE_TRANSPARENT));

    gifImgCycle = (GIFEncodedImage) GIFEncodedImage
            .getEncodedImageResource("LoadingSpinner.gif");
    anmtFldCycle = new Util_AnimateGifField(gifImgCycle,
            Field.FIELD_HCENTER);

    vfm = new VerticalFieldManager(USE_ALL_WIDTH) {
        protected void sublayout(int maxWidth, int maxHeight) {
            super.sublayout(Display.getWidth(), Display.getHeight());
            setExtent(Display.getWidth(), Display.getHeight());
        }
    };
    int padding = (Display.getHeight() - 16) / 2;
    if (padding > 0) {
        anmtFldCycle.setPadding(padding, 0, 0, 0);
    }
    vfm.add(anmtFldCycle);
    add(vfm);
}

//public void Popupscreen() {
    //Main.getUiApplication().popScreen(this);
//}

public boolean keyDown(int keycode, int status) {
    if (Keypad.key(keycode) == Keypad.KEY_ESCAPE) {
        Main.getUiApplication().popScreen(this);
        return true;
    }
    return super.keyDown(keycode, status);
}
} 
```

在一个按钮中，我在进入下一个屏幕之前按下它。

```
financebtn = new Custom_ButtonField(finance, financeactive,
            financeactive) {
        protected boolean navigationClick(int status, int time) {
            Main.getUiApplication().pushScreen(new Custom_LoadingScreen());
            Main.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                //  Main.getUiApplication().popScreen();
                    Main.getUiApplication().pushScreen(
                            new Main_NewsDetail());
                }

            }, 1 * 1000, false);

            return true;
        }
    };
    add(financebtn); 
```

结果给我`Uncaught:ClassCastException`。我可以调用另一个类似于`custom_loadingscreen`popupscreen 的类。它工作正常。

我也尝试在另一个按钮中调用这个类，但仍然是同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T04:56:19.640

如果你看一下你的`Custom_LoadingScreen`代码，你只有一个地方在做演员：

```
gifImgCycle = (GIFEncodedImage) GIFEncodedImage
        .getEncodedImageResource("LoadingSpinner.gif"); 
```

所以，这是一个开始寻找的好地方。如果你用谷歌搜索**“BlackBerry GIFEncodedImage ClassCastException”**，你会发现这个线程：

[http://supportforums.blackberry.com/t5/Java-Development/GIFEncodedImage-in-BlackBerry-OS7/td-p/1228959](http://supportforums.blackberry.com/t5/Java-Development/GIFEncodedImage-in-BlackBerry-OS7/td-p/1228959)

问题在于，为了优化，黑莓喜欢将图像转换为大多数智能手机最适合的 PNG 格式。所以，这里发生的事情是您的 GIF 图像实际上正在转换为 PNG 图像。因此，当您调用该`getEncodedImageResource()`方法时，您返回的对象实际上可能是 type `PNGEncodedImage`，而不是`GIFEncodedImage`，并且您会收到异常。偷偷摸摸的吧？

您可以通过几种方式解决它。

1.  在**Blackberry_App_Descriptor.xml**文件中，您可以取消选中指定将图像转换为 PNG 的设置（**构建**选项卡 ->**将图像文件转换为 png**）
2.  您可以通过将 GIF 文件重命名为**LoadingSpinner.agif**之类的名称来欺骗构建系统。该工具集无法识别 .agif 扩展名，因此不会尝试对其进行转换。当然，如果你这样做了，请记住在加载 Java 代码时也要更改文件名。
3.  您可以更改要使用的代码`PNGEncodedImage`，或像这样测试对象：

```
EncodedImage img = EncodedImage.getEncodedImageResource("LoadingSpinner.gif");
if (img instanceof GIFEncodedImage) {
   // cast to GIFEncodedImage
} else if (img instanceof PNGEncodedImage) {
   // cast to PNGEncodedImage
} 
```

数字 (1) 将失去所有非 PNG 图像的非 PNG 到 PNG 转换优化，而不仅仅是这个。

数字 (2) 看起来确实有点难看。但是，这样做的好处是您可以仅对这一个图像禁用此行为。如果您的大多数图像不是 PNG 图像，让 BlackBerry 为您优化其他图像可能会很有价值。但是，也许这个需要是 GIF。因此，#2 让您将其作为一种特殊情况处理。

我只是猜测这张图片可能是**动画**GIF？是对的吗？如果是这样，您可能希望将其保留为 GIF，因此您不想执行数字 (3)，它可以将其转换为 PNG 并按原样使用。

# html - 完善画布鼠标坐标

> ID：11444401
> 
> 赞同：0
> 
> 时间：2012-07-12T02:50:50.310
> 
> 标签：html, canvas

我正在研究一个可以用来获取画布坐标的函数。效果很好，直到画布的一部分在屏幕上不可见。

当我使窗口变小并滚动到右下角时，它似乎是从画布的可见部分开始的。如何解决此问题以获得正确的坐标？

这是我的代码：

```
function getMousePosition(event) {
var MX = new Number();
var MY = new Number();

if (event.x != undefined && event.y != undefined) {
    MX = event.x;
    MY = event.y;
}
else { // Firefox method to get the position
    MX = event.clientX + document.body.scrollLeft +
    document.documentElement.scrollLeft;
    MY = event.clientY + document.body.scrollTop +
    document.documentElement.scrollTop;
}
MX -= canvas.offsetLeft;
MY -= canvas.offsetTop;
alert("x: " + MX + "  y: " + MY); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:57:12.330

这是我用来获取画布坐标的函数：

```
function getCanvasPos(el) {
    var canvas = document.getElementById(el);
    var _x = canvas.offsetLeft;
    var _y = canvas.offsetTop;

    while(canvas = canvas.offsetParent) {
        _x += canvas.offsetLeft - canvas.scrollLeft;
        _y += canvas.offsetTop - canvas.scrollTop;
    }

    return {
        left : _x,
        top : _y
    }
}; 
```

...这是鼠标坐标的功能

```
function mousePos(e) {

    var mouseX = e.clientX - getCanvasPos(e.target).left + window.pageXOffset;
    var mouseY = e.clientY - getCanvasPos(e.target).top + window.pageYOffset;
    return {
        x : mouseX,
        y : mouseY
    };
}; 
```

鼠标事件侦听器看起来像这样：

```
canvas.addEventListener('mousemove', function(e){
    console.log(canvas.mousePos(e).x);
}); 
```

# javascript - 使用功能调用模式扩展对象。如何？

> ID：11444406
> 
> 赞同：0
> 
> 时间：2012-07-12T02:51:26.823
> 
> 标签：javascript

在这里小提琴：http: [//jsfiddle.net/rhodee/4NKVH/](http://jsfiddle.net/rhodee/4NKVH/)

我一直在阅读 Crockford 的书，想知道什么是一种行之有效的方法来撬开基本构造函数对象并向其添加子对象可以访问的函数？

我以为我可以访问对象的原型，但鉴于我当前的代码，这似乎是不可能的。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:48:55.457

你有几个错误：

*   您的构造函数返回一个完全不相关的对象。不要那样做。返回`this`。（如果不`return`存在语句，则构造函数会隐式执行此操作）
*   超构造函数调用在 JS 中不是很直观。你需要丑陋的构造`MySuperclass.call(this, arg1, arg2, ...);`，所以在你`mammal.call(this, spec);`的`cat`课堂上
*   您需要`new`关键字来实例化使用原型链的对象。

有关代码的固定版本，请参阅[http://jsfiddle.net/4NKVH/5/](http://jsfiddle.net/4NKVH/5/)。

# java - 获取嵌套类方法的 JNI 签名

> ID：11444407
> 
> 赞同：1
> 
> 时间：2012-07-12T02:51:31.630
> 
> 标签：java, command-line, java-native-interface

假设我有一个名为 Scope 的类，它有一个名为 Variable 的嵌套类，我究竟如何使用`javap -s`来获取内部类的 JNI 签名？我试过做

`javap -classpath <classpath> -s Scope$Variable`

，但这似乎不起作用。它似乎只是让我得到相同的信息，就好像我只输入了“Scope”而不是“Scope$Variable”。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:30:17.443

如果您`javap`在 Linux/Unix 环境中运行，则`$`将由 shell 解释而不是`javap`. 因此它必须被逃脱。最简单的解决方案是：

```
javap -classpath <classpath> -s 'Scope$Variable' 
```

如果没有引号，shell（我假设是 *sh 后代）将尝试`$Variable`用 environment variable 的内容替换该部分`Variable`。我假设不存在这样的变量，因此没有任何东西（如“空字符串”）被替换。因此`javap`只看到

```
javap -classpath <classpath> -s Scope 
```

如果您从 Windows 运行命令，那么这不是问题，因为神奇的字符是`%`.

顺便说一句：我不知道为什么 JNI 会参与其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:21:27.567

为我工作`javap -s com.oracle.net.Sdp$SdpSocket`：：

```
Compiled from "Sdp.java"
class com.oracle.net.Sdp$SdpSocket extends java.net.Socket{
com.oracle.net.Sdp$SdpSocket(java.net.SocketImpl)   throws java.net.SocketExcept
ion;
  Signature: (Ljava/net/SocketImpl;)V
} 
```

# java - JBoss AS 7.1.1.Final: serverError: class java.lang.IllegalStateException on JSF 2 view validation

> ID：11444410
> 
> 赞同：0
> 
> 时间：2012-07-12T02:52:02.953
> 
> 标签：java, validation, jsf, jsf-2, jboss7.x

我在使用纯 JSF 2 页面时遇到问题。加载页面时，会显示两个 inputText 和一个 select。每个右侧都有一个验证字段。这两个输入是必填字段，而 select 总是有一个选择，所以它根本不验证（至少它不应该）。

这是一个屏幕截图：

![在此处输入图像描述](../Images/79e7e3f934c2dfd72e5115a69748beda.png)

这是单击“创建”按钮时显示的内容。重新点击创建按钮时，会出现以下弹出窗口：

![在此处输入图像描述](../Images/9870bfb572ee7dc9a34ff70242cd2a97.png)

好的，没有代码什么都没有，这里是 XHTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
  <h:head>
  </h:head>
  <h:body>
    <h:form>
      <h:panelGrid columns="3" id="base-data-grid">
        <h:outputLabel value="Name:*" for="name-input" />
        <h:inputText value="#{testBean.name}"
                     requiredMessage="Name required!"
                     id="name-input">
          <f:validateRequired />
        </h:inputText>
        <h:message for="name-input" style="color: red;" />
        <h:outputLabel value="Code:*" for="code-input" />
        <h:inputText value="#{testBean.code}"
                     requiredMessage="Code required!"
                     id="code-input">
          <f:validateRequired />
        </h:inputText>
        <h:message for="code-input" style="color: red;" />
        <h:outputLabel value="Location:" for="location-select" />
        <h:selectOneMenu value="#{testBean.location}"
                         converter="#{testConverter}"
                         id="location-select">
          <f:selectItems value="#{testBean.locations}"
                         var="l"
                         itemValue="#{l}"
                         itemLabel="#{l.name}" />
        </h:selectOneMenu>
        <h:message for="location-select" style="color: red;" />
      </h:panelGrid>
      <h:panelGrid columns="1">
        <h:commandButton value="Create"
                           action="#{testBean.create}">
          <f:ajax execute="base-data-grid" render="base-data-grid lalala" />
        </h:commandButton>
      </h:panelGrid>
      <h:messages id="lalala" />
    </h:form>
  </h:body>

</html> 
```

选择的位置类（只是一个名称）：

```
public class Location
{
    private String name;
    public Location(String name)
    {
        this.name = name;
    }
    public String getName()
    {
        return name;
    }
} 
```

转换器（作为 CDI 版本）：

```
import javax.enterprise.context.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.inject.Inject;
import javax.inject.Named;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Named
@RequestScoped
public class TestConverter implements Converter
{
    private static final Logger log = LoggerFactory.getLogger(TestConverter.class);

    @Inject
    private TestBean testBean;

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String name)
    {
        log.info(getClass().getSimpleName() + ".getAsObject: " + name);

        return testBean.getLocationFor(name);
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object obj)
    {
        log.info(getClass().getSimpleName() + ".getAsString: " + obj);

        return ((Location)obj).getName();
    }
} 
```

和测试豆：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Named
@SessionScoped
public class TestBean implements Serializable
{
    private static final Logger log = LoggerFactory.getLogger(TestBean.class);

    private String name;
    private String code;

    private Location location;
    private List<Location> locations;

    @PostConstruct
    public void init()
    {
        locations = new ArrayList<Location>();

        locations.add(new Location("Berlin"));
        locations.add(new Location("London"));
        locations.add(new Location("New York"));
        locations.add(new Location("Moscow"));
        locations.add(new Location("Bejing"));

        location = locations.get(2);
    }

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    public String getCode()
    {
        return code;
    }

    public void setCode(String code)
    {
        this.code = code;
    }

    public Location getLocation()
    {
        return location;
    }

    public void setLocation(Location location)
    {
        this.location = location;
    }

    public List<Location> getLocations()
    {
        return locations;
    }

    public void setLocations(List<Location> locations)
    {
        this.locations = locations;
    }

    public void create()
    {
        log.info("Creating new whatever...");
    }

    // for converter to mimic DB query
    public Location getLocationFor(String name)
    {
        for ( Location location : locations )
        {
            if ( location.getName().equals(name) )
            {
                return location;
            }
        }

        return null;       
    }

} 
```

正如您所看到的，页面应该做的事情并不多。验证两个输入字段，显示选择并调用 testBean.create 如果一切都验证正常。

但是，一旦验证运行一次，随后每次单击 Create 按钮都会导致该 serverError。

**注意，如果您完全删除 f:selectItems 或 h:selectOneMenu，页面将按预期工作。这就是让整个事情变得如此奇怪的原因......**

我不知道这里发生了什么。*有人知道出了什么问题吗？*

我在此处附加了一个 JBoss AS 7 测试应用程序：[https](https://community.jboss.org/thread/202501) ://community.jboss.org/thread/202501 （重复发帖，抱歉需要很多帮助）。

请看一下这个非常奇怪的 IllegalStateException。JBAS server.log 中甚至没有任何内容...

PS：Mojarra版本当然是2.1.7（JBoss AS 7.1.1.Final自带的那个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:37:37.157

您的问题是`Location`需要可序列化
（实现`java.io.Serializable`接口）

该`f:validateRequired`标记导致由 ajax 执行所需的验证。

在此 ajax 请求的 RestoreView 阶段，由于位置不可序列化，运行时遇到了 InstantiationException。

老实说，我不知道为什么没有记录包括堆栈跟踪在内的错误。

# vb.net - 在列表框中键入文件名

> ID：11444411
> 
> 赞同：0
> 
> 时间：2012-07-12T02:52:16.520
> 
> 标签：vb.net, listbox

当我希望输入列表框项目的名称时（列表框由目录中的文件填充），例如，如果我输入“apples”，按 A 会将我带到名称中包含 A 的第一个对象，但输入“ p" 之后将带我到第一个以 p 作为第一个字母的项目。有什么办法可以让我输入几个字符，然后它会带我到那个特定的项目？例如，列表可能有；

```
 ability
 idea
 boring 
```

输入“abi”将选择能力，而不是“能力”，然后是“无聊”，然后是“想法”

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:00:26.513

我认为可以使 System.Windows.Forms.ListBox 表现得像那样，但是需要一些不平凡的代码才能使其工作。System.Windows.Forms.ListView 内置了这种行为，所以我建议使用 ListView 而不是 ListBox。

```
' Hide the headers to make the ListView look like a ListBox.
Me.ListView1.View = View.Details
Me.ListView1.HeaderStyle = ColumnHeaderStyle.None

Me.ListView1.BeginUpdate()
Try
  ' System.Windows.Forms.ListView doesn't have data binding capability.
  ' The listview's items have to be added using its
  ' Items.Add, Items.AddRange or Items.Insert methods.
  For Each filename As String In Directory.GetFiles("C:\Windows").Select(Function(s) Path.GetFileName(s))
    Me.ListView1.Items.Add(filename)
  Next
Finally
  Me.ListView1.EndUpdate()
End Try

' Add the column after adding the items.
' Setting column width to -1 will make
' the column autosize itself to the longest item.
Dim columnHeader As New ColumnHeader
columnHeader.Width = -1
Me.ListView1.Columns.Add(columnHeader) 
```

# java - 输出空

> ID：11444415
> 
> 赞同：0
> 
> 时间：2012-07-12T02:53:34.550
> 
> 标签：java, list, linked-list

我遇到了一个问题，其中该方法输出 null 而不是返回列表的第 (n+1) 项。有什么我忽略的吗。

```
 public static ListElement getItem(ListElement head, int n){
    if(n == 0){                 
        return head;

    }else if(head == null){

            return null;
    }else{                      

        return  getItem(head.getNext(),n+1);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:00:20.543

这段代码没有意义。如果 head 不为空，它会调用`getItem(head.getNext(), n+1)`但最终`head`会相等`null`（并且`n`永远不会变为 0），因此它会返回 you `null`。也许你的意思是

`return getItem(head.getNext(), n-1)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:57:29.813

从 n+1 更改为 n-1（为了得到递归的基本情况，n == 0）：

```
return  getItem(head.getNext(),n-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T02:57:34.603

你应该做n-1，而不是n+1。n 对应于您想要的元素的位置，如果您删除列表中的顶部项目，则所有内容都会向下移动一个位置，而不是向上。

改成`getItem(head.getNext(),n-1);`

# iphone - GameCenter GKMatchmakerViewController 自动匹配不起作用，expectedPlayerCount 始终为 1，解决方案？

> ID：11444419
> 
> 赞同：2
> 
> 时间：2012-07-12T02:53:50.160
> 
> 标签：iphone, ios, game-center, multiplayer

我无法使用自动匹配和 GKMatchmakerViewController 在两个玩家之间建立连接。

行为是这样的：

1.  调用了 didFindMatch

2.  expectedPlayerCount 不为零（始终为 1）

3.  didChangeState 从未被调用

4.  在很长一段时间后，收到断开连接的播放器。

有没有人可以解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:59:47.987

为了获得正确数量的玩家连接，请确保您`GKMatchRequest`正确设置。

在这个例子中，我有一个游戏只有在有两个玩家连接时才有效，所以我将最小和最大玩家数设置为 2：

```
GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
request.minPlayers = 2;
request.maxPlayers = 2;

GKMatchmakerViewController* mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
mmvc.matchmakerDelegate = self; 
```

然后，您记录的所有内容都按预期工作。

* * *

**编辑：**

再次阅读您的问题后，还要确保您保留了`GKMatch`通过以下方式提供给您的对象：

`-(void) matchmakerViewController:(GKMatchmakerViewController*)viewController didFindMatch:(GKMatch*)match;`

当然，你必须设置这个匹配对象的委托：

```
//Done!
-(void) matchmakerViewController:(GKMatchmakerViewController*)viewController didFindMatch:(GKMatch*)match{
    [self dismissModalViewController];
    [self setCurrentMatch:match];

    match.delegate  = self;

    if (!matchStarted && match.expectedPlayerCount == 0){
        matchStarted = YES;
        [delegate onMatchStart];
        self.handlerVoice = [OnlineHandlerVoice handlerWithMatch:currentMatch];
    }
} 
```

# macos - 如何更改内核设置、共享内存配置？

> ID：11444425
> 
> 赞同：0
> 
> 时间：2012-07-12T02:55:52.277
> 
> 标签：macos, postgresql, kernel

我正在尝试安装 PostgreSQL，我需要允许更多的共享内存配置。按照此处的 PostgreSQL 文档：

[http://www.postgresql.org/docs/8.2/static/kernel-resources.html](http://www.postgresql.org/docs/8.2/static/kernel-resources.html)

我只需要找到一个名为 的文件`/etc/sysctl.conf`，但我很难。

但我想你可能会说我是电脑新手，我不知道如何在我的 Mac 上找到这个文件，而谷歌也没有帮助。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:38:18.363

首先，您需要启动一个终端来执行此操作，按 Cmd + Space 启动聚光灯搜索，然后输入术语，终端将成为最热门的匹配项之一。单击它以启动它。

在终端中，您必须使用 root 帐户启动编辑器并打开文件。您可以通过键入：

```
sudo vi /etc/sysctl.conf 
```

它会在升级到 root 帐户之前询问您的密码。然后编辑器 vi 将打开指定的文件或创建一个新文件（如果它不存在）。现在 vi 对于不知道这里的人来说有点难以使用，所以这里有一个非常快速的介绍。按 i 一次进入编辑模式。现在您可以像在大多数编辑器中一样输入所需的行。

当您准备好保存时，按 Escape 退出编辑模式。然后输入（包括冒号） :wq （w 用于写入 q 用于退出）如果您不想在不保存更改的情况下退出，请转义后跟 :q! （q 表示退出，！强制丢弃更改）

# javascript - JavaScript - Uncaught SyntaxError: Unexpected token ？

> ID：11444427
> 
> 赞同：2
> 
> 时间：2012-07-12T02:56:24.490
> 
> 标签：javascript, jquery, html

这个示例代码有什么问题？o_O

```
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                console.log("Testing");
                $('#test').append("Test");​
            });
        </script>
        <title>Sin título 4</title>
</head>
<body>

    <div id="test">Hello world.</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T03:09:10.550

您在此行的末尾有一个非法的隐形字符...

```
$('#test').append("Test");​// <-- right before this comment 
```

完全删除该行，然后重新键入，或确保光标位于该行上的所有字符之后，然后按退格键，直到您看到实际删除的字符。

如果您从 jsFiddle 复制和粘贴代码，有时会发生这种情况。

违规字符的 charCode 是 8203。

# android - 尝试添加第二个主屏幕小部件后，PendingIntents 不会触发

> ID：11444428
> 
> 赞同：1
> 
> 时间：2012-07-12T02:56:33.537
> 
> 标签：android, android-widget, android-pendingintent

我有一个`widget`设置多个`pendingIntents`. 只要我在主屏幕上只有一个小部件，一切都可以在小部件上正常工作。

目前我决定将用户限制在我的主屏幕小部件之一。如果一个已经在使用中，则`ConfigureActivity` *给用户一个警告对话框，告诉他们不能添加第二个*，然后设置`setResult(RESULT_CANCELED, null)`，然后完成（）。

这工作得很好，并且使用户无法设置任何其他主屏幕小部件，但对于已经到位的大部分我`pendingIntents`不会触发的小部件。**Logcat 告诉我“无法发送待处理的意图：”**

每个pendingIntents 都设置为启动一个用于更新小部件的服务。如果我删除小部件并重新设置它，它会再次正常工作，直到我尝试添加第二个小部件。在这一点上对我来说有点莫名其妙。任何人都知道为什么开始添加第二个小部件但没有完成它会取消我以前的pendingIntents？

以防万一，pendingIntents 设置为`FLAG_CANCEL_CURRENT`.

这是用于设置 my `intent`and的代码`pendingIntents`。

```
Intent intentDialog = new Intent(getBaseContext(), ScheduleActionsActivity.class);
intentDialog.putExtra("Action", ACTION_ENTER_SCHEDULE);  
intentDialog.setAction("abc.hwRowOne");  
intentDialog.putExtra("scheduleId", sch.getId());  
intentDialog.putExtra("scheduleDescription", sch.getDescription());  
PendingIntent pendingIntentDialog1 = PendingIntent.getActivity(getBaseContext(), 0, intentDialog, PendingIntent.FLAG_CANCEL_CURRENT);  
views.setOnClickPendingIntent(R.id.hwRowOne, pendingIntentDialog1); 
```

对于小部件的每一行，`intentDialog.setAction()`更改为唯一的行，所以我认为这也使我的 pendingIntent 也是唯一的。

昨晚我在发布我的问题后看到了这个答案，但我不确定它为什么/如何工作，我不确定将它放在我所在地区的哪个位置。它似乎为每个意图设置了一个唯一的数据，但这就是我认为我`.setAction()`正在做的事情。[小部件的多个实例仅更新最后一个小部件](https://stackoverflow.com/questions/4011178/multiple-instances-of-widget-only-updating-last-widget)

所以要回答你的问题，不，我根本没有在我的意图中使用 appWidgetId，我只需要将它作为`putExtra()`then传递`intentDialog`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:09:48.750

这个问题的答案解决了我的问题： [Multiple Instances Of Widget Only Updating Last widget](https://stackoverflow.com/questions/4011178/multiple-instances-of-widget-only-updating-last-widget)

我不知道为什么要添加这些`setData(uri)`作品，但它确实让我现在可以在主屏幕上拥有多个小部件，并且它们`pendingIntents`是独一无二的，并且正如我所期望的那样触发它们。

为了安全起见，如果我决定在每个设备上允许多个小部件，我也会将其添加`appWidgetId`到稍后可能需要它。`intent`

# php - MySQL 通配符返回仅与连字符和数字匹配

> ID：11444436
> 
> 赞同：0
> 
> 时间：2012-07-12T02:57:37.367
> 
> 标签：php, mysql

在我的数据库中，我有以下行，如果它是重复的，它们会增加：

foo
foo-1
foo-2
foo-3
f
f-1
f-2
f-3
bar
bar-1

我想查询数据库并获取**最后一个 f-#**。我试过使用下面的 LIKE 运算符：

```
SELECT * FROM links WHERE slug LIKE '$slug%' ORDER BY timestamp DESC LIMIT 1"; 
```

**我的问题**
如果 $slug == f 它返回 foo-3 而不是 f-3。有没有更好的方法来使用 % 通配符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:00:17.870

```
SELECT *
FROM links
WHERE slug LIKE '$slug-%' OR slug = '$slug'
ORDER BY timestamp DESC
LIMIT 1 
```

另一种方法是，如果您不想执行`OR`，则使用`REGEXP`匹配项。但是，如果这样做，您可能会放弃使用索引进行查询的能力。

# html - 页面底部空间不合理

> ID：11444437
> 
> 赞同：0
> 
> 时间：2012-07-12T02:57:44.980
> 
> 标签：html, css, whitespace

有人可以帮我弄清楚为什么我们的网站底部有很大的空间吗？请参见

[http://www.zanadu.cn](http://www.zanadu.cn)

我已经玩了一段时间了，无法弄清楚问题出在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:02:56.307

```
#main_content_container {
    top: -170px; 
```

这就是为什么

您应该重组您的 HTML 以不需要将整个包装器向上移动 170 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:05:22.043

问题是为什么你有空间。我得到了答案

在 CSS 中 #main_content_container 的顶部为 -170px；和位置：相对。

将其更改为

```
position: absolute;
top: 200px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:06:23.447

那是因为您使用的是相对定位。这只会改变元素的显示位置，但它仍然会占用原始位置的空间。

因此，您已经使用相对定位来移动主容器以与菜单重叠，但原始位置（没有相对定位的位置）正好在容器的底部。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T03:15:09.750

当您相对定位某些东西时，为该元素保留的空间仍然存在。所以你将 div 向上移动，但空间仍然保留用于初始状态（定位之前）

一个简单的解决方法是将 main_content_container 顶部位置更改为 margin-top ，如下所示：

```
#main_content_container {
    margin-top: -170px;
} 
```

这应该让一切正常。请记住在此处删除 top: -170px 规则。

# java - 数组里面的数组android

> ID：11444443
> 
> 赞同：4
> 
> 时间：2012-07-12T02:59:00.250
> 
> 标签：java, android

我不知道该怎么做。但我想要的是创建一个两个数组.. 一个用于数组类，另一个用于我将使用 for 循环用于所选类的信息。我更喜欢每个循环的循环.. ^_^.. 我的问题是。是否可以创建一个数组来存储数组？例如：

```
private final Class<?>[] cls = {class1,class2,class3};
private final String[] myFirstArray = {array1[],array2[],array[]3};
private final String selectedarray[];

for(int i=0;i<cls.lenght();i++){
if(myArrayClassParameter == cls[i]){
selectedArray[] = myFirstArray[i];
}
} 
```

像那样？

好吧，如果可能的话，我的工作将不那么耗时.. 谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T03:05:25.977

绝对 - 您可以创建数组数组，甚至可以创建数组数组，等等。您所需要的只是添加更多的方括号对`[]`。

```
private final String[][] firstArray = new String[][] {
    new String[] {"quick", "brown", "fox"}
,   new String[] {"jumps", "over", "the"}
,   new String[] {"lazy", "dog", "!"}
};

String[] selectedArray = firstArray[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:05:28.440

是的。这些被称为[多维数组](http://www.roseindia.net/javatutorials/java_multi_dimensions_array.shtml)。试一试并与他们混在一起。这样你会学得更好。

您必须像这样声明它们：

```
Type[] smallerArray1;
Type[] smallerArray2;
Type[] smallerArray3;
Type[][] biggerArray = new Type[][]{smallerArray1, smallerArray2, smallerArray3}; 
```

然后您可以像使用常规数组一样使用它们。

# hibernate - 严重：尝试修改标识列“UID”

> ID：11444444
> 
> 赞同：0
> 
> 时间：2012-07-12T02:59:07.433
> 
> 标签：hibernate, hql

我正在使用休眠。我想持久地在我的数据库中的表中添加一个新行。

我在我的动作类中使用的代码是：

```
try {
            Session session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            u = new Users();
            u.setAge(this.getAge());
            u.setCity(this.getCity());
            u.setEmail(this.getEmail());
            u.setName(this.getUsername());
            u.setPassword(this.getPassword());
            u.setSex(this.getSex());
            try {
            session.save(u);
            } 
            catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...! Email address already registered. Try with your new email address.");
            return ERROR;
            }
            session.getTransaction().commit();
            session.close();
        } catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...!");
            return ERROR;
        } 
```

该页面有时会显示外部捕获错误，有时会显示内部捕获错误。glassfish 服务器日志是：

```
WARNING: SQL Error: -1, SQLState: 42Z23
SEVERE: Attempt to modify an identity column 'UID'. 
SEVERE: Could not synchronize database state with session
org.hibernate.exception.SQLGrammarException: could not insert: [beans.Users]
..
Caused by: java.sql.SQLSyntaxErrorException: Attempt to modify an identity column 'UID'. 
```

我的表是“用户”，具有主键“UID”，它是自动生成的增量为 1。除了上述之外，还有许多字段是用 getter 检索的，但这些字段被赋予默认值作为创建行的表属性，所以我决定不为他们应用 getter 和 setter。我也没有为“uid”使用getter和setter，因为它是自动生成的。

有人可以指出可能是什么错误......？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:57:13.763

`session.save(u);`并不总是立即触发 sql，而是在可能的情况下对它们进行批处理。它在发送`transaction.commit`或调用时发送`session.flush()`。

# android - 你如何实现Android 4.0 Restful，HTTP post请求

> ID：11444445
> 
> 赞同：0
> 
> 时间：2012-07-12T02:59:20.350
> 
> 标签：android, http, http-post, android-4.0-ice-cream-sandwich

由于他们改变了我们在最新的 Android SDK 中发出 HTTP 请求的方式，我一直无法找到说明如何发出 HTTP post 请求的教程。尤其是登录。所以我想看一些代码示例，展示如何实现 HTTP 发布请求，并处理 cookie。如果可能的话，我还想查看[https://security.stackexchange.com/questions/4302/how-to-implement-a-remember-me-on-a-mobile-app](https://security.stackexchange.com/questions/4302/how-to-implement-a-remember-me-on-a-mobile-app)的代码示例谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:40:29.377

使用的库：http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)

```
private OnClickListener login = new OnClickListener() {

    public void onClick(View view) {

        AsyncHttpClient myClient = new AsyncHttpClient();
        myClient.get(URL, null);
        myClient.setCookieStore(myCookieStore);
        myClient.setCookieStore(myCookieStore);
        String username = "";
        String password = "";
        RequestParams params1 = new RequestParams();
        params1.put("username", username);
        params1.put("password", password);
        pd = ProgressDialog.show(this, "", "Signing In...");
        myClient.post(URL, params1,
                new AsyncHttpResponseHandler() {
                    @Override
                    public void onSuccess(String response) {
                        System.out.println("response" + response);
                        pd.dismiss();
                        if (response.contains("<!--Authorized-->")) {
                        }
                        else {
                            pd.dismiss();
                            Context mContext = SigninActivity.this;
                            notMatchDialog = new Dialog(mContext);
                            notMatchDialog.setContentView(R.layout.loginfaileddialoglayout);
                            notMatchDialog.setTitle("Login failed");
                            dismissDialogButton = (Button) notMatchDialog.findViewById(R.id.dismissDialogButton);
                            dismissDialogButton.setOnClickListener(dismissDialog);
                            notMatchDialog.show();
                        }
                    }

                    @Override
                    public void onFailure(Throwable e, String response) {
                        // TODO Need to figure out different failures and try to help the user.
                    }
                });
    }
}; 
```

# php - 嵌套 MySQL 查询 - 将数组作为输出

> ID：11444447
> 
> 赞同：0
> 
> 时间：2012-07-12T02:59:35.843
> 
> 标签：php, mysql, inner-join

我从这个页面[PHP/mySQL 上的答案开始 - 如何将嵌套行提取到多维数组](https://stackoverflow.com/questions/357122/php-mysql-how-to-fetch-nested-rows-into-multidimensinal-array)中，因为我正在处理表之间的相同类型的关系。我的代码现在看起来像这样：

```
$query=sprintf("SELECT * FROM product INNER JOIN production ON product.ID = production.product_ID");
    $data = mysql_query($query);
    $products = array();

while ($row = mysql_fetch_assoc($data))
{
    if (!isset($products[$row['product_ID']]))
    {
        $row['production'] = array();
        $products[$row['product_ID']] = $row;
    }

    $products[$row['product_ID']]['production'][] = $row;
}

foreach ($products as $product)
{
    foreach ($product['production'] as $item)
        //... do stuff
} 
```

查询是可靠的 - 我已经直接在数据库上尝试过。我的问题是我无法计算出它说//...做东西的最后一点无论我坚持什么样的变量组合等，我都会得到 ArrayArrayArray （等）。我想要的是获得一个我可以使用的输出表。我希望这是足够的信息，这是我在 StackOverflow 上的第一个问题。谢谢你。

当我执行 var_dump($item) 时，我得到一个长显示，如下所示：

```
array(9) { ["ID"]=> string(1) "2" ["product_name"]=> string(10) "Drums 12kg" ["order"]=> string(2) "20" ["hidden"]=> string(1) "0" ["id"]=> string(1) "4" ["product_ID"]=> string(1) "2" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(3) "130" ["production"]=> array(0) { } } array(8) { ["ID"]=> string(1) "2" ["product_name"]=> string(10) "Drums 12kg" ["order"]=> string(2) "20" ["hidden"]=> string(1) "0" ["id"]=> string(2) "21" ["product_ID"]=> string(1) "2" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(3) "705" } array(8) { ["ID"]=> string(1) "2" ["product_name"]=> string(10) "Drums 12kg" ["order"]=> string(2) "20" ["hidden"]=> string(1) "0" ["id"]=> string(2) "23" ["product_ID"]=> string(1) "2" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(2) "23" } array(8) { ["ID"]=> string(1) "2" ["product_name"]=> string(10) "Drums 12kg" ["order"]=> string(2) "20" ["hidden"]=> string(1) "0" ["id"]=> string(2) "26" ["product_ID"]=> string(1) "2" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(2) "23" } array(8) { ["ID"]=> string(1) "2" ["product_name"]=> string(10) "Drums 12kg" ["order"]=> string(2) "20" ["hidden"]=> string(1) "0" ["id"]=> string(2) "28" ["product_ID"]=> string(1) "2" ["date"]=> string(10) "2012-07-19" ["quantity"]=> string(2) "12" } array(9) { ["ID"]=> string(1) "3" ["product_name"]=> string(12) "Nibbles 12kg" ["order"]=> string(2) "65" ["hidden"]=> string(1) "0" ["id"]=> string(1) "5" ["product_ID"]=> string(1) "3" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "10" ["production"]=> array(0) { } } array(8) { ["ID"]=> string(1) "3" ["product_name"]=> string(12) "Nibbles 12kg" ["order"]=> string(2) "65" ["hidden"]=> string(1) "0" ["id"]=> string(2) "10" ["product_ID"]=> string(1) "3" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "10" } array(8) { ["ID"]=> string(1) "3" ["product_name"]=> string(12) "Nibbles 12kg" ["order"]=> string(2) "65" ["hidden"]=> string(1) "0" ["id"]=> string(2) "14" ["product_ID"]=> string(1) "3" ["date"]=> string(10) "2012-07-12" ["quantity"]=> string(3) "140" } array(8) { ["ID"]=> string(1) "3" ["product_name"]=> string(12) "Nibbles 12kg" ["order"]=> string(2) "65" ["hidden"]=> string(1) "0" ["id"]=> string(2) "16" ["product_ID"]=> string(1) "3" ["date"]=> string(10) "2012-07-12" ["quantity"]=> string(3) "220" } array(8) { ["ID"]=> string(1) "3" ["product_name"]=> string(12) "Nibbles 12kg" ["order"]=> string(2) "65" ["hidden"]=> string(1) "0" ["id"]=> string(2) "17" ["product_ID"]=> string(1) "3" ["date"]=> string(10) "2012-07-04" ["quantity"]=> string(3) "120" } array(9) { ["ID"]=> string(1) "4" ["product_name"]=> string(16) "Breast meat 12kg" ["order"]=> string(2) "40" ["hidden"]=> string(1) "0" ["id"]=> string(1) "6" ["product_ID"]=> string(1) "4" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "20" ["production"]=> array(0) { } } array(8) { ["ID"]=> string(1) "4" ["product_name"]=> string(16) "Breast meat 12kg" ["order"]=> string(2) "40" ["hidden"]=> string(1) "0" ["id"]=> string(2) "11" ["product_ID"]=> string(1) "4" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "20" } array(8) { ["ID"]=> string(1) "4" ["product_name"]=> string(16) "Breast meat 12kg" ["order"]=> string(2) "40" ["hidden"]=> string(1) "0" ["id"]=> string(2) "13" ["product_ID"]=> string(1) "4" ["date"]=> string(10) "2012-10-10" ["quantity"]=> string(2) "75" } array(9) { ["ID"]=> string(1) "5" ["product_name"]=> string(11) "Value Birds" ["order"]=> string(2) "50" ["hidden"]=> string(1) "0" ["id"]=> string(1) "7" ["product_ID"]=> string(1) "5" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "40" ["production"]=> array(0) { } } array(8) { ["ID"]=> string(1) "5" ["product_name"]=> string(11) "Value Birds" ["order"]=> string(2) "50" ["hidden"]=> string(1) "0" ["id"]=> string(2) "12" ["product_ID"]=> string(1) "5" ["date"]=> string(10) "2012-09-07" ["quantity"]=> string(2) "40" } array(9) { ["ID"]=> string(1) "1" ["product_name"]=> string(11) "Thighs 12kg" ["order"]=> string(3) "105" ["hidden"]=> string(1) "1" ["id"]=> string(1) "8" ["product_ID"]=> string(1) "1" ["date"]=> string(10) "2012-10-01" ["quantity"]=> string(3) "500" ["production"]=> array(0) { } } array(9) { ["ID"]=> string(1) "7" ["product_name"]=> string(19) "Whole birds size 13" ["order"]=> string(2) "70" ["hidden"]=> string(1) "1" ["id"]=> string(2) "29" ["product_ID"]=> string(1) "7" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(3) "500" ["production"]=> array(0) { } } array(8) { ["ID"]=> string(1) "7" ["product_name"]=> string(19) "Whole birds size 13" ["order"]=> string(2) "70" ["hidden"]=> string(1) "1" ["id"]=> string(2) "30" ["product_ID"]=> string(1) "7" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(3) "500" } array(8) { ["ID"]=> string(1) "7" ["product_name"]=> string(19) "Whole birds size 13" ["order"]=> string(2) "70" ["hidden"]=> string(1) "1" ["id"]=> string(2) "31" ["product_ID"]=> string(1) "7" ["date"]=> string(10) "2012-07-19" ["quantity"]=> string(3) "500" } array(8) { ["ID"]=> string(1) "7" ["product_name"]=> string(19) "Whole birds size 13" ["order"]=> string(2) "70" ["hidden"]=> string(1) "1" ["id"]=> string(2) "32" ["product_ID"]=> string(1) "7" ["date"]=> string(10) "2012-07-13" ["quantity"]=> string(3) "500" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:54:47.707

您将在最后两个 foreach 循环中构建表格的 html。我建议更好地命名您的列，因为在 item 中标识您的数组键的文本令人困惑（您有三个 ID 字段）。

```
print "<table><thead><tr><th>ID</th><th>Product</th><th>Order</th><th>Hidden</th><th>ID</th><th>Product ID</th><th>date</th><th>Quantity</th></tr></thead><tbody>";
foreach ($products as $product)
{
    foreach ($product['production'] as $item)
    {
        print "<tr>";        
        print "<td>$item['ID']</td>";
        print "<td>$item['product_name']</td>";
        print "<td>$item['order']</td>";
        print "<td>$item['hidden']</td>";
        print "<td>$item['id']</td>";
        print "<td>$item['product_id']</td>";
        print "<td>$item['date']</td>";
        print "<td>$item['quantity']</td>";
        print "</tr>";
    }
}
print "</tbody></table>"; 
```

# sql-server - SSRS 报告删减了 IE8 中的一些列

> ID：11444449
> 
> 赞同：1
> 
> 时间：2012-07-12T02:59:47.740
> 
> 标签：sql-server, internet-explorer-8, reporting-services

我的报告布局中存在 SSRS 问题。

只有当我第一次打开报表时，SSRS 才会在 IE8 中剪切一些列。

FF和chrome都没有出现这个问题。

但是，令我惊讶的是，当我在 IE8 中刷新报告时，或者我转到下一页并再次返回时，会出现缺失的列。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:08:32.900

也许您需要使用 IE8 开发工具将 IE8 浏览器模式设置为 Internet Explorer 8 而不是 IE8 Compat View。

按 F12 并转到浏览器模式选项卡。

问候

# javascript - 如何在创建的 div 中重用网页的 CSS 类？

> ID：11444453
> 
> 赞同：-1
> 
> 时间：2012-07-12T03:00:22.390
> 
> 标签：javascript, css, greasemonkey

我想将网页的某类 CSS 样式重用于我添加的新 Div 元素。我正在使用 Greasemonkey 重新设计页面。

如何添加`bar1`样式`myDiv`？

**原始分区：**

```
<div id="bar1" class="bar1"> 
```

**新部门：**

```
var myDiv = document.createElement('div'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:15:02.743

```
myDiv.className = 'bar1'; 
```

或者

```
myDiv.className = document.getElementById ('bar1').className; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:18:22.500

听起来您的最终目标实际上是制作书签之类的东西。如果你只是想添加一个类，你总是可以在一个对象上设置“className”，因为“class”这个词是受保护的。

[http://jsfiddle.net/scispear/tCzZM/](http://jsfiddle.net/scispear/tCzZM/)

我还动态地添加了一些样式表（但仅适用于更现代的浏览器，旧浏览器需要更多的工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:10:06.493

由于 CSS 继承，复制类名是不够的，除非新元素是另一个元素的兄弟。即便如此，CSS3 选择器之类的`nth-child`可能也会把事情搞砸。

相反，您应该迭代所有相关的样式属性并复制它们的计算值，如下所示：

```
var stylesToCopy = ['color', 'background-color', ...];
var oldStyle = getComputedStyle(bar1);
for (var i = 0; i < stylesToCopy.length; i++) {
    myDiv.style[stylesToCopy[i]] = oldStyle[stylesToCopy[i]];
} 
```

# c# - Ninject Scope 和 System.Threading.Timer

> ID：11444454
> 
> 赞同：1
> 
> 时间：2012-07-12T03:00:27.987
> 
> 标签：c#, asp.net-mvc-3, asynchronous, ninject, unit-of-work

如何在 Timer 任务上调用新的 Ninject 上下文？很难将 ninject 范围配置为 unitofwork。如果我设置为 InRequestScope() 它不适用于非请求任务。所以我像下面这样设置，这样我就可以获得任务的 InThreadScope：

```
kernel.Bind<IUnitOfWork>().To<myEntities>().InScope(ctx => HttpContext.Current ?? StandardScopeCallbacks.Thread(ctx)); 
```

但是那样，当我设置一个计时器时

```
Timer timer = new Timer(_ => DelayedDisconnect(chatUser.User.AuthorizationId), null, TimeSpan.FromSeconds(10), TimeSpan.FromMilliseconds(-1)); 
```

dbContext 不会用新的数据库值刷新。

```
public void DelayedDisconnect(string authorizationId)
    {
        var myChatUser = GetChatUserByClaimedIdentifier(authorizationId);

        if (!myChatUser.ChatClients.Any()) // old state (doesn't reflect database changes from 10 seconds ago). 
```

那么...如何调用新的 Ninject“上下文”来反映当前状态/数据库值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:07:02.323

您真的不应该在 ASP.NET 应用程序中运行后台任务。编写一个服务来做到这一点。[http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

通过使用 Windows 服务，它变得非常容易。设置一个定时器，请求一个`SomeProcessor`从内核完成所有工作的定时器。现在您可以使用 NamedScope 扩展并定义处理器是某些对象的范围，例如 UoW

```
kernel.Bind<SomeProcessor>().ToSelf().DefinesNamedScope("Processor");
kernel.Bind<IUoW>().To<UoW>().InNamedScope("Processor"); 
```

# c - 使用 sem_trywait() 会导致死锁吗

> ID：11444455
> 
> 赞同：0
> 
> 时间：2012-07-12T03:00:41.967
> 
> 标签：c, deadlock, livelock

使用`sem_trywait()`会让你陷入死锁或活锁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:09:14.070

如果您有多个线程，则几乎任何函数都可能参与潜在的活锁或死锁（或两者），具体取决于它的使用方式。算法很重要。现在，有某些特定的使用模式`sem_trywait`可能会或可能不会形成活锁或死锁，但仅从函数名称来看，很难给出任何具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:12:28.627

如果两个线程争用被对方信号量锁定的相同资源，它应该会失败并显示 E_DEADLK。这是正确的行为，但您需要检测它并在它发生时重试。换句话说，是的，它可能会死锁，但系统会检测到这一点并导致功能失效，而不是让你挂起。

# android - Why is executing this HttpGet in Android raising a NullPointerException?

> ID：11444456
> 
> 赞同：2
> 
> 时间：2012-07-12T03:00:44.383
> 
> 标签：android, apache, http

I've created a new Android project in which the only code I've added is this code in the `onCreate()` method (I also added the INTERNET permission to the manifest):

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_http_get_test);
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet();
    try
    {
        System.out.println("making uri");
        URI uri = new URI("http://w3mentor.com/");
        request.setURI(uri);
        System.out.println("executing");
        client.execute(request); // This line throws the exception
        System.out.println("Done!");
    }
    catch(Exception e)
    {
        System.out.println(e.getMessage());
    }
} 
```

In the log, I see that the last thing printed by the `try` block was `executing`, after which a NullPointerException was thrown.

I loosely based my code on the beginning of [this example](http://w3mentor.com/learn/java/android-development/android-http-services/example-of-http-get-request-using-httpclient-in-android/), but I can't see what I'm doing differently that would cause a NullPointerException.

When run in the debugger I see that the exception is actually a NetworkOnMainThreadException, which apparently causes a NullPointerException when I try `e.getMessage()`.

The error message being printed out is

```
07-12 02:58:33.997: E/AndroidRuntime(983): FATAL EXCEPTION: main
07-12 02:58:33.997: E/AndroidRuntime(983): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.whatever.http.test/com.whatever.http.test.HttpGetTest}: java.lang.NullPointerException
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.os.Looper.loop(Looper.java:137)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-12 02:58:33.997: E/AndroidRuntime(983):  at java.lang.reflect.Method.invokeNative(Native Method)
07-12 02:58:33.997: E/AndroidRuntime(983):  at java.lang.reflect.Method.invoke(Method.java:511)
07-12 02:58:33.997: E/AndroidRuntime(983):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-12 02:58:33.997: E/AndroidRuntime(983):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-12 02:58:33.997: E/AndroidRuntime(983):  at dalvik.system.NativeStart.main(Native Method)
07-12 02:58:33.997: E/AndroidRuntime(983): Caused by: java.lang.NullPointerException
07-12 02:58:33.997: E/AndroidRuntime(983):  at com.android.internal.os.LoggingPrintStream.println(LoggingPrintStream.java:298)
07-12 02:58:33.997: E/AndroidRuntime(983):  at com.whatever.http.test.HttpGetTest.onCreate(HttpGetTest.java:33)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.Activity.performCreate(Activity.java:4465)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-12 02:58:33.997: E/AndroidRuntime(983):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-12 02:58:33.997: E/AndroidRuntime(983):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:16:34.947

The Issue is not a NullPointerException but if you debug your application, you will find that the exception is : `NetworkOnMainThreadException`.

Most likely you are running your application on the newer SDKs (Honeycomb or greater) as a result of which this is discouraged.

Any networking code, you should put in a thread. Ideally use the `AsyncTask` for that. Check this link out : [http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/](http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/)

Hope this helps.

# javascript - 看似良性的 CSS 行（jquery bug？）“禁用”了fadeOut

> ID：11444460
> 
> 赞同：1
> 
> 时间：2012-07-12T03:01:34.070
> 
> 标签：javascript, jquery

这是对以下内容的跟进：

[在包装 ul 的 div 上使用 addClass 后，fadeOut (on an li) 停止工作](https://stackoverflow.com/questions/11438556/fadeout-on-an-li-stops-working-after-using-addclass-on-div-that-wraps-the-ul)

现在我已经将它缩小到一行 CSS，这似乎是重新提出（现在）正确问题的好地方。

这是CSS的行：

```
.status-fullscreen .main-slides img.display-full {
    position:absolute; 
    top:0; 
    left:0; 
    width:100%; 
    z-index:350
} 
```

（顺便说一句，这个“技巧”来自：[http](http://css-tricks.com/perfect-full-page-background-image/) ://css-tricks.com/perfect-full-page-background-image/所以它看起来很合法。）

它适用于的伪代码：

```
<div .status-fullscreen>
  <div .main-slides>
  <ul>
    <li><img .display-full /></li>
    <li><img .display-full /></li>
    <li><img .display-full /></li>
  </ul>
  </div>
</div> 
```

当 CSS 行正在播放并且我正在处理列表的 .go(index) 时，fadeOut() 会按预期停止工作。也就是说，它根本不起作用。fadeIn 有效，但持续时间似乎已关闭。删除线，一切都很好。

是什么赋予了？

我确信还有另一种方法可以生成全屏图像。NBD。但是，了解导致淡出被这行 CSS 中的内容所影响的原因会很好/很有帮助。也许这不是一个错误，但它看起来确实很奇怪，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:34:48.587

问题解决了。我不仅使用图像上的单行使其全屏，还使用了固定和高度

*   并继续包装（如果有意义的话。）。简而言之，在顶部一致定义的 make 层中（我猜）代码不再混淆 jq。

# apache - 关于 +FollowSymLinks 和 -SymLinksIfOwnerMatch 的安全问题？

> ID：11444461
> 
> 赞同：3
> 
> 时间：2012-07-12T03:01:39.143
> 
> 标签：apache, .htaccess

我将它用于我的一个应用程序：

```
Options +FollowSymLinks -SymLinksIfOwnerMatch 
```

我担心这可能带来的安全问题。知道我可以采取什么措施来使这种方法尽可能安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:44:40.350

您无法采取任何具体措施来尽可能安全地使用这些选项。使用它们的风险是用户或在用户下运行的进程可以通过创建符号链接来泄露信息甚至劫持内容。例如，如果一个无权限的用户（可能已经被入侵）想要读取一个他们通常无法读取的文件，他们可以通过从他们的 public_html 目录创建一个符号链接来升级它，如果 apache 可以读取它，然后他们可以访问他们的网页并阅读文件。除了确保您的系统已正确修补和配置之外，您无法采取任何具体措施来防止此类事情发生。

请注意，这种威胁不仅仅来自您系统上的用户。如果你正在运行一个 web 应用程序，比如说 php，并且它以某种方式受到攻击，攻击者可以上传一个 php 文件浏览器并创建指向文档根目录之外内容的符号链接（例如 /etc/passwd 或其他一些你不知道的文件想暴露在网络上）。

如果您担心这样的事情，最好不要使用这些选项。

# java - java - 如何在Java中按位置使警报对话框显示字符串中的项目？

> ID：11444462
> 
> 赞同：0
> 
> 时间：2012-07-12T03:01:51.750
> 
> 标签：java, android, string, position, alert

我正在制作一个应用程序，用户可以在其中看到 ListView 中的单词列表，并且可以单击它们进行翻译。我想要的是在列表中看到英文单词，并且警报对话框会显示一些乱码（我稍后会将乱码更改为西班牙语定义）。

现在，我按顺序排列了两个字符串，因此当您单击列表中的第一个单词时，警报将包含第二组字符串的第一个单词。当您单击列表中的第二个单词时，我希望第二个字符串的第二个单词显示在警报中。当您单击列表中的第三个单词时，我希望第二个字符串的第三个单词显示在警报中。我唯一的问题是，警报不会显示第二个字符串中的相应项目。警报仅显示在列表中单击的相同单词。

我意识到我可以为每个单词做一个活动，但这似乎很麻烦，所以我决定使用警报对话框。

有人可以更新我的代码以向我展示如何使第二个字符串中的单词出现在警报中吗？

这是我的代码：

```
import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SpanishActivity extends ListActivity {

 static final String[] basicWords = new String[] {
   "Hello", "Goodbye", "Yes", "No", 
   "Why", "Where", "When", "What ", "Who", "How", "Absolutely", "I", "You",
   "He", "She", "That", "Black", "White", "Red","Orange", "Blue", "Green",
   "Yellow", "Purple", "Later" , "Now", "Today", "Tomorrow", "Left", "Right",
   "Hand", "Mouth", "Tongue", "Nose", "Ear", "Eyes", "Leg", "Dog", "Cat", 
   "Elephant", "Snake", "Camel", "Pen", "Pencil", "Book", "Paper", "Hot",
   "Cold", "Airplane", "Car", "Raining", "Sunny", "Cloudy", "Water", "Please",
   "Help", "Work", "English", "America", "England", "Funny", "Thanks", 
   "Good", "Bad", "Happy", "Sad", 
   };

 String[] spanishBasic = new String[]{
     "afsdfb", "qerg", "nt4th", "erhn", 

       "ehrethn", "rth", "Kub", "ygfd ", "cvb", "ytrfvh", "jhgv", "Mvbay",         "hgfv",

       "gv", "cvbnhg", "gfd", "hgf", "ytr", "hgf","wthw", "wetergh",     "wewrth",

       "weth", "erg", "wrgwr" , "dfghj", "xdhtcjfy", "cfj", "zsrxdtcf", "oiuy",

       "rxjtdcfky", "n", "dfgh", "sdfgh", "fgbh", "nkhn", "ayr", "ota",     "dfgh", 

       "Hafghi", "ghjnp", "Ogtyh", "dfg", "fghn", "fghjnm", "ghn", "hjk",

       "xdcfgh", "xcv", "hjdi", "fghish", "fghoop", "Bhjl", "bnani", "cvbn",

       "Mghj", "bhjam", "hjayzi", "ghjk", "vhj", "vghj", "cfgh", 

       "bhj", "bhjra", "ghjshi", "fghhum",   

 };

   /** Called when the activity is first created. */

 @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setListAdapter(new ArrayAdapter<String>(this,
               android.R.layout.simple_list_item_1, basicWords));
       getListView().setTextFilterEnabled(true);
   }

 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
  // TODO Auto-generated method stub
  super.onListItemClick(l, v, position, id);

  new AlertDialog.Builder(this)
   .setTitle("Spanish")
   .setMessage("" + getListView().getItemAtPosition(position))
   .setPositiveButton("Back to List",
     new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int which) {}}
     )
   .show();

 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:28:29.153

你已经完成了几乎你需要的东西。

采用

```
.setMessage("" + spanishBasic[position]) 
```

代替

```
.setMessage("" + getListView().getItemAtPosition(position)) 
```

**我的代码在这里**

```
 public class SpanishActivity extends ListActivity {

 static final String[] basicWords = new String[] {
   "Hello", "Goodbye", "Yes", "No", 
   "Why", "Where", "When", "What ", "Who", "How", "Absolutely", "I", "You",
   "He", "She", "That", "Black", "White", "Red","Orange", "Blue", "Green",
   "Yellow", "Purple", "Later" , "Now", "Today", "Tomorrow", "Left", "Right",
   "Hand", "Mouth", "Tongue", "Nose", "Ear", "Eyes", "Leg", "Dog", "Cat", 
   "Elephant", "Snake", "Camel", "Pen", "Pencil", "Book", "Paper", "Hot",
   "Cold", "Airplane", "Car", "Raining", "Sunny", "Cloudy", "Water", "Please",
   "Help", "Work", "English", "America", "England", "Funny", "Thanks", 
   "Good", "Bad", "Happy", "Sad", 
   };

 String[] spanishBasic = new String[]{
     "afsdfb", "qerg", "nt4th", "erhn", 

       "ehrethn", "rth", "Kub", "ygfd ", "cvb", "ytrfvh", "jhgv", "Mvbay",         "hgfv",

       "gv", "cvbnhg", "gfd", "hgf", "ytr", "hgf","wthw", "wetergh",     "wewrth",

       "weth", "erg", "wrgwr" , "dfghj", "xdhtcjfy", "cfj", "zsrxdtcf", "oiuy",

       "rxjtdcfky", "n", "dfgh", "sdfgh", "fgbh", "nkhn", "ayr", "ota",     "dfgh", 

       "Hafghi", "ghjnp", "Ogtyh", "dfg", "fghn", "fghjnm", "ghn", "hjk",

       "xdcfgh", "xcv", "hjdi", "fghish", "fghoop", "Bhjl", "bnani", "cvbn",

       "Mghj", "bhjam", "hjayzi", "ghjk", "vhj", "vghj", "cfgh", 

       "bhj", "bhjra", "ghjshi", "fghhum",   

 };

   /** Called when the activity is first created. */

   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setListAdapter(new ArrayAdapter<String>(this,
               android.R.layout.simple_list_item_1, basicWords));
       getListView().setTextFilterEnabled(true);
   }

 protected void onListItemClick(ListView l, View v, int position, long id) {
  // TODO Auto-generated method stub
  super.onListItemClick(l, v, position, id);

  new AlertDialog.Builder(this)
   .setTitle("Spanish")
   .setMessage("" + spanishBasic[position])
   .setPositiveButton("Back to List",
     new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int which) {}}
     )
   .show();

 }

} 
```

祝你好运，祝你有美好的一天。。

# php - 从 $this->variable 获取变量

> ID：11444463
> 
> 赞同：0
> 
> 时间：2012-07-12T03:02:11.643
> 
> 标签：php

> **可能重复：**
> [通过字符串](https://stackoverflow.com/questions/804850/get-php-class-property-by-string)
> [PHP 方法链接获取 PHP 类属性？](https://stackoverflow.com/questions/3724112/php-method-chaining)

我有一个类，其中方法返回调用它的实例。如何直接从函数的返回值访问属性（其名称存储在变量中）？这是我现在正在尝试的：

```
class MyClass {
    public $variable_one;

    public function function_one() {
        $variable = 'last';
        // The problematic line: call method, access property on result
        return $this->function_two->$variable;
    }

    public function function_two($params = array()) {
        if (is_array($params)) {
            $params = http_build_query($params, NULL, '&');
        }

        $this->option(CURLOPT_COOKIE, $params);
        return $this;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:03:26.817

该`$this`变量是*特殊*的，仅存在于类中。如果您在名为变量的类中有一个属性，那么您可以`$this->variable`从该类中访问它。

```
class MyClass
{
   private $variable;
   public function getVariable()
   {
       return $this->variable;
   }
} 
```

# iphone - 图像选择器弹出框

> ID：11444465
> 
> 赞同：1
> 
> 时间：2012-07-12T03:02:35.460
> 
> 标签：iphone, ios, xcode

```
AGImagePickerController *imagePickerController = [[AGImagePickerController alloc] initWithFailureBlock:^(NSError *error) {

    if (error == nil)
    {
        NSLog(@"User has cancelled.");
        [self dismissModalViewControllerAnimated:YES];
    } else
    {     
        NSLog(@"Error: %@", error);

        // Wait for the view controller to show first and hide it after that
        double delayInSeconds = 0.5;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [self dismissModalViewControllerAnimated:YES];
        });
    }

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];

} andSuccessBlock:^(NSArray *info) {
    NSLog(@"Info: %@", info);
    [self dismissModalViewControllerAnimated:YES];

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];
}];

popover = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];
[popover presentPopoverFromRect:CGRectMake(0.0, 0.0, 400.0, 400.0) 
                         inView:self.view.window
       permittedArrowDirections:UIPopoverArrowDirectionAny 
                       animated:YES]; 
```

能够展示它，但是，即使我改变了它的大小，它仍然是一样的，当我按下`DONE`按钮时，它会删除我的视图控制器而不是图像选择器。请帮忙。我在弹出窗口中呈现它，因为我认为，这就是为什么它会变慢，因为 imagepicker 应该与 iPad 的弹出窗口一起出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:27:20.177

您是否正在实施 AGImagePickerController 委托？

```
- (void)agImagePickerController:(AGImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info; 
```

在那里你可以关闭你的`UIPopoverController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:24:21.023

调整大小这样设置：

```
[popoverController setPopoverContentSize:CGSizeMake(1024, 500)]; 
```

然后在你`andSuccessBlock`和你使用的其他部分：

```
[self dismissModalViewControllerAnimated:YES]; 
```

应该

```
[popoverController dismissPopoverAnimated:YES]; 
```

这就是为什么`ViewController`从视图中被解雇或删除的原因，因为它以错误的方式被解雇。

# android - 如何自定义设置的可绘制位置 CheckedTextView？

> ID：11444466
> 
> 赞同：3
> 
> 时间：2012-07-12T03:02:37.970
> 
> 标签：android, listview, checkedtextview

```
public class CheckedTextView extends TextView implements Checkable {
    private boolean mChecked;
    private int mCheckMarkResource;
    private Drawable mCheckMarkDrawable;
    private int mBasePaddingRight;
    private int mCheckMarkWidth;

    private static final int[] CHECKED_STATE_SET = {
        R.attr.state_checked
    };

    public CheckedTextView(Context context) {
        this(context, null);
    }

    public CheckedTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public CheckedTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.CheckedTextView, defStyle, 0);

        Drawable d = a.getDrawable(R.styleable.CheckedTextView_checkMark);
        if (d != null) {
            setCheckMarkDrawable(d);
        }

        boolean checked = a.getBoolean(R.styleable.CheckedTextView_checked, false);
        setChecked(checked);

        a.recycle();
    }

    public void toggle() {
        setChecked(!mChecked);
    }

    @ViewDebug.ExportedProperty
    public boolean isChecked() {
        return mChecked;
    }

    /**
     * <p>Changes the checked state of this text view.</p>
     *
     * @param checked true to check the text, false to uncheck it
     */
    public void setChecked(boolean checked) {
        if (mChecked != checked) {
            mChecked = checked;
            refreshDrawableState();
        }
    }

    /**
     * Set the checkmark to a given Drawable, identified by its resourece id. This will be drawn
     * when {@link #isChecked()} is true.
     * 
     * @param resid The Drawable to use for the checkmark.
     */
    public void setCheckMarkDrawable(int resid) {
        if (resid != 0 && resid == mCheckMarkResource) {
            return;
        }

        mCheckMarkResource = resid;

        Drawable d = null;
        if (mCheckMarkResource != 0) {
            d = getResources().getDrawable(mCheckMarkResource);
        }
        setCheckMarkDrawable(d);
    }

    /**
     * Set the checkmark to a given Drawable. This will be drawn when {@link #isChecked()} is true.
     *
     * @param d The Drawable to use for the checkmark.
     */
    public void setCheckMarkDrawable(Drawable d) {
        if (mCheckMarkDrawable != null) {
            mCheckMarkDrawable.setCallback(null);
            unscheduleDrawable(mCheckMarkDrawable);
        }
        if (d != null) {
            d.setCallback(this);
            d.setVisible(getVisibility() == VISIBLE, false);
            d.setState(CHECKED_STATE_SET);
            setMinHeight(d.getIntrinsicHeight());

            mCheckMarkWidth = d.getIntrinsicWidth();
            mPaddingRight = mCheckMarkWidth + mBasePaddingRight;
            d.setState(getDrawableState());
        } else {
            mPaddingRight = mBasePaddingRight;
        }
        mCheckMarkDrawable = d;
        requestLayout();
    }

    @Override
    public void setPadding(int left, int top, int right, int bottom) {
        super.setPadding(left, top, right, bottom);
        mBasePaddingRight = mPaddingRight;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        final Drawable checkMarkDrawable = mCheckMarkDrawable;
        if (checkMarkDrawable != null) {
            final int verticalGravity = getGravity() & Gravity.VERTICAL_GRAVITY_MASK;
            final int height = checkMarkDrawable.getIntrinsicHeight();

            int y = 0;

            switch (verticalGravity) {
                case Gravity.BOTTOM:
                    y = getHeight() - height;
                    break;
                case Gravity.CENTER_VERTICAL:
                    y = (getHeight() - height) / 2;
                    break;
            }

            int right = getWidth();
            checkMarkDrawable.setBounds(
                    right - mCheckMarkWidth - mBasePaddingRight, 
                    y, 
                    right - mBasePaddingRight, 
                    y + height);
            checkMarkDrawable.draw(canvas);
        }
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CHECKED_STATE_SET);
        }
        return drawableState;
    }

    @Override
    protected void drawableStateChanged() {
        super.drawableStateChanged();

        if (mCheckMarkDrawable != null) {
            int[] myDrawableState = getDrawableState();

            // Set the state of the Drawable
            mCheckMarkDrawable.setState(myDrawableState);

            invalidate();
        }
    }

    @Override
    public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) {
        boolean populated = super.dispatchPopulateAccessibilityEvent(event);
        if (!populated) {
            event.setChecked(mChecked);
        }
        return populated;
    }
} 
```

如上所示，checkMarkDrawable 是在 Canvas 中确定 Gravity 位置的位置。 **我的问题是：如何更改 checkMarkDrawable 的位置，例如在左侧的 TextView 中设置 checkMarkDrawable。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T18:49:32.300

如果您希望复选框位于左侧，只需使用[`CheckBox`](http://developer.android.com/reference/android/widget/CheckBox.html). 也许这不是理所当然，而是`CheckBox`可以包含文本。您可以通过添加 XML 属性[android:text](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3atext)或调用[setText()](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)方法来定义该文本。实际上`CheckBox`是继承自`Button`，它继承自`TextView`，这就是为什么它具有所有与文本相关的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:33:00.783

在 xml 中使用`drawableRight`而不是。`checkMarkDrawable`

# c++ - C++ 中的固体噪声生成

> ID：11444468
> 
> 赞同：1
> 
> 时间：2012-07-12T03:03:03.290
> 
> 标签：c++, noise, simplex

所以我一直在使用我的谷歌技能来研究 Perlin 和 Simplex 噪声，并且遇到了很多对我自己来说有点数学重的文章。我也遇到过很多代码，但似乎是在 C# 或 Java 中，我对这两种代码都不够熟悉，无法推断噪声是如何产生的。

我的目标是找到一些会产生固体噪点的代码，类似于 GIMP 中的“Render Clouds”功能，如下图：

![](../Images/f878d8331e48899a6982680857ad03ca.png)

现在它不必有什么花哨的东西，我只想能够在我的程序中产生如上所示的噪音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T03:16:03.893

[Cinder](http://libcinder.org/)是一个用 C++ 编写图形应用程序的优秀框架。它有一个内置的[Perlin 噪音](http://libcinder.org/docs/v0.8.4/classcinder_1_1_perlin.html)等级，[目前维护得很好，并且有一个活跃的社区](https://forum.libcinder.org/topic/perlin-noise-on-shader)。

用煤渣和噪音做的有趣的事情：

[http://blog.soulwire.co.uk/laboratory/cinder/noise-reactive-particle-sphere](http://blog.soulwire.co.uk/laboratory/cinder/noise-reactive-particle-sphere) [https://1024d.wordpress.com/2010/07/23/quartz-composer-cinder-plugin/](https://1024d.wordpress.com/2010/07/23/quartz-composer-cinder-plugin/) [https:// /vimeo.com/37555124](https://vimeo.com/37555124)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:53:42.533

我能够在 C++ 中找到一个不错的 Simplex Noise 库，我可以使用它，但这就是 jeremy 的建议 :)

链接到 C++ 单纯形噪声：[http ://www.6by9.net/b/2012/02/03/simplex-noise-for-c-and-python](http://www.6by9.net/b/2012/02/03/simplex-noise-for-c-and-python)

# cuda - CUDA、全局内存或主机内存哪个更快？

> ID：11444469
> 
> 赞同：3
> 
> 时间：2012-07-12T03:03:05.413
> 
> 标签：cuda

我从***CUDA by Example***的第 9.4 章读到，当在 GPU 全局内存上不正确地使用原子操作时，由于内存访问争用，程序的性能可能比纯粹在 CPU 上执行时更差。

在更糟糕的情况下，在 GPU 上执行的程序是高度序列化的，没有线程并行执行，这正是单线程程序在 CPU 上运行的方式。所以关键问题是程序访问内存的速度有多快。

考虑到我提到的书中的例子，CPU 访问主机内存的速度似乎比 GPU 访问设备上的全局内存快。

是这样吗？或者在我刚才描述的情况下，还有其他影响程序性能的因素吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T04:33:05.153

我认为你误读了一些东西。是的，它是说 GPU 上的单线程代码通常比 CPU 上的要慢。但这不是因为原始内存带宽 - 这是因为在运行单线程时 CPU 比 GPU 更强大。例如，CPU 具有流水线和复杂的分支预测以从内存中预加载数据，而 GPU 旨在在等待数据时将上下文切换到另一个线程。CPU 针对单线程情况进行了调优，而 GPU 针对多线程进行了调优。

如果您想知道哪种内存最快，请查看您的卡和主板的技术规格，但这并不是本书真正要讨论的内容。

# c# - 使用加密算法获取恒定密钥大小

> ID：11444471
> 
> 赞同：-3
> 
> 时间：2012-07-12T03:03:15.057
> 
> 标签：c#, asp.net, .net, algorithm

我正在使用 Visual Studio 2010 和 Sql server 2008

我是密码学的新手。我需要将模块名称加密为密钥。并且在将密钥提供给客户后，加密数据应该能够从密钥中检索模块名称。

我必须制作钥匙的CD钥匙图案。其中有一些数据在里面加密。

我需要有一个恒定大小的密钥。这种规范的最佳算法是什么。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:08:06.660

您不能以这种方式处理密码学。它只是行不通。您需要从精确的需求、威胁模型等开始。你所拥有的只是你想要的最终结果，你不能以此为基础进行设计。安全和不安全的解决方案都产生相同的结果，不同之处在于它们如何应对威胁。

# java - Java scan.nextLine() 只等待int用户输入的用户输入；不等待字符串用户输入

> ID：11444473
> 
> 赞同：0
> 
> 时间：2012-07-12T03:03:44.560
> 
> 标签：java, user-input, println

> **可能重复：**
> [java，程序未停止 scan.nextLine()](https://stackoverflow.com/questions/2268598/java-programm-not-stopping-for-scan-nextline)

```
 System.out.println("Welcome to the Tuition Calculator Program.");
    System.out.println("How many total credits are you taking?");
    credits = scan.nextInt();

    System.out.println("Are you a Washington resident? y/n");
    resident = scan.nextLine();

    System.out.println("Are you a graduate student? y/n");
    grad = scan.nextLine(); 
```

我是 Java 新手，对编程也比较陌生。在使用 jGRASP 的 PC 上。在上面的代码中，我只需要用户输入学分数（int 响应）、居住地（字符串）和毕业状态（字符串）。

它允许用户输入学分，然后将居民问题和研究生问题一起打印。它不会停止并允许用户输入居住问题的答案。（它确实允许我输入我对研究生问题的回答。）

论坛上的其他相关问题没有帮助；我曾尝试添加一个额外的行来吞下任何额外的换行符，但这并没有做到。也许我添加了错误类型的行。[该线程](https://stackoverflow.com/q/2268598/1519533)很有帮助，但没有提供有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:21:14.820

**为什么会这样？**
如果您尝试打印`resident`，您会发现它会打印`newline`字符。实际上这里发生的事情就是这样。在将输入`credits`作为字符串 ans 后，您按下的输入将被复制到`resident`变量中。所以你在这里需要的是避免那个换行符。
**解决方案**
读取`credits`using`nextLine()`并将其解析为整数 using `Integer.parseInt()`。

```
 System.out.println("Welcome to the Tuition Calculator Program.");  
    System.out.println("How many total credits are you taking?");  
    credits = Integer.parseInt(scan.nextLine());  
    System.out.println("Are you a Washington resident? y/n");
    resident = scan.nextLine();
    System.out.println("Are you a graduate student? y/n");
    grad = scan.nextLine(); 
```

# java - 为什么 Java HSQL 会抛出 AbstractMethodError 异常？

> ID：11444478
> 
> 赞同：3
> 
> 时间：2012-07-12T03:04:40.220
> 
> 标签：java, exception, jdbc, hsqldb

我从使用 HSQL 的 GIS 库中获取 AbstractMethodError 异常。我猜这是由我的机器上的配置问题引起的，但我不确定它是否与 JRE 或其他一些系统库有关。这是错误：

```
Exception in thread "main" java.lang.AbstractMethodError: org.hsqldb.jdbc.jdbcResultSet.isClosed()Z 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T03:08:57.550

*有些东西*是针对接口中具有该方法的 JDBC 版本编译的`void isClosed()`，`ResultSet`但运行时可用的 HSQLDB 版本没有该方法。最可能的解释是您需要更新用于运行应用程序的 HSQLDB 库。

这个方法被添加到`ResultSet`Java 6（即 JDBC 4.0）的接口中，所以旧的 HSQLDB 驱动程序不会有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T13:48:03.840

特别注意 groupId 在 1.8.0.10 发布后已更改为

```
<groupId>org.hsqldb</groupId>
  <artifactId>hsqldb</artifactId> 
```

检查 Maven[存储库](https://mvnrepository.com/artifact/org.hsqldb/hsqldb/2.3.4)以获取详细信息

# android - 为什么 TypedValue.applyDimension() 的缩放比例与 BitmapFactory.decodeResource() 不同？

> ID：11444481
> 
> 赞同：0
> 
> 时间：2012-07-12T03:05:19.267
> 
> 标签：android

我有一个 100x100 的图像和一些我想放置的坐标，它们与图像的比例相同。我用 加载图像`BitmapFactory.decodeResource()`，它被缩放到 133x133。但是当我使用`TypedValue.applyDimension()`with`TypedValue.COMPLEX_UNIT_DIP`来缩放坐标时，我得到的缩放因子是 x2 而不是 x1.33。

如何确保我的坐标和图像按相同的量缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:37:47.170

I'm testing on an xhdpi device, but I didn't have any xhdpi resources, so the `decodeResource()` was grabbing my hdpi resources and scaling up by 2/1.5=1.33.

The correct solution seems to be that you should specify your coordinates in the same scale as your mdpi resources, and ensure that you scale your alternate sized drawables with the same ratio that android expects, then use `TypedValue.applyDimension()` to scale your coordinates.

# python - 健全性检查：使用 django 的日期驱动事件处理程序

> ID：11444488
> 
> 赞同：2
> 
> 时间：2012-07-12T03:06:33.483
> 
> 标签：python, django

我正在构建一个客户培育应用程序，当订单满足某些基于时间的条件时，它将发送一封电子邮件，例如：

*   `50% OF Order time_to_ship elapsed`
*   `10 DAYS AFTER Order ship_date`
*   `5 DAYS AFTER NewsletterSubscriber signup_date`

我正在尝试确定如何最好地*触发*和*处理*这些事件。我没有处理此问题的经验，因此感谢您提供任何意见。

当前想法：轮询每个处理程序的匹配项，并确保每个处理程序匹配组合仅通过一个额外的表触发一次。在这种情况下，我不会触发可以在其他地方收听的事件，每个处理程序都在执行自己的查询。3 个处理程序`5 days after ...`将触发 3 个查询。

```
#  build table that stores which handlers have fired for a given object 
class HandlerFired(models.Model):
    ctype = models.ForeignKey(ContentType, related_name="handlerfired_ctype")
    id = models.IntegerField()
    handler = models.ForeignKey(Handler)

class Handler(models.Model):
    ctype = models.ForeignKey(ContentType)
    condition = ...

#  cron job every day 
for handler in Handler.objects.filter(is_active=True):
    objects = handler.run_query().exclude(
         handlerfired=handler, handlerfired_ctype=handler.ctype)
    handler.handle(objects) # do whatever it's supposed to do with given objects.
    # handle() would also make sure the `HandlerFired` table is populated with a record. 
```

这个想法给了我比我开始这个项目时想象的更多的悲伤/选择。有时间驱动的事件似乎是一个很常见的问题。

**或者，我可以每天做一个事件**而不是*处理程序*的 cron 工作，但我认为我必须跟踪触发的每个事件，以确保我不会触发 2，或者不会跳过一个事件（比如跳过 20% 的事件，因为停机时间）。与已触发但感觉更像真正的事件发射器的记录处理程序相比，这将存储数千条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:23:06.523

Django async 是一个异步执行队列。您可以安排未来的事件，然后检查该条件当时是否有效。例如，当订单发货时，安排一个在 10 天后触发的事件，当它执行时，它可以在发送电子邮件之前确定任何其他条件。

[http://pypi.python.org/pypi/django-async/](http://pypi.python.org/pypi/django-async/)

Django async 已内置运行一次行为，如果队列因任何原因停止，它将在重新启动时赶上过去的作业。暂时性错误（如 SMTP 服务器关闭）将自动重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:19:44.923

我会创建一个 django 管理命令来执行您需要的任何处理，然后分配一个 cronjob 来定期执行它。

然后，您可能需要一个模型来跟踪是否满足/处理了条件，和/或哪些记录触发了事件。

# xml - 如何获取 $.ajax 原始请求响应文本

> ID：11444490
> 
> 赞同：0
> 
> 时间：2012-07-12T03:07:06.693
> 
> 标签：xml, jquery, jsonp

我`$.ajax`用来获取跨域 xml 数据，通过`datatype`将`jsonp`.

好消息是我可以正确获取数据，通过检查 HttpRequest 响应数据。坏消息是我得到的 xml 不能被 ajax 函数打印或解析，所以它报告我错误，数据被截获。

所以我想我是否可以在`$.ajax`解析之前获取原始响应文本并拦截它，然后我可以自己解析文本。

那可能吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-12T03:55:41.783

这不是您可以在浏览器上执行的操作，但我建议使用**wireshark**

您可以查看原始数据包，并查看 HTTP 请求/响应。

那么祝你好运吧！

# sql - 带有可选参数但至少需要一个参数的存储过程

> ID：11444493
> 
> 赞同：1
> 
> 时间：2012-07-12T03:07:36.900
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

是否可以创建一个存储过程，其参数都是可选的，但必须至少提供一个参数？

例如，如果我有一个更新记录的过程，我必须传入一个记录 id，然后至少要更新一列。该程序应检查以确保提供至少一个附加参数/列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:24:19.833

我会将 if 语句作为第一个操作。

```
IF @param1 is null and @param2 isnul and @param3 is null
Begin
--steps tpo raise an error or exit the proc
End 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:28:26.550

我会用我选择的编程语言而不是存储过程来执行此操作。为什么？这是TSQL不太擅长的逻辑检查类型；检查它的语法将是“icky”，并且会很慢。

此外，存储过程为您提供的最大性能优势是运行已编译的 SQL。在这种情况下，由于需要动态构建 SQL，您将失去该优势。因此，为什么将它作为存储过程呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:00:47.030

在 where 子句中使用以下内容

```
where
(isnull(@param1,0)=0 or id=@param1)
and 
(isnull(@param2,'')='' or name=@param2) 
```

# javascript - AngularJS - 链接模板后有什么方法可以调用 javascript？

> ID：11444494
> 
> 赞同：3
> 
> 时间：2012-07-12T03:07:39.593
> 
> 标签：javascript, plupload, angularjs

我正在尝试将 jQuery 插件（[Plupload](http://www.plupload.com/index.php)）与 AngularJS 一起使用。我创建了一个指令，它将成为我的文件上传“小部件”。该指令如下所示（链接函数中的代码是[Plupload 站点上示例的](http://www.plupload.com/example_custom.php)一个非常简化的版本）：

```
.directive('myFileUpload', function () {
    return {
        restrict: 'E',
        replace: true,
        link: function(scope, element, attrs) {
            scope.uploaderProperties = {
                    runtimes : 'html5,flash,html4',
                    url : 'media/upload',
                    max_file_size : '10mb',
                    container: 'fileUploadContainer',
                    drop_element: 'fileUploadDropArea'
            };

            scope.uploader = new plupload.Uploader(scope.uploaderProperties);

            scope.uploader.init();

            scope.uploader.bind('FilesAdded', function(up, files) {
                scope.$apply();
            });
        },
        templateUrl: 'upload.html'
    };
}); 
```

我的 upload.html 文件如下所示：

```
<div id="{{uploaderProperties.container}}">
    <div id="{{uploaderProperties.drop_element}}" style="border: 1px black dashed;">Drop files here<br><br><br></div>
    Files to upload:<br>
    <div ng-repeat="currFile in uploader.files">{{currFile.name}} ({{currFile.size}}) </div>
    <br><br>
    <!-- for debugging -->
    {{uploader.files}}
    <br><br>
</div> 
```

当我在页面上包含带有`<my-file-upload>`元素的指令时，所有数据绑定都会正确发生。问题是，在`scope.uploader.init();`运行时，id 尚未插入 DOM，因此 Plupload 抱怨并中断，因为它无法选择这些元素。如果我只是在模板中硬编码`fileUploadContainer`和`fileUploadDropArea`id，它工作得很好。但是，我真的很想在一个地方定义这些 id。

那么，在链接模板后，有什么方法可以`init()`在上传器上运行？我考虑过`$timeout`在它运行时使用延迟，但这对我来说似乎是一个很大的黑客攻击。有没有更正确的方法来做到这一点？

**更新**

我把它包`init()`成`$timeout`这样

```
$timeout(function() {
    scope.uploader.init();
}, 2000); 
```

只是为了确保它会按照我的想法运行，而且果然，随着这个延迟，插件可以正确设置并正常工作。但是，我不想依赖`$timeout`. 如果在`scope.uploader.init();`链接模板后我可以调用某种方法，那么一切都应该正常。有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:23:46.607

您的问题实际上是相反的 - 链接功能在模板被放入*之后发生。所以在这种情况下，模板发生时没有设置 scope.uploaderProperties。*

看起来你的模板对于 templateUrl 选项来说太花哨了，真的。您可以尝试使用 jQuery 手动设置您的 id，或者在 compile 函数中设置所有内容。

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# ios - FirstViewController 在删除 SecondViewController 的子视图时不起作用

> ID：11444495
> 
> 赞同：0
> 
> 时间：2012-07-12T03:07:55.413
> 
> 标签：ios, xcode, uiviewcontroller, ibaction

第一个视图控制器

我正在使用 UIStoryBoard 来允许 FirstViewController 将第二个 ViewController 的视图添加为子视图。在删除子视图时

```
 - (IBAction) btnMoveTo:(id)sender
{

 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
 UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"Second"];
 vc.view.backgroundColor = [UIColor clearColor];
 self.modalPresentationStyle = UIModalPresentationCurrentContext;
 [self presentModalViewController:vc animated:NO];

} 
```

第二视图控制器.m

```
-(void)viewDidLoad{
   self.view.opaque = YES;
   self.view.backgroundColor = [UIColor clearColor];
}

 - (IBAction) withDraw:(id)sender{
     [self.view removeWithZoomOutAnimation:2 option:nil];
    } 
```

当我访问 withDraw 函数时，SecondViewController 的视图被删除并且 firstViewController 又回来了。但是，当我使用按钮访问 - (IBAction) btnMoveTo:(id)sender 函数时。它不起作用。什么都没有发生。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:29:38.193

有效

```
- (IBAction) withDraw:(id)sender{
 [self.view removeWithZoomOViewControllerutAnimation:2 option:nil];

  UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
  UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"First"];
  vc.view.backgroundColor = [UIColor clearColor];
  self.modalPresentationStyle = UIModalPresentationCurrentContext;
  [self presentModalViewController:vc animated:NO];
} 
```

我通过指向它的标识符添加了 firstViewController 的另一个实例。所以它将 FirstViewController 带回顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:21:40.707

也许您可以尝试像这样声明 *vc： UIViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Second"];

# python - 重置价值不起作用？

> ID：11444497
> 
> 赞同：0
> 
> 时间：2012-07-12T03:08:17.830
> 
> 标签：python, string, itertools

所以我设置了一个 try/except 块，它将根据某些条件通过数据库：

```
try:
    for searchnumber in itertools.count(0):
        print searchnumber
        c.execute("""SELECT words from searchterms where onstate = 1 AND progid = %d;""") % searchnumber
        searchterms = (c.fetchall())
        searchterms = [",".join(x) for x in searchterms]
        print searchterms
except:
    pass 
```

出于某种原因，它没有在 progid 上进行迭代，事实上，它甚至没有获得分配给它的第一个值 (0)。为什么会这样？据我所知， %d 应该替换为 searchnumber 的整数值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T03:17:10.900

您可能隐藏了 a `TypeError`，因为您试图`%`在任何对象或值上使用运算符`c.execute("string")`. 如果你没有用裸的 except 隐藏所有错误，你可能已经抓住了它。您会注意到这是[官方 Python Dos and Don'ts page](http://docs.python.org/howto/doanddont.html#except)中的特定反模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T03:14:21.277

1.  永远不要使用`except: pass`，它会隐藏信息。

2.  它当前隐藏的信息可能是此代码的失败：

    ```
     c.execute("""SELECT words from searchterms where onstate = 1 AND progid = %d;""") % searchnumber 
    ```

# android - Eclipse 错误中适用于 Android 的 OpenCV 库

> ID：11444498
> 
> 赞同：0
> 
> 时间：2012-07-12T03:08:27.347
> 
> 标签：android, eclipse, opencv

在将 OpenCV 库添加到我的工作区并将其指定为库项目后，我遇到了一个困扰我的错误。在线上：

```
mEngineService = OpenCVEngineInterface.Stub.asInterface(service); 
```

我收到以下错误：

```
Stub cannot be resolved or is not a field. 
```

显然，查看文件*org.opencv.engine.OpenCVEngineInterface*没有名为 Stub 的字段。那么，什么是 Stub，我在哪里可以找到它？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T21:37:35.030

使用`aidl`android sdk 中的工具将`OpenCVEngineInterface.aidl`文件转换为`OpenCVEngineInterface.java`.

# php - PHP：检查 YT 网址是否有效以及视频是否存在

> ID：11444501
> 
> 赞同：2
> 
> 时间：2012-07-12T03:08:35.247
> 
> 标签：php

该函数的目的是验证 YouTube 视频的 URL 并检查该视频是否存在。这是我实际代码的片段。我将字符串操作为我想要的格式，然后我继续检查它是否有效并且存在。如果它通过了测试，那么我会回显结果。问题是我没有正确调用该函数。

即使视频确实存在，我也会收到此回声：

视频不存在或网址无效

**编辑：并添加了 isValidURL 函数** **检查视频是否存在或无效的代码：* *

```
 if($_POST)
    {

            // After applying url manipulation and getting the url in a proper format result = $formatted_url

function isValidURL($formatted_url) {

            $formatted_url = trim($formatted_url);
            $isValid = true;

            if (strpos($formatted_url, 'http://') === false && strpos($formatted_url, 'https://') === false) {
                $formatted_url = 'http://'.$formatted_url;
            }

            //first check with php's FILTER_VALIDATE_URL
            if (filter_var($formatted_url, FILTER_VALIDATE_URL, FILTER_FLAG_HOST_REQUIRED) === false) {
                $isValid = false;
            } else {
                //not all invalid URLs are caught by FILTER_VALIDATE_URL
                //use our own mechanism

                $host = parse_url($formatted_url, PHP_URL_HOST);
                $dotcount = substr_count($host, '.');

                //the host should contain at least one dot
                if ($dotcount > 0) {
                    //if the host contains one dot
                    if ($dotcount == 1) {
                        //and it start with www.
                        if (strpos($host, 'www.') === 0) {
                            //there is no top level domain, so it is invalid
                            $isValid = false;
                        }
                    } else {
                        //the host contains multiple dots
                        if (strpos($host, '..') !== false) {
                            //dots can't be next to each other, so it is invalid
                            $isValid = false;
                        }
                    }
                } else {
                    //no dots, so it is invalid
                    $isValid = false;
                }
            }

            //return false if host is invalid
            //otherwise return true
            return $isValid;
        }

        $isValid = getYoutubeVideoID($formatted_url);

            function isYoutubeVideo($formatted_url) {
                $isValid = false;
                    //validate the url, see: http://snipplr.com/view/50618/
                if (isValidURL($formatted_url)) {
                            //code adapted from Moridin: http://snipplr.com/view/19232/                
                    $idLength = 11;
                    $idOffset = 3;
                    $idStarts = strpos($formatted_url, "?v=");
                    if ($idStarts !== FALSE) {
                                    //there is a videoID present, now validate it
                        $videoID = substr($formatted_url, $idStarts + $idOffset, $idLength);
                        $http = new HTTP("http://gdata.youtube.com");
                        $result = $http->doRequest("/feeds/api/videos/".$videoID, "GET");
                                    //returns Array('headers' => Array(), 'body' => String);
                        $code = $result['headers']['http_code'];
                                    //did the request return a http code of 2xx?
                        if (substr($code, 0, 1) == 2) {
                            $isValid = true;
                        }
                    }
                }
                return $isValid;
            }

            $isValid = isYoutubeVideo($formatted_url);
            parse_str($parsed_url['query'], $parsed_query_string);
            $v = $parsed_query_string['v'];

            if ( $isValid == true ) {
                //Iframe code 
                echo htmlentities ('<iframe src="http://www.youtube.com/embed/'.$v.'" frameborder="0" width="'.$wdth.'" height="'.$hth.'"></iframe>');

                //Old way to embed code
                echo htmlentities ('<embed src="http://www.youtube.com/v/'.$v.'" width="'.$wdth.'" height="'.$hth.'" type="application/x-shockwave-flash"  wmode="transparent" embed="" /></embed>');
                }
            else {

            echo ("The video does not exist or invalid url"); 

            }

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:27:25.153

您缺少该`isValidURL()`功能。尝试更改此行：

```
if (isValidURL($formatted_url)) { 
```

到

```
if(preg_match('/http:\/\/www\.youtube\.com\/watch\?v=[^&]+/', $formatted_url, $result)) { 
```

或者

```
$test = parse_url($formatted_url);
if($test['host']=="www.youtube.com"){ 
```

# c++ - 分配内存失败导致分段错误

> ID：11444504
> 
> 赞同：-1
> 
> 时间：2012-07-12T03:08:55.707
> 
> 标签：c++, segmentation-fault, opencl

我正在用 C++ 和 OpenCL 开发这个测试应用程序，但我只是不明白为什么我会遇到这个非常奇怪的问题，这会进一步导致分段错误。

部分代码：

```
output = new cl_float[TestCount*TrainCount]; // output array
output_buf = new cl::Buffer(*context, CL_MEM_WRITE_ONLY, sizeof(cl_float)*TestCount*TrainCount, NULL);
// .... some more stuff
queue->enqueueReadBuffer(*output_buf, CL_TRUE, 0, TestCount*TrainCount, output); 
```

这里， output 和 output_buf 是指向它们各自数据的指针。

当我在处理完所有内容后尝试访问输出数组的任何元素时，就会发生段错误。经过进一步调试，我发现它存储的最大元素数是 562，而应该是 2250（TestCount=150，TrainCount=15）。此外，令人惊讶的是，我可以访问 GDB 中的任何元素，但不能访问 562 以上的元素。

我毫不怀疑代码中没有错误，并且我绝对确定所有 2250 输出都由 GPU 处理。这是通过在每个线程中以原子方式递增输出数组的第一个元素然后通过 GDB 输出来进行测试的。

似乎我已经排除了很多可能性，但我仍然无法弄清楚是什么导致了这个问题。堆被填满的可能性很小，但我发现我的应用程序只使用了 37M 的内存。

任何帮助，将不胜感激！

**更新：**詹姆斯是对的。这是因为没有从内存中读取足够的字节。段故障的回溯如下 -

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x000000000000000c
0x0000000100002402 in main (argc=4, argv=0x7fff5fbffb88)
    at TestApplication.cpp:202
202     cout << OpenCL_KNN::output[0] << " " << OpenCL_KNN::output[1] << " " << OpenCL_KNN::output[2] << " " << OpenCL_KNN::output[3]; 
```

被访问的 4 个索引是明确定义的。在这行之前没有给我任何错误。除了我之前提到的以外，输出数组不会在任何地方更改/创建。

**更新 2**：错误已解决。它只发生在 Mac OS X 中。它与我访问输出的方式有关。一旦我在 OpenCL_KNN 命名空间中创建了一个返回输出的函数，它就会完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:34:24.930

我不熟悉 CL 的 C++ 包装器，但我猜这是从 GPU 读取的字节太少`TestCount*TrainCount`的一个因素。`sizeof(cl_float)`您的代码应该是：

```
queue->enqueueReadBuffer(*output_buf, CL_TRUE, 0, sizeof(cl_float)*TestCount*TrainCount, output); 
```

但是，这并不能解释您的段错误。也许您在其他地方也犯了同样的错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:20:05.657

发生此错误是因为您正在访问未初始化或正在删除的内存。错误在这行代码中。

```
queue->enqueueReadBuffer(*output_buf, CL_TRUE, 0, TestCount*TrainCount, output); 
```

检查代码中的每个对象和变量（指针）是否已正确初始化。完成后，此错误将消失。不必在指定的代码行上生成错误，它可能发生在您访问的位置一个未初始化的内存地址。

# paypal-ipn - Paypal 根本没有在我的网络服务器上调用 IPN 脚本

> ID：11444512
> 
> 赞同：3
> 
> 时间：2012-07-12T03:09:31.620
> 
> 标签：paypal-ipn

我正在尝试在网站上使用 Paypal IPN。

*   付款有效并标记为“已完成”。
*   返回网址有效。
*   发送电子邮件通知付款完成

但似乎贝宝不与 IPN 脚本对话。与 Wireshark 核对时，发送付款时没有与我的网站通信。

1.  可能是因为此通信嵌入在 SSL 通信中，而不是在不安全的 HTTP 中？

2.  我的服务器可以拒绝处理来自 Paypal 的 IPN 请求吗？

我认为它可以开箱即用，但没有。它似乎没有到达我的服务器，并且 Paypal 没有返回类似“您的服务器拒绝接收 IPN 信息”之类的信息。所以 Paypal 只是不调用 IPN 脚本。

我 99% 确定我的请求是正确的，但这是我制作的按钮：

```
<form action="<%=paypalurl%>" method="post" target="_blank">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="<%=appsettings.paypalemail%>">
<input type="hidden" name="item_name" value="<%=appsettings.paypalitem%>">
<input type="hidden" name="item_number" value="<%=appsettings.paypalid%>">
<input type="hidden" name="amount" value="<%=appsettings.paypalamount%>">
<input type="hidden" name="currency_code" value="<%=appsettings.paypalcurrency%>">
<input type="hidden" name="custom" value="<%=userid%>">
<input type="hidden" name="notify_url" value="http://www.mysite.com/ipnscript.aspx">
<input type="hidden" name="return" value="http://www.mysite.com/ppreturnurl.aspx">
<input type="hidden" name="cancel_return" value="http://www.mysite.com/ppcancelurl.aspx">
<input type="hidden" name="bn" value="PP-BuyNowBF">
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_paynowCC_LG.gif"  border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:09:52.513

您确定启用了 IPN 吗？

帐户 -> 我的个人资料 -> 即时付款通知首选项

其次，我会检查 IPN 历史

帐户 -> 历史 -> IPN 历史

这将允许您查看状态并在需要时重新发送。

*   我假设您首先使用沙盒进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T18:01:34.043

自 2013 年 6 月 20 日起，如果您有企业帐户，要启用 IPN 消息：

（登录 PayPal）> 个人资料 > 我的销售工具 > 获得付款和管理我的风险 / 即时付款通知 / 更新 > 选择 IPN 设置 > (o) 接收 IPN 消息（启用）> 保存

*注意：如果您在付款表单/按钮代码中提供“notify_url”字段，您可以将“通知 URL”留空。

# arm - 中断挂起的 ARM Cortex-M3 示例

> ID：11444513
> 
> 赞同：2
> 
> 时间：2012-07-12T03:09:33.757
> 
> 标签：arm, cortex-m3

对于 ARM Cortex-M3，例如 NXP LPC1788，为什么有人会使用中断设置挂起寄存器或中断清除挂起寄存器？

有人可以提供一个使用这些寄存器的简单、规范的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:10:45.567

我能想到的唯一用例是从高优先级 IRQHandler 触发低优先级软件 excaption - 就像 GPIO 中断处理程序一样。

通常您会为此使用 PendSV，但当您有多个任务或优先级时，您可以使用任何未使用的外围异常向量。在使用退出时休眠功能的程序中可能很有用 - 其中 µC 将仅在异常处理程序中运行。

```
// Example for LPC17xx
void   ETHERNET_Handler (void)
{
    // toggle LED on P0.4
    LPC_GPIO0->FIODIR0 ^= (1<<4);
}

void main(void) 
{
    // set Ethernet IRQ to loewst Priority
    NVIC_SetPriority(ENET_IRQn,31);
    NVIC_EnableIRQ(ENET_IRQn);
    NVIC_SetPendingIRQ(ENET_IRQn); // trigger Ethernet IRQ Handler
    // ...
    while (1);

} 
```

# php - PHP：如何将文件导出到不同的目录？

> ID：11444518
> 
> 赞同：0
> 
> 时间：2012-07-12T03:10:08.723
> 
> 标签：php, download, desktop

我是 php 新手，我正在尝试弄清楚如何将我的文件导出到不同的目录。到目前为止我有..

```
header("Content-Type: application/json");
header("Content-Disposition attachment; filename=\"test.text\""); 
```

我导出我的文件，但他们都去*Downloads*，我怎样才能让它去我的 /Desktop？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:11:16.473

你不能用代码改变它。您需要在浏览器中更改该设置。

# r - plyr 是否会跳过某个因子的缺失级别[即分组变量]？

> ID：11444519
> 
> 赞同：0
> 
> 时间：2012-07-12T03:10:20.903
> 
> 标签：r, plyr, r-factor

plyr 是否会跳过某个因子的缺失级别[即分组变量]？这是我诊断问题的第一个问题。

我有一个数据集，其中患者位于`strata=rural`或`strata=city`。我想将`age`in`treatment=A`与`treatment=B`.

例如，我正在尝试做：

```
ddply(data.c, .(strata), function(x) t.test(age~treatment, data=x, na.rm=TRUE) 
```

但它告诉我

> t.test.formula 中的错误（年龄 ~ 治疗，数据 = x，na.rm = TRUE）：分组因子必须恰好有 2 个级别

如果我运行`factor(data$strata)`并且`factor(data$treatment)`我分别只看到两个级别（它们分别是两个标签；这不是问题，对吗？）。

plyr 是否认为 NA 是分组因素中的一个级别？错误消息可能是什么问题？

我一直在谷歌搜索并查看 stackoverflow 来回答这个问题。我对 R 很陌生，但我找不到答案。任何帮助深表感谢。

* * *

所以我有一些示例代码。Chase 的例子效果很好，但是当我使用我的数据时，我仍然得到同样的错误。

`dlply(data.c, .(strata), function(x) t.test(age~treatment, data=x, na.rm=TRUE`产生了同样的错误。

我不明白为什么会这样。

下面是我的`data.c`

```
 strata  age treatment
1   1   57.8630136986301    p_3
2   0   52.958904109589 p_3
3   NA  97.2438356164384    p12
4   0   88.2027397260274    p12
5   1   77.5890410958904    p12
6   1   43.9123287671233    p12
7   1   63.5260273972603    p_3
8   1   42.1890410958904    p12
9   0   52.1753424657534    p12
10  1   65.6493150684932    p12
11  0   44.9835616438356    p12
12  1   64.8849315068493    p12
13  1   57.5835616438356    p12
14  0   47.3013698630137    p12
15  0   74.0356164383562    NA
16  0   65.4986301369863    p12
17  1   83.986301369863 p12
18  0   47.4904109589041    p12
19  1   47.8630136986301    p12
20  1   58.8520547945205    p12
21  1   61.3342465753425    p12
22  1   66.841095890411 p12
23  1   55.6383561643836    p12
24  1   52.7178082191781    p12
25  1   71.4630136986301    p12
26  1   NA  p12
27  1   59.2082191780822    p12
28  1   69.8575342465753    p12
29  1   46.7397260273973    p12
30  1   53.5013698630137    p_3
31  1   41.3205479452055    p12
32  0   51.3917808219178    p_3
33  1   47.8684931506849    p12
34  1   87.654794520548 p12
35  0   75.558904109589 p12
36  1   71.2520547945205    p12
37  1   44.9808219178082    p_3
38  1   52  p_3
39  1   54.7643835616438    p_3
40  1   85.6630136986301    p_3
41  1   74.1835616438356    p_3
42  1   56.8684931506849    p_3
43  1   87.572602739726 p_3
44  1   85.0109589041096    p_3
45  1   70.0767123287671    p_3
46  0   47.2328767123288    p12
47  1   63.7972602739726    p12
48  1   85.8054794520548    p12
49  1   67.027397260274 p12
50  1   60.7342465753425    p12
51  0   61.9479452054794    p_3
52  0   86.8712328767123    p12
53  1   87.8219178082192    p12
54  1   49.9424657534247    p12
55  0   83.386301369863 p12
56  1   88.3013698630137    p12
57  1   55.7890410958904    p12
58  1   63.7616438356164    p12
59  1   55.5041095890411    p12
60  1   43.5232876712329    p12
61  1   58.8246575342466    p12
62  0   46.7397260273973    p12
63  0   74.2027397260274    p_3
64  0   51.9205479452055    p_3
65  0   78.1890410958904    p_3
66  0   78.9917808219178    p_3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:37:57.540

我认为您需要向我们提供一些示例数据，因为我无法复制您的错误。我确实收到有关`ddply()`抱怨以下内容的错误：

```
 Error in list_to_dataframe(res, attr(.data, "split_labels")) : 
  Results must be all atomic, or all data frames 
```

这是因为输出`t.test()`的不是 data.frame 而是 class 的列表`htest`。因此，只需告诉 plyr 返回一个列表对象即可解决问题。如果你想从列表中提取一个特定的值，你可能会得到一个 data.frame 回来。

以下是我设置您的数据的方式：

```
x <- data.frame(strata = sample(letters[1:2], 100, TRUE),
                age = sample(18:65, 100, TRUE),
                treatment = sample(LETTERS[1:2], 100, TRUE))
x[sample(nrow(x), 10, FALSE), "strata"] <- NA
x[sample(nrow(x), 10, FALSE), "treatment"] <- NA 
```

然后只需调用函数即可`dlply()`：

```
out <- dlply(x, .(strata), function(x) t.test(age~treatment, data = x, na.rm=TRUE)) 
```

为了回答你的问题，是的 - plyr 似乎将 NA 视为一个有效组，这可以从长度和`out`列出列表对象的名称中看出：

```
> names(out)
[1] "a"  "b"  "NA" 
```

正如我所说，更好地描述您的问题可能会导致更好的答案 - 但希望这能让您走上正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:45:25.470

`plyr`为了对变量进行分组，确实将缺失视为单独的组。因此，在您的示例中，有三组：`0`、`1`和`NA`。`.inform`您可以通过添加参数来查看哪些组引发了错误：

```
dlply(data.c, 
      .(strata), 
      function(x) t.test(age~treatment, data=x, na.rm=TRUE), 
      .inform=TRUE) 
```

报告：

```
Error in t.test.formula(age ~ treatment, data = x, na.rm = TRUE) : 
  grouping factor must have exactly 2 levels
Error: with piece 3: 
  strata      age treatment
3     NA 97.24384       p12 
```

事实上，只有一行带有`strata`of `NA`，并且`t.test`对单个数据点（或者更确切地说，所有数据点都在同一组中）执行 a 将给出您看到的错误：

```
> t.test(age~treatment, data=data.c[is.na(data.c$strata),], na.rm=TRUE)
Error in t.test.formula(age ~ treatment, data = data.c[is.na(data.c$strata),  : 
  grouping factor must have exactly 2 levels 
```

要解决此问题，您可以`data.c`在`dlply`调用中设置子集：

```
dlply(data.c[!is.na(data.c$strata),],
      .(strata), 
      function(x) t.test(age~treatment, data=x, na.rm=TRUE)) 
```

（假设您知道问题将在哪里解决）并且给出：

```
$`0`

        Welch Two Sample t-test

data:  age by treatment 
t = 0.2653, df = 15.729, p-value = 0.7942
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -13.41565  17.24792 
sample estimates:
mean in group p_3 mean in group p12 
         64.22896          62.31283 

$`1`

        Welch Two Sample t-test

data:  age by treatment 
t = 0.6606, df = 18.612, p-value = 0.517
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -6.998471 13.440397 
sample estimates:
mean in group p_3 mean in group p12 
         65.50091          62.27995 

attr(,"split_type")
[1] "data.frame"
attr(,"split_labels")
  strata
1      0
2      1 
```

或者您可以通过错误捕获来保护呼叫。`plyr`为此目的提供了一个方便的包装器`try_default`。

```
dlply(data.c, 
      .(strata), 
      function(x) try_default(t.test(age~treatment, data=x, na.rm=TRUE),
                              NULL)) 
```

这使

```
Error in t.test.formula(age ~ treatment, data = x, na.rm = TRUE) : 
  grouping factor must have exactly 2 levels
$`0`

        Welch Two Sample t-test

data:  age by treatment 
t = 0.2653, df = 15.729, p-value = 0.7942
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -13.41565  17.24792 
sample estimates:
mean in group p_3 mean in group p12 
         64.22896          62.31283 

$`1`

        Welch Two Sample t-test

data:  age by treatment 
t = 0.6606, df = 18.612, p-value = 0.517
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -6.998471 13.440397 
sample estimates:
mean in group p_3 mean in group p12 
         65.50091          62.27995 

$`NA`
NULL

attr(,"split_type")
[1] "data.frame"
attr(,"split_labels")
  strata
1      0
2      1
3     NA 
```

请注意，此输出有 3 个元素，其中`NA`一个`NULL`因`try_default`.

# oauth-2.0 - 如何从 GAS 访问 posts.xml？

> ID：11444526
> 
> 赞同：1
> 
> 时间：2012-07-12T03:11:18.007
> 
> 标签：oauth-2.0, google-apps-script, gdata, google-sites

我正在尝试从我网站的新闻页面“帖子”URL [https://sites.google.com/a/mydomain/my-site/my-announcements-page/posts.xml](https://sites.google.com/a/mydomain/my-site/my-announcements-page/posts.xml)获取 RSS/Atom 提要。作为登录用户，它可以在浏览器中运行。

我想做一个 Urlfetch，因为它似乎是一种超级快速的方法来计算页面和日期（<2 秒）。通过 SitesApp Pages 迭代或搜索执行此操作需要 5 到 25 秒）。该网站很小，内容轻巧，页面<50。

无论如何，所以我想 UrlFetch 我网站的帖子 URL，我想我需要一个 OAuth 范围并获得一个令牌。

[我已经尝试了 gdata Sites API https://developers.google.com/google-apps/sites/docs/1.0/developers_guide_protocol#Auth](https://developers.google.com/google-apps/sites/docs/1.0/developers_guide_protocol#Auth)的范围“https://sites.google.com/feeds/”并使用它在 Oauth Playground 2.0 上，它适用于记录的 API 提要 URL，但不适用于我网站的 posts.xml URL。当我尝试在操场上访问它时，我得到一个 401“令牌无效 - AuthSub 令牌的范围错误”。

所以我的问题是：是否可以使用带有 oauth 令牌的 Urlfetch 来访问页面的 posts.xml？我使用什么 OAuth 范围来获取令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:19:08.823

UrlFetchApp 目前仅支持 OAuth 1.0。尝试使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:08:21.463

只是为了结束这个问题。我没有找到通过 urlfetch 访问页面的 posts.xml 的方法。相反，我创建了自己的 ContentService 函数，以文本形式返回自特定时间以来通过`myAnnouncementsPage.getChildren()`.

# java - 从 POST 请求中检索图像

> ID：11444528
> 
> 赞同：5
> 
> 时间：2012-07-12T03:11:50.203
> 
> 标签：java, servlets

我正在尝试将图片发送到我的 java servlet（托管在亚马逊 ec2 上），以便稍后将其传输到亚马逊 s3，并想知道如何从发布请求中检索图像。

## 上传代码

请求通过 iOS RestKit API 发送，如下所示（pic.imageData 是 NSData 类型）：

```
RKParams* params = [RKParams params];

[params setValue:pic.dateTaken forParam:@"dateTaken"];
[params setValue:pic.dateUploaded forParam:@"dateUploaded"];

[params setData:pic.imageData MIMEType:@"image/jpeg" forParam:@"image"];

[RKClient sharedClient].username = deviceID;
[RKClient sharedClient].password = sessionKey;

[RKClient sharedClient].authenticationType = RKRequestAuthenticationTypeHTTPBasic;

uploadPictureRequest = [[RKClient sharedClient] post:kUploadPictureServlet params:params delegate:self]; 
```

## 解析代码存根

这就是我在 Java servlet 上解析其他 2 个参数的方式：

```
double dateTaken = Double.parseDouble(req.getParameter("dateTaken"));
double dateUploaded = Double.parseDouble(req.getParameter("dateUploaded")); 
```

## 问题

问题是：**如何检索和解析服务器上的图像？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:09:41.453

`Servlet 3.0`支持读取多部分数据。MutlipartConfig 支持`Servlet 3.0`如果使用注解对一个servelt进行`@MutlipartConfig`注解，则容器负责通过以下方式使 Multipart 部分可用

```
HttpServletRequest.getParts()
HttpServletRequest.getPart("name"); 
```

**参考：**

*   [Servlet 3.0 File Upload 处理文件和参数](https://stackoverflow.com/questions/11217611/java-servlet-jsp-image-upload-along-with-form-values/11219548#11219548)
*   [Servlet 3.0 文件上传示例](http://rameshpvk.blogspot.in/2012/06/fileuplod-using-servlet-30.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T03:30:54.860

与此类似，使用[Apache Commons FileUpload](http://commons.apache.org/fileupload/apidocs/index.html)：

```
 // or @SuppressWarnings("unchecked")
 @SuppressWarnings("rawtypes")
 public void doPost(HttpServletRequest request, HttpServletResponse response) 
         throws ServletException, IOException {
     if (ServletFileUpload.isMultipartContent(request)) {
         final FileItemFactory   factory = new DiskFileItemFactory();
         final ServletFileUpload upload  = new ServletFileUpload(factory);

         try {
             final List items = upload.parseRequest(request);

             for (Iterator itr = items.iterator(); itr.hasNext();) {
                 final FileItem item = (FileItem) itr.next();

                 if (!item.isFormField()) {
                    /*
                     * TODO: (for you)
                     *  1\. Verify that file item is an image type.
                     *  2\. And do whatever you want with it.
                     */
                 }
             }
         } catch (FileUploadException e) {
             e.printStackTrace();
         }
     }
 } 
```

请参阅[`FileItem`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html)API 参考文档以确定下一步要做什么。

# php - PHP Apache ImageMagick 扩展不会加载

> ID：11444529
> 
> 赞同：2
> 
> 时间：2012-07-12T03:12:11.890
> 
> 标签：php, apache, imagemagick

我正在使用 Apache 2.2、PHP 5.4.4 VC9 运行 64 位 Windows 7。我已经下载并安装了 ImageMagick 6.6.4 并从命令提示符成功测试了它。我已经重新启动了我的电脑。我尝试了许多不同的扩展文件，并在我的 Apache 日志中不断收到以下错误。

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\\PHP\\ext\\php_imagick_ts.dll' - The specified procedure could not be found.\r\n in Unknown on line 0 
```

我有我的`extension_dir`设置`C:\PHP\ext`。我当然已经添加了`extension=php_imagick_ts.dll`根据我正在尝试的文件修改的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:02:50.123

我让 Imagick 在 Win7 x64 上使用 PHP 5.4（仅测试命令行，但 Apache 应该可以工作）使用此处编译和托管的 beta 库：[http ://www.peewit.fr/imagick/](http://www.peewit.fr/imagick/)

[我通过ImageMagick 下载页面](https://www.imagemagick.org/script/download.php#windows)上的 ImageMagick-6.8.0-7-Q16-windows-dll.exe 文件安装了ImageMagick 。

```
C:\>php -v
PHP 5.4.0 (cli) (built: Feb 29 2012 19:24:02)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies

C:\>php -m
[PHP Modules]
...
imagick
... 
```

我还没有实际测试过*使用*这个扩展，但我相当有信心这会起作用，因为我尝试过的所有其他 .dll 在我尝试简单运行时导致 php.exe 崩溃`php -v`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:35:04.190

唯一对我有用的是加载 php 5.3。立即开始工作。

# ruby-on-rails - Ruby_noexec_wraper：没有这样的文件或目录

> ID：11444538
> 
> 赞同：0
> 
> 时间：2012-07-12T03:13:50.980
> 
> 标签：ruby-on-rails

我今天遇到了这个问题，一直没有问题。在哪里寻找纠正这个问题的任何建议。

我注意到在我的任何应用程序上使用 rake 运行任何命令时都会出现问题。

我正在使用 Ruby 1.9.3 运行 Mac OSX Lion

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:18:14.610

刚刚解决了我自己的问题。

我卸载了 rake，然后运行了 bundle install。修复了我的问题。

# java - Android 中的首选项 - 它是如何知道的？

> ID：11444540
> 
> 赞同：0
> 
> 时间：2012-07-12T03:14:09.267
> 
> 标签：java, android

我正在学习如何在 android 应用程序中设置首选项。我有一个文件 res/xml/prefs.xml，其中包含一些不同的组件（？）。这由 Prefs.java 引用，它`addPreferencesFromResource(R.xml.prefs);`在其`onCreate()`方法中使用。据我了解，prefs.xml 文件设置首选项，而 Prefs.java 文件访问 prefs.xml 以提供逻辑（然后我将对其进行编程）。
然后在我的清单中，我有一项活动作为

```
<activity
    android:name=".Prefs"
    android:label="Preferences" >
    <intent-filter>
        <action android:name="com.example.lesson1.PREFS" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

不太确定 Manifest 是否引用 Prefs.java 或者是否相反或什么。
此外（目前最令人困惑的），我还有另一个名为 Splash.java 的文件，它显示一个启动屏幕。在初始屏幕上`onCreate()`，它执行以下操作：

```
 MediaPlayer ourSong = MediaPlayer.create(Splash.this, R.raw.splash);
    SharedPreferences getPrefs = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext()); 
    boolean music = getPrefs.getBoolean("checkbox", true);
    if (music) {
        ourSong.start();
    } 
```

我不确定这如何知道偏好（其中任何一个，或者它引用的任何一个）在哪里。我从来没有告诉它 prefs.xml 是首选项文件，或者它在哪里。那么这是首选项所在的默认设置`res/xml/prefs.xml`并且它自动知道吗？
我只是对事情的整个顺序感到非常困惑。哪个文件引用哪个？清单如何在这里发挥作用（似乎它只是指向 .java 文件来告诉 android 应用程序它在那里，但我真的不知道）。最后，是否可以声明首选项位于不同的 .java 和 .xml 文件中，还是必须将它们称为 prefs.java/.xml？
谢谢，对不起，如果这令人困惑。我自己很困惑，无法真正判断我在这里是否完全有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:30:14.530

当你的应用程序被编译时，res 文件夹中的各种东西都会被编译进去。在这种情况下，xml 文件夹被识别为原始文件夹并被`R.xml.prefs`添加到自动生成的代码中。

在运行时，这被视为原始资源并读入数据（它实际上是使用充气机构建的，类似于布局充气机的工作方式）。您实际上可以自己查看数据，使用...

```
InputStream is = context.getResources().openRawResource(R.xml.prefs); 
```

因此，在运行时，`addPreferencesFromResource(R.xml.prefs)`足以加载首选项。

至于访问首选项，首选项存储在 SharedPreferences 中。我假设您有一个名为“复选框”的首选项，因此当您调用`getPrefs.getBoolean("checkbox", true)`它时，它会查找该 SharedPreference 值，如果未找到（因为尚未设置首选项），那么它会返回`true`（第二个参数）。

这就是为什么在你的默认值中保持一致对你来说非常重要。实际上可能值得拥有一个专门用于与首选项交互的类，这样您就不会意外地在不同的地方默认为不同的值。

res 文件夹中有很多自动生成的魔法。例如，每个人都使用`res/values/strings.xml`来存储他们的字符串，但实际上文件名是什么并不重要。读取和合并其中的任何内容`res/values/`，每个文件都可以是各种数据类型（字符串、整数、颜色等）的混合体。

# firefox - 从错误控制台清除 GM_log

> ID：11444553
> 
> 赞同：1
> 
> 时间：2012-07-12T03:16:29.213
> 
> 标签：firefox, greasemonkey

有没有办法从某个事件的用户脚本中清除来自错误控制台的 GM_log 消息？

我不想手动清理。`On trigger of certain event, want to clear up the old log from the error console and show up the new log.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:04:09.073

您无法清除[错误控制台](https://developer.mozilla.org/en/Error_Console)。如果可以的话，邪恶的网站也可以清除它并删除他们的不法行为记录。

`GM_Log()`无论如何， 您不应再使用。[使用 Firebug](http://wiki.greasespot.net/GM_log#GM_log_and_Firebug)和[它提供的出色的控制台日志记录功能](https://getfirebug.com/wiki/index.php/Console_API)。

然后你可以使用`console.clear()`.

请注意，为避免与 Firefox 的新`console`功能发生冲突，并确保输出出现在 Firebug 的控制台中，您可能需要在调用前加上`unsafeWindow`.

所以你的脚本可以做这样的事情：

```
unsafeWindow.console.clear ();
unsafeWindow.console.time ('ScriptRun');

unsafeWindow.console.log ("Script start." );
unsafeWindow.console.timeEnd ('ScriptRun'); 
```

在 Firebug 控制台中看起来像这样：
![控制台结果](../Images/757b2b63edc69767a4a2df02b5cce6a2.png)

- 删除所有前面的杂物。（不过，调用后网页所做的任何事情`clear()`仍会出现。）

# javascript - 力有向图中的 d3 箭头

> ID：11444558
> 
> 赞同：5
> 
> 时间：2012-07-12T03:16:48.287
> 
> 标签：javascript, svg, d3.js, force-layout

我很困惑。为什么通过简单地复制和粘贴示例[http://bl.ocks.org/1153292](http://bl.ocks.org/1153292)箭头不对齐。（见下文）

![在此处输入图像描述](../Images/9f0e6997f1284bcff2ee09788ad2e2c0.png)

更新：它适用于 chrome 和 safai，但不适用于 Firefox……更令人困惑。有任何想法吗？

您将在示例中进行哪些更改以获取直线而不是曲线？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T19:50:30.657

这在 Chrome 和 Safari 中有效，在 Firefox 14（可能更早）中被破坏。它已在 Firefox 15 及更高版本中修复。请参阅错误[https://bugzilla.mozilla.org/show_bug.cgi?id=773266](https://bugzilla.mozilla.org/show_bug.cgi?id=773266)

我已经在 Firefox 14（失败）和 15（通过）上对其进行了测试。

原始问题的答案是：因为它在 Firefox 中被破坏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:08:01.337

它也发生在我身上。但我通过以下方式解决了它。打开萤火虫。转到 svg > defs > 标记部分。然后更改 refX 和 refY 值。这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:25:01.420

可能是剪切和粘贴错误？它在这里工作正常。[http://jsbin.com/akulid/edit#html,live](http://jsbin.com/akulid/edit#html,live)

# eclipse - 如何从非 Eclipse 插件中的 File 对象获取 IFile 实例

> ID：11444560
> 
> 赞同：0
> 
> 时间：2012-07-12T03:17:20.493
> 
> 标签：eclipse, maven, abstract-syntax-tree

我正在开发一个将使用 IClassFile 的 Maven 插件，但我发现创建它的唯一方法是拥有一个 IFile 实例。如何从 File 对象中获取 IFile 的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:20:34.040

没有 Eclipse 核心，尤其是`org.eclipse.core.resources`插件，就没有资源树，没有工作空间，因此也就没有`IFile`s。`IClassFile`是 JDT 实现的一部分，而且它也不打算在 Eclipse 之外使用。我相当确定您将无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:12:12.010

您将需要`IFile`在资源中找到相关内容（您可以浏览工作区来执行此操作）。

查看[此文档](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/resInt.htm?cp=2_0_10)以了解您需要做什么。

# html - 居中和固定的标题

> ID：11444561
> 
> 赞同：1
> 
> 时间：2012-07-12T03:17:25.013
> 
> 标签：html, css, positioning

我正在研究我的作品集：[www.bbellmedia.com/mywork](http://www.bbellmedia.com/mywork)

我希望文本“Bryan Bell”居中，但在用户滚动时也可以修复。

实现这一目标的最佳方法是什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:19:42.500

```
#header {
  position:fixed;
  text-align:center;
  width:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:29:00.393

如果您希望图像不会超出您的标题，请使用此

```
.header {
   ....
   position: fixed;
   top: 0px;
   width: 100%;
   background-color: black;
   z-index: 300;
}

.app1{
   margin-top: 184px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:02:05.423

嘿，现在习惯了这个**css** * *style-sheet* *

**`.header`**给`position fixed`和现在给`left 0` `right 0` `top 0`和给`z-index maximum`

```
.header {
    left: 0;
    position: fixed;
    right: 0;
    text-align: center;
    top: 0;
    z-index: 999;
} 
```

# java - 为什么会出现“插入“AssignmentOperator Expression”以完成赋值”语法错误？

> ID：11444565
> 
> 赞同：0
> 
> 时间：2012-07-12T03:17:56.403
> 
> 标签：java, android

```
public Object execute() throws Exception {
    JSONArray result = new JSONArray();     
    DBHelper dbh = new DBHelper(mContext);
    SQLiteDatabase db = dbh.getReadableDatabase();
    try{
        Cursor cursor_products = db.rawQuery(dbh.GET_ALL_PRODUCTS,null);    

        //Cursor cursor_products = db.query(DBHelper.PRODUCT_TABLE, new String[]{DBHelper.PRODUCT_ID,DBHelper.PRODUCT_NAME,DBHelper.PRODUCT_PRICE,DBHelper.PRODUCT_QTY}, null, null, null, null, DBHelper.PRODUCT_NAME + " ASC" );
        while(cursor_products.moveToNext()){
            JSONObject product = new JSONObject();
            product.put("id", cursor_products.getInt(0));
            product.put("name", cursor_products.getString(1));
            product.put("price", cursor_products.getInt(2));
            product.put("stock", cursor_products.getInt(3));
            result.put(product);
        }
        cursor_products.close();
    }catch(SQLException e){
        Log.e(this.getClass().getName()+"@54", e.getMessage());
    }finally{
        db.close();
        dbh.close();
    }
    return result;
} 
```

使用上面的代码，错误发生在以下行：`Cursor cursor_products = db.rawQuery(dbh.GET_ALL_PRODUCTS,null);` 这真的很奇怪，因为我确定我的分配是正确的。它唯一的 Eclipse 是否有可能无法正确解析代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:42:15.027

//尝试这个

`Cursor cursor_products = db.rawQuery(GET_ALL_PRODUCTS,null);`

# android - Android 大型项目 - 可以分成几个库项目吗？

> ID：11444573
> 
> 赞同：5
> 
> 时间：2012-07-12T03:19:27.727
> 
> 标签：android, android-library

我打算开发一个非常大规模的 android 项目，它有数千个类和资源。我计划将应用程序分成模块并将它们作为库项目单独开发。稍后将它们组合在一起。（应用程序可能包含 5 - 6 个模块，因此计划创建 5 - 6 个库项目并将它们组合起来）

这种方法可以吗？或者android专家，请建议一种方法来维护和开发这样一个大项目？

**编辑：**

库为多个应用程序保存共享代码 -> 同意 100% 正确

但是这个项目就像是几个项目的组合。就像这样：

主屏幕仪表板有 8 个按钮，代表您单击一个按钮的 8 个模块 - > 它会打开一个活动，并且它有自己的数千个片段、布局、可绘制对象等，它们独立于其他模块

所以同样我有可以很容易分离的非相互依赖的用例，并且4-5个开发人员将参与这个项目，所以如果我可以分成几个库项目，我可以简单地根据模块（库项目）分配开发人员)

所以一种方法是创建一个项目并通过模块 com.name.something.Module1 创建包结构

在这个包下我有

```
com.name.something.Module1.activity
com.name.something.Module1.util
com.name.something.Module1.widget
com.name.something.Module1.data
com.name.something.Module1.dao 
```

和模块 2

```
com.name.something.Module2

com.name.something.Module2.activity
com.name.something.Module2.util
com.name.something.Module2.widget 
```

等等

所以这是第一种方法，但每个模块都有数千个类和资源、布局 xml 文件等。

另一种方法是将模块分离为库项目。我不知道大型项目如何维护他们的代码库，如 facebook、twitter 等。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:28:34.073

每个模块是相互分离的还是共享数据（例如同一个数据库）？如果它们是分开的，我建议创建 8 个独立的应用程序，这将减少应用程序的内存占用并缩短启动时间。

如果一些或全部使用相同的数据库，您可能能够在 SD 卡上创建一个数据库，并从每个单独的应用程序中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:55:28.920

库为多个应用程序保存共享代码......如果您完全专注于单个应用程序，那么将您的代码分成 5-6 个库项目是没有意义的。

Android 开发人员分离项目的一种常见方式是为不同的组件制作子包。例如，自定义`View`和适配器的进入`com.package.name.ui`，实用程序包进入`com.package.name.util`等。除此之外，你只需要聪明......从头开始一个将有“数千个类”的应用程序听起来非常雄心勃勃，而且没有真的任何一条建议都会让你的生活变得轻松。

# ios - IOS如何通过CGImage解码图像（JPEG或PNG）？这是最有效的方法吗？

> ID：11444574
> 
> 赞同：0
> 
> 时间：2012-07-12T03:19:37.663
> 
> 标签：ios, image, decode, cgimage

我们通常通过 CGImage 在 IOS 上将图像（JPEG/PNG）**解码为位图。**现在我想知道这是否是解码图像的最**有效**方法？

或者任何人都可以告诉我是否有任何**API**可以让我们自己在 IOS 上解码图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:38:57.250

您可以使用[LodePNG](http://lodev.org/lodepng/)来解码 PNG 文件，但我不知道它的效率会提高多少。此外，如果不创建 UI 或 CGImage，您将无法将它与 UIKit 一起使用，那么有什么意义呢？

# javascript - 如何通过 ajax 加载样式表并在加载完成后进行回调

> ID：11444578
> 
> 赞同：6
> 
> 时间：2012-07-12T03:19:47.830
> 
> 标签：javascript, jquery, css, ajax, cors

我需要通过ajax加载一堆CSS文件，并在样式表加载完成后调用动画，否则动画会失败。

我这样做并且过去工作得很好，直到我遇到这个跨域是这样的：

```
$.get(resource.url, {cache:true}, function(css) {
    //Now that the stylesheet is in the browser cache, it will load instantly:  

    $("head").append($("<link>",{
       rel: "stylesheet",
       type: "text/css",
       href: resource.url
    }));

}).then(function(){
   //Animation here that depends on the loaded css
}); 
```

只要`resource.url`在同一个域上，它就可以正常工作。一旦我尝试从另一个域加载 css`$.get`将失败，如下所示：

```
XMLHttpRequest cannot load https://example.com/style.css. Origin https://example.com is not allowed by Access-Control-Allow-Origin. 
```

所以我试图通过以下方式将CORS添加到标题中`.htaccess`：

```
<IfModule mod_headers.c>
    #cross domain access is okay for resources (#107)
    <FilesMatch "\.(css|js)$"> 
        Header add Access-Control-Allow-Origin "*"
    </FilesMatch>
</IfModule> 
```

这会将 CORS 标头添加到所有 CSS 和 JS 资源。

由于某种原因， [CORS](http://www.w3.org/TR/cors/)似乎对 chrome 或 firefox（最新版本）都没有影响。

我还注意到，在`$.getScript`处理 js 文件时没有强制执行相同的域策略，但它适用于`$.get`：

```
$.get("https://example.com/script.js", {cache: false}, $.noop, "script"); 

//works regardless of CORS 
```

但：

```
$.get("https://example.com/script.js", {cache: false}, $.noop); 

//does not work (cross domain policy violation) 
```

因此，由于 CORS 没有得到广泛支持，甚至似乎无法解决现代浏览器的问题，所以我需要一些类似于`$.getScript`, 但用于 CSS 样式表的东西。

它需要是**异步**的并具有回调机制。

有任何想法吗？提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T03:57:35.623

`$.get`使用 Ajax，它必须遵守同源策略。

`$.getScript` *通常*使用 Ajax，*但*它也有一个仅供跨域使用的后备选项。通过标签导入`<script>`的脚本不受同源规则的约束，因此 jQuery 只需将`<script>`标签添加到页面并将其`src`属性设置为请求的脚本 URL。

通过`<link>`标签加载的 CSS 资源也有同样的例外。在一个完美的世界中，您应该能够 1) 创建一个新`<link>`元素，2) 将其`href`属性设置为正确的 URL，以及 3) 侦听`load`该元素上的事件。我已经从 jQuery 论坛向[这个解决方案添加了回调：](http://forum.jquery.com/topic/jquery-getscript-12-1-2010)

```
// note: non-compatible example code, see below for better code
jQuery.getCSS = function( url, media, callback ) {
    jQuery( document.createElement('link') ).attr({
        href: url,
        media: media || 'screen',
        type: 'text/css',
        rel: 'stylesheet'
    }).appendTo('head')
    .on("load", callback);
}; 
```

**这里有一个小问题：**它不能跨浏览器工作。 `<link>`标记不会`load`在所有浏览器中触发事件 - 请参阅[jQuery 错误报告](http://bugs.jquery.com/ticket/7519)了解`$.getCSS`可能的功能。

所以，一般情况下的[解决方法有点疯狂](http://www.backalleycoder.com/2011/03/20/link-tag-css-stylesheet-load-event/)：添加 CSS URL 作为新`<img>`标签的源并监听它的`onerror`处理程序：

```
// correct code!
jQuery.getCSS = function( url, media, callback ) {
    jQuery( document.createElement('link') ).attr({
        href: url,
        media: media || 'screen',
        type: 'text/css',
        rel: 'stylesheet'
    }).appendTo('head');

    jQuery( document.createElement('img') ).attr('src', url)
    .on("error", callback);
}; 
```

您还可以添加一些优化并侦听（对于支持它的浏览器）*上*的`load`事件和（对于那些不支持的浏览器）上的事件，并放置一些逻辑以确保回调只被调用一次，以防两个事件都发生。`<link>`*`error``<img>`*

 *至于让`$.getCSS`return 成为一个延迟对象，这有点超出我的专业领域，但没有理论上的理由不能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T19:02:55.877

使用延迟而不是创建 jQuery 插件将我自己的 apsillers 答案的实现放在一起。

```
fetchStyleSheet(url, media = 'screen') {
    let $dfd = $.Deferred(),
        finish = () => $dfd.resolve(),
        $link = $(document.createElement('link'))
            .attr({
                media,
                type: 'text/css',
                rel: 'stylesheet'
            })
            .on('load', 'error', finish)
            .appendTo('head'),
        $img = $(document.createElement('img'))
            .on('error', finish); // Support browsers that don't fire events on link elements

    $link[0].href = $img[0].src = url;
    return $dfd.promise();
}

fetchStyleSheet('/url/to/my/stylesheet.css').done(() => {
    // Stuff after the sheet has loaded
}); 
```

这个话题已经有好几年了，我不知道 img 上的备份事件是否仍然需要，但实现起来似乎相当简单。

对于我的特定用例，我实际上并不关心工作表是否无法加载，因此这两种情况都得到了解决。如果您想单独处理这些案例，您可以将参数传递给`finish`处理程序以适当地解决/拒绝。*

# curl - 命令行 curl 超时参数

> ID：11444583
> 
> 赞同：18
> 
> 时间：2012-07-12T03:20:00.037
> 
> 标签：curl, command-line, timeout

我正在使用命令行 curl 程序，有趣的是我找不到命令行 curl 的超时参数。我阅读了 curl 的手册页并进行了谷歌搜索，但仍然找不到。有`libcurl`超时参数（`CURLOPT_TIMEOUT`），但这不是我想要的。我正在寻找命令行 curl 超时参数。

有一个`--max-time`参数用于保持连接打开的最长时间，`--connect-timeout`用于 curl 的连接阶段，但没有用于正常超时。

有人知道这个参数吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-13T12:37:40.933

选项`--max-time`完全符合您的需要：“允许整个操作执行的最长时间（以秒为单位）”。你只是想错了。

```
# 10 seconds for the full operation to complete
curl --max-time 10 https://example.com 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T23:05:16.003

在 un*x 上，您有 timeout 命令。尝试 ：

```
timeout -s SIGTERM 3600 curl --your arguments here 
```

如果它尊重它，则在 3600 秒后发送一个 SIGTERM 以结束。总是比默认情况下残酷的 SIGKILL 更好，因为它可能会损坏您下载的 99% 的文件 :¬)

# objective-c - 通过不同的 ViewController 共享 iAD

> ID：11444590
> 
> 赞同：1
> 
> 时间：2012-07-12T03:21:23.253
> 
> 标签：objective-c, ios, iad

我有 3 个 ViewControllers 我想共享同一个 iAD。我已阅读文档并分享 iAD 似乎是将 iAD 实施到您的项目中的正确方法。实现这一目标的最佳方法是什么？我是Objective C的新手，所以尽可能详细地感谢您。

先感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:10:10.823

您是否尝试过创建单例类？看看这个，它可能会有所帮助..[使用单例类实现 iAd](https://stackoverflow.com/questions/11017759/implementing-iad-using-singleton-class)

# facebook - Facebook 页面上的 500 内部服务器错误

> ID：11444593
> 
> 赞同：0
> 
> 时间：2012-07-12T03:21:47.470
> 
> 标签：facebook, internal-server-error

我已经创建了一个 Facebook 页面（使用 WordPress），但我无法让它在 Facebook 中工作。

原始页面在以下位置运行良好：（只需添加 https 即可查看 SSL 版本）

```
http://copywriting.com/fb/fanpage/pueblito-reserve/ 
```

但是，当我将其加载到 Facebook 时，SSL 版本可以正常工作，但常规 http 版本会返回 500 内部服务器错误。

常规 FB 选项卡（带有 500 错误）：（添加 https 并且它工作正常）

```
 http://www.facebook.com/PueblitoEscondido/app_382773098443040 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:28:29.180

> 如何解决？

通过查看服务器的日志文件来查看*导致*此错误的原因……</p>

# c# - 如何测试属性是否来自另一个程序集

> ID：11444594
> 
> 赞同：1
> 
> 时间：2012-07-12T03:21:50.487
> 
> 标签：c#, unit-testing, reflection, internal, func

我正在尝试测试这种方法：

```
[Test]
public void Test_GetReferenceValue()
{
  Person person= new Person() { Name = "PJ" };
  PersonalProperty<Person> personalProperty = new PersonalProperty<Person>();
  var result = personalProperty.GetReferenceValue(person);
  Assert.AreEqual("PJ", result);
} 
```

GetReferenceValue 方法具有以下实现：

```
public override object GetReferenceValue(TOwner owner)
{
    Person value = this.Accessor(owner);

    if (value == null)
        return null;
    else
        return value.Name;
} 
```

我试图找到 Accessor 属性的来源，我在另一个程序集中找到了它：

```
public class PersonalProperty<TOwner> : Property<TOwner, Person>
where TOwner : class
{
  public virtual Func<TOwner, TProperty> Accessor { get; internal set; }
} 
```

如果我可以将代码放入我的测试中，我上面的测试将完美运行：

```
 personalProperty.Accessor = p =>p; 
```

这是为 Func 委托定义/方法。但是，我不能这样做，因为 Accessor 是内部设置的。意思是，如果我在另一个程序集中（我现在就是），我无法设置它。我不能成为访问器程序集的朋友，因为我不允许更改任何代码。我只被允许在另一个项目/程序集中创建测试。

那么我将如何测试 GetReferenceValue？反思有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:35:06.840

是的，你可以使用反射来做到这一点。此函数可以设置属性值忽略 setter 访问修饰符：

```
public static void SetPropertyValue(object instance, string property, object value)
{
    instance.GetType().GetProperty(property).SetValue(instance, value, null);
} 
```

用法：

```
Func<Person, Person> accessor = p => p;
SetPropertyValue(personalProperty, "Accessor", accessor); 
```

`PersonalProperty<T>`无论如何，这表明类设计可能有问题。

# ruby-on-rails - Rails as_json 有两个不相关的模型

> ID：11444596
> 
> 赞同：0
> 
> 时间：2012-07-12T03:22:26.820
> 
> 标签：ruby-on-rails, activerecord

给定两个模型和一个控制器：

**苹果**

```
class Apples < ActiveRecord::Base
  belongs_to :not_oranges
  ...
  def as_json(options={})
    opts = {:include => [:not_oranges]}
    super(options.reverse_merge! opts)
  end
end 
```

**橘子**

```
class Oranges < ActiveRecord::Base
  belongs_to :not_apples
  ...
  def as_json(options={})
    opts = {:include => [:not_apples]}
    super(options.reverse_merge! opts)
  end
end 
```

**搜索控制器**

```
class SearchController < ApplicationController
  a = Apples.search params[:q]
  o - Oranges.search params[:q]

  @results = {
    :apples => a,
    :oranges => o
  }

  respond_to do |format|
    format.json { render :json => @results }
end 
```

如您所见，这两个模型完全不相关，并且在定义中都有不同`:include`的选项。`as_json`

如果搜索查询仅命中苹果或仅命中橙子，则一切都按预期工作，但是一旦两个对象都不为空，我会得到：

```
undefined method `not_apples' for #<Oranges:0x00000004af8cd8> 
```

似乎这两个`as_json`定义正在合并，或者`Oranges.as_json`被`Apples.as_json`.

这是预期的行为吗？在不使用 RABL 之类的东西的情况下，有什么干净的方法吗？我觉得这对我的需求来说太过分了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:17:50.940

在伪代码中，哈希`as_json`方法的代码看起来像

```
def as_json(options={})
  Hash[collect {|key,element| [key.to_s,element.as_json(options)]}]
end 
```

但是您的元素正在修改您传递给它的选项参数。哈希不知道这一点，因此将修改后的选项哈希传递给`as json`.

通常最好不要修改传递给您的参数，除非非常清楚这是可以的。我会将您的方法重写为

```
def as_json(options={})
  defaults = {:include => :not_apples}
  super(defaults.merge(options))
end 
```

# cocos2d-iphone - cocos2dX setBlendFunc

> ID：11444598
> 
> 赞同：0
> 
> 时间：2012-07-12T03:22:52.330
> 
> 标签：cocos2d-iphone, sprite

我的图像看起来黑色太多了。我使用功能`setBlendFunc`。

但是当精灵不运行 Animate 时，它​​会起作用。如果运行，它不起作用。如何解决这个问题？

```
CCSprite *effectSprite=CCSprite::create("init_black.png");
effectSprite->setBlendFunc((ccBlendFunc) {GL_ONE, GL_ONE});
SoliderSprite *enemySolider=(SoliderSprite *)(enemy->objectAtIndex(0));
CCArray *position=enemySolider->soliderPosition;
position->retain();
cout<<((CCString *)position->objectAtIndex(0))->intValue()<<endl;
effectSprite->setPosition(ccp(((CCString *)position->objectAtIndex(0))->intValue(),((CCString *)position->objectAtIndex(1))->intValue()));
this->addChild(effectSprite);
string effectString="effect";
if(this->direction)
{
    msg.property[1].append("L");
}
else 
{
    msg.property[1].append("R");
}

CCAnimate *effectAction=animate->createWithKind(msg.property[1],effectString.c_str(),2);
effectSprite->runAction(effectAction);

position->release(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T09:12:05.070

这似乎是一个错误，新版本没有这个问题。用 cocos2d-x 的 2.1.5 版本试试这个代码：

```
CCSprite someSprite = CCSprite.spriteWithFile("someImage");
ccBlendFunc someBlend = new ccBlendFunc();
someBlend.src = OGLES.GL_ONE;
someBlend.dst = OGLES.GL_ONE;
someSprite.BlendFunc = someBlend; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-13T05:30:08.683

我认为渲染模式不是您想要显示的最终效果。如何使用：

```
SRC = GL_SRC_ALPHA,
SRC = GL_ONE_MINUS_SRC_ALPHA 
```

# google-app-engine - UserService 丢失loggedInUser？

> ID：11444602
> 
> 赞同：2
> 
> 时间：2012-07-12T03:23:48.383
> 
> 标签：google-app-engine

我有一个客户端测试应用程序和一个服务器应用程序，它们都托管在 GAE 上。客户端是一个简单的 Web 前端，服务器托管受 Oauth 保护的资源。身份验证通过 OpenId 进行，应用程序支持联合登录。问题是用户登录后，userService 似乎忘记了他们是谁（浏览器有一个 ACSID cookie，所以它记得）。

这是流程（来自 GAE 日志）.... 用户首先在浏览器中输入 cktestclient.appspot.com（客户端应用程序）并按下 ShowMyCommitments 按钮。然后在服务器端日志（commitkeeperapi.appspot.com）中看到以下内容。

上午 9:10:22：/oauth/authorize?response_type=code&client_id=webappclient&redirect_uri= [http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access](http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access) 我们还没有登录，所以我们将在 9:10 被重定向：上午 22 点：/login/?continue= [http://commitkeeperapi.appspot.com/oauth/authorize?response_type=code&client_id=webappclient&redirect_uri=http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access](http://commitkeeperapi.appspot.com/oauth/authorize?response_type=code&client_id=webappclient&redirect_uri=http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access) 然后我使用 url 登录由 createLoginURL 生成

上午 9:10:33：/oauth/authorize?response_type=code&client_id=webappclient&redirect_uri= [http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access](http://cktestclient.appspot.com/client/showStartPage&scope=CommitKeeper_Access) OAuth 继续进行，我们看到我们有一个登录用户 com.fourspires。 api.server.MyGaeAuthenticator 身份验证：当前用户（来自 userService）是：richardlandis@gmail.com

上午 9:10:34：/oauth/access_token 更多 Oauth Dancing... 获取 oAuthToken，在 cktestclient.appspot.com:/client/showStartPage 返回客户端 - 它继续在 commitkeeperapi.appspot.com:/v3 进行调用/承诺

上午 9:10:34：/oauth/validate Dancing... 验证与承诺请求一起发送的 oAuthToken

上午 9:10:36：/v3/commitments/?oauth_token=9491caca6c9ad2b2cb2d20a5cf2773ce22b99e076ff0dcb3a47d06e6a26038d5ccf63c66f1f2387e 现在我们回到服务器代码并检查用户 - 它是空的！
com.fourspires.api.util.UserHelpers getCurrentUser：UserServiceFactory.getUserService().getCurrentUser() = null

基于查看我在这个问题上可以找到的所有线程，我在服务器的 appengine-web.xml 中添加了 true - 但没有任何改变。

有谁知道为什么 UserService 丢失了我的用户的踪迹？我有一个解决这个问题的方法，但我有兴趣更多地了解为什么会失败。

PS - 这似乎与[GWT 和 AppEngine 用户服务](https://stackoverflow.com/questions/6516051/gwt-and-appengine-user-service)非常相似，但似乎尚未解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:12:16.903

我相信答案是因为我提出的两个请求是由不同的 ApiProxy 处理的，它们有不同的环境，因此对当前用户是谁的理解不同。我不确定为什么我会得到两个不同的 ApiProxy，但我可以对此进行进一步调查。

# iphone - iOS - iPhone / iPad 在 1 个主应用程序中构建迷你应用程序（作为功能）

> ID：11444605
> 
> 赞同：0
> 
> 时间：2012-07-12T03:23:58.233
> 
> 标签：iphone, ios, sybase, sup

我需要构建**1 个主应用程序**，其中包含其他迷你应用程序作为功能。例如，1 个名为 MY HR 的主应用程序。点击此按钮，用户将看到以下图标：请假审批、工资单、加班审批等。

**用户身份验证在所有功能中共享**，也就是说，当用户启动这个“Mega”应用程序时，他只需要输入一次 PIN 码，然后他就可以访问所有其他应用程序。

每个功能都使用**Sybase Unwired Platform 2.1.3**技术与**SAP 后端集成。**

 **是否有可用的框架，可以像容器应用程序一样构建，包含各个功能，并且它应该是可行的，将来，如果我想添加费用批准，我可以进行开发并将其插入主' 应用程序轻松。

这类似于Sybase Inc 提供的**Hybrid Web Container ios 应用程序，但该应用程序包含迷你 HTML5 / CSS / Javascript 应用程序，而不是迷你 ios 原生应用程序。**

我之前在这里读过几篇文章，有些人建议通过添加更多类和 xib 文件来添加未来的应用程序，但这不是最佳实践并且非常混乱。此外，苹果也不推荐这个。

您对此要求有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:47:13.977

您应该查看 Three20 项目。更具体地说，它的启动器功能。[http://three20.info/showcase/launcher](http://three20.info/showcase/launcher)**

# php - 有没有办法将停放的域作为推荐人

> ID：11444607
> 
> 赞同：0
> 
> 时间：2012-07-12T03:24:22.187
> 
> 标签：php, redirect, dns

我们有 100 个来自注册商的停放域名。我们已将其重定向到 mypersonaldomain.com。我的目标是确定哪些停放域已重定向到 mypersonaldoimain.com，然后将用户转发到 myperosnaldomain.com/info-

我们已经设置了一个示例停放域以重定向到 mypersonaldomain.com，但是停放域没有注册到 $_SERVER 引荐来源网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:47:31.950

您可以通过重定向传递域名，如 mypersonaldomain.com?d=Myprevdomain.com。如果是 301 重定向。

如果它只是将域指向您的目标服务器域。然后您可以从 CAPTURE_URI 捕获它。

如果用户单击指向您的新服务器的链接，它只会记录 http_referer ，这样浏览器就会发送 http_referer 。或者，如果您在重定向时发送标头 http_referer。

# ios - 通过按钮从 App 链接到 iTunes 艺术家

> ID：11444608
> 
> 赞同：1
> 
> 时间：2012-07-12T03:24:26.930
> 
> 标签：ios, hyperlink, itunes, uiapplicationdelegate

我正在尝试通过我的项目上的按钮链接到艺术家 iTunes 的“页面”。我尝试使用他们的 safari 页面，例如“http://itunes.apple.com/au/artist/blink-182/id116851”，它工作过一次，但只在 safari 中显示了他们的页面。我想将他们引导到 iTunes 商店应用程序上的艺术家页面。我已经阅读了其他问题，它们似乎都是如何链接到应用商店上的应用，但与 iTunes 商店无关。这是我的按钮代码：

```
-(IBAction)ofwebsite2 {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/au/artist/blink-182/id116851"]];
} 
```

我尝试添加 itms:// 而不是 http:// 但这仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:18:50.420

Adding itms:// instead of http:// should work as this is the only proper way to do it. Even if you leave it as http, it should open safari, then redirect to iTunes app.

And please note that this will only work in a device, not in simulator.

# java - 如何使用具有类似结构的类似容器元素的 JAXB 避免代码重复

> ID：11444609
> 
> 赞同：8
> 
> 时间：2012-07-12T03:24:36.040
> 
> 标签：java, xml, jaxb

**情况**

我正在使用 MOXy 的 JAXB 实现来处理一个大型 XML 文档，该文档的架构具有许多类似的复杂类型。具体来说，大约有两种类型充当具有以下结构的列表包装元素：

```
<ITEMS attr1="X" attr2="Y">
  <ITEM>...</ITEM>
  ...
  <EXTENSION/>
<ITEMS> 
```

对于这些类似列表包装器的元素中的每一个，名称都会发生变化，并且包含的​​列表元素也会发生变化。但是，属性（都是可选的）和单个 EXTENSION 元素（也是可选的）始终存在。这是使用两种类型的示例：

```
<ROLES visible="false">
  <ROLE type="X"/>
  <ROLE type="Y"/>
</ROLES>

<PAYMENTS visible="true">
  <PAYMENT>
    <PAYEENAME>Joe</PAYEENAME>
  </PAYMENT>
  <EXTENSION>
    <SOMETHING>Here</SOMETHING>
  </EXTENSION>
</PAYMENTS> 
```

**问题**

我想避免代码重复，因为这些元素之间唯一改变的是名称和它包含的一个或多个元素。做这个的最好方式是什么？

我只能看到两种可能的解决方案。

**1**

使用泛型创建一个具体类，以指示要在更改的集合中使用的对象类型。然后使用 MOXy 的外部 OX 映射来指示该类的任何个人使用应如何序列化。就像是：

```
public class GenericContainer<T> {
    @XmlAttribute
    protected Boolean visibile;
    @XmlElement(name = "Extension")
    protected Extension extension;

    // OX Mappings done in external meta file
    protected List<T> items;
    ...
} 
```

虽然我喜欢这个选项，但似乎不可能在每次使用的基础上重新定义类的 OX 映射。

**2**

创建一个没有 List 属性的基类，然后为每个自定义包装元素创建一个具体类。这个解决方案肯定有效，但我最终会得到大约两打几乎相同的类。

#1 是可能的还是有更好的方法来处理这个我没有想到的？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:04:43.173

```
public class GenericContainer {

private Boolean visible;
private Object extension;
private List<Object> nodes;

@XmlAttribute
public Boolean isVisible() {
    return visible;
}

public void setVisible(Boolean visible) {
    this.visible = visible;
}

@XmlElement(name="EXTENSION")
public Object getExtension() {
    return extension;
}

public void setExtension(Object extension) {
    this.extension = extension;
}

@XmlAnyElement
public List<Object> getNodes() {
    return nodes;
}

public void setNodes(List<Object> nodes) {
    this.nodes = nodes;
}

} 
```

并读取 XML 实例

```
 JAXBContext jaxbContext = JAXBContext.newInstance("jaxbtest1");
    Unmarshaller um = jaxbContext.createUnmarshaller();

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(new File("src/test1.xml"));
    Node node = doc.getFirstChild();

    JAXBElement<GenericContainer> jaxbE = um.unmarshal(node, GenericContainer.class);

    GenericContainer gc = jaxbE.getValue();
    Boolean vis = gc.isVisible();
    Element ext = (Element)gc.getExtension();
    for(Object o : gc.getNodes()) {
        Element listItem = (Element)o;
    } 
```

但是代码重复真的很重要吗？如果您的架构具有列表容器类型的通用扩展库并且您正在使用 xjc 为什么要避免使用不同的类？毕竟，JAXB 背后的想法是为每个独特的复杂类型创建一个值类。

如果您可以制作处理相似但不同的 XML 类型的通用逻辑并且不想要大量 Java 类，您可以切换到 StAX。

# javascript - 谷歌地图信息窗口的一些原型设计

> ID：11444610
> 
> 赞同：0
> 
> 时间：2012-07-12T03:24:39.507
> 
> 标签：javascript, google-maps

我是新来的，我有一个关于......的小问题，我不知道这到底有什么问题，所以我希望你能给我一些线索。我希望不会让你感到厌烦，所以让我们开始吧。

我制作了一个原型“类方法”（使用[this](http://ejohn.org/blog/simple-javascript-inheritance/)）。它完美地工作。

然后，我开始像这样编写我的 GoogleMap“类”

```
var map = Class.extend({

init: function(){
    this.mystyles = [
    {
        featureType: "all",
        elementType: "labels",
        stylers: [
        {
            visibility: "off"
        }
        ]
    }
    ];
    this.myoptions= {
        zoom: 12,
        disableDefaultUI: true,
        center: new google.maps.LatLng(10.24462, -67.59374199999999),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        styles: this.mystyles
    }
    this.markerSucursal = new Array();
    this.infoWindow = new Array();
},

initializeMap: function(divElemento){
    this.objMap = new google.maps.Map(divElemento,this.myoptions);

},

preloadMarkers: function(jsonArray){

    for(var k in jsonArray) {
        var localizacion= new google.maps.LatLng(jsonArray[k].coordenada_x,jsonArray[k].coordenada_y);
        var marker= new google.maps.Marker({
            position: localizacion,
            map: this.objMap
        })
        this.markerSucursal[k] = marker;
    }
},

createDialogs: function(jsonArray){        
    for(var k in jsonArray) {
        var marker = this.markerSucursal[k];
        var contentDialog = "<div><p><strong>Testing testing</strong></p></div>"
        var infowindow = new google.maps.InfoWindow({
            content : contentDialog
        })
        google.maps.event.addListener(marker, "click", function() {
            infowindow.open(this.objMap,marker)
        })
        this.infoWindow[k] = infowindow
    }
}}); 
```

显示地图 [检查]

显示标记 [检查]

单击 [] 显示信息窗口

这里有什么问题？如果您需要更多信息或代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:47:31.067

好的，明白了......我真的很抱歉这个混乱而愚蠢的问题，但我让一切正常......

问题是我在 google.maps.event.addListener 函数中引用上下文“this”......在内部函数中，我无法引用父函数方法（如 this.objmap 或 this.markerSucursal）。不要忘记我在调用 google.map 对象之前在原型**方法中进行编码**

仅作记录，对我自己（以及遇到此问题的其他所有人）的答案是这样的（我只会显示 createDialog 和 preloadMarkers 方法）

```
preloadMarkers: function(jsonArray){

    var objMap = this.objMap // the initializeMap method sets this object

    for(var k in jsonArray) {
        var localization= new google.maps.LatLng(jsonArray[k].coordenada_x,jsonArray[k].coordenada_y);
        var marker= new google.maps.Marker({
            position: localizacion,
            map: objMap
        })

        this.markerSucursal[k] = marker;
    }
},

createDialog: function(jsonArray){        

    for(var k in jsonArray) {

        var marker = this.markerSucursal[k]
        var objMap = this.objMap
        contentDialog = "<div> <p>testing testing</p> </div>"

        var infowindow = new google.maps.InfoWindow({
            content: contentDialog
        });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(objMap,marker);
        });
    }
} 
```

就是这样......就像魅​​力一样工作:)

再次感谢您的阅读，对于糟糕的英语和委内瑞拉的问候感到抱歉！

# c# - 如何附加到由 MVC 3 中的 html 助手创建的 TextArea？

> ID：11444613
> 
> 赞同：0
> 
> 时间：2012-07-12T03:25:21.823
> 
> 标签：c#, jquery, html, asp.net-mvc-3, textarea

`@Html.TextAreaFor`我正在尝试使用 Razor 和 Microsoft 的 TextArea ( )的 HTML 助手从视图中的评论列表集合中提取。我可以轻松地填充单个评论，但是如何将评论的整个列表集合添加到文本区域？这是我用来显示单个评论的示例：

```
@Html.TextAreaFor(x => x.AuditDoc.PrivateComment, 0, 0, false) 
```

这一切都很好，但是我如何将第二、第三和第四条评论附加到相同的文本区域？有没有办法将整个列表集合绑定到那个 html.textarea 助手？最好，我想在 Razor 中使用 html 助手来执行此操作。如果那不可能，我会很感激任何关于如何使用 Jquery 的建议。注意：注释不必绑定到模型。所以我可以使用@Html.TextArea 而不是@Html.TextAreaFor。评论数组仅用于显示。所以没有多选等并发症。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:42:26.050

好吧，您可以在控制器中进行连接并将其传递给要设置到文本区域的视图：

控制器逻辑：

```
 var comments = db.Comments.ToList();
        string concatComments = string.Empty;
        foreach (var item in comments)
        {
            concatComments = concatComments + item.Title;
        }
        ViewData["Concat"] = concatComments.ToString(); 
```

然后在视图中我这样做了：

```
@Html.TextArea("Comments", ViewData["Concat"].ToString()) 
```

显然我的代码会让它们都变得非常丑陋，但你可以这样做：

```
concatComments = concatComments + " " + item.Title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:44:29.823

你可以试试，

1.  Having a separate property in the view model that contains all the comments and bind that to the text area.

2.  A much cleaner solution will be go for an editor template for that collection property.

# nservicebus - NServiceBus 3.0.0 到 3.2.6 升级 Bus.Reply 不再处理

> ID：11444614
> 
> 赞同：0
> 
> 时间：2012-07-12T03:25:29.177
> 
> 标签：nservicebus

我已经检查了所有网络，但由于这几乎是 nservicebus 的较新版本，我不确定是否有人遇到过这个问题。

由于从版本 3.0.0 升级到 3.2.5（和/或 3.2.6）.. 每当我们执行 Bus.Reply 向客户端发送回响应时（而客户端使用 send().register... )，客户端似乎没有处理传入的回复。我们有一个包含回复消息的输入队列，但消息停留在那里，没有人拿起它。（你猜对了......没有抛出错误）

我检查了样本（fullduplex，asyncpagesmvc3），但它们看起来一样......而且奇怪的是......它们有效。

我应该注意什么？顺便说一句，队列为它们设置了适当的权限......并且整个回复在 3.0.0 中运行良好（即使我尝试从 3.2.6 恢复到 3.0.0）

有什么想法吗？天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:00:52.763

如果您正在开发 Web 应用程序，也许您可​​以在总线初始化期间尝试此操作？

**Configure.Instance.ForInstallationOn().Install()**

# java - Java 浮点数和双差

> ID：11444619
> 
> 赞同：2
> 
> 时间：2012-07-12T03:26:02.040
> 
> 标签：java

我正在使用 jdk 1.6。这是我的代码。

```
float f = 10.0f;

double d = 10.0; 

System.out.println("Equal Status : " + (f == d)); 
```

然后系统将答案显示为`true`。但是如果我将值修改为

```
float f = 10.1f; 

double d = 10.1; 

System.out.println("Equal Status : " + (f == d)); 
```

然后系统将答案显示为错误。我知道系统使用位匹配进行 == 检查。但背后的原因是什么。你能解释一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:31:47.050

虽然这不是“我的”答案，但对于想要从“meh”转变为“good”的程序员来说，这几乎是“必须阅读”的文献。伟大是真正特别的东西，所以不要认为“好”是什么可以打喷嚏的。:)

[每个程序员都需要了解的浮点知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:52:54.047

恕我直言，一般来说，99% 的用例`double`是更好的选择，因为它更准确。`float`即除非必须，否则不要使用。

BigDecimal 可用于显示 a`float`或的实际表示`double`。您通常不会看到这一点，因为`toString`它将执行少量舍入（因为它被编码以适应类型表示限制）

```
System.out.println("10.1f is actually " + new BigDecimal(10.1f));
System.out.println("10.1 is actually " + new BigDecimal(10.1)); 
```

印刷

```
10.1f is actually 10.1000003814697265625
10.1 is actually 10.0999999999999996447286321199499070644378662109375 
```

您可以看到该`double`值更接近所需的 10.1，但不完全是这个值。值不同的原因是，在每种情况下，它都具有该类型最接近的可替换值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:59:48.250

要记住的要点是

1.  10.1是二进制1010101010的重复序列……
2.  当比较浮点数和双精度浮点数时，通过添加零来填充数字，将浮点数转换为双精度数

    所以你会比较

    1010101...00000000... 到 1010101.....101010... 这是不同的。

    浮动 f = 10.1f;

    双 d = 10.1;

    System.out.println("相等状态：" + (f == (float)d));

会给出真实的答案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T04:02:08.830

@Sam 建议的链接很棒，但对我来说仍然太技术性：P

我将就处理浮点数向 OP 提出一些意见（可能有点离题，因为您在询问背后的原因。对于背后的原因，请阅读链接@Sam 建议）。

永远不要假设浮点数会给你准确的表示。有时可以，但并非总是如此。浮点数在“有效数字”中有其约束，对于第一个第 n 位它是“准确的”。

你的情况更糟，因为你混合了浮点数和双精度数，但解决的想法是相似的。

您需要确定您的应用程序需要计算结果的精度，并据此确定 Epsilon 值。例如，您的应用程序只需要精确到小数点后 3 位，可能 Epsilon 为 0.0005 是合理的。

比较两个浮点数不应该由`==`. 你应该使用 `(a + EPSILON > b && a - EPSILON < b)`. 同样，`a > b`应表示为`a - EPSILON > b`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T03:27:58.360

`float`是 32 位类型，而`double`是 64 位类型。

您遇到了经典的浮点精度问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T03:28:17.267

浮点数不精确。由于四舍五入，10.1f 和 10.1 的实际值会略有不同。浮点数是二进制的，而不是十进制的，所以对我们来说看起来“简单”的数字，比如 10.1，不能完全表示为浮点数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T04:11:07.650

您可能希望重新了解 32 位和 64 位浮点表示的[IEEE 浮点标准。](http://en.wikipedia.org/wiki/IEEE_floating_point)如果您深入了解它的内部结构，您会清楚地看到为什么这些浮点会表现得如此挑剔。

如果您对它在内部的表示方式感到好奇（这就是它失败的原因），您可以使用这段代码，它显示了这些数字的十六进制表示。从那里，您可以将它们与单精度和双精度的指数和尾数相匹配。

```
System.out.printf("Float 10.0: 0x%X\n", Float.floatToRawIntBits((float)10.0));
System.out.printf("Double 10.0: 0x%X\n", Double.doubleToRawLongBits(10.0));
System.out.printf("Float 10.1: 0x%X\n", Float.floatToRawIntBits((float)10.1));
System.out.printf("Double 10.1: 0x%X\n", Double.doubleToRawLongBits(10.1)); 
```

印刷

```
Float 10.0: 0x41200000
Double 10.0: 0x4024000000000000
Float 10.1: 0x4121999A
Double 10.1: 0x4024333333333333 
```

您会注意到值的表示方式存在一些重复。这是因为 1/10[不能在以 2 为底的有限空间中表示](http://docs.python.org/tutorial/floatingpoint.html)。

# android - ActivityRecord 的活动空闲超时

> ID：11444622
> 
> 赞同：9
> 
> 时间：2012-07-12T03:26:55.360
> 
> 标签：android, performance, android-activity, android-activityrecord

所以我有一个奇怪的问题，我不完全确定我应该提供哪些信息，但我会尽力而为——如果我需要添加更多信息，请告诉我。我有一个问题，当我完成`Activity`并返回到以前的`Activity`（或用新`Intent`的启动它 - 问题似乎集中在完成`Activity`）时，UI 性能急剧下降大约六到七秒，然后返回普通的。

从 开始`LogCat`，此警告始终出现：

```
07-11 22:09:42.594: W/ActivityManager(292): Launch timeout has expired, giving up wake lock!
07-11 22:09:42.601: W/ActivityManager(292): Activity idle timeout for ActivityRecord{42bf6e00 com.kcoppock.sudokubeta/com.kcoppock.sudoku.SudokuBoardActivity} 
```

一旦活动超时，UI 性能就会恢复正常。在那之前，它非常缓慢。我没有知道可能阻塞主线程的代码，我什至已经注释掉了我的整个`onPause()`方法以查看它是否有任何区别，但事实并非如此。

不产生任何后台线程，`Activity`不执行任何网络活动，它唯一的磁盘访问是对`SharedPreferences`. 我之前能够找到的问题是关于 的空闲超时`HistoryRecord`，而不是`ActivityRecord`。

有什么想法会导致这种情况吗？或者我如何确定是什么阻塞了 UI 线程，如果这是正在发生的事情？

**编辑**：好的，只是尝试注释掉除了*super.onCreate* () 和 setContentView() 之外的所有内容——问题仍然存在。**它不会发生在除此之外**的任何其他活动中，但没有任何其他活动。：/

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T05:07:49.650

哦，天哪。除了反复试验之外很难诊断的事情之一，但我已经弄清楚了。作为参考，如果其他人有这个问题，它归结为我布局中的自定义视图。我`ViewTreeObserver.OnGlobalLayoutListener()`在布局传递之后添加了一个来进行一些布局修改，但是在那个监听器中我修改了布局并因此导致了另一个布局，本质上创建了一个无限循环（但不知何故不会导致 ANR）。我的解决方案是这样的：

```
private class BoardLayoutListener implements OnGlobalLayoutListener {
    @Override
    public void onGlobalLayout() {
        //...do stuff here

        //REMOVE this listener so that you don't repeat this forever
        ViewTreeObserver obs = SudokuBoard.this.getViewTreeObserver();
        obs.removeGlobalOnLayoutListener(this);
    }
} 
```

[考虑到我在 StackOverflow 上评分第二高的答案](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r/4406090#4406090)专门解决了这个问题，这个解决方案非常具有讽刺意味。:P

*叹*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T01:28:45.747

我今天遇到了同样的问题，但结果证明有不同的原因和解决方案，我决定在此处添加信息，以防万一它可能对其他人有所帮助。
就我而言，问题是由于我的`onActivityResult()`方法中有以下行引起的：
`android.os.Debug.waitForDebugger();`
我刚刚删除了该行，问题就消失了。该行通常用于将调试器与操作系统线程同步，但我只是认为它不应该在任何地方使用。奇怪的是，直到我将手机与桌面断开连接后，问题才会出现。

问候

# php - 如何获取在 $(document).ready 函数上设置的字段的值？

> ID：11444623
> 
> 赞同：0
> 
> 时间：2012-07-12T03:26:56.980
> 
> 标签：php, javascript, ajax, jquery

我目前正在通过 javascript 设置文本框值。但是当我尝试使用 $("#idField").val() 获取该值时，我得到空值。

我应该如何获得那些文本框的值？

我想做的是[这样](http://jsfiddle.net/g3vng/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:31:05.780

确保您的#idField 存在（唯一 ID）

[.val()](http://api.jquery.com/val/)仅适用于 input/select/textarea 元素，如果您想要文本只需使用 .text()，如果您想要 html 只需使用 .html();

```
<script type="text/javascript" charset="utf-8">
    jQuery(document).ready(function($){
        var user_name = $('#user_name').val();

        alert(user_name);
    });
</script>
<label for="user_name">Label</label>
<input type="text" name="user[name]" value="User name" id="user_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:34:07.650

*   Be sure that jQuery library is included properly.

*   Make confirm that you're trying to access the `textfield` value after assigning some value to it, not before assign.

*   ***Make sure that your `ID` is unique.***

*   To set value to `textfield` syntax is: `$("#idField").val('some value')`.

*   After set the you can get value.

*   If you're trying to assign the value using any `variable`, check that the `variable` has some value or it is `null`. To set value using variable:

    ```
    var myVar = 'some value';
    $("#idField").val( myVar ); 
    ```

*   Try to use firebug/ such like debugger to catch the error (if you don't get any luck)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:01:20.417

`.val()`没有参数在调用函数时获取字段的值，但如果你的“#idField”元素还没有被解析，那么`$("#idField")`就找不到它，然后`.val()`就是`undefined`. 这就是为什么您需要在文档就绪处理程序或正文末尾的脚本块中运行操作 DOM 的脚本。

在你的小提琴的情况下，你真的不清楚你想要做什么，但你正在声明和初始化你的`field_one_val`变量：

```
var field_one_val = $("#field_one").val(); 
```

...在页面加载时，该字段实际上为空，因此`field_one_val`最终为空字符串。

然后在您的点击处理程序中使用该变量：

```
$("#field_two").val('val '+field_one_val +' added to this field'); 
```

...但它仍然是一个空字符串。

**如果您正在尝试做的是单击第二个字段，则此时获取第一个字段的值，然后执行以下操作：**

```
$("#field_two").val('val ' + $("#field_one").val() + ' added to this field'); 
```

如这个更新的演示所示：http: [//jsfiddle.net/g3vng/2/](http://jsfiddle.net/g3vng/2/)

# android - 在 Android 上的意图 - 传递 ArrayList 到另一个活动

> ID：11444626
> 
> 赞同：0
> 
> 时间：2012-07-12T03:27:24.540
> 
> 标签：android, android-intent

我有两个活动，我想将 ArrayList -> drawablesFromUrl objs 从活动 A 传递到活动 B。部分代码如下所示：

在活动 A 中：

```
Intent i = new Intent(getApplicationContext(),SitePhotoFullScreen.class);
             Bundle myData = new Bundle();
             myData.putInt("id", position);
             myData.putInt("MaxId", imgAdapter.getCount());
             myData.putSerializable("myObjArray",drawablesFromUrl);<---- this objs
             i.putExtras(myData);
             startActivity(i); 
```

在活动 B

```
ArrayList<Drawable> myObjArray = new ArrayList<Drawable>();    
// get intent data
    Intent i = getIntent();
    Bundle myBundle = i.getExtras();
    position = myBundle.getInt("id");
    MaxId = myBundle.getInt("MaxId");
    myObjArray = (ArrayList<Drawable>) i.getSerializableExtra("myObjArray"); 
```

执行代码后，出现错误：

```
AndroidRuntime(15005): java.lang.RuntimeException: Parcel: unable to marshal value android.graphics.drawable.BitmapDrawable@4052d928 
```

任何人都可以帮助我解决问题，万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:52:58.343

通过传递你的对象`Parcelable`。这是一个链接，它将向您展示如何相对轻松地做到这一点：

[http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

# java - 如果我使用 HashMap > 在 Java 中

> ID：11444628
> 
> 赞同：0
> 
> 时间：2012-07-12T03:27:25.473
> 
> 标签：java, hashmap, duplicates

我`HashMap<String, ArrayList<String>>`在Java中使用。

当输入值到来时，

例如，输入值为`[1, "stack"]`, `[2, "over"]`, `[1, "flow"]`.....

我想在 HashMap`[1, ["stack", "flow"]]`中输入 value 。`[2, "over"]`

但是键值是重复的。所以，HashMap 被覆盖了。

那么，我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:35:31.733

尝试[番石榴多图](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)：

> 用 Java 表示图的传统方式是`Map<V, Set<V>>`，这在很多方面都很尴尬。Guava 的 Multimap 框架可以轻松处理从键到多个值的映射。
> 
> A`ListMultimap`会将键映射到 a`List`值，跟踪它们的顺序，而 a`SetMultimap`会将键映射到`Set`不同值的 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:35:39.257

调用. `get`_ `Map`如果它返回一个`List`（`Set`可能更合适）添加到那个。如果返回`null`，则创建一个集合，添加值，将其放入地图中。

更好的是，使用一些第三方多图。

# c# - 如何禁用特定文件的特定编译器警告

> ID：11444631
> 
> 赞同：16
> 
> 时间：2012-07-12T03:27:59.263
> 
> 标签：c#, visual-studio-2010, .net-4.0, sandcastle

## 背景

我正在从事一个小型编码项目，该项目将出售给其他公司。我需要为它创建一些文档，所以我决定使用 Sandcastle。在花了很长时间下载和安装之后，我终于让它工作了，并注意到任何没有评论的公共方法或类都有红色文本说明评论丢失。然后我安装了 Ghostdoc 来帮助加快我的评论速度。这打开了缺少 xml 注释的编译器警告，这很棒，因为我现在有一个我需要注释的所有内容的列表。

## 问题

我的一个代码文件是一个自动生成的文件，其中包含大约 3000 个编译器警告。我需要能够跳过该文件来创建任何“缺少 Xml 注释”编译器警告。我从[这篇](https://stackoverflow.com/questions/7982525/visual-studio-disabling-missing-xml-comment-warning)文章中知道了这些事情：

*   我知道我可以关闭项目的编译器警告，但是项目中还有其他文件应该有编译器警告。
*   我知道我可以`#pragma warning disable 1591`用来删除编译器警告，但是文件是自动生成的，我真的不想每次都手动重新添加它。
*   我知道我可以添加一个空注释，但是我真的不想每次重新生成文件时都必须重新添加它。
*   我可以将文件拉出到它自己的项目中，因为它是其名称空间中的唯一类，然后删除 XML 注释要求，但我不希望客户必须处理另一个 dll。
*   这些类是部分类，所以我正在考虑尝试找到一种方法来在部分类中添加#pragma 警告禁用，但即使有可能，仍然存在会引发警告的枚举。

如何告诉 VS 忽略特定类型警告的单个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:34:59.563

我想到了几种可能性：

1.  你能有另一个类来导入自动生成的 .cs 文件吗？包装类具有编译指示，只导入自动生成的类。
2.  编写一个 perl 脚本（或简单的 C# 程序），在生成文件之后和编译 .cs 文件之前调用它作为构建事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T07:00:29.313

如果生成的类不应该对您的用户可见，您可以检查生成工具是否具有将类生成为内部而不是公共的选项。

如果您生成的代码是一个 Web 服务引用，您可以在创建引用时指定它（在“添加服务引用”对话框中，高级 -> 生成类的访问级别）。

否则，您可以尝试找到一种方法来自动将生成代码中类型的访问级别从公共更改为内部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:38:29.287

## 编辑：我的解决方案

我使用了 David Thielen 的建议并创建了一个 C# 程序，将`#pragma warning disable`消息插入到我的自动生成的文件中。理想情况下，我将其称为生成文件本身的后期操作，但现在预编译命令就足够了，因为我的语句将是文件中的第一行之一，它只需要读取几行行，看到 disable 语句已经存在，然后退出，所以它不应该减慢构建速度。以下是我的节目，供大家欣赏！:)

```
/// <summary>
/// Addes #pragma warning disable messages to source code as part of a prebuild to ignore warnings.
/// Primarly used for autogenerated classes that may contain some compiler warnings by default
/// </summary>
public class Program
{
    /// <summary>
    /// 
    /// </summary>
    /// <param name="args">
    /// [0] - file to edit
    /// [1] - line number to insert / edit warning disable at
    /// [2+] - warnings numbers to disable</param>
    static void Main(string[] args)
    {
        // Preconditions
        if (args.Length < 2)
        {
            throw new ArgumentException(String.Format("Unexpected number of parameters.{0}Parameters should be [0] - file to edit{0}[1] - line number to insert / edit warning disable at{0}[2+] - warnings numbers to disable", Environment.NewLine));
        }
        else if (args.Length == 2) { return; }

        // Valid number of args, validate arguments
        string filePath = args[0];
        long lineNumber;

        if(!long.TryParse(args[1], out lineNumber)){
            throw new InvalidCastException("Unable to cast \"" + args[1] + "\" to a long");
        }

        string[] compilerWarningNumbers = new string[args.Length - 2];
        Array.ConstrainedCopy(args, 2, compilerWarningNumbers, 0, compilerWarningNumbers.Length);

        // File Name and line number are valid, perform search and replace
        AddOrUpdateCompilerWarningDisabler(filePath, lineNumber, String.Join(",", compilerWarningNumbers));

    }

    private const string TEMP_FILE_POSTFIX = ".CompilerWarningDisabler.txt";
    public static void AddOrUpdateCompilerWarningDisabler(string filePath, long lineNumber, string compilerWarningNumberCSV)
    {
        if (!File.Exists(filePath))
        {
            throw new FileNotFoundException("File path not found!", filePath);
        }

        // Set Clear Readonly Flag
        FileInfo fileInfo = new FileInfo(filePath);
        bool isReadOnly = fileInfo.IsReadOnly;

        // Get Temp File Name and Delete if it already exists
        string tempFile = Path.Combine(Path.GetDirectoryName(filePath), Path.GetFileNameWithoutExtension(filePath) + TEMP_FILE_POSTFIX);
        File.Delete(tempFile);

        // Read from the target file and write to a new file.
        int currentLine = 1;
        string line;
        string textToWrite = "#pragma warning disable " + compilerWarningNumberCSV;
        try
        {
            using (StreamReader reader = new StreamReader(filePath))
            using (StreamWriter writer = new StreamWriter(tempFile))
            {
                while ((line = reader.ReadLine()) != null)
                {
                    if (currentLine == lineNumber)
                    {
                        if (line.StartsWith("#pragma warning disable"))
                        {
                            if (line == textToWrite)
                            {
                                // Nothing has changed, don't bother copying file
                                return;
                            }
                            else
                            {
                                line = textToWrite;
                            }
                        }
                        else
                        {
                            writer.WriteLine(textToWrite);
                            writer.WriteLine(line);
                        }
                    }
                    else
                    {
                        writer.WriteLine(line);
                    }
                    currentLine++;
                }

                if (currentLine == lineNumber)
                {
                    writer.WriteLine(textToWrite);
                }

                if (currentLine < lineNumber)
                {
                    throw new InvalidDataException("File " + filePath + " does not contain line number " + lineNumber);
                }
            }

            // This could potentially delete the source file, but this should be messing with autogenerated files, so even if it does happen, it shouldn't be to hard to get it back
            if (isReadOnly)
            {
                fileInfo.IsReadOnly = false;
            }
            File.Delete(filePath);
            File.Move(tempFile, filePath);
            if (isReadOnly)
            {
                new FileInfo(filePath).IsReadOnly = true;
            }
        }
        finally
        {
            File.Delete(tempFile);
        }
    }
} 
```

# c - ANSI C 中的字符串处理（内存分配）

> ID：11444633
> 
> 赞同：0
> 
> 时间：2012-07-12T03:28:06.690
> 
> 标签：c, string, pointers, memory-management

我如何可以为 char* 变量分配一个字符串，而不必事先分配内存？

例如，如果我有一个函数返回一个 char*（例如文件路径），我会以这种方式调用该函数。

```
char* path;
path = get_path(); 
```

如果我不知道路径的长度是多少，我怎么能期望 char* 的行为？在分配给“路径”之前，是否有必要分配路径的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:33:08.260

在您的代码中：

```
char* path;
path = get_path(); 
```

`get_path`返回指向（或等效地，地址）字符串的指针。（指向字符串的指针是指向其第一个字符的指针）。赋值只是复制该指针值，将其存储在`path`.

`get_path`函数本身必须分配空间以某种方式保存字符串。

有几种方法可以做到这一点。有些人让调用者有责任在不再需要时释放空间。

推荐阅读：[comp.lang.c FAQ](http://www.c-faq.com)，尤其是第 4 节（指针）、第 6 节（数组和指针）、第 7 节（内存分配）和第 8 节（字符和字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:31:56.860

在这种情况下，`get_path()`函数返回一个指向它自己的内存缓冲区的指针。现在的问题是，谁分配了该内存，谁负责释放它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:32:39.133

```
char *path;//path is just a pointer 
```

如果你在 get_path() 中为路径字符串分配内存，你只需让指针(char *path) 指向那个内存。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T03:32:34.627

在`get_path`您必须将指针返回到已分配的变量。像这样：

```
char *get_path()
{
    char *var = (char*)malloc(sizeof(char)*n);
    setdirectory(var);
    return var;
} 
```

`n`目录的大小在哪里。

但是既然你说你不知道目录的大小，你可以得到它的名字，计算单词，分配另一个内存量（那个时候确切的数量）并释放另一个内存。这将帮助您使用内存。

# objective-c - 在 ARC 下，Objective-C 的属性和声明混淆了

> ID：11444638
> 
> 赞同：1
> 
> 时间：2012-07-12T03:28:40.153
> 
> 标签：objective-c, ios, automatic-ref-counting

在 ARC 下，如果我这样定义 ivar：

```
@interface ObjectA : NSObject {
    id A;
}

@property(nonatomic,unsafe_unretained) id A; 
```

A的属性是什么？强还是 unsafe_unretained？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:39:55.790

这取决于你如何实现它。有两种方法可以做到这一点：

*   使用`@synthesize A;`or`@synthesize A = __A;`在这种情况下它是`__unsafe_unretained`，因为属性的所有权规范胜过 ivar ¹的所有权规范。
*   手动编写`A`和`setA`. 在这种情况下，结果将取决于您为实现选择的支持变量类型。²

这是一个文档[链接](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)，其中阐明了如何确定财产所有权的规则。请参阅第 4.1.1 节。

> ¹如果关联的实例变量已经存在，则其所有权资格必须等于该属性的所有权；否则，将使用 [属性] 的所有权资格创建实例变量。
> 
> ²属性的特定所有权保留在其元数据中，但除非属性是综合的，否则其含义纯属约定俗成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:39:39.247

来自苹果文档：

变量限定符

您可以像使用 const 一样对变量使用以下生命周期限定符。

```
__strong
__weak
__unsafe_unretained
__autoreleasing 
```

`__strong`是默认值。只要有一个指向它的强指针，一个对象就保持“活动”。 `__weak`指定不使被引用对象保持活动状态的引用。当对象没有强引用时，弱引用设置为 nil。 `__unsafe_unretained`指定一个不使被引用对象保持活动状态的引用，并且在没有对该对象的强引用时不设置为 nil。如果它引用的对象被释放，则指针悬空。 `__autoreleasing`用于表示通过引用 (id *) 传递并在返回时自动释放的参数。你应该正确地装饰变量。在对象变量声明中使用限定符时，正确的格式是：

# javascript - jQuery deferred：用于延迟函数的返回，直到函数内的异步调用完成+获取返回值

> ID：11444639
> 
> 赞同：14
> 
> 时间：2012-07-12T03:28:51.053
> 
> 标签：javascript, jquery, asynchronous, jquery-deferred

如何正确使用 jQuery deferreds 来延迟函数的返回，直到函数内的异步调用完成 + 获取返回值？

这是我当前的代码：

```
function getFields(page)
{
  var dff = $.Deferred();
  result = {};
  $.ajax( //the async call
    {
      url: page,
      success:
        function (data)
        {
          //work out values for field1 & field 2 from data here
          result = 
          {
            'field1' : field1,
            'field2' : field2
          };
        },
      complete:
        function()
        {
          dff.resolve(result); //my attempt to return the result
        }
    }
  );
  return dff.promise();
} 
```

我希望这个打印 {"field1":"value1","field2":"value2"}

```
var result = getFields('http://something');
console.log(JSON.stringify(result)); 
```

但是，结果的值似乎是一个 jQuery 对象 - 所以我做错了什么，但是什么？

谢谢！

* * *

PS对不起新手问题，我是第一次使用deferreds，所以我仍然掌握基本概念。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T04:02:08.153

延迟函数返回的唯一方法是`getFields`将 AJAX`async`属性设置为 false：

```
 var ajaxPromise = $.ajax(
    {
      url: page,
      async: false  // make the call synchronous
    }
  ); 
```

但是 jQuery 文档指出，从 1.8 开始不推荐使用它（即不鼓励使用它）。

Deferred 不会使 AJAX 同步，而是使回调和异步方法更容易使用。

据我所知，你正在尝试做这样的事情可能会更好：

```
function getFields(page)
{
  var ajaxPromise = $.ajax( //the async call
    {
      url: page
    }
  );

  var dff = $.Deferred();
  ajaxPromise.then(function(data){

    // Possibly access the loaded data in this function.
    var result = {
      'field1' : field1,
      'field2' : field2
    };

    // Notify listeners that the AJAX call completed successfully.
    dff.resolve(result);

  }, function(){
    // Something went wrong - notify listeners:
    dff.reject(/* possibly pass information about the error */);
  });

  return dff.promise();
} 
```

然后像这样使用 promise 对象：

```
var fieldPromise = getFields('http://something');
fieldPromise.done(function(result){
  console.log(JSON.stringify(result)); 
}); 
```

请注意，它会立即`getFields`返回一个`Promise`对象，但您必须等待 promise 得到解决，然后才能注销结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T03:57:46.347

这是延迟的基本思想：您返回了一个对象，您可以使用它来定义将在返回值返回时调用的函数。因此，您可以执行以下操作：

```
function getFields(page)
{
    return $.ajax(page);
} 
```

然后你可以调用它并指定在 XHR 调用完成时要调用的函数：

```
var jqXHR = getFields("/path/to/call");
jqXHR.done(function (data) { alert(JSON.stringify(data); }); 
```

该对象是可链接的，因此您可以这样做：

```
getFields("/path/to/call")
    .done(function (data) { alert(JSON.stringify(data); }); 
```

请注意，返回的 jqXHR 对象`$.ajax`是与 Deferred 兼容的对象，因此您可以阅读[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)上的文档。

我不确定您的示例代码是什么意思（因为它实际上并没有使用 Ajax 调用）但也许您的意思是这样的：

```
function getFields()
{
    var df = $.Deferred();
    window.setTimeout(function () {
        df.resolve({field1: "value1", field2: "value2"});
    }, 1000);
    return df.promise();
}

getFields().done(function (data) { console.log(JSON.stringify(data)); }); 
```

这将在您运行后一秒钟打印您想要的值。

# javascript - 使用 javascript 将类添加到 DIV

> ID：11444640
> 
> 赞同：22
> 
> 时间：2012-07-12T03:28:56.877
> 
> 标签：javascript, html, css

示例 HTML：

```
<div id="foo" class="class_one"></div> 
```

如何在`class_two`不替换的情况下添加类`class_one`？

最终结果：

```
<div id="foo" class="class_one class_two"></div> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-12T03:30:15.980

如果您只需要支持新的浏览器，请参阅下面的 deekshith 的回答

标准的javascript：

```
document.getElementById('foo').className += ' class_two' 
```

或 JQuery：

```
$('#foo').addClass('class_two'); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-12T03:33:48.447

You may use jQuery.

```
$('#YourElement').addClass('YourClass'); //add

$('#YourElement').removeClass('YourClass'); //remove

$('#YourElement').toggleClass('YourClass'); //toggle 
```

* * *

Or Javascript, if you wish.

```
document.getElementById('id').classList.add('YourClass'); //add
document.getElementById('id').classList.remove('YourClass'); //remove 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-24T23:37:24.317

添加类的更好方法是使用[Element.classList.add()](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList#Examples)：

```
document.getElementById('foo').classList.add("class_two"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T03:56:23.553

您可以使用几个辅助函数让生活更轻松：

```
function addClass(el, className) {
  var classes = el.className.match(/\S+/g) || [];  

  if (!hasClass(el, className)) {
    classes.push(className);
  }
  el.className = classes.join(' ');
}

function hasClass(el, className) {
  var re = new RegExp('(^|\\s+)' + className + '(\\s+|$)');
  return re.test(el.className);
}

addClass(document.getElementById('foo'), 'bar') 
```

# windows-7 - VB6 IDE 在 Windows 7 机器上执行太慢

> ID：11444646
> 
> 赞同：7
> 
> 时间：2012-07-12T03:30:38.203
> 
> 标签：windows-7

我正在运行 Windows 7 x64，并安装了 Visual Basic 6。

这是一台速度非常快的机器，但是 VB6 IDE 运行速度太慢。

表单设计器非常慢，尤其是在将表单控件（文本框、按钮等）移动到屏幕的不同区域时。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T08:54:14.320

您可以尝试转到 vb.exe 属性，单击兼容性选项卡，现在选择此选项“禁用桌面组合”。这应该可以解决您的问题

# mfc - Visual C++ 中的缩放/缩放 CWnd 控件

> ID：11444656
> 
> 赞同：2
> 
> 时间：2012-07-12T03:31:30.720
> 
> 标签：mfc, visual-c++

我们有一个 CWnd，上面有几个控件（CButton、CEdit、CStatic 等），并且希望找到一种方法来允许用户放大和缩小，从而使控件变大/变小。控件本身需要更改大小以及控件内的文本标签（如按钮文本）。

我正在查看网络上记录的 CZoomView 并使用 CDC SetMapMode 到 MM_ISOTROPIC，但这似乎真的只在 OnDraw 方法中有用，因为 CZoomView 在实现时有一个 TODO 来实现绘图代码。由于这些是 Microsoft 控件，我们只是让它们自己绘制。

这甚至可能吗？似乎我应该能够使用调整设备上下文来认为设备到逻辑单位比例是不同的，但我无法想出如何让控件来兑现这一点。

```
int previousMode = pDC->SetMapMode(MM_ISOTROPIC);
CSize previousWin = pDC->SetWindowExt(100,100);
CSize previousExt = pDC->SetViewportExt(m_zoom, m_zoom); 
```

想法或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T23:40:12.927

**不**，这对于 Win32 用户/标准/公共控件是不可能的，因为 Windows 的“User32”层都是基于像素的，而您提到的 GDI 函数在该级别不起作用，并且用户 API 中没有等效项（窗口句柄与设备上下文）。

* * *

我知道这是一个老问题，我不会回答以获得积分。我本来打算自己问同样的问题，但是在我输入完问题后遇到了这个问题。由于您不应该在这里提出重复的问题，因此我发布此答案，而不是希望有人会出现并用更好的答案证明我错了。或者可能马克想出了答案，并会收到我的答案通知并分享他学到的东西。就我而言，我需要制作一个像 Adob​​e Acrobat 这样的用户界面，并带有可填写的表单，但基础是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:20:12.703

为什么不直接更改 Windows 中的 DPI 设置（显示 -> 设置自定义文本大小）？这是使事物变小/变大的常用方法，如果用户在阅读内容时遇到困难，他们应该这样做。

Windows 标准控件具有“DPI 感知”功能，因此您可以免费进行缩放。

# php - $_SERVER['HTTP_REFERER'] 在 Google Chrome 中不起作用

> ID：11444657
> 
> 赞同：1
> 
> 时间：2012-07-12T03:31:42.123
> 
> 标签：php, google-chrome

> **可能重复：**
> [HTTP_REFERER 的可靠性如何](https://stackoverflow.com/questions/6023941/how-reliable-is-http-referer)

我`HTTP_REFERER`在我的代码中使用，但在谷歌浏览器中，`$_SERVER['HTTP_REFERER']`不包含任何价值。在 Firefox 中，它正在工作。

# delphi - Browsing a zip file in Delphi xe2

> ID：11444665
> 
> 赞同：1
> 
> 时间：2012-07-12T03:32:48.453
> 
> 标签：delphi, delphi-xe2

I have searched for this answer and can't seem to find the solution, I am using imageen's thumb viewing component "imageenmview" what I would like to do is be able to open a zip file and treat it like a regular folder then populate the thumb viewer component without actualy having to extract the zip file.

I tried to extract one file at a time into a memory stream then load the stream into the thumb viewer but didn't have much luck i guess I am having problems getting my head around the system.zip lib in Delphi and help in the right direction is much appreciated.

# eclipse - Eclipse CDT 构建配置 - 一次构建

> ID：11444666
> 
> 赞同：7
> 
> 时间：2012-07-12T03:32:55.657
> 
> 标签：eclipse, configuration, build, eclipse-cdt

在 Eclipse CDT 中，我有几个构建配置。我想一次构建它们。它们可以并行或串行构建，没关系，没有依赖关系。我正在寻找的是一键式构建，它将通过一个操作重新编译所有构建配置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T03:03:28.093

在 Preferences Dialog（在 Windows 上的“Window”菜单中，在 OS X 上的“Eclipse”上）的子树`C/C++`→`Build`中，有一个选项可以选择“Build All Configurations in Each Project”

看截图：

![在 Eclipse 中一次构建的构建配置选项的屏幕截图](../Images/a5dd73c5bb2fd6196f89600cf52ea208.png)

# regex - 为什么 match() 和 split() 会产生不同的结果？

> ID：11444671
> 
> 赞同：0
> 
> 时间：2012-07-12T03:34:14.797
> 
> 标签：regex, string, actionscript-3, split

为什么会`match`产生`split`不同的结果？这是在 Actionscript 3.0 中，但如果在 AS3 之外也是如此，我也想知道为什么。

例子：

```
var txt:String = "somethingorother";
var re:RegExp = /(\w{2,2})/g;
trace("\t txt.split = " + txt.split(re) + " -- " + txt.split(re).length);
trace("\t txt.match = " + txt.match(re) + " -- " + txt.match(re).length); 
```

结果：

```
txt.split = ,so,,me,,th,,in,,go,,ro,,th,,er, -- 17
txt.match = so,me,th,in,go,ro,th,er -- 8 
```

## 编辑：

在给定的条件下，我希望结果是一个相同的数组（在这种情况下，除了`match`没有找到奇数长度的最终条目`Strings`）。为什么会有额外的条目`split`？什么是“正确”的`split`发现？`match`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T03:36:53.370

`split`用另一个字符串或正则表达式拆分一个字符串，如果参数是后一种情况，则保留任何带括号的组，这是您当前看到的行为。它根本不具有相同的功能`match`，用于检索字符串上正则表达式的一个或多个匹配项。

* * *

`split`将通过您的正则表达式拆分字符串，并保留带括号的组 - 作为单独的条目。因此，在拆分时，匹配项与它们之间的字符串分开，该字符串为空 - 因此是您的结果。

# php - 如果确认电子邮件，则将用户重定向到登录页面

> ID：11444673
> 
> 赞同：1
> 
> 时间：2012-07-12T03:34:34.860
> 
> 标签：php, javascript, html

因此，在我的网站上，我发送带有链接的电子邮件，用户必须遵循这些链接来验证他/她的电子邮件。如果用户单击电子邮件中的链接，我希望用户被带到感谢他/她确认他/她的帐户的页面，然后将用户重定向到登录页面。我怎样才能做到这一点？我尝试使用 PHP 标头函数，但这不起作用，因为我必须发送标头以显示“谢谢”消息，所以我不能使用该函数。我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:36:46.597

您可以在一段时间后使用元刷新来进行重定向。要在 5 秒内重定向，请将此代码放在`<head>`您的网页中：

```
<meta http-equiv="refresh" content="5;URL='http://example.com/'"> 
```

您也可以使用 HTTP 标头执行此操作：

```
header('Refresh: 5;URL='http://example.com/'); 
```

或使用 JavaScript：

```
<script type="text/javascript">
function delayedRedirect(){
    window.location = "http://example.com/"
}
</script>
<body onLoad="setTimeout('delayedRedirect()', 3000)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:50:59.963

尝试 php sleep() 函数 [在此处输入链接描述](http://php.net/manual/en/function.sleep.php)

你可以这样使用

```
<?php

if(email code validation evaluates to true by comparing to DB record)
{
echo"thank you message"
sleep(20);
header('location:http://www.somesite.com/login.php');
}
?> 
```

如果它给出一些标题错误。之后使用 ob_start()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:57:50.307

最简单的方法可能是使用 GET。

它的工作方式是您发送一个带有 GET 变量的链接，您可以使用 php 提取该链接并激活电子邮件地址。

例如，如果用户收到链接： [http ://example.com/verifymail.php?email=johndoe@example.com&verify=true](http://example.com/verifymail.php?email=johndoe@example.com&verify=true)

然后 example.com/verifymail.php 上的脚本可以访问电子邮件并验证变量，如下所示：

```
<?php
  if($_GET['verify'] == 'true'){
    verifyEmail($_GET['email']);
  }
?> 
```

您可以使用任何语言形成链接，只需遵循约定： - ? 在 URL 告诉 php GET 变量之后。变量以名称=值对的形式出现。和变量由 & 分隔

# java - 在子线程中执行主线程方法

> ID：11444679
> 
> 赞同：3
> 
> 时间：2012-07-12T03:35:33.830
> 
> 标签：java, multithreading

我有一个名为 Test Example 的类，它有一个名为 dance() 的方法。在主线程中，如果我在子线程中调用 dance() 方法，会发生什么？我的意思是，该方法会在子线程还是主线程中执行？

```
public class TestExample {
    public static void main(String[] args) {

        final TestExample  test = new TestExample();

        new Thread(new Runnable() {

            @Override
            public void run() {

                System.out.println("Hi Child Thread");
                test.dance();
            }
        }).start();

    }

    public void dance() {
        System.out.println("Hi Main thraed");
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T04:32:28.647

试试这个...

**1.**方法dance属于TestExample类，不属于主线程。

**2.**每当一个 java 应用程序启动时，JVM 就会创建一个主线程，并将 main() 方法放在堆栈的底部，使其成为入口点，**但是如果您正在创建另一个线程并调用一个方法，那么它就会运行在那个新创建的线程内。**

**3\. 它将执行 dance() 方法的子线程。**

请参阅下面的示例，我使用过的地方`Thread.currentThread().getName()`

```
 public class TestExample {

         public static void main(String[] args) {

            final TestExample  test = new TestExample();

          Thread t =  new Thread(new Runnable() {

                @Override
                public void run() {

                    System.out.println(Thread.currentThread().getName());
                    test.dance();
                }
            });
          t.setName("Child Thread");
          t.start();

        }

        public void dance() {
            System.out.println(Thread.currentThread().getName());
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:40:07.717

它将在子线程中执行。当您编写一个方法时，它属于一个类而不是一个特定的线程。

# java - How to make the row editable(false) in JTable

> ID：11444681
> 
> 赞同：0
> 
> 时间：2012-07-12T03:35:46.043
> 
> 标签：java, swing, netbeans

> **Possible Duplicate:**
> [How to make a JTable non-editable](https://stackoverflow.com/questions/1990817/how-to-make-a-jtable-non-editable)

I am developing an application using Netbeans.

I have generated a Report in a JTable format.

It works properly but the rows and colums are editable, and I would them to be non-editable.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T03:38:04.980

In your table model you can override the `isCellEditable()` method:

```
public class MyModel extends DefaultTableModel 
{
   public MyModel(Object[][] data, Object[] cols) 
   {
      super(data, cols);
   }

   public boolean isCellEditable(int row, int col) 
   {
      return false;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:44:43.080

您正在使用 NetBeans GUI 编辑器创建表。在表格中`Properties > model`，为模型选择所需的原点。例如，您可以将@Hunter 添加`Mymodel`到您的来源并选择`Custom code`：

```
new MyModel(data, cols) 
```

![定制模型](../Images/ea50d1374deecd999c95e7daad4a88fb.png)

# sqlite - SQLite：从全文索引中提取术语和文档计数

> ID：11444682
> 
> 赞同：0
> 
> 时间：2012-07-12T03:35:46.450
> 
> 标签：sqlite, indexing, full-text-search

我有一个全文索引表。

如何提取全文索引器使用的术语列表及其所在的文档数量

例子

```
friend   2
fiend    4
found    45
fast     3 
```

ETC....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:35:43.010

解决方法是在索引表生成后创建一个 ftsaux 表：

```
CREATE VIRTUAL TABLE MYTABLE_terms USING fts4aux(MYTABLE); 
```

# asp.net-mvc - Web API 在典型的 n 层架构中适合什么位置？

> ID：11444690
> 
> 赞同：16
> 
> 时间：2012-07-12T03:37:27.197
> 
> 标签：asp.net-mvc, asp.net-web-api, n-tier-architecture

通常，当我为项目布局 n 层架构时，我有以下几层：

*   **域**（域模型，存储库合同）
*   **数据**（在域模型之上工作的存储库）
*   **服务**（聚合存储库、缓存、验证）
*   **演示文稿**（mvc 应用程序）

考虑到实际应用程序和外部客户端将使用 ASP.NET MVC 4 Web API，它在哪里适合？它是**服务**层的一部分，还是使用**服务**层并与 MVC 应用程序处于同一级别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T05:59:17.253

可能有两种方法：

1.  您决定通过 HTTP 调用从 MVC 应用程序使用您的 Web API。在这种情况下，调用代码 ( `HttpClient`) 位于您的数据层中。无论您是从数据库还是远程 Web 服务调用中获取数据，这都无关紧要。在这种情况下，由于 Web API 可能已经封装了大部分业务逻辑，因此您的服务层将非常薄，只是数据访问层的包装，如果不带来任何附加价值，甚至不存在。

2.  由于 Web API 是用 .NET 编写的，因此您可以决定在 MVC 应用程序中直接引用包含此 API 服务层的程序集。在这种情况下，您的 Web API 应用程序的服务层将成为您的 MVC 应用程序的服务层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:03:31.353

有两种可能

*   中间层或中间件：这是 Web 服务和 WCF 服务通常工作的地方。使用 REST 比 SOAP 轻得多，所以这是事实上的用例。Web 和 WCF 服务在客户端生成方面更好，但 Web API 将逐渐赶上。
*   表示层：这将为单页应用程序或任何使用数据并在客户端呈现的现代网站/应用程序提供数据。

# android - How to implement a HTTP Server in android which can be access by other device with browser?

> ID：11444696
> 
> 赞同：0
> 
> 时间：2012-07-12T03:38:12.613
> 
> 标签：android

I have a new requirement to implement a HTTP Server which run in a android device. And this HTTP server is access by other device such as PC with browser. I find a example like it: PAW server for android. But I don't know how to implement it. The PAW server for android is very complicate. Is there any simple way to implement this requirement? I also read this article: [How to implement an HTTP server on android](https://stackoverflow.com/questions/7268320/how-to-implement-an-http-server-on-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:48:57.327

试试 NanoHttpd。它只是一个源文件，你只需要扩展它来实现你自己的需求。

```
http://elonen.iki.fi/code/nanohttpd/ 
```

# ruby-on-rails - 如何使用 RSpec 来测试一个项目的类别是否是类别表中的有效类别？

> ID：11444697
> 
> 赞同：1
> 
> 时间：2012-07-12T03:38:18.220
> 
> 标签：ruby-on-rails, testing, rspec, associations

我有一个项目模型，其中每个项目都应该有一个类别，该类别是有效类别。

在我的 item.rb 中，我有

has_one ：类别

在我的 category.rb 中，我有

属于_to :item

是对的吗？以及如何使用 RSpec 验证我的项目是否具有有效类别？

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:05:39.077

我会有两个测试：

```
let(:valid_category) { stub_model(Category, :valid? => true) }
let(:invalid_category) { stub_model(Category, :valid? => false) }

let(:params) { {} } # valid parameters except category

specify { Item.new(params.merge(:category => valid_category)).should be_valid }
specify { Item.new(params.merge(:category => invalid_category)).should_not be_valid } 
```

# asp.net - How to get Cassini (and others) to always call Application_BeginRequest when requesting a URL?

> ID：11444698
> 
> 赞同：0
> 
> 时间：2012-07-12T03:38:25.060
> 
> 标签：asp.net, url-routing, global-asax, cassini

I have a web application which uses a custom framework. It relies on getting an Application_BeginRequest to parse a URL and serve a proper page by `Response.Output`. Note it's a bit of an experiment and clearly not ASP.Net-MVC. It also does not use any modules or anything like that. The web.config is very minimal, and I hope to keep it that way.

It works fine on Apache+mod_mono and under mono's xsp implementation. My problem is trying to get it to work with .Net now. I remember it once working under Microsoft's Cassini implementation, but I can't remember what configuration I had to do.

Right now, my problem is that I'll get a `BeginRequest` for say `/static/style.css`, and for custom routes like `/login`, but for some reason when I request `/` cassini will just display a list of files and I do not get a `BeginRequest`

How do I configure Cassini so that it will always call `BeginRequest`? Also, bonus points for a solution that works for IIS as well. (I haven't tried IIS, but I'd expect it to have similar problems)

# iphone - Modify iPhone to Force Landscape Orientation Only

> ID：11444699
> 
> 赞同：1
> 
> 时间：2012-07-12T03:38:26.163
> 
> 标签：iphone, ios, xcode4.2, ios-4.2

> **Possible Duplicate:**
> [Landscape Mode ONLY for iPhone or iPad](https://stackoverflow.com/questions/2647786/landscape-mode-only-for-iphone-or-ipad)

I'm working on a project to repurpose old iPhones as media hubs in cars. My particular need is obtaining some sort of tutorial or walk through specifically designating the steps needed to modify the default iOS screen orientation.

Many people have used the Landscape Rotation Lock in Cydia to disable Landscape mode, my goal is just the opposite.

I'd like to disable Portrait mode, as the end result will see the iPhone mounted in my car horizontally, thus requiring Landscape orientation only.

How can this be done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:22:56.620

`Supported interface orientations`在`Landscape (left home button)`info.plist 文件中使用并设置其值。这将以该方向启动您的应用程序，您需要设置

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

在每个视图控制器中。

希望这是您正在寻找的。需要帮助请叫我。

**更新**

嗨@DanSolo，我认为您的应用程序是在 XCode 中创建的，对吗？如果是这样，则转到您的任何视图控制器并检查该`shouldAutorotateToInterfaceOrientation`方法。旋转设备时将调用此方法。如果您将返回 Yes ，它将不会旋转。在您的情况下，您将返回

```
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
```

这将仅在您的横向左侧模式下返回 Yes。如果你想要左右横向使用

```
return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || 
        (interfaceOrientation == UIInterfaceOrientationLandscapeRight); 
```

此代码将进入您的每个 viewController 的`shouldAutorotateToInterfaceOrientation`方法中。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:06:42.393

尝试这个

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

# javascript - 用于第一个“一、二、三和 X”元素的 Jquery 选择器和 :not()?

> ID：11444700
> 
> 赞同：2
> 
> 时间：2012-07-12T03:38:32.557
> 
> 标签：javascript, jquery, jquery-selectors

如果要选择第一个元素或 :not，有几种选择：

*   `:not(:first)`
*   `:nth-child(1)`
*   `first()`
*   `:first-child`
*   ETC...

选择第一个“二、三和 X”元素的选项有哪些？

**和**

`:not(the first two, three, and X?)` 可以`:not()`通过使用JS来完成`!`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T03:53:26.343

如果您要排除的元素连续跟随，您可以使用`slice()`：

```
$(selector).slice(0,3); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gE4DY/)。

这将选择前三个元素，`0`是要开始的*第一个*元素的从零开始的索引，第二个`3`是要停止收集的元素的从零开始的索引。

第二个数字也可以是负数，如果是这样，将从返回的元素集的*末尾开始计数：*

```
$(selector).slice(1,-3); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gE4DY/1/)。

参考：

*   [`slice()`](http://api.jquery.com/slice/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:43:56.477

有几种方法：

对于前 1 或 2，您可以指定使用`eq`：`$('.class').eq(0);`

对于有限的范围，请使用`lt`：`$('.class').lt(3);`

要执行 的“非” `lt`，请使用`gt`大于。

# actionscript-3 - AS3 在 Scrollpane 内滚动动态创建的内容

> ID：11444701
> 
> 赞同：1
> 
> 时间：2012-07-12T03:38:34.267
> 
> 标签：actionscript-3, scroll, scrollpane

这是我第一次真正达到我不得不为编程问题寻求帮助的地步。我已经在网上找到了关于这个问题的所有线索，但无济于事。我还尝试了其他人（几乎）遇到相同问题的修复。

这是问题所在：

我创建了一个闪聊客户端和服务器。它们都按预期工作，我最近决定在 Flash 客户端上将用户消息显示为单独的影片剪辑实例，以便我可以更好地控制发布的每条消息。（例如用户头像、表情符号、删除单个消息的能力等）以前我只是使用带有 UIScrollbar 的动态文本区域，它工作得很好，但不允许对消息内容进行足够的自定义或控制。

这是我当前的设置；

我在舞台上的 Flash Pro 中创建了一个名为“msgAreaPane”的 Scrollpane。当客户端加载时，它会创建一个名为“msgAreaContainer”的影片剪辑，并将 msgAreaPane 源设置为 msgAreaContainer。当要显示消息时，它会从库中创建我的“msgElement”对象的新实例，并将其添加为 msgAreaContainer 的子对象。

所有这些工作正常。但问题是，我不能使用 UIScrollbar（据我所知）正确地自动滚动 msgAreaPane 滚动窗格，因为它没有“maxScrollV”等属性差异。

所以基本上我需要知道我需要改变什么，或者我是否以错误的方式去做。不确定我是否应该尝试滚动 msgAreaContainer 或 msgAreaPane 的内容，或者我是否应该以不同的方式进行设置。

我试过操纵 Scrollpane 的垂直滚动位置，但似乎根本无法让它做任何事情。我已经在这个问题上苦苦挣扎了大约 2 天，并且非常需要一些帮助或建议。提前感谢任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:08:24.887

没关系大家，经过两天没睡这个，我终于自己弄明白了。我将把答案留给其他人，因为我确信我不是唯一一个遇到或将会遇到这个问题的人。Adobe 确实应该更好地记录对象元素属性。无论如何，这就是你的做法。

```
msgAreaPane.update();
msgAreaPane.verticalScrollPosition = msgAreaPane.maxVerticalScrollPosition; 
```

如果您仍然对它的即时性有疑问，请通过`addedToStage`为新的子元素添加事件侦听器来确保您的动态内容已完全加载。

# c# - C#如何搜索最佳匹配重载方法

> ID：11444702
> 
> 赞同：0
> 
> 时间：2012-07-12T03:39:26.750
> 
> 标签：c#

我有几个关于在 C# 中调用重载（或者我应该称它们为隐藏）方法的问题。假设我有以下课程：

```
class ParaA {}
class ParaB : ParaA {}
class ParaC : ParaB {}

class TheBaseClass 
{
   public void DoJob (ParaA a){Console.WriteLine ("DoJob in TheBaseClass is being invoked");}

}

class TheDerivedClass : TheBaseClass 
{
  public void DoJob (ParaB b){Console.WriteLine ("DoJob in TheDerivedClass is being invoked");}
}

class Test
{
  //Case 1: which version of DoJob() is being called?
  TheDerivedClass aInstance= new TheDerivedClass ();
  aInstance.DoJob(new ParaA ());

  //Case 2: which version of DoJob() is being called?
  TheBaseClass aInstance= new TheDerivedClass ();
  aInstance.DoJob(new ParaA ());

  //Case 3: which version of DoJob() is being called?
  TheBaseClass aInstance= new TheDerivedClass ();
  aInstance.DoJob(new ParaB ());

  //Case 4: which version of DoJob() is being called?
  TheBaseClass aInstance= new TheDerivedClass ();
  aInstance.DoJob(new ParaC ());

} 
```

我希望我已经清楚地表明了我正在尝试做的事情。我想知道当调用者提供的参数与任何签名不完全匹配但与某些签名兼容时，C# 将如何搜索要调用的“匹配”版本的方法。当方法不仅在类中重载，而且还被派生类隐藏、覆盖或重载时，这让我更加困惑。上面的示例并未涵盖所有可能的情况。有什么术语吗？

提前谢谢你们！

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:52:02.137

Case2-4 调用`TheBaseClass`仅仅是因为 DoJob 不是虚拟方法并且类型`aInstance`是`TheBaseClass`.

Case1 调用`TheBaseClass`是因为它是直接匹配的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:58:20.613

我添加了几行代码来编译代码：

```
void Main()
{
    var t = new Test();
    t.Run();
}
class ParaA {}
class ParaB : ParaA {}
class ParaC : ParaB {}

class TheBaseClass 
{
   public void DoJob (ParaA a){Console.WriteLine ("DoJob in TheBaseClass is being invoked");}

}

class TheDerivedClass : TheBaseClass 
{
  public  void DoJob (ParaB b){Console.WriteLine ("DoJob in TheDerivedClass is being invoked");}
}

public class Test
{
    public void Run()
    {
        //Case 1: which version of DoJob() is being called?
        TheDerivedClass aInstance= new TheDerivedClass ();
        aInstance.DoJob(new ParaA ());

        //Case 2: which version of DoJob() is being called?
        TheBaseClass aInstance2= new TheDerivedClass ();
        aInstance2.DoJob(new ParaA ());

        //Case 3: which version of DoJob() is being called?
        TheBaseClass aInstance3= new TheDerivedClass ();
        aInstance3.DoJob(new ParaB ());

        //Case 4: which version of DoJob() is being called?
        TheBaseClass aInstance4= new TheDerivedClass ();
        aInstance4.DoJob(new ParaC ());
    }
} 
```

产生输出：

```
DoJob in TheBaseClass is being invoked
DoJob in TheBaseClass is being invoked
DoJob in TheBaseClass is being invoked
DoJob in TheBaseClass is being invoked 
```

即每次都调用基类方法。

在案例 1 中，它被调用是因为参数是 ParaA，而 ParaA 不是 ParaB。在其他情况下，调用它是因为对象实例的类型为“TheBaseClass”。

下面是修改后的相同代码以说明方法重载：

```
void Main()
{
    var t = new Test();
    t.Run();
}

class ParaA {}
class ParaB : ParaA {}
class ParaC : ParaB {}

class TheBaseClass 
{
   public virtual void DoJob (ParaA a){Console.WriteLine ("DoJob in TheBaseClass is being invoked");}

}

class TheDerivedClass : TheBaseClass 
{
  public override void DoJob (ParaA b){Console.WriteLine ("DoJob in TheDerivedClass is being invoked");}
}

public class Test
{
    public void Run()
    {
        //Case 1: which version of DoJob() is being called?
        TheDerivedClass aInstance= new TheDerivedClass ();
        aInstance.DoJob(new ParaA ());

        //Case 2: which version of DoJob() is being called?
        TheBaseClass aInstance2= new TheDerivedClass ();
        aInstance2.DoJob(new ParaA ());

        //Case 3: which version of DoJob() is being called?
        TheBaseClass aInstance3= new TheDerivedClass ();
        aInstance3.DoJob(new ParaB ());

        //Case 4: which version of DoJob() is being called?
        TheBaseClass aInstance4= new TheDerivedClass ();
        aInstance4.DoJob(new ParaC ());
    }
} 
```

现在的输出是：

```
DoJob in TheDerivedClass is being invoked
DoJob in TheDerivedClass is being invoked
DoJob in TheDerivedClass is being invoked
DoJob in TheDerivedClass is being invoked 
```

每次都会调用 DerivedClass 方法，因为对象是“TheDerivedClass”类型。

# node.js - 用于 MonetDB 的 Node.js 和 ODBC

> ID：11444703
> 
> 赞同：2
> 
> 时间：2012-07-12T03:39:30.687
> 
> 标签：node.js, odbc, monetdb

我正在尝试使用 odbc 连接到 node.js 中的 monetDB。但是，我不断收到以下错误：

```
The driver reported the following diagnostics whilst running SQLDriverConnect

IM002:1:0:[unixODBC][Driver Manager]Data source name not found, and no default driver      specified
DEBUG: [] 
```

这是源代码：

```
var sys  = require("util");
var odbc = require("/home/vash/node_modules/odbc/odbc.js");

var db = new odbc.Database();
db.open("Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo", function(err)
{
    db.query("select * from demo", function(err, rows, moreResultSets)
    {
        sys.debug(sys.inspect(rows));
        db.close(function(){});
    });
}); 
```

使用命令“isql -v monetdb”，我可以使用带有以下 odbc.ini 和 odbcinst.ini 内容的 ODBC 连接到 monetDB：

```
[monetdb]
Description             = "ODBC for MonetDB"
Driver          = /usr/lib/libMonetODBC.so
Setup           = /usr/lib/libMonetODBCs.so
UsageCount              = 1
SERVER = vash-G75VW
USER = monetdb
PASSWORD = monetdb
PORT = 5000 
DATABASE = demo 
```

由于我使用 isql 连接，我猜问题在于代码行：

```
"Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo" 
```

任何想法有什么问题，我是否正确设置了上面的连接字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T08:20:18.833

首先是你混淆了你的 odbc.ini 和 odbcinst.ini 设置（尽管你部分地摆脱了它）。odbcinist.ini 文件包含驱动程序列表，其中每个驱动程序在 [] 中命名，以下是驱动程序属性。因此，如果您的 odbcinst.ini 文件的内容如上所示，您已经命名了一个名为“monetdb”的驱动程序，它具有各种属性。驱动程序绝对需要的唯一属性是驱动程序属性，它应该指向驱动程序的共享对象。附加属性 usagecount、description 和 setup 是可选的。描述可以从一些 ODBC API 中返回，并且设置库告诉驱动程序管理器在需要时加载哪个设置库（在 unix 上很少这样）（例如，如果驱动程序想要提示输入密码或者您给的密码不足要连接的属性）。因此，您的 odbcinst.ini 文件应如下所示（注意，我特意重命名了您的驱动程序密钥以使事情变得明显）：

```
[monetdb_driver]
Description             = "ODBC Driver for MonetDB"
Driver          = /usr/lib/libMonetODBC.so
Setup           = /usr/lib/libMonetODBCs.so
UsageCount              = 1 
```

/etc/odbc.ini 文件包含 SYSTEM DSN，其创建方式与 odbcinst.ini 文件类似，但 [] 中的每个条目都是 DSN 名称。DSN 绝对需要的唯一属性是 Driver 属性，因为它命名了用于此 DSN 的 ODBC 驱动程序。命名的驱动程序应该是 odbcinst.ini 文件中的一个键，因此对您而言，您的 odbc.ini 文件应该如下所示（记住我再次重命名了您的驱动程序）：

```
[monetdb]
Description             = "DSN for MonetDB"
Driver          = monetdb_driver
SERVER = vash-G75VW
USER = monetdb
PASSWORD = monetdb
PORT = 5000 
DATABASE = demo 
```

请记住，您可以拥有 USER DSN，它们通常位于 ~/.odbc.ini 中（请参阅下面的 odbcinst -j 的输出）。

你会发现 unixODBC 的 odbcinst 命令也很有用，因为你可以运行它来检查你的 ini 文件应该在哪里：

```
$odbcinst -j
unixODBC 2.2.14
DRIVERS............: /etc/odbcinst.ini
SYSTEM DATA SOURCES: /etc/odbc.ini
FILE DATA SOURCES..: /etc/ODBCDataSources
USER DATA SOURCES..: /home/martin/.odbc.ini
SQLULEN Size.......: 4
SQLLEN Size........: 4
SQLSETPOSIROW Size.: 2 
```

完成此操作后，您的 isql 命令（和以前一样）应该可以工作 - 例如：

isql -v monetdb your_username your_password

现在为您调用 SQLDriverConnect。

```
db.open("Driver={monetdb_driver};SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo", 
```

我不使用 monetdb，因此我无法确定“驱动程序”以外的属性，但 ODBC 通常使用属性 UID 和 PWD 作为用户名和密码。我可以相信 monetdb 具有端口和数据库属性。

[您可以从Linux/UNIX ODBC](http://www.easysoft.com/developer/interfaces/odbc/linux.html)和[ODBC -](http://www.martin-evans.me.uk/node/70)我编写的连接过程中找到更多关于 unix 上的 ODBC 以及连接过程的工作人员。

如果您只打算使用无 DSN 连接字符串（上面对 SQLDriverConnect 的调用）进行连接，您现在可以删除 odbc.ini 文件的内容。

# html - How can i limit the effect of html code over a single div (or another element)

> ID：11444706
> 
> 赞同：1
> 
> 时间：2012-07-12T03:39:36.680
> 
> 标签：html, effect

```
<div>
<b> some test
</div>
another text 
```

This would print the "another text" bold. Is it some how possible to limit the effect of `<b>` only within the `<div>` element? I've searched the web for some javascript solutions but couldn't find anything.

Please don't ask why I need this. Just lets assume it's out of curiosity.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:44:46.343

关闭粗体标签，如下所示。这是基本的 HTML。

```
<div>
    <b>some text</b>
</div>
Another text 
```

更多关于 html 的信息：http: [//www.w3schools.com/html/](http://www.w3schools.com/html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:57:45.857

一个有趣但可行的解决方案是在元素的 innerHTML 中注入结束标记。

让我们想想：

jQuery

```
$('div').each(function(){
   $(this).append("</b></i></u></s></small></code>");
}); 
```

纯 JavaScript

```
var dv=document.getElementsByTagName('div');
for (var i=0;i<dv.length;i++) {
    dv[i].innerHTML += "</b></i></u></s></small></code>";
} 
```

这是一个非常糟糕的做法，因为您应该始终注意关闭您可能打开的每个标签，但是如果它们尚未关闭，这将关闭格式化标签。

# javascript - 扩展浏览器以处理 Apple 键盘事件

> ID：11444717
> 
> 赞同：2
> 
> 时间：2012-07-12T03:41:16.503
> 
> 标签：javascript, browser, keyboard, dom-events

有没有办法扩展浏览器（例如，谷歌浏览器）来处理来自非标准键盘的输入事件？考虑一个 Apple 键盘，有一些特殊的键，比如播放/暂停（通常在 上`F8`）。我们可以从这些键中捕获输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:31:54.607

类似的问题：[在浏览器中捕获媒体键事件](https://stackoverflow.com/questions/9600337/capture-media-key-events-in-a-browser)

这些键不会在浏览器中触发事件，但 Chrome 有一个扩展，似乎添加了此功能： [http ://smus.com/chrome-media-keys/](http://smus.com/chrome-media-keys/)

# c# - 使用 linq 删除代码的错误

> ID：11444719
> 
> 赞同：0
> 
> 时间：2012-07-12T03:41:28.683
> 
> 标签：c#, mysql, linq, combobox

我遇到了关于使用组合框删除数据的问题。该错误提示我不知道如何解决它。任何人都可以帮助我吗？

```
private void btnDel_Click(object sender, EventArgs e)
{
    using (testEntities Setupctx = new testEntities())
    {
        var Lo = Convert.ToInt16(cbLocationData.SelectedValue);
        var DeleteLocation = (from delLocation in Setupctx.locations
                              where delLocation.Location1 == Lo
                              select delLocation).Single();
        Setupctx.DeleteObject(DeleteLocation);
        Setupctx.SaveChanges();
        this.Delete_Location_Load(null, EventArgs.Empty);
        MessageBox.Show("Selected Shift Timing Has Been Deleted.");
    }
} 
```

`where delLocation.Location1 == Lo`向我显示以下错误的部分

> 运算符“==”不能应用于“字符串”和“短”类型的操作数。

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:19:11.557

创建一个类似这样的方法：

```
private void LoadLocation()
{
       using (testEntities Setupctx = new testEntities())
        {
            var storeLocation = (from vL in Setupctx.locations
                                 select new
                                         {
                                           Location1  =vL.Location1
                                         }
                                 );

                cbLocationData.DataTextField = "Location1";
                cbLocationData.DataSource = storeLocation;
                cbLocationData.DataBind();

        }
} 
```

然后在你的页面 load(asp.net)/form Load(winform) 添加：

```
 LoadLocation(); 
```

希望这有帮助。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:46:16.313

```
private void cbLocationData_SelectedIndexChanged(object sender, EventArgs e)
{
    using (testEntities Setupctx = new testEntities())
    {
        var storeLocation = (from vL in Setupctx.locations
                             where vL.Location1 == vL.Location1
                             select vL.Location1);

        foreach (var locationData in storeLocation)
        {
            cbLocationData.Items.Add(locationData.ToString());
        }
    }
} 
```

是否可能需要将 locationData 设置为 tostring() 或 convert()，具体取决于数据类型？一切看起来都应该正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:22:27.607

您的事件在您尝试填充的 cb 的 SelectedindexChanged 上触发。试着把它放在页面加载或更合适的地方？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T04:52:59.277

I think you put your code in wrong place.. you just add items on same combo select change (cbLocationData_SelectedIndexChanged) that's wrong
put your code other appropriate place in which adding items are not part of same events

# uilabel - 目标 C：UILabel 在运行时不显示来自另一个类的值

> ID：11444726
> 
> 赞同：0
> 
> 时间：2012-07-12T03:43:18.630
> 
> 标签：uilabel, ios5

我在这里有一个类，它将字符串值传递给另一个具有 UILabel 的类并将其显示给该类。但是我不能将它显示到另一个类的标签上。我以两种方式做到了这一点..

1）我的第一种方式，直接从另一个类调用标签。在我的第一个类上，在方法上

```
static void on_status_state(NSString *) stats
{
     DisplayViewController* display = [[DisplayViewController alloc] init];
        display.statusLabel.text = @"Sample Display";
} 
```

在包含 UILabel 的类上。在 DisplayConn.h

```
@property (retain, nonatomic) IBOutlet UILabel *statusLabel; 
```

2）我的第二种方式，调用方法并将值传递给我的第一个类的参数，在方法上

```
static void on_status_state(NSString *) stats
{
  DisplayViewController* display = [[DisplayViewController alloc] autorelease];
        [display toReceiveStatus:@"Sample Label"];
} 
```

在包含 UILabel 的类上。在 DisplayConn.h

```
@property (retain, nonatomic) IBOutlet UILabel *statusLabel; 
```

然后在 DisplayConn.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)toReceiveStatus:(NSString *) stats
{
    self.statusLabel.text = stats;
    NSLog(@"DISPLAY %@",stats); 
} 
```

第二种方法似乎有效，因为显示了包含该值的日志，但是该值仍未显示到标签（'statusLabel'）。标签的显示会在运行时不时更改。应该是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:38:03.127

考虑到这一点，

A类和B类

UILabel 属于 B 类

在 A 类中，

```
B *newObject = [B alloc]init];
newObject.statusLabelValue = @"Simple Display"; 
```

在你的 Bh

```
@property (retain, nonatomic) NSString *statusLabelValue;
@property (retain, nonatomic) IBOutlet UILabel *statusLabel; 
```

和

在 Bm

```
- (void)viewDidLoad
{
[super viewDidLoad];
statusLabel.text = statusLabelValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:50:12.783

你应该初始化 `DisplayViewController`类的对象，

```
 static void on_status_state(NSString *) stats
{
        DisplayViewController* display = [[[DisplayViewController alloc]  init] autorelease];
        [display toReceiveStatus:@"Sample Label"];
} 
```

你应该检查是否`- (void)toReceiveStatus:`被调用。在 DisplayConn.h 中声明 statusLabel 为`UILabel *statusLabel;`

试试这样我认为它会对你有所帮助。

```
- (void)viewDidLoad
{
    statusLabel  = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 30, 20)];
    statusLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:14];
    statusLabel.font = [UIFont systemFontOfSize:15.0];
    [self.view addSubview:statusLabel];

} 
```

# mongodb - 如何使用 Spring Data 从存储库中查询嵌入式对象？

> ID：11444727
> 
> 赞同：1
> 
> 时间：2012-07-12T03:43:45.487
> 
> 标签：mongodb, spring-data

我有一个对象，我们称它为`Item`. 从概念上讲，用户可以对这些项目执行操作。操作应作为项目的历史记录保存。

我的文档根目录是`Item`，并且它已`Action`嵌入其中。

我创建了 spring 数据存储库：

```
public interface Item extends CrudRepository<Item, String> 
```

是否有可能创建一个方法，也许通过以某种方式用 注释它`@Query`，来获取`Action`符合某些条件的 's 列表？我想获取这些数据，以便向用户显示所有`Item`'s 的最近历史记录。

`Action`将's 放在他们自己的文档类型中并将它们链接到他们的's的更好方法`Item`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:58:32.550

应该可以查询`Action`您可以使用以下模式调用的方法：

```
findByAction_{actionPropertyName} 
```

或者，如果它不会模棱两可，您可以删除下划线。

1.3.2.2.1。[来自http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/reference/html/](http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/reference/html/)的属性表达式

# asp.net-mvc - 被试图对返回动作结果的方法进行单元测试的攻击者所阻碍

> ID：11444728
> 
> 赞同：1
> 
> 时间：2012-07-12T03:43:47.147
> 
> 标签：asp.net-mvc, unit-testing

好的 - 所以我是这样开始的，

```
public ViewResult Index()
{
   return View(service.GetProjects());
} 
```

这是我的测试。

```
[TestMethod]
public void Index_Will_Return_A_List_Of_Active_Projects()
{
   var view = controller.Index();
   Assert.AreEqual(view.ViewData.Model.GetType(), typeof(List<Project>));
} 
```

所有这一切都被 dokken 所震撼，但后来我添加了登录名，如果用户未通过身份验证，我将他们重定向到登录页面。这是新方法的样子。

```
 public ActionResult Index()
   {
      if (Request.IsAuthenticated)
          return View(service.GetProjects());
      return RedirectToAction("Login", "Account");
   } 
```

我的问题是这个 - 我无法弄清楚如何为我的生活修复单元测试。我无法再返回 ViewResult，因此无法检查 .ViewData.Model 属性，但我无法弄清楚如何在返回查看结果的同时重定向。我一直在浏览该网站，发现这个[如何在 ViewResult 或 ActionResult 函数中重定向？](https://stackoverflow.com/questions/2538469/how-do-i-redirect-within-a-viewresult-or-actionresult-function)但这并没有真正的帮助。

如果有人能告诉我这将是什么规则 - 我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:51:57.127

您的测试将不得不添加另一个步骤：断言返回*的是*一个`ViewResult`. 如果该断言成功，则将其强制转换，并继续使用另一个断言。

```
[TestMethod]
public void Index_Will_Return_A_List_Of_Active_Projects()
{
   var result = controller.Index();
   // this is called a guard assertion
   Assert.IsInstanceOfType(result, typeof(ViewResult)); 

   var view = (ViewResult)result;
   Assert.AreEqual(view.ViewData.Model.GetType(), typeof(List<Project>));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:59:48.347

我会从您的操作中删除该逻辑并改用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)。然后您的测试不会改变，您可以创建一个单独的测试，断言该操作正在被属性修饰。

```
[Authorize]
public ViewResult Index() 
{ 
    return View(service.GetProjects()); 
} 
```

# python - 在python中循环一系列数字的最干净的方法是什么？

> ID：11444729
> 
> 赞同：0
> 
> 时间：2012-07-12T03:43:49.717
> 
> 标签：python

所以让我们说

```
start = 10
end = 30 
```

现在我需要一个从`start`到的循环`end`

我在想这样的事情：

```
for i in [start..end]
  print i 
```

但这并不完全奏效。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T03:45:00.167

```
for i in range(start, end+1):
   print i 
```

将为您提供从 10 到 30 的*输出*。

注意：我添加`+1`到您的`end`值的原因是因为[range()](http://docs.python.org/library/functions.html#range)函数指定了一个*半闭区间*。这意味着包含第一个值，但*不**包含*最终值。

 *IE，

```
 range(5, 10) 
```

会给你一份清单

```
 5, 6, 7, 8, 9 
```

但*不*包括 10。

您还可以为[range()](http://docs.python.org/library/functions.html#range)和许多其他内容指定步长，请参阅[文档](http://docs.python.org/library/functions.html#range)。

最后，如果您使用的是 Python 2.x，您也可以使用[xrange()](http://docs.python.org/library/functions.html#xrange)代替`range()`，尽管在 Python 3.x 中您只会拥有`range()`这就是我在这里使用它的原因。

`range()`如果您对and之间的区别感到好奇`xrange()`（尽管它与您的问题并不直接相关），那么以下两个 SO 问题是一个很好的起点：[Python 2.X 中 range 和 xrange 函数之间的区别是什么？](https://stackoverflow.com/questions/94935/what-is-the-difference-between-range-and-xrange)并且[您是否应该始终偏爱 xrange() 而不是 range()？](https://stackoverflow.com/questions/135041/should-you-always-favor-xrange-over-range)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T03:45:33.037

```
for i in xrange(start, end + 1):
    print i 
```

如果您使用的是 Python 3，而不是 Python 2.x，请使用`range`in代替（如@Levon 建议的那样）。`xrange`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T03:45:58.560

```
for i in xrange(10, 31):
   # something 
```

看看精美的手册，它会为您解释...注意终点是“最多，但不包括” - 它被称为半封闭范围。

也正如其他人在 Python 3.x 中提到的那样 -`range()`是一个生成器，不会`list`像在 Python 2.x中那样创建一个。但是，2to3 工具会自动将 an 转换`xrange`为`range`语句。

在 2.x`range`中生成了一个可以切片等的物理列表...但是在 3.x 中，`list(range(1000))`如果您希望它实现它在 2.x 中所做的事情，则必须编写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T03:47:18.067

您正在寻找`range()`

```
range(start,end) #end not inclusive
range(end) # starts with 0,end not inclusive
range(start, end, step) #increments of step, default = 1 
```

例如，

```
for i in range(100,150):
   print i 
```

**注意：** Py3k+ 只有 range()，之前的版本有`xrange()`和`range()`，两者都相似，除了`xrange()`是一个生成器，而`range()`创建一个可以迭代的数字列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T03:47:47.893

您可以迭代并打印列表的每个元素。尝试以下操作：

```
for i in range(start,end+1):
print i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T13:15:50.730

您还可以通过打印从 range 返回的结果列表来打印完整的数字范围：

```
print(range(start, end+1)) 
```*

# c# - windows phone 中可点击的复杂项目

> ID：11444736
> 
> 赞同：0
> 
> 时间：2012-07-12T03:45:00.887
> 
> 标签：c#, windows-phone-7, click

我的全景应用程序中有一个网格控件，其中包含一些内容，我希望能够单击此网格以导航到另一个页面。我一直在寻找最好的方法来做到这一点，但我找不到任何解决方案。我正在考虑模板一个按钮来保存带有图像和文本的网格，但我在某处读到这不是一个好主意，该按钮不适合这样做。我还希望能够使用 silverlight 工具包中的倾斜效果。有谁知道这样做的最佳方法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:57:08.567

为此使用按钮没有错；这样做是 Button 是 ContentControl 的原因

您所要做的就是让您的 Grid 成为按钮的内容：

```
<Button>
    <!-- Your Grid here -->
</Button> 
```

# cocos2d-iphone - 在项目触摸时播放音效

> ID：11444738
> 
> 赞同：0
> 
> 时间：2012-07-12T03:45:13.257
> 
> 标签：cocos2d-iphone

在 Cocos2D for iPhone 中，如何在用户触摸菜单项时*自动播放点击音效？*

我的想法是改变 CCMenu.m 中的 ccTouchEnded 如下：

```
-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {
    NSAssert(state_ == kCCMenuStateTrackingTouch, 
        @"[Menu ccTouchEnded] -- invalid state");

    [selectedItem_ unselected];
    [selectedItem_ activate];

    state_ = kCCMenuStateWaiting;

    // Play a click effect whenever any menu item was touched
    [MyMusicHandler playClick]; 
```

}

这有效并且做我想做的事。但它是“破解源代码”，我更喜欢继承 CCMenu。但是，如果我将完全相同的方法放入我的 CCMenu 子类中，它就不起作用。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:02:19.610

这就是我在其中一款游戏中的做法：

在初始化（GETextMenuItem 子类 CCMenuItemLabel）中：

```
confirmMenuItem_=[GETextMenuItem textMenuItemWithText:@"Buy" 
                                           dimensions:CGSizeMake(90,32) 
                                            alignment:UITextAlignmentCenter
                                                 font:@"Cochin-Bold" 
                                             fontSize:17 
                                               target:self 
                                             selector:@selector(onConfirm)]; 
```

在选择器中（GameEngine 是一个本土的单例，它提供了随处可用的各种服务）：

```
-(void) onConfirm{

    // immediately prevent a double click

    menu_.isTouchEnabled=NO;
    [[GameEngine sharedGameEngine].soundProvider playFxNowWithSound:@"sound_fx_menu_buy.mp3"];
    NSString *params = [NSString stringWithFormat:@"quantity:%i",quantity_];
    [consumer_ menuReturnsForTag:self.menuTag withParams:params];
    [self flyOut];
} 
```

# java - 如何在 java 中加载 javascript 文件并运行 javascript 方法？

> ID：11444741
> 
> 赞同：3
> 
> 时间：2012-07-12T03:45:46.503
> 
> 标签：java, javascript

我在客户端使用[标记](https://github.com/chjj/marked)将降价代码呈现为 html。

但现在我需要在 Java 的服务器端做同样的事情。为了获得完全相同的 html 代码，我必须使用除了其他 java markdown 库之外的标记。

如何在 java 中加载“marked.js”文件并运行 javascript 代码？

```
marked.parser(marked.lexer("**hello,world**")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T04:13:30.003

2个选项：

1.  看看[教程](http://www.mozilla.org/rhino/tutorial.html)。[`Rhino`](http://www.mozilla.org/rhino/)
2.  然后参考[RunScript](http://lxr.mozilla.org/mozilla/source/js/rhino/examples/RunScript.java)示例，转载如下并自己嵌入 Rhino。
3.  然后编辑它以满足您的需求

或者：

直接使用 Java SE 6 及更高版本中的内部 ScriptEngine，它与 Rhino 捆绑在一起。请参阅`RunMarked`下面根据您的需要调整的示例。

* * *

# RunScript.java

```
/*
 * Licensed under MPL 1.1/GPL 2.0
 */

import org.mozilla.javascript.*;

/**
 * RunScript: simplest example of controlling execution of Rhino.
 *
 * Collects its arguments from the command line, executes the
 * script, and prints the result.
 *
 * @author Norris Boyd
 */
public class RunScript {
    public static void main(String args[])
    {
        // Creates and enters a Context. The Context stores information
        // about the execution environment of a script.
        Context cx = Context.enter();
        try {
            // Initialize the standard objects (Object, Function, etc.)
            // This must be done before scripts can be executed. Returns
            // a scope object that we use in later calls.
            Scriptable scope = cx.initStandardObjects();

            // Collect the arguments into a single string.
            String s = "";
            for (int i=0; i < args.length; i++) {
                s += args[i];
            }

            // Now evaluate the string we've colected.
            Object result = cx.evaluateString(scope, s, "<cmd>", 1, null);

            // Convert the result to a string and print it.
            System.err.println(Context.toString(result));

        } finally {
            // Exit from the context.
            Context.exit();
        }
    }
} 
```

* * *

# RunMarked.java

*实际上，我注意到了[Freewind 的回答](https://stackoverflow.com/a/11444907/453590)，我会写完全一样的（除了我会`Files.toString(File)`使用 Google Guava 直接加载库）。请参考他的回答（如果您觉得他的回答有帮助，请给他加分）。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T04:13:31.657

```
public static String md2html() throws ScriptException, FileNotFoundException, NoSuchMethodException {
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("JavaScript");

    File functionscript = new File("public/lib/marked.js");
    Reader reader = new FileReader(functionscript);
    engine.eval(reader);

    Invocable invocableEngine = (Invocable) engine;
    Object marked = engine.get("marked");
    Object lexer = invocableEngine.invokeMethod(marked, "lexer", "**hello**");
    Object result = invocableEngine.invokeMethod(marked, "parser", lexer);
    return result.toString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:13:09.853

您可以使用[rhino](http://www.mozilla.org/rhino/)在运行 java 的服务器上运行 JavaScript。

# google-maps - 如何使用 Google Maps API 做文本标记

> ID：11444742
> 
> 赞同：1
> 
> 时间：2012-07-12T03:45:49.220
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

有人知道如何做文本标记和自定义样式的气球吗？就像在网站上一样[http://nano.aviasales.ru/map](http://nano.aviasales.ru/map)

# r - 如何在树状图（R）中调整 x 轴的大小？

> ID：11444743
> 
> 赞同：4
> 
> 时间：2012-07-12T03:45:50.230
> 
> 标签：r, dendrogram, axis-labels

对于大型数据集，我想在可以看到所有标签的树状图中调整 x 轴。例如，我在这里使用 iris 数据：

```
 > iris.data=subset(iris,select=-Species)

    > d <- dist(iris.data, method="euclidean")

    > hc <- hclust(d, "ward")

    > plot(hc, hang=-1, main="Dendrogram of Ward's Method", label=iris$Species) 
```

使用绘图功能后，树状图将是这样的：

![在此处输入图像描述](../Images/552162e4c73b555029026fc6825fd0b4.png)

那么，我将如何调整 x 轴，以便所有物种都清晰可见。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T08:36:41.917

就像@Roman Luštrik 说的：你可以这样做：

```
 png("plotdendogram.png",width=1600,height=800)

  par(cex=1,font=3)
  plot(hc, hang=-1, main="Dendrogram of Ward's Method", label=iris$Species)

  dev.off() 
```

您将能够查看物种的名称，尽管字体很小。希望这可以帮助。

# sql-server - SQL Server 索引导致转换问题

> ID：11444746
> 
> 赞同：2
> 
> 时间：2012-07-12T03:46:38.047
> 
> 标签：sql-server, indexing, overflow, type-conversion, non-clustered-index

我有一个包含两列的表 - ID 为 int，日期由于某种原因存储为 nvarchar。

最近在 ID 字段上创建了一个非聚集索引。现在在我的查询中，当我将日期从 nvarchar 转换为 date 时，它​​给了我一个“将表达式转换为数据类型 datetime 的算术溢出错误”。例外。

如果我从查询中删除 id 字段，则转换效果很好。同样，如果我从查询中删除日期字段转换，它再次完美运行。如果我删除索引，原始查询将完美运行。

我现在的问题是，为什么 ID 列上的索引会扰乱我认为无关的日期列中的转换？

对此的任何解释都非常感谢。查询是：

```
select e.date ,e.id as id from dbo.table1 e,dbo.table2 d with (nolock) 
where e.id=d.id and 
convert(datetime,e.date) between convert(datetime,'07/01/2012') 
and convert(datetime,'07/02/2012') group by e.date,e.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:02:17.743

埃特拉斯特81

当我看到您的查询时，我只是建议您使用 temp. 表首先将您的日期 nvarchar 转换为日期时间，然后将其与下一个表连​​接，

我认为它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:55:59.190

表中的日期列包含无效的日期值。添加索引和更改返回的列会更改查询的查询计划，因此它会评估无效的日期值。

# c++ - 是否可以将 EPIPE 从 write() 获取到 NFS 磁盘上的文件描述符？

> ID：11444747
> 
> 赞同：1
> 
> 时间：2012-07-12T03:46:44.240
> 
> 标签：c++, centos, nfs, epipe

我的 C++ 应用程序`EPIPE`在调用`write()`. 传递给`write()`的文件描述符用于 NFS 安装磁盘上的文件。

手册页`write()`描述`EPIPE`为：

```
fd is connected to a pipe or socket whose reading end is closed.  When this
happens the writing process will also receive a SIGPIPE signal.  (Thus, the write
return value is seen only if the program catches, blocks or ignores this signal.) 
```

所以我很困惑我会如何得到`EPIPE`。可能这是一个多线程问题，并且错误地为不同的线程提供了 errno？我认为 errno 是线程安全的，所以这似乎不太可能，但是获得 EPIPE 似乎没有任何意义。这是在 Centos v4 上。

# reporting-services - SSRS 3.0 Report Map + Map Report Part 运行时更改位置

> ID：11444752
> 
> 赞同：1
> 
> 时间：2012-07-12T03:48:09.730
> 
> 标签：reporting-services, ssrs-2008, reportbuilder3.0, reporting-services-map

我使用 Report Builder 3.0 创建了一个简单的地理地图。

为了放大地图的一个子部分，我从另一个报告中发布了一个报告部分，并将其包含在我的地图中，如下所示： ![简单的报告-报告部分布局](../Images/7d21cc797f31520a4e5ea325c936aec6.png)

但是，当报表运行时，它会将报表部分移到地图之外，如下所示： ![报表运行时并排布局](../Images/f4159c6a7b04ba8a989f41631a8105dd.png)

打印视图显示了我所期望的内容。 ![打印布局](../Images/0bcad42e0068ae8ed23955e45880dc5d.png)

此地图的最终目标将是 SharePoint PerformancePoint Services 报告。

有谁知道我为什么会遇到这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:25:09.033

来自[MSDN 关于报表渲染的文章](http://msdn.microsoft.com/en-us/library/bb677570%28v=sql.100%29.aspx)

## **重叠的报告项目**

HTML、MHTML、Word、Excel、预览或报表查看器**不支持**重叠报表项。如果存在重叠项目，则将它们移动。以下规则适用于重叠的报告项目：

如果报表项的垂直重叠较大，则将重叠项之一向右移动。最左边的项目保留在它所在的位置。

如果报告项目的水平重叠较大，则将重叠项目之一向下移动。最顶部的项目保留在它所在的位置。

如果垂直和水平重叠相等，则将重叠项之一向右移动。最左边的项目保留在它所在的位置。

如果必须移动某个项目以纠正重叠，则相邻的报表项目会向下和/或向右移动，以保持该项目与在其上方和/或左侧结束的报告项目之间的最小间距。例如，假设两个报表项垂直重叠，第三个报表项在它们右侧 2 英寸处。当重叠的报告项目向右移动时，第三个报告项目也向右移动，以保持其自身与其左侧的报告项目之间的 2 英寸。

硬分页格式**支持**重叠报表项，包括打印。

[另请参阅](https://stackoverflow.com/a/11226296/)。

# vba - 比较 Excel 中的两列并输出匹配的结果

> ID：11444753
> 
> 赞同：-1
> 
> 时间：2012-07-12T03:48:12.433
> 
> 标签：vba, excel

我不完全确定如何使用宏在 VBA 中编写它。

我有一个工作簿，Compare.xls。其中有两张纸，Sheet1 和 Sheet2。

基本上我试图采取：

**表 1**

```
Date    ID  Other   Sub     Chan
10000   100 Repeat  X       30  
10000   101 Repeat  X       40 
```

**表 2**

```
ttc   event     Chan
XYZ   L         30
XYZ   L         40
XYZ   L         6 
```

从这些数据中，我需要将 Sheet1 中的 Chan 列与 Sheet2 中的匹配记录 Chan 记录进行比较，并将两个工作表中的连接数据输出到新工作表上。

示例输出为：

```
Date    ID  Other   Sub     Chan   ttc
10000   100 Repeat  X       30     xyz 
```

关于如何继续前进的片段有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:05:51.247

您的请求可以通过一个简单的`VLOOKUP`函数来处理：

步骤 1：在 Sheet2 中，复制 C 列（又名“Chan”列）并将其放在工作表的开头。现在您的 Sheet2 数据应该看起来像

```
Chan    ttc    event
30      XYZ    L
40      XYZ    L
6       XYZ    L 
```

Step2：在Sheet1中，在Sheet1的末尾添加一列（应该是F列）并将其命名为“ttc”（因为这是您要从Sheet2中查找的内容”。现在您的Sheet1数据应该如下所示

```
Date    ID  Other   Sub     Chan    ttc
10000   100 Repeat  X       30   
10000   101 Repeat  X       40 
```

Step3：在Sheet1的F栏输入如下函数

```
=VLOOKUP(E2,Sheet2!$A$2:$C$4,2,) 
```

输入此公式后，结果将立即出现

```
Explanation:  the Excel Vlookup function takes the following four arguments, which are
                  separated with a comma:
    1st argument is the cell (E2) containing the value in Sheet 1 to look for
    2nd argument contains the range of data to look into (which resides in Sheet2 and the
                 cell range A2 through C4 is where the data resides.
                 NOTE1:  the VLOOKUP function requires the 1st column of Sheet2 to be the column
                         to look into
                 NOTE2:  we don't need to include the 1st row containing the header
                 NOTE3:  the dollar signs represent absolute cell range so that when you copy it
                         down to other rows below them, they don't change (i.e., your data range
                         in Sheet2 is always the same
    3rd argument represents the column # in Sheet2 to return if there's a match.
                 NOTE:  column 1 starts with column A of Sheet2
    4th argument is left blank 
```

第 4 步：将此公式复制到 F 列下面的所有其他行注意：后续行应具有公式

```
=VLOOKUP(F2,Sheet2!$A$2:$C$4,2,)
=VLOOKUP(G2,Sheet2!$A$2:$C$4,2,)  if you have 3 rows in Sheet1
=VLOOKUP(H2,Sheet2!$A$2:$C$4,2,)  if you have 4 rows in Sheet1 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:03:16.473

刚刚注意到您想使用 VBA - 不太清楚为什么可以使用内置公式轻松完成此操作？

因为你有点*倒退*使用 a`VLLOKUP`可能不是最好的选择尝试使用`INDEX`and `MATCH`...

这是一个简化版...

![在此处输入图像描述](../Images/3c4e55b28d21db9956dd4a7760fc709d.png)

# sitecore - 嵌套 Sitecore 子布局/占位符 - 可能吗？

> ID：11444754
> 
> 赞同：6
> 
> 时间：2012-07-12T03:48:35.143
> 
> 标签：sitecore, sitecore6

我有一个名为 TwoColumns 的子布局，如下所示：

```
<div class="row">
    <div class="column span8"><sc:placeholder runat="server" key="left-column"></sc:placeholder></div>
    <div class="column span4"><sc:placeholder runat="server" key="right-column"></sc:placeholder></div>
</div> 
```

我通常会通过演示详细信息添加其他子布局，并将占位符指定为左列或右列。

现在，假设我想要完全相同的比例列，但在左列内。像这样：

![在此处输入图像描述](../Images/30f9ca9fc7b73aae2d5f345cf7344368.png)

我可以将 TwoColumns 子布局添加到左列...但是如果我想在其中一个嵌套占位符中添加一些东西，我该怎么做？是否可以将“左列左列”设置为占位符？

如果我想要第二行的双列怎么办？如何指定我希望我的内容进入第一行的左列还是第 N 行的左列？默认情况下，Sitecore 甚至可以做到这一点吗？

请注意“只需创建一个名为 NestedTwo 列的新子布局”不是我正在寻找的解决方案。我想要一个灵活的网格系统。

不用担心 CSS 网格系统，这就完成了。这是一个纯粹的 Sitecore 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:26:56.973

这篇文章是一个很好的开始：

[http://trueclarity.wordpress.com/2012/06/19/dynamic-placeholder-keys-in-sitecore/](http://trueclarity.wordpress.com/2012/06/19/dynamic-placeholder-keys-in-sitecore/)

有了上面的内容，我可以多次使用相同的子布局（带有动态键占位符），这很棒。但是我发现你不能嵌套它们，所以它实际上并没有解决我原来的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T01:46:53.910

在我正在进行的一个项目中，我们必须做类似的事情。

我们最终使用了这个解决方案：http: [//johnnewcombe.net/blog/post/17](http://johnnewcombe.net/blog/post/17)

逐行撕下代码行不通，但经过一些修改后，它对我们有用……我在文章中添加了一条关于需要更新的内容的评论。

# ruby - 在窗户上跑卫和咆哮

> ID：11444759
> 
> 赞同：0
> 
> 时间：2012-07-12T03:48:57.873
> 
> 标签：ruby, guard, growl-for-windows

我如何在 Windows 上运行守卫。

我试图像在[git](https://github.com/guard/guard)上说的那样安装捆绑器，但现在不知道该怎么做

还有如何安装咆哮通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T21:01:10.000

我也遇到了一些麻烦，我最终找到了一个名为 ruby​​_gntp 的 gem。
添加

```
gem 'ruby_gntp' 
```

到您的 Gemfile，然后添加

```
notification :gntp 
```

到您的 Guardfile。这应该让咆哮为您工作并显示您的 Guard 通知。虽然，我要弄清楚的下一个问题是如何让它运行得更快一点。如果您有关于该主题的提示，请告诉我！:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T04:08:43.013

假设您的 PC 上没有 Ruby 设置

1.  转到 RubyForge 并下载适用于 Windows 的 Ruby 一键式安装程序的最新版本。[http://rubyforge.org/frs/?group_id=167&release_id=5246](http://rubyforge.org/frs/?group_id=167&release_id=5246)
2.  下载并安装 RubyGems。[http://docs.rubygems.org/read/chapter/3](http://docs.rubygems.org/read/chapter/3)
3.  在命令提示符下，键入：`gem install bundler`

要安装警卫，您可以添加到 gem 文件中

```
group :development do 
  gem 'guard'
end 
```

然后运行`bundle`

**或者**您可以通过键入以下内容在全局范围内运行：`gem install guard`

至于咆哮，我不确定，也许看看：[http ://www.growlforwindows.com/gfw/default.aspx](http://www.growlforwindows.com/gfw/default.aspx)

# java - Should unnecessary elses be kept?

> ID：11444763
> 
> 赞同：0
> 
> 时间：2012-07-12T03:50:07.660
> 
> 标签：java, coding-style

If i have a simple chunk of code like:

```
public void tracePath(){
   int steps = 0;
   steps = bfs();       
   if(steps==0){
      pathFound(false);
      System.exit(0);
   }else{
      System.out.println(steps);
      pathFound(true);
      System.exit(0);
   }
} 
```

AFAIK this could be rewriten without the *else* as

```
public void tracePath(){
   int steps = 0;
   steps = bfs();       
   if(steps==0){
      pathFound(false);
      System.exit(0);
   }
   System.out.println(steps);
   pathFound(true);
   System.exit(0);
} 
```

Is there a performance (or other logical) reason so keep (or lose) the *else*? or is it just (in this example) stylistic choice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:52:24.273

在这种情况下，这是风格偏好，因为您在 if 语句的末尾退出。如果在 if 末尾没有 system.exit(0)，则在第二个示例中，您将执行两段代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:44:50.280

我会把它改成这样：

```
public void tracePath(){
int steps = 0;
steps = bfs();       
pathFound((!(steps==0)));

System.exit(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T03:54:17.217

我会稍微改变一下，这样：

```
public void tracePath(){
   int steps = 0;
   steps = bfs();       
   if(steps==0){
      pathFound(false);
   }else{
      System.out.println(steps);
      pathFound(true);
   }
   System.exit(0);
} 
```

虽然，老实说，从被调用`System.exit`的函数调用`tracePath`看起来有点极端。

# javascript - Using jQuery Mobile Adapter in AngularJS - Applying jqmCompatMode false to Enable Angular Routing

> ID：11444764
> 
> 赞同：2
> 
> 时间：2012-07-12T03:50:09.213
> 
> 标签：javascript, jquery-mobile, angularjs

I am learning AngularJS and have built a small application. Now that it's functionally complete, I'd like to style it up using jQuery Mobile.

I've dropped in tigbro's [jquery-mobile-angular-adapter](https://github.com/tigbro/jquery-mobile-angular-adapter) and as a (known) result, none of my previous routes are working.

There's a solution outlined [here](https://github.com/tigbro/jquery-mobile-angular-adapter#jqm-hashchange-handling-location-service-and-routes), but unfortunately I don't yet understand how to apply it to my routing. Where would the module.config line to set jqmCompatMode to false go?

My routes look like this currently:

```
angular.module('myApp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
            when('/finds', {templateUrl: 'views/finds-list.html', controller: FindListCtrl}).
            when('/add_find', {templateUrl: 'views/add-find.html', controller: AddFindCtrl}).
            when('/add_find/success', {templateUrl: 'views/add-find-success.html', controller: AddFindSuccessCtrl}).
            when('/find/:findId', {templateUrl: 'views/specific-find.html', controller: SpecificFindCtrl}).
            when('/find/edit/success', {templateUrl: 'views/edit-find-success.html', controller: EditFindSuccessCtrl}).
            when('/find/edit/:findId', {templateUrl: 'views/edit-find.html', controller: EditFindCtrl}).
            when('/find/delete/:findId', {templateUrl: 'views/delete-find.html', controller: DeleteFindCtrl}).
            otherwise({redirectTo: '/finds'});
            }]); 
```

Thanks a lot!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T12:26:10.320

他的自述文件有一个错字。他的意思是，你需要注入`$locationProvider`你的配置函数，并设置`$locationProvider.jqmCompatMode(false);`.

我向他的自述文件发送了一个拉取请求以修复错字。

例子：

```
myApp.config(function($routeProvider, $locationProvider) {
  $routeProvider.when(...);
  $locationProvider.jqmCompatMode(false);
}); 
```

# objective-c - CorePlot - graph reloadData is not working in 10.6.8

> ID：11444765
> 
> 赞同：1
> 
> 时间：2012-07-12T03:50:19.027
> 
> 标签：objective-c, macos, cocoa, osx-snow-leopard, core-plot

I have a application in which i update the core plot graph dynamically. Basically as new data points are added i adjust the x axis range with new plot range if data points goes beyond the boundaries of graph. Graphs is working fine in OS X 10.7.3/10.7.4 and even on mountain lion 10.8 but on 10.6.8 it does not reload the graph. All methods are being called like numberFor plot and numberOfRecordsForPlot in 10.6.8 but does not work. If i adjust the window size a bit or maximize and minimize it shows the graph.

So seems to me that manual invocation of [graph reloadData] is not working on 10.6.8\. Please suggest what to do.

Edit: I am using core plot 0.9 version and have also verified this issue with core plot 1.0 version using Plot Gallery sample and RealTime plot example .

Regards, MP

# jquery-mobile - 禁用 jQueryMobile 中的按钮 - SimpleDialog2 对话框

> ID：11444770
> 
> 赞同：0
> 
> 时间：2012-07-12T03:51:09.200
> 
> 标签：jquery-mobile

我正在使用 jQueryMobile - SimpleDialog2，如[http://dev.jtsage.com/jQM-SimpleDialog/demos2/button.html中所述](http://dev.jtsage.com/jQM-SimpleDialog/demos2/button.html)

但是，我想根据某些条件禁用按钮。

有没有办法在不破解 SimpleDialog2 代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:11:46.780

好的，我不确定这是否是最好的方法，但我设法通过这样做获得了“禁用”效果

```
close: (disabled)? false: true,
theme: (disabled)? "c": "b" 
```

在哪里“禁用”了我的状况。

希望这可以帮助某人

# c++ - 注入 dll 在 Windows XP 上不起作用

> ID：11444771
> 
> 赞同：3
> 
> 时间：2012-07-12T03:51:24.050
> 
> 标签：c++, code-injection, detours, dll-injection

所以我正在尝试制作一个注入器来注入我`Detours`用于挂钩游戏客户端的 dll，这很简单，但是有一个问题我不知道出了什么问题，它在 XP 上运行良好`Windows Vista+`但在 XP 上运行不正常......这是我的代码

```
//the injector
#ifndef INJECTOR_H_INCLUDED
#define INJECTOR_H_INCLUDED

#include <windows.h>
class Injector
{
private:
    STARTUPINFOA *Startup;
    PROCESS_INFORMATION *Process;
    char *Directory;

    BOOL Start(char *Application);
public:
    Injector(char *Directory);
    ~Injector(void);

    BOOL Attach(char *Application, char *Dll);
};

#endif // INJECTOR_H_INCLUDED

#include "Injector.h"
#include <string>
#include <cstdio>
using namespace std;

Injector::Injector(char *Directory)
{
    int Size = strlen(Directory) + 1;
    Directory = new char[Size];
    MoveMemory(Directory, Directory, Size);

    Startup = new STARTUPINFOA();
    Process = new PROCESS_INFORMATION();
}

Injector::~Injector(void)
{
    delete[] Directory;
    delete Startup;
    delete Process;
}

BOOL Injector::Start(char *Application)
{
    char CommandLine[256];
    sprintf(CommandLine, "%s\\%s blacknull", Directory, Application);
    return CreateProcessA(NULL, CommandLine, NULL, NULL, FALSE, NORMAL_PRIORITY_CLASS | CREATE_SUSPENDED, NULL, Directory, Startup, Process);
}
BOOL Injector::Attach(char *Application, char *Dll)
{
    if(Start(Application))
    {
        HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, Process->dwProcessId);
        if(hProcess != NULL)
        {
            int Length = strlen(Dll) + 1;

            LPVOID RemoteMemory = VirtualAllocEx(hProcess, NULL, Length, MEM_COMMIT, PAGE_READWRITE);
            if(RemoteMemory != NULL)
            {
                if(WriteProcessMemory(hProcess, RemoteMemory, Dll, Length, NULL))
                {
                    FARPROC hLoadLibrary = GetProcAddress(GetModuleHandleA("Kernel32"), "LoadLibraryA");

                    HANDLE hThread = CreateRemoteThread(hProcess, NULL, NULL, (LPTHREAD_START_ROUTINE)hLoadLibrary, RemoteMemory, NULL, NULL);
                    if(hThread != NULL)
                    {
                        WaitForSingleObject(hThread, 5000);
                        VirtualFreeEx(hProcess, RemoteMemory, 0, MEM_RELEASE);
                        CloseHandle(hProcess);
                        ResumeThread(Process->hThread);
                        return TRUE;
                    }
                }
                VirtualFreeEx(hProcess, RemoteMemory, 0, MEM_RELEASE);
            }
            CloseHandle(hProcess);
        }
        ResumeThread(Process->hThread);
        return FALSE;
    }
    else
    {
        printf("CreateProcessA failed with the following error: %d\n", GetLastError());
        return FALSE;
    }
    return FALSE;
}

//the main dll with Detours
// dllmain.cpp : Defines the entry point for the DLL application.
#include "stdafx.h"
#include "detours.h"
#include <WinSock2.h>
#include <shellapi.h> 

HINSTANCE (WINAPI *OriginalShell)(HWND hWnd, LPCSTR lpOperation, LPCSTR lpFile, LPCSTR lpParameters, LPCSTR lpDirectory, int nShowCmd) = ShellExecuteA;

HINSTANCE WINAPI DetouredShell(HWND hWnd, LPCSTR lpOperation, LPCSTR lpFile, LPCSTR lpParameters, LPCSTR lpDirectory, int nShowCmd)
{
    if(strcmp("http://co.91.com/signout/", lpFile) == 0)
    {
        lpFile = "http://www.google.com";
    }

    return OriginalShell(hWnd, lpOperation, lpFile, lpParameters, lpDirectory, nShowCmd);
} 

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
            DetourTransactionBegin();
            DetourUpdateThread(GetCurrentThread());
            DetourAttach(&(PVOID&)OriginalShell, DetouredShell);
            DetourTransactionCommit();
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
} 
```

两者都是用 VC++2010 构建的，所以它应该可以工作，但在 Windows XP 上它会启动游戏但 dll 没有被注入，我知道这里有什么问题！

编辑：我相信这是因为我的 XP 缺少 MSVCR100D.DLL ，有没有办法让我的 dll 不依赖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:55:50.760

要使您的程序不依赖于 msvcr100.dll/msvcr100d.dll，请打开项目属性->（配置属性）->常规->使用 MFC->选择“在静态库中使用 MFC”。另外将配置设置为“发布”。默认为“调试”。现在重新构建它。

或者您可以将其保留为默认“共享”，只需将配置更改为“发布”并将 msvcr100.dll 添加到您的程序中。（或安装[Visual C++ 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=5555)包）。发布构建需要更少的 MB。

免费 Visual C++ 版无法构建静态 MFC。仅限 Visual Studio Professional 或更高版本的付费或warez 版本。

# jquery-ui - jquery自动完成打开时如何禁用浏览器自动建议？

> ID：11444779
> 
> 赞同：5
> 
> 时间：2012-07-12T03:52:39.807
> 
> 标签：jquery-ui, autocomplete

当我在输入框中输入内容时，我的 Firefox 浏览器会根据我之前在此输入框中输入的内容自动提供建议。在此输入框上启用 jQuery 自动完成后，在自动完成加载其建议之前，浏览器的建议首先出现。如何禁用浏览器建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T03:56:21.120

您所要做的就是指定 autocomplete="off"

```
<input type="text" value="" id="searchBox" autocomplete="off"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:37:42.160

jQuery Autocomplete 会自动添加 autocomplete=off，你不需要自己做这个。

您是否使用了覆盖 autocomplete=off 的浏览器扩展？如果是这样，它将覆盖它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T03:56:45.887

如果您使用的是 HTML5 或普通 HTML，则可以使用以下代码：

```
<input name="username" size="40" autocomplete="off"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-18T09:51:25.143

最近比较好用`autocomplete=nope`。哪里`nope`是无效值。

使用 jQuery (UI) 自动完成插件，您可以使用以下内容将其从 更改`off`为`nope`：

```
$('#Element').autocomplete({
    create: function( event, ui ) {
        $(this).attr('autocomplete', 'nope');
    }
}); 
```

# c# - 使用正则表达式分配多个变量

> ID：11444780
> 
> 赞同：0
> 
> 时间：2012-07-12T03:52:42.877
> 
> 标签：c#, regex

我有一个格式为“0H0M0.25S”的 xml 持续时间，其中 H、M、S 代表小时、月、秒。现在我希望解析这个字符串并将其分配给整数小时、分钟和双秒。IE

```
string s="0H0M0.25S";//input
int hour, minute;double second;//variable to assign 
```

有没有办法使用正则表达式来实现它，它可以一次性分配所有这些变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:11:46.340

尝试这个：

```
var result = Regex.Match(s, @"(\d*)H(\d*)M(\d*.\d*)");
hour = int.Parse(result.Groups[1].Value);
minute = int.Parse(result.Groups[2].Value);
second = double.Parse(result.Groups[3].Value); 
```

您可能需要在解析双精度时补偿文化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:47:02.830

或者您可以完全放弃正则表达式并使用 `DateTime`：

```
 string datePattern = @"H\Hm\Ms.ff\S";
    var date = new DateTime();

    if (DateTime.TryParseExact("0H0M0.25S", datePattern, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out date))
    {
        // Everything you need is in 'date' in just one go :)
        int hour = date.Hour;
        int minute = date.Minute;
        double second = (double)date.Second + ((double)date.Millisecond / 1000);
    }
    else 
    {
        // Catch invalid datetime string here
    } 
```

# php - 正则表达式查找所有A标签里面不包含标签IMG吗？

> ID：11444783
> 
> 赞同：0
> 
> 时间：2012-07-12T03:54:11.413
> 
> 标签：php, regex

我有一个 HTML 代码：

```
<a href="/in-bai-viet--Choang-n20120711033726647.chn" target="_blank">In<img src="/Images/printer.png" alt="In bài viết này" />
</a>
<a target="_blank" rel="nofollow" href="http://ttvn.vn/">Thiên Lam - TTVN
</a>
<a href="/tinh-yeu-hon-nhan/20120709102954599/Chay-lang-.chn" title="'abc'">
abcd
</a> 
```

我需要删除所有不包含 img 标签的标签。我正在使用这个正则表达式：

```
preg_replace('/<a(.*)[^img](.*)<\/a>/si', '', $string); 
```

我也尝试`^(?!.+<img.+)<a href=\"?\'?.+\"?\'?>.+</a>$`过[正则表达式，如何找到其中不包含标签IMG的所有标签A？](https://stackoverflow.com/questions/2896088/regular-expression-how-to-find-all-tags-a-which-do-not-contain-tag-img-inside-i)但失败了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:06:52.337

使用这个：

```
(<a[^<]*>.*<img[^>]*>[^<]*</a>) 
```

并用空字符串替换。[它在这里测试](http://regexr.com?31gol)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T06:57:27.500

我注意到这个老问题没有答案，所以我想我会提供一个可靠的解决方案。*Ria的*答案没有在结束标记中转义 /，因此在链接的演示中会导致错误。此外，当提供的样本加倍（将其与自身连接）时，Ria 的正则表达式模式会失败，因为它过于贪婪并抓取多个*a*标签，更不用说它比我的模式慢 4 倍以上。

模式解释（[演示](https://regex101.com/r/HduHPd/1)）：

```
(               #Start capture group
    <a[^<]*>    #Greedily match the opening a tag, no other tags
    [^<]*       #Greedily match characters of any length before <img
    <img[^>]*>  #Greedily match the whole img tag
    [^<]*       #Greedily match characters of any length after <img
    <\/a>       #Match the closing a tag
)               #End capture group 
```

代码（[演示](http://sandbox.onlinephpfunctions.com/code/e21636854476966eed0708f7c35dcc2b6ec39175)）：

```
<?php
$string="<a href=\"/in-bai-viet--Choang-n20120711033726647.chn\" target=\"_blank\">In<img src=\"/Images/printer.png\" alt=\"In bài viết này\" />
</a>
<a target=\"_blank\" rel=\"nofollow\" href=\"http://ttvn.vn/\">Thiên Lam - TTVN
</a>
<a href=\"/tinh-yeu-hon-nhan/20120709102954599/Chay-lang-.chn\" title=\"'abc'\">
abcd
</a>
<a href=\"/in-bai-viet--Choang-n20120711033726647.chn\" target=\"_blank\">In<img src=\"/Images/printer.png\" alt=\"In bài viết này\" />
</a>
<a target=\"_blank\" rel=\"nofollow\" href=\"http://ttvn.vn/\">Thiên Lam - TTVN
</a>
<a href=\"/tinh-yeu-hon-nhan/20120709102954599/Chay-lang-.chn\" title=\"'abc'\">
abcd
</a>";
echo preg_replace('/(<a[^>]*>[^<]*<img[^>]*>[^<]*<\/a>)\r?\n?/si',NULL,$string);
?> 
```

输出：

```
<a target="_blank" rel="nofollow" href="http://ttvn.vn/">Thiên Lam - TTVN
</a>
<a href="/tinh-yeu-hon-nhan/20120709102954599/Chay-lang-.chn" title="'abc'">
abcd
</a>
<a target="_blank" rel="nofollow" href="http://ttvn.vn/">Thiên Lam - TTVN
</a>
<a href="/tinh-yeu-hon-nhan/20120709102954599/Chay-lang-.chn" title="'abc'">
abcd
</a> 
```

虽然这个问题可能已经在现实生活中得到解决和/或不再重要，但我只是想解决这个问题。

# php - PHP 查看过去并预测下一个数字

> ID：11444786
> 
> 赞同：-4
> 
> 时间：2012-07-12T03:54:26.747
> 
> 标签：php, numbers

好的，所以我有一个数字列表

1,5,8,0,4,3

我想做的是让 PHP 脚本查看数字并获得平均值。如果该平均值低于最后一个数字，则 + 最后一个数字乘以平均值的 1/2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:59:22.267

使用 对数组求和`array_sum`。将其除以数组的长度，使用`count`. 你现在有了平均值，我相信你可以算出其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:00:17.903

让我知道你是否要求这样的东西——

```
<?php

$a = array(1,5,8,0,4,3);

$b = array_sum($a);

if($b < end($a))
{
$c = end($a)+ ($b/2);
echo $c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:06:38.667

你可以使用`

```
$avg = array_sum($numlis);
$lastelem = end($numlis);
if(lastelem == FALSE){
  echo "empty array";
  exit(1);
}
elseif($avg < $lastelem) {
  $val = $lastelem + (.5*$avg);
  echo $val;
}
else {
  echo "avg is greater";
}` 
```

我包括了一些错误检查

# java - 我如何访问这个类

> ID：11444788
> 
> 赞同：0
> 
> 时间：2012-07-12T03:54:55.863
> 
> 标签：java, android

```
import android.content.Context;
import android.content.SharedPreferences;
import android.net.Uri;

public class LoadSettings 
{
public static void LoadMySettings   (Context ctx)
{
SharedPreferences sharedPreferences = ctx.getSharedPreferences("MY_SHARED_PREF", 0);
String strSavedMem1 = sharedPreferences.getString("gSendTo", "");
String strSavedMem2 = sharedPreferences.getString("gInsertInto", "");
String cCalId = sharedPreferences.getString("gCalID", "");

setInsertIntoStr(strSavedMem2);
setSendToStr(strSavedMem1);
}

private static String cSendToStr;
private static String cInsertIntoStr;
private int cCalId;
private Uri cCalendars;

public String getSendToStr()
{
    return this.cSendToStr;
}
public static void setSendToStr(String pSendToStr)
{
    cSendToStr = pSendToStr;
}
public String getInsertIntoStr()
{
return this.cInsertIntoStr;
}

public static void setInsertIntoStr(String pInsertIntoStr)
{
cInsertIntoStr = pInsertIntoStr;
}

} 
```

从调用类中，我尝试了很多当前的。

```
LoadSettings.LoadMySettings(this); 
```

但是当我尝试获取一些数据时。

```
textSavedMem1.setText(LoadSettings.getSendToStr()); 
```

我得到一个空错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T04:02:10.710

`LoadMySettings`不是一个类而是一个方法（所以它应该以小写开头，如果您遵循 Oracle/Sun 的 Java 语言命名约定）。

您确实可以通过调用来访问它，传递的上下文在`LoadSettings.loadMySettings(someContext)`哪里。`someContext`在您的示例中，我们不知道`this`指的是什么，所以您的错误可能就在那里。

* * *

然后当你这样做时：`textSavedMem1.setText(LoadSettings.getSendToStr());`

您调用一个非静态方法，因此应该使用一个实例，`LoadSettings`或者更可能考虑您的代码，您可以更改`getSendToStr`为：

```
 public static String getSendToStr()
    {
        return cSendToStr;
    } 
```

虽然这似乎是一个相当糟糕的设计。

也许如果您告诉我们更多有关您尝试做什么的信息，我们可以提供更多帮助，因此我们的回答只会让您更进一步。

* * *

**编辑：** *好的，我刚刚弄清楚你想要做什么......*

您需要回过头来学习*基本的 Java 概念*，并首先阅读*访问修饰符*和*构造函数*，以及一般 Java 中的 OO 语义。

将您的课程更改为：

```
public class LoadSettings 
{
    public LoadSettings(Context ctx)
    {
        SharedPreferences sharedPreferences =
            ctx.getSharedPreferences("MY_SHARED_PREF", 0);
        String strSavedMem1 = sharedPreferences.getString("gSendTo", "");
        String strSavedMem2 = sharedPreferences.getString("gInsertInto", "");
        String cCalId = sharedPreferences.getString("gCalID", "");

        setInsertIntoStr(strSavedMem2);
        setSendToStr(strSavedMem1);
    }

    private String cSendToStr;
    private String cInsertIntoStr;
    private int cCalId;
    private Uri cCalendars;

    public String getSendToStr()
    {
       return cSendToStr;
    }

    public void setSendToStr(String pSendToStr)
    {
        cSendToStr = pSendToStr;
    }

    public String getInsertIntoStr()
    {
        return cInsertIntoStr;
    }

    public void setInsertIntoStr(String pInsertIntoStr)
    {
        cInsertIntoStr = pInsertIntoStr;
    }

} 
```

并创建一个新实例`LoadSettings`：

```
LoadSettings mySettings = new LoadSettings(someContext); 
```

然后您可以正确调用：

```
textSavedMem1.setText(mySettings.getSendToStr()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:38:36.740

Haylem 拥有它的权利，但我只是想添加一条评论：

Java 中基本上有两种设计模式可用于您尝试做的事情。一种是静态类，其中所有方法和变量都是静态的，您可以访问它们，例如

```
LoadSettings.loadMySettings(this);
string = LoadSettings.getSendToStr()
// etc. 
```

另一种模式是“单例”类，您可以在其中创建该类的一个实例并访问该实例：

```
LoadSettings ls = new LoadSettings(this);
ls.loadMySettings();
string = ls.getSendToStr(); 
```

无论哪种方式都很好，但是您正在做的是两种方法的混合，它不会起作用。

# android - 什么是 logtype=100 或 logtype=500？

> ID：11444789
> 
> 赞同：0
> 
> 时间：2012-07-12T03:55:02.183
> 
> 标签：android

当我使用`ContentResolver.query(Calls.CONTENT_URI, null, Calls._ID = 'call ID here', null,null);`文本`(logtype=100 OR logtype=500)`被添加到查询中。

100 和 500 是什么意思？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T10:13:31.347

我想你有一台三星安卓设备。看这里：100 用于语音通话。 [SMS 被复制为 Calls(Samsung Galaxy S II)](https://stackoverflow.com/questions/11294563/sms-are-duplicated-as-callssamsung-galaxy-s-ii)

# c++ - 返回一个指针并传入一个 const 引用

> ID：11444790
> 
> 赞同：0
> 
> 时间：2012-07-12T03:55:13.260
> 
> 标签：c++, pointers, reference, httprequest, poco-libraries

[在尝试在这里](http://xjia.heroku.com/2011/09/11/learning-poco-a-simple-http-server/)了解 poco 网络库时，我遇到了以下代码段：

```
class MyRequestHandlerFactory : public HTTPRequestHandlerFactory
{
public:
  virtual HTTPRequestHandler* createRequestHandler(const HTTPServerRequest &)
  {
    return new MyRequestHandler;
  }
}; 
```

我无法理解方法 () 的返回类型和方法 ( `HTTPRequestHandler*`) 的参数`const HTTPServerRequest &`。

为什么返回类型是`HTTPRequestHandler`指针？是否`new MyRequestHandler`将地址返回到可以由其基类型引用的对象？

另外，我理解`const`用于使引用不可变，以便该方法不会改变被引用的对象，但是没有为引用类型提供名称并且它没有在`createRequestHandler`方法中使用。有人可以告诉我这里可能发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:35:52.563

**返回类型**

如果您查看“Learning Poco”代码网站，

```
class MyRequestHandler : public HTTPRequestHandler
{
    // ... removed code
}; 
```

MyRequestHandler 派生自 HTTPRequestHandler。所以，MyRequestHandler 是一个 HTTPRequestHandler 因为继承。所以返回一个指向 MyRequestHandler 的指针是有效的，因为它也是一个指向 HTTPRequestHandler 的指针。

**函数参数**

该片段令人困惑，因为它将参数指定为类型但没有变量名。它实际上与以下内容相同：

```
class MyRequestHandlerFactory : public HTTPRequestHandlerFactory
{
public:
  virtual HTTPRequestHandler* createRequestHandler(const HTTPServerRequest & notUsed)
  {
    return new MyRequestHandler;
  }
}; 
```

'notUsed' 变量是……未使用。所以你问，为什么会有争论？因为它覆盖了基类 HTTPRequestHandlerFactory 中声明的函数。这个函数将有一个参数`const HTTPServerRequest &`，因此它也必须出现在派生类的覆盖函数中（即使它没有被使用）。如果要在函数中使用“notUsed” `createRequestHandler()`，则`const`关键字确保它不能在内部更改`createRequestHandler()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:13:31.393

有两种方法可以返回访问对象而无需在 C++ 中复制对象的方法：返回指向它的指针或返回对它的引用。由于各种原因，指针往往是首选方法（例如，引用不可重新分配）。请注意，如果它返回`HTTPRequestHandler`而不是指向它的指针，则意味着将复制该对象。

不必提供参数名称，因为它没有被使用。必须提供类型，以便函数签名完整。同样，您在前向声明函数时也不必提供名称，因为编译器只关心类型和它们进入的顺序。

# php - 使用foreach和array_slice从PHP数组中获取随机值？

> ID：11444791
> 
> 赞同：0
> 
> 时间：2012-07-12T03:55:22.650
> 
> 标签：php, arrays, foreach, slice

如何随机化此代码的结果？

我有一个包含四个以上项目的数组，但我只想得到其中四个但不按顺序，我该怎么做？可以使用`foreach(array_slice`??

```
$i = 0;
foreach(array_slice($items_array,0,4) as $item) {
$output .= 'Item ID:'.$item['id'];
$i++;
} 
```

**我的阵列**

```
a:6:{i:0;a:4:{s:5:"title";s:17:"Spedition";s:2:"id";s:11:"ZCXbgH1JDt4";s:3:"url";s:40:"embed/ZCXbgH1JDt4";s:5:"image";s:38:"transport";}i:1;a:4:{s:5:"title";s:77:"DC...... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:57:35.533

```
$output = array_rand($items_array, 4); 
```

[`array_rand()`](http://php.net/array_rand)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:53:20.700

## Solved

```
$item = array_rand($items_array, 4); //get only four at random
$i=0;
while($i<=3) { // instead of 4 you set it at 3 because the counter starts at 0
$output = 'Item ID:'.$items_array[$item[$i]]['id'];             
$i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-23T06:01:34.143

从数组中获取随机值的完美方法

```
$numbers = range(1, 20);

shuffle($numbers); //this function will shuffle the array value

foreach ($numbers as $number) {
    echo "$number ";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T04:14:19.583

更好更简单的解决方案是使用[array_rand](http://php.net/manual/en/function.array-rand.php)

```
$array          =  array("foo", "bar", "hallo", "world");
$rand_keys  =  array_rand($array,1);
echo $array[$rand_keys]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-12T04:14:25.237

这应该为你做。

```
$i = 0;
foreach(array_rand($items_array, 4) as $item) {
  $output .= 'Item ID:'.$item['id'];
  $i++;
} 
```

# c++ - 不同的参数值和数字——这是合法的 C++ 吗？

> ID：11444793
> 
> 赞同：0
> 
> 时间：2012-07-12T03:55:24.797
> 
> 标签：c++, string, stl, iterator, tokenize

我正在尝试声明以下两个函数以将标记化字符串重新组合在一起（分解为向量或其他迭代器兼容的数据结构）：

```
std::string ComposeTokens(std::vector<std::string> Tokens);
std::string ComposeTokens(std::iterator first, std::iterator last); 
```

在实现文件（此处未提供——这很明显）中，Visual Studio 的 IntelliSense 没有将任一实现识别为有效，并表示两者都与两个声明冲突。编译会产生一条消息，指出迭代器必须有一个模板。

有什么办法可以做我想做的事吗？声明迭代器<字符串>是否有效，我需要指针等吗？STL 或 Boost 或其他一些库是否已经这样做了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T04:02:39.330

std::iterator 是一个基类模板，它至少需要定义一个类别和一个类类型。

您通常不会以这种方式定义迭代器 - 您使用模板定义它：

```
template <typename Iterator>
std::string ComposeTokens(Iterator first, Iterator last); 
```

此外，您可能希望通过引用传递您的向量：

```
std::string ComposeTokens(std::vector<std::string>& Tokens); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:00:24.653

只需将您的迭代器函数设为模板即可：

```
template <class Iterator>
std::string ComposeTokens(Iterator first, Iterator last); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:00:19.093

重载方法是完全可以的。VS 并没有抱怨这一点。

我认为这是在抱怨，因为您没有正确使用迭代器。当您询问有关编译器错误的问题时，最好发布实际错误，您会得到更好的答案。

至于迭代器，它们是模板化的并且`std::iterator`不完整，因此会出现错误。如果您的迭代器应该来自向量，那么请`std::vector<std::string>::iterator`改用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T04:00:50.063

[`std::iterator`](http://en.cppreference.com/w/cpp/iterator/iterator)不是你想的那样。

最简单的解决方案是：

```
template <typename Iter>
std::string ComposeTokens(Iter first, Iter last); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T04:08:40.427

您可以使用[std::accumulate](http://en.cppreference.com/w/cpp/algorithm/accumulate)：

```
#include <algorithm>
#include <vector>
#include <string>
#include <iostream>

int main() {
    std::vector<std::string> v{"put", "me", "together"};

    std::cout << std::accumulate(v.begin(), v.end(), std::string()) << std::endl;
} 
```

# ruby-on-rails - Rails respond_to 问题与 json

> ID：11444795
> 
> 赞同：1
> 
> 时间：2012-07-12T03:55:29.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我正在上传一些 HTML5，但遇到了一个我似乎无法弄清楚的问题。采取这个功能代码：

```
if @image.save
    render :json => {:status => "Successfully uploaded image!"}
else
    render :json => {:status => "Something went wrong with your upload!"}
end 
```

这行得通，它完全按照它应该做的。但是，当我添加 respond_to 来捕获 HTML 请求时，它完全失败了（尽管 HTML 部分有效。）

```
respond_to do |format|
    if @image.save
        format.html {redirect_to(edit_product_path(@image.product), :notice => "Your image was added successfully.")}
        format.json {render :status => "Successfully uploaded image!"}
    else
        format.html {redirect_to(edit_product_path(@image.product), :alert => "An error occurred while attempting to upload your image. Please try again.")}
        format.json {render :status => "Something went wrong with your upload!"}
    end 
end 
```

有什么想法可能是错的吗？我觉得我忽略了一些简单的事情。谢谢。

**编辑 - 问题已解决**

我认为这是我一直忽视的一件愚蠢的事情。原来请求是 HTML，而不是 JSON，这是因为上传需要内容类型为 multipart/form-data，respond_to 正在触发 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:00:56.940

渲染需要一个状态码，因此以下内容将不起作用

```
format.json {render :status => "Something went wrong with your upload!"} 
```

你可以把它写成

```
format.json {render :error => "Something went wrong with your upload!", :status => :bad_request } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:49:50.753

您需要将响应呈现为 json

```
# old
format.json {render :status => "Successfully uploaded image!"}

# new
format.json { render(:json => { :status => "Successfully uploaded image!" }) } 
```

# google-apps-script - 如何知道选择了哪个单选按钮？

> ID：11444798
> 
> 赞同：5
> 
> 时间：2012-07-12T03:55:45.810
> 
> 标签：google-apps-script

我在同一个 Radio 组中的 Ui 中有 3 个单选按钮。他们是，

```
var rbutton1 = app.createRadioButton('dist','5 miles');

var rbutton2 = app.createRadioButton('dist','10 miles');

var rbutton3 = app.createRadioButton('dist','25 miles'); 
```

在事件处理函数中，变量**e.parameter.dist**仅根据 rbutton3（最后一个单选按钮）是否被选中而给出 true 或 false。有什么方法可以确定准确选择了哪个单选按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:29:56.717

使单选按钮组像这样（按照设计意图）工作的唯一方法是在 a 中使用它们`FormPanel`并从表单的提交操作中查看 doPost 上的名称（在您的情况下为“dist”）。

不过，有一些解决方法，使用新的客户端处理程序，使其在任何面板上的单选按钮使用与从上大致相同。请在跟踪器上查看[此问题。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=506)您可能还想为这个问题加注*星*标，以跟踪更新并为它投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:06:04.100

我用：

```
eventData.parameter.source 
```

并使用 addClickHandler 获取更改。

您需要将其存储在某个地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:01:14.713

与此同时，我也想出了一个解决方法来设置单选按钮，在这个例子中，我使用了一个 listBox，但可以使用任何其他数据。

这是完整的代码：（在电子表格容器中测试）

```
function radiotest() {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var radioValue = app.createTextBox().setId('radioValue');
      radioValue.setId("radioValue").setName("radioValue");
  var listhandler = app.createServerHandler('listhandler').addCallbackElement(panel); 
  var list = app.createListBox().addChangeHandler(listhandler).setName('list');    
  for(var i = 1; i < 10; i++){
    var name = 'choice '+i;
    list.addItem('Activate '+name,name)
    var handler = app.createClientHandler().forTargets(radioValue).setText(name);
    panel.add(app.createRadioButton('radioButtonGroup',name).addValueChangeHandler(handler).setId(name));
  }
  panel.add(radioValue);
  var getit=app.createButton("Valide").setId("val");
  panel.add(getit).add(list)                   
  var handler = app.createServerHandler("valide")
  handler.addCallbackElement(panel)
  getit.addClickHandler(handler);
  app.add(panel);
SpreadsheetApp.getActiveSpreadsheet().show(app);// show app 
}
//
function valide(e){ ;// This function is called when key "validate" is pressed 
  var sh = SpreadsheetApp.getActiveSheet();
  var RadioButton = e.parameter.radioValue;               
  sh.getRange('A1').setValue(RadioButton);
  var app = UiApp.getActiveApplication();
  return app;
}​

function listhandler(e){ ;// This function is called when listBox is changed
  var sh = SpreadsheetApp.getActiveSheet();
  var app = UiApp.getActiveApplication();
  var listvalue = e.parameter.list
  var radioValue = app.getElementById('radioValue').setValue(listvalue)
  sh.getRange('A2').setValue(listvalue);
  var radiobutton = app.getElementById(listvalue)
  radiobutton.setValue(true)
return app;
}​ 
```

选定的单选按钮值来自文本框值，列表框允许选择激活哪个单选按钮......它显示如下

![在此处输入图像描述](../Images/68fdd01e4dc56969a9665ad4df0f91eb.png)

还有另一种方法，如[eddyparkinson](https://stackoverflow.com/users/1378888/eddyparkinson)所述，即使用 e.parameter.source 但这**仅**在处理程序直接分配给 radioButton 而不是使用“提交”按钮时才有效。在许多情况下，它可以使用并使代码（一点）更轻。这是此代码的测试

```
function radiotest2() {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var listhandler = app.createServerHandler('listhandler2').addCallbackElement(panel); 
  var list = app.createListBox().addChangeHandler(listhandler).setName('list');    
  var handler = app.createServerHandler("valide2")
  handler.addCallbackElement(panel)
  for(var i = 1; i < 10; i++){
    var name = 'choice '+i;
    list.addItem('Activate '+name,name)
    panel.add(app.createRadioButton('radioButtonGroup',name).setId(name).addClickHandler(handler));
  }
  panel.add(list)                   
  app.add(panel);
SpreadsheetApp.getActiveSpreadsheet().show(app);// show app 
}

function valide2(e){ ;// This function is called when a radioButton is selected
  var sh = SpreadsheetApp.getActiveSheet();
  var source = e.parameter.source;
  var radioValue = '';
  if(source.match('choice')=='choice'){radioValue=source}
  sh.getRange('A1').setValue(radioValue);
  var app = UiApp.getActiveApplication();
  return app;
}​

function listhandler2(e){ ;// This function is called when listBox is changed
  var sh = SpreadsheetApp.getActiveSheet();
  var app = UiApp.getActiveApplication();
  var listvalue = e.parameter.list
  sh.getRange('A2').setValue(listvalue);
  var radiobutton = app.getElementById(listvalue)
  radiobutton.setValue(true)
return app;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T21:42:34.403

这些按钮是否假设处于异或模式。如果是这样，它们需要具有相同的名称。查看 Serge 的[答案](https://stackoverflow.com/questions/10903963/strange-behaviour-when-using-radiobutton)以获得详细的解释和示例代码。

# c# - 函数 EF 中的错误

> ID：11444799
> 
> 赞同：0
> 
> 时间：2012-07-12T03:55:59.363
> 
> 标签：c#, entity-framework-4, sql-server-2008-r2

我在 SQL 中使用 Entity Framework + SQl 2008 + .Net Framework 4 + SP。

并在 EF 中为将值插入 sql 中的 crate 函数。

来自 EX：函数导入名称：InsertStudent

stroed 程序名称：InsertStudent

返回一个集合：标量：Int32

SP：

```
create proc InsertStudent
(
@DateReg datetime,
@stdLastName nvarchar(50),
@stdFirstName nvarchar(50),
@Description nvarchar(500)
)
INSERT INTO Student(DateReg,stdLastName,stdFirstName,[Description])
VALUES (@DateReg,@stdLastName,@stdFirstName,@Description) 
```

SQL 中的日期保存但函数 EF 中的错误：

存储数据提供程序返回的数据读取器没有足够的列用于请求的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:21:10.450

我认为您需要通过 sp 插入主键值。

```
create proc InsertStudent
 (
   @stdID int,
   @DateReg datetime,
   @stdLastName nvarchar(50),
   @stdFirstName nvarchar(50),
   @Description nvarchar(500)
)
INSERT INTO Student(stdID,DateReg,stdLastName,stdFirstName,[Description])
VALUES (@stdID,@DateReg,@stdLastName,@stdFirstName,@Description) 
```

# android - 让用户改变活动颜色

> ID：11444813
> 
> 赞同：0
> 
> 时间：2012-07-12T03:58:21.640
> 
> 标签：android, background

我有一个带有四个图像按钮（红色、蓝色、黄色、绿色）的活动。活动的默认背景颜色是绿色。单击按钮时如何更改活动颜色，例如，当用户单击红色按钮时，将背景颜色从绿色更改为红色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:15:00.700

默认情况下，设置父布局的颜色并在 Activity 中将其初始化为：

```
android:background="@color/green" or
layout.setBackgroundColor(Color.GREEN); onCreate of your activity

LinearLayout layout=(LinearLayout) findViewById(R.id.layout); 
```

在点击写入时初始化活动中的 4 个按钮：

```
layout.setBackgroundColor(Color.RED);
layout.setBackgroundColor(Color.BLUE);
layout.setBackgroundColor(Color.YELLOW);
layout.setBackgroundColor(Color.GREEN); 
```

其中 layout 是您的 xml 文件的主要布局

在特定按钮单击事件上设置上述颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:21:02.413

请为此使用以下代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/green" android:id="@+id/mRlayoutSplash">

</RelativeLayout> 
```

Java 文件

```
setContentView(R.layout.main);
RelativeLayout mainView = (RelativeLayout)findViewById(R.id.mRlayoutSplash);
// Set the color
mainView.setBackgroundColor(Color.red); 
```

# php - 谷歌图表 api - 饼图未显示

> ID：11444816
> 
> 赞同：1
> 
> 时间：2012-07-12T03:59:16.770
> 
> 标签：php, google-visualization

我正在尝试使用 Google Chart api 动态创建饼图。我正在从数据库中获取值。我不知道如何做到这一点。

```
$resultViewed = $this->model_report_product->getMostViewed();
        $stringResult ="var data= google.visualization.arrayToDataTable([ ['Product', 'Views'],";

     foreach($resultViewed as $results)
     {               
                 $stringResult = $stringResult . "['".$results['name']."',".$results['quantity']."],";
                 break;     
     }
     $stringResult .= "]);";

    $this->data['Viewed'] = $stringResult; 
```

当我运行它时，它给出了图表标题，但没有显示饼图，但它说没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:57:26.333

您不能在 php 到 html 之间传递内存中的变量。您必须将其打印出来才能将其传递给 html。所以你在哪里：

```
return $stringResult; 
```

你应该像这样打印出来：

```
print $stringResult; 
```

# python - Python：函数，传递参数

> ID：11444822
> 
> 赞同：-1
> 
> 时间：2012-07-12T03:59:50.047
> 
> 标签：python, function, arguments, static-methods

我是 python 新手，我在传递参数时遇到了愚蠢的问题。

```
class MyClass():

    @staticmethod
    def add_group(name, parent_id):
        print "add_group method, name: %s, parent_id: %s" % (name, parent_id) 
```

其他类方法

```
def task():
    print "task method, name: %s, group_id: %s" % (name, parent_id)
    MyClass.add_group(name, parent_id) 
```

输出：

```
task method, name: blabla, group_id: 15

add_group method, name: blabla, parent_id: (15L,) 
```

parent_id 参数发生了什么？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:24:41.413

在一种情况下您传入`15`，在另一种情况下您传入`(15L,)`（即第一个值为 15L 的元组，即 long(15) 或表示 15 的任意精度数。）

当数字变成非常大的值（例如 10**20）时，数字自然会转换为 long，但在这种情况下它非常小；我能想到的唯一方法会让你得到一个你没有预料到的时间是做类似的事情`10**20 - 10**20 + 15`，或者你的程序中的其他一些价值是很长的。

*编辑*：具体来说，您正在使用的库可能会返回程序中的其他值。

# ajax - 卸载谷歌地图 API？

> ID：11444826
> 
> 赞同：5
> 
> 时间：2012-07-12T04:00:16.173
> 
> 标签：ajax, google-maps, jquery, google-maps-api-3

我有一个使用 ajax 加载子页面的主页，其中一个子页面包含谷歌地图，因此它使用`<script>`标签加载谷歌地图 api：

`<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">`

我注意到这会将一堆 css 和 js 文件加载到我的主页和子页面中。当我单击主页中的不同链接时，我希望能够卸载所有这些文件并删除所有创建的 js 对象，即清理所有内容并返回原始状态。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T16:10:40.233

老问题..但这是我的解决方案：

```
// First getting rid of the google.maps object (to avoid memory leaks)
// Then, we are also removing google-maps related script tags we can identify.
// After unloaded, if maps is reloaded more than once on the same page; 
// we'll also get a warning in the console saying: "Warning: you have included the
// Google Maps API multiple times on this page. This may cause unexpected errors."
// This script will also avoid that warning.
if (window.google !== undefined && google.maps !== undefined) {
    delete google.maps;
    $('script').each(function () {
        if (this.src.indexOf('googleapis.com/maps') >= 0
                || this.src.indexOf('maps.gstatic.com') >= 0
                || this.src.indexOf('earthbuilder.googleapis.com') >= 0) {
            // console.log('removed', this.src);
            $(this).remove();
        }
    });
} 
```

***更新**：请注意，这不是一个完整的解决方案。可能存在复制/克隆/引用的对象。更好的方法是将地图沙箱化到 iframe 中并从 DOM 中删除 iframe。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T04:56:07.770

The answer to your question is actually a bit more complicated than you might think. A good question and set of answers that deal with many of the related details are at: [What is the Proper Way to Destroy a Map Instance?](https://stackoverflow.com/q/10485582/1314132).

I'm not sure from your question, but it sounds like you may have created a page that loads the Google Maps API more than one time (or could, depending on user choices) and you should avoid that entirely. Google admits there are memory leak bugs associated with reloading the map and strongly recommends against multiple map reloads. Google essentially does not support multiple map load use cases.

Check out some of the information available at the question link included above; it contains some good discussion and information.

## EDIT in Response to @Engineer's Comment:

Check out the [Google Maps API Office Hours May 9 2012 Video](https://www.youtube.com/watch?v=rUYs765QX-8&feature=plcp) where Chris Broadfoot and Luke Mahe from Google discuss: that they don't support use cases that involve reloading the map, that the API is intended to be loaded only once, and their acknowledgement that there is a memory leak bug. Set the playback to ~12:50 to view the section about destroying the map, problems with reloading the map, and suggestions they offer to avoid problems. Primarily, if you must hide and then show a map, they recommend reusing a single map instance.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:11:59.613

不是你想的那样。完成此操作的最简单方法是使用`iframe`加载应用程序的“重”部分。然后，当您摆脱`iframe`与地图关联的 CSS 和 JS 时。

在第 2 版中，Google Maps API 有一个`GUnload()`调用，但第 3 版 API 没有这个调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-12T06:09:28.560

使用香草 JavaScript：

```
if (window.google?.maps) {
  delete google.maps

  document.querySelectorAll("script").forEach((script) => {
    if (
      script.src.includes("googleapis.com/maps") ||
      script.src.includes("maps.gstatic.com") ||
      script.src.includes("earthbuilder.googleapis.com")
    ) {
      script.remove()
    }
  })
} 
```

# ruby-on-rails - 如何使用 map 来获取哈希而不是数组？

> ID：11444829
> 
> 赞同：3
> 
> 时间：2012-07-12T04:00:24.330
> 
> 标签：ruby-on-rails, ruby

我目前正在使用以下内容来获取表中某个字段的数组：

```
Classrooms.all.map(&:teacher_name) 
```

这将返回以下内容：

```
["James", "Josh", "Peter"] 
```

我想要的是一个哈希而不是像下面这样我可以包含teacher_id的东西：

```
{"James" => "1", "Josh" => "2", "Peter" => "3"} 
```

我尝试使用`Classrooms.all.map(&:teacher_name, &:teacher_id)`，但它给了我一个语法错误。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T04:08:26.873

用老式的方法来做：

```
pairs = Classrooms.all.map {|t|
  [t.teacher_name, t.teacher_id]  # [key, value]
}
hash = Hash[pairs]                # in /old/ ruby: Hash[*pairs.flatten] 
```

..或诸如此类。

请参阅[在 Ruby 中，如何从数组中生成散列？](https://stackoverflow.com/questions/2943422/in-ruby-how-do-i-make-a-hash-from-an-array)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-03T13:20:40.053

Ruby 2.6.0 启用了[更短的语法](https://rubyreferences.github.io/rubychanges/2.6.html#to_h-with-a-block)：

```
Classrooms.all.to_h { |t| [t.teacher_name, t.teacher_id] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T12:01:35.650

另一种选择是根本不使用每个。请改用 each_with_object。它专为您尝试做的事情而设计。

```
Classrooms.all.each_with_object({}) { |c, hash| hash[c.teacher_name] = c.teacher_id } 
```

# sql - 优化PG查询

> ID：11444831
> 
> 赞同：0
> 
> 时间：2012-07-12T04:00:46.897
> 
> 标签：sql, postgresql, optimization, pg

该查询在应用程序中经常使用，而且成本太高。

我可以做些什么来优化它并使总时间达到毫秒（而不是数百毫秒）？

笔记：

*   去除`DISTINCT`改进（低至~460ms），但我需要摆脱笛卡尔积:(（是的，展示更好的避免它的方法）
*   去除`OREDER BY name`改善，但不显着。

**查询：**

```
SELECT DISTINCT properties.*
FROM properties JOIN developments ON developments.id = properties.development_id

 -- Development allocations
 LEFT JOIN allocation_items   AS dev_items  ON dev_items.development_id = properties.development_id
 LEFT JOIN allocations        AS dev_allocs ON dev_items.allocation_id = dev_allocs.id

 -- Group allocations
 LEFT JOIN properties_property_groupings ppg  ON ppg.property_id = properties.id
 LEFT JOIN property_groupings pg              ON pg.id = ppg.property_grouping_id
 LEFT JOIN allocation_items prop_items        ON prop_items.property_grouping_id = pg.id
 LEFT JOIN allocations prop_allocs            ON prop_allocs.id = prop_items.allocation_id

WHERE
  (properties.status <> 'deleted') AND ((
    properties.status <> 'inactive'
    AND (
     (dev_allocs.receiving_company_id = 175 OR prop_allocs.receiving_company_id = 175)
     AND developments.status = 'active'
    )
    OR developments.company_id = 175
   )
   AND EXISTS (
     SELECT 1 FROM development_participations dp
     JOIN participations p ON p.id = dp.participation_id
     WHERE dp.allowed
       AND p.user_id = 387 AND p.company_id = 175
       AND dp.development_id = properties.development_id
     LIMIT 1
   )
)
ORDER BY properties.name 
```

**解释分析**

```
 Unique  (cost=72336.86..72517.53 rows=1606 width=4336) (actual time=703.766..710.920 rows=219 loops=1)
   ->  Sort  (cost=72336.86..72340.87 rows=1606 width=4336) (actual time=703.765..704.698 rows=5091 loops=1)
         Sort Key: properties.name, properties.id, properties.status, properties.level, etc etc (all columns)
         Sort Method: external sort  Disk: 1000kB
         ->  Nested Loop Left Join  (cost=0.00..69258.84 rows=1606 width=4336) (actual time=25.230..366.489 rows=5091 loops=1)
               Filter: ((((properties.status)::text <> 'inactive'::text) AND ((dev_allocs.receiving_company_id = 175) OR (prop_allocs.receiving_company_id = 175)) AND ((developments.status)::text = 'active'::text)) OR (developments.company_id = 175))
               ->  Nested Loop Left Join  (cost=0.00..57036.99 rows=41718 width=4355) (actual time=25.122..247.587 rows=99567 loops=1)
                     ->  Nested Loop Left Join  (cost=0.00..47616.39 rows=21766 width=4355) (actual time=25.111..163.827 rows=39774 loops=1)
                           ->  Nested Loop Left Join  (cost=0.00..41508.16 rows=21766 width=4355) (actual time=25.101..112.452 rows=39774 loops=1)
                                 ->  Nested Loop Left Join  (cost=0.00..34725.22 rows=21766 width=4351) (actual time=25.087..68.104 rows=19887 loops=1)
                                       ->  Nested Loop Left Join  (cost=0.00..28613.00 rows=21766 width=4351) (actual time=25.076..39.360 rows=19887 loops=1)
                                             ->  Nested Loop  (cost=0.00..27478.54 rows=1147 width=4347) (actual time=25.059..29.966 rows=259 loops=1)
                                                   ->  Index Scan using developments_pkey on developments  (cost=0.00..25.17 rows=49 width=15) (actual time=0.048..0.127 rows=48 loops=1)
                                                         Filter: (((status)::text = 'active'::text) OR (company_id = 175))
                                                   ->  Index Scan using index_properties_on_development_id on properties  (cost=0.00..559.95 rows=26 width=4336) (actual time=0.534..0.618 rows=5 loops=48)
                                                         Index Cond: (development_id = developments.id)
                                                         Filter: (((status)::text <> 'deleted'::text) AND (SubPlan 1))
                                                         SubPlan 1
                                                           ->  Limit  (cost=0.00..10.00 rows=1 width=0) (actual time=0.011..0.011 rows=0 loops=2420)
                                                                 ->  Nested Loop  (cost=0.00..10.00 rows=1 width=0) (actual time=0.011..0.011 rows=0 loops=2420)
                                                                       Join Filter: (dp.participation_id = p.id)
                                                                       ->  Seq Scan on development_participations dp  (cost=0.00..1.71 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=2420)
                                                                             Filter: (allowed AND (development_id = properties.development_id))
                                                                       ->  Index Scan using index_participations_on_user_id on participations p  (cost=0.00..8.27 rows=1 width=4) (actual time=0.001..0.001 rows=1 loops=3148)
                                                                             Index Cond: (user_id = 387)
                                                                             Filter: (company_id = 175)
                                             ->  Index Scan using index_allocation_items_on_development_id on allocation_items dev_items  (cost=0.00..0.70 rows=23 width=8) (actual time=0.003..0.016 rows=77 loops=259)
                                                   Index Cond: (development_id = properties.development_id)
                                       ->  Index Scan using allocations_pkey on allocations dev_allocs  (cost=0.00..0.27 rows=1 width=8) (actual time=0.001..0.001 rows=1 loops=19887)
                                             Index Cond: (dev_items.allocation_id = id)
                                 ->  Index Scan using index_properties_property_groupings_on_property_id on properties_property_groupings ppg  (cost=0.00..0.29 rows=2 width=8) (actual time=0.001..0.001 rows=2 loops=19887)
                                       Index Cond: (property_id = properties.id)
                           ->  Index Scan using property_groupings_pkey on property_groupings pg  (cost=0.00..0.27 rows=1 width=4) (actual time=0.001..0.001 rows=1 loops=39774)
                                 Index Cond: (id = ppg.property_grouping_id)
                     ->  Index Scan using index_allocation_items_on_property_grouping_id on allocation_items prop_items  (cost=0.00..0.36 rows=6 width=8) (actual time=0.001..0.001 rows=2 loops=39774)
                           Index Cond: (property_grouping_id = pg.id)
               ->  Index Scan using allocations_pkey on allocations prop_allocs  (cost=0.00..0.27 rows=1 width=8) (actual time=0.001..0.001 rows=1 loops=99567)
                     Index Cond: (id = prop_items.allocation_id)
 Total runtime: 716.692 ms
(39 rows) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:23:41.010

回答我自己的问题。

这个查询有两个大问题：

1.  6 `LEFT JOIN`s 产生笛卡尔积（即使在小数据集上也会产生数十亿条记录）。
2.  `DISTINCT`必须对十亿条记录数据集进行排序。

所以我不得不消除那些。

我这样做的方法是用 2 个子查询替换 JOIN（这里不会提供它，因为它应该很明显）。

结果，实际时间从 ~700-800ms 下降到 ~45ms，这或多或少是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:01:13.917

大部分时间都花在磁盘排序上，你应该通过改变 work_mem 来使用 RAM：

```
SET work_mem TO '20MB'; 
```

并`EXPLAIN ANALYZE`再次检查

# ruby-on-rails - 为什么属于关联返回一个 Fixnum 对象

> ID：11444836
> 
> 赞同：0
> 
> 时间：2012-07-12T04:01:19.473
> 
> 标签：ruby-on-rails, mysql2

导轨 3.2.2 mysql2

我有以下关系，

```
class TalkingCase < ActiveRecord::Base

      belongs_to :medical_case

end

class MedicalCase < ActiveRecord::Base

     has_many :talking_cases
end 
```

在控制台中：

```
a=TalkingCase.first

a.medical_case 
```

有时它返回 0，有时它工作正常。

我可以使用 MedicalCase.find(xx) 来获取 medical_case 对象。

有人遇到这个问题吗？

以下是控制台输出：

加载开发环境（Rails 3.2.2）

```
[1] pry(main)> a=TalkingCase.first

  TalkingCase Load (0.4ms)  SELECT `talking_cases`.* FROM `talking_cases` LIMIT 1
=> #<TalkingCase id: 15, user_id: 231, talking_id: 7, nickname: "史丽", medical_case_id: 42, medical_case_name: "糖尿病肾病之一", created_at: "2012-06-21 03:38:36", updated_at: "2012-06-21 03:38:36">(this is ok)

[2] pry(main)> a.medical_case

  MedicalCase Load (0.5ms)  SELECT `medical_cases`.* FROM `medical_cases` WHERE `medical_cases`.`id` = 42 ORDER BY id desc LIMIT 1

=> 1 
```

（这是陌生人，我需要 medical_case 对象）

架构中的表如下：

```
create_table "talking_cases", :force => true do |t|
    t.integer  "user_id"
    t.integer  "talking_id"
    t.string   "nickname"
    t.integer  "medical_case_id"
    t.string   "medical_case_name"
    t.datetime "created_at",        :null => false
    t.datetime "updated_at",        :null => false
 end

 create_table "medical_cases", :force => true do |t| 
  t.string   "title",                                      :null => false
  t.string   "bianhao",                                    :null => false
  t.integer  "age"
  t.string   "gender",         :limit => 1          
  t.integer  "user_id",                                    :null => false
  t.integer  "is_shared",      :limit => 1
  t.integer  "is_elite",       :limit => 1
  t.integer  "is_recommend",   :limit => 1
  t.string   "share_reason"                                           
  t.string   "other_cate_des"                                         
  t.string   "keywords"
  t.integer  "comments_count",              :default => 0
  t.integer  "click_count",                 :default => 0
  t.integer  "tap",                         :default => 0
  t.datetime "created_at",                                 :null => false
  t.datetime "updated_at",                                 :null => false
  t.integer  "fans_count"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:10:23.823

请`MedicalCase`也从模型中指定关联的类型

```
class MedicalCase < ActiveRecord::Base
  has_one :talking_case
end 
```

# android - 安卓模拟器无法安装apk

> ID：11444837
> 
> 赞同：3
> 
> 时间：2012-07-12T04:01:20.607
> 
> 标签：android, android-emulator

我正在尝试通过 adb shell 在 ICS 模拟器中安装一个 apk（从一个站点下载），但它给出了以下错误：

失败 [INSTALL_FAILED_UID_CHANGED]

可能是什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T18:48:56.310

只需 rm -r 有问题的数据目录。如果您在安装时遇到此错误，您只需从 ADB shell 运行“rm -r /data/data/com.app.class”。如果您想尝试保留数据，您可以找到正确的 UID，然后找到“chown -R UID:UID /data/data/com.app.class”。

在 Android 中，处理安装应用程序的源代码部分是 PackageManagerService。由于 Android 源是公开的，因此很容易看出 Android 会在哪里抛出 INSTALL_FAILED_UID_CHANGED 错误。如果以下情况为真：您正在安装的包已经有一个数据目录，并且该数据目录的权限与分配给该包的 UID 不同，您将收到该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:11:53.703

首先从模拟器中卸载之前版本的应用程序，然后重试。您可以通过访问系统设置 > 应用程序 > 管理应用程序并选择应用程序来执行此操作。

如果应用程序仍然无法安装，则启动模拟器并选择擦除用户数据选项。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-12T06:44:46.223

打开命令提示符并在其中写入以下代码：

```
adb devices 
```

这将列出已连接或处于活动状态的设备数量。将您的 apk 复制到您的系统文件夹中

```
adb -s DEVICE_NAME install YOUR_APK_NAME 
```

通过这个，您将能够通过在上面的行中提供设备名称来在设备上安装您的特定 apk。

# javascript - 触发方向更改事件时出现错误的屏幕高度

> ID：11444838
> 
> 赞同：4
> 
> 时间：2012-07-12T04:01:29.697
> 
> 标签：javascript, mobile

我编写了下面的代码来检查我的手机屏幕高度，当我将它旋转到`Portrait`或时`Landscape`。

```
window.addEventListener("orientationchange", function(event) {
  rotateScreen();
}, false);

function rotateScreen() {
  alert(window.orientation)
  alert($(window).height())
} 
```

当我将它旋转到 时`Portrait`，我得到 0, 294。当我将它旋转到 时`Landscape`，我得到 90, 419。数字反转，我试图将它包裹起来，`$(document).ready()`但它不起作用。

```
$(document).ready(function(){
  alert($(window).height())
}) 
```

看起来当我将手机旋转到 时`Portrait`，我得到了 的高度`Landscape`，当我将手机旋转到 时`Landscape`，我得到了 的高度`Portrait`。有人可以建议如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-08T15:26:02.280

在**orientationchange**事件之后触发**resize**事件。但是，**调整大小**也可能由其他事情触发，例如显示虚拟键盘。

 ****所以为了解决这个问题，我们可以先监听一个**方向变化**，一旦发生，我们就可以添加一个**调整大小**的监听器。一旦**orientationchange**完成，它将触发我们的**resize**事件。完成后，我们将删除调整大小侦听器以防止它被错误触发

```
$(window).on('orientationchange', function() {
    var orientationChange = function(evt) {
        rotateScreen();
        $(window).off('resize', orientationChange);
    }
    $(window).on('resize', orientationChange);
}); 
```

这有效地创建了一种伪 post:orientationChange 事件。（如果可以的话，我可能会避免使用超时）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:11:00.867

添加 setTimeout 可以解决问题，请尝试以下代码：

```
function rotateScreen() {
    window.setTimeout(function() {
       alert(window.orientation)
       alert($(window).height())
    }, 500);

} 
```****

# c++ - frame_dummy 在分析的上下文中是什么意思？

> ID：11444847
> 
> 赞同：17
> 
> 时间：2012-07-12T04:02:28.747
> 
> 标签：c++, g++, profiling

在使用 gprof 分析我编写的 C++ 程序的过程中，我注意到绝大多数执行时间都花在了函数“frame_dummy”上。更准确地说，来自 gprof 输出的平面配置文件中的第一个条目显示了 76.38% 的采样时间花费在和 24611191 次调用名为 frame_dummy 的函数上。

简而言之，我试图理解 frame_dummy 指的是什么——因为我没有任何这样命名的函数——以及这对我的优化工作意味着什么。

虽然不太可能相关，但我应该补充一点，该程序旨在使用多重网格算法求解泊松方程，并采用 MPI 来并行化任务。但是，尽管存在 MPI 函数调用，但上面提到的 gprof 输出是从仅运行单个进程中得出的。我还应该注意，我的程序除了 MPI 之外没有任何依赖项，并且是使用 g++ 4.6.1 编译的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T17:52:07.183

这里有一个很好的解释：http: [//dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)。但是我不确定为什么你的程序会在 frame_dummy 中花费这么多时间，或者为什么它会被调用这么多次。

也许您的二进制文件中的调试信息在某种程度上已经损坏，或者被 gprof 误读了？或者 gprof 可能会被 MPI 混淆？这里有一些尝试：在 gdb 中运行你的程序，并在 frame_dummy 函数上设置一个断点。看看它是否真的被调用了 2400 万次，如果是，那么它是从什么地方调用的。

另外，您能否确认这是 crtbegin.o 中的 frame_dummy，而不是其他一些 frame_dummy？

这是[crtbegin.c 中 frame_dummy 的源代码](http://code.google.com/p/nacl-thumb2/source/browse/src/third_party/crt/crtbegin.c?spec=svn6f45988698c7ec0be175e263d6e6654e3c67c68a&r=6f45988698c7ec0be175e263d6e6654e3c67c68a)——根据我对代码的阅读，它应该只被调用一次。

另外，我假设您的程序运行并产生正确的结果？（特别是，如果您的程序中存在内存错误，那么您可能会得到一些非常奇怪的行为。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T03:33:09.337

我遇到了同样的问题，这是我从 gprof 的输出：

```
 %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 52.00     16.27    16.27   204000     0.08     0.08  frame_dummy
 47.46     31.12    14.85   418000     0.04     0.07  f2
  0.51     31.28     0.16    21800     0.01     1.42  f1
  0.03     31.29     0.01     1980     0.01    14.21  f5 
```

就我而言，当我使用`gcc -Os`而不是编译时它得到了解决`gcc -O3`：

```
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 53.12     22.24    22.24   200000     0.11     0.11  f4
 45.65     41.36    19.11   598000     0.03     0.03  f2
  0.69     41.65     0.29    20000     0.01     1.45  f3
  0.45     41.84     0.19    39800     0.00     0.32  f1
  0.10     41.88     0.04                             evaluate 
```

也就是说，gprof 误`f4`认为`frame_dummy`.

# linux - 块文件写入有什么好处

> ID：11444851
> 
> 赞同：3
> 
> 时间：2012-07-12T04:03:18.490
> 
> 标签：linux, performance, io

我想知道逐块写入文件的好处是什么。我认为它会减少 io 操作。但是在 linux 中，环境数据无论如何都会进入页面缓存和后台守护进程进行物理磁盘写入（如果我错了，请纠正我）。在那种环境中，块写入的优点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:12:39.220

如果我正确理解您的问题，那么您是在询问使用较大块的优势，而不是逐个字符地编写。

您必须考虑每次使用系统调用（例如[`write()`](http://linux.die.net/man/2/write)）本身具有最低成本，无论正在做什么*。*此外，它可能会导致调用进程受到[上下文切换](http://en.wikipedia.org/wiki/Context_switch)的影响，这有其自身的成本，并且还允许其他进程使用 CPU，从而导致更大的延迟。

因此——即使我们忘记了每个操作都可能立即进入磁盘的直接和同步 I/O 模式——从性能的角度来看，通过移动更大的数据块来减少这些恒定成本的影响是有意义的。

`dd`用于传输 1,000,000 字节的简单演示：

```
$ dd if=/dev/zero of=test.txt count=1000000 bs=1 # 1,000,000 blocks of 1 byte
1000000+0 records in
1000000+0 records out
1000000 bytes (1.0 MB) copied, 1.55779 s, 642 kB/s
$ dd if=/dev/zero of=test.txt count=100000 bs=10 # 100,000 blocks of 10 bytes
100000+0 records in
100000+0 records out
1000000 bytes (1.0 MB) copied, 0.172038 s, 5.8 MB/s
$ dd if=/dev/zero of=test.txt count=10000 bs=100 # 10,000 blocks of 100 bytes
10000+0 records in
10000+0 records out
1000000 bytes (1.0 MB) copied, 0.0262843 s, 38.0 MB/s
$ dd if=/dev/zero of=test.txt count=1000 bs=1000 # 1,000 blocks of 1,000 bytes
1000+0 records in
1000+0 records out
1000000 bytes (1.0 MB) copied, 0.0253754 s, 39.4 MB/s
$ dd if=/dev/zero of=test.txt count=100 bs=10000 # 100 blocks of 10,000 bytes
100+0 records in
100+0 records out
1000000 bytes (1.0 MB) copied, 0.00919108 s, 109 MB/s 
```

作为一个额外的好处，使用更大的数据块可以让 I/O 调度器和文件系统的分配器对您的实际工作负载做出更准确的估计。

# objective-c - 当用户单击选项卡式界面中的不同选项卡时，nsfetchedresultscontroller 是否应设置为 nil？

> ID：11444854
> 
> 赞同：1
> 
> 时间：2012-07-12T04:03:45.553
> 
> 标签：objective-c, ios

我正在编写一个带有选项卡式界面和几个 uitableviews 的应用程序。我在 viewdidload 中加载 nsfetchedresultscontroller，当用户从一个选项卡切换到另一个选项卡时，我没有将 nsfetchedresultscontroller 设置为 nil，这样当用户返回时，数据仍然会被加载。这是一个好习惯吗？如果我每次都必须重新加载数据，那会有点慢，因为我在 tableview 中加载了很多数据。否则我将不得不为表格视图设置某种分页机制。

谢谢！

# hadoop - 将第三方 jars 添加到 hadoop 作业的问题

> ID：11444855
> 
> 赞同：0
> 
> 时间：2012-07-12T04:03:50.977
> 
> 标签：hadoop, mapreduce, hive, hdfs

我正在尝试将第三方 jar 添加到 hadoop 作业中。我正在使用该`DistributedCache.addFileToClassPath`方法添加每个罐子。我可以看到已`mapred.job.classpath.files`在作业 xml 文件中正确填充。

-libjars 对我也不起作用（很可能是因为我们没有使用 toolrunner）

有什么建议，可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T13:06:07.407

在 HADOOP_CLASSPATH 中添加 Jar

```
 vi $HADOOP_HOME/etc/hadoop/hadoop-env.sh 
```

添加最后一行

```
export HADOOP_CLASSPATH=/root/hadoop/extrajars/java-json.jar:$HADOOP_CLASSPATH 
```

“/root/hadoop/extrajars/java-json.jar”是 linux box 本身而不是 HDFS 上的路径

重启hadoop

命令

```
hadoop classpath 
```

应该在类路径中显示 jar

现在像往常一样运行 MR 作业

```
hadoop jar <MR-program jar> <MR Program class> <input dir> <output dir> 
```

它将按预期使用文件。

# html - 冲突的 CSS

> ID：11444857
> 
> 赞同：0
> 
> 时间：2012-07-12T04:04:16.857
> 
> 标签：html, css, stylesheet

我想使用这个 CSS 和 HTML [http://jsfiddle.net/6VntE/](http://jsfiddle.net/6VntE/)但许多选择器与以前使用的选择器（body、H1、div）冲突。因此，虽然它在 jfiddle 中有效，但在我的网站中却无效。

有没有办法将这个 css 与网站的其他部分分开，以便它可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:14:56.207

如果您不想将 css 样式应用于所有 div，那么您应该使用 classes 或 id 来设计元素，而不是使用标签名称。

假设如果你这样做

```
h1{font-size:10x;} 
```

那么它将设置所有**h1**的样式，但是如果您只想设计一些元素，请编写

```
.style_h1{font-size:10px;} 
```

并添加到要设置样式的**h1标签**`class="style_h1"`

**或者**

使用名为 parent 的类向您的**h1**添加父级，然后在该设计中将所有 h1

```
.parent h1{font-size:10px;} 
```

并在您的**h1**标签中添加一个具有父类的父元素

# android - QT Necessitas - 链接 gnu-libstdc++ 时出现神秘的 ctype_base.h 错误

> ID：11444875
> 
> 赞同：0
> 
> 时间：2012-07-12T04:09:28.120
> 
> 标签：android, linux, qt, stl, android-ndk

我在 Qt Creator 的 Necessitas 版本中启动了一个 Qt 移动应用程序项目，专门针对 API 15。从那里，我有一些我在 Eclipse 中编写的 C++ 源代码，我将它们添加到项目中。当然，有很多未定义的参考错误（由于 Qt Necessitas 的性质，默认情况下不查看操作系统的 include/lib 路径），所以我做了一些谷歌搜索并找到了修复。

现在，在这似乎工作之后，我似乎遇到了一些奇怪的错误，这些错误涉及 GNU 的 Android/ARM stlport。

谷歌搜索了一下，发现[了这个](https://groups.google.com/forum/?fromgroups#!topic/android-platform/lPdIzWUNlRs)。如果您阅读了最后一篇文章，那么 OP 最终会非常难过，并且很难找出问题所在。我的错误似乎有点不同，但仍然相对于他/她的同盟。

基本上，我真的可以使用一些指导来解决这个问题。如果有人对此有任何想法或遇到同样的问题，我将非常感谢您的建议！

底部是 ctype_base.h 的 pastebin。

谢谢！

**解决问题**

所以，因为我正在链接 gnu-libstdc++（`.so`版本，AFAIK），我收到了以下错误`ctype_base.h`：

```
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:44: error: '_U' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:45: error: '_L' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:46: error: '_U' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:46: error: '_L' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:47: error: '_N' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:48: error: '_X' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:48: error: '_N' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:49: error: '_S' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:50: error: '_P' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:50: error: '_U' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:50: error: '_L' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:50: error: '_N' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:50: error: '_B' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:51: error: '_P' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:51: error: '_U' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:51: error: '_L' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:51: error: '_N' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:52: error: '_C' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:53: error: '_P' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:54: error: '_U' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:54: error: '_L' was not declared in this scope
/opt/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include/bits/ctype_base.h:54: error: '_N' was not declared in this scope 
```

因为 Qt 的 Necessitas NDK 似乎落后了几个版本，所以我决定使用我收到的最新版本。当然，Necessitas 还没有完全稳定（仍然在 Alpha 3，IIRC 中），所以我不能期待太多，但是在 Eclipse 中经历了一些非常不必要的错误之后，我真的不想回到那里再次。不要误会我的意思，如果你在做 Java 开发，那绝对是要走的路。只是...不适用于 C++ ;)

**这也是我的`.pro`文件：**

```
# Add files and directories to ship with the application 
# by adapting the examples below.
# file1.source = myfile
# dir1.source = mydir
DEPLOYMENTFOLDERS = # file1 dir1

symbian:TARGET.UID3 = 0xED47BA19

# Smart Installer package's UID
# This UID is from the protected range 
# and therefore the package will fail to install if self-signed
# By default qmake uses the unprotected range value if unprotected UID is defined for the application
# and 0x2002CCCF value if protected UID is given to the application
#symbian:DEPLOYMENT.installer_header = 0x2002CCCF

# Allow network access on Symbian
symbian:TARGET.CAPABILITY += NetworkServices

# If your application uses the Qt Mobility libraries, uncomment
# the following lines and add the respective components to the 
# MOBILITY variable. 
# CONFIG += mobility
# MOBILITY +=

SOURCES += main.cpp mainwindow.cpp \
    GLTriangleDemo.cpp \
    Debug.cpp \
    Shader.cpp
HEADERS += mainwindow.h \
    GLincludes.hpp \
    GLDemo.hpp \
    Entry.hpp \
    Debug.hpp \
    Triangle.hpp \
    Shape.hpp \
    Shader.hpp \
    GLTriangleDemo.hpp
FORMS += mainwindow.ui

#includes

INCLUDEPATH += /usr/include

#external deps
external_libs.files += /usr/lib

x86 {
      external_libs.path = /libs/x86
} else: armeabi-v7a {
      external_libs.path = /libs/armeabi-v7a
} else {
      external_libs.path = /libs/armeabi
}

INSTALLS += external_libs

LIBS += -llog -lGLESv2 -lgnustl_shared

# Please do not modify the following two lines. Required for deployment.
include(deployment.pri)
qtcAddDeployment()

OTHER_FILES += \
    android/res/values-ja/strings.xml \
    android/res/values-it/strings.xml \
    android/res/values-pt-rBR/strings.xml \
    android/res/values-el/strings.xml \
    android/res/values-nl/strings.xml \
    android/res/values-ro/strings.xml \
    android/res/values-id/strings.xml \
    android/res/values-fr/strings.xml \
    android/res/values-rs/strings.xml \
    android/res/values-de/strings.xml \
    android/res/drawable-hdpi/icon.png \
    android/res/values-pl/strings.xml \
    android/res/values-ru/strings.xml \
    android/res/values-es/strings.xml \
    android/res/values-ms/strings.xml \
    android/res/values/strings.xml \
    android/res/values/libs.xml \
    android/res/drawable/icon.png \
    android/res/drawable/logo.png \
    android/res/values-zh-rTW/strings.xml \
    android/res/layout/splash.xml \
    android/res/values-fa/strings.xml \
    android/res/drawable-mdpi/icon.png \
    android/res/drawable-ldpi/icon.png \
    android/res/values-nb/strings.xml \
    android/res/values-zh-rCN/strings.xml \
    android/res/values-et/strings.xml \
    android/version.xml \
    android/AndroidManifest.xml \
    android/src/org/kde/necessitas/origo/QtApplication.java \
    android/src/org/kde/necessitas/origo/QtActivity.java \
    android/src/org/kde/necessitas/ministro/IMinistroCallback.aidl \
    android/src/org/kde/necessitas/ministro/IMinistro.aidl 
```

而且，这是ctype_base.h 的[pastebin](http://pastebin.com/C1ESwgu3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:34:53.290

我遇到了同样的问题。就我而言，问题似乎是由环境变量引起的，即“CPLUS_INCLUDE_PATH”和“C_INCLUDE_PATH”。这些变量包含指向我的系统 C++ 的路径，我猜这些路径会干扰 armabi 平台的包含。

解决方案：我只是取消设置这两个环境。变量。

雷吉斯

PS：我编辑了我之前的答案，但仍然标记为“已删除”，所以我重新发布。我不适合这样做，但我看不到另一种方式来发布我的贡献。

# html - Rails collection_select 未在参数中发送

> ID：11444877
> 
> 赞同：1
> 
> 时间：2012-07-12T04:09:53.777
> 
> 标签：html, ruby-on-rails, ruby, forms, simple-form

我有一种感觉，某处只是一个简单的错误，但对于我的生活，我找不到它。我有一个过滤器模型，在它的 _form.html.erb 中有各种选择和集合选择。单击提交按钮时，我在控制器中使用了调试器，发现有几个选择框没有在参数中发送它们的值。这是删除按钮和其他不相关内容的代码：

```
<%= simple_form_for(@filter) do |f| %>
   <div class="inputs">
      <%= f.input :name %>
      <%= f.input :scope, :collection => ["Global", "Group", "Private"], :include_blank => false %><br>
      <p style="margin-left:190px;"><b>Users:</b></p>
      <div style="float: left; width: auto; margin-left: 190px;">
         <%= collection_select(:user, :id, User.all, :id, :full_name, {}, {:multiple => true, :size => 10}) %>
      </div>
      <%= select(:selected_users, :id, [], {}, {:size => 10, :style => "width:160px;", :multiple => true}) %>

      <p style="margin-left:190px;"><b>Positions:</b></p>
      <div style="float: left; width: auto; margin-left: 190px;">
         <%= collection_select(:position, :id, Position.all, :id, :name, {}, {:size => 10, :multiple => true}) %>
      </div>
      <div style="float: left; width: auto; margin-left: 60px; margin-top: -120px;">
         <%= collection_select(:selected_positions, :id, [], :id, :name, {}, {:size => 10, :style => "width:160px;", :multiple => true}) %>
      </div>

      <p style="margin-left:190px;"><b>States:</b></p>
      <%= select("selected_statuses", "status", ["Approved", "Pending", "Deny"], {}, {:multiple => true, :size => 3, :style => "margin-left:190px;"})%>
   </div>
<% end %> 
```

在我的参数中，我得到 [:filter][:scope]、[:filter][:name]、[:user][:id]、[:position][:id] 和 [:selected_statuses][:status] ，但其余的都没有。为什么选定状态的选择有效，而选定用户的选择无效？或者一个位置collection_selects 但不是另一个？我很困惑。如果重要的话， selected_users 和 selected_positions 为空白的原因是因为这些选项是使用 javascript 添加的。

编辑：在 javascript 之后，HTML（省略了不必要的位）是

```
<div class="inputs">
   <div class="input string optional">
      <label class="string optional" for="filter_name"> Name</label>
      <input id="filter_name" class="string optional" type="text" size="50" name="filter[name]" maxLength="255">
   </div>
   <div class="input select optional">
      <label class="select optional" for="filter_scope"> Scope</label>
      <select id="filter_scope" class="select optional" name="filter[scope]">
         <option value="Global">Global</option>
         <option value="Private">Private</option>
      </select>
   </div>
   <p style="margin-left:190px;">
      <b>Users:</b>
   </p>
   <div style="float: left; width: auto; margin-left: 190px;">
      <select id="user_id" size="10" name="user[id][]" multiple="multiple">
         <option value="2">Ethan Webworm</option>
         <option value="3">Matthew Barkbeetle</option>
         <option value="4">Sara Caterpillar</option>
         <option value="5">Olivia Daggermoth</option>
      </select>
   </div>
   <select id="selected_users_id" style="width:160px;" size="10" name="selected_users[id][]" multiple="multiple">
      <option value="2">Ethan Webworm</option>
      <option value="3">Matthew Barkbeetle</option>
      <option value="4">Sara Caterpillar</option>
   </select>

   <div style="float:left; width:auto; margin-left: 190px;>
      <select id="position_id" size="10" name="position[id][]" multiple="multiple">
         <option value="1">Manager</option>
         <option value="2">CEO</option>
         <option value="3">VP</option>
      </select>
   </div>
   <div style="float: left; width: auto; margin-left: 60px; margin-top: -120px;">
      <select id="selected_positions_id" style="width:160px;" size="10" name="selected_positions[id][]" multiple="multiple">
         <option value="1">Manager</option>
      </select>
   </div>

   <select id="selected_statuses_status" style="margin-left:190px;" size="3" name="selected_statuses[status][]" multiple="multiple">
      <option value="Approved">Approved</option>
      <option value="Pending">Pending</option>
      <option value="Deny">Deny</option>
   </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:58:49.503

我刚刚找到了解决方案，这确实是一个简单的尴尬*错误*. 现在我只需要在发送表单之前找到一种方法来选择所有选项。谢谢您的帮助！

# jquery - 在mvc3中单击按钮弹出视图？

> ID：11444878
> 
> 赞同：2
> 
> 时间：2012-07-12T04:10:01.373
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

当我单击 mvc3 中视图页面上的提交按钮时，我想显示弹出窗口。我认为可以通过通过课程来完成，但即使这样做我也无法弹出。请解释如何使用 jquery 在按钮单击中显示弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:33:21.977

还可以使用 Jquery[触发](http://api.jquery.com/trigger/)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:19:58.907

这应该工作得很好

```
<script type="text/javascript">
    $(function () {
        $(".your-button-class").click(function() {
            // do popup
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:32:48.197

如果您使用的是提交按钮，那么您应该使用表单提交事件而不是单击提交按钮。

如果您使用的是简单的输入类型按钮，那么您可以使用点击事件来显示弹出窗口。

第三种情况，如果您想使用提交按钮，则将您的表单设置为 ajax 表单。并使用 beforeSend 函数显示弹出窗口。

由于目前我正在使用 Colorbox 弹出窗口，因此您可以使用以下语法来显示弹出窗口：

```
$.colorbox.open(); 
```

# entity-framework - EF Code First 4.2 中每个具体类型映射问题的表

> ID：11444879
> 
> 赞同：0
> 
> 时间：2012-07-12T04:10:04.417
> 
> 标签：entity-framework, ef-code-first

我收到一个`EntityType 'User' has no key defined. Define the key for this EntityType`错误。

模型：

```
public abstract class KeyedEntityBase
{
    public int ID { get; private set; }
}

public class User : KeyedEntityBase
{
    public string UserName { get; private set; }
    public string EmailAddress { get; private set; }
} 
```

语境：

```
public class LSBPortalContext : DbContext
{
    public LSBPortalContext()
        : base("LSBPortalDB")
    {
    }

    public DbSet<User> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("User");
        });

        base.OnModelCreating(modelBuilder);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:12:41.973

问题是我实际上并没有映射 KeyedEntityBase 类。一旦我这样做了，它就一切正常。

# javascript - 我使用 flotr 的饼图 html 文件无法正常工作

> ID：11444881
> 
> 赞同：0
> 
> 时间：2012-07-12T04:10:23.860
> 
> 标签：javascript, html, flotr

我只是想使用 flotr（用于开发各种图表的开源 javascript）绘制一个简单的饼图。但是我给出的代码有一点作用。图表已绘制并且爆炸属性、水平线和垂直线都可以正常工作。但是鼠标跟踪器和图例不起作用。我想我在代码中犯了一些错误。但我无法清除它。请任何人帮助我。提前致谢。

```
<html>
<head>
<script type="text/javascript" src="prototype-1.6.0.2.js"></script>
<script type="text/javascript" src="flotr.js"></script>
</head>
    <body>
        <div id="container" style="width:600px;height:300px;" ></div>

        <script type="text/javascript">
        (function basic_pie(container) {
  var
    d1 = [[0, 4]],
    d2 = [[0, 3]],
    d3 = [[0, 1.03]],
    d4 = [[0, 3.5]],
    graph;
   graph = Flotr.draw('container', [
    { data : d1, label : 'Comedy' },
    { data : d2, label : 'Action' },
    { data : d3, label : 'Romance',
      pie : {
        explode : 50
      }
    },
    { data : d4, label : 'Drama' }
  ], {
    HtmlText : false,
    grid : {
      verticalLines : false,
      horizontalLines : false
    },
    xaxis : { showLabels : false },
    yaxis : { showLabels : false },
    pie : {
      show : true, 
      explode : 6
    },
    mouse : { track : true },
    legend : {
      position : 'se',
      backgroundColor : '#D2E8FF'
    }
  });
})(document.getElementById("editor-render-0"));
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T02:51:52.253

您可以查看浏览器的类型，您使用的是哪种浏览器？如果是 IE，你应该添加

```
meta http-equiv="X-UA-Compatible" content="IE=edge" 
```

在`<head>`段的第一行，并添加

```
[if IE]> script type="text/javascript" src="../lib/excanvas.js">script <![endif] 
```

为了`<head>`兼容性。你应该添加一行：

```
var container = document.getElementById(' container '); 
```

in`function basic_pie(container)`的第一行以容器元素为目标。

（注意：我的一些答案字符串被stackoverflow网站弄乱了。抱歉）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:30:42.237

您的图例配置可能有错误，我将其删除并且图例正确显示。看看：http: [//jsfiddle.net/Kpmcn/](http://jsfiddle.net/Kpmcn/)

# mysql - 哪个更有效-> hibernate criteria-mysql 查询？

> ID：11444883
> 
> 赞同：1
> 
> 时间：2012-07-12T04:10:29.023
> 
> 标签：mysql, hibernate, spring-mvc

我正在使用 spring 和 hibernate - mySql 开发一个基于 Web 的应用程序。我有一个限制，即用户名必须是唯一的。那么哪种方式更有效呢？使用 a`hibernate criteria`来检查用户是否存在？或者`unique`在数据库中定义然后使用try catch？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:51:18.360

你应该同时使用两者。Hibernate 查询将允许在插入用户之前从功能上检查用户不存在，并返回适当的结果或引发适当的异常。这比依赖一个唯一的约束要好，因为这个约束会导致事务回滚，并带有一个隐藏在异常堆栈中的神秘错误消息。

但是您还应该有一个唯一性约束来保证唯一性，以防两个并发线程同时检查用户不存在，然后同时插入同一个用户。

对于不需要动态组合的简单查询，我会使用 HQL 而不是 Criteria：恕我直言，更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:54:18.280

只需使用条件并返回 true 或 false：

```
public boolean clientNameValidation(String clientName) {

        Criteria criteriaOfClient = criteria();

        criteriaOfClient.add(Restrictions.eq("clientName", clientName));

        List<Client> results = (List<Client>) criteriaOfClient.list();
        if (results.size() > 0) {
            return true;
        } else {
            return false;
        }
    } 
```

# android - Android 小部件无法接收 DATE_CHANGED 消息

> ID：11444884
> 
> 赞同：6
> 
> 时间：2012-07-12T04:10:54.297
> 
> 标签：android, date, android-intent, widget

我正在开发一个日历小部件，当我手动更改日期时，我无法收到 DATE_CHANGED**消息**。

问题是什么？

我在清单中的代码是：

```
<receiver android:name="com.widget.calendar.CalendarWidgetProvider">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        <action android:name="android.intent.action.DATE_CHANGED"/>
    </intent-filter>
    <!-- This specifies the widget provider info -->
    <meta-data android:name="android.appwidget.provider"
        android:resource="@xml/widgetinfo" />
</receiver> 
```

我试图像这样接收它：

```
@Override
public void onReceive(Context ctx, Intent intent) {
    final String action = intent.getAction();
    if (action.equalsIgnoreCase("android.intent.action.DATE_CHANGED")) {
        Log.e(TAG, "Date changed.....!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    }
    super.onReceive(ctx, intent);
} 
```

但是当我手动更改系统日期时，不会打印日志。

谢谢！

**更新：**

我用[Intent.ACTION_TIME_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_CHANGED)解决了这个问题，这确实是 DATE_CHANGED 的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T07:50:40.867

使用此意图：

```
 <intent-filter>
        <action android:name="android.intent.action.TIME_SET"/>
 </intent-filter> 
```

并收到：

```
@Override
public void onReceive(Context ctx, Intent intent) {
    final String action = intent.getAction();
    if (action.equalsIgnoreCase("android.intent.action.TIME_SET")) {
        Log.e(TAG, "Date changed.....!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    }
    super.onReceive(ctx, intent);
} 
```

# c - OPROFILE 无法获取性能数据

> ID：11444885
> 
> 赞同：5
> 
> 时间：2012-07-12T04:10:56.630
> 
> 标签：c, performance, oprofile

我正在使用 OPROFILE 来收集一些性能数据。但我遇到了麻烦。

**这是我的外壳：**

```
~ # rm -f /root/.oprofile/daemonrc
~ # opcontrol --setup --no-vmlinux
~ # opcontrol --init
~ # opcontrol --reset
~ # opcontrol --start
~ # opcontrol --status

Daemon running: pid 14909    
Separate options: none
vmlinux file: none    
Image filter: none    
Call-graph depth: 0

~ # opcontrol --shutdown

Stopping profiling.
Killing daemon.

~ # opreport

error: no sample files found: profile specification too strict?

~ # tree /var/lib/oprofile/

/var/lib/oprofile/
├── abi
├── complete_dump
├── jitdump
├── opd_pipe
└── samples
    ├── current
    │   └── stats
    │       ├── bt_lost_no_mapping
    │       ├── cpu0
    │       │   ├── backtrace_aborted
    │       │   ├── sample_invalid_eip
    │       │   ├── sample_lost_overflow
    │       │   └── sample_received
    │       ├── event_lost_overflow
    │       ├── multiplex_counter
    │       ├── sample_lost_no_mapping
    │       └── sample_lost_no_mm
    └── oprofiled.log

5 directories, 13 files

~ # dmesg |grep oprofile

oprofile: using NMI interrupt.

~ # uname -a

Linux localhost.localdomain 2.6.32-220.4.2.el6.x86_64 #1 SMP Tue Feb 14 04:00:16 GMT 2012 x86_64 x86_64 x86_64 GNU/Linux

~ # cat /proc/cpuinfo 

processor   : 0    
vendor_id   : GenuineIntel   
cpu family  : 6    
model       : 44    
model name  : Intel(R) Xeon(R) CPU           E5620  @ 2.40GHz   
stepping    : 2    
cpu MHz     : 2400.085   
cache size  : 12288 KB   
fpu     : yes    
fpu_exception   : yes    
cpuid level : 11    
wp      : yes   
flags       : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc up arch_perfmon pebs bts xtopology tsc_reliable nonstop_tsc aperfmperf unfair_spinlock pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes hypervisor lahf_lm ida arat epb dts    
bogomips    : 4800.17    
clflush size    : 64   
cache_alignment : 64   
address sizes   : 40 bits physical, 48 bits virtual   
power management: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T10:26:48.443

某些 CPU 类型不提供`hardware support`使用硬件性能计数器所需的功能。在这些机器上，OProfile 回退到使用`timer interrupt for profiling`，回退到使用实时时钟中断来收集样本。

您可以通过使用 timer=1 模块参数来强制使用定时器中断。如果 OProfile 是作为内核模块构建的，那么您必须使用 modprobe 命令传递 'timer=1' 参数。在执行 'opcontrol --init' 或编辑 opcontrol 命令调用 modprobe 以传递 'timer=1' 参数之前执行此操作

`modprobe oprofile timer=1`

然后继续您的分析过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T13:53:38.763

我在基于 RHEL6 的发行版上遇到了类似的问题。在某个时候，我开始使用[perf](https://perf.wiki.kernel.org/index.php/Tutorial)，通过它我可以获得分析器报告和带注释的源代码。

# javascript - 涉及 post json 调用的同步函数调用，其中一个函数应该在另一个函数成功时成功

> ID：11444886
> 
> 赞同：1
> 
> 时间：2012-07-12T04:11:00.567
> 
> 标签：javascript, jquery, json, post

我有两个函数，其中一个包括多个 json 调用，它们是自然发布的。

我希望这些是同步的。也就是说，一个应该只在上一篇文章完成后运行（如果所有帖子都完成并成功，我希望第二个函数触发）。

代码结构有点像这样：

```
 $.getSomeData = function() {
    $.postJSON("iwantdata.htm",{data:data},function(data)){
    });

    $.postJSON("iwantmoredata.htm",{data:data},function(data)){
    });
    });

    $.useSomeData = function() {
}); 
```

必须适用于后续的`useSomeData`json 调用。

谁能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:14:20.577

[延迟对象*^([docs])*](http://api.jquery.com/category/deferred-object/)非常适合这一点。不幸的是，您的代码示例包含语法错误，并且不清楚调用是如何嵌套的。因此，我不确定您是要一个接一个地运行两个 Ajax 调用还是并行运行，但任何一种方式都是可能的。

这里有两个例子。查看文档以获取更多信息并尝试使用它。

**注意：** `.postJSON`不是内置的 jQuery 方法，我在这里假设您从`$.ajax`(or `$.post`) 函数返回返回值。

**并行 Ajax 调用：**

```
$.getSomeData = function() {
    var a = $.postJSON("iwantdata.htm", {data:data});
    var b = $.postJSON("iwantmoredata.htm", {data:data});

    // return a new promise object which gets resolved when both calls are
    // successful
    return $.when(a, b);
};

// when both calls are successful, call `$.useSomeData`
// it will have access to the responses of both Ajax calls
$.getSomeData.done($.useSomeData); 
```

*看：* [`$.when`](http://api.jquery.com/jQuery.when/)

**链式 Ajax 调用：**

...第一个调用的响应是第二个调用的输入。这只是一个例子，当然你可以传递任何你想要的数据。

```
$.getSomeData = function() {
    return $.postJSON("iwantdata.htm", {data:data}).pipe(function(response) {
        // execute the second Ajax call upon successful completion 
        // of the first one
        return $.postJSON("iwantmoredata.htm", {data:response});
    });
};

// if both Ajax calls are successful, call `$.useSomeData`
// it will have access to the response of the second Ajax call
$.getSomeData.done($.useSomeData); 
```

*看：* [`deferred.pipe()`](http://api.jquery.com/deferred.pipe/)

如果您有更复杂的逻辑，您还可以创建、解析或拒绝您自己的延迟对象。查看文档中的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:42:52.517

您可以嵌套它们，在第一个的完成功能中开始第二个，依此类推：

```
$.getSomeData = function() {
   $.postJSON("iwantdata.htm",{data:data},function(data) {
       $.postJSON("iwantmoredata.htm",{data:data},function(data)){
           // use the data here
       });
   });
}; 
```

在处理异步函数时，不能编写如下代码：

```
$.getSomeData();
$.useSomeData(); 
```

根据定义，第一个是异步的，因此在调用第二个函数时它还没有完成，并且在异步操作完成之前，javascript 无法停止 JS 执行。

您可以将您的 use 函数传递给 get 函数，然后在数据可用时调用它，作为上述示例的补充，如下所示：

```
$.getSomeData = function(fn) {
   $.postJSON("iwantdata.htm",{data:data},function(data) {
       $.postJSON("iwantmoredata.htm",{data:data},function(data)){
           fn(data);
       });
   });
}; 
```

然后，您将拥有一个`getSomeData(useFn)`函数，该函数将在所有数据准备就绪时调用该函数的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:29:25.453

所以基本上你想要这样的东西：

```
function chainPost(url1, url2, initialInput, func) {
    $.post(url1, {data: initialInput})
        .done(function (initialOutput) {
            $.post(url2, {data: initialOutput})
                .done(function (secondOutput) {
                    func(initialOutput, secondOutput);
                });
        });
}

chainPost("iwantdata.htm", "iwantmoredata.htm", 0, function (first, second) {
    alert(first);
    alert(second);
}); 
```

# objective-c - 将 NSMutableDictionary 的键/值存储到另一个 NSMutableDictionary

> ID：11444894
> 
> 赞同：0
> 
> 时间：2012-07-12T04:11:52.667
> 
> 标签：objective-c, ios, nsmutabledictionary

所以我有三个像这样的 NSMutableDictionary：

.h 文件

```
NSMutableDictionary *myContainer;
NSMutableDictionary *myD1;
NSMutableDictionary *myD2;

@property (nonatomic, retain) NSMutableDictionary *myContainer;
@property (nonatomic, retain) NSMutableDictionary *myD1;
@property (nonatomic, retain) NSMutableDictionary *myD2; 
```

.m 文件

```
@synthesize myContainer;
@synthesize myD1;
@synthesize myD2; 
```

（ 在里面 ）

```
self.myContainer = [[NSMutableDictionary alloc] init];
self.myD1        = [[NSMutableDictionary alloc] init];
self.myD2        = [[NSMutableDictionary alloc] init]; 
```

现在我想将字典中的值或位置从 myD1 和 myD2 添加到 myContainer

伪：

```
[myD1 setValue:foo forKey:@"bar"];
[foo retain];

[myD2 setValue:hello forKey:@"world"];
[hello retain]; 
```

所以我的问题是如何将特定的键/值添加到 myD1 和/或 myD2 到 myContainer？然后也从它们那里检索键/值？

下面看起来像我需要的，但我是新手，我的格式不同。

来自 PHP 这里是我将如何构建它：

```
$myContainer   = array();
$myD1          = array();
$myd2          = array();

$myD1['bar']   = 'foo';
$myD2['world'] = 'hello';

$myContainer['common_index'] = array($myD1, $myD2);

// Alternative
//$myContainer['common_index'] = array(0 => $myD1, 1 => $myD2);

// Retrieving values from $myD1
echo "Value: ".$myContainer['common_index'][0]['bar']."\n";
echo "Value: ".$myContainer['common_index'][1]['world']."\n";

// Alternative
foreach($myContainer['common_index'] as $array) {
    foreach($array as $index => $value) {
        echo "Index: {$index} Value: {$value} \n";
    }
} 
```

输出：

```
Value: foo
Value: hello
Index: bar Value: foo 
Index: world Value: hello 
```

有关的：

*   [NSMutableDictionary，在 Objective-C 编程中具有单键保存多个值](https://stackoverflow.com/questions/3437881/nsmutabledictionary-with-single-key-holding-many-values-in-objective-c-programmi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:54:08.673

Add your myD1 myD2 dictionaries in an Array and set it to the myContainer dictionary as below :

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:myD1, myD2, nil];
[myContainer setObject:array forKey:@"common_index"]; 
```

And for retreiving them :

```
NSMutableDictionary *myD1Retrieved = [[myContainer objectForKey:@"common_index"] objectAtIndex:0];
NSMutableDictionary *myD2Retrieved = [[myContainer objectForKey:@"common_index"] objectAtIndex:1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:35:22.283

向 myContainer 添加数据：

```
[myContainer setValue:[mD1 valueForKey:@"bar"] forKey:@"bar"];
[myContainer setValue:[mD2 valueForKey:@"world"] forKey:@"world"]; 
```

从 myContainer 中检索：

```
Object *firstObject = [myContainer valueForKey:@"world"];
Object *secondObject = [myContainer valueForKey:@"bar"]; 
```

`Object`代表世界和酒吧键的值类型。

继续..

# .net - 使用 DebugDiag/Windbg 调试 .NET Web 应用程序

> ID：11444898
> 
> 赞同：1
> 
> 时间：2012-07-12T04:12:14.813
> 
> 标签：.net, windbg

我正在使用 DebugDiag/Windbg 调试 .NET Web 应用程序。Windbg 说这是内存不足，有时是堆损坏。他们都是内存泄漏吗？还是它们不同？

我使用 !dump -stat 生成了以下统计信息。

```
65242d0c     5057      1496872 System.Data.DataTable
7a5e7e3c   103017      1648272 System.Collections.Specialized.NameObjectCollectionBase+NameObjectEntry
04b061e0   115367      2307340 System.Globalization.TokenHashValue
04b02cc0    41384      2915500 System.Int32[]
001370d0      864      3434044      Free
04aeaf9c     1056      3981696 System.DateTime[]
04b03274     8193      4916640 System.Collections.Hashtable+bucket[]
65244ff8    46539      6887772 System.Data.DataColumn
65247840      947      7849684 System.Collections.Generic.Dictionary`2+Entry[[System.Data.DataRow, System.Data],[System.Data.DataRowView, System.Data]][]
0510c73c     5377     11093004 System.Decimal[]
6524756c   470137     11283288 System.Data.DataRowView
65246e44     5683     19363428 System.Data.RBTree`1+Node[[System.Int32, mscorlib]][]
65245dcc    12841     26850796 System.Data.RBTree`1+Node[[System.Data.DataRow, System.Data]][]
04b01754      718     27034404 System.Char[]
04ad42f4    88499     30078640 System.Object[]
6524508c   595901     38137664 System.Data.DataRow
04b03594     1580    113347752 System.Byte[]
04b00b24  4177510    244502408 System.String
Total 6236336 objects 
```

我刚刚使用 !eeheap –gc 检查了堆，它显示如下：

```
 Total LoaderHeap size: 0x226000(2,252,800)bytes
=======================================
Number of GC Heaps: 1
generation 0 starts at 0x2e2ffbc4
generation 1 starts at 0x2e2a1228
generation 2 starts at 0x02891000
ephemeral segment allocation context: none
 segment    begin allocated     size            reserved
02890000 02891000  0385fb60 0x00fceb60(16,575,328) 0001b000
149a0000 149a1000  15978d14 0x00fd7d14(16,612,628) 00026000
15aa0000 15aa1000  16a93fc8 0x00ff2fc8(16,723,912) 00010000
16f50000 16f51000  17f45010 0x00ff4010(16,728,080) 002d0000
131a0000 131a1000  1419edec 0x00ffddec(16,768,492) 0000b000
19f50000 19f51000  1af4c524 0x00ffb524(16,758,052) 00001000
1cf50000 1cf51000  1df46210 0x00ff5210(16,732,688) 000c0000
1f010000 1f011000  2000faa0 0x00ffeaa0(16,771,744) 00002000
231a0000 231a1000  2418e804 0x00fed804(16,701,444) 01000000
241a0000 241a1000  25192da0 0x00ff1da0(16,719,264) 01000000
21010000 21011000  2200974c 0x00ff874c(16,746,316) 01190000
251a0000 251a1000  2617a4c0 0x00fd94c0(16,618,688) 00002000
2b1a0000 2b1a1000  2c190078 0x00fef078(16,707,704) 01000000
2a1a0000 2a1a1000  2b192750 0x00ff1750(16,717,648) 01000000
271a0000 271a1000  2816b5d0 0x00fca5d0(16,557,520) 01000000
281a0000 281a1000  29192e34 0x00ff1e34(16,719,412) 00fed000
321a0000 321a1000  3319a878 0x00ff9878(16,750,712) 01000000
1bf50000 1bf51000  1cf26a0c 0x00fd5a0c(16,603,660) 01000000
2c1a0000 2c1a1000  2d193fec 0x00ff2fec(16,723,948) 00002000
1e010000 1e011000  1efda8d0 0x00fc98d0(16,554,192) 00006000
331a0000 331a1000  3419d264 0x00ffc264(16,761,444) 00002000
2f1a0000 2f1a1000  3019ade0 0x00ff9de0(16,752,096) 00002000
311a0000 311a1000  32196010 0x00ff5010(16,732,176) 00005000
3a1a0000 3a1a1000  3b19f8d8 0x00ffe8d8(16,771,288) 0060a000
2e1a0000 2e1a1000  2e363bd0 0x001c2bd0(1,846,224) 00712000
Large object heap starts at 0x03891000
 segment    begin allocated     size            reserved
03890000 03891000  048741d0 0x00fe31d0(16,658,896) 0001b000
121a0000 121a1000  13177f70 0x00fd6f70(16,609,136) 00028000
111a0000 111a1000  12194060 0x00ff3060(16,724,064) 0000b000
3f1a0000 3f1a1000  40177460 0x00fd6460(16,606,304) 00028000
391a0000 391a1000  3a1555d0 0x00fb45d0(16,467,408) 0004a000
3c1a0000 3c1a1000  3d197228 0x00ff6228(16,736,808) 00008000
3e1a0000 3e1a1000  3f171ee0 0x00fd0ee0(16,584,416) 0002e000
3d1a0000 3d1a1000  3e192790 0x00ff1790(16,717,712) 0000d000
381a0000 381a1000  3917d070 0x00fdc070(16,629,872) 00022000
291a0000 291a1000  2a18c620 0x00feb620(16,692,768) 00013000
3b1a0000 3b1a1000  3b7a9560 0x00608560(6,325,600) 009f6000
Total Size  0x224c061c(575,407,644)
------------------------------
GC Heap Size  0x224c061c(575,407,644) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:15:55.820

您有 244 mb 字符串，113 mb 字节数组，因此您的进程可能内存不足（取决于本机堆、模块、堆栈等占用了多少内存）。

尝试弄清楚为什么首先使用这么多内存，然后尝试减少它。从网上下载perfview，一个很好的性能诊断工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:35:28.927

仅从单独的输出中无法诊断这一点`!dumpheap`。要确定是否存在内存泄漏，`!dumpheap`这是一个很好的起点，但您需要对期望看到的实例数量有所了解。

您通常会在任何 .NET 应用程序的堆上看到大量字符串和对象数组，因此除非它们的数量非常大，否则您通常不需要担心这些。在您的情况下，字符串占用 244 MB，这是一个很好的块，但它本身不应该引起任何问题。

如果您使用 PSSCOR 而不是 SOS，则查找随时间增加的类型的实例会变得容易一些，因为 PSSCOR 将列出堆的不同转储之间的增量。

一旦您确定了一些候选对象，您需要使用`-mt`标志列出对象`!dumpheap`，然后您可以`!gcroot`对其中的一些对象进行操作，以找出它们保持活动状态的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T10:12:03.777

您可以尝试使用 WinDbg 扩展[cosos gcview可视化内存地址和 GC 堆](https://github.com/krk/cosos/releases)

# php - 如何限制所见即所得编辑器生成的文本高度（或行数）？

> ID：11444904
> 
> 赞同：1
> 
> 时间：2012-07-12T04:13:27.680
> 
> 标签：php, html

我有一个允许用户输入产品描述的表单，并且在列表页面中我想简短地打印出产品描述（只有几行）。

但是描述包含html标签，我尝试了一些解决方案，但它们无法解决我的问题。

（例如：如果我使用子字符串函数缩短文本，但未闭合标签会有问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:47:31.673

您可以进行快速标签剥离，并在末尾添加省略号以添加装饰：

```
function shorten($text, $length)
{
   $text = trim( strip_tags($text) );

   $textLen = strlen($text);

   if($textLen < $length)
   { 
     return $text;
   }
   else
   {
     $text = substr($text, 0, $length);
     $text .= '&hellip;';
     return $text;
   }
} 
```

请注意，**[strip_tags()](http://php.net/manual/en/function.strip-tags.php)**并非万无一失，如果您的 html 标签格式错误，可能会弄乱文本，但这是一种“快速而肮脏”的解决方案；否则您需要使用适当的工具（例如 DOMDocument 或更好的解析器）解析 html，然后执行您的`substr()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:38:02.123

您可以使用功能`strip_tags($content);`删除标签...

# android - 安卓中的 3D 音频

> ID：11444909
> 
> 赞同：0
> 
> 时间：2012-07-12T04:13:58.477
> 
> 标签：android, audio, 3d

我正在尝试创建一个应用程序来在 android 中生成 3D 音频。我正在使用 soundpool 类并且能够创建平移效果（以与听众成 90 度角生成的左右音频）。我想知道是否可以应用一些算法来创建来自 45 度的 3D 位置音频。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:21:05.673

我不知道您的编码体验是什么，但也许您正在寻找android 类[AudioTrack 。](http://developer.android.com/reference/android/media/AudioTrack.html)在文档中，您可能会找到您要查找的内容。我在某处看到您必须创建一个实例，为其提供音频并使用 setStereoVolume 设置平移。然后您只需将 3D 音频源转换为左右立体声音量，您就可以在 Android 中获得 3D 声音。

希望有帮助。

# ruby-on-rails - heroku/cli.rb:30:in `start': 未定义的方法 `error_with_failure'

> ID：11444918
> 
> 赞同：2
> 
> 时间：2012-07-12T04:14:37.813
> 
> 标签：ruby-on-rails, deployment, heroku, web-deployment

我正在与 ssh 密钥搏斗并上传了一个新密钥，然后我 git push heroku master'ed 很好，然后它显示了我的登录页面，但显示

```
 We're sorry, but something went wrong. 
```

我在stackoverflow中发现可能是我还没有运行

```
 heroku rake db:migrate 
```

（没有标准文档说要这样做！）但是当我运行它时，我得到了这个：

```
 User/<computername>/.heroku/client/lib/heroku/cli.rb:30:in `start': undefined method `error_with_failure' 
 for Heroku::Helpers:Module (NoMethodError)from /usr/bin/heroku:28 
```

该文件的代码如下所示：

```
def self.start(*args)
begin
  if $stdin.isatty
    $stdin.sync = true
  end
  if $stdout.isatty
    $stdout.sync = true
  end
  command = args.shift.strip rescue "help"
  Heroku::Command.load
  Heroku::Command.run(command, args)
rescue Interrupt
  `stty icanon echo`
  error("Command cancelled.")
rescue => error
if Heroku::Helpers.error_with_failure <<<<<<<<< Line #30 WHERE ERROR OCCURS  
    display("failed")
    Heroku::Helpers.error_with_failure = false
  end
  $stderr.puts(' !    Heroku client internal error.')
  $stderr.puts(" !    Search for help at: https://help.heroku.com")
  $stderr.puts(" !    Or report a bug at: https://github.com/heroku/heroku/issues/new")
  $stderr.puts
  $stderr.puts("    Error:       #{error.message} (#{error.class})")
  $stderr.puts("    Backtrace:   #{error.backtrace.first}")
  error.backtrace[1..-1].each do |line|
    $stderr.puts("                 #{line}")
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:54:27.337

我已经看到这样的事情出现了，因为同时安装了 gem 和 toolbelt，而 Ruby 混淆了从何时加载的内容。如果您想使用 toolbelt，我强烈建议您卸载任何可能必须避免的 gem 版本（并且那时可能一切都适合您）。您可以通过运行`gem uninstall heroku`并选择卸载所有版本来执行此操作。如果您仍然遇到问题，请告诉我，我很乐意继续帮助解决问题。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:08:48.127

请更新heroku gem。这可能是您安装的特定版本中的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:22:38.640

运行相同的问题`heroku run rake db:migrate`。似乎工具带无法找到`Heroku::Helpers.error_with_failure`助手。

删除你的 heroku toolbelt 文件夹

`rm -rf /usr/local/heroku`

和可执行文件

`sudo rm -rf /usr/bin/heroku`.

然后尝试从[这里重新安装工具带](https://toolbelt.heroku.com/)

这为我解决了。

# java - ANTLR - 如何使用生成的 AST 树？

> ID：11444919
> 
> 赞同：3
> 
> 时间：2012-07-12T04:14:43.980
> 
> 标签：java, parsing, antlr, grammar

我有两个问题：

在我的 ANTLR 解析器中，我有这个重写规则：

```
msg: msg_content (COMMA msg_content)* -> ^(MSG_CTS msg_content+); 
```

在我的树语法中，如何使用收集到的 msg_content 标记？$msg_content.text 返回一个空异常。

* * *

更一般地说，您能否为我提供一些指导，关于如何使用我生成的 AST 树？我基本上想遍历节点并为不同的事物创建 Java 类，例如

我有一个打印的简单树：

```
(MSG (AGENTS A B) (MSG_CTS x y)) 
```

我想要一些 Java 类“消息”，其中包含 A、B 的“代理”字段和一些包含 X、Y 的内容字段。

我已经阅读了 ANTLR 权威指南，但还没有参考如何使用组合标记，甚至没有参考如何像我想要的那样在树下导航。就好像每个 ANTLR 教程都有关于表达式评估器的内容！

我已经看到：ANTLR 在线手册中的“Interfacing AST with Java”和“Expression evaluator”，但我不太明白如何将它们应用于我的问题。如果你能提供一个简单的例子，那将非常有帮助！

请帮忙...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:24:19.873

> $msg_content.text 返回一个空异常

如果不查看所有涉及的规则和代码，就不可能对此发表评论。您能否编辑您的问题并包含一个独立的示例，我或其他人可以运行以重现错误/异常？

> （味精（代理 AB）（味精_CTS xy））
> 
> 我想要一些 Java 类“消息”，其中包含 A、B 的“代理”字段和一些包含 X、Y 的内容字段。

看看这个教程列表：[https](https://stackoverflow.com/questions/278480/antlr-tutorials) ://stackoverflow.com/questions/278480/antlr-tutorials ，并不是所有的都是关于表达式评估器的。[我的教程](http://bkiers.blogspot.com/2011/03/creating-your-own-programming-language.html)演示了如何在 tree walker 中使用自定义 Node 类。

另请参阅[此问答，该问答](https://stackoverflow.com/questions/5252429/antlr-from-commontree-to-useful-object-graph/5257154)还显示了如何在 tree walker 中使用自定义节点类。

# c# - F11 正确调试，但 F5 不正确

> ID：11444922
> 
> 赞同：0
> 
> 时间：2012-07-12T04:15:17.857
> 
> 标签：c#, visual-studio-2010

我的一些代码有一个奇怪的问题。我创建了一些对象的列表；当尝试用新对象填充此列表时，如果我使用`F5`，列表中的所有成员将被创建为彼此完全相同！

但是当我尝试通过 调试这个问题时`F11`，列表的成员将被创建为彼此不同（这是正确的）。我正在使用循环来生成列表的所有成员，并且在循环的每次迭代中，我使用`new`首先实例化类的对象，然后将其添加到列表中。

我将列表定义为：

1.  `List<MyClass> classList = new List<MyClass>();`
2.  `MyClass`包含一些用户定义的成员和方法

我不明白为什么 F5 不能正确填写列表。我试图用只包含字符串和整数成员的其他类复制同样的问题，但它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:37:50.497

问题是因为在循环的每次迭代中都使用了**新的 Random()**方法。正确的方法是使用例如

```
rndNumber=new Random() 
```

一旦退出循环，然后在循环中只使用

```
rndNumber.Next(); 
```

有关该解决方案的更多信息，请参见以下链接：
[Random number generator always picks the same value when run inside a loop](https://stackoverflow.com/questions/5398336/random-number-generator-always-picks-the-same-value-when-run-inside-a-loop)

# sql - 更新多个表的存储过程

> ID：11444923
> 
> 赞同：2
> 
> 时间：2012-07-12T04:15:22.813
> 
> 标签：sql, sql-server, stored-procedures

我有一个更新两个表的存储过程。第一个表始终是同一个表，但是第二个表会根据传入的参数而变化。将其全部写入一个大过程中是否更有效，这样

```
CREATE PROCEDURE MyBigProc
    @id int
    @param int,
    @value1 int,
    @value2 int
AS
BEGIN
    SET NOCOUNT ON;

    -- First table to update
    UPDATE MyTable SET field1 = @value1 WHERE id = @id

    -- Then choose which table to update based on @param
    IF @param = 1
       UPDATE MySecondTable SET field2 = @value2 WHERE id = @id

    IF @param = 2
       UPDATE MyThirdTable SET field2 = @value2 WHERE id = @id
END 
```

或者我应该为每个表编写一个单独的过程，然后从主过程中调用 EXEC 过程。

我想后者更灵活，比如如果我想更新子表但不更新主表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:21:18.050

> 我想后者更灵活，比如如果我想更新子表但不更新主表？

确切地说，您有充分的理由将工作拆分为 2 个单独的 proc。如果这对你来说其他一切都有意义，我不明白为什么不遵循这种方法。

不这样做的一个可能原因是，如果您需要两个更新同时成功或失败。在这种情况下，我会将所有内容放在一个 proc 中，并将所有内容包含在一个事务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:31:50.540

```
CREATE PROCEDURE MyBigProc 
    @id int,
    @param int,
    @value1 int,
    @value2 int
AS
BEGIN
    SET NOCOUNT ON;

    -- First table to update
    UPDATE MyTable SET field1 = @value1 WHERE id = @id;

    -- Then choose which table to update based on @param
    IF @param = 1     
        exec SP_MySecondTable @id,@value2;
    IF @param = 2
       exec SP_MyThirdTable @id,@value2;
END

CREATE PROCEDURE SP_MySecondTable
    @id int, 
    @value2 int
AS
BEGIN  
    UPDATE MySecondTable SET field2 = @value2 WHERE id = @id;
END

CREATE PROCEDURE SP_MyThirdTable
    @id int, 
    @value2 int
AS
BEGIN  
  UPDATE MyThirdTable SET field2 = @value2 WHERE id = @id;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:25:18.090

最好有不同的存储过程，然后在一个地方调用它们。在执行维护活动时，它将对您有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T08:11:57.693

最好的选择是使用 CASE 语句来更新您的表

# html - 我可以在 html 选择下拉列表中的内容和箭头之间放置一个空格吗？

> ID：11444924
> 
> 赞同：1
> 
> 时间：2012-07-12T04:15:39.940
> 
> 标签：html, css

我有一个选择下拉菜单，其中包含“女孩”一词作为选项。

问题是女孩的“l”*非常*接近选择上的箭头下拉内容。我怎样才能在单词/内容（所有选项，我的意思是。我觉得不需要*只*针对单词“girL”）和小箭头之间放置更多“空格”？

我试过在“女孩”之后加一个空格，但这没有效果（即问题仍然存在）。

这是它的样子（有点）

```
sex:    |boy |v|
        |girl| 
```

这就是我想要的：

```
sex:    |boy  |v|
        |girl | 
```

是的，我知道这里的每个人都知道我在说什么。用管道绘制下拉菜单很有趣！

PS html或css，我对解决方法无所谓！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:19:43.137

嘿现在给`padding right`选择**标签**像这样

```
 select{
    padding-right:40px; // as your requirement give to padding-right 
    } 
```

现场演示[http://tinkerbin.com/vPS8tXNJ](http://tinkerbin.com/vPS8tXNJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:08:42.063

也许，这为时已晚，但是，我将其发布为下一位访问者的信息。

1.  设置`width`不是针对每种情况的解决方案。灵活的宽度有时很有用。

2.  `Padding-right`也不是解决方案，因为它只在箭头和右边框之间添加空间，而不是在文本和箭头之间。

3.  对于静态列表项，`&nbsp;`在每行的尾部添加是最好的解决方案。但如果您动态执行此操作，Google Chrome 会将其显示为文本而不是特殊字符。

4.  对于动态变化，以下效果很好：

    `option.text = itemtext + String.fromCharCode(160);`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-12T04:32:13.797

只需使用

```
&nbsp; 
```

在它之后添加一个空格......如果你在css中确实需要它......

```
padding-right: 10px; 
```

# opencv - VideoCapture 在 OpenCV 2.4.2 中不起作用

> ID：11444926
> 
> 赞同：12
> 
> 时间：2012-07-12T04:16:28.383
> 
> 标签：opencv, ffmpeg, video-capture, video-codecs

我最近在 Ubuntu 12.04 中安装了 OpenCV 2.4.2。

```
cap = VideoCapture(0) 
```

正在工作中。但我无法从某些视频源中抓取帧。

```
cap = VideoCapture("input.avi")
img = cap.read() 
```

给我一个全零元素的numpy。

我还安装了ffmpeg 0.11，x264的最新快照，v4l-0.8.8（都是最新的稳定版本）

```
cmake -D WITH_QT=ON -D WITH_FFMPEG=ON -D WITH_OPENGL=ON -D WITH_TBB=ON -D BUILD_EXAMPLES=OFF WITH_V4L=ON .. 
make
sudo make install 
```

当我做 cmake 时，我得到了这个

> -- 检测到的 GNU GCC 版本：46 (406)
> -- 找到 OpenEXR：/usr/lib/libIlmImf.so
> -- 正在寻找 linux/videodev.h
> -- 正在寻找 linux/videodev.h - 未找到
> -- 正在寻找linux/ videodev2.h
> -- 寻找 linux/videodev2.h - 找到
> -- 寻找 libavformat/avformat.h
> -- 寻找 libavformat/avformat.h - 找到
> -- 寻找 ffmpeg/avformat.h
> -- 寻找 ffmpeg /avformat.h - 未找到
> ——检查模块“tbb”
> ——未找到包“tbb”

和

```
--   Video I/O:  
--     DC1394 1.x:                  NO  
--     DC1394 2.x:                  YES (ver 2.2.0)  
--     FFMPEG:                      YES  
--       codec:                     YES (ver 54.23.100)  
--       format:                    YES (ver 54.6.100)  
--       util:                      YES (ver 51.54.100)  
--       swscale:                   YES (ver 2.1.100)  
--       gentoo-style:              YES  
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)  
--       app:                       YES (ver 0.10.36)  
--       video:                     YES (ver 0.10.36)  
--     OpenNI:                      NO  
--     OpenNI PrimeSensor Modules:  NO  
--     PvAPI:                       NO  
--     UniCap:                      NO  
--     UniCap ucil:                 NO  
--     V4L/V4L2:                    Using libv4l (ver 0.8.8)  
--     XIMEA:                       NO  
--     Xine:                        NO 
```

我找了videodev.h等

*   /usr/include/linux/videodev2.h 存在
*   /usr/include/libavformat/avformat.h 存在
*   /usr/local/include/libavformat/avformat.h 存在

但我找不到`ffmpeg/avformat.h`

这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T06:15:04.420

所以，我意识到ffmpeg存在一些问题。我重建并安装了ffmpeg，然后更改了cmake的标志以制作opencv。

对于 ffmpeg，

```
 ./configure --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab 
make 
sudo make install 
```

对于 OpenCV，

```
cmake -D CMAKE_BUILD_TYPE=RELEASE ..
make
sudo make install 
```

这是安装 OpenCV 2.4.2 的完整脚本[https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_2.sh](https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_2.sh)

这是我关于 OpenCV 2.4.2 安装的详细博文[http://jayrambhia.com/blog/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/](http://jayrambhia.com/blog/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T11:10:12.277

要运行 OpenCV 的完整安装，请尝试以下操作：

`sudo apt-get install libopencv-dev python-opencv`

有关更多详细信息，请查看以下链接[http://milq.github.io/install-opencv-ubuntu-debian/](http://milq.github.io/install-opencv-ubuntu-debian/)

# ruby-on-rails - 使用omniauth-google-oauth2 gem 进行设计

> ID：11444927
> 
> 赞同：1
> 
> 时间：2012-07-12T04:16:38.037
> 
> 标签：ruby-on-rails, devise, omniauth

我正在关注本教程：[https ://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)

我的配置是：

宝石文件：

```
gem 'devise', '1.5'
gem 'omniauth-facebook'
gem 'omniauth-google-oauth2' 
```

设计.rb：

```
require 'omniauth-google-oauth2'
config.omniauth :google_oauth2, "APP_ID", "APP_SECRET", { access_type: "offline", approval_prompt: "" }

require "omniauth-facebook"
config.omniauth :facebook, "APP-ID", "APP-Secret" 
```

但是当我启动服务器时，我得到了这个错误：

```
/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.0.12/lib/active_support/dependencies.rb:242:in `require': no such file to load -- omniauth-google_oauth2 (LoadError) 
```

它适用于 Facebook，但不适用于 Google Oauth2 gem。

PS：如果我删除“config.omniauth :google_oauth2”行，服务器会正​​常启动。所以我认为这与这条线有关。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:20:57.777

通过将 Devise 从 1.5 更新到 1.5.3 解决了这个问题

# iphone - 如何让 UIViewController 正确刷新/更新其视图？

> ID：11444928
> 
> 赞同：0
> 
> 时间：2012-07-12T04:16:38.180
> 
> 标签：iphone, objective-c, xcode, uiview

我有`UIViewController`一个标签，它从外部服务器获取其文本集。在`viewDidLoad`我添加：

```
[self.view addSubview:label]; 
```

几分钟后服务器更新文本，在应用程序中我按下一个按钮来激活它：

```
[self.view setNeedsDisplay]; 
```

但在我重新编译应用程序之前，标签的文本不会更新。如何获取子视图标签以从服务器刷新/获取新文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:20:33.633

-(void)viewwillAppear
{
NSTIMER * chat = [NSTimer scheduledTimerWithTimeInterval:40 target:self 选择器:@selector(getdata) userInfo:nil repeats:YES]; // 方法将每 40 秒调用一次

}

-(void)getdata
{
从服务器调用数据并替换标签中的数据
}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:24:02.693

怎么样`label.text = @"new title";`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:07:54.940

您需要在 Buttons 事件中添加 setText。

```
-(void) viewDidLoad{
 UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
 [button addTarget:self action:@selector(buttonPressMethod:) forControlEvents:UIControlEventTouchDown];
 button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
 [self.view addSubview:button];

  [super viewDidLoad];
}

-(void) buttonPressMethod:(id) sender
{
   label.text = @"The updated text from the server";
} 
```

# android - Android PhoneGap：在 html 文件中使用 res/drawable/img.png

> ID：11444930
> 
> 赞同：1
> 
> 时间：2012-07-12T04:16:53.403
> 
> 标签：android, cordova

我是 phonegap 的新人，我想显示来自 android res 的图像。drawable/img.png 到我的 index.html 文件。

在android phonegap中可以吗？任何人都可以解释清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:12:25.930

如果您需要在自定义 html 文件中插入图像，则可以毫无问题地使用 res 目录中的图像。这是在 Android ICS 上。

```
img src="file:///android_res/drawable/myimage.png" 
```

Android 将根据 dpi 选择正确的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:31:57.153

在资产中创建一个像“图像”这样的文件夹，我们可以像下面的代码一样从资产中访问图像，然后你把那个 html 也放在资产文件夹中

```
<img class="logo" alt="" src="images/logo.png"></img> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:46:11.437

img src="file:///android_res/drawable/myimage.png" 工作正常

# javascript - log4javascript web.config

> ID：11444931
> 
> 赞同：3
> 
> 时间：2012-07-12T04:17:02.467
> 
> 标签：javascript, web-config, log4net, log4javascript

我在我的 ASP.NET MVC 站点中使用 log4net，并想开始在我的 JavaScript 中使用类似的包（例如 log4javascript）在那里进行日志记录。特别是记录异常，如果用户报告出现问题但不容易重现，也可以调试日志记录。

我现在有这些关于将 log4javascript 与 ASP.NET MVC 集成的问题：

1) 我想使用 log4javascript 的 AjaxAppender 向服务器发送日志消息。是否有一个包可以实现接收日志消息并将它们记录在服务器端的 Web 服务？

2) 我希望能够在服务器端 web.config 中设置客户端记录器的级别，就像使用 log4net 一样。这样，我可以在需要时打开调试日志记录，而无需修改 JavaScript 代码（所有 JS 将在生产中组合并缩小）。

我猜在每个页面加载时，服务器都可以读取 web.config 并生成一些 JavaScript 来创建客户端记录器。有没有一个包可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:05:56.803

log4javascript 作者在这里。

1.  我不知道有什么服务可以做到这一点，但是使用 web 处理程序和 log4net 做起来非常简单。

2.  我什么都不知道。我考虑过为 log4javascript 编写一个 XML 配置器，但从来没有人问过。

# java - 如何转换 InputStream.read(new byte[1024]); 到字符串？

> ID：11444932
> 
> 赞同：1
> 
> 时间：2012-07-12T04:17:23.373
> 
> 标签：java, inputstream

我想从`InputStream()`字符串中获取数据，例如。嗨，开始，停止等。

我的代码片段是

```
byte[] buffer = new byte[1024];
inputStream.read(buffer); 
```

我的数据是从蓝牙发送的命令。上面的代码片段只得到（例如，如果我发送 Hi，则为 2，如果发送 Start，则为 5），我想从 Sender 端取回相同的 Normal String。

我发现只有从 String 转换为`InputStream`. 任何建议，我都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:49:28.333

最后，我可以解决这个问题！inputStream.read（缓冲区）；仅返回缓冲区中有多少字节的 int num，并且来自套接字的数据存储在缓冲区中。因此，您可以从缓冲区中制作字符串，例如。字符串结果 = 新字符串（缓冲区）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T05:02:43.323

最简单的方法是通过[Apache common-io 库](http://commons.apache.org/io/)：

```
String input = IOUtils.toString(inputStream); 
```

有关更多信息，请参阅[此方法的 javadoc](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)。

# javascript - 如何阻止上一个/下一个按钮显示隐藏的 div？

> ID：11444942
> 
> 赞同：0
> 
> 时间：2012-07-12T04:18:54.417
> 
> 标签：javascript, asp.net-mvc, popup, imagebutton

(ASP.NET-MVC) 平台

我有一个弹出对话框，在标题中还有上一个/下一个按钮，可以在不关闭弹出窗口的情况下循环浏览一系列不同的对话框。工作正常，但是在第一个隐藏的弹出 div 之前有隐藏的 div，并且当显示第一个（想要的）隐藏 div 并且我单击 prev 时，上一个按钮正在显示不需要的隐藏 div……有意义吗？

有没有人有什么建议？

这是 HTML 的示例：

```
<div class="uptitle">
    <img src="/Images/btnLeftArrow.png" onclick="GetPreviousAttachmentQuestion()" style="margin: 0 0 -4px 0;" alt="">
    <label id="AttachmentSurveyDataId" hidden=""></label>
    <label id="AttachmentInputFieldId" hidden=""></label>
    <label id="AttachmentPropertySurveyId" hidden=""></label>
    <h3 style="display: inline"><span data-bind="text: FieldLabel"></span></h3>
    <img src="/Images/btnRightArrow.png" onclick="GetNextAttachmentQuestion()" style="margin: 0 0 -4px 0;" alt="">
    <br>
    <br>                   
</div> 
```

这是Javascript：

```
var GetPreviousAttachmentQuestion = function () {
    var currentSurveyDataId = $('#AttachmentSurveyDataId').text();
    if (currentSurveyDataId != "") {
        var currentDiv = $('div > input[value="' + currentSurveyDataId + '"]').closest($('div'));
        var previousQuestion = $(currentDiv).prev($('div > img[onclick^="PopAddPhotosDialog"]'));

        if ($('#AttachmentSurveyDataId').text() == "Front View")
            previousQuestion.attr('disabled', 'disabled');

        else if (previousQuestion.length == 0)
            return;

        var previousSurveyId = ($('input[name^="SurveyDatas"][name$=".Id"]', previousQuestion.closest($('div')))).val();
        var previousInputFieldId = $('input[name^="SurveyDatas"][name$=".InputField_Id"]', previousQuestion).val();
        var propertySurveyId = $('#AttachmentPropertySurveyId').text();
        SetupAddPhotosWidget(previousInputFieldId, previousSurveyId, propertySurveyId);
    }
}; 
```

（下一个按钮是相同的，除了它使用“.next()”）

# asp.net - 限制文本框的字符数

> ID：11444943
> 
> 赞同：1
> 
> 时间：2012-07-12T04:19:00.270
> 
> 标签：asp.net, textbox

> **可能重复：**
> [为多行文本框指定最大长度](https://stackoverflow.com/questions/1334286/specifying-maxlength-for-multiline-textbox)
> [如何为多行文本框设置最大长度？](https://stackoverflow.com/questions/9797726/how-to-set-maxlength-for-multiline-textbox)

我想限制文本框的字符数。

为此我使用

```
<asp:textbox id="txtAdmissionDate" runat="server" MaxLength="5"> </asp:textbox> 
```

它工作正常。但是当我`TextMode="MultiLine"`向它添加属性时，maxlenth 不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:22:51.573

在文本框的“onchange”事件上调用以下 javascript 函数：

```
function CheckTextLength(text, long) {
    var maxlength = new Number(long); // Change number to your max length.
    if (text.value.length > maxlength) {
        text.value = text.value.substring(0, maxlength);
        alert(" Only " + long + " characters allowed");
    }
}

 <asp:TextBox runat="server" ID="txtAdmissionDate" Width="450px" TextMode="MultiLine"
            onKeyUp="CheckTextLength(this,5)" onChange="CheckTextLength(this,5)"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:22:53.203

如果您想让用户知道他是否超出了他所写的字符数，您可以使用附加到 keypress 事件的 javascript 函数。此函数将测试输入的长度并在达到最大长度时取消字符渲染。

另一种选择是使用 RegularExpressionValidator 控件来验证提交时的输入。

在我看来，第一种选择要好得多。

我没有添加任何代码，因为谷歌充满了各种口味的示例，这是一项非常常见的任务。

[在这里](http://www.codeproject.com/Articles/158958/Why-MaxLength-property-of-a-textbox-with-multiline)，您有一个可能会有所帮助的示例搜索。

[或者您也可以从这里](https://www.google.com.ar/#hl=es&sclient=psy-ab&q=multiline+textbox+maxlength&oq=multiline+textbox+maxlength&aq=f&aqi=&aql=&gs_sm=3&gs_upl=5132l5288l0l5522l2l2l0l0l0l1l227l227l2-1l1l0&gs_l=serp.3...5132l5288l0l5522l2l2l0l0l0l1l227l227l2-1l1l0.llsin.&pbx=1&fp=1&biw=1399&bih=790&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&cad=b)获得更多信息

# javascript - 如何检查json字符串的属性？

> ID：11444946
> 
> 赞同：1
> 
> 时间：2012-07-12T04:19:35.633
> 
> 标签：javascript, json

我有一个 JSON 字符串数组。考虑数组的第一个元素有 4 个属性 *{a:name,b:address,c:dob,d:country}*，

第二个元素只有 3 个属性，它没有“c”属性。遍历数组时，如果该属性不存在，我应该将其设置为默认值。我用过，（让'c'成为'评级'）

```
if(!results.hasOwnProperty('rating'))
  results.rating = 1; 
```

它适用于具有“评级”属性的元素。但是对于没有评级属性的元素，我收到一条错误消息，提示“找不到“评级”。

有没有其他方法可以找到属性是否存在？

# selenium - Selenium webdriver 脚本从 jenkins 运行时无法在 IE 8 中执行 sendkey()

> ID：11444947
> 
> 赞同：1
> 
> 时间：2012-07-12T04:19:37.207
> 
> 标签：selenium, selenium-grid

我有一个硒网格设置，集线器在 CI (jenkins) 服务器上运行。每当我从 jenkins 构建和运行我的项目时，它都无法执行：

```
WebElement inputElement = driver.findElement(By.xpath("//a[contains(@href,\"/Case/Add")]"));

inputElement.sendKeys(Keys.ENTER); 
```

或者更确切地说，硒认为它确实如此并继续执行下一个命令，即`selenium.select("id=LifeOffice", "label=AMP");`

这些节点是每个运行不同浏览器的虚拟机，只有在 IE 8 浏览器上执行脚本时才会出现此问题。当我从我的 IDE 运行脚本时，它很好。

我已经尝试使用`click ();`， `((JavascriptExecutor)driver).executeScript("arguments[0].fireEvent('onclick');",inputElement);`但我仍然有同样的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:47:46.793

这听起来很奇怪，但请尝试在 sendkeys 命令之后查看页面。如果元素就在视口的*外面*或*里面*，几乎接触到边界，[这可能发生在你身上](http://code.google.com/p/selenium/issues/detail?id=3602)：

该元素从未获得焦点，因为它隐藏在浏览器的滚动条/状态栏/覆盖它的页面的一部分后面。通常 IE 会将元素滚动到视口中并聚焦它，但有时，在边缘情况下，它不会。然后`focus`在状态栏/滚动条/空白页上调用（或点击或任何东西）调用。

一种解决方法？我只知道两个：

*   更改计算机的分辨率/窗口大小/IE 布局（使其全屏，或禁用工具栏等）
*   确保您永远不会更改分辨率/窗口大小等，并在这些边缘情况下使用纯 JavaScript：

    ```
    ((JavascriptExecutor)driver).executeScript("arguments[0].click()", inputElement); 
    ```

# jquery - 显示不刷新页面的地图。

> ID：11444951
> 
> 赞同：0
> 
> 时间：2012-07-12T04:20:10.843
> 
> 标签：jquery, google-maps

我使用具有地图的加载方法显示页面。问题是页面已加载，但在地图 div 中显示灰色屏幕。当我刷新页面时，地图被加载。我也在文档就绪函数中调用地图函数。但没有用。

我的代码是

```
<div class="public-view" id="map_canvass">
<script type="text/javascript">
// OnLoad function ...
initialize();
function initialize() {
    var fenway = new google.maps.LatLng(<?php echo $propertyValues->lat; ?>, <?php echo $propertyValues->lng; ?>);
    var mapOptions = {
        center: fenway,
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvass"), mapOptions);
    var circleOptions = {
        center: fenway,
        map: map,
        strokeColor: "#BB0A68",
        strokeOpacity: 0.1,
        fillColor: "#BB0A68",
        fillOpacity: 0.35,
        radius: 200
    }
    var circle = new google.maps.Circle(circleOptions);
    google.maps.event.trigger(map, 'resize');
}
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:53:53.073

**在您知道**google.maps 已加载后，您需要调用 initialize() 。您上面的代码可能会在加载 google.maps 之前调用初始化。它在第二次刷新页面时工作，因为它已被缓存。jQuery 的文档就绪功能也不是 100% 可靠的。

[Google Maps API 文档中的这个示例](https://developers.google.com/maps/documentation/javascript/events#EventListeners)向您展示了最好的方法：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

# django - Django中的logout_then_login

> ID：11444958
> 
> 赞同：1
> 
> 时间：2012-07-12T04:20:44.507
> 
> 标签：django

我想允许用户注销并将他直接重定向到登录页面。在 Django 用户认证页面（https://docs.djangoproject.com/en/dev/topics/auth/）中，

```
logout_then_login(request[, login_url])
Logs a user out, then redirects to the login page.

URL name: No default URL provided

Optional arguments:

login_url: The URL of the login page to redirect to. Defaults to settings.LOGIN_URL if not supplied. 
```

我面临的问题是然后我单击页面，它重新加载页面而不是进入登录页面。

我的代码如下：

```
@login_required
def main(request):
    """
    main view
    """

    path = reverse('home', kwargs={'userpk': request.user.pk})

    return HttpResponseRedirect(path)

@login_required
def home(request, userpk):
    """
    home page view
    """

    if int(userpk) != request.user.pk:
        return HttpResponseForbidden()

    return render(request,
                  'lex/main.html',
                  dictionary={'user': request.user,
                              'userpk': userpk})
def logoutnlogin(request):
    """
    Logout n login back
    """
    return logout_then_login(request,login_url=main(request)) 
```

我想我做错了不知道在哪里..需要一些指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:24:53.270

您必须提供登录页面的 url，所以该行应该是

```
return logout_then_login(request,login_url='/login')) 
```

假设`/login`是您的登录网址，或者您可以使用`reverse`您的登录网址名称`urls.py`

# objective-c - 这个语法是什么意思？ID ?

> ID：11444960
> 
> 赞同：1
> 
> 时间：2012-07-12T04:20:51.980
> 
> 标签：objective-c, ios

有谁知道带有 < > 括号的 MenuDelegate 这个语法做什么？？？以及为什么有人要使这样的一段代码复杂化。

```
@protocol MenuDelegate
    - (void)optionSelected:(NSString *)option;
@end

@interface ContentMenu : UITableViewController {
    NSMutableArray *_test;
    id<MenuDelegate> _delegate;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:15:04.553

就像静态类型允许编译器根据类层次结构测试类型一样，这种语法允许编译器根据协议的一致性来测试类型。有关更多信息，请阅读[Objective-C 2.0 编程语言](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:35:09.150

查看 Apple 文档中有关协议的内容

> 如果您知道一个对象的类，您可以查看它的**接口声明**（以及它所继承的类的接口声明）来查找它响应的消息。**这些声明宣传它可以接收的消息。协议为其发送的消息提供了一种广告方式**。
> 
> 沟通是双向的；对象发送消息以及接收消息。例如，一个对象可能将某个操作的责任委托给另一个对象，或者它有时可能只需要向另一个对象询问信息。在某些情况下，一个对象可能愿意将其行为通知其他对象，以便它们可以采取任何可能需要的附带措施。
> 
> 如果您将发送者的类和接收者的类开发为同一个项目的一部分（或者如果其他人向您提供了接收者及其接口文件），那么这种通信很容易协调。发送方只需导入接收方的接口文件。导入的文件声明了发送者在其发送的消息中使用的方法选择器。

所以这是你问题的答案

```
Why not just put the optionSelected function inside @implementation? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:23:34.520

这种语法意味着 id 变量采用称为 MenuDelegate 的协议。

* * *

语法对我来说也很奇怪，但不像调用方法那么奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T04:24:40.337

那是协议。Objective-C 中的协议是接口声明。它允许您在委托中指定您期望的一组特定方法，而无需强制传入对象的类型。

`id<MenuDelegate>`表示任何实现该`MenuDelegate`协议的类。它保证你可以调用`MenuDelegate`协议中指定的函数，而不用关心对象的真实类型。

# c# - 我如何在文本框中匹配所有文本来播放我的音频

> ID：11444968
> 
> 赞同：0
> 
> 时间：2012-07-12T04:21:38.663
> 
> 标签：c#, c#-4.0, audio, media-player, multimedia

```
 string line = textBox1.Text.ToString();

        string[] words = line.Split();

        foreach (string word in words)
        {

            if (word.Contains("ඉ"))
            {
                SoundPlayer sndplayr = new SoundPlayer(WindowsFormsApplication1.Properties.Resources._a);
                sndplayr.Play();
            }

            if (word.Contains("අ"))
            {
                SoundPlayer sndplayr = new SoundPlayer(WindowsFormsApplication1.Properties.Resources.la);
                sndplayr.Play();
            }

            }

        }
        } 
```

我用过这个，但它只播放文本框最后一个字符的音频。我也想播放其他字符。那我该怎么办。请帮我............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:31:44.327

`break`每次后使用`if (word.Contains){...}`。

并使用[SoundPlayer.PlaySync 方法](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.playsync.aspx)代替`SoundPlayer.Play`. 这样，您可以在上一个声音结束后开始下一个声音。

# performance - GRAILS 2，内存问题

> ID：11444969
> 
> 赞同：0
> 
> 时间：2012-07-12T04:21:55.373
> 
> 标签：performance, grails, memory-management, memory-leaks, groovy

我们有一个使用 Grails 2.0.1 和 MongoDB 构建的应用程序。随着我们用户群的增长以及我们进行了一些性能研究，我们注意到对于每个典型的请求 grails 会占用大约 150Mb 的 RAM，并且当 RAM 即将达到最大值时，它会执行 GC。我们为控制器设置了单例模式，为服务设置了非事务模式。我们使用JRockit。

我想知道对于 grails 应用程序是否可以认为是正常的。我们的网站只不过是一个普通的网站，没有额外的内存使用，只是一个用户管理系统，代码本身似乎还可以。

以下是我们使用的插件：

```
app.grails.version=2.0.1,
app.servlet.version=2.4,
app.version=0.1,
plugins.cache-headers=1.1.3,
plugins.code-coverage=1.2.5,
plugins.codenarc=0.12,
plugins.crypto=2.0,
plugins.gsp-arse=1.3
plugins.jaxrs=0.6,
plugins.mongodb=1.0.0.RC5,
plugins.navigation=1.2,
plugins.quartz=0.4.2,
plugins.redis=1.0.0.M9,
plugins.rendering=0.4.3,
plugins.selenium=0.8,
plugins.selenium-rc=1.0.2,
plugins.spring-security-core=1.2.7.2,
plugins.springcache=1.3.1,
plugins.svn=1.0.1,
plugins.tomcat=2.0.1,
plugins.ui-performance=1.2.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:43:27.273

在 Sun JDK 上，启动 jvisualvm（或 jrockit 等价物，如果有的话。否则给自己找一个适合 jrockit 的分析器），将它附加到正在运行的服务器上，启动分析器并分析输出。这会给你一个关于在哪里看的想法。

也许您实际上是从后端存储加载那么多信息。但这只是一个猜测。

# php - 在运行时在 php 中添加文本字段

> ID：11444970
> 
> 赞同：1
> 
> 时间：2012-07-12T04:21:58.913
> 
> 标签：php, javascript, ajax, dynamic

我是 php 新手，现在想，如何在运行时添加文本字段。我创建了一个 php 页面，其中包含一个简单的下拉列表。下拉列表中有数字 1、2、3 等等。我想要做的是，每当用户从下拉列表中选择一个数字时，就会出现相同数量的文本字段（以及标签）。示例 1 的文本字段（带标签），2 的 2 文本字段，依此类推。如果有人可以给我任何代码示例或链接来理解，那将非常有帮助。非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:32:23.187

我会使用 jquery，这是 Dagon 建议的一个 JavaScript 库。首先你的html：

```
<form>
  <input class="target" type="text" value="Field 1" />
  <select class="target">
    <option value="1" selected="selected">Option 1</option>
    <option value="2">Option 2</option>
  </select>
</form>
<div id="other">

</div> 
```

然后你的javascript（使用jQuery）：

```
$('.target').change(function() {
    $("select option:selected").each(function () {
        $('#other').append("<label>" + $(this).text() + "</label><input type='text' value='' />");
    });      
}); 
```

供你参考：

[http://api.jquery.com/change/](http://api.jquery.com/change/)

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T04:33:43.157

您可以这样做：

```
<?php 
$num = 2; //get number input from user
for ($i = 0; $i < $num ; $i++) {
echo '<input type="text" />';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T04:29:02.133

您可以使用 jQuery 来帮助您。使用 change() 函数 ( [http://api.jquery.com/change/](http://api.jquery.com/change/) ) 获取下拉列表值并创建另一个 jQuery 函数来填充文本字段。

本教程可能会对您有所帮助[http://charlie.griefer.com/blog/2009/09/17/jquery-dynamically-adding-form-elements/](http://charlie.griefer.com/blog/2009/09/17/jquery-dynamically-adding-form-elements/)

# regex - Railo，从 SerializeJSON 结果中删除一些双引号

> ID：11444972
> 
> 赞同：1
> 
> 时间：2012-07-12T04:22:15.460
> 
> 标签：regex, coldfusion, railo

假设我有：

```
<cfscript>
arrButtons = [
    {
        "name" = "Add",
        "bclass" = "add",
        "onpress" = "addItem"
    },
    {
        "name" = "Edit",
        "bclass" = "edit",
        "onpress" = "editItem"
    },
    {
        "name" = "Delete",
        "bclass" = "delete",
        "onpress" = "deleteItem"
    }
];

jsButtons = SerializeJSON(arrButtons);
// result :
// [{"onpress":"addItem","name":"Add","bclass":"add"},{"onpress":"editItem","name":"Edit","bclass":"edit"},{"onpress":"deleteItem","name":"Delete","bclass":"delete"}]
</cfscript> 
```

对于每个`onpress`项目，我需要从其值中删除双引号以匹配 JS 库要求（onpress 值必须是回调函数）。

如何使用正则表达式删除双引号？

最终结果必须是：

```
[{"onpress":addItem,"name":"Add","bclass":"add"},{"onpress":editItem,"name":"Edit","bclass":"edit"},{"onpress":deleteItem,"name":"Delete","bclass":"delete"}] 
```

**addItem**、**editItem**和**deleteItem**周围没有双引号。

**编辑 2012-07-13** 为什么我需要这个？我创建了一个 CFML 函数，其结果是一个 JS 集合，将在许多文件中使用。jsButton 对象将用作 JS 库中可用选项的一部分。该函数的参数之一是一个结构数组（默认为 arrButtons），并且提供的参数值可以与默认值合并。

由于我们不能（在 CFML 中）在没有双引号的情况下写入**onpress**值，所以我必须为该值添加双引号，并将结构的（CFML）数组转换为 JSON（这只是一个字符串）并删除双引号在将其放入 JS 库选项之前。

使用 Railo，我们可以将结构声明为链接结构，以确保循环或转换具有相同的有序键（从上面的示例中， **onpress**始终是结构中的最新键）。有了这个链接结构和相同的键顺序，我们可以用简单的替换函数删除双引号，但当然我们不能保证每个使用 CFML 函数的程序员都不会忘记使用链接结构和键顺序与上面的示例相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:01:47.247

你想要输出的不是 JSON，所以使用 SerializeJSON 是一个杂项。

您是否有任何理由首先将其放入 ColdFusion 数组中，而不是直接编写 Javascript？

> JSON 纯粹是一种数据描述语言。根据 [http://www.json.org](http://www.json.org)，它是一种“轻量级数据交换格式”。- 不是编程语言。
> 
> 根据[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)，支持的“基本类型”是：
> 
> *   数字（整数、实数或浮点数）
> *   字符串（带反斜杠转义的双引号 Unicode）
> *   布尔值（真假）
> *   数组（值的有序序列，以逗号分隔并括在方括号中）
> *   对象（键：值对的集合，以逗号分隔并用大括号括起来）
> *   `null`

--[来源](https://stackoverflow.com/a/2001471)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:40:34.550

我不确定这是否真的必要 - 根据您处理 JS 回调的方式/位置，可能可以使用字符串函数名称来引用函数，而无需删除引号（即`object[button.onpress]`）。

但是，既然你问了，这里是一个正则表达式解决方案：

```
jsButtons  = jsButtons.replaceAll('(?<="onpress":)"([^"]+)"','$1'); 
```

那里的正则表达式由两部分组成：

`(?<="onpress":)`-- 向后看以确保我们正在处理文本`"onpress":`
`"([^"]+)"` -- 匹配引号并捕获它们的内容。

替换方面是用第`$1`一个捕获组（即引号的内容）替换匹配的文本（即整个引用的值）。

如果“onpress”的大小写敏感可能是一个问题，您可以在正则表达式前面加上`(?i)`忽略大小写。

如果会有多个不同的事件（不仅仅是“onpress”），您可以将上面表达式的相关部分更新为`(?<="on(?:press|hover|squeek)":)`等。

**注意：**以上所有内容都依赖于`serializeJson`不改变的格式输出-如果将来可能存在注释、空格、单引号或其他任何内容，则需要更长的表达式来满足这些要求-这就是原因的一部分您应该首先调查是否需要正则表达式来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:14:50.657

我想在这种情况下你可以简单地使用 serialize()。这应该够了吧...

格特

# c# - 使用 Silverlight 提取 Html 内容

> ID：11444973
> 
> 赞同：0
> 
> 时间：2012-07-12T04:22:26.567
> 
> 标签：c#, asp.net, silverlight-4.0

我正在尝试使用 Silverlight 提取 html 内容。我的应用程序目标是使用户能够导航到任何 html 页面，并且当他单击一个按钮时，应该提取页面内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:25:12.440

[您可以使用WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)从任何站点获取任何 HTML 内容。

```
WebClient client = new WebClient ();    
string html = client.DownloadString("http://www.msn.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:26:44.957

使用[Html 敏捷包](http://htmlagilitypack.codeplex.com/)。它似乎对您的问题有用。

请参阅[此处](http://htmlagilitypack.codeplex.com/discussions/225113/)以在 Silverlight 上使用它：

> 您是否尝试过现在使用 SVN 存储库中的 HAPLight 项目。它是 Html Agility Pack 的 Silverlight 版本，只需稍加修改即可在 WP7 上运行（它针对 Silverlight 4，因此您可能需要删除一些内容）

# google-docs - Size of Google Docs entry

> ID：11444980
> 
> 赞同：1
> 
> 时间：2012-07-12T04:23:04.813
> 
> 标签：google-docs, gdata, google-docs-api, gdata-api

Google Docs has a quotaBytesUsed method but it doesn't account for native files. Is there any other attribute that references the size of an entry?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:42:11.560

Google Docs native files don't use your storage quota so their size is not returned

# wcf - 使用 SyncServices 和 WCF 进行 SQL Server 数据库同步时出错

> ID：11444981
> 
> 赞同：1
> 
> 时间：2012-07-12T04:23:14.487
> 
> 标签：wcf, sql-server-2008, syncservices

我在服务器上有数据库 - Microsoft SQL Server 2008 R2 (RTM) - 10.50.1600.1 (X64)。配置为使用 Microsoft Synchronization Services for ADO.NET 通过 WCF 与 SQL Server Compact 数据库客户端同步。

有时这个错误开始出现：

> Microsoft.Synchronization.Data.SyncException：无法枚举同步组“组名”中表“表名”的 DbServerSyncProvider 更改。
> 
> ---> System.Data.SqlClient.SqlException：从服务器接收结果时发生传输级错误（提供者：TCP Provider，错误：0 - 信号量超时期限已过。）
> 
> 在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，布尔 breakConnection)
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
> 在 System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj，UInt32 错误)
> 在系统.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)
> 在 System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
> 在 System.Data.SqlClient.TdsParserStateObject.ReadBuffer()
> 在 System.Data.SqlClient.TdsParserStateObject.ReadByte( )
> 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）
> 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
> 在 System.Data.SqlClient.SqlDataReader.get_MetaData()
> 在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
> 在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
> 在 System.Data.SqlClient。 SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String 方法, DbAsyncResult 结果)
> 在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
> 在 System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior 行为, String 方法)
> 在 System.Data.SqlClient.SqlCommand.ExecuteDbDataReader (CommandBehavior 行为)
> 在 System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
> 在 Microsoft.Synchronization.Data.Server.DbServerSyncProvider.EnumerateChanges(SyncGroupMetadata groupMetadata, SyncSession syncSession, IDbTransaction transaction, EnumerateChangeType changeType, SyncSchema traceSchema)

表名每次都不一样。

请告诉我如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:30:31.400

如果您在数据库上指定的保留期内没有成功同步，我相信您会收到此错误。看到[这个链接](http://social.msdn.microsoft.com/Forums/en/syncdevdiscussions/thread/83d0c934-bd1e-497e-a9d0-99042f7aa08e)

当同步进程由于打开的事务或来自另一个进程的锁定而无法获取数据时，我们偶尔也会遇到这种情况。（我相信解决方法是`SET READ_COMMITTED_SNAPSHOT ON`：

```
ALTER DATABASE yourdatabasenamehere
SET READ_COMMITTED_SNAPSHOT ON

GO
) 
```

# linux - 重启后系统时钟重置

> ID：11444982
> 
> 赞同：1
> 
> 时间：2012-07-12T04:23:23.733
> 
> 标签：linux

我正在编写一个需要能够在 debian linux 面板上设置时间和日期的应用程序。我能够成功设置系统时间和硬件时钟，但在重新启动后系统时钟被设置回当前时间。硬件时钟保持在我在重新启动之前将其更改为的时间。

这将在其上运行的机器将没有任何网络或互联网访问权限，所以（我认为）我已经删除了 NTP，但是还有其他什么会导致这种情况发生吗？有没有办法验证 NTP 没有运行？

我几乎是一个 linux 新手，因此非常感谢任何人提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:30:43.453

为了将对时钟的更改提交回硬件，您必须运行[`hwclock`](http://linux.die.net/man/8/hwclock)程序：

```
/sbin/hwclock --systohc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:18:09.453

我联系了 Technologic Systems（硬件制造商）并确定该硬件具有自己独特的设置硬件时钟的功能。

“使用 ts4700ctl 访问 TS-4700 上的系统时钟：

ts4700ctl --getrtc # 从 RTC 设置系统时间

ts4700ctl --setrtc # 将系统时间保存到 RTC"

很抱歉认为这是一个 Linux 问题，但我很高兴我没有发疯！

# design-patterns - Square 和 Rectangle 可以继承 Shape，但是 Square 可以继承 Rectangle 吗？

> ID：11444984
> 
> 赞同：2
> 
> 时间：2012-07-12T04:23:31.600
> 
> 标签：design-patterns

你可以有一个超类 Shape，Square 和 Rectangle 是两个子类，但是你可以有 Square 子类 Rectangle，因为 Square 是一个四边相等的特殊 Rectangle？

我试图用一个原则来检验，只要使用超类，它应该可以被它的子类替换，但如果使用子类，它可能无法被它的超类替换。看起来很好，但我总觉得 Square 不能是 Rectangle 的孩子，因为某种原因？谁能给我一些启示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T04:29:11.863

您指的是[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

> 可替代性是面向对象编程的一个原则。它指出，在计算机程序中，如果 S 是 T 的子类型，则类型 T 的对象可以替换为类型 S 的对象（即，类型 S 的对象可以替换类型 T 的对象）而不改变任何该程序的理想属性（正确性、执行的任务等）。

具体到您的问题：

> 违反 LSP 的典型示例是从 Rectangle 类派生的 Square 类，假设宽度和高度都存在 getter 和 setter 方法。Square 类始终假定宽度与高度相等。如果在需要 Rectangle 的上下文中使用 Square 对象，则可能会发生意外行为，因为 Square 的尺寸不能（或者更确切地说不应该）单独修改。这个问题不容易解决：如果我们可以修改 Square 类中的 setter 方法，使它们保持 Square 不变量（即，保持尺寸相等），那么这些方法将削弱（违反）Rectangle setter 的后置条件，即声明尺寸可以独立修改。像这样的违反 LSP 的行为在实践中可能是也可能不是问题，取决于使用违反 LSP 的类的代码实际期望的后置条件或不变量。可变性是这里的一个关键问题。如果 Square 和 Rectangle 只有 getter 方法（即它们是不可变对象），则不会发生违反 LSP 的情况。

**在简单的英语**中，您不能在需要 Rectangle 的地方使用 Square，因为 Square 具有 Rectangle 没有的行为。如果有人尝试使用他们认为应该是 Rectangle 的实例，但它实际上是 Square 的实例，他们可能会设置 Width 并惊讶于 Height 自动更改（意外的副作用）。

# spring - Weblogic Server 10.3.4 上的 Spring 3.1 部署失败

> ID：11444987
> 
> 赞同：1
> 
> 时间：2012-07-12T04:23:43.863
> 
> 标签：spring, spring-security, weblogic-10.x, spring-3

我一直在开发 maven java spring 3.1 程序并将其部署在码头上。它在码头上成功运行。现在我需要在 weblogic 10.3.4 上部署它，但我总是得到这个 BeanDefinitionParserDelegate 错误。我应该将任何东西（如库或类）添加到 weblogic 环境中以使其工作吗？

这是我的错误堆栈跟踪：

```
951  [[ACTIVE] ExecuteThread: '8' for queue: 'weblogic.kernel.Default (self-tuning)']
ERROR o.s.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/spring/spring-security.xml]; nested exception is java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:375) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:280) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:131) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:147) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:100) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:298) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:241) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49) [spring-2.0.3.jar:2.0.3]
at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481) [weblogic.jar:10.3.4.0]
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) [com.bea.core.weblogic.security.identity_1.1.2.1.jar:1.1.2.1]
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) [com.bea.core.weblogic.security.wls_1.0.0.0_6-1-0-0.jar:6.1.0.0]
at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1872) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:43) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68) [weblogic.jar:10.3.4.0]
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]

Caused by: java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
at org.springframework.security.config.SecurityNamespaceHandler.parse(SecurityNamespaceHandler.java:69) ~[spring-security-config-3.1.0.RELEASE.jar:3.1.0.RELEASE]
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1114) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1104) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:133) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:90) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:458) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:353) ~[spring-2.0.3.jar:2.0.3]
... 48 common frames omitted 
```

这是我在 spring-security.xml 中的 xml 代码

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.springframework.org/schema/beans
               http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
               http://www.springframework.org/schema/security
               http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<global-method-security pre-post-annotations="enabled" />

<beans:bean id="customAuthFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="sessionAuthenticationStrategy" ref="sas"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="allowSessionCreation" value="true" />
</beans:bean>

<beans:bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry"/>
    <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" />

<beans:bean id="loginService" class="com.pusilkom.artajasa.billing.service.LoginService" />

<beans:bean id="customAuthenticationProvider" class="com.pusilkom.artajasa.billing.util.ArtajasaAuthenticationProvider" />
<authentication-manager alias="authenticationManager">
    <authentication-provider ref="customAuthenticationProvider" />
</authentication-manager>

<beans:bean id="accessDeniedHandler" class="com.pusilkom.artajasa.billing.util.ThouShaltNoPass">
    <beans:property name="accessDeniedURL" value="/session/403/" />
</beans:bean> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:54:18.217

您的日志显示您的类路径中有 Spring 2.0.3，您需要至少有 Spring 3.0.6 才能使用 Spring Security 3.1.x。因此，请尝试清理您的类路径或检查该 jar 是否包含在其他项目中。

```
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1114) ~[spring-2.0.3.jar:2.0.3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:12:43.253

您是否尝试过使用 prefer-web-inf-classes 元素？在`WEB-INF/weblogic.xml`（旁边`web.xml`）

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-web-app
 xmlns="http://www.bea.com/ns/weblogic/90"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.bea.com/ns/weblogic/90 
http://www.bea.com/ns/weblogic/90/weblogic- web-app.xsd">
<container-descriptor>
    <prefer-web-inf-classes>true</prefer-web-inf-classes>
 </container-descriptor>
</weblogic-web-app> 
```

请参阅：[Weblogic 10.3.1.0 is using com.bea.core.apache.commons.net_1.0.0.0_1-4-1.jar ...我想从我的代码中使用 commons-net-2.0.jar](https://stackoverflow.com/questions/3376046/weblogic-10-3-1-0-is-using-com-bea-core-apache-commons-net-1-0-0-0-1-4-1-jar)

# ios - ARC下，卸载viewcontroller时需要给所有强成员设置nil吗？这是必须的吗？

> ID：11444988
> 
> 赞同：5
> 
> 时间：2012-07-12T04:23:58.530
> 
> 标签：ios, memory, automatic-ref-counting

假设我有一个这样的视图控制器：

```
@interface ControllerA : viewcontroller{
    NSString * __strong a;
}

@end 
```

在`viewDidLoad`我设置的功能中

```
a = [[NSSString alloc] init]; 
```

在另一个 ControllerB 中，

```
{
    ControllerA * controllerA = [[ControllerA alloc] init];
} 
```

controllerA的成员会被释放吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T04:37:39.767

是的， 指向的字符串`a`将在释放时`controllerA`被释放。你不需要`nil`自己设置。

[过渡到 ARC 发行说明](https://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW11)目前是查找有关使用 ARC 的更多信息的地方。它提出的一个重要观点是，如果您的类需要在释放实例时释放实例变量*之外*`-dealloc`的任何事情，您可能仍然需要自定义。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T04:34:40.430

你永远不需要在 ARC 中将变量设置为 nil，除非你想确保尽快释放它（即非 ARC 代码下的 [myObject release]）。当对象被释放时，所有的 iVar 都会被自动释放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T14:49:14.740

在使用 ARC 和 Zombies 时，iOS 5 中有一个众所周知的错误，它会阻止 ivars 被发布：[技术问答 QA1758](http://developer.apple.com/library/mac/#qa/qa1758/_index.html)。

否则，ivars 将被自动释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T13:25:59.887

**更新 2：**

在今天早上花了几个小时诊断和记录无法在我的 iOS 5 项目中发布的 ivars 之后，我发现如果在 iOS 5 上打开并运行僵尸，实例变量不会在 ARC 项目中发布。用这些非凡的发现更新我的答案，[Calin](https://stackoverflow.com/users/1104534/calin)向我指出，这是众所周知的行为。[技术问答 QA1758](http://developer.apple.com/library/mac/#qa/qa1758/_index.html)。谢谢卡林！

我的示例项目位于[https://github.com/robertmryan/arc-problem-project](https://github.com/robertmryan/arc-problem-project)

**更新：**

我之前曾声称这是不正确的，除非您将变量和属性设置为`nil`. 我提供了以下代码作为示例。这是从一个真实的 ARC 测试项目中获取的，我什至用另一个视图控制器重新创建了它，除了下面的代码来确认之外，里面什么都没有。经过当之无愧的反对意见后，我将此代码示例放入一个新项目中，并且 ivar 被释放，这是应该的。

因此，它一定与所讨论的项目有关。从那以后，除了下面的代码（以及执行 push segue 的视图控制器，以便我可以弹回它来演示释放）之外，我已经完全从该项目中删除了所有内容，并且问题仍然存在。如果我将代码（和故事板）复制到一个新项目，它工作正常。非常非常奇怪，我会更深入地研究这个。如果您想查看我的项目，请访问[https://github.com/robertmryan/arc-problem-project](https://github.com/robertmryan/arc-problem-project)。也许其他人可以看到问题所在。我知道我可以放弃这个项目（它甚至不是一个生产应用程序，只是一个测试平台），但令人担忧的是 ARC 的 dealloc 无法正常工作。

无论如何，要清楚，您的 ivars*会*随着父对象的释放而释放。我不知道为什么我没有在下面的情况下发布，但这对原始问题无关紧要。

```
//  ArcTestViewController.m

#import "ArcTestViewController.h"

#pragma mark - IvarObject

@interface IvarObject : NSObject
@end

@implementation IvarObject

- (void)dealloc
{
    NSLog(@"%s", __FUNCTION__);
}

@end

#pragma mark - ArcTestViewController

@interface ArcTestViewController ()
{
    IvarObject __strong *_ivarObject;
}
@end

@implementation ArcTestViewController

- (void)dealloc
{
    NSLog(@"%s", __FUNCTION__);

//    _ivarObject = nil;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _ivarObject = [[IvarObject alloc] init];
}

@end 
```

当我使用注释掉`=nil`的方法中的语句执行此操作时，我在控制台上看到以下内容：`dealloc`

> 2012-07-12 10:33:33.644 test4[36045:11903]-[ArcSimpleTestViewController dealloc]

当我在我的 中取消注释该`=nil`语句时`dealloc`，我看到以下内容：

> 2012-07-12 10:35:23.117 test4[36083:11903]-[ArcSimpleTestViewController dealloc]
> 
> 2012-07-12 10:35:23.119 test4[36083:11903]-[IvarObject2 释放]

对于我上面的撤回，当我将相同的代码放在一个新项目中时，无论我是否为 nil，我都会看到 deallocs。

Rob Napier 提供了下面的代码示例（我感谢他和其他人抽出时间），但是当我把上面的代码放在另一个项目中时，即使是上面的代码也能正常工作，但在我当前的项目中，它没有正确释放！

* * *

来自 Rob Napier 的更新：演示其工作原理的更简单示例（全部在一个文件中）。将其放入文件中并按照指示进行编译：

```
//  arc.m
//  Compile with:
//      clang -fobjc-arc -framework Foundation -o arc arc.m

#import <Foundation/Foundation.h>

#pragma mark - IvarObject

@interface IvarObject : NSObject
@end

@implementation IvarObject

- (void)dealloc
{
    NSLog(@"%s", __FUNCTION__);
}

@end

#pragma mark - PropertyObject

@interface PropertyObject : NSObject
@end

@implementation PropertyObject

- (void)dealloc
{
    NSLog(@"%s", __FUNCTION__);
}

@end

#pragma mark - ArcTest

@interface ArcTest : NSObject
{
    IvarObject __strong *_ivarObject;
}

@property (nonatomic, strong) PropertyObject *propertyObject;

@end

@implementation ArcTest

@synthesize propertyObject = _propertyObject;

- (void)dealloc
{
    NSLog(@"%s", __FUNCTION__);

//    _ivarObject = nil;
//    _propertyObject = nil;
}

- (void)assignStuff
{
    _ivarObject = [[IvarObject alloc] init];
    self.propertyObject = [[PropertyObject alloc] init];
}

@end

int main () {
    ArcTest *test = [[ArcTest alloc] init];
    [test assignStuff];
    test = nil;
    NSLog(@"End program");
} 
```*

# mysql - 按多列和时间跨度对 MYSQL 结果进行分组

> ID：11444990
> 
> 赞同：0
> 
> 时间：2012-07-12T04:24:22.290
> 
> 标签：mysql

我如何选择一个，最近的`NID`，每 7 天，每`UID`，从今天开始倒计时。

如果今天是 7 月 11 日，下表

```
+-----+------------+-----+
| NID |  timestamp | UID |
+-----+------------+-----+
|   1 | 1341719851 |   8 | //July 7
|   2 | 1341115051 |   8 | //July 1
|   3 | 1341547051 |   8 | //July 6
|   4 | 1341719851 |   8 | //July 8
|   5 | 1341979051 |   8 | //July 11
|   6 | 1341806251 |   9 | //July 9
|   7 | 1341460651 |   9 | //July 5
|   8 | 1341892651 |   9 | //July 10
+-----+------------+-----+ 
```

会输出这个：

```
+-----+------------+-----+
| NID |  timestamp | UID |
+-----+------------+-----+
|   2 | 1341115051 |   8 | //July 1
|   5 | 1341979051 |   8 | //July 11
|   8 | 1341892651 |   9 | //July 10
+-----+------------+-----+ 
```

在过去 7 天中，`NID`每个用户的最近的是 ，`'5'`并且`'8'`在前 7 天中，最近`NID`的是`'2'`，依此类推...

我假设，Group By 可以解决问题；但我不知道从哪里开始。

更新

根据最佳答案，这是有效的查询：

```
SELECT nid, timestamp, uid, weeks_ago
FROM (
    SELECT nid, timestamp, uid, FLOOR(
        (UNIX_TIMESTAMP()- timestamp)/604800
    ) weeks_ago
    FROM `table`
    ORDER BY timestamp DESC
) x
GROUP BY uid, weeks_ago 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:39:45.497

```
select nid, max(timestamp), uid, weeks_ago
from (select nid, timestamp, uid, floor(datediff(now(), from_unixtime(timestamp))/7) weeks_ago
      from mytable) x
group by nid, uid, weeks_ago 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:24:28.053

```
 select * from (
    (
      select nid, uid,timestamp,floor(datediff(now(), from_unixtime(timestamp))/7) as   weeks,from_unixtime(timestamp) as Dt from test t1 order by dt desc limit 0,2)
 Union
  (
  select nid, uid,timestamp,
  floor(datediff(now(), from_unixtime(timestamp))/7) as weeks,from_unixtime(timestamp) as Dt
 from test t2 group by weeks having weeks>0 order by dt asc limit 0,1
    )
     ) t4 
```

可能这可以解决您的问题。尝试这个

# django - Django：完整的 Facebook 和 Twitter 集成（Django-Facebook、django-social-auth、django-allauth）

> ID：11444997
> 
> 赞同：7
> 
> 时间：2012-07-12T04:25:12.740
> 
> 标签：django, facebook, django-socialauth, python-twitter, django-facebook

在我发布我的问题之前，我想告诉你，我知道很少有优秀的 django 包用于 twitter 和 facebook 集成：

*   [Django-Facebook](https://github.com/tschellenbach/Django-facebook)
*   [django-social-auth](https://github.com/omab/django-social-auth)
*   [django-allauth](https://github.com/pennersr/django-allauth)

所以，这是我的问题：

**我想要的是？**

我想要：

1.  允许用户通过 facebook 和 twitter 注册。（使用上述任何一种都易于实现）。
2.  允许将多个社交帐户集成到一个用户帐户中。（我认为＃2和＃3都可以做到。）
3.  从 facebook 或 twitter 数据创建个人资料（在 fb 的情况下需要扩展权限）。因此，这意味着我们还需要从 facebook 和 twitter 访问数据。
4.  允许用户从 django 应用程序（活动以及通过表单）发布到 facebook 和 twitter。
5.  邀请和寻找 facebook 朋友（#3 可以做到。）
6.  提供与 facebook 应用程序相同的功能。（＃3可以做到。）
7.  发布到用户拥有的 Facebook 页面。（我不确定＃3是否可以做到。）

**我的想法**

如果我只需要处理 facebook，那么我认为 Django-Facebook 几乎可以回答我所有的问题。但由于我也想支持 twitter，所以我不确定我应该做什么。我能想到的只有：

1.  **Django-Facebook**用于 facebook + **django-social-auth**或**django-allauth**用于 twitter。我不确定这种组合是否可行。如果您尝试过类似的事情，请告诉我。
2.  **django-social-auth**或**django-allauth，前提**是其中任何一个也可以提供上述 facebook 功能。

**[编辑：]**实际上我正在寻找以下两个问题的答案：

1.  如果我只选择使用 django-social-auth，那么有人可以将我指向与 facebook 和 twitter 交互的示例/代码片段。
2.  如果我想使用 Django-Facbook（因为它提供了很多功能），我可以为 facebook 和 django-social-auth（或 django-allauth）只为 twitter 选择它。我的意思是说与使用 Django-facebook 的 facebook 相关的所有内容以及使用 social-auth 或 allauth 与 twitter 相关的所有内容。这种组合会奏效吗？

提前感谢您的宝贵建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:39:47.513

`django-social-auth`关心它的同名：*authentication*。您列表中的前 3 项处理身份验证（加上配置文件），所以我会使用`django-social-auth`这些。

其余的是与各种服务的交互，最好由您提到的其他库（`django-facebook`等）提供服务。`django-social-auth`将负责访问令牌和权限，因此您可以将它们与其他应用程序一起使用来执行 API 操作。

# ruby-on-rails - rake 资产：预编译中止，无法推送到 heroku

> ID：11444998
> 
> 赞同：4
> 
> 时间：2012-07-12T04:25:15.063
> 
> 标签：ruby-on-rails, heroku

我正在使用 Enki 博客 gem，它在本地工作，试图准备推送到 heroku（以前从未遇到过问题）。我试图预编译，它做到了这一点

```
/Users/me/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby /Users/me/.rvm/gems/ruby-1.9.3-rc1@ruby193/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
cannot load such file -- uglifier
  (in /Users/me/Sites/bayani/app/assets/javascripts/admin.js) 
```

我以前从来没有遇到过将 Enki 博客推送到 Heroku 的问题，虽然我不知道 uglifier 在哪里，但我记得在我推送过的其他 Enki 博客中看到过它，所以我不知道为什么它现在会产生问题.

当我推送到 Heroku 并且它也中止了预编译

```
Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       no such file to load -- uglifier
       (in /tmp/build_5tbsi7k7ddhk/app/assets/javascripts/admin.js)
       Tasks: TOP => assets:precompile:primary
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation
       Please see this article for troubleshooting help:
       http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting 
```

在阅读了它提供的链接上的故障排除文章后，我把它放在了 application.rb

```
config.assets.initialize_on_precompile = false 
```

但我仍然有同样的问题

这是 admin.js。它只是一个清单文件。这是 enki 的链接[https://github.com/xaviershay/enki](https://github.com/xaviershay/enki)

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require jquery.livequery
//= require jquery.form
//= require jquery.easing.1.3
//= require humanmsg
//= require_tree ./admin 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T05:20:19.190

将以下内容添加到 Gemfile。

```
group :assets do
  gem 'therubyracer'
  gem 'sass-rails', "  ~> 3.1.0"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
end 
```

跑

**捆绑安装**

**rake 资产：预编译**

我希望，它会很有用。