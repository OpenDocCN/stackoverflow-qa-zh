# StackOverflow 问答 12028000-12028999

# objective-c - 对象 C 中的方法语法

> ID：12028003
> 
> 赞同：-2
> 
> 时间：2012-08-19T16:16:10.147
> 
> 标签：objective-c, syntax, methods

谁能为我解释下面的方法声明语法？我无法理解“(void)”旁边的“connection:(NSURLConnection *)connection”部分

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:20:57.737

```
 -                             // method type. - is instance method, + is class method
 (void)                        // return type
 connection:                   // method name
 (NSURLConnection *)connection // first argument and its type
 didReceiveResponse:           // method name continues
 (NSURLResponse *)response     // second argument and its type 
```

但是您可能应该找一本书并实际学习 Obj-C。如果您不了解语法，那么您还有很长的路要走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:21:51.600

可以这样想：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

1.  void 是返回类型；

2.  该方法采用名为`connection`type的第一个参数`NSURLConnection*`；

3.  该方法接受一个名为`response`type的第二个参数`NSURLResponse*`。

这是编写方法签名的另一种方式。如果您将其视为：

```
- (void)connection:didReceiveResponse: 
```

Obj-C（与 C 或 C++ 相比）的特点是参数在签名中混杂在一起。这样做的好处是您可以轻松地为方法调用中的每个参数命名：

```
[connection:currentConnection didReceiveResponse:lastResponse]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:22:53.997

它在 Cocoa 中的委托回调中传递原始对象的标准，在这种情况下是已收到响应的 NSURLConnection。

如果您一般不理解方法语法，那么可能会阅读目标 c，并在此处查看其他答案

# c# - 如何使用自定义ip地址浏览网页c#/.net

> ID：12028010
> 
> 赞同：0
> 
> 时间：2012-08-19T16:17:12.987
> 
> 标签：c#, ip, webbrowser-control, ip-address, virtual-ip-address

我正在尝试使用自定义（用户提供的）IP 地址浏览网页，但它不起作用。webBrowser1 成功加载网页，但它没有使用自定义 IP 地址，它加载具有真实 IP 地址的页面。

请告诉我如何成功完成这项工作。

这是我的代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        IPAddress addr1 = IPAddress.Parse("192.168.1.100");
        webBrowser1.ScriptErrorsSuppressed = true;
        webBrowser1.Navigate("www.whatismyip.com");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:21:26.690

你不能像这样改变你的IP。您的代码显然不起作用，因为您刚刚创建了一个 IPAddress 类型的变量并为其分配了一些值。如果您想要一个当前从您的互联网提供商分配的不同 IP 地址，如果您无法通过重新启动调制解调器来更改您的 IP，则需要使用代理或 TOR。但是，它显然不允许您使用任何您想要的 IP。

# jquery - 仅在一个锚上分类并从该 ul 中的所有锚中删除

> ID：12028012
> 
> 赞同：1
> 
> 时间：2012-08-19T16:17:27.843
> 
> 标签：jquery

我在 html 中有一个 UL，如下所示：

```
<ul class="most-populer">
  <li><a id="popular" class=" " href="#">Most Popular</a></li>
  <li><a id="price" href="#" class=" ">Price</a></li>
  <li><a id="rating" href="#" class=" ">Star Rating</a></li>
  <li><a id="alphabetic" href="#" class="active">Name</a></li>
</ul> 
```

我正在使用 ajax 函数根据这些搜索条件过滤结果。那对我来说很好。现在我想要的是，如果用户单击，`popular`那么只有`popular`锚标记具有`active`类并从其他锚标记中删除。

我知道jquery 的[addClass()](http://api.jquery.com/addClass/)和[removeClass()](http://api.jquery.com/removeClass/)方法

`active`但是，如果用户单击 UL 只有该锚具有类的任何链接，我想以这种方式使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:19:44.077

[jsFiddle 演示](http://jsfiddle.net/Bz37w/1/)

```
$('ul.most-popular li a').click(function( e ){
    e.preventDefault(); // prevent def. anchor behavior !
    $('ul.most-popular').find('.active').removeClass('active');
    $(this).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T16:32:31.310

```
$(".most-populer li a").on("click", function() {
   $(this).addClass("active").parent().siblings().find("a").removeClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T16:19:42.003

```
$(".most_populer a").click(function(e) {
    $(".most_populer a.active").removeClass("active"); // remove active classes
    $(this).addClass("active"); // add active class to clicked element
    e.preventDefault(); // prevent default link behavior
}); 
```

# grails - 如何模拟闭包方法

> ID：12028014
> 
> 赞同：0
> 
> 时间：2012-08-19T16:17:59.597
> 
> 标签：grails, mocking

我有一个定义如下的服务类

```
class MyService {

  def otherService;

  def performService( ) {
     Navigator.navigate( retrieveData, { otherService.doSomething(it) } );
  }
  def retrieveData = { Integer offset, Integer maxRows
     DomainObject.list(offset,maxRows);
  }
}

Navigator.navigate( Closure retriever, Closure processor ) {
   def offset=0;
   def batchsize=100;
   while( (data=retriever(offset,batchsize)) ) {
      if(data.size()==0) break;
      data.each { processor(it) }
      offset += data.size();
   }
} 
```

在我的测试中，我想模拟 retriveData 来检索模拟对象

```
@TestFor(MyService)
class MyServiceSpec extends Specification {
  def "test retriever"() {
     given:
     service.otherService = Mock(OtherService);
     service.metaClass.retrieveData = { Integer offset, Integer maxRows ->
       if(offset==0) return [ Mock(DomainObject), Mock(DomainObject) ]
       else return []
     }
     when:
     service.performService();

     then:
     2 * otherService.doSomething(_);
  }
} 
```

事实证明，测试没有选择模拟的retrieveData，而是总是选择MyService.retrieveData 闭包，想知道模拟闭包方法的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:13:16.580

似乎是因为`retrieveData`是一个字段，而不是一个方法。你能试一下吗：

```
given:
   ...
   service.retrieveData = { Integer offset, Integer maxRows ->
     ...
   } 
```

# java - SwingWorker 更新 multilpe 面板中的多个组合框

> ID：12028016
> 
> 赞同：2
> 
> 时间：2012-08-19T16:18:43.953
> 
> 标签：java, swing, combobox, swingworker, comboboxmodel

我有一个小 gui 程序，它在启动时从 Excel 文件中读取数据，其中一些数据需要转到相关的组合框。我知道如何通过为每个组合框使用单独的 SwingWorker 来做到这一点：

```
public class ExcelReader extends SwingWorker<DefaultComboBoxModel, String> {

    private final DefaultComboBoxModel model;

    // Constructor called from a panel that has a combobox
    public ExcelReader(DefaultComboBoxModel model) {
        this.model = model;
    }

    @Override
    protected DefaultComboBoxModel doInBackground() throws Exception {

        ///// code to read data from Excel file
        ///// publish(someString) used here

        return model;
    }

    @Override
    protected void process(List<String> chunks) {

        for(String row : chunks)
            model.addElement(row);
    }
} 
```

这很好用，但是如何使用一个 SwingWorker 类来填充多个组合框？这将具有读取文件一次的好处。每当找到需要进入组合框的内容时，相关的组合框就会更新，然后程序继续读取下一行，直到文件结束。

因此，我尝试在一个 JPanel 中更新 2 个组合框的情况下使用布尔标志，但这似乎没有按预期工作。这也不是一个好的解决方案，因为将来我计划在多个面板中更新超过 2 个组合框。

```
public class ExcelReader extends SwingWorker<DefaultComboBoxModel[], String> {

    private boolean isData1 = false;
    private final DefaultComboBoxModel model1;
    private final DefaultComboBoxModel model2;
    private final DefaultComboBoxModel[] models = new DefaultComboBoxModel[2];

    // Constructor called from a panel that has 2 comboboxes
    public ExcelReader(DefaultComboBoxModel model1, DefaultComboBoxModel model2) {
        this.model1 = model1;
        this.model2 = model2;
    }

    @Override
    protected DefaultComboBoxModel[] doInBackground() throws Exception {

        ///// some code .....
        ///// some code .....

        // If data that needs to go to combobox1 is found
        if (someExpression)
            isData1 = true;

        publish(someString);

        ///// some code .....
        ///// some code .....

        models[0] = model1;
        models[1] = model2;

        return models;
    }

    @Override
    protected void process(List<String> chunks) {

        for (String row : chunks) {
            if (isData1) {
                model1.addElement(row);
                isData1 = false;
            }
            else
                model2.addElement(row);

    }
} 
```

那么如何只使用一个 SwingWorker 来填充多个组合框（可能包含在不同的面板中）？

顺便说一下，对于上述示例，我从我的一个面板（扩展 JPanel 的类）中调用 ExcelReader。在第一种情况下，调用工作人员的面板只有一个组合框，第二个有 2 个。虽然第一个示例工作正常，但这是在 gui 中更新组合框的正确方法还是应该从其他地方调用工作人员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:01:11.400

*   将您的模型映射到逻辑名称，以便您可以将数据从 excel 附加到 UI 的逻辑部分。
*   将您希望与之交互的 UI 元素（在本例中为模型）传递给工作人员
*   尽快关闭 UI 线程（在本例中为操作）并让`SwingWorker`同步 UI 更新为您。
*   让`SwingWorker`批处理为您更新，同时将它们映射到 UI 中的逻辑函数。

编码：

```
import java.awt.event.ActionEvent;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.swing.AbstractAction;
import javax.swing.BoxLayout;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingWorker;

public class TestPanel extends JPanel {

    private TestPanel() {
        super();
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));

        Map<String, DefaultComboBoxModel> map = new HashMap<String,     DefaultComboBoxModel>();
        for (int i = 0; i < 5; i++) {
            JComboBox combo = new JComboBox();
            add(combo);
            map.put("combo" + i, (DefaultComboBoxModel) combo.getModel());
        }

        add(new JButton(new AbstractAction("fill me") {

            @Override
            public void actionPerformed(ActionEvent e) {
                new MyWorker(map).run();
            }
        }));

    }

    private class MyWorker extends SwingWorker<Void, String[]> {

        private final Map<String, DefaultComboBoxModel> map;

        public MyWorker(Map<String, DefaultComboBoxModel> map) {
            this.map = map;
        }

        @Override
        protected Void doInBackground() throws Exception {
            for (int i = 0; i < 20; i++) {
                String[] cell = new String[2];
                cell[0] = "combo" + i % 5;
                cell[1] = "value " + i;
                publish(cell);
            }
            return null;
        }

        @Override
        protected void process(List<String[]> chunks) {
            for (String[] chunk : chunks) {
                map.get(chunk[0]).addElement(chunk[1]);
            }
        }

    };

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the 
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("SwingWorker");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new TestPanel();
        frame.setContentPane(panel);

        // Display the window.
        frame.setSize(200, 300);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# cocoa - 日期时间格式界面

> ID：12028020
> 
> 赞同：0
> 
> 时间：2012-08-19T16:19:17.813
> 
> 标签：cocoa

我的应用程序显示了许多日期/时间，我希望允许用户使用友好的界面创建自己的格式，例如图像中显示的 OSX 系统 UI![系统日期/时间格式界面](../Images/807cebc2b504870999353b9b3103b1af.png)

我找不到任何可可或 CF API 来显示类似的面板，如果可能的话，我宁愿不要从头开始重新实现它。

任何人都可以指出我是否可以从标准 API 显示此面板，或者是否存在可立即使用的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:29:12.600

您正在寻找 NSTokenField，尽管您需要进行一些修改以使其适用于您的情况。

# php - WebView 中的按钮链接回另一个应用程序活动

> ID：12028024
> 
> 赞同：3
> 
> 时间：2012-08-19T16:19:38.370
> 
> 标签：php, android, webview

我有一点问题。我需要在我的第一个活动中链接到一个在线网页。我已经使用 WebView 完成了这项工作。一旦我的 WebView 在我的活动中显示网页，相应的在线页面中就会有一个按钮，该按钮必须链接到下一个应用程序活动。我将如何设法识别该按钮 (ID)，然后使其链接到下一个不是 WebView 的活动？

我想知道如何做到这一点，以及它是否有特定的名称。可以使用该页面上的 Php 来完成。如果你们中的一些人发现有用的东西，甚至是解决这个问题的方法，请帮助我，我一定会奖励你的答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:59:11.407

我不认为你需要使用 php 来实现这一点。为了使其工作，您必须在清单中的活动意图过滤器中添加一些内容。这是一个示例意图过滤器条目：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="http" android:host="yourwebsite.com"
  android:path="/ActivityName/" />
</intent-filter> 
```

然后在您的网页上，您可以创建这样的链接：

```
<a href="http://yourwebsite.com/ActivityName/">Goto next Activity</a> 
```

当您单击链接时，它应该让用户选择使用您的应用程序打开它。我建议指示他们选中“始终使用此应用执行此操作”复选框，这样他们就不会每次都出现选择。

注意：`ActivityName`路径中的 不是必需的（它可以是任何东西），但是如果您有多个活动可以以这种方式启动，使用活动名称对我来说似乎是一个合乎逻辑的选择。

[这个网站包含另一个很好的例子。](http://www.techrepublic.com/blog/app-builder/web-to-app-interoperability-launch-your-android-app-from-the-web/1011)以及如何将数据从网页发送到应用程序的示例。

# php - Cakephp 将长视图.ctp 拆分成更小的视图

> ID：12028031
> 
> 赞同：1
> 
> 时间：2012-08-19T16:20:00.387
> 
> 标签：php, templates, cakephp

我在 cake 中的一个视图文件变得很长，已经有 300 多行了。而且我发现很难跟踪理解。

将它们拆分为较小的文件然后将它们包含在父视图文件中是个好主意吗？

如果可以完成，

1.  我应该在什么扩展名中创建较小的文件？.ctp 还是 .php？
2.  将它们包含在 require_once(view-child1.ext) 中应该没问题，对吧？

我对 cakePHP 相当陌生。所以我更喜欢这里的专家的建议。请让我朝着正确的方向前进。

**编辑**

谢谢你们的帮助。

我尝试过这个。但我似乎无法传递变量。echo $this->Element('reviews/view-goal',$history); 父视图显示该元素中的未定义变量并显示错误。

我从这个循环中调用元素：

```
foreach($histories as $date => $history) 
```

无法通过$历史。但是 $hisories 正在正确传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:25:38.973

是的，这是一个非常好的主意。但是不要使用普通`require()`的PHP。

CakePHP 有一个[称为“元素”的特性](http://book.cakephp.org/2.0/en/views.html#elements)，这是一种将视图的一部分放入单独`.ctp`文件的机制。这些文件放在一个特殊的文件夹中，`View/Elements`

您可以包含这样的元素：

```
echo $this->element('sidebar/recent_comments'); 
```

如果您需要元素内的任何变量，则需要将它们传递到一个额外的数组参数中：

```
echo $this->element('sidebar/recent_comments', array('variable_name' => /* Variable content */)); 
```

为了使您的视图文件保持较小，您还应该确保将大多数页面（页眉、页脚）共享的内容放入[布局](http://book.cakephp.org/2.0/en/views.html#layouts)文件中。显然：将 JS 和 CSS 保存在外部文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:27:22.840

您应该在带有扩展名的`View/Elements`文件夹中创建元素。`.ctp`

[此链接](http://book.cakephp.org/2.0/en/views.html#elements)将帮助您将视图文件与相关/重复的代码完全分离。

元素基本上是一个迷你视图，可以包含在其他视图、布局甚至其他元素中。元素可用于使视图更具可读性，将重复元素的渲染放置在其自己的文件中。它们还可以帮助您在应用程序中重用内容片段。

元素位于 /app/View/Elements/ 文件夹中，并具有 .ctp 文件扩展名。它们是使用视图的元素方法输出的：

```
<?php echo $this->element('helpbox'); //without extension ?> 
```

您可以将变量从视图传递给元素。

在您看来：

```
 <?php echo $this->Element('reviews/view-goal', array('history' => $history)); 
```

在 view-goal.ctp 元素中，您可以直接访问`$history`变量。

# sql - 无法解决临时表和 sys.objects 之间的排序规则冲突

> ID：12028033
> 
> 赞同：7
> 
> 时间：2012-08-19T16:20:55.807
> 
> 标签：sql, sql-server, tsql

以下 T-SQL 代码：

```
CREATE TABLE #exclude(name VARCHAR(256))
INSERT INTO #exclude VALUES('someprefix_someprocedure')

SELECT 'someschema.' + sys.objects.name
FROM sys.objects
  LEFT JOIN #exclude ON sys.objects.name = #exclude.name
WHERE sys.objects.name LIKE 'someprefix_%'
  AND type IN ('FN', 'TR', 'P')
  AND #exclude.name IS NULL
ORDER BY sys.objects.name ASC 
```

返回此错误：

> **消息 468，第 16 级，状态 9，第 4 行**
> 
> 无法解决等于操作`Danish_Norwegian_CI_AS`之间的排序规则冲突。`SQL_Latin1_General_CP1_CI_AS`

我尝试将此附加到查询中，但它仍然返回相同的错误：

```
COLLATE SQL_Latin1_General_CP1_CI_AS ASC 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T11:24:09.843

在 WHERE 或 ON (JOIN) 子句中将以下内容添加到产生此错误的任何字段中： `COLLATE DATABASE_DEFAULT`.

例如（你上面的问题）

```
CREATE TABLE #exclude(name VARCHAR(255))
INSERT INTO #exclude VALUES('someprefix_someprocedure')

SELECT 'someschema.' + sys.objects.name
FROM sys.objects
  LEFT JOIN #exclude ON sys.objects.name COLLATE DATABASE_DEFAULT = #exclude.name COLLATE DATABASE_DEFAULT
WHERE sys.objects.name LIKE 'someprefix_%'
  AND type IN ('FN', 'TR', 'P')
  AND #exclude.name IS NULL
ORDER BY sys.objects.name ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T09:08:03.207

创建表格`#exclude`时，您需要添加`COLLATE DATABASE_DEFAULT`到任何文本字段 - 如下所示：

```
CREATE TABLE #exclude(name VARCHAR(256) COLLATE DATABASE_DEFAULT NULL)
INSERT INTO #exclude VALUES('someprefix_someprocedure')

SELECT 'someschema.' + sys.objects.name
FROM sys.objects
  LEFT JOIN #exclude ON sys.objects.name = #exclude.name
WHERE sys.objects.name LIKE 'someprefix_%'
  AND type IN ('FN', 'TR', 'P')
  AND #exclude.name IS NULL
ORDER BY sys.objects.name ASC 
```

# macos - Postgres.app 无法在端口 5432 上启动

> ID：12028037
> 
> 赞同：65
> 
> 时间：2012-08-19T16:21:33.983
> 
> 标签：macos, postgresql

我正在使用[http://postgresapp.com](http://postgresapp.com)。在菜单栏中，它给出错误“无法在端口 5432 上启动”。同样，如果我尝试从终端启动服务器，我会得到：

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

我也运行`pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start` 并获得了输出`server starting`，但在连接到 psql 时仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2016-10-18T05:01:36.530

如果您在 macOS 机器上运行服务器并通过 Homebrew 安装 Postgres，您可以像这样停止当前实例：

> 酿造服务停止 postgresql

然后单击屏幕顶部本机菜单栏中的大象，它应该会成功启动。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2017-05-06T21:43:54.407

您可以通过查找 PID 来停止该过程

```
lsof -i :5432 
```

然后用

```
kill -9 <PID> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-11-15T20:30:55.757

如果您通过其他方法（例如，从 www.postgresql.org）安装了 Postgres，并且它在启动时自动启动，您可以通过以下方式阻止 Postgres 启动：

```
sudo launchctl unload /Library/LaunchDaemons/com.edb.launchd.postgresql-X.X.plist  
sudo rm -f /Library/LaunchDaemons/com.edb.launchd.postgresql-X.X.plist 
```

**提示：在`com.edb.launchd`部件后使用选项卡自动完成以找出正在加载的版本。**

重新启动 Postgres.app，你应该一切顺利。

（来自[http://forums.enterprisedb.com/posts/list/1831.page;jsessionid=70621DC48C99EDE663A6A594B05F1A02#6782](http://forums.enterprisedb.com/posts/list/1831.page;jsessionid=70621DC48C99EDE663A6A594B05F1A02#6782)）

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-12-12T20:08:07.893

我只是有这个确切的问题。当我运行`which psql`它时，它指向与 Lion 一起安装的 Postgres 客户端工具：

`/usr/bin/psql`

使用[Frank Wiles](http://www.revsys.com/writings/postgresql/errors.html#cannot-connect-local)的提示，我运行`ps auxw | grep post`以确认 postgres 正在运行并且它正在正确的端口上运行，这也向我显示了 postgres.app 路径：

`/Applications/Postgres.app/Contents/MacOS/bin/postgres`.

所以我通过 .bash_profile 编辑以导出该目录。在第一次尝试中，我将它添加到路径的尽头。当我运行时，`echo $PATH`我可以看到 usr/bin 是路径中的第一件事，并且`which psql`仍然给出了`/usr/bin`路径。那时，一位朋友引导我朝着正确的方向前进：

`export PATH="/Applications/Postgres.app/Contents/MacOS/bin:${PATH}"`

启动一个新的终端窗口，然后运行`which psql`——它应该指向 postgres.app 位置并且 psql 应该启动 postgres shell。现在工作正常。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-10-18T01:49:44.403

你我有另一个 postgres 实例正在运行，这是唯一对这个端口感兴趣的应用程序。您应该使用 netstat 和 ps 来确定这一点。然后停止实例并卸载它，例如您可能已经安装了enterpiseDb，这就是我所做的。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2015-03-07T16:51:39.577

我已经尝试了几乎所有解决这个问题的方法。对我来说，它总是在我的 MacBook 电池没电时发生，即使计算机已经在休眠。我四处`~/Library/Application\ Support/Postgres/var-9.4`寻找，发现了另一个`postmaster.pid`我以前从未见过的文件。我删除了它，现在一切都恢复正常了！我正在运行 Postgres.app 版本，而不是 brew 版本。

我采取的步骤：

1.  确保`postgres.app`没有运行。
2.  跑`rm ~/Library/Application\ Support/Postgres/var-9.$X/postmaster.pid`
3.  如果您没有`var-9.$X`目录，只需运行`rm ~/Library/Application\ Support/Postgres/postmaster.pid`
4.  重新开始`postgres.app`
5.  回去开发很酷的东西。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2018-12-18T01:03:39.217

这个命令是一个单行命令，可以立即杀死所有 PostgresSQL 进程。

```
sudo kill -kill $(sudo lsof -t -i :5432) 
```

这解决了我在 Mac OSX Mojave 10.14.1 上的所有问题。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-10-28T07:44:49.833

我有一个类似的问题，即使应用程序本身说它在端口 5432 上运行，我也无法连接到 Postgres.app。

我不知道为什么，但即使我退出应用程序并检查是否没有使用 ps -a 运行 postgres 进程。这些文件存在：

```
/tmp/.s.PGSQL.5432 
```

和

```
/tmp/.s.PGSQL.5432.lock 
```

我的解决方案是删除这些文件，然后再次启动 postgres.app。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2020-05-26T11:07:40.290

我通常在我的 Mac 上遇到这个问题，这总是为我解决这个问题

```
rm /usr/local/var/postgres/postmaster.pid
brew services restart postgresql 
```

希望这会有所帮助

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-04-11T20:17:41.210

PID 也可能被占用。当计算机意外重新启动时，这发生在我身上。

如果是这样，您必须前往：

```
˜/Library/Application Support/Postgres/var-9.4 
```

您可以在 Postgres.app 首选项对话框中检查该路径。

然后，只需删除 pid 文件

```
sudo rm postmaster.pid 
```

服务器立即启动。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2020-12-26T05:35:26.523

这对我有用：$ sudo pkill -u postgres

此资源的道具： [https ://github.com/PostgresApp/PostgresApp/issues/197#issuecomment-474534056](https://github.com/PostgresApp/PostgresApp/issues/197#issuecomment-474534056)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-10-28T06:35:57.753

当尝试打开 Postgres 应用程序时，在 5432 后出现同样的错误（在 Mac OSX 10.10.5 上）

我做了：

```
$ lsof -i | grep LISTEN 
```

看到哪个 PID 在那个端口运行 postgres，做了： `$ killall {pid}`然后`$ brew uninstall postgres`

之后，重新启动我的 Mac，然后运行：

`$ lsof -i | grep LISTEN`再次确定。没有看到任何地方运行 postgres，并且能够在没有收到警告的情况下打开 Postgres 应用程序。

然后我重新安装了postgres`$ brew install postgres`

**另一种选择**：

*（当上述方法不起作用并且我无法杀死任何PID时，我也尝试过一次）*

```
$ ps auxw | grep post 
```

看到了很多 postgres 进程，然后我`sudo kill <PID>`

现在一切正常。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-08-20T02:07:56.010

猜测是，其他东西占用了端口 5432，因此应用程序选择在 5433 上运行。

为什么不直接连接到端口 5433 上的 Pg，如果那是它运行的地方？您有一个`/tmp/.s.PGSQL.5432`套接字文件，因此您可以使用`psql -p 5433`UNIX 域套接字连接进行连接。它还将使用 TCP/IP 侦听同一端口，因此您可以使用`psql -h localhost -p 5433`TCP/IP 并让您的应用程序连接到端口 5433 而不是 5432。

更改您`.psqlrc`以将新端口设置为默认端口，您可能会忘记它不在默认端口上。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-08-16T14:45:03.517

尝试将 postgresql 与 rails 一起使用时，我遇到了类似的问题。更新我的 Gemfile 以使用新版本的 gem pg 为我解决了这个问题。（gem pg 版本 0.16.0 有效）。在 Gemfile 中使用：

```
gem 'pg', '0.16.0' 
```

然后运行以下命令来更新 gem

```
bundle install --without production
bundle update
bundle install 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-10-10T02:28:52.133

我的突然启动失败，当我检查 Console.app 时，我看到：

```
com.heroku.postgres-service: 
FATAL:  could not create shared memory segment: Cannot allocate memory
DETAIL:  Failed system call was shmget(key=5432001, size=3874816, 03600).
HINT:  This error usually means that PostgreSQL's request for a shared memory segment exceeded available memory or swap space, or exceeded your kernel's SHMALL parameter.  You can either reduce the request size or reconfigure the kernel with larger SHMALL.  To reduce the request size (currently 3874816 bytes), reduce PostgreSQL's shared memory usage, perhaps by reducing shared_buffers or max_connections.
The PostgreSQL documentation contains more information about shared memory configuration. 
```

事实证明 Postgres 无法启动，因为我运行了 Wireshark（和 X11）。在我退出 Wireshark 后它运行良好。

祝你好运！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-07-09T12:54:39.943

我解决了这个问题

1.  通过在 CL 中使用“netstat”来识别端口 5432 上运行的内容，这是 postgreSQL 而不是 Postgres
2.  我找到了包含 postgreSQL 的目录，即 root/Library/PostgreSQL
3.  我确保应用程序的瞬间没有通过活动监视器运行
4.  然后我删除了文件夹并重新启动！一切都很好！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-08-10T21:15:08.460

不知何故，我完全忘记了这个套接字文件会因为点而被隐藏。`ls -A /tmp/.s.PGSQL.5432`如果您正在检查套接字是否确实存在，请确保使用。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-02-26T09:52:02.163

您很可能安装了 PostgreSQL，将其删除并重新安装。PostgreSQL 通常使用端口 5432，但如果不可用，则会增加到下一个可用端口，在本例中为 5433。因此，您可能在第二次安装时选择了此端口。

我认为你应该检查文件：

**/etc/服务**

并根据您的预期端口号调整下面的行：

**postgresql 5432/udp #PostgreSQL 数据库**

**postgresql 5432/tcp #PostgreSQL 数据库**

在此之后，您应该重新启动计算机（最简单的方法）。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-11-22T03:43:00.123

我有同样的问题：

```
psql：无法连接到服务器：没有这样的文件或目录
    服务器是否在本地运行并接受
    Unix域套接字“/tmp/.s.PGSQL.5432”上的连接？
```

在我的情况下，这是我的 Mac 上损坏的主机文件。我失踪了：

```
127.0.0.1 本地主机

```

一个快速简单的检查方法是打开终端并输入：

```
ping 本地主机

```

或者：

```
scutil -r 本地主机
```

更多信息[在这里](https://github.com/PostgresApp/PostgresApp/issues/200#) 希望它有所帮助。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-11-19T12:57:21.900

Netstat、ps aux 等...没有显示 5432 正在使用中。检查/图书馆。发现 PG9.6 旧安装仍然存在。rm -rf 并砰的一声。版本 11 工作正常。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-07-18T11:55:50.733

我对这个问题失去了理智！我一直在奔跑

> lsof -i | grep 5432

什么都没有出现！最后我使用 sudo 运行它，然后出现了一个 potgres 客户端。因此，如果其他人尝试过 lsof 却无处可去，请使用 sudo 尝试一下。

> 须藤 lsof -i | grep 5432

进而

> sudo kill <the_pid_from_postgresql_found_from_lsof>

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-09-23T15:12:50.410

同样的问题也发生在我身上。一段时间以来，我一直在运行 Postgres.app 9.2.4.1。当我将 Mac OS X 更新到 10.8.5 时，强制重启后它不再工作了。我尝试了几件事，包括更新到 9.2.4.3，但在再次重启后它都没有工作。

我必须打开文件`/Users/$USER/Library/Application Support/Postgres/var/postgresql.conf`并：

1.  取消注释行`unix_socket_permissions = 0777`
2.  取消注释并调整行`unix_socket_directory = '/tmp'`

重新启动后，Postgres.app 运行起来就像一个魅力。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-09-30T16:29:43.063

一个名为“postmaster.pid”的文件（在我的 $PGDATA 目录中）阻止了 postgresql 启动。这是一个僵尸文件，10 天前放在那里，当我残酷地关闭计算机（拔掉插头，字面意思）时，没有清理过程有机会删除该文件。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-08-21T07:17:16.533

除了所有有用的答案之外，您可能还想查看官方页面说明： [postgressapp.com/documentation/remove.html](https://postgresapp.com/documentation/remove.html)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-12-16T17:06:47.193

我有同样的问题，我的问题是由我遇到的一些配置问题引起的。清除用户配置并在 brew 中重新安装 postgres 对我有用！

```
brew uninstall postgresql
rm -rf /usr/local/var/postgres
```

# sql - 从表中选择一组动态列并获取每个列的总和

> ID：12028041
> 
> 赞同：3
> 
> 时间：2012-08-19T16:22:42.530
> 
> 标签：sql, postgresql, aggregate-functions, plpgsql, dynamic-sql

是否可以在 Postgres 中执行以下操作：

```
SELECT column_name FROM information_schema WHERE table_name = 'somereport' AND data_type = 'integer';

SELECT SUM(coulmn_name[0]),SUM(coulmn_name[1]) ,SUM(coulmn_name[3]) FROM somereport; 
```

换句话说，我需要根据某些条件从表中选择一组列，然后对表中的每一列求和。

我知道我可以循环执行此操作，因此我可以独立计算每一列，但显然这需要对从信息模式查询返回的每一列进行查询。例如：

```
FOR r IN select column_name from information_schema where report_view_name = 'somereport' and data_type = 'integer';
LOOP
    SELECT SUM(r.column_name) FROM somereport;
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T00:47:58.147

此查询创建您需要的完整 DML 语句：

```
WITH x AS (
   SELECT 'public'::text     AS _schema  -- provide schema name ..
         ,'somereport'::text AS _tbl     -- .. and table name once
   )
SELECT 'SELECT ' || string_agg('sum(' || quote_ident(column_name)
                 || ') AS sum_' || quote_ident(column_name), ', ')
       || E'\nFROM   ' || quote_ident(x._schema) || '.' || quote_ident(x._tbl)
FROM   x, information_schema.columns
WHERE  table_schema = _schema
AND    table_name = _tbl
AND    data_type = 'integer'
GROUP  BY x._schema, x._tbl; 
```

您可以单独执行它或将此查询包装在 plpgsql 函数中并使用以下命令自动运行查询`EXECUTE`：

### 全自动化

用 PostgreSQL 9.1.4 测试

```
CREATE OR REPLACE FUNCTION f_get_sums(_schema text, _tbl text)
  RETURNS TABLE(names text[], sums bigint[]) AS
$BODY$
BEGIN

RETURN QUERY EXECUTE (
    SELECT 'SELECT ''{'
           || string_agg(quote_ident(c.column_name), ', ' ORDER BY c.column_name)
           || '}''::text[],
           ARRAY['
           || string_agg('sum(' || quote_ident(c.column_name) || ')'
                                                   , ', ' ORDER BY c.column_name)
           || ']
    FROM   '
           || quote_ident(_schema) || '.' || quote_ident(_tbl)
    FROM   information_schema.columns c
    WHERE  table_schema = _schema
    AND    table_name = _tbl
    AND    data_type = 'integer'
    );

END;
$BODY$
  LANGUAGE plpgsql; 
```

称呼：

```
SELECT unnest(names) AS name, unnest (sums) AS col_sum
FROM   f_get_sums('public', 'somereport'); 
```

回报：

```
 name        | col_sum
---------------+---------
 int_col1      |    6614
 other_int_col |    8364
 third_int_col | 2720642 
```

### 解释

困难在于定义`RETURN`函数的类型，而返回的列的数量和名称会有所不同。一个有点帮助的细节：您只需要`integer`列。

我通过形成一个`bigint`（`sum(int_col)`返回`bigint`）数组来解决这个问题。此外，我返回一个列名数组。两者都按列名的字母顺序排序。

在函数调用中，我将这些数组拆分[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)为显示的漂亮格式。

动态创建和执行的查询是高级的东西。不要被多层引号弄糊涂。基本上你有`EXECUTE`一个包含要执行的 SQL 查询的文本参数。反过来，此文本由构建主查询的查询字符串的辅助 SQL 查询提供。

如果这一次太多或者`plpgsql`对您来说相当新，请从[这个相关答案](https://stackoverflow.com/a/8146245/939860)开始，我解释处理一个更简单的功能的基础知识，并提供主要功能手册的链接。

如果*性能*很重要，请直接查询 Postgres 目录（`pg_catalog.pg_attributes`）而不是使用标准化的（但速度慢）`information_schema.columns`。这是一个[简单的例子`pg_attributes`](https://stackoverflow.com/a/10956124/939860)。

# ios - ios自定义后退按钮（不在导航栏中）

> ID：12028043
> 
> 赞同：1
> 
> 时间：2012-08-19T16:22:50.670
> 
> 标签：ios, navigation, back

我正在视图之间建立自己的导航，并且我有目的隐藏导航栏。不过，我需要一个**视图内的**按钮（在导航栏外读取），其行为类似于“后退”按钮。是否有可以分配给自定义按钮的调用方法？

我尝试了标准推送序列，但循环返回会创建新实例，我只需要一个标准的返回行为（这将破坏当前实例）。

我想这很明显，但不知何故我一直想念它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T16:27:02.557

在您的视图中正常创建一个按钮，然后将其连接到从堆栈中弹出视图的方法。像这样的东西：

```
- (IBAction) pressedBackButton:(UIButton *)sender {
   [self.navigationController popViewControllerAnimated:YES];
} 
```

# node.js - npm 安装 https

> ID：12028046
> 
> 赞同：14
> 
> 时间：2012-08-19T16:22:57.933
> 
> 标签：node.js, express

希望一个简单的问题 `npm install http`可以正常工作，我可以通过端口 80 连接到第三方服务。 `npm install https`相比之下，不会锁定到公认的包裹

虽然我在这里看到了对包 https 的引用：

[Node.js Express 中的 HTTP GET 请求](https://stackoverflow.com/questions/9577611/http-get-request-in-node-js-express)

在 node.js / Express中打包的`https`类比是什么？`http`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-19T16:24:57.177

所以 Node 本身有两个模块来创建一个 http 服务器和一个 https 服务器：

*   HTTP [http://nodejs.org/api/all.html#all_http](http://nodejs.org/api/all.html#all_http)
*   HTTPS [http://nodejs.org/api/all.html#all_https](http://nodejs.org/api/all.html#all_https)

这意味着您不需要 NPM 来让它们工作，它们甚至在 NPM 本身之前就存在。

另一方面，NPM 将使您能够访问那些出色的模块/框架。

[Express](http://expressjs.com/)是一个基于[connect](http://www.senchalabs.org/connect/) blabla 的框架……只要您不是在寻找完整的咖啡机框架，制作 API 或网站就很棒。有一些建立在 Express 之上，比如[rails.js](http://railwayjs.com)

[请求](https://github.com/mikeal/request)进行 HTTP 或 HTTPS 查询。Request 很棒，它一直在变得更好，并且是迄今为止从节点应用程序中获取任何 Web 内容的最佳工具。如果你正在寻找的是做一个刮板，你可能想看看[cheerio](https://github.com/MatthewMueller/cheerio)。

PS：我花时间给出了一个很好的答案。但是您应该知道，开发人员的最佳品质是能够阅读文档，而不是甚至不看文档就哭泣寻求帮助。我的两分钱。

# javascript - $(document).ready() 中定义的调用函数

> ID：12028049
> 
> 赞同：7
> 
> 时间：2012-08-19T16:23:09.130
> 
> 标签：javascript, jquery, html

我拥有的内部和外部 JS 文件

```
$(document).ready(function() {
    var example = function(){ alert("hello") }
}); 
```

我想从我的 html 中调用该函数，我该怎么做？

```
<img src="..." ondblclick="example()" /> 
```

*nb 我知道[jquery dblclick()](http://api.jquery.com/dblclick/)但对如何正确执行上述操作感到好奇。*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-19T16:24:00.763

```
$(document).ready(function() {
    window.example = function() {
        alert("hello")
    }
}); 
```

如果可能的话，或者在外面定义它。看起来它根本不需要在文档中定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T16:24:16.383

最好的选择是简单地在外部定义函数`document.ready()`。没有`$(document).ready()`必要在事件中定义函数，就好像你在函数中调用`$(document).ready()`函数一样，保证文档准备就绪。

但是，您也可以在全局窗口对象上定义函数，如下所示：

```
$(document).ready(function() {
    window.example = function(){ alert("hello") }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T16:49:58.310

此处的其他解决方案将起作用，但在您的项目结构上，最好的解决方案是从 HTML 中删除事件处理代码并完全通过 javascript 连接事件（分离 HTML/JS）。由于您的项目中已经有 jQuery，这很容易。为此，您需要做的就是在图像上放置某种标识：

```
<img id="example" src="..." /> 
```

然后，您可以像这样在您的 ready() 函数中连接事件代码

```
$(document).ready(function() {
    $("#example").dblclick(function() {
        alert("Hello");
    });
}); 
```

这具有以下优点：

1.  它不创建全局变量 - 减少全局命名空间污染。
2.  它将 HTML 与 javascript 分开，将控制行为的所有代码保持在一个紧凑的位置，通常是一件好事
3.  使用事件监听器比使用 . `ondblclick`- 允许代码的多个不同部分在同一对象上使用不冲突的事件处理程序

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T16:51:36.513

如果您想从 HTML 访问它，您的函数应该是全局的（实际上是 window 对象的属性）。但最佳做法是避免使用全局变量和函数，而是使用命名空间：

```
// let's publish our namespace to window object
if (!window.myNamespace){
    // creating an empty global object
    var myNamespace = {};
}

// and add our function to it
$(document).ready(function() {
    myNamespace.example = function(){ alert("hello"); }
}); 
```

我们可以像这样在 HTML 中使用它：

```
<img src="..." ondblclick="myNamespace.example()" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T16:31:19.627

@Esailija 已正确回答，但如果您想保持原样，则只需将其删除`var`并使其成为全球性的。

```
var example;
$(document).ready(function() {
  example = function() {
    alert("hello")
  }
}); 
```

如果你不把`var`变量/函数/对象变成全局的。使用`var`你在`document.ready`函数中设置它的上下文。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-19T16:43:16.543

您可以将函数声明移到 DOM-ready 处理程序之外：

```
function example(){ alert("hello") }

$(document).ready(function() {
    // code
}); 
```

但更好的解决方案是将 JavaScript 保留在 .js 文件中并避免使用内联事件处理程序。给你的元素一个 id 并获取它：

```
<img src="..." id="imgid" />

$(document).ready(function() {
    document.getElementById("imgid").ondblclick = function(){ alert("hello") }
}); 
```

# javascriptmvc - JavascriptMVC 路由示例

> ID：12028051
> 
> 赞同：1
> 
> 时间：2012-08-19T16:23:39.290
> 
> 标签：javascriptmvc

我盯着 JavascriptMVC，目前正在尝试找出 jQuery.route。我知道还有其他执行路由的 3rd 方插件，但我特别想弄清楚 Javascript MVC 附带的 jQuery.route。

我熟悉 Backbone.js 和 Ember 的路由框架，但我就是不了解 JMVC。我已尝试阅读文档并查看[此处](http://javascriptmvc.com/docs.html#!jQuery.route)的代码，但没有示例并且仍然无法弄清楚。

我正在尝试做一些基本的事情，例如，如果浏览器看到类似的 URL

```
http://localhost/helloWorld#state1 
```

然后将执行一些功能。类似于 Backbone 和 Ember 的工作方式。这可以使用 JavascriptMVC 的 jQuery.route 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:33:08.280

我认为*[deparam](http://javascriptmvc.com/docs.html#!jQuery.route.deparam)*应该适用于找出当前页面的路线的任务：

```
var currentRoute = $.route.deparam(window.location.current);
if (currentRoute == "state1") {
    // handle route
} 
```

# twitter-bootstrap - Twitter Bootstrap 必不可少的工具

> ID：12028052
> 
> 赞同：-3
> 
> 时间：2012-08-19T16:23:45.333
> 
> 标签：twitter-bootstrap

嗨，我刚开始开发*自己的网站*，并且经过多次搜索，发现**twitter Bootstrap**对初学者来说是一个直接的帮助。是否有任何关于它的建议。我的选择是最好的吗？

> 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:29:32.330

Twitter Bootstrap 是一个用户界面框架。这意味着您可以使用它来设计网站上所有页面的布局。这很好。我在我的网站上使用它。

如果您正在寻找一种工具来帮助您处理网站的内部工作、存储数据、验证用户等，那么您正在寻找一个 Web 应用程序框架 - Bootstrap 无法帮助您解决这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:29:28.973

Bootstrap 是一个非常健壮的 CSS 框架。它确保您的网站可以在许多不同的平台上运行。它的视觉吸引力。但是，如果您不对其进行自定义，您的网站将看起来像其他人的一样。我一定要查看[http://builtwithbootstrap.com/](http://builtwithbootstrap.com/)以了解该框架可以做什么。

# visual-studio-2010 - 在 Visual Studio 中仅对最近修改过的文件执行搜索

> ID：12028053
> 
> 赞同：0
> 
> 时间：2012-08-19T16:23:47.160
> 
> 标签：visual-studio-2010, visual-studio, ide, replace

我想知道 Visual Studio 的内置搜索是否有办法只查看在特定时间范围内修改过的文件。

我认为这将非常方便，尤其是在使用大型代码库时，您实际上不需要在古代代码中搜索某些东西（甚至是比一个月甚至一周更早的代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:32:26.620

不。Visual Studio 2010 中没有。Visual Studio 2012 中也没有（包括 Productivity Power Tools 扩展中的快速查找功能。）

您可能需要使用[Windows Search或](http://www.addictivetips.com/windows-tips/windows-7-findsearch-files-by-date-and-size/)[Agent Ransack](http://www.mythicsoft.com/page.aspx?type=agentransack&page=home)等第三方工具。

# linux - fork() 机制的一部分

> ID：12028054
> 
> 赞同：3
> 
> 时间：2012-08-19T16:23:50.920
> 
> 标签：linux, linux-kernel, fork

在阅读“Linux 内核开发”后，我看到了下一条语句：

> 传统上，在 上`fork()`，父级拥有的所有资源都被复制，并将副本提供给子级。这种方法是幼稚且低效的，因为它复制了许多否则可能被共享的数据。更糟糕的是，如果新进程要立即执行一个新的图像，所有的复制都会浪费

为什么`fork()`需要复制所有父级的资源？为什么我们不能简单地为新进程所需的所有资源分配新的空间块？为什么需要抄袭？最后一个查询 - 如果新进程要立即执行新图像，为什么复制会浪费？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:28:08.210

> 为什么我们不能简单地为新进程所需的所有资源分配新的空间块

`forks(2)`说当你这样做时另一个进程**从那个点**开始执行的语义。所以如果它开始执行，它自然会对声明的变量、它们的值等有一些期望。您需要复制父母有权访问的所有内容*。

```
int x = 42;
fork();
if (parent)
    /* x == 42\. */
else
    /* I can haz x ? */ 
```

> 如果新进程要立即执行新映像，为什么复制会浪费

如果新过程证明不需要从那个点继续，那么这种复制是完全没有用的。例如，如果新进程只是想开始执行一个新程序，它就不需要上面提到的任何变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T17:10:48.953

好吧，这种低效率并不是那么低效率。AFAIK，`fork()`执行**写时复制**。这种机制使内存只有在子进程尝试写入时才被复制。因此，`x`如果子进程不写入，则不会被复制，但它可以访问变量进行读取。写入尝试通常由称为“内存管理单元”的硬件检测。

另一方面，在某些应用程序中，从子进程继承状态变量非常有用，因此在这种情况下“清理”内存空间将没有用处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T14:09:21.160

如果我们没有像使用管道那样执行新图像，那么复制所有父资源非常重要。当他们实现 fork() 时，无论程序员如何使用它都应该是通用的。所以复制父资源是有意义的。

# php - 在while循环中添加到数组时PHP冻结

> ID：12028055
> 
> 赞同：0
> 
> 时间：2012-08-19T16:23:56.263
> 
> 标签：php, arrays, while-loop

我有一个 260k 行的 csv 文件，它有两列。我已经使用 fgetcsv 读取了 csv 文件，并且有一个 while 循环读取文件中的每一行。在循环中，我试图将第二列中的值添加到数组中。

当我将行添加到数组中时，我的 PHP 冻结并且没有完成。我已经完成调试并且值被添加到数组中，所以我知道添加到数组和 while 循环可以工作，但我不知道它为什么会冻结。

如果我删除该行，while 循环将完成 260k 行，然后处理文件的其余部分。

这是我的代码：

```
$amountRecords = 0;
$totalValue = 0;
$valueArray = array();

// reads in csv file
$handle = fopen('Task1-DataForMeanMedianMode.csv', 'r');
// to skip the header names/values
fgetcsv($handle);

// creates array containing variables from csv file
while(($row = fgetcsv($handle, "\r")) != FALSE)
{

    /*
    echo "ROW CONTAINS: ";
    var_dump($row[1]);
    echo "<br />";
    */

    $valueArray[] = $row[1];

    /*
    echo "VALUEARRAY NOW CONTAINS: ";
    var_dump($valueArray);
    echo "<br />";
    */

    $totalValue = $totalValue + $row[1];
    $amountRecords++;

} 
```

以及 csv 文件样本：

```
ID,Value
1,243.00
2,243.00
3,243.00
4,243.00
5,123.11
6,243.00
7,180.00
8,55.00
9,243.00
10,55.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:48:34.440

对于内存不足错误，有两种通用方法。像往常一样，您可以选择简单但错误和困难但正确的选择。简单但错误的解决方案是将[内存限制](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)增加到适当的水平：

```
ini_set('memory_limit', '64M'); 
```

更好（虽然更难）的解决方案是重新设计您的算法以不需要太多内存。这显然是更可持续和更稳健的方法。要正确执行此操作，您将需要评估您需要对正在构建的阵列做什么。例如，我编写了将行导入数据库的类似脚本。我没有构建一个巨大的数组*然后*插入，而是分批进行，在那里我构建了一个 50-100 行的数组，然后插入这些数组并清除数组（释放内存以供重复使用）。

伪代码：

```
for(each row in file) {
  $rows_cache[] = $row[1];
  if(count($rows_cache) >= 50) {
    insert_these($rows_cache);
    $rows_cache = array();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:12:01.870

为什么不掉线：

```
$totalValue = $totalValue + $row[1]; 
```

从循环内部，而是使用：

```
$totalValue = array_sum($valueArray); 
```

完成循环后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:14:02.587

不是真正的问题，而是

```
while(($row = fgetcsv($handle, "\r")) != FALSE) 
```

可以改写为

```
while($row = fgetcsv(...)) 
```

反而。不需要显式的错误检查——如果 fgetcsv 返回错误，while 循环无论如何都会终止。此外，这个版本更易读，而且没有那么冒险。如果你忘记了`()`fget 部分，你将做相当于`$row = (fgetcsv() != false)`并简单地获得一个布尔值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T16:30:24.633

您的第一行是字符串，也许尝试添加

```
while(($row = fgetcsv($handle, "\r")) != FALSE)
{

    if(is_numeric($row[1]))
    { 
        $valueArray[] = $row[1];

        $totalValue = $totalValue + $row[1];
        $amountRecords++;
    }
} 
```

# c# - C#让父面板处理所有事件

> ID：12028058
> 
> 赞同：-1
> 
> 时间：2012-08-19T16:24:30.507
> 
> 标签：c#, winforms, events, panel, parent

当我遇到这个问题时，我正在创建自定义进度条 [WinForm]

```
**The Structure:**
 -panel 
   -> panel
  so I have panel which inside the panel, there another panel. 
```

> ```
> **The Goals:**
> -I want to use my parent panel as all event handler, 
>  while make the child panel have no event at all. 
> ```

```
**The Problem:**
- when I press my mouse inside the child panel. the event in parent wont called.
  explanation : -> I still wanted to call parent panel mouse down 
  even if I click on top of my child panel. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:47:27.040

因此，您希望在单击子面板时在父面板上触发 click 事件。

我可以想到两种方法可以做到这一点。

第一种方法是简单地从 Panel2 的 Click 事件处理方法内部调用 Panel1 的 Click 事件处理方法：

```
private void panel1_Click(object sender, EventArgs e)
{
    MessageBox.Show("Panel 1 clicked.");
}

private void panel2_Click(object sender, EventArgs e)
{
    this.panel1_Click(sender, e);
} 
```

可能更好的方法是将两个点击事件注册到 1 处理程序方法：

```
private void panel1_Click(object sender, EventArgs e)
{
    MessageBox.Show("Panel 1 clicked.");
} 
```

然后从表单设计器或手动注册第二个面板的事件：

```
this.panel2.Click += new System.EventHandler(this.panel1_Click); 
```

# ruby-on-rails - Rails - 如何为行突出显示创建 ajax 链接

> ID：12028059
> 
> 赞同：0
> 
> 时间：2012-08-19T16:24:35.087
> 
> 标签：ruby-on-rails, ruby, link-to

[我有一个很好的即时行高亮示例： http](http://www.mrc-productivity.com/techblog/?p=684) ://www.mrc-productivity.com/techblog/?p=684

如何创建`<a href="#" class="on">Turn on row highlights</a>`与 Rails 的链接。

我已经尝试了许多 link_to 和 button_to 与 :remote => true 的组合，但我无法正确使用语法，一切似乎都以常规链接结束。

在一天结束时，我试图打开和关闭行表突出显示，如下所示：

html:

```
<a href="#" class="on">Turn on row highlights</a> 
```

jQuery：

```
$(document).ready(function() {
$("a.on").click(function(){
    $("tr:nth-child(odd)").addClass("two");
    $("tr:nth-child(even)").addClass("one");
    event.preventDefault();
    });

    $("a.off").click(function(){
        $("tr:nth-child(odd)").removeClass("two");
        $("tr:nth-child(even)").removeClass("one");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:05:59.263

您可以轻松地创建这样的链接：

```
link_to('Turn on row highlights', '#', :class => 'on') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:34:02.620

在这种情况下，您根本不需要使用 Rails 助手。您可以直接在 erb 文件中使用该链接标签：

```
<a href="#" class="on">Turn on row highlights</a> 
```

或对于 HAML：

```
%a.on{href: '#'} Turn on row highlights 
```

Rails 视图助手仅在链接到 Rails 资源时有用。当您想使用 AJAX 不显眼地访问资源时，使用 remote: true 选项。不适用于您的情况。

# perl - 从数组中获取数值

> ID：12028060
> 
> 赞同：-3
> 
> 时间：2012-08-19T16:24:36.903
> 
> 标签：perl, cgi

我有一个从平面文件中读取的数组，如下所示：

```
@Array = ('01026¦Cummington¦Massachusetts¦MA',
          '01026¦West Cummington¦Massachusetts¦MA',
          '01030¦East Hampton¦Massachusetts¦MA',
          '01027¦Easthampton¦Massachusetts¦MA',
          '01027¦Loudville¦Massachusetts¦MA',
          '01030¦Mount Tom¦Massachusetts¦MA',
          '01027¦Westhampton¦Massachusetts¦MA',
          '01028¦East Longmeadow¦Massachusetts¦MA',
          '01029¦Big Pond¦Massachusetts¦MA'); 
```

我想要做的是获得@Array[1] 的三个随机“数值”，所以我得到一个如下所示的输出：

```
print "01028
       01026
       01030"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T16:44:05.300

*如果我理解正确*[`List::Util`](https://metacpan.org/module/List::Util)的话，使用's[`shuffle`](https://metacpan.org/module/List::Util#shuffle-LIST)函数很容易实现：

```
#!/usr/bin/env perl

use strict;
use warnings;

use List::Util qw( shuffle );

my @array = (
    '01026¦Cummington¦Massachusetts¦MA',
    '01026¦West Cummington¦Massachusetts¦MA',
    '01030¦East Hampton¦Massachusetts¦MA',
    '01027¦Easthampton¦Massachusetts¦MA',
    '01027¦Loudville¦Massachusetts¦MA',
    '01030¦Mount Tom¦Massachusetts¦MA',
    '01027¦Westhampton¦Massachusetts¦MA',
    '01028¦East Longmeadow¦Massachusetts¦MA',
    '01029¦Big Pond¦Massachusetts¦MA',
);

my @shuffled_array = ( shuffle 0 .. @array - 1 )[ 0 .. 2 ];
print join "\n", map $array[$_] =~ /^(\d+)/, @shuffled_array; 
```

# php - CakePHP 和 Set::combine

> ID：12028065
> 
> 赞同：0
> 
> 时间：2012-08-19T16:25:12.440
> 
> 标签：php, arrays, cakephp

我需要将其字段中每种语言的数据作为数组获取。CakePHP 中最好的方法可能是`Set::combine`但不能让它工作。我可以手动完成，`foreach`但我认为这不是最好的方法。

这是示例：

```
Array
    (
        [Article] => Array
            (
                [id] => 131
                [title] => TEST
            )

        [titleTranslation] => Array
            (
                [0] => Array
                    (
                        [id] => 62
                        [locale] => eng
                        [model] => Article
                        [foreign_key] => 131
                        [field] => title
                        [content] => TEST
                    )
                [1] => Array
                    (
                        [id] => 63
                        [locale] => fre
                        [model] => Article
                        [foreign_key] => 131
                        [field] => title
                        [content] => Salva
                    )
                [2] => Array
                    (
                        [id] => 64
                        [locale] => rus
                        [model] => Article
                        [foreign_key] => 131
                        [field] => title
                        [content] => Пвет
                    )
            )
    ) 
```

进入这个数组：

```
Array
    (
        [Article] => Array
            (
                [id] => 131
                [title] =>  Array
                    (
                        [eng] => TEST
                        [fre] => Salva
                        [rus] => Пвет
                    )
            )

        .... the rest is not important

    ) 
```

**解决了 - - -**

```
 $translatedData = Set::combine($this->data['titleTranslation'], '{n}.locale', '{n}.content', '{n}.field');
            $this->data['Article'] = array_merge($this->data['Article'], $translatedData); 
```

# xml - 将打开的 cv haar features xml 文件转换为图像

> ID：12028066
> 
> 赞同：1
> 
> 时间：2012-08-19T16:25:34.370
> 
> 标签：xml, image, opencv

我想知道是否有办法从 haar 级联的 xml 文件（它们与 OpenCV 一起提供，或者可以在[此处](http://alereimondo.no-ip.org/OpenCV/34/)找到）到图像，例如[那些](http://software.intel.com/sites/products/documentation/hpc/ipp/ippi/ippi_ch14/Images/fig14-13_large.jpg)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:22:17.193

找到了 xml 文件中内容的描述[here for the rectangles](http://tech.groups.yahoo.com/group/OpenCV/message/63898)和[here for the left and right values](https://stackoverflow.com/questions/978742/what-do-the-left-and-right-values-mean-in-the-haar-cascade-xml-files)。

# xcode - ios - 如何制作模拟仪表

> ID：12028068
> 
> 赞同：-1
> 
> 时间：2012-08-19T16:25:40.680
> 
> 标签：xcode, meter

我想为 iOS 制作一个基本的模拟仪表（如速度计），我可以将其重用于音频和其他功能。有人可以给我一些入门点吗？框架、示例、开源等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:58:11.833

这类似于：[https](https://stackoverflow.com/a/5687349/1177191) ://stackoverflow.com/a/5687349/1177191 。不是模拟的，但也许这个概念会有所帮助。

# java - 为什么在 AWS/EMR 上运行时，我的“字数”Hadoop Reducer 输出文件的一半是 0 字节？

> ID：12028069
> 
> 赞同：1
> 
> 时间：2012-08-19T16:25:51.867
> 
> 标签：java, hadoop, amazon-web-services, elastic-map-reduce

我有一组数据，基本上是简单字数统计的映射结果（带有单词和计数对的文本文件，制表符分隔），我需要减少它。大约有 160 GB 的数据，压缩成 bz2 文件。

当我在 Amazon Web Services Elastic Map Reduce (AWS EMR) 上运行我的工作时，我使用 10 个 cc2.8xlarge 从属服务器和一个 m1.xlarge 作为主服务器。最终有 1200 个 map 任务和 54 个 reduce 任务。恰好一半的reduce 任务在map 任务完成后立即完成，它们的输出都是0 字节。我假设输入是 0 字节，但我还没有充分挖掘日志来确认。其他 27 个 reduce 任务最终完成，并且它们的文件大小是一致的（每个 2.3gb）。对于输出文件（part-r-00000，...，part-r-00053），偶数文件是 0 字节文件。

当我在带有 2 个减速器的非常小的样本上本地运行它时，每个减速器输出都有数据。

我的映射器和减速器如下（去除了 Java 的附加功能）：

```
// ...

public void map(LongWritable key, Text val, Context context) throws IOException, InterruptedException {
  String[] parts = val.toString().split("\t");
  if (parts.length > 1) {
    keyOut.set(parts[0]);
    valOut.set(Integer.parseInt(parts[1]));
    context.write(keyOut, valOut);
  }
}

// ...

public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {
  int sum = 0;
  for (IntWritable val : values) {
    sum += val.get();
  }
  result.set(sum);
  context.write(key, result);
}

// ... 
```

有没有其他人经历过这个？知道为什么会发生这种情况，或者我该如何进一步调试？我打开了 EMR 调试，以防你想在日志中寻找一些东西。谢谢

**编辑：**我应该注意到我正在 S3 上读取和存储我的数据

**编辑 2：**我之前运行过一次相同的作业，我看到了 0 字节文件，并认为我的 Reducer 中有错误，所以取消了作业。因此，我知道这不是一次性事件。该作业在同一个集群上运行。我最初在具有“Hadoop 2.0”的 Cloudera 4 (CDH4) 库上编译了我的 Java 类，所以我认为这可能是问题所在。当我第二次运行它时，我使用了使用 Cloudera 3 (CDH3) 库和 Hadoop 0.20 编译的 Java 类，与 AWS 的版本基本相同。在过去，我也使用 CDH3 来编译没有这种行为。

# django - 有没有办法在其 help_text 中显示该字段自己的值？

> ID：12028071
> 
> 赞同：0
> 
> 时间：2012-08-19T16:26:08.507
> 
> 标签：django, django-models, django-admin

在我的 Django 应用程序中，我有一个模型，其中包含一个名为 URL 的字段。我希望在其 help_text 字符串中将此 URL 显示为链接。因此，如果此字段中存在值，我可以进入对象并单击 URL 字段下方的帮助文本。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:58:46.217

最简单的方法是手动覆盖它；

```
form = MyForm()
form.fields['my_field'].help_text = form.cleaned_data.get('my_field').url
# wrap in try since CD may not exist. 
```

您还可以构建一个自定义表单字段，该字段知道如何根据自己的值设置其 help_text ..

```
class MyField(forms.AField):
    def __init__(self, *args, **kwargs):
        super(MyField, self).__init__(*args, **kwargs)
        self.help_text = self.clean(self).my_field_attribute 
```

我不确定 django 在 help_text 字段上做了什么样的转义，但只需将其标记为`django.utils.safestring.mark_safe`可能足以让它呈现 HTML。

# c# - 如何在另一个线程中获取 TextBox 文本？

> ID：12028072
> 
> 赞同：0
> 
> 时间：2012-08-19T16:26:11.013
> 
> 标签：c#, windows-phone-7

我今天正在做所有疯狂的事情：DI 尝试通过调用它

```
Dispatcher.BeginInvoke(() =>
                {
                    username = UsernameInput.Text;
                }); 
```

但这似乎不起作用:(而且我如何也设置一个值跨线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:32:59.840

我前段时间这样做了，不知道这是否是正确的方法，但它确实有效：

```
Invoke((MethodInvoker)delegate
{
    // Code...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:06:32.993

通过在 Dispather 之后将线程休眠一秒钟来解决问题。猜猜你必须允许gui线程“回答”另一个线程。

# html - 在 Google appengine 中使用框架集

> ID：12028073
> 
> 赞同：0
> 
> 时间：2012-08-19T16:26:14.353
> 
> 标签：html, google-app-engine, python-2.7, frameset

我想知道是否有人可以向我展示一个使用 html 框架集和 google appengine for python 2.7 的示例。我想要做的是有两个框架，一个包含一个带有按钮的侧边栏的静态框架，然后是它右侧的另一个框架，根据选择的按钮显示不同的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:02:41.917

正如其他人所评论的那样，这是可以在客户端解决的问题，您不应该使用框架。

Zurb 基金会提供类似于您所要求的导航。 [http://foundation.zurb.com/docs/navigation.php](http://foundation.zurb.com/docs/navigation.php)

同样，Twitter bootstrap 还提供导航，使您能够构建您请求的功能。 [http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

可以在这里找到一个可以帮助您保持粘性侧面菜单的插件：http: [//mojotech.github.com/stickymojo/](http://mojotech.github.com/stickymojo/)

回应您的评论：要将内容动态加载到菜单栏旁边的“框架”中，您可以使用 jQuery 加载功能。 [http://api.jquery.com/load/](http://api.jquery.com/load/) 它允许您从服务器获取页面并用获取的内容替换元素内容。

# java - Servlet 3.0 async 支持的缺点

> ID：12028078
> 
> 赞同：5
> 
> 时间：2012-08-19T16:26:45.617
> 
> 标签：java, asynchronous, servlet-3.0

在我的应用程序中，我有一个自主开发的框架，它将所有请求映射到一个中央 ControllerServlet（没什么花哨的，它具有几乎所有框架的基本功能）。我必须实现发布者-订阅者消息交换功能，我决定使用 Servlet 3.0 的异步方法。

当前`ControllerServlet`并`AuthenticationFilter`没有设置为 asyncSupported。我可以为所有异步处理实现第二个 CotrollerServlet，也可以将现有的 ControllerServlet 声明为`asyncSupported=true`（即使有些请求不需要异步处理）。

*...对于使用异步功能的应用程序，整个请求处理链必须通过注释或其部署描述符设置此属性...* [- 源](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3)

从这里我知道我必须将其声明`AuthenticationFilter`为`asyncSupported=true`（并且在某些情况下不需要异步）。

声明 servlet 和过滤器是否有任何缺点，`asyncSupported=true`即使它们也映射不需要异步处理的请求？会不会有任何可扩展性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:34:19.793

[Java Servlet 3.0 规范](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)的*2.3.3.3 异步处理*章节包含一个提示：

> 从同步 servlet 分派到异步 servlet 是非法的。但是，引发 IllegalStateException 的决定与应用程序调用 startAsync 时有所不同。**这将允许 servlet 充当同步或异步 servlet。**

它没有直接说明，但是这句话让我相信，就 JLS 作者而言，一个 servlet 的这种双重同步/异步性质并不是什么不寻常的事情。

另一方面，请查阅容器的文档/源代码。仅仅因为从 JLS 的角度来看它是合法的，并不意味着您的容器没有进行一些巧妙的优化，如果`AsyncContext`没有真正使用这些优化会对性能产生负面影响。否则，如果所有 servlet 都可以简单地在任何一种模式下工作，那么这个属性的目的是什么，除了记录？

# php - 从 html 编码的字符串中删除空格/垃圾

> ID：12028082
> 
> 赞同：1
> 
> 时间：2012-08-19T16:27:14.853
> 
> 标签：php, html, regex

我制作了一个正则表达式来删除空格和其他垃圾，例如新行和制表符。

```
preg_replace('/[\s\t\n\r]+/mu', ' ', $var); 
```

但是我的字符串是 html 编码的，这意味着我将一些字符替换为 &#...;

我们还能做些什么来解释编码的字符呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:55:12.313

我想知道是否可以对组进行这样的量词。

```
preg_replace('/(\s|&#09;|&nbsp;)+/mu', ' ', $var) 
```

**编辑**

是的，这似乎有效：

```
$str='&nbsp; t &#09; &nbsp;&nbsp;  e &#09;  &#09;  &#09;  s&#09;t&#09;  ';

echo '|'.preg_replace('/(\s|&#09;|&nbsp;)+/mu',' ',$str).'|'; 
```

^ 产生预期的结果：`| t e s t |`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:41:11.317

你可以先做一个html解码，然后应用正则表达式，结束然后再次编码

像这样的东西：

```
$result = htmlentities(preg_replace('/[\s\t\n\r]+/mu', ' ', html_entity_decode($var))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:40:09.800

单个正则表达式可能还不够。

这将用它的实际 ascii 字符替换任何不是控制字符的实体编码的**ascii值，用空格替换控制字符，并保留 126 以上的所有内容。**

```
<?php
$in = "&amp;&#032;&#192;&#12;";

$out = preg_replace_callback('/&#(\d{1,4});/u', function($match) {
        $v = $match[1]+0;
        if($v < 33) return ' ';
        elseif($v > 126) return $match[0];
        else return chr($v);
}, $in);
$out = preg_replace('/\s{2,}/mu', ' ', $out);

echo $out;
?> 
```

**注意：**从技术上讲 127 ( `ESC`) 也是 ascii，但为了更简短的示例，我跳过了它。

您可以扩展回调（和正则表达式）或在中间步骤中删除命名实体。但是请注意，这`&nbsp;`不等同于它是一个可能不会换行的空格宽度不可见字符。其他命名实体也是如此（您通常希望保留,等）`&#32;``&#160;``&shy;``&amp;`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-19T16:36:14.410

先使用`html_entity_decode()`然后再使用`preg_replace`，例如

```
preg_replace('/[\s\t\n\r]+/mu', ' ', html_entity_decode($var)); 
```

# jquery - JQuery Mobile - 如何在网站加载之前设置加载页面

> ID：12028087
> 
> 赞同：0
> 
> 时间：2012-08-19T16:28:18.287
> 
> 标签：jquery, jsp, web-applications, jquery-mobile, pageload

我的网站上有一个`FirstPage.html`。

在网站加载（`FirstPage.html`加载）时，我想显示 a`WelcomePage.html`至少 5 秒（即使`FirstPage.html`加载完成）。

有人可以帮忙吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:31:30.353

为什么不把 WelcomePage.html 设为实际的主页，然后在后台将 FirstPage.html 添加到 jquery mobile DOM 中。然后，在 X 秒后或页面完成加载到 DOM 后重定向到 FirstPage.html。

这是文档：http: [//jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)

**更新**

使用我给你的 Ink，你需要在一个单独的 JS 文件中添加以下代码。

```
$.mobile.loadPage( FirstPage.html, { showLoadMsg: false } ); 
```

您需要将此 JS 文件包含在 WelcomePage.html 的头部，在您包含 jQuery 之后，但在您包含 jQuery mobile 之前。

这会将 FirstPage.html 加载到 DOM 中。然后调用你的其他代码（我认为）

# ruby-on-rails - 部署到heroku后如何清除rails缓存？

> ID：12028088
> 
> 赞同：37
> 
> 时间：2012-08-19T16:28:21.703
> 
> 标签：ruby-on-rails, heroku, caching, deployment

我将缓存应用于我的 heroku rails 应用程序，它运行良好。但是每次我部署到heroku时，我也想自动清除缓存。

所以我用谷歌搜索，我发现了这个。

```
task :after_deploy, :env, :branch do |t, args|
  puts "Deployment Complete"
  puts "Cleaning all cache...."
  FileUtils.cd Rails.root do
    sh %{heroku run console}
    sh %{Rails.cache.clear}
  end
end 
```

但是当我查看这个脚本时，它只显示了 heroku 控制台命令行，但没有输入 Rails.cache.clear 命令。（我想那是因为 heroku 控制台是交互式的）

和

```
system "heroku console Rails.cache.clear" 
```

不适用于雪松应用程序。

我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-28T18:29:23.750

Rails 有一个内置的 rake 任务：

```
rake tmp:clear 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-08-19T17:52:18.343

以下应该适用于雪松：

```
heroku run console 
```

..然后等待 5 秒钟让 heroku 控制台启动

```
Rails.cache.clear 
```

然后你应该看到缓存被清除了，你可以退出控制台。请记住，您可能需要刷新几次，因为您的本地计算机通常会在您的浏览器中缓存资产等，直到它发出新的请求。

如果它碰巧是你正在缓存的资产，你不需要在每次推送时都手动清除，你只需要设置资产管道并确保你所有的 js/css(less/ sass)/static 图像在其文件名末尾使用散列进行编译。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-12-11T01:15:11.100

您应该能够创建如下所示的缓存清除 rake 任务：

```
namespace :cache do
  desc "Clears Rails cache"
  task :clear => :environment do
    Rails.cache.clear
  end
end 
```

并在一个可以在部署后挂钩中使用的命令中直接调用它 - 如下所示：

```
heroku run rake cache:clear 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-01-15T18:48:45.847

Ruby on Rails 有一个神奇的 ENV 变量，称为“RAILS_CACHE_ID”。每当我部署时，我都会将其设置为 git commit id：`heroku config:set RAILS_CACHE_ID=$CIRCLE_SHA1`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-06T23:43:14.570

如果您想在部署后简单地运行 rake 任务，我建议您查看：

[https://github.com/gunpowderlabs/buildpack-ruby-rake-deploy-tasks](https://github.com/gunpowderlabs/buildpack-ruby-rake-deploy-tasks)

我们已经在生产中使用它超过 6 个月了，它一直坚如磐石。

首先，在你已经设置好 Ruby buildpack 之后添加 buildpack。这应该在您第一次部署到服务器后发生

`heroku buildpacks:add https://github.com/gunpowderlabs/buildpack-ruby-rake-deploy-tasks`

其次，设置一个名为的环境变量`DEPLOY_TASKS`，其中只使用您要运行的 rake 任务的名称，并用空格分隔。

`heroku config:set DEPLOY_TASKS='cache:clear`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-15T17:40:49.993

heroku 运行 rake tmp:cache:clear

[http://guides.rubyonrails.org/command_line.html#tmp](http://guides.rubyonrails.org/command_line.html#tmp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-08T22:47:51.990

[Heroku 有一个`release`phase](https://devcenter.heroku.com/articles/release-phase)，这意味着您可以将任何部署时任务放入您的`Procfile`:

```
release: bundle exec rake tmp:clear 
```

您可能希望设置自己的自定义 rake 任务来封装需要在部署时发生的任何其他任务，例如：`db:migrate`等等。请记住，如果任务因任何原因失败，Heroku 将停止部署，并且之前部署的代码版本将保持活动状态。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-13T20:55:45.343

Heroku 目前不支持部署后发生的一系列操作。您将需要 Codeship 或 TravisCI 之类的东西来创建部署期间发生的步骤配方

披露：我是 Codeship 的客户。

# url - Powershell URL 图像到 FTP

> ID：12028089
> 
> 赞同：1
> 
> 时间：2012-08-19T16:28:46.927
> 
> 标签：url, powershell, ftp, send

我正在尝试使用 powershell 从指定的 url 获取图像并将其重新发送到 ftp。但它不是这样工作的：/

```
$url = "http://somesite.com/image.jpg"
$ftp = "ftp://username:password@hostname.com/folder/image.jpg"

$webclient = New-Object System.Net.WebClient
$uri = New-Object System.Uri($ftp)

$webclient.UploadFile($uri, $url) 
```

有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:46:33.843

[**.NET（以及因此 PowerShell）中的 WebClient 和FtpWebRequest**](http://en.wikipedia.org/wiki/File_eXchange_Protocol)****类不支持[File e](http://en.wikipedia.org/wiki/File_eXchange_Protocol) [**X**](http://en.wikipedia.org/wiki/File_eXchange_Protocol)[更改协议 (](http://en.wikipedia.org/wiki/File_eXchange_Protocol) [**FXP**](http://en.wikipedia.org/wiki/File_eXchange_Protocol) [)](http://en.wikipedia.org/wiki/File_eXchange_Protocol) - 因此您需要先将源文件下载到您的计算机，然后通过 FTP 传输文件到您的目的地：****

 ****```
$source = "http://somesite.com/image.jpg"
$destination = "ftp://username:password@hostname.com/folder/image.jpg"

$webclient = New-Object System.Net.WebClient

$webclient.DownloadFile($source, "temp.jpg")
$webclient.UploadFile($destination, "temp.jpg") 
```****

# terminal - 读取文件的 iD3 比特率标签并将其写入文件夹名称（包含文件的文件夹）

> ID：12028093
> 
> 赞同：0
> 
> 时间：2012-08-19T16:29:04.607
> 
> 标签：terminal, osx-lion, mp3, directory, id3

在我第一次认真尝试整合一个包含近 20.000 个文件夹（每张专辑都是一个文件夹）的庞大音乐库的过程中。文件夹命名如下：

**艺术家 - 年份 - 专辑名称**

但与任何大型图书馆一样，有很多专辑重复，当我将所有文件夹命名设置为上述命名标准时，我发现越来越多的重复。

为了解决专辑重复问题，我决定保留具有最高比特率的专辑，方法是这样命名文件夹：

**艺术家 - 年份 - 专辑名称 [*比特率*kbps]**

这样我就可以很容易地看到我将保留哪个文件夹并删除所有低质量的文件夹。但事实证明，这项任务过于耗时。

所以我想知道这是否可以通过 OSX 终端完成。解决方案如下所示：

1.  查找文件夹中文件的 iD3“比特率”标签
2.  在文件夹名称的末尾写上找到的比特率标签，比如

**艺术家 - 年份 - 专辑名称 [ *320* kbps]**

如果文件夹中文件的比特率不同，请将名称设置为

**艺术家 - 年份 - 专辑名称 [ *vrb* kbps]**

*请注意，我想使用终端或任何其他可用工具在我的机器上**本地执行此操作。**不涉及服务器或脚本语言*......

任何方向的任何帮助都会很棒！请记住，我不是高级终端用户，所以我非常感谢一个简单的解释......;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:25:27.040

根据[http://osxdaily.com/2010/10/04/check-bitrate-of-mp3-and-audio-files/](http://osxdaily.com/2010/10/04/check-bitrate-of-mp3-and-audio-files/)尝试类似

```
find /path -type d |
while read folder; do
    prev=
    br=
    for file in "$folder"/*; do
        case $file in "$folder/*") break;; esac  # Skip empty directories
        br=$(afinfo "$file" | awk '/Bit rate:/{print $3/1000}')
        echo '##' "$br" "$file"
        case $prev in "" | $br) prev=$br; continue;; esac
        br="vbr"
        break
    done
    case $br in '') continue;; esac  # Don't rename if we don't have a bitrate
    echo moving "$folder" to "$folder [$br]"
    mv "$folder" "$folder [$br]"
done 
```

未经测试；也许在没有重命名的情况下尝试这个。如果您喜欢静音操作，请取出`echo`线路。

# excel - VBA 多控件容器

> ID：12028103
> 
> 赞同：2
> 
> 时间：2012-08-19T16:30:15.590
> 
> 标签：excel

我将一堆控件放入一个单元格中，该单元格由单行中的几个合并单元格组成。在我重新调整其中一列的大小之前效果很好。然后几个控件重叠了。

有没有办法冻结这个合并单元格的大小？还是我为控件使用了错误类型的容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:01:38.623

问题不是阻止调整合并单元格的大小，而是调整控件的大小。

要防止使用 Excel 单元格调整控件的大小/移动，请右键单击控件并单击`Format Control`。在`Properties`选项卡下，选择`Don't move or size with cells`。现在，当您重新调整单元格或列的大小时，控件将不会重叠。这适用于 ActiveX 和表单控件。

不过，如果您想阻止合并单元格的大小调整，那么您可以通过保护工作表来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T14:49:57.790

您还可以添加一个将列返回到正确大小的事件。这是一个例子，当 excel 计算时，列 A 被强制为 20.71，我想要的宽度。

Private Sub Worksheet_Calculate() Columns("A:A").ColumnWidth = 20.71 End Sub

# ios - 当我将拆分视图控制器添加到情节提要时，主视图不显示

> ID：12028107
> 
> 赞同：0
> 
> 时间：2012-08-19T16:30:28.023
> 
> 标签：ios, xcode, cocoa-touch, storyboard, uisplitviewcontroller

我对故事板很陌生（对 iOS 编程也很陌生）。我正在尝试将主/详细视图添加到仅适用于 iPad 的应用程序的情节提要中。这是我到目前为止所得到的：

1.  驱动我的应用导航的主标签栏控制器。这是有效的。
2.  我已经从库中向 MainStoryBoard 添加了一个拆分视图控制器对象。
3.  Ctrl+从我的 Tab Bar Controller 拖到 Split View Controller，选择Relationship Seque->view controllers。这成功地将拆分视图控制器添加为一个新的选项卡项（这是我想要的）。

但是现在当我运行我的应用程序并单击新选项卡项时，它只是打开了详细视图，而没有在任何地方显示主视图。我显然还没有添加任何数据，我只想确保一切正常。如果它是空的，主人会不会显示？这不是其他表控制器为我工作的方式。他们都展示了空桌子。这就是我在这里寻找的东西，所以我可以继续在左侧连接细节。

拆分视图控制器对我来说看起来有点陌生，因为第一个控制器说“详细视图控制器”，其中包含导航控制器，然后是主视图控制器的表视图控制器，然后是详细视图控制器的简单视图控制器。除了入口点自称为详细视图控制器之外，所有这些对我来说都是有意义的。这是我在没有主弹出框/左窗格表的情况下运行它时显示的内容。

更新：当我从主从应用程序模板开始时，拆分视图控制器对象在主屏幕中同时显示主视图控制器和详细视图控制器。所以当我把它从库中拖出来时，情况就有所不同了。如何在不使用模板的情况下在现有故事板上完成相同的事情？我已经围绕选项卡控制器连接了相当多的其余导航，我不想重做。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-26T00:39:24.873

看起来 UISplitViewController 已在 iOS8.1 中更新，以允许在应用程序的根视图之外使用。我已经成功实现了一个标签栏项目，它与 UISplitViewController 相连。苹果自己的文档通过使用一个词来证实这一点：通常。在 UISplitViewController 的类文档中找到：

> 在构建应用程序的用户界面时，拆分视图控制器**通常**是应用程序窗口的根视图控制器。

因此，Apple 含糊其辞，但我会认为这样做是可以的。而且，我可以确认它有效。

现在，您还需要做一些其他的事情来防止它过早地进入详细视图。我不打算重新散列细节，但请阅读这篇文章，然后继承 UISplitViewController：

1.  在 viewDidLoad 中：将 SplitViewController 的委托设置为 self
2.  将 UISplitViewControllerDelegate 添加到协议列表
3.  然后执行 splitViewController:collapseSecondaryViewController:ontoPrimaryViewController 并对整个方法或下面帖子中列出的情况返回 YES

[iPhone 上的 UISplitViewController 纵向显示细节 VC 而不是 master](https://stackoverflow.com/questions/25875618/uisplitviewcontroller-in-portrait-on-iphone-shows-detail-vc-instead-of-master)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T16:47:03.083

您不能将拆分视图控制器用作选项卡栏控制器的一项。

参见例如[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/SplitViewControllers.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/SplitViewControllers.html)

> 拆分视图控制器必须始终是您创建的任何界面的根。换句话说，您必须始终将 UISplitViewController 对象中的视图安装为应用程序窗口的根视图。然后，拆分视图界面的窗格可能包含导航控制器、选项卡栏控制器或您需要实现界面的任何其他类型的视图控制器。拆分视图控制器不能以模态方式呈现。

**更新：**从 Xcode 6.1 和 iOS 7/8 开始，这似乎是错误的。请参阅@headache 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T18:08:24.593

尝试在没有 TabBarController 的情况下进行测试。如果该错误将再次发生，则在 Xcode 中的 File Inspector for storyboard（小文件图标通常在屏幕的右上角）取消选中 Use Size Classes。在这个网站的某个地方，我看到了类似的错误和这个答案，我也遇到了同样的情况，但没有标签栏控制器。

# macos - 何时从 CARenderer 安排下一帧渲染？

> ID：12028109
> 
> 赞同：1
> 
> 时间：2012-08-19T16:30:47.430
> 
> 标签：macos, cocoa, opengl, core-animation

如果我安排`CARenderer`使用常数 1./60 执行下一帧渲染，则一切正常。`-[CARenderer nextFrameTime]`方法应该提供关于何时应该进行渲染的更细粒度的反馈。

为下一个计划的动画事件获取媒体时间，或者在没有计划发生的情况下获取无限时间，即使没有发生任何事情，也是渲染的一个很好的解决方案。

但是，现在计时器不再触发（因为我得到了无穷大的结果），即使在用户通过事件处理程序执行的用户启动更改时也不会发生动画。我不知道如何通知图层树中发生了更改以及如何启动下一次渲染，即使它是未计划的。

通过 KVO观察`nextFrameTime`不起作用（不是我期望的那样）。对于我的用例，将层托管在 an`NSView`中不是一种选择。

我怎么知道图层树（或图层树中的动画）发生了变化，所以我可以触发渲染？

# c - 针对rabbitmq-c构建

> ID：12028112
> 
> 赞同：8
> 
> 时间：2012-08-19T16:31:15.310
> 
> 标签：c, rabbitmq

我正在尝试在 c 中连接到 rabbitmq，但每次都失败。这是我的做法。

下载 rabbitmq-c
安装它（`make && make install`）只是为了确保满足依赖关系。 在Rebuilt using
中修改了连接变量，运行并且它工作 然后我开始创建自己的文件并使用 gcc 编译它们： `amqp_sendstring.c`
`make``./amqp_sendstring`

```
gcc -lrabbitmq -o j_test test.c 
```

具有讽刺意味的是，它无法与 librabbitmq 链接并出现以下错误：

```
/tmp/cc63IlXq.o: In function `main':
test.c:(.text+0xa): undefined reference to `amqp_new_connection'
test.c:(.text+0x1a): undefined reference to `amqp_destroy_connection'
collect2: ld returned 1 exit status 
```

我删除了以 ampq_* 开头的所有内容。瞧！它已成功构建。对我来说，这表明 gcc 能够找到标头而不是库。

这是 test.c 源代码：

```
#include <amqp.h>
#include <amqp_framing.h>
int main(int argc, char const * const *argv) {
   amqp_connection_state_t conn;
   conn = amqp_new_connection();
   amqp_destroy_connection(conn);
   return 0;
} 
```

有人能指出我正确的方向吗？

编辑：我忘了提到我在一个 ubuntu 盒子上（12.04）。认为它隐含在上面的陈述中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T20:18:05.857

当你编译你的程序时，你不仅要告诉`gcc`你要使用的库的名字`-lrabbimtq`（（或链接器）将始终查找一些默认目录，但您的[rabbitmq-c](https://github.com/alanxz/rabbitmq-c/)库在这些目录中不可用。`-L/path/to/rabbitmq-c``gcc`

所以你的`gcc`命令行应该是这样的：

```
gcc -I/path/to/rabbitmq-c-header-dir -L/path/to/rabbitmq-c-lib-dir -o j_test test.c -lrabbitmq 
```

请注意，您必须告知头文件 ( `-I`) 的位置，并且[的位置](https://stackoverflow.com/a/2487723/) `-lrabbitmq`很重要。

在下面的示例中，目录`~/src/rabbitmq-c`是我的 rabbitmq-c 克隆的位置。

标头和共享库的位置：

```
~/src/rabbitmq-c$ find . -name amqp.h
./librabbitmq/amqp.h
~/src/rabbitmq-c$ find . -name librabbitmq.so
./librabbitmq/.libs/librabbitmq.so
~/src/rabbitmq-c$ 
```

编译和链接您的示例程序：

```
~/src/rabbitmq-c$ cat > stacko.c
#include <amqp.h>
#include <amqp_framing.h>
int main(int argc, char const * const *argv) {
   amqp_connection_state_t conn;
   conn = amqp_new_connection();
   amqp_destroy_connection(conn);
   return 0;
}
~/src/rabbitmq-c$ gcc -Ilibrabbitmq -g -Wall -c stacko.c
~/src/rabbitmq-c$ gcc -Llibrabbitmq/.libs -g -Wall -o stacko stacko.o -lrabbitmq
~/src/rabbitmq-c$ 
```

使用共享库时，还必须在运行时告知在哪里可以找到这些库：

```
~/src/rabbitmq-c$ ./stacko 
./stacko: error while loading shared libraries: librabbitmq.so.0: cannot open shared object file: No such file or directory
~/src/rabbitmq-c$ LD_LIBRARY_PATH=librabbitmq/.libs ./stacko 
~/src/rabbitmq-c$ 
```

您可以检查可执行文件使用的库`ldd`：

```
~/src/rabbitmq-c$ ldd ./stacko 
    linux-gate.so.1 =>  (0x00d7d000)
    librabbitmq.so.0 => not found
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x00396000)
    /lib/ld-linux.so.2 (0x002d6000)
~/src/rabbitmq-c$ LD_LIBRARY_PATH=librabbitmq/.libs ldd ./stacko 
    linux-gate.so.1 =>  (0x001c8000)
    librabbitmq.so.0 => librabbitmq/.libs/librabbitmq.so.0 (0x00f77000)
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x001c9000)
    /lib/ld-linux.so.2 (0x00cc3000)
~/src/rabbitmq-c$ 
```

另请参阅[g++：如何指定库路径的首选项？](https://stackoverflow.com/a/2727033/).

# pdf - 将 SWF 文件转换为 PDF 的工具

> ID：12028113
> 
> 赞同：6
> 
> 时间：2012-08-19T16:31:18.787
> 
> 标签：pdf, flash, converter

是否有任何开源工具可以将 SWF 转换为 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:09:54.577

有一个[eConverter](https://bitbucket.org/esminis/econverter)工具。我发现 .swf 中的转换像素图像存在一些问题，但矢量形状（文本）的输出非常完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:36:32.067

我通常使用名为[SWF Printer Pro](http://download.cnet.com/SWF-Printer-Pro/3000-10743_4-10740922.html)的工具来解决我的所有需求。

# url - Facebook“喜欢”推荐点击添加变量；未将链接的页面识别为喜欢的页面

> ID：12028116
> 
> 赞同：7
> 
> 时间：2012-08-19T16:31:33.187
> 
> 标签：url, facebook-like

所以我有一个网站，我们称之为它`foo.com`，所有页面上都有[Like Button 插件](https://developers.facebook.com/docs/reference/plugins/like/)（每个页面上重新散列相同的代码）

所以我'喜欢'`http://foo.com`

在我的墙上贴一个链接，一切都很好

我对我的项目页面做同样的事情 -`http://foo.com/projects`

当你喜欢它时，它会在信息中显示（当你点击喜欢时会出现下拉菜单）他们已经 'liked' `http://foo.com/projects`。一切都很好; 然而，Facebook 上的实际链接是：

`http://foo.com/projects?fb_action_ids=10151073089123411&fb_action_types=og.likes&fb_source=other_multiline&action_object_map=%7B"10151073089123411"%3A10151036996391185%7D&action_type_map=%7B"10151073089123411"%3A"og.likes"%7D&action_ref_map=%5B%5D`

这不仅丑陋，还意味着点赞按钮不计入 /projects 页面，而是新的`/projects?fbcrap=....`

{编辑}

还注意到您实际上可以进入无限循环。

A喜欢的人`http://foo.com/projects`

人 B 点击`http://foo.com/projects`人 A 墙上的链接 人 B 喜欢`http://foo.com/projects?randomhashstuff`

C 人点击`http://foo.com/projects?randomhashstuff`B 人墙上的链接 C 人点赞`http://foo.com/projects?anotherrandomhash`

结果：

*   `/projects`= 1 个喜欢
*   `/projects?randomhash`= 1 个喜欢
*   `/projects?anotherrandomhash`= 1 个喜欢

哪里`/projects`应该有3个赞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:38:56.110

> 不仅丑，还意味着点赞按钮不计入/projects页面，而是新的/projects?fbcrap=WHYAREYOUHERE

将[Open Graph 元标记](https://developers.facebook.com/docs/opengraphprotocol/)for`og:url`放入您的`/projects`页面，并让它说页面的 URL 实际上是`http://example.com/projects`，无论可能附加什么样的查询字符串参数。

当 Facebook 的爬虫将`http://example.com/projects?fbcrap=WHYAREYOUHERE`在该地址即将被点赞时获取，Facebook 将意识到实际地址/URL 只是`http://example.com/projects`，因此它应该为该 URL 计算点赞数，而不是其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:39:45.700

看[这里](https://developers.facebook.com/docs/opengraphprotocol/)，看起来你应该`href`在like按钮中指定：

```
<fb:like href="http://pandaz.co.uk/projects/" width="450" height="80"/> 
```

此外，您应该考虑重新组织`og:`HTML 顶部的元数据，就`title`在`header`.

干杯，阿波克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:04:03.737

我很确定这是故意的，额外的参数允许您识别哪个“喜欢”触发了（入站）用户看到的故事，并告诉您他们在 Facebook 上的哪个位置看到并点击了它。

有文档显示了许多可能的`fb_source`参数（[https://developers.facebook.com/docs/fb_source/](https://developers.facebook.com/docs/fb_source/)），`fb_action_ids`并`fb_action_types`包含对用户点击的故事做出贡献的[Open Graph](https://developers.facebook.com/docs/opengraph/)操作类型和 ID（即 X 喜欢 Y 和 Z 其他SiteName 上的页面将具有多个操作 ID，代表每个单击的喜欢按钮）

{edit} 正如 CBroe 所说，解决此问题的方法是在您的网站上设置一组 Open Graph 元标记，这些标记告诉 Facebook 内容/对象本身的 URL，即使使用其他查询字符串参数访问它也是如此

# android - 无法通过 GPS 获取位置：Android

> ID：12028117
> 
> 赞同：0
> 
> 时间：2012-08-19T16:31:49.800
> 
> 标签：android, android-location

我是安卓新手。我正在尝试使用 GPS 获取我的位置。我已经包括了权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

每当我试图`Location`从`LocationManager`使用中得到我的东西时，我都会`getLastKnownLocation`得到空对象。此外，GPS 已启用。这是我的代码：

```
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
Location location;
if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    Log.d("ManualLog", "GPS_DISABLED");
    Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(settingsIntent);
} else {
    Log.d("ManualLog", "GPS_ENABLED");
    location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:25:19.153

如果 GPS 还没有时间修复，locationManager.getLastKnownLocation 将返回 null。Android 不提供“现在给我位置”方法。当 GPS 得到修复后，onLocationChanged() 将运行。它是**事件驱动的**，您必须耐心等待该事件。一旦 onLocationChanged() 运行，getLastKnownLocation() 将返回一个非空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:38:38.637

尝试将最后一行替换为：

```
List<String> providers = locationManager.getProviders(true);
if(!providers.isEmpty()) {
    location = locationManager.getLastKnownLocation(providers.get(0));
} else {
   Log.d("ManualLog", "No provider");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:14:18.830

你是在模拟器还是设备上运行它？如果在模拟器上，您可能需要通过“模拟器控制”手动将 GPS 数据发送到模拟器。在eclipse中，你可以找到它Window>Open Perspective>DDMS。

如果您在设备上运行，您的设备是否可能从未收到过 GPS 信号？

# ruby - Ruby：irb 在 Windows 上不起作用

> ID：12028130
> 
> 赞同：2
> 
> 时间：2012-08-19T16:34:03.417
> 
> 标签：ruby, irb

我已经使用 Ruby 1.9.3-p194 一键安装程序在我的 Windows 7 PC 中安装了 Ruby 1.93。我可以使用`ruby`命令来解释文件，但是当我键入`irb`它时，会出现以下错误：

```
C:\Users\Acer>irb
F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:2111:in `expand_path': non-absolute home
(ArgumentError)
        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:2111:in `_rl_read_init_file'

        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:2094:in `rl_read_init_file'
        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:2515:in `readline_initialize
_everything'
        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:3746:in `rl_initialize'
        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/rbreadline.rb:4758:in `readline'
        from F:/Programs/Ruby193/lib/ruby/site_ruby/1.9.1/readline.rb:40:in `readline'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/input-method.rb:115:in `gets'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:139:in `block (2 levels) in eval_input'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:273:in `signal_status'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:138:in `block in eval_input'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `call'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `buf_input'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:103:in `getc'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/slex.rb:205:in `match_io'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/slex.rb:75:in `match'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:286:in `token'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:262:in `lex'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:233:in `block (2 levels) in each_top
_level_statement'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_stat
ement'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:70:in `block in start'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:69:in `catch'
        from F:/Programs/Ruby193/lib/ruby/1.9.1/irb.rb:69:in `start'
        from F:/Programs/Ruby193/bin/irb:12:in `<main>' 
```

我在文件夹上安装了 Ruby`F:/Programs/Ruby193`并添加`F:/Programs/Ruby193/bin`到我的`PATH`. 我也尝试过使用 Ruby 1.87，但遇到了同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:08:58.920

我从皮特的评论中得到了解决方案。我已经`Cygwin`在我的电脑中安装了导致问题的（不知道为什么）。我刚刚在命令行中输入了这个：`set HOME=` 并`irb`开始工作！

你也可以看到[这个链接](http://royontechnology.blogspot.com/2011/02/cygwin-and-irb.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-24T23:51:34.863

如果您在与小提琴相关的 Ruby 1.9.3 中启动 IRB 时遇到问题，您可以这样做：

在 `rubyxxx\lib\ruby\site_ruby\x.x.x\rbreadline.rb`替换：

这：

```
 require 'fiddle'
  class Win32API
    DLL = {}
    TYPEMAP = {"0" => Fiddle::TYPE_VOID, "S" => Fiddle::TYPE_VOIDP, "I" => Fiddle::TYPE_LONG}
    CALL_TYPE_TO_ABI = {:stdcall => 1, :cdecl => 1, nil => 1} #Taken from Fiddle::Importer

    def initialize(dllname, func, import, export = "0", calltype = :stdcall)
      @proto = import.join.tr("VPpNnLlIi", "0SSI").chomp('0').split('')
      handle = DLL[dllname] ||= Fiddle.dlopen(dllname)
      @func = Fiddle::Function.new(handle[func], TYPEMAP.values_at(*@proto), CALL_TYPE_TO_ABI[calltype])
    end

    def call(*args)
      args.each_with_index do |x, i|
        args[i], = [x == 0 ? nil : x].pack("p").unpack("l!*") if @proto[i] == "S"
        args[i], = [x].pack("I").unpack("i") if @proto[i] == "I"
      end
      @func.call(*args).to_i || 0
    end 
```

和：

```
 require 'dl'
  class Win32API
    DLL = {}
    TYPEMAP = {"0" => DL::TYPE_VOID, "S" => DL::TYPE_VOIDP, "I" => DL::TYPE_LONG}

    def initialize(dllname, func, import, export = "0", calltype = :stdcall)
      @proto = [import].join.tr("VPpNnLlIi", "0SSI").sub(/^(.)0*$/, '\1')
      handle = DLL[dllname] ||= DL.dlopen(dllname)
      @func = DL::CFunc.new(handle[func], TYPEMAP[export.tr("VPpNnLlIi", "0SSI")], func, calltype)
    end

    def call(*args)
      import = @proto.split("")
      args.each_with_index do |x, i|
        args[i], = [x == 0 ? nil : x].pack("p").unpack("l!*") if import[i] == "S"
        args[i], = [x].pack("I").unpack("i") if import[i] == "I"
      end
      ret, = @func.call(args)
      return ret || 0
    end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T12:26:16.200

我建议使用[DevKit](http://rubyinstaller.org/add-ons/devkit/)。我有 64 位 Windows 7 和 ruby​​ 1.9.3-p125，一切都可以在 DevKit 上顺利运行。

```
d:\>systeminfo | findstr /B /C:"OS Name"
OS Name:                   Microsoft Windows 7 Enterprise

d:\>ruby -v
ruby 1.9.3p125 (2012-02-16) [i386-mingw32]

d:\>irb
irb(main):001:0> 2+2
=> 4
irb(main):002:0> exit 
```

# eclipse - eclipse jsp函数fn：escapeXml未定义

> ID：12028132
> 
> 赞同：12
> 
> 时间：2012-08-19T16:34:19.037
> 
> 标签：eclipse, jsp, taglib

我正在开始我的第一个 google app engine jsp 项目。我正在从这里关注留言簿的教程：[https](https://developers.google.com/appengine/docs/java/gettingstarted/introduction) ://developers.google.com/appengine/docs/java/gettingstarted/introduction 。我在数据存储步骤（[https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)）并将该页面上的代码直接粘贴到我的项目中。代码可以编译并且可以工作，但是我在 fn:escapeXml 调用下得到了红色波浪下划线。我看到这些是来自 taglib 的函数，如下所述：[http](http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm) ://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm 。那么，我如何让 eclipse 知道发生了什么而不认为这是一个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T03:17:30.270

我也有同样的问题。

我已经包含了上面推荐的 JSTL-1.2.jar 文件，并且还在 .jsp 文件中包含了以下行

`<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>`

并运行干净的项目

这修复了错误

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T03:26:23.973

您必须在应用程序项目的*构建路径中包含*[JSTL-1.2.jar 。](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T21:10:29.343

为了编译 jsp，您需要在系统中安装 JDK。如果您在 JRE 上运行，您将收到此错误。如果您没有 JDK，请根据您的 Eclipse 版本下载 32 位或 64 位版本。然后在 Eclipse 中，转到：Window->Preferences->Java->Installed JREs 并检查是否有上一步的路径条目。如果没有，则单击添加-> 标准 VM，然后对于 JRE 路径，输入上一步中的路径。您应该会看到添加到库部分的所有 JAR。确保之前的 JRE 未选中，应用并清理您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T19:29:25.053

我有同样的问题，它是 jstl 函数的重复标记库条目。*

# cocoa-touch - 将 UITextfield 的内容存储到 NSMutableArray

> ID：12028134
> 
> 赞同：0
> 
> 时间：2012-08-19T16:34:36.803
> 
> 标签：cocoa-touch, nsmutablearray, uitextfield

我想让用户在 a 中输入一些名称`UITextField`（最好用逗号或空格分隔），然后将其转换为 a`NSMutableArray`以在 a 中显示`UITableView`。

是否可以？如果是，请告诉我如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:02:12.687

从文本字段中获取文本并使用 @"," 作为分隔符将其转换为 NSArray。

```
NSArray *names = [textfield.text componentsSeparatedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:04:20.547

试试这个代码。您可以使用像这段代码这样的字符集，我使用“空格”和“，”，然后创建一个数组。

```
NSString *string = textField.text;
NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@" ,"];   
NSMutableArray *array = [[NSMutableArray alloc]initWithArray:[string componentsSeparatedByCharactersInSet:set]];                 

NSLog(@"%@ ===", array); 
```

# python - AppEngine 中的 GQL 查询

> ID：12028135
> 
> 赞同：2
> 
> 时间：2012-08-19T16:34:40.467
> 
> 标签：python, google-app-engine, datastore, gql

我正在使用 dataStore 试图执行一个简单的查询，但它不能按预期工作：

```
class User_Machine(db.Model):
    machine_id = db.IntegerProperty (required = True)
    username = db.StringProperty (required = True)
    last_call = db.DateTimeProperty (auto_now = True)

def query(username, machine_id)
    q = db.GqlQuery('SELECT * FROM User_Machine WHERE username=:1 AND machine_id=:2', username, machine_id)
    r = q.get()
    return r

print query('uherran', 23) 
```

而我的回应是：

> 没有任何

我期待阅读这条记录：

datastopre 查看器中的值是：

```
Enitty Kind  User_Machine
Entity Key   ahBkZXZ-Z2VzdG9yYXZpc29zchILEgxVc2VyX01hY2hpbmUYKAw
ID   40
username (string)   uherran
last_call (datetime)    2012-08-19 09:57:35
machine_id (long)       23 
```

我对查询如何进行的理解一定是完全错误的。

任何人都可以帮忙吗？

谢谢。

实际上。我做了一些调整，但我的代码提供了清晰性，但似乎我没有进行适当的错误检查。

代码是：

```
def check_machine_username(self, machine_id, username):
        key='CHECK_MACHINE_USERNAME_'+machine_id+'_'+username
        q= memcache.get(key)
        if q:
            return True
        else:
            logging.info(username)
            logging.info(machine_id)
            q = dbstructure.User_Machine.all()
            q.filter('username = ', username)
            q.filter('machine_id = ', machine_id)

            if q.get():
                loggin.info('query right')
                memcache.set(key,True)
                return True
            else:
                logging.info('query wrong')
                return False 
```

无论我的 User_machine 数据库中有什么，该查询总是返回空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:44:48.437

我注意到的问题是它`machine_id`是一个整数，而我使用的是一个字符串。

```
q.filter('username = ', username)
q.filter('machine_id = ', int(machine_id))
                          ^^^ 
```

假设类型是坏事。

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:42:39.190

我的猜测是，在失败的情况下，您的 machine_id 是一个字符串，而它应该是一个 int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:06:45.913

看起来这是因为您没有将函数的值返回给您的`print`（我可能会也可能不会一直这样做:)）。尝试这个：

```
def query(username, machine_id)
    q = db.GqlQuery('SELECT * FROM User_Machine WHERE username=:1 AND machine_id=:2', username, machine_id)
    r = q.get()
    return r # or just return q.get() 
```

请注意，这将返回一个`User_Machine`对象（而不是您可能期望的格式化字典/其他响应），然后您需要处理该对象（例如，而不是`print`，将其分配给`result`变量，然后您可以通过执行访问其属性`result.machine_id`， ETC。）。

你也可以使用 Query 对象来完成同样的事情：

```
def query(username, machine_id)
    # Same as using SELECT * in the Gql query above)
    q = User_Machine.all()

    # Then apply the filters (you can also do q.filter(..).filter(..))
    q.filter('username = ', username)
    q.filter('machine_id = ', machine_id)
    return q.get() 
```

# jquery - MVC3 不显眼的验证 - 如果输入不在屏幕上，我怎么能看到验证失败？

> ID：12028137
> 
> 赞同：0
> 
> 时间：2012-08-19T16:34:52.383
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validate, unobtrusive-validation

我在 MVC3 中有一个向导，它在到达带有提交按钮的确认页面之前滚动浏览多个页面。

我的问题是，当向导的前一页出现验证失败时，单击提交按钮时问题不可见；所有验证消息都在隐藏的 div 中。

如何在单击提交时点击验证，以便在验证失败时显示“表单提交存在一个或多个问题”或类似内容的对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:18:58.003

您可以动态添加每个表单以进行验证，并在完成验证且不再处于焦点时将其删除。我在这里打电话，所以请原谅简洁，因为我可以在计算机上添加更多详细信息。如果您只想显示一条消息，则连接到表单帖子并通过 form.validate() 或 .valid() 检查表单是否有效

如需更多控制 [http://www.position-absolute.com/articles/introducing-hooks-in-the-jquery-form-validation-engine-plugin/](http://www.position-absolute.com/articles/introducing-hooks-in-the-jquery-form-validation-engine-plugin/)

[如何在 MVC 3 中挂钩 jQuery 验证不显眼的错误？](https://stackoverflow.com/questions/6494008/how-to-hook-into-error-of-jquery-validate-unobtrusive-in-mvc-3)

我确实认为这可能最好通过 Ajax 和多个请求来完成，并在提交最终保存之前将每个阶段保存在某个地方（可以使用缓存或数据库）。

# php - 用于客户端验证的 cactiveform 错误管理

> ID：12028139
> 
> 赞同：0
> 
> 时间：2012-08-19T16:35:17.923
> 
> 标签：php, yii

我的表格中有一个申请人计数下拉列表。当我从下拉列表中选择申请人数量时，我需要输入那么多申请人的名字、姓氏等。当我点击提交按钮时，我需要显示客户验证。如何实现这一点。

我创建了 cactiveform 小部件。

我的控制器看起来像

```
class PolicyFamilyDetailsController extends Controller
{
 public function actionIndex()
{
    $PolicyFamilyDetails=new PolicyFamilyDetails;
    $PolicyFamilyApplicant=new PolicyFamilyApplicant;
    $this->performAjaxValidation($PolicyFamilyDetails);
    if(isset($_POST['continue']))
    {
        print_r($_POST['PolicyFamilyDetails']);
        exit;

    }
    Yii::app()->session['policy_id']=2;
    $data['policy_id']=Yii::app()->session['policy_id'];
    $data['PolicyFamilyDetails']=$PolicyFamilyDetails;
    $data['PolicyFamilyApplicant']=$PolicyFamilyApplicant;
    $this->render('index',$data);
}
public function actionapplicantList()
{
    $data=array();
    $PolicyFamilyDetails=new PolicyFamilyDetails;
    $data['PolicyFamilyDetails']=$PolicyFamilyDetails;
    $data['applicant_list']=$_POST['applicant_list'];
    $data['applicant_count']=$_POST['applicant_count'];
    $this->renderPartial('applicant_list',$data,false,true);
    //$this->render('applicant_list',$data);
} 
```

}

模型是：

```
class PolicyFamilyDetails extends CActiveRecord
{
public function tableName()
{
    return 'cis_policy_family_details';
}
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('policy_id, first_name, last_name, dob, gender, height, height_scale, weight, weight_scale, occupation, nationality, passport_no, main_applicant', 'required'),
        );
}
} 
```

视图是 index.php

```
<script type="text/javascript">
$(document).ready(function() {

});

function closeError() {
hid_remove_count=$('#hid_remove_count').val();
if ($('input:checked').length==hid_remove_count)
{
    $('input:checked').each(function(){
        $('#applicant_'+$(this).attr('id')).remove();
    });
    $('#errorBlank_applicant_list').hide();
    $('#errorBox_applicant_list').hide();
}
else
    alert('Please choose '+hid_remove_count+' applicant');
}

</script>

<?php 

$form=$this->beginWidget('CActiveForm', array(
'id'=>'policy-registration-form',
'stateful'=>true,
'enableAjaxValidation'=>true,
'enableClientValidation'=>true,
/*'focus'=>array($model,'startDate'),*/
'clientOptions'=>array(
    'validateOnSubmit'=>true,
),
)); 
Yii::app()->session['form'] = $form;
//print_r($form);
?>
<div id="innerContainer">
    <h2>Step 3 - Family Details</h2>
    <p>Details about you and your family applying for cover:</p>
     <div id="infoContainer">
        <div class="item">

        <label class="small" for="noapplicants">Number of applicants</label>
<?php
 $static =   array('1'=>1,'2'=>2,'3'=>3,'4'=>4,'5'=>5,'6'=>6,'7'=>7,'8'=>8,'9'=>9,'10'=>10,);
 $ajax_code = <<<LABEL
 if ($(this).val()=='')
{
  $('.applicant_list').html('');
  return false;
}
var applicant_count=parseInt($(this).val());
var applicant_list=parseInt($('.applicants').length);

if (applicant_count<=applicant_list)
{
//alert(applicant_list);
applicant_check_list='<p>Please choose any '+(applicant_list-applicant_count)+' applicants that you want to remove.</p>';
applicant_check_list+='<input type="hidden" id="hid_remove_count" value="'+(applicant_list-applicant_count)+'"/>';
for (var i=2; i<=applicant_list; i++)
    applicant_check_list+='<input type="checkbox" id="'+i+'" class="check_list"/>Appilcant '+i+'<br/>';
$(".applicant_check_list").html(applicant_check_list);
$("#errorBlank_applicant_list").show();
$("#errorBox_applicant_list").show();
return false;
}
LABEL;

echo Yii::app()->session['form']->dropDownList(
              $PolicyFamilyApplicant,
              'applicants_count',
              $static ,
              array('empty'=>Yii::t('fim','Please Select'),
              'onchange'=>$ajax_code.
                        CHtml::ajax(array(
                          'type'=>'POST',
                            'url'=>$this->createUrl("policyFamilyDetails/applicantList"),
                          'data'=>array('applicant_count'=>'js:this.value',
                                        'applicant_list'=>'js:$(".applicants").length',
                                           ),  
                          'success'=>'function(data) { $(".applicant_list").append(data) }'
                          )),

 ));
 ?>

       <?php echo $form->error($PolicyFamilyApplicant,'applicants_count');?>
        </div>
        <?php $this->renderPartial('applicant_list',array(
                        'applicant_list'=>0,
                        'applicant_count'=>1,
                        'PolicyFamilyDetails'=>$PolicyFamilyDetails,
                        'form'=>$form,
                        'enableAjaxValidation'=>false
        ));?>
        <div class="applicant_list">
        <?php //$this->renderPartial('applicant_list');?>
        </div>

    </div>

    <div id="footer" class="clearfix">

        <div id="fr" class="form-btn-orange">
        <span> 
        <?php echo CHtml::submitButton('Continue',array('class'=>'btnOrange','name'=>'continue')); ?></span>
        </div>
    </div>
</div>
 <?php $this->endWidget(); ?>
 <div id="errorBlank_applicant_list"></div>
 <div id="errorBox_applicant_list">
<img src="<?php echo Yii::app()->request->baseUrl;?>/images/infobig.jpg" width="51" height="51" alt="Information" style="float:left;margin: 0 20px 20px 0" />
<h2>For your information</h2>
<div class="applicant_check_list">
</div>
<div id="errorOK">
    <input type="image" value="ok" src="<?php echo Yii::app()->request->baseUrl;?>/images/error-ok.gif" onclick="closeError()" /></div> 
</div> 
```

申请人列表.php

```
<?php //$loop_val=5;
for ($i=$applicant_list;$i<$applicant_count;$i++) {?>

 <div class="clearfix">
 <div id="applicant_<?php echo $i+1;?>" class="applicants">
 <h3><?php echo ($i==0)?'Main Applicant':'Applicant '.($i+1);?></h3>

 <?php
 $value=($i==0)?'Y':'N';
 $cActiveForm=new CActiveForm();
 $form=Yii::app()->session['form'];

 $newCActiveFormObj = new CActiveForm(array(
                                'enableClientValidation' =>true,
                                'clientOptions'=>array(
                                                        'validateOnSubmit'=>true,
                                                    ),
                                ));

   echo Yii::app()->session['form']->hiddenField($PolicyFamilyDetails,'['.($i+1).']main_applicant',array('value'=>$value));
  echo $form->hiddenField($PolicyFamilyDetails,'['.($i+1).']policy_id',array('value'=>Yii::app()->session['policy_id']));
  echo $form->hiddenField($PolicyFamilyDetails,'applicant_list[]',array('value'=>$i+1));

 ?>
 <div class="halfCol float">
              <div class="item">
                <label for="firstname" class="xsmall">First Name</label>
                <?php echo $form->textField($PolicyFamilyDetails,'['.($i+1).']first_name',array('class'=>'medium'/*,'id'=>'first_name_'.($i+1)*/)); ?>
                <?php echo $form->error($PolicyFamilyDetails, 'first_name',array('inputID'=>'PolicyFamilyDetails_'.($i+1).'_first_name'));?>
                </div>

            </div>

           <div class="halfCol floatRight">
                <div class="item">

                <label class="xsmall" for="lastname">Last Name</label>
                <?php echo $form->textField($PolicyFamilyDetails,'['.($i+1).']last_name',array('class'=>'medium')); ?>
                           <?php echo    $form->error($PolicyFamilyDetails,'last_name',array('inputID'=>'PolicyFamilyDetails_'.($i+1).'_last_name')); ?></div>
       </div>

        </div>

        </div>
 <?php } ?> 
```

# android - Android 图像触控轮播

> ID：12028141
> 
> 赞同：0
> 
> 时间：2012-08-19T16:35:44.117
> 
> 标签：android, bitmap, android-canvas, android-image

我的应用程序中有 5 张半透明图像。
我需要选择其中一个图像并将其应用到**另一个**图像上（显示在背景中）。
我会选择这些水平移动的图像（例如：从左到右触摸），保持背景可见。
一种旋转木马，但我必须一次显示一个图像。

非常欢迎这方面的任何帮助。

![在此处输入图像描述](../Images/0d66699050046b4f087fdd96404b7b71.png) ![在此处输入图像描述](../Images/19f9731ab6a5b8f198050be68bcaeeb8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:23:06.423

我使用 FrameLayout 中的画廊和图像来解决它以使其居中。
它工作正常。

# jquery - 如何将 PayPal 表单输入的值更改为用户通过文本输入给出的值

> ID：12028143
> 
> 赞同：0
> 
> 时间：2012-08-19T16:36:01.280
> 
> 标签：jquery, forms, input, paypal

我想使用 PayPal 创建商店。我希望用户在文本字段中提供他们的游戏内用户名，之后我希望名为“ign”的输入的值与用户给定的值相同。为什么我想要这样而不是表单中的文本字段，是因为我希望用户只填写他的用户名一次并且仍然能够购买不止一件商品，而且我不想要 30 个文本字段要求同样的事情。这就是我现在所拥有的，我知道它不起作用，但我正在寻找可以说出我需要使用哪种 Javascript 或 HTML 的人。不要介意表格中的大写单词。我把它们放在我自己的网站上。

```
<script>$("input.txtPlayerName").val($("#PlayerName").val());</script>

<input id="PlayerName" type="text" placeholder="Player Name" >

<form method="POST" action="http://YOUR-STORE-URL-HERE/cart/directpay">
    <input type="hidden" name="gateway" value="GATEWAY-NAME-HERE" />
    <input type="hidden" name="package" value="PACKAGE-ID-HERE" />
    <input type="hidden" class="txtPlayerName" name="ign" value="" />
    <input type="submit" value="Purchase" />
</form> 
```

感谢您的阅读，也许是回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:38:13.320

您可以在更改事件中设置它：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#PlayerName").change(function() {
        $("input.txtPlayerName").val($(this).val());
    });
});
</script>

<input id="PlayerName" type="text" placeholder="Player Name" >

<form method="POST" action="http://YOUR-STORE-URL-HERE/cart/directpay">
    <input type="hidden" name="gateway" value="GATEWAY-NAME-HERE" />
    <input type="hidden" name="package" value="PACKAGE-ID-HERE" />
    <input type="hidden" class="txtPlayerName" name="ign" value="" />
    <input type="submit" value="Purchase" />
</form> 
```

# jakarta-ee - javax.ejb.SessionContext 是否注入到 bean-managed-concurrency Singleton bean 线程安全？

> ID：12028144
> 
> 赞同：1
> 
> 时间：2012-08-19T16:36:08.400
> 
> 标签：jakarta-ee, ejb-3.0, java-ee-6, ejb-3.1

我有一个[`@Singleton`](http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html)会话 bean。bean 用 注释。[`@ConcurrencyManagement`](http://docs.oracle.com/javaee/6/api/javax/ejb/ConcurrencyManagement.html)`(` [`ConcurrencyManagementType.BEAN`](http://docs.oracle.com/javaee/6/api/javax/ejb/ConcurrencyManagementType.html#BEAN)`)`

它通过注释[`SessionContext`](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionContext.html)注入了它。[`@Resource`](http://docs.oracle.com/javaee/6/api/javax/annotation/Resource.html)

这[`SessionContext`](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionContext.html)本质上是线程安全的（因为它是容器生成的对象，也用于非 bean 管理的并发情况），还是我的 bean 必须在锁上同步才能访问和操作它？[EJB 3.1 规范](http://download.oracle.com/otndocs/jcp/ejb-3.1-fr-eval-oth-JSpec/)的第 16.15.2 节没有提到注入[`EJBContext`](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBContext.html)对象的线程安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:48:41.653

上下文对象必须是线程安全的，并且几乎可以肯定它使用线程局部变量来实现这一点（事实上，一旦您意识到容器只是在操作线程局部变量，Java EE 的许多神秘部分就可以理解：java:comp 、安全、交易等）。否则，EJB 容器实现没有其他方法可以从 getInvokedBusinessInterface、wasCancelCalled 等返回可靠结果。

例如，想象一个不是线程安全的 EJBContext 实现；即，它有一个成员变量 invokedBusinessInterface 和一个 setInvokedBusinessInterface 方法，EJB 容器将在调用 bean 方法之前调用它们。在这种情况下，如果同时调用两个单例方法，其中一个线程必然会从 getInvokedBusinessInterface 得到错误的答案，并且 bean 方法可以应用的同步量无法解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T00:55:37.723

来自[Marina Vatkina 在`users@ejb-spec.java.net`邮件列表中](http://java.net/projects/ejb-spec/lists/users/archive/2012-08/message/5)的帖子：

> `EJBContext`在非单例 bean 中，只能由单个线程访问，因此它不需要是线程安全的。如果我们在 4.8.5 单例会话 Bean 并发部分中使用以下文本，如果多个线程可以同时访问该单例实例，则确保上下文是线程安全的成为开发人员的责任：
> 
> > “在单例会话 bean 实例状态中存储不支持并发访问的 Java EE 对象（例如对 Java Persistence 实体管理器或有状态会话 bean 的引用）是合法的。但是，确保此类对象是 Bean Provider 的责任一次不能被多个线程访问。”

# c - 是否有一种有效且安全的方法来反转数组中的所有元素？

> ID：12028148
> 
> 赞同：0
> 
> 时间：2012-08-19T16:36:36.510
> 
> 标签：c, arrays

我需要反转大数组，使第一个元素成为最后一个元素，最后一个元素成为第一个元素。

到目前为止，我通过创建这个数组的副本来做到这一点，然后在原始数组上向后迭代并写入副本。之后，将副本写回原件。

通过同时访问第一个和最后一个元素，将其中一个元素存储在临时变量中并交换值，是否可以在一个循环中安全地执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T16:42:54.927

可能最有效的方法是使用*就地算法*，例如下面的算法（相当于[这里](http://en.wikipedia.org/wiki/In-place_algorithm#Examples)的维基百科文章）：

```
for (int ix = 0; ix < len / 2; ix++) {
    int t = arr[ix];
    arr[ix] = arr[len - ix - 1];
    arr[len - ix - 1] = t;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T17:07:11.000

对于整数类型，更好的方法是......

```
int arr[5]={1,2,3,4,5};
int c=0,d=sizeof(arr)/sizeof(*arr)-1;
for(;c<d;c++)
{  
 arr[c] ^= arr[d-c];
 arr[d-c] ^= arr[c];
 arr[c] ^= arr[d-c];
} 
```

由于 XOR 是一字节指令，因此交换线几乎不需要 3 个字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T16:46:00.450

```
int Array[100];

unsigned int i, j;
for (i=0, j=100-1; i<j; i++, j--)
{
   int t;
   t = Array[j];
   Array[j] = Array[i];
   Array[i] = t;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T03:25:14.557

您可以使用 reverse() 函数，或者我认为这将是非常简单的解决方案

```
#include<iostream>
using namespace std;
int main() {
int n;
cin>>n;
unsigned int arr[n];
for(int i = 0; i < n; i++)
{
    cin>>arr[i];
}
while(n)
{
    cout<<arr[n-1]<<" ";
    n--;
}
return 0; 
```

}

# matlab - 在 Matlab 中查找转换矩阵

> ID：12028150
> 
> 赞同：0
> 
> 时间：2012-08-19T16:36:53.663
> 
> 标签：matlab

我在matlab中有一个简单的问题。我有等式： A*H=b 我知道 A 和 b 我尝试使用这个表达式：

```
H=A\b; 
```

但我得到错误的值：例如：

```
 A =

       231   481
       233   488
       241   481
       243   489
b =

    11    31
     6    20
    21    31
    18    22 
```

我得到

```
H =

    1.1627    0.2713
   -0.5396   -0.0791 
```

所以

```
A*H

ans =

    9.0386   24.6299
    7.5868   24.6189
   20.6659   27.3434
   18.6745   27.2532 
```

这不是 b

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:05:21.430

在`help slash`命令提示符下键入：

> \ 反斜杠或左除法。
> 
> A\B 是 A 到 B 的矩阵除法，与 INV(A)*B 大致相同，只是计算方式不同。如果 A 是 N×N 矩阵且 B 是具有 N 个分量的列向量，或具有多个此类列的矩阵，则 X = A\B 是方程 A*X = B 的解。警告消息是如果 A 缩放不良或几乎是奇异的，则打印。A\EYE(SIZE(A)) 产生 A 的倒数。
> 
> 如果 A 是具有 M < 或 > N 的 M×N 矩阵，并且 B 是具有 M 个分量的列向量，或具有多个此类列的矩阵，则 X = A\B 是最小二乘意义上的解方程组 A*X = B 的欠定或超定系统。A 的有效秩 K 由带旋转的 QR 分解确定。计算出每列最多有 K 个非零分量的解 X。如果 K < N，这通常不是与 PINV(A)*B 相同的解决方案。A\EYE(SIZE(A)) 产生 A 的广义逆。

因此，第二段适用于您的情况。换句话说，没有什么`H`可以满足`A*H = b`您的问题，但 Matlab 会计算出它的最佳近似值（在最小二乘意义上）。所以你得到的结果是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T17:07:40.293

```
h = b ./ A;

h = 0.0476    0.0644
    0.0258    0.0410
    0.0871    0.0644
    0.0741    0.0450

A.*h = 11    31
        6    20
       21    31
       18    22 
```

或者，您可以添加`.`到您的部门，即`h = A .\ b`

# java - 依赖maven项目的测试失败

> ID：12028154
> 
> 赞同：2
> 
> 时间：2012-08-19T16:37:50.417
> 
> 标签：java, testing, maven, build, dependencies

我有多个项目，其中项目 X 依赖于项目 Y。项目 X 的​​测试使用读取配置文件的项目 Y。( X --> Y --> configfile) 我正在使用 maven-jar-plugin 从 JAR 中排除一些配置文件。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.1</version>
    <inherited>true</inherited>
    <configuration>
        <excludes>
                    <exclude>*.xml</exclude>
                    <exclude>*.*conf*</exclude>
                    <exclude>*.*prop*</exclude>
        </excludes>
    </configuration>
</plugin> 
```

在我的项目上运行“Maven 测试”时，一切正常，所有测试都成功。但是当运行“Maven 包”时，项目 X 的​​测试失败了，因为项目 Y 找不到配置文件。

我最好的猜测是，在运行“包”目标时，项目 X 会针对项目 Y 的已构建 JAR 而不是其 .class 文件运行。我对么？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:31:43.697

也许您可能会对**如何创建包含**[maven-jar-plugin 页面](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)的测试类的jar 部分感兴趣。

这个想法是为您的项目 Y 创建两个不同的 jar：除了当前打包的 jar 之外的一个测试 jar。您有两个 maven-jar-plugin 执行，一个用于您当前的 jar，另一个用于 test-jar，其配置文件未被过滤。

要允许项目 X 引用项目 Y 的 test-jar，您还需要在 test *scope*中向此 jar 添加依赖项。

请注意，该页面建议另一种方法，即创建另一个专用于您的测试类的 Maven 项目，您不会排除任何配置文件。

# jquery - 滑块在 IE 中不起作用

> ID：12028156
> 
> 赞同：-1
> 
> 时间：2012-08-19T16:37:54.143
> 
> 标签：jquery, html, wordpress

请看看这个： http: [//nichemarketingreviews.nl/](http://nichemarketingreviews.nl/)

在 IE9 中，滑块突然不起作用了。我没有对网站的代码做任何事情，只是在 WP 的后端发了一些帖子。

谁能看到或告诉我出了什么问题？会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:11:56.347

到目前为止，使 nivo 滑块在 IE9 中再次工作的唯一答案是将其解析为 IE8。将此添加到文件的头部（之前）

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

我不太喜欢这个答案，因为问题实际上仍然存在于 IE9 中，尽管它有效。如果有人有更好的解决方法，我会很高兴看到你更好的答案

# java - java.lang.UnsupportedClassVersionError：不支持的major.minor 51.0版（无法加载类frontend.listener.StartupListener）

> ID：12028166
> 
> 赞同：35
> 
> 时间：2012-08-19T16:40:31.973
> 
> 标签：java, tomcat

> **可能重复：**
> [不支持的主要 .minor 版本 51.0](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

我有 eclipse indigo 和 tomcat 7.0.29。仍然无法加载任何 Serlvets！除了 1.7 之外，我没有其他 JDK 或 JRE！

*   合规级别 1.7
*   JAVA_HOME 指向 JDK 1.7
*   JAVA_JRE 指向 JRE 1.7
*   构建路径包含 JDK 1.7
*   Java 方面 1.7

..但仍然不支持major.minor 51.0版

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-19T16:52:24.347

当你这样做时，你的输出是什么`java -version`？这将告诉您正在运行的 JVM 是什么版本。

Unsupported major.minor version 51.0 错误可能意味着：

*   您的服务器运行的 Java 版本低于用于编译 Servlet 的 Java 版本，反之亦然

无论哪种方式，卸载所有 JVM 运行时，包括 JDK 并下载最新版本并重新安装。这应该可以解决任何`Unsupported major.minor`错误，因为您将拥有最新的 JRE 和 JDK（可能比用于编译 Servlet 的版本更新）

参见：[http](http://www.java.com/en/download/manual.jsp) ://www.java.com/en/download/manual.jsp （7 更新 25）

在这里：[http](http://www.oracle.com/technetwork/java/javase/downloads/index.html) ://www.oracle.com/technetwork/java/javase/downloads/index.html （Java平台（JDK）7u25）

分别为最新版本的 JRE 和 JDK。

编辑：

您的代码很可能是用 Java7 编写的，但也可能是使用 Java7update4 完成的，并且您的系统正在运行 Java7update3。因此，它们实际上都是相同的主要版本，但次要版本不同。只有较大的次要版本向后兼容较低的次要版本。

编辑 2：如果您的电脑上安装了多个 jdk。您应该检查 Apache Tomcat 是否使用与您编译程序相同的 (jre)。如果您在安装 apache 后安装了新的 jdk，通常不会选择新版本。

# android - 可检查的列表视图游标数据独立复选框

> ID：12028167
> 
> 赞同：0
> 
> 时间：2012-08-19T16:40:42.507
> 
> 标签：android, listview

我的任务是创建一个**基于**. `ListActivity`数据内容来自数据库`SimpleCursorAdapter`。

独立于光标列，它必须`CheckBox`在每个列表项中显示一个。用户应该检查**任意多的行**。当用户完成他的选择时，我必须得到所有检查的行和它的 _id 列，所以我必须知道哪些行被检查了。

怎么做？

没有`CheckBoxes`该`Listview`功能已经可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:21:31.353

One quick way would be to use `android.R.layout.simple_list_item_multiple_choice`. This code example does what you want (just note that I used Contacts for my Cursor):

```
public class ListCheck extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_check);

        this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);
        startManagingCursor(cursor);

        String[] columns = new String[] { ContactsContract.Contacts.DISPLAY_NAME };
        int[] to = new int[] { android.R.id.text1 };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                android.R.layout.simple_list_item_multiple_choice, cursor, columns, to);
        this.setListAdapter(adapter);

        Button finishButton = (Button) this.findViewById(R.id.finishButton);
        finishButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                SimpleCursorAdapter adapter = (SimpleCursorAdapter) ListCheck.this.getListAdapter();
                Cursor cursor = adapter.getCursor();

                ListView lv = ListCheck.this.getListView();
                SparseBooleanArray selectedItems = lv.getCheckedItemPositions();
                for (int i = 0; i < selectedItems.size(); i++) {

                    int selectedPosition = selectedItems.keyAt(i);
                    cursor.moveToPosition(selectedPosition);
                    Log.d("", cursor.getString(cursor.getColumnIndex(
                            ContactsContract.Contacts.DISPLAY_NAME))+" is checked");
                    Log.d("", "row id: "+adapter.getItemId(selectedPosition));
                }
            }
        });
    }
} 
```

Activity layout:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/finishButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:choiceMode="multipleChoice" />

</LinearLayout> 
```

* * *

However, if you want to add other custom data inside each row (image, subtitle..), then you have to create a custom layout for your rows using [`CheckedTextView`](http://developer.android.com/reference/android/widget/CheckedTextView.html). `CheckedTextView` is really the key here, since it's used by the [`android.R.layout.simple_list_item_multiple_choice`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/simple_list_item_multiple_choice.xml).

Just follow this example:

```
<com.mfp.tests.CheckableLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <CheckedTextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    />

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="added a data: subtitle"/>

</com.mfp.tests.CheckableLinearLayout> 
```

One last thing: I used a custom layout instead of a `LinearLayout`. In order to make the checkBox of `CheckedTextView` responsive (automatically checked or unchecked when you click on a row), the layout must implement `Checkable` (and LinearLayout doesn't), so you'll have to copy the `CheckableLinearLayout` class from this [link](http://tokudu.com/2010/android-checkable-linear-layout/):

PS: If you want to try the code above, don't forget to put `<uses-permission android:name="android.permission.READ_CONTACTS" />` inside your Manifest.xml

# authentication - 访问具有额外身份验证的 WiFi 互联网

> ID：12028168
> 
> 赞同：4
> 
> 时间：2012-08-19T16:40:49.203
> 
> 标签：authentication, wifi

我的大学分两步运行他们的 wifi 身份验证。首先您连接到 wifi 网络，然后当您打开网络浏览器时，您必须输入一些关于您自己的附加信息才能访问互联网。

1）大学系统有一些方法可以检测设备之前是否已经过身份验证（因此它不会每次都要求您提供凭据），这是如何完成的？是通过MAC地址吗？

2) 假设我正在尝试运行没有 Web 浏览器的家庭服务器。我怎样才能上网？我是否需要安装网络浏览器才能通过第二步身份验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:35:13.513

您所说的“两步”过程称为“强制门户”：

> *   [http://en.wikipedia.org/wiki/Captive_portal](http://en.wikipedia.org/wiki/Captive_portal)
> 
> 强制门户技术强制网络上的 HTTP 客户端在正常使用 Internet 之前查看特殊网页（通常用于身份验证）。强制门户将 Web 浏览器变成身份验证设备。[1] 这是通过拦截所有数据包来完成的，无论地址或端口如何，直到用户打开浏览器并尝试访问 Internet。此时，浏览器被重定向到可能需要验证和/或付款的网页，或者只是显示可接受的使用政策并要求用户同意。强制门户用于许多 Wi-Fi 热点，也可用于控制有线访问（例如公寓、酒店房间、商务中心、“开放”以太网插孔）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:46:43.880

第一：是的，这很有可能。毕竟，MAC 地址是网络世界中唯一可用的“可靠”身份验证方法。然而，他们也很可能正在使用某种 cookie，它保存了身份验证信息。

第二：大学网络内的家庭服务器，是吗？我的理解是，无论您尝试什么，都永远无法从外部访问该服务器，原因很简单：来自外部的客户端已经在大学的网关处被拒之门外。没有'没有路由到主机'。您必须要求大学网络的管理员将您的家庭服务器的端口转发到运行家庭服务器的计算机。从好的方面来说，您根本不需要对自己进行身份验证，因为这仅适用于您的应用程序进行连接的情况。服务器等待传入的连接，所以一切都很好。

# android - 如何将画布视图和按钮放在同一屏幕上？

> ID：12028170
> 
> 赞同：0
> 
> 时间：2012-08-19T16:40:56.220
> 
> 标签：android, button, view, canvas

过去一周我一直在尝试这个。我正在尝试将我所做的画布绘制成一个带有下面按钮的圆圈。但是，当这样做时，要么按钮出现在屏幕上，要么只出现在画布上，因为要么覆盖另一个，所以有没有人有代码或知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:31:27.480

如果您以编程方式创建布局并向其添加表面视图（包含您正在绘制的画布），然后添加一个按钮，则该按钮将出现在表面视图上方。

# excel - Excel-VBA：如何在 vba 代码中获取所选数组的大小？

> ID：12028173
> 
> 赞同：3
> 
> 时间：2012-08-19T16:41:31.180
> 
> 标签：excel, vba, macos

我正在用 excel 编写一个 vba 函数，它接收一个奇数大小的空方阵并用数字填充它。但是，在调用函数之前，我无法检索它在电子表格中动态选择的数组的大小。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T17:29:28.643

将 Range 对象传递给您的函数并查看值：

```
Public Function WhatIsTheMatrix(SourceRange as Excel.Range) As Variant

   Dim arrSource as Variant
   Dim arrOutPut as Variant

   Dim i As Long, j As Long

   arrSource = SourceRange.Value2

   i = Ubound(arrSource, 1)
   j = Ubound(arrSource, 2)

   ' The lower bounds of an array obtained from a range are always 1

   ' code
   ' more code
   ' even more code

   WhatIsTheMatrix = arrOutPut 

End Function 
```

现在你有两个问题：

1.  您的原始问题，通过检查 i 和 j 解决

2.  一种特殊情况，其中单个单元格区域的值不是数组变体

所以你需要这个：

```
If SourceRange.Cells.Count = 1 Then
   Redim arrSource(1 to 1, 1 To 1)
   arrSource(1,1) = SourceRange.Value2
Else
   arrSource = SourceRange.Value2
End If 
```

其他业务：

有一个无法识别的假设，即：您认为您可以传入当前的 Application.Selection 并且它始终是一个范围。它也可以是控件、图表或图表系列...

...不，您不能依赖此引发类型不匹配的运行时错误。是的，你已经调用了 Option Explicit，是的，你输入`SourceRange as Excel.Range`了，你的母亲、你的教区牧师和治安官看着你这样做；尝试在午夜后在一块看起来很险恶的岩石上牺牲一些东西，*也许*VBA 运行时会相信你。

所以你还需要这个：

```
If Not TypeOf SourceRange Is Excel.Range Then
   ' Raise an error or Exit Sub
End If 
```

我*想*这就是所有的惊喜。除非你喜欢奇特的东西和诸如“这个范围是计算出来的吗？”之类的尴尬问题。

# java - Servlet 将结果返回到自定义 HTML 页面

> ID：12028176
> 
> 赞同：1
> 
> 时间：2012-08-19T16:41:43.353
> 
> 标签：java, html, ajax, servlets

我已经从我的 HTML 页面向 servlet 发送数据，这是代码

```
 <form name="search" id="search_bar" action="PathServlet" method="get">
        <table border="5" cellspacing="5" cellpadding="0"><tr>
        <td>
            <input Style="width:300px;"  name="one" type="text"  value="Enter Your Search Here" onFocus="clearText(this)" onBlur="clearText(this)">  <br/>
            <input Style="width:300px;"  name="two" type="text"  value="Enter Your Search Here" onFocus="clearText(this)" onBlur="clearText(this)">  <br/>

            <input type="submit" value="search"/></td></tr>
        </table>    
    </form> 
```

在 servlet 中，我创建了一个 XML 列表

```
 response.setContentType("text/xml;charset=UTF-8");
    PrintWriter out = response.getWriter();
    out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
    out.append("<response>");
    try {
        for (int j = 0; j < path.size(); j++) {

            List<Pipes> tempDeal = PipesDAO.getInstance().findPath(
                    path.get(j).name, path.get(j).name);
            for (int i = 0; i < tempDeal.size(); i++) {
                result += "<deal>" + "<name>" + tempDeal.get(i).getName()
                        + "</name>" + "<lat>" + tempDeal.get(i).getLat()
                        + "</lat>" + "<lon>" + tempDeal.get(i).getLon()
                        + "</lon>" + "<desc>" + tempDeal.get(i).getId()
                        + "</desc>" + "</deal>";
            }
        }
        out.append(result);
        out.append("</response>");
    } finally {
        out.close();
    } 
```

所以现在我想使用 Ajax 将响应数据返回到自定义 HTML 页面。

```
 $.ajax({ 
```

但我不明白如何在 Ajax 中检索数据。

任何的想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:16:01.973

使用 jQuery 使用 ajax 发布数据。检查此链接以获取分步说明： http: [//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

示例代码片段

```
$(document).ready(function() {
    $('#form').submit(function() {
        var searchtext = $('#search').val();
        $.ajax({
            type:       "post",
            url:        "/PathToServlet",
            data:       "q=" + searchtext ,
            success:    function(data) {
              alert('Data Recieved : ' + data);
            }
        });

    return false;
    });
}); 
```

# jquery - 使用 Jquery 将 li 附加到 ul 中，其中 oid=xxx

> ID：12028177
> 
> 赞同：1
> 
> 时间：2012-08-19T16:42:04.220
> 
> 标签：jquery, append, jquery-append

我正在尝试仅将 li 附加到具有这样设置的特定 oid 值的 UL

```
$('ul.sortablespm oid=' + data).append('<li></li>'); 
```

没有 oid 参数它可以正常工作，但随后将 li 添加到页面上的所有 UL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:47:36.937

使用适当的**[属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)**语法，即[`[name="value"]`](http://api.jquery.com/attribute-equals-selector/)：

```
$('ul.sortablespm[oid="' + data + '"]').append('<li></li>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:10:26.690

这是我认为您正在寻找的工作示例。

[http://jsfiddle.net/chapmanc/wU6Vs/](http://jsfiddle.net/chapmanc/wU6Vs/)

如果 ul 对象具有唯一的 id，您可以简单地将其用作选择器并将项目附加到该对象。

例如 id 为 myList 的 ul：

```
<ul id="myList">
    <li>a</li>
    <li>b</li>
    <li>c</li>
</ul>​ 
```

以及使用唯一选择器附加到该对象的函数：

```
$('#myList').append('<li>d</li>');​ 
```

这会将一个 li 项附加到 myList 对象。使用 id 选择器时，请注意 myList 前面的“#”字符。

# javascript - 简单模式自动注销

> ID：12028179
> 
> 赞同：0
> 
> 时间：2012-08-19T16:42:26.677
> 
> 标签：javascript, jquery, css, modal-dialog

我正在尝试使用 js 计时器和 jquery 确认模式制作一个自动注销页面。一切正常，除了当计时器达到 2 秒时它不会打开模式。这是代码。谁能告诉我我做错了什么？

```
<script type='text/javascript' src='simplemodal/js/jquery.js'></script>
<script type='text/javascript' src='simplemodal/js/jquery.simplemodal.js'></script>
<link type='text/css' href='simplemodal/css/confirm.css' rel='stylesheet' media='screen' />
<link type='text/css' href='simplemodal/css/demo.css' rel='stylesheet' media='screen' />
</head>
<body onload="StartClock();">

<form id="timerform" name="timerform" method="post" action="">
<input type="hidden" name="clock" id="clock" />
</form>

<!-- modal content -->
<div id='confirm'>
     <div class='header'><span>Confirm</span></div>
     <div class='message'></div>
     <div class='buttons'>
     <div class='no simplemodal-close'>No</div><div class='yes'>Yes</div>
</div>
</div>
    <!-- preload the images -->
    <div style='display:none'>
    <img src='simplemodal/img/confirm/header.gif' alt='' />
    <img src='simplemodal/img/confirm/button.gif' alt='' />
</div>

<script language="javascript">
  var c=0;
  var t;

function ClockCount(){

    c=c+1;
    document.timerform.clock.value = c;

    if (c >= 15) {
        //User didn't do anything so logged them off.
        console.log ("Logged Out!");
    }
    else if (c == 2){

        console.log ("Warning... Popup Modal to warn logoff.");

        $(document).ready(function(){
             $(".confirm").click();
         });
    }

t = setTimeout("ClockCount()",1000);

}

function StartClock() {
   ClockCount(); //Start the timer.
}

function LogOut() {
    window.location = "logout.asp"
}

jQuery(function ($) {
     $('#confirm-dialog input.confirm, #confirm-dialog a.confirm').click(function (e) {
         e.preventDefault();

         confirm("You are inactive for a while continue?", function () {});
     });
});

function confirm(message, callback) {
     $('#confirm').modal({

    position: ["20%",],
    overlayId: 'confirm-overlay',
    containerId: 'confirm-container', 
    onShow: function (dialog) {
            var modal = this;

    $('.message', dialog.data[0]).append(message);

         // if the user clicks "yes"
                 $('.yes', dialog.data[0]).click(function () {
         c=0; //Reset the clock to 0

         // close the dialog
         modal.close(); // or $.modal.close();
    });

    // if the user clicks "no"
    $('.no', dialog.data[0]).click(function () {
        //Call the logout page and close the window.
        window.location.href = 'logout.asp';
        // close the dialog
        modal.close(); // or $.modal.close();
    });
    }
     });
   }

   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:12:17.313

导致**CSS**无法正确应用的问题是您的容器 ID 错误——与**CSS**中的 ID 不同。将`#confirm-container`您的`simplemodal/css/confirm.css`文件更改为`#confirm`，或将 `<div id='confirm'>`您的 HTML 更改为`<div id = 'confirm-container'>`.

那应该可以解决您的问题-希望对您有所帮助！

# c# - xsl 转换 xmlwriter 输出仅返回文本 C#

> ID：12028182
> 
> 赞同：1
> 
> 时间：2012-08-19T16:42:55.893
> 
> 标签：c#, xml, xslt, xmlwriter

这个转换的输出只包括文本，但我想要 HTML 和文本输出。我需要改变什么才能做到这一点？

我正在使用 VS 2010

当前示例输出：

琼斯马丁凯利马歇尔

注意我在 xsl 中也有这个，但它没有显示在我的代码示例中：

```
 xsl:output
    standalone="no"
    method="xml"
    indent="yes"
    omit-xml-declaration="no"
    version="1.0" 
```

xsl:

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">

    <xsl:for-each select="/people">

      <div class="lastnames">
        <ul>
          <li>
            <xsl:value-of select="lastname" disable-output-escaping="yes" />
          </li>
        </ul>
      </div>

    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

C＃：

```
XslCompiledTransform xslt = new XslCompiledTransform();

xslt.Load(xslPath);

using (XmlWriter writer = XmlWriter.Create(outPath + 
                                          fileName + 
                                          "." +
                                            fileExt
                                         , xslt.OutputSettings))
{
    xslt.Transform(fileNode, null, writer);
    writer.Flush();
    writer.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:52:47.030

如果没有看到输入数据，就很难确定出了什么问题。但首先我建议检查你的`xsl:output`元素；您说它存在于输入中“但未显示在 [the] 代码示例中”。这本身就让我怀疑。当您显示它时，它并没有显示为 XML 元素，这一事实让我倍加怀疑。

它们与您实际提出的问题无关，但在阅读您的代码时还有其他一些事情让我印象深刻：

*   `xsl:output`您展示的使用`method="xml"`，但您没有生成 XHTML；你不使用有什么原因`method="html"`吗？*   为什么在显示人们的姓氏时禁用输出转义？您是否希望输入数据在人名中包含小于号？如果是这样，您是否要创建格式错误的输出而不是输出字符数据？*   您的`xsl:for-each`单个模板中的 没有做任何工作（如果根元素未命名，则使样式表静默完成而没有输出`people`）。如果您将模板替换为

    ```
    <xsl:template match="people">
      <div class="lastnames">
        <ul>
          <xsl:apply-templates/>
        </ul>
      </div>
    </xsl:template>
    <xsl:template match="lastname">
      <li>
        <xsl:apply-templates/>
      </li>
    </xsl:template>
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:26:57.227

**这个简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="people">
  <div class="lastnames">
   <ul>
     <xsl:apply-templates/>
   </ul>
  </div>
 </xsl:template>

 <xsl:template match="lastname">
  <li><xsl:apply-templates/></li>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（未提供！！！）：

```
<people>
 <lastname>Jones</lastname>
 <lastname>Martin</lastname>
 <lastname>Kelley</lastname>
 <lastname>Marshall</lastname>
</people> 
```

**产生想要的正确结果：**

```
<div class="lastnames">
  <ul>
    <li>Jones</li>
    <li>Martin</li>
    <li>Kelley</li>
    <li>Marshall</li>
  </ul>
</div> 
```

**它按预期由浏览器显示：**

*   琼斯
*   马丁
*   凯利
*   马歇尔

# android - DownloadManager 与 Play 商店扩展文件

> ID：12028188
> 
> 赞同：0
> 
> 时间：2012-08-19T16:43:22.680
> 
> 标签：android

我有一个需要 30MB 数据库文件才能运行的应用程序。目前，这是在第一次运行时下载的（作为 10MB 的 zip 文件）。我正在考虑改用 Google Play 商店扩展文件。

除了明显的扩展文件依赖于从 Google Play 商店下载应用程序之外，其他优点和缺点是什么？

例如，我在考虑从中国境内访问时潜在的（谷歌）服务器问题。

编辑：使用当前 1MB APK 的应用程序已经有数十万次活动安装。如果我将 zip 文件放在资产中，那么 APK 会突然增加到 11MB。我担心这可能会给可用存储空间不足的用户带来问题。此外，数据库会定期更新（即新下载最新的 zip 文件），因此看起来有点浪费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:19:35.190

以下是我能想到的一些优点： 您不需要关心托管（您不需要为服务器/带宽付费） 我想说，如果文件在 google 的服务器上，它们的一般可用性也会更好（他们在世界各地都有冗余服务器，而您通常只有一两台服务器）用户通常可以在市场下载完成后立即使用该程序（首次启动无需额外等待）（“某些情况下”除外正如谷歌所说：http: [//developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)）

顺便说一句，谷歌声明“普通”apks 的限制现在是 50MB，所以你可能根本不需要扩展文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:46:44.413

除非您同时实现两者，否则您将永远无法通过非 Google Android 应用商店进行分发。有很多：亚马逊、Nook Store、Appia 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:18:35.977

对于 10MB 的资产，我认为使用扩展文件与将资产捆绑在 APK 中相比没有太大优势。结合您将（在某些时候）通过非 Play 商店方式分发应用程序的可能性（例如，您可能只想将 APK 发送给某人进行测试），您不妨忽略扩展文件选项。

如果您需要更新数据库，那么您可以发布一个新的 APK（带有更新的 zip 资产）或实现下载功能。最好的方法可能取决于数据库需要多久更新一次。您更新 APK 的频率是否高于数据库的更新频率？

DownloadManager 增加的复杂性在于它只能从 Gingerbread 向上使用。当然，展望未来，这将不再是一个问题。

底线：将 zip 捆绑为资产，并且仅在您确实需要时才实施 DownloadManager。

不确定将 APK 从 1MB 更新到 11MB 的风险（例如，用户没有足够的存储空间）。有人有这方面的经验吗？

# java - 为什么我们不能在私有时获取锁？

> ID：12028190
> 
> 赞同：0
> 
> 时间：2012-08-19T16:43:44.163
> 
> 标签：java, multithreading, locking

为什么使锁对象私有封装锁以使客户端代码无法获取它？

**对象的内在锁**

```
 public class A{
        private final Set<Integer> set = new HashSet<Integer>();

        public synchronized void addInt(int i){
            set.add(i);
        }
   } 
```

**私人锁**

```
 public class B{
        private final Set<Integer> set = new HashSet<Integer>();

        public void addInt(int i){
             synchronized(set){
                  set.add(i);
             }
        }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:08:43.337

好吧，另一个类根本无法访问`set`，因为它是私有的。在许多其他人因为无法访问该引用而无法做的事情中，同步它就是其中之一。

如果 getter 直接返回该引用（无需包装或复制对象），则其他人可以对其进行同步，从而破坏了锁定私有对象的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:51:31.007

在您提供的两个示例中，都使用了内部监视器。然而，第二个例子使用了`set`字段的内在锁。使用这种做法时要小心：如果您发布对 的引用`set`，则类外的代码可能会在其监视器上同步，这可能导致死锁。

我认为你得到的区别是`synchronized`与使用[`java.util.concurrent.Lock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html)API 相比。您获得的大部分内容是增加了灵活性（来自[Lock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html)文档）：

> 同步方法或语句的使用提供了对与每个对象关联的隐式监视器锁的访问，但强制所有锁的获取和释放以块结构的方式发生：当获取多个锁时，它们必须以相反的顺序释放，并且所有锁必须在获得它们的相同词法范围内释放。
> 
> 虽然同步方法和语句的作用域机制使得使用监视器锁进行编程变得更加容易，并有助于避免许多涉及锁的常见编程错误，但在某些情况下，您需要以更灵活的方式使用锁。例如，一些遍历并发访问的数据结构的算法需要使用“hand-over-hand”或“链锁”：你获取节点 A 的锁，然后节点 B，然后释放 A 并获取 C，然后释放 B并获得 D 等等。Lock 接口的实现通过允许在不同范围内获取和释放锁以及允许以任意顺序获取和释放多个锁来启用此类技术。

还有两个方法调用为您提供了更多使用 Lock API 获取锁的方法：

*   `lockInterruptibly`: 除非线程被中断，否则获取锁。
*   `tryLock`: 仅在调用时空闲时获取锁（可选超时）。

Java 中并发的规范参考是[“Java Concurrency in Practice”](http://jcip.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:36:39.663

> 为什么使锁对象私有封装锁以使客户端代码无法获取它？

老实说，我不知道这个问题的含义是什么。
您的代码片段之间的区别在于使用的锁。在第一种情况下*，整个方法*是同步的（使用`A`的内在锁），而在第二种情况下，您锁定了您尝试修改的集合。即 2 个线程可以同时进入该方法，但 1 个线程将阻止尝试获取`add`.
此方法有 2 个优点：**1)**它定义了*锁定的粒度*（对于只需要短时间锁定的长方法，在方法调用的整个持续时间内锁定会降低性能）和**2)**通过锁定收集你让它线程安全。
请注意，您可以使用任何对象作为锁：`Object lock = new Object();`
`synchronized(lock){
//do something
}`

# vb.net - Windows 工作流基础 vb.net

> ID：12028191
> 
> 赞同：1
> 
> 时间：2012-08-19T16:43:51.570
> 
> 标签：vb.net, sql-server-2008-r2, workflow, workflow-foundation-4

我一直在阅读这里和一些书籍，并且无法确定在我当前的 vb.net 和 SQL Server 应用程序中学习 Windows 工作流基础是否值得。

我正在设计一个销售跟踪应用程序，其中按照复杂的流程处理订单。目前有 5 种不同的流程，其中某些流程（例如信用检查）可能会发生也可能不会发生，具体取决于订购的项目。

我需要能够拥有报告，以便我们可以轻松地从 vb.net 应用程序和最可能的基于 Web 的报告工具查看数据库中订单的状态。

我的问题：

1.  由于流程变化很大，我最好将自己的订单流程存储在数据库中还是工作流程合适？

2.  我可以轻松地在 SQL 数据库中编写选择查询并查看订单的当前状态吗？（不在应用程序中）

3.  一个可能是一个很好的参考点的例子？

谢谢

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:52:45.540

> 由于流程变化很大，我最好将自己的订单流程存储在数据库中还是工作流程合适？

我认为您的灵活性不会改变使用数据库或 WF 的任何内容。无论如何，您将把这些工作流作为 Web 服务托管，因此，如果您有一些规则来决定要执行的流，那么从数据库加载工作流与启动 Web 服务之间实际上没有区别。

另一个有趣的项目是您可以构建一个为您做出这些决定的工作流程。换句话说，您应该考虑构建一个在适当时启动其他工作流的工作流 - 这将使您的业务流程更加顺畅，因为您只需调用一个端点即可让一切顺利进行，并且工作流会做它最擅长的事情，即流动。

> 我可以轻松地在 SQL 数据库中编写选择查询并查看订单的当前状态吗？（不在应用程序中）

如果您在 WF 上使用 Windows Server AppFabric，我建议您这样做，那么您可以查询监视数据库以获取有关工作流当前状态的信息。但是，如果您需要特定于业务的信息，最明智的方法是在有意义的时候将该信息写入您的应用程序数据库。您从监控数据库中恢复的数据与系统管理更相关。

> 一个可能是一个很好的参考点的例子？

网络上有很多示例，但我建议您访问[Ron Jacobs 的博客](http://blogs.msdn.com/b/rjacobs/)并从他那里收集尽可能多的信息。他是 WF 项目经理，实际上关心使用该产品的人的成功 - 他拥有与社区分享的丰富知识，这是您在开始之前需要确定的学习内容。

# twitter-bootstrap - 固定侧边栏在流体布局 twitter bootstrap 中

> ID：12028194
> 
> 赞同：2
> 
> 时间：2012-08-19T16:44:10.237
> 
> 标签：twitter-bootstrap, sidebar, css-position, fluid-layout

我想在我的网站右侧创建一个修复侧边栏，但是当我将它提供`style="position:fixed;"`给它的 div 时，它完全位于左侧。

```
<div class="span2" style="position:fixed; background-color: white;">  
CONTENT 
</div> 
```

我怎么做？我应该为项目的每个分辨率提供一个像素位置以使其保持响应吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T18:57:24.450

刚刚知道如何在不实际使用 jquery 的情况下做到这一点。这真的很简单。

我只是想添加“right：0”以将其一直踢到右边。所以下面的代码应该做到这一点。

```
<div class="span2" style="position:fixed; right:0">  
CONTENT 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:53:06.327

Twitter Bootstrap 使用使用行和列的网格系统。如果您使用 .container-fluid 和 .row-fluid 类，您可以通过设置元素相对于其父级大小的大小来控制元素的位置。

这是一个工作示例：http: [//jsfiddle.net/chapmanc/dNRgx/1/](http://jsfiddle.net/chapmanc/dNRgx/1/)

例如...

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span9">
            <div class="hero-unit">
                ...
            </div>
        </div>
        <div class="span3">
            <div class="well sidebar-nav">
                ...
            </div>
        </div>
    </div>
</div> 
```

会给你一个 9 列元素，然后作为列元素，你可以制作你的侧边栏。这会将您的侧边栏放在右侧并保持您的布局响应。

# altova - 使用 Altova Stylevision 固定定位

> ID：12028195
> 
> 赞同：1
> 
> 时间：2012-08-19T16:44:19.943
> 
> 标签：altova

如何在 Altova Stylevision 中使用元素的固定定位？即定位文本距离顶部 x 英寸和距离左侧 y 英寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:37:17.157

如果您单击设计中的模板，命名样式将出现在样式窗口中。

单击布局框，然后单击公共子组并通过输入所需的英寸数来调整左侧属性值。对顶部属性执行相同操作

# php - php htaccess 重定向到引导文件可防止 css 文件等出现 404 错误

> ID：12028198
> 
> 赞同：4
> 
> 时间：2012-08-19T16:45:11.343
> 
> 标签：php, .htaccess, url-rewriting, url-routing

我一直致力于制作自己的框架，并专注于学习比我在大学学到的更高级的编程实践。我使用`.htaccess`将所有页面请求重定向到我的引导文件，该文件根据请求 URI 加载控制器和主题。

网址格式为`site.com/Controller[/optional/multiple/params]`

问题是，可以说，我正在尝试包含图像或 css 文件，但它不存在。在萤火虫中，由于重定向，它们不会显示为 404 错误。

.htacess 文件

```
Options +FollowSymLinks
IndexIgnore */*

# Turn on the RewriteEngine
RewriteEngine On

#  Redirect to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我确实检查并解析了 URI，它确实转发到 404 控制器并为请求的 URI 生成一个 404 标头。但是，对于 CSS、图像等嵌入文件，它们会显示与请求的页面相同的响应，并且不会生成 404 错误。

IE 如果你去 index.php，index.php 将加载正常，但所有无效的 css 文件将具有与 index.php 相同的标题响应。

以下是解析 URI 后加载控制器的代码：

```
 //locate
    $file = 'Lume/' . self::$AppPath . 'Controller/' . self::$ControllerName;
    if(!file_exists($file . '.php')){
        header('HTTP/1.0 404 Not Found');
        $file='Lume/' . self::$AppPath . 'Controller/_404.php';
    }
    //create
    $controller = str_replace('/', '\\', '/' . $file);
    if(!is_subclass_of($controller, '\Lume\Abstracts\Controller'))
        throw new \Exception('Route::Main The controller must extend from Lume\Abstracts\Controller');
    self::$Controller =& new $controller(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:27:04.170

读取您的`.htaccess`文件，如果请求**不是针对****存在**的文件或目录，那么您要求`index.php`处理该请求。但是您没有向它发送任何查询字符串或一些如何传递它的数据。所以你应该修复它。这样做时，您可以检查查询是否是无效控制器（您已经知道它是无效文件，因为如果不是，您就不会在 index.php 中）。那么你应该`header`是一个`404`错误。因为，这样您将同时处理找不到文件和找不到控制器。

要修复，您可以检查其他 mvc 框架是如何做到的。

例如，codeigniter：

```
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这里发生的是，您可以访问请求 uri 作为 php 变量。因此，您可以在前端控制器（即引导程序）内部执行检查，以查看请求是否有效。

# ruby-on-rails-3 - "public_activity" timelines /feed/log activity gem : how to do permanent saving of timelines?

> ID：12028201
> 
> 赞同：0
> 
> 时间：2012-08-19T16:45:58.897
> 
> 标签：ruby-on-rails-3, gem, feed

when destroying one element from my database, the index view

```
 <% for activity in @activities %>

      <%= activity.text %>  by  <%= current_user.name %> on <%= Time.current%> <br/>

    <% end %> 
```

no longer find the <%=trackable.element_name%> from config/pba.yml

```
 activity:
        element:
              create: '  <%=trackable.element_name%> has been created '
              update: '  <%=trackable.element_name%> has been edited '
             destroy: '  <%=trackable.element_name%> has been removed ' 
```

and display something like:

```
 element1 has been edited by me on 2012-08-19 16:20:44 UTC
  Template not defined by me on 2012-08-19 16:20:44 UTC 
```

"template not defined" being the element i have just deleted....

i would like to store the element name and the action that has been taken though...!?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:08:32.473

I released a new version of the `public_activity` gem which allows you to create views for every activity you display, so you can simply check if `trackable` is still in the database and act accordingly.

Upgrade your gem to [https://github.com/pokonski/public_activity#upgrading-to-04](https://github.com/pokonski/public_activity#upgrading-to-04) and check out my example application which does exactly that:

[https://github.com/pokonski/activity_blog/blob/master/app/views/public_activity/post/_update.slim#L4](https://github.com/pokonski/activity_blog/blob/master/app/views/public_activity/post/_update.slim#L4)

where link_to_trackable is just a helper checking if trackable exists: [https://github.com/pokonski/activity_blog/blob/master/app/helpers/application_helper.rb#L34](https://github.com/pokonski/activity_blog/blob/master/app/helpers/application_helper.rb#L34)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:00:01.427

That's because it can't find the original element you deleted. Have you thought of using soft-delete? The record remains in the database.

# c++ - C ++如何为switch case进行异常处理

> ID：12028203
> 
> 赞同：1
> 
> 时间：2012-08-19T16:46:04.750
> 
> 标签：c++

如果用户键入“a”之类的字母，将导致无限循环，默认：不起作用。

我如何进行异常处理，以便输出错误消息而不是无限循环。

谢谢！

下面是我的代码：

```
done=false;
do
{
cout << "Please select the department: " << endl;
cout << "1\. Admin " << endl;
cout << "2\. HR " << endl;
cout << "3\. Normal " << endl;
cout << "4\. Back to Main Menu " << endl;
cout << "Selection: ";
cin >> choice;

switch (choice) {
  case 1:
      department_selection = "admin";
    done=true;
    break;
  case 2:
      department_selection = "hr";
    done=true;
    break;
  case 3:
      department_selection = "normal";
    done=true;
    break;
  case 4:
      selection = "hr_menu";
    done=true;
    break;
  default:
    cout << "Invalid selection - Please input 1 to 3 only.";
    done=false;
        }
}while(done!=true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:53:00.083

问题不在于您的 switch 语句，而在于您没有检查输入操作是否实际成功。始终在某些布尔上下文中使用输入操作：

```
int choice = 0;
while (!(cin >> choice) && (choice < 1 || choice > 4)) {
    cout << "Invalid selection - Please input 1 to 3 only.\n";
    // reset error flags
    cin.clear();
    // throw away garbage input
    cin.ignore(numeric_limits<streamsize>::max(), '\n');

    // the above two statements prevent infinite loop due to
    // bad stream state
}

// proceed to switch statement 
```

`numeric_limits`模板位于`<limits>`标题中。

# python - Python - 无法从集合中导入集合（“没有名为集合的模块”）

> ID：12028204
> 
> 赞同：27
> 
> 时间：2012-08-19T16:46:11.473
> 
> 标签：python, import, module

我正在尝试学习python，并且正在尝试编写一些简单的东西。我正在使用 OS X 10.8 在 Pydev (Eclipse) 下开发。我使用 64 位 .dmg 安装程序安装了 python 3.2。

我成功配置了 Python 解释器（或者我认为是这样，因为我实际上可以创建一个“hello world”项目并运行它）。但由于某种原因，当我尝试导入 Set ( `from sets import Set`) 时，出现此错误：

```
 from sets import Set;
ImportError: No module named sets 
```

我也在命令行上对其进行了测试，并给了我同样的错误。

然后我查看了我的 python3 目录（在 下`/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/`）中的 lib 文件夹，它缺少 sets.py 文件！！！原来的 2.7 版本确实有`/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/`

我也尝试将 2.7 sets.py 复制到 3.2，但它都不起作用...请问，你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-19T16:49:58.170

您不再需要该`sets`模块。[`set`](http://docs.python.org/py3k/tutorial/datastructures.html#sets)是 Python 3 中的内置类，无需导入即可使用。

```
my_set = set() 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-19T16:50:10.647

在每个最近的 Python 版本中，集合都是内置的`set`，Python 3 完全摆脱了不推荐使用的`sets`模块。

如果您想确保代码也适用于古代版本，您可以执行以下操作：

```
try:
    set
except NameError:
    from sets import Set as set 
```

如果您需要运行旧代码并且不想更改它（**不好！**）：

```
try:
    from sets import Set
except ImportError:
    Set = set 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-26T18:58:24.900

你不需要使用

```
from sets import Set
engineers = Set(['John', 'Jane', 'Jack', 'Janice']) 
```

**自 2.6 版起**已弃用上述内容：

**您可以在 2.6 版本以上**使用以下代码

 **```
engineers = set(['John', 'Jane', 'Jack', 'Janice'])
programmers = set(['Jack', 'Sam', 'Susan', 'Janice'])
managers = set(['Jane', 'Jack', 'Susan', 'Zack'])
employees = engineers | programmers | managers  
print(employees) 
```**

# java - 从文本文件中随机选择一个单词

> ID：12028205
> 
> 赞同：-4
> 
> 时间：2012-08-19T16:46:16.613
> 
> 标签：java

我正在尝试完成我的大学作业，但我在哪里可以找到从文本文件中读取并从列表中选择一个随机单词的方法！作业是关于刽子手的，程序假设从列表中选择一个随机单词

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class Hangman extends JFrame
{
int i = 0;
static JPanel panel;
static JPanel panel2;
static JPanel panel3;

public Hangman()
{
JButton[] buttons = new JButton[26];

panel = new JPanel(new GridLayout(0,9));
panel2 = new JPanel();
panel3 = new JPanel();

JButton btnRestart = new JButton("Restart");
btnRestart.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {

    }
});

JButton btnNewWord = new JButton("Add New Word");
btnNewWord.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
{
try
{
    FileWriter fw = new FileWriter("Words.txt", true);
    PrintWriter pw = new PrintWriter(fw, true);

    String word = JOptionPane.showInputDialog("Please enter a word: ");

    pw.println(word);
    pw.close();
}
catch(IOException ie)
{
    System.out.println("Error Thrown" + ie.getMessage());
}
}
});

JButton btnHelp = new JButton("Help");
btnHelp.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e)
   {
       String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word. \nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions. \nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
               + "\n"
               + "\nThe game is over when:"
               + "\nThe guessing player completes the word, or guesses the whole word correctly"
               + "\nThe other player completes the diagram";
       JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
   }
});

JButton btnExit = new JButton("Exit");
btnExit.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {
        System.exit(0);
    }
});

ImageIcon icon = new ImageIcon("D:\\Varsity College\\Prog212Assign1_10-013803\\images\\Hangman1.jpg");
JLabel label = new JLabel();
label.setIcon(icon);
String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
for(i = 0; i < buttons.length; i++)
{
    buttons[i] = new JButton(b[i]);

    panel.add(buttons[i]);
}

panel2.add(label);

panel3.add(btnRestart);
panel3.add(btnNewWord);
panel3.add(btnHelp);
panel3.add(btnExit);
}
public void readFromFile()
{
try
{
    BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
}
}

public static void main(String[] args) 
{
    Hangman frame = new Hangman();
    Box mainPanel = Box.createVerticalBox();
    frame.setContentPane(mainPanel);
    mainPanel.add(panel, BorderLayout.NORTH);
    mainPanel.add(panel2);
    mainPanel.add(panel3);
    frame.pack();
    frame.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:57:15.483

创建一个方法将文件的单词读入`List`. 例如：

```
List<String> words = readFile(); 
```

要获取单词，请使用`String#split(" ")`将行拆分为单词。将这些单词添加到列表中。然后只需使用：

```
Random yourRandom = new Random(words.size());
String word = words.get(yourRandom.nextInt()); 
```

你会从你的列表中得到随机词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:07:12.370

以下是有关如何解决此问题的简要指南：

使用扫描仪读取数组：

```
Scanner scanner = new Scanner(new File("words.txt"));
while(scanner.hasNext()){
  // add scanner.nextLine() words to array 
} 
```

填充数组后，您可以在选择单词之前随机播放：

```
Collections.shuffle(wordList);
String pickWord = wordList.get(0); 
```

我在这里使用列表中的第一个条目，但您可以随机选择一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T16:56:23.503

您可以使用该`ReadLine()`函数从文本文件中读取每一行。这将返回一个您可以使用的字符串`fileLine.split(" ")`。这将为您提供一个数组，其中每个元素作为文件中的一个单词。

如果添加所有这些列表，则可以获取大小并选择 0 和 之间的随机数`size()`，然后使用它来获取集合的字符串。

您现在从刚刚读入的文件中获得了一个随机单词。

示例代码：

```
try{
    BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
    String line = reader.readLine();
    List<String> words = new ArrayList<String>();
    while(line != null) {
        String[] wordsLine = line.split(" ");
        for(String word : wordsLine) {
            words.add(word);
        }
        line = reader.readLine();
    }

    Random rand = new Random(System.currentTimeMillis());
    String randomWord = words.get(rand.nextInt(words.size()));
} catch (Exception e) {
    // Handle this
} 
```

# python - 迭代具有相同属性的所有查询结果的巧妙方法

> ID：12028208
> 
> 赞同：1
> 
> 时间：2012-08-19T16:46:26.530
> 
> 标签：python, django

认为：

```
class ItemToBill(models.Model):
    date_to_bill = fields.DateField()
    description = fields.charfield()
    customerToBill = fields.ForeignKey(Customer) 
```

我想找到今天之前应该计费的所有项目，然后按客户对它们进行分组，这样我就可以为每个需要它的客户创建一张发票。

```
for unique_customer in all_unique_customers_with_items_to_bill:
    createInvoice(unique_customer,  their_items_to_bill) 
```

我可能会做一些事情来查询商品（由客户订购），然后确定我何时输入了新客户的一组商品。这看起来像：

```
items = ItemToBill.objects.filter(date_to_bill=BEFORE_TODAY).order_by(customer)
prevCustomer = items[0].customer
customer_items = []
for item in items:
    if prevCustomer != item.customer:
        createInvoice(prevCustomer, customer_items)
        customer_items = []
        prevCustomer = item.customer
    customer_items.append(item)
createInvioce(prevCustomer, customer_items) #Handle the last customer 
```

但必须有一个更聪明的解决方案。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:05:15.400

您需要按客户列出的项目列表，这听起来像是一个简单的循环。

```
items_by_customer = {}

for item in ItemToBill.objects.filter(...date_query...):
    items_by_customer.setdefault(item.customerToBill, []).append(item)

for customer, items in items_by_customer.items():
    print customer, items # items grouped by customer.
    # generate_invoice(customer, items) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:05:33.850

我可能会首先将每个客户的所有记录汇总到字典中：

```
from collections import defaultdict
items = ItemToBill.objects.filter(date_to_bill=BEFORE_TODAY).order_by(customer)
bills_by_customer = defaultdict(list)
for bill in items:
    bills_by_customer[bill.customer.pk].append(bill) 
```

然后你可以遍历分组字典：

```
for customer_pk, bills in bills_by_customer.iteritems():
    createInvoice(customer_pk, bills) 
```

# ember.js - content.name 为集合返回空

> ID：12028209
> 
> 赞同：1
> 
> 时间：2012-08-19T16:46:27.217
> 
> 标签：ember.js

我从 ember.js 开始，在尝试 ember.js 文档（[http://docs.emberjs.com/symbols/Handlebars.helpers.html#.collection](http://docs.emberjs.com/symbols/Handlebars.helpers.html#.collection)）中遇到了麻烦。

此应用程序代码：

```
App = Ember.Application.create()
App.items = [
  Ember.Object.create({name: 'Dave'}),
  Ember.Object.create({name: 'Mary'}),
  Ember.Object.create({name: 'Sara'})
] 
```

使用此模板代码：

```
{{#collection contentBinding="App.items"}}
    Hi {{content.name}}
{{/collection}} 
```

结果如下：

```
<div id="ember122" class="ember-view">    
    <div id="ember142" class="ember-view">    
        <div id="ember149" class="ember-view">  Hi    
            <script id="metamorph-0-start" type="text/x-placeholder">    
            </script>    
            <script id="metamorph-0-end" type="text/x-placeholder">    
            </script>    
        </div>    
        <div id="ember150" class="ember-view">  Hi    
            <script id="metamorph-1-start" type="text/x-placeholder">    
            </script>    
            <script id="metamorph-1-end" type="text/x-placeholder">    
            </script>    
        </div>    
        <div id="ember151" class="ember-view">  Hi    
            <script id="metamorph-2-start" type="text/x-placeholder">    
            </script>    
            <script id="metamorph-2-end" type="text/x-placeholder">    
            </script>    
        </div>    
    </div>    
</div> 
```

因此，它有效地遍历对象，但无法返回每个对象的名称值。为什么是这样？也许这些文档已经过时了？有没有更好的方法来达到预期的结果（迭代项目）？感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:11:43.823

我认为您使用的是 ember-latest 或 1.0-pre，在这种情况下，您必须`content.name`使用`view`. 自 1.0 pre 以来，上下文的检索发生了变化。请参阅：[Ember.js：Handlebars 没有显示任何内容](https://stackoverflow.com/questions/11818116/ember-js-handlebars-displays-nothing/11818157#11818157)以供进一步解释。

也就是说，文档不是最新的。您可以发布带有修复程序的拉取请求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:16:24.337

这个例子很好用：http: [//jsfiddle.net/secretlm/qD6az/3/](http://jsfiddle.net/secretlm/qD6az/3/)

希望这可以帮助。

# facebook - 嵌入 swf 文件

> ID：12028210
> 
> 赞同：0
> 
> 时间：2012-08-19T16:46:40.943
> 
> 标签：facebook, video, flash, meta

我已经像 vimeo 一样设置了我的元标记，并且能够将 swf 文件发布到我的个人资料和页面上。它工作得很好，看起来和分享 vimeo 视频时一样。

不同之处在于 vimeo/youtube 能够让大缩略图填充突出显示框的最大宽度和高度。当我突出显示我的时，它保持相同的缩略图和高度，并将文本的宽度拉伸到两列。

我有与 vimeo 相同的元标记（与 youtube 相同），所以我确信我的所有设置都正确。我唯一的解释是，facebook 可能会生成 swf 尝试加载的 FLV 的第一帧。我的 swf 文件没有加载...

有没有人试图做类似的事情？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:40:19.757

我只能说，例如对于 youtube，它不是一张新图片，也不是渲染的 swf。它只是来自 youtube 的原始缩略图，由 facebook 缩放：

**证明：**

我分享了：youtube.com/watch?v=UPA3bwVVzGI

在 youtube 源上，我们有：

元属性="og:image" 内容="http://i2.ytimg.com/vi/UPA3bwVVzGI/mqdefault.jpg"

现在在 facebook 上未突出显示的图像是：[这里](http://external.ak.fbcdn.net/safe_image.php?d=AQDQB8of7SsXwA9D&w=155&h=114&url=http://i2.ytimg.com/vi/UPA3bwVVzGI/mqdefault.jpg)

并且突出显示的是：[这里](http://external.ak.fbcdn.net/safe_image.php?d=AQABk-8TpJrNNKB1&w=819&h=615&url=http://i2.ytimg.com/vi/UPA3bwVVzGI/hqdefault.jpg&upscale=1)

查看url获取变量；图片是由 facebook 而非 youtube 放大的！！！！

**我猜：**

也许这是 youtube 和 vimeo 的 Facebook 的一个例外！？？我不知道，只是猜测。

有人在网上建议设置 og:video:width 和 og:video:height 。但这对我不起作用。

祝你好运

# evolutionary-algorithm - 有人知道如何在进化游戏中实现莫兰过程吗？

> ID：12028213
> 
> 赞同：0
> 
> 时间：2012-08-19T16:46:52.457
> 
> 标签：evolutionary-algorithm

这是[http://www.mathematica-journal.com/data/uploads/2011/05/Voelkl.pdf](http://www.mathematica-journal.com/data/uploads/2011/05/Voelkl.pdf)的一篇文章，但我仍然不知道如何将其转换为 java 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:09:08.230

选择的莫兰过程并不难。您选择一个粒子，其选择概率与其适应度成正比（有几篇论文讨论了这一点，但您可以查阅 Matin A. Nowak 的“有限种群中合作的出现和进化稳定性”）。

一旦你选择了一个粒子进行繁殖，个体的总数就会增加一 (N+1)。您需要将种群维持在 N，以便随机选择一个粒子来杀死。

# memory-management - 如何通过进程P1的指针访问进程P2的变量？

> ID：12028214
> 
> 赞同：0
> 
> 时间：2012-08-19T16:46:55.730
> 
> 标签：memory-management, operating-system

有两个过程。一个进程（进程 P1）有一个指向另一个进程（进程 P2）中的变量的指针。现在，我想通过进程 P1 的指针访问进程 P2 的变量。

这可以通过使用共享内存来完成。

如何使用共享内存来访问变量？我是否还应该考虑两个进程的内存映射？

有没有其他方法可以做同样的事情？

# c - 如何使用 gcc 列出链接器分配的代码对象？

> ID：12028215
> 
> 赞同：4
> 
> 时间：2012-08-19T16:46:56.783
> 
> 标签：c, memory-management, gcc, ld, objdump

我正在构建一个由几个代码模块和一个静态库组成的嵌入式应用程序。一些全局变量显式放置在专用内存段中（即，不是默认的 .data 段）。

处理器内存架构为 4 个存储体，创建了一个连续的物理内存空间。在我的应用程序中，只有第 1 个存储库是为代码保留的，其他 3 个存储库是为显式分配的全局变量和一个小堆栈保留的。

问题是代码部分（.text）现在超出了第一个银行边界，我收到以下链接器错误消息：

```
./bin/ld: section .data_bank1 loaded at [0000000000002000,0000000000003fff] overlaps section .text loaded at [0000000000000630,00000000000020df]
./bin/ld: section .fini loaded at [00000000000020e0,00000000000020f9] overlaps section .data_bank1 loaded at [0000000000002000,0000000000003fff] 
```

有没有办法在链接器检查部分和对象重叠并中止构建之前查看对象分配（可能在临时对象文件中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:28:09.197

您可以将`--print-map`标志传递给链接器。这将使它发出每个对象文件的每个部分映射到内存的位置的详细信息。

例子：

```
 .text          0x0000000000400370       0x2c /<snip>/lib64/crt1.o
                0x0000000000400370                _start
 .text          0x000000000040039c       0x17 /<snip>/lib64/crti.o
 *fill*         0x00000000004003b3        0xd 90909090
 .text          0x00000000004003c0       0x92 /<snip>/4.6.3/crtbegin.o
 *fill*         0x0000000000400452        0x2 90909090
 .text          0x0000000000400454       0x21 /tmp/ccwAfGkH.o
                0x000000000040045f                x
                0x000000000040046a                y
                0x0000000000400454                main 
```

# unit-testing - 在 play 2.0 scala 中在同一个 FakeApplication() 中运行多个测试

> ID：12028218
> 
> 赞同：15
> 
> 时间：2012-08-19T16:47:09.913
> 
> 标签：unit-testing, scala, playframework-2.0, specs2

我正在尝试学习 Play scala 中的单元测试，但我遇到了一些问题。我正在尝试在我的模型层上运行几个测试，如下所示：

```
"User Model" should {
    "be created and retrieved by username" in {
        running(FakeApplication()) {
            val newUser = User(username = "weezybizzle",password = "password")
            User.save(newUser)
            User.findOneByUsername("weezybizzle") must beSome
        }
    }
    "another test" in {
        running(FakeApplication()) {
            // more tests involving adding and removing users
        }
    }
} 
```

但是，当这样做时，我无法在第二个单元测试中连接到数据库，说连接已关闭。我试图通过将所有代码封装在一个在同一个假应用程序上运行的块中来解决这个问题，但这也不起作用。

```
 running(FakeApplication()) {
    "be created and retrieved by username" in {
        val newUser = User(username = "weezybizzle",password = "password")
        User.save(newUser)
        User.findOneByUsername("weezybizzle") must beSome
    }
    "another test" in {
        // more tests involving adding and removing users
    }
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T22:23:26.250

The specs2 tests are performed by default in parallel which may cause problems with accessing databases, especially when you rely on the db contents provided by a previous test. So to force sequential testing you have to tell specs2 to do so:

```
class ModelSpec extends Specification with Logging {
  override def is = args(sequential = true) ^ super.is
...
} 
```

For tests done in one `FakeApplication` you can wrap the whole tests in it:

```
 running(FakeApp) {
    log.trace("Project tests.")
    val Some(project) = Project.findByName("test1")

    "Project" should {

      "be retrieved by name" in {
        project must beAnInstanceOf[Project]
        project.description must endWith("project")
      } 
```

The whole sample can be found [here](https://github.com/rajish/muse/blob/master/test/ModelSpec.scala "muse"). That was my first attempt to deal with problems while testing MongoDB with Play! framework.

The second approach I borrowed from the [salat](https://github.com/novus/salat "salat") project, which is by the way a very good source of specs examples dealing with MongoDB (although it is not a Play! framework app). You have to define a trait extending `Around` and `Scope`, where you can put anything you need to be initialized in an application instance:

```
import org.specs2.mutable._
import org.specs2.execute.StandardResults

import play.api.mvc._
import play.api.mvc.Results
import play.api.test._
import play.api.test.Helpers._

trait FakeApp extends Around with org.specs2.specification.Scope {

  val appCfg = Map(
    "first.config.key" -> "a_value",
    "second.config.key" -> "another value"
  )

  object FakeApp extends FakeApplication(
      additionalPlugins = Seq("com.github.rajish.deadrope.DeadropePlugin"),
      additionalConfiguration = appCfg
    ) {
    // override val routes = Some(Routes)
  }

  def around[T <% org.specs2.execute.Result](test: => T) = running(FakeApp) {
    Logger.debug("Running test ==================================")
    test  // run tests inside a fake application
  }
} 
```

**Edit 2013-06-30:**

In the current version of `specs2` the `around` signature should be:

```
def around[T : AsResult](test: => T): Result 
```

**End of edit**

Then a test can be written like that:

```
class SomeSpec extends Specification { sequential // according to @Eric comment

  "A test group" should {
    "pass some tests" in new FakeApp {
      1 must_== 1
    }

    "and these sub-tests too" in {
      "first subtest" in new FakeApp {
         success
      }
      "second subtest" in new FakeApp {
         failure
      }
    }
  }
} 
```

A full sample of such suite can be found [here](https://github.com/rajish/deadrope/blob/master/project-code/test/SecureActionSpec.scala "deadrope").

On a final note: It's also good to clean up the test database before starting a suite:

```
 step {
    MongoConnection().dropDatabase("test_db")
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-08T11:47:23.710

While doing integration testing/running test suites, we ran into expections like "The CacheManager has been shut down. It can no longer be used" or "SQLException: Attempting to obtain a connection from a pool that has already been shutdown". They were all related to restart the app after each test. We finally made a rather simple trait, that will check for a running FakeApplication before each test, and start one only, if required.

```
trait SingleInstance extends BeforeExample {
    def before() {
        if (Play.unsafeApplication == null) Play.start(AppWithTestDb)
    }
}

object AppWithTestDb extends FakeApplication(additionalConfiguration = 
    Map("db.default.url" -> "jdbc:mysql://localhost/test_db")
) 
```

And then in the test:

```
class SampleSpec extends PlaySpecification with SingleInstance {
    "do something" should {
        "result in something" in {
        }
    }
} 
```

This will work for Play 2.3 as well as Play 2.4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T09:03:44.627

A somewhat cleaner approach

```
import play.api.test._

trait ServerSpec {

  implicit val app: FakeApplication = FakeApplication()
  implicit def port: Port = Helpers.testServerPort

  val server = TestServer(port, app)
} 
```

And then use it with

```
class UsersSpec extends PlaySpecification with Results with ServerSpec {

  "Users Controller" should {

    step(server.start())

    "get users" in {
      val result = Users.query().apply(FakeRequest())

      val json = contentAsJson(result)
      val stat = status(result)

      stat mustEqual 200
    }

    step(server.stop())
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T20:06:38.847

为了针对数据库测试您的代码，如果您使用提供的 in-mem 测试它，您应该在`running`调用中告诉它：

```
FakeApplication(additionalConfiguration = inMemoryDatabase()) 
```

以某种方式，这将强制您的数据库围绕内部块执行启动和停止（无论是单个还是组合）

**编辑**

Due to the comment saying that you're using a mongodb, I'd recommend you to read this [blog](http://ska-la.blogspot.be/2012/08/mongodb-and-play2-at-ease-using-play.html) wherein I'm talking about a small plugin I wrote to enable a mongodb server to start embedded-like.

What we'll be done is (by enabling the plugin) to start and stop a mongodb at the same time of the application.

It could help you...

However regarding the initial question the problem shouldn't come from the running or the FakeApplication, unless Play-Salat or any other related plugin is doing bad connections or caching or ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T08:02:28.313

This kind of parallel testing problem happen when using running method in many case. But this is already fixed in play2.1\. [Here](https://github.com/playframework/Play20/commit/b951b22a76b51ea1235af3525cdf4d48edd19ad2) is how to fix. If you want to use this running in play2.0.x, you should make trait like this:

```
trait TestUtil {
  /**
   * Executes a block of code in a running application.
   */
  def running[T](fakeApp: FakeApplication)(block: => T): T = {
     synchronized {
      try {
        Play.start(fakeApp)
        block
      } finally {
        Play.stop()
        play.core.Invoker.system.shutdown()
        play.core.Invoker.uninit()
      }
    }
  }

  /**
   * Executes a block of code in a running server.
   */
  def running[T](testServer: TestServer)(block: => T): T = {
    synchronized {
      try {
        testServer.start()
        block
      } finally {
        testServer.stop()
        play.core.Invoker.system.shutdown()
        play.core.Invoker.uninit()
      }
    }
  }
} 
```

And you can use the following:

```
class ModelSpec extends Specification with TestUtil {
    "User Model" should {
        "be created and retrieved by username" in {
            running(FakeApplication()) {
                val newUser = User(username = "weezybizzle",password = "password")
                User.save(newUser)
                User.findOneByUsername("weezybizzle") must beSome
            }
        }
    }
    .... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-20T16:49:38.320

The best way I found to run a single test class FakeApplication by Scala, is following the example below. Note the'step' method:

```
@RunWith(classOf[JUnitRunner])
class ContaControllerSpec extends MockServices {

    object contaController extends ContaController with MockAtividadeService with MockAccountService with MockPessoaService with MockTelefoneService with MockEmailService{
        pessoaService.update(PessoaFake.id.get, PessoaFake) returns PessoaFake.id.get
    }

    step(Play.start(new FakeAppContext))

    "ContaController [Perfil]" should {

      "atualizar os dados do usuario logado e retornar status '200' (OK)" in {
          val response = contaController.savePerfil()(FakeRequest(POST, "/contas/perfil").withFormUrlEncodedBody(
              ("nome", "nome teste"), ("sobrenome", "sobrenome teste"), ("dataNascimento", "1986-09-12"), ("sexo", "M")).withLoggedIn(config)(uuid))

              status(response) must be equalTo(OK)
        }

        "atualizar os dados do usuario logado enviando o form sem preenchimento e retornar status '400' (BAD_REQUEST)" in {
            val response = contaController.savePerfil()(FakeRequest(POST, "/contas/perfil").withLoggedIn(config)(uuid))
            status(response) must be equalTo(BAD_REQUEST)
        }
    }

    step(Play.stop)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-02T16:13:11.643

The accepted answer did not help me. I am on play 2.2.3 scala 2.10.3\. This is what helped me.

May be it could be of some help.

Extend BoneCPPlugin

```
class NewBoneCPPlugin(val app: play.api.Application) extends BoneCPPlugin(app) {

  override def onStop() {
    //don't stop the BoneCPPlugin
    //plugin.onStop()
  }
} 
```

And in your testspec should be

```
 class UserControllerSpec extends mutable.Specification with Logging with Mockito {

    val fakeApp = FakeApplication(additionalConfiguration = testDb,withoutPlugins = Seq("play.api.db.BoneCPPlugin"),
                                  additionalPlugins = Seq("NewBoneCPPlugin"))
    "Create action in UserController " should {
            "return 400 status if request body does not contain user json " in new WithApplication(fakeApp) {
        ...
    }
  }
} 
```

# c# - 如何更改 WebAuthenticationBroker 生成对话框的样式？

> ID：12028219
> 
> 赞同：3
> 
> 时间：2012-08-19T16:47:11.397
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我刚刚尝试`WebAuthenticationBroker`用于连接到 Google，但我不喜欢系统生成对话框的视觉表示。有可能以某种方式改变它吗？

例如这是英文版的截图：

![英文版](../Images/663911c5b488dc557c60db023a7eab15.png)

那些白色的矩形真的很难看，但是在更改语言时会产生更严重的影响：

![捷克语版本](../Images/afb73b9364e56f8cb67e8b64162e7768.png)

底部状态行在更改语言的下拉菜单下方流动。

我想将用于网页渲染的容器扩展到对话框的全宽（C# 和 XAML）。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:48:32.407

看看这个。这将有助于：

[http://www.naweed.info/Links/Post/9](http://www.naweed.info/Links/Post/9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T21:10:40.480

您无法设置对话框外壳的样式。这是为了给 Windows 用户提供信心和一致的体验。大多数身份验证提供程序都有一个“移动”视图，在他们的身份验证 URI 中效果更好。例如，Facebook 的基本 OAuth 起始点对于这个对话框来说很糟糕，但使用移动端它的格式非常好。至于您对文本如何流动的评论……这看起来不像是 WebAuthBroker 对话框问题，而是 IE10 渲染问题，Google 需要检查他们使用的 HTML 以了解原因。

# c++ - 将引用作为参数传递给模板化函数

> ID：12028220
> 
> 赞同：0
> 
> 时间：2012-08-19T16:47:21.523
> 
> 标签：c++, templates

我有一个模板函数，它为给定的类分配内存并调用它的构造函数。例如：

```
template <class T, class arg0>
inline T* AllocateObject(arg0 a0) { return new (InternalAllocate(sizeof(T))) T(a0); }
template <class T, class arg0, class arg1>
inline T* AllocateObject(arg0 a0, arg1 a1) { return new (InternalAllocate(sizeof(T))) T(a0,a1); } 
```

当我通过值或指针传递任何东西时，它工作正常，例如：

```
int myInt = 5;
int* myIntPointer = &myInt;

MyClass1* myCls1 = AllocateObject<MyClass1>(myInt);     // a class with int in its constructor
MyClass2* myCls2 = AllocateObject<MyClass2>(myIntPointer);    // a class with int ptr in its constructor 
```

但是当我尝试通过引用传递任何东西时它不起作用，比如

```
int& myIntRef = myInt;

MyClass3* myCls3 = AllocateObject<MyClass3>(myIntRef, myIntRef);     // a class with two int ref in its constructor 
```

当我尝试这样做时，我会收到如下错误：

```
error C2893: Failed to specialize function template
error C2780: 'T *IMemoryAllocator::AllocateObject(arg0)' : expects 1 arguments - 2 provided 
```

..即使 MyClass3 构造函数接受两个参数，然后模板应该选择具有 2 个参数的版本。就像模板不知道选择哪个功能一样。

为什么是这样？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T16:50:45.310

试试`std::remove_reference`模板。

```
template <class T, class arg0>
inline T* AllocateObject(arg0 a0) { return new (InternalAllocate(sizeof(T))) T(std::remove_reference<arg0>::type(a0)); } 
```

或者，甚至以更 c++ 的方式使用`static_cast`：

```
template <class T, class arg0>
inline T* AllocateObject(arg0 a0) { return new (InternalAllocate(sizeof(T))) T(static_cast<std::remove_reference<arg0>::type>(a0)); } 
```

# regex - nginx url 重写

> ID：12028221
> 
> 赞同：0
> 
> 时间：2012-08-19T16:47:35.990
> 
> 标签：regex, nginx

如何[nginx](http://wiki.nginx.org/HttpRewriteModule#rewrite)在`location`上下文中重写以下内容：

`/`=>`/myurl/`

`/abc/`=>`/myurl/abc/`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:03:02.813

以下将做的伎俩：

```
location / {
    rewrite ^ /myurl/$uri; 
} 
```

请注意，/abc/ 将匹配 / 前缀（并被重写为 /myurl/abc/），因此不需要单独重写

另请注意，您需要添加一个额外的“location /myurl/ {...}”块以避免收到对该 url 的传入请求以重写为 /myurl/myurl/... 等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:03:13.913

看起来这样可以解决问题：

```
rewrite ^(/.*)$  ^/admin/$1 break; 
```

还有什么建议吗？

# windows-phone-7 - 后台代理计时器

> ID：12028223
> 
> 赞同：0
> 
> 时间：2012-08-19T16:48:29.013
> 
> 标签：windows-phone-7

我有一个使用后台代理的应用程序。我知道代理每 30 分钟执行一次。我只想每天 00:00:01 执行一次代码我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:28:03.630

定期任务/后台代理不会每 30 分钟执行一次。它们在不同的时间执行，而这些时间取决于几个因素。不能指望它们以任何给定的时间间隔执行，以及您应该考虑的最短时间*应该*执行的最短时间大约是每小时。它可以比这更频繁地执行，但你不应该指望这一点。

手机在执行周期性任务时要考虑的一件事是手机启动无线电的时间，因为与手机空闲时相比，启动无线电需要相当多的电量。

此外，您应该考虑到某些用户会禁用定期任务。正因为如此，以及上面关于周期性任务的注释，您应该以这样一种方式编写程序，即周期性任务可能永远不会执行，并在应用程序执行时考虑到这一点。但是您尤其不应该期望任何周期性任务将在午夜过后一秒执行，因为无法设置执行某事的时间。

也许这在 WP8 中是可能的，但在 WP7 中是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:46:08.700

我想在这种情况下，定期任务会对你有所帮助。您可以在此处找到其他详细信息：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.scheduler.periodictask (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.scheduler.periodictask(v=vs.92).aspx)

# python - WHERE ANCESTOR IS :1 是什么意思？

> ID：12028226
> 
> 赞同：0
> 
> 时间：2012-08-19T16:48:37.777
> 
> 标签：python, google-app-engine

我是 Google App Engine 的新手，正在阅读 Python 2.7 的“入门”教程。我在“使用数据存储区”部分，正在查看以下 GQL 查询：

```
greetings = db.GqlQuery("SELECT * "
                        "FROM Greeting "
                        "WHERE ANCESTOR IS :1 "
                        "ORDER BY date DESC LIMIT 10",
                        guestbook_key(guestbook_name)) 
```

我不明白 WHERE ANCESTOR IS :1 是什么意思。我见过这个问题：[在 GQL 查询中，什么 ANCESTOR IS :1 到底是什么意思？](https://stackoverflow.com/q/7273215/472344)但我不明白答案。我对 SQL 有一定的了解，我假设 WHERE 是查询的某种限制子句。我也明白对象可以有父母或祖先。但是 :1 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:51:25.517

这意味着将第一个参数（在本例中为 guestbook_key(guestbook_name)）传递给查询。

# c - c - 分段错误（核心转储）指针问题

> ID：12028227
> 
> 赞同：0
> 
> 时间：2012-08-19T16:49:26.060
> 
> 标签：c, pointers, segmentation-fault, ip-address

当我尝试使用参数运行程序时出现分段错误错误。现在我通过 GDB 运行它并找到有问题的行，它看起来像这样：

```
*dstip = (*optarg); 
```

原型是：

```
char *dstip; 
```

最后在这一行中调用它：

```
char *filter = ("ip dest host %s", dstip); 
```

现在回头看它，我并不惊讶它看起来不起作用......坦率地说是错误的，并且通过完全删除这些行（并更改过滤器文本）来解决问题。但是，我需要输入的 IPv4 地址显示在将使用的错误消息过滤器中，并且对指针毫无用处并且来回尝试了不同的东西，我无法做到正确。也就是我只有get`warning initialization makes pointer from integer`之类的……怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T16:55:04.747

该声明

```
*dstip = (*optarg); 
```

未设置`dstip`为指向`optarg`. 相反，它将指向的第一个字符设置为与`dstip`指向的第一个字符相同的值`optarg`。即它与

```
dstip[0] = optarg[0]; 
```

与`dstip`未初始化的指针一样，您更改了内存中的未分配区域，这将导致奇怪的事情发生。

还有，表达式

```
("ip dest host %s", dstip) 
```

不会做你认为它做的事，至少如果你认为它会返回一个格式化的字符串。它真正做的是使用逗号运算符，它计算逗号两边的表达式，但只返回逗号右边表达式的结果。

# php - 像这样向数组添加索引

> ID：12028232
> 
> 赞同：0
> 
> 时间：2012-08-19T16:50:15.450
> 
> 标签：php

如何将索引 (1,2,3) 添加到这样的数组中：

```
$errors['success'] = false; //0
$errors['#errOne'] = "Enter a valid username"; //1
$errors['#errTwo'] = "Enter a valid email";//2
$errors['#errThree'] = "Enter a valid password";//3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:54:10.617

只需使用整数索引而不是字符串索引。

```
$errors[0] = false; 
```

如果您的顺序无关紧要，那么不指定索引会更容易，PHP 会将其推送到数组中。

```
$errors[] = false;
$errors[] = "Enter a valid username"; 
```

不过，看看你的结构，我建议不要在你的数组中保留这么多的东西。您应该为您的错误列表提供一个数组，并为某事是否成功提供一个单独的值。（成功的定义没有错误吗？如果是这样，你可以检查一下。）也许是这样的？

```
$status['success'] = false;
$status['errors'] = array();
$status['errors'][] = 'Enter a valid username';
// etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:04:43.077

如果您不关心元素顺序：

```
$errors = array_values($errors); 
```

如果您需要指定某个顺序：

```
$errors = array(
   $errors['success']
   $errors['#errOne']
   $errors['#errTwo']
   $errors['#errThree']
); 
```

# php - MongoDB、Windows 7、XAMPP、PHP.ini

> ID：12028234
> 
> 赞同：1
> 
> 时间：2012-08-19T16:50:20.883
> 
> 标签：php, apache, codeigniter, mongodb, xampp

我在让 XAMPP 在 Windows 7 上与 MongoDB 一起工作时遇到了很多麻烦。

我正在使用 XAMPP 1.7.7/PHP 5.3.8。

我已经正确设置了 MongoDB，并且可以通过 shell 进行查询（并且 MongoD.exe 正在运行）。

但是每当我尝试通过 PHP 脚本访问 MongoDB 时，我都会收到错误消息（通过 CodeIgniter）：

> MongoDB PECL 扩展尚未安装或启用

当我运行 phpinfo() 时，它不会在扩展中显示 MongoDB。但是，我使用了位于此处的驱动程序[https://github.com/mongodb/mongo-php-driver/downloads](https://github.com/mongodb/mongo-php-driver/downloads)并将适当的行添加到 php.ini

在我看来，服务器实际上并没有读取 php.ini。我已经尝试了该 zip 文件中 5.3 驱动程序的每个版本，但它永远不会加载。PHP 错误日志或 Apache 错误日志中也没有错误。

phpinfo() 表示它正在使用以下 php.ini 文件：

```
> Configuration File (php.ini) Path C:\Windows 
> Loaded Configuration File C:\xampp\php\php.ini 
```

C:\Windows 中没有 php.ini 文件。我机器上唯一存在的 php.ini 位于 C:\xampp\php\php.ini 中，修改它似乎完全没有效果。即使我输入extension=norealfilename.abc，它也不会抛出错误，这看起来很奇怪。

我在这里完全不知所措，我已经失去了几天试图让这一切继续下去，并且非常沮丧。任何帮助，将不胜感激。

其他相关 phpinfo() 信息： System Windows NT MY-PC 6.1 build 7601 (Windows 7 Home Premium Edition Service Pack 1) i586 Compiler MSVC9 (Visual C++ 2008) Architecture x86 Thread Safety enabled

如果您需要更多信息，请告诉我，我会更新这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:06:11.543

我做了以下（与 Codeigniter 一起使用）：

从[https://github.com/mongodb/mongo-php-driver/downloads下载](https://github.com/mongodb/mongo-php-driver/downloads)

*小心获取线程安全版本。

然后在你的 php.ini 文件中添加这一行：

> extension=php_mongo-1.2.11-5.3-vc9-x86_64.dll （或您下载的任何版本）

然后重新启动服务器并检查错误日志以查看是否有任何错误/冲突。

PS：我使用 WAMP！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:49:59.413

在测试了几个版本之后，对我有用的是：这个包中的 php_mongo-1.3.1-5.3-vc9-x86_64.dll。[http://cloud.github.com/downloads/mongodb/mongo-php-driver/php_mongo-1.3.1.zip](http://cloud.github.com/downloads/mongodb/mongo-php-driver/php_mongo-1.3.1.zip) 我的环境：基于 Windows 8 64 位 x64 的处理器。Winginx PHP 5.3.8

# c# - 如何创建滚动的 HubTile 项目列表

> ID：12028235
> 
> 赞同：1
> 
> 时间：2012-08-19T16:50:22.087
> 
> 标签：c#, windows-phone-7, xaml

我正在动态填充一个充满 HubTile 项目的列表框，但该列表不会在模拟器或我的设备上向下滚动。我在后面的代码中创建的列表（绑定到列表框）仅包含 28 个项目。我不确定问题是什么，似乎一切都加载得相当快。我所拥有的如下：

主页.xaml

```
<ScrollViewer>

                    <ListBox Grid.Row="0" x:Name="connectionTileList" Margin="12,0,12,0" toolkit:TiltEffect.IsTiltEnabled="True">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <toolkit:WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <toolkit:HubTile Title="{Binding TileName}" Margin="6"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="connectionHubTile_Tap">
                                    <toolkit:ContextMenuService.ContextMenu>
                                        <toolkit:ContextMenu x:Name="connectionMenu">
                                            <toolkit:MenuItem Header="pin to start" Tap="connectionMenuItem_Tap"/>
                                        </toolkit:ContextMenu>
                                    </toolkit:ContextMenuService.ContextMenu>
                                </toolkit:HubTile>

                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                </ScrollViewer> 
```

MainPage.xaml.cs

```
List<TileItem> networkTileItems;

public MainPage()
    {
        InitializeComponent();

        CreateConnectionHubTiles();
    }

private void CreateConnectionHubTiles()
    {
        networkTileItems = new List<TileItem>
        {

            new TileItem() { ImageUri = "/Images/Network/temp.png", Title = "Asymmetric DSL", Notification = "not active (what is proper term?)", /*Message = "not active (what is proper term?)"*/ GroupTag = "ConnectionTileGroup", TileName = "Asymmetric DSL", Type = NetworkInterfaceType.AsymmetricDsl  },
                ...

        };

        this.connectionTileList.ItemsSource = networkTileItems;
    } 
```

运行时，无论我尝试向上还是向下滚动，列表都只会创建向上滚动的效果。我怎样才能解决这个问题？我应该在后台线程中加载图像，还是在滚动时一次只加载几张图像，或者其他什么？如果是这样，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:03:23.310

这里的问题是您将 a 包装`ListBox`在 a 中`ScrollViewer`，并且两个控件都在尝试进行操作。无论设置

`ScrollViewer.VerticalScrollBarVisibility="Disabled"`在`ListBox`, 让外部`ScrollViewer`管理滚动，或`ScrollViewer`完全删除外部。

# jquery - 简单的数字选择游戏（jQuery）

> ID：12028236
> 
> 赞同：2
> 
> 时间：2012-08-19T16:50:28.920
> 
> 标签：jquery, html, arrays, jquery-click-event

首先，你好。很棒的论坛/网站在这里:)

我整个周末都在我的个人网站上工作，现在我被这个“游戏”的想法困住了，我想添加我的网站。我非常了解 HTML 和 CSS，但我对 JS/jQuery 很陌生。

让我试着从用户体验来解释他应该能够用“游戏”做什么。

用户可以**从 10 个号码中选择 3 个号码**，另外还有**2 个**来自新号码列表 (11-15) 的额外号码。这些选定的数字然后转到另一个 div （或其他东西）。从这一点开始，我可以用 PHP 做我的事情了。但我完全坚持这部分。我知道，我知道这很简单，但必须在 48 小时内冻结我的网站编码：D

从这些号码中选择 5 个号码：1-2-3-4-5-6-7-8-9-10 从那里选择 2 个附加号码：11-12-13-14-15

这些选定的数字应该在 div 中使用 jQuery 显示，如下所示： Normal: 2-3-6-7-8 Extra: 12-14

用户还可以清除选定的号码（如果他想同时选择不同的号码）和/或删除一个号码并选择新的号码。When the 5/2 **numbers are selected all the other numbers should somehow disable** so user cannot select more than 5/2 numbers.

如果用户可以**随机选择数字**（单击某个按钮，它会自动选择 5+2 个数字），那将是很酷的。但我不知道如何做到这一点？

现在数字选择可能可以通过这样的方式完成？

```
//5 numbers
$("#mainNumbers div").click(function) {
var selectedNumber = $(this).text().clone();
$("#selectedMainNumbers").append("<div>"+selectedNumber+"</div>");
}

//2 extra numbers
$("#extraNumbers div").click(function) {
var selectedNumber = $(this).text().clone();
$("#selectedExtraNumbers").append("<div>"+selectedNumber+"</div>");
} 
```

清除选择可能是这样的？

```
$("#clearNumbers").click(function) {
    $("#selectedMainNumbers, #selectedExtraNumbers").empty();
    } 
```

这些看起来好吗？或者那些能以某种方式做得更好。

现在我不知道的部分。**数字排序应该如何进行？**使用数组？例如，用户首先单击数字 5 并将其添加到 #selectedMainNumbers div，然后他选择 2 并将其添加到 #selectedMainNumbers div 以及现在看起来像 8-3，但我**希望数字是数字顺序always**，所以数字应该是 3-8 格式。

**另外应该如何进行随机数选择？如果用户已经选择了所需的 5 个号码，那么禁用号码选择呢？**

呸，这篇文章很长。对于那个很抱歉。希望你能给我一些提示..因为我的大脑不能正常工作：/谢谢。问有什么不清楚的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:49:02.150

这个怎么样：http: [//jsfiddle.net/ABeK/](http://jsfiddle.net/ABetK/)？

如果您想将其发送到服务器，请使用表单：http: [//jsfiddle.net/ABeK/1/](http://jsfiddle.net/ABetK/1/)

**编辑：**

看来我没有阅读所有问题，所以我的 jsfiddle 并没有满足[user1610229](https://stackoverflow.com/users/1610229/user1610229)的所有要求。

[Dan Barzilay](https://stackoverflow.com/users/1361042/dan-barzilay)完成了我的代码：http: [//jsfiddle.net/Crn45/](http://jsfiddle.net/Crn45/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T23:11:17.083

## *[jsBin 演示](http://jsbin.com/ihubip/3/)*

HTML：

```
 <div id="mainNumbers"></div> 
  <div id="extraNumbers"></div>
  <div id="selected_mainNumbers"></div> 
  <div id="selected_extraNumbers"></div>      
  <br />     <button id="generateNumbers">Generate random numbers</button>      
  <br />     <button id="clearNumbers">Clear selected</button> 
```

CSS：

```
#mainNumbers, #extraNumbers{
  margin:5px;
  padding:16px;
  background:#345;
}
#mainNumbers div,
#extraNumbers div,
#selected_mainNumbers div,
#selected_extraNumbers div
{
 cursor:pointer;
 display:inline;
 background:#eee;
 padding:5px 10px;
 border-radius:10px;
 margin:3px;
}
#selected_mainNumbers, #selected_extraNumbers{
  margin-top:5px;
  padding:16px;
  height:20px;
  background:#789;
}
.selectedNum{
  opacity:0.5;
}
#selected_mainNumbers div,
#selected_extraNumbers div{
  opacity:1;
  background:gold;
} 
```

jQuery：

```
// generate buttons with numbers
for(i=1;i<=15;i++){
  var appendWhile= i<=10 ?
  $('#mainNumbers').append('<div>'+ i +'</div>') :
  $('#extraNumbers').append('<div>'+ i +'</div>') ; 
}

// create arrays for selected numbers
var mainNumbers=[], extraNumbers=[];

// function print array ///
function printArray(name, arrName){
    $('#selected_'+name).empty();
    for(a=0;a<arrName.length;a++){
       $('#selected_'+name).append('<div>'+ arrName[a]+'</div>');
    }
}

// select function ////////
function selectNum(clickedElement, name, len){
  var arrName = window[name]; // convert string to var
  var num = parseInt( $(clickedElement).text(), 10 );  
  if( arrName.length < len && $.inArray(num,arrName) == -1  ) {
    arrName.push(num);
    arrName.sort(function(a,b){return a-b;}); // sort numerically
    printArray(name, arrName);
    $(clickedElement).addClass('selectedNum');
  }else{
    $(clickedElement).parent().fadeTo(0,0.3).fadeTo(400,1); // visually alert array is full
  }
}

// remove function ///////////
function removeFromArr(clickedElement,arrName){
  var num = parseInt( $(clickedElement).text(), 10 );
  for(i=0;i<arrName.length;i++){
    if(arrName[i]==num){
       arrName.splice(i,1);
       $(clickedElement).remove(); 
    }
  }
}
// clear function
function clearAll(){
    mainNumbers=[], extraNumbers=[]; // reset arrays
  $('#selected_mainNumbers, #selected_extraNumbers').empty(); // remove selected buttons
  $('.selectedNum').removeClass(); // reset 'selected' states
}

// clicks ////////////////////
$('#mainNumbers, #extraNumbers').on('click','div',function(){
   var len = $(this).parent().attr('id')=='mainNumbers' ? 5 : 2;
   selectNum( $(this), $(this).parent().attr('id'), len );
});

$('#selected_mainNumbers, #selected_extraNumbers').on('click','div',function(){
    var arrName = $(this).parent().attr('id').split('selected_')[1];
    $('#'+arrName).find('div:contains('+$(this).text()+')').removeClass('selectedNum');
    removeFromArr( $(this), window[arrName] );
});

// clear all /////////////////
$('#clearNumbers').click(function(){
   clearAll();
});

// generate random ///////////
$('#generateNumbers').click(function(){
  clearAll();

  for(r=0;r<5;r++){
     var n = Math.ceil(Math.random() * 10);
     while ($.inArray(n, mainNumbers) > -1){ // loop until no match found
         n = Math.ceil(Math.random() * 10);
     }  
     mainNumbers[r] = n;
     $('#mainNumbers div').eq(n-1).addClass('selectedNum');
  }

  for(rr=0;rr<2;rr++){
     var nn = Math.ceil(Math.random() * (15-10)+10);
     while ($.inArray(nn, extraNumbers) > -1){
         nn = Math.ceil(Math.random() * (15-10)+10);
     }  
     extraNumbers[rr] = nn;
     $('#extraNumbers div').eq(nn-10-1).addClass('selectedNum');
  }

   mainNumbers.sort(function(a,b){return a-b;}); // sort array
  extraNumbers.sort(function(a,b){return a-b;}); // sort array
  printArray( 'mainNumbers', mainNumbers );
  printArray('extraNumbers', extraNumbers);

}); 
```

# perl - 如何“很好地”检测 Perl 中类的直接父级？

> ID：12028241
> 
> 赞同：2
> 
> 时间：2012-08-19T16:51:33.970
> 
> 标签：perl, oop, inheritance

请注意，在这种情况下，UNIVERSAL::isa 对我不起作用。我不想像以前那样走上继承树`__PACKAGE__->isa('UNIVERSAL')`。

这是一个例子：

```
 use 5.10.1;
  use strict;
  use warnings;
  use utf8;
  {
    package Parent;
    #How to do this more elegantly?
    sub inherits_from_parent {
      no strict 'refs';
      return (__PACKAGE__ eq @{"$_[0]\::ISA"}[0]);
    }
  }
  {
    package Child;  
    use parent -norequire, qw(Parent);
  }
  package main;

  say "Child directly inherits from Parent"
    if Child->inherits_from_parent;
  #not wat I want 
  say 'Child is universal:'.Child->isa('UNIVERSAL'); 
```

*有没有更好的方法（不使用`no strict 'refs';`）来检测类的直接父级？* 谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:11:24.167

我不认为查看`@ISA`类的数组有什么问题，事实上，这就是 Perl 所做的，几乎可以肯定任何诊断模块都会做的。`strict`请记住，当您知道自己为什么要这样做时，关闭部分功能并没有什么坏处，这就是其中一种情况。

对于您的实际问题，谷歌搜索已经产生了一些可能性，其中柯蒂斯坡（奥维德）[`Class::Sniff`](http://search.cpan.org/perldoc?Class%3A%3ASniff)可能是最好的例子。

我知道[`Data::Printer`](http://p3rl.org/Data::Printer)当你转储一个对象时会打印出类层次结构。它的输出是供人类读者使用的，但您也许可以查看它的代码以了解它的作用。同样，我几乎可以肯定它完全符合您在示例中所做的事情！

# python - 在 rpyc 中传递对象失败

> ID：12028243
> 
> 赞同：5
> 
> 时间：2012-08-19T16:51:44.517
> 
> 标签：python, parameter-passing, pass-by-reference, rpyc

我正在尝试使用 RPyC 将对象作为参数从客户端传递到服务器。但服务器无法访问该对象，我收到一个 AttributeError。

**服务器代码：**

```
class AgentService(rpyc.Service):
  def exposed_func(self, obj):
    return obj.name 
```

**客户代码**

```
self._conn = connect(agent_host, agent_port, config = {"allow_public_attrs" : True})
return self._conn.root.func(obj) 
```

`returns: AttributeError: cannot access 'name'.`

我正在使用[RPyC](http://rpyc.sourceforge.net/)服务并根据网站进行编码，这应该可以。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:55:56.043

配置字典需要在客户端和服务器端进行调整。

要更改的主要值是`allow_public_attrs : True`是否只需要访问公共变量，或者`allow_all_attrs : True`是否需要访问私有和受保护的变量和方法（即以'_'开头的那些）。

在客户端，连接代码如上述问题编写，服务器代码如下：

```
server = ThreadedServer(MyService, port = 12345,
                        protocol_config = {"allow_public_attrs" : True}) 
```

有关所有可用配置选项的更多信息，请参阅：

[http://rpyc.sourceforge.net/api/core_protocol.html](http://rpyc.sourceforge.net/api/core_protocol.html)

# c# - 将数据库附加到我的项目

> ID：12028246
> 
> 赞同：1
> 
> 时间：2012-08-19T16:52:08.393
> 
> 标签：c#, sql, database, connection-string

在我的 C# 程序中，我遇到了一个大问题：

我将一个名为“Behgozin_DB”的 SQL 服务器数据库添加到我的项目中。我执行以下步骤来添加数据库：

1.  在我的 SQL 服务器管理工​​作室中，我分离了我的数据库
2.  在我的 Visual Studio 中的数据菜单中，我添加了新的数据源
3.  我的连接字符串是：

> 数据源=(本地);AttachDbFilename=|DataDirectory|\DB_Behgozin.mdf;Integrated Security=True

一切正常，但是当我在关闭应用程序后将某些内容插入数据库时​​，我看不到任何数据。但是当我在我的 Visual Studio 服务器资源管理器菜单中右键单击我的表并选择显示表数据时，我的应用程序会完全读取整个数据表！

另一个问题是使用此应用程序后，即使它无法读取表中自己的数据。

它是 Visual Studio 2010 SQL Server 2008 中的 C# 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:04:17.877

您的数据库文件有 2 个副本。一个在您的项目中，另一个在`bin\debug`. 在设计时，您编辑项目中的那个。每次您的项目更改并构建它时，项目数据库文件都会覆盖 bin\debug 中的文件，并且您正在运行时更新此文件。

为了解决这个问题，您有三个选择：

1.  仅使用 bin\debug 中的文件。将项目数据库文件复制选项设置为“从不”（在属性窗口中），显示项目的所有文件并将 bin\debug 数据库文件添加到服务器资源管理器。注意：如果您不小心删除了 bin\debug 文件夹，您的所有更改都将消失。更改时手动将数据库文件从 bin\debug 复制到项目文件夹。

2.  将文件放在您的 sql server 文件夹中，而不是放在您的项目中。部署时，更改连接字符串并从服务器复制数据库。

3.  替换“|数据目录|” 带有项目数据库文件的绝对路径的宏。部署时，只需将其改回“|DataDirectory|”

# c++ - C++ 在作为超类传递后使用覆盖的方法

> ID：12028250
> 
> 赞同：0
> 
> 时间：2012-08-19T16:52:30.320
> 
> 标签：c++, function, methods, virtual, superclass

如果我有一个 C++ 函数/方法，例如：

```
getSound(Animal a){
  a.printSound();
} 
```

然后传递给它一个`Dog`扩展类`Animal`但覆盖动物方法的对象，有没有办法在里面`printSound()`使用狗？`printSound()``getSound()`

我已经尝试`printSound()`在`Animal`类定义中进行虚拟化，但我仍然得到原始`printSound()`.

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T16:58:17.777

这是因为[object-slicing](http://en.wikipedia.org/wiki/Object_slicing)，因为您按值接受参数。

通过引用接受它：

```
void getSound(Animal & a); //now reference 
```

如果`Animal::printSound()`不改变对象的状态，则使其成为`const`成员函数（如果它不是 const 已经），然后通过`const`引用接受参数：

```
void getSound(Animal const & a); //now const reference 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T16:57:48.757

虚拟`printSound`化是正确的。将 的签名更改`getSound`为`Animal&`或`const Animal&`。通过取值，您正在从您`Animal`的 构建一个新的，而这只是一个，而不是一个。`Animal``Dog``Animal``Dog`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T16:58:43.537

当您调用时`getSound`，您正在传递`Animal`按值。这意味着`Dog`通过调用`Animal`的复制构造函数来制作 的副本。的`Animal`复制构造函数构造一个`Animal`，而不是一个`Dog`。您可能希望通过引用传递：

```
getSound(Animal& a){
  a.printSound();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-19T17:00:16.403

你基本上做对了所有事情，除了一件事。

通过引用传递 Animal 对象

```
getSound(Animal &a); 
```

或者提供指向相关对象的指针。

```
getSound(Animal *a) {
    a->printSound();  //Mind the -> in this case.
} 
```

要调用这个函数，你可以这样：

```
Dog D;
getSound(&D);    //Passes a pointer to the function. 
```

否则，您将构造一个“动物”类型的新对象，而不是真正“传递”一只狗。

实际上，最好使用指针解决方案，否则在传递派生对象时会遇到问题，因为它需要一个类型的对象`Animal`并且不会满足于其他任何东西。

# bittorrent - Bittorrent 追踪器更新？

> ID：12028254
> 
> 赞同：0
> 
> 时间：2012-08-19T16:53:15.467
> 
> 标签：bittorrent, tracker

在 bittorrent 客户端中，来自跟踪器的第一个响应将包含对等点列表。在第一个响应后联系跟踪器进行更新时，第二个响应中发送的任何对等点是否与第一个响应中的相同？

我问的原因是我不想浪费时间检查新列表中的任何对等点是否与新列表相同。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:33:50.013

跟踪器通常应该发送他们所知道的所有对等节点中随机选择的子集。实际实现有所不同，例如，出于效率原因，它们可能会在很长的对等点列表上移动一个窗口，或者它们可能会注入假对等点以提供合理的否认。

如果 swarm 的大小足够小以适应`numwant`限制，那么他们将返回整个 swarm。

但是即使你得到了整个群体，返回的对等点集仍然可能仅仅由于新的到达/离开而有所不同。

而且您还想联系跟踪器以将自己保留在他们的列表中，因为您的条目最终会过期。

长话短说：返回的集合之间可能有 0 到 100% 的重叠。

只需将您的东西存储在哈希/集合数据结构中，您就可以了。

# java - VetoSet NullPointerException

> ID：12028255
> 
> 赞同：1
> 
> 时间：2012-08-19T16:53:31.677
> 
> 标签：java, arrays, list

我一直在研究一个解析和解释一些数据的程序，但是我遇到了一个问题。无论我多么努力，我似乎​​都无法消除这个错误。

代码片段：[http](http://pastebin.com/0BLakSpe)
: //pastebin.com/0BLakSpe VetoSet.java：http://pastebin.com/8RdGKGQw 结果：[http :](http://pastebin.com/8RdGKGQw) [//pastebin.com/8GfxndGw](http://pastebin.com/8GfxndGw)

我已经修改了代码，因此您不必费力地通过许多不相关的方法，并且我已经修改了错误消息，因此它在我发布的代码的上下文中是有意义的。

以下是想要阅读的人的完整代码：
Main.java：http://pastebin.com/FenKU6Ze [VetoSet.java：http://pastebin.com/8RdGKGQw](http://pastebin.com/8RdGKGQw) VetoParser.java*：[http](http://pastebin.com/FenKU6Ze)
: [//pastebin.com](http://pastebin.com/1vTF3aXP) [/](http://pastebin.com/4G8ZmYxp) [1vTF3aXP](http://pastebin.com/1vTF3aXP) ReadFile.java：http://pastebin.com/beV0bqPa Interpolate.java：http://pastebin.com/3CsaJdXm Utility.java：http://pastebin.com/4G8ZmYxp [_](http://pastebin.com/beV0bqPa) [_](http://pastebin.com/3CsaJdXm)

这是一个可编译代码的压缩包：[http ://www.qfpost.com/file/d?g=KFaF7M6dk](http://www.qfpost.com/file/d?g=KFaF7M6dk)

如果有人可以帮助我解决这个问题，将不胜感激

谢谢，塔克托

* rotatePairArrays 函数添加了一些调试代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:02:30.910

您的问题出在`VetoStuff.vetoSetToPairArray()`：

```
 Pair[][] pairArray = new Pair[input[0].getVetoPairs().length][input.length];
    for(int i = 0; i < input.length; i++)
            pairArray[i] = input[i].getVetoPairs(); 
```

您已经切换了二维数组中的两个维度。由于`input[0].getVetoPairs().length > input.length`您的 pairArray 最后会出现一些空值。

将其更改为：

```
new Pair[input.length][]; 
```

（当您稍后分配它们两行时，无论如何您都会覆盖内部数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:11:55.960

你还没有向我们展示足够的东西。发生错误是因为`n`在`doStuff`. 导致问题的代码必须是任何调用`setVetoPairs`来确定 getVetoPairs 将返回的内容，但“set”调用必须在解析器内部。它使其中一个值为空。

这应该很容易通过在调试器中跟踪找到。Netbeans 在这类事情上非常出色。

过去，我因未正确处理空行而被抓住。可能是这样简单的事情。调试器可能会说清楚。

# php - 如何在curl中填写连续表格

> ID：12028256
> 
> 赞同：-1
> 
> 时间：2012-08-19T16:54:06.297
> 
> 标签：php, curl

我需要帮助填写 curl 的表格。我要填写和提交的表格是[http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx](http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx) 但无法直接访问此表格。为此，必须提交另一个表格，我们通过单击 [http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32上的“包裹查询”来完成](http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32)

所以我写了一个脚本来点击“包裹查询”但是现在我该如何填写表格请帮助我

我面临的问题是我使用相同的变量来发布（否则我无法访问该页面）。回声显示填写的表格，但未单击提交按钮。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:08:55.597

好的，我想我理解你想要做什么，但你做错了。

您正在尝试填写表格：[http](http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx) ://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx并将其提交到下一页。正如您所说，表单填写了 cURL 请求的回声，但没有提交按钮。

您不能从 cURL 提交表单按钮等。相反，您必须直接进入包裹查询页面，而不是使用表单，或者像大多数网站那样，重定向到填充标题的页面，然后让用户自己按下按钮。

因此，您可以将您的 $_POST 变量发送到“http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32”，用您自己的包裹号替换看起来像的东西`c`，然后将用户重定向到那个。

# javascript - 使用 todataurl 时输入错误

> ID：12028258
> 
> 赞同：0
> 
> 时间：2012-08-19T16:54:30.130
> 
> 标签：javascript, jquery, canvas

每当我尝试运行它时，我都会在 chrome 中收到类型错误：**代码更新**

```
// Get the drawing canvas
canvas = $('#drawing');
context = canvas[0].getContext('2d');

function resizeCanvas() {

    canvas.attr({'width' : $(window).width()});
    canvas.attr({'height' : $(window).height() - 158});

    var dataURL = canvas[0].toDataURL('image/png');
    context.drawImage(dataURL, 0, 0);

}

$(window).resize(function() {
    resizeCanvas();
}); resizeCanvas();

// Various event handlers after this. 
```

为什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:58:34.763

你的代码看起来不错。检查以下内容：

1.  存在一个`canvas`带有 id 的元素`drawing`；
2.  您的 Chrome 版本支持`canvas`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:25:38.120

`drawImage`获取图像或画布引用，您将传递给它一个字符串。

例如：

```
var a = document.createElement("canvas");
a.getContext("2d").drawImage("asdasdasd", 0, 0 )
//TypeError: Type error 
```

你可以试试：

```
context.drawImage(canvas[0], 0, 0); 
```

或者

```
var image = new Image();
image.src = dataURL;
context.drawImage( image, 0, 0 ); 
```

# javascript - Javascript：Unicode 符号选择器（用于将数学符号添加到文本区域）

> ID：12028264
> 
> 赞同：6
> 
> 时间：2012-08-19T16:55:14.030
> 
> 标签：javascript, jquery, unicode

我正在寻找一种解决方案，允许用户通过单击按钮将 unicode 字符（现在为数学符号）添加到 textarea。我希望有某种符号选择器类/插件可以做到这一点，所以我不必在这里重新创建轮子。

我找到[了这个，](http://macchiato.com/picker/MyApplication.html)但它基本上是一个概念证明。有谁知道还有什么更完整的吗？一个 jQuery 插件会很棒，但我还没有找到。

## 编辑

我也找到[了这个](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/charpicker.html)。它似乎基于相同的来源，并且还尝试呈现不受支持的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T20:40:57.580

我做了 2 个扩展，具有您正在寻找的功能。

铬：[https ://chrome.google.com/webstore/detail/utf-8-and-unicode-charact/fcemphgmjnjpmmdhcedhjiegickfbiia](https://chrome.google.com/webstore/detail/utf-8-and-unicode-charact/fcemphgmjnjpmmdhcedhjiegickfbiia)

火狐：[https ://addons.mozilla.org/firefox/addon/utf8-characters/](https://addons.mozilla.org/firefox/addon/utf8-characters/)

在这里您只能找到 html 中的数学符号：

[https://github.com/codexico/UTF-8-Chrome-Extension/blob/master/html/groups/math.html](https://github.com/codexico/UTF-8-Chrome-Extension/blob/master/html/groups/math.html)

以及带有描述的字符：

[https://github.com/codexico/UTF-8-Chrome-Extension/blob/0361f41452f3c2165324dac437ff7ffa60b267f2/popup.html](https://github.com/codexico/UTF-8-Chrome-Extension/blob/0361f41452f3c2165324dac437ff7ffa60b267f2/popup.html)

# c# - 自定义控件构造函数

> ID：12028266
> 
> 赞同：0
> 
> 时间：2012-08-19T16:56:03.877
> 
> 标签：c#, constructor, custom-controls

全部，

我试图了解 C# WinForms 如何创建自定义控件。我根据分组框制作了一个自定义控件。根据某些值，我在里面创建了一组不同的控件。
我还成功地将这个控件添加到 Visual Studio 工具箱中，并且可以将它拖放到表单本身上。
由于控件的创建将取决于某些变量，因此我将其设置为此类中的属性。它在 Visual Studio 的属性列表中可见。

这是控件的伪代码。

```
public partial class MyGroupBox : System.Windows.Forms.GroupBox
{
    private int m_type;
    public RadioButton price;
    public RadioButton rb13;
    public int type
    {
        get { return m_type; }
        set { m_type = value; }
    }

    public MyGroupBox()
    {
        m_type = type;
        InitializeComponent();
        price = new RadioButton();
        if (type == 3)
        {
            rb13 = new RadioButton();
        }
    } 
```

然而，将控件拖到窗体后，我发现在设计器源代码中--`Form1.Designer.cs`控件创建为：

```
this.entry = new MyGroupBox(this.components); 
```

因此，当程序运行时，我的空构造函数不会被调用。

我的问题是：

1.  这个带`this.components`参数的构造函数是什么？
2.  由于我无法手动编辑`Form1.Designer.cs`，如何正确完成这项工作？

先感谢您。

# jquery - 具有“组合框”功能的 jQuery Tokeninput？

> ID：12028269
> 
> 赞同：1
> 
> 时间：2012-08-19T16:56:31.237
> 
> 标签：jquery, jquery-plugins, jquery-tokeninput

我正在使用[Loopj Tokeninput 插件](http://loopj.com/jquery-tokeninput/)，我想知道是否有人在其中实现了[jQuery“组合框”功能](http://jqueryui.com/demos/autocomplete/#combobox)？或类似的东西？范围是允许通过单击“向下箭头”或仅像下拉菜单一样单击输入字段来显示来自本地源的所有数据（但允许在键入内容时缩小范围......）。如果是这样，有人可以分享如何实现它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T17:02:25.743

[`Chosen`](http://harvesthq.github.com/chosen/)正是您所需要的。

> Chosen 是一个 JavaScript 插件，它使长而笨重的选择框更加用户友好。它目前有 jQuery 和 Prototype 两种风格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T20:00:20.320

嘿，在 tokeninput 插件中没有预定义的方法可以做到这一点。但是我们可以改变插件本身来实现你所需要的。我对插件做了一些更改。在您的 jquery.tokenput.js 文件中进行相同的更改，看看它是否有效。打开js文件。搜索

> var 输入框

现在转到 .focus(function(){}) 的一部分并用它替换它。

```
if (settings.tokenLimit === null || settings.tokenLimit !== token_count) {
       if (settings.local_data) {
           setTimeout(function() { run_search(''); }, 5);
       } else {
           show_dropdown_hint();
       } 
```

搜索**函数 run_search(query)**。如果是函数的一部分，请转到 else 并将其替换为以下函数。

```
else if (settings.local_data) {
                // Do the search through local data
                var results ;
                if(query==''){
                    results= settings.local_data;
                    }
                    else{
                    results= $.grep(settings.local_data, function(row) {                        
                    return (row[settings.propertyToSearch].toLowerCase().indexOf(query.toLowerCase()) == 0 || row[settings.propertyToSearch].toLowerCase().indexOf(' ' + query.toLowerCase()) > -1);

                });
                } 
```

当框处于焦点且查询为空时，我们使用该输入框的 onfocus 返回整个列表。如果查询不为空，则它将搜索该查询。

另外，如果你想在搜索结果框中显示滚动条，你应该修改token-input.css文件中“div.token-input-dropdown”的css如下： - Eliminate or Comment: “overflow: hidden ;" - 添加：“最大高度：150px；” （或您希望框具有的任何最大高度） - 添加：“溢出：自动；”

# entity-framework - 内存 IDbSet 的意义何在？

> ID：12028270
> 
> 赞同：2
> 
> 时间：2012-08-19T16:56:47.043
> 
> 标签：entity-framework, unit-testing, integration-testing

我看到人们基于 EntityFramework（代码优先）测试解决方案的一种方法是为他们的自定义上下文创建接口，其中包含类型 IDbSet（而不是 DbSet）的属性。然后在单元测试中他们使用 InMemoryDbSets。

我是 EntityFramework 的新手，这似乎是一个很好的方法。但它根本不起作用不是吗？当我们使用 InMemory DbSets 时，我们可以创建和运行使用实体对象的任何属性的查询。即使这些是计算出来的属性。但是在运行时，相同的查询将抛出“LINQ to Entities 中不支持指定的类型成员'PropertyName'。仅支持初始化程序、实体成员和实体导航属性。”。

因此，如果您使用带有 IDbSets 的自定义上下文，要么我不理解某些东西（可能），要么根本无法进行单元测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:10:38.140

好的，我做了很多研究，似乎唯一合理的方法（如果您想公开 IDbSet）是进行集成测试。忘记单元测试吧。

Ladislav Mrnka 在这里总结得非常好。 [Entity Framework 4.1 的假 DbContext 进行测试](https://stackoverflow.com/questions/6904139/fake-dbcontext-of-entity-framework-4-1-to-test/6904479#6904479)

我还在 Ayende 的博客 ( [http://ayende.com/](http://ayende.com/) ) 上看到他就是这样做的。

# c# - 更改 Metro 滑块旋钮颜色？

> ID：12028273
> 
> 赞同：0
> 
> 时间：2012-08-19T16:57:16.740
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个白色背景上的滑块。Metro 滑块的默认旋钮颜色为白色。有没有简单的方法来改变它的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:45:32.177

如果要手动控制滑块的样式，则需要更新选择滑块，然后使用工具栏上的格式->编辑样式->编辑副本命令。

您将需要在样式 XAML 中找到以下内容...

```
<Setter.Value>
    <ControlTemplate TargetType="Thumb">
        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"/>
    </ControlTemplate>
</Setter.Value> 
```

然后，您可以在此处设置背景颜色。这将创建一个可以使用的单一样式。请注意两件事... 1\. 您可能想要查看 VisualStateManager 状态并查看使用滑块时颜色是如何变化的，并根据需要进行调整 2\. 走这条路，您正在破坏滑块以适应用户选择不同的设备主题。例如，如果用户选择了一个深色主题，而您正在使用内置模板反映其中的一些主题，那么您可能会获得在给定主题下看起来不太好的控件。一个简单的例子（虽然不适用，因为听起来您正在明确设置页面背景颜色）是如果有人使用这种方法将滑块颜色更改为黑色，没有考虑到他们正在使用浅色主题进行开发，而用户可能正在使用深色主题。希望这是有道理的。

# apache - 无法打开服务“Tomcat7”

> ID：12028274
> 
> 赞同：22
> 
> 时间：2012-08-19T16:57:20.727
> 
> 标签：apache, tomcat7

嗨，我通过 Windows 安装程序安装了**Apache Tomcat 7。**刚刚重新启动了我的系统，我得到了错误

> 应用程序系统错误访问被拒绝。无法打开服务“Tomcat7”

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-26T06:15:34.130

我建议您按照这些简单的步骤来获得简单的解决方案。

1) .**使用tomcat7w.exe**始终以管理员身份启动。

2).右键单击tomcat安装的**'bin'**文件夹中的**tomcat7w.exe 。**

 **3) *.选择“属性”，然后在`'Compatibility'`“权限级别”下的选项卡*中。

4).选择' `Run this program as an administrator`'。

希望这有帮助谢谢。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-13T15:20:59.973

1）转到您的tomcat的bin文件夹并通过命令行运行以下命令：

> 服务.bat 安装

您将看到消息“已安装 tomcat7 服务”

2）现在通过命令行运行tomcat7w.exe，它应该可以成功运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-22T01:50:24.760

我对 Tomcat 8 有同样的问题，我找到了答案：http: [//tomcat.apache.org/tomcat-8.0-doc/windows-service-howto.html#Installing_services](http://tomcat.apache.org/tomcat-8.0-doc/windows-service-howto.html#Installing_services)

您需要从 promt 执行：

```
cd %CATALINA_BASE% -> CATALINA_BASE : C:\Program Files\ApacheTomcat\apache-tomcat-8.0.0-RC5\bin
service.bat install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T06:31:39.930

我认为您之前已经安装了tomcat并将其删除。这就是您遇到此问题的原因。好吧，在这种情况下，通过进入lib中存在的server.xml将端口号从默认8080更改为其他。希望这会起作用.. ...

问候， 罗希特·乔贝

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-10T20:46:25.917

此问题似乎与阻止 Tomcat 服务管理器启动的 Windows 用户访问控制 (UAC) 有关。我在 Windows Server 2012 上使用 Tomcat 6 时遇到了这个问题，即使我是使用“以管理员身份运行”安装的。[按照此答案](https://stackoverflow.com/a/12128026/684617)中已列出的步骤，我能够消除启动时的错误弹出窗口。 *但是，当我登录时，服务管理器图标没有出现在任务托盘中*。

尝试以下解决方法以启动服务管理器。不幸的是，我只能让它为我的用户帐户工作，而不是为所有登录的用户。另外，我只在 Windows Server 2012 中测试过这个。如果你让它在另一个环境中工作，请留下评论（ Windows 7、Windows 8 等）。

1.  [如本文所述，](http://www.thewindowsclub.com/create-elevated-shortcut-run-programs-bypass-uac)打开**任务计划程序**并创建一个特权的按需任务。
    *   在“**常规”选项卡**上，记下您为任务指定的名称，因为稍后会很重要（`foo`在此示例中使用）。
    *   在**操作选项卡**上：
        *   在您的目录中浏览`Tomcat7w.exe`（或任何适合服务管理器的版本/文件名） 。`CATALINA_HOME/bin`
        *   将“添加参数”设置为`//MS//Tomcat7`（将 Tomcat7 替换为您的 Tomcat 服务的名称，如果它是不同的名称/版本）。

2.  打开您的**启动文件夹**（运行`shell:startup`）并创建一个新的快捷方式：
    *   对于项目的位置，键入`schtasks /run /TN "foo"`您`foo`在创建任务时为其指定的名称。

3.  重新启动，希望您不会收到任何错误（[如果您按照已经提供的说明进行操作](https://stackoverflow.com/a/12128026/684617)）并且 Tomcat 服务管理器会显示在您的任务托盘中。**

# c# - 更改日期选择器文本：大写月份

> ID：12028275
> 
> 赞同：5
> 
> 时间：2012-08-19T16:57:25.810
> 
> 标签：c#, datepicker

我想通过大写月份的第一个字母来更改日期选择器。

目前我在线程中使用*设置的文化信息*并在那里指定格式，但对于我的文化来说，月份总是小写：

```
CultureInfo ci = new CultureInfo("es-MX");
ci.DateTimeFormat.ShortDatePattern = "ddd dd/MMM/yyyy";
Thread.CurrentThread.CurrentCulture = ci; 
```

显示：

```
大教堂 19/前/2012

```

我想拥有：

```
大教堂 19/Ago/2012

```

我该如何改变呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:14:14.837

指定`AbbreviatedMonthGenitiveNames`,`AbbreviatedMonthNames`以及`ShortDatePattern`做的伎俩。

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("es-MX")
{
    DateTimeFormat = new DateTimeFormatInfo
    {
        AbbreviatedMonthGenitiveNames = new string[] { "Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic", string.Empty },
        AbbreviatedMonthNames         = new string[] { "Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic", string.Empty },
        ShortDatePattern = "ddd dd/MMM/yyyy"
    }
}; 
```

产量：

![在此处输入图像描述](../Images/b5911ab2795d865c244b63c76c1a5ea0.png)

编辑：

我必须补充：

```
...
AbbreviatedDayNames = new string[] { "Dom",  "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"}, 
```

也

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:16:33.443

您可能可以使用[`CultureAndRegionInfoBuilder`该类](http://msdn.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.aspx)来复制现有的文化并仅更改月份名称。然后您随后在您的应用程序中使用该文化而不是`CultureInfo`您现在使用的文化。

但是请注意，这`CultureAndRegionInfoBuilder`是在`sysglobl.dll`程序集中，[您需要导入](https://stackoverflow.com/questions/2088126/cultureandregioninfobuilder-doesnt-exist).

# database - Google Apps 脚本：如何创建数据库、模式和表？

> ID：12028280
> 
> 赞同：0
> 
> 时间：2012-08-19T16:58:04.290
> 
> 标签：database, google-apps-script

**如何在 Google Apps 脚本中创建数据库（及其表和架构..）？** 我打算通过**ScriptDb**查询我的数据库，以获取**部署为 web 的应用程序**。那么是否有任何控制台选项或图形界面来创建我的数据库和表？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:21:20.960

在 Google Apps 脚本中没有创建架构的概念。此外，您不必“创建”数据库。每个脚本都已经有一个，您可以使用它来访问

```
ScriptDb.getMyDb() 
```

该数据库不是传统的关系数据库，而是更好地描述为“Javascript 对象存储”。因此，如果您想添加“记录”，只需创建一个包含所有列的 Javascript 对象并将其添加到数据库中。例如，您的 javascript 对象可能类似于

```
var student = { 'name' : 'Adam',
                'Address' : ' Whatever address here',
                'Age' : 20,
              } 
```

阅读[此文档](https://developers.google.com/apps-script/scriptdb)以获取更多信息

# php - Android 上的 httppost 错误

> ID：12028285
> 
> 赞同：4
> 
> 时间：2012-08-19T16:58:32.713
> 
> 标签：php, android, http-post

在我决定联系这里之前，我已经在 Stackoverflow 和互联网上查看了大部分 q/a 以获得答案。

我正在尝试在我的网站上调用 php 页面，并且在调用 httpclient.execute 时不断收到此错误：

```
08-19 12:42:33.889: E/AndroidRuntime(5340): FATAL EXCEPTION: main 08-19 12:42:33.889:
E/AndroidRuntime(5340): java.lang.IllegalStateException: Could not execute method of the activity 08-19 12:42:33.889: E/AndroidRuntime(5340):
at android.view.View$1.onClick(View.java:3046) 
```

所以我通读了一些帖子，一件事我确定我有

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

添加到我的清单（我这样做）下面是我从互联网上获得的一个片段，我从一个按钮 onclick 事件中调用它：

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://mywebsite/scripts/test.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
            nameValuePairs.add(new BasicNameValuePair("function", "1"));
            nameValuePairs.add(new BasicNameValuePair("user", "username"));
            nameValuePairs.add(new BasicNameValuePair("pass", "123"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);
            Log.e("log_tag", response.toString());

        } catch (ClientProtocolException e) {
             Log.e("log_tag", e.toString());
        } catch (IOException e) {
            Log.e("log_tag", e.toString());
        } 
```

完整日志：

```
08-19 12:42:16.365: I/System.out(5340): Sending WAIT chunk
08-19 12:42:16.365: W/ActivityThread(5340): Application com.example.equinetravels is waiting for the debugger on port 8100...
08-19 12:42:16.373: I/dalvikvm(5340): Debugger is active
08-19 12:42:16.373: I/System.out(5340): Debugger has connected
08-19 12:42:16.373: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:16.576: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:16.779: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:16.982: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:17.186: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:17.381: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:17.584: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:17.779: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:17.982: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:18.186: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:18.381: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:18.584: I/System.out(5340): waiting for debugger to settle...
08-19 12:42:18.787: I/System.out(5340): debugger has settled (1432)
08-19 12:42:19.037: D/libEGL(5340): loaded /system/lib/egl/libGLES_android.so
08-19 12:42:19.045: D/libEGL(5340): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
08-19 12:42:19.053: D/libEGL(5340): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
08-19 12:42:19.053: D/libEGL(5340): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
08-19 12:42:19.162: D/OpenGLRenderer(5340): Enabling debug mode 0
08-19 12:42:33.834: D/AndroidRuntime(5340): Shutting down VM
08-19 12:42:33.834: W/dalvikvm(5340): threadid=1: thread exiting with uncaught exception (group=0x40ab6210)
08-19 12:42:33.889: E/AndroidRuntime(5340): FATAL EXCEPTION: main
08-19 12:42:33.889: E/AndroidRuntime(5340): java.lang.IllegalStateException: Could not execute method of the activity
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.view.View$1.onClick(View.java:3046)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.view.View.performClick(View.java:3526)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.view.View$PerformClick.run(View.java:14133)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.os.Handler.handleCallback(Handler.java:605)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.os.Looper.loop(Looper.java:137)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.app.ActivityThread.main(ActivityThread.java:4697)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.lang.reflect.Method.invokeNative(Native Method)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.lang.reflect.Method.invoke(Method.java:511)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at dalvik.system.NativeStart.main(Native Method)
08-19 12:42:33.889: E/AndroidRuntime(5340): Caused by: java.lang.reflect.InvocationTargetException
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.lang.reflect.Method.invokeNative(Native Method)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.lang.reflect.Method.invoke(Method.java:511)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.view.View$1.onClick(View.java:3041)
08-19 12:42:33.889: E/AndroidRuntime(5340):     ... 11 more
08-19 12:42:33.889: E/AndroidRuntime(5340): Caused by: android.os.NetworkOnMainThreadException
08-19 12:42:33.889: E/AndroidRuntime(5340):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1119)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.net.InetAddress.lookupHostByName(InetAddress.java:441)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:243)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at com.example.equinetravels.MainActivity.postData(MainActivity.java:79)
08-19 12:42:33.889: E/AndroidRuntime(5340):     at com.example.equinetravels.MainActivity.sendLogon(MainActivity.java:47)
08-19 12:42:33.889: E/AndroidRuntime(5340):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:17:17.333

看起来你得到了 NetworkOnMainThreadException

尝试在不同的线程上运行它？

来自 Javadocs：

“当应用程序尝试在其主线程上执行网络操作时引发的异常。

这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:20:11.347

这是一个 NetworkOnMainThreadException ...您正在尝试在主线程上执行网络操作，在 Android 应用程序的主 UI 线程中是不允许的。

要解决此问题，请使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Thread](http://developer.android.com/reference/java/lang/Thread.html) 并将您的网络相关操作放入其中。

# iframe - 使用 JavaScript 将 Chrome 扩展注入 iFrame

> ID：12028291
> 
> 赞同：5
> 
> 时间：2012-08-19T16:59:43.403
> 
> 标签：iframe, google-chrome-extension, same-origin-policy

我正在开发一个 Chrome 扩展程序，它允许用户在新选项卡中将网站打开到 iframe 中。我的目标是允许他们通过从父窗口通过 JavaScript 注入代码来修改 CSS，但我被纯源​​问题阻止了。

有没有解决的办法？我知道我见过其他扩展做类似的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:51:22.267

我相信你正在寻找的是

```
chrome.tabs.executeScript 
```

设置`allFrames`为`true`

文档可以在这里找到[https://developer.chrome.com/extensions/tabs#method-executeScript](https://developer.chrome.com/extensions/tabs#method-executeScript)

这将允许您将内容脚本注入页面和该页面中的所有 iFrame。注入 CSS 也有类似的功能：）

# asp.net - 使用 ASP.NET 他们设计的使用方式

> ID：12028294
> 
> 赞同：1
> 
> 时间：2012-08-19T17:00:22.207
> 
> 标签：asp.net, modeling

几周前，我问了一个问题，我因为使用​​了一个古老的数据结构而受到了彻底的抨击。我有一些问题，为什么我不使用 ado.net 和存储过程，以及许多其他问题。这实际上困扰了我一个月，因为我不太习惯 ADO.NET 或存储过程。我只在为 web 编码时做过 php 编程。

***因此，请您告诉我（不必详细说明）我应该如何构建/建模我的 ASP.NET 页面。***

**今天它是这样工作的。**

*   我有一个 webservice 文件，里面有我所有的方法，这些方法 INSERT、UPDATE、DELTE 和 FETCH 数据。从我的代码隐藏文件中，我调用 webserive 类，并从 webform 传递内容。

*   我确实使用存储过程来检查登录名和密码。

    1.  我应该只使用存储过程吗？
    2.  如果是这种情况，我应该添加一些东西吗？
    3.  我应该让网络表单直接从代码隐藏到数据库吗？
    4.  我应该如何实现 ADO.NET？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:07:20.137

ORM 框架是一种比使用存储过程更“现代”的数据库方法。实体框架/Linq-to-Sql 是 MS 认可的，但 NHibernate 的存在时间更长。它很有用，因为它有助于将数据库逻辑与应用程序代码集成，并使您能够在编译时捕获错误（而不是等待存储过程在运行时中断）。

Asp.Net MVC 是另一个基于 Asp.Net 的 Web 框架，它集成了模型-视图-控制器模式。MVC 模式在 Web 开发人员中变得流行，作为一种~~避免意大利面条式代码~~分离业务逻辑、UI 和数据模型之间的问题的方法。

很难给出一揽子建议（我确信 ADO.Net/存储过程对于许多应用程序来说都很好）。但绝对值得检查新内容，以便您做出明智的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:07:57.337

我强烈支持使用存储过程。恕我直言，比内联 SQL 更安全。从您的 sqldatasource 调用存储过程并连接控件以向该过程提供输入参数。您始终可以构建实体数据模型以将数据层公开给 Web 应用程序。

# android - 广播接收器触发

> ID：12028299
> 
> 赞同：0
> 
> 时间：2012-08-19T17:01:41.773
> 
> 标签：android, broadcastreceiver

我想简单地从我的 AlarmManager Activity 调用 BroadClass Activity 中定义的一个函数。为此，我制作了一个广播接收器，我从 Alarmmanager Activity 触发它，但我没有得到任何回应

AlarmManager 活动（从这里触发广播）

```
 package com.mainActivity;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;

    public class AlarmManagerActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Intent intent = new Intent(AlarmManagerActivity.this,BroadClass.class);
            intent.setAction("BROADCAST_ACTION");
            sendBroadcast(intent);
    }
    } 
```

我定义了广播接收器的 BroadClass 活动

```
 package com.mainActivity;

    import android.app.Activity;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.os.Bundle;
    import android.widget.Toast;

    public class BroadClass extends Activity {

        public BroadcastReceiver broadCast;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            registerReceiver(new BroadcastReceiver() {

                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    // TODO Auto-generated method stub

                    Toast.makeText(BroadClass.this, "SDK Manager Activity", Toast.LENGTH_SHORT).show();

myFunction();   //which i want to call

                }
            },new IntentFilter("BROADCAST_ACTION"));

        }

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            IntentFilter filter = new IntentFilter();
            filter.addAction("BROADCAST_ACTION");
            registerReceiver(broadCast, filter);

            super.onResume();

        }

public void myFunction(){

//mycode here

    } 
```

请帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:04:27.423

改变

`Intent intent = new Intent(AlarmManagerActivity.this,BroadClass.class);`

到

`Intent intent = new Intent();`

还要确保接收器在发送广播时已注册。哦，离开活动时不要忘记取消注册接收器。否则你会得到讨厌的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:57:19.490

您是否尝试过删除 onResume 中的 BroadcastReceiver 设置？您正在使用空 IntentFilter 注册一个新的广播接收器。

请记住，onResume 始终在 onCreate 之后运行，并在您的情况下重置最初设置的过滤器。

# c# - 如何让 ScrollViewer 在 Windows Phone 中正常工作

> ID：12028306
> 
> 赞同：2
> 
> 时间：2012-08-19T17:02:35.247
> 
> 标签：c#, .net, windows-phone-7

我在我的应用程序页面上添加了一个 ScrollViewer 对象，并且我在 ScrollViewer 对象上添加了许多控件对象，但是使用该应用程序的最终用户无法查看所有元素，因为 Scroll 滚动得不够低，并且页面不断返回在用户有机会输入任何信息之前，它是原始位置。

这是我的 XAMLCode ：

```
<phone:PhoneApplicationPage 
    x:Class="WinHomeWork2.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True" Loaded="PhoneApplicationPage_Loaded">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="VOLKOV LTD" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="Agent_App" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <ScrollViewer
         Name="mainScrollViewer"
         Margin="0,175,0,0"
         VerticalScrollBarVisibility="Visible" AllowDrop="False" ManipulationMode="Control">

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="100"/>
                    <RowDefinition Height="300*"/>
                </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100*"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="200*"/>
            </Grid.ColumnDefinitions>

            <TextBox 
                Name="AgentName" 
                Height="80" 
                Grid.Row="0" 
                Grid.Column="3"
                />

            <TextBlock 
                Name="AgentNameTextBlock"
                FontSize="25"
                Text="Agent Name" 
                Grid.Row="0" 
                Grid.Column="0" 
                Grid.ColumnSpan="1" 
                />

            <TextBlock
                Name="PasswordTextBlock"
                Grid.Row="1"
                Grid.Column="0"
                Text="Password"
                FontSize="25"
                />

            <PasswordBox
                Name="Agent_Password"
                Height="80"
                Grid.Row="1"
                Grid.Column="3"
                />

            <CheckBox
                Name="myCheckbox"
                Grid.Row="2"
                Grid.Column="0"
                />

            <TextBlock 
                Name="checkboxTextBlock"
                Width="350"
                Height="30"
                Grid.Row="2"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Text="Was The Agent Undercover?"
                FontSize="25"
                />

      <!-- Insert Radiobuttons on the next 3 rows-->     

            <RadioButton
                Name="radioButton_CIA"
                GroupName="Agency"
                Grid.Row="3"
                Grid.Column="3"
                />

            <TextBlock Name="ciaTextBlock" Text="CIA" Grid.Column="3" Grid.Row="3" FontSize="25" Height="30" Width="160" Tap="ciaTextBlock_Tap" />

            <RadioButton
                Name="radioButton_FBI"
                GroupName="Agency"
                Grid.Row="4"
                Grid.Column="3"
                />

            <TextBlock Name="fbiTextBlock" Text="FBI" Grid.Row="4" Grid.Column="3" FontSize="25" Height="30" Width="160" Tap="fbiTextBlock_Tap" />

            <RadioButton
                Name="radioButton_MI6"
                GroupName="Agency"
                Grid.Row="5"
                Grid.Column="3"
                />

            <TextBlock Name="mi6TextBlock" Text="MI6" Grid.Row="5" Grid.Column="3" FontSize="25" Height="30" Width="160" Tap="mi6TextBlock_Tap" />

                <Button Name="enterBotton" Content="Go" Grid.Row="7" Grid.Column="3" FontSize="25" Click="enterBotton_Click"/>

                <ListBox  Name="myList" Grid.Row="6" Grid.Column="0" >
                <ListBoxItem Name="optionOne" Content="Find"/>
                <ListBoxItem Name="optionTwo" Content="Store"/>
                <ListBoxItem Name="optionThree" Content="Flip"/>
                </ListBox>

            </Grid>
        </ScrollViewer>
    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

请帮我！

这是背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace WinHomeWork2
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void enterBotton_Click(object sender, RoutedEventArgs e)
        {
            var Agent = new Agent()
            {
                AgentName = AgentName.Text,
                Password = Agent_Password.Password,
                RecordTime = DateTime.Now,
                Undercover = myCheckbox.IsChecked,
                Agency = getAgency()
            };
        }

       private string getAgency()
       {

           return (bool)radioButton_CIA.IsChecked? "CIA" : (bool)radioButton_FBI.IsChecked ? "FBI" : (bool)radioButton_MI6.IsChecked? "MI6" : null;
       }

       private void ciaTextBlock_Tap(object sender, GestureEventArgs e)
       {
           radioButton_CIA.IsChecked = true;
       }

       private void fbiTextBlock_Tap(object sender, GestureEventArgs e)
       {
           radioButton_FBI.IsChecked = true;
       }

       private void mi6TextBlock_Tap(object sender, GestureEventArgs e)
       {
           radioButton_MI6.IsChecked = true;
       }

       private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
       {
           AgentName.Focus();
       }

    }

    //Agent Class
    public class Agent
    {
        public Agent() { }
        public string AgentName { get; set; }
        public string Password { get; set; }
        public DateTime RecordTime { get; set; }
        public bool? Undercover { get; set; }
        public string Agency { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T17:37:59.647

定义 Scrollviewer 的高度以使其适合屏幕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T03:39:09.603

我想问题在于这两个陈述。您忘记更改 Grid.Row 值。请进行更改并重试

```
 <ScrollViewer Grid.Row="1"
     Name="mainScrollViewer"
     Margin="0,175,0,0"
     VerticalScrollBarVisibility="Visible" AllowDrop="False" ManipulationMode="Control">

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Margin="12,0,12,0"> 
```

# jquery - 没有从 jquery.ajax 跨域返回响应

> ID：12028310
> 
> 赞同：-2
> 
> 时间：2012-08-19T17:03:40.783
> 
> 标签：jquery, ajax, json

我是 jQuery.ajax 的新手，所以请多多包涵。我正在尝试创建一个表单，用于根据公共 api data.citycofchicago.org 验证地址。如果我直接点击 URL (http://data.cityofchicago.org/api/views/i6bp-fvbx/rows/1478.json)，我会看到 json 格式的页面。但是，我似乎没有使用 ajax 得到响应。这是我的代码：

```
<script LANGUAGE="JavaScript" SRC="/scripts/jquery-1.7.1.js"></script>
<script type="text/javascript">
$('document').ready(function(){
    $('#button').click(function(){
        $.ajax({
            type: 'get',
            url: 'http://data.cityofchicago.org/api/views/i6bp-fvbx/rows/1478.json',
            success: function() {
                    alert('Got a response!');
                }
        });
    });
}); 
```

如果我将 URL 更改为我网站上的内部页面，我会看到警告框。当我使用此 URL 时，我没有收到任何响应框。我尝试将数据类型设置为 json 和 jsonp 但没有。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:10:02.680

您不能只指定`dataType: jsonp`并期望一切正常。这样做是让 jQuery 负责 AJAX 调用的客户端部分，但您仍然需要调整服务器端部分以适应 JSONP。

基本上，当您指定 JSONP 时，jQuery 会自动发送一个`callback`带有随机生成值的参数，例如“jQuery4857439875349_489437589374”。您需要在服务器端代码中将返回的数据包装在指定的回调中，如下所示：

```
echo $_GET['callback']."(".json_encode($arr).")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:07:14.247

浏览器不支持 Ajax 跨域请求以阻止 XSS 或您网站上的恶意脚本。您只能在内部页面上使用 Ajax。这也适用于单独的子域。希望有帮助。

# c++ - Pi 的 C++ Chudnovsky 公式

> ID：12028313
> 
> 赞同：1
> 
> 时间：2012-08-19T17:04:18.150
> 
> 标签：c++, formula, pi

我正在尝试让 C++ 应用程序为我计算 pi。我试图实施 Chudnovsky 公式但没有运气。

这是我的代码：

```
#include <iostream>
#include <cmath>

long fac(long num) {
    if (num == 1)
        return 1;
    return fac(num - 1) * num;
}

int main() {
    using namespace std;
    double pi;
    for (long k = 0; k < 10; k++) {
        pi += (pow(-1, k) * fac(6 * k) * (13591409 + (545140134 * k))) / (fac(3 * k) * pow(fac(k), 3) * pow(640320, 3 * k + 3/2));
    }
    pi *= 12;
    cout << 1 / pi << endl;
    system("pause");
    return 0;
} 
```

这样做的目的是让程序输出 Chudnovsky 公式的 10 次迭代。相反，我得到了这个：

```
call of overloaded `pow(int, long int&)' is ambiguous 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T17:07:10.137

您从不初始化`pi`，因此您的代码具有未定义的行为。

您的`fac`函数无法正确处理`0`（`fac(0)`应该是`1`）。

`3/2`评估为`1`（因为它使用整数除法，它会截断），这会使您的公式评估为完全错误的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T17:28:28.277

你几乎肯定想在双打上做所有的数学运算，以避免大量浪费时间的转换。您可能还想使用迭代实现`fac`而不是递归实现（并不是说递归会成为一个*大*问题，但这是一个很好的例子，说明何时应该真正避免递归，因为它不会给您带来任何好处）。当然，您还需要`pi`像其他人已经指出的那样进行初始化。

```
#include <iostream>
#include <iomanip>
#include <cmath>

double fac(double num) {
    double result = 1.0;
    for (double i=2.0; i<num; i++)
       result *= i;
    return result;
}

int main() {
    using namespace std;
    double pi=0.0;
    for (double k = 0.0; k < 10.0; k++) {
        pi += (pow(-1.0,k) * fac(6.0 * k) * (13591409.0 + (545140134.0 * k))) 
            / (fac(3.0 * k) * pow(fac(k), 3.0) * pow(640320.0, 3.0 * k + 3.0/2.0));
    }
    pi *= 12.0;
    cout << setprecision(15) << 1.0 / pi << endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T17:21:07.793

pow(-1, k) 无效，因为它是从数学公式到代码的直接转换。

改用这个：

```
 (k%2==1?-1.0:1.0)*fac(... 
```

编辑：

此外，您的 fac 代码也远非最佳。

# python - 部署具有图形功能的平台独立 python 应用程序的最简单方法。

> ID：12028315
> 
> 赞同：2
> 
> 时间：2012-08-19T17:04:21.630
> 
> 标签：python, web-applications, jython, flask, bottle

假设我想编写一个简单的应用程序，让用户可以粘贴一两列数据，单击几个单选框，让我的代码处理这些数据并为它们显示一些图。在考虑以下注意事项的同时，开发和部署它的最佳方法是什么。

1）跨平台。在 windows、mac、linux 上运行，并且尽可能少的依赖项，因为用户可能不成熟。最好我什至不想要求他们安装python（例如Windows用户）。

2) 仅 Python（无 C 代码），可能使用 Tkinter 作为 GUI，因为它带有 Python。

3) 用户可能会担心隐私。通过网络发送数据可能是一个阻碍。理想情况下，它在本地运行。

想到的一些选择是

1.  使用 SimPy 绘图模块。以某种方式将所有这些组合在一个模块中。

2.  使用 Flask 或 Bottle 使其在浏览器中运行。也许使用 javascript/jquery 进行绘图，以便它可以在本地运行。

3.  使用 py2exe（或其他任何名称）部署两个版本以创建单独的 Windows 可执行文件，然后将 python 代码部署到 linux/mac。

4.  忘记python，只需用java或javascript编写即可。还是使用 Jython？

5.  只需制作一个在我自己的服务器上运行的 webapp。这让我可以自由地使用任何 python 模块（numpy、matplotlib 等），但会牺牲隐私和在本地（离线）运行的能力。

任何人都可以提供一些开发和部署这类应用程序的技巧吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:33:18.133

对你的问题有两个想法。

1.  你有没有考虑过使用[睡衣](http://pyjs.org/)建造。然后，您可以使用[pyjamasdesktop](http://wiki.python.org/moin/PyjamasDesktop)将其打包到桌面，并获得两全其美的效果。如果你想在线运行它，你可以，但如果你想让它离线可用，这是一个相当简单的过渡。

    该界面将基于 Web，因此，您将无法访问 Tkinter 的所有健壮性。但是，您可以用它来换取灵活性。

2.  [pyinstaller](http://www.pyinstaller.org/)可以让你为 mac 和 windows 平台创建打包格式。这样您就不必学习两个单独的工具来打包您的应用程序。

# visual-studio-2010 - Visual Studio 2010：无法将 Bing 搜索添加为服务引用。（DataServiceClientGenerator 失败）

> ID：12028323
> 
> 赞同：0
> 
> 时间：2012-08-19T17:05:49.610
> 
> 标签：visual-studio-2010, bing, bing-api, service-reference

我正在尝试在 Visual Studio 2010 中使用 Bing Web 搜索 API。按照[迁移指南](http://www.bing.com/webmaster/content/developers/ADM_MIGRATION_GUIDE.docx)，第一步是向我的项目添加服务引用。 ![添加服务参考](../Images/b24673cd28fafde72285058d70961162.png)

但是当我点击确定...

![数据服务客户端生成器](../Images/c8ab00392dc092a7091d79d2a8a27be6.png)

关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:05:39.967

您真的不需要向您的项目添加任何服务引用，只需添加 System.Data.Services.Client 引用，然后使用文档或下面的帖子中提供的代码片段。

我在下面的帖子中详细解释了它： [如何在 Windows Azure 上使用 Microsoft Translator API，用于 Windows Phone？](https://stackoverflow.com/questions/11001438/how-to-use-the-microsoft-translator-api-over-windows-azure-for-windows-phone)

# c - 程序的编程风格和变量数量以及正确的程序公式，并在很多条件下测试程序

> ID：12028327
> 
> 赞同：0
> 
> 时间：2012-08-19T17:06:16.300
> 
> 标签：c, variables, formula

看代码

```
#include <stdio.h>

#define TAX 5   /* Defines percentage of tax for the year */

int main(void)
{
    float amount;
    float taxes;
    float total;

    printf("Enter the value of the amount: ");
    scanf("%f", &amount);

    taxes = (TAX / amount); 
    total = amount + taxes;

    printf("The total amount is: $%.2f",total);
    return 0;
} 
```

这必须计算给定金额的 5% 的利息，我将公式税收替换为：税收 = (TAX / 金额) * 100
但是当我输入输入 i，e 金额小于 50 时，我得到愚蠢无意义的输出，什么是正确的公式，为什么我不知道如何处理较小的输入，谁能告诉我正确的方法。

我也想问一下风格，我为这个问题推出了程序，只是告诉我什么样的程序更好，我应该尽量减少变量数量还是应该在定义的 TAX 宏本身中直接计算税值。

```
#include <stdio.h>

#define TAX (5 / amount) * 100  /* Defines percentage of tax for the year */

int main(void)
{
    float amount;
    float total;

    printf("Enter the value of the amount: ");
    scanf("%f", &amount);

    total = amount + TAX

    printf("The total amount is: $%.2f",total);
    return 0;
} 
```

看这个

```
#include <stdio.h>

#define TAX 5   /* Defines percentage of tax for the year */

int main(void)
{
    float amount;
    float taxes;
    float total;

    printf("Enter the value of the amount: ");
    scanf("%f", &amount);

    taxes = (TAX / amount) * 100;
    total = amount + taxes;

    printf("The tax on your amount is: $%f",total);
    return 0;
} 
```

还有什么其他更好的方法来写这个，我应该如何得出一个公式，我仍然觉得它真的很简单，我不知道我为什么搞砸了。我已经从 C 编程 b KN King 一书中解决了很多练习，实际上几乎 90%，但是今天我想再次修改所有的概念，我被困在这件事上。

再次问题是：一个计算给定金额利率的程序，给定利率是5％，不难吧，尝试更小的金额值。

提前感谢所有提供建议和解决方案的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:41:14.213

所以，你的公式的问题在于，为了计算税收，你应该将税收百分比**作为小数**，然后**乘以**金额。因此，您需要取 5%，然后将其除以 100，使其成为十进制数。

就风格而言，您的第一个示例是最易读的，其变量名称可以“讲述一个故事”并准确显示您正在做什么。不过，我会消除该`tax`变量，除非您将其用于其他用途，因为它确实不需要。第二个是“坏的”，因为它*假设*有一个名为 的变量`amount`，如果你重用宏，它可能存在也可能不存在（如果你不重用它，为什么它首先是一个宏？） . 您可以使用带有参数的宏，但是您应该将其称为 CALCULATE_TAX 或其他名称，以便立即明显看出它正在计算某些内容，而不仅仅是一个常数。

无论如何，我会这样做：

```
#define TAX_RATE 0.05   /* Defines percentage of tax for the year as 5% (0.05) */

int main(void)
{
    double amount;
    double total;

    // Get the amount, there should be some error checking on the input though:
    printf("Enter the value of the amount: ");
    scanf("%f", &amount);

    // Calculate the total amount, with taxes and print it:
    total = amount + TAX_RATE * amount;
    printf("The total amount is: $%.2f",total);

    return 0;
} 
```

# ruby-on-rails - rails 3 是否提供了在模型内部添加过滤器的选项，例如验证？

> ID：12028329
> 
> 赞同：0
> 
> 时间：2012-08-19T17:06:31.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, filter, ruby-on-rails-3.2, rails-models

示例案例-如何添加过滤器以去除所有 html 标签（此代码不起作用，只是我需要获取的伪代码）：

```
class Person < ActiveRecord::Base
  validates :name, :presence => true
  #psedocode:
  **filters:name,:strip_tags=>true**
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:11:04.273

是的，ActiveRecord 有一堆你可以利用的[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)，例如 before_save、before_validation 等。你可以这样做：

```
class Person < ActiveRecord::Base
  before_save :strip_tags

  private

  def strip_tags
    self.name = name.gsub(TAGS, '')
  end
end 
```

[Rails 指南中有关 ActiveRecord 回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)的更多信息

# windows-8 - Metro App 定期更新 Tile

> ID：12028331
> 
> 赞同：0
> 
> 时间：2012-08-19T17:06:42.983
> 
> 标签：windows-8, microsoft-metro

我在使用应用程序时遇到`Live Tiles`问题`Metro`。

长话短说，是否可以创建例如一个**时钟**应用程序，在其磁贴中显示时钟？即使它没有运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:15:18.323

不可以。Tile 的更新频率不足以代表一个好的时钟。以下是[通知传递方法](http://msdn.microsoft.com/en-us/library/windows/apps/Hh779721.aspx)。

# mysql - 通过向数据库名称添加前缀来从转储中恢复 mysql

> ID：12028332
> 
> 赞同：0
> 
> 时间：2012-08-19T17:06:51.727
> 
> 标签：mysql, mysqldump, database-restore

有没有办法从带有 --all-databases 选项的 mysqldump 命令创建的转储文件中恢复 mysql 数据库，并自动将前缀添加到所有恢复的数据库中

老喜欢

*   old_db1
*   old_db2

等等......或者有没有选择跳过现有数据库？

# ruby-on-rails-3 - 将 CSV 文件播种到 Rails 应用程序时遇到问题

> ID：12028334
> 
> 赞同：6
> 
> 时间：2012-08-19T17:06:58.180
> 
> 标签：ruby-on-rails-3, sqlite, csv, seed

我正在尝试将大约 2K 记录播种到模型中，并且到目前为止我已经尝试使用所有不同的方法（[更快的 csv](https://github.com/JEG2/faster_csv)、[fast_seeder](https://github.com/greyblake/fast_seeder)和[railscasts ep](http://railscasts.com/episodes/179-seed-data)）。我觉得这应该很简单。我已经将所有数据保存在一个 CSV 文件中，并且我已经建立了模型，准备好播种。

到目前为止，唯一有效的是 RailsCasts 集中显示的内容。我为我的属性插入了这段代码，它只播种了第一行（2K 之外），就是这样：

```
Country.delete_all
open("#{Rails.root}/path_to_my_file") do |models|
  models.read.each_line do |model|
     column_1, column_2, column_3, column_4 = model.chomp.split(",")
     Model.create!(:attr_1 => column_1, :attr_2 => column_2, ...etc)
  end
end 
```

然后我根据其他一些问题尝试使用`FasterCSV`，但我收到一堆错误说`fastercsv`已经包含在最新版本的 ruby​​ 中，我似乎无法弄清楚（这可能是我的错，但我没有'无法找到一个很好的 SO 问题来很好地说明它）。

最后，`Fast_Seeder`似乎有一些潜力，它识别了我所有的条目，但没有将它们中的任何一个保存到模型中，因为我收到了这个错误：

`SQLite3::SQLException: too many terms in compound SELECT:(all my columns)`

无论如何，我再次觉得这应该很简单。我只有一个包含 2K 条目的 CSV，以及一个需要播种的空白模型。最好的方法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T09:02:26.953

我在这方面看到的最大成功是通过执行 rake 任务。

```
require 'csv'

namespace :csv do

  desc "Import CSV Data"
  task :import_stuff => :environment do

    csv_file_path = 'db/data.csv'

    CSV.foreach(csv_file_path) do |row|
      Model.create!({
        :column1 => row[0],
        :column2 => row[1],
        :column3 => row[2],        
      })
      puts "Row added!"
    end
  end
end 
```

把它放在你的 lib/tasks 文件夹中，扩展名为 .rake 并运行它：“rake csv:import_stuff”

此外，您可能会在使用 SQL lite 时遇到一些限制……我建议您查看 MongoDB。它似乎适合您目前的情况。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T17:32:19.927

看来我想通了，抱歉。如果需要改进，我将不胜感激对此代码的一些评论。

无论如何，我想我是用fasterCSV（或只是CSV）想出来的。这似乎奏效了：

```
require 'csv'

Model.delete_all
CSV.foreach("#{Rails.root}/lib/data/model.csv") do |row|
     Model.create!(:attr_1 => row[0], :attr_2 => row[1], :attr_3 => row[2], etc)
end 
```

# r - 子集图中的边距

> ID：12028339
> 
> 赞同：0
> 
> 时间：2012-08-19T17:07:13.087
> 
> 标签：r, graphics, plot, margin

当我们选择整个数据范围时，我们会在绘图区域内得到一个带有微小边距的绘图，这样绘图就不会触及边界框。但是，当我们对绘图进行子集化时，边距消失了。有没有办法添加这个边距？在下图中，我希望这条线一直到 5，但不要再进一步了。我浏览了`?par`列表，但找不到可用的东西。

```
plot(1:10, 1:10, type = "l")
plot(1:10, 1:10, type = "l", xlim = c(1, 5)) 
```

![在此处输入图像描述](../Images/30983e459f0cc8803168d3445bccfc81.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:19:41.937

这似乎是一种非常迂回的方式，但这是您提供的示例的一种可能性：

```
plot(1:10, 1:10, type = "n", xlim = c(1, 5))
usr = par("usr")
clip(usr[1], 5, usr[3], usr[4])
lines(1:10, 1:10, type = "l", xlim = c(1, 5)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:04:39.077

您表达的担忧是不喜欢如何`plot.default`处理传递给 xy.coords 的对象的限制。您希望它们受到限制或子集化。您可以通过定义具有这些附加功能的新绘图函数来做到这一点：

```
 # need a helper function for this
 tweak <- function(x) c(range(x)[1], range(x)[2]+.00001)
 # Replace xy <- xy.coords(x, y, xlabel, ylabel, log)
 xy <- xy.coords(x[findInterval(x, tweak(xlim))==1], 
                 y[findInterval(x, tweak(xlim))==1], 
                 xlabel, ylabel, log) 
```

如果您的意图是保留 ylimit，则需要在调用或代码中指定它们。我的偏好是在通话中进行，但我将其说明为自动完成。

```
plotsub <- function(x,y = NULL, type = "p", xlim = NULL, ylim = NULL, 
    log = "", main = NULL, sub = NULL, xlab = NULL, ylab = NULL, 
    ann = par("ann"), axes = TRUE, frame.plot = axes, panel.first = NULL, 
    panel.last = NULL, asp = NA, ...) 
{   ylim=range(y);  tweak <- function(x) c(range(x)[1], range(x)[2]+.00001)
    localAxis <- function(..., col, bg, pch, cex, lty, lwd) Axis(...)
    localBox <- function(..., col, bg, pch, cex, lty, lwd) box(...)
    localWindow <- function(..., col, bg, pch, cex, lty, lwd) plot.window(...)
    localTitle <- function(..., col, bg, pch, cex, lty, lwd) title(...)
    xlabel <- if (!missing(x)) 
        deparse(substitute(x))
    ylabel <- if (!missing(y)) 
        deparse(substitute(y))
    xy <- xy.coords(x[findInterval(x, tweak(xlim))==1], y[findInterval(x,tweak(xlim))==1], xlabel, ylabel, log)
    xlab <- if (is.null(xlab)) 
        xy$xlab
    else xlab
    ylab <- if (is.null(ylab)) 
        xy$ylab
    else ylab
    xlim <- if (is.null(xlim)) 
        range(xy$x[is.finite(xy$x)])
    else xlim
    ylim <- if (is.null(ylim)) 
        range(xy$y[is.finite(xy$y)])
    else ylim
    dev.hold()
    on.exit(dev.flush())
    plot.new()
    localWindow(xlim, ylim, log, asp, ...)
    panel.first
    plot.xy(xy, type, ...)
    panel.last
    if (axes) {
        localAxis(if (is.null(y)) 
            xy$x
        else x, side = 1, ...)
        localAxis(if (is.null(y)) 
            x
        else y, side = 2, ...)
    }
    if (frame.plot) 
        localBox(...)
    if (ann) 
        localTitle(main = main, sub = sub, xlab = xlab, ylab = ylab, 
            ...)
    invisible()
} 
```

来电：

```
plotsub(1:10, 1:10, type = "l", xlim = c(1, 5), ylim=c(1,10) ) 
```

![在此处输入图像描述](../Images/6a0b04dceff24142e821903a4c6dda5b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:14:32.573

您不是对数据进行子集化，而是对绘图设置限制。先验子集为您提供所需的行为。

```
plot(1:5, 1:5, type = "l") 
```

# javascript - 使用 ！in 运算符在它应该为真时返回假，为什么？

> ID：12028348
> 
> 赞同：2
> 
> 时间：2012-08-19T17:08:28.220
> 
> 标签：javascript, node.js

在 Javascript 中，以下代码的工作方式如下：

```
> var foo = { bar: 1 }
undefined
> foo
{ bar: 1 }
> 'bar' in foo
true
> !'bar' in foo
false
> 'baz' in foo
false
> !'baz' in foo
false 
```

为什么在检查对象是否不包含属性时使用`!`而不`in`返回？`true`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T17:09:46.143

您需要 do `!('baz' in foo)`，否则它与`(!'baz') in foo`（查找`'false' in foo`）相同，原因是运算符优先级。

```
!'foo' in {false: true} //as in 'false' in {false: true}
//true

!('foo' in {false: true}) //as in, does a key "foo" not exist in the object
//true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T17:10:07.177

你需要使用`!`反对的结果 `in`

```
!("key" in object) 
```

现在是这样的。

```
(!"key") in object 
```

这和做的一样

```
false in object 
```

变成

```
"false" in object 
```

# actionscript-3 - 无限预加载器

> ID：12028356
> 
> 赞同：0
> 
> 时间：2012-08-19T17:10:07.067
> 
> 标签：actionscript-3, flash, preloader

我的预加载器有问题。并且不知道如何纠正它。

问题是。使用 Chrome 时，预加载器显示无穷大。我在服务器中看到了一些解决方案，例如 gZip Compression。

我想从闪存方面了解任何其他解决方案。因为我正在开发游戏，我们可以在任何地方玩。

我希望尽快解决。有人帮我做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:15:56.190

当我在预加载器上苦苦挣扎时，[这个](http://www.senocular.com/flash/tutorials/preloading/)页面帮助了我大量的 as2 和一般概念，[这个](http://www.republicofcode.com/tutorials/flash/as3preloader/)页面帮助我在 as3 中做到了

基本思想是监听进度事件并使用您需要下载的总量和您已经拥有的当前字节数进行简单的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:46:06.787

当未正确填充 bytesTotal 时，您有时可能会在这些计算中得到无穷大。

做类似的事情是个好习惯

```
var loadper:Number = 0;
if (this.loaderInfo.bytesTotal >= 0) 
{
    loadper = Math.round((this.loaderInfo.bytesLoaded/this.loaderInfo.bytesTotal)*100);
}
... 
```

有很多原因可能会返回 0 字节作为总数，但通常它与您从服务器传递文件的方式有关。

# android - 在我的应用程序运行时锁定其他应用程序

> ID：12028357
> 
> 赞同：3
> 
> 时间：2012-08-19T17:10:14.370
> 
> 标签：android

> **可能重复：**
> [Android：应用程序保护器应用程序如何工作？](https://stackoverflow.com/questions/4838546/android-how-does-application-protector-app-work)

重述：APP Lock 和 Smart App Protector 等应用程序以某种方式在应用程序的图标和应用程序之间建立了链接，并在它们之间放置了一个子例程（？），因此在应用程序启动之前需要密码，而不是在图标之后立即启动应用程序被按下。这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:14:32.870

通过编写自定义系统映像并将其刷新到未锁定的设备上。您所描述的内容在很大程度上被认为是恶意软件行为，基本 Android 系统不允许这样做。

你想达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:20:46.977

Android 社​​区认为您尝试做的事情不符合道德标准，您的应用程序有可能最终被列为恶意软件。

无论如何，可以通过使您的应用程序进入全屏并禁用/覆盖主页按钮和后退按钮来完成。在极端情况下，您还可以定义一个 BroadcastReceiver 以在手机重新启动并启动完成时自动启动应用程序。

这样，唯一可以在设备上运行的将是您的应用程序，因为即使用户关闭设备，BroadcastReceiver 也会在设备再次重新启动时立即启动应用程序。

**注意：**在 ICS 版本之后无法覆盖 Home 按钮，但您仍然可以通过将其定义为 Launcher 来限制用户仅使用您的应用程序，这样按下 Home 按钮只会重新启动您的应用程序，而不是将用户带到主屏幕。

# objective-c - 没有 UITableViewController 代码的 UITableView 不起作用

> ID：12028358
> 
> 赞同：0
> 
> 时间：2012-08-19T17:10:23.433
> 
> 标签：objective-c, ios, nsmutablearray, uitableview

我在普通 UIViewController 中使用了以下代码以及其他一些内容，表格视图位于视图的底部：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 // Return the number of rows in the section.
    return [names count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"namen";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    NSString *cellValue = [names objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    return cell;
} 
```

还有一个名为 names 的 NSMutableArray（有 4 个对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:16:49.857

您需要设置表格视图的[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)并[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)给您的 UIViewController，并为这两种协议实现所需的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:14:12.027

您可能忘记将视图控制器设置为表格视图`dataSource`（`UITableViewController`自动执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:16:14.660

此代码也不适用于 UITableViewController……您需要在`-tableView:cellForRowAtIndexPath:`. 当您使单元格出列时，如果没有可以出列的单元格，则返回值可能为 nil。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"namen";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Create the cell if it could not be dequeued
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    // Configure the cell...
    NSString *cellValue = [names objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    return cell;
} 
```

# ruby-on-rails - 如何测量 puma 部署中每个线程使用的内存量？

> ID：12028361
> 
> 赞同：4
> 
> 时间：2012-08-19T17:10:48.017
> 
> 标签：ruby-on-rails, memory, benchmarking, rack, puma

在 puma 上运行的 threadsafe rails 应用程序中，如何测量每个线程使用多少内存？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T04:09:30.930

随着线程数的增加，绘制进程的内存使用情况。

# ruby - 数学循环 - 警告：已初始化常量 MathResults

> ID：12028362
> 
> 赞同：0
> 
> 时间：2012-08-19T17:10:56.380
> 
> 标签：ruby

我正在尝试对数组的一部分进行一些数学运算。然后我想增加更多的数学。但是我不知道如何正确地做到这一点。

下面的代码只是简单地将 3 列 csv 数据放入 1 个数组中。然后对其进行数学运算。

```
require 'csv'

csv_data = 'data.csv'

Location = []
  CSV.foreach(csv_data,'r') {|row| Location << row[0]}
Data1 = []
  CSV.foreach(csv_data,'r') {|row| Data1 << row[1]}
Data2 = []
  CSV.foreach(csv_data,'r') {|row| Data2 << row[2]}

index = 500
indexmax = 510

while index < indexmax
MathResults = Data1[index].to_f - Data2[index-1].to_f
index += 1
puts MathResults
end 
```

如果我将 MathResults 放在 while 循环之上，我显然会得到 10 次相同的结果。如果我把它放在循环中，我会得到 10 种不同的结果，但会出现很多错误：警告：已经初始化常量 MathResults

我知道这仍然可以使用，但错误必须告诉我我应该以不同的方式做事。

所以我想知道是否有人可以告诉我。

谢谢！

编辑：添加一件事。我意识到我有 3 个数组，只有 2 个在使用中。Location数组是在搜索到正确的位置后，稍后填写索引变量。而不是说只有 500。别担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:14:58.247

您可能应该使用普通变量而不是常量（math_results 而不是 MathResults）。

# emacs - 新窗口中的类似文档

> ID：12028365
> 
> 赞同：0
> 
> 时间：2012-08-19T17:11:09.187
> 
> 标签：emacs, elisp

我正在寻找一个非交互式函数，它将采用名称，并在新窗口中显示其文档，尊重文档字符串中引用的“链接”。

我能找到的只有：

*   `apropos`，这需要一个交互式的中间步骤，并且
*   `documentation`，它返回纯字符串，忽略提到的“链接”。

有没有可以两全其美的功能？如果不是，如何组合它（即从引用的单词生成链接'like this'）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:21:13.583

帮助功能也可以非交互方式调用：

```
(describe-function 'forward-char) 
```

这将在新窗口中显示文档（变量`help-window-select`控制显示的位置）。

如果您想要一个既适用于函数又适用于变量的函数，那么这是一种可能的方法：

```
(defun my-describe-stuff (symbol)
  (if (functionp symbol)
      (describe-function symbol)
    (if (boundp symbol)
        (describe-variable symbol)))) 
```

# python - 何时使用 wx.App 和 PySimpleApp

> ID：12028368
> 
> 赞同：4
> 
> 时间：2012-08-19T17:11:59.313
> 
> 标签：python, wxpython

我不知道何时何地使用 wx.App 和 PySimpleApp

像两个代码：

```
#!/usr/bin/env python

import wx
import wx.py.images as images

class ToolbarFrame(wx.Frame):

    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, 'Toolbars',
                size=(300, 200))
        panel = wx.Panel(self)
        panel.SetBackgroundColour('White')
class App(wx.App):
    def OnInit(self):
        frame = ToolbarFrame(parent=None, id=-1)
        frame.Show()
        return True
if __name__ == '__main__':
    app = App()

    app.MainLoop() 
```

这个代码：

```
#!/usr/bin/env python

import wx

class ToolbarFrame(wx.Frame):

    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, 'Toolbars',
                size=(300, 200))
        panel = wx.Panel(self)
        panel.SetBackgroundColour('White')

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = ToolbarFrame(parent=None, id=-1)
    frame.Show()
    app.MainLoop() 
```

有什么区别吗？另一个小部件的另一个问题是 wx.Frame() 或 wx.App() 之类的按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T21:18:55.583

如今，这两个类之间几乎没有区别。

当 wxPython 项目开始时，`wx.PySimpleApp`并且`wx.App`具有不同的行为（后者更底层并且没有`OnInit`定义默认方法，而`PySimpleApp`可以实例化并用于完成工作的类）。此外，某些 wxPython 版本的`wx.App`类具有默认`OnInit`定义但默认不调用`wx.InitAllImageHandlers`的类。

现在`wx.PySimpleApp`主要是出于兼容性的原因留在 API 中，并且两个类之间没有区别。

# php - $wpdb->get_results() 不工作

> ID：12028370
> 
> 赞同：1
> 
> 时间：2012-08-19T17:12:06.803
> 
> 标签：php, wordpress

我正在创建自己喜欢的帖子解决方案，因为该插件不起作用。所以我在我的 WP 数据库中创建了一个名为 wp_favorites 的新表，其中包含 2 个 cols 用户 ID 和帖子 ID。我已经完成了插入并且它有效。我在从表中获取数据时遇到问题。这是代码：

```
function is_favorite($pid, $uid) 
{
    global $wpdb;

    $q = $wpdb->prepare("SELECT * FROM wp_favorites WHERE uid=$uid AND pid=$pid;");
    echo $q;
    $res = $wpdb->get_results($q);
    var_dump($res);
    return(count($res)>0);
} 
```

当我复制输出 ($q) 并将其插入 PHPmyAdmin 时，它可以完美运行。但是， $res 的输出始终是一个空数组 (array(0) { } )，我在没有准备的情况下尝试过，还有其他一些变体，但我无法让它工作。

当我尝试显示最喜欢的帖子时也会发生同样的事情。

```
 <?php
/*
Template Name: Favorites
*/
?>

<?php 

get_header();
get_sidebar();

global $wpdb;
$q = "
    SELECT * FROM wp_favorites
    LEFT JOIN wp_posts ON wp_favorites.pID = wp_posts.ID
    WHERE wp_favorites.uID = 1      
";

 $pageposts = $wpdb->get_results($q, OBJECT);

 var_dump($pageposts);

?>

    <div id='content_and_floater'>

        <?php get_template_part('social_floater'); ?>
        <div id='content'>
            <?php get_template_part('loop'); ?>
        </div>

    </div>

<?php
get_footer();
?> 
```

结果又是一个空数组。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-12T15:46:11.293

问题是sql语句 $q = $wpdb->prepare("SELECT * FROM wp_favorites WHERE uid=$uid AND pid=$pid;");

当您使用 prepare 时，您需要使用 placeholders 。我在这里更正了代码：

```
$uid='3';// you can assign correct digits
$pid='5';$q = $wpdb->prepare("SELECT * FROM wp_favorites WHERE uid=%d AND pid=%d", $uid, $pid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T07:28:58.987

我也坐在这个问题上。我通过 Mysql Workbench 运行查询并返回结果。然后运行程序并且不返回任何结果。

我的问题是我在工作台中更改了一个值并且没有提交我的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:42:50.047

**示例数据库表**

```
| uid | pid |
|-----|-----|
| 1   | 10  |
| 1   | 5   | 
```

**PHP 函数和测试用例**

```
function is_favorite($pid, $uid)
{
  global $wpdb;
  $results = $wpdb->get_results( $wpdb->prepare("SELECT * FROM wp_favorites WHERE uid=$uid AND pid=$pid"), ARRAY_A );
  print_r($results);
  return (count($results) > 0);
}

echo 'Test 1';
$test1 = $this->is_favorite(10, 1);
var_dump($test1);

echo 'Test 2';
$test2 = $this->is_favorite(100, 1);
var_dump($test1); 
```

**测试结果/打印输出**

```
Test 1
Array
(
    [0] => Array
        (
            [uid] => 1
            [pid] => 10
        )

)
bool(true)

Test 2
Array
(
)
bool(true) 
```

在 WordPress 3.4.1 上测试

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-26T02:06:53.420

我*相信*应该`get_result()`不是`get_results()`。

# windows - 如何更改 Windows 中的命令行提示符？

> ID：12028372
> 
> 赞同：62
> 
> 时间：2012-08-19T17:12:23.493
> 
> 标签：windows, cmd, prompt

如何将命令行提示符更改为控制台？

我一直在寻找[控制台功能 API](https://docs.microsoft.com/en-us/windows/console/console-functions)，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-19T17:18:01.067

有 PROMPT 环境变量：

```
set PROMPT=$P$G 
```

`$P$G`是默认值，为您提供通常的`C:\>`类型输出。这里有更多[可用](http://www.hanselman.com/blog/ABetterPROMPTForCMDEXEOrCoolPromptEnvironmentVariablesAndANiceTransparentMultiprompt.aspx)的格式变量。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-09-23T17:15:30.010

另一种可能性是设置`PROMPT`环境变量（实际上是[`PROMPT`命令](http://ss64.com/nt/prompt.html)所做的）。

**这种方法的优点是您可以轻松地在系统范围内设置它，并且不需要任何脚本、编辑 Windows 注册表等。无论您如何打开它，它都适用于任何控制台窗口。**

您可以使用两种方法来完成，GUI 和命令行。

## 1.图形界面方法

只需按`Win`+ `Pause/Break`（打开*系统属性*），单击*高级系统设置*、*环境变量*并创建一个新的用户或系统变量，并将`PROMPT`其值设置为您希望提示看起来像的任何值。系统变量将为所有用户设置它。

[您可以通过本文](http://www.hanselman.com/blog/ABetterPROMPTForCMDEXEOrCoolPromptEnvironmentVariablesAndANiceTransparentMultiprompt.aspx)中的图片看到它。

## 2.命令行方式

另一种`PROMPT`永久设置环境变量的方法是使用[`SETX`命令](http://ss64.com/nt/setx.html)：

```
setx PROMPT <your-prompt-format> 
```

如果要为所有用户设置它，只需添加`/M`开关：

```
setx PROMPT /M <your-prompt-format> 
```

## 3.注册表方法

事实上，之前的两种方法都只是`PROMPT`在注册表中创建了一个名为的字符串值。对于当前用户，它在 key 下`HKEY_CURRENT_USER\Environment`，系统范围内的所有用户都在 key 下`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment`。

* * *

有关提示格式的详细信息，请查看[此页面](http://ss64.com/nt/prompt.html)或其他答案。

**注意：**您可能必须*重新启动系统*（或者可能只是退出并登录）才能使更改生效。至少，您必须关闭并重新启动应用程序（控制台），以便它加载新的或更改的环境变量。如果由于某种原因做不到，可以使用以下方法：

## 4.命令行方式（临时）

如果你执行[`PROMPT`命令](http://ss64.com/nt/prompt.html)，它会`PROMPT`在你的本地上下文中设置环境变量，所以它会立即生效，但直到控制台关闭。它不是永久存储的。

```
prompt <your-prompt-format> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-07-14T19:25:43.277

使用[帮助](https://ss64.com/nt/help.html)：

```
C:\Windows-15:21:07.12> help PROMPT

Changes the cmd.exe command prompt.

PROMPT [text]

  text    Specifies a new command prompt.

Prompt can be made up of normal characters and the following special codes:

  $A   & (Ampersand)
  $B   | (pipe)
  $C   ( (Left parenthesis)
  $D   Current date
  $E   Escape code (ASCII code 27)
  $F   ) (Right parenthesis)
  $G   > (greater-than sign)
  $H   Backspace (erases previous character)
  $L   < (less-than sign)
  $N   Current drive
  $P   Current drive and path
  $Q   = (equal sign)
  $S     (space)
  $T   Current time
  $V   Windows version number
  $_   Carriage return and linefeed
  $$   $ (dollar sign)

If Command Extensions are enabled, the PROMPT command supports
the following additional formatting characters:

  $+   zero or more plus sign (+) characters depending upon the
       depth of the PUSHD directory stack, one character for each
       level pushed.

  $M   Displays the remote name associated with the current drive
       letter or the empty string if the current drive is not a network
       drive. 
```

[*“命令扩展”*](https://ss64.com/nt/cmd.html)[的参考](https://ss64.com/nt/cmd.html)（例如*“命令扩展默认启用。”*）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-19T19:47:25.583

命令是：

```
prompt yourPrompt 
```

完整的选项列表位于[Microsoft Windows XP - 提示](https://web.archive.org/web/20170412235324/http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/prompt.mspx?mfr=true "https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/prompt.mspx?mfr=true 的存档")

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-13T16:00:44.873

我在搜索如何将[PROMPT](https://ss64.com/nt/prompt.html)命令保存为在启动命令提示符时始终运行时发现了这篇文章。它适用于任何版本的 Windows。

*   单击开始菜单 →*运行*。
*   在“*运行”*对话框中，键入不带引号的“regedit”，然后单击`OK`。
*   从注册表编辑器中，选择`HKEY_CURRENT_USER\Software\Microsoft\Command Processor`.
*   如果*AutoRun*值不存在，请右键单击并单击*New* → *Expandable String Value*。将值命名为“AutoRun”，不带引号。
*   双击*自动运行*值。
*   在数据下，添加“提示”和您要为提示设置的值。在我的示例中，“提示 $p$_$g”。
*   单击确定。
*   重复上述步骤`HKEY_LOCAL_MACHINE\Software\Microsoft\Command Processor`以将更改应用到所有用户。
*   关闭注册表编辑器。
*   如果打开，请关闭命令提示符，然后再次打开它。您输入的提示现在已使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-15T09:34:10.640

如果要保存更改，请使用

```
 setx prompt < format > 
```

如果您只想使用一次

```
prompt < format > 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-19T20:02:33.370

我使用一个名为 DOSbox.bat 的批处理文件来设置我需要的任何环境字符串，并且我的桌面上有一个快捷方式。“目标：”框中的命令是 C:\Windows\System32\cmd.exe /k DOSbox.bat。我有一个快捷键 (Ctrl+Alt_D) 来调用它，并将“开始于”设置为我的首选目录。该快捷方式还允许设置命令窗口的字体、颜色和位置。

批处理文件的内容目前是：

```
@echo off
set dircmd=/ogne
prompt [$p]$_$g 
```

提示在括号中显示目录，而“>”则单独显示在一行中。这对于非常长的路径很有用。

# ruby-on-rails-3 - rails3 缓存：expire_action，参数由 caches_action(GET) 缓存

> ID：12028374
> 
> 赞同：3
> 
> 时间：2012-08-19T17:12:29.720
> 
> 标签：ruby-on-rails-3, action-caching

我正在开发一种搜索功能，在输入内容时进行 ajax 调用以获取结果。我想在 memory_cache 中使用搜索关键字缓存搜索操作，所以我这样做：

```
# caches_action with GET parameters

caches_action :search_posts, :cache_path => Proc.new { |c| c.params } 
```

我的问题是我如何也可以使带有参数的操作过期？还有其他方法可以使我的功能正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T14:36:34.370

您有几个选项可以使这种缓存过期。

第一个（更简单的一个）是将 :expires_in 选项添加到您的 caches_action 语句 - 例如：

```
caches_action :search_posts, :cache_path => Proc.new { |c| c.params }, :expires_in => 16.hours.to_i 
```

这将在一段时间后自动使此密钥过期。

或者您可以使用控制器中的 expire_action 方法使此缓存过期。它应该是这样的：

```
expire_action :action => 'posts', :q => 'query' 
```

假设您已使用一个参数 q=query 请求此页面。

[您可以在官方文档](http://guides.rubyonrails.org/v3.2.13/caching_with_rails.html#action-caching)中阅读更多内容。

# java - 如何在 jtree 中制作组合框，显示其菜单？

> ID：12028375
> 
> 赞同：3
> 
> 时间：2012-08-19T17:12:32.887
> 
> 标签：java, swing, jcombobox, jtree

我基本上有一个 JTree，我可以在其中显示某些信息。在其中一个“子树”中，我得到了一个面板，该面板由一个带有 GridLayout(0,2) 的面板和一个 JPanel 以及一个组合框组成。

我注意到我的树中没有任何组件对输入做出反应。这当然意味着我的组合框在我尝试点击它时不会做出反应。我试图实现一个默认的单元格编辑器，它可以工作但不像我想要的那样。它基本上打开了菜单，但是当我选择其中一个项目时，它取代了 JLabel，因此只有组合框可见。

**图片**

在点击框之前![在此处输入图像描述](../Images/ae01d73fee383c5fd63ba93e2f32c1eb.png)

点击框后![在此处输入图像描述](../Images/ed0087e67720e1979d8de0e3c390f927.png)

我尝试过的代码

```
 TreeCellEditor editor = new DefaultCellEditor(blockedAlternatives);
                infoTree.setEditable(true);
                infoTree.setCellEditor(editor); 
```

我显然不想能够编辑整个树，我只想能够显示组合框的菜单。我只是从网上获取这段代码进行测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:48:26.667

> 它基本上打开了菜单，但是当我选择其中一个项目时，它取代了 JLabel，因此只有组合框可见。

嗯，这就是你所期望的，因为这就是它的`DefaultCellEditor(JComboBox jcb)`本意：

```
 import java.awt.BorderLayout;
    import java.util.Properties;
    import javax.swing.*;
    import javax.swing.tree.TreeCellEditor;

    public class TreeEditJComboBox {

        public static void main(String args[]) {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            Properties props = System.getProperties();
            JTree tree = new JTree(props);

            JComboBox comboBox = new JComboBox(new String[]{"A", "B", "C"});
            TreeCellEditor editor = new DefaultCellEditor(comboBox);

            tree.setEditable(true);
            tree.setCellEditor(editor);

            JScrollPane scrollPane = new JScrollPane(tree);
            frame.add(scrollPane, BorderLayout.CENTER);
            frame.setSize(300, 150);
            frame.setVisible(true);
        }

    }
} 
```

您可以尝试制作自己的`DefaultCellEditor`并覆盖`getTableCellEditorComponent()`，然后返回`JPanel`包含`JLabel`and的 a `JComboBox`，例如：

```
class MyDefaultCellEditor extends DefaultCellEditor {

public MyDefaultCellEditor(JComboBox comboBox) {
    super(comboBox);
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
   //return custom coponent
    return super.getTableCellEditorComponent(table, value, isSelected, row, column);
}
} 
```

然后：

```
 TreeCellEditor editor = new MyDefaultCellEditor(blockedAlternatives); 
```

您可能还必须覆盖其他一些方法。我只是展示逻辑

**参考：**

*   [创建一个 DefaultCellEditor：JComboBox](http://www.java2s.com/Tutorial/Java/0240__Swing/CreatingaDefaultCellEditorJComboBox.htm)

*   [扩展 DefaultCellEditor](http://www.java2s.com/Tutorial/Java/0240__Swing/extendsDefaultCellEditor.htm)

# android - Wrap_content 开始新的一行

> ID：12028380
> 
> 赞同：0
> 
> 时间：2012-08-19T17:13:48.453
> 
> 标签：android, textview

我真的不知道我应该搜索什么，所以我决定在这里问。我有一个 TextView，我希望它被我的内容包裹但不超过应用程序的宽度，而是开始一个新行并将 View 推到它下面的一行下面。

我相信这是一个简单的答案，如果有人能提供给我，我会很高兴！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:20:13.887

将宽度设置为 match_parent，将高度设置为 wrap_content。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:07:37.553

试试这个：

```
android:singleLine="false" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:08:43.047

**1.**请将**宽度**设置为`wrap_content`，**高度**也设置为`wrap_content`。

**2.**保持`margin and padding` **保持其他视图之间的距离，在您希望数据在新行中并且不使用 max line = 1**

**3.**如果你**不想创建一个新的行**，然后使用属性`max line = 1`，这将继续添加到TextView all **in a line**。

# password-protection - 将密码设置为足够长的安全措施是否足够好？

> ID：12028391
> 
> 赞同：0
> 
> 时间：2012-08-19T17:15:53.387
> 
> 标签：password-protection

我越来越担心我的帐户的安全性。我开始为每个帐户使用一个唯一的密码，并将这些密码的列表存储在一个安全的位置。通常，我会访问 random.org 并生成 10 个字符的字母和数字的随机组合，但如果密码由常用词组成。我知道将密码设置为“砖块”会很糟糕，因为它是一个字典单词，但是如果我将密码设置为“今天 Johnthecarpenterislayingbricks”会怎样。那会是一个非常强大的密码，可以抵抗暴力猜测尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:20:18.503

我最近读了一篇文章（不记得现在在哪里），关于我们如何被“训练”使用无意义的乱码密码（例如 xsWtg0X&zuL9），这些密码实际上更容易使用解密工具和暴力猜测来破解。如果您考虑一下，这是有道理的，因为它们都在随机生成的字符的前提下运行。

*如果您将密码设置为一串对您*有意义的单词并添加一些奇怪的分隔符，那么它们应该更安全。

因此，虽然“砖块”可能不安全，但“#3brickonleft”可能是安全的。

我的无线路由器的密码是一个完整的句子，但它从未被黑客入侵过。

相反，直到最近才使用“推荐”乱码密码格式的我的托管 VPS 被黑客入侵，并且在所有翻转时间都重置了密码。

干杯!

# jquery - jQuery：选择自定义 ul 孩子

> ID：12028392
> 
> 赞同：0
> 
> 时间：2012-08-19T17:15:54.587
> 
> 标签：jquery, tags

好的，我已经完成了一些基础知识，但我无法完成这项工作。问题是我不想为任何 ul 或 li 指定 id 或 class，如果我单击 ul 中包含的标题，我希望 li 被切换（显示/隐藏）。如何在不指定 id 和 class 的情况下选择标题下的 li ???。这是我尝试过的：

```
<nav>
    <ul>
        <header>Menu 1</header>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
    </ul>
    <ul>
        <header>Menu 2</header>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
    </ul>
    <ul>
        <header>Menu 3</header>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
        <li>test</li>
    </ul>
</nav>
<script type="text/javascript" src="js/jquery.js"></script>
<script>
    $(function(){
        $('ul li').hide();
        $('ul header').css('cursor', 'pointer');
        $('ul header').click(function(e) {
            $(this).next().toggle();
        });
    });
</script> 
```

好的。这个只是切换 ul 的最后一个孩子，但不是全部。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:18:03.210

如果您使用[$.fn.toggle](http://api.jquery.com/toggle/)，当您单击时，它将在两个功能之间交替。然后，您想使用[$.fn.siblings](http://api.jquery.com/siblings/)函数来定位`li`具有相同父级的所有元素。[这是关于 jsfiddle 的演示。](http://jsfiddle.net/lbstr/dLhPX/)

```
$(function(){
    $('ul li').hide();
    $('ul header').css('cursor', 'pointer');
    $('ul header').toggle(function(){
        $(this).siblings('li').show();
    },
    function(){
        $(this).siblings('li').hide();
    });
}); 
```

**编辑：我的建议在分开时会令人困惑和冲突，所以我会将它们组合在一起并解释**

1.) 正如 Felix 上面评论的那样，除了`li`作为`ul`. 因此，您需要将标记更改为以下内容：

```
<ul>
    <li class="header">Menu 1</li>
    <li>test</li>
    <li>test</li>
    <li>test</li>
    <li>test</li>
    <li>test</li>
</ul> 
```

2.) 我会在你的 CSS 中设置以下规则，这样你就不必用 jQuery 来做：

```
nav ul li { display: none; }
nav ul .header { display: block; cursor: pointer; } 
```

所以，有了这两个建议，你的 jQuery 现在看起来像这样：

```
$(function(){
    $('ul .header').toggle(function(){
        $(this).siblings('li').show();
    },
    function(){
        $(this).siblings('li').hide();
    });
}); 
```

[把我所有的建议放在一个新的小提琴中。](http://jsfiddle.net/lbstr/tsgPh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:47:34.237

[next()](http://api.jquery.com/next/) gets the immediate following sibling of each element in the set of matched elements. If a selector is provided, it retrieves the next sibling only if it matches that selector.

[siblings()](http://api.jquery.com/siblings/) gets all the siblings of each element in the set of matched elements, optionally filtered by a selector.

```
$(function() {
    $('ul li').hide();
    $('ul header').css('cursor', 'pointer');
    $('ul header').click(function(e) {
        $(this).siblings('li').toggle();
    });
}); 
```

[**FIDDLE**](http://jsfiddle.net/XeSbE/)

# python - 通过python从大文件中读取部分文本作为页面

> ID：12028398
> 
> 赞同：0
> 
> 时间：2012-08-19T17:16:34.890
> 
> 标签：python, file, line

在 python 中，file.readlines() 获取所有行，如果文件大小很大（几 Mb​​），那就浪费了。有没有一种有效的方法来获取部分文件作为页面？通常部分文本在 webapp 中显示为页面，考虑文本要进一步修饰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:48:23.533

您可以使用生成器以非常 Pythonic 和有效的方式执行此操作：

```
def getPage(fileName, numberOfLinesInAPage):

    f = open(fileName)

    lines = (line.strip() for line in f)
    pageBuffer = []
    for lineNum, eachLine in enumerate(lines,1):
        pageBuffer.append(eachLine)
        if lineNum % numberOfLinesInAPage == 0:
            yield pageBuffer
            pageBuffer = []
    if pageBuffer:
        yield pageBuffer    
    f.close()   

for i in getPage('test.txt',100):
    print i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:16:34.890

目前我虽然按字节大小粗略计算：

```
import os
def getpage(fname, pageindex, pagesize=100, ahead=20):
    """read page roughly by byte size"""
    size = os.path.getsize(fname)
    pagenum = size/pagesize
    f=open(fname,'r')
    pos=pageindex * pagesize
    #ahead some line
    pos -= ahead
    if pos <0: 
        pos = 0
    f.seek(pos)
    f.readline()
    txt = f.read(pagesize)
    txt += f.readline()    
    return txt 
```

它不是固定的行，有些文字是松散的，有些是紧的。但是对于中等大小的页面大小，用户的视图是可以的。

# c# - MVC4 中的 Styles.Render

> ID：12028401
> 
> 赞同：389
> 
> 时间：2012-08-19T17:16:47.797
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

在一个`.NET MVC4`项目中是如何`@Styles.Render`工作的？

我的意思是，它在`@Styles.Render("~/Content/css")`哪个文件中调用？

我的文件夹中没有名为“css”的文件或文件`Content`夹。

* * *

## 回答 #1

> 赞同：458
> 
> 时间：2012-08-19T17:27:39.460

`BundleConfig`它正在调用文件夹中类中声明的特定包中包含的`App_Start`文件。

在那种特殊情况下，调用 `@Styles.Render("~/Content/css")`是调用“~/Content/site.css”。

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css")); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-30T13:28:39.150

注意区分大小写。如果你有一个文件

> /内容/bootstrap.css

然后你在你的 Bundle.config 中重定向到

> .Include("~/Content/Bootstrap.css")

它不会加载css。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-12-17T18:32:16.843

派对有点晚了。但似乎没有人提到
[捆绑](https://docs.microsoft.com/en-us/aspnet/mvc/overview/performance/bundling-and-minification#bundling)和[缩小](https://docs.microsoft.com/en-us/aspnet/mvc/overview/performance/bundling-and-minification#minification)，`StyleBundle`所以..

```
@Styles.Render("~/Content/css") 
```

来电`Application_Start()`：

```
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

这反过来又调用

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new StyleBundle("~/Content/css").Include(
              "~/Content/bootstrap.css",
              "~/Content/Site.css"));
} 
```

* * *

`RegisterBundles()`有效地将 &合并 ***到*** 一个文件中， `bootstrap.css``Site.css`

```
<link href="/Content/css?v=omEnf6XKhDfHpwdllcEwzSIFQajQQLOQweh_aX9VVWY1" rel="stylesheet"> 
```

**但是**..

```
<system.web>
  <compilation debug="false" targetFramework="4.6.1" />
</system.web> 
```

**仅当** `debug`设置为`false`in 时`Web.config`。
否则`bootstrap.css`&`Site.css`将单独送达。
未捆绑，也未缩小：

```
<link href="/Content/bootstrap.css" rel="stylesheet">
<link href="/Content/Site.css" rel="stylesheet"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T12:42:57.377

正如 App_start.BundleConfig 中定义的那样，它只是调用

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css")); 
```

即使您删除该部分，也不会发生任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T19:49:55.260

`src="@url.content("~/Folderpath/*.css")"`应该渲染样式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-30T20:10:52.333

Polo 由于多种原因，我不会在 MVC 中使用 Bundle。它不适用于您的情况，因为您必须在 Apps_Start 文件夹中设置自定义 BundleConfig 类。当您可以像这样简单地在 html 的头部添加样式时，这是没有意义的：

```
<link rel="stylesheet" href="~/Content/bootstrap.css" />
<link rel="stylesheet" href="~/Content/bootstrap.theme.css" /> 
```

您还可以将这些添加到 Layout.cshtml 或部分类中，这些类会从您的所有视图中调用并放入每个页面中。如果您的样式发生更改，您可以轻松更改名称和路径，而无需重新编译。

在类中添加到 CSS 的硬编码链接也破坏了将 UI 和设计与应用程序模型分离的整个目的。您也不希望在 c# 中管理硬编码样式表路径，因为您不能再为不同的设备、主题等构建“皮肤”或单独的样式模型，如下所示：

```
<link rel="stylesheet" href="~/UI/Skins/skin1/base.css" />
<link rel="stylesheet" href="~/UI/Skins/skin2/base.css" /> 
```

使用此系统和 Razor，您现在可以从数据库或用户设置中切换皮肤路径，并通过动态更改路径来更改网站的整体设计。

15 年前 CSS 的全部目的是为网站开发用户控制和应用程序控制的样式表“皮肤”，这样您就可以将 UI 外观与应用程序分开，并将内容重新调整为独立于数据结构的用途。 ....例如可打印版本、移动版本、音频版本、原始 xml 等。

现在回到这个“老式”、使用 C# 类的硬编码路径系统、Bootstrap 等僵化风格以及将网站主题与应用程序代码合并，我们又回到了 1998 年网站的构建方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-04T18:04:17.120

在您的 web.config 上将此设置为 False

```
<compilation debug="false" targetFramework="4.6.1" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-31T15:46:58.823

我做了所有必要的事情来将捆绑添加到 MVC 3 网络（我是现有解决方案的新手）。 `Styles.Render`对我不起作用。我终于发现我只是少了一个冒号。在母版页中：`<%: Styles.Render("~/Content/Css") %>` 我仍然对为什么（在同一页面上）`<% Html.RenderPartial("LogOnUserControl"); %>`没有*冒号*的情况感到困惑。

# c# - asp.net 会话对象被设置为空

> ID：12028403
> 
> 赞同：4
> 
> 时间：2012-08-19T17:16:57.230
> 
> 标签：c#, asp.net, session

我的 asp.net 应用程序中有一个 Session 对象，我将其设置为 userID 值。会话对象在 gloal.asax 中被实例化。当用户登录并已通过身份验证时，将在 button_click 事件上设置该值。

但是，在我的应用程序的某个地方，会话被设置为空。如何确定会话对象在何处以及如何设置为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T02:06:45.787

对项目中的会话变量进行全局搜索。在所有行上放置一个断点。然后仔细检查应用程序。两天前我也遇到了同样的错误。花了四个小时浏览了 80 多页。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:18:34.007

发生这种情况的几个原因：

*   你在修改变量`Page_Load()`吗？
*   您的浏览器是否返回会话 cookie？（您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)进行验证）

根据我的经验，上述问题几乎肯定会得到解决。

# android - 调整 imageView 的大小使其改变位置

> ID：12028404
> 
> 赞同：3
> 
> 时间：2012-08-19T17:17:16.033
> 
> 标签：android, android-layout

我有一个相对布局，其中包含很少的图像，如下所示。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/image_2"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignLeft="@+id/increase"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="34dp"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/image_1"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignBottom="@+id/image_2"
        android:layout_marginBottom="14dp"
        android:layout_toRightOf="@+id/increase"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/image_8"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/ic_launcher" />
</RelativeLayout> 
```

在我的 java 文件中，我需要执行一个小任务。当我单击图像时，它的大小应该增加。我试过了，它工作正常，这是我的代码

```
public class MainActivity extends Activity implements OnClickListener {

View imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageView i1 = (ImageView ) findViewById(R.id.image_1);
    ImageView i2 = (ImageView ) findViewById(R.id.image_2);
             ImageView i3 = (ImageView ) findViewById(R.id.image_8);
            i1.setOnClickListener(this);
    i2.setOnClickListener(this);
    i3.setOnClickListener(this);
}

public void onClick(View arg0) {
    Log.v("clicked ", "clicked");
    imageView = arg0;
    Toast.makeText(this, "looking to resize the image ", 1).show();
    Toast.makeText(this, "clicked 2", 1).show();

    height = imageView.getHeight();
        width = imageView.getWidth();
    height += 50;
    width += 50;
    imageView.setLayoutParams(new RelativeLayout.LayoutParams(height, width));

}   

} 
```

但我面临一个问题。当我单击图像时，它的位置正在改变。考虑这些屏幕截图..

下面是应用程序启动时的屏幕截图

![在此处输入图像描述](../Images/beb9777ee39a13cfc7281b26543bb016.png)

以下是单击图像视图时的屏幕截图。

![在此处输入图像描述](../Images/bf72c76852e73737ca8e9ff39de9d40c.png)

任何人都可以建议我这样图像不会改变它的位置我可以使用像使用网格视图这样的东西（如果可能的话。但即使我试图给它添加一些拖动选项。所以任何人都可以建议我）

**更新代码：**

onclick 方法更新如下：

```
public void onClick(View arg0) {
    Log.v("clicked ", "clicked");
    imageView = arg0;
    Toast.makeText(this, "looking to resize the image ", 1).show();
    Toast.makeText(this, "clicked 2", 1).show();

    height = imageView.getHeight();
width = imageView.getWidth();
    height += 50;
    width += 50;
    RelativeLayout.LayoutParams params = new
          RelativeLayout.LayoutParams(height, width);

    params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
    params.setMargins( 
                imageView.getLeft()-30,imageView.getTop()-30,imageView.getRight()+30,
               imageView.getBottom()+30);
    imageView.setLayoutParams(params);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:27:48.037

您为相对布局创建新的布局参数，并且只设置高度和宽度。因此，图像视图将默认位于父相对布局的左上角。您还需要根据需要设置对齐方式和边距。

由于您使用的是相对布局，因此您需要创建新的 RelativeLayout layoutParams：

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

像这样的东西：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
params.setMargins(left, top, right, bottom); 
```

祝你好运...

# php - 验证码响应测试

> ID：12028408
> 
> 赞同：1
> 
> 时间：2012-08-19T17:17:39.263
> 
> 标签：php, captcha

我试图测试用户对验证码输入的响应。每当用户输入不正确的响应时，此代码都会起作用并吐出错误消息，但是当用户输入正确的响应时，它不会返回成功消息。实际上，响应是空的。我已经玩了几天了，我不知道这里发生了什么。事实上，我已经在我的应用程序的其他部分使用了这个结构，它工作得很好。任何想法可能会发生什么？

```
if ($recaptcha_response_field !== '') {

    require_once('recaptchalib.php');
    $privatekey = "removed_this_duh...";
    $resp = recaptcha_check_answer($privatekey, $_SERVER["REMOTE_ADDR"], 
            $recaptcha_challenge_field, $recaptcha_response_field);

    if (!$resp->is_valid) {
        $entry_display = 'Sorry, I know this sucks... 
                          but your entry was invalid, please try again.';
    } else {
        $entry_display = 'success';
    }
return $entry_display; 
```

这是客户端ajax业务：

```
function(data) {

    if (data == 'success') {
        alert('success');
        $('#mask').hide();  
        $('#modal_container').hide();

    } else {
        alert(data);
        $('#captcha_error_area').empty().append(data);
        javascript:Recaptcha.reload();
    } 
```

成功后，这是我正在测试的对象：

```
Failure:     
ReCaptchaResponse Object ( [is_valid] => [error] => incorrect-captcha-sol )

Success: 
ReCaptchaResponse Object
        (
            [is_valid] => 1
            [error] => 
        ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:58:00.757

`is_valid`从您的对象的转储中，当出现错误并`error`填充某些内容时，它看起来可能为 NULL 或空。在这种情况下，我会切换您的 if 的顺序，因为`1`将评估为`true`并且没有任何内容将评估为`false`：

```
if($resp->is_valid) {
    $entry_display = 'success'; // is_vald is 1

} else {  // is_valid is empty
    $entry_display = 'Sorry, I know this sucks...but your entry was invalid, please try again.';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:38:15.977

如果您的代码正在`if (!$resp->is_valid) {...`处理失败案例，但`else`在成功条件下没有继续执行该块，则唯一的可能性是您的代码没有在成功时执行......这意味着：

`if ($recaptcha_response_field !== '') {` 没有被执行。我敢打赌，验证码插件在返回值方面正在做一些你意想不到的事情。您可能希望将您`include`的验证块移出，但没有看到您的其余代码，我无法评论这是否是直接的问题。

编辑：这最终不是答案，接受的答案是正确的。但是，我的答案在类似但不同的情况下可能很有用，所以我将其搁置。

# android - Android 动态壁纸图像（视频）序列工作...首选项/设置不起作用（崩溃应用程序！）

> ID：12028409
> 
> 赞同：1
> 
> 时间：2012-08-19T17:17:43.007
> 
> 标签：android, settings, live, preferences, wallpaper

我的编码点击设置有什么问题会使应用程序崩溃。我无法从 prefs.xml 读取默认设置值

图像序列像我想要的那样工作，现在它从右向左移动，而图像继续变化（如视频）

哪位高手看看有什么问题吗？:)

AndroidManifest.xml

```
<manifest
xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mywallpaper"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="12" />
    <uses-feature android:name="android.software.live_wallpaper" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
     <uses-permission android:name="android.permission.BIND_WALLPAPER" />

<application
    android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

    <service
        android:label="@string/app_name"
        android:name=".MyWallpaperService"
        android:enabled="true"
        android:permission="android.permission.BIND_WALLPAPER">

    <intent-filter android:priority="1">
        <action
            android:name="android.service.wallpaper.WallpaperService">
        </action>
    </intent-filter>
        <meta-data
            android:name="android.service.wallpaper"
            android:resource="@xml/wallpaper" >

        </meta-data>
    </service>
    <activity

        android:label="myPrefs"
        android:name="com.example.mywallpaper.Prefs"
        android:permission="android.permission.BIND_WALLPAPER"
       android:enabled="true"

        android:exported="true">
         <intent-filter>
            <category android:name="android.intent.category.PREFERENCE" />
         </intent-filter>

    </activity>     
    </application>

    </manifest> 
```

壁纸.xml

```
<wallpaper
xmlns:android="http://schemas.android.com/apk/res/android"
android:name="something"
android:thumbnail="@drawable/ic_launcher"
android:description="@string/app_name"
android:settingsActivity="com.example.mywallpaper.Prefs">
</wallpaper> 
```

首选项.xml

```
<PreferenceScreen
xmlns:android="http://schemas.android.com/apk/res/android"
android:title="Title Preference"
android:key="myPrefs">
<CheckBoxPreference
    android:title="Touch"
    android:key="touch"
android:summary="Touch enable"
    android:defaultValue="true"
    />
<EditTextPreference
    android:title="Speed"
    android:key="speed"
    android:summary="Animation speed"
    android:defaultValue="500"
    />
</PreferenceScreen> 
```

首选项.java

```
package com.example.mywallpaper;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity
implements
SharedPreferences.OnSharedPreferenceChangeListener {

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

getPreferenceManager().setSharedPreferencesName(MyWallpaperService.SHARED_PREFS_NAME);
addPreferencesFromResource(R.xml.prefs);

 getPreferenceManager().getSharedPreferences().registerOnSharedPreferenceChangeListener(this); 
}

@Override
 protected void onResume() {
  super.onResume();
}

@SuppressWarnings("deprecation")
@Override
protected void onDestroy() {
getPreferenceManager().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
  super.onDestroy();
}

public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
    String key) {
// TODO Auto-generated method stub

}

} 
```

MyWallpaperService.java

```
package com.example.mywallpaper;

import android.content.SharedPreferences;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Handler;
import android.service.wallpaper.WallpaperService;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

public class MyWallpaperService extends WallpaperService {

public static final String SHARED_PREFS_NAME = "myPrefs";
//drawable image array
int[] myImageList = new int[]{
        R.drawable.bg,
        R.drawable.bg1,
        R.drawable.bg2,
        R.drawable.bg3,
        R.drawable.bg4,
        R.drawable.bg5,
        R.drawable.bg6,
        R.drawable.bg7,
        R.drawable.bg8,
        R.drawable.bg9,
        R.drawable.bg10,
        R.drawable.bg11,
        R.drawable.bg12,
        R.drawable.bg13,
        R.drawable.bg14,
        R.drawable.bg15,
        R.drawable.bg16
        };

public boolean runUp = true;
public boolean touchEnabled = true;
public int mSpeed = 100;
public int bgNumber = 0;
public int bgFrame = 0;
public int bgFrameMax = 20;

@Override
public Engine onCreateEngine() {
    return new WallpaperEngine();
    }

private class WallpaperEngine extends Engine
implements SharedPreferences.OnSharedPreferenceChangeListener {

    private SharedPreferences mPrefs;
    private boolean mVisible = false;
    private Bitmap backgroundImage;
    private final Handler mHandler = new Handler();

    private final Runnable mUpdateDisplay = new Runnable() {
        public void run() {
            draw();
            }
        };

    private void draw() {
        SurfaceHolder holder = getSurfaceHolder();
        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {

                //paint black
                Paint p = new Paint();
                p.setColor(Color.BLACK);
                c.drawRect(0, 0, c.getWidth(), c.getHeight(), p);

                drawBG(c);

                }
            } finally {
                if (c != null)
                    holder.unlockCanvasAndPost(c);
                }

        mHandler.removeCallbacks(mUpdateDisplay);
        if (mVisible) {
            mHandler.postDelayed(mUpdateDisplay, mSpeed);
            }

        }

    WallpaperEngine() {
        mPrefs = MyWallpaperService.this.getSharedPreferences(SHARED_PREFS_NAME, 0);
        mPrefs.registerOnSharedPreferenceChangeListener(this);
        onSharedPreferenceChanged(mPrefs, null);
        }

    @Override
    public void onTouchEvent(MotionEvent event) {
        //super.onTouchEvent(event);
        if(touchEnabled){
            bgNumber = 0;
            }
        }

    public void drawBG(Canvas c){
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPurgeable = true;
        Resources res = getResources();
        backgroundImage = BitmapFactory.decodeResource(res,myImageList[bgNumber], options);

        //move looping imagas (video) right to left
        int CH = c.getHeight();
        int CW = c.getWidth();
        double BH = backgroundImage.getHeight();
        double BW = backgroundImage.getWidth();
        double hScale = (BH/BW);
        int bgSlideX = (CW/bgFrameMax);         
        int wallPH = (int) (CW*hScale);
        int wLeft = 0+(CW-(bgSlideX*bgFrame));
        int wTop = (int) ((CH/2)-(BH/2));
        int wRight = CW+(CW-(bgSlideX*bgFrame));
        int wBottom = wTop+wallPH;

        Rect dest = new Rect(wLeft, wTop, wRight, wBottom);
        Paint paint = new Paint();

        paint.setFilterBitmap(true);
        c.drawBitmap(backgroundImage, null, dest, paint);

        bgFrame+=1;
        if (bgFrame == bgFrameMax*2){
            bgFrame = 0;
        }

        //Loop images up and down
        if (runUp = true){
            bgNumber += 1;
            if (bgNumber == myImageList.length){
                bgNumber=0;
                runUp = false;
                }
            }
        else if(runUp = false){
            bgNumber -= 1;
            if (bgNumber == 0){
                bgNumber+=1;
                runUp = true;
                }
            }

        backgroundImage.recycle();
        }

    @Override
    public void onVisibilityChanged(boolean visible) {
        mVisible = visible;
        if (visible) {
            draw();
            }
        else {
            mHandler.removeCallbacks(mUpdateDisplay);
            }
        }

    @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        draw();
        }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        mVisible = false;
        mHandler.removeCallbacks(mUpdateDisplay);
        }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mVisible = false;
        mHandler.removeCallbacks(mUpdateDisplay);
        }

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        mSpeed = Integer.valueOf(sharedPreferences.getString("speed", "5000"));
        //sharedPreferences.getInt("speed", 100);
        touchEnabled = sharedPreferences.getBoolean("touch", true);
        //mHandler.post(mUpdateDisplay);
        }
    }
public void onPause(){
    super.onDestroy();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:31:45.403

根据您发布的代码，我已经可以看到您从未关闭 prefs.xml 中的标签。那会引起问题。您需要在 prefs.xml 的末尾添加 a 来关闭它。

# php - 简单查询问题，where子句

> ID：12028410
> 
> 赞同：1
> 
> 时间：2012-08-19T17:17:50.703
> 
> 标签：php, mysql

我正在尝试进行查询！我在这里有这个查询：

```
$data = mysql_query( "SELECT date, time,location,type_of_payment,
        basket_information, user_id FROM retailer") 
```

我也有这个变量：

```
$getuser[0]['user_id'] 
```

我需要设置一个子句，但我在编写查询时遇到了困难。有人可以帮我编辑吗？

```
$data = mysql_query( "SELECT date, time,location,type_of_payment,
        basket_information, user_id FROM retailer 
        WHERE user_id = $getuser[0]['user_id']") 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:20:13.357

```
$data = mysql_query( "SELECT date, time,location,type_of_payment,
                      basket_information, user_id FROM retailer 
                      WHERE user_id=".$getuser[0]['user_id']) 
```

而且，您应该真正使用[`PDO`](http://php.net/manual/en/book.pdo.php)or[`mysqli`](http://php.net/manual/en/book.mysqli.php)而不是`mysql`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:21:08.660

您遇到了 PHP 解析器故障：

```
$data = mysql_query( "SELECT [..snip..]  WHERE user_id=$getuser[0]['user_id']") 
```

您正在尝试将多维数组（罢工＃1）插入双引号字符串，同时使用带引号的数组键（罢工＃2）。PHP 的解析器并不贪心，也不会“看到”`['user_id']`作为数组引用的一部分。这就是为什么有`{}`. 另外，在双引号字符串中引用数组引用中的键会产生警告，所以...试试这个：

```
$data = "....... WHERE user_id={$getuser[0]['user_id']}")
                               ^---                   ^--- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T17:21:40.027

在执行您可以执行的代码之前，您无法读取 SQL 代码中的数组：

```
$user = $getuser[0]['user_id'];
$data = mysql_query( "SELECT date, time,location,type_of_payment,
                      basket_information, user_id FROM retailer 
                      WHERE user_id = $user"); 
```

# jquery - 简单的 html/css 类谜语

> ID：12028414
> 
> 赞同：1
> 
> 时间：2012-08-19T17:18:02.860
> 
> 标签：jquery, html, css

在[这个](http://jsfiddle.net/cneeds/FBvkQ/)小提琴中，单击 Policies 按钮，单击 New policy 按钮，然后根据此 html 的第二行（靠近代码底部）

```
<fieldset id="NewpolicyOverlay" class="menuAbuttons">
  <p><a href="#" class="menuA menuA-open returnBttn" name="level02" title="Create a new policy"><span>New policy</span></a></p>
  <a href="#" id="NewPolicy" class="menuA menuA-open overlayBttnA" name="NewPolicy"><span>Policy</span></a>
  <a href="#" id="Sections" class="menuA overlayBttnA" name="Sections"><span>Sections</span></a>
  <a href="#" id="Transaction" class="menuA overlayBttnA" name="Transaction"><span>Transaction</span></a>
  <a href="#" id="NewPolicySubmit" class="menuB overlayBttnA" name="NewPolicySubmit"><span>Submit</span></a>
</fieldset> 
```

New policy 按钮应显示为“open”（即看起来与其下方的 Policy 按钮相同）。即使我用 FF 检查元素，它也没有 menuA-open 类。但是上面的代码清楚地表明它应该。它得到另外两个类：menuA 和 returnBttn，但没有 menuA-open 类。

简单来说，新建策略按钮在被点击后应该是灰色的，带有蓝色边框。

谁能解开这个谜语？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:18:03.570

`menuA`当您单击“策略”时，您会从该元素中删除该类。您应该更改选择器，以便仅从`<a>`顶部栏中的元素中删除该类（我假设您想要）：http: [//jsfiddle.net/FBvkQ/1/](http://jsfiddle.net/FBvkQ/1/)。

```
$(".menuA").click(function() {
    // ...
    $('#menudiv > .menuA') // ... 
```

# string - 检查一个字符串是否是另一个没有连接的旋转

> ID：12028416
> 
> 赞同：11
> 
> 时间：2012-08-19T17:18:21.087
> 
> 标签：string, algorithm, language-agnostic

有 2 个字符串，我们如何检查一个是否是另一个的旋转版本？

`For Example : hello --- lohel`

一个简单的解决方案是通过`concatenating`第一个字符串本身并检查另一个是否是`substring`串联版本的 a 。

还有其他解决方案吗？

我想知道我们是否可以使用`circular linked list`也许？但我无法得出解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T21:37:01.077

> 一个简单的解决方案是连接它们并检查另一个是否是连接版本的子字符串。

我假设您的意思是将第一个字符串与其自身连接，然后检查另一个是否是该连接的子字符串。

这将起作用，实际上可以在没有任何连接的情况下完成。只需使用任何[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm#Single_pattern_algorithms)在第一个字符串中搜索第二个字符串，当您到达末尾时，循环回到开头。

例如，使用[Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)的整体算法将是 O(n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T17:28:17.230

根本不需要串联。

首先，检查长度。如果它们不同，则返回 false。

其次，使用从源的第一个字符到最后一个字符递增的索引。检查目标是否以从索引到结尾的所有字母开头，并以索引之前的所有字母结尾。如果在任何时候这是真的，则返回真。

否则，返回假。

**编辑：**

Python中的一个实现：

```
def isrot(src, dest):
  # Make sure they have the same size
  if len(src) != len(dest):
    return False

  # Rotate through the letters in src
  for ix in range(len(src)):
    # Compare the end of src with the beginning of dest
    # and the beginning of src with the end of dest
    if dest.startswith(src[ix:]) and dest.endswith(src[:ix]):
      return True

  return False

print isrot('hello', 'lohel')
print isrot('hello', 'lohell')
print isrot('hello', 'hello')
print isrot('hello', 'lohe') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T17:32:39.020

您可以计算每个字符串的[字典顺序最小字符串旋转](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)，然后测试它们是否相等。

计算最小旋转是 O(n)。

如果您有很多字符串要测试，这会很好，因为最小旋转可以用作预处理步骤，然后您可以使用标准哈希表来存储旋转的字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T17:36:47.897

平凡的 O(min(n,m)^2) 算法：（n - S1 的长度，m - S2 的长度）

旋转（S1，S2）：

```
if (S1.length != S2.length)
    return false
for i : 0 to n-1
    res = true
    index = i
    for j : 0 to n-1
       if S1[j] != S2[index]
           res = false
           break
       index = (index+1)%n
    if res == true
        return true
return false 
```

**编辑：**

解释 -

两个长度分别为 m 和 n 的字符串 S1 和 S2 是循环相同的当且仅当 m == n 并且存在索引 0 <= j <= n-1 这样 S1 = S[j]S[j+1]... S[n-1]S[0]...S[j-1]。

所以在上面的算法中，我们检查长度是否相等以及是否存在这样的索引。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T17:27:20.143

一个非常直接的解决方案是将其中一个单词旋转 n 次，其中 n 是单词的长度。对于每个旋转，检查结果是否与另一个单词相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-01T16:07:39.467

你可以在`O(n)`时间和`O(1)`空间上做到这一点：

```
def is_rot(u, v):
    n, i, j = len(u), 0, 0
    if n != len(v):
        return False
    while i < n and j < n:
        k = 1
        while k <= n and u[(i + k) % n] == v[(j + k) % n]:
            k += 1
        if k > n:
            return True
        if u[(i + k) % n] > v[(j + k) % n]:
            i += k
        else:
            j += k
    return False 
```

[有关更多详细信息，请参阅我的](https://stackoverflow.com/a/31001317/2141635)答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-21T22:43:26.420

input1="hello" input2="llohe" input3="lohel"（input3 是特殊情况）

如果输入 1 和输入 2 的长度不同，则返回 0。设 i 和 j 分别为指向 input1 和 input2 的两个索引，并将计数初始化为 input1.length。有一个名为 isRotated 的标志设置为 false

而（计数！= 0）{

当 input1 的字符匹配 input2

1.  增加 i & j
2.  递减计数

如果字符不匹配

1.  如果 isRotated = true（这意味着即使在旋转之后也存在不匹配）所以 break;
2.  否则将 j 重置为 0，因为不匹配。例如：

请找到下面的代码，让我知道它是否因我可能没有考虑过的其他组合而失败。

```
 public boolean isRotation(String input1, String input2) {
    boolean isRotated = false;
    int i = 0, j = 0, count = input1.length();

    if (input1.length() != input2.length())
        return false;

    while (count != 0) {

        if (i == input1.length() && !isRotated) {
            isRotated = true;
            i = 0;
        }

        if (input1.charAt(i) == input2.charAt(j)) {
            i++;
            j++;
            count--;
        }

        else {
            if (isRotated) {
                break;
            }
            if (i == input1.length() - 1 && !isRotated) {
                isRotated = true;
            }
            if (i < input1.length()) {
                j = 0;
                count = input1.length();

            }
            /* To handle the duplicates. This is the special case.
             * This occurs when input1 contains two duplicate elements placed side-by-side as "ll" in "hello" while 
             * they may not be side-by-side in input2 such as "lohel" but are still valid rotations. 
             Eg: "hello" "lohel"
            */
            if (input1.charAt(i) == input2.charAt(j)) {
                i--;
            }
            i++;
        }
    }
    if (count == 0)
        return true;
    return false;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println(new StringRotation().isRotation("harry potter",
            "terharry pot"));
    System.out.println(new StringRotation().isRotation("hello", "llohe"));
    System.out.println(new StringRotation().isRotation("hello", "lohell"));
    System.out.println(new StringRotation().isRotation("hello", "hello"));
    System.out.println(new StringRotation().isRotation("hello", "lohe"));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-11T08:01:11.770

另一个python实现（没有连接）虽然效率不高，但它是O（n），如果有的话期待评论。

假设有两个字符串 s1 和 s2。

显然，如果 s1 和 s2 是旋转的，那么在 s1 中存在 s2 的两个子串，它们的总和就是串的长度。

问题是每当 s2 的字符与 s1 的字符匹配时，找到我在 s2 中增加索引的分区。

```
def is_rotation(s1, s2):
    if len(s1) != len(s2):
        return False
    n = len(s1)
    if n == 0: return True

    j = 0
    for i in range(n):
        if s2[j] == s1[i]:
            j += 1
    return (j > 0 and s1[:n - j] == s2[j:] and s1[n - j:] == s2[:j]) 
```

第二个和条件只是为了确保为 s2 增加的计数器是子字符串匹配。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-23T00:31:28.633

Java中的简单解决方案。不需要迭代或连接。

```
private static boolean isSubString(String first, String second){
        int firstIndex = second.indexOf(first.charAt(0));
        if(first.length() == second.length() && firstIndex > -1){

            if(first.equalsIgnoreCase(second))
                return true;

            int finalPos = second.length() - firstIndex ; 
            return second.charAt(0) == first.charAt(finalPos)
            && first.substring(finalPos).equals(second.subSequence(0, firstIndex));
        }
        return false;

    } 
```

测试用例：

```
String first = "bottle";
String second = "tlebot"; 
```

逻辑：

取第一个字符串的第一个字符，在第二个字符串中找到索引。用找到的索引减去第二个的长度，检查第二个在 0 处的第一个字符是否与第二个的长度不同处的字符相同，找到的索引和这两个字符之间的子字符串是否相同。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-25T17:06:20.180

在 O(n) 中解决问题

```
void isSubstring(string& s1, string& s2)
{
    if(s1.length() != s2.length())
        cout<<"Not rotation string"<<endl;
    else
    {
        int firstI=0, secondI=0;
        int len = s1.length();

        while( firstI < len )
        {
            if(s1[firstI%len] == s2[0] && s1[(firstI+1) %len] == s2[1])
                break;

            firstI = (firstI+1)%len;
        }

        int len2 = s2.length(); 
        int i=0;
        bool isSubString = true; 
        while(i < len2)
        {
            if(s1[firstI%len] != s2[i])
            {
                isSubString = false;
                break;
            }
            i++;
        }

        if(isSubString)
            cout<<"Is Rotation String"<<endl;
        else
            cout<<"Is not a rotation string"<<endl;
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-06-02T13:26:05.583

```
 String source = "avaraavar";
    String dest =   "ravaraava";

    System.out.println();
    if(source.length()!=dest.length())
        try {
            throw (new IOException());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    int i = 0;
    int j = 0;
    int totalcount=0;
    while(true)
    {
        i=i%source.length();    
        if(source.charAt(i)==dest.charAt(j))
        {   
            System.out.println("i="+i+" , j = "+j);
            System.out.println(source.charAt(i)+"=="+dest.charAt(j));
            i++;
            j++;
            totalcount++;   
        }
        else
        {
            System.out.println("i="+i+" , j = "+j);
            System.out.println(source.charAt(i)+"!="+dest.charAt(j));
            i++;
            totalcount++;   
            j=0;
        }
        if(j==source.length())
        {
            System.out.println("Yes its a rotation");
            break;
        }
        if(totalcount >(2*source.length())-1)
        {
            System.out.println("No its a rotation");
            break;
        }
    } 
```

# math - 不能反转的数学函数？

> ID：12028418
> 
> 赞同：1
> 
> 时间：2012-08-19T17:18:22.700
> 
> 标签：math, encryption, operators, hash

我对开发自己的**简单**哈希机制感到好奇。

我想知道一些不可逆的数学函数。

我知道提升到函数和模数是一些不可逆的函数，因为反向过程给出了两个答案。

> 例如：- 平方根 (4) = 2 或 -2

我需要一个不可逆的函数，因为即使有人破解了我的密码，他们也不应该能够产生一个解密器，它可以轻松地解密我的散列中的密码。

使用这个函数，我可以使我的散列更加安全。

**如果有人可以提供更多此类功能并进行解释，那将很有帮助。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:52:45.517

R 中的平方是不可逆的，因为它会丢失信息。但这根本不是散列函数的意义所在。

加密哈希函数有两个主要属性：

1.  很难找到具有相同输出的两个输入，称为*碰撞*
2.  很难找到与给定输出匹配的输入，称为*原像*

R 上的平方没有这些性质：

1.  找到*碰撞*是微不足道的。给定`x`只是计算`-x`，两者都平方`x*x`。
2.  查找*原像*很容易。计算平方根。对此有有效的算法。（忽略如果结果不合理则无法输出无限数字序列的问题）

不幸的是，没有具有这些属性的“简单”功能。

相关问题：

*   [为什么哈希函数是一种方式？如果我知道算法，为什么我不能从中计算输入？](https://security.stackexchange.com/questions/11717/why-are-hash-functions-one-way-if-i-know-the-algorithm-why-cant-i-calculate-t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T13:46:23.157

1.  0 的幂。
2.  虚数很好，因为计算机只有在知道如何处理它的情况下才能通过方程。
3.  四舍五入的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-11T07:25:49.113

模数是不可逆的。绝对价值是不可逆的。舍入是不可逆的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T17:25:11.463

盐渍“功能”应该是可逆的。加盐的目的只是将额外的（难以猜测的）数据添加到您要散列的值中。这样，攻击者就很难用自己的猜测对哈希进行逆向工程。

一种常见的解决方案是将盐添加/附加到您要散列的文本中。

例如，如果您的隐藏值是“密码”，而您的 salt 是 0 到 255 之间的随机数，那么实际存储在数据库中的内容可能是 md5(123password), 123。所以它对 salt 没有任何意义操作是不可逆的，因为它已经被散列了，这是*一种*不可逆的。

# sql-server-2008 - 关键字“OF”附近的语法错误（用标识列填充表）

> ID：12028422
> 
> 赞同：0
> 
> 时间：2012-08-19T17:18:37.720
> 
> 标签：sql-server-2008, fill

我做了三个表：

```
 CREATE TABLE country_ (
    id_country  int NOT NULL IDENTITY(219,1),
    oid int NOT NULL,
    country_name_ru varchar(50) NOT NULL,
    country_name_en varchar(50) NOT NULL, 
    PRIMARY KEY  (id_country) 
  ) 

    CREATE TABLE region_ (
    id_region int NOT NULL IDENTITY(1612,1),
    id_country int NOT NULL FOREIGN KEY REFERENCES country_(id_country),
    oid int  NOT NULL,
    region_name_ru varchar(255) NOT NULL,
    region_name_en varchar(255) NOT NULL,
    PRIMARY KEY  (id_region) 
 ) 

    CREATE TABLE city_ (
    id_city int NOT NULL  IDENTITY(17590,1),
    id_region int NOT NULL FOREIGN KEY REFERENCES region_(id_region),
    id_country int NOT NULL FOREIGN KEY REFERENCES country_(id_country),
    oid int NOT NULL,
    city_name_ru varchar(255) NOT NULL,
    city_name_en varchar(255) NOT NULL,
    PRIMARY KEY  (id_city) 
 ) 
```

然后我尝试填充它们：

```
 SET IDENTITY_INSERT country_  ON

    INSERT INTO country_  ( id_country,oid,country_name_ru,country_name_en) VALUES       (1,   3159, 'Россия', 'Russia');

    SET IDENTITY_INSERT country_  OF 
```

以这种方式我填写了 region_ 和 city_ 表，但我有三个错误：

> **关键字 "OF" 附近的语法错误**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:21:54.457

已经关了

```
SET IDENTITY_INSERT country_  OFF 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/aa259221%28v=sql.80%29.aspx)阅读有关此声明的信息

如您所见，语法包括`OFF`

```
SET IDENTITY_INSERT [ database. [ owner. ] ] { table } { ON | OFF } 
```

# haproxy - 使用多个前端部分减少 haproxy acl 中的重复

> ID：12028430
> 
> 赞同：4
> 
> 时间：2012-08-19T17:19:47.253
> 
> 标签：haproxy, stunnel

我正在使用带有 stunnel 处理 SSL 的 haproxy（并使用代理模式来保留来自 haproxy 的原始 IP）。

我有几个 acl 测试根据域、标头或路径重定向到不同的后端。

问题是无论您是通过 http 还是 https 进入，这些都是相同的，但我必须在配置中复制它们。有什么办法可以减少重复？

这是一个示例配置：

```
global
    user haproxy
    group haproxy
    #etc...

frontend http-in
    bind *:80

    acl files_path path_beg /files/
    acl beta_host hdr_beg(host) -i beta.

    use_backend files if files_path
    use backend beta_host
    default_backend appservers

frontend https-in
    bind *:442 accept-proxy

    acl files_path path_beg /files/
    acl beta_host hdr_beg(host) -i beta.

    use_backend files if files_path
    use backend beta_host
    default_backend appservers

backend appservers
    balance roundrobin
    option forwardfor

    server appserver_1 localhost:8080 weight 1
    server appserver_2 192.168.1.101:8080 weight 1

backend files
    balance roundrobin
    option forwardfor
    server file1 192.168.1.102 weight 1
    server file2 192.168.1.103 weight 1

backend beta
    balance roundrobin
    server beta1 192.168.1.104 weight 1 
```

http-in 和 https-in 有不同的端口，并且 https-in 必须 sepcify accept-proxy 以便 stunnel 可以使用代理协议将用户的原始 IP 传递给它。但除此之外，它们是相同的，并且应该始终相同。有没有办法减少这种重复？（haproxy 1.5-dev）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-25T11:23:05.007

您可以简单地将前端中的一个 http 绑定到两者。

```
frontend http-in
  bind *:80
  bind 0.0.0.0:443 transparent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T15:07:24.367

不幸的是，haproxy 手册（[http://haproxy.1wt.eu/download/1.5/doc/configuration.txt](http://haproxy.1wt.eu/download/1.5/doc/configuration.txt)）仍然认为 acl 只能在前端、监听和后端部分定义。

如果 https 和 http 前端相同，可以在一个前端定义几个绑定语句。

# java - Tapestry5 在扩展类中使用服务。

> ID：12028431
> 
> 赞同：0
> 
> 时间：2012-08-19T17:19:47.093
> 
> 标签：java, tapestry

我是 Tapestry5 用户，有一个关于在扩展类中使用服务的问题。可以说我有以下类结构，

基类

```
public class BaseClassImpl extends ExtendedOneClass implements BaseClass {

   @Inject
   private ServiceOne serviceOne;
} 
```

扩展类

```
public class ExtendedOneClass extends ExtendedTwoClass {

   @Inject
   private ServiceTwo serviceTwo;
} 
```

扩展双类

```
public class ExtendedTwoClas {

   @Inject
   private ServiceThree serviceThree;
} 
```

我需要做什么才能在扩展类中使用服务？

我像这样设置我的 AppModule

```
public static void bind(ServiceBinder binder) {
    binder.bind(BaseClass.class, BaseClassImpl.class);
    binder.bind(ExtendedOneClass.class);
    binder.bind(ExtendedTwoClass.class);
} 
```

但我似乎无法让服务在扩展类中工作。我假设这是因为扩展类没有被挂毯的@Inject 实例化。所以问题是你如何完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:39:19.873

使用构造函数注入并将服务传递给父构造函数：

```
public class BaseClassImpl extends ExtendedOneClass implements BaseClass
{
   private HibernateSessionSource hibernateSessionSource;

   public BaseClassImpl(SystemEnvironment systemEnvironment, LinkSource linkSource, 
                        HibernateSessionSource hibernateSessionSource)
   {
       super(systemEnvironment, linkSource);
   }
} 
```

无论如何，您的设置将不起作用，您需要在此设置中添加服务 ID，否则您将有多个服务实现相同的接口。这应该有助于：

```
binder.bind(ExtendedOneClass.class).withId("ext1"); 
```

结合这个：

```
@InjectService("ext1")
private ExtendedOneClass extendedOneClass; 
```

# download - 为什么检查 MD5 哈希很重要

> ID：12028439
> 
> 赞同：4
> 
> 时间：2012-08-19T17:21:06.547
> 
> 标签：download, md5

通常，当您下载文件时，提供下载的站点会列出正在下载的文件的 MD5 哈希值。

但我从来没有遇到过下载不好的问题。事实上，我认为既然 FTP 是一个 TCP 协议，你就不会得到糟糕的下载。

是否有关于不良下载发生频率的任何数据（即，当检查 MD5 哈希告诉您下载不良时）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:26:50.487

TCP/IP 协议意外交换位并不是什么大问题（尽管在过去有时会发生这种情况，但现在已经不是什么大问题了）。

从镜像站点下载文件时，MD5 尤其有用。例如，为新操作系统获取 ISO。原网站可以给你MD5，然后你可以从其他公司下载ISO。为了确保镜像完全没有篡改图像，您可以使用 MD5。

总之，MD5 是为了验证文件的*真实性*——这可能意味着也可能不意味着硬件级别的事故。通常这是更有意和恶作剧的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:25:03.717

它不是用于不良下载，主要是用于验证可下载的真实性，以确保没有人篡改可下载的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:27:41.677

假设该文件位于您连接的网络服务器之外。该网站提供有关校验和、文件大小、文件名的信息。当用户无法保证文件可以替换为看起来相同但具有一些附加功能的文件时，例如恶意软件、错误的地雷类型，您可以检查校验和以确保这一点。

# java - 图像格式转换为 jpeg 而不发送到输出或保存到文件 (Java)

> ID：12028442
> 
> 赞同：1
> 
> 时间：2012-08-19T17:21:17.000
> 
> 标签：java, image, jpeg

我写了我的远程电脑控制应用程序。服务器发送机器人类捕获的屏幕截图，其他线程监听客户端的输入（例如：鼠标单击）并在服务器 pc 上执行相同的操作。

一段时间后我得到堆溢出，可能应该用 reset() 清理 ObjectOutputStream，但首先要更快，我应该弄清楚如何压缩 Image 对象。据我阅读，ImageIO 应该对我有帮助，但我不想将其保存到文件或将其发送到流中，只想拥有一个转换后的 Image 对象。当然，我为什么不想用 ImageIO.write(blablalb, blablal, myOutputStream) 将它发送到我的 ObjectOutputStream 到监听客户端。问题是，我已经尝试过，并且遇到阅读或其他问题，没有异常或错误，客户端记录器说它有两张图片（未显示）然后卡住了。虽然我没有压缩的方式在这方面效果很好。

因此，我需要帮助如何在不保存或发送的情况下进行转换并将其保存在 Object 中（然后通过 ObjectOutputStream 发送），或者至少修复 ImageIO 使用问题。我更喜欢第一种方式（不想弄乱字节计数代码等等）。谢谢你的帮助。

这是一些代码，我有很多类和代码，但希望这会有所帮助： *Image (wrapped into ImageIcon) object sent way*

**服务端图片发送相关片段**

```
public class BroadcastWorker implements Runnable {
    private ObjectOutputStream output;
    //private BlockingQueue<Image> imagesBuffer;
    private boolean finnish = false;
    private long frequency = 50;
    private Screen screen = new Screen();

    public BroadcastWorker(Socket connection) throws IOException {
        output = new ObjectOutputStream(connection.getOutputStream());
        //ImageIO.createImageOutputStream(output);
        // outputui resetas atlaisvina vietos

    }

    /*
    public void addImage(Image image) {
        imagesBuffer.add(image);
    }
    * 
    */

    private void send(Image image) throws IOException {
        System.out.println("Sending image");
        output.writeObject(new ImageIcon(image));
        //ImageOutputStream imageOutput = ImageIO.createImageOutputStream(output);
        //ImageIO.write((RenderedImage)image, "jpeg", imageOutput);
        System.out.println("image sent");
    }

    @Override
    public void run() {
        while (!finnish) {
            try {
                Thread.sleep(frequency);
            } catch (InterruptedException ex) {
                Logger.getLogger(BroadcastWorker.class.getName()).log(Level.SEVERE, null, ex);
            }
            try {
                send(screen.getScreenshot());
            } catch (IOException ex) {
                Logger.getLogger(BroadcastWorker.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

} 
```

**ClientGui 类，部分代码与接收和设置图像相关**

```
public class ClientGui1 extends javax.swing.JFrame {
    private Socket connection;
    private ScreenReceiveWorker receiver = new ScreenReceiveWorker();
    private ActionSendWorker actionSender = new ActionSendWorker();
    /**
    * 
    */
    class ScreenReceiveWorker extends SwingWorker {
        private Image progress;

        private void setScreen(Image progress) {
            this.progress = progress;
        }

        private Image getScreen() {
            return progress;
        }

        @Override
        protected Object doInBackground() throws Exception {
            ObjectInputStream input = new ObjectInputStream(connection.getInputStream());
            //ImageInputStream imageInput = ImageIO.createImageInputStream(input);

            while(true) {
                Thread.sleep(200);
                System.out.println("Screeeen");
                Image screen = ((ImageIcon) input.readObject()).getImage();
                //Image screen = ImageIO.read(imageInput);
                System.out.println("received");
                panelScreen.setImage(screen);
                panelScreen.repaint();

            }
        }
    }

......
..... 
```

# javascript - 在我的 Rails 应用程序中使用 Stripe 为卡充电时出现问题

> ID：12028445
> 
> 赞同：1
> 
> 时间：2012-08-19T17:21:27.363
> 
> 标签：javascript, ruby-on-rails, forms, stripe-payments

我正在构建一个使用信用卡的 Rails 应用程序，我正在尝试使用 Stripe 来完成它。我在将数据从我的应用程序传递到 Stripe 以进行收费时遇到了一些问题。这就是我希望在这个话题上得到帮助的地方。

首先，我有一个标准表单（带有值而不是占位符，用于快速提交以进行测试）。表单成功将姓名和电子邮件输入数据库，客户的“计划”暂时硬编码在控制器中：

```
 <%= form_for @customer do |f| %>
      <div class="payment-errors"></div>
      <div class="name field">
        <%= f.label :name %>
        <%= f.text_field :name, :value => "Your name" %>
      </div>
      <div class="email field">
        <%= f.label :email %>
        <%= f.text_field :email, :value => "yourname@example.com" %>
      </div>
      <div class="cc_number field">
        <%= label_tag 'cc_number' %>
        <%= text_field_tag 'cc_number', nil, :value => "4242424242424242" %>
      </div>
      <div class="ccv field">
        <%= label_tag 'ccv' %>
        <%= text_field_tag 'ccv', nil, :value => "123" %>
      </div>
      <div class="cc_expiration field">
        <%= label_tag 'cc_month', "Expiration date" %>
        <%= text_field_tag 'cc_month', nil, :value => "12" %>
        <%= text_field_tag 'cc_year', nil, :value => "2012" %>
      </div>
      <div class="actions">
        <%= f.submit "Continue", :class => 'btn' %>
      </div>
    <% end %> 
```

同样在我`signups_view`上面的代码所在的地方，我有这个 JS，[主要由 Stripe 提供](https://stripe.com/docs/tutorials/forms)：

```
<script type="text/javascript">
  // this identifies your website in the createToken call below
  Stripe.setPublishableKey('<%= STRIPE['public'] %>');

  function stripeResponseHandler(status, response) {
      if (response.error) {
          // show the errors on the form
          $(".payment-errors").text(response.error.message);
          $("input[type=submit]").removeAttr("disabled");
      } else {
          var form$ = $("form");
          // token contains id, last4, and card type
          var token = response['id'];
          // insert the token into the form so it gets submitted to the server
          form$.append("<input type='hidden' name='customer[stripe_token]' id='stripeToken' value='" + token + "'/>");
          // and submit
          $('.cc_number.field, .ccv.field, .cc_expiration.field').remove();
          form$.get(0).submit();
      }
  }

  $(document).ready(function() {
    $("form").submit(function(event) {
      // disable the submit button to prevent repeated clicks
      $('input[type=submit]').attr("disabled", "disabled");

      Stripe.createToken({
          number: $('#cc_number').val(),
          cvc: $('#ccv').val(),
          exp_month: $('#cc_month').val(),
          exp_year: $('#cc_year').val()
      }, stripeResponseHandler);

      // prevent the form from submitting with the default action
      return false;
    });
  });

</script> 
```

这条线似乎有问题`form$.append("<input type='hidden' name='customer[stripe_token]' id='stripeToken' value='" + token + "'/>");`，因为我的 Ruby 应用程序在到达`customer[stripe_token]`.

```
Finally, in my `customers_controller`, I have:

  def create
    @customer = Customer.new(params[:customer])
    @customer.product = 

    if @customer.save
      save_order
      redirect_to @customer
    else
      render action: 'new'
    end

  def save_order
    Stripe.api_key = STRIPE['secret']
    charge = Stripe::Charge.create(
      :amount => 20,
      :currency => "usd",
      :card => @customer.stripe_token,
      :description => "Product 1"
    )
  end 
```

每当我提交表单时，它每次都会遇到`else`控制器中的子句，并且经过大量调试，谷歌搜索并从中剥离并从头开始重建，我仍然很难过。

任何帮助将不胜感激。

编辑：添加了`customer model`

```
 attr_accessible :name, :email, :stripe_token, :product

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :email, :presence => true,
                    :format => { :with => email_regex },
                    :length => { :minimum => 6, :maximum => 60 },
                    :uniqueness => { :case_sensitive => false }

  validates :name, :length => {:minimum => 2, :maximum => 80 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:26:20.920

查看您的客户模型以了解正在发生的事情将有所帮助。如果@customer.save 返回 false，则意味着验证器可能失败。

另外，您的模型上是否有 stripe_token 作为可访问属性？否则，您将无法像您正在做的那样从表单中分配它。请注意，令牌不应**存储**在数据库中，因为它只能使用一次。

```
class Customer 
  attr_accessor :stripe_token # do you have this?
end 
```

还有一点需要注意：您可能希望存储一个 Stripe ID 字段，以便您可以检索客户付款并在以后取消他们的帐户。

# django - 聚合和注释与信号的效率

> ID：12028447
> 
> 赞同：0
> 
> 时间：2012-08-19T17:21:45.903
> 
> 标签：django, aggregate, django-aggregation

我想计算用户对我的网站所做的贡献数量，以便我可以在网站上对他们进行排名。我设法编写了一些漂亮的代码来做到这一点，但基于每个用户。

因为用户在不同的字段中获得不同数量的积分，所以它会检查模型上的某些字段以及用户是否在其中输入了值。然后将这些值乘以它们的权重，得出总分。

没有什么比一些代码更能说明问题了：

```
class UserContribCounter(object):
    """Can count the number of points a user got for his contributions"""
    weight_dict = {'poster':2, 'title':1}

    def __init__(self, user):
        if isinstance(user, User):
            self.user = user
        else:
            raise Exception('Not a valid user instance.')

    def set_contrib_points(self):
        """Some dark magic counts the number of times a certain field was filled out"""
        self.unweighted = Movie.objects.filter(user = self.user).aggregate(poster=Count('poster'),title=Count('title'))

    def get_contrib_points(self):
        """Multiplies the number of times a field was filled out with their weights to calculate the total number of points"""
        try:
            self.unweighted
        except AttributeError:
            self.set_contrib_points()

        return sum([self.weight_dict[key] * value for key, value in self.unweighted.items()]) 
```

我还想展示前10名，所以我需要获得前10名用户。这意味着我要么必须编写一个复杂的聚合，但目前我一直没有这样做，或者我可以通过以下方式使用信号：

当模型被保存时，捕获 post_save 信号。然后使用我现有的课程为用户重新计算积分，并将其存储在用户个人资料中。这样我就可以按用户个人资料中的值对用户进行排序，这很简单。

问题是，每次保存模型时重新计数或相当复杂的聚合函数会更有效。我知道这将取决于很多事情，但我确信从概念的角度来看，应该有理由选择其中之一。请注意，我将在聚合中检查的一些字段也将是关系的，所以我不确定这将如何影响性能。

提前致谢，

叔丁基锂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:15:11.457

我想说这取决于您的模型更改的频率以及您的前 10 名需要多准确和最新。对于它的价值，您可以将前 10 名缓存一个小时甚至一天。另一方面，如果您必须进行一些 django 聚合未涵盖的复杂排序或处理，您将从非规范化中受益。

最后，这一切都归结为实际发现现实世界使用中的瓶颈。认真地先做最小的事情。

# ios - 一个分组表视图中的 2 个不同的获取请求（iOS）

> ID：12028453
> 
> 赞同：1
> 
> 时间：2012-08-19T17:22:17.740
> 
> 标签：ios, tableview

我一直在成功使用任何表格视图。现在我想在分组表视图的第一部分显示来自第一个 fetchrequest 的概述。在第 2 部分应显示详细信息列表。

是否可以在另一个 tableview 部分中显示一个和多个数据中的数据？

为了更好地理解，我尝试使用静态标签来做到这一点。

应该看起来像这个截图 - 但我是一个新用户不能发布图片:(

# java - spring jdbc中的可滚动结果集

> ID：12028455
> 
> 赞同：1
> 
> 时间：2012-08-19T17:22:49.153
> 
> 标签：java, jdbc, spring-jdbc

我正在执行一个查询，并希望在一个字符串二维数组中捕获结果。我们使用 NamedParameterJdbcTemplate 来执行查询。要将结果填充到二维字符串数组中，我需要知道行数和列数。我们从结果集元数据中获取列数。

如何找到行数？如何在spring jdbc中使用可滚动的结果集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:22:53.550

为什么不为二维数组尝试其他替代数据结构，如下所示？

*   列表列表，其中外部列表​​中的每个元素都是一条记录，内部列表中的每个元素都是一列。
*   地图列表，其中列表中的每个元素都是一条记录，地图中的每一对是列名、列值的元组

然后，您通常会使用 ResultSetMetaData 获取您选择的所有列，并且您不需要预先知道行数。

# wifi - Arduino Wi-Fi Shield 中的代码是什么？

> ID：12028456
> 
> 赞同：2
> 
> 时间：2012-08-19T17:23:03.817
> 
> 标签：wifi, arduino

我想学习嵌入式设备的[Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi)，我遇到了[**Arduino Wi-Fi shield**](http://arduino.cc/en/Main/ArduinoWiFiShield)。我知道屏蔽需要连接基本的 Arduino 板，例如[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)。Wi-Fi shield 上有一个**Atmel UC3A** MCU，Uno 上有一个 ATmega328。我下载了[Wi-Fi Shield Library](http://arduino.cc/en/uploads/Main/WiFiShield_library.zip)，有一些示例代码。然而，我发现示例中的代码仅适用于 Arduino Uno 板。

例如，要连接到 Wi-Fi 网络，它只需通过 SPI 输出发送一个命令，例如`SpiDrv::sendCmd(SET_NET_CMD, PARAM_NUMS_1);`. 我认为 Wi-Fi 屏蔽板上的 UC3A 负责接收此消息并使用 Wi-Fi 芯片[HDG104](http://www.hd-wireless.se/index.php?option=com_content&view=article&catid=3%3acontent&id=49%3ahdg104-details)做一些事情。

事实上，要学习如何实现 Wi-Fi，我认为一个重要的部分是了解 UC3A 如何与 Wi-Fi 芯片一起工作。因此，我在哪里可以获得为 Wi-Fi shield MCU 编写的示例代码？

另外，如果我想自己构建硬件，我可以只使用 UC3A MCU 吗？UC3A 是一个功能强大的 MCU，但我担心它会太忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:45:54.640

您可以在官方 github 存储库中找到所有内容！这里是官方 WiFi Shield 固件的官方二进制和源代码的链接！您还可以找到 arduino 的库，所有内容都在 13 天前上传，享受 [https://github.com/arduino/wifishield/tree/master/firmware](https://github.com/arduino/wifishield/tree/master/firmware)

# nuget - NuGet 包管理器控制台默认项目下拉菜单为空

> ID：12028457
> 
> 赞同：33
> 
> 时间：2012-08-19T17:23:06.247
> 
> 标签：nuget, visual-studio-2012, entity-framework-migrations, entity-framework-5

我最近从 MSDN 升级到 Visual Studio 2012 RTM Ultimate。我正在使用 EF Code First Migrations 在我的应用程序中构建我的数据库，并且我最近添加了一个新实体，并希望为它搭建迁移框架。

为此，您需要在 VS 中打开 Package Manage Console 窗口，然后键入`add-migration "some name here"`. 这将为您的数据库自上次更新以来所做的任何更改提供支架。

* * *

# 问题

**VS 2012 RC 上没有出现此问题**

我遇到的问题是包管理器控制台中的“默认项目”下拉列表未填充，尽管我的解决方案中有多个项目。当我只键入上面的命令时使用的默认项目是错误的项目（我的迁移在另一个项目中）。执行此操作时出现以下错误：

> 在程序集“ProjectA”中找不到迁移配置类型。（在 Visual Studio 中，您可以使用包管理器控制台中的 Enable-Migrations 命令添加迁移配置）。

![Visual Studio 2012 包管理器控制台](../Images/6090913bfad795ccbb2db3d9f843378a.png)

* * *

# 我试过的

我尝试将正确的项目（ProjectB）设置为启动项目，但得到此错误：

> 无法加载程序集“ProjectA”。（如果您在 Visual Studio 中使用 Code First 迁移，如果您的解决方案的启动项目未引用包含您的迁移的项目，则可能发生这种情况。您可以更改解决方案的启动项目或使用 -StartUpProjectName 参数。）

* * *

# 问题

如何手动指定添加到哪些项目迁移，或强制填充默认项目下拉列表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-05-16T13:57:17.090

在 VS 2015 中，我刚刚重新启动了 IDE，并且再次填充了下拉菜单。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-20T03:18:31.590

我可以使用以下命令手动指定项目：

```
add-migration "Locations" -StartupProjectName "ProjectA" -ProjectName "ProjectB" 
```

该命令的文档很少，所以我假设正在发生的事情：

1.  `-StartupProjectName`指定存储数据库配置的项目（在我的例子中是 MVC4 项目）
2.  `-ProjectName`指定要在其中构建迁移的项目。

`ProjectB`由于对此问题的测试，我已在我的应用程序中设置为启动项目，但我认为`-StartupProjectName`如果在 VS 中将正确的项目设置为启动项目，您可以省略。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-14T03:47:16.630

关闭 IDE 并再次打开可能会有所帮助。它适用于我的 VS2015

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-17T15:11:08.317

关闭解决方案并再次打开它。关闭 IDE 有时需要更多时间。这适用于 VS 2017

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-13T13:07:15.840

我必须先恢复 NuGet 包。然后它显示了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-14T19:27:51.683

我不得不打开解决方案。

要查看解决方案，请查看“解决方案资源管理器”窗格的底部。应该有一个“团队资源管理器”选项卡。点击它。然后在窗格的下半部分，应该列出您的解决方案。双击要为其安装东西的解决方案，或右键单击它并选择“打开”。

这应该会打开包管理器控制台，并预先选择正确的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-17T14:30:55.250

我在 Visual Studio 2013 中遇到了类似的问题。右键单击 [Solution]->[Properties]->[Startup Project] 确保选择了 [Single startup project]。我之前为 Azure 辅助角色测试选择了多个项目。

在现有的 VS 之后，包管理器工作正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-12T10:34:05.873

首先关闭vs，然后转到设置您的计算机，应用程序和功能，microsoft-visual-studio-installer，修改，在第二个选项卡中，您将获得一个选项来定义您要使用vs的哪些部分，选择任何属于努吉特。完成后，再次打开vs。现在它应该工作成功！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-29T06:47:21.547

您可以选择[解决方案资源](https://i.stack.imgur.com/SgfR7.png)管理器下的项目。然后它显示在包管理器控制台上。它对我有用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-30T09:45:08.130

如果有人在使用 Visual Studio 2019 和 .NET Core 项目时遇到此问题，这是因为该界面缺少将解决方案文件添加到项目的方法。

我能够通过使用命令行工具解决问题，如下所示：

首先导航到保存项目的文件夹并打开一个 (git) **bash**控制台窗口。

然后将解决方案文件添加到文件夹中。

```
dotnet new sln 
```

然后在解决方案中添加对每个项目的引用（* 会找到所有解决方案）

```
dotnet sln *.sln add <project-folder-1>/<project-name-1>.csproj
dotnet sln *.sln add <project-folder-2>/<project-name-2>.csproj 
```

注意 请记住将项目文件夹和名称替换为您需要的内容。

关闭 Visual Studio 2019 并重新打开。

Nuget 包管理器和控制台将按预期工作。

# javascript - HH:MM:SS 的正则表达式是否正确

> ID：12028458
> 
> 赞同：1
> 
> 时间：2012-08-19T17:23:09.850
> 
> 标签：javascript, jquery, validation, time

我正在尝试检查有效的时间值，它可以是 00 小时 00 分钟和 00 秒和 23 小时 59 分钟和 59 秒之间的任何值。

我希望它检查它是否与使用 0 的 HH:MM:SS 完全匹配，如果没有部分信息不确定我是否解释得很好，所以举个例子。

如果时间为 23 分 5 秒，则为 00:23:05 并拒绝 23:05

我认为正确的表达是

```
^(?:(?:([01]\d|2[0-3]):)([0-5]\d):)([0-5]\d)$ 
```

我正在使用 jQuery，但据我所知，没有简单的方法来验证时间。

我对么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:27:36.420

这对我来说看起来不错，但是如果您*只是*进行验证，那么在不需要时不使用分组结构会更容易，这会留下如下内容：

```
^([01]\d|2[0-3]):[0-5]\d:[0-5]\d$ 
```

这只对交替运算符使用分组，这使得它更容易阅读，IMO。

# android-activity - 如何从我的 android 代码开始新的活动？

> ID：12028460
> 
> 赞同：0
> 
> 时间：2012-08-19T17:23:09.890
> 
> 标签：android-activity

我对 android 完全陌生，如果有人能回答我，我会非常感谢。如何从我的 android 代码开始新的活动？例如，如果在我当前的活动中，字符串 x1 = 字符串 x2，那么我想开始新的活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:31:37.650

您想在代码中创建其他活动吗？通常，每个视图只有一个活动。如果要启动其他活动，则必须为 example activity2.java 创建另一个文件，在 manifest.xml 中添加此活动，如下所示：

```
 <activity
        android:name=".activity2"
        android:screenOrientation="landscape" /> 
```

在你的 activity2.java 的开头，从这样的开始：

```
public class Activity2 extends Activity{ 
```

我不知道我是否回答了你的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:31:30.377

假设您的新 Activity 名为**CoolActivity**，那么您执行以下操作来启动您的 Activity：

```
Intent intent = new Intent(this, CoolActivity.class);
startActivity(intent); 
```

供您参考：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

# c# - 如何知道法线向量是否在两个角度之间？

> ID：12028464
> 
> 赞同：0
> 
> 时间：2012-08-19T17:24:20.803
> 
> 标签：c#, math

我有一个最大角度和一个最小角度，还有一个指向某个方向（2D）的单位向量。

我如何确定这个法线向量是否在两个角度之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:02:29.543

我不知道 c#，但我知道数学：

假设向量的坐标是`(x,y)`，并且是单位向量，所以`|(x,y)| = 1`。`a`正`x`轴与向量的夹角为

```
a = atan2(y,x) 
```

哪里`atan2`是四象限反正切。然后，您可以检查该角度是否在您的最大和最小角度之间（前提是它们也是相对于正`x`轴定义的）。

请注意，`a`以弧度为单位；如果你的角度以度数给出，你应该首先计算

```
a = a*180/pi; 
```

当然在哪里`pi = 3.1415.....`。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:25:54.717

从[点积](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation)计算角度（这在 2d 中很容易），然后与您的角度范围进行比较。

# c - 二维数组反转

> ID：12028468
> 
> 赞同：0
> 
> 时间：2012-08-19T17:24:50.960
> 
> 标签：c, arrays, function, loops, reverse

我正在尝试反转二维数组并且编译器工作正常，但数组仍然与开始时相同。

我在调用反向函数之前和之后打印了数组，但似乎没有发生任何变化。
为什么？

这是代码：

```
#include<stdio.h>

void reverse(int table[ ][5]){
    int a,b,c,d;
    int temp = 0;
    for(a=0,c=3;a<=3;a++,c--){
        for(b=0,d=4;b<=4;b++,d--){
            temp = table[a][b];
            table[a][b]= table[c][d];
            table[c][d]= temp;      
        }
      }

    }

int main(int argc,char *argv[]){
    int i,j;
    int table[4][5];

    for(i=0;i<=3;i++){
       for(j=0;j<=4;j++){
          scanf("%d",&table[i][j]);
       }
    }

    for(i=0;i<=3;i++){
        for(j=0;j<=4;j++){
            printf(" %d",table[i][j]);
        }
    }
    printf("\n");

    reverse (table);

    for(i=0;i<=3;i++){
       for(j=0;j<=4;j++){
           printf("%d ",table[i][j]);
       }
    }

    return 0; 
    } 
```

你能在反向函数中找到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:31:16.357

问题是您正在交换元素，然后将它们交换回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:41:42.457

在您的反向功能中，您正在交换矩阵。当循环到达一半时，二维数组完全交换。但是你从一半迭代到完整，它再次被交换，使其与原始相同。

你需要更新你的循环，比如

```
for(a=0,c=3;a<=(3/2)+1;a++,c--){
    for(b=0,d=4;b<=4/2;b++,d--){
-------------------^ 
```

注意：您需要适当注意奇数长度，这`3/2`会给您`1`，但您需要`2`.

# java - 如何使用几乎相关的参数检索相同的结果

> ID：12028469
> 
> 赞同：0
> 
> 时间：2012-08-19T17:24:59.037
> 
> 标签：java, nearest-neighbor

我正在构建一个基于短信的应用程序，它将检索铁路时刻表。现在我面临的问题是，如果用户输入了特定车站的错误名称（假设他写的是“Kolkta”而不是“Kolkata”），那么我的应用程序会无法转发与其最近匹配的查询结果。我将如何做？java中是否有用于此的API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:38:56.340

我猜[Apache Lucene](http://lucene.apache.org/)在 java 中提供了你想要的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:21:30.580

Lucence Apache 听起来很有希望，但是如果您想要更简单的东西，您可以在家轻松烹饪，您可以尝试计算用户输入和整个铁路名称集之间的最小[编辑距离。](http://en.wikipedia.org/wiki/Levenshtein_distance)这是字符串之间相似性的度量，可以非常有效地计算（尤其是在您的情况下，字符串非常短）。

上面的链接包含一个可怕的数学公式，但这是所有形式表示的本质。他们很可怕。向下滚动一点，你会发现算法的伪代码非常短（*几乎是*复制粘贴）。

# php - 加载应该出现在每个页面上的内容的最佳方式

> ID：12028470
> 
> 赞同：5
> 
> 时间：2012-08-19T17:25:00.077
> 
> 标签：php, html, iframe, dynamic

到目前为止，我一直在使用`<iframe>`标签将页眉/页脚/导航栏等内容加载到我的网页中。但是这些会造成很多麻烦，当我即将开始建立一个新网站时，我想我现在应该把它整理好。

我正在考虑将所有 html 代码放在一个 php 文件中，然后动态加载它。理想情况下，我希望代码成为页面的一部分。所以它看起来是内联的。但是，如果我需要更改一位而不是编辑同一个文件 100 次，我也希望能够编辑一个文件。

`<iframe>`直到最近才做得很好，我不想使用变通办法来解决我的问题。有人可以发布一些我可以修改的代码或发布一个链接到告诉我如何做到这一点的东西吗？干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:27:31.720

您可以使用 PHP 的`include()`函数在页面中包含页眉和页脚等元素。

所以：

```
include('header.php'); 
```

. . . 将在同一目录中查找名为 header.php 的文件并将其包含在您的页面中。然后你只需要在你的页面顶部写这个。

也就是说，这并不是设计网站的好方法。寻找一个[内容管理系统](http://en.wikipedia.org/wiki/Content_management_system)怎么样？它可以让您将网站的设计和内容分开？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:27:34.340

PHP 是否包含您正在寻找的内容？[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

# c++ - 自动分离已相乘的两个图像

> ID：12028475
> 
> 赞同：7
> 
> 时间：2012-08-19T17:25:12.587
> 
> 标签：c++, image, matlab, image-processing

我正在寻找一种算法或 C++/Matlab 库，可用于分离两个相乘的图像。下面给出了这个问题的可视化示例。

图像 1 可以是任何东西（例如相对复杂的场景）。图 2 非常简单，可以用数学方法生成。图像 2 总是具有相似的形态（即下降趋势）。通过将图像 1 乘以图像 2（使用逐点乘法），我们得到转换后的图像。

只给定*转换后的图像*，我想估计图像 1 或图像 2。有没有算法可以做到这一点？

以下是 Matlab 代码和图像：

```
load('trans.mat');
imageA = imread('room.jpg');
imageB = abs(response);  % loaded from MAT file

[m,n] = size(imageA);
image1 = rgb2gray( imresize(im2double(imageA), [m n]) );
image2 = imresize(im2double(imageB), [m n]);

figure; imagesc(image1); colormap gray; title('Image 1 of Room')
colorbar

figure; imagesc(image2); colormap gray; title('Image 2 of Response')
colorbar

% This is image1 and image2 multiplied together (point-by-point)
trans = image1 .* image2;
figure; imagesc(trans); colormap gray; title('Transformed Image')
colorbar 
```

![图 1](../Images/6d6d8846fca9864dfc606f350342047e.png) ![图 2](../Images/fba67faf4545444bce5175dac6865c00.png) ![转换后的图像](../Images/4df878dffdd1e6f9af9c198f8303df6f.png)

**更新**

有很多方法可以解决这个问题。这是我的实验结果。感谢所有回答我问题的人！

**1、图像的低通滤波**

正如duskwuff 所指出的，对变换后的图像进行低通滤波器会返回图像2 的近似值。在这种情况下，低通滤波器是高斯的。您可以看到使用低通滤波器可以识别图像中的乘性噪声。

![原始图像](../Images/edfa458828a8c53bf77f6b3c325d41d9.png) ![高斯低通滤波图像](../Images/f7ec7a38e1f4fdea5f8db4243ec60931.png)

**2.同态滤波**

正如 EitenT 所建议的，我检查了同态滤波。知道这种类型的图像过滤的名称后，我设法找到了一些我认为有助于解决类似问题的参考资料。

1.  SP 银行、信号处理、图像处理和模式识别。纽约：普伦蒂斯霍尔，1990 年。

2.  A. Oppenheim, R. Schafer 和 J. Stockham, T.，“乘法和卷积信号的非线性滤波”，IEEE Transactions on Audio and Electroacoustics，第一卷。16，没有。3，第 437 – 466 页，1968 年 9 月。

3.  盲图像反卷积：理论与应用。博卡拉顿：CRC 出版社，2007 年。

Blind image deconvolution一书的第5章特别好，里面有很多同态滤波的参考资料。这可能是最通用的方法，可以在许多不同的应用程序中很好地工作。

**3.优化使用`fminsearch`**

正如 Serg 所建议的，我使用了一个目标函数`fminsearch`。由于我知道噪声的数学模型，因此我能够将其用作优化算法的输入。 **这种方法完全是针对特定问题的，并且可能并不总是在所有情况下都有用。**

这是图像2的重建：

![重构图像](../Images/6879c5b623f9c7a5d8b92a58527e52c8.png)

这是图像 1 的重建，通过除以图像 2 的重建形成：

![图 1](../Images/88a9f1ec313977e577005ca9ac7262e1.png)

这是包含噪声的图像：

![包含噪声的图像](../Images/cf84a580c125255c29baed9acf4da2aa.png)

**源代码**

这是我的问题的源代码。如代码所示，这是一个非常具体的应用程序，并非在所有情况下都能正常工作。

```
N = 1001;
q = zeros(N, 1);
q(1:200) = 55;
q(201:300) = 120;
q(301:400) = 70;
q(401:600) = 40;
q(601:800) = 100;
q(801:1001) = 70;
dt = 0.0042;
fs = 1 / dt;
wSize = 101;
Glim = 20;
ginv = 0;
[R, ~, ~] = get_response(N, q, dt, wSize, Glim, ginv);
rows = wSize;
cols = N;
cut_val = 200;

figure; imagesc(abs(R)); title('Matrix output of algorithm')
colorbar

figure;
imagesc(abs(R)); title('abs(response)')

figure;
imagesc(imag(R)); title('imag(response)')

imageA = imread('room.jpg');

% images should be of the same size
[m,n] = size(R);
image1 =  rgb2gray( imresize(im2double(imageA), [m n]) );

% here is the multiplication (with the image in complex space)
trans = ((image1.*1i)) .* (R(end:-1:1, :));

figure;
imagesc(abs(trans)); colormap(gray);

% take the imaginary part of the response
imagLogR = imag(log(trans)); 

% The beginning and end points are not usable
Mderiv = zeros(rows, cols-2);
for k = 1:rows
   val = deriv_3pt(imagLogR(k,:), dt);
   val(val > cut_val) = 0;
   Mderiv(k,:) = val(1:end-1);
end

% This is the derivative of the imaginary part of R
% d/dtau(imag((log(R)))
% Do we need to remove spurious values from the matrix?
figure; 
imagesc(abs(log(Mderiv)));

disp('Running iteration');
% Apply curve-fitting to get back the values
% by cycling over the cols
q0 = 10;
q1 = 500;
NN = cols - 2;
qout = zeros(NN, 1);
for k = 1:NN
    data = Mderiv(:,k); 
    qout(k) = fminbnd(@(q) curve_fit_to_get_q(q, dt, rows, data),q0,q1);
end

figure; plot(q); title('q value input as vector'); 
ylim([0 200]); xlim([0 1001])

figure;
plot(qout); title('Reconstructed q')
ylim([0 200]); xlim([0 1001])

% make the vector the same size as the other
qout2 = [qout(1); qout; qout(end)];

% get the reconstructed response
[RR, ~, ~] = get_response(N, qout2, dt, wSize, Glim, ginv);
RR = RR(end:-1:1,:);

figure; imagesc(abs(RR)); colormap gray 
title('Reconstructed Image 2')
colorbar; 

% here is the reconstructed image of the room
% NOTE the division in the imagesc function
check0 = image1 .* abs(R(end:-1:1, :));
figure; imagesc(check0./abs(RR)); colormap gray
title('Reconstructed Image 1')
colorbar; 

figure; imagesc(check0); colormap gray
title('Original image with noise pattern')
colorbar; 

function [response, L, inte] = get_response(N, Q, dt, wSize, Glim, ginv)

fs = 1 / dt; 
Npad = wSize - 1; 
N1 = wSize + Npad;
N2 = floor(N1 / 2 + 1);
f = (fs/2)*linspace(0,1,N2);
omega = 2 * pi .* f';
omegah = 2 * pi * f(end);
sigma2 = exp(-(0.23*Glim + 1.63));

sign = 1;
if(ginv == 1)
    sign = -1;
end

ratio = omega ./ omegah;
rs_r = zeros(N2, 1);  
rs_i = zeros(N2, 1);   
termr = zeros(N2, 1);
termi = zeros(N2, 1);
termr_sub1 = zeros(N2, 1);
termi_sub1 = zeros(N2, 1);
response = zeros(N2, N);
L = zeros(N2, N);
inte = zeros(N2, N);

 % cycle over cols of matrix
for ti = 1:N               

    term0 = omega ./ (2 .* Q(ti));
    gamma = 1 / (pi * Q(ti));

    % calculate for the real part
    if(ti == 1)
        Lambda = ones(N2, 1);
        termr_sub1(1) = 0;  
        termr_sub1(2:end) = term0(2:end) .* (ratio(2:end).^-gamma);  
    else
        termr(1) = 0; 
        termr(2:end) = term0(2:end) .* (ratio(2:end).^-gamma); 
        rs_r = rs_r - dt.*(termr + termr_sub1);
        termr_sub1 = termr;
        Beta = exp( -1 .* -0.5 .* rs_r );

        Lambda = (Beta + sigma2) ./ (Beta.^2 + sigma2);  % vector
    end 

    % calculate for the complex part  
    if(ginv == 1)  
        termi(1) = 0;
        termi(2:end) = (ratio(2:end).^(sign .* gamma) - 1) .* omega(2:end);
    else
        termi = (ratio.^(sign .* gamma) - 1) .* omega;
    end
    rs_i = rs_i - dt.*(termi + termi_sub1);
    termi_sub1 = termi;
    integrand = exp( 1i .* -0.5 .* rs_i );

    L(:,ti) = Lambda;
    inte(:,ti) = integrand;

    if(ginv == 1) 
        response(:,ti) = Lambda .* integrand;
    else        
        response(:,ti) = (1 ./ Lambda) .* integrand;
    end  
end % ti loop

function sse = curve_fit_to_get_q(q, dt, rows, data)

% q = trial q value
% dt = timestep
% rows = number of rows
% data = actual dataset

fs = 1 / dt;
N2 = rows;
f = (fs/2)*linspace(0,1,N2);  % vector for frequency along cols
omega = 2 * pi .* f';
omegah = 2 * pi * f(end);
ratio = omega ./ omegah;

gamma = 1 / (pi * q);

% calculate for the complex part  
termi = ((ratio.^(gamma)) - 1) .* omega;

% for now, just reverse termi 
termi = termi(end:-1:1);
% 

% Do non-linear curve-fitting

% termi is a column-vector with the generated noise pattern 
% data is the log-transformed image
% sse is the value that is returned to fminsearchbnd
Error_Vector =  termi - data;
sse = sum(Error_Vector.^2);

function output = deriv_3pt(x, dt)

N = length(x);
N0 = N - 1;
output = zeros(N0, 1);
denom = 2 * dt;

for k = 2:N0 
   output(k - 1) = (x(k+1) - x(k-1)) / denom;  
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:46:46.967

This is going to be a difficult, unreliable process, as you're fundamentally trying to extract information (the separation of the two images) which has been destroyed. Bringing it back perfectly is impossible; the best you can do is guess.

If the second image is always going to be relatively "smooth", you may be able to reconstruct it (or, at least, an approximation of it) by applying a strong low-pass filter to the transformed image. With that in hand, you can invert the multiplication, or equivalently use a complementary high-pass filter to get the first image. It won't be quite the same, but it'll at least be something.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:31:51.540

我会尝试约束优化（`fmincon`在 Matlab 中）。如果您了解第二张图像的来源/性质，您可能可以定义一个生成相似噪声模式的多元函数。目标函数可以是生成的噪声图像和最后一个图像之间的相关性。

# unit-testing - 软件测试：测试远程 API 还是只使用模拟？

> ID：12028481
> 
> 赞同：3
> 
> 时间：2012-08-19T17:25:57.697
> 
> 标签：unit-testing, testing, mocking, tdd, integration-testing

假设您的网站需要调用 Twitter API 来执行某些任务，您有多种选择：

1.  只使用模拟
2.  在单元测试中使用 mock，但在集成测试中使用生产 api
3.  只调用生产api，从不使用mock

如果您的服务依赖于外部 api，哪一种是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:13:38.627

我会退后一步，问问自己你想测试什么。

如果您尝试单独测试其他代码，请使用模拟（毕竟这是模拟的目的）。

如果您正在尝试真正进行端到端测试，请使用生产 API（或者如果有的话，使用实时测试 API）。

所以我的答案非常接近您的第二个选择，但需要注意的是您应该考虑是否需要测试来自第三方的 API。有时这样做是有意义的或必要的，有时是没有意义的（众所周知它们是可靠的，或者这样做非常不方便）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:28:13.113

我认为第二个是最好的解决方案。我在单元测试中使用模拟，在功能测试中使用生产 api。我不希望单元测试使用远程 api，因为我希望它们快速运行并且我没有测试该 api 的结果（和连接），但是如果 api 发生更改或者我有一个我希望我的 Jenkins 失败连接问题或其他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T20:52:57.400

使用 Mock 的一个优点是用于“负面测试”，例如您的代码如何响应从 API 返回的某些错误条件。使用 Mock 可以测试 100% 的“可访问”代码，而使用真正的 API（尤其是组织外部提供的 API）会出现问题。

# java - 如何用 Java 迭代 Groovy 列表？

> ID：12028486
> 
> 赞同：0
> 
> 时间：2012-08-19T17:26:15.640
> 
> 标签：java, groovy

我有以下**Groovy**域类：

```
class A {

  def lotOfBs = []

} 
```

现在，我需要从一个**Java类迭代该数组。**这些解决方案不起作用：

```
for ( B b : a.getLotOfBs() ){
  //COMPILATION ERROR
}

for ( int i = 0 ; i < a.getLotOfBs().length ; i++ ){
  //LENGTH ATTRIBUTE DOES NOT EXIST OR IT IS NOT VISIBLE
}

for ( int i = 0 ; i < a.getLotOfBs().size() ; i++ ){
  //SIZE METHOD DOES NOT EXIST
} 
```

你有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:51:09.480

groovy 类中的数组是 java.util.ArrayList 的一个实例，因此转换为 Collection<T> 应该可以工作：

```
 Collection<B> bs = (Collection<B>) a.getLotOfBs();

  for (B b : bs) {
    ...
  } 
```

# html - 当浏览器宽度发生变化时，保持中间列中的容器居中

> ID：12028487
> 
> 赞同：2
> 
> 时间：2012-08-19T17:26:26.553
> 
> 标签：html, css

我有一个流体宽度布局。左右列具有固定宽度，我的中心列在指定的最大和最小宽度之间更改其宽度，因为浏览器宽度更改或屏幕分辨率更改。如下图所示：

![在此处输入图像描述](../Images/0d7773c1152e3dbd956d68e501c58c79.png)

如您所见，中间列有一些小容器，它们可以容纳多种产品等。

我遇到的问题是，当宽度发生变化并且中间列不能容纳 3 个容器时，1 个会落在下面，因为它们是浮动的，然后看起来像下面这样：

![在此处输入图像描述](../Images/156dc06be9a1898cfeb6b90b33de4415.png)

现在容器右侧的这个空间看起来很丑。我想要做的是让它们保持居中，如果当宽度减小时一个下降到下方，那么两个应该出现在中间列的中心，当另一个下降时，剩下的 1 个容器也应该出现在中间，如下所示：

![在此处输入图像描述](../Images/1ee19bde125ff8b5982560cbca65a0b2.png)

我可以只用 css 做到这一点吗？或者我需要引入一些脚本语言来动态执行它？

这是我正在使用的容器的 css

```
.prod-container{
    float: left;
    width: 180px;
    height: 290px;
    margin: 2px 6px;
    border: 1px solid black;
} 
```

[http://www.myappontest.heliohost.org/index1.html](http://www.myappontest.heliohost.org/index1.html)上的示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:25:48.123

`float: left;`用`display: inline-block;`in的样式替换`.prod-container`并添加`text-align: center;`to `#center-content-container`的样式将实现所需的行为。

您页面的工作版本：[little link](http://goo.gl/6VmXE)。这里也是修改后的 CSS 文件：[另一个小链接](http://goo.gl/Wun5E).

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:17:45.210

我会将中心浮动块放在最大宽度为 100% 的 div 内（在中心列的范围内）。使用“margin-left：auto margin-right：auto”将该块居中。如果没有足够的空间，这将使浮动块移动到下一行，并且居中的 div 将根据其内容调整大小，使其在中心列中居中。

# java - 如何在 JAXB 中将对象作为 @XmlValue 嵌入？

> ID：12028489
> 
> 赞同：2
> 
> 时间：2012-08-19T17:26:33.450
> 
> 标签：java, jaxb

我想`List<Map<String,Object>>`在 XML 中表示一个实例，如下所示：

```
<row>
   <entry key="key1" xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">value1</entry>
   <entry key="key2" xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">value2</entry>
   <entry key="key3" />
   <entry key="keyDate" xsi:type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2012-08-19T13:00:59.412-04:00</entry>
</row> 
```

where`key1`和`key2`是字符串，`key3`是 nil，并且`keyDate`是日期。

我可以使用以下实现来*接近*`XmlAdapter`这一点：

```
package net.parkerson.test1;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class JAXBMapAdapter extends XmlAdapter<JAXBMapAdapter.JAXBMap, Map<String, Object>>
{

    @Override
    public JAXBMap marshal(Map<String, Object> map) throws Exception
    {
        JAXBMap jaxbMap = new JAXBMap();
        for (Entry<String, Object> entry : map.entrySet())
        {
            jaxbMap.entry.add(new JAXBMapEntry(entry));
        }
        return jaxbMap;

    }

    @Override
    public Map<String, Object> unmarshal(JAXBMapAdapter.JAXBMap mappedObject) throws Exception
    {
        HashMap<String, Object> map = new HashMap<String, Object>();
        for (JAXBMapEntry entry : mappedObject.entry)
        {
            map.put(entry.key, entry.value);
        }
        return map;
    }

    public static class JAXBMapEntry
    {

        @XmlAttribute
        public String key;

        @XmlElement
        public Object value;

        public JAXBMapEntry()
        {
        }

        public JAXBMapEntry(Map.Entry<String, Object> entry)
        {
            key = entry.getKey();
            value = entry.getValue();
        }
    }

    public static class JAXBMap
    {
        public List<JAXBMapAdapter.JAXBMapEntry> entry = new ArrayList<JAXBMapAdapter.JAXBMapEntry>();
    }
} 
```

和以下测试代码：

```
package net.parkerson.test1;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.xml.bind.JAXB;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElements;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

import net.parkerson.test1.JAXBMapAdapter;

public class Test1
{
    @XmlRootElement
    public static class Thingy
    {
        @XmlElements(@XmlElement(name = "row"))
        @XmlJavaTypeAdapter(type=Map.class, value=JAXBMapAdapter.class)
        public List<Map<String,Object>> rows;
    }

    public static void main(String[] args) throws Exception
    {
        Test1.Thingy thingy = new Test1.Thingy();

        Map<String,Object> thing1 = new HashMap<String,Object>();
        thing1.put("foo", "bar");
        thing1.put("date", new Date());

        Map<String,Object> thing2 = new HashMap<String,Object>();
        thing2.put("foo", "baz");
        thing2.put("date", new Date());

        List<Map<String,Object>> things = new ArrayList<Map<String,Object>>();
        things.add(thing1);
        things.add(thing2);

        thingy.rows = things;

        java.io.StringWriter sw = new java.io.StringWriter();
        JAXB.marshal(thingy, sw);
        System.out.print(sw.toString());
    }

} 
```

这会产生：

```
<thingy>
    <row>
        <entry key="foo">
            <value xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">bar</value>
        </entry>
        <entry key="date">
            <value xsi:type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2012-08-19T13:20:57.484-04:00</value>
        </entry>
    </row>
    <row>
        <entry key="foo">
            <value xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">baz</value>
        </entry>
        <entry key="date">
            <value xsi:type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2012-08-19T13:20:57.484-04:00</value>
        </entry>
    </row>
</thingy> 
```

我真正想要的是放弃`value`条目内的嵌套标签。我天真的假设是我可以将`@XmlElement`注释替换`value`为`@XmlValue`. 但是，这会导致 JAXB 吐得满地都是：

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor.get(TransducedAccessor.java:154)
    at com.sun.xml.internal.bind.v2.runtime.property.ValueProperty.<init>(ValueProperty.java:66)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:95)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:145)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:479)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:498)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.<init>(ArrayElementProperty.java:97)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.<init>(ArrayElementNodeProperty.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:113)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:145)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:479)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:498)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.<init>(ArrayElementProperty.java:97)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.<init>(ArrayElementNodeProperty.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:113)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:145)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:479)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:305)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1100)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:143)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:110)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:376)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at javax.xml.bind.JAXB$Cache.<init>(JAXB.java:87)
    at javax.xml.bind.JAXB.getContext(JAXB.java:114)
    at javax.xml.bind.JAXB._marshal(JAXB.java:538)
    at javax.xml.bind.JAXB.marshal(JAXB.java:431)
    at net.parkerson.test1.Test1.main(Test1.java:49) 
```

我确信有一种方法可以使用`XmlAdapter`基于我的代码来做到这一点，但我想我已经盯着这个太久了，无法想出它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:58:40.783

奇怪的。如果您将 Map 类型从 更改为`<String, Object>`，`<String, String>`它将按预期工作。

更新：似乎如果您强制 JAXB 使用 @XmlValue（或 @XmlAttribute）呈现值，则没有地方放置其类型信息：`xsi:type="xs:dateTime" ...`它需要是 @XmlElement

我的建议是将 a`Map<String, String>`与适配器一起使用，该适配器根据底层类型对from`String`进行编码/解码：`Object`

```
public class MySmartAdapter extends XmlAdapter<String, Object> {
    @Override
    public Object unmarshal(String s) throws Exception {
        //check if s is date and return date
        //check for other types
        return s;
    }

    @Override
    public String marshal(Object o) throws Exception {
        return o != null ? o.toString() : null;
    }
}

public static class JAXBMapEntry
{

    @XmlAttribute
    public String key;

    @XmlValue
    @XmlJavaTypeAdapter(MySmartAdapter.class)
    public Object value;

    public JAXBMapEntry()
    {
    }

    public JAXBMapEntry(Map.Entry<String, Object> entry)
    {
        key = entry.getKey();
        value = entry.getValue();
    }
} 
```

# c# - 将 .net 类库移植到 Windows Store Apps 类库

> ID：12028490
> 
> 赞同：4
> 
> 时间：2012-08-19T17:26:41.037
> 
> 标签：c#, .net, visual-studio-2012

我有一个面向 .net 4 的类库，并通过 Mono 在不同平台上使用。我现在想移植它以供 Windows 8 使用。我知道名称一直在变化，但目前在 VS2012 中称为“类库（Windows 商店应用程序）”。
我最初尝试将所有内容移植到“可移植类库”，但事实证明这太困难了，因为有些东西根本没有适用于所有目标平台的通用方法，而其他受支持的东西根本没有可用于编译器。
因此，我创建了一个 Windows Store 类库并创建了指向我的标准类库的现有文件的链接，因此更新一次将同时更新两者。我计划使用预处理指令在两个类库 EG 之间进行更改

```
#if NETFX_CORE
    Task.Delay(someTime);
#else
    new System.Threading.ManualResetEvent(false).WaitOne(sometime);
#endif 
```

我的问题是，如果这种方法似乎是一种明智的方法？我有相同的默认命名空间和程序集名称。这会对我的编译器造成问题吗？这些程序集面向不同的平台，因此永远不会在同一个应用程序中一起使用，但它们都位于 Visual Studio 中的同一个解决方案中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:01:45.960

总的来说，是的，这应该有效。该特定案例是一个糟糕的示例，因为这两种实现的功能非常不同，说明您可能需要重新考虑设计的某些方面。对于存在*类似*API 交换（具有类似语义）的情况，我个人倾向于将差异移到辅助方法后面，因此我的“主”代码不需要担心这一点 - 只是辅助代码。反射将是一个很好的例子（反射的变化令人讨厌）。

目标平台不同的两个项目应该没问题。我偶尔会遇到 IDE 故障，它抱怨临时文件。我认为这是由于项目之间共享文件。我已经[在connect上登录了](https://connect.microsoft.com/VisualStudio/feedback/details/750047/warnings-generated-for-anomylous-files-during-load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:27:15.363

尝试

```
Task.Delay(msDelay).Wait() 
```

# c++ - 类模板链接器错误

> ID：12028493
> 
> 赞同：2
> 
> 时间：2012-08-19T17:22:39.223
> 
> 标签：c++

我一直在尝试创建一个类笛卡尔，其中对象是笛卡尔点（int 或 double）上的 2 个点。然后我想重载<<。我收到错误消息：

```
Undefined symbols for architecture x86_64:
  "cartesian<double, int>::cartesian(double, int)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不明白我的错误在哪里。

标题

```
#include <iostream>    

using namespace std;

template <class first, class second>
class cartesian
{

public:
    cartesian(first, second);

    //double getslope(cartesian &obj1, cartesian &obj2);

    friend ostream& operator<< (ostream &out, cartesian &cPoint);                

private:
    first x;
    second y;

}; 
```

**CPP 文件**

```
#include "cartesian.h"
#include <iostream>

using namespace std;

template<class first,class second>

cartesian<first, second>::cartesian(first a, second b)
:x(a), y(b)
{}

/*
// between obj1 and obj2
template<class first,class second>
double cartesian<first, second>::getslope(cartesian &obj1, cartesian &obj2){

    return ((obj2.y-obj1.y)/(obj2.x-obj1.y));
}

*/

template<class first,class second>

ostream&  operator<< (ostream &out,const cartesian<first, second> &cPoint)
{
    // Since operator<< is a friend of the Point class, we can access
    // Point's members directly.
    out << "(" << cPoint.x << ", " <<
    cPoint.y << ")";

    return out;
} 
```

主要的

```
#include <iostream>
#include "cartesian.h"

using namespace std;

int main()
{

    cartesian<double, int> ob11(3.4, 6);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:28:05.667

您需要将实现放在头文件或头文件包含的文件中。编译器需要访问代码才能“构建”`cartesian<double, int>`您在`main`.

例如，这里我们将构造函数的实现放在类声明中：

```
template <class first, class second>
class cartesian
{

public:
    cartesian(first, second) :x(a), y(b) {}
}; 
```

它不必进入类声明本身，但代码必须可以从头文件中访问。

# javascript - 如何将查询字符串传递给 HTML 框架？

> ID：12028496
> 
> 赞同：0
> 
> 时间：2012-08-19T17:27:13.553
> 
> 标签：javascript, python, html, cgi

如何将查询字符串传递给 HTML 框架？

我在 index.html 中有以下 HTML：

```
<HTML>
<FRAMESET rows="200, 200" border=0>
  <FRAMESET>
    <FRAME name=top scrolling=no src="top.html">
    <FRAME name=main scrolling=yes src="/cgi-bin/main.py">
  </FRAMESET>
</FRAMESET>
</HTML> 
```

框架 src 是 main.py，它是一个 python cgi 脚本。这是在 main.py 中：

```
import cgi
form = cgi.FieldStorage()
test = form.getvalue('test') 
```

假设我使用 index.html?test=abcde 调用 url。如何将查询字符串传递给 main.py？这可能使用javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:03:02.593

[这](https://stackoverflow.com/a/2880929/1273830)应该可以帮助您从查询字符串中获取变量，您可以使用这些变量来构建您的自定义查询字符串。或者，如果您想将查询字符串按原样传递给框架，那么您可以获得一种更简单的方式。

`var queryString = window.location.href.split('index.html?')[1];`

现在，至于将其传递给框架，应该很容易，因为您只需将查询字符串附加到框架元素的`src`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:03:06.113

不确定这是否可行（未经测试），但也许您可以使用 jQuery 加载查询参数 onload？这是一个概念证明：

```
<html>
    <head>
    //Load jquery here, then do the following:
    <script type="text/javascript">
        $(document).ready(functin(){
        // navigator.href holds the current window's q params
        // you will have to write this funciton (fairly easy).
        var q = get_query_paramenters(navigator.href); 
        var top = $("<frame name=top scrolling=no src='top.html'></frame>"),
        main = $("<frame name=main scrolling=yes></frame>");
        main.attr("src", "/cgi-bin/main.py?" + q);

        $("#myframeset").append(top).append(main);

    });
    </script>
    </head>
<body>
    <FRAMESET rows="200, 200" border=0>
        <FRAMESET id='myframeset'>

        </FRAMESET>
    </FRAMESET>
</body>
</html> 
```

希望有帮助。

# jquery - plupload browse_button 不显示浏览对话框

> ID：12028499
> 
> 赞同：2
> 
> 时间：2012-08-19T17:27:20.580
> 
> 标签：jquery, jquery-ui, plupload

我正在使用 plupload 队列将图像上传到我们的服务器。我将 browse_button 的值设置为超链接的 id，因此它显示了一个浏览对话框。但是当我单击该超链接时，什么都没有显示，浏览器视图只是转到页面的中间。下面是部分代码。

（顺便说一句，我正在使用 jQuery UI 的对话框来弹出图像上传 div：）

```
<div id="dialog-form" title="Upload Images">        
    <div id="container" style="height: 200px;"></div>
    <br style="clear: both" />
    <a id="pickfiles" href="#">[Select files]</a>
</div>

<script type="text/javascript">
$(document).ready(function () {
$("#container").pluploadQueue({
       // General settings
       runtimes: 'gears,flash,silverlight,browserplus,html5',
       browse_button: 'pickfiles',
       url: '/someurl/image-upload',
       max_file_size: '10mb',
       chunk_size: '1mb',
       unique_names: true,

       // Resize images on clientside if we can
       resize: { width: 320, height: 240, quality: 90 },

       // Specify what files to browse for
       filters: [
                { title: "Image files", extensions: "jpg,gif,png,tiff,jpeg" }
                ],

                // Flash settings
                flash_swf_url: '/someurl/js/plupload.flash.swf',

            // Silverlight settings
            silverlight_xap_url: '/someurl/js/plupload.silverlight.xap'
        });

        //setup upload image dialog box
        $("#dialog-form").dialog({
            autoOpen: false,
            height: 400,
            width: 400,
            modal: true
        });
}); 
```

谁能告诉我为什么会发生这种情况而不是打开“浏览框”？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:09:31.763

plupload 队列小部件不会接受您的`browse_button`参数，因为它在实例化队列小部件时已经处理了设置的选项后在[内部设置了自己的参数。](https://github.com/moxiecode/plupload/blob/master/src/javascript/jquery.plupload.queue/jquery.plupload.queue.js#L235)

鉴于运行时还使用 init 事件来附加它们需要工作的内容，一旦在`browse_button`队列小部件上被覆盖，它就会使用该参数集直接进入选定的运行时，并且如果您想捕获 init 事件 if 只会**毕竟**这一切都已经发生了，为时已晚。

话虽如此，除了自己修改队列小部件之外，您无能为力。

# java - 如何链接到我的 Apache Wicket 应用程序中的图像文件夹？

> ID：12028502
> 
> 赞同：2
> 
> 时间：2012-08-19T17:27:32.770
> 
> 标签：java, image, apache, wicket, contextpath

我的包结构看起来像：

*   源/主/java
*   源/主/资源
*   源/测试/java
*   源/测试/资源
*   src/main/webapp/css
*   src/main/webapp/images
*   src/main/js
*   src/main/WEB-INF

我的图像存储在 src/main/webapp/images 下。

现在我想动态链接到图片，例如：

```
 Image picture = new Image("picture",
                    new ContextRelativeResource("/images/races/"
                            + dynamicPicture)); 
```

问题是，我的应用程序找不到 /images/races/$dynamicPicture。如何设置图像文件夹的正确路径？使用的应用服务器是 Jetty。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:50:52.927

实际上，您的代码应该可以工作。您是否使用 Maven 来管理您的项目并启动 Jetty？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:05:26.507

它将与（删除前导斜杠）一起使用

```
 Image picture = new Image("picture",
                new ContextRelativeResource("images/races/"
                        + dynamicPicture)); 
```

# html - 浮动自动生成的 HTML

> ID：12028518
> 
> 赞同：0
> 
> 时间：2012-08-19T17:28:39.460
> 
> 标签：html, css, html-table

我有以下自动生成的 HTML，我无法更改。此 HTML 在字段`em`之前显示消息`input`，但是我需要将其移动到输入字段的右侧。

我试过使用 float 到`em`，但它不起作用。我会很感激任何帮助。

```
<tr class="form-field">
    <th scope="row">
        <label for="user_email">Email</label>
        <em>Email is required.</em> 
    </th>
    <td>
        <input type="text" value="" id="user_email" name="user_email">
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:36:40.973

**CSS Only 解决方案（我不推荐，但可以）**

jsfiddle：http: [//jsfiddle.net/rLhTs/](http://jsfiddle.net/rLhTs/)

HTML：

```
<table>
    <tr class="form-field">
        <th scope="row">
            <label for="user_email">Email</label>
            <em>Email is required.</em> 
        </th>
        <td>
            <input type="text" value="" id="user_email" name="user_email">
        </td>
    </tr>
    <tr class="form-field">
        <th scope="row">
            <label for="user_name">Name</label>
            <em>Name is required.</em> 
        </th>
        <td>
            <input type="text" value="" id="name_email" name="name_email">
        </td>
    </tr>
</table> 
```

CSS：

```
​.form-field:nth-child(1):after { 
    content:"Email is required.";
}

.form-field:nth-child(2):after { 
    content:"Name is required.";
} 
```

​您只需要声明`:after`内容，`nth-child`并且需要具体了解您要替换的内容。

**这是一个 JavaScript 解决方案：**

看看这个 jsFiddle：http: [//jsfiddle.net/E8dJ9/3/](http://jsfiddle.net/E8dJ9/3/)

我已经对其进行了扩展，以向您展示它可以适用于任意数量的行。您可能需要根据您的实际特定用例对其进行一些改进。

以及完整性代码：

HTML：

```
<table>
    <tr class="form-field">
        <th scope="row">
            <label for="user_email">Email</label>
            <em>Email is required.</em> 
        </th>
        <td>
            <input type="text" value="" id="user_email" name="user_email">
        </td>
    </tr>
    <tr class="form-field">
        <th scope="row">
            <label for="user_name">Name</label>
            <em>Name is required.</em> 
        </th>
        <td>
            <input type="text" value="" id="user_name" name="user_name">
        </td>    
    </tr>
</table> 
```

JavaScript（使用 jQuery）：

```
$('th[scope="row"]').each(function(index, value) {
    var em = $(this).find('em').text();
    $(this).parent().find('td').append('<em>' + em + '</em>');
});​ 
```

CSS：

```
.form-field th em {
    display: none;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:32:42.607

尝试类似：

```
​label {
    float:left;
}
em {
    float: right;
}
input {
    float:left;
} 
```

虽然这会将 放在`em`父容器的最右边。考虑到它在一个表格中，它可能会按原样工作，除非我们拥有带有开始表格标签的完整 HTML 等，否则无法测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:41:07.050

如果您无法做到这一点，请
在
用户单击提交按钮而不输入电子邮件或输入的电子邮件格式错误，将无法提交表单并显示错误。

# silverlight - 在 Silverlight 中验证创建用户表单

> ID：12028521
> 
> 赞同：1
> 
> 时间：2012-08-19T17:29:27.307
> 
> 标签：silverlight, validation, xaml, asp.net-membership, data-annotations

我正在制作一个带有身份验证服务的 Silverlight 4.0 导航应用程序来管理用户、登录/注销等。

我在此页面上使用了 msdn 教程：http: [//msdn.microsoft.com/en-us/library/ee942451%28v=vs.91%29.aspx](http://msdn.microsoft.com/en-us/library/ee942451%28v=vs.91%29.aspx)

它工作得很好。我可以创建具有一些自定义配置文件属性的用户并登录和注销。

问题是我创建用户表单。与教程一样，我在我的服务项目中创建了一个名为 NewUser 的类，带有数据注释。这些似乎有效，就好像我尝试使用无效字段创建用户一样，创建失败，并且出现异常，并显示存在验证错误的消息。

我希望此验证适用于我的表单。在其他表单中，我只是将一个类的实例绑定到表单并将每个字段的绑定设置为validationOnException 为true 和notifyOnValidationError 为true。

我已经在创建用户表单中进行了绑定，就像在我的其他表单中一样，但它们似乎不起作用。我试图在 NewUser 类的一组属性中设置断点。看起来它根本没有被调用/使用。

这很可能是我遗漏了什么的简单问题，但我不知道是什么。这是否与 NewUser 类在我的服务项目中并且表单在客户端项目中的事实有关。我希望你们能帮助我。

我的 NewUser 类代码

```
public class NewUser 
{

    private string username;

    [Key]
    [Required()]
    public string UserName { get; set; }

    [Key]
    [Required()]
    [RegularExpression(@"^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$", ErrorMessage="Invalid email. An email must use the format username@mycompany.com")]
    public string Email { get; set; }

    [Required()]
    public string Firstname { get; set; }

    [Required()]
    public string Lastname { get; set; }

    [Required()]
    public DateTime Birthsday { get; set; }

    [Required()]
    public bool SentNewsletter { get; set; }

    [Required()]
    public bool SentReminders { get; set; }

    [Required()]
    public string Password { get; set; }

    [CustomValidation(typeof(RegistrationValidator), "IsPasswordConfirmed")]        
    public string ConfirmPassword { get; set; }

    [Required()]
    public string SecurityQuestion { get; set; }

    [Required()]
    public string SecurityAnswer { get; set; }

} 
```

我创建用户表单 xaml

```
<navigation:Page x:Class="OenskePortalen.Views.Pages.CreateNewUser" 
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
       mc:Ignorable="d"
       xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
       xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"                 
       xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
       xmlns:uc="clr-namespace:OenskePortalen.Views.Controls"
       d:DesignWidth="640" d:DesignHeight="680"
       Title="CreateNewUser Page">
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="40"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="180"/>
        <ColumnDefinition Width="10"/>
        <ColumnDefinition Width="160"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <uc:InfoBox Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4" DisplayText="Her kan du oprette dig som bruger på ØnskePortalen" VerticalAlignment="Top"/>

    <TextBlock Grid.Row="1" Grid.Column="0" Text="Brugernavn" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="1" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="1" Grid.Column="2" x:Name="txtUsername" Text="{Binding UserName, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5"  HorizontalAlignment="Left"  />

    <TextBlock Grid.Row="2" Grid.Column="0" Text="Fornavn" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="2" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="2" Grid.Column="2" x:Name="txtFirstname" Text="{Binding Firstname, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left"  />

    <TextBlock Grid.Row="3" Grid.Column="0" Text="Efternavn" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="3" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="3" Grid.Column="2" x:Name="txtLastname"  Text="{Binding Lastname, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left" />

    <TextBlock Grid.Row="4" Grid.Column="0" Text="Email" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="4" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="4" Grid.Column="2" x:Name="txtEmail" Text="{Binding Email, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left" />

    <TextBlock Grid.Row="5" Grid.Column="0" Text="Adgangskode" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="5" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <PasswordBox Grid.Row="5" Grid.Column="2" x:Name="txtPassword" Password="{Binding Password, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" />

    <TextBlock Grid.Row="6" Grid.Column="0" Text="Gentag adgangskode" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="6" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <PasswordBox Grid.Row="6" Grid.Column="2" x:Name="txtPasswordRepeat" Password="{Binding PasswordConfirm, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" />

    <TextBlock Grid.Row="7" Grid.Column="0" Text="Sikkerhedsspørgsmål" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="7" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="7" Grid.Column="2" x:Name="txtPasswordQuestion" Text="{Binding SecurityQuestion, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left" />

    <TextBlock Grid.Row="8" Grid.Column="0" Text="Sikkerhedssvar" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="8" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <TextBox Grid.Row="8" Grid.Column="2" x:Name="txtPasswordAnswer" Text="{Binding SecurityAnswer, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left" />

    <TextBlock Grid.Row="9" Grid.Column="0" Text="Fødselsdag" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="9" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <sdk:DatePicker Grid.Row="9" Grid.Column="2" x:Name="dpBirthsday" SelectedDate="{Binding Birthsday, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}"  VerticalAlignment="Center" Width="150" Margin="5" HorizontalAlignment="Left"/>

    <TextBlock Grid.Row="10" Grid.Column="0" Text="Nyhedsbrev" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="10" Grid.Column="1" Text=":" VerticalAlignment="Center"/>
    <CheckBox Grid.Row="10" Grid.Column="2" x:Name="cboxNewsletter" IsChecked="{Binding SentNewsletter, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Margin="5"/>

    <TextBlock Grid.Row="11" Grid.Column="0" Text="Påmindelser om fødselsdage" VerticalAlignment="Center"/>
    <TextBlock Grid.Row="11" Grid.Column="1" Text=":" VerticalAlignment="Center" />
    <CheckBox Grid.Row="11" Grid.Column="2" x:Name="cboxReminders" IsChecked="{Binding SentReminders, Mode=TwoWay, ValidatesOnExceptions=True, NotifyOnValidationError=True}" VerticalAlignment="Center" Margin="5"/>

    <StackPanel Grid.Row="12" Grid.Column="0" Grid.ColumnSpan="3" HorizontalAlignment="Right" Orientation="Horizontal" >

        <Button x:Name="btnCreate" Style="{StaticResource GreenButton}" Background="{StaticResource GreenGradientBrush}" Height="20" Margin="5" Click="btnCreate_Click" Cursor="Hand" >
            <TextBlock Text="Opret ny bruger" Style="{StaticResource textStyleBlack}" />
        </Button>

        <Button x:Name="btnCancel" Style="{StaticResource BlueButton}" Background="{StaticResource BlueGradientBrush}" Height="20" Margin="5"  Click="btnCancel_Click" Cursor="Hand" >
            <TextBlock Text="Annuller" Style="{StaticResource textStyleBlack}" />
        </Button>
    </StackPanel>

    <input:ValidationSummary Grid.Row="13" Grid.Column="0" Grid.ColumnSpan="3" />

</Grid> 
```

我在后面创建用户表单代码

```
public partial class CreateNewUser : Page
{
    private NewUser user;

    public CreateNewUser()
    {
        InitializeComponent();
        user = new NewUser();
        LayoutRoot.DataContext = user;
        dpBirthsday.SelectedDate = DateTime.Now;
        cboxNewsletter.IsChecked = true;
        cboxReminders.IsChecked = true;
    }

    private void btnCreate_Click(object sender, RoutedEventArgs e)
    {
        updateValidation();

        if (!Validation.GetHasError(LayoutRoot))
        {

            RegistrationDomainContext context = new RegistrationDomainContext();
            NewUser user = new NewUser();
            try
            {
                user.UserName = txtUsername.Text;
                user.Password = txtPassword.Password;
                user.Email = txtEmail.Text;
                user.ConfirmPassword = txtPassword.Password;
                user.SecurityQuestion = txtPasswordQuestion.Text;
                user.SecurityAnswer = txtPasswordAnswer.Text;
                user.Firstname = txtFirstname.Text;
                user.Lastname = txtLastname.Text;
                user.Birthsday = dpBirthsday.SelectedDate.GetValueOrDefault(DateTime.Now);
                user.SentNewsletter = cboxNewsletter.IsChecked.GetValueOrDefault(true);
                user.SentReminders = cboxReminders.IsChecked.GetValueOrDefault(true);

                context.NewUsers.Add(user);
                context.SubmitChanges(RegisterUser_Completed, null);
            }
            catch (Exception exc)
            {
                ErrorWindow w = new ErrorWindow(exc);
                w.Show();
            }

        } // end validation

    }

    private void RegisterUser_Completed(SubmitOperation so)
    {
        if (so.HasError)
        {

            ErrorWindow ew = new ErrorWindow(so.Error);
            ew.Show();
            so.MarkErrorAsHandled();
        }
        else
        {
            LoginParameters lp = new LoginParameters(txtUsername.Text, txtPassword.Password);
        }
    }

    private void btnCancel_Click(object sender, RoutedEventArgs e)
    {
        MainPage mp = Application.Current.RootVisual as MainPage;
        mp.contentFrame.Navigate(new Uri("/home", UriKind.Relative));
    }

    private void updateValidation()
    {
        foreach (var current in LayoutRoot.Children)
        {
            if (current is TextBox)
                (current as TextBox).GetBindingExpression(TextBox.TextProperty).UpdateSource();

            if (current is PasswordBox)
                (current as PasswordBox).GetBindingExpression(PasswordBox.PasswordProperty).UpdateSource();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:57:37.713

我相信您不能将数据绑定到私有字段 - 尝试将`user`您的代码隐藏更改为公共属性（也许看看实现 INotifyPropertyChanged）。

# c# - 如何在 C# 中有效地使用计时器

> ID：12028523
> 
> 赞同：1
> 
> 时间：2012-08-19T17:29:56.293
> 
> 标签：c#

我必须显示一个表单大约 5 秒，然后我必须关闭该表单，然后在显示新表单后显示其他表单，计时器必须停止。

我很难做到这一点。

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    Form5 f5 = new Form5();
    f5.Show();
    f5.label7.Text = label6.Text;

    MyTimer.Interval = 5000; // 0.5 mins
    MyTimer.Tick += new EventHandler(MyTimer_Tick);
    MyTimer.Start();
}

private void MyTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("All The Best for Your Test and Your Time Starts Now.");
    Form6 f6 = new Form6();
    f6.Show();
    MyTimer.Enabled = false;

    Form5 f5 = new Form5();
    f5.Hide();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:58:50.410

试试这个代码

```
 Form5 f5 = new Form5();
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
 {
    f5.Show();
    f5.label7.Text = label6.Text;

    MyTimer.Interval = 5000; // 0.5 mins
    MyTimer.Tick += new EventHandler(MyTimer_Tick);
    MyTimer.Start();
  }

  private void MyTimer_Tick(object sender, EventArgs e)
  {
    MessageBox.Show("All The Best for Your Test and Your Time Starts Now.");
    Form6 f6 = new Form6();
    f6.Show();
    MyTimer.Enabled = false;
    MyTimer.stop();        

    f5.Hide();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:59:44.597

我认为你让事情变得很困难。如果我对你的理解正确...

只需向 form5 添加一个计时器，设置它的属性`Enabled = true;`和`Interavl = 1000;`（1000 毫秒或 1 秒）。只需将计时器滴答事件处理程序添加到您的 form5 计时器中

```
private int _start = 0;
private int _seconds = 5;

private void timer1_Tick(object sender, EventArgs e)
{
        _start++;
        if(_start >= _seconds)
        {
             Close();
        }
} 
```

`_start`并且`_seconds`应该像表单类私有字段或事件处理程序之前的属性一样初始化。这段代码对我来说很好用，它会在显示 5 秒后关闭 form5。如果你想让它更灵活，例如如果你想设置 form5 应该显示多少秒 U 可以，例如，重新加载 form5 构造函数，如...

```
public Form5(int seconds)
{
       InitializeComponent();
       _seconds = seconds;
} 
```

在form1中，当您创建form5传递秒数时，您希望将form5显示为参数：

```
Form5 f5 = new Form5(5); 
```

我也认为最好在事件处理程序中直接创建表单 5 的新实例

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{

    new Form5(10).Show(); // show form5 for 10 seconds
    ...
} 
```

如果你想在 form5 关闭后显示另一个表单，只需在计时器滴答事件处理程序中的 form5 关闭之前显示它：

```
private void timer1_Tick(object sender, EventArgs e)
    {
            _start++;
            if(_start >= _seconds)
            {
                 new Form2().Show();
                 Close();
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:32:14.310

拉取`Form5`函数外部的声明，所以它是一个字段。就目前而言，*每个*函数都有这个类的*不同*实例。

```
Form5 f5 = new Form5();

private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    f5.Show();
    f5.label7.Text = label6.Text;

    MyTimer.Interval = 5000; // 0.5 mins
    MyTimer.Tick += new EventHandler(MyTimer_Tick);
    MyTimer.Start();
}

private void MyTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("All The Best for Your Test and Your Time Starts Now.");
    Form6 f6 = new Form6();
    f6.Show();
    MyTimer.Enabled = false;
    MyTimer.Stop();

    f5.Hide();
} 
```

注意：您确实应该重命名表单类和变量 -`f6`没有意义。叫它什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T17:36:00.817

尝试这个

```
 Form5 f5 = new Form5();  //declare form obj globally 

private void radioButton1_CheckedChanged(object sender, EventArgs e)
{

    f5.Show();
    f5.label7.Text = label6.Text;

    MyTimer.Interval = 5000; // 0.5 mins
    MyTimer.Tick += new EventHandler(MyTimer_Tick);
    MyTimer.Start();
}

private void MyTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("All The Best for Your Test and Your Time Starts Now.");
    Form6 f6 = new Form6();
    f6.Show();
    MyTimer.Enabled = false;

    f5.Hide();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T20:09:40.097

我看到了几个潜在的问题。首先，您应该只设置一次计时器，也许在表单构建时，您不需要设置间隔并在每次 radioButton1 的检查状态更改时连接一个偶数处理程序。

在 MyTimer_Tick 内部，**第一**行应该是调用 MyTimer.Stop() （只需调用 stop，你不需要弄乱 Enabled，它们做同样的事情）。

然后您可以显示 MessageBox（模式和阻塞），显示 Form6，隐藏 f5 等。

将 MessageBox.Show() 视为一个非常长时间运行的调用。在消息框被关闭之前它不会返回（它很容易花费超过 5 秒或任意时间）。当 MessageBox 启动时，计时器滴答事件仍在排队（因为停止计时器的行尚未执行）。值得查找 MessageBox.Show() 的文档并阅读模式对话框是什么以及它与替代方案有何不同。

并尝试清理其他人指出的名称。

# vb.net - 代码更改或设计器在调试时不会更新

> ID：12028525
> 
> 赞同：1
> 
> 时间：2012-08-19T17:30:17.167
> 
> 标签：vb.net, visual-studio-2010, visual-studio-debugging

我正在尝试在 Visual Studio Express 2010 中调试我的 VB.net 应用程序，当我意识到我的更改不会在我的表单上更新 - 在设计器上或在代码中。上网查了一下，发现应该把bin下的“Debug”文件夹清掉。那只奏效了一次。现在它又回到了旧版本，当我再次删除它时，它并没有改变。当我构建项目并从“Release”文件夹运行它时，它运行良好，但是当运行时发生错误时，它不会显示错误在哪里，因为它是独立运行的。

提前致谢。

（我有 Windows XP SP3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-19T13:35:32.443

我有同样的问题。令人沮丧的问题....？关闭项目，进入调试 bin/文件夹，删除这些文件，重新打开项目并重建它 (F5)。- .exe - .pdb - .vshost.exe - .vshost.exe.manifest - .xml

它工作 99.99%.......谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:58:47.553

嗯...如果是对我来说，有这样一个奇怪的错误，我会创建一个新项目，然后将文件（不是作为链接，而是作为副本）插入项目中，之后我很可能都会正常工作。 .. 比找到错误的参数在哪里还快...
那你是怎么做到的呢？那么创建一个新项目，选择文件夹和名称，如果需要在设置中更改命名空间，然后在项目资源管理器中添加现有项目，然后浏览并选择您的代码和 xaml（以及其他可能的）文件。让我们知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:08:04.380

在我创建一个新项目之前，我会将所有代码隐藏（包括创建您不应该触摸的控件的代码）复制到另一个表单中。这可能就是您需要做的所有事情。尝试编译该表单并运行它，看看它是否良好。如果是这样，您不必创建一个全新的项目，只需删除旧表单即可。

我认为有一些原因会更容易解决。是否有任何配置文件或类似的东西？你在正确的位置建造吗？

自从我完成 winforms 以来已经有一段时间了，但我记得这发生在 VS 2005 中，我刚刚创建了一个新表单并将代码隐藏复制到另一个 winform 并编译。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-10T21:35:01.097

这也发生在我身上。我相信我的应用程序的`/bin`和`/obj`文件夹必须已被其他应用程序锁定。在手动删除它们之前，我尝试以管理员身份运行 Visual Studio，并进行了清理和重建工作。如果它不适合您，请尝试手动删除文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-02T16:49:37.327

1.  关闭 VS
2.  按*Ctrl + Alt + 删除*
3.  选择*“任务管理器”*
4.  在*“任务管理器”的**“进程”*选项卡中，找到您的*“ProjectName.EXE”*，然后单击*“结束任务”*
****   重启VS***

 **** * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-07T23:28:51.310

我有同样的问题，但我将开始按钮旁边的解决方案配置从调试更改为发布，这解决了我的问题，试试吧:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-08T13:12:12.667

在 VS 2010 VB 中，在调试和发布模式下，“全部保存”对我有用。我将“全部保存”图标放在“运行”和“构建”图标旁边。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-21T10:43:58.077

首先确保表单的 Localizable 属性设置为 FALSE

[![可本地化的道具](../Images/c4abc2254558cef4a4dbc7f6a1436bed.png)](https://i.stack.imgur.com/scaut.png)***

# c++ - 如何使这个 boost::enable_if 代码编译（SFINAE）？

> ID：12028527
> 
> 赞同：3
> 
> 时间：2012-08-19T17:30:46.260
> 
> 标签：c++, boost, sfinae, enable-if

我很困惑为什么以下使用的代码`boost::enable_if`无法编译。它检查 type`T`是否有成员函数`hello`，如果是，则调用它：

```
#include <iostream>
#include <boost/utility/enable_if.hpp>
#include <boost/static_assert.hpp>

// Has_hello<T>::value is true if T has a hello function.
template<typename T>
struct has_hello {
  typedef char yes[1];
  typedef char no [2];
  template <typename U> struct type_check;
  template <typename U> static yes &chk(type_check<char[sizeof(&U::hello)]> *);
  template <typename  > static no  &chk(...);
  static const bool value = sizeof(chk<T>(0)) == sizeof(yes);
};

template<typename T>
void doSomething(T const& t,
                 typename boost::enable_if<typename has_hello<T>::value>::type* = 0
                 ) {
  return t.hello();
}

// Would need another doSomething` for types that don't have hello().

struct Foo {
  void hello() const {
    std::cout << "hello" << std::endl;
  }
};

// This check is ok:
BOOST_STATIC_ASSERT(has_hello<Foo>::value);

int main() {
  Foo foo;
  doSomething<Foo>(foo);
} 
```

我越来越

```
no matching function for call to ‘doSomething(Foo&) 
```

与`gcc 4.4.4`.

静态断言没问题，`has_hello<Foo>::value`确实如此`true`。我用`boost::enable_if`错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:58:10.280

for 的第一个参数`boost::enable_if`必须是*包含*名为的静态`bool`常量的类型`value`。您需要的是`enable_if_c`采用非类型`bool`参数的模板（注意 _c 后缀）。

```
template<typename T>
void doSomething(T const& t,
                 typename boost::enable_if_c<has_hello<T>::value>::type* = 0
                 ) {
  return t.hello();
} 
```

这[编译并运行](http://ideone.com/HAclh)良好。

[也在boost 文档](http://www.boost.org/doc/libs/1_50_0/libs/utility/enable_if.html)的第 2 段中解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T17:55:21.677

这里

```
typename has_hello<T>::value 
```

`has_hello<T>::value`不是*类型名称*。这是价值。

* * *

不确定`bost`，但以下工作（`gcc 4.7 std=c++0x`）：

```
template<typename T>
void doSomething(T const& t,
                 typename std::enable_if<has_hello<T>::value>::type* = 0
                 ) {
  return t.hello();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T17:53:49.373

到目前为止，我还没有使用 enable_if，但也许

```
typename boost::enable_if<has_hello<T>>::type* = 0 
```

# jsf-2 - JSF 2.1 错误处理

> ID：12028533
> 
> 赞同：1
> 
> 时间：2012-08-19T17:31:46.497
> 
> 标签：jsf-2, error-handling

在 JSF 2.1 中处理错误的正确方法是什么？我看过很多帖子提出了不同的建议，但我猜大多数是针对 JSF 的早期版本的。我只需要一个基本的错误处理来显示某些错误的某些错误页面和所有其他错误的一般错误页面。我对 2.1 的发现是将以下内容放入 web.xml：

```
<error-page>
    <error-code>404</error-code>
    <location>/faces/error.xhtml</location>
</error-page> 
```

这个对吗？抛出错误的正确方法是什么？是否与：

```
throw new WebApplicationException(Response.Status.NOT_FOUND); 
```

使用上述方法，错误会传播到 servlet 并记录在服务器中。有没有办法在不引发传播到 servlet 的异常的情况下处理错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:42:45.323

> *有没有办法在不引发传播到 servlet 的异常的情况下处理错误？*

你可以使用[`ExternalContext#responseSendError()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#responseSendError%28int,%20java.lang.String%29)它。

```
externalContext.responseSendError(HttpServletResponse.SC_NOT_FOUND, "some message");
facesContext.responseComplete(); 
```

请注意，这并不特定于 JSF 2.1。这同样适用于 JSF 2.0 和更早版本。另请注意，这种做法通常不是处理**异常**的正常做法（例如，您实际上捕获了一个；错误页面不是预检查失败的结果，其中根本没有引发异常）。通常，您只需抛出异常和/或通过像`throws`在 JSF 操作方法中`<error-page><exception-type>`那样重新声明它并让它去`web.xml`处理它。只有 JSF ajax 请求的异常处理需要自定义`ExceptionHandler`实现，但那是另一回事。

# jquery - JQuery 验证和复选框（Chrome/Safari）

> ID：12028539
> 
> 赞同：2
> 
> 时间：2012-08-19T17:32:26.557
> 
> 标签：jquery, css, google-chrome, safari, jquery-validate

我正在使用 jQuery Validation Plugin 1.9.0 来验证我的样式表单。我测试过 IE7/8/9、Firefox、Safari、Chrome 和 Opera。一切正常，除了验证 Safari 和 Chrome 中的复选框。没有错误消息或阻止发布表单。有什么我可以做的吗，或者这是 Safari 和 Chrome 的问题？

复选框：

```
<label class="checkbox" for="joingroupkey_1">
    <input type="checkbox" class="checkbox hiddeninput" value="1" id="joingroupkey_1" name="joingroupkey">
    <div class="checkbox styled"></div>
    Newsletter 1
</label>
<label class="checkbox" for="joingroupkey_2">
    <input type="checkbox" class="checkbox hiddeninput" value="2" id="joingroupkey_2" name="joingroupkey">
    <div class="checkbox styled"></div>
    Newsletter 2
</label>
<label class="checkbox" for="joingroupkey_3">
    <input type="checkbox" class="checkbox hiddeninput" value="3" id="joingroupkey_3" name="joingroupkey">
    <div class="checkbox styled"></div>
    Newsletter 3
</label> 
```

脚本：

```
$('#newsletter').validate({
    rules: {
        joingroupkey: {
            required: true,
            minlength: 1
        }
    },
    errorPlacement: function(label, element) {
        label.insertBefore(element);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:31:11.853

最后，我在一行简单的 css 中找到了我的问题的答案：

**输入，文本区域，选择 { -webkit 外观：无；-moz 外观：无；}**

当我删除此行时，验证正在工作。

我不得不承认我不知道这对脚本有何影响，我必须从生成的 html 顶部开始，逐行逐行，直到找到导致问题的 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T07:24:38.417

再添加一个 css 可以停止对 chrome 和 safari 中的复选框进行验证。（仍在 2018 年！！！）

```
width:0px;height:0px; 
```

# c++ - 高分辨率节目时间

> ID：12028543
> 
> 赞同：3
> 
> 时间：2012-08-19T17:33:06.353
> 
> 标签：c++, time, precision

我目前正在用 C++ 编写俄罗斯方块。现在我已经完成了程序编写的阶段，但我仍然需要修复一些错误并优化性能。

话虽如此，我的程序中的一个缺陷是它每秒只能处理一个按键。我需要它来处理至少三个。你可以看到这段代码展示的缺陷：

```
//Most headers only pertain to my main program.
#include <iostream>
#include <termios.h>
#include <pthread.h>
#include <time.h>
#include <cstring>
#include <stdio.h>
#include <string.h>
#include <sys/time.h>
#include <sys/types.h>
#include <unistd.h>

using namespace std;

//Timer function.
void *Timer(void*) {

    time_t time1, time2;

    time1 = time(NULL);

    while (time2 - time1 < 1) {
        time2 = time(NULL);
    }

    pthread_exit(NULL);
}

int main() {

    //Remove canonical buffering.
    struct termios t_old, t_new;
    tcgetattr(STDIN_FILENO, &t_old);
    t_new = t_old;
    t_new.c_lflag &= (~ICANON & ~ECHO);
    tcsetattr(STDIN_FILENO, TCSANOW, &t_new);

    const int STDIN = 0;

    struct timeval tv, tv1;
    fd_set readfds, readfds2, master;
    tv.tv_sec = 1;
    tv.tv_usec = 0;
    FD_ZERO(&readfds);
    FD_ZERO(&master);    
    FD_SET(STDIN, &readfds);
    FD_SET(STDIN, &master);
    char buffer[1];

    while(buffer[0] != 'q') {

        pthread_t inputTimer;

        pthread_create(&inputTimer, NULL, Timer, NULL);

        readfds = master;

        memcpy(&tv1, &tv, sizeof(tv));

        if (select(STDIN+1, &readfds, NULL, NULL, &tv1) == -1) {
            perror("select");
        }
        if (FD_ISSET(STDIN, &readfds)) {
            buffer[0] = cin.get();
            cout << "You entered: " << buffer << endl;

        }

        pthread_join(inputTimer, NULL);

        cout << "Timed out.\n" << endl;

    }

    cout << "Game Over." << endl;

    return 0;

} 
```

如您所见，该程序通过设置一秒间隔计时器和 timeval 来运行。因为两个计时器都使用整数来确定已经过去了多少时间，所以它们的精确度不能超过一秒。我怎样才能修改我的程序更精确？

我的想法是，如果按下某个键，则将 的值复制`tv1`到第三个值，然后再次等待输入，但无论值时间`tv1`是多少。例如，如果我在只剩半秒时按下一个键，则该值`0.5`将从另一个变量中获取`tv1`并复制到另一个变量中。然后程序将只等待半秒的输入，而不是一整秒。但是，这不起作用，因为`tv1`只有等于`1`or `0`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:36:11.017

尝试使用`struct timeval`和`gettimeofday()` `in sys/time.h`。您可以实现微秒级的分辨率。

手册页：http : [//linux.die.net/man/3/gettimeofday](http://linux.die.net/man/3/gettimeofday)

更多信息：[http ://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html](http://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html)

**编辑**：在 Linux（不能移植到 Windows 下的 MinGW）中，您还可以使用`poll()`（参见[此处](http://linux.die.net/man/2/poll)），它可以让您等待几毫秒。这会更有效，因为`poll`暂停线程执行直到时间结束。

```
//Timer function.
void *Timer(void*) {
    poll(0, 0, 100); //Suspend thread for 100 ms. 
    pthread_exit(NULL);
} 
```

该`poll`函数声明在`poll.h`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:02:08.043

这里的问题是`pthread_join`挂起主线程，直到计时器线程完成。因此，您将错过加入期间或之后的任何用户输入。由于您已经在使用，您不妨利用语句中`select`内置的超时。`select`如果您监视已用时间，则可以在没有计时器线程的情况下达到相同的效果。

# javascript - 使用 clearRect() 覆盖画布上的文本输出？

> ID：12028544
> 
> 赞同：0
> 
> 时间：2012-08-19T17:33:16.277
> 
> 标签：javascript, text, canvas

我正在 jsbin 上制作一个小游戏，到目前为止一切顺利，但我有一个小问题。游戏的目标是在一分钟内尽可能多地点击随机出现的圆圈。我希望它输出剩余的时间和角落的得分，我已经这样做了。问题是它们互相覆盖。这是因为为了防止闪烁我决定不使用

```
c.clearRect(0,0,canvas.width,canvas.height); 
```

而是在单击时在圆圈上方绘制一个 clearRect 。我想对文本做类似的事情。我用了这条线：

```
c.clearRect(0,fontSize,c.measureText(timeLeft),fontSize); 
```

这应该有效，但没有效果。我已经尝试了一切，但我不知道这条线有什么问题。我唯一的另一个理论是代码中的错误位置，但我没有发现问题。

这是我正在处理的当前版本的链接：http: [//jsbin.com/touchgame/10/edit](http://jsbin.com/touchgame/10/edit)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:34:21.353

measureText() 返回一个具有宽度属性的对象，因此需要使用 c.measureText(timeLeft).width。

此外，您减少了 timeLeft，*然后*调用了 clearRect，它将根据 timeLeft 的*新*宽度清除一个矩形。您想根据“旧” timeLeft 值的宽度清除，*然后*减少 timeLeft：

```
if (timeLeft < 1){
  c.clearRect(0,fontSize,c.measureText(timeLeft).width + 5,fontSize*1.5);

  timeLeft--;
  //clear over time output

  console.log(c.measureText(timeLeft));
} 
```

这应该有效。因为绘制文本的工作方式，准确地知道文本的边界框并非易事，所以这就是我们清除比 fontSize 更大的区域的原因。您可以使用 c.textBaseline = 'top'，它将顶部坐标的文本放置在您指定的 y 处，而不是 y 处的文本基线。

最后，我认为当您想要更新图形时，完全清除画布并重新绘制所有内容是一种更简单的方法。如果您清除画布，然后立即重新绘制所有内容，您将不会有任何闪烁。在大多数情况下，重绘所有内容对性能的影响通常可以忽略不计，它使事情变得简单得多。

# c# - 何时在 MVC4 中使用捆绑包

> ID：12028547
> 
> 赞同：3
> 
> 时间：2012-08-19T17:33:59.927
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, bundles, asp.net-optimization

在 MVC 4 中，我可以使用 @Styles.Render("~/Content/css") 调用定义 BundleConfig 文件的 CSS 文件包，而不是直接调用 CSS。

我们什么时候应该使用 bundle 而不是直接调用文件？当我们有各种 CSS 文件来简化代码时，我清楚地理解它。但是如果只有一个 CSS 文件，我们应该使用 bundle 还是直接调用呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T18:08:46.647

组合多个文件只是捆绑的各种有趣功能之一。

例如，捆绑包允许您应用各种**转换**（例如 CSS 的 LESS；缩小；JS 的混淆等）。

另一个不错的特性是它内置的**缓存机制**。这可确保客户端仅检索一次特定版本的捆绑包。对您的捆绑包所做的任何更改都将在下一次请求时由客户接收。

捆绑包也可用于CSS 或 JS 文件的**运行时交换**。例如，在您的开发环境中提供 JS 框架的调试版本，同时在您的生产环境中提供缩小版本。可以使用您喜欢的任何自定义逻辑在您的 Global.asax.cs 中进行切换（例如 Web.config 参数；编译器条件等）

# jquery - 将 jquery 与 this 和 html 一起使用

> ID：12028551
> 
> 赞同：1
> 
> 时间：2012-08-19T17:34:33.483
> 
> 标签：jquery, html, jquery-ui, jquery-selectors

在下面的代码中 .tg 是一个类标签。我收到警报`got here`但我没有看到这种情况发生`this.html(opt_arr[i]);`如何解决这个问题

```
 function populate_combo()
  {
     var opt_arr=new Array();

     var tg_len = $('.tg').length;
     arr_len = '{{response_dict.opt_arr_len}}';
     if(arr_len == tg_len)
     {
        alert("got here")
        {% for htm in response_dict.opt_arr %}
           opt_arr.push('{{htm}}') 
        {% endfor %}
        $(".tg").each(function (i) {
        this.html(opt_arr[i]);
           });

     }
     else
     {
        alert("There was an error while loadind dropdown box data");
     }

  } 
```

`EDIT`

```
 {% for td in response_dict.taggeddata %}
     <tr id="{{td.id}}">
     <td width="20%">{{td.field1}}</td>
      {% if response_dict.tag_flag == 1 %}
              <td class="tg"></td>
     {% endif %}
        </tr>
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:37:15.380

使用`$(this)`而不是`this`将其转换为jquery对象，并在其上使用jquery函数..

```
$(this).html(opt_arr[i]); 
```

[不工作](http://jsfiddle.net/qwSus)

[在职的](http://jsfiddle.net/qwSus/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:41:53.250

```
$(".tg").each(function (i, e) {
    e.innerHTML = opt_arr[i];
}); 
```

# c# - 获取跨度标签内容？

> ID：12028554
> 
> 赞同：-2
> 
> 时间：2012-08-19T17:35:24.077
> 
> 标签：c#, tags, html-agility-pack, html

好的，所以我想从`<span>`标签中获取情节摘要，它似乎不适用于所有网页。

这就是我所拥有的：

```
private ArrayList getSynopsis()
{
    for (int i = 0; i < animeURLList.Count; i++)
    {

            var mainURL = "http://www.animenewsnetwork.com";
            var theHTML = wc.DownloadString(mainURL + (string) animeURLList[i]);
            MessageBox.Show(theHTML);
            //inner html for the span info
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(theHTML);
            //var array = doc.DocumentNode.SelectNodes("//div[@id='infotype-12'][@class='encyc-info-type br']);
            //MessageBox.Show("got here" + array.ToString());
            ArrayList synopList = new ArrayList();;

            foreach (HtmlNode node doc.DocumentNode.SelectNodes("//div[@id='infotype-12'][@class='encyc-info-type br']"))
            {
                    synopList.Add(node.GetAttributeValue("span", "null"));
            }

    }
    return null;
} 
```

我正在尝试从以下位置获取文本：

```
<div id="infotype-12" class="encyc-info-type br">
<strong>Plot Summary:</strong> 
<span>Tooru takes a test so she can enter the same high school as Run, the girl she     likes. She passes, but when she goes to tell Run, she finds her hugging a girl she's never     seen before.</span>
</div> 
```

跨度标签中有情节摘要，这是我想要抓住的。

我仍然无法理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:47:45.763

Try the following in your loop:

```
synopList.Add(node.SelectSingleNode("span").InnerText); 
```

Additionally, the XPath you are using:

```
"//div[@id='infotype-12'][@class='encyc-info-type br']" 
```

Would be better as:

```
"//div[@id='infotype-12' and @class='encyc-info-type br']" 
```

# asp.net-mvc - 安全地将隐藏数据从视图传递到控制器

> ID：12028555
> 
> 赞同：2
> 
> 时间：2012-08-19T17:35:30.207
> 
> 标签：asp.net-mvc, model-view-controller, viewbag

在我的应用程序中，用户可以在他们之间转移积分。在我看来，我检查用户是否可以从他的帐户中转移积分，如果可以，我会渲染一些允许他这样做的东西。我不想在我的控制器中再次检查，所以我需要一些机制，这将允许我检查我为其呈现视图页面的用户是否与向我的控制器发送请求的用户相同。

所以基本上，我想检查我的控制器，如果当前登录的用户与发送请求的用户相同 - 为此，我认为我需要类似于 ViewBag 的东西，但不是从控制器到一个视图，但从视图到控制器。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:49:34.567

A proper way to do this will not be the transfer of such information between user requests. Every request shall be *stateless* but you trying to embed a state. This is a fair way to shoot yourself in a foot.

If your action requires authentication (you are who you say you are) you should do it using standard classic ASP net way. This will embed a standard authentication token to any further user requests. This way you will know that the user is authenticated or not.

For some actions that require authorisation (user has permissions to perform an action) you must validate that a user has the power to perform such action. This must be done for every request and it is usually a fast operation. No need to optimise things here by reducing your security barrier.

If you search for authentication and authorisation with classic asp, you will get a more fine grained answer on how to do the coding bit.

* * *

I wouldn't recommend, but you can still embed hidden information with

```
<input type="hidden" value="..."/> 
```

# backbone.js - 如何将模板排除在 /js/ 之外？

> ID：12028563
> 
> 赞同：3
> 
> 时间：2012-08-19T17:36:54.670
> 
> 标签：backbone.js, requirejs

我正在使用 RequireJS 2 以及骨干网和伙伴来构建网站。每个视图的开头通常是这样的：

```
define([
    'libs/jquery',
    'libs/underscore',
    'libs/backbone',
    'text!templates/coletas/agendamento.html',
], function(... 
```

我的问题是最后一行希望`js/templates/coletas/agendamento.html`在`/js/`. 有没有办法避免这种情况并将基本网址设置为`./templates/`每次我使用文本插件时？

我也不能使用绝对路径，因为我不知道我的代码最终会在服务器中的什么位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:39:16.410

这个片段来自我的 main.js

```
require.config({
  paths: {
    loader: 'libs/backbone/loader',
    jQuery: 'libs/jquery/jquery',
    Underscore: 'libs/underscore/underscore',
    Backbone: 'libs/backbone/backbone',
    templates: '../templates'
  }

}); 
```

这是一个示例 require.config ，您可以使用它来加载模块，例如我的评论（抱歉，直到我阅读您的评论，我才意识到我的应用程序中有这个）。

配置完成后，您可以像这样访问各种 javascript 库和单独的模板目录（此代码段来自我的 js/views/overview/main.js：

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'models/overview',
  'text!templates/overview/main.html'
  ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:57:25.630

我尝试遵循的目录结构`requirejs`是

```
webapp/
  main.js
  index.html
  app.js
  js/ <- your code here
  libs/ <- 3rd party stuff here
  templates/
  styles/
  etc/
  ... 
```

以便在`webapp`- 文件夹级别评估 require.js -modules 的依赖项，从而允许您保持不同类型文件的分离。

希望这可以帮助！

# c - 如何在 C 中使用“匿名”管道进行进程同步？

> ID：12028566
> 
> 赞同：2
> 
> 时间：2012-08-19T17:37:42.323
> 
> 标签：c, process, synchronization, pipe

我一直很难理解命令 pipe() 在 C 中是如何工作的。据我所知，匿名管道用于在两个“相关”进程之间发送/接收信息。
我发现读取和写入/写入相应文件描述符的条件非常令人困惑，并且不明白为什么必须关闭读取 fd 才能写入，反之亦然，以及如何使用它来阻止进程，直到另一个人读过或写过。

管道如何用于同步进程？例如，如何使用 pipe() 实现以下流程层次结构？

```
A / B ----D\
  \ C ------\
             E 
```

-A 必须在创建 B 和 C 之前完成。
-B 必须在创建 D 之前完成。
-C 和 C 必须在 E 创建之前完成。
-B 和 C 可以按任何顺序完成

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:30:45.030

我已经模拟了您提到的流程同步并提供了评论。希望这个概念现在很清楚。

注意这里没有通过管道读取数据，它仅用于实现同步，通过使用读取功能的阻塞特性，当管道的写入端仍然打开时。

```
#include<stdio.h>
#include<stdlib.h>
#include<sys/types.h>
#include<unistd.h>
#include<sys/wait.h>
#define MAXBUF 1

int main(){

    int ret, i, fd[2];
    char buf[MAXBUF];

    //Create a Pipe
    pipe(fd);

    ret = fork();//Creating process A
    if (0 == ret)
    {
            printf("Process - A created\n");
            exit(0);
    }
    //I need to wait till Process - A completes
    //Let me close my write end else I will be blocked for ever in the loop below
    close(fd[1]);

    //Waiting over reading the pipe -> The loop will come out when Process A exits
    //Why ->since all the write ends of the pipe are closed, so read returns 0
    while ((ret = read(fd[0], buf, MAXBUF)) > 0)
    {
            //Just Wait, the read blocks till A exits and then read returns 0
    }
    //Again a pipe to synchronise B and C
    pipe(fd);

    //Lets Create Now  B and C

    ret = fork();
    if (0 == ret)
    {
            printf("Process - B created\n");
            exit(0);
    }
    ret = fork();
    if (0 == ret)
    {
            printf("Process - C created\n");
            exit(0);

    }
    //Let me close my Write End of pipe
    close(fd[1]);

    //Here Waiting for Termination of both B and C who can terminate in any order.
    while ((ret = read(fd[0], buf, MAXBUF)) > 0)
    {
            //This loop will turn false only if both B & C have exited.
            //Since both the write ends of the pipe that
            //were there in B and C will no longer be available
            //after they exit and thus the read will return 0
            //Just Wait ..Do nothing
    }
    //Now all A, B, C are finished.
    //Create D and E
    ret = fork();
    if (0 == ret)
    {
            printf("Process - D created\n");
            exit(0);
    }
    ret = fork();
    if (0 == ret)
    {
            printf("Process - E created\n");
            exit(0);

    }
//Here let the main process wait for all the 5 Child to complete
    //This is not needed, but I gave given so that the Shell
    //Prompt is shown after the code exits..
    //If this is deleted then you need to press return
    //to get back the shell prompt after the code completes execution.
    for (i = 0; i < 5; i++)
    {
            wait(NULL);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:43:01.927

Pipes are not used for process synchronization, not directly anyway. Instead it's a way to communicate.

For example, a process creates a pair of pipes (one write-end and one read-end), then forks so a new child process is created. The parent can then send data to the child process through the pipe.

# java - JAVA+POI API Excel-需要增加列宽

> ID：12028568
> 
> 赞同：10
> 
> 时间：2012-08-19T17:38:01.883
> 
> 标签：java, apache-poi

我想增加excel表格列的宽度。因为我正在编写槽代码很长。我需要手动拖动列才能看到全文。

我这样做了——</p>

```
HSSFRow dataRow = sampleDataSheet.createRow(0);

HSSFCellStyle cellStyle = setHeaderStyle(sampleWorkbook);

cellStyle.setWrapText(true);

***sampleDataSheet.autoSizeColumn(1000000);*** 
```

但它没有改变任何东西..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T17:56:24.930

这应该有效。然而，

```
sampleDataSheet.autoSizeColumn(1000000); 
```

自动展开第 1000000 列。

如果要自动扩展第 0 列（第一列），请使用：

```
sampleDataSheet.autoSizeColumn(0); 
```

要自动将第 0 列扩展到第 9 列（前 10 列）：

```
for (int i=0; i<10; i++){
   sampleDataSheet.autoSizeColumn(i);
} 
```

此外，在调用 autoSizeColumn 之前，您应该先创建所有行并用内容填充它们（因此该列获取具有最宽宽度的值的宽度）。

（如果要将列宽设置为固定值，请改用 HSSFSheet.setColumnWidth(int,int)。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T06:20:05.053

```
// We can set column width for each cell in the sheet        
sheet.setColumnWidth(0, 1000);
sheet.setColumnWidth(1, 7500);
sheet.setColumnWidth(2, 7500);

// By applying style for cells we can see the total text in the cell for specified width
HSSFCellStyle cellStyle = workBook.createCellStyle();
cell.setCellStyle(cellStyle );
cellStyle.setWrapText(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T19:01:01.537

`sheet.autoSizeColumn(columnNumber)`作品。这会将列的大小调整为最大的单元格长度。

# macos - OSX Mountain Lion OpenGL - glDrawPixels() 不工作

> ID：12028576
> 
> 赞同：1
> 
> 时间：2012-08-19T17:39:32.217
> 
> 标签：macos, opengl, osx-lion

我正在尝试在 OSX Mountain Lion for OpenGL 上进行一些基本演示。有些工作，但基本的不工作。具体来说，我的 X 窗口上出现了垃圾。这是演示中的代码（如果格式混乱，请见谅）：

```
/* W B Langdon at MUN 10 May 2007
 * Program to demonstarte use of OpenGL's glDrawPixels
 */

#ifdef _WIN32
#include <windows.h>
#endif

#include <GL/gl.h>
#include <GL/glext.h>
#include <GL/glut.h>

#include <iostream>
#include <sstream>
#include "math.h"

unsigned int window_width = 512, window_height = 512;
const int size=window_width*window_height;

struct rgbf {float r; float g; float b;};
//WBL 9 May 2007 Based on
//http://www.codeguru.com/cpp/w-d/dislog/commondialogs/article.php/c1861/
//Common.h
void toRGBf(const float h, const float s, const float v,
        rgbf* rgb)
{
  /*
    RGBType rgb;
    if(!h  && !s)
    {
    rgb.r = rgb.g = rgb.b = v;
}
  */
  //rgbf* rgb = (rgbf*) out;
  double min,max,delta,hue;

  max = v;
  delta = max * s;
  min = max - delta;

  hue = h;
  if(h > 300 || h <= 60)
  {
      rgb->r = max;
      if(h > 300)
      {
        rgb->g = min;
        hue = (hue - 360.0)/60.0;
        rgb->b = ((hue * delta - min) * -1);
      }
      else
      {
        rgb->b = min;
        hue = hue / 60.0;
        rgb->g = (hue * delta + min);
      }
  }
  else
  if(h > 60 && h < 180)
  {
    rgb->g = max;
    if(h < 120)
    {
        rgb->b = min;
        hue = (hue/60.0 - 2.0 ) * delta;
        rgb->r = min - hue;
    }
    else
    {
        rgb->r = min;
        hue = (hue/60 - 2.0) * delta;
        rgb->b = (min + hue);
    }
  }
  else
  {
    rgb->b = max;
    if(h < 240)
    {
        rgb->r = min;
        hue = (hue/60.0 - 4.0 ) * delta;
        rgb->g = (min - hue);
    }
    else
    {
        rgb->g = min;
        hue = (hue/60 - 4.0) * delta;
        rgb->r = (min + hue);
    }
}
}

//Convert a wide range of data values into nice colours 
void colour(const float data, float* out) {
//convert data to angle
const float a = atan2(data,1)/(2*atan2(1,1)); // -1 .. +1
const float angle = (1+a)*180; //red=0 at -1,+1

const float saturation = 1;

const float h = (data<-1||data>1)? 1 : fabs(data);

toRGBf(angle,saturation,h,(rgbf*)out);
}

void display()
{
//Create some nice colours (3 floats per pixel) from data -10..+10
float* pixels = new float[size*3];
for(int i=0;i<size;i++) {
    colour(10.0-((i*20.0)/size),&pixels[i*3]);
} 

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

//http://msdn2.microsoft.com/en-us/library/ms537062.aspx
//glDrawPixels writes a block of pixels to the framebuffer.

glDrawPixels(window_width,window_height,GL_RGB,GL_FLOAT,pixels);
glFlush();

glutSwapBuffers();
}

int main(int argc, char** argv) {
glutInit(&argc, argv);

glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
glutInitWindowSize(window_width, window_height);
glutCreateWindow("OpenGL glDrawPixels demo");

glutDisplayFunc(display);
//glutReshapeFunc(reshape);
//glutMouseFunc(mouse_button);
//glutMotionFunc(mouse_motion);
//glutKeyboardFunc(keyboard);
//glutIdleFunc(idle);

glEnable(GL_DEPTH_TEST);
glClearColor(0.0, 0.0, 0.0, 1.0);
//glPointSize(2);

glutMainLoop();
} 
```

这就是我得到的：

[错误的](http://www.flickr.com/photos/67195085@N05/7816630336/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:53:35.300

请考虑`glDrawPixels`不再相关。自版本 OpenGL-2 以来，它已被 OpenGL 弃用（阅读：不要在新代码中使用）。自 OpenGL-3 核心配置文件以来，它已被贬值（不同的词，请注意“i” - 阅读：已被删除）。

改用带纹理的四边形。

# visual-studio-2010 - Visual Studio Express 2010 (WP 7 SDK)，没有可用的目标

> ID：12028583
> 
> 赞同：0
> 
> 时间：2012-08-19T17:40:44.947
> 
> 标签：visual-studio-2010, windows-phone-7

我刚刚在新安装的 Windows 7 上安装了 Windows Phone 7.1 SDK + 7.1.1 更新。7.1 SDK 的安装很顺利，在应用 7.1.1 更新期间，我的虚拟机冻结了，我花了一些时间来获取系统再次启动，在启动期间使用 MS 恢复。然后我重新应用了 7.1.1 更新。

现在，在启动 VS Express 并创建一个新项目后，我无法选择一个目标来测试我的应用程序，下拉菜单只是空的（这发生在新创建的项目和现有项目中）。

![带有空下拉菜单的屏幕截图](../Images/8adbd637005491d3dc337f12e02542ac.png)

任何提示可能有什么问题？

# javascript - 数组中的 Javascript 对象

> ID：12028588
> 
> 赞同：0
> 
> 时间：2012-08-19T17:41:37.183
> 
> 标签：javascript, arrays, object

我正在尝试使用此处介绍的 Ajax 文件上传：http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)

如您所见，我需要创建一个 qq.FileUploader 对象来初始化脚本。但是，我需要能够在不知道元素 ID 的情况下动态创建这些对象。我试过创造这样的东西：

```
var uploader, i = 0;
$(".file-upload").each(function() {
    $e = $(this);
    i++;
    uploader[i] = new qq.FileUploader({
        element: $(this)[0],
        action: 'uploadfile.php',
        allowedExtensions: ['doc', 'docx', 'pdf'],
        multiple: false,
        onComplete: function(id, fileName, responseJSON) {
            $($e).siblings('input').val(responseJSON.newfilename);
        }
    });
}); 
```

我了解到`[i]`我添加的部分破坏了脚本，因为我不能在数组中包含对象。

还有另一种方法可以动态创建这些对象吗？它们都需要有一个唯一的名称，否则`onComplete`函数会被所有函数覆盖。我尝试使用`eval()`，但似乎无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:44:04.173

您必须先声明`uploader`为数组：

```
var uploader = []; 
```

因为您声明了变量而没有定义它，所以它的默认值是`undefined`，并且您的代码被翻译成类似`undefined[i]`触发错误的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:45:47.140

必须是类似的东西

```
var uploader = {}; 
```

否则 uploader 为空，您无法为其分配任何内容。

**编辑**：

因此，在我看来，有两种选择，如果一个人想要一个数组，那么声明一个数组是有意义的，`var uploader = [];`然后使用该`uploader.push()`方法或将其定义为一个对象`var uploader = {};`，然后执行`uploader[i] = ...`.

后者也可以用 a 数组来做，但在后一种情况下，我认为维护计数器 ( `i`) 没有意义。

# scala - Scala——不是包的成员

> ID：12028590
> 
> 赞同：2
> 
> 时间：2012-08-19T17:41:41.483
> 
> 标签：scala

我正在学习 Scala，如果这是一个愚蠢的问题，请耐心等待。

我有这个包和一个类（将其分解为最简单的版本）：

```
package Foo {
  class Bar {}
} 
```

然后在`main.scala`文件中我有：

```
import Foo.Bar

object test {
  def main() {
    val b = new Bar()
  }
} 
```

为什么我得到这个：

> test.scala:1：错误：Bar 不是 Foo 的成员

它指向`import`声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T20:44:43.123

`scalac`是 scala 编译器。`Foo.bar`需要为您编译才能使用它，因此您不能只将 main.scala 作为脚本运行。

您的代码中的另一个错误是该`main`方法需要

```
def main(args: Array[String]) {  ... 
```

（或者您可以`test extends App`改用该方法并取消该`main`方法）。

我可以确认您是否将上面的两个文件放在一个空目录中（在主方法签名上进行了更正）并运行，`scalac *`然后`scala test`它运行正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:52:34.327

最可能的解释是你没有编译第一个文件，或者你在编译时做错了什么。假设两个文件都在当前目录中，那么这应该可以工作：

```
scalac *.scala 
```

它应该在当前目录中生成一些类文件，以及`Bar.class`在`Foo`目录中创建的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:37:48.667

要在 IntelliJ 中快速测试 Scala 代码（使用Scala[插件](http://confluence.jetbrains.net/display/SCA/Scala+Plugin+for+IntelliJ+IDEA)），您只需键入`Ctrl`++ `Shift`：`F10`

![Scala 中的测试代码](../Images/a5f606d6a9256683ac0cee2e32b17ba4.png)

请注意，为了测试 Scala 类，您还有其他选择，IntelliJ 也支持：

*   [JUnit 或 TestNG](http://confluence.jetbrains.net/display/SCA/Testing+Frameworks+Support)
*   [ScalaTest](http://confluence.jetbrains.net/display/SCA/ScalaTest+Support)

# android - 计算区域的总面积

> ID：12028593
> 
> 赞同：1
> 
> 时间：2012-08-19T17:42:06.653
> 
> 标签：android, path, region

我希望能够知道一个区域所覆盖的总面积（例如，该区域的双重积分）。我找不到任何方法，我想知道我是否必须逐像素进行。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:02:37.373

您应该能够使用 a`RegionIterator`并将返回的矩形的面积相加。

推理：Andriod 文档暗示当对区域执行布尔操作时，结果区域是一组具有所需联合的新的非重叠矩形。换句话说，`A - B`如果 A 和 B 是矩形，则结果可能会产生 0、1、2、3 或 4 个矩形。

我还没有测试过，但[Android xRef 站点上](http://androidxref.com/4.1.1/xref/frameworks/native/libs/ui/Region.cpp)的源代码显示经过验证的区域由没有重叠的矩形组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T17:30:47.140

看来，我和你的问题一样的问题。

我不确定它是否是“真正的”解决方案。但我发布我的代码。这些值看起来不错。

```
private void calculateArea(Region region) {

        RegionIterator regionIterator = new RegionIterator(region);

        int size = 0; // amount of Rects
        float area = 0; // units of area

        Rect tmpRect= new Rect(); 

        while (regionIterator.next(tmpRect)) {
            size++;
            area += tmpRect.width() * tmpRect.height();
        }

        log.d("Rect amount=" + size);
        log.d("Area Size / units of area=" + area);
    }

} 
```

我的问题是：我想获得一些绘制路径的区域大小。为了识别路径上的触摸，我也添加了一个区域。

# sql-server - 将特殊字符（大于/小于或等于符号）插入 SQL Server 数据库

> ID：12028594
> 
> 赞同：8
> 
> 时间：2012-08-19T17:42:07.670
> 
> 标签：sql-server, unicode, nvarchar

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-19T17:50:51.200

要使其工作，**请在字符串前面加上`N`**

```
create table symboltable 
(
  val nvarchar(10)
)

insert into symboltable values(N'≥') 

select *
from symboltable 
```

![在此处输入图像描述](../Images/10cb87ae00ba94280c3a5d612dc60a89.png)

**延伸阅读**：

*   [在 SQL Server 中处理 Unicode 字符串常量时，必须在所有 Unicode 字符串前面加上前缀 N](https://web.archive.org/web/20150114081311/http://support.microsoft.com:80/kb/239530/en-us "http://support.microsoft.com/kb/239530/en-us 的存档")
*   [为什么有些 SQL 字符串有一个“N”前缀？](https://web.archive.org/web/20150208024547/http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html "http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html 的存档")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-15T00:35:18.537

要添加到 gonzalo 的答案，*字符串文字*和*字段*都需要*支持 unicode characters*。

### 字符串字面量

Per Marc Gravell 关于[N' 在 SQL 脚本中代表什么的回答？](https://stackoverflow.com/a/14353311/1366033)：

> `'abcd'`是`*[var]*char`字符串的文字，占用 4 字节内存，并使用*SQL 服务器配置的任何代码页*。
> `N'abcd'`是字符串的文字，占用8字节内存，使用UTF-16。`**n***[var]*char`

其中`N`前缀代表 SQL-92 标准中的“*国家*”语言，用于表示 unicode 字符。例如，在以下代码中，基本字符串文字中的任何 unicode 字符首先被编码到 SQL Server 的“代码页”中：

[![<code>SELECT '≤'  AS ['≤'], N'≤'  AS [N'≤']</code>](../Images/e233cee28fa160d6fd77b65a7dbd5f7b.png)](https://i.stack.imgur.com/vmK7p.png)

> **旁白**：您可以使用以下 SQL [检查您的代码页：](https://stackoverflow.com/q/7321159/1366033)
> 
> ```
> SELECT DATABASEPROPERTYEX('dbName', 'Collation') AS dbCollation;
> SELECT COLLATIONPROPERTY( 'SQL_Latin1_General_CP1_CI_AS' , 'CodePage' ) AS [CodePage]; 
> ```
> 
> 默认为[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)，仅[包含这 256 个字符](https://www.w3schools.com/charsets/ref_html_ansi.asp)

### 字段类型

一旦值能够被*传递*，它们还需要能够*存储*到[支持 unicode 类型的列中](https://docs.microsoft.com/en-us/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql?view=sql-server-2017)，例如：

*   `nchar`
*   `nvarchar`
*   `ntext`

**延伸阅读**：

*   [为什么我们需要在 Microsoft SQL Server 中将 N 放在字符串之前？](https://softwareengineering.stackexchange.com/q/155859/87466)
*   [T-SQL语句中前缀N是什么意思？](https://stackoverflow.com/q/10025032/1366033)
*   [在 SQL Server 中处理 Unicode 字符串常量时，必须在所有 Unicode 字符串前面加上前缀 N](https://web.archive.org/web/20150114081311/http://support.microsoft.com:80/kb/239530/en-us "http://support.microsoft.com/kb/239530/en-us 的存档")
*   [为什么有些 SQL 字符串有一个“N”前缀？](https://web.archive.org/web/20150208024547/http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html "http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html 的存档")

# android - Invoke specific menu from the sim toolkit menu using an app

> ID：12028595
> 
> 赞同：2
> 
> 时间：2012-08-19T17:42:15.050
> 
> 标签：android, mobile, sim-card

How to make a shortcut or an app for android that we can put on the homescreen and invoke a specific menu from the sim toolkit menu? We need to go directly to a menu from the operator sim menu.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:24:38.487

除非目标应用程序公开了某种形式的 API 以明确允许它，否则您无法以编程方式控制另一个应用程序。

# javascript - 和兼容的单例 Backbone.Model

> ID：12028600
> 
> 赞同：2
> 
> 时间：2012-08-19T17:43:16.130
> 
> 标签：javascript, global-variables, requirejs, amd

嗨，有人能给我一个带有下划线的 one() 的 requirejs 单例的可理解示例吗？

我有这个：

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {

    var SingletonModel = Backbone.Model.extend({
        urlRoot: "/model",
        idAttribute: "_id"
    });

    return function() {
        once(SingeletonModel);
    };

}); 
```

正如你所看到的，return 语句完全是废话。我只是不知道如何单例 Backbone.Model ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:58:23.833

如果你想要一个 AMD 兼容的单例，你可以使用以下命令：

```
define(
    [...],
    function() {
        var MyModel = Backbone.Model.extend({
            //...
        });

        return new MyModel();
    }
); 
```

由于 require.js 的工作方式，您应该只获得一个 MyModel 实例。

据我了解，`_.once(someFunction)`生成一个只能调用一次的函数，因为它的返回值是存储的，所以每次在第一次调用该函数后，都会返回它的原始返回值。

但是，对于单例情况，您使用的 with`_.once(MyModel)`返回一个构造函数，该构造函数始终返回相同的对象（据我所知）。我们可以测试一下：http: [//jsfiddle.net/gfarrell/Z3CNc/](http://jsfiddle.net/gfarrell/Z3CNc/)

正如您在那个小提琴中看到的那样，如果您`return this;`在构造函数的末尾就可以了。尝试删除`return this;`然后使用控制台输出检查第二个实例，您会发现它没有第一个实例的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:51:30.503

我正在做这个

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {

    var SingletonModel = Backbone.Model.extend({
        urlRoot: "/model",
        idAttribute: "_id"
    });

    if (SingletonModel.prototype._instance){
        return SingletonModel.prototype._instance;
    }
    SingletonModel.prototype._instance = new SingletonModel;
    return SingletonModel.prototype._instance;

}); 
```

那么你只需要这个文件并使用它作为一个实例。

编辑：还没有尝试过，但是 once() 的用法应该适合你的情况

```
underscore.once() 
```

# asp.net - 如何在自定义 WebAPI HttpMessageHandler 中安全地设置用户主体？

> ID：12028604
> 
> 赞同：53
> 
> 时间：2012-08-19T17:43:46.890
> 
> 标签：asp.net, .net, asp.net-mvc, security, asp.net-web-api

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-19T23:25:55.100

The problem of losing the principal on a new thread is mentioned here:

[http://leastprivilege.com/2012/06/25/important-setting-the-client-principal-in-asp-net-web-api/](http://leastprivilege.com/2012/06/25/important-setting-the-client-principal-in-asp-net-web-api/)

> **Important: Setting the Client Principal in ASP.NET Web API**
> 
> Due to some unfortunate mechanisms buried deep in ASP.NET, setting Thread.CurrentPrincipal in Web API web hosting is not enough.
> 
> When hosting in ASP.NET, Thread.CurrentPrincipal might get overridden with HttpContext.Current.User when creating new threads. This means you have to set the principal on both the thread and the HTTP context.

And here: [http://aspnetwebstack.codeplex.com/workitem/264](http://aspnetwebstack.codeplex.com/workitem/264)

> Today, you will need to set both of the following for user principal if you use a custom message handler to perform authentication in the web hosted scenario.
> 
> ```
> IPrincipal principal = new GenericPrincipal(
>     new GenericIdentity("myuser"), new string[] { "myrole" });
> Thread.CurrentPrincipal = principal;
> HttpContext.Current.User = principal; 
> ```

I have added the last line `HttpContext.Current.User = principal` (needs `using System.Web;`) to the message handler and the `User` property in the `ApiController` does always have the correct principal now, even if the thread has changed due to the task in the MediaTypeFormatter.

**Edit**

Just to emphasize it: Setting the current user's principal of the `HttpContext` is only necessary when the WebApi is hosted in ASP.NET/IIS. For self-hosting it is not necessary (and not possible because `HttpContext` is an ASP.NET construct and doesn't exist when self hosted).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T20:22:15.940

To avoid the context switch try using a `TaskCompletionSource<object>` instead of manually starting another task in your custom `MediaTypeFormatter`:

```
public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
{
    var tcs = new TaskCompletionSource<object>();

    // some formatting happens and finally a TestModel is returned,
    // simulated here by just an empty model
    var testModel = new TestModel();

    tcs.SetResult(testModel);
    return tcs.Task;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T14:51:42.123

Using your custom MessageHandler you could add the `MS_UserPrincipal` property by calling the `HttpRequestMessageExtensionMethods.SetUserPrincipal` extension method defined in `System.ServiceModel.Channels`:

```
protected override Task<HttpResponseMessage> SendAsync(
    HttpRequestMessage request, CancellationToken cancellationToken)
{
    var user = new GenericPrincipal(new GenericIdentity("UserID"), null);
    request.SetUserPrincipal(user);
    return base.SendAsync(request, cancellationToken);
} 
```

Note that this only adds this property to the Request's Properties collection, it doesn't change the User attached to the ApiController.

# css - 是否可以在内部样式之后加载外部样式表？

> ID：12028606
> 
> 赞同：3
> 
> 时间：2012-08-19T17:44:01.163
> 
> 标签：css

加载内部（或嵌入）样式后是否可以加载外部样式表。我的意思是，假设我有一个**黄色**背景色的 div，在页面中使用嵌入样式设置，例如；

```
<style type="text/css">
div{
  background-color: yellow;
}
</style> 
```

我可以将背景颜色更改为`green`使用外部样式表吗？

```
<link rel="stylesheet" href="style.css" type="text/css" /> 
```

如果这是可能的，请给我一个例子。

我知道内联样式可以做到这一点，但我不想使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:46:14.237

是的。

只需将标签放在`<link>`标签之后`<style>`，或者使外部样式表中的选择器更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:48:42.533

要回答你的问题，是的，你可以。样式将按特定顺序应用。有关 CSS 中的优先规则，请参见[此处](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-19T17:56:48.930

如果你想用同一个类覆盖一个css，你可以在那个类中使用'important'。学习更多关于 CSS 中的重要信息。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-19T17:58:32.443

当然，您可以将外部样式表放在 HTML**头部**的内部样式表之后，以覆盖内部样式表！

**CSS 订单**

当为一个 HTML 元素指定了多个样式时，将使用什么样式？

一般来说，我们可以说所有样式都会通过以下规则“级联”成一个新的“虚拟”样式表，其中第四个具有最高优先级：

**1.**浏览器默认

**2.**外部样式表

**3.**内部样式表（在头部）

**4.**内联样式（在 HTML 元素内）

# inversion-of-control - Unity IoC Explicitly ask container for new instance

> ID：12028612
> 
> 赞同：1
> 
> 时间：2012-08-19T17:45:58.650
> 
> 标签：inversion-of-control, unity-container

It appears that Unity IoC defaults to creating a new instance of an object when it resolves a type. But my question is there someway to be explicit and tell my container that whenever I have it resolve an object type to give me a new instance of said type?

IE i want to be explicit and force the container to make sure theInstance is a new instance each time it resolves type:MyNewObject (or all types for that matter)

```
MyNewObject theInstance = container.Resolve<MyNewObject>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:53:09.300

是的，它可以通过[TransientLifetimeManager轻松配置](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.transientlifetimemanager.aspx)

当你注册一个类时应该有类似的东西

```
container.Register<IMyNewObject, MyMewObject>(new TransientLifetimeManager());
//or
container.Register<MyMewObject>(new TransientLifetimeManager()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:00:04.507

如果您正确应用 IoC 原则，您的类会声明其依赖项，然后**容器会处理它们的生命周期**。例如，您想获取一个 HttpRequest 对象，并且容器句柄提供当前线程本地对象，或者其他。

你的代码不应该真正关心它的依赖的生命周期，因为它不应该负责清理它们或你有什么（所有这些都应该封装在依赖本身中，并由容器关闭时）。

但是，如果您确实需要在代码中关心是否获得了单例实例或相同类型的每个注入实例，我喜欢通过使用类型系统本身来明确它，就像 Java 的 Guice 容器一样它的[`Provider`](http://code.google.com/p/google-guice/wiki/InjectingProviders)模式。我创建了一个 Guice 风格的`IProvider<T>`界面，我用它来做这件事，我只是用一个简单的静态工厂方法为它们连接起来，如下所示：

```
Provider.Of<Foo>(() => { /* Code to return a Foo goes here */}) 
```

# c++ - Eclipse plugin for c/c++ call graph generator not working properly

> ID：12028619
> 
> 赞同：1
> 
> 时间：2012-08-19T17:47:11.077
> 
> 标签：c++, c, windows, call-graph

I have installed eclipse plugin for call graph generator using the following link. [http://certiv.net/updates/](http://certiv.net/updates/)

That plugin has been successfuly installed as I can checked that from installed plugins in eclipse. Now problem is still I am unable to view option op generating call graph under project explorer->right click on the project whose call graph u want to create-> profile as-> call graph

as shown in the following link. This link is for linux but i have installed this plugin on windows platform. [http://wiki.eclipse.org/Linux_Tools_Project/Callgraph/User_Guide](http://wiki.eclipse.org/Linux_Tools_Project/Callgraph/User_Guide)

Can anybody help me how do i need to configure eclipse for generation of call graphs. I am using eclipse galileo.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:34:44.047

根据用户指南 Callgraph 正在使用[SystemTap](http://en.wikipedia.org/wiki/SystemTap)，这绝对是 linux 特定的，因此它永远不会在 Windows 上工作（至少只要 SystemTap 是唯一受支持的检索信息的方式）。

# javascript - 从纯 javascript 消费 salesforce chatter rest 服务

> ID：12028626
> 
> 赞同：3
> 
> 时间：2012-08-19T17:48:28.463
> 
> 标签：javascript, rest, salesforce, same-origin-policy, salesforce-chatter

我正在创建一个浏览器扩展，它使用 rest api 发布到 salesforce chatter。一旦我从 OAuth 用户代理流程中获得 access_token，由于浏览器同源策略，我无法从 javascript 调用 rest 服务。我不想使用服务器作为代理，因为我想让扩展纯粹是客户端。

我尝试了 JSONP 解决方法，但它只适用于 GET，我需要 POST 才能将提要发布到 salesforce chatter

有没有可能的方法。请建议一些解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T10:42:12.760

也许考虑将您的电话传递给 salesforce 中的自定义休息服务。使用 @RestResource 注释设置一个全局类，然后在其中设置一个 doPost 方法来处理您传递的内容，在您的情况下进行发布。

您仍然需要 Oauth 步骤来检索令牌，然后通过 Authorization : Bearer 标头消息与其余请求一起传递该令牌。

在此处查看有关此内容的好帖子[https://wiki.developerforce.com/page/Creating_REST_APIs_using_Apex_REST](https://wiki.developerforce.com/page/Creating_REST_APIs_using_Apex_REST)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-18T07:30:56.193

从 Salesforce '15 开始，您可以配置 CORS。因此，将您的应用程序域列入白名单，您可以做任何您想做的事情。没有解决获取access_token的问题。纯粹通过 javascript 获取 access_token 的唯一方法是使用用户代理流程，因为访问令牌作为 URL 部分传递......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T10:27:33.840

一种选择是使用 [http://www.ajax-cross-domain.com/之类的网站](http://www.ajax-cross-domain.com/)

这是关于这个问题的很好的参考[http://www.d-mueller.de/blog/cross-domain-ajax-guide/](http://www.d-mueller.de/blog/cross-domain-ajax-guide/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-13T18:28:53.177

使用[jsforce](https://jsforce.github.io/document/#chatter-api) ，由于 CORS 问题，您将需要[代理，抱歉。](https://github.com/jsforce/jsforce-ajax-proxy)

# java - ActionBar Icons having different sizes

> ID：12028629
> 
> 赞同：6
> 
> 时间：2012-08-19T17:48:57.853
> 
> 标签：java, android, android-actionbar, actionbarsherlock

In my android application, some of the action bar icons are at normal size (like the star in the screenshot) and some are too small (like the browser and the share icon in the screenshot).

![Screenshot](../Images/8e553d326dda6359f3ae62e275a9c3a7.png)

All of the Icons are added in the exact same way:

```
menu.add(getString(R.string.sync)).setIcon(R.drawable.ic_action_sync) 
```

This happens in three of my activities with different icons. The image files are in the correct directories for their density, they are all from the ActionBar Icon Pack and do all look the same size in the directory on the computer.

I use ActionBarSherlock to display the Actionbar on Gingerbread, but it looks exactly the same on ICS/JB, where ActionBarSherlock should use the native ActionBar (so I guess it's not ABSherlock's fault).

I have no idea, what the reason of this could be.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:29:57.877

看起来您的图标可绘制资源的大小不正确。要解决此问题，您需要重新创建图标。

执行此操作时，请务必检查[Android Design-Iconography](http://developer.android.com/design/style/iconography.html)页面以确保您以正确的分辨率创建资源。

# php - 在数据库中的分层数据结构中查询并显示结果

> ID：12028633
> 
> 赞同：2
> 
> 时间：2012-08-19T17:49:41.027
> 
> 标签：php, mysql

我想使用 PHP-MySql 在我的网站中实现高级评论系统。为此，我最终确定了一个 3 级评论回复系统。好吧，出于这个目的，我遇到了[这篇](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)文章来实现 SQL 数据库的数据结构。

我计划将嵌套集 mdoel 用于我想要使用的功能。评论的结构是这样的——

```
<ul>
    <li>Parent comment</li>
        <ul>
            <li>First reply of parent comment</li>
            <ul>
                <li>reply of the previous reply</li>
                   <ul>
                       <li>reply of the previous reply</li>
                       <li>another reply of the previous reply</li>
                   </ul>
                <li>another reply of the previous comment</li>
             </ul>
             <li>second reply of the parent comment</li>
        </ul>
</ul> 
```

**对于这种类型的结构，我一直在使用 PHP 来显示唯一**检测父母及其孩子的查询（用于获取与每个评论关联的用户详细信息）并以如上所示的方式生成输出。有谁知道该怎么做。请帮帮我。

**编辑 ：**

我在 SQL 中有一个单独的用户表链接到评论表作为`user.id=comment.id`. 因此，考虑到这一点，检测每个评论的用户活动的推荐方法是什么？我的意思是，例如，我想获取用户名和电子邮件以获取父评论 2 的子评论。怎么能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:03:14.680

使用“查找节点深度”中的查询，此 PHP 代码将创建嵌套列表。

```
$cur_depth = -1;
while ($row = mysqli_fetch_assoc($query)) { // Loop through results of query
  if ($row['depth'] > $cur_depth) {
    echo "<ul>\n";
    $cur_depth = $row['depth'];
  }
  else while ($cur_depth > $row['depth']) {
    echo "</ul>\n";
    $cur_depth--;
  }
  echo "<li>" . $row['comment'] . "</li>\n";
}
while ($cur_depth > -1) {
  echo "</ul>\n";
  $cur_depth--;
} 
```

# java - PoolingClientConnectionManager 中的“per route based”是什么意思？

> ID：12028635
> 
> 赞同：17
> 
> 时间：2012-08-19T17:50:05.890
> 
> 标签：java, apache, http

[不推荐使用ThreadSafeClientConnManager](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/tsccm/ThreadSafeClientConnManager.html)并引入了一个新方法[PoolingClientConnectionManager](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html)。

PoolingClientConnectionManager 的文档说

> 管理客户端连接池，并能够为来自多个执行线程的连接请求提供服务。连接按每条路由汇集。

**我的问题**

*这里的每条路线基础*是什么意思？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-06-13T00:21:57.080

简而言之，每条路由意味着您要连接的每台主机。

`PoolingHttpClientConnectionManager`在每条路由的基础上和总计上保持连接的最大限制。默认情况下，此实现将为每个给定路由创建不超过 2 个并发连接，并且总共不超过 20 个连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T19:45:37.393

它指的是HttpRoute。HttpRoute 是用来描绘在同一个 Web 服务器上运行的多个应用程序。

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/routing/HttpRoute.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/routing/HttpRoute.html)

它的用法如下：

```
ClientConnectionRequest connRequest = connMrg.requestConnection(
        new HttpRoute(new HttpHost("localhost", 80)), null);
ManagedClientConnection conn = connRequest.getConnection(10, TimeUnit.SECONDS);
try {
    BasicHttpRequest request = new BasicHttpRequest("GET", "/");
    conn.sendRequestHeader(request);
    HttpResponse response = conn.receiveResponseHeader();
    conn.receiveResponseEntity(response);
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        BasicManagedEntity managedEntity = new BasicManagedEntity(entity, conn, true);
        // Replace entity
        response.setEntity(managedEntity);
    }
    // Do something useful with the response
    // The connection will be released automatically 
    // as soon as the response content has been consumed
} catch (IOException ex) {
    // Abort connection upon an I/O error.
    conn.abortConnection();
    throw ex;
} 
```

来源：[http ://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)

# python - Python 的 StringIO 不适用于 `with` 语句

> ID：12028637
> 
> 赞同：19
> 
> 时间：2012-08-19T17:50:14.737
> 
> 标签：python, unit-testing, stringio, stubs

我需要存根`tempfile`，`StringIO`看起来很完美。只是这一切都失败了：

```
In [1]: from StringIO import StringIO
In [2]: with StringIO("foo") as f: f.read()

--> AttributeError: StringIO instance has no attribute '__exit__' 
```

提供罐头信息而不是读取具有不确定内容的文件的常用方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-19T17:58:17.703

StringIO 模块早于该`with`语句。由于 StringIO[已经在 Python 3 中被删除](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)，你可以使用它的替换，[`io.BytesIO`](http://docs.python.org/library/io.html#io.BytesIO)：

```
>>> import io
>>> with io.BytesIO(b"foo") as f: f.read()
b'foo' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-05T20:38:45.537

这个monkeypatch在python2中对我有用。调用`monkeypatch`您的初始化例程。

```
import logging
from StringIO import StringIO
logging.basicConfig(level=logging.DEBUG if __debug__ else logging.INFO)

def debug(*args):
    logging.debug('args: %s', args)
    return args[0]

def monkeypatch():
    '''
    allow StringIO to use `with` statement
    '''
    StringIO.__exit__ = debug
    StringIO.__enter__ = debug

if __name__ == '__main__':
    monkeypatch()
    with StringIO("this is a test") as infile:
        print infile.read() 
```

测试运行：

```
jcomeau@aspire:~/stackoverflow/12028637$ python test.py 
DEBUG:root:args: (<StringIO.StringIO instance at 0xf73e76ec>,)
this is a test
DEBUG:root:args: (<StringIO.StringIO instance at 0xf73e76ec>, None, None, None)
jcomeau@aspire:~/stackoverflow/12028637$ 
```

# python - 为什么以下对象是 numpy 字符串而不是 datetime.datetime 对象？

> ID：12028638
> 
> 赞同：1
> 
> 时间：2012-08-19T17:50:23.380
> 
> 标签：python, date, csv, numpy

我有一个 csv 文件，排列如下：

```
Person,Date1,Date2,Status
Person1,12/10/11,17/10/11,Done
... 
```

我想对其执行各种操作，首先将其拉入 Python 并将日期字符串转换为 datetime.datetime 对象。我有以下代码：

```
import re
import numpy as np
from datetime import datetime, timedelta
from dateutil import rrule

def get_data(csv_file = '/home/garry/Desktop/complaints/input.csv'):
    inp = np.genfromtxt(csv_file,
        delimiter=',',
        filling_values = None,
        dtype = None)

    date = re.compile(r'\d+/\d+/\d+')
    count = 0
    item_count = 0

    for line in inp:
        for item in line:
            if re.match(date, item):
                item = datetime.strptime(item, '%d/%m/%y')
                inp[count][item_count] = item
                item_count += 1
            else:
                item_count += 1
        item_count = 0
        count += 1

    return inp

def get_teams(data):
    team_list = []
    for line in data:
        if line[0] not in team_list:
            team_list.append(line[0])
        else:
            pass
    del team_list[0]
    return team_list

def get_months():
    month_list = []
    months = [1,2,3,4,5,6,7,8,9,10,11,12]
    now = datetime.now()
    start_month = now.month - 7
    for count in range(0,7):
        if months[start_month] > now.month:
            year = now.year - 1
        else:
            year = now.year
        month_list.append([months[start_month], year])
        start_month += 1
    return month_list

if __name__ == "__main__":
    inp = get_data()
    for item in inp[2]:
        print type(item)
    team_list = get_teams(inp)
    month_list = get_months() 
```

main 方法中的 print 语句（插入用于调试）返回：

```
<type 'numpy.string_'>
<type 'numpy.string_'>
<type 'numpy.string_'>
<type 'numpy.string_'> 
```

这显然不是我所希望的，因为 get_data() 函数中的循环应该将日期字符串更改为 datetime.datetime 对象。当我在单个日期字符串上运行与循环中相同的代码作为测试时，它们会很好地转换类型。在上面的代码中，它们也在某种意义上起作用，因为字符串确实更改为 datetime.datetime 格式——它们只是不是正确的类型。谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:27:15.893

问题是numpy数组的类型是固定的。Numpy 将数据存储在固定大小的连续内存块中，因此当您将值分配给`numpy`数组中的索引时，`numpy`会在将其存储到数组之前对其进行转换。即使使用字符串数组，它也会这样做。例如：

```
>>> a = numpy.array(['xxxxxxxxxx'] * 10)
>>> for index, datum in enumerate(a):
...     print datum, a[index], type(a[index])
...     a[index] = 5
...     print datum, a[index], type(a[index])
... 
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'>
xxxxxxxxxx xxxxxxxxxx <type 'numpy.string_'>
xxxxxxxxxx 5 <type 'numpy.string_'> 
```

可以方便地（或不！）`datetime.datetime`使用 转换对象`str`，所以在这一行中......

```
inp[count][item_count] = item 
```

...`numpy`只需将项目转换为字符串并将其插入数组中。

现在，您*可以*使用`dtype=object`. 但是这样做会抵消很多速度`numpy`，因为您被迫`numpy`调用一堆慢速python代码。

```
>>> a = numpy.array(['xxxxxxxxxx'] * 10, dtype=object)
>>> for index, datum in enumerate(a):
...     print datum, a[index], type(a[index])
...     a[index] = 5
...     print datum, a[index], type(a[index])
... 
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'>
xxxxxxxxxx xxxxxxxxxx <type 'str'>
xxxxxxxxxx 5 <type 'int'> 
```

我要补充一点，你没有`numpy`在这里充分发挥它的潜力。Numpy 旨在以矢量化方式处理数组，无需显式`for`循环。（有关详细信息，请参阅[教程](http://www.scipy.org/Tentative_NumPy_Tutorial)。）因此，每当您使用`for`循环来处理 时`numpy`，很自然地会问您如何避免这样做。我不会指出您的代码存在的问题，而是向您展示您可以做的一件有趣的事情：

```
>>> numpy.genfromtxt('input.csv', delimiter=',', dtype=None, names=True)
array([('Person1', '12/10/11', '17/10/11', 'Done'),
       ('Person1', '12/10/11', '17/10/11', 'Done'),
       ('Person1', '12/10/11', '17/10/11', 'Done'),
       ('Person1', '12/10/11', '17/10/11', 'Done'),
       ('Person1', '12/10/11', '17/10/11', 'Done'),
       ('Person1', '12/10/11', '17/10/11', 'Done')], 
      dtype=[('Person', '|S7'), ('Date1', '|S8'), 
             ('Date2', '|S8'), ('Status', '|S4')])
>>> a = numpy.genfromtxt('input.csv', delimiter=',', dtype=None, names=True)
>>> a['Status']
array(['Done', 'Done', 'Done', 'Done', 'Done', 'Done'], 
      dtype='|S4')
>>> a['Date1']
array(['12/10/11', '12/10/11', '12/10/11', '12/10/11', '12/10/11',
       '12/10/11'], 
      dtype='|S8') 
```

现在，您可以直接访问日期，而不是使用正则表达式循环遍历表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:39:14.980

问题是`inp`您定义的`get_data`数组`"|S8`从`np.genfromtxt`. 如果您尝试将其中一个元素替换为另一个对象，则该对象将转换为字符串。

第一个想法是转换`inp`成一个列表，其中`inp.tolist()`. 这样，您可以根据需要更改每个单独字段的类型。但有更好的（我认为）：

根据您的示例，第二列和第三列始终是日期，对吗？然后，您可以立即将字符串转换为`datetime`对象`np.genfromtxt`

```
np.genfromtxt(csv_file,
              delimiter=",",
              dtype=None,
              names=True,
              converters={1:lambda d:datetime.strptime(d,"%d/%m/%y"),
                          2:lambda d:datetime.strptime(d,"%d/%m/%y")}) 
```

这`names=True`意味着您将获得结构化`ndarray`的输出，其中的字段取自第一个非注释行（此处为 your `Person,Date1,Date2,Status`）。正如您猜到的`converters`那样，关键字会将字符串从第 2 列和第 3 列转换为`datetime`对象。

请注意，如果您已经知道您的第一列和最后一列是字符串，您可能希望使用`dtype`None:`np.genfromtxt`如果它不必猜测每列的类型，则工作速度更快。

现在，另一个评论：

*   而不是在`for`循环中保留一个计数器，而是使用类似的东西`for (i, item) in enumerate(whatever)`，它更简单。

# ruby-on-rails - 在索引视图中渲染部分脚手架 - Rails

> ID：12028643
> 
> 赞同：0
> 
> 时间：2012-08-19T17:52:03.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想使用 ajax 在我的索引中显示脚手架的操作“显示”，但是当我点击显示时，我的文件没有出现：

财务控制器.rb

```
 def show
    @finance = Finance.find(params[:id])

  end 
```

_show.html.erb

```
<p id="notice"><%= notice %></p>

<p>
  <b>Date update:</b>
  <%= @finance.updated_at %>
</p>

<p>
  <b>Money:</b>
  <%= @finance.money %>
</p>

<p>
  <b>Entrance:</b>
  <%= @finance.entrance %>
</p>

<p>
  <b>Description:</b>
  <%= @finance.description %>
</p>

<p>
  <b>Situation:</b>
  <%= @finance.situation %>
</p>

<p>
  <b>Local:</b>
  <%= @finance.local %>
</p>

<%= link_to 'Edit', edit_finance_path(@finance) %> |
<%= link_to 'Back', finances_path %> 
```

我的 index.html.erb 修改了按钮显示：

```
Bem vindo <%= session[:user_name]%>
<div id='list' align='left'>
<h1>Finanças - Hoje é dia <%= Date.today %></h1>
<%= link_to 'New Finance', new_finance_path %>
<table  cellpadding="5"  >
  <tr>
    <th>Data de Inserção</th>
    <th>Caixa</th>
    <th>Entrada</th>
    <th>Descrição</th>
    <th>Situação</th>
    <th>Local</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @finances.each do |finance| %>
  <tr>
    <td><%= finance.created_at %></td>
    <td><%= finance.money %></td>
    <td><%= finance.entrance %></td>
    <td><%= finance.description %></td>
    <td><%= finance.situation %></td>
    <td><%= finance.local %></td>
    <td><%= link_to 'Show', finance,:action => 'show',:id => @finance , :remote =>:true %></td>
    <td><%= link_to 'Edit', edit_finance_path(finance) %></td>
    <td><%= link_to 'Destroy', finance, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />
</div>
<div id='tools' align='right'>
    <%if @finance %>
        <%= render('show') %>
    <% end %>
    </div>
    <%= link_to 'Logout', new_session_url,method: :delete %> 
```

当我在节目中点击出现 url 'localhost:3000/finances/1' 但当我点击它时什么也没有发生@finance ,

```
 <%if @finance %>
        <%= render('show') %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:07:39.427

尝试使用`= render 'finances/show'`

# desktop - 如何在没有浏览器嗅探的情况下区分台式机和平板电脑的 1000 像素屏幕尺寸？

> ID：12028647
> 
> 赞同：5
> 
> 时间：2012-08-19T17:53:02.177
> 
> 标签：desktop, responsive-design, media-queries, tablet

我在我的网站的桌面版本上使用了很多过渡、悬停和阴影效果。我需要为我的平板电脑版本摆脱它们，我认为我可以用媒体查询来做，但我的问题是当我使用 @media only screen 和 (min-width : 1224px) 之类的东西来定位桌面时，用户需要拥有他们的浏览器窗口最大化，或者他们获得了针对平板电脑的 css。因此，如果桌面用户浏览器的分辨率为 1000 像素，那么他们将获得与 Ipad 上的人相同的 css。现在我被告知浏览器嗅探是不可靠的，那么我还能如何区分使用 1000 像素桌面浏览器和 1000 像素平板设备的用户呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:54:45.487

```
body {
  background-color: #bada55
}

/* Regular media queries for a smaller desktop */
@media only screen 
and (min-device-width : 768px) 
{
/* Add styles here */
} 

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Add styles here */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Add styles here */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Add styles here */
} 
```

检查 jsbin 中的示例 - [http://jsbin.com/uxipeh/1/](http://jsbin.com/uxipeh/1/)以及[此处的完整选项列表](http://alpha.responsivedesign.is/develop/media-queries/media-queries-for-common-device-breakpoints)

# c# - 奇怪的编译错误

> ID：12028650
> 
> 赞同：2
> 
> 时间：2012-08-19T17:53:10.960
> 
> 标签：c#, visual-studio-2010, visual-studio

我在下一次代码编译时遇到了一个奇怪的错误。

```
using System;

public class Tree<T> : IComparable<Tuple<double, T>>
{
    public int CompareTo(Tuple<double, T> other)
    {
        return 0;
    }
} 
```

> 提供的泛型参数的数量不等于泛型类型定义的数量。参数名称：实例化。

*   该错误仅发生在我的项目中。相同的代码在新项目中成功编译。
*   替换`Tuple<double, T>`为`Tuple<T, T>`也可以成功编译。

# javascript - 为什么我的网站在 IE 中是一个空白屏幕？（包括IE9！）

> ID：12028652
> 
> 赞同：3
> 
> 时间：2012-08-19T17:53:56.483
> 
> 标签：javascript, html, internet-explorer, google-custom-search

昨天启动了我的网站——http: [//www.artsbrand.co.uk——](http://www.artsbrand.co.uk)没有在 IE 上测试成品。现在我有了，它最初会显示完全没有样式的 html，然后几秒钟后屏幕就变成空白了。当发生这种情况时，这是源中唯一的东西：

`<script defer onreadystatechange='google.loader.domReady()' src=//:></script>`

这与我的 Google 自定义搜索引擎有关吗？

我有一些有条件的评论，如果它们很重要，我将在下面列出：

1.  首先，我设置了 html 类（no-js 类用于 Modernizr）：

    ```
    <!--[if lt IE 7 ]><!--> <html class="ie ie6 no-js" dir="ltr" lang="en-GB" xmlns:og="http://opengraphprotocol.org/schema/"> <!--<![endif]-->
    <!--[if IE 7 ]><!-->    <html class="ie ie7 no-js" dir="ltr" lang="en-GB" xmlns:og="http://opengraphprotocol.org/schema/"> <!--<![endif]-->
    <!--[if IE 8 ]><!-->    <html class="ie ie8 no-js" dir="ltr" lang="en-GB" xmlns:og="http://opengraphprotocol.org/schema/"> <!--<![endif]-->
    <!--[if IE 9 ]><!-->    <html class="ie ie9 no-js" dir="ltr" lang="en-GB" xmlns:og="http://opengraphprotocol.org/schema/"> <!--<![endif]-->
    <!--[if gt IE 9]><!--><html class="no-js" dir="ltr" lang="en-GB" xmlns:og="http://opengraphprotocol.org/schema/"><!--<![endif]--> 
    ```

2.  然后我用媒体查询设置了三个不同的样式表：

    ```
    <!--[if !IE]><!-->
    <link rel="stylesheet" type="text/css" media="screen and (max-width: 489px)" href="<?php bloginfo('stylesheet_directory'); ?>/device.css" />
    <link rel="stylesheet" type="text/css" media="screen and (min-width: 490px) and (max-width: 899px)" href="<?php bloginfo('stylesheet_directory'); ?>/smallscreen.css" />
    <!--<![endif]-->
    <link rel="stylesheet" type="text/css" media="screen and (min-width: 900px)" href="<?php bloginfo('stylesheet_directory'); ?>/style.css" /> 
    ```

3.  这仅适用于 Sticky Footer（根据此处的说明[http://www.cssstickyfooter.com/style.css](http://www.cssstickyfooter.com/style.css)）：

    ```
    <!--[if !IE 7]><!-->
    <style type="text/css">
      #wrap {display:table;height:100%}
    </style>
    <!--<![endif]--> 
    ```

我只能访问 IE7 和 IE9，但两者的行为完全相同 - 1-2 秒的无样式页面（我在 IE9 中看到过一瞬间的 CSS！），然后是完全空白。我会非常感谢你们能提供的任何帮助！

**编辑 -**我现在不太相信它与条件评论有任何关系 - 我只是试图摆脱所有这些，但它根本没有任何区别。我可能还应该提到我已经尝试了两个版本的 Google CSE（搜索元素 V1 和搜索元素 V2），结果是相同的。

**更新 -**我现在有一个相当混乱的解决方法，尽管搜索现在必须在 IE 中停止。问题是我对媒体查询/条件评论的狡猾使用（我对他们俩都是新手！）以及导致 IE 对 Google CSE 反应不佳的**仍然未知的问题。**所以无论如何，这就是我的样式表链接现在的样子：

```
<!--[if !IE]><!-->
<link rel="stylesheet" type="text/css" media="screen and (max-width: 489px)" href="<?php bloginfo('stylesheet_directory'); ?>/device.css" />
<link rel="stylesheet" type="text/css" media="screen and (min-width: 490px) and (max-width: 899px)" href="<?php bloginfo('stylesheet_directory'); ?>/smallscreen.css" />
<link rel="stylesheet" type="text/css" media="screen and (min-width: 900px)" href="<?php bloginfo('stylesheet_directory'); ?>/style.css" />
<!--<![endif]-->

<!--[if IE]>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('stylesheet_directory'); ?>/style.css" />
<![endif]--> 
```

同时，搜索脚本包含在 [if !IE] 注释中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:26:47.787

This is just a guess because I can't get my IE7 machine to boot right now, but I think it may be because the script you have is before the closing `head` tag.

From what I remember, IE does weird things when you try to access elements on the page that haven't been fully parsed yet.

`var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);` is essentially trying to insert the new `script` tag before the very first `script` tag, which is inside the uncompleted head tag.

I thought `s.parentNode` would be `null` (or `undefined`) in this case, but apparently it's something else, maybe the whole document? Who knows, IE does crazy things.

At any rate, what I'd try is moving that google script tag inside the `body` of your page, instead of in the `head`, and see if that makes a difference.

As for the CSS, IE before 9 doesn't support [media queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries). You can use something like [respondjs](https://github.com/scottjehl/Respond) to make it work in IE, but you need to put the queries in the CSS file, not in the `link` tag itself.

# string - 转换为正数或负数的整数

> ID：12028656
> 
> 赞同：3
> 
> 时间：2012-08-19T17:54:52.867
> 
> 标签：string, matlab

在 MATLAB 中，我在文件名 A.txt 中有一个 1 X 20 的字符串数据列向量。

```
%Input in A.txt:
60N
61N
50S
51S 
```

目的：将数据列读取为整数并表示N

为正，S 为负。

所以输出将是：

```
 60
 61
-50
-51 
```

我研究过其他帖子，申请 str2num double。我完全被困住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T18:04:01.357

假设您的数据像您的示例中那样组成，您可以尝试以下操作：

```
[nums, directions] = textread('test.txt', '%d%s'); %# Read data from file
signs = ones(size(directions));                    %# Assume signs are positive
signs(strcmp(directions, 'S')) = -1;               %# Replace 'S' with negatives
result = nums(:) .* signs(:)                       %# Calculate result 
```

# ruby-on-rails - ActionView::Template::Error: Undefined Method on live server only

> ID：12028658
> 
> 赞同：0
> 
> 时间：2012-08-19T17:54:59.383
> 
> 标签：ruby-on-rails

这个 Ruby on Rails 问题有点令人烦恼，因为代码在本地运行良好，但当我将其推送到我的实时服务器时却不行。

我已经使用迁移将一些 int 列添加到表中，并有一些复选框来确定某个状态的项目是否显示在某个页面上，例如：

```
status\page myitems   featureditems   saleitems
status1        X           x             x    
status2        x           x 
```

这在开发环境中本地运行良好，但是当我将代码推送到我的实时服务器时，“添加新功能”页面无法加载并出现以下错误：

```
Started GET "/admin/statuses/new" for 86.159.115.236 at 2012-08-19 13:39:12 -0400
Processing by Admin::StatusesController#new as HTML
Rendered shared/_validationerror.html.erb (0.0ms)
Rendered admin/statuses/_form.html.erb (2.1ms)
Rendered admin/statuses/new.html.erb within layouts/application (2.2ms)
Completed 500 Internal Server Error in 4ms

ActionView::Template::Error (undefined method `show_my_items' for #<Status:0xb6c1690>):
20:       </tr>
21: 
22:       <tr>
23:         <td align="center"><%= f.check_box :show_my_items  %></td>
24:         <td align="center"><%= f.check_box :show_latest_items  %></td>
25:         <td align="center"><%= f.check_box :show_featured_items  %></td>
26:         <td align="center"><%= f.check_box :show_search_results  %></td>
app/views/admin/statuses/_form.html.erb:23:in `block in    
_app_views_admin_statuses__form_html_erb__566719799_79558060'
app/views/admin/statuses/_form.html.erb:1:in   
`_app_views_admin_statuses__form_html_erb__566719799_79558060'
app/views/admin/statuses/new.html.erb:7:in 
`_app_views_admin_statuses_new_html_erb__880262090_94647510'
app/controllers/admin/statuses_controller.rb:31:in `new' 
```

在这种情况下，“show_my_items”是附加到状态的字段之一（由 page1 表示）。

此外，在现场，我可以使用复选框编辑状态（但它是 int 数据类型......），但在现场，虽然我可以查看编辑页面并在没有错误的情况下提交，但它实际上并没有更新该字段。

所以这些列存在于数据库中，代码与我在现场的代码相同，但错误只发生在现场服务器上。两者上的 Rails 版本相同（3.1.0.rc8），ruby 版本略有不同（本地：1.9.2p320，实时：1.9.3p194）。

不知道发生了什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:56:45.920

可以肯定的是，您是否在生产模式下在服务器上运行了迁移？

```
$ RAILS_ENV=production rake db:migrate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:30:28.973

那么问题似乎是Passenger 没有正确启动。要么花费的时间比我想象的要长，要么出现其他问题，但是再次重新启动乘客后它工作正常。

# ruby-on-rails - 未定义的方法“每个”（需要短代码来处理与“每个”和单个 obj 一起使用的对象集合）

> ID：12028659
> 
> 赞同：1
> 
> 时间：2012-08-19T17:55:09.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

问题：

如果返回结果单个结果每个方法都失败 - 如何改进代码？

案子：

控制器动作：

```
@results= Person.find_by_name('Ben'); 
```

看法：

```
<% if nil!=@results %>
    <% @results.each do |r| %>
       <h2>courses:</h2> <a href="/course/<%= r.name %>/"><%= r.name %></a>
    <% end %>
<% else %>
       <h2>no results</h2>
<% end %> 
```

结果：

```
undefined method `each' for #<Person id: 2, name: "Ben"> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:47:09.597

一个常见的习语是使用`Array()`

```
@results = Array(Person.find_by_name('Ben')) 
```

`Array()`总是会返回一些可枚举的东西，即使它是 nil。

然后你可以保持你的代码的其余部分相同。但我建议使用 rails helper 清理一下`present?`

```
<% if @results.present? %>
   ....
<% else %>
   <h2>no results</h2>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:14:25.540

在循环之前检查它的类型：

```
if !@results.is_a?(Person) && !@results.blank?
  # loop through them all as you are doing...
elsif !@results.blank? #still avoiding the possible nil error here
  # print out for a single record
else
  # there are no results
end 
```

您总是希望确保它不是空白（nil 或空），但第一次检查确保您没有人员对象，如果它不是空白，则意味着 ActiveRecord 为您返回了人员对象数组。

# c# - Windows 8 CollectionViewSource ObservableCollection 绑定未更新

> ID：12028660
> 
> 赞同：9
> 
> 时间：2012-08-19T17:55:10.740
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个 CollectionViewSource 绑定到可观察集合的子集，以显示主页上的前 n 篇文章。

```
<CollectionViewSource
        x:Name="groupedItemsViewSource"
        Source="{Binding Groups}"
        IsSourceGrouped="true"
        ItemsPath="TopItems" /> 
```

在我的代码中，我执行以下操作：

```
protected async override void LoadState(Object navigationParameter, ...)
{
    var feedDataSource = (FeedDataSource)navigationParameter;
    this.DefaultViewModel["Groups"] = feedDataSource.Feeds;
} 
```

我的 FeedDataSource 包含一个`ObservableCollection<FeedCategory> Feeds`具有`ObservableCollection<FeedItem> Items`和 TopItems 的：

```
public ObservableCollection<FeedItem> TopItems
{
    get { return new ObservableCollection<FeedItem>(this.Items.Take(5)); }
} 
```

现在 - 我添加了一个刷新方法，该方法将更多 FeedItems 添加到 Items 集合中，但是当我刷新时，它对我的​​主页上使用 groupedItemsViewSource 的 ItemsSource 属性的网格视图没有影响。

```
ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}" 
```

如果我离开页面，然后再次返回（因此页面被重建），新项目就在那里。为什么我的 GridView 没有在这些更改发生时显示它们？我认为通过绑定集合和网格视图，它们应该反映这些变化？我曾尝试将它们更改为两个一个，一个方式 - 但这没有任何区别。

谁能阐明为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:02:09.123

在您的 TopItems 属性中，您将返回一个新的 ObservableColleciton，其中包含 Items Collection 中的前五个 Item。CollectionViewSource 绑定到这个新的 ObservableCollection，而不是原始的 Items 集合。因此，当您更新 Items 集合时，没有任何东西绑定到它来接收更新通知。您需要绑定到原始 Items 集合，或者在使用新数据更新 Items 集合的方法中，为 TopItems 属性触发 PropertyChanged 事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:31:24.187

您应该能够收听ObservableCollection`CollectionChanged`上的事件`Items`以执行您的要求。

```
this.Items = new ObservableCollection<FeedItem>();
this.Items.CollectionChanged += delegate { base.OnPropertyChanged("TopItems"); }; 
```

现在，当`Items`集合更改时，绑定魔术师会注意到它还应该评估`TopItems`属性的更改。

# python - windows python Python v3.2.2 文本文件读取没有错误也没有输出

> ID：12028664
> 
> 赞同：1
> 
> 时间：2012-08-19T17:55:56.107
> 
> 标签：python, python-3.x

我正在尝试通过 win python 3 读取文本文件，奇怪的是我没有收到任何错误或任何输出。

```
f = open ('C:\\Users\\test\\Desktop\\test.txt','r')  
data = f.read()  
print data  
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:09:33.717

`print`是py3中的一个函数

```
f = open ('C:\\Users\\test\\Desktop\\test.txt','r')
data = f.read()
print(data)
f.close() 
```

虽然，它应该给你无效的语法错误。

# c++ - C++：使用 fusion::at 时出现 BOOST_FUSION_ADAPT_STRUCT 错误

> ID：12028667
> 
> 赞同：1
> 
> 时间：2012-08-19T17:56:31.303
> 
> 标签：c++, boost, boost-fusion

在 Boost.Fusion 文档中，它说 BOOST_FUSION_ADAPT_STRUCT 使结构成为完全兼容的 Boost.Fusion 随机访问序列。
我尝试了以下方法：

```
#include <iostream>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/at.hpp>

struct Str {
    int i;
    float j;
};

BOOST_FUSION_ADAPT_STRUCT(
    Str,
    (int, i)
    (float, j)
)

int main() {
    Str s;
    boost::fusion::at<0>(s) = 1;
} 
```

我从编译器收到一个错误，说“没有匹配的函数调用 at(Str&)”。
我使用的编译器是 g++。
我究竟做错了什么？
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:34:22.187

```
boost::fusion::at<boost::mpl::int_<0>>(s) = 1; 
```

因为 N 必须是 MPL 积分常数

[提升::融合::at](http://www.boost.org/doc/libs/1_47_0/libs/fusion/doc/html/fusion/sequence/intrinsic/functions/at.html)

# python - .rjust() 是如何工作的

> ID：12028668
> 
> 赞同：2
> 
> 时间：2012-08-19T17:56:35.597
> 
> 标签：python

.rjust() 是如何工作的，为什么它将字符相对于前一个字符而不是第一个字符 - 放置在最左侧 - 或屏幕左侧？

我有一个例子：

```
def pairwiseScore(seqA, seqB):
    prev = -1
    score = 0
    length = len(seqA)
    similarity = []
    relative_similarity = []

    for x in xrange(length):

            if seqA[x] == seqB[x]:
                    if (x >= 1) and (seqA[x - 1] == seqB[x - 1]):
                            score += 3
                            similarity.append(x)
                    else:
                            score += 1
                            similarity.append(x)
            else:
                    score -= 1

    for x in similarity:

            relative_similarity.append(x - prev)
            prev = x

    return ''.join((seqA, '\n', ''.join(['|'.rjust(x) for x in relative_similarity]), '\n', seqB, '\n', 'Score: ', str(score)))

print pairwiseScore("ATTCGT", "ATCTAT"), '\n', '\n', pairwiseScore("GATAAATCTGGTCT", "CATTCATCATGCAA"), '\n', '\n', pairwiseScore('AGCG', 'ATCG'), '\n', '\n', pairwiseScore('ATCG', 'ATCG') 
```

返回：

```
ATTCGT

||     |

ATCTAT

Score: 2

GATAAATCTGGTCT

 ||  |||  |

CATTCATCATGCAA

Score: 4

AGCG

| ||

ATCG

Score: 4

ATCG

||||

ATCG

Score: 10 
```

但我在一个人的帮助下创建了这个。早些时候，这段代码没有这几行：

```
prev = -1
relative_similarity = []

for x in similarity:

    relative_similarity.append(x - prev)
    prev = x 
```

该方法如下所示：

```
def pairwiseScore(seqA, seqB):

    score = 0
    length = len(seqA)
    similarity = []

    for x in xrange(length):

            if seqA[x] == seqB[x]:
                    if (x >= 1) and (seqA[x - 1] == seqB[x - 1]):
                            score += 3
                            similarity.append(x)
                    else:
                            score += 1
                            similarity.append(x)
            else:
                    score -= 1

    return ''.join((seqA, '\n', ''.join(['|'.rjust(x) for x in similarity]), '\n', seqB, '\n', 'Score: ', str(score))) 
```

并产生了这个输出：

```
ATTCGT

||    |

ATCTAT

Score: 2

GATAAATCTGGTCT

| |    |     |      |         |

CATTCATCATGCAA

Score: 4

AGCG

| |  |

ATCG

Score: 4

ATCG

|| |  |

ATCG

Score: 10 
```

所以我猜到，`.rjust()`函数处理的字符被放置在输出中，相对于以前的字符 - 不是第一个，最左边的字符。
为什么它会这样工作？什么内置函数可以格式化输出，使每个字符都按我的需要放置 - 相对于第一个字符，放置在屏幕的最左侧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:03:03.893

`str.rjust()` **不会在任何地方放置任何东西**；它返回一个全新的字符串，其中包含左侧的旧一加填充。如果由于最终位置可能出现其他文本而要放置更多或更少的填充，那么确保使用较少的填充是*您的问题。*也许您应该考虑将填充添加推迟到输出阶段，以便*它*可以添加正确的数量。

```
print '%-20s%20s' % ('foo', 'bar') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T07:56:40.053

```
 str ='Honey'

        print str.rjust(8,'*') 
```

O/p = ***亲爱的

句法

```
 rjust(w,'fillchar') 
```

w = 之前放置的字符宽度数

fillchar = 用于填充宽度的字符，默认为空格..

rjust 是一种右对齐字符串的方法，它在对齐后返回一个新字符串。

但是，指定的宽度必须大于原始字符串的大小才能执行对齐，因此“蜂蜜”的大小为 5，要右对齐 3，您必须将宽度设置为 5+3=8，因此 8 将移动3 个字符 9 x 4 等等...

# javascript - QUnit 模拟自动完成

> ID：12028669
> 
> 赞同：2
> 
> 时间：2012-08-19T17:56:39.120
> 
> 标签：javascript, jquery-ui, unit-testing, qunit

在我的 QUnit 测试中，我想模拟自动完成方法（jQuery UI），但每次我运行测试时都像：

```
test("Create_PassedContainer_RunsAutocompleteOnMatchingElement",function(){
    var $matchingInput = $('<input data-autocomplete-url="some"/>');
    var $dom = $('<div><input/></div>');
    $dom.append($matchingInput);
    var autocompleteWasCalled = false;
    $matchingInput.autocomplete = function(){ autocompleteWasCalled = true; };

    new Autocomplete($dom);

    ok(autocompleteWasCalled,"Should call autocomplete.");
}); 
```

我得到结果：

```
TypeError: Object [object Object] has no method 'autocomplete'. 
```

被测代码：

```
function Autocomplete($container) {
    var $self = this;

    this.Initialize = function($container) {
        $self.$container = $container;
        $self.$text = $('*[data-autocomplete-url]', $container);
        $self.$value = $('input[type="hidden"]', $container);

        $self.$text.autocomplete();
    };

    $self.Initialize($container);
}; 
```

任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:54:45.797

自动完成是一个插件，试试这个：

```
var oldAutocomplete = $.fn.extend(true, {}, $.autocomplete);
$.autocomplete = function(){
    autocompleteWasCalled = true;
}

/// Other code...

$.fn.autocomplete = oldAutocomplete; 
```

# r - 合并大量 xts 对象

> ID：12028671
> 
> 赞同：11
> 
> 时间：2012-08-19T17:56:53.083
> 
> 标签：r, list, merge, xts, zoo

我有一个`xts`相互排斥的日子的对象列表。我想把`merge`列表合并成一个大`xts`对象。我这样做的尝试是“

```
merged_reg_1_min_prices <- do.call(cbind, reg_1_min_prices) 
```

但是，这似乎内存不足。 `reg_1_min_prices`是 6,000 天的 1 分钟在互斥天返回，所以它不是很大。有谁知道如何解决这个问题？

需要明确的是：`reg_1_min_prices`包含相互排斥的日期，每天有 1 分钟的价格，并且列表中的每个条目都是一个`xts`对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T19:34:38.860

我使用[Dominik](https://stackoverflow.com/users/1038464/dominik)在[回答](https://stackoverflow.com/a/8071176/967840)[这个问题](https://stackoverflow.com/questions/7224938/can-i-rbind-be-parallelized-in-r)时提供的策略

我已经把它变成了我的[qmao](https://r-forge.r-project.org/R/?group_id=1113)包中的一个[函数。](https://r-forge.r-project.org/scm/viewvc.php/pkg/qmao/R/do.call.rbind.R?view=markup&root=twsinstrument)此代码也是[FinancialInstrument 包中](https://r-forge.r-project.org/R/?group_id=316)[getSymbols.FI](https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/R/load.instruments.R?view=markup&root=blotter)的核心。

```
do.call.rbind <- function(lst) {
  while(length(lst) > 1) {
    idxlst <- seq(from=1, to=length(lst), by=2)
    lst <- lapply(idxlst, function(i) {
      if(i==length(lst)) { return(lst[[i]]) }
      return(rbind(lst[[i]], lst[[i+1]]))
    })
  }
  lst[[1]]
} 
```

如果你愿意`rbind` `data.frames`，[@JoshuaUlrich](https://stackoverflow.com/users/271616/joshua-ulrich)[在这里](https://stackoverflow.com/a/9730292/967840)提供了一个优雅的解决方案

* * *

据我所知（无需仔细观察），所提供的三种解决方案（[@JoshuaUlrich's](https://stackoverflow.com/a/12029663/967840)、[@Alex's](https://stackoverflow.com/a/12029010/967840)和 qmao::do.call.rbind）中的任何一个都不是内存问题。所以，它归结为速度...

```
library(xts)
l <- lapply(Sys.Date()-6000:1, function(x) {
    N=60*8;xts(rnorm(N),as.POSIXct(x)-seq(N*60,1,-60))})
GS <- do.call.rbind
JU <- function(x) Reduce(rbind, x)
Alex <- function(x) do.call(rbind, lapply(x, as.data.frame)) #returns data.frame, not xts

identical(GS(l), JU(l)) #TRUE

library(rbenchmark)
benchmark(GS(l), JU(l), Alex(l), replications=1)
     test replications elapsed relative user.self sys.self user.child sys.child
3 Alex(l)            1  89.575 109.9080    56.584   33.044          0         0
1   GS(l)            1   0.815   1.0000     0.599    0.216          0         0
2   JU(l)            1 209.783 257.4025   143.353   66.555          0         0 
```

`do.call.rbind`显然以速度取胜。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-19T20:18:26.800

您不想使用`merge`，因为这将返回一个 6000 列对象，其中每个列表元素中的每一行都有一行（在我的示例中为 2,880,000）。大多数值将是`NA`. `cbind.xts`只需`merge.xts`使用一些默认参数值进行调用，因此您也不想使用它。

我们知道调用`rbind.xts`via引起的内存问题`do.call`。Jeff 确实有更高效的代码，但它是一个不公开的原型。

[@GSee 解决方案](https://stackoverflow.com/a/12029366/271616)的替代方法是使用`Reduce`. 这需要一段时间才能在我的笔记本电脑上运行，但即使只有 4GB，内存也不是问题。

```
library(xts)
l <- lapply(Sys.Date()-6000:1, function(x) {
  N=60*8;xts(rnorm(N),as.POSIXct(x)-seq(N*60,1,-60))})
x <- Reduce(rbind, l) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:42:50.773

以下是如何有效地做到这一点：将每个`xts`对象转换为 a`data.frame`并简单地转换`rbind`它们。这几乎不会增加内存使用量。如有必要，只需`xts`从`data.frame`

# javascript - Ajax 请求正在取消页面上的其他 JS 事件

> ID：12028674
> 
> 赞同：1
> 
> 时间：2012-08-19T17:57:25.240
> 
> 标签：javascript, php, ajax, xmlhttprequest, dom-events

我有一个填充了 AJAX`onchange`请求结果的表。一切正常，但我还有一个包含在 window.load 上的 JS 脚本，它基于`mouseover`、`mouseout`、`onclick`等更改表。但是，由于在 AJAX 请求之前不会填充表，因此表 JS 功能不起作用。有没有办法用 AJAX 请求填充表格，而不是做 window.load，在 AJAX 请求完成期间或之后加载 JS 脚本？下面是我的代码：

```
<link href="<?php echo $this->config->item('base_url'); ?>/css/table_design.css" 
      rel="stylesheet" type="text/css" media="screen" />

// This is the script that is included, and inside the script
//the main function is started by window.load
<script type="text/javascript" 
    src="<?php echo $this->config->item('base_url'); ?>/js/table_design.js"></script>

<br />

<script type="text/javascript">
    function showUser(str) {
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()   {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)   {
                document.getElementById("tars").innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","jqueryDB/catSelector?cat="+str,true);
        xmlhttp.send();
}
</script>

<span id="tars"></span> 
```

这是我通过 AJAX 请求的 PHP 页面：

```
public function catSelector()
{
    $catID = $_GET['cat'];  
    $query = $this->db->query('SELECT * FROM upload WHERE category = '.$catID);
    $num_rows = $query->num_rows();
    $val = $query->result_array();   

    echo '<table cellspacing="0" cellpadding="0">
        <tr>
        <th width="50%">File Name:</th>
        <th width="30%">File Size:</th>
        <th>Download Link:</th>
    </tr>';

    $c = true;
    foreach($val as $files){

         if ($files['size'] >= 1000000000) {
             $files['size'] = round( ($files['size'] / 1000000000) , 2).' GB';
        }

        if ($files['size'] >= 1000000) {
            $files['size'] = round( ($files['size'] / 1000000) , 2).' MB';
        }else{
            $files['size'] = round( ($files['size'] / 1000) , 2).' KB';
        }

        echo '<tr'.(($c = !$c)?' class="odd"':'').">
            <td>$files[name]</td>
            <td>$files[size]</td>
            <td><a href='$files[location]' >Download</a></td>
        </tr>";
    }

    echo '</table>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:09:24.977

我从未使用过`XMLHttpRequest`，但阅读后我认为您可以这样做：

```
function showUser(str)  {
    ...
    xmlhttp.open("GET","jqueryDB/catSelector?cat=" + str, true);
    xmlhttp.onload = function() { //add click events to table elements (same function you calling now with `window.load` };
    xmlhttp.send();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:11:52.247

您能否发送您在窗口加载时执行的 js 脚本？还尝试调用脚本，如下所示：-

```
xmlhttp.onreadystatechange=function()  
                      if (xmlhttp.readyState==4 && xmlhttp.status==200)
                        document.getElementById("tars").innerHTML=xmlhttp.responseText;
// call the js script here example test(); 
```

# javascript - 我怎样才能让这个小的 jQuery 滑块向右滑动？

> ID：12028676
> 
> 赞同：0
> 
> 时间：2012-08-19T17:57:53.150
> 
> 标签：javascript, jquery, slider

我试图让一个滑块向右滑动，除了向左滑动。名为“下一个”和“上一个”的两个按钮控制滑动。

目前滑块滑动没有问题。该变量`direction`保存单击的按钮是“上一个”（向右滑动）还是“下一个”（向左滑动）。`direction == 'previous'`当滑块向右滑动时，我在实现逻辑时遇到了麻烦。我认为这只是否定一些数字，但不是这样！

这是在 jsFiddle 中准备的代码：http: [//jsfiddle.net/LWJQm/](http://jsfiddle.net/LWJQm/)

出于演示目的，此代码是愚蠢的，只能一遍又一遍地滑动相同的 DIV。

这里的 JavaScript：

```
var $slider= $('#slider'),
    sliderHtml = $slider.html(),
    $next = $('#next'),
    $previous = $('#previous'),
    sliderWidth= parseInt($slider.css('width')),
    locked = false;

$('.button').on('click', function() {
    if (locked) {
        return false;   
    }

    locked = true;

    var direction = $(this).attr('id');
    console.log(direction);

    var $transfer = $('<div></div>').css({'width': (2 * sliderWidth) + 'px'});
    var $current = $('<div></div>').css({'width': sliderWidth+ 'px', 'left': '0', 'float': 'left'}).html($slider.html());
    var $next = $('<div></div>').css({'width': sliderWidth+ 'px', 'left': sliderWidth + 'px', 'float': 'left'}).html(sliderHtml);

    $transfer.append($current).append($next);
    $slider.html('').append($transfer);

    $transfer.animate({'margin-left': '-' + sliderWidth+ 'px'}, 300, function() {
        locked = false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:01:20.377

我不确定我是否理解这个问题。我用一个简单的 if else 语句修改了你的小提琴。这是你要找的吗？ [http://jsfiddle.net/flyingsausage/NvxKj/](http://jsfiddle.net/flyingsausage/NvxKj/)

# sql - Exec() 的 T-SQL 换行字符串连接

> ID：12028680
> 
> 赞同：0
> 
> 时间：2012-08-19T17:58:07.610
> 
> 标签：sql, tsql, dynamic

所以，我遇到了一个非常烦人的 T-SQL 问题……本质上，在一个表中，有几个 T-SQL 语句。我想要一个存储过程来有效地抓取这些行并将它们连接到一个变量。然后，使用 EXEC(@TSQL) 执行连接的行

问题是，在调用 Exec 时，字符串与换行符的连接似乎被剥离了......

例如：

```
declare @sql nvarchar(max) = ''
select @sql += char(13) + char(10) + [sql] from [SqlTable]
exec(@sql) -- Won't always do the right thing
print @sql -- Looks good 
```

我不想用光标屠杀代码，有什么办法解决这个问题吗？谢谢！

编辑：好的，所以看起来问题实际上仅与 GO 语句有关，例如：

```
declare @test nvarchar(max) = 'create table #test4(i int) ' + char(10) + char(13) + 'GO' + char(10) + char(13) +'create table #test5(i int)'
exec(@test) 
```

我想这个去必须去（没有双关语）我只是真的不想尝试解析它，因为害怕特殊情况会炸毁整个事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:03:20.903

没有的`select`语句`order by`可以自由地以任何顺序返回结果。

您必须指定 SQL 片段有意义的顺序：

```
select  @sql += char(13) + char(10) + [sql] 
from    [SqlTable]
order by
        SnippetSequenceNr 
```

正如@Bort 在评论中建议的那样，如果片段是独立的 SQL，您可以用分号分隔它们。回车、换行符、制表符和空格在 T-SQL 中都是一样的：它们都是空格。

```
select  @sql += [sql] + ';'
from    [SqlTable]
order by
        SnippetSequenceNr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:32:47.793

只需摆脱`GO`“声明”。正如其他人所指出的，您可能还需要确保以正确的语句顺序构造字符串。使用`+=`可能不是最好的主意，尽管我首先不确定动态 sql 的想法。在这里使用游标实际上可能更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T20:24:31.360

山姆·F，

您的方法不适用于字符串连接的 FOR XML 方法（如果您想根据在表的不同行中找到的值创建一个“行”分隔列表）。但是，将 char(13) 替换为 SPACE(13)，则效果很好。

```
SELECT PackageNote = SUBSTRING((SELECT (SPACE(13) + char(10) + PackageDescription)
FROM POPackageNote PN2
WHERE PN1.PurchaseOrderNumber = PN2.PurchaseOrderNumber
ORDER BY POPackageNoteID, PackageDescription
    FOR XML PATH( '' ) 
    ), 3, 1000 )
FROM POPackageNote PN1
WHERE (PurchaseOrderNumber = @PurchaseOrderNumber)
GROUP BY PurchaseOrderNumber 
```

# javascript - 无法使用 require.js 从 Backbone.View 的方法调用 Backbone.collection 的方法

> ID：12028683
> 
> 赞同：1
> 
> 时间：2012-08-19T17:58:19.183
> 
> 标签：javascript, backbone.js

我想从 AppView 调用集合的方法。但它不能。我的代码是这样的。

### todolist.js

```
define(["todolist","todo"],function(TodoList,Todo){
    var TodoList = Backbone.Collection.extend({
            url: "/todos",
            initialize:function(){
                this.fetch();
                this.bind("add",this.update,this);
            },
            add:function(){
                console.log("added");
            },
            update:function(){
                    console.log("update!");

                    }
    });

    return TodoList;
}); 
```

# 应用程序.js

```
 define(["jquery","underscore","backbone","todo","todolist","todo_view"],
    function($,_,Backbone,Todo,TodoList,TodoView){
        var AppView = Backbone.View.extend({
                initialize:function(){
                    this.collection = new TodoList;
                    this.collection.update();
                },
                events:{
                    "keypress #new-todo":"create",
                },
                    create:function(e){
                        if (e.keyCode === 13){
                            var txt = $("#new-todo").val();
                            var todo = new Todo({title: txt});
                            this.collection.add(todo.toJSON());
                        }
                    }
                }
        );
        return new AppView({el: $("body")});
}); 
```

但我不知道为什么 this.collection.update() 方法输出未定义。你有什么主意吗？我的所有代码都在这里[https://github.com/haradashinya/my-todo-redis](https://github.com/haradashinya/my-todo-redis)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:13:09.673

错误在于您的`app.js`定义。它不应该返回`AppView`它的实例，应该在模块定义之外创建实例。就像现在一样，到它返回的时间还`todolist`没有定义。

# ruby-on-rails - Rails从show action下载文件？

> ID：12028689
> 
> 赞同：7
> 
> 时间：2012-08-19T17:58:52.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

我有一个上传器，可以让你上传文件。我想要做的是在您查看文档的显示操作时触发文档的下载。网址将类似于：

```
/documents/16 
```

该文档可以是 .txt 或 .doc。

到目前为止，我的表演动作如下所示：

```
 def show
    @document = Document.find(params[:id])
    respond_with(@document) do |format|
      format.html do
        render layout: false, text: @document.name
      end
    end
  end 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T18:51:51.350

看一下[send_data](http://apidock.com/rails/ActionController/DataStreaming/send_data)方法：

> 将给定的二进制数据发送到浏览器。此方法类似于render :text => data，但也允许您指定浏览器是否应将响应显示为文件附件（即在下载对话框中）或内联数据。您还可以设置内容类型、外观文件名和其他内容。

所以，我认为你的情况应该是这样的：

```
def show
  @document = Document.find(params[:id])
  send_data @document.file.read, filename: @document.name
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T18:52:59.577

我在控制器中创建了一个新方法来下载文件。它看起来像这样。Stored_File 是存档文件的名称，并有一个名为 stored_file 的字段，它是文件的名称。使用 Carrierwave，如果用户具有下载文件的访问/权限，则会显示 URL，然后使用 send_file 将文件发送给用户。

**控制器**

```
 def download
    head(:not_found) and return if (stored_file = StoredFile.find_by_id(params[:id])).nil?

    case SEND_FILE_METHOD
      when :apache then send_file_options[:x_sendfile] = true
      when :nginx then head(:x_accel_redirect => path.gsub(Rails.root, ''), :content_type => send_file_options[:type]) and return
    end
    path = "/#{stored_file.stored_file}"

    send_file path, :x_sendfile=>true

  end 
```

**看法**

```
<%= link_to "Download", File.basename(f.stored_file.url) %> 
```

**路线**

```
match ":id/:basename.:extension.download", :controller => "stored_files", :action => "download", :conditions => { :method => :get } 
```

# wpf - 沿着弯曲路径的折线

> ID：12028690
> 
> 赞同：2
> 
> 时间：2012-08-19T17:59:02.400
> 
> 标签：wpf

我编写了一个图表编辑器，并绘制了一些曲线链接，这些链接完全适用于二次贝塞尔曲线（见图）：

![贝塞尔链接](../Images/dd7930d43f5173c4aef66cfdfab4fe43.png)

我搜索绘制“尖峰”曲线链接的最佳方式（如果可能的话）。大致像这样（蓝色）：

![尖刺线](../Images/6b60bf149f006d93f24faf0c86a47e51.png)

我不知道从哪里开始，我读了几篇关于画笔或“如何绘制弯曲文本”的文章，但这似乎不是我需要的......

感谢您的帮助或建议！:)

只是为了完成一些评论，贝塞尔曲线是用 quadrametricBezier 类从 3 点开始制作的。感谢大家 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:35:05.060

我认为 WPF 中没有内置的方法可以做到这一点。您必须自己计算坐标并自己绘制线条（例如使用 DrawingVisual）。

要计算坐标，您必须：

## 步骤 1 沿贝塞尔曲线采样点。

具有 4 个控制点的贝塞尔曲线具有以下公式：

```
curve(t) = t^3 p1 + 3 t^2 (1-t) p2 + 3 t (1-t)^2 p3 + (1-t)^3 p4

d/dt curve(t) = 3 p3 - 3 p4 + 6 p2 t - 12 p3 t + 6 p4 t + 3 p1 t^2 - 9 p2 t^2 + 9 p3 t^2 - 3 p4 t^2 
```

使用这些公式，您可以计算曲线上的点及其切线方向。将切线方向旋转 90°（即交换 X/Y 并更改 Y 的符号）给出法线方向。

但是，这些点并不是等距的：

![在此处输入图像描述](../Images/2a3f4dc7b83f9ebd6deda56a4f1c5de2.png)

因此，如果您直接使用这些点，您会得到一条曲线，其中一些“尖峰”比其他尖峰短：

![在此处输入图像描述](../Images/59a83287589e216e2767ebcb52b4994c.png)

## 第 2 步：沿曲线获取等距点

您现在有一个沿曲线的点列表。您可以计算每个点与下一个点之间的欧几里得距离。将所有这些距离相加得出曲线的总长度。

假设您想要（大约）10 像素宽的尖峰。然后你需要`n=round(TotalLength / 10)`积分。点在`s(i) = TotalLength / n * i`。

因此，如果您想例如找到`t`第三个等距点的值，您可以计算`s(3) = TotalLength / n * 3`. 然后，您将遍历采样点集，将距离相加，直到到达沿曲线的总距离 > s(3) 的点。现在您知道要查找的点之前和之后的点，您可以使用三规则来计算两者之间的 t。

现在您有一组沿曲线相隔相同距离的点：

![在此处输入图像描述](../Images/36e71b087452ce620a61fe078aef3ce8.png)

## 第 3 步：绘制尖峰

这是最简单的部分：在每个等距点，计算法线（使用上面的导数公式）。将该法线除以其长度得到单位法线。然后添加到每个偶数点`+d * UnitNormal`和每个奇数点`-d * UnitNormal`，其中`d`是尖峰的“深度”，即尖端到曲线的距离。

![在此处输入图像描述](../Images/03a35350a0215b3073b513f4747a90a6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:12:43.070

假设您已经计算出贝塞尔曲线，所需曲线是[三角波](http://en.wikipedia.org/wiki/Triangle_wave)乘以贝塞尔曲线与贝塞尔曲线的法向量的总和。您应该考虑的唯一一件事是，贝塞尔曲线是参数`t`在 [0, 1] 中的参数曲线。然后你需要 Bezier 曲线长度函数`L(t)`并将其插入三角波方程而不是`t`.

三角波也可以通过模运算来表示

`TW(t) = M * abs(mod(q * L(t), n * 2 - 2) - n + 1) + 1`

在哪里

`M`- 波的幅度，

`q`- 沿路径的比例因子，

`n`- 曲线周期，

`t`- 贝塞尔曲线的参数，

`L(t)`- 贝塞尔曲线的长度函数。

结果曲线：

`C(t) = TW(t) * B_normal(t) + B(t)`

其中`B_normal(t)`是点 处贝塞尔曲线的法线向量`t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T17:49:59.583

对于那些可能对 WPF 解决方案感兴趣的人，我最终基于`QuadraticBezierSegment`和`PathGeometry`类对此进行了编码（不是很优化）。

非常感谢大家。:)

```
public partial class MainWindow : Window
{
    int orientation = 1;
    int compt = 0;
    int SpikeWidth = 5;
    int SpikeHeigth = 3;

    public MainWindow()
    {

        InitializeComponent();

        Polyline wave = new Polyline();
        wave.Stroke = Brushes.Blue;
        wave.StrokeThickness = 2;

        PathGeometry pg = BezierPath.Data.GetFlattenedPathGeometry();
        double CurveLenght = GetLength(pg, PathFigure.StartPoint);
        double NbrPoint = (Math.Round(CurveLenght / SpikeWidth));
        for (int i = 0; i <= NbrPoint; i++)
        {
            //Calcul de T
            double t = SpikeWidth * i / CurveLenght;

            Point TangentPoint;
            Point PointToDraw;
            pg.GetPointAtFractionLength(t, out PointToDraw, out TangentPoint);

            // Calcul de l'angle
            double a = Math.Atan2(TangentPoint.Y, TangentPoint.X);
            a += Math.PI / 2;

            //Alterner un point sur deux de chaque coté de la courbe
            if (compt % 2 == 0)
                orientation = 1;
            else
                orientation = -1;

            //Calcul du point et ajout à la polyligne.
            //Point calculation and added to the polyline.
            wave.Points.Add(new Point(Math.Cos(a) * SpikeHeigth * orientation + PointToDraw.X, Math.Sin(a) * SpikeHeigth * orientation + PointToDraw.Y));

            //Compte le nombre de passage pour l'orientation
            compt += 1;
        }
        //Traçage sur la canvas
        cv.Children.Add(wave);
    }           

    private double GetLength(PathGeometry pg, Point startPoint)
    {
        PolyLineSegment pls = pg.Figures[0].Segments[0] as PolyLineSegment;

        double distance = 0;
        foreach (Point pt in pls.Points)
        {
            distance += Math.Sqrt((startPoint.X - pt.X).Pow(2) + (startPoint.Y - pt.Y).Pow(2));
            startPoint = pt;
        }
        return distance;
    }
} 
```

```
<Canvas x:Name="cv">
    <Path Stroke="Black" x:Name="BezierPath">
        <Path.Data>
            <PathGeometry>
                <PathGeometry.Figures>
                    <PathFigureCollection>
                        <PathFigure x:Name="PathFigure" StartPoint="10,400">
                        <PathFigure.Segments>
                            <PathSegmentCollection>
                                <QuadraticBezierSegment x:Name="BezierSegment" Point1="50,80" Point2="400,400">
                                </QuadraticBezierSegment>
                            </PathSegmentCollection>
                        </PathFigure.Segments>
                    </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>                    
        </Path.Data>
    </Path>               
</Canvas> 
```

# navigation - 为导航栏包装一个 Div 布局

> ID：12028691
> 
> 赞同：0
> 
> 时间：2012-08-19T17:59:05.787
> 
> 标签：navigation, html

我有一个导航栏，其中网站的 8 个主要链接位于 100 像素宽的标签中。

这在宽屏幕上很好。它们显示为一个统一的条。

当在移动设备上查看页面时，我希望我的移动 CSS 将它们堆叠起来，这样在 490 像素的屏幕上就会有两排四个“按钮”。如果可能的话，我想在为 s 使用单个类时执行此操作。

一点帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:18:22.453

我认为让这个工作的一种方法是编写如下代码：

```
<html>
<body>
<div style="height:auto;width:100%">
<div style="float:left;width:100px;"><a href="#">test me 1</a></div>
<div style="float:left;width:100px;"><a href="#">test me 2</a></div>
<div style="float:left;width:100px;"><a href="#">test me 3</a></div>
<div style="float:left;width:100px;"><a href="#">test me 4</a></div>
<div style="float:left;width:100px;"><a href="#">testtoo</a></div>
<div style="float:left;width:100px;"><a href="#">test me 6</a></div>
<div style="float:left;width:100px;"><a href="#">test me 7</a></div>
<div style="float:left;width:100px;"><a href="#">test me 8</a></div>
</div>
</body>
</html> 
```

您可以尝试调整屏幕大小并根据需要堆叠。

这里的一个关键是使用内部 div 的 float:left，这将使它们保持在同一水平。

条的大小将是屏幕的宽度，因此您可以使用该百分比和其他值来获得所需的输出。

**固定大小的设置位置。必须在，而不是

您可以使用 CSS 类来完成所有这些操作，这可能更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:01:27.410

在您的 CSS 文件中：

```
@media screen and (max-width: 900px) {
  ...
} 
```

有关使用媒体查询的更多说明：[http ://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

# python - 如何用 for 处理列表/字符串中的较早元素？

> ID：12028693
> 
> 赞同：1
> 
> 时间：2012-08-19T17:59:24.203
> 
> 标签：python

所以我的问题是 - 我有这样的代码：

```
test_text = "lorem ipsum dolor sit amet"

for each in test_text:
   #do some stuff 
```

虽然它确实适用于当前由 for “突出显示”的字母，但如果没有一个额外的变量，我将无法对之前的字母做任何事情，我将在每次迭代中递增，以便我可以解决 test_text [said_variable]。我的意思是-假设对于用户想要的每个字母，我必须打印该字母之前五个索引位置的字母-没有附加变量，我不能这样做。有人可以帮忙吗？我可以在不必像以前那样玩的情况下解决现在正在做的事情之前（或之后）的事情吗？

对于这个新手问题，我很抱歉，但我刚刚开始使用 Python，找不到任何关于此事的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T18:02:31.470

我不相信没有第二个变量你可以做到这一点，但你不必手动增加它：

```
for i, each in enumerate(test_text):
    print each, test_text[i-5] 
```

[*枚举文档*](http://docs.python.org/library/functions.html#enumerate)

请注意，否定列表索引将转到列表的末尾，即返回最后一个字符，因此如果您不想要此行为，则`test_text[-1]`必须添加检查。`i-5`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T18:07:23.400

正如 Lenna 所发布的，*枚举*是在循环时跟踪位置索引的好方法。

也就是说，您的`text[i-5]`查找将在任何时候失败`i < 5`。相反，尝试使用切片来访问`i`.

```
>>> test_text = "lorem ipsum dolor sit amet"
>>> for i, c in enumerate(test_text):
    print repr(c), "is surrounded by", repr(test_text[i-5:i+5])

'l' is surrounded by ''
'o' is surrounded by ''
'r' is surrounded by ''
'e' is surrounded by ''
'm' is surrounded by ''
' ' is surrounded by 'lorem ipsu'
'i' is surrounded by 'orem ipsum'
'p' is surrounded by 'rem ipsum '
's' is surrounded by 'em ipsum d'
'u' is surrounded by 'm ipsum do'
'm' is surrounded by ' ipsum dol'
' ' is surrounded by 'ipsum dolo'
'd' is surrounded by 'psum dolor'
'o' is surrounded by 'sum dolor '
'l' is surrounded by 'um dolor s'
'o' is surrounded by 'm dolor si'
'r' is surrounded by ' dolor sit'
' ' is surrounded by 'dolor sit '
's' is surrounded by 'olor sit a'
'i' is surrounded by 'lor sit am'
't' is surrounded by 'or sit ame'
' ' is surrounded by 'r sit amet'
'a' is surrounded by ' sit amet'
'm' is surrounded by 'sit amet'
'e' is surrounded by 'it amet'
't' is surrounded by 't amet' 
```

# c# - 将包含引号的字符串添加到 StringBuilder

> ID：12028694
> 
> 赞同：0
> 
> 时间：2012-08-19T17:59:27.373
> 
> 标签：c#, string

我有一个字符串生成器对象，我正在向它附加一些值，我需要添加的值之一是：

```
<Literal datatypeIRI="&rdf;PlainLiteral"> 
```

但是当我将其复制粘贴并将其添加到 stringbuilder 对象时，它会给出错误并认为 sring 参数尚未完成...我也尝试在它的开头放一个“@”，但仍然是同样的问题.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:01:42.900

`"`字符需要转义。对于普通字符串，使用`\"`，对于 @ 字符串使用`""`。

例如`"<Literal datatypeIRI=\"&rdf;PlainLiteral\">"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T18:02:04.973

您需要转义嵌入式`"`：

```
"<Literal datatypeIRI=\"&rdf;PlainLiteral\">" 
```

或者：

```
@"<Literal datatypeIRI=""&rdf;PlainLiteral"">" 
```

# c# - Linq 扩展方法 - 如何获取父对象？

> ID：12028696
> 
> 赞同：0
> 
> 时间：2012-08-19T17:59:32.100
> 
> 标签：c#, linq, object, extension-methods, parent

我的数据库看起来像这样：（它是伪代码）

```
public class thread
{
   int id;
   List<Post> Posts;
}

public class Post
{
   int id;
} 
```

作为输入，我有帖子 ID，我想知道该帖子在哪个线程中。我可以使用 linq 的扩展方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:10:52.670

我*认为*您的意思如下：

```
var myThread = threads.FirstOrDefault(x => x.Posts.Any(p => p.id == somePostId)); 
```

这将返回第一个（如果有的话）匹配`thread`实例，其中包含具有给定帖子 ID 的帖子，或者`null`如果没有实例匹配。这假设您有一组公开`threads`的`thread`实例，例如使用 Linq to Entities。

一般来说，我会尽量避免与 .NET 框架中的现有类名冲突的类名（如`Thread`）。

# .net - 任务内联 - 查询

> ID：12028697
> 
> 赞同：5
> 
> 时间：2012-08-19T18:00:03.057
> 
> 标签：.net, task-parallel-library

我正在阅读有关 Thread 和 Task 之间区别的问题。我有这个链接可以继续阅读：[MSDN上的](http://msdn.microsoft.com/en-us/library/dd997402.aspx)[*任务计划程序*](http://msdn.microsoft.com/en-us/library/dd997402.aspx)。

但我对这一段感到困惑：

> 在某些情况下，当等待一个任务时，它可能会在执行等待操作的线程上同步执行。这提高了性能，因为它通过利用本来会阻塞的现有线程来防止需要额外的线程，否则。**为了防止由于重入而导致的错误，任务内联仅在相关线程的本地队列中找到等待目标时发生。**

我想了解突出显示的部分。此外，我的本地缓存和全局队列也有点混乱......我真的很想了解TaskScheduler......请帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:18:49.133

首先，什么是本地队列和全局队列？这是 .Net 4.0 中并行处理的优化。如果您有很多 small `Task`s 并且只有一个全局队列，那么您会遇到很多争用。这是因为所有线程都`Task`从同一个地方（全局队列的前面）处理 s，并且它们也将新`Task`的 s 放到同一个地方（全局队列的后面）。这需要线程之间的大量同步，这会影响性能。

.Net 4.0 中的 TPL 使用了一种称为“工作窃取”的技术：和以前一样，有一个全局队列，每个`ThreadPool`工作线程（但不是其他线程）也有一个本地队列。如果非工作线程启动 a `Task`，它会像以前一样进入全局队列的后面。如果工作线程启动 a `Task`，它将进入其本地队列的后部。

现在到有趣的部分。如果一个工作线程应该处理一个新的`Task`，它会在这些地方寻找它（按这个顺序）：

1.  本地队列的*尾部*
2.  全局队列的前面
3.  其他线程的本地队列的前面

最后一部分是为什么这被称为“工作窃取”：工作线程可以“窃取” a`Task`以从另一个线程进行处理。线程不需要使用同步来访问其本地队列的尾部，因为没有其他线程可以访问它。并且在本地以 LIFO 顺序处理`Task`s 也有利于缓存，因为最后一个`Task`（以及它使用的数据）最有可能仍在 CPU 缓存中。

有关这一切的另一种解释（带图片），请参阅[*.NET 4.0 中的 Work-Stealing*](http://blogs.msdn.com/b/jennifer/archive/2009/06/26/work-stealing-in-net-4-0.aspx)。

* * *

这与内联和[重入](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29)有什么关系？我不知道。如果 s 使用一些线程静态字段，我可以理解为什么会出现重入问题`Task`，但这与队列无关。无论内联`Task`来自哪个队列，都可能发生此问题。我想不出任何`Task`可以保证本地队列中的 s 可以安全内联的情况，但`Task`其他队列中的 s 可能不安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:21:26.587

# php - 提交表单后设置站点已过期

> ID：12028700
> 
> 赞同：-1
> 
> 时间：2012-08-19T18:00:06.993
> 
> 标签：php, html, forms

我有带有下拉输入表单的网站。当您从下拉列表中选择某些项目并提交表单时，您将被重定向到具有另一个表单的另一个站点。

如果您在浏览器中按“返回”，我需要刷新第一个站点。我可以向浏览器发送一些标题或其他内容，该网站需要重新加载吗？但只有当您提交表单时，才访问第一页时不会。

编辑：\\ 抱歉，我刚刚意识到，该表单被发送到同一页面，但是在 PHP 中，将数据保存到数据库后，我使用 header() 将其重定向到第二页。

编辑2：\\

文件**a.php**

```
if(!empty($_POST)){
  //save data do DB
  header("Location: b.php");
  exit();
}?>
<form method="post" action="a.php">
... 
```

文件**b.php**

```
if(!empty($_POST)){
  //save data do DB
}
//sending HTML with big form to user 
```

当您在 a.php 中提交表单并且一切正确时，您将被重定向到 b.php，但是当您在 b.php 中按回时，您将返回到 a.php，我需要重新加载此页面以更新下拉列表和其余部分HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:07:15.000

除了您的问题措辞不佳之外，我假设您正在浏览器中为新表单打开一个新选项卡。因此，当表单提交时，您只需运行它。

```
header ( 'Location: '.$_SERVER['REQUEST_URI'] ) ; 
```

# android - 在扩展广播接收器的类中使用 getdefaultsharedpreferences

> ID：12028701
> 
> 赞同：0
> 
> 时间：2012-08-19T18:00:11.040
> 
> 标签：android, broadcastreceiver, sharedpreferences, alarmmanager

您好我正在尝试设置一个应用程序，其中存储在 sharedPreferences 中的一些值每周都会重置。我已将警报管理器设置为在单击按钮时开始，如下所示：

```
public class EditPreferences extends PreferenceActivity implements
SharedPreferences.OnSharedPreferenceChangeListener, OnClickListener {

Button button;
Toast mToast;

protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.prefsbuttons);
button = (Button) findViewById(R.id.bPrefButton);
button.setOnClickListener(this);
addPreferencesFromResource(R.xml.preferences);
getPreferenceManager().getSharedPreferences().
registerOnSharedPreferenceChangeListener(this);

 }

 protected void onDestroy() {
 getPreferenceManager().getSharedPreferences().
unregisterOnSharedPreferenceChangeListener(this);

 @overide
 super.onDestroy();
 public void onClick(View v) {
// TODO Auto-generated method stub
switch (v.getId()){
case R.id.bPrefButton:
     Intent intent = new Intent(EditPreferences.this, RepeatingAlarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(EditPreferences.this,
             0, intent, 0);
    SharedPreferences userPrefs = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    Editor editor = userPrefs.edit();
    editor.putInt("savedFlash23", 0);
    editor.putInt("savedFlash4", 0);
    editor.putInt("savedFlash5", 0);
    editor.putInt("savedClean23", 0);
    editor.putInt("savedClean4", 0);
    editor.putInt("savedClean5", 0);
    editor.putInt("savedDog23", 0);
    editor.putInt("savedDog4", 0);
    editor.putInt("savedDog5", 0);
    editor.commit();

     // We want the alarm to go off 30 seconds from now.
     long firstTime = SystemClock.elapsedRealtime();
     firstTime += 15*1000;

     // Schedule the alarm!
     AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
     am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                     firstTime, 15*1000, sender);

     // Tell the user about what we did.
     if (mToast != null) {
         mToast.cancel();
     }

     mToast = Toast.makeText(getBaseContext(), "first toast message",
             Toast.LENGTH_LONG);
     mToast.show();
 }

}

 } 
```

将显示 toast 消息并重置共享首选项。

意图被传递给侦听器的类，其中我有以下代码：

```
public class RepeatingAlarm extends BroadcastReceiver
{
@Override
public void onReceive(Context context, Intent intent) {
    Toast.makeText(context, "repeat toast message",
            Toast.LENGTH_LONG).show();
    SharedPreferences userPrefs= PreferenceManager.getDefaultSharedPreferences(context);
    Editor editor = userPrefs.edit();
    editor.putInt("savedFlash23", 0);
    editor.putInt("savedFlash4", 0);
    editor.putInt("savedFlash5", 0);
    editor.putInt("savedClean23", 0);
    editor.putInt("savedClean4", 0);
    editor.putInt("savedClean5", 0);
    editor.putInt("savedDog23", 0);
    editor.putInt("savedDog4", 0);
    editor.putInt("savedDog5", 0);
    editor.commit();
} 
```

}

Toast 消息正在显示，但我的共享首选项中的值不再重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:51:11.550

解决方案似乎不是尝试在广播接收器中做很多事情。我使用以下代码启动了一个新意图，该意图打开了一个扩展 Activity 的类，在该类中可以正常访问共享首选项。

```
Intent i = new Intent(context, Reset.class);

    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    context.startActivity(i); 
```

# java - 使用 ehcache 进行多层缓存

> ID：12028702
> 
> 赞同：2
> 
> 时间：2012-08-19T18:00:43.040
> 
> 标签：java, hibernate, caching, dao, ehcache

我正在做的一个项目，我们决定在我们的基于 Web 的应用程序中实现 ehcache 用于缓存目的。在大多数情况下，我们会将它用于 Hibernate 缓存（主表）和查询缓存。

但是，我们也在考虑在 DAO 层进行方法缓存。老实说，我对此有点怀疑。这可能意味着，我们在 DAO 层有一个方法，该方法反过来触发一个查询（已经缓存），那么缓存该方法是否有意义？我的感觉是，要么我们应该缓存该方法，要么缓存该方法最终触发的查询。

请让我知道您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:56:46.410

根据我的经验，这在很大程度上取决于您的应用程序（以及数据的类型/结构）。我目前正在处理的应用程序有 3 个内置缓存层（全部由 Ehcache 支持）：一层作为 Hibernate 二级缓存，一层用于中间层的短期热对象，一层用于长期的胖值对象立面层。调整缓存（缓存查询参数、生命周期、大小等）以很好地相互补充。

所以先验，我不会说它不起作用。您可以跳过整个 ORM 层。如果你有一些配置文件（我喜欢[perf4j](http://perf4j.codehaus.org/)），你至少可以优化从你的 DAO 中获取昂贵的“热”对象。如果您使用的是 Spring Framework，您可以通过将例如`@Cacheable`注释应用到您的方法来轻松地做到这一点。如果可能，使用（接近）实时数据和请求进行性能测试。

事实上，我认为使用 Hibernate 二级缓存是一件容易/懒惰的事情（可以说是一个好的第一步），但性能提升是有限的。通过一些更具体的缓存，您可以轻松获得数百或数千倍的速度，以加速应用程序的部分（希望是重要的部分），通常是在减少负载的情况下。

# c# - 访问从属性自动生成的值类型

> ID：12028703
> 
> 赞同：2
> 
> 时间：2012-08-19T18:01:12.813
> 
> 标签：c#, properties

大多数关于自动生成的属性的例子都在谈论“简单”的值类型，例如字符串。但是，如果您想访问在 IL 中自动生成的此类值类型的字段以备份“自动属性”怎么办？

编译器不允许这样做：“不能修改 'Position' 的返回值，因为它不是变量”。我理解为什么我们不能修改这个返回值，但是我们如何访问这些字段呢？

说我们有

```
class A
{
    Vector2 Position { get; set; }

    public void Foo()
    {
        Position.X = 10.0f;    // Not allowed!
    }
} 
```

如何访问和设置类 A 中 Vector2 实例的字段 X？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:02:38.953

> 访问从属性自动生成的**引用类型**

您的问题是这*不是*`Vector2`参考类型；它是一个值类型。当您访问该属性时，会返回一个副本，因此您正在尝试改变一个临时的。在这种情况下，您需要设置一个全新的值：*`Position`*

 *```
Position = new Vector2(10.0, Position.Y); 
```

在这种情况下，您还可以创建一个私有字段而不使用自动属性：

```
class A
{
    Vector2 _position;
    Vector2 Position 
    { 
        get { return _position; } 
        set { _position = value; }
    }

    public void Foo()
    {
        _position.X = 10.0f;  
    }
} 
```

文档：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:03:42.500

Vector2 实际上是一个值类型，而不是引用类型。您必须创建一个新的 Vector2：

```
Postion = new Vector2(10.0f, Position.Y); 
```*

# wcf - 通过名单 作为 WCF 服务操作的参数

> ID：12028709
> 
> 赞同：0
> 
> 时间：2012-08-19T18:01:51.803
> 
> 标签：wcf, list

我有一个 WCF 操作合同，如下所示：

```
public void SavePersons(List<Person> list, bool IsSelected)
{
} 
```

我在我的客户端中向它传递了一个强类型的`Person`对象列表（`List<Person>`）。但是，我在调用服务时收到了错误的请求 400 消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:21:48.393

我可以建议您创建一个合同来封装参数，如下所示：

```
public void SavePersons(PersonCollectionContract Request)
{
    ...
}

[DataContract]
public class PersonCollectionContract
{
    [DataContract]
    public List<Person> People { get; set; }

    [DataContract]
    public bool IsSelected { get; set; }
}

[DataContract]
public class Person
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T20:43:32.900

`List<Health>`在将类 Health 类型作为参数传递给 wcf 服务方法时，我遇到了类似的问题。我在 wcf 服务中创建了一个数据合约，如下所示：

```
[DataContract]
public class Health
{
  ...
} 
```

在 wcf 服务类中定义了一个方法，例如：

```
public string GetData(List<Health> healthValues) 
```

在我的客户端应用程序中，在配置/更新服务时，我遵循了以下步骤：

*   添加/更新网址
*   在数据类型（高级）下，选择选项，集合类型：System.Collection.Generic.List

最后，我创建了一个列表并在客户端中添加了如下代码：

```
List<WcfService.Health> listHealth = new List<WcfService.Health>();
WcfService.Health h = new WcfService.Health();
.
.
listHealth.Add(h);
WcfService.Service1Client s = new WcfService.Service1Client();
string str = s.GetData(listHealth); 
```

这解决了我的目的，我能够通过 wcf 服务将数据作为列表发送。

# c# - 在 WPF/MVVM 应用程序启动时加载配置文件/处理错误

> ID：12028710
> 
> 赞同：7
> 
> 时间：2012-08-19T18:01:52.510
> 
> 标签：c#, wpf, mvvm, configuration, error-handling

*免责声明：我在 MVVM/MVC/MVP/MVWhatever 方面没有经验，这是我第一次尝试使用**任何**UI 分离模式。*

启动时，我的应用程序需要从配置文件加载数据，这是应用程序工作所必需的。

目前，我正在读取启动时的配置文件`App.xaml.cs`，并将文件的内容传递给视图模型：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        string configFile = "settings.txt";
        string[] config = File.ReadAllLines(configFile);

        var window = new MainWindow();
        var viewmodel = new MainWindowViewModel(config);
        window.DataContext = viewmodel;
        window.Show();
    }
} 
```

**1.这是“正确”的MVVM方式吗？**
我确信这种方式比直接在视图模型中读取文件更好（这就是我首先这样做的方式），但我不确定是否`App.xaml.cs`是读取配置文件的正确位置。

**2\. 我在哪里/如何处理错误？**
配置文件中的数据对应用程序至关重要。
因此，如果文件丢失或为空，或者文件中的数据无效，那么我需要显示错误消息并退出应用程序。

我的第一次尝试也是把它放进去`App.xaml.cs`：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        string configFile = "settings.txt";

        if (!File.Exists(configFile))
        {
            MessageBox.Show("config file missing");
            Application.Current.Shutdown();
            return;
        }

        string[] config = File.ReadAllLines(configFile);

        if (config.Count() == 0)
        {
            MessageBox.Show("config file empty");
            Application.Current.Shutdown();
            return;
        }

        var window = new MainWindow();
        var viewmodel = new MainWindowViewModel(config);
        window.DataContext = viewmodel;
        window.Show();
    }
} 
```

但这对我来说看起来并不“正确”。我已经对在那里加载文件感到不舒服（参见第一个示例），所以情况更糟。

*注意：我知道我可能不应该直接`Messagebox.Show`在这里打电话。
请注意，这**不是**我在这里要问的——我知道我应该用更类似于 MVVM 的东西来替换它，但重点是：我仍然必须从某个地方调用它（然后关闭应用程序）。
我真正想知道的是这是否`App.xaml.cs`是正确的地方！*

**3\. 另外，我还有另一种错误要处理：**
配置文件的实际解析是由模型完成的*（模型是现有库的一部分，我在这里构建的 WPF 应用程序只是一个不错的 UI )* .
因此，视图模型创建模型的实例并调用解析方法……如果配置文件中的数据无效，则会引发异常。

我该如何处理这个“MVVM方式”？
只是在视图模型中捕获异常并从那里关闭整个应用程序对我来说是错误的。

* * *

**编辑：**

要回答 Will 关于我为什么不使用的评论`app.config`：

我正在使用“特殊”配置文件，因为我需要从那里加载几个命名的“集合”值对。[这是一个示例文件](https://github.com/christianspecht/missilesharp/blob/master/src/MissileSharp.Demo/settings.txt)。
基本上，它是一个`Dictionary<string, List<ClassWithTwoStringProperties>>`.

1.  AFAIK，`app.config`不支持这样的数据，所以我唯一能做的就是将整个事情保存为一个 blob 中的**一个**属性`app.config`，并且仍然自己进行解析。
    --> 所以我仍然需要从 WPF 应用程序的某个地方调用解析。
2.  我想要一种简单的、人工可编辑的格式
3.  WPF 应用程序只是一个不错的库 UI，我还需要库中的配置文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:10:11.953

我认为，这种方式是不正确的。

您应该考虑`app.config`任何持久数据（例如数据库、文件）。如果您想以 MVVM 方式访问持久化数据，您应该编写一个服务（类似于）并从您的代码中`IApplicationDataService`调用此服务实现。`MainWindowViewModel`如果您从某些服务中找到此服务`ServiceLocator`或通过 IoC 容器注入它，它将更加 MVVMish - 这有助于稍后编写单元测试。

服务的实现应该返回视图模型初始化模型实例。像这样的东西：

```
public ApplicationDataService : IApplicationDataService
{
  public ApplicationModel LoadApplicationData()
  {
      // process app.config here
  } 
}

public ViewModelBase<TModel>
{
  public TModel Model
  {
    get { return model.Value; }
  }
  private readonly Lazy<TModel> model = new Lazy(GetModel);

  protected abstract TModel GetModel();
}

public MainWindowViewModel<ApplicationModel> : ViewModelBase
{
   protected override ApplicationModel GetModel()
   {
      try
      {
        var dataService = ServiceLocator.GetService<IApplicationDataService>();
        return dataService.LoadApplicationData();
      }
      catch (AnyException e)
      {
         // oops!
      }
   }
} 
```

# symfony - ajax 调用期间的 form->bind($request) 输出一个数组

> ID：12028711
> 
> 赞同：0
> 
> 时间：2012-08-19T18:02:03.757
> 
> 标签：symfony, symfony-forms, symfony-2.1

## 我正在使用 Ajax 发布表单。

**在 Ajax 调用中绑定表单时，我有一个令人惊讶的反应：**

```
public function newCartAjaxAction(Request $request)
{
    $form = $this->container->get('new_cart_form.factory')->create();
    $formHandler = $this->container->get('new_cart_form.handler');

    if ('POST' === $request->getMethod())
    {
        $form->bind($request);

        if ($form->isValid())
        {
            $formHandler->processValidForm($form);

            $response = new Response();
            $response->headers->set('Content-type', 'application/json; charset=utf-8');
            $response->setContent(json_encode('hello'));
            return $response;
        }
        //...
    }

    //....
} 
```

**使用 firebug，我惊讶地在 ajax 响应中获得了 3 个输出：**

```
array(2) {[0]=>int(3)[1]=>int(5)}    //unexpected response

int(3)                               //unexpected response

"hello"                              //The only response needed 
```

经过调试，我发现输出1和2来自`$form->bind($request);`

有谁知道这是为什么？我很惊讶从表单绑定步骤获得响应，因为我应该发送的唯一响应是 $response...

**我做错了什么吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:16:26.537

这些输出很可能是由您编写的代码引起的。

首先，通过重新安装它们来确保您的供应商是干净的。那么，它也可能是您编写的表单事件监听器/订阅者，所以也可以这样看看。

# actionscript-3 - AS3 - 如何停止功能？

> ID：12028713
> 
> 赞同：2
> 
> 时间：2012-08-19T18:02:04.450
> 
> 标签：actionscript-3

我的“enterFrameHandler*”函数中有一个函数，它的结构如下：

```
private function addBoss():void{
   if(kills >= 3){
     trace("boss time");
   }
} 
```

由于“addBoss”是我的 ENTER_FRAME 事件侦听器函数的一部分，因此一旦杀戮达到 3，“boss 时间”就会被无限跟踪。我希望这个函数在它激活 1 次后立即停止。

是否有另一个我可以使用的事件侦听器来检查该功能，但一旦它关闭就停止？

任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T18:32:48.353

```
private function addBoss():void{
    if(kills >= 3){
       trace("boss time");
       removeBossEnterFrame();
   }
}
private function removeBossEnterFrame():void{
    removeEventListener(Event.ENTER_FRAME, addBoss);
} 
```

一旦您追踪“老板时间”，我可能会删除调用 addBoss 函数的 Enterframe 事件列表器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T18:07:51.483

这应该这样做。

```
private var isBossTime:Boolean = false;

private function addBoss():void
{
    if(kills >= 3 && isBossTime == false)
    {
        trace("boss time");

        isBossTime = true;
    }
} 
```

# jquery - 使用 Tapir 的静态搜索结果

> ID：12028714
> 
> 赞同：1
> 
> 时间：2012-08-19T18:02:05.643
> 
> 标签：jquery, full-text-search, jekyll, static-site

对 Web 开发和 Jekyll 非常陌生，并尝试在我的网站中实现[TapirGo](http://tapirgo.com)以允许静态搜索。似乎他们的 Jquery 插件在我的网站上处于活动状态（当手动将参数 ?query=example 添加到我的网站时，加载我的网站时似乎提到了貘），但我终生无法弄清楚如何实际上让结果出现在任何有意义的地方。

理想情况下，我会在我的网站上有一个表格，它会显示结果列表并允许访问者单击一个。

无论如何，这是我的（主要是复制和粘贴）代码：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/libs/modernizr-2.0.min.js"></script>
<script src="/js/libs/respond.min.js"></script>   
<script src="/js/jquery-tapir.min.js"></script>
<script>
    $('#search_results').tapir({'token': '502f16a53f61b006d6000bbc'});
</script>   
</head>
<body>
<div id="search_results"></div>
</body> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:19:07.903

如果要显示结果，则需要创建输入文本和按钮。你不需要调用`tapir(...)`方法，因为他们实现它的方式是垃圾:)（或者我不喜欢它，选择你喜欢的那个）

所以首先做文本框和按钮，然后是`div`显示结果。

```
<!-- HTML -->
<input type="text" name="query" />
<input type="button" name="search" value="search" />
<div id="results"></div>

 ... 
```

进而，

```
// Javascript
$('input[name="search"]').click(function(e) {
    $.getJSON(
        'http://tapirgo.com/api/1/search.json?token=' 
             + 'PUT_YOUR_TOKEN_HERE' 
             + '&query=' 
             + $('input[name="query"]').val()
             + '&callback=?', 
        function(data) {
            $('#results').empty();
            $.each(data, function(key, val) {
                $('#results').append('<div class="result"><h3><a href="'
                                     + val.link + '">' 
                                     + val.title + '</a></h3><p>' 
                                     + val.summary + '</p></div>');
            });
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:37:19.220

我认为 Tapir 不再受支持。[我自己](http://pradeepnayak.in/search.html)使用 Jquery实现了一个静态搜索机制。[您可以从此处](https://github.com/pradeep1288/pradeep1288.github.com/blob/master/search.html)重用代码

# jquery - jQuery 克隆的表行无法从 DOM 中检索？

> ID：12028718
> 
> 赞同：1
> 
> 时间：2012-08-19T18:02:28.430
> 
> 标签：jquery

我正在编写一些 jquery 来创建一个动态表单表。

它所需要做的就是克隆一行，然后更改该行的一些属性以使其唯一。

所以，我的策略是首先克隆它，将它附加到表中，然后获取它的一个子元素并修改它。一切正常，但最后一部分。

```
$(function () {
$(".appendRow").click(function() {
    var body = $(this).closest("tbody");
    var row = $(this).closest("tr");
    var newNum = $(".operation").size();
    $("#test").append("<p>newNum: " + newNum + "</p>");
    var clone = row.clone();    
    body.append(clone);
    var newRow = $(".RowNumber").get(newNum);
    var newRowNum = newNum + 1;
    $("#test").append("<p>newRowNum: " + newRowNum + "</p>");
    // $("#test").append("<p>type: " + newRow.type() + "</p>"); // tried to check type with this, error
    //newRow.html(newRowNum); // trying to change html of span element, fails with error
}); 

}); 
```

第一个注释行是为了帮助我调试。它和其他注释行导致 Google Chrome 出现错误：

本地异常，类型错误，newRow 未定义。

下面是html：

```
<form id="processname" name="processname" method="post" action="" >
<table border="1" width="50%" border="0" cellspacing="0" cellpadding="5">
<tr>
<td align="right" valign="middle">Order</td>
<td align="left" valign="middle">Process</td>
<td>Operation</td>
<td>Value</td>
<td>+</td>
<td>&ndash;</td>
</tr>

<tr>
<td><span class="rowNumber">1</span></td>
<!--<td><span class="rowNumber">1</span></td>-->
<td>
<select class="process" name="category_1" id="category_1" onChange="javascript: dropdownlist(this); elementPos(this)">
<option value="">Select Category</option>

<option value="3" selected="selected">translate</option>
<option value="4">math</option>
<option value="5">format</option>
<option value="6">write</option></select></td>
<td align="left" valign="middle">
<select class="operation" name="operation_1" id="operation_1">
<option value="">Select Sub-Category</option>
<option value="s->c" selected="selected">Use source as core by default</option><option value="s->t->c">Only process translated values</option></select>
</td>
<td>
<input type="text" name="value_1" id="value_1" value="" />
</td>
    <td><input type="button" style="max-width:5em" class="appendRow" value="+" /></td>
    <td><input type="button" class="delRow" value="-" /></td>
</tr>
.
.
.

</table>
</form> 
```

2013 年 5 月 29 日的注意事项：我最近发现我的 Google Chrome 的 Adblock Plus 插件阻止了“addRow”类可见（它`display:none`用于一堆与广告相关的类）。我已经编辑了问题和答案以将类更改为“appendRow”，这样任何复制此代码的人都不会遇到我刚刚遇到的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:24:45.417

为什么要附加一个元素，然后在附加之前可以修改它时从 DOM 中获取该元素来修改它？

我不知道你想做什么，但也许是这样的：

```
$(function() {
    $('#processname').on('click', '.addRow', function() {
        var body = $(this).closest("tbody");
        var row = $(this).closest("tr");
        var newNum = $(".operation").length + 1;
        var clone = row.clone();
        clone.find('.rowNumber').html(newNum);
        body.append(clone);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/XeSbE/1/)

# mysql - 按日期排序错误

> ID：12028721
> 
> 赞同：0
> 
> 时间：2012-08-19T18:02:31.643
> 
> 标签：mysql

我知道已经有一些关于 SO 的问题，但我找不到正确的答案。

我正在尝试按如下格式的日期订购：01-01-1999。我的查询如下所示：

```
SELECT id, header, date FROM table ORDER BY date DESC 
```

我得到了 4 行，看起来还不错，（它们是一样的），但后来我得到了一些奇怪的结果。

字段是 VARCHAR(); - 应该在哪个字段中存储 01-01-1999 格式？

奇怪的结果是我得到了 4x30-08-2012.. 然后是很多旧日期，但突然之间有 2 条记录是 13-09-2012。

我的问题是：为什么没有对它们进行排序：2x13-09-2012，然后是 4x30-08-2012，然后再进一步。

**更新**

问题已经解决了。但仍然：我会为我的日期使用什么数据字段而不是 VARCHAR？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:11:55.260

juergen 给出的答案基本上涉及每次解析的日期。不过，另外两个选择建议自己：

*   更改您的数据库架构，以便该列*已经是日期类型*（例如[`DATE`](http://dev.mysql.com/doc/refman/5.6/en/datetime.html)）而不是字符串。当您使数据库列准确地表示您要存储在其中的数据类型时，生活通常会好很多。

*   如果您*确实*需要将数据存储在字符串列中，请考虑将格式更改为 yyyy-MM-dd。这是一种*自然可排序*的格式，因为“字母”排序与日期的“语义”排序兼容。

第一个选项绝对是 IMO 的首选。这超出了订购的范围，还可以：

*   验证（嗯，希望如此；我认为 MySQL 对无效数据的容忍度比我个人喜欢的要高，但是......）
*   转换：我不确定 PHP 支持是什么样的，但一般来说，您应该能够向/从数据库发送和接收日期/时间值，*而无需将它们转换为字符串*，这样可以消除容易出错的转换
*   目的明确：为检查数据库的任何人提供尽可能多的帮助。无论您对数据了解多少，都将其放入架构中。如果您将所有内容都存储为 varchar，无论是文本、数字还是日期/时间数据，您不妨说“好吧，这只是一些*东西*”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T18:09:20.460

尝试

```
SELECT id, header, date FROM table
ORDER BY str_to_date(date, '%d-%m-%Y') DESC 
```

见[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:14:10.797

将日期存储在字符串中的最佳方式是“YYYY-MM-DD”。MySQL 具有日期的本机格式 - [DATETIME](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)。

# css - 在这个立方体中还需要一堵墙

> ID：12028723
> 
> 赞同：3
> 
> 时间：2012-08-19T18:02:37.310
> 
> 标签：css, user-interface

我不是 CSS 开发人员，所以请多多包涵。这就是我想要实现的目标。![在此处输入图像描述](../Images/1ef288ba443acbbde86960197f898629.png)

到目前为止，我能够创造这么多..

![在此处输入图像描述](../Images/f8817208df27cbc29e71bde4808224f5.png)

我现在很困惑如何创建墙（C）。请帮我。

截至目前，二维图片的代码如下。

```
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
#floor {
-webkit-transform: skew(148deg); 
-moz-transform: skew(148deg); 
-o-transform: skew(148deg); 
   background: none repeat scroll 0 0 #000066;
    float: left;
    height: 54px;
    left: 100px;
    position: fixed;
    top: 108px;
    width: 100px;
}
#frontwall {
    width: 100px; 
    height: 100px; 
    background: #0099FF;
    position: fixed;
    left: 117px;
}
#otherwall {
    width: 150px; 
    height: 100px; 
    -webkit-transform: rotate(-20deg) ; 
    -moz-transform: rotate(-20deg) ; 
    -o-transform: rotate(-20deg) ; 
    background: #0000CC;
    float: left;

}
</style>
</head>
<body>
<div id="otherwall"></div>
<div id="frontwall"></div>
<div id="floor"></div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:23:16.137

您可以独立地倾斜 X 和 Y，这可能是您想要做的。以下[适用于我的 Chrome](http://jsfiddle.net/cB9rj/)。

请注意，稍微较旧的浏览器（例如 IE8）不能很好地支持倾斜，并且您将得到的对齐像素的结果可能会因浏览器而略有不同。

我认为正确[支持倾斜的所有东西也](http://caniuse.com/#search=transform)[支持 SVG，](http://caniuse.com/#search=svg)这将是一种*更好*的方法（坐标会更加明显）。

SVG 简单性：

```
<html>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="150px" height="125px">
        <polygon points="50,0 50,100 150,100 150,0" style="fill: #0099FF"/>
        <polygon points="0,25 50,0 50,100 0,125" style="fill: #0000CC"/>
        <polygon points="0,125 100,125 150,100 50,100" style="fill: #000066"/>
    </svg>
</body>
</html> 
```

歪斜疯狂：

```
<style type="text/css">
#floor {
    -webkit-transform: skewx(-45deg);
    -moz-transform: skewx(-45deg);
    -o-transform: skewx(-45deg);
    transform: skewx(-45deg);
    background: #000066;
    height: 50px;
    left: 35px;
    position: fixed;
    top: 108px;
    width: 100px;
}
#frontwall {
    width: 100px; 
    height: 100px; 
    background: #0099FF;
    position: fixed;
    top: 8px;
    left: 60px;
}
#otherwall {
    left: 10px;
    width: 50px;
    height: 100px;
    top: 33px;
    position: fixed;
    -webkit-transform: skewy(-45deg);
    -moz-transform: skewy(-45deg);
    -o-transform: skewy(-45deg);
    transform: skewy(-45deg);
    background: #0000CC;
}
</style>
</head>
<body>
<div id="otherwall"></div>
<div id="frontwall"></div>
<div id="floor"></div>
</body></html>​ 
```

# jaxb - 属性的 JAXB 默认行为

> ID：12028725
> 
> 赞同：1
> 
> 时间：2012-08-19T18:02:58.070
> 
> 标签：jaxb, marshalling

在 JAXB 中，如果未提供注释，则元素名称将派生自属性名称而不是字段，但是在这种情况下属性呢？将属性写回 XML 文件是否有任何默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:27:27.727

*1) 如果未提供注释：*
**每个公共 getter/setter 对和每个公共字段都将自动绑定到 XML，除非由 {@link XmlTransient} 注释**
例如

```
public class Cat 
{
    public String name = "tomcat";

    private String nick = "catalina";

    public int getAge() { return 5; }

    public void setAge(int age) {}
} 
```

后

```
JAXB.marshal(cat, System.out); 
```

输出是

```
<cat>
    <name>tomcat</name>
    <age>5</age>
</cat> 
```

*2) XML 属性呢？XML 属性被命名为字段或 getter/setter 对并放置在根节点*
中，例如

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Cat 
{
    String name = "tomcat";

    @XmlAttribute
    String nick = "catalina";

    @XmlAttribute
    String home = "java.home";

    int age = 5;
} 
```

输出是

```
<cat home="java.home" nick="catalina">
    <name>tomcat</name>
    <age>5</age>
</cat> 
```

# c# - 按主机名的 log4n 日志记录约束

> ID：12028735
> 
> 赞同：2
> 
> 时间：2012-08-19T18:03:53.817
> 
> 标签：c#, log4net

有没有办法限制 log4n appender 根据主机名记录消息？我只想在生产机器上启用记录器并禁用记录 n 开发机器。

我知道有一种简单的方法可以使用属性记录主机名：%property{log4net:HostName}，然后我可以通过此过滤记录的消息，但我想使用 smtp appender 并通过电子邮件发送记录的消息，我想减少已发送电子邮件的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T12:55:55.603

另一种解决方案，使用标准过滤器

```
<filter type="log4net.Filter.PropertyFilter">
  <Key value="log4net:HostName" />
  <StringToMatch value="hostToInclude1" />
  <AcceptOnMatch value="true" />
</filter>
<filter type="log4net.Filter.PropertyFilter">
  <Key value="log4net:HostName" />
  <StringToMatch value="hostToInclude2" />
  <AcceptOnMatch value="true" />
</filter>
<filter type="log4net.Filter.DenyAllFilter" /> 
```

或排除过滤器，如答案[https://stackoverflow.com/a/755356](https://stackoverflow.com/a/755356)

但我通常为开发、测试和生产机器部署不同的配置文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:48:40.757

我找到了使用自定义过滤器的解决方案：

```
public class HostFilter : FilterSkeleton
{
    public string AllowedHostsNames { get; set; }
    private IList<string> HostNamesList
    {
        get
        {
            if (string.IsNullOrEmpty(AllowedHostsNames))
                return new List<string>();

            return AllowedHostsNames
                .Split(',')
                .Select(n => n.ToUpper().Trim())
                .ToList();
        }
    }

    public override FilterDecision Decide(LoggingEvent loggingEvent)
    {
        var names = HostNamesList;
        if (names.Contains(Environment.MachineName))
            return FilterDecision.Accept;

        return FilterDecision.Deny;
    }
}

<appender name="SomeAppender" type="log4net.Appender.SmtpAppender">
  <to value="" />
  <from value="" />
  <subject value="" />
  <smtpHost value="" />
  <authentication value="Basic" />
  <port value="25" />
  <username value="" />
  <password value="" />
  <bufferSize value="10" />
  <lossy value="false" />
  <layout type="log4net.Layout.PatternLayout">
     <conversionPattern value="%newline%date [%thread] %-5level %logger - %message%newline%newline%newline" />
  </layout>
  <filter type="Logging.HostFilter, AssemblyName">
    <allowedHostsNames value="host1, host2, host3" />
  </filter>
</appender> 
```

# java - 制作游戏重力，一切都来得太快了

> ID：12028738
> 
> 赞同：-1
> 
> 时间：2012-08-19T18:04:02.507
> 
> 标签：java, awt, gravity

所以基本上我目前正在做一个小项目，玩家将能够通过移动来对抗东西，但重力给我带来了一些问题。所以基本上，我得到了这个方法， checkGravity() 它将检查 isGravityApplicable() 是否返回 true （实体的底部对撞机（一个 Line2D）是否与一个立足点发生碰撞？（另一个 line2D））

如果 isGravityApplicable() 返回 true，则应该应用重力，但我遇到的问题是 1 像素 Y 以上的任何东西都太快了，甚至，将角色移动一个像素非常快。我不确定我是否应该修复我的游戏循环或什么？

```
public boolean isGravityApplicable() {
    for (Line2D line : frame.getMap().getFootholds()) {
        /*Does the bottom collider intersect the foothold?*/
        /*v THIS CHECK DOESN'T WORK CORRECTLY FOR SOME REASONS v*/
        if (!GraphicHelper.getLineCameraRelative(getBottomCollider(), frame.getCam()).intersectsLine(line)) {
            return true;
        }
        /*Above check returned false, if the velocity.y is above 1, then it might
         skip the line since it would be skipping 5 pixels for example at once.
         this check should resolve that.*/
        if (velocity.y > 0) {
            Line2D collider = getPositionToVelocityCollider();
            if (!collider.intersectsLine(line)) {
                position.y = (int) line.getY1(); //Y1 or Y2, same sh*t.
                return true;
            }
        }
    }
    return false;
}

public void checkGravity() {
    if (isGravityApplicable()) {
        if (isJumping) { //Player has jumped
            velocity.y += 1;
            velocity.y = velocity.y > TERMINAL_ACCELERATION ? (int) TERMINAL_ACCELERATION : velocity.y;
            if (velocity.y < 0) {
                isFalling = true;
            }
        } else if (isFalling) { //Player is currently falling but not from jumping. Most likely just spawned
            velocity.y = 1;
            /*Anything higher than 1 is WAY too quickly...*/
            //velocity.y += 1;
            //velocity.y = velocity.y > TERMINAL_VELOCITY ? (int) TERMINAL_VELOCITY : velocity.y;
        } else if (isJumping && isFalling) { //Player has jumped and has reached its highest point, falling back down
            velocity.y = 1;
            /*Anything higher than 1 is WAY too quickly...*/
            //velocity.y += 1;
            //velocity.y = velocity.y > TERMINAL_VELOCITY ? (int) TERMINAL_VELOCITY : velocity.y;
        } else { //Player hasn't jumped and has not started falling, he most likely just spawned
            isFalling = true;
            velocity.y = 1;
        }
    } else {
        isFalling = false;
        isJumping = false;
    }
} 
```

提前致谢。哦，如果有什么我可以做得更好的，比如由实体周围的简单线条组成的碰撞，请告诉我。：） 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:32:25.700

没关系的家伙，由于某些原因，update/tick 方法在循环中被调用了两次。我猜我脑子放屁什么的。

# javascript - 与带下划线的后端同步时，转换为 CamelCase 以在 JavaScript 中使用？

> ID：12028740
> 
> 赞同：18
> 
> 时间：2012-08-19T18:04:11.343
> 
> 标签：javascript, ruby-on-rails, naming-conventions, camelcasing

TL / DR：使用带下划线的命名约定服务器端（RoR）和camelCased命名约定客户端（JS）的好方法是什么

像 Ruby on Rails 这样的服务器端编程环境使用下划线变量。按照惯例，JavaScript 使用 camelCased 变量。当从客户端向服务器发送数据时，这是有问题的。

例如，考虑向客户端发送用户信息。数据库中可能有一个名为 num_times_ordered 的属性，但在 JavaScript 中，您通常希望将其称为 numTimesOrdered。

有没有人想出一个优雅的方式来处理这个问题？这里有一些选项，没有一个特别好：

1.  从服务器获取数据时将数据转换为 camelCase。
2.  从服务器发送时使用 camelCase
3.  在您的 Javascript 中使用带下划线的命名约定（尽管您与任何第三方库（如 jQuery）不一致）
4.  在后端使用 camelCased 命名约定（尽管您与后端的约定不一致）

我倾向于#3，并在我的 JavaScript 中使用下划线。不过，当我使用 camelCased 第三方库时，它看起来会很奇怪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T21:48:25.993

我相信 ember.js（通过 Ember Data）采用方法 #1：在获取时在客户端将带下划线的 JSON 转换为 camelCase；并在发回服务器之前执行相反的操作。

我一直在研究一个执行这些转换的小型库：[https](https://github.com/domchristie/humps) ://github.com/domchristie/humps ，允许您执行以下操作：

```
// GET
$.ajax({
  url: '/posts',
  dataType: 'json',
  success: function(data, status, xhr) {
    data = humps.camelizeKeys(data);
  }
});

// POST
$.ajax({
  type: 'POST',
  url: '/posts'
  dataType: 'json',
  data: humps.decamelizeKeys({
    title: "Foo",
    publishedAt: "2012-09-03T21:35:46.068Z"
  })
});
// Sends: { title: "Foo", published_at: "2012-09-03T21:35:46.068Z" } 
```

我应该补充一点，它没有经过*大量*测试，但欢迎贡献！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-07T23:53:39.560

将其复活为更现代的方法。

这是[axios 拦截器的一个很好的用例](https://github.com/axios/axios#interceptors)

基本上，定义一个客户端类并附加一个转换请求/响应数据的前/后拦截器。

```
export default class Client {
    get(url, data, successCB, catchCB) {
        return this._perform('get', url, data, successCB, catchCB);
    }

    post(url, data, successCB, catchCB) {
        return this._perform('post', url, data, successCB, catchCB);
    }

    _perform(method, url, data, successCB, catchCB) {
        // https://github.com/axios/axios#interceptors
        // Add a response interceptor
        axios.interceptors.response.use((response) => {
            response.data = toCamelCase(response.data);
            return response;
        }, (error) => {
            error.data = toCamelCase(error.data);
            return Promise.reject(error);
        });

        // Add a request interceptor
        axios.interceptors.request.use((config) => {
            config.data = toSnakeCase(config.data);
            return config;
        }, (error) => {
            return Promise.reject(error);
        });

        return axios({
            method: method,
            url: API_URL + url,
            data: data,
            headers: {
                'Content-Type': 'application/json',
            },
        }).then(successCB).catch(catchCB)
    }
} 
```

这是一个使用 React/axios 的更长示例的[要点。](https://gist.github.com/daino3/3da80fe2a3c8f9411214044a7f5611b3)

# c# - 从 USB 输入读取位

> ID：12028741
> 
> 赞同：2
> 
> 时间：2012-08-19T18:04:23.557
> 
> 标签：c#, usb

我想建立一个将一些位发送到计算机的电路。我正在考虑使用 USB 端口使用 data+ 和 data- 电缆将位发送到计算机，但是我在弄清楚如何捕获这些位时遇到了一些问题。如何在 C# 中捕获这些位，而无需编写任何驱动程序？

我已经阅读了许多关于从 USB 读取的先前帖子，但没有一个回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:41:43.160

最简单的解决方案是您需要一个能够将您的 I/O 信号转换为您的 USB 端口能够理解的信号的设备。

我过去使用过[U421](http://www.kadtronix.com/usbhidapi.htm#U4x1Device)，他们有一个库，您只需使用 P/Invoke 加载 DLL，然后您就可以将信号发送到芯片上的引脚。然后，您需要将要读取的任何内容连接到芯片（*正确*，但这超出了 Stack Overflow 的范围，您可能想尝试[Electronics.StackExchange.com](https://electronics.stackexchange.com/)）。有关示例代码和接线图，请参见 [USBMicro 网站](http://www.usbmicro.com/)`U4x1 Application Notes`上的部分。

来自网站的示例代码：

```
⁄⁄ needed to import the .dll
using System.Runtime.InteropServices;

    public class USBm
        {
        public static byte BitA0 = 0x00;
        public static byte BitA1 = 0x01;
        public static byte BitA2 = 0x02;
        public static byte BitA3 = 0x03;
        public static byte BitA4 = 0x04;
        public static byte BitA5 = 0x05;
        public static byte BitA6 = 0x06;
        public static byte BitA7 = 0x07;
        public static byte BitB0 = 0x08;
        public static byte BitB1 = 0x09;
        public static byte BitB2 = 0x0A;
        public static byte BitB3 = 0x0B;
        public static byte BitB4 = 0x0C;
        public static byte BitB5 = 0x0D;
        public static byte BitB6 = 0x0E;
        public static byte BitB7 = 0x0F;

⁄⁄  USBm.dll - C# pInvoke examples
⁄⁄  "Commands"
⁄⁄      [DllImport("USBm.dll", EntryPoint = "USBm_FindDevices", CharSet = CharSet.Auto)]
        [DllImport("USBm.dll")]
        public static extern bool USBm_FindDevices();
        [DllImport("USBm.dll")]
        public static extern int USBm_NumberOfDevices();
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceValid(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_About(StringBuilder About);
        [DllImport("USBm.dll")]
        public static extern bool USBm_Version(StringBuilder Version);
        [DllImport("USBm.dll")]
        public static extern bool USBm_Copyright(StringBuilder Copyright);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceMfr(int Device, StringBuilder Mfr);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceProd(int Device, StringBuilder Prod);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceFirmwareVer(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceSer(int Device, StringBuilder dSer);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceDID(int Device);
        [DllImport("USBm.dll")]
        public static extern int USBm_DevicePID(int Device);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceVID(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DebugString(StringBuilder DBug);
        [DllImport("USBm.dll")]
        public static extern bool USBm_RecentError(StringBuilder rError);
        [DllImport("USBm.dll")]
        public static extern bool USBm_ClearRecentError();
        [DllImport("USBm.dll")]
        public static extern bool USBm_SetReadTimeout(uint TimeOut);
        [DllImport("USBm.dll")]
        public static extern bool USBm_ReadDevice(int Device, byte[] inBuf);
        [DllImport("USBm.dll")]
        public static extern bool USBm_WriteDevice(int Device, byte[] outBuf);
        [DllImport("USBm.dll")]
        public static extern bool USBm_CloseDevice(int Device);
        } 
```

函数调用示例

```
⁄⁄ Test USBm device attached

if ( !USBm.USBm_FindDevices() )
    { 
    MessageBox.Show( string.Format("No Device Present"), "USBm Devices", MessageBoxButtons.OK, MessageBoxIcon.Information );
    return;
    }  ⁄⁄ implied else

⁄⁄Walk the USBm.dll functions

⁄⁄ some containers
StringBuilder sb = new StringBuilder( 200 );
bool result = false;  ⁄⁄ return values

⁄⁄ .DLL FindDevices  returns the number of devices
result = USBm.USBm_FindDevices();

⁄⁄ return the number of devices
int TotalDevices = USBm.USBm_NumberOfDevices();
int Device = TotalDevices -1;  ⁄⁄ only One device is ever attached so ...

⁄⁄ .DLL About info
result = USBm.USBm_About( sb );

⁄⁄ .DLL Version info
result = USBm.USBm_Version( sb );

⁄⁄ .DLL Copyright info
result = USBm.USBm_Copyright( sb );

⁄⁄ Device Valid
result = USBm.USBm_DeviceValid( Device );

⁄⁄ Device Manufacturer
result = USBm.USBm_DeviceMfr( Device, sb );

⁄⁄ Device Product String
result = USBm.USBm_DeviceProd( Device, sb );

⁄⁄ Device Firmware Version
int FirmVer = USBm.USBm_DeviceFirmwareVer(Device);

⁄⁄ Device SerialNumber [ ]
result = USBm.USBm_DeviceSer(Device, sb);

⁄⁄ Device DiD
int DID = USBm.USBm_DeviceDID(Device);

⁄⁄ Device PiD
int PID = USBm.USBm_DevicePID(Device);

⁄⁄ Device ViD
int VID = USBm.USBm_DeviceVID(Device);

⁄⁄ Device Debug String
result = USBm.USBm_DebugString(sb);

⁄⁄ Device Recent Error - always returns true
result = USBm.USBm_RecentError(sb);

⁄⁄ Device Clear Recent Error
result = USBm.USBm_ClearRecentError();

⁄⁄ Device SetReadTimeout [ sixteen-bit millisecond value]
uint tOUT = 3000;
result = USBm.USBm_SetReadTimeout(tOUT);

⁄⁄ Device WriteDevice [ 8 byte to write (device raw commands)]
byte[] OutBuf = { 0, 21, 3, 65, 8, 17, 60, 0 };
result = USBm.USBm_WriteDevice(Device, OutBuf);

⁄⁄ Device ReadDevice [ ]
byte[] InBuf = { 0, 0, 0, 0, 0, 0, 0, 0 };
result = USBm.USBm_ReadDevice(Device, InBuf);

// Device CloseDevice [ ]
result = USBm.USBm_CloseDevice(Device); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:07:10.623

另一种选择是使用现成的自定义驱动程序。这是[libusb-win32](http://sourceforge.net/apps/trac/libusb-win32/wiki)的示例。它安装了上层过滤设备驱动程序，并允许您向 USB 发送标准/文档甚至自定义命令。

PS 向下滚动到“链接”部分以查找 C#/VB.NET 下载和代码示例的链接。

# android - 如何从状态栏检测方向变化

> ID：12028742
> 
> 赞同：4
> 
> 时间：2012-08-19T18:04:23.770
> 
> 标签：android, android-intent, orientation, broadcastreceiver, listener

在状态栏下方，有五个按钮 - Wifi、蓝牙、GPS、静音模式和自动旋转。我还没有想出一种方法来检测用户何时单击“自动旋转”按钮。

我所做的是有一个服务来监听方向变化，比如：

```
public class MyService extends Service {

    @Override
    public void onCreate() {
       super.onCreate();
       IntentFilter intentFilter = new IntentFilter();
       intentFilter.addAction(Intent.ACTION_CONFIGURATION_CHANGED);
       this.registerReceiver(myReceiver, intentFilter);     
    }

    public BroadcastReceiver myReceiver = new BroadcastReceiver() {
       @Override
       public void onReceive(Context context, Intent intent) {
          if (action.equals(Intent.ACTION_CONFIGURATION_CHANGED)) {
             // Show a message about orientation changes.
             // This method is only called when the phone is physically rotated.
          }
       }
    }  
} 
```

上面的 BroadcastReceiver 只有在手机物理旋转的情况下才会起作用，但如果在手机没有任何物理旋转的情况下单击 Auto Rotation 按钮，则永远不会调用 BroadcastReceiver 方法。

我也尝试过 OrientationEventListener - 但与 BroadcastReceiver 方法的行为相同。

为了设置方向，我使用了以下方法：

```
Settings.System.getInt(context.getContentResolver(), "accelerometer_rotation") 
```

所以我知道有一种方法可以询问系统设置。是否存在捕获系统设置的 [orientation] 变化的 Intent？我浏览了 Android 文档，但找不到 - 也许，我找错地方了，或者没有 Intent。

有谁知道如何捕捉状态栏中“自动旋转”按钮的更改？

**更新 1**：我正在使用的设备是：三星 Galaxy S3、三星 Galaxy S2、三星 Galaxy S 和三星 Galaxy Ace 等等。所有这些设备都运行库存 ROM，并在状态栏下具有自动旋转按钮。

**更新 2**：有人建议使用 ContentObserver 来监听系统设置的更改，例如：

```
public class SettingsContentObserver extends ContentObserver {
    public SettingsContentObserver(Handler handler) {
       super(handler);
    }

    @Override
    public boolean deliverSelfNotifications() {
       return super.deliverSelfNotifications(); 
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Logging.writeDebug("Settings change detected: " + selfChange);
    }

    public void registerContentObserver(Context context) {
        context.getContentResolver().registerContentObserver(Settings.System.getUriFor(Settings.System.ACCELEROMETER_ROTATION), true, this);
    }

    public void unregisterContentObserver(Context context) {
       context.getContentResolver().unregisterContentObserver(this);
    }
} 
```

但是，我发现方法中的`selfChange`变量`onChange`总是返回`false`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T18:49:57.737

我想你将不得不听`Settings.System.ACCELEROMETER_ROTATION`。没有尝试过，但这应该可以。

```
getContentResolver().registerContentObserver(Settings.System.getUriFor
(Settings.System.ACCELEROMETER_ROTATION),
true,contentObserver); 
```

编辑：就像 BroadcastReceiver 的 Onrecieve 一样，contentobserver 也有一个 onchange。因此，每当单击按钮时，您都会在此处收到回调。

```
private ContentObserver contentObserver = new ContentObserver(new Handler()) {
        @Override
        public void onChange(boolean selfChange) {
           // show a toast here
        }
}; 
```

# netty - Netty/mina 合作。是否可以将 netty 的 ChannelBuffer 包装到 MINA 的 IOBuffer 中？

> ID：12028748
> 
> 赞同：0
> 
> 时间：2012-08-19T18:05:55.900
> 
> 标签：netty, apache-mina, apache-vysper

想法是将 apache vysper 集成到现有的 netty 应用程序中。是否可以将客户端的 ChannelBuffer 作为 mina'a ChannelBuffer 连接到 netty，以便将其委托给 vysper？

想法是为 apache vysper 制作基于 netty 的自定义端点，获取 ChanellBuffer 并将其传递给 vysper。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:56:32.833

Apache Vysper 使用 MINA，一种类似于 netty 的非阻塞 I/O 框架。

当我设计 Vysper 时，我尽量不要将 MINA 与 Vysper 的其余部分耦合得太紧。所以*理论上*应该可以用netty替换MINA，如果你想走那条路。查看源代码，您需要从包 [https://svn.apache.org/repos/asf/mina/vysper/trunk/server/core/src/main/java/org/apache移植所有功能/vysper/米娜](https://svn.apache.org/repos/asf/mina/vysper/trunk/server/core/src/main/java/org/apache/vysper/mina) 到netty并替换它的用法。这是可行的，但需要一些工作。此外，Vypser 使用 XMPP 作为基于/是 XML 子集的协议。Vysper 使用非阻塞 XML 解析器“nbxml”，它是 Vysper 的子项目。（https://svn.apache.org/repos/asf/mina/vysper/trunk/nbxml）你也需要用netty版本的nbxml替换它。在 dev@mina.apache.org 的 Vysper 邮件列表中，我可以为您提供详细的帮助。

另一种方法是使用 netty 端点，并且 - 正如 Norman 所建议的 - 以某种方式将缓冲区传递给 Vysper/MINA。这听起来像是一种优雅的方法，但我怀疑它是否比以前的方法更可行。我不知道 netty 是否有符合 Vysper 需求的非阻塞 XML 解析器。可能需要一些丑陋的特技才能将网状包裹在 MINA 周围。

最后一个建议是按原样使用 Vypser。MINA 在过去几年里并没有像 netty 那样受到那么多的喜爱，但它也是一个非阻塞 IO 框架。如果您真的坚持使用 netty，请考虑将其用作代理，在一个端点使用 netty，在另一个端点使用 Vysper/MINA，然后将您在 netty 端点收到的字节路由到 Vysper/MINA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:35:18.800

我想您可以编写自己的 impl 来包装它。或者使用支持的字节数组并包装它。

# asp.net-mvc-3 - mvc 3 - ajax.begin 表单和 httppost 上的部分视图

> ID：12028750
> 
> 赞同：1
> 
> 时间：2012-08-19T18:05:57.840
> 
> 标签：asp.net-mvc-3, partial-views

我对 partialView 有问题，在使用 Ajax.PostBack 发布后无法加载部分视图。当我单击提交按钮时，partialView 呈现为 View 而不是部分。这是我的控制器：

```
[HttpPost]
            public PartialViewResult UpdatePersonalData(UserLine user)
            {
                var usr = um.GetUserByLoginMapper(User.Identity.Name);
                ViewBag.Regions = rm.GetAllRegionsMapper().ToList();
                if (ModelState.IsValid)
                {
                    return PartialView("getLabelsPersonalData", usr);
                }

                return PartialView("getPersonalData", user);
            }

public PartialViewResult getPersonalData()
        {
            ViewBag.Regions = rm.GetAllRegionsMapper().ToList();
            var user = um.GetUserByLoginMapper(User.Identity.Name);
            return PartialView("getPersonalData", user);
        }

        public PartialViewResult getLabelsPersonalData()
        {
            var user = um.GetUserByLoginMapper(User.Identity.Name);
            return PartialView("getLabelsPersonalData", user);
        } 
```

**getPersonalData.cshtml** - 部分视图

```
@model MasterProject.JobForYouFinal.BO.UserLine
    @using (Ajax.BeginForm("UpdatePersonalData", new AjaxOptions
    {
        UpdateTargetId = "personalDataContent",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST"

    }))
    {
        <table style="text-align:center; margin:0 auto;">
        <tr>
            <td>@Html.LabelFor(a => a.PersonalData.Name)</td>
            <td>@Html.EditorFor(a => a.PersonalData.Name)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(a => a.PersonalData.LastName)</td>
            <td>@Html.EditorFor(a => a.PersonalData.LastName)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(a => a.Address.PostCode)</td>
            <td>@Html.EditorFor(a => a.Address.PostCode)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(a => a.PersonalData.KeyWord)</td>
            <td>@Html.EditorFor(a => a.PersonalData.KeyWord)</td>
        </tr>
        <tr>
                    <td><input id="save" type="submit" value="Zapisz" /></td>
                    <td>@Ajax.ActionLink("Anuluj", "getLabelsPersonalData", new AjaxOptions {
                       UpdateTargetId = "personalDataContent",
                       InsertionMode = InsertionMode.Replace
                   })</td>

                </tr>
        <tr>
        <td>@Html.ValidationSummary()</td>
        </tr>

        </table>
        } 
```

**getLabelPersonalData.cshtml** - 部分视图

```
@model MasterProject.JobForYouFinal.BO.UserLine

                <table class="myAccountTable">
                 <tr>
                    <td>@Html.LabelFor(a => a.RegistrationDate)</td>
                    <td>@Html.DisplayFor(a => a.RegistrationDate)</td>
                </tr>
                <tr>
                    <td>@Html.LabelFor(a => a.PersonalData.Name)</td>
                    <td>@Html.DisplayFor(a => a.PersonalData.Name)</td>
                </tr>
                <tr>
                    <td>@Html.LabelFor(a => a.PersonalData.LastName)</td>
                    <td>@Html.DisplayFor(a => a.PersonalData.LastName)</td>
                </tr>

                <tr>
                    <td>@Html.LabelFor(a => a.PersonalData.KeyWord)</td>
                    <td>@Html.DisplayFor(a => a.PersonalData.KeyWord)</td>
                </tr>
                <tr>
                    <td colspan="2"><input id="personalDataButton" type="submit" value="Edytuj" /></td>
                </tr>
                </table>
index.cshtml = glowny widok

<div class="empAccountSectionContainer">
            <div id="personalDataHeader" class="empAccountSectionHeader">Dane personalne</div>
             @using (Ajax.BeginForm("getPersonalData", new AjaxOptions
             {
                 UpdateTargetId = "personalDataContent",
                 InsertionMode = InsertionMode.Replace

             }))
             {
            <div id="personalDataContent" class="empAccountSectionBody">
                @{Html.RenderPartial("getLabelsPersonalData", Model.User);}

           </div>
             }
        </div> 
```

尝试使用一些 onSuccess 函数解决此问题：

```
<script type="text/javascript">
    function onSuccess() {
        $('#personalDataContent').load('EmployeeAccount/getLabelsPersonalData');
    }
</script> 
```

这是我的布局导入

```
 <head>
            <meta charset="utf-8" />
            <title>@ViewBag.Title</title>

            <link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.16/themes/start/jquery-ui.css" rel='stylesheet' type='text/css'>
            <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.4.min.js"></script>
            <script str="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js" type="text/javascript"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-1.7-development-only.js"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.11/jquery-ui.js"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmplPlus.min.js"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js"></script>
            <script str="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js" type="text/javascript"></script>
            <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>

            <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.min.js"></script>
            <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
            <link href="@Url.Content("~/Content/Styles.css")" rel="stylesheet" type="text/css" />

            <link href="@Url.Content("~/Content/jquery-ui-1.8.22.custom.css")" rel="Stylesheet" type="text/css" />
            <link href="@Url.Content("~/Content/jquery.ui.dialog.css")" rel="Stylesheet" type="text/css" />
            <link href="@Url.Content("~/Content/jquery.ui.theme.css")" rel="Stylesheet" type="text/css" />
        </head>

I had to pust this:

    <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js" type="text/javascript"></script> 
```

在我的部分视图中，因为验证不起作用。现在验证工作正常，但是当模型有效时，不能将部分视图加载为部分视图。

但仍然没有结果。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:59:15.443

我知道这是一个老问题，但我遇到了同样的问题。在我看来，我使用下面的代码解决了它：

```
@{
    Layout = Request.IsAjaxRequest()?null:"~/Views/Shared/Layout.cshtml";
} 
```

我不知道这个解决方案是否是最好的，但它确实有效；-)

# objective-c - NSDisantObject 标头丢失

> ID：12028751
> 
> 赞同：0
> 
> 时间：2012-08-19T18:06:04.670
> 
> 标签：objective-c, foundation

我正在玩[一些关于分布式对象的教程](http://www.damienlegrand.com/blog/article/Distributed-Objects-with-Java-Cocoa)——我只是试图声明一个 NSDistantObject 但得到一个“未声明的标识符”错误。当我查看基础框架中的头文件时，没有 NSDistantObject 的头文件，即使[Apple 自己的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/ObjC_classic/Intro/IntroFoundation.html#//apple_ref/doc/uid/20000687-BAJDAJAG)在该框架中列出了它。有谁知道发生了什么？我找不到其他有这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:10:56.477

好的，我看到标头在 iOS SDK 中不可用。

# android - 如何以编程方式打开 3G 服务屏幕？安卓

> ID：12028752
> 
> 赞同：0
> 
> 时间：2012-08-19T18:06:06.743
> 
> 标签：android

设置 > 通信（选项卡）> 无线和网络 > 移动网络 >3G 服务...我见过一个应用程序可以做到这一点..

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.android.phone", "com.android.phone.Settings");
startActivity(intent); 
```

此代码打开直到`Mobile Networks`..

具体来说，我想在移动网络中打开`3G Service`..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:37:32.560

没有记录和支持的方法可以做到这一点，任何未记录/不受支持的方法都不可靠。很少有 Android 设备在“设置”中有“通信（选项卡）”条目，很少有 Android 设备在“设置”中有“3G 服务”条目等。

# android - 安排数据库更新并显示对话框

> ID：12028753
> 
> 赞同：0
> 
> 时间：2012-08-19T18:06:18.220
> 
> 标签：android, database, android-intent, dialog, android-handler

好的，我认为这是一个反复出现的问题，对此感到抱歉。我需要更新我的数据库，从网络收集一些数据并在下载数据时显示一个对话框。我有我的对话，数据很好并写入数据库。我正在做一些改进。今天，这从一个活动开始。我的意愿是这发生在所有应用程序中，并在一段时间后开始。这就是问题出现的时刻。我正在使用 AlertManager 来安排我的行动。我有一个 BroadcastReceiver，它检查我的数据库并开始从网络获取数据。在这一点上，我面临着问题。我的进度对话框没有显示，数据也不是完全来自网络。

来自广播接收器的代码：

```
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.os.Handler;
import android.util.Log;
import android.widget.Toast;

public class SchedulerUpdate extends BroadcastReceiver {
    private Handler mHandler = null;

    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            mHandler = new Handler();
            Log.i("INFO", "SCHEDULED");
            if(checkDataBase(context)){
                updateData(context);
            }
        }
        catch (Exception e) {       
            e.printStackTrace();
        }
    }

    private boolean checkDataBase(Context context){
        String path = "/data/data/"+context.getPackageName()+"/databases/mdsdacpdatabase.db";
        SQLiteDatabase database = null;

        boolean result = false;
        try{
            database = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.CREATE_IF_NECESSARY);
            database.close();
            result = true;
        }
        catch(SQLiteException e){
        }

        return result;
    }

    private void updateData(final Context context) {
        ((Activity)context.getApplicationContext()).showDialog(ID_DIALOG_PROGRESS_DOWNLOAD);
        Runnable runnable = new Runnable(){
            public void run(){
                Log.i("INFO", "RUNNING");
                ...
                mHandler.post(new Runnable() {
                    public void run() {
                        ((Activity)context).dismissDialog(ID_DIALOG_PROGRESS_DOWNLOAD);
                        Log.i("INFO", "DONE");
                    }
                });
            };
        };
        new Thread(runnable).start();
    }
} 
```

阅读 StackOverflow 和 Kam 上的这些帖子：

[Android中的广播接收器对话框问题](https://stackoverflow.com/questions/6440783/broadcast-receiver-dialog-issue-in-android)

[BroadcastReceiver 中的 AlertDialog](https://stackoverflow.com/questions/3432601/alertdialog-in-broadcastreceiver)

[系统重新启动后在广播接收器中显示警报对话框](https://stackoverflow.com/questions/8766739/show-an-alert-dialog-in-broadcast-receiver-after-a-system-reboot)

[如何将数据从 BroadcastReceiver 发送到 android 中的 Activity？](https://stackoverflow.com/questions/2513832/how-to-send-data-from-broadcastreceiver-to-an-activity-in-android)

[Android：更喜欢警报和意图接收器而不是服务](http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/)<--这是 Kam

我的结论是：

*   BroadcastReceivers 无法显示对话框，因为它们不是活动（如 Commonsware 指出的）；
*   BroadcastReceivers 无法处理导致应用程序崩溃的方向问题（我在覆盖 onCreateDialog 方法的活动中解决了这个问题）；
*   处理程序未指示在广播接收器中使用；
*   服务未指示执行此类任务；

我想了一个办法来解决这个问题。创建一个继承自活动的类，并在其中处理方向问题，在其中安排我的广播以在某个时间下载内容并显示对话框。所有其他类都继承自它。我认为这个解决方案有效，但它是解决问题的重要解决方法。

对不起，如果我的问题太长了。我想讨论一些其他的解决方案（如果我提出的是一个有效的解决方案，我没有测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:14:23.200

> BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。
> 
> 这对你在 onReceive(Context, Intent) 实现中可以做的事情有重要的影响：任何需要异步操作的东西都不可用，因为你需要从函数返回来处理异步操作，但此时 BroadcastReceiver 是不再活动，因此系统可以在异步操作完成之前自由地终止其进程。
> 
> 特别是，您可能不会在 BroadcastReceiver 中显示对话框或绑定到服务。对于前者，您应该改用 NotificationManager API。对于后者，您可以使用 Context.startService() 向服务发送命令。

来源：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# python - 我需要什么版本的 Visual Studio 和/或 MinGW 来为给定版本的 Python 构建扩展模块？

> ID：12028762
> 
> 赞同：9
> 
> 时间：2012-08-19T18:07:09.753
> 
> 标签：python, c, windows, visual-studio, build

换一种方式来提出这个问题，来自[python.org](http://python.org)的 Python 构建的每个官方版本的 Python 是什么版本的 Visual C++，以及哪些版本的 MinGW 与这些版本的 Visual C++ 兼容？

是否可以在某些网站上轻松获得这些信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T20:04:02.603

**`PCbuild\readme.txt`每个 Python 版本的源代码分发中的文件都包含用于制作二进制文件的 Visual Studio 版本。**

Python 2.6、2.7、3.1 和 3.2 都是用 VS 2008 编译的。Python 3.3 和 3.4 是用 VS 2010 编译的。

我不确定 MinGW 的兼容性。

如果您正在寻找命令行编译器，Microsoft 为 Windows 7 发布了两个不同的 SDK，其中包括命令行编译器。第一个 SDK（用于 .NET 3.5）包括 VS 2008 编译器。第二个 SDK（用于 .NET 4.0）包括 VS 2010 编译器。

更新：`PCbuild\readme.txt`每个 Python 版本的源代码分发中的文件都包含用于制作二进制文件的 Visual Studio 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T19:59:19.900

大概，您正在谈论构建 Python 扩展以动态链接与 Python 实例所执行的相同 C 运行时库的要求。首先应该注意，这取决于实例的构建方式，即，如果您自己从源代码构建 Python，则决定使用的运行时库的是您用于构建的编译器版本，而不是 Python 的版本.

如果您想知道官方二进制版本的运行时库版本，您可以使用您最喜欢的 DLL 依赖工具（例如[Dependency Walker](http://www.dependencywalker.com/) ）自行解决，或者查看安装程序中包含的可再发行运行时库。

根据我非常简短的研究，我相信您可以将最新版本的 MinGW 与这些运行时库中的任何一个一起使用。默认情况下，它使用 Windows 内置的 C 运行时 msvcrt.dll，但它似乎支持使用 VC++ 运行时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-05T06:29:06.080

如果有人在 2020 年仍然对此感兴趣：我发现这个（更新的）页面列出了每个 CPython 版本使用的 Visual C++ 编译器版本（以及包含它们的 Visual Studio 版本）：

[https://wiki.python.org/moin/WindowsCompilers](https://wiki.python.org/moin/WindowsCompilers)

# c++ - 将字符串放入堆栈C++时出错

> ID：12028766
> 
> 赞同：0
> 
> 时间：2012-08-19T18:07:37.387
> 
> 标签：c++, stack

我对称为 C++ 的“程序语言”有一个大问题。我想打印字符串堆栈。

```
void show(stack<string> stos) {
  while (!stos.empty()) {
    cout << stos.pop() << endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:10:35.120

`pop()`仅从堆栈中删除顶部元素并将其丢弃。它返回（什么都没有） ，显然`void`你不能用 打印它。`cout`你需要：

```
void show(stack<string> stos)
{
    while(!stos.empty()) {
        cout << stos.top() << endl;
        stos.pop();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:10:31.560

`pop`不返回删除的值。您必须首先访问`top()`以获取值，然后调用`pop()`以摆脱它。

# xcode - 如何查看 C++ 变量的类型？

> ID：12028768
> 
> 赞同：11
> 
> 时间：2012-08-19T18:08:22.623
> 
> 标签：xcode, debugging, xcode4.4

假设我在 Xcode 4.4.1 中有以下 C++ 代码。

```
int Func();

...

void Test()
{
    auto Variable = Func();

    ...

    DoSomething(Variable);
} 
```

假设我想在最后一行的第二行找出变量的类型。我怎样才能在 Xcode 中做到这一点？

IIRC，在 Visual Studio 中，您将鼠标光标放在变量上并出现工具提示。这在 Xcode 中不会发生。

我知道这 3 种方法，但我想知道是否有更好的方法我不知道。

1.  如果按住 alt 并单击变量，它将显示“在 SomeFile.h 中定义”。

2.  如果您按住 cmd 并单击变量，它将带您到定义变量的行。但是你必须找出涉及更多步骤的 Func() 的返回类型。我正在寻找最快的方法来做到这一点。

3.  如果将光标放在变量的末尾，然后按 Ctrl+空格，它将显示自动完成，其中列出的变量类型。这可行，但似乎非常间接（例如，如果您将光标放在其他地方，您可能会在自动完成列表中获得很多条目，从而迫使您搜索变量）。有没有更直接的方法来做到这一点？

如何在 Xcode 的最后一行中找出变量的类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T23:04:38.017

您可以在需要类型的变量处设置断点，然后运行代码。确保您打开了调试器工具，Xcode 会显示类似“Variable = (int) 0”或“Variable = (std::__1::string) 'variableIsString'”的内容。

# php - 如何从 WordPress 在 Vbulletin 论坛中创建新帖子？

> ID：12028769
> 
> 赞同：1
> 
> 时间：2012-08-19T18:08:23.590
> 
> 标签：php, wordpress, plugins, webapi, vbulletin

我在子域中有一个 WordPress 博客和一个 VBulletin 论坛。我想在我的 WordPress 博客中添加一个新功能，以便访问者能够直接从博客中提问，而无需进入论坛。

VBulletin 中是否有任何 Web API 来创建新线程？或者 WordPress 的任何插件可以从 WordPress 创建一个 VBulletin 帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:37:37.357

好吧，您可以通过 vBulletin 管理员 cp 中的内置 RSS 海报从 wordpress 发布您的博客文章

# c++ - C ++如何在Linux中像消息框一样提醒用户

> ID：12028773
> 
> 赞同：0
> 
> 时间：2012-08-19T18:08:48.393
> 
> 标签：c++

大家好，我目前正在使用 C++ 代码通过 VMware 播放器运行 Ubuntu。

基本上我得到了这个倒计时 600 秒的代码。当它达到 0 时，它应该用一个警告框提醒用户：

`"Times up!"`

我知道 Linux 没有 messageBox，我看到了使用 QT 的建议，但我不想使用 QT。我可以以任何形式（如 linux 命令或其他方式）显示警报吗？

对于类似于消息框警报的消息框，你们可能有什么建议。

**谢谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:11:52.620

Zenity 可能是您正在寻找的；它是一个程序（而不是工具包），您可以像这样使用它来生成一个消息框：

```
zenity --info --text="This is an information box." 
```

编辑：zenity 会创建类似的对话框`MessageBox`，但现在它们在 Ubuntu 上很少使用（与`notify-send`通知相比）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:14:37.990

这将在托盘中创建一个弹出消息

```
notify-send ["title"] "message" 
```

另一个 - 丑陋且已弃用 - 选项是使用`zenity`，但我不鼓励您这样做。

# clojure - Clojure 整数溢出

> ID：12028776
> 
> 赞同：7
> 
> 时间：2012-08-19T18:09:20.430
> 
> 标签：clojure, jvm

我正在运行 Clojure 1.4.0。为什么如果我添加`Integer/MAX_VALUE`和 1，我会得到一个 Long，但如果我添加`Integer/MAX_VALUE`到自身，我会得到一个异常？

```
=> (def one 1)
=> (class one)
java.lang.Integer
=> (def max-plus-one (+ Integer/MAX_VALUE one))
=> max-plus-one
2147483648
=> (class max-plus-one)
java.lang.Long

=> (+ Integer/MAX_VALUE Integer/MAX_VALUE)
java.lang.ArithmeticException: integer overflow (NO_SOURCE_FILE:0) 
```

他们不应该以同样的方式行事吗？为什么添加两个`MAX_VALUE`值会溢出但添加 1 不会？

我已经看到[了这个 SO question](https://stackoverflow.com/questions/8664093/not-getting-integer-overflow-in-clojure)，但他们的行为与我不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T18:36:30.570

这很奇怪，我在 Ubuntu 12.04 64 位上使用 Clojure 1.4.0 和 Java(TM) SE 运行时环境（构建 1.7.0_06-b24）看到了不同的结果：

```
user=> *clojure-version*
{:major 1, :minor 4, :incremental 0, :qualifier nil}
user=> (+ Integer/MAX_VALUE Integer/MAX_VALUE)
4294967294
user=> (type 1)
java.lang.Long
user=> (def max-plus-one (+ Integer/MAX_VALUE one))
#'user/max-plus-one
user=> max-plus-one
2147483648
user=> (type max-plus-one)
java.lang.Long
user=> (+ Integer/MAX_VALUE Integer/MAX_VALUE)
4294967294 
```

您始终可以检查[clojure.core 用于 numerics 的 Java 类](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Numbers.java)，以了解该功能是如何实现的：

+ 运算符的实现在：

```
(defn +
  "Returns the sum of nums. (+) returns 0\. Does not auto-promote
  longs, will throw on overflow. See also: +'"
  {:inline (nary-inline 'add 'unchecked_add)
   :inline-arities >1?
   :added "1.2"}
  ([] 0)
  ([x] (cast Number x))
  ([x y] (. clojure.lang.Numbers (add x y)))
  ([x y & more]
     (reduce1 + (+ x y) more))) 
```

添加long的Java实现：

```
final public Number add(Number x, Number y){
    return num(Numbers.add(x.longValue(),y.longValue()));
} 
```

编辑：使用 Clojure 1.2.1 进行测试
我已经使用 Clojure 1.2.1 进行了快速测试，并且使用该版本的 Clojure 我完全了解您的行为。

```
user=> *clojure-version*
{:major 1, :minor 2, :incremental 1, :qualifier ""}
user=> (def one 1)
#'user/one
user=> (class 1)
java.lang.Integer
user=> (def max-plus-one (+ Integer/MAX_VALUE one))
#'user/max-plus-one
user=> max-plus-one
2147483648
user=> (class max-plus-one)
java.lang.Long
user=> (+ Integer/MAX_VALUE Integer/MAX_VALUE)
java.lang.ArithmeticException: integer overflow (NO_SOURCE_FILE:0) 
```

我会说您使用 Clojure 1.2.x 进行了测试，而不是使用 1.4.0。你的 REPL 中 *clojure-version* 的值是多少？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T21:17:44.080

看起来你有你的答案，但这里有一些其他有趣的点：

java（所有版本）和clojure（> 1.3.0）的默认行为在溢出时的行为不同

在java中

```
(Long.MAX_VALUE + 1) == Long.MIN_VALUE
(Integer.MAX_VALUE + 1) == Integer.MIN_VALUE

// cast required to avoid promoting to int
(Byte.MAX_VALUE + (byte)1) == Byte.MIN_VALUE 
```

这是因为算术在 jvm 上默认包装

在clojure（> 1.3.0）

```
(inc Long.MAX_VALUE) 
   => ArithmeticOverflow

(inc Integer/MAX_VALUE) 
   => a long with value Integer/MAX_VALUE + 1
(int (inc Integer/MAX_VALUE)) 
   => IllegalArgumentException Value 
      out of range for int: 2147483648 
```

clojure 确实有一些行为类似于 java 的操作的版本

```
(unchecked-inc Long.MAX_VALUE) => Long.MIN_VALUE 
```

您可以通过设置`*unchecked-math*`为 true将未选中的操作设为默认值

```
(set! *unchecked-math* true)
(inc Long/MAX_VALUE) 
    => (Long.MIN_VALUE)
(int (inc Integer/MAX_VALUE)) 
    => (Integer.MIN_VALUE) of type Integer 
```

还有很多其他有趣的`(unchecked-*)`操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:24:17.020

从 1.3.0 版开始，Clojure 对所有原始数字都使用 Long。你只需要使用更大的数字来获得溢出。

```
 (def max-plus-one (+ Long/MAX_VALUE one)) 
```

# java - 连接字符串和数字 Java

> ID：12028779
> 
> 赞同：18
> 
> 时间：2012-08-19T18:09:37.927
> 
> 标签：java

为什么在这些情况下输出不同？

`int x=20,y=10;`

`System.out.println("printing: " + x + y);` ==> *印刷：2010*

`System.out.println("printing: " + x * y);` ==> *打印：200*

为什么第一个输出不是 30？它与运算符优先级有关吗？就像第一个“打印”和 x 被连接，然后这个结果字符串和 y 被连接？我对么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-19T18:19:09.297

它的`BODMAS`规则

**我在下面显示从高到低的优先顺序：**

```
B  - Bracket 
O  - Power
DM - Division and Multiplication
AS - Addition and Substraction 
```

****如果运算符具有相同的优先级，则****此方法有效**`Left to Right`**

 ****现在

`System.out.println("printing: " + x + y);`

`"printing: "`：是一个字符串”

`"+"` : 是 Java 中唯一将 Number 连接到 String 的重载运算符。由于我们这里有 2 个“+”运算符，并且 x+y 落在`"printing:" +`已经发生的之后，因此它也将 x 和 y 视为字符串。

所以输出是**2010 年。**

`System.out.println("printing: " + x * y);`

这里

`"*"`: 优先级高于`+`

所以它是`x*y` **第**一个`printing: +`

所以输出是**200**

**如果您希望在第一种情况下输出 200，请这样做：**

```
System.out.println("printing: "+ (x+y)); 
```

的优先**顺序** **高于**。`Bracket`_**`Addition`**

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-19T18:13:23.180

基本数学告诉您，每次添加数字都是一次完成。

所以`"printing: " + x`首先计算。结果`string + int`是`"printing: 20"`。然后你添加`y`so `"printing: 20" + y`equals `"printing: 2010"`。

在第二种情况下，乘法是优先的。所以首先`x * y`计算并等于`200`。然后`"printing: " + 200`等于`"printing: 200"`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-19T18:14:00.500

您观察到的结果肯定与运算符*优先级*以及*评估顺序有关*。在没有其他规则（即更高优先级的运算符）的情况下，运算符按从左到右的顺序进行评估。

在第一个表达式中，所有运算符具有相同的优先级，因为它们是相同的 operator: `+`，因此对第一个运算求值。既然涉及到a `String`，那就是`String`串联，结果是a `String`；以下类似`+`。

在第二个表达式中，运算符之一是`*`，它的优先级高于`+`，因此首先计算。你得到乘法的结果，一个整数，*然后*是 a`String`和 an的连接，`int`因为`+`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T18:11:02.747

这将打印`30`：

```
System.out.println("printing: " + (x + y)) 
```

您需要括号来表达您希望的优先级。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T18:18:54.070

***它用于运算符优先级***

```
System.out.println("printing: " + x * y); 
```

这里 * 运算符的优先级高于 + 所以首先它计算`x * y`.

```
System.out.println("printing: " + x + y); 
```

在这里，所有操作符都是相同的，它将被视为字符串连接操作，因为那里只有一个`string`值。

如果您在其中涉及括号 - System.out.println("printing: " + (x + y));

然后括号 ( 运算符的优先级高于 + 所以首先它会计算`(x + y)`并打印`30`

[检查详细运算符优先顺序](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T18:14:19.233

在第一个打印行中，首先在 String 和 int 之间应用 + 运算符，结果是一个 String，它再次与另一个 int 连接，产生一个 String。

在第二行中，操作的顺序是：首先将乘法和结果 int 连接到 String。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-05-01T17:41:22.127

`System.out.println("2*("+a"+"+b"*"+c")")`

这个怎么打印******

# windows-8 - 创建一个 Metro 应用程序，它会定期自我更新，而不是置于锁定屏幕中

> ID：12028780
> 
> 赞同：1
> 
> 时间：2012-08-19T18:09:52.037
> 
> 标签：windows-8, microsoft-metro

[如此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977059.aspx)所述：

看来`a background task will only run using a TimeTrigger if the user has placed your app on the lock screen`。

那么，如何在`Calendar`没有后台任务的情况下创建类似的应用程序？我的意思是一个应用程序：

1.  *定期*更新其磁贴（例如，每天一次）？
2.  即使它没有运行，它也会更新它的磁贴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:53:36.020

您应该创建一个维护触发器。这些触发器只会每两小时触发一次，并且只有在机器使用交流电源时才会触发。当您的触发器运行时，您可以查找即将到来的约会并创建预定的 Toast 通知。

```
var scheduledToast = new Windows.UI.Notifications.ScheduledToastNotification(toastXml, startTime); 
```

您也可以使用 ScheduledTileNotifcation() 调用来更新磁贴。不幸的是，我认为没有办法删除通知，因此如果用户在预定通知之前删除约会，我认为您无法删除它。我正在深入研究，如果我找到答案，我会在这里发表评论。

但是，我认为对于日历应用程序，您会希望它使用 TimeTrigger 并放置在锁定屏幕上，因为我希望随时接收约会提醒，无论是否插入。

您是否有不想使用 TimeTrigger 的原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T01:27:01.483

您可以安排应用程序磁贴的定期更新，而无需在开始屏幕上。[有关通知传递方法](http://msdn.microsoft.com/en-us/library/windows/apps/Hh779721.aspx)，请参阅这篇文章。然后，一旦启动应用程序，您通常可以更新日历。

# c# - SynchronizationContext.Post 到 UI 方法

> ID：12028781
> 
> 赞同：7
> 
> 时间：2012-08-19T18:10:02.857
> 
> 标签：c#, .net, multithreading

我正在使用 Web 服务，因此我有必要延长会话长度/重新连接并获取大型数据集等。有时这可能很长，所以我希望它在一个单独的线程中异步更新 UI。

我似乎无法使用同步上下文来调用我的 UI 线程上的方法。我有它，我已经将我的 UIThread 上下文传递给我的线程，现在我想更新 UI 线程上的一些标签等。我已经阅读了大量的帖子，但似乎没有人解释如何简单地将一些参数传递回方法，或者他们可能这样做了，但我太累/太愚蠢了，看不到它。

//在主UI线程上

```
public void updateConnStatus(string conn_name, bool connected)
{
        switch (conn_name)
        {
            case "Conn" : if (connected == true){ //do something} break; 
```

//在单独的线程上

```
uiContext.Post( //something to do with delegates in here that eludes me ); 
```

如果有人可以简单地解释我如何将 sendOrPostCallBack 链接到原始方法，我将不胜感激。

谢谢

编辑：

我设法让代码运行并尝试触发事件，它填充了我的自定义 eventArgs 好，但要么它说 updateUIConnStatus 尚未实例化，需要更多调查：o

```
public void updateUIThread(string conn, bool connected)
    {
       uiContext.Post(new SendOrPostCallback((o) => { updateConnStatus(this, new MyEventArgs<String, Boolean>(conn, connected)); }), null);
    }

public class MyEventArgs<T, U> : EventArgs
    {
        private T _val1; private U _val2;
        public  MyEventArgs(T value1, U value2) { _val1 = value1; _val2 = value2; }
        public T val1 { get { return _val1;} }
        public U val2 { get {return _val2;} }
    }

public event EventHandler<MyEventArgs<String, Boolean>> updateConnStatus = Delegate {}; 
```

//现在在 UI 线程上

```
 public void updateConnStatus(object sender, MyEventArgs<String,Boolean> e)
    {
        switch (e.val1)
        {
            case "Conn1" :
                if (e.val2 == true)
                { 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-19T18:47:29.387

您需要一个 SendOrPostCallback 类型的委托。这很尴尬，它只需要一个*object*类型的参数。您绝对应该查看 .NET 4 中提供的 Task<> 类，以使其更容易。或者使用 lambda，如下所示：

```
 string conn_name = "foo";
        uiContext.Post(new SendOrPostCallback((o) => {
            updateConnStatus(conn_name, true);
        }), null); 
```

{ 大括号 } 之间的代码在 UI 线程上执行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-23T17:50:54.260

通常，您在 UI 线程上创建类型的实例（例如 ViewModels），因此您可以将 SynchronizationContext 或 TaskScheduler（最好是恕我直言）保存到私有字段，然后在需要时进行比较...

```
private readonly SynchronizationContext _syncContext = SynchronizationContext.Current;
private readonly TaskScheduler _scheduler = TaskScheduler.Current;

void OnSomeEvent(object sender, EventArgs e)
{
    if (_syncContext != SynchronizationContext.Current)
    {
        // Use Send if you need to get something done as soon as possible.
        // We'll be polite by using Post to wait our turn in the queue.
        _syncContext.Post(o => DoSomething(), null);
        return;
    }
    // Call directly if we are already on the UI thread
    DoSomething();
}

void OnSomeOtherEvent(object sender, MyEventArgs e)
{
    var arg1 = e.Arg1; // "Hello "
    var arg2 = e.Arg2; // {"World", "!"};

    // Process args in the background, and then show the result to the user...
    // NOTE: We don't even need to check the context because we are passing
    // the appropriate scheduler to the continuation that shows a MessageBox.

    Task<string>.Factory.StartNew(() => ReturnSomething(arg1, arg2))
        .ContinueWith(t => MessageBox.Show(t.Result), _scheduler);
}

void DoSomething() { MessageBox.Show("Hello World!"); }

string ReturnSomething(string s, IEnumerable<string> list)
{
    return s + list.Aggregate((c, n) => c + n);
} 
```

# ruby-on-rails - 如何在 Rails 中指定环境依赖项？

> ID：12028794
> 
> 赞同：1
> 
> 时间：2012-08-19T18:11:41.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

哪里列出了 Rails 应用程序的环境变量依赖项？

如果用户没有指定变量或至少输出某种形式的通知，上面写着 ***Don't run until you've set the following environment variables..."，我不希望应用程序运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:23:52.060

我会把类似的东西放在[`config/boot.rb`](http://guides.rubyonrails.org/initialization.html#config-boot-rb)：

```
# usual boot.rb stuff...
raise 'Set PANCAKES in your environment!' unless ENV.has_key? 'PANCAKES' 
```

好处`boot.rb`是它在启动过程的早期运行，因此您不必等待所有 Rails 机器启动（这可能需要很长时间）才知道有问题。

# c++ - 如何将用于演示的运动历史图像制作成一张图像？

> ID：12028799
> 
> 赞同：5
> 
> 时间：2012-08-19T18:12:33.027
> 
> 标签：c++, opencv, kinect, depth, openni

我正在做一个手势识别项目。现在我想准备一个只能显示图像的演示文稿。我有一系列定义手势的图像，我想在单个图像中显示它们，就像在文学中显示运动历史图像一样。

我的问题很简单，我可以使用 opencv 中的哪些函数来制作运动历史图像，例如 10 个或更多定义手部运动的图像。

作为一个例子，我有下面的图像，我想显示手的位置（不透明度直接取决于时间参考）。

![示例图像](../Images/a8340b548e7943e2cd50627b5484014c.png)

我尝试使用 GIMP 合并具有不同不透明度的图层来做同样的事情，但是输出不好。 ![用 gimp 输出](../Images/d71d6ad64230f188b0555643f53d93b7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:48:44.317

您可以使用[cv::updateMotionHistory](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#updatemotionhistory)
实际上 OpenCV 还演示了[samples/c/motempl.c中的用法](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/c/motempl.c)

# sql - sql连接多个表，将行作为列返回

> ID：12028800
> 
> 赞同：-1
> 
> 时间：2012-08-19T18:12:46.320
> 
> 标签：sql, sql-server-2008, join, subquery, pivot

抱歉，如果这已在某处得到回答，我已经搜索但找不到答案。

我有 3 个 SQL 表：员工表（ID、姓名等）关键技能表（ID、技能名称）链接表（员工 ID、技能 ID）

员工显然可以拥有多种关键技能，但我试图将它们作为“员工报告”在 1 行中报告，如下所示：

第 1 行 - 姓名、出生日期、关键技能 1、关键技能 2 等......第 2 行 - 姓名、出生日期、关键技能 1、关键技能 2 等......

我可以使用以下方法获得以多行形式返回的技能：

```
SELECT DISTINCT kst.KeySkillName FROM KeySkillsTable
    INNER JOIN KeySkillsLinkTable kslt ON kslt.EmployeeId = 2
    INNER JOIN KeySkillsTable kst ON kst.Id = kslt.KeySkillsId 
```

但是当我将它作为子查询放入更大的选择中时，我收到以下错误：

子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我认为这是因为子查询返回多行，而不是我需要的多列。

任何人都可以提供任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T23:51:43.617

您可以使用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 有两种方法，一种是对列的值进行硬编码的静态透视，另一种是在运行时确定列的动态透视。这是一个示例，说明如何针对您的情况执行此操作。

静态数据透视（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4d389/9)）

```
select *
from 
(
  select e.id, e.name, s.skillname, count(*) cnt
  from employee e
  left join emp_skill es
    on e.id = es.emp_id
  left join skills s
    on es.skill_id = s.id
  group by e.id, e.name, s.skillname
) x
pivot
(
  sum(cnt)
  for skillname in([skill 1], [skill 2], [skill 3])
) p 
```

Dynamic Pivot（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4d389/13)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(skillname) 
                    from skills
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT id, name,' + @cols + ' from 
         (
            select e.id, e.name, s.skillname, count(*) cnt
            from employee e
            left join emp_skill es
              on e.id = es.emp_id
            left join skills s
              on es.skill_id = s.id
            group by e.id, e.name, s.skillname
         ) x
         pivot 
         (
            sum(cnt)
            for skillname in(' + @cols + ')
         ) p '

execute(@query) 
```

两个查询将产生相同的结果。不同之处在于，首先您必须对要成为列的所有值进行编码。

# javascript - Javascript Firefox 问题

> ID：12028801
> 
> 赞同：0
> 
> 时间：2012-08-19T18:13:04.773
> 
> 标签：javascript

我开发了一个带有内置脚本的 .htm 文档，供 javascript 运行程序。在 google chrome 中，该程序运行良好，但我收到了一个 beta 测试投诉，称它在 firefox 14.01 或 opera 上不起作用。在使用 firefox 14.01 进行测试时，我可以确认它不起作用（我假设歌剧是相同的）。我不能坚持让观众升级他们的浏览器，因为这应该是广泛兼容的。

对问题进行了一些跟踪，我安装了 Firebug，它在第一次单击 Javascript 按钮生成坐标时，它起作用了（清楚地显示该*函数已定义并存在*），但第二次，Firebug 抱怨说：

```
"ReferenceError: GenerateCoord is not defined". 
```

如果它只在生成（加密）坐标（因此调用应该是“未定义”的 GenerateCoord）之后才这样做，这不会那么具有讽刺意味。

如果查看代码，可以清楚地看到函数 GenerateCoord 在调用之前已经明确定义。我会说firefox有一个'onclick'问题，但它提出了一个问题，为什么它在我第一次点击它时起作用（通过'onclick'调用GenerateCoord）而不是第二次？

重新加载文件允许按钮第一次工作，并且仅在第一次工作。我很困惑firefox如何一次调用一个函数，然后它说下一次是未定义的。我在这里错过了什么吗？

Javascript 和 HTML 代码可以在这里查看：

[http://pastebin.com/4qykTfEW](http://pastebin.com/4qykTfEW)

-

我该如何解决这个问题，是否有比重写代码以避免 onclick 更简单的解决方案（这似乎在某些情况下有效，但在其他情况下无效）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:19:00.733

问题是使用*document.write*会覆盖整个 HTML 页面，从而无意中删除了*GenerateCoord*脚本。我建议将链接附加到文档（在*ShowTarget*中），而不是尝试重新编写它。

例如，有一个容器元素，链接应该是：

```
<div id="links_container"></div> 
```

然后附加链接，使用：

```
document.getElementById('links_container').innerHTML = Link; 
```

# jquery - Symfony2 如何与 JQuery 一起工作？什么是资产转储？为什么？

> ID：12028808
> 
> 赞同：1
> 
> 时间：2012-08-19T18:13:39.407
> 
> 标签：jquery, symfony, twig, assetic

我对 Symfony2 框架还很陌生，在阅读了以下文档[http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files后仍然不太了解如何包含 JQuery lib](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files)

我见过类似的问题，但没有一个能解释一切如何协同工作？为什么我们需要抛弃资产？为什么将它们包含在模板中是不够的？

基本上，我想要做的是将我的 JQuery 库放在***app/Resources/js/***下 ，然后在我的任何包内的任何 Twig 模板中，我想引用/包含这个 JQuery 库以便能够编写 JQuery 脚本代码. 我需要修改我的***app/config/config.yml***文件吗？

请提供一个示例以及您的解释。以下是我到目前为止所做的（以下所有内容都在一个 Twig 模板中）：

```
{% javascripts 'app/Resources/js/jquery-1.8.0.js' %}
<script type="text/javascript">
$(document).ready(function (){
    $('a').click(function(event){
        $('#box').fadeOut();
    });
}); 
</script>
{% endjavascripts %} 
```

```
<div id="box">
    <a href="#">click me</a>
</div> 
```

页面加载没有任何问题，但是当我点击“点击我”时，JQuery 代码没有被执行！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T22:47:53.647

您在资产树枝实施中遗漏了一些东西。你应该做：

```
{% javascripts 'app/Resources/js/jquery-1.8.0.js' %}
<script type="text/javascript" src="{{ asset_url }}"></script>
... 
```

如果没有这第二行，jquery 就不会实际加载。

在任何情况下，使用资产是可选的。如果您对它不满意，则不需要它提供的优化或更喜欢使用更熟悉的东西，直到您掌握它的窍门，然后将 jquery 文件放在您的“web”文件夹中的某个位置（例如在 js 子文件夹下），然后像加载任何其他资产文件一样加载它：

```
<script src="{{ asset('/js/jquery-1.8.0.js') }}" type="text/javascript"></script> 
```

# android - 在 Eclipse 中找不到 AVD 或 SDK 管理器

> ID：12028811
> 
> 赞同：90
> 
> 时间：2012-08-19T18:14:08.547
> 
> 标签：android, eclipse, sdk, avd

似乎我在使用 sdk 管理器更新我的 android sdk 工具和平台工具后遇到了一些问题。问题是，更新后发现eclipse中windows下拉菜单中的avd或sdk选项不见了！而且，我再也找不到从文件-> 新项目创建 android 项目的任何选项。

我尝试从 Eclipse 中删除 ADT，并从“可用软件站点”中删除软件站点“https://dl-ssl.google.com/android/eclipse/”，然后从“https://dl-ssl. google.com/android/eclipse/" 使用帮助->安装新软件。安装成功，但我仍然没有任何快捷方式选择 SDK 管理器或 Eclipse 中的 AVD，也无法创建新的 android 项目。

顺便说一句，android 的观点并没有消失，它们还在这里。此外，我可以从安装它们的目录中手动打开 avd 和 sdk 管理器。

谁能告诉我一个解决方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-01-16T17:52:22.127

我已经解决了这个问题：

1.  Window > Customize Perspective...（您将看到 Android 和 AVD Manager 已禁用）

2.  命令组可用性 > Android 和 AVD 管理器 > 检查

3.  工具栏可见性 > Android 和 AVD 管理器 > 检查

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-09T03:07:52.737

在将 SDK 从 r20 更新到 r21 后，我遇到了类似的问题，但我错过的只是 SDK/AVD 管理器，并在搜索答案时遇到了这篇文章。

我设法通过转到来解决它`Window -> Customize Perspective`，并在命令组可用性选项卡下检查 Android SDK 和 AVD 管理器（不知道为什么它变得未选中，因为它以前在那里）。顺便说一句，我使用的是 Mac，以防菜单选项看起来不同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T21:14:52.303

好吧，我觉得自己很傻，但我的问题是我处于 Debug 视角，而它们没有出现在那个视角中。切换回 Java 透视图和中提琴。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-10T15:38:07.533

Window -> Custom Perspective -> Command Groups Availability -> Android SDK and AVD Manager 检查一下

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-19T18:42:53.847

您可能正在使用 Java 1.5 运行 Eclipse。

```
Latest Plugin requires that the JRE be 1.6 or higher. 
```

您必须使用在 JRE 1.6 上运行的 Eclipse

编辑：我遇到了同样的问题。如果不是 JRE 问题，那么您可以调试它。遵循以下程序：

1.  窗口 -> 显示视图 -> 其他 -> 插件开发 -> 插件注册表
2.  在插件注册表中搜索 com.android.ide.eclipse.adt 或任何其他与 android 相关的插件（取决于您的安装，可能有 7-8 个）
3.  选择，右键单击-> 诊断。这将显示插件未加载的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T18:20:08.920

尝试在 Eclipse 上重新安装**ADT 插件。**看看这个： [安装 Eclipse 插件](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-08T09:33:52.137

我建议您安装与您的 Android SDK 工具兼容的 ADT 插件，并尝试安装与您的 Android SDK 兼容的所有必需插件，例如 Android SDK 工具 Rev 20.0.3 Android SDK 工具 Rev 20.0.3 Android SDK Platform-tools Rev 14 Android 2.3.3(API 10) sdk 平台 rev 2 示例 sdk api 10 rev 1 ADT Plugin 20.0.3

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-23T02:09:35.257

Unfortunately I ended up having to re-install eclipse. but first (In Linux)(not sure of folder in Windows) do:

```
sudo rm -R /usr/share/eclipse/ 
```

# visual-studio-2010 - NUnit 未指定为 SpecFlow 的测试运行程序

> ID：12028820
> 
> 赞同：2
> 
> 时间：2012-08-19T18:14:53.327
> 
> 标签：visual-studio-2010, nunit, specflow

在我的一生中，我无法将 SpecFlow 配置为使用 NUnit 作为测试运行器。NUnit 未在工具 > 选项 > SpecFlow 测试运行器下拉列表中列出，并且“自动”设置未找到 NUnit。

我尝试过多次重新安装 NUnit 和 SpecFlow。尝试安装 SpecFlow 1.8.1 和 1.9 无济于事。尝试使用 app.config。我什至尝试过重新安装 Visual Studio 2010。

我只想让 SpecFlow 使用 NUnit (2.6.1)。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-29T14:17:47.617

Visual Studio->工具->扩展和更新->在线->搜索“测试适配器”->安装。

[http://visualstudiogallery.msdn.microsoft.com/6ab922d0-21c0-4f06-ab5f-4ecd1fe7175d](http://visualstudiogallery.msdn.microsoft.com/6ab922d0-21c0-4f06-ab5f-4ecd1fe7175d)

迟到总比不到好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:55:54.220

尝试编辑单元测试项目的配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="specFlow" type="TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler, TechTalk.SpecFlow" />
  </configSections>
  <specFlow>
      <unitTestProvider name="NUnit" />
  </specFlow>
</configuration> 
```

[在此处](https://github.com/techtalk/SpecFlow/wiki/Configuration)查看配置文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:38:07.420

SpecFlow 本身不提供测试运行程序，如果您想右键单击 .feature 并运行它，您必须重新配置 SpecFlow 以使用 MSTest，它应该使用内置的 VS 运行程序。

如果要使用 NUnit，则需要额外的工具。我会推荐 Resharper，但它不是免费的。本文[应该](http://www.dev102.com/2008/03/22/3-ways-to-run-nunit-from-visual-studio/)可以帮助您选择一种从 VS 运行 NUnit 测试的方法。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:23:13.390

要与 Visual Studio 集成，您需要安装 SpecFlow 扩展。SpecFlow 分为两部分。

1.  **NuGet 包**包含创作和运行测试所需的 dll。
2.  **Visual Studio 扩展**，它为您提供智能感知、语法突出显示、代码导航以及通过右键单击并选择“运行 SpecFlow 场景”来运行测试的能力。

我猜你已经安装了 Nuget 包，但还没有安装扩展。

要安装扩展：

1.  打开 Visual Studio
2.  选择工具 -> 扩展管理器
3.  搜索 SpecFlow 扩展
4.  点击安装

# javascript - 如何使用 javascript 警报窗口显示验证消息？

> ID：12028825
> 
> 赞同：0
> 
> 时间：2012-08-19T18:16:08.100
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation, jquery-validate

我在索引视图上使用 LogOn 部分视图并使用 MVC3 的默认 LogOnModel。但是，没有足够的地方在视图中显示验证消息。如何使用 javascript 警报窗口显示验证消息？

```
[HttpPost]
public ActionResult LogOn( LogOnModel model, string returnUrl )
{
    if ( ModelState.IsValid )
    {
        if ( ( model.UserName != null ) && ( model.Password != null ) )
        {
            if ( Membership.ValidateUser( model.UserName, model.Password ) )
            {
                FormsAuthentication.SetAuthCookie( model.UserName, true );

                if ( Url.IsLocalUrl( returnUrl ) && returnUrl.Length > 1 && returnUrl.StartsWith( "/" )
                    && !returnUrl.StartsWith( "//" ) && !returnUrl.StartsWith( "/\\" ) )
                {
                    return Redirect( returnUrl );
                }
                else
                {
                    return RedirectToAction( "Index", "Home", model );
                }
            }
            else
            {
                return RedirectToAction( "Index", "Home" );
            }
        }
        else return RedirectToAction( "Index", "Home" );
    }
    return RedirectToAction( "Index", "Home" );
} 
```

在索引视图中：

```
 @Html.Partial( "LogOn" ) 
```

和登录视图：

```
@model OnlineMarket.Models.LogOnModel
@using ( Html.BeginForm( "LogOn", "Home", FormMethod.Post ) )
{
    @Html.ValidationSummary( true )
    @Html.Hidden( "RememberMe", "true" )
    <ul class="forms">
        <li class="txt">Username</li>
        <li class="inputfield">
            @Html.TextBoxFor( m => m.UserName, new { @class = "logininputs" } )
        </li>
    </ul>
    <ul class="forms">
        <li class="txt" style="width: 26px;">Password</li>
        <li class="inputfield">
            @Html.TextBoxFor( m => m.Password, new { @class = "logininputs" } )
        </li>
    </ul>
    <ul class="forms">
        <li class="txt" style="width: 50px; margin-top: -5px; margin-left: 4px;">
            <input type="submit" value="Enter" class="buttonforinput" style="height: 23px;" />
        </li>
    </ul>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:15:03.940

对于不显眼的客户端验证，您可以订阅`showErrors`回调并以您想要的方式显示错误（`alert`在您的情况下）：

```
(function ($) {
    $.validator.setDefaults({
        onsubmit: true,
        onkeyup: false,
        onfocusout: false,
        showErrors: function (errorMap, errorList) {
            if (errorList.length > 0) {
                var errors = errorList.map(function (element) {
                    return element.message;
                }).join('\r\n');
                alert(errors);
            }
        }
    });
})(jQuery); 
```

为了`alert`在客户端上显示服务器端错误，您不应该使用`@Html.ValidationSummary( true )`帮助程序，因为此帮助程序直接在视图中输出错误并且您说您没有足够的位置。

因此，您可以在出现错误时动态发出 javascript 并将它们显示在`alert`：

```
@if (!ViewData.ModelState.IsValid)
{
    <script type="text/javascript">
        var errors = @Html.Raw(
            Json.Encode(
                string.Join(
                    Environment.NewLine, 
                    ViewData.ModelState
                            .Where(x => x.Value.Errors.Count > 0)
                            .SelectMany(x => x.Value.Errors)
                            .Select(error => error.ErrorMessage))
                )
        );
        alert(errors);
    </script>
} 
```

# objective-c - 将 UITableView 的子类设置为委托/数据源

> ID：12028826
> 
> 赞同：1
> 
> 时间：2012-08-19T18:16:10.657
> 
> 标签：objective-c, uitableview

我有一个继承自另一个子类 'subclassParent' 的子类 UITableView，'subclassChild'。'subclassParent' 然后继承自`UITableView`.

我的视图控制器继承自自定义视图控制器“GenericTableViewController”，并包含我`UITableViewController`的具有“subclassChild”类。

'GenericTableViewController' 为所有包含表格视图的视图控制器定制我的表格页眉和页脚。

我的问题是，我该如何做`UITableView`才能使用 'subclassChild' 和 'subclassParent' 作为其委托和数据源。仍然确保“GenericTableViewController”自定义我的表格页眉和页脚。

抱歉，如果这有点令人困惑，我已尽力描述它。

PS 我已经`<UITabBarDelegate, UITableViewDataSource>`在头文件中添加了。

而且我已经确保该表继承自 IB 中的“subclassChild”。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:23:18.223

您可以做的是让您的“GenericTableViewController”本身有一个委托。它自己会做大部分工作，但最后它会问它的代表“还有什么要做的吗”？

当代理说“是的，确实有一些东西”时，该代码将被执行，用作数据源、代理或您想要的任何东西。举个例子（请原谅我的代码不准确）：

```
- (void) rowForIndex:(NSInteger)row {
     if([delegate respondsToSelector:@selector("TVGetRow:")]) {
          return [delegate TVGetRow:row]
     } else return Rows[row];
} 
```

此示例假定您有一个 tableview 单元格数组，但应该给您一个好主意。您不需要为该子类头文件实现 UITableViewDataSource，而是使用自定义协议。

编辑：由于显然我不清楚我的目标是什么，请允许我添加一些信息。

基本思想是使用'subclassChild'并通过它'subclassParent'作为GenericTableViewController的代表，而不是使用'subclassChild'作为tableView的类型。（你不应该子类化视图，除非你打算改变它的绘图行为）。

一般层次结构将像这样工作：

subclassChild -> 委托 -> GenericTableViewController <- DataSource/Delegate <- TableView

您需要创建一个 init 方法或一个设置此委托的 setter 方法，以及一个允许您调用函数的简单协议，如下所示：

```
@interface GenericTableViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> {
    id theDelegate;
}

    - (id) initWithDelegate:(id)delegate;
@end

@protocol GTVC
    @optional
    - (UITableViewCell *) getDataForRow:(NSIndexPath *)path;
    - (void) rowSelected:(NSIndexPath *) path;
@end 
```

在 .m 文件中，此示例如下所示：

```
@implementation GenericTableViewController
    - (id) initWithDelegate:(id)delegate {
        self = [super initWithNibName:@"TableView.nib" bundle:nil];
        if(self) {
            theDelegate = [delegate retain];  //The 'retain' is optional, really.
        }
        return self;
    }

    - (void) dealloc {
        [theDelegate release]; //In case of retain -> release.
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        if([theDelegate respondsToSelector:@selector(getDataForRow:)])
            return [theDelegate getDataForRow:indexPath];
        else {
            //Create general UITableViewCell
        }
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        if([theDelegate respondsToSelector:@selector(rowSelected:)])
            [theDelegate rowSelected:indexPath];
        else {
            //Do stuff
        }
    }
@end 
```

此协议/委托“游戏”可以轻松扩展，为您提供所需的所有级别的控制......一直使用 GenericTableViewController 作为“备份”，如果未设置任何委托或“未准备好”回答进一步指示的请求。我希望这有帮助。

# javascript - 在 Backbone.js 中创建自定义“同步”方法

> ID：12028829
> 
> 赞同：6
> 
> 时间：2012-08-19T18:16:59.280
> 
> 标签：javascript, backbone.js, underscore.js

`sync()`在主干中创建自定义方法。

我想这样做是“正确的”，并尽可能少地干扰 Backbone 的正常功能。

这是我到目前为止的代码：

```
var CustomSyncModel = Backbone.Model.extend({
    sync:function(method, model, options){
        var params = {
            type: 'POST'
            url: model.url(),
            error: function(jqXHR, textStatus, errorThrown){
                alert('error');
            },
            success: function(data, textStatus, jqXHR){
                model.parse(data);
            }
        };
        // Got this from line 1359 in Backbone.js developement library
        //     version 0.9.2:
        $.ajax(_.extend(params, options));
    }
 }); 
```

我遇到的问题是该行：`$.ajax(_.extend(params, options));`似乎正在覆盖我创建的自定义`success`和`error`函数。但我也担心会干扰任何自定义回调或其他可能已在使用此模型的应用程序中指定的其他功能。

覆盖Backbone的方法的“正确”方法是`sync()`什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T19:00:49.563

如果你看一下，[`Model#fetch`](https://github.com/jashkenas/backbone/blob/0.9.2/backbone.js#L335)你会看到 Backbone 使用的常用方法：

```
fetch: function(options) {
  //...
  var success = options.success;
  options.success = function(resp, status, xhr) {
    if (!model.set(model.parse(resp, xhr), options)) return false;
    if (success) success(model, resp);
  };
  //...
} 
```

所以 Backbone 只是用一个调用原始函数的新函数替换了该函数。在你的情况下，你会有这样的事情：

```
// We don't own options so we shouldn't modify it,
// but we can do whatever we want to a clone.
options = _(options).clone()

// Replace options.error with a wrapper.
var error = options.error;
options.error = function(jqXHR, textStatus, errorThrown) {
    alert('error');
    if(error)
        error(jqXHR, textStatus, errorThrown);
};

// Replace options.success with a wrapper.
var success = options.success;
options.success = function(data, textStatus, jqXHR) {
    model.parse(data);
    if(success)
        success(data, textStatus, jqXHR);
};

// We don't need error or success in here anymore.
var params = {
    type: 'POST',
    url:   model.url() 
};
$.ajax(_.extend(params, options)); 
```

顺便说一句，您`model.parse(data);`在`success`处理程序中可能没有做任何有用的事情，[`parse`](http://backbonejs.org/#Model-parse)应该只是一个简单的过滤器，所以您想用返回值做一些事情（例如`model.set`调用） 。`model.parse(data)`

# r - R为每一行查找函数的根

> ID：12028831
> 
> 赞同：1
> 
> 时间：2012-08-19T18:17:13.850
> 
> 标签：r

我有一个包含大约 400 个观察值（行）的数据集。对于每一行，我需要找到一个函数的根，例如：f(x)= variable_1 - variable_2 + x。

为了找到根，我想使用`uniroot.all(f,interval)`rootSolve 包中的函数。

我的问题是，我如何为每一行执行此操作。我应该使用循环还是“应用”更适合这样做？

使用“应用”我尝试了以下代码，但是我总是收到一条错误消息。

```
> library(rootSolve)
> df<-as.data.frame(matrix(1:6,ncol=2))
> df
  V1 V2
1  1  4
2  2  5
3  3  6

> apply(df,1,uniroot.all(fun<- function(x) df$V1-df$V2 + x, interval=c(0,100))) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:30:21.970

这是使用时的正确语法`apply`：

```
apply(df, 1,
      function(z) uniroot.all(function(x)z[1]-z[2]+x,
                              interval = c(0,100)))
# [1] 3 3 3 
```

就个人而言，我喜欢将`plyr`包用于此类事情，因此我可以通过列名（此处`V1`和`V2`）访问变量：

```
library(plyr)
adply(df, 1, summarize,
      solution = uniroot.all(function(x)V1-V2+x,
                             interval = c(0,100)))
#   V1 V2 solution
# 1  1  4        3
# 2  2  5        3
# 3  3  6        3 
```

# jquery - 使用 jQuery 事件委托忽略子元素

> ID：12028833
> 
> 赞同：0
> 
> 时间：2012-08-19T18:17:16.067
> 
> 标签：jquery, events, delegation, event-delegation

我正在使用 on 方法将单击事件委托给注入的 div。这些注入的 div 也将具有位于其父 div 之外的子 div。我希望忽略子 div 上的点击事件，但似乎无法弄清楚。这是一个例子：

**这是一个小提琴：http:** [//jsfiddle.net/7ULUJ/](http://jsfiddle.net/7ULUJ/)

**这是HTML**

```
<div id="container">
<div class="click_this_one_only">
    click event delegated
    <div id="child1">
        child 1
    </div>
    <div id="child2">
        <div id="child_child">
            child child
        </div>
    </div>
</div>
</div> 
```

**这是jQuery：**

```
$('#container').on('click', '.click_this_one_only', function() {

   alert('you just clicked .' + $(this).attr('id'));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:20:36.050

检查元素的事件目标：

[http://jsfiddle.net/7ULUJ/3/](http://jsfiddle.net/7ULUJ/3/)

```
$('#container').on('click', '.click_this_one_only', function(e) {
    if ($(e.target).hasClass("click_this_one_only")) {
        alert("clicked");
    }
});​ 
```

# google-drive-api - 补丁主体：同时更新/用户

> ID：12028834
> 
> 赞同：3
> 
> 时间：2012-08-19T18:17:33.523
> 
> 标签：google-drive-api

是否可以仅部分更新 google-drive 文件？

我有一个带有 XML 的大文件，但用户可以同时处理同一个文件。对此的最佳做法是什么？基本上它与多个用户可以同时在其中工作的常规 Google 文档相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:27:26.833

不幸的是，目前无法对文件内容进行部分更新。然而，这是我们正在积极研究的事情。

目前，您只能在文件发生更改的情况下上传整个文件。

# javascript - Backbone：重新渲染中丢失的事件

> ID：12028835
> 
> 赞同：38
> 
> 时间：2012-08-19T18:17:38.900
> 
> 标签：javascript, backbone.js, backbone-events

我有负责渲染*子视图的**超级*视图。当我*重新渲染**超级视图时，**子视图*中的所有事件都丢失了。

 ***这是一个例子：

```
var SubView = Backbone.View.extend({
    events: {
        "click": "click"
    },

    click: function(){
        console.log( "click!" );
    },

    render: function(){
        this.$el.html( "click me" );
        return this;
    }
});

var Composer = Backbone.View.extend({
    initialize: function(){
        this.subView = new SubView();
    },

    render: function(){
        this.$el.html( this.subView.render().el );             
    }
});

var composer = new Composer({el: $('#composer')});
composer.render(); 
```

当我单击*click me* div 时，将触发该事件。如果我`composer.render()`再次执行，一切看起来都差不多，但*点击事件*不再触发。

检查[工作的 jsFiddle](http://jsfiddle.net/fguillen/6frH6/)。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-19T19:18:15.190

当你这样做时：

```
this.$el.html( this.subView.render().el ); 
```

您实际上是在说：

```
this.$el.empty();
this.$el.append( this.subView.render().el ); 
```

并[`empty`](http://api.jquery.com/empty/)杀死里面所有东西的事件`this.$el`：

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。

所以你失去了`delegate`绑定事件的调用`this.subView`并且`SubView#render`不会重新绑定它们。

您需要`this.subView.delegateEvents()`拨打电话，`this.$el.html()`但您需要在`empty()`. 你可以这样做：

```
render: function(){
    console.log( "Composer.render" );
    this.$el.empty();
    this.subView.delegateEvents();
    this.$el.append( this.subView.render().el );             
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/57maA/1/](http://jsfiddle.net/ambiguous/57maA/1/)

或者像这样：

```
render: function(){
    console.log( "Composer.render" );
    this.$el.html( this.subView.render().el );             
    this.subView.delegateEvents();
    return this;
} 
```

演示：http: [//jsfiddle.net/ambiguous/4qrRa/](http://jsfiddle.net/ambiguous/4qrRa/)

或者您可以在渲染时[`remove`](http://backbonejs.org/#View-remove)重新创建`this.subView`并以这种方式回避问题（但这可能会导致其他问题......）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-20T22:46:36.383

这里有一个更简单的解决方案，它不会首先破坏事件注册：`jQuery.detach()`.

[http://jsfiddle.net/ypG8U/1/](http://jsfiddle.net/ypG8U/1/)

```
this.subView.render().$el.detach().appendTo( this.$el ); 
```

但是，出于性能原因，这种变化可能更可取：

[http://jsfiddle.net/ypG8U/2/](http://jsfiddle.net/ypG8U/2/)

```
this.subView.$el.detach();

this.subView.render().$el.appendTo( this.$el );

// or

this.$el.append( this.subView.render().el ); 
```

显然这是与示例匹配的简化，其中子视图是父视图的唯一内容。如果确实如此，您可以重新渲染子视图。如果还有其他内容，您可以执行以下操作：

```
var children = array[];

this.$el.children().detach();

children.push( subView.render().el );

// ...

this.$el.append( children ); 
```

或者

```
_( this.subViews ).each( function ( subView ) {

  subView.$el.detach();

} );

// ... 
```

此外，在您的原始代码中，并在@mu 的答案中重复，一个 DOM 对象被传递给`jQuery.html()`，但该方法仅记录为接受 HTML 字符串：

```
this.$el.html( this.subView.render().el ); 
```

书面签名`jQuery.html()`：

```
.html( htmlString ) 
```

[http://api.jquery.com/html/#html2](http://api.jquery.com/html/#html2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T12:50:14.923

使用`$(el).empty()`它时，会删除所选元素中的所有子元素，并删除**绑定到**所选元素 () 内的任何（子）元素的**所有****事件**（和数据）。**`el`**

 **要将**事件绑定到**子**元素**，但仍删除子元素，请使用：

`$(el).children().detach();`代替`$(.el).empty();`

这将允许您的视图在事件仍然绑定和工作的情况下成功重新渲染。*****

# javascript - Javascript随机混合数字

> ID：12028843
> 
> 赞同：0
> 
> 时间：2012-08-19T18:18:48.553
> 
> 标签：javascript, random, numbers

> **可能重复：**
> [如何随机化 javascript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

大家好，我知道如何用 Javascript 生成随机值`Math.random()`，但你能告诉我如何随机混合数字吗？

例如我有数字 1,2,3,4,5,6,7,8,9,10 如何像这样随机混合：2,8,9,1...所以每个数字只能使用一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:22:41.663

您可以通过将它们全部放在一个数组中并以随机方式对该数组进行排序来做到这一点。

```
var nrs = [1,2,3,4,5,6,7,8,9,10];
nrs.sort(function(a,b){
    return Math.floor(Math.random()*3 - 1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:33:46.420

```
var nums = [1,2,3,4,5,6,7,8,9,10], numsMixed = [];
while(nums.length){
  numsMixed = numsMixed.concat(nums.splice((Math.random() * nums.length), 1));
}
console.log(numsMixed); 
```

# matlab - 是否可以将嵌套包导入 matlab 函数

> ID：12028847
> 
> 赞同：4
> 
> 时间：2012-08-19T18:19:21.540
> 
> 标签：matlab, import, package

我的硬盘上有以下目录树：

> base_folder
> base_folder\+primary_package
> base_folder\+primary_package\+secondary_package

假设`primary_package`我有一个函数`foo`调用`goo`存储在`secondary_package`.

意思是我有以下文件：

> base_folder\+primary_package\foo.m
> base_folder\+primary_package\+secondary_package\goo.m

foo 的实现是：

```
 function [] = foo() 
       primary_package.secondary_package.goo();
 end 
```

它有效，但在实践中，我对许多函数进行了多次调用`secondary_package`，这使我的代码不可读。

我尝试了以下不起作用：

```
function [] = foo()    
      import primary_package.secondary_package.*;
      goo();
end 
```

有没有办法导入嵌套包以避免代码中出现很多很长的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:03:47.537

```
import primary_package.secondary_package.*;
goo(); 
```

应该可以正常工作。至少它对我有用。

**编辑：**确保它`base_folder`在你的`path`.

# canvas - Base64 Canvas 编码方法的大小有限

> ID：12028850
> 
> 赞同：1
> 
> 时间：2012-08-19T18:19:29.770
> 
> 标签：canvas, base64, limit, encode

我希望这里有人可以提供帮助。

下面的函数正确地从我网站上的图像创建 base64 字符串。

如果我手动添加更大的 b64 值（从 164k 图像生成），它可以正常工作。

```
 <img src="data:image/jpeg;base64,/9j/4AA..... etc 
```

但是，如果我在同一张 164k 图像上使用这个函数，我只会得到“data:”作为输出值。

画布是否仅限于它可以输出的 DataURL 大小？如果是这样，以编程方式编码图像的更好方法是什么？

谢谢你。

```
<script type="text/javascript">
function imageFetch(imgpath, imgname)               
{
    imageObj = new Image();
    imageObj.src = imgpath + imgname;                                       

    var canvas = document.createElement('canvas');                      
    canvas.width = imageObj.width;                                      
    canvas.height = imageObj.height;                                    

    var canvasContext = canvas.getContext('2d');                        
    canvasContext.drawImage(imageObj, 0, 0, canvas.width, canvas.height);   

    var lenImgName = imgname.length;                                    
    var imgType = imgname.substring(lenImgName-3,lenImgName);           

    if (imgType == "jpg")                                               
    {
        base64Data = canvas.toDataURL('image/jpeg');                        
    }
    if (imgType == "png")                                               
    {
        base64Data = canvas.toDataURL('image/png');                     
    }
    return base64Data;                                                  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:29:20.137

正如 brodney 所指出的，如果画布的宽度或高度为 0，您将得到此结果，这是因为您在将画布大小设置为图像的宽度和高度之前没有等待图像加载，并且这些属性返回如果图像未完全加载，则为 0。

# git - Git如何远程重命名文件夹/包？

> ID：12028851
> 
> 赞同：2
> 
> 时间：2012-08-19T18:19:35.100
> 
> 标签：git, github, package, rename

我不小心将我的包命名为错误的东西，并在我注意到之前将其推送到了 github。我在本地重命名它，但是当我再次推送它时，它没有跟踪所做的更改，因为它只是几个大写错误。如何修复远程大写错误？我的意思是这没什么大不了的，但我更愿意保持一致性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:32:05.310

根据您所使用的操作系统，路径大小写的更改可能不会在本地获取 - 在 Linux 中是这样。一种解决方法是

```
mv somepath/filename temp
git add -A
git commit -m "changing the case of a dir"

mv temp SomePath/FileName
git add -A
git commit --amend -m "changed somepath/filename to SomePath/FileName" 
```

你也可以试试

```
git mv -f somepath/filename SomePath/FileName
git commit -m "changed somepath/filename to SomePath/FileName" 
```

但是您不需要在该目录中才能工作，`git reset --hard`如果在 Windows 或 OSX 上强制更新工作目录，则可能需要从存储库的根目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:37:19.147

[git remote 的联机帮助页说](http://www.kernel.org/pub/software/scm/git/docs/git-remote.html)

```
git remote rename <old> <new> 
```

# c++ - C++/SFML2 Sprite 未显示

> ID：12028854
> 
> 赞同：1
> 
> 时间：2012-08-19T18:19:43.100
> 
> 标签：c++, sprite, sfml

基本上我正在尝试使用 C++ 和 SFML2 API 制作井字游戏。我在我的主要功能中加载了背景和精灵表，并让背景显示得很好。之后我继续创建一个看起来像这样的 Tile 类。

瓷砖.h

```
#ifndef TILE_H
#define TILE_H

#include <SFML\Graphics.hpp>

enum TileStatus
{
    FREE    = 0,
    CROSS   = 1,
    CIRCLE  = 2
};

class Tile
{

private:

    float   xPos,
            yPos;

    sf::Sprite tileSprite;

    int     height,
            width;

    TileStatus tileStatus;

public:

    //Constructors
    Tile();
    Tile( sf::Texture tileTexture , TileStatus tileStatus , float xPos , float yPos );

    //Methods
    sf::Sprite getTileSprite();
    void setTileStatus( TileStatus tileStatus );
    TileStatus getTileStatus();
};

#endif 
```

和 Tile.cpp

```
#include "tile.h"

Tile::Tile()
{
    xPos = 0;
    yPos = 0;

    height  = 0;
    width   = 0;

    tileStatus = FREE;

}

Tile::Tile( sf::Texture tileTexture , TileStatus tileStatus , float xPos , float yPos )
{
    this->tileStatus = tileStatus;

    height  = 126;
    width   = 126;

    this->xPos = xPos;
    this->yPos = yPos;

    this->tileSprite.setTexture( tileTexture );
    this->tileSprite.setTextureRect( sf::IntRect( 0,0,126,126 ) );
    this->tileSprite.setPosition( this->xPos , this->yPos );

    if( this->tileStatus == FREE)
    {
        tileSprite.setTextureRect( sf::IntRect( 0,0,126,126 ) );
    }
    else if( this->tileStatus == CROSS )
    {
        tileSprite.setTextureRect( sf::IntRect( 126,0,126,126 ) );
    }
    else if( this->tileStatus == CIRCLE )
    {
        tileSprite.setTextureRect( sf::IntRect( 252,0,126,126 ) );
    }
}

void Tile::setTileStatus( TileStatus tileStatus )
{
    this->tileStatus = tileStatus;

    if( this->tileStatus == FREE)
    {
        tileSprite.setTextureRect( sf::IntRect( 0,0,width,height ) );
    }
    else if( this->tileStatus == CROSS )
    {
        tileSprite.setTextureRect( sf::IntRect( 126,0,width,height ) );
    }
    else if( this->tileStatus == CIRCLE )
    {
        tileSprite.setTextureRect( sf::IntRect( 252,0,width,height ) );
    }
}

sf::Sprite Tile::getTileSprite()
{
    return tileSprite;
}

TileStatus Tile::getTileStatus()
{
    return this->tileStatus;
} 
```

基本上我将[这个](http://imgur.com/oirzQ)spritesheet 作为纹理加载到我的主函数中，然后我将它传递给 Tile 函数构造函数，然后我可以设置和更改它的子矩形并做其他事情。

现在这里的问题是，即使它编译没有任何错误，精灵也没有显示。但是，当我将代码（即 Tile 类中的代码）写入主类时，图像显示。谁能告诉我我做错了什么？

这是main.cpp

```
#include <SFML\System.hpp>
#include <SFML\Graphics.hpp>
#include <SFML\Window.hpp>

#include "tile.h"

int main()
{
    sf::RenderWindow window( sf::VideoMode( 800,600,32 ) , "Tic - Tac - Toe" );

    // Load background image and display it
    sf::Texture BackgroundTexture;
    if(!BackgroundTexture.loadFromFile( "background.jpeg" ))
    {
        return EXIT_FAILURE;
    }
    sf::Sprite Background(BackgroundTexture);
    Background.setTextureRect( sf::IntRect( 0,0,800,600 ) );
    Background.setPosition( 0,0 );

    // Load the spritesheet
    sf::Texture Spritesheet;
    if(!Spritesheet.loadFromFile( "sprites.png" ))
    {
        return EXIT_FAILURE;
    }

    // Load font and create graphical text
    sf::Font font;
    if (!font.loadFromFile( "arial.ttf" ))
    {
        return EXIT_FAILURE;
    }
    sf::Text TurnNotification;

    //limit the framerate to 30FPS
    window.setFramerateLimit(30);

    /*********************************************/
    //THIS WORKS BUT IT'S NOT WHAT I NEED
    //sf::Sprite tileSprite;
    //tileSprite.setTexture( Spritesheet );
    //tileSprite.setTextureRect( sf::IntRect(126,0,126,126) );
    //tileSprite.setPosition(126,126);

    //This doesn't work
    Tile cTile(Spritesheet, CROSS, 0 , 0 );

    while(window.isOpen())
    {

        window.draw(Background);
        window.draw(cTile.getTileSprite());
        //window.draw(tileSprite);

        sf::Event event;
        while(window.pollEvent(event))
        {
            if(event.type == sf::Event::Closed)
            {
                window.close();
            }
            if((event.type == sf::Event::KeyPressed) && (sf::Keyboard::Escape))
            {
                window.close();
            }
        }
        window.display();
    }

    return EXIT_SUCCESS;
} 
```

我希望我的代码不会太乱。我还是个新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:51:37.473

似乎如果您将 Tile 构造函数更改为采用 a`sf::Texture&`或 a`const sf::Texture&`它可以工作，也许 sf::Texture 具有特殊的复制语义。

# spring - Spring安全登录页面给出404

> ID：12028857
> 
> 赞同：0
> 
> 时间：2012-08-19T18:20:15.193
> 
> 标签：spring, security

我是 Spring Security 的新手，当我尝试访问作为 jsp 页面的登录页面时，我得到了一个 http 404。我在用

1.  雄猫 7
2.  Spring框架3.1.1

这是tomcat Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log4j.xml</param-value>
</context-param>
<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- Initializes log4j -->
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- Processes application requests -->
<servlet>
    <servlet-name>formVilleServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>formVilleServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

这是spring root-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<mvc:resources location="/resources/**" mapping="/resources/"/>

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->    
<beans:bean class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
   <beans:property name="basename" value="views"></beans:property>
</beans:bean>
<context:component-scan base-package="com.xtremesoftwaresolutions.formville" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:38:27.520

当您执行以下操作时，您映射 Spring MVC Servlet 以处理所有请求：

```
<url-pattern>/</url-pattern> 
```

因此，当您尝试访问您的 JSP 页面时，例如`/login.jsp`Spring MVC 捕获它并尝试找到合适的控制器和操作来管理它。因此，可能最简单的方法是创建只返回 JSP 页面的控制器。我建议尝试这样的事情：

```
<mvc:view-controller path="/login.jsp" view-name="/login.jsp" /> 
```

# sql-server-2008 - SSRS 多值单选给出“索引超出范围”错误，但多选没有

> ID：12028861
> 
> 赞同：0
> 
> 时间：2012-08-19T18:20:41.717
> 
> 标签：sql-server-2008, reporting-services

有一个我正在尝试解决的问题，非常感谢您的帮助。我创建的 SSRS 2008 报告中有一个多值报告参数。当我从下拉列表中选择多个值时，报告运行良好。但是，当我只在下拉列表中选择一个值时，我得到一个“查询参数@XXXXXX 的值表达式包含和错误：索引超出了数组的范围。

我知道这一定是我忽略的东西，对 SSRS 报告和多值参数不熟悉，否则其他人会看到同样的事情。我浏览了这里的其他帖子，但找不到相同的问题。

这是我正在定义的 ReportParameter：

```
 <ReportParameter Name="reader">
  <DataType>String</DataType>
  <DefaultValue>
    <DataSetReference>
      <DataSetName>dsReaders</DataSetName>
      <ValueField>ReaderName</ValueField>
    </DataSetReference>
  </DefaultValue>
  <Prompt>Readers</Prompt>
  <ValidValues>
    <DataSetReference>
      <DataSetName>dsReaders</DataSetName>
      <ValueField>ReaderName</ValueField>
      <LabelField>ReaderName</LabelField>
    </DataSetReference>
  </ValidValues>
  <MultiValue>true</MultiValue>
</ReportParameter> 
```

这是使用它的 QueryParameter：

```
 <QueryParameter Name="@ReaderName">
                <Value>
                  =IIF(Parameters!reader.Count = 1, Parameters!reader.Value, ("'" + Replace(Replace(Join(Parameters!reader.Value, "~"), "'", "'''"), "~" ,"','") + "'"))
</Value>
                <rd:UserDefined>true</rd:UserDefined>
              </QueryParameter> 
```

我可以提到的另一件事是，我使用的是 SSRS 2008 RTM，它总是给我这个查询参数中的 value 参数错误。升级到 SQL 2008 SP3 后，现在它在我定义的其他查询参数的 value 参数上有所不同。看起来很奇怪，但我知道它在告诉我一些事情。

这是 SSRS 2008 和/或 SQL 2008（非 R2）中的已知错误吗？或者我的报告定义中可能缺少的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:44:36.663

在 IIF() 的真部分尝试 Value(0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T09:24:36.020

我有完全相同的问题。我通过将所有参数值加入一个字符串来解决问题，然后检查该值是否存在，如下所示：

```
=iif(Array.IndexOf(Split(Join(Parameters!Detail.Value, ",").ToString(), ","), "0")>=0, "paramater with 0 value is checked", "parameter with 0 value is not checked") 
```

如果`array.indexof`返回`-1`，则您的值不在列表中，否则返回所需值的位置。

# php - PHP 的日期和时间在 MySQL 中写入 0000-00-00 00:00:00

> ID：12028862
> 
> 赞同：0
> 
> 时间：2012-08-19T18:20:46.180
> 
> 标签：php, mysqli

我有一个带有 JS datepicker 的 PHP 日期和时间，它将所有字符串以这种格式“19.08.2012 @ 20:18”保存在一个名为 $date 的变量中。

如果我将此变量直接放在查询中，它会在数据库中写入“0000-00-00 00:00:00”。目前我脑子里有个大黑洞，所以需要帮助。

如何在数据库中写入正确的选定日期和时间？

* * *

对不起，我认为不是那么重要，这是代码。

索引.php

```
<script type="text/javascript">
$(function() {
    $("#date").datetimepicker({
        dateFormat:'dd.mm.yy',
        separator: ' @ '
    });
});
</script>

<form action="setting.php" method="post">
 <table>
 <tr>
  <td><label for="date">Date:</label></td>
  <td><input type="text" id="date" name="date"/></td>
 </tr>
</table>
<input type="submit" name="submit" /> 
```

设置.php

```
if(isset($_POST['save_autoresp'])) {
    create($_POST['date']);
    header("Location: admin.php");
    exit();
} else {
    header("Location: index.php");
    exit();
} 
```

函数.php

```
.......
.......
// Write the fields to the table
$query_create = mysqli_query($link, "INSERT INTO table VALUES (null, '$id', '$date')") or die ('Could not connect: ' . mysqli_error($link));
.......
....... 
```

MySQL 数据库中的日期字段是“日期时间”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T18:24:50.923

您收到的日期是 MySQL 无法识别的格式。您必须首先将其转换为[可接受的日期和时间文字](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-literals.html)，然后才能将其传递给 INSERT。

这种转换可以通过两种方式完成：

*   您可以配置您的 JS 日期时间选择器，使其返回日期为“YYYY-MM-DD HH:MM:SS”。
*   您可以在 PHP 中进行上述转换。

无论您选择哪个，在保存到数据库时，请坚持日期的年-月-日格式，这样您就不会疯狂地找出为什么“08/02”被认为是 8 月 2 日而不是2 月 8 日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:25:02.197

您需要转换变量以指定 MySQL 的正确格式，即 YYYY-MM-DD HH:NN:SS。就这样。通过向它抛出一些子字符串函数来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T18:29:15.467

如果直接在查询中写入字符串“19.08.2012 @ 20:18”，MySQL 根本无法解析它。您必须先转换它，具体取决于字段（列）是 INT、TIMESTAMP 还是 DATETIME。

MySQL自带一些方便的[日期计算功能](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，所以你应该坚持DATETIME。

在 PHP 中，您可以使用`gmmktime()`和转换它`gmdate()`。为了让您自己的生活更轻松，请确保 MySQL 服务器以 UTC 运行，并且您的应用程序在将日期插入 MySQL 之前将其转换为 UTC。

获取输出日期时，只需使用正确的`date_default_timezone_set()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T06:55:23.990

您需要将日期转换为 mysql 日期格式，您可以使用 explode() 函数删除“。” 首先从您的日期签名，然后使用 mktime() 函数制作 mysql 日期格式

```
$date = exolode('.', $_POST['date']);
$unixtime= mktime(0, 0, 0, $date[1], $date[0], $date[2]);
$date1 = date("H-m-d H:i:s", $unixtime);
$final_Date = strtotime($date1); 
```

# jquery - pjax_rails 具有创建、更新和销毁操作

> ID：12028868
> 
> 赞同：0
> 
> 时间：2012-08-19T18:21:22.267
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2, pjax

**背景：**构建一个小型应用程序，其目的是在最初到达应用程序后不会发生整页加载。实现了 pjax_rails 插件。但是，创建、更新和销毁操作（以及执行 redirect_to 的任何操作）会导致整个页面加载。

**问题：**如何在仍然使用 pjax（最好仍然使用 pjax_rails gem）的同时解决这个问题？我知道如何用 ajax 解决这个问题，但是如果整个事情都可以用这个 pjax 实现来解决，那就更好了；历史、可降解性等

为了节省澄清时间，已经做了这些事情：

宝石文件

```
gem 'pjax_rails' 
```

application.js （包括其他要求，以防有一些我不知道的冲突）

```
//= require jquery
//= require jquery_ujs
//= require jquery.pjax
//= require twitter/bootstrap
//= require_tree .

// Explicitly specify which links have PJAX enabled.
$(function() {
  $('a:not([data-remote]):not([data-behavior]):not([data-skip-pjax])').pjax('[data-pjax-container]');
}); 
```

还尝试了 application.js 中的以下内容，以防我忽略了某些内容

```
$('a').pjax('[data-pjax-container]'); 
```

并尝试过

```
$('a').pjax('[data-pjax-container]', { timeout: 200000 }); 
```

应用程序.html.erb

```
<div data-pjax-container>
  <%= yield %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:07:06.080

虽然这不是对我的问题的直接回答，但这是我在我的应用程序中采用的解决方案。

对于任何[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)，甚至是具有大量异步更新的应用程序，使用 JavaScript 框架似乎确实是要走的路。对我来说，我选择了 Backbone.js；虽然还有很多其他选项 - Knockout、Angular、Cappuccino、SproutCore、Ember、Spine。

请参阅[为什么使用 Backbone.js？](https://stackoverflow.com/questions/12082905/why-use-backbone-js)

# grails - 如何为 grails spring security ACL 插件指定我自己的 LookupStrategy 实现？

> ID：12028872
> 
> 赞同：1
> 
> 时间：2012-08-19T18:22:03.553
> 
> 标签：grails, spring-security, nosql, acl, grails-plugin

我想在我的 Grails 2.0.4 应用程序中使用 Spring Security ACL 插件。但是，我的应用程序不使用 JDBC 或 SQL 数据库。（我们使用的是 MongoDB）。

该插件中的 GormAclLookupStrategy 实现使用 HQL，MongoDB-Gorm 不支持它，所以我想我需要创建该类的替代实现。

我的问题是，一旦我有了替代实现，如何配置 bean 以使用它？从我对插件代码的检查来看，在我看来，插件将覆盖我配置它的尝试，查看通常的 conf 机制。还是我读错了？

有人可以给我一个线索吗？，@BurtBeckwith 你在外面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T01:57:51.343

如果您注册一个`grails-app/conf/spring/resources.groovy`与 Grails 或插件注册的 bean 同名的 bean，则您的优先。对于任何 bean 都是如此，而不仅仅是这个。所以你会做这样的事情：

```
import com.mycompany.myapp.MyAclLookupStrategy

beans = {
   aclLookupStrategy(MyAclLookupStrategy) {
      // properties, bean refs, etc.
   }
} 
```

# jquery - 在这个例子中可以使用 $.getScript() jq 函数吗？

> ID：12028873
> 
> 赞同：0
> 
> 时间：2012-08-19T18:22:07.663
> 
> 标签：jquery, mootools

我资助了这篇关于在彼此中包含 js 文件的优秀帖子 [如何在另一个 JavaScript 文件中包含 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

并想使用 jq 建议

客户端正在使用 mootools 和 jquery 库，并且由于所有插件和库（10 个文件），当前在头部加载了多个 JS 文件。我能够在 2 个文件中压缩所有这些我有 1 个正在加载 mootools 、 jquery 和 Mootools 插件的文件，另一个正在运行 mootools 函数的文件。

所以顺序是这样的

```
compressed.js
moofunctions.js 
```

现在取决于您所在的页面，我们正在加载其他 jq 插件，因此顺序更改为

```
compressed.js
moofunctions.js
requested_jquery_plugin.js 
```

所以我的问题是：

1.  你看到 $.getScript() jq 函数的含义了吗？

2.  由于 $.getScript() 实际上是通过 ajax 加载附加脚本，这个脚本是被视为 http 请求还是我的请求会归结为 1 个 js 文件？**（用 FB 回答，只看到 1 个 js 请求）**

3.  压缩库和插件的顺序在文件 1 (compressed.js) 中

    mootools 库，jquery 库，mootools 插件，

在这个文件的末尾我包括

```
(function($){
        $.getScript("moofunctions.js", function(){

           console.log("Script loaded and executed.");

        });
})(jQuery); 
```

你觉得这有什么含义吗？

任何帮助表示赞赏。请不要建议/要求仅使用 1 个库。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:59:12.283

如何解决这个问题并使用以正确顺序连接文件的构建脚本？我建议使用[Grunt](https://github.com/cowboy/grunt)、[Browserify](https://github.com/substack/node-browserify)或[Clientside](http://projects.jga.me/clientside/)使用 watch 重建文件（保存文件时重建）并在文件中使用该构建（和可选缩小）`<script src="...">`文件。

在我们公司，我们使用这个过程来编译和缩小我们所有的 CoffeeScript 代码，使用 CommonJS，到目前为止，它比任何客户端按需加载脚本都要好得多。

**编辑：**要回答您动态加载脚本的问题，请使用[RequireJS](http://requirejs.org/)，它使用 AMD 模块来定义依赖项并以正确的顺序加载它们。

# ruby-on-rails - 使用 postgresql 以“信任”模式将 Rails 应用程序部署到 github 和 heroku 的安全隐患

> ID：12028879
> 
> 赞同：5
> 
> 时间：2012-08-19T18:23:12.873
> 
> 标签：ruby-on-rails, postgresql, heroku, github, ruby-on-rails-3.2

Heroku [“强烈建议在开发过程中使用 PostgreSQL”](https://devcenter.heroku.com/articles/rails3)，这就是我过去几个月一直在做的事情。我正在使用 rails 3.2.8，在 Daniel Kehoe 的优秀[Rails Heroku 教程和 Ryan Bates 关于](http://railsapps.github.com/rails-heroku-tutorial.html)[迁移到 PostgreSQL](http://railscasts.com/episodes/342-migrating-to-postgresql)的 railscast 之间，我已经能够让应用程序运行和部署。我的问题是 postgreSQL 在幕后做了很多我不了解的事情（包括角色、用户、超级用户等）。我特别担心我一直在本地和部署中使用“信任”身份验证这一事实。这是否意味着随机的人可以以某种方式访问​​我的应用程序的数据库？

时不时地在 rails/github 互联网上，我会遇到将应用程序的 config/database.yml 文件保留在 github（可能只有公共或共享存储库）之外的引用，因为该文件包含密码信息。我总是看着那个文件并挠头。我没有把密码信息放在那里。这是该文件在开发、测试和生产中的样子（注意，为了简洁起见，我只展示了三个中的一个，因为它们都是相同的代码。）：

```
[development, test or production]:
  adapter: postgresql
  encoding: unicode
  database: [myapp]_[development, test or production]
  pool: 5
  username: [myapp]
  password: 
```

我害怕知道我应该怎么做才能正确设置 postgreSQL 并将其安全地部署在我的 rails 应用程序中。提前感谢您的任何想法。你会让世界变得更安全！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T20:40:25.540

当您将 rails 应用程序部署到 heroku 时，您根本不必担心 postgres 配置：我们为每个应用程序提供一组新的凭据，这些凭据仅有权访问您自己的数据，并且我们通过覆盖数据库使您的应用程序使用这些凭据。 yml 每次部署。

您可以通过以下方式验证这一点：

```
heroku run bash --app your-app
$ less app/config/database.yml 
```

的确，没有人应该将生产凭证放在源代码控制中（但您没有这样做）。

# php - curl脚本只是填写表单而不提交

> ID：12028881
> 
> 赞同：1
> 
> 时间：2012-08-19T18:23:15.803
> 
> 标签：php, curl

我用 PHP cURL 编写了一个脚本来填写表格。但奇怪的是，表格只是被填满了，没有提交表格

这是代码请帮忙

```
$cookies = 'C:\wamp\www\costie\cookies.txt';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url1); // set url to post to 
curl_setopt($ch, CURLOPT_FAILONERROR, 1); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // allow redirects 
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable 
curl_setopt($ch, CURLOPT_TIMEOUT, 0); // times out after Ns 
curl_setopt($ch, CURLOPT_POST, 1); // set POST method 
curl_setopt($ch, CURLOPT_MAXREDIRS, 5);

curl_setopt($ch, CURLOPT_POSTFIELDS, "__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=$value1&__PREVIOUSPAGE=$value2&__EVENTVALIDATION=$value3&$name1=2008&$name2=02-33-255-009&$name3=&$name4=&$name5=");//ADD post fields

curl_setopt($ch, CURLOPT_FAILONERROR, 1); 
curl_setopt($ch, CURLOPT_VERBOSE, 1); 
curl_setopt($ch, CURLOPT_HEADER, 1); 
curl_setopt($ch, CURLOPT_COOKIEFILE, 1);  
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies);
$result = curl_exec($ch); // run the whole process 
curl_close($ch); 
echo $result; 
```

# jquery - 按类匹配除未定义的所有元素

> ID：12028887
> 
> 赞同：0
> 
> 时间：2012-08-19T18:23:58.820
> 
> 标签：jquery

有表

```
 <table>
  <tr><td></td><td class="foo"></td></tr>
  <tr><td></td><td class="bar"></td></tr>
 </table> 
```

**如何获取`td`具有任何类集的所有元素？**

在尝试的同时

```
$.each($("td:not(undefined)"),function(i,v){ ... 
```

我仍然`undefined`在结果中上课

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:25:58.173

尝试

```
$("td[class]").each(function(i,v){ ... 
```

属性选择器选择具有给定属性的元素，请参阅[文档](http://api.jquery.com/has-attribute-selector/)。

正如 pimvdb 指出的那样，`[class!='']`将过滤掉没有类但具有`class`属性（即空`class`属性）的元素。此外，您可以`.each`直接在 jQuery 集上使用。

另请参阅[选择器规范](http://www.w3.org/TR/css3-selectors/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:31:10.540

试试这个：

```
var $td = $('td').filter(function(){
              return this.className != ""
          }) 
```

# git - 如何在gitflow中完成分支后检索分支

> ID：12028893
> 
> 赞同：3
> 
> 时间：2012-08-19T18:24:46.047
> 
> 标签：git, git-flow

我知道，例如，当您启动一个功能分支时，您输入 git flow feature start [] 并且如果您想完成一个分支，您输入 git flow feature finish 。

但是当你完成一个分支时，它会将它与开发合并并自动删除该分支。我如何检索该分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:42:06.077

如果您只是这样做，该功能将是当前提交（合并提交）的第二个父级。您可以使用重新创建分支

```
 git branch my-feature HEAD^2 
```

一次性创建并检查

```
 git checkout -b my-feature HEAD^2 
```

如果已经有一段时间了，它可能不是当前提交的第二个父级。利用

```
 gitk 
```

或者

```
git log --graph --oneline 
```

找到该分支完成的位置并使用 HASH 或 tree-ish 重新创建它。如果您保证合并消息是默认消息，则可以

```
git branch my-feature $(git log -1 --format=%H --grep="merge branch 'my-feature'")^2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:39:08.650

在 git 中，分支实际上只是指向提交的指针。尽管您不能在删除后“检索”一个分支，但您可以创建一个指向与已删除分支相同的提交的新分支。

一种方法是使用`gitk --all`. 然后你只需执行

```
 git checkout -b [branch name] [sha1 of your commit] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:44:53.513

唯一的方法是撤消分支合并。

在这里看看接受的anwser => [CLICK ME!!!](https://stackoverflow.com/questions/13450039/how-to-undo-git-flow-feature-finish/13505455#13505455)

这些步骤应该可以解决问题：

获取所需的 sha：

```
git log 
```

`<sha1>`是在合并之前的
`<sha2>`提交是在您开始开发该功能之前的最后一次提交

```
git checkout develop
git checkout -b feature/<feature-name>
git reset <sha1> --hard
git checkout develop
git reset <sha2> --hard 
```

推送您的功能分支。

# osx-lion - 无法在终端上运行 Haml 或 Sass。使用 OSX 狮子。安装了 RVM、GCC、Ruby、Rails、Haml、Sass

> ID：12028899
> 
> 赞同：0
> 
> 时间：2012-08-19T18:25:20.777
> 
> 标签：osx-lion, haml, sass

我对此很陌生，所以我会提供尽可能多的细节：

使用 Mac OSX 10.7.4

今天安装：TextMate 1.5.11 RVM 1.15.5 by Wayne Seguin GCC 10.7 Ruby 1.9.3 Rails 3.2.8 Haml 3.1.7 Sass 3.2.1

哈姆指令：

要从命令行运行 Haml，只需使用

```
haml input.haml output.html 
```

当我输入上述命令时，我的终端响应：

```
Errno::ENOENT: No such file or directory - input.haml

Use --trace for backtrace. 
```

当我输入：

```
--trace 
```

它返回：

```
-bash: --trace: command not found 
```

与 Sass 有类似问题：

```
$ sass --watch style.scss:style.css
>>> Sass is watching for changes. Press Ctrl-C to stop.
Errno::ENOENT: No such file or directory - style.scss
Use --trace for backtrace. 
```

我是否需要先创建 input.haml 和 output.haml 文件并将它们放在某个目录中？如果是这样，有人可以给我一个文件夹需要去的非常具体的路径吗？

Sass 文件的类似问题——它们是否需要位于特定文件夹中才能让终端找到它们？

而且..不确定为什么 --trace 不起作用...

有人可以建议我如何解决这个问题吗？我只熟悉 HTML/CSS，并被我的团队要求学习 Haml/Sass。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:56:44.390

`input.haml`应该存在并且应该是一个haml文件。`output.html`是存储输出的位置（如果存在，将被覆盖）

这些文件可以在您想要的任何位置，但如果它们不在当前目录中，您需要相应地调整路径。

同样对于 sass`style.scss`必须存在并且生成的 CSS 将输出到 style.css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:34:58.820

您没有`--trace`正确使用命令。*在 UNIX 命令行中，在命令行中运行的程序（在命令行界面*中也称为 cli ）使用以or开头的称为*标志*的选项。因此，在没有使用过 HAML 代码的情况下，我看到这是一个这样使用的标志：`-``--`

```
➜  ~  uname -a
Darwin Angel.local 12.0.0 Darwin Kernel Version 12.0.0: Sun Jun 24 23:00:16 PDT 2012; root:xnu-2050.7.9~1/RELEASE_X86_64 x86_64
➜  ~  cat > test.haml
#content
  .left.column
    %h2 Welcome to our site!
    %p= print_information
  .right.column
    = render :partial => "sidebar"
^C
➜  ~  haml test.haml 
Exception on line 4: undefined local variable or method `print_information' for #<Object:0x007f9844896cd0>
  Use --trace for backtrace.
  Use --trace for backtrace.
➜  ~  haml test.haml --trace
test.haml:4:in `block in render': undefined local variable or method `print_information' for #<Object:0x007fd83b9f8650> (NameError)
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/lib/haml/engine.rb:191:in `eval'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/lib/haml/engine.rb:191:in `render'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/lib/haml/exec.rb:281:in `process_result'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/lib/haml/exec.rb:41:in `parse'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/lib/haml/exec.rb:21:in `parse!'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/gems/haml-3.1.7/bin/haml:9:in `<top (required)>'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/bin/haml:19:in `load'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/bin/haml:19:in `<main>'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/atma/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
➜  ~ 
```

除此之外，我刚刚通过 RVM 在 MacOSX 10.8 上安装了 haml gem，并且工作正常。跑步`ruby filename.haml`也可能带来有用的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:34:55.803

使用 Google Chat 屏幕共享，我的在线同事查看了我的终端活动，然后给了我一些使用命令，以便可以找到文件。接下来，他们让我在 input.haml 文档中放入一行简单的“Hello World”用于测试。

今天haml现在可以找到文件，当我给它关于input.haml和output.html文件的命令时，它成功地将数据从输入传输到输出。

所以问题是我缺乏关于如何在终端中访问正确目录的知识。

```
Doras-MacBook-Pro:~ whisperland$ cd/Users/whisperland/documents/ haml input.haml
-bash: cd/Users/whisperland/documents/: No such file or directory

Doras-MacBook-Pro:~ whisperland$ cd documents

Doras-MacBook-Pro:documents whisperland$ ls

document.haml                      output.html
input.haml                         typography.rtf

Doras-MacBook-Pro:documents whisperland$ haml input.haml
hello world

Doras-MacBook-Pro:documents whisperland$ haml input.haml output.html 
```

# c - 如何使用 C 从 www 获取页面的 HTML 代码？

> ID：12028903
> 
> 赞同：2
> 
> 时间：2012-08-19T18:25:43.693
> 
> 标签：c, http, url, web

我只想使用 C 将网页（它的 HTML 代码，如果它像 www.example.com/example.html）提取到文本文件中。是否可以使用任何库研究或任何东西？我真的迷失在“也许我应该学习”PHP 或 python 或其他东西，然后使用 system() 或 exec() 使用这些脚本的命令行调用。最好的方法是什么？

我目前的确切需求是 fetch `http://livechat.rediff.com/sports/score/score.txt`，碰巧它是一个 .txt 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:31:31.083

使用[curl 或 libcurl](http://curl.haxx.se/)。它会为你获取一个网页，你可以用它做任何你喜欢的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T23:14:40.030

正如 Toby 已经提到的，libcurl 可能是您最好的选择。这是一个演示如何使用[libcurl-easy](http://curl.haxx.se/libcurl/c/libcurl-easy.html)接口检索网页的实际程序：

```
#include <stdio.h>
#include <curl/curl.h>

int main(int argc, char *argv[]) {
    CURL *curl;
    CURLcode curl_result;
    const char *site;

    if (argc != 2) {
        fprintf(stderr, "Usage: %s site\n", argv[0]);
        return 1;
    }   

    site = argv[1];

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, site);
        curl_result = curl_easy_perform(curl);

        if(curl_result != CURLE_OK) {
            fprintf(stderr, "curl_easy_perform() failed: %s\n",
                curl_easy_strerror(curl_result));
        }   

        curl_easy_cleanup(curl);
    }   
    else {
        fprintf(stderr, "Failed to initialize curl\n");
        return 1;
    }   

    return 0;
} 
```

该程序采用一个参数，即要检索的站点的名称。当使用 编译`gcc curltest.c -lcurl -o curltest`并运行时`curltest http://livechat.rediff.com/sports/score/score.txt`，输出以下内容：

```
l1=England vs South Africa
l2=England
interval=1
message=England 16-2 (13)
tagline=J Trott(6) I Bell(4)* 
date=19 August, 2012
ver=19 
```

# java - 在 Java/PHP/Python 框架内的编译 C/C++ 代码中运行算法？

> ID：12028908
> 
> 赞同：2
> 
> 时间：2012-08-19T18:27:10.393
> 
> 标签：java, php, c++, python, c

偶尔，我会遇到涉及使用 Java、PHP 或 Python 创建应用程序框架或网站的编程技术，但当需要复杂算法时，可以用 C 或 C++ 编写这些算法，并在 Java/PHP 中将它们作为类似 API 的函数调用运行/Python 代码。

我一直在网上搜索和搜索这个，除非我不知道这种做法的名称，否则我似乎找不到任何东西。

简而言之，我该如何：

1.  在 C 或 C++ 中创建函数或类
2.  将它们编译成 DLL/二进制/某种形式
3.  从 - 运行函数
    *   爪哇
    *   PHP
    *   Python
4.  我怀疑必须在 Java/PHP/Python 和 C/C++ 函数之间创建类似 JSON/XML 的输出和输入，以便可以轻松地桥接数据，但这没关系。

我只是不确定如何使用这种技术，但它似乎是一种非常聪明的方法，可以利用 Java、PHP 和 Python 的强大功能，同时利用非常快速的编程语言来完成大型、复杂的任务.

我脑海中闪过的另一个想法是，如果我只使用 Java/PHP/Python 中的文字创建函数，它会不会和 C 一样快？

我希望使用 C/C++ 处理的具体任务是大规模循环、ping 数据库和分析地图。还没有开始工作，现在都是理论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:39:19.247

您可以使用 Boost.Python 轻松地使用自定义 C++ 代码扩展 python 脚本，有关更多详细信息，请参阅此网站：http: [//www.boost.org/doc/libs/1_50_0/libs/python/doc/](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/)

这是您可以使用它的方式：

```
char const* greet()
{
   return "hello, world";
}

#include <boost/python.hpp>

BOOST_PYTHON_MODULE(hello_ext)
{
    using namespace boost::python;
    def("greet", greet);
} 
```

您需要将其编译为共享库。您将在 Windows 上获得一个 .dll，在 Linux 上获得一个 .so。该库将包含必要的代码以使其可用于 python。使用它的示例：

```
>>> import hello_ext
>>> print hello_ext.greet()
hello, world 
```

以下是更多示例： http: [//www.boost.org/doc/libs/1_50_0/libs/python/doc/tutorial/doc/html/index.html](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/tutorial/doc/html/index.html)

使用 Boost.Python 时，如果您不使用弱动态链接，请记住将您的共享对象链接到 python。PHP 和 Java 也有类似的情况。

至于其他语言，我从来没有在 Java 中使用过自定义共享库，但在 PHP 中使用过，而且使用原生 Api 很痛苦。我发现使用[swig](http://www.swig.org/ "痛饮")方式更令人愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:47:23.163

尽管我同意这些评论（你可能会这样做是为了好玩，但对于商业来说这是个坏主意）你可能对这个[类似的问题](https://stackoverflow.com/questions/3720563/access-c-shared-library-from-java-jni-jna-cni-or-swig)感兴趣。提到的[SWIG 框架](http://www.swig.org/compat.html)支持你提到的所有语言。我在一个包含大量遗留 C 代码的项目中使用它。不是很简单，但非常强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:25:45.077

对于 Java，你可以搜索 JNI（Java Native Interface），有很多指南告诉如何使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:02:19.610

与其他提议的解决方案略有不同，您可以查看[Gearman](http://gearman.org)

基本上，它是一个经纪人系统。您有工作人员，在您的情况下可以用 C 编写，您可以从您的 python / php / java / w/e 代码委派任务。

优点是您将两个应用程序解耦（如果您用另一种语言重写您的应用程序，您可能会做更少的工作，因为您只需要让应用程序与 Gearman 对话）。

坏事是我认为你会增加开销，这可能会使性能提升无关紧要。

# ruby - Ruby BCrypt 哈希比较

> ID：12028910
> 
> 赞同：12
> 
> 时间：2012-08-19T18:27:52.923
> 
> 标签：ruby, bcrypt

我正在尝试使用 Sinatra 和 BCrypt 实现看似非常简单的身份验证方法，但显然我遗漏了一些东西......

用户被预先分配了一个临时密码，该密码以明文形式存储在数据库中。

我对临时密码进行身份验证，然后创建一个 salt 和 password_hash 并将它们作为字符串写入数据库（在本例中为 mongo）。

为了进行身份验证，我从数据库中获取盐和用户密码进行比较。

```
post "/password_reset" do
  user = User.first(:email => params[:email], :temp_password => params[:temp_password])
  if dealer != nil then
  password_salt = BCrypt::Engine.generate_salt
  password_hash = BCrypt::Engine.hash_secret(params[:password], password_salt)
  user.set(:password_hash => password_hash)
  user.set(:password_salt => password_salt)
  end
end

post "/auth" do
  @user = User.first(:email => params[:email])
  @user_hash = BCrypt::Password.new(@user.password_hash) #because the password_hash is  stored in the db as a string, I cast it as a BCrypt::Password for comparison
  if @user_hash == BCrypt::Engine.hash_secret(params[:password], @user.password_salt.to_s)   then
    auth = true
  else
    auth = false
  end
end 
```

BCrypt::Engine.hash_secret(params[:password], password_salt) 返回的值与存储在数据库中的值不同（两者都属于 BCrypt::Password 类，但它们不匹配）。

我在这里想念什么？非常感谢您的任何见解！

马克

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-19T19:29:28.283

`BCrypt::Password`是 的子类`String`，它[重写了该`==`方法](https://github.com/codahale/bcrypt-ruby/blob/v3.0.1/lib/bcrypt.rb#L175-178)以使检查密码更容易。当你这样做

```
if @user_hash == BCrypt::Engine.hash_secret(params[:password], @user.password_salt.to_s) 
```

您最终执行了*两次*哈希，因此它们不匹配。如果您直接`@user.password_hash`比较而不是使用`BCrypt::Password.new`，您应该会看到它们匹配。

使用 bcrypt-ruby 作为密码更“正确”的方法是根本不使用`Engine`类，只使用`Password`类。您不需要自己管理盐，bcrypt 会处理它并将其包含在密码哈希字符串中：

```
password_salt = BCrypt::Engine.generate_salt
password_hash = BCrypt::Engine.hash_secret("s3kr1t!", password_salt)

puts password_salt
puts password_hash 
```

产生这样的东西：

```
$2a$10$4H0VpZjyQO9SoAGdfEB5j.
$2a$10$4H0VpZjyQO9SoAGdfEB5j.oanIOc4zp3jsdTra02SkdmhAVpGK8Z6 
```

如果你运行它，你会得到一些稍微不同的东西，因为会生成不同的盐，但你可以看到密码散列包括盐。

在你的情况下，你想要这样的东西：

```
post "/password_reset" do
  user = User.first(:email => params[:email], :temp_password => params[:temp_password])
  if dealer != nil then
    password_hash = BCrypt::Password.create(params[:password])
    user.set(:password_hash => password_hash) # no need to store the salt separately in the database
  end
end

post "/auth" do
  @user = User.first(:email => params[:email])
  @user_hash = BCrypt::Password.new(@user.password_hash)
  if @user_hash == params[:password]  then # overridden == method performs hashing for us
    auth = true
  else
    auth = false
  end
end 
```

# asp.net - 缓存动态/以编程方式添加的用户控件

> ID：12028912
> 
> 赞同：1
> 
> 时间：2012-08-19T18:28:25.803
> 
> 标签：asp.net, caching, outputcache, cache-control

我正在尝试学习缓存，特别是使用控件的部分缓存。

我的网站在某些页面上运行缓慢，因此尽可能多地缓存会有所帮助。

从我在 SO 和其他各种 Google 结果中找到的代码中运行了许多实验后，我遇到了动态添加控件的问题。

我设置了一个简单的页面，其中包含以下代码：

```
<%@ Page Language="VB" Debug="true" %>
<%@ Register TagPrefix="controls" TagName="control" Src="~/test/control.ascx" %> 

<script runat="server">          
   Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

       Label2.Text = "Present Time: "
       Label2.Text += DateTime.Now.ToString()

   End Sub    
</script>
<html>
<body>
   <form id="form1" runat="server">
    <div>
        <h2 style="color:Red">Output Caching</h2>
        <asp:Label ID="Label2" runat="server"></asp:Label>        
        <controls:control ID='control1' runat='server' /> 
        '------------------------------------------
        <hr />
        <div id='dyn2' runat='server' />   
    </div>
    </form>
</body>
</html> 
```

控件`control.ascx`如下所示：

```
<%@ Control Language="VB" ClassName="control" %>
<%@ OutputCache Duration="60" VaryByParam="r" %>
<script runat="server">
    Sub Page_Load() Handles Me.Load
        controlContent.InnerHtml = "Control time: " & DateTime.Now.ToString()
    End Sub
</script>
<div id="controlContent" runat="server"></div> 
```

这很好用，并在页面中为我提供了一个“实时”时间，而缓存控件向我显示了一个仅在 60 秒后更新的时间，根据`OutputCache`声明。

`<controls>`当我需要缓存页面的一部分并且该部分使用标签显式输入到页面中时，我可以看到如何将其用于任何应用程序。该`varyByParam`选项对我也很有用。（我还没有调查`varyByCustom`！）

但是，在某些情况下，我会根据特定需求以编程方式将控件加载到页面中。

在这种情况下，我使用这样的代码：

```
Dim theResult As test_control2 = CType(LoadControl("~\test\control2.ascx"), test_control2)
dyn2.Controls.Add(theResult) 
```

这是以编程方式添加我的第二个测试控件，富有想象力地使用“dyn2”将其命名`control2.ascx`为 div 。`id`

控件中没有缓存指令标头，或者它是代码隐藏，l 一切正常，但我无法缓存它（除非我缓存整个页面）。

但是，如果我按照上面的控制代码添加缓存标头，我会收到此错误：

```
Unable to cast object of type 'System.Web.UI.PartialCachingControl' to type 'test_control2'. 
```

谷歌搜索似乎对我没有多大帮助，调查这些`PartialCachingControl`类型让我陷入了进一步的问题！

有人能告诉我应该怎么做才能让我缓存这些控件吗？

如果重要的话，我正在使用 VB.net 进行编码，并且还使用 .NET 2.0，因此如果适用，也将不胜感激有关此平台限制的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:29:20.900

啊哈！终于在 SO 上找到了另一个有帮助的问题

[如何加载控制使用 VaryByControl OutputCache 的控件，指定属性值](https://stackoverflow.com/questions/6574528/how-to-loadcontrol-a-control-that-uses-varybycontrol-outputcache-specifying-val)

基本上，我在加载控件更改时使用了错误的类型：

```
Dim theResult As test_control2 = CType(LoadControl("~\test\control2.ascx"), test_control2)
dyn2.Controls.Add(theResult) 
```

至

```
Dim theResult As PartialCachingControl = DirectCast(LoadControl("~\test\control2.ascx"), PartialCachingControl)
dyn2.Controls.Add(theResult) 
```

整理好了！

# qt - 使用 pyqt 在 QDateEdit 中自定义日期列表

> ID：12028914
> 
> 赞同：1
> 
> 时间：2012-08-19T18:28:44.950
> 
> 标签：qt, pyqt

我正在使用 QDateEdit 小部件从日历（弹出窗口）中获取用户选择的日期。但是，我希望允许用户从特定日期列表（在日历上突出显示）中选择日期，而不仅仅是任何日期。我看到使用 setMinimumDate 和 setMaximumDate 指定范围之外的日期变灰，因此无法选择——这正是我想要的，但不是针对范围，而是针对特定日期的列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:06:54.277

子类[QCalendarWidget](http://qt-project.org/doc/qt-4.8/qcalendarwidget.html)并使用[QDateTimeEdit::setCalendarWidget](http://qt-project.org/doc/qt-4.8/qdatetimeedit.html#setCalendarWidget)将其设置为用于日历弹出窗口的小部件。

# html - 将缓存清单添加到 Meteor 应用程序的简单方法？

> ID：12028922
> 
> 赞同：9
> 
> 时间：2012-08-19T18:30:46.903
> 
> 标签：html, node.js, offline, meteor, cache-manifest

我想通过缓存清单在不连接到流星服务器（离线）的情况下加载 Meteor（meteor.com）应用程序。

我认为这里已经提出了类似的问题： [如何将缓存清单添加到 Meteor 应用程序？](https://stackoverflow.com/questions/10668687/how-can-i-add-a-cache-manifest-to-a-meteor-app) 但我无法遵循他们的解决方案（更多内容见下文）。

有没有一种简单的方法可以在 Meteor 应用程序中包含缓存清单并在清单中填充所有流星资产？

* * *

从相关帖子中，我的问题是：

*   > 您可以通过以下方式获取 css 和 js 文件的完整列表：bundle.css 和 bundle.js.client

    “挂钩”这些文件涉及什么？我应该如何进行？

*   > buffer.files.client_cacheable['manifest.appcache'] = new Buffer(manifestcontent);

    这是做什么的，应该去哪里？

*   > 然后您可以编辑 /app/lib/app.html.in 以添加引用

    这只是`manifest="/application.manifest"`html标签中的一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:41:44.700

[我会发现使用ManifestR](http://westciv.com/tools/manifestR/)从外部构建清单更容易。该页面还包括如何将其添加到`<head>`每个页面中。

# javascript - （临时）Web App 中 JSON 搜索结果的存储

> ID：12028924
> 
> 赞同：2
> 
> 时间：2012-08-19T18:31:05.373
> 
> 标签：javascript, jquery, web-services, html, sessionstorage

我正在为我的 Web 应用程序（仅限 HTML、JS 和 CSS）开发搜索功能。我正在使用 jQuery 的 .getjson() 方法从提要中检索数据并将这些结果显示在页面上。在 .each() 语句中，我将 HTML 标记添加到结果中，使一些元素链接到外部源。

问题是当访问者在我的 Web 应用程序上启动搜索并单击从结果到外部页面的链接，然后使用浏览器上的后退按钮返回结果页面时，所有搜索结果都被清除并需要启动另一个搜索。

我想暂时保存搜索结果，因此如果用户单击结果中的链接，然后按“返回”按钮返回应用程序，则所有结果都将可用，而无需新的搜索。

更进一步，如果过去搜索的结果仍然存在，那么如果访问者继续按“后退”按钮，他们可以看到所有以前的搜索（当然有给定的限制），这也很酷。

HTML5 sessionStorage 似乎很适合这个，但我发现的信息指向一个乏味的编码解决方案。我不能将所有 json 结果保存为 JS 对象，并在访问者按下后退按钮时由我的每个语句重新呈现它们吗？我绝对愿意使用代码库或插件来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:25:29.667

您有两种方法可以解决此问题，一种是将结果缓存在您的服务器上并按需填充视图，第二种方法就像您之前提到的那样 - 使用 sessionStorage。sessionStorage (IMO) 有一个非常简单的 API。您可以使用 sessionStorage.setItem(key, value) 或 sessionStorage.getItem(key) - 也可以使用其他方法，例如 sessionStorage.key(index)、sessionStorage.removeItem(key) 和 sessionStorage.clear()。为 sessionStorage 包含一个跨浏览器的 polyfill 解决方案可能会很有用，您可以查看 Modernizr 的“Web Storage”polyfills 部分：[https ://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser- Polyfills——](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)玩得开心：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:26:59.550

在我的头顶上：

每次用户搜索时，将 url 中的哈希更改为唯一的字符串（例如，'search-{userInput}' ...您当然可以忘记 'search-'，但我喜欢我的 url）。这应该为您提供后退按钮支持。然后：

备选方案 A：监听 hashChange 事件，解析 window.location.hash 并将请求重新发送到您的搜索 URL。从理论上讲，除非在 URL 中添加时间戳或类似的疯狂的东西，否则浏览器的缓存机制应该在这里启动。如果不是，这意味着一个额外的请求，但这应该没问题，不是吗？

备选方案 B：通过将结果缓存到 localStorage 来扩展您现有的搜索查询机制（只是不要忘记预先对其进行 JSON.stringify 并使用 something-{timestamp} 键）。然后监听 hashChange 事件并从你的 localStorage 中提取结果。就个人而言，我不推荐这种解决方案，因为您正在堵塞 localStorage（afaik 某些浏览器的限制为 2.5mB）。

您可能必须想办法避免浏览器缺少对 hashChange 事件、JSON 字符串化/解析和 LocalStorage 的支持，但我乐观地认为现在有足够的库/插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:19:27.920

[http://brian.io/lawnchair/](http://brian.io/lawnchair/)是一个很好的持久性 API 小库。您可以使用相同的语法作为不同存储选项的抽象[http://brian.io/lawnchair/adapters/](http://brian.io/lawnchair/adapters/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:09:32.057

您想得太复杂了：您的搜索表单很可能不会更改 url！使用 GET 而不是 POST，您将获得所需的结果。现在浏览器无法知道您要显示的网站状态，默认情况下显示第一个 - 空搜索表单

可以按照建议添加缓存，但这真的不是问题

# java - 避免竞争条件的私有构造函数

> ID：12028925
> 
> 赞同：57
> 
> 时间：2012-08-19T18:31:06.923
> 
> 标签：java, multithreading, race-condition

我正在看书`Java Concurrency in Practice`4.3.5

```
 @ThreadSafe
  public class SafePoint{

       @GuardedBy("this") private int x,y;

       private SafePoint (int [] a) { this (a[0], a[1]); }

       public SafePoint(SafePoint p) { this (p.get()); }

       public SafePoint(int x, int y){
            this.x = x;
            this.y = y;
       }

       public synchronized int[] get(){
            return new int[] {x,y};
       }

       public synchronized void set(int x, int y){
            this.x = x;
            this.y = y;
       }

  } 
```

我不清楚它在哪里说

> 私有构造函数的存在是为了避免复制构造函数实现为 this (px, py); 时会发生的竞争条件；这是私有构造函数捕获习语的一个示例（Bloch 和 Gafter，2005）。

我知道它提供了一个 getter 来一次在数组中检索 x 和 y 而不是每个单独的 getter，所以调用者会看到一致的值，但为什么是私有构造函数？这里有什么诀窍

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-20T12:19:28.927

这里已经有很多答案了，但我真的很想深入了解一些细节（据我所知，让我来吧）。我强烈建议您运行答案中存在的每个示例，以亲自了解事情的发生方式和原因。

*要了解解决方案，您需要先了解问题。*

假设 SafePoint 类实际上如下所示：

```
class SafePoint {
    private int x;
    private int y;

    public SafePoint(int x, int y){
        this.x = x;
        this.y = y;
    }

    public SafePoint(SafePoint safePoint){
        this(safePoint.x, safePoint.y);
    }

    public synchronized int[] getXY(){
        return new int[]{x,y};
    }

    public synchronized void setXY(int x, int y){
        this.x = x;
        //Simulate some resource intensive work that starts EXACTLY at this point, causing a small delay
        try {
            Thread.sleep(10 * 100);
        } catch (InterruptedException e) {
         e.printStackTrace();
        }
        this.y = y;
    }

    public String toString(){
      return Objects.toStringHelper(this.getClass()).add("X", x).add("Y", y).toString();
    }
} 
```

什么变量创建了这个对象的状态？只有两个：x，y。它们是否受到某种同步机制的保护？好吧，它们是通过内在锁，通过 synchronized 关键字 - 至少在 setter 和 getter 中。他们在其他任何地方都被“感动”了吗？当然在这里：

```
public SafePoint(SafePoint safePoint){
    this(safePoint.x, safePoint.y);
} 
```

你在这里做的是从你的对象中*读取。*对于一个线程安全的类，你必须协调对它的读/写访问，或者*在同一个锁上同步。*但是这里没有发生这样的事情。setXY方法**确实**是同步的，但克隆构造函数不是，因此调用这两个方法可以以非线程安全的方式完成。我们可以刹车这个班级吗？

让我们试试这个：

```
public class SafePointMain {
public static void main(String[] args) throws Exception {
    final SafePoint originalSafePoint = new SafePoint(1,1);

    //One Thread is trying to change this SafePoint
    new Thread(new Runnable() {
        @Override
        public void run() {
            originalSafePoint.setXY(2, 2);
            System.out.println("Original : " + originalSafePoint.toString());
        }
    }).start();

    //The other Thread is trying to create a copy. The copy, depending on the JVM, MUST be either (1,1) or (2,2)
    //depending on which Thread starts first, but it can not be (1,2) or (2,1) for example.
    new Thread(new Runnable() {
        @Override
        public void run() {
            SafePoint copySafePoint = new SafePoint(originalSafePoint);
            System.out.println("Copy : " + copySafePoint.toString());
        }
    }).start();
}
} 
```

输出很容易就是这个：

```
 Copy : SafePoint{X=2, Y=1}
 Original : SafePoint{X=2, Y=2} 
```

这是逻辑，因为一个线程更新=写入我们的对象，而另一个线程正在读取它。它们不会在某些通用锁上同步，因此不会同步输出。

*解决方案？*

*   synchronized 构造函数，这样读取将在同一个锁上同步，但是 Java 中的构造函数不能使用 synchronized 关键字——这当然是逻辑。

*   可能会使用不同的锁，例如可重入锁（如果无法使用同步关键字）。但它也不起作用，因为*构造函数中的第一条语句必须是对 this/super 的调用*。如果我们实现不同的锁，那么第一行必须是这样的：

    lock.lock() //lock 是 ReentrantLock，由于上述原因，编译器不允许这样做。

*   如果我们让构造函数成为一个方法呢？当然这会奏效！

例如，请参阅此代码

```
/*
 * this is a refactored method, instead of a constructor
 */
public SafePoint cloneSafePoint(SafePoint originalSafePoint){
     int [] xy = originalSafePoint.getXY();
     return new SafePoint(xy[0], xy[1]);    
} 
```

调用看起来像这样：

```
 public void run() {
      SafePoint copySafePoint = originalSafePoint.cloneSafePoint(originalSafePoint);
      //SafePoint copySafePoint = new SafePoint(originalSafePoint);
      System.out.println("Copy : " + copySafePoint.toString());
 } 
```

这次代码按预期运行，因为读取和写入在同一个锁上同步，但是**我们删除了构造函数**。如果不允许这样做怎么办？

我们需要找到一种在同一个锁上同步读取和写入 SafePoint 的方法。

理想情况下，我们会想要这样的东西：

```
 public SafePoint(SafePoint safePoint){
     int [] xy = safePoint.getXY();
     this(xy[0], xy[1]);
 } 
```

但是编译器不允许这样做。

我们可以通过调用 * *getXY*方法来安全地读取，所以我们需要一种方法来使用它，但是我们没有一个构造函数来接受这样的参数——创建一个。

```
private SafePoint(int [] xy){
    this(xy[0], xy[1]);
} 
```

然后，实际的调用：

```
public  SafePoint (SafePoint safePoint){
    this(safePoint.getXY());
} 
```

请注意，构造函数是私有的，这是因为我们不想再暴露另一个公共构造函数并*重新*考虑类的不变量，因此我们将其设为私有 - 只有我们可以调用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-19T19:31:43.500

私有构造函数可以替代：

```
public SafePoint(SafePoint p) {
    int[] a = p.get();
    this.x = a[0];
    this.y = a[1];
} 
```

但允许构造函数链接以避免重复初始化。

如果`SafePoint(int[])`是公共的，则`SafePoint`该类不能保证线程安全，因为该数组的内容可以被另一个持有对同一数组的引用的线程在该类的值`x`和该类`y`读取的值之间进行修改`SafePoint`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-19T18:51:37.033

> 我知道它提供了一个 getter 来一次在数组中检索 x 和 y 而不是每个单独的 getter，所以调用者会看到一致的值，但为什么是私有构造函数？这里有什么诀窍？

我们在这里想要的是链接构造函数调用以避免代码重复。理想情况下，我们想要的是这样的：

```
public SafePoint(SafePoint p) {
    int[] values = p.get();
    this(values[0], values[1]);
} 
```

但这不起作用，因为我们会得到一个编译器错误：

```
call to this must be first statement in constructor 
```

我们也不能使用它：

```
public SafePoint(SafePoint p) {
    this(p.get()[0], p.get()[1]); // alternatively this(p.x, p.y);
} 
```

因为那时我们有一个条件，即在调用`p.get()`.

所以我们想从 SafePoint 捕获值并链接到另一个构造函数。这就是为什么我们将使用*私有构造函数捕获习惯用法*并捕获私有构造函数中的值并链接到“真实”构造函数：

```
private SafePoint(int[] a) {
    this(a[0], a[1]);
} 
```

另请注意

```
private SafePoint (int [] a) { this (a[0], a[1]); } 
```

在课堂之外没有任何意义。一个二维点有两个值，而不是数组所暗示的任意值。它没有检查数组的长度，也没有检查它不是`null`。它仅在类中使用，调用者知道使用数组中的两个值进行调用是安全的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-19T19:36:47.850

Java 中的构造函数不能同步。

我们无法实现`public SafePoint(SafePoint p)`， `{ this (p.x, p.y); }` 因为

由于我们没有同步（并且不能像我们在构造函数中那样），在构造函数执行期间，可能有人`SafePoint.set()`从不同的线程调用

```
public synchronized void set(int x, int y){
        this.x = x; //this value was changed
-->     this.y = y; //this value is not changed yet
   } 
```

所以我们会读取不一致状态的对象。

因此，我们以线程安全的方式创建快照，并将其传递给私有构造函数。堆栈限制保护对数组的引用，因此无需担心。

**更新** 哈！至于诀窍，一切都很简单-您`@ThreadSafe`在示例中错过了书中的注释：

> @ThreadSafe
> 
> 公共类安全点 { }

因此，如果将 int 数组作为参数的构造函数是*public*或*protected*，则该类将不再是线程安全的，因为数组的内容可能会以与 SafePoint 类相同的方式更改（即有人可能会在构造函数执行）！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-19T19:56:34.287

使用 SafePoint 的目的是始终提供一致的 x 和 y 视图。

例如，假设 SafePoint 为 (1,1)。一个线程正在尝试读取此 SafePoint，而另一个线程正在尝试将其修改为 (2,2)。如果安全点不是线程安全的，则可能会看到 SafePoint 为 (1,2)（或 (2,1)）的视图，这是不一致的。

提供线程安全一致视图的第一步不是提供对 x 和 y 的独立访问；但要提供一种同时访问它们的方法。类似的合同适用于修改器方法。

此时，如果在 SafePoint 内部没有实现复制构造函数，那么它就完全实现了。但是，如果我们确实实施了一个，我们需要小心。构造函数不能同步。像下面这样的实现会暴露一个不一致的状态，因为 px & py 是独立访问的。

```
 public SafePoint(SafePoint p){
        this.x = p.x;
        this.y = p.y;
   } 
```

但以下不会破坏线程安全。

```
 public SafePoint(SafePoint p){
        int[] arr = p.get();
        this.x = arr[0];
        this.y = arr[1];
   } 
```

为了重用代码，实现了一个接受 int 数组的私有构造函数，该构造函数委托给 this(x, y)。int 数组构造函数可以公开，但实际上它类似于 this(x, y)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T18:51:56.693

构造函数不应该在这个类之外使用。客户端不应该能够构建一个数组并将其传递给这个构造函数。

所有其他公共构造函数都暗示将调用 SafePoint 的 get 方法。

私有构造函数将允许您以一种可能是 Thread 不安全的方式构建自己的构造函数（即通过分别检索 x、y、构建一个数组并传递它）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-17T03:53:46.573

私有 SafePoint(int[] a) 提供两个功能：

首先，防止别人使用下面的构造函数，因为其他线程可以获取到数组的ref，并且在构造的时候可能会改变数组

```
int[] arr = new int[] {1, 2};
// arr maybe obtained by other threads, wrong constructor
SafePoint safepoint = new SafePoint(arr); 
```

其次，防止后面的程序员*错误地*实现*复制构造函数*，如下所示。所以作者说：

> 私有构造函数的存在是为了避免如果复制构造函数被实现为 this(px, py) 会发生的竞争条件

```
//p may be obtined by other threads, wrong constructor
public SafePoint(SafePoint p) { this(p.x, p.y);} 
```

看作者的实现：不用担心*p*被其他线程修改了，因为 p.get() 返回一个*新的副本*，p.get() 也被 p 的 this 守护，所以 p 不会改变，即使得到由其他线程！

```
public SafePoint(SafePoint p) {
    this(p.get());
}
public synchronized int[] get() {
    return new int[] {x, y};
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-03T15:59:02.283

这意味着，如果您没有私有构造函数并且您通过以下方式实现复制构造函数：

```
public SafePoint(SafePoint p) {
    this(p.x, p.y);
} 
```

现在假设线程 A 可以访问 SafePoint **p**正在复制构造函数的 this(px, py) 指令之上执行，并且在不幸的时间另一个线程 B 也可以访问 SafePoint **p**在 SafePoint上执行 setter set(int x, int y)**磷**。由于您的复制构造函数在没有适当锁定的情况下直接访问**p**的**x**和**y**实例变量，因此可能会看到 SafePoint **p**的状态不一致。

由于私有构造函数通过同步的 getter 访问**p**的变量**x**和**y**，因此您可以保证看到 SafePoint **p**的一致状态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-28T19:52:31.177

我们的要求是：我们希望有一个像下面这样的复制构造函数（同时确保类仍然是线程安全的）：

```
public SafePoint(SafePoint p){
    // clones 'p' passed a parameter and return a new SafePoint object.
} 
```

让我们尝试制作复制构造函数。

**方法一：**

```
public SafePoint(SafePoint p){
    this(p.x, p.y);
} 
```

上述方法的问题是它会渲染我们的类 NOT THREAD SAFE

如何 ？

因为构造函数不是同步的，这意味着两个线程可能同时作用于同一个对象（一个线程可能使用它的复制构造函数克隆这个对象，而另一个线程可能调用对象的 setter 方法）。如果发生这种情况，调用 setter 方法的线程可能已经更新了`x`字段（但尚未更新`y`字段），从而使对象处于不一致的状态。现在，如果另一个线程（正在克隆对象）执行（并且它可以执行，因为构造函数未通过内部锁同步），则复制构造函数`this(p.x, p.y)`将`p.x`是新值，而`p.y`仍然是旧值。

所以，我们的方法不是线程安全的，因为构造函数没有同步。

**方法2：（**试图使方法1线程安全）

```
public SafePoint(SafePoint p){
    int[] temp = p.get();
    this(temp[0], temp[1]);
} 
```

这是线程安全的，因为`p.get()`通过内部锁同步。因此，在`p.get()`执行时，其他线程无法执行 setter，因为 getter 和 setter 都受到相同的内在锁的保护。

但不幸的是，编译器不允许我们这样做，因为`this(p.x, p.y)`应该是第一条语句。

这将我们带到了最后的方法。

**方法3：（**解决方法2的编译问题）

```
public SafePoint(SafePoint p){
    this(p.get());
}

private SafePoint(int[] a){
    this(a[0], a[1]);
} 
```

使用这种方法，我们可以保证我们的类是线程安全的，并且我们有我们的复制构造函数。

最后一个问题是为什么第二个构造函数是私有的？这仅仅是因为我们创建这个构造函数只是为了我们的内部目的，我们不希望客户端通过调用这个方法来创建 SafePoint 对象。

# php - 更改 soundCloud 播放器的购买标题

> ID：12028926
> 
> 赞同：1
> 
> 时间：2012-08-19T18:31:09.133
> 
> 标签：php, api, soundcloud

我使用脚本[php-soundcloud](https://github.com/mptre/php-soundcloud) (Oauth 2) 并想更改购买链接的标题（购买此曲目）。
我可以更新链接，但我不能更改链接的文本。

![声云购买](../Images/fb044deb5c37e1a275ad5fe49073f213.png)

我使用这段代码：

```
$soundcould->put('https://api.soundcloud.com/tracks/56649403', array(
  'track[purchase_url]' => 'http://website.com/', 
  'track[purchase_title]' => 'Support me' // whitout this, it work
)); 
```

但它返回给我一个错误：请求的 URL 以[HTTP 代码 422](http://developers.soundcloud.com/docs/api/guide#errors)响应。

当我删除`track[purchase_title]`时，它起作用了，所以问题是那个变量！

更改链接标题必须有什么特别的吗？
Soundcloud 对其 API 的使用设置了限制？
除了更改变量之外，是否可以创建新链接`purchase_title`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:49:23.133

这不起作用的原因是因为 purchase_url 和 purchase_title 只能在高级帐户上更改。我会在文档中更清楚地说明这一点！

这是一个代码示例，它将为高级帐户提供技巧：

```
<?php
require_once 'Services/Soundcloud.php';

$client = new Services_Soundcloud('client_id', 'client_secret', 'redirect_uri');
$client->setAccessToken('your-access-token');

$track_url = 'https://api.soundcloud.com/tracks/52652023.json';
$response = json_decode($client->put($track_url, array(
  'track[purchase_url]' => 'http://website.com',
  'track[purchase_title]' => 'Support me'
)));
?> 
```

如果这不起作用，则问题出在其他地方。给我发电子邮件，我可以帮助您进一步调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:59:59.800

我不确定，但试试吧。我认为这对您很有帮助：-

**请参阅指南：-**

[http://developers.soundcloud.com/docs/api/guide](http://developers.soundcloud.com/docs/api/guide)

**试试看**

```
<?php
$track = <<<EOH
<track>
    <downloadable>true</downloadable>
    <purchase_url>http://website.com/</purchase_url>
    <purchase_title>true</purchase_title>
</track>
EOH;

try {
    $response = json_decode(
        $soundcloud->put(
            'tracks/1',
            $track,
            array(CURLOPT_HTTPHEADER => array('Content-Type: application/xml'))
        ),
        true
    );
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
} 
```

# java - Android：制作地理围栏的简单方法？

> ID：12028928
> 
> 赞同：15
> 
> 时间：2012-08-19T18:31:15.030
> 
> 标签：java, android, geolocation, location, location-based-service

我是 Android 开发新手，正在创建一个应用程序，允许用户在特定位置周围创建地理围栏以进行提醒。例如：在杂货店周围设置地理围栏，以提醒用户进入时拿起橙汁。

有谁知道可以帮助开发这样的东西的教程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:43:14.613

AFAIK 没有关于地理围栏的教程，但它非常简单（假设你想要一个圆形围栏）。

*   [本教程](http://marakana.com/s/tutorial_android_location_service_example,311/index.html) 将告诉你如何获取用户的位置
*   [这些](https://www.google.com/search?q=android%20calculate%20distance%20between%20two%20locations&aq=2&oq=android%20calculate%20distance&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8)链接中的任何一个都将向您展示如何计算其当前位置与其围栏中心点之间的距离
*   定期计算它们到中心的距离。我会让他们通过设置屏幕设置间隔，并从大约五分钟的默认值开始，因为除此之外的任何东西都会消耗大量电池。每次获得时存储该距离。
*   如果与新距离相比，他们的最后距离越过边界，请执行您的操作。例如，我开发了一个应用程序，如果孩子离开朋友家或到学校，它会提醒父母。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-16T19:03:17.760

You can use the new GeoFence class released at Google IO 2013:

[http://developer.android.com/reference/com/google/android/gms/location/Geofence.html](http://developer.android.com/reference/com/google/android/gms/location/Geofence.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T23:33:13.830

我找到了这个简单且有效的示例

[http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T01:58:43.650

最近开发了一个名为 Proxim.io 的新 API，可以满足您的目的。该网站是 www.proxim.io。这是开发人员文档中的引用：

Proxim.io 是一个向应用程序用户传递相关消息的平台。基于实时位置、感兴趣的主题和地理触发器传递的消息。消息可以通过 Push 传递到设备，也可以通过 API（Web 事件）路由到软件系统。

# jquery - 将 HTML 块存储为 jquery 变量并复制到另一个 div

> ID：12028931
> 
> 赞同：1
> 
> 时间：2012-08-19T18:31:32.267
> 
> 标签：jquery, variables

我需要将一个元素中的一段 html 代码存储为 jquery 变量，然后在单击时将其复制到另一个元素中。这是我使用的代码：

```
var $regForm = $('#regForm').html();

$('#btn-signup').tap(function(){
    $('#register').css({'marginLeft':'0px'});
    $('#register .ext').html($regForm);
}); 
```

查看更新的源代码时，我可以看到代码已正确复制到 div 中，但问题是元素没有显示在屏幕上，我不知道为什么。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:56:16.430

尝试这个：

```
$('#btn-signup').tap(function(){
    $('#register').css({'marginLeft':'0px'});
    $('#regForm').clone().attr('id', 'regForm2').appendTo($('#register .ext'))
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:35:31.523

这应该有效：

```
$('#regForm').clone().appendTo('#register .ext'); 
```

# r - 从R中向量中的条目中提取字符

> ID：12028933
> 
> 赞同：3
> 
> 时间：2012-08-19T18:32:16.643
> 
> 标签：r, extract

Excel 中有名为`left`、`right`和的函数`mid`，您可以在其中从单元格中提取部分条目。例如，`=left(A1, 3)`, 将返回单元格 A1 中最左边的 3 个字符，并从单元格 A1`=mid(A1, 3, 4)`中的第三个字符开始，并为您提供编号 3 - 6 的字符。R 中是否有类似的函数或类似的直接方法可以做到这一点？

作为一个简化的示例问题，我想取一个向量

```
sample<-c("TRIBAL","TRISTO", "RHOSTO", "EUGFRI", "BYRRAT") 
```

并创建 3 个新向量，其中包含每个条目中的前 3 个字符、每个条目中的中间 2 个字符以及每个条目中的最后 4 个字符。

Excel 没有函数（我知道）的一个稍微复杂的问题是如何使用每个条目的第一个、第三个和第五个字符创建一个新向量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T18:35:01.567

您正在寻找函数`substr`或其近亲`substring`：

主角很直接：

```
substr(sample, 1, 3)
[1] "TRI" "TRI" "RHO" "EUG" "BYR" 
```

在定义的位置提取一些字符也是如此：

```
substr(sample, 2, 3)
[1] "RI" "RI" "HO" "UG" "YR" 
```

要获取尾随字符，您有两种选择：

```
substr(sample, nchar(sample)-3, nchar(sample))
[1] "IBAL" "ISTO" "OSTO" "GFRI" "RRAT"

substring(sample, nchar(sample)-3)
[1] "IBAL" "ISTO" "OSTO" "GFRI" "RRAT" 
```

* * *

还有你最后的“复杂”问题：

```
characters <- function(x, pos){
  sapply(x, function(x)
    paste(sapply(pos, function(i)substr(x, i, i)), collapse=""))
}
characters(sample, c(1,3,5))
TRIBAL TRISTO RHOSTO EUGFRI BYRRAT 
 "TIA"  "TIT"  "ROT"  "EGR"  "BRA" 
```

# jquery - 定位 div 的范围

> ID：12028934
> 
> 赞同：0
> 
> 时间：2012-08-19T18:32:19.693
> 
> 标签：jquery

我正在尝试在我的图书网站上执行以下操作：http: [//seanbooks.tumblr.com](http://seanbooks.tumblr.com)

1.  具有“book”类的前三个 div 应该具有“fourcol”类，其余的应该具有“threecol”类。
2.  “threecol”的每第四个实例都应该有“last”类

我想知道是否有一种方法可以使用我尝试使用[http://api.jquery.com/eq-selector/来定位“书”类的前 3 个实例](http://api.jquery.com/eq-selector/)

```
<script>
    $(".book").slice(0, 3).addClass('fourcol').removeClass('threecol')
    .filter(':nth-child(3)').addClass('last').end()
    .filter(':nth-child(4n)').addClass('last');
</script> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:34:51.567

您正在寻找的是[lt()](http://api.jquery.com/lt-selector/)和[gt()](http://api.jquery.com/gt-selector/)选择器

```
$('.book').filter(':lt(3)').addClass('threecol').end() //sets class to first three
          .filter(':gt(2)').addClass('fourcol').end() //sets class to the rest
          .filter(':nth-child(4n)').addClass('last'); //every fourth 
```

[**小提琴**](http://jsfiddle.net/cz2Yw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T18:36:29.990

我建议在这里使用 slice，就像它在 lt() 的手册页上所说的那样：

> 因为 :lt() 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :lt() 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请改用 $("your-pure-css-selector").slice(0, index) 。

[http://api.jquery.com/slice/](http://api.jquery.com/slice/)

例如：

```
$(".book").slice(0, 3).addClass('fourcol').removeClass('threecol'); 
```

这是使用 JQuery nth 选择器选择每 4 个实例的示例：

```
$(".threecol .book:nth-child(4n)").addClass('last'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T18:40:20.323

```
$(".book").addClass('threecol') //add a class of threecol to each element
          .slice(0, 3).addClass('fourcol').removeClass('threecol'); //add fourcol only to the first three elements 
```

我不知道我是否正确理解了这部分，但对于“第 4 次实例”，您可以这样做：

```
var count = 0
$(".threecol").each(function() {
    count++;
    if(count === 4) {
        this.className += " last";
        count = 0;
    }
}); 
```

或者你可以尝试使用[nth-child](http://api.jquery.com/nth-child-selector/)像：

```
$(".threecol:nth-child(4n)").addClass("last") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T18:35:00.987

尝试

```
$(".book:lt(3)").addClass('fourcol').removeClass('threecol'); 
```

[http://api.jquery.com/lt-selector/](http://api.jquery.com/lt-selector/)

要选择类“threecol”的每个第 4 个实例，您可以过滤掉那些不是第 4 个实例的元素。

```
$(".threecol").filter(function(i){
    return (i+1)%4 = 0;
}).addClass('last'); 
```

# c - 如何创建一个可以从 C 中任何类型的 GTK+ 2.0 小部件继承的类？

> ID：12028935
> 
> 赞同：2
> 
> 时间：2012-08-19T18:32:19.523
> 
> 标签：c, gtk, gobject

如何创建一个可以从 C 中任何类型的 GTK+ 2.0 小部件继承的类？我知道如果我要使用 C++，我会有一个模板，它继承自它的参数并添加我需要的行为，如果我要使用 Objective-C 做类似的事情，我可能会使用 NSProxy 并将消息转发给类成员这是真正的视图控制器，但我不知道如何使用 GTK+ 2.0 在 C 中完成相同的任务。

如何创建一个可以从 C 中任何类型的 GTK+ 2.0 小部件继承的类？

PS有些人会问为什么。问为什么是公平的。正如我之前的问题所见，[哪些 GUI 库不是面向对象的？](https://stackoverflow.com/questions/12013693/what-free-software-and-portable-gui-libraries-are-non-object-oriented)我一直在挑战自己以非面向对象的方式进行编程。因为我想以非面向对象的方式进行编程，所以我需要对 GTK+ 2.0 中可用的所有类进行抽象，以呈现我想要的那种行为。具体来说，我需要让每个班级都继续工作。

一个简单的延续实现是：

```
struct CONTINUATION;
typedef struct CONTINUATION continuation;
struct CONTINUATION {
     void* environment;
     continuation (*ip)(void*); 
}; 
```

一个想要向它的延续发送消息的类将不断地用它的 ip 应用到它的环境的结果替换它的延续，直到 ip 值指向（存根）函数 event_get。然后，该类将使用环境中的信息进行适当的响应，并获得新的延续，这样循环就可以重新开始下一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:51:38.957

一旦你决定用 C 来做这件事，你唯一的选择就是宏，比如：

```
#define GtkStruct(x) \
struct x {   \
   int   base_class_field1;  \
   char *base_class_field2; 
```

或者

```
#define GtkStruct(x, base_type) \
struct x {   \
   base_type base_class_data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:28:36.037

这很容易；每当您想从类型继承[`g_type_register_dynamic`](http://developer.gnome.org/gobject/stable/gobject-Type-Information.html#g-type-register-dynamic)并提供父类型时。不过，我不清楚您为什么要对现有类型进行子类化；[`g_object_set_qdata_full`](http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#g-object-set-qdata-full)在大多数情况下，使用并使用现有信号来连接您的延续似乎更容易附加您自己的信息。

# php - 如何在 jQuery 代码中转义“[”字符

> ID：12028936
> 
> 赞同：0
> 
> 时间：2012-08-19T18:32:38.807
> 
> 标签：php, javascript, jquery

我正在尝试在某些 INPUT 元素中设置一些值，但我的代码不起作用。请看下面的代码：

```
<?php foreach($languages as $language): ?>
   $('input[name="product_description\\[<?php echo $language["language_id"]; ?>\\]\\[name\\]]"').val(data.items[0]['volumeInfo']['title']);
   $('input[name="product_description\\[<?php echo $language["language_id"]; ?>\\]\\[description\\]]"').val(data.items[0]['volumeInfo']['description']);
<?php endforeach ?> 
```

HTML 标记如下所示：

```
<input type="text" value="" size="100" name="product_description[1][name]"> 
```

那里有什么问题？jQuery 不返回任何错误，并且 data.items[0]['volumeInfo']['title'] 有值所以我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:35:24.637

不要对不在 PHP 块中的字符进行转义，这部分代码不会被处理并按原样传递给浏览器：

```
<?php foreach($languages as $language): ?>
   $('input[name="product_description\[<?php echo $language["language_id"]; ?>\]\[name\]]"').val(data.items[0]['volumeInfo']['title']);
   $('input[name="product_description\[<?php echo $language["language_id"]; ?>\]\[description\]]"').val(data.items[0]['volumeInfo']['description']);
<?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T03:19:55.977

不要将 HTML、PHP 和 JavaScript 混合在 4 行中。

更少的行不是更好的代码，混合语言是更糟糕的代码。尽最大努力分离关注点，这使您的代码模块化且更易于使用。像这样的错误根本不会发生在具有良好关注点分离的代码中。

您需要考虑的第一件事是：“为什么我要编写代码来多次编写更多代码？”

归根结底，您只是尝试使用不同的 foo 和 bar 值多次执行此操作：

```
var inputElement = $('input[name="product_description[foo][bar]"]');
inputElement.val(data.items[0]['volumeInfo']['title']); 
```

这显然适合作为 JavaScript 函数（不是 PHP 代码）：

```
function fooBar(foo, bar) {
  var inputElement = $('input[name="product_description[' + foo + '][' + bar+ ']"]');
  inputElement.val(data.items[0]['volumeInfo'][bar]);
} 
```

仍然不是最干净的，但是嘿，现在您的 JavaScript 已经通过了一个点。

好的，现在你只需要给它一些数据，如果你有一个数组，你可以这样做：

var baz = [ {“language_id”：“foo1”，“barVal”：“bar1”}，{“language_id”：“foo2”，“barVal”：“bar2”}，{“language_id”：“foo3”，“ barVal": "bar3" }, ]

嘿，你可以用 PHP 生成它：

```
json_encode($languages); //Assuming you've set up a value for barVal... 
```

所以现在你的 jQuery 只需要循环遍历它。

```
$.each(baz, function(key, val){
    fooBar(val["language_id"], val["barVal"]);
}) 
```

那么，你的整个事情会是什么样子？

```
//Whatever.php
var baz = <?php echo json_encode($languages); ?>;
function fooBar(foo, bar) {
  var inputElement = $('input[name="product_description[' + foo + '][' + bar+ ']"]');
  inputElement.val(data.items[0]['volumeInfo'][bar]);
}
$.each(baz, function(key, val){
    fooBar(val["language_id"], val["barVal"]);
}) 
```

我在查看您的代码时遇到了一些担忧……您没有提供足够的信息让我了解您到底在做什么。另外，我怀疑您不想将“ `data.items[0]['volumeInfo']`”放入每个值中，但这就是您的代码所说的，因此我使用了它。你应该能够查看上面的代码并找到一些方法来让它做你想做的事情。

不要在生产中使用变量 foo、bar、baz 或 buz。这些是仅作为示例代码的占位符名称。使用描述性的变量名，这些背后没有隐藏的含义（如果你以前没有见过这些）。

不要混合你的代码，如果你这样做了，尽可能多地分离关注点。转义行为记录在 jQueryAPI 中，但是从 PHP 中添加另一层转义复杂性会使您遇到这种令人沮丧的情况。通过这样做，您将来可以避免这种痛苦。

像这样对输入值使用名称和数组确实一点都不理想。阅读一些用于 jQuery 和它所构建的本机 DOM 的 API，看看你是否能找到更好的方法。它存在。[检查标签 wiki，我个人花时间确保其中有很棒的内容。](https://stackoverflow.com/tags/javascript/info)

最后，我没有对此进行测试或验证它是否运行，但代码结构是您应该遵循的。我不是为你编写代码，而是向你展示一个结构来完成这项工作，当你必须在 6 个月内维护它时，它会让你的头发完好无损。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:31:58.170

尽管有重要的建议，您可以更好地使用 jQuery，但如何也使用更好的 PHP，并避免到处切换上下文？它很混乱，难以阅读，并且（如您的问题所示）可能导致标点符号错误。

```
<?php

  $fmt="\$('input[name=\"product_description[%s][%s]]\"').val(data.items[0]['volumeInfo']['%s']);\n";

  foreach ($languages as $language) {
    printf($fmt, $language["language_id"], "name", "title");
    printf($fmt, $language["language_id"], "description", "description");
  }

?> 
```

当然，未经测试。

# class - 带有类的 Clojure 案例语句

> ID：12028944
> 
> 赞同：9
> 
> 时间：2012-08-19T18:34:05.827
> 
> 标签：class, clojure, switch-statement

我想打开给定对象的类以对其进行编码。

```
(defn encoded-msg-for [msg]
  (case (class msg)
    java.lang.Double   (encode-double msg)
    java.lang.String   (encode-str msg)
    java.lang.Long   (encode-int msg)
    java.lang.Boolean  (encode-bool msg)
    clojure.lang.PersistentArrayMap (encode-hash msg)
    clojure.lang.PersistentVector (encode-vec msg)
    nil "~"
  )
 ) 
```

当我打电话时`(encoded-msg-for {})`，它会返回`No matching clause: class clojure.lang.PersistentArrayMap`

奇怪的是，将案例放入哈希映射（类作为键，字符串作为值）效果很好。

还有，`(= (class {}) clojure.lang.PersistentArrayMap)`是真的。这里发生了什么比较，我如何切换对象本身的类或（更好）其层次结构中的某些东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T19:19:03.893

我相信`case`将类名视为文字符号 - 它不会将它们解析为实际类：

```
>>> (case 'clojure.lang.PersistentArrayMap clojure.lang.PersistentArrayMap 1 17)
1

>>> (case clojure.lang.PersistentArrayMap clojure.lang.PersistentArrayMap 1 17)
17 
```

这是相当不直观的，但它在 Clojure 的`case`. 无论如何，惯用的方法是使用`defmulti`and`defmethod`而不是打开`type`：

```
(defmulti encoded-msg class)

(defmethod encoded-msg java.util.Map [x] 5)

(defmethod encoded-msg java.lang.Double [x] 7)

>>> (encoded-msg {})
5

>>> (encoded-msg 2.0)
7 
```

调度程序使用的`isa?`谓词可以很好地处理类型的比较，特别是它适用于 Java 继承。

如果您不想使用`defmulti`，那么`condp`可能会在您的用例中替换`case`，因为它会正确评估测试表达式。另一方面，它不提供恒定的时间调度。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-19T19:43:38.893

如果您只在类上调度，那么[协议](http://clojure.org/protocols)可能是一个不错的解决方案，因为它们将使您（或您的 API 的客户端）能够在以后为其他类型提供实现，下面是一个示例：

```
(defprotocol Encodable
  (encode [this]))

(extend-protocol Encodable
  java.lang.String
  (encode [this] (println "encoding string"))
  clojure.lang.PersistentVector
  (encode [this] (println "encoding vector"))) 
```

如果您需要更细粒度的调度，或者您知道不需要扩展到其他类型，那么此解决方案中可能有太多样板。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-03T00:53:31.987

如果您正在寻找实现此目的的替代方法，请查看`condp`：

```
(condp = (type {})
  clojure.lang.PersistentArrayMap :one
  clojure.lang.PersistentVector :many
  :unknown) ;; => :one 
```

# php - 管理员与蛋糕：创建新的应用程序，或使用相同的？

> ID：12028948
> 
> 赞同：1
> 
> 时间：2012-08-19T18:34:39.237
> 
> 标签：php, cakephp, authorization, admin

我已经用 CakePHP 框架建立了一个电子商务网站。

现在，我需要实现管理登录和订单/用户管理......

最大的问题是：我应该创建一个新的应用程序（一个新的 CakePHP 应用程序文件夹），还是使用现有的？

使用同一个文件夹可以减少我复制模型的时间，但是会大大降低“安全性”，因为我需要为管理员和用户创建方法......

使用单独的框架，几乎相同的模型，将有助于我的视图......我会使用另一个页面模板，登录系统将与普通网站不同。

那么，这种情况下的“最佳”解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:47:00.100

在同一个应用程序中构建管理员。它不会降低安全性。[您可以使用Prefix Routing](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)轻松控制管理员用户可以访问哪些控制器方法。您还可以根据路由前缀更改视图布局。如果你需要更细粒度的东西，Cake 支持复杂权限系统的[访问控制列表](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)。

最后，如果您使用一组模型和控制器，您的应用程序将更易于维护。

这是我在`app_controller.php`. 这是一个内置于 CakePHP 1.2 的应用程序，因此可能需要针对较新的版本进行轻微更新。这假设任何注册用户都可以访问管理 URL，但这很容易改变：

```
function beforeFilter(){
    if (isset($this->params['prefix']) && $this->params['prefix'] == 'admin') {
        if (!$this->Session->check('User')) {
            // save the url in the session so that you can redirect there after login
            $this->Session->write('lastPageVisited', $this->params['url']['url']);
            $this->redirect('/users/login/');
            exit();
        }
        // set the admin layout
        $this->layout = 'admin';
    }
} 
```

# django - 将表单结果提交到 db - django

> ID：12028953
> 
> 赞同：0
> 
> 时间：2012-08-19T18:35:02.130
> 
> 标签：django, django-forms, django-views

我创建了一个表单来为我的博客项目将帖子保存到数据库中。我设计了索引页。现在我正在尝试创建一个表单来创建新帖子。在此之前我使用的是“manage.py shell”

这是我的看法：

```
def addpost(request):
    form = addForm()
    if request.method=="POST":
        titleform = request.POST['title']
        bodyform = request.POST['body']
        checkform = request.POST['isdraft']
        if form.is_valid():
                n = Post(title = titleform, body = bodyform, isdraft=checkform)
                n.save()

                return HttpResponseRedirect('/admin/')
    else:
        pass
    return render(request,'userside/add.html',{'form':form,}) 
```

我的模型.py：

```
class Post(models.Model):
    title = models.CharField(max_length = 100)
    body  = models.TextField()
    slug = AutoSlugField(populate_from='title',unique=True)
    posted = models.DateField(auto_now_add=True)
    isdraft = models.BooleanField()
    def __unicode__(self):
        return self.title

    @permalink
    def get_absolute_url(self):
        return ('view_blog_post',None, {'postslug':self.slug})

class addForm(forms.Form):
    title = forms.CharField(max_length=100)
    body  = forms.CharField(widget=forms.Textarea)
    isdraft = forms.BooleanField() 
```

如果我将表单提交为“isdraft”字段为 False（未选中）；它给出了如下错误：

**/admin/addpost/ 处的 MultiValueDictKeyError**

**“未在”中找到密钥“isdraft”**

如果我将表单提交为“isdraft”字段为 True(checked)；它什么也没给。只是令人耳目一新的形式。没有将数据添加到数据库中。

我做错了..

谢谢你

**编辑：** Dmitry Beransky 的回答适用于复选框错误。但它仍然没有将任何数据添加到数据库中。只是刷新表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:45:04.827

如果您的 HTML 表单中未选中复选框，则它的名称/值将不会包含在浏览器发送到您的服务器的数据中。这意味着 request.POST 字典不会包含 'isdraft' 的条目，这反过来会在您尝试读取 isdraft 值时导致键错误。一种解决方案是将您从发布的数据中读取值的方式更改为：

```
 checkform = request.POST.get('isdraft', False) 
```

如果在字典中找不到 isdraft，而不是抛出错误，这会将 checkform 设置为 False （在缺少键的情况下的默认值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:03:56.410

使用表单的全部意义在于它负责验证和清理，即将值转换为正确的数据类型。这就是为什么您应该访问`form.cleaned_data`而不是`reques.POST`，并且您应该在`if form.is_valid()`检查中进行。

**编辑**

我刚刚注意到您从未将 request.POST 传递给表单。所以`form.is_valid()`永远*不会*是真的。

请返回并阅读有关在视图中使用表单的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:05:11.093

也许您的表单根本无法验证。您是否检查过您的代码是否在 if`form.is_valid()`语句之后到达了这些行？如果他们这样做了，那么您所做的就是正确的，应该为您的新条目创建 db 行，尽管您可以使用
`Post.objects.create(....)`，这将消除调用方法的需要`save()`。

不过有几点：

*   而不是检查`request.POST`，检查`request.method == 'POST'`，因为可能有一个帖子有一个空的 POST 字典（如果没有提交任何参数），在这种情况下`request.POST`无法提供正确的检查。
    有关更多信息，请参阅文档：[request.POST](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST)

*   而不是使用`request.POST['var_name']`，使用`request.POST.get('var_name', 'default_value')`，因为这样做`request.POST['var_name']`可能会导致一些异常（例如在未提供参数的情况下，例如您的 checkform 变量发生的情况）

*   尝试通过 form.cleaned_data 访问这些变量

最后，你最后不需要 else 语句，只需使用缩进即可：)

# mysql - MYSQL 问题从单独的表中选择和排序

> ID：12028954
> 
> 赞同：0
> 
> 时间：2012-08-19T18:35:04.233
> 
> 标签：mysql, select, join

我很难根据我的需要组装正确的 sql 语句来列出和排序数据。下面是我需要从中选择数据的两个表的结构。

对于 users 表中的每个用户，我需要从 users_nfo 表中列出 id、name 和 key[a] 和 key[b]。

```
Table users: 
+----+------+
| id | name |
+----+------+
| 1  | aa   |
| 2  | bb   |
| 3  | cc   |
| 4  | dd   |
| 5  | ee   |
+----+------+

Table users_nfo:
+----+-----+-----+-------+
| id | uid | key | value |
+----+-----+-----+-------+
| 1  | 1   | a   | 22    |
| 2  | 1   | b   | 47    |
| 3  | 2   | a   | 38    |
| 4  | 2   | b   | 16    |
| 5  | 3   | a   | 27    |
| 6  | 3   | b   | 67    |
| 7  | 4   | a   | 75    |
| 8  | 4   | b   | 67    |
| 9  | 5   | a   | 63    |
| 10 | 5   | b   | 67    |
+----+-----+-----+-------+ 
```

结果应该与此类似

```
Array result: 
+----+------+---+---+
| id | name | a | b |
+----+------+---+---+
| 1  | aa   |22 |47 |
| 2  | bb   |38 |16 |
| 3  | cc   |27 |67 |
| 4  | dd   |75 |67 |
| 5  | ee   |63 |67 |
+----+------+---+---+ 
```

此外，我需要能够按任何列键排序，例如按 b 排序 asc。

帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:41:19.480

诀窍是将 users_nfo (sic) 表连接两次，并`key`在连接条件中包含该列。像这样：

```
SELECT u.ID, u.name, n1.value, n2.value from USERS u
JOIN users_nfo n1
ON u.id = n1.id AND n1.key = 'a'
JOIN users_nfo n2
ON u.id = n2.id AND n1.key = 'b'
ORDER BY n2.value ASC 
```

# c++ - setDisplayFrame 导致 cocos2d-x 崩溃

> ID：12028958
> 
> 赞同：0
> 
> 时间：2012-08-19T18:35:47.723
> 
> 标签：c++, opengl-es, cocos2d-x

在我的 CCLayer 的 init 函数中，我有以下代码：

```
CCTexture2D *tex = CCTextureCache::sharedTextureCache()->addImage("img/menu/chest.png");
CCSprite *spr = new CCSprite();
spr->setDisplayFrame(CCSpriteFrame::create(tex, CCRectMake(0, 0, 5, 5)));
spr->setPosition(ccp(470, 90));
this->addChild(spr); 
```

但是，当我运行它时，我在“spr->setDisplayFrame”行上遇到了访问冲突。为什么我会遇到此访问冲突，我该如何解决？

# content-management-system - 复合 C1 页面无法保存

> ID：12028959
> 
> 赞同：1
> 
> 时间：2012-08-19T18:35:54.357
> 
> 标签：content-management-system, c1-cms

我在 Composite C1 中保存页面时遇到问题。它工作了很长时间，我不记得在 Composite 中安装了任何新东西。现在，当我在经常进行更改的页面上单击保存并发布时，它会弹出一条消息，提示“保存资源？ - '页面名称'已被修改。保存更改？” 我单击是，但保存和发布按钮一直处于活动状态。它不会保存我的更改。似乎 10 次中有 1 次或我可以保存的东西，但大多数时候它失败了。这可能是我的托管问题吗？如果是这样，那会是什么？我可以在某处看到日志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T00:33:58.467

其中一个选项卡包含一个需要值的字段。如果您打开该选项卡，您应该会看到其中一个字段具有“缺少值”警报，并用红色标记。尝试通过标签来查看是否是这种情况。

Composite v3.2 中的一个错误是包含具有验证错误（如“缺失值”）的字段的选项卡没有在视觉上突出显示。通常，当您按下保存时，选项卡上会显示一个红色警报图标，并提示您打开此选项卡。

# c++ - c ++中的前缀递归表示法

> ID：12028960
> 
> 赞同：0
> 
> 时间：2012-08-19T18:36:07.250
> 
> 标签：c++, parsing, expression, evaluation

我一直在寻找用波兰语前缀表示法评估表达式的递归解决方案，但没有找到，但我找到了伪代码，我想将它翻译成 C++，但这很难。我写了大写字母，但我不知道该怎么做。请纠正我，我是 java 人，对我来说 C++ 是一团糟，但无能为力。

```
int preEval(stack<string> stos){
  string el = "";
  if(stos.empty()){
    return 0;
  }else if(stos.top() IS VALUE){
    string el = stos.top();
    stos.pop();
    return atoi(el.c_str());
  }else if(stos.top() IS OPERATOR){
    int x = preEval(stos);
    int y = preEval(stos);
    return x OPERATOR y;
  }
  return 0;
} 
```

**编辑**

当我有像 / 10 5 这样的表达式时，堆栈应该假设有元素（从顶部）/ 10 5，还是 5 10 / ？只是问，因为如果我想在 / 10 5 中使用它，我必须以某种方式向后读取字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:41:31.707

我认为，更好的解决方案是将工作分为两个阶段：词法分析和解析。

在词法分析阶段，您对每个标记进行分类以查看它是运算符（`+`、、`-`等）还是常量，或者可能是变量。然后将解析后的实体打包到包含类型和附加信息的结构中。

在代码呈现的解析阶段，您不是使用字符串，而是使用结构。查看结构，您可以轻松找出它的类型。（如果您选择构建从公共基础派生的结构层次结构，它可以是结构内的字段或结构的类型。）

实际上，Java 和 C++ 中的逻辑应该是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T19:44:51.927

如果你有这样的功能：

```
#include <assert.h>
#include <errno.h>
#include <stdlib.h>
#include <iostream>
#include <stack>
#include <string>

using std::stack;
using std::string;
using std::cerr;

enum Operator {
  operator_none,
  operator_plus,
  operator_minus
};

Operator tokenOperator(const string &token)
{
  if (token=="+") return operator_plus;
  if (token=="-") return operator_minus;
  return operator_none;
}

int applyOperator(Operator op,int x,int y)
{
  switch (op) {
    case operator_plus:  return x+y;
    case operator_minus: return x-y;
    case operator_none:
      break;
  }
  assert(false);
  return 0;
}

bool isValue(const string &token,int &output_value)
{
  char *end = 0;
  errno=0;
  output_value = strtol(token.c_str(),&end,10);
  if (errno!=0) return false;
  return *end=='\0';
}

bool isOperator(const string &token,Operator &output_operator)
{
  output_operator = tokenOperator(token);
  return output_operator!=operator_none;
} 
```

那么 preEval 可以这样实现：

```
int preEval(stack<string> &stos)
{
  if (stos.empty()) return 0;

  string el = stos.top();
  stos.pop();

  int value = 0;
  Operator op = operator_none;

  if (isValue(el,value)) return value;

  if (isOperator(el,op)) {
    int x = preEval(stos);
    int y = preEval(stos);
    return applyOperator(op,x,y);
  }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:05:00.830

```
#include <string>
#include <map>

using namespace std;

bool is_value(string s) {
    return s.find_first_not_of("0123456789") == string::npos;
}

int do_add(int x, int y) {
    return x + y;
}

int do_subtract(int x, int y) {
    return x - y;
}

// etc.

typedef int (*binary_op)(int, int);   // Give this function pointer type a nice name
map<string, binary_op> ops;

// Somewhere before the preEval() is ever called
ops["+"] = do_add;
ops["-"] = do_subtract;    // etc.

binary_op lookup_op(string s) {
    map<string, binary_op>::const_iterator it = ops.find(s);
    if (it != ops.end()) {
        return *it;
    } else {
        return NULL;
    }
} 
```

现在，不是单独测试令牌是否是运算符，然后再执行该运算符，而是使用单个函数调用来获取指向需要调用的运算符函数的指针（如果令牌是运算符），否则为 NULL。IE：

```
}else if(stos.top() IS OPERATOR){
    int x = preEval(stos);
    int y = preEval(stos);
    return x OPERATOR y;
} 
```

变成

```
} else {
    binary_op op = lookup_op(stos.top());
    if (binary_op != NULL) {
        stos.pop();   // This fixes the bug I mentioned in my top comment
        int x = preEval(stos);
        int y = preEval(stos);
        return op(x, y);
    } else {
        syntax_error();
    }
} 
```

# iphone - 如何在使用 facebook-ios-sdk 的应用中实现聊天

> ID：12028964
> 
> 赞同：1
> 
> 时间：2012-08-19T18:36:45.760
> 
> 标签：iphone, objective-c, ios, chat, quickblox

我正在开发一个使用 facebook-ios-sdk 的 iphone 应用程序。为了聊天，我使用了 quickblox sdk。但它会导致 mac-o-linker 错误。还有其他 sdk fot 聊天吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:23:20.703

我知道你为什么会出现这个错误：QuickBlox iOS SDK & Facebook SDK - 他们都使用 SBJSON lib。解决方案 - 尝试从您的项目中删除 SBJSON（来自 Facebook SDK src）（同时删除所有使用 SBJSON 的#import 结构）并尝试构建您的项目。

希望本主题有助于解决此问题[http://community.quickblox.com/quickblox/topics/json_functions_not_available](http://community.quickblox.com/quickblox/topics/json_functions_not_available)

另外，请查看此项目 src [https://github.com/QuickBlox/ChattAR-ios](https://github.com/QuickBlox/ChattAR-ios) - 具有 Facebook API、位置、聊天和增强现实视图的项目。它使用 QuickBlox SDK 和 FB sdk。而且它们都运作良好。

# objective-c - Facebook iOS SDK 3.0 FBPlacePickerViewController 表与拉刷新

> ID：12028965
> 
> 赞同：4
> 
> 时间：2012-08-19T18:36:48.913
> 
> 标签：objective-c, ios, facebook, uitableview

我正在尝试在内部实现 Pull-To-Refresh，例如[https://github.com/samvermette/SVPullToRefresh](https://github.com/samvermette/SVPullToRefresh)`FBPlacePickerViewController` `tableView`。

不幸的是，Pull-To-Refresh 视图没有出现在`tableView`

```
@interface PlacePickerViewController : FBPlacePickerViewController 
```

```
 [self.tableView addPullToRefreshWithActionHandler:^{
            [self.tableView.pullToRefreshView performSelector:@selector(stopAnimating) withObject:nil afterDelay:2];
        }];

        [self.tableView addInfiniteScrollingWithActionHandler:^{
            NSLog(@"load more data");
        }]; 
```

有没有人试过这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:09:47.570

我没有使用 SVPullToRefresh 但我确实查看了代码并将其与我们正在使用的进行比较。我们有一个简单的子类，它包装了我们的 UITableView 所在的控制器，并添加了插入式 PTR 支持。SV实现似乎更容易使用

代码如下：

**PullToRefreshViewController.h**

```
//
//  PullRefreshTableViewController.h
//  Plancast
//
//  Created by Leah Culver on 7/2/10.
//  Copyright (c) 2010 Leah Culver
//
//  Permission is hereby granted, free of charge, to any person
//  obtaining a copy of this software and associated documentation
//  files (the "Software"), to deal in the Software without
//  restriction, including without limitation the rights to use,
//  copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the
//  Software is furnished to do so, subject to the following
//  conditions:
//
//  The above copyright notice and this permission notice shall be
//  included in all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//  OTHER DEALINGS IN THE SOFTWARE.
//

#import <UIKit/UIKit.h>

@interface PullRefreshTableViewController : UITableViewController <UIScrollViewDelegate> {
    UIView *refreshHeaderView;
    UILabel *refreshLabel;
    UIImageView *refreshArrow;
    UIActivityIndicatorView *refreshSpinner;
    BOOL isDragging;
    BOOL isLoading;
    NSString *textPull;
    NSString *textRelease;
    NSString *textLoading;
}

@property (nonatomic, retain) UIView *refreshHeaderView;
@property (nonatomic, retain) UILabel *refreshLabel;
@property (nonatomic, retain) UIImageView *refreshArrow;
@property (nonatomic, retain) UIActivityIndicatorView *refreshSpinner;
@property (nonatomic, copy) NSString *textPull;
@property (nonatomic, copy) NSString *textRelease;
@property (nonatomic, copy) NSString *textLoading;

- (void)setupStrings;
- (void)addPullToRefreshHeader;
- (void)startLoading;
- (void)stopLoading;
- (void)refresh;

@end 
```

**PullToRefreshViewController.m**

```
//
//  PullRefreshTableViewController.m
//  Plancast
//
//  Created by Leah Culver on 7/2/10.
//  Copyright (c) 2010 Leah Culver
//
//  Permission is hereby granted, free of charge, to any person
//  obtaining a copy of this software and associated documentation
//  files (the "Software"), to deal in the Software without
//  restriction, including without limitation the rights to use,
//  copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the
//  Software is furnished to do so, subject to the following
//  conditions:
//
//  The above copyright notice and this permission notice shall be
//  included in all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//  OTHER DEALINGS IN THE SOFTWARE.
//

#import <QuartzCore/QuartzCore.h>
#import "PullRefreshTableViewController.h"

#define REFRESH_HEADER_HEIGHT 52.0f

@implementation PullRefreshTableViewController

@synthesize textPull, textRelease, textLoading, refreshHeaderView, refreshLabel, refreshArrow, refreshSpinner;

- (id)initWithStyle:(UITableViewStyle)style {
  self = [super initWithStyle:style];
  if (self != nil) {
    [self setupStrings];
  }
  return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
  self = [super initWithCoder:aDecoder];
  if (self != nil) {
    [self setupStrings];
  }
  return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self != nil) {
    [self setupStrings];
  }
  return self;
}

- (void)viewDidLoad {
  [super viewDidLoad];
  [self addPullToRefreshHeader];
}

- (void)setupStrings{
  textPull = [[NSString alloc] initWithString:@"Pull down to refresh..."];
  textRelease = [[NSString alloc] initWithString:@"Release to refresh..."];
  textLoading = [[NSString alloc] initWithString:@"Loading..."];
}

- (void)addPullToRefreshHeader {
    refreshHeaderView = [[UIView alloc] initWithFrame:CGRectMake((self.view.bounds.size.width - 320)/2, 0 - REFRESH_HEADER_HEIGHT, 320, REFRESH_HEADER_HEIGHT)];
    refreshHeaderView.backgroundColor = [UIColor clearColor];
    //[refreshHeaderView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

    refreshLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, REFRESH_HEADER_HEIGHT)];
    refreshLabel.backgroundColor = [UIColor clearColor];
    refreshLabel.font = [UIFont boldSystemFontOfSize:12.0];
    refreshLabel.textAlignment = UITextAlignmentCenter;
    refreshLabel.textColor = [UIColor whiteColor];

    refreshArrow = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrow.png"]];
    refreshArrow.frame = CGRectMake(floorf((REFRESH_HEADER_HEIGHT - 27) / 2),
                                    (floorf(REFRESH_HEADER_HEIGHT - 44) / 2),
                                    27, 44);

    refreshSpinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    refreshSpinner.frame = CGRectMake(floorf(floorf(REFRESH_HEADER_HEIGHT - 20) / 2), floorf((REFRESH_HEADER_HEIGHT - 20) / 2), 20, 20);
    refreshSpinner.hidesWhenStopped = YES;

    [refreshHeaderView addSubview:refreshLabel];
    [refreshHeaderView addSubview:refreshArrow];
    [refreshHeaderView addSubview:refreshSpinner];
    [self._tableView addSubview:refreshHeaderView];
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    if (isLoading) return;
    isDragging = YES;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (isLoading) {
        // Update the content inset, good for section headers
        if (scrollView.contentOffset.y > 0)
            self._tableView.contentInset = UIEdgeInsetsZero;
        else if (scrollView.contentOffset.y >= -REFRESH_HEADER_HEIGHT)
            self._tableView.contentInset = UIEdgeInsetsMake(-scrollView.contentOffset.y, 0, 0, 0);
    } else if (isDragging && scrollView.contentOffset.y < 0) {
        // Update the arrow direction and label
        [UIView beginAnimations:nil context:NULL];
        if (scrollView.contentOffset.y < -REFRESH_HEADER_HEIGHT) {
            // User is scrolling above the header
            refreshLabel.text = self.textRelease;
            [refreshArrow layer].transform = CATransform3DMakeRotation(M_PI, 0, 0, 1);
        } else { // User is scrolling somewhere within the header
            refreshLabel.text = self.textPull;
            [refreshArrow layer].transform = CATransform3DMakeRotation(M_PI * 2, 0, 0, 1);
        }
        [UIView commitAnimations];
    }
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    if (isLoading) return;
    isDragging = NO;
    if (scrollView.contentOffset.y <= -REFRESH_HEADER_HEIGHT) {
        // Released above the header
        [self startLoading];
    }
}

- (void)startLoading {
    isLoading = YES;

    // Show the header
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    self._tableView.contentInset = UIEdgeInsetsMake(REFRESH_HEADER_HEIGHT, 0, 0, 0);
    refreshLabel.text = self.textLoading;
    refreshArrow.hidden = YES;
    [refreshSpinner startAnimating];
    [UIView commitAnimations];

    // Refresh action!
    [self refresh];
}

- (void)stopLoading {
    isLoading = NO;

    // Hide the header
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationDidStopSelector:@selector(stopLoadingComplete:finished:context:)];
    self._tableView.contentInset = UIEdgeInsetsZero;
    [refreshArrow layer].transform = CATransform3DMakeRotation(M_PI * 2, 0, 0, 1);
    [UIView commitAnimations];
}

- (void)stopLoadingComplete:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
    // Reset the header
    refreshLabel.text = self.textPull;
    refreshArrow.hidden = NO;
    [refreshSpinner stopAnimating];
}

- (void)refresh {
    // This is just a demo. Override this method with your custom reload action.
    // Don't forget to call stopLoading at the end.
    [self performSelector:@selector(stopLoading) withObject:nil afterDelay:2.0];
}

- (void)dealloc {
    [refreshHeaderView release];
    [refreshLabel release];
    [refreshArrow release];
    [refreshSpinner release];
    [textPull release];
    [textRelease release];
    [textLoading release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:51:34.207

尝试替代方案：[ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)。设置和使用非常简单。

# c - 在 GDB 中编写 NSPrintForDebugger 以在 C 中打印对象

> ID：12028966
> 
> 赞同：1
> 
> 时间：2012-08-19T18:36:49.243
> 
> 标签：c, debugging, gdb

当使用 GDB（在 Gentoo Linux 上使用文本接口、TTY 和 SSH）调试 C 代码时，我想打印对象中的数据。当我尝试使用`print-object <objectname>`时，我收到消息

> 此表达式的评估要求程序具有函数“_NSPrintForDebugger”

我找不到任何关于如何创建这样一个函数的文档或示例（是我，还是 Linux 文档的示例非常短？）。*我想要一个可以为 gdb 建模的 NSPrintForDebugger 函数示例。*请注意，我是 C、Linux、MPI、emacs 和 gdb 的新手。

为了让这有点困难，我找不到我要打印的所有对象的定义。

如果它有助于举个例子，我想要的一些对象`print-object`是：

1.  用户数据

    typedef struct { realtype dx, hdcoef, hacoef; int npes, my_pe MPI_Comm comm; 实型 z[100]; } *用户数据; 用户数据数据；

2.  N_Vector（SUNDIALS 的一部分，可能有[不同的定义](https://computation.llnl.gov/casc/sundials/documentation/kin_guide/node7.html)）。

3.  void *cvode_mem（任何指向 void 的指针）
4.  realtype（不同大小的浮点数，也是 SUNDIALS 的一部分）
5.  MPI_Comm（可能只是一个整数）

PS我注意到，例如，`p *data`显示了很多信息。但我想要更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:46:04.197

`NSPrintForDebugger`GDB`print-object`命令调用的函数是 Objective-C 运行时的一部分。由于您没有使用 Objective-C，因此请忽略它。

# regex - 用 bash 查找和布尔匹配编写正则表达式

> ID：12028967
> 
> 赞同：0
> 
> 时间：2012-08-19T18:36:59.107
> 
> 标签：regex, bash

我完全不确定为什么这不起作用。这里的其他帖子建议它应该这样做。我只想在 find 上使用正则表达式来查找与***_* __orig.png**和***_* __DIFF.png**匹配的所有文件。这将找到第一个：

```
find . -type f -regex '.*_____orig\.png' 
```

但这什么也没找到：

```
find . -type f -regex '.*_____(orig|DIFF)\.png' 
```

用正则表达式匹配两者的正确方法是什么？（是的，我知道我可以使用 - 或拥有更长且更难维护的命令......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:41:50.727

您需要同时转义括号和管道，使用：

```
find . -type f -regex '.*_____\(orig\|DIFF\)\.png' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:27:27.100

GNU find 的 -regex 默认使用 emacs 风格，我不是很熟悉。您可以更改与 -regextype 一起使用的正则表达式。使用`-regextype posix-extended`您当前的 -regex 应该可以工作。

可移植的方法是使用两个 -name 运算符。

```
find . -type f \( -name "*_____orig.png" -o -name "*_____DIFF.png" \) -print 
```

或者，对于 bash 4.0 或更高版本，您可以使用 globstar 和 extglob 而不是 find

```
shopt -s globstar extglob
for file in ./**/*_____@(orig|DIFF).png; do
    echo "$file"
done 
```

# php - 如何使用 PHP 解析网站？

> ID：12028972
> 
> 赞同：2
> 
> 时间：2012-08-19T18:38:12.987
> 
> 标签：php, parsing, dom

我想制作一个网站，就像我的其他网站出现在互联网上一样。

我没有足够的内容。所以我想从另一个新闻网站获取内容（当然，我获得了从他们的网站复制他们的内容的许可）。

为此，我使用了[Simple HTML DOM](http://simplehtmldom.sourceforge.net)，它在我的其他站点上进展得非常好，但是当我在发布站点上应用我的脚本时，它不起作用（什么也不输出）。

这是我想从中获取数据的链接：[hesspress.com](http://hesspress.com)。

**代码：**

```
require_once 'simple_html_dom.php';
$lien='http://www.hesspress.com';
$html=new simple_html_dom();
$html->load_file($lien);
$k=$html->find('a',0)->href;
print_r($k); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:46:53.833

这是我将使用的，您可以根据自己的目的对其进行修改。

它使用[内置的 PHP DOM](http://php.net/manual/en/book.dom.php)。

**代码：**

```
<?php
$url = 'http://acid3.acidtests.org';
$handle = curl_init($url);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
$html = curl_exec($handle);
libxml_use_internal_errors(true); // Prevent HTML errors from displaying
$doc = new DOMDocument();
$doc->loadHTML($html);
$link = $doc->getElementsByTagName('a')->item(0);
echo 'Link text: ' . $link->nodeValue;
echo '<br />';
echo 'Link URL: ' . $link->getAttribute('href');
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T21:32:40.727

你不能在你的网站上使用你的代码 如果你使用这个链接 [http://php.net/manual/en/book.dom.php你可以做到](http://php.net/manual/en/book.dom.php)

# ios - NSDictionary Predicate 过滤子对象

> ID：12028976
> 
> 赞同：0
> 
> 时间：2012-08-19T18:38:44.560
> 
> 标签：ios, nsdictionary, nspredicate

我正在尝试过滤来自 Facebook 的 API 的响应，JSON 如下所示：

```
{ 
 "Data": [
  {  
    "first_name" : "Joe",
    "last_name" : "bloggs",
    "uuid" : "123"
  },
  {  
    "first_name" : "johnny",
    "last_name" : "appleseed",
    "uuid" : "321"
  }
 ]
} 
```

我将它加载到一个 NSDictionary 中，像访问它一样`[[friendDictionary objectForKey:@"data"] allObjects]`

我现在正在尝试根据`first_name`和`last_name`基于有人在文本字段中输入名称的时间进行过滤。这就是我所拥有的，但它的失败非常可怕：

```
 NSPredicate *filter = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"ANY.first_name beginswith[c] %@ OR ANY.last_name beginswith[c] %@", friendField.text, friendField.text]];
  NSLog(@"%@", [[[friendDictionary objectForKey:@"data"] allObjects] filteredArrayUsingPredicate:filter]); 
```

非常感谢任何帮助，谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:48:06.640

你想得太复杂了。

*   `stringWithFormat`在`predicateWithFormat`这里没有意义。
*   不需要谓词中的“ANY”聚合，它与 Core Data 对象中的多对多关系一起使用。
*   `[friendDictionary objectForKey:@"Data"]`返回一个数组，`allObjects`这里是错误的。
*   关键是“数据”，而不是“数据”。

这给了

```
NSPredicate *filter = [NSPredicate predicateWithFormat:@"first_name beginswith[c] %@ OR last_name beginswith[c] %@",
    friendField.text, friendField.text];
NSArray *filteredArray = [[friendDictionary objectForKey:@"Data"] filteredArrayUsingPredicate:filter]; 
```

# c# - 在 CellTemplate 中为 ListView 创建触发器？（一般与模板混淆）

> ID：12028977
> 
> 赞同：4
> 
> 时间：2012-08-19T18:39:01.877
> 
> 标签：c#, .net, wpf, xaml

当我深入研究 WPF 时，我开始有点困惑，我觉得这个示例将有助于更好地理解事物。我的要求是这样的：我有一个 ListView 使用绑定到普通 .NET 对象的集合，我想做两件事：

1）如果值为某个值，则突出显示 ListView 中一行的单元格 - 我想我可以为此使用 GridViewColumn.CellTemplate 并使用 DataTrigger 创建一个 DataTemplate，但是我在这里变得困惑 - 是 DataType DataTemplate 应该是 ListViewItem 还是应该是底层对象本身的类型？

在 WPF 中，这对我来说是一个普遍的困惑点。不知道何时将其键入到底层集合对象（我在示例中看到）与列表项类型本身。这是我的第一次尝试：

```
<GridViewColumn Header="Position">
    <GridViewColumn.CellTemplate>
        <DataTemplate DataType="{x:Type ListViewItem}">
            <TextBlock Text="{Binding Path=PositionCode}"></TextBlock>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding PositionCode}" Value="QB">
                    <Setter Property="Foreground" Value="Blue" />
                </DataTrigger>
                <DataTrigger Binding="{Binding PositionCode}" Value="RB">
                    <Setter Property="Foreground" Value="Green" />
                </DataTrigger>
                <DataTrigger Binding="{Binding PositionCode}" Value="WR">
                    <Setter Property="Foreground" Value="Red" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

但是，这并不奇怪会导致错误消息

```
Cannot find the Template Property 'Background' on the type 'System.Windows.Controls.ContentPresenter' 
```

2）类似于 1）我想在另一个标准上有一个类似的规则我想突出显示整行，而不是仅仅基于类似 DataTrigger 属性的单元格，但同时我希望单元格突出显示优先于行突出显示.

我将如何做到这一点以及我需要覆盖什么模板才能做到这一点？我猜它是 ListView.ItemTemplate 但数据类型是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:57:37.273

试试这个：

```
<GridViewColumn Header="Position">
    <GridViewColumn.CellTemplate>
        <DataTemplate DataType="{x:Type ListViewItem}">
            <TextBlock Name="TextBlockName" Text="{Binding Path=PositionCode}"></TextBlock>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding PositionCode}" Value="QB">
                    <Setter TargetName="TextBlockName" Property="Foreground" Value="Blue" />
                </DataTrigger>
                <DataTrigger Binding="{Binding PositionCode}" Value="RB">
                    <Setter TargetName="TextBlockName" Property="Foreground" Value="Green" />
                </DataTrigger>
                <DataTrigger Binding="{Binding PositionCode}" Value="WR">
                    <Setter TargetName="TextBlockName" Property="Foreground" Value="Red" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T20:29:45.880

我认为 dvvrd 的回答解决了您的第一个问题。对于另一部分（构建行样式），您可以使用*ItemContainerStyleSelector*。

```
<ListView ItemContainerStyleSelector="{StaticResource Selector}" ... 
```

我写了一个这样的简单实现：

```
public class RowStyleSelector : StyleSelector
{
    public override System.Windows.Style SelectStyle(object item, System.Windows.DependencyObject container)
    {
        var i = (item as Item);
        if (i.I == 0) return (Style)App.Current.Resources["Selected"];
        else return (Style)App.Current.Resources["Normal"];
    }
} 
```

然后将不同的样式以及选择器引用一起放入 App.xaml：

```
<Application.Resources>
    <res:RowStyleSelector x:Key="Selector" />
    <Style x:Key="Selected" TargetType="ListViewItem">
        <Setter Property="Background" Value="DarkGray" />
    </Style>
    <Style x:Key="Normal" TargetType="ListViewItem">
        <Setter Property="Background" Value="LightBlue" />
    </Style>
</Application.Resources> 
```

这种方法根据模型中的标准（我的示例中的*Item*类）有效地设置背景颜色，并且突出显示的列仍然有效。

# arrays - scala中的数组集

> ID：12028982
> 
> 赞同：0
> 
> 时间：2012-08-19T18:39:18.887
> 
> 标签：arrays, scala, set

我在 scala 中有代码：

```
 val graph = new Array [Set[Int]] (n)

 def addedge(i:Int,j:Int)
 {
     graph(i)+=j
 } 
```

是什么`graph(i)+=j`意思？任何人都可以将它翻译成任何其他语言，如 c、c++ 或 java 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T18:41:59.820

`graph`是一个`Array`，就像在 C 或 Java 中一样。 `graph(i)`意思是“访问”的`ith`元素`graph`。中的每个元素`graph`都是s`Set`中的一个`Int`。`+=`on 方法将`Set`一个项目添加到`Set`. 因此`graph(i) += j`将数字添加`j`到`Set`存储的索引`i`中`graph`。

在 REPL 中尝试会显示以下行为：

```
scala> val graph = Array(Set(1,2), Set(2,3), Set(1))
graph: Array[scala.collection.immutable.Set[Int]] = Array(Set(1, 2), Set(2, 3), Set(1))

scala> graph(1) += 4

scala> graph
res0: Array[scala.collection.immutable.Set[Int]] = Array(Set(1, 2), Set(2, 3, 4), Set(1)) 
```

# python - 为什么在对象创建和对象保存时会发出“post_save”信号？

> ID：12028983
> 
> 赞同：0
> 
> 时间：2012-08-19T18:39:30.397
> 
> 标签：python, django, django-models, signals

我遇到了`post_save`两次被调用的问题，我花了很多时间来弄清楚前面提到的导入。我确认导入只发生一次，不存在多次注册的问题。此外，我`dispatch_uid`在信号注册中使用了一个唯一的，根据文档应该已经解决了这个问题。它没有。我更仔细地看了看，发现信号处理程序在 .create() 和 .save() 上都被调用了。为什么要创建？

我可以让它工作的唯一方法是依靠下面我的信号处理程序中的hack

```
created = False

    #Workaround to signal being emitted twice on create and save
    if 'created' in kwargs:
        if kwargs['created']:
            created=True

    #If signal is from object creation, return
    if created:
        return 
```

[这是对尽管 uid 被调用两次的 Django post save signal](https://stackoverflow.com/questions/12012887/django-post-save-signal-getting-called-twice-despite-uid/12013253#12013253)的后续问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:28:51.310

[因为“创造”是实例化加保存。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.create)

> **`create(**kwargs)`**
> 
> 一种创建对象并将其全部保存的便捷方法。因此：
> 
> ```
> p = Person.objects.create(first_name="Bruce", last_name="Springsteen") 
> ```
> 
> 和：
> 
> ```
> p = Person(first_name="Bruce", last_name="Springsteen")
> p.save(force_insert=True) 
> ```
> 
> 是等价的。

# c# - c# 从控制台读取/写入字节

> ID：12028986
> 
> 赞同：1
> 
> 时间：2012-08-19T18:39:49.743
> 
> 标签：c#, console, bytearray

我有一个`byte[]`数组，想把它写到 stdout: `Console.Out.Write(arr2str(arr))`。如何转换`byte[]`为字符串，从而`app.exe > arr.txt`达到预期效果？我只想使用管道将数组保存到文件中，但是编码会搞砸。

我稍后想从 stdin: 读取那个字节数组`app.exe < arr.txt`并得到同样的东西。

我该如何做这两件事：向/从 stdin/stdout 写入和读取字节数组？

编辑：

我正在阅读`string s = Console.In.ReadToEnd()`，然后`System.Text.Encoding.Default.GetBytes(s)`。我正在使用 将数组转换为字符串，但这在与,`System.Text.Encoding.Default.GetString(bytes)`一起使用时不起作用。“不起作用”我的意思是通过管道写入和读取不会返回相同的东西。`<``>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T18:58:19.617

如果您正在写入 Console.WriteLine，则需要将文本编码为可打印格式。如果要作为二进制文件输出到文件，***则不能***使用 Console.WriteLine

如果您仍需要输出到控制台，您需要使用[Console.OpenStandardOutput()](https://stackoverflow.com/questions/1562417/read-binary-data-from-console-in)打开原始流或调用[Convert.ToBase64String](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx)将字节数组转换为字符串。还有[Convert.FromBase64String](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string)从 base64 返回到字节数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T19:02:58.827

要处理二进制文件，您希望 Console.OpenStandardInput() 检索可以从中读取的 Stream。这已在 SO 的其他线程中进行了介绍，例如：[Read binary data from Console.In](https://stackoverflow.com/questions/1562417/read-binary-data-from-console-in)

# r - 在 R 中，如何将外部变量添加到 ARIMA 模型？

> ID：12028987
> 
> 赞同：0
> 
> 时间：2012-08-19T18:39:52.037
> 
> 标签：r, statistics

这里有谁知道我如何为 ARIMA 模型指定额外的外部变量？

就我而言，我正在尝试建立一个波动率模型，并且我想将平方收益添加到 ARCH 模型中。

我不使用 GARCH 模型的原因是，我只对波动率预测感兴趣，而 GARCH 模型会在收益上显示它们的误差，这不是我研究的主题。

我想添加一个外部变量并查看 R^2 和 p 值以查看系数是否具有统计显着性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T23:29:09.953

我知道这是一个非常古老的问题，但是对于像我这样想知道这个问题的人来说，您需要将 cbind 与 xreg 一起使用。

例如：Arima(X,order=c(3,1,3),xreg = cbind(ts1,ts2,ts3))

每个外部时间序列的长度应与原始时间序列相同。

# javascript - Javascript 内存分配

> ID：12028989
> 
> 赞同：2
> 
> 时间：2012-08-19T18:40:30.930
> 
> 标签：javascript, memory, allocation

> **可能重复：**
> [如何为脚本语言中的变量分配内存？](https://stackoverflow.com/questions/582134/how-is-the-memory-allocation-done-for-variables-in-scripting-languages)

在javascript中，由于它是一种松散类型的语言，所以当我编写代码时：

```
var foo; 
```

正是在这一步之后分配了多少内存块。我din分配任何东西给它，当我输入

```
var foo = 10; 
```

和

```
var foo = "this is random" 
```

在这两种情况下，分配了多少字节的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:51:46.960

我不确定具体细节，这取决于实现，但这是我的猜测。

简单地做`var foo;`不会创建任何新对象。但是， foo 可能需要添加到已声明变量的字典中，在这种情况下为字符串`foo`和可能的元数据分配空间，假设它没有被实习。

当您这样做时`var foo = 10;`，`var foo = "this is random"`它会分别创建字符串或整数变量，这通常会占用内存。然而，小整数和常量字符串几乎可以肯定是实习的。另外，JIT 可能会优化对普通机器整数的数字引用，在这种情况下它根本不会占用任何额外的内存。

无论如何，很难对具有不同实现的高级语言的性能进行具体说明，尤其是在涉及 JIT 时。

# javascript - 将鼠标悬停在链接上时始终更改背景图像

> ID：12028990
> 
> 赞同：-2
> 
> 时间：2012-08-19T18:40:47.130
> 
> 标签：javascript, css

是否可以有一排链接，当鼠标悬停在其中一个链接上时，背景会淡入为该链接设置的背景图像。

假设有 5 个链接 [Coke][Burger][Cow][Chicken][Dog]

当您加载网页时，只有原始背景，但是当您将鼠标悬停在 [Chicken] 上时，背景图像会变为鸡，然后如果您将鼠标悬停在 [Coke] 上，则会有可口可乐标志作为背景。

我想你应该已经明白了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:46:12.490

好吧，我会通过 css 使用 ids ( `#lnkCoke, #lnkBurger, etc.`) 和`:hover`伪类来做到这一点

但如果你想通过 javascript 来实现，我会使用数据属性 ( `<a href="..." data-altBG="...">Coke</a>`) 和鼠标事件 ( `onmouseover and onmouseout`) 来更改背景图像

# java - 使用超时处理程序从 PHP 调用 Java

> ID：12028993
> 
> 赞同：0
> 
> 时间：2012-08-19T18:40:54.910
> 
> 标签：java, php, unix, timeout

问题：我正在通过用户提交的 PHP 运行 java 文件。java 文件有可能导致无限循环。如何在 php 执行过程中处理这个问题？

这是我的代码：

```
$proc = proc_open($javaCmd, array(array("pipe", "r"), array("pipe", "w"), array("pipe", "w")), $pipes);
// Check status here logic ?
proc_close($proc); 
```

它目前正在等待进程完成，但我希望它在 30 秒或一分钟后超时。我试过[`set_time_limit(x)`](http://php.net/manual/en/function.set-time-limit.php)了，但这并没有终止`java.exe`。

我的问题是，我是否可以在 X 秒后检查 java.exe 进程的状态，如果它仍在运行则终止？或者，我是否需要在 java 中使用[超时功能](https://stackoverflow.com/questions/808276/how-to-add-a-timeout-value-when-using-javas-runtime-exec)（即有一个在线程上执行用户提交的类的主类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:01:34.237

是的，这是可能的。在这方面，我认为 java 进程与任何其他进程没有什么不同。请参阅这些链接以获取带有 timeout 的[unix exec 和带有 timeout](http://www.php.net/manual/en/function.exec.php#89716)的[windows exec](http://www.php.net/manual/en/function.exec.php#59428)。

这段代码不是我写的，但这里是复制粘贴的，以防原件从互联网上消失：

对于 unix：

```
<?php
  function PsExecute($command, $timeout = 60, $sleep = 2) {
        // First, execute the process, get the process ID

        $pid = PsExec($command);

        if( $pid === false )
            return false;

        $cur = 0;
        // Second, loop for $timeout seconds checking if process is running
        while( $cur < $timeout ) {
            sleep($sleep);
            $cur += $sleep;
            // If process is no longer running, return true;

           echo "\n ---- $cur ------ \n";

            if( !PsExists($pid) )
                return true; // Process must have exited, success!
        }

        // If process is still running after timeout, kill the process and return false
        PsKill($pid);
        return false;
    }

    function PsExec($commandJob) {

        $command = $commandJob.' > /dev/null 2>&1 & echo $!';
        exec($command ,$op);
        $pid = (int)$op[0];

        if($pid!="") return $pid;

        return false;
    }

    function PsExists($pid) {

        exec("ps ax | grep $pid 2>&1", $output);

        while( list(,$row) = each($output) ) {

                $row_array = explode(" ", $row);
                $check_pid = $row_array[0];

                if($pid == $check_pid) {
                        return true;
                }

        }

        return false;
    }

    function PsKill($pid) {
        exec("kill -9 $pid", $output);
    } 
```

对于窗户：

```
<?php
// pstools.inc.php

    function PsExecute($command, $timeout = 60, $sleep = 2) {
        // First, execute the process, get the process ID
        $pid = PsExec($command);

        if( $pid === false )
            return false;

        $cur = 0;
        // Second, loop for $timeout seconds checking if process is running
        while( $cur < $timeout ) {
            sleep($sleep);
            $cur += $sleep;
            // If process is no longer running, return true;
            if( !PsExists($pid) )
                return true; // Process must have exited, success!
        }

        // If process is still running after timeout, kill the process and return false
        PsKill($pid);
        return false;
    }

    function PsExec($command) {
        exec( dirname(__FILE__). "\\psexec.exe -s -d $command  2>&1", $output);

        while( list(,$row) = each($output) ) {
            $found = stripos($row, 'with process ID ');
            if( $found )
                return substr($row, $found, strlen($row)-$found-strlen('with process ID ')-1); // chop off last character '.' from line
        }

        return false;
    }

    function PsExists($pid) {
        exec( dirname(__FILE__). "\\pslist.exe $pid 2>&1", $output);

        while( list(,$row) = each($output) ) {
            $found = stristr($row, "process $pid was not found");
            if( $found !== false )
                return false;
        }

        return true;
    }

    function PsKill($pid) {
        exec( dirname(__FILE__). "\\pskill.exe $pid", $output);
    } 
```

# linq - emacs F# 模式 REPL :: 使用 Linq

> ID：12028995
> 
> 赞同：0
> 
> 时间：2012-08-19T18:40:56.903
> 
> 标签：linq, emacs, f#

我在 Ubuntu 中使用[mono并按照](http://www.mono-project.com/Main_Page)[此处](http://functional-variations.net/crossplatform/)的说明安装了 F# 。我还[为 emacs 安装了 fsharp 模式](http://laurent.le-brun.eu/site/index.php/2010/06/25/58-new-fsharp-mode-for-emacs)，因此能够测试和编译简单的 F# 程序（无论是在**emacs F# 模式 REPL**上还是生成我在单声道下运行的可执行文件）。

然而，声明：

```
open System.Xml.Linq 
```

在**emacs F# 模式 REPL**和从 bash shell调用**fsharpc时都失败并出现相同的错误：**

```
error FS0039: The namespace 'Linq' is not defined 
```

我在 SO for C# 中找到了一个[类似的帖子](https://stackoverflow.com/questions/4088186/using-system-xml-linq-with-mono-command-line-compilers)，尽管使用“-r：System.Xml.Linq”的建议确实适用于从 shell 编译：

```
fsharpc -r:System.Xml.Linq.dll parseemails.fs 
```

...我仍然无法弄清楚如何使 Linq 命名空间可用于 emacs F# 模式 REPL，以便我可以将它与 Cc Ce 评估一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T01:49:14.560

正如 John 在评论中提到的，如果您想在 F# 交互中引用程序集（REPL 在 emacs 模式下运行），您可以使用：

```
#r "System.Xml.Linq.dll" 
```

编译代码时，此命令无效，必须添加命令行参数`-r:System.Xml.Linq.dll`。如果你想结合两者（交互运行并编译相同的代码），你可以使用条件编译：

```
#if INTERACTIVE
#r "System.Xml.Linq.dll"
#endif 
```

该符号`INTERACTIVE`是在 REPL 模式下自动定义的，因此如果您选择并运行这三行，它应该引用程序集（但它不会在编译时破坏您的代码）。