# StackOverflow 问答 11649000-11649999

# objective-c - 同时在两台计算机上处 理 Core Data 存储（或确保它仅在一台计算机上同时打开）

> ID：11649000
> 
> 赞同：0
> 
> 时间：2012-07-25T11:47:09.380
> 
> 标签：objective-c, cocoa, core-data

我可以以某种方式在两台具有相同核心数据存储的计算机上工作吗？我认为这可能会导致保存过程中出现一些不兼容问题。处理这个问题的最佳方法是什么？

另外，假设我想避免不得不担心这个的痛苦。我如何确保只有一台计算机可以同时在特定的 Core Data 存储上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:52:39.723

顺便说一句，您可以使用 Apple 自己的一项核心技术在同一家商店的多台设备上工作。它被称为**iCloud**。

当然，从技术上讲，设备上有多个商店副本以及 iCloud 中的日志，但效果是一样的。

幸运的是，如果可能的话，iCloud 同步包括一些巧妙的机制来合并多个版本（如果没有，你必须决定优先选择哪一个）。

*唯一需要注意的是：根据我的经验，在使用已发布的信息进行实施时，带有 Core Data 的 iCloud 远非可靠。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:49:30.883

根据我自己使用 Core Data 的经验，我不认为该框架是为在多用户（或分布式）环境中使用而设计的。我在 CocoaBuilder 上发现[了这篇有趣的帖子](http://www.cocoabuilder.com/archive/cocoa/319446-core-data-multiuser.html)，它可能会帮助您形成对此事的看法。它的日期是 2012 年 7 月，所以它是最近的，还讨论了一些有趣的其他可用技术。

# html - 如何以 SWF 格式创建播放和暂停？

> ID：11649001
> 
> 赞同：1
> 
> 时间：2012-07-25T11:47:31.997
> 
> 标签：html, flash, actionscript

我是Flash的初学者。我有一个 SWF 格式，我必须像视频一样将它保存在我的 html 页面中。我需要该视频中的播放和暂停按钮。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:56:30.687

SWF 文件是基于时间线的，即使您将电影从 AVI 转换为 SWF，通常也存在某种关键帧。您的转换程序将在软件内提供此属性

控制 SWF 电影更简单的方法是将 FLV 嵌入到 SWF 中，而不是手动添加关键帧。然后您可以使用时间轴控件从父 SWF 进行控制

如果您只是在 Flash 中播放电影文件，使用“net-stream”可能会更好，这将使您还可以使用提示点完全控制电影文件，这还有其他优点....更快的加载时间，因为它允许流式传输/缓冲，所以不必先下载整个文件。使用提示点与关键帧具有相同的能力。

所以你的暂停和播放按钮取决于你如何实现你的视频

# google-maps - Coldfusion 谷歌地图和 Jquery

> ID：11649006
> 
> 赞同：1
> 
> 时间：2012-07-25T11:47:44.340
> 
> 标签：google-maps, coldfusion, maps

我有一个谷歌地图，其中有来自coldfusion查询的动态标记和信息框，我希望能够从页面上的链接打开信息窗口，我正在使用jquery，但它不起作用，什么是最好的方法来做到这一点。

我的脚本：

```
var map;

var lastinfowindow;

function initialize() {

    // Create an array of styles.
  var styles = [
    {
      stylers: [
        { hue: "#0b9cc1" },
        { saturation: -20 }
      ]
    },{
      featureType: "road",
      elementType: "geometry",
      stylers: [
        { lightness: 100 },
        { visibility: "simplified" }
      ]
    },{
      featureType: "administrative.country",
      elementType: "labels",
      stylers: [
        { visibility: "on" }
      ]
    },

    { featureType: "water", 
     elementType: "geometry", 
    stylers: [ { visibility: "on" }, { lightness: -10 }] },
    { featureType: "poi", 
    stylers: [ { visibility: "on" } ] }

  ];

  // Create a new StyledMapType object, passing it the array of styles,
  // as well as the name to be displayed on the map type control.
  var styledMap = new google.maps.StyledMapType(styles,
    {name: "Styled Map"}); 

    var latlng = new google.maps.LatLng(40, 13);
    var mapOptions = {
        zoom: 4,
        center: latlng,
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

    var image = 'sp-mark.png';

   LatLng = new google.maps.LatLng ('23.00593', '120.65287');
            var marker38 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 1 - 38',
                icon:image
            });

            var infowindow38 = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 1</h3><p>Location: Tiawan</p>"
            });

            google.maps.event.addListener(marker38, 'click', function() {
             infowindow38.open(map,marker38);

            marker38.gig_id = 38;
            marker38.infowindow = infowindow38;
            markers[markers.length] = marker38;
            });

   LatLng = new google.maps.LatLng ('52.19173', '-1.7083');
            var marker30 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 2 - 30',
                icon:image
            });

            var infowindow30 = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 2</h3><p>Location: UK</p>"
            });

            google.maps.event.addListener(marker30, 'click', function() {
             infowindow30.open(map,marker30);

            marker30.gig_id = 30;
            marker30.infowindow = infowindow30;
            markers[markers.length] = marker30;
            });

   LatLng = new google.maps.LatLng ('38.98083', '1.30056');
            var marker32 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 3 - 32',
                icon:image
            });

            var infowindow32 = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 3</h3><p>Location: Ibiza</p>"
            });

            google.maps.event.addListener(marker32, 'click', function() {
             infowindow32.open(map,marker32);

            marker32.gig_id = 32;
            marker32.infowindow = infowindow32;
            markers[markers.length] = marker32;
            });

   LatLng = new google.maps.LatLng ('38.96', '1.39861');
            var marker41 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 4 - 41',
                icon:image
            });

            var infowindow41 = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 4</h3><p>Location: Ibiza</p>"
            });

            google.maps.event.addListener(marker41, 'click', function() {
             infowindow41.open(map,marker41);

            marker41.gig_id = 41;
            marker41.infowindow = infowindow41;
            markers[markers.length] = marker41;
            });

   LatLng = new google.maps.LatLng ('-33.92528', '18.42389');
            var marker47 = new google.maps.Marker({
                map: map,
                position: LatLng,
                title: 'Event 5 - 47',
                icon:image
            });

            var infowindow47 = new google.maps.InfoWindow({
            content: "<h3 class=maph3>Event 5</h3><p>Location: Cape Town</p>"
            });

            google.maps.event.addListener(marker47, 'click', function() {
             infowindow47.open(map,marker47);

            marker47.gig_id = 47;
            marker47.infowindow = infowindow47;
            markers[markers.length] = marker47;
            });

    //Associate the styled map with the MapTypeId and set it to display.
     map.mapTypes.set('map_style', styledMap);
     map.setMapTypeId('map_style');

     $(".order").click(function() {
        var thisorder = $(this).data("gig_id");
        for(var i=0; i<markers.length; i++) {
            if(markers[i].gig_id == thisorder) {
                console.log("found my match");
                //get the latlong
                if(lastinfowindow instanceof google.maps.InfoWindow) lastinfowindow.close();
                console.dir(markers[i]);
                map.panTo(markers[i].getPosition());
                markers[i].infowindow.open(map, markers[i]);
                lastinfowindow = markers[i].infowindow;
            }
        }
    });
} 
```

这是身体：

```
<style>
    #map_canvas {
    width: 1250px; height: 550px;
    float:left;
    }
    #orders {
        margin-top: 0px;
        padding-top: 0px;
        margin-left: 10px;
        float:left;
        height: 550px;

    }
    .order {
        border-style:solid;
        border-width:thick;
            width: 300px;
            padding: 5px;
            cursor:pointer;
            margin-top:0px;
            font-family:Arial, Helvetica, sans-serif;
    }
    </style>

    <body onload="initialize()">

    <div id="map_canvas"></div>

    <div id="orders">

        <p class="order" data-gig_id="38">
        <b>Event 38</b><br/>
        Event 1
        </p>

        <p class="order" data-gig_id="30">
        <b>Event 30</b><br/>
        Event 2
        </p>

        <p class="order" data-gig_id="32">
        <b>Event 32</b><br/>
        Event 3
        </p>

        <p class="order" data-gig_id="41">
        <b>Event 41</b><br/>
        Event 4
        </p>

        <p class="order" data-gig_id="47">
        <b>Event 47</b><br/>
        Event 5
        </p>

    </div>

    </body> 
```

我正在使用 jquery 创建点击功能。我已经输出了结果，地图工作正常，但页面上打开信息窗口的链接不起作用，我使用的是 Raymond Camden 的示例。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:17:13.823

您正在尝试将单个标记添加到未定义的数组中。在初始化函数的顶部，添加

```
var markers = []; 
```

# c# - 基于 IDataErrorInfo 的验证不起作用

> ID：11649007
> 
> 赞同：0
> 
> 时间：2012-07-25T11:47:47.580
> 
> 标签：c#, wpf, validation, xaml, idataerrorinfo

**编辑**：这是这篇文章原始版本的简化更新。

在 WPF 中，我实现了一个*UserControl （称为“NumericTextBox”），它使用与**TextBox*（xaml）的*Text*属性保持同步的 *DependencyProperty“Value” ：

 *```
<TextBox.Text>
  <Binding Path="Value" 
           Mode="TwoWay"
           ValidatesOnDataErrors="True"
           NotifyOnValidationError="True"
           UpdateSourceTrigger="PropertyChanged" />
</TextBox.Text> 
```

出于验证目的，我使用*IDataErrorInfo*接口 (xaml.cs)：

```
public partial class NumericTextbox : Textbox, IDataErrorInfo {
    public double Value {
        get { return (double)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }

    public static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(double),  
                                    typeof(NumericTextBox), 
                                    new PropertyMetadata(default(double)));

    public string this[string columnName]
    {
        // Never gets called!
        get { /* Some validation rules here */ }
    }
} 
```

如源代码中所述，该`get`属性实际上**从未被调用**，因此**不会发生验证**。你看到问题的原因了吗？

**Edit2**：根据伦理逻辑的回答，我重构了我的代码。NumericTextBox现在使用一个底层视图模型类，*该类*提供一个依赖属性*值*，该值绑定到由*NumericTextBox声明的**TextBox的**Text*属性。此外， *NumericTextBox*使用视图模型作为其数据上下文。viewmodel 现在负责检查 Value 属性的变化。由于*NumericTextBox*的值限制是可定制的（例如可以调整最小值），它会将这些设置转发给 viewmodel 对象。

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:48:34.313

这样做而不是创建任何 Dependency Property 。验证应用于 ViewModel 而不是 Control 或 View 。试试这样我希望这会有所帮助。

```
public class MyViewModel : INotifyPropertyChanged, IDataErrorInfo
{
    public MyViewModel()
    {
        Value = 30;
    }
    private double _value;

    [Range(1, 80, ErrorMessage = "out of range")]
    public double Value
    {
        get
        {
            return _value;
        }
        set
        {
            _value = value;
            ValidationMessageSetter("Value", value);
        }
    }

    private void ValidationMessageSetter(string propertyName, object value)
    {
        Notify(propertyName);
        string validationresult = ValidateProperty(propertyName, value);
        if (!string.IsNullOrEmpty(validationresult) && !_dataErrors.ContainsKey(propertyName))
            _dataErrors.Add(propertyName, validationresult);
        else if (_dataErrors.ContainsKey(propertyName))
                _dataErrors.Remove(propertyName);

    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    private void Notify(string str)
    { 
        if(PropertyChanged!=null)
            PropertyChanged(this,new PropertyChangedEventArgs(str));
    }

    private string ValidateProperty(string propertyName,object value)
    {
        var results = new List<ValidationResult>(2);
        string error = string.Empty;

        bool result = Validator.TryValidateProperty(
            value,
            new ValidationContext(this, null, null)
            {
                MemberName = propertyName
            },
            results);

        if (!result && (value == null || ((value is int || value is long) && (int)value == 0) || (value is decimal && (decimal)value == 0)))
            return null;

        if (!result)
        {
            ValidationResult validationResult = results.First();
            error = validationResult.ErrorMessage;
        }

        return error;    
    }

    #region IDataErrorInfo Members

    private Dictionary<string, string> _dataErrors = new Dictionary<string, string>();

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get
        {
            if (_dataErrors.ContainsKey(columnName))
                return _dataErrors[columnName];
            else
                return null;
        }
    }

    #endregion
}

<TextBox Text="{Binding Value, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"/> 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:11:41.440

该`IDataErrorInfo`接口应该在绑定**到**的对象上实现，而不是在具有`DependencyProperty`.

在您的示例中，如果您想使用此机制进行验证，那么您的视图模型需要对`Value`属性执行以下操作：

```
public class ViewModel : IDataErrorInfo
{
    public string this[string columnName]
    {
        // Never gets called!
        get
        { 
            if (columnName == "Value")
                return GetValidationMessageForValueField();

            return null;
        }
    }
} 
```

我猜你真正想要做的是验证某人何时在`TextBox`..? 中输入非数字值？如果是这种情况，您可能希望采用与使用不同的方法`IDataErrorInfo`****

# objective-c - 显示数字的因数

> ID：11649008
> 
> 赞同：0
> 
> 时间：2012-07-25T11:47:52.577
> 
> 标签：objective-c, arrays, xcode, factorization

我想显示在文本字段中键入的数字的每个因子以实现这一点，我尝试使用数组。但我总是收到错误`'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'`。有什么建议可以消除这个错误吗？

```
 NSMutableArray *array;
        array = [NSMutableArray arrayWithCapacity:100];

        for (factorsNumber=1; factorsNumber<=number; factorsNumber++) {
            if (number%factorsNumber == 0) {
                [array addObject:[NSString stringWithFormat:@"%d", factorsNumber]];
            }

        }

        for (int i = 0; i <= [array count]; i++) {
            factors.text = [NSString stringWithFormat:@"%d", i, [[array objectAtIndex:i] intValue]];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:50:06.477

```
for (int i = 0; i <= [array count]; i++) { 
```

应该

```
for (int i = 0; i <= [array count] - 1; i++) { 
```

或者

```
for (int i = 0; i < [array count]; i++) { 
```

`n`-element 数组的有效索引是 0 到`n-1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:50:35.563

在您的 for 循环中，删除 = 使其显示为：

```
for (int i = 0; i < [array count]; i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:54:00.407

你的问题在这里：

```
for (int i = 0; i < [array count]; i++) { // < instead of <=
    factors.text = [NSString stringWithFormat:@"%d", i, [[array objectAtIndex:i] intValue]];
} 
```

# java - cmd java等待进程

> ID：11649011
> 
> 赞同：3
> 
> 时间：2012-07-25T11:48:20.313
> 
> 标签：java, io, cmd, fortran, fortran77

我正在编写一个带有 Java GUI 的应用程序，它调用一些 FORTRAN 代码。我想返回一个文件 (solution.ps)，该文件根据 FORTRAN 代码中的更改进行更新和编译，这些更改是在我的 ActionPerformed 方法中创建的。但是我目前的代码只是返回文件的旧版本，而不是等待 cmd 编译的更新结果。有没有办法让 cmd 在完成下一步之前等待进程运行？（直接从 cmd 运行效果很好）

我已经搜索但除了 process.waitFor() 之外找不到任何东西，它似乎不会在正确的点暂停执行。也尝试过 Thread.waitFor() 。

我认为这对于想要将用户输入发送到另一个程序并返回使用这些输入的编译结果的任何人都可能有用。

无论如何，这里是代码，在此先感谢您的帮助，我希望我能把问题弄清楚。

```
String[] command ={"cmd",};
        try {
            Process p = Runtime.getRuntime().exec(command); 
            new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();
            new Thread(new SyncPipe(p.getInputStream(), System.out)).start();
            PrintWriter stdin = new PrintWriter(p.getOutputStream());
            stdin.println("cd c:\\g77");     
            stdin.println("g77setup.bat");
            stdin.println("cd c:\\users\\laurence\\workspace\\areaplanner");
            stdin.println("g77 -O4 genpack.f -o genpack");
            stdin.println("genpack");
            stdin.println("5"); 
            /* 
             * The following line sets the time to run the FORTRAN code for  
             * - need to wait for this to complete before calling mpost
             */
            stdin.println("30"); 

            stdin.println("mpost solution.mp");
            stdin.println("latex solution.tex");
            stdin.println("dvips solution.dvi -o solution.ps");
            stdin.close();
            } catch(IOException e4){} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:58:26.093

您只运行 windows shell 命令。要修复，建议先编写批处理文件并等待它完成：

```
String command = "cmd /c mybatchfile.bat";
Process p = Runtime.getRuntime().exec(command);
p.waitFor(); 
```

要在第一组命令完成*之前*启动另一部分，您必须编写另一个批处理文件并重复上述操作。确保你有两个进程，然后在单独的线程中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T11:52:40.000

尝试使用[waitFor](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#waitFor%28%29)以使当前线程等待进程完成其工作。

```
Process p = Runtime.getRuntime().exec(command);
p.waitFor() 
```

您的代码中的命令不完整。并且建议使用 a`ProcessBuilder.start()`而不是`Process`.

# css - 未调用 SASS 的 Bourbon 中的“紧凑”功能

> ID：11649016
> 
> 赞同：6
> 
> 时间：2012-07-25T11:48:35.713
> 
> 标签：css, sass

我在使用 Bourbon 中包含的 mixin 时遇到问题。当这个 mixin 使用 Bourbon 的“compact”功能时，它只是将它编译成 css 而不使用它。这是 box-shadow 的渲染 CSS 的屏幕截图：

[http://i.stack.imgur.com/YF1JB.png](https://i.stack.imgur.com/YF1JB.png)

我在具有最新 Sass 版本的非静态站点上使用它。我使用 Codekit 编译。

感谢帮助 ！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T03:35:32.523

好的，所以在潜得更深之后，这就是我修复它的方法。

这个问题可能是由于这个提交引起的： [https ://github.com/thoughtbot/bourbon/commit/ac07c990c0d0fe16f4c455490c9a9fdff7fe27af](https://github.com/thoughtbot/bourbon/commit/ac07c990c0d0fe16f4c455490c9a9fdff7fe27af)

**compact**函数已用 Ruby 重写，以更好地与 Rails 集成。最初，我只是从 repo 中复制粘贴了“样式表”文件夹。那就是我开始使用错误语法的时候。

我通过阅读说明修复了错误:) - 关于如何在 Rails 中安装它的说明，然后它就可以工作了。

在你的情况下，如果他们有一个代码包实现，idk，但我相信你可以通过添加以下代码来修复它：

```
@function compact($var-1,        $var-2: false,
                  $var-3: false, $var-4: false,
                  $var-5: false, $var-6: false,
                  $var-7: false, $var-8: false,
                  $var-9: false, $var-10: false) {
  $full: $var-1;
  $vars: $var-2, $var-3, $var-4, $var-5,
         $var-6, $var-7, $var-8, $var-9, $var-10;

  @each $var in $vars {
    @if $var {
      $full: $full, $var;
    }
  }
  @return $full;
} 
```

*（我从回购中得到了代码）*

在插件文件夹中的文件名 _function.scss 中，并在 _bourbon.scss 中引用它。那应该可以解决您的问题。

# php - windows服务器上的php

> ID：11649017
> 
> 赞同：0
> 
> 时间：2012-07-25T11:48:44.510
> 
> 标签：php, mysql, sql, phpmyadmin

我正在尝试在 windows server 2008 r2 上创建我的第一个动态站点。我已经在基于 linux 的系统上成功创建了其他动态站点，但我遇到了一些麻烦。

所以我在服务器上安装了 php、mysql 和 phpmyadmin。

我有一个页面（index.php），其中包含以下内容：

```
 <?php
    include 'php/index.php';
    mysql_set_charset('utf8');
    ?> 
```

这工作正常，当我在网络浏览器的显示页面上“查看源代码”时不显示。

在我的页面下方，我有以下内容：

```
 <?=$obj->get_email()?> 
```

该语句用于从数据库中提取信息。当我查看源代码时，它会显示如上所示的 get_email() 命令。而不是应该替换为 .

这是一个PHP问题吗？这种类型的命令不适合 Windows 服务器还是我只是在做一些完全愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:55:25.227

您应该检查 php.ini 的设置：如果您希望能够用来跳转到 PHP 模式，请将`short_open_tag`其更改为。`1``<?`

除此之外，只需将其更改为即可`<?php echo $obj->get_email(); ?>`解决您的问题。

[参考](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:00:13.040

尝试不带短标签：

```
<?php echo $obj->get_email(); ?> 
```

# php - preg_match 与国际字符和口音

> ID：11649019
> 
> 赞同：18
> 
> 时间：2012-07-25T11:48:47.380
> 
> 标签：php, preg-match, non-ascii-characters

我想验证一个字符串，其模式只能包含字母（包括带重音符号的字母）。这是我使用的代码，它总是返回“nok”。我不知道我做错了什么，你能帮忙吗？谢谢

```
$string = 'é';

if(preg_match('/^[\p{L}]+$/i', $string)){

    echo 'ok';

} else{

    echo 'nok';
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-25T11:50:54.790

将 UTF-8[修饰符标志](http://php.net/manual/reference.pcre.pattern.modifiers.php)( **u** ) 添加到您的表达式中：

```
/^\p{L}+$/ui 
```

也不需要包装`\p{L}`在字符类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-01T16:29:42.573

我不知道这是否有助于稍后检查此问题/线程的任何人。下面的代码只允许使用字母、重音符号和空格。没有符号或标点符号，如 .,?/>[-< 等。

```
<?php
$string = 'États unis and états unis';

if(preg_match('/^[a-zA-Z \p{L}]+$/ui', $string)){

echo 'ok';

} else{

echo 'nok';
}

?> 
```

如果您也想添加数字，只需在 Z 之后立即添加 0-9 就像这样 a-zA-Z0-9

然后，如果您将其应用于表单验证并且您害怕客户/用户可能只是按空格键并提交，只需使用：

```
if (trim($_POST['forminput']) == "") {... some error message ...} 
```

拒绝提交。

# javascript - mootools document.getelement 不是函数

> ID：11649021
> 
> 赞同：0
> 
> 时间：2012-07-25T11:49:02.880
> 
> 标签：javascript, joomla, mootools, joomla-extensions

我正在尝试将 Joomla 1.5 插件转换为 Joomla 2.5 插件。当这个插件正在运行时，Firebug 说 `TypeError: document.getElement is not a function。这是我的代码....

```
 var btn = document.getElement("#imageForm fieldset div [onclick=\"\"]");
                        console.log(btn);
                        if (btn.getAttribute("onclick").indexOf("ImageManager") > -1 )
                        {
                            if (typeof window.parent.'.$request['rewrite_function'].' === "function")
                            {
                                btn.setAttribute("onclick",btn.getAttribute("onclick").replace("ImageManager.onok()","window.parent.'.$request['rewrite_function'].'()"))
                            }
                        } 
```

我已经坚持了几个小时了，我无法让它工作。你能告诉我这个javascript有什么问题吗，或者至少给我指出正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:45:17.713

我最近在同一页面上尝试使用 jquery 和 mootools 时遇到了这个问题。我通过在我的 html 顶部添加 jquery 的无冲突解决了这个问题，每当我进行 jquery 调用时，我使用我创建的 $j 变量而不是快捷方式 $：

```
 <script type="text/javascript">
    jQuery.noConflict();
    var $j = jQuery;
  </script> 
```

# combinatorics - 用重叠的物体装箱

> ID：11649024
> 
> 赞同：2
> 
> 时间：2012-07-25T11:49:13.700
> 
> 标签：combinatorics, np-complete, approximation, bin-packing

我有一些容量不同的垃圾箱和一些指定大小的对象。目标是将这些对象打包到垃圾箱中。到目前为止，它类似于装箱问题。但扭曲的是，每个对象都与另一个对象有部分重叠。因此，虽然对象 1 和 2 的大小分别为 s1 和 s2，但当我将它们放在同一个 bin 中时，填充的空间小于 s1+s2。假设我知道每对对象的重叠值，是否也有任何近似算法，例如用于该问题的原始装箱算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:50:36.583

答案是使用一种树来捕获对象的相似性，假设对象可以被破坏。然后运行一个贪心算法来根据树填充垃圾箱。该算法具有 3-x 近似界。但是，也应该有更好的答案。

此方法在 [Michael Sindelar、Ramesh K. Sitaraman、Prashant J. Shenoy：虚拟机托管共享感知算法中介绍。SPAA 2011：367-378](http://lass.cs.umass.edu/papers/pdf/SindelarSS11.pdf)。

我从[这个线程](https://cstheory.stackexchange.com/questions/12138/bin-packing-with-overlapping-objects)得到了这个答案，但只是想通过给出答案来结束这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:04:18.827

我认为唯一可行的算法是修剪不适合放入垃圾箱的物品并使用另一个垃圾箱。我不是指第一次拟合算法，而是等待一段时间，然后为项目使用新的垃圾箱。实际上，您可以只使用另一个垃圾箱吗？这是一种实用的方法。我的意思是你可以像这个例子一样向左或向右增长垃圾箱：http: [//codeincomplete.com/posts/2011/5/7/bin_packing/](http://codeincomplete.com/posts/2011/5/7/bin_packing/)。

# mysql - play framework 2 上传文件到mySQL

> ID：11649026
> 
> 赞同：3
> 
> 时间：2012-07-25T11:49:14.963
> 
> 标签：mysql, playframework, playframework-2.0, blob

我正在尝试使用 play framework2 将图像上传到 mySQL。

在 play framework 1.24 中，我使用 " `play.db.jpa.Blob`" 并将`"multipart/form-data"`图像上传到 mySQL。

但是在play framework2中没有`Blob`......我如何将图像上传`"multipart/form-data"`到mySQL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T13:06:30.573

您**绝对不**应该将文件存储到数据库中。这是个坏主意。相反，您应该将文件上传到某个本地或远程文件系统，并且只将文件名/文件路径保存在数据库中。

**编辑：**由于我的回答被否决，我将尝试给出更多解释：

1.  首先，在 Play 框架中使用 Blob 类型时，它将在您的数据库中创建一个 BLOB 字段。但是，并非所有数据库在 blob 类型后面都有相同的实现。在某些 RDMS 中，Blob 类型的存储空间有限，而在其他（例如 MySQL）中，blob 字段的最大大小将由配置决定。

2.  其次，当您从数据库中检索文件并将它们发送给用户时，您的内存使用量将会爆炸。很简单，因为 Play 在将 blob 字段发送给用户之前将其加载到内存中。

3.  另外，如果您的数据库中存储了大量文件，它将很快超载。（要求）。下一步将在新机器上移动数据库。但是如果你存储了很多数据，你的下一个瓶颈可能不是数据库，而是你的应用程序和数据库服务器之间的带宽。

4.  由于数据库产生的开销，使用数据库进行文件存储总是比直接读取文件系统更慢且消耗更多内存。

将数据库用作文件存储引擎是一种简单快捷的设置解决方案，但它充满了不便，可能会在项目后期真正改变事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T19:22:10.473

Another way, you can store reference to photo in database.

## In view:

```
<form action="@routes.Application.index" method="POST" enctype="multipart/form-data">
           Photo<input type="file" name="photo"> <br>
             <input type="submit" value="Submit">    
</form> 
```

In controller:

```
MultipartFormData body = request().body().asMultipartFormData();
            FilePart photo = body.getFile("photo");
            if (photo != null) {
                String fileName = photo.getFilename();
                File file = photo.getFile();
                File newFile = new File(play.Play.application().path().toString() + "//public//uploads//"+ "_" + fileName);
                file.renameTo(newFile); //here you are moving photo to new directory          
                System.out.println(newFile.getPath()); //this path you can store in database
            }
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-07T07:34:30.253

这就是 Blob 对象透明处理的内容。它将文件存储在文件系统中，并将引用存储在数据库中。

# vb.net - 控件未添加到标签页 VB.NET

> ID：11649029
> 
> 赞同：1
> 
> 时间：2012-07-25T11:49:25.487
> 
> 标签：vb.net, winforms, controls

我在窗口的构造函数中运行以下代码。添加了“标签”，但屏幕上不显示任何其他控件。如果我调试 newTab.Controls 里面有几个控件。为什么它们不显示在屏幕上，而我只看到“标签”控件。

谢谢

```
Dim graphlist As ArrayList = New ArrayList
    For Each funct As TL_FUNCTION In functionlist
        If (funct.functionname = functi) Then
            If Not (graphlist.Contains(funct.picture)) Then
                graphlist.Add(funct.picture)
            End If
        End If
    Next
    For Each picture In graphlist
        Dim NewTab As New TabPage
        NewTab.Name = picture
        NewTab.Text = NewTab.Name
        Me.TabControl1.Controls.Add(NewTab)
        Me.TabControl1.SelectedIndex = Me.TabControl1.TabCount - 1
        For Each func As TL_FUNCTION In functionlist
            If (func.picture = picture) Then
                Dim label As Label = New Label
                label.Text = func.curve.ToString
                NewTab.Controls.Add(label) 'This label shows up
                Dim key As String
                Dim values() As String
                For Each key In func.values.Keys
                    values = func.values.GetValues(key)
                    For Each value As String In values
                        Dim label2 As New Label
                        label2.Text = key.ToString
                        Dim textb As TextBox = New TextBox
                        textb.Text = value
                        NewTab.Controls.Add(label2) 'this one is not shown on the tab
                        NewTab.Controls.Add(textb) 'this one is not shown on the tab
                    Next value
                Next key
            End If
        Next
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:26:30.020

您将新标签和文本框放置在您在 TabPage 中看到的新标签*下方*，因为您从未设置它们的位置，因此它默认为点 (0, 0)。

尝试设置控件的位置：

```
For Each value As String In values
  Dim label2 As New Label
  label2.Text = key.ToString
  label2.Location = New Point(10, NewTab.Controls.Count * 24)

  Dim textb As TextBox = New TextBox
  textb.Text = value
  textb.Location = New Point(label2.Right + 4, label2.Top)

  NewTab.Controls.Add(label2)
  NewTab.Controls.Add(textb)
Next value 
```

# php - PHP按数组项多排序

> ID：11649032
> 
> 赞同：-1
> 
> 时间：2012-07-25T11:49:35.723
> 
> 标签：php, arrays

我有这个数组：

```
 Array
(
    [0] => stdClass Object
        (
            [ID] => 1206
            [post_title] => Corporation 5
            [zip_code] => 33017
            [miles] => 13.24
        )

    [1] => stdClass Object
        (
            [ID] => 1197
            [post_title] => Contract deal
            [zip_code] => 33432
            [miles] => 22.7
        )

    [2] => stdClass Object
        (
            [ID] => 1057
            [post_title] => Corporation Deal test1
            [zip_code] => 33019
            [miles] => 0
        )

    [3] => stdClass Object
        (
            [ID] => 1040
            [post_title] => Bankruptcy Deal1 test lorem ipsum
            [zip_code] => 33019
            [miles] => 0
        )

    [4] => stdClass Object
        (
            [ID] => 993
            [post_title] => Finally an Affordable Living Trust, Only $100!
            [zip_code] => 33019
            [miles] => 0
        )

) 
```

我希望结果按“英里”排序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:01:18.110

您可以使用[usort](http://pk1.php.net/usort)功能

```
function Compare($a, $b) { return $a->miles < $b->miles; }
usort($results, 'Compare'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:53:41.667

```
public function subval_sort($a, $subkey) {       
    foreach($a as $k=>$v) {
    $b[$k] = strtolower($v[$subkey]);
}
asort($b);
foreach($b as $key=>$val) {
    $c[] = $a[$key];
}

return $c;
} 
```

按数组子值对数组进行排序的函数。$a 是传递的数组，$subkey 是数组键，它将被排序。

# spring - @ExceptionHandler 不适用于 Spring MVC 3.1 单元测试

> ID：11649036
> 
> 赞同：3
> 
> 时间：2012-07-25T11:50:07.973
> 
> 标签：spring, unit-testing, spring-mvc, spring-3

通过在普通 servlet 上下文之外实例化对象，我几乎可以在 Spring MVC 控制器上进行所有单元测试。但我希望能够运行一些测试以确保我的对象序列化工作正常，正在生成标头等。

为了在 servlet 上下文中运行测试，我创建了一个修改过的上下文文件，以便不构造各种 bean，然后我使用 EasyMock 在我的测试用例中创建这些 bean 的模拟版本。然后我用这样的代码调用我的处理程序，并从 MockHttpServletResponse 中获取我需要的大部分内容。

我认为这得到了它的本质：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:root-context.xml",
                                    "file:junit-servlet-context.xml" } )

public class HomeControllerConfigHandlerHttp {
@Autowired
private RequestMappingHandlerAdapter handlerAdapter;

@Autowired
private RequestMappingHandlerMapping handlerMapping;
    ... //miscellaneous setup
public void someTest() throws Exception
{
    MockHttpServletRequest request = new MockHttpServletRequest();
    request.setMethod("GET");
    request.setRequestURI("/config");
    request.addParameter("foo", "bar");
    request.addParameter("device", "oakmont");
    MockHttpServletResponse response = new MockHttpServletResponse();
    Object handler = handlerMapping.getHandler(request).getHandler();
    replay(dblient);
    expect(serviceClient.checkDevice("oakmont")).andReturn( true );
    serviceClient.destroy();
    replay(serviceClient);
    ModelAndView modelAndView = handlerAdapter.handle(request, response, handler);
    String content = new String( response.getContentAsByteArray() );
    Assert.assertEquals(content, "Expected configuration");
    String content_type = response.getHeader("Content-type");
    Assert.assertEquals( content_type, "text/plain");
    int status = response.getStatus();
    Assert.assertEquals(status,  200 ); 
```

这符合我的预期，但有一个问题。我用@ExceptionHandler 在我的控制器中做了很多错误处理。这是一种在任何处理程序中退出错误情况的简单方法，它为我提供了一种暴露错误的一致方式。

@ExceptionHandler 在正常的 servlet 部署中工作正常，但在这个单元测试模型中，当我抛出异常时它不会被调用。步入 Spring 代码对我来说有点挑战，我是新手，所以我很快就迷路了。但是，看起来在正常的 servlet 环境中，有一个异常处理程序来查找带注释的处理程序。在 SpringJUnit4ClassRunner 下运行时，异常的处理方式不同。

如果有办法解决这个问题，我想这样做。由于缺乏开拓精神，我已经避免使用 spring-test-mvc，但是如果有人告诉我它可以很好地解决这个问题，我会尝试一下。

我的 junit-servlet-context.xml 文件的内容与 Spring Template MVC 向导创建的 servlet-context.xml 文件几乎相同。唯一的区别是添加了一个排除过滤器，该过滤器用于防止 @Component 实例化创建我的控制器使用的几个单例。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>
<context:component-scan base-package="com.cisco.onplus.home.dmz" >
<context:exclude-filter type="regex" expression=".*InitDatabase.*"/>
</context:component-scan>   
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:52:50.653

添加以下类以在上下文中加载 Dispatcher servlet：

```
public class MockWebApplicationContext extends AbstractContextLoader {

@Override
public ApplicationContext loadContext(MergedContextConfiguration mergedContextConfiguration) throws Exception {
    String[] locations = mergedContextConfiguration.getLocations();
    return loadContext(locations);
}

@Override
public ApplicationContext loadContext(String... locations) throws Exception {

    XmlWebApplicationContext webApplicationContext = new XmlWebApplicationContext();
    webApplicationContext.setConfigLocations(locations);
    webApplicationContext.setServletContext(new MockServletContext(new FileSystemResourceLoader() ) );

    ServletConfig config = new MockServletConfig();
    config.getServletContext().setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, webApplicationContext);

    final DispatcherServlet servlet = new DispatcherServlet(webApplicationContext);

    webApplicationContext.addBeanFactoryPostProcessor(new BeanFactoryPostProcessor() {
        @Override
        public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
            beanFactory.registerResolvableDependency(DispatcherServlet.class, servlet);
        }
    });

    webApplicationContext.refresh();
    servlet.init(config);

    return webApplicationContext;
}

@Override
protected String getResourceSuffix() {
    return ".xml";
} 
```

}

一旦你完成了使用

```
@ContextConfiguration(locations = {"classpath:app-config.xml",loader = MockWebApplicationContext.class) 
```

在测试类上使用 Autowired 注释加载 DispatcherServlet。处理它使用

```
servlet.service(request,response); 
```

现在它也应该处理异常流。

不过，它可能需要 3.1.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:14:50.947

恐怕您将不得不查看[spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)，原因是来自控制器的异常处理和使用 ExceptionResolver 调用适当的@ExceptionHandler 是在级别上完成的`DispatcherServlet`，而不是`HandlerAdapter`。您的测试从`HandlerAdapter`.

我强烈推荐 spring-test-mvc，我已经使用了一段时间，并没有看到我的场景有任何问题 - [http://biju-allandsundry.blogspot.com/2012/07/spring-mvc-integration-测试.html](http://biju-allandsundry.blogspot.com/2012/07/spring-mvc-integration-tests.html)。

使用 spring-test-mvc 对异常流的测试如下所示：

```
xmlConfigSetup("classpath:/META-INF/spring/web/webmvc-config.xml")
    .configureWebAppRootDir("src/main/webapp", false).build()
    .perform(get("/contexts/exception"))
    .andExpect(status().isOk())
    .andExpect(view().name("exceptionPage")); 
```

# android - 在列表片段中第一次单击列表项不会更改项目的背景

> ID：11649037
> 
> 赞同：1
> 
> 时间：2012-07-25T11:50:09.543
> 
> 标签：android, background, simplecursoradapter, listitem, android-listfragment

我正在使用列表片段来显示项目列表，我希望以这样一种方式，每当单击该项目时，它的背景应该改变并且也在改变但是当第一次点击任何项目时，它们的背景没有变化项目。请帮帮我。我的代码在这里

片段类：-

```
public class Categoryfragment extends ListFragment 

 {
   DBhelper dh;
  Cursor cursor;
      @Override
    public void onCreate(Bundle savedInstanceState)
{       
// TODO Auto-generated method stub
  super.onCreate(savedInstanceState);
      dh = new DBhelper(getActivity()); 
  refreshadpater();
}
  @Override
    public void onActivityCreated(Bundle savedInstanceState)
     {
    super.onActivityCreated(savedInstanceState);
     }

    public void refreshadpater()
     {
          dh = new DBhelper(getActivity());
          cursor= dh.fetchAllcategories();
      String []columns= {"category_name"};
      int []textid = {R.id.text1};
       SimpleCursorAdapter adapter = new SimpleCursorAdapter(getActivity(), R.layout.list,    cursor, columns, textid);
        setListAdapter(adapter);

 }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
     {  

       getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
       LinearLayout ii=(LinearLayout)getActivity().findViewById(R.id.lin);
         ii.setBackgroundResource(R.drawable.item_selector);

            int id1 =(int)id ;

      Subcategoryfragment fragment = (Subcategoryfragment)   getFragmentManager().findFragmentById(R.id.secondFragment);
      TextView tv = (TextView)getActivity().findViewById(R.id.sub);

      tv.setText("Sub-cat");
      if (fragment != null && fragment.isInLayout())
      {              
          fragment.refreshadpater1(id1); 
```

// ii.setBackgroundResource(R.drawable.item_selector);

```
 } 
     } 
```

}

列表.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
    android:id="@+id/lin"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:background="@drawable/item_selector">

     <TextView android:id="@+id/text1"

       android:textAppearance="?android:attr/textAppearanceLarge"
       android:layout_marginTop="10dp"
       android:layout_marginLeft="10dp"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:minHeight="?android:attr/listPreferredItemHeight"

       /> 
```

```
 item_selector.xml

    <selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_activated="true" >
    <shape >
        <solid android:color="#FF666666" />
    </shape>
</item>
<item android:state_pressed="true">
      <shape>
        <solid android:color="#FF666666" />
    </shape>
    </item>

</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:49:35.737

第一次触摸是给予焦点，第二次是点击。您需要禁用焦点，以便第一次触摸注册为单击。这应该为您解决问题：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

# rest - 在 REST 中发布正文

> ID：11649047
> 
> 赞同：0
> 
> 时间：2012-07-25T11:51:08.953
> 
> 标签：rest

我指的是 O'Reilly 关于 REST api 设计的书，它明确规定了消息格式，特别是围绕应该如何使用链接来表示相互关联的资源和内容的领域。但所有示例都是用于读取资源 (GET) 以及服务器如何构造消息。但是 Create (POST) 呢？用于创建类似互连对象的消息结构是否应该类似，即通过链接？
举个例子，让我们考虑一下我们想要创建一个带有 Parent 字段的 Person 对象。通过 POST（发布消息正文）发送到服务器的 json 消息格式是否应该像：-

```
{
  name:'test',
  age:12,
  links:[
   {
      rel:'parent',
      href:'/people/john'
    }     
]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:19:58.933

这是您可以查看的媒体类型

[http://stateless.co/hal_specification.html](http://stateless.co/hal_specification.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:56:34.803

是的，这是一种方法。GET 信息可能有用地使人类可读，但 POST/PUT 信息以机器为目标。

添加信息以减少服务器处理信息的需求（例如，通过将自身限制为验证信息而不是从头开始恢复所有信息）在性能方面也很有意义。只要您*进行*验证：请记住，根据一般原则，用户数据必须被视为可疑数据。您不希望第一个精通 ExtJS 的人能够伪造对您的服务的请求。

您还可以将数据格式化为 XML 或 CSV，这取决于什么最适合特定应用程序。请记住，您可能想要重构或重用代码，因此遵守单一标准也很有意义。综合考虑，JSON 可能是最好的选择。

# asp.net-mvc - 是否有任何人工验证机制作为 Asp.net Mvc 的 httphandler？

> ID：11649049
> 
> 赞同：0
> 
> 时间：2012-07-25T11:51:26.647
> 
> 标签：asp.net-mvc, captcha, httphandler

我需要 StackExchange 风格的人工验证机制。

如果客户端每 x 秒发出超过 y 个请求而不是 1）存储“请求”，2）显示人工验证。

如果客户端通过人工验证调用“存储请求”。

但它必须是全局的，而不是特定于页面的。所以我想我需要httphandler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:02:42.977

创建一个[操作过滤器](http://msdn.microsoft.com/en-us/library/dd410209.aspx)，您可以在其中通过 cookie 识别用户（或 ip。两者都不完美），记录用户请求，检索用户请求统计信息，并采取相应措施。

这与 AuthorizeAttribute 非常相似

# php - 在 DOMPDF 中打印边距

> ID：11649052
> 
> 赞同：44
> 
> 时间：2012-07-25T11:51:28.160
> 
> 标签：php, pdf, dompdf

我正在尝试使用 DOMPDF 生成 PDF。我有一些 HTML，然后将其转换为 PDF。

但我有一个问题。当我将一个对象放在页面顶部（例如图标）时，在 PDF 中它也会显示在页面顶部。但是当我打印 PDF 时，会有一个边距。我知道必须有一个最小的利润，但就我而言，它太大了。有没有办法在 DOMPDF 中控制这个边距？

我正在尝试复制现有文档，并且在原始文档中徽标不在页面顶部（PDF 中已经有边距）。但是当我打印它时，它与我生成的 PDF 中的位置完全相同（并且 PDF 中没有边距）。

PDF中是否已经设置了打印边距？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-07-25T19:06:41.177

以下样式将有效地将文档的边距设置为 0：

```
@page { margin: 0px; }
body { margin: 0px; } 
```

`@page`由 dompdf 0.6.0 和`body`dompdf 0.5.1 使用。您可以单独修改页面和正文的边距，尽管现在两者的边距一起作为您的内容边界。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-26T10:47:05.427

有时你还需要设置

```
html { margin: 0px} 
```

# excel - 使用VBA破解Excel电子表格密码

> ID：11649064
> 
> 赞同：5
> 
> 时间：2012-07-25T11:52:06.050
> 
> 标签：vba, excel, vba, password-recovery

我尝试编写一个类似于我用来破解 Excel 表密码的代码的[vba](/questions/tagged/vba "显示标记为“vba”的问题")密码破解器代码，但我不确定我是否做得正确 - 当我尝试此代码时，它提示我输入密码，但文本中没有输入密码输入框。

请提出我做错了什么。

谢谢

```
Sub testmacro()
Dim password
Dim a, b, c, d, e, f, g, h, i, j, k, l
SendKeys "^r"
SendKeys "{PGUP}"

For a = 65 To 66
    For b = 65 To 66
        For c = 65 To 66
            For d = 65 To 66
                For e = 65 To 66
                    For f = 65 To 66
                        For g = 65 To 66
                            For h = 65 To 66
                                For i = 65 To 66
                                    For j = 0 To 255
                                        password = Chr(a) & Chr(b) & Chr(c) & Chr(d) & Chr(e) & Chr(f) & Chr(g) & Chr(h) & Chr(i) & Chr(j)
                                        SendKeys "{Enter}", True
                                        MsgBox password
                                        SendKeys password, True
                                        SendKeys "{Enter}", True

                                        On Error GoTo 200
                                        MsgBox password
                                        GoTo 300
200                                         password = ""

                                    Next
                                Next
                            Next
                        Next
                    Next
                Next
            Next
        Next
    Next
Next
300 MsgBox "exited"
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:45:05.617

您的代码未正确执行的原因是您试图在受密码保护的 execel 文件上执行宏，这是不允许的。这是因为在输入密码之前宏不会在 Excel 工作簿上执行 - 因此在执行宏代码之前会提示输入密码。

这篇 SO 文章也对此进行了更详细的解释：[Excel VBA - 自动输入密码](https://stackoverflow.com/questions/11326986/how-to-input-password-automatically-in-excel-vba-macro)

编辑

**2003 年**

* * *

如果您尝试访问*工作簿*而不是工作表，则在 2003 及更早版本中有多种方法。快速浏览后，这个 blogspot[代码示例](http://vbacodesamples.blogspot.com/2010/01/excel-password-crack.html)条目似乎有一个用于取消保护 2003 工作簿的工作版本。

此外，在相关说明中，如果您进一步退后一步并尝试解锁 VBA 项目，那么这篇[SO 文章](https://stackoverflow.com/questions/272503/how-do-i-remove-the-password-from-a-vba-project)似乎可以充分解决该问题。

**2007 年**

* * *

如果您只是试图“蛮力”解除对客户工作簿的保护，一位名叫 Jason 的绅士[在他的博客中概述了这样一个过程](http://jsbi.blogspot.com/2008/09/how-to-easily-unprotectremove-password.html)。

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-25T02:01:57.530

我在 Excel-2013 中成功地在 Excel 2003 中创建的受密码保护的工作簿上执行了此脚本。

遵循以下步骤：

开发人员 --> 录制宏（给一个名字，然后点击）

宏 --> 将您创建的宏用于编辑。

用下面的整个函数替换宏：

```
Sub PasswordBreaker()
    'Breaks worksheet password protection.
    Dim i As Integer, j As Integer, k As Integer
    Dim l As Integer, m As Integer, n As Integer
    Dim i1 As Integer, i2 As Integer, i3 As Integer
    Dim i4 As Integer, i5 As Integer, i6 As Integer
    On Error Resume Next
    For i = 65 To 66: For j = 65 To 66: For k = 65 To 66
    For l = 65 To 66: For m = 65 To 66: For i1 = 65 To 66
    For i2 = 65 To 66: For i3 = 65 To 66: For i4 = 65 To 66
    For i5 = 65 To 66: For i6 = 65 To 66: For n = 32 To 126
    ActiveSheet.Unprotect Chr(i) & Chr(j) & Chr(k) & _
        Chr(l) & Chr(m) & Chr(i1) & Chr(i2) & Chr(i3) & _
        Chr(i4) & Chr(i5) & Chr(i6) & Chr(n)
    If ActiveSheet.ProtectContents = False Then
        MsgBox "One usable password is " & Chr(i) & Chr(j) & _
            Chr(k) & Chr(l) & Chr(m) & Chr(i1) & Chr(i2) & _
            Chr(i3) & Chr(i4) & Chr(i5) & Chr(i6) & Chr(n)
         Exit Sub
    End If
    Next: Next: Next: Next: Next: Next
    Next: Next: Next: Next: Next: Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:06:17.190

看起来您正在尝试使用密码解锁工作簿以打开它？

您绝对*不应该为此使用 Sendkeys*。您应该只将 sendkeys 用作最后的手段。

为避免冲突，请将您的代码放在另一个工作簿中，而不是使用 sendkeys：

```
Workbooks.Open Filename:="C:\passtest.xls", Password:=password 
```

如果工作簿已经打开并且工作簿受到保护或工作表或图表使用：

```
[object].Unprotect password 
```

Wherew [object] 是对您要取消保护的内容的引用。

如果您尝试解锁 vba 代码，请关注 JimmyPena 的评论

[这是](http://excel-formula.blogspot.com/2011/11/how-to-unprotect-excel-sheet-without.html)使用与您的代码相似的代码来解锁活动工作表的人的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-18T03:40:21.117

也许有一些帮助？

```
Option Explicit

Const PWDMaxLength = 9
Const MaxTimeInSeconds = 600    ' 10 Minutes
Const PWDWindowName = "Password"
Const TargetFile = "D:\Dropbox\Excel stuff\crack\test.xls"
Const LowerCase = "abcdefghijklmnopqrstuvwxyzæøå"
Const UpperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZÆØÅ"
Const SpesChars = "+-*@#%=?!_;./"
Const Digits = "0123456789"
Dim CrackAttempt As Long
Private Declare Function FindWindow Lib "USER32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
Private Declare Function GetTickCount Lib "kernel32" () As Long

Sub BFOpen()
On Error Resume Next
Application.DisplayAlerts = False
Workbooks.Open Filename:=TargetFile
Application.DisplayAlerts = True
On Error GoTo 0
End Sub

Sub BFCrack()
'On Error Resume Next
Dim lSta, lCur As Long, test, str, PWD As String
lSta = GetTickCount()
PWD = LowerCase & UpperCase & SpesChars & Digits
CrackAttempt = 1
test = InputBox("Insert test string for brutforce if wanted" & vbCrLf & "not more than 5 characters...", "input")
SendKeys "%{TAB}", 100
Do While str <> test Or FindWindow(vbNullString, PWDWindowName) And (Len(str) < PWDMaxLength <> 0 And (lCur / 1000) < MaxTimeInSeconds)
  lCur = (GetTickCount() - lSta)
  If lCur Mod 250 = 0 Then Application.StatusBar = str & " " & CrackAttempt & " " & lCur
  str = GBFS(PWD, CrackAttempt)
  If test = "" Then SendKeys str & "{ENTER}", 1000
  CrackAttempt = CrackAttempt + 1
Loop
Application.StatusBar = False
If str <> "" Then MsgBox str & " found in " & CStr((GetTickCount() - lSta) / 1000) & " seconds after " & CrackAttempt & " attempts", vbOKOnly + vbInformation, "Result"
On Error GoTo 0
End Sub

Function GBFS(ByVal inp As String, ByVal att As Long) As String
  Dim Base, cal As Integer, rmi, res As Long
  Base = Len(inp)
  If Base < 2 Then Exit Function
  rmi = att
  Do While rmi > 0
    res = Int(rmi / Base)
    cal = rmi - (res * Base)
    If cal = 0 Then
      cal = Base
      res = res - 1
    End If
    GBFS = Mid(inp, cal, 1) & GBFS
    rmi = res
  Loop
End Function 
```

# web-services - 如何在 Lotus Notes 中使用 RESTful Web 服务

> ID：11649073
> 
> 赞同：6
> 
> 时间：2012-07-25T11:52:56.347
> 
> 标签：web-services, rest, lotus-notes, lotusscript

有没有人在 Lotus Notes 中编写客户端来使用 RESTful Web 服务？如果是这样，您使用过哪些代码示例？我不确定从哪里开始，因为目前网络上似乎没有很多例子。

我的最终目标是拥有一些 Lotusscript（或者 Java 甚至 @Formula），Notes 客户端应用程序可以使用它来执行对 RESTful Web 服务的常规 GET、POST、PUT 和 DELETE 调用。我会将结果存储在客户端计算机上的 .xml 文件中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:20:24.467

[此处](http://www.openntf.org/projects/codebin/codebin.nsf/0/08FD83237E41D641862575F200669B70)的 Geocoding 类并未实现所有动词，但它为您提供了基于 COM 的方法的基础，假设我们谈论的是 Windows 客户端。

**操作编辑（示例）：**

```
Dim httpObject As Variant
Dim httpURL As String
Dim response As String
Dim returnCode As String

Set httpObject = CreateObject("MSXML2.ServerXMLHTTP")  ' use MSXML object
httpURL = "http://" & yourWebServiceURL      
Call httpObject.open("GET", httpURL, False)
response = Left$(httpObject.responseText,16000)
returncode = GetGeoValue("code")  ' e.g. 200 for success 
```

# asp.net - 如何更改 fileUpload 控件中的浏览按钮样式？

> ID：11649074
> 
> 赞同：1
> 
> 时间：2012-07-25T11:53:05.660
> 
> 标签：asp.net, html

对于文件上传控件，有一个嵌入按钮“浏览”按钮，用于在本地机器上查找文件。

是否可以更改此按钮的样式？例如在它上面应用样式表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:04:53.977

它在 CSS 和编程技术的帮助下工作；我一直遵循的方式如下：

```
<style>
 .mainDiv {
    position:relative; height:auto; width:300px;
 }

 #brwShow {
    position: absolute;
    text-align:right;
    top: 0px;
    left: -1px;
    z-index: 1;
    background:#F60;
    height:26px;
    width:240px;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    line-height:26px;
    color:#FFF;
    margin-left:10px;
 }

 #brwField {
    width:155px;
    height:26px;
    margin-right:85px;
    font-size:16px;
    border:solid 1px #000;
 }

 #hideBrowse {
    position:relative;
    width:240px;
    height:26px;
    text-align: right;
    -moz-opacity:0 ;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 2;
 }
 .textUpload {
    position:absolute;
    height:20px;
    width:100px;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    color:#FFF;
    left: 183px;
    top: 3px;
    line-height:20px;
    z-index:10001;
 }
</style> 
```

html是

```
 <div class="mainDiv">
  <input type="file" size="24" id="hideBrowse" onchange="getElementById('FileField').value = getElementById('BrowserHidden').value;" />
  <div id="brwShow"><input type="text" id="brwField" /></div>
  <div class="textUpload">Upload</div>
 </div> 
```

# javascript - jQuery/Javascript：从 iframe 内部设置 iframe 的边框

> ID：11649075
> 
> 赞同：4
> 
> 时间：2012-07-25T11:53:08.080
> 
> 标签：javascript, jquery, html

我有一个 iframe，我想将它的边框设置为零。

但我想使用 javascript 或 jQuery 从 iframe*内部执行此操作。*

这该怎么做？提前谢谢了，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:59:52.120

您可以通过`$(parent.document).find('#myIframe').css('border', 'xxxx');`- 但正如上面的评论所指出的那样，两个页面（主要页面以及 iframe 中显示的页面）都应该在同一个域中 - 否则您最终会因为以下原因而出现安全异常同源政策。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:04:25.943

如果父级位于不同的来源，则不能这样做，因为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)禁止访问父级的内容。

如果父文档位于同一来源，则应该这样做：

```
(function() {
  var frames = window.parent.document.getElementsByTagName("iframe"),
      index,
      frame;

  for (index = 0; index < frames.length; ++index) {
    frame = frames[index];
    if (frame.contentWindow == window) {
      frame.frameBorder = "none";
    }
  }
})(); 
```

[实例](http://jsbin.com/epebem)| [父母来源](http://jsbin.com/epebem/edit)| [帧源](http://jsbin.com/obapen/edit)

请注意，重要的是使用`==`而不是`===`比较`window`属性（`window`通常是特殊的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T12:05:29.073

或者，您可以使用 parent.$

```
parent.$("iframe").prop("frameborder", 0); // This will change all iframes
parent.$("#IframeID").prop("frameborder", 0); // This will change single iframe 
```

# asp.net - 跨多个客户端服务器请求和多个服务器之间的会话共享

> ID：11649076
> 
> 赞同：0
> 
> 时间：2012-07-25T11:53:09.233
> 
> 标签：asp.net, session-state, session-management

我的问题是关于 ASP.net 会话管理。在当前的 Web 应用程序中，我们有“粘性会话”（用户总是被重定向到它开始与之交谈的服务器）。以下是我的问题陈述。

来自我们的一位客户的大量请求访问了我们的服务器。不知何故，请求是从 1 个或最多 2 个 IP 发送的。我们有 5 台服务器正在运行来满足这些请求。现在这里的问题是 1-2 服务器可能会受到大量命中，而其他服务器可能处于空闲状态，因为粘性会话不允许 serverB 处理**最初**由**serverA回答的请求**

我们需要的恰恰相反。任何服务器都应该能够处理传入的请求以保持持续的对话。

我已经用非常简单的语言表达了我的问题。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:03:27.530

为什么不将会话状态存储在[SQL 服务器上](http://idunno.org/articles/277.aspx)？

# jquery - 什么是正确的分页方式（尤其是 JQuery 和 Jersey）

> ID：11649082
> 
> 赞同：6
> 
> 时间：2012-07-25T11:53:25.460
> 
> 标签：jquery, pagination, jersey, httpresponse

只想通过我在服务器端使用 Jersey 和在客户端使用 JQuery 的分页方法运行。

在服务器上（假设用户刚刚请求 /rest/users?page=1）：

```
 // Hardcoded the page number here, but it would be page-1, page+1
    String prevLink = uriInfo.getRequestUri() + "?page=0";
    String nextLink = uriInfo.getRequestUri() + "?page=2";
    String linkHeader = String.format(LINK_HEADER_TMPL, prevLink,  nextLink);
    return List<User> currentPageResults; 
```

这在响应中为我提供了以下标头：

```
Link: <http://localhost:8880/rest/users?page=0>; rel="prev", <http://localhost:8880/rest/users?page=2>; rel="next" 
```

在客户端：

```
 var xhr = $.getJSON("rest/users", function(allData) {
        var links = (xhr.getResponseHeader("link")).split(',');
        var relLinks = [];
        $.each(links, function(index, value) {
            var parts = value.split(';');
            var url = parts[0].replace(/^.*<(.*)>.*$/m, '$1');
            var rel = parts[1].replace(/^.*"(.*)".*$/m, '$1');
            relLinks[rel] = url;
        });

        alert(relLinks['prev']); 
```

警报给了我正确的东西，并且是我用来生成我的页面链接的东西：

```
http://localhost:8880/rest/users?page=0 
```

所以问题：

1.  我的链接标题格式是否正确？在客户端解析链接头似乎有点令人费解。
2.  这是一种正确/可接受的方式吗？我查看了 Jersey 响应过滤器，但这需要在模型类上添加特定于 Jersey 的注释，而我不想这样做。
3.  那么总可用页面呢？是否有标准化的方式在信息中给出它？如果我有页面总数，我大概可以完全删除 rel 链接，并在客户端生成它们？那会是正确的吗？

顺便说一句，链接头的整个格式是如何产生的？“url; rel=name,url;rel=name”的形式对我来说似乎有点奇怪。

编辑：找到这个[https://www.rfc-editor.org/rfc/rfc5988#section-6.2](https://www.rfc-editor.org/rfc/rfc5988#section-6.2)，它指定了“标准”关系名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T18:47:59.383

假设您要确保这些页面可以被搜索引擎检索到，我建议您更改链接以删除查询字符串。

```
http://localhost:8880/rest/users/0 
```

其中 0 被服务器端解析为所需的页码。就总页数而言，您将在服务器上知道您是否已到达用户列表的末尾。如果是这样，只需省略您的 nextLink。同样，如果 currentPage == 0 则省略 prevLink。

你可以在这里看到这一点：[http ://www.autoquoter.com/aq/en/Blog/Archives](http://www.autoquoter.com/aq/en/Blog/Archives)

# php - 增加发票 ID 的最佳方法是什么？

> ID：11649088
> 
> 赞同：5
> 
> 时间：2012-07-25T11:54:13.853
> 
> 标签：php, mysql, business-logic

我正在使用 PHP 和 MySQL 开发一个简单的发票系统。
我最初的想法是使用 ID（自动递增）作为发票 ID。但这行不通。

当用户向我的支付服务提供商提交订单时，会创建一张临时发票。如果交易失败，我需要删除临时发票。

问题是发票已经创建并提供了 ID - 根据法律，我不允许删除任何已提供发票编号的发票。所以我需要添加另一列'invoice_id'并在成功交易后添加一个ID。

多个用户可以同时进行购买。

我的问题是，如何确保检索最后创建的发票 ID 并增加它？

我应该使用 a`$_SESSION[]`来存储`invoice_id`吗？或者我应该从数据库中检索最新的 ID？如果从数据库中检索，我应该为这个事务锁定表吗？

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:55:46.453

为尚未处理的发票创建一个临时表。处理完发票后，转到永久表并使用 mysql 中的 AUTO_INCREMENT 选项分配发票 ID

这将允许两个表，一个用于未处理，另一个用于处理。您还可以放置一个 id 字段来跟踪从 temp -> perm 的移动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:58:42.697

我不会删除它，我只会取消它。另外通常在交易失败后，当发票不再存在时，交易者会提醒客户付款，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:00:11.213

一种方法是将发票保持在会话中，直到付款得到批准。如果付款未获批准，发票将随着用户的会话而消失。

另一种方法是为待处理的发票创建一个保留表。批准付款后，只需将数据移动到发票表中。

最后一种方法，继续在发票表中创建发票，但如果付款失败则软删除它。只需设置一个标志，deleted = 1 并在所有 procs 中添加“where deleted = 0”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:01:21.747

我会生成纯粹的随机发票号码。最简单的策略：

```
md5(uniqid()) 
```

但仍然——将未完成的发票存储在数据库中听起来更加理智。

此外，随机因素会使猜测发票号码更加困难。

# mysql - MySQL删除外键错误152

> ID：11649092
> 
> 赞同：13
> 
> 时间：2012-07-25T11:54:48.827
> 
> 标签：mysql, foreign-keys, alter-table

我正在尝试使用以下方法删除一些外键：

```
ALTER TABLE `table` DROP FOREIGN KEY `fk_table_users1` , DROP FOREIGN KEY `fk_table_accounts1` , DROP FOREIGN KEY `fk_table_data1` ; 
```

但它返回错误：

```
Error on rename of './db/table' to './db/#sql2-179c-288289' (errno: 152) 
```

我跑`SHOW ENGINE INNODB STATUS`了，上面写着：

```
120725 12:38:37 Error in dropping of a foreign key constraint of table db/table,
in SQL command
ALTER TABLE `table` DROP FOREIGN KEY `fk_table_users1` , DROP FOREIGN KEY `fk_table_accounts1` , DROP FOREIGN KEY `fk_table_data1` 
Cannot find a constraint with the given id fk_table_users1. 
```

`SHOW CREATE TABLE 'table'`输出：

```
CREATE TABLE `table` (
 `id` int(11) NOT NULL auto_increment,
 `data_id` int(11) NOT NULL,
 `account_id` int(11) NOT NULL,
 `status` enum('pending','complete') NOT NULL default 'pending',
 `created_at` datetime NOT NULL,
 `created_by` int(11) NOT NULL,
 PRIMARY KEY  (`id`),
 KEY `fk_orders_users1` (`created_by`),
 KEY `fk_orders_data1` (`data_id`),
 KEY `fk_orders_accounts1` (`account_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

但是，当我通过 phpmyadmin 查看结构时，它会列出具有相同名称的外键。在删除外键之前我需要做其他事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T12:35:28.510

没有外键。请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)，其中说

```
KEY is normally a synonym for INDEX. 
```

所以基本上在表中你已经创建了索引，而不是外键。[有关外键信息，请单击此处](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-19T19:20:14.680

您需要暂时删除约束，以便可以将其删除。

设置 FOREIGN_KEY_CHECKS=0；

然后在删除外键后再次打开它们：

设置 FOREIGN_KEY_CHECKS=1;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T06:32:42.223

首先删除外键然后删除列

alter table 'table name' drop foreign key 'constraint id ;

如果您不知道约束 id，则在该约束 id 中创建数据库转储在转储文件中可用。

然后删除列..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T07:57:39.790

索引名称和约束名称可能不同。您应该首先使用代码删除约束：`ALTER TABLE tablename DROP FOREIGN KEY constraintname`

# linux - 从参数中提取字符串的shell脚本

> ID：11649093
> 
> 赞同：0
> 
> 时间：2012-07-25T11:54:55.287
> 
> 标签：linux, shell, unix

我正在开发一个 shell 脚本，它必须从传递的参数中提取字符串。如果我传递参数，比如

```
 test.sh arg1=someArgument Arg2=AnoTherArgument 
```

假设用户在任何情况下都可以传递带有名称和值的参数，

我必须提取参数并进行操作，例如

```
 for arg in "$@"
      do
          if [ lower("${arg}") == "arg1" ] then
                # extract arg1's value and do something
          elif [ lower("${arg}") == "arg2" ] then
                # extract arg2's value and do something
          fi
      done 
```

请帮助我如何在传递的相同情况下提取参数的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:15:26.557

为了清楚起见，我更喜欢这样的案例陈述：

```
while [ $# -gt 0 ]
do
    case $1 in
    a=* ) echo ${1#a=};;
    b=* ) echo ${1#b=};;
    # etc
    esac
    shift
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:08:39.890

使用双括号匹配 glob 模式；“then”之前需要分号

```
if [[ "$arg" = a=* ]];then echo ${arg#a=};fi 
```

或者

```
if [ "${arg%%=*}" = a ];then echo ${arg#a=};fi 
```

了解更多信息

```
man bash
/Parameter Expansion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:46:35.957

为什么要费心去解析参数？通过环境传递事物：

在`foo`：

```
#!/bin/sh
echo Value of arg1: ${arg1-default value} 
```

然后：

```
$ arg1=blah ./foo
Value of arg1: blah 
```

和

```
$ ./foo
Value of arg1: default value 
```

# c# - DateTime 只是日期？

> ID：11649101
> 
> 赞同：1
> 
> 时间：2012-07-25T11:55:17.597
> 
> 标签：c#, wpf, linq, datetime

遇到问题我只知道如何使用 DateTime 来显示我的结果，如下所示：

```
 {

            string uri = "http://localhost:8002/Service/HireDate";
            XDocument xDoc = XDocument.Load(uri);
            var staff = xDoc.Descendants("HireDate")
                .Select(n => new
                {
                    StartDate = DateTime.Parse(n.Element("HireFromDate").Value), //this line
                    EndDate = DateTime.Parse(n.Element("HireToDate").Value), //this line
                    TotalDaysHired = n.Element("NumberOfDaysHired").Value,
                })
                .ToList();

            dataGrid9.ItemsSource = staff;

    } 
```

然而，这在我的数据网格中输出如下：

```
15/07/2012 00:00:00
27/07/2012 00:00:00 
```

有没有办法删除我只想要日期的时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T11:57:47.220

所以你只想显示a as的`Date`一部分？您可以使用最易读的：`DateTime``String`[`DateTime.ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)

```
StartDate = DateTime.Parse(n.Element("HireFromDate").Value).ToShortDateString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:57:07.050

要将没有时间的日期作为字符串获取，您可以使用`ToShortDateString`或[自定义格式选项](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)提供给`ToString`：

```
var dateString = DateTime.Now.ToString("dd/MM/yyyy");
var shortDate = DateTime.Now.ToShortDateString(); 
```

文化在这两种格式中都被考虑在内，`ToShortDateString`并且`ToString`具有自定义格式（尽管格式仍然是您自己的）。`ToShortDateString`当前的文化可能更准确，因为它包含给定文化的正确格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:59:14.190

您可以使用 DateTime.ParseExact 函数。

例如：

```
 XDocument xDoc = XDocument.Load(uri);

        var staff = xDoc.Descendants("HireDate")
            .Select(n => new
            {
                StartDate = DateTime.ParseExact(n.Element("HireFromDate").Value, "dd/MM/yyyy", null), //this line
                EndDate = DateTime.ParseExact(n.Element("HireToDate").Value, "dd/MM/yyyy", null), //this line
                TotalDaysHired = n.Element("NumberOfDaysHired").Value,
            })
            .ToList();

        dataGrid9.ItemsSource = staff; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:59:22.493

当您输入日期时间时，您可以使用 ToString(string format) 方法设置正确的格式。

在这里您可以找到一些格式示例：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
 StartDate = DateTime.Parse(n.Element("HireFromDate").Value).ToString("dd/MM/yyyy"),
 EndDate = DateTime.Parse(n.Element("HireToDate").Value).ToString("dd/MM/yyyy") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T11:59:46.567

```
EndDate = DateTime.Parse(n.Element("HireToDate").Value).ToShortDateString() 
```

# c++ - 编译着色器和链接失败，但着色器验证成功

> ID：11649104
> 
> 赞同：2
> 
> 时间：2012-07-25T11:55:28.737
> 
> 标签：c++, opengl, glsl, codeblocks

我对我的着色器在做什么感到很困惑。我有一个着色器类，它为我包装了阴影的 opengl 部分。我在 code::blocks 中构建我的应用程序并运行它，编译失败，链接阶段失败，但验证`GL_VALIDATE_STATUS`成功并且着色器实际工作。

当我在代码块 IDE 之外运行它时，编译和链接阶段成功，验证也成功。在 IDE 中运行时，ProgramLog 和 InfoLog 为空，甚至没有警告，但在 IDE 之外运行时，编译和链接成功时，InfoLog 会显示警告。

我对此感到非常困惑，这是我的编译阶段：

```
GLuint handle = glCreateShader(a_Type);
glShaderSource(handle, 1, &a_Source, NULL); 
glCompileShader(handle); 
```

a_Type 可以是`GL_VERTEX_SHADER`,`GL_FRAGMENT_SHADER`或者是 a `GL_GEOMETRY_SHADER`，我的着色器代码是从文件加载的。`a_Source``const char*`

然后我继续检查编译状态：

```
glGetShaderiv(handle, GL_COMPILE_STATUS, &success); OGLCHECK
if(success != GL_TRUE)
{ 
```

这是一个逻辑检查，将`GL_TRUE`在从终端`GL_FALSE`运行但从 IDE 运行时进行。

链接检查如下

```
glGetProgramiv(m_ProgramHandle, GL_LINK_STATUS, &success); OGLCHECK
if(success != GL_TRUE)
{ 
```

和验证

```
glValidateProgram(m_ProgramHandle); OGLCHECK
glGetProgramiv(m_ProgramHandle, GL_VALIDATE_STATUS, &success); OGLCHECK
if(success != GL_TRUE)
{ 
```

总而言之，从使用 IDE 开始，着色器编译和链接状态失败，但验证通过，着色器工作，但 InfoLog 为空。从终端运行时，编译和链接状态成功，验证和着色器也正常工作。当从终端运行时，我还有一个填充的 InfoLog，例如警告。

这个问题是在我对来自这里的问题进行一些调查后形成的： [GLSL shader compilation on linux](https://stackoverflow.com/questions/11632203/glsl-shader-compilation-on-linux)

这是着色器类的源代码

```
#include "Shader.h"

Shader::Shader():m_FragmentHandle(0),m_GeometryHandle(0),m_VertexHandle(0),m_ProgramHandle(0),m_CurrentTexture(0)
{

}

Shader::~Shader()
{
    if(m_GeometryHandle != 0)
    {
        glDeleteShader(m_GeometryHandle);
        m_GeometryHandle = 0;
    }

    if(m_VertexHandle != 0)
    {
        glDeleteShader(m_VertexHandle);
        m_VertexHandle = 0;
    }

    if(m_FragmentHandle != 0)
    {
        glDeleteShader(m_FragmentHandle);
        m_FragmentHandle = 0;
    }
}

bool Shader::Load(const char* a_FileName)
{
    printf( "Loading shader: %s\n", a_FileName );

    char* shaderFile = new char[strlen(a_FileName) + 6]; //(char*)calloc(custom::strlen(a_FileName) + 6, sizeof(char));
    char* source = NULL;

    strcpy(shaderFile, a_FileName);
    strcat(shaderFile, ".geom");

    source = GetShaderSource(shaderFile);
    if(source != NULL)
    {
        printf( "Compiling geometry shader...\n" );
        m_GeometryHandle = Compile(GL_GEOMETRY_SHADER, source);

        free(source);
        source = 0;

        if(m_GeometryHandle == 0)
        {
            printf( "Geometry shader compiling failed.\n" );
            delete[] shaderFile;
            shaderFile = 0;

            return false;
        }
    }

    strcpy(shaderFile, a_FileName);
    strcat(shaderFile, ".vert");

    source = GetShaderSource(shaderFile);
    if(source != NULL)
    {
        printf( "Compiling vertex shader...\n" );
        m_VertexHandle = Compile(GL_VERTEX_SHADER, source);

        free(source);
        source = 0;

        if(m_VertexHandle == 0)
        {
            printf( "Vertex shader compiling failed.\n" );
            delete[] shaderFile;
            shaderFile = 0;

            return false;
        }
    }
    else
    {
        printf("No vertex shader found. A vertex and fragment shader are required!\n");
    }

    strcpy(shaderFile, a_FileName);
    strcat(shaderFile, ".frag");

    source = GetShaderSource(shaderFile);
    if(source != NULL)
    {
        printf( "Compiling fragment shader...\n" );
        m_FragmentHandle = Compile(GL_FRAGMENT_SHADER, source);

        free(source);
        source = 0;

        if(m_FragmentHandle == 0)
        {
            printf( "Fragment shader compiling failed.\n" );
            delete[] shaderFile;
            shaderFile = 0;

            return false;
        }
    }
    else
    {
        printf("No fragment shader found. A vertex and fragment shader are required!\n");
    }

    delete[] shaderFile;
    shaderFile = 0;

    CreateProgram();

    if(!Link())
    {
        printf( "Linking of shader \"%s\" failed!\n", a_FileName );
        return false;
    }

    printf( "Shader build succesfully!\n" );
    return true;
}

// WARNING: YOU NEED TO FREE THE RETURNED SOURCE YOURSELF!! free(buffer);
char* Shader::GetShaderSource(const char* a_FileName)
{
    FILE* f;
    f = fopen(a_FileName, "rb");

    if(f != NULL)
    {
        // Shader is available

        char* buffer;
        long size;

        fseek(f, 0L, SEEK_END);
        size = ftell(f);
        rewind(f);

        buffer = (char*)calloc(1, size+1);
        if(!buffer)
        {
            fclose(f);
            return NULL;
        }

        if(fread(buffer, size, 1, f) != 1)
        {
            fclose(f);
            return NULL;
        }

        fclose(f);
        return buffer;
    }

    return NULL;
}

GLuint Shader::Compile(const GLuint a_Type, const char* a_Source)
{
    if(a_Source == NULL)
        return 0;

    GLuint handle = glCreateShader(a_Type); OGLCHECK
    glShaderSource(handle, 1, &a_Source, NULL); OGLCHECK
    glCompileShader(handle); OGLCHECK

    int bufflen = 0;
    GLint success = GL_FALSE;

    glGetShaderiv(handle, GL_INFO_LOG_LENGTH, &bufflen); OGLCHECK
    if(bufflen > 1)
    {
        GLchar* logString = new GLchar[bufflen + 1];
        glGetShaderInfoLog(handle, bufflen, 0, logString); OGLCHECK
        printf( "Shader compile output:\n%s\n", logString );

        delete logString;
        logString = 0;
    } else {
        glGetShaderiv(handle, GL_PROGRAM_LOG_LENGTH, &bufflen); OGLCHECK
    }

    glGetShaderiv(handle, GL_COMPILE_STATUS, &success); OGLCHECK
    if(success != GL_TRUE)
    {
        printf( "Failed to compile shader!\n" );

        glDeleteShader(handle); OGLCHECK
        //handle = 0;
    }

    return handle;
}

void Shader::CreateProgram()
{
    m_ProgramHandle = glCreateProgram(); OGLCHECK

    if(m_GeometryHandle != 0)
    {
        glAttachShader(m_ProgramHandle, m_GeometryHandle); OGLCHECK
        printf( "Attaching geometry shader...\n" );
    }
    if(m_VertexHandle != 0)
    {
        glAttachShader(m_ProgramHandle, m_VertexHandle); OGLCHECK
        printf( "Attaching vertex shader...\n" );
    }
    if(m_FragmentHandle != 0)
    {
        glAttachShader(m_ProgramHandle, m_FragmentHandle); OGLCHECK
        printf( "Attaching fragment shader...\n" );
    }
}

bool Shader::Link()
{
    glLinkProgram(m_ProgramHandle);

    GLint bufflen = 0;
    glGetProgramiv(m_ProgramHandle, GL_INFO_LOG_LENGTH, &bufflen); OGLCHECK
    if(bufflen > 1)
    {
        GLchar *logString = new GLchar[bufflen + 1];
        glGetProgramInfoLog(m_ProgramHandle, bufflen, 0, logString);

        printf( "Shader linking output:\n%s\n", logString );

        delete logString;
        logString = 0;
    }

    GLint success = GL_FALSE;
    glGetProgramiv(m_ProgramHandle, GL_LINK_STATUS, &success); OGLCHECK
    if(success != GL_TRUE)
    {
        printf( "Shader failed to link!\n" );
        return false;
    }

    glValidateProgram(m_ProgramHandle); OGLCHECK
    glGetProgramiv(m_ProgramHandle, GL_VALIDATE_STATUS, &success); OGLCHECK
    if(success != GL_TRUE)
    {
        printf( "Shader program was not validated.!\n" );
    }

    GLint activeCount = 0;
    GLint maxNameLength = 0;
    glGetProgramiv(m_ProgramHandle, GL_ACTIVE_UNIFORMS, &activeCount); OGLCHECK
    glGetProgramiv(m_ProgramHandle, GL_ACTIVE_UNIFORM_MAX_LENGTH, &maxNameLength); OGLCHECK

    GLchar* name = new GLchar[maxNameLength];
    GLsizei length = 100;
    GLenum type = GL_INVALID_ENUM;
    GLint size = 0;

    for(int i=0; i<activeCount; ++i)
    {
        glGetActiveUniform(m_ProgramHandle, i, maxNameLength, &length, &size, &type, name); OGLCHECK
        GLint handle = glGetUniformLocation(m_ProgramHandle, name); OGLCHECK

        m_Parameters.insert(ParameterPair(name, handle));
    }

    glGetProgramiv(m_ProgramHandle, GL_ACTIVE_ATTRIBUTES, &activeCount); OGLCHECK
    glGetProgramiv(m_ProgramHandle, GL_ACTIVE_ATTRIBUTE_MAX_LENGTH, &maxNameLength); OGLCHECK

    delete name;
    name = new GLchar[maxNameLength];

    for(int i=0; i<activeCount; ++i)
    {
        glGetActiveAttrib(m_ProgramHandle, i, maxNameLength, &length, &size, &type, name); OGLCHECK
        GLint handle = glGetAttribLocation(m_ProgramHandle, name); OGLCHECK

        m_Attributes.insert(ParameterPair(name, handle));
    }

    delete name;
    name = 0;

    return true;
} 
```

当我创建着色器时，我会：

```
Shader gShader;
gShader.load("data/shaders/myshader"); 
```

加载程序加载 data/shaders/myshader.frag data/shaders/myshader.vert 等。您可以在 Load 函数中看到这一点。

更新 1：我发现尽管着色器似乎可以在 IDE 中工作，但我无法绑定到属性位置。但我可以更改片段着色器中的颜色，这会显示出来。从终端属性工作正常，我尝试在 2 个统一位置绑定 2 个纹理并进行了一些混合，工作正常。

# android - 在android中向应用程序添加静音按钮？

> ID：11649111
> 
> 赞同：2
> 
> 时间：2012-07-25T11:55:57.283
> 
> 标签：android, media-player

我的游戏应用程序正在使用音乐。我需要静音和取消静音按钮才能将暴民设置为静音模式。音乐在每个活动中运行，例如玩游戏和检查分数。但在菜单活动中添加了静音按钮。我用谷歌搜索没有得到任何确切的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:10:08.010

我会选择将音量设置为 0（静音）或 1（取消静音）`MediaPlayer.setVolume(float volumeLeft, float volumeRight)`。还保留用户音量设置。触发方式`Button`很容易实现`onClickListener()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:14:09.490

使用音频管理器并设置音量

```
 AudioManager audioManager = (AudioManager) getSystemService(ctx.AUDIO_SERVICE);
 audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0); 
```

# asp.net-mvc - TModel 在 Razor Helper 中未被识别为 Lamba 表达式

> ID：11649117
> 
> 赞同：0
> 
> 时间：2012-07-25T11:56:13.540
> 
> 标签：asp.net-mvc, razor, lambda, helper

我尝试使用 Razor Helper 为我执行一些 if 语句。我向它传递了一个包含某些规则的列表，并根据该规则创建了一个标签和输入文本字段。

我遇到的问题是我无法使用 Lambda 表达式作为参数。它不会识别 TModel 部分。

辅助方法如下：

```
@helper CreateCheckbox(Expression<Func<TModel, bool>> expression, object htmlAttributes, List<Rule> ruleList)
{    

} 
```

我得到的错误是：找不到命名空间“TModel”的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:38:26.593

您必须为 TModel 选择一种类型。因为您的视图没有任何泛型类型参数，所以它无法确定应该用什么类型代替 TModel。你必须给它一个实际的类型才能使用。

如果这不是一个选项，您可能只是为 HtmlHelper 类创建一个扩展方法，并使其成为一个泛型方法。有关如何执行此操作的示例，请参阅[此问题。](https://stackoverflow.com/questions/4760783/is-it-possible-to-create-a-generic-helper-method-with-razor)

# c - 如何在编译时向 GCC 添加自定义库？

> ID：11649125
> 
> 赞同：3
> 
> 时间：2012-07-25T11:56:34.833
> 
> 标签：c, gcc, compilation

我从网上下载了一个名为 libsal.a 的 C 库，为了访问该库中的 API，我在 main.c 中包含一个名为 #include 的头文件。我使用以下命令来编译它：

```
gcc -L /home/traana/Desktop/opensal-1.0.0/libsal.a main.c 
```

但是当我编译时出现以下错误

```
main.c:3:17: fatal error: sal.h: No such file or directory
compilation terminated. 
```

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:00:48.250

编译源代码时，不是库，而是相关的包含文件；所以你需要告诉 gcc 这些在哪里，比如

```
gcc -c -I/home/traana/Desktop/opensal-1.0.0/include main.c 
```

然后将应用程序与类似的东西链接起来

```
gcc -L/home/traana/Desktop/opensal-1.0.0 -lsal main.o 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T12:11:29.663

我相信您需要设置三个参数：

```
-I <include directory>
-L <library directory>
-l <library name> 
```

包含目录将是头文件的位置。库目录将是库的位置（.a 或 .so），库名称将是库文件的名称，没有前导“lib”前缀或其扩展名（即 -lsal 而不是 -l libsal 。一种 ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:58:30.810

如果 *.h 在 /home/traana/Desktop/opensal-1.0.0

尝试

```
 gcc -I /home/traana/Desktop/opensal-1.0.0 -L /home/traana/Desktop/opensal-1.0.0 main.c -lsal 
```

# html - 我怎样才能得到文件的路径？

> ID：11649127
> 
> 赞同：0
> 
> 时间：2012-07-25T11:56:52.370
> 
> 标签：html, ruby

```
:image => StorageRoom::Image.new_with_filename(path) 
```

我必须得到图像的路径。到目前为止，我已经手动指定了路径并且它有效，现在我已经放入了 heroku，但它显示加载错误 - 没有这样的文件存在。如何使用浏览按钮获取本地系统的路径值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:01:40.473

```
File.expand_path 
```

参考：[http ://saaridev.blogspot.com/2006/11/ruby-finding-absolute-path-of-running.html](http://saaridev.blogspot.com/2006/11/ruby-finding-absolute-path-of-running.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:09:38.947

您的问题可能与路径名无关，而与 Heroku 具有只读文件系统这一事实有关。如果您尝试在 Heroku 应用程序中将文件写入磁盘，它根本不起作用——文件将不会被保存。

例外是“临时”目录。您*可以*将文件保存在那里，但不能保证它们的持续时间超过单个请求的持续时间。

您尝试打开的文件是否实际保存在您的 Git 存储库中？如果是这样，它将在您的 Heroku 应用程序的磁盘上，您应该能够打开它。

要查看 Heroku 实例上的文件系统布局，您可以创建一个控制器方法，例如：

```
render :inline => Dir['**/*'].inspect 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:32:52.417

您不需要完整路径。就客户端机器中的文件路径而言，对于文件上传而言，路径是无关紧要的，因为它会给用户带来**安全风险**。

大多数现代浏览器不会发送文件上传的文件路径。您可以使用 Javascript 或 Flash 获取路径，但我仍然看不到这样做的逻辑。

当用户点击提交按钮时，浏览器至少应该向您发送文件名和文件数据以及一堆其他信息，如 mime 类型。假设您有近乎无限的内存资源，您的 Web 服务器会将文件写入磁盘或在内存中处理它。查看[RFC 1867](http://www.ietf.org/rfc/rfc1867.txt)以了解有关文件上传的更多信息。

# regex - 正则表达式中的 +(?!\d) 是什么意思？

> ID：11649138
> 
> 赞同：5
> 
> 时间：2012-07-25T11:57:43.617
> 
> 标签：regex

我也将其视为+$。

我在用

```
$(this).text( $(this).text().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,") ); 
```

将 10000 转换为 10,000 等。

我想我理解其他一切：

*   (\d) - 查找号码
*   (?=\d{3}) - 如果后跟 3 个数字
*   '+' - 第一次找到后不要停止
*   (?!\d) - 从最后一个数字开始？
*   /g - 整个字符串
*   ,"$1," - 用自我和逗号替换数字

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:01:53.687

我认为你有点误读了它：

> *   (?=\d{3}) - 如果后跟 3 个数字

请注意，正则表达式实际上是：

```
(?=(\d{3})+ 
```

即你错过了一个公开的paren。以下全部内容：

```
(\d{3})+(?!\d) 
```

在 内`(?= ... )`，这是一个*零宽度的前瞻断言*——这是一种很好的说法，里面的东西应该遵循我们迄今为止匹配的内容，但我们实际上并没有消费它。

`(?!\d)`说一个（`\d`即数字）不应该*跟随*，所以总共：

*   `(\d)`找到并捕获一个数字。
*   `(?=(\d{3})+(?!\d))`断言应该跟随一组或多组三位数，但它们后面不应有另一个数字。

我们替换为`"$1,"`，即捕获的第一个数字和一个逗号。

结果，我们将逗号放在后面有三位数的倍数的数字之后，这是一种很好的说法，我们将逗号添加为千位分隔符！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:01:08.233

`?!`表示**Negative lookahead**，它用于匹配未跟随其他内容的内容，在您的情况下为**数字**

# c# - 将文件上传到沙盒页面

> ID：11649142
> 
> 赞同：1
> 
> 时间：2012-07-25T11:57:59.903
> 
> 标签：c#, sharepoint, webclient

我在我的网站集中运行了沙盒解决方案。我已将文件作为字节数组上传到沙盒解决方案，并且在沙盒解决方案中，字节数组转换为文件并保存在文档库中。我用了

```
webclient.UploadData(address, method, byte[]) 
```

我可以通过 Page.Request.InStream 将字节数组发送到沙盒页面但是当我尝试发送大小为 50 MB 的文件的字节 [] 然后在沙盒页面中时，我无法获取该字节数组。

如何将字节数组发送到沙盒页面并在沙盒中处理该字节 []，即将其作为文件添加到文档库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:03:31.610

也许这个话题会对你有所帮助

[http://social.msdn.microsoft.com/Forums/br/tfsadmin/thread/b3cee101-1f6f-4c1c-a28d-71b393063894](http://social.msdn.microsoft.com/Forums/br/tfsadmin/thread/b3cee101-1f6f-4c1c-a28d-71b393063894)

> 默认情况下，SharePoint 允许上传的最大文件大小为 50MB

# javascript - 设置计时器以等待 swfobject 脚本加载 Flash 后备视频播放器

> ID：11649147
> 
> 赞同：0
> 
> 时间：2012-07-25T11:58:21.913
> 
> 标签：javascript, jquery, html5-video, swfobject

嗨，我已经建立了一个需要显示多个视频的页面。它测试是否可以在浏览器中播放视频（mp4 格式），如果可以，将构建一个 HTML5 视频标签。如果视频不能在浏览器中本地播放，那么它将回退到 Flash。我遇到的问题是，如果它不能播放 Mp4 文件，我必须加载 swfobject.js 文件来设置 Flash 播放器——但我只想这样做一次。

我将 swfObjLoaded 的全局变量设置为 false，然后尝试在脚本上执行 ajax 加载。但是 swfobject 脚本似乎加载得很慢，因此 swf 的注册正试图在脚本完全加载之前发生。因此，我尝试使用 setInterval 反复检查 swfObjLoaded 是否设置为 true 以及是否取消间隔并运行 setupFlash 函数。

这根本不起作用，似乎正在挂起我的浏览器。任何人都知道执行此操作的最佳方法。我知道 jQuery 延迟函数可能真的可以帮助我，但不幸的是，我坚持使用不包含延迟函数的 jQuery 1.3.2。有任何想法吗？

这是我的代码：

```
<html>
    <head>
        <title>HTML5 multiple videos test</title>
        <script type="text/javascript" src="http://media.topshop.com/javascript/3.3.2.3/lib/jquery/jquery.js"></script>
    </head>
    <body>

        <div style="width: 640px; height: 360px;">
            <div style="background-color: #ffe9db; width: 100%; height: 100%;">
                <div class="video_container_1" style="display: block; width: 420px; height: 236px;">
                    <a class="html5_vid" href="http://media.topshop.com/cms/pages/static/static-0000035506/flash/topshop_unique_2012_420x236.mp4">
                        <img src="http://media.topshop.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color7/cms/pages/static/static-0000035506/images/VIDEO_LEFT.jpg" alt="Download the Nick Knight video" />
                    </a>
                </div>
            </div>
        </div>
        <div style="width: 640px; height: 360px;">
            <div style="background-color: #ffe9db; width: 100%; height: 100%;">
                <div class="video_container_2" style="display: block; width: 407px; height: 224px;">
                    <a class="html5_vid" href="http://www.topshop.com/cms/pages/static/static-0000035506/flash/NEW_MAKEUP-HAIR-NAILS_02_a420X236.mp4">
                        <img src="http://media.topshop.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color7/cms/pages/static/static-0000035506/images/VIDEO_RIGHT.jpg" alt="Download the Nick Knight video" />
                    </a>
                </div>
            </div>
        </div>

    <script type="text/javascript">

      var vidLink = $("a.html5_vid"),
          canPlay = false,
          v = document.createElement("video"),
          vidCounter = 1,
          swfObjLoaded = false,
          interval,
          flashCode = '<object id="flash_vid_vidCount" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="vidWidth" height="vidHeight"><param name="movie" value="http://media.topshop.com/flash_content/player_page/videoPlayer.swf" \/><param name="allowFullScreen" value="true" \/><param name="allowScriptAccess" value="always" \/><param name="wmode" value="transparent" \/><param name="bgcolor" value="#ffffff" \/><param name="FlashVars" value="source=vidUrl&amp;still=posterUrl" \/><object width="vidWidth" height="vidHeight" type="application/x-shockwave-flash" flashvars="source=vidUrl&amp;still=posterUrl" data="http://media.topshop.com/flash_content/player_page/videoPlayer.swf" allowfullscreen="true" allowscriptaccess="always" wmode="transparent" bgcolor="#ffffff"><a title="Get Flash Player" href="http://www.adobe.com/go/getflashplayer"><img src="posterUrl" border="0" alt="Get Flash Player" width="vidWidth" height="vidHeight" \/><\/a><\/object><\/object>';

      if(v.canPlayType && v.canPlayType("video/mp4").replace(/no/, "")) {
        canPlay = true;
      } else {
        $.ajax({
            url: 'http://media.topshop.com/javascript/behaviour/swfobject.js',
            dataType: "script",
            async: false,
            success: function() {
                console.log("loaded the file via ajax");
                swfObjLoaded = true;
            }
        });
      }

      $.each(vidLink, function() {
        var currentLink = $(this);
        currentLink.css("display", "none");
        var vidUrl = currentLink.attr("href"),
            posterUrl = currentLink.children("img").attr("src"),
            vidContainer = currentLink.parent(),
            vidContainerParent = vidContainer.parent(),
            vidWidth = vidContainer.css("width").replace("px", ""),
            vidHeight = vidContainer.css("height").replace("px", "");

        if (canPlay === true) {
          console.log("canPlay is true");
          newVid = document.createElement("video");
          currentLink.replaceWith(newVid);
          $("div.video_container_" + vidCounter + " video").attr({id: "html_vid_" + vidCounter, controls: "controls", width: vidWidth, height: vidHeight}).append("<source src=" + vidUrl + " \/>");
          if(!$("div.video_container_" + vidCounter + " video").children("source").length) {
            $("div.video_container_" + vidCounter + " video").attr("src", vidUrl );
          }
          if (navigator.userAgent.toLowerCase().search("android") > -1) {
            var vid = document.getElementById("html_vid_" + vidCounter);
            vid.onclick = function() {
              if (vid.paused) {
                vid.play();
              } else {
                vid.pause();
              }
            }
          }
        } else {
          console.log("canPlay is false");
            function setupFlash() {
                vidContainerParent.hide();
                var tempFlashCode = flashCode.replace(/vidCount/g, vidCounter);
                    tempFlashCode = tempFlashCode.replace(/vidWidth/g, vidWidth);
                    tempFlashCode = tempFlashCode.replace(/vidHeight/g, vidHeight);
                    tempFlashCode = tempFlashCode.replace(/vidUrl/g, vidUrl);
                    tempFlashCode = tempFlashCode.replace(/posterUrl/g, posterUrl);
                swfobject.registerObject("flash_vid_" + vidCounter, "9.0.0");
                currentLink.replaceWith(tempFlashCode);
                vidContainerParent.show();
            }

            function checkSwfObj() {
                if (swfObjLoaded !== true) {
                    console.log("still not loaded");
                    var timer = setInterval(function(){checkSwfObj()},100);
                } else {
                    console.log("bloody thing is finally loaded");
                    clearInterval(timer);
                    setupFlash();
                }
            }
            checkSwfObj();
        }
        vidCounter++;
      });
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:49:29.883

您可以定义简单的加载器对象，例如：

```
var SwfLoader = {
    requestSend: false,
    hasResponse: false,
    callbacks: [],

    bind: function (func) {
        if (this.hasResponse) {
            func();
            return;
        }
        this.callbacks.push(func);
        if (!this.requestSend) this.sendRequest();
    },

    sendRequest: function () {

        this.requestSend = true;

        $.ajax({
            // ....
            // Your request parameters here
            // ....
            success:function () {
                this.hasResponse = true;
                SwfLoader.executeHandlers();
            }
        });
    },

    executeHandlers: function () {
        for (var i = 0; i < this.callbacks.length; i++) {
            this.callbacks[i]();
        }
    }
}; 
```

然后`SwfLoader.bind(function () {/* you code to setup flash player */});`在浏览器无法播放电影时使用

# android - Android 4.1：如何检查应用程序是否禁用通知？

> ID：11649151
> 
> 赞同：102
> 
> 时间：2012-07-25T11:58:31.397
> 
> 标签：android, android-notifications, android-notification-bar

Android 4.1 为用户提供了一个复选框来禁用特定应用程序的通知。

但是，作为开发人员，我们无法知道通知调用是否有效。

我真的需要检查当前应用程序是否禁用了通知，但我在 API 中找不到任何设置。

有没有办法在代码中检查此设置？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-25T12:25:15.523

你不能100%不能。

在[这个 Google I/O 2012 视频](https://youtu.be/Yc8YrVc47TI?t=48m4s)中被问到，新通知的项目负责人声明你不能。

* * *

## 编辑

**2016 年更新：**现在您可以查看它，如[Google I/O 2016 视频](https://youtu.be/w45y_w4skKs?list=PLOU2XLYxmsILe6_eGvDN3GyiodoV3qNSC&t=192)中所述。

使用[`NotificationManagerCompat.areNotificationsEnabled()`](https://developer.android.com/reference/android/support/v4/app/NotificationManagerCompat.html#areNotificationsEnabled())支持库中的 来检查通知是否在 API 19+ 上被阻止。API 19 以下的版本将返回 true（启用通知）。

[![在此处输入图像描述](../Images/483adab36b9e24775cc0aba4af01f624.png)](https://i.stack.imgur.com/LI99f.png)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-01-02T16:58:35.077

@blundell 的回答是正确的，但在较新的版本中有一个小的变化。

```
NotificationManagerCompat.from(context).areNotificationsEnabled() 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-05-07T17:31:32.987

其实这很容易做到：

```
/**
 * Created by desgraci on 5/7/15.
*/
public class NotificationsUtils {

    private static final String CHECK_OP_NO_THROW = "checkOpNoThrow";
    private static final String OP_POST_NOTIFICATION = "OP_POST_NOTIFICATION";

    public static boolean isNotificationEnabled(Context context) {

        AppOpsManager mAppOps = (AppOpsManager) context.getSystemService(Context.APP_OPS_SERVICE);

        ApplicationInfo appInfo = context.getApplicationInfo();

        String pkg = context.getApplicationContext().getPackageName();

        int uid = appInfo.uid;

        Class appOpsClass = null; /* Context.APP_OPS_MANAGER */

        try {

            appOpsClass = Class.forName(AppOpsManager.class.getName());

            Method checkOpNoThrowMethod = appOpsClass.getMethod(CHECK_OP_NO_THROW, Integer.TYPE, Integer.TYPE, String.class);

            Field opPostNotificationValue = appOpsClass.getDeclaredField(OP_POST_NOTIFICATION);
            int value = (int)opPostNotificationValue.get(Integer.class);

            return ((int)checkOpNoThrowMethod.invoke(mAppOps,value, uid, pkg) == AppOpsManager.MODE_ALLOWED);

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-02T06:11:56.907

如果您使用的是 Xamarin 并且需要此答案，则可以使用以下代码：

```
//return true if this option is not supported.
public class NotificationsUtils 
{
    private const String CHECK_OP_NO_THROW = "checkOpNoThrow";
    private const String OP_POST_NOTIFICATION = "OP_POST_NOTIFICATION";

    public static bool IsNotificationEnabled(global::Android.Content.Context context) {

        AppOpsManager mAppOps = (AppOpsManager) context.GetSystemService(global::Android.Content.Context.AppOpsService);

        ApplicationInfo appInfo = context.ApplicationInfo;

        String pkg = context.ApplicationContext.PackageName;

        int uid = appInfo.Uid;

        try {

            var appOpsClass = Java.Lang.Class.ForName("android.app.AppOpsManager");
            var checkOpNoThrowMethod = appOpsClass.GetMethod(CHECK_OP_NO_THROW,Java.Lang.Integer.Type,Java.Lang.Integer.Type,new Java.Lang.String().Class);//need to add String.Type

            var opPostNotificationValue = appOpsClass.GetDeclaredField (OP_POST_NOTIFICATION);
            var value = (int)opPostNotificationValue.GetInt(Java.Lang.Integer.Type);
            var mode = (int)checkOpNoThrowMethod.Invoke(mAppOps,value, uid, pkg);
            return (mode == (int)AppOpsManagerMode.Allowed);

        } catch (Exception) 
        {
            System.Diagnostics.Debug.WriteLine  ("Notification services is off or not supported");
        } 
        return true;
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-08T12:36:21.080

似乎没有办法查询通知状态。

我推荐这个：

*   使用通知设计您的应用程序。
*   让用户禁用应用程序设置中的通知。
*   检查通知是否被点击。如果用户单击通知，请将其保存到首选项。
*   在您的应用中，如果通知设置已打开，并且用户是 Android 4.1+ (API 16)，但如果用户在几天/几周内没有点击通知，则假定用户禁用了通知。

不是100%正确。但这给出了一个意见。
例如，如果用户在 10-15 天内没有点击任何应用通知，则可能是他禁用了它

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-18T12:05:02.173

我使用这种方法来检查通知是否启用，上述方法将用于检查通知是否启用。但是从**Android 8**开始，为了创建通知**，我们必须先创建一个频道**，所以从 Oreo 开始，***我们必须检查您的通知频道是否启用***。

```
 /**
     * Checking Whether notifications are enabled or not
     * @return true if notifications are enabled otherwise false
     */
    public static final String CHANNEL_ID = "your_channel_id";

    private boolean isNotificationChannelEnabled(){
        if(NotificationManagerCompat.from(this).areNotificationsEnabled()) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
                NotificationChannel channel = manager.getNotificationChannel(CHANNEL_ID);
                if (channel == null)
                    return true; //channel is not yet created so return boolean
                // by only checking whether notifications enabled or not
                return channel.getImportance() != NotificationManager.IMPORTANCE_NONE;
            }
            return true;
        }
        return false;
    } 
```

# sql-server - 如何将浮点列转换为日期时间

> ID：11649154
> 
> 赞同：0
> 
> 时间：2012-07-25T11:58:42.557
> 
> 标签：sql-server, sql-server-2008

我有一个包含 DateField(DataType : DateTime) 和 TimeField(DataType : Float) 的表我的输出应该是 DateTime 。我的表在 SQL Server 2008 中

这是一个例子：

表 A

```
ID  StartDate                            StartTime
1   2012-06-08 00:00:00.000              1223
2   2012-08-07 00:00:00.000              910
3   2012-05-02 00:00:00.000              1614
4   0094-07-13 00:00:00.000              1245
5   1994-04-18 00.00:00.000              2573 
```

我需要以这样的方式获取我的输出，它应该验证正确的时间和正确的日期，并附加这两个并插入表 B

表 B：

```
ID    StartDateTime
1     2012-06-06 12:23:00.000
2     2012-08-07 09:10:00.000
3     2012-05-02 16:14:00.000 
```

请注意，我故意将第 4 行和第 5 行排除在结果集中；这些行应该被忽略，因为它们不包含有效的日期时间或时间数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:02:15.303

您是否考虑过更正设计，并将日期/时间存储在一起，或者至少使用正确的数据类型存储日期和时间？同时：

```
SELECT StartDate + STUFF(RIGHT('0' + RTRIM(StartTime), 4), 3, 0, ':') 
  FROM dbo.table
  WHERE ISDATE(StartDate) = 1 AND CONVERT(INT, StartTime) < 2400

  -- wow what a bunch of absolute garbage data you have
  -- what Government agency are you paying to provide this data?

  AND CONVERT(INT, StartTime) % 100 BETWEEN 0 AND 59; 
```

# python - 任何使用 python 的 Windows 包构建器（如 Inno Setup）

> ID：11649155
> 
> 赞同：1
> 
> 时间：2012-07-25T11:58:45.457
> 
> 标签：python, windows, package, inno-setup

我知道 python，我正在做一个使用 Inno 设置的项目。是否有任何包生成器可以在其中编写安装代码在 python 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:38:35.450

您可以将 python 与 inno 一起使用。使用 inno，您可以收集您需要的所有用户数据，使用 python，您可以使用这些用户数据完成所有其他工作。为此，您需要在设置中包含 python 文件。在您的设置过程中，您需要提取文件，然后您可以调用您的 python 脚本。

# java - 如何检查用户是否已登录 Google 并在未登录时显示链接/按钮？

> ID：11649159
> 
> 赞同：1
> 
> 时间：2012-07-25T11:59:11.760
> 
> 标签：java, google-app-engine

我正在编写我的第一个 Google App Engine 应用程序，主要是作为一种学习体验，它是一种非常简单的 Pastebin……我不想处理垃圾邮件，所以认为要求用户登录将是一个足够安全的选择。
在这一点上，这就是我想要的：

*   访问者看到主页，如果访问者登录到谷歌，他会看到“保存粘贴”按钮，如果用户没有登录，他会看到一个链接/按钮登录到谷歌

我已经阅读了几篇文章和教程（[1](https://developers.google.com/appengine/docs/java/users/overview)），但它们让我想到，除了少数允许的人之外，我会锁定所有人，或者这种身份验证是为了管理我的应用程序，而不是仅仅检查用户是否登录或不。

另一方面，如果您可以建议一个垃圾邮件检查器或类似的，这很容易实现，请告诉我。

我发现特别令人困惑的是，我们必须在创建应用程序时定义身份验证类型，因为这将由我不理解的代码实现。

总结一下：我如何检查用户是否登录到谷歌并在他没有登录时显示链接/按钮？

注意：我使用[Java](https://developers.google.com/appengine/docs/java/gettingstarted/creating)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:53:29.643

不要检查用户是否登录到谷歌，而是让他们使用谷歌 Oauth api 登录到您的应用程序。在这种方法中，您将对用户有更多的控制权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:46:35.343

您提到的[用户 API](https://developers.google.com/appengine/docs/java/users/overview)正是您所需要的。只需按照该页面中提供的示例进行操作即可。

您获取用户，如果用户不为空，则显示保存粘贴按钮，您还应该将保存粘贴操作的 url 设置为需要登录。如果用户为空，则显示登录 url。如果用户未登录，将显示登录页面。

身份验证系统分为三种类型：

1.  Google 帐户：任何拥有 Google 帐户的人都可以使用（甚至可以是非 gmail 帐户）这可能是您想要使用的选项。
2.  Google Apps：仅适用于特定的 Google Apps 域（例如 yourcompany.com）
3.  Open Id：任何拥有 OpenId 身份的人都可以使用（Google、Yahoo、MySpace 等）

# javascript - 如何使用 kmllayer 并使用听众制作菜单？

> ID：11649167
> 
> 赞同：0
> 
> 时间：2012-07-25T11:59:45.000
> 
> 标签：javascript, html, kml

我有一张添加了 kmllayer 的地图：

```
 ctaLayer = new google.maps.KmlLayer('http://www.npd.no/engelsk/cwi/pbl/en/aFactGlobe/disc/ActivityStatus_Producing_labels.kml');
    ctaLayer.setMap(map); 
```

我如何：

1.  解析数据以制作包含所有生产字段的菜单（kml 文件中的信息）
2.  为菜单中的每个字段添加一个单击侦听器，以便弹出一个窗口（我想做与单击标记本身相同的操作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:31:47.283

KmlLayer 不允许访问显示的对象。您可以使用第三方 KML 解析器（如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)）创建侧边栏。

[使用 geoxml3 的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_icon_linkto.html?filename=http://www.geocodezip.com/geoxml3_test/visualisationmagazine_com_lacreativemap_kml.xml)

使用第三方 KML 解析器的一个缺点是您失去了将数据呈现为图块的优势，因此对于复杂的 KML，性能不会那么好。

另一种选择是将您的 kml 导入 FusionTables。

[使用 FusionTables 的示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)

# django - django 文件上传 - 移动或复制文件？

> ID：11649171
> 
> 赞同：1
> 
> 时间：2012-07-25T11:59:51.760
> 
> 标签：django, file-upload

当我将文件上传到 django 时，它首先通过 UploadHandlers。我用它来写一个进度条。上传完成后，将调用“上传文件”视图。请求对象将具有 InMemoryUploadedFile 或磁盘上的临时文件。

这是我的问题：文档建议逐块复制文件。对于大文件，这不会花费很长时间（进度条停留在 100%）？

做一个“移动”操作不是更好吗？例如，在 Windows 上，您几乎可以立即在同一个驱动器号内移动文件，复制需要很长时间。我相信这同样适用于 Unix 系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:12:25.513

是的，这同样适用于 Unix 系统......其中“驱动器号”更多的是路径，因此您可能会发现 /opt/django/YourApp 和 /opt/django/tmpUploadDir 实际上是两个不同的设备。

因此，总的来说，相信“移动”并不值得。另一方面，在客户关闭“100% 完成”对话框后，您可以在客户查看过程之外进行复制。

或者您可以将复制时间计入总百分比。假设您知道复制速度为每秒 1 Mb，并且您观察到网络上传速度以每秒 100 Kb 的速度进行。然后您知道对于 1 GB 文件的总传输时间将是 1100 秒（不是 1000 秒），并且一旦计算出“旧”百分比为 X，您将能够将其显示为 X*DiskSpeed/(DiskSpeed + NetworkSpeed) . 当用户上传了 100% 的文件时，他会看到进度条在 91% 处，一直增长到 100% 时，复制也完成了。

如果您的处理不仅仅是一个简单的副本，例如，如果您正在通过 ffmpeg 重新编码视频，则可以使用最后一种方法。不过，您确实需要事先很好地估计处理时间，否则您最终会得到一个“上传”栏，虽然它是非单调的（即，您永远不会看到它从 80% 变为 79%），但会断断续续地进行并开始。

我的观点是，与上传时间相比，复制时间可以忽略不计，可以安全地忽略。如果不是，那么可能会显示第二个不同的进度条，以便用户看不到他/她可能认为“异常”的任何内容。

# c# - 在 C# 中加载数据 infile 查询时出错

> ID：11649185
> 
> 赞同：0
> 
> 时间：2012-07-25T12:00:35.453
> 
> 标签：c#, mysql

我对以下代码有问题：-

```
 private void btnUpload_Click(object sender, EventArgs e)
    {

        string nm = txtFilename.Text;
        string qry = "LOAD DATA INFILE 'D:\\HHTFiles\\" + nm + "' INTO TABLE `table1`.`location`FIELDS TERMINATED BY '-->'LINES TERMINATED BY '\r\n'(Barcode,BinLoc);";
        cmd = new OdbcCommand(qry, con);
        int i = cmd.ExecuteNonQuery();
        if (i > 0)
        {
            MessageBox.Show(" File loaded successfully...");
        }

    }

private void btnBrowse_Click(object sender, EventArgs e)
    {
        OpenFileDialog openfiledailog1 = new OpenFileDialog();
        openfiledailog1.InitialDirectory = "D:\\HHTFiles\\";
        openfiledailog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        openfiledailog1.FilterIndex = 2;
        openfiledailog1.RestoreDirectory = true;

        if (openfiledailog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if ((openfiledailog1.OpenFile()) != null)
                {

                     txtFilename.Text = openfiledailog1.SafeFileName.ToString();

                }
            }
            catch (Exception ex)
            {
              MessageBox.Show("Error: Could not read file from disk. Original error: "      + ex.Message);
            }
        }
    } 
```

如果我在查询中给出完整的文件路径，它可以正常运行：- string qry = "LOAD DATA INFILE 'D:\HHTFiles\ ABC.txt' INTO TABLE `table1`. `location`FIELDS TERMINATED BY '-->'LINES TERMINATED BY '\ r\n'(条形码,BinLoc);"; 但是当文件路径在 String 变量中传递时，它会引发错误。

错误：- 错误 [HY000] [MySQL][ODBC 5.1 驱动程序][mysqld-5.1.48-community] 找不到文件“D:HHTFilesABC.txt”（错误代码：2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:16:27.207

@Aghilas它得到了解决:)虽然我不确定为什么我首先会出错。Anway，我只是将 '\\' 替换为 '/' 并且运行良好。

```
 string nm = txtFilename.Text;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.Append("LOAD DATA INFILE ");
        stringBuilder.Append(Path.Combine("'D:/HHTFiles/", nm));
        stringBuilder.Append("' INTO TABLE `table1`.`location`FIELDS TERMINATED BY '-->'LINES TERMINATED BY '\r\n'(Barcode,BinLoc);"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:04:02.143

尝试使用 Path.Combine

```
Path.Combine("D:\\HHTFiles\\", nm); 
```

并使用 StringBuilder 来构建您的查询

```
 StringBuilder stringBuilder = new StringBuilder();
 stringBuilder.Append("LOAD DATA INFILE ");
 stringBuilder.Append(Path.Combine("D:\\HHTFiles\\", nm));
 stringBuilder.Append(" INTO TABLE table1.location");
 stringBuilder.Append(" FIELDS TERMINATED BY '-->'"); 
 stringBuilder.Append(" LINES TERMINATED BY (");              
 stringBuilder.Append(Barcode.BinLoc);
 stringBuilder.Append(")");

 string qry = stringBuilder.ToString(); 
```

# blackberry - 如何从黑莓本机调用javascript函数？

> ID：11649186
> 
> 赞同：0
> 
> 时间：2012-07-25T12:00:35.893
> 
> 标签：blackberry, blackberry-jde, scriptengine, javascript-engine

我正在开发一个应用程序，我需要在其中调用一些从黑莓本机到 javascript 的方法。

当我点击后退键事件时，我想触发**onBackKeyDown()**方法，该方法在 javascript 中声明。

主.java

```
protected boolean keyDown(int keycode, int time) {
    // TODO Auto-generated method stub

    if(Keypad.key(keycode) == Keypad.KEY_ESCAPE)
    {
           // onBackKeyDown(); 
         // i want to call the following method which is declared in main.js file 
        Dialog.alert("this is back button");        
        return true;

    }
    return super.keyDown(keycode, time);
} 
```

main.js

```
 function onBackKeyDown() {
   try {
       if ($.mobile.activePage.is("#Page1")) {
         $.mobile.changePage("#page5");
        } else if ($.mobile.activePage.is("#page2")) {
           $.mobile.changePage("#main");
       } else if ($.mobile.activePage.is("#page3")) {
           $.mobile.changePage("#main");
       } else if ($.mobile.activePage.is("#main")) {
           navigator.app.exitApp();
       }
} catch(e) {
    alert("Exception:ConsoleLog.log:" + e);
} 
```

}

正如我所知道的，通过使用**"extendScriptEngine"**，在 javascript 中声明的方法在本机中调​​用。但是在这里如何根据我上面的代码调用本机的javascript方法......任何人都可以帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:06:55.937

您没有显示此代码，但我必须假设您的应用程序有一些`Screen`包含某种浏览器字段，该字段正在显示 HTML 内容。

`net.rim.device.api.browser.field2.BrowserField`如果您的应用只需要支持 OS 5.0 及更高版本，我无法在没有看到该代码的情况下肯定地告诉您，但我建议您使用（浏览器字段 2）。

如果您必须支持低于 OS 5.0，[我不知道该怎么做](http://supportforums.blackberry.com/t5/Java-Development/Blackberry-BrowserField-invoking-javascript-programmatically/td-p/21391)。

无论如何，有了这个 5.0+ `BrowserField`，你可以这样做：

```
BrowserFieldConfig config = new BrowserFieldConfig();
config.setProperty(BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE);  // should be the default

// Browser basic initialization
BrowserField _browserField = new BrowserField(config); 
```

接着

```
protected boolean keyDown(int keycode, int time)
{
    if(Keypad.key(keycode) == Keypad.KEY_ESCAPE)
    {
        // i want to call the following method which is declared in main.js file 
        _browserField.executeScript("onBackKeyDown()");
        Dialog.alert("this is back button");        
        return true;

    }
    return super.keyDown(keycode, time);
} 
```

# string - 是否可以在处理中比较两个字符？

> ID：11649190
> 
> 赞同：0
> 
> 时间：2012-07-25T12:01:07.047
> 
> 标签：string, char, compare, character, processing

我是一名新手程序员，我正在尝试比较来自不同字符串的两个字符，这样我就可以从每个字符串中给出一个任意索引并检查它们是否匹配。从处理网站看来，您可以比较两个字符串，我已经这样做了，但是当我尝试使用字符进行比较时，参数 (char,char) 似乎不适用。有人可以告诉我哪里出错了吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:45:39.243

您可以使用[String](http://processing.org/reference/String.html)的[charAt()](http://processing.org/reference/String_charAt_.html)方法/函数从所需索引处的每个字符串中获取字符，然后简单地比较：

```
String s1 = ":)";
String s2 = ";)";

void setup(){
  println(CompareCharAt(s1,s2,0));
  println(CompareCharAt(s1,s2,1));
}

boolean CompareCharAt(String str1,String str2,int index){
  return s1.charAt(index) == s2.charAt(index);
} 
```

**请注意**，当您比较字符串`==`没有帮助时，您需要使用字符串的[equal()](http://processing.org/reference/String_equals_.html)

```
String s1 = ":)";
String s2 = ";)";

println(s1.equals(s2));
println(s1.equals(":)")); 
```

此外，如果数据来自外部来源，则在使用相同大小写时比较两个字符串通常是个好主意：

```
println("MyString".equals("myString"));
println("MyString".toLowerCase().equals("myString".toLowerCase())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:09:21.093

也许您可以在将字符转换（类型转换）为字符串后传递参数。

（字符串（字符），字符串（字符））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:14:17.193

是的。只需使用 == 因为它被解释为 char 数据类型。这是假设您已经从字符串中拆分了字符...

```
char a = 'a';
char b = 'a';
if(a == b) {
 // etc
} 
```

如上所述，使用 .equals() 进行字符串比较。

```
String a = "a";
String b = "a";
if(a.equals(b)) {
 // etc
} 
```

此外，将 char 转换为 String 的正确方法是 str() 而不是 string()

# javascript - javascript变量访问错误

> ID：11649192
> 
> 赞同：2
> 
> 时间：2012-07-25T12:01:10.120
> 
> 标签：javascript

我有下面的代码片段：

```
var ret_ = function(x){
    return x;
}
var make_cps=function(x,c_){
    return c_(x);
}
var pred = {
    _position: 0,
    setPosition: function (i) {
        _position = i
    },
    getPosition: function () {
        return _position
    },
    _size: 0,
    setSize: function (i) {
        _size = i
    },
    getSize: function () {
        return _size
    },
    _context: null,
    setContext: function (x) {
        _context = x
    },
    run: function () {
        return function (c_) {
            return make_cps(_position, c_);
        }(ret_) == 2;
    }
} 
```

当我像下面这样运行它时，它运行正确：

```
pred.setPosition(2)  
pred.setSize(10)  
pred.setContext(null)  
var res = pred.run()  
console.log(res)  // Output: true 
```

但是如果我将其替换`_position`为未定义`getPosition()`的错误。`getPosition()`另外，如果我更改为`this.getPosition()`它说`this`没有名为的成员`getPosition()`

```
var pred = {
    _position: 0,
    setPosition: function (i) {
        _position = i
    },
    getPosition: function () {
        return _position
    },
    _size: 0,
    setSize: function (i) {
        _size = i
    },
    getSize: function () {
        return _size
    },
    _context: null,
    setContext: function (x) {
        _context = x
    },
    run: function () {
        return function (c_) {
            return make_cps(this.getPosition(), c_); // gives Error here
        }(ret_) == 2;
    }
} 
```

请有人阐明这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:06:40.767

你已经失去了你的背景。在你放置 this.getPosition() 的地方，这将作为窗口对象返回。

如果您更改该行以读取

```
return make_cps(pred.getPosition(), c_); 
```

它将成功运行。

或者，您可以将运行功能更改为读取

```
run: function () {
  var that = this;

  return function (c_) {
      return make_cps(that.getPosition(), c_);
  }(ret_) == 2;
} 
```

**编辑**：澄清

_position 仍在工作而不是遇到相同问题的原因是您实际上并没有在当前代码中设置 prev._position 。

```
setPosition: function (i) {
    _position = i
},
getPosition: function () {
    return _position
} 
```

它实际上在做的是创建一个名为 _position 的新全局变量并使用它。

这段代码实际上应该是：

```
setPosition: function (i) {
    this._position = i
},
getPosition: function () {
    return this._position
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:15:42.883

这是设置一个全局变量`_position`：

```
setPosition: function (i) {
    _position = i
}, 
```

它不是`pred`对象上的变量。

当您在此处访问它时：

```
run: function () {
    return function (c_) {
        return make_cps(_position, c_);
    }(ret_) == 2;
} 
```

您正在使用该全局变量。

如果你想使用实例属性，你需要开始使用`this`：

```
setPosition: function (i) {
    this._position = i
},

run: function () {
    var pred = this;
    return function (c_) {
        return make_cps(pred._position, c_);
    }(ret_) == 2;
} 
```

# android - Android SearchSuggestSelection 启用查询以开头而不是包含搜索

> ID：11649194
> 
> 赞同：2
> 
> 时间：2012-07-25T12:01:11.230
> 
> 标签：android, search-suggestion

我正在使用 Android [SearchRecentSuggestionsProvider](http://developer.android.com/reference/android/content/SearchRecentSuggestionsProvider.html)和[Searchable Configuration](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html#CustomSearchableConfiguration)在应用搜索中显示以前的内容，并希望将建议的响应限制为仅返回以 ? （用户输入的内容）

目前“p”返回电话、ipod、照片、快乐，而我所追求的只是电话和照片

像 % 这样的与 SQL 相当的东西，但我似乎无法让它工作。

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="@string/product_search_hint"
    android:imeOptions="actionSearch"
    android:label="@string/app_label"
    android:searchSuggestAuthority="com.myapp.ProductSearchSuggestionProvider"
    android:searchSuggestSelection="word MATCH ?" >
</searchable> 
```

试过：

```
android:searchSuggestSelection="WORD LIKE '%'?" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:59:19.310

If you were implementing a fully custom suggestion provider, applying customizations at this level would work as expected. However, under the covers, SearchRecentSuggestionsProvider queries its local table with the following hard-coded arguments ([have a look](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/content/SearchRecentSuggestionsProvider.java)):

*   selection = "display1 LIKE ?"
*   selectionArgs = ["%{query}%"]

where {query} is the search query (it is sandwiched between two percent signs so that any character match anywhere in the string counts). It ignores the value passed in for the selection string (which is what you are setting with the `searchSuggestSelection` parameter) and the args array (beyond checking if it is empty), so there really isn't much you can do from XML.

Because the implementation ignores incoming parameters, there is no easy fix or override. To save yourself duplicate coding, I would:

1.  Copy the entire implementation of `SearchRecentSuggestionsProvider` from the link above. Nothing the class does should be framework private, so a direct copy should compile.
2.  Modify the construction statement from the args array, inside the `query()` method, to be `String like = selectionArgs[0] + "%"` instead of `String like = "%" + selectionArgs[0] + "%"` (i.e. remove the first percent)
3.  Subclass `ProductSearchSuggestionProvider` from your new implementation instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:02:59.427

您是否尝试过字符串连接？

```
word LIKE ? || '%' 
```

`||`是 SQLite 中的字符串连接。

# couchdb - CouchApp：包含 include_docs=true 的列表函数

> ID：11649200
> 
> 赞同：2
> 
> 时间：2012-07-25T12:01:30.607
> 
> 标签：couchdb, couchapp

我正在编写一个简单的 CMS CouchApp 作为宠物项目。我在 OS X 10.7.4 上运行 CouchDB 1.2.0 并使用 Python CouchApp 开发工具。

基本上我想将页面作为文档，并且页面将引用另一个包含站点共享布局的文档。

页面文档示例：

```
{
   "_id": "index",
   "_rev": "3-d5451ea54212ae6ec0d8d2d95c5f225d",
   "content": "<img src=\"/images/img.jpg\"/> <p>Lorem ipsum dolor sit amet.</p>",
   "layout": "layouts/default"
} 
```

布局文档示例：

```
{
   "_id": "layouts/default",
   "_rev": "1-d2fa96e15ab8768828b262d81265f3d2",
   "content": "<!DOCTYPE html> <html><head> <title>Foo</title> </head><body><div>{{content}}</div></body> </html>"
} 
```

所以基本上要呈现一个页面，我需要获取两个文档。然后我会使用 Mustache 将页面呈现到布局中。

我摆弄了一段时间的 show 函数，但找不到在函数中获取布局文档的方法。然后我偶然发现`include_docs`，我现在正试图使用​​列表函数和视图让它工作。我的地图功能如下：

```
function(doc) {
    if (doc.layout) {
        emit([doc._id, 1], doc);
        emit([doc._id, 0], {_id: doc.layout });
    }
}; 
```

当我在提供参数的浏览器中导航到视图本身时`include_docs=true&startkey=["index",0]&endkey=["index",1]`，它工作得很好并且正在加载布局文档。

但是，布局文档不会传递给列表函数。在上述视图上运行此列表功能

```
function(head, req) {  
    var doc = null;
    var row = getRow();

    do
    {   
        if (!row.value.layout){
            doc = row.value;
        }
    } while (row = getRow())

    for (i in doc) {
        send(i);
    }
} 
```

...具有相同的参数呈现：

```
_id 
```

我做了一些谷歌搜索，并注意到[CouchDB 中存在一个错误，](https://issues.apache.org/jira/browse/COUCHDB-444)其中链接的文档没有传递到列表函数。据我所知，这应该已经修复了。这是倒退的情况还是我被削弱了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:19:12.680

该行的值存储在 row.value 中，但该行的文档在 row.doc 中。:)

# html - 放大 Firefox 时的 Youtube 视频行为

> ID：11649202
> 
> 赞同：0
> 
> 时间：2012-07-25T12:01:33.250
> 
> 标签：html, css, firefox, youtube

由于某种原因，[我的网页](http://www.streetstyles4all.co.uk)在 Firefox 中无法正确显示。在 IE9、Safari、chrome 中正确显示。

在 Firefox 中，如果我**缩小**或布局更改。但随后**YouTube 视频开始涂抹和像素化**。我让一个朋友在他们的计算机上检查 Firefox，同样的事情发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:26:50.303

只需`<div class="clear"></div>`在您上次更新 div 之后添加最新消息`<div class="updates"></div>`

# oracle - 请帮助我理解这个 PL/SQL

> ID：11649205
> 
> 赞同：0
> 
> 时间：2012-07-25T12:01:36.330
> 
> 标签：oracle, plsql, oracle10g

我必须编辑一个 PL/SQL 函数。我遇到了我不明白的这条线。这是做什么的？

```
TABLE1 TABLE2%ROWTYPE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:05:07.570

看看这个，它可能会有所帮助：[http ://docs.oracle.com/cd/B28359_01/appdev.111/b28370/rowtype_attribute.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/rowtype_attribute.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:05:19.777

该行声明了一个名为 的变量`TABLE1`，它是一种记录类型，其字段与实际表的列相同`TABLE2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:06:00.780

你的前任有一个很奇怪的命名习惯。该 PL/SQL 语句声明了一个名为 TABLE1 的记录变量——该记录是名为 TABLE2 的表的字段的 1:1 映射。

# ubuntu - gitolite - smart-http - 为 rc("UMASK") 提供未初始化的值

> ID：11649208
> 
> 赞同：1
> 
> 时间：2012-07-25T12:01:46.550
> 
> 标签：ubuntu, apache2, gitolite

`/var/log/apache2/error.log`当我尝试对运行 gitolite 并启用 smart-http 的服务器执行 git clone 时，我收到以下错误

```
[Wed Jul 25 21:53:36 2012] [error] [client 124.149.104.106] FATAL: warn\tUse of 
uninitialized value $rc{"UMASK"} in umask at /opt/git/gitolite-source/src/
gitolite-shell line 95, <DATA> line 1.<<newline>> 
```

我确实将`UMASK`值设置`0027`为`/home/git/.gitolite.rc`

任何想法为什么从 su_exec 中的文件调用时没有设置值`sites-available`？

我将 apache 作为 www-data 运行 - 并按照[此处](http://sitaramc.github.com/gitolite/ssh-and-http.html)的说明设置了各种脚本的权限- 即：

```
install -d -m 0755 -o git -g git /var/www/bin
install -d -m 0755 -o www -g www /var/www/git 
```

进而：

`/var/www/bin`在named中创建一个 shell 脚本`gitolite-suexec-wrapper.sh`，使用 mode`0700`并由 user 和 group 拥有`git`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:30:29.447

好的 - 基本上我从头开始重新安装：

1.  [安装 gitolite](http://sitaramc.github.com/gitolite/install.html)（将源安装到`/home/git`目录并以`git`用户身份运行安装程序`su - git`）
2.  在此处阅读[警告](https://github.com/sitaramc/gitolite-doc/blob/master/http.mkd)
3.  运行[本文档中的步骤](https://github.com/sitaramc/gitolite/blob/master/t/smart-http.root-setup)（即不运行文件 - 仅逐行运行）
4.  不要[在这里运行导出，](http://sitaramc.github.com/gitolite/http.html)因为我们将以 git 用户身份运行 gitolite
5.  使用 apt-get 安装 gitweb - 将其配置为指向存储库`/home/git/repositories`
6.  在此处将以下内容放入apache站点配置中`/etc/apache2/sites-available/git.servername.com`

    ```
    <VirtualHost *:80>
        ServerAdmin mail@servername.com
        ServerAlias git
        ServerName git.servername.com

        DocumentRoot /var/www/git

        <Directory /var/www/git>
          Options +Indexes
          AllowOverride none
          Order allow,deny
          Allow from all
        </Directory>

        SuexecUserGroup git git
        ScriptAlias /git/ /var/www/bin/gitolite-suexec-wrapper.sh/
        ScriptAlias /gitmob/ /var/www/bin/gitolite-suexec-wrapper.sh/

        <Location /git>
          AuthType Basic
          AuthName "Git Access"
          Require valid-user
          AuthUserFile /home/git/gitolite-http-authuserfile
        </Location>
        Loglevel warn
        ErrorLog /var/log/apache2/error.log
        CustomLog /var/log/apache2/access.log combined
    </VirtualHost> 
    ```

7.  从这里使用[gitweb 的样式](http://computercamp.cdwilson.us/git-gitolite-git-daemon-gitweb-setup-on-ubunt)。

8.  现在我可以使用 `git clone ssh://git@git.servername.com:gitolite-admin.git` [http://admin@git.servername.com/git/testing.git通过 ssh 访问我的网站](http://admin@git.servername.com/git/testing.git)

    并在 [http://servername.com/gitweb查看](http://servername.com/gitweb)

# c# - ASP.NET MVC ActionResult 未在 iPad 上显示图像

> ID：11649219
> 
> 赞同：1
> 
> 时间：2012-07-25T12:02:12.877
> 
> 标签：c#, asp.net-mvc

我有一个使用 Url.Action 填充图像 src 的 JQuery 日期选择器。

```
 <script type="text/javascript">
        $(function () {
            $('#datepicker').datepicker({
                inline: true,
                altField: '#selecteddate',
                altFormat: 'dd-mm-yy',
                onSelect: function () {
                    var date = $('#datepicker').datepicker('option', 'dateFormat', 'yy-mm-dd');
                    $('#diary img').attr(
                        'src',
                        '<%= Url.Action("Image") %>/' + date.val().toString());
                }
            });
        });        
    </script> 
```

该图像是在我的控制器上使用以下操作转换为 png 的内存位图

```
public class ImageResult : ActionResult
{
    Image image;

    public ImageResult(Image image)
    {
        this.image = image;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.Clear();
        context.HttpContext.Response.ContentType = "image/png"; 

        image.Save(context.HttpContext.Response.OutputStream, ImageFormat.Png);                         
        image.Dispose();
    }
} 
```

图像显示正常，但图像 src 没有扩展名，因此显示为 /2012-07-11 如何添加扩展名 .png？因为没有我相信它会阻止它在 Ipad 上显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:39:20.533

您可以重新创建一个`.png`内置扩展的新路由：

```
routes.MapRoute(
   "Image", // Route name
   "tunnel/image/{id}.png", // URL with parameters
   new { controller = "Tunnel", action = "Image" }            
); 
```

并像这样更新您的javascript：

`'tunnel/image/' + date.val().toString() + '.png';`

# r - R函数解析命令行参数

> ID：11649222
> 
> 赞同：6
> 
> 时间：2012-07-25T12:02:20.120
> 
> 标签：r

我在下面有以下函数，我用它来解析命令行参数，以便我可以从命令行运行`R`脚本：

```
 parseArguments <- function() {
     text1 <- commandArgs(TRUE)
     eval(parse(text=gsub("\\s", ";", gsub("--","", text1))))
     args <- list()
     for( ar in ls()[! ls() %in% c("text1", "args")] ) {args[ar] <- get(ar)}
     return (args)
 } 
```

当我尝试`R`使用以下命令行参数调用使用上述函数解析 CL 参数的脚本时，这是一个 CLI 会话输出：

```
./myscript.R --param1='XLIF' --param2='ESX' --param3=5650.0 --param4=5499.2 --param5=0.0027397260274 --param6='Jul' --riskfreerate=0.817284313119 --datafile='/path/to/some/datafile.csv' --imagedir='/path/to/images' --param7=2012 --param8=2
Error in parse(text = gsub("\\s", ";", gsub("--", "", text1))) : 
  8:10: unexpected '/'
7: riskfreerate=0.817284313119
8: datafile=/
            ^
Calls: parseArguments -> eval -> parse
Execution halted 
```

帮助？

**[[更新]]**

我听从了 Dirk 的建议并安装了`optparse`库。我的代码现在看起来像这样：

```
library(optparse)

# Get the parameters
option_list <- list(
  make_option(c("-m", "--param1"), action="store_false"),
  make_option(c("-t", "--param2"), action="store_false"),
  make_option(c("-a", "--param3"), action="store_false"),
  make_option(c("-s", "--param4"), action="store_false"),
  make_option(c("-x", "--param5"), action="store_false"),
  make_option(c("-o", "--param6"), action="store_false"),
  make_option(c("-y", "--param7"), action="store_false"),  
  make_option(c("-r", "--riskfreerate"), action="store_false"),
  make_option(c("-c", "--param8"), action="store_false"),
  make_option(c("-d", "--datafile"), action="store_false"),
  make_option(c("-i", "--imagedir"), action="store_false")  
)

# get command line options, i
opt <- parse_args(OptionParser(option_list=option_list)) 
```

当我运行 R 脚本并传递相同的命令行参数时，我得到：

```
Loading required package: methods
Loading required package: getopt
Error in getopt(spec = spec, opt = args) : 
  long flag "param1" accepts no arguments
Calls: parse_args -> getopt
Execution halted 
```

？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:04:05.473

是的，有 CRAN 包[getopt](http://cran.r-project.org/package=getopt)和[optparse](http://cran.r-project.org/package=optparse)就是为了这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T13:21:37.533

我正在回答您的第二个问题，关于您遇到的错误`optparse`：

从`make_option`帮助页面（...）：

> action：描述 optparse 在遇到选项时应采取的操作的字符串，“store”、“store_true”或“store_false”。默认值为“store”，表示如果在命令字符串中找到选项，则 optparse 应存储指定的以下值。如果找到选项，“store_true”存储 TRUE，如果找到选项，“store_false”存储 FALSE。

简而言之，`action = "store"`如果你想运行类似的东西，你需要使用（默认）：

```
./myscript.R --param1='XLIF' --param2='ESX' [...] 
```

# dynamics-crm-2011 - CRM 2011 Developer Toolkit 无法从 CRM Explorer 添加实体 ID 作为图像参数

> ID：11649223
> 
> 赞同：0
> 
> 时间：2012-07-25T12:02:21.510
> 
> 标签：dynamics-crm-2011

我的开发工具包中的 CRM Explorer 有问题。我从 SDK 安装了这个。

为什么我要设置插件步骤图片时不能选择实体id作为参数？

我必须*记住*在 RegisterFile.crmregister 中手动添加它，一旦我从 CRM Explorer 添加其他字段，它就会被覆盖。

在使用 Developer Toolkit 部署插件解决方案后，我当然可以从插件注册工具中选择实体 ID。

有没有人和我一样的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:38:58.120

您可以从上下文中检索它。

在工具包驱动的插件的情况下，它可以在`xxxExecute()`方法中通过`localContext.PluginExecutionContext.PrimaryEntityId`

请注意，它不仅仅存在于 Pre-Create 中（该记录还不存在！）

# r - 是否有 R 命令来触发从 Rstudio Server 下载文件？

> ID：11649224
> 
> 赞同：5
> 
> 时间：2012-07-25T12:02:21.853
> 
> 标签：r, rstudio, rstudio-server

使用 Rstudio Server 时，通过 File>More>Export... 从服务器下载文件非常容易... Web 浏览器将自动开始下载。

有没有办法用 R 命令生成这个下载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:49:37.763

browseURL 是否为您执行此操作：

```
browseURL                package:utils                 R Documentation

Load URL into a WWW Browser

Description:

     Load a given URL into a WWW browser.

Usage:

     browseURL(url, browser = getOption("browser"), encodeIfNeeded = FALSE) 
```

那应该在浏览器中启动它。直接在 R 中下载`download.file`是您想要的，但这会挂起命令行直到完成。

# android - 更改edittext光标颜色

> ID：11649234
> 
> 赞同：74
> 
> 时间：2012-07-25T12:02:53.443
> 
> 标签：android, user-interface

如何以编程方式更改`EditText's` *光标的颜色？*

在 android 4.0 及更高版本中，*光标颜色*为白色。如果`EditText`s 背景也是白色的，它就会变得不可见。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-07-25T12:04:30.067

在您的 EditText 属性中，有一个属性`android:textCursorDrawable`

现在将其设置为**@null**就像，

`android:textCursorDrawable="@null"`

所以现在您的 EditText 光标与您的 EditText TextColor 相同。

来自[设置 EditText 光标颜色的参考](https://stackoverflow.com/questions/7238450/set-edittext-cursor-color)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-10-03T09:01:23.923

我找到了解决这个问题的方法。这不是最好的解决方案，但它确实有效。

不幸的是，我只能使用静态颜色作为光标颜色。

首先，我在drawable中定义了一个黑色光标

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#ff000000"/>
    <size android:width="1dp"/>
</shape> 
```

接下来我在布局中定义一个示例 EditText。

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textCursorDrawable="@drawable/blackpipe"
         >
    </EditText> 
```

当我想在运行时创建一个 EditText 时，我使用这个：

```
AttributeSet editText30AttributeSet = null;
int res = getResources().getIdentifier("edit30", "layout", getPackageName());//edit30 is EditText layout
XmlPullParser parser = getResources().getXml(res);
int state=0;
do {
    try {
        state = parser.next();
    } catch (Exception e1) {
        e1.printStackTrace();
    }       
    if (state == XmlPullParser.START_TAG) {
        if (parser.getName().equals("EditText")) {
            editText30AttributeSet = Xml.asAttributeSet(parser);
            break;
        }
    }
} while(state != XmlPullParser.END_DOCUMENT);
EditText view = new EditText(getContext(),editText30AttributeSet); 
```

现在您有了一个带有黑色光标的 EditText 视图。也许有人可以改进我的解决方案，以便可以在运行时更改光标。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-24T07:27:31.863

我认为这是比@Adem 发布的更好的解决方案。

爪哇：

```
try {
    // https://github.com/android/platform_frameworks_base/blob/kitkat-release/core/java/android/widget/TextView.java#L562-564
    Field f = TextView.class.getDeclaredField("mCursorDrawableRes");
    f.setAccessible(true);
    f.set(yourEditText, R.drawable.cursor);
} catch (Exception ignored) {
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#ff000000" />

    <size android:width="1dp" />

</shape> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-21T19:33:56.607

改进 Jared Rummler 的回答

爪哇：

```
try {
    // https://github.com/android/platform_frameworks_base/blob/kitkat-release/core/java/android/widget/TextView.java#L562-564
    Field f = TextView.class.getDeclaredField("mCursorDrawableRes");
    f.setAccessible(true);
    f.set(yourEditText, R.drawable.custom_cursor);
} catch (Exception ignored) {
} 
```

在 res/drawable 文件夹中创建 custom_cursor.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#ff000000" />

    <size android:width="1dp" />
</shape> 
```

XML:

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textCursorDrawable="@drawable/custom_cursor"
     >
</EditText> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-04-16T15:00:16.667

`styles.xml`使用 AppCompat-v7 怎么样？

```
<item name="colorControlNormal">@color/accentColor</item>
<item name="colorControlActivated">@color/accentColor</item>
<item name="colorControlHighlight">@color/accentColor</item> 
```

对我有用（这个例子很简单）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-09T09:59:59.053

您可以将`android:textCursorDrawable`属性设置为`@null`将导致使用`android:textColor`光标颜色。

属性`textCursorDrawable`在 API 级别 12 及更高级别中可用...

谢谢...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-10T04:37:28.667

通过 AppTheme 设置

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"><!-- Customize your theme here. -->
    <item name="windowNoTitle">true</item>
    <item name="windowActionBar">false</item>
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:spinnerStyle">@style/spinner_style</item>
    <!--Add This-->
    <item name="editTextStyle">@style/EdittextStyle</item>
    <item name="android:dropDownListViewStyle">@style/SpinnerStyle</item>
</style>

<!--New EditText Style-->
<style name="EdittextStyle" parent="Widget.AppCompat.EditText">
    <item name="android:background">?attr/editTextBackground</item>
    <item name="android:textColor">?attr/editTextColor</item>
    <item name="android:textAppearance">?android:attr/textAppearanceMediumInverse</item>
    <!--<item name="android:textCursorDrawable">@drawable/abc_text_cursor_material</item>-->
    <item name="colorControlNormal">@color/colorAccent</item>
    <item name="colorControlActivated">@color/colorAccent</item>
    <item name="colorControlHighlight">@color/colorAccent</item>

</style> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-30T10:38:37.973

所以，这是最终版本 - 不需要 XML 并作为 @null 工作，但以编程方式：

```
try {
    Field f = TextView.class.getDeclaredField("mCursorDrawableRes");
    f.setAccessible(true);
    f.set((TextView)yourEditText, 0);
} catch (Exception ignored) {
} 
```

唯一的问题是它可能有一天会停止使用某些新版本的 Android。

PS 我在 4.1.2 到 5.1 上对其进行了测试。

# iphone - UITableView 多选。使用所选行自动选择随机行

> ID：11649235
> 
> 赞同：1
> 
> 时间：2012-07-25T12:02:54.817
> 
> 标签：iphone, ios, xcode, uitableview

我在 uitable 视图中有 30 行，我正在尝试选择多行并将它们设置为选中。

每当我选择一行时，都会自动选择另一行并检查所需的行。

此外，当我滚动表格视图时，它会自动更改选择。

我使用的代码行数较少（8），而且效果很好。对于超过 12 行，它给出了我所描述的问题。

如果您可以建议任何其他代码/教程以使其工作也可以。

我是 xcode 的新手，非常感谢任何帮助。谢谢你。

这是我的代码：

```
#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
return [listOfItems count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
cell.text = cellValue;

return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {

    if(count < 3)
    {

        [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
        [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
        count++;
    }

    NSLog(@"Count: %d", count);
    NSLog(@"Items I selected @ %d:", indexPath.row);
    NSLog(@"Items I selected: %@", selectedIndexes);
} 

else {

    [selectedCell setAccessoryType:UITableViewCellAccessoryNone];
    [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];
    count --;
    NSLog(@"Items I de-selected @ %d:", indexPath.row);

}

[tableView deselectRowAtIndexPath:indexPath animated:NO];

NSMutableString *resultlearning = [[NSMutableString alloc]init];
for (int i = 0; i < [listOfItems count]; i++) {
    NSIndexPath *path = [NSIndexPath indexPathForRow:i inSection:0];
    //[tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionMiddle animated:NO];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        [resultlearning appendFormat:@"%@, ",cell.textLabel.text];
    }
}
if (resultlearning.length > 2) {
    [resultlearning replaceCharactersInRange:NSMakeRange(resultlearning.length-1, 1) withString:@""];
}
NSLog(@"Result: %@",resultlearning);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:17:59.160

单元格被缓存并重复使用，因此如果您将附件设置为一个，然后将其用于表格中的不同位置，它仍然具有附件。

最好只跟踪方法中选择了哪些单元格作为数据，`didSelectRowAtIndexPath:`然后为`cellForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:23:59.533

检查/取消检查单元格的附件类型的逻辑应该去 cellForRowAtindexPath。在 didSelectRowAtIndexPath 中，您应该只处理选定的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:21:31.953

在 .h 文件中添加一个 mutablearray。这里向数组中添加与 tableDataSourc 数组一样多的对象。现在我的意图是，如果它包含 0 则不选择该单元格，或者它包含 1 则选择该单元格

现在这样做，因为你有 selectedIndexes 数组，所以需要另一个 mutablearray ：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
for(int i = 0;i<[listOfItems count];i++)
{
[selectedIndexes addObject:@"0"];
}
   return [listOfItems count]
 }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

 UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

 if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {

     [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
     [selectedIndexes replaceObjectAtIndex:indexPath.row withObject:@"1"];
}
else
{          
selectedCell.accessoryType = UITableViewCellAccessoryNone;
[selectedIndexes replaceObjectAtIndex:indexPath.row withObject:@"0"];
} 
```

现在 selectedIndexes 具有 1 值的对象意味着在 listOfItems 中选择了该值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:15:01.923

嗯...今天早上我还在喝第一杯咖啡，但有些事情告诉我，当调用 didSelectRowAtIndexPath 时，您已经“选择”了行。然后似乎 if 语句可能正在做一些时髦的事情并选择下一行或其他东西。您是否尝试过注释掉 if 语句？我知道一次可能只会选择一个，但只是看看是否是原因。另外，它是被选中的下一行，前一行吗？

# nhibernate - 在它们之间切换时如何处理每个标签页的一个会话

> ID：11649241
> 
> 赞同：0
> 
> 时间：2012-07-25T12:03:11.790
> 
> 标签：nhibernate, session, tabpage

我在某处读到，在 C# 桌面应用程序中为每个表单/演示者使用新会话是个好主意。所以我决定每次标签索引更改时关闭会话。任何数据库活动都会打开一个新会话。我在每个选项卡中都有一个树视图，并且数据在它应该加载的时候准确地加载（例如，当打开相应的节点时）唯一的问题是当我离开一个选项卡页面并且树有一些打开的节点然后我回来时。

有两种不同的场景：

*   我单击离开之前已经查看过的叶节点并重新访问该选项卡
*   我单击了一个从未在该程序运行中查看过的叶节点（但我们可以看到它，因为父节点已展开）

在第一种情况下，一切正常。在第二种情况下，我得到一个 LazyInitialization 异常。

1）尽管会话关闭，我可以强制节点加载数据或记住数据吗？我不喜欢我只为程序使用一个会话的想法。

2）如果我记住树状态，折叠它并重新展开必要的节点，你认为它可能会起作用吗？它会像用户打开它时那样加载数据吗？

最好的问候， 期待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:07:09.293

当您使用现有数据提供树视图（引发未初始化异常）的选项卡时，将其重新附加到新创建的会话以重新启用延迟加载。使用不明显`session.Lock(rootentity, LockMode.None);`的重新附加对象图

# hibernate - 已删除的对象将通过级联重新保存（从关联中删除已删除的对象）

> ID：11649249
> 
> 赞同：55
> 
> 时间：2012-07-25T12:03:31.533
> 
> 标签：hibernate, jakarta-ee, jpa, one-to-many

我有以下两个实体：

**1- 播放列表：**

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "playlist", orphanRemoval = true, cascade =   CascadeType.ALL)
@OrderBy("adOrder")
private Set<PlaylistadMap> PlaylistadMaps = new HashSet<PlaylistadMap>(0); 
```

*   **CascadeType.ALL**：在保存或更新播放列表实体时需要在 PlaylistadMap 集合上保存和更新。
*   **orphanRemoval = true**：删除播放列表实体时需要，PlaylistadMap 引用也应删除。

**2- 播放列表地图：**

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "fk_playlist", referencedColumnName = "pkid", nullable = false)
private Playlist playlist; 
```

使用删除播放列表`getCurrentSession().delete();`时出现以下异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.xeno.advertisingsuite.web.domain.PlaylistadMap#6]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.xeno.advertisingsuite.web.domain.PlaylistadMap#6]
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:657)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy54.deletePlayList(Unknown Source)
    at com.xeno.advertisingsuite.web.beans.PlayListBean.deletePlaylist(PlayListBean.java:282)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 103 more
Caused by: org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.xeno.advertisingsuite.web.domain.PlaylistadMap#6]
    at org.hibernate.impl.SessionImpl.forceFlush(SessionImpl.java:1220)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:188)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:677)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:669)
    at org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:252)
    at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:425)
    at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:362)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:338)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    at org.hibernate.engine.Cascade.cascade(Cascade.java:161)
    at org.hibernate.event.def.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:154)
    at org.hibernate.event.def.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:145)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:88)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:375)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656) 
```

请告知如何解决此异常。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-25T12:40:45.767

解决方案是完全按照异常消息告诉您的操作：

> 引起：org.hibernate.ObjectDeletedException：已删除的对象将被级联重新保存（**从关联中删除已删除的对象**）

从它所在的关联（集合、列表或映射）中删除已删除的对象。特别是，我怀疑，来自`PlayList.PlaylistadMaps`. 仅删除对象是不够的，您必须将其从任何引用它的级联集合中删除。

事实上，既然你的收藏有`orphanRemoval = true`，你不需要明确地删除它。您只需要将其从集合中移除。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-26T10:57:45.487

**将FetchType**更改为**Lazy**后问题解决

 *** * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-04T08:42:24.157

## 如果您不知道，哪个集合包含您的对象

就我而言，应用 TomAnderson 的解决方案真的很困难，因为我不知道集合是什么，它包含指向对象的链接，所以这是知道哪些对象包含指向已删除对象的链接的方法：在调试器你应该在抛出异常之前进入最低执行堆栈级别，应该有一个名为 的变量`entityEntry`，所以你`PersistenceContext`从这个变量中得到一个对象：`entityEntry.persistenceContext`。

对我来说`persistenceContext`是一个实例，`StatefulPersistenceContext`这个实现有`private`field `parentsByChild`，您可以从中检索有关包含该元素的集合的信息。

我使用的是Eclipse调试器，所以很难直接检索这个私有字段，所以我使用了`Detail Formatter`（[调试时如何直接在IDE中查看其他对象的私有字段？](https://stackoverflow.com/questions/9302731/how-can-i-watch-private-fields-of-other-objects-directly-in-the-ide-when-debuggi)）

得到这些信息后，就可以应用 TomAnderson 的解决方案了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-29T10:19:42.160

上述所有解决方案在hibernate 5.2.10.Final中都不起作用。

但是将地图设置为 null 如下对我有用：

```
playlist.setPlaylistadMaps(null); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-22T00:08:14.150

我也遇到了这个异常消息。对我来说，问题是不同的。我想删除父母。

在一笔交易中：

*   首先，我从数据库中调用了父级。
*   然后我从父集合中调用了一个子元素。
*   然后我引用了孩子（id）中的一个字段
*   然后我删除了父级。
*   然后我打电话给提交。
*   我收到“已删除的对象将被重新保存”错误。

事实证明，我必须进行两次单独的交易。我在引用子字段后承诺。然后为删除开始一个新的提交。

无需删除子元素或清空父元素中的集合（假设`orphanRemoval = true`.）。事实上，这并没有奏效。

*总之，如果在删除子对象时引用了子对象中的字段，则会出现此错误。*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T07:07:00.627

我可以通过编写下面的代码来解决这个问题。我使用了 executeUpdate 而不是 .delete()

```
def publicSupport = caseObj?.client?.publicSupport
        if(publicSupport)
            PublicSupport.executeUpdate("delete PublicSupport c where c.id = :publicSupportId", [publicSupportId:publicSupport.id])
            //publicSupport.delete() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-22T18:00:48.260

一种开始在这里进行。

```
for (PlaylistadMap playlistadMap : playlistadMaps) {
        PlayList innerPlayList = playlistadMap.getPlayList();
        for (Iterator<PlaylistadMap> iterator = innerPlayList.getPlaylistadMaps().iterator(); iterator.hasNext();) {
            PlaylistadMap innerPlaylistadMap = iterator.next();
            if (innerPlaylistadMap.equals(PlaylistadMap)) {
                iterator.remove();
                session.delete(innerPlaylistadMap);
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-06T06:15:57.653

## **另一种解决方法**

我完全同意[redochka](https://stackoverflow.com/users/353985/redochka)和 [Nikos Paraskevopoulos](https://stackoverflow.com/users/2764255/nikos-paraskevopoulos)的观点。[Mahmoud Saleh](https://stackoverflow.com/users/429377/mahmoud-saleh)的回答在某些情况下并非每次都能解决这个问题。在我的情况下，我真的需要 Eager fetchtype。因此，正如上面提到的[Stony](https://stackoverflow.com/users/1263556/stony)一样，我刚刚从一个包含该对象的列表中删除了该对象。这是我的代码：

**Rju实体**

```
public class Rju extends AbstractCompany implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 4294142403795421252L;

    //this field just duplicates @Column(name="callname") and serves for mapping to Rju fullname field
    @Column(name = "fullname")
    private String namerju;
    @NotEmpty
    @Column(name = "briefname")
    private String briefname;

    @LazyCollection(LazyCollectionOption.FALSE)
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "otd")
    private Collection<Vstan> vStanCollection;

//  @LazyCollection(LazyCollectionOption.FALSE)
    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = "rju", orphanRemoval = true)
    private Collection<Underrju> underRjuCollection;
.........
} 
```

**Underrju实体**

```
public class Underrju extends AbstractCompany implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 2026147847398903848L;

    @Column(name = "name")
    private String name;

    @NotNull
    @Valid
    @JoinColumn(name = "id_rju", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Rju rju;
......getters and setters..........
} 
```

和我的**UnderrjuService**

```
@Service("underrjuService")
@Transactional
public class UnderRjuServiceImpl implements UnderRjuService {

    @Autowired
    private UnderRjuDao underrjuDao;

    .............another methods........................
    @Override
    public void deleteUnderrjuById(int id) {
        Underrju underrju=underrjuDao.findById(id);
        Collection<Underrju> underrjulist=underrju.getRju().getUnderRjuCollection();
        if(underrjulist.contains(underrju)) {
            underrjulist.remove(underrju);
        }
        underrjuDao.delete(id);

    }
     .........................
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-19T21:02:27.073

我遇到了同样的问题。我试图在同一个事务中删除和插入。我 `theEntityManager.flush();`在之后添加`theEntityManager.remove(entity);`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-02T22:10:57.980

我在一个设计糟糕的数据库上也遇到了这个错误，其中有一个`Person`表与一个表具有 one2many 关系，`Code`而一个表与同一个`Organization`表具有 one2many 关系`Code`。视情况而定，本准则可同时适用于组织或个人。 **Person 对象和 Organization 对象都设置为 Cascade=All delete orphans。**

然而，这种过度使用 Code 表的结果是 Person 和 Organization 都不能级联删除，因为总是有另一个集合引用它。因此，无论它是如何在 Java 代码中从任何引用集合或对象中删除的，删除都会失败。让它工作的唯一方法是将它从我试图保存的集合中删除，然后直接将它从代码表中删除，然后保存集合。这样就没有引用它了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-06T12:42:40.663

因为我需要**FetchType**是**EAGER**，所以我通过将它们设置为（null）来删除所有关联并保存对象（删除数据库中的所有关联）然后删除它！

这会增加一些毫秒，但对我来说很好，如果有更好的方法来保留这些 MS，请在下面添加您的评论..

希望对某人有所帮助:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-07T17:11:10.260

[这篇文章包含一个检测级联问题所在位置的绝妙技巧：](https://stackoverflow.com/a/27874905/860488)
尝试在*Cascade*上替换，`Cascade.None()`直到您没有收到错误，然后您检测到导致问题的级联。

然后通过*将原始级联更改为其他内容*或使用**汤姆安德森**答案来解决问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-15T11:09:47.563

如果您使用`PlaylistadMap`modal 而不是`PlayList`. 在这种情况下`FetchType = Lazy`不是正确的选择。它不会抛出任何异常，但只会`PlaylistadMap`删除来自的数据，其中的数据 `PlayList`将保留在表中。也检查一下。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-09T22:07:48.707

您需要删除映射对象上的关联：

```
playList.getPlaylistadMaps().setPlayList(null);
session.delete(playList); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-23T07:35:03.210

我只是为了解决这个问题。

1.  我将列表的值设置为**空**
2.  我保存了对象（它有效）
3.  我将新数据设置为对象
4.  我重新保存了对象
5.  有用。！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-19T18:50:10.007

解决方案是“破坏”对象之间的关系，然后再次尝试删除。答案在您的日志中：

```
(remove deleted object from associations): [com.xeno.advertisingsuite.web.domain.PlaylistadMap#6] 
```

解释：什么？（删除关联）在哪里？[ID#6 的 PlaylistadMap 对象]

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-17T20:41:50.900

我有同样的例外，当试图从人身上移除孩子时（Person - OneToMany - Kid）。在人方面注释：

```
@OneToMany(fetch = FetchType.EAGER, orphanRemoval = true, ... cascade    = CascadeType.ALL)
public Set<Kid> getKids() {    return kids; } 
```

在孩子方面注释：

```
@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "person_id")
public Person getPerson() {        return person;    } 
```

所以解决方案是删除`cascade = CascadeType.ALL`，很简单： `@ManyToOne`在 Kid 类上，它开始按预期工作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-30T12:17:14.353

有同样的错误。从模型中移除对象就可以了。

显示错误的代码：

```
void update() {
    VBox vBox = mHboxEventSelection.getVboxSelectionRows();

    Session session = HibernateUtilEventsCreate.getSessionFactory().openSession();
    session.beginTransaction();

    HashMap<String, EventLink> existingEventLinks = new HashMap<>();
    for (EventLink eventLink : mEventProperty.getEventLinks()) {
        existingEventLinks.put(eventLink.getEvent().getName(), eventLink);
    }

    mEventProperty.setName(getName());

    for (Node node : vBox.getChildren()) {

        if (node instanceof HBox) {
            JFXComboBox<EventEntity> comboBoxEvents = (JFXComboBox<EventEntity>) ((HBox) node).getChildren().get(0);
            if (comboBoxEvents.getSelectionModel().getSelectedIndex() == -1) {
                Log.w(TAG, "update: Invalid eventEntity collection");
            }

            EventEntity eventEntity = comboBoxEvents.getSelectionModel().getSelectedItem();
            Log.v(TAG, "update(" + mCostType + "): event-id=" + eventEntity.getId() + " - " + eventEntity.getName());

            String split = ((JFXTextField) (((HBox) node).getChildren().get(1))).getText();
            if (split.isEmpty()) {
                split = "0";
            }
            if (existingEventLinks.containsKey(eventEntity.getName())) {
                // event-link did exist
                EventLink eventLink = existingEventLinks.get(eventEntity.getName());
                eventLink.setSplit(Integer.parseInt(split));
                session.update(eventLink);
                existingEventLinks.remove(eventEntity.getName(), eventLink);
            } else {
                // event-link is a new one, so create!
                EventLink link1 = new EventLink();

                link1.setProperty(mEventProperty);
                link1.setEvent(eventEntity);
                link1.setCreationTime(new Date(System.currentTimeMillis()));
                link1.setSplit(Integer.parseInt(split));

                eventEntity.getEventLinks().add(link1);
                session.saveOrUpdate(eventEntity);
            }

        }
    }

    for (Map.Entry<String, EventLink> entry : existingEventLinks.entrySet()) {
        Log.i(TAG, "update: will delete link=" + entry.getKey());
        EventLink val = entry.getValue();
        mEventProperty.getEventLinks().remove(val); // <- remove from model
        session.delete(val);
    }

    session.saveOrUpdate(mEventProperty);

    session.getTransaction().commit();
    session.close();
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-08-21T21:52:37.590

```
cascade = { CascadeType.ALL }, fetch = FetchType.LAZY 
```**

# javascript - 如何计算数组中每个项目的出现次数？

> ID：11649255
> 
> 赞同：25
> 
> 时间：2012-07-25T12:03:44.420
> 
> 标签：javascript, jquery, arrays

我有一个数组如下，

```
var arr = ['ab','pq','mn','ab','mn','ab'] 
```

预期结果

```
arr['ab'] = 3
arr['pq'] = 1
arr['mn'] = 2 
```

尝试如下，

```
$.each(arr, function (index, value) {
    if (value) 
        arr[value] = (resultSummary[value]) ? arr[value] + 1 : 1;
});

console.log(arr.join(',')); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-25T12:07:25.937

不需要使用 jQuery 来完成这个任务——这个例子将构建一个对象，其中包含数组中每个不同元素的出现次数`O(n)`

```
var occurrences = { };
for (var i = 0, j = arr.length; i < j; i++) {
   occurrences[arr[i]] = (occurrences[arr[i]] || 0) + 1;
}

console.log(occurrences);        // {ab: 3, pq: 1, mn: 2}
console.log(occurrences['mn']);  // 2 
```

> [示例小提琴](http://jsfiddle.net/8Gt6V/)

* * *

您还可以使用[Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)来获得相同的结果并避免`for-loop`

```
var occurrences = arr.reduce(function(obj, item) {
  obj[item] = (obj[item] || 0) + 1;
  return obj;
}, {});

console.log(occurrences);        // {ab: 3, pq: 1, mn: 2}
console.log(occurrences['mn']);  // 2 
```

> [示例小提琴](https://jsfiddle.net/gckta8vu/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-16T08:36:37.950

我认为这是如何计算数组中具有相同值的出现的最简单方法。

```
var a = [true, false, false, false];
a.filter(function(value){
    return value === false;
}).length 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-20T21:13:22.267

如果您不想要需要库的解决方案，并且不必支持旧版 javascript：

```
var report = {};

arr.forEach(function(el){
  report[el] = report[el] + 1 || 1;
}); 
```

或者，如果您想使用 jQuery 来实现：

```
var report = {};

$.each(arr,function(i,el){
  report[el] = report[el] + 1 || 1;
}); 
```

这使用[短路逻辑](https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript#Control_structures)来测试条件和设置值。我认为这是一种非常简洁易读的 javascript 方式。

```
console.log( report ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-04T09:06:44.890

试试[$.grep](http://api.jquery.com/jquery.grep/)

**例子：**

```
var arr = ['ab','pq','mn','ab','mn','ab']

jQuery.grep(arr, function(a){
   return a == 'ab'
}).length // 3 
```

**如果不需要支持ie8。**

```
['ab','pq','mn','ab','mn','ab'].filter(function(value){
    return value == 'ab'
}).length // 3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T12:16:57.680

如果您使用的是[Sugar](http://sugarjs.com/)库，它只是：

```
arr.count('ab'); 
```

**[演示](http://jsfiddle.net/nF6P7/20/)**

请参阅：[数组计数 API](http://sugarjs.com/api/Array/count)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T12:10:49.720

```
var result = {};
function count(input){
  var tmp = 0;
  if(result.hasOwnProperty(input)){
     tmp = result[input];
     result[input]=tmp+1;
  }else{
    result[input]=1;
  }
} 
```

上面的函数将帮助您计算数组中相同字符串的数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T12:14:23.863

这可能是你想要做的吗？

```
$.each(arr, function(index, value) {
    if (!resultSummary[value]){
        resultSummary[value] = 0;
    }
    resultSummary[value] += 1;
}); 
```

此代码将计算数组中每个字符串的出现次数并将结果存储在`resultsArray`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T12:35:44.177

 `````
var arr = ['ab','pq','mn','ab','mn','ab']

function getCount(arr,val)
{
    var ob={};
    var len=arr.length;
    for(var k=0;k<len;k++)
    {
        if(ob.hasOwnProperty(arr[k]))
        {
            ob[arr[k]]++;
            continue;
        }
        ob[arr[k]]=1;
    }
    return ob[val];
}

//run test
alert(getCount(arr,'ab'));//3 
````  `演示：http: [//jsfiddle.net/dmx4y/2/](http://jsfiddle.net/dmx4y/2/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-02T13:06:19.187

```
var arr = ['ab','pq','mn','ab','mn','ab'];
var result = { };
   for(i=0;i<arr.length;++i) 
   {
       if(!result[arr[i]])
           result[arr[i]]=0;
       ++result[arr[i]];
   }

for (var i in result){
console.log(i+":"+result[i]);
} 
`````

# c# - 带回发的中继器

> ID：11649257
> 
> 赞同：0
> 
> 时间：2012-07-25T12:03:54.507
> 
> 标签：c#, asp.net

我有一个中继器，每个项目都有一个复选框和单选按钮。

*   复选框在选中时禁用项目内的所有控件（自动回发）
*   单选按钮在选中后会显示一个弹出窗口（也带有自动回发）。

情况是：如果在转发器的任何项目中选中了单选按钮，当我选中复选框控件以禁用项目时，将显示弹出窗口。在回发期间，选中的单选按钮将导致显示弹出窗口。

我怎样才能防止这种情况？复选框应该只禁用不显示弹出窗口的项目。

我的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void rptr1_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {

            if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
            {
                Label lbl1 = (Label)e.Item.FindControl("lbl_dg_task");
                Label lbl2 = (Label)e.Item.FindControl("lbl_dg_seq");
                CheckBox chb = (CheckBox)e.Item.FindControl("chkb_NO");
                RadioButton l1 = (RadioButton)e.Item.FindControl("L1");
                RadioButton l2 = (RadioButton)e.Item.FindControl("L2");
                RadioButton l3 = (RadioButton)e.Item.FindControl("L3");
                RadioButton l4 = (RadioButton)e.Item.FindControl("L4");
                RadioButton r1 = (RadioButton)e.Item.FindControl("R1");
                RadioButton r2 = (RadioButton)e.Item.FindControl("R2");
                RadioButton r3 = (RadioButton)e.Item.FindControl("R3");
                RadioButton r4 = (RadioButton)e.Item.FindControl("R4");
                AjaxControlToolkit.ModalPopupExtender mpex = (AjaxControlToolkit.ModalPopupExtender)e.Item.FindControl("mpe1");

                if (l1.Checked)
                {
                    //pop.Enabled = true;
                    ModalPopupExtender1.Show();
                }

                if (chb.Checked == true)
                {

                    l1.Enabled = false;
                    l2.Enabled = false;
                    l3.Enabled = false;
                    l4.Enabled = false;
                    r1.Enabled = false;
                    r2.Enabled = false;
                    r3.Enabled = false;
                    r4.Enabled = false;
                    lbl1.CssClass = "grayedout";
                    lbl2.CssClass = "grayedout";

                }
                else
                {
                    l1.Enabled = true;
                    l2.Enabled = true;
                    l3.Enabled = true;
                    l4.Enabled = true;
                    r1.Enabled = true;
                    r2.Enabled = true;
                    r3.Enabled = true;
                    r4.Enabled = true;
                    lbl1.CssClass = "seq";
                    lbl2.CssClass = "task";

                }
            }

        }

    protected void rptr1_PreRender(object sender, EventArgs e)
    {

            foreach (RepeaterItem item in rptr1.Items)
            {
                if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
                {
                    CheckBox chb = (CheckBox)item.FindControl("chkb_NO");
                    Label lbl1 = (Label)item.FindControl("lbl_dg_task");
                    Label lbl2 = (Label)item.FindControl("lbl_dg_seq");
                    RadioButton l1 = (RadioButton)item.FindControl("L1");
                    RadioButton l2 = (RadioButton)item.FindControl("L2");
                    RadioButton l3 = (RadioButton)item.FindControl("L3");
                    RadioButton l4 = (RadioButton)item.FindControl("L4");
                    RadioButton r1 = (RadioButton)item.FindControl("R1");
                    RadioButton r2 = (RadioButton)item.FindControl("R2");
                    RadioButton r3 = (RadioButton)item.FindControl("R3");
                    RadioButton r4 = (RadioButton)item.FindControl("R4");
                    AjaxControlToolkit.ModalPopupExtender mpex = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender1");

                    if (chb.Checked == true)
                    {
                        l1.Enabled = false;
                        l2.Enabled = false;
                        l3.Enabled = false;
                        l4.Enabled = false;
                        r1.Enabled = false;
                        r2.Enabled = false;
                        r3.Enabled = false;
                        r4.Enabled = false;
                        l1.Checked = false;
                        lbl1.CssClass = "grayedout";
                        lbl2.CssClass = "grayedout";

                    }
                    else
                    {
                        l1.Enabled = true;
                        l2.Enabled = true;
                        l3.Enabled = true;
                        l4.Enabled = true;
                        r1.Enabled = true;
                        r2.Enabled = true;
                        r3.Enabled = true;
                        r4.Enabled = true;
                        lbl1.CssClass = "seq";
                        lbl2.CssClass = "task";

                    }

                    if (l1.Checked)
                    {

                        //pop.Enabled = true;
                        ModalPopupExtender1.Show();

                    }

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:09:38.423

不要使用 PreRender 事件来决定是否显示弹窗，而是使用单选按钮的 OnCheckedChanged 事件来显示它。

```
l1.CheckedChanged = (sender, e) => { if (l1.Checked) ModalPopupExtender1.Show(); }; 
```

# c++ - Winsock 发送失败并出现错误 10093

> ID：11649259
> 
> 赞同：1
> 
> 时间：2012-07-25T12:03:58.523
> 
> 标签：c++, winsock

我正在编写一个 bittorrent 客户端，需要通过 tcp 连接联系多个跟踪器。为了做到这一点，我编写了一个如下所示的 winsock 包装类：

```
class trackerSocket{
public:
    ~trackerSocket();

    int trackerInitialize(string address);
    int trackerSend(string getParams);
    int trackerRecv();

    be_node *responseDict;
    bool working;

private:
    string address;
    string port;
    string protocol;
    string page;
    SOCKET ConnectSocket;

    int parseAnnounce(string announce);
    int parseTrackerResponse(string response);
}; 
```

该程序首先将一个新的 trackerSocket 类分配给一个变量。在此函数上调用 trackerInitialize 函数，如果成功，则将该类推送到一个向量上以存储所有工作跟踪器。这是 trackerInitialize 函数：

```
int trackerSocket::trackerInitialize(string announce){
    WSADATA wsaData;
    int iResult;

    working = true;

    iResult = parseAnnounce(announce);
    if(iResult != 0){
        working = false;
        return iResult;
    }

    //Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if(iResult != 0){
        return 1;
    }

    struct addrinfo *result = NULL,
                    *ptr  = NULL,
                    hints;

    ZeroMemory(&hints, sizeof(hints));
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;

    //Resolve the server address and port
    iResult = getaddrinfo(address.c_str(), port.c_str(), &hints, &result);
    if(iResult != 0){
        WSACleanup();
        return 1;
    }

        ConnectSocket = INVALID_SOCKET;

    //Attempt to connect to the first address returned by
    //the call to getaddrinfo
    ptr = result;

    do{
        //Create a socket for connecting to the server
        ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, ptr->ai_protocol);
        if(ConnectSocket == INVALID_SOCKET){
            ptr = ptr->ai_next;
            continue;
        }

        //Connect to server
        iResult = connect(ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
        if(iResult != SOCKET_ERROR){
            break;
        } else {
            closesocket(ConnectSocket);
            ConnectSocket = INVALID_SOCKET;
            ptr = ptr->ai_next;
        }
    } while(ptr != NULL);

    freeaddrinfo(result);
    if(ConnectSocket == INVALID_SOCKET){
        working = false;
        WSACleanup();
        return 1;
    }

    return 0;
} 
```

然后程序执行代码以生成要发送到跟踪器的消息。对于向量中的每个跟踪器类，它的 trackerSend 函数与消息一起调用，这里是 trackerSend 函数：

```
int trackerSocket::trackerSend(string getParams){
    int iResult;

    ostringstream os;
    os << "GET " << page << getParams << " HTTP/1.1\r\n"
        << "Host: " << address << "\r\n"
        << "Accept: text/html\r\n"
        << "\r\n";

    string sendBuf = os.str();

    //Send tracker request
    iResult = send(ConnectSocket, sendBuf.c_str(), strlen(sendBuf.c_str()), 0);
    if(iResult == SOCKET_ERROR){
        working = false;
        closesocket(ConnectSocket);
        WSACleanup();
        return 1;
    }

    return 0;
} 
```

每次程序运行时，发送函数都会为每个跟踪器返回 -1。如果我调用 WSAGetLastError() 函数，它会返回 10093。此错误的 msdn 定义是：

尚未执行成功的 WSAStartup。应用程序没有调用 WSAStartup 或 WSAStartup 失败。应用程序可能正在访问当前活动任务不拥有的套接字（即，尝试在任务之间共享套接字），或者 WSACleanup 已被调用太多次。

我看不到 WSACleanup 被调用了太多次，所以我只能假设套接字不属于当前活动任务（不知道这意味着什么），任何人都可以看到问题吗？

这是主程序的一些代码（我在上面已经描述过）：

```
//Store tracker URL's in vector
vector<trackerSocket> trackers;
trackerSocket *temptracker = new trackerSocket();
iResult = temptracker->trackerInitialize(announce);
if(iResult == 0){
    trackers.push_back(*temptracker);
}
if(announcelist != NULL){
    i = 0;
    while(announcelist[i]){
        if(strcmp(announcelist[i]->val.l[0]->val.s, announce.c_str()) != 0){
            temptracker = new trackerSocket();
            iResult = temptracker->trackerInitialize(announcelist[i]->val.l[0]->val.s);
            if(iResult == 0){
                trackers.push_back(*temptracker);
            }
        }
        i++;
    }
}

//Check that at least one of the tracker URL's was valid
if(trackers.size() == 0){
    printf("None of the tracker URL's provided were valid.\n");
    return 1;
}

//Generate some required values
string peerid = genPeerID();
string peerport = "12345";
int uploaded = 0;
int downloaded = 0;

//Work out how many bytes are left to download
int left = 0;
if(singlefile){
    left = length;
} else {
    for(i = 0; i < filesinfo.size(); i++){
        left += filesinfo[i].length;
    }
}

//Send GET Request to tracker
i = 0;
ostringstream os;
string getParams;
string response;
os << "info_hash=" << infohash << "&peer_id=" << peerid << "&port=" << peerport <<
    "&uploaded=" << uploaded << "&downloaded=" << downloaded << "&event=started";

getParams = os.str();
do{     
    iResult = trackers[i].trackerSend(getParams);
    if(iResult != 0){
        printf("trackerSend %d failed: %d\n", i, iResult);
        i++;
        continue;
    }
} while(i < trackers.size()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:28:53.597

从您的代码中，您不应该在发送时调用 WSACleanup，如果一个跟踪器发送失败，您将减少内部计数器，如果它达到 0，则系统将需要您没有调用的新 WSAStartup...

我建议您只调用一次 WSAStartup（例如在应用程序启动时），只调用一次 WSACleanup。（例如申请结束）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:59:56.897

在从代码中休息后，我设法找出了问题所在。我相信这个SO问题和答案中描述了这个问题：

[对象的 C++ 向量与指向对象的指针向量](https://stackoverflow.com/questions/6624819/c-vector-of-objects-vs-vector-of-pointers-to-objects)

*关于 C++ 中的向量，您必须了解的是，它们必须使用对象类的复制运算符才能将它们输入到向量中。如果您在调用析构函数时自动释放这些对象中的内存分配，则可以解释您的问题：您的对象被复制到向量中然后被销毁。*

*如果您的对象类中有一个指向已分配缓冲区的指针，则该对象的副本将指向同一个缓冲区（如果您使用默认的复制运算符）。如果析构函数释放缓冲区，当调用复制析构函数时，原始缓冲区将被释放，因此您的数据将不再可用。*

*如果您使用指针，则不会发生此问题，因为您通过 new/destroy 控制元素的生命周期，并且矢量函数仅将指针复制到您的元素。*

在将向量更改为存储指向 trackerSocket 类的指针而不仅仅是 trackerSocket 类的副本并更改对向量中的 trackerSocket 函数的调用 (. to ->) 之后，问题已成功修复。以下是我所做的更改：

**老的：**

```
vector<trackerSocket> trackers;
trackers.push_back(*temptracker);
trackers[i].trackerSend(getParams); 
```

**新的：**

```
vector<trackerSocket*> trackers;
trackers.push_back(temptracker);
trackers[i]->trackerSend(getParams); 
```

# javascript - 与backbone.js 绑定的问题

> ID：11649263
> 
> 赞同：0
> 
> 时间：2012-07-25T12:04:03.100
> 
> 标签：javascript, binding, backbone.js

我是骨干新手，并试图通过绑定更新模型来更新我的 html，但没有运气。我正在使用 jquery.window 插件来创建弹出窗口。检查我按下更改标题按钮并更新我的模型标题，html 没有得到更新。非常感谢任何帮助，谢谢

埃里克

这是我的代码

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>I have a back bone</title>
</head>
<body>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
    <script src="js/jquery.window.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/backbone.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/jquery.window.css">

    <button id="add-window">Add Window</button>
    <button id="change-title">Change Title</button>

    <script type="text/template" id="search_template">
        <label><%= title %></label>
        <input type="text" id="search_input" />
        <input type="button" id="search_button" value="Search" />
    </script>

</body>
</html> 
```

Javascript：

```
(function($) {

    AppWindow = Backbone.Model.extend({
        title : "John",
        window : null       
    });

    AppWindows = Backbone.Collection.extend({
        initialize : function(models, options) {
            this.bind("add", options.view.addWindowView);
        }
    });

    WindowView = Backbone.View.extend({

        initialize : function(){
            _.bindAll(this, "render");
            this.model.bind("change:title");
            this.template = _.template($("#search_template").html());
            this.render().el;
        },

        render : function(){
            var formString = this.template(this.model.toJSON());
            var win = $.window({
                icon : 'http://www.fstoke.me/favicon.ico',
                title : this.model.get("title"),
                content : formString,
                x : 80,
                y : 80,
                resizable : true,
            });
            this.el = $("#" + win.getWindowId()+".window_frame");
            this.delegateEvents(this.events);
            return this;
        }

    });

    AppView = Backbone.View.extend({
                views: {},
                el : $("body"),
                initialize : function() {
                    this.appWindows = new AppWindows(null, {
                        view : this
                    });
                },

                events : {
                    "click #add-window" : "addWindow",
                    "click #change-title" : "changeTitle"
                },

                addWindow : function() {
                    var window_title = "Eric";
                    var window_model = new AppWindow({
                        title : window_title
                    });
                    // Add a new model to our friend collection
                    this.appWindows.add(window_model);
                },

                changeTitle : function(){
                    var win = this.appWindows.at(0);
                    win.set("title", "jamjamajm");
                },

                addWindowView : function(model) {
                    var view = new WindowView({
                        model : model
                    });
                    model.set("window", view);
                },

                deleteWindow : function(wnd){
                    console.log("deleteing");
                }
            });

    var appview = new AppView;
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:01:09.983

您忘记将方法添加到`change:title`模型的绑定中`WindowView`。

Backbone.js 文档对`on`-function（又名绑定）进行了以下说明：

> *object.on(event, callback, [context]) 别名：bind*
> 
> 将回调函数绑定到对象。每当触发事件时都会调用回调。

因此，`this.model.bind("change:title");`您刚刚提供了每次`title`更改属性时触发的事件。您尚未提供回调函数，因此触发事件时不会发生任何事情。我想你希望回调是`WindowView`的渲染函数，所以这应该解决它：

```
this.model.on("change:title", this.render); // changed to on as bind is deprecated but still supported 
```

这样，每当`change:title`触发事件时，`render`都会`WindowView`调用与模型相对应的事件。

# c# - 智能设备应用程序的 SQLCE 子查询

> ID：11649273
> 
> 赞同：0
> 
> 时间：2012-07-25T12:04:40.533
> 
> 标签：c#

我创建了两个表名为 abc1 和 xyz。

abc1 具有列 ID、名称和添加。其中 xyz 表具有 id，mob。

```
select name from abc1 where id =(select id from xyz) 
```

收到错误

> 解析查询时出错。[令牌行号=1，令牌行偏移量=34，错误令牌=选择]

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:09:22.777

select name from abc1 where id IN (select id from xyz) // 因为 select id from xyz 可以返回很多行

或者

```
select name from abc1 where id =(select id from xyz where mob=...) // for only one result 
```

# c# - 针对版本'v2.0.50727'的错误混合模式程序集..在运行安装程序时创建表时，安装程 序类

> ID：11649275
> 
> 赞同：0
> 
> 时间：2012-07-25T12:04:42.993
> 
> 标签：c#, .net, visual-studio-2010, installation

我有窗口应用程序，已经做了一些`custom action`，在安装应用程序时编辑`userinterface` 从用户检索值，并在创建表时进一步在安装程序类中得到以下错误消息

```
Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot
be loaded in the 4.0 runtime without additional configuration information. 
```

我google了很多，发现在下面添加可以解决问题*（不适合我）*

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    <supportedRuntime version="v2.0.50727"/>
  </startup> 
```

以前我的 app.confg 看起来像

```
<startup>
      <supportedRuntime version="v2.0.50727"/>
  </startup> 
```

代码：Installer1.cs

```
public override void Install(IDictionary stateSaver)
        {
            base.Install(stateSaver);
            string targetDirectory = Context.Parameters["targetdir"];
            string servername = Context.Parameters["dbservername"];
            string dbname = Context.Parameters["dbname"];
            string strconnectionstring = "Data Source='" + servername + "';Initial Catalog='" + dbname + "';Integrated Security=True";

            if (servername == "")
            {
                throw new InstallException("You did not Specify SQL Servername!");
            }

            else if (dbname == "")
            {
                throw new InstallException("You did not specify the database name!");
            }

            string exePath = string.Format("{0}abc..exe", targetDirectory);
            System.Configuration.Configuration conf = ConfigurationManager.OpenExeConfiguration(exePath);
            conf.ConnectionStrings.ConnectionStrings["abc"].ConnectionString = strconnectionstring;
            conf.Save(ConfigurationSaveMode.Modified);

            using (SqlConnection con1 = new SqlConnection(strconnectionstring))
            {
                System.Diagnostics.Debugger.Break();
                string getScript = "Use " + dbname + "; CREATE TABLE supportContacts ( id int identity primary key,  type varchar(20),  details varchar(30)  )";
               // string strscript = getScript;
                Server server = new Server(new ServerConnection(con1));
                server.ConnectionContext.ExecuteNonQuery(getScript );
                con1.Close();
            }   

        } 
```

在调试时我知道错误发生在 `server.ConnectionContext.ExecuteNonQuery(strupdatescript);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:22:48.487

对我来说，以下工作：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:10:22.430

我有同样的确切问题。如果有人能揭露什么可以解决这个问题，非常感谢。

我找到了/答案:)。为我工作。

[http://reedcopsey.com/2011/09/15/setting-uselegacyv2runtimeactivationpolicy-at-runtime/](http://reedcopsey.com/2011/09/15/setting-uselegacyv2runtimeactivationpolicy-at-runtime/)

# iphone - 本机日历问题

> ID：11649280
> 
> 赞同：0
> 
> 时间：2012-07-25T12:05:02.163
> 
> 标签：iphone, ios

如何以最小的延迟从本机日历中获取事件，我不询问获取事件的代码，我询问获取的性能和增强它的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:09:07.310

提高性能 您可以使用谓词来最小化与谓词匹配的事件的数量

# cakephp - 如何扩展或覆盖 CakePHP Core Helper 的功能/方法

> ID：11649285
> 
> 赞同：5
> 
> 时间：2012-07-25T12:05:19.787
> 
> 标签：cakephp

This: [Cakephp Override HtmlHelper::link](https://stackoverflow.com/questions/5613899/cakephp-override-htmlhelperlink)提出了一个非常相似的问题，但没有完整的答案。也许现在，随着 Cake 2 的推出，将会有。

我想创建一个自定义助手，它是 Cake 的 Paginator Helper 的子类。我希望我的新助手覆盖 Cake 的 Paginator 助手的“数字”方法，但我希望它继承所有其他方法。

是否可以以这种方式扩展核心助手？显然，我不想：修改 Cake Core；在 AppHelper 超类中放置不必要的代码；或将整个核心分页助手复制到我的新助手中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-29T03:05:30.127

添加到 Brelsnok 的解决方案中，混叠是正确的方法。如果您将此代码添加到您的 AppController.php 文件中，那么无论何时您使用分页器，它都会使用您的扩展类。

```
public $helpers = array(
'Paginator' => array('className' => 'PaginatorExt' )
); 
```

由于 PaginatorExtHelper 类已经扩展了 PaginatorHelper，因此唯一被覆盖的函数是`numbers`. 对其他 Paginator 方法的任何调用都将由核心 PaginatorHelper 类处理，就像它是一个香草蛋糕安装一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T12:10:02.510

`PaginatorExtHelper.php`在您的文件夹中创建`View/Helper/`文件。它可能看起来像下面这样。
而不是发起`$helpers = array('Paginator');`做`$helpers = array('PaginatorExt');`

```
<?php
App::uses('PaginatorHelper', 'View/Helper');

class PaginatorExtHelper extends PaginatorHelper {

    public function numbers($options = array()) {
        // logic here

        return $out;
    }
}
?> 
```

通过仅实现`public function numbers()`您继承其他功能。

# iphone - 使用 ifconfig 检查我使用的是本地 WiFi 还是 3G

> ID：11649287
> 
> 赞同：0
> 
> 时间：2012-07-25T12:05:32.117
> 
> 标签：iphone, bash, ip, wifi, ifconfig

对于 bash 脚本，我想确定我的设备是否有 Wi-Fi。对我来说最简单的方法是 ifconfig 和一些正则表达式。所以我想检查我的接口 en0 是否有有效的 IP。

```
ifconfig en0 | grep inet | cut -d: -f2 | awk '{ print $2}' 
```

给我IP。如果我没有，它不会返回任何内容，因为该`grep`命令什么也不返回。例如，我该如何检查`if`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:56:56.117

我设法把它和我在其他网站上找到的信息放在一起。

```
#!/bin/sh
IP_ADDRESS=$(ifconfig en0 | grep inet | cut -d: -f2 | awk '{ print $2}')
IP_ADDR_VAL=$(echo "$IP_ADDRESS" | grep -Ec '^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])')

if [ $IP_ADDR_VAL -eq 0 ]; then
   echo not valid
else 
   echo valid
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:13:28.783

实际上，我注意到`inet`只有在连接时该部分才存在，所以管道`grep inet` 应该可以很好地完成工作！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T12:41:57.803

我的 ifconfig 输出不同

```
inet addr:192.168.210.140  Bcast:192.168.215.255  Mask:255.255.248.0
inet6 addr: fe80::92fb:a6ff:fe66:970/64 Scope:Link 
```

但是差异不是很大，您会发现您需要更改的内容（我知道您需要检查一个接口 - 这里是 eth0；每个接口都有一个 inet 行）

```
if [[ `/sbin/ifconfig eth0 | grep -e 'inet ' | cut -d ' ' -f12 | grep -E "^addr:[0-9]{3}.[0-9]{3}.[0-9]{3}.[0-9]{3}$" | wc -l` -eq 1 ]]; then
  echo "correct IP";
else
  echo "no IP";
fi
echo " assigned"; 
```

# ios - ios 可达性

> ID：11649288
> 
> 赞同：1
> 
> 时间：2012-07-25T12:05:36.257
> 
> 标签：ios

是否有可能检查 iphone 是否通过 Wlan、3g、4g 或 2g 连接？！我知道苹果有一个可达性类，但是你只能检查 Wlan 还是 wwan ......

```
switch (netStatus)
{
    case NotReachable:
    {
        statusString = @"Access Not Available";
        imageView.image = [UIImage imageNamed: @"stop-32.png"] ;
        //Minor interface detail- connectionRequired may return yes, even when the host is unreachable.  We cover that up here...
        connectionRequired= NO;  
        break;
    }

    case ReachableViaWWAN:
    {
        statusString = @"Reachable WWAN";
        imageView.image = [UIImage imageNamed: @"WWAN5.png"];
        break;
    }
    case ReachableViaWiFi:
    {
         statusString= @"Reachable WiFi";
        imageView.image = [UIImage imageNamed: @"Airport.png"];
        break;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:24:15.150

您要识别的案例属于 WWAN（无线广域网）案例。没有官方记录的方法可以做到这一点，但这[是一个可以解决问题的解决方案，](https://stackoverflow.com/questions/8400340/determining-3g-vs-edge/11400410#11400410)在状态栏上使用私有 API

# php - 遍历 XML

> ID：11649290
> 
> 赞同：0
> 
> 时间：2012-07-25T12:05:43.523
> 
> 标签：php, xml, simplexml

XML:

```
<?xml version="1.0" encoding="utf-8"?>
    <NConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <NDomain>ex1</NDomain>
            <Parameters>
                <version>p</version>
                <siteFolder>site1</siteFolder>
                <cssGeneral></cssGeneral>
                <cssLogin>l.css</cssLogin>
            </Parameters>
            <Database>
                <hostname>898</hostname>
                <username>j</username>
                <password>k</password>
                <name>n</name>
            </Database>
<NDomain>ex2</NDomain>
                <Parameters>
                    <version>p</version>
                    <siteFolder>site1</siteFolder>
                    <cssGeneral></cssGeneral>
                    <cssLogin>l.css</cssLogin>
                </Parameters>
                <Database>
                    <hostname>898</hostname>
                    <username>j</username>
                    <password>k</password>
                    <name>n</name>
                </Database>
        </NConfig> 
```

我想遍历 ex1 下的所有节点

到目前为止，我可以通过这样做直接访问节点：

```
$xmldata  = simplexml_load_file("config.xml");

foreach($xmldata->Parameters as $item)
{
        echo "<p>Version: " . $item->version . "</p>";
        echo "<p>Site Folder: " . $item->siteFolder . "</p>";
} 
```

但这并不能使其特定于根节点，而是会遍历列表中的所有参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:54:31.300

如果你`<Parameters>`和`<Database>`特定于相应的`<NDomain>`，我更喜欢你应该有你的 xml 架构，如下所示：

```
 <NDomain>
            <name>ex1</name>
            <Parameters>
                <version>p</version>
                <siteFolder>site1</siteFolder>
                <cssGeneral></cssGeneral>
                <cssLogin>l.css</cssLogin>
            </Parameters>
            <Database>
                <hostname>898</hostname>
                <username>j</username>
                <password>k</password>
                <name>n</name>
            </Database>
      </NDomain>
      <NDomain>
        <name>ex2</name>
                <Parameters>
                    <version>p</version>
                    <siteFolder>site1</siteFolder>
                    <cssGeneral></cssGeneral>
                    <cssLogin>l.css</cssLogin>
                </Parameters>
                <Database>
                    <hostname>898</hostname>
                    <username>j</username>
                    <password>k</password>
                    <name>n</name>
                </Database>
      </NDomain> 
```

所以你可以这样解析：

```
 foreach($xmldata->NDomain as $item)
   {
     $par = $item->Parameters;
    echo "<p>Version: " . $par->version . "</p>";
    echo "<p>Site Folder: " . $par->siteFolder . "</p>";
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:32:37.407

您可以只遍历根节点子节点，如下所示：

```
$first = true;
foreach($xmldata->children() as $item)
{
    if( $first === true) { 
        $first = false;
        continue;
    }
} 
```

该循环将捕获`<NDomain>`、`<Parameters>`和`<Database>`，因此您需要一个简单的检查来跳过第一次迭代以省略`<NDomain>`。

# css - 如何在伪类之前和之后删除或禁用？

> ID：11649295
> 
> 赞同：11
> 
> 时间：2012-07-25T12:06:05.533
> 
> 标签：css, css-sprites, pseudo-class

这似乎很微不足道，但我无法弄清楚。简单地覆盖它`display:none`在 IE8 上不起作用。

```
#selector::after {
    display: none;
} 
```

我正在修改一个在伪类之前和之后使用的主题来添加图像精灵。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-25T12:08:47.077

只使用一次冒号

```
#selector:after {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-03T12:12:00.530

[W3C 规范](https://www.w3.org/TR/2005/WD-css3-selectors-20051215/#pseudo-elements)说，在*CSS3*中，所有*伪元素*都喜欢`::before`并且`::after`必须使用*双冒号*语法，但是：

> 为了与现有样式表兼容，用户代理还必须接受之前在 CSS 级别 1和2 中引入的伪元素的单冒号表示法（即`:first-line`、`:first-letter`和）。`:before``:after`

所以在你的情况下**使用一个冒号表示法**。

# z3 - Z3中的触发问题

> ID：11649305
> 
> 赞同：6
> 
> 时间：2012-07-25T12:06:45.343
> 
> 标签：z3

我最近在 Z3 中观察到一些关于触发的行为，我不明白。不幸的是，这些示例来自大型 Boogie 文件，所以我想我现在先抽象地描述它们，看看是否有明显的答案。但是，如果具体文件会更好，我可以附上它们。

基本上有三个问题，尽管第三个很可能是第二个的特例。据我了解，没有任何行为是预期的，但也许我错过了一些东西。任何帮助将不胜感激！

**首先**：就触发而言，我的程序中的琐碎等式似乎被忽略了。例如，如果`t1`是一个应该匹配量化公理模式的术语，如果我在我的 Boogie 程序中添加一行，形式为

```
assert t1 == t1; 
```

那么`t1`似乎并*没有*被用作量化公理的触发器。我明确地添加了这一行，以便`t1`作为证明者的触发器，我经常在 Boogie 程序中这样做/做过。

相反，如果我引入一个额外的功能，比如说

```
function f(x : same_type_as_t1) : bool
{ true } 
```

现在改为添加一行

```
assert f(t1); 
```

到我的程序，然后`t1` *似乎*被Z3用作触发器。我检查了前一个程序的 Z3 翻译，并且（微不足道的）平等`t1`确实在 Boogie 翻译中幸存下来（即，它不是 Boogie 试图做一些聪明的事情）。

**其次：**次要模式似乎对我不起作用。例如，我有一个程序，其中一个公理具有以下形式

```
axiom (forall ... :: {t1,t2} {t3,t4,t5} ..... ); 
```

以及所有都发生过`t3, t4`的情况。`t5`程序无法验证，显然是因为公理没有实例化。但是，如果我将公理重写为

```
axiom (forall ... :: {t3,t4,t5} {t1,t2} ..... ); 
```

然后程序验证。在这两种情况下，运行 Boogie 的时间大约为 3 秒，并且模式在 Z3 输出中仍然存在。

**第三：**这很可能是第二个问题的症状，但我对以下行为感到惊讶：

我写了形式的公理

```
axiom (forall .. :: {t1,t2} .... );

axiom (forall ... :: {t2,t4} {t2,t3} ...some expression involving t1... ); 
```

并且在已经发生的情况下`t2`，`t3`第一个公理没有被实例化（我希望它是，因为在第二个公理实例化之后`t1`发生）。但是，如果我改写为

```
axiom (forall .. ::  {t2,t3} {t1,t2} .... );

axiom (forall ... :: {t2,t4} {t2,t3} ...some expression involving t1... ); 
```

然后实例化第一个公理。但是，如果由于某种原因次要模式没有得到普遍使用，那么这也可以解释这种行为。

如果显式示例有用，我当然可以附上长示例，并且可以尝试将它们减少一点（但当然触发问题有点微妙，所以如果我将示例做得太小，我很可能会失去这种行为）。

非常感谢您的任何建议！

亚历克斯·萨默斯

**编辑：**这是一个示例，部分说明了上述第二个和第三个行为。我附上了 Boogie 代码以便在此处更容易阅读，但如果它更有用，我也可以复制或通过电子邮件发送 Z3 输入。我已经删掉了几乎所有原始的 Boogie 代码，但似乎很难在不完全丢失行为的情况下让它变得更简单。

下面的代码已经与我原来的例子有微妙的不同，但我认为它已经足够接近了。基本上，下面标记为 (1) 的公理无法使其第二个模式集匹配。如果我注释掉公理 (1)，而是用（当前注释的）公理 (2) 和 (3) 替换它，这两个模式集只是原始公理的副本，然后程序验证。实际上，在这种特殊情况下，有公理 (2) 就足够了。在我的原始代码中（在我削减它之前），翻转公理 (1) 中两个模式集的顺序也足够了，但在我的小型复制中似乎不再是这种情况。

```
type ref;
type HeapType;

function vals1(HeapType, ref) returns (ref);
function vals2(HeapType, ref) returns (ref);
function vals3(HeapType, ref) returns (ref);

function heap_trigger(HeapType) returns (bool);

function trigger1(ref) returns (bool);
function trigger2(ref) returns (bool);

axiom (forall Heap: HeapType, this: ref ::  {vals1(Heap, this)}  (vals1(Heap, this) == vals3(Heap,this)));

axiom (forall Heap: HeapType, this: ref :: {vals2(Heap, this)}  trigger2(this));

// (1)
axiom (forall Heap: HeapType, this: ref :: {vals1(Heap, this)} {trigger1(this), heap_trigger(Heap), trigger2(this)} (vals1(Heap, this) == vals2(Heap, this)));

// (2)
// axiom (forall Heap: HeapType, this: ref :: {trigger1(this), heap_trigger(Heap), trigger2(this)}  (vals1(Heap, this) == vals2(Heap, this)));
// (3)    
// axiom (forall Heap: HeapType, this: ref :: {vals1(Heap, this)} (vals1(Heap, this) == vals2(Heap, this)));

procedure test(Heap:HeapType, this:ref)
{
  assume trigger1(this); assume heap_trigger(Heap);

  assert (vals2(Heap, this) == vals3(Heap,this));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:33:49.757

第一个问题：

Z3 在预处理步骤中简化了琐碎的断言。断言`assert t1 == t1`简化为`assert true`。因此，`t1`E-matching 引擎不考虑该术语。诀窍是为 Z3 提供可用于 E-matching`assert f(t1)`的术语的标准方法。`t1`Z3 中当前的预处理器还不够“聪明”，无法删除不相关的断言`assert f(t1)`。当然，未来版本的 Z3 可能会有更好的预处理器，而这个技巧将不再适用。

对于第二个和第三个问题，最好有（小）Z3 脚本来产生所描述的行为。

**编辑。** 我分析了你问题中的例子。事实证明这是Z3中的一个错误。我修复了这个错误，该修复将在 Z3 4.1 中可用。感谢您花时间减小示例的大小。对此，我真的非常感激。在更大的实例中找到这个错误需要“永远”。电子匹配引擎缺少一些实例。该问题会影响包含多模式的 Z3 脚本，这些多模式使用不会出现在任何一元模式中的函数符号 f。多模式也应该发生在地面 f 应用之前。此外，必须禁用 MBQI 引擎。默认情况下，Boogie 禁用 MBQI 引擎。在这种情况下，可能会错过多模式的实例。这个错误在电子匹配引擎中存在了很长时间。我认为它从未被发现有两个原因：

1-它不影响健全性（Z3不会产生错误的答案，而是“未知”的答案）

2- MBQI 引擎“补偿”任何丢失的实例。

关于为电子匹配提供附加条款的额外命令，我们可以通过以下方式进行模拟。该命令`add_term(t)`只是`(assert (add_term t))`. 即使我们实现了一个预处理器来消除仅正面（或负面）出现的谓词符号，它也不会消除保留的谓词符号`add_term`。因此，即使我们添加了这个预处理器，这个技巧也会继续起作用。

# android - 是否可以从外部类中获取应用程序的名称？

> ID：11649306
> 
> 赞同：1
> 
> 时间：2012-07-25T12:06:44.800
> 
> 标签：android, eclipse

我有许多应用程序引用的库项目。现在我有一个新要求，我需要更改这个库项目中的函数。我需要根据调用此函数的应用程序将变量传递给我的 Web 服务。因此需要知道该库项目中当前应用程序的名称。我知道我可以通过传递上下文来做到这一点，但我正在寻找不传递上下文的选项。因为否则我不知道我将要更改多少应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:21:37.640

据我所知..当您的公共库中的方法被调用时，该方法本身无法知道哪个应用程序正在调用它。传递参数来识别应用程序是您拥有的最佳选择。

根据您调用方法的功能和时间。您可以获得在前台运行的应用程序。但是，如果您正在运行一项服务或其他不那么直截了当的事情，这将再次成为一件困难的事情。

# javascript - jQuery在Chrome上附加带有剃刀语法错误的html

> ID：11649308
> 
> 赞同：0
> 
> 时间：2012-07-25T12:06:46.660
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我有这个 javascript 代码：

```
var markup = '<tr id="newdo" class="odd"><td>' + @Html.DropDownList("does", new SelectList(Model.Does, "Id", "Name"),new { @class = "newDoSelect" }) + '</td><td class="small">'+ @Html.DropDownList("restriction", Model.Restrictions) + '</td><td>' + @Html.ListBox("doobjectives", new MultiSelectList(Model.AllObjectives, "Id", "Name"), new { Multiple = "multiple", @class="doobjectives" }) + '</td><td></td></tr>';
$('#doList tr:last').after(markup); 
```

这是渲染的代码：

```
var markup = '<tr id="newdo" class="odd"><td>' + <select class="newDoSelect" id="does_3_" name="does[3]"><option value="319">A breath of fresh air..</option>
<option value="176">Fix something that&#39;s broken today!</option>
<option value="179">Get a physical &#39;high&#39; today!</option>
<option value="150">It&#39;s OK to be unassertive sometimes!</option>
<option value="169">Just &#39;let it wash&#39; today.</option>
<option value="200">WOW!</option>
<option value="233">Write something for 15 minutes.</option>
<option value="104">You CAN be individually-centred: try it today.</option>
<option value="111">You can be livelier: try this.</option>
<option value="77">You can be more definite in how you are.</option>
<option value="58">You don&#39;t always have to be unassertive!</option>
</select> + '</td><td class="small">'+ <select id="restriction_3_" name="restriction[3]"><option value="negative">negative</option>
<option value="neutral">neutral</option>
<option value="positive">positive</option>
</select> + '</td><td>' + <select Multiple="multiple" class="doobjectives" id="doobjectives_3_" multiple="multiple" name="doobjectives[3]"><option value="4">another test</option>
<option value="24">testing objective 10</option>
<option value="25">testing objective 11</option>
<option value="13">testing objective 2</option>
<option value="14">testing objective 3</option>
<option value="15">testing objective 4</option>
<option value="16">testing objective 5</option>
<option value="17">testing objective 7</option>
<option value="19">testing objective 8</option>
<option value="18">testing objective 9</option>
</select> + '</td><td></td></tr>';
$('#doList tr:last').after(markup); 
```

它在 Firefox 上运行良好，但在 chrome 上我在第一行收到此错误：

未捕获的 SyntaxError：意外的标识符

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:31:02.740

不要连接：

```
var markup = '<tr id="newdo" class="odd"><td>@Html.DropDownList("does", new SelectList(Model.Does, "Id", "Name"),new { @class = "newDoSelect" })</td><td class="small">@Html.DropDownList("restriction", Model.Restrictions)</td><td>@Html.ListBox("doobjectives", new MultiSelectList(Model.AllObjectives, "Id", "Name"), new { Multiple = "multiple", @class="doobjectives" })</td><td></td></tr>';
$('#doList tr:last').after(markup); 
```

此外，这似乎是一种将客户端与服务器端脚本混合在一起的糟糕方式。为什么不直接在服务器上构建整个标记？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:01:24.323

```
'<tr id="newdo" class="odd"><td>' + <select 
```

是问题所在。您不是在生成字符串，而是尝试将字符串与 html 连接起来。所以 Darin 是对的 - 不要连接或连接下拉列表的内部 html&co 呈现在其他地方（“显示：无”div）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T19:16:49.190

旧的，但找到了类似问题的不同解决方案。

要从通过以下方式生成的对象中获取 HTML：

```
 @Html.DropDownList("does", new SelectList(Model.Does, "Id", "Name"),new { @class = "newDoSelect" }) 
```

你可以使用`ToHtmlString()`这样的方法：

```
 @Html.DropDownList("does", new SelectList(Model.Does, "Id", "Name"),new { @class = "newDoSelect" }).ToHtmlString() 
```

# excel - 数据透视表：运行总百分比的绝对值？

> ID：11649309
> 
> 赞同：2
> 
> 时间：2012-07-25T12:06:47.403
> 
> 标签：excel, pivot-table

在 Excel 2010 中，我希望输入一个数据透视表来创建一个值，即“*在该时间点运行总计/估计的百分比*”。我可以创建一个“*运行总计*”，但我无法将它与“*那个时间点的估计*”正确划分。该值最好在数据透视表中计算，并且不允许更改输入数据格式。

这个例子比文字更能说明问题。我在数据透视表中创建时需要帮助的字段标有 ** ** ** ** ** ** ** **。

我用示例创建了一个工作表： [https ://www.dropbox.com/s/4a2f66n6uxfikte/11649309%20Example%20pivot-table-running-total-percentage-of-an-absolute-value.xlsx](https://www.dropbox.com/s/4a2f66n6uxfikte/11649309%20Example%20pivot-table-running-total-percentage-of-an-absolute-value.xlsx)

提前致谢。

**输入表**

输入数据采用以下格式 - 不允许更改。对于每个月，我都有该月花费的小时数以及该时间点整个项目的估计（不仅仅是该月）。

```
Month      Hours spent   Estimate
01-2012              1         50
02-2012             10         50
03-2012              5         60
04-2012             35         60 
```

**我希望创建的数据透视表**

```
 ** ** ** ** ** ** ** **
Month           Hours spent   Estimate                    % Hrs/Estimate 
            (running total)                      (How do I create this?)
01-2012                   1         50                                2%
02-2012                  11         50                               22%
03-2012                  16         60                               27%
04-2012                  51         60                               85% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:12:22.490

以下是您可以执行的操作：

您在 AC 列中布置了 Month、Hours 和 Estimate 列。在 D 列中，您输入此公式以获得“花费的小时数（运行总计）”列：

```
=SUM($B$2:B2) 
```

当然，将其向下拖动，直到数据用完。在 E 列中，您输入此公式以获得“% Hrs/Estimate”列：

```
=D2 / C2 
```

再次将其向下拖动，直到数据用完。将 A 列复制/粘贴到 F 列。然后突出显示 CF 列，按 Alt + D + P，然后单击“完成”，新数据透视表的布局将出现在新工作表上。然后，您可以使用数据透视表字段列表来获得您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:50:22.513

**编辑：我误读了一个细节，这要求运行总列已经存在于“花费的小时数”中**

或者只是在数据透视表中计算（不添加到数据集）

数据透视表工具功能区 => 选项选项卡 => 工具组 => 公式 => 计算字段

输入字段名称（不是您想要的显示名称。字段名称和显示名称必须不同。我再说一遍，**必须**不同，excel 不允许它们相同）。

输入您的论坛`= hours spent / estimate`，但使用对话框中的插入字段选项。然后单击确定。如果尚未添加该字段，请将其更改为显示为百分比并将显示名称更改为您想要的名称。

**编辑：通过数据透视表获得运行总计（注意这两个解决方案不会一起工作，不幸的是，我上面概述的计算字段将使用原始数据，而不是运行总计）**

右键单击小时列中数据透视表中的单元格（尚未运行总计）=> 值字段设置 => 将值显示为 => 运行总计 => 尝试任何有效的选择，但它应该是你的行标签。（大概一个月）

# javascript - 复制标签后跟输入字段内容

> ID：11649310
> 
> 赞同：0
> 
> 时间：2012-07-25T12:06:49.010
> 
> 标签：javascript, html, event-handling, dom-events, copy-paste

给定：一个标签文本，后跟一个类似于表单的输入字段（例如名称：________（输入框））

要求：需要开发一种机制，能够一次性复制文本和输入字段，即突出显示/选择整行文本和输入框。

问题： `CTRL`+`C`仅复制文本而不是整个数据以及输入框。

提出这种要求的原因：我有一个表单，其中 Label 是网站的域，输入框用于作者个人资料 ID（例如[www.facebook.com/_______](http://www.facebook.com/_______) _（输入框））

预期行为：当用户选择整个[www.facebook.com/](http://www.facebook.com/)和作者 ID（比如 john007）时，他认为他会在某处粘贴“www.facebook.com/john007”。

技术性：我的剪贴板应该复制文本和输入框的内容。

实施：正在考虑使用`CTRL`+`C`事件，但无法弄清楚所需的确切行为。

```
<div>
           <label>www.facebook.com/</label>
           <input  style="width:150px" type="Text" id="nameInput"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:13:21.160

我认为这不是[`<label>`element](http://www.w3.org/TR/html5/the-label-element.html#the-label-element)的合适用例。我期待类似的东西

```
<div>
    <label for="nameInput">Facebook page:</label>
    <input type="text" id="nameInput" value="www.facebook.com/">
</div> 
```

然后可以输入并选择完整的地址。您可以添加一些脚本，最终为字符串 onkeyup 和 -paste 添加前缀。

或者你做这样的事情：

```
<div>
    <label for="nameInput">Your profile id:</label>
    <input type="text" id="nameInput">
    (<label for="url">URL:</label>
    <output id="url">www.facebook.com/</output>)
</div> 
```

当输入更改时，您将从输入字段中粘贴的 url 中剪下前缀，并适当地更改输出字段的文本，用户可以从中选择和复制。

```
// on ready
$("#nameInput").on("keyup paste input change", function(e) {
    var name = this.value.replace(/^(https?://www.facebook.com/)/, "");
    this.value = name;
    $("#url").text("www.facebook.com/"+name);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:48:32.603

如果你想使用 Ctrl+C 功能，你可以使用下面的代码（但它适用于 IE）：

```
<html>
<head></head>
<body>
    <textarea rows="5" cols="20" wrap="hard" onblur="CopyToClipboard(this)"></textarea>
</body>

<script language="JavaScript">
function CopyToClipboard(text) {
    Copied = text.createTextRange();
    Copied.execCommand("Copy");
}test
</script>
</html> 
```

希望它有帮助......干杯！

# javascript - 在javascript函数中获取复选框值

> ID：11649314
> 
> 赞同：1
> 
> 时间：2012-07-25T12:06:57.037
> 
> 标签：javascript, c#-4.0, html-parsing

我正在做javascript注入，下面是我的代码。

```
HtmlElement head = webBrowser1.Document.GetElementsByTagName("head")[0];
HtmlElement scriptEl = webBrowser1.Document.CreateElement("script");
IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;

element.text = "function sayHello() { debugger; alert('Helloooo');" + " var resume=webBrowser1.Document.GetElementByTagName('resID');" +
               " var i; for (i=0;i<resume.length;i++){if (resume[i].checked){alert(\"hi....\");} }  }";

head.AppendChild(scriptEl);
System.Diagnostics.Debug.Print("html: {0}",head.InnerHtml);
webBrowser1.Document.InvokeScript("sayHello");` 
```

我的复选框名称是 resID。sayHello 函数中 alert 之后的语句没有执行。这段代码的结果是，它以 Hello 形式发出警报并停止执行。访问复选框值时我的代码中是否有任何错误。我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:16:41.987

换行。

```
var resume=webBrowser1.Document.GetElementByTagName('resID'); 
```

至

```
var resume=document.getElementByTagName('resID'); 
```

# android - 如何在打开 Twitter 时从浏览器意图打开的活动中捕获关键事件

> ID：11649318
> 
> 赞同：1
> 
> 时间：2012-07-25T12:07:14.570
> 
> 标签：android, twitter4j

我在 android 应用程序中使用 twitter4j 来集成 twitter，我正在从我的应用程序活动中调用 twitter4j 的 twittershare 活动，它打开浏览器进行 twitter 登录，当我点击返回键时，它会返回 PrepareRequestTokenActivity 活动但不在 onNewIntent（意图意图） ，那么我如何从浏览器中捕获回键事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:15:49.553

我不明白`PrepareRequestTokenActivity`,`twittershare activity`等是什么，但这里有一个一般说明：

当您按下返回时，您不会触发对先前活动的新 Intent；你只是把它从堆栈中拿出来。本质上，这将调用`onResume()`后台活动。如果你想`onNewIntent()`调用前一个活动的，你应该覆盖`onBackPressed()`当前活动的，并开始一个新`Intent`的前一个活动。当然，前提是先前的活动被声明为`singleInstance`or `singleTask`。

# haskell - 将值绑定到非第一个参数

> ID：11649324
> 
> 赞同：3
> 
> 时间：2012-07-25T12:07:37.160
> 
> 标签：haskell, currying

我有一个名为“人”的班级

```
Person :: String -> String -> Int -> Gender -> Person 
```

**目标：** 通过将 Gender 分配给 Female 来制作更通用的 Person 版本，即 femalePerson。

**什么有效：** 绑定前 N 个元素有效：

```
let personsWithNameAlice = Person "Alice"
let personsWithNameAliceMcGee = Person "Alice" "McGee" 
```

**什么不起作用：**

```
let femalePerson = Person {gender = Female} 
```

**问题：**

*   我该怎么做呢？
*   如何将值绑定到 n ！= 0 的任何函数的第 n 个元素？

只是我知道我可以用数学写 f(x,y,z) = g(x,y,z,5) 用 C++ 写 std::bind2nd(f, 8) 所以在 Haskell 中不应该?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T17:39:14.877

使用[语义编辑器组合器](http://conal.net/blog/posts/semantic-editor-combinators)。例如，假设您有一个函数：

```
foo :: Int -> String -> Bool -> Char -> Float
foo = undefined 
```

我已将示例更改为涉及所有不同的类型，因此类型检查将确保我们的定义正确。我们想要以下四种特化，每一种都是由填写一个参数产生的：

```
foo0 ::        String -> Bool -> Char -> Float  -- 3
foo1 :: Int ->           Bool -> Char -> Float  -- "hey"
foo2 :: Int -> String ->         Char -> Float  -- True
foo3 :: Int -> String -> Bool ->         Float  -- 'x' 
```

第一个很简单，直接部分应用：

```
foo0 = foo 3 
```

但是，让我们以一种奇怪的方式来写它（为了与其他方式保持一致）：

```
foo0 = ($ 3) foo 
```

对于其他人，使用`result`，这是组合的同义词：

```
result :: (b -> b') -> ((a -> b) -> (a -> b'))
result = (.) 
```

应用程序`result`将给定函数瞄准另一个函数的“结果”（因此直接类似于 的`first`和`second`函数`Control.Arrow`）。然后重复应用程序瞄准多个结果，跳过连续的柯里化参数，完全符合我们的需要：

```
foo1 = result ($ "hey") foo
foo2 = (result.result) ($ True) foo
foo3 = (result.result.result) ($ 'x') foo 
```

请注意，第 n 个特化使用`result`了与自身组成的 n 次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T12:23:46.430

您可以使用 lambda 表达式来做到这一点，给定

```
Person :: String -> String -> Int -> Gender -> Person 
```

你会定义

```
femalePerson = \fn ln a -> Person fn ln a Female 
```

或者，在绑定中使用参数：

```
femalePerson fn ln a = Person fn ln a Female 
```

如果要专门绑定第二个参数，`flip`就是你要的函数

```
third = flip (/) 3 
```

您可以使用`flip`将参数绑定在任意位置，但这很快就会变得麻烦且难以理解：

```
femalePerson = curry . curry $ flip (uncurry (uncurry Person)) Female 
```

# jquery - 在 Google docs 嵌入式查看器中动态更改 src

> ID：11649326
> 
> 赞同：0
> 
> 时间：2012-07-25T12:07:54.657
> 
> 标签：jquery, iframe, google-docs

```
<div class="left" style="float:left" id="document-viewer">
    <iframe src="http://docs.google.com/viewer?url=http://www.mysite.be/doc.ppt&amp;embedded=true" width="620" height="780" style="border: none;" id="document-preview"></iframe>
</div> 
```

我有一个嵌入式谷歌文档查看器。一切正常，但是现在我想在单击某个链接以显示另一个文档时更改 iframe src。

```
 $('.document-slider-item').click(
        function(event){
           var url = 'http://docs.google.com/viewer?url=';
           url += $(this).attr('href');
           url += '&amp;embedded=true';
           event.preventDefault();
           $('#document-preview').attr('src',url);  
        }); 
```

这给了我`Refused to display document because display forbidden by X-Frame-Options.`

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:17:55.760

对不起，我解决了，我没有更改源，而是加载了一个新的 IFrame：

```
 $('.document-slider-item').click(
    function(event){
       event.preventDefault();
       var url = 'http://docs.google.com/viewer?url=';
       url += $(this).attr('href');
       url += '&amp;embedded=true';
       var iframe = '<iframe src="'+url+'" width="620" height="780" style="border: none;" id="document-preview"></iframe>';
       $('#document-viewer').html(iframe);
    }); 
```

# html - 有人用过索引数据库吗？

> ID：11649327
> 
> 赞同：0
> 
> 时间：2012-07-25T12:07:56.410
> 
> 标签：html, offline-caching, indexeddb, offline-browsing

由于 websql 已贬值，所以我正在研究 IndexedDB 的浏览器离线存储设施，但我发现 indexedDB 在 HTML5Rocks 中显示的示例之后发生了重大设计变化（http://www.html5rocks.com/en/tutorials/indexeddb/todo /) 而这个(http://www.kristofdegrave.be/2011/10/indexed-db-creating-opening-and.html) 是indexedDB的新教程。代码似乎有点复杂。我想问有没有人用它来离线存储数据？我的要求是即使没有互联网连接，我正在开发的应用程序也应该可以工作，并且当互联网连接可用时，所有数据都将同步到远程数据库。是吗可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:12:27.110

是的，您可以使用 indexedDB 来维护离线数据副本。但是在 indexedDB 上设置了特定于浏览器的大小限制。例如，Firefox 有 50MB，而 IE 有 10MB。使用超过此数量需要用户同意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:55:32.163

目前 indexDB 仅支持 FF 和 chrome。你没有浏览器兼容性问题吗？

# css - Razor + Html.Raw() 带空格？

> ID：11649332
> 
> 赞同：2
> 
> 时间：2012-07-25T12:08:09.250
> 
> 标签：css, razor

为什么以下工作：

```
@if(Page.SomeVar == "VALUE"){
    @Html.Raw(".classStyle{border:1px solid #000} #idStyle{border:1px solid #000}")
} 
```

然而，这打破了：

```
@if(Page.SomeVar == "VALUE"){
    @Html.Raw("
       .classStyle{border:1px solid #000}
       #idStyle{border:1px solid #000}
    ")
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:13:27.783

这与 C# 中的 Razor 无关，`@`如果您想拥有[多行](http://jameskovacs.com/2007/02/12/multiline-strings-in-c/) [字符串文字，则需要使用](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.71%29.aspx)

```
@if(Page.SomeVar == "VALUE"){
    @Html.Raw(@"
       .classStyle{border:1px solid #000}
       #idStyle{border:1px solid #000}
    ")
} 
```

# python - 并行进程

> ID：11649334
> 
> 赞同：0
> 
> 时间：2012-07-25T12:08:19.977
> 
> 标签：python, python-2.7

我很想知道是否可以运行一个将函数调用为并行子进程的 python 脚本。我不确定我是否正确使用了这些术语，所以这里有一个概念脚本，它由一个 bash 脚本构成，它可以完成我所说的。

```
import Zfunctions as Z
reload(Z)

def Parallel():
    statements
    calls to other functions in a general function file Z

#--------------
if '__name__' == '__main__':
    # Running this script in a linux cluster with 8 processing node available
    Parallel() &  #1st process sent to 1st processing node
    Parallell() & #2nd process sent to 2nd node
    .
    .
    .
    Parallell() & #8th process sent to 8th node
    wait 
```

现在我知道＆符号（&）和“等待”在这里是错误的，但在 bash 中，这是将进程发送到后台并等待这些进程完成的方式。我现在的问题是，希望更清楚：这可以在 python 中完成，如果可以，怎么做？

任何帮助表示赞赏。

/米

我得到了一些很好的帮助。我在上面的问题中测试了这个修改，它尝试运行 60 个作业，这些作业将处理大量数据并将结果写入磁盘。所有这些都在一个 Python 文件中，该文件结合了两个 for 循环和一系列内部函数调用。脚本失败，错误输出如下：

```
import multiprocessing

def Parallel(m,w,PROCESSES):                                                             
plist = {}                                                                           
plist['timespan'] = '2007-2008'                                                      
print 'Creating pool with %d processes\n' % PROCESSES                                
pool = multiprocessing.Pool(PROCESSES)                                               
print 'pool = %s' % pool                                                             

TASKS = [(LRCE,(plist,m,w)),(SRCE,(plist,m,w)),(ALBEDO,(plist,m,w)),                 
         (SW,(plist,m,w)),(RR,(plist,m,w)),(OLR,(plist,m,w)),(TRMM,(plist,w)),       
         (IWP,(plist,m,w)),(RH,(plist,'uth',m,w)),(RH,(plist,200,m,w)),              
         (RH,(plist,400,m,w)),(IWC,(plist,200,m,w)),(IWC,(plist,400,m,w)),           
         (CC,(plist,200,m,w)),(CC,(plist,400,m,w))]                                                                                                        

results = [pool.apply_async(calculate,t) for t in TASKS]                             
print 'Ordered results using pool.apply_async():'                                    
for r in results:                                                                    
    print '\t', r.get()                                                              

#-----------------------------------------------------------------------------------     
if __name__ == '__main__':                                                               
PROCESSES = 8                                                                        
for w in np.arange(2):                                                               
    for m in np.arange(2):                                                           
        Parallel(m,w,PROCESSES) 
```

#### 来自集群的错误消息

线程 Thread-3 中的异常：回溯（最后一次调用）：文件“/software/apps/python/2.7.2-smhi1/lib/python2.7/threading.py”，第 552 行，在**bootstrap_inner self.run( ) 文件“/software/apps/python/2.7.2-smhi1/lib/python2.7/threading.py”，第 505 行，运行 self.__target(*self.__args, **self.__kwargs) 文件“/ software/apps/python/2.7.2-smhi1/lib/python2.7/multiprocessing/pool.py"，第 313 行，在 _handle_tasks put(task) PicklingError: Can't pickle : attribute lookup __builtin** .function failed

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:18:35.427

您可能想研究[多处理](http://docs.python.org/library/multiprocessing.html)——您的代码可以按如下方式完成：

```
import multiprocessing

def Parallel(junk):    
    #...snip...

if __name__ == "__main__":
   p = multiprocessing.Pool(8)

   results = p.map(Parallel, range(8)) 
```

一个警告：不要在交互式解释器中尝试这个。

# php - 在 PHP 中有很多结果的 SQL

> ID：11649337
> 
> 赞同：0
> 
> 时间：2012-07-25T12:08:25.127
> 
> 标签：php, mysql

我有一个 SQL，它使用 PHP 将系统的所有用户带回 MySQL 数据库中，我需要获取这些用户并将它们移动到另一个系统（不用担心这些字段，我已经映射了它们）。问题是我在数据库中有超过 67000 个用户。有什么办法可以用 PHP 做到这一点并立即获得所有结果？因为我试过给我一个错误，而不是一个错误，但是 PHP 不能一次返回所有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:17:56.393

您可能已经达到 PHP 的默认内存限制。你有（至少）2个选项：

1.  一次获取它们（就像您现在所做的那样），并增加 PHP 可能在该脚本中使用的内存。您可以在名称“memory_limit”下找到它。 [http://nl3.php.net/manual/en/ini.core.php](http://nl3.php.net/manual/en/ini.core.php) 请注意，您只对当前脚本执行此操作，而不是通过修改 php.ini 在系统范围内执行此操作。
2.  以较小的批次获取您的记录，例如每次 1000 条。这样你就不会达到你的内存限制。

在这两种情况下，您都可能希望增加脚本的运行时间。看看最大执行时间。

[http://nl3.php.net/manual/en/info.configuration.php#ini.max-execution-time](http://nl3.php.net/manual/en/info.configuration.php#ini.max-execution-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:21:41.580

把它放在你的 PHP 脚本之上： ini_set('memory_limit', '512M');

你可以给 php 脚本少于 512MB ofc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:22:02.453

您可以在 SQL 中使用限制

限制 0, 1000

限制 10001, 2000

ETC

# iphone - 如何更改我的 TabbarGroup 颜色更改？

> ID：11649338
> 
> 赞同：0
> 
> 时间：2012-07-25T12:08:26.367
> 
> 标签：iphone, titanium

我想做一个标签栏应用程序。在此应用程序中，我想更改我的标签栏背景颜色更改。我怎样才能做到这一点？（钛）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:30:56.510

这已经被问及回答了。

[自定义标签组 Appcelerator](https://stackoverflow.com/questions/8729140/custom-tabgroup-appcelerator)

[https://gist.github.com/853935](https://gist.github.com/853935)

# c# - C#：创建一个数组，然后批量分配变量

> ID：11649340
> 
> 赞同：5
> 
> 时间：2012-07-25T12:08:37.357
> 
> 标签：c#, arrays

是否可以做类似的事情

```
 byte[] byteArray = new byte[100]
    byteArray = {0x00, 0x01, 0x02, 0x03, ... , 0x10} 
```

然后设置其余的变量？
我宁愿避免使用：

```
 byteArray[0] = 0x00;
    byteArray[1] = 0x01; 
```

等等

抱歉，我应该更清楚地说明我想一次设置一半的值，然后再填写其余的值。我会带着一份清单去

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:14:22.703

如果您的意思是您可以创建一个包含 100 个项目的数组并将其中的 5 个设置为内联，例如：

```
int[] i = new int[100] { 1, 2, 3, 4, 5 }; 
```

然后不，你会得到一个编译器错误：

> > 需要一个长度为“100”的数组初始值设定项。

但是，您可以对所有项目进行内联初始化：

```
int[] i = new int[] { 1, 2, 3, 4, 5 }; 
```

或者更简洁（编译器可以将其推断为`int[]`）：

```
var i = new[] { 1, 2, 3, 4, 5 }; 
```

一个中途的房子是使用一个列表，它可以在以后增长：

```
var i = new List<int> { 1, 2, 3, 4, 5 };
i.Add(6); // etc 
```

然后您可以根据需要将其更改为数组：

```
var iArray = i.ToArray(); 
```

有很多替代品，但由于不知道这些值的来源，我很犹豫是否继续列出它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:10:18.500

是的，您可以使用数组初始化语法。

```
byte[] byteArray = new byte[] { 0x00, 0x01, 0x02, 0x03, ... , 0x10}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:23:25.103

我认为您正在寻找的东西是可变的，所以我会推荐以下内容。

```
List<byte> byteArray = new List<byte>() { initialize what you want here };
...
...
byteArray[*n*] = *value*
...
...
byteArray.Add(*value*); 
```

这要灵活得多。有了字节列表，只要索引存在，您就可以随时添加并使用索引器进行设置。此外，您可以使用以下代码行将该列表设为数组。

```
byteArray.ToArray(); 
```

那返回`byte[*length of list*]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T12:15:40.757

以编程方式输入所有 100 个条目时，性能最高。如果您想避免全部输入，可以循环执行：

```
byte[] byteArray = new byte[100];   
byte currentByte = 0x00;
for (int i = 0; i < byteArray.Length; i++)
    byteArray[i] = currentByte++; 
```

除非您有可变大小或 256 字节的条目，否则我建议通过将其放在数组初始化语法中来执行其他人在上面发布的内容。如果您确实有*很多*条目，您可以编写一个快速脚本来*生成*C# 初始化代码：

```
byte[] byteArray = new byte[256];
byte currentByte = 0x00;
for (int i = 0; i < byteArray.Length; i++)
    byteArray[i] = currentByte++;

Console.Write(String.Format("byte[] byteArray = new byte[{0}] {{", byteArray.Length));
Console.Write(String.Join(", ", byteArray));
Console.Write("};"); 
```

然后，您可以将该控制台结果复制/粘贴到您的 C# 代码文件中。

编辑：我觉得自己像个傻瓜。当然，对于大于 256 的长度，这完全是*不必要*和*危险*`currentByte`的，因为它只是回滚到 0，因为它是一个*byte*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:21:34.607

如果您首先知道要初始化多少项，则可以创建一个 Dictionary 初始化程序。例子：

```
Dictionary<int,byte> initializer = new Dictionary<int,byte> { {0, 0x01}, {3, 0x04}, {7, 0xFF} .. }; 
```

然后用简单的循环预初始化你的空数组：

```
byte[] byteArray = new byte[100];

foreach (int key in initializer.Keys)
  byteArray[key] = initializer[key]; 
```

# java - 如何检查 Hashmap 的第一个元素？

> ID：11649343
> 
> 赞同：1
> 
> 时间：2012-07-25T12:08:46.000
> 
> 标签：java, hashmap

```
 if(callingflag)
            {
                int calledUserTp = totalPointsByUserid(callinguserid,jokercard);
                System.out.println("Total Points of the User Who has made a Call is ::"+calledUserTp);

            HashMap<Integer,Integer> useridTotalRankMap = totalPointsforEveryUser(jokercard);
            HashMap<Integer,Integer> useridTotalRankMapSorted = new HashMap<Integer, Integer>();
            useridTotalRankMapSorted = (HashMap<Integer, Integer>) sortByComparator(useridTotalRankMap);
            for(Map.Entry<Integer, Integer> entry :useridTotalRankMapSorted.entrySet())
            {
                System.out.println( entry.getKey() +"----"+entry.getValue());
                if(entry.getKey() == callinguserid )
                {
                    System.out.println( "GOOD CALL");
                    break;
                }

            }
    } 
```

如何避免上面提到的 for 循环。useridTotalRankMapSorted 是一个地图

我有这个名为 useridTotalRankMap 的哈希图，它将有一些总点数的用户 ID。

如果没有关系，我想检查与 calleruserid 对应的值是否是该哈希图中的最小值。

说有

```
1:4
4:7
3:7
2:5 
```

和 calleruserid = 1 。如果 key=1 的值即 4 是最小值，我会打印“good call”。

希望我现在很清楚。

我编码的方式有什么变化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:10:06.700

HashMap 未排序。它没有*第一个*元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:10:57.220

用于`useridTotalRankMapSorted.entrySet().iterator().next()`访问第一项。最好确保您**确实**使用的是排序地图！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T12:12:14.017

您可以使用 sorted `Map`s like`TreeMap`来完成，而获取第一个元素的最简单方法是使用迭代器（如果您想保留插入顺序`LinkedHashMap`）：

```
Map m = new TreeMap(); // get it from somewhere else otherwise it doesn't make sense
Set s = m.entrySet();
Iterator i = s.iterator();
if (i.hasNext()) {
    Object firstElement = i.next();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T12:10:10.777

[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)s 不保证顺序。

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

*来自[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)*

* * *

要维护插入顺序，您应该使用[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html).

> Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。

*来自[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)*

* * *

要维护*排序*顺序（自然排序顺序，或由 a 定义[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)），您应该使用任何实现[`SortedMap`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html).

> 进一步提供对其键的总排序的 Map。地图是根据其键的自然顺序排序的，或者由通常在排序地图创建时提供的比较器排序。迭代排序地图的集合视图时会反映此顺序

*来自[http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:14:14.503

您需要创建一个`LinkedHashMap`来获取第一个插入的元素

然后->

```
useridTotalRankMapSorted.entrySet().iterator().next().getKey()
useridTotalRankMapSorted.entrySet().iterator().next().getValue() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T12:14:31.227

**1.** `HashMap`是一个不**实现****接口的****类**。 **`Sorted Map`**

 ******2.**`TreeMap`如果**要按顺序获取数据，**请使用。

 ****3.**如果`LinkedHashMap`您希望节点相互链接，然后获取第一个元素，请使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T12:17:26.217

首先，正如其他人所说，HashMap 没有排序。

其次，由于 Map 中的键是唯一的（不能将键映射到多个值）。

为什么不直接从地图 ( `map.get(callinguserId)`) 中获取，通过迭代条目获得了什么？

无论如何，如果只是一次。******

# asp.net - 如果企业应用程序没有遵循正确的设计会发生什么

> ID：11649347
> 
> 赞同：1
> 
> 时间：2012-07-25T12:09:04.133
> 
> 标签：asp.net, architecture

我已经外包给另一个组织的 ASP.Net 项目来构建大型企业应用程序。目前已经完成了近80%的工作。我发现开发人员没有在这个应用程序中实现任何架构。所有工作都在代码隐藏文件 (*.aspx.cs) 中完成。甚至数据库调用、sql 脚本等都在代码隐藏文件中。整个解决方案只有一个项目，即网站。所有的编码、.aspx 文件等都在它之下。我知道这个项目的可维护性、满足变更请求等将是一场噩梦。

但是我想知道一旦用户数量从数百增加到数千甚至更多，对这个项目的功能的影响。

如果没有数据访问层并在一个地方维护数据库连接，这会是一个问题吗？

由于没有实施适当的系统架构，项目的整体功能会产生什么影响？

我需要一些硬点来说服他们选择一个合适的系统架构，这可能是一个整个系统的重写。因此，如果您能够分享您在这件事上的专业知识，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:16:29.353

只有两种软件，可以工作的软件和不能工作的软件。客户/用户不关心幕后发生的事情。

维护软件是一个真正令人担忧的原因，但是您可以拥有可维护的意大利面条代码，但在企业中这种可能性很小。

适当的架构特定于您的软件解决方案，涉及可维护性、可扩展性和可扩展性的目标。架构目标中存在经常冲突的权衡取舍。

没有单一的答案，只有解决常见问题的模式。

[Microsoft 应用程序架构指南，第 2 版](http://msdn.microsoft.com/en-us/library/ff650706.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:30:22.883

即使，这是一个非常广泛的问题……</p>

我认为在应用程序开发中使用一种架构是有众所周知的原因的。

基本上使用架构会降低应用程序的复杂性。这可以通过使用以下最佳实践、设计模式来完成，这给我们带来了灵活性和高可用性。

既然您提到代码是在文件后面的代码中完成的，我们可以保证它违反了关键设计原则之一，例如***关注点分离***和***DRY***（不要重复自己）。这只是一个因素。可以有很多。

我认为如果你能阅读这篇关于[软件架构和设计](http://msdn.microsoft.com/en-us/library/ee658093)的文章，你可能会获得一个好主意 。另外一篇关于[激励软件架构的好文章](http://www.bredemeyer.com/why.htm)

# android - 添加 View.onClickListener 时带有主题对话框的自定义 AlertDialog 崩溃

> ID：11649351
> 
> 赞同：0
> 
> 时间：2012-07-25T12:09:21.053
> 
> 标签：android, button, android-alertdialog, onclicklistener

我正在使用带有 Theme.Dialog 的 Activity 来执行 AlertDialog，因为我试图在 BroadcastReceiver 中使用此对话框，但是当我添加 OnClickListener 时，应用程序每次启动时都会崩溃。

代码：

```
package nyp.android.project;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class PasswordDialog extends Activity {

    private static final String TAG = "Logging Activity";
    //Context context;   
    Button login;
    EditText inputPassword;

    private static final int MY_PASSWORD_DIALOG_ID = 0;

    protected void onCreate(Bundle savedInstanceState) 
    {
        //this.context = context;
        super.onCreate(savedInstanceState);
        setContentView (R.layout.password_dialog);

        //SharedPreferences passwdfile = context.getSharedPreferences(    
        //        PhoneFinder.PASSWORD_PREF_KEY, 0); 

        //String correctSHA1 = passwdfile.getString(PhoneFinder.PASSWORD_PREF_KEY, null);

        login = (Button) findViewById(R.id.loginPassword);
        inputPassword = (EditText) findViewById(R.id.btnLogin);

        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
              Toast.makeText(PasswordDialog.this, "Hello World!", Toast.LENGTH_LONG).show();
            }
        });
        }

    } 
```

日志猫：

```
07-25 12:27:30.354: D/AndroidRuntime(570): Shutting down VM
07-25 12:27:30.354: W/dalvikvm(570): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-25 12:27:30.364: E/AndroidRuntime(570): FATAL EXCEPTION: main
07-25 12:27:30.364: E/AndroidRuntime(570): java.lang.RuntimeException: Unable to start activity ComponentInfo{nyp.android.project/nyp.android.project.PasswordDialog}: java.lang.ClassCastException: android.widget.EditText
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.os.Looper.loop(Looper.java:123)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 12:27:30.364: E/AndroidRuntime(570):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 12:27:30.364: E/AndroidRuntime(570):  at java.lang.reflect.Method.invoke(Method.java:521)
07-25 12:27:30.364: E/AndroidRuntime(570):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 12:27:30.364: E/AndroidRuntime(570):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 12:27:30.364: E/AndroidRuntime(570):  at dalvik.system.NativeStart.main(Native Method)
07-25 12:27:30.364: E/AndroidRuntime(570): Caused by: java.lang.ClassCastException: android.widget.EditText
07-25 12:27:30.364: E/AndroidRuntime(570):  at nyp.android.project.PasswordDialog.onCreate(PasswordDialog.java:38)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-25 12:27:30.364: E/AndroidRuntime(570):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-25 12:27:30.364: E/AndroidRuntime(570):  ... 11 more 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="10dip" >

        <!--  Password Label -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dip"
            android:text="Password" />
        <!--  Password TextField -->

        <EditText
            android:id="@+id/loginPassword"
            android:layout_width="260dp"
            android:layout_height="wrap_content"
            android:password="true" />

        <!--  Login Button -->        
        <Button
            android:id="@+id/btnLogin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dip"
            android:text="Login" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:23:31.597

```
java.lang.ClassCastException: android.widget.EditText 
```

请参阅上面的错误行，**您尝试引用 EditText ，而不是 Button ...**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:30:51.643

无法从 BroadcastReceiver 类生成 AlertDialog，请参阅

[这个](https://stackoverflow.com/questions/4844031/alertdialog-from-within-broadcastreceiver-can-it-be-done)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:18:50.767

这是因为您将`EditText`' id 标识为`Button`' id。所以试着像下面那样做 -

```
login = (Button) findViewById(R.id.btnLogin);
inputPassword = (EditText) findViewById(R.id.loginPassword); 
```

这正是错误出现的地方。

# c# - 按字母顺序对字符串数组进行排序，忽略数字和符号

> ID：11649353
> 
> 赞同：4
> 
> 时间：2012-07-25T12:09:22.913
> 
> 标签：c#, string, sorting

我正在尝试仅按字母对包含数字的字符串数组进行排序，例如：

`Original array = {"09Bananas", "Pears2", "Mangoes39Bad", "100Apples", "Mangoes38Good"}`

应该变成：

`Sorted array = {"100Apples", "09Bananas", "Mangoes39Bad", "Mangoes38Good", "Pears2"}`

但是，当我尝试使用`Array.sort(original)`它时会出现这样的结果：

`{"09Bananas", "100Apples", "Mangoes38Good", "Mangoes39Bad", "Pears2"}`

是否有过载`Array.sort`会使其忽略数字？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:13:13.100

使用[`Array.Sort<T>(T[],IComparer<T>)`](http://msdn.microsoft.com/en-us/library/bzw8611x.aspx)重载，并在比较字符串之前跳过数字。

```
var array = new[] {
    "09Bananas", "Pears2", "Mangoes39Bad", "100Apples", "Mangoes38Good"
};
Array.Sort(array, (a,b) => {
    a = new string(a.Where(char.IsLetter).ToArray());
    b = new string(b.Where(char.IsLetter).ToArray());
    return a.CompareTo(b);
});
Console.WriteLine(string.Join(", ", array)); 
```

LINQ 表达式`a.Where(char.IsLetter).ToArray()`将字符串转换为单个字母的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:19:04.450

您可以编写一个返回不带数字的字符串的方法，并将其用于[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)：

```
private string TextOnly(String input)
{
    StringBuilder sb = new StringBuilder();
    foreach (Char c in input)
        if (!Char.IsDigit(c))
            sb.Append(c);

    return sb.ToString();
} 
```

用它：

```
var original = new[] { "09Bananas", "Pears2", "Mangoes39Bad", "100Apples", "Mangoes38Good" };
var ordered = original.OrderBy(s => TextOnly(s));
// if you need it as: String[] orderedArray = ordered.ToArray(); 
```

要改为订购原始数组，您可以使用[`Array<T>.Sort`](http://msdn.microsoft.com/en-us/library/cxt053xf.aspx)@dasblinkenlight 提到的：

```
Array.Sort<String>(original, (s1, s2) => TextOnly(s1).CompareTo(TextOnly(s2))); 
```

# c# - 尝试从 PDF 创建 Tif。形象变差

> ID：11649361
> 
> 赞同：0
> 
> 时间：2012-07-25T12:09:42.497
> 
> 标签：c#, pdf, image-processing, itextsharp, tiff

我正在尝试使用 Itextsharp 和 Bitmiracle 从 pdf 文件创建 tif 图像。

首先，我尝试使用 iTextsharp 获取 pdf 文件每一页的字节详细信息。

```
string bpp = pd.Get(PdfName.BITSPERCOMPONENT).ToString();
PixelFormat pixelFormat;
switch (bpp)
{
    case "1":
        pixelFormat = PixelFormat.Format1bppIndexed;
        break;
    case "8":
        pixelFormat = PixelFormat.Format24bppRgb;
        break;
    default:
        throw new Exception(String.Format("Unknown pixel format {0}.", bpp));
} 
```

之后使用 bitmiracle 我将该图像保存为 tiff 格式。但是图像是不可见的。

```
string filter = PDFStremObj.Get(PdfName.FILTER).ToString();
switch (filter)
{
    case "/FlateDecode":

    byte[] arr = PdfReader.GetStreamBytes((PRStream)PDFStremObj);

    Bitmap bmp = new Bitmap(Int32.Parse(width), Int32.Parse(height), PixelFormat.Format24bppRgb);
    BitmapData bmd = bmp.LockBits(new System.Drawing.Rectangle(0, 0, Int32.Parse(width), Int32.Parse(height)), ImageLockMode.WriteOnly,
            PixelFormat.Format24bppRgb);
    Marshal.Copy(arr, 0, bmd.Scan0, arr.Length);
    bmp.UnlockBits(bmd);
    bmp.Save(strFileNewName, System.Drawing.Imaging.ImageFormat.Tiff);
    bmp.Dispose();
    page++;
    break;
} 
```

请帮助我解决代码中的问题或建议我进行更改。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:18:40.553

你可以参考下面的链接。

[http://www.codeproject.com/Articles/37458/PDF-Viewer-Control-Without-Acrobat-Reader-Installe](http://www.codeproject.com/Articles/37458/PDF-Viewer-Control-Without-Acrobat-Reader-Installe)

从那里可以选择将 pdf 转换为 tiff 文件或其他文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:27:35.227

我认为不能只将数组复制到位图数据。步幅可能不同，位深度可能不同，字节顺序可能不同等等。Lajja Thaker 发布了其中一种方法。另请注意，在 Windows XP 下，不支持某些彩色 tiff。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:11:26.940

Bitmiracle 不是库，[它是软件公司的名称，](http://bitmiracle.com/)您尝试使用的是 libtiff 吗？也许您可以联系 Bitmiracle 以获取有关您正在处理的任务的支持。

您不能仅通过从中提取二进制数据并将其转储到位图对象中来从 PDF 中创建 tiff 图像。这就像试图通过挤压苹果来制作橙汁。

如果要将 PDF 文件转换为 TIFF 图像，我建议您使用允许您呈现 PDF 文件的库。搜索[使用 C# 将 PDF 转换为图像以](https://stackoverflow.com/search?q=PDF+Image++C%23&submit=search)获取更多详细信息。

如果您只想从 PDF 文件中提取已压缩为 TIFF 的图像，那么您确实可以[提取二进制数据](http://itextpdf.com/examples/iia.php?id=284)并将其保存在其他地方。

# android - Android - 在活动中的选项卡之间切换，获取选项卡的索引

> ID：11649362
> 
> 赞同：0
> 
> 时间：2012-07-25T12:09:52.317
> 
> 标签：android, android-tabhost

我正在尝试在 tabHost 中进行活动。我希望能够在活动 A 中按下一个按钮，即在选项卡 tA 中，然后转到选项卡 tB。我找到了这个解决方案： [Android - Switch Tabs from within an Activity within a tab](https://stackoverflow.com/questions/2541802/android-switch-tabs-from-within-an-activity-within-a-tab)

但我不知道如何找到“indexOfTabToSwitch”我如何获得这个索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:37:36.267

您将不得不提供索引。如果你想去 tB 并且它在第二个位置.. 你将使用 indexOfTabToSwitch(1);

# jquery - jQuery Chosen 填充时不显示数据占位符

> ID：11649375
> 
> 赞同：9
> 
> 时间：2012-07-25T12:10:21.937
> 
> 标签：jquery, asp.net-mvc, jquery-chosen

我在我的 ASP.NET MVC 应用程序中使用 jQuery Chosen 插件。当下拉列表中有项目时，该`data-placeholder`属性不起作用。它不显示默认文本，而是自动选择列表中的第一项。

这就是我定义我的下拉列表的方式。

```
@Html.DropDownListFor(m => m.Keep, Model.Data, 
     new { @class = "chzn-select", data_placeholder = "Default..." }) 
```

如果 Model.Data 为空（使用 EF 填充到视图模型中），则显示默认文本。否则，选择第一项。我总是希望我的下拉列表显示默认值。

`$('.chzn-select').chosen();`我通过没什么特别的应用插件。

有任何想法吗 ？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T12:32:01.643

您需要先添加一个空选项。

根据文档 - [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

> 注意：在单选时，假定第一个元素被浏览器选中。要利用默认文本支持，您需要包含一个空白选项作为选择列表的第一个元素。

也许使用jQuery来添加它

```
$(".chzn-select").prepend("<option></option>"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T05:52:20.407

```
@Html.DropDownListFor(model => model.categoryModel.Id, ViewBag.CategoryList as SelectList, "", new { @class = "chzn_a", data_placeholder = "Choose Category.." }) 
```

如果下面的代码对您不起作用，请在您的 SelectList 之后添加“”

```
$(".chzn_a").prepend("<option></option>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T16:04:01.293

我有同样的问题，我做了以下事情：

当您初始化所选字段时，您必须不使用宽度大小的 % 。

```
$(".chosen").chosen({
'no_results_text' :'Oops, nothing found!',
'width'           :'700px',
'search_contains' : true,
'placeholder_text_multiple':'Please choose something ...',
'display_selected_options':false 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:52:04.957

因为您的默认值被列表中的值替换。因此，要显示您的默认值，请将该默认值作为第一项添加到您的列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T05:40:34.263

检查是否有记录绑定到列表中的第一个元素和您的模型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T12:01:57.460

默认文本支持

Chosen 通过读取选择元素的数据占位符值自动设置默认字段文本（“选择一个国家...”）。如果不存在数据占位符值，它将默认为“选择一个选项”或“选择一些选项”，具体取决于选择是单个还是多个。您可以根据需要在插件 js 文件中更改这些元素。

**注意：在单选时，假定第一个元素被浏览器选中。要利用默认文本支持，您需要包含一个空白选项作为选择列表的第一个元素。** 请参阅：[默认文本支持](http://harvesthq.github.io/chosen/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-17T11:55:41.327

如果您的代码即使添加了空白`option`，也不起作用；那么您应该知道，有时浏览器需要新页面加载代码并生效！

所以**关闭您的标签**并打开新标签并转到您的项目页面以查看更改！

# c# - TableAdapter 做 Pentium Math

> ID：11649377
> 
> 赞同：2
> 
> 时间：2012-07-25T12:10:27.583
> 
> 标签：c#, asp.net, sql-server

我有一个项目，用户可以在文本框中输入小数。现在我获取该值并尝试将其解析为一个可为空的浮点变量，我将其传递给 tableAdapter 以插入或更新数据库。

现在这是它变得奇怪的地方，如果我给它一个 0.24 的值，这就是传递给 tableAdapter 的值，但是，当我查看保存到数据库的内容时，它被转换为 0.239999994635582。

我将它调试到 TableAdapter 的插入调用，它被传递了一个 0.24 的值。我的 SQL Server 数据库列具有浮点类型。

关于为什么会发生这种情况的任何想法？我需要切换到十进制吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:13:12.913

解决方案是浮点数的 2 表示的内部幂。

一些小数值不能很好地表示。

在此处阅读更多信息：[IEEE 754 浮点数](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

切换到十进制在这里会起作用，但也会对性能产生影响。（比 float 慢 10 倍，但你可能永远不会注意到它）

# ios - 当应用程序在后台运行时无法处理推送通知，接收推送但未点击横幅或警报

> ID：11649378
> 
> 赞同：1
> 
> 时间：2012-07-25T12:10:28.283
> 
> 标签：ios, notifications, push

我已经在我的应用程序中实现了推送通知。我已经在我的 iPod 中测试了推送消息。结果如下：

场景测试： 1\. 应用程序在前端运行，iPod 未锁定 - [状态 = 没有问题]

1.  应用程序在前端运行，iPod 锁定 - [状态 = 没问题]

2.  应用程序在后台运行，iPod 未锁定 - [status = FOUND PROBLEM] 未保存在数据库中 + 没有警报（实际上没有得到任何事件处理程序）

3.  应用程序在后台运行，iPod 锁定 - 如果我立即打开应用程序，状态 = 没问题，但如果我等待 2 分钟，然后打开我的应用程序，我没有收到消息！

4.  应用程序未运行（不在后台+前端），iPod未锁定-（发现问题）未保存在数据库中+没有警报{我可以看到推送消息作为警报，但我没有点击它，然后是我的应用程序包含一个徽章图标，但如果我点击我的应用程序，我不会收到任何关于我的推送消息的信息}

5.  应用程序未运行（不在后台 + 前端），iPod 锁定 - 如果我立即解锁手机没问题，但如果我等待 2 分钟，我会丢失消息！

## -------------------------------------------------- --------------------------------------

如果我总结我的问题：我正在收到所有场景的推送通知，但如果我不点击警报/横幅，我将无法处理某些场景的通知！我想在所有场景中将消息保存在我的本地数据库中以用于特殊目的。

我在 stackoverflow 和其他网站上也看到了很多链接，但我没有看到有人已经面临过的相同场景！

我的 iPods iOS 版本是：5.0

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:42:41.117

我不确定如何更好地表达它，但是：它应该是这样工作的。

您不能依赖推送通知作为*唯一*的通信机制。当您的应用程序启动时，您需要有一种方法可以从您的 Web 服务中查询当前状态。

通知负载中的数据可用作快捷方式或优化，但*不能替代*刷新机制。

# c# - Nancy 模型绑定到子类

> ID：11649385
> 
> 赞同：8
> 
> 时间：2012-07-25T12:10:56.720
> 
> 标签：c#, model-binding, nancy

我们遇到了 Nancy 的默认模型绑定器的问题。鉴于以下...

```
public class Foo
{
    public Foo()
    {
    }

    public string Name { get; set; }

    public Bar Bar { get; set; }
}

public class Bar
{
    public string Name { get; set; }
} 
```

与...等元素

```
<input type="text" value="Name" />
<input type="text" value="Bar.Name" /> 
```

像这样使用默认模型绑定器..

`var foo = this.Bind<Foo>();`

这正确绑定 Foo.Name 但无法绑定 Foo.Bar.Name

有没有办法使用默认绑定器启用这种绑定，还是我们需要自己滚动？如果有，有什么好的例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T12:37:47.370

为什么不试试这个。我相当确定可以优化递归，并且在它不起作用的地方会出现一些问题，并且它可以放在比 IModelBinder 更聪明的地方，但它基本上可以满足您的需求。

```
/// <summary>
/// Sample model binder that manually binds customer models
/// </summary>
public class CustomModelBinder : IModelBinder
{
    /// <summary>
    /// Bind to the given model type
    /// </summary>
    /// <param name="context">Current context</param>
    /// <param name="modelType">Model type to bind to</param>
    /// <param name="blackList">Blacklisted property names</param>
    /// <returns>Bound model</returns>
    public object Bind(NancyContext context, Type modelType, params string[] blackList)
    {
        var parentObject = Activator.CreateInstance(modelType);

        foreach (var key in context.Request.Form)
        {
            var value = context.Request.Form[key];
            this.SetObjectValue(parentObject, modelType, key, value);
        }

        return parentObject;
    }

    /// <summary>
    /// Sets the object value.
    /// </summary>
    /// <param name="instance">The instance.</param>
    /// <param name="type">The type.</param>
    /// <param name="key">Name of the property.</param>
    /// <param name="propertyValue">The property value.</param>
    private void SetObjectValue(object instance, Type type, string key, string propertyValue)
    {
        if (key.Contains("."))
        {
            this.SetObjectValueDeep(instance, type, key, propertyValue);
        }

        PropertyInfo propertyInfo = type.GetProperty(key);
        if (propertyInfo == null)
        {
            return;
        }

        propertyInfo.SetValue(instance, Convert.ChangeType(propertyValue, propertyInfo.PropertyType), null);
    }

    /// <summary>
    /// Sets the object value derp.
    /// </summary>
    /// <param name="instance">The instance.</param>
    /// <param name="type">The type.</param>
    /// <param name="key">The key.</param>
    /// <param name="propertyValue">The property value.</param>
    private void SetObjectValueDeep(object instance, Type type, string key, string propertyValue)
    {
        var propList = key.Split('.').ToList();

        PropertyInfo propertyInfo = type.GetProperty(propList.First());
        if (propertyInfo == null)
        {
            return;
        }

        var childObject = propertyInfo.GetValue(instance, null);

        if (childObject == null)
        {
            childObject = Activator.CreateInstance(propertyInfo.PropertyType);
            propertyInfo.SetValue(instance, childObject, null);
        }

        propList.RemoveAt(0);

        var newKey = propList.Aggregate(string.Empty, (current, prop) => current + (prop + ".")).TrimEnd('.');

        if (newKey.Contains("."))
        {
            this.SetObjectValueDeep(childObject, childObject.GetType(), newKey, propertyValue);
        }
        else
        {
            this.SetObjectValue(childObject, childObject.GetType(), newKey, propertyValue);
        }
    }

    /// <summary>
    /// Determines whether this instance can bind the specified model type.
    /// </summary>
    /// <param name="modelType">Type of the model.</param>
    /// <returns>
    ///   <c>true</c> if this instance can bind the specified model type; otherwise, <c>false</c>.
    /// </returns>
    public bool CanBind(Type modelType)
    {
        return true;
    }
} 
```

# c# - 在 MVC3 中定义自定义路由

> ID：11649387
> 
> 赞同：-1
> 
> 时间：2012-07-25T12:11:01.827
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

我有一个 MVC3 应用程序，我想在其中修改路由，如下所示：

```
public class DealsController : Controller
{
    public ActionResult View()
    {
        return View();
    }

    [Authorize]
    [HttpPost]
    public ActionResult Add(DealViewModel newDeal)
    {
        // Code to add the deal to the db
    }
} 
```

我想做的是当用户请求**www.domain.com/deals/view**时，我想将 url 重写为**www.doamin.com/unsecure/deals/view**。因此，任何没有 Authorize 属性的路由都需要通过添加单词 unsecure 来修改。

**注意：**我的应用程序中有几个控制器，因此我正在寻找一种可以以通用方式处理此问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:29:53.227

使用 2 个独立的控制器：

```
public class UnsecureDealsController : Controller
{
    public ActionResult View()
    {
        return View();
    }
}

public class SecureDealsController : Controller
{
    [HttpPost]
    [Authorize]
    public ActionResult Add(DealViewModel newDeal)
    {
        // Code to add the deal to the db
    }

    public ActionResult View()
    {
        return RedirectToAction("View", "UnsecureDeals");
    }
} 
```

然后像这样路由：

```
routes.MapRoute(null, 
    "unsecure/deals/{action}/{id}",
    new
    {
        controller = "UnsecureDeals",
        action = "Index", 
        id = UrlParameter.Optional
    }); 

routes.MapRoute(null, 
    "deals/{action}/{id}",
    new
    {
        controller = "SecureDeals",
        action = "Index", 
        id = UrlParameter.Optional
    });

// the other routes come BEFORE the default route
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:20:09.863

如果允许从此类 url 执行控制器，则映射到到一个 DealsController 的路由并使用 RedirectToAction。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:21:21.577

请为此使用 RedirectToAction

例子 ：

```
return RedirectToAction( new RouteValueDictionary( 
    new { controller = "unsecure/deals", action = "view" } ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:27:22.090

如果您想要自定义路线，请执行以下操作：

```
routes.MapRoute(
            "unsecure", // Route name
            "unsecure/{controller}/{action}/{id}"
        ); 
```

请务必在默认地图**之前添加它**

那应该工作。我没有测试它。

# java - Java reg-ex 替换双引号内的双引号

> ID：11649389
> 
> 赞同：1
> 
> 时间：2012-07-25T12:11:15.717
> 
> 标签：java, regex, double, str-replace

输入字符串是：`"outer string "inside a quote" "`
输出应该是：`"outer string inside a quote "`

请建议任何正则表达式来查找内部双引号并使用 Java 替换为空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:38:23.920

您可以通过这种方式尝试，无需正则表达式，只需**一次迭代**：

```
/*
 * I assume that if after quote ther is character like "a then it is
 * beggining of cite. Rest quotes are closing ones.
 */
public static String removeInnerQuotes(String data) {

    StringBuilder sb = new StringBuilder();
    int quoteCounter = 0;
    char[] array = data.toCharArray();
    for (int i = 0; i < array.length; i++) {
        if (array[i] == '"') {
            if (i + 1 < array.length
                    && (
                            (array[i + 1] >= 'a' && array[i + 1] <= 'z') 
                        || 
                            (array[i + 1] >= 'A' && array[i + 1] <= 'Z')
                        )
                ){
                quoteCounter++;
                if (quoteCounter == 1)
                    sb.append('"');
            }
            else{
                quoteCounter--;
                if (quoteCounter == 0)
                    sb.append('"');
            }

        } else
            sb.append(array[i]);
    }
    return sb.toString();
}

public static void main(String[] args) {
    String data = "\"outer string \"inside a quote\" abc\" something outside quote, and again \"outer string \"inside a quote\" def \"";
    System.out.println(removeInnerQuotes(data));
} 
```

输出：

`"outer string inside a quote abc" something outside quote, and again "outer string inside a quote def "`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:09:34.550

假设只有一层嵌套，外引号内只有一个内引号，以下应该有效：

```
str.replaceAll("\"(\\b[^\"]+)?\"\\b([^\"]+)\\b\"([^\"]+\\b)?\"","\"$1$2$3\""); 
```

它试图通过单词边界检测开引号和闭引号。要允许外引号和内引号之间有空格（而不是单词），甚至内引号中没有空格，请使用以下命令：

```
str.replaceAll("\"(\\b[^\"]+|\\s+)?\"(\\b[^\"]+\\b)?\"([^\"]+\\b|\\s+)?\"","\"$1$2$3\""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:25:51.383

我认为对于这种情况，一个正则表达式解决方案（如果可用）*可能*会稍微复杂一些以保持可维护性。

你可以做的是有这样的事情：

```
String str = "outer string "inside a quote" ";
String newStr = "\"" + str.replaceAll("\"","") + "\"; 
```

上面的代码将删除所有引号并在字符串的开头和结尾添加一个。

编辑：

我想出了这个，它有点令人费解，但它似乎确实有效：

```
String str = "sdsadsaasdasdsadas\"sadsad\"the is sparta\"asdsadsa\"sdassa";
String newStr = str.replaceAll("(\".*?)\"(.*?)\"(.*?\")", "$1$2$3");
System.out.println(newStr); 
```

它产生：

`sdsadsaasdasdsadas"sadsadthe is spartaasdsadsa"sdassa`

上面的正则表达式基本上将文本分成 3 个部分，第一组引号之前的部分，内部引号之间的集合和内部引号之后的部分。然后它重建字符串。

编辑：

我使用此代码从文件中读取字符串（注意本例中的字符串是 1 行）

```
Scanner input = new Scanner(new File(filePath));
StringBuilder sb = new StringBuilder();
while (input.hasNextLine())
{
    sb.append(input.nextLine().trim()).append(" ");
}
input.close();
String str = sb.toString().trim();
String newStr = str.replaceAll("(\".*?)\"(.*?)\"(.*?\")", "$1$2$3");
System.out.println(newStr); 
```

它产生了：

> “引号内的外部字符串”

# windows-7 - 无法在 Windows 7 中运行和引擎

> ID：11649390
> 
> 赞同：0
> 
> 时间：2012-07-25T12:11:22.447
> 
> 标签：windows-7, andengine

我尝试了使用 andeninge 的小游戏。它在 Window XP 系统中工作。如果我使用 andeninge 导入或创建新项目，则相同的项目会出现运行时错误，例如

```
07-25 17:34:43.854: E/AndroidRuntime(280): FATAL EXCEPTION: main
07-25 17:34:43.854: E/AndroidRuntime(280): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.m2f/com.m2f.AndengineActivity}: java.lang.NullPointerException
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.os.Looper.loop(Looper.java:123)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 17:34:43.854: E/AndroidRuntime(280):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 17:34:43.854: E/AndroidRuntime(280):  at java.lang.reflect.Method.invoke(Method.java:521)
07-25 17:34:43.854: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 17:34:43.854: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 17:34:43.854: E/AndroidRuntime(280):  at dalvik.system.NativeStart.main(Native Method)
07-25 17:34:43.854: E/AndroidRuntime(280): Caused by: java.lang.NullPointerException
07-25 17:34:43.854: E/AndroidRuntime(280):  at org.anddev.andengine.ui.activity.BaseGameActivity.onCreate(BaseGameActivity.java:50)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-25 17:34:43.854: E/AndroidRuntime(280):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

示例代码：

```
public class DemoGame1 extends BaseGameActivity {

@Override
public void onLoadComplete() {
    // TODO Auto-generated method stub

}

@Override
public Engine onLoadEngine() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onLoadResources() {
    // TODO Auto-generated method stub

}

@Override
public Scene onLoadScene() {
    // TODO Auto-generated method stub
    return null;
} 
```

}

但 android 应用程序运行良好（其打印 HelloWorld）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:43:31.997

我在 3 台不同的 Win7 机器上运行 andengine。我认为操作系统不是问题。您能否发布您的游戏活动类的构造函数，以便我们可以看到是哪一行导致了麻烦？另外——你使用的是 GLES2 还是 GLES1？

== 更新 ==

好的 - 问题很简单。您没有在 onLoadEngine 函数中返回引擎。您正在返回 null。因此，当游戏尝试启动时，它会调用空对象的方法。简而言之 - 您的演示游戏内容不足，无法正常工作。

至少你必须定义一个引擎和一个相机。我希望您还需要一个场景，因为没有它就不会渲染任何东西。

然后要真正在屏幕上看到某些东西，您需要在 onLoadResources 中加载一些纹理，并在 onLoadScene 中创建至少一个场景和一些精灵。

我建议下载 Andengine 示例源，并查看 MovingBallExample.java 作为 andengine 的“Hello World”。它真的很简单。

至于 GL 版本 - 您正在使用其中一个。andengine 库有两个主要修订版，非正式地称为 GLES1 和 GLES2。如果你最近从 github 获得了代码，那么你有 GLES2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:32:50.270

你用的是同一个版本的eclipse吗？同版本的android SDK？Adt-plugin? 版本的 API 级别？GLES 2.0？相同版本的AndEngine？

检查所有内容的版本并确保它们是最后的版本和/或它们之间的兼容性，如平台工具和广告插件

# c# - 使用泛型实现接口

> ID：11649393
> 
> 赞同：0
> 
> 时间：2012-07-25T12:11:41.103
> 
> 标签：c#, generics, interface

我是泛型新手，需要一些帮助。

我想为所有“变压器”类创建一个接口来实现。要成为“变形金刚”，该类必须至少包含`T mapTo<T>(T t)`.

**以下是我想如何使用 TRANSFORMERS：**
重载一些方法……太棒了！似乎很容易！

```
public class Transformer : ITransformer
{
    public Transformer(IPerson instance)
    {
    }

    public XmlDocument mapTo(XmlDocument xmlDocument)
    {
        // Transformation code would go here...
        // For Example:
        // element.InnerXml = instance.Name;

        return xmlDocument;
    }

    public UIPerson maptTo(UIPerson person)
    {
        // Transformation code would go here...
        // For Example:
        // person.Name = instance.Name;

        return person;
    }
} 
```

**让我们使用泛型来定义接口：**
好主意！

```
public interface ITransformer
{
     T MapTo<T>(T t); 
} 
```

**问题：**
如果我在接口中使用泛型，我的具体类实际上被迫实现以下内容：

```
public T MapTo<T>(T t)
{
    throw new NotImplementedException();
} 
```

**这使班级看起来很丑陋**

```
public class Transformer : ITransformer
{
    public Transformer(IPerson  instance)
    {
    }

    public XmlDocument MapTo(XmlDocument xmlDocument)
    {
        // Transformation code would go here...
        // For Example:
        // element.InnerXml = instance.Name;

        return xmlDocument;
    }

    public UIPerson MapTo(UIPerson person)
    {
        // Transformation code would go here...
        // For Example:
        // person.Name = instance.Name;

        return person;
    }

    public T MapTo<T>(T t)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:19:09.690

也许在接口定义中添加泛型参数：

```
public interface ITransformer<T>
{
     T MapTo(T t); 
} 
```

并实现您需要的所有映射：

```
public class Transformer : ITransformer<XmlDocument>, ITransformer<UIPerson> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:15:47.600

尝试这个：

```
public interface ITransformer<T>
{
    T MapTo(T t);
} 
```

然后当你实现你的接口时，你的类看起来像：

```
public class Transformer : ITransformer<XmlDocument>
{
    public XmlDocument MapTo(XmlDocument t)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:16:02.687

您需要使`ITransformer` *接口*通用。所以，你想要这个：

```
public interface ITransformer<T>
{
    public T MapTo(T t);
} 
```

然后，在实现接口时，类可以将它们希望使用的类的类型参数传递给接口：

```
public class Transformer : ITransformer<XmlDocument>
{
    public XmlDocument MapTo(XmlDocument t)
    {
        //...
    }
} 
```

**编辑：**正如下面的lazyberezovsky所说，没有什么能阻止你多次实现同一个接口：

```
public class Transformer : ITransformer<XmlDocument>, ITransformer<UIPerson> 
```

当然，它必须提供`XmlDocument MapTo(XmlDocument t)`和的实现`UIPerson MapTo(UIPerson t)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:16:57.523

我认为您要做的是具有以下界面：

```
public interface ITransformer<TEntity> {
    public TEntity MapTo(TEntity entity);
} 
```

# c - stdint.h 中描述的“快速类型”是什么？

> ID：11649394
> 
> 赞同：1
> 
> 时间：2012-07-25T12:11:41.437
> 
> 标签：c

> **可能重复：**
> [int_least64_t vs int_fast64_t vs int64_t](https://stackoverflow.com/questions/9318415/int-least64-t-vs-int-fast64-t-vs-int64-t)

例如，以下类型之间有什么区别以及为什么/何时使用它们？

*   `int64_t`
*   `int_least64_t`
*   `int_fast64_t`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T12:15:58.900

`int64_t`是一种*正好*64 位宽度、二进制补码表示且没有填充位的类型。这对于例如二进制接口中的工作很有用；它的存在是*可选*的，仅在具有恰好具有该宽度的整数类型的体系结构上*定义*。

`int_least64_t`是*至少*64 位宽度的最小可能类型，具有实现定义的表示和填充。如果精确的 64 位宽度不可用，它可能会更宽，例如，对于需要特定最小值范围的算法工作。

`int_fast64_t`是一种至少 64 位宽的类型。如果 CPU 可以更有效地处理更宽的类型，它可能会更宽，以内存占用换取速度。

第一个非常具体，但可选。如果底层硬件很棘手，另外两个给编译器一些回旋余地，即你告诉编译器在什么条件下你会接受比请求更宽的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:15:09.960

它们是为保存他们所说的位而设计的类型，但针对 CPU 架构进行了优化。

这意味着在 64 位机器上，fast16_t 的大小可能是 64 位；它不应该依赖于实际类型大小，例如，如果您将结构写入磁盘。为此使用“正常”类型。

# java - Java Dom 解析器报告错误的子节点数

> ID：11649396
> 
> 赞同：6
> 
> 时间：2012-07-25T12:11:46.583
> 
> 标签：java, xml, dom, children

我有以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
<user id="0" firstname="John"/>
</users> 
```

然后我试图用java解析它，但是getchildnodes报告错误的子节点数。

Java代码：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document document = builder.parse(this.file);
document.getDocumentElement().normalize();
Element root = document.getDocumentElement();
NodeList nodes = root.getChildNodes();
System.out.println(nodes.getLength()); 
```

结果：3

此外，我正在获取用于访问节点属性的 NPE，所以我猜测某些事情会发生严重错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:18:54.640

子节点由用于空白的元素和文本节点组成。您需要在处理属性之前检查节点类型。您可能还想考虑使用`javax.xml.xpath`从 Java SE 5 开始的 JDK/JRE 中可用的 API。

**示例 1**

此示例演示如何针对 DOM 发出 XPath 语句。

```
package forum11649396;

import java.io.StringReader;
import javax.xml.parsers.*;
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        String xml = "<?xml version='1.0' encoding='UTF-8'?><users><user id='0' firstname='John'/></users>";

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.parse(new InputSource(new StringReader(xml)));

        XPathFactory xpf = XPathFactory.newInstance();
        XPath xpath = xpf.newXPath();
        Element userElement = (Element) xpath.evaluate("/users/user", document, XPathConstants.NODE);
        System.out.println(userElement.getAttribute("id"));
        System.out.println(userElement.getAttribute("firstname"));
    }

} 
```

**示例 2**

下面的示例演示如何针对 发出 XPath 语句`InputSource`以获取 DOM 节点。这使您不必自己将 XML 解析为 DOM。

```
package forum11649396;

import java.io.StringReader;
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        String xml = "<?xml version='1.0' encoding='UTF-8'?><users><user id='0' firstname='John'/></users>";

        XPathFactory xpf = XPathFactory.newInstance();
        XPath xpath = xpf.newXPath();
        InputSource inputSource = new InputSource(new StringReader(xml));
        Element userElement = (Element) xpath.evaluate("/users/user", inputSource, XPathConstants.NODE);
        System.out.println(userElement.getAttribute("id"));
        System.out.println(userElement.getAttribute("firstname"));
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:19:44.980

有三个子节点：

*   包含换行符的文本节点
*   一个元素节点（标记的用户）
*   包含换行符的文本节点

所以在处理子节点时，要检查元素节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:25:13.573

您必须确保考虑到节点之间的 '\n'，这对文本节点也很重要。您可以使用`if(root.getNodeType() == Node.ELEMENT_NODE)`

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(this.file);
        document.getDocumentElement().normalize();
        for(Node root = document.getFirstChild(); root != null; root = root.getNextSibling()) {
            if(root.getNodeType() == Node.ELEMENT_NODE) {
                NodeList nodes = root.getChildNodes();
                System.out.println(root.getNodeName() + " has "+nodes.getLength()+" children");
                for(int i=0; i<nodes.getLength(); i++) {
                    Node n = nodes.item(i);
                    System.out.println("\t"+n.getNodeName());
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T04:50:10.563

在尝试访问属性时，我没有注意到任何解决您关于 NPE 的最后说明的答案。

> 此外，我还获得了用于访问节点属性的 NPE，所以我猜想出了什么问题。

由于我在一些网站上看到了以下建议，因此我认为这是访问属性的常用方法：

```
String myPropValue = node.getAttributes().getNamedItem("myProp").getNodeValue(); 
```

如果节点总是包含一个`myProp`属性，它工作正常，但如果它没有属性，[`getAttributes`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getAttributes%28%29)将返回 null。此外，如果有属性，但没有`myProp`属性，[`getNamedItem`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NamedNodeMap.html#getNamedItem%28java.lang.String%29)将返回 null。

我目前正在使用

```
public static String getStrAttr(Node node, String key) {
    if (node.hasAttributes()) {
        Node item = node.getAttributes().getNamedItem(key);
        if (item != null) {
            return item.getNodeValue();
        }
    }

    return null;
}

public static int getIntAttr(Node node, String key) {
    if (node.hasAttributes()) {
        Node item = node.getAttributes().getNamedItem(key);
        if (item != null) {
            return Integer.parseInt(item.getNodeValue());
        }
    }

    return -1;
} 
```

在实用程序类中，但您的里程可能会有所不同。

# .net - 使用 Microsoft.Office.Interop.Excel 从 Excel 读取文本格式

> ID：11649399
> 
> 赞同：2
> 
> 时间：2012-07-25T12:11:54.103
> 
> 标签：.net, excel, office-interop

我正在尝试阅读文本格式，例如通过 Strikethough 属性

```
myworksheet.Cells[row, col].DisplayFormat.Style.Font.Strikethrough; 
```

但是，无论实际的格式是什么，结果总是错误的。

在此之前，我使用以下方法读取了同一单元格的值：

```
myworksheet.Cells[row, col].Value; 
```

并得到正确的值。

当我尝试使用调试器读取时，`myworksheet.Cells[row, col].DisplayFormat.Style.Font.Strikethrough`我收到错误消息。

当我尝试使用调试器读取格式`Font`并查看其属性时，我得到：

![截屏](../Images/46f949b183382ee3f12938d74aee16bf.png)

异常详情：

`Strikethrough {System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Runtime.InteropServices.COMException: Old format or invalid type library. (Exception from HRESULT: 0x80028018 (TYPE_E_INVDATAREAD)) --- End of inner exception stack trace --- at System.RuntimeType.InvokeDispMethod(String name, BindingFlags invokeAttr, Object target, Object[] args, Boolean[] byrefModifiers, Int32 culture, String[] namedParameters) at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams) at System.Dynamic.IDispatchComObject.GetMembers(IEnumerable`1 names)} System.Reflection.TargetInvocationException`

我在 Windows 7 SP1 x64 操作系统上安装了 Office 2010 x86，并且我从 .NET 4.0 项目中引用 Microsoft.Office.Interop.Excel 版本 14。

我使用相同的库以编程方式创建了 .xlsx 文件，并通过 Excel 的 UI 手动添加了文本格式。

通过调试器（监视和立即）访问引发的异常提示库版本可能已过时，但是，版本 14 似乎是正确的版本（[http://www.microsoft.com/en-us/download /details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)）。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:30:30.710

找到原因和解决方法...

显然，格式是每个字符，而不是每个单元格。

检查是否有任何具有删除线格式的单元格有效：

```
for (int ch = 1; ch <= cell.Characters.Count; ch++)
{
    if (cell.Characters[ch, 1].Font.Strikethrough)
    {
        hasStrikeThrough = true;
        break;
     }
} 
```

但是，这仅适用于单元格的值是一个字符串（例如，如果 value 是 bool 则不起作用）。- 仅适用于字符串，我的意思是对于其他格式我得到一个例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:57:52.497

在 VBA 中，您通常只是`Cells(r,c).Font`直接调用，而不使用 Style。

# c# - 在 C# 中使用 P/Invoke 注册 _set_purecall_handler 函数

> ID：11649401
> 
> 赞同：1
> 
> 时间：2012-07-25T12:12:01.633
> 
> 标签：c#, c++, error-handling, interop, pinvoke

我在 C# 中使用带有 P/Invoke 的[_set_purecall_handler时遇到问题。](http://msdn.microsoft.com/en-us/library/t296ys27%28v=vs.80%29.aspx)

基本上，这有效：

**(C++)**

```
_set_purecall_handler(MyPureCallHandler);

void MyPureCallHandler(void)
{
    // gets called
} 
```

但这不会：

**（C＃）**

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate void PureCallHandler();

[DllImport("msvcr100.dll", CallingConvention = CallingConvention.Cdecl)]
private static extern IntPtr _set_purecall_handler([MarshalAs(UnmanagedType.FunctionPtr)] PureCallHandler handler);

_set_purecall_handler(MyPureCallHandler);

private void MyPureCallHandler()
{
    // *** doesn’t get called ***
} 
```

我不确定我的 P/Invoke 方法签名是否正确，但是当我调用该函数时它不会引发任何错误（它只是不会在纯虚拟调用错误时触发回调）。

**背景**

我们有许多应用程序（C++、C++/CLI 和 C#）使用单个 C# 库来捕获异常。这会注册各种处理程序（AppDomain.CurrentDomain.UnhandledException、SetUnhandledExceptionFilter 等）并捕获大多数异常。

但是，它不会捕获纯虚拟调用错误，因此我们需要注册上述函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:02:17.950

经过反复试验，我发现引用**msvcr100d.dll** (d = debug) 而不是 msvcr100.dll 就像我在调试器下一样工作。

这是我的来源（我不知道这是否是好的做法，但我已经在调试/发布模式下成功测试）：

```
private const string DllName =
    #if DEBUG
        "msvcr100d.dll";
    #else
        "msvcr100.dll"; 
    #endif

public delegate void PureCallHandler();

[DllImport(DllName, CallingConvention = CallingConvention.Cdecl)]
public static extern PureCallHandler _set_purecall_handler(PureCallHandler handler); 
```

# twitter-bootstrap - Twitter bootstrap - 可以水平滚动的小部件/面板列表

> ID：11649405
> 
> 赞同：0
> 
> 时间：2012-07-25T12:12:18.120
> 
> 标签：twitter-bootstrap, panel, widget, horizontal-scrolling

什么是理想的实施方式：

1.  小部件/面板列表。我正在寻找像 iGoogle 或[heft.me](http://heft.me/)这样的小部件。一个可能的解决方案是使用 heft.me 网站上的 css，但我想知道是否有 twitter 引导方式可以做到这一点，或者是否有任何可用的扩展？

2.  一旦我实现了渲染小部件，我将动态添加小部件。我希望这些小部件可以水平滚动。一种可能的解决方案是我应该调整 twitter-bootstrap 附带的轮播插件，但我再次想知道是否有更好的方法？

3.  是否建议为移动电话等较小的设备维护水平滚动小部件列表，或者更好地在移动设备上以不同的方式呈现它们，可能是手风琴面板或类似的东西？

    顺便说一句，我正在使用 twitter-bootstrap 2.0.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:46:05.823

基于[这个答案](https://stackoverflow.com/a/11333699/1478467)和这个[jQuery 插件](http://archive.plugins.jquery.com/project/Dragscrollable)

这是一个可行的解决方案：[jsfiddle](http://jsfiddle.net/Sherbrow/kP6v8/1/)。

```
<div class="myClass">
    <div class="row">
        <div class="span5"></div>
        <div class="span5"></div>
        <div class="span5"></div>
    </div>
</div> 
```

```
div.myClass {
    overflow-x: hidden;
    white-space: nowrap;
}
div.myClass [class*="span"] {
    display: inline-block;
    float: none;
} 
```

```
$('.myClass').dragscrollable(); 
```

我不知道插件的可行性，但如果你想要自己的版本，你应该能够对其进行逆向工程。

# performance - 网络服务器性能非常差

> ID：11649412
> 
> 赞同：-1
> 
> 时间：2012-07-25T12:12:38.983
> 
> 标签：performance, nginx, cloudflare

所以我今天在服务器上运行了这个命令“ab -c 50 -n 5000 [http://lala.la ”，我得到了这些“惊人”的结果：](http://lala.la)

```
Document Path:          /
Document Length:        26476 bytes

Concurrency Level:      50
Time taken for tests:   1800.514 seconds
Complete requests:      2427
Failed requests:        164
   (Connect: 0, Receive: 0, Length: 164, Exceptions: 0)
Write errors:           0
Total transferred:      65169733 bytes
HTML transferred:       64345285 bytes
Requests per second:    1.35 [#/sec] (mean)
Time per request:       37093.408 [ms] (mean)
Time per request:       741.868 [ms] (mean, across all concurrent requests)
Transfer rate:          35.35 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   2.7      0      22
Processing:  4335 36740 9513.2  33755  102808
Waiting:        7 33050 8655.1  30407   72691
Total:       4355 36741 9512.4  33755  102808

Percentage of the requests served within a certain time (ms)
  50%  33754
  66%  37740
  75%  40977
  80%  43010
  90%  47742
  95%  56277
  98%  62663
  99%  71301
 100%  102808 (longest request) 
```

这是在新安装的 Nginx 服务器上，使用 Cloudflare 和 APC。

不要以为我见过如此糟糕的性能，那么到底是什么原因造成的呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:04:47.287

对于初学者，请尝试直接测试源并将 cloudflare 排除在外（除非您将 html 设为可缓存并且您正在尝试测试 cloudflare 的服务能力）。鉴于 cloudflare 的目的之一是保护站点，因此认为您的测试可能会受到速率限制并非不合理（至少，绕过它会消除可能的调查来源）。

将 $request_time 添加到您的 nginx 访问日志格式中，这将告诉您服务器端的性能视图。如果它看起来仍然很糟糕，您可能必须使用 New Relic 或 DynaTrace 之类的东西来获取有关时间去向的更多详细信息（如果您不检测应用程序本身）。

您是否使用 php-fpm 将 nginx 连接到 php？如果没有，你应该调查一下。

对于那么糟糕的时候，它很可能在实际应用程序中，而不是在配置中。

# ios - 加速度计的性能问题

> ID：11649413
> 
> 赞同：0
> 
> 时间：2012-07-25T12:12:43.553
> 
> 标签：ios, ipad, memory-management, automatic-ref-counting

我有一个加速度计，我用它来稍微移动 UIImageviews 的层，以获得一些深度感知。

这是我在 viewdidload 方法中用于实例化动画和加速度计的代码。

```
UIAccelerometer *accelerator = [UIAccelerometer sharedAccelerometer];
accelerator.delegate = self;
accelerator.updateInterval = 0.1f;

animateLayer0 = [CABasicAnimation animationWithKeyPath:@"position"];
animateLayer1 = [CABasicAnimation animationWithKeyPath:@"position"]; 
animateLayer2 = [CABasicAnimation animationWithKeyPath:@"position"];    
animateLayer0.duration = 0.1;
animateLayer0.fillMode = kCAFillModeForwards;
animateLayer0.removedOnCompletion = false;
animateLayer1.duration = 0.1;
animateLayer1.fillMode = kCAFillModeForwards;
animateLayer1.removedOnCompletion = false;
animateLayer2.duration = 0.1;
animateLayer2.fillMode = kCAFillModeForwards;
animateLayer2.removedOnCompletion = false; 
```

这是加速度计功能的代码：

```
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{ 

self.difference = 0 - acceleration.y;

if (fabsf(self.difference) > 0.01) {
    for (int i = 0; i < self.accLayerPoints0.count; i++) {
        NSValue *val = [self.accLayerPoints0 objectAtIndex:i];
        CGPoint origin = [val CGPointValue];

        float x = origin.x + (acceleration.y * ACC_LAYER0_THRESHOLD);
        [animateLayer0 setToValue:[NSValue valueWithCGPoint:CGPointMake(x, origin.y)]];
        UIImageView *layer0 = [self.accLayerObjects0 objectAtIndex:i];
        [layer0.layer addAnimation:animateLayer0 forKey:nil];

    }

    for (int i = 0; i < self.accLayerPoints1.count; i++) {
        NSValue *val = [self.accLayerPoints1 objectAtIndex:i];
        CGPoint origin = [val CGPointValue];

        float x = origin.x + (acceleration.y * ACC_LAYER1_THRESHOLD);
        [animateLayer1 setToValue:[NSValue valueWithCGPoint:CGPointMake(x, origin.y)]];
        UIImageView *layer0 = [self.accLayerObjects1 objectAtIndex:i];
        [layer0.layer addAnimation:animateLayer1 forKey:nil];
    }

    for (int i = 0; i < self.accLayerPoints2.count; i++) {
        NSValue *val = [self.accLayerPoints2 objectAtIndex:i];
        CGPoint origin = [val CGPointValue];

        float x = origin.x + (acceleration.y * ACC_LAYER2_THRESHOLD);
        [animateLayer2 setToValue:[NSValue valueWithCGPoint:CGPointMake(x, origin.y)]];
        UIImageView *layer0 = [self.accLayerObjects2 objectAtIndex:i];
        [layer0.layer addAnimation:animateLayer2 forKey:nil];
    }
  }
} 
```

我的问题是一段时间后 ipad 开始出现性能问题，开始滞后。我已经使用 Allocations 工具来验证它是导致问题的加速度计函数中的代码。

有没有办法释放不再使用的对象或清理代码？我正在使用 ARC，所以我不确定清洁是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:01:05.897

我不认为分配是你的问题。我敢打赌，如果你使用时间分析器，你会看到你用所有加速度计活动阻塞了主线程。对于每个加速度计事件，您都在许多非常紧凑的循环中完成所有这些，这可能比您意识到的要多得多。

考虑将位置计算放在后台队列中并在主线程上更新 UI 对象的位置（这部分是必需的，因为从后台队列更新 UI 通常不安全）。通过将实际的 UI 更新命令分派到主队列来执行此操作。也许创建一个漏斗点（-updateUIWithDictionaryContainingComputedPositionsForEachLayer:，使用您的背景计算值在主队列上调用）。

*您是否需要每个加速度计事件*也是值得怀疑的。限制处理（Grand Central Dispatch 也可以提供帮助，或者简单的倒计时重启如果新事件 NSTimer），因此不会处理每个事件。您需要尝试找到感知的“最佳位置”，以在流畅的动画和高效的响应之间取得平衡，但我敢打赌，平滑视觉效果所需的更新数量远低于加速度计事件的数量你正在处理。

# php - 为什么我通过 Ajax 提交帖子时页面会刷新？

> ID：11649414
> 
> 赞同：3
> 
> 时间：2012-07-25T12:12:43.460
> 
> 标签：php, jquery, ajax

我正在尝试使用 Ajax 和 jQuery 创建一个帖子。

但它不起作用。它只是刷新当前页面。

**HTML**：

```
<form name="update_text_post" action="" id="update_text_post" method="post">
    <textarea name="textbox" class="textbox" maxlength="600"></textarea>
    <input type="submit" name="submit" value="Update" class="update_post_submit">
</form> 
```

**jQuery** :

```
$('#update_text_post').submit(function(e) {
   e.preventDefault();
    $.ajax({
        type: "POST",
        url: "post_ajax2.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $("#wallwrap").prepend(html);
            close_box();
            $('#update_text_post').resetForm();
        }
    });
 return false
}); 
```

e.preventDefault(); 也不能正常工作..它实际上甚至没有执行 MYSQL 查询。似乎它甚至没有发送表单或定位 post_ajax2.php 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:14:12.627

您需要使用**[`.preventDefault()`](http://api.jquery.com/event.preventDefault/)**页面重新加载来停止默认的表单提交行为。

```
$(function() {
    $('#update_text_post').submit(function(e) {
        e.preventDefault(); // e.preventDefault() for prevent form submisson with page reload
        $.ajax({
            type: "POST",
            url: "post_ajax2.php",
            data: dataString,
            cache: false,
            success: function(html) {
                $("#wallwrap").prepend(html);
                close_box();
                $('#update_text_post').resetForm();
            }
        });

    });
});

function afterSuccess() {
    $('#update_text_post').resetForm(); // reset form
    close_box();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:18:16.947

```
// 1\. you missed $ here, so it will not be a dom ready callback.
// your case is just define a function, and without executing it.
$(function () {
      $('#update_text_post').submit(function (e) {
          // 2\. you need to prevent the default submit event.
          e.preventDefault(); 
          $.ajax({
              type: "POST",
              url: "post_ajax2.php",
              data: dataString,
              cache: false,
              success: function (html) {
                  $("#wallwrap").prepend(html);
                  close_box();
                  $('#update_text_post').resetForm();
              }
          });
      });
  });

  function afterSuccess() {
      $('#update_text_post').resetForm(); // reset form
      close_box();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:14:35.823

您必须停止提交按钮的默认行为（表单发布）。否则表单将再次提交，您将再次看到页面加载（您不会注意到 ajax 为您的页面带来的更改 - 一些部分页面更新） . 您可以使用[preventDefault](http://api.jquery.com/event.preventDefault/)函数来执行此操作。

```
$(function(){
   $('#update_text_post').submit(function(e) {
     e.preventDefault();  // prevent the default submit behaviour
       $.ajax({
           type: "POST",
           url: "post_ajax2.php",
           data: dataString,
           cache: false,
           success: function(html)
           {
               $("#wallwrap").prepend(html);
               close_box();
               $('#update_text_post').resetForm();
           }
       });      
     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:15:01.830

你必须调用`e.preventDefault();`你的函数来阻止表单提交。

```
$('#update_text_post').submit(function(e) {
      // prevent form submit
      e.preventDefault();

      $.ajax({
               type: "POST",
               url: "post_ajax2.php",
               data: dataString,
               cache: false,
               success: function(html)
               {
                  $("#wallwrap").prepend(html);
                  close_box();
                  $('#update_text_post').resetForm();
               }
      });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:15:06.687

添加`return false`.

```
$('#update_text_post').submit(function(e) {
    $.ajax({
     ...
    })
    return false;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T12:15:54.933

单击提交按钮就是这样做的 - 它提交表单。如果您想用 AJAX POST 请求替换表单提交，则需要通过阻止该事件的默认行为来阻止表单也被提交（并因此重新加载页面）。

您可以通过`return false;`在绑定到提交事件处理程序的回调函数的末尾调用，或者通过将事件的引用传递给回调函数并调用`e.preventDefault()`（其中`e`引用事件）来执行此操作。

这两种方法的主要区别在于`return false`，在 jQuery 回调函数中，还会阻止事件冒泡。在这种情况下，这并不是什么大问题。

# windows-phone-7 - 在列表框中设置一个特定文本块元素的前景 - wp7

> ID：11649416
> 
> 赞同：1
> 
> 时间：2012-07-25T12:12:50.520
> 
> 标签：windows-phone-7, data-binding, listbox, textblock, foreground

我有一个列表框，它绑定到一个字符串数组。列表框包含一个文本块，其中包含数组中字符串的文本。我想改变其中之一的前景（可能会有所不同）：

```
 <ListBox x:Name="listBox" ItemsSource="{Binding Options}" ScrollViewer.VerticalScrollBarVisibility="Hidden" Width="400" Height="500" Margin="0,200,0,0" HorizontalAlignment="Center" HorizontalContentAlignment="Center" SelectionChanged="ListBox_SelectionChanged" Loaded="listBox_Loaded">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <ListBoxItem>
                        <Grid Height="75" Width="400" HorizontalAlignment="Center" >
                            <TextBlock HorizontalAlignment="Center" Text="{Binding}" Style="{StaticResource SortingOptions}" />
                        </Grid>
                    </ListBoxItem>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我似乎无法掌握文本块，所以我可以更改右侧的前景。有谁知道我怎么能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:33:49.917

将 Foreground 属性绑定到与 Text 相同的值，并使用 BindingConverter 从中创建一个 Brush。例如

```
<Grid.Resources>
  <yournamespace:ColorConverter x:Key="colConverter"/>
<Grid.Resources>

<TextBlock 
  HorizontalAlignment="Center"
  Text="{Binding}"
  Foreground="{Binding, Converter={StaticResource colConverter}}"
  Style="{StaticResource SortingOptions}" /> 
```

添加您的转换器类：

```
 public class ColorConverter : IValueConverter
  {
  public object  Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
      // TODO: match from the value parameter to a color.

      return new SolidColorBrush(Colors.Red);
  }

  public object  ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
      throw new NotImplementedException();
  }
} 
```

# apache-flex - 将值从 Textinput 传递到 Controller 文件

> ID：11649420
> 
> 赞同：0
> 
> 时间：2012-07-25T12:13:04.297
> 
> 标签：apache-flex, flash-builder

我目前正在尝试组合一个简单的 Illustrator 插件，并且来自设计背景，这被证明是一项艰巨的任务，我有 JS 经验，但没有 Flex 经验。

我想要做的是在 Illustrator 中有一个面板，带有一个输入字段和一个按钮。您在输入中键入内容并按下按钮，然后将带有所需文本的文本框添加到画布中。

但是如何将值从 mx:Textinput 传递到 Controller.as 文件？我在网上找不到答案。

这是我的 main.mxml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" historyManagementEnabled="false">
    <mx:Script>
        <![CDATA[
            private var c:Controller = new Controller();
        ]]>
    </mx:Script>

    <mx:VBox height="100%" width="100%" verticalAlign="middle" horizontalAlign="center">
        <mx:Label text="myVariable"></mx:Label>
        <mx:TextInput name="TextValue"/> // I want the text value to be passed to the Controller class so I can pass it on to my JSX function
        <mx:Button label="Run" click="c.run()"/>
    </mx:VBox>

</mx:Application> 
```

这是我的 Controller.as 文件：

```
package
{
    import flash.external.HostObject;

    public class Controller
    {
        [ Embed (source="myScript.jsx" , mimeType="application/octet-stream" )]

        private static var myScriptClass:Class;

        public function run():void {
            var  jsxInterface:HostObject = HostObject.getRoot(HostObject.extensions[0]);
            jsxInterface.eval( new myScriptClass ().toString());

            //calling from AS to JSX
            jsxInterface.myJSXFunction (myVariable); //This is where I want the value to be passed to

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:46:23.453

`public var myTextValue : String;`首先在控制器中声明公共属性。

然后在您的 MXML 中声明双向绑定`<mx:TextInput text="@{c.myTextValue}"/>`

现在您拥有`myTextValue`始终包含实际值的属性。

但是双向绑定是在不久前引入的。

或者，您可以将`change`事件侦听器添加到您的`TextInput`实例`<mx:TextInput id="myTextInput" change="c.myTextValue = myTextInput.text"/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:04:03.970

您也可以将字符串直接传递给 c.run() 调用。

```
public function run(myString:String):void {
...
    jsxInterface.myJSXFunction (myString)
... 
```

进而

```
<mx:TextInput id="TextValue"/>
<mx:Button label="Run" click="c.run(TextValue.text)"/> 
```

只是另一种方法。

洛伊克

# android - FlexMobileProject，textArea 中的 setStyle("textFormat",number) 不起作用

> ID：11649423
> 
> 赞同：0
> 
> 时间：2012-07-25T12:13:09.337
> 
> 标签：android, actionscript-3, flex-mobile

我在 Flex 中创建动态`TextArea`，我想动态更改它`fontSize`，但`setStyle`不起作用。

这是我的代码：

```
var textArea:TextArea = new TextArea();  
textArea.id = "txtCreaTaskAnalysis" +contatoreNumeroTextAreaCreaTaskAnalysis;  
textArea.left = 140;  
textArea.right = 45;  
textArea.horizontalCenter = 47;  
textArea.height = 110;  
textArea.y = posizioneYTextArea;  
var tfor:TextFormat = new TextFormat();  
tfor.size= 25 ;  
textArea.setStyle("textFormat",tfor);  
textArea.text = tfor.size.toString();  
addElement(textArea); 
```

我在 a 中有这段代码`buttonClickHandler`，但`fontSize`没有改变。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:17:52.360

尝试使用：

```
textArea.setStyle("fontSize",25); 
```

我不认为 TextArea 有一种名为“textFormat”的样式。

# html - 无法将 div 的高度设置为 100%，因为高度重置为 0px

> ID：11649426
> 
> 赞同：1
> 
> 时间：2012-07-25T12:13:14.187
> 
> 标签：html, css

我正在尝试将单独的父列（及其子列）的 div 高度设置为 100%，但它似乎不起作用，因为 div 高度神秘地重置为 0。

第一**列**有两个子框（如果我描述正确的话），它们将占据页面高度的 50%（分别）。第二**个和第三个**有一个子框，它们都占页面高度的 100%。

除此之外，我想在页面左上角为徽标添加一个占位符，并在页面底部添加一个页脚。综上所述，这似乎有点令人生畏。非常感谢您的建议。

最后它应该是这样的：

![在此处输入图像描述](../Images/3f37727a5aada7f3b536d38ccb4de88b.png)

我在这里上传了它：http: [//jsfiddle.net/methuselah/qtmJW/](http://jsfiddle.net/methuselah/qtmJW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:22:11.120

使用`height: 100%;`在`#wrapper`

**注意**：也`overflow: hidden;`从`#wrapper`

[我的小提琴](http://jsfiddle.net/qtmJW/4/)

编辑：[**新小提琴**](http://jsfiddle.net/qtmJW/17/)

# symfony - Symfony 2 配置参数 - 必须定义参数

> ID：11649434
> 
> 赞同：3
> 
> 时间：2012-07-25T12:13:34.667
> 
> 标签：symfony

我有一个名为 Web\CoworkerBundle 的 Bundle。在 DIC/Configuration.php 我有：

```
$rootNode = $treeBuilder->root('web_coworker');
$rootNode
    ->children()
        ->scalarNode('redirect_url')->defaultNull()->end()
    ->end(); 
```

在 config.yml 我有：

```
web_coworker:
    redirect_url: "http://www.example.com/" 
```

现在在我的 DefaultController.php 中，我做

```
return array(
    'url' => $this->container->getParameter('redirect_url')
); 
```

我得到错误

> 必须定义参数“redirect_url”。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T13:05:49.000

你需要在你的包中创建一个扩展（*Acme/DemoBundle/DependencyInjection*）

```
class AcmeDemoBundleExtension extends Extension
{
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
        // MOST IMPORTANT LINE
        $container->setParameter('web_coworker.params', $config);
    }
} 
```

现在关于控制器，您可以删除您返回的内容，这应该可以解决问题:)

# javascript - 使用先前的发布请求重新加载文档

> ID：11649435
> 
> 赞同：1
> 
> 时间：2012-07-25T12:13:35.357
> 
> 标签：javascript, ajax

如何使用与之前单击按钮相同的 ajax 请求重新加载页面？我正在使用 Post ajax 请求。我使用以下代码重新加载页面，但我想通过单击按钮发布与以前相同的数据。

```
<input type="button" value="Reload" onClick="document.location.reload(true)"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:47:53.127

我不认为你可以用 location.reload() 来做到这一点。你不只是在点击时做另一个 Ajax 帖子吗？

编辑：例如，如果您使用 jQuery.post() （请参阅[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)）来发布您的 AJAX 帖子，那么您作为“数据”发送的任何内容都应该仍然可用正确的？

因此，使用相同的数据，您可以发布另一篇文章。例如（再次在 JQuery 中）

```
$('input[type='button']').live('click', function(){
  $.post(<url>, 
     data,
      ....
   );
}); 
```

# javascript - 使用 javascript 突出显示选择选项

> ID：11649437
> 
> 赞同：0
> 
> 时间：2012-07-25T12:13:57.507
> 
> 标签：javascript

我有一个像这样选择的组列表：

```
<select id="groups">

<option value="g1">G1</option>
<option value="g2">G2</option>
<option value="g3">G3</option>

</select> 
```

我有一个联系人列表，其中基本上包含：

```
Name = group
============
Casper  G1-G2-G3
Andy    G1-G2
Mark    G2-G3 
```

当用户检查`checkbox`并`Casper`单击`Edit`按钮时，`G1-G2 and G3`应在组列表中突出显示（已选择）。当我在联系人列表中获取组字段的值时，三个组都带有逗号`"G1-G2-G3"`。非常感谢您的帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:22:22.797

您可以使编辑按钮将所选属性分配给选项，然后使用 css 对其进行样式设置。

```
option[selected] { background: #f00; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:26:48.410

一些提示，我相信你自己解决这个问题对你有好处；）

*   似乎`Casper`属于多个组，所以你应该设置`multiple="true"`你的`select`

*   当您检查时`Casper`，检索与他关联的组数据，例如`["g1", "g2", "g3"]`。遍历此列表，并将每个选项的值设置为`selected`。

*   如果你想支持 IE6，你还需要添加一个类，比如说`selected`选项`selected`。

*   CSS 规则`{ option.selected: background: yellow}`可以解决问题。

*   如果您只针对现代浏览器，则`option[selected]{ xxx }`效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:55:22.747

好的，所以我猜有一个复选框`Casper`，单击时会调用以下函数：

```
function(groupstring) {
// groupstring is something like "G1-G2"

    var groups = groupstring.split("-");
    var options = document.getElementById("groups").options;
    for (var i=0; i<options.length; i++) {
        var opt = options[i];
        opt.defaultSelected = groups.indexOf(opt.value) > -1;
    }
} 
```

我不确定您是否要使用该属性`selected`或该`defaultSelected`属性。请注意，您的选择应`multiple`设置为 true ( `<select id="groups" multiple>`)。

# php - Yii 框架 CGridView 在 3rd. 党申请

> ID：11649438
> 
> 赞同：1
> 
> 时间：2012-07-25T12:14:01.873
> 
> 标签：php, yii

我正在尝试在我的网站中实现 CGridView，它只使用 Yii 框架而不创建 Yii 应用程序。

所以这里是 index.php 的内容：

```
require_once(dirname(__FILE__).'/../framework/yii.php');
$dbConf = array(
        'components'=>array(
                'db'=>array(
                        'connectionString' => 'mysql:host=localhost;dbname=yii_tour',
                        'emulatePrepare' => true,
                        'username' => 'root',
                        'password' => 'root',
                        'charset' => 'utf8',
                ),
        )
);
Yii::createWebApplication($dbConf);
Yii::import('zii.widgets.grid.*');

$message = new Message();
$dataProvider = new CActiveDataProvider($message);

$grid = new CGridView();
$grid->dataProvider = $dataProvider;
$grid->run(); 
```

此代码可以正常工作，没有任何错误。唯一的问题是它只输出“Total 10 result(s)”。就是这样。我看不到网格。

我签入了html，这就是我得到的：

```
<div>
        <div class="summary">Total 10 result(s).</div>
        <table class="items">
                <thead>
                        <tr>
                        </tr>
                </thead>
                <tbody>
                        <tr class="odd"></tr>
                        <tr class="even"></tr>
                        <tr class="odd"></tr>
                        <tr class="even"></tr>
                        <tr class="odd"></tr>
                        <tr class="even"></tr>
                        <tr class="odd"></tr>
                        <tr class="even"></tr>
                        <tr class="odd"></tr>
                        <tr class="even"></tr>
                </tbody>
        </table>
        <div class="keys" style="display:none" title="/democms/grid.php"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span></div>
</div> 
```

我想我在这里遗漏了一些重要的东西。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:02:20.213

您必须通过以下方式为网格初始化列

```
$grid = new CGridView();
$grid->dataProvider = $dataProvider;
$grid->init();
$grid->run(); 
```

# php - Youtube API - 视频评论分页

> ID：11649443
> 
> 赞同：0
> 
> 时间：2012-07-25T12:14:09.233
> 
> 标签：php, api, youtube, pagination

我正在使用以下 PHP 代码来获取特定视频的评论：

```
<?php
    $vid = "G0k3kHtyoqc";
    $feedURL = 'http://gdata.youtube.com/feeds/api/videos/' . $vid;
    $entry = simplexml_load_file($feedURL);

    $gd = $entry->children('http://schemas.google.com/g/2005');
    if($gd->comments->feedLink){ 
        $attrs = $gd->comments->feedLink->attributes();
        $commentsURL = $attrs['href']; 
        $commentsCount = $attrs['countHint']; 
    }

    if($commentsURL && $commentsCount > 0){
      $commentsFeed = simplexml_load_file($commentsURL);    
      echo "<ol>";
      foreach($commentsFeed->entry as $comment){
        echo "<li>";
        echo "<a target='_blank' href='http://www.youtube.com/user/" . $comment->author->name . "'>";
        echo $comment->author->name;
        echo "</a>";
        echo " - " . $comment->content;
        echo "</li>";
      }
      echo "</ol>";
    }
?> 
```

上面代码的问题是它只能获得最近的 24 条评论。我需要一种对所有评论进行分页的方法。

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:32:02.000

使用“**开始索引**”参数。从 1 开始，根据评论数，将 [comments-count] 添加到 start-index 参数。

例如：第一页评论，每页获得 25 条评论，使用 max-results=25 和 start-index=1 第二页评论，每页获得 25 条评论，使用 max-results=25 和 start-index=26

等等 =)

问候！

# php - PHP 错误：facebook 连接 - 不能使用字符串偏移作为数组

> ID：11649444
> 
> 赞同：0
> 
> 时间：2012-07-25T12:14:09.397
> 
> 标签：php, facebook

这是错误： `Cannot use string offset as an array in line 41`

第 41 行是这样的： `$data['first_name'] = $user_details[0]['first_name'];`

这是代码：

```
$user_details = $facebook->api_client->users_getInfo($authData["uid"], 'first_name,last_name,pic_square,email'); 

$data['first_name'] = $user_details[0]['first_name'];
$data['last_name'] = $user_details[0]['last_name']; 
$data['pic'] = $user_details[0]['pic_square']; 
$data['email'] = $user_details[0]['email']; 
$data['uid'] = $user_details[0]['uid']; 
easyRegister($data['uid'],$data['first_name'],$data['last_name'],$data['email'],$data['pic'],1); 
```

# jquery - JQM 多页应用程序，带有一个中央 JS 并打开 PDF (doc,..)

> ID：11649450
> 
> 赞同：0
> 
> 时间：2012-07-25T12:14:28.290
> 
> 标签：jquery, jquery-mobile

我的应用程序结构是这样的：

index.html / 应用程序。入口点包括在`<head>...</head>`一个中央 JS 中，我根据打开的页面和触发的事件来执行自定义脚本：这是一个名为 mylist.html 的页面的快速示例，而不是在每个页面上都有脚本，我有一个更大的 JS，只需要一次加载`<head>`索引：

```
$(document).on('pageinit', '#pageMyList', function()        
{
     // init code   
});

$(document).on('pageshow', '#pageMyList', function()
{   
    // run every time
}); 
```

关闭 JQM ajax 和其他东西不是一种选择，因为我需要这些转换并使用 jqm“native”。

问题：

我有一个由浏览器处理的 pdf、doc、外部链接等的列表。例如：打开 pdf 我只是链接到它 (window.location = 'pathToPdfFile';

那行得通，但随后打开了pdf阅读器（iphone等）。现在返回将打开最后一页，但 index.html 页面不再位于 DOM 中 - 而且我的整个 JS 都不可用。

顺便说一句：页面是通过 ajax 动态构建的。当我刷新任何页面（index.html）时，同样的情况会丢失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:44:03.973

您可以明确告诉 JQM 哪些页面要加载到 DOM 中（[请参阅页面底部的 JQM 文档](http://jquerymobile.com/test/docs/pages/page-cache.html)），但要小心，因为如果您将太多页面加载到 DOM 中，您将遇到特定于设备的内存问题。

要缓存特定页面，您可以将 data-dom-cache="true" 属性添加到页面的容器（例如您的`index.html`页面）：

```
<div data-role="page" data-dom-cache="true"> 
```

要将所有以前访问过的页面保留在 DOM 中，请将页面插件上的 domCache 选项设置为 true，在名为 AFTER jQuery 但在加载 jQuery mobile 之前的单独 JS 文件中，如下所示：

```
$.mobile.page.prototype.options.domCache = true; 
```

或者，您可以创建一个 HTML5 缓存清单文件，该文件将存储您在缓存中指定的所有文件，从而该应用程序甚至可以在离线时运行。这种方法有缺点，但这取决于您希望您的应用程序如何运行。这是关于 HTML5 缓存清单和操作方法的文档：http: [//www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

# c# - 将查找字段添加到来自 RootWeb 的列表

> ID：11649452
> 
> 赞同：0
> 
> 时间：2012-07-25T12:14:29.833
> 
> 标签：c#, sharepoint

我有一个名为 Main Site 的网站集 rootweb。我有很多子网站，按年份叫，2012、2011等。在rootweb中，有一个叫Products的列表。在子站点中有一个名为 Sales 的列表，我需要在根站点中的 Products 列表中添加一个查找字段。我找到了这段代码，但它不起作用，它创建了查找字段，但即使有产品，下拉列表也是空的。

```
//Request North lookup
                 currentList = currentWeb.GetSafeListByName(SponsoringCommon.Constants.LISTNAMES_SALESNORTH);
                 string sFldReqNr = SponsoringCommon.Constants.FIELDS_REQUESTNUMBERLOOKUPNORTH_NAME + currentWeb.Title;
                 Functions.CreateRequestNumberLookup(currentList, sFldReqNr, false, Functions.NorthSouth.North);

                 ArrayList colPreviousContentTypes = new ArrayList();
                 currentList.AddFieldToContentType(sFldReqNr, SponsoringCommon.Constants.CONTENTTYPES_SALESNUMBER_NAME, 2, colPreviousContentTypes, 1033);

public static void CreateProductNameLookup(SPList currentList, string strInternalFieldName, bool allowMultipleValues)
        {
              Logger.LogDebug("Functions",
                "CreateProductNameLookup(SPList currentList, string strInternalFieldName, bool allowMultipleValues)", "BEGIN");

            SPWeb currentWeb = currentList.ParentWeb;
            SPList targetList = currentWeb.Site.RootWeb.GetSafeListByName(SponsoringCommon.Constants.LISTNAMES_PRODUCT_NAME);
            SPFieldCollection colFields = currentList.Fields;
            Guid targetListID = targetList.ID;

            int L1 = strInternalFieldName.Length;
            int L2 = currentWeb.Title.Length;
            string sFieldNameWithoutYear = (strInternalFieldName.EndsWith(currentWeb.Title) ? 
                strInternalFieldName.Substring(0, L1 - L2) : 
                strInternalFieldName);

            if (colFields.ContainsField(strInternalFieldName))
            {
                Logger.LogDebug("Functions",
                    "CreateProductNameLookup(SPList currentList, string strInternalFieldName, bool allowMultipleValues)",
                    "Field '" + strInternalFieldName + "' already exists. (>> Skipped)");
            }
            else
            {
                strInternalFieldName = colFields.AddLookup(strInternalFieldName, targetListID, false);
                SPField fld = colFields.GetFieldByInternalName(strInternalFieldName);
                fld.ShowInNewForm = true;
                fld.ShowInEditForm = true;
                fld.ShowInDisplayForm = true; 
                SPFieldLookup fldLU = fld as SPFieldLookup;
                fldLU.AllowMultipleValues = allowMultipleValues;
                string strSchemaXml = fldLU.SchemaXmlWithResourceTokens;
                strSchemaXml = strSchemaXml.Replace("DisplayName=\"" + strInternalFieldName + "\"", "DisplayName=\"$Resources:SPNLSponsoring,Field_" + sFieldNameWithoutYear + "_Name;\"");
                strSchemaXml = strSchemaXml.Replace("/>", " ShowField=\"" + targetList.Fields[SponsoringCommon.Constants.FIELDS_PRODUCT_NAMENEW].InternalName + "\" " +
                    "Description=\"$Resources:SPNLSponsoring,Field_" + sFieldNameWithoutYear + "_Description;\" " +
                    "Group=\"$Resources:SPNLSponsoring,Field_NationaleLoterijSponsoringColumns_Group;\" />");
                fldLU.SchemaXml = strSchemaXml;
                fldLU.Update(true);
                currentList.Update();
            }

            Logger.LogDebug("Functions",
                "CreateProductNameLookup(SPList currentList, string strInternalFieldName, bool allowMultipleValues)", "END");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:32:59.140

有可能，我已经解决了，我不得不使用另一个重载方法 addlookup 来接收 parentweb.id

```
 strInternalFieldName = colFields.AddLookup(strInternalFieldName, targetListID, currentWeb.Site.RootWeb.ID, true);
then it works fine 
```

# jquery - 刷新页面时jQuery偏移量错误

> ID：11649454
> 
> 赞同：6
> 
> 时间：2012-07-25T12:14:32.493
> 
> 标签：jquery, positioning

我正在使用 jQuery 偏移函数将绝对定位的 DIV 放置在锚元素上。

```
$("#marker1").offset({ top: $("#<%= hypHowItWorks.ClientID %>").offset().top, left: $("#<%= hypHowItWorks.ClientID %>").offset().left });
$("#marker1").width( $("#<%= hypHowItWorks.ClientID %>").outerWidth() ); 
```

当页面加载时这工作正常，但是，如果我通过按 F5 重新加载页面，它会显示 DIV 稍微偏离它应该在的位置。如果我然后在浏览器中后退页面，它会再次出现在正确的位置！

这是最新的 Chrome 和 Firefox 的问题，但不是 IE9。

有任何想法吗？

克里斯。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T20:47:27.883

在`$(window).load`事件中尝试它而不是`$(document).ready`.

我有同样的问题，可以用那个技巧解决它！

# javascript - 如何在动画完成之前禁用滚动？

> ID：11649456
> 
> 赞同：13
> 
> 时间：2012-07-25T12:14:36.403
> 
> 标签：javascript, jquery, scroll, jquery-animate

我正在使用此代码滚动到页面上的某个元素：

```
$("html, body").animate({scrollTop: $(".myDiv").offset().top}, 300); 
```

它可以工作，但存在一个问题：当用户向下滚动而脚本向上滚动时，会出现一些抖动，因为同时有两个不同方向的滚动命令 - 对我来说听起来很合乎逻辑。

我检查了其他一些具有这种滚动功能的网站，没有抖动。那么防止这种情况的诀窍是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T12:27:10.467

当您使用带有滚动的动画时，这是一个 jQuery 错误，很好的检测。

我做了一项研究如何关闭滚动并找到这个问题：[如何暂时禁用滚动？](https://stackoverflow.com/questions/4770025/how-to-disable-scrolling-temporarily)

[这是jsFiddle。点击后你会看到；用户无法滚动直到动画完成。](http://jsfiddle.net/prSqz/17/)

```
$('.myDiv').click(function(){

    disable_scroll();

    $('html, body').stop().animate({ scrollTop: 0 }, 700,function() {
        enable_scroll();
    });
}); 
```

编辑：感谢 galambalazs 顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:18:26.060

一个想法 - 尝试连接到滚动事件并使用[http://api.jquery.com/stop/](http://api.jquery.com/stop/)来停止你的动画.. 坏主意..

解决方案的相同问题 -[让用户滚动停止滚动顶部的 jquery 动画？](https://stackoverflow.com/questions/8858994/let-user-scrolling-stop-jquery-animation-of-scrolltop)

# php - 设置选定的下拉菜单，然后在 "$_GET['user_level']" PHP 上获取值

> ID：11649457
> 
> 赞同：0
> 
> 时间：2012-07-25T12:14:38.497
> 
> 标签：php, select, get

我的网站上有一个静态下拉列表，但每个用户的值都不同。我想要它，以便它具有基于用户级别的选定值，但是如果我更改我的选择并按保存，它将更新表中的该值。但是每次它只是将值设置为0。

到目前为止选择代码：

```
<select id="user_level<?php echo $rrows['id']; ?>" name="user_level<?php echo $rlurows['id']; ?>">
    <option value="5"<?php if($rlurows['user_level'] == 5){ echo " selected=\"selected\"";} ?>>Admin</option>
    <option value="4"<?php if($rlurows['user_level'] == 4){ echo " selected=\"selected\"";} ?>>Staff</option>
    <option value="3"<?php if($rlurows['user_level'] == 3){ echo " selected=\"selected\"";} ?>>Lead</option>
    <option value="2"<?php if($rlurows['user_level'] == 2){ echo " selected=\"selected\"";} ?>>Guard</option>
    <option value="1"<?php if($rlurows['user_level'] == 1){ echo " selected=\"selected\"";} ?>>Camp</option>
    <option value="0"<?php if($rlurows['user_level'] == 0){ echo " selected=\"selected\"";} ?>>Guest</option>
</select> 
```

保存代码：

```
onclick='$.get("do.php",{ cmd: "edit", user_level:$("input#user_level<?php echo $rlurows['id']; ?>").val(),id: "<?php echo $rlurows['id']; ?>" } ,function(data){ $("#msg<?php echo $rlurows['id']; ?>").html(data); });' 
```

在 do.php 中检索代码：

```
$lvl = mysql_real_escape_string($_GET['user_level']); 
```

任何人都可以看到使我的代码不起作用的问题吗？我需要发布更多代码吗？

**编辑：**

哎呀。一定很累。:)。`<select id="user_level<?php echo $rrows['id']; ?>`应该是`<select id="user_level<?php echo $rlurows['id']; ?>`而且`input#user_level`应该是`select#user_level`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:34:30.960

`<select id="user_level<?php echo $rrows['id']; ?>`应该是`<select id="user_level<?php echo $rlurows['id']; ?>`而且`input#user_level`应该是`select#user_level`

# google-maps - 如何在谷歌地图API中找到最近的城市

> ID：11649459
> 
> 赞同：1
> 
> 时间：2012-07-25T12:14:40.130
> 
> 标签：google-maps, google-maps-api-3

我想找到澳大利亚最近的城市，例如我给出的城市[在](http://www.wimdu.com/sydney?bounds=-28.156192,153.638745,-37.505032,140.999212&city=New%20South%20Wales,%20Australia&currency=USD&current_city=New%20South%20Wales,%20Australia&distance=785&lat=-32.8306119&lng=147.3189786&price_filter%5Bmax%5D=7&price_filter%5Bmin%5D=0&show_big_map=true&sort_by=score&utf8=%E2%9C%93)此查看示例。我尝试使用 Google API 但没有用。我怎样才能做到这一点。你可以帮帮我吗？

代码是

```
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

     var request = {
         location: fenway,
         radius: 500,
         types: ['store']
     };
     var service = new google.maps.places.PlacesService(map);
     service.search(request, callback);

     function callback(results, status) {
         if (status == google.maps.places.PlacesServiceStatus.OK) {
             for (var i = 0; i < results.length; i++) {
                 var lat = results[i].geometry.location.lat();
                 var geocoder = new google.maps.Geocoder();
                 var lng = results[i].geometry.location.lng();
                 var latlng = new google.maps.LatLng(lat, lng);
                 geocoder.geocode({
                     'latLng': latlng
                 }, function (result, status1) {
                     if (status == google.maps.GeocoderStatus.OK) {
                         if (result[1]) {
                             console.log(result[1]);
                         }
                     } else {
                         alert("Geocoder failed due to: " + status1);
                     }
                 });

             }
         }
     } 
```

我想靠近不像商店等的城市。我必须找到澳大利亚的郊区，靠近我给的郊区

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-03T13:11:50.083

我编写了一个代码片段，允许您通过结合**Google Maps Geocoding API**和**GeoNames.org API**来检索所有附近的城市（除了**file_get_contents**，您还可以执行**cURL**请求）。

```
/*
 * Get cities based on city name and radius in KM
 */

// get geocode object as array from The Google Maps Geocoding API
$geocodeObject = json_decode(file_get_contents('https://maps.googleapis.com/maps/api/geocode/json?address={CITY NAME},{COUNTRY CODE}'), true);

// get latitude and longitude from geocode object
$latitude = $geocodeObject['results'][0]['geometry']['location']['lat'];
$longitude = $geocodeObject['results'][0]['geometry']['location']['lng'];

// set request options
$responseStyle = 'short'; // the length of the response
$citySize = 'cities15000'; // the minimal number of citizens a city must have
$radius = 30; // the radius in KM
$maxRows = 30; // the maximum number of rows to retrieve
$username = '{YOUR USERNAME}'; // the username of your GeoNames account

// get nearby cities based on range as array from The GeoNames API
$nearbyCities = json_decode(file_get_contents('http://api.geonames.org/findNearbyPlaceNameJSON?lat='.$latitude.'&lng='.$longitude.'&style='.$responseStyle.'&cities='.$citySize.'&radius='.$radius.'&maxRows='.$maxRows.'&username='.$username, true));

// foreach nearby city get city details
foreach($nearbyCities->geonames as $cityDetails)
{
    // do something per nearby city
} 
```

> 请注意您的请求数量，因为 API 是有限的

有关 API 的更多信息，请访问以下网址：

*   [https://developers.google.com/maps/documentation/geocoding/intro#GeocodingResponses](https://developers.google.com/maps/documentation/geocoding/intro#GeocodingResponses)
*   [http://www.geonames.org/export/web-services.html](http://www.geonames.org/export/web-services.html)

# c++ - gnuplot-iostream 不会编译

> ID：11649460
> 
> 赞同：2
> 
> 时间：2012-07-25T12:14:44.827
> 
> 标签：c++, boost, gnuplot

我想知道是否有人可以帮助我解决这个问题。

我从[http://www.stahlke.org/dan/gnuplot-iostream/](http://www.stahlke.org/dan/gnuplot-iostream/)检索到 gnuplot-iostream 接口的源代码。但是，当我尝试使用以下命令编译代码时：

```
]$ cmake .; make 
```

我收到以下编译器错误

```
/.../gnuplot-iostream.h: In constructor ‘Gnuplot::Gnuplot(const std::string&)’:
/.../gnuplot-iostream.h:427: error: ‘never_close_handle’ is not a member of ‘boost::iostreams’ 
```

我正在使用 Scientific Linux 6.2（内核 2.6.32-220.23.1.el6.x86_64）、g++ 4.4.6，并安装了 boost 库（/usr/include/boost/iostreams/ 存在）。

任何帮助将不胜感激。

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:30:11.273

`enum file_descriptor_flags``boost::iostreams`仅在 1.44.0 中添加。

```
enum file_descriptor_flags
{
    never_close_handle = 0,
    close_handle = 3
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:17:04.290

因此，解决方案是简单地更新 boost 库（感谢 ForEveR）。

但是，如果像我一样，您无权更新系统上的库，您应该注意，我能够通过简单地替换 gnuplot 中的两次 boost::iostreams::never_close_handle 来强制编译并获得基本功能-iostream.h 文件为 0。

# android - 在我的应用程序 APK 中包含早期版本的 android 框架 JAR？

> ID：11649463
> 
> 赞同：1
> 
> 时间：2012-07-25T12:14:51.627
> 
> 标签：android, jar, apk, android-4.2-jelly-bean

我已经构建了一个在 Android 2.3.* 和 4.0.* 上运行良好的 Android 应用程序。但是，在将我的设备升级到 Jelly Bean (4.1.1) 后，我发现我的应用程序不再正常工作（崩溃、ANR 等）。

作为临时解决方法，我想知道是否可以将 Android 框架 JAR 的早期版本（例如 Android 2.3）打包到我的 APK 中并强制我的所有代码使用该 JAR 中的类/API？

我认为在我的 APK 中包含 JAR 应该更容易。但我不知道如何强制我的代码在运行时使用 JAR 中的类/API。

我知道这不是一个体面的修复（黑客攻击、包大小、法律问题等），即使它会起作用。但我只是好奇这是否可行。

任何建议或提示将不胜感激！

## （编辑）

我尝试了以下方法：

1.  从 Android 2.3 ROM中提取**/system/framework/framework.odex ；**
2.  将其解译并将其转换为 JAR 文件（例如 framework.jar）；
3.  我验证了 framework.jar，它包含实际的框架代码，而不是存根方法；
4.  将framework.jar放入我项目的libs文件夹并构建APK；
5.  我验证了结果 APK 并且确实包含了 android 框架类。

但是，我的代码似乎仍在使用 Android 设备中安装的实际 SDK 版本的类/API。:(

## （编辑）

出于性能原因，Zygote 在系统启动期间似乎已经从设备（/system/framework/framework.odex）预加载了所有框架/核心类。所以即使我在我们的 APK 中包含了这些类，预加载的类仍然会被实例化。

这对我来说听起来像是一个死胡同...... :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:31:39.280

> 作为临时解决方法，我想知道是否可以将 Android 框架 JAR 的早期版本（例如 Android 2.3）打包到我的 APK 中并强制我的所有代码使用该 JAR 中的类/API？

这是不可能的，对不起。您认为的“Android 框架 JAR”没有代码——它只是 Android SDK 中公开的类和方法的存根实现。真正的 Android 框架驻留在固件中，您无法替换它。

# iphone - 从文档目录中的文件夹创建 ZIP 文件 - Objective C (ARC)

> ID：11649468
> 
> 赞同：5
> 
> 时间：2012-07-25T12:15:03.577
> 
> 标签：iphone, objective-c, ios, compression, automatic-ref-counting

我有一个使用 ARC 开发的 iPhone 应用程序。我的文档目录中有一个文件夹，其中包含一堆图像，我需要将其压缩并通过电子邮件发送。我的项目使用 ARC。

有没有人有任何示例代码/链接到对我有帮助的资源？

我一直在网上搜索，我发现的内容与 ARC 不兼容——即使它声称是。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T13:18:10.013

[从该链接http://code.google.com/p/objective-zip/downloads/list](http://code.google.com/p/objective-zip/downloads/list) (Objective-zip)下载 Objective-Zip、MiniZip 和 ZLib 并将其拖放到您的项目中。导入文件：ZipFile.h、ZipException.h、FileInZipInfo.h、ZipWriteStream.h、ZipReadStream.h、zlib.h

使用此代码。请看下面：

```
NSString *stringPath1 = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]];
    NSString *FileName=[stringPath1 stringByAppendingPathComponent:@"Your file name"];

    NSString *stringPath=[stringPath1 stringByAppendingPathComponent:[@"Your file name" stringByAppendingFormat:@".zip"]];
    NSArray *files = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:FileName error:&error];
    ZipFile *zipFile = [[ZipFile alloc]initWithFileName:stringPath mode:ZipFileModeCreate];

    for(int i = 0;i<files.count;i++){

        id myArrayElement = [files  objectAtIndex:i];
        NSLog(@"add %@", myArrayElement);

        NSString *path = [FileName stringByAppendingPathComponent:myArrayElement];
        NSDictionary *attributes = [[NSFileManager defaultManager]attributesOfItemAtPath:path error:&error];
        NSDate *Date = [attributes objectForKey:NSFileCreationDate];

        ZipWriteStream *streem = [zipFile writeFileInZipWithName:myArrayElement fileDate:Date compressionLevel:ZipCompressionLevelBest];
        NSData *data = [NSData dataWithContentsOfFile:path];
        [streem writeData:data];
        [streem finishedWriting];
    }

    [zipFile close]; 
```

# git - 将来自一个 git 存储库的特定提交应用到另一个

> ID：11649471
> 
> 赞同：0
> 
> 时间：2012-07-25T12:15:13.290
> 
> 标签：git, version-control, branch, dvcs, git-branch

我们正在开发针对我们公司产品的多个不同版本运行的自动化代码。

对于每个产品版本，我们的目标是在 Git 中保留一个专用的代码分支。

分支可能会出现分歧并包含不同的历史记录，但是对于某些可能对多个产品版本有价值的提交，我们希望能够将它们应用于其他分支而不是它们所在的分支。

我知道在开源世界中使用的一个选项是发送补丁（创建补丁并将它们应用到目标分支上）。

执行此操作的可能方法是什么？补丁是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:18:05.620

您正在寻找的是`git cherry-pick`.

鉴于您在您希望应用其他一些 repo 更改的 repo 中（例如`other/`）。`other`添加为遥控器后，您可以

```
$ git cherry-pick COMMIT 
```

例如，您要应用`COMMIT`的提交的哈希或名称在哪里。`other`

# java - java中同步块的替代方案

> ID：11649473
> 
> 赞同：10
> 
> 时间：2012-07-25T12:15:25.970
> 
> 标签：java, multithreading, synchronization, thread-safety, thread-synchronization

`startTime`我使用以下代码只设置一次保证变量：

```
public class Processor
{
    private Date startTime;

    public void doProcess()
    {
        if(startTime == null)
            synchronized(this)
            {
                  if(startTime == null)
                  {
                     startTime = new Date();
                  }
            }

        // do somethings
    }
} 
```

我将通过此代码保证只为任意数量的调用`process`方法调用实例化一次变量。

我的问题是：

我的代码是否有更简洁的替代方法？（用于示例删除`if`和`synchronized`语句）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T12:18:10.753

根据您的评论，您可以使用 AtomicReference

```
firstStartTime.compareAndSet(null, new Date()); 
```

或 AtomicLong

```
firstStartTime.compareAndSet(0L, System.currentTimeMillis()); 
```

* * *

我会用

```
private final Date startTime = new Date(); 
```

或者

```
private final long startTime = System.currentTimeMillis(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-25T12:19:34.997

使用[原子参考](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html)：

```
public class Processor {
  private final AtomicReference<Date> startTime = new AtomicReference<Date>();
  public void doProcess() {
    if (this.startTime.compareAndSet(null, new Date())) {
      // do something first time only
    }
    // do somethings
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T12:19:35.480

您的代码是所谓的“双重检查锁定”的示例。请阅读这篇[文章](http://www.javaworld.com/jw-02-2001/jw-0209-double.html)。它解释了为什么这个技巧在 java 中不起作用，尽管它非常聪明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T12:36:31.243

总结一下其他海报已经解释过的内容：

```
private volatile Date startTime;

public void doProcess()
{
   if(startTime == null) startTime = new Date();
   // ...
} 
```

对你来说够简洁了吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T12:43:17.437

因此，据我了解，您需要一个单例，即：

1.  简短，易于实施/理解。
2.  `doProcess`仅在被调用时初始化。

我建议使用嵌套类进行以下实现：

```
public class Processor {
    private Date startTime;

    private static class Nested {
        public static final Date date = new Date();
    }

    public void doProcess() {
        startTime = Nested.date; // initialized on first reference
        // do somethings
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T12:21:45.730

**1**您使用的称为`double checked locking`.

**2.**还有另外 2 种方法可以做到这一点

```
 - Use synchronized on the Method
  - Initialize the static variable during declaration. 
```

**3.**由于您想要一个带有 No`if`和`synchronized`关键字的示例，我正在向您展示`Initialize the static variable during declaration.`方式。

```
public class MyClass{

  private static MyClass unique = new MyClass();

  private MyClass{}

  public static MyClass getInstance(){

      return unique;

  }

 } 
```

# javascript - 如何在页面加载时将当前时间和日期的这种格式设置为默认值？

> ID：11649491
> 
> 赞同：2
> 
> 时间：2012-07-25T12:16:24.070
> 
> 标签：javascript, jquery, jquery-plugins, mobiscroll

我正在使用一个让我选择日期和时间的 jQuery 脚本。但是，在页面加载时，文本框中没有任何日期+时间。我想像下面的格式一样显示当前的日期和时间。

**2012-07-25 15:10**

```
 $(function () {
            var now = new Date();

            $('#date').scroller({
                preset: 'datetime',
                minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
                dateFormat: 'yy-mm-dd',
                timeFormat: 'HH:ii',

            }).val('what should I write here?');
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:28:06.690

这可能是你想要的：

```
$('#date').val($.scroller.formatDate('yy-mm-dd HH:ii', now)); 
```

或者简单地说：

```
$('#date').scroller('setDate', now, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:30:14.483

[文档](http://docs.mobiscroll.com/)说明您可以使用该方法设置日期`setDate`。

> ```
> .scroller('setDate', date, fill, time) 
> ```
> 
> 如果选择了预设，则从作为 Date 对象传递的日期参数中设置滚动日期/时间。如果 'fill' 参数为真，则关联的输入字段也将更新为新值。'time' 参数以秒为单位指定动画的持续时间，以将轮子滚动到新日期。如果未指定“时间”，则没有动画

所以我想这样的事情应该有效：

```
var now = new Date();

$('#date')
    .scroller({
        preset: 'datetime',
        minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate(),
        dateFormat: 'yy-mm-dd',
        timeFormat: 'HH:ii',
    })
    .scroller('setDate', now, true); 
```

# android - Android 从应用文件夹创建图片库

> ID：11649505
> 
> 赞同：0
> 
> 时间：2012-07-25T12:16:59.677
> 
> 标签：android, android-imageview, android-gridview

我正在开发一个应用程序，我的一项活动是一个屏幕，它可以抓取我在 /data/ 应用程序文件夹中创建的文件夹中的所有图像。我想抓取所有照片以网格格式排列，然后当一个人点击一张时，它会将其放大到全尺寸。当然，当新图像添加到文件夹时，这个图库需要更改。

似乎这将是一些简单的事情，但我在实现这一点时遇到了一些麻烦，我一直在寻找许多不同的解决方案，其中似乎都不是正确的。

我假设这将是某种 gridview/listadapter 组合。

这个问题的最佳解决方案是什么？

编辑

我研究了这些解决方案 [http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/) http://developer.android.com/guide/topics/ui/layout/gridview.html#例子

但我的困惑是这样的代码

```
private Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7
}; 
```

我该怎么办，因为我的应用程序文件夹中的图像数量会不断变化。以及如何首先从该文件夹中加载图像哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:44:00.103

您看过Android 开发者网站中的[缓存位图吗？](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)我认为它做的事情类似于你想要的。它还提供了示例的代码。

您最好将图像存储在 sd 卡内的路径中，因为它们需要动态更改。然后要从该路径获取图像路径，请使用以下内容（假设您只有该目录中的图像）：

```
File imagesDir = new File(Environment.getExternalStorageDirectory(), "yourpath");
for (File f : yourDir.listFiles()) {
   if (f.isFile())
      String image_path = f.getPath();
      // make something with the name
} 
```

此外，要从 sd 中的文件加载位图，请使用以下内容：

```
Bitmap b = BitmapFactory.decodeFile("your_image_path"); 
```

请记住加载位图的缩小版本以提高内存效率。请参阅[此处](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)了解更多信息。

希望能帮助到你。

# django - Django FileField 上传

> ID：11649510
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:13.143
> 
> 标签：django

我很困惑。

我在我的网站上写了一个上传表格。一切正常..

但是，我读到我需要实现一个像 handle_uploaded_file 这样的函数来将文件内容从 request.FILES 转储到物理文件。

但是，我没有做任何文件存在于我在 FileField 字段中设置 upload_to 的位置。一切都按预期工作..

我错过了什么吗？那我为什么需要handle_uploaded_file？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:31:27.627

不，你不需要做一个handle_uploaded_file。当您保存对象（form.save）时，Django 已经为您完成了这项工作。

看看这个： [https ://github.com/django/django/blob/master/django/db/models/fields/files.py#L270-276](https://github.com/django/django/blob/master/django/db/models/fields/files.py#L270-276)

# android - 如何从我的 android 应用程序中打开默认浏览器设置？

> ID：11649516
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:37.120
> 
> 标签：android, settings

根据我的要求，我必须从我的应用程序中清除默认浏览器缓存。我想从我的应用程序中打开浏览器设置，以便用户可以清除缓存。通过使用以下代码。

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS), 0); 
```

我能够打开所有管理应用程序。有没有办法直接打开浏览器设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:29:08.387

应用程序的设置存储在应用程序的 Shared Preferences 中，每个应用程序默认有不同的目录来存储它。对于您的互联网浏览器，设置存储在“data/data/com.android.browser/shared-prefs/”目录中。有一个名为“com.android.browser_preferences.xml”的 XML 文件具有这些设置。通过共享首选项访问此文件并进行更改。代码。

```
String path = "data/data/com.android.browser/shared-prefs/";
String file = "com.android.browser_preferences.xml";
SharedPreferances setting = getSharedPreferances(path+file, MODE_PRIVATE, null);
SharedPreferances.editor edit = setting.edit(); 
```

# android - 启动不再可见状态的 Android 应用程序

> ID：11649517
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:45.160
> 
> 标签：android, android-layout, android-intent, android-widget

我的问题是当 Android 应用程序进入后台时。当我单击主页按钮并通过单击应用程序图标从主屏幕再次启动我的应用程序时，它应该显示与我进入主屏幕相同的屏幕。但它调用该`onDestory()`方法然后从我的应用程序中出来。我认为应用程序由于内存需求等原因被系统杀死，但我需要保持活动，它应该再次显示我离开的同一个屏幕，而不是重新开始。

这可以像维护会话一样实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:54:44.493

试着把

```
android:alwaysRetainTaskState="true" 
```

在这些活动的 androidmanifest.xml 中，我认为 ICS 现在默认情况下会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:30:34.640

如果您的应用程序具有不同的屏幕由不同的活动组成以显示界面部分，则应用程序将在“主页”按钮后返回时向您显示相同的屏幕...但是如果您只是制作一些对象

可见=真或假

所以，在恢复之后你会看到第一个视图......尝试在不同的活动之间使用 Intents......并显示一段代码来帮助你......也许问题在于覆盖 onDestroy、onPause、onResume 方法

# php - 如何使用 PHP 将 xsi:nil="true" 添加到 xml 元素

> ID：11649518
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:50.237
> 
> 标签：php, xml, simplexml, xml-nil

我希望有人可以帮助我解决这个问题。我有一个生成 XML 文件的脚本：

```
<Reeleezee version="1.15" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.reeleezee.nl/taxonomy/1.15 taxonomy\1.15\Reeleezee.xsd" xmlns="http://www.reeleezee.nl/taxonomy/1.15">
<Import>
    <CustomerList>
        <Customer>
            <ID/>
            <FullName>Dennis Rijken</FullName>
            <SearchName>Dennis Rijken</SearchName>
            <Code/>
            <DefaultAddress>Office</DefaultAddress>
            <LanguageCode>nl</LanguageCode>
            <FaxNumber/>
            <EmailAddress/>
            <WebsiteAddress/>
            <Comment/>
            <ChamberOfCommerceNumber/>
            <ChamberOfCommerceCity/>
            <FiscalIdentificationNumber/>
            <TaxDepositLHNumber/>
            <TaxDepositOBNumber/>
            <TaxDepositICLNumber/>
            <BankAccountNumber/>
            <BranchReference/>
            <AddressList>
                <Address Type="Office">
                    <Street>Stuivenes</Street>
                    <Number>11</Number>
                    <Zipcode>3911 XX</Zipcode>
                    <City>Rhenen</City>
                    <CountryCode>NL</CountryCode>
                </Address>
            </AddressList>
            <ContactPersonList>
                <ContactPersonReference/>
            </ContactPersonList>
        </Customer>
    </CustomerList>
</Import> 
```

但它应该是这样的：

```
<Customer RlzID="23232.51.8C8D54156584290">
            <ID xsi:nil="true" />
            <FullName>GPXS</FullName>
            <SearchName>GPXS</SearchName>
            <Code xsi:nil="true" />
            <DefaultAddress>Office</DefaultAddress>
            <LanguageCode>nl</LanguageCode>
            <PhoneNumber xsi:nil="true" />
            <FaxNumber xsi:nil="true" />
            <EmailAddress xsi:nil="true" />
            <WebsiteAddress xsi:nil="true" />
            <Comment xsi:nil="true" />
            <ChamberOfCommerceNumber xsi:nil="true" />
            <ChamberOfCommerceCity xsi:nil="true" />
            <FiscalIdentificationNumber xsi:nil="true" />
            <TaxDepositLHNumber xsi:nil="true" />
            <TaxDepositOBNumber xsi:nil="true" />
            <TaxDepositICLNumber xsi:nil="true" />
            <BankAccountNumber xsi:nil="true" />
            <BranchReference xsi:nil="true" />
            <AddressList>
                <Address Type="Office">
                    <Street>Stephensonstraat</Street>
                    <Number>19</Number>
                    <Zipcode>1097 BA</Zipcode>
                    <City>Amsterdam</City>
                    <CountryCode>NL</CountryCode>
                </Address>
                <Address Type="Delivery" xsi:nil="true" />
            </AddressList>
            <ContactPersonList>
                <ContactPersonReference RlzID="23232.89.8CA58ACEACD0560" />
            </ContactPersonList>
        </Customer> 
```

PHP脚本生成的xml如下：

```
$query = "SELECT orders.id AS orderid, DATE_FORMAT(orders.datum, '%d-%m-%Y %k:%i:%s') AS datum, orders.bedrag, debiteur.naam, debiteur.achternaam, debiteur.adres, debiteur.huisnummer, debiteur.toevoeging, debiteur.postcode, debiteur.plaats, debiteur.rek_nummer, debiteur.email
FROM orders 
LEFT JOIN debiteur ON orders.debiteur_id = debiteur.id";

$result = mysql_query($query) or die(mysql_error());

$exportXML = new SimpleXMLElement("<Reeleezee></Reeleezee>");
$import = $exportXML->addChild('Import');

 $customerlist = $import->addChild('CustomerList');

while($res = mysql_fetch_array($result, MYSQL_ASSOC)){

$customer = $customerlist->addChild('Customer');
$customer->addChild('ID');
$customer->addChild('FullName', $res['naam']." ".$res['achternaam']);
$customer->addChild('SearchName', $res['naam']." ".$res['achternaam']);
$customer->addChild('Code');
$customer->addChild('DefaultAddress', 'Office');
$customer->addChild('LanguageCode', 'nl');
$customer->addChild('FaxNumber');
$customer->addChild('EmailAddress');
$customer->addChild('WebsiteAddress');
$customer->addChild('Comment');
$customer->addChild('ChamberOfCommerceNumber');
$customer->addChild('ChamberOfCommerceCity');
$customer->addChild('FiscalIdentificationNumber');
$customer->addChild('TaxDepositLHNumber');
$customer->addChild('TaxDepositOBNumber');
$customer->addChild('TaxDepositICLNumber');
$customer->addChild('BankAccountNumber');
$customer->addChild('BranchReference');

$addresslist = $customer->addChild('AddressList');
$address = $addresslist->addChild('Address');
$address->addAttribute('Type', 'Office');
$address->addChild('Street', $res['adres']);
$address->addChild('Number', $res['huisnummer']);
$address->addChild('Zipcode', $res['postcode']);
$address->addChild('City', $res['plaats']);
$address->addChild('CountryCode', 'NL');

$contactpersonlist = $customer->addChild('ContactPersonList');
$contactpersonlist->addChild('ContactPersonReference');

}

Header('Content-type: text/xml');
$strxml = $exportXML->asXML();

$root = '<Reeleezee version='.'"1.15"'.' xmlns:xsi='.'"http://www.w3.org/2001/XMLSchema-instance"'.' xsi:schemaLocation='.'"http://www.reeleezee.nl/taxonomy/1.15 taxonomy\1.15\Reeleezee.xsd"'.' xmlns='.'"http://www.reeleezee.nl/taxonomy/1.15"'.'>';

 $newxml = str_replace("<Reeleezee>", $root, $strxml);
 //echo $newxml;
 file_put_contents("test.xml", $newxml); 
```

如何将**xsi:nil="true"**添加到 XML-element ？

有人能帮帮我吗？以及如何定义 XML 元素类型，如整数、字符串等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:38:46.713

如果需要命名空间，则必须将命名空间的前缀 + 属性的名称（“prefix:name”）作为第一个参数，并将 uri 作为第三个参数。

示例代码：

```
 <?php
   $xml = new SimpleXMLElement("<packagedElement></packagedElement>");
   $xml->addAttribute("xsi:nil", "true", "http://www.w3.org/2001/XMLSchema-instance"); 
   echo $xml->asXml();
 ?> 
```

输出：

```
<packagedElement xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"></packagedElement> 
```

**编辑：**

在你的情况下：（试试这个）

改变

```
 $customer->addChild('ID'); 
```

到

```
 $customer->addChild('ID')->addAttribute("xsi:nil", "true"); 
```

# xquery - Marklogic 中的日期格式问题

> ID：11649519
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:53.613
> 
> 标签：xquery, marklogic

我`xdmp:document-filter(doc(uri))`用来从文档中获取元数据。当我在其中一个文档上运行此命令时，我得到以下结果：-

xdmp:document-filter(doc("/Vision.doc"))//*:meta[@name eq "Creation_Date"]/@content

```
<?xml version="1.0" encoding="UTF-8"?>
<results warning="attribute node">
  <warning warning="attributes cannot be root nodes" content="17-05-2012 00:48:00"/>
</results> 
```

当我在另一个文档上运行这个命令时，我得到了这个： -

```
<?xml version="1.0" encoding="UTF-8"?>
<results warning="attribute node">
  <warning warning="attributes cannot be root nodes" content="2012-06-03T13:45:00Z"/>
</results> 
```

您可以看到两个输出中的日期格式不同。在 Marklogic Server 中上传的文档中可能有不同的日期格式。但我想以某种固定格式显示文档的创建日期（例如 2012 年 5 月 16 日）。如何将不同的日期格式转换为固定的日期格式？而且我想将这些日期与用户输入的日期进行比较。匹配搜索条件的文档应由搜索查询返回。所以我在这里有两个问题：-

1.  如何将特定文档的创建日期转换为某种固定格式并在 UI 中显示。
2.  如何将此创建日期与用户输入的日期（格式为“mm/dd/yyyy”）进行比较，以便获得正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:05:45.433

您将不得不解析 dateTime 值。例如：

```
let $dt := "17-05-2012 00:48:00"
return
  if ($dt castable as xs:dateTime)
  then xs:dateTime($dt)
  else xdmp:parse-dateTime("[Y01]-[M01]-[D01] [h01]:[m01]:[s01]", $dt) 
```

这将返回一个`xs:dateTime`原子值，可以在 UI 中进行比较和显示。如果您想支持其他格式，则需要创建其他解析“图片”字符串，以便它们也可以转换为`xs:dateTime`. `xdmp:parse-dateTime()`有关更多信息，请参阅文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:36:54.953

作为一个更大的开源项目的一部分，我制作了一个日期解析库，它可以处理至少 20 种不同格式的 6 种不同语言。如果尚未定义格式，您也可以提供自己的格式。它的工作方式是将日期作为任何已定义格式的字符串提供给它，`xs:dateTime`如果它能够成功解析它，则返回一个。你可以在这里找到图书馆：

[https://github.com/marklogic/Corona/blob/master/corona/lib/date-parser.xqy](https://github.com/marklogic/Corona/blob/master/corona/lib/date-parser.xqy)

要使用它：

```
import module namespace dateparser="http://marklogic.com/dateparser" at "date-parser.xqy";

dateparser:parse($filteredDocument//*:meta[@name eq "Creation_Date"]/@content) 
```

这将允许您规范化二进制文档可以具有的各种日期格式。我会注意到不同的二进制格式（Word、PDF、JPEG 等）将使用不同的名称来表示创建日期。因此，仅查找“Creation_Date”元数据可能会留下一些漏洞，具体取决于您在 MarkLogic 中存储的格式。

另请注意，如果您只想要没有时间部分的日期信息，您可以`xs:dateTime`将`xs:date`. 这样做将保留时区信息，这可能是一件好事。

至于你的第二个问题……</p>

有许多不同的方法可以做到这一点，阅读一些 MarkLogic 文档是一个很好的起点。我建议看看：

[http://docs.marklogic.com/guide/search-dev/rangequery](http://docs.marklogic.com/guide/search-dev/rangequery)

希望这将对您的查询需要的外观有所了解。以最简单的形式，您可能必须首先解析用户提供的日期。这也可以使用日期解析库来完成，因此用户可以输入大量不同的日期格式（例如：2012 年 11 月 13 日，甚至是西班牙文 Noviembre 13th, 2012）。然后使用解析的日期在 MarkLogic 中构建日期范围查询。

如果那没有帮助，我会在此处发布另一个问题，说明您挂断电话的具体位置。

# sql-server-2008 - 如何计算记录数以及从查询中获取记录？

> ID：11649520
> 
> 赞同：0
> 
> 时间：2012-07-25T12:17:54.217
> 
> 标签：sql-server-2008

我有 3 个表 A、B 和 C。在存储过程中，我使用查询来获取结果，但我还想要从上述查询中获得的记录总数。这可能吗。我尝试使用这样的东西

```
Select count(*) 
from (
   select A.Name,B.Address,C.grade 
   from A,B,C 
   where A.id=B.id 
   AND B.Tlno=C.tlno
) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:20:50.987

(1) 停止使用旧式 x,y,z 连接。

```
SELECT A.Name,B.Address,C.grade 
  FROM dbo.A
  INNER JOIN dbo.B ON A.id = B.id
  INNER JOIN dbo.C ON B.Tlno = C.tlno; 
```

(2) 您可以将 count(*) over() 添加到整个结果集中。这有点浪费，因为它返回每一行的计数：

```
SELECT A.Name, B.Address, C.grade, row_count = COUNT(*) OVER ()
  FROM dbo.A
  INNER JOIN dbo.B ON A.id = B.id
  INNER JOIN dbo.C ON B.Tlno = C.tlno; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:20:43.430

您可以使用窗口功能：

```
select A.Name,
       B.Address,
       C.grade,
       count(*) over () as total_count
from A,B,C 
where A.id=B.id 
AND B.Tlno=C.tlno 
```

这将返回每一行的总计数（但所有行的数字都是相同的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:35:14.520

使用如下表变量

```
 declare @num table (accname varchar(200),subnet varchar(200))
    insert into @num(accname,subnet) Select a.accountname,s.subnet from tbl_accounts  a,tbl_accountsubnet s where a.accountid=s.accountid
    select COUNT(*) from @num; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:26:50.263

替代方法是使用 @@rowcount 关键字：

```
SELECT A.Name, B.Address, C.grade, @@rowcount
FROM dbo.A
INNER JOIN dbo.B ON A.id = B.id
INNER JOIN dbo.C ON B.Tlno = C.tlno; 
```

但是与窗口函数的结果相同，因此您可以获得每行的总数。我很好奇两者之间是否存在性能差异......（不幸的是，我当前的客户没有 SHOWPLAN 权限）

# jsf-2 - 在 JSF 中将 InputStream 显示为动态图像

> ID：11649524
> 
> 赞同：2
> 
> 时间：2012-07-25T12:17:56.903
> 
> 标签：jsf-2, inputstream, omnifaces, graphicimage

我们如何`InputStream`使用 OmniFaces 在 JSF 2.0 中嵌入和显示动态图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:21:03.083

OmniFaces 尚未为此提供任何实用程序。

如果图像文件位于磁盘文件系统上，那么您需要在 servletcontainer 配置中创建一个虚拟上下文，以便可以通过普通 URL 访问它们。另请参阅[使用 <h:graphicImage> 或 <img> 标签从 webapps/webcontext/deploy 文件夹外部加载图像](https://stackoverflow.com/questions/4543936/load-images-from-outside-of-webapps-webcontext-deploy-folder-using-hgraphi)。

如果图像文件存储在数据库中，那么您需要创建一个简单的 servlet，它将`InputStream`图像从数据库写入`OutputStream`HTTP 响应。另请参阅[如何在 JSP 页面中从数据库中检索和显示图像？](https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page)（请注意，这不需要 JSP/HTML，您可以直接使用`<h:graphicImage>`它，因为它只生成一个 HTML`<img>`元素）。

有 PrimeFaces `<p:graphicImage>`，但这实施起来有点不直观。另请参阅[使用 p:graphicImage 和 StreamedContent 显示来自数据库的动态图像](https://stackoverflow.com/questions/8207325/display-dynamic-image-from-database-with-pgraphicimage-and-streamedcontent)。

* * *

**更新**：由于 OmniFaces 2.0（对于 JSF 2.2），有一个[`<o:graphicImage>`](http://showcase.omnifaces.org/components/graphicImage)组件支持以直观的方式直接引用托管 bean 中的`byte[]`or`InputStream`属性，如下所示：`@ApplicationScoped`

```
<o:graphicImage value="#{imageStreamer.getById(bean.imageId)}" /> 
```

```
@Named
@ApplicationScoped
public class ImageStreamer {

    @Inject
    private ImageService service;

    public InputStream getById(Long id) { // byte[] is also supported.
        return service.getContent(id);
    }

} 
```

与 PrimeFaces 不同`<p:graphicImage>`，不需要`<f:param>`，并且 EL 方法参数在渲染响应阶段进行评估，但 EL 方法本身仅在浏览器实际请求图像时才被调用。另请参阅有关该主题[的展示](http://showcase.omnifaces.org/components/graphicImage)和[博客](http://balusc.blogspot.nl/2014/11/omnifaces-20-released.html)。

# javascript - 如果按下后退按钮，如何让用户保持在同一页面中？

> ID：11649527
> 
> 赞同：1
> 
> 时间：2012-07-25T12:18:03.983
> 
> 标签：javascript, jquery, html, back-button

> **可能重复：**
> [如何禁用 IE 和 Firefox 中的后退按钮？](https://stackoverflow.com/questions/780718/how-to-disable-back-button-in-ie-and-firefox)

我正在开发一个单页网站（DAM）。要进入此站点，用户必须经过身份验证。登录后，如果用户单击后退按钮，他将看到登录页面。登录页面不在我的控制范围内，意味着它是由 oracle 内容管理系统提供的，所以我无法在其中添加任何代码。

我应该在我的页面中添加什么代码，以便如果按下后退按钮，他将被导航到同一页面。

我曾尝试使用 onbeforeunload 并且有效，但我不想要任何确认消息，只想留在该页面上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:21:27.470

这是不可能的，因为它被明确设计为以这种方式工作 - 如果用户点击“返回”，浏览器*必须*返回到前一页。有一些不可靠的技术，但最终它们都因某种原因而失败。

但是...我想在您的情况下，您可以进行双重重定向并在登录后立即处理登录页面中的“后退”按钮？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:25:55.497

## 具有良好可用性的单页应用程序如何工作

如果您想增加页面的用户体验和可用性因素，您应该使用页面哈希/片段。我不会提供与其他人相同（或相似）的代码，而是*升级*体验。

### 那么那个UX怎么样

每次更改其工作上下文时，您的单页 Web 应用程序都应该更改哈希值。这可能是由用户在 UI 中执行的用户界面或业务流程定义的，或者甚至可能是此类流程的各个步骤（当预期用户将/应该返回到先前的流程状态时）。

这样，您的应用程序的功能将类似于由多个页面组成的普通 Web 应用程序，并在相同的业务流程及其步骤的基础上创建新的历史条目（在这种情况下，步骤通常是整页回发）。

因此，当您可以更改页面片段时，业务流程和将您的应用程序视为普通的多页应用程序将为您提供许多有用的点。由于您可以控制这一点，因此您可以提供比多页 Web 应用程序更好的粒度（通常更少）。

### 多页应用历史点数过多的简单例子

表单帖子通常总是有问题的，所以在回发响应之后有一个历史点总是不好的，因为用户点击 F5 会一遍又一遍地重新发送相同的表单（好的浏览器确实会询问您是否重新发送帖子数据，但这仍然是糟糕的体验）。

### 页面碎片是要走的路，只需进一步使用它，而不仅仅是阻止返回登录页面。

完全防止登录页面进入历史堆栈将通过将其显示在您的页面上的`iframe`. 您当然需要检测未经身份验证的用户并添加`iframe`自己并在其中加载登录名。用户验证后，您应该重新加载您自己的页面。但是您应该知道，检测登录成功不是一个简单的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:25:31.983

```
window.location.replace(URL); 
```

将当前文档替换为提供的 URL 中的文档。与 assign() 方法的不同之处在于，在使用 replace() 之后，当前页面将不会保存在会话历史记录中，这意味着用户将无法使用后退按钮导航到该页面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T13:41:20.790

```
function win_onkeydown_handler()
{
switch (event.keyCode){

case 116 : // 'F5'
event.returnValue = false;
event.keyCode = 0;
alert("Refresh Not Allowed");
break;
case 08 : // 'BS'
if(event.srcElement.tagName=="INPUT" || event.srcElement.tagName=="DIV")
{
}
else{
event.returnValue = false;
event.keyCode = 0;
//alert("Backspace Not Allowed");
}
break;
case 17 : // ctrl key   
 event.returnValue = false;
 event.keyCode = 0;
 alert('Control Key restricted');
 }
 } 
```

**即使我在我的项目中得到了这个，但我曾经使用上面的脚本在那个页面上阻止它......如果你需要阻止后退空间，你可以单独使用那个代码**

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-25T12:22:58.643

您不能控制客户端浏览器。由于某些安全问题，不允许脚本控制客户端浏览器。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-25T13:58:37.297

试试这个，它会解决你的问题：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<input type="button" value="Back" onclick="history.go(0);return true;" />
</body>
</html> 
```

干杯！！！！

# ruby-on-rails-3 - 如何在 CSS 中为 wicked_pdf 使用背景图像

> ID：11649530
> 
> 赞同：2
> 
> 时间：2012-07-25T12:18:13.843
> 
> 标签：ruby-on-rails-3, wkhtmltopdf, wicked-pdf

我正在使用带有 rails 3.0 项目的 wicked_pdf 插件。我想用css文件中的图像定义背景。

这是我的CSS代码

```
.thumb-image {
    background: url(http://localhost:3000/images/pdf/ideathumbbg.png) no-repeat left top;
    width: 1979px;
    height: 946px;
    position: relative;
    padding: 54px;
    text-align: center;
    margin-bottom: 15px;
} 
```

这没有找到ideathumbbg.png，它确实在生成的pdf中呈现ideathumbbg.png。

是否可以在 css 文件中使用 wicked_pdf_image_tag 助手？或针对此问题的任何其他最佳解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:31:02.397

wkhtmltopdf 无法将 png 或 gif 图像渲染为背景：

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=544](http://code.google.com/p/wkhtmltopdf/issues/detail?id=544)

尝试将背景图像转换为 jpg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T10:09:09.710

我通过使用 SASS [asset-data-urlrelative-asset-path](https://github.com/rails/sass-rails#asset-data-urlrelative-asset-path)解决了这个问题，也许你可以使用这样的东西：

```
background-image: asset-data-url('ideathumbbg.png') 
```

# php - 将 MySQL 连接详细信息存储为 PHP (PDO) 中的函数

> ID：11649535
> 
> 赞同：0
> 
> 时间：2012-07-25T12:18:30.013
> 
> 标签：php, mysql, function, pdo

我正在尝试 PDO 扩展，并且想知道是否可以将 DB 连接的打开存储为可以在需要时调用的函数。我尝试了一些基本的东西，但它似乎不起作用。它可以？

**示例函数**

```
function DB() {
$conn = new PDO('mysql:host='.DB_HOST.';dbname='.DB_NAME, DB_USER, DB_PASS);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
if (!$conn) {
    echo "<br />MySQL SERVER CONNECTION ERROR.<br />\n";
}
if($conn) {
    return $conn;
}
} 
```

**示例用法**

```
function is_post_id($submitted) {

try {
    $id = $submitted;
    DB();   

    //check to see if there is a post
    //with an id matching the submitted query
    $qPOST= $conn->prepare('SELECT COUNT(*) FROM posts WHERE id = :id');
    $qPOST->execute(array('id' => $id)); 

    //results counted
    $cPOST= (int)$qPOST->fetchColumn();
    if($cPOST > 0) {
        return TRUE;
    }
    else {
        return FALSE;
    }
} catch(PDOException $e) {
    echo $e->getMessage();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:21:37.663

称之为：

$conn = $this->DB();

或者

$conn = $className->DB();

# clickonce - 如何以编程方式检索 ClickOnce 更新程序应用程序？

> ID：11649539
> 
> 赞同：0
> 
> 时间：2012-07-25T12:18:40.690
> 
> 标签：clickonce

我有一个 ClickOnce 应用程序，我想根据用户的选择在每次计算机启动时运行它。为此，我将应用程序的可执行文件添加到注册表。但这会直接启动应用程序，跳过 ClickOnce 搜索更新。所以我需要 ClickOnce 应用程序的路径才能在注册表中正确设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:59:57.570

执行 .appref-ms 文件，开始菜单快捷方式（在安装 ClickOnce 时创建）执行。这就是我们在 VB.Net 中所做的：

```
Dim FilePath As String = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu) + "\Programs\[your publisher name]\[your app name]"
Static p As Process

Dim files As String()

Try
    files = Directory.GetFiles(FilePath, "[your shortcut name]*.appref-ms")
Catch ex As Exception
    '' an exception is thrown if no matching file exists
    '' you can open your ClickOnce URL in a webbrowser control here
    Return
End Try

If files.Length = 1 Then
    Dim psi As ProcessStartInfo = New ProcessStartInfo(files(0))
    psi.Arguments = "" 
    psi.WorkingDirectory = FilePath
    psi.UseShellExecute = True
    psi.CreateNoWindow = False
    psi.WindowStyle = ProcessWindowStyle.Normal
    psi.RedirectStandardOutput = False
    psi.RedirectStandardError = False

    Try
        p = Process.Start(psi)
        p.WaitForExit(50)
        p.Close()
    Catch ex As Exception
        ' handle error
    End Try
Else
    ' more than one would be an anomaly
    If files.Length > 1 Then
        Dim f As String
        For Each f In files
            File.Delete(f)
        Next
    End If

    '' you can open your ClickOnce URL in a webbrowser control here
End If 
```

# python - Python接口支持的链接速度

> ID：11649546
> 
> 赞同：2
> 
> 时间：2012-07-25T12:18:56.433
> 
> 标签：python, networking

获得支持的接口链接速度的首选和跨平台（Ubuntu、Redhat）方法是什么？

我熟悉 ethtool，但我想要一个不使用外部工具的选项，而只使用 python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:20:57.733

实际上有一个 python 模块为 ethtool 内核接口提供绑定。这听起来像你在找什么。有关详细信息，请参阅[https://github.com/fedora-python/python-ethtool](https://github.com/fedora-python/python-ethtool)。

# mysql - 查询优化，不在

> ID：11649556
> 
> 赞同：0
> 
> 时间：2012-07-25T12:19:34.250
> 
> 标签：mysql, query-optimization

在页面上，我有一个查询，即降低页面加载速度。

```
SELECT * FROM users1 WHERE user_id NOT IN (SELECT user_id FROM users2) 
```

`USERS1`是该站点所有用户的表，有很多数据。 `USERS2`是互相关注用户的表。

因此，我需要选择一些尚未关注的用户。

有什么优化方法吗？

我正在发布真正的查询：

```
SELECT users.*
FROM (
    SELECT user_id
    FROM users
    WHERE user_id!=156 AND user_id NOT IN (
        SELECT follower_id
        FROM following
        WHERE user_id=156
    ) ORDER BY RAND() LIMIT 2
) AS temp
JOIN users ON users.user_id = temp.user_id; 
```

`user_id`字段索引。

查询耗时 0.0912 秒

此查询在数据较少的测试服务器上运行良好，但在实时查询服务器上最多需要 3 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:23:02.513

`LEFT JOIN`方法：

```
SELECT *
FROM users1
LEFT JOIN users2 ON users1.user_id = users2.user_id
WHERE users2.user_id IS NULL 
```

`NOT EXISTS`方法：

```
SELECT *
FROM users1
WHERE NOT EXISTS (SELECT 1 FROM users2 WHERE users1.user_id = users2.user_id) 
```

工作示例：[http ://sqlfiddle.com/#!2/611f2/1](http://sqlfiddle.com/#!2/611f2/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:22:31.560

您应该使用`LEFT JOIN`以下方式获得最佳性能：

```
SELECT a.* 
FROM users1 a
     LEFT JOIN users2 b
        ON a.user_id = b.user_id
WHERE b.user_id IS NULL; 
```

也看看[联接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:22:28.453

这应该可以解决问题：

```
SELECT users1.* FROM users1
LEFT JOIN users2 on users1.user_id=users2.user_id
WHERE users2.user_id IS NULL 
```

# python - Django中的状态对象

> ID：11649559
> 
> 赞同：0
> 
> 时间：2012-07-25T12:19:41.707
> 
> 标签：python, django, state, state-machine

我的问题如下：

我正在为机器学习问题实施标签系统。所以简而言之：一个复杂的对象应该得到一个简单的标签信息（如标签）。每个对象应该只有一个标签，并且标签集是有限且静态的。（例如：我想将一个动物对象的所有属性标记为信息 CAT、DOG 等）

所以我有一个项目对象。我想将其保存为带有我的标签对象之一（myAnimal，标签）的元组。这个对象应该只携带一个信息（例如 DOG）。我怎样才能做到这一点？我想到了一个包含一些布尔值的对象，并且我想要设置一个布尔值，但这似乎不是一个好的解决方案，因为可以设置多个布尔值。

我搜索了一个简单的类似枚举的解决方案，但没有发现任何令人满意的结果。

如果你能在这里帮助我，那就太好了；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:56:27.073

由于您的标签是静态的并且是预定义的：

```
TAGS = ((1,'DOG'),(2,'CAT'),(3,'HORSE')) # and so on

class MyThing(models.Model):
   name = models.CharField(max_length=200)
   tag = models.IntegerField(choices=TAGS) 
```

使用此模型，您的事物只能有一个标签，并且您可以获得对象的关联标签，因此：

```
foo = MyThing.objects.order_by('?')[0] # get some random object
print 'My object is a ',foo.get_tag_display() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:53:07.833

有一些关系的简单模型呢？

```
class LabeledItem(models.Model):
   my_object= models.OneToOneField(Item)
   label = models.CharField() 
```

label 属性也可以是 OneToOneField，例如具有名称作为字段属性的 Label 模型。

# android - 我的启动画面有问题，因为我没有进入下一个活动

> ID：11649563
> 
> 赞同：0
> 
> 时间：2012-07-25T12:20:00.953
> 
> 标签：android, splash-screen

这是一个启动屏幕的示例，但由于我无法查看我的 MainActivity 类，无法识别问题，因此遇到了困难。通过更改操作和类别名称在清单文件中进行了尝试，但无法能够解决它。

基本上也改变了我`Intent intent = new Intent();`的，但仍然如此。

```
 public class SplashActivity extends Activity
    {

        MediaPlayer player;

        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.splash);

            player = MediaPlayer.create(SplashActivity.this, R.raw.splash);
            player.start();
            Thread timer = new Thread() 
            {

                @Override
                public void run() 
                {
                    try
                    {               
                        sleep(4000);

                    }catch(InterruptedException e)
                    {
                        e.printStackTrace();
                    }

                        finish();
                        Intent intent = new Intent();
                        intent.setClass(SplashActivity.this, MainActivity.class);
                        startActivity(intent);
                        stop();

                }
            };
            timer.start();

        }

        @Override
        protected void onPause() 
        {
            super.onPause();
            player.release();
            finish();
        }

    } 
```

> ====>这是我的清单文件——

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mainsplashcreen"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/android_splash"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity android:name=".SplashActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:25:14.620

我猜你的问题是，你在开始新的活动之前完成了你的活动。如果您调用`finish()`您的活动，它将被销毁，因此`startActivity()`将不再被调用（或者如果将被调用，它将不再获得有效的上下文）。因此，尝试在方法结束时移动 finish() 方法`run`，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:34:50.477

另一种非常**简短、简单且有效**的实现 Flash 屏幕的方法如下：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        Handler handler=new Handler();
        Runnable gotoMain=new Runnable() {
        public void run() 
        {
          startActivity(new Intent(SplashActivity.this, MainActivity.class));
          finish();
        }
      };
      handler.postDelayed(gotoMain, 4000);
    } 
```

你只需用这个替换你的 OnCreate 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:15:44.017

您应该注意以下几点： 1\. 不鼓励使用 stop() 和使用它的位置。除了被弃用之外，它还会为您提供 UnsupportedOperationExcecption。2\. 您的 MediaPlayer 是否正确初始化且没有任何错误？检查日志。3\. 你在 onPause() 方法中使用 finish() 的原因是什么？不推荐。4\. 您将 MAIN 操作分配给您的两个活动。虽然允许，但应该有特定的原因。

但是，所有这些事情都不应避免您的应用程序进入主要活动。您的主要活动代码可能有原因。

# java - 将带有 JTextArea 的 JScrollPane 添加到 JDailog

> ID：11649564
> 
> 赞同：2
> 
> 时间：2012-07-25T12:20:02.050
> 
> 标签：java, swing, jscrollpane, jtextarea, jdialog

```
public class DailogDemo 
{

private JDialog chatdailog;
private JTextArea chatHistory;
private JScrollPane mScrollMessage; 

DailogDemo()
{
chatdailog=new JDialog();
chatdailog.setSize(300, 400);

chatHistory=new JTextArea();
chatHistory.setPreferredSize(new Dimension(150,100));
mScrollMessage=new JScrollPane();
mScrollMessage.add(chatHistory);
mScrollMessage.setBounds(4, 10, 150, 100);
mScrollMessage.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
chatdailog.add(mScrollMessage);
chatdailog.show();
}

public static void main(String args[])
{
    new DailogDemo();
}
} 
```

在上面的代码中，我无法在 JScrollPane 中看到 JTextArea。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:00:41.267

*   使用[JTextArea（整数行，整数列）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html)

*   不要设置和删除`chatdailog.setSize(300, 400);`

*   不要设置和删除`chatHistory.setPreferredSize(new Dimension(150,100));`

*   不要设置和删除`mScrollMessage.add(chatHistory);`使用`JScrollPane scrollPane = new JScrollPane(textArea);`

*   不要设置和删除`mScrollMessage.setBounds(4, 10, 150, 100);`

*   不要设置和删除`chatdailog.show();`使用`chatdailog.setVisible(true);`

*   `chatdailog.pack()`在行前添加代码行`chatdailog.setVisible(true);`

*   `JDialog`如果这个包裹有另一个`chatdailog.setVisible(true);`父母`invokeLater()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:59:43.700

如果你有一个布局，你可以使用`new JTextArea(24, 32)`and`pack()`得到一个很好的安排。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:28:56.987

为 JTextArea 设置大小

```
chatHistory.setSize(new Dimension(width,height)); 
```

# python - 在 python-sphinx 中找不到“Grammar.txt”

> ID：11649565
> 
> 赞同：2
> 
> 时间：2012-07-25T12:20:02.097
> 
> 标签：python, python-sphinx

当我尝试在 Windows 下使用 Python Sphinx 生成 html 文档时，出现以下错误：

```
IOError: [Errno 2] No such file or directory:
'c:\\python27\\sphinx.egg\\sphinx\\pycode\\Grammar.txt' 
```

但是，当我打开 sphinx.egg 时，文件“Grammar.txt”存在......

这是它提供的日志

```
# Sphinx version: 1.1.3
# Python version: 2.7.3
# Docutils version: 0.9.1 release
# Jinja2 version: 2.6 Traceback (most recent call last):
File "c:\python27\sphinx.egg\sphinx\cmdline.py", line 188, in main
    warningiserror, tags)   
File "c:\python27\sphinx.egg\sphinx\application.py", line 114, in __init__
    self.setup_extension(extension)
File "c:\python27\sphinx.egg\sphinx\application.py", line 247, in
setup_extension
    mod = __import__(extension, None, None, ['setup'])
File "c:\python27\sphinx.egg\sphinx\ext\autodoc.py", line 26, in <module>  
File "c:\python27\sphinx.egg\sphinx\pycode\__init__.py", line 25, in <module>
File "c:\python27\sphinx.egg\sphinx\pycode\pgen2\driver.py", line 126, in load_grammar
    g = pgen.generate_grammar(gt)
File "c:\python27\sphinx.egg\sphinx\pycode\pgen2\pgen.py", line 383, in generate_grammar
    p = ParserGenerator(filename)
File "c:\python27\sphinx.egg\sphinx\pycode\pgen2\pgen.py", line 15, in  __init__
    stream = open(filename) IOError: [Errno 2] No such file or directory: 'c:\\python27\\sphinx.egg\\sphinx\\pycode\\Grammar.txt' 
```

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:51:12.110

我终于找到了为什么找不到文件“Grammar.txt”。起初，我将 sphinx-quickstart.exe 移动到我的源文件夹中。相反，最好（也是正确的做法）从其默认文件夹启动 sphinx-quickstart.exe 然后在问题处：

> > 输入文档的根路径。
> 
> > 文档的根路径 [.]：“PathToYourSourceFolder”

您在这个问题中输入您的源文件夹路径。

希望这对某人有帮助！

# eclipse-emf - 是否可以在使用 Eclipse EMF 验证框架设置值之前对其进行验证？

> ID：11649566
> 
> 赞同：3
> 
> 时间：2012-07-25T12:20:08.413
> 
> 标签：eclipse-emf

我理解 eclipse 验证框架如何工作的方式：

*   用工厂生成对象
*   为此对象中的属性设置值
*   检查验证

例如：

```
public class ValidateNameTest {
public static void main(String[] args) {

    ExtlibraryPackageImpl.init();
    ExtlibraryFactory factory = ExtlibraryFactory.eINSTANCE;
    Writer writer = factory.createWriter();
    // comment next line for false result in console
    writer.setName("test");
    writer.setFirstName("test");
    writer.setLastName("test");

    boolean isNull = (writer.getName() == null) ? true : false;
    System.out.println("writer name is null : " + isNull);

    boolean result = validateObject(writer);
    System.err.println("result = " + result);

    boolean result2 = validateObject2(writer);
    System.err.println("result2 = " + result2);

    boolean result3 = validateObject3(writer);
    System.err.println("result3 = " + result3);

    boolean result4 = validateObject5(writer);
    System.out.println("result4 = " + result4);
}

public static boolean validateObject(Writer writer) {
    ExtlibraryValidator validator = ExtlibraryValidator.INSTANCE;
    if (!validator.validateWriter_hasValidName(writer, null, null)) {
        return false;
    }
    return true;
}

public static boolean validateObject2(EObject eObject) {
    EValidator validator = EValidator.Registry.INSTANCE
            .getEValidator(eObject.eClass().getEPackage());
    if (validator != null) {
        if (!validator.validate(eObject, null, null)) {
            return false;
        }
    }
    return true;
}

public static boolean validateObject3(EObject eObject) {
    Diagnostic diagnostic = Diagnostician.INSTANCE.validate(eObject);
    return diagnostic.getSeverity() == Diagnostic.OK;
}

public static boolean validateObject5(EObject eObject)
  {
    Diagnostic diagnostic = Diagnostician.INSTANCE.validate(eObject);

    if (diagnostic.getSeverity() == Diagnostic.ERROR || diagnostic.getSeverity() == Diagnostic.WARNING)
    {
      System.err.println(diagnostic.getMessage());
      for (Diagnostic childDiagnostic : diagnostic.getChildren())
      {
        switch (childDiagnostic.getSeverity())
        {
          case Diagnostic.ERROR:
          case Diagnostic.WARNING:
            System.err.println("\t" + childDiagnostic.getMessage());
        }
      }
      return false;
    }
    return true;
  }
} 
```

但是我想在调用属性的设置器**之前**检查一个值是否对模型有效。Eclipse EMF 验证框架可以做到这一点吗？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:41:22.477

我知道一个可能的常见用例：模型和 UI 控件之间的数据绑定。

当您在模型和用户界面之间建立 EMF 数据绑定时，您可以验证用户输入，如下所示。创建更新策略（目标到模型）并覆盖方法*validateBeforeSet(Object)*。这是一个例子：

```
 EMFDataBindingContext ctx = new EMFDataBindingContext();
    ISWTObservableValue notesObservableValue = prop.observe(swtTextViewer);
    IEMFValueProperty notesValueProperty = EMFProperties.value(ModelPackage.Literals.THING__NOTES);
    UpdateValueStrategy targetToModel = new UpdateValueStrategy() {

        @Override
        public IStatus validateBeforeSet(Object value) {
            if ("".equals(value)) {
                MessageDialog.openError(Display.getCurrent()
                        .getActiveShell(), "Error",
                        "You should supply a description");
                return ValidationStatus
                        .error("You should supply a description");
            }
            return super.validateBeforeSet(value);
        }

    };

    ctx.bindValue(notesObservableValue,
            notesValueProperty.observe(thing), targetToModel,
            new UpdateValueStrategy()); 
```

# jquery - 上传队列数据错误

> ID：11649569
> 
> 赞同：0
> 
> 时间：2012-07-25T12:20:12.547
> 
> 标签：jquery, uploadify

我正在使用 Uploadify 3.1 并在单击上传按钮时收到错误“未捕获的类型错误：无法读取未定义的属性 'queueData'”。下面是我的代码。不确定是什么问题。

上传字段：

```
<input type="file" name="file_upload" id="file_upload"/>
<input type="button" class="batchImport" value="Upload Files"/> 
```

Javascript：

```
$(document).on("click",".batchImportElements",function(){
        $("#objectDetails").hide().html("");
        $("#objectList").show();
        $("#objectList").html("<img src="images/loading.gif"/> Loading").show();
        $.ajax({
            type:"POST",
            data:{
                multiple:1
            },
            url:"/index.php/elements_handler/importElements",
            success:function(response){
                checkResponse(response);
                $("#objectList").html(response);

                $("#file_upload").uploadify({
                    "swf":"/js/uploadify-v3.1/uploadify.swf",
                    "uploader":"/js/uploadify-v3.1/uploadify.php",
                    "uploadFolder":"/uploads/",
                    "auto":false,
                    "multi":true,
                    "height":19,
                    "width":94,
                    "onUploadError":function(file,errorCode,errorMsg,errorString){
                        alert("The file " + file.name + " could not be uploaded: " + errorString);
                    },
                    "onUploadSuccess":function(file, data, response){
                        $.ajax({
                            type:"POST",
                            data:{
                                multiple:1,
                                companies_id:companies_id,
                                file:file,
                                data:data,
                                folderPath:1
                            },
                            url:"/index.php/elements_handler/importElements",
                            success:function(response){
                                checkResponse(response);
                            }
                        });
                    }
                });

                $(document).on("click",".batchImport",function(){
                    $(".batchImport").uploadify("upload");
                });
            }
        });
    }); 
```

`

`$('.batchImport')`是用于触发上传的按钮。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:34:03.477

为什么要使用 id **file_upload在文件控件上创建 uploadify ，然后使用类****batchImport**在按钮控件上调用上传？具有类**batchImport**的按钮未设置为 uploadify 控件，因此它应该引发错误。

```
// Your code
$("#file_upload").uploadify({
    ....                    
});

$(".batchImport").uploadify("upload");

// Should most likely be
$("#file_upload").uploadify({
    ....                    
});

$("#file_upload").uploadify("upload"); 
```

# java - 使用 CHUNKED 编码时的连接数有限

> ID：11649573
> 
> 赞同：0
> 
> 时间：2012-07-25T12:20:17.320
> 
> 标签：java, http-headers, axis

我在我的一个 Web 服务客户端中使用 Axis 1.x SOAP 框架。在我们对应用程序的早期测试期间，事实证明，如果我们使用默认的 HTTP 1.0 标准（没有 CHUNKED 编码），并且当接收到的 SOAP 信封很大时，我最终会得到一个无效的 XML 异常。这就是我添加 client-config.wsdd 文件并将 CHUNKED 属性设置为 HTTP 请求标头的一部分的原因。这解决了我的问题。

然而，这又引起了另一个问题：当使用 CHUNKED 编码时，以及使用我的客户端进行 Web 服务调用时，我仅限于“2”个同时调用（每个调用需要大约 1 分钟才能返回响应）。因此，在这两个 Web 服务中的任何一个返回响应之前，任何额外的调用都会“暂停”。

我的问题是：有没有办法覆盖这种行为，同时确保我仍然使用 CHUNKED 编码，这有助于解决我之前的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:58:48.270

我终于通过设置以下值解决了这个问题： AxisProperties.setProperty(DefaultCommonsHTTPClientProperties.MAXIMUM_CONNECTIONS_PER_HOST_PROPERTY_KEY, maxConnections);

# c# - 使用 SignalR 运行 SQL 查询

> ID：11649574
> 
> 赞同：0
> 
> 时间：2012-07-25T12:20:17.870
> 
> 标签：c#, signalr

我的大部分经验都与应用程序有关，但我在使用 SQL 查询时遇到了麻烦。该网页使用信号器来更新客户端的新信息，这些信息将由不同的进程控制，但我试图实现的是新连接的客户端不会与其他已经加入的客户端位于同一位置，因此它将使用正确的信息。我有这个 SQL 查询，

```
 public string LoadCurrent()
    {
        SqlConnection con = new SqlConnection();

        SqlConnectionStringBuilder bldr = new SqlConnectionStringBuilder();
        bldr.DataSource = @"server\SQLEXPRESS";
        bldr.InitialCatalog = "Signalr_Example";
        bldr.UserID = "zip";
        bldr.Password = "zap";

        con.ConnectionString = bldr.ConnectionString;

            con.Open();

            string currentPage = "";

            using (SqlCommand command = con.CreateCommand())
            {
                command.CommandText = "SELECT TOP 1 activepage FROM active";

                con.Open();

                command.ExecuteNonQuery();

                SqlDataReader myReader = command.ExecuteReader();

                while (myReader.Read())
                {
                    int _currentpage = myReader.GetOrdinal("activepage");
                    currentPage = myReader.GetString(_currentpage);

                }

            } 

        return currentPage;

    } 
```

我想在客户端连接时返回

```
 public Task Connect()
    {
        string html = LoadCurrent();
        _connections.TryAdd(Context.ConnectionId, null);
        //This runs firstview which populates a content div on new clients. 
        Clients[Context.ConnectionId].firstview(html);
        return Clients.tally(_connections.Count.ToString());
    } 
```

虽然这适用于 winapp ，但它在运行时会破坏我页面上的所有信号器并且不返回结果。我可能正在做一些我不应该做的事情，所以我想我会问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T10:52:38.907

command.CommandText = "从活动中选择活动页面";

代替

command.CommandText = "SELECT TOP 1 activepage FROM active";

# python - 如何在numpy中反转排列数组

> ID：11649577
> 
> 赞同：39
> 
> 时间：2012-07-25T12:20:28.303
> 
> 标签：python, algorithm, numpy, vectorization

给定一个自索引（不确定这是否是正确的术语）numpy 数组，例如：

```
a = np.array([3, 2, 0, 1]) 
```

这表示这种[排列](http://en.wikipedia.org/wiki/Permutation#Notation)（`=>`是一个箭头）：

```
0 => 3
1 => 2
2 => 0
3 => 1 
```

我正在尝试制作一个表示逆变换的数组，而不是在 python 中“手动”执行它，也就是说，我想要一个*纯*numpy 解决方案。在上述情况下我想要的结果是：

```
array([2, 3, 1, 0]) 
```

这相当于

```
0 <= 3                0 => 2
1 <= 2       or       1 => 3
2 <= 0                2 => 1
3 <= 1                3 => 0 
```

看起来很简单，但我就是想不出该怎么做。我试过谷歌搜索，但没有找到任何相关的东西。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-08-27T19:42:59.720

**排序在这里是多余的。** 这只是一个具有恒定内存要求的单次线性时间算法：

```
from __future__ import print_function
import numpy as np

p = np.array([3, 2, 0, 1])
s = np.empty(p.size, dtype=np.int32)
for i in np.arange(p.size):
    s[p[i]] = i

print('s =', s) 
```

上面的代码打印

```
 s = [2 3 1 0] 
```

按要求。

答案的其余部分与上述`for`循环的有效矢量化有关。**如果您只是想知道解决方案，请跳到此答案的末尾。**

* * *

* * *

*（2014 年 8 月 27 日的原始答案；时间对 NumPy 1.8 有效。稍后会更新 NumPy 1.11。）*

单程线性时间算法预计比`np.argsort`; 有趣的是，上述循环的微不足道的矢量化（`s[p] = xrange(p.size)`见[索引数组](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#index-arrays)`for`）实际上比`np.argsort`只要`p.size < 700 000`（好吧，在我的机器上，你的里程*会*有所不同）稍慢：

```
import numpy as np

def np_argsort(p):
    return np.argsort(p)

def np_fancy(p):
    s = np.zeros(p.size, p.dtype) # np.zeros is better than np.empty here, at least on Linux
    s[p] = xrange(p.size) 
    return s

def create_input(n):
    np.random.seed(31)
    indices = np.arange(n, dtype = np.int32)
    return np.random.permutation(indices) 
```

从我的 IPython 笔记本中：

```
p = create_input(700000)
%timeit np_argsort(p)
10 loops, best of 3: 72.7 ms per loop
%timeit np_fancy(p)
10 loops, best of 3: 70.2 ms per loop 
```

最终，渐近复杂性开始出现（`O(n log n)`对于`argsort`单通道算法），并且单通道算法在足够大（我的机器上的阈值约为 700k）`O(n)`之后将始终更快。`n = p.size`

但是，有一种不太直接的方法可以使用以下方法对上述`for`循环进行矢量化[`np.put`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.put.html)：

```
def np_put(p):
    n = p.size
    s = np.zeros(n, dtype = np.int32)
    i = np.arange(n, dtype = np.int32)
    np.put(s, p, i) # s[p[i]] = i 
    return s 
```

这给出了`n = 700 000`（与上面相同的大小）：

```
p = create_input(700000)
%timeit np_put(p)
100 loops, best of 3: 12.8 ms per loop 
```

**这是一个不错的 5.6 倍加速，几乎没有！**

公平地说，`np.argsort`仍然优于`np.put`较小的方法`n`（引爆点`n = 1210`在我的机器上）：

```
p = create_input(1210)
%timeit np_argsort(p)
10000 loops, best of 3: 25.1 µs per loop
%timeit np_fancy(p)
10000 loops, best of 3: 118 µs per loop
%timeit np_put(p)
10000 loops, best of 3: 25 µs per loop 
```

这很可能是因为我们`np.arange()`使用该方法分配并填充了一个额外的数组（在调用时）`np_put`。

* * *

尽管您没有要求 Cython 解决方案，但出于好奇，我还使用[键入的 memoryviews](http://docs.cython.org/src/userguide/memoryviews.html)为以下 Cython 解决方案计时：

```
import numpy as np
cimport numpy as np

def in_cython(np.ndarray[np.int32_t] p):    
    cdef int i
    cdef int[:] pmv
    cdef int[:] smv 
    pmv = p
    s = np.empty(p.size, dtype=np.int32)
    smv = s
    for i in xrange(p.size):
        smv[pmv[i]] = i
    return s 
```

时间：

```
p = create_input(700000)
%timeit in_cython(p)
100 loops, best of 3: 2.59 ms per loop 
```

所以，`np.put`解决方案仍然没有尽可能快（这个输入大小运行 12.8 毫秒；argsort 花了 72.7 毫秒）。

* * *

## NumPy 1.11 于 2017 年 2 月 3 日更新

Jamie、Andris 和 Paul 在下面的评论中指出，花式索引的性能问题已经解决。Jamie 说它已经在 NumPy 1.9 中解决了。我在 2014 年使用的机器上使用 Python 3.5 和 NumPy 1.11 对其进行了测试。

```
def invert_permutation(p):
    s = np.empty(p.size, p.dtype)
    s[p] = np.arange(p.size)
    return s 
```

时间：

```
p = create_input(880)
%timeit np_argsort(p)
100000 loops, best of 3: 11.6 µs per loop
%timeit invert_permutation(p)
100000 loops, best of 3: 11.5 µs per loop 
```

确实是一个显着的进步！

* * *

* * *

## 结论

总而言之，我会选择

```
def invert_permutation(p):
    '''The argument p is assumed to be some permutation of 0, 1, ..., len(p)-1\. 
    Returns an array s, where s[i] gives the index of i in p.
    '''
    s = np.empty_like(p)
    s[p] = np.arange(p.size)
    return s 
```

代码清晰的方法。在我看来，它比 不那么晦涩`argsort`，并且对于大输入大小也更快。如果速度成为问题，我会选择 Cython 解决方案。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-25T12:40:25.620

`p`排列的倒数是排序`np.arange(n)`的索引数组，即`s``p`

```
p[s] == np.arange(n) 
```

一定是真的。这`s`正是[`np.argsort`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html)返回的结果：

```
>>> p = np.array([3, 2, 0, 1])
>>> np.argsort(p)
array([2, 3, 1, 0])
>>> p[np.argsort(p)]
array([0, 1, 2, 3]) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-25T13:52:06.410

我想为 larsmans 的正确答案提供更多背景知识。[当您使用矩阵表示排列](http://en.wikipedia.org/wiki/Permutation_matrix)时，可以找到正确的*原因*。*置换矩阵*的数学优势在于矩阵“对向量进行运算”，即置换矩阵乘以向量来置换向量。`argsort` *`P`*

 *你的排列看起来像：

```
import numpy as np
a   = np.array([3,2,0,1])
N   = a.size
rows = np.arange(N)
P   = np.zeros((N,N),dtype=int)
P[rows,a] = 1

[[0 0 0 1]
 [0 0 1 0]
 [1 0 0 0]
 [0 1 0 0]] 
```

给定一个置换矩阵，我们可以通过乘以它的逆来“撤销”乘法`P^-1`。置换矩阵的美妙之处在于它们是正交的，因此`P*P^(-1)=I`，或者换句话说`P(-1)=P^T`，逆矩阵是转置矩阵。这意味着我们可以使用转置矩阵的索引来找到您的倒置置换向量：

```
inv_a = np.where(P.T)[1]
[2 3 1 0] 
```

`P`如果您考虑一下，这与查找对!的列进行排序的索引完全相同。*

# r - 如何使用 rgdal 包将 NAD 83 坐标转换为纬度和经度？

> ID：11649580
> 
> 赞同：7
> 
> 时间：2012-07-25T12:20:44.130
> 
> 标签：r, mapping, projection, rgdal

我有坐标，所有坐标都应该位于 DC，但我不知道如何将它们从 NAD 83 转换为 R 中的纬度和经度。我正在使用`spTransform()`rgdal 包中的函数并收到关于不合格的错误数据。

```
library(rgdal)
nad83_coords <- data.frame(x=c(396842.6, 397886.9, 398315.5, 398154.3, 398010.3), y=c(140887.1, 139847.0, 138743.9, 139534.5, 138697.3))
coordinates(nad83_coords) <- c('x', 'y')
proj4string(nad83_coords) <- CRS("+init=epsg:4269")
Error in `proj4string<-`(`*tmp*`, value = <S4 object of class "CRS">) : 
  Geographical CRS given to non-conformant data: 398315.5 140887.1 
```

proj4strings 的其他组合产生相同的错误。我相信错误是因为坐标太大，但我不确定为什么会这样。坐标的文档如下：

> 值在马里兰州平面米 NAD 83 地图投影中。

我对映射和投影非常陌生，感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:43:57.300

查找 espg:4269:

[http://spatialreference.org/ref/epsg/4269/](http://spatialreference.org/ref/epsg/4269/)

它是一个经纬度系统。所以你的大数字（米）太大了。

如果您在这些坐标中的任何地方都有一个带有数据的 shapefile，那么您可能有一个带有投影规范的 .prj 文件，否则您将不得不在 spatialreference.org 上追逐它：

[http://spatialreference.org/ref/?search=nad83+maryland&srtext=搜索](http://spatialreference.org/ref/?search=nad83+maryland&srtext=Search)

NAD83 有各种各样的变体，而且到处都有“国家平面”。我不太确定哪个是哪个。epsg: 代码更标准，然后有一堆 esri: 代码。sr-org: 是用户在网站上提供的。

esri 代码看起来与您提供的文本足够接近。咱们试试吧：

```
> proj4string(nad83_coords)=CRS("+init=esri:102285")
> spTransform(nad83_coords,CRS("+init=epsg:4326"))
SpatialPoints:
             x        y
[1,] -77.03642 38.93586
[2,] -77.02437 38.92650
[3,] -77.01942 38.91656
[4,] -77.02128 38.92368
[5,] -77.02294 38.91614 
```

DC附近有吗？实际上， epsg:2804 和 epsg:3559 给出了相同的答案，并且可能更“标准”......

# java - LogCat：找不到类“com.jcraft.jsch.JSch”

> ID：11649585
> 
> 赞同：2
> 
> 时间：2012-07-25T12:20:57.557
> 
> 标签：java, android, eclipse

我正在尝试从我的 android 手机 ssh 连接到 ssh 服务器。

我的进口线：

```
 import com.jcraft.jsch.*; 
```

剩下的就在这里

```
 try{
        JSch jsch = new JSch();

        //create SSH connection
        String host = "192.168.158.20";
        String user = "jan";
        String password = "mypassword";

        Session session = jsch.getSession(user, host, 22);
        session.setPassword(password);
        session.connect();
        System.out.println("done");
      }
      catch(Exception e){
        System.out.println(e);
     } 
```

为此，我正在使用 Jsch（java ssh 实现）。我已经从网站下载了 jsch-0.1.48.jar，并通过“右键单击项目 -> 库 -> 添加罐子”将其添加到我的 eclipse android 项目的构建路径中

我现在可以在我的引用库中看到 jsch-0.1.48.jar 文件，这似乎没问题。

当我开始调试时，我在第 1 行的 LogCat 中收到了一个无法找到类 'com.jcraft.jsch.JSch' 的错误。

Eclipse 没有显示任何警告或语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:26:57.863

创建一个名为 libs 的文件夹并在其中导入您的 jar 文件。

欲了解更多信息，[请访问此链接](https://stackoverflow.com/questions/9857539/noclassdeffounderror-when-googleanalyticstracker-getinstance/9857669#9857669)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:37:54.253

将 jsch jar 文件转换为 DEX 格式，并将 classes.dex 与 jar 一起包含在构建路径中。

# validation - 带有 primefaces 的电子邮件模式

> ID：11649588
> 
> 赞同：4
> 
> 时间：2012-07-25T12:21:12.687
> 
> 标签：validation, email, jsf-2, primefaces, design-patterns

我认为我的问题很简单，但我似乎无法克服它。我正在为这样的电子邮件使用输入文本：

```
<h:outputLabel value="Mail:" for="mail" />
                 <p:inputText id="mail" value="#{UtilisateurBean.mail}"
                    title="Mail" validator="#{UtilisateursValidate.email}"
                    validatorMessage="ecrivez un mail valide">
                    <f:validateRegex
                       pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                    <f:validateLength minimum="2" /> 
```

问题是它不支持@ like nouraty.n@mail.com 之前的点字符（这通常是 gmail 的情况）。我尝试过类似的东西：

`pattern="[\w\.-]*[a-zA-Z0-9._%-]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]"`

`pattern="[\w\.-]*[a-zA-Z0-9\._%-]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]"`

但没有运气。任何人都可以为这个问题提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:55:08.297

JSF 验证器按照它们在组件上声明的顺序执行，从组件`validator`属性中的那个开始，如果有的话。你有一个`validator="#{UtilisateursValidate.email}"`. 如果它针对不同的（和错误的）模式进行验证并抛出 a `ValidatorException`，那么您仍然会继续看到验证器消息。

删除或修复该验证器应该可以解决您的问题。

# ruby - Ruby 语法怪异

> ID：11649599
> 
> 赞同：0
> 
> 时间：2012-07-25T12:21:43.577
> 
> 标签：ruby

> **可能重复：**
> [红宝石中的条件语句和赋值](https://stackoverflow.com/questions/1380331/conditional-statement-and-assigning-value-in-ruby)

在重构一些 rails 代码时，我在 ruby​​ 中遇到了一些语法异常。

给定以下方法

```
def get_value
  42
end 
```

为什么这行得通？

```
if value = get_value
  puts value
end 
```

虽然这没有？

```
puts value if value = get_value 
```

后者给出一个错误：`undefined local variable or method `value' for main:Object (NameError)`。我以为这些表达是平等的？如果在 puts 之前评估 if 块，则`value`不应未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:34:46.547

这是由于行的解析与执行时间的关系。在第一个版本中，值被解析和设置，然后对 puts 进行评估。在第二行中，当解析器到达变量`puts value`时，它还没有被定义。换句话说，它不能*运行*该行来设置变量，直到它首先*解析*该行。

# python - ISO 8859-1 文件名未解码

> ID：11649601
> 
> 赞同：4
> 
> 时间：2012-07-25T12:21:47.037
> 
> 标签：python, unicode, mime, iso, latin1

我正在从 python milter 中的 MIME 消息中提取文件，并且正在运行具有如下文件的问题：

=?ISO-8859-1?Q?Certificado=5FZonificaci=F3n=5F2010=2Epdf?=

我似乎无法将此名称解码为 UTF。为了解决之前的 ISO-8859-1 问题，我开始将所有文件名传递给这个函数：

```
def unicodeConvert(self, fname):
    normalized = False

    while normalized == False:
        try:
            fname  = unicodedata.normalize('NFKD', unicode(fname, 'utf-8')).encode('ascii', 'ignore')
            normalized = True
        except UnicodeDecodeError:
            fname = fname.decode('iso-8859-1')#.encode('utf-8')
            normalized = True
        except UnicodeError:
            fname = unicode(fname.content.strip(codecs.BOM_UTF8), 'utf-8')
            normalized = True
        except TypeError:
            fname = fname.encode('utf-8')

    return fname 
```

在我得到这个文件名之前一直有效。

想法一如既往地受到赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T12:45:18.607

您的字符串使用MIME 标头的[Quoted-printable](https://en.wikipedia.org/wiki/Quoted-printable)格式进行编码。该[`email.header`模块](http://docs.python.org/library/email.header.html)为您处理：

```
>>> from email.header import decode_header
>>> try:
...     string_type = unicode  # Python 2
... except NameError:
...     string_type = str      # Python 3
...
>>> for part in decode_header('=?ISO-8859-1?Q?Certificado=5FZonificaci=F3n=5F2010=2Epdf?='):
...     decoded = string_type(*part)
...     print(decoded)
...
Certificado_Zonificación_2010.pdf 
```

# sql - 表名包括日期

> ID：11649602
> 
> 赞同：0
> 
> 时间：2012-07-25T12:21:46.693
> 
> 标签：sql

对不起任何不正确的术语，因为我不精通 SQL...

我有一个需要每天运行的查询，但是我需要查询的表包括今天的日期。通常我运行：

```
SELECT m.displayName, a.source, count(a.agentGuid)
FROM ntEventLog20120725 AS a
LEFT OUTER JOIN machNameTab AS m ON a.agentGuid = m.agentGuid
WHERE a.eventTime > DATEADD(hour, -1, CURRENT_TIMESTAMP)
GROUP BY a.agentGuid, m.displayName, a.source
HAVING COUNT(a.agentGuid) > 1000
ORDER BY m.displayName 
```

但是我每天要查询的表是不同的。今天的表是`ntEventLog20120725`，明天是`ntEventLog20120726`。我知道如何以这种格式获取日期：

```
SELECT CONVERT(varchar, getDate(), 112) 
```

我只是不知道如何将两者结合在一起，以便我可以安排它每天运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:29:46.050

您可以使用动态查询来做到这一点。尽管使用动态查询不是一个好习惯。但我想这是这里唯一的选择

```
declare @date_val char(8)
select @date_val=convert(varchar,getDate(),112)

exec('
SELECT m.displayName,a.source,count(a.agentGuid) from ntEventLog'+@date_val+' a LEFT OUTER JOIN machNameTab m ON a.agentGuid = m.agentGuid WHERE a.eventTime > DATEADD(hour, -1, CURRENT_TIMESTAMP)
GROUP BY a.agentGuid, m.displayName,a.source
HAVING COUNT(a.agentGuid) > 1000
ORDER BY m.displayName') 
```

正如评论中提到的三氯生，您应该考虑重新设计表格。每天都有桌子不是一个好习惯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:30:50.950

如果不能改变设计，唯一的办法就是使用动态sql

```
declare @table varchar(100), @sql varchar(8000)
set @table='ntEventLog'++convert(varchar,getDate(),112)
set @sql='
SELECT 
    m.displayName,a.source,count(a.agentGuid) 
from '+@table+' a 
    LEFT OUTER JOIN machNameTab m ON a.agentGuid = m.agentGuid 
WHERE 
    a.eventTime > DATEADD(hour, -1, CURRENT_TIMESTAMP) 
GROUP BY 
    a.agentGuid, m.displayName,a.source 
    HAVING COUNT(a.agentGuid) > 1000 
ORDER BY m.displayName'
exec(@sql) 
```

还要确保阅读 thios 帖子 www.sommarskog.se/dynamic_sql

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:28:34.723

一种方法是构建查询并执行。

请尝试：

```
declare @var nvarchar(max)
set @var ='select * From '+convert(varchar,getDate(),112)
exec (@var) 
```

# nservicebus - 如何设置 NServiceBus 3.2.2 分发器

> ID：11649604
> 
> 赞同：0
> 
> 时间：2012-07-25T12:21:57.147
> 
> 标签：nservicebus

我正在使用 NSB3.2.2 并在设置分销商时遇到问题。我有一个发布者和两个负载平衡的工作人员。

工作流程是这样的：

*   发布者向 Service1 分发者发送消息
*   服务 1 经销商将其发送给服务 1 工人
*   Service1 worker 向 Service2 分发者发送消息
*   Service2 分发者将其发送给 Service2 工作人员
*   Service2 工作人员执行 bus.Reply（响应消息）

现在的问题是 Service2 工作人员的回复应该去哪里？

我观察到有时它会进入 Service1 分发器输入队列，有时会进入 Service1 工作输入队列

我希望 Service2 工作人员 Bus.Reply() 将消息发送到 Service1 工作人员输入队列。实现这一目标的配置应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:24:40.977

在所有情况下，回复都会返回给分销商——这就是它应该如何工作的方式。如果您担心服务器回复会返回到哪些服务器，您可能会有一些内存状态也应该被分发，例如分布式缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:12:11.617

您可以查看以下示例，它演示了一种按照您想要的方式配置分发器的方法：

[https://github.com/shlomii/NServiceBus-Scale-Out-Sample-set-up-for-Publish-Send-Reply-environment](https://github.com/shlomii/NServiceBus-Scale-Out-Sample-set-up-for-Publish-Send-Reply-environment)

# ruby-on-rails - 在生产模式下运行 Rails 应用程序时如何启用错误报告？

> ID：11649608
> 
> 赞同：6
> 
> 时间：2012-07-25T12:22:10.830
> 
> 标签：ruby-on-rails

我正在使用 Rails 应用程序。每当出现错误时，我都可以在生产服务器中看到以下屏幕。（文字：我们很抱歉，但出了点问题。）

如何在我的服务器中启用错误报告以查看实际错误？我是否必须在 Rails 应用程序中进行任何配置更改或在我的服务器中启用错误报告。

![在此处输入图像描述](../Images/36cb55feb4c9fdb897220a787ed8eef5.png)

**注意：我的服务器是 Ngnix。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T12:25:17.693

如果您将此添加到您的`config/environments/production.rb`：

```
config.consider_all_requests_local = true 
```

您将看到与开发中相同的错误，但它也会禁用生产应用程序的缓存等。

我宁愿建议你调查一下`/log/production.log`。与通常在屏幕上显示的错误相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:59:13.483

对于错误报告，有一个名为[exception_notification](https://github.com/smartinez87/exception_notification)的便捷 gem ，每次应用程序中发生异常时都会向您发送一封邮件。

如果您还想在页面上获得详细且完全可定制的错误报告，则必须进行一些编码。这是我使用的（我会给你一个链接，指向我从哪里获取它，但我再也找不到它了：（）

1.  定义一个`ErrorsController`这样的：

    ```
    class ErrorsController < ApplicationController
      ERRORS = [
        :internal_server_error,
        :not_found,
        :unprocessable_entity,
        :unauthorized
      ].freeze

      ERRORS.each do |e|
        define_method e do
          respond_to do |format|
            format.html { render e, :status => e }
            format.any { head e }
          end
        end
      end 
    ```

    结尾

2.  创建一个初始化器将控制器挂接到 Rails 异常处理链中：

    ```
    require 'action_dispatch/middleware/show_exceptions'

    module ActionDispatch
      class ShowExceptions
        private
          def render_exception_with_template(env, exception)
          env['exception'] = exception
          body = ErrorsController.action(rescue_responses[exception.class.name]).call(env)
          log_error(exception)
          env.delete 'exception'
          body
        rescue Exception => e
          log_error(e)
          render_exception_without_template(env, exception)
        end

        alias_method_chain :render_exception, :template
      end
    end 
    ```

3.  为每个错误创建一个视图`ErrorsController::ERRORS`（即 app/views/errors/not_found.html.erb 等）。

我不认为这是最好的技术，但到目前为止它对我很有帮助（您可以轻松地为新错误添加页面，自定义您希望分别为每个错误显示的方式和内容）。

# html - 将页脚带到内容的末尾

> ID：11649610
> 
> 赞同：1
> 
> 时间：2012-07-25T12:22:19.350
> 
> 标签：html, css, footer

我试图让我的页脚直接出现在我页面上的最后一个 div 之后，但我无法弄清楚它为什么低于我想要的位置。任何人都可以帮忙吗？继承人的代码：

```
<div id="container">
    <div id="header">
        <h1>
            <!--<a href="#"><img src="tracylogo7.jpg" alt="Millington and Hope" /></a> -->
            <a href="#"><img src="tracylogo6header.jpg" alt="Millington and Hope" /></a>
        </h1>
        <h2>
            <!--<a href="#"><img src="tracylogo5_header.jpg" alt="Millington and Hope" /></a> -->
        </h2>   
    </div>
    <ul id="nav">
        <li><a href="index.html">Home</a></li><!--
        --><li><a href="stock.html">Stock</a></li><!--
        --><li><a href="events.html">Events</a></li><!--
        --><li><a href="contact.html">Contact</a></li>
    </ul>
    <div id="box">
            <a href="#"><img src="home4.jpg" alt="Slideshow Image 1" /></a>

            <a href="#"><img src="home6.jpg" alt="Slideshow Image 2" /></a>

            <a href="#"><img src="home4.jpg" alt="Slideshow Image 3" /></a>
    </div>
    <div id="box2">
        <a href="#"><img src="tracylogosmall.jpg" alt="Logo" /></a>
    </div>
    <div id="footer">
        <p class="client">Tel: 0785740&nbsp;&nbsp;&nbsp;&nbsp;E-mail: tjdelape@hotmail.co.uk</p>

    </div>
</div> 
```

```
html,body
{
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

body
{
    background:rgb(171,163,144);
    text-align: center;
    min-width: 600px;
}

#container
{
    margin:0 auto;
    background:rgb(171, 163, 144);
    width:80%;
}   

#nav
{
  border:1px solid #ccc;
  border-width:1px 0;
  list-style:none;
  margin:0;
  padding:0;
  text-align:center; 
  /*background:rgb(161,153,134) /* for non-css3 browsers */
   background: -webkit-radial-gradient(circle, rgb(151,143,124),rgb(171, 163, 144));
   background: -moz-radial-gradient(circle, rgb(151,143,124),rgb(171, 163, 144));

}

#nav li
{
    display:inline;
}       

#nav a
{
    display:inline-block;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
    padding:10px 20px 10px 20px;
    text-decoration:none;
    color:white;
}

#nav a:hover
{
    background:rgb(171, 163, 144);
}   

#header
{
    padding: 0px;
    color: white;
    width:100%;
    text-align:center;
}

#header h1 
{ 
    margin: 0;   
}

#stock
{
    position:relative;
    margin:0 auto;
    margin-top:35px;
    width: 1000px;
    border-collapse:collapse;
}

#stock th
{
    height: 30px;
    background:rgb(151,143,124);
}       
table, td, th
{
    color:white;
    border: solid 1px black;
    padding: 2px;
}

#events
{
    position:relative;
    margin:0 auto;
    margin-top:35px;
    width: 1000px;
    border-collapse:collapse;
}

#events th
{
    height: 30px;
    background:rgb(151,143,124);
}

#footer {
   position:fixed;
   left:0px;
   bottom:0px;
   height:25px;
   width:100%;
   background:rgb(151,143,124);
   border-top:solid 1px white;
}

.client
{
    color:white;
    margin:3px auto;
    text-indent:1cm;
    text-align:left;
}   

#sold
{
    color: red;
}

#box
{
    position:relative;
    margin:0 auto;
    width:100%;
    height:200px;
    margin-top:100px;
}
#box img
{
    margin:0 auto;
    border:solid 1px white;
    margin: 10px;
}

#box2
{
    position:relative;
    margin-top:200px;
    width: 100%;
}

#box2 img
{
    margin:0 auto;
    opacity:0.5;
    filter:alpha(opacity=50);

}       

h3
{
    color:white;
    text-decoration:underline;
}       

#container2 {
    clear:left;
    float:left;
    width:100%;
    overflow:hidden;
    background:rgb(171,163,144); /* column 2 background colour */
}
#container1 {
    float:left;
    width:100%;
    position:relative;
    right:50%;
    background:rgb(171,163,144); /* column 1 background colour */
}
#left {
    float:left;
    width:46%;
    position:relative;
    left:52%;
    text-align:left;
    overflow:hidden;
}
#right{
    float:left;
    text-align:left;
    width:46%;
    position:relative;
    left:56%;
    overflow:hidden;
}   

p
{
    color:white;
} 
```

在我最后一个 div 之后，页脚似乎有很大的余量，但我认为这不是我声明的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:33:34.677

您的页脚固定在屏幕底部（ position: fixed; bottom: 0 ），如果您删除此声明并将页脚放在 #container div 之外，它应该会产生所需的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:29:36.380

这就是你所声明的。这将强制 div 到页面底部：

```
#footer {
   position:fixed;
   left:0px;
   bottom:0px;
   height:25px;
   width:100%;
   background:rgb(151,143,124);
   border-top:solid 1px white;
} 
```

如果需要，您可以调整上边距，但请执行以下操作以使其显示在底部 div 之后。

```
#footer {
   position:relative;
   left:0px;
   height:25px;
   width:100%;
   background:rgb(151,143,124);
   border-top:solid 1px white;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:33:03.287

您可以将`padding-bottom: 100px;`（或类似的值）添加到您的`#container`中，使其如下所示：

```
#container {
  margin: 0 auto;
  background: #ABA390;
  width: 80%;
  padding-bottom: 100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:12:18.030

试试这个，完美的 Header 和 Footer 分别粘在顶部和底部的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Header & Footer</title>
        <style type="text/css">
            /* Global */
            * {
                margin: 0;
            }
            html, body {
                height: 99%;
            }
            /* Header */
            .container{
                min-height: 100%;
                height: auto !important;
                height: 100%;
                margin: 0 auto -4em;
                width:100%;
                font-family:Segoe UI;
                color:#fff;
            }
            .container-header{
                padding-top:5px;
                padding-left:20px;
            }

            /* Footer */
            .footer{
                background-color:#333030;
                width:100%;
                font-family:Segoe UI;
                color:#fff;
            }
            .footer img{
                padding-left:15px;
            }
            /* Page Content */
            .content{
                height: auto !important;
            }
            .container p{
            font-size:12pt;
            font-weight:bold;
            }
        </style>
    </head>
    <body>
        <!-- Header Div -->
        <div class="container">
            <table width="100%" style="background-color:#333030;color:#FFFFFF;padding:10px">
                <tr></tr>
                <tr>
                    <td></td>
                    <td>
                        <div style="padding-left:100px;font-size:36px;">Header</div>
                    </td>
                </tr>
                <tr></tr>
            </table>

            <!-- Page Content Div -->
            <div class="content">
                Blah Blah
            </div>
        </div>

        <!-- Footer Div -->
        <div class="footer">
            <table width="100%" style="background-color:#333030;color:#FFFFFF;padding:10px">
                <tr></tr>
                <tr>
                    <td></td>
                    <td>
                        <div style="padding-left:100px;font-size:36px;">Footer</div>
                    </td>
                </tr>
                <tr></tr>
            </table>
        </div>
    </body>
</html> 
```

干杯！！！

# sql-server - 使用 t-sql 将 xml 分解到包含组的表中

> ID：11649615
> 
> 赞同：2
> 
> 时间：2012-07-25T12:22:38.927
> 
> 标签：sql-server, xml, tsql

我有以下 xml 文档

```
<Root>
    <Translation>
        <Entry language ="ES"  text = "Alsace"/>
        <Entry language ="DE"  text = "Elsass"/>
        <Entry language ="EN" text = "Alsace"/>
    </Translation>
    <Translation>
        <Entry language ="ES"  text = "Brittany"/>
        <Entry language ="DE"  text = "Bretagne"/>
        <Entry language ="EN" text = "Brittany"/>
    </Translation>
</Root> 
```

我需要把它切碎成一张桌子，同时保留这些组。因此，由于翻译元素缺少任何 id 属性，因此分组是隐含在结构中的。

表格结果应如下所示。

```
translation_id, lanuage, text
---------------------------------
1,ES, Alsace 
1,DE,  Elsass 
1,EN, Alsace 
2,ES , Brittany 
2,DE, Bretagne 
2,EN Brittany 
```

我尝试过各种各样的事情，比如

```
select newid(),
(   select rows.n.value('(@language)[1]', 'nvarchar(max)')
    from @p.nodes('/Translation/Entry') rows(n)
    )
from @p.nodes('/Translation') rows(n) 
```

但似乎无法在不使用某种循环的情况下获取分组 ID。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:47:11.053

没有循环？好的...

```
select 
    rn,
    t2.Entry.value('./@language','varchar(5)')  ,       
    t2.Entry.value('./@text','varchar(50)')         
    from
    (
        select 
            row_number() over (order by rows.n) as rn,
            rows.n.query('.') as trans  
            from @p.nodes('/Root/Translation') rows(n)
    ) trans     
        cross apply trans.nodes('Translation/Entry') as t2(Entry) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:26:47.530

我写了这段代码，不是一个很好的工作，但它正在工作。

```
 declare @p xml
    set @p = '<Root>
    <Translation>
    <Entry language ="ES"  text = "Alsace"/>
    <Entry language ="DE"  text = "Elsass"/>
    <Entry language ="EN" text = "Alsace"/>
    </Translation>
    <Translation>
    <Entry language ="ES"  text = "Brittany"/>
    <Entry language ="DE"  text = "Bretagne"/>
    <Entry language ="EN" text = "Brittany"/>
    </Translation>
    </Root>'

    Declare @n int
    set @n = 1  -- counter for transaction nodes in xml

    DECLARE @test xml -- to hold complete transaction node

    While @n <= 2 -- while loop starts
    BEGIN
    SET @test = ( select @p.query('/Root/Translation[sql:variable("@n")]') )

    SELECT
    @n as [Transaction],
    a.b.value('Entry[1]/@language','varchar(10)') AS [Language],
    a.b.value('Entry[1]/@text','varchar(10)') AS [Text]
    FROM @test.nodes('Translation') a(b)

    select @n as [Transaction] ,a.b.value('Entry[2]/@language','varchar(10)') AS [Language],
    a.b.value('Entry[2]/@text','varchar(10)') AS [Text]
    FROM @test.nodes('Translation') a(b)

    SELECT
    @n as [Transaction],
    a.b.value('Entry[3]/@language','varchar(10)') AS [Language],
    a.b.value('Entry[3]/@text','varchar(10)') AS [Text]
    FROM @test.nodes('Translation') a(b)

    SET @n = @n + 1  -- counter for transaction nodes in xml

    END  -- loop ended

Output:
    translation_id, lanuage, text
    ---------------------------------
    1,ES, Alsace 
    1,DE,  Elsass 
    1,EN, Alsace 
    2,ES , Brittany 
    2,DE, Bretagne 
    2,EN Brittany 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:05:45.363

最后就这样解决了。不漂亮，我认为必须有一种方法可以在没有循环的情况下做到这一点。

```
declare @p xml

set @p = 
'<Translation>
<Entry language ="ES"  text = "Alsace"/>
<Entry language ="DE"  text = "Elsass"/>
<Entry language ="EN"  text = "Alsace"/>
</Translation>
<Translation>
<Entry language ="ES"  text = "Aquitaine"/>
<Entry language ="DE"  text = "Aquitanien"/>
<Entry language ="EN"  text = "Aquitaine"/>
</Translation>
'

declare @trans table (id int identity, t xml, [guid] varchar(255))
declare @result table ([guid] varchar(255), language char(2), [text] nvarchar(max) )
declare @no int , @i int, @guid varchar(255), @t xml

insert @trans
(t, [guid])
select rows.n.query('.') as trans, newid() id
from @p.nodes('/Translation') rows(n)
set @no = scope_identity()
set @i =1

while @i <= @no
begin

select @guid = [guid],
@t = t
from @trans
where id = @i

insert @result
([guid], language, [text] )
select @guid, 
rows.n.value('(@language)[1]', 'nvarchar(max)'),
rows.n.value('(@text)[1]', 'nvarchar(max)')
from @t.nodes('/Translation/Entry') rows(n)

set @i = @i +1

end

select * from @result 
```

# java - 使用发布请求在 Google 日历中创建新活动

> ID：11649616
> 
> 赞同：1
> 
> 时间：2012-07-25T12:22:41.687
> 
> 标签：java, post, google-calendar-api

我正在尝试使用 POST 请求在 Google 日历中创建一个新活动，但我总是收到 400 错误。

到目前为止，我有这个：

```
String url = "https://www.googleapis.com/calendar/v3/calendars/"+ calendarID + "/events?access_token=" + token;
String data = "{\n-\"end\":{\n\"dateTime\": \"" + day + "T" + end +":00.000Z\"\n},\n" +
                        "-\"start\": {\n \"dateTime\": \"" + day + "T" + begin + ":00.000Z\"\n},\n" +
                        "\"description\": \"" + description + "\",\n" +
                        "\"location\": \"" + location + "\",\n" +
                        "\"summary\": \"" + title +"\"\n}";

System.out.println(data);

URL u = new URL(url);
HttpURLConnection connection = (HttpURLConnection) u.openConnection();           
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setInstanceFollowRedirects(false); 
connection.setRequestMethod("POST"); 
String a = connection.getRequestMethod();
connection.setRequestProperty("Content-Type", "application/json"); 
connection.setRequestProperty("Accept-Charset", "utf-8");
connection.setRequestProperty("Authorization", "OAuth" + token); 
connection.setUseCaches(false);
DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
wr.writeBytes(data);
wr.flush();

// Get the response
BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String line;
while ((line = rd.readLine()) != null) {
   System.out.println(line);
}
wr.close();
rd.close(); 
```

但是当我创建 BufferedReader 来读取我的响应时，我收到 400 错误。怎么了？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:45:16.607

您是否尝试过使用[适用于 Java 的 Google API 客户端库](http://code.google.com/p/google-api-java-client/)？它将使这样的操作变得更加简单。配置客户端库并创建服务对象后，进行 API 调用就相对容易了。此示例创建一个事件并将其插入到日历中：

```
Event event = new Event();

event.setSummary("Appointment");
event.setLocation("Somewhere");

ArrayList<EventAttendee> attendees = new ArrayList<EventAttendee>();
attendees.add(new EventAttendee().setEmail("attendeeEmail"));
// ...
event.setAttendees(attendees);

Date startDate = new Date();
Date endDate = new Date(startDate.getTime() + 3600000);
DateTime start = new DateTime(startDate, TimeZone.getTimeZone("UTC"));
event.setStart(new EventDateTime().setDateTime(start));
DateTime end = new DateTime(endDate, TimeZone.getTimeZone("UTC"));
event.setEnd(new EventDateTime().setDateTime(end));

Event createdEvent = service.events().insert("primary", event).execute();

System.out.println(createdEvent.getId()); 
```

它假定您已经创建了一个如此处所述的服务[对象](https://developers.google.com/google-apps/calendar/instantiate)。

# oracle11g - scott 帐户被锁定在 SQL Plus 中

> ID：11649621
> 
> 赞同：10
> 
> 时间：2012-07-25T12:23:02.040
> 
> 标签：oracle11g, sqlplus

当我尝试通过输入“scott”作为用户名和“tiger”作为密码登录到 Oracle Sql plus 时，它显示“帐户已锁定”。如何解锁“斯科特”帐户。SQL Plus CLI 的屏幕截图如下所示。

![屏幕截图如下](../Images/501864e357fd34d68ac9672960bdd048.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-25T13:14:25.203

使用用户登录到您的数据库`SYS`

```
SQL*Plus: Release 11.2.0.1.0 Production on Wed Jul 25 15:13:25 2012

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Enter user-name: sys as sysdba
Enter password: 
```

然后发出

```
alter user scott account unlock; 
```

然后您将能够以 scott 的身份登录。

```
conn scott/tiger 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:28:24.177

您一定来自 Oracle 8 的美好时光 :) 最终承认，大量**生产**数据库实例正在使用该帐户运行，并且其默认密码仍处于初始设置形式，这就是 Oracle 最终修补的原因那个安全漏洞。

对于您的具体问题 -这是一个解释它[的链接](http://www.tiplib.com/103/unlock-oracle-user-account)（实际上是搜索中的第一次点击）。`Google`

**编辑**：为方便起见，将链接中的答案粘贴到此处：

> 下面介绍如何锁定或解锁 Oracle 数据库用户帐户。
> 
> SQL> ALTER USER 用户名 ACCOUNT LOCK;
> 
> SQL> ALTER USER 用户名 ACCOUNT UNLOCK;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T06:12:50.423

您可以使用此 SQL 命令同时更改密码和解锁帐户：

```
ALTER USERNAME  IDENTIFIED BY Password ACCOUNT UNLOCK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T10:22:24.857

1）使用以下命令连接到数据库：

```
SQL> conn /as sysdba 
```

2）现在尝试解锁用户：

```
SQL > alter user scott account unlock; 
```

例如 ：

```
SQL> conn /as sysdba
Connected.

SQL > alter user scott account unlock;
User altered. 
```

用户 scott 现已解锁

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-16T16:40:57.837

您可以使用以下步骤来解锁帐户

SQL> select USERNAME,ACCOUNT_STATUS from dba_users where username='SCOTT';

用户名 ACCOUNT_STATUS

* * *

斯科特锁定

SQL> alter user SCOTT account unlock;

用户更改。

SQL> select USERNAME,ACCOUNT_STATUS from dba_users where username='SCOTT';

用户名 ACCOUNT_STATUS

* * *

斯科特公开赛

SQL> conn SCOTT/SCOTT 已连接。SQL>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-25T16:49:31.520

1.复制oracle路径C:\oraclexe\app\oracle\product\11.2.0\server\rdbms\admin\scott.sql

2.以 sysdba 身份与 sys 连接

3.然后粘贴到提示符-> @C:\oraclexe\app\oracle\product\11.2.0\server\rdbms\admin\scott.sql

4.然后与系统用户连接。

5.alter用户scott账号解锁；

6.alter用户scott识别的tiger；

# android - setOnItemClickListener 不能与复选框一起使用？

> ID：11649622
> 
> 赞同：2
> 
> 时间：2012-07-25T12:23:03.887
> 
> 标签：android, checkbox

我的`ListView`包含十行。每行包含`CheckBox`. 我将如何检查和取消选中`CheckBox`使用`setOnItemClickListener`

示例代码：（它不适合我）

```
listview.setOnItemClickListener( new OnItemClickListener() 
{
    public void onItemClick( AdapterView<?> parent, final View v, final int position, long id ) 
    {
        Toast.makeText( this, " Position is " + position, Toast.LENGTH_SHORT ) .show();
        holder.checkbox = ( CheckBox ) v.findViewById( R.id.lock_File_CheckBox );
        holder.checkbox.toggle();
    }
}); 
```

我们如何确定`CheckBox`是选中还是未选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:30:23.960

要在其中获取 Checkbox 的实例，您`onItemClick()`需要使用复选框实例。您可以查看它显示了我们如何在内部获取 CheckBox 的实例。`setTag()``getTag()`[`my example on my blog`](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)`onItemClick()`

在获取您的 CheckBox 实例后，`onItemClick()`更新您的列表内容并通知您的适配器`onItemClick()`，

```
if(checkbox.isChecked())
    list.get(position).setSelected(false);
else
    list.get(position).setSelected(true);

adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:24:23.327

尝试使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.html#setOnCheckedChangeListener%28android.widget.CompoundButton.OnCheckedChangeListener%29)`CheckBox`

```
CheckBox repeatChkBx = ( CheckBox ) findViewById( R.id.repeat_checkbox );
repeatChkBx.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            // perform logic
        }else
        {
            // perform logic
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:42:22.240

Checkbox 有 oncheckedChangeListener。
将这段代码写在 ListView 的 getView 函数中

```
Toast.makeText( this, " Position is " + position, Toast.LENGTH_SHORT ) .show();
                holder.checkbox = ( CheckBox ) v.findViewById( R.id.lock_File_CheckBox );
                holder.checkbox.toggle();

       holder.checkbox .setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            // perform logic
        }else
        {
            // perform logic
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:45:19.153

问题是您没有-`position`参数来确定您单击了哪个视图。OnItemClickListener 确实为您提供了此参数以了解已单击列表中的哪个项目。在位置 X 处理此项目的逻辑，您必须实现。

您的解决方案将如下所示：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long arg3) {
            // mData is the Array (or some other Collection) of Checkboxes which I gave to my ListAdapter
            ((CheckBox)mData.get(position)).toggle();
        }
    }); 
```

# .net - 有没有办法让 WrapPanel 的高度根据其子项自动计算？

> ID：11649623
> 
> 赞同：0
> 
> 时间：2012-07-25T12:23:05.057
> 
> 标签：.net, wpf, wrappanel

有没有办法让[WrapPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)的高度根据其子项自动计算？

我的意思是我希望它继续延伸，直到所有物品都安装好。

**注意**：期望的行为是垂直延伸，因为它的方向是水平的并且它的宽度是固定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:34:09.323

简单地把它`WrapPanel`放在 a 中怎么样`StackPanel`，它通常会随着内容的增长而增长？

```
<StackPanel>
    <WrapPanel Width="400" ...>
        ...
    </WrapPanel>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:40:10.830

如果您将 WrapPanel 放在高度设置为 Auto 的网格行中，它将随着更多内容的添加而增长。像这样：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <WrapPanel />
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T12:51:14.353

这个答案有点晚了，但有人可能会觉得它有用。您所要做的就是根据包裹面板的方向设置包裹面板的Horizo​​ntalAlignment 和VerticalAlignment，例如设置Horizo​​ntalAlignment="Stretch" 和VerticalAlignment="Top"，然后您的包裹面板会随着您向其添加子项而增长。

# jasper-reports - 在 Jasper Report 中使用多个 JavaBean 数据源

> ID：11649626
> 
> 赞同：3
> 
> 时间：2012-07-25T12:23:21.560
> 
> 标签：jasper-reports, osgi

由于 JasperReport 可以将 JavaBean 集合作为 DataSource。我们可以发送一个带有引用多个 SetCollection 的单个对象的 SetCollection。并使用这些引用传递给编译的 jrxml 文件，每次传递不同的 SetCollection 时，多次调用 JasperFillManager.fillReport()。只是想知道编译后的 jrxml 文件是否会被最后一次调用填充，或者是否会有每次调用 JasperFillManager.fillReport() 的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:52:06.490

这将被最后一个填充。您不能以这种方式使用多个数据源。尽管还有其他方法可以做到这一点。通过参数 Map 传递集合就是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:41:35.893

终于！！..完成任务了。感谢@Vycuss，因为我只使用子报告实现了它。

```
mainreport = JasperCompileManager.compileReport(//path of mainreport.jrxml);
subreport = JasperCompileManager.compileReport(//path of subreport.jrxml);
Map<String, Object> params = new HashMap<String, Object>();
params.put("SUB_REPORT", subreport);
params.put("DATA_SOURCE", empService.getEmpProject());

jprint1 = JasperFillManager.fillReport(mainreport,params,new JRBeanCollectionDataSource(empService.getEmpBean()));
JasperExportManager.exportReportToPdfFile(jprint1, "C://Test.pdf"); 
```

方法：在 Activator.java 中的上述代码之后，我正在创建一个 OSGi 包。在 MainReport.jrxml 中创建两个参数，第一个是没有类型的“SUB_REPORT”，第二个是 java.util.collection 类型的“DATA_SOURCE”。现在在 MainReport 中提供新的 net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{DATA_SOURCE}) 作为放置在详细信息带中的子报表元素的数据源表达式。还要确保子报表只有列标题、详细信息和列页脚区域。子报告中的字段也将为 javabean 的相应成员创建。

# c# - 任务链（等待上一个任务完成）

> ID：11649628
> 
> 赞同：19
> 
> 时间：2012-07-25T12:23:23.853
> 
> 标签：c#, .net, task-parallel-library, task

```
var tasks = new List<Task>();

foreach (var guid in guids)
{
    var task = new Task( ...);
    tasks.Add(task);
}

foreach (var task in tasks)
{
    task.Start();
    Task.WaitAll(task);
} 
```

这是 UI 线程的运行。我需要一个接一个地执行任务变量中的所有任务。问题是如果我调用 Task.WaitAll(task)，UI 会冻结。如何在不冻结 UI 的情况下执行以下逻辑？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-25T12:26:54.507

这不是任务链。

您需要使用`ContinueWith`. 最后一个任务需要更新 UI。

```
Task.Factory.StartNew( () => DoThis())
   .ContinueWith((t1) => DoThat())
   .ContinueWith((t2) => UpdateUi(), 
       TaskScheduler.FromCurrentSynchronizationContext()); 
```

**注意**最后一行，`TaskScheduler.FromCurrentSynchronizationContext()`这将确保任务将在同步上下文（UI 线程）中运行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-25T12:29:33.307

最好的方法是使用**Task Parallel Library (TPL)**和**Continuations**。延续不仅允许您创建任务流，还可以处理您的异常。这是对 TPL的一个[很好的介绍。](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)但是给你一些想法...

您可以使用启动 TPL 任务

```
Task task = Task.Factory.StartNew(() => 
{
    // Do some work here...
}); 
```

现在要在前面的任务完成（错误或成功）时开始第二个任务，您可以使用该`ContinueWith`方法

```
Task task1 = Task.Factory.StartNew(() => Console.WriteLine("Antecedant Task"));
Task task2 = task1.ContinueWith(antTask => Console.WriteLine("Continuation...")); 
```

因此，一旦`task1`完成、失败或被取消，就会`task2`“启动”并开始运行。请注意，如果`task1`在到达第二行代码之前已经完成，`task2`将被安排立即执行。`antTask`传递给第二个 lambda的参数是对前面任务的引用。有关更详细的示例，请参阅[此链接...](http://www.albahari.com/threading/)

您还可以传递先前任务的延续结果

```
Task.Factory.StartNew<int>(() => 1)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask =>Console.WriteLine(antTask.Result * 4)); // Prints 64. 
```

笔记。请务必阅读提供的第一个链接中的异常处理，因为这可能会使新手误入 TPL。

最后一件要特别关注的事情是子任务。子任务是那些被创建为`AttachedToParent`. 在这种情况下，直到所有子任务都完成后，延续才会运行

```
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew(() =>
{
    Task.Factory.StartNew(() => { SomeMethod() }, atp);
    Task.Factory.StartNew(() => { SomeOtherMethod() }, atp); 
}).ContinueWith( cont => { Console.WriteLine("Finished!") }); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T12:26:13.583

您需要使用延续：

```
lastTask.ContinueWith(() => newTask.Start()); 
```

# jquery - jquery 更改 img 属性名称而不丢失属性值

> ID：11649635
> 
> 赞同：0
> 
> 时间：2012-07-25T12:23:43.340
> 
> 标签：jquery

## 背景

我生成动态 php 库，可以在其中使用 jquery UI 拖动图像。

所有图像都有裁剪选项。

在图库中首先列出的图像是图库的“标题图像”，并且与非“标题图像”具有不同的废话率。

## 问题

我回显出所有带有属性的图像`'ondblclick="open_original=(21, 153)"'`。我需要弄清楚如何才能将其更改`open_original`为`open_original_main`仅用于画廊的第一张图像，以便它们可以具有不同的裁剪比例。

如果我使用`.attr()`，那么我会丢失所有属性值，并且无法取回它们。有没有办法只替换它们的函数名？

到目前为止，我的 jquery 解决了这个问题：

```
$(".galOf .gallery_nav:first-child .img_thumb img").ready(function(){
    $(this.ondblclick).replace("open_original","open_original_main");
}); 
```

我知道`.replace()`不是一个功能，只是阅读信息....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:37:29.887

你可以这样试试

```
var attrName = $('#image:first').attr("ondblclick");

var newAttrName = attrName.replace("open_original","open_original_main");

$('#image:first').attr("ondblclick", newAttrName ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:36:29.493

```
$(".galOf .gallery_nav:first-child .img_thumb img").ready(function(){
  var val = $(this).attr("ondblclick"); // copy attribute value
  val = val.replace("open_original","open_original_main"); //replace
  $(this).attr("ondblclick",val); // set attribute value
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:28:58.143

似乎在 php 中更改 click 事件处理程序并回显正确的事件处理程序比使用 jquery 更改它更容易。只需使用计数器或类似的东西，如果计数器等于其初始状态，则使用“open_original_main”，否则使用“open_original”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:47:43.320

形成您在评论中所说的内容，似乎您想根据缩略图的位置做不同的事情。似乎这两个函数中的大部分代码都是相同的。您不需要将所有代码重复到一个新函数中。这是您可以执行的操作：

```
function open_img() {
  // is this the first image?
  var isFirst = $(this) == $('.galOf .gallery_nav:first-child .img_thumb img');

  if(isFirst) open_original(100, 100);
  else open_original (21, 153);
} 
```

# c# - 使 WCF .NET 服务实现实现多个 ServiceContract 接口

> ID：11649640
> 
> 赞同：2
> 
> 时间：2012-07-25T12:24:00.410
> 
> 标签：c#, .net, wcf, rest, exception-handling

我正在使用 WCF 开发 RESTful Web 服务。我希望有一个`ServiceContract`我的所有服务都实现的接口，但是，我还希望每个服务都另外实现自己的方法。

在我的 Global.asax 文件中，我初始化了服务路由：

```
RouteTable.Routes.Add(new ServiceRoute("iOSAppService", new WebServiceHostFactory(), typeof(Service.iOSAppService)));
RouteTable.Routes.Add(new ServiceRoute("AndroidAppService", new WebServiceHostFactory(), typeof(Service.AndroidAppService)));
RouteTable.Routes.Add(new ServiceRoute("WindowsPhoneAppService", new WebServiceHostFactory(), typeof(Service.WindowsPhoneAppService))); 
```

每个服务都必须实现`IAppService`接口：

```
[ServiceContract]
public interface IAppService 
```

其实现如下：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class iOSAppService : IAppService 
```

但是，例如，我还希望`iOSAppService`实现 IiOSApService 接口：

```
[ServiceContract]
public interface IiOSAppService 
```

从而导致实现：

```
public class iOSAppService : IAppService, IiOSAppService 
```

但是，这会导致以下异常：

> *Service 'iOSAppService' 实现了多种 ServiceContract 类型，并且在配置文件中没有定义端点。WebServiceHost 可以设置默认端点，但前提是服务仅实现单个 ServiceContract。要么将服务更改为仅实现单个 ServiceContract，要么在配置文件中明确定义服务的端点。*

有谁知道我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:35:10.307

使您的特定界面如下所示：

```
[ServiceContract]
public interface IiOSAppService : IAppService 
```

接着

```
public class iOSAppService : IiOSAppService 
```

**编辑：**

在服务方面，请确保您拥有：

```
<system.serviceModel>
  <services>
    <service name="YourNamespace.iOSAppService">
      <endpoint binding="webHttpBinding" contract="YourNamespace.IiOSAppService" behaviorConfiguration="web">
      </endpoint>
    </service>
  </services>
  <behaviors>
    <endpointBehaviors>
      <behavior name="web">
        <webHttp />
      </behavior>
    </endpointBehaviors>
  </behaviors>
</system.serviceModel> 
```

# asp.net-mvc-3 - 我想在 ASP.NET MVC3 中调用每个操作时执行代码

> ID：11649644
> 
> 赞同：2
> 
> 时间：2012-07-25T12:24:15.917
> 
> 标签：asp.net-mvc-3, action-filter

我是 MVC3 的新手，我的网站有一个设置，如果该网站是打开的。因此，我需要在调用每个操作时检查此值。

这个想法是这样的：

```
public ActionResult SomeAction()
{
    if(!settings.SiteIsOpen)
    {
        // redirect to siteclosed page
    }
    // someaction logic...
} 
```

我知道MVC3中有一个叫Filter的东西，需要注册RegisterGlobalFilters。我想使用此功能，但我不知道实现该功能的详细步骤。

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:48:28.693

您可能必须创建一个自定义操作过滤器并像这样装饰您的操作结果

```
 [CustomActionFilter]
     public ActionResult SomeAction()
     {
     } 
```

在 CustomActionFilter 中，您必须实现抽象类 ActionFilterAttribute

```
 public class CustomActionFilter : ActionFilterAttribute
    {
       public override void OnActionExecuting(ActionExecutingContext filterContext)
       {
        // your logic here
       }
    } 
```

ASP.NET MVC 框架将调用您的操作过滤器的 OnActionExecuting 方法，然后再调用任何使用您的操作过滤器属性标记的操作方法。

有关更多详细信息，请访问此链接[http://msdn.microsoft.com/en-us/library/dd381609.aspx](http://msdn.microsoft.com/en-us/library/dd381609.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:28:10.753

看看[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute)。它应该让你开始你想去的地方。您只需要确定要在请求中的哪个位置应用您的操作。

# c# - 谁能解释一下以下两个查询的区别？

> ID：11649648
> 
> 赞同：2
> 
> 时间：2012-07-25T12:24:39.657
> 
> 标签：c#, .net, linq, linq-to-sql, sqlmetal

我正在使用 SqlMetal (linq to sql) 从数据库中检索内容。但是，我使用以下代码得到不同的结果：

```
var record1 = Enumerable.FirstOrDefault(_dataContext.StaticPageLangs, 
              r => r.selected_partial_url_id == partialUrlid 
                && r.selected_last_part_url_id == lastPartUrlId 
                && r.language_id == languageId);

var record2 = _dataContext.StaticPageLangs.FirstOrDefault(
              r => r.selected_partial_url_id == partialUrlid
                && r.selected_last_part_url_id == lastPartUrlId
                && r.language_id == languageId); 
```

填充此记录 1 后，但记录 2 为 NULL，我希望它们相同。

谁能解释其中的区别？

**编辑：**

在旁注中：

r.selected_pa​​rtial_url_id 是可为空的 int，被比较的属性也是如此 r.selected_last_part_url_id 是 int 类型，被比较的属性也是如此 r.language_id 是 int 类型，被比较的属性也是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:31:08.827

第一个查询是在内存中完成的，因为您使用的是 Enumerable.FirstOrDefault(...)。第二个查询由数据上下文转换为 SQL，并由数据库执行。

您必须检查 sql 探查器以查看执行的实际查询是什么，以了解差异是什么。您的数据库中是否有任何可以为空的列可能是问题所在？

更新

如果您在一个被转换为 SQL 语句的表达式中比较可为空的属性，请注意，如果比较的两个值都为空，这可能会出错。例子：

```
_dataContext.StaticPageLangs
    .FirstOrDefault(r => r.selected_partial_url_id == partialUrlid) 
```

如果 partialUrlid == NULL 并且存在 selected_pa​​rtial_url_id == NULL 的记录，则不会产生任何记录。原因：翻译后的 sql 包含 'selected_pa​​rtial_url_id == NULL' 而不是 'selected_pa​​rtial_url_id IS NULL'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:32:11.193

注意：以下答案适用于`record1`存在`null`和`record2`不存在`null`，这与问题相反，但*可能对其他有类似情况的读者有用*。

如果我不得不猜测，其中至少有一个`==`在 a 上`string`，这是一个区分大小写的问题。

`record1`来自 LINQ-to-Objects，因此它从服务器中提取所有行，并在本地测试它们。这些`==`是区分大小写的（C# / .NET `==`on`string`始终区分大小写）。

`record2`看起来它正在通过`IQueryable<>`. 这意味着它正在被翻译成 TSQL。SQL-Server 数据库*可以*区分大小写或不区分大小写。我猜你把它设置为不区分大小写。

现在想象一下，那`languageId`是`"en-us"`在 C# 和`'EN-US'`数据库中。

这可能导致`record1`成为`null`，但`record2`被填充。

# c# - 如何为我的服务器配置套接字

> ID：11649661
> 
> 赞同：0
> 
> 时间：2012-07-25T12:25:25.710
> 
> 标签：c#

在本地机器上，此代码有效，但当我用于其他机器时，它不起作用。

```
 socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
 PEndPoint localendpoint = new IPEndPoint(IPAddress.Parse("192.168.0.102"), 6001);
            try
            {socket.Connect(localendpoint);}
            catch
            {
                Console.Write("unable");
                Main(args);
            }
            String sms = "i;want;send;data";
            byte[] data = Encoding.ASCII.GetBytes(sms);
            socket.Send(data);
            Console.Read();
            socket.Close();    } 
```

我的服务器端：

```
 socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
 socket.Bind(new IPEndPoint(IPAddress.Parse("192.168.0.102"),6001));
 socket.Listen(100);
 Socket acepted = socket.Accept(); 
```

实际我想配置其他机器，我用不同的 IP 使用相同的代码，但没有找到。其他机器IP是192.168.0.102 位于其他地方如何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:32:39.743

只需侦听[IPAddress.Any](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.any.aspx) IP，服务器就会侦听对它分配的任何地址的请求。这将允许您从任何网络进行连接。

如果您只想让在同一台计算机上运行的程序能够连接，请使用`IPAddress.Loopback`，这将使您的套接字侦听`127.0.0.1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:50:16.580

使用 IPAddress.Any 可能会使您面临各种安全风险，因为您将监听您机器上的所有 NIC 卡，包括 Internet 和 Intranet 卡。而是将 IPAddress.Loopback 用于您的主 LAN NIC 卡。或者，将所需 NIC 卡的 IP 地址存储在数据库或配置文件中。

# php - 具有自动增量的 Doctrine 2 复合主键

> ID：11649662
> 
> 赞同：5
> 
> 时间：2012-07-25T12:25:29.220
> 
> 标签：php, doctrine-orm

在我们的数据库中，我们的表没有单个自动增量主键，而是一个复合主键，它可能包含也可能不包含自动增量字段作为该主键的第一个字段。

例如：

```
DROP TABLE IF EXISTS `gen_5_23`;
CREATE TABLE IF NOT EXISTS `gen_5_23` (
    `id_azienda` int(10) unsigned NULL DEFAULT 1,
    `id_sede` int(10) unsigned NULL DEFAULT 1,
    `revisione_documento` int(10) unsigned NULL DEFAULT 0,
    `premessa_generale` text,
    `flag_stampa` char(1) DEFAULT 'N',
    PRIMARY KEY (`id_azienda`,`id_sede`,`revisione_documento`),
    CONSTRAINT `fk_revisione_documento_gen_5_23` FOREIGN KEY (`revisione_documento`, `id_azienda`, `id_sede`) REFERENCES `agews_revisioni_documenti` (`revisione_documento`, `id_azienda`, `id_sede`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `gen_5_23_consumi`;
CREATE TABLE IF NOT EXISTS `gen_5_23_consumi` (
    `id_consumo` int(10) unsigned AUTO_INCREMENT,
    `id_azienda` int(10) unsigned NULL DEFAULT 1,
    `id_sede` int(10) unsigned NULL DEFAULT 1,
    `revisione_documento` int(10) unsigned NULL DEFAULT 0,
    `consumo` varchar(255) NULL DEFAULT NULL,
    `unita` varchar(255) NULL DEFAULT NULL,
    `valore` float(11,2) NULL DEFAULT 0,
    PRIMARY KEY (id_consumo,`id_azienda`,`id_sede`,`revisione_documento`),
    CONSTRAINT `fk_main_gen_5_23_consumi` FOREIGN KEY (`id_azienda`, `id_sede`, `revisione_documento`) REFERENCES `gen_5_23` (`id_azienda`, `id_sede`, `revisione_documento`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

gen_5_23_consumi 中的键被定义为'因为我们的 webapp 中有一些程序会盲目地取一行，只更改 id_azienda 或 id_sede 或 revisione_documento 然后重新插入它，这样该行将是有效的，因为它不会如果主键只有 id_consumo。

我们正在考虑开始使用原则 2 进行数据库管理，但我从文档中不明白如果可能的话，您将如何实现这样的实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:41:25.553

这是可能的，但不是开箱即用的。您可以将复合键作为实体的主键：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html)但应该完成自动增量实现在你的代码中，因为

> 每个具有复合键的实体都不能使用“ASSIGNED”以外的 id 生成器。这意味着必须在调用 EntityManager#persist($entity) 之前设置 ID 字段的值。

要模拟自动增量行为，您可以将带有 id 的序列表作为自动增量 PK 并为此表创建一个实体。将关系从主实体添加到表示自动递增序列的实体，请参阅上面页面中的 ArticleAttribute 类，您的代码应该非常相似：

```
Class Gen523consumiAuto
{
    /** @Id @Column(type="integer") @GeneratedValue */
    private $id;
}

Class Gen523consumi
{
    /** @Id @OneToOne(targetEntity="Gen523consumiAuto") */
    private $idConsumo;

    /** @Id @Column(type="integer") */
    private $idAzienda;

    /** @Id @Column(type="integer") */
    private $idSede;

    /** @Id @Column(type="integer") */
    private $revisioneDocumento;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T15:37:18.243

到目前为止，您无法使用 AUTO INCREMENT 选项执行复合（主、外）键。

您必须使用自己的代码从表中选择 MAX Key。

然后在您的实体 ID 上设置 MAX + 1。

# c# - 如何在 C# 中压缩 Web 服务中的响应？

> ID：11649664
> 
> 赞同：0
> 
> 时间：2012-07-25T12:25:42.073
> 
> 标签：c#, asp.net, web-services, asmx, webmethod

我想压缩 webmethod 调用的响应。此压缩数据应由不同的移动平台解压缩，如 iPhone、Android、Windows Phone 7 和 Blackberry。我检查了不同的解决方案，但没有找到任何合适的解决方案。实际上，我们有一个网络方法，它提供大约 20,000 条记录的数据（大小约为 2 MB）。我们想压缩数据以通过 HTTP 传输。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:27:01.013

由于您可能将其托管在 IIS 中，因此您应该能够启用 GZIP 压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:29:03.740

您是否尝试过使用 GZip？查看以下技术网指南： [http ://technet.microsoft.com/en-us/library/cc730629(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc730629(v=ws.10).aspx)

# mysql - 如何使用php上传mysql数据库中目录的所有图像文件

> ID：11649667
> 
> 赞同：0
> 
> 时间：2012-07-25T12:26:09.733
> 
> 标签：mysql, php-5.3

如何使用php上传mysql数据库中一个目录的所有图像文件，可以通过选择一个一个来上传所有文件，但是可以通过只选择那些目录下的所有文件的目录来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:43:04.457

您可以通过多种方式做到这一点。简单的事情是使用目录迭代器。 [http://in3.php.net/manual/en/directoryiterator.getpath.php](http://in3.php.net/manual/en/directoryiterator.getpath.php)

# java - 在任何给定时刻（在初始化和最终代码之后）使变量成为最终变量

> ID：11649671
> 
> 赞同：8
> 
> 时间：2012-07-25T12:26:20.550
> 
> 标签：java, variables, immutability, final

`final`是否可以在任何给定时刻制作变量？我想决定它什么时候是不可变的，而不仅仅是第一次分配。

这将是完美的，如果`null`不能算作一项任务。因此，如果您将其初始化为 null，则在某些代码之后的第一个赋值仍然会有一个通配符，而不必在构造函数中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T12:33:16.517

分配`final`变量后，您将永远无法更改其值，如下[所述](http://en.wikipedia.org/wiki/Final_%28Java%29)：

> 最终变量只能通过初始化程序或赋值语句初始化一次。它不需要在声明时初始化：这称为“空白最终”变量。

如果你想拥有一个在给定时间点可以变为不可变的变量，你可以做的是这样的：

```
...
private boolean isMutable;
private String someString;

public void setMutable(boolean value)
{
    this.isMutable = value;
}

public void setSomeString(String value)
{
    if (this.isMutable)
    {
        this.someString = value;
    }
}

... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T12:31:44.663

你不能。你可以做的是用一个方法封装它：

```
public boolean setValue(int i)
{
    if(isMutable)
    {
        value = i;
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T12:31:22.737

应该在声明变量时完成，因此不可能创建已经声明的变量`final`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-12T10:14:32.210

只是为了让您知道，该功能现在在草案中提出：http: [//openjdk.java.net/jeps/309](http://openjdk.java.net/jeps/309)。它被称为动态常数。检查未来的工作部分：

*   在 Java 语言中呈现常量的惰性初始化

> 因此，该值是动态的，但由于其值仅设置一次，因此它也是恒定的。

# javascript - 在javascript中从当前日期找出上一年的日期

> ID：11649672
> 
> 赞同：36
> 
> 时间：2012-07-25T12:26:20.497
> 
> 标签：javascript

我需要从当前日期找出上一年的日期，然后在 javascript 中的 jQuery UIdatepicker 中设置为 minDate

我的日期格式是`dd-mm-yy`

IE

*   当前日期是`25-07-2012`
*   我需要得到`25-07-2011`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-25T12:28:44.587

你需要使用[`getFullYear()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getFullYear)

然后生成新的日期

```
var d = new Date(2012, 7, 25);
d.setFullYear(d.getFullYear() - 1); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-09-27T06:52:02.663

尝试这个

```
var d = new Date();
var pastYear = d.getFullYear() - 1;
d.setFullYear(pastYear);
console.log(d); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-08-13T13:37:45.520

这个解决方案会有所帮助。

```
new Date(new Date().setFullYear(new Date().getFullYear() - 1)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-25T12:30:16.393

用这个 ：

```
 var date = new Date();
 var intYear = date.getFullYear() - 1; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-27T07:02:14.250

Datepicker 允许您输入一个数字作为`minDate`选项，并将其用作当前日期的偏移量。所以你可以写：

```
minDate: -365 
```

指定 1 年前。不过，这并没有考虑闰年。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-25T12:28:01.667

对于字符串：

```
curdate.substr(0, 6)+(curdate.substr(6)-1); 
```

如果您使用[`Date`object](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)，您可以使用该方法轻松减去一年`set[Full]Year`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-29T07:35:04.453

```
var today = new Date();
var curyear = today.getFullYear();
var curyearMonth = today.getMonth() + 1;
var curyearDay = today.getDate();
var lastYear = curyear - 1;
if ((curyearMonth == 2) && (curyearDay == 29)) {
    curyearDay = 28;
}

var lastYearDisplay = ("0000" + lastYear.toString()).slice(-4) + "-" + ("00" + curyearMonth.toString()).slice(-2) + "-" + ("00" + curyearDay.toString()).slice(-2);
alert("LastWeekDate : " + lastYearDisplay); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-11T07:47:41.667

我发现这非常有用：

```
new Date(new Date().setFullYear(new Date().getFullYear() - 1)).toISOString().slice(0, 10); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-31T04:35:49.003

您可以将新日期或现有日期定义为 d 变量

```
var d = new Date(); 
```

然后您可以使用 将日期、月份和年份添加到新的日期字符串中`${variableName}`，还必须将 1 添加到 d.getMonth() 并从 d.getFullYear() 中减去 1

```
var previousYearDate = `${d.getDate()}-${d.getMonth() + 1}-${d.getFullYear() - 1}`; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-07-25T12:50:07.500

为了避免 Date 对象（如果这是 OP 希望的）：

```
var currDate = '25-07-2012';
var dateParts = currDate.split('-');
dateParts[2] = parseInt(dateParts[2], 10) - 1;
alert(dateParts.join('-'));​ 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-02-19T00:22:33.387

```
var date = CALC.today(); //(function in my dev-enviro - gives today's date)
var year = formatDate(date, 'yyyy'); //year is 2016
year = parseInt(year);               //make sure '2016' becomes an integer
year = year -1;                      // var year is now: 2015.

//its been a while, but that's what I did from memory. 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-07-18T15:49:44.677

```
 function getTodayDate() {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is not 0!
        var yyyy = today.getFullYear();
        if (dd < 10) { dd = '0' + dd }
        if (mm < 10) { mm = '0' + mm }
        today = yyyy + '-' + mm + '-' + dd;
        return today;
    };
    function getYearAgo(){
    var lastYear = new Date();
    var dd = lastYear.getDate();
    var mm = lastYear.getMonth() + 1; //January is not 0!
    var yyyy = lastYear.getFullYear(getTodayDate) - 1;
    if (dd < 10) { dd = '0' + dd }
    if (mm < 10) { mm = '0' + mm }
    lastYear = yyyy + '-' + mm + '-' + dd;     
    return lastYear;
    } 
```

# php - 使用 PHP 创建临时文件

> ID：11649678
> 
> 赞同：1
> 
> 时间：2012-07-25T12:26:32.470
> 
> 标签：php, image, temporary

我的 PHP 站点类似于 CGI：它解析参数，使用提供的参数调用应用程序，然后将结果提供给用户。

我的应用程序输出是图像（更准确地说：jpeg 图像）。现在我只是将图像保存到用户可访问的目录并返回链接。

问题是，一段时间后这个目录将充满图像。

是否有任何简单的解决方案可以从磁盘读取此图像文件，将其提供给用户浏览器然后将其删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:04:43.233

为什么不提供一个链接，而不是提供一个脚本来发送标题（“Content-type：image/jpeg”）然后是图像本身？

# image - wget来自单个网页的所有图像

> ID：11649679
> 
> 赞同：5
> 
> 时间：2012-07-25T12:26:34.057
> 
> 标签：image, web, download, wget

有没有办法让 wget 下载从给定网页直接链接的所有图像文件？

在这种特殊情况下，网页包含几个“img”标签，我只想下载这些图像。我似乎无法让它与 -r、-l、-p、-A 等的任何组合一起使用。无论我做什么 wget 都会完全忽略图像，即使我尝试指定 -r -p -A .jpg

当我使用 -r 时，它似乎也会为同一页面生成很多请求，但附加了各种不同的查询字符串。如果我也能以某种方式避免这种情况，那就太好了。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-31T09:21:18.107

`wget -nd -p --accept=.jpg <url>`

`-nd`不会创建目录 `-p`说下载页面的必要条件

这不会递归，所以它只会下载`jpg`当前页面的图像，`-r`如果你想做所有页面，你可以添加

# java - 为什么我不能创建一个泛型类型的数组？

> ID：11649680
> 
> 赞同：11
> 
> 时间：2012-07-25T12:26:42.350
> 
> 标签：java, language-design, language-details

简而言之，这不会编译：

```
public <A> void test() {
    A[] temp = new A[]{};
} 
```

是因为向后兼容性的问题，还是语言设计中的一些基本因素阻止了它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:59:26.880

底线是表示数组的类必须知道组件类型。因此 Class 对象上的方法：

```
public Class<?> getComponentType()
Returns the Class representing the component type of an array. If this class does not represent an array class this method returns null. 
```

所以当你尝试：

```
 A[] a = new A[0]; 
```

在编译时，很明显我们不知道类型，因为它是一个泛型参数。在运行时，由于类型擦除，我们不知道类型。所以实例化数组是不可能的。

将上述语句视为等效于：

```
 A[] a = (A[])Array.newInstance(???, 0); 
```

并且由于类型擦除，我们无法在运行时获取 A 的类。

有人问为什么不让编译器简化为 Object[] 或 Number[] 或类似的东西？

这是因为会根据组件类型返回不同的 Class。所以：

```
 new Object[0].getClass() 
 new Integer[0].getClass() 
```

不是同一个班级。特别是类上的“getComponentType()”方法会返回不同的值。

所以如果你把它简化为 Object[] 而不是 A[]，你实际上并没有得到 A[] 类型的东西，你得到的是 Object[]。Object[] 不能大小写为 Integer[] 并且会产生 ClassCastException。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T12:28:22.543

类型[擦除](http://en.wikipedia.org/wiki/Type_erasure)是您要查找的词。这基本上意味着[通用](http://en.wikipedia.org/wiki/Generics_in_Java)信息在编译时被删除。造成这种情况的主要原因是向后兼容性。旧程序仍应在新的 java 虚拟机上运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T13:16:45.993

在 Java 中，数组和泛型的类型系统是不兼容的。有两个主要的差异领域：**动态与静态类型检查**和 **协方差**。

泛型是静态检查的：也就是说，编译器确保类型定义是一致的。“类型擦除”是一种妥协，以确保 JVM 中的向后兼容性。编译后，泛型类型定义不再可用。例如`List<T>`变成`List`.

相反，数组是动态类型检查的。考虑以下示例：

```
String strings[] = {"a","b","c"};
Object simple[] = strings;
simple[0] = new Object(); // Runtime error -> java.lang.ArrayStoreException 
```

协变是容器基于内容的继承关系。给定类型 A,B 和容器 C，如果 B isAssignableFrom(A) => C isAssignable C。

Java 中的数组是协变的，在前面的示例中，鉴于`Class<Object>.isAssignableFrom(Class<String>) => Object[] is assignable from String[]`

相反，泛型类型在 Java 中不是协变的。使用相同的示例：

```
List<String> stringList = new ArrayList<String>();
List<Object> objectList = stringList; // compiler error - this is not allowed. 
```

考虑到泛型实现的类型擦除，类型信息会在转换中丢失，因此如果您可以创建泛型类型的数组，动态类型检查将受到影响。

进一步阅读这些问题的复杂性和影响：[Java 泛型中的数组](http://www.angelikalanger.com/Articles/Papers/JavaGenerics/ArraysInJavaGenerics.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T12:34:23.503

由于无法工作的相同（或几乎相同）原因，这`new A()`不起作用：您期望编译器知道`A`它显然无法知道的运行时类型。如果 Java 泛型类似于 C++ 模板，这*将*`A`起作用，其中为涉及.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:28:45.033

是的，有一个根本原因，归结为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

考虑以下代码段：

```
A[] temp = new A[5];       // Assume this would compile.

Object[] objects = temp;   // This is allowed, since A extends Object.

objects[0] = new String(); // This does *not* throw an ArrayStoreException
                           // due to type erasure since the original type of A
                           // is now Object.

A t = temp[0];             // Now this seemingly innocent line would *fail*. 
```

**相关问题：**

*   [如何在 Java 中创建一个泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

# c++ - c++ 在没有增量迭代器的情况下调用 list.erase 后我的程序在哪里“运行”？

> ID：11649681
> 
> 赞同：2
> 
> 时间：2012-07-25T12:26:44.557
> 
> 标签：c++

cpp的新手。当我在迭代器上调用擦除而不增加它时，我的程序立即退出，没有任何迹象或崩溃。在下面的示例中，仅打印了“After if condition”，并且没有打印。没有显示错误。但是，如果我**正确调用**list.erase(it++); 比它打印所有。 **我的问题是当我不正确时发生了什么。为什么我没有看到任何崩溃或退出？我的担心和我问这个问题的原因是关于捕捉这些类型的崩溃，为什么我没有在 catch 块中捕捉到它？有没有办法抓住它？**

```
int main(int argc, char *argv[]) {
    try {
        list<int>::iterator it;
        list<int> list;
        list.push_back(1);
        for (it = list.begin(); it != list.end(); ++it) {
            if ((*it) == 1) {
                list.erase(it);
            }
            cerr << "After if condition " << endl;
        }
        cerr << "After for condition" << endl;
    } catch (...) {
        cerr << "catch exception" << endl;
    }
    cerr << "Finish" << endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:32:21.053

来自[`std::list::erase()`](http://en.cppreference.com/w/cpp/container/list/erase)：

> 对已擦除元素的引用和迭代器无效。

`it`被擦除，然后通过`++it`导致未定义的行为来使用：意味着任何事情都可能发生。

`erase()`返回*最后一个删除元素之后的迭代器*，这意味着您可以存储返回值`erase()`并继续，但循环需要修改以避免`erase()`在执行后跳过元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:28:31.637

使用迭代器时，您不能更改容器。`erase`立即使迭代器无效。

你可以做的是这样的：

```
for( list<int>::iterator it = list.begin(); it != list.end();)
  if( (*it) == 1 )        
    it=list.erase(it);
  else
    ++it; 
```

（从[STL 列表中删除项目](https://stackoverflow.com/questions/3866642/stl-list-erase-items)）

或者

```
for( list<int>::iterator it = list.begin(); it != list.end();)
  if( (*it) == 1 )        
    list.erase(it++);
  else
    ++it; 
```

有很多帖子。搜索“擦除列表迭代器”！

**编辑：**如果您不这样做，即使迭代器无效并随后增加，则行为未定义。这意味着它可能因系统、编译器和编译器的不同而不同。

如果它没有崩溃并给出正确的行为，那么你很幸运。如果它没有崩溃并执行其他操作，那么您很不幸，因为这是一个很难找到的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T12:29:30.420

`it`抹掉后就不能使用了。调用 ++it 会导致崩溃。在擦除元素之前存储下一个迭代器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:29:20.053

诀窍是使用`erase(it++)`.

# php - 从表单中的字段到电子邮件（未知发件人）

> ID：11649689
> 
> 赞同：0
> 
> 时间：2012-07-25T12:26:58.767
> 
> 标签：php, forms

所以我在 From: 中显示发件人全名时遇到了麻烦，以电子邮件脚本的形式。

我有这个：

```
<?php

if(!$_POST) exit;

if (!defined("PHP_EOL")) define("PHP_EOL", "\r\n");

$name = $_POST['name'];
$comments = $_POST['comments'];

if(trim($name) == '') {
    echo '<div class="error_message">Attention! You must enter your name.</div>';
    exit();
}

$address = "example@example.com, example@example.com";

$e_subject =  '' . $name . ' has confirmed their attendance.';

$e_body = "$name blah blah blah blah" . PHP_EOL . PHP_EOL;
$e_content = "\"$comments\"" . PHP_EOL . PHP_EOL;
$e_reply = "Please do not reply to this email";

$msg = wordwrap( $e_body . $e_content . $e_reply, 70 );

$headers = "From: $name" . PHP_EOL;
$headers .= "MIME-Version: 1.0" . PHP_EOL;
$headers .= "Content-type: text/plain; charset=utf-8" . PHP_EOL;
$headers .= "Content-Transfer-Encoding: quoted-printable" . PHP_EOL;

if(mail($address, $e_subject, $msg, $headers)) {

    // Email has sent successfully, echo a success page.

    echo "<fieldset>";
    echo "<div id='success_page'>";
    echo "<h1>Success!</h1>";
    echo "<p>Thank you</p>";
    echo "</div>";
    echo "</fieldset>";

} else {

    echo 'ERROR!';

} 
```

如果在名称字段中仅输入一个单词/名称，但只要它们是两个或多个单词，它就会显示（未知发件人）。

我可以将名称分成两个字段，但我真的不想这样做。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:43:12.570

EMail-Header 中的 From-Field 在[RFC 5322](https://www.rfc-editor.org/rfc/rfc5322)中定义。应该有一个电子邮件地址。当它们以逗号分隔时，您可以使用更多的电子邮件地址。如果要在 From-Header 中显示名称，则必须根据提到的 RFC 执行此操作。由于我还没有阅读完整的 RFC，我只能说，这可能是如何工作的，但我认为它会以这种方式工作：

```
"Name Surname" <email@domain.tld> 
```

这意味着您的代码：

```
$headers = "From: \"$name\" <$email>" . PHP_EOL; 
```

# objective-c - 有没有办法制作一个全局标签

> ID：11649693
> 
> 赞同：-1
> 
> 时间：2012-07-25T12:27:06.527
> 
> 标签：objective-c, cocoa-touch, xcode4.3

我想从您知道的另一个控制器更改标签的文本，例如定义全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:44:42.553

在 AppDelegate 中定义并创建其属性并分配 UILabel

现在在整个应用程序中您想要的任何地方使用该标签

```
AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[self.view addSubView:objAppDelegate.label]  // your gobal label added 
```

在任何地方更改其文本

```
[objAppDelegate.label setText:@"New Text"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:41:18.990

有多种方法可以做到这一点。不过，您可以更具体地表达您的问题。

您可以使其他视图控制器可以访问您的标签。这样做你需要知道你想从哪里访问标签的拥有视图控制器。

或者，您可以在 UIApplicationDelegate 的子类中存储对标签的引用，并使用 [[UIApplication getSharedApplication] delegate] 访问它并从任何地方访问它。如果您这样做，请不要忘记在标签被销毁时取消该引用。

但是，在不知道您想要实现什么以及为什么的情况下，我不能说这是否是可取的，使 UILable 对象可以从其视图的控制器外部访问。很可能不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:45:30.070

a) 将指向标签的指针传递给控制器​​ B 并使用它来更改文本。

b) 定义协议并在控制器 B 中定义委托成员。在控制器 A（拥有标签）中实现委托方法，并将传递的文本设置为委托方法的参数。调用控制器 B 中的委托方法并将要设置的文本传递给标签。

c) 将控制器 A 注册为某个通知的观察者。在控制器 B 中发布通知并将文本添加到用户信息字典。在控制器 A 中实现一个方法，该方法接收通知并设置在用户信息字典中传递的文本。

b) 在大多数情况下是最合理的。a) 不干净。c) 是矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:07:16.003

随着 iOS 5 引入自动引用计数，强制某些编程规则和限制，某些编程结构和公认的做法不再可能。extern 的使用是链接器不赞成的基于 C 的指令之一。实际上，如果您尝试在启用 ARC 的情况下使用，您将收到链接错误。

但是，在 iOS 5 中使用全局变量仍然是很有可能的，您只需使用 #define 指令即可。

以下步骤演示了一种使用全局变量的可能解决方案。

* * *

1）声明一个全局变量：

```
 NSString * gvar;
    @interface AppDelegate : UIResponder <UIApplicationDelegate> 
```

* * *

2）初始化全局变量：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
     gvar = [[NSString alloc] initWithString:@"Name1"];
    return YES;
} 
```

* * *

3)在您的两个 ViewController 中**导入**此 AppDelegate 文件。

* * *

4）在您的第一个 ViewController 中将 gvar 分配给 UILabel ：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
     self.label.text= gvar;
} 
```

* * *

5）从您的第二个 ViewController 更改其值：

```
gvar = [self.songArray objectAtIndex:indexPath.row]; 
```

* * *

一旦你回到之前的 viewController，你的标签就会显示新的文本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T12:46:10.217

我认为你最好使用协议来做到这一点

# iphone - 如何根据 UITextView 的内容大小动态改变 UIView 的 Y 轴

> ID：11649696
> 
> 赞同：0
> 
> 时间：2012-07-25T12:27:21.637
> 
> 标签：iphone, ios, uiview, height, uitextview

我有一个 UITextView 作为 UIView 的子视图。我已将 UIView 放在屏幕底部。视图控制器有 UITabViewController。我给了 UIView 的帧大小，如下所示，

```
toolBarView1 = [[UIView alloc] initWithFrame:CGRectMake(0, 330, 320, 40)];
[self.view addSubview: toolBarView1];
TextView1 = [[UITextView alloc] initWithFrame:CGRectMake(35, 7.5, 210, 25)];
textViewImageView1 = [[UIImageView alloc]initWithFrame: CGRectMake(0, 0, 210, 25)];
[TextView1 addSubview: textViewImageView1];
[toolBarView1 addSubview: TextView1]; 
```

我想根据 UITextView 内部的文本增加 UITextView 的高度。我已经使用了下面的代码，

```
 CGRect frame = messageTextView1.frame;
    frame.size.height = messageTextView1.contentSize.height;    

    NSLog(@"TextViewHeight With Texts : %f", frame.size.height);
    int height = frame.size.height;
    NSLog(@"TextViewHeight With Texts : %d", height);

    height = height + 10;
    NSLog(@"Height Plus 10 : %d", height);
    height = 370 - height;
    NSLog(@"ToolBarView1 Y axis : %d", height);

    messageTextView1.frame = frame;
    textViewImageView1.frame = CGRectMake(0, 0, messageTextView1.frame.size.width, messageTextView1.frame.size.height);
    toolBarView1.frame = CGRectMake(0, height, 320, messageTextView1.frame.size.height+10); 
```

我想将 UIView 和 UITextView 放在屏幕本身的底部，但我想根据 UITextview 高度增加 UIView 和 UITextview 的高度以及 UIView 的 Y 轴。谁能帮我做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:32:04.000

你可以像这样预览 uitextview 的高度

```
 `CGFloat constrainedSize = 252.0f;//your uitextview widght
    UIFont * myFont = [UIFont fontWithName:@"Arial" size:19];//your uitextview font
    CGSize textSize = [dis.text sizeWithFont: myFont
                          constrainedToSize:CGSizeMake(constrainedSize, CGFLOAT_MAX)
                              lineBreakMode:UILineBreakModeWordWrap];
    CGRect textViewFrame = CGRectMake (0, 0, textSize.width, textSize.height);`

然后你可以从 textViewFrame 获取你的 uitextview 高度 
```

# javascript - Javascript 在 Chrome 和 Chrome 应用程序中的行为不同

> ID：11649697
> 
> 赞同：1
> 
> 时间：2012-07-25T12:27:27.317
> 
> 标签：javascript, google-chrome-extension, code-access-security

我正在学习如何开发离线 chrome 应用程序。

我有三个组件：main.html、main.css、main.js

Main.js 使用此标记加载到 main.html /html/head/script 中：

```
<script type="text/javascript" src="main.js"></script> 
```

初始动作由 body 标签中的 onLoad 事件触发：

```
<body onLoad="initOnLoad(); "> 
```

函数 initOnLoad() 操作通过其 HTML id 找到的一些元素：

```
...
1:  function initOnLoad() {
2:     alert("initOnLoad started");
3:     initWaveArray();
4:     addWaveButtons(document.getElementById("wave_selector"));
5:     addBandButtons(document.getElementById("band_selector"));
6:     e = document.getElementById("wave_HF");
7:     activeWaveDiv = e;
8:     setActiveWave();
9:     initDateTime();
10: } 
```

第 4 行和第 5 行中的调用将一些元素填充到 main.html 中。

现在，当我在开发过程中在 Chrome 中加载此页面时，一切都按预期工作。但是当我将我的项目加载为 Chrome 应用程序时，我在**manifest.json**中有这些属性：

```
"app": {"launch": {"local_path": "main.html"}},
"web_accessible_resources": [
  "main.js", "main.css", "main.html"]
... 
```

当我启动应用程序时，它会加载页面，并启动*initOnLoad()*函数，但在第 4 行和第 5 行中对*document.getElementById()的调用会产生****空***引用，因此 HTML 文档中没有加载任何内容。

虽然这显然似乎与安全有关，但我找不到我的错误在哪里。

# c# - C# - 如何使用 RabbitMQ 启用 FlowControl

> ID：11649698
> 
> 赞同：0
> 
> 时间：2012-07-25T12:27:29.733
> 
> 标签：c#, rabbitmq, flow

有谁知道如何在 C# 中启用 RabbitMQ 流控制？我试过这样的事情：

```
 channel = connection.CreateModel();
    channel.ChannelFlow(true);
    channel.FlowControl += new RabbitMQ.Client.Events.FlowControlEventHandler(channel_FlowControl); 
```

基本上，我希望当 RabbitMQ 连接进入 FlowControl 模式时触发“channel_FlowControl”事件 - 但不知何故这不会发生。

任何人都知道我如何正确处理它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:37:50.827

好吧，经过一番讨论，真的！！！来自 RabbitMQ 的好人，答案很简单。

**你不能**

C# 驱动程序中没有可用的回调，所以推荐的方法是使用一个小的内部异步预队列并将你的东西放在那里，一个异步线程读取该队列并将其发布给 rabbit。

这样，当兔子放慢速度并且您也需要放慢输入时，您会注意到，因为内部队列在增长，您可以检测到这种增长并采取相应的行动。

再次感谢 RabbitMQ 邮件列表中乐于助人的人们，即使这不是我想听到的那种回复；-)

# api - 亚马逊网络服务问题

> ID：11649700
> 
> 赞同：3
> 
> 时间：2012-07-25T12:27:46.863
> 
> 标签：api, amazon-ec2, amazon-web-services, amazon

运行 EC2 API 工具后，我运行命令：./ec2-cmd

但是，我仍然收到错误：错误：无法找到或加载主类 com.amazon.aes.webservices.client.cmd。

根据指南：[http ://docs.amazonwebservices.com/AmazonEC2/gsg/2006-06-26/running-an-instance.html](http://docs.amazonwebservices.com/AmazonEC2/gsg/2006-06-26/running-an-instance.html)

我想运行 ec2 命令，但由于上述错误，没有任何命令运行。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T23:02:53.113

您必须正确配置环境变量 $JAVA_HOME 和 java。Path 环境变量还需要包含 EC2_HOME 目录。

```
export EC2_HOME=/usr/local/ec2/ec2-api-tools-xxxversion
export PATH=$PATH:$EC2_HOME/bin 
```

您也可以参考此处的说明：[http](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html) ://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T09:59:27.243

这应该解决它：

```
export CLASSPATH=$EC2_HOME/lib 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T17:41:08.603

我在 Mac OS X Yosemite 上使用通过自制软件安装的命令行工具 1.7.1.0。

问题是 ec2-cmd 正在设置类路径以在我的 $EC2_HOME 中查找 lib/ 文件夹。那个文件夹不存在。我通过在我所有的罐子所在的位置添加一个符号链接来修复它：

```
cd $EC2_HOME
ln -s libexec/lib lib 
```

然后我所有的命令都开始工作了。

# xml - Mule 3.2 - 为什么我会从 XSLT 转换中得到这个 SAXParseException？

> ID：11649701
> 
> 赞同：0
> 
> 时间：2012-07-25T12:27:47.783
> 
> 标签：xml, xslt, mule, transformer

使用 Mule 3.2 我正在尝试从我的 mule 流程中构建 XML，但我收到此错误我在网上尝试了一些想法，但我不断收到此消息。

```
 <mulexml:xslt-transformer maxIdleTransformers="2" maxActiveTransformers="5" doc:name="XSLT">
    <mulexml:xslt-text>
        <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
            <xsl:output method="xml" omit-xml-declaration="yes" />
                <xsl:param name="numericId"/>
                <xsl:param name="name"/>
                <xsl:param name="url"/>                             
                <xsl:template match="*">            
                <Publisher>
                <numericId><xsl:value-of select="$numericId"/></numericId>
                <name><xsl:value-of select="$name"/></name>
                <url><xsl:value-of select="$url"/></url>                    
                </Publisher>                    
            </xsl:template>
        </xsl:stylesheet>
    </mulexml:xslt-text>
    <mulexml:context-property key="numericId" value="#[header:SESSION:numericId]"/>
    <mulexml:context-property key="name" value="#[header:SESSION:name]"/>
    <mulexml:context-property key="url" value="#[header:SESSION:url]"/>     
    </mulexml:xslt-transformer> 
```

错误：

```
******************************************************************************** Message               : org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog. (net.sf.saxon.trans.DynamicError) Code                  : MULE_ERROR-64999
-------------------------------------------------------------------------------- Exception stack is:
1\. Content is not allowed in prolog. (org.xml.sax.SAXParseException)   org.apache.xerces.util.ErrorHandlerWrapper:-1 (null)
2\. org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog. (net.sf.saxon.trans.DynamicError)   net.sf.saxon.event.Sender:308 (null)
3\. org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog. (net.sf.saxon.trans.DynamicError) (org.mule.api.transformer.TransformerException)   org.mule.module.xml.transformer.XsltTransformer:190 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/transformer/TransformerException.html)
--------------------------------------------------------------------------------
Root Exception stack trace: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1;
 Content is not allowed in prolog.
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)
at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:51:07.190

当文件的打开和 xml 声明之间有空格时，就会发生这种情况。如果你没有，它可能在某些情况下引起（我知道它发生在 java 中）如果你正在处理一个开头有[BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)标记的 UTF-8 文件。

这被错误地解释为那个空间。我知道我之前遇到问题时（在 java 5 中），我必须编写一个 UTF8 处理输入源来纠正它（如果你不能删除标记）。

编辑：不仅仅是 SAX，它是一个 java 问题[错误描述](http://bugs.sun.com/view_bug.do?bug_id=4508058)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:37:16.980

在执行 XSLT 转换器之前，确保消息负载中有 XML。例如，您可以在 XSLT 之前使用 Object-to-XML 转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:12:26.707

尝试`xslt-text`将 XSL 文件中的 外部化以避免干扰 XML Mule 配置。

此外，您没有展示如何为 XSLT 转换器提供数据：问题可能出在它的前面，在您提供的数据中。

# c# - 在 Linq 中使用“not StartWith”时出现 NullReferenceException

> ID：11649708
> 
> 赞同：1
> 
> 时间：2012-07-25T12:28:17.090
> 
> 标签：c#, linq

我正在尝试删除所有具有不以特定文本开头的属性值的元素

感谢 Jon Skeet，我得到了第一部分，但是有些元素不包含此属性，因此我收到`NullReferenceExpection`消息：“对象引用未设置为对象的实例”

我添加了一个额外的空值检查，但它仍然没有任何想法？

```
elements =(from el in xmlFile.Root.Elements(elementName)
where ( !el.Attribute(attributeName).Value.Equals(DBNull.Value)
&& !el.Attribute(attributeName).Value.StartsWith(searchBeforeStar))
select el); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:32:57.717

调用属性`Equals`会`null`触发异常。没有必要（事实上，这是不正确的）将`XAttribute`的值与进行比较`DBNull`，因为 LINQ2XML 使用“普通”`null`来表示缺失的属性。

试试这个：

```
elements =(from el in xmlFile.Root.Elements(elementName) where (
    el.Attribute(attributeName) != null &&
    el.Attribute(attributeName).Value != null && 
    !el.Attribute(attributeName).Value.StartsWith(searchBeforeStar)
)select el); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:34:34.063

您必须在测试之前测试您的节点是否包含该属性。

添加`el.Attribute(attributeName) != null`：

```
elements =(from el in xmlFile.Root.Elements(elementName) 
           where ( el.Attribute(attributeName) != null
                && !el.Attribute(attributeName).Value.Equals(DBNull.Value) 
                && !el.Attribute(attributeName).Value.StartsWith(searchBeforeStar))
           select el); 
```

# javascript - 闭包中的局部变量从外部更改。这是一个javascript错误还是我做错了什么？

> ID：11649719
> 
> 赞同：1
> 
> 时间：2012-07-25T12:28:51.987
> 
> 标签：javascript

我正在使用关闭来保护隐私。我不明白为什么以及如何从闭包之外更改局部变量。

我写了一个脚本来向你解释问题。

```
var MyAjax=(function(){
  //Create a local variable for privacy
  var _opts={ 
       cache:true
   }
  ,getDefaultOptions=function(){
      return _opts
  };

  //return only getDefaultOptions function
  return { 
     getDefaultOptions:getDefaultOptions
  }
})()

//I am merging new ajax options with default options.
var defaults=MyAjax.getDefaultOptions();
var reqOptions= $.extend(defaults,{cache:false});

// I am getting expected result
console.log("extended var",reqOptions) //{cache:false}

// I am getting non expected result
// I should get {cache:true} but I am getting { cache:false }
console.log("defaults",MyAjax.getDefaultOptions()) //{cache:false} 
```

为什么会发生这种情况以及如何发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:29:55.070

该`$.extend()`函数修改第一个参数。如果您不希望这样做，请执行以下操作：

```
var reqOptions = $.extend({}, defaults, {cache: false}); 
```

详细说明：您将对象的引用作为第一个参数传递。即使它是该闭包的私有变量，getter 函数也返回了对它的引用，因此它是“可见的”。jQuery 函数的编写方式总是直接更新作为第一个参数传递的对象。因此，为确保您不会更改该对象，只需传入一个新创建的对象作为第一个参数。

# php - PHP 中的 === 在字符串比较中是二进制安全的吗？

> ID：11649721
> 
> 赞同：8
> 
> 时间：2012-07-25T12:28:54.643
> 
> 标签：php

Php 函数`strcmp`和`strcasecmp`该家族的其他函数是二进制安全的。

运算符`==`和`===`二进制安全吗？

如果是的话，应该在二进制安全字符串比较中使用什么：函数还是运算符？

（*二进制安全*：“可以应用于变量而不改变其当前状态的运算符或函数”）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-29T14:21:51.117

根据您的定义，它们是，但是如果您正在比较包含二进制数据的字符串，您应该知道在 PHP`$a == $b`中即使 $a 和 $b 不同也可以返回 true 的事实。例子：`"2e2" == "200"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T12:34:06.203

所有比较运算符都是二进制安全的，== 和 ===（与 type 比较）是比较运算符，所以它们是......

# png - 使用 zlib 编写 PNG

> ID：11649732
> 
> 赞同：0
> 
> 时间：2012-07-25T12:29:34.007
> 
> 标签：png, zlib

我正在尝试直接使用 zlib 编写 PNG。但是，输出文件不正确。在 frhed 中查看它，IDAT 块显示周期性模式和一大块零。这表明调用 zlib 时出现问题。这是代码：

```
#include "FrameGrabber.h"
#include "Image.h"
#include "crc.h"
#include <zlib.h>
#include <stdint.h>

#include <cstdio>
#include <cassert>

template<class T>
void assign(void* addr,T x)
{
T* p_out= (T*)addr ;
*p_out=x;
}

inline int32_t swap_bytes(int32_t x)
{
asm("bswap %1":"=r"(x):"r"(x):);
return x;
}

//Input is BGRx (convert to BGR (should be swapped to RGB later) and add a byte in the beginning)
void filterApply(const unsigned char* const* scanlines,char* buffer_png,int width,int height)
{
for(int k=0;k<height;++k)
    {
    *buffer_png=0;
    ++buffer_png;
    for(int l=0;l<width;++l)
        {
        assign(buffer_png,( (int32_t*)(scanlines[k])  )[l] );
        buffer_png+=3;
        }
    }
}

size_t compress(const char* buffer_uncompressed,char* buffer_compressed,size_t length_in)
{
z_stream stream;
memset(&stream,0,sizeof(stream));
//  15 bits=32K?
deflateInit2(&stream,6,Z_DEFLATED,15,9,Z_FILTERED);

stream.avail_in=length_in;
stream.next_in=(unsigned char*)buffer_uncompressed;
stream.avail_out=length_in;
stream.next_out =(unsigned char*)buffer_compressed;
do
    {       
    deflate(&stream, Z_FINISH);
    }
while (stream.avail_out == 0);
deflateEnd(&stream);
return stream.total_out;
}

const size_t CHUNK_BASE_SIZE=12;

void Chunk_sizeSet(char* chunk,uint32_t size)
{assign(chunk,swap_bytes(size));}

void Chunk_IDSet(char* chunk,uint32_t id)
{assign(chunk+4,swap_bytes(id));}

void Chunk_CRCSet(char* chunk,const PngCRC& crc,uint32_t size_chunk_data)
{assign(chunk+8+size_chunk_data, swap_bytes(crc(chunk+4,size_chunk_data+4)) );}

const size_t IHDR_SIZE=13;
const int IHDR_COLORTYPE_RGB=2;

void IHDR_widthSet(char* chunk,int32_t width)
{assign(chunk+8,swap_bytes(width));}

void IHDR_heightSet(char* chunk,int32_t height)
{assign(chunk+12,swap_bytes(height));}

void IHDR_bitDepthSet(char* chunk,char bd)
{chunk[16]=bd;}

void IHDR_colorTypeSet(char* chunk,char ct)
{chunk[17]=ct;}

void IHDR_compressionMethodSet(char* chunk,char cmprm)
{chunk[18]=cmprm;}

void IHDR_filterMethodSet(char* chunk,char filter)
{chunk[19]=filter;}

void IHDR_interlaceMethodSet(char* chunk,char interlace)
{chunk[20]=interlace;}

int main()
{
PngCRC crc;                              //The CRC code works
char signature[8]={137,80,78,71,13,10,26,10};

char IEND[CHUNK_BASE_SIZE];
Chunk_sizeSet(IEND,0);
Chunk_IDSet(IEND,0x49454e44);
Chunk_CRCSet(IEND,crc,0);

FrameGrabber grabber(GetDesktopWindow()); //Grab the desktop (works)
Image img(grabber);
grabber.grab();

char IHDR[CHUNK_BASE_SIZE+IHDR_SIZE];
Chunk_sizeSet(IHDR,CHUNK_BASE_SIZE+IHDR_SIZE);
Chunk_IDSet(IHDR,0x49484452);
IHDR_widthSet(IHDR,grabber.widthGet());
IHDR_heightSet(IHDR,grabber.heightGet());
IHDR_bitDepthSet(IHDR,8);
IHDR_colorTypeSet(IHDR,IHDR_COLORTYPE_RGB);
IHDR_compressionMethodSet(IHDR,0);
IHDR_filterMethodSet(IHDR,0);
IHDR_interlaceMethodSet(IHDR,0);
Chunk_CRCSet(IHDR,crc,IHDR_SIZE);   

size_t size_uncompressed=(1+3*grabber.widthGet())*grabber.heightGet();
char* img_png_uncompressed=(char*)malloc(size_uncompressed);
filterApply(img.rowsGet(),img_png_uncompressed,grabber.widthGet(),grabber.heightGet());

    //The compressed chunk should not be larger than the uncompressed one.
char* IDAT=(char*)malloc(size_uncompressed+CHUNK_BASE_SIZE);

int32_t size_idat=compress(img_png_uncompressed,IDAT+CHUNK_BASE_SIZE,size_uncompressed);
Chunk_sizeSet(IDAT,size_idat);
Chunk_IDSet(IDAT,0x49444154);
Chunk_CRCSet(IDAT,crc,size_idat);

FILE* file_out=fopen("test.png","wb");

fwrite(signature,1,sizeof(signature),file_out);
fwrite(IHDR,1,sizeof(IHDR),file_out);
fwrite(IDAT,1,size_idat,file_out);
fwrite(IEND,1,sizeof(IEND),file_out);
free(IDAT);
fclose(file_out);

return 0;
} 
```

编辑：在 filterApply 中发现了一个错误。现在我没有得到任何大的空块，但文件仍然无效。它只会影响输入数据，因此它是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:37:05.683

首先，只需使用[libpng](http://www.libpng.org/pub/png/libpng.html)，您就不必担心这些。

您设置的块大小不正确。块大小不包括长度、块 id 或 crc。关于计算的内容，您还错误地计算了 crc。而且您正在将压缩数据写入 IDAT 块中的错误位置。我会停在那里 - 你需要更仔细地阅读[PNG 规范。](http://www.libpng.org/pub/png/spec/1.2/PNG-Contents.html)

**其他的建议：**

我不确定是什么`crc.h`，但是 zlib 已经提供了`crc32()`与 png 兼容的功能。`crc()`您正在使用的例程可能`crc.h`正在计算不同的 crc。即使它是同一个crc，`crc32()`已经被zlib链接了，所以你也可以使用它。

你不应该使用这个名字`compress()`，因为 zlib 已经提供了这个函数。由于您使用的是 zlib，因此使用不同的`compress()`函数会使读者感到困惑。

`while (stream.avail_out == 0);`没有意义。要么第一次调用`deflate()`complete with `avail_out != 0`，要么陷入无限循环，因为再次调用 deflate() 不会改变这一点。

如果你想使用`Z_FINISH`，那么你需要使用`deflateBound()`来设置输出缓冲区的大小以保证它完成。源代码中的注释“压缩的块不应大于未压缩的块”。不保证。不可压缩的数据会导致压缩后的数据略大于未压缩的输入。

您没有检查`deflate`函数的任何返回码！检查返回码。

# javascript - 检查字符串是否是有效的 html 标记。

> ID：11649733
> 
> 赞同：1
> 
> 时间：2012-07-25T12:29:34.880
> 
> 标签：javascript

是否有任何本机 Javascript 函数来检查 html 标签是否存在？

我是说 ：

```
 var tag = "div";
 alert(isValidTag(tag)) // true;
 alert(isValidTag("foo")) // false; 
```

*如果没有本机功能，我将保留我的功能：*

```
function isValidTag(tagName) {
  var tags = ["div","span","a","link" ... "body"];
  for(var i=0, len = tags.length; i++ < len; ) {
    if(tags[i] == tagName) return true;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:32:38.360

不，JS 没有任何特定的 HTML，DOM 也没有添加类似的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T12:39:38.637

这个怎么样：

```
tags = 'a b body...'.split(' ');
function isTag(tag) {
  return tags.indexOf(tag.trim().toLowerCase()) > -1;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T12:35:40.433

```
var tags = {a: true, b: true, /*...,*/ body: true};

function isTag(_tag)
{
  return tags[_tag];
} 
```

谢谢你，@rsp，建议进行这种简化

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-06T09:22:46.020

这可能效率不高，我还没有对其进行任何时间试验，但它仍然是一个很好的选择，而不是必须自己维护所有可能值的列表。

```
var isHTML = (function() {
  var unknown = '[object HTMLUnknownElement]', overrides = {CANVAS:1,VIDEO:1}; //html5 elements. Some browsers don't support these.
  return function(tag) {
    return overrides[tag = tag.toUpperCase()] || (!overrides.hasOwnProperty(tag) && (overrides[tag] = (document.createElement(tag).toString() !== unknown)));
  };
})(); 
```

该方法首先会检查缓存的结果，如果没有，则根据浏览器自己的`document.createElement`. 如果浏览器不支持它，那么我们可以安全地假设它不是 html 标签。

一些示例输出：

```
isHTML('curve'); //false
isHTML('div'); //true
isHTML('DIV'); //true
isHTML('tbody'); //true
isHTML('object'); //true
isHTML('document'); //false
isHTML('html'); //true
isHTML('svg'); //false
isHTML('rect'); //false 
```

# c++ - 将文件或文件名传递给函数

> ID：11649744
> 
> 赞同：1
> 
> 时间：2012-07-25T12:29:54.927
> 
> 标签：c++, python, coding-style

在具有文件对象的编程语言中，您宁愿将此对象传递给函数还是将物理文件的路径传递给函数并让函数自己打开文件？

如果语言对您的回答很重要，请考虑 c++ 和 python。

谢谢，

某人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:33:11.947

我对良好编码实践的理解是打开要使用信息的文件，而不是在任何语言的更全局范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:34:27.530

我完全支持强类型，因此尽可能多地传递文件路径对象是有意义的。Boost[`boost::filesystem::path`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#class-path)为此目的提供了该类。

但是，这应该是无忧无虑的。例如，提供从`string`to的隐式转换`fileobject`（但不是反过来！）可能没有什么害处，因此接受前者的函数也将接受路径作为裸字符串（并用它做正确的事情）。

同样，Python 中的某些函数需要一个打开的文件对象，但如果您将一个实例传递`str`给它，它们将通过调用`open(path, 'r')`自己来构造这样一个对象。

但是，请注意，我在这里区分

*   表示文件输入/输出流的对象 - `ifstream`/`ofstream`在 C++ 中，`file`在 Python 中（***不要*****传递这个***），和*
**   表示文件系统中文件***路径****的*对象，例如`boost::filesystem::path`-**传递这个**。*

 **相比之下，.NET 具有[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)用于表示文件系统对象的类，而它使用[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)该类来表示……嗯，文件*流*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:39:34.357

这在很大程度上取决于具体情况。

如果我要在几个（子）函数中使用该文件，而不是传递初始化的文件对象（或函数）。

如果我有一个函数来获取文件名和路径，而另一个函数来处理文件的数据，我可能更愿意传递路径和文件名并让使用数据的函数打开文件。**

# javascript - 当我的程序或网站处于活动状态时，如何禁用剪贴板和任务切换操作？

> ID：11649746
> 
> 赞同：-8
> 
> 时间：2012-07-25T12:30:05.910
> 
> 标签：javascript, c++, windows, visual-studio-2010, html

是否可以为 Windows 机器（桌面）创建一个网站或应用程序，它可以保持专注或精确保持打开状态，直到用户提交或完成给定任务。

例如，我的 XXX 应用程序/网站已打开。我希望用户填写一些文本。我想要的是，用户不应该执行以下操作

1.  ctrl+c 或 ctrl+v 所有这些快捷键
2.  ctrl+alt+del（我想这在网站上是不可能的）
3.  Ctrl+Shift+Esc

简而言之，我不希望用户从文本文件中复制文本，我不希望用户最小化这个 XXX 应用程序/网站并切换到资源管理器或记事本或其他东西。

我不认为网站可以做到这一切，Windows 桌面应用程序可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:32:40.667

Windows 桌面应用程序**也一定不能**执行您所要求的操作。从本质上讲，您希望篡夺用户计算机的控制权......任何合理的操作系统或网络浏览器都不允许这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:41:11.697

要扩展其他答案/评论：

1.  *在您自己的应用程序*中禁用复制和粘贴是相对简单的。但是，您不能阻止用户在其他应用程序中复制和粘贴。“所有这些快捷方式”的含义尚不清楚，但通常“Ctrl-Something”快捷方式由应用程序定义，因此您可以覆盖它。
2.  *从网站或*Windows 应用程序中永远不可能禁用 Ctrl-Alt-Del 。这是设计使然。
3.  Ctrl-Shift-Esc 可以被应用程序覆盖，但对 WPF 应用程序的初步实验表明，这需要在比 .NET 容易公开的更低级别进行处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:37:14.767

您永远无法在 Windows 计算机中禁用 Ctrl-Alt-Delete。组合键被 Windows 内核截获，您甚至没有机会在您的 javascript 或桌面应用程序中看到它。您可以**尝试**编写一个在内核获取密钥之前获取密钥的驱动程序，但我不确定这是否真的可行。无论哪种方式，这都超出了桌面应用程序的范围。

可以捕获您列出的其他快捷方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T12:58:22.293

看看[DWinLock](http://www.dwinlock.kassl.de/)，我们使用它来完成您在我们的一个 Delphi 应用程序中所要求的工作，但它作为 DLL 和驱动程序提供，因此应该能够在几乎任何编程语言中使用。

在我们的例子中，它用于在我们的系统运行时禁用所有 Windows 快捷方式和 CTRL-ALT-DELETE，并在正确关闭时恢复所有这些，一旦导入 DLL，它就易于使用。

```
Procedure DisableKeys;
begin
  OutputDebugString(PChar('Disabling Keys - now secure'));
  wlDisableKey( 0, 0, MOD_WIN, 1 );
  wlDisableKey(0, VK_DELETE, MOD_CONTROL or MOD_ALT, 1);
  wlDisableKey( 0, VK_ESCAPE, MOD_CONTROL, 1 );
  wlDisableKey( 0, VK_ESCAPE, MOD_CONTROL or MOD_SHIFT, 1 );
  wlDisableKey( 0, VK_APPS, MOD_ALL, 1 );
  wlDisableKey( 0, VK_F4, MOD_ALT, 1 );
  wlDisableKey( 0, VK_F3, MOD_ALL, 1 );
  wlDisableKey( 0, ord('N'), MOD_CONTROL, 1 );
  wlDisableItem( wlAccessibility, 1 );
  wlDisableItem( wlAccHighContrast, 1 );
  wlDisableItem( wlAccFilterKeys, 1 );
  wlDisableItem( wlAccMouseKey, 1 );
  wlDisableItem( wlAccStickyKeys, 1 );
  wlDisableItem( wlAccToggleKeys, 1 );
end;

procedure EnableKeys;
begin
  OutputDebugString(PChar('EnablingKeys - NOT secure'));
  wlRestoreAll;
end; 
```

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:41:08.823

在 Web 应用程序中，您可以使用相当简单的 javascript 来限制用户输入，但不能限制浏览器。在桌面应用程序中，您可以使用 windows hooks 等。唯一的问题是所有主要的防病毒软件都会将您的应用程序视为威胁。并非不可能，如果您非常想要它，您可以从研究简单的 marc 3 键盘记录程序开始。祝你好运。

# wordpress - htaccess 将停放的域和主域重定向到不同的 wordpress 文件夹

> ID：11649748
> 
> 赞同：2
> 
> 时间：2012-07-25T12:30:12.603
> 
> 标签：wordpress, .htaccess, redirect, dns, subdirectory

这可能听起来有点令人困惑，但我有 3 个域名一个主域和 2 个停放域。

```
www.main1.com
www.parked1.com
www.parked2.com 
```

我在文件夹内安装了 3 个 wordpress `www`：

```
www.main1.com/site1
www.main1.com/site2
www.main1.com/site3 
```

我想以休闲方式浏览它们：

```
 www.main1.com   >> www.main1.com/site1 
   www.parked1.com >> www.main1.com/site2
   www.parked2.com >> www.main1.com/site3 
```

我已经**`www.main1.com >> www.main1.com/site1`**按照 worpress.org 上的教程“给 WordPress 自己的目录”做了第一个

我已将 index.php 和 .htaccess 文件从 wordpress 文件夹复制到 www 文件夹，但只有主域名有效。

请帮我解决这个问题。甚至可能吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:08:38.937

您必须使用插件域而不是子域。有关差异，请参见以下链接。 [http://webnet77.com/webstuff/parked-add-on-domain.html](http://webnet77.com/webstuff/parked-add-on-domain.html)

# c# - 将文件从服务器复制到 Windows Mobile

> ID：11649757
> 
> 赞同：1
> 
> 时间：2012-07-25T12:30:40.130
> 
> 标签：c#, windows-mobile, .net-cf-3.5

我正在用 C# 创建一个 Windows 移动应用程序。我想将文件从 http 服务器移动到 windows mobile。我不知道从哪里开始以及如何开始？有人可以告诉我想法并分享一些链接吗？我正在使用 .net 紧凑型框架 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:42:21.057

您的 windows-mobile 包含一个浏览器应用程序，就像普通浏览器一样。您可以使用它从您的 http 服务器下载文件。例如，转到您的 windows 移动浏览器并键入：

[http://myhttpserver.com/example.zip](http://myhttpserver.com/example.zip)

假设 example.zip 是您要下载的文件。

# jsf - 在 servlet 中访问窗口范围的 bean

> ID：11649759
> 
> 赞同：0
> 
> 时间：2012-07-25T12:30:47.970
> 
> 标签：jsf, servlets, managed-bean

我想在我的 servlet 中检索一个带有范围窗口的 bean。

有人知道怎么做吗？

非常感谢您的帮助。

# log4j - JacOrb 和 Log4j

> ID：11649766
> 
> 赞同：0
> 
> 时间：2012-07-25T12:31:11.927
> 
> 标签：log4j, jacorb

我正在使用 Jacorb 3.0，并且我想使用 log4j 作为日志记录后端。为此，我放置了来自 jacorb、slf4j-api-1.6.6.jar、slf4j-log4j12-1.6.6.jar、log4j-1.2.16.jar 的各种 jar 并删除了 slf4j-jdk14-1.6.4 .jar 在类路径中。到现在为止还挺好。

但是，Jacorb 打印出太多我不关心的日志，我无法排除它。在我的 log4j.properties 中，我尝试过类似的东西：

```
log4j.category.org.jacorb.orb=WARN
log4j.additivity.org.jacorb.orb=false 
```

但我仍然看到像

```
14:27:48.974|INFO |org.jacorb.orb.ORB                   |main           |ORB run 
```

在我的日志中。如何从我的日志中排除所有不是 WARN 或以上的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:58:13.767

我通过查看[这个问题](https://stackoverflow.com/questions/3569395/filtering-out-log4j-messages-from-third-party-frameworks)找到了解决方案：我将根记录器切换为仅记录 WARN 及更高版本，然后为我自己的包显式启用 DEBUG 级别的日志，如下所示：

```
log4j.rootLogger=WARN,CONSOLE
log4j.category.my.package=DEBUG 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T17:46:40.190

Jacorb 使用的记录器名称不是记录消息的类的包名称。相反，他们使用诸如“jacorb.orb.singleton”之类的东西。所以我为“jacorb”添加了一个过滤器，如下所示：

这将是 log4j.category.jacorb=WARN

使用属性文件时，它工作得很好。

# mongodb - MongoDB copyDatabase 在前台而不是后台运行索引创建

> ID：11649767
> 
> 赞同：2
> 
> 时间：2012-07-25T12:31:14.787
> 
> 标签：mongodb

我有 700M 行/1.3TB MongoDB 实例，版本 1.6.3。我尝试使用`copyDatabase`命令将其复制到新的 2.0 实例。

“只是复制”完成了 2 个小时。但在那之后，新的 MongoDB 集合被锁定并`db.currentOp()`返回以下结果。

```
{
    "opid" : 5,
    "active" : true,
    "lockType" : "write",
    "waitingForLock" : false,
    "secs_running" : 22138,
    "op" : "query",
    "ns" : "nerv",
    "query" : {
        "copydb" : 1,
        "fromhost" : "<some host>",
        "fromdb" : "<some db>",
        "todb" : "<some db>"
    },
    "client" : "127.0.0.1:50689",
    "desc" : "conn",
    "threadId" : "0x7f5094005700",
    "connectionId" : 1,
    "msg" : "index: (2/3) btree bottom up 214887968/715742197 30%",
    "progress" : {
        "done" : 214887968,
        "total" : 715742197
    },
    "numYields" : 5591738
}, 
```

我等了大约 5 个小时，看来这不会在 24 小时内结束。我必须等待这个还是有其他选择？（就像在后台运行索引创建一样`ensureIndex`）

* * *

补充）谢谢你的回答，Adam C。然后我想问你更多:)

1.  在做什么`index: (2/3) btree bottom up`，为什么这么慢？
2.  我还没有收到`index: (3/3)`消息。`(3/3)`慢是一样的吗`(2/3)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:05:36.067

除了辅助节点的问题，索引构建可以在后台完成，但我认为不是该副本的一部分：

[http://www.mongodb.org/display/DOCS/Indexing+as+a+Background+Operation](http://www.mongodb.org/display/DOCS/Indexing+as+a+Background+Operation)

您可以只 fsync 并锁定（或暂时关闭）1.6.3 数据库，然后复制数据文件。文件格式在 1.6.3 和 2.0.6 之间没有改变，所以如果你启动 2.0.6 实例并将它指向复制文件的适当路径，你应该很好。

就后续作品而言，这有点超出我目前的知识范围，但我会尝试找出答案。我可以说相关代码在这里：

[https://github.com/mongodb/mongo/blob/master/src/mongo/db/index_update.cpp#L219](https://github.com/mongodb/mongo/blob/master/src/mongo/db/index_update.cpp#L219)

看起来您正处于创建实际索引数据结构的 btree 构建阶段（在读取/插入之后）阶段，最后一部分与提交有关。在这里很难衡量确切的时间，但如果你已经跑了一段时间，很可能值得让它完成。

如果这是我的选择，我将有一个计划 B 并并行运行数据文件的副本，假设这是可能的。如果索引构建首先完成，则终止文件传输。

更新：我在研究另一个问题时意识到，当被索引的集合远大于 RAM 时，在 2.0.6 之前的版本中存在一个错误。它表现为前台索引的第 2 阶段（您正在做的事情）需要很长时间，并且页面错误率大幅增加。

该错误已在 2.0.7 中修复（在撰写此答案时，可作为候选发布版）。因此，如果其他人遇到此问题，或者原始问题所有者遇到此问题，请确保您尝试使用 2.0.7+

# java - DAO 和服务层设计

> ID：11649786
> 
> 赞同：1
> 
> 时间：2012-07-25T12:32:27.267
> 
> 标签：java, java-ee-6

我正在使用 Java EE 6 开发 Web 应用程序。为了最大限度地减少对数据库的调用，最好有类：

数据访问类 (DAO) 将仅调用基本方法`getAllClients, getAllProducts, getAllOrders, delete, update`方法 - CRUD 方法。

将调用 CRUD 方法的服务类，但另外还有过滤器方法，例如`findClientByName, findProuctByType, findProductByYear, findOrderFullyPaid/NotPaid`等...，这将基于基本的 DAO 方法。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:39:25.220

根据我的经验（尽管是有限的），`DAO`类往往具有允许应用程序执行的所有可能的数据库操作。因此，在您的情况下，它将具有`getAllClients()`and`getClientByName(String name)`等方法。

在你的 DAO 中获取所有用户并对其进行迭代，直到找到你需要的用户，这将导致计算时间和内存消耗的不必要浪费。

如果你想减少你的数据库被命中的次数，你也许可以实现一些缓存机制。像[Hibernate](http://www.hibernate.org/)这样的[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)框架应该能够提供您需要的东西，如此[处所示](http://www.tutorialspoint.com/hibernate/hibernate_caching.htm)。

编辑：

根据您的评论问题，不，您的服务不会变得多余。人们所做的是通常使用一个`Service`层来公开`DAO`功能。基本上，这不会使`DAO`应用程序的前端可见。它通常还允许使用额外的方法，例如`public String getUserFormatted(String userName)`. 这将利用`getUserByName`提供的功能`DAO`但提供一些额外的功能。

`Service`如果规范发生变化并且您现在还需要一个 Web 服务来与您的应用程序交互，该层也会使自己变得有用。中间有一个服务层将允许 Web 服务`DAO`通过该`Service`层进行查询。

所以基本上，该`DAO`层仍然会*担心*数据库的东西（CRUD 操作），而服务将调整返回的数据`DAO`而不暴露 DAO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:35:23.770

没有更多信息很难说，但我认为更多地利用数据库可能是一个好主意，而不仅仅是 CRUD 操作。数据库*擅长*搜索，只要您正确配置它们，因此恕我直言，让您的数据库为您处理查找方法中的搜索是个好主意。这意味着您的 find 方法可能会进入您的 DAO...

考虑/了解数据库访问对性能的影响是一件好事，但不要过火。此外，您的方法意味着，由于您的服务将进行过滤，因此您将在应用程序中加载大量数据库数据，这是一个坏主意。最重要的是，您应该按照预期使用 RDBMS，并在可能显示其存在问题时担心由于过度访问而导致的性能。我怀疑你会遇到这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T12:36:07.653

我会说你最好让你的 DAO 比你指定的更细。

我建议以某种方式将 findClientByName、findProuctByType、findProductByYear、findOrderFullyPaid/NotPaid 放在您的 DAO 上，因为您的数据库很可能比内存代码更擅长过滤和排序数据。

想象一下，您有 10 年的数据，您在服务类上调用 findProductsByYear，然后它调用 getAllProducts，然后丢弃内存中 9 年的数据。你最好让你的数据库只返回你感兴趣的那一年。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T13:04:56.000

是的，这是正确的做法。

该服务将拥有交易。你应该把它们写成 POJO；这样您就可以将它们公开为 SOAO 或 REST Web 服务、EJB 或您以后想要的任何其他东西。

# ruby-on-rails - 以表单形式构建嵌入式 mongoid 文档

> ID：11649792
> 
> 赞同：2
> 
> 时间：2012-07-25T12:32:54.833
> 
> 标签：ruby-on-rails, mongoid

我可能遗漏了一些愚蠢的东西，但我无法将多个嵌入的照片文件放入一个表单中

楷模

```
class Product
   include Mongoid::Document

   embeds_many :photos, cascade_callbacks: true
end

class Photo
   include Mongoid::Document

   embedded_in product, :inverse_of => :photos
   field :image_filename
   mount_uploader :image, ImageUploader
end 
```

控制器 - products_controller.rb

```
def new
   @product = Product.new
   3.times { @product.photos.build }
end 
```

形式

然后我用

```
fields_for @product.photos do |photo|
   <%= photo.file_field :image %>
end 
```

问题是只显示了 1 张照片，但我正在控制器中构建 3 张照片。即使我在内存中构建了 3 个，@product.photos.count 的计数也是 0。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:16:08.120

```
fields_for @product.photos do |photo|
   <%= photo.file_field :image %>
end 
```

应该

```
fields_for :photos do |photo|
   <%= photo.file_field :image %>
end 
```

# hibernate - Hibernate 中是否有覆盖会话中具有相同标识符的对象的覆盖函数？（不是合并（））

> ID：11649797
> 
> 赞同：2
> 
> 时间：2012-07-25T12:33:03.070
> 
> 标签：hibernate, session, merge, uniqueidentifier, overwrite

> **可能重复：**
> [休眠：具有相同标识符值的不同对象已与会话关联](https://stackoverflow.com/questions/3553200/hibernate-different-object-with-the-same-identifier-value-was-already-associate)

我有一个休眠问题：

我有以下课程：人

我正在从服务器端的数据库中加载一个特定的 Person.class “A”。然后我通过 JSP 页面将此对象呈现给客户端。

客户端将“A”操作到“B”，然后通过表单将其发送回。我将服务器端的 Person.class "B" 对象加载到一个新变量中，然后尝试存储它。

但由于整个应用程序是基于会话的，我不能简单地调用：

```
HibernateTemplate.saveOrUpdate("B"); 
```

相反，我必须在保存之前将“B”与“A”合并。

但是当我打电话

```
HibernateTemplate.merge("B"); 
```

“B”对象仍然获得我不想再存储的“A”的所有属性。我希望“B”完全替换“A”对象，而不通过合并它们来获得一些“A”属性。

**所以我的问题是：**

**Hibernate 中是否有任何“覆盖”或“替换”功能可以覆盖会话中具有与一个特定对象的属性相同的标识符的所有对象？**

（在示例中从表单返回的对象“B”）

**它还应该防止 Hibernate 抱怨：**

```
Exception in thread "main" org.hibernate.NonUniqueObjectException: a   
different object with the same identifier value was already associated
with the session: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:19:13.137

您可以先从会话中逐出对象，然后使用 update 将另一个对象附加到会话中。

我会在您的服务中这样做：

```
sessionFactory.getCurrentSession().evict(myObject);
sessionFactory.getCurrenctSession().update(myNewerObject); 
```

您不应该在控制器中执行任何数据库操作，因为这需要事务控制器方法。

# .net - 如何将所有程序集注册到温莎城堡中另一个程序集的所有接口的实现？

> ID：11649798
> 
> 赞同：1
> 
> 时间：2012-07-25T12:33:09.560
> 
> 标签：.net, inversion-of-control, castle-windsor

是否可以将包含我们所有接口的程序集的名称传递给 Castle，并让 Castle 自动查找并注册当前目录中包含这些接口的实现的所有程序集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:05:19.467

以下代码为我解决了这个问题。如果您发现任何问题，请发表评论。

```
var InterfacesAssemblyName = /* get assembly name from appSettings */;

if (!string.IsNullOrEmpty(InterfacesAssemblyName))
{
    var interfaces = Assembly.Load(InterfacesAssemblyName).GetTypes().Where(type => type.IsInterface && type.IsPublic).ToList();

    this._container.Register(
        Classes
            .FromAssemblyInDirectory(new AssemblyFilter("bin"))
            .Where(x => x.GetInterfaces().Intersect(interfaces).Any())
            .LifestyleTransient()
            .WithService.DefaultInterfaces());
} 
```

# vim - vim 中的自定义自动完成，如 Sublime Text 2

> ID：11649799
> 
> 赞同：4
> 
> 时间：2012-07-25T12:33:11.213
> 
> 标签：vim, sublimetext2

刚刚发现 Sublime Text 2 中的[自动完成](http://docs.sublimetext.info/en/latest/extensibility/completions.html)功能。

示例自动完成文件：

```
{
        "scope": "text.html - source - meta.tag, punctuation.definition.tag.begin",

        "completions":
        [
                { "trigger": "a", "contents": "<a href=\"$1\">$0</a>" },
                { "trigger": "abbr", "contents": "<abbr>$0</abbr>" },
                { "trigger": "acronym", "contents": "<acronym>$0</acronym>" }
        ]
} 
```

我试图为 Vim 搜索类似的东西，但找不到任何东西。

Vim 有这样的东西吗？最好使用简单的生成格式，如 JSON、YAML 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:37:02.287

我认为您正在寻找[SnipMate](http://www.vim.org/scripts/script.php?script_id=2540)，这是来自 Jeffrey Way: [Vim Essential Plugin: SnipMate的一个很好的教程](http://net.tutsplus.com/tutorials/other/vim-essential-plugin-snipmate/)

其他可以做你想做的事情的插件：[SparkUp](http://net.tutsplus.com/tutorials/other/vim-essential-plugin-sparkup/)或[Zen Coding.vim](http://mattn.github.com/zencoding-vim/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T12:40:17.680

SnipMate 的最新替代品似乎是[UltiSnips](http://www.vim.org/scripts/script.php?script_id=2715)，不过我自己还没有尝试过。

还有[vim 内置的缩写](http://vim.wikia.com/wiki/Using_abbreviations)支持，但我认为它们不支持比将短文本扩展为更长文本更复杂的东西。不过还是蛮有用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:33:40.697

您是否尝试[过 neocomplcache](http://www.vim.org/scripts/script.php?script_id=2620)或[autocomplpop](http://www.vim.org/scripts/script.php?script_id=1879)？他们似乎做你想做的事。

# c# - 如何将csv保存到内存然后ftp？

> ID：11649802
> 
> 赞同：1
> 
> 时间：2012-07-25T12:33:22.740
> 
> 标签：c#, csv, ftp, export

我目前正在创建一个 CSV 文件，然后我 ftp 该文件。这工作正常。但是，我不想保存 csv 文件，我想将它创建到内存中，然后 ftp 它。

这是我当前的代码：

```
private void Csv()
    {             
        CsvExport eftExport = new CsvExport();
        eftExport.AddRow();
        eftExport["customer_reference"] = "Ref";           
        eftExport["landline"] = "01234567890";
        string url = "C:/Content/Cms/DD/";
        string fileName = "file.csv";
        eftExport.ExportToFile(url + fileName);
        this.FtpFile(url, fileName);
    }

    private void FtpFile(string url, string fileName)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://url.co.uk/" + fileName);
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential ("Administrator", "pass");

        StreamReader sourceStream = new StreamReader(url + fileName);
        byte[] fileContents = Encoding.UTF8.GetBytes (sourceStream.ReadToEnd());
        sourceStream.Close();
        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();                       
    } 
```

但不是做 eftExport.ExportToFile(url + fileName); 我不想把它保存到机器上？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:39:34.673

使用`ExportToBytes()`您的`CsvExport`班级的功能。

然后将您更改`FtpFile()`为接受字节数组并删除流阅读器

你最终应该得到更少的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:39:52.800

如果您的`CsvExport`类型有一个`ExportToStream`或类似的，只需使用它创建您随后写入的流`requestStream`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:40:49.183

使用它，但它进入一个字节数组：

```
byte[] buffer = eftExport.ExportToBytes(); 
```

现在：

```
requestStream.Write(buffer, 0, buffer.Length); 
```

# c# - 更改 WinForms 组合框的选择颜色

> ID：11649803
> 
> 赞同：3
> 
> 时间：2012-07-25T12:33:26.390
> 
> 标签：c#, winforms, combobox

所有，我已经深入了解，但似乎无法找到我正在寻找的东西。我想改变 ComboBoc 控件的选择颜色（理想情况下不必对控件进行子类化）。我虽然做以下事情会起作用，但这个事件甚至没有触发

```
private void comboBoxDb_DrawItem(object sender, DrawItemEventArgs e) 
{
    ComboBox combo = sender as ComboBox;
    e.Graphics.FillRectangle(new SolidBrush(combo.BackColor), e.Bounds);
    string strSelectionColor = @"#99D4FC";
    Color selectionColor = 
        System.Drawing.ColorTranslator.FromHtml(strSelectionColor);
    e.Graphics.DrawString(combo.Items[e.Index].ToString(), 
                          e.Font, 
                          new SolidBrush(selectionColor), 
                          new Point(e.Bounds.X, e.Bounds.Y));
} 
```

但这个事件甚至没有触发。我在这里做错了什么？

谢谢你的时间。

*编辑。尽管未触发是由于未正确设置 @Teppic 指出的 ComboBox 的 DrawMode 属性，但这仍然没有达到我的要求。我想设置选择颜色，我上面所做的（我在这里屏蔽了名字）*

![不是必需的](../Images/98babe116f43078edfc2f294b79f3e8f.png)

*而我想更改控件的蓝色突出显示，如下所示。*

![在此处输入图像描述](../Images/3225f585f8b277031b6ec888b718a42f.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T13:01:22.863

将 ComboBox 控件的 DrawMode 属性设置为 OwnerDrawFixed（如果每个项目的高度相同）或 OwnerDrawVariable（如果每个项目的高度可能不同）。

然后将您的 DrawItem 事件修改为以下内容（显然替换您自己的颜色）：

```
private void comboBoxDb_DrawItem(object sender, DrawItemEventArgs e) 
{
    var combo = sender as ComboBox;

    if((e.State & DrawItemState.Selected) == DrawItemState.Selected)
    {
        e.Graphics.FillRectangle(new SolidBrush(Color.BlueViolet), e.Bounds);
    }
    else
    {
        e.Graphics.FillRectangle(new SolidBrush(SystemColors.Window), e.Bounds);
    }

    e.Graphics.DrawString(combo.Items[e.Index].ToString(),
                                  e.Font,
                                  new SolidBrush(Color.Black),
                                  new Point(e.Bounds.X, e.Bounds.Y));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:06:39.433

要使 ComboBox 触发 DrawItem 事件，您必须将其**DrawMode**设置为**OwnerDrawFixed**或**OwnerDrawVariable**。您可以在 MSDN 上详细了解它：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawmode](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawmode) 然后只需检查**DrawItemEventArgs.State**以查找是否选择了项目或其他内容。

# webdriver - 如何单击具有随机 ID 的链接或按钮？

> ID：11649807
> 
> 赞同：0
> 
> 时间：2012-07-25T12:33:37.577
> 
> 标签：webdriver, watir-webdriver

如何点击按钮或链接到随机 ID？

有这个按钮或链接一个号码？

例如：

```
@b.link(:number => "1").click 
```

或者

```
@b.button(:number => "1").click 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:00:24.317

如果元素是**button**，请查找其中一些静态元素：

*   如果`name`属性已知，请尝试：`b.button(:name => 'submit').click`
*   如果`value`（按钮上的文本）已知，请尝试：`b.button(:value => 'Submit').click`
*   如果*按钮是 image*，您可以在源上使用正则表达式：`b.button(:src => /destination-url/).click`

如果元素是**link**，请查找其中一些静态元素：

*   如果`name`属性已知，请尝试：`b.link(:name => "link").click`
*   如果`href`属性已知，请尝试：`b.link(:href => "http://example.com").click`
*   如果按钮的文本是静态的，`b.link(:text => "Text of link here.").click`

如果这些不起作用，您可以随时查看父元素。希望这会有所帮助。如果您提供有关您的具体案例的更多信息，我很高兴详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:54:23.723

有用：

```
@b.link(:index => 1).click 
```

# java - Java Web 服务到 Sharepoint 查询

> ID：11649808
> 
> 赞同：2
> 
> 时间：2012-07-25T12:33:40.777
> 
> 标签：java, sharepoint, caml

我正在通过 web 服务通过 java 查询 sharepoint 上的列表。当我想获取整个列表时它工作正常，但我只想查询列表的一部分。它可以通过这样的 CAML 查询来完成：

```
<Query>
<Where>
   <Gt>
      <FieldRef Name='ID' />
      <Value Type='Number'>10</Value>
   </Gt>
</Where>
</Query> 
```

我不确定如何通过 Java 传递它。现在我正在这样做：

```
GetListItemsResponse.GetListItemsResult result = port.getListItems(listName, viewName, query, viewFields, rowLimit, queryOptions, webID); 
```

其中 QUERY 对象只是 null （获取整个列表）。

我在某处读到它可以这样做：

```
GetListItems.Query query = new GetListItems.Query();
query.getContent().add(generateXmlNode(QueryStringHere)); 
```

但我没有 generateXmlNode 方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-11T12:12:58.077

我为可能有同样问题并到达这里的人回答这个问题，即使它已经 2 岁了。

```
private static Object generateXmlNode(String string) throws Exception {
    DocumentBuilder docBuilder = null;
    DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
    docBuilder = dbfac.newDocumentBuilder();
    Document rootDocument = docBuilder.newDocument();
    rootDocument.setTextContent(string);
    return rootDocument.getDocumentElement();

} 
```

在这种情况下，参数`String string`是 XML (CAML) 形式的查询。例如，它可以从一个属性加载：

```
this.query = new String(readAll(new File(this.getClass().getResource("/Query.xml").toURI())));
this.queryOptions = new String(readAll(new File( this.getClass().getResource( "/QueryOptions.xml").toURI()))); 
```

查询可能如下所示：

```
<Query>
    <Where>
    <And>
        <And>
            <Contains> 
                <FieldRef Name="Editor" /> 
                <Value Type="Text">Chandler</Value>
            </Contains>
            <Contains> 
                <FieldRef Name="FileRef" /> 
                <Value Type="Text">AuditDeleteTesting</Value>
            </Contains>     
        </And>
        <Eq> 
            <FieldRef Name="Created_x0020_Date" /> 
            <Value Type="DateTime">2013-09-11</Value>
        </Eq>               
    </And>      

    </Where>
</Query> 
```

和查询选项：

```
<QueryOptions>
    <IncludeMandatoryColumns>TRUE</IncludeMandatoryColumns>
    <ViewAttributes Scope="RecursiveAll"/> 
    <DateInUtc>TRUE</DateInUtc> 
</QueryOptions> 
```

如果您不熟悉 CAML 查询，我建议您使用 SharePoint 查询助手： [https ://spcamlqueryhelper.codeplex.com/](https://spcamlqueryhelper.codeplex.com/)

我希望它有所帮助。

编辑：我忘了提及来源：[http ://www.javaworld.com/article/2078906/enterprise-java/java-tip-sumption-sharepoint-web-services-with-a-java-client.html?null](http://www.javaworld.com/article/2078906/enterprise-java/java-tip-consuming-sharepoint-web-services-with-a-java-client.html?null)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:47:28.480

尝试删除 [query] 根节点。查询节点将在运行时由共享点添加。那应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:55:19.640

试试这个：

```
private static Object generateXmlNode(String string) throws Exception {
    DocumentBuilder docBuilder = null;
    DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
    docBuilder = dbfac.newDocumentBuilder();
    Document rootDocument = docBuilder.newDocument();
    rootDocument.setTextContent(string);
    return rootDocument.getDocumentElement();

} 
```

# c# - 从数组中查找一个字符，在该点拆分，然后在之后插入另一个字符

> ID：11649813
> 
> 赞同：0
> 
> 时间：2012-07-25T12:33:49.897
> 
> 标签：c#

我基本上是在寻找一种方法来检查某个字符串是否包含某个字符列表中的任何一个，以及是否包含其中一个来拆分字符串，然后在其前面/后面插入相同的字符。这是因为这些特定字符在输入时破坏了我的搜索，因为 SQL 不能很好地处理它们。

到目前为止，我实际上已经走了多远：

```
string[] errorChars = new string[]
{
    "!",
    "}",
    "{",
    "'",
};

for (int i = 0; i < errorChars.Count(); i++)
{
    if(fTextSearch.Contains(errorChars[i]))
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:43:57.483

我认为您真正想要的是替换功能。

```
for (int i = 0; i < errorChars.Count(); i++)
{
    if(fTextSearch.Contains(errorChars[i]))
    {
        fTextSearch.Replace(errorChars[i],errorChars[i] + errorChars[i]);
    }
} 
```

尽管将角色加倍可能不是答案。您需要转义字符 \ 所以替换字符串将是

```
ftextSearch.Replace(errorChars[i],"\"+errorChars[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:44:58.057

几个答案的问题（在他们目前的版本中）是他们正在放弃你的分裂角色。如果您需要保留拆分字符，请尝试以下操作：

```
StringBuilder sb = new StringBuilder();

string[] splitString = fTextSearch.Split(errorChars, StringSplitOptions.None);

int numNewCharactersAdded = 0;
foreach( string itm in splitString)
{
   sb.Append(itm); //append string
   if (fTextSearch.Length > (sb.Length - numNewCharactersAdded))
   {
      sb.Append(fTextSearch[sb.Length - numNewCharactersAdded]); //append splitting character
      sb.Append(fTextSearch[sb.Length - numNewCharactersAdded - 1]); //append it again
      numNewCharactersAdded ++;
   }
}

fTextSearch = sb.ToString(); 
```

这是一个[IDEOne 示例](http://ideone.com/maMAS)

# c# - 测试总是给出“对象引用未设置为对象的实例”

> ID：11649815
> 
> 赞同：0
> 
> 时间：2012-07-25T12:34:04.287
> 
> 标签：c#, wpf, unit-testing, exception-handling, mstest

我目前正在为类方法编写单元测试，但访问器总是抛出异常。

考虑以下测试方法：

```
namespace GSVMTestCase
{    
    [TestClass]
    public class GatewaySettingsViewModelTest
    {
        [TestMethod]
        [DeploymentItem("SmartGatewayUABL.dll")]
        public void AddGatewayTest1()
        {
            GatewaySettingsViewModel_Accessor target = new GatewaySettingsViewModel_Accessor(); // error occurs here
            target.GatewayIPAddress = null;
            target.AddGateway();
            Assert.AreEqual(TextStrings.TxtErrInvalidIP, target.ErrorMessage);
        }}}
} 
```

总是抛出异常：

> 你调用的对象是空的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:16:05.920

嘿，在调用构造函数时得到了问题的解决方案，缺少配置文件。所以在添加 app.config 后它得到了解决。感谢大家的宝贵评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:16:58.897

鉴于您在这里所做的命名方案，看起来您正在使用一些技巧来测试此程序集。如果这个“SmartGatewayUABL.dll”是*您的*程序集，那么我将添加一个对测试程序集的项目引用并在没有部署项的情况下对其进行测试。

如果它不是您的程序集，那么人们不得不想知道您为什么要尝试从中测试一个类。如果您想坚持和维护测试，这通常是不可取的。如果您只是在进行实验，我建议您在这里结束实验并尝试其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-10T14:52:03.217

只是为了让其他有这个问题的人更清楚。您的主项目可以从后端获取数据到前端，因为必须在其 web.config 文件中设置 connectionString。因此，您需要在单元测试项目中创建一个名为 *.config 的应用程序配置文件，并将此 connectionString 粘贴到其中。

# tastypie - 在 Tastypie 中，有没有办法根据身份验证更改资源排除？

> ID：11649819
> 
> 赞同：1
> 
> 时间：2012-07-25T12:34:11.493
> 
> 标签：tastypie

考虑具有个人资料图片和电子邮件字段的用户资源的示例。任何用户都可以看到任何其他用户的个人资料图片，但用户只能看到他们自己的电子邮件地址。

是否可以设置tastepie，以便排除字段集可以根据经过身份验证的用户而变化？

我意识到另一种方法是创建单独的完整和受限用户资源。但目前我只想知道基于用户身份验证限制字段的方法是否甚至在美味派中可行。

此外，它不一定是排除项，同样有没有办法根据请求用户更改字段属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:56:07.300

我认为排除的字段不能以优雅的方式重新出现。您可以通过`get_object_list`在资源中包含一些对象操作来根据请求操作对象列表

`apply_limits`但是，在您的自定义授权类中使用该方法会更好、更合乎逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T07:34:37.933

我创建了一个 ModelResource 子类，它可以被多个继承到所需的 ModelResource 实例中。喜欢：

```
class ResourceThatNeedsToExcludeSomeFields(ExcludeResource, ModelResource):
    pass 
```

它接受通过 GET 参数排除的字段（如“&exclude=username”）

```
class ExcludeResource(ModelResource):
"""
Generic class to implement exclusion of fields in all the ModelResource classes
All ModelResource classes will be muliple inherited by this class, whose dehydrate method has been overriden
"""
# STACK: How to exclude some fields from a resource list created by tastypie?
def dehydrate(self, bundle):
    # I was taking the exclude fields from get paramaters as a comma separated value
    if bundle.request.GET.get('exclude'):
        exclude_fields = bundle.request.GET.get('exclude').split(',')
        for field in exclude_fields:
            if str(field) in bundle.data.keys():
                del bundle.data[str(field)]
    return bundle 
```

您可以修改它以根据用户组（或您基于字段的任何标准）获取排除字段，如下所示：

```
class ExcludeResource(ModelResource):
"""
Generic class to implement exclusion of fields in all the ModelResource classes
All ModelResource classes will be muliple inherited by this class, whose dehydrate method has been overriden
"""
# STACK: How to exclude some fields from a resource list created by tastypie?
def dehydrate(self, bundle):
    exclude_fields = <get a comma separated list of fields to be excluded based in bundle.request.user>
    for field in exclude_fields:
        if str(field) in bundle.data.keys():
            del bundle.data[str(field)]
    return bundle 
```

但是，此代码段不适用于使用“full=True”指定的相关资源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:10:05.510

是的，有办法做到这一点。如果您将电子邮件定义为一个单独的字段，而不是用户的一个（可能可以使用，但从未这样做过）。您可以定义 dehydrate_email 其中 bundle.request 包含当前请求并且您可以获得它。它不会被完全排除为一个字段，但对其他人来说它将是 None 。

# hbase - HBase 错误：不是主机：端口对

> ID：11649824
> 
> 赞同：5
> 
> 时间：2012-07-25T12:34:36.810
> 
> 标签：hbase

嗨，我在完全分布式模式下使用 hBase，我正在尝试使用 java 代码连接 Hbase 并创建一个表。我得到一个错误。它没有连接到hbase。我检查了它们运行良好的所有进程：-namenode、datanode、nodemanager、资源管理器、hbase master、hbase regionservers、zookeeper。

# 错误

```
starting...
getting config...
12/07/25 18:48:31 WARN hbase.HBaseConfiguration: instantiating HBaseConfiguration() is deprecated. Please use HBaseConfiguration#create() to construct a plain Configuration
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.2-1031432, built on 11/05/2010 05:32 GMT
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:host.name=aniket
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0_05
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.home=/usr/java/jdk1.7.0_05/jre
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.class.path=/root/workspace/HBaseTesting/bin:/usr/lib/hadoop-0.20-mapreduce/hadoop-core.jar:/usr/lib/hadoop/hadoop-common.jar:/root/Downloads/google-collect-1.0-rc1/google-collect-1.0-rc1.jar:/root/Downloads/hbase-0.90.5/hbase-0.90.5.jar:/root/Downloads/hbase-0.90.5/lib/activation-1.1.jar:/root/Downloads/hbase-0.90.5/lib/asm-3.1.jar:/root/Downloads/hbase-0.90.5/lib/avro-1.3.3.jar:/root/Downloads/hbase-0.90.5/lib/commons-cli-1.2.jar:/root/Downloads/hbase-0.90.5/lib/commons-codec-1.4.jar:/root/Downloads/hbase-0.90.5/lib/commons-el-1.0.jar:/root/Downloads/hbase-0.90.5/lib/commons-httpclient-3.1.jar:/root/Downloads/hbase-0.90.5/lib/commons-lang-2.5.jar:/root/Downloads/hbase-0.90.5/lib/commons-logging-1.1.1.jar:/root/Downloads/hbase-0.90.5/lib/commons-net-1.4.1.jar:/root/Downloads/hbase-0.90.5/lib/core-3.1.1.jar:/root/Downloads/hbase-0.90.5/lib/guava-r06.jar:/root/Downloads/hbase-0.90.5/lib/hadoop-core-0.20-append-r1056497.jar:/root/Downloads/hbase-0.90.5/lib/jackson-core-asl-1.5.5.jar:/root/Downloads/hbase-0.90.5/lib/jackson-jaxrs-1.5.5.jar:/root/Downloads/hbase-0.90.5/lib/jackson-mapper-asl-1.4.2.jar:/root/Downloads/hbase-0.90.5/lib/jackson-xc-1.5.5.jar:/root/Downloads/hbase-0.90.5/lib/jasper-compiler-5.5.23.jar:/root/Downloads/hbase-0.90.5/lib/jasper-runtime-5.5.23.jar:/root/Downloads/hbase-0.90.5/lib/jaxb-api-2.1.jar:/root/Downloads/hbase-0.90.5/lib/jaxb-impl-2.1.12.jar:/root/Downloads/hbase-0.90.5/lib/jersey-core-1.4.jar:/root/Downloads/hbase-0.90.5/lib/jersey-json-1.4.jar:/root/Downloads/hbase-0.90.5/lib/jersey-server-1.4.jar:/root/Downloads/hbase-0.90.5/lib/jettison-1.1.jar:/root/Downloads/hbase-0.90.5/lib/jetty-6.1.26.jar:/root/Downloads/hbase-0.90.5/lib/jetty-util-6.1.26.jar:/root/Downloads/hbase-0.90.5/lib/jruby-complete-1.6.0.jar:/root/Downloads/hbase-0.90.5/lib/jsp-2.1-6.1.14.jar:/root/Downloads/hbase-0.90.5/lib/jsp-api-2.1-6.1.14.jar:/root/Downloads/hbase-0.90.5/lib/jsr311-api-1.1.1.jar:/root/Downloads/hbase-0.90.5/lib/log4j-1.2.16.jar:/root/Downloads/hbase-0.90.5/lib/protobuf-java-2.3.0.jar:/root/Downloads/hbase-0.90.5/lib/servlet-api-2.5-6.1.14.jar:/root/Downloads/hbase-0.90.5/lib/slf4j-api-1.5.8.jar:/root/Downloads/hbase-0.90.5/lib/slf4j-log4j12-1.5.8.jar:/root/Downloads/hbase-0.90.5/lib/stax-api-1.0.1.jar:/root/Downloads/hbase-0.90.5/lib/thrift-0.2.0.jar:/root/Downloads/hbase-0.90.5/lib/xmlenc-0.52.jar:/root/Downloads/hbase-0.90.5/lib/zookeeper-3.3.2.jar:/root/Downloads/hbql-0.90.0.1/hbql-0.90.0.1.jar
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.18-274.el5xen
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:user.name=root
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:user.home=/root
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Client environment:user.dir=/root/workspace/HBaseTesting
12/07/25 18:48:32 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.88:2181 sessionTimeout=180000 watcher=hconnection
12/07/25 18:48:32 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.1.88:2181
12/07/25 18:48:32 INFO zookeeper.ClientCnxn: Socket connection established to aniket/192.168.1.88:2181, initiating session
12/07/25 18:48:32 INFO zookeeper.ClientCnxn: Session establishment complete on server aniket/192.168.1.88:2181, sessionid = 0x138bf7676070043, negotiated timeout = 40000
Exception in thread "main" java.lang.IllegalArgumentException: Not a host:port pair: �
at org.apache.hadoop.hbase.HServerAddress.<init>(HServerAddress.java:60)
    at org.apache.hadoop.hbase.MasterAddressTracker.getMasterAddress(MasterAddressTracker.java:63)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:561)
    at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:99)
    at org.apache.hadoop.hbase.client.HBaseAdmin.checkHBaseAvailable(HBaseAdmin.java:1320)
    at HBaseCreateTable.main(HBaseCreateTable.java:38) 
```

# 代码片段

```
Configuration config=HBaseConfiguration.create();
config.set("hbase.zookeeper.quorum", "192.168.1.88");
config.set("hbase.zookeeper.property.clientPort","2181");
config.set("hbase.master", "192.168.1.88:60000");
HTableDescriptor ht = new HTableDescriptor( "abc" );
ht.addFamily( new HColumnDescriptor( "number" ) ); // from and to
HBaseAdmin hba = new HBaseAdmin( conf );
hba.createTable( ht ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T20:52:13.703

我在使用 0.90.2 客户端与 0.92 服务器通信时看到“不是主机：端口对”。您能否验证您的客户端和服务器 HBase 版本是否相同，它们是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:05:35.593

> 我遇到了同样的问题，试试：
> 
> 更改您正在使用的构建路径 jar/wars，使其与 Hbase 服务器版本兼容。使用相同版本的 Hbase 服务器和用于编码的 jar。例如：如果您使用的是 Hbase 0.90.2 服务器，请使用相同版本的 jars。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:25:02.373

[看一下这个](http://mail-archives.apache.org/mod_mbox/hbase-user/201201.mbox/%3CCADcMMgHNTcEzSxEt=boYt5xr-UMu4t5QyfeaS2LRQuBV4_T2rg@mail.gmail.com%3E)

如果你尝试在 hbase client 0.90.x 和 hbase server 0.92.x 之间进行通信，就会出现这种问题。

如果有人详细了解此问题，请评论其原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T09:26:44.023

除了沃尔特所说的。这不仅仅是因为他提到的“0.90.2”这个特定版本，事实上，只要客户端 API 和服务器 API 的版本不匹配，你就会得到这个异常。

因为我有同样的例外： -

**“线程“主”java.lang.IllegalArgumentException 中的异常：不是主机：端口对：PBUF”**

当我使用 0.94 的客户端 API 和 0.98 版本的服务器 API 时。

# asp.net-mvc-3 - MVC 控制器/视图删除模型属性

> ID：11649828
> 
> 赞同：0
> 
> 时间：2012-07-25T12:34:55.190
> 
> 标签：asp.net-mvc-3

我正在创建一个小型 MVC 应用程序，并将一个用户对象从一个控制器传递到另一个控制器中的 ActionResult 方法。User 对象的属性之一是称为Properties 的Property 对象列表。

问题是：当用户对象最终传递给相关视图时，它的列表不包含任何属性。

这是设置：

**用户等级：**

```
public class User
{
   public int Id {get;set;}
   public List<Property> Properties {get;set;}
} 
```

**帐户控制器**

```
public ActionResult LogOn(int userId, string cryptedHash)
{
   //code to logOn (this works, promise)

   User user = dbContext.getUser(userId);
   //debugging shows the user contains the list of properties at this point

   return RedirectToAction("UserHome", "Home", user);
} 
```

**家庭控制器**

```
public ActionResult UserHome(User user)
{
    ViewBag.Messaage = "Hello, " + user.Forename + "!";
    return View(user);  //debugging shows that user.Properties is now empty(!)
} 
```

**UserHome.cshtml 查看**

```
@model emAPI.Model_Objects.User

@{
    ViewBag.Title = "UserHome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>UserHome</h2>
<div>
        @Model.Forename, these are your properties:
        <ul>
            @foreach (var property in @Model.Properties)
            {
                <li>property.Name</li>
            }
        </ul>
</div> 
```

视图加载没有任何问题 -`@Model.Forename`很好，但就收到它`HomeController`而言，它是空的，尽管我知道它在发送时不是。`user.Properties``AccountController`

任何人必须提供的任何帮助或建议都将被感激地接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:44:03.007

重定向时不能传递整个复杂对象。只有简单的标量参数。

实现这一点的标准方法是通过发出表单身份验证 cookie 来对用户进行身份验证，这将允许您在所有后续操作中存储用户 ID。然后，如果在控制器操作中您需要用户详细信息，例如名字或任何您只需查询数据存储以使用 id 从存储位置检索用户的信息。只需看看创建新的 ASP.NET MVC 3 应用程序时 Account 控制器的实现方式。

所以：

```
public ActionResult LogOn(int userId, string cryptedHash)
{
   //code to logOn (this works, promise)

   User user = dbContext.getUser(userId);
   //debugging shows the user contains the list of properties at this point

   // if you have verified the credentials simply emit the forms
   // authentication cookie and redirect:
   FormsAuthentication.SetAuthCookie(userId.ToString(), false);

   return RedirectToAction("UserHome", "Home");
} 
```

并在目标操作中简单地从`User.Identity.Name`属性中获取用户 ID：

```
[Authorize]
public ActionResult UserHome(User user)
{ 
    string userId = User.Identity.Name;

    User user = dbContext.getUser(int.Parse(userId));

    ViewBag.Messaage = "Hello, " + user.Forename + "!";
    return View(user); 
} 
```

啊，请不要使用 ViewBag。改用视图模型。如果您的视图所关心的只是通过显示他的名字来欢迎用户，只需构建一个包含名字属性的视图模型，然后将此视图模型传递给视图。该视图不关心您的用户域模型，它不应该。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:40:55.967

`RedirectToAction`方法向浏览器返回`HTTP 302`响应，从而使浏览器向`GET`指定的操作发出请求。您不应该考虑将其中的复杂对象传递给下一个操作方法。

在这种情况下，您可能可以将用户对象保留在`Session`变量中并在其余位置访问它。

```
public ActionResult LogOn(int userId, string cryptedHash)
{   
   User user = dbContext.getUser(userId);
   if(user!=null)
   {
       Session["LoggedInUser"]=user;
       return RedirectToAction("UserHome", "Home");
   }    
}

public ActionResult UserHome()
{
    var loggedInUser= Session["LoggedInUser"] as User;
    if(loggedInUser!=null)
    {
       ViewBag.Messaage = "Hello, " + user.Forename + "!";
       return View(user); 
    }
    return("NotLoggedIn");
} 
```

# hudson - 建立状态詹金斯

> ID：11649829
> 
> 赞同：3
> 
> 时间：2012-07-25T12:34:58.373
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins

如何在没有`email-ext`插件的情况下在运行时访问 jenkins 构建状态？

我想使用 jenkins 的环境变量访问 build_status。或任何其他方式来访问詹金斯的构建状态变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:49:51.923

默认的 Jenkins 环境变量不包括构建结果。

但是，您可以使用[Groovy Postbuild Plugin](http://wiki.hudson-ci.org/display/HUDSON/Groovy+Postbuild+Plugin)，它在 Jenkins JVM 下运行并且可以访问当前的构建实例。

然后从 groovy 中，您可以通过`manager.build.result`. [有关示例用法，请参见](https://stackoverflow.com/a/6270048/419450)我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T10:31:34.240

您可以使用`currentBuild.currentResult`which 是 jenkins 服务器内部的全局变量来访问当前的构建状态。这些变量可以在管道内部访问。

此外，您可以使用以下 url 检查服务器内所有可用的全局变量

```
http://<server>/pipeline-syntax/globals 
```

# domain-driven-design - DDD：如何组织引导域对象的构建器？相同的限界上下文？

> ID：11649830
> 
> 赞同：2
> 
> 时间：2012-07-25T12:34:57.713
> 
> 标签：domain-driven-design, bounded-contexts

我正在重组我当前的项目，以更好地符合 DDD 最佳实践。

作为此设置的一部分，管理任务允许基于配置文件/算法组合（重新）引导某些域对象/聚合。我对此有一个很好的用例，它确实要求它成为实时系统的一部分，而不是仅用于测试（例如文本固定装置）。

我正在努力如何在 DDD 上下文中最好地模型重构：

基本上：构建器/引导程序是属于与域对象相同的有界上下文的基础设施服务吗？这会感觉很自然吗？我看到的流程是管理员使用特殊的管理应用程序服务访问这些功能，该服务反过来调用构建器来完成他们的工作。

另一方面，这个管理功能感觉像是系统的一个独立部分，所以也许我不应该用支持引导的方法污染域对象（或其工厂）。IOW：这可能意味着一个单独的有界上下文，具有完全不同的（无逻辑）域模型，纯粹用于持久化到数据库。然而，这对我来说并不是很干燥，因为我最终可能会定义两次模型（每个 BC 一次）

解决此问题的最佳方法是什么？

# android - 光标适配器和列表适配器的拖放排序

> ID：11649831
> 
> 赞同：21
> 
> 时间：2012-07-25T12:35:02.847
> 
> 标签：android, listview, drag-and-drop, android-cursoradapter

我很惊讶使用光标适配器和列表适配器进行拖放排序的信息如此之少。

我在 stackoverflow 上找到的最接近的帖子是这个：

[https://stackoverflow.com/a/5047618/317889](https://stackoverflow.com/a/5047618/317889)

但是，我不清楚如何实施 CommonsWare 的建议 - 澄清会非常有帮助。

到目前为止，我将游标数据绑定到列表适配器并将其设置如下：

```
mMyCursorAdapter = new MyCursorAdapter(getActivity(), null);
setListAdapter(mMyCursorAdapter);
getLoaderManager().initLoader(0, null, this); 
```

列表已生成，但我现在希望向列表项添加拖放功能。

我想知道从架构的角度来解决这个问题的最佳方法，以及任何关于如何进行核心功能开发的指针也将是有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T22:41:54.413

[Jason McReynolds 的这篇博](http://jasonmcreynolds.com/?p=423)文（包括一个[示例项目](https://github.com/jmmcreynolds/dslv-db-demo)）对我帮助很大。

它解释了如何将 Carl A. Bauer 的 Library [Drag-Sort-ListView](https://github.com/bauerca/drag-sort-listview.git)与 CursorAdapter 和 SqLite 一起使用。它还展示了如何将 ListView 的新排序状态保存在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:41:19.207

这绝对可以实现，幸运的是，大部分工作已经完成，但您需要稍微修改一个类以满足您的规范。

默认的 Android 音乐应用程序包含您需要的所有课程。

首先，您需要获取他们`ListView`允许拖放的自定义。

**[可以在这里找到 - TouchInterceptor.java](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/TouchInterceptor.java)。**

您还需要获取他们`Cursor`用于实际移动`ListView`. 这是一个内部类，称为`NowPlayingCursor`.

**[可以在这里找到 - TrackBrowserActivity.java](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/TrackBrowserActivity.java#L1095)**

`NowPlayingCursor`扩展`AbstractCursor`，它用于返回队列。该方法`makeNowPlayingCursor()`专门用于编写大部分自己的代码。您需要返回您有兴趣移动的项目，而不是返回队列，无论它们是什么。

为了使用`TouchInterceptor`，您需要实现`TouchInterceptor.DropListener`.

```
 private TouchInterceptor.DropListener mDropListener =
        new TouchInterceptor.DropListener() {
        public void drop(int from, int to) {
               final NowPlayingCursor mNowPlayingCursor = (NowPlayingCursor) YOUR_CURSOR;
                mNowPlayingCursor.moveItem(from, to);
                // Call `notifyDataSetChanged` here.
        }
    }; 
```

您还应该查看他们`moveQueueItem`用于将项目从一个索引移动到另一个索引的方法。该方法用于`NowPlayingCursor`when`onMove`和`moveItem`被调用。

**[可以在这里找到 - MediaPlaybackService.java](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaPlaybackService.java#L954)**

所以，你有一些工作要做，但这绝对是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:02:00.897

这是一个希望能解决您的问题的库，它可以对列表项进行拖放重新排序。有一个出色的演示，其中包括`Fragments`和`Cursors`

[https://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview)

主要特征：

> *   干净的拖放（没有视觉故障；我希望！）。
>     
> *   拖动时直观流畅的滚动。
>     
> *   支持异构项目高度。
>     
> *   公共 startDrag() 和 stopDrag() 方法。
>     
> *   自定义浮动视图的公共接口。

# visual-studio-2010 - 添加到源代码管理时，Visual Studio 不会询问在哪里添加解决方案。如何将我的解决方案添加到我想要的位置？

> ID：11649833
> 
> 赞同：3
> 
> 时间：2012-07-25T12:35:09.573
> 
> 标签：visual-studio-2010, visual-studio, tfs

我开始了一个新项目，并决定将其添加到源代码控制 (TFS)。当我右键单击解决方案并选择`Add Solution to Source Control`Visual Studio 时，它会自动将其添加到源代码管理的顶级目录，而不会提示我将其放置在何处。解决方案尚未签入。

我想发生的事情是我第一次尝试这个，它问我想在哪里添加解决方案，但我没有选择正确的位置。现在，当我撤消挂起的更改并重试时，它总是将其放在同一个位置而不询问。

有没有办法重新开始？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T13:07:36.923

从 Visual Studio 工具栏 | 文件 | 源代码控制 | 工作区 | 打开您正在使用的工作区并删除由于您之前将解决方案添加到源代码管理而添加的额外绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:50:55.270

将解决方案添加到源代码管理后，TFS 会记住该位置到本地路径的映射。要删除映射，请打开源代码管理资源管理器窗口，右键单击解决方案并选择“删除映射”。

您也可能会发现这很有帮助：http: [//zayko.net/post/How-to-permanently-remove-TFS-Source-Control-association-bindings.aspx](http://zayko.net/post/How-to-permanently-remove-TFS-Source-Control-association-bindings.aspx)

# ios - 从当前 CAAnimation 的状态开始新的 CAAnimation

> ID：11649837
> 
> 赞同：7
> 
> 时间：2012-07-25T12:35:22.540
> 
> 标签：ios, calayer, caanimation

我使用一对 CALayers 作为图像蒙版，允许我以设定的速度为灯泡填充或排空设置动画，同时也跟随当前的触摸位置。也就是说，一个面具会随着触摸而跳动，而另一个面具会滑到那个位置。由于我使用了显式动画，因此在添加动画时我不得不设置遮罩滑动遮罩的位置。这意味着如果我开始填充，然后在填充完成之前开始清空，则空将从完成的填充位置开始（反之亦然）。

有没有办法获取动画的位置，在动画的每一步设置位置，或者让新动画从活动动画的当前状态开始？

处理动画的代码如下：

```
- (void)masksFillTo:(CGFloat)height {
    // Clamp the height we fill to inside the bulb. Remember Y gets bigger going down.
    height = MIN(MAX(BULB_TOP, height), BULB_BOTTOM);

    // We can find the target Y location by subtracting the Y value for the top of the
    // bulb from the height.
    CGFloat targetY = height - BULB_TOP;

    // Find the bottom of the transparent mask to determine where the solid fill
    // is sitting. Then find how far that fill needs to move.
    // TODO: This works with the new set position, so overriding old anime doesn't work
    CGFloat bottom = transMask.frame.origin.y + transMask.frame.size.height;

    // If the target is above the bottom of the solid, we want to fill up.
    // This means the empty mask jumps and the transparent mask slides.
    CALayer *jumper;
    CALayer *slider;
    if (bottom - targetY >= 0) {
        jumper = emptyMask;
        slider = transMask;

        // We need to reset the bottom to the emptyMask
        bottom = emptyMask.frame.origin.y + emptyMask.frame.size.height;
    } else {
        jumper = transMask;
        slider = emptyMask;
    }

    [jumper removeAllAnimations];
    [slider removeAllAnimations];

    CGFloat dy = bottom - targetY;

    [CATransaction begin]; 
    [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
    [jumper setPosition:CGPointMake(jumper.position.x, jumper.position.y - dy)];
    [self slideMaskFillTo:height withMask:slider]; // Do this inside here or an odd flash glitch appears.
    [CATransaction commit];
}

// TODO: Always starts from new position, even if animation hasn't reached it.
- (void)slideMaskFillTo:(CGFloat)height withMask:(CALayer *)slider {
    // We can find the target Y location by subtracting the Y value for the top of the
    // bulb from the height.
    CGFloat targetY = height - BULB_TOP;

    // We then find the bottom of the mask.
    CGFloat bottom = slider.frame.origin.y + slider.frame.size.height;

    CGFloat dy = bottom - targetY;

    // Do the animation. Animating with duration doesn't appear to work properly.
    // Apparently "When modifying layer properties from threads that don’t have a runloop, 
    // you must use explicit transactions."
    CABasicAnimation *a = [CABasicAnimation animationWithKeyPath:@"position"];
    a.duration = (dy > 0 ? dy : -dy) / PXL_PER_SEC; // Should be 2 seconds for a full fill
    a.fromValue = [NSValue valueWithCGPoint:slider.position];
    CGPoint newPosition = slider.position;
    newPosition.y -= dy;
    a.toValue = [NSValue valueWithCGPoint:newPosition];
    a.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    [slider addAnimation:a forKey:@"colorize"];

    // Update the actual position
    slider.position = newPosition;
} 
```

以及如何调用的示例。请注意，这意味着它可以称为中间动画。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];

    [self masksFillTo:point.y];
} 
```

如果有人发现它相关，这就是图像和蒙版的创建。

```
// Instantiate the different bulb images - empty, transparent yellow, and solid yellow. This
// includes setting the frame sizes. This approach found at http://stackoverflow.com/a/11218097/264775
emptyBulb = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Light.png"]];
transBulb = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Light-moving.png"]];
solidBulb = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Light-on.png"]];

[emptyBulb setFrame:CGRectMake(10, BULB_TOP, 300, BULB_HEIGHT)]; // 298 x 280
[transBulb setFrame:CGRectMake(10, BULB_TOP, 300, BULB_HEIGHT)]; // 298 x 280
[solidBulb setFrame:CGRectMake(10, BULB_TOP, 300, BULB_HEIGHT)]; // 298 x 280

[self.view addSubview:solidBulb]; // Empty on top, then trans, then solid.
[self.view addSubview:transBulb];
[self.view addSubview:emptyBulb];

// Create a mask for the empty layer so it will cover the other layers.
emptyMask = [CALayer layer];
[emptyMask setContentsScale:emptyBulb.layer.contentsScale]; // handle retina scaling
[emptyMask setFrame:emptyBulb.layer.bounds];
[emptyMask setBackgroundColor:[UIColor blackColor].CGColor];
emptyBulb.layer.mask = emptyMask;

// Also create a mask for the transparent image.
transMask = [CALayer layer];
[transMask setContentsScale:transBulb.layer.contentsScale]; // handle retina scaling
[transMask setFrame:transBulb.layer.bounds];
[transMask setBackgroundColor:[UIColor blackColor].CGColor];
transBulb.layer.mask = transMask; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T13:21:55.263

只是通过[这个答案](https://stackoverflow.com/a/7336987/264775)导致了一个解决方案。如果您查看文档的右侧部分，您会发现以下内容：

> `- (id)presentationLayer`
> 
> 返回包含当前事务开始时所有属性的图层副本，并应用任何活动动画。

因此，如果我在第一次检查透明蒙版位置（也称为实体级别）之前添加此代码，我会抓取当前动画位置并可以在填充和填充之间切换。

```
CALayer *temp;

if (transMask.animationKeys.count > 0) {
    temp = transMask.presentationLayer;
    transMask.position = temp.position;
}

if (emptyMask.animationKeys.count > 0) {
    temp = emptyMask.presentationLayer;
    emptyMask.position = temp.position;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-27T06:48:55.153

`layer.presentation()`每次获取原始图层时都会复制它，并且您需要为`init(layer: Any)`您拥有的每个自定义 CALayer 覆盖。

从当前状态开始的另一种可能方法是使用当前动画的 beginTime 设置动画的 beginTime。它允许使用偏移量开始新的动画。

在您的情况下，它可能是（Swift）：

```
if let currentAnimation = slider.animation(forKey: "colorize") {
    let currentTime = CACurrentMediaTime()
    let animationElapsedTime = currentAnimation.beginTime + currentAnimation.duration - currentTime
    a.beginTime = currentTime - animationElapsedTime
} 
```

然而，这对于线性时间很有效，但对于其他时间来说，可能很难计算出正确的时间。

# sql-server-2008 - Sql Server 2008 报告用 0 填充空白

> ID：11649838
> 
> 赞同：0
> 
> 时间：2012-07-25T12:35:22.820
> 
> 标签：sql-server-2008

嗨，我有一张表，里面有很多空白值。我想将这些设置为显示为 0 。有没有办法我可以做到这一点？最好在查询之外，在报告服务中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:49:19.810

是的，您可以用表达式替换 SSRS 报告中可能包含空白值的字段，例如：

```
=IIF(IsNothing(Fields!Username.Value), 0, Fields!Username.Value) 
```

# php - csv文件的多维数组排序过程

> ID：11649840
> 
> 赞同：0
> 
> 时间：2012-07-25T12:35:25.767
> 
> 标签：php, arrays, algorithm, sorting, multidimensional-array

PHP中有一个数组。它是这样设置的

```
$array_var = array(array(1,2,3,4), array(5,6,7,8), array(3,5,3,9)); 
```

该数组来自使用 fgetcsv 函数获得的 csv 文件。如果我要正确地回显数组以显示其内容，我会使其显示如下：

```
field1  field2  field3  field4
  1       2       3       4
  5       6       7       8
  3       5       3       9 
```

等等等等。

现在我想对这个数组进行排序。但我只想对所有数组中的一列进行排序。换句话说，例如，我想在主数组中的每个数组中取第三个值，并按字母顺序升序列出它们。因此，对于特定情况，我们将从上表中取出 field3 中的每个值，并对其进行排序。并且还使得排序的最终结果将重新排列列，以便它们与它们的值正确对齐。

**最终结果**

```
field1  field2  field3  field4
  1       2       3       4
  3       5       3       9
  5       6       7       8 
```

等等等等。

如何实现？

挑战的原因是我试图从 csv 文件的单个列中删除重复项。我认为最快的方法是对值进行排序并在范围内查找匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:26:14.750

很难给你一个准确的答案，因为你在解释中遗漏了一些东西。例如，按其中一列排序但在其他列中有差异的行应该如何在内部排序？它们应该按其他列排序，按原始顺序保留，还是可以按任意顺序放置？

鉴于我解释您的问题的方式，我可能会定义自己的类进行比较。

```
<?php
class ColumnCompare {
  function __construct($column) {
    $this->column = $column;
  }

  function compare($a, $b) {
    if ($a[$this->column] == $b[$this->column]) {
      return 0;
    }
    return ($a[$this->column] < $b[$this->column]) ? -1 : 1;
  }
}

// Hard-coded input
$array_var = array(array(1,2,3,4), array(5,6,7,8), array(3,5,3,9));
$sort_by_col = 2;

// Create object for sorting by a particular column
$obj = new ColumnCompare($sort_by_col);
usort($array_var, array($obj, 'compare'));

// Write CSV to standard output
$sout = fopen('php://stdout', 'w');
foreach ($array_var as $fields) {
  fputcsv($sout, $fields);
}
fclose($sout);
?> 
```

最后你提出了另一个问题，这是不可能回答的。如果您从单个列中删除重复项，那么该行的其余部分会发生什么？应该只保留一行，在这种情况下是哪一行？您也可以通过“删除重复项”来表示您想要删除这些值并将 NULL 放在它们的位置。如果您希望解决该特定问题，则需要提供一些详细信息。

如果您的 CSV 文件非常简单，并且任何重复的行上的所有值都是相同的（在编辑之前的示例中就是这种情况），您可以轻松运行命令，例如

```
sort myfile.csv | uniq 
```

但我有一种感觉，它比这更复杂。`uniq`例如，还具有仅返回重复行的设置。也可以编写命令从每一行检索特定列并对其进行操作。但就像我说的，没有更多信息是不可能构建这样一个命令的。

# python - 通过字符串调用方法

> ID：11649848
> 
> 赞同：6
> 
> 时间：2012-07-25T12:35:49.167
> 
> 标签：python, python-2.5

我有以下课程。

```
func_list= ["function1", "function2", "function3"]

class doit(object):
    def __init__(self):
        for item in func_list:
            if item == "function1":
                self.function1()
            elif item == "function2":
                self.function2()
            elif item == "function3":
                self.function3()

    def function1(self):
        #do this
        pass
    def function2(self):
        #do that
        pass
    def function3(self):
        pass 
```

如果创建了此类的实例，它将遍历字符串列表并根据实际字符串调用方法。列表中的字符串具有相应方法的名称。

我怎样才能以更优雅的方式做到这一点？我不想为`elif`添加到列表中的每个“功能”添加另一个 -path。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T12:39:47.257

```
func_list= ["function1", "function2", "function3"]

class doit(object):
    def __init__(self):
        for item in func_list:
            getattr(self, item)()
    def function1(self):
        print "f1"
    def function2(self):
        print "f2"
    def function3(self):
        print "f3"

>>> doit()
f1
f2
f3 
```

对于私有函数：

```
for item in func_list:
     if item.startswith('__'):
         getattr(self, '_' + self.__class__.__name__+ item)()
     else:
         getattr(self, item)() 
```

.

```
getattr(object, name[, default]) 
```

返回对象的命名属性的值。名称必须是字符串。如果字符串是对象属性之一的名称，则结果是该属性的值。例如，getattr(x, 'foobar') 等价于 x.foobar。如果命名属性不存在，则返回默认值（如果提供），否则引发 AttributeError。

[http://docs.python.org/library/functions.html#getattr](http://docs.python.org/library/functions.html#getattr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:14:56.390

这通常通过字典查找来解决，因为函数是 Python 中的一等数据类型。例如：

```
# map string names to callable functions
dispatch = {'func1': func1, 'func2': func2, ...}

want_to_call = 'func1'
dispatch[want_to_call](args) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:32:26.070

为什么不使用 lambda？

比如说，

```
def func1(a):
    return a ** 2

def func2(a, b):
    return a ** 3 + b

dic = {'Hello':lambda x: func1(x), 'World':lambda x,y: func2(x, y)} #Map functions to lambdas
print dic['Hello'](3)
print dic['World'](2,3) 
```

输出，9 11

或者，你可以这样做......

```
class funs():
    def func1(self, a):
        return a ** 2

    def func2(self, a, b):
        return a ** 3 + b

f = funs()
dic = {'Hello': lambda x: f.func1(x), 'World': lambda x,y: f.func2(x,y)}
print dic['Hello'](3)
print dic['World'](5,4) 
```

会给你，9 129

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:02:43.913

```
class doit(object):
    def __init__(self, func_list):
        for func in func_list:
            func(self)
    #insert other function definitions here

func_list = [doit.function1, doit.function2, doit.function3]
foo = doit(func_list) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-25T13:18:15.353

您可以使用 eval 使您的程序更加简单和简短。

```
list= ["function1", "function2", "function3"]

class doit(object):
    def __init__(self):
        for item in list:
            eval(item)()
    def function1(self):
        print "f1"
    def function2(self):
        print "f2"
    def function3(self):
            print "f3" 
```

# .net - Powershell 和 HtmlAgilityPack

> ID：11649849
> 
> 赞同：2
> 
> 时间：2012-07-25T12:36:02.677
> 
> 标签：.net, powershell, html-agility-pack

我需要使用 Powershell 进行一些屏幕抓取，并浏览了这篇文章

[http://www.leeholmes.com/blog/2010/03/05/html-agility-pack-rocks-your-screen-scraping-world/](http://www.leeholmes.com/blog/2010/03/05/html-agility-pack-rocks-your-screen-scraping-world/)

并希望快速启动并运行演示。但是，我马上遇到了障碍，不知道为什么会失败。

代码如下：

```
add-type -Path "C:\TEMP\HtmlAgilityPack\Net20\HtmlAgilityPack.dll" 
```

马上，我收到以下错误：

```
PS C:\TEMP\HtmlAgilityPack\Net20> add-type -Path "C:\TEMP\HtmlAgilityPack\Net20\HtmlAgilityPack.dll"
Add-Type : Could not load file or assembly 'file:///C:\TEMP\HtmlAgilityPack\Net20\HtmlAgilityPack.dll' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.
At line:1 char:9
+ add-type <<<<  -Path "C:\TEMP\HtmlAgilityPack\Net20\HtmlAgilityPack.dll"
    + CategoryInfo          : NotSpecified: (:) [Add-Type], BadImageFormatException
    + FullyQualifiedErrorId : System.BadImageFormatException,Microsoft.PowerShell.Commands.AddTypeCommand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:43:55.077

您的问题是它默认针对 2.0 运行时运行我相信这个[问题](https://stackoverflow.com/questions/2094694/how-can-i-run-powershell-with-the-net-4-runtime)会告诉您如何解决它。

# event-receiver - 添加的查找列值的事件接收器应在同一 Sharepoint 列表的另一列中更新

> ID：11649852
> 
> 赞同：0
> 
> 时间：2012-07-25T12:36:14.520
> 
> 标签：event-receiver

我有一个名为“XXX”的列表。在该列表中，我有两列名为 Status，即选择列和 StatusLookup，即查找列。两列应具有相同的选择值，即打开、待批准、已取消。如果在共享点列表中添加新项目，如果我在状态列中选择“打开”，它应该在状态查找列中自动更新，无需任何手动输入。

我需要知道是否有任何方法可以通过使用事件接收器在 Sharepoint 列表的状态列中选择值来更新 StatusLookup 列？

你能尽快回复我吗？

谢谢，苏古……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:34:43.597

抱歉，这已经晚了，但我认为您希望第二列不是查找列，而是计算列。然后你想让公式为“=[choiceColumn]”。然后，计算列应始终自动更新为选择列中的值。

假设您可以在另一个列表的计算列上创建一个查找列，但这对我不起作用（计算列不适用于查找列），这就是我最终找到这篇文章的方式。如果你解决了你的问题，请告诉我。

-抢

# php - cakePHP通过关系绑定hasmany

> ID：11649853
> 
> 赞同：3
> 
> 时间：2012-07-25T12:36:23.767
> 
> 标签：php, cakephp, cakephp-2.0

好的，这有点难以解释，但我会尽力而为。

我有 3 张桌子

```
companies     products     product_availabilities
---------     --------     ----------------------
id            id           id
name          name         company_id
                           product_id
                           buys (tinyint)
                           sells (tinyint) 
```

和他们的模型

```
class Company extends AppModel
{
        public $name = 'Company';

        public $hasMany = array(
            'ProductAvailability'
        );

class Product extends AppModel
{       
    public $name = 'Product';

    public $hasMany = array(
        'ProductAvailability'
    );

class ProductAvailability extends AppModel
{
    public $name = 'ProductAvailability';

    public $belongsTo = array(
        'Company',
        'Product'
    );
} 
```

我想做的是，当我创建公司时，我希望能够选择公司购买或销售的产品。我在书中看到了一个 hasMany through 关系的示例（http://book.cakephp.org/1.3/view/1650/hasMany-through-The-Join-Model），但他们正在从“加入表”控制器。是否可以将 productAvailability 模型绑定到我的公司模型，以便能够在创建公司时选择产品？

编辑：这是我的做法。我知道这不是最优的，因为涉及到很多循环，但它确实有效。

公司控制人：

```
 $products = $this->Company->ProductAvailability->Product->find('list', array('fields' => array('Product.id', 'Product.label')));
    $this->set('products', $products);

    if($this->request->is('post')){             
        if($this->Company->save($this->request->data)){
            foreach($products as $product)
            {
                $tmpArray = array(
                    'company_id' => $this->Company->id,
                    'product_id' => $product['Product']['id']
                );

                foreach($this->request->data('BuyProducts.product_id') as $buyProduct)
                {
                    if($buyProduct == $product['Product']['id'])
                        $tmpArray['buys'] = 1;
                }
                foreach($this->request->data('SellProducts.product_id') as $sellProduct)
                {
                    if($sellProduct == $product['Product']['id'])
                        $tmpArray['sells'] = 1;
                }

                if(count($tmpArray) > 2)
                {
                    $this->Company->ProductAvailability->create();
                    $this->Company->ProductAvailability->set($tmpArray);
                    $this->Company->ProductAvailability->save();
                }  
            }

            $this->Session->setFlash('Yay', 'success');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Nay', 'error');
        }
    } 
```

公司添加表格：

```
<?php echo $this->Form->create('Company'); ?>

<?php echo $this->Form->input('name', array( 'div' => 'full-form')); ?>

<?php echo $this->Form->input('BuyProducts.product_id', array('multiple' => 'checkbox', 'options' => $products, 'div' => 'full-form', 'label' => false)); ?>

<?php echo $this->Form->input('SellProducts.product_id', array('multiple' => 'checkbox', 'options' => $products, 'div' => 'full-form', 'label' => false)); ?>

<?php echo $this->Form->end(array('label' => __('Save'), 'div' => 'center', 'class' => 'bouton-vert')); ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T13:28:55.940

你有两个选择。要么让 cakePHP 对**hasAndBelongsToMany**关系做一些魔术，要么手动做，如果你向连接表添加属性，这是必要的

# 1\. CakePHP HABTM

使用 CakePHP 的功能并制定一个直接的解决方案，我将进行以下更改：

**模型**

如果一家公司有不止一种产品，并且产品属于多家公司。这是 Company<->Product 之间的**hasAndBelongsToMany**关系

```
// company.php
...
var $hasAndBelongsToMany = array(
    'Product' => array(
        'className' => 'Product',
        'joinTable' => 'companies_products',
        'foreignKey' => 'company_id',
        'associationForeignKey' => 'product_id',
        'unique' => true,
    )
);
...
// similar in product.php 
```

在数据库中添加所需的表“companies_products”。

**控制器**

然后在公司控制器的**添加**功能中应该有类似的内容：

```
$products = $this->Company->Product->find('list');
$this->set(compact('products')); 
```

**看法**

**最后在add.ctp**中插入产品，选择应该允许多选，让 cakePHP 发挥一些作用，像这样：

```
echo $this->Form->input('products', array( 
                         'label' => 'Products to buy (Ctr+multiple choice)' 
                          'type' => 'select', 
                      'multiple' => true,
                       )); 
```

# 2\. 手动

当 HABTM 变得更加“异国情调”并包含一些属性时，例如在您的情况下“买入”或“卖出”，您需要手动操作。这是在**产品控制器**中手动设置字段，然后再将它们插入数据库。就像是：

```
foreach($availableProducts as $availableProduct ){
  $this->Product->ProductAvailabilities->create();
  $this->Product->ProductAvailabilities->set( array(
    'company_id' => $this->Product->id,
    'product_id' => $availableProduct['Product']['id'],
    'buys' => $availableProduct['Product']['buy'], 
    'sells' => $availableProduct['Product']['sell'] 
             // or however you send it to the controller
  ));
$this->Product->ProductAvailabilities->save();
} 
```

让我们希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:53:45.807

您正在计划一个可能在连接表中有额外字段的 habtm-relationship (m:n)。尽管这可以通过常规 habtm 完成，但我更喜欢您选择并将 m:n 实现为 1:n:1 的方式，这完全一样，并且在保存数据时为您提供了更多选择。

这是一个[类似的问题和答案](https://stackoverflow.com/questions/5795615/saving-habtm-with-extra-fields)

至于您的问题：您可以像这样从您的产品表中收集数据：

```
$this->Company->ProductAvailability->Product->find('all', $params); 
```

此外，您可能想看看`containable-behaviour`这对这个用例非常有用：

```
$params['conditions'] = array(
    'Company.id' => $id
);
$params['contain'] => array(
    'ProductAvailability' => array(
        'conditions' =>array(
            'buys' => 1
        ),
        'Product' => array(
            'order' => array(
                'name' => 'ASC'
            )
        )
    )
);
$this->Company->find('all', $params); 
```

# python - 派生类不调用init

> ID：11649856
> 
> 赞同：1
> 
> 时间：2012-07-25T12:36:30.243
> 
> 标签：python

我试图了解某种 OAuth2/web2py 集成，但 python 类模型中的一些怪癖让我难以掌握。具体来说，我有这个 web2py 控制器：

```
def google():
    if 'state' in request.vars and request.vars.state == 'google':
        session.state = request.vars.state
    person = Person("google")
    print person.render()
    return person.render() 
```

所以我们在`Person`这里使用了这个类。实现是这样的：

```
class Person(Base): 
```

`__init__`课堂上没有`Person`。该类`Base`有一个`__init__`功能：

```
class Base(object):
    def __init__(
        self,
        hooks=[],
        theme="%(name)s/",
        view="app/generic",
        meta=None,
        context=None
        ):
        from gluon.storage import Storage
        self.meta = meta or Storage()
        self.context = context or Storage()
        self.context.alerts = []
        self.context.content_types = []
        self.context.categories = []
        self.context.menus = []
        self.context.internalpages = []
        self.theme = theme
        self.view = view

        # hooks call
        self.start()
        self.build()
        self.pre_render()

        # aditional hooks
        if not isinstance(hooks, list):
            hooks = [hooks]

        for hook in hooks:
            self.__getattribute__(hook)() 
```

所以我的问题如下：如果`Person`没有明确调用`Base.__init__`，它会被调用吗？

或者，更笼统地说：`__init__`如果派生类没有`__init__`函数，会调用基类函数吗？而如果派生类有`__init__`函数但没有显式调用基类`__init__`函数呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:38:14.497

如果派生类没有功能，就会继承并调用`__init__`父类。`__init__`

如果派生类有一个不调用父类的`__init__`函数，则不会调用父`__init__`类`__init__`。

# android - 将 Soap 值存储在原始文件夹中

> ID：11649860
> 
> 赞同：0
> 
> 时间：2012-07-25T12:36:36.810
> 
> 标签：android

我正在使用肥皂解析器处​​理 Web 服务。我需要从 Web 服务中检索值并将其存储在本地。我有很多字符串值。

我的问题是，如何以及在哪里存储我的应用程序中的所有字符串值。就像，这种存储通常我们使用原始文件夹。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:39:49.073

看看[@Android 数据存储](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:40:12.547

`Raw`和`Asset`文件夹是**只读的**。你不能修改里面的内容，虽然你只能阅读它。

在您的情况下，您应该使用`SQLite`数据库或`SharedPreference`保存数据。另一种技术是将您的数据保存在 sd 卡内创建的文件中，但您应该评估可行性。

# cakephp - CakePHP 2.2 - TCPDF - 无效的属性消息

> ID：11649864
> 
> 赞同：0
> 
> 时间：2012-07-25T12:37:07.903
> 
> 标签：cakephp

我对 TCPDF 有疑问：

查看PDF：

```
function viewPdf($id = null) 
    { 
        if (!$id) 
        { 
            $this->Session->setFlash('Sorry, there was no property ID submitted.'); 
            $this->redirect(array('action'=>'index'), null, true); 
        } 
        Configure::write('debug',0); // Otherwise we cannot use this method while developing 

        $id = intval($id); 

        $property = $this->__view($id); // here the data is pulled from the database and set for the view 

        if (empty($property)) 
        { 
            $this->Session->setFlash('Sorry, there is no property with the submitted ID.'); 
            $this->redirect(array('action'=>'index'), null, true); 
        } 

        $this->layout = 'pdf'; //this will use the pdf.ctp layout 
        $this->render(); 
    } 
```

__看法：

```
function __view($id = null) { 
                if (!$id) { 
                        $this->Session->setFlash(__('Invalid Calculation.', true)); 
                        $this->redirect(array('action'=>'index')); 
                } 

                $this->set('calculation', $this->Calculation->read(null, $id)); 

        } 
```

查看PDF.ctp：

```
<?php 
App::import('Vendor','xtcpdf'); 
$tcpdf = new XTCPDF(); 
$textfont = 'freesans'; // looks better, finer, and more condensed 
than 'dejavusans' 

$tcpdf->SetAuthor("KBS Homes & Properties a http://kbs-properties.com"); 
$tcpdf->SetAutoPageBreak( false ); 
$tcpdf->setHeaderFont(array($textfont,'',20)); 
$tcpdf->xheadercolor = array(150,0,0); 
$tcpdf->xheadertext = 'Test'; 
$tcpdf->xfootertext = 'Copyright © %d KBS Homes & Properties. All 
rights reserved.'; 

// Now you position and print your page content 
// example: 
$tcpdf->SetTextColor(0, 0, 0); 
$tcpdf->SetFont($textfont,'B',20); 
$tcpdf->Cell(0,14, "Hello World", 0,1,'L'); 
// ... 
// etc. 
// see the TCPDF examples 

$tcpdf->Output('filename.pdf', 'I'); 

?> 
```

CakePHP 2.2 的 PDF 布局（已弃用 $content_for_layout）：

```
<?php 
header("Content-type: application/pdf"); 
echo $this->fetch('content');
?> 
```

应用程序/供应商中的 xtcpdf.php：

```
<?php 
App::import('Vendor','tcpdf/tcpdf'); 

    class XTCPDF  extends TCPDF 
    { 

        var $xheadertext  = 'PDF created using CakePHP and TCPDF'; 
        var $xheadercolor = array(0,0,200); 
        var $xfootertext  = 'Copyright Â© %d XXXXXXXXXXX. All rights reserved.'; 
        var $xfooterfont  = PDF_FONT_NAME_MAIN ; 
        var $xfooterfontsize = 8 ; 

        /** 
        * Overwrites the default header 
        * set the text in the view using 
        *    $fpdf->xheadertext = 'YOUR ORGANIZATION'; 
        * set the fill color in the view using 
        *    $fpdf->xheadercolor = array(0,0,100); (r, g, b) 
        * set the font in the view using 
        *    $fpdf->setHeaderFont(array('YourFont','',fontsize)); 
        */ 
        function Header() 
        { 

            list($r, $b, $g) = $this->xheadercolor; 
            $this->setY(10); // shouldn't be needed due to page margin, but helas, otherwise it's at the page top 
            $this->SetFillColor($r, $b, $g); 
            $this->SetTextColor(0 , 0, 0); 
            $this->Cell(0,20, '', 0,1,'C', 1); 
            $this->Text(15,26,$this->xheadertext ); 
        } 

        /** 
        * Overwrites the default footer 
        * set the text in the view using 
        * $fpdf->xfootertext = 'Copyright Â© %d YOUR ORGANIZATION. All rights reserved.'; 
        */ 
        function Footer() 
        { 
            $year = date('Y'); 
            $footertext = sprintf($this->xfootertext, $year); 
            $this->SetY(-20); 
            $this->SetTextColor(0, 0, 0); 
            $this->SetFont($this->xfooterfont,'',$this->xfooterfontsize); 
            $this->Cell(0,8, $footertext,'T',1,'C'); 
        } 
    } 
    ?> 
```

而且我总是收到“抱歉，提交的 ID 没有属性”。我没有看到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:18:32.190

你应该看看这段代码：

```
function __view($id = null) { 
            if (!$id) { 
                    $this->Session->setFlash(__('Invalid Calculation.', true)); 
                    $this->redirect(array('action'=>'index')); 
            } 

            $data =  $this->Calculation->read(null, $id)); 

            return $data;
    } 
```

# php - 为每个循环获取两个或一个复选框值

> ID：11649865
> 
> 赞同：0
> 
> 时间：2012-07-25T12:37:08.700
> 
> 标签：php, checkbox, foreach

我有一个表单，用户可以提交 1 个或 2 个复选框。它必须至少为 1。复选框设置如下所示：

```
 <input name="request['+fields+'][Type of Folder:]" 
id="cbpathCDB'+fields+'" type="checkbox" 
value="Content Database" class="cbShowPath required" data-id="'+fields+'"/>

    <input name="request['+fields+'][Type of Folder:]" 
id="cbpathEFS'+fields+'" type="checkbox" 
value="File System" class="efsShowPath required" data-id="'+fields+'"/> 
```

还有其他输入也正在提交，所以我对每个输入都使用它：

```
$a=$_REQUEST['request'];        

        foreach ($a as $name) {         
            foreach ($name as $key => $desc) {
                if ($desc !== '') {
                    $note.= $key;
                    $note.= $desc;
                }
            }
        } 
```

如果用户选中一个复选框，这将获得所有数据，但如果用户选中两个复选框，则仅显示 FIRST 复选框的值。

为了获得这两个值，我需要在这里做什么？

我需要在这里进行第三次 foreach 以获得 name="request[][][]" 吗？

编辑：这里有一些更新......

如果我使用他的 foreach：

```
foreach ($a as $name) {         
            foreach ($name as $key => $desc) {
                foreach ($desc as $d){
                        $note.= $key;
                        $note.= $d; 
                }
                if ($desc !== '') {
                        $note.= $key;
                        $note.= $desc;
                }
            }
        } 
```

我得到了这些结果： **文件夹类型：文件夹的内容 DBType：文件夹的文件系统类型：数组**

如果我使用他的 foreach：

```
 foreach ($a as $name) {         
        foreach ($name as $key => $desc) {
            if ($desc !== '') {
                $note.= $key;
                $note.= $desc;
            }
        }
    } 
```

我得到了这些结果： **文件夹类型：数组**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:41:58.840

将表单元素的名称更改为

```
request['+fields+'][Type of Folder:][] 
```

所以对于你的代码

```
<input name="request['+fields+'][Type of Folder:][]" id="cbpathCDB'+fields+'" type="checkbox" value="Content Database" class="cbShowPath required" data-id="'+fields+'"/>

<input name="request['+fields+'][Type of Folder:][]" id="cbpathEFS'+fields+'" type="checkbox" value="File System" class="efsShowPath required" data-id="'+fields+'"/> 
```

这将创建`$_REQUEST['request']["'+fields+'"]['Type of Folder:']`一个包含每个复选框值的数组。

您需要修改代码中使用的部分`$desc`以包含另一个循环。

```
foreach ($a as $name) {         
  foreach ($name as $key => $desc) {
    switch (gettype($desc)) {
      case 'array':
        foreach ($desc as $i => $item) {
          $note .= "{$key}[{$i}]";
          $note .= $item;
        }
        break;
      case 'string':
      default:
        if ($desc !== '') {
          $note.= $key;
          $note.= $desc;
        }
    }
  }
} 
```

# php - 将价格格式化为逗号分隔

> ID：11649866
> 
> 赞同：9
> 
> 时间：2012-07-25T12:37:11.057
> 
> 标签：php, formatting

在我的数据库中，我有类似的值

> 256.23、200.33、89.33、133.45、

我必须将这些值乘以千，然后将结果格式化为价格（逗号分隔）

```
256.23 x 1000 = 256230 我想显示为 256,230

200.33 x 1000 = 200330 我想要这个为 200,330

89.33 x 1000 = 89330 我想要这个为 89,330

```

目前我正在使用公式

```
echo "Price is : $".$price*1000; 
```

但是如何格式化，我不知道。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-25T12:38:50.087

您正在寻找[number_format](http://php.net/manual/en/function.number-format.php)函数。

```
$price=123456;
echo number_format($price);
// output: 123,456 
```

此函数接受一个、两个或四个参数（不是三个）：

如果只给出一个参数，数字将被格式化为不带小数，但在每组千位之间使用逗号 (",")。

如果给定两个参数，则数字将被格式化为小数，小数前有一个点（“.”），每组千位之间有一个逗号（“，”）。

如果给定了所有四个参数，则 number 将被格式化为小数，dec_point 代替小数点前的点（“.”），以及以千位分隔符（“，”）代替千位组之间的逗号（“，”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:11:07.530

```
<?php

$number = 1234.56;

// english notation (default)
$english_format_number = number_format($number);
// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');
// 1 234,56

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');
// 1234.57

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T12:41:13.003

检查 number_format，这里是一个例子

```
echo number_format(8333*1000, 3, ',', '.'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-20T16:42:14.167

上面的答案不考虑小数或四舍五入，这可能对需要担心小数的人有所帮助：

示例：不显示小数使用空格代替逗号，并使用小数和逗号打印：

```
$price = 1000000.90;
var_dump(number_format(floor((float) $price), 0, ',', ' '));
var_dump(number_format($price, 2, '.', ',')); 
```

输出：

```
string(9) "1 000 000"
string(12) "1,000,000.90" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-21T09:36:50.343

> $数字 = 1234.56;
> 
> setlocale(LC_MONETARY,"en_US");
> 
> echo money_format("价格为 %i", $number);
> 
> //输出将是“价格为 1,234.56 美元”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-29T12:49:38.417

这是使用 PHP 7+ 将价格转换为印度价格格式的自定义函数

```
function moneyFormatIndia($num) {
    $explrestunits = "" ;
    if(strlen($num)>3) {
        $lastthree = substr($num, strlen($num)-3, strlen($num));
        $restunits = substr($num, 0, strlen($num)-3); // extracts the last three digits
        $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; // explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
        $expunit = str_split($restunits, 2);
        for($i=0; $i<sizeof($expunit); $i++) {
            // creates each of the 2's group and adds a comma to the end
            if($i==0) {
                $explrestunits .= (int)$expunit[$i].","; // if is first value , convert into integer
            } else {
                $explrestunits .= $expunit[$i].",";
            }
        }
        $thecash = $explrestunits.$lastthree;
    } else {
        $thecash = $num;
    }
    return $thecash; // writes the final format where $currency is the currency symbol.
}

$amount = '10000034000';
$amount = moneyFormatIndia( $amount );
echo $amount; 
```

# css - IE8 中的实心字段集边框问题

> ID：11649869
> 
> 赞同：1
> 
> 时间：2012-07-25T12:37:14.937
> 
> 标签：css, fieldset

我希望设置我的字段集的样式，使它们具有实心边框。

所以我把它设计成这样...

```
fieldset {
    margin: 5px;
    padding: 20px;
    border: solid orange;
    border-width: 30px 1px 1px 1px;
}

fieldset legend {
    background-color: orange;
    line-height: 30px;
    /* uncomment line below for IE8 */
    /* margin-top: -50px; */
} 
```

在大多数浏览器（IE9、Chrome、FF14）上看起来像这样......

![它应该是什么样子](../Images/49d415d26e7177eb94f0376736bf25da.png)

我无法让它在 IE8 上运行。我添加了一个 -ve 边距以正确对齐图例，但图例的每一侧仍有 2 个垂直白条，我无法摆脱......

![在 MSIE8 上](../Images/60114ff74df257901f8bb51e7d2aa146.png)

小提琴... [http://jsfiddle.net/spiderplant0/NmwuC/](http://jsfiddle.net/spiderplant0/NmwuC/)

任何想法如何摆脱 IE8 上的白条（我不关心 IE7、IE6 等）？

（顺便说一句，HTML 是由 Drupal 框架生成的，所以我更喜欢不涉及更改 HTML 的解决方案。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:25:10.170

我检查了它并更改为IE8。检查[http://jsfiddle.net/NmwuC/16/](http://jsfiddle.net/NmwuC/16/)

这仅适用于 IE8。

# entity-framework - 使用实体框架代码优先回滚或丢弃更改

> ID：11649870
> 
> 赞同：0
> 
> 时间：2012-07-25T12:37:15.640
> 
> 标签：entity-framework

有没有办法在 Entity Framework 4.3.1.0 的上下文中回滚更改？如果不是，实现事务行为的标准方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:47:58.823

实体框架本质上是事务性的。只有在调用 SaveChanges 时才会提交更改。没有显式的回滚操作，但是您可以简单地处理您的上下文，并且不会应用所有更改。

# macos - 尝试打印终端中的行数时出现错误“xargs unterminated quote”

> ID：11649872
> 
> 赞同：45
> 
> 时间：2012-07-25T12:37:23.163
> 
> 标签：macos, xargs

我想获取我的应用程序中的行数。我正在使用这段代码：

```
find . "(" -name "*.m" -or -name "*.h" ")" -print | xargs wc -l 
```

它在其他应用程序中运行良好，但对于我的一个应用程序，它给出了错误“xargs unterminated quote”。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-25T13:00:31.080

您的文件名中是否有引号？尝试这样的事情：

```
find . "(" -name "*.m" -or -name "*.h" ")" -print0 | xargs -0 wc -l 
```

该`-print0`参数告诉`find`使用 NULL 字符来终止它打印出的每个名称。该`-0`参数告诉`xargs`它的输入标记是 NULL 终止的。这避免了字符问题，否则将被视为特殊字符，如引号。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-14T01:22:43.730

发生这种情况是因为您在某处的文件名中有一个单引号......

即，->`'`

要查找问题文件，请在终端中运行以下命令：

```
\find . | grep \' 
```

你也可以像这样运行 xargs 来有效地解决这个问题：

```
xargs -I 
```

如果您有导致问题的 xargs 设置的别名，也可能发生这种情况。要测试是否是这种情况，只需`\`在其前面运行 xargs ，例如

```
\find . | \xargs .... 
```

\ 只是意味着“运行没有任何别名的命令”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-09T09:41:20.517

使用时解决引号、空格和特殊字符问题的规范方法`find`是使用`-exec`选项而不是`xargs`.

对于您的情况，您可以使用：

```
find . "(" -name "*.m" -or -name "*.h" ")" -exec wc -l "{}" \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-23T03:13:12.237

经过一番修改，我发现这个命令对我有用（因为我的文件名中有空格和不匹配的引号）：

`find . -iname "*USA*" -exec cp "{}" /Directory/to/put/file/ \;`

`.`指正在运行搜索的位置

`-iname`后面的表达式指的是匹配条件

`-exec cp "{}" /Directory/to/put/file/ \;`告诉命令执行复制命令，通过`-iname`替换找到的每个文件`"{}"`

您需要`\;`向 exec 命令表示该`cp`语句正在结束。

# php - Codeigniter 路由和语言标识符

> ID：11649879
> 
> 赞同：0
> 
> 时间：2012-07-25T12:37:39.070
> 
> 标签：php, mysql, codeigniter

我的网站上有 URI 语言标识符我是按照 codeigniter WIKI 上的说明进行的。它工作正常。但是我如何获得控制器的名称，因为 $this->uri->segment(2) == id 和 $this->uri->segment(1) == 方法的名称？

这是我的 routes.php

```
$route['default_controller'] = "page";
$route['404_override'] = '';
$route['(\w{2})/(.*)'] = '$2';
$route['(\w{2})'] = $route['default_controller']; 
```

谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:40:03.770

```
$this->uri->segment(1) 
```

在你的 base_url() 之后引用 ist 参数

**例如**

```
base url = 'http://localhost/site/' 
```

**网址** `http://localhost/site/controller/method`

```
$this->uri->segment(1) = 'controller'
$this->uri->segment(2) = 'method' 
```

现在检查以下情况

```
base url = 'http://testsite/test/site/' 
```

**网址** `http://testsite/test/site/controller/method`

```
$this->uri->segment(1) = 'controller'
$this->uri->segment(2) = 'method' 
```

# php - 壳执行 | 允许特定程序在 apache 用户下运行

> ID：11649884
> 
> 赞同：0
> 
> 时间：2012-07-25T12:37:49.633
> 
> 标签：php, linux, centos, shell-exec

我可以使用 php 中的 shell_exec 运行特定的命令/程序，例如需要 root 权限的 x 服务器吗？我只想从 php shell_exec() 运行 x 服务器程序。注意：php是在suphp下运行的，操作系统是centos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:42:40.693

查看 Unix Files 上的 SUID 和 SGID

[SUID 代表设置用户 ID。这意味着如果为任何应用程序设置了 SUID 位，那么在运行该应用程序时，您的用户 ID 将被设置为应用程序/文件的所有者而不是当前用户。这意味着，如果我有一个所有者为“root”的应用程序并且它的 SUID 位已设置，那么当我以普通用户身份运行此应用程序时，该应用程序仍将以 root 身份运行。因为 SUID 位告诉 Linux 用户 ID root 是为这个应用程序设置的，并且每当这个应用程序执行时，它必须像 root 正在执行它一样执行（因为 root 拥有这个文件）。](http://www.codecoffee.com/tipsforlinux/articles/028.html)

# php - Zend PHPunit 与 oracle 数据库

> ID：11649887
> 
> 赞同：0
> 
> 时间：2012-07-25T12:38:03.940
> 
> 标签：php, oracle, zend-framework, phpunit

我在尝试使用 phpunit 从 oracle db 检索数据时收到“Oracle 未知异常”，但只有当我从 phpunit 尝试时，开发代码才能正常工作，它会引发异常。

# performance - 无点样式的性能影响

> ID：11649893
> 
> 赞同：17
> 
> 时间：2012-07-25T12:38:14.300
> 
> 标签：performance, f#, functional-programming, pointfree

我在使用 F# 学习函数式编程方面迈出了第一步，我刚刚遇到了正向管道 (|>) 和正向组合 (>>) 运算符。起初我认为它们只是糖而不是对最终运行的代码产生影响（尽管我知道管道有助于类型推断）。

但是我遇到了这篇 SO 文章： [函数式编程中“无点”风格的优点和缺点是什么？](https://stackoverflow.com/questions/5671271/what-are-advantages-and-disadvantages-of-point-free-style-in-functional-progra/5671552#5671552) 其中有两个有趣且内容丰富的答案（不是为我简化事情，而是打开了一整罐围绕“无意义”或“无意义”风格的蠕虫）我从这些（和其他阅读）中获得的收获是无意义的是一个有争议的领域。与lambas 一样，无点样式可以使代码更容易理解，或者更难理解，具体取决于使用情况。它可以帮助有意义地命名事物。

但我的问题涉及对第一个答案的评论：AshleyF 在答案中沉思：

> “在我看来，组合可以通过让编译器更清楚地表明不需要像流水线一样产生中间值来降低 GC 压力；帮助使所谓的“森林砍伐”问题更容易解决。”

加舍 回复:

> “关于改进编译的部分根本不是真的。在大多数语言中，无点风格实际上会降低性能。Haskell 严重依赖优化，正是因为它是使这些东西的成本可以承受的唯一方法。充其量，这些组合器被内联了，你得到一个等效的有意义的版本”</p>

任何人都可以扩展性能影响吗？（一般来说，特别是对于 F#）我刚刚假设它是一种写作风格的东西，编译器会将这两个习语解开成等效的代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-25T14:06:09.610

这个答案将是特定于 F# 的。我不知道其他函数式语言的内部是如何工作的，而且它们不编译为 CIL 的事实可能会产生很大的不同。

我可以在这里看到三个问题：

1.  使用 对性能有何影响`|>`？
2.  使用 对性能有何影响`>>`？
3.  声明带有参数和不带参数的函数之间的性能差异是什么？

[答案（使用您链接到的问题](https://stackoverflow.com/q/5671271/41071)中的示例）：

1.  `x |> sqr |> sum`和有什么区别`sum (sqr x)`吗？

    不，没有。编译后的 CIL 完全一样（这里用 C# 表示）：

    ```
    sum.Invoke(sqr.Invoke(x)) 
    ```

    (`Invoke()`被使用，因为`sqr`and`sum`不是 CIL 方法，它们是`FSharpFunc`，但这与这里无关。)

2.  `(sqr >> sum) x`和有什么区别`sum (sqr x)`吗？

    不，两个示例都编译为与上述相同的 CIL。

3.  `let sumsqr = sqr >> sum`和有什么区别`let sumsqr x = (sqr >> sum) x`吗？

    是的，编译后的代码是不同的。如果指定参数，`sumsqr`则编译成普通的 CLI 方法。但是，如果您不指定它，它会被编译为`FSharpFunc`带有支持字段的类型属性，其`Invoke()`方法包含代码。

    但是所有的效果是调用无点版本意味着加载一个字段（the `FSharpFunc`），如果您指定参数，则不会这样做。但我认为这不应该显着影响性能，除非在最极端的情况下。

# c# - 在 sql 查询中使用 aspx 页面中的会话变量

> ID：11649894
> 
> 赞同：0
> 
> 时间：2012-07-25T12:38:19.680
> 
> 标签：c#, asp.net

我在 aspx 页面中有 sqldatasource，在查询中我想使用一个参数，即来自会话。

下面是我的代码。请帮帮我。

```
<asp:SqlDataSource runat="server" ID="MySQLData2"
ConnectionString='<%$ConnectionStrings:ConnectionString %>'
ProviderName="MySql.Data.MySqlClient"
SelectCommand="SELECT * FROM tablename  WHERE id="Here I want to use session variable"" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:42:45.640

试试这个

```
<asp:SqlDataSource runat="server" ID="MySQLData2"
    ConnectionString='<%$ConnectionStrings:ConnectionString %>'
    ProviderName="MySql.Data.MySqlClient"
    SelectCommand="SELECT * FROM tablename  WHERE id=@SessionVar">
  <SelectParameters>
     <asp:SessionParameter Name="SessionVar" SessionField="SessionVariableName" ConvertEmptyStringToNull="true" />
  </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:41:45.720

这篇[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sessionparameter.sessionfield.aspx)文章应该可以满足您的需求。基本上，您将使用参数占位符“？”定义您的 SelectCommand，然后使用您的 SessionParameter 条目定义您的 SelectParameters 集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:41:27.433

使用参数相当简单：

```
 <asp:SqlDataSource id="Employees" runat="server"
  ConnectionString="<%$ ConnectionStrings:Northwind%>"
  SelectCommand="SELECT LastName FROM Employees WHERE Title = @Title">
  <SelectParameters>
    <asp:ControlParameter Name="Title" 
      ControlID="DropDownList1"
      PropertyName="SelectedValue"/>
  </SelectParameters>
</asp:sqldatasource> 
```

只需用您的变量替换参数的值：

```
 <%= Sessiom[variable_name] %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:43:15.310

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="Data Source=LAZY-PC;Initial Catalog=Test;Integrated Security=True"
        ProviderName="System.Data.SqlClient" SelectCommand="SELECT * FROM [C] WHERE ([C#] = @column1)">
        <SelectParameters>
            <asp:SessionParameter Name="column1" SessionField="id" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T12:48:22.610

Johnny_D 的回答非常准确，但我想指出[`SessionParameter`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sessionparameter.aspx)，您可以使用一个类：

```
<asp:SqlDataSource runat="server" ID="MySQLData2"
    ConnectionString='<%$ConnectionStrings:ConnectionString %>'
    ProviderName="MySql.Data.MySqlClient"
    SelectCommand="SELECT * FROM tablename WHERE id= ?" />
      <SelectParameters>
          <asp:SessionParameter
            Name="id"
            SessionField="SessionVariableName"
            DefaultValue="0" />
      </SelectParameters>
  </asp:SqlDataSource> 
```

# c# - MVC3 AJAX 表单 - 日期时间溢出？

> ID：11649896
> 
> 赞同：3
> 
> 时间：2012-07-25T12:38:26.827
> 
> 标签：c#, asp.net, ajax, asp.net-mvc-3, datetime

在我的应用程序中，我有一个包含**Documents**列表的 Index 页面。我想在同一个索引页面上添加一个带有 AJAX 表单的新文档。我正在使用 ViewModel 将**NewDocument**对象传递给索引页面。

AJAX 表单（为了便于阅读，我省略了一些部分）：

```
@using (Ajax.BeginForm("Index_AddDocument", new AjaxOptions { UpdateTargetId = "MainList" }))

<div class="editor-field">
        @Html.EditorFor(model => model.NewDocument.Date)
        @Html.ValidationMessageFor(model => model.NewDocument.Date)
</div> 
```

这是应该将新**文档**保存到数据库并更新文档的部分视图列表的方法：

```
public ActionResult Index_AddDocument(HomeIndexViewModel viewModel)
    {

        db.Documents.Add(viewModel.NewDocument);
        db.SaveChanges();

        return PartialView("ListOfDocs", db.Documents);
    } 
```

这不起作用，我在`db.SaveChanges()`. 它说：

> InnerException {“转换为日期时间时发生溢出。”} System.Exception {System.Data.SqlServerCe.SqlCeException}

编辑：我的文档域模型具有以下日期属性：

```
[DataType(DataType.Date)]
public DateTime Date { get; set; } 
```

在 AJAX 表单中，我只需键入一个随机日期，例如 2005 年 5 月 2 日，然后单击提交，然后得到上面提到的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:53:02.337

我想我刚刚解决了我自己的问题。我数据库中的“日期”列属于“日期时间”类型。但是我的域模型有这个：

```
[DataType(DataType.Date)]
public DateTime Date { get; set; } 
```

我将该 DataType 更改为“DataType.DateTime”，现在它似乎工作正常。

谢谢大家的指导！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:44:57.160

调用`viewModel.NewDocument.Date`之前的值是多少？`db.SaveChanges()`

C# 可以处理从 0000 年 1 月 1 日到 9999 年 12 月 31 日的日期。我知道 SQL Server 无法处理整个范围（例如，我相信 SQL Server 2008 无法在 1753 年 1 月 1 日之前处理）

我怀疑 SQL Server CE 对其日期范围也有限制，并且在默认的 1/1/0000 DateTime 值上犹豫不决。

# jquery - 使用 jQuery 加载 JSON 时 IE9 的非常奇怪的行为

> ID：11649897
> 
> 赞同：2
> 
> 时间：2012-07-25T12:38:30.550
> 
> 标签：jquery, json, internet-explorer-9

我有一个 Web 应用程序，它必须在 jQuery 的帮助下加载 JSON 对象。我正在使用此代码来获取 JSON 对象：

```
$.getJSON(url, function(data) {
    ...
} 
```

像往常一样，它适用于 FF、Chrome、Safari、Opera，但不适用于 Internet Explorer（我只尝试过 IE9）。

我发现，如果我在 IE 中打开 F12 开发人员工具，显示控制台，刷新页面，它可以正常工作。我认为这很奇怪。我要求一些大学进行检查，他们能够重现这一点。打开开发人员工具时会发生什么变化？为什么它会起作用？

* * *

**编辑：**

我从 servlet 收到的 JSON 对象示例：

```
{"product":[],"signaling":[],"vendor":["HP","SUN","IBM"],"capacity":[],"backup"‌​:[],"availability":[]} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:30:45.873

我有一些`console.log()`用于调试的输出，这似乎是 Internet Explorer 的错误。在我看来，浏览器应该可以工作，即使`console.log`存在。这简直是​​可笑的微软！

在评论所有之后`console.log()`，它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T21:25:05.453

如果您有任何对 console.log() 的调用，请将它们删除。

我对 IE 有完全相同的问题。花了几个小时直到最终删除任何 console.log() 代码并且它立即工作。最令人沮丧。

# reflection - 引用、物化与反思的关系

> ID：11649898
> 
> 赞同：5
> 
> 时间：2012-07-25T12:38:36.703
> 
> 标签：reflection, lisp, reification

我最近对引用、具体化和反思感到困惑。有人可以对他们的关系和差异（如果有的话）提供一个很好的解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T04:05:46.630

# 报价

这可能是最简单的一个。考虑在 REPL 中键入以下内容时会发生什么：

```
(+ a 1) 
```

REPL 代表 Read Eval Print Loop，所以首先它读入这个。这是一个列表，所以读完后我们有一个包含 3 个元素的列表： <the symbol "+"> <the symbol "a"> <the number 1 >

下一步是评估。在 Common Lisp 中评估列表涉及查找绑定到列表中第一项的函数（或宏）。由于 + 绑定到函数而不是宏，因此它会评估列表中的每个后续元素。数字对自己进行评估，“a”将评估它所绑定的任何内容。现在参数已被评估，函数“+”被调用并带有评估结果。

然后我们打印结果并循环回到读取步骤

所以这很好，但是如果我们想要一些东西，在评估时，最终会成为一个包含 <the symbol "+"> <the symbol "a"> <the number 1> 的 3 个元素的列表呢？解决这个问题的方法是引用。Lisp 通常有一种称为“引用”的特殊形式，它接受一个参数，结果就是那个参数，未计算。所以

```
(quote (+ a 1)) 
```

将评估该列表。作为一些语法糖，' 被视为与 (quote ) 相同，所以我们可以只写 '(+ a 1)。

# 物化

具体化是一个通用术语，大致意思是“使抽象概念具体化”。具体到编程，当某个东西被具体化时，它大致意味着你可以把它当作数据（或“一等对象”）。lisp 中的一个示例是函数，lambda 表达式使您能够创建一个具体的、一流的对象，该对象代表函数调用的抽象概念。另一个例子是 CLOS 类，它本身就是一个 CLOS 对象，代表一个类的抽象概念。

# 反射

在某种程度上，反思是物化的对立面。给定一些具体的东西，你想要一些关于它的抽象表示的信息。考虑一个 Common Lisp 包对象，它是包概念的具体化，它只是从符号名称到符号的映射。您可以使用 do-symbols 遍历包中的所有符号，从而在运行时获取该信息。

另外，还记得我说过 lambda 是函数的具体化吗？好吧，“function-lambda-expression”是对函数的反映。

元对象协议（MOP）是用类和对象做各种事情的半标准方式。除其他外，它允许对类和对象进行反射。

# mysql - Mysql查询字符串替换

> ID：11649903
> 
> 赞同：0
> 
> 时间：2012-07-25T12:38:57.793
> 
> 标签：mysql

> **可能重复：**
> [如何在 MySQL 中进行正则表达式替换？](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

我尝试替换以 '?campaign=qwertysomerandomtext"' 开头的字符串并将其替换为 '"'。

我尝试为此使用通配符，例如 '?campaign=%_" 并替换为 '"'。但发现通配符不适用于替换。

有没有其他方法可以解决这个问题？我考虑过使用子字符串 from to 之类的东西。但到目前为止没有发现任何对我有用的东西。

希望有人可以帮助我解决这个问题。

问候 bnz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:55:07.960

> 我尝试替换以 开头的字符串 `'?campaign=qwertysomerandomtext"'`并将其替换为`'"'`.

从字面上理解这个请求，它变成了

```
UPDATE t SET s = '"' WHERE s = '?campaign=qwertysomerandomtext"' 
```

我已经从您的问题中复制了双引号，位于搜索字符串的末尾和替换字符串内。如果这是一个错误，请调整。

如果随机文本是占位符并且应该是通配符，如第二段所述，则使用

```
UPDATE t SET s = '"' WHERE s = '?campaign=%_"' 
```

如果您要替换的文本位于其他字符串的末尾，而不是您要求的开头，那么您可以这样做

```
UPDATE t SET s = LEFT(s, LOCATE('?campaign=', s)) WHERE s = '?campaign=%_"' 
```

这确定了活动内容的位置，并删除了该位置以及之后的所有内容。

不需要正则表达式。一般来说，你可以通过组合`LOCATE`、`LEFT`、`RIGHT`和`SUBSTR`来实现很多目标`CONCAT`。

# regex - 在分号末尾打印文本 Sed/awk

> ID：11649906
> 
> 赞同：1
> 
> 时间：2012-07-25T12:39:04.597
> 
> 标签：regex, sed, awk

我在一个看起来像的文件中有这个字符串，`aaaaa;bbbbbbb;ccccc\n`这个`aaaaa;bbbbbb\n`想法只是显示最后一个分号和换行符之间的文本。输出将是

```
ccccc
bbbbb 
```

等等

以为我可以做到`sed -e [:]$ | awk -F '\n' {print $1}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:46:32.773

有很多方法可以解决这个任务：

```
sed 's/.*;//'
awk -F';' '{print $NF}'
rev | cut -d';' -f 1 | rev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:41:31.877

只需删除最后一个分号之前的所有内容：

```
sed 's/.*;//' 
```

# c - 通过串口读取和写入二进制数据

> ID：11649907
> 
> 赞同：0
> 
> 时间：2012-07-25T12:39:04.347
> 
> 标签：c, linux, file, binary, serial-port

所以我四处寻找，并不能完全找到我需要的东西。我需要通过串行端口读取和写入二进制数据的帮助，如果您有任何建议，我将不胜感激。请注意，当我处于该项目的不同阶段时，我曾问过一个与此类似的问题。

以下是程序。第一个程序打开一个文件“test.jpg”，以二进制模式读取它并将结果存储在缓冲区中。然后它关闭文件，并应该通过串行端口发送该文件。

第二个程序创建一个名为“testout.jpg”的文件，并且应该读取从前一个程序发送的数据。

我有一种预感，我的代码中的问题在于第二个程序。也许我也需要为此使用 fread ？我试过了，但我不知道如何为串口实现它，因为我对编程比较陌生。

非常感谢您的时间。

串行写入：

```
 #include <stdio.h>   /* Standard input/output definitions */
    #include <string.h>  /* String function definitions */
    #include <unistd.h>  /* UNIX standard function definitions */
    #include <fcntl.h>   /* File control definitions */
    #include <errno.h>   /* Error number definitions */
    #include <termios.h> /* POSIX terminal control definitions */
    #include <stdlib.h>

    int main()
        {
                //writing
                int writeport = open_port("/dev/ttyUSB0");

                //open file

                FILE *file;
                char *buffer;
                int fileLen;

                file = fopen("test.jpg", "rb");

                //get file size

                fseek(file, 0, SEEK_END);
                fileLen = ftell(file);
                fseek(file, 0, SEEK_SET);

                buffer = (char *)malloc(fileLen + 1);

                //read file contents

                fread(buffer, fileLen, 1, file);
                fclose(file);

                int n = write(writeport, buffer, fileLen + 1);
                if (n < 0)
                        fputs("write() of bytes failed!\n", stderr);

                //closing ports
                close(writeport);
        }

        int open_port(char str[])
    {
        int fd = open(str, O_RDWR | O_NOCTTY | O_NONBLOCK); // ?? NDELAY or NONBLOCK?

      if (fd == -1)
      {
                        perror("open_port: Unable to open /dev/ttyS0 - ");
      }
      else
                        fcntl(fd, F_SETFL, 0);

          struct termios options;
          tcgetattr(fd, &options); //this gets the current options set for the port

          // setting the options

          cfsetispeed(&options, B9600); //input baudrate
          cfsetospeed(&options, B9600); // output baudrate
          options.c_cflag |= (CLOCAL | CREAD); // ?? enable receicer and set local mode
          //options.c_cflag &= ~CSIZE; /* mask the character size bits */
          options.c_cflag |= CS8;    /* select 8 data bits */
          options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // choosing raw input
          options.c_iflag &= ~INPCK; // disable parity check
          options.c_iflag &= ~(IXON | IXOFF | IXANY); // disable software flow control
          options.c_oflag |= OPOST; // ?? choosing processed output
          options.c_cc[VMIN] = 0; // Wait until x bytes read (blocks!)
          options.c_cc[VTIME] = 0; // Wait x * 0.1s for input (unblocks!)

          // settings for no parity bit
          options.c_cflag &= ~PARENB;
          options.c_cflag &= ~CSTOPB;
          options.c_cflag &= ~CSIZE;
          options.c_cflag |= CS8;

          tcsetattr(fd, TCSANOW, &options); //set the new options ... TCSANOW specifies all option changes to occur immediately

      return (fd);
    } 
```

串行读取：

```
 #include <stdio.h>   /* Standard input/output definitions */
    #include <string.h>  /* String function definitions */
    #include <unistd.h>  /* UNIX standard function definitions */
    #include <fcntl.h>   /* File control definitions */
    #include <errno.h>   /* Error number definitions */
    #include <termios.h> /* POSIX terminal control definitions */

    int main()
        {
                //reading      
                int readport = open_port("/dev/ttyUSB1");

        //open resultant file

        FILE *file;
        //system("rm testout.jpg");
        file = fopen("testout.jpg", "wb");

                //trying to read one character at a time
                char buff;
                int n = 1;

           while (n > 0)
           {
                n = read(readport, &buff, 1);
                //printf("%c", buff, buff);

                **//I tried these three methods, with little success**

                //fprintf(file, "%c", buff);
                //fwrite(&buff, 1, 1, file);
                //write(file, &buff, 1);
           }

                //closing ports
                close(readport);
                fclose(file);
        }

        int open_port(char str[])
    {
        int fd = open(str, O_RDWR | O_NOCTTY | O_NONBLOCK); // ?? NDELAY or NONBLOCK?

      if (fd == -1)
      {
                        perror("open_port: Unable to open /dev/ttyS0 - ");
      }
      else
                        fcntl(fd, F_SETFL, 0);

          struct termios options;
          tcgetattr(fd, &options); //this gets the current options set for the port

          // setting the options

          cfsetispeed(&options, B9600); //input baudrate
          cfsetospeed(&options, B9600); // output baudrate
          options.c_cflag |= (CLOCAL | CREAD); // ?? enable receicer and set local mode
          //options.c_cflag &= ~CSIZE; /* mask the character size bits */
          options.c_cflag |= CS8;    /* select 8 data bits */
          options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // choosing raw input
          options.c_iflag &= ~INPCK; // disable parity check
          options.c_iflag &= ~(IXON | IXOFF | IXANY); // disable software flow control
          options.c_oflag |= OPOST; // ?? choosing processed output
          options.c_cc[VMIN] = 0; // Wait until x bytes read (blocks!)
          options.c_cc[VTIME] = 0; // Wait x * 0.1s for input (unblocks!)

          // settings for no parity bit
          options.c_cflag &= ~PARENB;
          options.c_cflag &= ~CSTOPB;
          options.c_cflag &= ~CSIZE;
          options.c_cflag |= CS8;

          tcsetattr(fd, TCSANOW, &options); //set the new options ... TCSANOW specifies all option changes to occur immediately

      return (fd);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:17:22.597

```
file = fopen( "zname.jpg", "wb" );
while (1) { 
  n = read(readport, &buff, 1);
  if (n == -1) switch(errno) {
         case EAGAIN: /* sleep() */ 
            continue;
          ...
         default: goto quit;
         }
  if (n ==0) break;
  fputc(buff, file);
  }
quit:
   fclose (file);
... 
```

甚至比 sleep() 和循环更好的是使用 select/poll。（您仍然需要检查 EAGAIN）

# html - 主页在其他 PC 上显示不同的文本和模块

> ID：11649909
> 
> 赞同：-5
> 
> 时间：2012-07-25T12:39:20.633
> 
> 标签：html, css, web

当我编辑主页并单击保存时，一切看起来都很好，但是然后我用另一台计算机检查主页并且文本，模块显示错误或同时文本不会出现或某些模块不会显示.....我一直在谷歌搜索但没有见过有完全相同问题的人....我想主要问题是因为该网站已过时....在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:42:00.813

您是否在所有主要浏览器中打开过您的网站：Opera、Chrome、IE、Firefix、Safari 等。

它在一个或多个浏览器版本中的加载方式可能存在问题。这需要在您的 CSS 中解决

# rally - 将任务导入 Rally

> ID：11649919
> 
> 赞同：1
> 
> 时间：2012-07-25T12:39:45.610
> 
> 标签：rally

有没有办法将任务导入 Rally？我知道如何从 csv 文件导入用户故事和缺陷，并且了解如何导出任务，但我在任何地方都找不到关于将任务 IN 导入 Rally 的任何信息。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:57:03.073

我能够使用 Rally Excel 插件导入任务。该字段必须与架构相同，并且有一些必填字段。请注意，工作产品字段是如何知道在哪个用户故事下导入任务的（这有点奇怪——不确定他们不只是使用用户故事#。）。工作产品相当于用户故事名称

[https://prod.help.rallydev.com/rally-add-excel](https://prod.help.rallydev.com/rally-add-excel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:23:14.917

不幸的是，您无法通过 Rally UI 执行此操作。这是一个非常流行的功能请求。我建议通过在 Rally Ideas 上投票支持这个现有的想法来注册您对此功能的支持：

[http://ideas.rallydev.com/ideas/D336](http://ideas.rallydev.com/ideas/D336)

或者，一些客户选择使用 Rally 的开发人员工具包/API 编写 Web 服务脚本：

[http://developer.rallydev.com/help/rest-apis](http://developer.rallydev.com/help/rest-apis)

为了方便这个功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T16:20:24.630

是的，有一种方法可以在没有 Excel 加载项的情况下执行此操作。

导入任务的步骤：

1.  在 Rally 中，单击标题上的“跟踪”，然后从下拉列表中单击“任务”

2.  然后单击右侧的“操作”，然后从下拉列表中单击“导入任务...”

3.  浏览到文件并单击导入

请记住不要在逗号分隔值 (.csv) 文件中放置任何逗号。

# iphone - 如何获得滚动视图的可滚动标题列表？

> ID：11649924
> 
> 赞同：1
> 
> 时间：2012-07-25T12:40:03.427
> 
> 标签：iphone, ios

我正在寻找与最新版本的 iPhone 版 Groupon 应用程序完全相同的功能。屏幕上似乎有两个单独的滚动视图是有原因的。一个是导航栏的大小，另一个填满屏幕的其余部分。顶部滚动视图具有滚动视图中不同页面的标题列表，当您单击标题时，它会居中并且主滚动视图中的相应页面会显示在屏幕上。您还可以滑过标题，它会像您一样滑过页面。我无法理解的是两个滚动视图以不同的速率滚动。我一直试图解决这个问题大约两天，但我还没有真正得到任何地方。如果您有任何有关如何执行此操作的信息，我将非常感谢您的帮助！

# crystal-reports - 如何在水晶报表中按两个字段分组

> ID：11649930
> 
> 赞同：1
> 
> 时间：2012-07-25T12:40:23.690
> 
> 标签：crystal-reports, crystal-reports-2008, crosstab, crystal-reports-2010

目前我只能按一个字段而不是交叉表中的两个字段进行分组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-17T08:56:50.997

您应该创建一个连接这两个字段的文本的公式字段，然后将该公式用作您分组的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:50:43.700

对于报告，您只需选择`Insert > Group`并添加第二组。对于交叉表，只需将它们添加到行部分。

如果您想像图片中那样拥有两个物理上独立的状态（“临时”和“永久”），您将需要两个物理上独立的交叉表（其中第二个需要在子报表中）。

拥有一个交叉表并将状态添加到行部分会更容易。

# facebook - 通过 facebook api 在 facebook 提要中发布 swf

> ID：11649932
> 
> 赞同：3
> 
> 时间：2012-07-25T12:40:28.823
> 
> 标签：facebook, facebook-graph-api, post, feed

我正在使用下面的数组和

```
$feeddata = array(
                    'type'=>'flash',
                    'method'=>'stream.publish',
                    'display'=>'iframe',
          'link'=> 'https://developers.facebook.com/docs/reference/dialogs/',
          'source'=>'http://www.hackerdude.com/channels-test/swfscout_VideoSample.swf',
         'picture'=> 'http://fbrell.com/f8.jpg',
          'name'=> 'Facebook Dialogs',
          'caption'=> 'Reference Documentation',
          'description'=> 'Using Dialogs to interact with users.'); 
```

并将其传递给 facebook->api($userid.'/feed', 'POST', $feeddata ); 但是在提要中，我只能看到图像，当我单击图像时，它会将我带到链接，我如何在提要中看到 swf（理想情况下，单击图片时它应该切换到 swf）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T14:07:34.333

`type`应该是“视频”而不是“闪光灯” 。这是一个在我的测试中生成可播放视频的参数数组：

```
array(
    'type'=>'video',
    'source'=>'http://www.hackerdude.com/channels-test/swfscout_VideoSample.swf',
    'picture'=> 'http://fbrell.com/f8.jpg',
    'name'=> 'Facebook Dialogs',
    'caption'=> 'Reference Documentation',
    'description'=> 'Using Dialogs to interact with users.',
); 
```

**请注意**，没有`link`属性，那是因为在我看来，facebook API 目前有一个错误，如果您提供链接，那么它将不会嵌入您的视频。

JS SDK确实接受链接并生成可播放的视频强化了错误理论，如果可行，您可以迁移到此方法进行发布，参数如下：

```
FB.ui({
     method:'feed',
     type: 'video',
     name: 'Facebook Dialogs',
     link: 'https://developers.facebook.com/docs/reference/dialogs/',
     picture: 'http://fbrell.com/f8.jpg',
     caption: 'Reference Documentation',
     source: 'http://www.hackerdude.com/channels-test/swfscout_VideoSample.swf',
     description: 'Using Dialogs to interact with users.'
}); 
```

## 解决方法

如果您发布具有适当的用于视频嵌入的 opengraph 元标记的链接，嵌入似乎工作正常，这是一个示例：

**要分享的链接**（youtube 为您带来的视频）

```
<html>
<head>
    <title>Fly, you fools!</title>
    <meta property="og:title" content="Fly, you fools!" />
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Content for Description" />
    <meta property="og:image" content="http://i2.ytimg.com/vi/meOCdyS7ORE/mqdefault.jpg" />
    <meta property="og:site_name" content="Content for caption"/>
    <meta property="og:video" content="http://www.youtube.com/v/meOCdyS7ORE?version=3&autohide=1">
    <meta property="og:video:type" content="application/x-shockwave-flash">
    <meta property="og:video:width" content="640">
    <meta property="og:video:height" content="360">
</head>
<body>
<script>
    window.location = 'http://disney.com'; // redirecting users who's clicking on the link, wont affect crawlers since its in js.
</script>
</body>
</html> 
```

**php sdk 调用分享**

```
$this->facebook->api('/me/feed', 'post', array(
    'type' => 'link',
    'link' => 'http://.../', // put the html file's location here
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T08:05:35.183

再写一个遇见标签： `<meta property="og:video:secure_url" content="https://...game url.">` “

尝试将“https://”游戏网址，即带有ssl的游戏swf url，因为fb只需要ssl url来播放视频或游戏的swf文件。

希望这会有用。

# mysql - mysql Like ambiguios 结果

> ID：11649934
> 
> 赞同：0
> 
> 时间：2012-07-25T12:40:30.603
> 
> 标签：mysql

我有两张桌子a和b。

表 a 有一个名为 gr 的字段，该字段可以有多个包含字符串的值。

表 b 将其单独保存在字段 lg 中。

如何运行以下查询来检查 b.lg 是否在 a.gr 中？

现在 b.lg 有值 me,me01,me02 并且 a.gr 必须检查 agist me02。

但是这里的错误是这三个与此匹配

```
SELECT lg 
FROM a, b 
WHERE a.id = 22 AND  
      a.gr LIKE CONCAT('%', b.lg, '%'); 
```

a.gr 示例值

1.  'm301，你，好吧'

2.  '我，你，我2'

3.  '我'

b.lg 值

1.'m301'

2.'你'

3.“好”

4.'我2'

5.“我”

6.'我1'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:55:20.260

您可以使用[`LOCATE`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_locate)或`FIND_IN_SET`功能。LOCATE 将找到部分匹配项；例如，它将找到 in 的匹配`me`项`me1,me2`。如果这不是您想要的，也许您正在寻找`FIND_IN_SET`.

```
SELECT lg 
FROM a, b 
WHERE a.id = 22 AND  
      LOCATE(b.lg, a.gr) > 0; 
```

复制您发布的数据，这是 SELECT 的输出：

```
mysql> create temporary table a (gr varchar(100));
Query OK, 0 rows affected (0.36 sec)

mysql> create temporary table b (lg varchar(100));
Query OK, 0 rows affected (0.08 sec)

mysql> insert into a values ('m301,you,weall'),('me,you,me2'),('me');
Query OK, 3 rows affected (0.11 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> insert into b values ('m301'),('you'),('weall'),('me2'),('me'),('me1');
Query OK, 6 rows affected (0.06 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> SELECT lg, gr  FROM a, b WHERE locate(lg,gr) > 0;
+-------+----------------+
| lg    | gr             |
+-------+----------------+
| m301  | m301,you,weall |
| you   | m301,you,weall |
| you   | me,you,me2     |
| weall | m301,you,weall |
| me2   | me,you,me2     |
| me    | me,you,me2     |
| me    | me             |
+-------+----------------+
7 rows in set (0.02 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:44:53.973

我建议使用该[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)函数来连接两个表。

尝试这样的事情：

```
select b.lg
from a
inner join b on find_in_set(b.lg,a.gr) > 0
where a.id = 22; 
```

# selenium - 断言 ElementPresent 和验证 ElementPresent 有什么区别

> ID：11649937
> 
> 赞同：-3
> 
> 时间：2012-07-25T12:40:36.873
> 
> 标签：selenium

selenium 之间有什么不同 - 断言/验证 ElementPresent。如何使用 selenium IDE 执行不同的浏览器 selenium IDE 中用于 ajax 的命令是什么

感谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:49:30.557

“所有 Selenium 断言都可以在 3 种模式下使用：“assert”、“verify”和“waitFor”。例如，您可以使用“assertText”、“verifyText”和“waitForText”。当“assert”失败时，测试被中止。当“验证”失败时，测试将继续执行，记录失败。这允许单个“断言”确保应用程序在正确的页面上，然后是一堆“验证”断言来测试表单字段值、标签等" [http://release.seleniumhq.org/selenium-core/0.8.0/reference.html](http://release.seleniumhq.org/selenium-core/0.8.0/reference.html)

此外，在此站点上，[在 Selenium 中断言与验证以及在 Selenium 中](https://stackoverflow.com/questions/5743848/assert-vs-verify-in-selenium)断言[和验证](https://stackoverflow.com/questions/8978011/assert-and-verify-in-selenium)

这需要在 Google 上搜索不到五分钟。（我输入了`verify element present`，谷歌自动完成`in selenium`，这是页面上的第一个链接。）这两个现场链接是作为一个侧面的想法完成的，花费的时间更少。我建议您返回并更彻底地搜索问题其他两个部分的答案，因为我怀疑它们会很容易找到 - 而且您和我们的时间都会减少。

# sql-server-2008-r2 - 用于识别整个服务器上每个数据库的所有碎片索引的脚本？

> ID：11649943
> 
> 赞同：0
> 
> 时间：2012-07-25T12:40:51.367
> 
> 标签：sql-server-2008-r2

我是数据库新手，正在寻找一种方法来查找服务器上的所有碎片索引，而不必分别浏览每个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:51:40.073

一种方法是在循环中构建命令：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += '
UNION ALL 
SELECT db = ''' + name + ''', * 
FROM sys.dm_db_index_physical_stats(' + RTRIM(database_id)
  + ', NULL, NULL, NULL, ''SAMPLED'') -- WHERE ...'
FROM sys.databases WHERE database_id > 4;

SET @sql = STUFF(@sql,1,14,'');

EXEC sp_executesql @sql; 
```

但是你对输出做了什么？有更好的解决方案可以为您自动执行此操作。例如，[Ola Hallengren 的免费维护解决方案](http://ola.hallengren.com/)、[Michelle Ufford (SQLFool) 的免费碎片整理脚本](http://sqlfool.com/2011/06/index-defrag-script-v4-1/)，以及我们新的[SQL Sentry Fragmentation Manager](http://sqlsentry.net/fragmentation-manager/sql-server-index-analysis-and-defrag.asp)。

*免责声明：我为 SQL Sentry 工作。*

# redirect - 用于将 ip 重定向到主机名的 Apache httpd.conf

> ID：11649944
> 
> 赞同：19
> 
> 时间：2012-07-25T12:40:54.797
> 
> 标签：redirect, virtualhost, apache

我为我的机器配置了外部 IP 和主机名。

在应用程序内部，我只使用域名来访问 API。因此，当我尝试通过 IP 地址访问我的 API 时，它会显示 302 Moved 临时错误。因此，对于使用 IP 地址访问服务器的请求（对于主页），它应该重定向到主机名。

也就是说，当用户点击[https://XX.XX.XX.XX/main](https://XX.XX.XX.XX/main)时，它应该被重定向到[https://ayz-abc.mysite.com/main](https://ayz-abc.mysite.com/main)

为此，我尝试在 apache 的 httpd.conf 中使用重定向。

```
<VirtualHost XX.XX.XX.XX>

DocumentRoot "/var/www/html"
#ServerName ayz-abc.mysite.com/

 # Other directives here
 RewriteEngine On
 RewriteRule /.* https://ayz-abc.mysite.com/ [R]

</VirtualHost> 
```

我也尝试过以下

```
<VirtualHost *.portnum>
DocumentRoot "/var/www/html"
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteRule  https://XX.XX.XX.XX/main https://ayz-abc.mysite.com/main [R=301,L]
</VirtualHost> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T14:14:36.187

好的。您缺少重写条件

```
<VirtualHost XX.XX.XX.XX>

DocumentRoot "/var/www/html"
#ServerName ayz-abc.mysite.com/

 # Other directives here
 RewriteEngine On
 RewriteCond %{HTTP_HOST} !^ayz-abc.mysite.com$
 RewriteRule /.* https://ayz-abc.mysite.com/ [R]

</VirtualHost> 
```

如果您不包含此条件，即使使用主机名也会重定向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:04:08.033

这对我有用。在apache的httpd.conf中添加配置

CASE-1：当用户点击[http://XX.XX.XX.XX/main](http://XX.XX.XX.XX/main)或[http://ayz-abc.mysite.com/main](http://ayz-abc.mysite.com/main)它应该被重定向到[https://ayz-abc.mysite.com /主要的](https://ayz-abc.mysite.com/main)

配置：

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80
<VirtualHost *:80>
ServerName XX.XX.XX.XX
Redirect /main https://ayz-abc.mysite.com/main
</VirtualHost> 
```

案例 2：当用户点击[https://XX.XX.XX.XX/main](https://XX.XX.XX.XX/main)时，它应该被重定向到[https://ayz-abc.mysite.com/main](https://ayz-abc.mysite.com/main)

配置：

```
NameVirtualHost *:443
<VirtualHost *:443>
DocumentRoot "/var/www/html"
#Server Name 
ServerName XX.XX.XX.XX
SSLEngine on
SSLOptions +StrictRequire
# Redirect to the specified URL 
Redirect /main https://ayz-abc.mysite.com/main
<Directory />
SSLRequireSSL
</Directory>
....
....
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T12:52:30.040

尝试这个：

```
RewriteRule $ https://ayz-abc.mysite.com/ [L,R] 
```

您还可以查看重写日志，[请参见此处](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T07:45:28.153

如果您不使用 API，而只是希望浏览器和爬虫访问 URL 而不是 IP 地址，那么您可以使用 RedirectPermanent。

```
<VirtualHost XX.XX.XX.XX>

    RedirectPermanent / http://ayz-abc.mysite.com/

</VirtualHost>

<VirtualHost XX.XX.XX.XX>

    DocumentRoot "/var/www/html"
    ServerName ayz-abc.mysite.com/

</VirtualHost> 
```

它具有响应 301 HTTP 状态的优势，这表明“请使用您将来重定向到的 url”，这有助于搜索引擎。如果您将站点移至新域，则应使用相同的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-22T10:35:09.897

这会将所有对 IP 的请求重定向到您域上的类似请求

```
<IfModule mod_rewrite.c>

RewriteEngine on

RewriteCond %{HTTP_HOST} ^12\.34\.56\.78$

RewriteRule ^/(.*)$  https://ayz-abc.mysite.com/$1 [L,R=301]

</IfModule> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-19T13:59:21.023

如果您使用的是**https**域，请添加以下内容：

```
# BEGIN HTTPS Redirection Plugin
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTP_HOST} ^XX\.XX\.XX\.XX$
RewriteRule ^(.*)$ https://your-domain-name.com/$1 [L,R=301]
</IfModule>
# END HTTPS Redirection Plugin 
```

我们在网站上使用 https 重定向插件。上面的代码块是由插件生成的，我们只在代码块中添加了两行。下面两行负责将 IP 设置为域重定向：

```
RewriteCond %{HTTP_HOST} ^XX\.XX\.XX\.XX$
RewriteRule ^(.*)$ https://your-domain-name.com/$1 [L,R=301] 
```

这里**^XX.XX.XX.XX$**是您的 IP 地址，将其替换为：**^12.34.56.78$**为您的服务器 IP。

谢谢

# ibm-midrange - 是否可以使用外部指示器来激活显示文件中的显示属性？

> ID：11649945
> 
> 赞同：3
> 
> 时间：2012-07-25T12:40:54.657
> 
> 标签：ibm-midrange, indicator

我目前正在修改现有的 RPG 程序。目的是设置一个指标，以便该指标将激活显示文件中的显示属性 ND 以隐藏字段。问题是所有的通用指标IN01~IN99都用完了，我不能在不干扰现有程序流程的情况下重用它们。是否可以使用外部指示器 U1~U8 代替？如果不可能，还有其他选择吗？还是我只是搞砸了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:28:21.007

考虑使用程序来系统字段而不是指标。 [http://wiki.midrange.com/index.php/Program_To_System_Fields](http://wiki.midrange.com/index.php/Program_To_System_Fields)

另一种可能性是通过 DDS 关键字 INDARA [http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakc%2Frzakcmstdfindar.htm将所有显示文件指示器外部化](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakc%2Frzakcmstdfindar.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:35:00.477

检查每个指标 01-99 的使用情况，以确定您是否可以释放它们以在您的显示文件中使用。

如果它们中的任何一个仅用于控制程序流程，而不直接涉及显示文件、打印文件、I-specs 或 O-specs，那么您可以将其使用替换为指标类型变量。将内部数据类型为 N（D-spec 的第 40 位）的变量声明为字符指示符格式字段。使用此变量代替仅用于程序流控制的指示器。

如果没有这样的指标，那么您可能应该使用 Buck 推荐的方法之一。

一种旧式替代方案，您可以将整个指示器阵列 *IN 保存到一个保持区域，暂时重新使用一些 I/O 指示器，然后将保持区域放回指示器阵列。您可能有多个 99 指标结构，您可以在适当的时间移动到 *IN 或从 *IN 加载。对于每种记录格式，您可以有一个这样的结构，您可以在该记录格式的 I/O 之前移动到 *IN，并在 I/O 之后加载回来。这为您的程序中提供了几乎无限数量的指标，尽管每种显示格式仍限制为 99 个。

# python - Twitter 的 Snowflake UUID 生成器是否有 Python 实现？

> ID：11649947
> 
> 赞同：5
> 
> 时间：2012-07-25T12:40:57.717
> 
> 标签：python, uuid

我需要一个顺序 UUID 生成器，例如 Twitter 的 Snowflake - [https://github.com/twitter/snowflake/](https://github.com/twitter/snowflake/)。

但是 Snowflake 是在 Scala 中实现的，我在 Python 世界中找到了一个类似的项目，而不是 Scala。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:12:07.257

天哪，我发现了这个：[https ://github.com/erans/pysnowflake](https://github.com/erans/pysnowflake)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:57:58.847

[你可以在Python uuid 模块](http://docs.python.org/library/uuid.html)中找到你需要的东西

# android - 如何知道 ICS 中启用了“不保留活动”？

> ID：11649949
> 
> 赞同：14
> 
> 时间：2012-07-25T12:40:57.667
> 
> 标签：android, android-4.0-ice-cream-sandwich

如何在设置中通过代码在 ics 中启用“不保留活动”选项。如果已启用，如何阻止该活动。

注意：我在我的应用程序中使用了更多活动。由于该设置，如果我将一个活动移动到另一个活动，第一个活动将被销毁。我可以将我的数据保存在 onSaveInstanceState 上。如果不使用保存的实例状态，有什么办法可以做...

提前致谢..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-19T14:54:11.963

导入以下包

```
import android.provider.Settings; 
```

然后您可以使用以下代码检查该选项是否启用：

```
Settings.System.getInt(getContentResolver(),Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

你可以用这个来改变它：

```
Settings.System.putInt(getContentResolver(),Settings.System.ALWAYS_FINISH_ACTIVITIES,  0); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-15T09:24:34.740

```
 Settings.System.ALWAYS_FINISH_ACTIVITIES 
```

现在已弃用，因此您应该使用

```
 Settings.Global.ALWAYS_FINISH_ACTIVITIES.equals("1") 
```

检查是否启用了此选项

更新（感谢 Aviv Ben Shabat 评论）：

为了处理所有 sdk 版本，我创建了一个方法：

```
 public static boolean isFinishActivitiesOptionEnabled(Context context) {
    int result;
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1) {
        result = Settings.System.getInt(context.getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0);
    } else {
        result = Settings.Global.getInt(context.getContentResolver(), Settings.Global.ALWAYS_FINISH_ACTIVITIES, 0);
    }

    return result == 1;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-25T12:57:49.487

正是出于这个原因，该标志在那里。这个想法是检查并确保您的应用程序处理其被破坏的活动。您无法覆盖它，因为在现实世界中，如果设备内存不足，即使没有该标志，它也可能发生。您需要编写代码来处理这种情况而不是覆盖它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-12T07:11:10.577

我同意@Kaediil 的观点，即在选中“不保留活动”选项时，android 应用程序必须运行良好。

出于某种原因，如果您必须检查“alwaysFinishActivities”值，您可以使用下面的代码；

```
/**
 * returns true if AlwaysFinishActivities option is enabled/checked
 */
private boolean isAlwaysFinishActivitiesOptionEnabled() {
    int alwaysFinishActivitiesInt = 0;
    if (Build.VERSION.SDK_INT >= 17) {
        alwaysFinishActivitiesInt = Settings.System.getInt(getApplicationContext().getContentResolver(), Settings.Global.ALWAYS_FINISH_ACTIVITIES, 0);
    } else {
        alwaysFinishActivitiesInt = Settings.System.getInt(getApplicationContext().getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0);
    }

    if (alwaysFinishActivitiesInt == 1) {
        return true;
    } else {
        return false;
    }
} 
```

如果 alwaysFinishActivities 选项被选中并且您希望它被取消选中；

您可以将用户引导至“设置 - > 开发人员选项”以取消选中该值。（这比获得额外可怕的权限并以编程方式设置此值要好）

```
/**
 * shows Settings -> Developer options screen
 */
private void showDeveloperOptionsScreen(){
    Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS);
    intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    startActivity(intent);
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-10T02:33:40.257

提问者是对的，他有一个很好的问题，但仍然没有得到回答:-)

我用一个干净简单的例子测试了这个问题。The fact is, that when the option 'do not keep activities' is checked, then activities will be killed. 例如：一个 Mainactivity 调用一个 subactivity。主要活动被杀死。按下子活动会导致重新启动 Mainactivity。这可能是一个问题，当 mainactivity 正在执行诸如加载内容之类的长时间运行的事情时。

我对此的结论。“不保留活动”选项是开发人员选项，不应在正常用户条件下设置。所以开发者应该能够检测到这个设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-15T00:46:53.077

您还可以使用意图并每次都终止活动。只需在 onBackPressed() 中调用 ReturnToMain，它就会解决“不保留活动”的问题。这一直是我在海外使用外国手机时面临的问题之一。

```
public void ReturnToMain() {
    Intent view_user = new Intent(PanicAddUpdate.this, PanicAddMain.class);
    view_user.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(view_user);
    finish();
} 
```

另一种选择是@aegean 下面的解决方案。您必须将用户引导至“设置 -> 开发人员选项”以取消选中该值。这是我在对话框中使用的。确保添加finish（），以便应用程序在按下后退按钮时不会崩溃，或者在按下主页按钮后尝试重新启动应用程序。

```
public void showDeveloperOptionsScreen(){

    new AlertDialog.Builder(this)
    .setTitle("Developer Options Detected!")
    .setMessage("In order for Sender to work properly, please uncheck the \"Don't keep activities\" option.")
    .setNegativeButton(android.R.string.no, null)
    .setPositiveButton(android.R.string.yes, new OnClickListener() {

        public void onClick(DialogInterface arg0, int arg1) {
            Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            startActivity(intent);
            finish();
        }
    }).create().show();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-26T07:01:15.283

int 值 = Settings.System.getInt(getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0);

# javascript - 从 FusionTablesLayer 修改几何图形

> ID：11649952
> 
> 赞同：0
> 
> 时间：2012-07-25T12:41:07.263
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我正在使用 Google Maps JS API 和 Fusion Tables API。

我有一个包含几何数据的融合表（来自 shapefile，使用 shpescape.com）。我正在尝试使用 FusionTablesLayer 将这些数据覆盖在地图上。现在，我想根据分配给它的数值以不同的颜色渲染每个多边形，就像普通的 Fusion Tables 功能一样（在地图上可视化）。

问题是我无法在 Fusion Table 中存储数值，因为我需要经常更改它们。Fusion Table 中的几何图形具有分配给它的 ID，此外，在 Javascript 中，我有一个包含映射的数组：GeometryID => Value（假设值在 1 到 100 的范围内）。

如何根据存储在 Javascript 数组中的数据更改几何图形的颜色（即 5 种颜色，范围 0-20 -> 第一种颜色，20-40 -> 第二种颜色等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:53:02.560

来自一个 FusionTablesLayer 的数据可以在 Google Maps API v3 中设置[样式。](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)

# java - Java，获取屏幕并单击事物

> ID：11649954
> 
> 赞同：-7
> 
> 时间：2012-07-25T12:41:09.930
> 
> 标签：java, image-processing, bots

可能这个问题听起来很奇怪，所以我会解释它......

我不想了解更多关于 Java 的知识，我认为为这个游戏制作某种机器人会很有趣（[nl.forgeofempires.com](http://nl.forgeofempires.com) ）

问题是该游戏是一个 Flash 游戏....所以我要寻找特定图像然后单击该图像。

我已经用谷歌搜索过了，但我唯一能看到的是你需要从屏幕上截取屏幕截图，然后搜索图像的所有像素。

但我想让机器人运行甚至最小化（所以网站不可见）。而且它甚至可以检测到图像...

希望听到你们 TWCrap 的一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:06:06.783

1.  如果你想“学习 Java”，你应该尝试一些更可行的东西。例如，尝试实现[康威的生命游戏](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)。您可以首先在 ASCII-Art 中显示结果，或者直接在 JFrame 中显示它（例如，通过扩展 JLabel 以从掩码中绘制网格）。然后，您可以通过添加加载/保存人口、配置世界设置（甚至可能是规则）的可能性来改进您的应用程序。然后尝试支持一种常见的文件格式，以从众多在线数据库之一加载很酷的结构。:)
2.  你为什么要为那个游戏创建一个机器人？我想该网站上的商业条款清楚地表明这是不允许的。
3.  如果您真的想与 Flash 游戏进行交互，我想您应该尝试在 Java 应用程序中加载 Flash 游戏。然后你就会有更多的控制权。

总结：不要！;) 尝试寻找另一个任务来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:50:21.257

你描述的方式是不可能的。

*   当你的应用程序被最小化时，你不能截图，对吧？;)
*   搜索像素并不容易，建议分析图形及其所有可能的变化。

那么如何解决你的问题。

我通常会说：你不能。但是有一些方法：

您可以在该 flashgame 中查找 API（我认为它没有），或者您可以尝试在 java 应用程序中启动该 flash 游戏并在那里进行分析。因此，您不必截取真实的屏幕截图，一切都很好。但是，这需要一些高技能。也许你可以使用这个

[在 C++ 或 Java 应用程序中嵌入 Flash Player？](https://stackoverflow.com/questions/214411/embedding-flash-player-in-a-c-or-java-application)

# c# - C#列表框在MultiExtended模式下选择和取消选择项目

> ID：11649960
> 
> 赞同：3
> 
> 时间：2012-07-25T12:41:21.850
> 
> 标签：c#, listbox

当我单击列表框中未选择的项目时，它将被选中。客户希望如果您再次单击（因此不使用 cntrl 键）它会取消选择。

但我尝试了很多东西，但没有任何效果。那么这是可能的吗？如果可能的话，有人可以通过使用一些 C# 代码来解释我如何吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:47:55.363

使用内置选项没有简单的方法可以做到这一点。我的解决方案是在鼠标悬停在控件上时以编程方式发送虚拟 Ctrl 按键（因此用户无需按下或思考任何内容）。如果您不需要`MultiExtended`尝试使用`MultiSimple`( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.selectionmode%28v=vs.80%29.aspx) ) 的附加功能。

如果你这样做，这是丑陋的解决方案：

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

    public const byte KEYEVENTF_KEYUP = 0x02;
    public const int VK_CONTROL = 0x11;

    private void listBox1_MouseEnter(object sender, EventArgs e)
    {
        keybd_event(VK_CONTROL, (byte)0, 0, 0);
    }

    private void listBox1_MouseLeave(object sender, EventArgs e)
    {
        keybd_event(VK_CONTROL, (byte)0, KEYEVENTF_KEYUP, 0);
    } 
```

从我的回答[here](https://stackoverflow.com/a/11351431/62671)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:44:49.463

您可以在选定索引事件中添加一些内容，如果选定索引与珍贵选定的索引相同（将其存储在某处），然后将选定索引设置为 -1，则不会选择任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:48:31.693

遵守`SelectedValueChanged`事件并添加以下内容：

```
string selected = null;

private void listBox1_SelectedValueChanged(object sender, EventArgs e)
{
    ListBox lb = sender as ListBox;
    if (lb == null) { return; }
    if (lb.SelectedItem != null && lb.SelectedItem.ToString() == selected)
    {
        selected = lb.SelectedItem.ToString();
        lb.SetSelected(lb.SelectedIndex, false);
    }
    else 
    {
        selected = lb.SelectedItem == null ? null : lb.SelectedItem.ToString();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T08:18:25.230

> 当您单击列表框的空白区域时，这将取消选择所有/特定列表框项目。

```
 private void listBox1_MouseClick(object sender, MouseEventArgs e)
        {
            int totalHeight = listBox1.ItemHeight * listBox1.Items.Count;

            if(e.Y < totalHeight && e.Y >= 0)
            {
                // Item is Selected which user clicked.

                if(listBox1.SelectedIndex == 0 && listBox1.SelectedItem != null) // Check if Selected Item is NOT NULL.
                {
                    MessageBox.Show("Selected Index : " + listBox1.SelectedItem.ToString().Trim());
                }
                else
                {
                    listBox1.SelectedIndex = -1;
                    MessageBox.Show("Selected Index : No Items Found");
                }
            }
            else
            {
                // All items are Unselected.
                listBox1.SelectedIndex = -1;
                MessageBox.Show("Selected Index : " + listBox1.SelectedItem); // Do NOT use 'listBox1.SelectedItem.ToString().Trim()' here.
            }
        } 
```

> 您还可以在选择/取消选择项目时使用您想要执行的操作更改代码。

*   如果您有任何问题，请发表评论。

# c - eclipse中的静态库链接

> ID：11649961
> 
> 赞同：5
> 
> 时间：2012-07-25T12:41:25.870
> 
> 标签：c, eclipse-cdt

我一直在尝试使用静态库 Gtest ( `gtest_main.a`) 框架构建我的 C 项目。我已在 IDE 的链接器部分中包含有关库文件和相应路径的信息，但我仍然收到以下错误：

```
******** 为项目 CPP_GTEST 构建配置调试 ****
**** 内部构建器用于构建 ****
g++ -LC:/UT_automation_tools/CPP_GTEST/lib -o CPP_GTEST.exe ut_src\ut_asd.o mock_lib\sgn\sgn_asd.o asd\asd.o -lgtest_main
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: 找不到-lgtest_main
collect2: ld 返回 1 个退出状态
发生构建错误，构建已停止
消耗时间：750 ms.****  

```

我保留了链接器命令行模式，因为它是 eclipse 中存在的默认值 `${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}`

我一直在谷歌搜索来解决这个问题，我尝试了各种方法，我在谷歌搜索时遇到了但无法解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T05:36:40.183

正如您已经发现的那样，链接器参数`-lName`会导致链接器在库路径中搜索`libName.a`

有关更多信息，请参见系统上的 ld 手册页 - 我的指定：

```
 -l namespec
   --library=namespec
       Add the archive or object file specified by namespec to the list of files to link.  This option
       may be used any number of times.  If namespec is of the form :filename, ld will search the
       library path for a file called filename, otherwise it will search the library path for a file
       called libnamespec.a. 
```

# magento - Magento：使用 ajax 更新购物车项目自定义选项

> ID：11649962
> 
> 赞同：4
> 
> 时间：2012-07-25T12:41:26.047
> 
> 标签：magento

我需要使用 ajax 更新自定义选项值。我正在尝试更新它

```
$params = $this->getRequest()->getParams();
    $itemID = $params['item'];
    $item =         Mage::getSingleton('checkout/session')->getQuote()->getItemById($itemID);
    $options = $item->getOptions();

    foreach ($options as $option) {

        if(strtolower($option->getCode()) == 'info_buyRequest')
        {
            $unserialized = unserialize($option->getValue());
            $unserialized['options'][216]= 'New Value';
            $option->setValue(serialize($unserialized));

        }
    }
    $item->save(); 
```

任何人都可以帮助我了解这里出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:05:52.767

这永远不可能是真的：

```
(strtolower($option->getCode()) == 'info_buyRequest') 
```

此外，我还必须编辑特定保存的自定义选项。我的循环如下所示：

```
foreach ($options as $option) {
  switch (true) {
    case (strtolower($option->getCode()) == 'info_buyrequest') :
      $unserialized = unserialize($option->getValue());
      $unserialized['options'][216] = 'NEW VALUE';
      $option->setValue(serialize($unserialized));
      break;
    case ($option->getCode() == "option_216") :
      $option->setValue('NEW VALUE');
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:55:38.260

Pravin 让它与下面的代码行一起工作。

```
$item->setOptions($options)->save(); 
Mage::getSingleton('checkout/cart')->save(); 
```

感谢 p4pravin 的分享。

# windows - 在 Windows 7 上拒绝 StartServiceCtrlDispatcher 访问

> ID：11649967
> 
> 赞同：5
> 
> 时间：2012-07-25T12:41:38.683
> 
> 标签：windows, service, access-denied

我在 Windows 7 上的 Visual Studio 2008 中有一个 C++ 项目，我尝试在其中启动一项新服务。我正在以管理员身份运行 Visual Studio。我无法启动服务（甚至没有调用 serviceMain）。

这是我的主要功能：

```
wchar_t str[] = {'s','e','s','m'};

int _tmain(int argc, _TCHAR* argv[])
{
    SERVICE_TABLE_ENTRY dispTable[] =
    {
        {(wchar_t*)str, ServiceWork::ServiceMain}, 
        {NULL, NULL}
    };

    int i = StartServiceCtrlDispatcher(dispTable);
    int j = GetLastError();
    return 0; 
} 
```

输出是：

. . .

“SessionMonitor.exe”：已加载“C:\Windows\SysWOW64\cryptbase.dll”

“SessionMonitor.exe”：已加载“C:\Windows\SysWOW64\imm32.dll”

“SessionMonitor.exe”：已加载“C:\Windows\SysWOW64\msctf.dll”

**SessionMonitor.exe 中 0x7638b9bc 处的第一次机会异常：0x00000005：访问被拒绝。线程“Win32 线程”(0x129c) 已退出，代码为 0 (0x0)。程序“[2492] SessionMonitor.exe: Native”已退出，代码为 0 (0x0)。**

在调试时，j 是 1063 - ERROR_FAILED_SERVICE_CONTROLLER_CONNECT

有没有人遇到过这个问题？任何解决方案？

谢谢你，里龙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-03T13:10:45.000

问题在于您在 Visual Studio 中启动服务。

这是无法做到的。您只需使用 Visual Studio 编译服务，然后使用 sc 命令（或按[此处](http://www.codeproject.com/Articles/1697/Beginner-s-introductory-guide-to-writing-installin)所述以编程方式）在命令提示符下注册它。[这个](https://stackoverflow.com/questions/18557325/how-to-create-windows-service-in-c-c)问题的公认答案中描述了所有正确的方法。

如果要调试服务代码，必须直接发出 ServiceMain，例如：

```
int _tmain(int argc, _TCHAR* argv[])
{
#ifdef AS_SERVICE
    SERVICE_TABLE_ENTRY dispTable[] =
    {
        {(wchar_t*)str, ServiceWork::ServiceMain}, 
        {NULL, NULL}
    };

    int i = StartServiceCtrlDispatcher(dispTable);
    int j = GetLastError();
    return 0;
#else
    ServiceMain(argc, argv);
#endif
} 
```

`StartServiceCtrlDispatcher`失败并`GetLastError`返回时也会出现相同的问题`ERROR_FAILED_SERVICE_CONTROLLER_CONNECT (1063)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T17:51:26.497

如果您尝试从 Microsoft Visual Studio 等 IDE 或命令行启动 Windows 服务，则需要设置 ConsoleHandler 并手动调用 ServiceStart，例如

SetConsoleCtrlHandler(myConsoleHandler, TRUE); 服务启动（argc，argv，真）；

在我们的应用程序中，我们传递了一个 -debug 标志，它告诉应用程序作为控制台程序而不是 Windows 服务运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-29T08:01:06.857

[在 Windows 7 上拒绝 StartServiceCtrlDispatcher 访问](https://stackoverflow.com/questions/11649967/startservicectrldispatcher-access-denied-on-windows-7)

我相信这是 Windows 中的一个错误。根据[MSDN，StartServiceCtrlDispatcher](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686324(v=vs.85).aspx)在失败时应该返回零，但微软的某个人认为跨 API 边界抛出自定义（非 C++）异常是一个好主意。

[您可以使用AddVectoredExceptionHandler](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679274(v=vs.85).aspx)捕获并忽略这种特殊类型的异常来解决该问题：

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>

LONG WINAPI handle_exception(EXCEPTION_POINTERS* exception_data)
{
  switch (exception_data->ExceptionRecord->ExceptionCode)
  {
  case 0x00000005:  // thrown by StartServiceCtrlDispatcher for fun.
    // Ignore these specific type of exceptions and continue execution.
    // Note: There are several more interesting exceptions to catch here,
    // which are out of scope of this question.
    return EXCEPTION_CONTINUE_SEARCH;

  case 0xE06D7363:  // C++ exception code.
  default:
    // Pass all other type of exceptions to their regular exception handlers.
    return EXCEPTION_EXECUTE_HANDLER;
  }
}

auto handle = AddVectoredExceptionHandler(1, &handle_exception);
// Your code here. Now you can check for the return value of
// StartServiceCtrlDispatcher to see whether the application
// was started as a service or not without crashing.
RemoveVectoredExceptionHandler(handle); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:37:17.727

你是如何开始服务的？

即使您的用户在 Administrators 组中，在您通过 UAC 之前，程序也不会完全提升，或者它们是从已经提升的上下文中启动的。如果您尝试通过 Visual Studio 进行调试，您可能需要右键单击 Visual Studio 并以管理员身份运行它才能正常工作。

如果您希望能够从 Explorer 启动服务，您需要在清单中将 requestedExecutionLevel 设置为“level=requireAdministrator”。从命令提示符启动需要相同，除非您使用“net start yourservice”，此时需要提升命令提示符。从系统服务插件启动不需要特殊准备，并且对于 Windows 7（非 Vista）下的 MS 签名应用程序具有隐藏的提升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T20:46:50.330

这是错误的：

```
wchar_t str[] = {'s','e','s','m'}; 
```

您已经省略了终止的 NUL。利用

```
wchar_t str[] = L"sesm"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-18T10:14:45.077

完成代码后，不要调试。构建它。Build 成功后，会在 Debug 中创建 SessionMonitor.exe 文件。转到命令提示符并安装服务。sc create "sesm" binPath="你的 SessionMonitor.exe\SessionMonitor.exe 的位置"

转到运行并键入 services.msc 找到服务 sesm，运行它，检查您在 ServiceMain 中所做的工作是否有效。

# jquery - 需要从同一个列表项中添加和删除活动类

> ID：11649970
> 
> 赞同：0
> 
> 时间：2012-07-25T12:41:46.217
> 
> 标签：jquery

此代码在单击时添加活动类，如果我单击另一个列表，它工作正常，但如果我再次单击同一链接，它不会从中删除活动类。请帮帮我。

提前致谢。

```
$(document).ready(function(){
    $("li.menulink a").click(function(e){
    e.preventDefault();
    var thisList = $(this).next();
    thisList .toggle();
    $('li.menulink div').not(thisList).hide();
    $('a').removeClass('active');
    $(this).addClass('active');

    //$(this).removeClass("active");
});

}); 

<ul class="allcategorymenu">
            <li class="menuheading menulink"><h1>All Categories</h1></li>
            <li class="mobile menulink"><a href="#"><span>Mobile &amp; Accessories</span></a>
            <div class="submenu" style="display:none;">
                <ul>
                    <li><a href="1.html">All Jewelry</a></li>
                    <li><a href="2.html">Diamond Jewelry</a></li>
                    <li><a href="3.html">Silver Jewelry</a></li>
                    <li><a href="#">Pearl Jewelry</a></li>
                    <li><a href="#">Fashion Jewelry</a></li>
                    <li><a href="#">Gemstone Jewelry</a></li>
                    <li><a href="#">Spiritual Jewelry</a></li>
                </ul>
            </div>
            </li>
            <li class="mens menulink"><a href="#"><span>Men's Apparel</span></a>
            <div class="submenu" style="display:none;">
                <ul>
                    <li><a href="1.html">All Jewelry</a></li>
                    <li><a href="2.html">Diamond Jewelry</a></li>
                    <li><a href="3.html">Silver Jewelry</a></li>
                    <li><a href="#">Pearl Jewelry</a></li>
                    <li><a href="#">Fashion Jewelry</a></li>
                    <li><a href="#">Gemstone Jewelry</a></li>
                    <li><a href="#">Spiritual Jewelry</a></li>
                </ul>
            </div>
    </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:52:31.777

```
$(document).ready(function(){
    $("li.menulink a").click(function(e){
        e.preventDefault();
        var $this = $(this),
            thisList = $this.next();
        thisList.toggle();
        $('li.menulink div').not(thisList).hide();
        $('a').not($this).removeClass('active');
        $this.toggleClass('active');
    });
}); 
```

此代码将从所有`<a>`未被点击的标签中删除活动类，然后在该标签上切换活动类。您现有的代码从所有锚标记中删除了该类，然后将其添加到活动标记中，无论它是否被单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:43:43.067

```
$("li.menulink a").click(function(e) {
    e.preventDefault();
    var thisList = $(this).next();
    thisList.toggle();
    $('li.menulink div').not(thisList).hide();
    $(this).toggleClass('active ');
    $('a.active').not(this).removeClass('active ');
}); 
```

**[演示](http://jsfiddle.net/YPRq4/2/)**

# iphone - 如何检查 UITextfield 中是否包含文本？

> ID：11649971
> 
> 赞同：3
> 
> 时间：2012-07-25T12:41:53.223
> 
> 标签：iphone, xcode, ios5, uitextfield

我刚刚学习了制作转换应用程序。很好，但我想扩展它。tut 让您输入华氏温度值，然后转换为摄氏温度。很基本。所以我也想添加一个开尔文转换。但是代码只允许你插入一个华氏温度的数字。因此，在添加了 Kelvin 文本字段后，我想查看哪个文本框中有文本。所以我使用了以下代码：

```
- (IBAction)convert:(id)sender 
{
if ([fahrenheit isFirstResponder]) 
{
    float x = [[fahrenheit text] floatValue];
    float y = (x - 32.0f) * (5.0f/9.0f);  //celcius
    float z = y + 273.15f;  //kelvin
    [celcius setText:[NSString stringWithFormat:@"%3.2f" , y]];
    [kelvin setText:[NSString stringWithFormat:@"%3.2f" , z]];
    [fahrenheit resignFirstResponder];
} else if ([celcius isFirstResponder])
{
    float x = [[celcius text] floatValue];
    float y = 32.0f + ((9.0f/5.0f) * x); //farenheit
    float z = x + 273.12f; //kelvin
    [fahrenheit setText:[NSString stringWithFormat:@"%3.2f" , y]];
    [kelvin setText:[NSString stringWithFormat:@"%3.2f" , z]];
    [celcius resignFirstResponder];
}else if ([kelvin isFirstResponder])
{
    float x = [[kelvin text] floatValue];
    float y = x - 273.15f; //celcius
    float z = 32.0f + ((9.0f/5.0f) * y); //farenheit
    [celcius setText:[NSString stringWithFormat:@"%3.2f" , y]];
    [fahrenheit setText:[NSString stringWithFormat:@"%3.2f" , z]];
    [kelvin resignFirstResponder];
}
} 
```

这使我可以在任何文本字段中输入一个数字，然后进行转换。但后来我决定关闭键盘。我的代码说要resignFirstResponder。但是随后转换操作不起作用，因为现在没有第一响应者。关于如何检查哪个文本框中有文本，然后进行转换的任何线索？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T12:47:11.817

```
 if( [textField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet] != nil &&  [textField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet] != @"" )
        {

        // text field has text

// get text without white space

NSString * textWithoutWhiteSpace = [textField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet] ;

        } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T12:46:40.227

**这是用于检查 textView 是否为空：-**

```
if([textView.text isEqualToString:@""])
{
    //textView is Empty
}
else 
{
   //textView has text
} 
```

**如果你也想检查它是否有空格，首先从字符串中删除空格然后检查......像这样 -**

```
NSString *trimmedString = [tV.text stringByTrimmingCharactersInSet:
                           [NSCharacterSet whitespaceAndNewlineCharacterSet]];
if([trimmedString isEqualToString:@""])
{
       NSLog(@"textView is empty");
}
else
{
    NSLog(@"textView has some value");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-24T08:35:32.733

只需使用**`hasText`**方法。

### 例子：

```
if(_yourTextField.hasText)
{
    // Do something.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T12:49:13.520

```
if(textView.text.length > 0)
{
   //text present
}
else
{
  //no text
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T12:50:35.580

更好的解决方案是即时进行所有转换，向所有文本字段添加新操作

```
[textField addTarget:self action:@selector(textChanged:) forControlEvents:UIControlEventEditingChanged]; 
```

然后在方法 textChanged: 中执行以下操作：

```
- (void) textChanged:(UITextField *)tf {
    if (tf.text.floatValue > 0) {
        if (tf == fahrenheit) {
            //Do convertion for fahrenheit
        }
        .
        .
        .
        //etc.
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T05:08:09.240

回应美诺的回答

不要使用！= @""

这个检查指针相等与字符串相等

采用：

```
[string isEqualToString:@""]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-16T14:18:25.883

如果您想在输入期间知道它，并可能根据此信息执行操作，您应使用：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-26T14:53:55.840

在其他一些答案中存在一些问题，比如他们没有使用 isEqualToString，并且他们多余地从字符串中删除了我们只对它是否为 nil 感兴趣的潜在字符。

我没有足够的声誉发表评论，所以我将其发布为答案。

对于类似的问题，我用它来检查每个需要检查是否为空的文本字段：

```
- (BOOL) isEmpty:(UITextField*) field
{
    if (!(field.text) ||
       ([[field.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] isEqualToString: @""]))
    {
        return YES;
    }
    else
    {
        return NO;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-28T14:26:56.580

如果您需要`NSString`删除空格：

```
NSString *nonWhiteSpaceString = [textfield.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

然后您可以将长度用作布尔值：

```
BOOL textFieldHasText = nonWhiteSpaceString.length; 
```

# mysql - 插入到 mySQL 过程

> ID：11649978
> 
> 赞同：0
> 
> 时间：2012-07-25T12:42:19.947
> 
> 标签：mysql, insert, procedure

在 MySQL 中插入>

这是程序代码的一部分：

```
if ParentList is null then

        set @sql=concat('insert into ', table_name, tabSave, '(md5Id, CommentsId, Parent, Content, UserId, Title, Nick) ',
        'values(', @md5Id, ', ', CommentsId, ', null, \'', Content, '\'' ,UserId,',',Title,',',Nick, ')');
else
    set @sql=concat('insert into ', table_name, tabSave, '(md5Id, CommentsId, Parent, Content, UserId, Title, Nick) ',
        'values(', @md5Id, ', ', CommentsId, ', ', @Parent, ', \'', Content, '\ ,', UserId,', ', Title,', ', Nick, ')');
end if; 
```

这个字符符号 ' 插入错误，我不知道在哪里：

我的错误：

```
CALL AddDynamicTable3('asd65xb', 'xxx', 5, NULL, 'MojWstep', 22, 'New title', 'Ethan')  Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '22,New title,Przemo)' at line 1 
```

XXX - 表名

其他变量不显着 例如 tabSave, table_name ...

早些时候我编写了相同的程序，但没有三个变量 UserId、Title、Nick 和它的 OK，但是当我放置这些变量时，我只看到 ERROR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:47:28.703

看看这是否有效：

```
'\ ,', UserId,', 
```

从第二个查询，更改为

```
'\ ', UserId,', 
```

# wordpress - 主题与主题完全不同的博客页面？

> ID：11649983
> 
> 赞同：0
> 
> 时间：2012-07-25T12:42:28.450
> 
> 标签：wordpress

我一直在尝试在 Wordpress 上制作我的[网站。](http://www.visualdeceptions.info)我使用[Brave Zeenat](http://www.methemes.com/free-wordpress-themes/brave-zeenat/)作为我的主要主题，并使用[Grido](http://themify.me/themes/grido)作为我的博客主题。

我在一些地方阅读了许多教程，其中讨论了如何在静态页面（例如博客）上应用主题的定制风格。但是，作为博客主题，我使用的主题根本不吸引我，所以我想做一些完全不同的事情，所以我尝试了两种方法。

首先，我尝试创建一个名为 Blog 的页面，并使用[Page Theme](http://wordpress.org/extend/plugins/page-theme/)插件强制它采用我选择的主题。这立即奏效，但博客页面是空的，默认情况下不会接受某些类别的文章。

其次，我尝试完全不使用任何插件，而是使用自定义 PHP 文件，它设置了一些循环并调用了一个主题。该文件`blog.php`必须位于主主题目录中，否则它不能作为 Wordpress dash 中页面设置的模板。

所以我把它和我的主题放在一起，但是调用加载另一个主题，像这样：

```
<?php
/*
Template Name: Blog
*/

$paged = get_query_var('paged');
query_posts('cat=0&paged='.$paged);

global $more;
$more = 0;

load_template(WP_CONTENT_DIR . '/themes/grido_v1.0.1/index.php');

?> 
```

最终我只想看到第 9 个类别，但现在我将其保留为 0，它应该显示所有类别。但是当我在禁用页面主题插件的情况下运行它时，我收到了这个错误：`Fatal error: Call to undefined function themify_get() in /var/sites/v/visualdeceptions.info/public_html/wp-content/themes/grido_v1.0.1/index.php on line 10`.

现在，虽然这是一个主题化错误，但我确信如果我也尝试使用其他高级主题，我会遇到非常相似的错误，因为我只设置了一个自定义 php 文件，没有样式、页眉、页脚等。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:08:55.407

尝试在代码中添加getheader()和getfooter()

```
<?php
/*
Template Name: Blog
*/
get_header(); //HERE

$paged = get_query_var('paged');
query_posts('cat=0&paged='.$paged);

global $more;
$more = 0;

load_template(WP_CONTENT_DIR . '/themes/grido_v1.0.1/index.php');

get_footer(); //HERE

?> 
```

# android - 在 listView 中滚动时的堆大小

> ID：11649984
> 
> 赞同：0
> 
> 时间：2012-07-25T12:42:36.590
> 
> 标签：android, memory-leaks, android-listview, heap-memory, heap-dump

在列表视图中滚动列表视图堆大小不断增加，在 Galaxy S3 设备上达到 64MB，应用程序崩溃。

```
public class GAdapter extends BaseAdapter implements Filterable {

private List<G> list;
private GActivity mContext;
private Drawable attach , text;
private HttpImageManager mHttpImageManager;
private LayoutInflater mInfalotar;

public GAdapter(GActivity context , List<G> list){

    this.list = list;
    mContext = context;
    mInfalotar = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 

    mHttpImageManager = ((GApplication)context.getApplication()).getHttpImageManager();

    attach = mContext.getResources().getDrawable(R.drawable.ic_attachment);
    text   = mContext.getResources().getDrawable(R.drawable.ic_text);
}

public void addContact(VamooseGroup entry){
    list.add(entry);
    notifyDataSetChanged();
}

public void setGroupList(List<G> g){
    list.clear();
    datavalues = null;
    list.addAll(g);
    notifyDataSetChanged();
}

@Override
public int getCount(){
    return (list.size()+1);
}

@Override
public Object getItem(int index) {

    if(index != list.size())
        return list.get(index);
    else
        return null;
}

@Override
public long getItemId(int index) {
    return index;
}

@Override
public int getViewTypeCount() {
    return list.size()+1;
}

@Override
public int getItemViewType(int position) {
    return position == list.size() ? 1 : 0;
}

@Override
public View getView(int index, View convertview, ViewGroup viewGroup) {

        int type = getItemViewType(index);

        switch(type){

            case 0 :

            convertview = mInfalotar.inflate(R.layout.data_listitem , viewGroup, false);

            ImageView myimageView =  (ImageView)convertview.findViewById(R.id.myImage);
            TextView groupname    =  (TextView)convertview.findViewById(R.id.groupname);
            TextView timespam     =  (TextView)convertview.findViewById(R.id.timeInfo);
            TextView msgSender    =  (TextView)convertview.findViewById(R.id.msgowner);
            TextView draft        =  (TextView)convertview.findViewById(R.id.draft);
            ImageView watchIcon   =  (ImageView)convertview.findViewById(R.id.time);
            ImageView attachment  =  (ImageView)convertview.findViewById(R.id.attachment);

            final G g = list.get(index);
            String grouppic = g.pic();
            if(ImageValidator.validate(grouppic)){
                  Bitmap bitmap = mHttpImageManager.loadImage(new HttpImageManager.LoadRequest(Uri.parse(grouppic), myimageView));
                  if (bitmap != null && !bitmap.isRecycled()) {
                        myimageView.setImageBitmap(bitmap);
                  }
            }

            parent.setBackgroundDrawable(mContext.getResources().getDrawable(R.drawable.select));
            groupname.setText("FOO1");
            msgbox.setText("FOO2");
            groupname.setText("F003");
            msgSender.setText("F004");  
            timespam.setText("F005");
            attachment.setBackgroundDrawable(attach);
            watchIcon.setBackgroundDrawable(text);

        break;

        }

    return convertview;
} 
```

}

上面的代码是使用列表适配器。我正在使用以下库来显示图像 [android-http-image-manager](http://code.google.com/p/android-http-image-manager/)

有人能告诉我为什么位图没有被回收吗？滚动列表视图时堆不断增加，达到 64MB。请提供一个简短的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:55:09.977

ListView 很聪明，有很多方法可以回收视图以提高性能。其中之一是实现[ViewHolder-pattern](http://www.jmanzano.es/blog/?p=166)。

但这不会解决您的问题。您面临的问题是您已经覆盖了该`getViewTypeCount()`方法并返回了一个巨大的数字。`ListView`不会回收任何视图，因为对于每一行，您都有不同的类型。

您可以通过不覆盖此方法或返回不同行类型的数量来解决您的问题。这意味着.. 如果您的列表有 2 种不同的布局可用。你返回 2。

```
@Override
public int getViewTypeCount() {
    return 2;
} 
```

# android - 从 Android 到 Android 设备的 UDP 聊天

> ID：11649990
> 
> 赞同：0
> 
> 时间：2012-07-25T12:42:55.123
> 
> 标签：android, udp, chat

我是 Android 和 Java 编程的新手。我将来必须做一个更大的项目，包括一些 android 开发。所以我看了一些视频教程，现在我正在尝试做一些应用程序来训练自己。现在我想用 UDP 在两个 Android 设备（摩托罗拉 Defy 和三星 Galaxy Tab 2 7.0）之间建立一个聊天服务。

这是我的两种设备的代码：

```
 import java.io.IOException;
 import java.net.DatagramPacket;
 import java.net.DatagramSocket;
 import java.net.InetAddress;
 import java.net.SocketException;
 import java.net.UnknownHostException;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;

 public class udpserver extends Activity implements View.OnClickListener {

Button Send;
EditText IPAdresse;
EditText TEXT;
TextView RXtext,tstep,rstep;
private static final int TIMEOUT_MS = 1000;
private static final int server_port = 13011;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.udpserver);

    IPAdresse = (EditText) findViewById(R.id.etIPAdresse);
    TEXT = (EditText) findViewById(R.id.etTEXT);
    Send = (Button) findViewById(R.id.bSendaa);
    RXtext = (TextView) findViewById(R.id.tvRXtext);
    tstep = (TextView) findViewById(R.id.tvTstep);
    rstep = (TextView) findViewById(R.id.tvRstep);
    Send.setOnClickListener(this);

    String text;
    byte[] message = new byte[1500];
    DatagramSocket s;

    //while(true){
    try {
        s= new DatagramSocket(server_port);
                                                    rstep.setText("1");
        s.setBroadcast(true);
                                                    rstep.setText("2");
        s.setSoTimeout(TIMEOUT_MS);
                                                    rstep.setText("3");
        while(true){
        DatagramPacket p = new DatagramPacket(message, message.length);
                                                    rstep.setText("4");
        //InetAddress test = InetAddress.getByName("192.168.1.101");
            //                                      rstep.setText("5");
        //s.connect(test,12345);
            //                                      rstep.setText("6");
        s.receive(p);
                                                    rstep.setText("xxx");

        text = new String(message, 0, p.getLength());
        RXtext.setText(text);
        }
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        rstep.setText("fail socket create");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        rstep.setText("fail receive");
    }

    }
//}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId()){
    case R.id.bSendaa:
                                                                tstep.setText("1");
        String messageStr= TEXT.getText().toString();
                                                                tstep.setText("2");

        DatagramSocket s;
        try {
            s = new DatagramSocket();
                                                                tstep.setText("3");
            s.setBroadcast(true);
                                                                tstep.setText("4");
            s.setSoTimeout(TIMEOUT_MS);
                                                                tstep.setText("5");
            InetAddress local = InetAddress.getByName(IPAdresse.getText().toString());
                                                                tstep.setText("6");
            int msg_length=messageStr.length();
                                                                tstep.setText("7");
            byte[] message = messageStr.getBytes();
                                                                tstep.setText("8");
            DatagramPacket p = new DatagramPacket(message, msg_length,local,server_port);
                                                                tstep.setText("9");
            s.connect(local,server_port);
                                                                tstep.setText("10");
            s.send(p);
                                                                tstep.setText("sending complete");

        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            tstep.setText("sending failed");
        }

    }
} 
```

}

我的用户界面看起来像这样（带翻译）

![在此处输入图像描述](../Images/bf9b077f5813c0ac29700d1e2eb2c244.png)

我现在的问题是：我只能在活动开始时收到 1 秒（1 秒 = TIMOUT_MS）。但我想收到整个时间。我尝试使用 while(true) 循环，但应用程序总是崩溃。

提前致谢！！！（对不起我的英语，我知道它不是最好的:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:04:40.450

发生的事情是，当您执行 while(true) 时，您将陷入无限循环。这就是你的应用崩溃的原因。您需要做的是启动一个执行 s.receive(p) 的新[线程](http://en.wikipedia.org/wiki/Thread_%28computing%29)。就像是：

```
new Thread(new Runnable() {
     public void run() {

       while(true){
        DatagramPacket p = new DatagramPacket(message, message.length);
                                                    rstep.setText("4");
        //InetAddress test = InetAddress.getByName("192.168.1.101");
            //                                      rstep.setText("5");
        //s.connect(test,12345);
            //                                      rstep.setText("6");
        s.receive(p);
                                                    rstep.setText("xxx");

        text = new String(message, 0, p.getLength());
        runOnUiThread(new Runnable() {

        @Override
        public void run() {
          RXtext.setText(text);
        }
    });

                }
}).start(); 
```

# java - 试图理解 Hibernate Fetch Eager Strategy

> ID：11649994
> 
> 赞同：1
> 
> 时间：2012-07-25T12:43:05.307
> 
> 标签：java, database, hibernate, eager

如果在请求期间由休眠 (V3.5.1) 执行 SQL 语句，我目前会遇到严重的性能问题。所以我试图深入细节以了解 Eager-fetching 的细节。

基本上，问题似乎源于我们使用的匹配实体引用两个匹配的配置文件实体的问题。似乎hibernate只急切地获取带有连接的配置文件，而不是两者。另一个由选择加载。

```
[MatchingData] ---- searchingProfile--> [ProfileData] ---- searchData --> [SearchData]
                 |
                 +- potentialMatch ---> [ProfileData] ---- searchData --> [SearchData] 
```

所有关联都由 FetchMode.Join 和 @ManyToOne(@OneToOne(optional=false, fetch=FetchType.EAGER, cascade=...)

我已经设置了一个简单的示例，以测试使用 HQL 和 Criterieas 的各种方法来通过 hibernate 获取 MatchingData。不幸的是样板代码太大，无法详细发布。我可以按需提供。

测试是

```
 System.out.println("-------------------- this should be a single SQL statement ? ------------------------");
    List<MatchingData> result1 = hibernateTemplate.find(
            "from MatchingData");
    openSession.clear();

    System.out.println("-------------------- this should be a single SQL statement ? ------------------------");
    List<MatchingData> result2 = hibernateTemplate.find(
    "from MatchingData where potentialMatch.firstName!=null");
    openSession.clear();

    System.out.println("-------------------- this should be a single SQL statement ? ------------------------");
    Criteria matchingDataCriteria1 = openSession.createCriteria(MatchingData.class);
    matchingDataCriteria1.createCriteria("potentialMatch").add(Restrictions.eq("firstName", FIRSTNAME_TEST_PM));
    matchingDataCriteria1.list();
    openSession.clear();

    System.out.println("-------------------- this is a a single SQL statement ? ------------------------");
    Criteria matchingDataCriteria2 = openSession.createCriteria(MatchingData.class);
    matchingDataCriteria2.list();
    openSession.clear(); 
```

数据库中有 2 个 MatchingData 和 3 个涉及的 ProfileData，结果是

```
-------------------- this should be a single SQL statement ? ------------------------
Hibernate: select matchingda0_.id as id3_, matchingda0_.potentialMatch as potentia2_3_, matchingda0_.searchingProfile as searchin3_3_ from MatchingData matchingda0_
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
-------------------- this should be a single SQL statement ? ------------------------
Hibernate: select matchingda0_.id as id3_, matchingda0_.potentialMatch as potentia2_3_, matchingda0_.searchingProfile as searchin3_3_ from MatchingData matchingda0_ cross join ProfileData profiledat1_ where matchingda0_.potentialMatch=profiledat1_.id and (profiledat1_.firstName is not null)
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
Hibernate: select profiledat0_.id as id0_3_, profiledat0_.firstName as firstName0_3_, profiledat0_.kontaktSparkasse_BLZ as kontaktS5_0_3_, profiledat0_.lastName as lastName0_3_, profiledat0_.profileType as profileT4_0_3_, profiledat0_.searchData_id as searchData6_0_3_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_, institutsd2_.BLZ as BLZ2_1_, institutsd2_.name as name2_1_, institutsd2_.parentHub_BLZ as parentHub3_2_1_, searchdata3_.id as id1_2_, searchdata3_.fakeContent as fakeCont2_1_2_ from ProfileData profiledat0_ inner join InstitutsData institutsd1_ on profiledat0_.kontaktSparkasse_BLZ=institutsd1_.BLZ left outer join InstitutsData institutsd2_ on institutsd1_.parentHub_BLZ=institutsd2_.BLZ left outer join SearchData searchdata3_ on profiledat0_.searchData_id=searchdata3_.id where profiledat0_.id=?
-------------------- this should be a single SQL statement ? ------------------------
Hibernate: select this_.id as id3_5_, this_.potentialMatch as potentia2_3_5_, this_.searchingProfile as searchin3_3_5_, profiledat1_.id as id0_0_, profiledat1_.firstName as firstName0_0_, profiledat1_.kontaktSparkasse_BLZ as kontaktS5_0_0_, profiledat1_.lastName as lastName0_0_, profiledat1_.profileType as profileT4_0_0_, profiledat1_.searchData_id as searchData6_0_0_, institutsd4_.BLZ as BLZ2_1_, institutsd4_.name as name2_1_, institutsd4_.parentHub_BLZ as parentHub3_2_1_, institutsd5_.BLZ as BLZ2_2_, institutsd5_.name as name2_2_, institutsd5_.parentHub_BLZ as parentHub3_2_2_, searchdata6_.id as id1_3_, searchdata6_.fakeContent as fakeCont2_1_3_, profiledat7_.id as id0_4_, profiledat7_.firstName as firstName0_4_, profiledat7_.kontaktSparkasse_BLZ as kontaktS5_0_4_, profiledat7_.lastName as lastName0_4_, profiledat7_.profileType as profileT4_0_4_, profiledat7_.searchData_id as searchData6_0_4_ from MatchingData this_ inner join ProfileData profiledat1_ on this_.potentialMatch=profiledat1_.id left outer join InstitutsData institutsd4_ on profiledat1_.kontaktSparkasse_BLZ=institutsd4_.BLZ left outer join InstitutsData institutsd5_ on institutsd4_.parentHub_BLZ=institutsd5_.BLZ left outer join SearchData searchdata6_ on profiledat1_.searchData_id=searchdata6_.id inner join ProfileData profiledat7_ on this_.searchingProfile=profiledat7_.id where profiledat1_.firstName=?
Hibernate: select institutsd0_.BLZ as BLZ2_1_, institutsd0_.name as name2_1_, institutsd0_.parentHub_BLZ as parentHub3_2_1_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_ from InstitutsData institutsd0_ left outer join InstitutsData institutsd1_ on institutsd0_.parentHub_BLZ=institutsd1_.BLZ where institutsd0_.BLZ=?
Hibernate: select searchdata0_.id as id1_0_, searchdata0_.fakeContent as fakeCont2_1_0_ from SearchData searchdata0_ where searchdata0_.id=?
Hibernate: select searchdata0_.id as id1_0_, searchdata0_.fakeContent as fakeCont2_1_0_ from SearchData searchdata0_ where searchdata0_.id=?
-------------------- this should be a a single SQL statement ? ------------------------
Hibernate: select this_.id as id3_5_, this_.potentialMatch as potentia2_3_5_, this_.searchingProfile as searchin3_3_5_, profiledat2_.id as id0_0_, profiledat2_.firstName as firstName0_0_, profiledat2_.kontaktSparkasse_BLZ as kontaktS5_0_0_, profiledat2_.lastName as lastName0_0_, profiledat2_.profileType as profileT4_0_0_, profiledat2_.searchData_id as searchData6_0_0_, institutsd3_.BLZ as BLZ2_1_, institutsd3_.name as name2_1_, institutsd3_.parentHub_BLZ as parentHub3_2_1_, institutsd4_.BLZ as BLZ2_2_, institutsd4_.name as name2_2_, institutsd4_.parentHub_BLZ as parentHub3_2_2_, searchdata5_.id as id1_3_, searchdata5_.fakeContent as fakeCont2_1_3_, profiledat6_.id as id0_4_, profiledat6_.firstName as firstName0_4_, profiledat6_.kontaktSparkasse_BLZ as kontaktS5_0_4_, profiledat6_.lastName as lastName0_4_, profiledat6_.profileType as profileT4_0_4_, profiledat6_.searchData_id as searchData6_0_4_ from MatchingData this_ inner join ProfileData profiledat2_ on this_.potentialMatch=profiledat2_.id left outer join InstitutsData institutsd3_ on profiledat2_.kontaktSparkasse_BLZ=institutsd3_.BLZ left outer join InstitutsData institutsd4_ on institutsd3_.parentHub_BLZ=institutsd4_.BLZ left outer join SearchData searchdata5_ on profiledat2_.searchData_id=searchdata5_.id inner join ProfileData profiledat6_ on this_.searchingProfile=profiledat6_.id
Hibernate: select institutsd0_.BLZ as BLZ2_1_, institutsd0_.name as name2_1_, institutsd0_.parentHub_BLZ as parentHub3_2_1_, institutsd1_.BLZ as BLZ2_0_, institutsd1_.name as name2_0_, institutsd1_.parentHub_BLZ as parentHub3_2_0_ from InstitutsData institutsd0_ left outer join InstitutsData institutsd1_ on institutsd0_.parentHub_BLZ=institutsd1_.BLZ where institutsd0_.BLZ=?
Hibernate: select searchdata0_.id as id1_0_, searchdata0_.fakeContent as fakeCont2_1_0_ from SearchData searchdata0_ where searchdata0_.id=?
Hibernate: select searchdata0_.id as id1_0_, searchdata0_.fakeContent as fakeCont2_1_0_ from SearchData searchdata0_ where searchdata0_.id=? 
```

据我了解：HQL find 本身不会进行急切的提取，而是通过单独的选择加载 ProfileData （以及更多数据）。当然我可以添加一些 Eager Fetching Hints，但这在复杂的数据结构中是相当麻烦的。

Criteria Query 设法在一个语句中加载一侧（potentialMatch）和它的 SearchData。另一端（searchingProfile）也被获取，但从属实体（SearchData 和其他元素）然后通过显式选择获取。

**问题**：是否有一种优雅的方式来确保一次快速加载数据？

# ios - UILabel 中的错误

> ID：11649998
> 
> 赞同：0
> 
> 时间：2012-07-25T12:43:15.330
> 
> 标签：ios, interface, uilabel

[在遵循此](http://mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-project-setup/)（添加渐变标签部分）教程时，我正在尝试使用 FXlabel 。这是我的 viewDidLoad 方法中的一些代码：

```
self.logoLabel = [[FXLabel alloc] initWithFrame:CGRectMake(14, 11, 280, 87)];

[logoLabel setFont:[UIFont boldSystemFontOfSize:45]];

[logoLabel setTextColor:[UIColor whiteColor]];
[logoLabel setShadowColor:[UIColor blackColor]];
[logoLabel setShadowOffset:CGSizeMake(0, 2)];
[logoLabel setTextAlignment:UITextAlignmentCenter];
[logoLabel setBackgroundColor:[UIColor clearColor]];
[logoLabel setText:@"Attorney Biz"];

[logoLabel setGradientStartColor:[UIColor colorWithRed:163.0/255 green:203.0/255 blue:222.0/255 alpha:1.0]];
[logoLabel setGradientEndColor:[UIColor whiteColor]]; 
```

不幸的是，我在倒数第二行出现错误`"No visible @interface for 'UILabel' declares the selector 'setGradientStartColor'"`，并且`"No visible @interface for 'UILabel' declares the selector 'setGradientEndColor'"`

有人可以解释如何消除这些错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:23:34.950

检查头文件中的 logoLabel 声明并在实现文件中导入“FXLabel.h”。

```
@class FXLabel;
@interface SomeClass:SomeParentClass
{
    FXLabel *logoLabel;
}

@property (nonatomic, retain) FXLabel *logoLabel;

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:36:08.553

我通过改变解决了这个问题

```
@property (nonatomic, strong) IBOutlet UILabel* logoLabel; 
```

对此

```
 @property (nonatomic, strong) IBOutlet FXLabel* logoLabel; 
```

添加 FXLabel 组件后。我为这些错误挠了挠头。