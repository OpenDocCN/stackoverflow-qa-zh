# StackOverflow 问答 10806000-10806999

# c# - 尝试设置委托和处理程序以仅使用操作键动态调用

> ID：10806004
> 
> 赞同：4
> 
> 时间：2012-05-29T20:12:19.217
> 
> 标签：c#, delegates, switch-statement, handlers

我正在为这个对我来说新的 Delegates + Handlers 事情而苦苦挣扎。这对我来说似乎是正确的解决方案，但我无法将所有内容都捆绑起来。

将尽我所能解释我想要实现的目标。

首先，我使用的是.NET 4.0 Framework + Photon Server（多人游戏）（不需要有Photon经验才能回答我）

所以实际上，现在发生的是客户端（一个游戏）向我的服务器发送操作，我必须根据我收到的操作码识别并调用我的服务器上的某个函数。

这是它现在的样子：

```
switch (operationRequest.OperationCode)
        {
            case 1:
                if (operationRequest.Parameters.ContainsKey(1))
                {
                    Log.Debug("Received: " + operationRequest.Parameters[1]);

                    OperationResponse response = new OperationResponse(operationRequest.OperationCode);
                    response.Parameters = new Dictionary<byte, object> {{1, "Response Received"}};
                    SendOperationResponse(response, sendParameters);
                    Flush();
                }
                break;
        } 
```

这对我来说实际上很好。但是，我确信会有 200 多个操作代码。切换所有这些并不是很好，最好调用分配给该操作代码的函数（处理程序）。

据我所知，委托在这里派上用场。

我想要一个存储“字节，处理程序”的字典

```
 where "byte" is operation code

 where "Handler" is a delegate to the function 
```

我假设这样的事情：

```
byte operationCode = operationRequest.OperationCode; 

if(dictionary.ContainsKey((operaionCode)) {
    dictionary[operationCode](someArguments);
} 
```

从这一点来看，我完全糊涂了。

**如何创建这样的字典，如何创建处理程序，假设我想将它们存储在不同的类中，如何委托它们并存储在字典中。**

这是我朋友建议我的（然后消失了一周，所以我不能再问他了）：

1.  创建字典

    ```
    Dictionary<byte, name> = new Dictionary<byte, name>(); 
    ```

2.  将处理程序添加到该字典

    ```
    dict.Add(operationCode, MoveUnit); 
    ```

3.  初始化代表（在哪里！？）

    ```
    ??? 
    ```

4.  定义你的处理程序

    ```
    private void MoveUnit(SendParameters sendParameter) {...} 
    ```

如果..任何人，任何机会，得到这个想法，请帮助我。

感谢大家花时间阅读本文。:|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:18:08.840

假设*所有*方法都采用 a `SendParameters`，那么您真的想要：

```
private static readonly Dictionary<int, Action<SendParameters>> Actions = 
    new Dictionary<int, Action<SendParameters>>
{
    { 1, MoveUnit },
    { 2, AttackUnit }
};

...

static void HandleRequest(Request request)
{
    Action<SendParameters> action;
    if (Actions.TryGetValue(request.OperationCode, out action))
    {
        action(request.Parameters);
    }
}

static void MoveUnit(SendParameters parameters)
{
}

static void AttackUnit(SendParameters parameters)
{
} 
```

对于实例方法，它变得*有点棘手 - 静态字典不知道实例，因此让操作**采用*实例可能是有意义的。假设在一个名为 的类中`Foo`，您可能想要类似的东西：

```
private static readonly Dictionary<int, Action<Foo, SendParameters>> Actions = 
    new Dictionary<int, Action<Foo, SendParameters>>
{
    { 1, (foo, parameters) => foo.MoveUnit(parameters) },
    { 2, (foo, parameters) => foo.AttackUnit(parameters) }
};

private void MoveUnit(SendParameters parameters)
{
} 
```

诚然，这有点难看……您真的希望能够构建隐含地将“this”作为第一个参数的委托。有一些方法可以做到这一点，但它们有点复杂。

# javascript - 在 IE 中使轮子旋转

> ID：10806007
> 
> 赞同：5
> 
> 时间：2012-05-29T20:12:27.613
> 
> 标签：javascript, css, internet-explorer, rotation

我有以下代码用于使用 JS 和 CSS 旋转轮子：

```
var prefix = (function() {
    if (document.body.style.MozTransform !== undefined) {
        return "MozTransform";
    }
    else if (document.body.style.WebkitTransform !== undefined) {
        return "WebkitTransform";
    }
    else if (document.body.style.OTransform !== undefined) {
        return "OTransform";
    }
    else {
        return "transform";
    }
}()),
    rotateElement = function(element, degrees) {
        var val = "rotate(-" + degrees + "deg)";
        element.style[prefix] = val;
        element.setAttribute("data-rotation", degrees);
    },
 spinModifier = function() {
      return Math.random() * 10 + 25;
 },
 modifier = spinModifier(),
 slowdownSpeed = 0.5,
spinWheelfn = function(amt) {
    clearTimeout(spinTimeout);
     modifier -= slowdownSpeed;
     if (amt == undefined) amt = parseInt(wheel.getAttribute('data-rotation'));
     rotateElement(wheel, amt);
     if (modifier > 0) {
        spinTimeout = setTimeout(function() {
            spinWheelfn(amt + modifier);
        }, 1000 / 5);
     } else {
        modifier = spinModifier();
        /**some other code...*/
     }
}; 
```

它适用于**除**IE 之外的所有浏览器。

在此处查看工作演示：http: [//jsfiddle.net/maniator/H5LKy/129/](http://jsfiddle.net/maniator/H5LKy/129/)

如何更改我的功能，以便当您在 IE 中单击“旋转轮”时，轮子将正确旋转（并获得相同的结果）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:38:15.527

在 Internet Explorer 中，`-ms-transition`在您的 css 和`-ms-transform`javascript 中用于 Internet Explorer。有关工作示例，请参见[此处](http://jsfiddle.net/H5LKy/136/)（仅从 IE9 开始支持，并且像往常一样，IE 很糟糕并且解析 javascript，所以这就是它非常慢的原因）。

对于低于 9 的 IE 版本，以下代码将旋转 45 度：

```
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476); /* IE6,IE7 */
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476)"; /* IE8 */ 
```

数字是弧度而不是度数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:11:28.377

我强烈建议使用 jQuery 和这个插件（你不想重新发明轮子：P，明白了吗？）：

> 这是一个简单的插件，允许您直接在客户端（例如用户生成的内容）旋转图像（任何角度），并使用自己的函数为它们设置动画。主要关注点是在不同的浏览器中统一这种行为。
> 
> 支持的浏览器：
> 
> *   互联网浏览器 6.0 >
> *   火狐 2.0 >
> *   野生动物园 3 >
> *   歌剧 9 >
> *   谷歌浏览器

[http://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

# xcode - iPad - 在 iPad 上关闭全屏模式视图控制器后，屏幕部分不再接收触摸事件

> ID：10806008
> 
> 赞同：3
> 
> 时间：2012-05-29T20:12:34.073
> 
> 标签：xcode, ipad, uiviewcontroller, uipopovercontroller, uitoolbar

我在 iPad 的（全屏）主视图顶部有工具栏。工具栏有一个 barButtonItem，按下时会显示一个弹出框。

在弹出窗口中，我有一个 UIButton，当按下它时，它会告诉委托（主视图控制器）关闭弹出窗口并显示一个完整的页面模式视图。

这一切都很好。

当我关闭模态视图时，弹出框占用的屏幕区域（包括主视图和工具栏按钮）不再响应触摸事件。

如果我旋转设备并且仅在横向模式下发生，此问题会自行纠正。

有什么建议么？

更新：在模拟器中运行时不会发生此错误，仅在实际 iPad 上。

我必须关闭全屏模式视图的委托方法..

```
- (void)fullScreenViewControllerDidFinish:(FullScreenWebViewController *)fullScreenWebView {
    [self dismissViewControllerAnimated:YES completion:^{
        [self setFullScreenWVC:nil];
        [[self view] setNeedsLayout]; //Does't fix the issue
    }];
} 
```

更新：使用 Instruments，我让 iPad 向我展示了它是如何布置子视图的。当模式视图被关闭但设备显然处于横向时，看起来它认为 iPad 处于纵向。

![在此处输入图像描述](../Images/308c744676347c5412d5dfefb0da12d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:22:15.857

我解决了这个问题。

我正在使用

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

代替

```
UIDeviceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

由于某种原因，iPad 没有得到正确的方向。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:18:07.700

我可能会误解您的问题，但我建议您在模式视图被关闭后尝试在主视图中调用“setNeedsLayout”。这应该会触发视图布局的自动调整大小，如果它没有自动调整大小，则可能会解决问题。

查看此链接以获取更多信息：

[http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/setNeedsLayout](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/setNeedsLayout)

# javascript - 显示图像加载器但不使用 ajax

> ID：10806011
> 
> 赞同：0
> 
> 时间：2012-05-29T20:12:36.977
> 
> 标签：javascript, jquery, ajax

这是项目页面：[http](http://blog.papermusepress.com/s7/tabs/) ://blog.papermusepress.com/s7/tabs/都是 html，所以请随意查看源代码。

基本上，当您在表单上输入字段时，图像会通过 URL 字符串在 adobe 的服务器上动态生成，然后通过 javascript 将图像 src 更新为 URL 字符串在页面上呈现。

每次重新生成图像时，我都试图获得一个简单的图像加载器。图像生成确实发生得如此之快，以至于可能没有必要（但我的公司希望包含它，以便客户知道产品实际上正在更新）。

我找到的所有答案都在谈论 ajax（[如何在 jQuery 中显示加载微调器？](https://stackoverflow.com/questions/68485/how-to-show-loading-spinner-in-jquery)）。但问题是我根本没有在项目中使用 ajax。也许我应该使用ajax？

我使用的唯一 jquery 是隐藏/显示适当的 div 的选项卡。图像生成是一个 onclick js 函数。我是 js 新手，所以我的东西真的很基础。绝对可以使用建议来“清理”我的代码。我敢肯定它丑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:19:43.223

jquery 中的 ajax 很简单。

```
jQuery.ajax(’url which contains code or ready flag.’).done(function(htmldata){
// if done loading do everything that is here. 
// the variable htmldata contains the html code that is output by your server.
}); 
```

# objective-c - 如何将我的字典索引值列表放入 if 语句中？

> ID：10806012
> 
> 赞同：0
> 
> 时间：2012-05-29T20:12:40.770
> 
> 标签：objective-c, if-statement, ios

我有一个 uitableview，如果单元格位于存储在 NSdictionary 中的索引值列表中，我想将文本变灰。正如您所看到的，我将要变灰的索引列表存储在一个 nsdictionary 中，我感到模糊的是如何将该列表移动到 if(condition???)

```
NSDictionary *myIndexList = [[inList objectAtIndex:0] objectForKey:@"myIndex"];
   NSLog( @"data from INDEX !!!!!!!! %@", myIndexList);

   if (indexPath.row == ???myIndexList????) {

       cell.textLabel.textColor = [UIColor lightGrayColor];
   } 
```

非常感谢，我希望这个新手问题能找到你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:23:06.363

```
for(NSString *aKey in myIndexList)
{
    if(indexPath.row == [myIndexList valueForKey:aKey])
    {
         cell.textLabel.textColor = [UIColor lightGrayColor];
    }
} 
```

此代码将检查字典中的所有键，如果特定键的值等于行，它会将文本颜色更改为`lightGrayColor`.

现在，如果您只是`myIndexList`以 an`NSArray`而不是 an返回，则`NSDictionary`可以使用：

```
for(int n=0; n<[myIndexList count]; n++)
{
    if(indexPath.row == [[myIndexList objectAtIndex:n] integerValue])
    {
         cell.textLabel.textColor = [UIColor lightGrayColor];
    }
} 
```

# java - LibGDX - 使用 android 库

> ID：10806015
> 
> 赞同：2
> 
> 时间：2012-05-29T20:12:47.073
> 
> 标签：java, android, libgdx

我有三个项目

1.  游戏 - Java 项目
2.  GameAndroid - 安卓
3.  GameDesktop - Java 项目

我想访问**android.graphics.Color**，但我在我的 Java 游戏项目中，所以我不能这样做。当我尝试访问**Java.awt.Color insted**时，我会得到**java.lang.NoClassDefFoundError** insted。

有没有办法访问这些库中的任何一个？

例如我想使用这种方法：

```
Color.getHSBColor(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:44:27.503

我一般建议`com.badlogic.gdx.graphics.Color`改用。

它具有与平台无关的优势 - 但请注意类似物之间的实现差异。

例如，比较 Android 的实现（AWT 的工作方式相同）：

```
public static int argb(int alpha, int red, int green, int blue) {
    return (alpha << 24) | (red << 16) | (green << 8) | blue;
} 
```

和 libgdx 实现：

```
public static int toIntBits (int r, int g, int b, int a) {
     return (a << 24) | (b << 16) | (g << 8) | r;
} 
```

如您所见，编码中的顺序是不同的。这是 供参考的[源代码。](https://code.google.com/p/libgdx/source/browse/trunk/gdx/src/com/badlogic/gdx/graphics/Color.java)

如果您正在寻找诸如 HSB->RGB 转换之类的东西，这可以“手动”实现。例如，请参阅[此答案](https://stackoverflow.com/questions/7896280/converting-from-hsv-hsb-in-java-to-rgb-without-using-java-awt-color-disallowe)- 但请记住使用 libgdx 实现从 RGB 组件生成实际的 int ！

# function - 在 Lua 中，函数争论是否应该在函数中（重新）本地化？

> ID：10806018
> 
> 赞同：0
> 
> 时间：2012-05-29T20:12:55.707
> 
> 标签：function, lua, local-variables

考虑：

```
函数函数名（var_one，var_two）
    var_one = var_two
    返回 var_one
结尾

打印（函数名（“string_one”，“string_two”））

```

与`local var_one = var_two`

现在是`var_one`全局变量还是仍在函数本地范围内？

应该`local var_one`使用还是已经在范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:22:03.270

不，没有这个必要。该名称`var_one`已经是本地名称。您只是在消除原始价值。`_G.var_one`如果您希望显式引用全局，则必须使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:13:37.320

参数是一个局部变量（已经）。

当您引用它（赋值）时，它会查找具有该名称的词法范围变量。它找到局部变量并使用它。

如果函数是闭包，则该局部变量将成为“上值”（非局部变量）。

如果它没有找到局部变量，它将执行全局查找。如果要强制进行全局查找，只需手动进入全局表，因为这就是全局查找。

如果您更改变量的赋值以将其声明为本地，您实际上是在创建一个新的局部变量，它是词法作用域的，它与参数不同，但在词法上隐藏了它。

# php - MySQL 触发器会比 php 更快地检查 20 多行吗？

> ID：10806022
> 
> 赞同：1
> 
> 时间：2012-05-29T20:13:17.573
> 
> 标签：php, mysql

目前，我们记录了用户最近 20 次媒体浏览量，以便他们可以查看最近浏览内容的简要历史记录页面。

为此，我们将媒体 ID 插入到表中。

为了保持表格较小，目前每个用户只有 20 个项目，因此在插入行之前，我们检查他们当前有多少历史记录 ID，如果小于 20，那么我们只需插入新行，如果超过20 然后我们必须选择最后一行并将其删除，然后才能插入新行。

```
$historyResult = mysql_query("SELECT id FROM mediatable WHERE userId = $userId ORDER BY id ASC");

if(mysql_num_rows($historyResult) >= 20)
{
    $historyResult = mysql_query("SELECT id FROM mediatable WHERE userId = $userId ORDER BY id ASC LIMIT 1");
    $historyRow = mysql_fetch_row($historyResult);
    mysql_query("DELETE FROM mediatable WHERE id = '$historyRow[0]'");
}

mysql_query("INSERT INTO mediatable (userId, mediaId) VALUES ($userId, $mediaId))"); 
```

我现在正在将该站点转换为更现代的代码，并将使用 pdo 查询，我的问题是：

以上是解决这个问题的好方法还是我应该使用另一种方法，例如插入时的 MySQL 触发器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:20:34.353

如果您真的对最大速度感兴趣，还有一个非常高效的选项，即不首先检查有多少行，而是在后台进行清理操作修剪它们。每当您想插入新行时，只需直接执行即可。每当您获取要显示的最新行时，请使用`LIMIT 20`.

垃圾收集器进程可以根据需要独立运行，查找具有超过 20 条历史记录的用户并适当地删除最旧的用户。这样，您就可以保证最近历史项目的下限（假设它们是在某个时间点创建的）以及等待修剪的旧历史记录的数量不受限制但实际上非常低。您可以根据自己的喜好决定收集频率。

另一方面，如果您追求的不是绝对性能，那么从 PHP 进行检查应该没问题——前提是您`SELECT COUNT(*) FROM mediatable WHERE userId = $userId`在查看已经存在多少个 id 时将其更改为执行。这样，到目前为止，修改您的保留策略也更容易。

**更新：要考虑的垃圾收集策略**

1.  Scheduled GC：收集定期发生，很可能按固定时间表进行。通常，这被实现为 cron 作业或计划任务，具体取决于操作系统。优点包括可靠性和使用历史数据的选项来显着降低等待修剪的项目的标准偏差。此外，清理不与（也不应该阻止）任何一个用户请求相关联；这消除了用户必须等待 GC 完成才能获得其内容的情况（通常很少见）。
2.  概率 GC：收集是随机触发的。您的应用程序指定了一组可以触发 GC 的操作（例如，创建一个新的历史记录项），以及每当集合中的任何操作发生时触发 GC 的概率；收集可以作为处理操作的一部分发生，或者收集器可以是按需启动的单独进程。最显着的优势是不需要在应用程序外部进行设置，如果您的应用程序不打算广泛分发，这可能不那么重要。在考虑每单位时间触发动作的平均数量的同时调整 GC 概率允许您定位（尽管粗略）连续收集之间的所需间隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:34:41.613

The following will insert a new row or reuse an existing id if a user has more than 20 rows inserted already. The query uses the oldest existing id for this user.

```
mysql_query("
INSERT INTO mediatable (id, userId, mediaId) 
    SELECT m.idd, d.u, d.m
    FROM 
        (SELECT " . $userId . " u, " . $mediaId . " m FROM dual) d LEFT JOIN (
                    SELECT userid u, MIN(id) idd FROM mediatable
                    WHERE 
                        userid = " . $userId . "
                    GROUP BY 
                        userid
                    HAVING COUNT(*) > 20
                ) m ON d.u = m.u
"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:20:19.800

您可以做的最好的事情是，制作一个存储过程，只需将您的新数据和最大长度
*最大长度传递给它，因为现在它的 20 变大了，可能需要更改，所以动态更好*
触发器也很好，但预编译程序，在速度和定制方面进行比较时会更好。

# ruby - 我怎样才能给 Sinatra 一个包罗万象的默认路由？

> ID：10806024
> 
> 赞同：14
> 
> 时间：2012-05-29T20:13:45.303
> 
> 标签：ruby, sinatra

对于小型开发人员文档应用程序，我想设置一个 Sinatra 应用程序来仅提供 HAML 文件。在 CSS 文件和图像的路由之后，我想要一个尝试为您请求的任何路径加载 HAML 文件的路由。

例如：

*   `/index`加载`views/index.haml`，如果存在
*   `/this/page/might/exist`加载`views/this/page/might/exist.haml`，如果存在

我将如何指定这条路线？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-29T20:20:02.993

看起来会这样做：

```
get '/*' do
  viewname = params[:splat].first   # eg "some/path/here"

  if File.exist?("views/#{viewname}.haml")
    haml :"#{viewname}"

  else
    "Nopers, I can't find it."
  end
end 
```

# c++ - C ++将默认参数更改为派生类中的构造函数

> ID：10806028
> 
> 赞同：0
> 
> 时间：2012-05-29T20:13:55.723
> 
> 标签：c++, inheritance

考虑混合器类：

```
class Mixer{

    int numChannels;

    public: Mixer(int numChannels = 2):numChannels(numChannels){

    }

} 
```

我有一个名为 Adder 的子类。我希望加法器中 numChannels 的默认值为 1。我该如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:16:19.080

像这样的东西：

```
class Adder : Mixer
{
public:
    Adder(int numChannels = 1) : Mixer(numChannels){}
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T20:16:33.623

在 Adder 的构造函数中更改默认值：

```
class Adder: public Mixer {
  public:
    Adder(int numChannels = 1): Mixer(numChannels) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:16:22.947

不要使用默认参数 - 提供一个不接受任何输入并将其设置为您想要的默认值的默认构造函数。

# .net - 显示存储在数据库中的位图

> ID：10806029
> 
> 赞同：0
> 
> 时间：2012-05-29T20:13:55.773
> 
> 标签：.net, bitmap, ashx

我将各种类型的图像存储在数据库中，并使用 .ashx 检索图像并将其写入响应输出流，以便在我的站点上显示它。

这适用于除位图以外的任何图像类型。对于我尝试存储和显示的任何位图，我得到的只是一个位图大小的黑盒。

我知道位图正确存储在我的数据库中，因为如果我检索它并将其存储到磁盘，它会很好用。

这是有问题的代码：

```
 Image image = GetImage(out type);
                context.Response.ContentType = type;

                // Save the image to the OutputStream
                ImageFormat i_format = null;
                switch (type.ToLower())
                {
                    case "image/jpg":
                    case "image/jpeg":
                        {
                            i_format = ImageFormat.Jpeg;
                        }
                    break;
                    case "image/png":
                        {
                            i_format = ImageFormat.Png;
                        }
                    break;
                    case "image/bmp":
                        {
                            i_format = ImageFormat.Bmp;
                        }
                    break;
                    case "image/gif":
                        {
                            i_format = ImageFormat.Gif;
                        }
                    break;
                }
                //this results in a black box if it's a bitmap.
                //all other image types work fine
                image.Save(context.Response.OutputStream, i_format);

                //if I save the bitmap image to a file, it's fine - no black box
                image.Save("c:\\temp\\test.bmp", i_format); 
```

我不得不认为这很明显我做错了，但是如果我能弄清楚发生了什么，那就见鬼了。

编辑：

我已经把它追得更远了。如果我右键单击浏览器中显示的黑色图像并“另存为...”，则生成的文件将被截断。例如，如果原始图像是 126 字节，则保存的图像是 122 字节。

问题不在于图像本身 - 正如我上面所说， image.Save 到文件工作正常。

所以现在我想当我将图像保存到 response.OutputStream 时发生了一些事情，导致它被截断。我尝试将内容长度设置为正确的大小，但这没有帮助。

仍然没有解决方案，但我走得更远了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:42:36.073

我看到一些对“image/x-ms-bmp”的引用是要使用的正确 mime 类型（与“image/bmp”相比）...试试看...

# asp.net-mvc-4 - MVC 4 单页应用程序 - 数据去哪儿了？

> ID：10806033
> 
> 赞同：1
> 
> 时间：2012-05-29T20:14:07.937
> 
> 标签：asp.net-mvc-4, asp.net-spa

我刚刚使用模板创建了一个 ASP.NET MVC 4 单页应用程序。

开箱即用，它似乎能够持久化和检索数据。但我无法弄清楚这些数据的去向。我还没有建立数据库或任何东西。

```
 public void InsertSubscription(Models.Subscription entity) {
        InsertEntity(entity);
    } 
```

在我调用这个函数之后。我在哪里可以查看包含数据的表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:21:44.550

在应用程序的`web.config`文件中查找数据库连接字符串。那应该指向您的数据所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:41:04.620

默认情况下，SPA 模板会创建一个存储在应用程序`App_Data`文件夹中的 SQL Server Express 数据库。

[本文](http://www.tikalk.com/data-sourcelocaldbv110)提供有关默认设置的信息。

# inno-setup - 在 Inno Setup 中强制replace-on-reboot

> ID：10806034
> 
> 赞同：3
> 
> 时间：2012-05-29T20:14:12.227
> 
> 标签：inno-setup

Inno Setup 中是否有一个标志*要求*在重新启动时替换文件？传统的 'restartreplace' 标志仅在 Inno 认为有必要的情况下在重新启动时替换（即，如果文件正在使用且无法直接复制）。

或者，是否有一个标志要求文件在重新启动时永远不会被替换，但*不会*在失败时显示错误消息？如果 'restartreplace' 未通过，并且文件正在使用中，Inno 将显示错误消息。有没有办法改变这种行为？

基本上，我的问题是：有什么方法可以分离“restartreplace”中通常存在的“两步”逻辑（尝试直接复制，然后出错或尝试replace-on-reboot）？

谢谢！

# c++ - 使用 make_tuple 进行比较

> ID：10806036
> 
> 赞同：12
> 
> 时间：2012-05-29T20:14:24.297
> 
> 标签：c++, c++11, tuples, idioms

> **可能重复：**
> [通过“元组”和“领带”实现比较运算符，好主意吗？](https://stackoverflow.com/questions/6218812/implementing-comparision-operators-via-tuple-and-tie-a-good-idea)

有时我需要写一些丑陋的仿函数，
例如

```
lhs.date_ < rhs.date_ ||
lhs.date_ == rhs.date_ && lhs.time_ < rhs.time_ ||
lhs.date_ == rhs.date_ && lhs.time_ == rhs.time_ && lhs.id_ < rhs.id_ ..... 
```

这真的让我很恼火。
所以我开始避免写以下内容：

```
std::make_tuple( lhs.date_, lhs.time_, lhs.id_ ) < 
    std::make_tuple(rhs.date_, rhs.time_, rhs.id_ ); 
```

我几乎很高兴，但请注意，我可能不是出于目的使用元组让我担心。

你能批评这个解决方案吗？
或者这是一个好习惯？
你如何避免这样的比较？

**更新：**
感谢您指向 std::tie 以避免复制对象。
并感谢您指出重复的问题

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T20:19:17.953

`std::tuple`比较运算符的声明指出：

> 按字典顺序比较 lhs 和 rhs，即比较第一个元素，如果它们等价，则比较第二个元素，如果它们等价，则比较第三个元素，依此类推。

因此，除了有可能创建不需要的临时对象（可能已优化掉）之外，您正在做的事情对我来说似乎还可以。

请注意，*等价*意味着`!( lhs < rhs ) && !( rhs < lhs )`而不是`lhs == rhs`，那就是*平等*。假设*等效*和*相等*对您的班级意味着相同，这没关系。请注意，这与例如通过键访问`set`/没有什么不同。`map`

为了避免临时变量，您可以使用`std::tie`which对其参数进行*左值引用的元组：*

```
std::tie( lhs.date_, lhs.time_, lhs.id_ ) < 
    std::tie( rhs.date_, rhs.time_, rhs.id_ ); 
```

以类似的方式，创建一个*rvalue references*`std::forward_as_tuple`的元组。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:40:48.693

您最好使用 tie 而不是 make_tuple （取决于是否值得避免成员的复制/移动），但否则，这将起作用，并且没有什么可怕的。

如果你仔细想想，许多 POD 结构基本上是“命名元组”，而 C++ 实际上通过提供按成员相等比较（以及复制、移动等）来迎合这一点——在大多数情况下，将其扩展为 (字典式）按成员小于比较也有意义。但不幸的是，C++ 没有提供任何方法来指定成员的字典比较，除非明确地写出来。当然，在具有自省功能的语言中，添加它会很容易，但在 C++ 中，则不然。

一个明显的答案是让你的类实际上是一个命名元组。与其拥有成员 int date_、int64_t time_ 和 string id_，不如从元组继承，并编写对用户隐藏元组的访问器方法。但是在这种情况下，您只是用比较实现中的丑陋来换取访问器实现中的丑陋，尚不清楚这是否更好。

您可以使用宏来包装丑陋，但这可能不是更好：

```
DEFINE_NAMED_TUPLE_CLASS(MyDate, int date, int64_t time, string id)
  ...
END_NAMED_TUPLE_CLASS 
```

或者，您可以构建自己的外部代码生成器，允许您预处理具有“named_tuple_class”的扩展 C++，只需将标记更改为“class”，然后定义比较运算符即可处理。但这是很多工作。*

# python - 在自然中断处拆分字符串

> ID：10806037
> 
> 赞同：4
> 
> 时间：2012-05-29T20:14:25.717
> 
> 标签：python

在渲染标题（使用reportlab）时，如果它超过45个字符，我想将它分成两行。到目前为止，我有这个：

```
if len(Title) < 45:
    drawString(200, 695, Title)
else:
    drawString(200, 705, Title[:45])
    drawString(200, 685, Title[45:]) 
```

这样做的问题是我只想在自然中断处拆分标题，例如出现空格的地方。我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T20:19:44.830

请参阅此示例代码：

```
import textwrap

print("\n".join(textwrap.wrap("This is my sooo long title", 10))) 
```

输出 ：

```
This is my
sooo long
title 
```

查看完整的 Python 文档：[http ://docs.python.org/library/textwrap.html#module-textwrap](http://docs.python.org/library/textwrap.html#module-textwrap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:20:17.810

用于`rfind(' ', 0, 45)`查找边界前的最后一个空格并在该位置中断。如果没有空格（rfind 返回 -1），请使用您拥有的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:22:33.120

```
s = 'this is a long line with a bunch of text for sure and goes on and on ..'

brk = s.find(' ', 45)
if brk == -1:
    print s
else:
    print('{:s}\n{:s}'.format(s[:brk], s[brk+1:])) 
```

滚动你自己的，也许不是那么优雅..产生：

```
this is a long line with a bunch of text for sure
and goes on and on .. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:45:45.540

我不确定替代方案。我可以建议，将背景颜色的文本框绘制为宽度= 45 和 ShrinkToFit=1 的背景页面。所以超过 45 的文本会在词尾缩小。

# php - 使用准备好的语句编写查询的分页结果集，

> ID：10806038
> 
> 赞同：2
> 
> 时间：2012-05-29T20:14:28.113
> 
> 标签：php, mysqli

当我在查询之前以传统方式进行查询时，我一直在使用分页类，但现在我已经通过 $stmt->fetch() 语句使用准备好的语句进行查询，我现在不知道如何分页. 我一直在环顾四周并检查stackoverflow文献，似乎有一些现成的解决方案，一些命令或一些：sort-> stuff。

你如何对这个循环产生的内容进行分页？“准备好的语句世界”中有一些命令吗？任何显示的链接、页面或网页？

```
while( $stmt->fetch() )
    {
        printf("%s%s%s%s", $Email, $Webpage, $Telephone, $Mobile);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:27:03.050

### 方法一`get_result()`：：

*注意：此方法仅适用于 PHP >= 5.3，具有 mysqlnd 本机驱动程序。

假设这是使用 MySQLi 完成的，并且您已通过 将这些变量绑定为结果变量`bind_result()`，我将改为使用[`get_result()`](http://www.php.net/manual/en/mysqli-stmt.get-result.php)将其传输到 MySQLi 结果资源，并将行作为数组获取到包含所有行的数组中。然后使用通常用于数组数据的任何分页方法或插件：

```
// Don't use bind_result()...
// execute your statement
$stmt->execute();
// Get result set into a MySQLi result resource
$result = $stmt->get_result();

// array to hold all results
$rowset = array();
// And fetch with a while loop
while ($row = $result->fetch_assoc()) {
  $rowset[] = $row;
} 
```

    var_dump($rowset);

现在`$rowset`用作 2D 数组，您可以使用任何在常规数组上操作的分页方法。

### 方法 2：构建一个带有绑定输出变量的数组

如果您没有 mysqlnd 本机驱动程序（因此无法使用`get_result()`，请继续使用`bind_result()`但将所有这些附加到数组中：

```
// array to hold all rows
$rowset = array();

// All results bound to output vars
while ($stmt->fetch()) {
  // Append an array containing your result vars onto the rowset array
  $rowset[] = array(
    'email' => $Email,
    'webpage' => $Webpage,
    'telephone' => $Telephone,
    'moblile' => $Mobile
  );
}
var_dump($rowset); 
```

# python - 一次启动两个进程

> ID：10806044
> 
> 赞同：0
> 
> 时间：2012-05-29T20:14:49.833
> 
> 标签：python

好的，所以我想要一个脚本来运行安装过程。其中之一是安装 Microsoft Office 产品。我想启动一个 Microsoft 安装程序，然后以编程方式（当前使用 Python 库“Pywinauto”）插入键并按下按钮。

但是，程序在启动 Office 安装程序时会停止执行，只有在关闭后才会恢复。

无论如何，程序是否同时拥有两条独立的“路径”？启动 Office 安装程序，当它仍然打开时，是否有另一个路径将正确的代码插入其中？

编辑：这是一些伪代码，我认为它最终可能会有所帮助。

```
if x == blah:
    Path 1:
    subprocess.call("installer.exe")
    Path 2 (at exactly the same moment):
    pywinautoify-insert serial key, clicky buttons
    Both end at the same time, merge back into standard program code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:28:44.347

如果您只需要生成一个进程而不等待它，您可以简单地使用`os.spawnl`该`os.P_NOWAIT`标志。

但根本的错误是试图以这种方式自动化安装过程。几乎所有安装程序（特别是如果他们是“大型”产品的安装程序）都允许静默、自动安装，以简化系统管理员的工作。静默安装的常用开关是`/q`或`-q`，您通常可以通过某种方式指定安装设置（例如，使用特殊的配置文件或 MSI 转换）。

特别是对于 Office 2007 和 2010，您可以[在此处](http://technet.microsoft.com/en-us/library/dd630736%28v=office.12%29.aspx)和[此处](http://technet.microsoft.com/en-us/library/dd630736.aspx)阅读。

# html - 如何在 Perl 中使用 CGI 修改 iframe？

> ID：10806051
> 
> 赞同：0
> 
> 时间：2012-05-29T20:15:15.937
> 
> 标签：html, perl, iframe, cgi

所以我想出了如何使用cgi“创建”一个iFrame，但我不知道如何操作它（即更改大小、更改源、禁用滚动等）。这是我用 Perl 写的：

```
 #!/usr/bin/perl

    use strict;
    use warnings;
    use CGI;

    my $page = new CGI;

    print $page->header;
    print $page->start_html;
    print $page->iframe("http://www.nasa.gov/");
    print $page->end_html; 
```

但这是我收到的 HTML：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
    <!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head><title>Untitled Document</title>
    </head><body><iframe>http://www.nasa.gov/</iframe></body></html> 
```

当然，添加 source 和 size 属性时，信息必须放在 > 符号内，如下所示：

```
<iframe src="http://www.nasa.gov/"> Enter Text Here </iframe> 
```

相反，CGI 关闭 iframe 标头，如下所示：

```
<iframe>http://www.nasa.gov/</iframe> 
```

在这种情况下，我应该如何修改 iframe？可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:30:06.947

```
 print $page->iframe({src => "http://www.nasa.gov/"}, ""); 
```

您需要将地址放入`src`属性中，而不是放入`iframe`内容中（这是不支持该元素的浏览器的后备内容 - 主要是理论上的功能）。

# excel - 如何建立一个矩阵相乘的简单优化模型？

> ID：10806059
> 
> 赞同：2
> 
> 时间：2012-05-29T20:15:40.423
> 
> 标签：excel, r, optimization, model

我已经使用标准 Solver 在 Excel 中创建了一个优化模型，现在想在 R 中制作一个类似的模型，因为这将允许我制作像这样的更大模型。不幸的是，我很难找到可以为我的概念建模的好例子。因此，我想问你是否有人能给我一些关于如何在 R 中制作类似模型的提示。

我已将我的 Excel 表上传到[http://dl.dropbox.com/u/9641130/R/Positioning%20Optimization%20R.xlsx](http://dl.dropbox.com/u/9641130/R/Positioning%20Optimization%20R.xlsx)

基本思想是通过将 E10:L19 范围内的最多 8 个单元格更改为 1 个单元格来最大化单元格 B3。B3 单元格包括范围 E10:L19 的 sumproduct() 和许多类似范围。

我期待看到一些关于如何在 R 中构建类似模型的提示。

谢谢！约赫姆

========

# 按照大通的建议更新

我想用一些可重复的 R 代码来澄清我的问题。这与您在上面的 Excel 代码中找到的模型大致相同。

初始矩阵集：

```
A <- as.matrix(structure(list(X0 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.1 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.2 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.3 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.4 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.5 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.6 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), X0.7 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L)), .Names = c("X0", "X0.1", "X0.2", "X0.3", "X0.4", "X0.5", "X0.6", "X0.7"), class = "data.frame", row.names = c(NA, -9L)))
B <- as.matrix(structure(list(X1 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.1 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.2 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.3 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X.100000 = c(-100000L, -100000L, -100000L, -100000L, 1L, 1L, 1L, 1L, 1L), X.100000.1 = c(-100000L, -100000L, -100000L, -100000L, 1L, 1L, 1L, 1L, 1L), X.100000.2 = c(-100000L, -100000L, -100000L, -100000L, 1L, 1L, 1L, 1L, 1L), X.100000.3 = c(-100000L, -100000L, -100000L, -100000L, 1L, 1L, 1L, 1L, 1L)), .Names = c("X1", "X1.1", "X1.2", "X1.3", "X.100000", "X.100000.1", "X.100000.2", "X.100000.3"), class = "data.frame", row.names = c(NA, -9L)))
C <- as.matrix(structure(list(X1 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.1 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.2 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.3 = c(1L, 1L, 1L, 1L, 1L, -100000L, 1L, 1L, 1L), X1.4 = c(1L, 1L, 1L, 1L, 1L, -100000L, 1L, 1L, 1L), X1.5 = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), X1.6 = c(1L, 1L, 1L, 1L, 1L, -100000L, 1L, 1L, -100000L), X1.7 = c(1L, 1L, 1L, 1L, -100000L, -100000L, 1L, 1L, -100000L)), .Names = c("X1", "X1.1", "X1.2", "X1.3", "X1.4", "X1.5", "X1.6", "X1.7"), class = "data.frame", row.names = c(NA, -9L)))
D <- as.matrix(structure(list(X775 = c(385L, 1233L, 1067L, 5L, 730L, 1123L, 837L, 5L, 3087L), X704 = c(625L, 1338L, 804L, 110L, 659L, 1363L, 942L, -165L, 3350L), X704.1 = c(625L, 1338L, 804L, 110L, 659L, 1363L, 942L, -165L, 3350L), X944 = c(625L, 1263L, 898L, 35L, 899L, 1363L, 867L, -65L, 3110L), X775.1 = c(385L, 1233L, 1067L, 5L, 730L, 1123L, 837L, 5L, 3087L), X775.2 = c(385L, 1233L, 1067L, 5L, 730L, 1123L, 837L, 5L, 3087L), X944.1 = c(625L, 1263L, 898L, 35L, 899L, 1363L, 867L, -65L, 3110L), X944.2 = c(625L, 1263L, 898L, 35L, 899L, 1363L, 867L, -65L, 3110L)), .Names = c("X775", "X704", "X704.1", "X944", "X775.1", "X775.2", "X944.1", "X944.2"), class = "data.frame", row.names = c(NA, -9L))) 
```

函数 sum(A*B*C*D) 的结果当前为 0。这是合乎逻辑的，因为在矩阵 A 中，所有单元格的值都为 0。但是，我想知道用什么公式可以最大化函数总和（A*B*C*D）。

```
sum(A*B*C*D)
[1] 0 
```

我想通过将矩阵 A 中的值从 0 更改为 1 来做到这一点。此外，应考虑以下约束。1\. 每行只能包含一个值为 1 的单元格。 2\. 每列只能包含一个值为 1 的单元格；这意味着我们最多可以在矩阵 A 中放置值 1 的八倍。

有人对如何实现这一点有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:34:10.247

您的决策变量（ 中的单元格值`A`）是布尔值（0 或 1），您的目标和约束是这些变量的线性函数，这将您置于称为混合整数线性规划的优化问题类别中。例如，这些问题可以使用`Rglpk`包来解决。这是我的解决方案：

```
n1 <- nrow(A)
n2 <- ncol(A)

# objective coefficients
obj <- as.vector(B*C*D) # objective

# matrix of constraints weights
mat <- matrix(0, n1+n2, n1*n2)
for (i in 1:n1) {
   mat[i, ] <- as.numeric(row(A) == i)
}
for (j in 1:n2) {
   mat[n1+j, ] <- as.numeric(col(A) == j)
}

dir   <- rep("<=", n1+n2) # constraint directions
rhs   <- rep(1, n1+n2)    # constraints upper-bounds
types <- rep("B", n1*n2)  # variable types (boolean)

library(Rglpk)
opt <- Rglpk_solve_LP(obj, mat, dir, rhs, types,
                      max = TRUE, verbose = TRUE)
opt

# $optimum
# [1] 9950

# $solution
#  [1] 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
# [39] 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0
# [77] 0 1 0 0

# $status
# [1] 0

opt.A <- matrix(opt$solution, n1, n2)
opt.A

#       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
#  [1,]    0    0    0    1    0    0    0    0
#  [2,]    0    0    1    0    0    0    0    0
#  [3,]    0    1    0    0    0    0    0    0
#  [4,]    1    0    0    0    0    0    0    0
#  [5,]    0    0    0    0    0    0    0    0
#  [6,]    0    0    0    0    0    0    1    0
#  [7,]    0    0    0    0    0    1    0    0
#  [8,]    0    0    0    0    0    0    0    1
#  [9,]    0    0    0    0    0    0    0    0
# [10,]    0    0    0    0    1    0    0    0 
```

您`9950`是否也获得了最佳价值`sum(A*B*C*D)`？（我这台电脑上没有 Excel……）

# java - Java.util.concurrent 库是否比标准 Android AsyncTask 更擅长执行任何类型的任务

> ID：10806065
> 
> 赞同：3
> 
> 时间：2012-05-29T20:15:58.167
> 
> 标签：java, android, multithreading, java.util.concurrent

我意识到您可以获得更多的自定义，但是使用并发库类是否比仅使用库存 AsyncTask 或仅创建线程并调用运行有性能（内存/速度）优势？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:24:46.843

如果您查看`AsyncTask` [源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/AsyncTask.java)，您会发现它都是`FutureTask`基于`java.util.concurrent.*`.

我想如果有的话，使用`AsyncTask`更方便和纯粹`FutureTask`只会带来一点好处。尽管您可以选择使用其他 API`java.util.concurrent.*`来完成更复杂的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:40:02.747

AsyncTask 带来的主要是易用性。这种工作范式，在后台运行这个方法，而在 UI 线程上的这个其他方法非常适合可用性（尽管我通过创建 vanilla AsyncTask 的子类进行了改进，使异常处理更简单）。我认为 AsyncTask 非常适合使用请求-响应类型的调用来调用服务。但是，并非所有类型的并发都对 AsyncTask 有效。

现在，有些任务 AsyncTask 不适合。例如，如果您想一次从服务器加载多个图像。AsyncTask 可能不是最佳选择。一方面，AsyncTasks 只能运行一次并且不能重新启动。AsyncTasks 拥有他们运行后台方法的线程，并且该线程不能被重用或共享。因此，如果您有 10 或 20 个图像，则意味着如果您使用 AsyncTasks，则需要创建和关闭 10 或 20 个线程。或者一次加载所有图像，这意味着在通过 20 次单独调用从服务器完全加载所有图像之前，您的 UI 不会更新。要么你为更好的 UI 响应支付更多的内存、资源等，要么你的 UI 为更低的开销付出了代价。两者都不是很好。

一个更好的选择是加载一个线程一次，发送几个轻量级的作业来运行，然后将它们发送回 UI 线程。我创建了自己的 AsyncTask 版本，我称之为 PipelineHandler，它创建一个线程，并运行发布到它的作业。这些作业与 AsyncTask 非常相似，因为它们有一个在 UI 线程上调用的方法，以及另一个在 UI 线程上调用以执行更新的方法。这样做的好处是我可以利用单个线程来运行任意数量的作业。而且我可以根据需要轻松扩展为队列服务的线程，而无需更改配置选项以外的任何内容。在幕后，它使用 Java 并发类 ExecutorService，但也利用 Handler 提供在 UI 线程上运行某些东西的能力。

因此，为了回答您的问题，我认为 AsyncTask 非常适合服务请求响应类型调用等单次作业，但不适用于下载图像或下载文件等批处理，尤其是在您必须同时拨打多个电话的情况下。Java 并发库可以在帮助您执行这些类型的任务方面发挥作用，但由于它们只解决了一半的问题，即在线程上运行事物，因此受到限制。Java 并发库适合批处理作业运行，但不适合与 UI 线程交互。因此，您必须经常将它们组合在一起才能获得解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:29:25.063

`AsyncTask`主要是`SwingWorker`在桌面上比较，而不是并发 API。它在后台使用线程，但提供了帮助您在 UI 线程中与 UI 组件交互的方法。

# linq - 在 LINQ 查询中获取不同的值

> ID：10806066
> 
> 赞同：0
> 
> 时间：2012-05-29T20:15:58.303
> 
> 标签：linq

我写了这个查询：

```
 var queryDetails = DbContext.ProductEventNotificationDetails.Where(p 
                 =>p.ProductEventNotifications_Id == ID).ToList().Select(r => new
                        {
                            r.Id,
                            NotificationMethod = 
                               r.NotificationContact.NotificationMethod.Name

                        }); 
```

所以，我只需要根据 NotificationMethod 值获取不同的值。如果我最后使用 distinct()，它会根据 Id 进行调度。你能告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:19:21.303

```
var queryDetails = DbContext.ProductEventNotificationDetails
    .GroupBy(x => x.NotificationMethod)
    .Select(group => group.Key); 
```

# php - PHP从数组的下拉列表中删除空值

> ID：10806074
> 
> 赞同：0
> 
> 时间：2012-05-29T20:16:25.777
> 
> 标签：php, arrays, drop-down-menu

我正在创建一个数组，然后使用 php 和 html 通过下拉菜单显示它的元素。数组的大小不同，所以我有一个 foreach 语句来显示它，问题是我无法弄清楚为什么下拉列表中的第一个值总是空的（我希望第一个值实际上来自我的数组）。这是代码，非常感谢任何帮助！

```
<html>
  <form id="form1" name="form1" method="post" onsubmit="" onreset="" action="thing.php">
<?php

$data = array();
$data[4] = 20.4541;
$data[5] = 32.5631;
$data[6] = 41.9715;
$data[7] = "text";
$data[10] = 2231;
$bestValue = 5;

echo " " . $key;
echo "<select name='dropdown'>";
echo "<option value=''></option>";

if($_POST['dropdown'] !=0){
    foreach($data AS $key=>$value) {
        $sel = '';
        if($key==$_POST['dropdown'] ) {
            $sel = "selected";
        }

        echo "<option value='".$key."' ".$sel.">".$key."</option>"; 
    }}      
else{

    foreach($data AS $key=>$value) {
        $sel = '';
        if($key==$bestValue ) {
                $sel = "selected";
        }
        echo $value;

        echo "<option value='".$key."' ".$sel.">".$key."</option>";             
    }}      

echo "</select>";

foreach($data AS $key2=>$value){
    if($_POST['dropdown'] == $key2){
    echo "  " . $data[$key2] . " degrees";}}
?>

<script>
function submitForm(action)
{
    document.getElementById('form1').action = action;
    document.getElementById('form1').submit();
}
</script>
<center>
<input type="button" onclick="submitForm('thing.php')" value="Find Angle" />
</center>

</html> 
```

如您所见，下拉列表中的第一个值为空。我该如何删除这个？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:18:55.143

只需删除第三个回声线。

```
echo "<option value=''></option>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:20:34.413

您要打印的第一个选项是一个空选项。

```
 echo "<select name='dropdown'>";
 echo "<option value=''></option>"; 
```

删除线

```
echo "<option value=''></option>"; 
```

# spring - Restful API 服务器的架构设计

> ID：10806077
> 
> 赞同：0
> 
> 时间：2012-05-29T20:16:32.337
> 
> 标签：spring, oop, design-patterns, restful-architecture

我正在使用 Spring 3.1 / Hibernate / Jackson 创建一个 Restfull API 服务器。

我有一个“**购买**”控制器/模型/道。

我现在需要添加“**标记**”购买的功能。

因此，一个带有“tagId”和“tagName”的简单类链接回“Purchase”。
一个“Purchase”可以有多个“Tags”，一个“Tag”只能属于一个“Purchase”。

代表我必须添加的这个新的“标签”类的最佳方式是什么？IE

*   我应该将 purchaseId 属性添加到“标签”模型并以某种方式对其进行注释吗？
*   我应该添加一个“标签列表”归因于购买”模型吗？
*   我会创建一个作为“PurchaseController”子类的“Tag”控制器吗？
*   ETC...

本质上，我正在寻找使用 Spring 进行设计的最佳实践方法。

此外，任何关于我可以采用的设计模式的建议都将受到欢迎。
也许装饰者模式在这里适用？

当然，所有购买和标签都必须保存到数据库中。

谢谢

采购控制人：

```
@Controller
public class PurchaseController
{

    @Autowired
    private IPurchaseService purchaseService;

    @RequestMapping(value = "purchase", method = RequestMethod.GET)
    @ResponseBody
    public final List<Purchase> getAll()
    {
        return purchaseService.getAll();
    }

    @RequestMapping(value = "purchase/{id}", method = RequestMethod.GET)
    @ResponseBody
    public final Purchase get(@PathVariable("id") final Long id)
    {
        return RestPreconditions.checkNotNull(purchaseService.getById(id));
    }

    @RequestMapping(value = "purchase/tagged", method = RequestMethod.GET)
    @ResponseBody
    public final List<Purchase> getTagged()
    {
        return RestPreconditions.checkNotNull(purchaseService.getTagged());
    }

    @RequestMapping(value = "purchase/pending", method = RequestMethod.GET)
    @ResponseBody
    public final List<Purchase> getPending()
    {
        return RestPreconditions.checkNotNull(purchaseService.getPending());
    }

    @RequestMapping(value = "purchase", method = RequestMethod.POST)
    @ResponseStatus(HttpStatus.CREATED)
    public void create(@RequestBody final Purchase entity)
    {
        RestPreconditions.checkRequestElementNotNull(entity);
        purchaseService.addPurchase(entity);
    }
} 
```

购买型号：

```
@Entity
@XmlRootElement
public class Purchase implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = 6603477834338392140L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private Long pan;

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public Long getPan()
    {
        return pan;
    }

    public void setPan(Long pan)
    {
        this.pan = pan;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:23:04.190

购买模式需要修改如下。

```
@Entity
public class Purchase implements Serializable
{
/**
 * 
 */
    private static final long serialVersionUID = 6603477834338392140L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private Long pan;

    @OneToMany(mappedBy = "instance", fetch = FetchType.LAZY)
    private Set<Tag> tags;

    public Long getId()
    {
      return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public Long getPan()
    {
        return pan;
    }

    public void setPan(Long pan)
    {
        this.pan = pan;
    }

    public void setTags(Set<Tag> tags){
        this.tags = tags;
    }

    @JsonIgnore
    public Set<Tag> getTags(){
        if(tags == null){
           tags = new LinkedHashSet<Tag>();
        }
        return tags;
    }
} 
```

和标签模型将如下所示。

```
@Entity
public class Tag implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({ @JoinColumn(name = "PURCHASE__ID", referencedColumnName = "ID") })
    private Purchase purchase;

    //Other attributes, getters and setters

   @JsonIgnore
   public Purchase getPurchase(){
       return this.purchase;
   }

} 
```

如果 Purchase 拥有关系（父），您可以在 PurchaseService 和 PurchaseController 中实现标签特定的方法，或者为标签实现单独的服务和控制器类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:53:55.520

您已经在购买控制器中包含了“标记”概念：`getTagged`

我将构建一个包含`List<ITag> Tags`购买模型中的属性的设计，因为这可能是在您当前的设计中实现它的最简单和最直接的方式。

# ios - UITextview 框架调整为不正确的高度

> ID：10806079
> 
> 赞同：0
> 
> 时间：2012-05-29T20:16:38.183
> 
> 标签：ios, uitabbarcontroller, uitextview, autoresizingmask

我的视图底部有一个标签栏，我想隐藏它。我在[这里](https://stackoverflow.com/questions/5272290/how-to-hide-uitabbarcontroller)用 Saurabh 提供的代码隐藏它。

代码效果很好，但是我添加了一行来更改我的文本视图的位置。但是文本视图会调整大小！这是代码：

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480.0f, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480.0f)];
        }

    }
    [buttonView setFrame:CGRectMake(0.0, 154.0, 320.0, 306.0)];
    [screenImageView setFrame:CGRectMake(0.0, 16.0, 320.0, 139.0 )];
    [inputView setFrame:CGRectMake(20.0f, 105.0f, 280.0f, 50.0f)];

    [UIView commitAnimations];

}

- (void) showTabBar:(UITabBarController *) tabbarcontroller {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {        
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 431.0f, view.frame.size.width, view.frame.size.height)];

        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431.0f)];
        }

    }
    [buttonView setFrame:CGRectMake(0.0, 105.0, 320.0, 306.0)];
    [screenImageView setFrame:CGRectMake(0.0, 16.0, 320.0, 90.0 )];
    [inputView setFrame:CGRectMake(20.0f, 56.0f, 280.0f, 50.0f)];

    [UIView commitAnimations]; 

} 
```

除了 inputView（一个 UITextview）被调整大小之外，每件事都很好。如果tabbar被隐藏，textview（inputView）的高度变为58，当我再次显示tabbar时，textview的高度变为43。

我总是可以根据需要添加或减去 7 或 8。但我认为知道是什么原因可能会很好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:28:00.793

很可能是因为`autoresizingMask`您的属性`UITextView`设置为允许灵活的高度。下面的代码应该会有所帮助：

```
inputView.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin; // Pins inputView to the top 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:27:59.123

尝试将`autoResizingMask`您的属性设置`inputView`为`UIViewAutoresizingNone`. 重置文本字段的超级视图的框架可能会触发输入视图上的调整大小事件。

# ruby-on-rails - 防止设计用户会话被缓存

> ID：10806080
> 
> 赞同：3
> 
> 时间：2012-05-29T20:16:40.283
> 
> 标签：ruby-on-rails, performance, caching

我在 Rails 应用程序中使用动作缓存，并且尝试不缓存用户会话或闪存消息。

除了使用片段缓存之外，在 Rails 中缓存整个操作时，是否有一种忽略这两个组件的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T23:03:11.943

我不这么认为。一旦您在页面上有动态内容（例如 Flash 消息），您就必须使用片段进行缓存。

[片段缓存](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)

# c# - 结合 WPF + WCF + 实体框架的好例子

> ID：10806081
> 
> 赞同：6
> 
> 时间：2012-05-29T20:16:48.900
> 
> 标签：c#, wpf, wcf, entity-framework, azure

我正计划创建一个新的数据驱动的客户端/服务器应用程序，该应用程序具有 WPF、Silverlight 和移动客户端的灵活性。我已经精通WPF，需要学习如何实现后端。我读过的所有内容都指向我使用 WCF + Entity Framework。

我还没有找到结合这三种技术的现实例子。我想使用 WPF 的数据绑定，以便能够以一种尽可能多地避免过程代码的方式轻松地绑定到数据库对象。

我查看了[这个](http://prismtutorial.codeplex.com/)基于 Prism 的示例，但它看起来从未完成，它并没有真正做任何事情，它基本上是一个美化的“Hello World！”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:22:05.797

您是否看过下面仅包含 WPF + WCF + 实体框架的演练：

[http://msdn.microsoft.com/en-us/library/dd465161.aspx](http://msdn.microsoft.com/en-us/library/dd465161.aspx)

在本演练中，您将创建一个包含数据绑定控件的 WPF 应用程序。这些控件绑定到封装在 WCF 数据服务中的客户记录。您还将添加客户可用于查看和更新​​记录的按钮。

本演练说明了以下任务：

1.  创建从 AdventureWorksLT 示例数据库中的数据生成的实体数据模型。
2.  创建将实体数据模型中的数据公开给 WPF 应用程序的 WCF 数据服务。
3.  通过将项目从“数据源”窗口拖动到 WPF 设计器来创建一组数据绑定控件。
4.  创建在客户记录中向前和向后导航的按钮。
5.  创建一个按钮，将控件中的数据更改保存到 WCF 数据服务和基础数据源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T17:28:31.037

我做了一些挖掘，这就是我发现的：

[Karl Shifflett 的 Netflix Stuff 应用程序](http://www.codeproject.com/Articles/863003/Stuff-WPF-Line-of-Business-Using-MVVM-Video-Tuto) （WPF、MVVM、数据服务）

[IssueVision](http://issuevision.codeplex.com/) （Silverlight、MVVM、WCF RIA 服务、实体数据模型）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-21T04:30:37.580

[演示 WPF、MVVM、WCF、WF 和 Entity Framework 6.0](https://layersample.codeplex.com/)可能对您来说是一个很好的演示。还有其他分层架构示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T01:33:03.920

假设您使用的是 Visual Studio 2010，那么可能值得您花时间查看 WCF 数据服务。这是一篇关于它的文章：

[Visual Studio 2010 中的实体框架 4.0 和 WCF 数据服务 4.0](http://msdn.microsoft.com/en-us/magazine/ee336128.aspx)

这篇文章还有一个代码示例的链接，但我对 Silverlight 不熟悉，还无法运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T11:42:33.377

我设法使用以下示例连接我的 WPF 应用程序：

WCF 入门（Windows Communication Foundation） - 快速运行和调试 - [https://blogs.msdn.microsoft.com/brunoterkaly/2013/10/18/getting-started-with-wcf-windows-communication-foundation-running -和-调试-快速/](https://blogs.msdn.microsoft.com/brunoterkaly/2013/10/18/getting-started-with-wcf-windows-communication-foundation-running-and-debugging-quickly/)

WCF 编程 - 如何编写连接到 WCF 服务的客户端应用程序 [https://blogs.msdn.microsoft.com/brunoterkaly/2013/10/28/wcf-programming-how-to-write-a-client-app -that-c​​onnects-to-a-wcf-service/](https://blogs.msdn.microsoft.com/brunoterkaly/2013/10/28/wcf-programming-how-to-write-a-client-app-that-connects-to-a-wcf-service/)

# javascript - 我无法在 foreach 中向对象添加 id

> ID：10806090
> 
> 赞同：0
> 
> 时间：2012-05-29T20:17:29.333
> 
> 标签：javascript, dojo

Uncaught TypeError: Object [object HTMLDivElement] has no method 'setAttribute' 当我尝试在对象中添加一个元素的 id 时，我不断收到此错误。

这是对我来说很糟糕的台词

dojo.attr(query(".toggle_section", object),"id",i);

```
function toggleClass(){
require(["dojo/on",
         "dojo/query",
         "dojo/dom-class"
], 
function(on, query, domClass) {
    query(".toggle-container").forEach(function(object, i){
        var btn_toggle = query(".toggle", object);
        dojo.attr(query(".toggle_section", object),"id",i);
        on(btn_toggle, "click", function(evt){

            domClass.toggle(object, "closed");
            evt.preventDefault();
        });
    });
});
}

<div class="toggle-container">
            <a class="toggle" href="#" title="toggle profile">PROFILE</a>
            <div class="toggle_section">
                <p>hidden content</p>
            </div>              
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T11:21:52.440

, , , ... 和.`dojo/dom-*`等模块之间存在差异。第一系列模块允许您一次更改**一个 DOM 节点**（通过引用 DOM 节点或 ID）。`dojo/dom``dojo/dom-style``dojo/dom-attr``dojo/query`

 **然而，该`dojo/query`模块返回的`NodeList`实际上是一个带有一些额外功能的 DOM 节点数组。

要更改属性，您可以选择使用`dojo/dom-attr`（即 AMD 版本`dojo.attr()`），但这意味着您不能使用 a `NodeList`，因此您实际上必须获取列表的第 N 个值，就像您在答案中所做的那样（`query("...")[0]`）。

一个更好的解决方案是使用该[`dojo/NodeList-dom`](https://dojotoolkit.org/reference-guide/1.9/dojo/NodeList-dom.html)模块，该模块允许您使用我之前描述的 DOM 函数（`dojo/dom-style`, `dojo/dom-attr`, ...），但可以使用`NodeList`它本身。要使用它，请执行以下操作：

```
query(".toggle_section", object).attr("id", 1); 
```

但是你必须加载`dojo/NodeList-dom`模块。您可能会问有什么区别，好吧，在上面的代码中，您仍然可以使用您的代码`NodeList`并使用它的所有优点。

一个完整的例子可以在[JSFiddle](http://jsfiddle.net/a6Q3z/)上找到。

* * *

***注意***：*我知道您已经有了答案，但这个答案可能对将来的参考有用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:29:39.260

我认为您需要：

*   要求在“ `dojo/dom-attr`”中并使用`domAttr.set(node, attribute, value)`

或者

*   要求在“ `dojo`”基础上并照常`dojo.attr(node, attribute, value)`使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T17:25:14.453

我需要将 [0] 添加到查询的末尾，以便它选择 .toggle_section 元素的第一个实例，在本例中是唯一实例。

```
dojo.attr(query(".toggle_section", object)[0],"id",i); 
```**

# asp.net - 如何在弹出的父 Web 表单网格视图中显示值？

> ID：10806091
> 
> 赞同：-1
> 
> 时间：2012-05-29T20:17:36.117
> 
> 标签：asp.net, c#-4.0, gridview, popup

我有一个弹出窗口，显示**用户的帐户标题、余额和**在接收用户帐户和密码后的创建日期...

我想在链接弹出窗口的父 Web 表单网格视图中显示这三个值。...

**我该怎么做...如何在 gridview 中显示三个值？**

我使用以下方法将 Grid 视图与对象 MergeAccount 绑定：

```
 public DataSet ShowDetails(int acc,int pin)
{
    this.AccountNumber = acc;
    this.PinNumber = pin;
    SqlConnection con = DALBankAccount.connect;
    SqlCommand cmd = new SqlCommand("Select Title,CreationDate,Balance from AccountsDetails where AccountNo='" + AccountNumber + "'", con);
    SqlDataAdapter MyDataAdapter = new SqlDataAdapter(cmd);
    DataSet MyDataSet = new DataSet();
    MyDataAdapter.Fill(MyDataSet, "AccDetails");
    return MyDataSet;
} 
```

关闭弹出窗口后，用户应该在父 Web 表单的网格视图中最终显示他已合并的所有帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:24:47.117

您可以参考这些链接 -

1.  [在asp.net页面和弹出页面之间发送数据？](https://stackoverflow.com/questions/397864/sending-data-between-an-asp-net-page-and-a-pop-up-page)

2.  [http://wiki.asp.net/page.aspx/282/passing-value-from-popup-window-to-parent-form39s-textbox/rev/1](http://wiki.asp.net/page.aspx/282/passing-value-from-popup-window-to-parent-form39s-textbox/rev/1)

希望这可以解决您的问题。

# jquery - jQuery兄弟姐妹限制

> ID：10806092
> 
> 赞同：0
> 
> 时间：2012-05-29T20:17:37.110
> 
> 标签：jquery, siblings

我有一个包含 10 个左右下拉菜单的表单。其中两个下拉列表与其他下拉列表不同，我试图弄清楚如何不让用户在每个下拉列表中具有相同的值。

例如，

```
<select id="z_one">
   <option>1</option>
   <option>1</option>
   <option>1</option>
</select>

<select id="z_two">
   <option>1</option>
   <option>1</option>
   <option>1</option>
</select> 
```

有没有办法只遍历这两个选择，而不是其他的，并检查匹配的值？

```
$('select[id^=z_]').change(function() {
   var value = $(this);
   $(this).siblings().each(function() { //this checks all siblings. do not want.
   if ($(this).val() == value.val()) {
      alert("You can't select the same value twice.");
      return false;
      }
   });
}); 
```

此 jquery 代码遍历页面上的所有选择，而不仅仅是我要检查的两个。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:22:44.363

在您对兄弟姐妹的调用中尝试某种谓词，以将其限制为仅这两个选择。

就像是

`this.siblings("[id = 'z_two']")`

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:19:44.393

代替

```
$(this).siblings().each( 
```

利用

```
$(this).next('select[id^=z_]').each( 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:03:27.947

我已经稍微改变了你的 html。

```
<select id="z_one" class='groupA'>
   <option>Select an element</option>
   <option>1</option>
   <option>2</option>
   <option>3</option>
</select>

<select id="z_two" class="groupA">
   <option>Select an element</option>
   <option>1</option>
   <option>2</option>
   <option>3</option>
</select> 
```

这是JS代码：

```
$(function(){

    $('.groupA').change(function(){

        var currentID = this.id;
        var currentVal = $(this).val();

        var $options = $('option','.groupA');
        var $jThis = $(this);

        var isMatched = false;

        $.each($options,function(index,element){

            if(element.parentNode.id != currentID ){

                var $prevDropDown = $('#' + element.parentNode.id);

                if($prevDropDown.val() == currentVal){

                   $jThis.get(0).selectedIndex = 0;
                   alert("You can't select the same value twice.");
                   isMatched = true;
                   return false; // to break out from $.each
                }

            }
        });

        if(isMatched)
            return false;     
    });

}); 
```

# ios - 使用 mapkit 创建地图？

> ID：10806096
> 
> 赞同：1
> 
> 时间：2012-05-29T20:18:04.783
> 
> 标签：ios, mkmapview, mapkit

是否有任何示例代码或文件可以显示如何创建地图，比如主题公园或其他东西，但仍然能够像 CLLocationCoordinate2D 一样使用来查找主题公园中的使用位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:46:56.633

MapKit 不允许您使用自己的图块。您将需要使用替代方法。查看[http://mapbox.com/mobile](http://mapbox.com/mobile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:30:48.563

多次询问和回答。本质上，它归结为查看 WWDC 2010 中的 TileMap 示例代码。它仍然会在后台加载 Google 地图，并将您的地图加载到顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T21:27:38.393

您可以在 iOS 7 中：

```
NSString *template = @"http://.../tile?z={z}&x={x}&y={y}";
overlay = [[MKTileOverlay alloc] initWithURLTemplate:template];
overlay.canReplaceMapContent = YES;
[map addOverlay:overlay level:MKOverlayLevelAboveLabels];

- (MKOverlayRenderer *)mapView:(MKMapView *)mapView
            rendererForOverlay:(id<MKOverlay>)overlay
{
  return [[MKTileOverlayRenderer alloc] initWithOverlay:overlay];
} 
```

有关更多信息，请参阅[MKTileOverlay](https://developer.apple.com/LIBRARY/IOS/documentation/MapKit/Reference/MKTileOverlay_class/Reference/Reference.html)或[WWDC 2013 session 304](https://developer.apple.com/wwdc/videos/?id=304)。

# css - JavaFX2：设置单个 TreeItem 样式的最佳方式是什么？

> ID：10806102
> 
> 赞同：0
> 
> 时间：2012-05-29T20:18:27.310
> 
> 标签：css, treeview, javafx-2

我希望能够向 TreeItem 添加一个 CSS 类，然后只使用一个 CSS 文件为其赋予样式。但这是不可能的，不是吗？

有没有办法像我们使用 getStyleClass() 一样添加一个类？

如果没有，为单个项目赋予风格的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:03:20.957

为项目赋予样式的最佳方式是使用样式表，限制使用 Node.setStyle。

你可能想知道为什么？

理性是一种表现。计算样式值被缓存。匹配相同选择器的所有节点可以共享计算值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:32:01.460

嗯...跳出框框思考！您无法设置 treeitem 和 tablerow 的样式，因为它们基本上充当其他节点的容器形式，因此为您的 treeitem（或 tablerow）上的节点设置一个类，然后设置它们的样式。我很抱歉回答，但我还不能添加评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:35:33.063

使用[TreeCellFactory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeView.html#setCellFactory%28javafx.util.Callback%29)，在工厂中，使用 Node 并设置它的样式，或者通过 getStyle，或者通过 Node.setStyleClass 更好。

# javascript - 如何屏蔽黑莓浏览器上的输入

> ID：10806103
> 
> 赞同：1
> 
> 时间：2012-05-29T20:18:31.263
> 
> 标签：javascript, jquery, blackberry, mobile, maskedinput

我正在使用 jQuery[`Masked Input`](http://digitalbush.com/projects/masked-input-plugin/)插件强制用户以正确的格式输入电话号码。

```
$(document).ready(function () {
        $("#PhoneNumber").mask("(999)999-9999");
}); 
```

我遇到的问题是该[`Masked Input`](http://digitalbush.com/projects/masked-input-plugin/)插件不适用于黑莓浏览器。

我试过使用：

*   [iMask](http://zendold.lojcomm.com.br/imask/) - 不走运
*   [打字](http://typecast.arapehlivanian.com/index.html)- 没有运气
*   [蒙面输入](http://digitalbush.com/projects/masked-input-plugin/)- 不走运

有谁知道我怎样才能让它在黑莓浏览器上工作。

**我也欢迎使用其他可以为我提供类似功能的方法/插件。（只要它适用于黑莓浏览器）**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:28:19.160

```
this: ^\([0-9]{3}\)[0-9]{3}\-[0-9]{4}$ regular expression pattern matches: (999)999-9999
so you could use it to validate the input like this:

$('input:text').val().match(/^\([0-9]{3}\)[0-9]{3}\-[0-9]{4}$/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:29:34.737

搜索后，我遇到了[**Mask JSAPI library**](http://www.pengoworks.com/workshop/js/mask/)。事实证明，这正是我需要它做的事情，它适用于黑莓浏览器。

所以为了回答我自己的问题，我最终使用了[**Mask JSAPI 库**](http://www.pengoworks.com/workshop/js/mask/)并像这样使用它：

```
<script type="text/javascript">
    $(document).ready(function () {
        document.frmReferral.reset();
        oStringMask = new Mask("(###) ###-####");
        oStringMask.attach(document.frmReferral.PhoneNumber);
    });
</script> 
```

# format - 从 R8G8B8A8_UNORM 资源创建 R32_UINT 视图

> ID：10806104
> 
> 赞同：0
> 
> 时间：2012-05-29T20:18:32.477
> 
> 标签：format, directx, directx-11, directcompute

我需要使用 DirectCompute 进行图像编辑 - ala：http: [//msdn.microsoft.com/en-us/library/ff728749%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ff728749%28v=vs.85%29.aspx)

我的后备缓冲区是 R8G8B8A8_UNORM，我需要创建一个格式为 R32_UINT 的 UAV，以便我在计算着色器中同时读取和写入。

当我这样做时，从我的调试输出中引用：

“CreateUnorderedAccessView：创建视图时，格式（0x2a，R32_UINT）无效；资源已使用完全限定的格式创建，该格式不可转换（0x1c，R8G8B8A8_UNORM）”

引用上面链接中的文档：

“大多数每元素 32 位格式支持转换为 DXGI_FORMAT_R32_UINT”

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:46:55.783

尝试使用 DXGI_FORMAT_R8G8B8A8_TYPELESS 格式创建资源。

OOPS - 您已经获得了该格式的后台缓冲区 - 不确定您是否能够使用 DXGI_FORMAT_R8G8B8A8_TYPELESS 作为后台缓冲区。

# c# - 以 XML 格式向浏览器显示 XML 字符串

> ID：10806105
> 
> 赞同：1
> 
> 时间：2012-05-29T20:18:32.887
> 
> 标签：c#, asp.net

有人可以以最佳方式帮助我以 xml 格式的方式向浏览器显示原始 xml 字符串吗？

我在下面创建的代码不显示任何内容并出错：

```
 string xml = GetMessageXml(Request.QueryString["ID"].ToString());
            XDocument doc;
            using (StringReader s = new StringReader(xml.Substring(1)))
            {
                doc = XDocument.Load(s);
            }
            Response.ContentType = "text/xml";
            doc.Save(Response.Output);
            Response.Write(doc.ToString()); 
```

**错误：** XML 解析错误：文档元素
'Location:H ttp: localhost/Accounts/EventLogMessageDetails.aspx?id=178'
第 83 行，第 9 列：'

这是 xml 字符串：

```
?<?xml version="1.0" encoding="utf-8"?>
<Order xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<OrderID>00000000-0000-0000-0000-000000000000</OrderID>
<IsOrderThrough>true</IsOrderThrough>
<VendorName>le</VendorName>
<OrderUniqueIdentifier>K03936</OrderUniqueIdentifier>
<SoldToCustomerID>A786</SoldToCustomerID>
<ShipToCustomerID>A786</ShipToCustomerID>
<OrderType>Standard</OrderType>
<CustomerPurchaseOrderNumber>PO0000336</CustomerPurchaseOrderNumber>
<ProjectName />
<EmailAddress>Nair@ecomkva.com</EmailAddress>
<DeliveryDate>2012-05-29T10:09:55.492696-05:00</DeliveryDate>
<ShipToAddress>
<AddressID>00075</AddressID>
<OrganizationName>SEBA-E</OrganizationName>
<AddressLine1>3700 STATE</AddressLine1>
<AddressLine2>Elk</AddressLine2>
<City>LA CROSSE</City>
<State>WI</State>
<ZipCode>54601</ZipCode>
<Country>US</Country>
<DaytimePhoneNumber>6782260680EXT</DaytimePhoneNumber>
</ShipToAddress>
<ShippingMethodName>FEDEX PRIORITY OVERNIGHT</ShippingMethodName>
<ShippingMethodID>F01</ShippingMethodID>
<MarketSegment>Commercial</MarketSegment>
<Comments>Elk^</Comments>
<LineItems>
<OrderLineItem>
<LineItemID>00000000-0000-0000-0000-000000000000</LineItemID>
<ProductID>Kbv</ProductID>
<Quantity>2</Quantity>
<ListPrice>10.67</ListPrice>
<PlacedPrice>3.84</PlacedPrice>
<DeliveryDate>2012-05-29T10:09:56.6957979-05:00</DeliveryDate>
<ShippingAddress>
<AddressID>Z00138075</AddressID>
<OrganizationName>moomoo</OrganizationName>
<AddressLine1>3700 STATE ROAD 16</AddressLine1>
<AddressLine2>moomoo</AddressLine2>
<City>LA CROSSE</City>
<State>WI</State>
<ZipCode>54601</ZipCode>
<Country>US</Country>
<DaytimePhoneNumber>675555550680EXT</DaytimePhoneNumber>
</ShippingAddress>
<ShippingMethodID>F01</ShippingMethodID>
<EmailAddress>IS@Cnj.com</EmailAddress>
<Comments />
<SequenceNumber>0</SequenceNumber>
</OrderLineItem>
</LineItems>
<BusinessUnit />
<FOBPoint>FB2</FOBPoint>
<Notify>TD</Notify>
<WorkOrder />
<SubmittedByUserName>TDAVIS</SubmittedByUserName>
<SpecialInstructions />
</Order> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:40:25.773

这是我快速完成的。

将 Order.xml 添加到我的 ASP.NET 项目中。

创建一个 Showorder.aspx 页面，并在 <% 和 %> 之间包含 C# 代码，如下所示：

```
<body>
 <form id="form1" runat="server">
  <div>
   <% 
     string xml = Request.QueryString["ID"].ToString();
        XDocument doc;
        doc = XDocument.Load(xml);
        Response.Write("<XMP>"+ doc.ToString()+"<\\XMP>");
        %>
    </div>
  </form>
</body> 
```

之后，我启动了我的页面，如下所示：

```
 http://localhost:52134/showxml.aspx?ID=http://localhost:52134/order.xml 
```

我得到的 XML 如下：（注意：一定要使用 XMP ..../XMP 否则你不会在浏览器中看到格式化的 XML）

![在此处输入图像描述](../Images/9b8ce0092b66dc9f57c53cfc1a9b30be.png)

随意试验代码并尝试任何你想要的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:35:20.377

Your problem is with your input XML as it is BAD XML.

**Look at your error**:

```
Line Number 83, Column 9:</Order><Order xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

Your XML has XML Namespace defined at line #83 with "Order" element which should be defined at the top. It seems when you merged the XML or created, you just botched it.

Also what do you mean "display a raw xml string to a browser in an xml formatted way"? Do you mean " display a raw string to a browser in an xml formatted way"? Please explain what you input is and how do u want to display in browser with example..

# php - 仅允许 X 个嵌套标签

> ID：10806107
> 
> 赞同：2
> 
> 时间：2012-05-29T20:18:44.573
> 
> 标签：php, nested

假设我们有一个名为 test 的标签，即`[code]`.

我想做的是，我只想在字符串`[code]`中的每个主`[code]`标签内最多允许 X 个其他标签，这意味着最内部的标签将被删除。

因此，例如，如果 X = 4，则以下字符串：

```
[code]a[code]b[code]c[code]d[code]e[code]f[code]g[/code][/code][/code][/code][/code][/code][/code] 
```

会成为：

```
[code]a[code]b[code]c[code]d[code]e[/code][/code][/code][/code][/code] 
```

以及以下字符串：

```
[code]a[code]b[code]c[code]d[code]TEST[/code][code]e[code]f[code]g[/code][/code][/code][/code][/code][/code][/code] 
```

会成为：

```
[code]a[code]b[code]c[code]d[code]TEST[/code][code]e[/code][/code][/code][/code][/code] 
```

这里的目标是在一个代码元素中不要有多个嵌套的 [code] 元素，这样它就不会变得太乱。

我想知道如何实现这一点，只是想一个算法，并希望得到任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:32:04.607

看起来您可以使用 JBBCode：

[http://jbbcode.com/docs#definingNewCodes](http://jbbcode.com/docs#definingNewCodes)

```
addBBCode's fifth and last parameter is a nest limit. By default 
the nest limit is -1, meaning no limit. Nest limits allow you to 
define a bbcode such that if the bbcode is embedded multiple times, 
elements nested beyond the nest limit will be omitted from the output. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:52:58.237

这将是相当浪费的，因为在这里添加多个标签支持等非常容易。无论哪种方式，您几乎都必须完全进行树解析。

请注意，无效输入不会以任何方式处理，标签必须适当平衡

```
function get_node_contents( $node ) {
    $orig = $node;
    $ret = "[code]" . $node->content;

    if( @$node->children ) {
        foreach( $node->children as $node ) {
            $ret .= get_node_contents( $node );
        }
    }

    if( @$orig->endContent ) {
        $ret .= $orig->endContent;
    }
    return $ret."[/code]";

}

function reduce_depth( $str, $maxDepth = 4 ) {
    $index = 0;
    $len = strlen( $str );
    $reg = '/(\[code\]|\[\/code\])/';

    $root = new stdClass;
    $root->children = array();
    $depth = 0;
    $ret = "";

    $pos = strpos( $str, "[code]" );

    if( $pos ) {
        $ret .= substr( $str, 0, $pos - 0);
    }

    while( $index < $len  ) {

        if( !preg_match( $reg, $str, $matches, PREG_OFFSET_CAPTURE, $index )) {
            break;
        }

        $index = ( $matches[1][1] + strlen( $matches[1][0] ) );
        $tag = $matches[1][0];

        $next = preg_match( $reg, $str, $matches, PREG_OFFSET_CAPTURE, $index );
        $content = "";

        if( $next ) {
            $content = substr( $str, $index, $matches[1][1] - $index );
        }

        if( $tag === "[code]" ) {
            if( $depth === 0 ) {
                $parent = $root->children[] = new stdClass;
                $parent->content = $content;
                $depth++;
            }
            else if ( $depth++ > $maxDepth ) {

                continue;
            }
            else {
                if( !@$parent->children ) {
                    $parent->children = array();
                }
                $child = $parent->children[] = new stdClass;
                $child->content = $content;
                $child->parent = $parent;
                $parent = $child;
            }        
        }
        else {                
            $depth--;

            if( @$parent->parent ) {
                $parent = $parent->parent;
            }

            if( @$content ) {
                $parent->endContent = $content;
            }                

        }

    }

    foreach( $root->children as $node ) {
        $ret .= get_node_contents( $node );
    }

    $ret .= substr( $str, $index, $len - $index );

    return $ret;

}

echo reduce_depth( "asdasdas[code]l[/code][code]a[code]lol[/code][code]b[code]c[code]d[code]e[code]f[code]g[/code][/code][/code][/code][/code][/code][/code]aasdasdsasd", 4 ). "\n";
echo reduce_depth( "[code]a[code]b[code]c[code]d[code]e[code]f[code]g[/code][/code][/code][/code][/code][/code][/code]", 4 ) . "\n";
echo reduce_depth( "[code]a[code]b[code]c[code]d[code]TEST[/code][code]e[code]f[code]g[/code][/code][/code][/code][/code][/code][/code]", 4 ) . "\n";
echo reduce_depth("[code][code]bugi[/code]bugi2[/code]", 1) . "\n"; 
echo reduce_depth("[code][code]bugi[/code]bugi2[code]bugi3[/code]bugi4[code]bugi5[/code]bugi6[/code]", 3) . "\n"; 

/*
    asdasdas[code]l[/code][code]a[code]lol[/code][code]b[code]c[code]d[code]e[/code][/code][/code][/code][/code]aasdasdsasd
    [code]a[code]b[code]c[code]d[code]e[/code][/code][/code][/code][/code]
    [code]a[code]b[code]c[code]d[code]TEST[/code][code]e[/code][/code][/code][/code][/code]
    [code][code]bugi[/code]bugi2[/code]
    [code][code]bugi[/code][code]bugi3[/code][code]bugi5[/code]bugi6[/code]

*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:25:03.617

我不知道你在这里做什么，但如果你将它输出为 HTML，你可以将这个规则添加到你的样式表中：

```
test test test test test { display: none; } 
```

显然，它必须是一个真实的元素，因为`<test>`它不是 html 的一部分。

# html - 样式化 HTML 电子邮件

> ID：10806111
> 
> 赞同：5
> 
> 时间：2012-05-29T20:18:54.600
> 
> 标签：html, css, email, coldfusion

创建 HTML 电子邮件时如何指定外观，例如字体？有比使用内联 CSS 更好的方法吗？我`cfmail`用来发送电子邮件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:22:17.170

您可以`<style>`在 head 部分的块中对其进行样式设置，但在 HTML 电子邮件中设置任何样式的最佳/一致方式是不幸地内联。如果您觉得懒惰，您可以使用[http://premailer.dialect.ca/](http://premailer.dialect.ca/)为您移动所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T20:30:11.137

html 邮件最重要的方面是确保收件人可以阅读邮件。出于这个原因，坚持基本的 HTML 很重要，而不是仅仅意味着内联 CSS。

我使用这个工具 - [http://inlinestyler.torchboxapps.com/](http://inlinestyler.torchboxapps.com/)
源文件 - [https://github.com/davecranwell/inline-styler](https://github.com/davecranwell/inline-styler)

# python - 组织 Python 包以从其顶级目录运行？

> ID：10806113
> 
> 赞同：1
> 
> 时间：2012-05-29T20:19:01.327
> 
> 标签：python

如何组织 Python 包，使其代码从顶级目录运行，而不将该目录添加到主机的 Python 路径？

我还想组织代码，以便我可以从各种测试子目录运行测试，同样无需将包的顶级目录添加到 python 路径。

考虑以下代码布局：

```
foobar/
  __init__.py
  README.txt
  its_a_module.py
  one_package/
    __init__.py
    foo.py
    bar.py
    tests/
      __init__.py
       testing_one_package.py
  tests/
    __init__.py
    test_foobar.py 
```

*   在 foobar/ 中，我应该能够在 python 解释器中导入 foobar 及其所有子模块
*   从 foobar/，我应该能够运行 tests/test_foobar.py。
*   从 foobar/tests，我应该能够运行 test_foobar.py
*   从 one_package/tests，我应该能够运行 testing_one_package.py。

如何组织我的各种模块的导入语句，以及我的**init** .py 文件的内容，以满足这些目标？

（我想使用 distutils 来管理代码，我读到从顶级目录运行代码是一个有用的先驱。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:38:23.657

您可以添加`..`到您的`PYTHONPATH`. 这将满足您的前两个条件：

*   在 foobar/ 中，我应该能够在 python 解释器中导入 foobar 及其所有子模块
*   从 foobar/，我应该能够运行 tests/test_foobar.py。

您始终可以绝对导入，也可以不导入`import foobar`和`from foobar.one_package import ...`其他`import one_package`相对导入。通过这种方式，您可以从 foobar 目录运行任何子模块。

对于其他两项规定，

*   从 foobar/tests，我应该能够运行 test_foobar.py
*   从 one_package/tests，我应该能够运行 testing_one_package.py。

您可以在其中添加祖父母和曾祖父母，`PWD`但`PYTHONPATH`我从未听说过，这听起来很糟糕。`foobar`如果您希望 foobar 包可用，无论您走多远，您都无法真正绕过安装，即把它放在您的路径上。

# android - 是否可以在 Android 中重用一组视图？

> ID：10806124
> 
> 赞同：0
> 
> 时间：2012-05-29T20:19:31.447
> 
> 标签：android

我知道可以在 XML 中声明一个“虚拟”元素，例如 textView，并使用 layoutInflater 加载它，并且可以更改它的文本。
所以我的想法是，有可能在 xml 文件中构建一组虚拟视图，使用 layoutInflater 更改文本、imageResources 加载它，然后将其附加到 tableLayout 中。

假设我有一个 TableRow，其中有一个图像和一个文本。我可以加载这个 xml，更改 textView 的文本，更改图像的 imageResource，然后将其附加到 tableLayout 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:26:03.250

是的你可以。充气后，您可以将视图转换为它的类型和/或使用 parentView.findViewById(id) 访问子项。您还可以动态添加或从 ViwGroup 中删除，如 TableLayout。当您使用 ListViews 时，您可以阅读有关 convertView 的信息。这是一个重用视图的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:58:44.187

为了将视图从一个布局移动到另一个布局，您必须从包含它的布局中删除该视图，然后才能将其添加到另一个布局。另外，我认为视图不能在活动之间移动，因为它们引用了活动（作为上下文）。

顺便说一句，您不需要 xml 来创建视图，您可以使用简单的 Java 代码 (CTOR)。当您创建视图时，您甚至不必将视图放在布局上，因为您可以使用充气机来完成这项工作（或者，如前所述，CTOR）。

# cordova - senchatouch jsonp 不会在我的列表中加载数据

> ID：10806136
> 
> 赞同：0
> 
> 时间：2012-05-29T20:20:05.710
> 
> 标签：cordova, sencha-touch

senchatouch jsonp 不会在我的列表中加载数据

```
..
`Ext.define('App.store.AllProjects',{
    extend:'Ext.data.Store',
    config:{        
    autoLoad: true,
        model:'App.model.AllProjects',
        proxy:{         
            url:'http://server.com/allProjects.php',
            type:'jsonp',
            reader:{
                rootProperty:'data',
                                type:'ajax'             
                }
            }               
        }
    });

` 
```

这是我的数据..

```
{
    data: [
        {
            "id": "1",
            "name": "Leisureville",
            "loc": "Kakkanad",
            "project_image": "-F7qJ7GJ5ss_upload.gif"
        },
        {
            "id": "2",
            "name": "Green Hills",
            "loc": "Kakkanad ",
            "project_image": "-K2lmld7m6R_upload.gif"
        },
        {
            "id": "3",
            "name": "Laurel Grove",
            "loc": "Vyttila",
            "project_image": "-84N4NI7nHf_upload.gif"
        },
        {
            "id": "4",
            "name": "Serene Orchard",
            "loc": "Panampilly Nagar ",
            "project_image": "-8Clk75RV3F_upload.gif"
        },
        {
            "id": "5",
            "name": "Great Orchard",
            "loc": "Panampilly Nagar",
            "project_image": "-DK8oozF0Km_upload.gif"
        },
        {
            "id": "6",
            "name": "Dover Court",
            "loc": "M G Road",
            "project_image": "-4aIew80rw8_upload.gif"
        },
        {
            "id": "7",
            "name": "Plum Flower",
            "loc": "Byepass, Vytilla ",
            "project_image": "-67dpg59ZAt_upload.gif"
        },
        {
            "id": "8",
            "name": "Green Gables",
            "loc": "Edapally",
            "project_image": "-HMB3PKbm9C_upload.gif"
        },
        {
            "id": "9",
            "name": "Kings Brook",
            "loc": "Maradu",
            "project_image": "-W8486zZL7h_upload.gif"
        },
        {
            "id": "10",
            "name": "Promenades ",
            "loc": "Palarivattom",
            "project_image": "-sBQUbcy5pl_upload.gif"
        },
        {
            "id": "11",
            "name": "Silver Lawns",
            "loc": "Edapally",
            "project_image": "-QAMLFTtexZ_upload.gif"
        },
        {
            "id": "12",
            "name": "White Waters",
            "loc": "Thevara",
            "project_image": "-qJwO9MLYNq_upload.gif"
        },
        {
            "id": "13",
            "name": "Ivory Heights",
            "loc": "Panampilly Nagar",
            "project_image": "-4f3l5JG9Yo_upload.gif"
        },
        {
            "id": "14",
            "name": "Maison d'or",
            "loc": "Panampilly Nagar",
            "project_image": "-VmNOyUDuam_upload.gif"
        },
        {
            "id": "15",
            "name": "Berry Woods",
            "loc": "chembumukku",
            "project_image": "-3jR6o3D390_upload.jpg"
        },
        {
            "id": "16",
            "name": "Highlands",
            "loc": "IT City",
            "project_image": "-wmta9QJjcd_upload.gif"
        },
        {
            "id": "17",
            "name": "Esperanza",
            "loc": "Seaport Airport Road, Kakkanad",
            "project_image": "-T21A9E7Knu_upload.gif"
        },
        {
            "id": "18",
            "name": "Serenade",
            "loc": "Palarivattom",
            "project_image": "-23TAyDatBI_upload.jpg"
        },
        {
            "id": "19",
            "name": "El Castillo",
            "loc": "Jawahar Nagar",
            "project_image": "-tr6otl7MdZ_upload.gif"
        },
        {
            "id": "20",
            "name": "Hacienda ",
            "loc": "Aluva",
            "project_image": "-icnluy8N5B_upload.gif"
        },
        {
            "id": "21",
            "name": "Veneziano ",
            "loc": "Koonamavu",
            "project_image": "-9sQ6MbT3zX_upload.jpg"
        }
    ]
} 
```

我用来得到这个的php是

```
<?php
include("autoload.php");
$util = new Utils();
$records=$util->listAllProjects();
$result=json_encode($records);
echo "{data:".$result."}";
?> 
```

我的错误是什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:34:28.983

我用了

```
echo 'Ext.util.JSONP.callback1('. json_encode($records) . '); 
```

在我的php端..并将我的商店更改为以下..它有效..

```
Ext.define('Mather.store.AllProjects',{
extend:'Ext.data.Store',
config:{        
autoLoad: true,
    model:'Mather.model.AllProjects',
    proxy:{         
        url:'http://server.com/allProjects.php',
        type:'jsonp',
        reader:{
            rootProperty:'record',
            type:'json'             
            },
             callbackKey : 'callback'
        }               
    }
}); 
```

感谢所有帮助过我的人.. 希望代码对 SME 有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:19:02.710

使用[JSON 阅读器](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Json)。

> 代理使用 JSON Reader 读取以 JSON 格式发回的服务器响应。

改变

```
reader:{
    type:'ajax',
    .....            
} 
```

至

```
reader:{
    type:'json',
    .....
} 
```

# python - Python-读取网址时超时

> ID：10806145
> 
> 赞同：0
> 
> 时间：2012-05-29T20:20:46.503
> 
> 标签：python, url, web

我调用了以下代码来访问一个 url 并尝试在该页面上打印内容：

```
import urllib2
f = urllib2.urlopen("https://www.reaxys.com/reaxys/secured/customset.do?performed=true&action=get_preparations&searchParam=1287039&workflowId=1338317532514&workflowStep=1&clientDateTime=2012-05-29%2015:17")
page = f.read()
print page
f.close() 
```

我不确定该网址是否可以在任何地方访问，因此该页面上的内容可能并非所有人都可以访问。

该页面设置了用户可以在页面上停留多长时间的时间限制，在此之后，将显示一个弹出窗口，说明用户已达到超时。

这是我遇到的问题：当我在浏览器中输入 url 时，一切都打开了。但是当我尝试打印 Python 从该页面读取的内容时，Python 读取的页面只有在页面超时时才会弹出。

不知道怎么回事，是Python还是网站？如何让 Python 读取该页面上的实际内容？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:51:21.620

它似乎与网站设置的 cookie 有关。如果我访问 URL

```
https://www.reaxys.com/reaxys/secured/customset.do?performed=true&action=get_preparations&searchParam=1287039&workflowId=1338317532514&workflowStep=1 
```

在我的浏览器中，我得到相同的超时错误。如果我刷新，该网站加载正常。但是，如果我从网站上清除我的 cookie 并重试，我会再次超时。因此，我怀疑该站点执行了一些添加时间戳并在页面可见之前对其进行检查的过程，并且如果由于某种原因无法设置 cookie，则默认为超时（就像从在 Python 脚本中）。

我建议对正在设置的 cookie 进行深入调查（从该页面上的 Javascript 开始，这似乎正在处理一些超时逻辑），然后尝试按照以下方式从抓取过程中设置 cookie：[http:/ /www.testingreflections.com/node/view/5919](http://www.testingreflections.com/node/view/5919)、[http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/](http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/)等。

（这绝不是要纵容 Elsevier 网站的抓取，因为它们可能会追随你并吃掉你的孩子 :)）

# vim - 如何使用 VIM 结合宏和正则表达式的强大功能

> ID：10806150
> 
> 赞同：7
> 
> 时间：2012-05-29T20:21:21.433
> 
> 标签：vim

我发现自己经常遇到需要结合正则表达式、某种移动以及复制和粘贴的问题。我确信在 vim 中有一些方法可以做到这一点，但我还没有看到任何东西将它们组合在一起。作为一个例子，我现在试图解决的问题是这样的。

1.  查找 /^Description "(.*)"/ 的行
2.  保存捕获的文本
3.  转到 /^TEXT "(.*)-/
4.  将上面捕获的文本替换为步骤 2 中捕获的文本
5.  根据需要重复通过文件向前移动

有谁知道在 VIM 中快速自动化此类任务的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:38:56.417

您可以将以下序列映射到未使用的键（例如 F2），然后按您想要的次数。

```
:map <F2> /^Description "(.*)"<CR>y//e/^TEXT "(.*)-<CR>Pd//e 
```

或者，您可以添加`<F2>`到末尾，以便它将递归运行，直到匹配失败。

```
:map <F2> /^Description "(.*)"<CR>y//e/^TEXT "(.*)-<CR>Pd//e<F2> 
```

让我们分解一下，看看发生了什么。这将移动到您第一次搜索的开头：

```
/^Description "(.*)"<CR> 
```

这会一直拖到您的第一次搜索结束。

```
y//e 
```

这是您的第二次搜索：

```
/^TEXT "(.*)-<CR> 
```

这会将您拉出的内容放在光标之前，向右移动一个字符，然后删除，直到您的第二次搜索结束。

```
Pld//e 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T20:46:04.183

我还没有学会所有新奇的 vim-only 功能。我在 vim 之前学习了 vi，这个解决方案适用于任何 vi-ish 编辑器。也许使用 vim 功能可能会有更好的解决方案。

在这种情况下，我通常会使用该`:map`命令绑定多个键，每个键都执行上述操作。你需要挑选一些你可以暂时不用的钥匙；我经常为此使用`g`和。`v`@Neil Forrester 建议使用功能键，这是个好主意。

现在，您展示了带有指示匹配组的括号的正则表达式模式。（在 vi 或 vim 中，您实际上需要在每个括号之前放置一个反斜杠以使其“具有魔力”；请参阅文档。）但是，对于此解决方案，我将改为使用`f`命令，该命令 (f) 找到指定的特点; 和/或`t`命令，它会跳过一个字符。 `f`跳到一个字符，在`t`一个字符之前跳转。因此，`f"`我们可以跳转到字符串的第一个双引号，然后使用`t"`我们可以跳转到第二个双引号之前。所以，序列`f"lyt"`会找到第一个双引号，向右移动一个字符，然后将所有内容拉到下一个双引号。但是，让我们将抽出的文本存储到 26 个命名缓冲区之一中；让我们只使用缓冲区“a”：`f"l"ayt"` 这有点令人困惑，因为我们必须使用`"a`来引用命名缓冲区“a”，但我们还有很多其他`"`字符需要查找。

此外，在“地图”中，您可能需要记录 Enter 键的击键。您这样做的方法是按 Ctrl+V，然后按 Enter 键。这将显示为`^M`。在我下面的代码中，如果您看到`^M`它并不意味着实际`^`后跟实际`M`，而是表示表示 Enter 键的单个键。

所以现在，我们可以进行两个键映射。让我们绑定`v`执行步骤 1 和 2，以及`g`执行步骤 3 和 4。

```
:map v /^Description "/^Mf"l"ayt"

:map g /^TEXT "/^Mf"ldt""aP 
```

不要忘记，使用 Ctrl+V 和 Enter 而不是实际输入 ^M，因此您不能只复制/粘贴以上内容而不进行编辑。

现在，使用`v`键执行第 1 步和第 2 步，使用 键执行第`g`3 步和第 4 步。通过交替敲击这两个键，您可以快速完成很多操作。

也可能有一种方法可以通过在 vim 中使用脚本来做到这一点，但另一方面，如果你想编写脚本，你可能只想编写一个简短的 Python 脚本（或你最喜欢的语言）。上面的两个关键宏确实提供了一种在 vim 中执行此类操作的快速方法。

vim 具有某种功能，可以在您键入时记录键，我认为可以使用它来快速创建这种宏。

# java - 致命异常

> ID：10806152
> 
> 赞同：1
> 
> 时间：2012-05-29T20:21:33.737
> 
> 标签：java, android, string, exception

我是 Android 的 Java 编程新手。这是我用来开发应用程序的第一种语言。我在我的应用程序上遇到的问题是：

它有 4 个文本字段 (editText) 和两个按钮 (Button)。该应用程序从 editText 获取数据，将其转换为字符串，然后将其转换为 double 以计算结果。问题是，当我按下“计算”按钮时，如果至少有一个文本字段为空，应用程序就会崩溃。

================================================

这是LogCat：

```
05-29 19:00:13.885: D/dalvikvm(279): GC_EXTERNAL_ALLOC freed 750 objects / 55088 bytes in 60ms
05-29 19:10:26.747: D/AndroidRuntime(279): Shutting down VM
05-29 19:10:26.747: W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-29 19:10:26.774: E/AndroidRuntime(279): FATAL EXCEPTION: main
05-29 19:10:26.774: E/AndroidRuntime(279): java.lang.NumberFormatException: 
05-29 19:10:26.774: E/AndroidRuntime(279):  at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:267)
05-29 19:10:26.774: E/AndroidRuntime(279):  at java.lang.Double.parseDouble(Double.java:287)
05-29 19:10:26.774: E/AndroidRuntime(279):  at mais.vantagem.yep.MaisVantagemActivity.onClick(MaisVantagemActivity.java:93)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.view.View.performClick(View.java:2408)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.view.View$PerformClick.run(View.java:8816)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.os.Handler.handleCallback(Handler.java:587)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
05-29 19:10:26.774: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-29 19:10:26.774: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 19:10:26.774: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
05-29 19:10:26.774: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-29 19:10:26.774: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-29 19:10:26.774: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method) 
```

================================================

======================

解决方案：

刚刚使用`StringName.equals("")`所有实例解决了这个问题。

如你看到的：

```
if(quantidadeAString.equals("") || quantidadeBString.equals("") || valorAString.equals("") || valorBString.equals("")){
                    resultado.setText("Valores Inválidos");
                }

                else {
                double qtdANum = Double.parseDouble(quantidadeAString);
                double qtdBNum = Double.parseDouble(quantidadeBString);
                double valorANum = Double.parseDouble(valorAString);
                double valorBNum = Double.parseDouble(valorBString);
} 
```

感谢大家的帮助和想法，让它发挥作用。非常感谢！

很快我会在这里提出更多问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:23:37.937

在尝试从字符串计算/解析为数字之前，您应该检查是否有一个文本字段为空或 null。

就那么简单 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:31:38.780

您可以在计算之前检查edittext是否为空或为空，并使用try/catch作为：

```
edittext=(EditText)findViewById(R.id.dttxt);
    if ((edittext.getText().toString().trim().getLength() == 0) && ("").equals(edittext.getText().toString().trim())){

    try{

        //Calculate here

        }catch(NumberFormatException ex)
       {
       }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:23:42.397

您正在尝试将非浮动字符串转换为浮动。尝试使用 try{} catch{} 块来捕获异常并防止崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T20:25:51.467

您正在尝试将空字符串传递给 parseDouble。正如错误中解释的那样，这会引发“NumberFormatException”，因为解析器无法理解它。

您需要在 try catch 块中包围对 parseDouble 的调用：

```
void yourMethod() {
    String s = ... get string from text field ...

    double d;
    try {
        d = Double.parseDouble(s);
    catch (NumberFormatException e) {
        // Something went wrong...
    }
} 
```

如果“出现问题”，您可以放弃计算或以某种方式通知用户他们需要传递一个值等。

此解决方案还可以防止用户在文本字段中放置非数字垃圾，例如字母和符号。

# html - 导航格式 CSS3

> ID：10806153
> 
> 赞同：0
> 
> 时间：2012-05-29T20:21:33.867
> 
> 标签：html, layout, css, navigation

我正在尝试重现以下导航菜单，但在按钮的布局和间距方面存在一些问题。

我也可以使用 Composer 按钮将图标设置为背景图像吗？

**原来的：**

![在此处输入图像描述](../Images/981d60786a23bcf673c9f1bc64a0bd61.png)

**我的尝试：**

![在此处输入图像描述](../Images/f1a9534ac31c095e1e63dd371aacf757.png)

**HTML：**

```
<div class="options">
                <nav class="mainOptions">
                    <ul>
                        <li><a class="composer" href="#">Composer</a></li>
                        <li><a href="#">Address Books</a></li>
                        <li class="active"><a href="#" target="_self" title="View Messages Scheduled for Future Delivery">Scheduled Messages</a></li>
                        <li><a href="#" target="_self" title="Message Templates for you or your organisation">Templates</a></li>
                    </ul>
            </nav> 
```

**CSS：**

```
.options{
    width:100%;
    height:50px;
}
.mainOptions{
    float:left;
    margin:0 15px 0 20px;
    color:#fff;
    width:700px;
    height:50px;
}
.mainOptions a.composer{
    width:50px;
    height:40px;
    color:#fff;
    background: #184c82; /* Old browsers */
    background: -moz-linear-gradient(top,  #184c82 0%, #022243 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#184c82), color-stop(100%,#022243)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #184c82 0%,#022243 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #184c82 0%,#022243 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #184c82 0%,#022243 100%); /* IE10+ */
    background: linear-gradient(top,  #184c82 0%,#022243 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#184c82', endColorstr='#022243',GradientType=0 ); /* IE6-9 */
}
.mainOptions .composerIcon{
    display:inline-block;
    width:14px;
    height:14px;
    background:url('../images/composer.png') no-repeat -96px -72px;
}
.mainOptions ul li{
    display:inline-block;
    padding:4px 10px 4px;
    border-radius:4px;
}
.mainOptions li a{
    text-decoration:none;
    font-size:13px;
    line-height:18px;
    color:#184C82;
}
.mainOptions li{
    width:140px;
    text-align:center;
}
.mainOptions li.active{
    background-color:#7E98B3;
    color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:54:42.317

这是我根据你所拥有的所做的。几乎看起来 Composer 按钮有不同的字体，但我并不肯定。只需将图像添加到 Composer 按钮中，然后它就非常接近了。

[http://jsfiddle.net/hhKah/1/](http://jsfiddle.net/hhKah/1/)

# android - 膨胀布局时出现 OutOfMemoryError

> ID：10806154
> 
> 赞同：5
> 
> 时间：2012-05-29T20:21:45.737
> 
> 标签：android, out-of-memory

我一直在我的开发者控制台中看到这个内存不足错误，我不知道为什么

日志：

```
android.view.InflateException: Binary XML file line #52: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:212)
at android.app.Dialog.setContentView(Dialog.java:421)
at ecm2.android.MessageDialog.PopUpMessage(MessageDialog.java:90)
at ecm2.android.MainActivity.PopMessage(MainActivity.java:1830)
at ecm2.android.MainActivity$10.onItemClick(MainActivity.java:1355)
at android.widget.AdapterView.performItemClick(AdapterView.java:284)
at android.widget.ListView.performItemClick(ListView.java:3513)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3703)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
... 24 more
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
at android.content.res.Resources.loadDrawable(Resources.java:1709)
at android.content.res.Resources.getDrawable(Resources.java:581)
at android.widget.ScrollView.setOverScrollMode(ScrollView.java:1404)
at android.view.View.<init>(View.java:1879)
at android.view.View.<init>(View.java:1921)
at android.view.ViewGroup.<init>(ViewGroup.java:292)
at android.widget.FrameLayout.<init>(FrameLayout.java:88)
at android.widget.ScrollView.<init>(ScrollView.java:145)
at android.widget.ScrollView.<init>(ScrollView.java:141) 
```

这是我的布局 XML

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_root"              
android:orientation="vertical"
android:layout_height="match_parent"
android:padding="2dip" android:paddingTop="2dip" android:layout_width="fill_parent">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="match_parent"
    android:padding="0dip" android:layout_width="fill_parent">

    <RelativeLayout
        android:id="@+id/contentLayout2" 
        android:orientation="vertical" 
        android:padding="0dip" 
        android:layout_height="wrap_content"
        android:layout_gravity="top|left"
        android:background="#000000"
        android:layout_weight="0" android:layout_width="fill_parent">   

        <ImageView 
            android:id="@+id/imgIcon" 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content"
            android:layout_gravity="top|left" android:contentDescription="@string/desc">
        </ImageView>

        <TextView 
            android:layout_height="wrap_content" 
            android:text="" 
            android:id="@+id/txtDialogHeader" 
            android:layout_width="match_parent" 
            android:textStyle="bold" 
            android:layout_toRightOf="@id/imgIcon"
            android:paddingLeft="5dip" android:textColor="#ff2525" android:textSize="18dip">
        </TextView>

        <TextView 
            android:layout_height="wrap_content" 
            android:text="" 
            android:id="@+id/txtDialogTOC" 
            android:layout_width="match_parent" 
            android:layout_toRightOf="@id/imgIcon"
            android:layout_below="@id/txtDialogHeader"
            android:paddingLeft="5dip" android:textSize="19dip" android:textStyle="bold">
        </TextView>

    </RelativeLayout>

    <ScrollView    
        android:id="@+id/scrollMessageFrame"  
        android:layout_height="match_parent" 
        android:padding="0dip"
        android:background="#AA0000"
        android:layout_weight="1" android:layout_width="fill_parent">

        <TextView 
            android:layout_height="wrap_content" 
            android:layout_width="match_parent" 
            android:text="" 
            android:id="@+id/lblMessage"  
            android:padding="5dip"
            android:background="#000000"
            android:minHeight="140dip" android:textColor="#f2f2f2" android:textSize="20dip">
        </TextView>

    </ScrollView> 

    <RelativeLayout
        android:id="@+id/contentLayout3" 
        android:orientation="vertical" 
        android:background="#000000" 
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal" android:gravity="center_horizontal" android:layout_width="match_parent">

        <ImageButton
            android:id="@+id/cmdResponding"
            android:layout_width="62dip"
            android:layout_height="62dip"
            android:layout_marginRight="10dip"
            android:contentDescription="@string/desc"
            android:src="@drawable/responding_ref" android:background="@drawable/responding_up" android:layout_marginTop="5dip" android:layout_marginLeft="5dip">
</ImageButton>
        <ImageButton android:id="@+id/cmdDeclining" android:src="@drawable/declining_ref" android:background="@drawable/declining_up" android:layout_alignTop="@+id/cmdResponding" android:layout_alignBottom="@+id/cmdResponding" android:layout_height="62dip" android:layout_width="62dip" android:layout_marginLeft="3dip" android:layout_toRightOf="@+id/cmdResponding" android:layout_marginRight="10dip" android:contentDescription="@string/desc"></ImageButton>

        <ImageButton
            android:id="@+id/cmdChiefList"
            android:layout_width="62dip"
            android:layout_height="62dip"
            android:layout_toRightOf="@+id/cmdDeclining" android:background="@drawable/chief_up" android:layout_marginRight="10dip" android:src="@drawable/chief_ref" android:contentDescription="@string/desc" android:layout_marginTop="5dip" android:layout_marginLeft="6dip"/>

        <ImageButton android:id="@+id/cmdMapping" android:background="@drawable/globe_up" android:src="@drawable/mapping_ref" android:layout_height="60dip" android:layout_width="60dip" android:layout_marginLeft="2dip" android:layout_toRightOf="@+id/cmdChiefList" android:layout_marginTop="5dip" android:contentDescription="@string/desc"></ImageButton>

    </RelativeLayout>

</LinearLayout>

<Button 
    android:text="" 
    android:textSize="16dip"
    android:layout_height="40dip" 
    android:layout_width="40dip" 
    android:id="@+id/cmdExit" 
    android:background="@drawable/closepopup"
    android:layout_gravity="top|right" android:contentDescription="@string/desc">
</Button>

</FrameLayout> 
```

错误所在的行位于`setContentView(r.layout.mylayout)`. 此布局中没有大图像，大多数是`imagebuttons`总共 6 个小图像`(biggest image is 90x90)`和一堆文本`scrollview`。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:34:03.493

“滚动视图中的一堆文本”将生成一个巨大的图像，即使一次只有一小部分文本是可见的，这要归功于滚动视图。

尝试确定文本的哪一部分将是可见的，并仅处理该部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:45:18.527

您的布局看起来很复杂。尝试用一个 . 替换所有不同类型的布局`RelativeLayout`。

# python - Python 文件类型

> ID：10806155
> 
> 赞同：3
> 
> 时间：2012-05-29T20:21:53.867
> 
> 标签：python

请问，有人知道 Python 上的 function() 读取用 open() 函数打开的文件，然后返回文件的文件类型吗？

例如：ASCII 文本、.TAR 文件、.ZIP 文件、长文本文件等。

我可以使用子进程模块中的 POPEN 并调用 Linux 的“文件”程序来做到这一点。

但我需要使用 Python 函数来执行此操作，因为该脚本将在 Windows 和 Linux 上运行。

有人知道解决方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:27:57.837

请参阅以下代码：

```
python -c 'import mimetypes; print(mimetypes.guess_type("/tmp/l.py", strict=True))'
('text/x-python', None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:26:18.997

试试[mimetypes](http://docs.python.org/library/mimetypes.html)模块。

mimetypes 模块在文件名或 URL 和与文件扩展名关联的 MIME 类型之间进行转换。提供从文件名到 MIME 类型以及从 MIME 类型到文件扩展名的转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T20:27:59.763

您不能在打开之前事先检查扩展名吗？任何此类方法的问题在于，将有不同的方法来确定每种类型的文件。例如，gzip 文件可能有也可能没有标题。如果没有标头，您将无法真正知道文件是否经过 gzip 压缩，除非尝试解压缩它。我认为您必须有几个子方法，每个子方法都知道如何查找特定的文件类型。例如，

```
is_jpeg()
is_tar()
is_gzip()
is_zip()
is_plain()
is_gif
is_fill_in_the_blank() 
```

然后打电话给

```
get_filetype(fd):
    if is_jpeg(fd):
        return "jpg"
    elif is_tar(fd):
        return "tar"
    """ etc """ 
```

例子：

```
def is_png(fd):
    return fd[:4] == '\x89PNG'

def is_jpeg(fd):
    return fd[:3] == '\xFF\xD8\xFF'

def is_tar(fd):
    """examine header bytes, or just try to do it"""
    # check if timestamp is valid
    fd[136:147] == 'a valid timestamp'
    fd[156:157] in ('0', '1', '2')
    # etc

    from tarfile import TarFile, TarError
    from StringIO import StringIO
    io = StringIO(fd)
    try:
        tf = TarFile(fileobj=io)
        return True
    except TarError:
        return False

def is_gzip(fd):
    import zlib
    from StringIO import StringIO
    io = StringIO(fd)
    for i in range(-15, 16):
        try:
            dec = zlib.uncompress(io, i)
            return True
        except:
            pass
    return False 
```

您可以参考特定的标头字节位置并为这些位置编写公式：

[http://en.wikipedia.org/wiki/Zip_(file_format](http://en.wikipedia.org/wiki/Zip_(file_format) )
[http://www.gzip.org/zlib/rfc-gzip.html](http://www.gzip.org/zlib/rfc-gzip.html)
[http://en.wikipedia.org/wiki/JPEG](http://en.wikipedia.org/wiki/JPEG)
[http:// en.wikipedia.org/wiki/Gif](http://en.wikipedia.org/wiki/Gif)
[http://en.wikipedia.org/wiki/Portable_Network_Graphics](http://en.wikipedia.org/wiki/Portable_Network_Graphics)
[http://en.wikipedia.org/wiki/Tar_(file_format](http://en.wikipedia.org/wiki/Tar_(file_format) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T20:27:21.663

[os.path](http://docs.python.org/library/os.path.html)你只是在寻找扩展名。

使用 splitext（路径）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T12:19:04.450

只需安装“Windows 文件”： http: [//gnuwin32.sourceforge.net/packages/file.htm](http://gnuwin32.sourceforge.net/packages/file.htm) - 下载“完整包，源除外”。不要忘记将“文件”路径从 /usr/bin/file 更改为安装，例如 C:/"Program Files (x86)"/GnuWin32/bin/file

我已经将它用于基于 Debian 的 Django 项目并在 Windows 上实现了它，只是为了检查它是否可行（经过一番麻烦后它确实可行:-)）。

# asp.net - 如何在gridview更新中设置日期

> ID：10806156
> 
> 赞同：2
> 
> 时间：2012-05-29T20:21:55.550
> 
> 标签：asp.net, .net, vb.net, gridview

我有这个问题。使用 Web Developer Express 2010 的 VB 代码

使用来自访问的数据源。我无法从一个gridview（调用GW）中选择和更新...我需要始终设置用户更新信息的日期。你是怎么做到的？我尝试了几个想法。通过gridview列日期中的所有空值，设置为当前系统日期..不工作4我。然后使用 true 更新过程同样的问题`DefaultValue="<%= DateTime.Now.ToString() %>"`

请问有什么想法吗？提前谢谢.. BR

```
`UpdateCommand="UPDATE [partes] SET [ESTATU] = ?,[SCONF] = ?, [SNOTES] = ?, [CONFDAT] = ?, [DCREA] = ?, [ASN] = ?, [ASNDATE] = ? WHERE [ID] = ?">

        <UpdateParameters>
            <asp:Parameter Name="ESTATU" />
            <asp:Parameter Name="SCONF" Type="String" />
            <asp:Parameter Name="SNOTES" Type="String" />
            <asp:Parameter Name="CONFDAT" Type="DateTime" />
            <asp:Parameter Name="DCREA" Type="DateTime" DefaultValue="<%= DateTime.Now.ToString() %>" />
            <asp:Parameter Name="ASN" Type="String" />
            <asp:Parameter Name="ASNDATE" Type="DateTime" />
            <asp:Parameter Name="original_ID" Type="Int32" />
        </UpdateParameters>` 
```

这是“/”应用程序中的错误服务器错误。

字符串未被识别为有效的日期时间。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.FormatException：字符串未被识别为有效的 DateTime。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:08:42.600

有时问题是您的文化信息。当您的应用程序需要 DD/MM/YYYY 时，您的 DateTime.ToString() 可能会返回 MM/DD/YYYY。我遇到过几次。例如

```
Your application expects 29/05/2012 and
DateTime.Now() returns 05/29/2012 making Month=29 which is invalid 
```

这是我面临的情况之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:24:58.950

尝试在`_Updating`（或`_Inserting`如果需要）事件中为您正在使用的 ObjectDataSource 或相关数据源控件而不是源设置日期值。下面是一个代码示例，但显然，您需要为*您的*控件生成此事件：

```
Private Sub ObjectDataSource1_Updating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.ObjectDataSourceMethodEventArgs) Handles ObjectDataSource1.Updating

  'Set Update parameters programmatically before calling wired up Update method:
  e.InputParameters.Item("DCREA") = Convert.ToDateTime(DateTime.Now.ToShortTimeString)

End Sub 
```

`DateTime.Now`您可以在适合您需要的对象上调用任何“ToShort/Long”等方法。你也可以`Now.ToString()`像你一样简单地打电话。只是根据您需要的细节提供一些选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T17:22:09.133

你有两个在gridview上只需要两件事应用事件onupdated行我不知道哪个事件支持vb但我可以在asp.net中告诉你你可以这样做

在 gridView 上应用事件，例如：-

```
<asp:GridView ID="GridView1" OnRowUpdating="GridView1_Updating"></asp:GridView>

UpdateCommand="UPDATE [Organizations] SET [ModifyDate] = @ModifyDate

<UpdateParameters>

          <asp:Parameter Name="ModifyDate" Type="DateTime" />
          <asp:Parameter Name="Id" Type="Int32" />
</UpdateParameters>

protected void GridView1_Updating(object sender, GridViewUpdateEventArgs e)
    {
        e.NewValues["ModifyDate"] = DateTime.Now;
    } 
```

我希望这段代码对你有所帮助。

# c# - 将列表选择器项目保存到独立存储？

> ID：10806170
> 
> 赞同：0
> 
> 时间：2012-05-29T20:22:49.590
> 
> 标签：c#, windows-phone-7, isolatedstorage, listpicker

我的设置页面中有一个城市列表。我希望用户选择一个城市，完成后，我希望将不同的设置保存在独立的存储中。我的列表：

```
List<Cities> source = new List<Cities>();
source.Add(new Cities() { Name = "Asker", Latitude = "59.83734", Longitude = "10.43595", Datatable = "AskerTable.xml" });
source.Add(new Cities() { Name = "Arendal", Latitude = "58.46151", Longitude = "8.77253", Datatable = "ArendalTable.xml" }); 
```

如何将城市名称、纬度和经度以及表格名称写入独立存储，以便在主页中使用？我对用户更改时发生的事情的编程已经走了多远：

```
 void listPicker_SelectionChanged(object sender, SelectionChangedEventArgs e) 
    { 
    var appStorage = IsolatedStorageFile.GetUserStoreForApplication();
    string fileName="settings.txt";

 using (var file = appStorage.OpenFile(fileName, System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.Write))
    {
         using (var writer = new StreamWriter(file))
               {
                  writer.Write(listPicker.SelectedItems.);
                }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:35:27.883

You could serialize the list of objects `List<Cities>` via some serialization format (Xml,Json, etc). Then write it to the stream. Then De-serialize it on the way back out when you need it. I don't know what type the `listPicker.SelectedItems` is but if its just `List<Cities>` that would work...

# php - sqllite PDO 查询在使用 IN 运算符的查询时失败

> ID：10806172
> 
> 赞同：1
> 
> 时间：2012-05-29T20:22:58.497
> 
> 标签：php, sqlite, pdo

我的 PHP 是 5.2.13

phpInfo() 显示：

PECL 模块版本 1.0.1 $Id: pdo_sqlite.c 293036 2010-01-03 09:23:27Z sebastian $

SQLite 库 3.3.7 未定义

以下查询运行没有任何错误

```
$stmt = $dbh->query('SELECT * FROM Przepis WHERE rodzajPrzepisu = 1'); 
```

但是，如果我将其更改为

```
$stmt = $dbh->query('SELECT * FROM Przepis WHERE rodzajPrzepisu IN (1, 2)'); 
```

我收到以下错误：

> SQLSTATE[HY000]：一般错误：14 无法打开数据库文件

请指出我做错了什么，或者我正在使用的 sqlite 驱动程序中有一个塞子？

亲切的问候克拉

# ios - 如何缩小屏幕截图以适应较小的视图或按钮？

> ID：10806174
> 
> 赞同：0
> 
> 时间：2012-05-29T20:23:00.510
> 
> 标签：ios

我有一些 .png，它们是 iPhone 的屏幕截图。

我想在 UIImageView 和按钮中显示它们，如何缩小它们以使其适合视图/按钮的大小，但所有内容仍然可见。

我目前正在做这样的事情：

```
 view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"screenshot.png"]];
    view.frame = CGRectMake(0.0f, 0.0f, 200, 200);
    view.clipsToBounds = YES; 
```

或者

```
UIImage *image = [UIImage imageNamed:@"carouselPage.png"];
button = [UIButton buttonWithType:UIButtonTypeCustom];
button.bounds = CGRectMake(0.0f, 0.0f, 200, 200);
button.clipsToBounds = YES; 
```

如果我使用其他 .png（更小），那么它们就会出现，但如果我使用 screenshot.png（通过 Xcode 的 Organizer 截图功能获得），则什么都不会出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:33:19.937

您需要设置图像的缩放比例以确保它全部显示并适合视图

```
view.contentMode = UIViewContentModeScaleAspectFit; 
```

我假设您仍然应该看到 screenshot.png，但只是不正确。

# php - 使用 Symfony2 的自定义注释的简单示例

> ID：10806176
> 
> 赞同：10
> 
> 时间：2012-05-29T20:23:03.523
> 
> 标签：php, symfony, doctrine, annotations

我熟悉有关自定义注释的[Doctrine Documentation](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html#annotation-classes)，但我正在寻找一个简单的示例。

当用户创建或更新小部件时，我想使用注释（用户、日期、操作等）在审计表中创建一个条目。

你能给我举一个简单的例子吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T19:42:49.660

[这](http://php-and-symfony.matthiasnoback.nl/2011/12/symfony2-doctrine-common-creating-powerful-annotations/ "Symfony2 & Doctrine Common：创建强大的注释")是使用 Symfony2 和 Doctrine Common 来创建强大注释的一个很好的例子。

# c# - 是否有用于分布式密钥生成的 GUID 替代方案？

> ID：10806180
> 
> 赞同：10
> 
> 时间：2012-05-29T20:23:15.470
> 
> 标签：c#, .net, database, guid, crc

我的情况是：

1.  我有许多使用本地数据库的客户端应用程序（MS SQL，MS Access - 抱歉，这是企业系统，我必须支持旧版......）
2.  我不知道客户之间的任何趋势——现在大约是 10 个，但一年可能会达到 100 个。
3.  这些表中的数据进入我的中央服务器并放入一个公用表中
4.  有时现有（客户端）数据会更改 - 我必须执行更新/删除操作
5.  我不想使用 GUID（.NET 类型`System.Guid`）——很难在 MS Access 上简单地实现和支持。此外，这[对性能不利](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)
6.  我需要在那个公用表上快速搜索，所以使用`int`或`long int`作为 PK会很好

所以，我想要：

1.  避免碰撞的独特东西（它将用作PK）
2.  它应该是`int`或`long int`
3.  在插入之前必须是可分配的客户端

我目前的解决方案是从以下串联中获取 CRC：

*   进程ID
*   简历日期
*   用户名（字符串、硬件\用户相关数据）
*   日期时间.Now (UNC)

目前它对我有用，但也许有更好的方法来实现我的目标？您有任何意见、建议、示例或经验吗？

更新：客户端和服务器之间的同步是周期性动作，因此每天可以发生 2-3 次（它是配置变量）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:14:58.100

如果来自多个表的数据进入一个中心表，并且您需要解决对这些记录的更改，那么我的建议是使用两列作为中心表的 PK。一列可能是来自客户端的身份字段（非唯一），一列可能是您分配给客户端应用程序的客户端代码（非唯一）。来自 ID 和客户端代码的聚合将是您的 PK

此解决方案的优点是不需要对客户端应用程序进行任何更改（也许一些身份代码发送到您的中央服务器，您可以在其中使用一些安全措施）当然，如果客户群增长（希望）您需要保持分配给每个客户端的集中代码表。在中央表上的搜索应该不是问题，因为您使用的是两个数字（或身份代码的短字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:28:44.037

您始终可以只添加一个数字的 PK 列，并且（取决于您使用的数据库）设置一个序列或身份来处理它。

您还可以在当前拥有的多个列上创建索引，以帮助加快搜索速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:40:05.977

您可以实现一个[键表](http://www.mindscapehq.com/documentation/lightspeed/Controlling-the-Database-Mapping/Identity-Generation#_Toc297195003)。

基本上，键表只是一个有一条记录的表：下一个可用的整数键。当您的程序需要生成密钥时，它会递增密钥表中的密钥。它现在保留了以前可用的密钥。它可以将该密钥分配给它喜欢的任何东西，并确保它不会与以相同方式拉出的任何其他密钥冲突。这就是[LightSpeed ORM](http://www.mindscapehq.com/products/lightspeed)默认的工作方式。与使用内置标识列相比，它的好处是您可以在将项目 ID 插入数据库之前分配它们，因此可以在一次插入所有项目之前定义项目关系。

如果您担心冲突，您可以在读取和递增下一个可用密钥之前锁定/解锁密钥表。如果您知道一次需要插入多个项目，则可以将键增加那么多而不是多次增加一个。如果您猜测在您的应用程序的未来某个时候您将需要一定数量的键，您可以保留一个顺序键块，并在内部跟踪它们。如果您不全部分配密钥，这可能会浪费密钥，但可以防止对数据库的过度调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T21:07:34.253

只需使用 int64 键，在客户端使用从 0 开始的负递增数字（从 -1 开始），然后在同步后在服务器端使用正递增数字，当您将数据从客户端同步到服务器时，您只需返回新的正服务器端号码。我相信更新记录上的键很简单，如果不是那么只需删除旧的并插入一个带有值的新键。

这是拥有客户端唯一密钥和可更新数据的一种非常简单的方法，而无需真正担心由您的解决方案引起的问题，这些问题充其量只是随机冲突，具体取决于您的 crc 检查的大小。

如果您坚决反对使用 GUID（ System.Guid.NewGuid() 的[MSDN](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)表明 MAC 地址作为值的一部分并使其高度唯一），那么您的答案要么是复合键（而不是基于在复合键的 crc 上！）；请不要误以为您的 CRC 解决方案比 GUID 更不可能发生冲突，除非您的熵比 128 位 GUID 多，否则您只会为自己做更多的工作。

正如我所指出的，您可以使用 int64 空间的整个负谱来识别未同步的、因此是临时的唯一 ID 号。然后，在写入中央服务器时，您甚至可以获得聚集索引的额外潜在好处。

因此，假设您的客户端数据键如下所示：

```
-5, -4, 76, 78, 79 
```

这意味着需要将 -4 和 -5 插入到中心位置，然后将它们的 id 更新为新值（可能在本例`80`中`81`）。

如果您想进一步了解 GUID 的独特性和冲突的可能性，我建议您阅读 Eric Lippert[最近](http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx)关于该[主题](http://blogs.msdn.com/b/ericlippert/archive/2012/05/07/guid-guide-part-three.aspx)的博客[文章](http://blogs.msdn.com/b/ericlippert/archive/2012/04/30/guid-guide-part-two.aspx)。至于访问端，您只需 .ToString() 并将它们转换为文本键。但由于我提供了适用于 int / int64 空间的解决方案，因此不需要。

# java - 关于基于 java 的 Spring 配置：如何在我的项目中使用我的依赖项之一生成的 bean

> ID：10806187
> 
> 赞同：1
> 
> 时间：2012-05-29T20:23:39.217
> 
> 标签：java, spring, spring-mvc, spring-security, spring-roo

我对使用另一个项目生成的 bean 有疑问。更详细地说：

我有一个项目A如下

```
public A {
public void print()
{
System.out.println("Hello World");
}
} 
```

配置类如下

```
@Configuration
public class AConfig {  
@Bean
public A a()
{
    A bean = new A();
    return A;
}
} 
```

现在我有一个新项目 B，其类如下

```
public B {
A a;
public setA()
{
this.a = a;
}
public static void main(String[] args)  
{ 
System.out.println(a.print());
}
} 
```

B的配置类如下

```
@Configuration
@Import(AConfig.class)
public BConfig
{
@Bean
public B b()
{
B bean = new B();
**b.setA(a());-----------------This is not correct. How can i get Instance of class A NOw????**
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:30:19.153

# 合并`@Configuration`类

如果 bean 紧密耦合，只需将它们放在同一个类中：

```
@Configuration
public class AConfig {  
    @Bean
    public A a() {
        return new A();
    }

    @Bean
    public B b() {
        B b = new B();
        b.setA(a());
        return b;
    }
} 
```

# 注入另一个`@Configuration`类

`@Configuration`class 只是 Spring 中 bean 的一个特例：

```
@Configuration
public class BConfig {  

    @Autowired
    private AConfig aConfig;

    @Bean
    public B b() {
        B b = new B();
        b.setA(aConfig.a());
        return b;
    }
} 
```

# 将依赖项注入`@Configuration`类

```
@Configuration
@Import(AConfig.class)
public class BConfig {  

    @Autowired
    private A a;

    @Bean
    public B b() {
        B b = new B();
        b.setA(a);
        return b;
    }
} 
```

# php - 在 PHP/MYSQL 中复制 stackoverflow 的类似问题？

> ID：10806189
> 
> 赞同：0
> 
> 时间：2012-05-29T20:23:44.390
> 
> 标签：php, mysql

当您在堆栈上创建新问题时，输入标题后，它会为您提供“可能已经有答案的问题”列表。

这正是我需要做的，但在 PHP/MYSQL 中。该应用程序将扩展到数千个，因此请记住它应该能够大规模运行。

因此，例如，当用户输入页面标题时，他们将创建页面（如在 facebook 上），我需要一些东西来针对数据库搜索它并返回类似的标题。

MYSQL LIKE 不行，它需要比这更先进。SOUNDEX 似乎有一些人抱怨它，所以也不确定。

在实践中，它需要知道'&'和'and'的区别，忽略'the'和标点符号以及小错字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:34:01.533

> >The app will be scaled out to thousands so keep in mind it should be able to work on a large scale.
> 
> > in PHP/MYSQL

Divizion by zero :)

You have to use special software for such searches, like [SphinxSearch](http://sphinxsearch.com).

Regarding MySQL solution:

1.  filter the string by removing trashy keywords and symbols

2.  Use [full-text search functions](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:41:19.030

听起来您可以使用全文搜索功能：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

对于客户端，我使用了 jQuery UI 自动完成，效果很好：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# java - Netbeans 更新后无法调试项目

> ID：10806191
> 
> 赞同：0
> 
> 时间：2012-05-29T20:23:47.983
> 
> 标签：java, debugging, netbeans, jaxb, glassfish-3

我最近单击了我的 Nebeans 7.1 安装的通知窗口以自动安装更新。从那以后，我不再能够调试我的项目。项目运行没有问题，但如果我尝试启动调试器，构建会失败并显示以下错误消息：

```
The following error occurred while executing this line:
C:\Users\handy\Documents\NetBeansProjects\heatmap\nbproject\build-impl.xml:814: 
java.lang.NoClassDefFoundError: com/sun/jdi/Bootstrap
    at org.netbeans.api.debugger.jpda.AttachingDICookie.findAttachingConnector(AttachingDICookie.java:250)
    at org.netbeans.api.debugger.jpda.AttachingDICookie.create(AttachingDICookie.java:123)
    at org.netbeans.api.debugger.jpda.JPDADebugger.attach(JPDADebugger.java:280)
    at org.netbeans.modules.debugger.jpda.ant.JPDAConnect$1.run(JPDAConnect.java:228)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1411)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1991)
Caused by: java.lang.ClassNotFoundException: com.sun.jdi.Bootstrap starting from ModuleCL@5490fb5b[org.netbeans.api.debugger.jpda] with possible defining loaders null and declared parents [ModuleCL@21d96c05[org.openide.loaders], ModuleCL@1ef62a93[org.netbeans.api.debugger], ModuleCL@33600595[org.netbeans.modules.projectapi], ModuleCL@2df2888[org.openide.nodes], org.netbeans.MainImpl$BootClassLoader@7e628e42, ModuleCL@6bcea26e[org.netbeans.modules.parsing.api], ModuleCL@3e473e54[org.netbeans.modules.java.source], ModuleCL@3636417f[org.netbeans.api.java.classpath], ModuleCL@b1364f5[org.netbeans.spi.viewmodel]]
    at org.netbeans.ProxyClassLoader.loadClass(ProxyClassLoader.java:264)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: com.sun.jdi.Bootstrap
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.netbeans.ProxyClassLoader.loadClass(ProxyClassLoader.java:262)
    ... 7 more
BUILD FAILED (total time: 56 seconds) 
```

*build-impl.xml*中引用的行如下：

```
<nbjpdaconnect address="${jpda.address}" host="${jpda.host}" 
               name="${name}" transport="${jpda.transport}"> 
```

似乎无法连接调试器。[Netbeans 论坛中的](http://forums.netbeans.org/topic47053.html)一篇帖子指出将 JAXB 更新到 2.0 版可能是原因。提出了一些变通办法。

有没有真正的解决方案而不是解决方法？我可以回滚 Netbeans 中的某些更新吗？

删除*user-home/.netbeans/7.1*文件夹没有帮助。

系统信息：Netbeans 7.1、JDK 7、Windows 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:25:46.367

我有同样的问题：

*   JDK 7 (1.7.0_04)
*   Netbeans 7.1.2（这是唯一的区别）
*   玻璃鱼 3.1.2
*   在 Windows 7 x64 上

至少这是我看到的第一个错误，但随后出现了许多其他错误。

我安装了 JDK 1.7.0_05、Netbeans 7.1.2 和 Glassfish 3.1.2，删除了我的用户目录中的“.nb*”文件。

我最终决定使用具有不同 JDK、Netbean 和 Glassfish 版本的 Linux 主机，但我遇到了完全相同的问题，但只是在我加载**特定项目**时。

结果是**我使用了一个从 WSDL URL 自动生成 web 服务类的项目**。它生成有效的 WS 类并进行编译，但 IDE 中的几乎所有其他内容都被破坏了。

*解决方法：*

因为我没有整整一周的时间花在这上面，所以我创建了一个单独的 WS 客户端库，构建了 jar，关闭了项目（打开项目足以让 netbeans 行为异常），重新启动 Netbeans 并使用 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:13:09.587

我设法通过从头开始安装 JRE、JDK 和 Netbeans 来解决这个问题。我不会将此称为解决方法，因此如果有比这更优雅的解决方案，请随时发布另一个答案。

但是，因此我将谨慎使用 Netbeans 自动更新功能。

*这是我当前的（工作）配置：*

*   JDK 7 (1.7.0_04)
*   网豆 7.2
*   玻璃鱼 3.1.2

# mysql - MySql 分组一个组

> ID：10806195
> 
> 赞同：1
> 
> 时间：2012-05-29T20:24:15.867
> 
> 标签：mysql, x-cart

我正在尝试找出运行此查询的最佳方法。我基本上需要返回在我们系统中只下过一个订单的客户的“登录”字段列表（登录字段基本上是客户 ID/密钥）。

**我们系统的一些背景...**

客户在同一日期下的多个订单是一个订单的等价物。原因是我们有多个供应商，任何时候有人订购我们的购物车系统都会将该单个订单拆分为多个订单 - 该订单中每个唯一供应商的 1 个订单。

这是我到目前为止提出的基本mysql查询..

```
SELECT  
xcart_orders.login,
COUNT(xcart_orders.login) as c1,
FROM_UNIXTIME(xcart_orders.date, '%Y-%m-%d') as d1

 FROM
xcart_orders

 WHERE
INSTR(xcart_orders.email, "marketplace") <= 0

 GROUP BY
xcart_orders.login,
FROM_UNIXTIME(xcart_orders.date, '%Y-%m-%d')

ORDER BY
xcart_orders.login
ASC 
```

**这是返回的数据示例...**

```
login       c1      d1
01crouse    1   2007-11-30
022336010   2   2009-06-24
022336010   1   2009-08-28
02emzach    1   2011-08-25
02emzach    1   2011-10-18 
```

这给我返回了一个很好的客户列表，每个日期的唯一订单数

问题是 - 现在我需要对这个结果集进行分组，并且只返回在这个结果集中有 1 条唯一记录的客户 - 我不太确定该怎么做

因此，如果您看到上面的示例结果集——我需要从登录列表中返回 01crouse——因为该登录只有 1 条记录，1 个订单，而其他登录有多个订单。我希望这是有道理的 - 如果您有任何问题，请告诉我

**使用 Have 的重要说明**

我被推荐使用：

```
HAVING c1 = 1 
```

不幸的是，Have 不起作用——原因是因为 c1 可以大于 1 才能使情况成立。请记住，它在结果中每天给我一个订单计数 - 因此 - 如果有人在同一天向该订单中的 3 个供应商下 1 个订单，那将导致该天有 3 个订单 - 但是 - 这是他们的一个订单放置 - 这些类型的人将通过使用 HAVING 被排除在外

这就是为什么我需要对结果集进行分组然后对结果集进行计数的原因-例如，我将通过登录字段对结果集执行另一个组，然后对登录进行计数-在此计数上返回 1 的任何记录都是准确的-问题是我不确定如何对这个结果集进行分组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:26:59.757

请参阅[MySQL 的 HAVING 子句](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)。您已经按登录名分组，因此您应该可以简单地添加`HAVING COUNT(login) = 1`

如果查询变得更复杂，您始终可以将此查询嵌套在另一个查询中并执行另一个分组，但这样做时不能保证良好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:33:15.247

您可以使用另一个 SELECT（在原始 SELECT 之外）来执行此操作，如下所示：

```
SELECT login, c1, d1, count(login) as c2 
FROM (...YOUR SELECT...) as orig
GROUP BY login
HAVING c2 = 1 
```

这将按登录名对您的原始 SELECT 进行分组，然后仅显示那些仅出现一次的登录名，因此仅显示仅在一天内购物的用户。

# c++ - 覆盖具有多个签名的 C++ 虚拟方法

> ID：10806196
> 
> 赞同：2
> 
> 时间：2012-05-29T20:24:23.320
> 
> 标签：c++, g++, virtual-functions

我有一个 C++ 基类，它声明了一个具有两个不同签名的虚拟方法。

一旦我覆盖派生类中的一个虚拟方法签名，编译器（g++ 4.6.3 和 g++ 4.7）就不再能够将该方法与同一派生类中的第二个签名匹配。

如果我只将 SPECIALIZE_ONEARG 定义为 1，下面的示例代码将无法编译。为了让它再次编译，我还必须将 PASSTHRU_TWOARG 定义为 1。由于效率和真实类，使用“PASSTHRU”方法并不理想层次结构要深得多，我不希望在对基类的调用中硬连线。

这种行为是 g++ 特有的，还是我只是想做一些 C++ 不支持的事情？

```
#define SPECIALIZE_ONEARG ( 0 )
#define PASSTHRU_TWOARG   ( 0 )

class base
{
public:
  virtual int myMethod( char a )         { return 1; }
  virtual int myMethod( char a, int b )  { return 2; }
};

class derived : public base
{
public:
#if SPECIALIZE_ONEARG
  virtual int myMethod( char a )         { return 3; }
#endif // SPECIALIZE_ONEARG

#if PASSTHRU_TWOARG
  virtual int myMethod( char a, int b )  { return base::myMethod( a, b ); }
#endif // PASSTHRU_TWOARG
};

int main( int argc, char* argv[])
{
  derived myObj;

  return myObj.myMethod( 'a' ) * 10 + myObj.myMethod( 'b', 0 );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:27:22.600

您的定义*隐藏*了基类的定义。为了使该定义在您的派生范围内可见，您需要`using base::myMethod`.

```
class derived : public base
{
public:
  using base::myMethod; // <--- here

#if SPECIALIZE_ONEARG
  virtual int myMethod( char a )         { return 3; }
#endif // SPECIALIZE_ONEARG

#if PASSTHRU_TWOARG
  virtual int myMethod( char a, int b )  { return base::myMethod( a, b ); }
#endif // PASSTHRU_TWOARG
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:27:06.360

在派生类中，添加

```
using base::myMethod; 
```

# neo4j - 使用 Tinkerpop Frames，无论标签如何，我如何获取 Vertex 的所有传入或传出边缘？

> ID：10806198
> 
> 赞同：0
> 
> 时间：2012-05-29T20:24:25.143
> 
> 标签：neo4j, gremlin

Tinkerpop Frames wiki 说，可以在下面给出一个顶点的注释，以获取给定人“认识”的所有人。但是，无论连接他们的边缘是什么标签，我如何找到与给定人相关的所有人？这可能吗？

```
 @Adjacency(label="knows")
 public Iterable<Person> getKnowsPeople(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:38:12.627

你不能不修改底层框架。在*AdjacencyAnnotationHandler.processVertex*方法中，您会发现 Frames 只是调用了目标蓝图 Vertex 的 getVertices() 方法：

```
if (ClassUtilities.isGetMethod(method)) {
   final FramedVertexIterable r = new FramedVertexIterable(framedGraph, 

   vertex.getVertices(
      adjacency.direction(), adjacency.label()), 
      ClassUtilities.getGenericClass(method));

    if (ClassUtilities.returnsIterable(method)) {
      return r;
    } else {
      return r.iterator().hasNext() ? r.iterator().next() : null;
    }
} 
```

如果您需要您请求的功能，请修改此语句以返回所有顶点或使用一些约定（如标签值中的星号）来执行一些基于表达式的绑定。

[https://github.com/tinkerpop/frames/blob/master/src/main/java/com/tinkerpop/frames/annotations/AdjacencyAnnotationHandler.java](https://github.com/tinkerpop/frames/blob/master/src/main/java/com/tinkerpop/frames/annotations/AdjacencyAnnotationHandler.java)

# android - 使用 PreferenceActivity 配置小部件？

> ID：10806213
> 
> 赞同：0
> 
> 时间：2012-05-29T20:25:27.010
> 
> 标签：android, widget, android-preferences, configure, preferenceactivity

这可能是一个菜鸟问题，我不确定，抱歉，如果是，但我做了很多搜索无济于事。

目前，我有一个小部件，当添加到主屏幕时会打开一个 android:configure 活动。一切都很好，这就是 dev.android 网站显示的方式。

不过，我最近偶然发现了 PreferenceActivity，它似乎非常适合我的需要。我有一个简单的preferences.xml，但我被困在后面的java上。我该如何准确地实现这一点？我应该完全忽略 android:configure 并摆脱它吗？我应该与配置活动并排实现 PreferenceActivity 吗？

我看过很多 PreferenceActivity 教程，但当然没有一个以使用小部件为中心，所以我迷路了。我希望它以与配置活动相同的方式工作。当您将小部件添加到主屏幕时，它会弹出，以便用户可以在放置之前更改内容。

我真的很感激这方面的任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:51:22.993

当我遇到你的问题时，我也在寻找同样的事情。我进一步发现，这是我的发现：虽然您可以将preferenceActivity 设置为您的小部件的配置活动，但不建议这样做。这背后的原因是，当用户设置多个小部件时，您的小部件更新的每个实例的值都取自 sharedPreferences（通常，这是存储应用程序首选项的地方，也用于保存小部件的首选项） . 现在，由于共享首选项为每个实例保存了相同的所有首选项，因此您的小部件的所有实例的行为和外观都相同。除非您想要它们，否则建议您进行活动并将您的首选项保存在 sharedPreferences 中，widgetId 由首选项连接，

如果您还有其他要说的或任何建议，请分享，因为我将实施此操作。

# c# - Generic HttpHandler（一个 ashx，IHttpHandler 接口）何时可重用？

> ID：10806214
> 
> 赞同：12
> 
> 时间：2012-05-29T20:25:27.107
> 
> 标签：c#, asp.net, .net, .net-4.0, httphandler

我一直在`Ashx`与`jQuery`. 我读过**[msdn](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.isreusable)**，我说的是`IHttpHandler.IsReusable`属性。

> 获取一个值，该值指示另一个请求是否可以使用 IHttpHandler 实例。

他们的“”是什么意思`the IHttpHandler instance.`？他们是否试图让`static`每个人都可以看到和使用它？**它可以被相同的东西**重复使用吗？（查询字符串、cookie 等？）

如果我写这个：

```
public class MyHttpHandler : IHttpHandler
   {
      public void ProcessRequest(HttpContext context)
      {
         context.Response.Write(DateTime.Now.Ticks.ToString());      
      }

      public bool IsReusable
      {
         get { return true; }
      }
   } 
```

似乎每个请求都会获得自己的**最新**`Datetime`值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T20:33:36.463

在您的示例中，您没有管理任何状态。任何人都可以在同一个实例上调用任意`ProcessRequest`多次，他们将获得一个新的 DateTime。

但是如果你这样做了怎么办：

```
private DateTime _dateTime = DateTime.Now;

public void ProcessRequest(HttpContext context)
{
    context.Response.Write(_dateTime);
} 
```

现在，每次实例化处理程序实例后，您都会得到相同的响应。除非 ASP.NET 每次都生成一个新的。

`IsReusable`可以指示您的处理程序类是否管理任何可以在单独的请求之间共享的状态。如果它管理的状态不能共享，那么它就不可能是外部幂等的——甚至可能不是线程安全的。使用相同的输入条件进行调用`ProcessRequest`可能不会导致相同的输出，因为您的特定处理程序实现也有一些实例级变量在确定输出时无法共享。（事实上​​，从技术上讲，您当前的实现就是一个例子）。在这些情况下，实例可能不是“可重用的”——并且 ASP.NET 每次都需要生成一个新实例以确保可预测性。

所以对于你不管理状态的情况，或者你有非常简单的处理程序，其中状态是“明显的”（就像我们这里的例子），`IsResuable`可能看起来毫无意义。但是，如果您有一个非常复杂的处理程序 - 可能确实保留了一些初始化成本高但可以共享的状态 - 您可能希望向 ASP.NET 表明可以重用它以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:36:28.817

很抱歉只发布答案的链接，但对 IsReusable 有很好的解释：

[IsReusable 博客文章](http://foreachbiscuit.wordpress.com/2007/11/01/isreusable-on-the-ihttphandler-interface/)

如果您的代码完全是线程安全的，则基本上将其打开，如果不是，则将其关闭。嗯，这就是我从中收集到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:35:21.083

如果你有一个实例变量，我想你会发现它在许多调用中共享，所以如果你的日期时间设置为实例变量并且你只是在你的 processrequest 中返回它，我认为它会返回相同的值，而如果 isreusable = false 则不会，因为它将创建处理程序的新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:37:11.877

显然，这将处理程序保留在内存中并能够处理多个请求。当设置为 false 时，它​​必须为每个传入请求创建一个新的处理程序实例。

```
public bool IsReusable
{
    get
    {
        return true;
    }
} 
```

# ios - 始终在我的 iOS APP 的 Facebook 对话框中显示验证码

> ID：10806215
> 
> 赞同：1
> 
> 时间：2012-05-29T20:25:33.710
> 
> 标签：ios, facebook, captcha

我正在将 Facebook Api 集成到我的应用程序中。从几天前开始一直工作正常，总是要求我的用户在发布前输入验证码。

有人知道为什么现在会发生吗？

![在此处输入图像描述](../Images/a1b545be80eb0c9281be77ff11bbabe3.png)

为了打开对话框，我使用：

```
[delegate.facebook dialog:@"stream.publish"
                andParams:params
              andDelegate:delegate]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:45:12.267

这几乎肯定与您共享的特定链接有关，这很可能是因为您共享链接的域被报告为垃圾邮件，或者是重定向器或 URL 缩短服务

没有办法阻止它，但如果您要共享指向知名重定向器的链接，不妨尝试将内容托管在您自己的域中

# android - sdcard上的“锁定”文件-？

> ID：10806216
> 
> 赞同：0
> 
> 时间：2012-05-29T20:25:47.447
> 
> 标签：android

Android服务是否有可能操纵某些文件权限，以便没有其他应用程序（即使在root手机上）可以访问sdcard上的这些文件？例如，如果我想在特定时间“锁定”一些文件在 sdcard 上？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:31:39.623

> Android服务是否有可能操纵某些文件权限，以便没有其他应用程序（即使在root手机上）可以访问sdcard上的这些文件？

不，对不起。外部存储对所有人开放，尤其是当外部存储位于 FAT16 格式的 SD 卡上时。

# javascript - Webkit-Transform:Scale 在 HTML5 全屏模式下不起作用（仅限 Chrome）

> ID：10806218
> 
> 赞同：3
> 
> 时间：2012-05-29T20:25:50.397
> 
> 标签：javascript, html, google-chrome, fullscreen

我正在开发一个项目，该项目需要页面根据页面放大所有元素（对于好奇：从 XBMC 皮肤生成 html）。

**缩放在窗口模式下工作** ![](../Images/1dec7117cd8979288baffb778de201ce.png)

**使用 Chrome 全屏模式进行缩放** ![](../Images/89bd636e49c507ced4dff75d58c9654a.png)

**缩放不适用于 HTML5 requestFullScreen（注意黑色空间）** ![](../Images/a8d95afe69e47d29055d6c8dda7de284.png)

现在我遇到的问题是，在 Chrome 中，当您使用全屏链接时，主体不会按比例放大（就像您刚刚一样`View -> Enter FullScreen`。它似乎得到了正确的尺寸，但`-Webkit-Transform: scale(x, y)`似乎没有效果

代码：http: [//jsfiddle.net/rCLxG/](http://jsfiddle.net/rCLxG/)

结果： http: [//fiddle.jshell.net/rCLxG/show/light/](http://fiddle.jshell.net/rCLxG/show/light/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-06T10:22:43.290

我有类似的问题。看起来当你让任何元素全屏时，它的比例被忽略（我也尝试在全屏后设置比例，仍然不起作用）。解决方案是制作额外的包装块，不缩放并将其设置为全屏。

这不起作用，当我制作#fsdiv 全屏时（它没有全屏缩放）：

```
<div id="fsdiv" style="transform:scale(5);transform-origin: left top;">
  Hi there!
</div> 
```

这有效：

```
<div id="fsdiv">
  <div style="transform:scale(5);transform-origin: left top;">
    Hi there!
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:26:21.287

通过使用修复

```
 document.body.webkitRequestFullScreen(); 
```

代替

```
 document.getElementById("MediaCenter").webkitRequestFullScreen(); 
```

看来，当您在元素上使用 webKitRequestFullScreen 时，某些应用于外部元素（如主体）的 CSS 不起作用。找不到有关此行为的任何文档，但如果我发现任何内容，我会更新此答案

# nsnotificationcenter - MPMusicPlayerController：通知太多

> ID：10806221
> 
> 赞同：2
> 
> 时间：2012-05-29T20:25:54.097
> 
> 标签：nsnotificationcenter, mpmusicplayercontroller

我正在使用来自 NSNotificationCenter 的通知来获取 MPMusicPlayerController 通知。

我使用这些通知将视图中的按钮状态从“播放”状态更改为“暂停”状态。

它“工作”，但有时 MPMusicPlayerController（确切地说是 iPodMusicPlayer）没有报告正确的状态，因此我的按钮全部搞砸了，并且不能正确操作。

经过一番调查，我发现在更改当前播放的歌曲时会触发很多通知。

例如：当我选择一首歌曲时，我调用： - stop - setQueueWIthItemCOllection - nowPlayingItem - play

这些电话会发出如此多的通知。停止后，例如在 nowPlayingItem 调用之后，我收到了 2 次 nowPlayingItem 通知... ???

此外，甚至在强制我的按钮相对于它们的“图片”状态而不是 MPMusicPlayerController 播放状态之后，控制器仍然不能反映正确的状态。例如，一首歌曲将在后台播放（我能听到，“播放”图标在 ipad 右上角的电池图标旁边），但 MPMusicPlayerController iPodMusicPlayer 报告状态为“暂停”.. .

有人对此有任何信息或帮助吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:56:01.317

我相信我遇到了同样的问题，并发现我必须做两件事来解决它：

1) 复制传入的 MPMediaItemCollection 的 items 数组并用它创建一个新的 MPMediaItemCollection

2）在播放器（或两者）上设置 nowPlayingItem 或 currentPlaybackTime

一旦我做了这两件事，我从音乐播放器收到的通知就会生成预期的次数，并且它们都有准确的播放状态（反映播放器的实际状态）。

希望这会有所帮助...

```
-(void)setUserMediaItemCollection:(MPMediaItemCollection *)newUserMediaItemCollection
{
    [userMediaItemCollection release];

    //I FOUND YOU MUST COPY THE INCOMING ITEMS TO A NEW COLLECTION
    NSArray *combinedMediaItems = [newUserMediaItemCollection.items copy];
    userMediaItemCollection     = [[MPMediaItemCollection collectionWithItems: (NSArray *) combinedMediaItems] retain];
    [combinedMediaItems release];
    [self.musicPlayer setQueueWithItemCollection:userMediaItemCollection];
    //

    //ALSO FOUND YOU MUST SET EITHER THE NOWPLAYING ITEM OR STARTTIME OR PLAYBACK STATE CAN BE WRONG
    if ([[userMediaItemCollection items] count])
    {
        //MPMediaItem *nowPlayingItem   = [[userMediaItemCollection items] objectAtIndex:0];
        //[self.musicPlayer setNowPlayingItem:nowPlayingItem];
        NSTimeInterval startTime    = 0.0;
        musicPlayer.currentPlaybackTime = startTime;
    }
    //
} 
```

# sql-server-2012 - 无法添加文件权限需要将 SQL Server 2012 文件重新定位到单独的驱动器

> ID：10806225
> 
> 赞同：6
> 
> 时间：2012-05-29T20:26:30.057
> 
> 标签：sql-server-2012, file-permissions

安装新的 SQL Server 2012 实例后，我希望将数据库文件移动到单独的驱动器。当我在目标位置执行File->Properties然后点击Security->Edit->Add->Advanced，选择Location=MachineName，然后点击find，我只看到与分析服务相关的表单：

```
SQLServerMSASUser$MachineName$InstanceName 
```

我认为我真正需要的权限是我可以看到存在于默认 C: 驱动器位置的权限：

```
MSSQL$InstanceName 
```

当我尝试直接输入它时，它无法识别。如果我将目录设置为“Everyone”，然后将数据库移动到那里（使用恢复），它可以工作并显示 mdf 文件的上述权限。当父目录未显示为列表中的可用条目时，如何在父目录上设置该权限。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T19:17:57.070

这是相关的 MSDN 文章：[为数据库引擎访问配置文件系统权限](http://msdn.microsoft.com/en-us/library/jj219062.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-03T19:58:26.667

如果您无法确定所需的正确用户权限（假设您具有管理员权限），这里有两种更简单的方法...

## 方法 1 - 磁盘替换
*（即 SQL Server 数据库文件的驱动器号最终将相同）*

如果您要更换 SQL Server 数据库文件所在的辅助硬盘驱动器（例如更大的硬盘），则特别有用。右键单击 Microsoft SQL Server Management Studio (SSMS) 中的数据库、任务、脱机。

然后只需复制文件并保留其所有权：

*   转到命令提示符（如果在[Windows NT 6.x](http://en.wikipedia.org/wiki/Windows_6#Releases)上，例如 Vista / 7 / 2008，记得右键单击命令提示符并以管理员身份运行）
*   [然后使用](http://support.microsoft.com/kb/323007)：

    ```
    xcopy D:\path\sql1 E:\path\sql2 /E /F /I /V /K /O /X 
    ```

在哪里：

*   `/E`- 复制目录和子目录，包括空目录
*   `/F`- 复制时显示完整的源文件和目标文件
*   `/I`- 如果目标不存在并且复制多个文件，则假定目标是一个目录
*   `/V`- 验证每个新文件
*   `/K`- 保留属性，包括只读的
*   `/O`- 复制文件所有权和 ACL 权限
*   `/X`- 复制文件审核设置（隐含`/O`）

您可能还需要，具体取决于您要迁移的文件：

*   `/C`- 即使发生错误也继续复制
*   `/G`- 允许将加密文件复制到不支持加密的位置
*   `/H`- 复制隐藏和系统文件

更换驱动器并确保驱动器号与以前相同。最后右键单击 SSMS 中的数据库，任务，联机。

## 方法 2 - 将文件移动到另一个磁盘或分区
*（即 SQL Server 数据库文件的驱动器号会改变）*

当您想释放驱动器/分区上的空间时很有用（例如在您宝贵的 SSD 磁盘上，以便您可以将文件放在辅助标准盘片上！）。

在 SSMS、Tasks、Detach 中右键单击要移动的数据库。导航到文件，这些文件通常位于类似`C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA`和调用的`MyDatabase.mdf`文件以及`MyDatabase_1.ndf`. 将它们复制到新位置（不要担心它们的权限）。

然后[以管理员身份打开 SSMS，](https://stackoverflow.com/questions/11178536/create-file-encountered-operating-system-error-5failed-to-retrieve-text-for-thi)否则您将在下一步中`CREATE FILE`出现类似错误。`Access is denied`

右键单击数据库、附加、添加，浏览到新定位的`MyDatabase.mdf`.

瞧！如果您右键单击文件并在 SSMS 中附加之前和之后检查它们的权限，您会注意到权限已被神奇地纠正！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T21:36:57.047

查看安装日志，帐户 MSSQL$ *InstanceName*是以下的简写：

NT 服务\MSSQL$ *InstanceName*

可以*直接*输入。我仍然不知道为什么这些没有出现在列表中。

# php - Codeigniter 用户数据不可用

> ID：10806228
> 
> 赞同：0
> 
> 时间：2012-05-29T20:26:46.050
> 
> 标签：php, codeigniter, session

我正在为我的项目使用 CodeIgniter。我快结束了，我现在无法更改会话“引擎”。我有验证码图片可在 url 上发表评论：

```
example.com/captcha 
```

和代码：

```
this->load->library('session');
header("Content-type: image/jpeg");
/*
* Image generation code...
*/
$this->session->set_userdata('captcha', strtolower($word));
imagejpeg($image);
imagedestroy($image); 
```

通常当我提交我使用的表格时

```
<img src="example.com/captcha" /> 
```

生成图像并设置用户数据。但这一次它不起作用。$this->session->userdata('captcha') 为空。

但是如果我直接访问图像 sessiondata 被设置并且在下一次提交时有一个 $word 是在直接访问图像/验证码时生成的。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:06:48.210

该图像位于带有“www”前缀的域上，而索引位于 domain.com 上。我通过为会话设置数据库来解决这个问题。我已经看到一页访问有两个条目具有不同的 session_id。

# oracle - 将日期文字绑定到 Oracle SQL Developer 查询中的参数

> ID：10806231
> 
> 赞同：1
> 
> 时间：2012-05-29T20:27:00.290
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我在 Oracle 中有一个查询（部分）如下所示：

```
where Doc3.clinicalDate >= ml.convert_date_to_id(:DateBegin)
    and Doc3.clinicalDate < ml.convert_date_to_id(:DateEnd) 
```

当我将此查询放入 SSRS 并设置报表和数据集参数时，它工作正常。但是，如果我将它粘贴到 Oracle SQL Developer 中，它会弹出一个窗口，要求我“输入绑定”。当我输入“日期'2011-06-01'”时，我收到错误“ORA-01858：在需要数字的地方发现了一个非数字字符”。如何以它实际理解的格式传递日期？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:56:13.203

这将取决于您的数据库的默认日期格式。尝试 06-01-2011, 01-Jun-2011, 2011-06-01 （注意：所有都没有周围的撇号，这会使它们成为字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:32:41.493

这是一个常见的问题。我将查询更改为使用`to_date(:DateEnd,'DD/MM/YYYY')`- 而不是将您的日期作为 varchar 并转换为日期。

# asp.net-mvc - MVC3 TextBoxFor vs. EditorFor - 每个问题

> ID：10806240
> 
> 赞同：4
> 
> 时间：2012-05-29T20:27:32.790
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper, modelattribute

我在网上浏览了一段时间，但找不到针对我的具体问题的好的解决方案。我正在开发 MVC3 Razor 应用程序。我也在客户端用 jQuery 做很多事情，所以在这种情况下，我需要我的输入字段具有 html Id 属性。

在这个特定问题中，当我使用 TextBoxFor 显示货币（类型为十进制）时，该值呈现 4 个小数位（我只想要 2 个）。我输入了模型属性

`[DisplayFormat(DataFormatString = "{0:n2}", ApplyFormatInEditMode = true)]`

当它呈现时，它似乎忽略了这个“displayFormat”。我在网上看到其他帖子确认 TextBoxFor html 帮助程序存在此问题。

另一方面，我可以更改为使用 EditorFor html 帮助程序，并且 DisplayFormat 模型属性适用于将我的文本框值格式化为小数点后 2 位。不利的一面是我失去了将 html 属性应用到 jQuery 所需的 html 助手的能力。什么是两全其美的最佳方式？我已经看到了很多解决方法，但似乎必须有一种更简单的方法来做到这一点。

附带说明一下，我的特定项目需要我的大部分字段都具有 html Id 属性，有时还需要类，以便我可以执行客户端 jQuery 操作。不确定这是否意味着我应该专注于扩展 EditorFor html 助手以接受 html 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:32:26.377

`DisplayFormat`仅由 MVC 在`Display`剃刀的任何扩展方法中使用。（例如`DisplayFor`）不幸的是，要执行您想要的操作，您必须编写一些“手动”代码……这里有一个示例可以帮助您进行操作。它基本上复制了 TextBoxFor 代码，但做出了一些很可能对生产不利的假设。请注意下面的分配`displayText`，这就是我们真正关心`DisplayFormatString`您在`DisplayFormat`.

在你的视图中调用它`@Html.TextEditorFor(m => m.Value)`

```
public static class CustomEditorFor
{
    public static IHtmlString TextEditorFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
    {
        return TextEditorFor(helper, expression, HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
    }

    public static IHtmlString TextEditorFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression, IDictionary<string, object> htmlAttributes)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);
        object value = metadata.Model;
        string displayText = string.Format(metadata.DisplayFormatString, value);

        string fullName = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression));

        TagBuilder tagBuilder = new TagBuilder("input");
        tagBuilder.MergeAttributes(htmlAttributes);
        tagBuilder.MergeAttribute("type", "text");
        tagBuilder.MergeAttribute("name", fullName, true);

        tagBuilder.MergeAttribute("value", displayText);
        tagBuilder.GenerateId(fullName);
        ModelState modelState;
        if (helper.ViewData.ModelState.TryGetValue(fullName, out modelState))
        {
            if (modelState.Errors.Count > 0)
            {
                tagBuilder.AddCssClass(HtmlHelper.ValidationInputCssClassName);
            }
        }

        tagBuilder.MergeAttributes(helper.GetUnobtrusiveValidationAttributes(ExpressionHelper.GetExpressionText(expression), metadata));

        return new HtmlString(tagBuilder.ToString(TagRenderMode.SelfClosing));

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:24:33.627

我最终使用了 Telerik 的数字文本框控件。我确信上述两个答案都会修复十进制格式。

我仍然需要重新讨论模型验证。我遇到了 EditorFor html 帮助程序拉动验证模型上的数据注释以进行验证的问题，而对 TextBoxFor 执行相同操作则没有。但与此同时，EditorFor 助手的缺点不接受我需要 jQuery 的 HtmlAttributes。

我已经开始使用 MVC4 RC，所以我希望这些东西中的许多都在版本 4 中得到修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:38:10.800

这里的简单解决方案是为您的自定义货币类型创建自定义显示和编辑器模板。做这个。

```
public class MyModel {
    [DataType(DataType.Currency)]
    public decimal mycurrency {get;set;}
} 
```

然后在 ~/Views/Shared/EditorTemplates/Currency.cshtml （或 DisplayTemplates）

```
@model decimal?

@Html.TextBox("", string.Format("{0:0.00}", Model), new { whateveryourattributes="attributevalues"}) 
```

然后你可以只使用 DisplayFor 或 EditorFor 或其他什么。

# php - PHP脚本从顶部重新启动

> ID：10806241
> 
> 赞同：0
> 
> 时间：2012-05-29T20:27:43.643
> 
> 标签：php, apache, shell-exec

我有一个长时间运行的 php 脚本，它可以做一些 ffmpeg 的东西。它在我的开发盒（亚马逊 ec2）上运行良好。但是在生产中（开发框的克隆），php 脚本会在 60 秒后从顶部重置。

```
<?php
function convert() {
    error_log('Executing ffmpeg');
    shell_exec(ffmpeg.....);
}
?> 
```

因此在查看错误日志和顶部时调用此服务。我明白了

```
20:32:04 Executing ffmpeg
20:33:04 Executing ffmpeg
20:34:04 Executing ffmpeg 
```

在顶部我得到 3 ffmpeg

知道 php 中的什么会导致它从顶部重置吗？

# .net - NServiceBus 3.2 示例问题

> ID：10806242
> 
> 赞同：4
> 
> 时间：2012-05-29T20:27:49.483
> 
> 标签：.net, asp.net-mvc, nservicebus, ravendb

我正在尝试为 AsyncPages 运行 NServiceBus 示例。看起来很简单。

1.  从 NServiceBus.com 下载最新版本
2.  执行bat文件安装先决条件
3.  打开解决方案
4.  按 F5
5.  在文本框中输入一个数字

当我这样做时，我得到了一个讨厌的 RavenDB 错误（NServiceBus 将其用作数据存储）。

```
Exception when starting endpoint, error has been logged. Reason: There is no index named: dynamic/TimeoutData 
```

RavenDB 似乎没有或不能创建索引。不确定这是 RavenDB 错误还是 NServiceBus 错误，但它使我无法运行示例。

提前致谢

更新：

按照 Andreas 的建议升级到 3.2.1 版时。

```
Exception when starting endpoint, error has been logged. Reason: An exception was thrown while invoking the constructor 'Void .ctor(Raven.Client.IDocumentStore)' on type 'RavenTimeoutPersistence'. 
```

我现在也注意到样本和 TopShelf 的问题。他们在 topshelf 中托管的是引用 3.2.0 版本的 NServiceBus 而不是 3.2.1。

到目前为止，这不是一次有趣的体验，但也许我应该放弃样品并直接投入到一些东西中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:23:44.547

我一直在为同样的问题苦苦挣扎——结果发现 NServiceBus 与 RavenDB 的连接存在问题。

RunMeFirst.bat 尝试配置东西，但显然并不总是成功。

在我的情况下，我安装了 RavenDB，但没有安装在 NServiceBus 期望的标准端口 8080 上。检查 Raven 安装文件夹中的 Raven.Server.exe.config（默认为 C:\RavenDB\RavenDB.0.0.0\RavenDB.Server）。应该定义端口号。如果不同，您可以通过添加 web.config 或 app.config 来覆盖到 RavenDB 的 NServiceBus 默认连接字符串：

```
<connectionStrings>
    <add name="NServiceBus.Persistence" connectionString="Url=http://localhost:8081;" />
</connectionStrings> 
```

其中 8081 是示例不同的 RavenDB 连接端口。

其他可能出错的事情是您的 RavenDB 与使用端口 8080 的其他服务冲突，要解决此问题，您可以更改 Raven 配置中的端口号并添加自定义连接字符串。

希望有帮助，干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:42:22.780

是的，我们已经看到了这个问题，它将在即将发布的补丁版本中修复（很快）。当前的解决方法是再次调用 RunMeFirst.bat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:25:53.107

我得到了同样的症状“RavenTimeoutPersistence”，原因是 RunMeFirst.bat 没有正确运行是由于安全限制。

1.  不要忘记右键单击 NServiceBus3.2.x.zip 文件，属性然后“取消阻止”
2.  批处理文件需要以管理员权限运行。因此，使用“以管理员身份运行”打开命令提示符，然后运行它

在那之后，我的工作完美。

# c# - OData .Net：初始加载后加载关系对象

> ID：10806249
> 
> 赞同：1
> 
> 时间：2012-05-29T20:28:11.183
> 
> 标签：c#, wcf-data-services, odata

加载我已经通过 Odata 获得的对象的关系对象的最佳方法是什么？我了解 .expand() 方法适用于初始调用，但我在进行初始调用时不知道对象的类型。这是我的对象结构的简化版本

```
public class BaseClass
{
    long id;
}

public class SubClassWithRelationship : BaseClass
{
    List<OtherClass> OtherClasses;
}

public class OtherClass : BaseClass
{
    string OtherProperty;
} 
```

我的初始查询不知道它将检索的派生类的类型。一旦检索到它，填充 OtherClasses 的最佳方法是什么？我想我有 3 个选择

1.  重新加载整个对象并使用 Expand() 方法（不是很棒，因为我必须加载相同的数据两次）。
2.  加载关系对象并将它们添加到对象中（不是我最喜欢的，因为我想依赖外键关系）。
3.  加载关系的一些未知方法。

# opengl - glGetShaderiv() GL_COMPILE_STATUS 返回 GL_FALSE

> ID：10806250
> 
> 赞同：1
> 
> 时间：2012-05-29T20:28:18.120
> 
> 标签：opengl, compiler-construction, compiler-errors, shader

我尝试在另一台计算机上打开 Visual Studio 项目。我不确定这是否相关，但最初我在查找 MSAA 像素格式时遇到问题，直到我将 WGL_SAMPLES_ARB 参数从 8 更改为 4。

然而，屏幕上的图像是黑白的，并且没有响应任何矩阵变换。

我正在使用 OpenGL SuperBible 第 5 版中的 GLShaderManager 代码。在调用 glCompileShader() 之后，它会使用 GL_COMPILE_STATUS 参数调用 glGetShaderiv()。我设置了一个断点，果然它以 GL_FALSE 返回。

这不会发生在我的另一台计算机上。知道是什么原因造成的吗？这台机器使用的是 ATI Radeon HD 5450，我刚刚更新了驱动程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:52:05.603

唉，GLSL 是一只滑溜溜的野兽，每个显卡、驱动程序、平台和版本对什么构成有效代码都有不同的想法。

对于测试和调试，您应该始终添加代码来检查`GL_COMPILE_STATUS`和`GL_LINK_STATUS`退出，或者至少在编译失败时显示警告。

使用[`glGetShaderInfoLog`](https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glGetShaderInfoLog.xml)和[`glGetProgramInfoLog`](https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glGetProgramInfoLog.xml)分别从着色器编译器和链接器获取输出。这些可能会告诉你什么是错误的（或编译器认为是什么错误）。

# java - controlP5 和创建对象的问题

> ID：10806251
> 
> 赞同：0
> 
> 时间：2012-05-29T20:28:23.473
> 
> 标签：java, object, listbox, controls

我有一个菜单系统，可以显示可以在屏幕上绘制的不同类型的对象。

所以基本上我已经显示了菜单，然后当你点击一个选项时，它会调用一个名为 newShape() 的函数，它会记下对象的类型并给它一个初始位置。

然后，当 draw() 被循环时，它将调用一个名为 drawShapes() 的函数，该函数将使用数组中的值并创建用户单击的对象。然后它将跟随用户的鼠标指针，直到它被点击。

代码被分成3个文件，以使其整洁。

**主文件**

```
import processing.opengl.*;

void setup(){
  size(500,500,OPENGL);
  background(255);
  setupMenu();
}

void draw(){
  background(255);
  fill(0);
  drawShapes();
} 
```

**菜单文件**

```
import controlP5.*;

ControlP5 cp5;
ListBox l;
String CI[] = {"Box", "Sphere", "Ellipsoid", "Toroid", "Text"};

void setupMenu() {

  cp5 = new ControlP5(this);
  l = cp5.addListBox("createList")
         .setPosition(0,16)
         .setSize(120, 120)
         .setItemHeight(15)
         .setBarHeight(15)
         .setColorBackground(color(40, 128))
         .setColorActive(color(255, 128))
         ;

  l.captionLabel().toUpperCase(true);
  l.captionLabel().set("Create Item");
  l.captionLabel().setColor(0xffff0000);
  l.captionLabel().style().marginTop = 3;
  l.valueLabel().style().marginTop = 3;

  for (int i = 0; i < CI.length; i++){
    ListBoxItem lbi = l.addItem(CI[i], i);
    lbi.setColorBackground(0xffff0000);
  }

}

void controlEvent(ControlEvent theEvent) {

  if(theEvent.isGroup() && theEvent.name().equals("createList")){
    int Choice = (int)theEvent.group().value();    
    newShape(Choice);
  }
} 
```

**绘制形状文件**

```
 int ob = 0;
 int Type[];
 float Pos[][];
 boolean posSet[];

void newShape(int c){
  Type[ob] = c;
  Pos[ob][0] = mouseX;
  Pos[ob][1] = mouseY;
  posSet[ob] = false;
  ob++;
}

void drawShapes(){
  for (int i = 0; i < ob; i++){
    switch(Type[ob]){

      case 0: {
        if (posSet[ob] == false){
          box(Pos[ob][0],Pos[ob][1], 50);
          }
         else {
           box(mouseX,mouseY, 50); break;
         }
      }
    }
  }
} 
```

编辑：还应该添加错误代码...

```
30/05/2012 9:57:09 AM controlP5.ControlBroadcaster printMethodError
SEVERE: An error occured while forwarding a Controller event, please check your code at controlEvent
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at         sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
at controlP5.ControlBroadcaster.invokeMethod(Unknown Source)
at controlP5.ControlBroadcaster.broadcast(Unknown Source)
at controlP5.ListBox.controlEvent(Unknown Source)
at controlP5.Controller.broadcast(Unknown Source)
at controlP5.Button.setValue(Unknown Source)
at controlP5.Button.activate(Unknown Source)
at controlP5.Button.mouseReleased(Unknown Source)
at controlP5.Controller.setMousePressed(Unknown Source)
at controlP5.ControllerGroup.setMousePressed(Unknown Source)
at controlP5.ControllerGroup.setMousePressed(Unknown Source)
at controlP5.ControlWindow.mouseReleasedEvent(Unknown Source)
at controlP5.ControlWindow.mouseEvent(Unknown Source)
at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at processing.core.PApplet$RegisteredMethods.handle(Unknown Source)
at processing.core.PApplet.handleMouseEvent(Unknown Source)
at processing.core.PApplet.dequeueMouseEvents(Unknown Source)
at processing.core.PApplet.handleDraw(Unknown Source)
at processing.core.PApplet.run(Unknown Source)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
at Main.newShape(Main.java:43)
at Main.controlEvent(Main.java:104)
... 25 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:46:29.017

你检查过是否

```
int Type[]; 
```

`null`调用时不在您的 Draw Shape File 中`newShape(int)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:47:28.930

好的，问题是数组没有初始化。

```
int Type[]; 
```

本来应该...

```
int[] Type = new int[size]; 
```

我不知道数组需要什么大小...所以我只是输入了一个很大的值。这是所有声明的代码...

```
int ob = 0, maxShapes = 300, currentShape;
int[] Type = new int[maxShapes];
float[][] Pos = new float[maxShapes][maxShapes];
boolean[] posSet = new boolean[maxShapes]; 
```

# python - Thinkof Python Chaper6，exercise8

> ID：10806259
> 
> 赞同：0
> 
> 时间：2012-05-29T20:28:49.420
> 
> 标签：python, python-2.7

```
>>> def gcd(m,n):
        if m%n==r and n !=0 and r !=0:
            return gcd(m,n)==gcd(n,r)
        elif n==0 or r==0:
            return gcd(m,0)==1
        else:
            print None 
```

> > > gcd(5,6)

```
Traceback (most recent call last):
File "<pyshell#35>", line 1, in <module>
gcd(5,6)
File "<pyshell#34>", line 5, in gcd
return gcd(m,0)==1
File "<pyshell#34>", line 2, in gcd
if m%n==r and n !=0 and r !=0:
ZeroDivisionError: integer division or modulo by zero 
```

抱歉，我刚刚将其修改为另一个版本，但仍然收到类似的错误消息...非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:32:28.213

我怀疑您在发布此问题时将粘贴的代码从 更改`gcd(5,0)`为。`gcd(5,6)`

如您的错误消息所示，您的调用`gcd`正在传递值`5`和。`0`该行`if m%n==r:`正在尝试除以 0 - 这是数学上的不可能。`ZeroDivisionError`这就是你例外的原因

编辑：

格式已关闭，所以我在第一次通过时错过了这个，但在`r=int()`您设置`r`为 0 的行中。这意味着该行将`return gcd(m,n)==gcd(n,r)`0 传递到`gcd`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:39:45.243

当 gcd() 调用自身时，未分配标量 r。该结果对于第二个参数为零。因此，随后的划分​​失败。

~~第二行应该是 'if m%n=r'~~

# php - 内存耗尽的php，这是因为1个文件而发生的还是因为我同时运行多个文件而发生的？

> ID：10806260
> 
> 赞同：1
> 
> 时间：2012-05-29T20:28:54.157
> 
> 标签：php, parsing, cron

我制作了一个 CSV 解析器，但有时它会返回内存耗尽错误。CSVparser 包含一个 jquery 循环，它使用 ajax 启动多个 php 文件来解析一个文件。一些文件返回错误，我想知道这是否与同时运行的文件有关。所以我的问题是，我可以通过排队解析来防止耗尽错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:32:09.290

如果您收到 PHP 错误`Fatal error: Allowed memory size of ### bytes exhausted`，则意味着单线程内存不足 - 无论任何其他进程。您为 PHP ( `memory_limit`) 设置的内存不会分配给正在运行的进程或类似的东西。该金额是为每个实例保留的。

# objective-c - 4 位十六进制 NSString 转二进制

> ID：10806261
> 
> 赞同：1
> 
> 时间：2012-05-29T20:29:09.200
> 
> 标签：objective-c, nsstring, binary, hex

我有一个 4 位数的 Hex NSString，类似于“00C0”或“01C3”。我希望能够将其转换为二进制以查看切换了哪些位。我的搜索返回了太多不相关的结果，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:40:45.853

[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)应该可以解决问题：

```
NSString *string1 = @"00C0";
NSScanner *scanner = [NSScanner scannerWithString:string1];
unsigned int number = 0;
if ([scanner scanHexInt:&number]) {
    NSLog(@"number is %u", number); // number is 192
} 
```

# java - 更新表的两列

> ID：10806262
> 
> 赞同：0
> 
> 时间：2012-05-29T20:29:11.477
> 
> 标签：java, mysql

我必须更新我的两列表

```
import java.sql.*;
import javax.sql.*;

public class User {

    public static void main(String args[]) {
        String id = "QZhx_w1eEJ";
        String created = "true";
        String vmname = "pratap";
        String dbUrl = "jdbc:mysql://localhost:3306/test";
        String dbClass = "com.mysql.jdbc.Driver";

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(dbUrl);
            Statement stmt = con.createStatement();
            stmt.executeUpdate("update userprofil set created='" + created
                    + "',vmname='" + vmname + "' where userprofil.id= '" + id
                    + "'");
            con.close();
        } // end try
        catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        catch (SQLException e) {
            e.printStackTrace();
        }
    } // end main
} // end class 
```

这是错误日志

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at User.main(User.java:17) 
```

有谁能够帮我..

谢谢你..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:29:55.020

您只需要在您的类路径中使用您的 JDBC [MySQL 驱动程序 JAR 。](http://dev.mysql.com/downloads/connector/j/)

# ruby-on-rails - 在 Rails 中路由时区分大小写的 id

> ID：10806263
> 
> 赞同：1
> 
> 时间：2012-05-29T20:29:16.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, routing

我正在尝试在我的 Rails 应用程序中实现一个虚 URL 系统。在 localhost:3000 服务器上，实现运行良好。我有一个系统，可以通过其名称请求配方，但如果通过 ID 请求，也可以回退到默认行为。无论名称实际保存为什么，此实现对于小写和大写名称都适用。

例如

`http://localhost:3000/recipes/pizza`

和

`http://localhost:3000/recipes/Pizza`

即使记录保存为“披萨”，也会导致相同的页面。

然而：

`http://www.test-server.com/recipes/pizza`

和

`http://www.test-server.com/recipes/Pizza`

不会弹出相同的页面。

我的问题是，为什么我的本地主机服务器上忽略了大写。此外，在线实施是否可以优雅地处理这个问题？

这是我目前如何实现虚 URL 的一些相关代码。

```
#models/recipe.rb  
 def to_param
    name.parameterize
  end

# relevant code from routes.rb
  match '/recipes/:name' => 'recipes#show'

# relevant code from controllers/recipe_controller.rb
  def show
    name = params[:id].gsub("-", "\s")
    @recipe = Recipe.find_by_name(name)
    @recipe = Recipe.find(params[:id]) if @recipe.nil?
    puts @recipe.ingredients.inspect
    puts @recipe.amounts.inspect
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @recipe }
    end
 end 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:56:20.710

如何比较字符串取决于用于列的排序规则（如果需要，可以在每个表或每个列级别上设置）。

MySQL 默认使用[不区分大小写](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)的排序规则，但是如果您的本地数据库和生产数据库具有不同的默认设置并且您没有明确指定排序规则或字符集，那么您可能最终在生产中使用不同的排序规则（`show create table foo`可以向您显示什么排序规则表的列使用）

如果您在 heroku 上运行，那么除非您特意为提供 mysql 数据库的插件付费，否则您将使用 postgres，而 postgres 将默认进行区分大小写的比较。顺便说一下，Heroku 不做任何“翻译”，只是 activerecord 知道如何处理 postgres。数据库之间有时存在细微的差异是不可避免的，因此强烈建议您在本地使用与将要部署到的数据库相同的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:57:40.367

正如 Frederick 已经写过的，您在 Heroku 上的 PostgreSQL 是区分大小写的。

我建议您确保数据库中所有可搜索的关键字都是小写的（例如：pizza 和 NOT Pizza）。然后，您使用这个小 gem 自动将 URL 的路由部分设为小写：

[https://rubygems.org/gems/route_downcaser](https://rubygems.org/gems/route_downcaser)

/ 卡斯滕

# spring - 具有传统单点登录的 Spring Security

> ID：10806266
> 
> 赞同：3
> 
> 时间：2012-05-29T20:29:24.563
> 
> 标签：spring, spring-mvc, spring-security

我在尝试使用 Spring Security 使用现有（阅读：*非常*“传统”）单点登录解决方案来保护新的 Spring MVC 应用程序时遇到了一些问题。

**免责声明：**我对 Spring 整体比较熟悉，但对 Spring Security 完全不熟悉；请原谅我的无知。

SSO 服务的工作方式如下：

1.  用户导航到他们选择的 Web 应用程序：http: [//apps.myco.com/webapp123](http://apps.myco.com/webapp123)
2.  用户未通过身份验证，因此他们被重定向到[http://sso.myco.com/login](http://sso.myco.com/login)并提示登录
3.  用户通过身份验证并使用附加到查询字符串的令牌重定向回应用程序：[http ://apps.myco.com/webapp123?token=ABCD1234](http://apps.myco.com/webapp123?token=ABCD1234)
4.  在每次页面加载（当前为 JSP 页面）时，用户的令牌会从查询字符串中提取出来，然后通过 SOAP 回调触发 SSO 服务，以检查令牌的有效性。SSO 服务对令牌表示赞成或反对（如果令牌有效且仍然是最新的，则表示赞成；否则，表示反对）
5.  如果令牌有效，则可以进行另一个 SOAP 调用以获取用户名（如果需要）

SSO 服务不处理用于授权的用户凭据，因此必须在每个应用程序的基础上进行处理:(

据我了解，这里普遍接受的做法是使用 Spring Security 的预身份验证框架，但我 (a) 不确定我的假设是否正确，并且 (b) 不确定我需要附带的所有东西该解决方案。

目前，我`LoginUrlAuthenticationEntryPoint`定义了一个 bean，它将未经身份验证的用户定向到 SSO 站点：

```
<beans:bean id="customAuthenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:constructor-arg value="http://sso.myco.com/login" />
</beans:bean> 
```

入口点的连接方式如下：

```
<http use-expressions="true" entry-point-ref="customAuthenticationEntryPoint">
    <intercept-url pattern="/" access="permitAll" />
    <intercept-url pattern="/edit/**" access="isAuthenticated()" />
    <intercept-url pattern="/setup/**" access="hasRole('setup')" />
    <intercept-url pattern="/admin/**" access="hasRole('admin')" />
</http> 
```

对我来说，症结在于在哪里挂接以接收来自 SSO 服务的“回调”。我想要的是有一个 URL（比如[http://apps.myco.com/webapp123/auth?token=ABCD1234](http://apps.myco.com/webapp123/auth?token=ABCD1234)）接受来自 SSO 服务的这些重定向，验证令牌并从 SSO 检索用户名，然后将所有这些信息保存在 Spring Security 上下文中。然而，我很有可能走错了路，或者我只是错过了一两块。

非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:05:49.690

好的，这就是我要做的：

我会将 AbstractAuthenticationProcessingFilter 子类化，将 authenticationManager 设置为您在 Spring Security xml 中连接的身份验证管理器。你真的应该只需要覆盖 attemptAuthentication 方法。此方法接受请求和响应对象，允许访问您的 URL 参数等。

如果身份验证成功，您只需要返回一个 Authentication 对象，Spring 安全应该处理将用户放入上下文等。

这是文档：

[http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html)

希望这可以帮助！

编辑：

可能想看看 Spring 的人如何实现它的直接子类，在这种情况下，UsernamePasswordAuthenticationFilter 位于此处：

[http://www.jarvana.com/jarvana/view/org/springframework/security/spring-security-web/3.0.5.RELEASE/spring-security-web-3.0.5.RELEASE-sources.jar!/org /springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java?format=ok](http://www.jarvana.com/jarvana/view/org/springframework/security/spring-security-web/3.0.5.RELEASE/spring-security-web-3.0.5.RELEASE-sources.jar!/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java?format=ok)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:12:19.847

我建议实现一个自定义 Voter，以根据令牌有效性和用户详细信息分配角色（设置、管理员等）。请参阅[基于投票的 AccessDecisionManager 实现](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/authz-arch.html#authz-voting-based)以及其中引用的博客：[SPRING SECURITY CUSTOMIZATION（第 2 部分 - 实时调整安全会话）](http://blog.springsource.com/2009/01/02/spring-security-customization-part-2-adjusting-secured-session-in-real-time/)

# c# - MVC3 httpPost 方法未加载视图

> ID：10806268
> 
> 赞同：0
> 
> 时间：2012-05-29T20:29:28.093
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我有一个表单，其首页正确加载，但每当我尝试提交时，都会收到以下错误：

```
The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /Search/DoSearch 
```

我有一个带有以下控件的 MVC 3 表单

```
public class HomeController : Controller
    {

        [HttpGet]
        public ViewResult Index()
        {
            return View();
        }

        [HttpPost]
        public ViewResult Index(FormModel formModel)
        {

            return View("Thanks", formModel);
        }

    } 
```

索引页面具有以下形式

```
@model RequestForm.Models.FormModel
@{
    Layout = null;
}
<html>
<head>
<link rel="Stylesheet" href="@Href("~/Content/Site.css")" type="text/css"/>
<title>Request page</title>
</head>
<body>
@using (Html.BeginForm("DoSearch", "Search", FormMethod.Post, new { @class = "form-class" })){
      @Html.LabelFor(x => x.fullName,"Full Name")
      @Html.TextBoxFor(x => x.fullName)

      @Html.LabelFor(x => x.address, "Address")
      @Html.TextBoxFor(x => x.address)

      @Html.LabelFor(x => x.phone, "Phone Number")
      @Html.TextBoxFor(x => x.phone)

      @Html.LabelFor(x => x.email,"Email")
      @Html.TextBoxFor(x => x.email)
    <br />
    <input type="submit" value="submit" />
}
</body>
</html> 
```

我也有一个感谢查看页面

```
@model RequestForm.Models.FormModel

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Thanks</title>
</head>
<body>
    <div>
        Thank you for your submission
    </div>
</body>
</html> 
```

为什么没有调用感谢视图页面，为什么请求的 URL 搜索/Dosearch？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:32:53.720

您的表单正在发布到控制器的`DoSearch`操作方法。`Search`您需要更改视图中的表单声明部分来解决此问题。将其更改`Index`为`HomeController`.

在你看来，改变这个

```
@using (Html.BeginForm("DoSearch", "Search", FormMethod.Post, new { @class = "form-class" })){ 
```

到

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { @class = "form-class" })){ 
```

如果您不想将 class 属性赋予表单，则可以像这样简化上面的内容

```
@using (Html.BeginForm())
{
  // form elements
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:45:12.233

似乎您没有在控制器端未定义的提交处理程序，

如果您使用显示的目标参数提交，则需要在控制器 SearchController 中有一个操作方法 DoSearch ，否则您需要通过将表单目标参数更改为提交到主控制器中的 Index 操作方法

```
HTML.BeginForm("Index","Home") 
```

# perl - Perl“全局符号”

> ID：10806269
> 
> 赞同：0
> 
> 时间：2012-05-29T20:29:36.613
> 
> 标签：perl

在以下 perl 脚本中，

```
#!/usr/local/bin/perl
use Env;
use strict;
use warnings;
my $oscar_file = "input/oscar_single_piminus_1k.input";
my $PISAEvent_file  = "output/PISAEvent_piminus_1k.root";
my %pisa_input = "pisa_piminus_1k.input" ;
my %pisa_start = "pisa < pisa_piminus_1k.input";
my $nevents = 1000;
open(INPUT, ">" . $pisa_input);
print INPUT "0\nN\n0\n";
close(INPUT);
open(INPUT2,">glogon.kmac");
print INPUT2 "macro glogon.kumac\npisafile $PISAEvent_file\ntext_file $oscar_file -1 1\nptrig $nevents\nexit\nreturn\n";
close(INPUT2);
my $ret = system($pisa_start); 
```

它返回以下错误，

```
Global symbol "$pisa_input" requires explicit package name at pisa.pl line 26.
Global symbol "$pisa_start" requires explicit package name at pisa.pl line 32.
Execution of pisa.pl aborted due to compilation errors. 
```

注释掉“使用严格”没有帮助，

```
Name "main::pisa_input" used only once: possible typo at pisa.pl line 26.
Name "main::pisa_start" used only once: possible typo at pisa.pl line 32.
Odd number of elements in hash assignment at pisa.pl line 15.
Odd number of elements in hash assignment at pisa.pl line 20.
Use of uninitialized value in concatenation (.) or string at pisa.pl line 26.
print() on closed filehandle INPUT at pisa.pl line 27.
Use of uninitialized value in system at pisa.pl line 32. 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:31:18.260

`my %pisa_start = "pisa < pisa_piminus_1k.input";`

`my $ret = system($pisa_start);`

`%`诉`$`。

这些是您使用的两条彼此不一致的行。如果您觉得它仍然没有问题，请阅读您最喜欢的关于变量的 Perl 教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:33:31.253

您没有`$pisa_input`在任何地方声明，并且您使用的是名为相同 ( `%pisa_input`) 的哈希图。

你可能的意思是：

```
my $pisa_input = "pisa_piminus_1k.input" ;
my $pisa_start = "pisa < pisa_piminus_1k.input"; 
```

# ios - UITableView 照片从 Graph API 显示多次

> ID：10806272
> 
> 赞同：0
> 
> 时间：2012-05-29T20:29:54.700
> 
> 标签：ios, facebook-graph-api, uitableview, sdwebimage

现在我正在为 iPad 制作一个 Facebook 应用程序。我拉墙并将其放入 UITableView。我将照片放入 tableview 的方式是这样的：

在 requestDidLoad 中用于查询图像数组。

```
-(void)request:(FBRequest *)request didLoad:(id)result {

 //Determine if result is a array of images
if ([result objectForKey:@"images"] != nil) {
    if ([request.url rangeOfString: @"=images"].location != NSNotFound) {
         realPicsonWall = result;
        NSLog(@"Result Object: %@", [result objectForKey:@"images"]);

    }      
} 
```

然后在 cellForRowAtIndexPath 中：

```
 UITableViewCell *cell = [tableView 
                         dequeueReusableCellWithIdentifier:@"messageCell"];
imageCellData *imageCell = [tableView dequeueReusableCellWithIdentifier:@"imageCell"];
//imageCellData is custom cell.
if ([[objectTypes objectAtIndex:indexPath.row] isEqualToString:@"photo"]) {
    //this is a picture

     NSArray *imagesArray = [realPicsonWall objectForKey:@"images"];
    NSDictionary *imageProps = [imagesArray objectAtIndex:3];

    NSLog(@"imageprops source: %@", [imageProps objectForKey:@"source"]);
    [imageCell.imageview setImageWithURL:[NSURL URLWithString:[imageProps objectForKey:@"source"]]];

    [imageCell layoutSubviews];
    return imageCell;

}else if ([[objectTypes objectAtIndex:indexPath.row] isEqualToString:@"video"]) {
    //this is a video
    NSLog(@"Video Called");
     NSDictionary *fromDictionary = [globalWhoPosted objectAtIndex:indexPath.row];
    cell.textLabel.text = @"Videos Are Not Supported";
     cell.detailTextLabel.text = [NSString stringWithFormat:@"Video Posted By: %@", [fromDictionary objectForKey:@"name"]];
    NSLog(@"Video By: %@", [fromDictionary objectForKey:@"name"]);
    return cell;
} 
else {
    NSDictionary *fromDictionary = [globalWhoPosted objectAtIndex:indexPath.row];
    NSString *story = [messages objectAtIndex:indexPath.row];
    cell.textLabel.text = story;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"By: %@", [fromDictionary objectForKey:@"name"]];

    cell.alpha = 1;
    return cell;
}

return cell;
} 
```

在 numberOfRows 中：

```
{
   return [messages count];
} 
```

墙上有 2 个不同的图像我要拉，但它会拉 2 个相同的图像，所以在 tableview 中我看到相同的图像 2 次，而它应该是 2 差异。图片。任何帮助都会非常慷慨。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:16:05.510

你有一个graphapi url的例子吗？可能我会做的是寻找所有具有相同尺寸的图像。这将导致假设如果 json 中有多个图像，而不仅仅是不同的分辨率，如果您抓取具有相同分辨率的图像，那么您将保证抓取那些唯一的图像。

# cocoa - 不透明度的drawAsPatternInRect

> ID：10806276
> 
> 赞同：1
> 
> 时间：2012-05-29T20:30:01.103
> 
> 标签：cocoa, uiimage

我正在绘制一个与颜色相乘的图案，但我还想调整图案图像的不透明度，最好的方法是什么？

这是我的图案绘制代码的样子：

```
 CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextSetBlendMode(context, kCGBlendModeMultiply);
    [[UIImage imageNamed:@"background"] drawAsPatternInRect:self.bounds];
    CGContextRestoreGState(context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:44:19.490

只需复制我的评论以明确问题已得到解答。

您可以使用 为上下文设置 alpha `CGContextSetAlpha()`，其他选项是调整原始图像的 alpha，但如果图像是动态的或可以是动态的，那么这可能需要更多的努力（它基本上回落到仍在使用`CGContextSetAlpha()`但在另一种情况下）

# debugging - makefile，如何引用变量的内容？

> ID：10806280
> 
> 赞同：0
> 
> 时间：2012-05-29T20:30:12.847
> 
> 标签：debugging, syntax, makefile, gnu

例如，我有一个变量 $(modules)，这个变量包含一个对象列表（用空格分隔的字符串），例如*“Modules = obj1 obj2...”*等等。

模块中的每个 obj 还包含一个列表，比如*“obj1 = obj1a obj1b ...”*等等。

现在，我想创建一个变量来包含所有这些最低级别的变量（例如 obj1a），例如，*“$(variable) = obj1a obj1b...obj2a obj2b...”*

我试过 $($(modules))... 显然没有用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:56:19.480

使用[`foreach`功能](http://www.gnu.org/software/make/manual/make.html#Foreach-Function)：

```
MODULES := foo bar baz

foo := a b c
bar := i j k
baz := x y z

FLAT_MODULES := $(foreach m,$(MODULES),$($m))
# FLAT_MODULES is now 'a b c i j k x y z' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:46:50.903

因此，根据您的描述，假设您有三个变量 obj1、obj2 和 obj3 来保存您的“对象”名称。然后，你需要一个变量，比如 MODULES，来保存这三个变量的内容。

像下面的代码不会做你想要的吗？

```
.PHONY: test

MODULES=$(obj1) $(obj2) $(obj3)
obj1=foo1 bar1
obj2=foo2 bar2
obj3=foo3 bar3

all:
    echo $(MODULES) 
```

显然将“回声”替换为您想要的任何内容？

# ios - 如何优化opencv的calcOpticalFlowPyrLK？

> ID：10806281
> 
> 赞同：3
> 
> 时间：2012-05-29T20:30:14.163
> 
> 标签：ios, opencv

我正在使用 calcOpticalFlowPyrLK 来检测 300x400 图像中的点。我将这些数据提供给 findHomography 和 warpPerspective 并进行视频稳定。在 iPhone 上，它目前正在以 500 毫秒的速度执行此操作，我想知道是否可以将其降低。

```
TermCriteria termcrit(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS,20,0.03);
cv::Size winSize(31,31);
[..]
calcOpticalFlowPyrLK(baseGray, gray, points[0], points[1], status, err, winSize, 3, termcrit, 0, 0.001); 
```

什么是好的参数（例如获胜大小）同时仍然可以很好地稳定视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:07:31.877

对于图像处理中耗时的算法，我通常首先尝试降低我的图像分辨率（假设是 2 个因子）并检查是否仍然得到相同的结果。

众所周知，光流是一种高消耗技术

[cvResize](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html#cv-resize)可能是你的解决方案

在很多情况下，您的算法的结果将大致相同，在您的情况下，您可能会得到低至 100 毫秒。

关于winsize，文档说：

> winSize – 每个金字塔级别的搜索窗口大小。

这是一个搜索窗口，因此您希望缩小它以加快速度。尝试使用 15 像素的窗口。

**编辑 ：**

大多数时候，我会尝试为我得到的每个输入图像创建几个不同分辨率的片段。这样，根据要执行的操作，我可以明智地选择分辨率，并提高我的表现。

一个具体的例子：我得到一个 640*480 的输入图像。我创建了这个图像的 320*240 版本。出于某种原因，我必须计算它上面的光流，我知道这很消耗。我将使用较低分辨率的版本来计算我的系数。至于直方图均衡，其实我会选择全分辨率图像作为输入，以获得最大的数据。

只要避免同时用不同分辨率的数据计算东西，你就不应该有问题。

# c++ - 新建CMFCDesktopAlertWnd时，分配的内存什么时候删除？

> ID：10806282
> 
> 赞同：1
> 
> 时间：2012-05-29T20:30:18.373
> 
> 标签：c++, mfc

大多数如何创建桌面警报的示例如下所示。它使用 new 关键字创建新的 CMFCDesktopAlertWnd，用于创建 CMFCDesktopAlertDialog。这些示例都没有在函数末尾删除对象，所以我想有些东西正在释放内存。什么是释放内存？

```
CMFCDesktopAlertWnd* pPopup = new CMFCDesktopAlertWnd;
// int m_nAnimation
pPopup->SetAnimationType ((CMFCPopupMenu::ANIMATION_TYPE) m_nAnimation);

// int m_nAnimationSpeed
pPopup->SetAnimationSpeed (m_nAnimationSpeed);

// int m_nTransparency
pPopup->SetTransparency ((BYTE)m_nTransparency);

// BOOL m_bSmallCaption
pPopup->SetSmallCaption (m_bSmallCaption);

// BOOL m_bAutoClose, int m_nAutoCloseTime
pPopup->SetAutoCloseTime (m_bAutoClose ? m_nAutoCloseTime * 1000 : 0);

// int m_nPopupSource
if (m_nPopupSource == 0)
{
   // int m_nVisualMngr
   // CPoint m_ptPopup
   // The this pointer points to a CDesktopAlertDemoDlg class which extends the CDialogEx class.
   if (m_nVisualMngr == 5)  // MSN-style
   {
      pPopup->Create (this, IDD_DIALOG2, NULL, m_ptPopup, RUNTIME_CLASS (CMSNDlg));
   }
   else
   {
      pPopup->Create (this, IDD_DIALOG1, 
      m_menuPopup.GetSubMenu (0)->GetSafeHmenu (), m_ptPopup, RUNTIME_CLASS (CMyPopupDlg));
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:54:58.467

你可以看看源代码：

```
void CMFCDesktopAlertWnd::OnNcDestroy()
{
    CWnd::OnNcDestroy();
    delete this;
} 
```

当窗口被销毁时，WM_NCDESTROY 消息会删除分配的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T15:13:11.190

[微软建议](http://msdn.microsoft.com/en-us/library/2zw820e5.aspx)删除这属于`PostNcDestroy()`而不是`OnNcDestroy()`方法，我已经看到一些崩溃，`comctl32!ComboBox_WndProc()`当删除太早完成时，我会尝试引用释放的内存，即在`OnNcDestroy().`

# sql-server-2008 - 更新 SQL Server 中的 blob 列

> ID：10806285
> 
> 赞同：0
> 
> 时间：2012-05-29T20:30:45.283
> 
> 标签：sql-server-2008, blob

如何更新 SQL Server 2008 中的 BLOB 列，我正在尝试使用 Like 进行模式匹配并希望更新该列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:33:35.390

来自[http://www.akadia.com/services/dotnet_read_write_blob.html](http://www.akadia.com/services/dotnet_read_write_blob.html)：

```
// Read Image into Byte Array from Filesystem
byte[] photo = GetPhoto(photoFilePath);

// Construct INSERT Command
SqlCommand addEmp = new SqlCommand(
    "INSERT INTO Employees ("+
    "LastName,FirstName,Title,HireDate,ReportsTo,Photo) "+
    "VALUES(@LastName,@FirstName,@Title,@HireDate,@ReportsTo,@Photo)",_conn);

addEmp.Parameters.Add("@LastName",  SqlDbType.NVarChar, 20).Value = plastName;
addEmp.Parameters.Add("@FirstName", SqlDbType.NVarChar, 10).Value = pfirstName;
addEmp.Parameters.Add("@Title",     SqlDbType.NVarChar, 30).Value = ptitle;
addEmp.Parameters.Add("@HireDate",  SqlDbType.DateTime).Value     = phireDate;
addEmp.Parameters.Add("@ReportsTo", SqlDbType.Int).Value          = preportsTo;
addEmp.Parameters.Add("@Photo",     SqlDbType.Image, photo.Length).Value = photo;

// Open the Connection and INSERT the BLOB into the Database
_conn.Open();
addEmp.ExecuteNonQuery();
_conn.Close();

// **** Read Image into Byte Array from Filesystem
public static byte[] GetPhoto(string filePath)
{
    FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);
    BinaryReader br = new BinaryReader(fs);

    byte[] photo = br.ReadBytes((int)fs.Length);

    br.Close();
    fs.Close();

    return photo;
} 
```

如果您的文档是：您可以进行全文搜索：

```
.doc 
.txt 
.xls 
.ppt 
.htm 
```

参考： [http ://technet.microsoft.com/en-us/library/cc917636.aspx](http://technet.microsoft.com/en-us/library/cc917636.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:40:37.647

更新 blob 没问题，您只需更新它。“我正在尝试与 Like 进行模式匹配，并希望更新该列。” 这是不可能的。您无法搜索 blob。有复杂的解决方法。您可以启用全文搜索可能是最简单的。如果您有一个玩具数据库并且一开始并不真的需要 blob，您可以将其转换为 nvarchar(4000) 并搜索它，这将逐行进行转换，进行非常缓慢的搜索，并且仅在以下情况下才有效您要查找的是前 4000 个字符。

# django - 在 Django 开发中提供静态文件

> ID：10806287
> 
> 赞同：0
> 
> 时间：2012-05-29T20:30:51.787
> 
> 标签：django

我在使用 Django 1.4 在开发中提供静态文件时遇到问题

```
STATIC_ROOT = 'C:/projects/foobar/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = () 
```

在我的模板中，我这样称呼`static`它：

```
<link rel='stylesheet' href='/static/foobar.css'> 
```

请注意，我没有使用任何上下文处理器，因为我正在硬编码`static`

根据[文档](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-development)，我看不出我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:07:36.950

好的，我找到了解决方案：

```
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = ('C:/projects/foobar/static',) 
```

这种方式我只是`/static/`从模板中引用。奇怪的是 STATIC_ROOT 需要是空的，而 STATICFILES_DIRS 才是最重要的，但它是违反直觉的。

这不需要静态文件夹位于应用程序中，它可以位于项目的根目录中，并且不需要更改 urls.py 也不需要使用 collectstatic 命令

# c++ - 在 C++ 中使用 OpenCV 从摄像头流式传输视频时程序不会启动

> ID：10806290
> 
> 赞同：4
> 
> 时间：2012-05-29T20:31:15.893
> 
> 标签：c++, opencv, camera, video-streaming, device

对，我有一个连接到 PC 的 USB 摄像头，我想使用 OpenCV 从中流式传输图像。这是我的代码：

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

int main()
{

    CvCapture* cameraCapture = cvCaptureFromCAM(CV_CAP_ANY);
    cvNamedWindow("Camera");

    while(1)
    {
        IplImage* frame = cvQueryFrame(cameraCapture);
        cvShowImage("Camera", frame);
        if((cvWaitKey(10) & 255) == 27)
            break;
    }

    cvReleaseCapture(&cameraCapture);
    cvDestroyWindow("Camera");
} 
```

问题是，当我启动程序时，我收到此弹出错误：“应用程序无法正确启动（0xc0150002）。单击确定关闭应用程序”。我已经确定我已经包含了所有正确的库、头文件和 ddl，所以我真的不确定它有什么问题。

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:31:23.460

我建议您使用 OpenCV 2.3.1 尝试这种处理相机的方式。

```
VideoCapture _videoSource;
bool camera = 1;

if(camera)
{
   if(!_videoSource.open(0))                // Try to start camera. 0 = default camera
   {                                    
    cout << "Error opening camera" << endl; // here you control why the error happens
    exit(1);                // Exit if fail         
   }
}
else
{
   if(!_videoSource.open(Path+"video.avi")) 
   {
        cout << "Error opening file" << endl;
        exit(2);                        // Exit if fail
   }
}
_videoSource.set(CV_CAP_PROP_CONVERT_RGB, 1);

Mat frame;
namedWindow("Image");

while(1) 
{
  _videoSource >> frame; 
  imshow("output", frame);
  return 0;
} 
```

如果失败，您将确定问题出在您的相机上。也许是司机。祝你好运。

# c# - 搜索等效的 PHP 函数

> ID：10806293
> 
> 赞同：1
> 
> 时间：2012-05-29T20:31:25.613
> 
> 标签：c#, function, hex, ascii

通过将 Integer 转换为 String 格式，我遇到了一些问题。我得到了这些 PHP 函数，这正是我在 C# 中需要的：

```
function _hex($int)
{
    return (strlen(sprintf("%X", $int)) % 2 == 0) ? sprintf("%X", $int) : sprintf("0%X",     $int);
}
Function hex2str($hexstr)
{
    $hexstr = str_replace(' ', '', $hexstr);
    $hexstr = str_replace('\x', '', $hexstr);
    $retstr = pack('H*', $hexstr);
    return $retstr;
} 
```

他们被称为：

```
$total_length = hex2str(_hex(strlen($content))); 
```

在 C# 中我试过这个：

```
String test = "1234567890123456789012345678901234567890123456789";
short l = (short)test.Length;
byte[] TotalLength = Encoding.GetEncoding(28591).GetBytes(l.ToString()); 
```

PHPs HexDump 的结果是`00 3C`- 在 C# 中我得到`34 39`

我希望结果是这种格式的字符串：

`\x00\x3c`

问候，莫里茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:09:36.587

根据您的示例代码，值 34/39 是输出字节的正确格式的十六进制数字，所以我不确定您是如何得出 00/3C 的。

但是，要在 C# 中将数值转换为十六进制字符串，请使用；

```
string hex = String.Format("{0:X}", number); 
```

或者在您更具体的情况下；

```
StringBuilder sb = new StringBuilder();
foreach (byte b in TotalLength)
{
    sb.Append(String.Format("\x{0:X}", b));
}
string hex = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:13:20.630

您的代码返回`l`转换为字符串的值的 ASCII 值（ASCII 34/39 为 49 - 您的字符串的长度）。但是您需要的是长度值的 byte[] 表示。

换行

```
byte[] TotalLength = Encoding.GetEncoding(28591).GetBytes(l.ToString()); 
```

至

```
byte[] TotalLength = BitConverter.GetBytes(l); 
```

请注意，在英特尔 CPU 上，值 15 转换为 0F-00 而不是 00-0F。高字节在先。当您将字节数组转换为字符串时，您必须注意这一点。

要将字节值转换为十六进制字符串，请使用

```
var sb = new StringBuilder();
for (int i = TotalLength.Length - 1; i >= 0; i--)
{
    sb.Append("\\x");
    sb.Append(TotalLength[i].ToString("x2"));
}
string hex = sb.ToString(); 
```

PS：局部变量应以小写字符开头。

# iphone - 音频文件类型之间的区别

> ID：10806295
> 
> 赞同：1
> 
> 时间：2012-05-29T20:31:32.893
> 
> 标签：iphone, ios, audio, cocos2d-iphone

我正在使用 cocosDenshion 和 cocos2d 在 iPhone 上播放声音。但是，我需要找到能够流畅高效地播放的最佳文件类型。以下是我目前拥有的一些文件格式：WAV、MP3 和 CAF。我应该将这些文件全部转换为某种格式吗？他们中的任何一个比其他人更有效率吗？尤其是音效，应该用什么？那么背景音乐呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:52:09.577

从[文档](http://www.cocos2d-iphone.org/wiki/doku.php/cocosdenshion%3afaq#what_sound_formats_can_i_use)中，这就是我为我的游戏所做的：

MP3 用于背景音乐。

用于音效的“16 位单声道文件”。

# sql - SQL Server 行到列

> ID：10806302
> 
> 赞同：4
> 
> 时间：2012-05-29T20:32:00.070
> 
> 标签：sql, sql-server, pivot

我的查询是：

```
SELECT vendor.id, insurances.id AS ins_id, vendor_insurances.expiry_date
FROM vendor
INNER JOIN vendor_insurances
ON vendor.id=vendor_insurances.vendor_id 
```

和输出：

```
id    ins_id    expiry_date
================================
28    1         2006-01-01
28    11        2008-01-01 
```

我想将其转换为：

```
id    1            11
======================================
28    2006-01-01   2008-01-01 
```

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T20:37:31.250

您将需要使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)并执行类似的操作：

静态枢轴 - 仅用于您将枢轴的几列

```
select *
from 
(
  SELECT v.id
    , vi.id AS ins_id
    , vi.expiry_date
  FROM vendor v
  INNER JOIN vendor_insurances vi
    ON v.id=vi.vendorId
) x
PIVOT
(
   MIN(expiry_date)
    FOR ins_id IN ([1], [11])
) p 
```

请参阅[SQL Fiddle](http://sqlfiddle.com/#!3/31fca/3)以获取工作演示

或者，如果您有很多要 PIVOT 的项目，您可以使用 Dynamic Pivot：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(vi.id) 
                  FROM vendor v
                  INNER JOIN vendor_insurances vi
                    ON v.id=vi.vendorId
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from 
             (
                SELECT v.id
                    , vi.id AS ins_id
                    , vi.expiry_date
                FROM vendor v
                INNER JOIN vendor_insurances vi
                    ON v.id=vi.vendorId
            ) x
            pivot 
            (
                MIN(expiry_date)
                for ins_id in (' + @cols + ')
            ) p '

execute(@query) 
```

两者都会给你相同的结果。

# python - “中位数”算法的 Python 实现

> ID：10806303
> 
> 赞同：5
> 
> 时间：2012-05-29T20:32:01.527
> 
> 标签：python, algorithm

我已经在 python 中编写了中位数算法的中位数的实现，但它似乎没有输出正确的结果，而且对我来说似乎也不是线性复杂性，知道我偏离轨道的地方吗？

```
def select(L):
    if len(L) < 10:
        L.sort()
        return L[int(len(L)/2)]
    S = []
    lIndex = 0
    while lIndex+5 < len(L)-1:
        S.append(L[lIndex:lIndex+5])
        lIndex += 5
    S.append(L[lIndex:])
    Meds = []
    for subList in S:
        print(subList)
    Meds.append(select(subList))
    L2 = select(Meds)
    L1 = L3 = []
    for i in L:
        if i < L2:
            L1.append(i)
        if i > L2:
            L3.append(i)
    if len(L) < len(L1):
        return select(L1)
    elif len(L) > len(L1) + 1:
        return select(L3)
    else:
        return L2 
```

函数调用如下：

```
L = list(range(100))
shuffle(L)
print(select(L)) 
```

乐：对不起。GetMed 是一个简单地对列表进行排序并在 len(list) 处返回元素的函数，它应该在那里选择，我现在修复了它，但我仍然得到错误的输出。至于缩进，代码可以正常工作，我看不出有什么问题:-??

LE2：我期待 50（对于当前的 L），它给了我从 30 到 70 的输出，不多不少（还）

LE3：非常感谢你，它现在起作用了。不过我很困惑，我试图在这种方法和天真的方法之间进行比较，我只是对数组进行排序并输出结果。现在，从我目前阅读的内容来看， select 方法的时间复杂度应该是 O(n) [Deterministic Selection](http://www.ics.uci.edu/~eppstein/161/960130.html)。虽然我可能无法与 python 开发人员所做的优化竞争，但我确实期望得到比我得到的更接近的结果，例如，如果我将列表的范围更改为 10000000，则选择在 84.10837116255952 秒内输出结果，而排序和返回方法在 18.92556029528825 中进行。有什么好方法可以让这个算法更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:58:36.163

1）您的代码缩进错误，试试这个：

```
def select(L):
    if len(L) < 10:
        L.sort()
        return L[int(len(L)/2)]
    S = []
    lIndex = 0
    while lIndex+5 < len(L)-1:
        S.append(L[lIndex:lIndex+5])
        lIndex += 5
    S.append(L[lIndex:])
    Meds = []
    for subList in S:
        print(subList)
        Meds.append(select(subList))
    L2 = select(Meds)
    L1 = L3 = []
    for i in L:
        if i < L2:
            L1.append(i)
        if i > L2:
            L3.append(i)
    if len(L) < len(L1):
        return select(L1)
    elif len(L) > len(L1) + 1:
        return select(L3)
    else:
        return L2 
```

2）您使用的方法不返回中位数，它只是返回一个离中位数不远的数字。要获得中位数，您需要计算有多少数字大于您的伪中位数，如果多数数较大，则使用大于伪中位数的数字重复算法，否则重复其他数字。

```
def select(L, j):
    if len(L) < 10:
        L.sort()
        return L[j]
    S = []
    lIndex = 0
    while lIndex+5 < len(L)-1:
        S.append(L[lIndex:lIndex+5])
        lIndex += 5
    S.append(L[lIndex:])
    Meds = []
    for subList in S:
        Meds.append(select(subList, int((len(subList)-1)/2)))
    med = select(Meds, int((len(Meds)-1)/2))
    L1 = []
    L2 = []
    L3 = []
    for i in L:
        if i < med:
            L1.append(i)
        elif i > med:
            L3.append(i)
        else:
            L2.append(i)
    if j < len(L1):
        return select(L1, j)
    elif j < len(L2) + len(L1):
        return L2[0]
    else:
        return select(L3, j-len(L1)-len(L2)) 
```

警告：`L = M = []`不是`L = []`和`M = []`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-20T22:04:26.347

下面是我的 Python 实现。为了获得更快的速度，您可能希望改用 PYPY。

**对于您关于速度的问题：** 每列 5 个数字的理论速度约为 10N，因此我每列使用 15 个数字，以 2X 速度为 ~5N，而最佳速度为 ~4N。但是，对于最先进的解决方案的最佳速度，我可能是错误的。在我自己的测试中，我的程序比使用 sort() 的程序运行得稍快。当然，您的里程可能会有所不同。

假设 python 程序是“median.py”，运行它的示例是“python ./median.py 100”。对于速度基准，您可能需要注释掉验证代码，并使用 PYPY。

```
#!/bin/python
#
# TH @stackoverflow, 2016-01-20, linear time "median of medians" algorithm
#
import sys, random

items_per_column = 15

def find_i_th_smallest( A, i ):
    t = len(A)
    if(t <= items_per_column):
        # if A is a small list with less than items_per_column items, then:
        #     1\. do sort on A
        #     2\. return the i-th smallest item of A
        #
        return sorted(A)[i]
    else:
        # 1\. partition A into columns of items_per_column items each. items_per_column is odd, say 15.
        # 2\. find the median of every column
        # 3\. put all medians in a new list, say, B
        #
        B = [ find_i_th_smallest(k, (len(k) - 1)/2) for k in [A[j:(j + items_per_column)] for j in range(0,len(A),items_per_column)]]

        # 4\. find M, the median of B
        #
        M = find_i_th_smallest(B, (len(B) - 1)/2)

        # 5\. split A into 3 parts by M, { < M }, { == M }, and { > M }
        # 6\. find which above set has A's i-th smallest, recursively.
        #
        P1 = [ j for j in A if j < M ]
        if(i < len(P1)):
            return find_i_th_smallest( P1, i)
        P3 = [ j for j in A if j > M ]
        L3 = len(P3)
        if(i < (t - L3)):
            return M
        return find_i_th_smallest( P3, i - (t - L3))

# How many numbers should be randomly generated for testing?
#
number_of_numbers = int(sys.argv[1])

# create a list of random positive integers
#
L = [ random.randint(0, number_of_numbers) for i in range(0, number_of_numbers) ]

# Show the original list
#
print L

# This is for validation
#
print sorted(L)[int((len(L) - 1)/2)]

# This is the result of the "median of medians" function.
# Its result should be the same as the validation.
#
print find_i_th_smallest( L, (len(L) - 1) / 2) 
```

# wpf - WPF Grid子控件排序

> ID：10806307
> 
> 赞同：1
> 
> 时间：2012-05-29T20:32:12.180
> 
> 标签：wpf, xaml

如何使子控件在 xaml**中按顺序显示**`Grid`？

例如，使用以下内容：

```
<Grid>
    <igRibbon:XamRibbon...>
    <igWindows:XamTabControl...>
    <igWindows:XamTabControl...>
</Grid> 
```

我想要

*   出现在窗口**顶部的功能区**
*   依次是 2 个**XamTabControls**

但是，我的 XamTabControl 似乎伸展**占据了隐藏 XamRibbon 的整个窗口**。

* * *

# 尝试了以下方法：

我确信这不是很棘手或困难，但我找不到需要设置的适当控件/属性。我尝试设置`Grid.Row="1"`（对于第一个 XamTabControl），但这似乎没有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:55:26.477

## 解决方案 1

默认情况下，控件将拉伸以适应网格单元的大小。要解决此问题，您可以通过类似...的方式定义多个网格行/列

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height=""/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width=""/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
</Grid> 
```

然后，您可以通过 Grid.Row 和 Grid.Column 附加属性显式设置您希望每个控件位于哪一列和哪一行。您可以指定列/行的高度/宽度，或者不考虑该部分，它们将默认为统一的。

如果`Height`第一行的 设置为 value `Auto`，它将根据该行内内容的大小均匀分布高度。

## 解决方案 2

或者将内部每个控件的垂直和水平对齐方式从拉伸更改为其他值。

## 解决方案 3

第三种解决方案可能是`<Grid>`将`<UniformGrid>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:55:32.847

将行定义添加到您的网格。

前任：

```
 <Grid>
  <Grid.RowDefinitions>
    <RowDefinition>
    <RowDefinition>
  </Grid.RowDefinitions>
</Grid> 
```

然后设置 Grid.Row 应该响应孩子的排序。

# c# - 查找重复条目 C#

> ID：10806309
> 
> 赞同：4
> 
> 时间：2012-05-29T20:32:31.270
> 
> 标签：c#

我是编程新手，所以这看起来有些简单，但我似乎无法弄清楚。

我正在尝试在值的一列中查找数据表中的重复值。

这是我试图做的。

```
DataRow[] dupresults = dt.Select("PROV_NEW");
TableIssues = string.Empty;
DataTable dtTemp = dt.DefaultView.ToTable(true, "NEW_PROV");

if (dupresults.Length == 0)
{
    return true;
}
else
{
    foreach (DataRow item in dupresults)
    {
        Console.WriteLine(item[1]);
        TableIssues += "Provider Code is not unique for " + item[1].ToString() + ". Revise non-unique codes.\r\n\n\n\n";
    }
    return false;
} 
```

好的，但我也在搜索它以确保 PROV_NEW 中也没有空字段。所以我不知道该放在哪里。我对 c# 很陌生。我上周才开始。我正在为我父亲的公司做副业。

```
private bool ValidateTable(DataSets.Setup.SETUP_MWPROVDataTable dt, out string TableIssues)
    {
        try
        {
            //NewCode not used for other row
            DataRow[] result = dt.Select("PROV_NEW = ''");
            DataRow[] dupresults = dt.Select("PROV_NEW");
            TableIssues = string.Empty;
            DataTable dtTemp = dt.DefaultView.ToTable(true, "NEW_PROV");

            if (dupresults.Length == 0)
            {

                return true;
            }
            else
            {
                var duplicates = dt.AsEnumerable()
               .Select(dr => dr.Field<string>("PROV_NEW"))
               .GroupBy(x => x)
               .Where(g => g.Count() > 1)
               .Select(g => g.Key)
               .ToList();

                foreach (DataRow item in dupresults)
                {
                    Console.WriteLine(item[1]);
                    TableIssues += "Provider Code is not unique for " + item[1].ToString() + ". Revise non-unique codes.\r\n\n\n\n";
                }
                return false;
            }

            if (result.Length == 0)
            {
                //TODO: Add Next Step for validation

                return true;

            }
            else
            {
                foreach (DataRow item in result)
                {
                    Console.WriteLine(item[1]);
                    TableIssues += "Provider code " + item[1].ToString() + " is blank. Add new Provider code for " + item[1].ToString() +".\r\n\n\n";
                }

                return false;
            }

           }
        catch (Exception)
        {

            throw;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T20:35:48.707

LINQ 可以在这里为您提供帮助：

```
var duplicates = dt.AsEnumerable()
                   .Select(dr => dr.Field<string>("PROV_NEW"))
                   .GroupBy(x => x)
                   .Where(g => g.Count() > 1)
                   .Select(g => g.Key)
                   .ToList();

// Now work with the set of duplicates 
```

或者：

```
HashSet<string> providers = new HashSet<string>();
foreach (var provider in dt.AsEnumerable()
                           .Select(dr => dr.Field<string>("PROV_NEW")))
{
    if (!providers.Add(provider))
    {
        // This provider is a duplicate
    }
} 
```

（这是有效的，因为[`HashSet<T>.Add`](http://msdn.microsoft.com/en-us/library/bb353005.aspx)如果该值已存在于集合中，则返回 false。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T07:27:04.897

接受[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)关于在多列选择上使用匿名类型 LINQ 的建议，我给自己找到了一个解决方案，希望它对你也有帮助：

```
DataTable dt_ = _data.Tables["MyTable"];

        foreach (DataRow _dr in dt_.AsEnumerable()
        .GroupBy(r => new
        {
            c1 = r.Field<string>("ColNAME1 of table dt_"),
            c2 = r.Field<string>("ColNAME2 of table dt_"),
            c3 = r.Field<string>("ColNAME3 of table dt_"),
    ...<any number of columns can be added> 
        }).Where(grp => grp.Count() > 1).SelectMany(itm => itm))
        {
        // Handle your Duplicate row entry
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:57:02.310

`dtEmp`是你的工作数据表

```
DataTable distinctTable = dtEmp.DefaultView.ToTable( /*distinct*/ true); 
```

# java - 在 Java JFrame 中显示图像

> ID：10806310
> 
> 赞同：7
> 
> 时间：2012-05-29T20:32:38.417
> 
> 标签：java, swing, jframe, image

在 java JFrame 中的特定坐标处显示图像的最佳方法是什么？

我知道有很多方法可以做到这一点，我只需要知道显示我计划在框架中移动的图像的最佳方式！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:36:30.443

使用带有 JLabel 的 ImageIcon 是最简单的方法。您实际上可以将其添加到 JFrame 的 JLayeredPane 中高于或低于 contentPane 的级别，具体取决于您的要求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:34:45.327

开发一个自定义组件和覆盖`paintComponent()`方法来执行此操作。开发自定义组件可为您提供进一步增强的灵活性。您可以通过这种方式轻松添加平移、缩放等类型的功能。

然后只需将此组件添加到您的`JFrame`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T20:36:53.883

我建议将其添加为 ImageIcon：

```
ImageIcon image = new ImageIcon("image.jpeg");
add(image); 
```

* * *

编辑（如何添加它添加特定坐标）：

*首先要注意的是，通常（99% 的情况）不鼓励自己定位 JComponent。使用 LayoutManager 为您定位它们，并处理调整大小。*
我会告诉你如何自己定位它：

*   将您的 LayoutManager 设置为`null`: `setLayout(null)`。
*   将您设置`ImageIcon`为特定坐标：`image.setLocation(x, y)`.

# google-chrome - 为什么谷歌浏览器弄乱了我的形象

> ID：10806312
> 
> 赞同：3
> 
> 时间：2012-05-29T20:32:47.457
> 
> 标签：google-chrome

![在此处输入图像描述](../Images/7ea8b8dcf1819ae245f53a4bf961040f.png)

看到那张图片，在 Chrome 中，您会注意到圆形内部的每一侧（如果您没有看到它，请尝试提高亮度）一些白线，但在 Firefox 中，一切都很平滑

而且文件根本没有那些白线，相信我。

谷歌为什么这样做？

我确定 Chrome 正在压缩图像，因此它是像素化的，并且出现了那些白线......

**这里的另一个帖子**

[https://productforums.google.com/forum/?fromgroups#!msg/chrome/tk9jXCJR_2A/1fQ33HvOUPsJ](https://productforums.google.com/forum/?fromgroups#!msg/chrome/tk9jXCJR_2A/1fQ33HvOUPsJ)

有同样的问题，他有一个形象来证明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:22:06.470

可能是 chrome 正在重新压缩以减少缓存大小。也许他们正在与移动浏览器共享一些代码来优化这一点，呵呵。

您是否尝试过使用 PNG 而不是 jpg 的相同图像？它可能会更好地承受再压缩。

# curl - Basecamp Classic API cURL 更新多个日历条目

> ID：10806315
> 
> 赞同：0
> 
> 时间：2012-05-29T20:32:57.617
> 
> 标签：curl, basecamp

似乎无法使用经典 API 从终端更新日历条目。

下面的内容目前为我提供了特定日历条目的 xml，但未成功发布更新。如果可能的话，我希望一次更新多个日历条目，或者一次至少更新一个，成功。

```
curl -H 'Accept: application/xml' -H 'Content-Type: application/xml' -u "API token":X POST -d '<request><calendar-entry><all-day type="boolean">true</all-day><title>Stuff</title><due-at type="date">2012-07-09</due-at></calendar-entry></request>'
https://"domain".basecamphq.com/projects/"project#"/calendar_entries/"entry#".xml 
```

我要提前感谢您的建议，这似乎是在没有任何包装的情况下进入大本营的最简单方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:57:46.013

啊，动词 PUT 将与 HTTP 一起使用，而不是 POST，并且在巧合的 X 占位符之后缺少 -X 标志

并且标志 -X 丢失了。这个 -X 在占位符 (apitoken):X 之后是必需的。Basecamp 在文档中使用 X 作为占位符，但这个字符目前在验证 API 调用时没有任何重要价值，但它代表了未来某个时候密码和 apitoken 验证的潜力。

根据上述问题，这是单个日历条目更新到单个和预先存在的大本营日历条目的 cURL：

```
curl -H 'Accept: application/xml' -H 'Content-Type: application/xml' -u "API token":X -X PUT -d '<request><calendar-entry><all-day type="boolean">true</all-day><title>Stuff</title><due-at type="date">2012-07-09</due-at></calendar-entry></request>'
https://"domain".basecamphq.com/projects/"project#"/calendar_entries/"entry#".xml 
```

# signals - 如何在自定义命令行界面中处理 ctrl-z？

> ID：10806316
> 
> 赞同：1
> 
> 时间：2012-05-29T20:33:01.337
> 
> 标签：signals, termios

我正在尝试制作一个命令行界面。我希望它处理`Ctrl`+ `Z`。它处理`Ctrl`+`C`就好了。现在，在处理+之前，我必须点击`Ctrl`+`Z`两次。这是处理+的代码：`Ctrl``Z``Ctrl``Z`

```
 } else if (c == 26) { // ctrl-z
                resetTerminal();
                kill(getpid(), SIGTSTP);
                setTerminal(); 
```

我知道为什么它必须被击中两次，但我不确定解决方案是什么。resetTerminal() 的代码是：

```
void resetTerminal() {
    // reset terminal to the way it was
    tcsetattr(STDIN_FILENO, TCSANOW, &tty_old);
} 
```

它恢复为无效的旧终端设置：

```
tty_new.c_lflag &= ~(ICANON | ECHO | ISIG); 
```

我不确定如何制作它，以便我可以恢复到旧的终端设置并传播`Ctrl`+`Z`并暂停我的程序。

有任何想法吗？谢谢。

# java - Struts2 portlet NotSerializable 异常

> ID：10806320
> 
> 赞同：1
> 
> 时间：2012-05-29T20:33:28.867
> 
> 标签：java, serialization, struts2, portlet, cluster-computing

我目前在使用带有 portlet 插件的 struts2 在集群环境中实现 jsr 168 portlet 时遇到问题。每当我使用模型驱动接口并提交表单时，我都会收到以下堆栈跟踪：

```
 SEVERE: Unable to serialize delta request for sessionid [0F246549355FD6749A5CF6EAE761F77F.worker1]
java.io.NotSerializableException: com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at com.opensymphony.xwork2.inject.util.ReferenceMap.writeObject(ReferenceMap.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at java.util.ArrayList.writeObject(ArrayList.java:570)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at org.apache.catalina.ha.session.DeltaRequest$AttributeInfo.writeExternal(DeltaRequest.java:389)
    at org.apache.catalina.ha.session.DeltaRequest.writeExternal(DeltaRequest.java:287)
    at org.apache.catalina.ha.session.DeltaRequest.serialize(DeltaRequest.java:302)
    at org.apache.catalina.ha.session.DeltaManager.serializeDeltaRequest(DeltaManager.java:725)
    at org.apache.catalina.ha.session.DeltaManager.requestCompleted(DeltaManager.java:1233)
    at org.apache.catalina.ha.session.DeltaManager.requestCompleted(DeltaManager.java:1198)
    at org.apache.catalina.ha.tcp.ReplicationValve.send(ReplicationValve.java:550)
    at org.apache.catalina.ha.tcp.ReplicationValve.sendMessage(ReplicationValve.java:537)
    at org.apache.catalina.ha.tcp.ReplicationValve.sendCrossContextSession(ReplicationValve.java:457)
    at org.apache.catalina.ha.tcp.ReplicationValve.sendReplicationMessage(ReplicationValve.java:432)
    at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:363)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

复制问题的示例程序 git://github.com/ctwomey1/Struts2PortletExample.git

我已经在运行 pluto 1.1.7 的 tomcat 6.0.33 中复制了这个问题。我在 struts 2.1.3.2 和 2.3.3 上试过这个

如果有人看到我做错了什么，我会喜欢建议:)

更新：我已将此记录为 struts2 portlet 插件的问题。我定期研究解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:03:39.647

不幸的是，这看起来像是 Struts 2 中的一个已知错误。要重现该错误，您需要一个带有 List 作为参数的 Struts 操作，然后当您尝试序列化此列表时会收到此堆栈跟踪（因为它不可序列化）。完整的错误报告可以在这里找到：

[https://issues.apache.org/jira/browse/WW-3414](https://issues.apache.org/jira/browse/WW-3414)

# c# - 比较不可变数据类型

> ID：10806325
> 
> 赞同：1
> 
> 时间：2012-05-29T20:33:46.867
> 
> 标签：c#, .net, algorithm, collections, immutability

是否有一种普遍接受的方法来比较可能包含长值列表的不可变对象？

到目前为止，我的界面如下：

```
interface Formula : IEquatable<Formula> {
   IList<Symbol> Symbols {get;}
}

interface Symbol : IEquatable<Symbol> {
   String Value {get;}
} 
```

在这里，不可变数据类型`Formula`表示`Symbol`'s 的序列。所以在一个公式中：

```
x -> y 
```

符号将是`x`, `->`, `y`.

我想根据它们的内容（例如符号列表）比较两个公式。所以对于一些任意的符号列表`new Formula(symbols)`来说是相等的。`new Formula(symbols)`

但是，我不想一直迭代地比较两个列表。

在实现中，我正在考虑在初始化期间创建某种计算值`Formula`- 并使用它进行比较。但是，这将需要我向我的界面添加某种方法。我会怎么称呼这种方法？

我不确定是否适合为此使用哈希码，因为它似乎仅限于整数。

任何帮助表示赞赏 - 如果有不清楚的地方，我会修改我的问题。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:40:17.003

您绝对可以为此使用哈希码。不要忘记哈希码不必是*唯一的*- 如果它不经常产生冲突（具有相同哈希码的两个不相等序列），它只会有帮助。（至少，尝试提出一种方法，在*明显*的情况下避免使用相等的哈希码。）

因此，您可以在构造时计算*一次*哈希码（通过依次组合每个符号的哈希码），然后将其返回，`GetHashCode`而无需每次都重新计算。这意味着您只需要比较具有相等哈希码的序列 - 这对于不相等的序列很少发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:41:46.410

不，您必须比较所有元素。您不能使用哈希码或类似方法，因为可能的公式集是无限的，而可能的哈希码集是有限的。

正如 Jon Skeet 所指出的，您可以使用哈希码来*减少*逐个元素比较公式的需要，但您不能*消除*这种需要。当两个公式的哈希码不相等时，您知道这些公式不相等，但是当它们的哈希码相等时，您需要逐个元素地比较它们是否相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:41:12.097

我相信这不是你需要做的全部......

`a+b = (a+b)`

会导致你的方法是错误的。

我相信你必须为两边的表达式构建 AST（抽象语法树），然后比较表达式。AST 将取消括号，因为它们在 AST 中表示为层次结构。

hth

马里奥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T21:00:31.543

这有点像覆盖 GetHashCode 的另一个答案，但我有不同的方法......因为公式似乎有一个字符串表示......

你不能覆盖 GetHashCode 并在覆盖中做一个

```
foreach(char c in ToString().ToCharArray()){

int hashCode |= c;

} 
```

这样做的结果将产生一个 4 字节代码，它是等式中符号的打包表示......

如果每个符号都有可以在 HashTable 中查找的特定 OpCode，则可以采取进一步措施。

我会用每个 OpCode 的别名构建 HashTable，这样每个 Symbol 就不必声明属性 OpCode。

然后，我将在 Symbol 类上创建一个 Extension ToOpCode，该类在上述 HashTable 中进行查找。

然后我会在 GetHashCode 中使用 Extension 方法，例如

公式....

```
public override int GetHashCode(){

    foreach(Symbol c in Symbols){

       int hashCode |= c.ToOpCode();

    }

} 
```

象征....

```
public override int GetHashCode(){
    retuurn Extensions.ToOpCode(this);

} 
```

此实现将为 a + b 和 b + a 产生相同的哈希，这对于您的问题非常重要...

此外，如果您以正确的顺序指定 OpCode，您在技术上将能够以以下形式比较方程式：

`(a) + (b)`==`(a+b)`

这可以通过确保括号操作码在哈希码中与数字不同的位置被赋予一个值来实现......

例如，如果您有 4 个字节（整数），则范围深度可以保留在第一个字节中，堆栈中上一个或下一个方程/符号的索引将是下一个，接下来的两个字节将保留用于符号数据和等式中的值/延续或变量数（不包括）。

这使您可以告诉某些事情，例如有多少嵌套级别等，因此您基本上也可以覆盖 Equals 以确保您可以区分`a + b`and`b + a`和（`((a) + (b))`如果需要）。

例如，您可能想知道方程式是否与某种方法完全相同，但在另一种方法中，您可能想知道方程式是否在做同样的事情，但不是以完全相同的方式写成。

这也将允许您以不同的方式确定相等性，例如检查范围深度是否匹配以及等式中的步数是否完全相同，而不仅仅是基于哈希码假设。

例如，您可以按如下方式转换以确定以下内容：

hash << 8 将是 parens 的部门 hash << 16 将是堆栈的上一个或下一个等式指针 hash << 24 将是等式中的符号或代码值延续或变量数（不包括）

你也可以只做 hash == anotherHash 但是这种方式给你更多的灵活性，几乎没有开销。

如果您在 Hash 中需要更多空间，则创建一个返回 long 的新方法 GetExtendedHashCode，然后在 GetHashCode 中移位/向下转换或重新格式化 ExtendedHashCode 以匹配 CLR 所需的 int 格式。

您还可以获得符号能够以这种方式表示变量和值的好处，方法是将它们留在堆栈上并像 CLR 一样使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T21:14:15.997

首先，我建议不要`IEquatable<T>`对任何非密封类型实施`T`。在非密封类型上实现的唯一安全方法`IEquatable<T>.Equals`通常是调用虚方法`Object.Equals`。否则，其父类`IEquatable<T>`为一种或多种类型实现的类可能`T`会覆盖`Object.Equals`而不`Object.GetHashCode`重新实现其所有`IEquatable<T>`接口；因此，任何未重新实现的此类接口都将被破坏。

其次，如果在比较两个`Formula`实例中的列表时，发现一对对应的`Symbol`引用是等价的但引用不同的实例，调用`System.Runtime.CompilerServices.RuntimeHelpers.GetHashCode()`每个实例可能会有所帮助。如果一个比较大于另一个，则将具有较大`RunTimeHelpers.GetHashCode()`值的引用替换为另一个列表中的引用。这将加速这些列表的任何未来比较。此外，如果重复比较具有相同项目的多个列表，则所有列表将“倾向于”具有相同的`Symbol`实例。

最后，如果发现列表是相等的，并且列表应该是“语义上”不可变的，则可以使用相同的`RuntimeHelpers.GetHashCode()`技巧来选择一个`List`实例。这将加快未来的比较。

# php - Troubleshooting with PHP Syntax

> ID：10806326
> 
> 赞同：1
> 
> 时间：2012-05-29T20:33:51.240
> 
> 标签：php, magento, syntax

I need help with php syntax below. Because I have several storeviews with magento, the Bold word **Warenkorb** should be replaced by something like the following:

```
<?php echo $this->__('My Cart') ?> 
```

so that with other storeviews the word Warenkorb will be translated.

Does anybody know how to do this?

```
<?php

  //get total items in cart
  $count = $this->helper('checkout/cart')->getSummaryCount();

  //get total price
  $total = $this->helper('checkout/cart')->getQuote()->getGrandTotal();

  if( $count == 0 ) {
    echo $this->__(' &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cococana.de/index.php/checkout/cart/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Warenkorb: <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp %s',$count);
  }

  if( $count == 1 ) {
    echo $this->__(' &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cococana.de/index.php/checkout/cart/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Warenkorb <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp',$count);
  }

  if( $count > 1 ) {
    echo $this->__(' &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cococana.de/index.php/checkout/cart/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Warenkorb: <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp %s',$count);
  }

  echo $this->__(' Artikel: %s', $this->helper('core')->formatPrice($total, false));

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:43:28.030

Magento 中的翻译是通过`__()`您已经在使用的块和辅助方法完成的。

他们接受任意数量的参数。第一个参数是带有可选占位符 (%s) 的字符串，以下参数充当占位符的替换。

你也已经在使用它了。

字符串将根据您必须提供的相关翻译文件进行翻译。阅读[此](http://www.magentocommerce.com/images/uploads/BLOG-Localization_in_Magento_%282%29.pdf)内容以获取更多信息。

是的..使用css作为间距。不仅因为您也必须在翻译文件中使用字符串（这将是一个巨大的 PITA `&nbsp;`），而且布局和内容的分离被认为是几十年来的最佳实践。

# python - Python：从字符串创建全局变量？

> ID：10806327
> 
> 赞同：12
> 
> 时间：2012-05-29T20:33:52.563
> 
> 标签：python

有没有办法从字符串创建全局变量？我知道你可以像这样从字符串中创建一个变量：

```
 string = 'hello'
    val = 10
    vars()[string] = val 
```

因此使 hello 变量等于 10。我不知道如何使该用户输入变量成为全局变量，但这不起作用：

```
 string = 'hello'
    val = 10
    vars()[string] = val
    eval("global " + string) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T20:37:54.587

您可以使用以下`globals()`功能：

```
name = "hello"
globals()[name] = 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T20:54:29.417

从模块设置全局变量：
我尝试了类似的尝试来简化我的 argparse 版本，这样它就允许名称的最小重复，支持不区分大小写的多个字符标志，但仍然使用混合大小写标志设置全局变量。我能想出的唯一解决方案是返回一个我可以执行的语句列表。我在模块内执行的尝试没有成功。我的例子：

# 自我测试

```
def main():
    print "Some tests with provided args"

    One = 1
    Two = 2
    Three = 3

    prs = ArgumentParserCI(description='process cmdline args')
    prs.add_argument('One')
    prs.add_argument('Three')
    cmdlineargs = ['-one', 'one', '--thr', "III"]
    argsdict, unknownargs, execlist = prs.parse_args(cmdlineargs)
    exec(execlist)
    print("cmdlineargs:", cmdlineargs)
    print (One, Two, Three)

if __name__ == "__main__":
    main() 
```

打印：

```
Some tests with provided args
('cmdlineargs:', ['-one', 'one', '--thr', 'III'])
('one', 2, 'III') 
```

# ios - On iOS, how do CALayer bitmaps (CGImage objects) get displayed onto Graphics Card?

> ID：10806329
> 
> 赞同：4
> 
> 时间：2012-05-29T20:33:52.983
> 
> 标签：ios, graphics, uiview, calayer, video-card

On iOS, I was able to create 3 `CGImage` objects, and use a `CADisplayLink` at 60fps to do

```
self.view.layer.contents = (__bridge id) imageArray[counter++ % 3]; 
```

inside the `ViewController`, and each time, an image is set to the view's CALayer `contents`, which is a bitmap.

And this all by itself, can alter what the screen shows. The screen will just loop through these 3 images, at 60fps. There is no UIView's `drawRect`, no CALayer's `display`, `drawInContext`, or CALayer's delegate's `drawLayerInContext`. All it does is to change the CALayer's `contents`.

I also tried adding a smaller size sublayer to `self.view.layer`, and set that sublayer's `contents` instead. And that sublayer will cycle through those 3 images.

So this is very similar to back in the old days even on Apple ][ or even in King's Quest III era, which are DOS video games, where there is 1 bitmap, and the screen just constantly shows what the bitmap is.

Except this time, it is not 1 bitmap, but a tree or a linked list of bitmaps, and the graphics card constantly use the Painter's Model to paint those bitmaps (with position and opacity), onto the main screen. So it seems that `drawRect`, CALayer, everything, were all designed to achieve this final purpose.

Is that how it works? Does the graphics card take an ordered list of bitmaps or a tree of bitmaps? (and then constantly show them. To simplify, we don't consider the Implicit animation in the CA framework) What is actually happening down in the graphics card handling layer? (and actually, is this method almost the same on iOS, Mac OS X, and on the PCs?)

(this question aims to understand how our graphics programming actually get rendered in modern graphics cards, since for example, if we need to understand UIView and how CALayer works, or even use CALayer's bitmap directly, we do need to understand the graphics architecture.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T23:09:45.640

现代显示库（例如 iOS 和 Mac OS 中使用的 Quartz）使用硬件加速合成。其工作方式与 OpenGL 等计算机图形库的工作方式非常相似。本质上，每个 CALayer 都作为一个单独的表面保存，由视频硬件缓冲和渲染，就像 3D 游戏中的纹理一样。这在 iOS 中实现得非常好，这就是 iPhone 以流畅的用户界面而闻名的原因。

在“旧时代”（即 Windows 9x、Mac OS Classic 等），屏幕本质上是一个大帧缓冲区，通过移动窗口等方式暴露的所有内容都必须由每个应用程序手动重绘。重绘主要由 CPU 完成，这对动画性能提出了上限。由于涉及重绘，动画通常非常“闪烁”。这种技术主要适用于没有太多动画的桌面应用程序。值得注意的是，Android 使用（或至少曾经使用）这种技术，这在将 iOS 应用程序移植到 Android 时是一个大问题。

过去的游戏（例如 DOS、街机等，在 Mac OS 经典版上也有很多使用），称为[sprite 动画](http://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29)的东西被用来提高性能并通过将运动图像保留在由硬件并与显示器的 vblank 同步，这意味着即使在非常低端的系统上动画也很流畅。然而，这些图像的大小非常有限，屏幕分辨率也很低，即使是今天的 iPhone 屏幕也只有大约 10-15% 的像素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T23:51:27.540

`contents`你在这里有一个合理的直觉，但是在和显示之间仍然有几个步骤。首先，`contents`不一定是`CGImage`. 它通常是一个名为的私有类`CABackingStorage`，它并不完全相同。在许多情况下，会进行硬件优化以绕过将图像渲染到主内存然后将其复制到视频内存。而且由于`contents`各个层都合成在一起，因此您距离“真正的”显示内存还有一段距离。更不用说修改`contents`直接影响模型层，而不是表示层或渲染层。另外，有些`CGLayer`对象可以将其图像直接存储在视频内存中。有很多不同的事情正在发生。

所以答案是，不，视频“卡”（芯片；它是 PowerVR BTW）不采用有序的层。它以未充分记录的方式获取较低级别的数据。有些东西（尤其是核心动画的一部分，可能还有 CGLayer）似乎是 OpenGL 纹理的包装，但其他东西可能是核心图形直接访问硬件本身。一旦你到达堆栈的这个级别，它就是私有的，并且可以从一个版本到另一个版本，从一个设备到另一个设备。

您还可能会发现 Brad Larson 的回复在这里很有用： [iOS：Core Graphics 是在 OpenGL 之上实现的吗？](https://stackoverflow.com/questions/7558636/ios-is-core-graphics-implemented-on-top-of-opengl)

您可能还对[iOS:PTL](http://iosptl.com/book)的第 6 章感兴趣。虽然它没有详细介绍实现细节，但它确实包含了很多关于如何提高绘图性能和最好地利用 Core Graphics 硬件的实际讨论。`CALayer`第 7 章详细介绍了绘图中涉及的所有开发人员可访问的步骤。

# php - 使用 PHP 将钱从 PayPal 转移到客户的银行账户

> ID：10806330
> 
> 赞同：0
> 
> 时间：2012-05-29T20:33:58.523
> 
> 标签：php, paypal, payment

我正在建立一个网站，用户可以在其中购买虚拟货币，然后再出售。我已经制作了使用 PayPals [DoDirectPayment API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPDirectPayment)购买积分的系统，但是当用户想要出售积分时，我卡在了支付给用户的点上。

我如何向没有[PayPal](http://paypal.com)帐户的用户付款？

当可以从信用卡号码中赚钱时，不应该以相反的方式来做吗？

顺便说一句，我正在使用[Angelleyes](http://www.angelleye.com/)库进行贝宝付款，如果它有什么不同的话。

这是我第一次使用网站付款，所以我没有这方面的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:51:00.183

您不能将钱转入一个银行账户，但您可以使用批量付款以编程方式向 Paypal 账户付款：[https ://www.paypal.com/cgi-bin/webscr?cmd=_batch-payment-overview-outside](https://www.paypal.com/cgi-bin/webscr?cmd=_batch-payment-overview-outside)

# magento - 从magento中的运输模块内部获取购物车列表

> ID：10806332
> 
> 赞同：0
> 
> 时间：2012-05-29T20:34:02.533
> 
> 标签：magento, magento-1.6

我正在尝试从 Magento 1.6 的 UPS 运输模块中确定我的购物车中当前有哪些产品。在函数中（USA/Model/Carrier/Ups.php）：

```
 public function setRequest(Mage_Shipping_Model_Rate_Request $request) 
```

我试过打电话：

```
$r->getProduct(); 
```

但它返回的只是一个无意义的字符串“GNDRES”。在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:15:20.783

你可以试试这个（未经测试的）代码：

```
$items = Mage::getSingleton("checkout/session")->getQuote()->getAllVisibleItems();

foreach ($items as $item) {
    $product = $item->getProduct();
    // Do something with $product
} 
```

# javascript - HTML5 - 一起开始音频和视频？

> ID：10806338
> 
> 赞同：2
> 
> 时间：2012-05-29T20:34:30.270
> 
> 标签：javascript, html, css, html5-video, html5-audio

我将如何使用`<audio>`and让音频和视频同时开始`<video>`？JavaScript 很好（并且可能需要）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:30:34.207

您没有提及文件类型，因此我使用了可在 Safari 中使用的 HTML-5 格式。

```
<!DOCTYPE>
    <meta charset="UTF-8">
    <title> audio video</title>

    <audio id="audioInHTML" controls="controls">     
    <source src="audio.wav" type="audio/wav"/>
    </audio>
    </div>

    <video id="videoInHTML" width="320" height="240" controls="controls">
      <source src="movie.mp4" type="video/mp4" />
    </video>

    <div id="playButtonDiv" </div>

    <form>
    <input type="button" value="PlaySoundAndVideo" onClick="PlaySoundAndVideo('videoInHTML'),PlaySoundAndVideo('audioInHTML')">

    </div>

    <script>

    function PlaySoundAndVideo(soundObj,videoObj) {
    var soundAndVideo=document.getElementById(soundObj,videoObj);
    soundAndVideo.play();
    }

    </script>

    <style type="text/css">

    #playButtonDiv {
    position:absolute;
    top:800px;

    };   

    </style> 
```

# c - 结构内存分配错误

> ID：10806341
> 
> 赞同：-2
> 
> 时间：2012-05-29T20:34:35.650
> 
> 标签：c, pointers, struct

我正在编写一个带有指针和结构的 C 项目，现在面临这个问题：有一个结构

```
struct Customer
{
    char Name[80];
    char Address[40];
    int ID;
    int Pnumber;
}; 
```

我将用 *line_count* 个成员创建一个动态数组。我使用此代码，但它使程序崩溃：

```
struct Customer* ph;
ph = (struct Customer*)malloc(line_count * sizeof(struct Customer)); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:42:47.927

好的：

```
struct Customer* ph;
ph = (struct Customer*)malloc(line_count * sizeof(struct Customer)); 
```

更好的：

```
struct Customer* ph =
  (struct Customer*)malloc(line_count * sizeof(struct Customer));
if (!ph) {
  <<error handling>>
  ... 
```

但坦率地说，听起来问题出在代码的其他地方。

您的 malloc() 从根本上没有问题。

也许“line_count”是假的，也许“malloc()”失败了（在这种情况下，它应该返回“NULL”）......或者你可能错误地访问了结构和/或未能正确初始化它。

实际崩溃的堆栈回溯将*非常*有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:38:46.167

只有`ph == NULL`在`malloc`调用之后并且您取消引用它时，您正在显示的代码段可能会崩溃。

从`malloc`手册页：

> malloc() 和 calloc() 函数返回一个指向已分配内存的指针，该指针适合任何类型的变量对齐。出错时，这些函数返回 NULL。NULL 也可以通过成功调用 malloc() 且大小为零，或成功调用 calloc() 且 nmemb 或大小等于 0 来返回。

# java - @RunWith(MockitoJUnitRunner.class) vs MockitoAnnotations.initMocks(this)

> ID：10806345
> 
> 赞同：135
> 
> 时间：2012-05-29T20:34:46.337
> 
> 标签：java, junit4, mockito

While writing a new jUnit4 test, I'm wondering whether to use `@RunWith(MockitoJUnitRunner.class)` or `MockitoAnnotations.initMocks(this)`.

I created a new test & the wizard automatically generated a test with the Runner. Javadocs for MockitoJUnitRunner state the following:

> Compatible with JUnit 4.4 and higher, this runner adds following behavior:
> 
> Initializes mocks annotated with Mock, so that explicit usage of MockitoAnnotations.initMocks(Object) is not necessary. Mocks are initialized before each test method. Validates framework usage after each test method.

It's not clear to me whether using the Runner has any advantage over the `initMocks()` method I have been using in past.

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-05-30T08:36:03.110

`MockitoJUnitRunner`为您提供框架使用的自动验证，以及自动`initMocks()`.

框架使用的自动验证实际上是值得拥有的。如果您犯了这些错误之一，它会为您提供更好的报告。

*   您调用静态`when`方法，但不要使用匹配的`thenReturn`,`thenThrow`或来完成存根`then`。 *（下面代码中的错误1）*

*   您调用`verify`了一个模拟，但忘记提供您要验证的方法调用。*（以下代码中的错误 2）*

*   您在或 之后调用该`when`方法`doReturn`，并传递一个模拟，但忘记提供您尝试存根的方法。 *（下面代码中的错误3）*`doThrow``doAnswer`

 *如果您没有验证框架使用情况，则在*以下*调用 Mockito 方法之前不会报告这些错误。这可能是

*   在相同的测试方法中（如下面的错误 1），
*   在下一个测试方法中（如下面的错误 2），
*   在下一个测试课上。

如果它们发生在您运行的最后一个测试中（如下面的错误 3），则根本不会报告它们。

以下是每种类型的错误的外观。在这里假设 JUnit 按照它们在此处列出的顺序运行这些测试。

```
@Test
public void test1() {

    // ERROR 1
    // This compiles and runs, but it's an invalid use of the framework because 
    // Mockito is still waiting to find out what it should do when myMethod is called.
    // But Mockito can't report it yet, because the call to thenReturn might 
    // be yet to happen.
    when(myMock.method1());

    doSomeTestingStuff();

    // ERROR 1 is reported on the following line, even though it's not the line with
    // the error.
    verify(myMock).method2();

}

@Test
public void test2() {

    doSomeTestingStuff();

    // ERROR 2
    // This compiles and runs, but it's an invalid use of the framework because
    // Mockito doesn't know what method call to verify.  But Mockito can't report 
    // it yet, because the call to the method that's being verified might 
    // be yet to happen.
    verify(myMock);
}

@Test
public void test3() {

    // ERROR 2 is reported on the following line, even though it's not even in 
    // the same test as the error.
    doReturn("Hello").when(myMock).method1();

    // ERROR 3
    // This compiles and runs, but it's an invalid use of the framework because
    // Mockito doesn't know what method call is being stubbed.  But Mockito can't 
    // report it yet, because the call to the method that's being stubbed might 
    // be yet to happen.

    doReturn("World").when(myMock);

    doSomeTestingStuff(); 

    //  ERROR 3 is never reported, because there are no more Mockito calls. 
} 
```

现在，当我五年多前第一次写这个答案时，我写了

> 所以我建议`MockitoJUnitRunner`尽可能使用。但是，正如 Tomasz Nurkiewicz 正确指出的那样，如果您需要另一个 JUnit 运行程序，例如 Spring 运行程序，则不能使用它。

我的建议现在已经改变。自从我第一次写这个答案以来，Mockito 团队添加了一个新功能。这是一个 JUnit 规则，它执行的功能与`MockitoJUnitRunner`. 但它更好，因为它不排除使用其他跑步者。

包括

```
@Rule 
public MockitoRule rule = MockitoJUnit.rule(); 
```

在你的测试课上。这会初始化模拟，并自动执行框架验证；就像`MockitoJUnitRunner`那样。但是现在，您也可以使用`SpringJUnit4ClassRunner`或任何其他 JUnitRunner。从 Mockito 2.1.0 开始，还有一些额外的选项可以准确控制报告的问题类型。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-29T20:40:51.640

使用 runner 可以让你节省一点编码（不需要`@Before`方法）。另一方面，有时无法使用跑步者，即当您已经在使用跑步者时，例如[`SpringJUnit4ClassRunner`](http://static.springsource.org/spring/docs/2.5.x/reference/testing.html#testcontext-junit4-runner).

而已。这只是一个偏好问题。*

# c++ - Remove all the elements that occur in 1 list from another c++

> ID：10806347
> 
> 赞同：3
> 
> 时间：2012-05-29T20:35:00.710
> 
> 标签：c++, list

Let's say I have two lists, l1 and l2\. I want to perform l1 - l2, which returns l1 with any elements that are also elements of l2 removed.

I can think of a naive loop approach to doing this, but that is going to be really inefficient. What is an efficient way of doing this in c++?

As an example, if I have l1 = [1,2,6,8] and l2 = [2,8], l1 - l2 should return [1,6]

thanks you guys

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:40:18.087

顺序重要吗？列表是否包含重复项？

如果不是，我建议做一个[set_difference](http://www.cplusplus.com/reference/algorithm/set_difference/)

不过请注意，如果您确实有重复项，我认为 set_difference 只会删除您要删除的重复元素的第一次出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:37:46.223

您可以使用散列集在摊销线性时间内执行此操作。

首先，创建一个空集 H。在 L1 上循环并将每个元素插入 H。

然后，循环 L2。对于 L2 的每个元素，当且仅当该元素不在 H 中时，附加到向量。

如果 H 提供恒定时间插入和访问，并且您使用恒定时间附加结构来存储临时结果，则整体算法在列表大小的总和中是线性的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:41:37.610

天真的方法是`O(n^2)`，因为您必须将第一个列表中的每个元素与第二个列表中的每个元素进行比较。

稍微好一点的方法是对列表进行排序 ( `O(n*log(n))`)，然后遍历它们。如果它们是排序的，你只需要一次通过，所以时间是`O(n*log(n))`。

更好的方法是将第二个列表的所有元素插入`std::unordered_set`( `O(n)`) 中，遍历第一个列表 ( `O(n)`) 的每个元素并检查它是否包含在集合中（`O(1)`摊销时间）。这应该这样做。- 这仅在您没有重复项时有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T21:21:21.340

如果您想对未排序的情况采用 O(n^2) 天真的方式，您可以使用一点`<algorithm>`和`std::bind`（或者如果这不是一个选项，则提升）技巧来做到这一点：

```
#include <list>
#include <algorithm>
#include <iostream>
#include <functional>
#include <iterator>

int main() {
  std::list<std::string> a = {"foo", "bar", "baz", "woof"},
                         b = {"baz", "bar", "random other thing"};

  a.erase(std::remove_if(a.begin(), a.end(), std::bind(std::equal_to<std::list<std::string>::iterator>(), b.end(), std::bind(std::find<std::list<std::string>::iterator, std::string>, b.begin(), b.end(), std::placeholders::_1))), a.end());

  std::copy(a.begin(), a.end(), std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

# python - Python tkinter 入口值加法

> ID：10806349
> 
> 赞同：0
> 
> 时间：2012-05-29T20:35:05.123
> 
> 标签：python, tkinter, ttk, tkinter-entry

我正在制作一个 Python GUI，其中用户将 int 值输入到一个`Entry`小部件中，然后程序将这些值添加在一起。

但是，由于某种原因，每当我尝试告诉程序添加这些值时，都会出现错误：

```
TypeError: unsupported operand type(s) for +: 'Entry' and 'Entry'" 
```

我环顾四周，但找不到有关此主题的任何内容。我尝试将`Entry`小部件声明为整数，`IntVars`但它没有奏效，所以我想知道是否真的可以将`Entry`值相加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:52:44.077

首先，您必须`get`将字符串从 中`Entry`转换为整数。

```
from Tkinter import *
root = Tk()

e1 = Entry(root)
e2 = Entry(root)
l = Label(root)
def callback():
    total = sum(int(e.get()) for e in (e1, e2))
    l.config(text="answer = %s" % total)
b = Button(root, text="add them", command=callback)
for widget in (e1, e2, l, b):
    widget.pack()
b.mainloop() 
```

# bash - 关联数组默认是本地的

> ID：10806357
> 
> 赞同：37
> 
> 时间：2012-05-29T20:36:13.050
> 
> 标签：bash, scope

默认情况下，关联数组在函数体内声明时似乎是局部的，它们应该是全局的。以下代码

```
#!/bin/bash

f() {
    declare -A map
    map[x]=a
    map[y]=b
}

f
echo x: ${map[x]} y: ${map[y]} 
```

产生输出：

```
x:  y: 
```

而这

```
#!/bin/bash

declare -A map

f() {
    map[x]=a
    map[y]=b
}

f
echo x: ${map[x]} y: ${map[y]} 
```

产生输出：

```
x: a y: b 
```

* * *

是否可以在函数中声明全局关联数组？或者可以使用什么解决方法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-29T21:14:24.077

> 发件人：Greg Wooledge
> 发送时间：2011 年 8 月 23 日，星期二 06:53:27 -0700
> 主题：回复：YAQAGV（关于全局变量的另一个问题）
> 
> bash 4.2 添加了“declare -g”来从函数中创建全局变量。

谢谢格雷格！然而 Debian Squeeze 仍然有 Bash 4.1.5

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-16T01:49:03.583

很好，4.2 添加了“declare -g”，但它对于关联数组来说是错误的，所以它（还没有）回答这个问题。这是我的错误报告和 Chet 确认下一个版本计划进行修复。

[http://lists.gnu.org/archive/html/bug-bash/2013-09/msg00025.html](http://lists.gnu.org/archive/html/bug-bash/2013-09/msg00025.html)

但是我偶然发现了一种解决方法，而不是同时声明数组并为其分配初始值，而是先声明数组然后进行分配。也就是说，不要这样做：

```
declare -gA a=([x]=1 [y]=2) 
```

但这不是：

```
declare -gA a; a=([x]=1 [y]=2) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-29T21:18:39.940

您已经使用 declare -g 回答了您自己的问题。bash 版本 < 4.2 的解决方法是在函数之外声明数组。

```
f() {
   map[y] = foo
}

declare -A map
foo
echo "${map[y]}" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-21T18:32:22.067

此示例在 bash 中的函数内声明了一个全局关联数组变量。

```
set -euf +x -o pipefail # There is no place for implicit errors in this script.

function init_arrays(){
    # FYI. Multiple array declarations are not a problem. You can invoke it multiple times.

    # The "-gA" switch is the trick for the global array declaration inside a function.
    declare -gA my_var
}

function do_work(){
    init_arrays

    my_var[$1]=OPPA
}

do_work aa

echo ${my_var[aa]}
echo It is expected to get OPPA value printed above 
```

在 GNU bash 版本 4.4 上测试...

**重要笔记。**
该`declare -A`命令[实际上并没有立即创建关联数组](https://stackoverflow.com/questions/26925905/in-bash-test-if-associative-array-is-declared/26931860#26931860)；它只是在变量名称上设置一个属性，该属性允许您将名称作为关联数组分配给该名称。数组本身在第一次赋值 (!!!) 之前不存在。

（我想在这个线程中看到一个完整的工作示例，抱歉。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-05T13:31:33.697

对于那些坚持使用 Bash 版本 < 4.2 并且对建议的解决方法不满意的人，我分享了我对全局关联数组的自定义实现。它没有 bash 关联数组的全部功能，您需要注意数组索引中的特殊字符，但可以完成工作。

```
get_array(){
   local arr_name="$1"
   local arr_key="$2"

   arr_namekey_var="ASSOCARRAY__${arr_name}__${arr_key}"
   echo "${!arr_namekey_var:=}"
}

set_array(){
   local arr_name="$1"
   local arr_key="$2"
   local arr_value="$3"

   arr_namekey_var="ASSOCARRAY__${arr_name}__${arr_key}"
   if [[ -z "${arr_value}" ]]; then
      eval ${arr_namekey_var}=
   else
      printf -v "${arr_namekey_var}" "${arr_value}"
   fi
} 
```

几点注意事项：

*   数组名和数组键可以组合成一个值，但实践证明拆分很方便。
*   `__`由于分隔符可能会被恶意或粗心使用所破坏——为了安全起见，除了仅使用字母数字值之外，在数组名称和键中仅使用单下划线值。当然，内部变量的组成（分隔符、前缀、后缀...）可以根据应用程序和开发人员的需要进行调整。
*   默认值扩展保证未定义的数组键（以及数组名！）将扩展为空字符串。
*   一旦您转移到您熟悉内置关联数组的 ba​​sh 版本，这两个过程就可以用作实际关联数组的包装器，而无需重构整个代码库。

# wordpress - Wordpress add_submenu_page 不接受参数

> ID：10806358
> 
> 赞同：2
> 
> 时间：2012-05-29T20:36:19.087
> 
> 标签：wordpress

我在开发 Wordpress 插件时遇到了这个问题。这是我正在使用的区域的代码片段：

```
add_submenu_page( 'admin_manager',
                  'Add Event',
                  'Add Event',
                  'manage_options',
                  'add_event&action=modify',
                  'add_event_handler' ); 
```

如您所见，在我的菜单 slug 上，我想添加 '&action=modify'

```
'add_event&action=modify' 
```

但是当我这样做时，Wordpress 拒绝我访问并说我没有适当的权限。如果没有额外的参数，它就可以正常工作，wordpress 中是否有一些不允许这样的东西？

有什么想法或解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:27:56.080

slug 参数不打算接受查询参数。如果您打算设置某种默认操作（我还认为“操作”查询很可能是 Wordpress 本身使用的保留关键字），为什么不将页面设置为填充为如果参数默认存在？

我的猜测是您还需要其他参数，然后您可以使用表单发送数据（通过 POST 或 GET）以使用这些参数填充您的页面。例如：

```
<!-- SUBMENU PAGE -->
<form action="" method="GET">
    <label>Select Action: </label>
    <select name="jKern_action">
        <option value="modify">Modify</option>
        <option value="add">Add Event</option>
        <option value="delete">Delete Event</option>
    </select>
</form>
<?php
$action = isset($_GET['jKern_action']) ? $_GET['jKern_action'] : 'modify';
switch($action)
{
    case 'add' :
    ?>
        <!-- YOUR EVENT ADDING HTML HERE -->
    <?php
    break;
    case 'delete' :
    ?>
        <!-- DELETE HTML HERE -->
    <?php
    break;
    default :
    ?>
        <!-- DEFAULT MODIFICATION HTML -->
<?php
}
?> 
```

这不是一个完美的例子，但我相信你可以收集到这里所做的事情。如前所述，slug 参数不是用来填充查询的，您还应该将 GET 和 POST 键（以及选项和元键）命名为您的代码所独有的东西，这样任何命名冲突的可能性就会很小。

在不依赖表单导航的情况下正确使用子菜单导航的另一个示例是这样的：

```
<a href="?page=add_event&jKern_action=add">Add Event</a>
<a href="?page=add_event&jKern_action=modify">Edit Event</a>
<a href="?page=add_event&jKern_action=delete">Delete Event</a>
<?php
...
?> 
```

您最好的选择是查找插件作者如何有效使用 add_submenu_page() 函数的一些示例，但大多数情况下，您应该使用它并习惯正常的 Wordpress 流程的工作方式。

祝你好运，如果这有帮助，请告诉我。

# openerp - 在 OpenERP 中，如何在安装模块时强制 SQL 运行？

> ID：10806362
> 
> 赞同：4
> 
> 时间：2012-05-29T20:36:29.983
> 
> 标签：openerp

我有一个内置在 OpenERP 中的模块，可以为现有模型添加一些字段。

定义大致如下：

```
class res_partner(osv.osv):
    _name = _inherit = 'res.partner'
    _columns = {
        'my_special_id': fields.integer('Special ID', required=False, readonly=True),
    }
    _defaults = {
        'my_special_id': lambda *a: None
    }

    _sql_constraints = [
        ('special_id_uniq', 'UNIQUE (my_special_id)', 'Must be unique.'),
    }

    _sql = """CREATE UNIQUE INDEX special_id_limited_uniq
            ON res_partner (my_special_id)
            WHERE my_special_id != 0
    """
res_partner() 
```

我的目标是有一个字段（special_id_uniq）：

1.  默认为 NULL
2.  是整数
3.  在所有值中是唯一的，但 NULL 除外

我的第一直觉是创建上面的 _sql_constraint 定义，但这引起了问题：显然 OpenERP 没有可为空的整数字段，因此“无”被视为 0。这打破了 SQL 约束，因为现在必须允许多个 0 值.

为了解决这个问题，我删除了模型上的 _sql_constraints 选项并添加了创建 PostgreSQL 部分索引的 _sql 代码。为了验证它是否有效，我自己在 PostgreSQL 上运行了 SQL，它达到了我想要的效果。但是，当我通过 OpenERP 创建一个新数据库并安装我的自定义模块时，此 SQL 不会运行。那是因为没有创建模型：

```
def _auto_init(self, cr, context=None):
    #...
    create = not self._table_exist(cr)
    #...
    #Line 3046 of openerp/osv/orm.py version 6.1 function _auto_init
    if create:
        self._execute_sql(cr)
    #... 
```

那么，如何在模块安装时运行一些自定义 SQL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:38:50.390

实际上，我可能刚刚回答了我自己的问题：覆盖 _auto_init。

编辑：

是的，在安装/升级期间运行 SQL 的方法如下：

```
def _auto_init(self, cr, context=None):
    ret = super(res_partner, self)._auto_init(cr, context)
    self._execute_sql(cr)
    return ret 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T08:29:46.557

`function`您可以通过在模块的数据 xml 文件中添加一个条目来实现此目的。

```
<openerp>
  <data>
    <!-- ... your init data records ...-->
    <function model="res.partner" name="_my_init_mehod"/>
  </data>
</openerp> 
```

您可以在标准模块中看到一个工作示例`document`： `document_data.xml` 声明调用函数`_attach_parent_id`以在安装结束时将所有附件迁移到新的 DMS 结构。

# c# - Spring.Net可以为所有派生类注入抽象类构造函数arg吗

> ID：10806363
> 
> 赞同：3
> 
> 时间：2012-05-29T20:36:30.367
> 
> 标签：c#, asp.net-mvc, spring.net

我们在 MVC3 项目中为 IOC 容器使用 spring。我正在尝试制作一个基本控制器，它将对我们的 IUserIdentity 接口具有构造函数依赖项。我想在抽象类的应用程序上下文文件中定义构造函数依赖项，并希望spring能够为每个派生类注入它。

```
public abstract class ControllerBase : Controller
{
    private readonly IUserIdentity _userContext;

    public ControllerBase(IUserIdentity userContext)
    {
        _userContext = userContext;
    }
}

public class ChildController : ControllerBase
{
   private readonly IChildDependency _childService;
   public ChildController(IUserIdentity userContext, IChildDependency childService)
    : base(userContext)
   {
       _childService= childService;
   }
} 
```

我希望有一种方法可以定义如下内容 - （不确定它是如何工作的），而无需为每个派生类重新定义 UserIdentity。

```
<object id="ControllerBase" abstract="true" singleton="false" >
    <constructor-arg index="0">
      <ref object="DefaultUserIdentity"/>
    </constructor-arg>
</object>
<object id="ChildController" singleton="false"  >
    <constructor-arg index="1" >
      <ref object="ConcreteChildDependency" />
    </constructor-arg>
</object> 
```

正如所料，当我做这样的事情时，spring 不知道在派生 (ChildController) 类中为第一个参数输入什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:21:27.407

尝试使用属性引用`ControllerBase`对象定义：`parent`

```
<object id="ControllerBase" abstract="true" singleton="false" >
    <constructor-arg index="0">
      <ref object="DefaultUserIdentity"/>
    </constructor-arg>
</object>
<object id="ChildController" singleton="false" parent="ControllerBase" >
    <constructor-arg index="1" >
      <ref object="ConcreteChildDependency" />
    </constructor-arg>
</object> 
```

这将让`ChildController`“继承”对象定义`ControllerBase`。[有关对象定义继承](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-childobjects)的更多信息，请参阅 spring.net 文档。您可能希望从构造函数 args 中删除索引属性，顺便说一句。如果可以隐式解析构造函数参数类型，则不需要它们。当然，您`ChildController`需要一个类型定义。

# c - Initializing circular data in C. Is this valid C code according to any standard?

> ID：10806365
> 
> 赞同：16
> 
> 时间：2012-05-29T20:36:38.730
> 
> 标签：c, gcc, circular-reference, static-initialization, recursive-datastructures

I wanted to see if I could initialize a global variable to point to itself:

```
#include <stdio.h>
struct foo { struct foo *a, *b; } x = { &x, &x };
int main()
{
    printf("&x = %p, x.a = %p, x.b = %p\n", &x, x.a, x.b);
    return 0;
} 
```

This code compiles and runs as expected with `gcc` (all three pointers print identically).

I want to know:

1.  Is this reliable?
2.  Is this standard?
3.  Is this portable?

**EDIT:** Just to clarify, I am questioning the availability of the address of `x` in its own initializer.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T20:45:47.300

是的以上所有。您有几个使用相同地址初始化的指针，因此它们拥有相同的地址，这与您初始化它们时使用的地址相同。

或许更有趣的`x.a`是，也保证指向自身（即，结构中的第一个元素保证在结构的最开始，因此保证了指向结构的指针，转换为第一个元素的类型指向第一个元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T21:07:43.800

这是标准的 C 代码。

强大标准的这一段允许它（强调我的）：

> （C99，6.2.1p7）“结构、联合和枚举标记的范围在标记出现在声明标记的类型说明符之后开始。每个枚举常量的范围都在其定义的枚举数出现之后开始在枚举器列表中。**任何其他标识符的范围都在其声明符完成后开始。** “

有关信息，请注意，为了说明 6.2.1p7 的最后一句话，Derek M. Jones 的“新 C 标准”一书使用了与您的示例类似的示例：

```
struct T {struct T *m;} x = /* declarator complete here. */ {&x}; 
```

# rss - size of an RSS item body

> ID：10806371
> 
> 赞同：0
> 
> 时间：2012-05-29T20:37:05.080
> 
> 标签：rss, rss-reader

I want to store the items of an RSS feed in a database. I created a table 'items' where, among other fields (author, guid, ...), I have a field for the body. How big should that be? Is there a limitation on the size of the body of an rss item? If not, what's the average of this size?

EDIT: as pointed out by random, [Maximum length of RSS description item](https://stackoverflow.com/q/8710676/825190) already answers my first two questions. The last one remains open: I still wonder if anyone has run tests on the average of the content of the description tag in a rss feed.

# cron - 是否使用作业调度程序或 sleep() 函数

> ID：10806384
> 
> 赞同：1
> 
> 时间：2012-05-29T20:38:32.033
> 
> 标签：cron, sleep

我很困惑是使用 cron 作业调度程序还是在程序本身中使用睡眠功能。以前对此有疑问，但我似乎对它们有一些不同的要求。

我需要程序上一次运行的一些信息，所以如果我使用 cron 来安排作业，我必须将这些信息存储在某个地方并下次重新读取（如果大小为此信息增长）。我也可以使用 sleep() 但这将使用资源。

我需要每 10 分钟左右重新运行一次程序。哪个更好用。有没有其他我可能会错过的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:43:40.980

一般来说，你应该尽可能地使用 cron 来完成这样的事情。

我能预见的唯一问题是，如果您的程序运行时间超过 10 分钟，那么 cron 无论如何都会在 10 分钟后调用下一次执行。这基本上会产生一个非常长的竞争条件，如果您确实睡眠，它只会在上一次执行结束后开始睡眠。

但是假设你的程序运行时间会更少，我会说使用 cron。

# reporting-services - SSRS 2008 和文本框的动态定位

> ID：10806393
> 
> 赞同：2
> 
> 时间：2012-05-29T20:39:00.363
> 
> 标签：reporting-services, rdl

我正在尝试制作一张薪水支票。我将允许用户根据他们的检查样式设置项目的位置。

根据我的研究，SSRS 中文本框的位置似乎是静态的而不是动态的。顶部/左侧没有“表达式”选项。我认为解决此问题的一种方法可能是使文本框变大并重叠，然后根据表达式将填充顶部/左侧设置为用户选择的位置。但是，似乎与 HTML 类似，文本框要么漂浮在更高级别的文本框周围，要么只是从视图中消失。

如果有办法告诉 SSRS 不关心文本框的顺序并简单地显示它们重叠，这将很简单，但我不觉得有。

鉴于此，我还有哪些其他选项可以在 SSRS 2008 报告中动态定位文本框？我正在与这个项目一起前进，但我遇到了这个绊脚石。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:06:43.067

SSRS 为您提供了很多动态格式化选项，但大小和位置是固定的。你无法改变这一点。文本框的重叠在 HTML 和 Excel 等软中断渲染器中不起作用，但在 PDF 或 TIFF 等硬中断渲染器中起作用。您是否尝试过填充技术并将报告输出为 PDF？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:41:42.920

我不确定你的报告会做什么，但在类似的情况下，我通常使用**空格字符**来定位文本。例如，

```
IIf(Len(Fields(YourColumn.valu)) > 10, Fields(YourColumn.valu), "    ") 
```

请注意，您必须确保它可以在您的情况下实施。我不确定它是否有用，但只要位置和宽度属性是固定的，这是唯一的选择

注意 2：我使用的是**牢不可破的空格字符**而不是**简单的空格**，以便 SSRS 渲染它没有任何问题

# sql-server-2008 - 使用输入参数执行 SQL Server 存储过程

> ID：10806397
> 
> 赞同：1
> 
> 时间：2012-05-29T20:39:16.947
> 
> 标签：sql-server-2008, c#-4.0

您能否建议如何从 Sql Server 执行接收输入参数的存储过程？我试过了，但失败了：

```
EXEC GetFilmsInCategory('SF'); 
```

顺便说一句，存储过程是正确定义的。我从可视化界面执行了它，它工作了，自动生成了这段代码：

```
DECLARE @return_value int

EXEC @return_value = [dbo].[GetFilmsInCategory] @CatNume = N'SF'

SELECT 'Return Value' = @return_value 
```

我也发现这个自动生成的代码......很长，因为我期待类似于我最初尝试的东西：

```
EXEC GetFilmsInCategory('SF'); 
```

你能解决这个问题或提供替代方案吗？谢谢！

安娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:42:38.673

尝试：

```
EXEC GetFilmsInCategory 'SF' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T21:05:44.677

您还可以按名称寻址参数：

```
EXEC GetFilmsInCategory @CatNume = 'SF' 
```

# android - 使用 SharedPreferences 存储数据以供广播接收器使用不起作用

> ID：10806398
> 
> 赞同：1
> 
> 时间：2012-05-29T20:39:18.647
> 
> 标签：android, broadcastreceiver, sharedpreferences, flags

我正在编写一些代码，当屏幕打开时打开或关闭飞行模式（取决于用户的选择）。我保留了用户选择的标志（0 表示关闭，1 表示开启）。但出于某种原因，无论用户选择什么，在活动中选择 (airplanei) 的值始终为 1。我确定错误出现在我发布的代码中；最有可能不正确地使用 SharedPreferences。

活动代码：-

```
protected void airplane(int i) {
    // Store flag in SharedPreferences
    SharedPreferences flags = this.getSharedPreferences("toggleflags",
                    MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = flags.edit();
    if (i == 0)
        editor.putInt("airplanei", 0);
    else if (i == 1)
        flags.edit().putInt("airplanei", 1);
    else if (i == -1)
        flags.edit().putInt("airplanei", -1);
    editor.commit();
} 
```

广播接收器中的代码：-

```
public class Screen_On extends BroadcastReceiver{
@Override
public void onReceive(final Context context, Intent intent) {
    SharedPreferences flag = context.getSharedPreferences("toggleflags", 0);
    int i = flag.getInt("airplanei", 1);
    if (i == 0) {
            //Code to turn airplane mode off
    } else if (i == 1) {
            //Code to turn airplane mode on
    }
    }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:42:35.087

当 (i == 0) 使用 editor.putInt() 时，对于 (i == 1) 和 (i == -1) 使用 flags.edit()。

我相信你应该为他们使用 editor.putInt() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:47:42.793

正如@Matt 已经说过的那样，您实际上创建了两个新实例，`Editor`但仅首先提交：

```
flags.edit().putInt("airplanei", 1); // New editor here
...
flags.edit().putInt("airplanei", -1);
...
editor.commit(); // Commit first editor instance 
```

# python - 结构命名空间需要一个 fabfile

> ID：10806399
> 
> 赞同：4
> 
> 时间：2012-05-29T20:39:23.010
> 
> 标签：python, namespaces, fabric

我正在阅读有关[Fabric Namespaces](http://docs.fabfile.org/en/1.4.2/usage/tasks.html?highlight=namespace#namespaces)的基本教程。

我希望做一些类似于[Structuring a fabric project with namespaces](https://stackoverflow.com/questions/10574580/structuring-a-fabric-project-with-namespaces)

我的`__init__.py`文件看起来：

```
from fabric.api import task

@task
def abc():
   pass 
```

当我运行时，`fab --list`我收到此错误：

```
me@galvatron:/tmp/fabric_test$ fab --list

Fatal error: Couldn't find any fabfiles!

Remember that -f can be used to specify fabfile path, and use -h for help.

Aborting. 
```

谁能告诉我我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T22:08:38.277

[根据文档](http://docs.fabfile.org/en/1.4.2/usage/fabfiles.html#fabfile-discovery)，该文件夹仍需要命名为 fabfile ，除非您指定：

```
$ fab -f myfolder -l 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T08:40:46.813

我有同样的问题。我按照文档[http://docs.fabfile.org/en/1.8/usage/fabfiles.html#fabfile-discovery](http://docs.fabfile.org/en/1.8/usage/fabfiles.html#fabfile-discovery)构建了一个名为的模块`fabfile`，并在其中放置了不同的 fabfile，但是当我尝试运行时，`fab -l`我得到了一个错误`Fatal error: Fabfile didn't contain any commands!`。

为了解决这个问题，我必须将所有 fabfiles 导入`fabfile/__init__.py`，如下所示：

```
from myfab_1 import *
from other_fab import *
from other_tasks import * 
```

在此之后，我可以做`fab -l`并获得所有文件中所有任务的列表。呼叫`fab some_task`也开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:47:47.970

我也只是在玩织物，而且文档很薄。

为了让织物在没有 -f 的情况下使用新功能，您需要在一个名为 fabfile.py 的文件中定义它们，因此尝试将您的功能放入该文件中，删除所有其他文件，然后“fab abc”应该会很好用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-01T05:04:11.307

如果你想执行除 fabfile 以外的任何其他名称的文件，例如：filename.py

我的 filename.py 包含内容：

```
def hello():
    print ("Hello world") 
```

你必须像这样执行命令： `fab -f pathToFile methodnameInside.`

例子：`fab -f filename.py hello`

# asp.net - 如何制作一个只清理文本框数据的按钮？

> ID：10806401
> 
> 赞同：1
> 
> 时间：2012-05-29T20:39:28.730
> 
> 标签：asp.net, c#-4.0, button

我怎样才能使按钮工作，以便它同时清除弹出的所有**文本框**...

是否有一行代码可以执行上述功能？

我试过这个

```
protected void AddNext_Click(object sender, EventArgs e)
{
    AccountNumber.Text = null;
    AccountTitle.Text = null;
    PinNumber.Text = null;
    CreationDate.Text = null; 
    Balance.Text=null;
    AccountTitle.Text = null; 
```

`}`

但是有没有更好的方法让所有文本框都空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:48:38.617

如果您希望通过单击按钮清除页面上的所有文本框，则此方法有效：

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    foreach (TextBox i in this.Page.Form.Controls.OfType<TextBox>().ToList())
    {
        i.Text = null;
    }
 } 
```

我会小心处理这个问题，因为它会清除页面上的每个文本框。但除此之外，这可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:41:37.087

找到它所在的表单并在 JavaScript onclick of button 中调用 reset() 函数。

# r - 在 R 中绘制巨大的数据文件？

> ID：10806404
> 
> 赞同：9
> 
> 时间：2012-05-29T20:39:51.060
> 
> 标签：r, ggplot2

我有一个包含大约 2000 万行的输入文件。文件大小约为 1.2 G。无论如何我可以在 R 中绘制数据。有些列有类别，其中大部分是数字。

我已经用大约 800K 行的输入文件的一小部分尝试了我的绘图脚本，但是即使我有大约 8G 的 RAM，我似乎也无法绘制所有数据。有什么简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T07:50:57.340

如果没有更清楚地描述你想要的情节，很难给出具体的建议。但是，一般来说，没有必要在一个图中绘制 2000 万个点。例如，时间序列可以由样条拟合或某种平均值表示，例如将每小时数据汇总为每日平均值。或者，您可以绘制数据的一些子集，例如在时间序列示例中每天只绘制一个点。所以我认为你的挑战不是在一个情节上获得 2000 万分，甚至 800k，而是如何有效地聚合你的数据，以传达你想要传达的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-06T05:24:31.410

[正如 Ben Bolker 在Speed up plot() function for large dataset](https://stackoverflow.com/questions/10945707/speed-up-plot-function-for-large-dataset)中所建议的，用于绘制 hexbins 而不是散点图的包 hexbin 对我来说相当适用于 4GB RAM 的 200 万条记录。但是对于同一组变量的 2 亿条记录/行，它失败了。我尝试减小 bin 大小以调整计算时间与 RAM 使用情况，但没有帮助。

对于 2000 万条记录，您可以尝试使用 xbins = 20,30,40 开始的 hexbins。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T05:40:35.157

直接绘制到光栅文件设备（`png()`例如调用）要快得多。我尝试绘图`rnorm(100000)`，在我的笔记本电脑 X11 cairo 绘图需要 2.723 秒，而`png`设备在 2.001 秒内完成。以 100 万分计算，数字分别为 27.095 和 19.954 秒。

我使用 Fedora Linux，这里是代码。

```
f = function(n){
x = rnorm(n)
y = rnorm(n)
png('test.png')
plot(x, y)
dev.off()}

g = function(n){
x = rnorm(n)
y = rnorm(n)
plot(x, y)}

system.time(f(100000))
system.time(g(100000)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-05T12:17:08.390

用 memory.limit() 增加内存帮助了我......这是用 ggplot 绘制近 36K 记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T20:45:05.953

`memory.limit(size=2000)`用（或更大的东西）扩展可用内存有帮助吗？

# python - enthought 导入：enthought.traits.api 与 traits.api

> ID：10806405
> 
> 赞同：2
> 
> 时间：2012-05-29T20:39:58.003
> 
> 标签：python, enthought

在库中是以这种方式导入的特征：

```
from enthought.traits.api import Int, Float
# and the other bad thing:
from enthought.traits.ui.api import View 
```

但是我已经通过 pip ( `pip install traits`) 安装了特征，并且在这个版本中，特征是这样导入的：

```
from traits.api import Int, Float
# here is
from traitsui.api import View 
```

真是一团糟！

如何使用 enthougt.traits 等？或者我如何创建一个简单的包装器，以便获得一个伪思考模块？

（我也试过`pip install ets`，但不是所有的包都想编译。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:59:31.090

安装[etsproxy](http://pypi.python.org/pypi/etsproxy) ( [github](https://github.com/enthought/etsproxy) ) 模块以实现向后兼容性。

# javascript - JavaScript Jquery 动态 OOP 调用

> ID：10806408
> 
> 赞同：2
> 
> 时间：2012-05-29T20:40:05.507
> 
> 标签：javascript, jquery, oop

好的，不知道我是否会给自己任何正义来尝试描述这一点。但..

我有一些代码 OOP 风格，你可以这样称呼它：`objectName.functionName(properties, values, etc);`

到目前为止，我似乎已经遇到了路障。我是多个功能，可以做各种事情，但我有一个功能，我想充当许多人的“刷新”功能。如果它是我想不时刷新的单个功能，那将起作用。总的来说，我也不希望重新发明轮子。

所以我当前的点击事件看起来像是对上面的调用。在我使用的链接中，我有我的隐藏参数，可以根据功能的需要，很好但是这是我最近遇到的第 22 个问题，我需要在同一页面上为各种功能进行多次刷新。所以我想知道有没有一种方法可以将 functionName 作为变量传递给对象，这样它就可以像

```
var funcNamVar = functionName; 
objectName.[funcNamVar](properties, values, etc); 
```

注意括号 [ 和 ] 只是为了表示我知道它们不应该存在的概念

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:42:19.357

当然。你实际上可以做

```
objectName[funcNamVar](properties, values, etc); 
```

# mysql - PHP/MYSQL 最流行的查询语法

> ID：10806415
> 
> 赞同：0
> 
> 时间：2012-05-29T20:40:37.793
> 
> 标签：mysql, sql

我正在尝试创建一个函数，该函数根据按视图数排名的页面视图数返回一个 idnumbers 数组（对于页面）。每次有人查看表格时，都会有一个新行。所以我基本上需要计算行数，但是通过 pageid 来计算。我认为它使用计数，但 SQL 不是我的强项。谁能提出正确的方法来做到这一点？

```
table 'views':

id | pageid | 

SELECT COUNT(id) from views WHERE pageid== '22' ORDER BY COUNT(id) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:42:06.550

试试这个

```
SELECT pageid, COUNT(id) FROM views 
WHERE pageid== '22' 
GROUP BY pageid 
ORDER BY COUNT(id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:42:54.433

我会将此作为评论发布，但我显然还无权发表评论......

> 我将如何回显 Count(id)？

像这样分配别名：

```
SELECT pageid, COUNT(id) as viewcount FROM views 
WHERE pageid== '22' 
GROUP BY pageid 
ORDER BY COUNT(id) 
```

然后您可以使用以下命令访问该行：

```
echo $row['viewcount']; 
```

抱歉，我对连接部分无能为力 - 在使用 count 或 group by 等功能时，我从来没有运气好加入表。

# cordova - 黑莓上的 Phonegap 和谷歌地图

> ID：10806416
> 
> 赞同：1
> 
> 时间：2012-05-29T20:40:39.800
> 
> 标签：cordova, google-maps-api-3, blackberry-webworks

我正在尝试创建一个简单的应用程序，它使用 Google 地图来显示用户搜索过的位置的地图。我在 Eclipse 中创建了一个 Phonegap 项目，它在 Android 和 iPhone 中运行良好，但地图在 Blackberry 中不呈现。我用来测试的黑莓是 Bold 9700，它已经从 OS v5 升级到 OS v6。我已经修改了我的 config.xml 以允许移动设备访问“*”子域。当我运行我的代码时，我使用我的密钥调用谷歌地图，并确保包含一个回调函数，以便我的代码在谷歌地图加载后可以继续。

问题是，当应用程序在 Blackberry Bold 上启动时，地图页面加载并且完全没有任何作用。另一方面，当地图页面在 Android 和 iPhone 平台上加载时，我看到回调已被谷歌地图调用。我真的不知道为什么这个问题只发生在黑莓上......我研究了这个问题只是为了找到我已经尝试过的建议。我知道我错过了一些东西，但我无法弄清楚它是什么。

这是我的 HTML 代码：

```
<body onload="init()">
   <div id="map_canvas">
   </div>
</body> 
```

这是我的 Javascript 代码：

```
function init(){     
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.googleapis.com/maps/api/js?key=GoogleMapKey&sensor=false&callback=codeAddress";
    document.body.appendChild(script);
} 
```

在我的`codeAddress`回调方法中，我做的第一件事就是`alert("hello")`确保它`codeAddress`已被调用。在 Android 和 iPhone 上，我看到了警报。然后我将地图分配给 div 元素。我遇到的问题是黑莓似乎没有联系谷歌地图，因此在谷歌地图加载完成时没有执行回调。

我很好奇，所以我也尝试了一张静态地图，但我也没有运气。是否有一些我忘记的权限？这就是我的 config.xml 中的内容：

```
 <access subdomains="true" uri="http://gstatic.com"/>
  <access subdomains="true" uri="http://google.com"/>
  <access subdomains="true" uri="http://googleapis.com"/>
  <access subdomains="true" uri="*"/> 
```

我还读到 BB OS v5 不支持 Google 地图以及较新版本的操作系统，因此升级了 Blackberry Bold 测试设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:06:43.420

事实证明，在构建“ant blackberry build”命令时，构建命令会查找 config.xml 文件来设置适当的权限和访问权限。Phonegap 的在线构建网站也使用 config.xml 来正确配置应用程序，但这两个 config.xml 文件的语法并不完全相同。我在哪里：

```
 <access subdomains="true" uri="http://gstatic.com"/>
  <access subdomains="true" uri="http://google.com"/>
  <access subdomains="true" uri="http://googleapis.com"/>
  <access subdomains="true" uri="*"/> 
```

我应该有

```
 <access subdomains="true" origin="http://www.gstatic.com"/>
  <access subdomains="true" origin="http://www.google.com"/>
  <access subdomains="true" origin="http://www.googleapis.com"/> 
```

这些 try xml 文件的语法相似但不完全相同。进行此更改后，我就可以使用静态地图。我的下一步是尝试让动态地图工作，但至少我知道静态地图确实有效。

这是我得出这个结论的[链接](http://community.phonegap.com/nitobi/topics/blackberrys_config_xml_doesnt_works_in_phonegap_build)

# javascript - Javascript 包含语句

> ID：10806418
> 
> 赞同：-1
> 
> 时间：2012-05-29T20:40:40.437
> 
> 标签：javascript

我正在尝试检查数据库中的一个字段，看看它是否不包含“UK_CONTACTS”或空白。如果是这些条件中的任何一个，我想将该字段复制到另一个字段。我对此非常陌生，并且由于我不知道 javascript 的正确语法，因此提出了以下内容并以“不包含”文本编写。

```
function getdbasename(){
var dbasedata = document.forms[0]._dbase_name.value;
}

If (dbasedata does not contain "UK_CONTACTS" || dbasedata does not contain " ") {
    _area.value = _dbase_name.value;
} 
```

可能在几英里之外，但这是我最好的镜头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:44:42.810

我想你想要`indexOf()`。如果`dbasedata.indexOf(someString)`不是 -1，它包含`someString`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:45:00.140

您需要在要检查的字符串上使用 indexOf('what you need to check for') 函数。

例如 (field.value.indexOf('myvalue') > 0) 如果 field.value 包含术语“myvalue”，则为真

# c# - C# 中的 C++“系统（）”

> ID：10806427
> 
> 赞同：6
> 
> 时间：2012-05-29T20:41:35.307
> 
> 标签：c#, c++, pinvoke, system

我目前正在用 C# 开发一个应用程序，它需要像“命令提示符”一样工作，因此我想知道 C++ 函数是否

```
int system ( const char * command ); 
```

在`cstdlib`C# 中存在吗？

对包含此函数的动态链接库的引用也将被接受。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:44:35.103

查看`System.Diagnostics.Process.Start`：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:49:17.303

如果您想从应用程序执行程序，那么您可以使用“进程”类，这非常简单，

```
using System.Diagnostics;

class Program
{
 static void Main()
 {
Process.Start("MyApp.exe");
 }
} 
```

您可以在 Visual Studio 中使用控制台应用程序项目模板，

![在此处输入图像描述](../Images/c899b50d31e7def86405b629cd8c90ff.png)

# asp.net - 语法错误异常详细信息：System.Data.OleDb.OleDbException：INSERT INTO 语句中的语法错误

> ID：10806432
> 
> 赞同：-4
> 
> 时间：2012-05-29T20:41:46.590
> 
> 标签：asp.net, sql

正如标题所说，我在尝试从 ASP.NET 页面对 MS Access 数据库执行以下插入查询时遇到语法错误。

```
sqls = "INSERT INTO Invoice(Date, S_OF, Consignee_name, Vechile_type, Make, Model, 
                            Chassis_no, Transmission, Fuel_Type, Mile_age, Colour, 
                            Engine_type, Wheel_Drive, Accesories_options, FOB_Price, 
                            Fright_Price, Insurance, inspection, Port_of_Loading, 
                            Destination, Drive, Total)
        VALUES('" + date1.Text + "','" + Sof.Text + "','" + consigneee.Text + "','" + 
               dvtype.Text + "','" + make.Text + "','" + Model.Text + "','" + chassisno.Text + 
               "','" + dtransmision.Text + "','" + dfueltype.Text + "','" + mileage.Text + "','" 
               + dcolour.Text + "','" + enginetype.Text + "','" + dwheeldrive.Text + "','" 
               + labelc.Text + "','" + FobPrice.Text + "','" + frieghtprice.Text + "','" 
               + insurance.Text + "','" + inspection.Text + "','" + portofloading.Text 
               + "','" + portdestination.Text + "','" + ddrive.Text + "','" + total.Text + "')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:44:39.363

我只是在这里猜测，因为您没有提供错误消息，但您似乎在列名中有一些拼写错误。

```
"INSERT INTO Invoice(Date,S_OF,Consignee_name,Vechile_type,Make,...
                                              ^^^^^^^ 
```

你的意思是`Vehicle`？

```
Accesories_options 
```

应该拼写`Accessories`。

```
Fright_Price 
```

你真的让人们害怕吗？我确定你的意思是`Freight_Price`这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:51:46.757

您可以 String.Format("INSERT INTO Invoice Values {0}{1}{2}", value0, value1, value2 ) 这样 value0 将替换为 {0}，value1 将替换为 {1} 等等。这样您就可以更好地跟踪错误。

此外，尽量使用 store-procedure 和参数来避免 sql 注入。有时花在它上面是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T22:31:54.883

以下是某人如何侵入您的数据库（SQL 注入）。请注意，它是为教育目的而提供的！不要试图执行它！

如果有人将此输入到您的**总**文本框中，您的数据可能会被删除：

```
'); delete from invoice; print ('hi 
```

具有讽刺意味的是，几年前我在为我的汽车（Mopar 零件销售商）订购零件的网站上收到了错误消息。我收到类似“...WHERE 子句中的错误...”的错误。因此，它对 SQL 注入攻击开放。我给他们发了电子邮件，但再也没有从他们那里订购过。我希望，你不是在这里代表他们:)

# command-line-arguments - Octave 命令行参数

> ID：10806436
> 
> 赞同：4
> 
> 时间：2012-05-29T20:42:24.433
> 
> 标签：command-line-arguments, octave

这可能是一个普遍的问题，但我是 octave 的新手，想从命令行获取一个字符串。但是，我不确定命令行参数的格式。我尝试输入：

```
myscript hi
myscript --hi
myscript -hi
myscript (hi) 
```

在命令行，但我不断收到此错误：

错误：索引表达式中脚本“myscript filepath”的使用无效

所以我显然没有正确调用它。--hi 是官方网站上显示的格式，但它似乎不适用于我。这个脚本，我上网只是为了测试：

```
#! /usr/bin/octave -qf

printf("%s", program_name());
arg_list = argv();
for i = 1:nargin
    printf(" %s", arg_list{i});
end
printf("\n"); 
```

为了使 argv 工作，我需要实施什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:27:02.700

我也开始了。

说你的路径名有错误。您没有为路径指定任何明确的内容（即 c:\root\myfiles\filex.txt），因此它可能假定该文件位于您的当前目录中。

如果你输入 ls 你能看到你的文件吗？您可以将文件移动到当前目录或使用 cd 命令将当前指针更改为文件所在的位置。

# php - mail() 的 From: 标头可以追溯到原始位置吗？

> ID：10806445
> 
> 赞同：0
> 
> 时间：2012-05-29T20:42:53.387
> 
> 标签：php, email

`From:`是否可以在 PHP`mail()`函数中跟踪标头？这意味着如果我将它发送为，例如，`noreply@google.com`从服务器上`example.com`，它可以追溯到`example.com`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:48:34.657

如果您正在尝试调试您编写的内容并且您知道您并没有尝试破坏标题，是的。如果您试图追踪某些垃圾邮件的来源 OTOH，您应该假设标头包含不正确的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:44:19.777

是的，这将在原始消息中可见。

# javascript - 如何在 javascript 中响应 SyntaxError

> ID：10806447
> 
> 赞同：5
> 
> 时间：2012-05-29T20:43:07.940
> 
> 标签：javascript, json, parsing, syntax-error

我从 php 服务器取回数据，有时它会发出警告。这些警告会导致解析响应引发语法错误，该错误会违反我现有的所有 try/catch 代码并停止处理，从而使复杂对象处于无法恢复的部分状态。

我怎样才能捕捉到这些错误？我希望有机会让物体恢复到某种稳定状态。

理想情况下，我不会收到说我应该重新考虑架构或更改 php 设置的答案。我想知道如何响应 JSON.parse() 抛出的 SyntaxErrors。

谢谢你，杰罗迈耶斯

编辑：

我注意到这个问题比我最初想象的要复杂。这是没有捕获 SyntaxError 的代码：

```
generateSubmissionSuccessCallback: function (reloadOnSave) {
    var self = this;

    var submissionCallback = function(response) {
        var processingError = false;

        try
        {
            var responseObject = {};
            if (self.isAspMode())
            {
                if (typeof response !== 'object') // Chrome auto-parses application/json responses, IE & FF don't
                {
                    response = JSON.parse(response);
                }

                responseObject = {
                    entity: response.Payload,
                    success: response.Success,
                    message: response.Exception
                };

                if (jQuery.isArray(response.ValidationErrors))
                {
                    responseObject.message += ' \r\n\r\nValidation Errors\r\n';
                    for (var i = 0, maxi = response.ValidationErrors.length; i < maxi; i++)
                    {
                        var error = response.ValidationErrors[i];
                        responseObject.message += error.Error + '\r\n';
                    }
                }
            }
            else
            {
                responseObject = JSON.parse(response);
            }

            if (!responseObject || (responseObject.success !== undefined && responseObject.success !== true))
            {
                processingError = true;
                var message = responseObject ? responseObject.message : response;
                ErrorHandler.processError(
                    'An attempt to save failed with following message: \r\n' + message,
                    ErrorHandler.errorTypes.clientSide,
                    null,
                    jQuery.proxy(self.validatingAndSubmittingFinallyFunction, self));
            }
            else
            {
                // If this is a parent metaform, reload the entity, otherwise, close the metaform
                if (self.metaformType === 'details')
                {
                    if (self.substituteWhatToDoAfterSavingCallback)
                    {
                        self.substituteWhatToDoAfterSavingCallback(responseObject);
                    }
                    else if (reloadOnSave)
                    {
                        self.reloadCurrentEntity(true, responseObject.entity);
                    }

                    if (self.doesViewOutlineDefinePostSaveHook())
                    {
                        self.viewOutline.functions.postSaveHook(self);
                    }
                }
                else if (self.metaformType === 'childDetails')
                {
                    // Reload the Grid by which this form was made
                    if (self.associatedGridId)
                    {
                        Metagrid.refresh(self.associatedGridId);
                    }

                    if (self.parentMetaform.associatedGridId && self.childPropertyName)
                    {
                        var annotation = self.parentMetaform.getAnnotationByPropertyName(self.childPropertyName);
                        if (annotation && annotation.hasPropertyOptions('updateParentMetaformAssociatedGrid'))
                        {
                            Metagrid.refresh(self.parentMetaform.associatedGridId, self.parentMetaform.entityId);
                        }
                    }

                    if (self.substituteWhatToDoAfterSavingCallback)
                    {
                        if (self.doesViewOutlineDefinePostSaveHook())
                        {
                            self.viewOutline.functions.postSaveHook(self);
                        }

                        self.substituteWhatToDoAfterSavingCallback(responseObject);
                    }
                    else
                    {
                        if (self.doesViewOutlineDefinePostSaveHook())
                        {
                            self.viewOutline.functions.postSaveHook(self);
                        }

                        self.disposeMetaform();
                    }
                }
            }
        }
        catch (ex)
        {
            processingError = true;
            ErrorHandler.processError(
                "Please immediately inform the authorities that: \r\n\r\n" + typeof response === 'string' ? response : JSON.parse(response) + "\r\n\r\nand:\r\n\r\n " + ex.message,
                ErrorHandler.errorTypes.clientSide,
                null,
                jQuery.proxy(self.validatingAndSubmittingFinallyFunction, self));
        }
        finally
        {
            // If we are reporting an error to the user then we can't reset these state variables
            // because in the case where this is a child form, the parent will close the form
            // before the user has read the error.
            if (!processingError)
            {
                self.validatingAndSubmittingFinallyFunction();
            }
        }
    };

    return jQuery.proxy(submissionCallback, self);
} 
```

There's really a lot going on in there, and a lot of structure that it fits into. I don't know if including it will really help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:53:42.483

Assuming you are talking about JSON and it raising an error (and not actual JavaScript being served to the page):

```
var data;
try{
  data = JSON.parse(jsonString);
}catch(e){
  // handle the error here, if you like
}
if (typeof data !== "undefined"){
  // Yay, we got some!
} 
```

*Read more about [`try...catch` at MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/try...catch).*

For example (from Chrome's console):

```
> try{ JSON.parse('3/') }catch(e){ console.log('oh no!') }; console.log('OK!')
"oh no!"
"OK!" 
```

# android - 执行动画集序列以反转动画时出现问题

> ID：10806449
> 
> 赞同：3
> 
> 时间：2012-05-29T20:43:26.137
> 
> 标签：android, animation, android-animation, android-imageview

我想为*ImageView*创建一个动画，它旋转图像，同时从 100% 缩放到 0% 并从不透明淡入透明（**SET 1**），然后反转动画（**SET 2**）。两个动画集如果一个一个就可以工作，但是如果我把它们放在一起我什么都看不到，因为动画集 2 的起始值会立即应用，即使它的子动画集的 startOffset 设置为在动画集之后开始1已完成。我想我已经理解应该使用*fadeAfter*和*fadeBefore*来避免在动画集 2 开始之前应用它的开始值，但它对我不起作用。我也试过*fadeAfter*在 SET 1 中设置为 true，删除 SET 2，看看它是否有效，即 SET 1 的转换是否在结束后持续存在，但它再次不起作用.. 那么，是否有可能产生我想要的结果下面的动画，也许使用*了 fadeAfter*、*fadeBefore*和*fillEnabled*属性？它应该与*ImageView*视图一起使用吗？

**动画 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <!-- SET 1 -->
    <set
        android:interpolator="@android:anim/decelerate_interpolator"
        android:shareInterpolator="true" >
        <alpha android:fromAlpha="1"
            android:toAlpha="0"
            android:duration="1000"
            android:startOffset="500"/>
        <rotate
            android:duration="1000"
            android:fromDegrees="0"
            android:pivotX="50%"
            android:pivotY="50%"
            android:startOffset="500"
            android:toDegrees="720" />

        <scale
            android:duration="1000"
            android:fromXScale="100%"
            android:fromYScale="100%"
            android:pivotX="50%"
            android:pivotY="50%"
            android:startOffset="500"
            android:toXScale="0%"
            android:toYScale="0%" />
    </set>

    <!-- SET 2 -->
    <set
        android:interpolator="@android:anim/accelerate_interpolator"
        android:shareInterpolator="true">
         <alpha android:fromAlpha="0"
            android:toAlpha="1"
            android:duration="1000"
            android:startOffset="1500"/>
        <rotate
            android:duration="1000"
            android:fromDegrees="0"
            android:pivotX="50%"
            android:pivotY="50%"
            android:toDegrees="720"
        android:startOffset="1500" />

        <scale
            android:duration="1000"
            android:fromXScale="0%"
            android:fromYScale="0%"
            android:pivotX="50%"
            android:pivotY="50%"
            android:toXScale="100%"
            android:toYScale="100%"
        android:startOffset="1500" />
    </set>
</set> 
```

**动画开始在 JAVA 代码中**

```
ImageView iv = (ImageView) findViewById(R.id.image_view);
Animation animation = AnimationUtils.loadAnimation(this, R.anim.test_animation);
iv.startAnimation(animation); 
```

**动画重复测试**

我也尝试删除 SET 2 并在*startAnimation*之前添加以下代码，但动画不会以相反的顺序重复（我也可以指定 RESTART 和 X 重复周期，但它不起作用）。有什么想法或建议吗？！

```
animation.setRepeatCount(1);
animation.setRepeatMode(Animation.REVERSE); 
```

# jquery - 未选中复选框时如何让单选按钮选中

> ID：10806455
> 
> 赞同：0
> 
> 时间：2012-05-29T20:44:09.117
> 
> 标签：jquery, checkbox

在取消选中所有复选框后，我想让单选按钮选中，但现在当我取消选择所有复选框时它不起作用。帮助！

```
<script>
$(document).ready(function() {
  function uncheck(radio,checkbox){
         var fliter_checkbox=$(checkbox);
             var fliter_radio=$(radio);

         fliter_checkbox.click(function(){
                fliter_checkbox.each(function(){
                   fliter_radio.attr("checked",false);
                   if(fliter_checkbox.attr("checked")==false){
                      fliter_radio.attr("checked",true);
                   }
                })
         })

         fliter_radio.click(function(){
                fliter_radio.each(function(){
                  fliter_checkbox.attr("checked",false);
                })
         })
     }

        uncheck('#fliter input[name="vendor_all"]','#fliter input[name="vendor"]');

})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:51:20.770

Radios 和 Checkboxes 使用 checked="checked" 而不是 true 和 false。您需要像这样删除选中的属性，而不是将已选中的属性设置为 false：

```
fliter_checkbox.removeAttr("checked"); 
```

此外，您需要测试该属性是否存在，而不是检查该属性是否为假：

```
if(fliter_checkbox.attr("checked") !== 'undefined')... 
```

# php - PHP 中的一个抑扬符

> ID：10806474
> 
> 赞同：-1
> 
> 时间：2012-05-29T20:45:31.593
> 
> 标签：php

我有一个问题，以下代码在英镑之前返回一个带有一点 ^ 的 A

这只发生在我在查询移动设备中构建的智能手机网站上——在桌面网站上很好。有人可以解释一下，并告诉我如何摆脱它吗？

谢谢

```
 <h1 class="priceCntr"><span class="price">£<?php echo $row_rs_dealsother['cost']; ?></span><span class="costold"> WAS £<?php echo $row_rs_dealsother['costold']; ?></span></h1> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:47:25.077

尝试使用编码版本：

```
&pound; 
```

在你的情况下：

```
 <h1 class="priceCntr"><span class="price">&pound;<?php echo $row_rs_dealsother['cost']; ?></span><span class="costold"> WAS &pound;<?php echo $row_rs_dealsother['costold']; ?></span></h1> 
```

# windows-phone-7 - 在 wp7 中创建二维码

> ID：10806476
> 
> 赞同：0
> 
> 时间：2012-05-29T20:45:45.110
> 
> 标签：windows-phone-7, qr-code

谁能给我一些关于 wp7 的 qrcode 库的想法？我在这里找到了一个库：http: [//qrcodegenerator.codeplex.com/SourceControl/list/changesets](http://qrcodegenerator.codeplex.com/SourceControl/list/changesets) 我可以在 26 个字符的字符串中生成 qr 代码......它发生了如果字符串超过 26 个字符，则会生成异常！

```
using Huyn.QRCode;

var generator = new QRCodeGenerator
{
    QRCodeVersion = 9,
    QRCodeErrorCorrect = QRCodeGenerator.ERRORCORRECTION.H
};
    imgQRCode.Source = generator.Generate("Hello, World!"); 
```

我需要一个库，它将从一个大字符串创建一个 qr 图像！请给出一些想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:18:56.650

您应该查看 C# ZXing 端口 2.0。我现在在一个应用程序中使用它，它工作得很好。

请参阅这篇关于如何生成 QR 码的帖子：

[使用 ZXing 2.0 C# 端口在 Windows Phone 7.1 上生成二维码](https://stackoverflow.com/questions/10293726/generating-qr-code-on-windows-phone-7-1-using-zxing-2-0-c-sharp-port)

干杯。

# excel - 如何合并多个工作表中的数据？

> ID：10806480
> 
> 赞同：0
> 
> 时间：2012-05-29T20:45:57.630
> 
> 标签：excel, vba

更新：示例文件[示例工作簿](https://www.yousendit.com/download/QlVpNU1EaytOMUJDaDhUQw)

**问题**：我想要一些可以自动

**1** . 搜索部件号和版本。找到包含“PART NUMBER”和“REVISION”的单元格后，我需要获取以下两个单元格的值（偏移量 1 列）。

**2** . 它将继续寻找汇总表

**3** . 将汇总表放入结果表

**4** . 继续搜索并重复该过程

有：

*   同一张纸上可能有多个零件号或只有 1 个
*   仅搜索具有起始名称的工作表：“搜索”

![在此处输入图像描述](../Images/81d6236255b21b608b20043651e106ef.png)

![在此处输入图像描述](../Images/5f893c08f5245a533cb4496c8cd938ee.png)

第一张图显示文件的结构，第二张图显示结果

如果可行，这将有很大帮助。请帮我。

更新1：我认为的逻辑：1.编写一个模块来搜索以名称“SEARCH”开头的所有工作表

2.  转到步骤 1 产生的每张表 - 在 .NEXT 中搜索 PART NUMBER 和 REVISION 以获取所有部件号名称和修订版（按偏移量 (0,1) 寻址）

3.  开始搜索汇总表 ==> 复杂点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:40:03.543

哇，这让我回到了我不得不经常做这些讨厌的事情的日子！

无论如何，我写了一些代码，可以得到你想要的。我可能采取了与您想象的不同的方法，但我认为它有点相似。

**假设**

PART NUMBER 总是在 B 列中

REVISION 总是在 F 列

根据您的原始数据仔细检查所有其他参考。我无法访问您的工作簿（由于我的工作办公室安全），所以我根据您的屏幕截图制作了自己的工作簿）。

```
Option Explicit

Sub wowzer()

Dim wks As Worksheet, wksResult As Worksheet

'set up results sheet
Set wksResult = Worksheets.Add(After:=Worksheets(Worksheets.Count))
With wksResult
    .Name = "Results"
    .Range("A1:F1") = Array("Part", "Rev", "Name", "Category", "TotalA", "TotalB")
End With

'loop through sheets to get data over
For Each wks In Worksheets

    If Left(wks.Name, 6) = "Search" Then ' does sheet start with search?

        With wks

            Dim rngFindPart As Range, rngFindName As Range

            Set rngFindPart = .Columns(2).Find("PART NUMBER", lookat:=xlWhole, After:=.Range("B" & .Rows.Count))
            Set rngFindName = .Columns(2).Find("NAME", lookat:=xlWhole, After:=.Range("B" & .Rows.Count))

            Dim strFrstAdd As String
            strFrstAdd = rngFindPart.Address 'used as a check for when we loop back and find first "PART NUMBER" again

            If Not rngFindPart Is Nothing Or Not rngFindName Is Nothing Then
            'not going to do anything if no PART NUMBER or NAME found

                Do

                    Dim rngMove As Range

                    'copy table and place it in result sheet
                    Set rngMove = .Range(rngFindName.Offset(1).Address, rngFindName.End(xlToRight).End(xlDown))
                    rngMove.Copy wksResult.Range("C" & wksResult.Rows.Count).End(xlUp).Offset(1)

                    'place part and revision, aligned with table (will de-duplicate later)
                    With wksResult
                        .Range(.Range("A" & .Rows.Count).End(xlUp).Offset(1), .Range("A" & .Rows.Count).End(xlUp).Offset(2)) = rngFindPart.Offset(1)
                        .Range(.Range("B" & .Rows.Count).End(xlUp).Offset(1), .Range("B" & .Rows.Count).End(xlUp).Offset(2)) = rngFindPart.Offset(1, 4)
                    End With

                    'find next instance of "PART NUMBER" and "NAME"
                    Set rngFindPart = .Columns(2).Find("PART NUMBER", lookat:=xlWhole, After:=rngFindPart)
                    Set rngFindName = .Columns(2).Find("NAME", lookat:=xlWhole, After:=rngFindPart)

                'done when no part number exists or it's the first instance we found
                Loop Until rngFindPart Is Nothing Or rngFindPart.Address = strFrstAdd

            End If

        End With

    End If

Next

'de-duplicate results sheet
With wksResult

    'if sheet is empty do nothing
    If .Cells(2, 1) <> vbNullString Then

        .UsedRange.RemoveDuplicates Columns:=Array(1, 2, 3, 4, 5, 6), Header:=xlYes

    End If

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:49:05.510

这是你正在尝试的吗？

![在此处输入图像描述](../Images/0c878349098ff5e8b3dc061e4bbc4d4e.png)

**代码**

```
Option Explicit

Const SearchString As String = "PART NUMBER"

Dim wsO As Worksheet, WsI1 As Worksheet, WsI2 As Worksheet
Dim lRow As Long

Sub Sample()
    Set wsO = Sheets("Result")
    Set WsI1 = Sheets("SEARCH PAGE1")
    Set WsI2 = Sheets("SEARCH PAGE2")

    lRow = 2

    PopulateFrom WsI1
    PopulateFrom WsI2
End Sub

Sub PopulateFrom(ws As Worksheet)
    Dim aCell As Range, bCell As Range, cCell As Range, nmRng As Range, cl As Range
    Dim i As Long
    Dim ExitLoop As Boolean

    With ws
        Set aCell = .Cells.Find(What:=SearchString, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            Set bCell = aCell
            wsO.Range("A" & lRow).Value = aCell.Offset(1).Value
            wsO.Range("B" & lRow).Value = aCell.Offset(1, 3).Value
            i = 1
            Do
                If aCell.Offset(i) = "NAME" Then
                    Set nmRng = .Range(aCell.Offset(i), aCell.Offset(i).End(xlDown))
                     For Each cl In nmRng
                        If cl.Value <> "NAME" Then
                            If wsO.Range("A" & lRow).Value = "" Then
                                wsO.Range("A" & lRow).Value = wsO.Range("A" & lRow - 1).Value
                                wsO.Range("B" & lRow).Value = wsO.Range("B" & lRow - 1).Value
                            End If

                            wsO.Range("C" & lRow).Value = cl.Value
                            wsO.Range("D" & lRow).Value = cl.Offset(, 1).Value
                            wsO.Range("E" & lRow).Value = cl.Offset(, 2).Value
                            wsO.Range("F" & lRow).Value = cl.Offset(, 3).Value
                            lRow = lRow + 1
                        End If
                     Next
                    Exit Do
                End If
                i = i + 1
            Loop

            Do While ExitLoop = False
                Set aCell = .Cells.FindNext(After:=aCell)

                If Not aCell Is Nothing Then
                    If aCell.Address = bCell.Address Then Exit Do
                    wsO.Range("A" & lRow).Value = aCell.Offset(1).Value
                    wsO.Range("B" & lRow).Value = aCell.Offset(1, 3).Value
                    i = 1
                    Do
                        If aCell.Offset(i) = "NAME" Then
                            Set nmRng = .Range(aCell.Offset(i), aCell.Offset(i).End(xlDown))
                             For Each cl In nmRng
                                If cl.Value <> "NAME" Then
                                    If wsO.Range("A" & lRow).Value = "" Then
                                        wsO.Range("A" & lRow).Value = wsO.Range("A" & lRow - 1).Value
                                        wsO.Range("B" & lRow).Value = wsO.Range("B" & lRow - 1).Value
                                    End If
                                    wsO.Range("C" & lRow).Value = cl.Value
                                    wsO.Range("D" & lRow).Value = cl.Offset(, 1).Value
                                    wsO.Range("E" & lRow).Value = cl.Offset(, 2).Value
                                    wsO.Range("F" & lRow).Value = cl.Offset(, 3).Value
                                    lRow = lRow + 1
                                End If
                             Next
                            Exit Do
                        End If
                        i = i + 1
                    Loop
                Else
                    ExitLoop = True
                End If
            Loop
        End If
    End With
End Sub 
```

**样本文件**

[i.minus.com/1338702873/20yZJWFxgv9Egtd4klNOBg/dtst1Y4ckv86f/Sample.xlsm](http://i.minus.com/1338702873/20yZJWFxgv9Egtd4klNOBg/dtst1Y4ckv86f/Sample.xlsm)

# gcc - 我什么时候可以安全地使用“=r”寄存器操作数约束？

> ID：10806484
> 
> 赞同：3
> 
> 时间：2012-05-29T20:46:09.533
> 
> 标签：gcc, inline-assembly

考虑以下代码：

```
#include <stdio.h>

void main() {
    uint32_t num = 2;

    __asm__ __volatile__ ("CPUID");
    __asm__ __volatile__ ("movl $1, %%ecx":);
    __asm__ __volatile__ ("andl $0, %%ecx": "=r"(num));

    printf("%i\n", num);
} 
```

我最初的期望是这段代码会打印`0`，如果我注释掉该`CPUID`行，它会打印，但它给了我垃圾。经过一些试验、错误和研究，我意识到我得到了一个随机寄存器的值。显然 GCC 并不认为我想要执行语句的结果。

问题是我已经看到（其他人的）代码依赖于该语句正确地获得 AND 的结果，而不管其他寄存器发生了什么。鉴于我的观察，显然这样的代码被破坏了，`"=r"`应该用`"=c"`.

我的问题是，我们能否始终依赖于`"=r"`约束行为一致或根据明显的期望？还是 GCC 的实现太不透明/奇怪/其他，最好在每种情况下都避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:27:53.850

为了使用`=r`输出说明符，您需要让 gcc 自由选择它想要使用的寄存器。您可以通过为输出指定输入和输出`%0`以及从第一个输入开始的输入来完成此操作`%1`。

在您的情况下，您是说`num`可以在寄存器中。但是 asm 指令中没有使用输出寄存器的内容。所以 gcc 基本上会忽略这一点。

如果您评论或不评论`CPUID`指令，您将获得不同值的原因是`CPUID`可以写入`eax`、`ebx`、`ecx`和`edx`. 我在我的系统上尝试了您的示例，并`0`在两种情况下都得到了结果。但我注意到生成的程序集正在打印`eax`. 所以我想当我运行这个程序时`CPUID`正在写入.`0``eax`

如果您确实想使用`=r`约束，则需要执行以下操作：

```
 asm("CPUID \n\t"
      "movl $1, %0 \n\t"
      "andl $0, %0 \n\t"
      :"=r"(num) ); 
```

否则，如果您的 asm 代码特别提到了一个寄存器，那么您需要在约束列表中指定它。在您的示例中，这意味着使用`=c`.

# sql - 执行包含动态 SQL Sybase 的存储过程

> ID：10806485
> 
> 赞同：2
> 
> 时间：2012-05-29T20:46:11.327
> 
> 标签：sql, permissions, execute, dynamic-sql, sap-ase

为什么我不能使用非 SP 所有者用户执行包含动态 SQL 的存储过程？

我可以使用 SP 所有者用户成功执行它，但其他用户不能。

不过，我已授予该 SP 的权限。

当 SP 没有动态 SQL 时，一切正常。

我正在使用 Sybase ASE 15.0.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:00:21.023

我懂了！

当SP中有动态SQL时，**也**需要将执行方式改为“动态”

```
sp_procxmode sp_name, "dynamic" 
```

为了允许非 SP 所有者用户成功执行该 SP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:13:21.873

要执行存储过程，用户需要访问所有可能存在的表、视图等，无论是在*普通*代码中还是在*动态*代码中！

# javascript - 带有 2 个单击处理程序的 if 语句悬停事件

> ID：10806486
> 
> 赞同：0
> 
> 时间：2012-05-29T20:46:15.900
> 
> 标签：javascript, jquery, if-statement, click, handler

我正在尝试编写一个脚本来检测 div 是否可见，这将确定**悬停**事件是否触发。

如果 id "contact" 被隐藏，则将鼠标悬停在菜单项上将更改块的颜色。然后，如果您单击另一个菜单项以显示 ID“联系人”，则悬停应该不起作用。单击另一个菜单项以隐藏 ID“联系人”将允许悬停再次工作。

这是我对 jsFiddle 的了解：http: [//jsfiddle.net/YktAZ/123/](http://jsfiddle.net/YktAZ/123/)

我什至不确定我是否需要“其他”，但这是我将悬停“欺骗”为“不工作”或不显示更改的唯一方法。我真的只需要 if 让它工作，然后如果不满足条件就不会触发悬停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:51:50.557

如果您将 if 语句放在悬停函数中，这将起作用。基本上，每次执行时`swap_hover()`，都会向元素添加新的悬停事件处理程序，它实际上并没有“打开”或“关闭”悬停。

最好的方法是做这样的事情：

```
$("#item").hover(function(){
    //hover on
    if($("#otherItem").is(":visible"){
        //do this code  
    }
}, function(){
    //hover off
    //do this code.
}); 
```

# php - 文本框覆盖 MySQL 中的单选按钮

> ID：10806487
> 
> 赞同：0
> 
> 时间：2012-05-29T20:46:20.897
> 
> 标签：php, mysql, textbox, radio-button

我正在创建一个网络调查来收集研究生项目/论文的数据，并将数据收集到 MySQL 数据库中。该网页应该做的事情如下：受访者将看到一个单词，然后必须做出四个选择之一。三个选项是单选按钮，第四个选项是“其他”，他们将有机会在文本框中输入内容。这似乎是一个相当典型的设置，但我在 sql 端遇到了麻烦。

问题是，虽然网页似乎运行正常，但当我查看数据库时，没有任何单选按钮值存在——传递给 sql 服务器的唯一值是输入到文本框中的值（包括选中单选按钮且未在文本框中输入任何内容的空白值。

创建调查页面的代码是：

```
 echo "<form action='insert2.php' method='post'>";
    echo "  <table border='1' cellpadding = '10' align = 'center'>
        <tr>
        <th>Num</th>
        <th>Fran&ccedil;ais</th>
        <th>Choix 1</th>
        <th>Choix 2</th>
        <th>Choix 3</th>
        <th>Choix 4</th>
        </tr>";
for ($i=1; $i<=$total; $i++)
{
    $query = "SELECT * FROM MyDataTable WHERE id = '$i'";
    $word = $db->query($query);
    $word = $word->fetch();     
        echo "<tr>";
    echo "<td>" . "$i " . "</td>";
    echo "<td width = '300'>" . $word[1] . "</td>";
            echo "<td width = '300' align = 'center'>" . 
              " <input type='radio' name='word$i' value='one' id='wa_$i' /> " . $word[2] . "</td>";

            echo "<td width = '300' align = 'center'>" . 
              " <input type='radio' name='word$i' value='two' id='wb_$i' /> " . $word[3] . "</td>";

            echo "<td width = '300' align = 'center'>" . 
              " <input type='radio' name='word$i' value='three' id='wc_$i' /> " . $word[4] . "</td>";

            echo "<td width = '300' align = 'center'>" . 
              " autre: <input type='text' name='word$i' id='wd_$i' /> </td>";

        echo "</tr>";
     }
    echo "<br /><br />";
    echo "</table>"; 
```

当我没有最终表单字段（文本框）时，一切正常。不可能是单选按钮值或文本框值吗？

“insert2.php”代码如下：

```
mysql_query("INSERT INTO `MyResultsTable` (w1) VALUES ('$_POST[word1]')");

$last_id = mysql_insert_id();

for ($i=2; $i<=$total; $i++)// This loop inserts the rest of the data into the DB
{
$temp = "word$i";
if (isset($_POST[$temp]))
{
    mysql_query("UPDATE `MyResultsTable` SET w$i='$_POST[$temp]' WHERE id = $last_id");
} 
```

任何帮助将不胜感激。我是新手，已经搜索了很长时间，但无济于事。

问候，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:50:44.857

将您的收音机更改为

```
<input type='radio' name='word$i[]' value='one' id='wa_$i' />
<input type='radio' name='word$i[]' value='two' id='wb_$i' />
<input type='radio' name='word$i[]' value='three' id='wc_$i' /> 
```

（注意“name”属性中的值后面的数组括号）

看看能不能解决它。

# transactions - 在带有 CMT 的 JMS MDB 中，有没有办法指定在 onMessage 返回并提交事务后要执行的操作？

> ID：10806489
> 
> 赞同：1
> 
> 时间：2012-05-29T20:46:35.163
> 
> 标签：transactions, glassfish, jms, message-driven-bean

我有一个 MDB，为了响应传入的消息，它需要以原子方式执行一系列操作，为此我们使用 CMT。处理完消息并提交事务后，我需要执行最后一个操作 - 创建任务并将其排队以在线程池中执行，我在此 MDB 中创建和更新的实体将被引用。

我试图弄清楚是否有办法让 JMS 在从 onMessage() 成功（提交后）返回时调用方法（如回调）。此回调必须在与 onMessage() 相同的位置执行。

附加信息是我们正在使用 Glassfish 3.1 和包含的 JMS 提供程序。有任何想法吗？谢谢。

这是一些希望澄清的伪代码：

```
public void onMessage(final Message inMessage) {
    addDatabaseRecord();
    addOtherDatabaseRecord();
    updateDatabaseRecord();
}

@RunAfterOnMessageCommits  // Hypothetical annotation
public void postCommit()
    // Must not happen until transaction commits.
    addToThreadPoolWorkQueue();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:56:08.877

您的问题很难理解，因为它没有详细说明您希望在哪里调用回调方法：在服务器上还是在客户端上。onMessage() 显然在收到消息后由客户端处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:06:21.147

似乎您在普通的 java ee 上运行。您可以使用面向方面的框架（例如 spring-aop）做一些技巧，以在方法之前或之后执行特定代码。这将是一个 xml 配置——虽然它可能对您的应用程序架构造成太大的干扰。然而，Spring AOP 不会干扰实际代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:45:53.463

如果你是。在事务中运行，您可以在**onMessage**块中发送辅助消息。如果该事务回滚，它将不会被发送（或者从技术上讲，它不会被接收）。

# javascript - 带有 html 的 JSON 对象

> ID：10806490
> 
> 赞同：0
> 
> 时间：2012-05-29T20:46:44.010
> 
> 标签：javascript, json, object, eval

我试图取出一个 JSON 对象，但最终我也得到了所有的 HTML。

```
 alert("5 " + request.responseText);
    var JSONObject = eval( + "(" + request.responseText + ")" );
    alert("text1: " + JSONObject.name); 
```

因此，第一行在警报中打印纯 html 代码。它应该这样做，还是`responseText`应该只是 JSON 对象？第二行不起作用，所以第三行不打印。

我已经看到他们只是像我一样使用`eval`的例子`responseText`，但在我的情况下它不起作用......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:08:42.553

尝试方法

```
jQuery.ParseJSON(request.responceText); 
```

但首先要确保您的服务器以 json 格式发送数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:48:44.693

听起来像是服务器端在一个响应中喷出 HTML 和 JSON。我会首先检查浏览器中的调用或像提琴手这样的代理，以确保它只有 JSON 回来。

# iphone - 使用 Tesseract 进行 OCR 会导致 GetUTF8Text 方法出现内存泄漏

> ID：10806491
> 
> 赞同：4
> 
> 时间：2012-05-29T20:46:44.853
> 
> 标签：iphone, c++, ios, ocr, tesseract

我正在使用 tesseract OCR 读取名片。我有内存泄漏，我无法解决它，我不知道如何解决。

在我的代码中...

```
tesseract->Recognize(NULL); 
char* utf8Text = tesseract->GetUTF8Text(); 
```

GetUTF8Text() 方法会导致内存泄漏。这是内存泄漏工具的日志：

```
tesseract::TessBaseAPI::GetUTF8Text()
operator new[](unsigned long) libstdc++.6.dylib
operator new(unsigned long) libstdc++.6.dylib
malloc libsystem_c.dylib 
```

在一些内存泄漏后，应用程序崩溃。GetUTF8Text 在 baseapi.h 文件中。我认为 tessearact 是由 c++ 编写的。我不知道c++。任何人都可以帮忙吗？或者有人有干净的tesseract吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:50:48.943

来自 Tesseract 文档：

> 识别的文本以编码为 UTF8 的 char* 形式返回，并且必须使用 delete [] 运算符释放。

换句话说：释放内存是你的责任，所以它是你的泄漏而不是 Tesseracts。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:54:46.067

根据我在[baseapi.h](http://code.google.com/p/tesseract-ocr/source/browse/trunk/api/baseapi.h)中找到的文档。

```
/**
 * The recognized text is returned as a char* which is coded
 * as UTF8 and must be freed with the delete [] operator.
 */
char* GetUTF8Text(); 
```

所以`delete []`当`utf8text`你完成它时，你需要。

```
tesseract->Recognize(NULL); 
char* utf8Text = tesseract->GetUTF8Text();
... //use utf8Text or copy if necessary
delete [] utf8text; 
```

# html - 从 XSLT 中的转义 XML 标记中提取属性？

> ID：10806493
> 
> 赞同：0
> 
> 时间：2012-05-29T20:46:53.183
> 
> 标签：html, xml, xslt, youtube

所以我一直在研究一些 XSLT 来修改 YouTube 的 RSS XML，当然，一旦我开始工作，他们就改变了格式。以前，每个视频的唯一 ID 都存储在`<videoid>`标签之间，然后您可以使用它来创建 URL。但是现在获取视频 URL 的唯一方法是使用这样的标签

```
<media:player url='https://www.youtube.com/watch?v=XXXXXXXXXXX&amp;feature=youtube_gdata_player'/>` 
```

它包含在`<media:group>`标签中。

我一直在尝试的方法是

```
<xsl:value-of select="media:group/media:player@url" /> 
```

但这样做会给我一个编译错误，上面写着

```
xsl:value-of : could not compile select expression 'media:group/media:player@url' 
```

有人认为这有什么问题吗？

另外，作为旁注，我想做类似的事情

```
<xsl:value-of select="media:group/media:thumbnail@url" /> 
```

但是每个条目都有几个`<media:thumbnail>`标签；这只是抓住第一个，还是这可能会导致错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:50:35.743

您的 XPath 中缺少 a `/`。尝试：

```
<xsl:value-of select="media:group/media:player/@url" /> 
```

就 DOM API 而言，属性*属于*一个元素。XPath 以稍微不同的方式处理它。子节点位于`child::`轴上（这是默认设置，因此您很少看到它显式使用），属性位于`atribute::`轴上（您可以使用缩写 到达那里`@`）。在构建 XPath 表达式时，您基本上是在构建一系列[位置步骤](http://www.w3.org/TR/xpath/#section-Location-Steps)，由`/`. 属性与拥有它的元素相距“一个位置步骤”。

到你问题的第二部分。选择器将创建与表达式匹配的所有节点的序列（认为节点列表），并将执行`xsl:`指令规定的对该序列执行的操作。在您的情况下（[`xsl:value-of`](http://www.w3.org/TR/xslt#value-of)），`@url`所有匹配`media:thumbnail`都将放在一个节点集中，该节点集中将进一步[转换为字符串](http://www.w3.org/TR/xpath/#function-string)：

> 通过返回节点集中在文档顺序中排在第一位的节点的字符串值，将节点集转换为字符串

所以你会得到“第一个”的价值。也就是说，我认为`xsl:value-of`在多个节点的序列上运行并不是很直观（即使规范清楚地说明了它将做什么）所以如果你更具体，你会帮助在你之后阅读代码的人与您的选择器。就像是：`media:group/media:thumbnail[1]/@url`

# php - Jquery $.post 将葡萄牙语文本发送到 php 并将其保存到数据库

> ID：10806495
> 
> 赞同：0
> 
> 时间：2012-05-29T20:47:05.633
> 
> 标签：php, jquery, ajax, post

这是我的萤火虫数据

```
action=saveOrder&name=Aprova%C3%A7%C3%A3o+dos

```

在服务器端，我试图将其保存到数据库中，名称列有排序规则 - utf8_general_ci

这是我的 php 脚本 1。

```
$name= htmlentities(str_replace("+", "", rawurldecode($_POST["name"])));

```

我也试过2。

```
$name= html_entity_decode(str_replace("+", "", rawurldecode($_POST["name"])));

```

如果您看到此链接 [http://writecodeonline.com/php/](http://writecodeonline.com/php/) 2\. 在那里工作，但是当我将它保存在数据库中时，它没有与最后一个代码正确保存，保存的值是 AprovaÃ§Ã£o dos和案例 1\. 它保存了这个 AprovaÃ§Ã£o dos

应该保存在数据库中的值是 Aprovação dos

```
函数保存订单（）
{
  变量参数={};
  params.action='saveOrder';
  params.name=$("#cliente_nome").val();
  $.post('saveorders.php',参数,函数(数据)
  {
    警报（数据）；
  });
}

```

PHP 代码

```
 <?php

  mb_internal_encoding("UTF-8");
  include_once("clase.php");//数据库连接文件
  session_start();
  $name=html_entity_decode(str_replace("+", "", rawurldecode($_POST["name"])));
  Policy::saveOrders($name);

  ?>

```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:48:37.567

在您的网站和数据库之间创建链接时，请将其设置为 UTF-8。此外，使用 ANSI 将您的 PHP 页面保存为 UTF-8（没有 BOM 的 UTF-8 编码）。确保您的数据库和表也使用 UTF-8 编码。将php的内部编码设置为UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:21:48.223

Make sure that the file encoding (the .php file itself) is UTF-8.

Also, add header('Content-Type:text/html; charset=UTF-8'); to your UTF-8 pages and see if it helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:47:23.547

Here are the steps I took to resolve this

1.  Set the collation of database table to utf8_general_ci
2.  The PHP Page which is receiving the data, set its header to mb_internal_encoding("UTF-8"); and iconv_set_encoding("internal_encoding", "UTF-8"); [This one I took from the above answers, I am not sure which one to keep and which one to remove, I kept both as it worked for me] 3.while sending data using jquery use escape, so this becomes

    ```
     params.name=$("#cliente_nome").val(); 
    ```

    this

    ```
      params.name=escape($("#cliente_nome").val()); 
    ```

3.  The server page should use rawurlencode method e.g

```
 <?php

  mb_internal_encoding("UTF-8");
  iconv_set_encoding("internal_encoding", "UTF-8");
  include_once ("clase.php");// Database connection file
  session_start();
  $name=str_replace("+", " ", rawurldecode($_POST["name"]));
  Policy::saveOrders($name);

  ?>

```

# css - 如何将图像放在包装器 div 之外

> ID：10806497
> 
> 赞同：-1
> 
> 时间：2012-05-29T20:47:21.590
> 
> 标签：css, html, wrapper

我已经为此苦苦挣扎了很长一段时间，我需要一些帮助。我希望获得与该网站相同的效果，其中图像浮动在包装器 ID 旁边，但在调整页面大小时图像保持原位。

[http://pack155.com/](http://pack155.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:50:34.993

看看那里的代码：

`#page`是图像的包装`#bear`

```
#page {
width: 1024px;
margin: 0 auto;
position: relative;
}

#bear {
position: absolute;
right: 3px;
top: 250px;
} 
```

# android - 有其他人看到 HTC Flyer 的 Web 视图（硬件加速）的错误或找到了修复吗？

> ID：10806501
> 
> 赞同：4
> 
> 时间：2012-05-29T20:48:14.510
> 
> 标签：android, webview, hardware-acceleration, htc-android

此问题非常特定于 HTC Flyer。已升级到 Honeycomb 或更高版本的一种。看来，如果硬件加速已打开，那么 WebView 只会呈现空白。背景颜色出现，您可以滚动。您甚至可以突出显示文本或点击链接，但您什么也看不到。这一切都是看不见的。

它还记录了大量以下内容：

`D/GLUtils(6612): GL ERROR - after drawQuad() glError (0x502)`

看起来像是 Flyer 的一个错误，但有没有人成功地在这个设备和 WebView 上使用了硬件加速？

**更新**

我发现这个问题是由于应用程序的第一个 WebView 没有硬件加速造成的。然后，如果不发生此问题，任何进一步的 WebView 都将无法进行硬件加速。

重现：

创建两个活动。每个活动中只能有一个 WebView。第一个活动应该禁用硬件加速。第二个应该启用它。

在第一个活动（非硬件加速活动）中，加载一个 url。该页面将正常加载。现在，在页面加载并显示后的某个时间，从第一个活动开始第二个活动。

第二个活动（硬件加速的活动）也应该加载一个 url。这将导致错误发生。第二个活动的 WebView 将显示为空白。

还：

奇怪的是，您可以执行以下操作，它会起作用：

使用硬件加速和 web 视图启动活动。加载一个 url 并在它显示后，在没有硬件加速的情况下启动第二个活动。然后在第二个活动中，加载一个 url，然后在它显示后，使用硬件加速启动第三个活动。第三个活动将正确显示。

所以这个问题似乎只有在应用程序生命周期/实例中运行的第一个 WebView 没有硬件加速时才会发生。似乎如果您这样做，那么以后尝试进行硬件加速的任何 WebView 都将无法正常工作。

同样，在运行此应用程序的数百台设备中，这只发生在 HTC Flyer 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:55:11.550

感谢您报告问题。我无法让它在我自己的测试中发生。你能提供更多关于你在做什么的细节吗？

在我的测试中，我创建了一个带有 WebView 的简单 Android 应用程序，该应用程序显示其 assets 文件夹中的 index.html 文件。我确保通过高 targetSdkVersion 和在 Android Manifest.xml 中将 hardwareAccelerated 显式设置为 true 启用了硬件加速。在我测试过的更新传单中，内容显示良好。

我听说硬件加速的 Web 视图无法在其他硬件加速元素中工作，例如滚动视图，以及在其他 Web 内容之上显示 Web 内容的类似问题。所以也许它在工作中可能是这样的。

这是当前正在运行的测试项目： [https ://github.com/lnanek/HWWebView](https://github.com/lnanek/HWWebView)

这是其中的 AndroidManifest.xml：
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:a="http://schemas.android.com/apk/res/android"
    包="com.htc.sample.hwwebview"
    a:versionCode="2"
    a:versionName="2.0" >
    <uses-sdk a:minSdkVersion="3" a:targetSdkVersion="15" />
    <uses-permission a :name="android.permission.INTERNET" />
    <application a:icon="@drawable/ic_launcher" a:label="@string/app_name" a:hardwareAccelerated="true" >
        <activity a:name=".查看者" a:label="@string/app_name" >
            <intent-filter>
                <action a:name="android.intent.action.MAIN" />
                <category a:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>

这是主要布局：
<?xml version="1.0" encoding="utf-8"?>
<WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id= "@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />

# ios5 - 如何使 setEnabled 在 iOS5 中的自定义 UISegmentedControl 上工作？

> ID：10806510
> 
> 赞同：1
> 
> 时间：2012-05-29T20:49:11.690
> 
> 标签：ios5, customization, uisegmentedcontrol

我的 iPad 应用程序中有一个 UISegmentedControl，我使用 iOS5 中可用的新方法对其进行了自定义，如下所示：

```
[[UISegmentedControl appearance] setBackgroundImage:segmentUnselected forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setBackgroundImage:segmentSelected forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselected forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:segUnselectedSelected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

NSDictionary *textAttributes = [NSDictionary dictionaryWithObjectsAndKeys:[UIFont systemFontOfSize:17], UITextAttributeFont,
                                [UIColor colorWithRed:0.3 green:0.34 blue:0.42 alpha:1], UITextAttributeTextColor,
                                [UIColor whiteColor], UITextAttributeTextShadowColor,
                                CGSizeMake(0, 1), UITextAttributeTextShadowOffset, nil];

[[UISegmentedControl appearance] setTitleTextAttributes:textAttributes forState:UIControlStateNormal]; 
```

它看起来很好并且工作正常，但是有一个问题是在任何段上调用 ​​setEnabled:NO 都没有效果 - 该段仍然会响应触摸事件。有人知道我需要做什么来禁用某些细分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:53:58.440

使用`isEnabledForSegmentAtIndex:`并`setEnabled:forSegmentAtIndex:`在[UISegmentedControl 的文档中](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)找到。让我知道这是否可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:54:15.093

不确定这对任何人来说是否仍然是一个问题（因为它已在 iOS 6 中修复，但这是我的解决方法（借用另一个问题）：

在您的 viewDidLoad 中，尝试：

```
dispatch_async(dispatch_get_main_queue(),^{
    [self.segmentedControl setEnabled:NO forSegmentAtIndex:2];
}); 
```

似乎当视图加载时，外观代理的存在会重置 UISegmentedControl 的其他属性。在主线程上安排这个将重新启用/重新禁用。顺便说一句，这也适用于选择默认段。

# qt - Windows 上的 Qt 应用程序

> ID：10806515
> 
> 赞同：1
> 
> 时间：2012-05-29T20:50:08.033
> 
> 标签：qt, deployment, dll, phonon

因此，我在 Qt Creator 上制作了一个 Qt 应用程序，显示 jpg 文件和 mp3 文件（使用 phonon）。在使用动态链接库部署应用程序时，我必须按照 Windows 的要求复制到同一文件夹 QtCore4.dll、QtGui4.dll、phonon4.dll、mingwm10.dll 和 libgcc_s_dw2-1.dll。

问题是 jpg 文件和 mp3 文件只显示在安装了 QtSDK 的电脑上。在其他电脑上，exe 文件运行，打开用户界面，一切正常，除了显示 jpg 和 mp3 文件。目录路径不是问题，因为它会打开我放在同一文件夹中的 pdfviewer。我需要提供其他文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:53:41.090

Qt 依赖于大多数文件格式的插件。对于 Jpeg，您需要包含 plugins/imageformats 目录中的 qjpeg4.dll。对于 Phonon，您还需要在 plugins/phonon_backend 目录中包含适当的后端 DLL。

[您需要的所有信息都包含在有关在 Windows 上部署应用程序](http://qt-project.org/doc/qt-4.8/deployment-windows.html)的 Qt 文档中，尤其是有关 Qt 插件的部分。

# c# - 将字符串数据写入 MemoryMappedFile

> ID：10806518
> 
> 赞同：5
> 
> 时间：2012-05-29T20:50:23.293
> 
> 标签：c#, .net, memory-mapped-files

我在[这里关注本教程](http://www.c-sharpcorner.com/uploadfile/b942f9/using-memory-mapped-files/)

我很难弄清楚如何将字符串“这是一个测试消息”存储在内存映射文件中，然后将其从另一侧拉出。本教程说使用字节数组。原谅我，我是新手，先自己尝试。

谢谢，凯文

```
##Write to mapped file

using System;
using System.IO.MemoryMappedFiles;

class Program1
{
    static void Main()
    {
        // create a memory-mapped file of length 1000 bytes and give it a 'map name' of 'test'
        MemoryMappedFile mmf = MemoryMappedFile.CreateNew("test", 1000);
        // write an integer value of 42 to this file at position 500
        MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
        accessor.Write(500, 42);
        Console.WriteLine("Memory-mapped file created!");
        Console.ReadLine(); // pause till enter key is pressed
        // dispose of the memory-mapped file object and its accessor
        accessor.Dispose();
        mmf.Dispose();
    }
}   

##read from mapped file  
using System;
using System.IO.MemoryMappedFiles;
class Program2
{
    static void Main()
    {
        // open the memory-mapped with a 'map name' of 'test'
        MemoryMappedFile mmf = MemoryMappedFile.OpenExisting("test");
        // read the integer value at position 500
        MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
        int value = accessor.ReadInt32(500);
        // print it to the console
        Console.WriteLine("The answer is {0}", value);
        // dispose of the memory-mapped file object and its accessor
        accessor.Dispose();
        mmf.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T18:07:17.300

您可以考虑写入字符串的长度，然后写入字符串的 byte[] 形式。
例如，如果我想写“Hello”，那么我将其转换为字节：

```
byte[] Buffer = ASCIIEncoding.ASCII.GetBytes("Hello"); 
```

然后在写入内存映射文件时执行以下操作。

```
MemoryMappedFile mmf = MemoryMappedFile.CreateNew("test", 1000);
MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
accessor.Write(54, (ushort)Buffer.Length);
accessor.WriteArray(54 + 2, Buffer, 0, Buffer.Length); 
```

读取时首先转到位置 54 并读取包含字符串长度的 2 个字节。然后您可以读取该长度的数组并将其转换为字符串。

```
MemoryMappedFile mmf = MemoryMappedFile.CreateNew("test", 1000);
MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
ushort Size = accessor.ReadUInt16(54);
byte[] Buffer = new byte[Size];
accessor.ReadArray(54 + 2, Buffer, 0, Buffer.Length); 
MessageBox.Show(ASCIIEncoding.ASCII.GetString(Buffer)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-26T18:05:15.923

我用它来写字符串的字符：

```
string contentString = "Hello";
char[] charsToWrite = contentString.ToCharArray();
accessor.WriteArray(0, charsToWrite, 0, charsToWrite.Length); 
```

这写了宽字符。C# 和 C++ 程序都能够将数据读取为宽字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-09T12:57:55.450

它适用于 CreateOrOpen 而不是 CreateNew！使用相同的代码

```
MemoryMappedFile mmf = MemoryMappedFile.CreateOrOpen("test", 1000);
MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
accessor.Write(54, (ushort)Buffer.Length);
accessor.WriteArray(54 + 2, Buffer, 0, Buffer.Length); 
```

和

```
MemoryMappedFile mmf = MemoryMappedFile.CreateOrOpen("test", 1000);
MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor();
ushort Size = accessor.ReadUInt16(54);
byte[] Buffer = new byte[Size];
accessor.ReadArray(54 + 2, Buffer, 0, Buffer.Length); 
MessageBox.Show(ASCIIEncoding.ASCII.GetString(Buffer)); 
```

# css - Drupal 的内容节点上方是否可以有一个大图像？

> ID：10806520
> 
> 赞同：0
> 
> 时间：2012-05-29T20:50:26.853
> 
> 标签：css, drupal, layout, drupal-theming, drupal-blocks

我正在尝试使用 Drupal 复制如下页面：

[http://www.ams-neve.com/Products/Outboard/1073LB/1073LB.aspx](http://www.ams-neve.com/Products/Outboard/1073LB/1073LB.aspx)

我的问题是我希望顶部的图像（根据您所在的页面而变化）成为主要内容节点的一部分，而左侧的菜单是侧边栏区域。

我想要一个“产品”内容类型，我可以在其中编写主副本、包含链接文件等，另外还有一个“标题图像”，它将显示在页面顶部。

我觉得它不能像这样完成，因为我基本上需要将节点的位渲染到不同的块中。如果我为节点模板设置主题以将 div 包裹在标题图像周围，我无法找到将其移动到页面顶部并将左侧边栏向下移动的方法。

谁能告诉我是否可能，或建议替代路线。
有很多产品，所以我需要它是一个简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:27:49.193

我使用的方法是在 Views 中创建一个 Views Slideshow Block。它通过查看它所在的页面从我的节点中提取了 header_image 字段。我将此块放入页面的标题中。

其他任何查看此内容的人也应该查看显示套件。你可以用它做很多很酷的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:58:35.113

如果我没有弄错，那么您在使用块的默认方式时遇到问题`drupal`。你试过[面板](http://drupal.org/project/panels)吗？这是一个很棒的插件，`drupal`可以让你以一种非常灵活的方式创建页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:03:28.417

您可以为您的“产品”内容类型设置一个自定义字段，该字段是图像或标题图像 URL 的文本字段。只需使用 CSS 将它们放置在您想要的位置。

或者，查看这些链接，我认为它们是您正在寻找的。

[http://drupal.org/project/headerimage](http://drupal.org/project/headerimage)

[http://drupal.org/project/sections](http://drupal.org/project/sections)

# jquery - 可以在没有表格的情况下接听电话吗？

> ID：10806528
> 
> 赞同：1
> 
> 时间：2012-05-29T20:50:59.970
> 
> 标签：jquery, ajax, json

嗨，我需要知道是否可以在没有表单的情况下进行 ajax GET 调用。

我试过：

```
$(".edit_event").live("click", function() {
    var currentID = $(this).data("event-id");
    var currentTable = $(this).data("table");

    if (currentTable == 'Coffee_talk') {
        alert('Erzaehlcafe mit ID' + currentID);

        $.ajax({
            url: 'index.php?section=event_select&id=' + currentID + '&table=' + currentTable,
            type: 'GET',
            dataType: 'json',
            success: function (select) {
                alert(select);
            }   
        });
        return false;
    } else if (currentTable == 'Presentation') {
        alert('Vortrag mit ID' + currentID);
    } else if (currentTable == 'Exhibition') {
        alert('Ausstellung mit ID' + currentID);
    }
}); 
```

用 Firebug 调试说，有一个带有 ID 和 Table 的 GET 调用，但我没有得到任何值（没有 json 也没有 php echo）。

这是我的 php：

```
if ('GET' == $_SERVER['REQUEST_METHOD']) {
    if ($_GET['table'] == 'Coffee_talk') {
        echo ('test');

        $response['code'] = '1';
        echo json_encode($response);
    }
    if ($_GET['table'] == 'Presentation') {

    }
    if ($_GET['table'] == 'Exhibition') {

    }
} 
```

只是使用了一些测试值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:52:11.400

摆脱`echo ('test');`，它不是 json 。

`$.get()`不需要表格。

# webgl - Threejs/WebGL：只对多维数据集最高效的方式？

> ID：10806529
> 
> 赞同：4
> 
> 时间：2012-05-29T20:51:07.907
> 
> 标签：webgl, three.js

在 Threejs 中，根据要使用的渲染方法/灯光/设置/材质，在 xyz 网格上为 WebGL 渲染器显示大量立方体的最高效方式是什么？立方体应该支持基于方向光的接收和投射阴影——或者如果有帮助并且可能的话，我可以预先计算侧面颜色——但它们没有任何纹理或特殊旋转。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T22:15:34.693

一定要合并你的几何。它有很大帮助。多达 60 倍的代码。这是一个解释原因的帖子。它包含一个实际显示差异的演示 [http://learningthreejs.com/blog/2011/10/05/performance-merging-geometry/](http://learningthreejs.com/blog/2011/10/05/performance-merging-geometry/)

另一件事是在适用时删除重复的面。例如 three.js minecraft demo 从几何体中删除面。[http://mrdoob.github.com/three.js/examples/webgl_geometry_minecraft.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_minecraft.html)用于演示，[https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_minecraft.html#L106](https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_minecraft.html#L106)用于资源

# sql-server - 带有 NHibernate 的 SQL Server 标识列 - 使用或不使用

> ID：10806530
> 
> 赞同：7
> 
> 时间：2012-05-29T20:51:10.487
> 
> 标签：sql-server, nhibernate

我正在使用 SQL Server，并且大多数表都有 int 类型的标识列。而现在，我刚刚看到一本书，它告诉我们使用这种机制不是一个好主意。使用 NHibernate 作为 ORM 时，使用标识列的缺点/优点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:29:53.870

我不是 NHibernate 专家，但据我了解，使用标识列会破坏 UnitOfWork 并导致额外的数据库往返。

Fabio Maulo *（当时是 NHibernate 的项目负责人，我不确定他今天是否还在）*有一篇博文详细解释了这一点：
[身份：永无止境的故事](http://fabiomaulo.blogspot.de/2008/12/identity-never-ending-story.html)

这是另一个（更长的）博客文章，其中包含示例代码：
[NH2.1.0：生成器行为解释](http://fabiomaulo.blogspot.de/2009/02/nh210-generators-behavior-explained.html)

但是，请注意，这两篇博文都存在大约 3 年之久，都在谈论 NH 2.1.0，而截至今天的当前版本是 NH 3.3。但我认为 Fabio 所描述的问题今天仍然存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:53:42.517

它们是否是身份列没有区别。ORM 的作用是将数据实体映射到数据库，而不是指示数据库结构/设计。我使用了一个带有标识列的实现，它工作正常。

# php - 当我以编程方式创建事件时，我无法告诉 Facebook 在用户可视化它时它必须使用时区

> ID：10806531
> 
> 赞同：1
> 
> 时间：2012-05-29T20:51:16.113
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 Facebook PHP SDK 像这样创建一个事件

```
 $fb_event['name'] = $_POST['post_title'];
    $fb_event['description'] = $_POST['content'];
    $fb_event['start_time'] = date( "c", Ai1ec_Facebook_Event::get_facebook_start_time($event->start));
    $fb_event['location'] = "Dove ti pare basta che si aggiorni al mio timezone";
    $fb_event['street'] = "Via andrea del sarto 9";
    $fb_event['city'] = "Milan";
    $facebook = $this->facebook_instance_factory();
    try {
        $result = $facebook->api( "/me/events", "POST", $fb_event );
    } catch (FacebookApiException $e) {
        fb($e);
    } 
```

`Ai1ec_Facebook_Event::get_facebook_start_time`只需一个时间戳并将其转换为 UTC 假装它是 PST 。这意味着如果我决定事件在 UTC 晚上 8 点开始，该函数将返回第二天凌晨 3 点。

Evrything 正常工作并且我的事件已创建，问题是如果我与我的用户一起查看位于 TIMEZONE UTC + 2 中的事件，我仍然是晚上 8 点而不是晚上 10 点

这是创建的事件[https://www.facebook.com/events/245655182207213/](https://www.facebook.com/events/245655182207213/)

似乎 Facebook 在创建此事件时忽略了时区，为什么？我必须告诉 Facebook 什么才能使用标准时区？

编辑 - 阅读本文developers.facebook.com/roadmap/#timezone-less-events后，我意识到有时区字段，但我无法让它工作，因为如果我发送

```
$fb_event['timezone'] = "Europe/Sofia"; 
```

Facebook 只是忽略了这一点，当我查询事件时，我会为时区返回 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:28:57.807

Facebook 已经实施了“无时区事件”。我发现这意味着事件总是向用户显示，就好像它们是在该用户的当地时间（所以当我在 Facebook 上访问你的事件页面时，我也看到你的事件发生在 20:00-22 :00，即使我位于 UTC-4)。

事件[API 文档](https://developers.facebook.com/docs/reference/api/event/)说 start_time 和 end_time 应该传递一个“包含 ISO-8601 格式的日期/时间或 UNIX 时间戳的字符串”。

我建议将 ISO-8601 格式的日期传递给它，因为如果你传递一个时间戳，你需要为夏令时更正那个时间戳（你的和 Facebook 的）。因此，对于您的活动，您的代码应该看起来像`$fb_event['start_time'] = date( "c", $event->start);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:32:36.270

我认为你不能那样做。
我不确定，但是：

从已弃用的[REST API events.create](http://developers.facebook.com/docs/reference/rest/events.create/)的文档中：

> 注意： start_time 和 end_time 是事件创建者输入的时间。**Facebook Events 没有时区的概念，**但如果指定了时区，时间将被转换为太平洋（夏令时或标准）时间，然后再存储和显示。但是当显示事件时，没有指定或暗示时区。

在事件对象文档中，他们说：

> 包含 ISO-8601 格式的日期/时间或 UNIX 时间戳的字符串；如果包含时区（不推荐），会先转换为太平洋时间再存储和显示

您可能想阅读以下内容：[正确解析 Graph API 事件时间](http://www.senab.co.uk/2011/06/24/facebook-event-times/)。

这可能无法解决您的问题，但恐怕在这个问题上没有太多。

# android - 如何使 TextSwitcher 中的文本不能全部淡入？

> ID：10806532
> 
> 赞同：1
> 
> 时间：2012-05-29T20:51:18.513
> 
> 标签：android, animation, textview, spannable

我正在尝试创建一个具有文本淡入但并非同时淡入的 android 程序。例如，我希望句子“The boy is high”首先与“the boy”一起淡入，然后让“is tall”在旁边淡入。我已经为此工作了一段时间，但不知道该怎么做。此外，我尝试设置一个包含句子不同部分的 spannable 并对这些部分进行动画处理，但这不起作用。有谁知道如何在android上执行此操作？

# mysql - 将所有内容加入两个表

> ID：10806541
> 
> 赞同：2
> 
> 时间：2012-05-29T20:51:57.783
> 
> 标签：mysql

我必须要通过一个公共单元格获得两者连接的所有结果的表。问题是第二张表只有第一张表的一些记录。

```
Table 1 forms
form_id, description, image,dept

Table 2 records
record_id, form_id, comments, added_date, done_date 
```

如果做这样的查询：

```
SELECT * FROM form
JOIN records ON record.form_id = form.form_id 
```

我没有收到所有表格，因为该表格没有记录。有没有办法做这样的事情？我会为记录表中的每个表格创建一个空白记录，但我也无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:55:26.303

这是 LEFT OUTER JOIN 的完美应用。
例子：

```
SELECT f.*, r.*
FROM   form f
       LEFT JOIN records r
       ON r.form_id = f.form_id
ORDER BY f.description, r.added_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:56:39.260

在这些情况下使用左连接

```
SELECT * FROM form
LEFT JOIN records ON record.form_id = form.form_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:16:28.880

请检查您需要哪一个 - `LEFT OUTER JOIN`：将包括左侧提到的表中的所有记录和右侧表中的匹配记录，未匹配的记录将为空

前任 ：

```
SELECT * 
FROM forms
LEFT JOIN records ON  forms.form_id = record.form_id 
```

`FULL OUTER JOIN`: 将包括两个表中的所有数据，不匹配的将为空

前任 ：

```
SELECT * 
FROM forms
FULL OUTER JOIN records ON  forms.form_id = record.form_id 
```

# android - 访问自定义项目列表中每个项目的各种元素

> ID：10806546
> 
> 赞同：0
> 
> 时间：2012-05-29T20:52:12.320
> 
> 标签：android, android-listview

我在android中有一个自定义列表，这个列表有一个文本编辑器和每个元素的复选框，我想要一个方法来获取每个元素的数据和状态，并将它们保存在一个电影对象数组中，其中电影是*电影（字符串描述，布尔状态）*

如何访问列表中每个元素的各个组件？

我的自定义 ListAdapter 是

```
 public class CustomAdapter extends ArrayAdapter<String> {

       private HashMap<Integer, Boolean> movieCollection =
                new HashMap<Integer, Boolean>();

       private String[] data;

       public CustomAdapter(Context context) {
          super(context, R.layout.movie_item, android.R.id.text1, context
                   .getResources().getStringArray(R.array.movies));

          data =
                   context.getResources().getStringArray(R.array.movie_thumbs);
       }

       public void toggleMovie(int position) {
          if (!isInCollection(position)) {
             movieCollection.put(position, true);
          } else {
             movieCollection.put(position, false);
          }
       }

       public boolean isInCollection(int position) {
          return movieCollection.get(position) == Boolean.TRUE;
       }

   @Override
   public View getView(int position, View convertView, ViewGroup parent) {
      View listItem = super.getView(position, convertView, parent);

      CheckBox checkMark =
               (CheckBox) listItem.findViewById(android.R.id.check_movie);
      checkMark.setChecked(isInCollection(position));

      EditText editText = (EditText) listItem.findViewById(R.id.movie_description;
      editText.setTag(position);
      String textUrl = this.data[position];
      new DownloadTask(position, editText).execute(editText);

      return listItem;
   }
} 
```

*如果有人不明白有什么问题：我需要一种方法来直接访问所描述列表的项目中的每个 EditText 和 CheckBox 。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:43:59.037

也许您可以在每次编辑后保存数据，在适配器中有一个电影列表（或类似的）并将侦听器设置为编辑文本和复选框。

# c# - 如何制作 XML 或 JSon 配置文件并在 JavaScript 中反序列化？

> ID：10806556
> 
> 赞同：1
> 
> 时间：2012-05-29T20:53:20.800
> 
> 标签：c#, javascript

我们仅使用 Dojo javascript 构建我们的网站。对于某些功能，我们希望在运行时使用配置文件来填充一些属性和列表项。我知道如何在 C# 服务器端代码中反序列化 XML 文件，但我可以在 Javascript 中做同样的事情吗？有没有我可以参考的例子？

谢谢，

魏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:56:51.853

您可以使用 javascript 的 eval() 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:16:07.503

您可能正在寻找 Dojo.fromJson： [http ://dojotoolkit.org/reference-guide/1.7/dojo/fromJson.html#dojo-fromjson](http://dojotoolkit.org/reference-guide/1.7/dojo/fromJson.html#dojo-fromjson)

如果您在 JavaScript 中获取 JSON 字符串，则可以使用该函数将其转换为对象。

此外，通常不鼓励使用 eval()。[JavaScript 的 eval() 什么时候不是邪恶的？](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)

# algorithm - 无法弄清楚张开是如何工作的

> ID：10806560
> 
> 赞同：0
> 
> 时间：2012-05-29T20:53:47.690
> 
> 标签：algorithm, data-structures, binary-tree, binary-search-tree, splay-tree

我无法理解展开是如何工作的。
我无法理解的部分是我们如何知道a：i）`zig`ii）`zig-zag`或iii）`zig-zig`是否必须完成。
如果我理解正确，这与路径中的当前节点有关。
如果它是根的孩子，那么它是`zig`（ii）或（iii），这取决于当前节点的父节点和当前节点是否都是左（或右）孩子。到目前为止还好。
现在我不明白的部分：
当我们向下移动时，不是将中间节点“移除”到左右子树中的过程，以便我们有一个中间树，最终将成为搜索项的根？
然后，如果我们从一棵树开始，我们将不断地做`zig`没有别的，因为我们正在删除元素并且始终位于根部。
示例：
![在此处输入图像描述](../Images/ec80365a81985fc180a4a930c4d961d4.png)
例如，如果我正在寻找`20`我会从根开始向左走。所以当前节点有root作为父节点，我做了一个zig。现在会发生什么？我在`26`向左走，但不是`26`root吗？那我应该做一个zig吗？
但从我在这个例子中看到的情况来看，正在完成一个之字形，我不明白为什么。
这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:24:49.200

他们所说的根是指整个树的根，而不是你正在展开的子树的根。因此，在您的示例中，12 是整个树的根。

...

如果您想要一个示例，我最近用 Java 编写了一个 SplayTree。[你可以在这里](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/SplayTree.java)找到代码。

展开树的重要之处在于它们将最近插入/查询的节点（最多）在树中向上移动两级。您必须根据其祖父节点和父节点位置执行 zig、zig-zig 或 zig-zag。

当访问节点 x 时，对 x 执行 splay 操作以将其移动到根。为了执行展开操作，我们执行一系列展开步骤，每个步骤都将 x 移近根。

三种类型的展开步骤是：（g = 祖父，p = 父，x = 展开的节点）

*   Zig Step：当 p 是根时完成此步骤。树在 x 和 p 之间的边缘上旋转。
*   Zig-zig Step：当 p 不是根并且 x 和 p 都是右孩子或都是左孩子时，执行此步骤。树在连接 p 与其父节点 g 的边上旋转，然后在连接 x 和 p 的边上旋转。
*   Zig-zag Step：当 p 不是根且 x 是右孩子且 p 是左孩子或反之亦然时，执行此步骤。树在 x 和 p 之间的边上旋转，然后在 x 和它的新父级 g 之间的边上旋转。

[http://en.wikipedia.org/wiki/Splay_tree](http://en.wikipedia.org/wiki/Splay_tree)

下面是树中节点 3 的展开。

张开前的树：

```
└── 0
    └── (right) 9
        └── (left) 7
            ├── (left) 5
            │   ├── (left) 1
            │   │   └── (right) 2
            │   │       └── (right) 4
            │   │           └── (left) 3
            │   └── (right) 6
            └── (right) 8 
```

经过（右->左）之字形到节点 3。

```
└── 0
    └── (right) 9
        └── (left) 7
            ├── (left) 5
            │   ├── (left) 1
            │   │   └── (right) 3
            │   │       ├── (left) 2
            │   │       └── (right) 4
            │   └── (right) 6
            └── (right) 8 
```

在另一个（左->右）Zig-Zag 到节点 3 之后。

```
└── 0
    └── (right) 9
        └── (left) 7
            ├── (left) 3
            │   ├── (left) 1
            │   │   └── (right) 2
            │   └── (right) 5
            │       ├── (left) 4
            │       └── (right) 6
            └── (right) 8 
```

经过（左->左）之字形到节点 3。

```
└── 0
    └── (right) 3
        ├── (left) 1
        │   └── (right) 2
        └── (right) 7
            ├── (left) 5
            │   ├── (left) 4
            │   └── (right) 6
            └── (right) 9
                └── (left) 8 
```

在（右）Zig 到节点 3 之后。现在是时候停止了，因为 3 处于根位置。

```
└── 3
    ├── (left) 0
    │   └── (right) 1
    │       └── (right) 2
    └── (right) 7
        ├── (left) 5
        │   ├── (left) 4
        │   └── (right) 6
        └── (right) 9
            └── (left) 8t) 6
                └── (right) 9
                    └── (left) 8 
```

如果您尝试再次访问树中的节点 3，则不必展开它，因为它已经在根位置。

# javascript - 查询正在运行的父函数？

> ID：10806561
> 
> 赞同：0
> 
> 时间：2012-05-29T20:53:49.653
> 
> 标签：javascript, jquery, ajax, post

我是 JQuery 的新手。即使在文件中没有其他位置定义的情况下，LoadData() 是否有执行的原因？我在这里有点困惑，我觉得仅此代码不应该做任何事情。

```
<script type="text/javascript">
function LoadData(){
    $.post("samefile.php", { exclusivity: "private" },
       function(data) {
         alert("Data Loaded: " + data);
       });
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:23:15.400

**秀珠评论：**

“将 LoadData 重命名为 LoadDataISDead 并运行该页面。您将在页面某处看到脚本错误。”

# ios - 是否可以使用 IB 在旋转时自动更改项目的大小？

> ID：10806564
> 
> 赞同：0
> 
> 时间：2012-05-29T20:54:06.160
> 
> 标签：ios, xcode

我在 IB 中有一个包含图像的视图。在纵向模式下查看时，图像相当大，如果设备翻转为纵向，则需要缩小图像以适应较窄的屏幕高度。

在 IB 中是否可以为图像指定两种尺寸，一种用于横向，一种用于纵向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:57:25.387

您可以使用 IB 自动将图像视图调整为相对于其周围视图，如果您可以工作，这是一个很好的解决方案，但如果您需要精确的像素大小，您可能需要在代码中执行此操作。

# iphone - iPhone没有响应点击事件

> ID：10806565
> 
> 赞同：1
> 
> 时间：2012-05-29T20:54:10.517
> 
> 标签：iphone, mobile, safari, click, dom-events

我试图让这个导航栏在移动 Safari 上做出响应。它在 iPhone 模拟器上运行良好。从这个答案认为它可以通过简单地添加`cursor:pointer`属性来工作，但仍然没有运气。 [如何在 iPhone Web 应用程序中使用 jQuery 进行点击事件](https://stackoverflow.com/questions/3025348/how-do-i-use-jquery-for-click-event-in-iphone-web-application) 非常感谢任何帮助（代码在桌面浏览器上运行良好）。

```
$(document).ready(function(){

//Click nav links
$('.nav li').click(function(e){
    $('.nav li').attr('id', ''); //navtabs inactive
    $(this).attr('id', 'activetab'); // clicked tab active

    //hide  fieldsets
    $('fieldset').attr('class', 'hidden');

    whichitem=$(this).attr('title'); //get title nav clicked

    //show class cleared
    $("fieldset[title='"+whichitem+"']").attr('class', ''); 
});

}); 
```

和形式：

```
<div class="nav">
<ul>
    <li id="activetab" title="<?php echo _('Login'); ?>"><?php echo _('Step 1'); ?></li>
    <li title="<?php echo _('Professional Details'); ?>"><?php echo _('Step 2'); ?></li>
    <li title="<?php echo _('Optional'); ?>"><?php echo _('Step 3'); ?></li>
</ul>
</div>

    <button type="submit"><?php echo _('Submit'); ?></button>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:12:18.947

：） 固定的

```
$(document).ready(function(){
var ua = navigator.userAgent,
event = (ua.match(/iPhone/i)) ? "touchstart" : "click"; 
```

# java - Java JAR 不包含正确的依赖项

> ID：10806566
> 
> 赞同：0
> 
> 时间：2012-05-29T20:54:15.550
> 
> 标签：java, mongodb, jar, leiningen, mongodb-java

我正在尝试创建我的 java 项目的 uberjar，[其中](https://github.com/mongodb/mongo-java-driver)包含包的依赖`mongodb-java-driver`项。`com.mongodb.*`

目前我已经尝试使用 leiningen 版本`2.0.0-preview4`和`1.7.1`，和 mongodb-java-driver 版本`2.7.3`。我的 project.clj 依赖项如下所示：

```
 :dependencies [[org.clojure/clojure "1.2.0"]
             [org.clojure/clojure-contrib "1.2.0"]
             [org.mongodb/mongo-java-driver "2.7.3"]
             [org.apache.commons/commons-math3 "3.0"]
             ] 
```

运行命令时，`lein clean && lein uberjar`我看到以下输出：

```
...
Including mongo-java-driver-2.7.3.jar
... 
```

执行 uberjar 后，我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/mongodb/DBObject
    at org.ianalexan.Topology.main(Topology.java:69)
Caused by: java.lang.ClassNotFoundException: com.mongodb.DBObject
    ... 
```

显然，[以前版本的 leiningen 在运行时删除 .class 文件时存在问题](https://stackoverflow.com/questions/4354293/jar-produced-with-lein-uberjar-fails-on-noclassdeffounderror)，我相信我没有使用受此问题影响的版本。

如何创建包含 com.mongodb.* 依赖项的 uberjar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:57:11.740

原来是打包应用的问题！

# sql - 每行的总计

> ID：10806567
> 
> 赞同：0
> 
> 时间：2012-05-29T20:54:15.937
> 
> 标签：sql, teradata

我有两张表，一张包含制造数据，一张包含维修数据。

对于我的查询，数据集的结构如下：

```
MODEL_NAME
PRODUCTION_PROCESS_1
PRODUCTION_PROCESS_2
MFR_DATE
REPAIR_DATE
TOTAL
HARD_DRIVE_SER_NUM
RECEIVER_SER_NUM 
```

我需要显示（“TOTAL”）已修复并经过生产过程 1 和 2 的字段中接收器模型的总数。

```
ZR16-500 BALANCERING REWORK 1/2/2010 9/12/2011 147,565 99ZXF A20KTG
ZR22-100 NOBALANCERING PRIME 8/2/2011 3/9/2012 234 92KXF D208FSTXS
ZR16-500 BALANCERING REWORK 1/9/2010 4/2/2012 147,565 G96ZXF A25RSF
... 
```

也许“总计”在这里不适用。我欢迎任何建议。提前致谢。

PS：我在 Teradata 上。不确定是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:28:48.853

该线程可以关闭。我的用户刚刚通知我，他将重新定义他的要求。谢谢你的时间。

# c# - 将焦点放在扩展器内的组件上

> ID：10806570
> 
> 赞同：2
> 
> 时间：2012-05-29T20:54:26.763
> 
> 标签：c#, wpf

我有这个要求，当用户按下标签时，我需要将第一个元素集中在扩展器内。

当前（默认行为）焦点转到扩展器，我尝试通过在扩展器中创建焦点事件处理程序来聚焦扩展器的第一个元素，如下所示：

```
private void ExpanderGotFocus(object sender, RoutedEventArgs e)
{
    var expander = (Expander) sender;

    if (!expander.IsExpanded)
    {
        expander.IsExpanded = true;
        this._someText.Focus();
    }        
} 
```

这是行不通的。

我还尝试将焦点放在下一个元素：

```
var tRequest = new TraversalRequest(FocusNavigationDirection.Next);
var keyboardFocus = Keyboard.FocusedElement as UIElement;
keyboardFocus.MoveFocus(tRequest); 
```

但只能第二次工作（当扩展器至少打开一次时）

我试图把它放在一个线程和其他一些疯狂的想法中。

如何将焦点放在扩展器**内的第一个元素上？**（第一次关闭膨胀机）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:11:32.180

我尝试了几种方法，但都没有奏效，基本上问题是当扩展器扩展时 TextBox 仍在渲染（到早期）。

所以相反，我发现将`IsVisibleChanged`事件添加到文本框，这样当扩展器完成时，文本框变得可见并请求焦点

XAML

```
<Expander GotFocus="ExpanderGotFocus">
    <Expander.Header>
        <TextBlock Text="{x:Static Client:Strings.XYZ}" />
    </Expander.Header>
    <Expander.Content>
        <StackPanel>
            <TextBox IsVisibleChanged="ControlIsVisibleChanged"  Name="txtBox" />
        </StackPanel>
    </Expander.Content>
</Expander> 
```

背后的代码

```
private void ExpanderGotFocus(object sender, RoutedEventArgs e)
{
    var expander = (Expander) sender;

    if (!expander.IsExpanded )
    {
        expander.IsExpanded = true;
    }
}

private void ControlIsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    Keyboard.Focus((IInputElement)sender);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:43:27.883

检查以下内容，

XAML 代码：

```
<StackPanel>
        <Expander Header="Expander"
                  Name="expander"
                  Collapsed="OnCollapsed"
                  IsExpanded="True" >
            <StackPanel>
                <TextBox Text="Text1" Name="textBox1" />
                <TextBox Text="Text2" Name="textBox2"  />
                <TextBox Text="Text3" Name="textBox3"  />
            </StackPanel>
        </Expander>
        <TextBox Text="Text4" Name="textBox4" />
</StackPanel>

in the code behind:
public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            this.Loaded += delegate
            {
                textBox2.Focus();
            };
        }
        private void OnCollapsed(object sender, RoutedEventArgs e)
        {
            var element = Keyboard.FocusedElement;
            if (element != null)
            {
                //now is the ToggleButton inside the Expander get keyboard focus
                MessageBox.Show(element.GetType().ToString());
            }
            //move focus
            Keyboard.Focus(textBox4);
        }
} 
```

# c# - 从套接字读取数据，发送响应并关闭

> ID：10806577
> 
> 赞同：2
> 
> 时间：2012-05-29T20:55:05.033
> 
> 标签：c#, php, sockets

我正在处理 ac# 和 php 项目，其中 PHP 脚本打开一个到 ac# 程序的套接字，c# 程序将读取数据，然后发回响应。

在 PHP 脚本中，我有以下内容：

```
echo "Opening Client";

$fp = fsockopen("127.0.0.1", 12345, $errno, $errstr, 30);

if (!$fp)
{
    echo "Error: $errstr ($errno)<br />";
}
else
{
    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: 127.0.0.1\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp))
    {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

在 C# 项目中，我有以下内容：

```
public void startListen()
        {
            int port = 12345;
            IPAddress serverAddress = IPAddress.Parse("127.0.0.1");
            TcpListener listener = new TcpListener(serverAddress, 12345);
            listener.Start();

            TcpClient client = listener.AcceptTcpClient();

            NetworkStream stream = client.GetStream();
            byte[] data = new byte[client.ReceiveBufferSize];
            int bytesRead = stream.Read(data, 0, Convert.ToInt32(client.ReceiveBufferSize));
            string request = Encoding.ASCII.GetString(data, 0, bytesRead);
            Console.WriteLine(request);

            Console.ReadLine(); 
```

PHP 脚本似乎一直在等待并且没有完成，我猜它是因为 c# 应用程序上的套接字发送回响应，但我不知道该怎么做。另一个问题，在 C# 中我需要有，`Console.ReadLine()`否则 c# 程序将退出，但 PHP 脚本会按预期完成。

基本上，我想知道的是这是读取在套接字上发送的数据的最佳方式，保持程序运行以便它继续侦听套接字的最佳方式是什么，以及我如何发回回复以便php脚本可以完成。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:50:03.557

我设法弄清楚了这一点，在处理完数据后我需要发送一个 stream.write ，这就是发送回复的内容。

下面是代码

```
 int port = 12345;
            IPAddress serverAddress = IPAddress.Parse("127.0.0.1");
            TcpListener listener = new TcpListener(serverAddress, port);
            listener.Start();

            while (true)
            {
                TcpClient client = listener.AcceptTcpClient();

                NetworkStream stream = client.GetStream();
                byte[] data = new byte[client.ReceiveBufferSize];
                int bytesRead = stream.Read(data, 0, Convert.ToInt32(client.ReceiveBufferSize));
                string request = Encoding.ASCII.GetString(data, 0, bytesRead);
                Console.WriteLine(request);
                byte[] msg = System.Text.Encoding.ASCII.GetBytes("200 OK");

                // Send back a response.
                stream.Write(msg, 0, msg.Length);
                client.Close();
            } 
```

谢谢你的帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-25T01:41:20.553

Boardy 先生的解决方案是正确的，但我认为通过套接字这样做会更好。

所以socket解决方案是：

```
private void Form3_Load(object sender, EventArgs e)
{
    sc_listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    IPEndPoint ip_local = new IPEndPoint(IPAddress.Loopback, 1225);
    sc_listener.Bind(ip_local);
    sc_listener.Listen(10);

    AsyncCallback callback = new AsyncCallback(procces_incoming_socket);
    sc_listener.BeginAccept(callback, sc_listener);
}

void procces_incoming_socket(IAsyncResult socket_object)
{
    Socket sc_listener = ((Socket)socket_object.AsyncState).EndAccept(socket_object);

    AsyncCallback receive = new AsyncCallback(receive_data);
    buffer = new byte[100];
    sc_listener.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, receive, sc_listener);
}

void receive_data(IAsyncResult socket)
{
    // the system need to wait so i make a loop when it gets data 
    //i end the loop by flag=false
    bool flag = true;
    Socket re_socket = ((Socket)socket.AsyncState);
    while(flag)
    {
        int bytes_recieved = re_socket.EndReceive(socket);

        string data = UTF8Encoding.UTF8.GetString(buffer);
        if (textBox1.InvokeRequired)
        {
            // for cross thread problem
            textBox1.Invoke(new MethodInvoker(delegate { textBox1.Text = data; }));
        }
        else
        {
            textBox1.Text = data;
        }
        flag = false;
    }
    string back_data = "my pm socket back";
    byte[] buffers = new byte[50];
    buffers = UTF8Encoding.UTF8.GetBytes(back_data);
    re_socket.Send(buffers);
    // if the socket is not closed php will load for maximum required time and then error
    re_socket.Close();
    //start for next listening (O-0)
    AsyncCallback callback = new AsyncCallback(procces_incoming_socket);
    sc_listener.BeginAccept(callback, sc_listener);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:06:50.307

无论如何，我都不是一个 php 人，所以我的答案取决于 php 是否能够正确响应。在 C# 端，创建一个 while/do-while 循环，该循环继续运行以接受下一个传入请求。这是一个简单的例子：

[http://www.csharp-examples.net/socket-send-receive/](http://www.csharp-examples.net/socket-send-receive/)

确保设置 NoDelay 选项，以便刷新信息。

# java - 将外部库配置为 Glassfish 模块

> ID：10806578
> 
> 赞同：3
> 
> 时间：2012-05-29T20:55:22.100
> 
> 标签：java, maven, glassfish, osgi

我有几个使用外部库的 OSGI 包和 WAR 包：

```
 <dependencies>       
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>        
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.compendium</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>osgi-cdi-api</artifactId>
            <version>3.1-b41</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency> 
```

可以将这些库复制到 Glassfish 服务器的 /modules 目录中，而不是将这些库构建到每个 OSGI 包和 WAR 包中。我想可以只使用一个副本没有任何问题吗？

**编辑**

我发现这些库可以使用以下命令部署为 Glassfish 中的模块：

`[root@Testserver bin]# sh asadmin add-library /opt/primefaces.jar` 但是，例如在一个简单的 WAR 包中，我需要修改什么才能使用 Glassfish 模块？我想必须将 WAR 包配置为使用外部库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:50:58.833

您可以查看 glassfish 文档的这一部分，称为**Module and Application Versions**：

[http://docs.oracle.com/cd/E26576_01/doc.312/e24929/overview.htm#gkhhv](http://docs.oracle.com/cd/E26576_01/doc.312/e24929/overview.htm#gkhhv)

"*应用程序和模块版本控制允许同一应用程序的多个版本存在于 GlassFish Server 域中，这简化了升级和回滚任务。在任何给定时间，最多可以在服务器上启用一个应用程序或模块版本。版本控制提供了对以下方面的扩展用于部署、查看和管理多个版本的模块和应用程序的工具，包括管理控制台和与部署相关的 asadmin 子命令。同一模块或应用程序的不同版本可以具有相同的上下文根或 JNDI 名称。版本控制的使用是可选的。* "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:00:25.197

我不认为问题出在您的战争文件中，但要确保您可以检查清单文件。如果 Import-Package 标头正确，则您无法从 war 文件中执行任何操作。如果是这种情况，必须有办法说服 Glassfish 使模块对 web 应用程序可见（我不是 Glassfish 专家，抱歉）。

否则，请修复 Import-Package 标头（您现在可以手动执行此操作）。

# android - 如何访问包含在 webview 中的 html 元素？

> ID：10806579
> 
> 赞同：5
> 
> 时间：2012-05-29T20:55:25.830
> 
> 标签：android, webview, tinymce, android-sdcard

我正在为我的项目在 android 中构建一个文本编辑器。我使用了开源项目 TinyMCE，对其进行了一些调整并集成到我的 WebView ...

我已加载到 WebView 中的 HTML 文件中有一个提交按钮...

我想知道如何捕获它的“onClick”事件，这样我就可以编写java代码来保存到目前为止已经输入到编辑器中的数据，在SD卡中，只要按下提交按钮......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:38:41.140

您不能直接从 Java 访问 DOM（据我所知），但您可以使用 JS 调用带有变量的 Java 函数并使用它传递数据。[您可以从文档](http://developer.android.com/guide/webapps/webview.html)中阅读更多关于如何在 Android 中将 Java 绑定到 JS（带有示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:27:36.700

不幸的是，没有 API 实现可以访问 WebView 中的任何 HTML。

# java - 在网格样式布局中为 JButton 设置固定大小

> ID：10806584
> 
> 赞同：0
> 
> 时间：2012-05-29T20:55:39.450
> 
> 标签：java, user-interface, jbutton, layout-manager

我想让 16 个按钮显示为 4x4 网格。每个按钮应该是相同的大小，并且有相等的间距。

我已经能够设置间隙大小，但我无法减小按钮的大小。我基本上只将它用于组布局......

```
layout.setHorizontalGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(LEADING)
                    .addComponent(button1)
                    .addComponent(button5)
                    .addComponent(button9)
                    .addComponent(button13))
               .addGroup(layout.createParallelGroup(LEADING)
                    .addComponent(button2)
                    .addComponent(button6)
                    .addComponent(button10)
                    .addComponent(button14))
               .addGroup(layout.createParallelGroup(LEADING)
                    .addComponent(button3)
                    .addComponent(button7)
                    .addComponent(button11)
                    .addComponent(button15))
               .addGroup(layout.createParallelGroup(LEADING)
                    .addComponent(button4)
                    .addComponent(button8)
                    .addComponent(button12)
                    .addComponent(button16))
            );

            layout.setVerticalGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(BASELINE)
                    .addComponent(button1)
                    .addComponent(button2)
                    .addComponent(button3)
                    .addComponent(button4))
               .addGroup(layout.createParallelGroup(BASELINE)
                    .addComponent(button5)
                    .addComponent(button6)
                    .addComponent(button7)
                    .addComponent(button8))
               .addGroup(layout.createParallelGroup(BASELINE)
                    .addComponent(button9)
                    .addComponent(button10)
                    .addComponent(button11)
                    .addComponent(button12))
               .addGroup(layout.createParallelGroup(BASELINE)
                    .addComponent(button13)
                    .addComponent(button14)
                    .addComponent(button15)
                    .addComponent(button16)) 
```

有人可以帮助我用更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:43:25.033

您也可以尝试使用 GridLayout()。这会将所有组件排列在网格中，行和列由参数定义。您使用该行创建它

```
GridLayout g = new GridLayout(rows, columns) 
```

您需要导入 AWT，以便您的代码如下所示：

```
GridLayout g = new GridLayout(4,4);
//Add it to your JPanel
myJpanel.setLayout(g);
//then
myJpanel.add(button1);
//the rest of your code 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T21:10:41.847

GroupLayout 中每个组件的大小受三个值的约束；最小尺寸、首选尺寸和最大尺寸

尝试：

```
button.setPreferredSize(new Dimension(50, 10)); 
```

# c# - 我的 ArrayList 去哪儿了？地铁应用

> ID：10806588
> 
> 赞同：6
> 
> 时间：2012-05-29T20:56:19.507
> 
> 标签：c#, windows-8, windows-runtime

在我使用 Visual Studio 11 Express Beta 编写的 Windows 8 应用程序中，我无法使用 ArrayList。这是我的代码：

```
using System.Collections;

ArrayList al = new ArrayList(); 
```

编译器错误：

> 找不到类型或命名空间名称“ArrayList”（您是否缺少 using 指令或程序集引用？）

这是新事物吗？我喜欢 ArrayLists :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T21:01:33.460

对于 WinRT，他们去掉了所有的非泛型集合——它更快并且让你的代码更可靠。请改用 List<T>。

ps...这不会是你最后一次说“他们为什么要拿走那个 API？” 在迁移到 WinRT 时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:58:23.907

**编辑**

考虑到[ArrayList](http://msdn.microsoft.com/it-it/library/system.collections.arraylist%28v=vs.100%29.aspx)的文档，它直到 4.0 版本才可用。检查 .NET Framework 的项目版本。考虑到您正在为 Metro 写作，它必须是 4.5（至少）。

更多细节可以在这篇文章中看到：

[如何在 Metro 风格类库项目中使用 ArrayList 类？](http://social.msdn.microsoft.com/Forums/da/winappswithcsharp/thread/469bb6cf-662e-43d6-84ae-119784bd9c9a)

Metro Style 应用程序的 System.Collections 命名空间[缺少](http://msdn.microsoft.com/en-us/library/windows/apps/hh454064%28v=vs.110%29.aspx)**类型**`ArrayList`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:01:36.753

ArrayList 在 Metro 风格应用程序的 .NET 4.5 中不可用。使用 List 的通用版本，如果您需要对象列表，请使用`List<object>`.

有关 Metro 风格应用程序 API 参考的 .NET，请查看此处：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh454064%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh454064%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T21:00:19.997

您不能`ArrayList`在 WinRT 应用程序中使用 ，您必须使用`List`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-26T15:15:08.450

这取决于您使用的 .NET Framework 版本。.Net 4.5.1 不支持 ArrayList。您应该使用 List 的通用形式，`List<T>` 而不是`ArrayList`作为集合类型。

看看这里：

[List<Object> 是 ArrayList 的一个很好的替代品吗？](https://stackoverflow.com/questions/22570189/is-listobject-a-good-replacement-for-arraylist)

您可以在这里了解更多信息：

[https://msdn.microsoft.com/en-us/library/41107z8a.aspx](https://msdn.microsoft.com/en-us/library/41107z8a.aspx)

# debugging - 在虚拟机上使用带有虚拟主机的 Charles 调试代理

> ID：10806592
> 
> 赞同：6
> 
> 时间：2012-05-29T20:56:45.143
> 
> 标签：debugging, http, proxy, virtualhost, charles-proxy

我有一个在我挂载的 Mac 上运行的虚拟机。此 VM 正在运行多个虚拟主机。

当我加载 Charles 并导航到虚拟机上的站点时，响应速度非常慢。我已经检查过 Charles 内部没有打开节流。

我想知道是否有人能想到为什么会发生这种情况？

# java - Java Iterable 的优缺点

> ID：10806598
> 
> 赞同：1
> 
> 时间：2012-05-29T20:57:37.410
> 
> 标签：java, optimization, coding-style

接受和返回类型的 Java 方法`Iterable<T>`非常常见。我看到的问题是 Iterator[接口](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)非常有限，它要么需要将 Iterable 重构为可用的数据结构，要么强制用户执行 Iterable 的多次遍历，从而增加执行时间。

有人可以纠正我吗？Iterables 是否像我认为的那样糟糕？如果您被迫使用它们，是否有任何技术可以用来解决 Iterables 的限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T21:01:09.980

关于*接受*这`Iterable<T>`显然是一件好事。这意味着您几乎可以将任何数据结构传递给它——它只需要实现非常简单的`Iterable<T>`接口。这使得代码更容易重用。

返回一个`Iterable<T>`优点是方法的实现可以改变——可能使用更有效的数据结构，或者通过在请求时延迟生成结果（例如从磁盘流式传输）。在不破坏客户端的情况下更改实现很容易，因为它们只依赖于`Iterable<T>`接口。如果您公开了 a`List<T>`那么您不能确定您的客户将按顺序访问数据。

您是对的，如果您需要多次访问结果，那么首先将数据复制到不同的结构中是有意义的。但只有您知道哪个特定集合对您的特定情况最有用。有时它可能是一个`ArrayList`. 其他时候，您可能更喜欢将项目存储在`HashMap`. 因此，无论如何，您通常都必须将数据复制到新的数据结构中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:05:34.223

此外，在[JDK 8](http://jdk8.java.net/)中，我们将看到`Iterable`界面上的重大改进。

随着[扩展方法的添加，接口将提供默认实现，并且将添加许多新函数以提供能够接受](http://cr.openjdk.java.net/~briangoetz/lambda/Defender%20Methods%20v4.pdf)[lambda 表达式](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html)的高阶函数的等价物，此外，由于它们的迭代性质，[惰性求值](http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html)将被实现，而不是提到并行性，所以现在很流行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:08:18.010

接受`Iterable< T >`对您的客户来说是一项很棒的服务。

退回它通常对他们不利。如果您不打算改变对使用什么集合来实现结果的想法，那么您应该尽可能具体。

# jquery - JQuery 折叠和展开代码

> ID：10806602
> 
> 赞同：-2
> 
> 时间：2012-05-29T20:57:48.357
> 
> 标签：jquery, html, css, web

我想在点击时展开框。由于某种原因，代码不起作用。

[http://jsfiddle.net/9UJ7f/1/](http://jsfiddle.net/9UJ7f/1/)

PS：我也希望展开动画，你认为最好的方法是什么？也许检查“扩展”然后做一个 .animate ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:02:06.637

在 JSFiddle 的左侧，您选择了 MooTools 作为您的库。

如果你打开你的 javascript 控制台，你会注意到一条错误消息“jQuery 未定义”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:02:12.040

我假设您希望标题保留并且下面的内容展开/折叠。我想你可能想要一种不同的方法。jQuery 内置了 hide() 和 show()。如果包含“快”或“慢”作为参数，它将添加动画。

# javascript - 为什么以下 Javascript 在 Firefox 12 上不起作用，但在 IE9 中起作用？

> ID：10806603
> 
> 赞同：0
> 
> 时间：2012-05-29T20:57:53.127
> 
> 标签：javascript, html

我有一个简单的代码片段，它在单击按钮时对文本框的内容进行 Base64 解码。

在 IE9 中加载时，它的工作方式与预期完全一样，但在 Firefox 12 中，单击该按钮不会执行任何操作。

代码在这里：

```
<html>
<head>
    <script type="text/javascript">

  var keyStr = "ABCDEFGHIJKLMNOP" +
               "QRSTUVWXYZabcdef" +
               "ghijklmnopqrstuv" +
               "wxyz0123456789+/" +
               "=";

  function decode64(input) {
     var output = "";
     var chr1, chr2, chr3 = "";
     var enc1, enc2, enc3, enc4 = "";
     var i = 0;

     // remove all characters that are not A-Z, a-z, 0-9, +, /, or =
     var base64test = /[^A-Za-z0-9\+\/\=]/g;
     if (base64test.exec(input)) {
        alert("There were invalid base64 characters in the input text.\n" +
              "Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n" +
              "Expect errors in decoding.");
     }
     input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

     do {
        enc1 = keyStr.indexOf(input.charAt(i++));
        enc2 = keyStr.indexOf(input.charAt(i++));
        enc3 = keyStr.indexOf(input.charAt(i++));
        enc4 = keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
           output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
           output = output + String.fromCharCode(chr3);
        }

        chr1 = chr2 = chr3 = "";
        enc1 = enc2 = enc3 = enc4 = "";

     } while (i < input.length);

     return unescape(output);
  }
String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g,"");
}
function decodeHtml(){
        var contentdiv = document.getElementById("html");
        var targetdiv = document.getElementById("target");
        targetdiv.innerHTML = decode64(contentdiv.innerHTML.trim());
}
        </script>
</head>
        <body>
                <textarea id="html">
                </textarea>
                <button onClick="decodeHtml()">Decode</button><br><br>
                <div id="target"></div>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:04:30.307

不应该是最后一行：

```
targetdiv.innerHTML = decode64(contentdiv.innerHTML.trim()); 
```

是：

```
targetdiv.innerHTML = decode64(contentdiv.value.trim()); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZePbc/1/)**。

# mysql - 通过脚本仅在 MySQL 中添加新记录

> ID：10806605
> 
> 赞同：1
> 
> 时间：2012-05-29T20:58:05.670
> 
> 标签：mysql, sql, perl, optimization, query-optimization

我有一个大型数据库，我正在尝试通过 perl 进行更新。要添加的信息来自我无法控制的 csv 文件（但它是受信任的——它来自我们公司的不同部分）。对于文件中的每条记录，我需要添加它（如果它不存在）或什么都不做（如果它存在）。添加记录包括通常的`INSERT INTO`，但在此之前可以为特定条目运行，`UPDATE`必须运行特定的。

为了具体起见，假设该文件有 10,000 个条目，但其中 90% 已经在数据库中。导入记录的最有效方法是什么？我可以看到一些明显的方法：

*   从数据库中提取此类型的所有记录，然后检查文件中的每个条目的成员资格。缺点：大量数据传输，可能足以使服务器超时。
*   从文件中读取条目，并仅针对带有`RLIKE 'foo|bar|baz|...'`查询（或`stuff = 'foo' || stuff = 'bar' || ...`查询，但这似乎更糟）的那些记录发送查询。缺点：巨大的查询，可能足以阻塞服务器。
*   读入文件，为每个条目发送一个查询，然后在适当的时候添加它。缺点：数以万计的查询，非常慢。

除了`UPDATE`要求之外，这似乎是一个相当标准的问题，大概有一个标准的解决方案。如果有，它可能可以通过适当使用`auto_increment`主键测试来适应我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:13:48.207

标准解决方案是使用`INSERT IGNORE`which 在插入因约束而失败时不会引发错误。这对你没有多大用处，因为它不会让你有机会`UPDATE`在你知道`INSERT`它会起作用之前做。但是，如果您可以在之后进行更新，那么这是理想的：只需`INSERT IGNORE`每条记录，然后`UPDATE`如果成功则执行。

如果记录*已经存在*，则意味着具有匹配唯一键的记录已经在数据库中，所以我不明白这个`RLIKE`势必会很慢的提议。

我将使用 Perl`SELECT count(*) FROM table WHERE key = ?`对每条记录使用的 CSV 文件进行 grep，并删除结果非零的任何内容。

然后对过滤后的 CSV 数据中剩下的所有内容执行您`UPDATE`的操作。`INSERT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:09:59.173

如果在迭代列表时不断刷新数据，则无需使服务器超时。

# jsf-2 - 为什么 JSF 不自动设置 id？

> ID：10806607
> 
> 赞同：1
> 
> 时间：2012-05-29T20:58:14.257
> 
> 标签：jsf-2

这是我的 xhtml 页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Index</title>
    <style>
.error {
    background-color: #fdd;
}
</style>
</h:head>
<h:body>
    <h:messages style="color: orange" />
    <h:form>
        <h:inputText value="#{myBacking.um}" required="true" />
        <h:commandButton value="Submit" action="#{myBacking.acme}" />
    </h:form>
</h:body>
</html> 
```

我使用 mojarra 2.0.9 和 mojarra 2.1.8 进行了测试，两者都不会为`h:inputText`组件生成 id。这是JSF中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:21:09.860

`<f:ajax>`如果最终用户自己指定了 ID，或者组件指定了客户端行为 (by )，Mojarra 只会设置 ID 。

[`HtmlBasicRenderer`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.1.7/com/sun/faces/renderkit/html_basic/HtmlBasicRenderer.java#HtmlBasicRenderer.shouldWriteIdAttribute%28javax.faces.component.UIComponent%29)以下是源代码相关性的摘录：

```
protected String writeIdAttributeIfNecessary(FacesContext context, ResponseWriter writer, UIComponent component) {
    String id = null;
    if (shouldWriteIdAttribute(component)) {
        try {
            writer.writeAttribute("id", id = component.getClientId(context), "id");
        } catch (IOException e) {
            if (logger.isLoggable(Level.WARNING)) {
                String message = MessageUtils.getExceptionMessageString (MessageUtils.CANT_WRITE_ID_ATTRIBUTE_ERROR_MESSAGE_ID, e.getMessage());
                logger.warning(message);
            }
        }
    }
    return id;
} 
```

并且，请注意评论

```
protected boolean shouldWriteIdAttribute(UIComponent component) {

    // By default we only write the id attribute if:
    //
    // - We have a non-auto-generated id, or...
    // - We have client behaviors.
    //
    // We assume that if client behaviors are present, they
    // may need access to the id (AjaxBehavior certainly does).

    String id;
    return (null != (id = component.getId()) &&
                (!id.startsWith(UIViewRoot.UNIQUE_ID_PREFIX) ||
                    ((component instanceof ClientBehaviorHolder) &&
                      !((ClientBehaviorHolder)component).getClientBehaviors().isEmpty())));
} 
```

所以，这是预期的行为。

# javascript - Javascript：将字符串视为数组在本地工作，但未部署在 IE 中

> ID：10806609
> 
> 赞同：3
> 
> 时间：2012-05-29T20:58:20.277
> 
> 标签：javascript, arrays, string, internet-explorer, internet-explorer-8

所以这个老实说让我摸不着头脑。我的 Javascript 中有一行代码在部署到我们的测试服务器时不起作用，但在从 Visual Studio 本地运行时工作得很好。在 Chrome 中运行该功能也没有问题，无论位置如何。获取字符串的最后一个字符只是一条简单的行，所以它为什么停止工作真的让我很困惑。我在本地和测试服务器上都运行 IE8（同一台机器正在浏览，只是移动了主机）。

```
WhichCredit = WhichCredit[WhichCredit.length - 1]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:08:10.210

在 ECMAScript 5 中引入了使用括号表示法访问字符串的字符。javascript 解释器可能是旧的并且不支持使用括号表示法从字符串中抓取字符。您最好使用内置函数，例如`WhichCredit.substr(-1)`或`WhichCredit.charAt(WhichCredit.length - 1)`来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T21:27:48.963

它可能在同一个浏览器中，但您确定它在两种情况下都以相同的模式显示吗？

是否有可能在一种情况下以 IE7 兼容模式显示？这将使它运行旧版本的 JS 解释器（除其他外），这可能会导致您看到的那种效果。要检查这一点，请打开开发工具 (F12)。

希望有帮助。

# mysql - MySQL 中的这个子查询是否有任何开销？

> ID：10806612
> 
> 赞同：1
> 
> 时间：2012-05-29T20:58:29.833
> 
> 标签：mysql, performance, subquery, explain

我想知道当我引入子查询时这个查询是否有开销：

```
SELECT p.id_product
FROM product p
JOIN reservation_product rp ON (p.id_product = rp.id_product)
JOIN reservation r ON (rp.id_reservation = r.id_reservation)

WHERE r.id_company =
-- **Subquery in question**
(SELECT r_inn.id_company FROM reservation r_inn WHERE r_inn.id_reservation = 56)

AND r.status = 'active'
-- Floor
AND r.checkout > '2012-05-30 13:00:00'
-- Ceil
AND r.checkin < '2012-05-30 15:00:00'
AND r.id_reservation <> 56
AND r.release_time IS NULL 
```

我可以要求用户直接为公司设置 id 并有一个像这样的 WHERE：

```
WHERE r.id_company = 1 
```

我试图通过引入子查询来避免这种情况，就像我在第一个示例中展示的那样，但我担心性能开销。

这是第一个查询的解释（请帮帮我，我还没有得到解释子句）：

![EXPLAIN 用于子查询查询](../Images/2eb52b28207add2deb9f30db8ff1cd62.png)

以及对硬编码的解释：

![在此处输入图像描述](../Images/d169ad53b544719a101108f8e3eddafd.png)

# php - 打开使用 PHPExcel 制作的 Excel 文件时出现“Excel 发现无法读取的内容”警告

> ID：10806617
> 
> 赞同：18
> 
> 时间：2012-05-29T20:58:47.483
> 
> 标签：php, excel-2007, phpexcel

我正在尝试使用[`PHPExcel`](http://download.codeplex.com/Project/Download/FileDownload.aspx?ProjectName=phpexcel&DownloadId=212184&FileTime=129433274033800000&Build=17831)如下方式下载 Excel 文件（xlsx）。

```
require_once("../../phpExcel/Classes/PHPExcel.php");
require_once("../../phpExcel/Classes/PHPExcel/IOFactory.php");

$objPHPExcel = new PHPExcel();

$objPHPExcel->getProperties()->setCreator("Tiny")
->setLastModifiedBy("Tiny")
->setTitle("Office 2007 XLSX Test Document")
->setSubject("Office 2007 XLSX Test Document")
->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.");

$objPHPExcel->setActiveSheetIndex(0);
$sheet=$objPHPExcel->getActiveSheet();
$sheet->setCellValue('A1', 'Hello');
$sheet->setCellValue('B2', 'world!');
$sheet->setCellValue('C1', 'Hello');
$sheet->setCellValue('D2', 'world!');

header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="test.xlsx"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('php://output'); 
```

它可以工作，但是当我尝试打开 Excel 文件时，它会要求在符合对话框中进行确认。

> Excel 在“test.xlsx”中发现了不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

我还尝试如下更改标题

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=test.xlsx");
header("Content-Transfer-Encoding: binary"); 
```

它仍然要求相同的确认。请问我在这里做错了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-30T13:40:20.143

正如在用户 Tiny 自己的评论中提问时所说：

> 最后，它奏效了。我刚刚在我的 PHP 脚本的末尾添加了 exit（在问题的第一个代码片段的末尾）。非常感谢大家给我有用的提示。

就此类问题提供一些建设性的附加提示：

*   一个很好的提示是您可以省略`?>`所有 PHP 脚本文件的结束标记，这样您就知道您不会在其末尾发送任何额外的不可见空格。
*   此外，在错误配置的 Web 服务器上以 UTF-8 编码 PHP 脚本文件可能会在脚本开始时发送不需要的几个字节。在 Notepad++ 上打开 PHP 文件，检查它是否为 UTF-8，在这种情况下，将其转换为 ANSI。如果这样可以正常工作，请检查您的 webserver/php 配置。
*   就在`header`调用之前，您可以检查是否错误地发送了标头：

    `if ( headers_sent() ) die("**Error: headers sent");`

*   如果您无法阻止某些函数调用向浏览器发送不需要的字符串，您可以在脚本的最开始使用“擦除”所有字符串：

    `ob_start();`

    然后，就在第一次`headers`通话之前，使用：

    `ob_clean();`

    请注意，这样做会阻止您收到错误反馈。

*   最后，如前所述，如果在脚本上的某个点之后不需要执行任何操作，请调用`exit`or `die`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-11T16:58:11.260

好吧，我遇到了这个问题，我的解决方案是将标头 Content-type 更改为：

```
header('Content-Type: application/openxmlformats-officedocument.spreadsheetml.sheet'); 
```

我以前有：

```
header('Content-Type: application/vnd.ms-excel'); 
```

我将格式更改为 Excel2007，我将 Excel5 用于 excel 2003 xls 格式。

我尝试了此页面和所有其他页面中的所有解决方案，但没有运气。所以基本上，我只是改变了我的excel的输出格式，就解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-15T17:35:59.513

此错误也可以通过提供没有 Content-Length 标头的文件来触发。

[查看 php.net 中给出的示例](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-30T13:18:31.487

给活动工作表一个标题：

```
$sheet->setTitle('Some title string here'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T08:53:15.313

我把只是退出；后

> *PHPExcel_IOFactory::createWriter($phpExcelObject, 'Excel2007')->save("php://output");*

它对我有用:)

```
 $file_name .= "_".\Carbon\Carbon::now()->format('d_m_Y_H_i').'.xlsx';

    // Prepare To Download
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename='.$file_name);
    header('Cache-Control: max-age=0');
    header('Pragma: public');
    PHPExcel_IOFactory::createWriter($phpExcelObject, 'Excel2007')->save("php://output");
    exit; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-22T14:45:43.900

这可能对尝试使用laravel中的[https://github.com/Maatwebsite/Laravel-Excel](https://github.com/Maatwebsite/Laravel-Excel)`get`包和 ajax 路由下载 excel 的人有所帮助

我得到了类似`PK ¾@G’D²X ð [Content_Types].xml­”MNÃ0…÷œ"ò%nY „švAa •(0ö¤±êØ–gúw{&i‰@ÕnbEö{ßøyìÑdÛ¸l mð¥‘×ÁX¿(ÅÛü)¿’òF¹à¡;@1_æ»˜±Øc)j¢x/%ê…Eˆày¦ ©QÄ¿i!£ÒKµ y3ÜJ<§œZ1½0?YÙL%zV cäÖIb7Ø‡û‰ìa/lÙ¥P1:«qáríÍjªÊj0A¯–Íuë""íàÙ(Œ ”Á€WìMä)Tjå`和更多内容的回应

我尝试了许多解决方案但失败了

最后我通过在 onclick 事件中这样做来实现

```
$(document).on('click','#elementId',function(e){
  e.preventDefault();
  window.location.assign('your action url'+'?param='+ param_data);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-28T03:31:56.907

我的 php : `7.4.1`os: `Ubuntu 18.04`frameword:`Yii2.0.37`
我也有这个问题，我的解决方案是
我使用`exit`和`ob_clean()`

$objPHPExcel = 新的 \PHPExcel();

```
 $objPHPExcel->getProperties()->setCreator("Murodjon Abduvohidov")
        ->setLastModifiedBy("Murodjon Abduvohidov");
    $objPHPExcel->getActiveSheet()->getPageSetup()-> setOrientation(\PHPExcel_Worksheet_PageSetup::ORIENTATION_LANDSCAPE)
        ->setPaperSize(\PHPExcel_Worksheet_PageSetup::PAPERSIZE_A4);
    $objPHPExcel->getActiveSheet()->getSheetView()->setZoomScale(70);
    $objPHPExcel->getActiveSheet()->getSheetView()->setZoomScaleNormal(82);
    $objPHPExcel->getActiveSheet()->getSheetView()->setView(\PHPExcel_Worksheet_SheetView::SHEETVIEW_PAGE_BREAK_PREVIEW);
    $objPHPExcel->getActiveSheet()->getPageSetup()->setScale(63);
    $objPHPExcel->getActiveSheet()->getPageMargins()->setTop(0.4);
    $objPHPExcel->getActiveSheet()->getPageMargins()->setRight(0.4);
    $objPHPExcel->getActiveSheet()->getPageMargins()->setLeft(0.4);
    $objPHPExcel->getActiveSheet()->getPageMargins()->setBottom(0.4);
    $objPHPExcel->getDefaultStyle()->getFont()->setName('Arial');
    $objPHPExcel->getDefaultStyle()->getFont()->setSize(10); $objPHPExcel->getActiveSheet()->getCell('A2')->setValue('salom');
    $objWriter = \PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');ob_clean();
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename="abdulqodir.xlsx"');
    header('Cache-Control: max-age=0');
    header('Cache-Control: max-age=1');
    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // Date in the past
    header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT');        header('Cache-Control: cache, must-revalidate'); // HTTP/1.1
    header('Pragma: public'); // HTTP/1.0
    $objWriter->save("php://output");exit;` 
```

# android - 如果 ACTION_UP 则取消动画

> ID：10806618
> 
> 赞同：0
> 
> 时间：2012-05-29T20:58:55.830
> 
> 标签：android, android-animation, ontouchlistener

我的 gridView 上有 onTouchListener，如果按下 ACTION_DOWN，动画（缩放）就会开始。如何做以下事情：

1.  如果按下 ACTION_DOWN，如何保持缩放图像
2.  如果是 ACTION_DOWN 动画开始但如果 ACTION_UP（如果动画未完成）动画立即消失（回到动画开始之前的时间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:08:41.567

为了让动画完成后的最终状态保持不变，您需要调用`Animation.setFillAfter(true)`

您可以随时重置正在运行的动画，`Animation.cancel()`并将`Animation.reset()`视图转换恢复到其初始状态。

高温高压

# php - 使用 foreach 循环创建 key=>value 对

> ID：10806620
> 
> 赞同：0
> 
> 时间：2012-05-29T20:59:18.700
> 
> 标签：php, arrays, command-line, foreach, iteration

这是我的问题：我在命令行中有一个程序可以访问数以万计的用户。这个想法是，您希望能够通过简单地输入用户名来获取有关用户的所有信息。所以，因为我想在php中工作，所以我做了以下

```
$user_info = array();
exec('uwdir -v userid=nvidovic', $user_info); 
```

为了给你一个关于 $user_info 上的 var_dump 的简化版本，它会是这样的：

```
array(2){
  [0] => "first: N"
  [1] => "last: Vidovic"
} 
```

我希望能够做到这一点 $user[first] => N

这就是我想出的（不是来自命令行的真实数据）：

```
$full_name = array("first: N", "last: Vidovic");
var_dump($full_name);
foreach ($full_name as $part_name) {
    $exploded = explode(":", $part_name);
    $make_array = array($exploded[0] => $exploded[1]);
    echo $make_array["first"]; 
} 
```

显然，这是行不通的。但我的问题是*为什么*？有谁知道我该怎么做我上面解释的？我真的，真的，真的......真的提前感谢任何人！

编辑：很好的答案，谢谢。最后一件事，我不断收到错误消息 Notice: Undefined offset: 1 和 Notice: Undefined offset: 0 以下代码：

```
$user_info = array();
exec('uwdir -v userid=nvidovic', $user_info); 
foreach ($user_info as $info) {
    $exploded_info = explode(":", $info);
    $info_array[$exploded_info[0]] = $exploded_info[1];
}
echo $info_array["displayName"]; 
```

有谁知道为什么会这样？我认为explode函数会将单个字符串分解为两个字符串的数组，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:03:16.513

代替

```
$make_array = array($exploded[0] => $exploded[1]); 
```

尝试

```
$make_array[$exploded[0]] = $exploded[1]; 
```

确保你放在`$make_array = array();`这一行之前，只是为了确保它是一个空数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:05:38.683

```
$full_name = array("first: N", "last: Vidovic");
//var_dump($full_name);
foreach ($full_name as $part_name) {
    $exploded = explode(":", $part_name);
    $make_array[$exploded[0]] =  $exploded[1];
   // echo $make_array["first"]; 
}
print_r($make_array); 
```

[http://codepad.org/JvcPdBeq](http://codepad.org/JvcPdBeq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:16:44.983

因为线

> $make_array = array($exploded[0] => $exploded[1]);

覆盖整个数组的内容。因此，在最后一步中，您将只有一个元素。

# jquery - Uncaught SyntaxError: Unexpected token < error received asp.net web service

> ID：10806624
> 
> 赞同：1
> 
> 时间：2012-05-29T20:59:34.570
> 
> 标签：jquery, ajax

我正在发出 getJSON 请求并收到错误 Uncaught SyntaxError: Unexpected token <. 我不确定要查找什么，我发送了正确的数据，并且在我的回复中看到了 xml。

```
 $.getJSON('https://www.domain.com/MainService.asmx/LoginMobile?jsoncallback=?', parameter, function (data, textStatus) {
                showDialogMessage('Login error', textStatus);
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:05:07.777

要么您没有正确使用 Web 服务，要么 Web 服务不支持 JSONP。查看所述网络服务的文档。

# java - 引起：java.lang.NullPointerException

> ID：10806630
> 
> 赞同：0
> 
> 时间：2012-05-29T21:00:00.990
> 
> 标签：java, android, nullpointerexception

我收到以下错误日志：

```
05-29 20:57:29.886: D/AndroidRuntime(359): Shutting down VM
05-29 20:57:29.896: W/dalvikvm(359): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-29 20:57:29.896: E/AndroidRuntime(359): Uncaught handler: thread main exiting due to uncaught exception
05-29 20:57:29.906: E/AndroidRuntime(359): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dd.qsg/com.dd.qsg.QSGActivity}: java.lang.NullPointerException
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.os.Looper.loop(Looper.java:123)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-29 20:57:29.906: E/AndroidRuntime(359):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 20:57:29.906: E/AndroidRuntime(359):  at java.lang.reflect.Method.invoke(Method.java:521)
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-29 20:57:29.906: E/AndroidRuntime(359):  at dalvik.system.NativeStart.main(Native Method)
05-29 20:57:29.906: E/AndroidRuntime(359): Caused by: java.lang.NullPointerException
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.dd.qsg.DatabaseHandler.getLongestSmoke(DatabaseHandler.java:85)
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.dd.qsg.QSGActivity.onCreate(QSGActivity.java:40)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-29 20:57:29.906: E/AndroidRuntime(359):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-29 20:57:29.906: E/AndroidRuntime(359):  ... 11 more
05-29 20:57:29.926: I/dalvikvm(359): threadid=7: reacting to signal 3
05-29 20:57:29.926: E/dalvikvm(359): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
05-29 20:57:31.206: I/Process(359): Sending signal. PID: 359 SIG: 9 
```

我不知道如何解决这个问题。它在哪里告诉我我需要修复一些东西？

这是 DatabaseHandler.java 的第 85 行：

```
theCount = context.getResources().getString(R.string.na); 
```

继承人的整个功能：

```
public String getLongestSmoke(Context context) {
    String theCount = "";  
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT millis FROM records ORDER BY CAST(millis as SIGNED) DESC", null);

    if (cursor.getCount() > 0) {
        cursor.moveToFirst();    
        theCount = cursor.getString(0);
    }
    else {
        theCount = context.getResources().getString(R.string.na);
    }

    cursor.close();        
    return humanTime(theCount);
} 
```

这是使用此函数的主要活动的 onCreate 方法中的行：

```
 longestGone.setText(getString(R.string.longest_gone) + " " +  db.getLongestSmoke(null)); 
```

之前它为空时工作正常，现在突然停止了。我该怎么做？

在我对 DatabaseHandler 类的 onCreate 进行以下更改之前，这一切正常：

```
 String CREATE_ACHIEVEMENTS_TABLE = "CREATE TABLE achievements ("
             + "id INTEGER PRIMARY KEY,"
             + "name VARCHAR,"
             + "type VARCHAR,"
             + "value VARCHAR,"
             + "completed VARCHAR"
             + ")";              

    db.execSQL(CREATE_ACHIEVEMENTS_TABLE);      

    db.execSQL("insert into achievements (name, type, value, completed) values ('30 minutes', 'time', '1800000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('1 hour', 'time', '3600000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('2 hours', 'time', '7200000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('6 hours', 'time', '21600000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('12 hours', 'time', '43200000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('1 day', 'time', '86400000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('2 days', 'time', '172800000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('1 week', 'time', '604800000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('2 weeks', 'time', '1209600000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('1 month', 'time', '2592000000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('2 months', 'time', '5184000000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('6 months', 'time', '15552000000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('1 year', 'time', '31536000000', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('Set a record', 'milestone', '', 'no')");
    db.execSQL("insert into achievements (name, type, value, completed) values ('Beat top record', 'milestone', '', 'no')"); 
```

我还将它添加到 onUpgrade 中：

```
 db.execSQL("DROP TABLE IF EXISTS achievements"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:02:03.193

这里：

```
05-29 20:57:29.906: E/AndroidRuntime(359): Caused by: java.lang.NullPointerException
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.dd.qsg.DatabaseHandler.getLongestSmoke(DatabaseHandler.java:85) 
```

我告诉您，在 DatabaseHelper.java 文件的第 85 行，您有一个无法访问的空值。

编辑：

根据您编辑的帖子，这是一行：

`theCount = context.getResources().getString(R.string.na);`

`context`为空并导致 NPE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T21:02:10.217

```
05-29 20:57:29.906: E/AndroidRuntime(359): Caused by: java.lang.NullPointerException
05-29 20:57:29.906: E/AndroidRuntime(359):  at com.dd.qsg.DatabaseHandler.getLongestSmoke(DatabaseHandler.java:85) 
```

有你的线索。DatabaseHandler.java 第 85 行的某些内容试图取消对空引用的引用。

根据您的编辑，我猜那`context`是空的。

根据您的**第二次**编辑：

```
db.getLongestSmoke(null) 
```

您`null`作为`context`参数传入。传入一个有效的`Context`代替。尝试：

```
db.getLongestSmoke(this) 
```

此调用来自哪里`this`的 Activity 。`onCreate`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-29T21:02:46.903

看起来 DatabaseHandler 为空

# c# - 使用 C# 同步数据库的最快方法是什么？

> ID：10806638
> 
> 赞同：0
> 
> 时间：2012-05-29T21:00:35.303
> 
> 标签：c#, sql, sql-server, datatable, synchronization

我有一个问题，很明显，因为我在这里......

我有一个源数据库（SQL Server 2008）和一个目标数据库（也是 SQL Server 2008）。需要进行一些修改，这意味着很多数据必须通过 C#（转换坐标、三角测量等）。但是你会怎么做呢？

我在这里寻找一些东西。现在我正在使用 a`SqlDataReader`并将数据拉入 a`DataTable`并使用这样的数据以便在我将其推送到目标数据库之前对其进行操作，但有什么更好（更快、内存效率更高）的方法呢？ ?

此外，对于不需要操作的数据，我仍然以同样的方式将其拉过，我认为有一种方法可以避免更快的方法？

技术信息：

*   DB：2 x SQL Server 2008（源/目标） - 在同一台服务器上
*   语言：C#/.NET 3.5
*   操作系统：Windows

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:09:02.953

我会将源数据插入到目标数据库的临时表中。

然后我会使用 SQL Merge 来更新目的地。

[合并 (Transact-SQL)](http://technet.microsoft.com/en-us/library/bb510625.aspx)

我会完全最小化 c# 所扮演的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:25:58.617

您应该将[集成服务](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/enterprise-information-management/integration.aspx)用于 ETL 任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:12:25.340

[您可以使用SQL CLR](https://en.wikipedia.org/wiki/SQL_CLR)将 .NET 代码嵌入到 sql server中，以消除数据库和机器之间的往返时间。

# c++ - getifaddrs 是否给了我重复的网络接口地址？

> ID：10806639
> 
> 赞同：3
> 
> 时间：2012-05-29T21:00:45.427
> 
> 标签：c++, network-programming

我正在使用以下小片段寻找特定的网络地址：

```
 char name[INET_ADDRSTRLEN];
  struct ifaddrs *iflist;
  if (getifaddrs(&iflist) < 0)
    perror("getifaddrs");

  struct in_addr addr;
  for (struct ifaddrs *p = iflist; p; p = p->ifa_next)
    {
      if (strcmp(p->ifa_name, "lo") == 0)
        {
          addr = reinterpret_cast<struct sockaddr_in*>(p->ifa_addr)->sin_addr;
          if (inet_ntop(AF_INET, &addr, name, sizeof(name)) == NULL)
            {
              perror("inet_ntop");
              continue;
            }

          cout << name << " ---> " << if_nametoindex("lo") << " : " << addr.s_addr << endl;
        }
    } 
```

我得到的输出是：

```
1.0.0.0 ---> 1 : 1
127.0.0.1 ---> 1 : 16777343 
```

我不明白第一个结果..这不会发生在像 eth# 这样的东西上，但它会发生在另一个名为 bond0 的接口上。这是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T21:52:29.343

`getifaddr`是非标准的。我想你是在 linux 系统上使用它。那里的手册页有注释：

> Linux 上返回的地址通常是分配给接口的 IPv4 和 IPv6 地址，但每个接口也有一个 AF_PACKET 地址，其中包含有关接口及其物理层的低级详细信息。在这种情况下，ifa_data 字段可能包含指向结构 net_device_stats 的指针，定义在 中，其中包含各种接口属性和统计信息。

您可能应该检查`ifa_addr->sa_family`这是否有您所期望的家庭。

# php - 如何在使用 PHP SDK 以编程方式创建活动时显示场地地图？

> ID：10806640
> 
> 赞同：3
> 
> 时间：2012-05-29T21:00:45.967
> 
> 标签：php, facebook, facebook-graph-api

当我使用图形 api 创建事件时，我需要指定场地，并且我还想显示地图。

我愿意

```
$fb_event['name'] = "THis is to test latitude";
$fb_event['description'] = "And longitude!!!!";
$fb_event['start_time'] = date( "c", Ai1ec_Facebook_Event::get_facebook_start_time($event->start));
$fb_event['location'] = "Where you want";
$fb_event['street'] = "Via andrea del sarto 9";
$fb_event['city'] = "Milan";
$fb_event['latitude'] = 45.444975793404;
$fb_event['longitude'] = 9.2119209654715;

$facebook = $this->facebook_instance_factory();
try {
    $result = $facebook->api( "/me/events", "POST", $fb_event );
} catch (FacebookApiException $e) {
    fb($e);
} 
```

这会产生显示正确街道和城市但没有地图的[事件。](https://www.facebook.com/events/239298922846828/)如果我编辑事件并保存，地图“神奇地”会正确使用街道和城市出现。

在任何情况下，纬度和经度都会被忽略。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:21:57.077

如果您在 Graph API 资源管理器中比较您的两个测试事件，您会看到事件 ID [239298922846828](https://developers.facebook.com/tools/explorer?method=GET&path=239298922846828)没有填充其纬度和经度，而[245655182207213](https://developers.facebook.com/tools/explorer?method=GET&path=245655182207213)有。我假设 245655182207213 是您编辑的事件。

查看您的代码，您似乎正在按照文档中的说明进行所有操作。但是，我发现所描述的内容并不总是有效。

我所看到的是，在已知地点发生的从 Facebook 内部填充的事件不再允许您指定地址。相反，他们保存的只是 Facebook 中的场地 ID，然后您可以深入了解该 ID 以获取地址等。

看看[我的一个事件](https://developers.facebook.com/tools/explorer?method=GET&path=128748077259225)。对于此活动，无法在 Facebook 内编辑此位置的详细信息，也不会通过 API 调用返回活动场地详细信息。我正在使用 API 将事件详细信息拉到外部网站。这种变化让我沮丧了好几天。

我在四月下旬开始看到这种行为。我还没有找到任何宣布此更改的官方文档。

当出现一些文档时，我预计新的活动场地工作流程将类似于：

*   查询您的活动将发生的区域，以查看场地是否已经存在。
    *   如果是，请保存其 ID。
    *   如果没有，请为您的场地创建一个新的社区页面并保存其 ID。
*   使用此 ID 填充活动场地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T12:31:35.673

使用相同参数创建时的两种不同格式。

通过 gql 创建事件时

```
{
  "id": "xxxxxxxxxxxxxx", 
  "owner": {
    "name": "xxxxxxxxxx", 
    "id": "xxxxxxxxx"
  }, 
  "name": "W1112", 
  "start_time": "2013-10-22", 
  "is_date_only": true, 
  "location": "Tulsa, OK, United States", 
  "venue": {
    "latitude": 36.131388888889, 
    "longitude": -95.937222222222, 
    "street": "", 
    "zip": "", 
    "id": "109436565740998"
  }, 
  "privacy": "SECRET", 
  "updated_time": "2013-09-19T12:23:26+0000"
}

When create event through fb
{
  "id": "xxxxxxxxxxxxxx", 
  "owner": {
    "name": "xxxxxx", 
    "id": "xxxxxxxx"
  }, 
  "name": "1234", 
  "start_time": "2013-10-09T21:26:00+1100", 
  "end_time": "2013-10-25T00:26:00+1100", 
  "timezone": "Australia/Sydney", 
  "is_date_only": false, 
  "location": "Maroubra Junction", 
  "venue": {
    "latitude": -33.940804216453, 
    "longitude": 151.23876752992, 
    "city": "Maroubra", 
    "state": "NSW", 
    "country": "Australia", 
    "id": "153993547968514", 
    "street": "832 anzac Parade ", 
    "zip": "2035"
  }, 
  "privacy": "SECRET", 
  "updated_time": "2013-09-19T10:50:14+0000"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:23:46.227

最后，这是一个已知的 facebook 错误

[https://developers.facebook.com/bugs/173095916131752](https://developers.facebook.com/bugs/173095916131752)

# ios - 单独线程上基于网络的 NSStream 的好例子？

> ID：10806644
> 
> 赞同：1
> 
> 时间：2012-05-29T21:01:19.763
> 
> 标签：ios, macos, nsthread, nsrunloop, nsstream

有谁知道在单独的线程上创建（基于网络的）NSStreams 的简单示例？

我实际上想要做的是取消调度（从主线程）并重新调度（到帮助程序/网络线程）我从第三方框架接收的打开的 NSInputStream 和 NSOutputStream（请参阅[Can an open, but inactive, NSStream that是否将主线程上的调度移动到不同的线程？](https://stackoverflow.com/questions/10739966/can-an-open-but-inactive-nsstream-that-is-scheduled-on-the-main-thread-be-move/10742180#comment13962600_10742180)）。到目前为止，没有人回答这个问题，所以我正在尝试自己做这个，看看它是否可以工作。

为了测试什么是可能的，我正在尝试修改这里的代码（其中包括一个 iOS 客户端和一个非常短的基于 python 的服务器 [太棒了！]）： [http ://www.raywenderlich.com/3932/how-to -create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

因此，在创建并打开 NSInputStream 和 NSOutputStream 后，我尝试将其移动到辅助线程上。

我遇到的挑战是帮助线程似乎没有响应来自流的委托消息或我通过以下方式发送的任何消息：performSelector:onThread:withObject:waitUntilDone:modes:。我怀疑我在设置帮助线程的 NSRunLoop 时做错了（参见下面的 networkThreadMain）。

因此，[ChatClientViewController viewDidLoad] 现在看起来像：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self initNetworkCommunication];
    [self decoupleStreamsFromMainThread];
    [self spoolUpNetworkThread];

    inputNameField.text = @"cesare";
    messages = [[NSMutableArray alloc] init];

    self.tView.delegate = self;
    self.tView.dataSource = self;

} 
```

使用这些实现：

```
- (void) initNetworkCommunication {

    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", 80, &readStream, &writeStream);

    inputStream = (NSInputStream *)readStream;
    outputStream = (NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open];    
}

- (void) decoupleStreamsFromMainThread
{
    inputStream.delegate = nil;
    outputStream.delegate = nil;

    [inputStream removeFromRunLoop: [NSRunLoop currentRunLoop] forMode: NSDefaultRunLoopMode];
    [outputStream removeFromRunLoop: [NSRunLoop currentRunLoop] forMode: NSDefaultRunLoopMode];
}

- (void) spoolUpNetworkThread
{   
    [NSThread detachNewThreadSelector: @selector(networkThreadMain) toTarget: self withObject: nil];
}

- (void) networkThreadMain
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; // Top-level pool

    static dispatch_once_t once;
    dispatch_once(&once, ^{
        [self rescheduleThreads];
        ((ChatClientAppDelegate * )[[UIApplication sharedApplication] delegate]).networkThread = [NSThread currentThread];

        [inputStream setDelegate:self];
        [outputStream setDelegate:self];

        NSLog(@"inputStream status is: %@", [NSInputStream streamStatusCodeDescription: [inputStream streamStatus]]);
        NSLog(@"outputStream status is: %@", [NSOutputStream streamStatusCodeDescription: [outputStream streamStatus]]);

        [[NSRunLoop currentRunLoop] runUntilDate: [NSDate distantFuture]];
    });

    [pool release];  // Release the objects in the pool.
}

- (void) rescheduleThreads
{
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

关于什么可能是错的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:34:31.753

与以下问题中的代码类似的东西效果很好（我的应用程序中有类似的代码）：

[如何在另一个线程上正确打开和关闭 NSStream](https://stackoverflow.com/questions/10980874/how-to-properly-open-and-close-a-nsstream-on-another-thread?rq=1)

# wpf - 使用 XAML 将 ItemsControl 绑定到派生类型

> ID：10806646
> 
> 赞同：1
> 
> 时间：2012-05-29T21:01:24.330
> 
> 标签：wpf, xaml, binding, frameworks, entity

是否可以仅使用 XAML 将 ItemsControl 绑定到派生类型（来自抽象基）？

我有一个名为“RouteStop”的类。在“RouteStop”中，有一个“Payment”类的集合。

Payment 是一个具有派生类 ExpectedPayment 和 ActualPayment 的抽象类。

我有一个绑定到“RouteStops”的 ItemsControl。对于每一行，都有零对多的“ExpectedPayment”和零对多的“ActualPayment”记录。我想在每个 RouteStop 的并排 ItemsControls 中显示两个派生类。

我知道您可以使用 Linq 来检索派生类型。如...

```
context.Payments.OfType<ExpectedPayment>() 
```

但我不希望逐行使用代码设置它。有没有办法使用 XAML 以声明方式执行此操作？我是否必须修改 SSDL 才能创建访问派生类型的方法？

如果这是不可能的，最佳实践是什么？

提前感谢您为此花费的任何时间。

# c++ - 在 C++ 中使用 lua 对象

> ID：10806647
> 
> 赞同：0
> 
> 时间：2012-05-29T21:01:30.270
> 
> 标签：c++, oop, lua

我想做这样的事情：
1\. 在 Lua 中创建对象
2\. 将这个对象传递给 C++
3\. 对这个对象执行一些方法，从 C++ 传递它

* * *

现在我在 Lua 中有这个：

```
Account = {balance = 0}

function Account.Create(name)
    local a = Account:new(nil, name);
    return a;
end

function Account:new (o, name)
  o = o or {name=name}
  setmetatable(o, self)
  self.__index = self
  return o
end

function Account:Info ()
  return self.name;
end 
```

C++ 中的代码

```
//get Lua object

lua_getglobal (L, "Account");
lua_pushstring(L, "Create");
lua_gettable(L, -2);
lua_pushstring(L, "SomeName");
lua_pcall(L, 1, 1, 0);
const void* pointer = lua_topointer(L, -1);
lua_pop(L, 3);

//then I want to perform some method on object

lua_getglobal (L, "Account");
lua_pushstring(L, "Info");
lua_gettable(L, -2);
lua_pushlightuserdata(L,(void*) pointer );
lua_pcall(L, 0, 1, 0);
//NOW I GET "attempt to index local 'self' (a userdata value)'
const char* str = lua_tostring(L, -1);
...etc... 
```

你是不是我做错了什么？我怎样才能得到这个 Lua 对象到 C++ ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:11:41.657

```
const void* pointer = lua_topointer(L, -1); 
```

Lua 表不是 C 对象。他们不是`void*`s。[`lua_topointer`文档](http://www.lua.org/manual/5.1/manual.html#lua_topointer)说该功能主要用于调试目的。你没有调试任何东西。

Lua 表只能通过 Lua API 访问。您不能只获得指向 Lua 表或其他东西的指针。相反，您需要做的是将 Lua 表存储在一个位置，然后在您想要访问它时从该位置检索它。存储此类数据的典型位置是 Lua 注册表。Lua 代码无法访问它；只有 C-API 可以与之对话。

通常，您会在注册表中存储一些表，其中包含您当前持有的所有 Lua 值。这样，您对注册表的使用不会影响其他人对它的使用。

# sql-server - 如何从两个可能的数据库源更新列

> ID：10806655
> 
> 赞同：0
> 
> 时间：2012-05-29T21:02:06.547
> 
> 标签：sql-server, sql-server-2008

我有以下情况：

```
Database A.table A.name
Database A.table A.Application

Database B.table B.name
Database B.table B.Application

Database C.table C.name
Database C.table C.Application 
```

我正在尝试编写一个 UPDATE 查询，它将为表 A.Application 设置一个值。我需要更新它的值可能来自表 B 或 C，但不能同时来自两者；A.name 仅存在于 B 或 C 中。我需要更新的每一行的条件如下：

```
If B.name exists for A.name, set A.Application = B.application
If C.Name exists for A.name, set A.application = C.application 
```

我正在尝试以非动态方式执行此操作；任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:10:57.467

您可以在两个语句中做到这一点：

```
UPDATE A 
SET A.Application = B.Application
FROM A
INNER JOIN B ON A.name = B.name;

UPDATE A 
SET A.Application = C.Application
FROM A
INNER JOIN C ON A.name = C.name; 
```

假设 B 和 C 中的名称是真正正交的，其中只有一个实际上会对数据做任何事情。否则，C 获胜。

或者你可以得到幻想（没有实际尝试过）：

```
UPDATE A 
SET A.Application = ISNULL(B.Application, C.Application)
FROM A
LEFT JOIN B ON A.name = B.name
LEFT JOIN C ON A.name = C.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:20:59.927

```
declare @A table([name] varchar(1),[Application] int)
insert @A
select 'a',0 union all
select 'b',0 union all
select 'c',0
declare @B table([name] varchar(1),[Application] int)
insert @B
select 'a',5 union all
select 'b',6
declare @C table([name] varchar(1),[Application] int)
insert @C
select 'c',8

update @A set [Application]=b.[Application]
from @A a left join
(
select [name],[Application] from @B
union all
select [name],[Application] from @C
) b on a.name=b.name

select * from @A
/*
name Application
---- -----------
a    5
b    6
c    8
*/ 
```

# mongodb - Mongodb - 我如何按日期范围查询？

> ID：10806665
> 
> 赞同：1
> 
> 时间：2012-05-29T21:02:43.800
> 
> 标签：mongodb, mongoid

我是 Mongo 的新手。

我正在尝试查询日期范围。用户模型有这个字段：

```
 field     :confirmed_at,          :type => Time 
```

有人可以帮我写一个查询来获取在一段时间内确认其帐户的用户吗？

这是错误和我正在尝试的查询：

```
> db.users.where(:confirmed_at.gte => Time.now, :confirmed_at.lte => 10.minutes.ago)
Tue May 29 17:45:37 SyntaxError: syntax error (shell):1
Model.where(:confirmed_at.gte => Time.now, :confirmed_at.lte => 10.minutes.ago)
Tue May 29 17:56:15 SyntaxError: syntax error (shell):1 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T21:26:16.473

我将假设您按照声明字段的方式使用 mongoid。

你会想要使用这样的东西：

```
Model.where(
  :confirmed_at.gte => Time.now,
  :confirmed_at.lte => 10.minutes.ago
) 
```

# django - django nonrel 和管理员

> ID：10806668
> 
> 赞同：0
> 
> 时间：2012-05-29T21:02:53.240
> 
> 标签：django, google-app-engine, django-nonrel

我希望在应用引擎上使用 django non-rel 来进行即将进行的项目，并且想知道。

我可以使用 django 管理员在 django non-rel 中创建新闻文章还是需要编写自己的管理员代码？

还是标准的 django 管理员可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:02:53.740

我正在使用 django-nonrel，但不是管理员。

我不确定答案，但我很确定这是可能的，因为其他人已经做到了。

只要您不使用任何多对多关系，Django-nonrel 就可以正常工作。如果使用多对多关系，我真的不知道 dbindexer 的效果如何。如果您使用权限，管理员可能会使用多对多关系。因此，根据您使用的 contrib 组件，您可能会遇到问题。

# python - python - 这是一个有效的循环吗？

> ID：10806669
> 
> 赞同：2
> 
> 时间：2012-05-29T21:02:54.810
> 
> 标签：python, loops, for-loop

我想访问对象，即array[i]，以及interator count，i。

这就是我正在尝试的：

```
 for i, pinName in allPorts[startIndex:endIndex]:
     #do stuff 
```

我得到了进一步的错误，只是想知道它是否是代码的这一部分。

这里是 python 的新手。干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T21:05:15.933

我猜你宁愿寻找：

```
for i, pinName in enumerate(allPorts[startIndex:endIndex]):
    ... 
```

`enumerate()`内置函数接受任何列表（元组，可迭代，...）并产生（索引，项目）的元组，索引从 0 开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T21:07:33.067

考虑[enumerate()](http://docs.python.org/library/functions.html#enumerate)，它返回一个带有索引值和元素的元组：

```
startIndex = 2
endIndex = 4

for i, pinName in enumerate(allPorts[startIndex:endIndex], startIndex):
    print('index = {}  element = {}'.format(i, pinName)) 
```

产量：

```
index = 2  element = 66
index = 3  element = 99 
```

请注意指定为第二个参数的***起始索引值***`enumerate()`，否则它将始终以 index 开头`0`（忽略您的`startIndex`，除非您总是想以 开头`0`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:09:13.983

我怀疑这是你的想法：

```
for i, pinName in enumerate(allPorts[startIndex:endIndex]):
    #do stuff 
```

但是，我认为这不会达到您的预期。 `allPorts[startIndex:endIndex]`将“切片”列表并创建一个新列表，因此`allPorts[i]`如果`startIndex != 0`

如果您*需要* `i`成为 original 中的索引`allPorts`，那么我认为这是您必须要做的：

 ~~~~```
i = startIndex
while i < endIndex:
   pinName = allPorts[i]
   #do stuff
   i += 1 
```~~  ~~正如评论中所建议的，这是一种更好的方法：

```
for i in xrange(startIndex, endIndex):
   pinName = allPorts[i]
   #do stuff 
```~~~~

# actionscript-3 - 在 actionscript 和 Flex 中管理大型应用程序的 EventListener 的最佳方式

> ID：10806670
> 
> 赞同：4
> 
> 时间：2012-05-29T21:02:55.513
> 
> 标签：actionscript-3, apache-flex, garbage-collection, addeventlistener, event-listener

我在 flex 4.5 中有一个大型移动应用程序，使用“大”我的意思是大..

1.  超过 50 次观看
2.  50 多个自定义组件
3.  10+ 自定义事件
4.  50 多个自定义类（不是 UIComponents）
5.  很多皮肤等等...

我从未删除过 EventListener，现在我正在查看 flash 分析器，我有很多内存泄漏。
我实际上认为使用`navigator.pushView`or`navigator.popView()`或`navigator.popToFirstView()`将删除视图本身中所有对象/变量的任何引用并被垃圾集..

我正在尝试修复我的代码，但我在理解如何与事件侦听器一起工作时遇到了很多问题......

我认为如果我使用一些示例而不是描述所有可能的情况会更容易......

**示例 1：**

```
private function XXX():void
{
  var x:ClassA = new ClassA();
  x.addEventListener(CustomEvent.GETA, doSomething);
  x.addEventListener(CustomEvent2.TESTB, doSomethingElse);
}
private function doSomething(e:CustomEvent):void{}
private function doSomethingElse(e:CustomEvent2):void{} 
```

一个事件监听器被触发后，我是否需要同时删除这两个事件监听器？
如果是，我是否需要同时删除 doSomething 和 doSomethingElse 中的两个事件侦听器？

在 addeventlistener 中使用弱引用会更好吗？
`x.addEventListener(CustomEvent.GETA, doSomething, false, 0, true);`

**示例 2：**

`tile`是一个 TileGroup，但它可能是一切......

```
protected function activate(event:ViewNavigatorEvent):void
{               
tile.removeAllElements();
for (var i:int = 1 ; i < functionCount.length ; i++)
{           
var t:ImageButton = new ImageButton();
t.label = "";
switch (functionCount.getItemAt(i))
{
    case "Val1":
        t.addEventListener(MouseEvent.CLICK,function():void{goToAgenda();});
    break;
    case "Val2":
        t.addEventListener(MouseEvent.CLICK,function():void{goToAdmin();});                                 
    break;
    case "Val3":
        t.addEventListener(MouseEvent.CLICK,function():void{goToMyStore();});                                   
        break;  
    case "Val4":        
        t.addEventListener(MouseEvent.CLICK,function():void{openBI();});
        break;  
}
  tile.addElement(t);
} 
```

`click`调用`ImageButton`一个功能，然后调用如果`navigator.pushView` 我更改视图，我应该从每个按钮中删除每个 EventListener 吗？最好的地方在哪里？

如果我有一个包含 15000 个组件的视图，我是否必须在删除视图时手动删除添加到每个组件的所有事件侦听器？？？

**编辑**

当视图从舞台上删除时，我主要需要删除所有事件侦听器，而不是每次我想到一个替代方案时手动执行它，我创建一个简单的类......

包实用程序 { 导入 mx.collections.ArrayCollection;

```
public class Evt
{
    public static var listaEvt:ArrayCollection = new ArrayCollection();

    private var object:* = null;
    private var event:* = null;
    private var functio:* = null

    public function Evt(obj:*, evt:*, funct:Function)
    {
        this.object = obj;
        this.event = evt;
        this.functio = funct;
    }           

    public static function addEvt(obj:*, evt:*, funct:Function):void
    {
        var t:Evt = new Evt(obj, evt, funct);
        listaEvt.addItem(t);
    }

    public static function clear():void
    {
        var tmpArr:ArrayCollection = new ArrayCollection();
        tmpArr.addAll(listaEvt);
        listaEvt = new ArrayCollection();
        for (var i:int = 0 ; i < tmpArr.length ; i++)
        {
            var t:Evt = tmpArr.getItemAt(i) as Evt;
            if (t.object != null && t.event != null && t.functio != null)
            {
                if (t.object.hasEventListener(t.event))
                    t.object.removeEventListener(t.event, t.functio);
            }
        }
    }
}
} 
```

在我的代码中，我不需要我调用的弱引用（也使用匿名函数）：

```
// t can be any component with a event associated...
var f:Function = function():void{navigator.pushView(FotoGallery,data);};
Evt.addEvt(t, MouseEvent.CLICK, f);
t.addEventListener(MouseEvent.CLICK,f); 
```

那么当我进入一个新的视图时我做一个简单的`Evt.clear();` 这种方法有效吗？有什么改进/改变它的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:14:40.187

最终，大型应用程序可能会受益于[Swiz Framework](http://swizframework.org/)或[Pure MVC](http://puremvc.org/)等框架，它们可以帮助：

*   控制反转/依赖注入
*   事件处理和调解
*   异步远程方法的简单生命周期
*   与您的应用程序代码分离的框架

例如，Swiz 可以使用元数据标签来调解事件，既可以从显示列表中捕获事件，也可以为源自非 UI 源的事件注入调度程序。

```
[Dispatcher]
public var dispatcher:IEventDispatcher;

[EventHandler( event="UserEvent.ADD_USER" )]
public function handleAddUserEvent( event:UserEvent ):void
{
    // do stuff
} 
```

否则，如前所述，事件侦听器中的弱引用是一种选择：

```
addEventListener(Event.COMPLETE, completeHandler, false, 0, true); 
```

需要隔离事件处理的视图可以适应添加和移除阶段的内在生命周期。`addedToStage`在显示对象准备好处理来自显示列表的信号时添加监听器，并`removedFromStage`在显示对象不再需要事件处理时释放监听器。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class MyClass extends Sprite
    {
        public function MyClass()
        {
            super();

            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected function addedToStageHandler(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
            addEventListener(Event.REMOVED_FROM_STAGE, removedFromStageHandler);

            /* add event listeners here */
        }

        protected function removedFromStageHandler(event:Event):void
        {
            removeEventListener(Event.REMOVED_FROM_STAGE, removedFromStageHandler);
            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);

            /* remove event listeners here */
        }

        protected function dispose():void
        {
            /* any remaining cleanup */
        }

    }
} 
```

# git - 如何仅将密码提交给heroku而不提交给github？

> ID：10806671
> 
> 赞同：7
> 
> 时间：2012-05-29T21:02:59.900
> 
> 标签：git, heroku, github

我设计了一个电子邮件程序，并且 SMTP 网关具有位于代码中的身份验证 ID 和密码。现在，我想将它们提交给 heroku，而不是提交给 github。该项目有多个合作者。因此，我可以创建一个新分支并将密钥保留在那里并将其部署到 heroku。这个分支只保留在本地，不会进入 github。但是，如果我遵循这种方法，那么所有协作者都必须为 heroku 维护一个本地分支，并始终遵循以下部署过程：1\. 在 master 上提交更改 2\. 合并 master 和 heroku 分支 3\. 部署 heroku 分支

这似乎容易出错和重复。不优雅。

我想到的另一种方法是使用身份验证值进行提交，推送到 heroku，然后恢复提交。但是，如果我这样做，我认为身份验证值仍然会使其成为 github。即使 github 没有验证值，每次协作者推送任何新功能时都必须这样做。

请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:07:45.590

您应该能够将敏感信息放入 heroku 中的配置变量中，然后引用这些配置/环境变量，而不是直接使用密码等。请参阅Heroku 开发中心的[配置和配置变量。](https://devcenter.heroku.com/articles/config-vars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:12:35.837

将密码从代码中移到 Heroku 配置值中是否可行？

[Git 部署 + 配置文件 + Heroku](https://stackoverflow.com/questions/4857031/git-deployment-configuration-files-heroku)

# .net - 为什么我在 WPF 中的图像不显示？

> ID：10806674
> 
> 赞同：0
> 
> 时间：2012-05-29T21:03:24.563
> 
> 标签：.net, wpf, image

我正在使用 WPF 4.0。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media.Imaging;
using System.IO;

namespace ResourcesLearning
{
    class Program
    {
        [STAThread]
        static void Main()
        {
            Application app = new Application();
            Window win = new Window();
            Image img = new Image();
            String fileName = @"C:\Users\dev\Pictures\1.png";

            //It work fine (I see image)
            BitmapImage bim = new BitmapImage(new Uri(fileName));

            //It not work (I do not see image)
            //BitmapImage bim = new BitmapImage();
            //bim.UriSource = new Uri(fileName);

            //It not work (I do not see image)
            //FileStream fs = new FileStream(fileName, FileMode.Open);
            //BitmapImage bim = new BitmapImage();
            //bim.StreamSource = fs;

            img.Source = bim;
            win.Content = img;
            app.Run(win);
        }
    }
} 
```

为什么我的评论变体没有显示图像？只有第一个变体成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:12:22.947

我相信您需要将这些属性更改与 BeginInit()/EndInit() 调用括起来。

# javascript - 从 xml 文件创建一个下拉列表，没有重复的值。我需要一个数组吗？

> ID：10806677
> 
> 赞同：0
> 
> 时间：2012-05-29T21:03:30.153
> 
> 标签：javascript, xml, arrays, variables, drop-down-menu

我仍在学习 javascript 和 xml，最近遇到了一个我确信很容易解决的问题。如果可能的话，我希望对此有所帮助。

我有一个在这里找到的 xml 文件

[http://mrblesid.com/blueprint/bookinglist.xml](http://mrblesid.com/blueprint/bookinglist.xml)

我目前正在使用此代码创建一个下拉列表，其中包含来自“strArtistName”属性之一的值

```
$(document).ready(function(artists){
$.ajax({
    type: "GET",
    url: "bookinglist.xml",
    dataType: "xml",
    success: function(artists_list) { 
        var select = $('#mySelect');
        $(artists_list).find('vw_ADM_BookingListNull[strArtistName]').each(function(){
            var artists = $(this).attr('strArtistName');
            select.append('<option value="'+artists+'">'+artists+'</option>');
            });
    select.children(":first").text("please make a selection").attr("selected",true);
    }
    });
}); 
```

然后通过以下方式将其调用到下拉列表中

```
<form>
  <select id="mySelect">
  <option>loading</option>
  </select>
</form> 
```

我想避免重复为每个条目找到的艺术家姓名，我是否认为我需要为此使用数组？如果是这样，我该怎么做？

从列表中选择的名称应填充一个变量以在报告的其他地方使用。

任何帮助将不胜感激，因为我的最后期限迫在眉睫。

在此先感谢，米奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:24:30.087

首先，出于性能原因，您应该批处理 DOM 插入（您也可以通过使用数组而不是纯字符串连接来挤出更多性能）这是您的成功函数，其中包含一些性能优化以及重复艺术家的检查：

```
function(artists_list) { 
    var select = $('#mySelect'),
        html = [],
        artistArray = [];

    $(artists_list).find('vw_ADM_BookingListNull[strArtistName]').each(function(){
        var artists = $(this).attr('strArtistName');

        // Check the artistArray for a duplicate.
        // This will only work in more recent browsers.
        if (artistArray.indexOf(artists) === -1) {
            html.push('<option value="'+artists+'">'+artists+'</option>');
            artistArray.push(artists);
        }
    });

    // Join the HTML array and add it to the select element
    select.append(html.join(''))
      .children(":first").text("please make a selection").attr("selected",true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:30:26.597

数组将起作用。将主要部分更新为

```
var artistsArr = [];
$(artists_list).find('vw_ADM_BookingListNull[strArtistName]').each(function(){
    var artists = $(this).attr('strArtistName');
    if ($.inArray(artists, artistsArr) == -1) {
        select.append('<option value="'+artists+'">'+artists+'</option>');
        artistsArr.push(artists);
    }
}); 
```

有些浏览器不支持`Array.indexOf`，所以你可以使用 jQuery 的`inArray`.

# datetime - 在 Oracle 查询的函数调用中进行日期时间数学运算

> ID：10806678
> 
> 赞同：1
> 
> 时间：2012-05-29T21:03:32.130
> 
> 标签：datetime, reporting-services, plsql, oracle10g, oracle-sqldeveloper

好的，我的问题的第一部分得到了回答，所以这是第二部分。:-) 在 PLSQL 查询中，我的条件如下所示：

```
where Doc3.clinicalDate >= ml.convert_date_to_id(:DateBegin)
    and Doc3.clinicalDate < ml.convert_date_to_id(:DateEnd) 
```

现在，我不想使用 :DateEnd 本身——我想添加 1 天，这样当它将日期时间与午夜进行比较时，我会得到*第二天*的午夜。不幸的是，当我这样做时

```
where Doc3.clinicalDate >= ml.convert_date_to_id(:DateBegin)
    and Doc3.clinicalDate < ml.convert_date_to_id(:DateEnd + 1) 
```

我得到“ORA-06553：PLS-306：调用‘CONVERT_DATE_TO_ID’时参数的数量或类型错误”。“:DateEnd + 间隔 '1' 天”给了我“ORA-30081：日期时间/间隔算术的无效数据类型”（其中 :DateEnd 绑定到 2012 年 5 月 31 日）。如果我执行“convert_date_to_id(add_months(:DateEnd, 1))”，它工作正常。有什么想法吗？谢谢。

ETA：我应该澄清这是一个 SSRS 2008 R2 项目，并且`DateBegin`在`DateEnd`报告参数中定义为 DateTime 参数。我当前的解决方法是将`:DateEnd`查询参数设置为等于`@DateEnd`报告参数 + 1，但我担心有一天我会忘记正确记录这一点，并混淆试图维护报告的人（可能是我） . 如前所述，我*不想传递字符串参数。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:46:10.327

假设`ml.convert_date_to_id`将 a`DATE`作为输入参数而不是`VARCHAR2`表示日期的 a ，并假设`:DateEnd`绑定变量是 a `VARCHAR2`，您将需要类似

```
ml.convert_date_to_id( to_date( :DateEnd, 'DD-MON-YYYY' ) + 1 ) 
```

或者

```
ml.convert_date_to_id( to_date( :DateEnd, 'DD-MON-YYYY' ) + interval '1' day ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:44:28.377

我认为 DateTime 的参数是问题的根源。Microsoft DateTime 数据类型比 Oracle 的数据类型更精细，因为它支持小数秒，而 Oracle DATE 格式不支持（但 Oracle TIMESTAMP 支持）。

由于 ADD_MONTHS 只是吐回它在 DATE 数据类型中传递的任何内容（即传递的 TIMESTAMP 变为 DATE）。因此，也许您可​​以转换参数并以这种方式添加日期：

```
where Doc3.clinicalDate >= ml.convert_date_to_id(:DateBegin) 
    and Doc3.clinicalDate < ml.convert_date_to_id(CAST(:DateEnd as DATE)+1) 
```

或者，忘记参数的转换和日期算术，并从第二个临床日期中减去一天：

```
where Doc3.clinicalDate >= ml.convert_date_to_id(:DateBegin) 
    and Doc3.clinicalDate - 1 < ml.convert_date_to_id(:DateEnd) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:16:19.327

用于`to_date`转换值。例如：

```
select &date + 1 from dual 
```

通知`to_date('29052012','ddmmyyyy')`工作正常

通知`'29-may-2012'`给`ORA-01722: invalid number`

# installation - 如何创建单个文件安装程序以将 .ocx 文件放置在 System32 文件夹中并进行注册？

> ID：10806681
> 
> 赞同：1
> 
> 时间：2012-05-29T21:03:41.893
> 
> 标签：installation, ocx, system32

我到处寻找，找不到任何简单的解决方案。它必须是单个文件安装程序。

我用一个简单的 2 行批处理文件创建了它

复制 .\Files\WGMX.ocx C:\Windows\System32\ C:\Windows\System32\regsvr32.exe /s wgmx.ocx

但是将这个简单的 2 行批处理文件翻译成我使用过的任何安装程序助手都是一场令人难以置信的噩梦。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:37:54.980

假设您想要一个普通的 MSI 软件包，这可以通过[免费版本的 Advanced Installer](http://www.advancedinstaller.com/download.html)轻松完成。只需创建一个新的“简单”项目，即免费项目，进入文件和文件夹页面并添加您的 OCX 文件，然后双击它并进入注册选项卡，启用所需设置。

非常重要，如果您想在 x64 机器上的“System32”文件夹中使用相同的文件，您需要创建一个单独的 MSI，安装类型设置为 AMD64，安装参数页面中提供的选项。

# c++ - 我应该继续使用while循环开关还是做问答程序还是应该使用开关？

> ID：10806685
> 
> 赞同：-1
> 
> 时间：2012-05-29T21:04:18.103
> 
> 标签：c++, loops

我正在测试一个问答程序，并且对 c++ 来说相对较新。我正在尝试创建一个问题/答案，到目前为止，使用while循环来检查答案是否为真，如果这是我的代码，问题是如果问题是错误的：

```
 while(input1 == answer1)
{
cout << "Your answer is correct!\n";
answer_correct += 1;
break;
}
while(answer_correct = 0 )
{
cout << "Correct Answer is:\n" << answer1 << "\n";
break;
} 
```

对于 ZETA 原始代码：

```
 if (input3 == answer3)
{
cout << "Your answer is correct!";
answer_correct += 1;
}
else
{
cout << "Correct Answer is:\n" << answer3;
} 
```

此语句下方的所有 if 语句都返回 false 并在输入 == 回答时显示下面的答案现在我需要使用 if 语句使其不显示正确答案。我可能很困惑，有人会教我正确使用循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:10:00.723

`if-else`您不使用语句有什么特别的原因吗？

```
if(input1 == answer1)
{
    cout << "Your answer is correct!\n";
}
else
{
    cout << "Correct Answer is:\n" << answer1 << "\n";
} 
```

### 解释

只有当且仅当为真`if(condition)`时，才会执行跟随的块/语句。只有当且仅当前面的失败时，才会执行后面的 an `condition`。`else``if``if`

也可以看看：

*   [CPP：控制结构](http://www.cplusplus.com/doc/tutorial/control/)

# xpath - 使用 xpath 在 WebDriver 中选择元素

> ID：10806687
> 
> 赞同：0
> 
> 时间：2012-05-29T21:04:24.107
> 
> 标签：xpath, webdriver

如何仅选择父跨度 web 元素而不选择子元素？

列出 summaryLinks = summary.findElements(By.xpath(""));

我的 HTML 代码：

```
<li>
<div class="mod-indent mod-indent-2">
<a href="http://mysite.com">
<img class="activityicon" alt="URL" src="http://mysite.com">
<span class="instancename">LinkText <span class="accesshide "> URL</span></span>
</a>
</div>
</li> 
```

我尝试了以下 xpath 但没有
用。//div[@class='mod-indent mod-indent-2']/a/span[@class='instancename']

.//div[@class='mod-indent mod-indent-2']/a/span[1]

.//div[@class='mod-indent mod-indent-2']/a/span/.

.//div[@class='mod-indent mod-indent-2']/a/span [position() =1]

.//div[@class='mod-indent mod-indent-2']/a/span/span [position() =1]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:20:42.577

多种方式，但只有几种：

```
By.XPath("//div[contains(@class, 'mod-indent-2')]/descendant::span[@class='instancename']");

By.XPath("//span[@class='instancename']");

By.XPath("//span[@class='accesshide ']/..");

By.ClassName("instancename");

By.CssSelector("span.instancename");

By.XPath("//span[text()='Link Text']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T03:38:02.110

网络驱动程序代码：

```
List <WebElement> summaryLinks = 
summary.findElements(By.cssSelector("span.instancename")); 
List <String> links = new ArrayList <String> (); 
for (int i=0; i<summaryLinks.size(); i++){ 
        WebElement element =summaryLinks.get(i); 
         if (element.isDisplayed() && element.isEnabled()){ 
         String str  = element.getText(); 
         links.add(str);}} 
System.out.println(links); 
```

产生以下输出：

```
[Announcements 
Forum, Student Lounge 
Forum, Welcome 
Page, Instructor Bio 
URL, Course Schedule 
Page] 
```

现在，当我返回时，`links.size()`它返回正确数量的元素（即仅包括父跨度）。

我不确定这是否只是打印退货问题。我试过 了`trim()`，`toString()`在将返回添加`getText()`到链接之前，但它的结果是一样的。

# javascript - 奇怪的 IE7 怪癖

> ID：10806690
> 
> 赞同：0
> 
> 时间：2012-05-29T21:04:38.323
> 
> 标签：javascript, jquery

`IE9`在`IE7`模式下我收到以下错误。使用一个小的计数脚本：

> SCRIPT1028：预期的标识符、字符串或数字

***代码***

```
$.fn.countTo.defaults = {
    from: 0,  // the number the element should start at
    to: 100,  // the number the element should end at
    speed: 1000,  // how long it should take to count between the target numbers
    refreshInterval: 100,  // how often the element should be updated
    decimals: 2,  // the number of decimal places to show
    onUpdate: null,  // callback method for every time the element is updated,
    onComplete: null,  // callback method for when the element finishes updating
}; 
```

**第 185 行**是最后一个大括号和分号

我们需要它来工作，`IE7`但这个错误正在破坏脚本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:06:35.250

去掉后面的逗号`onComplete`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T21:06:50.503

```
$.fn.countTo.defaults = {
   from: 0,  // the number the element should start at
   to: 100,  // the number the element should end at
   speed: 1000,  // how long it should take to count between the target numbers
   refreshInterval: 100,  // how often the element should be updated
   decimals: 2,  // the number of decimal places to show
   onUpdate: null,  // callback method for every time the element is updated,
   onComplete: null  // callback method for when the element finishes updating
}; 
```

后面去掉逗号`onComplete: null`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T21:07:41.050

问题在于默认值的最终值的最后一个逗号。IE对此有问题。让它像这样，你应该很好：

```
$.fn.countTo.defaults = {
    from: 0,  // the number the element should start at
    to: 100,  // the number the element should end at
    speed: 1000,  // how long it should take to count between the target numbers
    refreshInterval: 100,  // how often the element should be updated
    decimals: 2,  // the number of decimal places to show
    onUpdate: null,  // callback method for every time the element is updated,
    onComplete: null  // callback method for when the element finishes updating
}; 
```

# objective-c - 子类化 NSWindowController，我可以提供多个 init 方法吗？

> ID：10806692
> 
> 赞同：1
> 
> 时间：2012-05-29T21:04:56.493
> 
> 标签：objective-c, ios, macos

我希望继承 NSWindowController 并提供几个标准的 init 方法（例如，init、initWithWindow、initWithWindowNibName）。目前，我让每个被覆盖的方法都调用其等效的 super 即，init 调用 [super init]，initWithWindow 调用 [super initWithWindow] 等等。

这是正确的做事方式吗？还是我设置得太笼统了，我应该只提供一个调用任何必要超级方法的 init 方法吗？

NSWindowController 是如何实际实现它的 init 方法的？根据文档，initWithWindow 是“默认”初始化程序 - 据称“默认”意味着其他初始化方法调用 initWithWindow。这是否意味着当我子类化时，我应该只有一个调用该类的 super 的初始化方法？

我开始感到困惑，开始歇斯底里地大笑，而我的狗看着我很有趣；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:21:33.747

每个类都应该有一个指定的初始化器。子类化时，您通常会选择包含最多自定义参数的初始化程序，并将其称为“指定”。重要的部分是所有其他初始化程序（特别是包括为父类描述的默认初始化程序）都调用此初始化程序。只有“指定”初始化程序调用 super，所有其他初始化程序调用 self。

例如：

```
//The default initializer documented by Apple for a given class:
- (id)init
{
    self = [super init];
    return self;
} 
```

因此，假设您有几个具有各种选项的初始化程序：

此自定义初始化具有最多的参数，并且是您的新“指定”。你会注意到它调用了[super init]：

```
- (id)initWithParamters:(NSObject *)paramterOne andParameter:(NSObject *)paramterTwo
{
    self = [super init];
    if (self)
    {
        __ivarOne = paramterOne;
        __ivarTwo = parameterTwo;
    }

    return self;
} 
```

你有一个额外的自定义初始化，但只接受一个参数。请注意，它调用 self （不是超级）：

```
- (id)initWithParamter:(NSObject *)parameterOne
{
return [self initWithParamter:parameterOne andParameter:nil];
} 
```

最后，覆盖类默认初始化程序（如文档中所述）：

```
- (id)init
{
    return [self initWithParamter:nil];
} 
```

总结一下：您可以在子类中实现任意数量的自定义初始化程序。一个初始化器应该被认为是你的“指定”初始化器，并且只有这个方法应该实现[super init]（其中init是超类的指定初始化器，它可能不是'init'）。所有其他初始化程序都应该调用 [self init] （其中 init 是您的子类的指定初始化程序）。

# asp.net - 如何将数据从 SQLDataSource 提取到数据表

> ID：10806694
> 
> 赞同：1
> 
> 时间：2012-05-29T21:04:58.307
> 
> 标签：asp.net, sql-server, visual-studio-2010, gridview, sqldatasource

是否可以将 SqlDataSource 检索到的数据存储在 DataTable 中？我的意思是，如果我拖放了一个 GridView 和一个 SqlDataSource，然后我在 Visual Studio 的页面设计器中设置了这些控件，那么以后是否可以检索 SqlDataSource 检索到的数据，然后将数据存储在 DataTable 中?

此致，

亚辛·埃杜里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:36:39.277

可能值得一看： [DataTable out of SQLDataSource](http://msmvps.com/blogs/egoldin/archive/2006/12/27/how-to-get-datatable-out-of-sqldatasource.aspx)

据我所知，egoldin 正在做的是填充 gridview，然后使用 rowDataBound 事件，然后他/她将返回的数据转换为表格，该表格可以在以后使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:12:07.593

我从@Robbie 那里得到了答案

```
Protected Sub DossierGV_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles DossierGV.RowDataBound
    If (e.Row.RowType = DataControlRowType.DataRow) Then
        If Me.firstTime Then
            Dim dv As System.Data.DataView = CType(e.Row.DataItem, System.Data.DataRowView).DataView
            Me.dtDS = dv.ToTable

            Me.firstTime = False
        End If
    End If
End Sub 
```

# ios - 从数组中获取内容并在 UILabel 中显示

> ID：10806696
> 
> 赞同：1
> 
> 时间：2012-05-29T21:05:00.663
> 
> 标签：ios, objective-c, nsmutablearray, stanford-nlp

我正在浏览斯坦福的 iOS 开发视频，并正在做作业 1。

我对任务 4 有疑问：

> 向您的用户界面添加一个新的文本标签 (UILabel)，该标签显示已发送到大脑的所有内容（以空格分隔）。例如，如果用户输入了 6.3 Enter 5 + 2 *，这个新的文本标签将显示 6.3 5 + 2 *。放置此标签的一个好地方是使其成为显示文本标签上方的薄条。不要忘记让 C 按钮也清除它。此任务的所有代码都应该在您的控制器中（不需要更改您的模型）。您不必显示无限数量的操作和操作数，只需显示合理数量即可。

我有 UILabel 并且已经完成了所有这些。我很难做到这一点。任何帮助是极大的赞赏。

（PS请不要发布完整的代码解决方案，因为我想学习如何做，发布代码只会使我的学习毫无意义，任何提示和指针都是最好的！谢谢）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:13:43.027

您应该将数组转换为字符串，然后您可以将其分配给标签。

```
label.text = [array componentsJoinedByString:@" "]; 
```

# javascript - createElement() 不起作用

> ID：10806700
> 
> 赞同：0
> 
> 时间：2012-05-29T21:05:21.740
> 
> 标签：javascript, google-chrome, google-chrome-extension, dom-manipulation

好的，所以我正在尝试制作 Chrome 扩展程序。我在这方面有点菜鸟，这就是为什么我开始从教程站点获取示例扩展并向其中添加内容。我从某个我不记得的网站上得到它，如果你真的想要归属，我可以搜索它。代码：

```
var req = new XMLHttpRequest();
req.open(
"GET",
"http://api.flickr.com/services/rest/?" +
    "method=flickr.photos.search&" +
    "api_key=90485e931f687a9b9c2a66bf58a3861a&" +
    "text=hello_world&" +
    "safe_search=1&" +  
    "content_type=1&" +  
    "sort=relevance&" +  
    "per_page=24",
true);
req.onload = showPhotos;
req.send(null);

function showPhotos() {
  var photos = req.responseXML.getElementsByTagName("photo");

  for (var i = 0, photo; photo = photos[i]; i++) {
    var img = document.createElement("image");
    img.src = constructImageURL(photo);
    document.getElementById("images").appendChild(img);
  }
}

function constructImageURL(photo) {
  return "http://farm" + photo.getAttribute("farm") +
  ".static.flickr.com/" + photo.getAttribute("server") +
  "/" + photo.getAttribute("id") +
  "_" + photo.getAttribute("secret") +
  "_s.jpg";
} 
```

所以无论如何，扩展所做的就是向 Flickr 的 API 发送一个 XMLHttpRequest，获取一些图像（XML 格式的 img 标签）。然后，它使用 for 循环遍历这些标签，并为每个标签使用 createElement() 创建一个新的 img 元素，使用constructImageURL() 函数为其提供一个 src 属性并将其附加到弹出页面。我想做的是让你可以真正点击这些图像，并被带到图像的页面。我试图根据创建图像元素的代码片段制作一段代码，但要创建锚 (a) 元素，并将其添加到 for 循环中。它看起来像这样：

```
var a = document.createElement("link");
a.href = constructImageURL(photo);
a.target = "_blank";
document.getElementById("images").appendChild(a); 
```

然后我添加了一些代码将 img 元素附加到锚元素，有效地制作了一个`<a><img /></a>`结构：

```
document.a.appendChild(img); 
```

但是，它不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:42:57.390

好吧，您应该通过右键单击浏览器操作并单击“检查弹出窗口”来检查开发人员工具控制台，看看有什么问题。

我想你可能想使用`setAttribute`，只是为了确保。链接的元素`<a>`不是`<link>`，图片的元素`<img>`也不是`<image>`。此外，您不希望`document.a.appendChild`将图像附加到*当前*变量。所以它应该是这样的：

```
function showPhotos() {
    var photos = req.responseXML.getElementsByTagName("photo");
    var a = document.createElement("a");
    a.setAttribute("href",constructImageURL(photo));
    a.setAttribute("target","_blank");

    var img = document.createElement("img");
    img.setAttribute("src",constructImageURL(photo));

    a.appendChild(img);
    document.getElementById("images").appendChild(a);
} 
```

# python - 从 Python 中的另一个数组切分给定范围的数组

> ID：10806705
> 
> 赞同：-1
> 
> 时间：2012-05-29T21:05:41.953
> 
> 标签：python, arrays, numpy, slice

为了更清楚，让我改写我最初在下面提出的问题。

我有一系列数据点，当有人迈出一步然后又迈出一步时，这些数据点的幅度会上升和下降。零是当脚离开地面时。

一个简单的示例如下所示：

```
 data_array = (0,0,0,10,20,50,40,30,10,0,0,0,0,0,10,20,50,40,30,10,0,0) 
```

我通过在一个数组中记录开始（所有开始的索引）和在另一个数组中的停止来确定每个步骤何时开始和停止。

开始 = (4 15)

停止 = (9 20)

问题：现在，我想将每个步骤的实际数据从初始数组中分割出来，并将它们分成列。

[注意：如果有必要，我们知道开始或停止数组中的数据量所采取的步数。]

10 10

20 20

50 50

40 40

30 30

10 10

我不知道如何使用这些开始和停止索引来分割初始数组。或者，我没有找到过滤功能来分割步骤。

**顺便说一句（第二次编辑）** 如果有帮助，这是我正在使用的一些代码：

```
sigma = 5

threshold = 30

above_threshold = gaussian_filter(Fz, sigma=sigma) > threshold

#---INDEX ALL STATE CHANGES---

ind = np.where(np.diff(above_threshold))[0] + 1

print ind 
```

***原始问题***

在这种类型的数组中：

```
data_array = (0,0,0,10,20,50,40,30,10,0,0) 
```

我确定值何时高于 20 和低于 20。我通过以下操作将这些索引返回为开始（高于 20）和停止（低于 20）：

```
startstop = np.vstack((ind[::2], ind[1::2])).T   
starts1=np.vstack((ind[::2])).T
stops1=np.vstack((ind[1::2])).T 
```

有人可以使用 numpy（或不使用）指向正确的方向，以便我可以使用这些数组之一（startstop、starts1、stops1）提取 data_array 中的所有这些值来得到这个：

```
new_array = (50,40,30) 
```

谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:48:39.740

Python 列表是用方括号定义的，我们想要生成一个列表列表（其中每一部分都包含您定义的段之一）。由于计算机从 0 开始计数，因此您的“第 4 个元素是开始”转换为数组索引 = 3。

一个怪癖是要查询第 4 到第 9 个元素，我们将使用 data_array[3:9]：此切片表示法为您提供从指定的第一个元素开始的每个元素，直到（但不包括）最后一个元素。其余的是一个列表推导，可以遍历任意数量的步骤段。

```
starts = [4, 15]
stops = [9, 20]
data_array = [0,0,0,10,20,50,40,30,10,0,0,0,0,0,10,20,50,40,30,10,0,0]
segments = [ data_array[starts[i] - 1: stops[i]  ]  for i in range( len(starts) ) ] 
```

返回

```
>>> segments
[[10, 20, 50, 40, 30, 10], [10, 20, 50, 40, 30, 10]] 
```

每组步骤（段）都可以单独访问：

```
>>>segments[0]
[10, 20, 50, 40, 30, 10] 
```

编辑：或者...如果您需要使用 numpy 数组，请尝试：segments = array([ data_array[starts[i] - 1:stops[i] ] for i in range( len(starts) ) ])

我尝试在其他模块中工作以直接获取数组（使用`itertools.islice`with `itertools.chain`、`numpy.fromiter`等）。但是，即使更高级的解决方案有效，我也不确定它是否会比转换为数组提供显着的速度优势，而且它会不那么简洁。请参阅：[如何从生成器构建 numpy 数组？](https://stackoverflow.com/questions/367565/how-do-i-build-a-numpy-array-from-a-generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:19:41.133

我不明白您尝试的方式，但是您可以使用[过滤器](http://docs.python.org/library/functions.html#filter)吗？：

```
>>> data_array = (0,0,0,10,20,50,40,30,10,0)
>>> filter(lambda x: x>20,data_array)

(50, 40, 30) 
```

也适用于 numpy 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:20:36.523

我认为 take() 会做你想做的事。

```
data_array = np.array([0,0,0,10,20,50,40,30,10,0])

b = data_array.take([1,2,3])
print b 
```

输出：

```
[ 0  0 10] 
```

阅读更多：[take()](http://www.scipy.org/Numpy_Example_List#take) [更多关于 take](http://docs.scipy.org/doc/numpy/reference/generated/numpy.take.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T22:49:06.027

您的问题并不十分清楚，但如果您要问如何对 Python 列表或可迭代对象进行切片，请使用内置[切片函数](http://docs.python.org/library/functions.html#slice)：

```
>>> data_array = (0,0,0,10,20,50,40,30,10,0)
>>> data_array[slice(5,8)]
(50, 40, 30)
>>> new_list=list(data_array[slice(5,8)])
>>> new_list
[50, 40, 30] 
```

# extjs - 填充组合后的 ExtJS this.store.getCount

> ID：10806707
> 
> 赞同：0
> 
> 时间：2012-05-29T21:05:45.323
> 
> 标签：extjs

嗨，我在使用 ext JS 时遇到了麻烦。我从另一个填充一个组合。我第一次从第一个组合中选择一个项目时，它会填充第二个（菜单）<我从第二个中选择一些内容，然后我将填充第三个，但是当我再次更改第一个组合时，它会清除第二个组合但是如果我点击它我得到这个错误：

> “错误：this.store.getCount 不是函数源文件：.../Presentation/Lib/Js/ext-all.js”

有没有人知道它为什么会发生？

非常感谢！

```
 {
                        xtype        : 'combo',
                        store        : cmb_sistemas,
                        hiddenName   : 'id_sistema',
                        allowBlank   : false, 
                        mode         : 'local',
                        fieldLabel   : 'Sistemas',
                        disabled     : true,
                        name         : 'sistemas',
                        id           : 'sistemas',
                        anchor       : '90%',
                        displayField : 'sistema',
                        triggerAction: 'all',  
                        emptyText: 'Select system',
                        editable     : false, 
                        valueField   : 'id',
                        listeners    : {
                                        select: function (){    
                                            idSistema = this.getValue();        
                                            nombreSistema = this.getRawValue();  

                                            cmb_menu = getMenu(idSistema);   
                                            menu = Ext.getCmp("menus");     

                                            menu.store.removeAll();//rdiaz  
                                            menu.clearValue();                             

                                            menu.store = cmb_menu;      //alert("sist: "+this.store.getCount());        
                                            menu.enable();                      
                                        }                                            
                        }
                    },  
                    {
                        xtype        : 'combo',
                        store        : [['0', 'Select']],
                        hiddenName   : 'id',
                        valueField   : 'id',
                        mode         : 'local',
                        allowBlank   : false,
                        fieldLabel   : 'menu',
                        disabled     : true,
                        triggerAction: 'all',
                        emptyText    : 'Seleccione un menu',
                        editable     : false, 
                        name         : 'menus',
                        id           : 'menus',
                        anchor       : '90%',
                        displayField : 'menu',
                        listeners    : {
                                        select: function () {                                           
                                                selectedMenu = this.getValue();                       
                                                cmb_items    = getItemsMenu(selectedMenu, idSistema);  
                                                items    = Ext.getCmp("items");               
                                                items.clearValue();                                 

                                                items.store = cmb_items;  //alert("menu: "+this.store.getCount());
                                                items.enable();
                                        }

                        }
                    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:16:47.967

而不是仅仅将商店分配给组合尝试使用`combo.bindStore(store)`方法

# reporting-services - SSRS 从文本框中删除空格

> ID：10806709
> 
> 赞同：1
> 
> 时间：2012-05-29T21:05:49.727
> 
> 标签：reporting-services, ssrs-2008

是否可以在 SSRS 中测试空白？我有一些文本框，用户可以在其中输入一些文本。它有时会留下一些空格，我有一些条件可以测试字符串的长度。我想知道是否有一种简单的方法来测试它。制表符、空格等

我获得的文本包含我从使用 HTML 编辑器的用户那里获得的 HTML 标记。该文本可以包含 HTML 标记，有时它们之间可以包含空格。我有一些 ReExp 摆脱了所有的 HTML 标签，但它留下了可能存在的空白。我也想删除它们

前任。

```
"<p> </p><br/>" 
```

RegEx 处理后的结果

```
" " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:05:34.167

很难确切地看到您要完成的工作。我假设您正在尝试摆脱*多余*的（但不是全部）空格字符。

**选项 1：Regex**
在正则表达式中执行。如果您使用正则表达式去除标签，为什么不在那里修复空白问题呢？但请记住，尝试使用正则表达式解决一个问题的人[通常会遇到两个问题](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)；-)

**选项 2：表达式**
在文本框中呈现值时，使用表达式中 的[Visual Basic 函数](http://msdn.microsoft.com/en-US/library/c157t28f%28v=vs.90%29.aspx)。特别是[修剪](http://msdn.microsoft.com/en-US/library/h9wz3dez%28v=vs.90%29.aspx)和[更换](http://msdn.microsoft.com/en-US/library/bt3szac5%28v=vs.90%29.aspx)浮现在脑海中。这些方面的东西：

```
=Trim(Replace(Fields!SomFieldName.Value, "  ", " "))
'                    number of spaces >>  02    1 
```

我想这也可以在使用 SQL 的查询中完成。

**选项 3：占位符 + HTML**
使用占位符，实际上只是在报告中呈现 html。有关信息，请参阅[此 msdn 文章](http://msdn.microsoft.com/en-us/library/cc645967%28SQL.105%29.aspx)。我不确定支持哪些 html 标签。

# c# - Xbox 应用程序开发

> ID：10806710
> 
> 赞同：0
> 
> 时间：2012-05-29T21:05:54.613
> 
> 标签：c#, xna, xbox360, xbox

我一直在互联网上搜索创建 xbox 应用程序（不是游戏）的指南，但到目前为止还没有成功。我发现微软提供了 XNA 和 XDK，而 XDK 只能通过他们的开发者计划获得。

似乎无法仅使用 XNA 创建应用程序，但是，我不确定这是否正确。XNA 看起来确实允许您创建游戏，但如果您只是创建应用程序，我不确定这是否是正确的开发工具包。那么，我可以使用 XNA 创建一个 xbox 应用程序还是需要为此做一些其他事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:08:41.523

您必须拥有开发人员许可证。该应用程序直接部署到 Xbox 以运行/调试。向 VS 注册 Xbox 的唯一方法是输入许可证 ID。

# c++ - 与 std::deque 一起使用时不能将 Boost::mutex 作为私有类成员吗？

> ID：10806715
> 
> 赞同：2
> 
> 时间：2012-05-29T21:06:17.400
> 
> 标签：c++, multithreading, boost, boost-thread, deque

我在使用 deque 和 boost::mutex 时遇到了一些问题，我制作了一个简单的示例，该示例将通过以下错误进行编译。

问题是我想要一个具有一个或多个互斥锁作为私有成员的类的双端队列。虽然目前该示例给出了一个错误：

错误 C2248：“boost::mutex::mutex”：无法访问在类“boost::mutex”中声明的私有成员

我看过一些相关的帖子，但到目前为止我还没有设法解决这个具体问题。

任何帮助将不胜感激...

```
#include <iostream>  
#include <boost/thread.hpp>  
#include <deque>  

using namespace std;

class object {
public:
    void process(void)
    {
        m_mutex.lock();
        // do something
        a = a*10;
        m_mutex.unlock();
    }
    object(int v){  a = v; }        
private:
    int a;
    boost::mutex m_mutex;
};

int main(int argc, char* argv[])  
{
    deque<object> obj; 

    obj.push_back( object( 1 ) );
    obj.push_back( object( 2 ) );
    obj.push_back( object( 3 ) );

    obj.at(0).process();
    obj.at(1).process();
    obj.at(2).process();

    return 0;  
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:32:00.773

```
obj.push_back( object( 1 ) ); 
```

上面的行创建了一个临时`object`实例，然后将其复制构造到 deque 元素中。由于`boost::mutex`不可复制构造，编译器无法为`object`.

如果那是您需要复制构造的唯一地方，请将`object`语句更改为

```
obj.emplace_back( 1 ); 
```

`emplace_back`导致`object`实例在适当的位置构造，而不是使用复制构造。

* * *

如果您无权访问 C++11 功能，请将`object`类更改为以下内容：

```
#include <memory>

class object {
public:
    void process(void)
    {
        m_mutex->lock();
        // do something
        a = a*10;
        m_mutex->unlock();
    }
    object(int v)
    : m_mutex( std::make_shared<boost::mutex>() )
    {  
      a = v; 
    }     

private:
    int a;
    std::shared_ptr<boost::mutex> m_mutex;
}; 
```

在 VS2008 中你可能不得不使用它`std::tr1::shared_ptr`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T21:09:14.703

互斥锁不是 CopyConstructible，因此您的类型的复制构造函数格式不正确。

您可以提供不复制互斥锁的用户定义的复制构造函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T21:33:56.473

如果您不想费心编写复制构造函数来避免复制互斥锁，则可以改用 Boost 中的[指针容器](http://www.boost.org/libs/ptr_container/)。

例如：

```
#include <boost/ptr_container/ptr_deque.hpp>
...
boost::ptr_deque<object> obj;
obj.push_back(new object());
obj[0].process()
... 
```

现在双端队列的行为就像一个普通的双端队列，但它从不尝试复制任何`object`实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T21:10:59.973

您不能复制互斥锁，因此您也不能复制包含互斥锁的类。作为替代方案，您可以`unique_ptr`为您的班级创建一个 s的双端队列

```
 std::deque<std::unique_ptr<object>> obj; 
```

# android - 为什么我的单选按钮不会像切换按钮 (Android) 那样更改选中状态？

> ID：10806718
> 
> 赞同：2
> 
> 时间：2012-05-29T21:06:40.973
> 
> 标签：android, radio-button, toggle, togglebutton

出于苦行者的目的，我需要使用单选按钮作为切换按钮。不幸的是，我只能让它保持选中或取消选中但不能重新选中。我已经尝试了所有我能想到的组合，但无法让它发挥作用。toggle() 不起作用，因为它只会检查未选中的单选按钮。我尝试了 isChecker() 和 setChecked() 的组合，但它不起作用。这是我目前拥有的：

```
 pi.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {               
            Log.e("Pistate before",Boolean.toString(pistate));

            if(pistate=true)
                pi.setChecked(false);
            if(pistate=false)
                pi.setChecked(true);
            if(pi.isChecked())
                pistate=true;
            if(!pi.isChecked())
                pistate=false;

            Log.e("Pistate after",Boolean.toString(pistate));
        }
    }); 
```

一旦取消选中，它将不会重新检查。pistate 在之前和之后都读取错误，这完全没有意义，因为我的 if() 应该改变它，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:10:24.607

好吧，因为这是一个比较，你应该使用`==`

`if(pistate == true)`

或者，如果它是您想要的对象引用

`if(object.equals(pistate))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T21:23:44.033

您不需要使用单独的来维护“状态”，`Boolean`只需执行以下操作...

```
pi.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        pi.setChecked(!pi.isChecked());
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:21:27.690

嗯，和我要说的一样。使用 == 会有所帮助。无论如何，该方法可能会更加复杂。我会建议：

```
pi.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {               
        Log.e("Pistate before",Boolean.toString(pistate));

        pistate = !pistate;
        pi.setChecked(pistate);

        Log.e("Pistate after",Boolean.toString(pistate));
    }
}); 
```

# xcode - 我可以在不下载内容的情况下开发报亭应用吗？

> ID：10806721
> 
> 赞同：1
> 
> 时间：2012-05-29T21:06:54.340
> 
> 标签：xcode, ios-simulator, newsstand-kit

我想尝试构建一个报亭应用程序，但想首先专注于查看器组件。我可以将示例问题“预加载”到 iPhone 模拟器或我的设备上吗？为了开发这个组件，我想假设内容已经下载到 Newsstand 存储库中。

# ruby-on-rails - 谷歌搜索 API 红宝石

> ID：10806722
> 
> 赞同：4
> 
> 时间：2012-05-29T21:06:55.887
> 
> 标签：ruby-on-rails, ruby, google-api

我正在使用导轨 2.3。我的要求是从 Google 搜索查询中获取前 20 个链接。

我想使用 [http://rubygems.org/gems/google-api-client](http://rubygems.org/gems/google-api-client) gem。

但我无法找到任何适当的文档来进行自定义谷歌搜索和身份验证。谁能给我举个例子，我可以从中了解如何使用 google-api-client gem 进行自定义 google 搜索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-06-28T05:13:01.327

如果有人偶然发现，这是此代码的更新版本：

*宝石文件*

```
gem 'google-api-client', '~> 0.11' 
```

*搜索.rb*

```
require 'google/apis/customsearch_v1'
Search = Google::Apis::CustomsearchV1
search_client = Search::CustomsearchService.new
search_client.key = 'YOUR API KEY'
response = search_client.list_cses('your query', {cx: 'Search Engine ID'})
status, headers, body = response

pp status
pp headers
pp body 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T21:31:59.283

我看了一下API，它似乎并不难......只需要定义你想使用哪个[google的api 。](http://code.google.com/p/google-api-ruby-client/wiki/SupportedAPIs)在您的情况下，您似乎想要使用[customsearch api。](https://developers.google.com/custom-search/v1/using_rest)

所以你的代码应该是这样的：

```
require 'google/api_client'
my_search_client = Google::APIClient.new
google_search = my_search_client.discovered_api('customsearch')
response = my_search_client.execute(
  google_search.cse.list, 'q' => 'your query'
)
status, headers, body = response 
```

对于身份验证部分，您应该可以直接从此[页面](http://code.google.com/p/google-api-ruby-client/wiki/Documentation)复制和粘贴。只需使用您自己的价值观。

# email - 你会怎么做呢？每个发表评论的电子邮件通知

> ID：10806723
> 
> 赞同：0
> 
> 时间：2012-05-29T21:06:58.557
> 
> 标签：email, php

这里的方法问题。

每次有人回复您在我的应用程序中留下的评论时，我都想向该人发送一封电子邮件（如果通知已开启）...

目前我有一个简单的 html php 邮件程序，它会通过每个想要发送电子邮件通知的用户并将其发送出去..

这很好用，但是假设有 5000 人都希望收到此评论的通知，并且人们每分钟评论一次……这是否会导致 php 将邮件传递到邮件服务器时出现问题，或者它是否能够应对一个for循环..每1分钟向所有这些用户发送一次？

我错过了一个技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:15:37.317

可扩展性将成为一个主要问题。但是，更紧迫的是检查您现在拥有的主机。GoDaddy 和 HostMonster 等大型共享服务会以每小时一定的速度限制您，这在他们的 TOS 中。先回顾一下。

也许你可以编写你的脚本来做一个摘要，如果他们每小时有 x 量的活动等，他们会向用户“银行”消息。

最后，请考虑电子邮件不是一门精确的科学，您将无法保证在确切的时间段内或根本无法保证交付。为了提高可交付性，您必须监控您的服务器，不要连续多次访问服务（例如，如果您每秒向其发送多个服务，AOL 就会吠叫）并且对您各自的域/IP 具有良好的成熟度增加“信任”

可以办到。我公司的应用程序每天在三台服务器之间发送数十万封电子邮件。但这绝非易事，两位工程师花了一年多的时间才真正稳定下来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:09:41.437

如果您打算像这样发送大量电子邮件，您可能需要考虑使用第三方服务，例如[Sendgrid](http://sendgrid.com/)或[Postmark](http://postmarkapp.com/)。

或者，如果每个人都可以收到相同的电子邮件，那么您可以发送一封电子邮件并将收件人作为该电子邮件的密件抄送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:12:30.797

在 stackoverflow 上的这个线程上有一个关于群发邮件的问题，请参阅[使用 PHP 发送群发电子邮件](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)

# iphone - 使用 Tesseract 从图像中异步读取文本？

> ID：10806725
> 
> 赞同：1
> 
> 时间：2012-05-29T21:07:08.553
> 
> 标签：iphone, ios, asynchronous, ocr, tesseract

是否可以使用 tesseract 异步从图像中获取文本？如果扫描需要很长时间，我很乐意让用户取消扫描。

```
char* utf8Text = tesseract->GetUTF8Text(); 
```

锁定屏幕直到 OCR 完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:20:28.937

在后台线程中运行将使用户界面继续接收请求。尝试这样的事情：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    char* utf8Text = tesseract->GetUTF8Text();
}); 
```

# wpf - WPF应用程序能否根据系统分辨率动态调整

> ID：10806731
> 
> 赞同：0
> 
> 时间：2012-05-29T21:07:36.063
> 
> 标签：wpf

你能告诉我，我可以创建具有动态系统分辨率的 WPF 应用程序吗？在这里，我的意思是根据系统分辨率，我的 WPF 应用程序需要自动调整。

现在，我正在实现具有固定宽度和高度的 WPF 应用程序。

请提供您的建议......

谢谢，

苏克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:58:08.003

我将猜测您在这里所说的内容。

您可以使用以下方法确定系统分辨率：

```
SystemParameters.PrimaryScreenWidth
SystemParameters.PrimaryScreenHeight 
```

从那里你可以做任何你喜欢的事情。

# excel - excel中的嵌套间接查找

> ID：10806739
> 
> 赞同：0
> 
> 时间：2012-05-29T21:07:53.377
> 
> 标签：excel, worksheet-function

我有一个 excel 表 - 请参阅随附的屏幕截图。

需要根据列中的值在列中输入公式`J`以从区域中获取`C2:E10`值`G,H,I`。

那么，什么公式应该进入单元格`J2`以从单元格中获取值`E3`。（索引在 g,h,i 列中），

这意味着一些嵌套的间接查找 - 并且不知道如何去做。

![在此处输入图像描述](../Images/dcdfb5313ffdec69bf669d5c1387b15a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:56:37.187

在复制下来的 J2 中试试这个公式

`=INDEX(C$2:E$10,MATCH(1,INDEX((A$2:A$10=G2)*(B$2:B$10=H2),0),0),MATCH(I2,C$1:E$1,0))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:11:55.097

我需要 3 个单元格 - 似乎 excel 不做嵌套数组公式（或者我无法让它们工作）

J2 {使用 Ctrl+Shift+Enter`=MATCH(G2&H2,A2:A10&B2:B10,0)` 作为*数组*
公式输入) K2 `=MATCH(I2,C2:E2)`
L2`=INDEX(C2:E10,J2,K2)`

# mysql - 查询帮助（Foreach 循环）

> ID：10806740
> 
> 赞同：0
> 
> 时间：2012-05-29T21:07:55.640
> 
> 标签：mysql

我有以下表格：

```
items(itemid, itemName, catid)

categories (catid, catname)

prices (itemid, open_price, close_price) 
```

*   每个项目仅属于 1 个类别
*   每个商品在价格表中只有 1 个 open_price, close_price 行

如果我有 10 个类别，每个类别中有 10 个项目（例如），我如何找到每个类别中价格变化最大的公司。

我目前有一个 php 循环，它运行并获取每个类别的最佳表现，但想知道是否有一种方法可以更有效地做到这一点。

谢谢

代码：

`foreach category, run the following query:`

`SELECT c.itemid, c.itemname ,`

`100.0 * ( cp.close_price - cp.open_price )/ IFNULL(cp.open_price,1) AS overall_change`

`FROM prices cp`

`LEFT JOIN items c ON c.itemid = prices.itemid`

`WHERE c.catid=8 ORDER BY overall_change DESC LIMIT 1;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:36:16.100

如果您不介意抽奖（当两个项目在一个类别中排名靠前时）

```
SELECT 
    cat.catid,
    cat.catname,
    c.itemid, 
    c.itemname ,
    100.0 * ( cp.close_price - cp.open_price )/ IFNULL(cp.open_price,1) AS overall_change    
FROM 
    categories AS cat
JOIN    
    items AS c
    ON cat.catid = c.catid
JOIN 
    prices AS cp
    ON c.itemid = cp.itemid
JOIN
    (SELECT
        c.catid, 
        MAX(100.0 * ( cp.close_price - cp.open_price )/ IFNULL(cp.open_price,1)) AS overall_change
    FROM   
        items AS c
    JOIN 
        prices AS cp
        ON c.itemid = cp.itemid
    GROUP BY
        c.catid
    ) AS max
    ON cat.catid = c.catid
    AND max.overall_change = (100.0 * ( cp.close_price - cp.open_price )/ IFNULL(cp.open_price,1))
ORDER BY
    cat.catid 
```

...我还没有测试过这个:)

# ruby-on-rails - .gitignore 忽略错误的文件 rails app

> ID：10806752
> 
> 赞同：1
> 
> 时间：2012-05-29T21:08:43.100
> 
> 标签：ruby-on-rails, git, gitignore

我很难理解为什么我的`.gitignore`文件会忽略 Rails 应用程序中的文件。

对于熟悉 Rails 应用程序的人来说，它`db`在应用程序的根目录中包含一个目录，其中包含所有数据库迁移和一些其他内容。

例如，我的问题是每次执行以下操作时：`git add .` 并且我已经在 db 目录中创建或调整了一些文件。Git 会忽略这些变化，我觉得很奇怪！这是我的`.gitignore`文件内容：

```
# Git Ignore

# Ignore bundler config
/.bundle

# Ignore all logfiles and tempfiles.
/log/*.log
/tmp

*.rbc
*.sassc
.sass-cache
capybara-*.html
.rspec
/.bundle
/vendor/bundle
/log/*
/tmp/*

/public/assets/*
/public/system/*
/public/stylesheets/*
/coverage/
/spec/tmp/*
.DS_Store
._*
.Spotlight-V100
.Trashes 
```

有没有人可以解释为什么我的`.gitignore`文件会忽略这个目录以及其中的所有内容？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:08:44.133

我能想到的3种可能性：

*   发出该命令时，您必须位于不同的 git 存储库中。
*   该 .gitignore 文件中的某些字符正在搞砸。删除 .gitignore 文件并提交该更改以查看是否仍然存在该问题。一次添加一个块，看看事情是否仍然有效。
*   您在 db 目录中有一个 .gitignore ，其中包含不需要的排除项。您可以拥有许多 .gitignore 文件。

# haskell - 什么时候显式关闭文件句柄更好？

> ID：10806753
> 
> 赞同：8
> 
> 时间：2012-05-29T21:08:44.780
> 
> 标签：haskell

我对它的第一印象`readFile`是在它的便利性和它让文件描述符打开的时间超过需要的时间之间进行权衡，而无法关闭它们。作为一个实验，我尝试了以下（非常实用的）程序，认为它可能会因尝试维护一千个打开的文件描述符而窒息：

```
main = do
  mapM_ (\idx -> readIt) [1..1000]
  where readIt = do
          contents <- readFile "/etc/passwd"
          putChar $ head contents 
```

但它实际上在回收文件描述符方面做得很好。计数永远不会超过 70 左右：

```
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 4
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 5
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 6
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 7
...
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 65
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 66
close(3)                                = 0
close(4)                                = 0
close(5)                                = 0
...
close(54)                               = 0
close(55)                               = 0
close(56)                               = 0
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 3
open("/etc/passwd", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE) = 4 
```

这是怎么回事？是否只是`contents`GC 的值以及不再引用的文件描述符？还是有一些单独的机制来管理文件描述符资源？无论机制是什么，它似乎都运行得很好——你怎么知道什么时候最好`hClose`显式使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:58:42.543

最好自己显式关闭资源，只有当您有一些可以手动强制执行的低级别资源约束时。

需要考虑的案例：

*   通过惰性 IO 获取的资源：必须使用 GC 来释放资源
*   严格 IO：一旦读取输入就可以手动关闭；或使用包围组合器（例如`finally`或`bracket`）
*   增量 IO（管道、迭代器）：让框架为您关闭它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T21:58:15.080

[Haddock 文档`System.IO`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/System-IO.html)有这样的说法：

> GHC 注意：当垃圾收集器检测到它已被程序未引用时，Handle 将自动关闭。但是，通常不建议依赖这种行为：垃圾收集器是不可预测的。如果可能，在不再需要句柄时使用显式的 hClose 来关闭句柄。GHC 目前不会在文件描述符用完时尝试释放它们，您有责任确保不会发生这种情况。

# c++ - 发送和接收 int C++

> ID：10806754
> 
> 赞同：5
> 
> 时间：2012-05-29T21:08:45.907
> 
> 标签：c++, sockets, int

如何发送到服务器 4 个字节`int`并在服务器端将此缓冲区转换为 int。

**客户端：**

```
void send_my_id()
{
 int my_id = 1233;
 char data_to_send[4];
 // how to convert my_id to data_send?
 send(sock, (const char*)data_to_send, 4, 0);
} 
```

**服务器端：**

```
void receive_id()
{
 int client_id;
 char buffer[4];
 recv(client_sock, buffer, 4, 0);
 // how to conver buffer to client_id? it must be 1233;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T21:16:08.720

您可以简单地将您的地址`int`转换为`char*`并将其传递给`send`/ `recv`。注意使用`htonl`and`ntohl`来处理字节序。

```
void send_my_id()
{
 int my_id = 1233;
 int my_net_id = htonl(my_id);
 send(sock, (const char*)&my_net_id, 4, 0);
}

void receive_id()
{
 int my_net_id;
 int client_id;
 recv(client_sock, &my_net_id, 4, 0);
 client_id = ntohl(my_net_id);
} 
```

注意：我保留了结果检查的缺失。实际上，您需要额外的代码来确保 send 和 recv 都传输所有需要的字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:16:41.010

自互联网诞生以来，通常的惯例是以[网络字节顺序](http://en.wikipedia.org/wiki/Endianness)（读取大端）发送二进制整数。您可以使用[`htonl(3)`](http://linux.die.net/man/3/htonl)和朋友这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:15:13.713

在发送方：

```
int my_id = 1233;
char data_to_send[4];
memcpy(&data_to_send, &my_id, sizeof(my_id));
send(sock, (const char*)data_to_send, 4, 0); 
```

在接收方：

```
int client_id;
char buffer[4];
recv(client_sock, buffer, 4, 0);
memcpy(&my_id, &buffer, sizeof(my_id)); 
```

注意：`int`两边的大小和字节序必须相同。

# wpf - FindFirst 始终返回 null AutomationElement

> ID：10806758
> 
> 赞同：2
> 
> 时间：2012-05-29T21:09:04.407
> 
> 标签：wpf, nunit, ui-automation, automationelement

我正在尝试使用 UI 自动化框架测试一些自定义控件。我的一个控件有一个 TextBox 基类，另一个继承自 Control。我可以通过测试找到我的第一个控件，但是无论我使用 TreeScope 和属性条件的哪种组合，我都无法在窗口中找到我的第二个自定义控件。

我在 XAML 中声明自定义控件，如下所示：

```
<Grid>
    <test:CustomTextBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="customTextBox1" VerticalAlignment="Top" Width="120" />
    <test:CustomUserControl Height="25" HorizontalAlignment="Left" Margin="12,62,0,0" Name="customUserControl1" VerticalAlignment="Top" Width="119" />
</Grid> 
```

我有一个像下面这样的样本测试。

```
[Test]
public void TestUsingValuePattern()
{
    // Getting RootElement...
    AutomationElement rootElement = AutomationElement.RootElement;
    Assert.IsNotNull(rootElement);

    // Searching for Test Window...
    AutomationElement windowElement = rootElement.FindFirst(TreeScope.Children, new PropertyCondition(AutomationElement.NameProperty, "TestWindow"));
    Assert.IsNotNull(windowElement);

    // Searching for Custom TextBox control...
    AutomationElement customElement1 = windowElement.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.AutomationIdProperty, "customTextBox1"));
    Assert.IsNotNull(customElement1);

    // Searching for Custom User control
    AutomationElement customElement2 = windowElement.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.AutomationIdProperty, "customUserControl1"));
    Assert.IsNotNull(customElement2);
} 
```

第二个断言总是返回 null 所以我什至无法开始对其运行测试。关于我可以做些什么来解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:38:47.667

看起来您可能需要[在 XAML](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationproperties.automationid.aspx)中设置 AutomationId 属性才能显示 - 它看起来不像 Name 属性被公开为 AutomationId。

您可能还想使用[检查工具](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521(v=vs.85).aspx)检查元素是否实际暴露在自动化树中，并具有您期望的 AutomationId 或其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:08:20.597

请参阅下面的线程检查，您需要为每个控件使用 AutomationId 来获取使用它的元素。

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b0892b5c-3850-4518-8063-d4eb5a8d9781/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b0892b5c-3850-4518-8063-d4eb5a8d9781/)

# wpf - 你能确定一个可继承的附加属性的来源吗？

> ID：10806762
> 
> 赞同：0
> 
> 时间：2012-05-29T21:09:22.173
> 
> 标签：wpf, inheritance, dependency-properties, attached-properties

我们有两个外部定义的、逻辑上独占（业务方面）的附加属性，它们都是可继承的。取决于哪个设置最接近我们正在阅读的 DependencyObject，这决定了我们在逻辑中使用哪个，如下所示。

注意：我不想知道它*是*继承的，你可以通过 来做`DependencyPropertyHelper.GetValueSource`，我想知道从哪里开始，所以我可以确定优先级。

考虑以下可视树层次结构和附加属性：

```
Root // <-- AProp1 first set here
    Child
        GrandChild // <-- AProp2 first set here
            GreatGrandChild // <-- AProp1 re-applied here
                GreatGreatGrandChild 
```

*   在 Root 的情况下，AProp1 是单独设置的，因此我们使用 AProp1。

*   在 Child 的情况下，AProp1 是继承的，因此我们仍然使用 AProp1。

*   在 GrandChild 的情况下，设置了 AProp2，但由于继承，AProp1 也具有值。然而，由于 AProp2 直接设置在此对象上（即距离“0”级别）与 AProp1（距离“2”），AProp2 优先于我们的业务逻辑。

*   在 GreatGrandChild 的情况下，同样由于 AProp1 已设置（距离“0”），优先于 AProp2（距离“1”）

*   最后，在 GreatGreatGrandChild 的情况下，AProp1 和 AProp2 都是通过继承获取的，但是由于 AProp1 在层次结构中设置得更近（距离“1”）与 AProp2（距离“2”）更近，所以 AProp1 是我们要使用的那个。

如果我能找到源头，我知道我可以简单地走链条并计算距离。我只需要来源。

## 笔记：

作为记录，是的，它们都可以设置在同一级别，在这种情况下 AProp2 将优先，但这与这个问题无关。

*即使使用相同*的值来提高其优先级，也可以重新应用属性（请参阅 GreatGrandChild） 。这就是为什么我需要知道源在哪里/离我正在检查的元素有多远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:21:13.680

一个非常有趣的问题！您可以将附加属性添加到存储类型的 DependencyObject（如果类型对您不利，您可以存储对象引用），我们将使用它来记录设置属性的对象的类型。

```
 public class DependencyPropertyExtension
    {
        public static Type GetAprop1Owner(DependencyObject obj)
        {
            return (Type)obj.GetValue(Aprop1OwnerProperty);
        }

        public static void SetAprop1Owner(DependencyObject obj, Type value)
        {
            obj.SetValue(Aprop1OwnerProperty, value);
        }

        public static readonly DependencyProperty Aprop1OwnerProperty = DependencyProperty.RegisterAttached("Aprop1Owner", typeof(Type), typeof(DependencyProperty), new UIPropertyMetadata(null));
    } 
```

然后在依赖属性 Aprop1 中添加一些 UIPropertyMetaData 以便我们可以响应更新。

```
public object Aprop1
{
    get { return (object)GetValue(Aprop1Property); }
    set { SetValue(Aprop1Property, value); }
}
public static readonly DependencyProperty Aprop1Property =
    DependencyProperty.Register("Aprop1", typeof(object), typeof(Level1), new UIPropertyMetadata(null, new PropertyChangedCallback( (s, e) =>
        {
            DependencyPropertyExtension.SetAprop1Owner(s, s.GetType());
        }))); 
```

我在这里所做的只是将附加属性更新为设置该属性的对象的类型。

您可以从任何对象中读取此信息

```
DependencyPropertyExtension.GetAprop1Owner(testObject).FullName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:36:31.173

使用元组来包含这两个值。最接近的继承属性将包含一个值或另一个值，并且优先。

您消除了反映整个可视化树的需要，并依赖于依赖属性的内置机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T18:16:16.740

我想我已经找到了。那些“一直在你面前”的事情之一。它围绕使用`DependencyPropertyHelper.GetValueSource`来确定对象的属性值是否被继承。

当然，这本身并不能告诉你足够的信息，但从那里开始很容易。

有了这些知识，您只需编写一个方法，该方法接受相关对象并检查两个属性是否存在（请记住，它们可能由于默认值、样式、模板或其他原因而被“设置”）并相应地继续：

*   如果只设置了两者中的一个，那就是你使用的那个，你就完成了。根据需要处理。

*   如果它们都已设置，则使用单个属性使用的相同优先级。（即`Local`beats `Inherit`、`Inherit`beats`Default`等）您只是在同一级别将两个属性源的值相互比较。

*   如果它们的来源相同但不是`Inherit`，则使用在业务逻辑中具有优先权的那个（在我们的例子中是 AProp2。）

*   如果它们相同并且它*是* `Inherit`，则沿着逻辑树（或可视化，具体取决于您的需要）并递归调用传入父级的相同函数。

当然，如果这个属性受动画和其他类似的东西的影响，那么逻辑会变得有点复杂，但在我们的例子中，它要么在本地设置，要么被继承。其他的不多。

现在很简单，我正在看它。希望这对其他人有帮助！

# null - 我应该写 FK、NULL 还是 NOT_NULL？

> ID：10806766
> 
> 赞同：0
> 
> 时间：2012-05-29T21:09:55.110
> 
> 标签：null, foreign-keys, primary-key, data-dictionary

我正在尝试做一个数据字典并用（属性，Null，Type，长度）填充表格我得到的表格之一就像

```
create table user(
    user_number(8),
    First_name varchar(30) not null,
    Last_name varchar(30) not null,
    DOB date not null,
    nationality varchar (30) not null,
    gender char (1) not null,
    address varchar(30) not null,
    Primary key(user_ID)
    foreign key(profile_ID)
); 
```

当我开始在表格中描述它们时，它就像

```
______________________________________________________
| column name  |     NULL   |    key  |     type     |
|====================================================|
| user_ID      |     null   |    pk   |     varchar  |
| profile_ID   |     null   |    fk   |     varchar  |
|______________|____________|_________|______________| 
```

我的问题是，将 pk 和 fk 都设为 null 是否正确？还是我应该使 fk Not-Null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:39:01.347

我不认为您对数据库中的主键、外键以及 null 与非 null 的含义有什么密切的了解。或者至少，如果你这样做了，你没有使用正确的语法来描述你正在尝试做的事情。

大多数列定义包括名称、长度（有时）、数据类型和限定符，如 NULL/NOT NULL、AUTOINCREMEMT、PRIMARY KEY 等。此外，在所有列定义之后，大多数数据库都有特定的语法结构要定义约束，例如索引列、主键、唯一列等。请注意，主键列必须是上面在列定义中定义的列。

每个数据库的语法都有细微差别，但大多数都遵循相当一致的模式。例如，在 MySQL 中，您可能会定义几个表，如下所示：

```
CREATE TABLE profiles (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(50) NOT NULL,
    -- other fields
);

CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    profile_id INTEGER NOT NULL,
    first_name VARCHAR(30) NOT NULL,
    last_name VARCHAR(30) NOT NULL,
    date_of_birth DATETIME NOT NULL,
    nationality VARCHAR(30) NOT NULL,
    gender CHAR(1) NOT NULL,
    address VARCHAR(30) NOT NULL,
    CONSTRAINT FOREIGN KEY (profile_id)
        REFERENCES profiles (id)
        ON UPDATE CASCADE
        ON DELETE CASCADE ); 
```

当然，您使用的确切语法完全取决于您要执行的操作。在上面的示例中，将创建两个表，profiles 和 users。在 users 表中，id 列是主键，profile_id 列是引用配置文件表的外键。注意外键（profile_id）是如何在上面的列定义中定义的；这是必需的。此外，几乎所有数据库都允许您将 PRIMARY KEY 指定为列定义中的限定符。或者，您可以将其指定为约束，如下所示：

```
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    -- other columns and constraints...
    PRIMARY KEY (id) ); 
```

您可能想要使用该语法的主要原因是，如果您有一个多列主键 - 两个或更多列本身不一定是唯一的，但合在一起构成一个唯一组合。但这有点先进。

大多数数据库不允许您拥有能够在其中包含空值的主键列。例如，在 MySQL 中，如果您没有将主键列显式声明为 NOT NULL，那么无论如何它都会默默地这样做。如果您能够将主键列声明为能够具有空值，那么只有一条记录能够具有空值——多个空值将违反主键约束。

外键*可以*为空，但您可能不希望它们为空。这就是外键的意义——用作对另一个表数据的引用，并且您几乎总是希望表中具有外键的所有行都包含另一个表中的父数据。您唯一需要空外键的情况是您希望表包含“孤立”数据。在上面的示例中，如果用户可能没有将个人资料附加到他或她的帐户，则 profile_id 列可能为空。

我强烈建议寻找一些关于主键和外键的基本教程信息。它们不是很难掌握的概念，但如果您在任何重要程度上使用数据库，您肯定需要知道这一点。我希望这对您有所帮助，并且您会找到想要做的事情。如果您有要完成的具体任务，发布它可能会有所帮助，因为使用实际示例比从概念上解释它更容易，希望我所说的内容特别适用于您的内容重新尝试做。

# ruby-on-rails - 将 JSON 导入 Heroku Rails 应用程序，然后存储在数据库中

> ID：10806768
> 
> 赞同：2
> 
> 时间：2012-05-29T21:09:58.947
> 
> 标签：ruby-on-rails, json, postgresql, heroku, import

我有一个托管在 Heroku 上的 Rails 3.2 应用程序。我想尽量避免手动输入每条新记录的所有数据。他们是让我的 Rails 应用程序查看这样的 JSON 文件（除了 MUCH LARGER）并将该信息解析到数据库中的简单方法吗？

```
[   {
    "name": "Sierra Mist – Small Cup",
    "wwpplus": "5",
    "ssize": "451g",
    "calories": "190",
    "tfat": "0",
    "protein": "0",
    "fiber": "0",
    "carbs": "50",
    "restaurant_id": "12"
},
{
    "name": "Vanilla Shake regular",
    "wwpplus": "13",
    "ssize": "425g",
    "calories": "480",
    "tfat": "15",
    "protein": "14",
    "fiber": "0",
    "carbs": "74",
    "restaurant_id": "12"
},
{
    "name": "Vanilla Shake small",
    "wwpplus": "11",
    "ssize": "340g",
    "calories": "380",
    "tfat": "12",
    "protein": "11",
    "fiber": "0",
    "carbs": "60",
    "restaurant_id": "12"
}] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T21:19:19.053

你可以在你的`db/seeds.rb`文件中解析它：

```
records = JSON.parse(File.read('path/to/file.json'))
records.each do |record|
  ModelName.create!(record)
end 
```

然后`heroku run rake db:seed`

# c# - 在开始申请前显示定时欢迎框

> ID：10806770
> 
> 赞同：1
> 
> 时间：2012-05-29T21:10:13.183
> 
> 标签：c#, winforms, timer

在我需要添加功能之前，我有这条线工作：

```
 public MainForm()
    {
        InitializeComponent();
        refreshUI();
    } 
```

然后我需要在显示 MainForm 之前显示一个welcomeBox 几秒钟。所以我改变了这样的代码：

```
 System.Threading.Timer timer;
    GUI.WelcomeBox welcomeBox;
    public MainForm()
    {
        this.Visible = false;
        //Showing welcome box
        welcomeBox = new GUI.WelcomeBox();
        welcomeBox.Visible = true;
        this.Visible = false;

        timer = new System.Threading.Timer(new System.Threading.TimerCallback(delayedActions),null,5000,2000);
    }

    private void delayedActions(object o)
    {
        welcomeBox.Visible = false;
        welcomeBox.Close();
        timer.Dispose();

        InitializeComponent();
        // this line is unreachable, because of error
        refreshUI();
    } 
```

但发生错误`InitializeComponent()`：问题事件名称：CLR20r3

```
 Problem Signature 01: todoweeklyshedule.exe
  Problem Signature 02: 1.0.0.0
  Problem Signature 03: 4fc5385b
  Problem Signature 04: System.Windows.Forms
  Problem Signature 05: 4.0.0.0
  Problem Signature 06: 4ba1e14e
  Problem Signature 07: a11
  Problem Signature 08: 1b
  Problem Signature 09: System.ArgumentException
  OS Version:   6.1.7601.2.1.0.768.3
  Locale ID:    1033
  Additional Information 1: a1ee
  Additional Information 2: a1ee2874cedcaa72f2a8419ddd18697e
  Additional Information 3: a319
  Additional Information 4: a319510eabcccf7de47b58017b885ff3 
```

顺便说一句，MainForm 将与`this.Visible = false;`行一起显示。我打电话给 MainForm()`Application.Run(new MainForm());`是这个原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:29:46.350

在调用 InitialiseComponents 之前无法设置可见，您可能会解决这个问题，但您真正的问题是您的代码位于错误的位置。

将其全部移入 program.cs，并在 Application.Run(new MainForm()); 之前调用它 如果是我，我会将计时器移到欢迎框中，让事件处理程序关闭它并以模态方式显示它。

好吧，实际上这不是真的，如果是我，我不会这样做，因为我知道这会惹恼该应用程序的任何用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:14:58.230

将初始化组件移到 this.visible=false; 之前

```
 public MainForm()
  {
    InitializeComponent();
    this.Visible = false;
    //Showing welcome box
    welcomeBox = new GUI.WelcomeBox();
    welcomeBox.Visible = true;
    this.Visible = false;

    timer = new System.Threading.Timer(new System.Threading.TimerCallback(delayedActions),null,5000,2000); 
```

下一个最佳建议是将您的欢迎框作为主表单，然后将其更改为您的主表单，这将是一些重写，但值得。

最后的建议是加载您的主表单并将欢迎框称为 showdialog()，它会在您的计时器告诉它之后关闭。

# c# - 使用设置文件时，直接更新 app.config 不会产生任何结果

> ID：10806784
> 
> 赞同：0
> 
> 时间：2012-05-29T21:11:17.133
> 
> 标签：c#, .net, windows-console

我在我的一个控制台应用程序项目中使用了一个设置文件 (*.settings)。问题是如果我直接更新，设置文件生成的app.config，修改不生效。对于配置的任何更改，我需要打开代码并更新设置文件。这是预期的行为吗？

更新：我接受了西蒙的建议，完全放弃了设置文件。现在我只在项目中使用一个配置文件，该文件具有应用程序的入口点。现在事情简单多了。

# drupal-7 - 更改 drupal $base_path

> ID：10806785
> 
> 赞同：0
> 
> 时间：2012-05-29T21:11:27.933
> 
> 标签：drupal-7, drupal-modules, drupal-theming

我正在尝试安装一个 drupal 7 模块。它说如果站点不是 root，我必须更改 $base_path。我已经在本地机器上的 /localhost/drupal7/ 上安装了我的 drupal 站点。有人可以告诉我应该将我的 $base_path 更改为什么吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:25:10.107

您的基本路径将是安装 Drupal 的路径。在您的情况下`/localhost/drupal7/`。

我喜欢做的只是在我的主机文件中创建一个新条目：

```
# C:\Windows\System32\Drivers\etc\hosts

# Add this line
127.0.0.1 Localhost2 
```

然后为每个额外的网站添加 httpd.conf

```
<VirtualHost *:80>
   ServerName Localhost2
   DocumentRoot "c:/path/to/folder/Localhost2"
</VirtualHost> 
```

无论如何，如果您在Windows上，那就是这样。

# wcf - Ninject 和 WCF ServiceAuthorizationManager

> ID：10806789
> 
> 赞同：3
> 
> 时间：2012-05-29T21:12:04.437
> 
> 标签：wcf, dependency-injection, ninject, ioc-container, wcf-security

有谁知道我如何将存储库注入`ServiceAuthorizationManager`WCF 服务中的子类型？

我正在创建一个类，该类扩展`ServiceAuthorizationManager`并调用我的存储库中的方法以从数据库中获取数据，并且我希望存储库由 Ninject 注入到构造函数中。

但是，WCF 需要默认的无参数构造函数才能使用`ServiceAuthorizationManager`子类型。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:28:12.217

Hy，对于这样的情况，您可以使用属性注入。只需将您的存储库声明为具有类似于以下伪代码的注入属性的属性：

```
 public class MyServiceAuthorizationManager : ServiceAuthorizationManager
    {
         [Inject]
         IYourRepo Repository { get; set; }
    } 
```

然后，您可以对自定义 ServiceAuthorizationManager 进行正常解析

# python - 在 Numpy 中生成对称矩阵

> ID：10806790
> 
> 赞同：39
> 
> 时间：2012-05-29T21:12:11.593
> 
> 标签：python, random, matrix, numpy, adjacency-matrix

我正在尝试在 numpy 中生成对称矩阵。具体来说，这些矩阵将具有随机位置条目，并且每个条目中的内容可以是随机的。沿着主对角线，我们不关心那里有什么实体，所以我也将它们随机化。

我采用的方法是首先生成一个 nxn 全零矩阵，然后简单地循环遍历矩阵的索引。但是，考虑到循环在 python 中相对昂贵，我想知道是否可以在不使用 python 的 for 循环的情况下实现相同的目标。

numpy 中是否有一些东西可以让我更有效地实现我的目标？

这是我当前的代码：

```
import numpy as np
import random

def empty(x, y):
    return x*0

b = np.fromfunction(empty, (n, n), dtype = int)

for i in range(0, n):
    for j in range(0, n):
        if i == j:
            b[i][j] = random.randrange(-2000, 2000)
        else:
            switch = random.random()
            random.seed()
            if switch > random.random():
                a = random.randrange(-2000, 2000)
                b[i][j] = a
                b[j][i] = a
            else:
                b[i][j] = 0
                b[j][i] = 0 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-29T21:26:29.703

你可以这样做：

```
import numpy as np

N = 100
b = np.random.random_integers(-2000,2000,size=(N,N))
b_symm = (b + b.T)/2 
```

您可以在哪里选择您想要的`np.random`或等效 scipy 模块中的任何发行版。

**更新：**如果您正在尝试构建类似图形的结构，请务必查看 networkx 包：

[http://networkx.lanl.gov](http://networkx.lanl.gov)

它有许多内置例程来构建图表：

[http://networkx.lanl.gov/reference/generators.html](http://networkx.lanl.gov/reference/generators.html)

此外，如果您想添加一些随机放置的零，您始终可以生成一组随机索引并将值替换为零。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-12-06T11:56:26.007

我最好这样做：

```
a = np.random.rand(N, N)
m = np.tril(a) + np.tril(a, -1).T 
```

因为在这种情况下，矩阵的所有元素都来自**相同的分布**（在这种情况下是均匀的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-21T15:59:38.267

矩阵中有一个数学属性可以轻松创建这样的结构：**AT * A**其中 A 是行向量，**At**是转置（列向量）。这总是返回一个总是可逆的平方正定对称矩阵，所以你不用担心空枢轴;）

```
# any matrix algebra will do it, numpy is simpler
import numpy.matlib as mt

# create a row vector of given size
size  = 3
A = mt.rand(1,size)

# create a symmetric matrix size * size
symmA = A.T * A 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-16T08:06:00.487

```
import numpy as np

n = 5
M = np.random.randint(-2000,2000,(n,n))
symm = M@M.T
# test for symmetry
print(symm == symm.T) 
```

这对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T19:22:55.640

如果您不介意在对角线上使用零，则可以使用以下代码段：

```
def random_symmetric_matrix(n):
    _R = np.random.uniform(-1,1,n*(n-1)/2)
    P = np.zeros((n,n))
    P[np.triu_indices(n, 1)] = _R
    P[np.tril_indices(n, -1)] = P.T[np.tril_indices(n, -1)]
    return P 
```

请注意，由于对称性，您只需要生成 n*(n-1)/2 个随机变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-16T12:09:08.657

我正在使用以下函数使矩阵在垂直和水平方向上对称：

```
def make_sym(a):
    w, h = a.shape
    a[w - w // 2 :, :] = np.flipud(a[:w // 2, :])
    a[:, h - h // 2:] = np.fliplr(a[:, :h // 2]) 
```

让我们看看它是如何工作的：

```
>>> m = (np.random.rand(10, 10) * 10).astype(np.int)
>>> make_sym(m)
>>> m
array([[2, 7, 5, 7, 7, 7, 7, 5, 7, 2],
       [6, 3, 9, 3, 6, 6, 3, 9, 3, 6],
       [1, 4, 6, 7, 2, 2, 7, 6, 4, 1],
       [9, 2, 7, 0, 8, 8, 0, 7, 2, 9],
       [5, 5, 6, 1, 9, 9, 1, 6, 5, 5],
       [5, 5, 6, 1, 9, 9, 1, 6, 5, 5],
       [9, 2, 7, 0, 8, 8, 0, 7, 2, 9],
       [1, 4, 6, 7, 2, 2, 7, 6, 4, 1],
       [6, 3, 9, 3, 6, 6, 3, 9, 3, 6],
       [2, 7, 5, 7, 7, 7, 7, 5, 7, 2]]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-08T20:30:47.270

这里有一个优雅的答案，它产生一个矩阵，其中所有条目都遵循相同的分布。但是，该答案会丢弃`(n-1)*n/2`随机数而不使用它们。

如果您想让所有值都遵循相同的分布，一次生成它们并只生成您要使用的值，那么您可以运行以下命令：

```
>>> import numpy as np
>>> n = 5
>>> r = np.random.rand(n*(n+1)//2)
>>> sym = np.zeros((n,n))
>>> for i in range(n):
...     t = i*(i+1)//2
...     sym[i,0:i+1] = r[t:t+i+1]
...     sym[0:i,i] = r[t:t+i]
... 
>>> print(sym)
[[0.03019945 0.30679756 0.85722724 0.78498237 0.56146757]
 [0.30679756 0.46276869 0.45104513 0.28677046 0.10779794]
 [0.85722724 0.45104513 0.62193894 0.86898652 0.11543257]
 [0.78498237 0.28677046 0.86898652 0.13929717 0.45309959]
 [0.56146757 0.10779794 0.11543257 0.45309959 0.5671571 ]] 
```

这里的想法是按照三角形数字来了解之前已经使用了随机向量中的多少元素。给定此`t`值，将当前行填充到对角线并包括对角线，将当前列填充到（但不包括）对角线。

# c# - 访问集合内的第一个元素

> ID：10806793
> 
> 赞同：2
> 
> 时间：2012-05-29T21:12:19.293
> 
> 标签：c#

如果我在像这样只需要该 Photos 集合中的第一个元素时发送名为 Property 的对象，该对象具有 Photos 集合，那么这种方法是否会加载集合中的所有元素而不是 assoc。只有我想要的第一个，或者这种方法是我需要的，首先从集合中加载。

```
public PropertyHPViewModel(Property x)
{
    Id = x.Id;
    Created = x.Created;
    Title = x.Title;
    Photo = x.Photos.First();
} 
```

从分析器生成的 Sql

```
SELECT photos0_.PropertyId    as PropertyId1_,
       photos0_.Id            as Id1_,
       photos0_.Id            as Id1_0_,
       photos0_.ImageData     as ImageData1_0_,
       photos0_.ImageMimeType as ImageMim3_1_0_,
       photos0_.PropertyId    as PropertyId1_0_
FROM   Photo photos0_
WHERE  photos0_.PropertyId = 129 /* @p0 */ 
```

**更新** 了，因为我有 20 个这样生成的查询，它们都只在最后一行有所不同

`WHERE photos0_.PropertyId = xxx /* @p0 */`

其中数字是照片 id 对象，我必须补充一点，根据 nhibernate 分析器，我对此查询有 SELECT N+1 ALERT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:30:19.277

如果 x.Photos 不是 IQueryable，则 .First() 调用无法参与 ORM 发送的 SQL 查询。我怀疑是这种情况。

唯一的解决方案是从 ISession 手动构造查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:22:17.077

当表达式树被折叠时，NHibernate 应该生成 SQL 以仅检索单个实体。

# c# - 如何通过 SSH 从 C# 连接到 mysql

> ID：10806799
> 
> 赞同：13
> 
> 时间：2012-05-29T21:12:54.487
> 
> 标签：c#, mysql, .net, database, connection-string

如何通过 C# 连接到 mysql 数据库，

这是我现在的连接字符串：

```
connectionString="server=localhost;port=3306;user id=root;Password=*****;database=Data" providerName="MySql.Data.MySqlClient" 
```

如何以这种形式放置 SSH 字符串，因为它需要类似于：

SSH主机名、SSH用户名、SSH密码、Mysql主机名、Mysql用户名、Mysql密码、端口

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:24:42.713

我不认为 MySql 和 MySqlClient 支持这样的事情。连接字符串专门用于数据库。您将需要一个 SSH 客户端首先连接到 SSH 服务器，然后找到一种通过该隧道路由 Sql 连接的方法。

[http://www.howtogeek.com/howto/ubuntu/access-your-mysql-server-remotely-over-ssh/](http://www.howtogeek.com/howto/ubuntu/access-your-mysql-server-remotely-over-ssh/)

我认为没有用于处理 SSH 连接的 Microsoft .Net 库，但 Code Plex 上有一个开源项目可能会有所帮助。

[http://sshnet.codeplex.com/](http://sshnet.codeplex.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-22T16:34:18.700

```
 // using Renci.sshNet 

        PasswordConnectionInfo connectionInfo = new PasswordConnectionInfo(hostAdres, hostNaam, wachtwoord);
        connectionInfo.Timeout = TimeSpan.FromSeconds(30);
        var client = new SshClient(connectionInfo);
        client.Connect();
        ForwardedPortLocal portFwld = new ForwardedPortLocal("127.0.0.1", Convert.ToUInt32(hostpoort), DataBaseServer, Convert.ToUInt32(remotepoort)); client.AddForwardedPort(portFwld);
        portFwld.Start();

        var connection = new MySqlConnection("server = " + "127.0.0.1" + "; Database = database; password = PWD; UID = yourname; Port = 22");
        connection.Open(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-08T18:13:48.083

我尝试了前面的所有步骤，但没有成功，对我有用的方法如下：

```
 try
            {
                using(var client = new SshClient("ssh server id", "sshuser", "sshpassword")) // establishing ssh connection to server where MySql is hosted
                {
                    client.Connect();
                    if (client.IsConnected)
                    {
                        var portForwarded = new ForwardedPortLocal("127.0.0.1", 3306, "127.0.0.1", 3306);
                        client.AddForwardedPort(portForwarded);
                        portForwarded.Start();
                        using (MySqlConnection con = new MySqlConnection("SERVER=127.0.0.1;PORT=3306;UID=someuser;PASSWORD=somepassword;DATABASE=DbName"))
                        {
                            using (MySqlCommand com = new MySqlCommand("SELECT * FROM tableName", con))
                            {
                                com.CommandType = CommandType.Text;
                                DataSet ds = new DataSet();
                                MySqlDataAdapter da = new MySqlDataAdapter(com);
                                da.Fill(ds);
                                foreach (DataRow drow in ds.Tables[0].Rows)
                                {
                                    Console.WriteLine("From MySql: " + drow[1].ToString());
                                }
                            }
                        }
                        client.Disconnect();
                    }
                    else
                    {
                        Console.WriteLine("Client cannot be reached...");
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-08T11:32:59.273

对我有效的代码，在 Amazon Web Services 中使用 sshkeyfile (*.pem)、C# Mysql -> Aurora：

```
class Program
{

    static string SshHostName = "***";
    static string SshUserName = "***";
    static string SshKeyFile = @"C:\Work\pems\***.pem";

    static string Server = "***.eu-west-1.rds.amazonaws.com";
    static uint Port = 3306;
    static string UserID = "***";
    static string Password = "***";
    static string DataBase = "***";

    static void Main(string[] args)
    {

        ConnectionInfo cnnInfo;
        using (var stream = new FileStream(SshKeyFile, FileMode.Open, FileAccess.Read))
        {
            var file = new PrivateKeyFile(stream);
            var authMethod = new PrivateKeyAuthenticationMethod(SshUserName, file);
            cnnInfo = new ConnectionInfo(SshHostName, 22, SshUserName, authMethod);
        }

        using (var client = new SshClient(cnnInfo))
        {
            client.Connect();
            if (client.IsConnected)
            {
                var forwardedPort = new ForwardedPortLocal("127.0.0.1", Server, Port);
                client.AddForwardedPort(forwardedPort);
                forwardedPort.Start();

                string connStr = $"Server = {forwardedPort.BoundHost};Port = {forwardedPort.BoundPort};Database = {DataBase};Uid = {UserID};Pwd = {Password};";

                using (MySqlConnection cnn = new MySqlConnection(connStr))
                {
                    cnn.Open();

                    MySqlCommand cmd = new MySqlCommand("SELECT * FROM PostalCodes LIMIT 25;", cnn);

                    MySqlDataReader reader = cmd.ExecuteReader();

                    while (reader.Read())
                        Console.WriteLine($"{reader.GetString(1)}, {reader.GetString(2)}, {reader.GetString(3)}");

                    Console.WriteLine("Ok");

                    cnn.Close();
                }

                client.Disconnect();
            }

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T21:20:48.937

您不能在连接字符串中指定 SSH 代理或 SSH 凭据，您必须先建立 SSH 连接，然后使用标准连接字符串，就像您在问题中所使用的那样。

要通过 C# 建立 SSH 连接，您可以使用诸如[sharpSsh 之](http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)类的库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-17T05:56:00.633

这是最终代码:) 对我有用。

```
 PasswordConnectionInfo connectionInfo = new PasswordConnectionInfo("host", "user", "password");
    connectionInfo.Timeout = TimeSpan.FromSeconds(30);
    var client = new SshClient(connectionInfo);
    client.Connect();
    var x = client.IsConnected;
    ForwardedPortLocal portFwld = new ForwardedPortLocal("127.0.0.1"/*your computer ip*/, "127.0.0.1" /*server ip*/, 3306 /*server mysql port*/);
    client.AddForwardedPort(portFwld);
    portFwld.Start();
    //// using Renci.sshNet 
    var connection = new MySqlConnection("server = " + "127.0.0.1" /*you computer ip*/ + "; Database = DataBaseName; UID = ?; PWD =?; Port = " + portFwld.BoundPort /*very important !!*/);
    connection.Open();
    var k = connection.State;

    connection.Clone();
    client.Disconnect(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-24T05:19:24.200

```
After so much of research the below code worked for me
Hope it may help you also
public static string GetRDSConnectionString()
        {
            string Database = "<yourdb>";
            string value = "";      
            string mysqlport = "3306";           
            uint sqlport = Convert.ToUInt32(mysqlport);
            string mysqlhostname = "<aws-hostname.com>";
            string ssh_host = "100.1.1.1";
            int ssh_port = 22;
            string ssh_user = "ubuntu";
            var keyFile = new PrivateKeyFile(@"C:\Automation\LCI\harvest-dev-kp.pem");
            var keyFiles = new[] { keyFile };
            var uname = "ubuntu";
            MySqlConnection con = null;
            MySqlDataReader reader = null;
            var methods = new List<AuthenticationMethod>();
            methods.Add(new PasswordAuthenticationMethod(uname, ""));
            methods.Add(new PrivateKeyAuthenticationMethod(uname, keyFiles));
            ConnectionInfo conInfo = new ConnectionInfo(ssh_host, ssh_port, ssh_user, methods.ToArray());
            conInfo.Timeout = TimeSpan.FromSeconds(1000);
            using (var client = new SshClient(conInfo))
            {
                try
                {
                    client.Connect();
                    if (client.IsConnected)
                    {
                        Console.WriteLine("SSH connection is active");
                    }
                    else
                    {
                        Console.WriteLine("SSH connection is inactive");
                    }
                    string Localport = "3306";
                    string hostport = "3306";
                    var portFwdL = new ForwardedPortLocal("127.0.0.1", Convert.ToUInt32(hostport), mysqlhostname, Convert.ToUInt32(Localport));
                    client.AddForwardedPort(portFwdL);
                    portFwdL.Start();
                    if (portFwdL.IsStarted)
                    {
                        Console.WriteLine("port forwarding is started");
                    }
                    else
                    {
                        Console.WriteLine("port forwarding failed");
                    }                    
                    string connectionstring = "Data Source=localhost;Initial Catalog=<DBNAME>I;User ID=<USERNAME>;Password=<PASSWORD>;SslMode=none";

                    con = new MySqlConnection(connectionstring);
                    MySqlCommand command = con.CreateCommand();
                    command.CommandText = "<YOUR QUERY>";
                    try
                    {
                        con.Open();
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e.Message);
                    }
                    reader = command.ExecuteReader();
                    while (reader.Read())
                    {
                        value = reader["<db_col_name>"].ToString();

                    }
                    client.Disconnect();
                }
                catch (SocketException ex)
                {
                    Console.WriteLine(ex.Message);
                }
                finally
                {

                    Console.WriteLine("SSh Disconnect");
                }

            }

            //Console.ReadKey();
            return value;
        }
    } 
```

# xslt - 如何在文件上传 ASP.Net MVC 上使用 XSLT

> ID：10806800
> 
> 赞同：0
> 
> 时间：2012-05-29T21:13:05.353
> 
> 标签：xslt

我需要能够在文件上传时上传 KML 文件，使用 XSLT 将其转换为 GML，然后将其保存到我的 SQL 2008 数据库中。我不知道该怎么做。任何帮助表示赞赏。

这是我到目前为止的代码：

```
public ActionResult Create(GeoRegion georegion, HttpPostedFileBase Polygon)
    {
        if (ModelState.IsValid)
        {

            if (Polygon.ContentLength > 0)
            {
                var fileName = Path.GetFileName(Polygon.FileName);
                var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
                Polygon.SaveAs(path);

            }

            db.GeoRegions.Add(georegion);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(georegion);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:18:14.167

```
// Create the XslCompiledTransform object
var transform = new XslCompiledTransform(); 

// Load the stylesheet file
transform.Load(xslFilePath);                

// Transform the XML file and store the output
transform.Transform(sourceFilePath, targetFilePath); 
```

[http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx)

# iframe - 有没有办法告诉可访问性验证软件忽略不属于我的 iframe 中的内容？

> ID：10806804
> 
> 赞同：0
> 
> 时间：2012-05-29T21:13:37.883
> 
> 标签：iframe, web, accessibility

我有跨域 iframe，它缺少一些可访问性属性。现在的问题是因为我无权访问该跨域 iframe 以及它是如何创建的。有没有办法我可以在我的 HTML 文档中说让验证工具（例如 Worldspace FireEyes）知道忽略该 iframe 以解决任何可访问性问题 - 这样我的页面就不会因为其他内容而被标记为错误？

我试图找到任何可以完全忽略其中内容的标签，以便网络可访问性验证器软件完全忽略它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:33:01.250

看看[“带有范围定义的部分页面分析”](http://www.youtube.com/watch?v=cHuAMlrxepg)（YouTube 视频）。在该视频中，演示者将网站的特定部分定义为“范围”。然后他能够

1.  让 Worldspace FireEyes 只分析定义的范围
2.  **分析除定义范围外**的整个文档（他在选择范围时提到了它）

第二个选项听起来可以帮助你。

如果您尝试标记您的站点，以便 Worldspace FireEyes 的外部用户获得“绿条”，我认为这是不可能的。您在网站上向用户展示该内容，因此默认情况下会对其进行分析。

您是否正在尝试将“绿色条”展示给客户？**描述对他们的 iframe 约束。**

是否在 iframe 中发现了太多问题，导致您无法有效地处理验证结果？**使用范围。**

# ip - 系统日志文件中的唯一 ip 连接

> ID：10806806
> 
> 赞同：0
> 
> 时间：2012-05-29T21:13:46.010
> 
> 标签：ip, unique, syslog

我正在分析由于 DDOS 攻击而创建的系统日志文件，并希望创建一个唯一 ip 连接列表。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:58:26.353

假设 IP/主机名在字段 4 中：

```
cat /var/log/messages | cut -d\  -f 4 -|sort|uniq 
```

示例日志消息：

```
May 29 18:27:30 10.101.11.31 Myprog[5291]: 20856: Mar 31 06:14:38 EDT: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet1/0/29, changed state to up 
```

您可能还想尝试像[LogZilla](http://www.logzilla.pro)这样的工具，这将使分析这些事情变得更加容易。

# ios - Core Audio 同时运行两个 AudioQueue，连续录制/播放

> ID：10806813
> 
> 赞同：1
> 
> 时间：2012-05-29T21:14:53.127
> 
> 标签：ios, core-audio

因此，假设我想通过设置所有内容并在我的输入回调中接收音频数据的常规过程来记录到我的输入队列中。我不想将其写入文件，而是想开始在某处短暂缓冲，然后将其提供给输出队列，该队列将在我的输入队列后不久开始运行，消耗我将从输入队列缓冲的数据，播放我正在录制的音频。这可能吗？我已尝试实现此功能，但在启动输出队列时遇到问题，我初始化并启动它时未报告任何错误，但在调用 AudioQueueStart 函数后，我提供的输出回调永远不会被调用。也许这是我的实现的一个问题，但我只是想确保我没有首先陷入死胡同。

谢谢

编辑：添加代码

我在命令行应用程序中运行此 POC。我主要初始化一个记录器：

```
 Recorder recorder = {0};

    AudioStreamBasicDescription asbd;
    memset(&asbd, 0, sizeof(asbd));

    asbd.mFormatID  = kAudioFormatLinearPCM;
    asbd.mSampleRate = SAMPLE_RATE;
    asbd.mBytesPerPacket = 4;
    asbd.mBytesPerFrame = 4;
    asbd.mChannelsPerFrame = 2;
    asbd.mBitsPerChannel = 16;
    asbd.mFramesPerPacket = 1;
    asbd.mFormatFlags = kAudioFormatFlagIsBigEndian |
    kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;

    AudioQueueRef queue = {0};

    reportError(AudioQueueNewInput(&asbd, MyAQInputCallback, &recorder, NULL, NULL, 0, &queue), "AudioQueue Input Create");

     int bufferSize = 88200;

    for (int i = 0; i < BUFFER_COUNT; i++) {

        AudioQueueBufferRef retBuffer;
        reportError(AudioQueueAllocateBuffer(queue, bufferSize, &retBuffer), "Error Allocating Buffer");
        reportError(AudioQueueEnqueueBuffer(queue, retBuffer, 0, NULL), "Error enqueuing buffer");

    }

    recorder.running = YES;
    reportError(AudioQueueStart(queue, NULL), "Start Failed");
    CFRunLoopRunInMode(kCFRunLoopDefaultMode, 3, false); 
```

我声明了一个全局 void 指针数组来保存传入的数据，这将改变我只是想看看我是否可以让它运行：

```
 static void *buffer[1000]; 
```

我的输入回调。这确实会被调用到某个点，所以录音机对我来说一直运行良好我一直在录制文件等：

```
 static void MyAQInputCallback(void *inUserData,
                          AudioQueueRef inQueue,
                          AudioQueueBufferRef inBuffer,
                          const AudioTimeStamp *inStartTime,
                          UInt32 inNumPackets,
                          const AudioStreamPacketDescription *inPacketDesc)
{ 

Recorder *recorder = (Recorder *) inUserData;

buffer[globalBufferIndex] = (short *)inBuffer->mAudioData;
++globalBufferIndex;

if (globalBufferIndex == 1000) {
    globalBufferIndex = 0;
    clearBuffer();
}
if ( recorder->running ) {
    reportError(AudioQueueEnqueueBuffer(inQueue, inBuffer, 0, NULL), "CallbackEnqueue Failed");
}
} 
```

基本上这里的目标只是拉出块并将其存储在缓冲区中。我相信这可以正常工作。

播放器初始化：

```
Player player = {0};
AudioQueueRef que = {0};

reportError(AudioQueueNewOutput(&asbd, MyAQOutputCallback, &player, NULL, NULL, 0, &que), "New Output Error");

AudioQueueBufferRef buffers[BUFFER_COUNT];

 for (int i = 0; i < BUFFER_COUNT; ++i) {

        reportError(AudioQueueAllocateBuffer(que, bufferSize, &buffers[i]), "Error Buffer Allocating");

        MyAQOutputCallback(&player, que, buffers[i]);

  }

 reportError(AudioQueueStart(que, NULL), "Start Failed"); 
```

播放器回调：

```
static void MyAQOutputCallback(void *inUserData, AudioQueueRef inAQ, AudioQueueBufferRef   inCompleteAQBuffer)
{ 

Player *player;

player = (Player *) inUserData;

short *chunk = (short *) inCompleteAQBuffer->mAudioData;
chunk = buffer[globalOutputBufferIndex];
globalOutputBufferIndex++;

AudioQueueEnqueueBuffer(inAQ, inCompleteAQBuffer, sizeof(chunk)/4, player->packetDescs);

} 
```

目标是将全局缓冲区中的内容存储到队列中并将其发送出去。

所以我知道这不是一个很好的结构，但是当我运行它时我得到的行为是记录器将运行它调用输入回调并存储数据，但是然后我开始播放器初始化并且输出回调被调用 3 次（我的 for 循环调用）并且再也不会被调用。最后我通过调用 getchar() 来阻止应用程序的终止。我让播放器从文件中读取并播放它，显然这有很大不同。我的录音机继续工作，但我的播放器回调从未被调用。我认为这可能是我的描述有问题，但在分配过程中从未向我报告错误。这里的任何指导都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:48:44.597

由于似乎没有人知道这一点，这里有一个非常好的示例项目的链接：[https ://github.com/alexbw/novocaine](https://github.com/alexbw/novocaine)

# svg - 为给定图像自动生成边界多边形

> ID：10806817
> 
> 赞同：3
> 
> 时间：2012-05-29T21:15:15.720
> 
> 标签：svg, polygon, detection

我正在尝试创建一个点列表，旨在尽可能接近地描述给定图像的边界多边形。多边形将用于计算两个图形之间的碰撞。所以它们必须同时准确和小（就每个多边形的点而言）。

我的基本图像（例如 PNG）总是单色图片，中间有一个形状不同的黑色“点”。我试图通过使用`autotrace`将我的图像转换为 svg 的 cli 工具来实现这一点。我目前正在解析 svg 中的路径以获取边界多边形的坐标。

该解决方案有效，但效率很低。下面显示的自动跟踪命令生成的点是准确的。

```
autotrace -output-format svg --corner-threshold=360 --remove-adjacent-corners  --despeckle-level=20 -output-file sample.svg sample.gif 
```

对于附加到这篇文章的示例形状，这会产生约 800 个点，其中 - 理论上 - 4 就足够了（每个“角落”一个）。

![示例形状](../Images/98831c7048bac42b882015a5714256f1.png)

由于我不在运行时插值曲线，因此生成的 svg 必须仅包含线条。

如何获得足够准确但占用空间小的适当边界多边形？

# php - 局域网唤醒（php）无法使其工作

> ID：10806819
> 
> 赞同：1
> 
> 时间：2012-05-29T21:15:31.487
> 
> 标签：php, wake-on-lan

试图让 php 在局域网上唤醒工作（通过互联网）。

通过 wolcmd 程序，我可以使用以下命令从 Internet 成功打开服务器：

```
/Users/usr/Downloads/wolcmd [mac] [public IP] 255.255.255.255 1009 
```

所以没有路由器/服务器问题。

我在互联网上找到了几个 php 脚本，但它们都不起作用！:S

试过：

```
<?php

flush();

function WakeOnLan($addr, $mac,$socket_number) {    
  $addr_byte = explode(':', $mac);
  $hw_addr = '';

  for ($a=0; $a <6; $a++) $hw_addr .= chr(hexdec($addr_byte[$a]));

  $msg = chr(255).chr(255).chr(255).chr(255).chr(255).chr(255);

  for ($a = 1; $a <= 16; $a++) $msg .= $hw_addr;

  // send it to the broadcast address using UDP
  // SQL_BROADCAST option isn't help!!
  $s = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);

  if ($s == false) {
    echo "Error creating socket!\n";
    echo "Error code is '".socket_last_error($s)."' - " . socket_strerror(socket_last_error($s));
    return FALSE;
  } else {
    // setting a broadcast option to socket:
    $opt_ret = socket_set_option($s, 1, 6, TRUE);

    if ($opt_ret < 0) {
      echo "setsockopt() failed, error: " . strerror($opt_ret) . "\n";
      return FALSE;
    }

    if (socket_sendto($s, $msg, strlen($msg), 0, $addr, $socket_number)) {
      echo "Magic Packet sent successfully!";
      socket_close($s);
      return TRUE;
    } else {
      echo "Magic packet failed!";
      return FALSE;
    }
  }
}

// Port number where the computer is listening. Usually, any number between 1-50000 will do. Normally people choose 7 or 9.
$socket_number = "1009";
// MAC Address of the listening computer's network device
$mac_addy = "XX:XX:XX:XX:XX:XX";
// IP address of the listening computer. Input the domain name if you are using a hostname (like when under Dynamic DNS/IP)
$ip_addy = gethostbyname("name.dyndns.org");

WakeOnLan($ip_addy, $mac_addy,$socket_number)

?> 
```

这个脚本给了我成功，但服务器没有唤醒。加上没有办法指定：255.255.255.255

我还尝试在笔记本电脑（不是服务器）上使用数据包嗅探器，但没有看到任何 UDP 数据包到达。

我试过的另一个脚本是这样的：

```
<?php
//
// ################## user variables... ##################
// Friendly name for device, example "My Computer".
$device     = "Server";
// IP address of device, example "x.x.x.x".
$deviceip   = gethostbyname("name.dyndns.org");
// TCP Port on device to check, example "3389" = RDP, "80" = WebServer.
$deviceport = "1009";
// MAC address of NIC1 on device, example "00:00:00:00:00:00" or "00-00-00-00-00-00".
$devicemac1 = "XX:XX:XX:XX:XX:XX";
// MAC address of NIC2 on device, example "00:00:00:00:00:00" or "00-00-00-00-00-00". - Optional set to "" if NIC2 not required.
$devicemac2 = "";
// Number of times to attempt to connect to port on device after magic packet sent, example "10"
$maxtries   = "5";
// Broadcast address of network, example ""x.x.x.x". ("255.255.255.255" works in most cases.)
$broadcast  = "255.255.255.255";
// ICMP port number, default "7".
$udport     = "1009";
// Timeout value for re-tries (in seconds), default "10".
$timeout    = "5";
// #######################################################
//
// ##### Read in variables from url #####
//
// $frame - used to determine which content to display when executed.
$frame      = $_GET[ "frame" ];
// $tries - used to determine number of attempts at checking port beetween reloads, compared with maxtries.
$tries      = $_GET[ "tries" ];
// $pageurl - obtain URL used to access file, used when creating frameset & setting reloads.
$pageurl    = pageurl();
// Process variables used in frame2, increments tries & sets status to Success(1) or Failed(2)
if ( $frame == 2 ) {
                processurl();
}
// ###### Functions ######
//
// function pageurl( ) - Returns URL of page via PHP variables.
function pageurl() {
  $pageurl = "HTTP";

  if ( $_SERVER[ "HTTPS" ] == "on" ) {
    $pageurl .= "S";
  }

  $pageurl .= "://";

  if ( $_SERVER[ "SERVER_PORT" ] != "80" ) {
    $pageurl .= $_SERVER[ "SERVER_NAME" ] . ":" . $_SERVER[ "SERVER_PORT" ] . $_SERVER[ "REQUEST_URI" ];
  } else {
    $pageurl .= $_SERVER[ "SERVER_NAME" ] . $_SERVER[ "REQUEST_URI" ];
  }

  $urlarts = explode( "?", $pageurl );
  $pageurl = $urlarts[ "0" ];
  return $pageurl;
}

//  function processurl( ) - Processes variables used in frame2, increments tries & sets status to Success(1) or Failed(2)
function processurl() {
  global $status, $tries, $maxtries;

  if ( $status == 0 && $tries < $maxtries - 1 ) {
    $tries = $tries + 1;
  } else {
    $status = 2;
  }

  if ( portcheck() == 0 ) {
    $status = 1;
  }
}

//  function wakeonlan() - Attempts to send WoL packet and returns outcome.
function wakeonlan( $device, $mac ) {
  global $broadcast, $udport;
  $mac            = ereg_replace( "[^A-Za-z0-9]", ":", $mac );
  $broadcast_byte = explode( ':', $mac );
  $hw_addr        = '';

  for ( $a = 0; $a < 6; $a++ )
    $hw_addr .= chr( hexdec( $broadcast_byte[ $a ] ) );

  $msg = chr( 255 ) . chr( 255 ) . chr( 255 ) . chr( 255 ) . chr( 255 ) . chr( 255 );

  for ( $a = 1; $a <= 16; $a++ )
    $msg .= $hw_addr;

  $s = socket_create( AF_INET, SOCK_DGRAM, SOL_UDP );

  if ( $s == false ) {
    $content = "Error creating socket!\n";
  } else {
    // setting a broadcast option to socket:
    $opt_ret = socket_set_option( $s, 1, 6, true );

    if ( $opt_ret < 0 ) {
      $content = "setsockopt() failed, error: " . strerror( $opt_ret ) . "\n";
    }

    if ( socket_sendto( $s, $msg, strlen( $msg ), 0, $broadcast, $udport ) ) {
      $content = "WoL packet sent to mac address " . $mac . "...\n";
      socket_close( $s );
    } else {
      $content = "Failed to send WoL packet!";
    }
  }
  return $content;
}

//  function portcheck( ) - Attempts to connect to TCP port on the device via a Socket, returns $errno.
function portcheck() {
  global $deviceip, $deviceport;
  $file = fsockopen( $deviceip, $deviceport, $errno, $errstr, 50 );

  if ( $errno == 0 ) {
    fclose( $file );
  }
  return $errno;
}

// function htmlheader( ) - Returns HTML Header for TITLE and if Frame2 REFRESH set.
function htmlheader() {
  global $device, $frame, $tries, $maxtries, $status, $pageurl, $timeout;
  // global "custom" header settings
  $content = "<TITLE>PHP WoL ($device) - by PRThomasUK </TITLE>\n";

  //generate refresh header for frame2.
  if ( $frame == 2 && $status == 0 ) {
    $content .= "<META HTTP-EQUIV=\"refresh\" CONTENT=\"$timeout;url=$pageurl?frame=$frame&tries=$tries\">\n";
  }
  return $content;
}
// function htmlheader( ) - Returns HTML content for mainpage, frame1 & frame2 based on value of $frame.
function htmlcontent() {
  global $pageurl, $device, $deviceip, $deviceport, $devicemac1, $devicemac2, $frame, $tries, $maxtries, $status;

  if ( $frame == 2 ) {
    if ( $status == 0 ) {
      $content = "<H3>$tries/$maxtries attempts to connect to $deviceip:$deviceport completed.</H3>\n";
    } elseif ( $status == 1 ) {
      $content = "<FONT COLOR=\"green\">\n";
      $content .= "<H1>SUCCESS!!!</H1>\n";
      $content .= "</FONT>\n";
      $content .= "<H3>Connection made to $device ($deviceip:$deviceport).</H3>\n";
    } else {
      $content = "<FONT COLOR=\"red\">\n";
      $content .= "<H1>FAILED...</H1>\n";
      $content .= "</FONT>\n";
      $content .= "<H3>Unable to connect to $device ($deviceip:$deviceport).</H3>\n";
    }
  } elseif ( $frame == 1 ) {
    $content = "<FONT COLOR=\"navy\">\n";
    $content .= "<H1>PHP WoL ($device)</H1>\n";
    $content .= "</FONT>\n";
    $content .= wakeonlan( $device, $devicemac1 );

    if ( $devicemac2 ) {
      $content .= "<BR>\n";
      $content .= wakeonlan( $device, $devicemac2 );
    }
  } else {
    $content = "<FRAMESET rows=\"130,*\" frameborder=0 border=0 framespacing=5>\n";
    $content .= "<FRAME SRC=\"$pageurl?frame=1\">\n";
    $content .= "<FRAME SRC=\"$pageurl?frame=2\">\n";
    $content .= "<NOFRAMES>\n";
    $content .= "<FONT COLOR=\"navy\">\n";
    $content .= "<H1>PHP WoL ($device)</H1>\n";
    $content .= "</FONT>\n";
    $content .= wakeonlan( $device, $devicemac1 );

    if ( $devicemac2 ) {
      $content .= "<BR>\n";
      $content .= wakeonlan( $device, $devicemac2 );
    }

    $content .= "<BR>\n";
    $content .= "<BR>\n";
    $content .= "<FONT COLOR=\"red\">\n";
    $content .= "<H2>Your browser does not support frames...</H2>\n";
    $content .= "</FONT>\n";
    $content .= "<H3>Status of $device will not be monitored!</H3>\n";
    $content .= "</NOFRAMES>\n";
    $content .= "</FRAMESET>\n";
  }
  return $content;
}
?> 
<!doctype html public "-//w3c//dtd html 4.01 transitional//en" "http://www.w3.org/tr/html4/loose.dtd"> 
<HTML> 
<HEAD> 
<?php
echo htmlheader();
?> 
<META NAME="author" CONTENT="PRThomasUK"> 
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=utf-8"> 
<META HTTP-EQUIV="cache-control" CONTENT="no-cache"> 
<META HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<META NAME="robots" CONTENT="none"> 
<META NAME="rating" CONTENT="safe for kids"> 
</HEAD> 
<?php
echo htmlcontent();
?> 
</HTML> 
```

这里有问题的是 $deviceport = "1009"; 如果我指定 80 它告诉我主机已关闭...但我已经知道:) 这就是我发送魔术包的原因吗？...

请问有这方面经验的人可以帮忙吗？我没有想法尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:19:01.963

您应该考虑使用这个简单的示例脚本：

苹果电脑 ：

```
<?php

system("/Users/usr/Downloads/wolcmd [mac] [public IP] 255.255.255.255 1009");

?> 
```

或 Linux ：

```
<?php

system("wakeonlan arg1 arg2 ...");

?> 
```

要在 Debian 上安装此命令并派生：

```
sudo apt-get install wakeonlan 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:54:39.970

**编辑 2015**

好吧，我已经清理了我的流程，这非常有效：[https ://github.com/wearede/wake-on-wan](https://github.com/wearede/wake-on-wan)

**老的**

现在可以了！我可以通过简单地访问一个子域 wol.domain.com 来唤醒我的服务器 :) 很酷。

经验教训：上面的脚本没有运行，因为我配置错误的路由器。正如您从脚本中看到的，正确的端口是 1009。在路由器上，我设置了传入端口 1009，将局域网重定向到端口 9。出于某种原因（可能是因为它是 UDP？） 1009->9 不起作用。我做了 1009->1009 并且服务器确实唤醒了！

我使用的最终代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>WOL</title>
</head>

<body>

<?php

//Creating magic packet sender function
flush();
//
function WakeOnLan($addr, $mac,$socket_number) {
  $addr_byte = explode(':', $mac);
  $hw_addr = '';
  for ($a=0; $a <6; $a++) $hw_addr .= chr(hexdec($addr_byte[$a]));
  $msg = chr(255).chr(255).chr(255).chr(255).chr(255).chr(255);
  for ($a = 1; $a <= 16; $a++) $msg .= $hw_addr;

  // send it to the broadcast address using UDP
  $s = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);

  if ($s == false) {

    echo "Error creating socket!\n";
    echo "Error code is '".socket_last_error($s)."' - " . socket_strerror(socket_last_error($s));
    return FALSE;

    } else {
    // setting a broadcast option to socket:
    $opt_ret = socket_set_option($s, 1, 6, TRUE);

    if($opt_ret <0) {
      echo "setsockopt() failed, error: " . strerror($opt_ret) . "\n";
      return FALSE;
      }
    if(socket_sendto($s, $msg, strlen($msg), 0, $addr, $socket_number)) {
      echo "Magic Packet sent successfully!";
      socket_close($s);
      return TRUE;
      } else {
      echo "Magic packet failed!";
      return FALSE;
      }

    }
  }

                    // Port number where the computer is listening (don't forget to ope port on router!).
                    $socket_number = "1009";
                    // MAC Address of the listening computer's NIC
                    $mac_addy = "XX:XX:XX:XX:XX:XX";
                    // IP address or domain name of the listening computer.
                    $ip_addy = gethostbyname("username.dyndns.org");

//check if server is up and running
$alive = fsockopen($ip_addy, 80, $errno, $errstr, 2);   

    if (!$alive) {
        echo "<h1>Server is Down!</h1>";
        echo "I will try to turn it on now...<br />";

        //initiate wol function
        WakeOnLan($ip_addy, $mac_addy,$socket_number);

    } else {
        echo "<h1>Server is Up!</h1>";
        fclose($alive);
    }

?>
</body>
</html> 
```

# java - 任何免费的 Java 库来执行 Cox 的比例风险回归

> ID：10806827
> 
> 赞同：1
> 
> 时间：2012-05-29T21:16:16.537
> 
> 标签：java, statistics, cox-regression

有没有人知道除了 JavaStat 之外有任何库有 Cox 的比例风险回归，它相当慢......请告诉我。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:00:32.670

[BDVal是一个具有](http://campagnelab.org/software/bdval/)[Cox 回归模式](http://campagnelab.org/software/bdval/reference-documentation/bdval-modes/cox-regression/)的开源 (GPL) Java 项目。

# php - 获取mysql视图关联的表名

> ID：10806829
> 
> 赞同：0
> 
> 时间：2012-05-29T21:16:19.547
> 
> 标签：php, mysql, sql

我知道 mysql 中的 VIEW 就像一个虚拟表，它与数据库中的 REAL 表相关联。我的问题是，如何使用代码找出 Mysql 视图与哪个表相关联？有没有像 php 或 sql 函数可以让我这样做？

谢谢

**注意**：我只想要与视图关联的表的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:19:00.667

我相信 SHOW CREATE VIEW 是您正在寻找的功能......

[http://dev.mysql.com/doc/refman/5.0/en/show-create-view.html](http://dev.mysql.com/doc/refman/5.0/en/show-create-view.html)

# facebook-graph-api - Graph API：检索用户重新共享的所有公共帖子

> ID：10806831
> 
> 赞同：0
> 
> 时间：2012-05-29T21:16:30.847
> 
> 标签：facebook-graph-api

我需要一种方法来检索特定用户重新共享的所有公共帖子。我正在尝试获取我的朋友重新分享的所有帖子的列表。请看这个[例子](http://i39.tinypic.com/20i8cqw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:43:50.127

我不相信有任何 API 可以专门返回它；尽管您可以从 API (/USER_ID/feed) 中提取用户的更新并找到那些附加了来自另一个页面的项目的帖子，

例如，我将页面中的照片共享到朋友的时间轴上，当我从 API 检索它时，它具有识别原始来源的结构：

```
 "properties": [
    {
      "name": "By", 
      "text": "Black Dynamite", 
      "href": "https://www.facebook.com/pages/Black-Dynamite/47850309260"
    } 
```

也许您可以使用它来查看用户时间轴上转发项目的原始来源？

# django-admin - 所有生成的 URL 上的 Django 前缀

> ID：10806836
> 
> 赞同：10
> 
> 时间：2012-05-29T21:17:06.767
> 
> 标签：django-admin

我的代理（nginx 公共端口 80）到 django（gunicorn wsgi localhost 端口 8000）剥离了应用程序“/app”的路径，因此 requests for`http://server/app/hello`显示为 django as`/hello`并且 requests for`http://server/app/admin`显示为 django as `/admin`。

问题是管理站点生成带有绝对 URL 的输出，例如`<form action="/admin/"...`在登录屏幕中。因此，用户看到了管理员登录屏幕，但它发布的`http://server/admin`内容不存在。（我有点希望它会使用相对 URL 并在任何位置工作。）

让管理页面像`form action="/app/admin/"`它在页面输出中生成的所有 URL 一样普遍地预先添加“/app”的最简单方法是什么？我希望在 Django 中内置一些东西，比如一个简单的定义，而不必创建特殊的过滤器然后重写模板来使用它们，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T02:50:35.797

请参阅 FORCE_SCRIPT_NAME 的文档：

[https://docs.djangoproject.com/en/dev/ref/settings/#force-script-name](https://docs.djangoproject.com/en/dev/ref/settings/#force-script-name)

将其设置为 '/app' 而不是默认值 None。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T18:54:25.983

最简单的方法是编写自己的 wsgi 调度程序，如下所示

```
def application(environ, request_response):
  # do whatever you want with path

  sys.path.append(path_to_django_project)
  os.environ['DJANGO_SETTINGS_MODULE'] = 'proj_name.settings'

  # pass control to django
  import django.core.handlers.wsgi
  app_entry_point = django.core.handlers.wsgi.WSGIHandler()
  return app_entry_point(environ,request_response) 
```

# java - Liferay 从文件入口到 java 文件对象

> ID：10806837
> 
> 赞同：3
> 
> 时间：2012-05-29T21:17:10.283
> 
> 标签：java, file, liferay, document-library

任何人都知道如何`DLFileEntry`使用 httpservlet 从 (http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portlet/documentlibrary/model/DLFileEntry.html) 检索 contentStream？

我尝试使用`DLFileEntry.getContentStream()`但它没有给我错误

```
com.liferay.portal.security.auth.PrincipalException: PermissionChecker not initialized 
```

我部分解决了设置硬编码我的用户 ID 的问题：

```
long userId=2

            PrincipalThreadLocal.setName(userId);

            User user = UserLocalServiceUtil.getUserById(userId);

            PermissionChecker permissionChecker;

                permissionChecker = PermissionCheckerFactoryUtil.create(user, false);

            PermissionThreadLocal.setPermissionChecker(permissionChecker); 
```

**这个解决方案的问题是如何获取真实的userId，如果用户是访客怎么办？**

我试过 Long.parseLong(req.getRemoteUser()); 但也失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:48:01.973

```
DLFileEntryLocalServiceUtil.getFile(userId, fileEntryId, version, incrementCounter) 
```

给你文件。你试过用这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:14:36.293

如果您使用的是 Liferay 6.1，那么以下代码将为您提供该 DLFileEntry 的 InputStream。

```
InputStream inputStream = DLFileEntryLocalServiceUtil.getFileAsStream(fileEntry.getUserId(), fileEntry.getFileEntryId(), fileEntry.getVersion()); 
```

但是，您遇到的错误似乎是由于您在调用服务器之前没有使用 Liferay 进行身份验证。

你怎么称呼这段代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:43:56.307

请使用 PermissionThreadLocal.getPermissionChecker() 获取当前登录用户当前状态的权限检查器对象。如果用户是访客，您仍然会获得 permissionChecker 对象。

-菲利克斯

# android - webview在后台运行

> ID：10806838
> 
> 赞同：0
> 
> 时间：2012-05-29T21:17:12.440
> 
> 标签：android, webview

我正在为 android 编写一个简单的应用程序，基本上它通过 webview 启动一个网站。当我运行这个应用程序时，即使在后台，它也会继续消耗数据。它很小（每 10 分钟几个字节）有没有办法防止这种数据消耗？换句话说，告诉 webview 小睡一下，停止消费数据，并在应用程序处于前台时唤醒（刷新页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:07:30.973

应用程序中运行了其他进程（javascript）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:25:36.210

您还可以在 webView 上调用 onPause() 以停止其上的 javascript。

# java - 如何获取多行 JSON 数据并将其放入某种数组中？

> ID：10806839
> 
> 赞同：-1
> 
> 时间：2012-05-29T21:17:18.457
> 
> 标签：java, php, android, mysql, json

我试图检索多行 JSON 数据并显示它，但我无法检索所有行，我只能获取数据库表的顶部（第一）行。我对如何将检索到的 JSON 数据放入一些中感到困惑排序数组并访问各个行？

我已经提供了与问题相关的代码。是的，在发布这个问题之前我已经做了足够的研究。我实际上发现了一个与我的问题相似但没有人回答的问题，所以我正在发布这篇文章。

谢谢你

下面是我的 Freebies.java 类的代码，我试图通过从 UserFunctions.java 类调用 getAllFreebies 函数来检索 JSONdata

```
UserFunctions uf = new UserFunctions();
JSONObject json = uf.getAllFreebies();
System.out.println(json); 
```

下面是 UserFunctions.java 类中函数 getAllFreebies() 的代码

```
public JSONObject getAllFreebies(){
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", getAllFreebies_tag));
    JSONObject json = jsonParser.getJSONFromUrl(getAllFreebiesURL,params);
    return json;
} 
```

下面是 index.php 中的代码，其中我从 DB_Function.php 文件调用 getFreebies() 函数

```
else if($tag = 'getAllFreebies'){
                    $getAllFreebies = $db->getFreebies($username,$catagory,$subcatagory,$title,$condition,$description,$address,$city,$state,$country,$zipcode,$posted_on);
                    if($getAllFreebies)
                    {
            $response["success"] = 1;
            $response["getAllFreebies"]["username"] = $getAllFreebies["username"];
            $response["getAllFreebies"]["catagory"] = $getAllFreebies["catagory"];
            $response["getAllFreebies"]["subcatagory"] = $getAllFreebies["subcatagory"];
            $response["getAllFreebies"]["title"] = $getAllFreebies["title"];
            $response["getAllFreebies"]["item_condition"] = $getAllFreebies["item_condition"];
            $response["getAllFreebies"]["description"] = $getAllFreebies["description"];
            $response["getAllFreebies"]["address"] = $getAllFreebies["address"];
            $response["getAllFreebies"]["city"] = $getAllFreebies["city"];
            $response["getAllFreebies"]["state"] = $getAllFreebies["state"];
            $response["getAllFreebies"]["country"] = $getAllFreebies["country"];
            $response["getAllFreebies"]["zipcode"] = $getAllFreebies["zipcode"];
            $response["getAllFreebies"]["posted_on"] = $getAllFreebies["posted_on"];
            echo json_encode($response);
                        }else {
                            $response["error"] =1;
            $response["error_msg"] = "Error in getAllFreebies";
            echo json_encode($response);

                            }
                    }// end of getAllFreebies tag 
```

下面是我的 DB_function.php 的 getFreebies() 函数的代码，它负责对 MySQL 数据库执行查询。

```
public function getFreebies(){
$result = mysql_query("SELECT * FROM freebie") or die(mysql_error());
return mysql_fetch_array($result);
} 
```

下面是logcat：

```
05-30 00:13:23.960: E/JSON(318): {"tag":"getAllFreebies","success":1,"error":0,"getAllFreebies":{"username":"viking","catagory":"Art","subcatagory":"Potrait","title":"Potrait","item_condition":"Good","description":"potarit","address":"Blah St","city":"lalaland","state":"NA","country":"NA","zipcode":"blah","posted_on":"2012-05-27"}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:25:23.560

mysql_fetch_array() 只将查询结果集中的单行作为数组返回。它不会获取所有行。由于您从 getFreebies 方法返回获取的结果，而不是结果句柄本身，因此调用代码不可能从查询中获取任何其他结果，除了您获取的一行。

因此，您应该拥有：

```
public function getFreebies() {
   $result = ...
   return($result);
} 
```

和

```
$getAllFreebies = $db->getFreebies(...);
$data = array();
while($row = mysql_fetch_assoc($getAllFreebies)) {
   $data[] = array(
      .... your variable assignments here ...
   );
}
echo json_encod($data); 
```

# text - 硒难题！如果元素中存在某些文本，则在链接中存储链接/文本

> ID：10806845
> 
> 赞同：0
> 
> 时间：2012-05-29T21:17:58.003
> 
> 标签：text, selenium, hyperlink, store

我对 Selenium 很陌生，只有在尝试找到一种方法来执行以下操作时才遇到它：

我是有论坛组的网站的成员。该网站没有搜索功能，您可以在其中搜索组内的所有用户，例如来自英国的用户。

我想要做的是导航到某个组内的用户列表，并有一个脚本在页面上查找文本“英国”（原产国写在每个用户名旁边），然后存储用户名或（更可取）用户名指向的链接。

我已经设法编写了一些位，例如突出显示“英国”一词等。但我似乎无法弄清楚您如何搜索一段文本，而是存储位于同一元素中的链接。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:30:33.817

如果您使用 java 绑定，这应该可以工作，尽管基本原理与其他语言保持相同

```
String foo = driver.findElement(By.Id("xxx")).getAttribute("href"); 
```

# clojure - 如何减少这个集合？

> ID：10806848
> 
> 赞同：2
> 
> 时间：2012-05-29T21:18:22.013
> 
> 标签：clojure

我正在努力解决以下问题......

给定一组地图

```
[
 {:a 1 :b 1 :c 1 :d 1}
 {:a 1 :b 2 :c 1 :d 2}
 {:a 1 :b 2 :c 2 :d 3}
 {:a 2 :b 1 :c 1 :d 5}
 {:a 2 :b 1 :c 1 :d 6}
 {:a 2 :b 1 :c 1 :d 7}
 {:a 2 :b 2 :c 1 :d 7}
 {:a 2 :b 3 :c 1 :d 7}
] 
```

想减少/转换为...

```
{
 1 {:b [1 2] :c [1 2] :d [1 2 3]}
 2 {:b [1 2 3] :c 1 :d [5 6 7]}
} 
```

group-by :a （主键）并为其他键累积不同的值。我可以以蛮力/命令的方式做到这一点，但很难弄清楚如何以 clojure 方式解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:43:14.017

这是一个公认的不优雅的初稿解决方案：

```
(defn reducing-fn [list-of-maps grouping-key]
    (reduce (fn [m [k lst]]
              (assoc m k (dissoc (reduce (fn [m1 m2]
                                           (apply hash-map
                                                  (apply concat
                                                         (for [[k v] m2]
                                                           [k (conj (get m1 k #{}) v)]))))
                                         {}
                                         lst)
                                 grouping-key)))
            {}
            (group-by #(grouping-key %) list-of-maps)))

user> (reducing-fn [{:a 1 :b 1 :c 1 :d 1}
                    {:a 1 :b 2 :c 1 :d 2}
                    {:a 1 :b 2 :c 2 :d 3}
                    {:a 2 :b 1 :c 1 :d 5}
                    {:a 2 :b 1 :c 1 :d 6}
                    {:a 2 :b 1 :c 1 :d 7}
                    {:a 2 :b 2 :c 1 :d 7}
                    {:a 2 :b 3 :c 1 :d 7}] 
                   :a)
=> {2 {:c #{1}, :b #{1 2 3}, :d #{5 6 7}}, 1 {:c #{1 2}, :b #{1 2}, :d #{1 2 3}}} 
```

明天会尝试找出一个更优雅的方法，现在就去睡觉:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:22:44.490

```
(use 'clojure.set)
(def data
  [
   {:a 1 :b 1 :c 1 :d 1}
   {:a 1 :b 2 :c 1 :d 2}
   {:a 1 :b 2 :c 2 :d 3}
   {:a 2 :b 1 :c 1 :d 5}
   {:a 2 :b 1 :c 1 :d 6}
   {:a 2 :b 1 :c 1 :d 7}
   {:a 2 :b 2 :c 1 :d 7}
   {:a 2 :b 3 :c 1 :d 7}
  ]
)

(defn key-join
  "join of map by key , value is distinct."
  [map-list]
  (let [keys (keys (first map-list))]
       (into {} (for [k keys] [k (vec (set (map #(% k) map-list)))]))))

(defn group-reduce [key map-list]
  (let [sdata (set map-list)
        group-value (project sdata [key])]
       (into {}
         (for [m group-value] [(key m) (key-join (map #(dissoc % key) (select #(= (key %) (key m)) sdata)))]))))
;;other version fast than group-reduce 
(defn gr [key map-list]
  (let [gdata (group-by key map-list)]
    (into {} (for [[k m] gdata][k (dissoc (key-join m) key)]))))
user=> (group-reduce :a data)
{1 {:c [1 2], :b [1 2], :d [1 2 3]}, 2 {:c [1], :b [1 2 3], :d [5 6 7]}}
user=> (gr :a data)
{1 {:c [1 2], :b [1 2], :d [1 2 3]}, 2 {:c [1], :b [1 2 3], :d [5 6 7]}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:25:17.860

另一种解决方案：

```
(defn pivot [new-key m]
  (apply merge 
    (for [[a v] (group-by new-key m)]
      {a (let [ks (set (flatten (map keys (map #(dissoc % new-key) v))))]
            (zipmap ks (for [k ks] (set (map k v)))))}))) 
```

ETA: new-key 将是这里的 :a 键，而 m 是您的输入映射。

第一个“for”解构了 group-by。这就是您通过输入“新键”对数据进行分区的地方。"for" 生成一个列表——它就像 Python 的列表推导。在这里，我们生成了一个映射列表，每个映射都有一个键，其值是一个映射。首先我们需要提取相关的密钥。这些键保存在“ks”绑定中。我们想要积累不同的价值。虽然我们可以使用 reduce 来做到这一点，因为关键字也是函数，我们可以使用它们在集合中提取，然后使用“set”来减少到不同的值。“zipmap”将我们的键及其相关值联系在一起。然后在主“for”之外，我们需要将此映射列表转换为单个映射，其键是“a”的不同值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:02:34.793

另一种解决方案：

```
(defn transform
  [key coll]
  (letfn [(merge-maps
            [coll]
            (apply merge-with (fnil conj #{}) {} coll))
          (process-key
            [[k v]]
            [k (dissoc (merge-maps v) key)])]
    (->> coll
      (group-by #(get % key))
      (map process-key)
      (into (empty coll))))) 
```

不过，代码未经测试。

*编辑：*当然它不起作用，因为`merge-with`试图太聪明。

```
(defn transform
  [key coll]
  (letfn [(local-merge-with
            [f m & ms]
            (reduce (fn [m [k v]] (update-in m [k] f v))
                    m
                    (for [m ms e m] e)))
          (merge-maps
            [coll]
            (apply local-merge-with (fnil conj #{}) {} coll))
          (process-key
            [[k v]]
            [k (dissoc (merge-maps v) key)])]
    (->> coll
      (group-by #(get % key))
      (map process-key)
      (into (empty coll))))) 
```

# ruby - 用正则表达式匹配集合中恰好一个字符的连续列表

> ID：10806851
> 
> 赞同：0
> 
> 时间：2012-05-29T21:18:36.673
> 
> 标签：ruby, regex

我想我什至不会尝试解释这一点，我不知道的话，但我想实现以下目标：

给定这样的字符串：

```
+++>><<<-- 
```

我想要一个匹配给我：`+++`，但如果任何其他字符像它们一样连续在字符串中，也匹配。因此，如果`+++`不存在，我想匹配`>>`。

我尝试使用以下正则表达式：

```
([><\-\+]+) 
```

但是，给定上面的字符串，它将匹配整个字符串，而不是第一个连续字符列表。

如果它有所作为，这是在 Ruby (1.9.3) 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:25:50.357

不确定红宝石位，但您可以使用模式中的反向引用来做到这一点：

```
(.)\1+ 
```

这样做是使用捕获组`()`来捕获任何字符`.`，然后是任意数量`+`的相同字符`\1`。这`\1`是对第一个捕获的组的反向引用；在具有更多捕获组的模式中，`\2`将是第二个捕获组，依此类推。

**Java 示例**

```
Pattern p = Pattern.compile("(.)\\1+");
Matcher m = p.matcher("aaabbccaa");
m.find();
System.out.println(m.group(0)); // prints "aaa" 
```

**红宝石示例**

```
# Return an array of matched patterns.
string = '+++>><<<--'
string.scan( /((.)\2+)/ ).collect { |match| match.first } 
```

# .htaccess - htaccess 重定向，变量添加到末尾

> ID：10806855
> 
> 赞同：1
> 
> 时间：2012-05-29T21:18:45.117
> 
> 标签：.htaccess

所以，我不能完全弄清楚这个重定向。我正在将一个子域及其所有内容移动到另一个域，但想在每个 url 的末尾添加一个变量，以便它最终如下所示：

```
http://old.domain.com/products/something-or-other.html 
```

变成

```
http://www.newdomain.com/products/some-or-other.html?p=abc 
```

我试过了，但它不会添加变量，除非你只是在域的根目录上。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^old.domain.com$
RewriteRule (.*)$ http://new.domain.com/$1/p_ig=abc [R=301,L] 
```

编辑（用 RedirectMatch 代替）：

```
RedirectMatch 301 ^/(.*)/(.*)$ http://new.domain.com/$1/$2?p_ig=abc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:31:52.403

你可以试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^old\.domain\.com$ [NC]
RewriteRule ^ http://new.domain.com${REQUEST_URI}?p_ig=abc [R=302,L,QSA] 
```

一旦您确认它工作正常，然后更改`R=302`为`R=301`.

# asp.net-mvc-3 - 有什么方法不必追溯产生这些数据属性？

> ID：10806860
> 
> 赞同：2
> 
> 时间：2012-05-29T21:19:03.117
> 
> 标签：asp.net-mvc-3, razor, html-helper, html.dropdownlistfor

这个`Html.DropDownListFor`助手应该产生 data- 属性但如果有任何嵌套则失败。所以这无法产生它们：

```
@( 
 Html.DropDownListFor( 
  m => m.P[0].CId, 
  new SelectList(
   Model.Cs.Values, 
   "Id", "DisplayFields", Model.Cs.StartValue), 
  Model.Cs.Message 
 ) 
) 
```

但是，这会产生它们就好了：

```
@( 
 Html.DropDownListFor( 
  m => m.CId, 
  new SelectList(
   Model.Cs.Values, 
   "Id", "DisplayFields", Model.Cs.StartValue), 
  Model.Cs.Message 
 ) 
) 
```

如何避免不得不返回并使用一些脚本手动定义丢失的数据属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:49:29.097

`@Html.DropDownListFor`在使用帮助程序时，除了追溯分配这些缺失的数据属性外，别无他法。要保留的重要的是`data-val = "true"`, `data-val-required="This value is required"`。`data-valmsg-replace="true"`此外，使用, `data-valmsg-for="ID OF SELECT ELEMENT"`,进行验证的跨度`class="field-validation-valid"`。

但是，如果您选择使用自定义助手，则可以避免这种情况。这可以在这里看到：[http](http://forums.asp.net/t/1649193.aspx/1/10) ://forums.asp.net/t/1649193.aspx/1/10答案详细说明了如何扩展 DropDownListFor 助手。这是他们使用的代码：

```
[SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList)
    {
        return DdUovFor(htmlHelper, expression, selectList, null /* optionLabel */, null /* htmlAttributes */);
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, object htmlAttributes)
    {
        return DdUovFor(htmlHelper, expression, selectList, null /* optionLabel */, new RouteValueDictionary(htmlAttributes));
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, IDictionary<string, object> htmlAttributes)
    {
        return DdUovFor(htmlHelper, expression, selectList, null /* optionLabel */, htmlAttributes);
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, string optionLabel)
    {
        return DdUovFor(htmlHelper, expression, selectList, optionLabel, null /* htmlAttributes */);
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, string optionLabel, object htmlAttributes)
    {
        return DdUovFor(htmlHelper, expression, selectList, optionLabel, new RouteValueDictionary(htmlAttributes));
    }

    [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "Users cannot use anonymous methods with the LambdaExpression type")]
    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    public static MvcHtmlString DdUovFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, string optionLabel, IDictionary<string, object> htmlAttributes)
    {
        if (expression == null)
        {
            throw new ArgumentNullException("expression");
        }

        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

        IDictionary<string, object> validationAttributes = htmlHelper
            .GetUnobtrusiveValidationAttributes(ExpressionHelper.GetExpressionText(expression), metadata);

        if (htmlAttributes == null)
            htmlAttributes = validationAttributes;
        else
            htmlAttributes = htmlAttributes.Concat(validationAttributes).ToDictionary(k => k.Key, v => v.Value);

        return SelectExtensions.DropDownListFor(htmlHelper, expression, selectList, optionLabel, htmlAttributes);
    } 
```

# java - 服务器如何知道它收到的消息何时结束？

> ID：10806865
> 
> 赞同：0
> 
> 时间：2012-05-29T21:19:27.907
> 
> 标签：java, sockets, client-server, inputstream, eofexception

我正在尝试实现一个服务器，它在收到消息时会执行以下操作：

```
try{
       ObjectInputStream is = new ObjectInputStream(clientSocket.getInputStream());
       String message = (String)is.readObject();
       ActivateCommand(message,clientSocket);
       is.close();
    } 
```

和激活命令：

```
private void ActivateEwolfCommand(String msg, Socket clientSocket) throws IOException 
{
    ObjectOutputStream os = new ObjectOutputStream(clientSocket.getOutputStream());
    Gson gsonObject = new Gson();
    .
    //code which makes a Json string
    .
    os.writeObject(json);
os.close();
} 
```

现在，当我通过 junit 测试向本地主机发送消息对其进行测试时，它可以正常工作。但是当尝试从 C# 客户端连接到服务器时，客户端连接但服务器在到达 clientSocket.getInputStream() 点时抛出 EOF 异常。我猜这是因为服务器不知道消息何时结束，但我不知道是否真的如此，如果是，那么我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:36:18.250

`InputStream`当to上没有更多可用数据时`read()`- 这基本上就是导致 EOF 的原因。有多少可用数据由客户端决定 - 它写入`OutputStream` 其一侧`InputStream`的 Socket 的数据在服务器端的 Socket 上显示为这样。您可以调用`InputStream.available()`以估计可以静止的字节数`read()`。

但是，您的代码正在尝试使用 ObjectInputStream 读取对象-此类具有自己的协议来读取序列化的字节流并将其转换为对象-如果它找不到完成任务的字节，则可能会引发 EOF 异常。如果您的客户端使用 C# - 为序列化对象写入的字节格式肯定`ObjectInputStream`与服务器端预期的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:39:55.530

这就是为什么使用套接字和对象流创建自己的客户端-服务器协议是一个坏主意的原因。很多人花了很多年给你带来，哦，好吧：

*   肥皂
*   休息
*   RMI
*   黑森州
*   科尔巴
*   节约

以及许多其他协议。当然，如果不是 5 或 6 个，其中之一足以解决您的问题，包括所有框架问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T21:50:38.923

如果您想通过套接字发送字符串，那么一个`ObjectInputStream`或`ObjectOutputStream`不是正确的流实现。这些流实现使用 Java 对象序列化。即使您序列化`String`实例，生成的字节也与使用适当字符编码的纯字符串到字节转换不同。

而且 C# 应用程序根本不理解 Java 序列化。

考虑使用 a`PrintWriter`将字符串写入您的流并使用 a`BufferedReader`进行读取。

```
PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream(), "UTF-8"));
writer.println(...);

BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream(), "UTF-8"));
String line = reader.readLine(); 
```

然后您可以逐行读取和写入字符串。这只是一个起点。如果你想实现自己的协议，你必须注意更多的点。例如，您可以阅读一些 TCP 协议（​​如[POP3](http://www.ietf.org/rfc/rfc1939.txt)、[FTP](http://www.ietf.org/rfc/rfc1939.txt)或[HTTP 1.0](http://www.ietf.org/rfc/rfc1939.txt) ）的规范。

# python - 计算字符串中每个字母的频率

> ID：10806866
> 
> 赞同：19
> 
> 时间：2012-05-29T21:19:32.153
> 
> 标签：python, dictionary

这是 pyschools 提出的问题。

我确实做对了，但我猜会有一个更简单的方法。这是最简单的方法吗？

```
def countLetters(word):
    letterdict={}
    for letter in word:
        letterdict[letter] = 0
    for letter in word:
        letterdict[letter] += 1
    return letterdict 
```

这应该看起来像这样：

```
>>> countLetters('google')
{'e': 1, 'g': 2, 'l': 1, 'o': 2} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-29T21:24:16.047

在 2.7+ 中：

```
import collections
letters = collections.Counter('google') 
```

早些时候（2.5+，现在很古老）：

```
import collections
letters = collections.defaultdict(int)
for letter in word:
    letters[letter] += 1 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-29T21:22:58.687

```
>>> import collections
>>> print collections.Counter("google")
Counter({'o': 2, 'g': 2, 'e': 1, 'l': 1}) 
```

# r - R 有幻数“ëPNG”错误

> ID：10806867
> 
> 赞同：-5
> 
> 时间：2012-05-29T21:19:38.310
> 
> 标签：r

我有一个读取文件并自动生成图形的 R 脚本。它在第一次运行时工作。如果 .png 文件在那里并且脚本需要使用新数据重新创建它们，我会收到此错误：

```
Error: bad restore file magic number (file may be corrupted) -- no data loaded
In addition: Warning message:
file 'test1.png' has magic number 'ëPNG'
   Use of save versions prior to 2 is deprecated
Execution halted 
```

这个错误是什么意思？我尝试使用源（“文件名”），它也不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:43:34.363

我不得不拆分我正在使用的目录。我正在输出到另一个文件夹，如下所示解决了这个问题。

setwd("C/img")

# regex - 根据 grep 匹配将 grep 的输出保存到文件

> ID：10806873
> 
> 赞同：1
> 
> 时间：2012-05-29T21:20:00.650
> 
> 标签：regex, grep, cat

这里有一个快速的问题：

假设我试图分隔一组文件的行，它们看起来像这样：

pid 文本编号

我想使用 pid 将这些行分成不同的文件，我该如何实现呢？

到目前为止，我已经尝试过类似的东西：

```
cat files | grep '\([0-9]\{3\}\)' > $1.txt 
```

那当然行不通..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:26:14.703

带有 pids 的文件：

```
$ cat /tmp/l
123 azerty
234 qwerty
456 bepo 
```

awk 代码：

```
$ awk '/^[0-9]{3}/{print $0 > $1".txt"}' /tmp/l 
```

的输出`ls`：

```
$ ls
123.txt
234.txt
456.txt 
```

# .net - Root UriTemplate 被 WCF 帮助页面劫持

> ID：10806875
> 
> 赞同：1
> 
> 时间：2012-05-29T21:20:09.933
> 
> 标签：.net, wcf, rest, uritemplate

**TL;DR** - 我有`[WebGet(UriTemplate = "/")]`，但它不起作用

* * *

我有如下所示的 WCF 服务：

```
public interface IUserService
{
    // This doesn't work
    [OperationContract]
    [WebGet(UriTemplate = "/")]
    IList<User> GetAllUsers();

    /////////////////////////////////////
    // Everything below this works
    /////////////////////////////////////

    [OperationContract]
    [WebGet(UriTemplate = "/{id}/")]
    User GetUserById(string id);

    [OperationContract]
    [WebInvoke(UriTemplate = "/", Method = "POST")]
    IList<User> AddUser();

    [OperationContract]
    [WebInvoke(UriTemplate = "/{id}/", Method = "PUT")]
    IList<User> UpdateUser(string id, User user);
} 
```

这是端点的配置

```
<service name="MyCompany.UserService">
    <host>
        <baseAddresses>
            <add baseAddress="http://localhost:80/api/users/" />
        </baseAddresses>
    </host>
    <endpoint address=""
                        behaviorConfiguration="WebHttpBehavior"
                        binding="webHttpBinding"
                        contract="MyCompany.IUserService" />
    <endpoint address="mex"
                        binding="mexHttpBinding"
                        contract="IMetadataExchange" />
    <endpoint address="soap"
        binding="wsHttpBinding"
        contract="MyCompany.IUserService" />
</service> 
```

如您所见，我正在通过该服务同时提供 REST 和 SOAP。这个问题只涉及 REST。

当我`http://localhost:80/api/users/`在浏览器中访问时（所以`GET "/"`用 WCF 术语），我会看到描述端点的 WCF 帮助页面——该页面对 SOAP 很有用，但对 REST 帮助不大。但是，如果我做任何其他事情，它会按预期工作。如果我`POST`访问此 URL 或`GET /123456`，我会得到正常的 JSON 响应（例如，它实际上执行了我的服务）。

似乎 WCF 正在劫持“/”操作。有什么方法可以关闭这个 WCF“帮助”行为，以便我可以执行我的操作？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:17:08.010

首先，您可以使用以下配置选项禁用服务帮助页面：

```
<serviceBehaviors>
  <serviceDebug httpHelpPageEnabled="false" httpsHelpPageEnabled="false" />
</serviceBehaviors> 
```

但是，这将使基地址默认返回服务 wsdl。因此，要移动它，您还可以使用此配置选项：

```
<serviceBehaviors>
  <serviceMetadata httpGetEnabled="true" httpGetUrl="wsdl"/>
</serviceBehaviors> 
```

这会将 wsdl url 移动到 your_service_base_address + "wsdl?wsdl"。

# knockout.js - 菜鸟首发淘汰赛题

> ID：10806876
> 
> 赞同：0
> 
> 时间：2012-05-29T21:20:10.713
> 
> 标签：knockout.js, knockout-2.0

我刚开始阅读，并通过了一些 knokout 教程，并且非常喜欢它，但是我无法自己制作一个简单的示例。这是HTML代码

```
<input id="Button2" type="button" value="+" data-bind="click:increment" />
<input id="Text1" type="text" data-bind="text:foo" /> 
```

和js代码：

```
<script type="text/javascript">
    function AppViewModel() {
        this.foo = ko.observable('0');
        this.increment = function () {
            alert(foo);
            foo += 1;
        };
    }
    ko.applyBindings(new AppViewModel());

</script> 
```

基本上我希望jsut通过单击一个按钮来增加一个文本框的值。我也在头文件中包含了以下 js 文件：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="Scripts/knockout-2.1.0.debug.js" type="text/javascript"> 
```

我还缺少什么？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:58:52.300

您正在对输入使用文本绑定。设置输入的文本不会做任何明显的事情。

您需要改用值绑定。像这样。

```
<input id="Button2" type="button" value="+" data-bind="click:increment" />
<input id="Text1" type="text" data-bind="value:foo" /> 
```

您还需要通过调用 observable 函数来分配 foo 元素。

```
function AppViewModel() {
    var self = this;
    this.foo = ko.observable(0);
    this.increment = function () {
        self.foo(self.foo() + 1);
    };
} 
```

[http://jsfiddle.net/madcapnmckay/wdVYe/](http://jsfiddle.net/madcapnmckay/wdVYe/)

希望这可以帮助。

# php - 一对一、自引用、双向关系

> ID：10806881
> 
> 赞同：4
> 
> 时间：2012-05-29T21:20:36.807
> 
> 标签：php, doctrine

我正在尝试与实体创建一对一的、自引用的双向关系 ( *wow*`Revision` ) ，如下所示：

```
/**
 * @Entity()
 * @Table(name="rev")
 */
class Revision extends BaseEntity
{
    /**
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

    /**
     * @Column(type="string")
     */
    protected $comment;

    /**
     * @OneToOne(targetEntity="Revision", inversedBy="parent")
     * @JoinColumn(name="revision_of", referencedColumnName="id")
     */
    protected $revisionOf;

    /**
     * @OneToOne(targetEntity="Revision", mappedBy="revisionOf")
     */
    protected $parent;
} 
```

没有`parent`属性，一切正常。当我添加该属性时，两种关系都返回`null`.

直接的问题是：我想要做的事情可以在 Doctrine 中完成吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:09:03.290

回答我自己的问题：这是不可能的。正如 bksunday 所说，您需要两列来完成此行为。

不幸的是，这需要一些数据重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-12T09:21:34.110

我已经用这个解决了

```
oneToOne:
  previous:
    targetEntity: Change
    mappedBy: next
    joinColumn:
      name: id
      referencedColumnName: next_id
  next:
    targetEntity: Change
    inversedBy: previous 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:10:06.430

当你有双向关系时，你必须管理双方

在这种情况下

```
$revision->setRevisionOf($revisionOf);
$revisionOf->setParent($revision); 
```

[与协会合作的原则](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html)

```
In the case of bi-directional associations you have to update the fields on both sides: 
```

# c# - 当数组动态附加到 DOM 元素时，IE 8 无法发布到 mvc 3

> ID：10806884
> 
> 赞同：0
> 
> 时间：2012-05-29T21:20:59.547
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3, internet-explorer-8

当使用 JQuery 动态创建复选框数组并附加到 DOM 元素时，IE 8 不会将复选框数组作为表单的一部分提交。它与 Firefox 和 Chrome 完美配合。我在服务器端使用 MVC 3 框架。有什么想法可以解决这个问题以使其与 IE 8 一起使用？我绝对会感谢任何建议。

模型：

```
public int[] SelectedTemplateRequirements { get; set; } 
```

看法：

HTML：

```
<label for="requirementsTemplateDetail">Requirements:</label><br />
<div id="requirementsTemplateDetail"></div> 
```

查询：

```
<script type="text/javascript">
    /* Fills up the textarea */
    function fillTextArea(ctrlName, list) {
        // clear div
        $('#requirementsTemplateDetail').empty();

        $.each( list, function (index, itemData) {
            // alert(itemData.Id );
            $(ctrlName).append(
                $(document.createElement('input')).attr({
                    name: 'SelectedTemplateRequirements',
                    value: itemData.Id,
                    type:  'checkbox',
                    checked: 'checked'
                })
            ).append(itemData.Name + '<br/><br/>');
        })
    }

  function fillRequirementsDropdown(response) {
    fillTextArea("#requirementsTemplateDetail", response.Reqs);
  }

function postFormRequirementsByTemplateID(ctrlName) {
    var theForm = $(ctrlName).parents('form');

    $.ajax({
        type: "POST",
        url: '@Url.Action("GetRequirementsByTemplateID")',
        data: theForm.serialize(), 
        error: function (xhr, status, err) {
            alert("An error occurred while saving\n\n" + err);
        },
        success: function (response) {
            fillRequirementsDropdown(response);
        }
    });
    return false;
}

function auditType_SelectionChanged() {
    postFormRequirementsByTemplateID("#AuditTemplateId");
}

$(document).ready(function () {
    $("#ClassTypeId").change(function () {
        ClassType_SelectionChanged();
    });
    $("#AuditTemplateId").change(function () {
        auditType_SelectionChanged();
    });
    $('#templateSearchID').click(function () {
        auditTemplateButtonPressed();
    });
    $('#templateAllID').click(function () {
        auditTemplateAllPressed();
    });
});

</script> 
```

控制器：

```
public class AuditController : ComplianceController
{
    [HttpPost]
    public ActionResult Create(string submit, AuditDocument document )
    {
            // Inserts into AuditRequirementDetail table
            m_activeContract.insertAuditTemplateRequirements(document, myuser);
    }
} 
```

发生的情况是 IE 8 无法捆绑`SelectedTemplateRequirements`数组，因为它显示为`NULL`当它返回到控制器上的 post 操作方法时。由于 IE 8 仍然拥有庞大的用户群，因此非常感谢您对此提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:08:14.900

我认为问题可能在于您创建复选框并将其附加到 DOM 元素的方式。

例如，假设您有以下代码：

```
// Append an input element built from a single string
for (var i = 0; i < 10; i++) {
    $('<input type="checkbox" name="test" value="' + i + '" checked="checked" />').appendTo('#form1');
}

// Append an input element build using DOM and jQuery attribute manipulation
for (var i = 0; i < 10; i++) {
    $(document.createElement('input')).attr({
        name: 'test',
        value: i,
        type: 'checkbox',
        checked: 'checked'
    }).appendTo('#form2');
}

alert($('#form1').serialize());
alert($('#form2').serialize()); 
```

如果您`alert()`在 Chrome 或 Firefox 中检查结果，您将从`#form1`：

```
test=0&test=1&test=2&test=3&test=4&test=5&test=6&test=7&test=8&test=9 
```

这来自`#form2`：

```
test=0&test=1&test=2&test=3&test=4&test=5&test=6&test=7&test=8&test=9 
```

它们是相同的，并且支持您在 Chrome 和 Firefox 中具有预期行为的结果。但是，IE 的行为并不**相同**。IE8 和 IE9 中的相同代码从以下位置生成`#form1`：

```
test=0&test=1&test=2&test=3&test=4&test=5&test=6&test=7&test=8&test=9 
```

这来自`#form2`：

```
test=on&test=on&test=on&test=on&test=on&test=on&test=on&test=on&test=on&test=on 
```

通过对您的代码的简短检查，我会质疑您用于动态创建复选框并将其附加到您的 DOM 元素的方法。我不知道 MVC 如何处理每个 POST 变量都相同的情况，但这可能是您问题的一部分。

附加复选框的另一种跨浏览器方式：

```
for (var i = 0; i < 10; i++) {
    $('<input type="checkbox" />').attr({
        name: 'test',
        value: i
    }).prop('checked', true).appendTo('#form3');
} 
```

您需要确保在添加属性之前指定类型。此外，正确设置“checked”属性对于 jQuery 序列化 IE 中复选框的值而不是状态至关重要。

**上面的[JSFiddle](http://jsfiddle.net/quaeU/2/)**。

# java - 如何将 Unicode 无穷大符号转换为字符串

> ID：10806893
> 
> 赞同：9
> 
> 时间：2012-05-29T21:21:35.817
> 
> 标签：java, string, numbers

我想在java中使用无穷大符号（8个侧身）。

此外，我想将它用作字符串组件。
我没有找到适用的 charcode/ascii 代码（有吗？）。

我试过：

```
String s=Character.toString(236);
String s=Character.toString('236'); 
```

我错过了什么吗？

我现在明白了：

```
System.out.println(Character.toString('\u221E')); 
```

但输出是`?`

我正在使用 java 1.7 jdk 和 eclipse。为什么无穷大符号没有出现？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T21:28:03.427

您需要 Unicode 无穷大符号[U+221E](http://www.fileformat.info/info/unicode/char/221e/index.htm)。236 是一种 Windows 输入约定，对您没有任何帮助。`'\u221e'`是字符常数。

现在，我不能保证这会导致屏幕上出现任何 ∞ 字符。这取决于您拥有的计算机类型、您使用的字体以及您在 -Dfile.encoding 中设置的内容。另请参阅[此问题](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-25T06:44:05.183

我知道这是很晚的回复，但以下信息肯定会对某人有所帮助。

默认情况`**Eclipse**`下，控制台的文本文件编码是`**Cp1252**`，然后

[如何在 Eclipse 中支持 UTF-8 编码](https://stackoverflow.com/questions/9180981/how-to-support-utf-8-encoding-in-eclipse)

我会鼓励在下面的源代码中处理`infinity`符号：`String`

```
String infinitySymbol = null;

try {

    infinitySymbol = new String(String.valueOf(Character.toString('\u221E')).getBytes("UTF-8"), "UTF-8");

} catch (UnsupportedEncodingException ex) {

    infinitySymbol = "?";
    //ex.printStackTrace(); //print the unsupported encoding exception.

} finally {

    System.out.print("Symbol of infinity is : " + infinitySymbol);

} 
```

# java - 为什么 PropertyDescriptor 行为从 Java 1.6 更改为 1.7？

> ID：10806895
> 
> 赞同：15
> 
> 时间：2012-05-29T21:21:41.100
> 
> 标签：java, spring, javabeans, java-7

更新：Oracle 已确认这是一个错误。

总结：在 JDK 1.6 中工作的某些 custom `BeanInfo`s 和`PropertyDescriptor`s 在 JDK 1.7 中失败了，有些只有在 Garbage Collection 运行并清除了某些 SoftReferences 后才会失败。

> 编辑：这也将破坏`ExtendedBeanInfo`Spring 3.1 中的内容，如帖子底部所述。
> 
> 编辑：如果您调用 JavaBeans 规范的第 7.1 或 8.3 节，请准确解释规范的这些部分*需要*什么。在这些部分中，语言不是强制性的或规范性的。这些部分中的语言是示例的语言，作为规范充其量是模棱两可的。此外，该`BeanInfo`API 专门允许更改默认行为，并且在下面的第二个示例中显然被破坏了。

Java Beans 规范查找返回类型为 void 的默认 setter 方法，但它允许通过`java.beans.PropertyDescriptor`. 使用它的最简单方法是指定 getter 和 setter 的名称。

```
new PropertyDescriptor("foo", MyClass.class, "getFoo", "setFoo"); 
```

这在 JDK 1.5 和 JDK 1.6 中有效，即使在其返回类型不是 void 时也可以指定 setter 名称，如下面的测试用例所示：

```
import java.beans.IntrospectionException;
import java.beans.PropertyDescriptor;
import org.testng.annotations.*;

/**
 * Shows what has worked up until JDK 1.7.
 */
public class PropertyDescriptorTest
{
    private int i;
    public int getI() { return i; }
    // A setter that my people call "fluent".
    public PropertyDescriptorTest setI(final int i) { this.i = i; return this; }

    @Test
    public void fluentBeans() throws IntrospectionException
    {
        // This throws an exception only in JDK 1.7.
        final PropertyDescriptor pd = new PropertyDescriptor("i",
                           PropertyDescriptorTest.class, "getI", "setI");

        assert pd.getReadMethod() != null;
        assert pd.getWriteMethod() != null;
    }
} 
```

自定义`BeanInfo`s 的示例，它允许`PropertyDescriptor`在 Java Beans 规范中对 s 进行编程控制，它们的设置器都使用 void 返回类型，但规范中没有任何内容表明这些示例是规范的，现在这个低级实用程序的行为已经在新的 Java 类中发生了变化，这恰好破坏了我正在处理的一些代码。

JDK 1.6 和 1.7 之间的包中有许多更改`java.beans`，但导致此测试失败的更改似乎在以下差异中：

```
@@ -240,11 +289,16 @@
        }

        if (writeMethodName == null) {
-       writeMethodName = "set" + getBaseName();
+                writeMethodName = Introspector.SET_PREFIX + getBaseName();
        }

-       writeMethod = Introspector.findMethod(cls, writeMethodName, 1, 
-                 (type == null) ? null : new Class[] { type });
+            Class[] args = (type == null) ? null : new Class[] { type };
+            writeMethod = Introspector.findMethod(cls, writeMethodName, 1, args);
+            if (writeMethod != null) {
+                if (!writeMethod.getReturnType().equals(void.class)) {
+                    writeMethod = null;
+                }
+            }
        try {
        setWriteMethod(writeMethod);
        } catch (IntrospectionException ex) { 
```

现在不再简单地接受具有正确名称和参数的方法，而是`PropertyDescriptor`检查返回类型以查看它是否为空，因此不再使用流利的设置器。在这种情况下`PropertyDescriptor`抛出一个`IntrospectionException`：“找不到方法：setI”。

然而，这个问题比上面的简单测试要隐蔽得多。`PropertyDescriptor`在自定义中指定 getter 和 setter 方法的另一种方法`BeanInfo`是使用实​​际`Method`对象：

```
@Test
public void fluentBeansByMethod()
    throws IntrospectionException, NoSuchMethodException
{
    final Method readMethod = PropertyDescriptorTest.class.getMethod("getI");
    final Method writeMethod = PropertyDescriptorTest.class.getMethod("setI",
                                                                 Integer.TYPE);

    final PropertyDescriptor pd = new PropertyDescriptor("i", readMethod,
                                                         writeMethod);

    assert pd.getReadMethod() != null;
    assert pd.getWriteMethod() != null;
} 
```

现在，上面的代码*将*在 1.6 和 1.7 中通过单元测试，但是由于导致第一个示例立即失败的相同更改，代码将在 JVM 实例生命周期的某个时间点开始失败。在第二个示例中，唯一表明出现任何问题的迹象是在尝试使用 custom 时`PropertyDescriptor`。setter 为 null，大多数实用程序代码都认为该属性是只读的。

diff 中的代码在里面`PropertyDescriptor.getWriteMethod()`。它在`SoftReference`持有实际设置器`Method`为空时执行。此代码由第一个示例中的构造函数调用，该`PropertyDescriptor`示例采用上面的访问器方法*名称*，因为最初没有`Method`保存在`SoftReference`s 中保存实际的 getter 和 setter。

在第二个示例中，read 方法和 write 方法由构造函数存储在`SoftReference`对象中`PropertyDescriptor`，首先这些将包含对构造函数的getter`readMethod`和`writeMethod`setter`Method`的引用。如果在某些时候这些软引用被清除，因为垃圾收集器被允许这样做（它会这样做），那么`getWriteMethod()`代码将看到`SoftReference`返回 null，它会尝试发现设置器。*这一次*`PropertyDescriptor`，使用内部导致第一个示例在 JDK 1.7 中失败的相同代码路径，它会将写入设置`Method`为，`null`因为返回类型不是`void`。（返回类型*不是*Java[方法签名](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.4.2)的一部分。）

在使用自定义时，随着时间的推移，这种行为会发生变化，这`BeanInfo`可能会非常令人困惑。尝试复制导致垃圾收集器清除那些特定`SoftReferences`的条件也很乏味（尽管可能一些仪器模拟可能会有所帮助。）

Spring`ExtendedBeanInfo`类具有与上述类似的测试。这是一个实际的 Spring 3.1.1 单元测试`ExtendedBeanInfoTest`，它将在单元测试模式下通过，但正在测试的代码将在 GC 后的阴险模式下失败::

```
@Test
public void nonStandardWriteMethodOnly() throws IntrospectionException {
    @SuppressWarnings("unused") class C {
        public C setFoo(String foo) { return this; }
    }

    BeanInfo bi = Introspector.getBeanInfo(C.class);
    ExtendedBeanInfo ebi = new ExtendedBeanInfo(bi);

    assertThat(hasReadMethodForProperty(bi, "foo"), is(false));
    assertThat(hasWriteMethodForProperty(bi, "foo"), is(false));

    assertThat(hasReadMethodForProperty(ebi, "foo"), is(false));
    assertThat(hasWriteMethodForProperty(ebi, "foo"), is(true));
} 
```

一个建议是，我们可以通过防止 setter 方法仅可轻松访问来保持当前代码与非 void setter 一起工作。这似乎可行，但这是对 JDK 1.7 中更改的行为的一种破解。

问：是否有一些明确的规范规定非空位二传手应该被诅咒？我什么也没找到，我目前认为这是 JDK 1.7 库中的一个错误。我错了，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:56:00.140

看起来规范没有改变（它需要 void setter），但实现已经更新为只允许 void setter。

规格：

[http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)

更具体地说，请参阅第 7.1 节（访问器方法）和第 8.3 节（简单属性的设计模式）

请参阅此 stackoverflow 问题中的一些后续答案：

[Java bean 的 setter permit 是否返回这个？](https://stackoverflow.com/questions/5741369/does-java-beans-setter-permit-return-this)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:52:53.713

第 8.2 节规定：

> 但是，在 Java Beans 中，与设计模式匹配的方法和类型名称的使用完全是可选的。如果程序员准备使用 BeanInfo 接口显式指定他们的属性、方法和事件，那么他们可以随意调用他们的方法和类型。但是，**这些方法和类型仍然必须匹配所需的类型签名，因为这对它们的操作至关重要**。

（重点补充）

此外，我相信 7.1 和 8.3 中显示的方法签名实际上是规范的。它们只是使用“foo”作为示例属性名称的意义上的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T15:13:00.827

我还选择说不允许非空设置器是一个错误。它只是使**流畅的编程**变得不可能。这就是为什么它*需要*改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:01:20.880

由于我发现 Spring 3.1.1`ExtendedBeanInfo`单元测试期望代码不会被破坏，并且因为垃圾收集后行为发生变化显然是一个错误，所以我将回答这个问题并记下 Java 错误编号。这些错误在 Java 错误的外部数据库中仍然不可见，但我希望它们会在某个时候变得可见：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7172854](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7172854)（Oracle 将此作为以下错误的副本关闭，因为尽管表现不同，但它们具有相同的原因。）

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7172865](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7172865)

（错误于 2012 年 5 月 30 日提交。）

截至 2012 年 6 月 20 日，这些错误通过上面的链接在外部数据库中可见。

# macos - NSOutlineView NSTableRowView 在编辑后丢失了明显的选择

> ID：10806897
> 
> 赞同：1
> 
> 时间：2012-05-29T21:21:52.063
> 
> 标签：macos, nstableview, nsoutlineview

我有一个基于视图的大纲视图（OSX 10.7）。像往常一样，单击一个项目会选择它。双击允许编辑它包含的文本字段。但是，当我完成对 textField 的编辑时，该行的突出显示消失了。outlineView 仍然认为该行已被选中，并且向该行发送 drawSelectionInRect 消息不会改变其外观。告诉 outlineView 再次选择该行也不会改变它的外观。只有再次单击该行才能使突出显示重新出现。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:03:28.250

我的错。我正在观察 managedObjectContext 的变化，并在个别项目发生变化时重新加载整个树：通过更正此问题以仅重新加载受影响的项目，事情就可以正常工作。

# ios - 在 UIWebView 中播放 youtube-video 后，应用重新启动

> ID：10806899
> 
> 赞同：0
> 
> 时间：2012-05-29T21:22:10.923
> 
> 标签：ios, uiwebview, youtube, youtube-api

我正在使用以下代码，因此在我的 UIWebView (Outlet) 中加载一个 Youtube 视频：

```
NSString *videoUrl = [self getVideoURL];
NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 280\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"280\" height=\"156\"><param name=\"movie\" value=\"%@\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"%@\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"280\" height=\"156\"></embed></object></div></body></html>",videoUrl,videoUrl]    ;

[videoView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]]; 
```

这一切都很好。但是在观看视频并点击“完成”后，我的应用程序从头开始新......但我不明白为什么。希望有人能给我一个提示，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:34:08.490

好的，我发现了我的错误：“错误”在 youtube 播放器上。按“完成”后，它返回到我的 rootView 控制器。就我而言，这是该应用程序的真正第一个视图。我通过在展示后将我的 ModalView 设置为我的 rootViewController 解决了这个问题。

# scala - (Lift) Ajax 提交使用 SHtml.select onchange 事件

> ID：10806902
> 
> 赞同：1
> 
> 时间：2012-05-29T21:22:21.700
> 
> 标签：scala, lift

我正在尝试实现这个选择的经典功能：元素依赖于另一个选择：使用提升的选择，例如选择国家并获取所选国家的可能状态。

我面临的问题是，我在 select 元素的 onchange 中的“this.myForm.submit()”没有触发 ajax 请求。如果我使用输入类型“提交”，它会完美运行。

这种行为与 Lift 框架有关吗？有没有更好的方法来使用 Lift 库来实现这种功能？

相关的截断代码：

```
"name=distributionPoints" #> SHtml.select(distributionPoints, Empty, selectedDistributionPoint = _, "id" -> "the_distributionPoints") &
        "name=devices" #> (SHtml.select(devices, Empty, selectedDevice = _, "id" -> "the_devices")  ++ SHtml.hidden(process)) 
```

视图html：

```
<form class="lift:form.ajax">
<select name="distributionPoints" id="the_distributionPoints" onchange="submit()">
                    <option></option>
                </select>
                <br/>
                Device:
                <select name="devices" id="the_devices">
                    <option></option>
                </select>
</form> 
```

呈现的 HTML：

```
 <form id="F391649920812YBACEZ" action="javascript://" onsubmit="liftAjax.lift_ajaxHandler(jQuery('#'+&quot;F391649920812YBACEZ&quot;).serialize(), null, null, &quot;javascript&quot;);return false;">
                <div>  
Punto de distribución:
                <select onchange="submit()" id="the_distributionPoints" name="F630704816482OLP514"></select>
                <br />              
                    Equipo:
                    <select name="F391649920817BLRJW5" id="the_devices"></select><input type="hidden" name="F391649920818HPS35E" value="true" />
                    <br />

                </div>
            </form> 
```

[编辑]

我终于得到了解决方案。就像克里斯提到的那样，我使用 ajaxSelect 而不仅仅是选择，而不是使用 setHtml 有一个名为 JsCmds.ReplaceOptions 的方法，它完全符合我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:30:47.217

您应该了解，当使用 Ajax 提交时，页面不会重新加载。所以我建议你`JsCmds.setHtml`在服务器端使用来“重置”第二个选择元素。

所以，实际上第一个选择是一个 ajaxSelect，它是为了修改第二个（所以我认为它不关心隐藏的提交）。当第一个选择被改变时，第二个选择被更新，使用'selectPoint(s)'

**一段Scala代码**

```
def selectPoint(s):JsCmd = {
  selectedDistributionPoint = s; 
  newDevices:List[String] = findCorrespondingDevices(s);
  JsCmds.setHtml("name=devices", SHtml.select(newDevices, Empty, selectedDevice = _, "id" -> "the_devices")) ++ SHtml.hidden(process)) 
}

"name=distributionPoints" #> SHtml.AjaxSelect(distributionPoints, Empty, s=> selectPoint(s), "id" -> "the_distributionPoints") &
"name=devices" #> (SHtml.select(Nil, Empty, selectedDevice = _, "id" -> "the_devices")  ++ SHtml.hidden(process)) 
```

**一段模板代码**

```
<input name="distributionPoints" id="the_distributionPoints" onchange="submit()"/>
<input name="devices" id="the_devices"/> 
```

# java - 我正在尝试用java创建一个三角形

> ID：10806903
> 
> 赞同：1
> 
> 时间：2012-05-29T21:22:43.523
> 
> 标签：java, geometry, height, width

//我正在尝试用java创建一个基本的赛车。我为身体制作了一个矩形，现在我正在尝试为前面制作一个三角形。我在网上查找了创建三角形的代码，但没有一个看起来像我在下面的矩形中所使用的格式。我从“为邪恶天才的视频游戏编程”中获得了大部分代码作为参考，现在我们被鼓励创建自己的车辆，但矩形是唯一解释的形状。我确实将代码从矩形复制到三角形，期望一个与另一个重叠，只是为了让我知道它有效，但事实并非如此。谁能向我解释如何制作三角形和可能的圆形？还有没有这样做而不必创建另一个类？

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class Vehicle extends JFrame

 {
    final int WIDTH = 900; int HEIGHT = 650;

    Rectangle p1Body = new Rectangle(WIDTH/9,HEIGHT/2, WIDTH/30,WIDTH/30);
    Triangle p1Front = new Triangle(WIDTH/9,HEIGHT/2, WIDTH/30,WIDTH/30);

    Rectangle p2Body = new Rectangle(((WIDTH/9)+((int)((WIDTH/9)*1.5)/2)),(HEIGHT/2)+ 
    (HEIGHT/10),WIDTH/30,WIDTH/30);

public Vehicle()
    {
        super("Radical Racing");
        setSize(WIDTH,HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

}
public void paint(Graphics g)
{
    super.paint(g);

    g.setColor(Color.DARK_GRAY);
    g.fillRect(0,0,WIDTH,HEIGHT);

    g.setColor(Color.BLUE);

    g.fill3DRect(p1Body.x,p1Body.y,p1Body.width,p1Body.height,true);
    g.setColor(Color.BLUE);
    g.fill3D(p1Front.x,p1Front.y,p1Front.width,p1Front.height,true);

    g.setColor(Color.red);

    g.fill3DRect(p2Body.x,p2Body.y,p2Body.width,p2Body.height,true);

}

public static void main(String[]args)
    {
        new Vehicle();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:29:28.047

三角形可以使用 Path2D(.Double) 圆形可以使用 Ellipse2D(.Double)

顺便说一句，您可能想考虑使用 Area - [http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Area.html](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Area.html)将所有这些形状组合成一个。区域对于操纵形状和测试它们是否包含点等非常有用。

查看 Graphics2D.draw（或填充）（形状）

[http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#draw(java.awt.Shape](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#draw(java.awt.Shape) )

# jquery - 当鼠标悬停在链接上时，如何取消绑定并绑定回 jquery 事件处理程序？

> ID：10806908
> 
> 赞同：0
> 
> 时间：2012-05-29T21:23:48.423
> 
> 标签：jquery, bind, jquery-hover

* * *

## 更新：请参考这个问题：[当它通过链接时，如何隐藏 iframe（即跟随鼠标）？](https://stackoverflow.com/questions/10840226/how-to-hide-an-iframe-that-is-following-the-mouse-when-it-passes-over-a-link)（最佳解决方案）

我试图创建一个对象在屏幕上随处跟随鼠标的功能，但是当鼠标悬停在链接上时，mousemovement 必须停止，因此跟随鼠标的对象在单击链接时不会干扰。为此，我创建了一个#safe css 用作我的链接 ID。我试图取消绑定和绑定'mousemove'，当鼠标悬停在链接上时它会取消绑定，但当鼠标离开链接时不会绑定回来。我该如何解决？

这是我的小提琴：http: [//jsfiddle.net/czdpY/](http://jsfiddle.net/czdpY/)

```
$('#safe').hover(
    function () {
        $(document).unbind('mousemove');
    },
    function () {
        $(document).bind('mousemove');
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:25:02.367

您还需要添加函数名称。

```
$('#safe').hover(
  function () {
    $(document).unbind('mousemove', boundFunction);
  },
  function () {
    $(document).bind('mousemove', boundFunction);
  }
); 
```

# java - JSF 开始 + 安装 UI 错误

> ID：10806915
> 
> 赞同：1
> 
> 时间：2012-05-29T21:24:26.087
> 
> 标签：java, jsf

我正在尝试从 JSF 安装开始。

在 JSF 文件中，我只是添加了**h 标签**和**f 标签**。一旦我这样做`<f:view>`，它就会给出以下错误。

```
 May 30, 2012 2:49:20 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1858)
    at org.apache.jsp.ClinicInformation_jsp._jspx_meth_f_005fview_005f0(ClinicInformation_jsp.java:98)
    at org.apache.jsp.ClinicInformation_jsp._jspService(ClinicInformation_jsp.java:70)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
    at java.lang.Thread.run(Thread.java:619) 
```

我无法理解缺少什么。我加了两个罐子...

1.  javax.faces-2.1.8.jar
2.  javax.servlet.jsp.jstl-api-1.2.1.jar
3.  primefaces-3.2.jar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:28:38.563

堆栈跟踪表明您出于某种原因正在使用旧的和已弃用的 JSP。自 2009 年底 JSF 2.0 以来，JSP 已被 Facelets 取代。

重命名`ClinicInformation.jsp`并`ClinicInformation.xhtml`阅读[Facelets 教程](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)。对于一些启动示例，这样的 Facelets 文件应该是什么样子，请查看以下答案：

*   [找不到 http://java.sun.com/jsf/facelets 的标签库描述符](https://stackoverflow.com/questions/6322127/can-not-find-the-tag-library-descriptor-for-http-java-sun-com-jsf-facelets/6322355#6322355)
*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)
*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

请注意，您*可以*通过一些参数将 JSF 2.0 配置为使用 JSP `web.xml`，但绝对不建议这样做，因为它是一种劣等的视图技术。更重要的是，PrimeFaces 根本不支持 JSP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:42:00.357

调用应用程序时我遇到了同样的问题，而不是使用字符串面。

例子：

1.  `http://ADDRESS:PORT/APP/JSP`

2.  `http://ADDRESS:PORT/APP`

但是使用后问题就消失了`http://ADDRESS:PORT/APP/faces/JSP`。
您使用的是什么类型的 URL？

希望这可以帮助。

# c# - SQL 或 C# 的配对速度更快吗？

> ID：10806916
> 
> 赞同：4
> 
> 时间：2012-05-29T21:24:26.180
> 
> 标签：c#, sql, sql-server, database, c#-4.0

我有很多数据需要根据一些简单的标准进行配对。有一个时间窗口（两条记录都有一个 DateTime 列），如果一条记录在时间上（5 秒内）非常接近另一条记录，则它是潜在匹配，时间最接近的记录被认为是完全匹配。还有其他领域也有助于缩小范围。

我编写了一个存储过程，它在将完整匹配的数据集返回到 C# 应用程序之前在服务器上执行此匹配。我的问题是，将 100 万 (x2) 行拉入并在 C# 中处理它们会更好，还是 sql server 更适合执行这种匹配？如果 Sql server 是，那么使用 datetime 字段配对数据的最快方法是什么？

现在我将表 1/表 2 中的所有记录选择到临时表中，遍历表 1 中的每条记录，在表 2 中查找匹配项并将匹配项（如果存在）存储在临时表中，然后删除两条记录在他们自己的临时表中。

我不得不为我正在写的游戏匆忙写这篇文章，所以请原谅糟糕的（非常糟糕的）程序......它有效，它只是非常低效！整个 SP 可在 pastebin 上找到：http: [//pastebin.com/qaieDsW7](http://pastebin.com/qaieDsW7)

我知道 SP 写得不好，所以说“嘿，笨蛋……写得更好”没有帮助！我正在寻求改进它的帮助，或者关于我应该如何以不同的方式做整个事情的帮助/建议！我有大约 3/5 天的时间来重写它，我可以将截止日期推迟一点，但如果你们能及时帮助我，我宁愿不要！:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:45:18.327

Ultimately, compiling your your data on the database side is preferable 99% of the time, as it's designed for data crunching (through the use of indexes, relations, etc). A lot of your code can be consolidated by the use of joins to compile the data in exactly the format you need. In fact, you can bypass almost all your temp tables entirely and just fill a master Event temp table.

The general pattern is this:

```
INSERT INTO #Events
SELECT <all interested columns>
FROM 
    FireEvent
    LEFT OUTER JOIN HitEvent ON <all join conditions for HitEvent> 
```

This way you match all fire events to zero or more HitEvents. After our discussion in chat, you can even limit it to zero or one hit event by wrapping it in a subquery and using a window function for `ROW_NUMBER() OVER (PARTITION BY HitEvent.EventID ORDER BY ...) AS HitRank` and add a `WHERE HitRank = 1` to the outer query. This is ultimately what you ended up doing and got the results you were expecting (with a bit of work and learning in the process).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:39:33.420

如果数据已经在数据库中，那就是你应该做的工作。您绝对应该学习使用 SQL Server Management Studio 显示和查询计划，并能够注意到和优化嵌套循环等昂贵的计算。

您的任务可能不需要使用任何临时表。当临时表相对较小和/或重用率很高时，它们往往是有效的，这不是你的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T21:33:39.870

如果运行速度不够快并且不要用 C# 重写它，我建议您尝试优化存储过程。为什么要从 SQL Server 中传输数百万行？

不幸的是，我没有安装 SQL Server，因此无法测试您的脚本，但我没有看到任何 CREATE INDEX 语句。如果您不只是为了简洁而跳过它们，那么您肯定应该分析您的查询并查看需要哪些索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T21:47:28.350

所以答案取决于几个因素，比如每个客户端/服务器可用的资源（内存/CPU/并发用户/并发进程等）

以下是一些基本规则，无论您使用什么，它们都会提高您的性能：

*   将一百万行加载到 c# 程序中并不是一个好习惯。除非这是一个具有大量内存的独立进程。
*   Uniqueidentifiers 永远不会胜过 Integers。[比较](https://stackoverflow.com/questions/1151625/int-vs-unique-identifier-for-id-field-in-database)
*   公用表表达式是快速执行匹配的一个很好的替代方案。如何使用[CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)
*   最后，您必须考虑输出。如果有影响用户界面的持续读写，那么你应该在内存中管理它（c#），否则所有的 CRUD 操作都应该保存在数据库中。

# qt - Qt：需要关于 QAbstractScrollArea 的架构建议

> ID：10806923
> 
> 赞同：0
> 
> 时间：2012-05-29T21:25:02.307
> 
> 标签：qt

我想设计一个可滚动的“控件容器”小部件。意思是，一个可以包含实时控件（任何 QWidget 衍生品）的可滚动视图。通过“实时控件”，我的意思是，如果将派生的动画 QWidget 放置在其中，我希望看到动画，因为我上下滚动，而子控件上下移动。

将这样的小部件基于“QAbstractScrollArea”是处理它的正确方法吗？我只是将控件添加为孩子？将它们放在一列中？这样就够了吗？

**编辑：**

这是我的 QAbstractScrollArea 派生类的构造函数代码。为什么我从来没有看到可以滚动控件的滚动条？（根据我控制的高度，并非所有内容都在同一页面上可见）

```
// add controls

    QPushButton *a = new QPushButton(QString("a"), this);
    a->setGeometry(QRect(10,10,100,30));
    QPushButton *b = new QPushButton(QString("b"), this);
    b->setGeometry(QRect(10,40,100,30));
    QPushButton *c = new QPushButton(QString("c"), this);
    c->setGeometry(QRect(10,70,100,30));
    QPushButton *d = new QPushButton(QString("d"), this);
    d->setGeometry(QRect(10,100,100,30));
    QPushButton *e = new QPushButton(QString("e"), this);
    e->setGeometry(QRect(10,130,100,30));
    QPushButton *f = new QPushButton(QString("f"), this);
    f->setGeometry(QRect(10,160,100,30));
    QPushButton *g = new QPushButton(QString("g"), this);
    g->setGeometry(QRect(10,190,100,30));
    QPushButton *h = new QPushButton(QString("h"), this);
    h->setGeometry(QRect(10,220,100,30));

    this->addScrollBarWidget(new QScrollBar(this), Qt::AlignRight);
    setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:30:44.680

基本上，这就足够了。使用具体的 QScrollArea 类和通用容器小部件，然后将控件定位为容器的子级。

```
QScrollArea scrollArea;
QWidget container;

// Create controls and add them to container.

scrollArea.setWidget( &container ); 
```

# c# - 将 HttpContext 用于 InfoPath 2007 代码隐藏

> ID：10806924
> 
> 赞同：0
> 
> 时间：2012-05-29T21:25:08.073
> 
> 标签：c#, infopath-2007

请问我在这里做错了什么？我得到一个 NullReferenceException。

```
string outUrl = "http://whatever.com";
HttpContext context = HttpContext.Current;
context.Response.Redirect(outUrl, false); 
```

当我像这样使用 new 时：

```
HttpContext HC = new HttpContext(); 
```

我得到方法没有重载。我在 VSTA 中使用 .NET 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:52:01.280

HttpContext 无法实例化，只能由您的应用程序创建。

甚至真的很难模拟（创建一个假的），你为什么需要一个？你的应用类型是什么？

# playframework - 在游戏 2 中重新生成进化脚本

> ID：10806926
> 
> 赞同：6
> 
> 时间：2012-05-29T21:25:10.833
> 
> 标签：playframework, playframework-2.0, playframework-evolutions

我还在 play 2 上开发我的应用程序的第一个版本。我怎样才能重新生成进化脚本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:37:25.840

**免责声明**：*它将破坏您现有的数据库并创建新数据库！*

自动进化将在以下情况下自动再生：

*   您正在`dev`模式下运行您的应用程序
*   在`application.conf`你**没有**评论这一行：`ebean.default="models.*"`
*   你的进化文件夹中只有一个文件，它是`1.sql`
*   它在开头有这样的评论：

`# --- Created by Ebean DDL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T14:38:25.140

使用 play 2.4、Slick 3.0.3 和 postgres 放置在进化文件夹中的 *.sql 文件是在 Heroku 中使用以下设置自动生成的：

在 build.sbt 中：

```
 "com.typesafe.play" %% "play-slick" % "1.0.1",
  "com.typesafe.play" %% "play-slick-evolutions" % "1.0.1",
  "com.typesafe.slick" %% "slick" % "3.0.3",
  "org.postgresql" % "postgresql" % "9.4-1201-jdbc41",
  "org.slf4j" % "slf4j-nop" % "1.6.4", 
```

在 application.conf 中：

```
slick.dbs.default.driver ="slick.driver.PostgresDriver$"
slick.dbs.default.db.dataSourceClass = "slick.jdbc.DatabaseUrlDataSource"
slick.dbs.default.db.properties.driver = "org.postgresql.Driver" 
```

在 Procfile 中：

```
-Dplay.evolutions.db.default.autoApply = true 
```

干杯

# nginx - 增加 504 超时错误

> ID：10806928
> 
> 赞同：76
> 
> 时间：2012-05-29T21:25:23.447
> 
> 标签：nginx, timeout, fastcgi, gateway

有什么办法可以使错误 504 网关超时更长，如果是这样，如何以及在哪里更改文件。我在centos 6上使用nginx

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-01T13:00:59.240

根据您拥有的网关类型，您应该使用以下内容：

```
proxy_read_timeout 600s; 
```

检查文档： http: [//nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-29T07:53:22.287

如果是`fastcgi`超时错误，则需要增加`fastcgi_read_timeout`.

```
# /etc/nginx/conf.d/example.com.conf
server {

    location ~ \.(php)$ {
        fastcgi_pass unix:/var/run/php74-example.com.sock;
        fastcgi_read_timeout 300s; 
```

错误日志）上游超时

```
# tail -f example.com.error.log
2020/12/29 14:51:42 [error] 30922#30922: 
*9494 upstream timed out (110: Connection timed out) while reading response header from upstream,
...
upstream: "fastcgi://unix:/var/run/php74-example.com.sock",
... 
```

nginx 手册）

```
Default: fastcgi_read_timeout 60s;
Context: http, server, location 
```

[http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_read_timeout](http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_read_timeout)

* * *

在 Chrome DevTools 中调用运行时间超过 60 秒的脚本的结果。

默认60s

[![在此处输入图像描述](../Images/638e8ea7aed1a9938d33ff712c3a48ed.png)](https://i.stack.imgur.com/psd0y.png)

fastcgi_read_timeout 300s

[![在此处输入图像描述](../Images/2d150f87cd64d7783f94f675ac7814c0.png)](https://i.stack.imgur.com/BHSC1.png)

# vb.net - VB.NET 其他块

> ID：10806931
> 
> 赞同：0
> 
> 时间：2012-05-29T21:25:28.667
> 
> 标签：vb.net

我有以下内容：

```
 ... Else row("Deg") = txtEditOtherDegree.Text 
```

我如何做一个 Else 块，因为我需要向 Else 部分添加更多内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:27:04.210

你把它放在一个单独的行上，并使用`End If`：

```
If ... Then
  ...
Else
  row("Deg") = txtEditOtherDegree.Text
  ...
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:02:08.807

我认为您需要多个这样的子句：

```
If ... Then
    ' Statements
ElseIf ... Then
    ' More Statements
ElseIf ... Then
    ' Other Statements
Else
    ' Final Statements
End If 
```

# .net - 从客户端应用程序调用 WCF 服务会收到 EndpointNotFoundException，但不会在浏览器上出错

> ID：10806940
> 
> 赞同：0
> 
> 时间：2012-05-29T21:26:13.227
> 
> 标签：.net, wcf, soap

我有一个新创建的 WCF .SVC，它托管在一个 ASP.NET 网站中，该网站还托管传统的 ASMX 样式服务。

如果我调用 SVC 中包含的单个方法，我会收到以下消息。

*“没有`http://localhost/REDACTEDSITE/LicenseVerification.svc`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。”*

但是，我可以将该链接粘贴到本地计算机上的任何浏览器中并获得“**这是 Windows© Communication Foundation 服务。此服务的元数据发布当前已禁用。** ”页面。

IIS 日志显示浏览器正在发出 GET 请求并收到 200 响应。WCF 客户端发出 POST 请求并接收 404.0 响应。

这些是我使用的最新配置设置。它们有点小。

**主持人**

```
<system.serviceModel>
   <client entries for other services that work>

    <services>
      <service name="LicenseVerification.svc">
        <endpoint address="LicenseVerification.svc"
            binding="basicHttpBinding" bindingConfiguration="" contract="Management.ILicenseVerification" />
      </service>
    </services>

  </system.serviceModel> 
```

**客户**

```
<system.serviceModel>
    <client>
      <endpoint address="http://localhost/REDACTEDSITE/LicenseVerification.svc"
          binding="basicHttpBinding" bindingConfiguration="" contract="Management.ILicenseVerification"
          name="LicenseVerificationClient">
      </endpoint>
    </client>
  </system.serviceModel> 
```

**合同**

```
 [ServiceContract]
    public interface ILicenseVerification
    {
        [WebInvoke(Method="GET")] //have tried WebGet()
        [OperationContract]
        LicenseInfo GetProfileLicenseInfo(string profileName);
    } 
```

**服务内涵**

```
 public class LicenseVerification : ILicenseVerification
    {
        LicenseInfo ILicenseVerification.GetProfileLicenseInfo(string profileName)
        {
            ProfileInfo _pi = ProfileHelper.GetRequestedProfileInfo(profileName);
            if (_pi == null)
            {
                return null;
            }

            return LicenseVerifier.GetLicenseInfo(_pi);
        }
    } 
```

我已经尝试重新注册 asp.net 4.0，修复服务模型，重新启动 IIS，使用 MS 服务配置实用程序和手动删除和重新创建配置文件，但我仍然无法让它工作。

这些都是小请求（几 KB），所以我认为这不是大小问题。

唯一突出的是 GET/POST，但这对于我制作的 SVC 之前不是问题。

我的本地环境是 Win7/64、VS2010、.NET 4。

请让我知道还有什么可以尝试的。我已经剔除了相同的各种 SO 帖子并且没有运气（即使是那些看起来明显不同的帖子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:53:21.323

`<service>`服务器配置中元素的“名称”属性值不正确。它应该列出**服务类的完全限定名称**（可能是`Management.LicenseVerification`），而不是 .svc 文件的名称。

还有几个问题：

*   你`[WebInvoke(Method = "GET")]`在你的操作中使用。`[WebGet]`如果您希望通过 GET 访问它，请改用
*   [WebInvoke]（和 [WebGet]）仅适用于使用`webHttpBinding`并且具有端点行为的端点`<webHttp/>`，而您没有（您正在使用`basicHttpBinding`）的端点。
*   浏览器正在发送 GET 请求，但它没有调用操作，它可能正在获取服务帮助页面。所以它可能不是真正从浏览器“工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:12:57.217

在遵循 carlosfigueira 的建议并删除 [web*] 属性并在配置中修复服务名称后，我能够获得正确的服务帮助页面，但这仍然无法从客户那里获得。

但是，我现在能够使用 svcutil 生成我的服务所需的代码和配置。我从生成的 output.config 文件中发现端点地址在末尾重复，就像这样......

```
http://localhost/REDACTEDSITE/LicenseVerification.svc/LicenseVerification.svc 
```

这是客户端为了使用服务而需要命中的端点，当我更新客户端配置以命中该端点时，它工作了！

这仍然不是最佳的，所以我尝试从我的服务配置中删除地址元素，使其现在看起来像这样（无行为配置）。

```
 <service name="Management.LicenseVerification">
    <endpoint binding="basicHttpBinding" contract="Management.ILicenseVerification" />
  </service> 
```

它仍然有效！

我有点困惑为什么这会附加地址元素，除了它可能是在 asp.net 中托管它的副作用。也许在这种情况下不需要配置地址元素（和基地址）？

无论如何，这现在正在起作用。

# c++ - 在 add_custom_command 之后在 source_group 中添加了两次文件

> ID：10806945
> 
> 赞同：0
> 
> 时间：2012-05-29T21:26:16.867
> 
> 标签：c++, visual-studio, cmake

我正在尝试为我正在从事的项目（v2.8.8）学习 CMAKE。我正在尝试将自定义命令添加到从每个资源生成标头的一组资源文件中。然后，我想将这些资源和生成的标头添加到我的 Visual Studio 2005 项目中的 source_groups

这是我到目前为止所拥有的：

```
SET (MYAPP_RES_FILES
    ${MYAPP_RES_DIR}/file.1
    ${MYAPP_RES_DIR}/file.2
    ${MYAPP_RES_DIR}/file.3
)

MACRO (MYTRANSFORM IN_FILES OUT_HEADERS)
    FOREACH (I ${${IN_FILES}})
        GET_FILENAME_COMPONENT (IN_FILE ${I} ABSOLUTE)
        GET_FILENAME_COMPONENT (OUT_HEADER ${I} NAME_WE)
        SET (OUT_HEADER ${CMAKE_CURRENT_BINARY_DIR}/res/generated/gen_${OUT_HEADER}.h)
        ADD_CUSTOM_COMMAND (OUTPUT ${OUT_HEADER}
            MAIN_DEPENDENCY ${IN_FILE}
            COMMAND ${MY_TOOL} -o ${OUT_HEADER} ${IN_FILE}
        )
        SET(${OUT_HEADERS} ${${OUT_HEADERS}} ${OUT_HEADER})
    ENDFOREACH (I)
ENDMACRO (MYTRANSFORM)

SOURCE_GROUP ("res" FILES
    ${MYAPP_RES_FILES}
)

MYTRANSFORM (MYAPP_RES_FILES MYAPP_RES_HEADER_FILES)
SOURCE_GROUP ("res\\generated" FILES
    ${MYAPP_RES_HEADER_FILES}
)

SET (MYAPP_FILES ${MYAPP_FILES} ${MYAPP_RES_FILES})
SET (MYAPP_FILES ${MYAPP_FILES} ${MYAPP_RES_HEADER_FILES})

ADD_EXECUTABLE (${MYAPP_PROJECT_NAME} ${MYAPP_FILES}) 
```

它似乎有效，但每个 res 文件都被添加到它们的 source_group 中两次。一个没有自定义命令，一个有自定义命令。如果我删除该`MAIN_DEPENDENCY ${IN_FILE}`行，则每个资源文件只添加一个，但它们没有自定义命令。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:43:49.433

将资源文件添加到可执行文件和源组中似乎存在问题。我放弃了`SET (MYAPP_FILES ${MYAPP_FILES} ${MYAPP_RES_FILES})`，它解决了这个问题

# php - 改进此 AJAX 功能以更新“like this”链接

> ID：10806946
> 
> 赞同：0
> 
> 时间：2012-05-29T21:26:27.050
> 
> 标签：php, mysql, ajax

我问了一个关于这个的问题，但帖子变得混乱，失去了问题的要点。基本上我正在尝试设置 ajax，以便“喜欢”或“不喜欢”链接更新数据库并显示新状态，而无需刷新页面。

所以我有一个“view.php”页面，其中包含由 PHP 循环生成的链接。它们看起来像这样：

```
<div class="tools">
<a href="processor.php?c=cars&p=2&s=d&u=i&pid=999999990" title="Click to LIKE this photo" class="like do_like">like</a>
</div>

<div class="tools">
<a href="processor.php?c=cars&p=2&s=d&u=d&pid=999999991" title="Click to UNLIKE this photo" class="like do_unlike">unlike</a>
</div> 
```

请注意，每个链接都有两个类：首先是“like”类，然后是“do_like”类或“do_unlike”类，具体取决于它是指向“like”的链接还是指向“unlike”的链接。（最初我只有“do_like”和“do_unlike”类，我用来通过css将链接转换为翻转类型的图像/图标，但我也添加了“like”类，用于ajax - 见以下。）

当用户单击其中一个链接时，接收处理器.php 脚本从查询字符串中获取变量值对，并使用它们来更新数据库，然后构建链接的新形式，并将其回显。链接的新形式是“喜欢这个”链接变成“不喜欢这个”链接，反之亦然。所以对于上面的第一个“like”链接，数据库返回：

```
processor.php?c=cars&p=2&s=d&u=d&pid=999999990 
```

它是查询字符串中的“u”变量，它决定了 processor.php 页面是在“like”（u=i）的情况下将数据插入数据库，还是从数据库中删除数据“不相似”（u = d）的情况。（我正在为数据库插入/删除使用准备好的 PDO 语句。）

我正在使用 jquery/ajax 插入这个新建的链接来代替被点击的链接，而无需刷新页面。

为此，在“view.php”页面中，我包含了 jquery.js 并使用了以下 javascript 函数：

```
<script type="text/javascript">
$(function() {
$("a.like").click(function(e){
    e.preventDefault();
    var link = $(this);
    $.get(
        $(this).attr('href'),
        function(data){
            link.attr('href',data);
    });
});
});
</script> 
```

问题是，虽然这个函数将数据发送到处理脚本OK，并且在没有刷新页面的情况下更改了页面中链接的href属性（我可以通过单击后在浏览器中复制链接来看到它正在这样做），它不会更改链接的文本、类别或标题。因此，就我而言，我必须刷新页面以查看链接实际上已更改的任何视觉提示（我不妨只在 processor.php 页面中使用标头重定向）。

如何修改函数（或更改它）以使其**也**替换链接的文本、类和标题？这样（例如，转换“喜欢”链接）：

```
<a href="processor.php?c=cars&p=2&s=d&u=i&pid=999999990" title="Click to LIKE this photo" class="like do_like">like</a> 
```

变成：

```
<a href="processor.php?c=cars&p=2&s=d&u=d&pid=999999990" title="Click to UNLIKE this photo" class="like do_unlike">unlike</a> 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:34:16.467

使用 if 条件检查当前状态并更新属性。

```
$(function () {

    $("a.like").click(function (e) {
        e.preventDefault();
        var link = $(this);           
        var alreadyLiked = (link.text() == "UnLike") ? true : false;            
        $.get(link.attr('href'), function (data) {
        link.attr('href', data);
        if (alreadyLiked) {
            link.removeClass("do_unlike").addClass("do_like").text("Like").attr("title", "Click to LIKE this photo");

        }
        else {
            link.removeClass("do_like").addClass("do_unlike").text("UnLike").attr("title", "Click to UN LIKE this photo");
        }
        alreadyLiked = !alreadyLiked;           
    });

    });
}); 
```

此代码将起作用。经测试。假设每次获取请求都会正确地为您提供 url（用于删除/插入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:39:31.613

您还需要更改课程和标题：

```
[...]
$.get(
    $(this).attr('href'),
    function(data){
        link.attr('href',data);
        link.toggleClass('do_like do_unlike');
        link..attr('title', 'change title here');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:08:52.713

这是基于 Shyju 和 Pitchinnate 的响应（感谢两者！），它使用 css 翻转链接转换方法（我还包括淡入淡出效果）来工作：

```
<script type="text/javascript">
$(function() {
$("a.like").click(function(e){
    e.preventDefault();
    var link = $(this);
    $.get(
        $(this).attr('href'),
        function(data){
            link.attr('href',data);
            link.toggleClass('do_like do_unlike');

var titleState=(link.attr("title") == "Click to LIKE this photo") ? "no" : "yes";
if(titleState=="yes")
    {
    link.attr('title', 'Click to LIKE this photo');
    }
    else
    {
    link.attr('title', 'Click to UNLIKE this photo');
    }

    });

$(this).parents('div.tools').fadeOut(1000);
$(this).parents('div.tools').fadeIn('slow');

});
});
</script> 
```

# debian - 构建一个创建共享对象的 debian 包

> ID：10806948
> 
> 赞同：0
> 
> 时间：2012-05-29T21:26:39.170
> 
> 标签：debian, deb

我有一个构建共享对象库的库。它是 git.netfilter.org 上的 libnetfilter_cthelper 库。./conifgure;make;make install 上的库安装共享对象库。当我创建一个 debian 包时，它确实创建了一个共享对象，但它没有任何符号。

有没有简单的方法来创建一个构建共享对象文件的 debian 包？有什么办法调试吗？或者有什么好的教程。我一直在阅读很多没有清晰步骤来理解或构建包的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:42:06.717

最好的参考信息是 Dancer's，如果您想了解预期会发生什么以及它可能破坏的所有方式：http: [//www.netfort.gr.jp/~dancer/column/libpkg-guide/ libpkg-guide.html](http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html)。不过，这可能不是您想要的。这不是一个教程，永远不能被称为“干净的步骤”。

如果没有看到您的 debian/rules 文件，很难知道您的情况可能发生了什么问题。你的意思是你的包中的 .so 文件没有导出任何符号，或者它没有任何调试符号？我会通过首先检查 foo.so 的版本是否`$builddir/debian/{$packagename,tmp}`导出了正确的符号来开始调试这样的问题。如果不是，则问题出在上游构建系统或您使用它的方式上。

# salesforce - VisualForce 中的嵌套表问题

> ID：10806950
> 
> 赞同：2
> 
> 时间：2012-05-29T21:26:48.633
> 
> 标签：salesforce, apex-code, visualforce

我在 force.com 顶点模板的 pageBlockSection 中有一个表格。这工作正常，直到我尝试在我的一个单元格内使用 outputText 标记。当我使用这个标签时，额外的单元格和行被添加到标记中。但是，如果我不将表格嵌套在 pageBlockSection 标记内，则不会添加此类单元格。

我是否错误地使用了 outputText，或者 force.com 上是否存在错误？

这是将重现此问题的最小标记：

```
<apex:pageBlock title="My Page Block">    
  <apex:pageBlockSection title="My Section">   
    <table>
      <tr><th>1</th><th>2</th></tr>
      <tr>
        <td>
          <apex:outputText value="{0}">
            <apex:param value="one" />
          </apex:outputText>
        </td>
        <td>
          <apex:outputText value="{0}">
            <apex:param value="two" />
          </apex:outputText>
        </td>
      </tr>
    </table>
  </apex:pageBlockSection>    
</apex:pageBlock> 
```

这是 force.com 呈现的输出：

```
<table>
  <tbody>
    <tr><th>1</th><th>2</th></tr>
    <tr>
      <td></td>
      <td colspan="2" class="dataCol  first ">one</td>
    </tr>
    <tr>
      <td colspan="2" class="dataCol "></td>
      <td></td>
      <td colspan="2" class="dataCol ">two</td>
    </tr>
    <tr>
      <td colspan="2" class="dataCol  last "></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:08:12.900

我不能说这实际上是否是一个错误，但我相信这是由`<apex:pageBlockSection>`这些自动将嵌套内容添加到表格中引起的，然后与您自己的表格发生冲突。

我建议要么删除`<apex:pageBlockSection>`并将您的表格直接放入`<apex:pageBlock>`，或者删除您自己的表格并利用该`<apex:pageBlockSectionItem>`元素：

```
<apex:pageBlock title="My Page Block">    
  <apex:pageBlockSection title="My Section">
    <apex:pageBlockSectionItem >
      1
    </apex:pageBlockSectionItem>
    <apex:pageBlockSectionItem >
      2
    </apex:pageBlockSectionItem>
    <apex:pageBlockSectionItem >
      <apex:outputText value="{0}">
        <apex:param value="one" />
      </apex:outputText>
    </apex:pageBlockSectionItem>
    <apex:pageBlockSectionItem >
      <apex:outputText value="{0}">
        <apex:param value="two" />
      </apex:outputText>
    </apex:pageBlockSectionItem>
  </apex:pageBlockSection>
</apex:pageBlock> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T14:44:37.893

通过将表格放在 outputPanel 标记中，我能够解决这个问题。

```
<apex:pageBlockSection>
   <apex:outputPanel>
      <table>
      </table>
   </apex:outputPanel>
</apex:pageBlockSection> 
```

# c# - 如何限制并发异步 I/O 操作的数量？

> ID：10806951
> 
> 赞同：138
> 
> 时间：2012-05-29T21:26:53.750
> 
> 标签：c#, asynchronous, async-await, concurrency, task-parallel-library

```
// let's say there is a list of 1000+ URLs
string[] urls = { "http://google.com", "http://yahoo.com", ... };

// now let's send HTTP requests to each of these URLs in parallel
urls.AsParallel().ForAll(async (url) => {
    var client = new HttpClient();
    var html = await client.GetStringAsync(url);
}); 
```

这是问题所在，它同时启动了 1000 多个 Web 请求。有没有一种简单的方法来限制这些异步 http 请求的并发量？因此，在任何给定时间下载的网页不超过 20 个。如何以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-05-30T06:01:57.147

您绝对可以使用 .NET 4.5 Beta 在最新版本的 async for .NET 中执行此操作。'usr' 的上一篇文章指出了 Stephen Toub 写的一篇好文章，但鲜为人知的消息是异步信号量实际上已进入 .NET 4.5 的 Beta 版本

如果你看看我们心爱的[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/System.Threading.SemaphoreSlim%28v=vs.110%29.aspx)类（你应该使用它，因为它比原来的性能更好[`Semaphore`](http://msdn.microsoft.com/en-us/library/system.threading.semaphore%28v=vs.110%29.aspx)），它现在拥有[`WaitAsync(...)`](http://msdn.microsoft.com/en-us/library/hh462847%28v=vs.110%29)一系列重载，以及所有预期的参数 - 超时间隔、取消令牌、所有你常用的调度朋友： )

Stephen 还写了一篇关于 .NET 4.5 Beta 版新特性的最新博客文章，请参阅[What's New for Parallelism in .NET 4.5 Beta](https://blogs.msdn.microsoft.com/pfxteam/2012/02/29/whats-new-for-parallelism-in-net-4-5-beta/)。

最后，这里有一些关于如何使用 SemaphoreSlim 进行异步方法限制的示例代码：

```
public async Task MyOuterMethod()
{
    // let's say there is a list of 1000+ URLs
    var urls = { "http://google.com", "http://yahoo.com", ... };

    // now let's send HTTP requests to each of these URLs in parallel
    var allTasks = new List<Task>();
    var throttler = new SemaphoreSlim(initialCount: 20);
    foreach (var url in urls)
    {
        // do an async wait until we can schedule again
        await throttler.WaitAsync();

        // using Task.Run(...) to run the lambda in its own parallel
        // flow on the threadpool
        allTasks.Add(
            Task.Run(async () =>
            {
                try
                {
                    var client = new HttpClient();
                    var html = await client.GetStringAsync(url);
                }
                finally
                {
                    throttler.Release();
                }
            }));
    }

    // won't get here until all urls have been put into tasks
    await Task.WhenAll(allTasks);

    // won't get here until all tasks have completed in some way
    // (either success or exception)
} 
```

最后但可能值得一提的是使用基于 TPL 的调度的解决方案。您可以在 TPL 上创建尚未启动的委托绑定任务，并允许自定义任务调度程序限制并发。事实上，这里有一个 MSDN 示例：

另请参阅[任务调度程序](https://msdn.microsoft.com/library/system.threading.tasks.taskscheduler.aspx)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-06-01T12:52:56.480

如果您有一个 IEnumerable（即 URL 的字符串）并且您希望同时对其中的每一个执行 I/O 绑定操作（即发出异步 http 请求），并且您还可以选择设置最大并发数实时 I/O 请求，您可以这样做。这种方式你不使用线程池等，该方法使用信号量来控制最大并发 I/O 请求，类似于滑动窗口模式，一个请求完成，离开信号量，下一个进入。

用法：

```
await ForEachAsync(urlStrings, YourAsyncFunc, optionalMaxDegreeOfConcurrency); 
```

```
public static Task ForEachAsync<TIn>(
        IEnumerable<TIn> inputEnumerable,
        Func<TIn, Task> asyncProcessor,
        int? maxDegreeOfParallelism = null)
    {
        int maxAsyncThreadCount = maxDegreeOfParallelism ?? DefaultMaxDegreeOfParallelism;
        SemaphoreSlim throttler = new SemaphoreSlim(maxAsyncThreadCount, maxAsyncThreadCount);

        IEnumerable<Task> tasks = inputEnumerable.Select(async input =>
        {
            await throttler.WaitAsync().ConfigureAwait(false);
            try
            {
                await asyncProcessor(input).ConfigureAwait(false);
            }
            finally
            {
                throttler.Release();
            }
        });

        return Task.WhenAll(tasks);
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-26T21:30:46.263

有很多陷阱，在错误情况下直接使用信号量可能会很棘手，所以我建议使用[AsyncEnumerator NuGet 包](https://www.nuget.org/packages/AsyncEnumerator/1.1.0)而不是重新发明轮子：

```
// let's say there is a list of 1000+ URLs
string[] urls = { "http://google.com", "http://yahoo.com", ... };

// now let's send HTTP requests to each of these URLs in parallel
await urls.ParallelForEachAsync(async (url) => {
    var client = new HttpClient();
    var html = await client.GetStringAsync(url);
}, maxDegreeOfParalellism: 20); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-29T21:49:04.917

不幸的是，.NET Framework 缺少用于编排并行异步任务的最重要的组合器。没有内置这样的东西。

看看最受尊敬的 Stephen Toub 构建的[AsyncSemaphore类。](https://devblogs.microsoft.com/pfxteam/building-async-coordination-primitives-part-5-asyncsemaphore/)您想要的称为信号量，并且您需要它的异步版本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-09T13:04:10.800

SemaphoreSlim 在这里非常有用。这是我创建的扩展方法。

```
 /// <summary>
    /// Concurrently Executes async actions for each item of <see cref="IEnumerable<typeparamref name="T"/>
    /// </summary>
    /// <typeparam name="T">Type of IEnumerable</typeparam>
    /// <param name="enumerable">instance of <see cref="IEnumerable<typeparamref name="T"/>"/></param>
    /// <param name="action">an async <see cref="Action" /> to execute</param>
    /// <param name="maxActionsToRunInParallel">Optional, max numbers of the actions to run in parallel,
    /// Must be grater than 0</param>
    /// <returns>A Task representing an async operation</returns>
    /// <exception cref="ArgumentOutOfRangeException">If the maxActionsToRunInParallel is less than 1</exception>
    public static async Task ForEachAsyncConcurrent<T>(
        this IEnumerable<T> enumerable,
        Func<T, Task> action,
        int? maxActionsToRunInParallel = null)
    {
        if (maxActionsToRunInParallel.HasValue)
        {
            using (var semaphoreSlim = new SemaphoreSlim(
                maxActionsToRunInParallel.Value, maxActionsToRunInParallel.Value))
            {
                var tasksWithThrottler = new List<Task>();

                foreach (var item in enumerable)
                {
                    // Increment the number of currently running tasks and wait if they are more than limit.
                    await semaphoreSlim.WaitAsync();

                    tasksWithThrottler.Add(Task.Run(async () =>
                    {
                        await action(item).ContinueWith(res =>
                        {
                            // action is completed, so decrement the number of currently running tasks
                            semaphoreSlim.Release();
                        });
                    }));
                }

                // Wait for all of the provided tasks to complete.
                await Task.WhenAll(tasksWithThrottler.ToArray());
            }
        }
        else
        {
            await Task.WhenAll(enumerable.Select(item => action(item)));
        }
    } 
```

样品用法：

```
await enumerable.ForEachAsyncConcurrent(
    async item =>
    {
        await SomeAsyncMethod(item);
    },
    5); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-21T01:49:55.487

[.NET 6](https://docs.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6)发布后（2021 年 11 月），限制并发异步 I/O 操作量的推荐方式是[`Parallel.ForEachAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreachasync)API，带有[`MaxDegreeOfParallelism`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.paralleloptions.maxdegreeofparallelism)配置。以下是如何在实践中使用它：

```
// let's say there is a list of 1000+ URLs
string[] urls = { "http://google.com", "http://yahoo.com", /*...*/ };
var client = new HttpClient();
var options = new ParallelOptions() { MaxDegreeOfParallelism = 20 };

// now let's send HTTP requests to each of these URLs in parallel
await Parallel.ForEachAsync(urls, options, async (url, cancellationToken) =>
{
    var html = await client.GetStringAsync(url, cancellationToken);
}); 
```

在上面的示例中，`Parallel.ForEachAsync`任务是异步等待的。[`Wait`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wait)如果需要，您也可以同步它，这将阻塞当前线程，直到所有异步操作完成。同步`Wait`的优点是如果出现错误，所有异常都会被传播。相反，[`await`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/await)操作符通过设计仅传播第一个异常。如果这是一个问题，您可以在[此处](https://stackoverflow.com/questions/18314961/i-want-await-to-throw-aggregateexception-not-just-the-first-exception "我想等待抛出 AggregateException，而不仅仅是第一个异常")找到解决方案。

[（注意：也传播结果的扩展方法的惯用实现`ForEachAsync`，可以在此答案的[第 4 版中找到）](https://stackoverflow.com/revisions/64455549/4)]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T21:32:14.937

尽管 1000 个任务可能会很快排队，但并行任务库只能处理等于机器中 CPU 内核数量的并发任务。这意味着如果您有一台四核机器，那么在给定时间只会执行 4 个任务（除非您降低 MaxDegreeOfParallelism）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-03-29T08:36:08.230

这不是好的做法，因为它会更改全局变量。它也不是异步的通用解决方案。但是对于 HttpClient 的所有实例来说都很容易，如果这就是你所追求的。你可以简单地尝试：

```
System.Net.ServicePointManager.DefaultConnectionLimit = 20; 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-05-29T21:34:29.780

应该使用并行计算来加速 CPU 密集型操作。这里我们讨论的是 I/O 绑定操作。你的实现应该是[纯粹的 async](https://stackoverflow.com/questions/4431743/map-reduce-with-f-agents/4438256#4438256)，除非你在你的多核 CPU 上压倒了繁忙的单核。

*编辑* 我喜欢 usr 提出的在此处使用“异步信号量”的建议。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-04-29T08:34:32.407

本质上，您将要为要访问的每个 URL 创建一个操作或任务，将它们放在一个列表中，然后处理该列表，从而限制可以并行处理的数量。

[我的博客文章](http://blog.danskingdom.com/limit-the-number-of-c-tasks-that-run-in-parallel/)展示了如何使用 Tasks 和 Actions 执行此操作，并提供了一个示例项目，您可以下载并运行以查看两者的实际效果。

# 有行动

如果使用 Actions，您可以使用内置的 .Net Parallel.Invoke 函数。在这里，我们将其限制为最多并行运行 20 个线程。

```
var listOfActions = new List<Action>();
foreach (var url in urls)
{
    var localUrl = url;
    // Note that we create the Task here, but do not start it.
    listOfTasks.Add(new Task(() => CallUrl(localUrl)));
}

var options = new ParallelOptions {MaxDegreeOfParallelism = 20};
Parallel.Invoke(options, listOfActions.ToArray()); 
```

# 有任务

Tasks 没有内置功能。但是，您可以使用我在博客上提供的那个。

```
 /// <summary>
    /// Starts the given tasks and waits for them to complete. This will run, at most, the specified number of tasks in parallel.
    /// <para>NOTE: If one of the given tasks has already been started, an exception will be thrown.</para>
    /// </summary>
    /// <param name="tasksToRun">The tasks to run.</param>
    /// <param name="maxTasksToRunInParallel">The maximum number of tasks to run in parallel.</param>
    /// <param name="cancellationToken">The cancellation token.</param>
    public static async Task StartAndWaitAllThrottledAsync(IEnumerable<Task> tasksToRun, int maxTasksToRunInParallel, CancellationToken cancellationToken = new CancellationToken())
    {
        await StartAndWaitAllThrottledAsync(tasksToRun, maxTasksToRunInParallel, -1, cancellationToken);
    }

    /// <summary>
    /// Starts the given tasks and waits for them to complete. This will run the specified number of tasks in parallel.
    /// <para>NOTE: If a timeout is reached before the Task completes, another Task may be started, potentially running more than the specified maximum allowed.</para>
    /// <para>NOTE: If one of the given tasks has already been started, an exception will be thrown.</para>
    /// </summary>
    /// <param name="tasksToRun">The tasks to run.</param>
    /// <param name="maxTasksToRunInParallel">The maximum number of tasks to run in parallel.</param>
    /// <param name="timeoutInMilliseconds">The maximum milliseconds we should allow the max tasks to run in parallel before allowing another task to start. Specify -1 to wait indefinitely.</param>
    /// <param name="cancellationToken">The cancellation token.</param>
    public static async Task StartAndWaitAllThrottledAsync(IEnumerable<Task> tasksToRun, int maxTasksToRunInParallel, int timeoutInMilliseconds, CancellationToken cancellationToken = new CancellationToken())
    {
        // Convert to a list of tasks so that we don't enumerate over it multiple times needlessly.
        var tasks = tasksToRun.ToList();

        using (var throttler = new SemaphoreSlim(maxTasksToRunInParallel))
        {
            var postTaskTasks = new List<Task>();

            // Have each task notify the throttler when it completes so that it decrements the number of tasks currently running.
            tasks.ForEach(t => postTaskTasks.Add(t.ContinueWith(tsk => throttler.Release())));

            // Start running each task.
            foreach (var task in tasks)
            {
                // Increment the number of tasks currently running and wait if too many are running.
                await throttler.WaitAsync(timeoutInMilliseconds, cancellationToken);

                cancellationToken.ThrowIfCancellationRequested();
                task.Start();
            }

            // Wait for all of the provided tasks to complete.
            // We wait on the list of "post" tasks instead of the original tasks, otherwise there is a potential race condition where the throttler's using block is exited before some Tasks have had their "post" action completed, which references the throttler, resulting in an exception due to accessing a disposed object.
            await Task.WhenAll(postTaskTasks.ToArray());
        }
    } 
```

然后创建任务列表并调用函数让它们运行，一次最多同时运行 20 个，你可以这样做：

```
var listOfTasks = new List<Task>();
foreach (var url in urls)
{
    var localUrl = url;
    // Note that we create the Task here, but do not start it.
    listOfTasks.Add(new Task(async () => await CallUrl(localUrl)));
}
await Tasks.StartAndWaitAllThrottledAsync(listOfTasks, 20); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-05-29T21:43:57.120

使用`MaxDegreeOfParallelism`，这是您可以在 中指定的选项[`Parallel.ForEach()`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach%28v=vs.110%29.aspx)：

```
var options = new ParallelOptions { MaxDegreeOfParallelism = 20 };

Parallel.ForEach(urls, options,
    url =>
        {
            var client = new HttpClient();
            var html = client.GetStringAsync(url);
            // do stuff with html
        }); 
```

# firefox - CSS 过渡，通过负上/左绝对位置

> ID：10806952
> 
> 赞同：0
> 
> 时间：2012-05-29T21:27:04.087
> 
> 标签：firefox, css, css-transitions

[http://jsfiddle.net/KgcM9/1/](http://jsfiddle.net/KgcM9/1/)

我想将鼠标悬停在`<header>`并且图像从屏幕顶部过渡出来，然后从屏幕左侧重新出现回到原始位置。

上述小提琴的问题是，如果鼠标退出`<header>`，则过渡停止并且图像从屏幕顶部返回。

此外，过渡首先将图像移动到 x：-300，y：400，使其不可见，然后将其移动到 x：700，y：-1700，这是一个完整的 hack，因此它似乎正在进入从左下角.. 用 CSS 做这件事有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:20:09.213

不确定这是否有帮助： http: [//jsfiddle.net/JyPXR/2/](http://jsfiddle.net/JyPXR/2/)添加隐藏溢出并使用左/上坐标。

# hadoop - 用于实时分析解决方案的 HBase 模式/键

> ID：10806955
> 
> 赞同：5
> 
> 时间：2012-05-29T21:27:19.787
> 
> 标签：hadoop, primary-key, analytics, hbase, schema-design

我们正在考虑使用 HBase 进行实时分析。

在 HBase 之前，我们将在我们的日志文件上运行 Hadoop Map Reduce 作业并聚合数据，并将细粒度的聚合结果存储在 HBase 中，以便对聚合数据进行实时分析和查询。因此，HBase 表将具有预先聚合的数据（按日​​期）。

我的问题是：如何最好地设计 HBase 数据库的架构和主键设计，以实现快速但灵活的查询。

例如，假设我们将以下行存储在数据库中：

```
timestamp, client_ip, url, referrer, useragent 
```

假设我们的 map-reduce 作业产生三个不同的输出字段，我们希望将每个字段存储在一个单独的“表”（HBase 列族）中：

*   日期、操作系统、浏览器
*   日期、网址、推荐人
*   日期、网址、国家

（我们的 map-reduce 作业从用户代理和 client_ip 数据中获取操作系统、浏览器和国家字段。）

我的问题是：我们如何构建 HBase 模式以允许对这些字段中的任何一个或组合进行快速、近实时和灵活的查找？例如，用户必须能够指定：

*   operating_system 按日期（“此日期范围内有多少 iPad 用户？”）
*   url 按国家和日期（“上个月有多少用户从该国家/地区访问此 url？”）

基本上还有其他自定义查询？

我们应该使用这样的键：

*   date_os_browser
*   date_url_referrer
*   date_url_country

如果是这样，我们可以完成上面指定的查询吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:52:32.383

你已经掌握了它的要点，是的。您的两个示例查询都按日期过滤，这是该域中自然的“主要”维度（事件报告）。

关于以日期开始密钥的一个常见注意事项是它会导致“热点”问题；该问题的本质是，时间上连续的日期范围也将是连续的服务器，因此如果您总是插入和查询“现在”（或“最近”）发生的数据，一台服务器将获得所有负载而其他人则无所事事。这听起来不像是插入的大问题，因为您将专门进行批量加载，但读取时可能会出现问题；如果您的所有查询都发送到您的 20 台服务器中的一台，那么您的容量将有效地达到 5%。

OpenTSDB 通过在日期前添加一个 3 字节的“metric id”来解决这个问题，这可以很好地在整个集群中喷射更新。如果你有类似的东西，并且你知道你总是（或通常）在大多数查询中包含一个过滤器，你可以使用它。或者您可以在日期的某些高阶部分（如“月份”）前面加上哈希，然后至少您的读取会更加分散。

# c# - 从字符串创建类

> ID：10806959
> 
> 赞同：0
> 
> 时间：2012-05-29T21:27:51.857
> 
> 标签：c#, class, reflection, activator

我正在尝试从字符串中保存的名称创建一个类。我尝试了很多东西，但总是得到“值不能为空”

这是课程

```
public static readonly MigraDoc.DocumentObjectModel.Color Aquamarine
Member of MigraDoc.DocumentObjectModel.Colors 
```

**AquaMarine**是 MigraDoc.DocumentObjectModel.Colors 中的一个类，是**Color的一个类**

这是我尝试过的，与我认为应该工作的一样接近：

```
Color myColor = (Color)Activator.CreateInstance(Type.GetType("MigraDoc.DocumentObjectModel.Colors+SlateBlue")); 
//+ for nested classes 
```

一个变种：

```
Color myColor = (Color)Activator.CreateInstance(Type.GetType("MigraDoc.DocumentObjectModel+Colors+SlateBlue")); 
```

但我总是得到：

```
Value cannot be null.
Parameter name: type 
```

我觉得解决方案应该不会很远......有什么想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:33:12.480

你得到空参数异常，因为`Type.GetType()`返回空值。您指定为参数的`Type.GetType()`是字段名称，而不是类型名称。类型名称将是`"MigraDoc.DocumentObjectModel.Color"`.

如果您想要`SlateBlue`从该类型命名的字段，则需要[`GetField()`](http://msdn.microsoft.com/en-us/library/53seyfee)在包含颜色的类型上使用。

我认为您在这里混淆了类型（类/结构）和实例。`Aquamarine`包含类型的*实例*`Color`。这与类型本身不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:33:23.770

不，`Aquamarine`不是一个类，它是一个变量。您不能创建变量的实例...

# iphone - UINavigationBar：旋转后更改标题大小

> ID：10806960
> 
> 赞同：2
> 
> 时间：2012-05-29T21:27:55.870
> 
> 标签：iphone, ios5

我在 AppDelegate didFinishLaunchingWithOptions 中使用以下代码更改了 UINavigationBar 标题的字体：

```
[[UINavigationBar appearance] setTitleTextAttributes:
  [NSDictionary dictionaryWithObjectsAndKeys: [UIFont fontWithName:@"Arial-BoldMT" size:24.0], UITextAttributeFont, nil]]; 
```

纵向还可以，但是横向字体太大了。旋转设备后是否可以更改字体大小？

我想我可以用自定义titleView解决这个问题，但我想知道是否还有其他选项（在纵向/一般情况下不将大小设置为较小的数字:)）？

我正在为 iOS 5 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:35:34.350

在可见视图控制器中使用这两种方法之一设置您的属性，以根据设备当前所处的方向修改您的代码。您的视图控制器将需要一个指向 UINavigationController 变量的指针。

在视图旋转之前调用的方法： `- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`

视图旋转后立即调用的方法：

`- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation`

关于 ViewController 方法的更多信息可以在这里找到：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

我认为完成此操作的最简单方法是使用 if 语句，如果设备是垂直的，则将标题属性设置为一种样式，否则设置为另一种样式，因为设备是水平的。

# maven - 如何在 Maven 的一个构建块中创建不同的 jar 文件？

> ID：10806965
> 
> 赞同：0
> 
> 时间：2012-05-29T21:28:08.187
> 
> 标签：maven, jar, pom.xml

我有一个 Maven 项目，它编译两个不同的项目，然后在这个目录中创建类： ${project.build.directory}/classes

其中 ${project.build.directory} 指向 pom.xml 存在的目录。

我正在使用具有不同“执行”块的 maven-jar-plugin 将 jar 文件从每个项目的相关目录/类中制作出来。我对 Maven 很陌生，很难定义正确的“包含”和“排除”目录。

这是我的课程所在的结构：

\目标\类\com

\target\classes\com\microsoft

\target\classes\com\google

\目标\类\组织

第一个 jar 文件需要从这些类中创建：

\target\classes\com\microsoft

\目标\类\组织

并且需要从这些类中创建第二个 jar：

\target\classes\com\google

以下是“构建”块的一部分，它具有“执行”块来创建这些 jar。第一个 jar 称为：msn-prod，另一个称为：google。如您所见，我尝试了所有不同的组合来创建这些 jar，但都没有奏效——它们作为被注释的部分存在于以下构建块中。

有人可以帮我吗？任何帮助是极大的赞赏。

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.2</version>
            <executions>
                <execution>
                    <id>msn-prod</id>
                    <goals><goal>jar</goal></goals> 
                    <phase>generate-resources</phase>
                    <configuration>
                        <classifier>msn-prod</classifier>    
                        <!-- <classesDirectory>${project.build.directory}/classes/com/microsoft</classesDirectory>
                        <includes>
                            <include>**/*.class</include>
                        </includes> 
                        <classesDirectory>${project.build.directory}/classes/org</classesDirectory>
                        <includes>
                            <include>**/*.class</include>
                        </includes>-->   
                        <classesDirectory>${project.build.directory}/classes</classesDirectory>
                        <!-- <includes>
                            <include>**/*.class</include>
                        </includes>-->                           
                        <!-- <excludes>
                            <exclude>**/com/google/*</exclude>
                        </excludes>-->                          
                        <!-- <excludes>
                            <exclude>**/google/*.class</exclude>
                        </excludes>-->                              
                        <includes>
                            <include>**/com/microsoft/*.class</include>
                            <include>**/org/*.class</include>
                        </includes>             
                        <finalName>${msn.prod}-${msn.api.version}</finalName>              
                    </configuration>
            </execution> 

            <execution>
                    <id>google</id>
                    <goals><goal>jar</goal></goals> 
                    <phase>generate-resources</phase>
                    <configuration>
                        <classifier>google</classifier>

                        <!-- <classesDirectory>${project.build.directory}/classes</classesDirectory>
                        <includes>
                            <include>**/com/google/*.class</include>
                        </includes>-->                          
                        <classesDirectory>${project.build.directory}/classes/com/google</classesDirectory>
                        <includes>
                            <include>**/*.class</include>
                        </includes>                                     
                        <finalName>${google}-${google.api.version}</finalName>              
                    </configuration>
            </execution>

        </executions>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:24:30.403

您违反了每个模块一个构建工件的 Maven 最佳实践，因此遇到了麻烦。只需将其分解为多个项目，这将很容易。

# java - 在 Java 中使用长字符串（heredocs）——可读的方法？

> ID：10806973
> 
> 赞同：9
> 
> 时间：2012-05-29T21:29:12.913
> 
> 标签：java, string, heredoc

我需要在 Java 中处理包含换行符的长字符串。这些是用于 HTML 生成的，但在这里并不是最重要的。

我知道 Java 在某种程度上是残废的，它没有**heredocs**。但是我可以使用其他机制：

1) 字符串**连接**（或 StringBuilders），可读性不强且可复制粘贴。

2) 将字符串存储在**.properties**文件中，可读性不强，但可复制粘贴性更高。

3）将每个“heredoc”存储在单独的**.txt**文件中，可读性强且可复制粘贴，但会产生大量 txt 文件。

4) 模板引擎，如**Velocity**或**Freemarker** - 将设计移出 Java，需要大量映射操作，这会非常好，但 Velocity 语法和循环/if 能力不如 Smarty 的可读性

各有优劣，我想选择3，但管理层更喜欢1，因为纯粹是意识形态的原因。我想有一些标准来使用 Java 中的 heredocs，可能是让事情变得更容易的库。对于如何使用 heredocs 的任何建议（有充分的论据），我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T22:22:03.823

我讨厌成为“那个人”，他建议您采用与您所询问的完全不同的方法，但是您看过 Groovy 吗？它是 JVM 语言，可以与 Java 自由混合，除了一堆其他非常好的语言特性外，它还有 heredocs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T08:49:34.063

试试 Rythm 模板引擎，它是作为高性能 Java 模板引擎构建的，具有类似 Razor 的简洁语法。

链接：

*   检查[全功能演示](http://play-rythm-demo.appspot.com/)
*   阅读[节奏的简要介绍](http://software-lgl.blogspot.com.au/2012/03/rythm-easy-to-use-high-performance-java.html)
*   下载[最新的包](https://github.com/greenlaw110/rythm/downloads)或
*   [叉它](https://github.com/greenlaw110/rythm)

**更新**

Rythm 现在有一个网站：[http](http://rythmengine.org) ://rythmengine.org和一个小提琴网站： http: [//fiddle.rythmengine.org](http://fiddle.rythmengine.org)

# api - 通过 API 访问 Rally 回收站中的项目

> ID：10806974
> 
> 赞同：0
> 
> 时间：2012-05-29T21:29:22.437
> 
> 标签：api, rally

我正在尝试通过 API 访问已删除的 Rally 项目（在回收站中）。我怀疑已删除的项目有一个修订历史记录，说它已被删除，但还没有发现这是真的。

任何意见，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:25:31.880

工作项上有一个属性`Recycled`，指示它是否在回收站中。

# python - 在转储文件上使用 pg_restore

> ID：10806979
> 
> 赞同：4
> 
> 时间：2012-05-29T21:29:38.357
> 
> 标签：python, django, postgresql, heroku

我在 Heroku 上有一个数据库，我正在尝试将其复制到我的本地计算机。

我通过执行以下操作创建了数据库的备份：

`heroku pgbackups:capture`

这将创建我通过创建指向它的 URL 链接下载的数据库的转储文件：

`heroku pgbackups:url b004`

但现在我有一个转储文件，并不知道如何处理它。我试过了

`pg_restore`

恢复数据库，但我不知道该信息去了哪里。我基本上想从这个转储文件中创建一个 .db 文件。那可能吗？

最终我的最终目标是访问这个数据库——所以如果复制数据库的另一种方法更好，我可以接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:22:15.990

Heroku 不允许您使用 sqlite 文件，因为它们具有只读文件系统。[但是您可以使用 Django 通过dumpdata](https://docs.djangoproject.com/en/dev/ref/django-admin/?from=olddocs#dumpdata-appname-appname-appname-model)命令将 Heroku 中的数据转储到 JSON 文件中，然后他们将其导入本地开发环境。

因为使用 运行在 Web 服务器上生成文件的命令可能很困难`heroku run`，所以我建议您安装[django smuggler](https://github.com/semente/django-smuggler)，这使得该操作成为管理员中的点击事件。

![在此处输入图像描述](../Images/e0b10f5782e18139e2df0e0c1a743914.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T20:32:28.740

首先你应该在你的本地机器上安装 postgres。

[给 Django 初学者的 PostgreSQL 备忘单](http://od-eon.com/blogs/calvin/postgresql-cheat-sheet-beginners/)

然后，使用 pg_restore 命令导入您的转储文件：

```
pg_restore -d yournewdb -U yournewuser --role=yournewuser /tmp/b001.dump 
```

就是这样，您的数据现在已从您的 heroku 应用程序中克隆。

# javascript - XMLHttpRequest 没有接收到数据或只是“未定义”

> ID：10806980
> 
> 赞同：0
> 
> 时间：2012-05-29T21:29:41.043
> 
> 标签：javascript, firefox-addon, xmlhttprequest

我尝试制作一个在 Javascript 中运行 XMLHttp 请求的 Firefox 插件。我想从此请求中获取数据并将其发送到 *.body.innerhtml。

到目前为止，这是我的代码...

```
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://xx.xxxxx.com", true);
xhr.send();
setTimeout(function() { set_body(xhr.responseHtml); }, 6000); 
```

我没有收到数据，而是“未定义”。如果我将 xhr.responseHtml 更改为 responseText，我什么也得不到。我不知道为什么我什么也得不到。我正在使用 Firefox 12.0 开发 Ubuntu 12.04 LTS。

如果您需要有关脚本的更多详细信息，请询问！

更新：

set_body 函数

```
document.body.innerHTML = '';
document.body.innerHTML = body;
document.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:18:51.177

更新已解决：

我必须确定 RequestHeaders（在 xhr.open 之后）：

```
xhr.setRequestHeader("Host", "xxx"); 
```

对于以下项目：Host、Origin 和 Referer。因此，同源政策似乎确实存在问题。

但现在它起作用了！谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T21:35:16.653

当您将 open 的最后一个参数设置为 true 时，您要求的是异步事件。所以你需要像这样向 xhr 添加一个回调：

```
xhr.onReadyStateChange = function(){
   // define what you want to happen when server returns
} 
```

当服务器响应时调用。要在没有异步的情况下进行测试，请将第三个参数设置为 false。然后 send() 将阻塞并在那里等待，直到响应返回。设置 6 秒的任意超时不是处理此问题的正确方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T09:45:33.167

此代码应该可以工作：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function () {
  if (xhr.readyState == 4) {
    set_body(xhr.responseText);
  }
};
xhr.open("GET", "http://xx.xxxxx.com", true);
xhr.send(); 
```

确保您从 URL [http://xx.xxxxx.com](http://xx.xxxxx.com)得到正确的响应。跨域调用可能有问题。如果您在域[http://first.com](http://first.com)有一个页面，并且您尝试从域[http://second.com](http://second.com)执行 XMLHttpRequest ，Firefox 将静默失败（不会有错误消息，没有响应，什么都没有）。这是防止 XSS（跨站点脚本）的安全措施。

无论如何，如果您从`chrome://`协议中执行 XMLHttpRequest，它被认为是安全的并且可以工作。因此，请确保您使用此代码并从您的插件发出请求，而不是从您的本地主机或类似的东西发出请求。

# c# - 可以将“全部”项目添加到标志枚举吗？

> ID：10806984
> 
> 赞同：4
> 
> 时间：2012-05-29T21:29:54.107
> 
> 标签：c#, .net, enums, enum-flags

如果我有一个可以同时存在多个值的枚举，我会创建一个 Flags 枚举：

```
[Flags]
public enum Foo
{
    None = 0,
    A = 1,
    B = 2,
    C = 4,
    D = 8
} 
```

如果我现在想通过设置每个值的事实，我将不得不做这样的事情：

```
Bar bar = new Bar(Foo.A | Foo.B | Foo.C | Foo.D); 
```

**添加一个额外的元素*All*会被认为是不好的做法/有害/亵渎吗？**

```
 All = 15 
```

当有很多值并且将它们全部传递是一种常见情况时，这将节省一些空间和时间。

据我了解标志枚举（=位域）的机制，这应该有效。是否有我遗漏的任何副作用或其他原因您不应该这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T21:31:16.240

你可以这样做。但也许你不应该使用值 15，但是

```
All = A | B | C | D 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:31:41.947

这里有一个危险的陷阱，如果您更改 All 但调用组件没有重新编译，它们将发送旧的 All。如果这对你来说很好，那就这样吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T16:43:15.930

使用按位运算更容易阅读

```
[Flags]
public enum MyEnum
{
    None   = 0,
    First  = 1 << 0,
    Second = 1 << 1,
    Third  = 1 << 2,
    Fourth = 1 << 3,
    All = ~(-1 << 4)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T21:49:14.247

这最有可能出错的地方是

```
[Flags]
public enum Foo
{
    None = 0,
    A = 1,
    B = 2,
    C = 4,
    D = 8
    E = 16
    All = 15
} 
```

我们的螺旋桨头往往是微聚焦的，补充 E 工作完成。哎呀，天哪，该死的......

然后您将 All 的想法更进一步，并感到需要 AllbutC。

# asp.net - Visual Studio 在构建期间删除临时 ASP.NET 文件

> ID：10806988
> 
> 赞同：1
> 
> 时间：2012-05-29T21:30:24.460
> 
> 标签：asp.net, .net, visual-studio-2010

我处理一个巨大的解决方案和一个巨大的网络项目。每当我对 Web 项目（不是任何其他库项目）进行更改时，刷新页面有时需要 2 分钟或更长时间，有时会显示 Thread Abort Exception 导致我不得不再次刷新页面（所以我可以'甚至不要利用这段时间去洗手间或其他任何事情）。

经过一番挖掘，一位同事注意到在我们构建期间，Visual Studio 删除了 Temporary ASP.NET Files 文件夹中的一些文件，这导致我们需要重建整个站点，而不仅仅是我正在处理的单个页面。

他确认这仅在他构建 Web 项目时发生，并且仅在至少加载了一个库项目时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:30:25.257

经过我自己的一些挖掘，我注意到当我在 Web 项目的 Web 设置中更改为使用 IIS Express 时，临时 asp.net 文件夹没有被清除，因为我们真的不想使用 IIS Express为了测试我们的代码，我将单选按钮更改为“自定义 Web 服务器”，添加了与“本地 IIS Web 服务器”选项中使用的相同的域名。（见下文）

![截屏](../Images/b8d5e9373a9b5afe7ec277520bc748b2.png)

在我这样做并重建项目之后，我注意到临时 ASP.NET 文件仍然没有被删除，当我去该站点并刷新页面时，该站点只用了大约 8 秒就出现了。

# javascript - 仅当用户按住鼠标左键时才触发 mousemove

> ID：10806991
> 
> 赞同：1
> 
> 时间：2012-05-29T21:30:32.160
> 
> 标签：javascript, javascript-events

我正在制作一个 360 度图像查看器（在纯 JavaScript 中），并且我正在尝试制作它，以便当用户将鼠标向左或向右移动到图像上时，它会交换图像（创建 360 效果）但仅在他们持有按下他们的鼠标按钮。

我尝试使用事件的“which”属性（在按住鼠标左键时在 Chrome 中等于 1，但在 Safari 和 FF 中似乎总是等于 1，即使没有按住鼠标按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:28:11.433

发现问题：我在 mousemove 中使用 preventDefault() 而不是 mousedown

# selenium - 在 JBehave Web 中运行 FirefoxWebDriverProvider 时如何更改浏览器窗口的大小

> ID：10806998
> 
> 赞同：6
> 
> 时间：2012-05-29T21:31:10.843
> 
> 标签：selenium, jbehave

我们正在使用 JBehave Web 来为一个新项目驱动我们的 selenium 测试套件，并且非常喜欢 JBehave 上可用的 Etsy.com 示例，尤其是 Java/Spring maven 原型，因为它适合我们的架构。

到目前为止最大的问题是文档，这就是为什么我在这里发帖希望我能从其他类似情况的人那里得到一些帮助。

看起来 JBehave Web 只提供了一个“FirefoxWebDriverProvider”类，而没有为 Chrome 提供相应的类。有没有其他人遇到过这个问题？您是否编写了自己的 ChromeDriverProvider？

此外，我们需要更改默认出现的浏览器的大小，我似乎无法在测试运行的引导过程中找到这样做的方法。

我们正在使用 Maven 原型：jbehave-web-selenium-java-spring-archetype，它使用 jbehave-maven-plugin 和“run-stories-with-annotated-embedder”目标，所以我们使用“Annotated”扩展 InjectableEmbedder 的方法。

如果有人可以提供一些指导，我将不胜感激，即使只是指向更多示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T07:37:03.413

## 如何调整窗口大小

```
webDriverProvider.get().manage().window().setSize(new Dimension(width, height)); 
```

您可以通过浏览代码轻松找到这样的代码。如果您使用的是 Eclipse，那么*Open Declaration*和*Quick Type Hierarchy*选项就是您所需要的一切。

## 如何使用 Chrome 驱动程序

您可以使用`TypeWebDriverProvider`或`PropertyWebDriverProvider`。例如：

```
new TypeWebDriverProvider(ChromeDriver.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-24T23:51:17.817

这应该有效：

```
driver.manage().window().setSize(new Dimension(800, 621)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T01:58:56.863

我们最终找到了这个[Chrome 驱动程序](http://code.google.com/p/chromedriver/wiki/GettingStarted)，它运行良好。当它被引导以最大化模式启动时，它可以接受一个参数，并且还公开了在启动时添加扩展的能力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T08:35:26.133

jokka 说的是正确的，只是附注：在调整窗口大小之前，我总是把它放在左上角，所以我知道 WebDriver 可以“看到”一切：

```
driver.get().manage().window().setPosition(new Point(0, 0)); 
```

显然，`driver`以上假设是 WebDriverProvider 的健康实例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-11T15:40:36.123

```
driver.Manage().Window.Size = new Size(x, y); 
```

这对我来说很好。x 和 y 在特征文件中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-11T05:06:56.523

尝试这个：

这对我来说很好。

```
Capybara.current_session.driver.browser.manage.window.resize_to(1800, 1000) 
```