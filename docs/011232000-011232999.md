# StackOverflow 问答 11232000-11232999

# ruby - 无法用 ruby 解析 json

> ID：11232005
> 
> 赞同：3
> 
> 时间：2012-06-27T17:39:41.913
> 
> 标签：ruby, json, parsing

我创建了以下类

```
 class Contact
    def initialize(id, name, phone)
      @id = id
      @name = name
      @phone = phone
    end

    def to_json(*a)
      {
        json_class: self.class.name,
        data: { id: @id, name: @name, phone: @phone }
      }.to_json(*a)
    end

    def self.json_create(o)
      new( o[:data][:id], o[:data][:name], o[:data][:phone] )
    end
  end 
```

我现在可以使用它将其转换为 json

```
Contact.new(1,'nik',10).to_json
 => "{\"json_class\":\"Contact\",\"data\":{\"id\":1,\"name\":\"nik\",\"phone\":10}}" 
```

但是当我调用它时它会因错误而爆炸`JSON.parse`。

```
JSON.parse(Contact.new(1,'nik',10).to_json)
NoMethodError: undefined method `[]' for nil:NilClass
    from (irb):44:in `json_create' 
```

我从[本](http://www.skorks.com/2010/04/serializing-and-deserializing-objects-with-ruby/)教程中学习了语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:46:58.933

摆脱`json_create`方法中的符号。

```
def self.json_create(o)
  new( o['data']['id'], o['data']['name'], o['data']['phone'] )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:46:02.403

使用`as_json`而不是`to_json`.

# actionscript-3 - Actionscript 3.0 检测相机分离

> ID：11232006
> 
> 赞同：1
> 
> 时间：2012-06-27T17:39:50.780
> 
> 标签：actionscript-3

全部，有人可以告诉我如何在视频聊天期间检测到摄像头分离吗？当摄像头分离时是否会产生任何事件。在我们的测试中，当相机分离时，不会产生任何活动或相机状态更改事件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:46:08.910

我相信 currentFPS 应该告诉你是否有任何帧通过。这不会是一个事件，但你应该可以轮询一段时间......

[flash.media.Camera.currentFPS](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#currentFPS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:46:36.050

[活动事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#event%3aactivity)将帮助您做到这一点。您可以检查使用`Camera.setMotionLevel()`和触发事件。希望这会有所帮助。

# .net - 在 Windows 移动设备上播放声音文件（特别是 .wav）

> ID：11232010
> 
> 赞同：0
> 
> 时间：2012-06-27T17:40:16.030
> 
> 标签：.net, visual-studio-2010, windows-mobile, intermec

我想在移动设备上播放 .wav 文件。我想我的麻烦在于实际正确访问文件。以下是我目前拥有的代码：

```
string path = "\\Windows\\badRead.wav";
System.Media.SoundPlayer player = new System.Media.SoundPlayer(path);
player.PlaySync();
player.PlaySync(); 
```

我错过了什么？我收到的错误是“请确保指定位置存在声音文件。它是在服务器上搜索 wav 文件吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:35:26.467

你读过这个： http: [//peterfoot.net/SystemMediaSoundPlayerVersusThePlaySoundAPI.aspx](http://peterfoot.net/SystemMediaSoundPlayerVersusThePlaySoundAPI.aspx)

在使用 player.PlaySync 之前，您可能必须先发出 player.Load()：

```
 private SoundPlayer Player = new SoundPlayer();
    private void loadSoundAsync()
    {
        // Note: You may need to change the location specified based on
        // the location of the sound to be played.
        this.Player.SoundLocation = "http://www.tailspintoys.com/sounds/stop.wav";
        this.Player.LoadAsync();
    }

    private void Player_LoadCompleted (
        object sender, 
        System.ComponentModel.AsyncCompletedEventArgs e)
    {
        if (this.Player.IsLoadCompleted)
        {
            this.Player.PlaySync();
        }
    } 
```

另一种方法是原生使用 Play>Sound API：

[http://msdn.microsoft.com/en-us/library/ms228710%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms228710%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:21:03.350

我使用 javascript 而不是尝试播放声音服务器端。

我在[这里找到了答案](http://www.javascripter.net/faq/sound/play.htm)

# cakephp - 将 CakePHP 插件与我的应用程序集成

> ID：11232011
> 
> 赞同：0
> 
> 时间：2012-06-27T17:40:16.790
> 
> 标签：cakephp

我正在努力解决如何将用户插件与我的应用程序数据集成。我正在使用 CakePhp 2.1。

场景：我有现有的会员和俱乐部列表，其中成员可以属于多个俱乐部，而俱乐部有多个成员。我已经为会员和俱乐部创建了所有的 MVC 和 CRUD，它们运行良好。协会运作良好。

我已经安装了一个用户管理插件，它允许人们注册、确认、重置他们的密码等。一切都很好。

我被困的地方是将新的“用户”与现有的“成员”个人资料信息相匹配。

当一个人创建登录用户 ID 时，我们会询问会员编号和他们的姓名，以便我们可以将新登录 ID 与会员编号相关联。

这就是我卡住的地方。

我已扩展插件用户注册表单以包含会员编号，并将 user_id 添加到成员表中。

现在如何使用 user_id 更新成员表？

一旦该人使用他们的“user_id”登录 - 其余的应用程序功能将仅基于他们的“会员”数据。

所以，我认为我的人际关系是：

*   1 个用户有 1 个成员
*   1个会员有1个用户，1个会员有多个俱乐部，1个会员有多个职位，1个会员有多个订单

我认为用户插件让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:13:06.193

用户模型和会员模型首先是如何关联的？您应该已经有一个 Membership.user_id 字段。

如果它们已经以某种方式连接（我假设它们是，因为您说关联工作正常），只需编写一个快速的 MySQL 查询或重复 PHP 脚本来运行并填充 Membership.user_id 字段。既然您已经正确设置了数据库和关联，那么您只需执行一次。

# android - 支持 NFC 的安卓手机上的远距离 RFID 无源标签？

> ID：11232012
> 
> 赞同：6
> 
> 时间：2012-06-27T17:40:32.360
> 
> 标签：android, nfc, rfid

带有 NFC（Nexus、Galaxy 等）的 Android 手机有什么方法可以读取专为更远距离读取而设计的无源 RFID 标签？我有兴趣使用相同的标签，该标签可以在更远的距离被 RFID 阅读器读取，而在更短的距离被带有 NFC 的 Android 手机读取。

这样的标签存在吗？是这样，我如何使用 Android SDK 读写它，因为它不是典型的 NFC 标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T21:57:15.927

带有 NFC 的 Nexus 设备都支持 ISO15693 标签。ISO15693 标签是邻近标签，最大读取距离为 1-1.5 米（取决于阅读器天线）。Nexus 设备对这些标签的读取范围与其他 NFC 标签相当：最多几厘米。

Android 支持存储在某些 ISO15693 标签上的 NDEF 内容：[NXP ICODE](http://www.nxp.com/products/identification_and_security/smart_label_and_tag_ics/icode/)系列产品。Android 的`Ndef`技术类将处理此类标签的读取和写入以及自动发现，就像其他 NFC 标签一样。有关如何将 NDEF 存储在 ICODE 标签上的非 Android 阅读器的详细信息，请参阅[http://www.nxp.com/documents/application_note/AN11042.pdf](http://www.nxp.com/documents/application_note/AN11042.pdf)和[http://www.nxp.com/documents/application_note/ AN11032.pdf](http://www.nxp.com/documents/application_note/AN11032.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T06:50:36.613

NFC 移动设备的天线只能在厘米范围内进行检测。可能4-10厘米。

你能解释一下为什么你想让这样的事情起作用吗？

# django - Django：通过模板标签的返回值扩展模板

> ID：11232017
> 
> 赞同：1
> 
> 时间：2012-06-27T17:40:43.167
> 
> 标签：django, django-templates, template-inheritance

在模板中，我想通过模板标签的返回值来确定子模板的父模板。

这是模板标签。它返回应用标签（包名）并附加要扩展的相应模板名称：

```
{% app_label request.path %} 
```

现在我想做的是：

```
{% extends app_label %} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:03:32.230

我用[上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)解决了这个问题：

```
def app_label_processor(request):
    return {
        'app_base_template': resolve(request.path).app_name
    } 
```

然后我可以使用这个：

```
{% extends app_base_template %} 
```

你需要做的就是

*   [按照此答案](https://stackoverflow.com/a/7363786/1156004)中的说明添加您的应用网址
*   将您的上下文处理器添加到 settings.TEMPLATE_CONTEXT_PROCESSORS
*   用于`RequestContext`渲染模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:51:57.147

那是不可能的。该`{% extends %}`标签必须是模板中的第一个模板标签（[source](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)）：

> 如果`{% extends %}`在模板中使用，它必须是该模板中的第一个模板标签。否则，模板继承将不起作用。

这意味着您不能在其前面有另一个模板标签来构造具有模板名称的变量。

但是，您可以在视图中调用模板标记函数（可能经过一些重构）并将变量添加到模板上下文中。然后它是一个可以在标签中使用的普通变量`{% extends ... %}`。

# mysql - 如何正确格式化此 MySQL JOIN 语句？

> ID：11232021
> 
> 赞同：1
> 
> 时间：2012-06-27T17:41:13.287
> 
> 标签：mysql

我有一张看起来像这样的桌子：

表 1 ->

```
+----+--------+--------+
| id |  name  | author |
+----+--------+--------+
| 1  |  First |   Me   |
| 2  | Second |  You   |
+----+--------+--------+ 
```

表 2 ->

```
+-----+------------+-----------+------------+
| mid |  table1_id |    key    |    value   |
+-----+------------+-----------+------------+
|  1  |      1     |   desc    |   hello    |
|  2  |      1     | begin_day |   monday   |
|  3  |      1     | end_day   |   tuesday  |
|  4  |      2     |   desc    |   goodbye  |
|  5  |      2     | begin_day |  wednesday |
|  6  |      2     | end_day   |  friday    |
+-----+------------+-----------+------------+ 
```

这里的关系是`id`表1中的`table1_id`in对应表2中的in。

我想要得到的输出是......

```
+----+---------+---------+-------------+-----------+-----------+
| id |  name   |  author |     desc    | begin_day |  end_day  |
+----+---------+---------+-------------+-----------+-----------+
|  1 |  First  |   Me    |    hello    |   monday  |  tuesday  |
|  1 |  Second |   You   |   goodbye   | wednesday |  friday   |
+----+---------+---------+-------------+-----------+-----------+ 
```

我尝试了几种不同的连接语句——都是下面的变体。但是，我对 MySQL 查询并不那么精通。

```
SELECT * FROM table_1 LEFT JOIN table_2 on table_1.id = table_2.table1_id 
```

哪个产生...

```
+----+----------+----------+----------+------------+-----------+
| id |    mid   |   name   |  author  |    key     |   value   |
+----+----------+----------+----------+------------+-----------+
| 1  |     1    |   First  |    Me    |    desc    |   hello   |
| 1  |     2    |   First  |    Me    |  begin_day |   monday  |
| 1  |     3    |   First  |    Me    |   end_day  |   tuesday |
| 2  |     4    |   Second |   You    |    desc    |  goodbye  |
| 2  |     5    |   Second |   You    |  begin_day |  wednesday|
| 2  |     6    |   Second |   You    |   end_day  |  friday   | 
```

显然，迭代此连接语句会产生 6 个结果，表 2 中与表 1 中的 id 匹配的每一行都有 1 个结果。如何使用正确的查询语句来避免这种情况？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:50:55.457

如果您知道将获得的所有列，则可以使用 case 语句，如下所示：

```
Select distinct table_1.*, 
case when table_2.key='desc' then value end as desc, 
case when table_2.key='begin_day' then value end as begin_day, 
case when table_2.key='end_day' then value end as end_day
  FROM table_1 LEFT JOIN table_2 on table_1.id = table_2.table1_id 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:19:26.750

```
SELECT
 table_1.*, 
 MAX(IF(key='desc', value, NULL)) AS 'desc', 
 MAX(IF(key='begin_day', value, NULL)) AS begin_day, 
 MAX(IF(key='end_day', value, NULL)) AS end_day
FROM table_1 
LEFT JOIN table_2 ON (id = table1_id)
GROUP BY id; 
```

# php - “发件人”参数中电子邮件的 PHP 正则表达式

> ID：11232024
> 
> 赞同：0
> 
> 时间：2012-06-27T17:41:27.813
> 
> 标签：php, regex

`from`在电子邮件标题中采用以下四种格式的参数：

`From: Jon Doe <jon.doe@a.validdomain.com>`

`From: "Jon Doe" <jon.doe@a.validdomain.com>`

`From: <jon.doe@a.validdomain.com>`

`From: jon.doe@a.validdomain.com`

有没有人制作了一个正则表达式，可以匹配在 preg_match 中使用的电子邮件地址？我已经尝试了一些，但`<`正在`>`赶上他们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:49:35.760

```
var_dump(imap_rfc822_parse_adrlist($string)); 
```

甚至：

```
$headers = imap_rfc822_parse_headers("From: Jon Doe <jon.doe@a.validdomain.com>");
$from_email = $headers->from[0]->mailbox.'@'.$headers->from[0]->host; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:49:04.660

您正在寻找的正则表达式是

```
^From:.*?<?(\S+@\S+?)>?\s*$  
This will match the whole thing in any of the 4 cases 
```

如果您只想匹配电子邮件，它会被一次又一次地询问......只需搜索[正则表达式电子邮件](https://stackoverflow.com/search?q=regex%20email)

电子邮件验证将包括任何带有 + 号或 . 在电子邮件中以及基础知识看起来像

```
\b[!#\$%&'\*\+\-/=\?\^_`{\|}~a-zA-Z0-9][!#\$%&'\*\+\-/=\?\^_`{\|}~a-zA-Z0-9\.]*[!#\$%&'\*\+\-/=\?\^_`{\|}~a-zA-Z0-9]@[a-zA-Z0-9\-][a-zA-Z0-9\-\.]+[a-zA-Z0-9\-]\b
This is what I use. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:48:40.830

试试正则表达式`([^<>\s]+)>?$`

# java - 更改应用程序的代理

> ID：11232025
> 
> 赞同：0
> 
> 时间：2012-06-27T17:41:32.573
> 
> 标签：java, windows

我正在尝试编写一个更改其他应用程序代理设置的程序。是否可以通过 Java 更改使用 Internet 的应用程序的代理设置？我是否只允许使用系统注册表更改浏览器的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:44:51.767

使用 -DPROXY_HOST=somehost 和 -DPROXY_PORT=portno JVM 参数。

# r - 如何确定 [R] 中的命名空间导入顺序

> ID：11232026
> 
> 赞同：7
> 
> 时间：2012-06-27T17:41:47.553
> 
> 标签：r, ggplot2

我需要清理一个 R 实例以使其恢复到启动时的原始状态。到目前为止，我正在做的是：

启动时，记录加载的包和命名空间

```
original_packages <- grep('^package:', search(), value = TRUE)
original_namespaces <- loadedNamespaces() 
```

当我需要刷新实例时，分离每个在启动时不存在的加载包：

```
for (pkg in grep('^package:', search(), value = TRUE)) {
    if (! pkg %in% original_packages){
        detach(pkg, unload=TRUE, force=TRUE, character.only=TRUE)
    }
} 
```

问题是，如果我已经加载了一个包含一堆导入命名空间的包，例如 ggplot2，这些命名空间会保持加载状态，我必须按照导入的顺序从高层向下卸载它们。只是盲目地卸载它们是行不通的，因为我得到“命名空间'x'由'y'导入，'z'所以无法卸载”错误。

这是可重现的示例：

```
original_packages <- grep('^package:', search(), value = TRUE)
original_namespaces <- loadedNamespaces()

library(ggplot2)
library(plyr)

loadedNamespaces()

for (pkg in grep('^package:', search(), value = TRUE)) {
    if (! pkg %in% original_packages){
        detach(pkg, unload=TRUE, force=TRUE, character.only=TRUE)
    }
}

for (ns in loadedNamespaces()) {
    if (! ns %in% original_namespaces){
        unloadNamespace(ns)
    }
} 
```

有没有办法找出命名空间导入层次结构？如果是这样，那么我应该能够正确地订购最后一个循环......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:29:16.013

好的，我已经为公认的 hacky 需求拼凑了一个 hacky 解决方案。任何有关如何更好地做到这一点的建议将不胜感激。特别是，我对全局对象的`<<-`分配不太满意。`namespace_depths`

```
original_packages <- grep('^package:', search(), value = TRUE)
original_namespaces <- loadedNamespaces()

library(ggplot2)
library(plyr)

loadedNamespaces()

new_packages <- Filter(function(pkg) { ! pkg %in% original_packages }, grep('^package:', search(), value = TRUE))

new_namespaces <- Filter(function(ns) { ! ns %in% original_namespaces }, loadedNamespaces())

get_imports <- function(ns, depth) {

    imports <- Filter(function(ns) { ! ns %in% original_namespaces }, names(getNamespaceInfo(ns, 'imports')))
    if (length(imports) == 0 ) {
        if ( is.null(namespace_depths[[ns]]) || namespace_depths[[ns]] < depth){
            namespace_depths[[ns]] <<- depth
        }
        return()
    }
    for (imported_ns in imports){
        get_imports(imported_ns, depth + 1)
    }
    if ( is.null(namespace_depths[[ns]]) || namespace_depths[[ns]] < depth){
        namespace_depths[[ns]] <<- depth
    }
}

namespace_depths <- list()
sapply(new_namespaces, get_imports, 0)

for (ns in names(namespace_depths)[order(unlist(namespace_depths))]) {
    if (! ns %in% original_namespaces){
        unloadNamespace(ns)
    }
}

for (pkg in new_packages){
    detach(pkg, unload=TRUE, force=TRUE, character.only=TRUE)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:41:14.133

正如@Josh O'Brien 提到的，通过分离或卸载命名空间是不可能获得干净的环境的。

但是在这里回答您的问题是一种简单的方法，可以使用以下方法以正确的顺序卸载所有命名空间`tools:::dependsOnPkgs`：

```
## params: originalNamespaces is a list of namespaces you want to keep
cleanNamespaces <- function(originalNamespaces) {

    ## which namespaces should be removed?
    ns <- setdiff(loadedNamespaces(), originalNamespaces)

    ## get dependency list
    dep <- unlist(lapply(ns, tools:::dependsOnPkgs))

    ## append namespaces to guarantee to fetch namespaces with 
    ## no reverse dependencies
    ns <- c(dep, ns)

    ## get namespace names in correct order to unload without errors
    ns <- names(sort(table(ns), decreasing=TRUE))

    ## only unload namespaces which are attached
    ns <- ns[ns %in% loadedNamespaces()]

    ## unload namespaces
    invisible(sapply(ns, unloadNamespace))
} 
```

# python - 正则表达式：查找函数调用

> ID：11232032
> 
> 赞同：0
> 
> 时间：2012-06-27T17:42:05.817
> 
> 标签：python, regex, python-3.x

我想搜索一个 php 文件以查找对我在该文件中定义的函数的所有调用。我有一个数组，其中包含我要搜索的所有函数。如果函数的名称是`Foo`，那么我有：

```
match = re.search(r'!(function)Foo\(', line) 
```

`line`我正在查看的当前代码行在哪里。我希望它匹配（不需要返回任何东西，只需告诉我有匹配）对函数的所有调用，并且在声明函数时不匹配。（我是正则表达式的新手，但我已经看到我现在有两个问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:46:45.053

您可能需要一些回顾：

```
re.search(r'(?<!function) Foo\(', line) 
```

`function`如果放在之前，它将不匹配`Foo`。

# jquery - jquery ajax 调用 MVC 控制器失败

> ID：11232036
> 
> 赞同：1
> 
> 时间：2012-06-27T17:42:25.290
> 
> 标签：jquery, json, asp.net-mvc-3

Chrome 调试器显示名称为“GetPurchaseOrdersComponent”，路径显示为“/Cost”，而 Telerik 网格控件的调用名称为“4485”，路径为“/Cost/GetPurchaseOrders”（它们正在工作）。此外，我调用的类型（在 Chrome 的调试器中查看时）是 text/html，而在工作调用中，它是 application/json。我得到的错误是：“500（内部服务器错误）”。我为此调用定义了与其他调用类似的路由。这是我的代码：

```
$.ajax({
        url: "/Cost/GetPurchaseOrdersComponent",
        type: "GET",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        async: true,
        data: { id: 1 },
        success: function (result) {
            $("#ComponentsMultiLevelGrid").html(result);
        }
    });

[HttpGet]
public string GetPurchaseOrdersComponent(int id)
{
     return "some string";
} 
```

**更新：**

这是有效调用的标题（此调用来自 Telerik 网格）：

```
Request URL:http://localhost:61751/Cost/GetSupplierCatalogs/4485?key=4485&_=1340830508447
Request Method:POST
Status Code:200 OK

**Request Headers** - view source
Accept:text/plain, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:13
Content-Type:application/x-www-form-urlencoded
Cookie:ASP.NET_SessionId=uxn1ctvzcchyrbreymcgz1vl
Host:localhost:61751
Origin:http://localhost:61751
Referer:http://localhost:61751/Transaction/4485
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
X-Requested-With:XMLHttpRequest

**Query String Parameters** - view URL encoded
key:4485
_:1340830508447
Form Dataview URL encoded
page:1
size:5

**Response Headers** - view source
Cache-Control:private
Connection:Close
Content-Length:21
Content-Type:application/json; charset=utf-8
Date:Wed, 27 Jun 2012 20:55:28 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

这是失败的调用的标头（这是 jQuery 调用）：

```
Request URL:http://localhost:61751/Cost/GetPurchaseOrdersComponent?id=1
Request Method:GET
Status Code:500 Internal Server Error

**Request Headers** - view source
Accept:text/plain, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Type:application/x-www-form-urlencoded
Cookie:ASP.NET_SessionId=uxn1ctvzcchyrbreymcgz1vl
Host:localhost:61751
Referer:http://localhost:61751/Transaction/4485
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
X-Requested-With:XMLHttpRequest

**Query String Parameters** - view URL encoded
id:1

**Response Headers** - view source
Cache-Control:private
Connection:Close
Content-Length:10434
Content-Type:text/html; charset=utf-8
Date:Wed, 27 Jun 2012 20:55:25 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:03:55.713

JSON 请求`POST`仅适用，因此您需要使用正确的动词，还需要发送 JSON 请求，因为这是您在`contentType`参数中指定的内容。这是通过以下`JSON.stringify`方法实现的：

```
$.ajax({
    url: "/Cost/GetPurchaseOrdersComponent",
    type: "POST",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    async: true,
    data: JSON.stringify({ id: 1 }),
    success: function (result) {
        $("#ComponentsMultiLevelGrid").html(result);
    }
}); 
```

或者如果您不想使用 JSON 请求，请去掉`contentType`参数：

```
$.ajax({
    url: "/Cost/GetPurchaseOrdersComponent",
    type: "GET",
    dataType: "json",
    async: true,
    data: { id: 1 },
    success: function (result) {
        $("#ComponentsMultiLevelGrid").html(result);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:42:30.713

这行得通。不要问我为什么。

```
$.ajax({
    url: '@Url.Action("GetPurchaseOrdersComponent", "Cost", new { id = ViewBag.CustomerEstimateKey })',
    type: "GET",
    dataType: "text",
    async: true,
    success: function (result) {
        $("#ComponentsMultiLevelGrid").html(result);
    }
}); 
```

# php - 生成 Yii 翻译消息文件

> ID：11232039
> 
> 赞同：14
> 
> 时间：2012-06-27T17:42:43.207
> 
> 标签：php, bash, internationalization, yii

我很想知道是否有脚本或其他方式可用于在控制器/项目中收集和生成 Yii 翻译消息

例如。如果我在控制器中有以下代码

```
Yii::t('blog', 'Your name');
Yii::t('category', 'Category name'); 
```

它应该在messages目录中生成带有上述字符串的英文翻译消息文件，如blog.php和category.php。如果有人知道方法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T10:23:07.160

没有必要重新发明轮子。您可以使用`yiic`它（如果您转到框架文件夹并输入，`yiic help message`您将获得有关其使用情况所需的所有信息）。为方便起见，我将其粘贴在这里。

> 使用 yiic 消息路径/to/config/file
> 
> 描述 该命令在指定的源文件中搜索要翻译的消息，并将它们编译成 PHP 数组作为消息源。
> 
> PARAMETERS * config-file：必填，配置文件的路径。您可以在 framework/messages/config.php 中找到一个示例。
> 
> 该文件可以放在任何地方，并且必须是返回名称-值对数组的有效 PHP 脚本。每个名称-值对代表一个配置选项。
> 
> 可以使用以下选项：
> 
> *   sourcePath：字符串，所有源文件的根目录。
> *   messagePath：字符串，包含消息翻译的根目录。
> *   语言：数组，提取的消息应翻译成的语言代码列表。例如，array('zh_cn','en_au')。
> *   fileTypes：数组，文件扩展名列表（例如'php'，'xml'）。只有在此列表中可以找到扩展名的文件才会被处理。如果为空，则将处理所有文件。
> *   exclude：数组，目录和文件排除列表。每个排除项可以是名称或路径。如果文件或目录名称或路径与排除项匹配，则不会被复制。例如，排除“.svn”将排除所有名称为“.svn”的文件和目录。并且排除“/a/b”将排除文件或目录“sourcePath/a/b”。
> *   翻译器：用于翻译消息的函数的名称。默认为“Yii::t”。这用作查找要翻译的消息的标记。
> *   覆盖：如果必须用合并的消息覆盖消息文件。
> *   removeOld：如果消息不再需要翻译，它将被删除，而不是被包含在一对“@@”标记之间。

您应该修改（并移动）示例配置文件，一切就绪。确保使用完整路径（即`C:\path\to\project`在 Windows 或`/var/www/your/project`*nix 上）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T07:07:26.860

我可以给你输入如何开始，你可以编写自己的脚本。我现在发现这对我有好处:)

## 创建组件 components/Translation.php

```
public function missing($messageEvent) {        
    Yii::log(
        "'".$messageEvent->message."' => '',",
        'translation',
        $messageEvent->category.'.'.$messageEvent->language
    );
} 
```

}

## 编辑配置文件 config/main.php

```
'components' => array(
      //...
      'log' => array(
            array(
                'class'=>'CFileLogRoute',
                'levels'=>'translation',
                'logFile'=>'translations.log',
            ),
            //...                
      ),

       'messages' => array(
            //'class' => 'CDbMessageSource',
            'onMissingTranslation' => array('Translation', 'missing'),
            //'sourceMessageTable' => 'source_message',
            //'translatedMessageTable' => 'message'
       ),
) 
```

## 结果

您最终将`translation.php`在日志文件目录中找到文件，文件内容将类似于：

```
 2012/06/28 09:45:00 [translation] [Site.lv] 'MyStringInSource' => '',
 .... 
```

取决于你的配置。所以你可以复制`'MyStringInSource' => '',`部分并放入相应的翻译文件。

这在开发过程中很有帮助，因为它会在您翻译这些内容之前（重复）增长缺少翻译的 translation.log 文件。

希望它给你的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:04:51.677

这听起来像是一个工作`grep`和一个正则表达式。搜索这个：

```
Yii::t\s*\(\s*('(?:[^']|(?<=\\)')*'|"(?:[^"]|(?<=\\)")*")\s*,\s*('(?:[^']|(?<=\\)')*'|"(?:[^"]|(?<=\\)")*")\s*\) 
```

由于上面的内容很遗憾无法阅读，我将对其进行分解：

```
Yii::t\s*\(\s*##PATTERN##\s*,\s*##PATTERN##\s*\) 
```

`Yii::t`这显然与注意考虑空白的呼吁相匹配。秘方是`##PATTERN##`，重复两次。`##PATTERN##`是

```
('(?:[^']|(?<=\\)')*'|"(?:[^"]|(?<=\\)")*") 
```

以上匹配`'([^']|(?<=\\)')*'`（单引号字符串）或`"([^"]|(?<=\\)")*"`（双引号字符串）。非捕获组 ( `?:`) 已用于忽略不感兴趣的中期结果。

与此正则表达式匹配后，捕获组#1 将保存翻译文件名（例如`'blog'`），组#2 将保存字符串名称（例如`'Your name'`）。

# asp.net - 如何创建 HTML Helper 来扩展 TextBoxFor() 以添加 CSS 样式？

> ID：11232041
> 
> 赞同：11
> 
> 时间：2012-06-27T17:43:02.693
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

如何创建 HTML Helper 来扩展 TextBoxFor() 以添加 CSS 样式？

```
@Html.TextBoxFor(model => model.FirstName, new { @class = "txt" }) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T17:52:46.580

您只需要在以下位置创建一个扩展[方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)`HtmlHelper`：

```
public static class MyHtmlHelpers
{
    public static MvcHtmlString MyTextBoxFor<TModel, TProperty>(
         this HtmlHelper<TModel> helper, 
         Expression<Func<TModel, TProperty>> expression)
    {
        return helper.TextBoxFor(expression, new { @class = "txt" });
    }
} 
```

然后在您看来，您可以将其用作：

```
@Html.MyTextBoxFor(model => model.FirstName) 
```

注意：不要忘记您的视图`@using`的名称空间。`MyHtmlHelpers`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-02T09:06:32.567

```
 public static System.Web.Mvc.MvcHtmlString DtxTextBoxFor<TModel, TValue>
        (this System.Web.Mvc.HtmlHelper<TModel> html,
        System.Linq.Expressions.Expression<System.Func<TModel, TValue>> expression,
        System.Collections.Generic.IDictionary<string, object> htmlAttributes = null, bool readOnly = false)
    {
        if (htmlAttributes == null)
        {
            htmlAttributes =
                new System.Collections.Generic.Dictionary<string, object>();
        }

        System.Web.Mvc.ModelMetadata oModelMetadata =
            System.Web.Mvc.ModelMetadata.FromLambdaExpression(expression, html.ViewData);

        if (oModelMetadata == null)
        {
            if (readOnly)
            {
                if (htmlAttributes.ContainsKey("readonly") == false)
                {
                    htmlAttributes.Add("readonly", "read-only");
                }
            }
        }
        else
        {
            if (htmlAttributes.ContainsKey("placeholder") == false)
            {
                string strHtmlFieldName =
                    System.Web.Mvc.ExpressionHelper.GetExpressionText(expression);

                string strLabelText =
                    oModelMetadata.DisplayName ??
                    oModelMetadata.PropertyName ??
                    strHtmlFieldName.Split('.').Last();

                if (string.IsNullOrEmpty(strLabelText) == false)
                {
                    htmlAttributes.Add("placeholder", strLabelText);
                }
            }

            if ((readOnly) || (oModelMetadata.IsReadOnly))
            {
                if (htmlAttributes.ContainsKey("readonly") == false)
                {
                    htmlAttributes.Add("readonly", "read-only");
                }
            }
        }

        htmlAttributes.Add("class", "form-control");

        System.Linq.Expressions.MemberExpression oMemberExpression =
            expression.Body as System.Linq.Expressions.MemberExpression;

        if (oMemberExpression != null)
        {
            System.ComponentModel.DataAnnotations.StringLengthAttribute oStringLengthAttribute =
                oMemberExpression.Member.GetCustomAttributes
                (typeof(System.ComponentModel.DataAnnotations.StringLengthAttribute), false)
                .FirstOrDefault() as System.ComponentModel.DataAnnotations.StringLengthAttribute;

            if (oStringLengthAttribute != null)
            {
                if (htmlAttributes.ContainsKey("maxlength") == false)
                {
                    htmlAttributes.Add("maxlength", oStringLengthAttribute.MaximumLength);
                }
            }
        }

        return (html.TextBoxFor(expression, htmlAttributes));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T04:00:18.197

基于@nemesv 的回答，这里是一个扩展，它支持带有额外自定义属性的 htmlAttributes。

VB.net：

```
<Extension()>
Function MyTextBoxFor(Of TModel, TProperty)(ByVal helper As HtmlHelper(Of TModel), ByVal expression As Expression(Of Func(Of TModel, TProperty)), htmlAttributes As Object) As MvcHtmlString           
    'copy htmlAttributes object to Dictionary
    Dim dicHtmlAttributes As New Dictionary(Of String, Object)
    For Each prop in htmlAttributes.GetType().GetProperties()
        dicHtmlAttributes.Add(prop.Name,prop.GetValue(htmlAttributes))
    Next
    'add custom attribute
    dicHtmlAttributes.Add("foo","bar")

    Return helper.TextBoxFor(expression, dicHtmlAttributes)
End Function 
```

C＃：

```
public static MvcHtmlString MyTextBoxFor<TModel, TProperty>(
     this HtmlHelper<TModel> helper, 
     Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
{
    // copy htmlAttributes object to Dictionary
    Dictionary<string, object> dicHtmlAttributes = new Dictionary<string, object>();
    foreach (var prop in htmlAttributes.GetType().GetProperties())
    {
        dicHtmlAttributes.Add(prop.Name, prop.GetValue(htmlAttributes));
    }
    //add custom attribute
    dicHtmlAttributes.Add("foo", "bar");
    return helper.TextBoxFor(expression, dicHtmlAttributes);
} 
```

# java - Jackson 的序列化和反序列化：如何以编程方式忽略字段？

> ID：11232045
> 
> 赞同：2
> 
> 时间：2012-06-27T17:43:17.037
> 
> 标签：java, json, rest, jackson

我正在使用 Jackson 来序列化和反序列化对象。问题是有时我想显示一个字段，有时不想。

实际上，我正在使用 @JsonIgnore 来避免在不需要时打印该属性。当我需要它时，我正在通过

```
mapper.getSerializationConfig().disable(SerializationConfig.Feature.USE_ANNOTATIONS); 
```

但这也会禁用我需要的其他注释。

我怎样才能得到我需要的结果？使用视图？有什么例子吗？

一点pojo来了解我想要什么：

```
class User {
private String username;
@JsonIgnore    
private String password;    
    // getter setter
}

writeToDB() {
mapper.getSerializationConfig().disable(SerializationConfig.Feature.USE_ANNOTATIONS);
mapper.writeValueAsString(user);
} 
```

并且通过 REST API，您可以获得没有密码的用户名（感谢 JsonIgnore）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:01:19.053

最后，我以不同的方式处理了这个问题。我使用的是 Jersey 和 Guice，所以很难找到方法，但我做到了。

基本上我使用了 Jackson 的 MixIn 注释，但使用 Jersey 我必须将 ObjectMapper 创建到提供程序中，然后将其与 Guice 绑定。

这样当我在使用 REST 服务时，Jersey 会使用 Provider 中定义的 ObjectMapper；当存储的东西杰克逊将使用标准的 ObjectMapper。

现在一些代码。

创建 PrivateUser 类：

```
public abstract class PrivateUser {
  @JsonIgnore abstract String getPassword();
} 
```

创建提供者：

```
@Provider
public class JacksonMixInProvider implements ContextResolver<ObjectMapper> {

  @Override
  public ObjectMapper getContext(Class<?> aClass) {
    final ObjectMapper mapper = new ObjectMapper();
    mapper.getSerializationConfig().addMixInAnnotations(User.class, PrivateUser.class);
    return mapper;
  }
} 
```

并绑定它：

```
bind(JacksonMixInProvider.class).asEagerSingleton(); 
```

就是这样！:D

希望这将帮助其他人浪费更少的时间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:58:03.250

我认为你应该以不同的方式处理这个问题，通过创建一个可以选择性地序列化/忽略密码的自定义 Jackson 序列化程序。

像这样的注释在运行时应该被认为是不可变的。**可能**有一些反射技巧来提取`JsonIgnore`和设置值，但是，如果是这样，这将是非常严厉的。

# fonts - 谁知道以下网站的字体

> ID：11232050
> 
> 赞同：-1
> 
> 时间：2012-06-27T17:43:25.547
> 
> 标签：fonts

我喜欢这个网页[http://wikieductor.org/PYTHON_TUTORIALS](http://wikieducator.org/PYTHON_TUTORIALS)截图的字体，（Python代码的字体），谁能告诉我字体名称？

![在此处输入图像描述](../Images/4402d46e66c6052d30c06394e9f80b1f.png)

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:46:15.647

抱歉，没有浏览整个页面。这是您想要的字体：**Akbar**。 [在此处阅读更多相关信息。](http://www.wobblymusic.com/groening/akbar.html)

PS：真的很花时间找到这个..

# knockout.js - 淘汰赛可观察阵列未按预期工作

> ID：11232055
> 
> 赞同：0
> 
> 时间：2012-06-27T17:43:40.110
> 
> 标签：knockout.js, knockout-2.0

我是 Knockout.js 的新手，我创建了一个可观察数组并使用一些数据进行了初始化。我期待任何时候 UI 发生变化（复选框或文本值），模型也应该得到更新。

我也订阅了数组。但我的回调方法永远不会被调用。

```
var viewModel = {
    seats:ko.observableArray( [
        { "No": "1", "Booked": "" }, ...
    ] )
};

viewModel.seats.subscribe(
    function(newvalue){
        alert(newvalue);
    }
);

ko.applyBindings( viewModel); 
```

[http://jsfiddle.net/2NMJX/](http://jsfiddle.net/2NMJX/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:49:40.097

您刚刚创建了一个可观察数组 - 这意味着，只要数组更新（添加或删除元素，例如：http: [//jsfiddle.net/2NMJX/1/](http://jsfiddle.net/2NMJX/1/)），您就会收到通知，但不会在元素本身时收到通知被更新。为此，您需要将值封装在可观察对象中：

```
seats: ko.observableArray( [
    { "No": ko.observable("1"), ... 
```

然后，您可以订阅这些 observables：

```
viewModel.seats()[0].No.subscribe( ... 
```

[http://jsfiddle.net/2NMJX/2/](http://jsfiddle.net/2NMJX/2/)（尝试编辑“1”）

# java - Spring Data JPA无效的page.sort参数

> ID：11232056
> 
> 赞同：9
> 
> 时间：2012-06-27T17:43:40.930
> 
> 标签：java, spring, spring-data, spring-data-jpa

在将 Spring Data JPA 与 Hibernate 结合使用的 Web 应用程序中，我们利用[Web 分页](http://static.springsource.org/spring-data/data-commons/docs/current/reference/html/#web-pagination)功能在各种实体列表中提供分页和排序功能。

```
@Controller
public class MyEntityController {
   @RequestMapping(method = RequestMethod.GET)
   public ModelAndView list(Pageable pageable) { ... }
}

@Configuration
public class MyWebMvcConfig extends WebMvcConfigurationSupport {
    @Override
    public void addArgumentResolvers(List<HandlerMethodArgumentResolver> argumentResolvers) {
        super.addArgumentResolvers(argumentResolvers);
        argumentResolvers.add(new PageableArgumentResolver());
    }
}

public interface MyEntityRepository extends PagingAndSortingRepository<MyEntity, String> {
    Page<MyEntity> findByPropertyX(String propertyX, Pageable pagable);
} 
```

这允许在呈现的 html 中将实体属性定义为特殊的排序[请求参数](http://static.springsource.org/spring-data/data-commons/docs/current/reference/html/#d0e725)，其中`page.sort`值实际上与要排序的实体中的属性匹配。

```
<table>
    <thead>
        <tr>
            <th><a href="?page.sort=propertyX&amp;page.sort.dir=asc">Property X</a></th>
            <th><a href="?page.sort=propertyY&amp;page.sort.dir=asc">Property Y</a></th>
        </tr>
    </thead>
    <tbody>...</tbody>
</table> 
```

这会产生一个结果 URL，例如：

```
http://host/context-root/entities/?page.sort=propertyX&page.sort.dir=asc 
```

问题是用户可能会修改 URL 以使用`page.sort`引用不存在的列/属性名称的无效属性，或者更糟的是，使用导致无效语法的无效 JPA 查询字符。

例如，如果 URL 被修改为按“noSuchProperty”排序：

```
http://host/context-root/entities/?page.sort=noSuchProperty&page.sort.dir=asc 
```

但是这个属性不存在，会抛出如下异常：

```
java.lang.IllegalArgumentException: No property noSuchProperty found for type class com.my.company.MyEntity
    at org.springframework.data.repository.query.parser.Property.<init>(Property.java:76)
     . . .
    at org.springframework.data.repository.query.parser.AbstractQueryCreator.createQuery(AbstractQueryCreator.java:86)
     . . .
    at $Proxy68.findByPropertyX(Unknown Source)
    at com.my.company.MyEntityRepository.findByPropertyX(MyEntityRepository.java:17 
```

同样，如果 URL 被修改为无效的查询语法字符，例如“””：

```
http://host/context-root/entities/?page.sort=%22&page.sort.dir=asc 
```

会出现以下错误：

```
java.lang.StackOverflowError
    java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    . . .
    org.springframework.data.repository.query.parser.Property.create(Property.java:326)
    org.springframework.data.repository.query.parser.Property.create(Property.java:326)
    org.springframework.data.repository.query.parser.Property.create(Property.java:326)
    org.springframework.data.repository.query.parser.Property.create(Property.java:326) 
```

（还有第三种类型的异常会导致在`org.hibernate.QueryException`Repository`@Query`方法上显式定义。）

Spring Data JPA 抽象出这些参数的排序、分页和处理的细节；但是，它似乎不能优雅地处理这些场景（即指定了无效的排序参数）。

我们可以添加一些额外的自定义逻辑来验证实体上确实存在排序属性；但是，我想知道是否有一种更清洁、更集中的方法来做到这一点，这样我们就不会失去 Spring Data JPA 抽象的好处和简单性。我们在整个应用程序中使用这种排序功能与许多不同的实体，所以理想情况下，我们需要更多的通用方法，而不是必须显式定义或检查请求的每个实体页面的排序属性。

具体来说，我们实际上将 扩展`PageableArgumentResolver`为接受控制器中提供的带注释的排序默认值（为简单起见，代码示例中未说明），因此我们只想回退到这个默认排序顺序，或者只是默认排序顺序对于实体，而不是抛出异常。

一些想法和尝试..我可以使用 a`QueryCreationListener`来拦截查询创建并获取排序参数；但是，此时我实际上无法修改查询。或者，我可以扩展并使用自定义`PageableArgumentResolver`（我们已经在这样做）来获取排序参数；但是，我当时无权访问该实体，也无法确定该实体是否实际上具有该名称的属性。我们可以显式声明支持的属性；然而，这再次破坏了集中和自动处理这种情况而不需要特定或声明的实体知识的想法。

是否有任何其他类型的拦截器或类似构造可用于集中验证可分页排序参数并在调用查询之前根据需要进行修改？或者 Spring 是否有任何类型的配置或方式可以自动处理这种情况，以便更优雅地处理无效的排序参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:06:21.807

我正在查看代码，我认为更多的堆栈跟踪会有所帮助。但据我所知，如果您有心情重写一些 Spring 代码，我认为您可能需要解决两个问题。

这里有两种情况，第一种情况是您传递对象/表中不存在的排序字段。您真正想要的是始终默默地忽略该错误参数，而不仅仅是在传入 1 `PageableArgumentResolver`] [1](https://github.com/SpringSource/spring-data-commons/blob/master/spring-data-commons-core/src/main/java/org/springframework/data/web/PageableArgumentResolver.java)时。我认为它应该是[`AbstractQueryCreator`](https://github.com/SpringSource/spring-data-commons/blob/master/spring-data-commons-core/src/main/java/org/springframework/data/repository/query/parser/AbstractQueryCreator.java)（因此，[`JpaQueryCreator`](https://github.com/SpringSource/spring-data-jpa/blob/master/src/main/java/org/springframework/data/jpa/repository/query/JpaQueryCreator.java)）上的一个选项来忽略排序中的错误参数。

应该解决的第二部分可能是[`PageableArgumentResolver`](https://github.com/SpringSource/spring-data-commons/blob/master/spring-data-commons-core/src/main/java/org/springframework/data/web/PageableArgumentResolver.java). 如果您传递空字符串或没有意义的东西，`%20`那么它应该忽略该参数并且不将其发送到`PageRequest`.

快乐的黑客和好运。阅读您的帖子让我意识到我的网站容易受到同样问题的影响，我真的没有好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:19:37.560

我认为改进`PageableArgumentResolver`以优雅地处理这些场景。它可以尝试从提交的 as中创建一个`PropertyPath`实例，从而确保它是一个有效的实例。我对在默认情况下简单地删除无效是否有意义感到有些不安，这将返回根本没有排序的结果。这可能是最无缝的体验，但也可能导致繁琐的尝试找出结果未排序的原因。`String``Sort``String`

然而，它。如果您可以针对 Spring Data Commons 提出 JIRA 票并在此处链接此票，那就太酷了。如果您已经充实了一个可行的实现，请随意打开一个拉取请求。谢谢你已经把它带到了餐桌上！

# search - Solr 停用词不起作用

> ID：11232060
> 
> 赞同：0
> 
> 时间：2012-06-27T17:43:59.267
> 
> 标签：search, solr, stop-words

我正在使用 Solr 3.6 进行预测搜索。我需要 Solr 忽略单词“con”（带有空格），这意味着西班牙语中的“with”我添加了 solr.StopFilterFactory：

```
<filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"    // I also tried with "false"
                /> 
```

我的文件只包含“con”（不带引号）

但是当我搜索“Departamento con parrilla”时，Solr 没有返回任何内容，我需要它返回“Departamento parrilla”，而忽略查询中的“con”一词

我希望我让自己明白了。

非常感谢！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:53:27.960

这是我的错误，我没有将正确的 FieldType 分配给我想要过滤的字段。

# xml - 如何从 xml.data 的解析输入中解析键的值

> ID：11232061
> 
> 赞同：3
> 
> 时间：2012-06-27T17:44:08.280
> 
> 标签：xml, clojure

在我使用 :content 键提取值之后，我无法弄清楚解析的 xml 输入中的元素是什么。给定以下解析的 xml 输入，我如何提取所有 :content 键的值？

> ```
> #clojure.data.xml.Element{
>   :tag :Header, 
>   :attrs {}, 
>   :content (
>       #clojure.data.xml.Element{
>           :tag :ExportType, 
>           :attrs {}, 
>           :content ("Tamper Export")} 
>       #clojure.data.xml.Element{
>           :tag :CurrentDateTime, 
>           :attrs {}, 
>           :content ("2012-06-26T15:40:22.063")} 
>       #clojure.data.xml.Element{
>           :tag :ScheduledDateTime, 
>           :attrs {}, 
>           :content ("2012-06-25T00:00:00")} 
>       #clojure.data.xml.Element{
>           :tag :ExportGuid, 
>           :attrs {}, 
>           :content ("{06643D9B-DCD3-459B-86A6-D21B20A03576}")} 
>       #clojure.data.xml.Element{
>           :tag :FractionalReadIndicator, 
>           :attrs {}, 
>           :content ("1")})} 
> ```

此输出是通过使用 data.xml 解析 xml 文件创建的，然后使用

```
(first (:content parsed-xml-input)) 
```

谢谢你。

以下仅给我设备类型和设备 ID，这只是 xml 文件中 :content 的一部分。`<DeviceId>80580608</DeviceId><DeviceType>43</DeviceType>`

```
(defn extract-inner-map-val
    "Returns a map of embedded :content tag and value."

    [item]

    (let [key-elem (-> item :content first)
          val-elem (-> item :content second)]

        [(-> key-elem :content first)
         (-> val-elem :content first)]))

(defn extract-content-from-map
    "Accepts a sequence of values associated with a map key,
     and transforms them into a map of key/value pairs."

    [parsed-map]

    (into {} (map extract-inner-map-val (:content parsed-map)))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:01:19.133

这基本上归结为走树并选择所有：内容。您可以使用 clojure.zip (Functional Zippers) 执行此操作以及更多其他操作，但在这种情况下，当您真正需要的只是树上行走时，这有点笨拙。

```
user> (pprint 
        (flatten 
         (map :content (first (tree-seq :content :content (:content data))))))

("Tamper Export"
 "2012-06-26T15:40:22.063"
 "2012-06-25T00:00:00"
 "{06643D9B-DCD3-459B-86A6-D21B20A03576}"
 "1") 
```

您可能希望它不会变平，这只会使它打印得更好。

# javascript - 颜色框和列表视图

> ID：11232065
> 
> 赞同：2
> 
> 时间：2012-06-27T17:44:39.487
> 
> 标签：javascript, asp.net, listview, colorbox

我对 JavaScript / jQuery 比较陌生，并且使用 ASP.NET 的经验不到 6 个月。我在使用带有 SQL Server 应用程序的 ASP.NET的[colorbox插件时遇到了问题。](http://www.jacklmoore.com/colorbox)

现在，我正在使用 colorbox 在我一直在开发的 PhotoGallery 中打开缩略图的更大显示。一切似乎都很好，我可以在彩盒显示中将照片组合在一起。

一切正常，除了我`ListView`有分页，所以每页只显示 40 张图像。Colorbox 只会对`ListView`页面上当前的照片进行分组。

.ASPX 页面`ListView`（不漂亮，但可以）

```
<ItemTemplate>
    <td id="Td2" runat="server" style="padding:10px">
        <a class='colorbox' href="/Photos/AllPhotos/<%#Eval("FileName") %>" 
            title="<strong><%# Eval("Title") %></strong> photo by: <%#Eval("Name") %>">
        <img src="/Photos/AllPhotos/Thumbnail/<%#Eval("FileName") %>"
            title="<%# Eval("Title") %>" /></a>
    </td>
</ItemTemplate> 
```

用于绑定颜色框的 JavaScript：

```
function pageLoad() {
    $("a.colorbox").colorbox({
        rel: "gal",
        maxWidth: "100%",
        maxHeight: "100%"
    })
}; 
```

我想要的是将颜色框绑定到绑定到的所有照片，`ListView`而不仅仅是当前页面。因此，理想情况下，用户可以翻阅我们画廊中的所有照片（通过单击其中一个缩略图），而不必关闭颜色框 --> 转到下一页 --> 再次打开颜色框。

有没有一种简单的方法可以将颜色框绑定到 中的所有照片`ListView`？我可以想到几个“hack”方法（例如将照片绑定到隐藏的`ListView`，并将它们与显示的照片分组），但我正在尝试开发一个很好用的应用程序！

我发现了一些看起来[很有希望](https://stackoverflow.com/questions/10747665/colorbox-gallery-using-json/)的东西，但我以前从未使用过 JSON/SQL，所以如果我必须这样做的话，我会有一个学习曲线。

任何帮助将不胜感激，我在工作中经常使用这些论坛，所以这是我第一个寻求建议的地方。

（对不起，如果我错过了什么，这是我的第一篇文章）

**编辑**

好吧，我想出了一些办法，可以完成工作，但可能不如我希望的那么好。我最终做的是创建第二个数组，其中填充了所有未显示的照片，将其绑定到隐藏的 ListView，然后将隐藏的照片与显示的照片分组。它似乎工作正常，只是没有我希望的那么干净，所以我仍然愿意接受更好的方法（如果有的话），但现在我很满足。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:38:16.800

这是一种使用数据表并将所有数据绑定到服务器上的 ListView 的方法（不要在 ListView 上使用分页）并在客户端获得更平滑的分页，这仍然适用于 colorbox [。](http://datatables.net/)

设置您的 ListView 的 LayoutTemplate。您将需要一个具有“datatable”类的表，并且还需要 thead 和 tbody 才能使数据表正常工作，以及一些使用 jQuery 选择表的方法（这里我将 id 设置为“tblStuff”并确保存在没有 runat="server")。此外，如果您在设计视图中创建了 LayoutTemplate，请务必小心，因为 Visual Studio 有将一个表嵌套在另一个表中的习惯。

```
<LayoutTemplate>
    <table id="tblStuff" class="datatable">
        <thead><tr><th>...(Your <th> elements go here)...</tr></thead>
        <tbody><tr ID="itemPlaceholder" runat="server"></tr></tbody>
    </table>
</LayoutTemplate> 
```

现在在脚本中，您可以这样做：

```
$(document).ready(function() {
    $('a.colorbox').colorbox({
        // just how you had it before.
    });

    $('#tblStuff').dataTable({
        // here is where you'll want to set some of the many many options for datatables.
        // See their documentation.
    });
}); 
```

这里的所有都是它的。您应该能够保持 ItemTemplate 不变。

# asana - 通过 Asana API 创建项目

> ID：11232073
> 
> 赞同：0
> 
> 时间：2012-06-27T17:45:18.300
> 
> 标签：asana

仔细阅读[文档](http://developer.asana.com/documentation/#projects)，我看到了一个可用于更新现有项目的端点，但没有关于创建新项目的内容。目前不支持此功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:24:52.593

（我在 Asana 工作）

这确实得到了支持，尽管文档中显然没有具体提及。感谢您的提问，我们应该纠正这个问题。

# php - php codeigniter中的多维数组

> ID：11232082
> 
> 赞同：3
> 
> 时间：2012-06-27T17:46:08.447
> 
> 标签：php, arrays, codeigniter

我需要根据从我的数据库中检索到的记录构建一个多维数组。

这是我的代码：

```
<?php
/*
 ...some code...
 */
foreach($data['colleges'] as $college)
{
  $college_temp[] =  $college->name; 
  $college_temp[] =  $college->abbrev;
  $college_temp[] =  $college->long_name;
  $college_temp[] =  $college->long_abbrev;
  $college_temp[] =  $college->url;
  $college_temp[] =  $college->description;
} 
```

数据库中的所有记录在数组中一个接一个。我需要使用多维数组对此进行优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:47:33.467

```
$college_temp = array();
foreach($data['colleges'] as $college)
{
    $college_temp[] =  $college;
}

// Echo the first one's name
echo $college_temp[0]['name'];

// Echo the second one's url
echo $college_temp[1]['url']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:55:21.807

```
$college_temp = array();
$i = 0;
foreach($data['colleges'] as $college)
    {

        $college_temp[$i]['name'] =  $college->name; 
        $college_temp[$i]['abbrev'] =  $college->abbrev;
        $college_temp[$i]['long_name'] =  $college->long_name;
        $college_temp[$i]['long_abbrev'] =  $college->long_abbrev;
        $college_temp[$i]['url'] =  $college->url;
        $college_temp[$i]['description'] =  $college->description;
        $i++;

    }
    // var_dump($college_temp); // uncomment to check array contents 
```

# openlayers - 在 OpenLayers 中显示矢量图层的单个特征

> ID：11232083
> 
> 赞同：1
> 
> 时间：2012-06-27T17:46:08.847
> 
> 标签：openlayers

给定一个要素 ID，我想隐藏矢量图层上的所有其他要素，并且只在我的地图上显示该要素。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:20:48.097

没关系，我修好了，比我想象的要容易...

> sprintersLayer.features[labId].style = { fillColor: "green"}; map.layers[1].redraw();

我只是更改了我想要的特定功能的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T08:31:58.497

要隐藏矢量图层上的所有其他功能并仅在地图上显示 id=labId 的一个功能，您可以使用此代码

```
for(var f=0;f<sprintersLayer.features.length;f++) {
 if(sprintersLayer.features[f].id !="labId")
  {
  sprintersLayer.features[f].style = { visibility: 'hidden' };}

  } 
```

它在我的项目中有效，告诉我它是否有效，祝你好运。

# python - 整数到字节而不使用python中的结构

> ID：11232085
> 
> 赞同：1
> 
> 时间：2012-06-27T17:46:09.830
> 
> 标签：python, struct, integer, byte

我需要使用运行 Python 1.5.2+ (!!!) 且模块很少的嵌入式系统。并且没有可用的“结构”模块......这是可用模块的列表：

```
marshal
imp
_main_
_builtin_
sys
md5
binascii 
```

是的，就是这样，没有结构模块......

所以，我需要创建一个无符号短整数的 4 字节表示以发送到串行...

使用结构：

```
date = day + month * 32 + (year - 2000) * 512
time = 100 * hour + minute
data = struct.pack(b'HH', date, time) 
```

2 个字节上的日期时间 2 个字节上的时间，每个人都很高兴......

但是如果不使用“struct”模块，我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:50:19.110

你可以这样做：

```
x = 0xabcd

packed_string = chr((x & 0xff00) >> 8) + chr(x & 0x00ff) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:10:26.943

这是给你的完整翻译

前

```
>>> import struct
>>> day = 1; month = 2; year = 2003
>>> hour = 4; minute = 5
>>> date = day + month * 32 + (year - 2000) * 512
>>> time = 100 * hour + minute
>>> data = struct.pack(b'HH', date, time)
>>> data
'A\x06\x95\x01'
>>> data.encode("hex")
'41069501' 
```

之后

```
>>> data2 = chr(date & 0xFF) + chr((date >> 8) & 0xFF) + chr(time & 0xFF) + chr((time >> 8) & 0xFF)
>>> data2
'A\x06\x95\x01'
>>> data2.encode("hex")
'41069501'
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:52:00.360

我可以通过将字节列表传递给 bytes() 来做到这一点：

```
data=bytes([date%256,date//256,time%256,time//256]) 
```

# javascript - Javascript 匹配正则表达式

> ID：11232086
> 
> 赞同：0
> 
> 时间：2012-06-27T17:46:13.287
> 
> 标签：javascript, regex

我正在构建一个javascript应用程序，我需要知道属于用户选择的html标签，然后为了方便使用将它们放在一个数组中。

我用`htmlText`它给了我一个看起来像这样的字符串：

```
<h1><span style="color: rgb(102, 51, 153); font-weight: bold; text-decoration: underline;"><sub>test</sub></span></h1> 
```

由于我对正则表达式几乎一无所知，而且我所知道的似乎并没有做我想做的事，所以我希望你们中的一个人能在这方面帮助我。

那么让上面的字符串看起来像下面的数组的最好方法是什么？

```
<h1>,
<span style="color: rgb(102, 51, 153); font-weight: bold; text-decoration: underline;">,
<sub> 
```

到目前为止我的代码（不知道我是否在正确的轨道上）：

```
var fullhtml = SEOM_common.range.htmlText;//Get user selection + Surrounding html tags
var tags = fullhtml.split(SEOM_common.selected_value);//Split by user selection
var tags_arr = tags[0].match(/<(.+)>/);//Create array of tags 
```

* * *

谢谢大家的回答和评论。我设法构建了以下方法，这正是我想要的。

```
find_all_parents : function(selectRange,endNode){
   var nodes = [];
    var nodes_to_go = [];
    if(selectRange.commonAncestorContainer) nodes_to_go.push(selectRange.commonAncestorContainer.parentNode);//all browsers
        else nodes_to_go.push(selectRange.parentElement());//IE<9 browsers

        var node;

        while( (node=nodes_to_go.pop()) && node.tagName.toLowerCase() != endNode){
            if(node.nodeType === 1){ //only element nodes (tags)
                nodes.push(node);
            }

            nodes_to_go.push(node.parentNode);          
        }
        return nodes;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:06:10.183

不要为此使用正则表达式。改用文档操作方法并获取标签本身（而不是标签的文本表示）。

例如：

```
var find_all_nodes = function(rootNode){
    var nodes = [];
    var nodes_to_go = [rootNode];
    var node;
    while( (node=nodes_to_go.pop()) ){
        if(node.nodeType === 1){ //only element nodes (tags)
            nodes.push(nodes_to_go);
        }
        var cs = node.childNodes;
        for(var i=0; i<cs.length; i++){
            nodes_to_go.push(cs[i]);
        }
    }
    return nodes;
} 
```

一旦有了标签，您就可以从中获取各种信息。我建议查看[MDN的 DOM 文档和](https://developer.mozilla.org/en/Gecko_DOM_Reference)[Quirksmode](http://www.quirksmode.org/compatibility.html)的兼容性说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:03:01.887

### 您不应该使用 Regex 进行 HTML/XML 解析。

...除非您有充分的理由这样做！

如果是，则替换`(<h1>)(<span[^>]*>)(<sub>)[^<]*</sub></span></h1>`为`$1,\n$2\n$3`.

# java - 基于java中条件的xpath

> ID：11232087
> 
> 赞同：0
> 
> 时间：2012-06-27T17:46:14.203
> 
> 标签：java, xml, xpath

我有以下结构的 xml：

```
<Root>
  <Sample>
    <Materil material_class="book" />
    <Book Name="harry" Price="8" />
    <Book Name="small things" Price="9" />
    <Book Name="snow" Price="10" />
  </Sample>
 <Commodity>
    <Sample>
        <Materil material_class="sub" />
        <Book Name="sherin" Price="8" />
        <Book Name="bigthings" Price="9" />
        <Book Name="leopard" Price="10" />
    </Sample>
    <Commodity>
         <Sample>
            <Materil material_class="sub" />
            <Book Name="azxcv" Price="86" />
            <Book Name="ddddd" Price="79" />
            <Book Name="qwert" Price="810" />
         </Sample>
    </Commodity>
    <Commodity>
         <Sample>
            <Materil material_class="subtwo" />
            <Book Name="ratnam" Price="86" />
            <Book Name="shantharam" Price="99" />
            <Book Name="da vinci" Price="10" />
         </Sample>
    </Commodity>
 </Commodity>
</Root> 
```

有没有办法根据条件迭代这个 xml，如果`material_class = "sub"`，迭代`Book`下面的标签并存储`@Name`and `@Price`。如果是`material_class = "book"`，则迭代其`Book`下方的标签。我也想获得`/Root/Commodity/Commodity`标签数量的长度（在这种情况下，它是两个）。任何帮助表示赞赏。我是 XPath 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:26:29.797

要获取 Book`@Name`和`@Price`for `@material_class='sub'`or `@material_class='book'`，请使用此 XPATH

```
/Root[descendant-or-self::Sample or Sample[descendant-or-self::*]]//*[Materil[@material_class='sub' or @material_class='book']]/Book 
```

**或者**

```
//Sample[Materil[@material_class='book' or @material_class='sub']]/Book 
```

加载此 XPATH 后，打印名称使用`@Name`和价格使用`@Price`

要获取 /Root/Commodity/Commodity 标签的长度，XPATH 是

```
/Root/Commodity/Commodity 
```

**或者**

```
//Commodity/Commodity 
```

## 爪哇：

```
NodeList node = (NodeList) xpath.evaluate("/Root/Commodity/Commodity", xml, XPathConstants.NODESET);
count = node.getLength(); // OUTPUTS: 2 
```

*供您参考，实际上通过 XSLT 呈现 XML 的性能要好得多，而且更容易实现。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:07:38.343

```
<xsl:apply-templates select="//Sample[Materil[@material_class='sub']]/Book"/>
<xsl:apply-templates select="//Sample[Materil[@material_class='book']]/Book"/> 
```

我现在没有访问 XSL 编辑器的权限，所以没有测试上述内容，但它会给你一个想法。选择书，并用您想要的条件约束材料。

# java - 拆分java字符串

> ID：11232088
> 
> 赞同：0
> 
> 时间：2012-06-27T17:46:14.247
> 
> 标签：java

> **可能重复：**
> [字符串拆分不返回空结果](https://stackoverflow.com/questions/3764687/string-split-not-returning-empty-results)

我有一串用逗号（，）分隔的单词，我需要将主字符串标记或拆分为子字符串。例如，`string="file1,param1,file2,param2,file3,"` 字符串的含义是所有文件名的列表和传递给它的参数。就像，对于 file1--> param1、file2-->param2 和 file3，不存在任何参数。

所以我需要提取文件名和参数，如果有的话。如果没有参数，我需要获取空字符串（“”）。

```
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

public class XStringTokenizer {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String str = new String("File1,param1,File2,");
        List list = new ArrayList();
        System.out.println(str.split(",").length);
        String[] string = str.split(",");
        for(int i=0;i<string.length;i++){
            list.add(string[i]);
        }
        System.out.println(list);
    }
} 
```

上述示例代码的当前输出为 [File1,param1,File2]，但预期输出为 [File1,param1,File2,]。基本上我不应该错过上面字符串中第三个逗号之后的结尾空字符串`str`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:52:55.383

看起来你应该使用

```
 String[] string = str.split(",",-1); 
```

String.split(String,int)的[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)声明“如果 n 为非正数，则该模式将被应用尽可能多的次数，并且数组可以具有任意长度。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:51:45.730

使用带有负数限制的[public String[] split(String regex, int limit)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:54:21.920

删除最后一个`,`或考虑使用[Apache Commons Lang 包](http://commons.apache.org/lang)，其中包括`StringUtils.join()`，它完全符合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:53:33.690

我认为 str.split(",") 仅在逗号后跟某个字符而不是“无”时才拆分，因为逗号是字符串的最后一个字符。因此，在这种情况下，拆分不会将其识别为分隔符，并且不会生成您在数组中期望的第 4 个字符串，因为它将为空。

我希望这可以帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T17:54:12.760

您可以通过检查字符串是否以“，”结尾来简单地做到这一点，然后在列表中添加一个空字符串。您需要在最后执行此操作

```
if(str.endsWith(',')) list.add(""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T17:51:57.193

```
String str = new String("File1,param1,File2,");
java.util.Tokenizer tk= new java.util.Tokenizer(str,",");
while(tk.hasMoreTokens()) {
    String tokenFile= tk.nextToken();
    String tokenParam= tk.nextToken();
    // do things...
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-27T17:51:18.630

这不是 String.split 的工作方式。

> 因此，尾随的空字符串不包含在结果数组中。

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

您可以检查字符串是否以逗号结尾，然后自己添加空字符串

# javascript - If 语句 - 如何减少代码量。（循环？数组？）Javascript

> ID：11232092
> 
> 赞同：0
> 
> 时间：2012-06-27T17:46:33.493
> 
> 标签：javascript

我有 10 个变量。q1 到 q10

我的脚本如下：

```
if (q1 == '1') { q1 = 'Yes'; 
} else if (q1 == '2') { q1 = 'No';
} else { q1 = 'Did Not Answer'; } 
```

我已经为所有 10 个输入了这个。我不确定我是否可以在这个变量中插入另一个变量。

我正在尝试做这样的事情：

```
var ex = '1';
while (ex < 11) { 
if (q[ex] == '1') { q[ex] = 'Yes'; ex++;
} else if (q[ex] == '0') { q[ex] = 'No'; ex++;
} else { q[ex] = 'Did Not Answer'; ex++ } 
```

**基本上我想消除 4 行代码 x 10 个变量。**

[ex] 是变量内部的一个变量（代表 q1，确定 q1 = Yes、No 或 Did Not Answer，然后将 1 添加到 q[ex]，现在是 q2....

我知道 [] 可能不正确，我只是不知道如何以可以理解的方式解释这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:52:29.240

请参阅[我](https://stackoverflow.com/a/10029116/1048572)对[替代一百万个 IF 语句的回答](https://stackoverflow.com/q/10029089/1048572)。

while 循环当然是一件好事，你应该真正使用[数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array) `q`而不是单个变量。您也可以使用 for 循环。`q*N*`

如果你想消除 if 语句，你可以使用一个带索引的对象（这里是一个数组，自然索引从“0”到“ *n-1* ”，做同样的工作）：

```
var q = ["0", "1", 1, 0, 2, ...];
for (var i=0; i<q.length; i++)
    q[i] = ["No", "Yes"][q[i]] || "Did Not Answer";

// result for q:
["No", "Yes", "Yes", "No", "Did Not Answer", ...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:57:55.903

这不会一直限制它，但你可以创建一个函数

```
translate = function(v)
{
    if (v === '1') { 
        v = 'Yes'; 
    } else if (v === '2') { 
        v = 'No';
    } else { 
        v = 'Did Not Answer'; 
    }
  return var
} 
```

然后为每个变量调用 translate(q1) 等。这会将其移动到 ~16 行而不是 40 行，并避免重复代码。

您也可以将变量重新定义为变量数组并像那样快速循环，但我不知道它们都在哪里定义以及如何为您工作。编辑：Bergi 有一个很好的例子。如果你能像那样改革你的变量，那是最好的方法。

# apache-flex - 为什么 flex 字符串不支持 unicode 0？

> ID：11232094
> 
> 赞同：2
> 
> 时间：2012-06-27T17:46:39.333
> 
> 标签：apache-flex, flex4, flex3

当我尝试将字节转换为字符时，如果遇到 unicoder 编号 0 (NUL)，flex 会停止转换。为什么会这样？Flex 能够转换除 0 以外的 1-256 个 unicode 数字。在以下示例中，警报窗口不显示任何文本，因为参数以 0 开头，同时从 unicode 数字形成字符串消息。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application name="Alert" xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" creationComplete="init();">
    <s:controlBarContent>
        <s:Button id="btn"
                  label="Show alert"
                  click="init();"/>
    </s:controlBarContent>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;

            protected function init():void {
                // if string message value is String.fromCharCode(78,0);, then Alert displays as N
                //Here, since message starts with unicode character 0, Alert displays nothing. 
                //Flex string is getting stopped if it encounters unicode 0, why is it so? 
                //but flex string supports other contorl ascii characters except NUL (0)
                var message:String=String.fromCharCode(0, 78, 1);
                Alert.show(message, "", Alert.YES | Alert.NO | Alert.OK | Alert.CANCEL);
            }
        ]]>
    </fx:Script>    
</s:Application> 
```

我不确定为什么 flex 不能转换 unicode 0 字符？如果为 0，我暂时将它们转换为 32（空白）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:48:04.747

好问题！。我在我的 Flash Builder 4.6 上试用它。

据我所知是 String.fromCharCode(num),num 取决于[keycode](http://www.expandinghead.net/keycode.html)

如果您的 num 从 1~Max 开始并且它不包含在键码列表中，

它将返回空格。但是如果 num 为 0，fromCharCode 将返回 undefined ref。

但是你从这个字符串数组中获取字符串长度：

{undefined,h}.length = 2

{undefined,h} 使字符串 = 未定义。记为 X。

我会告诉你数学

`h+X = h+undefined.`

你可以试试这个：

```
var str:String =  String.fromCharCode(0,104);
var str1:String =  String.fromCharCode(1,104);
var str2:String =  String.fromCharCode(104,0,104);
Alert.show(str);
Alert.show(str.length.toString());
Alert.show(str1);
Alert.show(str1.length.toString());
Alert.show(str2);
Alert.show(str2.length.toString()); 
```

你会看到 str2 向你展示了一些不同的东西。
{h,undefined,h}.length = 3

对于每个 this for string ref 将是：

h+X = h+未定义。

我猜它的原因是`String.fromCharCode`Function don't catch

```
if(codenum == 0){return whitespace} 
```

它可以用作 switch 或 for 或其他方式，以 1 开始代码 num。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:04:20.227

C 字符串以`null`字节`\0`字符结尾。

与 C 类似，我相信 ActionScript 将其解释为以[空字符结尾的字符串](http://en.wikipedia.org/wiki/Null-terminated_string)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:11:09.550

因为 0 字节实际上不是字符串 char。如果您正在处理二进制数据，请将其保存在[ByteArray](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html)

# android - 带有地图视图的 Android ActionBarSherlock 选项卡式操作栏

> ID：11232098
> 
> 赞同：3
> 
> 时间：2012-06-27T17:46:45.397
> 
> 标签：android, android-fragments, android-mapview, actionbarsherlock

我有 4 个视图，其中两个包含地图视图。最后我真正想要的是这 4 个视图之间的选项卡式导航。

经过一些研究，最好的主意似乎是使用 ActionBarSherlock 并使这些视图中的每一个都成为主“主”活动中的“片段”。这种接缝是一件很容易做的事情，但却给我带来了很多麻烦（事实上，从我在网上可以找到的东西来看，接缝对每个人来说都是一种痛苦）。

首先，我的代码。 **ActivityMain.java**

```
public class ActivityMain extends SherlockFragmentActivity
{
    static String CLASS_NAME = "ActivityMain";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        Log.v(CLASS_NAME, "here");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.createMenu();
    }

    public void createMenu()
    {
        this.getSupportActionBar().setDisplayShowHomeEnabled(false);
        this.getSupportActionBar().setDisplayShowTitleEnabled(false);

        this.getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tab1 = getSupportActionBar()
                .newTab()
                .setText("First tab")
                .setTabListener(new MyTabListener<FragmentOne>(this, FragmentOne.class));

        getSupportActionBar().addTab(tab1);

        Tab tab2 = getSupportActionBar()
                .newTab()
                .setText("Second tab")
                .setTabListener(new MyTabListener<FragmentTwo>(this, FragmentTwo.class));

        getSupportActionBar().addTab(tab2);
    }

    public class MyTabListener<T extends Fragment> implements TabListener
    {

        private ActivityMain mActivity;
        private Fragment mFragment;
        private Class<T> mClass;

        public MyTabListener(ActivityMain activity, Class<T> fragmentClass)
        {
            mActivity = activity;
            mClass = fragmentClass;
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft)
        {
            if (mFragment == null)
            {
                mFragment = Fragment.instantiate(mActivity, mClass.getName());
                ft.add(android.R.id.content, mFragment, null);
            }
            else
            {
                //ft.setCustomAnimations(android.R.animator.fade_in, android.R.animator.animationtest);
                ft.attach(mFragment);
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft)
        {
            if (mFragment != null)
            {
                ft.detach(mFragment);
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft)
        {
        }
    }
} 
```

FragmentOne 加载得很好，那个没有问题。FragmentTwo 是麻烦开始的地方。这是文件： **FragmentTwo.java**

```
package com.test;

import com.actionbarsherlock.app.SherlockFragment;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentTwo extends SherlockFragment
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Log.v("Test", "Two!");
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.two, container, false);
        return view;
    }
} 
```

相应的布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapMapView"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.40"
        android:clickable="true"
        android:apiKey="MY_KEY"
    />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        style="@android:style/ButtonBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/refreshButton"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:onClick="refreshSightings"
            android:text="@string/A_MAP_REFRESH_BUTTON" />

    </LinearLayout>

</LinearLayout> 
```

现在当然这给了我错误*Binary XML file line #7: Error inflating class com.google.android.maps.MapView*

我已经尝试导入[https://github.com/petedoyle/android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps)包并替换已经存在的 android-support-v4 包但是当我尝试运行我的应用程序时，它会因错误而死找不到 ActivityMain 类。

第一个问题，我是否以正确的方式解决这个问题？我应该使用这 1 个主要活动并在 Fragments 中加载所有其他内容吗？

接下来，如果我以正确的方式执行此操作，是否有一个*很好*的教程来说明如何让它以一种体面的方式工作？除了其他人问同样的问题和一些对我不起作用的教程外，我在网上找不到任何东西。

基本上，我怎样才能在 2 个不同的选项卡中使用 2 个地图进行选项卡式导航？

# javascript - 在javascript中，两个“相等”字符串的===比较何时会返回false？

> ID：11232100
> 
> 赞同：-2
> 
> 时间：2012-06-27T17:46:47.350
> 
> 标签：javascript

以下两项中的每一项都包含相同的字符串值，但使用 '===' 的比较返回 false。

```
(hiddenColumns[hidenColsIndex] === cells[metricColsIndex].columnName) 
```

使用 '==' 的比较返回 true

```
(hiddenColumns[hidenColsIndex] == cells[metricColsIndex].columnName) 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:59:26.670

```
//a and b are equal in data but not equal in type
var a = 1;
var b = "1";

//== will return true
if (a == b)
{
    console.log("true");
}
else
{
    console.log("false");
};

//=== will return false
if (a === b)
{
    console.log("true");
}
else
{
    console.log("false");
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:50:54.310

您不是在比较相同类型的两个对象。值之一（或两者）不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:51:09.883

=== 表示比较值和数据类型。

当您想要比较两个元素的值以及它们的数据类型时，=== 应该为 false。

在您的情况下，第一个语句是错误的，因为它们是两种不同的数据类型在第二种情况下，该语句是正确的，因为值是相同的（考虑比较两个普通对象）

# header - Javafx 2：TableView 上的垂直滚动条不可见，如何解决？

> ID：11232104
> 
> 赞同：2
> 
> 时间：2012-06-27T17:47:02.127
> 
> 标签：header, tableview, javafx-2, scrollpane

TableView 内置了滚动条，但是为什么我看不到垂直滚动条呢？

这是我将 TableView 放入 HBox 时的代码：

```
HBox HBox_tabelDatabase = new HBox();
                HBox_tabelDatabase.setAlignment(Pos.TOP_CENTER);
                HBox_tabelDatabase.setPadding(new Insets(5,5,5,5));
                HBox_tabelDatabase.setStyle(  "-fx-border-style: solid;"
                + "-fx-border-width: 1;"
                + "-fx-border-color: #ADDFFF;"
                + "-fx-accent: #ADDFFF;"
                + "-fx-accent: #ADDFFF;"
               + "-fx-base:  #ADDFFF;"
                + "-fx-background: white;"
                + "-fx-control-inner-background: white;"
                + "-fx-focus-color: #ADDFFF;"
                + "-fx-dark-text-color: deepskyblue;"
                + "-fx-mid-text-color: black;"
                + "-fx-light-text-color: blue;");

Tab tab6 = new Tab();

HBox_tabelDatabase.getChildren().add(tableview);
HBox_tabelDatabase.setPrefHeight(200);

tab6.setText("Tabel Database");
tab6.setContent(HBox_tabelDatabase); 
```

这是我定义 TableView 及其列和行的代码：

```
private void buildData(){
          Connection c ;
          data = FXCollections.observableArrayList();
          try{
            c = DBConnect.connect();
            //SQL FOR SELECTING ALL OF APP.tabelJembatan
            String SQL = "SELECT * from APP.tabelJembatan";
            //ResultSet
            ResultSet rs = c.createStatement().executeQuery(SQL);

            /**********************************
             * TABLE COLUMN ADDED DYNAMICALLY *
             **********************************/
            for(int i=0 ; i<rs.getMetaData().getColumnCount(); i++){
                //We are using non property style for making dynamic table
                final int j = i;                
                TableColumn col = new TableColumn(rs.getMetaData().getColumnName(i+1));
                col.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<ObservableList,String>,ObservableValue<String>>(){                    
                    public ObservableValue<String> call(TableColumn.CellDataFeatures<ObservableList, String> param) {                                                                                              
                        return new SimpleStringProperty(param.getValue().get(j).toString());                        
                    }                    
                });

                tableview.getColumns().addAll(col); 
                col.setMinWidth(200);
                System.out.println("Column ["+i+"] ");
            }

            /********************************
             * Data added to ObservableList *
             ********************************/
            while(rs.next()){
                //Iterate Row
                ObservableList<String> row = FXCollections.observableArrayList();
                for(int i=1 ; i<=rs.getMetaData().getColumnCount(); i++){
                    //Iterate Column
                    row.add(rs.getString(i));
                }
                System.out.println("Row [1] added "+row );
                data.add(row);

            }

            //FINALLY ADDED TO TableView
            tableview.setItems(data);
          }catch(Exception e){
              e.printStackTrace();
              System.out.println("Error on Building Data");             
          } 
```

图片用于：TableView 上的垂直滚动条不可见

![TableView 上的垂直滚动条不可见](../Images/a8bc314f617cdaa7e4bd846d4b11af3c.png)

然后，我尝试将 TableView 放入 ScrollPane，但是当我垂直滚动数据时，标题也在移动。我的意思是，头球没有留在那个位置。我使用了这段代码：

```
ScrollPane scrollpane1 = new ScrollPane(); 
scrollpane1.setContent(tableview); 
```

图像：当我垂直滚动时，标题也在移动

![当我垂直滚动时，标题也在移动](../Images/d72fcc7f3296e50467db37149a4e7210.png)

**当我垂直滚动时，有没有办法让第一行（标题）保持在那个位置？**

# c# - 在视图中添加多个 EditorTemplate 实例

> ID：11232105
> 
> 赞同：0
> 
> 时间：2012-06-27T17:47:03.640
> 
> 标签：c#, asp.net-mvc-3, razor

我的 MVC3 项目中有一个`Create`视图页面来创建`Church`模型的实例。A`Church`包含`Contact`我希望用户能够在视图中添加的元素列表。

我有一个适用于该`Contact`类型的 EditorTemplate，但现在该视图只允许用户添加一个实例。我想创建一个链接，添加必要的输入以添加另一个`Contact`（我可能还会添加删除功能）。

现在我只有：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Contacts)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Contacts)
</div> 
```

我看到一个网站在解释 EditorTemplates（我认为他以电话号码为例）时对此进行了介绍，但我在任何地方都找不到。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:48:24.627

您绝对应该阅读[这篇博文](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。它说明了如何实现这一目标。它解释了您在开始实现此功能时可能遇到的困难，因为默认模型绑定器在绑定集合和您需要遵守的索引时使用的[有线格式。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)当使用 javascript 添加/删除动态输入字段时，您仍然需要尊重这种格式。因此，本文中采用的方法通过将*非序列索引*约定封装到可重用的`Html.BeginCollectionItem`助手中来使用它。

这篇博文非常棒，因为它可以让您了解和了解模型绑定器在 ASP.NET MVC 中的工作原理以及它用于绑定到集合的不同约定。如果您很好地理解了这篇博文，那么您已经了解了 30% 的 ASP.NET MVC 框架。它涵盖了许多重要的概念。

# css - CSS蒙版图像不起作用

> ID：11232106
> 
> 赞同：0
> 
> 时间：2012-06-27T17:47:03.727
> 
> 标签：css

关于为什么标志没有填充下面的 h2 文本的任何想法？开发网址：[http](http://runnerupapparel.com/building/) ://runnerupapparel.com/building/ （信息面板）

背景网址链接正确：[http ://runnerupapparel.com/building/images/usa.png](http://runnerupapparel.com/building/images/usa.png)

```
h2.usa {
  background-size: 100px auto;
  -webkit-mask-image: url(../images/usa.png);
  -o-mask-image: url(../images/usa.png);
  -moz-mask-image: url(../images/usa.png);
 -ms-mask-image: url(../images/usa.png);
 mask-image: url(../images/usa.png);
 letter-spacing: -2px;
 font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:13:46.110

你想要达到的效果是什么？

您使用的图像始终是 100% 不透明的。`mask-image`仅当使用的 png 图像具有不同的透明度部分时才有用。它本质上将 png 图像的透明度属性应用于您正在使用它的任何东西。

一个更好的例子来说明我的意思：[http ://www.benbarnett.net/2010/11/01/css3-text-effects-with-webkit-masking/](http://www.benbarnett.net/2010/11/01/css3-text-effects-with-webkit-masking/)

我已经拍摄了您的图像，对其进行了去饱和处理，并迅速删除了所有白色区域（使其透明）。将您的`mask-image`URL 替换为我编辑的 URL，您可以看到不同之处：http: [//i49.tinypic.com/xe278p.png](http://i49.tinypic.com/xe278p.png)

还值得注意的是，目前`mask-image`仅适用于 webkit 浏览器（例如 Chrome）。

# actionscript-3 - 从条件编译导入的类不可用

> ID：11232107
> 
> 赞同：0
> 
> 时间：2012-06-27T17:47:04.413
> 
> 标签：actionscript-3, flash-builder

我正在处理的项目中有一些我不熟悉的语法：

```
 CONFIG::FLASH_10_1 
 {
  import flash.net.NetStreamAppendBytesAction;
  import flash.events.DRMErrorEvent;
  import flash.events.DRMStatusEvent;
 } 
```

具有以下编译器标志

```
-define CONFIG::LOGGING false -define CONFIG::FLASH_10_1 true -define CONFIG::PLATFORM true -define CONFIG::MOCK false 
```

当导入位于该块内时，类引用不起作用，我想知道这是否是 fb4 与 fb4.5 的问题。如果我把它们拉出来，所有的引用都会按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:54:24.163

这种“特殊语法”被称为条件编译，只有在提供的编译常量为真时才会编译某些代码。

[这个问题](https://stackoverflow.com/questions/2736411/flash-flex-conditional-compilation-else)显示了定义编译常量的不同语法，您可能想尝试更改它。我将对其进行测试并尽快更新此答案。

* * *

经过我的测试，我相信你的编译器标志不正确——至少在 FB4.5 中是这样。

```
-define+=CONFIG::FLASH_10_1,true 
```

或者

```
-define CONFIG::FLASH_10_1,true 
```

编译常量和它的值应该用逗号分隔，而不是空格。该`+=`语法在我看到的一些示例中显示，并且似乎有效，我不确定这两个选项之间有什么区别。

# telerik - 如何为 Telerik 使用自定义 CSS 样式表？

> ID：11232113
> 
> 赞同：0
> 
> 时间：2012-06-27T17:47:28.810
> 
> 标签：telerik, telerik-grid

我正在使用 Telerik 网格，并且想要自定义 CSS。我使用过 Telerik 的[stylebuilder](http://stylebuilder.telerik.com/)，但下载 zip 后我不知道如何处理它。Telerik[说](http://www.telerik.com/community/forums/aspnet-mvc/style-builder/visual-style-builder-info.aspx)我应该

> 只需将此存档中的文件添加到您的项目中，您的自定义皮肤就可以使用了。

但我不知道在项目中的哪个位置添加它们，甚至不知道这是如何完成的。我将 CSS 文件移动到样式表文件夹（我使用的是 MS Visual Studio 2010）并链接到它们，但没有骰子。

我也通读了[this](http://www.telerik.com/community/forums/aspnet-ajax/style-builder/custom-stylesheets-for-telerik-controls.aspx) 和[this](http://blogs.telerik.com/aspnetmvcteam/posts/08-02-28/web-resources-demystified-part-2.aspx) [，](http://www.telerik.com/help/aspnet-ajax/introduction-how-skins-work.html)但仍然非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:48:09.697

尝试以下操作：

1.  从样式生成器导出主题，例如 classic.zip。

    classic.zip 的内容

    *   文件夹：经典
    *   文件：telerik.classic.css
2.  将 zip 解压缩到项目的内容文件夹，c:\path to your project\Content\

3.  修改您的母版页样式表 regsitrar 以包含 telerik.classic.css 而不是提供的样式表。

：

```
<%= Html.Telerik().StyleSheetRegistrar()
        .DefaultGroup(group => group.Add("telerik.common.css")
                                    .Add("telerik.classic.css"))
%> 
```

# ruby-on-rails - Ruby on rails f.label 用于复选框

> ID：11232115
> 
> 赞同：1
> 
> 时间：2012-06-27T17:47:36.230
> 
> 标签：ruby-on-rails, checkbox, label

我的视图中有一段代码，如下所示：

```
<% @map[value].each do |i| %> 

            <p><%= f.check_box(i)%> <%= f.label(i)%><br /><p>
            <% end %> 
```

该值`'i'`具有类似的字符串`a_b_c`。但它`a b c`在视图上显示为没有下划线。请让我知道如何在页面上打印字符串而不修剪下划线。另外请让我知道为什么 f.label 正在修剪下划线。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:57:34.837

`label`对于 80% 的向它传递属性符号（通常包含下划线）的情况很有帮助。它在生成标签文本时会去除下划线，因为大多数时候您不希望标签读取类似`First_Name`.

您可以传递一个字符串作为第二个参数来覆盖标签文本的显示方式。

```
<%= f.label(i, "a_b_c") %> 
```

所以也许你可以尝试这样的事情？

```
<%= f.label(i, i) %> 
```

# python - 如何向（Python）扭曲的 xmlrpc 服务器添加身份验证

> ID：11232118
> 
> 赞同：3
> 
> 时间：2012-06-27T17:47:49.827
> 
> 标签：python, authentication, twisted, xml-rpc, challenge-response

我正在尝试在不使用 user:password@host 的情况下向 xmlrpc 服务器（将在 P2P 网络的节点上运行）添加身份验证，因为这会将密码泄露给所有攻击者。身份验证基本上是创建一个专用网络，防止未经授权的用户访问它。

[我对此的解决方案是创建一个与此](http://en.wikipedia.org/wiki/Challenge-response_authentication#Simple_Example_mutual_authentication_sequence)非常相似的质询响应系统，但我不知道如何将其添加到 xmlrpc 服务器代码中。[我在这里](https://stackoverflow.com/questions/1273297/python-twisted-restricting-access-by-ip-address)发现了一个类似的问题（需要自定义身份验证的地方）。

所以我尝试创建一个每当客户端连接到服务器时都会调用的模块。这将连接到客户端上运行的质询-响应服务器，如果客户端正确响应，则返回 True。唯一的问题是我只能调用该模块一次，然后我得到一个反应堆无法重新启动错误。那么是否有某种方法可以让一个类在调用“check()”函数时连接并执行此操作？

最简单的事情是使用 SSL 连接吗？那会保护密码吗？虽然这个解决方案不是最优的，因为我试图避免为所有节点生成 SSL 证书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:25:32.397

根据您的问题描述，听起来您可能正在寻找[安全远程密码协议。](http://packages.python.org/srp/srp.html)它是一种基于密码的机制，可提供强大的相互身份验证，而无需复杂的 SSL 证书管理。它可能不像 SSL 证书那样灵活，但它易于使用和理解（完整的协议描述适合单个页面）。我经常发现它在受信任的第三方（又名 Kerberos/CA 机构）不合适的情况下是一个有用的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:38:20.597

对于任何正在寻找以下完整示例的人都是我的（感谢 Rakis 为我指明了正确的方向）。在这种情况下，用户和密码存储在一个名为“passwd”的文件中（有关更多详细信息以及如何更改它，请参见第一个有用的链接）。

服务器：

```
#!/usr/bin/env python
import bjsonrpc
from SRPSocket import SRPSocket
import SocketServer
from bjsonrpc.handlers import BaseHandler
import time

class handler(BaseHandler):
    def time(self):
        return time.time()

class SecureServer(SRPSocket.SRPHost):
    def auth_socket(self, socket):
        server = bjsonrpc.server.Server(socket, handler_factory=handler)
        server.serve()

s = SocketServer.ForkingTCPServer(('', 1337), SecureServer)
s.serve_forever() 
```

客户：

```
#! /usr/bin/env python
import bjsonrpc
from bjsonrpc.handlers import BaseHandler
from SRPSocket import SRPSocket
import time

class handler(BaseHandler):
    def time(self):
        return time.time()

socket, key = SRPSocket.SRPSocket('localhost', 1337, 'dht', 'testpass')

connection = bjsonrpc.connection.Connection(socket, handler_factory=handler)

test = connection.call.time()
print test
time.sleep(1) 
```

一些有用的链接：

*   [http://members.tripod.com/professor_tom/archives/srpsocket.html](http://members.tripod.com/professor_tom/archives/srpsocket.html)
*   [http://packages.python.org/bjsonrpc/tutorial1/index.html](http://packages.python.org/bjsonrpc/tutorial1/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:45:46.573

不要发明自己的身份验证方案。已经有很多很棒的方案，您不想负责对您的发明中存在哪些漏洞进行安全研究。

有两种被广泛支持的 HTTP 身份验证机制（XML-RPC 在其上运行，因此它们适用于 XML-RPC）。一个是“基本”，另一个是“摘要”。如果您决定通过 SSL 运行，“基本”就可以了。如果您真的不能使用 SSL，则 Digest 更合适。

两者都由 Twisted Web via 支持`twisted.web.guard.HTTPAuthSessionWrapper`，并带有[大量文档](http://twistedmatrix.com/documents/current/web/howto/web-in-60/http-auth.html)。

# html - 按钮浮动低于父 div

> ID：11232119
> 
> 赞同：4
> 
> 时间：2012-06-27T17:48:00.790
> 
> 标签：html, css

鉴于这个简化的片段：

```
<html>
  <body>
    <div>
      <div style='text-align:center;'>asdfaskjdfakjsd</div>
      <div style='float:right'>
        <input type='submit' value='asdf' />
      </div>
    </div>
  </body>
</html> 
```

按钮向右浮动，但在文本下方（在下一行）。我知道我可以使用相对定位重新对齐它，但是有没有正确的方法将两者放在同一条线上。

如果在右侧添加按钮不会影响文本的中心对齐，那就更好了。即它不会被推到左边。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:52:23.410

您可以切换两个 div 的顺序：

```
 <div style='float:right'>
    <input type='submit' value='asdf' />
  </div>
  <div>asdfaskjdfakjsd</div> 
```

只要您不介意它们的顺序相反。

这是一个演示这种效果的[小提琴。](http://jsfiddle.net/tracyfu/zYzqr/)第四个示例显示了反转的 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:55:33.307

我为跳来跳去道歉。我注意到即使使用反转的 div，文本也没有完全居中。

这是另一个解决方案（第 5 个示例）：http: [//jsfiddle.net/tracyfu/zYzqr/](http://jsfiddle.net/tracyfu/zYzqr/)

```
#method5 {
  position: relative;
}

#method5 .submit {
  position: absolute;
  right: 0;
  top: 0;
} 
```

唯一的问题是，如果你不小心，或者你的文本是动态的，它可能会与绝对定位的提交发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:49:21.727

我第一次误解了你的问题。您应该添加`float:left;`初始 div 并确保添加`clear:both;`到它们下方的 div 中。如果您希望文本居中，则需要在初始 div 上有一个宽度。

**HTML**：

```
<div id="container">
    <div id="content">
        asdfaskjdfakjsd
    </div>
    <div id="containerButton">
        <input type='submit' value='asdf' />
    </div>   
</div>
<div class="clear">asdfaskjdfakjsd</div> 
```

CSS：

```
#container {
    width:300px;   
}

#content {    
    float:left;
    text-align:center; 
    width:90%;
}

#containerButton {
    text-align:right;
​}

.clear {
    clear:both;
​}​ 
```

[现场演示](http://jsfiddle.net/pP285/9/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T18:03:21.437

标准方法是使用“clearfix”破解。CSS：

```
/* For modern browsers */
.cf:before,
.cf:after {
    content:"";
    display:table;
}

.cf:after {
    clear:both;
}

/* For IE 6/7 (trigger hasLayout) */
.cf {
    *zoom:1;
} 
```

信用[尼古拉斯加拉格尔](http://nicolasgallagher.com/micro-clearfix-hack/)。然后将您的行包装在一个`cf`元素中：

```
<div class="cf">
    <span>Button text</span>
    <div style='float:right'>
        <input type='submit' value='asdf' />
    </div>
</div> 
```

按钮文本更改为 a `span`，或者您可以将其保留为 a`div`并向左浮动。`cf`用于将块属性赋予一组不会自然显示它们的元素。没有它，随后的内容将不会被清除。

*   [**演示**](http://jsfiddle.net/paislee/SZbhy/)

# c++ - GCC __static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535)

> ID：11232123
> 
> 赞同：3
> 
> 时间：2012-06-27T17:48:14.390
> 
> 标签：c++, linux, gcc, gnu

根据帖子，[C++ 中的独立函数/数据](https://stackoverflow.com/questions/11197992/standalone-functions-data-in-c)，我继续将我的“公共数据”放在匿名命名空间中，如下所示，并且在 VS 2005/2008/2010 上的 Windows（Vista 64 位）上一切正常

```
namespace {
  ...
  static std::string mystrings[] = {
     str1,
     str2,
     ...,
     strN
  };
  ...
}

namespace mynamesp {
   ...
   use mystrings[] here..
   ...
} 
```

但是在 Linux 上（到目前为止测试了使用 GCC-4.1.2 构建的 RHEL5）我很快就遇到了分段错误。

```
$>myprog 
Segmentation fault
$>gdb myprog 
GNU gdb Fedora (6.8-27.el5)
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu"...
(gdb) r
Starting program: <path/to>/myprog 
[Thread debugging using libthread_db enabled]
[New Thread 0x2b8901a9da60 (LWP 32710)]

Program received signal SIGSEGV, Segmentation fault.
0x0000003e4ce9c928 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string ()
   from /usr/lib64/libstdc++.so.6
(gdb) bt
#0  0x0000003e4ce9c928 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string ()
   from /usr/lib64/libstdc++.so.6
#1  0x00002b88ffde482b in __static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535)
    at <path/to>/mysource.cpp:140
#2  0x00002b88ffde4d65 in global constructors keyed to _ZN91_GLOBAL__N__underscore_separated_path_to_mysource.cpp_00000000_6994A7DA2_1E () at <path/to>/mysource.cpp:12139
#3  0x00002b890011a296 in __do_global_ctors_aux ()
   from <path/to/libs>/debug/libmylibd.so
#4  0x00002b88ffcd7f33 in _init () from <path/to/libs>/debug/libmylibd.so
#5  0x00002b8901672e40 in ?? ()
#6  0x000000326940d22b in call_init () from /lib64/ld-linux-x86-64.so.2
#7  0x000000326940d335 in _dl_init_internal () from /lib64/ld-linux-x86-64.so.2
#8  0x0000003269400aaa in _dl_start_user () from /lib64/ld-linux-x86-64.so.2
#9  0x0000000000000001 in ?? ()
#10 0x0000000000000000 in ?? ()
(gdb) 
```

回溯调用堆栈项#1 中的第 140 行基本上指向我的字符串数组定义的末尾。我已经看到其他一些人收到此错误；但没有明显的修复。一如既往地欣赏任何想法/想法/更正。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-22T08:36:58.050

您的问题可能与*静态初始化订单惨败*有关。

当您使用另一个静态变量初始化一个静态变量时，就会发生这种情况。当后者尚未初始化时，则第一个正在使用未初始化的变量进行初始化。

根本原因是初始化静态变量的顺序未定义。

进一步阅读： [https ://isocpp.org/wiki/faq/ctors#static-init-order](https://isocpp.org/wiki/faq/ctors#static-init-order)

一个典型的解决方法是将静态变量包装在一个函数中。例子：

```
T& GetStaticA() {
  T static_var_A; // <--initialization here
  return A;
}

T static_var_B = GetStaticA(); // <-- static_var_A is guaranteed to be initialized 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:02:08.687

我遇到了这个问题，结果发现在我的编译行中我错过了链接中的最终输出文件。

```
g++ main.o logger.o timer.o keyboard.o -o main -lSDL -lSDL_image -lSDL_ttf -Wall 
```

本来应该

```
g++ main.o logger.o timer.o keyboard.o drawer.o -o main -lSDL -lSDL_image -lSDL_ttf -Wall 
```

（注意现在包含了drawer.o？）

很容易错过，因为我实际的 bash 编译脚本有更多行。

# gwt - 只为一些 GWT 的模块生成 war 文件

> ID：11232130
> 
> 赞同：0
> 
> 时间：2012-06-27T17:48:53.583
> 
> 标签：gwt, module, war, entry-point

我有一个 GWT 应用程序，它有大约 10 个模块 (.gwt.xml)，当然每个模块都有自己的入口点。我的一些模块是：

1.  登录
2.  费用
3.  销售
4.  商店

等等

例如，我需要做的是生成两个模块的war文件。登录和销售。那么，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:06:19.097

你只需要为两个模块生成war文件，所以你只需要编译两个模块。

在 GWT 编译项目选项 -> 入口点模块 -> 显示所有四个入口点

有一个“删除”按钮，用于忽略编译中的其他入口点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:22:19.007

我认为这取决于您使用的构建工具。如果您使用的是 maven 构建工具，您可以注释您不想在 gwt-maven 插件中编译的模块（我的意思是**模块标签）。**

我没有使用过蚂蚁构建工具。如果您使用的是 ant，请尝试为**gwt.module.name**参数传递不同的值。

如果您不使用依赖于您的 IDE 选项的构建工具。

请告诉我们您以哪种方式编译 gwt 模块。以便我们提供准确的解决方案。

# java - 居中 jFrame

> ID：11232131
> 
> 赞同：5
> 
> 时间：2012-06-27T17:48:54.520
> 
> 标签：java, swing, jframe

我正在尝试将我的框架定位在屏幕的中心，我知道这段代码必须运行良好：

```
Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
int x = (int) ((screen.getWidth() - getWidth()) /2);
int y = (int) ((screen.getHeight() -getHeight()) /2);
setLocation(x, y); 
```

或者这个：

```
Toolkit tk = Toolkit.getDefaultToolkit();
Dimension screenSize = tk.getScreenSize();
int screenHeight = screenSize.height;
int screenWidth = screenSize.width;
setSize(screenWidth / 2, screenHeight / 2);
setLocation(screenWidth / 4, screenHeight / 4); 
```

我已经尝试了所有可能的代码，但我不知道为什么它们不起作用，只需将框架移动到屏幕的右下角我使用 setRelative 为 null 但它再次不起作用。

我终于可以通过将宽度乘以 5 并将其除以某物来使框架非常靠近中心，但我知道这不是正确的方法。

谁能向我解释一下可能出了什么问题？

问题修复：

解决方案：我自己找到了最好的方法，如果您遇到同样的问题，只需让 netbeans 通过转到属性并检查生成中心来自动执行此操作，忘记愚蠢的代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T17:52:30.787

在主屏幕上居中框架的最简单方法（如果您有多个屏幕，则有选项）是使用 setLocationRelativeTo(...) 框架方法，并将 null 作为参数：

```
JFrame frame = new JFrame ();
frame.setSize ( 500, 300 );
frame.setLocationRelativeTo ( null );
frame.setVisible ( true ); 
```

如果这不起作用 - 试试这个（直接坐标）：

```
Dimension ss = Toolkit.getDefaultToolkit ().getScreenSize ();
Dimension frameSize = new Dimension ( 500, 300 );

JFrame frame = new JFrame ();
frame.setBounds ( ss.width / 2 - frameSize.width / 2, 
                  ss.height / 2 - frameSize.height / 2,
                  frameSize.width, frameSize.height );
frame.setVisible ( true ); 
```

最后一个也是“终极”的例子——它将在每个可用的系统屏幕上显示居中的框架：

```
public static void main ( String[] args )
{
    Dimension frameSize = new Dimension ( 500, 300 );
    for ( GraphicsDevice screen : getGraphicsDevices () )
    {
        GraphicsConfiguration gc = screen.getDefaultConfiguration ();
        Rectangle sb = gc.getBounds ();

        JFrame frame = new JFrame ( gc );
        frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        frame.setBounds ( sb.x + sb.width / 2 - frameSize.width / 2,
                sb.y + sb.height / 2 - frameSize.height / 2, frameSize.width,
                frameSize.height );
        frame.setVisible ( true );
    }
}

public static List<GraphicsDevice> getGraphicsDevices ()
{
    List<GraphicsDevice> devices = new ArrayList<GraphicsDevice> ();
    for ( GraphicsDevice gd : GraphicsEnvironment.getLocalGraphicsEnvironment ()
            .getScreenDevices () )
    {
        if ( gd.getType () == GraphicsDevice.TYPE_RASTER_SCREEN )
        {
            if ( gd == GraphicsEnvironment.getLocalGraphicsEnvironment ()
                    .getDefaultScreenDevice () )
            {
                devices.add ( 0, gd );
            }
            else
            {
                devices.add ( gd );
            }
        }
    }
    return devices;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-17T11:37:25.863

It's enough if you use

```
setLocationRelativeTo(null); 
```

According to [Javadoc for java.awt.Window.setLocationRelativeTo()](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29),

> If the component is null, ... the window is placed in the center of the screen.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T17:57:23.807

> 我已经尝试过了，它不起作用，netbeans有什么问题吗？

netbeans 也许没有错

> 我正在尝试将我的框架定位在屏幕的中心

你可以试试

```
JFrame frame = new JFrame ();
frame.pack(); // or frame.setSize(int, int);
frame.setLocationByPlatform(true);
frame.setVisible(true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-25T02:01:53.510

在设置 JFrame 的大小之前，我会向甜甜圈打赌，您设置相对于 null 的位置/通过 x 和 y 坐标设置位置。如果尚未设置大小，则将其视为 0x0，将其死点设置为屏幕中心。如果您随后更改大小，它会将左上角留在原来的位置（屏幕中心）并将其缩放到屏幕的右下角。

换句话说，让 setSize() 在屏幕居中之前出现。

你做的其他一切在我看来都很好。

# deployment - 从 Nexus 执行部分导出

> ID：11232144
> 
> 赞同：0
> 
> 时间：2012-06-27T17:49:57.993
> 
> 标签：deployment, installation, lifecycle, nexus

我之前没有与 Nexus 合作太多，所以我仍在努力制定适合我们的产品生命周期。

我希望能够将某些存储库工件集从 nexus 导出到另一个 nexus 容器中。到目前为止，执行此操作的唯一方法似乎是将工件作为一组依赖构建拉取，然后将它们部署到新存储库。这可能是我们必须接受的，我只是在寻找更好的方法。
看起来镜像或代理不会为我们提供所需的精细出口控制。
我看到我可以从 nexus 中复制工件，但我不确定如何告诉新的 nexus 容器它应该管理这些文件。

我想要做的是能够将一组工件放在 DVD 上，该 DVD 可以作为本地化的 nexus 实例运行，以便在客户站点安装软件。似乎对于任何允许连接回我们进行软件安装的客户，他们都可以使用我们用于 QA 的相同安装设置进行处理。使用 nexus 部署而不是安装程序的原因是因为我们需要能够回滚“补丁安装”，因为每个路径/安装集都将作为发布版本进行维护。现在这一切都是在自定义代码中完成的，因为似乎没有安装程序在安装完成后处理回滚（带备份）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:32:48.120

这将是 Nexus 的非标准用例，让我感到 Nexus 对您的要求来说太过分了。一旦文件以正确的格式提供，任何 Web 服务器都可以充当 Maven 存储库。

例如，为什么不将所需的存储库文件子集刻录到 DVD 上并包含[Jetty](http://www.eclipse.org/jetty/)的副本？Jetty 可以从 DVD 启动并通过 HTTP 提供本地内容。

# c - 在带引号的字符串中扩展宏变量

> ID：11232146
> 
> 赞同：14
> 
> 时间：2012-06-27T17:50:09.333
> 
> 标签：c, string, macros, c-preprocessor

我在两本著名的 c 书籍中发现了两件不同的事情，第一件是“形式参数不会在宏扩展中被引用的字符串替换” - 由 K&R c 语言第 76 页

第二个是代码，

```
#define PRINT(var,format) printf("variable is %format\n",var)
PRINT(x_var,f); 
```

稍后的宏调用将扩展为

```
printf("x_var is %f\n",x_var); 
```

*   这是通过第 448 页的 ansi c - E. balagurusamy 编程。

当然，两个引文相互矛盾。据我所知，第一个是真的，我的编译器给了我这样的结果。但第二本书也广为人知。我想知道以前版本的 c 中是否有这样的东西，或者第二次引用是错误的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T18:11:18.923

第二本书是错误的：[很容易检查](http://ideone.com/lZzBU)宏不会像那样扩展。但是，您可以通过使用预处理器运算符对标记进行*字符串化*`#`来获得它们所描述的效果：

```
#define PRINT(var,format) printf(#var" is %"#format"\n",var) 
```

现在您可以按如下方式打印变量：

```
int xyz = 123;
PRINT(xyz, d); 
```

这是[ideone 上工作示例的链接](http://ideone.com/G6to4)。

注意在“#format”之前和之后添加双引号，在“var”和“format”之前添加“#”。'#' 操作符使变量的值变成一个带引号的字符串——带有它自己的双引号。这使得替换的字符串成为连续四个带引号的字符串，C 编译器将其识别为连接成一个字符串的请求。因此字符串：“xyz”、“is %”、“d”和“\n”被连接成：“xyz is %d\n”

（请注意，此示例与原始问题中的示例不同，因为原始示例具有“变量是...”，其中答案将“变量”替换为“变量”宏参数的实例）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T11:58:35.543

书是对的。因为是时候了。我写了一个小测试程序来验证它（在你编程之前你不会喜欢文本编辑器`ed`）：

```
#define PRINT(fmt,val) printf("val = %fmt\n", (val))
main()
{
    int x;
    x = 5;
    PRINT(d, x);
} 
```

我在运行 Unix V6 的 PDP-11 上编译它。运行程序会产生以下输出：

```
x = 5 
```

这甚至是 K&R C 之前的版本。“功能”在后来的 C 迭代之一中被删除，并在 ISO C90 中正式发布。

# android - How to read data from a SQLite database table?

> ID：11232148
> 
> 赞同：0
> 
> 时间：2012-06-27T17:50:14.440
> 
> 标签：android, database, sqlite, file-io, filereader

I have a database table, my goal is to read in each of the values from the data table, then write them to a text file to be emailed. How should I go about accomplishing this?

```
public void FileWrite()
{
    Cursor remindersCursor = mDbHelper.fetchAllReminders();
    startManagingCursor(remindersCursor);

    try
    { // catches IOException below
        String[] from = new String[]{RemindersDbAdapter.KEY_TITLE};
        final String TESTSTRING = new String(RemindersDbAdapter.KEY_TITLE + "   ");
        File sdCard = Environment.getExternalStorageDirectory();
        File myFile = new File(sdCard, "test");
        FileWriter writer = new FileWriter(myFile);
        writer.append(TESTSTRING);
        writer.flush();
        writer.close();

        Toast.makeText(TaskReminderActivity.this, "Program Successfully went through  FileWrite!", Toast.LENGTH_LONG).show();
    } catch(Exception e)
    {
          Toast.makeText(TaskReminderActivity.this, "Had Problems with file!", Toast.LENGTH_LONG).show();
          Log.e("FileWrite", "Had Problems with file!", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:41:23.460

首先从你的 sqllite 数据库中读取：

```
Cursor  cursor = db.rawQuery("SELECT * FROM " +TBL_NAME+" " ,null);
startManagingCursor(cursor);
 while(cursor.moveToNext()){

                    stringBuffer.append(cursor.getString(1)).append(";");

          }
...... 
```

下一张写在卡片上：

```
 try {
        File myFile = new File("/sdcard/file.txt");
        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = 
        new OutputStreamWriter(fOut);
        myOutWriter.append(stringBuffer.toString());
        myOutWriter.close();
        fOut.close();
        Toast.makeText(getBaseContext(),
                "Done writing SD 'mysdfile.txt'",
                Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
    } 
```

……

确保您在清单文件中设置了权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:54:24.377

只是一个简单的例子。希望你能轻松上手

[http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html](http://android-er.blogspot.in/2011/06/simple-example-using-androids-sqlite_02.html)

# sql - SQL 查询到 Group By 和 Concat 行

> ID：11232153
> 
> 赞同：2
> 
> 时间：2012-06-27T17:50:32.693
> 
> 标签：sql, ms-access

嗨，我有下表：

```
Doc      |  code    | Qty | Next
5211386  |  91992   |  1  | 52183
5211386  |  91992   |  1  | 52182 
```

我试图找出一种方法来按前两列对记录进行分组，将第三列相加并连接最后一列以获得类似的东西：

```
Doc      |  code    | Qty | Next
5211386  |  91992   |  2  | 52183-52182 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:55:20.123

听起来您正在寻找在 MySQL 中找到的类似 group_concat 的函数。[查看 Allen Browne 的解决方案](http://allenbrowne.com/func-concat.html)

```
SELECT Doc, code, Sum(Qty), ConcatRelated("[Next]","TableName",,,"-") as [Next]
FROM TableName
GROUP BY Doc, code 
```

# web-services - 来自网络服务的实时体育比分？

> ID：11232162
> 
> 赞同：8
> 
> 时间：2012-06-27T17:50:51.373
> 
> 标签：web-services

由于[这篇文章](https://stackoverflow.com/questions/643753/does-anybody-know-of-a-real-time-sports-scores-stats-web-service)现在已经有 3 年多了，我想知道是否有人知道那里有任何开放的网络服务，可以从中下载现场体育比分。

任何演示或示例代码都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:19:35.477

[http://www.sportsdatallc.com/](http://www.sportsdatallc.com/)是我找到的最好的地方。如果您想要实时统计数据，它们会很昂贵，但它们应有尽有，而且似乎很可靠。

如果您想要免费的东西，请尝试 ESPN API，但它们还没有提供分数。然而，他们目前确实提供了球队和球员的统计数据。我想他们最终会向公众开放分数。

# c# - Parallel.ForEach 在列表中 Thread Safety As far as Thread Safety goes is this ok to do or do I need to be using a different collection ? List <filememberentity>fileInfo = getList(); Parallel.Fo 问问题 问问题 2012-06-27T17:50:58.893 45948 次 This question shows research effort; it is useful and clear 26 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. As far as Thread Safety goes is this ok to do or do I need to be using a different collection ? List <filememberentity>fileInfo = getList(); Parallel.ForEach(fileInfo, fileMember => { //Modify each fileMember } You're safe since you are just reading. Just don't modify the list while you are iterating over its items. c#.netmultithreading 4 4 回答 4 This answer is useful 34 As long as you are only modifying the contents of the item that is passed to the method, there is no locking needed. (Provided of course that there are no duplicate reference in the list, i.e. two references to the same FileMemberEntity instance.) If you need to modify the list itself, create a copy that you can iterate, and use a lock when you modify the list: List <filememberentity>fileInfo = getList(); List <filememberentity>copy = new List<filememberentity>(fileInfo); object sync = new Object(); Parallel.ForEach(copy, fileMember => { // do something lock (sync) { // here you can add or remove items from the fileInfo list } // do something }); 于 2012-06-27T18:10:13.507 回答 This answer is useful 9 你是安全的，因为你只是在阅读。只是在迭代其项目时 不要修改列表。 于 2012-06-27T17:52:17.077 回答 This answer is useful 3 We should use less lock object to make it faster. Only lock object in different local threads of Parrallel.ForEach: List <filememberentity>copy = new List<filememberentity>(fileInfo); object sync = new Object(); Parallel.ForEach<filememberentity, list<filememberentity="">>( copy, () => { return new List<filememberentity>(); }, (itemInCopy, state, localList) => { // here you can add or remove items from the fileInfo list localList.Add(itemInCopy); return localList; }, (finalResult) => { lock (sync) copy.AddRange(finalResult); } ); // do something Reference: http://msdn.microsoft.com/en-gb/library/ff963547.aspx 于 2014-11-26T10:59:14.090 回答 This answer is useful 1 If it does not matter what order the FileMemberEntity objects are acted on, you can use List <t>because you are not modifying the list. If you must ensure some sort of ordering, you can use OrderablePartitioner <t>as a base class and implement an appropriate partitioning scheme. For example, if the FileMemberEntity has some sort of categorization and you must process each of the categories in some specific order, you would want to go this route. Hypothetically if you have Object 1 Category A Object 2 Category A Object 3 Category B there is no guarantee that Object 2 Category A will be processed before Object 3 Category B is processed when iterating a List <t>using Parallel.ForEach. The MSDN documentation you link to provides an example of how to do that. 于 2012-06-27T17:54:13.947 回答 Related 2 android - 如何下载和使用 ShareCompat 库 5 c++ - 堆上的内存地址会被重用吗？ 1 mongodb - 我如何才能在 MongoDB 中与集合中的记录子集不同？ 2 ruby-on-rails - 为什么我的 Ember-Rails“Hello World”应用程序无法运行？ 2 php - 为什么 array_unique 不返回唯一项目列表？ 2 c++ - OpenGL 上的多个视口 3 php - PHP While 循环和 DIV 的 1 java - android在相同布局上设置的webviews之间切换 3 c# - 实例化一个知道通用基类的泛型类型 1 apache - 如何在 Apache 上配置子域以指向另一个 Web 应用程序或目录；后端有tomcat Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</t></t></t></filememberentity></filememberentity,></filememberentity></filememberentity></filememberentity></filememberentity></filememberentity></filememberentity></filememberentity>

> ID：11232167
> 
> 赞同：26
> 
> 时间：
> 
> 标签：c#, .net, multithreading

As far as Thread Safety goes is this ok to do or do I need to be using a different collection ?

```
 List<FileMemberEntity> fileInfo = getList(); 

        Parallel.ForEach(fileInfo, fileMember =>
        {
              //Modify each fileMember 
        } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-27T18:10:13.507

As long as you are only modifying the contents of the item that is passed to the method, there is no locking needed.

(Provided of course that there are no duplicate reference in the list, i.e. two references to the same `FileMemberEntity` instance.)

If you need to modify the list itself, create a copy that you can iterate, and use a lock when you modify the list:

```
List<FileMemberEntity> fileInfo = getList();

List<FileMemberEntity> copy = new List<FileMemberEntity>(fileInfo);
object sync = new Object();

Parallel.ForEach(copy, fileMember => {
  // do something
  lock (sync) {
    // here you can add or remove items from the fileInfo list
  }
  // do something
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T17:52:17.077

你是安全的，因为你只是在阅读。只是在迭代其项目时​​不要修改列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-26T10:59:14.090

We should use less lock object to make it faster. Only lock object in different local threads of Parrallel.ForEach:

```
List<FileMemberEntity> copy = new List<FileMemberEntity>(fileInfo);
object sync = new Object();

Parallel.ForEach<FileMemberEntity, List<FileMemberEntity>>(
      copy,
      () => { return new List<FileMemberEntity>(); },
      (itemInCopy, state, localList) =>
      {
         // here you can add or remove items from the fileInfo list
         localList.Add(itemInCopy);
         return localList;
      },
      (finalResult) => { lock (sync) copy.AddRange(finalResult); }
); 

 // do something 
```

Reference: [http://msdn.microsoft.com/en-gb/library/ff963547.aspx](http://msdn.microsoft.com/en-gb/library/ff963547.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T17:54:13.947

If it does not matter what order the `FileMemberEntity` objects are acted on, you can use `List<T>` because you are not modifying the list.

If you must ensure some sort of ordering, you can use `OrderablePartitioner<T>` as a base class and implement an appropriate partitioning scheme. For example, if the `FileMemberEntity` has some sort of categorization and you must process each of the categories in some specific order, you would want to go this route.

Hypothetically if you have

> Object 1 Category A
> 
> Object 2 Category A
> 
> Object 3 Category B

there is no guarantee that `Object 2 Category A` will be processed before `Object 3 Category B` is processed when iterating a `List<T>` using `Parallel.ForEach`.

The MSDN documentation you link to provides an example of how to do that.

# ruby-on-rails - 使用 Rspec 匹配复杂的数据结构（结构数组）

> ID：11232174
> 
> 赞同：0
> 
> 时间：2012-06-27T17:51:45.887
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, bdd

如何将以下数组与 Rspec 匹配？

```
[#<struct Competitor html_url="https://github.com/assaf/vanity", description="Experiment Driven Development for Ruby", watchers=845, forks=146>, 
 #<struct Competitor html_url="https://github.com/andrew/split", description="Rack Based AB testing framework", watchers=359, forks=43>] 
```

我需要检查一个类方法是否返回一个结构数组，如前一个或更广泛的一个，其中包括前一个。

**更新：**

我目前有这个绿色的测试，

```
require 'spec_helper'
  describe "Category" do
    before :each do
      @category = Category.find_by(name: "A/B Testing")
    end

    describe ".find_competitors_by_tags" do
      it "returns a list of competitors for category" do
        competitors = Category.find_competitors_by_tags(@category.tags_array).to_s
        competitors.should match /"Experiment Driven Development for Ruby"/
      end
    end
  end
end 
```

但我想知道这是否是测试以下方法的正确方法，或者您认为它可能会更好：

```
class Category
  ...

  Object.const_set :Competitor, Struct.new(:html_url, :description, :watchers, :forks)
  def self.find_competitors_by_tags(tags_array)
    competitors = []

    User.all_in('watchlists.tags_array' => tags_array.map{|tag|/^#{tag}/i}).only(:watchlists).each do |u|
      u.watchlists.all_in(:tags_array => tags_array.map{|tag|/^#{tag}/i}).desc(:watchers).each do |wl|
        competitors << Competitor.new(wl.html_url, wl.description, wl.watchers, wl.forks)
      end
    end
    return competitors
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:35:41.610

我将测试确保您的查找功能正常工作所需的最低要求。您可能不需要为此检查返回记录的每个字段。你所拥有的就是这样做的。我会稍微修改一下，只看描述（或任何其他合适的字段）：

```
 it "returns a list of competitors for category" do
    competitors = Category.find_competitors_by_tags(@category.tags_array)
    descriptions = competitors.map(&:description).sort
    descriptions.should == [
      "Experiment Driven Development for Ruby",
      "Rack Based AB testing framework",
    ]
  end 
```

# python - 执行 scikit-learn K-means 示例时出错

> ID：11232176
> 
> 赞同：2
> 
> 时间：2012-06-27T17:51:53.540
> 
> 标签：python, scikit-learn

我正在尝试从 scikit-learn 官方网站运行一个 scikit-learn K-means 示例：http: [//scikit-learn.org/dev/auto_examples/cluster/plot_cluster_iris.html#example-cluster-plot-cluster-iris -py](http://scikit-learn.org/dev/auto_examples/cluster/plot_cluster_iris.html#example-cluster-plot-cluster-iris-py)

我安装了所有库（例如，scipy、numpy、pylab）。但是，在执行代码时，我收到如下错误消息：

```
Traceback (most recent call last):
  File "plot_cluster_iris.py", line 41, in <module>
    estimators = {'k_means_iris_3': KMeans(n_clusters=3),
TypeError: __init__() got an unexpected keyword argument 'n_clusters' 
```

它与 scikit-learn 版本有关吗？我正在使用版本。MAC OS X Lion 上的 0.11。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T17:59:20.313

您正在查看 scikit-learn 前沿开发版本的文档。该示例的稳定（0.11）版本在[这里](http://scikit-learn.org/stable/auto_examples/cluster/plot_cluster_iris.html#example-cluster-plot-cluster-iris-py)。`n_clusters`将在 0.12 中引入，在旧版本中使用`k`（尽管`k`为了向后兼容会存在一段时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T16:02:21.500

你需要升级 sklern

要更新 sklearn，您需要 Scikit-learn 要求：Python (>= 2.6 或 >= 3.3)、NumPy (>= 1.6.1)、SciPy (>= 0.9)。

只需输入终端（假设您已经安装了 pip）

pip install -U numpy scipy scikit-learn

# objective-c - UIViewController 之间的通信

> ID：11232185
> 
> 赞同：4
> 
> 时间：2012-06-27T17:52:21.340
> 
> 标签：objective-c, ios

我是 Objective-C 的新手，所以为一个愚蠢的问题道歉。

我正在从我的主视图控制器打开一个“选项”视图控制器。两者都内置在情节提要中。在展示选项控制器之前和之后，我需要在我的主视图控制器上停止并启动一个计时器。选项控制器关闭后（按钮调用关闭），我需要将一些信息发送回我的主控制器，或者至少让我的主控制器知道它需要刷新一些值。

> > > 主要问题 在打开之前和之后呈现视图控制器并执行一些演示者方法的最佳方式是什么？
> > > 
> > > 我尝试了什么我找到了一些方法来做到这一点，但它们都很麻烦，我认为必须有一些合理的方法来做到这一点。

1.  理想情况下，我想使用我在两个控制器之间的故事板中设置的 segue。
2.  我设法通过访问情节提要并调用 instantiateViewControllerWithIdentifier 以编程方式调用选项控制器。它有效，但看起来有点复杂。
3.  我无法在 UIViewController 上找到一个委托方法来处理解除事件
4.  当我试图通过 presentingViewController 访问选项控制器中的主控制器并将其向下转换时，通过包含我的 .h 文件两次（不确定使用 #define 的 Obj-C 标准是什么），我得到了一个链接错误。

感谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:02:35.820

对于弱链接的 ViewController 之间的通信，您可以使用 NSNotificationCenter：

[https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

在这里，您可以向所有需要处理一些更改的 ViewControllers 发送消息（例如更改字体大小的选项）。

它真的很容易实现，它使某些 ViewController 之间的依赖性降低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:04:20.750

所有这些都可以通过 storyboard`NSNotificationCenter`和 NSCoding 轻松完成。在`viewDidLoad`主控制器的方法中，输入以下代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(receiveNotification:) 
                                             name:@"Update"
                                           object:nil]; 
```

然后在同一个控制器中创建这个方法：

```
(void)receiveNotification:(NSNotification*)notification
{
   //...
} 
```

当您想从选项控制器更新主控制器时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"Update" object:self]; 
```

另外，我建议使用`NSArchiving`基本数据持久性。刚找到这个教程，看起来不错。 [http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding](http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding)

基本上，创建一个可以存储信息的对象，使用 nscoding 对其进行编码，然后在需要时对其进行解码。它对我很有用。

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:32:02.333

> 主要问题 在打开之前和之后呈现视图控制器并执行一些演示者方法的最佳方式是什么？

以防上面的答案比您想要的要复杂一些，我建议在打开之前执行演示者方法的最简单方法是在演示者的 prepareForSegue 方法中执行此操作。如果需要向目标视图控制器发送数据，可以通过以下方式访问其属性：

```
ViewController *destinationVC = [segue destinationViewController]; 
```

打开后执行演示者方法的一种简单方法是：

```
ViewControllerSubclass *previousVC = [self presentingViewController]; 
```

然后使用类或实例来执行你的类或实例方法。您可以在目的地的 viewWillAppear 中执行此操作。

抱歉，如果您已经知道这一切；通常很难推测需要什么级别的复杂性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T18:04:55.070

我在市场上几乎所有的应用程序中都遇到了这个问题。不同之处在于我从未决定走故事板的道路。

我一直能够做到这一点的方法是在控制器之间提供访问器功能。通过将交叉定义的控制器简单地定义为选项视图标头中的 UIViewController 类型，然后仅在 .m 文件中包含主视图控制器的标头，您可以解决链接器问题。现在，当您从选项视图调用主视图控制器例程时，您必须将其转换为主视图控制器的类型！

您还必须在选项视图中提供一个例程，该例程将允许您将保存指向主视图控制器的指针的变量设置为 self。

您的 optionsView 示例

```
@interface optionsViewController : UIViewController{
    UIViewController * myReactiveMainViewController;
}

-(void)setMyReactiveMainViewController:(UIViewController *)controller; 
```

在 optionsView 的 .m 文件中没有

```
#import "myMainViewController.h"

-(void)setMyReactiveMainViewController:(UIViewController *)controller{
    myReactiveMainViewController = controller;
} 
```

在对主视图控制器的任何其他回调中，您必须这样做：

```
-(void)returnToMain{
    [(myMainViewController *)myReactiveMainViewController someCall:variable];
} 
```

这个例子当然会假设您的 myMainViewController 实现了一个名为“someCall”的方法，该方法采用输入参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T19:16:58.213

感谢您的回复。

我结束了

1.  调用 prepareForSegue 执行预转换代码

2.  释放呈现的视图控制器时在presentingViewController上调用performSelector。

我相信其他建议也会起作用。

# hibernate - SchemaExport 使用自定义类型

> ID：11232198
> 
> 赞同：0
> 
> 时间：2012-06-27T17:52:49.583
> 
> 标签：hibernate, sap-ase, schemaexport, custom-type

我想使用 hibernate-core 4.1.4 中的 org.hibernate.tool.hbm2ddl.SchemaExport 生成/导出 Sybase ASE 15.5 模式，其中特定列应创建为 UNIVARCHAR 而不是常规的 VARCHAR 数据类型。我怎么做？我首选的方法是使用注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:15:08.327

通过在 Column 注释中将SQL 片段作为 [columnDefinition属性的值。](http://docs.oracle.com/javaee/6/api/javax/persistence/Column.html#columnDefinition%28%29)

例如：

```
@Column(name="columnName", columnDefinition="univarchar(50)") 
```

# javascript - 如果屏幕宽度 <= 699，则交换图像 src

> ID：11232200
> 
> 赞同：1
> 
> 时间：2012-06-27T17:53:04.513
> 
> 标签：javascript

我有两个图像“image-big.jpg”和“image-small.jpg”我想通过 javascript 检测屏幕宽度是否 <= 699 并使用 image-big.jpg 中的 class="imageswap" 更改我的图像的 SRC到 image-small.jpg。

因此，基本上，如果它们在便携式设备上，它将显示较小的图像。

我充其量是 javascsript 的新手，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:57:17.620

绑定到窗口 onresize 事件：

```
window.onresize = function(event) {
    if(window.innerWidth && window.innerWidth===699)
       document.getElementById('myImg').src = 'newSource';
    else if(document.body.offsetWidth && document.body.offsetWidth===669)
       document.getElementById('myImg').src = 'newSource';
}; 
```

适用于`else if`IE < v.9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:58:50.753

它没有规格，但`screen`在所有浏览器中都可以正常工作。

```
if(screen.width <= 699){
   // do you logic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:59:19.047

第一种方法：客户端。检测设备类型后，将类名设置为 dom 上的 html 标记。使用 css：

```
html.big .image-div {background-image:url('big.jpg')}
html.small .image-div {background-image:url('small.jpg')} 
```

第二种方法：重定向。使用 2 个不同的 URL 并通过检测 User-Agent 重定向小尺寸。最好使用 User-Agent（导航器对象）而不是窗口/屏幕宽度

通常我更喜欢重定向，因为当您可以针对特定设备进行自定义时，您可以获得更好的代码和页面外观。这就是领导者的行为方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T13:10:37.420

尝试媒体查询。

```
.imageswap{
 background-image:url('small.jpg');
}
    @media screen and (max-width: 699px) {
      background-image:url('small.jpg');
    } 
```

# java - 替换所有非 latin-1 字符的 API 或方法

> ID：11232201
> 
> 赞同：1
> 
> 时间：2012-06-27T17:53:06.257
> 
> 标签：java, utf-8, replace, latin1

我正在处理第 3 方 API / Web 服务，它们只允许在其 XML 中设置 latin-1 字符集。是否有现有的 API / 方法可以查找和替换字符串中的所有非 latin-1 字符？

例如：凯文

有没有办法让那个凯文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:04:26.930

使用 ICU4J，

```
public String removeAccents(String text) {
    return Normalizer.decompose(text, false, 0)
                 .replaceAll("\\p{InCombiningDiacriticalMarks}+", "");
} 
```

[我在http://glaforge.appspot.com/article/how-to-remove-accents-from-a-string](http://glaforge.appspot.com/article/how-to-remove-accents-from-a-string)找到了这个例子

在 java 1.6 中，必要的规范器可能是内置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-11T09:50:58.647

我遇到了很多关于如何删除**所有**口音的帖子。这篇（旧的！）帖子涵盖了我的用例，所以我将在这里分享我的解决方案。就我而言，我只想替换 ISO-8859-1 字符集中不存在的字符。用例是：读取 UTF-8 文件，并将其写入 ISO-8859-1 文件，同时保留尽可能多的特殊字符（但要防止 UnmappableCharacterException）。

```
@Test
void proofOfConcept() {
    final String input = "Bełchatöw";
    final String expected = "Belchatöw";
    final String actual = MyMapper.utf8ToLatin1(input);
    Assertions.assertEquals(expected, actual);
} 
```

**Normalizer**似乎很有趣，但我只找到了删除所有重音的方法。

```
public static String utf8ToLatin1(final String input) {
    return Normalizer.normalize(input, Normalizer.Form.NFD)
        .replaceAll("\\p{InCombiningDiacriticalMarks}+", "");
} 
```

奇怪的是，上面的代码不仅失败了，而且

```
expected: <Belchatöw> but was: <Bełchatow> 
```

**CharsetEncoder**看起来很有趣，但似乎我只能设置一个静态的“替换”字符（实际上是：字节数组），所以所有不可映射的字符都变成了 '?' 或类似的

```
public static String utf8ToLatin1(final String input) throws CharacterCodingException {
    final ByteBuffer byteBuffer = StandardCharsets.ISO_8859_1.newEncoder()
        .onMalformedInput(CodingErrorAction.REPLACE)
        .onUnmappableCharacter(CodingErrorAction.REPLACE)
        .replaceWith(new byte[] { (byte) '?' })
        .encode(CharBuffer.wrap(input));
    return new String(byteBuffer.array(), StandardCharsets.ISO_8859_1);
} 
```

失败

```
expected: <Belchatöw> but was: <Be?chatöw> 
```

因此，我的最终解决方案是：

```
public static String utf8ToLatin1(final String input) {
    final Map<String, String> characterMap = new HashMap<>();
    characterMap.put("ł", "l");
    characterMap.put("Ł", "L");
    characterMap.put("œ", "ö");
    final StringBuffer resultBuffer = new StringBuffer();
    final Matcher matcher = Pattern.compile("[^\\p{InBasic_Latin}\\p{InLatin-1Supplement}]").matcher(input);
    while (matcher.find()) {
        matcher.appendReplacement(resultBuffer,
            characterMap.computeIfAbsent(matcher.group(),
                s -> Normalizer.normalize(s, Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", "")));
    }
    matcher.appendTail(resultBuffer);
    return resultBuffer.toString();
} 
```

几点：

1.  `characterMap`需要扩展到您的需要。对`Normalizer`重音字符很有用，但您可能还有其他字符。另外，提取`characterMap`（注意 computeIfAbsent 更新地图，注意并发！）
2.  Pattern.compile() 不应重复调用，将其提取到静态

# php - JQGrid：执行新搜索时结果为空白

> ID：11232202
> 
> 赞同：0
> 
> 时间：2012-06-27T17:53:07.867
> 
> 标签：php, jquery, jqgrid

我目前有一个 JQGrid 实现。我第一次运行搜索时，它会很好地填充网格。当我再次单击搜索时，即使我使用相同的条件，网格也会刷新空白，而不是使用返回的数据。有人对为什么会这样有任何想法吗？

这是我的搜索功能：

```
function searchlibrary(searchInfo){
            if(searchInfo == undefined){
                searchInfo = null;
            }
            $("#searchlist").jqGrid({
            url:'./searchlibrary',
            datatype: 'json',
            mtype: 'POST',
            postData: searchInfo,
            colNames:['Resource Name','Unit', 'Topic','Document Type','Content Type','Select'],
            colModel :[ 
              {name:'resourceName', index:'resourceName', width:374, align:'left'}, 
              {name:'unit', index:'unitID', width:40, align:'center',sortable:true,sorttype:'text'}, 
              {name:'topic', index:'topicID', width:220, align:'center',sortable:true}, 
              {name:'docType', index:'docTypeID', width:97, align:'center',sortable:true}, 
              {name:'contentType', index:'contentTypeID', width:97, align:'center',sortable:true},
              {name: 'resourceID', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", editoptions: {value: "Yes:No"}}
            ],
            rowNum:20,
            sortname: 'resourceName',
            sortorder: 'asc',
            viewrecords: true,
            gridview: true,
            width:878,
            height:251
          });
          $("#searchlist").jqGrid('setLabel','resourceName','',{'text-align':'left','padding-left':'5px'});
        } 
```

网格上方有一个项目的下拉列表。当一个项目被选中时，另一个下拉菜单会显示更多内容，或者显示一个文本框。然后，当用户单击提交按钮时，jquery 会获取下拉列表/文本字段的内容并构建一个对象。调用 searchlibrary 函数时，该对象作为 searchInfo 参数传递。然后将其用作 jqgrid 调用中的 postData。我已登录以确保传递的对象始终正确。由于某种原因，第一次调用此函数后的任何内容都会返回一个空白 jqgrid。另外，为了进一步理解为检索信息而调用的 url 是一个生成 json 数据的 php 文件。

# 更新

这是我对奥列格建议的尝试。我肯定错过了什么。我又开始空白了。这是我现在使用的代码。

```
$(document).ready(function(){
            $("#searchlist").jqGrid({
                url:'./searchlibrary',
                datatype: 'json',
                mtype: 'POST',
                postData: {data: function(){var myvar = new Object(); myvar = getSearchData(); console.log(myvar); return myvar;}},
                colNames:['Resource Name','Unit', 'Topic','Document Type','Content Type','Select'],
                colModel :[ 
                  {name:'resourceName', index:'resourceName', width:380, align:'left'}, 
                  {name:'unit', index:'unitID', width:40, align:'center',sortable:true,sorttype:'text'}, 
                  {name:'topic', index:'topicID', width:220, align:'center',sortable:true}, 
                  {name:'docType', index:'docTypeID', width:97, align:'center',sortable:true}, 
                  {name:'contentType', index:'contentTypeID', width:97, align:'center',sortable:true},
                  {name: 'select', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", formatter:"checkbox", editoptions: {value: "Yes:No"},formatoptions: {disabled : false}}
                ],
                rowNum:20,
                sortname: 'resourceName',
                sortorder: 'asc',
                viewrecords: true,
                gridview: true,
                width:878,
                height:251
             });
          $("#searchlist").jqGrid('setLabel','resourceName','',{'text-align':'left'});

          function getSearchData(){
                var searchType = $('select[name="searchtype"]').val();
                var searchCriteria = "";
                var searchInfo = new Object();
                if(searchType=="Unit" || searchType=="Topic" || searchType=="Document Type"){
                    searchCriteria = $('select[name="searchcontent_select"]').val();
                } else if(searchType=="Resource Name" || searchType=="Keyword"){
                    searchCriteria = $('input[name="searchcontent_text"]').val();
                }
                searchInfo = {type:searchType, criteria:searchCriteria}
                return searchInfo;
          }

          $('#searchbutton').click(function(ev){
                $("#searchlist").trigger('reloadGrid');
          });
 }); 
```

# 工作解决方案

```
$(document).ready(function(){
            $("#searchlist").jqGrid({
                url:'./searchlibrary',
                datatype: 'json',
                mtype: 'POST',
                postData: {type: function(){return $('select[name="searchtype"]').val();},
                    criteria: function(){return getSearchData();}
                },
                colNames:['Resource Name','Unit', 'Topic','Document Type','Content Type','Select'],
                colModel :[ 
                  {name:'resourceName', index:'resourceName', width:380, align:'left'}, 
                  {name:'unit', index:'unitID', width:40, align:'center',sortable:true,sorttype:'text'}, 
                  {name:'topic', index:'topicID', width:220, align:'center',sortable:true}, 
                  {name:'docType', index:'docTypeID', width:97, align:'center',sortable:true}, 
                  {name:'contentType', index:'contentTypeID', width:97, align:'center',sortable:true},
                  {name: 'select', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", formatter:"checkbox", editoptions: {value: "Yes:No"},formatoptions: {disabled : false}}
                ],
                rowNum:20,
                sortname: 'resourceName',
                sortorder: 'asc',
                viewrecords: true,
                gridview: true,
                width:878,
                height:251
             });
          $("#searchlist").jqGrid('setLabel','resourceName','',{'text-align':'left'});

          function getSearchData(){
                var searchType = $('select[name="searchtype"]').val();
                var searchCriteria = "";
                var searchInfo;
                if(searchType=="Unit" || searchType=="Topic" || searchType=="Document Type"){
                    searchCriteria = $('select[name="searchcontent_select"]').val();
                } else if(searchType=="Resource Name" || searchType=="Keyword"){
                    searchCriteria = $('input[name="searchcontent_text"]').val();
                }
                searchInfo = {type:searchType, criteria:searchCriteria}
                return searchCriteria;
          }

          $('#searchbutton').click(function(ev){
                $("#searchlist").trigger('reloadGrid');
          });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:09:01.183

事实证明，解决方案是先卸载网格。所以我添加了这一行：

```
$("#searchlist").jqGrid('GridUnload'); 
```

我把搜索库功能放在正上方

```
$("#searchlist").jqGrid({ 
```

这会导致网格完全卸载重新加载正确内容的获取。

作为说明，我在[这里](https://stackoverflow.com/questions/4232430/jqgrid-reload-grid)找到了解决方案的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:21:04.440

的用法比 的用法`$("#searchlist").trigger("reloadGrid")`更有效`$("#searchlist").jqGrid('GridUnload')`。据了解，这`$("#searchlist").jqGrid({...]);`会创建列标题和许多其他网格元素。因此，您应该只创建一次网格`$("#searchlist").jqGrid({...]);`，以后再使用`$("#searchlist").trigger("reloadGrid")`。

我建议您将`postData`函数用作属性（请参阅[此处](https://stackoverflow.com/a/2928819/315935)）。例如

```
postData: {
    type: function () {
        return $('select[name="searchtype"]').val(); // get some data
    },
    criteria: function () {
        return getSearchData();}
    }
} 
```

每次如果用户单击`'#searchbutton'`按钮或对数据进行排序或分页，就会调用`type`and方法。`criteria`因此，您可以返回属性的*当前*值并将数据发送到用户在页面上填写一些控件的服务器。

# unit-testing - 无法解析符号：抛出？

> ID：11232203
> 
> 赞同：17
> 
> 时间：2012-06-27T17:53:12.683
> 
> 标签：unit-testing, clojure

在clojure中执行以下操作的正确方法是什么？

```
(ns todo.test.models.task
  (:use [clojure.test]))

(deftest main-test
  (is (thrown? Exception (throw Exception "stuff")))
  (is (not (thrown? Exception (+ 2 3))))
) 
```

第一个测试用例运行良好，但整个片段返回“无法解析符号：抛出？”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-27T18:12:59.590

`is`是一个在其主体中查找符号`thrown?`并构建测试的宏。 **`thrown?`实际上不是您可以调用的函数。**`is`如果抛出未在寻找的异常，则默认行为测试失败，因此您可以`(not (thrown?`从上面的示例中删除 并获得您正在寻找的结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-27T18:20:25.330

`thrown?`是一个特殊的断言，必须出现在 之后`is`，所以不能嵌套在其他表达式中，所以在`is`宏的上下文中，第二个断言不会理解抛出的符号？。

你可以说：

```
(deftest main-test
  (is (thrown? Exception (throw (Exception. "stuff"))))
  (is (= 5 (+ 2 3)))) 
```

如果在 (+ 2 3) 中抛出异常，clojure.test 将报告 1 :error 和 0 :fail 并转储堆栈跟踪。

另请注意，您`(throw Exception "stuff")`的错误 - 您需要在 throw 内正确构造异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-02T18:34:28.023

`doseq`如果您想对许多语句执行此操作，请使用：

```
(testing "bla"
    (doseq [x [1 2 3 4]]
      (my-dangerous-func! x))) 
```

# java - 关于在控制台添加语句

> ID：11232205
> 
> 赞同：1
> 
> 时间：2012-06-27T17:53:31.043
> 
> 标签：java

我开发了一个 Java 程序来计算文件夹中的文件数。可能有 Java 文件或文本文件，它会计算其中的代码行数。这个想法是将文件名打印到控制台，然后是行数。这部分就完成了，如下图：

```
public class FileCountLine {    
    public static void main(String[] args) throws FileNotFoundException {
    Map<String, Integer> result = new HashMap<String, Integer>();
        File directory = new File("C:/Test/");
        File[] files = directory.listFiles();
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                try {
                    for (lineCount = 0; scanner.nextLine() != null; lineCount++);
                } catch (NoSuchElementException e) {
                    result.put(file.getName(), lineCount);
                }
            }}
        for( Map.Entry<String, Integer> entry:result.entrySet()){
              System.out.println(entry.getKey()+" ==> "+entry.getValue());
            }       
    }} 
```

现在我已经硬编码了目录的位置，如下所示：

```
File directory = new File("C:/Test/"); 
```

我希望这更具交互性，并提示用户在控制台中输入位置。用户按下 Enter 后，它将按原样执行其余功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:58:41.697

为什么要让它互动？为什么不直接使用`args[]`main 给出的参数呢？

检查 args[0] 以确保它是一个有效的目录，然后继续生活。

```
File directory = new File(args[0]); 
```

或者更好的是，您可以遍历 args 的所有元素并对命令行上指定的每个目录执行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:58:48.893

您可以使用 System.out.println() 将提示输出到控制台屏幕。然后，要获取它们的路径，请使用 java.util 中的 Scanner 类，例如，

```
Scanner lineIn = new Scanner(System.in);
String input = lineIn.next(); 
```

那个字符串，输入，可以是你的文件夹路径，但你可能想对输入做一些错误检查，以确保正确的格式、好的字符等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:59:23.800

您可以向用户询问驱动器和主文件夹..

```
Scanner in=new Scanner(System.in);
System.out.println("Enter the Drive name like C,D,E etc");
String drive=in.next();
System.out.println("Enter the main folder name");
String main_folder=in.next();
File directory=new File(drive+":"+"//"+main_folder+"//"); 
```

# java - 如何在非 servlet 3.0/非 Java EE 6 中激活 jax-rs ContextResolver 和 Application

> ID：11232209
> 
> 赞同：0
> 
> 时间：2012-06-27T17:53:36.443
> 
> 标签：java, tomcat, jaxb, jetty, jax-rs

Java EE 6 提供了一种在启动时激活 JAX-RS 应用程序的方法。

问题是我（当然我们中的许多人仍在）使用不符合 Java EE/Servlet 3.0 的 Web 服务器，因此如果我们尝试在 JAX-RS 应用程序上使用启动时加载 servlet 映射，Web 服务器 (至少码头的情况是这样）会发牢骚

```
"class is not a servlet" 
```

并因此拒绝加载应用程序。

问题的要点是-加载上下文解析器，唯一可以完成的方法是通过 jax-rs Application 子类。

激活 Application 子类的方法应该在 Jetty 和 Tomcat/JBoss 上类似地工作，因为我使用 jetty 进行开发（由于 GWT - 还有什么？）和 Tomcat/JBoss 进行生产。我希望避免为 jetty 和 tomcat 编写不同的加载器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:52:35.107

在 cxf 或 resteasy 等 jax-rs 提供程序中已经实现了启动 servlet 和上下文侦听器，请仔细阅读文档

# excel - 在与另一列和日期匹配的列中搜索值？

> ID：11232210
> 
> 赞同：1
> 
> 时间：2012-06-27T17:53:39.767
> 
> 标签：excel, vba

我将数据存储在 Excel 的三列中

A 栏：序列号 B 栏：日期 C 栏：价值（例如成本）

我需要查找与特定序列号（A 列）和日期（B 列）关联的值（C 列）。

例如，在下面的屏幕截图中，如果我想查找与序列号 (T455) 和日期（2010 年 12 月 13 日）关联的值，则该值应为 8。

![在此处输入图像描述](../Images/c2b4cf58d958c3171469addccd2bc9fe.png)

我能想出的唯一方法是计算效率低下，因为每次查找值时我都会遍历所有单元格。

例如，是否有一种方法可以限制给定序列号的搜索区域？

例如，如果我正在查找序列号 T455 的值，我如何限制代码在行 (6-13) 中搜索日期并在 C 列中找到相应的值，而不是搜索整个表？

```
Sub FindValue()

Dim S as String
Dim D as Date
Dim V as Integer

S = T455
D = Dec 13, 2010

for i = 1 to Range("A1").End(xldown).Row 

If Range("A" & i) = S And Range("B" & i) < Date - 7 And Range("B" & i) < Date + 7   Then
' This way i search a date range rather than a specific date

V = Range("C" & i).Value

End If

End Sub 
```

我想到了 While 循环或 Lookup 函数，但走到了死胡同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:15:46.360

非 VBA 解决方案可能更容易且不那么令人头疼。

A 列包含公式，A1 = "=B1&C1"

单元格 G1 公式可以在公式栏中看到。

![在此处输入图像描述](../Images/4c42718077065fab50f66f29291e8227.png)

**更新** 这是一个工作速度更快的 VBA 解决方案，但是根据您所写的内容，有一些我不确定的注释。此外，请查看一些注释以帮助您的代码更符合您的要求。

```
Sub FindValue()

Dim S As String, D As Date, V As Integer, rngFound As Range, cel As Range

S = "T455" 'needs quotes around the string
D = "Dec 13, 2010" 'needs quotes around the date

Dim wks As Worksheet
Set wks = ActiveSheet

With wks

     'always better to AutoFilter than Loop when you can!
    .UsedRange.AutoFilter 1, S
    .UsedRange.AutoFilter 2, ">" & D - 7, xlAnd, "<" & D + 7

    Set rngFound = Intersect(.UsedRange, .Columns(3)).SpecialCells(xlCellTypeVisible)

    'the only thing here is if you have a date range _
        'you may return more than one result _
        'in that case, I don't know what you want to do with all the V's

    If Not rngFound Is Nothing Then
        For Each cel In rngFound
            V = cel.Value
        Next
    End If

    .AutoFilterMode = False

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:17:48.237

如果您愿意接受非 VBA 解决方案，那么您可以使用[这个实现](http://www.get-digital-help.com/2009/06/27/how-to-create-a-unique-distinct-list-where-other-columns-meet-two-criteria/)，它基本上使用这个公式：

```
=IFERROR(INDEX(List, MATCH(0, COUNTIF(H1:$H$1, List)+
  IF(Category2<>Criteria2, 1, 0)+IF(Category1<>Criteria1, 1, 0), 0)), "") 
```

有几种 VBA 方法，这实际上取决于您对语言的熟悉程度以及您希望解决方案的效率。在我的头顶上：

1）使用两个条件过滤列表，然后在可见的任何行中返回相关值（如果有）

2）按这两列（首先按序列，然后按日期）对数据进行排序，然后执行搜索（您可能想要调用内置函数，如`MATCH`）

# android - 媒体记录器哔声

> ID：11232211
> 
> 赞同：2
> 
> 时间：2012-06-27T17:53:40.957
> 
> 标签：android, mediarecorder

当我跑步时

```
MediaRecorder.start() 
```

我的手机发出哔哔声。

有什么办法可以让哔哔声消失吗？

在 Nexus One 2.3.3 上运行

# gedit - 带有模糊字符的 Gedit

> ID：11232212
> 
> 赞同：1
> 
> 时间：2012-06-27T17:53:45.117
> 
> 标签：gedit, blurry

我正在使用 gedit 进行 PHP 开发，但几个月后我注意到，有时当我输入某些内容时，文本的某些部分会变得模糊，只有在单击其他地方或输入另一个字母后才会恢复正常。我已经习惯了这个问题，但我很好奇是什么导致了这类问题。我试图在屏幕截图上重现此错误，但 Ubuntu 的屏幕截图功能移除了当前窗口的焦点，因此它“修复”了 gedit 上的错误

你知道我能做些什么吗？

编辑：这个问题只发生在 gedit 中，其他地方都没有。

这是错误的图片：

[http://i.imm.io/udEc.jpeg](http://i.imm.io/udEc.jpeg)

# c# - Linq to sql 存储过程返回值

> ID：11232214
> 
> 赞同：1
> 
> 时间：2012-06-27T17:54:01.927
> 
> 标签：c#, sql-server, linq-to-sql, stored-procedures

我在 SQL Server 2005 数据库中有以下存储过程（仅以 MB 为单位返回数据库大小）。

```
ALTER PROCEDURE [dbo].[dbSize]
AS
BEGIN
SET NOCOUNT ON;

DECLARE @sizeMb int
DECLARE @DB_NAME varchar(100)

SELECT @DB_NAME = DB_NAME()

SELECT @sizeMb = (size*8)/1024 FROM sys.master_files
    WHERE DB_NAME(database_id) = @DB_NAME
    AND Name = @DB_NAME

RETURN @sizeMb  
END 
```

当我在 SQL Server Management Studio 中运行它时，它可以正常工作，以 MB 为单位返回当前的 DB 大小。

我希望它在应用程序中运行，所以我将它添加到 linq to sql 数据上下文中，它生成了以下代码：

```
 [global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.dbSize")]
    public int dbSize()
    {
        IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())));
        return ((int)(result.ReturnValue));
    } 
```

我这样称呼它：

```
int dbSize = db.dbSize(); 
```

但是，它只返回零，从不返回任何东西。也不会抛出任何类型的异常。我尝试选择一个结果并使用输出参数，但这也无济于事（输出参数也为零）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:12:02.050

我遇到了同样的问题。听起来很愚蠢，您必须返回单行，单列包含*存储过程*中的值。L2S 不做类似的事情`ExecuteScalar(...)`。

如果你使用*UDF*，你会有更好的运气。 [这篇文章](https://stackoverflow.com/questions/281210/is-it-possible-to-use-access-scalar-functions-with-linq-to-sql)很好地说明了这个问题。

# programming-languages - 程序开发具有交通规则的 3D 赛车游戏

> ID：11232216
> 
> 赞同：-3
> 
> 时间：2012-06-27T17:54:07.600
> 
> 标签：programming-languages

哪种编程语言最适合我，可以让我与其他道路使用者一起在街道上开发赛车游戏，比如在城市街道上，遵守交通规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:33:06.960

我更喜欢使用带有 LWJGL 库的 Java 来制作 3D OpenGL 游戏。Java 也是非常跨平台的，但缺点是它有点慢。OpenGL也很难上手

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:30:02.057

如果您是一般编程新手，我建议您使用像 Stencyl 这样的工具：http: [//www.stencyl.com/](http://www.stencyl.com/)它可能不允许您进行 3D，但它很容易介绍一些很快就会让人不知所措的东西。或者，您可以使用 Unity [http://unity3d.com](http://unity3d.com)，无需太多编程即可轻松上手。

如果您已经熟悉编程语言，我建议您使用您最熟悉的一种。即使您最熟悉的语言是 Python，您也可以使用 PyGame 或其他任何东西来编写它。

事实上，没有“最好”的语言，只有不同的语言，每种语言都有优点和缺点。大多数主要的工作室引擎都是用 C 或 C++ 编写的，少数是用 C# 编写的。但是这些语言很难编写游戏引擎。如果您还不是程序员，请让自己轻松一点，从简单的事情开始 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:01:14.413

标准将是带有 C++ 的 OpenGL、带有 C++ 的 DirectX 或带有 C#/VB 的 XNA。

如果您是 3D 图形和游戏开发的新手，我认为 XNA 的学习曲线最流畅。

# mysql - 远程访问数据库

> ID：11232219
> 
> 赞同：0
> 
> 时间：2012-06-27T17:54:18.613
> 
> 标签：mysql, ubuntu, privileges

我有一个安装了 mysql 的 ubuntu 服务器，有一次我看到服务器上运行的 php 代码可以访问 mysql，但我无法远程访问 mysql，对于另一台服务器或 sequal pro。

```
$ mysql -u root -p
mysql> GRANT ALL on *.* TO 'thomas'@'%';
mysql> exit
$ mysql -u thomas -p
mysql> show grants;
+------------------------------------------------------------------------------------------------------------------------------------------+
| Grants for thomas@localhost                                                                                                              |
+------------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'localhost' IDENTIFIED BY PASSWORD '[ENCRYPTEDPASSWORD]' WITH GRANT OPTION |
+------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
mysql> exit
$ mysql -u thomas -p -h [SERVERIP]
ERROR 1045 (28000): Access denied for user 'thomas'@'[SERVERNAME]' (using password: YES) 
```

更新：

我没有进去并删除了所有创建的用户（有些没有密码），我在`mysql.user`桌子旁使用`drop user`命令。

```
CREATE USER 'thomas'@'localhost' IDENTIFIED BY '[PASSWORD]';
GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'localhost' IDENTIFIED BY '[PASSWORD]';
GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'[SERVERIP]' IDENTIFIED BY '[PASSWORD]';
GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'%' IDENTIFIED BY '[PASSWORD]'; 
```

表格现在看起来像这样：

```
+--------------+------------------+
| Host         | User             | 
+--------------+------------------+
| localhost    | root             | 
| localhost    | phpmyadmin       | 
| 127.0.0.1    | root             | 
| ::1          | root             | 
| localhost    | debian-sys-maint | 
| localhost    | thomas           | 
| [SERVERIP]   | thomas           | 
| %            | thomas           | 
+--------------+------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:58:54.410

嗯，你有

```
GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'localhost' 
```

但你不在`localhost`。你可能想试试

```
GRANT ALL PRIVILEGES ON *.* TO 'thomas'@'%' 
```

`IDENTIFIED BY 'password'`当然，如果您愿意，您必须添加

# php - IIS 上 PHP 的 MySQL 连接？

> ID：11232220
> 
> 赞同：0
> 
> 时间：2012-06-27T17:54:20.970
> 
> 标签：php, mysql, iis

我继承了一个使用 PHP 编写的网站，我们主要是一家 Windows 商店。我根本无法让 PHP 代码连接到 MySQL。

1 - IDE 是 Eclipse。我导入了项目并设置了调试配置，并且在 HTML 和其他 PHP（非 DB）代码中一切正常。

2 - 我正在运行启用 PHP 的 IIS 7.5

3 - 我尝试连接到两个完全独立的 MySQL 实例（不同的主机、不同的数据库等），但它无法连接

我已经确保将 sql.safemode 设置为 OFF 并且 php.ini 中没有默认服务器（如果安全模式为 OFF，那不应该发挥作用，对吧？）

我对 PHP 代码或项目没有做任何特别的事情，我想知道这是否是问题的一部分——我是否需要一个 JAR 或任何类型的引用来启用 MySQL 连接？

PHP代码如下 - 我认为没什么特别的：

```
$db_name = "foo";
$connection = @mysql_connect("myserver", "myuser", "mypw") or die("Could not connect to database");
mysql_select_db($db_name, $connection) or die("Count not select database"); 
```

上面的代码总是导致“Could not connect to database”的死语句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:58:28.190

据我所知，@ 符号不是建立数据库连接所必需的。

尝试

> $connection = mysql_connect("myserver", "myuser", "mypw") or die("Could not connect to database");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T10:52:46.213

首先需要加载 php.ini 文件。如何加载 php.ini 文件

1.  将文件 php.ini-production/php.ini-development 中的任何一个从 C:\PHP 重命名为 php.ini（注意现在扩展名为 ini，即“php.ini”）。
2.  重命名为 php.ini 文件后重新启动服务器。以管理员身份打开文本编辑器，例如记事本。
3.  在新文件中，键入以下文本：`<?php phpinfo(); ?>`
4.  将文件另存为 C:\inetpub\wwwroot\Phpinfo.php。
5.  打开浏览器并输入以下 URL： [http://localhost/phpinfo.php](http://localhost/phpinfo.php)

[![在此处输入图像描述](../Images/115d024ed4e42cc3b3116418b364aab9.png)](https://i.stack.imgur.com/Mwvg4.png)

### 如何在 php.ini 中启用 mysqli

通过取消注释（删除';'）以下配置行来编辑 php.ini：

```
// 1st (uncomment and add config): 
include_path = "C:\php\includes"

// <2nd (uncomment): 
extension_dir = "ext"

// 3rd (uncomment and edit config): 
extension=C:/PHP/ext/php_mysql.dll
extension=C:/PHP/ext/php_mysqli.dll 
```

编辑后重新启动 IIS 服务器并确保系统上正在运行 mysql。

更改代码，即 phpinfo.php 文件以查看数据库连接

```
<?php
$servername = "localhost";
$username = "root";
$password = "";

// Create connection
$conn = new mysqli($servername, $username, $password);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 
echo "Connected successfully";
?> 
```

[![在此处输入图像描述](../Images/413a2d4e0f8920d4280935f9a3f8c8cc.png)](https://i.stack.imgur.com/9thUB.png)

# python - 记录到具有不同设置的两个文件

> ID：11232230
> 
> 赞同：101
> 
> 时间：2012-06-27T17:54:54.680
> 
> 标签：python, python-3.x, logging, logfile

我已经在使用一个基本的日志配置，所有模块中的所有消息都存储在一个文件中。但是，我现在需要一个更复杂的解决方案：

*   两个文件：第一个文件保持不变。
*   第二个文件应该有一些自定义格式。

我一直在阅读该模块的文档，但目前它们对我来说非常复杂。记录器、处理程序...

所以，简而言之：

如何在 Python 3 中登录到两个文件，即：

```
import logging
# ...
logging.file1.info('Write this to file 1')
logging.file2.info('Write this to file 2') 
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-06-27T19:05:44.933

你可以这样做：

```
import logging
formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')

def setup_logger(name, log_file, level=logging.INFO):
    """To setup as many loggers as you want"""

    handler = logging.FileHandler(log_file)        
    handler.setFormatter(formatter)

    logger = logging.getLogger(name)
    logger.setLevel(level)
    logger.addHandler(handler)

    return logger

# first file logger
logger = setup_logger('first_logger', 'first_logfile.log')
logger.info('This is just info message')

# second file logger
super_logger = setup_logger('second_logger', 'second_logfile.log')
super_logger.error('This is an error message')

def another_method():
   # using logger defined above also works here
   logger.info('Inside method') 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-29T09:08:58.743

```
def setup_logger(logger_name, log_file, level=logging.INFO):
    l = logging.getLogger(logger_name)
    formatter = logging.Formatter('%(message)s')
    fileHandler = logging.FileHandler(log_file, mode='w')
    fileHandler.setFormatter(formatter)
    streamHandler = logging.StreamHandler()
    streamHandler.setFormatter(formatter)

    l.setLevel(level)
    l.addHandler(fileHandler)
    l.addHandler(streamHandler)    

setup_logger('log1', txtName+"txt")
setup_logger('log2', txtName+"small.txt")
logger_1 = logging.getLogger('log1')
logger_2 = logging.getLogger('log2')

logger_1.info('111messasage 1')
logger_2.info('222ersaror foo') 
```

# flash - 需要帮助调试 Flash 中未知的匿名方法运行时错误

> ID：11232232
> 
> 赞同：0
> 
> 时间：2012-06-27T17:55:00.300
> 
> 标签：flash, debugging, anonymous-methods

我正在运行一个大型 Flash 应用程序，该应用程序大量使用匿名方法来处理事件。我有一个 1010 类型错误的匿名方法，它被我的未捕获异常处理程序捕获。用户遇到此错误，我从未设法在调试器中捕获它。

我使用一些技巧来获取调用堆栈，所以我可以找到错误的代码，但我只知道 MethodInfo-XXX 是有错误的函数，其中 XXX 是某个数字。有没有办法可以将其追溯到特定的代码块，以便我可以解决这个问题？MethodInfo-XXX 是 flash 为这个匿名方法创建的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:08:38.533

我建议检查在运行时发生错误时 flash 生成的堆栈跟踪（带有按钮继续和关闭的弹出窗口）。然后寻找第一个已知的方法（你写的）并从那里开始。

另一种有用的方法是将一些日志记录代码放入可疑方法中。这里有一些想法：

*   [闪存日志 API](https://stackoverflow.com/questions/234180/flash-logging-api)
*   [处理 Flash 播放器中的运行时错误](http://www.novio.be/blog/?p=482)
*   [运行时错误](http://www.foundation-flash.com/tutorials/runtimeerrors/)

另请参阅问题[Error 1010 in ActionScript](https://stackoverflow.com/questions/6910233/error-1010-in-actionscript)以了解您的特定错误代码。

# jquery - 加载内容后未应用样式

> ID：11232235
> 
> 赞同：0
> 
> 时间：2012-06-27T17:55:18.037
> 
> 标签：jquery, css, ajax, asp.net-mvc

我正在使用 jquery 的 ajax 函数从服务器返回部分视图。在成功部分中，我使用 $.(html) 将其附加到 DIV 中。但是内容是在没有任何样式的情况下加载的。我尝试了不同的方法来附加样式，但没有得到任何结果。

这是 ajax，在 documentReady 之后调用

```
 $.ajax({
        type: "GET",
        url: '@Url.Action("Accessories", "Tablo")',
        success: function (data) {
            $("#secimlerDetay").html(data);
        },
        }
    }); 
```

异步调用的返回是部分视图，这里：

```
 @model RenkliTablo.ViewModels.AccessoryViewModel

<div id="cerceveList">
    <span>Cerceveler</span>

    @foreach (var cerceve in Model.cerceveList)
    {
        <a class="cerceve" data-accessoryId="@cerceve.AccessoryId" href="/">
            <img class="accImg" alt="" src="../../Content/Images/kapcik.png" />
            <span class="accText">@cerceve.Thickness cm</span>
        </a>
    }
</div>

<div id="paspartuList"> 
    <span style="font-weight:bold;">Paspartular</span>       

    @foreach (var paspartu in Model.paspartuList)
    {
        <a class="paspartu" data-accessoryId="@paspartu.AccessoryId" href="/">
            <img class="accImg" alt="" src="../../Content/Images/kapcik.png" />
            <span class="accText" style="font-weight:bold;">@paspartu.Thickness cm</span>
        </a>
    }
</div> 
```

如您所见，我在 .cshtml 文件中指定了 style="font-weight:bold"，但是当 jquery 加载局部视图时，我没有看到任何粗体文本。数据加载正常，但缺少样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:02:28.020

```
replace <span style="font-weight:bold;">Paspartular</span> 
```

和

```
<strong>Paspartular</strong> 

<span class="accText" style="font-weight:bold;">@paspartu.Thickness cm</span> 
```

和

```
<span class="accText"><strong>@paspartu.Thickness cm</strong></span> 
```

# android - 当设备进入睡眠状态时，我的应用程序代码在什么时候停止运行？

> ID：11232241
> 
> 赞同：0
> 
> 时间：2012-06-27T17:55:47.627
> 
> 标签：android, multithreading, sleep

具体来说，如果我的 Activity 类中有一个方法正在运行，那么当手机进入睡眠状态（CPU 关闭）时，该方法会在调用 onPause() 之前运行完成吗？

```
class MyActivity extends Activity {
    ...
    public void doSomeWork() {
        ...
        ... // <-- Device goes to sleep at this point in time
        ...
        return; // Do we get here before onPause() is called?
    }
    ...
    @Override
    public void onPause() {
        ...
    }
    ...
} 
```

除了活动之外，当设备进入睡眠状态时，正在运行的线程（可能由活动类启动）是否会*在它所在的任何代码行被中断？*我在这篇文章中看到了相互矛盾的答案：[一旦设备进入睡眠状态，Activity 启动的线程是否继续运行？](https://stackoverflow.com/questions/7379880/does-a-thread-launched-by-activity-continue-running-once-the-device-goes-to-slee)

更进一步，我知道设备唤醒时将调用 Activity 的 onResume() ；如果上面的 doSomeWork() 或上述线程在进入睡眠状态时确实在中途中断，剩余的代码会恢复吗？

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:01:58.993

在主 UI 线程上不运行长任务被认为是一个很好的 Android 实践，因此您`doSomeWork()`应该在几百毫秒内完成并在调用`return`之前到达语句。`onPause()`

关于`doSomeWork()`中途中断——发生这种情况的唯一可能性是当您的应用程序显示可怕的 ANR 对话框并强制关闭时，因此您不必担心中途重新启动它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T18:09:50.437

在这里，当您退出活动或您的活动出现一个弹出窗口时，例如出现电话或您在暂停时旋转屏幕。您提供的链接讨论了 AsyncTask。AsyncTask 是一个在后台运行并在获取一些数据后更新 UI 的线程，在此过程中，如果用户旋转手机，Android 会终止 Activity，如果线程链接到 Activity 则重新创建，那么您的 Activity 不会被终止，而是会泄漏出去。

如果您需要有关 AsyncTask 和活动的更多详细信息，您可以阅读此 [AsyncTask 在概念上真的存在缺陷还是我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-massively-flawed-or-am-i-just-missing-something)

# sql - 复合语句无法更改分隔符

> ID：11232247
> 
> 赞同：1
> 
> 时间：2012-06-27T17:56:19.773
> 
> 标签：sql, db2

我正在尝试在 DB Solo 4.2.2 的查询编辑器中运行一个简单的复合语句

看来我无法正确更改行尾分隔符。我正在使用 DB2。这是一个给出错误的简单示例：

```
--#SET TERMINATOR @

BEGIN ATOMIC

DECLARE id INT;
SET id = 10;

END @

--#SET TERMINATOR ; 
```

错误是：在“N ATOMIC DECLARE id”之后发现了意外的令牌“INT”。预期的标记可能包括：“END-OF-STATEMENT”

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:25:20.747

DB2 只允许在复合 SQL 中使用分号作为分隔符。您使用的语法似乎只在使用该[`db2batch`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0002043.html)实用程序（DB2 Linux/Unix/Windows 附带）时才有效。

[以下是来自信息中心](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.apsg/src/tpc/db2z_sqlprocedurebody.htm)的一些相关信息（来自 z/OS IC）：

> **如何在 SQL 过程中编写多条语句**
> 
> 使用分号字符来分隔 SQL 过程中的 SQL 语句。
> 
> 过程体没有终止字符。因此，如果过程只包含一个语句，则不需要在该语句后放置分号。如果过程由一组嵌套语句组成，则不需要在最外面的语句后放置分号。

# silverlight - 如何在 Silverlight 5 中将 DatePicker 的文本框组件设为只读？

> ID：11232254
> 
> 赞同：0
> 
> 时间：2012-06-27T17:56:55.340
> 
> 标签：silverlight

我正在 Silverlight 5 中创建一个简单的应用程序来测试另一个应用程序从中提取数据的能力。目标是拥有尽可能多的输入类型来测试其他应用程序的多功能性。我正在尝试使用以下代码将 DatePicker 添加到此表单的一部分：

```
<sdk:DatePicker Grid.Row="3" Grid.Column="3" Height="25" Width="190" >
</sdk:DatePicker> 
```

这工作得很好，但我想让 DatePicker 的 TextBox 组件只读。这样做的原因是我只希望在此文本框中输入有效日期，因为然后我从中提取文本并将其放入 DataGrid。任何帮助，将不胜感激！如果您需要我提供更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:26:06.810

创建您自己的继承自 DatePicker 的控件：

```
using System.Windows.Controls.Primitives;

public class ReadonlyDatePicker : DatePicker
{
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        var textBox = this.GetTemplateChild("TextBox") as DatePickerTextBox;
        textBox.IsReadOnly = true;
    }
} 
```

将命名空间添加到页面中的项目中：

```
xmlns:MyControls="clr-namespace:MyControlsNamespace" 
```

然后使用您的命名空间别名引用您的 DatePicker：

```
<MyControls:ReadonlyDatePicker Grid.Row="3" Grid.Column="3" Height="25" Width="190" >
</MyControls:ReadonlyDatePicker> 
```

# jquery - 不知道为什么我的 jquery 平滑 div 滚动条不起作用

> ID：11232265
> 
> 赞同：0
> 
> 时间：2012-06-27T17:57:59.563
> 
> 标签：jquery, smooth-scrolling

我正在使用本网站中看到的平滑 div 滚动条：[http](http://www.smoothdivscroll.com/) ://www.smoothdivscroll.com/ 。

由于某种原因它不起作用，我不知道为什么。我得到的只是一页不滚动的锚定图像。这是我的 HTML：

```
<div id="makeMeScrollable">
<div class="scrollingHotSpotLeftVisible"></div>
<div class="scrollingHotSpotRightVisible"></div>
<div class="scrollWrapper">
    <div class="scrollableArea">
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
        <a href="#"><img src="some-image.png"/></a>
    </div>
</div> 
```

这是我的脚本：

```
<script type="text/javascript" src="jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="jquery.smoothdivscroll-1.2-min.js"></script>
<script src="jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery-ui-1.8.18.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="smoothDivScroll.css" />
<script type="text/javascript">
    $(document).ready(function() {
        $("#makeMeScrollable").smoothDivScroll({ 
            mousewheelScrolling: true,
            manualContinuousScrolling: true,
            visibleHotSpotBackgrounds: "always",
            autoScrollingMode: "onstart"
        });
    });
</script> 
```

这是我的CSS：

```
a img {border: none; }

#makeMeScrollable
{
    width:75%;
    height:60px;
    position: relative;
    display: block;
    float: left;
    padding: 0;
    margin: 0;
}
  #makeMeScrollable div.scrollableArea img
    {
        position: relative;
        float: left;
        margin: 0;
        padding: 0;
        /* If you don't want the images in the scroller to be selectable, try the following
           block of code. It's just a nice feature that prevent the images from
           accidentally becoming selected/inverted when the user interacts with the scroller. */
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        user-select: none;
    } 
```

我认为这可能是我忽略或没有看到的非常简单的事情，但是已经有一段时间了，我还没有抓住它。

**更新**

这是我的代码的[JsFiddle非常感谢。](http://jsfiddle.net/9HstK/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:01:13.230

尝试在其他脚本之前加载 jquery：

```
<script src="jquery.min.js" type="text/javascript"></script>

<script type="text/javascript" src="jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="jquery.smoothdivscroll-1.2-min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.18.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="smoothDivScroll.css" />
<script type="text/javascript">
    $(document).ready(function() {
        $("#makeMeScrollable").smoothDivScroll({ 
            mousewheelScrolling: true,
            manualContinuousScrolling: true,
            visibleHotSpotBackgrounds: "always",
            autoScrollingMode: "onstart"
        });
    });
</script> 
```

还：

CSS 注释只是`/*`和`*/`不是`<!--/*`

```
/* If you don't want the images in the scroller to be selectable, try the following
           block of code. It's just a nice feature that prevent the images from
           accidentally becoming selected/inverted when the user interacts with the scroller. */ 
```

更新：

你错过了一些（显然是重要的）css：

[http://jsfiddle.net/9HstK/2/](http://jsfiddle.net/9HstK/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:02:59.063

根据您的代码片段和该网站上提供的示例，您的结构似乎有误。

根据“[文档](http://www.smoothdivscroll.com/options.html)”：

> Smooth Div Scroll 在创建滚动条时添加元素。这些元素被赋予 CSS 类。在大多数情况下，您不需要更改这些 - 只需使用默认值即可。

它显示在您的代码段中，您正在手动创建这些元素。这些元素是在创建滚动条时添加的。

```
<!-- the CSS for Smooth Div Scroll -->
<link rel="Stylesheet" type="text/css" href="css/smoothDivScroll.css" />

<!-- Styles for my specific scrolling content -->
<style type="text/css">
    #makeMeScrollable
    {
        width:100%;
        height: 330px;
        position: relative;
    }

    #makeMeScrollable div.scrollableArea img
    {
        position: relative;
        float: left;
        margin: 0;
        padding: 0;
        /* If you don't want the images in the scroller to be selectable, try the following
           block of code. It's just a nice feature that prevent the images from
           accidentally becoming selected/inverted when the user interacts with the scroller. */
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        user-select: none;
    }
</style> 
```

```
<div id="makeMeScrollable">
    <img src="images/demo/field.jpg" alt="Demo image" id="field" />
    <img src="images/demo/gnome.jpg" alt="Demo image" id="gnome" />
    <img src="images/demo/pencils.jpg" alt="Demo image" id="pencils" />
    <img src="images/demo/golf.jpg" alt="Demo image" id="golf" />
    <img src="images/demo/river.jpg" alt="Demo image" id="river" />
    <img src="images/demo/train.jpg" alt="Demo image" id="train" />
    <img src="images/demo/leaf.jpg" alt="Demo image" id="leaf" />
    <img src="images/demo/dog.jpg" alt="Demo image" id="dog" />
</div>

<!-- LOAD JAVASCRIPT LATE - JUST BEFORE THE BODY TAG 
     That way the browser will have loaded the images
     and will know the width of the images. No need to
     specify the width in the CSS or inline. -->

<!-- jQuery library - Please load it from Google API's -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<!-- jQuery UI Widget and Effects Core (custom download)
     You can make your own at: http://jqueryui.com/download -->
<script src="js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>

<!-- Latest version of jQuery Mouse Wheel by Brandon Aaron
     You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="js/jquery.mousewheel.min.js" type="text/javascript"></script>

<!-- Smooth Div Scroll 1.2 minified-->
<script src="js/jquery.smoothdivscroll-1.2-min.js" type="text/javascript"></script>

<!-- If you want to look at the uncompressed version you find it at
     js/jquery.smoothDivScroll-1.2.js -->

<!-- Plugin initialization -->
<script type="text/javascript">
    // Initialize the plugin with no custom options
    $(document).ready(function () {
        // None of the options are set
        $("div#makeMeScrollable").smoothDivScroll({});
    });
</script> 
```

# sql - 在 IN 子句中使用 CASE 语句

> ID：11232267
> 
> 赞同：12
> 
> 时间：2012-06-27T17:58:05.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql

是否可以在 IN 子句中使用 CASE 语句？

这是我一直试图正确编译的简化版本：

```
SELECT * FROM MyTable 
WHERE StatusID IN (
CASE WHEN @StatusID = 99 THEN (5, 11, 13)
ELSE (@StatusID) END ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-27T18:00:56.557

`CASE`仅返回一个标量值。您可以改为这样做。（根据您的示例，我假设当@StatusID = 99 时，StatusID 值 99 不匹配。）

```
select *
from MyTable
where (@StatusID = 99 and StatusID in (5, 11, 13))
    or (@StatusID <> 99 and StatusID = @StatusID) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:02:17.893

不，相反，你可以把它放在外面

```
SELECT *
FROM MyTable
WHERE 1 = (CASE WHEN @StatusID = 99 and StatusId in (5, 11, 13) then 1
                WHEN coalesce(@StatusId, 0) <> 99 and StatusId in (@StatusID) then 1
                ELSE 0
           END) 
```

您也可以在没有 case 语句的情况下编写它。

另一种选择是动态 SQL，您实际上使用 SQL 语句创建一个字符串，然后执行它。但是，在这种情况下，动态 SQL 似乎有点过头了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T06:35:26.020

我想我会尝试使用表值构造函数进行不同的尝试——在以下情况下不允许 TVC 吗？

```
SELECT * 
FROM MyTable  
WHERE StatusID IN 
   ( 
   SELECT 
       CASE 
         WHEN @StatusID = 99 THEN (values(5),(11),(13)) t(StatusID )
         ELSE @StatusID 
   END  
   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T12:21:24.907

您可以使用 TVC 执行此操作，但方法略有不同。它没有用例，但在有许多可能的选项可供选择的情况下，它会更好地扩展：

```
SELECT * 
FROM MyTable  
join (values 
      (99,5),(99,11),(99,13),
      (@StatusID , @StatusID)    
    ) t(k,v) on t.k= @StatusID and t.v = StatusID) 
```

或者如果您需要 where 子句中的所有内容，那么：

```
SELECT * 
FROM MyTable  
WHERE exists (
    select 1
    from (values 
      (99,5),(99,11),(99,13),
      (@StatusID , @StatusID)    
    ) t(k,v)
    where t.k= @StatusID and t.v = StatusID) 
```

# ios - 为 NIB 中的 UIImageView 覆盖 initWithImage

> ID：11232269
> 
> 赞同：0
> 
> 时间：2012-06-27T17:58:16.517
> 
> 标签：ios, uiimageview, uistoryboard

交易是这样的：我的故事板中有 25 个视图控制器，每个都有一个 UIImageView，它显示一个大文件大小的 PNG。

事实证明，笔尖内的 UIImageView 将使用`[UIImageView initWithImage:[UIImage imageNamed:]]`方法加载他们的图像[（参见文档）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)。使用的问题`imageNamed:`是，当加载每个视图控制器时，其 UIImageView 中的图像被放置在缓存中，我的应用程序很快开始收到内存警告和崩溃。

出路是使用`[UIImageView initWithImage:[UIImage imageWithContentsOfFile:]]`，它加载图像但不缓存它。所以我想做的是**在我的 NIB 文件**中使用UIImageView 的一个子类，它调用`imageWithContentsOfFile`. 但我不知道如何获取在 Interface Builder 的 Attributes Inspector 中设置的图像文件的名称。

### UIImageViewNoCache.h

```
#import <UIKit/UIKit.h>

@interface UIImageViewNoCache : UIImageView
@end 
```

### UIImageViewNoCache.h

```
#import "UIImageViewNoCache.h"

@implementation UIImageViewNoCache

-(id)initWithImage:(UIImage *)image{
   self = [super init];
    if(self){
        self.image = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], theNameOfTheImageInTheNib];]
    }
}
@end 
```

那么，我怎样才能得到`theNameOfTheImageInTheNib`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:29:41.920

看看我写的这个类别：[UIImage+SDSCache](https://github.com/sdesimone/iOSSnippets/blob/master/SDSCategories/UIImage+SDSCache.m)。

它会混在一起`imageNamed`，所以不使用缓存。它可能对您有用，或者作为如何解决您的特定问题的示例。

# python - 关于索引重复条目的 Pandas 枢轴警告

> ID：11232275
> 
> 赞同：49
> 
> 时间：2012-06-27T17:58:38.513
> 
> 标签：python, pandas

在该`pivot`方法的 Pandas 文档中，我们有：

```
Examples
--------
>>> df
    foo   bar  baz
0   one   A    1.
1   one   B    2.
2   one   C    3.
3   two   A    4.
4   two   B    5.
5   two   C    6.

>>> df.pivot('foo', 'bar', 'baz')
     A   B   C
one  1   2   3
two  4   5   6 
```

我`DataFrame`的结构是这样的：

```
 name   id     x
----------------------
0  john   1      0
1  john   2      0
2  mike   1      1
3  mike   2      0 
```

我想要这样的东西：

```
 1    2   # (this is the id as columns)
----------------------
mike  0    0   # (and this is the 'x' as values)
john  1    0 
```

但是当我运行该`pivot`方法时，它说：

```
*** ReshapeError: Index contains duplicate entries, cannot reshape 
```

这没有任何意义，即使在示例中`foo`列上有重复的条目。我使用该`name`列作为枢轴的索引，即`pivot`方法调用的第一个参数。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-10-25T22:45:37.453

据我所知，对于 pandas 的更新，您必须使用 pivot_table() 而不是 pivot()。

```
pandas.pivot_table(df,values='count',index='site_id',columns='week') 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-12T05:14:29.717

试试这个，

```
#drop_duplicates removes entries which have same values for 'foo' and 'bar'
df = df.drop_duplicates(['foo','bar'])
df.pivot('foo','bar','baz') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T13:46:31.953

适合我吗？你能发布你正在使用的确切的数据透视方法调用吗？

```
In [4]: df.pivot('name', 'id', 'x')
Out[4]: 
id    1  2
name      
john  0  0
mike  1  0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-04T07:29:57.077

朋友，我也遇到过这样的问题。在我的情况下，问题出在数据中 - 我的“信息”列包含 1 个唯一值并导致错误。

**UPD**：纠正工作“枢轴”对（id_user，信息）不能有重复

**它有效**：

```
df2 = pd.DataFrame({'id_user':[1,2,3,4,4,5,5], 
'information':['phon','phon','phone','phone1','phone','phone1','phone'], 
'value': [1, '01.01.00', '01.02.00', 2, '01.03.00', 3, '01.04.00']})
df2.pivot(index='id_user', columns='information', values='value') 
```

**它不起作用**：

```
df2 = pd.DataFrame({'id_user':[1,2,3,4,4,5,5], 
'information':['phone','phone','phone','phone','phone','phone','phone'], 
'value': [1, '01.01.00', '01.02.00', 2, '01.03.00', 3, '01.04.00']})
df2.pivot(index='id_user', columns='information', values='value') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-06T19:04:09.040

我的数据没有重复的数据透视对，并且数据透视表仍然抛出一个关键错误:( drop_duplicates() 将我的数据截断为数据对的第一个值。

输入：

```
Well    Reading     Filter 4
0   A2  1   116041
1   B2  1   105191
2   C2  1   93942
3   D2  1   96821
4   E2  1   85622
5   F2  1   90227
6   G2  1   95801
7   H2  1   107833
8   A2  2   115765
9   B2  2   104395
10  C2  2   93986
...
1630    G2  204     388682
1631    H2  204     444708

1632 rows × 3 columns 
```

df_X2.pivot_table('Reading', 'Well', 'Filter 4')

抛出：KeyError：'阅读'

df_X2_uniq=df_X2.drop_duplicates(['Well', 'Reading']) 将数据截断到前 8 行：

```
 Well    Reading     Filter 4
0   A2  1   116041
1   B2  1   105191
2   C2  1   93942
3   D2  1   96821
4   E2  1   85622
5   F2  1   90227
6   G2  1   95801
7   H2  1   107833 
```

在梳理了 2 个小时的帖子后，我一点也不聪明……有什么暗示我应该尝试让枢轴发挥作用吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T23:05:11.117

正如几个答案所指出的，问题不在于您的索引中有重复的值（错误消息在这里肯定没有帮助），而是您有重复的`(index, column)`. 一些答案建议您只删除这些重复项，但我会小心这样做 - 根据我的经验，这很少是正确的选择。通常情况下，您可能希望以某种方式聚合您的数据，*然后进行*透视。

我从[这篇博](https://cumsum.wordpress.com/2019/12/28/valueerror-index-contains-duplicate-entries-cannot-reshape/)文中提取了一些例子和引用，我建议你阅读下面的更多细节。

给定这样的数据：

```
df = pd.DataFrame([
    ['a', 'x', 1],
    ['a', 'x', 2],
    ['b', 'x', 3],
    ['b', 'y', 4]
], columns=['g1', 'g2', 'value']) 
```

打印如下：

```
>>> print(df)
  g1 g2  value
0  a  x      1
1  a  x      2
2  b  x      3
3  b  y      4 
```

我们`ValueError`在尝试使用`g1`索引和`g2`列进行旋转时得到一个：

```
>>> df.pivot(index='g1', columns='g2', values='value')
...
ValueError: Index contains duplicate entries, cannot reshape 
```

`g1`请注意，第 0 行和第 1 行的和`g2`:具有相同的值`(a, x)`。因此，当 pandas 为`a`索引、`g1`列创建旋转数据框时，如何只选择一个值：1 或 2？答案是……我们不能！这就是删除重复项有效的原因，但它可能不是您想要的，因为您正在丢失可能有用的数据。那么我们能做些什么呢？

### 解决方案 1：聚合

并不总是有一个对您的用例有意义的聚合函数，但如果有的话，有几种方法可以实现这一点。

```
df.pivot_table(index='g1', columns='g2', values='value', aggfunc='sum') 
```

```
df_agg = df.groupby(by=['g1', 'g2']).value.sum().reset_index()
df_agg.pivot(index='g1', columns='g2', values='value') 
```

```
df.groupby(by=['g1', 'g2']).value.sum().unstack() 
```

所有这些都会产生相同的结果：

```
g2    x    y
g1          
a   3.0  NaN
b   3.0  4.0 
```

但是，如果您不需要总和怎么办？也许逗号分隔值在您的情况下很有用？

```
df.pivot_table(
    index='g1',
    columns='g2',
    values='value',
    aggfunc=lambda x: ','.join(x.astype('str'))
)
# we need to convert to strings before we can join 
```

要得到：

```
g2    x    y
g1          
a   1,2  NaN
b     3    4 
```

或者您可以`list`用作您的`aggfunc`：

```
pv = df.pivot_table(index='g1', columns='g2', values='value', aggfunc=list) 
```

然后我们就可以爆炸了！

```
>>> pv.explode('x').explode('y')
g2  x    y
g1        
a   1  NaN
a   2  NaN
b   3    4 
```

### 解决方案 2：给自己另一把钥匙

这是基于[这个答案](https://stackoverflow.com/a/55463555/383744)

```
>>> df['key'] = df.groupby(['g1', 'g2']).cumcount()
>>> df
  g1 g2  value  key
0  a  x      1    0
1  a  x      2    1
2  b  x      3    0
3  b  y      4    0 
```

现在我们可以使用复合索引进行旋转：

```
>>> df.pivot(index=['key', 'g1'], columns='g2', values='value').reset_index().drop(columns='key')
g2 g1    x    y
0   a  1.0  NaN
1   b  3.0  4.0
2   a  2.0  NaN 
```

这与上面分解的示例几乎相同，只是一个`set_index('g1')`距离。

希望这可以帮助！我经常遇到这个问题，通常会忘记这一切..

# security - 散列，添加更多盐

> ID：11232282
> 
> 赞同：1
> 
> 时间：2012-06-27T17:58:59.750
> 
> 标签：security, hash, cryptography, salt

好的，所以我明白为什么在散列之前加盐密码是个好主意。问题是，通常人们建议在密码中附加或附加盐，为什么不两者都做呢？

我的想法是，所以如果黑客先生掌握了数据库并想要获取人 x 的密码，他会想，大多数人建议附加或前置盐，所以让我们这样做.. 他生成了一个彩虹表密码+盐的所有组合，并尝试他的运气。如果这不起作用，他会做同样的事情，但盐 + 密码。

为了让攻击变得更加困难，为什么开发人员不更进一步，做'salt + password + salt'，或者'reverse(salt) + password + salt'，或者你可能会喜欢并开始切割密码/盐，开始在这里和那里放一些盐等等。

黑客能够找到密码的唯一方法是他是否可以访问源代码（了解在散列之前如何将盐编织到密码中）

进一步说明的是，人们建议在按键拉伸时至少进行 1000 次迭代，为什么不进行 1147、1652 等 :)

第二个注意事项，在查看哈希字符串时，是否可以计算出使用的哈希函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:02:34.853

猜测使用盐的方式比暴力破解密码要容易得多，尤其是在攻击者拥有哈希密码数据库和一个已知匹配项（他自己的密码）的情况下。即使他不知道，他也可以简单地使用他已知的密码和已知的哈希来暴力破解加盐和加盐算法。

哈希算法也是如此。只有几个完整的哈希函数，任何有能力的管理员都有可能使用其中之一。

密码学的前提之一是关于所使用算法的所有信息都被假定为公开的。您不应该依赖攻击者无法破坏您的系统，因为您正在使用一种晦涩的算法对事物进行哈希处理，因为与在这样的受感染数据库上暴力破解密码的费用相比，暴力破解每个哈希算法非常便宜。

如果你将你的程序分发给用户，他们可以通过反汇编或调试来准确地弄清楚它是如何散列的。如果它是一个服务器程序，他们可以用其他一些漏洞闯入，或者他们可以购买/窃取/获取您的软件，或其他任何东西。我什至会说所有好的密码软件都是开源的：即使全世界都知道它是如何工作的，但它仍然无法破解。

您试图依靠的是默默无闻的安全性。许多人和公司已将其用作保护其产品的方法。我能记得的最后一个大事件是赛门铁克 PCAnywhere 软件的源代码被盗。你可能还记得结果如何。这个故事的寓意是，如果没有人知道它是如何工作的，那么它是不安全的，如果每个人都知道它是如何工作的（并且它是加密的），那么它就是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:58:32.267

对于坚定的黑客来说，逆向工程代码不会太难，一旦发生这种情况，你的每一个密码现在都会被泄露。

您应该使用经过验证的散列技术。举个例子，类似于 bcrypt 算法。当您想对密码进行哈希处理时，请执行以下步骤：

1.  生成足够强的随机盐（16 - 32 字节）
2.  设置一个哈希成本（15 - 20）（成本越大，哈希越慢越强）
3.  计算您将执行的哈希轮数（2^cost）

请执行下列操作：

```
hash = ""
for(numberOfHashRounds)
{
hash = SHA256(hash + salt + password)
} 
```

然后将哈希与使用的盐和成本一起存储。当您需要验证时，对存储的盐和成本执行相同的操作。随着计算机变得越来越快，您可以提高算法的成本。试着得到它，这样你的哈希计算大约需要 500 毫秒，或者只要你愿意牺牲。

这是安全的，因为破解者必须为每种盐生成一个彩虹表，并执行相同数量的回合。即使使用用于破解的 GPU 阵列，这也需要数十年的时间。

如果您想在此之上添加混淆，请继续，只是不要在此过程中破坏算法的安全性。

# security - 如何安全地在网站上提供视频

> ID：11232284
> 
> 赞同：9
> 
> 时间：2012-06-27T17:59:13.273
> 
> 标签：security, video, download, streaming, video-streaming

我在问一个与这些有点相关的问题：

[提供视频的安全方式](https://stackoverflow.com/questions/5140677/secure-way-of-serving-videos)

[安全的视频流](https://stackoverflow.com/questions/7738951/secure-streaming-of-videos)

但是，没有人提供似乎与我的情况相关的答案。

我的情况如下：我正在构建一个非常简单的学习管理系统。如果学生付费，他们可以访问视频课程。我想防止：

*   机器人/蜘蛛从找到这些视频并下载它
*   供人们简单地查看源代码、复制视频的 url 并与其他人分享

我怀疑很多人会尝试入侵该网站以窃取视频。

保护这些视频不被共享的最佳方法是什么？我必须将视频存储在我的网络服务器上吗？我可以利用 youtube 或 vimeo 等视频平台吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-18T01:48:10.780

长话短说，没有简单的解决方案。

我会直截了当地说，如果有办法阻止人们下载视频，那么每个视频网站都会这样做。

我已经想到了下面列出的几种方法，您可以采取哪些措施使学生/观众不值得下载视频。

*   隐藏网址
*   经常更改网址
*   限制每个 IP 地址/子网的下载次数
*   让他们在定制的“定制服务”视频播放器中观看
*   使用已有的视频流服务

下面将更详细地讨论每一个。

## 隐藏 URL

您可以像这样隐藏 URL：

```
http://mylearningmanagementsystem.com.au/e12d8cd38f00f204e9801998ecc8427e/video.flv 
```

您可以计算文件本身名称的哈希（或盐和哈希，以上只是一个示例）并在 URL 中使用它。

这可以通过这样一种方式来实现，即它们足够晦涩，但对于观众来说仍然是可收藏的和用户友好的。

如果您想更进一步，您可以将视频分成几部分 - 这在定制部分中进行了讨论。

## 经常更换网址

使用一些代码，您可以将视频设置为每周日晚上 11.59 点更改您所在时区的 URL。但是，您链接到的任何页面都必须自动或手动更新，这本身就是一个麻烦（您如何测试代码/如果它跌倒而您没有意识到/类似的事情）。

即使您完成了所有这些工作，任何为该页面添加书签的用户都会遭受[链接腐烂](http://en.wikipedia.org/wiki/Linkrot)的困扰。

## 限制每个 IP 地址/子网的下载次数

使用一些时髦的服务器端代码，您可以限制视频可以下载到 IP 地址（或根据用户情况，IP 的子网）的次数。

这不是我的强项，但您可以查看有关[动态 IP 限制](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)的文章。以下是网站的摘录

> 根据以下任一条件动态阻止来自 IP 地址的请求：
> 
> *   并发请求数。
> *   一段时间内的请求数。

也有可能对[Drupal 做同样](https://drupal.org/project/restrict_ip)的事情。

## 让他们在定制的“定制服务”视频播放器中观看

您可以加倍努力并制作自己的视频管理系统（看起来像您一样），并从您自己的服务器上提供视频（这就是我所说的定制服务），但是一些尝试过的程序[是像索尼的 CD 管理软件那样有缺陷，](http://en.wikipedia.org/wiki/2005_Sony_BMG_CD_copy_protection_scandal)或者[正在惩罚诚实的用户，比如 Apple iTunes 的 FairPlay DRM 软件](http://www.gizmag.com/go/7356/)。

如果您最终采取了为用户提供程序/网络服务来观看视频并将其限制为密码/加密密钥的方式，您可能会惹恼那些善意为您的内容付费的客户。这基本上是所有版权保护系统都尝试过但完全失败的原因，因为要么该程序没有得到足够好的保护，要么人们只是因为使用起来很尴尬而停止使用它。

当您将视频提供给用户时，您可以将它们分解并按章节分开，因为第一章是一个视频，第二章是另一个视频，依此类推（如下所示）：

> ```
> http://mylearningmanagementsystem.com.au/video_title/chapter_01/video.flv
> http://mylearningmanagementsystem.com.au/video_title/chapter_02/video.flv
> http://mylearningmanagementsystem.com.au/video_title/chapter_03/video.flv 
> ```

...您可以将其与第一部分（模糊 URL）中的散列思想结合起来：

> ```
> http://mylearningmanagementsystem.com.au/e12d8cd38f00f204/8fd3611c40e74c3d/video.flv
> http://mylearningmanagementsystem.com.au/e12d8cd38f00f204/92d7f54d09c80436/video.flv
> http://mylearningmanagementsystem.com.au/e12d8cd38f00f204/27bd98792bea3103/video.flv 
> ```

但是，这可能有其缺点：

*   在开始时暂停视频以使其加载的低互联网用户会遇到问题（现在不太常见的问题，因为互联网现在更快且更容易访问）
*   如果缺少一个视频，则整个视频将无法播放
*   您将如何管理每个链接？每个视频名称是否具有相同的哈希值或不同的哈希值？
*   您是否必须手动分解每个视频？

这里的关键点是，这确实为你做了很多不必要的工作。下一个选项是使用已经可用的视频流服务。

## 使用已有的视频流服务

有很多选择可以托管和分享您的视频。[YouTube](https://youtube.com)和[Vimeo](https://vimeo.com)是其中的两个选项。我将解释为什么我更喜欢后者。

1.  密码保护

    如果您只想与特定数量的付费用户共享视频，您可以在 Vimeo 上使用密码保护您的视频。AFAIK，YouTube 不提供此服务 - 它只允许您选择成员来观看视频。

    不仅如此，您还可以将一堆视频添加到相册（在 Vimeo 中），并对相册进行密码保护，因此您只需更改相册的密码。

    请记住，您可能会遇到越来越多的支持消息，例如“但这是当前密码还是上周的密码？”

2.  设置嵌入设置

    您可以使视频无法嵌入任何页面，这样用户就必须直接进入 Vimeo，输入密码（如果您在上面设置了密码），然后在他们的网络浏览器中查看。AFAIK，您可以嵌入任何您可以查看的 YouTube 视频。

您必须记住，快速的 Google 搜索显示[有](http://keepvid.com/) [大量](http://downloadvimeo.com/) [在线网站](http://www.clipconverter.cc/)允许您从这些视频托管网站下载视频。甚至还有[Firefox](https://addons.mozilla.org/en-us/firefox/addon/download-youtube/)和[Chrome](https://chrome.google.com/webstore/detail/vimeo-download-videos/geeljcibkkackafmeepgadbfgmpjmdeg?hl=en)的浏览器插件。

如果您的企业依赖您的视频来实现盈利，并且您想更进一步，那么*有*付费流媒体服务专门从事内容分发，并具有适当的访问权限管理和内容保护。其中一项服务是[Brightcove](http://www.brightcove.com/)。Brightcove 的摘录如下：

> Brightcove Video Cloud 安全地提供最高质量的点播和实时视频体验，以覆盖您的观众——无论他们身在何处。我们简化了向网络、移动和联网电视日益复杂的设备和标准生态系统的交付

... 和 ...

> **保护您的宝贵内容**
> 
> 确保您的视频安全。使用 RTMPe 流加密和 SWF 验证来防止视频流翻录和内容盗窃，并确保您的视频流仅在您的授权播放器中播放。
> 
> **细粒度的访问控制**
> 
> 准确确定您的内容显示的时间和地点，以遵守内容许可限制、全球发布计划或安全的防火墙后交付。用户友好的图形界面允许您按日期、域、地理、播放器或 IP 地址限制访问。为了获得更大的控制，通过 IP 地址范围限制对敏感材料的访问，并确保内容只能从经批准的网络中访问。

## 在一天结束时...

如果您可以查看它，则可以下载它，无论您多么模糊它。

如果有办法阻止人们下载视频，那么每个视频网站都会这样做。

如果你有无限的资源，你可以结合上面列出的所有技术，让它不值得任何人花时间。但是，在您付出所有努力之后，观众总是可以设置许多屏幕捕获程序之一，以将所有视频录制到他们的硬盘驱动器上。

这取决于您，以及您对视频的警惕程度。请记住，您花费的精力和时间使翻录视频变得更加困难，这与普通付费客户获取和使用内容的难度成正比。

更多信息：

*   [如何使视频无法下载？](https://superuser.com/questions/601196/can-i-make-a-video-not-downloadable)
*   [Vimeo 隐私设置](https://vimeo.com/help/faq/privacy)
*   [视频流服务 | 在线流媒体视频 | 明洞](http://www.brightcove.com/en/online-video-platform/delivery)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-26T16:46:09.883

也许有点太晚了，但我把它放在这里是为了帮助其他人。

正如其他人所说，一旦内容到达某人的计算机，就无法保护内容。但是我们可以通过设置一些障碍来防止不受控制的内容共享。

我注意到许多网站（包括linkedin、pluralsight 和许多其他网站）使用的一种方法是使用哈希保护授权信息的资源url。此类令牌包含足够的信息，用于识别要提供的内容以及 URL 有效的时间范围。

假设您要保护的视频是：example.com/videos/1234.mp4 这是一个示例，说明您如何在第一次请求资源时生成令牌（在您对用户进行身份验证并完成其他验证之后）：

```
validFrom = unixTimestamp
validTo = unixTimestamp
video = 1234.mp4
privateKey = yourSecretKey

token = HASH(validFrom.validTo.videoUrl.privateKey) 
```

现在，创建一个包含所有上述信息的 url，不包括私钥。您的最终网址将是这样的：

```
example.com/video?validfrom=1566831998&validto=1566839198&path=1234.mp4k&hash=HhgcWmRViYeQLn4AZoQvkVXotPU 
```

现在，每当对路径 /video 的视频发出请求时，您都会从 url 中获取所有参数（不包括哈希），并像之前一样从参数和您的私钥中创建一个哈希命令。如果您刚刚生成的散列与 URL 中包含的散列匹配，则可以说该 url 是有效且未经调整的。JWT 身份验证中使用了相同的技术，并且非常有效。因为您不必在任何数据库中存储或检索信息。这使得它非常快速且易于实施。

验证令牌后，您可以将 FileStream 返回到 url 中请求的媒体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T17:22:59.293

如果它是一个小且不太动态的组，那么 youtube 或 vimeo 可能是一个可能的选择。但它不可扩展。如果您有一个动态的观众群，成员可能会在不同的时间加入和离开，那么您需要在您自己的服务器上加密视频。现在最大的挑战将是密钥分配。您需要有一个密钥方案，以便每个用户都有一个唯一的密钥，但用于加密视频的密钥是相同的。这是一种可能的方法：[https](https://sparrow.ece.cmu.edu/group/pub/old-pubs/elk.pdf) ://sparrow.ece.cmu.edu/group/pub/old-pubs/elk.pdf 您可能想要查看的其他算法是：MARKS、LKH 等。

# iphone - 如何更改视频方向

> ID：11232297
> 
> 赞同：2
> 
> 时间：2012-06-27T17:59:48.553
> 
> 标签：iphone, objective-c, ios, video.js

我目前有一个 iPhone 应用程序，它允许用户拍摄视频，将其上传到服务器，并允许其他人从应用程序查看他们的视频。**直到我去制作一个网站来查看不同的视频**（以及其他内容）之前，视频的方向从来没有问题。

我使用来自网络服务的视频，并使用 videojs 使用 ajax 加载它们，但它们中的每一个都向左旋转 90 度。从我读过的内容来看，听起来方向信息可以在 iOS 中读取，但不能在网站上读取。在发送到服务器之前，**有什么方法可以在 iphone 上保存视频的新方向？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-20T09:49:37.793

```
//change Orientation Of video 

//in videoorientation.h 

#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
@interface videoorientationViewController : UIViewController
@property AVMutableComposition *mutableComposition;
@property AVMutableVideoComposition *mutableVideoComposition;
@property AVMutableAudioMix *mutableAudioMix;
@property AVAssetExportSession *exportSession;
- (void)performWithAsset : (NSURL *)moviename;
@end

In //viewcontroller.m 

- (void)performWithAsset : (NSURL *)moviename
{

    self.mutableComposition=nil;
    self.mutableVideoComposition=nil;
    self.mutableAudioMix=nil;

//    NSString* filename = [NSString stringWithFormat:@"temp1.mov"];
//    
//    NSLog(@"file name== %@",filename);
//    
//    [[NSUserDefaults standardUserDefaults]setObject:filename forKey:@"currentName"];
//    NSString* path = [NSTemporaryDirectory() stringByAppendingPathComponent:filename];

    // NSLog(@"file number %i",_currentFile);

    // NSURL* url = [NSURL fileURLWithPath:path];

    // NSString *videoURL = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"];

    AVAsset *asset = [[AVURLAsset alloc] initWithURL:moviename options:nil];

    AVMutableVideoCompositionInstruction *instruction = nil;
    AVMutableVideoCompositionLayerInstruction *layerInstruction = nil;
    CGAffineTransform t1;
    CGAffineTransform t2;

    AVAssetTrack *assetVideoTrack = nil;
    AVAssetTrack *assetAudioTrack = nil;
    // Check if the asset contains video and audio tracks
    if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) {
        assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo][0];
    }
    if ([[asset tracksWithMediaType:AVMediaTypeAudio] count] != 0) {
        assetAudioTrack = [asset tracksWithMediaType:AVMediaTypeAudio][0];
    }

    CMTime insertionPoint = kCMTimeZero;
    NSError *error = nil;

    // Step 1
    // Create a composition with the given asset and insert audio and video tracks into it from the asset
    if (!self.mutableComposition) {

        // Check whether a composition has already been created, i.e, some other tool has already been applied
        // Create a new composition
        self.mutableComposition = [AVMutableComposition composition];

        // Insert the video and audio tracks from AVAsset
        if (assetVideoTrack != nil) {
            AVMutableCompositionTrack *compositionVideoTrack = [self.mutableComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
            [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetVideoTrack atTime:insertionPoint error:&error];
        }
        if (assetAudioTrack != nil) {
            AVMutableCompositionTrack *compositionAudioTrack = [self.mutableComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
            [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetAudioTrack atTime:insertionPoint error:&error];
        }

    }

    // Step 2
    // Translate the composition to compensate the movement caused by rotation (since rotation would cause it to move out of frame)
    t1 = CGAffineTransformMakeTranslation(assetVideoTrack.naturalSize.height, 0.0);
        float width=assetVideoTrack.naturalSize.width;
    float height=assetVideoTrack.naturalSize.height;
    float toDiagonal=sqrt(width*width+height*height);
    float toDiagonalAngle = radiansToDegrees(acosf(width/toDiagonal));
    float toDiagonalAngle2=90-radiansToDegrees(acosf(width/toDiagonal));

    float toDiagonalAngleComple;
    float toDiagonalAngleComple2;
    float finalHeight = 0.0;
    float finalWidth = 0.0;

    float degrees=90;

    if(degrees>=0&&degrees<=90){

        toDiagonalAngleComple=toDiagonalAngle+degrees;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));

        t1 = CGAffineTransformMakeTranslation(height*sinf(degreesToRadians(degrees)), 0.0);
    }
    else if(degrees>90&&degrees<=180){

        float degrees2 = degrees-90;

        toDiagonalAngleComple=toDiagonalAngle+degrees2;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees2;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));

        t1 = CGAffineTransformMakeTranslation(width*sinf(degreesToRadians(degrees2))+height*cosf(degreesToRadians(degrees2)), height*sinf(degreesToRadians(degrees2)));
    }
    else if(degrees>=-90&&degrees<0){

        float degrees2 = degrees-90;
        float degreesabs = ABS(degrees);

        toDiagonalAngleComple=toDiagonalAngle+degrees2;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees2;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));

        t1 = CGAffineTransformMakeTranslation(0, width*sinf(degreesToRadians(degreesabs)));

    }
    else if(degrees>=-180&&degrees<-90){

        float degreesabs = ABS(degrees);
        float degreesplus = degreesabs-90;

        toDiagonalAngleComple=toDiagonalAngle+degrees;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));

        t1 = CGAffineTransformMakeTranslation(width*sinf(degreesToRadians(degreesplus)), height*sinf(degreesToRadians(degreesplus))+width*cosf(degreesToRadians(degreesplus)));

    }

    // Rotate transformation
    t2 = CGAffineTransformRotate(t1, degreesToRadians(degrees));
    //t2 = CGAffineTransformRotate(t1, -90);

    // Step 3
    // Set the appropriate render sizes and rotational transforms
    if (!self.mutableVideoComposition) {

        // Create a new video composition
        self.mutableVideoComposition = [AVMutableVideoComposition videoComposition];
        // self.mutableVideoComposition.renderSize = CGSizeMake(assetVideoTrack.naturalSize.height,assetVideoTrack.naturalSize.width);
        self.mutableVideoComposition.renderSize = CGSizeMake(finalWidth,finalHeight);

        self.mutableVideoComposition.frameDuration = CMTimeMake(1,30);

        // The rotate transform is set on a layer instruction
        instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
        instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [self.mutableComposition duration]);
        layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:(self.mutableComposition.tracks)[0]];
        [layerInstruction setTransform:t2 atTime:kCMTimeZero];

    } else {

        self.mutableVideoComposition.renderSize = CGSizeMake(self.mutableVideoComposition.renderSize.height, self.mutableVideoComposition.renderSize.width);

        // Extract the existing layer instruction on the mutableVideoComposition
        instruction = (self.mutableVideoComposition.instructions)[0];
        layerInstruction = (instruction.layerInstructions)[0];

        // Check if a transform already exists on this layer instruction, this is done to add the current transform on top of previous edits
        CGAffineTransform existingTransform;

        if (![layerInstruction getTransformRampForTime:[self.mutableComposition duration] startTransform:&existingTransform endTransform:NULL timeRange:NULL]) {
            [layerInstruction setTransform:t2 atTime:kCMTimeZero];
        } else {
            // Note: the point of origin for rotation is the upper left corner of the composition, t3 is to compensate for origin
            CGAffineTransform t3 = CGAffineTransformMakeTranslation(-1*assetVideoTrack.naturalSize.height/2, 0.0);
            CGAffineTransform newTransform = CGAffineTransformConcat(existingTransform, CGAffineTransformConcat(t2, t3));
            [layerInstruction setTransform:newTransform atTime:kCMTimeZero];
        }

    }

    // Step 4
    // Add the transform instructions to the video composition
    instruction.layerInstructions = @[layerInstruction];
    self.mutableVideoComposition.instructions = @[instruction];

    // Step 5
    // Notify AVSEViewController about rotation operation completion
    // [[NSNotificationCenter defaultCenter] postNotificationName:AVSEEditCommandCompletionNotification object:self];

    [self performWithAssetExport];
}

- (void)performWithAssetExport
{
    // Step 1
    // Create an outputURL to which the exported movie will be saved

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *outputURL = paths[0];
    NSFileManager *manager = [NSFileManager defaultManager];
    [manager createDirectoryAtPath:outputURL withIntermediateDirectories:YES attributes:nil error:nil];
    outputURL = [outputURL stringByAppendingPathComponent:@"output.mov"];
    // Remove Existing File
    [manager removeItemAtPath:outputURL error:nil];

    // Step 2
    // Create an export session with the composition and write the exported movie to the photo library
    self.exportSession = [[AVAssetExportSession alloc] initWithAsset:[self.mutableComposition copy] presetName:AVAssetExportPreset1280x720];

    self.exportSession.videoComposition = self.mutableVideoComposition;
    self.exportSession.audioMix = self.mutableAudioMix;
    self.exportSession.outputURL = [NSURL fileURLWithPath:outputURL];
    self.exportSession.outputFileType=AVFileTypeQuickTimeMovie;

    [self.exportSession exportAsynchronouslyWithCompletionHandler:^(void){
        switch (self.exportSession.status) {
            case AVAssetExportSessionStatusCompleted:

                //[self playfunction];

                [[NSNotificationCenter defaultCenter]postNotificationName:@"Backhome" object:nil];

                // Step 3
                // Notify AVSEViewController about export completion
                break;
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Failed:%@",self.exportSession.error);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Canceled:%@",self.exportSession.error);
                break;
            default:
                break;
        }
    }];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:28:59.307

似乎出现此问题是因为 videojs 无法读取方向。这里的信息：http: [//help.videojs.com/discussions/problems/1508-video-orientation-for-iphone-wrong](http://help.videojs.com/discussions/problems/1508-video-orientation-for-iphone-wrong)

根据隐含的解决方案，您应该检查以确保在保存视频时使用 AVFramework 设置方向值。之前的堆栈溢出帖子中提供了有关如何执行此操作的信息：[如何使用 AVFoundation 为逐帧生成的视频设置方向？](https://stackoverflow.com/questions/7697026/how-do-i-set-the-orientation-for-a-frame-by-frame-generated-video-using-avfounda)

# c++ - C++：指针改变？

> ID：11232298
> 
> 赞同：0
> 
> 时间：2012-06-27T17:59:52.747
> 
> 标签：c++, pointers, memory-management

就在我以为我能很好地掌握指针的时候，我又感到困惑了。您的见解可能会有所帮助。

我想我可以用非常笼统的术语来说明让我感到困惑的地方，例如：

a) 如果我写`A* p = new A()`；（`A`某个类在哪里），然后做类似的事情`(*p).do_stuff()`，那么指向的对象`p`可能会在内存中移动，那么为什么还要`p`指向我的对象呢？

b) 类和类的成员变量如何存储在内存中。

但也许我更具体地告诉你我遇到的问题更有用。假设我有一个`Car`具有成员变量的类`Engine engine_;`（`Engine`其他类在哪里）。美好的。现在假设由于某种原因我想创建一个类，该类有一个成员变量，该成员变量是指向 a 的指针`Engine`，例如：

```
class Car
{
    friend Repair;
public:
    Car() {engine_ = Engine();}
private:
    Engine engine_;
};

class Repair
{
public:
    Repair(const Car &car) : engine_(&(car.engine_)) {}
private:
    Engine *engine_;
}; 
```

没有机会`repair.engine_`总是指向我汽车的引擎，有吗（？）但即使在第二个版本中：

```
class Car
{
    friend Repair;
public:
    Car() {engine_ = new Engine();}
    ~Car() {delete engine_;}
private:
    Engine *engine_;
};
// Maybe I need/should write consts somewhere, not sure

class Repair
{
public:
    Repair(const Car &car) : engine_(car.engine_) {}
private:
    Engine *engine_;
}; 
```

尽管这似乎更有可能奏效，但我不知道/理解它是否会......

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:02:50.857

> 如果我写`A* p = new A();`（`A`某个类在哪里），然后做类似的事情`(*p).do_stuff()`，那么 p 指向的对象可能会在内存中移动

不，不会的。（至少，`*p`会保持原样；如果它本身有指针成员，那么那些可能会被重置以指向其他地方。）

> 类和类的成员变量如何存储在内存中

作为位。

```
class Foo {
    int i;
    char *p;

  public:
     void bla();
}; 
```

将表示为`int`（可能是 32）的位，然后是指针（32 或 64）的位，中间可能有一些填充。该方法不会占用您的实例中的空间，它是单独存储的。

至于你的例子，我并不完全理解这个问题。如果对象还活着，它应该可以工作，并且只要对象`Car`还活着，它就不会重置它。（不过，它看起来并不特别健壮。）`Engine*``Repair`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:08:10.763

在情况 1) 和情况 2) 中，不能保证`repair.engine_`始终指向您的汽车，因为它是朋友类而不是“汽车”类的成员

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:10:50.307

正如其他人所说，当您执行诸如`(*p).do_stuff();`. 你一定误解了你在某个时候学到的东西。

对于您的第二个问题，成员函数和成员变量存储在内存中的不同位置。成员函数的代码只为每个类生成一次，而不是为类的每个实例生成一次。此代码存储在内存中的某个位置。

至于成员变量，这就是人们在提到您的对象在内存中的位置时所谈论的内容。例如，如果你有一个像

```
class MyClass{
  private:
    int a;
    int b;
    double c;
  public:
    void fun();
}; 
```

我们假设它的一个实例存储在内存位置 0x0000，这意味着它`a`位于位置 0x0000，b 位于 0x0004，c 位于 0x0008（或类似的东西，取决于内存的布局方式）。该函数`fun()`完全存储在其他地方。

现在如果我们创建另一个实例`MyClass`，它的`a`变量可能在 0x000C，它`b`可能在 0x0010，它`c`在 0x0014。最后，它与第一个实例`fun()`的位置完全相同`fun()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:12:03.753

C++ 中分配的指针`new`不会移动。您可能会想到`malloc`，其中可以`realloc`'d 指针并因此可能会转到新位置。

Bjarne Stroustrup 认为 C++ 容器通常提供了一种更好的方式来处理希望拥有动态大小的内存：

[http://www2.research.att.com/~bs/bs_faq2.html#renew](http://www2.research.att.com/~bs/bs_faq2.html#renew)

为了允许内存的移动和重组，一些系统使用抽象句柄，这些句柄需要锁定到指针中才能使用它们……例如 Windows：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366584(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366584(v=vs.85).aspx)

在需要进行某种定期内存碎片整理的系统中，使用您锁定到指针中的抽象内容可能是有意义的。但是默认情况下，C++ 不会为这种间接方式付出代价，只有在有意义的情况下才会实现它。

*（不利的一面是，如果您分配一百万个对象然后删除其中的 999,999 个，则使用不可移动的指针......剩下的一个对象可能会一直坐在地址空间的顶部。操作系统/分页系统是应该比让它成为问题更聪明,但是如果您的分配器是自定义的,这可能会使您的堆变大.例如：如果您使用内存映射文件作为对象的后备存储.. .您将被一个大且大部分为空的磁盘文件所困。）*

# c# - 如何将 Ajax 发布到 Handler.ashx 安全并停止直接调用处理程序

> ID：11232300
> 
> 赞同：0
> 
> 时间：2012-06-27T18:00:03.157
> 
> 标签：c#, javascript, jquery, asp.net, vb.net

在网站环境中，如何安全地向 Handler.ashx 发布 ajax 帖子，如何阻止人们直接调用该 handler.ashx 并将垃圾放入服务器端并可能破坏服务器端？

使用 firefox 和 firebug，您几乎可以快速轻松地破解帖子。

我在想这些想法。

1.  在处理程序中检查您是否已登录。
2.  站点加载时的列表项创建一个唯一 ID 保存为 cookie，当调用处理程序时，该 ID 必须存在于 Ajax 和处理程序中
3.  ajax调用必须来自某个页面的列表项

你还有其他建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:01:21.160

**简短的回答**

使用身份验证（[Windows](http://msdn.microsoft.com/en-us/library/907hb5w9)、[Forms](http://msdn.microsoft.com/en-us/library/9wff0kyh)等）并验证您的输入。

**稍微长一点的回答**

如果您的站点配置了身份验证提供程序，您的处理程序将遵循相同的规则。

您应该始终验证任何用户输入或 Web 服务输入。不要假设您的客户正在为您提供原始输入。正如您所提到的，任何具有基本 Web 开发技能的人都可以欺骗 POST。验证时请记住这一点。

# objective-c - 核心数据：实体修改

> ID：11232302
> 
> 赞同：2
> 
> 时间：2012-06-27T18:00:06.197
> 
> 标签：objective-c, core-data

我是 Core Data 的新手，在文档中找不到答案（但我确定它在某个地方）：

我为我的实体定义了属性并测试了我的第三版应用程序（ASOC、ObjC、ObjC+CoreData）：我编写、读取、创建和删除对象、撤消/重做操作、自动保存，一切都像一个魅力那一刻（Stefan，我的旧字典不见了，取而代之的是......好吧......我想管理的对象）

我正在以二进制格式保存我的文件。图像、图标、rtfd 文本是“转换”类型的属性，因为通过数据绑定图像是一种已弃用的方式，它会发出警告（一次）。

现在：如果我决定向实体添加属性怎么办？以前的文件变得不可读！该应用程序发出警报：

> 无法打开文档“xxx”。文件格式不正确

我想Apple已经实现了一种“向后兼容性”，因为文件是用键/属性存档的：当我存档一些字典时，我可以毫无问题地添加或删除键......</p>

欢迎任何链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:31:51.860

如果我理解正确，您更改了核心数据模型并希望将它与您之前使用的二进制存储一起使用。如果是这个问题，您需要进行核心数据迁移，其整个过程在此处描述。

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

# security - 使用 cookie 和 java 创建一个非常安全的登录

> ID：11232304
> 
> 赞同：3
> 
> 时间：2012-06-27T18:00:08.677
> 
> 标签：security, playframework, playframework-2.0

我正在使用 play framework2 设计一个非常安全的登录机制。由于 Play 没有会话的概念并将内容保存在 cookie 中（我喜欢），我想知道我需要考虑哪些安全措施。我们显然将使用 SSL 来传达登录凭据，并且 cookie 将是一些用户信息的加密值，例如他们的电子邮件或用户 ID。是否有人可以嗅探该 cookie 或从另一个用户的 cookie 中获取并重新使用它？我怎样才能使它更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:47:56.513

事实上，cookie 没有加密。它已签名。此签名来自您的 application.conf 中的 application.secret。

这意味着任何人都可以看到 cookie 的内容（并最终尝试欺骗其他会话或更改他们的登录名/id/令牌...）

从播放文档：

> 当然，cookie 值使用密钥签名，因此客户端无法修改 cookie 数据（否则将失效）。

我不是安全专家，但是，如果您将应用程序保密，对我来说就足够了。

欢迎大家讨论签名的实力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:30:53.550

好吧，如果您希望它真正安全，您应该通过 SSL 进行一般通信，而不仅仅是登录。否则有人可以获得 Cookie。使用 cookie 解决方案或更好的播放会话的主要问题是您没有会话超时。所以想象一下，如果我能够获得 cookie，我可以永远使用这个用户帐户。所以你需要像会话超时这样的东西。如果来自同一个客户端的请求不止一个，这将变得非常棘手，因为两者都试图更改同一个 cookie。一种解决方法是通过缓存处理会话超时，但请记住，如果您在集群中运行，则需要分布式缓存解决方案。

您可以尝试在我编写的安全解决方案[https://launchpad.net/permsec上关注更改。](https://launchpad.net/permsec)这是我必须做的一个开放的待办事项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T07:32:36.427

如果存在窃听通信和窃取 cookie 的风险，您可以让攻击者的操作更加困难。例如，在签名的 cookie 中添加计算机的 IP 地址。如果其他人窃取了它，他将不得不使用与受害者相同的 IP 地址。这并非不可能，但它提高了标准。

# css - CSS Margin-Top with Percentage -- 跨浏览器问题

> ID：11232307
> 
> 赞同：1
> 
> 时间：2012-06-27T18:00:20.063
> 
> 标签：css

我正在处理 CSS 中的叠加层并遇到了跨浏览器问题。覆盖高度应为视口的 80% 并垂直居中。（元素的 80% 高度，-40% 上边距，50% 从顶部绝对定位）。

下面的小提琴适用于 Chrome，但不适用于 Firefox .. 问题似乎是 margin-top 的百分比。确保调整浏览器大小以查看完整效果。

**小提琴：http:** [//jsfiddle.net/DEn6r/1/](http://jsfiddle.net/DEn6r/1/)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:14:32.040

由于您对`top`和都使用百分比`margin-top`，因此您可以将它们组合起来，然后简单地使用`top: 10%`.

看到这个演示：http: [//jsfiddle.net/jackwanders/DEn6r/3/](http://jsfiddle.net/jackwanders/DEn6r/3/)

此外，如果您想删除负左边距，您可以使用此技巧将 div 水平居中：

```
#inside {
  position: absolute;
  width: 300px;
  height: 80%;
  top: 10%;
  left: 0;
  right: 0;  // set left and right to 0
  margin: 0 auto; // set left and right margins to auto
  background: white;
} 
```

# jquery - 如何通过“选择”插件使用 jQuery 验证？

> ID：11232310
> 
> 赞同：80
> 
> 时间：2012-06-27T18:00:30.450
> 
> 标签：jquery, jquery-validate, jquery-chosen

我有一些`<select>`使用[所选插件](http://harvesthq.github.com/chosen/)的输入，我想在客户端验证为“必需”。由于“选择”隐藏了实际的选择元素并创建了一个带有 div 和 span 的小部件，因此原生 HTML5 验证似乎无法正常工作。表单不会提交（这很好），但没有显示错误消息，因此用户不知道出了什么问题（这不好）。

我已经求助于 jQuery 验证插件（我最终还是打算使用它），但到目前为止还没有任何运气。这是我的[测试用例](http://jsfiddle.net/mrZF5/4/)：

```
<form>
    <label>Name: <input name="test1" required></label>
    <label>Favorite Color:
        <select name="test2" required>
            <option value=""></option>
            <option value="red">Red</option>
            <option value="blue">Blue</option>
            <option value="green">Green</option>
        </select>
    </label>
    <input type="submit">
</form> 
```

```
$(document).ready(function(){
    $('select').chosen();
    $('form').validate();
}); 
```

这是让`select`空值通过，而不验证或显示错误消息。当我注释掉该`chosen()`行时，它工作正常。

如何`chosen()`使用 jQuery 验证插件验证输入，并显示无效输入的错误消息？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-06-26T11:55:39.213

jQuery validate 忽略了隐藏元素，并且由于 Chosen 插件将`visibility:hidden`属性添加到选择中，请尝试：

`$.validator.setDefaults({ ignore: ":hidden:not(select)" }) //for all select`

或者

`$.validator.setDefaults({ ignore: ":hidden:not(.chosen-select)" }) //for all select having class .chosen-select`

`validate()`在函数之前添加这一行。这对我来说可以。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-27T18:54:38.340

jQuery 验证不会选择隐藏的元素，但您可以强制它验证单个元素。有点hack，但以下将起作用：

```
$('form').on('submit', function(e) {
    if(!$('[name="test2"]').valid()) {
        e.preventDefault();
    }
}); 
```

要仅选择“选择”元素，您可以使用`$('.chzn-done')`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-27T08:00:53.053

在我的。

我的表单有“验证”类，每个输入元素都有“必需”类 html 代码：

```
<form id="ProdukProdukTambahForm" class="validate form-horizontal" accept-charset="utf-8" method="post" enctype="multipart/form-data" action="/produk-review/produk/produkTambah" novalidate="novalidate">
     <div class="control-group">
        <label class="control-label" for="sku">SKU</label>
        <div class="controls">
           <input id="sku" class="required span6" type="text" name="sku">
        </div>
     </div>
     <div class="control-group">
        <label for="supplier" class="control-label">Supplier</label>
        <div class="controls">
            <select name="supplier" id="supplier" class='cho span6 {required:true} '>                                           
                <option value=''>-- PILIH --</option>
                <?php
                foreach ($result as $res)
                    {
                    echo '<option value="'.$res['tbl_suppliers']['kode_supplier'].'">'.$res['tbl_suppliers']['nama_supplier'].'</option>';
                    }
                ?>
            </select>
         </div>
      </div>
</form> 
```

和用于选择与 jquery 验证的 javascript 代码

```
$(document).ready(function() {
    // - validation
    if($('.validate').length > 0){
        $('.validate').validate({
            errorPlacement:function(error, element){
                    element.parents('.controls').append(error);
            },
            highlight: function(label) {
                $(label).closest('.control-group').removeClass('error success').addClass('error');
            },
            success: function(label) {
                label.addClass('valid').closest('.control-group').removeClass('error success').addClass('success');
            },
            //validate choosen select (select with search)
            ignore: ":hidden:not(select)"
        });
    }
    // - chosen, add the text if no result matched
    if($('.cho').length > 0){
        $(".cho").chosen({no_results_text: "No results matched"});
    }
}); 
```

注意：如果输入值为空，类错误将附加到父'div'

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T07:02:34.770

//您可以通过使用另一种方式来隐藏您选择的元素来解决此问题。例如....

```
$(document).ready(function() {
 $.validator.addMethod(     //adding a method to validate select box//
            "chosen",
            function(value, element) {
                return (value == null ? false : (value.length == 0 ? false : true))
            },
            "please select an option"//custom message
            );

    $("form").validate({
        rules: {
            test2: {
                chosen: true
            }
        }
    });
    $("[name='test2']").css("position", "absolute").css("z-index",   "-9999").chosen().show();

    //validation.....
    $("form").submit(function()
    {
        if ($(this).valid())
        {alert("valid");
    //some code here 
        }
        return false;

    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-17T16:01:16.063

为了使用 selected.js，我不得不放在`$.validator.setDefaults({ ignore: ":hidden:not(.chosen-select)" })`
外面。`$(document).ready(function())`

[https://stackoverflow.com/a/10063394/4063622](https://stackoverflow.com/a/10063394/4063622)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-25T13:12:10.983

这个简单的 CSS 规则适用于 joomla 3 的 selected 实现

Chosen 将类无效添加到隐藏的选择输入，因此使用它来定位选定的选择框

```
.invalid, .invalid + div.chzn-container a {
    border-color: red !important;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-05T20:22:29.820

You might also running into trouble that error message is displayed before Chosen dropdownlist. I found out the solution to resolve this issue and paste my code here to share with you

HTML:

```
<label class="col-sm-3">Select sponsor level *</label>
<asp:DropDownList ID="ddlSponsorLevel" runat="server" CssClass="col-sm-4 required" ClientIDmode="Static" />
<label class="error" id="ddlSponsorLevel-error" for="ddlSponsorLevel"></label> 
```

Javascript:

```
if (!$('#ddlSponsorLevel').valid()) {
       $('#ddlSponsorLevel-error').text("You must choose a sponsor level");
            return false;
} 
```

Jquery Validation actually added a hidden label html element. We can re-define this element with same ID on different place to overwrite original place.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-07T23:44:21.947

我花了大约一天的时间来解决这个问题，但一点运气都没有！然后我查看了 Vtiger 使用的源代码，发现了黄金！即使他们使用的是旧版本，他们也有钥匙！你必须使用

```
data-validation-engine="validate[required]" 
```

如果你不这样做，并且你有它，类是通过类传递的，用于选择的类被应用于选择的对象，它认为你选择的永远不会更新。如果您不将课程传递给所选的课程，这应该是一个问题，但是如果您这样做是唯一可行的方法。

这是选择 1.4.2 validationEngine 2.6.2 和 jquery 2.1.4

```
// binds form submission and fields to the validation engine
jQuery("#FORMNAME").validationEngine({
    prettySelect : true,
    useSuffix: "_chosen"
    //promptPosition : "bottomLeft"
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-07T15:41:49.543

@Anupal 让我走上了正确的道路，但不知何故我需要一个复杂的修复

# 可以`.chosen`考虑

**javascript**

```
$.validator.setDefaults({ ignore: ":hidden:not(.chosen)" }) 
```

或者你给你选择的任何其他名字。这是全局配置。考虑设置在顶层

# 为所选内容创建自定义规则

感谢[BenG](https://stackoverflow.com/a/33941303/1358777)

**html**

```
<select id="field" name="field" class="chosen" data-rule-chosen-required="true">
    <option value="">Please select…&lt;/option>
</select> 
```

**javascript**

同样，`$.validator`对象的全局配置。可以放在上一条命令旁边

```
$.validator.addMethod('chosen-required', function (value, element, requiredValue) {
    return requiredValue == false || element.value != '';
}, $.validator.messages.required); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-04T09:55:18.640

You can also try this:

```
$('form').on('submit', function(event) {
    event.preventDefault();
    if($('form').valid() == true && $('.select-chosen').valid() == true){
        console.log("Valid form");
    } else {
        console.log("Invalid form");
    }
}); 
```

Remember to add `.select-chosen` class on each `select`s.

`$('.select-chosen').valid()` forces the validation for the hidden `select`s

[http://jsfiddle.net/mrZF5/39/](http://jsfiddle.net/mrZF5/39/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-18T21:40:22.763

```
jQuery("#formID").validationEngine({
     prettySelect : true,
     useSuffix: "_chzn"
}); 
```

[jQuery-Validation-Engine/demoChosenLibrary](https://github.com/posabsolute/jQuery-Validation-Engine/blob/master/demos/demoChosenLibrary.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-10T20:00:03.180

我认为这是更好的解决方案。

```
//trigger validation onchange
$('select').on('change', function() {
    $(this).valid();
});

$('form').validate({
    ignore: ':hidden', //still ignore Chosen selects
    submitHandler: function(form) { //all the fields except Chosen selects have already passed validation, so we manually validate the Chosen selects here            
        var $selects = $(form).find('select'),
            valid = true;
        if ($selects.length) {
            //validate selects
            $selects.each(function() {
                if (!$(this).valid()) {
                    valid = false;
                }
            });
        }
        //only submit the form if all fields have passed validation
        if (valid) {
            form.submit();
        }
    },
    invalidHandler: function(event, validator) { //one or more fields have failed validation, but the Chosen selects have not been validated yet
        var $selects = $(this).find('select');     
        if ($selects.length) {
            validator.showErrors(); //when manually validating elements, all the errors in the non-select fields disappear for some reason

            //validate selects
            $selects.each(function(index){
                validator.element(this);
            })
         }
    },
    //other options...
}); 
```

**注意：**您还需要更改`errorPlacement`回调以处理显示错误。如果您的错误消息在该字段旁边，您将需要使用`.siblings('.errorMessageClassHere')`（或其他方式，取决于 DOM）而不是`.next('.errorMessageClassHere')`.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-19T10:37:24.493

您可以对“选择”插件使用 jQuery 验证。对我来说工作得很好。

```
$('.chosen').chosen({
        allow_single_deselect: true
    });
    $.validator.setDefaults({ ignore: ":hidden:not(select)" });
        $('form').validate({
            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
        },
        unhighlight: function(element) {
            $(element).closest('.form-group').removeClass('has-error');
        },
        errorElement: 'span',
        errorClass: 'help-block text-danger',
        errorPlacement: function(error, element) {
            if(element.parent('.input-group').length) {
                error.insertAfter(element.parent());
            } else {
                error.insertAfter(element.parent());
            }
        }
    }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-24T11:34:16.027

感谢这个答案[https://stackoverflow.com/a/40310699/4700162](https://stackoverflow.com/a/40310699/4700162)我解决了这个问题：

在文件 Chosen.jquery.js 中，更改

```
this.form_field_jq.hide().after(this.container); 
```

有了这个：

```
this.form_field_jq.css('position', 'absolute').css('opacity', 0).after(this.container); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-13T14:06:24.130

我的表单包含有条件隐藏的字段，以防止隐藏的选定字段验证失败，我扩展了默认的忽略：隐藏进一步：

```
$.validator.setDefaults({ 
  ignore: ":hidden:not(.chosen-select + .chosen-container:visible)"  //for all select having class .chosen-select
    })
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-28T05:03:55.270

调用 selected() 后使用下面的 jquery 方法

$("#id").css("display":"").addClass("sr-only");

sr-only 是引导类

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-06T20:24:29.300

在 2018 年，我正在验证 jQuery validate 抱怨输入字段没有名称。此输入字段由 jQuery Chosen 插件附加。

[![在此处输入图像描述](../Images/b12b51e0693ad8376576e4f526adeb32.png)](https://i.stack.imgur.com/VdUE8.png)

使用 selected 时，此错误发生在其他任何事情之前。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-22T22:49:48.750

我最终通过执行以下操作解决了它：

这是针对选择 v1.8.7 的：

1.  打开 selected.js 并在第 199 行找到：

`this.form_field_jq.hide().after(this.container),`

2.  将其替换为：

`this.form_field_jq.addClass('chosen-master').after(this.container),`

3.  将这些 CSS 属性添加到该类：

```
.chosen-master {
  display: inline-block !important;
  width: 1px;
  height: 1px;
  margin: 0;
  padding: 0;
  border: 0;
} 
```

参考：[https ://stackoverflow.com/a/64491538/7353382](https://stackoverflow.com/a/64491538/7353382)

# php - 缓存文件太久有问题吗？

> ID：11232316
> 
> 赞同：0
> 
> 时间：2012-06-27T18:01:12.497
> 
> 标签：php, apache, caching, header, http-headers

前几天我发现了[https://developers.google.com/speed/pagespeed/](https://developers.google.com/speed/pagespeed/)，现在我的网站页面速度从 ~75 提高到 ~95。

它推荐的最后几件事之一是我：

```
Leverage browser caching: Setting an expiry date or a maximum age in the HTTP headers
for static resources instructs the browser to load previously downloaded resources 
from local disk rather than over the network. 
```

我的主要 javascript 和 css 文件的缓存时间设置为 2 天，Google 建议我将其设置为至少 1 周。他们还建议我对 html 和 php 文件做同样的事情。

如果我决定对网站进行大型更改并且他们昨天刚刚缓存了我的网站（1 周），我的用户会发生什么？他们会不会在 1 周后才能看到我网站上的更改？

另外，由于我的网站包含一个控制面板并有一些动态生成的 PHP 页面，是否有任何理由缓存其中的任何一个？我的服务器不会在每次登录他们的帐户时仍然通过 php 脚本搅动并生成新内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:31:52.033

您可能不想在访问者浏览器中缓存您的 HTML 和 PHP。但是，您可能希望将其缓存在您拥有更多控制权的层中，例如使用[APC进行 PHP 操作码缓存和](http://php.net/manual/en/book.apc.php)[Varnish](https://www.varnish-cache.org/)等反向代理。

对于静态资产，例如 JavaScript 和 CSS 文件，将它们缓存一年或更长时间应该是安全的。如果您对它们进行更改，您只需更新它们的 URL 即可`mystyles.css?v=123`，浏览器会认为它是一个完全不同的文件，`mystyles.css?v=122`甚至只是`mystyles.css`.

# python - 二维数组 Django

> ID：11232319
> 
> 赞同：2
> 
> 时间：2012-06-27T18:01:20.343
> 
> 标签：python, html, django, django-templates

我的 django 应用程序中有一个二维数组，我需要将其传递给 html 模板。

如何让 HTML 处理二维数组？

```
 {% block content %}

  <h2>Survey</h2>
      <form>

    {% for q in question %}   
          <p>{{q[0]}}</p>
          <p>{{q[1]}}</p>
    {% endfor %}
     <input type="submit" value="submit">
     </form>

{% endblock %} 
```

我收到错误：

```
 Could not parse the remainder: '[0]' from 'q[0]' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T18:02:26.693

```
{% block content %}

  <h2>Survey</h2>
      <form>

    {% for q in question %}   
          <p>{{q.0}}</p>
          <p>{{q.1}}</p>
    {% endfor %}
     <input type="submit" value="submit">
     </form>

{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-28T13:04:08.983

Django 只是没有将多维数组传递给模板的预设置方法。

最好的解决方法是像这样手动将列分开......（“i”对应于最终输出中的每一行）

```
data = {}    
for i, question_answer in enumerate(question_answer_pairs):
    data[i]= {
        'question':question_answer.question,
        'answer':question_answer.answer
    }
return render(request, 'survey.html', data) 
```

然后在你的模板中

```
{% block content %}

  <h2>Survey</h2>
      <form>

    {% for key,value in data.items %}   
          <p>{{value.question}}</p>
          <p>{{value.answer}}</p>
    {% endfor %}
     <input type="submit" value="submit">
     </form>

{% endblock %} 
```

# matlab - 在 MATLAB 中组合匿名函数

> ID：11232323
> 
> 赞同：2
> 
> 时间：2012-06-27T18:01:33.917
> 
> 标签：matlab, anonymous-function, cell-array

我有一个匿名函数句柄的元胞数组，并且想创建一个匿名函数，该函数返回包含每个函数输出的向量。

是）我有的：

```
ca = {@(X) f(X), @(X)g(X), ...} 
```

我想要的是：

```
h = @(X) [ca{1}(X), ca{2}(X), ...] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:39:48.103

还有另一种方法：

您可以使用[cellfun](http://www.mathworks.de/help/techdoc/ref/cellfun.html)将函数应用于每个元胞数组元素，从而为您提供一个包含相应结果的向量。诀窍是应用一个函数，将一些值插入存储在元胞数组中的函数句柄中。

```
ca = {@(X) X, @(X) X+1, @(X) X^2};
h=@(x) cellfun(@(y) y(x), ca); 
```

给

```
>> h(4)

ans =
     4     5    16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:45:21.410

您可以使用`str2func`创建匿名函数而无需求助于`eval`：

```
ca = {@sin,@cos,@tan}
%# create a string, using sprintf for any number
%# of functions in ca
cc = str2func(['@(x)[',sprintf('ca{%i}(x) ',1:length(ca)),']'])

cc = 
    @(x)[ca{1}(x),ca{2}(x),ca{3}(x)]

cc(pi/4)

ans =
    0.7071    0.7071    1.0000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:01:34.460

我发现通过命名每个函数，我可以让它们适合一个数组。我不太明白为什么会这样，但确实如此。

```
f = ca{1};
g = ca{2};

h = @(X) [f(X), g(X)]; 
```

我觉得应该有一个更简单的方法来做到这一点。因为我正在处理未知数量的函数，所以我不得不使用 eval() 来创建变量，这是一个不好的迹象。另一方面，调用新函数的工作方式与预期相同。

# java - 使用 java 线程实现的 Producer-Consumer 只将一半数据写入文件

> ID：11232346
> 
> 赞同：0
> 
> 时间：2012-06-27T18:02:45.493
> 
> 标签：java, multithreading

您好我有一个问题，我必须读取一个巨大的 csv 文件。从中删除第一个字段，然后仅将唯一值存储到文件中。我已经使用实现生产者-消费者模式的线程编写了一个程序。

CSVLineStripper 类执行顾名思义。从 csv 中取出一行，从每一行中删除第一个字段并将其添加到队列中。CSVLineProcessor 然后将该字段一一存储在数组列表中，并检查字段是否唯一，因此仅存储唯一值。Arraylist 仅供参考。每个唯一字段都写入文件。

现在发生的事情是所有字段都被正确剥离。我运行了大约 3000 行，这一切都是正确的。当我为所有行（大约 7,00,000 + 行）启动程序时，我得到不完整的记录，大约 1000 个唯一的记录没有被采用。每个字段都用双引号括起来。奇怪的是，生成的文件中的最后一个字段是一个不完整的单词，并且缺少结束双引号。为什么会这样？

```
import java.util.*;
import java.io.*;
class CSVData
{
    Queue <String> refererHosts = new LinkedList <String> ();
    Queue <String> uniqueReferers = new LinkedList <String> (); // final writable queue of unique referers

    private int finished = 0;
    private int safety = 100;
    private String line = "";
    public CSVData(){}
    public synchronized String getCSVLine() throws InterruptedException{
        int i = 0;
        while(refererHosts.isEmpty()){
            if(i < safety){
                wait(10);
            }else{
                return null;
            }
            i++;
        }
        finished = 0;
        line = refererHosts.poll();
        return line;
    }

    public synchronized void putCSVLine(String CSVLine){
        if(finished == 0){ 
            refererHosts.add(CSVLine);
            this.notifyAll();
        }
    }
}
class CSVLineStripper implements Runnable //Producer
{
    private CSVData cd;
    private BufferedReader csv;
    public CSVLineStripper(CSVData cd, BufferedReader csv){ // CONSTRUCTOR
        this.cd = cd;
        this.csv = csv;
    }
    public void run() {
        System.out.println("Producer running");
        String line = "";
        String referer = "";
        String [] CSVLineFields;
        int limit = 700000;
        int lineCount = 1;

        try {
            while((line = csv.readLine()) != null){
                CSVLineFields     = line.split(",");
                referer         = CSVLineFields[0];
                cd.putCSVLine(referer);
                lineCount++;
                if(lineCount >= limit){
                    break;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println("<<<<<< PRODUCER FINISHED >>>>>>>");
    }

    private String printString(String [] str){
        String string = "";
        for(String s: str){
            string = string + " "+s;
        }
        return string;
    }
}

class CSVLineProcessor implements Runnable
{
    private CSVData cd;
    private FileWriter fw = null;
    private BufferedWriter bw = null;

    public CSVLineProcessor(CSVData cd, BufferedReader bufferedReader){ // CONSTRUCTOR
        this.cd = cd;
        try {
            this.fw = new FileWriter("unique_referer_dump.txt");
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.bw = new BufferedWriter(fw);
    }
    public void run() {
        System.out.println("Consumer Started");
        String CSVLine = "";
        int safety = 10000;
        ArrayList <String> list = new ArrayList <String> ();

        while(CSVLine != null || safety <= 10000){
               try {
                CSVLine = cd.getCSVLine();
                if(!list.contains(CSVLine)){
                    list.add(CSVLine);
                    this.CSVDataWriter(CSVLine);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            if(CSVLine == null){
                break;
            }else{
                safety++;
            }
        }

        System.out.println("<<<<<< CONSUMER FINISHED >>>>>>>");
        System.out.println("Unique referers found in 30000 records "+list.size());
    }  
    private void CSVDataWriter(String referer){
        try {
            bw.write(referer+"\n");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public class RefererCheck2 
{
    public static void main(String [] args) throws InterruptedException
    {
        String pathToCSV = "/home/shantanu/DEV_DOCS/Contextual_Work/excite_domain_kw_site_wise_click_rev2.csv";
        CSVResourceHandler csvResHandler = new CSVResourceHandler(pathToCSV);
        CSVData cd = new CSVData();
        CSVLineProcessor consumer     = new CSVLineProcessor(cd, csvResHandler.getCSVFileHandler());
        CSVLineStripper producer     = new CSVLineStripper(cd, csvResHandler.getCSVFileHandler());
        Thread consumerThread = new Thread(consumer);
        Thread producerThread = new Thread(producer);
        producerThread.start();
        consumerThread.start();
    }
} 
```

这是示例输入的方式：

```
"xyz.abc.com","4432"."clothing and gifts","true"
"pqr.stu.com","9537"."science and culture","false"
"0.stu.com","542331"."education, studies","false"
"m.dash.com","677665"."technology, gadgets","false" 
```

队列中的生产者存储：

```
"xyz.abc.com"
"pqr.stu.com"
"0.stu.com"
"m.dash.com" 
```

消费者在文件中存储唯一性，但在打开文件内容后会看到

```
"xyz.abc.com"
"pqr.stu.com"
"0.st 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:28:46.533

几件事，你在 700k 之后打破，而不是 7m，你也没有刷新你的缓冲写入器，所以最后的东西你可能不完整，在最后添加刷新并关闭你的所有资源。调试器是个好主意:)

# python - 在 Python Tornado 中测试 iFrame “top === self”

> ID：11232351
> 
> 赞同：0
> 
> 时间：2012-06-27T18:03:05.160
> 
> 标签：python, iframe, tornado

在 Tornado 中，您可以在 HTML 中执行 if 语句，例如`{% if true %} do stuff {% end %}`. 我想检查页面是否在 iframe 中。

在 Javascript 中，它会是这样的：`if (top === self) { not in a frame } else { in a frame }`

我怎样才能在 Tornado 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:08:22.353

Javascript 可以访问浏览器上下文，但模板系统只能访问请求对象。

如果您控制有问题的 iframe 的创建，例如，如果这发生在您网站的另一部分，您可能能够将 get 参数传递给模板系统或其他东西......但通常这是您拥有的东西与javascript有关。将 javascript 直接添加到您的模板或（更好地）包含一个 javascript 文件。您可以在模板中公开页面的 iframed 和非 iframed 版本，并让 javascript 在浏览器中选择要显示的版本。

# ejb-3.0 - 由于找不到 Dozer 类，无法在 Jboss 上部署项目

> ID：11232356
> 
> 赞同：1
> 
> 时间：2012-06-27T18:03:25.513
> 
> 标签：ejb-3.0, jboss7.x, classnotfoundexception, dozer

您好我在 EJB3 项目中使用 Eclipse，struts2 和 hibernate.Server 是 JBoss 7.1。一切正常。然后我安装了 Dozer 5.2.2，***并将其添加到构建路径***中（它显示在“引用的库”文件夹中，我也检查了“配置构建路径”菜单）它在我的 Junit 测试中运行良好案例。问题是当我尝试部署 EJB 项目时，出现错误：

**引起：java.lang.ClassNotFoundException: org.dozer.DozerBeanMapper** from [Module "deployment.EJBprofile.jar:main" from Service Module Loader]

我究竟做错了什么？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:39:21.690

如果您的 EJB 和 WAR 都需要 Dozer，则可以将其安装为模块。您还可以将所有内容打包到 EAR 中并将 Dozer 库放在`EAR/lib`目录中。

还可以看看[类加载](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)是如何工作的。

# css - 在 IE 中使用伪类检查元素

> ID：11232357
> 
> 赞同：12
> 
> 时间：2012-06-27T18:03:35.840
> 
> 标签：css, internet-explorer, debugging, pseudo-class

`:hover`我正在寻找一种方法来检查使用IE中的伪类（例如 ）设置样式的元素。

我可以使用 Firebug HTML 样式下拉菜单对 Firefox 执行此操作，该下拉菜单允许浏览器将伪类应用于选定元素：

![在此处输入图像描述](../Images/9e2add81cc0c286e06ea0a14921078cf.png)

我也可以通过切换元素状态在 Chrome 中执行此操作：

![在此处输入图像描述](../Images/763ec4d736d909694c1d557fd213752d.png)

但是，我无法使用 IE 开发人员工具找到类似的选项。我尝试使用[Firebug Lite](http://getfirebug.com/firebuglite/)，但 Firefox 中存在的相同选项似乎不在 Lite 版本中。

有没有办法将伪类应用于 IE 中的元素（类似于 Firefox 和 Chrome），以便我可以看到它的样式，或者以其他方式观察 IE 中的伪类样式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:25:11.387

我从未在 IE 附带的本机开发人员工具中发现这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-24T15:46:35.987

看起来 IE 11 现在具有此功能，尽管它似乎仅适用于 Hover（和已访问的锚标签）。

![在此处输入图像描述](../Images/c68664dc6f5ab846269cd0ad4f837863.png)

# javascript - 如何在 Facebook 照片上标记人？

> ID：11232365
> 
> 赞同：0
> 
> 时间：2012-06-27T18:04:12.783
> 
> 标签：javascript, facebook-apps

我们开发了一个应用程序，结果是创建了五个朋友的 jpg。我们需要该应用程序来标记照片中的人，但无法正常工作。该代码似乎是有效的，因为我们没有收到任何错误。

```
var tagdata= new Array;

tag1['tag_uid'] =Lamigos[0];
tag1['x'] =41;
tag1['y'] =373;

tag2['tag_uid'] =Lamigos[1];
tag2['x'] =172;
tag2['y'] =373;

tag3['tag_uid'] =Lamigos[2];
tag3['x'] =302;
tag3['y'] =373;

tag4['tag_uid'] =Lamigos[3];
tag4['x'] =100;
tag4['y'] =436;

tag5['tag_uid'] =Lamigos[4];
tag5['x'] =100;
tag5['y'] =567;

tag['data']=tagdata;
tagdata[0]=tag1;
tagdata[1]=tag2;
tagdata[2]=tag3;
tagdata[3]=tag4;
tagdata[4]=tag5;

   FB.api('/me/photos', 'post', {
    message:'Ahora puedes...',
    url:"http://www.xxxxxxx.com"+imgfin,
    tags:tag
   }, function(response){

      if (!response || response.error) {
        alert('Error al compartir tu lista');
      } else {
        vercapas(6);
  document.getElementById("simgfin").src=imgfin;
  document.getElementById("botcompartir").innerHTML="<a name='fb_share' type='button_count' href='http://www.facebook.com/sharer.php?u=http://www.xxxxxxxx.com" + imgfin + "&t=Estos son mis patas más patas'>Compartir</a>";
      }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:09:52.723

[https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)并没有说`tags`在发布到 /me/photos 时接受参数。

我想您必须在发布照片*后*添加标签- 请参见此处：[https ://developers.facebook.com/docs/reference/api/photo/#tags](https://developers.facebook.com/docs/reference/api/photo/#tags)

# java - 在负数中使用 java epoch seconds

> ID：11232366
> 
> 赞同：3
> 
> 时间：2012-06-27T18:04:22.653
> 
> 标签：java, epoch, java.util.date

我正在编写一个程序，该程序涉及将 java.util.Date 转换为 java.sql.Date ...

我已经使用 getTime() 方法完成了它......

```
 java.util.Date dt = new java.util.Date();
           java.text.DateFormat df = new java.text.SimpleDateFormat("dd/MM/yyyy");
           dt=df.parse("06/12/0785");
           java.sql.Date sqldate = new java.sql.Date(dt.getTime());
           System.out.print("\n\n\n "+dt.getTime()+"    "+sqldate); 
```

我得到一个负值`dt.getTime()`并且该值是正确的`sqldate`......

我的疑问是

```
 `Is it safe to use negative seconds as epoch or is it vulnerable to bugs while implementing it in database in any way.....??? 
```

***和***

它在设置日期时为 sqldate 打印错误的日期，`00/00/0000`而不是示例中提到的日期....可能是什么原因......并且有解决方案吗......？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:11:48.593

好吧，在纪元时间内，“0”相当于 1970 年 1 月 1 日。当您尝试解析它时，任何早于该日期的日期都会出现负数。

尝试将您正在解析的日期字符串更改为 1970 年之后的任何日期，您将获得正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:11:56.817

文档说负值对 java.sql.Date 的构造函数和 setTime 方法有效：

[http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html#setTime(long](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html#setTime(long) )

我希望使用“00/00/0000”作为日期是一个问题，因为没有零月、日或年。

[http://en.wikipedia.org/wiki/0_](http://en.wikipedia.org/wiki/0_(year) (年份)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:25:32.577

如果将“00”解析为月份，则将其视为十二月。“00”日是上个月的最后一天，因此组合被解析为 11 月 30 日。至于零年，请参见[java 中的 Year 0000](https://stackoverflow.com/questions/8440480/year-0000-in-java)。.getTime() 的负值完全没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-22T12:17:42.713

旧的日期时间 API（`java.util`日期时间类型及其格式类型`SimpleDateFormat`等）已过时且容易出错。让我们首先了解如何`SimpleDateFormat`错误地处理类似这样的字符串`00/00/0000`，稍后我们将介绍现代日期时间 API 如何防止尝试处理这样的无效字符串。

以下演示将帮助我们轻松理解概念和问题：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Locale;

public class Main {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdfInput = new SimpleDateFormat("dd/MM/yyyy", Locale.ENGLISH);
        SimpleDateFormat sdfOutput = new SimpleDateFormat("dd MMMM yG", Locale.ENGLISH);
        System.out.println(sdfOutput.format(sdfInput.parse("00/00/2021")));
    }
} 
```

**输出：**

```
30 November 2020AD 
```

**关于的一些事实`SimpleDateFormat`：**

*   `SimpleDateFormat`处理月份，`1`如`January`.
*   它以循环方式处理年、月和日，这与处理方式`int`和`long`处理方式非常相似。

[![在此处输入图像描述](../Images/2a060c0f1a39a077e9bdff5306f3b6b7.png)](https://i.stack.imgur.com/jN8Ca.png)

为了完整起见，请查看以下语句的输出：

```
System.out.println(Integer.MAX_VALUE + 1); // -2147483648
System.out.println(Integer.MIN_VALUE - 1); // 2147483647 
```

基于这个概念，这就是`SimpleDateFormat`解析的方式`00/00/2021`：

*   **月，`00`：**回到上个月，即 12 月，这也意味着年份将变为 2020。
*   **Day-of-month, `00`：**回到上个月的最后一天，这也意味着 12 月将向后移动一个位置成为 11 月，11 月的最后一天是 30。

因此，输出将是 `30 November 2020AD`。

**测验：**输入字符串的输出是`-01/-01/2021`什么？

如果您的答案是：`30 October 2020AD`，则您已正确理解。

下面给出了更多示例：

```
SimpleDateFormat sdfInput = new SimpleDateFormat("dd/MM/yyyy", Locale.ENGLISH);
SimpleDateFormat sdfOutput = new SimpleDateFormat("dd MMMM yG", Locale.ENGLISH);
System.out.println(sdfOutput.format(sdfInput.parse("00/00/0000"))); // 30 November 2BC
System.out.println(sdfOutput.format(sdfInput.parse("00/-01/2021"))); // 31 October 2020AD
System.out.println(sdfOutput.format(sdfInput.parse("00/13/2021"))); // 31 December 2021AD
System.out.println(sdfOutput.format(sdfInput.parse("00/14/2021"))); // 31 January 2022AD 
```

**为什么`2BC`？**

幸运的是^(1.)没有第 0 年。在 1AD 之前，我们有 1BC。因此，我们将第 0 年称为 1BC。如果你回到一年前，那将是2BC。您想查看[此答案](https://stackoverflow.com/a/65928023/10819573)以获得更多解释。

在使用旧的日期时间 API 时，您会遇到许多这样的惊喜。由于这些原因，建议完全停止使用它并切换到`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*。

# *java.time*

让我们看看`java.time`现代 API 如何防止尝试处理这样的无效字符串：

```
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        LocalDate.parse("00/00/0000", DateTimeFormatter.ofPattern("dd/MM/uuuu", Locale.ENGLISH));
    }
} 
```

**输出：**

> 线程“主”java.time.format.DateTimeParseException 中的异常：无法解析文本“00/00/0000”：MonthOfYear 的值无效（有效值 1 - 12）：0

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^(2.)的信息。

* * *

^(1\. 否则，对于0年应该称为0AD还是0BC，它会打开一罐蠕虫。)

^(2\. 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目工作并且您的 Android API 级别仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

# forms - 在形式之外传递价值

> ID：11232370
> 
> 赞同：0
> 
> 时间：2012-06-27T18:04:52.550
> 
> 标签：forms, grails, view, controller, gsp

我需要从表单外部获取值。我的 gsp 看起来像这样

```
<g:textField name="email" value="${someInstance?.email}"/> 
<input type="button" id="checkEmail" class="button" value="Validate" onclick="checkEmail()"/>
<span id="responseDiv"></span>

<g:form action="save"> 
someCode
<g:submitButton disabled="true" style="color:#999999;" class="save" name="save" action="save" id="saveButton" value="${message(code: 'default.button.save.label', default: 'Submit')}"/>
</g:form> 
```

首先，要检查是否正在使用电子邮件，请单击按钮 (id="checkEmail")，然后 onclick 转到具有更新 responseDiv 的 remoteFunction 的 js 代码 checkEmail()。之后，用户在表单中输入信息，然后用户单击提交按钮。单击该提交按钮时，我希望我的 gsp 将电子邮件值与其他信息一起发送到控制器。有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:54:42.627

很简单，将输入放在表单中。如果由于某种原因这不是一个选项，请使用回调来更新表单内的隐藏字段，例如`$("#hiddenEmail").val(emailAddress);`

PS。我喜欢你如何给一个 span 一个 responseDiv 的 id :)

# php - preg_match_all: 警告: preg_match_all(): Unknown modifier '(' in

> ID：11232375
> 
> 赞同：0
> 
> 时间：2012-06-27T18:05:00.490
> 
> 标签：php, regex, preg-match, preg-match-all

> **可能重复：**
> [preg_match() 未知修饰符 '[' 帮助](https://stackoverflow.com/questions/3011383/preg-match-unknown-modifier-help)

我正在尝试匹配这种模式

```
 $regex_pattern = '<td id="(\w+)" class="(\w+)">(\w+).com<\/td>';
 preg_match_all($regex_pattern, $result, $matches);
 print_r($matches); 
```

但我收到此错误：警告：preg_match_all(): Unknown modifier '(' in

我的正则表达式模式有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:08:25.257

[为您的模式添加分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)

使用 PCRE 函数时，需要用分隔符将模式括起来。定界符可以是任何非字母数字、非反斜杠、非空白字符。

常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。

```
 $regex_pattern = '/<td id="(\w+)" class="(\w+)">(\w+).com<\/td>/';
 preg_match_all($regex_pattern, $result, $matches);
 print_r($matches); 
```

# ruby-on-rails - Netzke 的 Sprockets::FileOutsidePaths 错误

> ID：11232376
> 
> 赞同：0
> 
> 时间：2012-06-27T18:05:06.380
> 
> 标签：ruby-on-rails, extjs4, netzke

我有 rails 3.1.0 & ruby​​ 1.9.2 和 netzke & extjs4 一起玩。我无法将 extjs 与 rails 集成。请帮忙。

我正在关注[本](http://writelesscode.com/blog/2010/06/14/extjs-rails-crud-application-in-7-minutes/)教程

我已经为 extjs 和图标库定义了符号路径并运行了服务器。

`<%= netzke_init %>`应用程序布局中出现错误。我有以下错误：

> Welcome#index/extjs/resources/css/ext-all.css 中的 Sprockets::FileOutsidePaths 不在路径中：/home/dreamachine/mywork/netzke_task_manager/app/assets/images、/home/dreamachine/mywork/netzke_task_manager/ app/assets/javascripts, /home/dreamachine/mywork/netzke_task_manager/app/assets/stylesheets, /home/dreamachine/mywork/netzke_task_manager/vendor/assets/stylesheets, /usr/local/lib/ruby/gems/1.9.1 /gems/jquery-rails-1.0.19/vendor/assets/javascripts

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:52:11.447

从 extjs 4.1.x 切换到 4.0.7。基本上我已经切换了虚拟机，现在有了 Rails 3.2.5 ruby​​ 1.9.3 和 extjs 4.0.7，现在一切正常。

# openssl - IIS7 应用程序池无法加载具有固定基地址的库

> ID：11232383
> 
> 赞同：3
> 
> 时间：2012-06-27T18:05:40.203
> 
> 标签：openssl, iis-7.5, asp.net-4.0, fips

我的 .NET 4.0 Web 服务使用 libeay32.dll，它是在 VS2010 中使用 /FIXED 选项编译的，以便符合 FIPS。这意味着 libeay32.dll 无法加载，除非它位于某个地址 (0xfb00000)。抛出的异常是：

> System.DllNotFoundException：无法加载 DLL 'some_dependent_library.dll'：尝试访问无效地址。

我知道帮助确保 libeay32.dll 获得正确地址的唯一方法是在加载任何其他 DLL 之前在 Main() 方法中加载它（使用 kernel32.dll 中的 LoadLibrary()）。这是我在 Windows 服务和单元测试中成功使用的一种方法。但是，在我的 Web 服务中，我将 LoadLibrary 放在了 Global.asax.cs 的 Application_Start() 中，但它仍然偶尔会失败。（我查看了 procmon - 首先加载了许多其他 DLL）

有没有其他方法可以确保 libeay32.dll 获得所需的地址？当我的应用程序池启动时，但在 Application_Start() 之前，我是否可以运行代码？

# c# - C# Visual Studio GPIB 命令

> ID：11232384
> 
> 赞同：6
> 
> 时间：2012-06-27T18:05:41.640
> 
> 标签：c#, gpib

您使用什么命令与 C#、Visual Studio 中的 GPIB 仪器对话？我需要能够向仪器写入命令并读取输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-31T11:03:33.413

我使用[安捷伦 IO 库套件](https://www.keysight.com/en/pd-1985909/io-libraries-suite?nid=-33330.977662.00)。

这是在 C# 上使用它的教程：C#[中的 I/O 编程示例](http://literature.cdn.keysight.com/litweb/pdf/5991-0603EN.pdf)

尽管如此，在我的公司中，我们的 VISA-COM 实现存在稳定性问题，因此我们使用 P/Invoke 围绕 visa32.dll（也是 IO 库套件的一部分）编写了自己的包装器。

（披露：我在一家大量使用 GPIB 仪器的公司工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T15:51:40.430

我正在使用[National Instruments VISA](https://www.ni.com/visa/)和[NI 488.2](https://www.google.ch/search?q=download%20ni%20488.2)。

首先确保你`VisaNS.NET API`在 NI-VISA Setup 中勾选了，见下图：

[![在此处输入图像描述](../Images/1e37e234d6008bf1bdbb845b4a4031ab.png)](https://i.stack.imgur.com/PJp3q.png)

添加对您的项目的`NationalInstruments.VisaNS`引用`NationalInstruments.Common`。

创建一个`MessageBasedSession`，见以下代码：

```
string resourceName = "GPIB0::20::INSTR"; // GPIB adapter 0, Instrument address 20
var visa = new NationalInstruments.VisaNS.MessageBasedSession(resourceName);
visa.Write("*IDN?"); // write to instrument
string res = visa.ReadString(); // read from instrument 
```

A`MessageBasedSession`可用于通过 GPIB、以太网或 USB 与您的仪器进行通信。

**更新**

`Ivi.Visa`被取代`NationalInstruments.VisaNS`。`Ivi.Visa`因此，您应该只添加对您项目的引用。

该示例如下所示：

```
string resourceName = "GPIB0::20::INSTR"; // GPIB adapter 0, Instrument address 20
var visa = GlobalResourceManager.Open(resourceName) as IMessageBasedSession;
visa.RawIO.Write("*IDN?\n"); // write to instrument
string res = visa.RawIO.ReadString(); // read from instrument 
```

使用的好处`Ivi.Visa`是它可以与以下库之一一起使用：

*   [美国国家仪器签证](https://www.ni.com/visa/)
*   [是德科技 IO 库套件](https://www.keysight.com/find/iosuite)
*   [罗德与施瓦茨签证](https://www.rohde-schwarz.com/us/driver-pages/remote-control/3-visa-and-tools_231388.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:08:27.967

从串口发送命令。

请参阅 Microsoft 的[COM 端口示例](http://msdn.microsoft.com/en-us/library/ms173045%28v=vs.90%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-23T00:30:08.490

您应该首先使用 LangInt 类创建一个对象。然后将该对象与 GPIB 方法一起使用。最常见和最常用的是（假设您创建了一个名为“dev”的对象）；

```
dev.ibwrt(deviceHandle, "*IDN?", "*IDN?".Length);

dev.ibrd(deviceHandle, out Value, Arraysize); 
```

这两个可以查询设备。或者您可以连续使用它们，例如设置发生器的频率，然后是幅度。

重要的部分是在发送 SCPI 命令之前；您必须先初始化设备。为此使用；

```
deviceHandle = ibdev(GPIBINDEX, GPIBADDRESS, SECONDARYADDRESS, TIMEOUT, EOTMODE, EOSMODE); 
```

这些参数必须首先在代码中声明。初始化后，您可以将每个 GPIB 命令与该设备句柄一起使用。

当然，您应该将 NationalInstruments.NI4882 和 LangInt.dll 添加到您的项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-07T02:36:22.477

您可以使用 NI 签证。如果您使用 Vb 或 C#，请使用示例程序磁盘中的 Visa32.bas 或 Visa32.cs

```
int DefaultSessionId= 0;
int SessionId= 0;
int LastStatus = 0;
string Address = "GPIB0::6" ; //any address

//Session Open
LastStatus = visa32.viOpenDefaultRM(out DefaultSessionId);

//Connection Open
LastStatus = visa32.viOpen(DefaultSessionId, Address + "::INSTR", 0, 0, out sessionId);
LastStatus = visa32.viSetAttribute(SessionId, visa32.VI_ATTR_TERMCHAR, 13);// Set the termination character to carriage return (i.e., 13);
LastStatus = visa32.viSetAttribute(SessionId, visa32.VI_ATTR_TERMCHAR_EN, 1);// Set the flag to terminate when receiving a termination character
LastStatus = visa32.viSetAttribute(SessionId, visa32.VI_ATTR_TMO_VALUE, 2000);// Set timeout in milliseconds; set the timeout for your requirements

//Communication
LastStatus = visa32.viPrintf(SessionId, command + "\n");//device specific commands to write
StringBuilder message = new StringBuilder(2048);
LastStatus = visa32.viScanf(SessionId, "%2048t", message);//Readback

//Session and Connection Close
visa32.viClose(SessionId);
visa32.viClose(DefaultSessionId); 
```

[参考](http://ena.support.keysight.com/e5071c/manuals/webhelp/eng/programming/vba_programming/controlling_peripherals/programming_with_visa.htm)

# c# - DateTime.ParseExact() 不了解 24 小时时间值？

> ID：11232385
> 
> 赞同：26
> 
> 时间：2012-06-27T18:05:42.573
> 
> 标签：c#, datetime, cultureinfo

这行代码：

```
DateTime dt = DateTime.ParseExact(time, "hh:mm", CultureInfo.InvariantCulture); 
```

解析“12:45”的“时间”值就好了，但抛出“13:00”异常

我应该使用其他 CultureInfo 值，还是需要将“pm”附加到 12 以上的小时值，或者...？

错误消息是：*未处理 System.FormatException Message=String 未被识别为有效的 DateTime。*

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-27T18:12:51.433

“hh”是 12 小时制格式（01 到 12）。您需要使用“HH”表示 24 小时制。

```
DateTime dt = DateTime.ParseExact(time, "HH:mm", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:13:41.913

尝试这个：

```
DateTime dt = DateTime.ParseExact(time, "u", CultureInfo.InvariantCulture); 
```

`"u"`表示通用可排序格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T18:14:48.530

尽管 Hans 已经在评论部分回答了您的问题，但[这里](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)是一个 MSDN 链接，描述了与方法一起使用的各种日期格式`DateTime.ParseExact`。

# css - CSS将图像定位在彼此之上并制作中心栏

> ID：11232394
> 
> 赞同：1
> 
> 时间：2012-06-27T18:06:12.243
> 
> 标签：css, image, internet-explorer, position, center

嘿伙计们，我根本无法让它发挥作用。

我有一些使用边距以页面为中心的内容：auto; “诡计”。

在这个内容中，我有一个图像。我需要在图像下方制作一个彩条，一直延伸到浏览器的两侧。在右侧，我需要它看起来像是出现在图像上。

我制作了这张图片以尝试以图形方式显示我的意思：[图片](http://ronnie-jespersen.dk/help.png)

如您所见，该栏从浏览器的左侧运行到右侧。居中的图像只是放在它的顶部，然后一个图像位于图像的顶部。但我无法让这个工作。有谁愿意试一试吗？

我尝试将条形相对定位和 z-index 定位低。这行得通，但酒吧在 IE 7-8-9 中不断跳来跳去。将图像居中也不容易，将较小的图像放在顶部就更难了。如果您调整它的大小，它不会跟随浏览器。这里的问题是用户必须能够上传新图片，所以我不能只制作静态图片。

请帮助我真的迷路了

编辑：

尝试了下面的示例，但是当我在 IE 7-8-9 中运行该站点时，我得到了不同的结果。[关联](http://ronnie-jespersen.dk/test/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:43:45.957

我制作了一个应该在 Chrome 和 IE7-9 中工作的 jsFiddle：http: [//jsfiddle.net/7gaE9/](http://jsfiddle.net/7gaE9/)

**HTML**

```
<div id="container">
<div id="bar1"></div>
<img src="http://placekitten.com/200/300"/>
<div id="bar2"></div>
</div>​ 
```

**CSS**

```
#container{
   width: 100%;
    margin: 0 auto;   
    background-color: red;
    text-align: center;
    position: relative;
}
#bar1{
    background-color: blue;
    position: absolute;
    top: 50%;
    right: 0;
    z-index: 1;
    height: 30px;
    width: 40%;
}
#bar2{
    background-color: blue;
    top: 50%;
    left: 0;
    z-index: 3;
    height: 30px;
    width: 40%;
    position: absolute;
}
img{
    text-align: center;
    z-index: 2;
    position: relative;
}
​
​ 
```

这里的关键是容器是相对定位的，因此可以实现子元素相对于其父元素的绝对定位。使用 z-index 控制元素的堆叠方式。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T18:23:45.053

我用 css 使任何东西居中的方法是：

```
 .yourclass {
    width:500px;
    position:absolute;
    margin-left:50%;
    left:-250px;
    } 
```

'left' 必须具有您的宽度，然后将其设为负值。
到目前为止，我还没有遇到任何问题。

# r - 如何在 R / ggplot 中为 0 创建具有固定颜色的颜色图

> ID：11232396
> 
> 赞同：1
> 
> 时间：2012-06-27T18:06:19.827
> 
> 标签：r, colors, ggplot2

我正在使用`ggplot2`. 数据包含正值和负值，我使用`rainbow()`调色板进行着色。

我有不同的数据集，并希望以使每个数据集的最小值、最大值和 0 值分配相同颜色的方式缩放颜色。我只能找到设置最小值和最大值使用`limits=...`

我怎样才能为 0 定义一个给定的颜色？

这是我的最小示例，例如，如果我要使用彩虹（5），我希望第 3 种颜色是零颜色。

```
data <- read.csv("http://protzkeule.de/data.csv")
ggplot(data=data, aes(x=variable, y=meas)) + 
  geom_tile(aes(fill=value)) + 
  scale_fill_gradientn(colours=rev(rainbow(255)),limits=c(-.2,.4)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T17:34:33.693

也许是一种不同的方法：对于我的情节，我发现削减用于颜色的值更容易：

```
ggplot(...) +
stat_bin2d (aes(fill=ifelse(..count..>20,20,..count..)), bins = 10) +
scale_fill_gradientn("Count", colours=c("blue", "yellow", "red")) + ... 
```

# python - 在类中定义一个已经存在的 numpy 数组

> ID：11232398
> 
> 赞同：0
> 
> 时间：2012-06-27T18:06:31.027
> 
> 标签：python, arrays, class, numpy

我正在 python 中创建一个对象。我有一个来自 H5 文件的 numpy 数组，我想在其中定义。numpy 数组是`coordinates`. 我在网上四处寻找，发现了大量有关创建 numpy 数组或在 numpy 数组中创建对象的信息。但我找不到任何关于在对象中定义已经创建的 numpy 数组的信息。

```
class Node(object):
    def __init__(self, globalIndex, coordinates):

        #Useful things to record
        self.globalIndex = globalIndex
        self.coordinates = numpy.coordinates

        #Dictionaries to be used
        self.localIndices ={}
        self.GhostLayer = {} 
```

我的问题：有没有一种特定的方法可以在这个类中定义我的 numpy 数组？如果不是（我找不到任何关于它的事实让我认为它无法完成），我还能如何导入一个 numpy 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:14:33.873

```
class Node(object):
    def __init__(self, globalIndex, coordinates):

        #Useful things to record
        self.globalIndex = globalIndex
        self.coordinates = coordinates # now self.coordinates is just another name for your array 
```

假设`n = Node(some_index, numpy_coordinate_array_name)`

# google-chrome - font-variant:small-caps 在 IE 和 Firefox 上工作正常，在 Safari、Opera 和 Chrome 上看起来模糊

> ID：11232402
> 
> 赞同：0
> 
> 时间：2012-06-27T18:07:04.147
> 
> 标签：google-chrome, css, safari, opera

我页面上的文字在 Safari、Opera 和 Chrome 上看起来很模糊：http: [//testowa.portalo.pl/wiadomosci.php](http://testowa.portalo.pl/wiadomosci.php)

我正在使用这样的 CSS：

```
.tytulmalykom {
    color:#666666;
    font-size:11px;
    font-variant:small-caps;
} 
```

它在 Firefox 和 Internet Explorer 上运行良好。有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:25:52.727

大多数字体缺少小型大写字体，因此`font-variant:small-caps`浏览器会生成假的小型大写字母。他们通过转换为大写字母并减小字体大小来做到这一点。根据字体、浏览器、显示设备和其他因素，结果从可容忍到糟糕不等。除此之外，不同的浏览器在此处应用不同的大小缩减。

因此，您可以通过自己进行大小写转换和字体缩小来获得更一致的结果。如果文本是大小写混合的，它会变得很笨拙，因为要将“Foo”呈现在小型大写字母中以保留大小写区别，您需要使用`F<span class="sc">oo</span>`（并在 上设置`text-transform: uppercase`and ）。结果在印刷上不会很好；你需要一个由印刷师设计的小型大写字体。但至少你有可能在不同的浏览器上获得相同的字体大小减少。（不能保证，因为在应用字体大小方面存在细微差别。）`font-size: ...``.sc`

# sql - 查询以获取单元格的问题数，特定用户已获得

> ID：11232408
> 
> 赞同：0
> 
> 时间：2012-06-27T18:07:46.130
> 
> 标签：sql, database

我有四张桌子

1.  user-question 包含两列：questionID、userID、用户回答的问题。
2.  question-cell 包含两列： questionID，cellID 将在单元格中提出的问题。
3.  question-place 包含两列：questionID，placeID 将被问到的问题。
4.  问题包含两列：ID、文本

我想知道用户（userID=3）有多少个单元格问题

我是这样想的

```
select questionID 
FROM `question-cell` 
WHERE questionID in 
    (select questionID 
    from `user-question` 
    WHERE userID = 3 AND competitionID = 4 
    group by competitionID, userID) 
```

我想知道那是不是写，因为我正在研究 Notebad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:13:35.560

我认为您正在寻找以下查询。Group Bys 在子查询中不起作用，并且您在不应该有引号的地方有引号。

```
select count(*) FROM question-cell WHERE questionID in (select questionID from 
user-question WHERE userID = 3 AND competitionID = 4) 
```

# php - 单个插入查询以在一列中插入多行

> ID：11232419
> 
> 赞同：0
> 
> 时间：2012-06-27T18:08:41.297
> 
> 标签：php, mysql

我正在尝试进行查询，将表单中的多个值插入到表中的单行中。

```
 $q2="INSERT INTO tbl_Answer('Answer')VALUES ('$A1'),('$A2'),('$A3'),('$A4'),('$A5')"; 
```

我发现的一切都告诉我，这应该可以使用 PHP 和 MySQl 数据库。如果我在语法上做错了什么或我的问题出在哪里，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:29:33.297

```
INSERT INTO tbl_Answer (Answer) VALUES ('$A1'),('$A2'),('$A3'),('$A4'),('$A5') 
```

和说的一样：

```
INSERT INTO tbl_Answer (Answer) VALUES ('$A1')    
INSERT INTO tbl_Answer (Answer) VALUES ('$A2')
INSERT INTO tbl_Answer (Answer) VALUES ('$A3')
INSERT INTO tbl_Answer (Answer) VALUES ('$A4')
INSERT INTO tbl_Answer (Answer) VALUES ('$A5') 
```

你到底在找什么？

这是您的原始查询工作的演示：[http ://sqlfiddle.com/#!2/e20fc/1](http://sqlfiddle.com/#!2/e20fc/1)

看起来 $A1-$A5 的值正在抛出查询。你收到任何错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:19:35.127

我们可能需要更多信息，但有几件事：

*   如果您在`unix`基于系统的表中使用 mysql，则区分大小写。
*   其次，你应该在你的列名上使用 ` 而不是 ' 吗？（我会说它们都是不必要的）比如：

    INSERT INTO tbl_Answer(`Answer`) 甚至更好的 INSERT INTO tbl_Answer(Answer)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-27T18:12:13.073

您的表中需要更多字段。每个变量都应该有一个字段。

您的查询语法有一个小问题。

```
$q2 = "INSERT INTO tbl_Answer
        ('A1', 'A2', 'A3', 'A4', 'A5')
       VALUES
        ('$A1', '$A2', '$A3', '$A4', '$A5');"; 
```

# vbscript - 通过 windows 窗体创建和运行 Vbs 脚本

> ID：11232421
> 
> 赞同：0
> 
> 时间：2012-06-27T18:08:53.163
> 
> 标签：vbscript, windows-forms-designer

我有一个 Vbs 脚本可以在我的工作地点安装网络打印机。唯一的问题是每次我想使用它时都需要用打印机和服务器名称进行硬编码。因此，作为一种解决方案，我试图弄清楚是否可以使用文本框或下拉列表制作一个简单的 Windows 表单，将输入从那里简单地推送到 vb 脚本中，然后运行它。我无法弄清楚如何为我的生活做到这一点。这是我的 VB 脚本 Set objNetwork = CreateObject("WScript.Network") objNetwork.AddWindowsPrinterConnection "\wcprt02\S100a" 'objNetwork.SetDefaultPrinter "\wcprt02\L30b"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:31:23.180

您的选择是：

1.  使用 WScript.Arguments 将（一些）参数传递给从控制台（DOS 框）以 cscript.exe 启动的脚本
2.  从文件中读取参数（通过您选择的编辑器进行维护；如果您愿意，也可以使用 Excel）
3.  使用 InputBox 通过简单的对话框/弹出窗口收集（一些）参数
4.  编写一个 .HTA 应用程序，为（可能有很多）参数提供一个 GUI；将它们传递给作为 .hta 中的函数/子嵌入的代码
5.  编写一个呈现这种 GUI 的 .NET Forms 应用程序；然后，您可以使用您的脚本，但为什么不留在 .NET 中并避免混合技术呢？

# java - 从 Java 代码设置 JRE 变量

> ID：11232423
> 
> 赞同：1
> 
> 时间：2012-06-27T18:09:06.440
> 
> 标签：java

我们需要手动设置 -Xmax 和 -Xmin 环境变量，但我想从 java 代码中设置这些变量。有没有办法用java代码设置这些变量。？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:15:16.033

您是否需要从正在运行的 Java 进程中设置这些设置？我不相信这是可能的。但是，您可以在调用 Java 程序的子进程上设置它们，例如通过[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)。

```
ProcessBuilder pb = new ProcessBuilder("myCommand", "-Xmax", value);
pb.directory(new File("dir"));
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:30:26.067

我得到了这个问题的解决方案： -

```
 public static void main(String[] args) {
     Properties prop = new Properties();
     try {
        String path=System.getenv("APPDATA");
          path=path.substring(0,path.lastIndexOf('\\')+1)+"LocalLow\\Sun\\Java\\Deployment\\deployment.properties";
            System.err.println(path);

            prop.load(new FileInputStream(path));
            String jreIndex = null; 
            Enumeration enuKeys = prop.keys();
            while (enuKeys.hasMoreElements()) {
                String key = (String) enuKeys.nextElement();
                String value = prop.getProperty(key);
                if(value.contains("1.6.0_26")){
                    String[] st2 = key.split("\\.");  
                    if(st2.length==5){
                        jreIndex = st2[3];
                    }
                }
            }
            //SystemSettings SysConfigsettings = new SystemSettings();
            if(jreIndex != null){
            //  if (SysConfigsettings.getValue(SystemSettings.JRE_HEAP_SIZE))
              {
                prop.setProperty("deployment.javaws.jre."+jreIndex+".args", "-Xmx1024m");
              }
            }
            prop.store(new FileOutputStream(path), "UpdatedHeapSize");
            System.out.println("First : "+prop.getProperty("deployment.javaws.jre.0.args"));
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

}

# qt - _after_ change 需要 QGraphicsScene 信号或事件

> ID：11232425
> 
> 赞同：4
> 
> 时间：2012-06-27T18:09:09.387
> 
> 标签：qt, events, signals, qgraphicsscene

我使用`QGraphicsScene`Qt 框架。在场景里面我有一些`QGraphicsItem`用户可以选择和移动的 s。我想要一个信息标签，其中显示当前移动的选择（可以包含许多项目）的当前 x 和 y 坐标。

我已经尝试过`changed`使用`QGraphicsScene`. 但它在项目的 x() 和 y() 属性设置为新值*之前被触发。*所以标签总是显示倒数第二个坐标。如果一个人慢慢移动鼠标，显示不是很错误。但是随着快速移动和突然停止，标签是错误的。*我需要一个在之后*触发的信号*我需要一个在场景改变*

 *我也尝试过覆盖`itemChange`. `QGraphicsItem`但它是一样的。它在更改*之前被触发。*（新坐标在这个方法的参数里面，但是我需要一次所有选中项的新坐标）

我也尝试过覆盖 和 的`mouseMove`事件，`QGraphicsScene`但`QGraphicsView`它们也是在设置新坐标*之前。*

我做了一个测试：我使用了一个单次计时器，以便在信号发出 100 毫秒后更新标签。然后一切正常。但是计时器对我来说不是解决方案。

我能做些什么？让所有物品无法移动并由我自己处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:14:00.523

`QGraphicsItem::itemChange()`是正确的方法，您可能只是检查了错误的标志。这样的事情应该可以正常工作：

```
QVariant::myGraphicsItem( GraphicsItemChange change, const QVariant &value )
{
  if( change == QGraphicsItem::ItemPositionHasChanged )
  {
     // ...
  }
} 
```

注意使用**`QGraphicsItem::ItemPositionHasChanged`**而不是`QGraphicsItem::ItemPositionChange`，前者是在位置改变*之后*而不是之前调用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T22:38:07.430

解决方案是将您已经在做的各种事情结合起来。Instrument `itemChange`，查找并计算具有更新几何的项目。一旦您计算出与当前选择中的项目一样多的项目，请发出一个信号，让一切准备好更新您的状态。确保您已`QGraphicsItem::ItemSendsGeometryChanges`在所有物品上设置标志！

编辑此代码以消除使用零计时器方法所固有的滞后。下面是一个演示它的[sscce](http://sscce.org)。

您可以通过在窗口中单击来创建随机半径的圆。使用 Ctrl-click 或 ⌘-click 切换选择。移动项目时，质心菱形会跟随所选组的质心。这可以直观地确认代码确实有效。选择为空时，不显示质心。

我无偿添加了代码来展示如何利用 Qt 的属性系统，以便项目可以是通用的，并利用`notifier`场景的属性（如果有的话）。在它不存在的情况下，这些项目根本不会通知，仅此而已。

[![示例截图](../Images/947ae3862a254d523c37bcd7f636f424.png)](https://i.stack.imgur.com/Y6omA.png)

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/scenemod-11232425
#include <QtWidgets>

const char kNotifier[] = "notifier";

class Notifier : public QObject
{
   Q_OBJECT
   int m_count = {};
public:
   int count() const { return m_count; }
   void inc() { m_count ++; }
   void notify() { m_count = {}; emit notification(); }
   Q_SIGNAL void notification();
};

typedef QPointer<Notifier> NotifierPointer;
Q_DECLARE_METATYPE(NotifierPointer)

template <typename T> class NotifyingItem : public T
{
protected:
   QVariant itemChange(QGraphicsItem::GraphicsItemChange change, const QVariant &value) override {
      QVariant v;
      if (change == T::ItemPositionHasChanged &&
          this->scene() &&
          (v=this->scene()->property(kNotifier)).isValid())
      {
         auto notifier = v.value<NotifierPointer>();
         notifier->inc();
         if (notifier->count() >= this->scene()->selectedItems().count()) {
            notifier->notify();
         }
      }
      return T::itemChange(change, value);
   }
};

// Note that all you need to make Circle a notifying item is to derive from
// NotifyingItem<basetype>.

class Circle : public NotifyingItem<QGraphicsEllipseItem>
{
   QBrush m_brush;
public:
   Circle(const QPointF & c) : m_brush(Qt::lightGray) {
      const qreal r = 10.0 + (50.0*qrand())/RAND_MAX;
      setRect({-r, -r, 2.0*r, 2.0*r});
      setPos(c);
      setFlags(QGraphicsItem::ItemIsMovable | QGraphicsItem::ItemIsSelectable |
               QGraphicsItem::ItemSendsGeometryChanges);
      setPen({Qt::red});
      setBrush(m_brush);
   }
};

class View : public QGraphicsView
{
   Q_OBJECT
   QGraphicsScene scene;
   QGraphicsSimpleTextItem text;
   QGraphicsRectItem centroid{-5, -5, 10, 10};
   Notifier notifier;
   int deltaCounter = {};
public:
   explicit View(QWidget *parent = {});
protected:
   Q_SLOT void gotUpdates();
   void mousePressEvent(QMouseEvent *event) override;
};

View::View(QWidget *parent) : QGraphicsView(parent)
{
   centroid.hide();
   centroid.setRotation(45.0);
   centroid.setPen({Qt::blue});
   centroid.setZValue(2);
   scene.addItem(&centroid);
   text.setPos(5, 470);
   text.setZValue(1);
   scene.addItem(&text);
   setRenderHint(QPainter::Antialiasing);
   setScene(&scene);
   setSceneRect(0,0,500,500);
   scene.setProperty(kNotifier, QVariant::fromValue(NotifierPointer(&notifier)));
   connect(&notifier, &Notifier::notification, this, &View::gotUpdates);
   connect(&scene, &QGraphicsScene::selectionChanged, &notifier, &Notifier::notification);
}

void View::gotUpdates()
{
   if (scene.selectedItems().isEmpty()) {
      centroid.hide();
      return;
   }
   centroid.show();
   QPointF centroid;
   qreal area = {};
   for (auto item : scene.selectedItems()) {
      const QRectF r = item->boundingRect();
      const qreal a = r.width() * r.height();
      centroid += item->pos() * a;
      area += a;
   }
   if (area > 0) centroid /= area;
   auto st = QStringLiteral("delta #%1 with %2 items, centroid at %3, %4")
         .arg(deltaCounter++).arg(scene.selectedItems().count())
         .arg(centroid.x(), 0, 'f', 1).arg(centroid.y(), 0, 'f', 1);
   this->centroid.setPos(centroid);
   text.setText(st);
}

void View::mousePressEvent(QMouseEvent *event)
{
   const auto center = mapToScene(event->pos());
   if (! scene.itemAt(center, {})) scene.addItem(new Circle{center});
   QGraphicsView::mousePressEvent(event);
}

int main(int argc, char *argv[])
{
   QApplication app{argc, argv};
   View v;
   v.show();
   return app.exec();
}
#include "main.moc" 
```*

# javascript - 在图库中设置活动缩略图的样式

> ID：11232432
> 
> 赞同：0
> 
> 时间：2012-06-27T18:09:39.673
> 
> 标签：javascript, css

这是一个示例库：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html> 
<head> 
<title>Slideshow</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
#large {width:448px; height:336px; background:#000 url(http://lh5.googleusercontent.com/-ugFamEhbqPo/Thc6hoArbwI/AAAAAAAAABA/PFeHcJhR4Xw/s800/image1.jpg) no-repeat center;}
#thumbs {padding-top:12px; overflow:auto; white-space:nowrap; width:448px;}
img {padding:1px; width:80px; height:60px;}
img:hover {background:#00F;}
</style>
</head> 
<body> 
<div id="large"></div>  
<div id="thumbs"> 
<img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt="" onclick="document.getElementById('large').style.backgroundImage='url(http://lh5.googleusercontent.com/-ugFamEhbqPo/Thc6hoArbwI/AAAAAAAAABA/PFeHcJhR4Xw/s800/image1.jpg)';">
<img src="http://lh3.googleusercontent.com/-JU5a-eDnOSg/Thc7g5UkwLI/AAAAAAAAABI/9aCyCMixWb4/s800/thumb2.jpg" alt="" onclick="document.getElementById('large').style.backgroundImage='url(http://lh3.googleusercontent.com/-u5BHGxpr0rg/Thc6hLbDRKI/AAAAAAAAAA8/IvQWzJBvqjg/s800/image2.jpg)';">
<img src="http://lh4.googleusercontent.com/-TdbbNGFbDNk/Thc7g0IBSsI/AAAAAAAAABM/pxpntZaTVoQ/s800/thumb3.jpg" alt="" onclick="document.getElementById('large').style.backgroundImage='url(http://lh4.googleusercontent.com/-4AMWSfi8q7A/Thc6haUv1QI/AAAAAAAAABE/oRdTWawPi_c/s800/image3.jpg)';">
</div> 
</body>
</html> 
```

我想知道如何突出显示活动缩略图，使其背景保持蓝色，直到我单击另一个。

提前致谢！

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:13:02.787

这是工作小提琴：

[http://jsfiddle.net/DEn6r/2/](http://jsfiddle.net/DEn6r/2/)

**要添加的jQuery代码：**

```
$('img').click(function() {
          $('img').not(this).removeClass('active');
          $(this).addClass('active');
});​ 
```

**要添加的 CSS：**

```
img.active{background:#00f;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:56:05.827

这是纯 JavaScript 中的一个简单解决方案，与您已经在做的事情一致：

[http://jsfiddle.net/drNqx/3/](http://jsfiddle.net/drNqx/3/)

在文档中添加这个简单的函数`<head>`：

```
<script type="text/javascript">
function reset()
{
    var imgs = document.getElementsByTagName('img');
    for(var i = 0; i < imgs.length; i++)
    {
        imgs[i].style.backgroundColor = '#fff';
    }
}
</script> 
```

`onclick`将其放在每个缩略图图像中已有的内容之前：

```
reset();this.style.backgroundColor='#00f'; 
```

要将第一个缩略图突出显示为默认值，请将其添加到`reset()`函数下方：

```
function init()
{
    document.getElementById('img1').style.backgroundColor='#00F';
}

window.onload = init; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:20:17.007

/* 您需要使用 Jquery 将类添加到活动拇指图像。确保添加 jquery 路径*/

```
$(document).ready(function(e){

$("#thumbs img").click(function(){

$("#thumbs img").removeClass("selected");/* this will remove selected class from all images*/
$(this).addClass("selected"); /* this will add 'selected' class to particular image where you clicked */

});
});

in css you can give whatever style you want to give using css

<style>
#thumbs img.selected
{
border:2px solid blue;
background-color:#eee;
}
#thumbs img
{
padding:5px;
}

</style> 
```

# linux - iwconfig 不显示无线的噪声级别

> ID：11232433
> 
> 赞同：3
> 
> 时间：2012-06-27T18:09:50.307
> 
> 标签：linux, wireless, noise

我有一个 Dell Latitude E6410，它使用 Intel Ultimate N-6300 无线网卡。iwconfig 不显示无线接口 wlan0 的噪声级别。有谁知道这样做的原因？

```
precise@ubuntu:~/Desktop/Work/transmitter$ iwconfig
lo        no wireless extensions.

mon0      IEEE 802.11abgn  Mode:Monitor  Tx-Power=15 dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Power Management:off

wlan0     IEEE 802.11abgn  ESSID:"AirPennNet"  
          Mode:Managed  Frequency:2.412 GHz  Access Point: D8:C7:C8:D7:A6:C1   
          Bit Rate=130 Mb/s   Tx-Power=15 dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Power Management:on
          Link Quality=65/70  Signal level=-45 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:800  Invalid misc:540   Missed beacon:0

eth0      no wireless extensions. 
```

我尝试使用 cat /proc/net/wireless 并得到了这些结果

```
Inter-| sta-|   Quality        |   Discarded packets               | Missed | WE
 face | tus | link level noise |  nwid  crypt   frag  retry   misc | beacon | 22
 wlan0: 0000   64\.  -46\.  -256        0      0      0    818    566        0 
```

-256 是噪音水平吗？我如何用 dBm 解释这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:51:55.190

答案在于您的驱动程序和无线网卡支持。

我有一个类似的 Dell Latitude 型号，但使用的是 Intel(R) Centrino(R) Advanced-N 6200 AGN 无线网卡。发出`iwconfig`命令后，输出也显示了类似的东西 -`Noise`缺少参数（当然，这是在连接到接入点时完成的）。

对此不满意，我取出另一张无线网卡（Winstron NeWeb AR9170+AR9104 802.11abgn - 基本上是 Proxim Wireless 802.11a/b/g/n Wi-Fi USB 加密狗）并发出相同的命令。输出还是一样，`Noise`参数不存在！

这不是我所期望的，因为我非常清楚我们使用同一个 Wi-Fi 加密狗来检测与接入点相关的噪音水平，使用的是 Fluke Network 的专有软件，称为 AirMagnet WiFi Analyzer PRO。我什至尝试从 Jean Tourrilhes 下载并重新编译 Linux 无线工具包，但显示的输出与之前类似。

我所做的下一步是再次验证 WiFi 加密狗确实*在*AirMagnet WiFi Analyzer 软件下显示 WiFi 噪声级别。果然，确实如此（如下图所示）。

![使用 USB 加密狗的 WiFi 噪音水平](../Images/c326dd5d59af4b9c9763173c20fc364d.png)

标题为“N”的蓝色列是指噪声级别。请注意，当我们购买 AirMagnet 软件时，WiFi 加密狗还附带了一个专有驱动程序。

完成之后，我决定看看我们的内部 WiFi 卡（Intel(R) Centrino(R) Advanced-N 6200 AGN）会显示什么。结果如下：

![使用 Intel Centrino Advanced-N 6200 AGN 的 WiFi 噪音水平](../Images/5c698206179dc2f43e7a3b00c26e6586.png)

他们都显示-100的值！所以，我相信这一切都与驱动程序/卡的功能有关。

# c# - 单行 wpf 文本框水平滚动到结尾

> ID：11232438
> 
> 赞同：2
> 
> 时间：2012-06-27T18:10:12.527
> 
> 标签：c#, wpf, listbox

我有一个模板列表框，其中的模板还包含一个 wpf 文本框。数据通过 ItemsSource 提供给列表框。

文本框显示文件路径，这些通常很长。我希望在加载文本框时显示文件路径的结尾。

我尝试了`DataContextChanged`事件和设置的组合`HorizontalScrollBarVisibility`（使用 double.max 或获取真正的字符长度）但没有成功。DataContextChanged 似乎是正确使用的事件，因为它会在 ItemsSource 的每个设置上触发。

编辑：

这是示例代码，显示 Lester 的建议何时有效，何时无效。当通过绑定设置文本时，我试图让它工作。

```
<Window x:Class="WpfAppTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    Loaded="LoadedHandler">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
    </Grid.RowDefinitions>
    <TextBox Name="tbb" Width="50" Height="20" Text="{Binding Path=Str}"
             IsReadOnly="True" Grid.Column="0" Grid.Row="0"
             DataContextChanged="ContextChangedHandler"/>
    <ListBox SelectionMode="Single" x:Name="listBox" Grid.Column="0" Grid.Row="1"
             VerticalAlignment="Top">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBox Width="50" Height="20" Text="{Binding Path=Str}"
                         IsReadOnly="True"
                         DataContextChanged="ContextChangedHandler"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent(); 

        var obj = new SomeClass
                      {
                          Str = "qwetyuiuropqo[psdal;dkas;ldamzxn m,cnz128391"
                      };
        listBox.ItemsSource = new List<SomeClass> { obj };
        tbb.DataContext = obj;
    }

    public class SomeClass
    {
        public string Str { get; set; }
    }

    private void LoadedHandler(object sender, RoutedEventArgs e)
    {
        var obj = new SomeClass
        {
            Str = "qwetyuiuropqo[psdal;dkas;ldamzxn m,cnz128391"
        };
        listBox.ItemsSource = new List<SomeClass> { obj };
        tbb.DataContext = obj;
    }

    private void ContextChangedHandler(object sender, DependencyPropertyChangedEventArgs e)
    {
        var textBox = sender as TextBox;
        if (textBox == null) return;

        textBox.CaretIndex = textBox.Text.Length;
        var rect = textBox.GetRectFromCharacterIndex(textBox.CaretIndex);
        textBox.ScrollToHorizontalOffset(rect.Right);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T22:12:40.853

这段代码对我有用，可以滚动到 TextBox 的末尾（取自[这个问题](https://stackoverflow.com/a/4056132/389966)）：

```
textBox.CaretIndex = textBox.Text.Length;
var rect = textBox.GetRectFromCharacterIndex(textBox.CaretIndex);
textBox.ScrollToHorizontalOffset(rect.Right); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:58:34.770

解决方案是使用 Loaded 更改 DataContextChanged 事件，以便为文本框接收正确的通知。

# c# - 在 windows 窗体中验证文本框

> ID：11232442
> 
> 赞同：0
> 
> 时间：2012-06-27T18:10:27.733
> 
> 标签：c#, winforms, validation

Windows 表单应用程序（.Net 3.5） 我在表单上有一个文本框和一个按钮。一旦文本框为空，我想禁用该按钮。我不想使用这种[方法](https://stackoverflow.com/questions/4202195/textbox-validation-in-a-windows-form)。因为按钮仍然处于启用状态。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:13:00.217

在[TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)的​​事件处理程序中，只需确定文本框是否包含任何数据。如果是，请启用它。否则，禁用它。添加您的事件处理程序，然后实现类似以下的内容，

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
   button1.Enabled = !(textBox1.Text == String.Empty);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:14:21.793

处理[文本更改事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)

检查并查看 textbox.text 是这样的

```
 if(string.IsNullOrEmpty(textbox1.text))
 {
  Button1.enabled = false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:14:26.720

如果要禁用文本框，则使用 textChanged：

```
if (textbox.Text == ""){
   button.Enabled = false;
} 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T13:38:10.387

制作`button1.Enabled = false;`

并将 EventHandler 添加到`textbox1.TextChanged = new System.EventHandler(SearchBoxTextChanged);`

```
private void textbox1_TextChanged(object sender, EventArgs e)
    {
        button1.Enabled = (textBox1.Text.Trim() != string.Empty);
    } 
```

# r - 如何在 R 中按位置咖喱...参数？

> ID：11232444
> 
> 赞同：8
> 
> 时间：2012-06-27T18:10:42.473
> 
> 标签：r, currying

这可能属于“你不能，而且无论如何也没有理由”，但我很好奇它是否可能。至少，也许这将是一个有趣的 R 谜题。

我在思考`cat`总是 append `\n`。但是，`cat`它的编写方式是它可以将给定的多个参数粘贴在一起（通过`...`）。

令人惊讶的是，这有效：

```
> library(functional)
> catnip <- Curry( cat, "\n" )
> catnip("hi")

 hi 
```

但是，`\n`在用户的文本之前结束。有没有办法对函数进行柯里化，以便您指定柯里化参数总是结束`...`参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T18:25:21.693

看起来`Curry()`非常有效地以与您想要的相反顺序硬连线两个参数列表。这是一个足够简单的函数，你可以构建它的镜像，然后使用它。

```
Curry2 <- function(FUN, ...) {
    .orig = list(...)
    function(...) do.call(FUN, c(list(...), .orig))
}

catnip <- Curry2( cat, "\n" )
catnip("hi") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T18:31:28.657

**#1。忽略 Curry 的第二个参数并硬编码换行符**

试试这个，`cat`通过在匿名函数中硬编码最后一个参数。它实际上并没有`Curry`在第一个之后使用参数：

```
catnip <- Curry(function(...) cat(..., "\n") ) 
```

**#2。通过柯里化匿名函数来制造函数**

这是第二个解决方案，它`cat`通过使用对 的参数重新排序的匿名函数来处理最后一个`cat`参数。

```
catnip2 <- Curry(function(last.arg, ...) cat(..., last.arg), "\n")

# test
catnip2("hi", "there") 
```

**#3。通过对更基本的函数进行柯里化来制造所需的函数**

也许所有这一切的真正意义在于看看我们如何获取基本组件并将它们库里来获得我们想要的东西。因此我们可以定义一个泛型`last.arg.fun`，然后通过对它的 curry 来制造所需的功能：

```
last.arg.fun <- function(FUN, last.arg, ...) FUN(..., last.arg)
catnip3 <- Curry(last.arg.fun, cat, "\n")

# test
last.arg.fun(cat, "\n", "hi", "there")

# test
catnip3("hi", "there") 
```

`last.arg.cat`如果在某个时候需要，我们可以分两步完成：

```
last.arg.cat <- Curry(last.arg.fun, cat)
catnip4 <- Curry(last.arg.cat, "\n")

# test
last.arg.cat("\n", "hi", "there")

# test
catnip4("hi", "there") 
```

请注意，每个测试都应该产生一行，说 hi there 以换行符结尾。

编辑：更多解决方案。

# graph-theory - 连接集数

> ID：11232448
> 
> 赞同：0
> 
> 时间：2012-06-27T18:11:13.057
> 
> 标签：graph-theory

以下数组中有多少个连通集？

1 0 0 1

0 0 1 0

0 0 1 0

1 0 0 1

“连接集”可以定义为一组小区，上面提到了 1 个小区，并且在该集中至少有一个其他小区与它们共享邻居关系。一个包含 1 的单元格并且没有包含 1 的周围邻居可以被认为是一个包含一个单元格的集合。邻居可以定义为在 8 个可能方向（即 N、W、E、S、NE、NW、SE、SW 方向）上与给定小区相邻的所有小区。一个细胞不是它自己的邻居。

实际上我被困在这个问题上并且无法理解这个问题中连接集的定义是什么意思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:32:44.607

这是突出显示集合的图像：

![套](../Images/931f2afdcaed290c63b2dbfb5f1c1ec3.png)

规则适用如下（据我了解）：

*   单元格必须包含 1 才能成为集合的一部分
*   如果相邻（上、下和对角线）单元格也包含 1，则它是同一集合的一部分。
*   一个有 1 的单元格并且没有周围有 1 的邻居可以被认为是一个有一个单元格的集合

第三点我不太确定，因为 OP 说“'连接集'可以定义为一组单元格，其中提到了 1 并且该集中**至少有一个其他单元格**”，但是然后还说“一个有 1 的单元格并且**没有周围**的邻居有 1 可以被认为是一个有一个单元格的集合”，所以它非常模棱两可。

如果是单格不设置的情况，则计数分别为 1 和 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:21:12.483

解决问题的一种方法是使用洪水填充算法

现在检查 1 并将其设为 0，现在检查所有方向，如果它们包含 1，则也将它们设为 0（除了在所有方向上进行递归调用之外别无他法）

整个数组检查完成后，我们面对多少次 1 是答案

例如让我们采取

1 0 0 1

1 0 0 1

1 0 0 1

1 0 1 0

现在 00 处的元素是 1 现在将其设为 0 现在检查所有方向现在我们在 10 位置有 1 因此将其设为零并再次检查我们将获得 20 和 30 位置因此计为 1

现在移动到 03 使其为 0 现在检查 1 因此包含 1 的单元格为 13 使其为零 现在移动到 23 最后到 32 并增加计数器因此它是 2

现在检查每个单元格，因为没有其他单元格包含 1，因此总连接集为 2

# windows - Windows 8 分层 Windows Over Metro 应用程序

> ID：11232450
> 
> 赞同：8
> 
> 时间：2012-06-27T18:11:15.863
> 
> 标签：windows, windows-8

我有一个使用 Microsoft 的分层窗口[http://msdn.microsoft.com/en-us/library/ms997507.aspx](http://msdn.microsoft.com/en-us/library/ms997507.aspx)在 Windows 7 上运行的应用程序。此应用程序设置为具有 30% 的不透明度，它始终位于顶部，并且对事件是透明的（即：它将所有事件转发到其下方的窗口）。您可以将其视为您正在查看桌面的“屏幕”。它目前被用作我们用户的无所不在的反馈层。

我们尝试在 Windows 8 上运行相同的应用程序，并注意到它在桌面模式下按预期工作，但没有覆盖开始菜单和其他 Metro 应用程序。

有谁知道是否有一个等效的始终在顶部窗口模式适用于 Metro 应用程序和 Windows 8 中的开始菜单？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T16:16:08.307

是的，有可能。请看一下这个页面：

[http://blogs.microsoft.co.il/blogs/pavely/archive/2012/05/16/windows-8-topmost-vs-topmost.aspx](http://blogs.microsoft.co.il/blogs/pavely/archive/2012/05/16/windows-8-topmost-vs-topmost.aspx)

特别是评论部分的第二篇文章：

> 最上面的窗口也受可访问性设置的影响。如果您想要在 Metro 之上的窗口，您需要它来声明可访问性。以下是关键点：
> 
> 1.  应用程序必须要求`uiAccess`（app.manifest）
>     
>     
> 2.  应用程序必须断言“最顶层”窗口定位（在 Win32/`SetWindowPos`或 WinForms/WPF 的`Topmost`属性中，以编程方式或其他方式）
>     
>     
> 3.  在不更改组策略设置的情况下，必须将其安装到某个受信任的位置 [ `C:\Windows`, `C:\Program Files`, `C:\Program Files (x86)`]。
>     
>     
>     *   如果您希望能够在任意位置运行它，则必须禁用安全设置：“用户帐户控制：仅提升安装在安全位置的 UIAccess 应用程序”。
>         
>         
>     *   这与设置`HKLM\Software\Microsoft\Windows\CurrentVersion\Policies\System\ValidateAdminCodeSignatures`为`0`
>         
>         
> 4.  所述应用程序无法在调试器中运行
>     
>     
> 5.  如果是 .NET 应用程序：
>     
>     
>     *   清单必须嵌入在构建后步骤中
>         
>         
>     *   应用程序必须具有“延迟签名”（这意味着它不能从内置调试器运行，尽管您可以构建和附加 - 这是微软所做的）
>         
>         
> 6.  应用程序必须使用受信任的证书进行签名。
>     
>     
> 7.  所述受信任的证书必须安装到受信任的根证书颁发机构（这很重要！它不能只是简单地安装）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T06:18:15.360

运行 windows 语音识别。它是浮动在开始菜单、桌面等上的最顶层窗口。所以它肯定是可能的。我正在开发适用于 Windows 8 的触摸模拟器，需要实现此功能。

以下是实现此目的的步骤：

[http://www.pixytech.com/rajnish/2013/05/windows-8-topmost-window/](http://www.pixytech.com/rajnish/2013/05/windows-8-topmost-window/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-27T18:38:20.903

我几乎肯定你不能让任何其他应用程序覆盖 Metro 应用程序。新的 Metro 环境旨在运行单个全屏应用程序（或两个，但只有在靠边时才能运行）。此外，允许某些东西充当中间人有点危险，因为它们可以捕获各种敏感的用户数据。

话虽如此，如果您可以设置窗口的“始终位于顶部”属性，它可能会一直放在“开始”菜单和各种 Metro 应用程序上。我知道它适用于任务管理器，但我从未尝试过使用任意应用程序。但是，我不知道它是否适用于 Metro 应用程序，因为它们的事件与老式的 winform 应用程序不同。您必须查看您的“屏幕”是否允许触摸事件通过。

# ios - 在不使用情节提要中的导航控制器的情况下在 UIViewController 之间切换的最佳方法是什么？

> ID：11232453
> 
> 赞同：2
> 
> 时间：2012-06-27T18:11:21.320
> 
> 标签：ios, xcode, uiviewcontroller, storyboard

请参考下图——

我没有使用 NavigationViewController。使用故事板和segues时有没有办法在视图之间切换？我知道另一种方法是使用根视图控制器并以这种方式切换视图。只是想知道是否有另一种方法可以做到这一点。

谢谢！

![故事板](../Images/52562a67f949366ba839e0035c87b1e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:22:14.117

它不需要navigationController 来使用segue。只需`[self performSegueWithIdentifier:@"mySegue" sender:sender];` 在 Storyboard 中设置和标识 Segue 的任何地方使用该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:31:26.100

您可以：

1.  使用导航控制器，但只需将其隐藏（在情节提要的 Interface Builder 设计中，以及在运行时通过`setNavigationBarHidden:animated:`您的`viewDidLoad`. 因此`pushViewController`（或简单的 push segue）和`popViewController`工作，没有导航栏用户界面。

2.  使用模态序列（即在幕后它会做的`presentViewControllerAnimated`）和`dismissViewControllerAnimated`.

# silverlight - Silverlight 未搜索 ClientAccessPolicy.xml

> ID：11232454
> 
> 赞同：0
> 
> 时间：2012-06-27T18:11:21.743
> 
> 标签：silverlight, websocket, websocket4net

我正在使用 Silverlight 和 WebSocket4Net，尝试连接时出现错误。问题出在底层套接字上：

{System.Net.Sockets.SocketException：试图以访问权限禁止的方式访问套接字。}

在此之下没有 InnerException 或 StackTrace。

它根本不尝试查找 ClientAccessPolicy.xml。

我正在尝试连接到另一台计算机，例如 10.0.0.102，并且我来自 10.0.0.101。我可以访问 10.0.0.102/ClientAccessPolicy.xml 就好了。但是，在 Fiddler 中，它甚至不会尝试加载 10.0.0.102/ClientAccessPolicy - 没有调用来查找它。

因此，我尝试通过 TCP 调用和连接到 WebSocket 根本不起作用（即 ws://10.0.0.102:4530/WebSockOutput/）。我已经手动将 Socket 的 ClientAccessPolicyProtocol 设置为 Http... 当我在较低层检查时，它仍然正确设置了 CAPP。

有什么想法吗？

我还想补充一点，我已经多次重新启动并清除了两台机器上的 Temp**目录**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:19:25.500

好的，所以问题是真的真的真的**很伤心**，就我而言。

显然它已经缓存了 ClientAccessPolicy.xml（我已经更改为支持 TCP 端口），虽然我认为我正在杀死临时 Internet 文件，但我没有。我从 IE 的选项中删除了我的历史记录/下载的数据，这解决了所有问题。

有人会认为 Silverlight 会尝试更频繁地重新下载 ClientAccessPolicy ......

# objective-c - 使用 OAuth 2.0 用户名和密码流访问 Eventbrite API

> ID：11232457
> 
> 赞同：2
> 
> 时间：2012-06-27T18:11:28.030
> 
> 标签：objective-c, eventbrite

我正在使用 Cocoa 和 Objective-C 开发一个内部 OS X 应用程序，该应用程序需要通过 OAuth 2.0 访问 Eventbrite API

因为它是一个内部应用程序，它将被视为一个受信任的应用程序，它将使用固定的用户名和密码访问 Eventbrite，因此设置 OAuth 2.0 的用户名和密码流程似乎是有意义的。

我正在使用来自 gitHub 的 OAuth2Client 框架，但是当我将其设置为使用[https://www.eventbrite.com/oauth/authorize](https://www.eventbrite.com/oauth/authorize)作为授权 URL 和[https://www.eventbrite.com时，它只会出现 HTTP: 400 错误/oauth/token](https://www.eventbrite.com/oauth/token)作为令牌 URL。这是导致 400 的第二个 URL。

Eventbrite API 网站表示它支持完整的 OAuth 2.0 规范，但没有使用用户名和密码流的示例，也没有 Objective-C 示例。我希望有人可以指出一个使用 OAuth 2.0 用户名和密码流在 Objective-C 中连接到 Eventbrite 的示例，所以我知道这至少是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:38:00.283

Eventbrite 实现了[OAuth2.0 用户代理流程](http://developer.eventbrite.com/doc/workflows/#authorization)（而不是用户名和密码流程）。

一个简单的客户端用户代理交互演示可以在他们的[GitHub 示例部分](http://eventbrite.github.com/#examples)中找到： http: [//eventbrite.github.com/oauth2-example.html](http://eventbrite.github.com/oauth2-example.html)

[不鼓励使用电子邮件和密码组合](http://developer.eventbrite.com/doc/authentication/)进行身份验证 - 但可以将这些身份验证令牌发送到[user_get API 方法](http://developer.eventbrite.com/doc/users/user_get/)，该方法将在响应中返回一个 user_key。
然后，此 user_key 可用于签署后续 API 请求，就像 OAuth2.0 access_token 允许您做的那样。

[Eventbrite 开发人员身份验证指南](http://developer.eventbrite.com/doc/authentication/)包含可用身份验证方案的概述。

# php - PDO - 引号正在生成 MySQL 语法错误

> ID：11232458
> 
> 赞同：1
> 
> 时间：2012-06-27T18:11:39.983
> 
> 标签：php, mysql, pdo

我正在尝试以我认为正确的方式绑定参数，但是我从 MySQL 收到 1064 错误，表明涉及的引号太多。编写的代码如下所示：

```
$db_host = 'localhost';
$db_username = 'root';
$db_password = 'Password123';
$db_database = 'db_test';

$dbh = new PDO("mysql:host=$db_host", $db_username, $db_password);
$stmt = $dbh->prepare("DROP DATABASE :db_database;");
$stmt->bindParam(':db_database', $db_database, PDO::PARAM_STR, 7);
$stmt->execute() or exit(print_r($stmt->errorInfo(), true)); 
```

并显示错误消息：

> Array ( [0] => 42000 [1] => 1064 [2] => 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，了解在 ''db_test'' 附近使用的正确语法在第 1 行）

当我以错误的方式插入变量时，它工作正常`$db_database`，即直接插入到 sql 语法中。另外，我检查了 magic_quotes 是否已关闭，如果这对它有任何影响。现在我被卡住了，因为感觉我做的事情正确（但显然我没有）。任何人都可以看到错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:22:08.970

1.  您似乎正在使用仿真，因为数据库甚至不允许您`PREPARE`这样做（设置`$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES,false);`）
2.  您不能在参数中命名标识符（列/表/数据库名称）、函数等，这不是准备好的语句的工作方式，您只能发送“真”字符串/浮点数/整数。简而言之，如果你在某处需要一个标识符或函数名，它应该在你的查询之前`->prepare()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:23:26.453

尝试以下操作：

```
$dbh->query("DROP TABLE `{$db_database}`"); 
```

在使用表而不是数据库时，您应该坚持使用准备/执行。此外，在发出多个类似查询时，您只会看到准备和执行的性能提高。引用[PHP 联机帮助页](http://www.php.net/manual/en/pdo.query.php)：

> 对于需要多次发出的查询，如果您使用 PDO::prepare() 准备 PDOStatement 对象并通过多次调用 PDOStatement::execute() 发出语句，您将获得更好的性能。

# unix - unix diff --show-function-line 截断输出

> ID：11232461
> 
> 赞同：2
> 
> 时间：2012-06-27T18:11:49.640
> 
> 标签：unix, diff, truncate

我正在区分一些 ldif 文件，其中每个部分都以“dn：leaf，branch3，branch2，branch1，root”开头我希望显示每个部分的 dn（可分辨名称），并且 Unix diff 实用程序有一个这样做的功能：--show-function-line=正则表达式。但是，diff 工具会截断输出中的 dn 行，这使得了解完整路径变得更加困难。

当前命令：

```
diff -U 0 --show-function-line="^dn\: .*" file1.ldif file2.ldif > deltas.txt 
```

示例输出：

```
@@ -56 +56 @@ dn: administratorId=0,applicationName=pl
-previousLoginTime: 20120619180751Z
+previousLoginTime: 20120213173659Z 
```

原始 dn:

```
dn: administratorId=0,applicationName=platform,nodeName=NODENAME 
```

我希望将整个原始行包含在输出中。有没有办法做到这一点？

谢谢，生锈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:06:44.700

我通过编辑源代码并重新编译来解决它。

在 src/context.c 中：print_context_function (FILE *out, char const *function)

改行：

```
for (j = i; j < i + 40 && function[j] != '\n'; j++) 
```

至

```
for (j = i; j < i + 100 && function[j] != '\n'; j++) 
```

“40”将输出字符数限制为 40，所以我将其增加到 100，这应该足以满足我的需要。该检查可能会完全省略，让它只检查 function[j] != '\n'，但我决定保持原样。

# c# - 优化函数修改不同类的成员变量

> ID：11232464
> 
> 赞同：0
> 
> 时间：2012-06-27T18:12:01.980
> 
> 标签：c#

我有 2 个具有确切两个功能的类。它们之间的区别在于它们修改了自己类的成员变量。

```
class A
{ 
     public hello;

     public void methodA ()
     {
         // code to modify hello
     }
}
class B
{ 
     public hello;

     public void methodB()
     {
          // code to modify hello
     }
} 
```

方法 A 和 B 做完全相同的事情，但打招呼不同（一个在 A 类中，一个在 B 类中）。有什么办法可以避免在这里重复吗？我认为可能委托将是答案，但我不知道如何。请给我指导，我是学生，还在学习。预先感谢。

编辑：这些类具有相同功能但是单独的类的原因是，一个在 Windows 应用程序中，另一个在控制台应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:33:54.277

如果这些类共享完全相同的功能，那么它们应该组合成一个类。如果你必须在不同的应用程序之间共享这个类，你可以把这个类放到一个单独的程序集中，并从你的 Windows 和控制台应用程序中引用这个程序集。

# android - 根据从 Web 服务调用接收到的数据进行动态布局设计

> ID：11232465
> 
> 赞同：0
> 
> 时间：2012-06-27T18:12:02.260
> 
> 标签：android, web-services, layout, dynamically-generated

![在此处输入图像描述](../Images/a024e6cb6051ad2f8911f5b0658f3dc3.png)

嗨，在我的应用程序中，我需要动态构建布局。布局中视图的所有尺寸都将从网络服务获得。在网络服务中，我们可能有不同的图块大小，根据图块大小，我们必须将图块放入适当的位置。

任何人都可以帮助我动态构建布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:38:59.420

您可以以编程方式膨胀不同的布局。所以你应该有这样的东西：

```
LayoutInflater inflater = getLayoutInflater();
ViewGroup layoutLoaded = (ViewGroup)inflater.inflate(R.layout.yourlayout, null);
mainLayout.addView( layoudLoaded ); 
```

通过这种方式，您可以在需要时加载所需的所有布局。

# php - 在 64 位 Windows 上使用 PHP win32_query_service_status() 函数

> ID：11232467
> 
> 赞同：3
> 
> 时间：2012-06-27T18:12:08.080
> 
> 标签：php, windows, 64-bit, 32bit-64bit

```
PHP version: 5.3.5 
Apache version 2 
OS: Windows Server 2008 R2 
```

我正在尝试从 PHP 脚本监视和重新启动 Windows 服务。当我使用此功能时：

> win32_query_service_status()

我收到错误消息：

> 致命错误：调用未定义函数 win32_query_service_status()

这适用于具有 PHP v5.2.6 的 32 位 Windows 服务器 从另一个服务器，我将 php_win32service.dll 复制到扩展文件夹并在我的 PHP.ini 文件中启用它。还是不行。64位计算机有什么替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:17:35.673

请参阅以下 URL，该 URL 提供了指向[PEAR 扩展](http://www.php.net/manual/en/win32service.installation.php)的链接，以便与 PHP 5.3 一起使用。

# variables - 在批处理/CMD 中连接多个变量的名称

> ID：11232470
> 
> 赞同：0
> 
> 时间：2012-06-27T18:12:11.523
> 
> 标签：variables, batch-file, cmd

搜索了这个网站和其他网站 - 不高兴。

```
:: first for loop
for /L %%x in (1,1,2) do (
generic-executable.output > grab1-%%x.txt

:: second, nested for loop
for /f "delims=" %%i in (grab1-%%x.txt) do (set grab1=%%i)
echo variable string is %grab1%%x%

generic-executable.output > grab2-%%x.txt
for /f "delims=" %%i in (grab2-%%x.txt) do (set grab2=%%i)
echo variable string is %grab2%%x%
) 
```

尝试运行嵌套的 for 循环

1) 将数据写入文件

2）从文件中获取数据并将其保存到另一个变量。

结束变量的名称应该是每个 for 循环的串联（即，grab1-1、2-1、1-2、2-2）。

**将数据保存到变量中是没有问题**的，*格式化变量以调用数据 IS。*

我很可能在连接变量的格式中遗漏了一些东西。我试过 single `'`, double `"`, `^`, `!`, one `%`, two `%`, 反斜杠, ACK!! ...我得到的最接近的是

```
echo %grab1-%%x 
```

给了：

```
%grab1-1 
```

我很感激你能提供的任何提示。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:35:13.233

您遇到了批处理新手的经典绊脚石：您不能在循环内（括号内）设置变量，然后`%var%`在同一个循环内访问该值。整个循环（带括号的代码块）一次解析，并`%var%`在解析时展开。因此，您会看到`var`循环执行之前的值。

解决方案是在脚本顶部附近启用延迟扩展`setlocal enableDelayedExpansion`，然后使用延迟扩展 as 扩展变量`!var!`。延迟扩展意味着值在运行时扩展 - 正是您想要的。

我相信这就是你想要达到的目标

```
setlocal enableDelayedExpansion
for /L %%x in (1,1,2) do (

  genericOutput1.exe > grab1-%%x.txt
  for /f "delims=" %%i in (grab1-%%x.txt) do set "grab1-%%x=%%i"
  echo grab1-%%x variable string is !grab1-%%x!

  genericOutput2.exe > grab2-%%x.txt
  for /f "delims=" %%i in (grab2-%%x.txt) do set "grab2-%%x=%%i"
  echo grab2-%%x variable string is !grab2-%%x!
)

::List all of the grab variable defined
set grab 
```

您不需要将可执行文件的输出保存到文件中。（当然，除非这是您的要求）。您可以使用 FOR /F 直接处理输出。FOR 命令有许多看起来几乎相同但行为却截然不同的变体。此变体使用单引号使 FOR /F 处理命令。

```
setlocal enableDelayedExpansion
for /L %%x in (1,1,2) do (

  for /f "delims=" %%i in ('genericOutput1.exe') do set "grab1-%%x=%%i"
  echo grab1-%%x variable string is !grab1-%%x!

  for /f "delims=" %%i in ('genericOutput1.exe') do set "grab2-%%x=%%i"
  echo grab2-%%x variable string is !grab2-%%x!
)

::List all of the grab variable defined
set grab 
```

请注意， FOR /F 将迭代每一行（无论是来自文本文件还是来自命令输出）。您的算法将只保存和打印最后一行的内容 - 每个连续的行将覆盖前一行的值。

# php - wordpress 安全客户端门户

> ID：11232473
> 
> 赞同：0
> 
> 时间：2012-06-27T18:12:29.187
> 
> 标签：php, wordpress, security

基本上，我有一个新客户，她在使用她的会计网站的以下功能：

*   现有客户可以登录的客户区。
*   登录中的一个地方是客户可以访问诸如纳税申报表等文件的地方。

自然这一切都需要非常安全。我的问题是：

是否有一个 Wordpress 插件可以实现这一点，或者他们的开源 php 框架允许我这样做。

我可以自己使用 php 和 mysql PDO 完成该过程，但除了加密密码之外，我不确定我可以编程的安全性是否足够。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:17:19.733

您可以考虑尝试 WP-Client

这是一个 Wordpress 插件，它是从头开始构建的，用作具有您描述的确切功能的客户端门户，以及更多功能。

[http://WP-Client.com](http://WP-Client.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:40:54.333

如果有任何插件，它们可能无法达到您正在寻找的安全性。

我建议将所有敏感数据存储在 public_html 目录之外，以便不受欢迎的访问者/机器人/等无法掌握。

您还应该使用 SSL 证书加密所有发送/接收的数据。

听起来您正在寻找很多功能——上传这些文档、根据用户访问它们等的能力。您可能需要自己编写代码或找到适合您的非 Wordpress 解决方案。也许您可以使用基于 Wordpress 安装的登录凭据...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:14:46.170

**更新**

自从最初写这篇文章以来，我现在同意下面 user1744188 的回答。WP-Client 是专门为这个任务编写的，对我来说它填补了 Wordpress 市场的一大空白。我得到的服务非常好，考虑到您获得的所有功能和资源，我认为它的价格合理。

但是，绝对应该注意的是，插件本身不是开源的。插件根目录中的主要 wp-client.php 文件是一个已编码的 0.5Mb 大文件。每种方法都已被混淆，并与使用许可证密钥的某种解密方法相关联。

所以它做了它所做的，但你不能轻易地扩展或修改它。

**原始答案**

我同意约翰的观点——我个人认为我根本不会为此使用 Wordpress。然而，我不久前做了一份工作，他们在构建结束时就向我提出了这个要求，所以我别无选择。

我使用 S2 Member 完成了它，效果很好。这是关于如何做到这一点的持续线程，开发人员是一个非常乐于助人的人，他制作了一个视频来帮助和支持请求。

www.primothemes.com/forums/viewtopic.php?t=586

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T10:22:37.533

它是连接 CRM 到 CMS 的 WordPress 插件，意味着您的所有数据都将存储在 CRM 中以便更好地管理。你可以在这里找到，他们为**[WordPress 客户端](https://www.crmjetty.com/wordpress-customer-portal.htm)**提供最佳解决方案。

# python - 有没有更好的方法来查找字符串是否包含数字？

> ID：11232474
> 
> 赞同：16
> 
> 时间：2012-06-27T18:12:30.293
> 
> 标签：python, string

我正在使用包含数字和字母数字的字符串，或者只是数字，但不仅仅是字母。为了测试错误匹配，我需要检查字符串是否包含至少一个数字，如果不包含则打印错误消息。我一直在使用以下代码：

```
s = '0798237 sh 523-123-asdjlh'

def contains_digits(s):
    for char in list(s):
        if char.isdigit():
            return True
            break
    return False

if contains_digits(s) == True:
    print s
else:
    print 'Error' 
```

有没有更pythonic或更简单的方法来做到这一点，或者这就足够了？另外，我不能只检查字符串是否是字母数字，因为字符串可能包含各种符号（'-'、空格等）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-27T18:14:47.327

这是使用正则表达式的地方之一：

```
_digits = re.compile('\d')
def contains_digits(d):
    return bool(_digits.search(d)) 
```

小演示：

```
>>> _digits = re.compile('\d')
>>> def contains_digits(d):
...     return bool(_digits.search(d))
... 
>>> contains_digits('0798237 sh 523-123-asdjlh')
True
>>> contains_digits('sh asdjlh')
False 
```

您可以使用[@Wallacolloo's answer](https://stackoverflow.com/a/11232523/100297)中描述的`any`方法，但这比简单的正则表达式要慢：`.isdigit()`

```
>>> import timeit
>>> timeit.timeit("contains_digits('0798237 sh 523-123-asdjlh')", 'from __main__ import contains_digits')
0.77181887626647949
>>> timeit.timeit("contains_digits_any('0798237 sh 523-123-asdjlh')", 'from __main__ import contains_digits_any')
1.7796030044555664 
```

该`if`方法与正则表达式相当：

```
>>> timeit.timeit("contains_digits_if('0798237 sh 523-123-asdjlh')", 'from __main__ import contains_digits_if')
0.87261390686035156 
```

但如果数字出现在文本中，情况会变得更糟：

```
>>> timeit.timeit("contains_digits('asdjlhtaheoahueoaea 11 thou')", 'from __main__ import contains_digits')
1.202538013458252
>>> timeit.timeit("contains_digits_any('asdjlhtaheoahueoaea 11 thou')", 'from __main__ import contains_digits_any')
5.0348429679870605
>>> timeit.timeit("contains_digits_if('asdjlhtaheoahueoaea 11 thou')", 'from __main__ import contains_digits_if')
3.707183837890625 
```

在 Mac OS X 10.7 上的 python 2.6 上测试的时间。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T18:15:46.340

使用`any`函数，传入一个序列。
如果序列中的*任何*元素为真（即在本例中为数字），则`any`返回 True，否则返回 False。[https://docs.python.org/library/functions.html#any](https://docs.python.org/library/functions.html#any)

```
def contains_digits(s):
    return any(char.isdigit() for char in s) 
```

但是，如果您担心性能，那么您当前的方法实际上更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-26T22:33:33.870

在阅读了上面的讨论之后，我很好奇这样的基于集合的版本的性能：

```
def contains_digit(s, digits=set('0123456789')):
    return bool(digits.intersection(s)) 
```

在我的测试中，这平均比`re`一台计算机上的版本略快，而另一台计算机上的版本略慢（？）。只是为了好玩，我也比较了其他一些版本。

```
import math
import re
import timeit

def contains_digit_set_intersection(s, digits=set('0123456789')):
    return bool(digits.intersection(s))

def contains_digit_iter_set(s, digits=set('0123456789')):
    for c in s:
        if c in digits:
            return True
    return False

def contains_digit_iter_str(s, digits='0123456789'):
    for c in s:
        if c in digits:
            return True
    return False

def contains_digit_re(s, digits=re.compile(r'\d')):
    return bool(digits.search(s))

def print_times(func, times):
    name = func.__name__
    average = sum(times) / len(times)
    formatted_times = ' '.join('{:.3f}'.format(t) for t in times)
    message = '{name:<31} {times} ~{average:.3f}'
    print(message.format(name=name, times=formatted_times, average=average))

funcs = [
    contains_digit_set_intersection,
    contains_digit_iter_set,
    contains_digit_iter_str,
    contains_digit_re,
]

cases = [
    '1bcdefg7',
    'abcdefg7',
    'abcdefgh',
    '0798237 sh 523-123-asdjlh',
    'asdjlhtaheoahueoaea 11 thou',
]

for func in funcs:
    times = []
    for case in cases:
        func_case = '{func.__name__}("{case}")'.format(func=func, case=case)
        time = timeit.timeit(func_case, globals={func.__name__: func})
        times.append(time)
    print_times(func, times) 
```

两台计算机的样本运行（每种情况的时间和〜平均值）：

```
contains_digit_set_intersection 0.744 0.731 0.724 1.227 1.113 ~0.908
contains_digit_iter_set         0.264 0.541 0.566 0.260 1.068 ~0.540
contains_digit_iter_str         0.272 0.649 0.632 0.274 1.211 ~0.607
contains_digit_re               0.748 0.854 0.679 0.744 1.006 ~0.806

contains_digit_set_intersection 0.860 0.870 0.855 1.456 1.357 ~1.080
contains_digit_iter_set         0.285 0.613 0.617 0.307 1.163 ~0.597
contains_digit_iter_str         0.295 0.748 0.799 0.288 1.595 ~0.745
contains_digit_re               1.157 1.236 0.927 1.086 1.450 ~1.171 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-05T19:14:49.687

对于那些寻求更短解决方案的人：`any(d in s for d in'0123456789')`

# c# - 如何返回包含给定*部分*组合的所有组合？

> ID：11232475
> 
> 赞同：3
> 
> 时间：2012-06-27T18:12:32.713
> 
> 标签：c#, permutation, combinations

我有这个 c# 类，它计算*n 选择 k*，然后按字典顺序生成所有可能的组合。它还可以返回每个组合的订单号，例如：传递 [1,2,3,4,5] 将返回 1 给定 n 选择 k(30,5)，142506 为 [26,27,28,29,30] .

有没有办法返回包含**部分**组合的所有订单号？因此，如果我通过 [1,2,3,4]，它将返回：1,2,3,...25,26。

```
1: [1,2,3,4,5]
2: [1,2,3,4,6]
3: [1,2,3,4,7]
...
25: [1,2,3,4,29]
26: [1,2,3,4,30] 
```

我需要这个来抽奖。我希望每张票都有它的组合订单号，并且我需要在抽出 5 个球时显示可能获胜者的总数。现在每张票都有实际的组合，我运行查询以获得部分获胜者，但我想优化这个过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:23:52.440

您需要的组合`(n-d) choose (k-d)`是`d`固定抽奖次数。

当您生成它们时，它们不会有正确的数字（它们会跳过最后一个`d`数字而不是您想要的数字），而只是使用子列表的逆序映射重新编写您的组合：

（在伪 python 代码中，因为这根本与 C# 无关）

```
listing = [1, 2, ..., 30]
partial = [4, 7, 25]
draw_size = 5
remaining = listing - partial
reverse_order_mapping = [(index, item) in remaining.items_and_indexes]

n = listing.size  // 30
k = draw_size     // 5
d = partial.size  // 3

for comb in ((n-d) choose (k-d))
  actual_comb = comb.map(reverse_order_mapping)
  print actual_comb
end 
```

然后，您只需使用生成的组合调用您的函数（如果需要，在对其进行排序之后）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:19:01.443

您需要一个函数，对于组合 [a, b, c, d, e]，返回该组合的订单号。然后你可以得到组合集（可能的数字集减去已经选择的数字）选择（你还没有选择的数量），将已经选择的数字添加到每个组合中，重新排序每个组合，然后使用它获取订单号的函数。

编辑：这可能会有所帮助：saliu.com/bbs/messages/348.html

EDIT2：答案就在这里：[How to calculate the index (lexicographical order) when the combination is given](https://stackoverflow.com/questions/5307222/how-to-calculate-the-index-lexicographical-order-when-the-combination-is-given)

EDIT3：我为此尝试了一些 C# 代码：

```
private IEnumerable<int[]> CombinationsFor(int n, int k);
private int CombinationsCount(int n, int k);

private int IndexFor(int n, int[] combination)
{
    int k = combination.Count();
    int ret = 0;

    int j = 0;
    for (int i = 0; i < k; i++)
    {
        for (j++; j < combination[i]; j++)
        {
            ret += CombinationsCount(n - j, k - i - 1);
        }
    }

    return ret;
}

private IEnumerable<int> PossibleCombinations(int n, int k, int[] picked)
{
    int m = picked.Count();

    int[] reverseMapping = Enumerable.Range(0, n)
        .Where(i=>!picked.Contains(i))
        .ToArray();

    return CombinationsFor(n-m, k-m)
        .Select(c => c
            .Select(x=>reverseMapping[x])
            .Concat(picked)
            .OrderBy(x=>x)
            .ToArray()
        )
        .Select(c => IndexFor(n, c));
} 
```

# asp.net-mvc - MVC3 中的自定义正则表达式验证

> ID：11232478
> 
> 赞同：0
> 
> 时间：2012-06-27T18:12:40.510
> 
> 标签：asp.net-mvc, c#-4.0

我正在为我的一个 MVC3 项目实现自定义正则表达式验证器。

我已经能够使用自定义属性正确执行验证。

用以下自定义属性装饰的视图模型属性

[RegularExpressionIF("DependantProperty","TargetValue","Pattern","ErrorMessage")]

但我的要求是，我需要根据 Property2 值将 property1 值与某个正则表达式进行匹配。例如。属性 2 是一个下拉列表，具有值 1,2,3 。如果用户选择 1，则正则表达式模式将是 {REGX1}，对于 2 {REGX2} 就像这样。

我试图通过传递包含这些值的变量来修改属性。但是在构建.Net 坚持认为它应该是一个“常量”来传递。我可以对属性中的值进行硬编码，但我无法传递如下参数

[RegularExpressionIF("DependantProperty","TargetValue",patternDictionary,"ErrorMessage")]

如果有人能在这方面帮助我，那就太好了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:34:47.343

您需要在运行时使用反射来获取属性的值。

```
protected override ValidationResult IsValid(
    object value, 
    ValidationContext context)
{
    // DependantProperty is the string name of the dependant property
    PropertyInfo property = context.ObjectType.GetProperty(this.DependantProperty);
    object dependant = property.GetValue(context.ObjectInstance, null);

    // do something with dependant
} 
```

# assembly - 引导加载程序总是弄乱 Int 13h 调用以加载内核的前两个字节

> ID：11232481
> 
> 赞同：2
> 
> 时间：2012-06-27T18:12:52.020
> 
> 标签：assembly, bootloader, bios

[这是](https://docs.google.com/document/d/1J2vNReGoeXz7PoBzYHg3bwNpXeeOKkSmS3rmmd_yxmY/edit)我的引导加载程序代码，[这是](https://docs.google.com/document/d/1pjeP_NXKeuZQb8zmeLaMlWyh5YqWD34jZIQcxBBzPf0/edit)一个显示寄存器图片的文档（以防我做错了什么很重要），内存中位置 0x10000 的内容（我告诉引导加载程序加载内核），我的内核的源程序集，以及运行 Qemu 时的屏幕输出。

kernelStub.bin 一开始就有EB 1B（右跳转命令）。hda.img 在第二个扇区开始的 55 AA 之后有 EB 1B。进位标志在我的 load_mem 子例程中很清楚，表明它认为负载是好的。除了前两个总是 63 61 之外，所有字节都在内存中。

为什么 load_mem 例程总是错误地将扇区 2 的前两个字节加载到地址 0x10000 中，然后将其余部分正确？

引导加载程序代码：

更新：更改`jmp SYSADDR:0000`为`jmp 0x1000:0x0000`根据 Matthew Slattery 的更正。

```
;Very minimal boot loader 
BITS 16                ;Tell assembler to use 16-bit mode
jmp start              ;Jump over defines
SYSADDR  dw 0x1000     ;Load system at 0x10000
DRIVENUM db 0x80       ;Variable for drive number
HEADNUM  db 0
CYLNUM   db 0          ;Low bits of cylinder number
SECTNUM  db 2          ;Bits 6 and 7 high bits of cylinder number (0),
                       ;Bits 0-5 starting sector number (2)
NUMKERNELSECTS db 0x01 ;Will Probably Change! Number of sectors
                       ;to read from disk
load_msg    db 'Loading OS', 0
msg_2       db 'carry flag not clear', 0
load_worked db 'Load worked', 0

start:
    mov ax, 0x07C0     ;Set data segment to where BIOS loaded boot loader
    mov ds, ax
    mov si, load_msg   ;Simple text string to indicate loading
    call show_message
    call load_mem      ;Subroutine to load bytes from disk to location
                       ;pointed to by es
    jmp 0x1000:0x0000

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;Subroutines

;;;Show Message;;;
show_message:
    mov ah, 0x0E       ;int 0x10 print character to screen function
.repeat:
    lodsb              ;Get char pointed to by si, puts in al
    cmp al, 0          ;see if char is 0 (null)
    je .done           ;null signifies done
    int 0x10           ;If not null, print to screen
    jmp .repeat        ;Get next char

.done:
    ret

;;;Load Memory;;;
load_mem:
    xor ah, ah         ;ah=0, reset drive
    int 0x13           ;Call drive reset

    mov ax, [SYSADDR]
    mov es, ax         ;Destination- es:bx
    mov bx, 0
    mov dl, [DRIVENUM]
    mov dh, [HEADNUM]
    mov al, [NUMKERNELSECTS]
    mov ch, [CYLNUM]
    mov cl, [SECTNUM]
    mov ah, 0x02       ;ah=2, read drive
    int 0x13           ;Call read interrupt
    jnc exit           ;If carry flag is clear, exit

exit:
    ret

times 510 - ($-$$) db 0;Pad sector with 0
dw 0xAA55              ;Boot signature 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:08:12.220

> ```
> SYSADDR  dw 0x1000    ;Load system at 0x10000
> ...
> jmp SYSADDR:0000 
> ```

不做你想做的事。 `SYSADDR`是您想要的值的位置（`0x0002`此处），而不是值本身。

我认为执行任何发生的事情`0x0002:0000`（甚至不是真正的代码；它是中断向量表的一部分）会导致你的数据被乱写。

（顺便说一句，至少还有一个问题：第二个链接文档中的内核存根代码没有重置`ds`。）

* * *

编辑：

我看到你现在已经完成了这个工作，但为了完整起见，我对这两个字节中的神秘值有一个完整的解释，因为这个`jmp SYSADDR:0000`错误：

`0002:0000`，即地址`0x20`，是 的向量`INT 08h`。

处理程序的传统入口点地址`INT 08h`是`f000:fea5`（BIOS 倾向于保持传统，以便与直接使用入口点的代码兼容）。所以这个地址的字节几乎肯定是`a5 fe 00 f0 ...`.

如果您执行这些字节中的第一个，`a5`, 作为代码，它是一条`movsw` 指令，它将两个字节从 复制`ds:si`到`es:di`。

*   `ds`仍然是您的引导加载程序的数据段
*   `si`指向开头`msg_2`（您的`show_message`例程在打印后离开的地方`load_msg`）
*   `es`还是`0x1000`
*   `di`大概包含 0

因此，在之后发生的第一件事就是`jmp 0x0002:0000`从 一开始就复制到已加载扇区的前两个字节。`c``a``msg_2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:27:06.110

[我在这里](https://stackoverflow.com/questions/5699422/why-this-boot-loader-doesnt-working?rq=1)找到了关于我的内核第一次跳转的问题的关键细节。我不知道（至少在某些 BIOS 中）`jmp`使用`nop`.

一旦我将`nop`s 放入并设置了我的`ds`寄存器，它终于起作用了。

# java - Eclipse 3.7 Indigo-“安装新软件”没有进展：GWT Designer

> ID：11232486
> 
> 赞同：-1
> 
> 时间：2012-06-27T18:13:08.357
> 
> 标签：java, eclipse, gwt, eclipse-plugin, gwt-designer

将任何新软件/插件安装到我的 Eclipse 中，我真的很紧张。安装新软件对我不起作用！它上升到某个点并停在那里..我无法通过 eclipse 安装新插件，我必须获取 zip 文件并将插件和功能放入相应的文件夹并重新启动 eclipse。

我不知道为什么会这样？我猜防火墙和互联网没有问题。有一些插件，如 GWT 设计器，需要仅使用 Eclipse 安装，并且无法通过 zip 文件提取正确安装。

有人遇到过类似的问题吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:15:40.430

问题的原因是 AVG Antivirus 阻止了安装。因此，以后请注意不要在计算机上运行会阻止在 Eclipse 中安装软件的防病毒程序。

# jsf - 启动 Glassfish 服务器时出错 + BIRT 依赖项

> ID：11232489
> 
> 赞同：2
> 
> 时间：2012-06-27T18:13:15.787
> 
> 标签：jsf, glassfish, birt

我正在尝试使用 Eclipse Indigo 3.7.1 在 GlassFish 服务器（v 3.1.2）上部署 Java Web 应用程序，但我总是遇到此异常：

```
cannot Deploy MetricsReportingProject
Deployment Error for module: MetricsReportingProject: Error occurred during deployment: 
Exception while loading the app : 
java.lang.IllegalStateException: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException:
java.lang.RuntimeException:
com.sun.faces.config.ConfigurationException: 
java.util.concurrent.ExecutionException: 
com.sun.faces.config.ConfigurationException: 
Unable to parse document 'bundle://136.0:1/com/sun/faces/jsf-ri-runtime.xml': 
DTD factory class org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl does not extend from DTDDVFactory.. Please see server.log for more details. 
```

这是我的项目的依赖项：

*   Hibernate 3.4.0 依赖项
*   BIRT DE 和 BIRT 查看器 3.7.1
*   JSF 2.0
*   PrimeFaces 3.2

该项目在我创建它时正在运行，但是在进行了一些修改并多次重新启动服务器后出现了问题。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T04:29:13.093

我手同样的问题。

Glassfish 提供了一个 -xercesImpl-2.9.1.jar -xml-apis-1.3.04.jar

但是在Birt Lib中，他们有xercesImpl-2.9.0.jar

我刚刚从 Birt Lib 中删除了 xercesImpl-2.9.0.jar 并重新部署。它工作得很好。

# c# - 使用具有截然不同的域和视图模型的映射框架？

> ID：11232491
> 
> 赞同：1
> 
> 时间：2012-06-27T18:13:23.847
> 
> 标签：c#, asp.net-mvc, viewmodel, automapper, valueinjecter

如果我有两个非常不同的模型，那么使用[Auto Mapper](https://github.com/AutoMapper/AutoMapper)或[Value Injecter](http://valueinjecter.codeplex.com/)等映射框架是否违背了目的？

例如，假设我有两个结构相同的模型，但每个属性名称都不同，因此所有常规逻辑都无用。坚持手动映射这两个模型是否也一样好？

我想我主要是想了解：

1) 除了我从其按惯例映射中获得的代码节省之外，使用映射框架还有什么好处吗？

2）在映射框架中为上述场景设置映射是否比在这种情况下手动映射更容易？（看起来不像。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:20:11.357

1) 除了我从其按惯例映射中获得的代码节省之外，使用映射框架还有什么好处吗？

我认同。这是一次性的事情之一。当然，您可以编写代码以手动 DTO 从一个对象到另一个对象，可能与创建所有自定义映射规则一样快。但是第二次需要 DTO 时，使用映射框架是有回报的。

2）在映射框架中为上述场景设置映射是否比在这种情况下手动映射更容易？（看起来不像。）

我认为大致相同：

```
Mapper.CreateMap<EntityModel, ViewModel()
    .ForMember(d => d.Prop1, o => o.MapFrom(s => s.Property1))
    .ForMember(d => d.Prop2, o => o.MapFrom(s => s.Property2))
    .ForMember(d => d.Prop3, o => o.MapFrom(s => s.Property3))
        ...
    .ForMember(d => d.PropN, o => o.MapFrom(s => s.PropertyN))
; 
```

使用此映射，您的所有 DTO 代码将如下所示：

```
var model = Mapper.Map<ViewModel>(entityInstance); 
```

...与...如果您手动编辑它，它对我来说看起来差不多：

```
var model = new ViewModel
{
    Prop1 = entityInstance.Property1,
    Prop2 = entityInstance.Property2,
    Prop3 = entityInstance.Property3,
        ...
    PropN = entityInstance.PropertyN,
}; 
```

AutoMapper 优于 ValueInjecter 的另一个很酷的事情是您只需要定义 1 个映射，然后它就可以用于映射单个实例和集合。

```
var models = Mapper.Map<ViewModel[]>(entityInstances); 
```

... 相对

```
var models = entityInstances.Select(new ViewModel
{
    Prop1 = entityInstance.Property1,
    Prop2 = entityInstance.Property2,
    Prop3 = entityInstance.Property3,
        ...
    PropN = entityInstance.PropertyN,
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:19:41.213

> 例如，假设我有两个结构相同的模型，但每个属性名称都不同，

是**您**在设计视图模型 => 您可以完全控制它们（与您的域模型相反，例如，可能从数据库或设计师的某些东西自动生成）=> 您可以相应地命名它们的属性:-)

# javascript - 全局数组未定义

> ID：11232493
> 
> 赞同：0
> 
> 时间：2012-06-27T18:13:25.740
> 
> 标签：javascript, arrays, undefined, global

我有一个简单的 jQuery 脚本来显示/隐藏列表元素手风琴风格以及一个全局布尔数组来保存显示/隐藏的列表。但是，当从显示/隐藏不同的子列表切换时，布尔数组未定义，即（我使用 form_nav_links 调用函数以显示该列表，然后当我尝试立即显示 help_nav_links 时，该数组未定义，需要额外单击）。有人可以帮我解决这个问题吗？这是我所拥有的：

```
var listsOn = Boolean[2];
listsOn = [false, false];
var form_links = 0, help_links = 1;

function toggleView(subList) {
    var i;

    switch(subList){
        case "form_nav_links":
            i = form_links;
            break;
        case "help_nav_links":
            i = help_links;
            break;
        };

    if(listsOn[i]){
        $("." + subList).slideUp(1000);
        listsOn[i] = false;
        }
    else {
        $("." + subList).slideDown(1000);
        listsOn[i] = true;
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:21:48.207

你真的应该在这里使用关联数组：

```
var listsOn = {
  form_nav_links: false,
  help_nav_links: false
};

function toggleView(subList) {
  if(typeof listsOn[subList] !== 'undefined') {
    if(listsOn[subList]{
        $("." + subList).slideUp(1000);
        listsOn[subList] = false;
    }
    else {
        $("." + subList).slideDown(1000);
        listsOn[subList] = true;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:46:11.887

我通过使用 slideToggle() 解决了这个问题

# stata - 有引号和数字时的Stata宏和for循环

> ID：11232494
> 
> 赞同：1
> 
> 时间：2012-06-27T18:13:32.503
> 
> 标签：stata, disp

假设你有宏

```
global LabNames "3M"  "ABBOTT"  "MERCK SHARP DOHME" 
```

我使用引号是为了正确分组单词（MERCK SHARP DOHME 是一家公司，而不是三家不同的公司）。我正在尝试编写一个程序来遍历一个变量并在它具有 LabNames 字符串之一作为子字符串时替换它。

让我们从可以正常工作的代码部分开始。

```
foreach company of global LabNames {
     display "`company'"
} 
```

在我的情况下，此代码根据需要进行 - 列出了 3 家不同的公司（不是 5 家）。但是，以下代码无法正确运行。3M 就坏了。

```
gen hasLab = 0

foreach company of global LabNames {
     display "`company'"
     replace hasLab = (index(lab,`"`company'"'))
     replace lab = `"`company'"' if hasLab > 0 
} 
```

如果我们将此代码应用于

```
 lab
    asdf 3M
    3M
    ABBOTT
    ABBOTT asdf
    MERCK SHARP DOHME AS
    MERCK SHARP DOHME 4 
```

我们得到

```
 lab
    3M
    asdf 3M
    ABBOTT
    ABBOTT
    MERCK SHARP DOHME
    MERCK SHARP DOHME 
```

您知道该怎么做才能使代码正确处理 3M 案例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:28:32.400

您的全局中有不必要的引号。越来越乱了 看

```
. global LabNames "3M" "ABBOTT" "MERCK SHARP DOHME"
. mac list LabNames
LabNames:       3M" "ABBOTT" "MERCK SHARP DOHME 
```

你可以输入

```
global LabNames 3M ABBOTT "MERCK SHARP DOHME" 
```

看到`help macrolists`一些提示。

# asp.net-mvc - asp.net mvc 和 jquery

> ID：11232495
> 
> 赞同：0
> 
> 时间：2012-06-27T18:13:32.933
> 
> 标签：asp.net-mvc, jquery

在我的 MVC 视图中（使用 VS 2012 RC），我试图使用 jQuery 来解析从我的控制器返回的 XML 数据。但是，我的重点是利用**jQuery $.ajax() 函数。** 问题是 ajax 没有从我的控制器返回 XML Doc；它返回一些格式化的 Html。

***示例：*** 我**确实可以**将它直接返回到 a 中的视图，但我不希望整个 XML 文档以这种方式显示。例如，从**@Model 对象获取 XML：**

```
@model RazorMvc.Models.PortfolioResponse
@{
    ViewBag.Title = "PortfolioList";
}              
 ...
<div class="XmlResp">
        <@Html.Raw(@Model.XmlPortfolioResponse.OuterXml.ToString())>
</div> 
```

但是，我更喜欢使用 $.ajax() 来检索我的 XML Doc。唯一的问题是我的控制器代码的返回值不是 XML；它返回一些格式化的 HTML 文本：

这是一个测试 div ！！！

显示的是一些格式化的 HTML，如下所示：

哇，我们到了某个地方吗？！！！我的公司解决方案注册登录首页关于联系我们投资组合列表投资组合列表这是一个测试 div !!!© 2012 - 我的 ASP.NET MVC 应用程序FacebookTwitter

这是jQuery代码。我希望在 DATA 对象中获得 XML 文档：

```
<script type="text/javascript">
    $.ajax({
        url: "/Portfolios/PortfolioList",
        type: "POST", 
        async: true,
        success: function(data){
            if (!data)
                alert("No xml data returned.");
            else{
                var $xml = $(data);
                var $title = $xml.find("portfolioSummary").text();

                $('.xmlTest').text("Wow are we getting somewhere ?!!!");
                $('.xmlTest').append($xml.text());
                alert("success!");                
            }
        },
        error: function (error) {
            alert("failed");
        }

    }); 
```

一些指导和建议将不胜感激。谢谢，鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:17:17.283

你不需要视图。您可以直接从控制器操作返回 XML：

```
[HttpPost]
public ActionResult PortfolioList()
{
    string xml = ...
    return Content(xml, "text/xml");
} 
```

现在，由于您已设置正确的内容类型响应标头，jQuery 将知道如何解析它，并且在您的成功回调中，您将能够直接使用此 XML 流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:17:04.310

您可能需要在 .ajax() 设置中将 dataType 指定为 XML，如下所示

```
$.ajax({
            url: "/Portfolios/PortfolioList",
            type: "POST", 
            //add this line
            dataType: "XML",
            async: true,
            success: function(data){
                if (!data)
                    alert("No xml data returned.");
                else{
                    var $xml = $(data);
                    var $title = $xml.find("portfolioSummary").text();

                    $('.xmlTest').text("Wow are we getting somewhere ?!!!");
                    $('.xmlTest').append($xml.text());
                    alert("success!");                
                }
            },
            error: function (error) {
                alert("failed");
            }

        }); 
```

根据您的需要，该功能的[JQuery 文档](http://api.jquery.com/jQuery.ajax/)中还有其他选项

# android - 多个APK的Play如何决定下载哪个

> ID：11232497
> 
> 赞同：0
> 
> 时间：2012-06-27T18:13:37.267
> 
> 标签：android, google-play, apk, android-manifest

我将创建一个平板电脑 APK，它不具备我的手机 APK 所具有的某些功能。这基本上是唯一的区别，但是由于平板电脑 APK 的权限较少（没有手机要求），我如何确保拥有 PHONES 的人将获得 APK 的 PHONE 版本？

IE，表用户只会获得没有电话权限的版本，因为他们的设备不支持它，我得到了。

但是手机用户，可以在没有手机要求的情况下运行 APK，也可以在有手机要求的情况下运行 APK，那么如何使用 Play 中的多个 APK 设置确保手机用户获得 APK 的 PHONE 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:22:16.043

查看清单文件的[“兼容屏幕”标签的文档。](http://developer.android.com/guide/practices/screens-distribution.html)

# jpa - Sybase ASE 15.5 和哪个 JPA 实现？

> ID：11232501
> 
> 赞同：0
> 
> 时间：2012-06-27T18:13:53.113
> 
> 标签：jpa, stored-procedures, database-schema, sap-ase

哪个 JPA 实现支持针对 Sybase ASE 15.5 的以下功能，以及如何支持？

*   模式导入（有一个现有的服务器正在运行；Hibernate 甚至没有找到现有的表。）
*   模式导出（可能是新的东西；Hibernate 似乎不支持 UNIVARCHAR）
*   存储过程支持
*   存储过程导入？（如模式导入）
*   UNIVARCHAR 类型支持（Hibernate 本身不生成 UNIVARCHAR 列，OpenJPA 怎么样？）
*   文本类型支持。
*   架构迁移，包括数据迁移工具

还有其他优点/缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:29:19.133

JPA 是运行时，而不是开发工具。您的大多数问题似乎都与工具相关，我建议使用 Eclipse JPA (Dali)。

只要它们生成标准的 JPA 元数据，您就可以将所需的任何模式工具与任何 JPA 提供程序一起使用。

EclipseLink 支持调用 Sybase 上的存储过程，包括输出参数和多个结果集。任何 JPA 提供程序都应该在运行时使用 UNIVARCHAR 和 TEXT，要在默认模式生成中使用该类型，您可以在 @Column columnDefinition 中设置它们，或者在 EclipseLink 中自定义 SybasePlatform 以默认使用该类型。

# boost - 提升 unix 中的静态链接

> ID：11232502
> 
> 赞同：0
> 
> 时间：2012-06-27T18:13:57.843
> 
> 标签：boost, static-linking

我在 Unix，GCC 中使用 Boost 库。我阅读了以下主题：[提升静态链接](https://stackoverflow.com/questions/2328439/boost-static-linking)并将 -static 添加到我的 Makefile 中。但是，这不起作用。

这是我的Makefile：

```
all: nbbo

nbbo: nbbo.o reader.o
    g++ -static -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -L/usr/lib -lboost_filesystem -lboost_serialization -lboost_iostreams -lz -I /usr/include/boost -o nbbo nbbo.o reader.o

nbbo.o: nbbo.cpp
    g++ -static -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -I /usr/include/boost -c -o nbbo.o nbbo.cpp

reader.o: reader.cc reader.h
    g++ -static -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -I /usr/include/boost -c -o reader.o reader.cc

clean:
    rm *.o 
```

这是错误消息：

```
nbbo.o: In function `__tcf_10':
nbbo.cpp:(.text+0x3d9): undefined reference to `boost::serialization::extended_type_info::key_unregister() const'
nbbo.cpp:(.text+0x3e3): undefined reference to `boost::serialization::typeid_system::extended_type_info_typeid_0::type_unregister()'
nbbo.cpp:(.text+0x3fb): undefined reference to `boost::serialization::typeid_system::extended_type_info_typeid_0::~extended_type_info_typeid_0()'
etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T22:24:37.863

您使用的是哪个“UNIX”？使用 -static 标志应该可以在 linux 上正常工作。但不是在 OSX 上。在 OSX 上，您必须删除静态标志并提供库的完整路径才能静态链接。我不知道这将如何在其他“UNIXes”上工作

例如。

```
g++ ..... /path/to/your/lib.a ... -o .. 
```

# jquery - 我的 jQuery UI 自动完成功能不起作用？

> ID：11232503
> 
> 赞同：2
> 
> 时间：2012-06-27T18:14:19.387
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-autocomplete

在这里，我正在尝试实现 jQuery 我有两个主要文件，一个是 db.php，其中包含这个东西：

```
<?php

$connection = mysql_connect("localhost","root","");
$db = mysql_select_db("auto",$connection);

$sql = "SELECT * FROM data";

$result = mysql_query($sql,$connection);
//$arr = array();
while($row = mysql_fetch_array($result)){

echo $row['name']."\n";
}
//echo json_encode($arr);

mysql_close($connection);
?> 
```

然后我有另一个名为 index.html 的文件，我在其中调用 jQuery 函数：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.8.custom.css">
<link rel="stylesheet" type="text/css" href="css/autocomplete.css">
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.custom.min.js"></script>
<script>

$(document).ready(function(){
    $("#example").autocomplete("db.php");
  });

</script>
</head>

<body>

Auto:<input id="example" type="text">

</body>
</html> 
```

但我无法运行任何代码你能告诉我为什么吗？我是 jQuery 的新手，所以为错误道歉。

PS：我尝试使用 json 编码功能，因为我搜索并发现它可能是 Json 数据的原因（我分配给`$arr`然后回显 jsonencode）但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:25:04.767

jQuery-ui 自动完成可以探测服务器端脚本以获取自动完成数据，但脚本必须以以下两种变体中的任何一种以 JSON 格式返回该数据：

> 字符串数组：
> 
> `[ "Choice1", "Choice2" ]`
> 
> 具有标签和 [或] 值属性的对象数组：
> 
> `[ { label: "Choice1", value: "value1" }, ... ]`

所以你需要稍微修改一下你的 PHP 代码——这`json_encode`是正确的做法：

```
$arr = array();
while($row = mysql_fetch_array($result)){
    $arr[] = $row["name"];
}
echo json_encode($arr); 
```

你的 JavaScript 也需要一些修复：

```
 $( "#example" ).autocomplete({
        source: "db.php"
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:41:47.503

我可以建议你

1.  安装 Firebug 扩展，请使用 Mozilla 浏览器帮助您调试此类问题。
2.  通过在 Firebug 中调试它来确保没有 javascript 或 jquery 语法错误。
3.  确保您的应用程序向 db.php 发出了请求，您可以在 firebug 控制台中看到它。

我注意到您的 jQuery 语法是错误的。请参阅此处以供参考：http: [//jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)

请注意，他们都没有直接指定字符串，总是包含源属性。

可能是您忘记指定“源”属性。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T05:45:00.443

好的，这就是我想出的解决方案，我将其发布在答案中，这样如果其他人在使用它时遇到问题，可以理解基本知识，而不会像我一样到处乱跑和乱搞，您可以将其作为使用的简短简单教程Jquery UI 自动完成：

首先在您的 mysql 服务器中创建一个数据库名称**auto**并将此转储查询放入 SQL 中或创建一个名为**auto.sql**的文件并将所有以下内容放入该文件中，然后通过进入**您**刚刚创建的数据库（即**“auto”）从****phpmyadmin**导入它：

 ****```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Jun 27, 2012 at 06:35 PM
-- Server version: 5.5.24-log
-- PHP Version: 5.3.13

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `auto`
--

-- --------------------------------------------------------

--
-- Table structure for table `data`
--

CREATE TABLE IF NOT EXISTS `data` (
  `name` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `data`
--

INSERT INTO `data` (`name`) VALUES
('fahim'),
('asim'),
('yasir'),
('jalil'),
('birdy'),
('gudu'),
('zalim'),
('papu'),
('ozair'),
('saima');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

现在在您的**XAMPP 或 WAMP 或**您用作自动的任何 Web 服务器中创建一个文件夹，并制作以下​​文件并将其内容按相应顺序放置：

第一个文件是**db.php**：

```
 <?php

    $connection = mysql_connect("localhost","root",""); 
//make sure you change the hostname, username and password according to your setting
    $db = mysql_select_db("auto",$connection);

    $sql = "SELECT * FROM data";

    $result = mysql_query($sql,$connection);
    $arr = array();
    while($row = mysql_fetch_array($result)){

    $arr[] = $row['name']."\n";
    }
    echo json_encode($arr);

    mysql_close($connection);

    ?> 
```

制作另一个名为**index.php**的文件并放入以下内容：

```
<html>
<head>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/black-tie/jquery-ui.css" type="text/css" />
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js'></script>
<script>

$(document).ready(function() {
        $( "#AC" ).autocomplete({
            source: "db.php"
        });
    });

</script>
</head>

<body>

 <form>
     Text Box: <input id="AC" type="text" />
    </form>
</body>
</html> 
```

**另一件事请注意，我正在使用在线 Google API 来检索脚本库和 CSS 文件，因此在测试此代码之前请确保您已连接到互联网。**

尝试运行代码，它将像魅力一样运行:)....对于新手来说非常简单，这就是为什么我没有解释它...只是一个简单的术语，我从数据库中获取数据并完成所有这些以 jason 格式回显数据，因为 Jquery UI 自动完成默认需要 Jason 数据！

希望能帮助到你 ：）

* * *

另一件事我注意到，在萤火虫中，每当我输入某些内容时，此自动完成功能都会向 Db 页面发送一个 Ajax 请求，我从中获取结果，并在该请求中发送一个变量名术语，因此如果我在**db.php**中获取该变量文件我也可以在我的 SQL 中使用它来检索特定*字符串*，因为在上述方法中，它将显示从数据库中检索到的所有记录，所以如果我只想获取特定术语，例如我在文本框中输入一个单词***“fa”*** **index.html**文件我希望它只从数据库中检索那些包含字符串“ ***fa”****的名称*，因为我可以使用该变量并将其放入 SQL 语句中，我可以使用 SQL*`$_GET['term']``LIKE`运算符来查找某个模式，我将更新**db.php**文件，如下所示：*

 *```
<?php

    $connection = mysql_connect("localhost","root",""); 
//make sure you change the hostname, username and password according to your setting
    $db = mysql_select_db("auto",$connection);

    $sql = "SELECT * FROM data WHERE name LIKE '%".$_GET['term']."%'";

    $result = mysql_query($sql,$connection);

    //print_r ($result);

    $arr = array();
    while($row = mysql_fetch_array($result)){

    $arr[] = $row['name']."\n";
    }
    echo json_encode($arr);

    mysql_close($connection);

    ?> 
```

现在我在做什么，我对**SQL**说让我得到具有`$_GET['term']`正在检索的字符串模式的名称:)....！！T*他很简单对* ??

如果您想了解有关 LIKE 运算符的更多信息，请查看此链接[http://www.w3schools.com/sql/sql_like.asp](http://www.w3schools.com/sql/sql_like.asp)*****

# memory - Web服务器内存泄漏问题

> ID：11232509
> 
> 赞同：0
> 
> 时间：2012-06-27T18:14:36.160
> 
> 标签：memory, symfony1, webserver

我正在使用 symfony 1.4 创建一个约会网站（这是我第一个使用 symfony 的项目）。问题是如果只有 10 个或更少的用户在线，服务器就会冻结。我尝试使用 yslow 优化我的 js、css、sprites，我得到了 A 级，但问题仍然存在。这就是为什么我认为我构建应用程序的方式可能是错误的，所以这里是网站 naijaconnexion.com 我正在向你寻求建议和要做的事情，所以我克服了这个问题

如果我不够清楚，请问，如果您想要 cpanel 管理员访问权限，我会发布它

我真的很需要你的帮助

例如，我的主页上有此代码操作它看起来不错还是需要优化以及如何

```
 $this->me = $this->getUser()->getGuardUser()->getPerson();
    $this->cities = Doctrine_Core::getTable('City')->findByDql("zipcode=''");
    $this->countries = Doctrine_Core::getTable('City')->findByDql("zipcode='10'");
    $this->contacts = $this->me->getContacts();
    $this->favorites = $this->me->getFavorites();
    $this->matches = $this->me->getMatches();
    $this->pager = new sfDoctrinePager('Conversation', sfConfig::get('app_home_conversations_per_page'));
    $this->pager->setQuery($this->me->getConversationsQuery());
    $this->pager->setPage($request->getParameter('page', 1));
    $this->pager->init(); 
```

没有 HYDRATE_ARRAY 我可以做到这一点

如果我使用 HYDRATE_ARRAY，我可以做 $this->contacts[0]['username']; 这样的事情吗？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:47:15.430

问题是教义...

尝试获取所需的值作为数组并设置限制！

以下查询返回了多少对象：

```
$this->cities = Doctrine_Core::getTable('City')->findByDql("zipcode=''");
$this->countries = Doctrine_Core::getTable('City')->findByDql("zipcode='10'");
$this->contacts = $this->me->getContacts();
$this->favorites = $this->me->getFavorites();
$this->matches = $this->me->getMatches(); 
```

? 不要忘记它们是引用其他对象的对象！

是的，这会奏效`$this->contacts[0]['username'];`。

如果您将表与学说查询连接起来，您也可以访问相关实体 - 无需执行额外的查询。

```
$this->contacts = Doctrine_Core::getTable('Contact')
        ->createQuery('c')
        ->leftJoin('c.Users u')
        ->addWhere('...')
        ->execute(array(), Doctrine_Core::HYDRATE_ARRAY);

$this->contacts[0]['Users'][0]['username'] 
```

# javascript - 如何使用 javascript 从 iFrame 中获取父协议？

> ID：11232510
> 
> 赞同：2
> 
> 时间：2012-06-27T18:14:41.460
> 
> 标签：javascript, iframe

我有两个 CDN 域，一个通过 https 提供内容，另一个通过 http。我正在创建一个小部件（在 iframe 内），它可以在各种域中使用，有时在安全页面中使用，有时在安全页面中使用。有没有办法从小部件的 iFrame 中使用 JavaScript 推断父协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:18:42.757

我想通了，如果我在我的小部件的 iframe 中省略协议，那么它将继承父级的协议，例如：

在我的小部件 html 中：

```
<script>document.write("my protocol is " + document.location.protocol);</script> 
```

指向我的小部件的 iframe 代码（插入其他站点）：

```
<iframe src="//my-widget.example.com/widget"></iframe> 
```

这需要 my-wdiget.example.com/widget 为安全和不安全的连接工作（即：[http://my-widget.example.com/widget](http://my-widget.example.com/widget)和[https://my-widget.example.com/widget](https://my-widget.example.com/widget)应该两者都指向相同的内容）但这没关系，因为在我的情况下，我无法控制的唯一域是用作 CDN 的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:17:51.430

您可以使用以下方法从主窗口获取信息：

```
window.parent. 
```

# php - $_GET['$something']; 我究竟做错了什么？

> ID：11232511
> 
> 赞同：1
> 
> 时间：2012-06-27T18:14:43.740
> 
> 标签：php, sql

我正在尝试为 GPT 脚本构建一个通用的回发系统，但是我遇到了一些问题。

我不确定PHP中是否允许我所做的事情，所以这可能是问题所在，但这就是我得到的：

```
$ip = cleanQuery($_SERVER['REMOTE_ADDR']);
$getaffip = mysql_query("SELECT * FROM affiliates WHERE affip = '".$ip."' OR affip2 = '".$ip."' OR affip3 = '".$ip."' OR affip4 = '".$ip."'");
$affinfo = mysql_fetch_array($getaffip);

$affname = $affinfo['name'];
$campidi = $affinfo['campid'];
$subidi = $affinfo['subid'];
$ratei = $affinfo['rateid'];
$statusi = $affinfo['creditstatus'];
$credit = $affinfo['creditid'];
$reverse = $affinfo['reverseid'];

$subid = cleanQuery($_GET['$subidi']);
$rate = cleanQuery($_GET['$ratei']);
$status = cleanQuery($_GET['$statusi']);
$campid = cleanQuery($_GET['$campidi']); 
```

这意味着它正在提取特定会员在将信息发送到您的回发时使用的变量，例如，他们会将其发送到回发 URL：

```
http://yoursite.com/postback/postback.php?campaignid=11546&yti=me&credit=1 
```

提取将`$affinfo`提取特定会员发送的定义信息，如上面链接`$subidi`中发布的会员将是`yti`并且`$campidi`将是`campaignid`，但`$_GET`不会提取该信息。如果我将其更改为`$_GET['yti']`; 在这种情况下，但这不会使其具有普遍性，因为所有附属公司在将信息发送到回发脚本时不会使用相同的变量。

我在想`$_GET`不支持`$values`，那么让它获得正确信息的最佳途径是什么，或者我只是在这里有一些我忽略的错字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:16:19.620

如果它们是变量，请不要引用键：

```
$subid = cleanQuery($_GET[$subidi]);
$rate = cleanQuery($_GET[$ratei]);
$status = cleanQuery($_GET[$statusi]);
$campid = cleanQuery($_GET[$campidi]); 
```

如果您使用双引号而不是单引号，它会起作用，但是不必要地引用变量是没有意义和糟糕的做法。变量将被插在双引号内，最终给出你想要的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:16:41.550

引用太多:) 应该是这样的：

```
$subid = cleanQuery($_GET[$subidi]);
$rate = cleanQuery($_GET[$ratei]);
$status = cleanQuery($_GET[$statusi]);
$campid = cleanQuery($_GET[$campidi]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T18:16:14.007

不计算单引号中的变量。双引号是。

```
$foo = 'var';
echo 'my $foo'; // my $foo
echo "my $foo"; // my var 
```

但是在这种情况下你不应该使用任何引号

# ruby-on-rails - 只有在 Rails 服务器启动时才需要`require`

> ID：11232514
> 
> 赞同：0
> 
> 时间：2012-06-27T18:15:00.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我注意到即使我启动了一个 rake 任务，ActiveAdmin 也会被初始化和加载。有没有办法指定 ActiveAdmin 创建的所有文件*仅*在 rails 服务器启动时才`app/admin`加载？

 *之所以有问题，是因为当您执行以下操作时：

```
ActiveAdmin.register Tip do
  filter :score_type, :as => :select, :collection => Tip.all
end 
```

然后您尝试执行 a `rake db:create`，然后执行 a ，`rake db:migrate`加载此文件但 Tip 尚不存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:51:45.590

这回答了你的问题，但我相信不会解决你真正的问题。

在 Ruby 中，判断一个常量是否被定义：

```
Object.const_defined? "Tip"
 => false 
class Tip; end
> Object.const_defined? "Tip"
 => true 
```

因此，您可以像这样包装您的 ActiveAdmin 定义：

```
if Object.const_defined? "Tip"
  ActiveAdmin.register Tip do
    filter :score_type, :as => :select, :collection => Tip.all
  end
end 
```*

# qt - 以独立于平台的方式在 QWidget 上渲染 SDL_surface

> ID：11232516
> 
> 赞同：3
> 
> 时间：2012-06-27T18:15:10.883
> 
> 标签：qt, sdl

我有一个`SDL_surface`在自己的窗口中播放视频。我希望这个窗口呈现在`QWidget`. 我想要一个通用的解决方案，因为我的目标是 OSX、Windows 和 Linux。

我遇到了[两种解决方案](http://www.libsdl.org/cgi/docwiki.cgi/FAQ_GUI)，总结如下：

1.  **Window ID hack**涉及设置`SDL_WINDOWID`为 QWidget 的 id，以便 SDL*将*像素推送到 QWidget。这是来自相关线程的[示例 Qt 片段。](https://stackoverflow.com/a/144953/492857)

    但是，这不适用于 OS X，并且不能保证在所有 Win 和 Linux 平台上都可以使用。

2.  **手动**从非窗口 SDL_surface 复制到 QWidget。

    找到了一些[Gtk+ 的示例代码，](http://www.libsdl.org/cgi/docwiki.cgi/FAQ_GUI)但到目前为止还没有找到 Qt 的示例代码。这个想法是将视频推送到内存并从 QWidget 中提取。当然不应该使用 QImage 来渲染每一帧。那么如何实现这种复制呢？

可能有重复的问题，但我的问题是关于平台独立性的更具体的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:56:34.357

从 中检索像素`SDL_Surface`并用它创建一个`QImage`，然后使用 a在小部件上`QPainter`绘制`QImage`。

# android - ActivityResult 未返回到仪器测试中的调用活动

> ID：11232519
> 
> 赞同：2
> 
> 时间：2012-06-27T18:15:20.373
> 
> 标签：android, instrumentation, android-testing

我正在使用下面介绍的方法来验证我正在测试的活动是否开始另一个活动。

```
Instrumentation.addMonitor (IntentFilter filter, Instrumentation.ActivityResult result, boolean block) 
```

根据文档， block 参数控制监视器是否应该阻止活动开始（返回其预设结果）。这就是我想要实现的 - 我想将 AcitivityResult 返回到调用活动：onActivityResult()。我使用的代码如下：

```
Intent resultIntent = new Intent();
Bundle bundle = new Bundle();
bundle.putLong(ActivityBundleKeys.KEY_TEST, 2L);
resultIntent.putExtras(bundle);
ActivityResult result = new ActivityResult(Activity.RESULT_OK, resultIntent);
ActivityMonitor monitor = mInstr.addMonitor(MapViewActivity.class.getName(), result, true);
mSolo.clickOnView(btnMap); //button properly clicked, activity started
Activity currentActivity = mInstr.waitForMonitor(monitor); 
```

如果我理解正确，如果我将“true”传递给 addMonitor()，启动应该被阻止并且我的调用活动应该收到模拟结果。它没有发生。请求的活动正常启动，并且在模拟器中可见。结果不会返回给调用活动。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T14:42:15.800

Solo 使用一个内部的 ActivityMonitor 来捕获所有的意图，并且只有第一个匹配的监视器被命中，所以你的监视器永远不会被命中，因为它是在 Solo 的 ActivityMonitor 之后创建的。

您可以通过在 Solo 的显示器之前插入显示器来使其工作，如下所示：

```
ActivityMonitor soloMonitor = mSolo.getActivityMonitor();
mInstr.removeMonitor(soloMonitor);
ActivityMonitor monitor = mInstr.addMonitor(MapViewActivity.class.getName(), result, true);

// Put back Solo's monitor after yours
mInstr.addMonitor(soloMonitor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:58:36.060

好的，我设法通过手动返回模拟意图来解决这个问题：

```
Intent resultIntent = new Intent();
Bundle bundle = new Bundle();
bundle.putLong(ActivityBundleKeys.KEY_TEST, 2L);
resultIntent.putExtras(bundle);
ActivityResult result = new ActivityResult(Activity.RESULT_OK, resultIntent);
//Don't know why, but "result" parameter in below call is not used
ActivityMonitor monitor = mInstr.addMonitor(MapViewActivity.class.getName(), result, true);
mSolo.clickOnView(btnMap); 
Activity currentActivity = mInstr.waitForMonitor(monitor);      
currentActivity.setResult(Activity.RESULT_OK, resultIntent);//manually seting the returned intent
currentActivity.finish();
mInstr.waitForIdleSync(); 
```

# c++ - 传递给函数的自由分配指针？

> ID：11232520
> 
> 赞同：0
> 
> 时间：2012-06-27T18:15:26.750
> 
> 标签：c++, pointers

如果我需要将 unsigned char* 传递给函数，我什么时候应该释放我的 unsigned char*？例子

```
void myFunction(unsigned char *request){
   // do I need to use free(request); here?
}  

 int main (){       
 // main code 

 unsigned char *request = NULL;
 // read from buffer and reallocate memory (using realloc & memcpy)
 myFunction(request); // I do not want to read or use "request" after this function call. 
 free(request); // is this ok? Or should this be inside myFunction also?

 return 0; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:59:14.997

您不必这样做 - 但一个好的做法是释放与分配它们相同的级别。例如，不要在函数中分配某些东西并在它返回后释放它。因为几个月后，当您再次查看代码时，您并不清楚内存的生命周期。

所以最好是：

```
request = malloc();
doStuff( request );
free( request ); 
```

比你有的模式。C++ 通过创建构造函数和析构函数来帮助你处理这种模式。也就是说，构造函数实际上可能会分配内存并本质上以对象的形式将其返回给您，但是编译器会自动调用析构函数来释放内存。

因此，如果您将该请求缓冲区包装在一个类中，您可以使用更安全、更易于维护的模式来实现您想要的模式：

```
Request::Request() { mRequest = malloc(); }
Request::~Request() { if ( mRequest ) free( mRequest ); mRequest = NULL; }

...

{
    Request request;
    myFunction( request );
} 
```

使用此模式，您的内存将自动清理。更安全，更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:18:18.853

使用`free()`完后立即使用它。因此，例如，您可能不会在内部执行此操作，`myFunction()`因为您可能仍然会对`request`退出该函数时指向的值感兴趣`main`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:22:03.550

通常你必须在你分配它的地方释放它，并且不需要更多它。在这种情况下，您可以在两个地方都这样做，而且在释放后将其设置为 NULL，下次尝试释放它时，检查是否为 null

你也可以实现类似的东西：

```
void FreeAndNull(void *request){
   if request <> NULL then 
     { free(request); request = NULL; }
} 
```

# android - 仅使用电话音频播放声音

> ID：11232521
> 
> 赞同：3
> 
> 时间：2012-06-27T18:15:33.163
> 
> 标签：android

我正在开发一种闹钟应用程序，我需要专门通过电话音频而*不是通过蓝牙*播放我的声音。（今天早上我错过了所有三个设置的闹钟，因为闹钟是通过我的蓝牙耳机播放的，所以我很难学到这一点）

如何播放仅通过手机音频而不是蓝牙播放的声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:34:04.990

当用户选择一个选项时，我有类似的要求，我需要从扬声器播放音频。所以我将音频流类型更改为像 mp.setAudioStreamType(AudioManager.STREAM_RING) 一样响铃并且它起作用了。希望这对你也有效。（注意：某些手机有限制从扬声器和蓝牙播放音频）

# code-first - 用户 Test_web' 登录失败。先编码

> ID：11232525
> 
> 赞同：0
> 
> 时间：2012-06-27T18:15:51.790
> 
> 标签：code-first

heelo 这是我的连接字符串

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Test;Integrated Security=True" providerName="System.Data.SqlClient;Password=;User ID=;"/>
  </connectionStrings>
  <appSettings> 
```

这是我的错误，请帮助我无法打开登录请求的数据库“DataLayer.Context.test”。登录失败。用户“test\test_web”登录失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:58:40.583

您已在此处指定“DefaultConnection”作为连接字符串的名称。所以你的上下文类应该有相同的名字。（这是 ef 代码优先的默认约定）

# php - 什么是 PostgreSQL 等价于 mysql_result()

> ID：11232527
> 
> 赞同：1
> 
> 时间：2012-06-27T18:15:54.257
> 
> 标签：php, mysql, postgresql

我环顾四周，找不到它！也许我看的不够仔细，但是这个网站有可以快速给出答案的人

我正在运行 PHP5 和 PostgreSQL 9.1

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:18:52.473

[pg_fetch_result](http://php.net/pg_fetch_result)或[pg_fetch_array](http://php.net/pg_fetch_result)应该为您解决问题，具体取决于确切的需要。

# user-interface - 我可以禁用特定页面上的相关列表悬停链接吗？

> ID：11232530
> 
> 赞同：2
> 
> 时间：2012-06-27T18:16:06.677
> 
> 标签：user-interface, salesforce

就像它在标题中询问的那样，我可以禁用特定页面上的相关列表悬停链接吗？我有几个字段的标准页面和相关列表。这会导致完全无用的相关列表悬停链接。我想从这个页面中删除它，但我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:44:25.883

要更改组织的用户界面设置：

1.  单击您的姓名 > 设置 > 自定义 > 用户界面。
2.  取消选择**启用相关列表悬停链接**
3.  单击保存。

这些步骤是在所有选项卡中设置禁用的**相关列表悬停链接。**此外，您可以使用*VisualForce为一个 Tab(Object) 禁用它*

[完整信息在这里](http://na14.salesforce.com/help/doc/en/customize_ui_settings.htm#HoverLinks)

:)

# c - 32 位和 64 位机器中的位操作

> ID：11232534
> 
> 赞同：0
> 
> 时间：2012-06-27T18:16:25.143
> 
> 标签：c, 64-bit, bit-manipulation, 32bit-64bit, bitwise-operators

我在 C 中有以下一段代码，我试图从分别存储在`val1`和中的值中提取特定位`val2`，然后将提取的位的十进制等效值存储回val1`val1`和`val2`val2 以供以后比较。`nbits`给出此处要提取的位范围，例如从 2 到 2，这意味着只提取第三位。

```
static unsigned int BIT[] = {
0x1,        0x2,        0x4,        0x8,
0x10,       0x20,       0x40,       0x80,
0x100,      0x200,      0x400,      0x800,
0x1000,     0x2000,     0x4000,     0x8000,
0x10000,    0x20000,    0x40000,    0x80000,
0x100000,   0x200000,   0x400000,   0x800000,
0x1000000,  0x2000000,  0x4000000,  0x8000000,
0x10000000, 0x20000000, 0x40000000, 0x80000000
};
int val1, val2;
unsigned long mask_val;
int nbits[2];

nbits[0] = nbits[1] = 2;
val1 = -41;
val2 = -45;

for (i = nbits[0]; i <= nbits[1]; i++)
     mask_val = mask_val|BIT[i];
val1 = (val1 & mask_val) >> nbits[0];
val2 = (val2 & mask_val) >> nbits[0]; 
```

上面这段代码在 32 位机器上可以正常工作，但在 64 位机器上会给出错误的结果，特别是当存储在`val1`和中的初始值`val2`是负数时。我必须对上面的代码进行哪些更改才能使其独立于机器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:41:05.427

1，不初始化 mask_val 会导致你在许多编译器上出现问题 2，使用 stdint.h 并且 vals 和 mask 的类型与系统无关

```
int8_t
int16_t
int32_t
uint8_t
uint16_t
uint32_t
int64_t
uint64_t 
```

3、为什么不只是从 0x1 移位而不是使用表。IE

```
mask_val = mask_val| ( 0x1 << (i - 1) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:50:19.857

在我开发各种版本的代码时，其他人基本上陈述了我在下面展示的相同内容。

我认为您的代码在 32 位版本上运行的原因是侥幸。显然在那个系统上，你未初始化的 mask_val 恰好为零，你是“幸运的”。

下面我展示了您自己的代码的三个版本的进展。首先显示代码基本未更改，但将 mask_val 初始化为 0，并为您希望代码运行的任何类型使用 typedef。第二个是相同的，但没有 BIT[] 表。第三消除循环。

```
#if 0
#include <stdio.h>

typedef long long valTy;

int main()
{
static unsigned int BIT[] = {
0x1,        0x2,        0x4,        0x8,
0x10,       0x20,       0x40,       0x80,
0x100,      0x200,      0x400,      0x800,
0x1000,     0x2000,     0x4000,     0x8000,
0x10000,    0x20000,    0x40000,    0x80000,
0x100000,   0x200000,   0x400000,   0x800000,
0x1000000,  0x2000000,  0x4000000,  0x8000000,
0x10000000, 0x20000000, 0x40000000, 0x80000000
};
valTy val1, val2;
valTy mask_val;
int i, nbits[2];

printf("\n");

nbits[0] = nbits[1] = 2;
val1 = -41;
val2 = -45;

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");

mask_val = 0;
for (i = nbits[0]; i <= nbits[1]; i++)
    mask_val = mask_val|BIT[i];
printf("mask_val = 0x%016llx\n\n", (long long)mask_val);
val1 = (val1 & mask_val) >> nbits[0];
val2 = (val2 & mask_val) >> nbits[0];

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");
}

#endif

#if 0
#include <stdio.h>

typedef long long valTy;
#define BIT(bitnum) (1<<bitnum)

int main()
{
valTy val1, val2;
valTy mask_val;
int i, nbits[2];

printf("\n");

nbits[0] = nbits[1] = 2;
val1 = -41;
val2 = -45;

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");

mask_val = 0;
for (i = nbits[0]; i <= nbits[1]; i++)
    mask_val = mask_val | BIT(i);
printf("mask_val = 0x%016llx\n\n", (long long)mask_val);
val1 = (val1 & mask_val) >> nbits[0];
val2 = (val2 & mask_val) >> nbits[0];

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");
}

#endif

#include <stdio.h>

typedef long long valTy;
#define BIT(bitnum) (1<<bitnum)

int main()
{
valTy val1, val2;
valTy mask_val;
int i, nbits[2];

printf("\n");

nbits[0] = nbits[1] = 2;
val1 = -41;
val2 = -45;

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");

mask_val = 0;
{
    valTy maskTop = ((BIT(nbits[0])-1)<<1)|1;
    valTy maskBottom = BIT(nbits[1])-1;
    mask_val = maskTop & ~maskBottom;
}
printf("mask_val = 0x%016llx\n\n", (long long)mask_val);
val1 = (val1 & mask_val) >> nbits[0];
val2 = (val2 & mask_val) >> nbits[0];

printf("    val1 = 0x%016llx (%lld)\n", (long long)val1, (long long)val1);
printf("    val2 = 0x%016llx (%lld)\n", (long long)val2, (long long)val2);
printf("\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:25:30.280

代码仍在按原样工作，但我怀疑您的符号位高于 32 位标记。请参考这篇文章，如果它有帮助，请告诉我： [64 位 Windows 上 long 的位大小是多少？](https://stackoverflow.com/questions/384502/what-is-the-bit-size-of-long-on-64-bit-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:28:11.733

我认为您的问题来自`mask_val`未初始化的事实。您应该使用 0 对其进行初始化，以确保在循环开始之前没有设置任何位。

# jquery - 如何在ie 7 中更改表单的名称属性？

> ID：11232539
> 
> 赞同：0
> 
> 时间：2012-06-27T18:16:50.027
> 
> 标签：jquery, internet-explorer, internet-explorer-7, name-attribute

有时当我使用第三方脚本时，我必须做一些事情，比如更改表单的名称，以使他们的代码正常工作。这在除 IE 7 之外的所有浏览器中都能完美运行。

在谷歌搜索stackoverflow之后，我了解到在IE 7中，name属性只能在创建元素时设置（如果我错了，请纠正我）。我想问是否有人可以提出一种解决方法，而不是创建另一种形式（它很大并且有几个元素）。

我已经把它放在 jsfiddle 上：http: [//jsfiddle.net/urTdq/](http://jsfiddle.net/urTdq/)

代码：

```
<form name="oldForm" id="form">
</form>
<a href="#" id="change">Change Form Name</a>
<script>
$("#change").click(function() {
$("#form").attr("name", "newForm");
});
</script> 
```

如果您需要更多说明/信息，请告诉我。提前致谢！

# sql - Transact SQL，如何取varchar类型，转换为int，加一，转换回字符串，然后存储？

> ID：11232540
> 
> 赞同：0
> 
> 时间：2012-06-27T18:16:55.740
> 
> 标签：sql, tsql

```
ALTER PROCEDURE [dbo].[AmendInsertDuplicateFields] (@ReportID varchar(50))
AS
BEGIN
    DECLARE @NewReportID VARCHAR(50)
    SET @NewReportID = NEWID()

    INSERT INTO [MVCOmar].[dbo].[PrideMVCCollisionBegin]
           ([ReportID], [LocalIncidentNum], [version], [MTOReferenceNo], [Submitted]) 
       SELECT 
          @NewReportID, [LocalIncidentNum], [version], [MTOReferenceNo], [Submitted] 
       FROM 
          [MVCOmar].[dbo].[PrideMVCCollisionBegin] 
       WHERE 
          [ReportID] = @ReportID; 
```

我想获取我得到的结果`version`，将它从字符串转换为 int 类型，加一，转换回字符串，然后存储它。

我承认该版本应该是`int`而不是字符串类型。我也承认，实现这一点的更好方法是将属性设置为递增 1。

我暂时不能做这两个选项，因为我现在的优先级不同，我的时间有限，代码很旧，并且由许多编码习惯不好的人编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:20:09.180

不需要转换，运行这个，会有隐式转换

```
SELECT '1' + 1 
```

返回 2

在你的情况下，你可以做`[version] + 1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:20:07.090

您可以使用[CONVERT 函数](http://msdn.microsoft.com/en-us/library/ms187928.aspx)在 SELECT 语句中内联执行此操作：

```
INSERT INTO [MVCOmar].[dbo].[PrideMVCCollisionBegin] ([ReportID], [LocalIncidentNum], [version], [MTOReferenceNo], [Submitted]) 
SELECT @NewReportID, [LocalIncidentNum], 
       CONVERT(VARCHAR, (CONVERT(INT, [version]) + 1)), 
       [MTOReferenceNo], [Submitted] 
FROM [MVCOmar].[dbo].[PrideMVCCollisionBegin] 
WHERE [ReportID]=@ReportID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:19:58.967

SQL Server 支持 CAST 或 CONVERT

```
CAST(col1 as int)

CONVERT(int,col1) 
```

# javascript - JavaScript 正则表达式中的反向引用

> ID：11232544
> 
> 赞同：0
> 
> 时间：2012-06-27T18:17:13.757
> 
> 标签：javascript, regex, backreference

无论如何要获取反向引用吗？

```
var name = "HELLO WORLD"
var patt = /\S+\s(.+)/;
alert(name.match(patt)); 
```

这只是获取第一个单词之后的每个单词的简单示例。

但是，如果我提醒`$1`，什么都不会弹出，我不知道为什么。我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:07:09.750

如果有人真的在寻找这个，这只是一个快速的解决方案。

您可以使用`RegExp.$X`where`X`是您寻找的参考数字。`match`还返回一个数组，您可以使用它来查看事物是否匹配以及以下索引中的反向引用。

# php - 在 SQL 中排序

> ID：11232550
> 
> 赞同：3
> 
> 时间：2012-06-27T18:17:32.850
> 
> 标签：php, mysql, sql, symfony1, propel

> **可能重复：**
> [mysql自定义排序](https://stackoverflow.com/questions/2175439/mysql-custom-sort)

我有一组 ID：

```
$ids = array(5, 1, 4, 2, 3); 
```

我提出一个查询：

```
SELECT * FROM Persons
WHERE id IN $ids 
```

我收到这个对象：

> 1、2、3、4、5

是否可以像在数组中一样排序？我想收到

> 5、1、4、2、3。

我也使用PROPEL。也许在 Symfony 中使用 Propel ORM，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:28:14.487

在 mysql 中，您可以使用[字段函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)进行自定义排序顺序。例如：

```
$ids = array(5, 1, 4, 2, 3);
$ids = implode(',', $ids);
$sql = "SELECT * FROM Persons
        WHERE id IN ($ids)
        ORDER BY FIELD(id, $ids)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:24:30.247

运行查询后，您可以在 PHP 中对其进行排序。

像这样的东西（仅限 PHP 5.3+）：

```
$ids = array(5, 1, 4, 2, 3);
// Run Query...
// assume $results is the result array
usort($results, function($a, $b) use($ids){
    $a = array_search($a['id'], $ids);
    $b = array_search($b['id'], $ids);
    return $a  -$b;
}); 
```

# sql - Firebird 中的选择查询的性能问题

> ID：11232552
> 
> 赞同：2
> 
> 时间：2012-06-27T18:17:39.557
> 
> 标签：sql, database, performance, optimization, firebird2.5

我有两张表，一张小（~ 400 行），一张大（~ 1500 万行），我试图从小表中查找在大表中没有关联条目的记录。

我在查询中遇到***大量性能问题***。

查询是：

```
SELECT * FROM small_table WHERE NOT EXISTS
  (SELECT NULL FROM large_table WHERE large_table.small_id = small_table.id) 
```

该列`large_table.small_id`引用 small_table 的`id`字段，这是它的主键。查询计划显示大表使用了外键索引：

```
PLAN (large_table (RDB$FOREIGN70))
PLAN (small_table NATURAL) 
```

已为两个表上的索引重新计算统计信息。

查询需要几个小时才能运行。这是预期的吗？

*   如果是这样，我可以重写查询以使其更快吗？
*   如果没有，可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:26:25.330

如果大表只有相对较少的 small_id 不同值，则以下可能会执行得更好：

```
select *
from small_table st left outer join
     (select distinct small_id
      from large_table
     ) lt
     on lt.small_id = st.id
where lt.small_id is null 
```

在这种情况下，通过对大表进行全面扫描，然后在小表中查找索引，性能会更好——这与它正在做的相反。做一个不同的可以只对大表进行索引扫描，然后使用小表上的主键索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:40:41.440

我不确定 Firebird，但在其他数据库中，连接通常更快。

```
SELECT    *
FROM      small_table st
LEFT JOIN large_table lt
ON        st.id = lt.small_id
WHERE     lt.small_id IS NULL 
```

也许试试看？

另一种选择，如果你真的被卡住了，并且根据需要运行的情况，将 small_id 列从 large_table 中取出，可能放入临时表中，然后执行左连接/EXISTS 查询。

# c# - 在 var 中重新定义“K”

> ID：11232557
> 
> 赞同：0
> 
> 时间：2012-06-27T18:17:50.557
> 
> 标签：c#

我写了一段代码如下：

```
var i=5;
i='K'; 
```

代码正在编译，没有错误。就我的概念而言，我无法在 var 中重新分配值。由于我已将整数 5 分配给 i。i 的类型是 int。那么为什么它允许在 i 中分配一个 char 'K' 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T18:20:07.033

因为 a`char`可以隐式转换为 a `int`。变量的类型`i`仍然是`int`——你可以使用它来测试`i.GetType()`——它的值是字符的代码点`'K'`（即，`75`）。

换句话说，您的代码相当于编写：

```
int i = 'K'; 
```

“就我的概念而言，我无法在 var 中重新分配值。” ——这是不正确的。您无法更改隐式*类型*变量的类型（就像您无法更改任何其他变量的声明类型一样），但您可以重新为其分配相同类型的另一个值（或可能被强制转换的值） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:21:43.977

`i`在您的第一次分配期间被隐式键入为整数。然后，您尝试将 char 值分配给整数。

# jquery - 在 Each 语句中选择一个特定的类

> ID：11232559
> 
> 赞同：1
> 
> 时间：2012-06-27T18:18:09.710
> 
> 标签：jquery

我下面的代码返回与它关联的“价格”类的每个文本。我只想返回每个语句所在的特定项目的价格..

```
<div class="item">
    <p class="price">$388.00</p>
    <p class="part_number">VM2327T23A00T</p>
    <p class="real_price"></p>
</div>
<div class="item">
    <p class="price">$88.00</p>
    <p class="part_number">AA327T23A00T</p>
    <p class="real_price"></p>
</div>
<div class="item">
    <p class="price">$38.00</p>
    <p class="part_number">AA327T23A00T</p>
    <p class="real_price"></p>
</div>

<script>
jQuery('.part_number').each(function () {
    parts.push(jQuery(this).text());
    var aPrice= jQuery('.price').text();
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:23:37.190

```
jQuery('.part_number').each(function () {
    parts.push(jQuery(this).text());
    var aPrice= jQuery(this).siblings('.price').text();
}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T18:26:46.033

好吧，我想您应该将 HTML 编码为。因为这三个项目都有与之关联的“项目”和“价格”类。

```
<div class="item" class="price">
   <p>$388.00</p>
     <p class="part_number">VM2327T23A00T</p>
     <p class="real_price"></p>
  <p>$88.00</p>
     <p class="part_number">AA327T23A00T</p>
     <p class="real_price"></p>
  <p>$38.00</p>
     <p class="part_number">AA327T23A00T</p>
     <p class="real_price"></p>
</div> 
```

# vb.net - 获取访问令牌时出现 invalid_request 错误

> ID：11232560
> 
> 赞同：0
> 
> 时间：2012-06-27T18:18:12.527
> 
> 标签：vb.net, azure, bing-api, microsoft-translator

我正在尝试使用以下 URL 获取我的应用程序的访问令牌：

`https://datamarket.accesscontrol.windows.net/v2/OAuth2-13?grant_type=client_credentials&client_id=//CLIENT ID//&client_secret=//CLIENT SECRET//=&scope=http://api.microsofttranslator.com`

显然，我用我的应用程序信息替换了 //CLIENT ID// 和 //CLIENT SECRET//。

我尝试在我的应用程序中使用 HtmlEncode 对令牌进行编码，但出现 400 错误。所以我在浏览器中尝试了这个请求，这是我得到的 JSON 响应：

`{ "error":"invalid_request", "error_description":"ACS90007: Request method not allowed. \r\nTrace ID: 2144c829-f3fa-4ed8-80e6-40841e6a3f69\r\nTimestamp: 2012-06-27 01:11:27Z" }`

我不知道我做错了什么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:06:31.667

我相信当您进行 WebRequest 调用时，您的参数设置为使用 GET，这将导致错误 ACS90007。进行 WebRequest 调用时，请使用 POST 以及 application/x-www-form-urlencoded set Content-Type。

如果您仍然有问题发布您的 WebRquest 代码片段，我会看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:16:21.247

如果您可以提供 AdmAuthentication 的代码会更好。现在，请确保您已将[http://msdn.microsoft.com/en-us/library/hh454950](http://msdn.microsoft.com/en-us/library/hh454950)上的代码正确翻译为 VB。还请尝试使用 Fiddler 来监控请求，以确保它正在发送 POST 请求。

此致，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T07:08:21.917

让我自己的客户秘密有助于我的事业

# c# - 与.net相比，为什么java中的递归如此之慢？

> ID：11232565
> 
> 赞同：0
> 
> 时间：2012-06-27T18:18:55.667
> 
> 标签：c#, java

我写了一个算法来找到两点之间所有可能的路径。我用 c#.net 和 java 编写了算法。该算法产生大约 40,000 条可能的路径。令我惊讶的是，C#.net 中的算法只需要 13 分钟即可完成（在 i3 处理器中），而 java 甚至在 4 小时内都无法完成。

java中的递归可能很慢，但我不这么认为。

我有什么遗漏吗？

好的，这是要求，迷宫是一个包含数字 0、1、2 和 3 的二维数组。0 表示可步行点，1 表示障碍物，2 表示起点，3 表示出口点。该程序是通过仅触摸一次所有 0 来找到从点 2 到 3 的所有路径。我们不能跨过 1s，因为它们是障碍物。

## 这是 C#.Net 中的代码

```
public class Maze
{
    //Represents each point in the Maze.
    private class Node
    {
        private int val;

        public Node(int num)
        {
            val = num;

            switch (num)
            {
                case 1: IsPit = true;
                    break;
                case 2: IsEntranceNode = true;
                    break;
                case 3:
                    IsExitNode = true;
                    break;
            }
        }
        public string Name { get; set; }

        public bool IsPit { get; private set; }
        public bool IsVisited { get; set; }
        public bool IsExitNode { get; private set; }
        public bool IsEntranceNode { get; private set; }

        public Node UpNode { get; set; }
        public Node DownNode { get; set; }
        public Node LeftNode { get; set; }
        public Node RightNode { get; set; }
    }

    #endregion

    //Number of pits in the maze.
    private int numberOfPits;

    //Stack traces the path traversed.
    private Stack<String> pathTraversed;

    //Represents the maze.All Nodes are wired to its adjacent nodes.
    private Node[,] Maze { get; set; }

    //Number of paths found.
    private int pathCount = 1;

    //displays a set.
    static void printSet(int[,] set)
    {
        Console.Write(" \t");
        for (var i = 0; i < set.GetLength(1); i++)
            Console.Write(i + "  ");

        Console.WriteLine("\n--------------------------");

        for (var i = 0; i < set.GetLength(0); i++)
        {
            Console.Write((char)(65 + i) + " | \t");
            for (var j = 0; j < set.GetLength(1); j++)
                Console.Write(set[i, j] + "  ");

            Console.WriteLine();
        }
    }

    static void Main(string[] args)
    {
        int[,] set2 = new int[7, 7] {   { 2, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 0, 0, 0 }, 
                                        { 0, 0, 0, 0, 3, 1, 1 } 
                                    };          

        Console.WriteLine("\n\nSet 2");
        Console.WriteLine("=====");
        printSet(set2);

        Console.WriteLine("\nPath found");
        Console.WriteLine("==========");
        startTime = DateTime.Now;
        new Maze().AddPoints(set2).FindPaths();
        endTime = DateTime.Now;
        difference = endTime.Subtract(startTime).TotalMinutes;
        Console.WriteLine("Time taken in mins : " + difference);
        Console.WriteLine("\nPress any key to exit");
        Console.ReadKey();
    }

    //Adds points to the maze.Transforms a matrix to 2 dimensional connected nodes.
    public Program AddPoints(int[,] matrix)
    {
        Maze = new Node[matrix.GetLength(0), matrix.GetLength(1)];

        for (int i = 0; i < matrix.GetLength(0); i++)
        {
            for (var j = 0; j < matrix.GetLength(1); j++)
            {
                Node node = Maze[i, j];

                if (node == null)
                {
                    node = new Node(matrix[i, j]);
                    Maze[i, j] = node;
                }
                if (!(i - 1 < 0))
                    Maze[i - 1, j].DownNode = node;

                if (!(i + 1 > matrix.GetLength(0) - 1))
                {
                    var downNode = Maze[i + 1, j];
                    if (downNode == null)
                        Maze[i + 1, j] = new Node(matrix[i + 1, j]);
                    Maze[i + 1, j].UpNode = node;
                }

                if (!(j - 1 < 0))
                    Maze[i, j - 1].RightNode = node;

                if (!(j + 1 > matrix.GetLength(1) - 1))
                {
                    var leftNode = Maze[i, j + 1];
                    if (leftNode == null)
                        Maze[i, j + 1] = new Node(matrix[i, j + 1]);
                    Maze[i, j + 1].LeftNode = node;
                }

                node.Name = ((char)(65 + i)).ToString() + j.ToString();
                if (node.IsPit)
                    numberOfPits++;
            }
        }
        return this;
    }

    //Finds path between the start node and end node.
    public void FindPaths()
    {
        var startNode = Maze[0, 0];

        if (!startNode.IsEntranceNode)
            throw new Exception("Node is not starting node.");

        pathTraversed = new Stack<string>();

        pathTraversed.Push(startNode.Name);
        Traverse(startNode.RightNode);
        Traverse(startNode.DownNode);
        Traverse(startNode.LeftNode);
        Traverse(startNode.UpNode);
    }

    //Traverses a node.
    private void Traverse(Node node)
    {
        if (node == null)
            return;

        if (node.IsEntranceNode || node.IsPit || node.IsVisited)
            return;

        if (node.IsExitNode)
        {
            pathTraversed.Push(node.Name);
            if (pathTraversed.Count == Maze.Length - numberOfPits)
            {
                var msg = "Path " + pathCount++ + " : " + string.Join("->", pathTraversed.Reverse());
                Console.WriteLine(msg);
            }
            pathTraversed.Pop();
            return;
        }

        pathTraversed.Push(node.Name);
        node.IsVisited = true;

        Traverse(node.RightNode);   //
        Traverse(node.DownNode);    // Move to Next Node
        Traverse(node.LeftNode);    //  
        Traverse(node.UpNode);      //

        if (node.Name != pathTraversed.Peek())
            throw new Exception("Error in Logic.");

        node.IsVisited = false;
        pathTraversed.Pop();
    }
} 
```

## 这是Java程序

```
public class PathFinder
{
  public static void main(String[] args){
    int[][] set1 = new int[][] { { 2, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 0, 0, 0 }, 
            { 0, 0, 0, 0, 3, 1, 1 }};
    ObservableStack<String> observableStack = new ObservableStack<String>();
    StackObserver stackObserver = new StackObserver(plotter);
    Maze maze = new Maze(set1,(IPathFinderStack<String>)observableStack);
    maze.findPaths();                   
  }
}

public class Maze {

private Node[][] nodes;

IPathFinderStack<String> pathTraversed;

private int numberOfPits = 0;

private  int result = 0;

public  Node[][] getVector(){
    return nodes;
}

public Maze(int[][] matrix ,IPathFinderStack<String> stack){
    pathTraversed = stack;
    addNodes(matrix);
}   

public void addNodes(int[][] matrix)    {

    int rows = matrix.length;
    int cols = matrix[0].length;

    nodes = new Node[rows][cols];

    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < cols; j++)
        {
            Node node = nodes[i][j];

            if (node == null){
                node = new Node(matrix[i][j]);
                nodes[i][j] = node;
            }

            if (!(i - 1 < 0))
                nodes[i-1][j].setDownNode(node);

            if (!((i + 1) > rows - 1))
            {
                Node downNode = nodes[i+1][j];
                if (downNode == null)
                    nodes[i + 1][j] = new Node(matrix[i+1][j]);
                nodes[i + 1][j].setUpNode(node);
            }

            if (!(j - 1  < 0))
                nodes[i][j-1].setRightNode(node);

            if (!(j + 1 > cols - 1)){
                Node leftNode = nodes[i][j+1];
                if (leftNode == null)
                    nodes[i][j+1] = new Node(matrix[i][j+1]);
                nodes[i][j+1].setLeftNode(node);
            }

            String name =  new String(new char[] {(char) (65 + i), (char)(48 + j)});

            node.setName(name);

            if (node.isPit())
                this.numberOfPits ++;
        }
    }
}

public void findPaths(){    

    Node startNode = nodes[0][0];

    pathTraversed.push(startNode.getName());

    Traverse(startNode.getRightNode());
    Traverse(startNode.getDownNode());
    Traverse(startNode.getLeftNode());
    Traverse(startNode.getUpNode());
}   

private void Traverse(Node node){   

        if (node == null)
            return ;

    if (node.isEntrance() || node.isVisited() || node.isPit())
        return ;

    if (node.isExit()){

            pathTraversed.push(node.getName());
        if (pathTraversed.getLength() == (nodes[0].length * nodes.length) - numberOfPits){
            String msg = "Path found" + (++result);
            Logger.Log(msg);
            Logger.Log(pathTraversed.toString());
        }

        pathTraversed.pop();
        return;             
    }

    pathTraversed.push(node.getName());
    node.setVisited(true);

    Traverse(node.getRightNode());
    Traverse(node.getDownNode());
    Traverse(node.getLeftNode());
    Traverse(node.getUpNode());

    node.setVisited(false);
    pathTraversed.pop();        
}
}

public class Node
{
private String name;
private int val;
private boolean isPit;
private boolean isVisited;
private boolean isEntrance;
private boolean isExit;

private Node downNode;
private Node upNode;
private Node leftNode;
private Node rightNode;

public Node(int val){
    this.val = val;
    this.isPit = (val == 1);
    this.isEntrance = (val == 2);
    this.isExit = (val == 3);
    this.isVisited = false;         
}

public String getName(){
    return this.name;
}

public void setName (String name) {
    this.name = name;
}

public boolean isPit(){
    return isPit;
}

public boolean isVisited(){
    return isVisited;
}

public void setVisited(boolean isVisited)   {
    this.isVisited = isVisited;
}

public boolean isEntrance(){
    return isEntrance;
}

public boolean isExit(){
    return isExit;
}

public Node getDownNode(){
    return downNode;
}

public void setDownNode(Node node){
    downNode = node;
}

public Node getUpNode(){
    return upNode;
}

public  void setUpNode(Node node){
    upNode = node;
}

public Node getLeftNode(){
    return leftNode;
}

public void setLeftNode(Node node){
    leftNode = node;
}

public Node getRightNode(){
    return rightNode;
}   

public void setRightNode(Node node) {
    rightNode = node;
}
} 
```

ObservableStack 是由数组组成的普通堆栈。我使它可以观察到将它连接到小程序以动画遍历。

我希望我已经提供了足够的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:59:09.777

我用不同的方式编码并且得到了更快的时间。

```
import java.util.ArrayList;
import java.util.List;

public class PathFinder {
    public static void main(String[] args) {
        int[][] set1 = new int[][]{{2, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 3, 1, 1}};

        long start = System.nanoTime();
        Maze maze = new Maze(set1);
        List<String> paths = new ArrayList<String>();
        maze.findPaths(0, 0, new StringBuilder(), paths);
        System.out.printf("Paths found %,d%n", paths.size());
        long time = System.nanoTime() - start;
        System.out.printf("Took %,.1f seconds%n", time / 1e9);
    }
}

class Node {
    final int num;
    private boolean traversed;
    private final String name;

    Node(int num, String name) {
        this.num = num;
        this.name = name;
    }

    public boolean isTraversed() {
        return traversed;
    }

    public void setTraversed(boolean traversed) {
        this.traversed = traversed;
    }

    public String getName() {
        return name;
    }

    public boolean isExit() {
        return num == 3;
    }

    public boolean isPit() {
        return num == 1;
    }
}

class Maze {
    private final Node[][] nodes;
    private final int rows, cols;
    private final int nonPits;

    public Maze(int[][] matrix) {
        rows = matrix.length;
        cols = matrix[0].length;

        nodes = new Node[rows][cols];
        int nonPits = 0;
        for (int i = 0; i < rows; i++)
            for (int j = 0; j < cols; j++) {
                nodes[i][j] = new Node(matrix[i][j], "" + (char) ('A' + i) + (char) ('0' + j));
                if (!nodes[i][j].isPit())
                    nonPits++;
            }
        this.nonPits = nonPits;
    }

    public void findPaths(int x, int y, StringBuilder path, List<String> paths) {
        if (x < 0 || x >= cols) return;
        if (y < 0 || y >= rows) return;
        Node node = nodes[y][x];
        if (node.isTraversed() || node.isPit()) return;

        node.setTraversed(true);
        int length = path.length();
        path.append(node.getName());
        if (node.isExit()) {
            if (path.length() == nonPits*2) {
                paths.add(path.toString());
                if (paths.size() % 10000 == 0)
                    System.out.printf("... found %,d paths%n", paths.size());
            }
        } else {
            findPaths(x - 1, y, path, paths);
            findPaths(x + 1, y, path, paths);
            findPaths(x, y - 1, path, paths);
            findPaths(x, y + 1, path, paths);
        }

        path.setLength(length);
        node.setTraversed(false);
    }
} 
```

印刷

```
Paths found 40,616
Took 81.1 seconds 
```

* * *

很多时间都花在记录路径上。如果它只计算路径（需要相同数量的递归）

```
import java.util.ArrayList;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Set;

public class PathFinder {
    public static void main(String[] args) {
        int[][] set1 = new int[][]{{2, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 0, 0, 0},
                {0, 0, 0, 0, 3, 1, 1}};

        long start = System.nanoTime();
        Maze maze = new Maze(set1);
        long[] count = {0L};
        maze.findPaths(0, 0, 1, count);
        System.out.printf("Paths found %,d%n", count[0]);
        long time = System.nanoTime() - start;
        System.out.printf("Took %,.1f seconds%n", time / 1e9);
    }
}

class Node {
    final int num;
    private boolean traversed;
    private final String name;

    Node(int num, String name) {
        this.num = num;
        this.name = name;
    }

    public boolean isTraversed() {
        return traversed;
    }

    public void setTraversed(boolean traversed) {
        this.traversed = traversed;
    }

    public String getName() {
        return name;
    }

    public boolean isExit() {
        return num == 3;
    }

    public boolean isPit() {
        return num == 1;
    }
}

class Maze {
    private final Node[][] nodes;
    private final int rows, cols;
    private final int nonPits;

    public Maze(int[][] matrix) {
        rows = matrix.length;
        cols = matrix[0].length;

        nodes = new Node[rows][cols];
        int nonPits = 0;
        for (int i = 0; i < rows; i++)
            for (int j = 0; j < cols; j++) {
                nodes[i][j] = new Node(matrix[i][j], "" + (char) ('A' + i) + (char) ('0' + j));
                if (!nodes[i][j].isPit())
                    nonPits++;
            }
        this.nonPits = nonPits;
    }

    public void findPaths(int x, int y, int depth, long[] count) {
        if (x < 0 || x >= cols) return;
        if (y < 0 || y >= rows) return;
        Node node = nodes[y][x];
        if (node.isTraversed() || node.isPit()) return;

        node.setTraversed(true);
        if (node.isExit()) {
            if (depth == nonPits) {
                count[0]++;
                if (count[0] % 10000 == 0)
                    System.out.printf("... found %,d paths%n", count[0]);
            }
        } else {
            findPaths(x - 1, y, depth + 1, count);
            findPaths(x + 1, y, depth + 1, count);
            findPaths(x, y - 1, depth + 1, count);
            findPaths(x, y + 1, depth + 1, count);
        }
        node.setTraversed(false);
    }
} 
```

印刷

```
Paths found 40,616
Took 58.5 seconds 
```

# internet-explorer - IE9 似乎正在向最后一个 URL 发送 $http.post 请求

> ID：11232580
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:02.127
> 
> 标签：internet-explorer, internet-explorer-9, angularjs

情况：我正在开发一个从单个页面加载和一个主模块运行的设备应用程序。应用程序通过两个 API 调用进行通信。应用程序需要从通过 POST 发送的对“/api/login”的 API 调用获取的当前身份验证状态。用于保存和填充视图渲染数据的 API 调用通过通过 POST 发送到“/api”的 API 调用进行通信。两次调用都是针对相同的协议：//域：端口。

问题：仅在 IE9 中，Chrome 和 FF 正常工作，返回的数据对于“/api”的第二次 API 调用无效。在 IE9 中，开发人员工具网络面板显示正在调用“/api”，并带有所有假定的参数。但是，响应显示失败响应，就好像我仍在使用无效参数调用登录 api。

即使我将 $http.post 配置为在两个调用中立即过期并且缓存在两个调用中都设置为 false，这怎么可能？我该如何修复它或解决它？下面是我正在使用的代码。

编辑：忘了提到我是在 Windows 7 ThinkPad 上查看的。

index.js 中的代码：

```
var LocalPortal = angular.module('LocalPortal', ['ngResource'])
.value('lpApi', {
_apiList : [],
_apiUri : '/api',
_functionStack : {},
_host : document.location.hostname,
_port : 8080,
_protocol : document.location.protocol,
_sessionTimeout : 900,
_addToCallStack : function(param) {
  this._functionStack = $.extend(this._functionStack, param);
},
_doApiCall : function(dataSegment, command, params) {
  var segment = {};
  segment[dataSegment] = {"command" : command};
  if (params) {
    segment[dataSegment]["params"] = params;
  }
  this._addToCallStack(segment);
  $.subscribe('api.received', function(e,data) {
    $.publish(command, data[dataSegment]);
  });
},
_restoreAuthState : function() {
  var _authState = (sessionStorage.getItem('lpApi.authState')) ? JSON.parse(sessionStorage.getItem('lpApi.authState')) : {};
  lpApi.authState = _authState;
},
_setAuthTime : function(timeVal) {
  lpApi.authState.authTime = timeVal;
  lpApi._storeAuthState();
},
_storeAuthState : function() {
  sessionStorage.setItem('lpApi.authState', JSON.stringify(lpApi.authState));
},
_url : function() {
  return this._protocol + '//'
          + this._host +
          (this._port ? ':' + this._port : '')
  + this._apiUri;
},
apiList : function() {
  this._doApiCall("apiList", "api.list");
  return this;
},
getPayload : function() {
  var payload = this._functionStack;
  this._functionStack = {};
  return payload;
},
getUrl : function(uriExt) {
  return this._url() + uriExt;
},
init : function(){
  var loc = document.location;

  this._apiList = sessionStorage.getItem('apiList');
  this._host = loc.hostname;
  this._port = loc.port;
  this._protocol = loc.protocol;

  //store a reference to this object for later callbacks to access
  window.lpApi = this;

  //restore authentication state if any
  lpApi._restoreAuthState();
},
logOff : function() {
  lpApi._setAuthTime(0);
  sessionStorage.removeItem('lpApi.authState');
}
})
.config(function($routeProvider) {
$routeProvider.
  when('/login', {templateUrl: 'partials/login.html', controller: LoginCtrl}).
  when('/home', {templateUrl: 'partials/gateway.html', controller: GatewayCtrl}).
  when('/gateway', {templateUrl: 'partials/gateway.html', controller: GatewayCtrl}).
  when('/assets', {templateUrl: 'partials/assets.html', controller: AssetsCtrl}).
  when('/connectivity', {templateUrl: 'partials/connectivity.html', controller: ConnectivityCtrl}).
  when('/events', {templateUrl: 'partials/events.html', controller: EventsCtrl}).
  otherwise({redirectTo:'/home', templateUrl: 'partials/gateway.html', controller: GatewayCtrl});
for (var that in this) {
  if (that.substr(-4) == 'Ctrl') {
    if (this[that].prototype.menu) {
      for (var index in this[that].prototype.menu.items) {
        $routeProvider.
          when(this[that].prototype.menu.items[index].href, {
            templateUrl: this[that].prototype.menu.items[index].template,
            controller: that
          });
      }
    }
    if (this[that].prototype.ctrlActions) {
      for (var index in this[that].prototype.ctrlActions.items) {
        $routeProvider.
          when(this[that].prototype.ctrlActions.items[index].href, {
            templateUrl: this[that].prototype.ctrlActions.items[index].template,
            controller: that
          });
      }
    }
    if (this[that].prototype.mainActions) {
      for (var index in this[that].prototype.mainActions.items) {
        $routeProvider.
          when(this[that].prototype.mainActions.items[index].href, {
            templateUrl: this[that].prototype.mainActions.items[index].template,
            controller: that
          });
      }
    }

    if (this[that].prototype.secondaryActions) {
      for (var index in this[that].prototype.secondaryActions.items) {
        $routeProvider.
          when(this[that].prototype.secondaryActions.items[index].href, {
            templateUrl: this[that].prototype.secondaryActions.items[index].template,
            controller: that
          });
      }
    }
  }
}
})
.directive('appTopMenu', function() {
return {
  restrict: 'E',
  templateUrl: 'partials/top-menu.html'
}
})
.directive('appMenu', function() {
return {
  restrict: 'E',
  templateUrl: 'partials/menu.html',
  link: function(scope,element,attr) {
    for (var that in this) {
      if (that.substr(-4) == 'Ctrl') {
        if (this[that].prototype.menu) {
          for (var index in this[that].prototype.menu.items) {
            scope.menu.items[scope.menu.items.length] = this[that].prototype.menu.items[index];
          }
        }
      }
    }
  }
}
})
.run(function(){
});

var IndexCtrl = function($scope, lpApi, $location) {
//Properties
$scope._localPortalContainer = 'container';

$scope._loggedIn = true;

//Functions
$scope.assertAuthentication = function() {
if(!$scope.isAuthenticated()){
  lpApi.logOff();
  $scope.setRouteReload('/login');
}
};

$scope.getLocalPortalContainer = function() {
return $scope._localPortalContainer;
};

$scope.getLoggedInStatus = function() {
return $scope._loggedIn;
};

$scope.isAuthenticated = function() {
if (sessionStorage) {
  if (sessionStorage.getItem('lpApi.authState')) {
    lpApi.init();
    return ((new Date().getTime() - lpApi.authState.authTime) < 900000);
  }
  else {
    lpApi.init();
    return false;
  }
}
return false;
};

$scope.setErrorMsg = function(msg) {
$scope.errorMsg = msg;
};

$scope.setLocalPortalContainer = function($container){
$scope._localPortalContainer = $container;
};

$scope.setLoggedInStatus = function(status) {
$scope._loggedIn = status;
};

$scope.setRoute = function($route) {
$location.path($route);
};

$scope.setRouteReload = function($route) {
$location.path($route);
document.location.reload();
};

if (!$scope.isAuthenticated()) {
$scope.setLocalPortalContainer('container-small');
$scope.setLoggedInStatus(false);
$scope.setRoute('/login');
}
};

IndexCtrl.$inject = ['$scope', 'lpApi', '$location']; 
```

login.js 的代码：

```
var LoginCtrl = function($scope, $http, lpApi) {

// Functions
$scope.authenticate = function(username, password, $http){
var data = {auth: {username: username, password: password}};

$http.post(lpApi.getUrl('')+'/login', data, {cache: false, headers: {Expires: -1}})
  .error($scope.postError)
  .success($scope.setAuthState);
};

$scope.login = function($scope, lpApi) {
if($scope.isAuthenticated() && lpApi.logOff) {
  lpApi.logOff();
  $scope.setRouteReload('/login');
}
$scope.setLocalPortalContainer('container-small');
$scope.setLoggedInStatus(false);
};

$scope.postError = function(data, status, headers, config){
// output error message
$scope.setErrorMsg(data.errorMessage[0])
};

$scope.setAuthState = function(data, status, headers, config){
lpApi.authState.sessionId = data.sessionId || null;
lpApi.authState.roles = data.roles || null;
lpApi.authState.requirePasswordChange = data.requirePasswordChange || null;
lpApi.authState.success = data.success;
if (data.success) {
  lpApi._setAuthTime(new Date().getTime());
  $scope.setLocalPortalContainer('container');
  $scope.setLoggedInStatus(true);
  $scope.setRoute('/home');
}
else {
  // output error message
  $scope.setErrorMsg(data.errorMessage[0])
}
};

$scope.submit = function(){
$scope.authenticate(this.input_username, this.input_password, $http);
};

$scope.login($scope, lpApi);
};

LoginCtrl.$inject = ['$scope', '$http', 'lpApi']; 
```

gateway.js 的代码：

```
var GatewayCtrl = function($scope, lpApi, $http) {
lpApi.cloudlinkInfo();

lpApi.loggingQuery({limit:"5",page:"0"});

lpApi.modemInfo();

lpApi.osInfo();

lpApi.systemNodeinfo();

lpApi.systemProductinfo();

lpApi.tunnelInfo();

// Properties
$scope.loadData = function(data, status, headers, config) {
console.log('succes'); 
console.log(JSON.stringify(data)); // {"success":false,"errorMessage":["Invalid authentication."]} (See config url is not "/api/login")
console.log(status);
console.log(headers);
console.log(JSON.stringify(config)); // {"method":"POST","url":"protocol://domain:port/api","data":{"cloudlinkInfo": {"command":"cloudlink.info"},"loggingQuery" "command":"logging.query","params":{"limit":"5","page":"0"}},"modemInfo": "command":"modem.info"},"osInfo":{"command":"os.info"},"systemNodeinfo": "command":"system.nodeinfo"},"systemProductinfo" : {"command":"system.productinfo"},"tunnelInfo":{"command":"tunnel.info"}}}
};

$scope.postError = function(data, status, headers, config) {
console.log('error');
console.log(JSON.stringify(data));
console.log(status);
console.log(headers);
console.log(JSON.stringify(config));
};

$scope.assertAuthentication(); // <== asserts we have a current authState.

var payload = lpApi.getPayload(), apiUrl = lpApi.getUrl(''); // <== payload is an object of api calls and their params, apiUrl is protocol://domain:port/api

$http.post(apiUrl, payload).error($scope.postError).success($scope.loadData);
};

GatewayCtrl.$inject = ['$scope', 'lpApi', '$http']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:38:46.993

“无效身份验证”响应实际上是一个有效响应。事实证明，根据 IE9 的预期，设备的 Web 服务设置的 cookie 是不完整的，而 IE9 完全忽略了它。Chrome 和 FF 更加宽容。

# ruby-on-rails - 我的嵌套资源之一没有被创建

> ID：11232583
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:08.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, network-programming, form-for, nested-form-for

首先，如果你花时间看这个，让我谢谢你。谢谢 ：）。

所以，我终于想出了如何在顶级资源的_form.html.erb中正确嵌套资源。我的最终项目将有以下从上到下的嵌套资源：IDFs => Switches => Jacks。目前，我通过创建一个新的插孔来完成所有工作......这给了我以下错误：

```
NoMethodError in Jacks#new

Showing /var/rails/network/app/views/jacks/_form.html.erb where line #1 raised:

undefined method `model_name' for NilClass:Class
Extracted source (around line #1):

1: <%= form_for [@switch, @jack] do |f| %>
2:   <% if @jack.errors.any? %>
3:     <div id="error_explanation">
4:       <h2><%= pluralize(@jack.errors.count, "error") %> prohibited this jack from being saved:</h2> 
```

我所有的模型都是脚手架的，除了要关联的模型、修复路由的控制器和 _form.html.erb 文件之外，我还没有接触过它们的许多文件。我会发布我认为相关的代码，但如果你看到它还有什么可以帮助你的，请告诉我。

应用程序/控制器/jacks_controller.rb：

```
...
  def new
    @jacks = Jack.new(:switch_id => params[:switch_id])

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @jack }
    end
  end
... 
```

应用程序/视图/开关/_form.html.erb：

```
<%= form_for [@idf, @switch] do |switch_form| %>
    <% if @switch.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@switch.errors.count, "error") %> prohibited this switch from being saved:</h2>

        <ul>
        <% @switch.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= switch_form.label :title %><br />
      <%= switch_form.text_field :title %>
    </div>
    <div class="field">
      <%= switch_form.label :model %><br />
      <%= switch_form.text_field :model %>
    </div>

    <% switch_form.fields_for :jacks do |jack_form| %>
      <p>
        <div class="field">
          <%= jack_form.label :port, 'Port:' %>
          <%= jack_form.text_field :port %>
        </div>
        <div class="field">
          <%= jack_form.label :jack_number, 'Jack Number:' %>
          <%= jack_form.text_field :jack_number %>
        </div>
        <div class="field">
          <%= jack_from.label :room_number, 'Room Number:' %>
          <%= jack_form.text_field :room_number %>
        </div>
        <% unless jack_form.object.new_record? %>
          <div>
            <%= jack_form.label :_delete, 'Remove:' %>
            <%= jack_form.check_box :_delete %>
          </div>
        <% end %>
      <p>
    <% end %>

    <div class="actions">
      <%= switch_form.submit %>
    </div>
<% end -%> 
```

app/views/jacks/_form.html.erb：

```
<%= form_for [@jack.switch, @jack] do |f| %>
  <% if @jack.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@jack.errors.count, "error") %> prohibited this jack from being saved:</h2>

      <ul>
      <% @jack.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :port %><br />
    <%= f.number_field :port %>
  </div>
  <div class="field">
    <%= f.label :jack_number %><br />
    <%= f.text_field :jack_number %>
  </div>
  <div class="field">
    <%= f.label :room_number %><br />
    <%= f.text_field :room_number %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我已经尝试从 Stack Overflow 上的几个类似问题中实现一些代码，但似乎没有任何效果。任何帮助将非常感激。另外，如果您想查看任何其他代码，请告诉我。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:34:24.040

您是否尝试过从您的父资源构建 @jack 对象？IE

```
def new
  # find Jack's parent
  parent = JacksParent.find(:parent_id)
  @jacks = parent.jacks.build(:switch_id => params[:switch_id])

  respond_to do |format|
    format.html # new.html.erb
    format.json { render :json => @jack }
  end
end 
```

# windows - Winsock：与 SO_REUSEADDR 的奇怪冲突

> ID：11232590
> 
> 赞同：2
> 
> 时间：2012-06-27T18:20:17.037
> 
> 标签：windows, sockets, tcp, winsock

我遇到了一个奇怪的行为。

该[手册声称](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)：“当两个套接字绑定到相同的端口号但在不同的显式接口上时，不存在冲突”。**为什么**系统在步骤 3 的以下情况下会失败？它是操作系统中的错误吗？（我在[微软论坛](http://social.msdn.microsoft.com/Forums/en-US/wsk/thread/2a342e09-1b48-4606-9154-92bcef052c83)上的帖子没有答案） **有**什么解决方法吗？

*   步骤 1\. 进程 A 绑定 127.0.1.1:88（默认）——OK
*   步骤 2\. 进程 B 绑定 127.0.0.1:88（使用 SO_REUSEADDR）——OK
*   步骤 3\. 进程 C 绑定 127.0.0.1:88 (with SO_REUSEADDR) — 失败 (10013 WSAEACCES)

注意：tcp 端口相同，**接口不同**且显式（在步骤 1 和 2-3 之间）。用户是一样的。

该问题出现在 Windows Vista（32 位）、Windows Server 2008（32 位）、Window Server 2008 R2（64 位）等。

在 Windows XP 中没关系：步骤 3 成功。

**更新**：仅供参考，同样的问题：[Windows 7 套接字绑定行为与 XP 不同，带有重用地址套接字选项（WSAEACCES 10013 错误）](http://social.msdn.microsoft.com/forums/en-US/e8c72373-80c9-4a47-9d82-feefde0c66f6/windows-7-socket-bind-behavior-difference-from-xp-with-reuse-address-socket-option-wsaeacces-10013)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T23:31:44.417

当两个套接字都使用时，将两个套接字绑定到相同的显式接口和端口`SO_REUSEADDR`可以保证成功，即使[Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621.aspx)也这么说。它必须是您的代码中的一个错误，或者您没有`SO_REUSEADDR`在调用之前启用两个套接字`bind()`，或者您实际上没有将两个套接字绑定到相同的显式接口和端口。

`bind()``WSAEACCES`如果接口/端口已在使用中，则不会返回。它`WSAEADDRINUSE`反而返回。 `WSAEACCES`表示您试图绑定到您无权绑定的东西。那是一种不同的错误情况。

# ruby-on-rails - ruby on rails 将实例变量从视图传递到控制器

> ID：11232591
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:19.727
> 
> 标签：ruby-on-rails, parameter-passing

在我看来，我有以下表格：

我`@selected_folder`在此视图的上方某处有一个实例变量

```
<%= form_for :workflow_selection, :remote => true, :method => "get", :url => {:action => "final_submission"} do |f| %>  

            <p> Check the workflows needed and then click on the button with folder name</p>

            <% @workflow_map[@selected_folder].each do |i| %> 

            <p><%= f.check_box(i)%> <%= f.label(i, i)%><br /><p>
            <% end %>

            <br />
            <p><%= f.submit @selected_folder%></p> 
            <% end %> 
```

我想将提交按钮标记为 '`submit'`并且应该仍然能够将 @selected_folder 实例变量传递给 form_for 标记中提到的 final_submission 操作

我尝试了各种选项，例如

```
<%= form_for :workflow_selection, :remote => true, :method => "get", :selected_folder => @selected_folder
    :url => {:action => "final_submission"} do |f| %> 
```

我试图创建一个选择下拉菜单并将其隐藏在视图中，但在单击提交按钮后仍试图通过它。

还有更多选择..

他们都没有工作

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:25:52.853

如果要`@selected_folder`在表单提交中传递，可以添加 hidden_​​field_tag。

根据 Rails 文档：

`hidden_field_tag(name, value = nil, options = {})`

所以在你的情况下

`<%= hidden_field_tag 'selected_folder', @selected_folder %>`

在 workflow_selection 中，selected_folder 将以散列形式出现。

# c# - C# 反转 ushort

> ID：11232594
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:32.013
> 
> 标签：c#, .net, sockets, endianness

我目前遇到了一些 Socket 的问题。

我想要的输出是`0x5801`，它的反转`0x0158`实际上是 344 作为 ushort。

```
ushort t = 344;
p.WriteString("\x58\x01", false); 
```

我现在想要变量而不是硬编码的十六进制。我已经尝试过一些 ReverseBit 类等等，但没有任何效果。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:22:38.493

*从不*使用开始`WriteString`。你想写*二进制*数据，对吧？因此，要么直接使用字节，要么`WriteShort`直接写入字节。

您没有提供太多可使用的信息（例如 的类型`p`，或此数据要表示的内容），但如果这是字节序问题，您可以考虑使用我的[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)，它具有框架`EndianBinaryWriter`和类，但具有指定字节顺序的能力。`EndianBinaryReader``BinaryWriter``BinaryReader`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:25:02.947

听起来像你想要`IPAddress.HostToNetworkOrder`和`NetworkOrderToHost`

[http://msdn.microsoft.com/en-us/library/fw3e4a​​0f](http://msdn.microsoft.com/en-us/library/fw3e4a0f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:23:41.007

我认为这就是你想要做的：

```
ushort t = 344;
var b = BitConverter.GetBytes(t);
if (!BitConverter.IsLittleEndian)
    Array.Reverse(b);
//write b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T18:33:32.277

该[`BitConverter.GetBytes`](http://msdn.microsoft.com/en-us/library/fk3sts66)方法返回的字节顺序取决于您的计算机体系结构的字节序；但是，*预期*的字节顺序也是如此[`BitConverter.ToString`](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)，这意味着如果两个操作都在同一台机器上执行，您不必执行任何手动反转。

```
ushort t = 344;
byte[] bytes = BitConverter.GetBytes(t);
string hex = BitConverter.ToString(bytes);
hex = hex.Replace("-", "");
p.WriteString(hex); 
```

# android - 补间动画不适用于 Android

> ID：11232595
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:33.990
> 
> 标签：android, eclipse, animation, tween

我正在尝试做一些非常基本的事情。我只是想在单击按钮时从 Android 应用程序的 xml 资源文件运行一个简单的补间动画。运行应用程序时动画不会启动。我要疯了，试图找出原因。

这是 res/anim/spin.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http:schemas.android.com/apk/res/android"
    android:shareInterpolator="false">

    <rotate
        android:fromDegrees="0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:repeatCount="infinite"
        android:toDegrees="360" />

</set> 
```

这是我的活动课：

```
 package jorge.jorge.jorge;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.animation.Animation;
    import android.view.animation.AnimationUtils;
    import android.widget.Button;
    import android.widget.ImageView;

    public class Assignment5Activity extends Activity {
        /** Called when the activity is first created. */

        @Override

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            final Button btnSpin = (Button) findViewById(R.id.button1);
            btnSpin.setText("Start");
            btnSpin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) 
                {

                    ImageView iv = (ImageView) findViewById(R.id.imageView1);
                    Animation an =    AnimationUtils.loadAnimation(Assignment5Activity.this, R.anim.spin);

                    iv.startAnimation(an);

                    if (an.hasStarted())
                    {
                        btnSpin.setText("Stop");
                    }
                    else
                    {
                        iv.startAnimation(an);
                    }
                }
            } ); 

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:50:02.663

解决方案：

*spin.xml*与您的 xml 保持相同。
在按钮的`OnClickListener`.

```
ImageView iv = (ImageView) findViewById(R.id.imageView1);
Animation an = AnimationUtils.loadAnimation(Assignment5Activity.this, R.anim.spin);
iv.startAnimation(an); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T20:30:47.993

给动画一个持续时间。我相信默认情况下它是 0（与默认情况下约为 300 毫秒的属性动画相反）。

此外，您可以使用 NineOldAndroids 将优越得多的 ViewPropertyAnimator 方法反向移植到 pre-Honeycomb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T00:09:32.347

您是否尝试过将 android:toDegrees 从 360 更改为 359？对于 android，0 度与 360 度相同，因为数字序列从 0 而不是 1 开始。所以本质上，在当前设置为 360 的情况下，告诉它从 0 度到 360 度就像告诉它保持原样。

```
 <rotate
        android:fromDegrees="0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:repeatCount="infinite"
        android:toDegrees="359" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:28:26.660

尝试这个

```
final ImageView iv = (ImageView) findViewById(R.id.imageView1);
                    Animation an =        AnimationUtils.loadAnimation(Assignment5Activity.this, R.anim.spin);

 btnSpin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) 
                {

                    iv.startAnimation(an);

                    if (an.hasStarted())
                    {
                        btnSpin.setText("Stop");
                    }
                    else
                    {
                        iv.startAnimation(an);
                    }
                }
            } ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T18:41:48.423

使用**RotateAnimation**，将轴心点设置为图像的中心。

```
RotateAnimation anim = new RotateAnimation(0f, 350f, 15f, 15f);
anim.setInterpolator(new LinearInterpolator());
anim.setRepeatCount(Animation.INFINITE);
anim.setDuration(700);

// Start animating the image
final ImageView iv = (ImageView) findViewById(R.id.imageView1);
iv.startAnimation(anim);

// Later.. stop the animation
iv.setAnimation(null); 
```

# python - 将 Python 对象存储在 Python 列表中与固定长度的 Numpy 数组

> ID：11232597
> 
> 赞同：11
> 
> 时间：2012-06-27T18:20:40.070
> 
> 标签：python, performance, numpy, python-3.x, cpython

在做一些生物信息学工作时，我一直在思考将对象实例存储在 Numpy 数组而不是 Python 列表中的后果，但在我所做的所有测试中，每个实例的性能都更差。我正在使用 CPython。有谁知道原因？

具体来说：

*   `numpy.ndarray(dtype=object)`使用固定长度数组与常规 Python 列表对性能有何影响？我执行的初始测试表明，访问 Numpy 数组元素比遍历 Python 列表要慢，尤其是在使用对象方法时。
*   为什么使用列表推导来实例化对象`[ X() for i in range(n) ]`而不是 a会更快`numpy.empty(size=n, dtype=object)`？
*   每个的内存开销是多少？我无法对此进行测试。我的课程广泛使用`__slots__`，如果这有任何影响的话。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T19:10:06.127

不要在 numpy 中使用对象数组来处理这样的事情。

它们破坏了 numpy 数组的基本目的，虽然它们在少数情况下很有用，但它们几乎总是一个糟糕的选择。

是的，在 python 中访问 numpy 数组的单个元素或在 python 中遍历 numpy 数组比使用`list`. （这就是为什么你永远不应该做类似`y = [item * 2 for item in x]`when`x`是一个 numpy 数组的事情。）

Numpy 对象数组的内存开销会比列表略低，但如果你要存储那么多单独的 python 对象，你首先会遇到其他内存问题。

Numpy 首先是一个内存高效的多维数组容器，用于统一数值数据。如果你想在一个 numpy 数组中保存任意对象，你可能需要一个列表，而不是。

* * *

我的观点是，如果您想有效地使用 numpy，您可能需要重新考虑如何构建事物。

不是将每个对象实例存储在一个 numpy 数组中，而是将您的*数字*数据存储在一个 numpy 数组中，如果您需要为每行/列/其他任何内容单独的对象，请在每个实例中将索引存储到该数组中。

通过这种方式，您可以快速对数值数组进行操作（即使用 numpy 而不是列表推导）。

作为我正在谈论的一个简单示例，这是一个不使用 numpy 的简单示例：

```
from random import random

class PointSet(object):
    def __init__(self, numpoints):
        self.points = [Point(random(), random()) for _ in xrange(numpoints)]

    def update(self):
        for point in self.points:
            point.x += random() - 0.5
            point.y += random() - 0.5

class Point(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

points = PointSet(100000)
point = points.points[10]

for _ in xrange(1000):
    points.update()
    print 'Position of one point out of 100000:', point.x, point.y 
```

还有一个使用 numpy 数组的类似示例：

```
import numpy as np

class PointSet(object):
    def __init__(self, numpoints):
        self.coords = np.random.random((numpoints, 2))
        self.points = [Point(i, self.coords) for i in xrange(numpoints)]

    def update(self):
        """Update along a random walk."""
        # The "+=" is crucial here... We have to update "coords" in-place, in
        # this case. 
        self.coords += np.random.random(self.coords.shape) - 0.5

class Point(object):
    def __init__(self, i, coords):
        self.i = i
        self.coords = coords

    @property
    def x(self):
        return self.coords[self.i,0]

    @property
    def y(self):
        return self.coords[self.i,1]

points = PointSet(100000)
point = points.points[10]

for _ in xrange(1000):
    points.update()
    print 'Position of one point out of 100000:', point.x, point.y 
```

还有其他方法可以做到这一点（例如，您可能希望避免在 each 中存储对*特定*numpy 数组的引用`point`），但我希望这是一个有用的示例。

注意它们运行的​​速度差异。在我的机器上，numpy 版本相差 5 秒，而纯 python 版本相差 60 秒。

# bash - 在 bash 配置文件中编写缩短的 awk 语句？

> ID：11232599
> 
> 赞同：0
> 
> 时间：2012-06-27T18:20:55.047
> 
> 标签：bash, awk, .bash-profile

我想在我的 bash 配置文件中创建一个函数来缩短：

```
awk 'BEGIN{OFS="\t";FS="\t"}{}' 
```

我希望能够输入：

```
awk2 '{print $0}' 
```

让它做：

```
awk 'BEGIN{OFS="\t";FS="\t"}{print $0}' 
```

除非它在输入中检测到 BEGIN ...在这种情况下，它将恢复到原始的 awk 功能。

有谁知道这个功能会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:45:16.317

如果您使用 awk 的 -v 而不是 BEGIN 块，这很容易。

```
awk2() {
   awk -F'\t' -v OFS='\t' "$@"
} 
```

-v 用于变量赋值，并且确实发生在行处理之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:49:59.050

别名会很乱，我建议您使用 bash 函数缩短它：

```
function awk2() {
    awk -F "\t" -v OFS="\t" "$@"
} 
```

# c# - 针对频繁重复发生的事件的 TPL 完成的高效信号任务

> ID：11232604
> 
> 赞同：11
> 
> 时间：2012-06-27T18:21:22.383
> 
> 标签：c#, .net, task-parallel-library, async-await

我正在开发一个模拟系统，除其他外，它允许以离散的模拟时间步长执行任务。执行都发生在模拟线程的上下文中，但是，从使用系统的“操作员”的角度来看，他们希望以异步方式运行。值得庆幸的是，带有方便的“async/await”关键字的 TPL 使这变得相当简单。我在模拟上有一个原始方法，如下所示：

```
 public Task CycleExecutedEvent()
    {
        lock (_cycleExecutedBroker)
        {
            if (!IsRunning) throw new TaskCanceledException("Simulation has been stopped");
            return _cycleExecutedBroker.RegisterForCompletion(CycleExecutedEventName);
        }
    } 
```

这基本上是创建一个新的 TaskCompletionSource，然后返回一个 Task。此任务的目的是在模拟中出现新的“ExecuteCycle”时执行其延续。

然后我有一些这样的扩展方法：

```
 public static async Task WaitForDuration(this ISimulation simulation, double duration)
    {
        double startTime = simulation.CurrentSimulatedTime;
        do
        {
            await simulation.CycleExecutedEvent();
        } while ((simulation.CurrentSimulatedTime - startTime) < duration);
    }

    public static async Task WaitForCondition(this ISimulation simulation, Func<bool> condition)
    {
        do
        {
            await simulation.CycleExecutedEvent();
        } while (!condition());
    } 
```

因此，这些对于从“操作员”的角度构建序列、根据条件采取行动并等待模拟时间段非常方便。我遇到的问题是 CycleExecuted 非常频繁地发生（如果我以完全加速的速度运行，大约每隔几毫秒）。因为这些“等待”辅助方法在每个循环中注册一个新的“等待”，这会导致 TaskCompletionSource 实例的大量周转。

我分析了我的代码，发现大约 5.5% 的总 CPU 时间花费在这些完成中，其中只有一小部分花费在“活动”代码中。实际上，在等待触发条件有效时，所有时间都花在注册新的完成上。

我的问题：我怎样才能在这里提高性能，同时仍然保留异步/等待模式编写“操作员行为”的便利性？考虑到触发事件如此频繁地发生，我想我需要一个轻量级和/或可重用的 TaskCompletionSource 之类的东西。

* * *

我一直在做更多的研究，听起来一个不错的选择是创建 Awaitable 模式的自定义实现，它可以直接绑定到事件中，从而无需一堆 TaskCompletionSource 和 Task 实例。它在这里有用的原因是有很多不同的延续在等待 CycleExecutedEvent 并且他们需要经常等待它。所以理想情况下，我正在寻找一种方法来排队继续回调，然后在事件发生时回调队列中的所有内容。我会继续挖掘，但如果人们知道一种干净的方法，我欢迎任何帮助。

* * *

对于将来浏览此问题的任何人，这是我整理的自定义等待者：

```
public sealed class CycleExecutedAwaiter : INotifyCompletion
{
    private readonly List<Action> _continuations = new List<Action>();

    public bool IsCompleted
    {
        get { return false; }
    }

    public void GetResult()
    {
    }

    public void OnCompleted(Action continuation)
    {
        _continuations.Add(continuation);
    }

    public void RunContinuations()
    {
        var continuations = _continuations.ToArray();
        _continuations.Clear();
        foreach (var continuation in continuations)
            continuation();
    }

    public CycleExecutedAwaiter GetAwaiter()
    {
        return this;
    }
} 
```

在模拟器中：

```
 private readonly CycleExecutedAwaiter _cycleExecutedAwaiter = new CycleExecutedAwaiter();

    public CycleExecutedAwaiter CycleExecutedEvent()
    {
        if (!IsRunning) throw new TaskCanceledException("Simulation has been stopped");
        return _cycleExecutedAwaiter;
    } 
```

这有点有趣，因为等待者从不报告 Complete，但 fires 在注册时继续调用完成；尽管如此，它仍然适用于这个应用程序。这将 CPU 开销从 5.5% 降低到 2.1%。它可能仍需要进行一些调整，但与原始版本相比，这是一个很好的改进。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T19:37:25.077

该`await`关键字不仅适用于`Task`s，它适用于任何遵循等待模式的东西。有关详细信息，请参阅[Stephen Toub 的文章*等待任何东西；*](https://devblogs.microsoft.com/pfxteam/await-anything/).

简短的版本是该类型必须有一个方法，该方法`GetAwaiter()`返回一个实现[`INotifyCompletion`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.inotifycompletion%28v=vs.110%29.aspx)并且还具有`IsCompleted`属性和`GetResult()`方法的类型（`void`-returning，如果`await`表达式不应该有值）。例如，请参阅[`TaskAwaiter`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.taskawaiter%28v=vs.110%29.aspx)。

如果您创建自己的等待对象，则每次都可以返回相同的对象，从而避免分配许多`TaskCompletionSource`s 的开销。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-19T04:26:51.583

这是我的`ReusableAwaiter`模拟版本`TaskCompletionSource`

```
public sealed class ReusableAwaiter<T> : INotifyCompletion
{
    private Action _continuation = null;
    private T _result = default(T);
    private Exception _exception = null;

    public bool IsCompleted
    {
        get;
        private set;
    }

    public T GetResult()
    {
        if (_exception != null)
            throw _exception;
        return _result;
    }

    public void OnCompleted(Action continuation)
    {
        if (_continuation != null)
            throw new InvalidOperationException("This ReusableAwaiter instance has already been listened");
        _continuation = continuation;
    }

    /// <summary>
    /// Attempts to transition the completion state.
    /// </summary>
    /// <param name="result"></param>
    /// <returns></returns>
    public bool TrySetResult(T result)
    {
        if (!this.IsCompleted)
        {
            this.IsCompleted = true;
            this._result = result;

            if (_continuation != null)
                _continuation();
            return true;
        }
        return false;
    }

    /// <summary>
    /// Attempts to transition the exception state.
    /// </summary>
    /// <param name="result"></param>
    /// <returns></returns>
    public bool TrySetException(Exception exception)
    {
        if (!this.IsCompleted)
        {
            this.IsCompleted = true;
            this._exception = exception;

            if (_continuation != null)
                _continuation();
            return true;
        }
        return false;
    }

    /// <summary>
    /// Reset the awaiter to initial status
    /// </summary>
    /// <returns></returns>
    public ReusableAwaiter<T> Reset()
    {
        this._result = default(T);
        this._continuation = null;
        this._exception = null;
        this.IsCompleted = false;
        return this;
    }

    public ReusableAwaiter<T> GetAwaiter()
    {
        return this;
    }
} 
```

这是测试代码。

```
class Program
{
    static readonly ReusableAwaiter<int> _awaiter = new ReusableAwaiter<int>();

    static void Main(string[] args)
    {
        Task.Run(() => Test());

        Console.ReadLine();
        _awaiter.TrySetResult(22);
        Console.ReadLine();
        _awaiter.TrySetException(new Exception("ERR"));

        Console.ReadLine();
    }

    static async void Test()
    {

        int a = await AsyncMethod();
        Console.WriteLine(a);
        try
        {
            await AsyncMethod();
        }
        catch(Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

    }

    static  ReusableAwaiter<int> AsyncMethod()
    {
        return _awaiter.Reset();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:51:35.047

你真的需要`WaitForDuration`在不同的线程上接收 -event 吗？如果没有，您可以只注册一个回调（或事件）`_cycleExecutedBroker`并同步接收通知。在回调中，您可以测试您喜欢的任何条件，并且只有当该条件结果为真时，才通知不同的线程（使用任务或消息或任何机制）。我了解您测试的条件很少评估为真，因此您可以避免大多数跨线程调用。

我想我的回答的要点是：尝试通过将计算移动到“源”线程来减少跨线程消息传递的数量。

# regex - 在 Perl 中，如何从字符串中去除双引号以外的空格，并将这些引号替换为 ||？

> ID：11232607
> 
> 赞同：2
> 
> 时间：2012-06-27T18:21:28.823
> 
> 标签：regex, perl

我试图找到一种方法来用管道（||）替换空格和双引号，同时保持双引号内的空格不受影响。

例如，它会将类似“word word word”之类的东西变成'word||word word||word'，而另一个类似'word word word'的东西变成'word||word||word'。

现在我有这个工作了：

```
[%- MACRO typestrip(value) PERL -%]
my $htmlVal = $stash->get('value');
$htmlVal =~ s/"/||/g;
print $htmlVal
[%- END -%] 
```

它可以很好地处理用管道替换双引号。

我不知道这应该是多么简单或复杂，或者是否可以完成，因为我没有实际的编程背景，虽然我使用过一些 Perl，但以前从来没有这种情况，所以如果我我很抱歉我没有很好地解释这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T18:31:54.477

我认为使用核心模块在未引用的空格上拆分可能更容易[`Text::ParseWords`](http://p3rl.org/Text::ParseWords)，然后用管道重新加入“单词”。

```
#!/usr/bin/env perl

use warnings;
use strict;

use Text::ParseWords;

while (my $line = <DATA>) {
  print space2pipes($line); 
  print "\n";
}

sub space2pipes {
  my $line = shift;
  chomp $line;
  my @words = parse_line( qr/\s+/, 0, $line );
  return join '||', @words;
}

__DATA__
word "word word" word
word word word 
```

将其放入您的模板引擎中作为练习留给读者:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T19:23:43.550

这与[Perl FAQ 的第 4 节中的一个常见问题有关](http://perldoc.perl.org/perlfaq4.html#How-can-I-split-a-[character]-delimited-string-except-when-inside-[character]?)。

> ### 除非在 [character] 内，否则如何拆分 [character] 分隔的字符串？
> 
> 有几个模块可以处理这种解析—— [Text::Balanced](http://perldoc.perl.org/Text/Balanced.html)、[Text::CSV](http://search.cpan.org/perldoc/Text::CSV)、[Text::CSV_XS](http://search.cpan.org/perldoc/Text::CSV_XS)和[Text::ParseWords](http://perldoc.perl.org/Text/ParseWords.html)等等。
> 
> 以尝试将逗号分隔的字符串拆分为不同字段的示例为例。您不能使用`split(/,/)`，因为如果逗号在引号内，您不应该拆分。例如，采用这样的数据线：
> 
> ```
> SAR001,"","Cimetrix, Inc","Bob Smith","CAM",N,8,1,0,7,"错误，核心转储"
> ```
> 
> 由于引号的限制，这是一个相当复杂的问题。值得庆幸的是，我们有*Mastering Regular Expressions*的作者 Jeffrey Friedl为我们处理这些问题。他建议（假设您的字符串包含在 中`$text`）：
> 
> ```
> my @new = ();
> push(@new, $+) while $text =~ m{
>            # groups the phrase inside the quotes
>              "([^\"\\]*(?:\\.[^\"\\]*)*)",?
>            | ([^,]+),?
>            | ,
>      }gx;
> push(@new, undef) if substr($text,-1,1) eq ','; 
> ```
> 
> 如果您想在引号分隔的字段中表示引号，请使用反斜杠（*例如*，`"like \"this\""`）转义它们。
> 
> 或者，[Text::ParseWords](http://perldoc.perl.org/Text/ParseWords.html)模块（标准 Perl 发行版的一部分）让您说：
> 
> ```
> use Text::ParseWords;
> @new = quotewords(",", 0, $text); 
> ```
> 
> 但是，对于解析或生成 CSV，强烈建议使用[Text::CSV](http://search.cpan.org/perldoc/Text::CSV)而不是自己实现它；您只需使用已经在生产环境中尝试和测试多年的代码，就可以避免以后出现的奇怪错误。

使该技术适应您的情况

```
my $htmlVal = 'word "word word" word';

my @chunks;
push @chunks, $+ while $htmlVal =~ m{
    "([^\"\\]*(?:\\.[^\"\\]*)*)"
  | (\S+)
}gx;

$htmlVal = join "||", @chunks;
print $htmlVal, "\n"; 
```

输出：

```
单词||单词单词||单词
```

回顾过去，事实证明这是 Randal 规则的一个应用，正如Mark Dominus在[Regular Expression Mastery中所说的那样：](http://perl.plover.com/yak/regex/samples/slide070.html)

> ## 兰德尔法则
> 
> *   Randal Schwartz（*Learning Perl*的作者[也是[Stack Overflow 用户](https://stackoverflow.com/users/22483/randal-schwartz)]）说：
> 
> > 使用捕获或`m//g`当您知道要保留什么时。
> > 
> > `split`当您知道要丢弃什么时使用。
> 
> ![兰德尔·施瓦茨](../Images/6310543bc9fff84462d07826c69b5090.png)

在您的情况下，您知道要保留什么，因此请使用`m//g`引号内的文本或以空格分隔的其他文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:12:11.943

虽然[Joel 的回答很好](https://stackoverflow.com/a/11232786/100754)，但可以通过专门`shellwords`用于标记行来简化一些事情：

```
#!/usr/bin/env perl

use strict; use warnings;
use Text::ParseWords qw( shellwords );

my @strings = (
    'word "word word" word',
    'word "word word" "word word"',
);

@strings = map join('||', shellwords($_)), @strings;

use YAML;
print Dump \@strings; 
```

这不是比一堆 regex-gobbledygook 更具可读性吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:03:06.803

如果只有正则表达式适用，似乎可能并且可能有用：

```
 $htmlVal =~ s/(?:"([^"]+)"(\s*))|(?:(\S+)(\s*))/($1||$3).($2||$4?'||':'')/eg; 
```

（仔细反省后可能会被美化一点。）

输入：

```
 my $htmlVal ='word "word word" word'; 
```

输出：

```
 word||word word||word 
```

* * *

在这种情况下失败后，原始代码已被修改：

```
 my $htmlVal ='word "word word" "word word"'; 
```

现在也可以工作了：

```
 word||word word||word word 
```

* * *

解释：

```
 $htmlVal =~ s/
               (?: " ([^"]+) " (\s*)) # search "abc abc" ($1), End ($2)
               |                      # OR
               (?: (\S+) (\s*))       # abcd ($3), End ($4)
              /
               ($1||$3) . ($2||$4 ? '||' : '') # decide on $1/$2 or $3/$4 
              /exg; 
```

问候

rbo

# html - 如何将包裹在 div 中的文本彼此相邻放置？

> ID：11232609
> 
> 赞同：1
> 
> 时间：2012-06-27T18:21:31.287
> 
> 标签：html, css

我希望这段文字都在一行上，而不是在两行分开。怎么做到呢？

```
<div id="titlefont">
    <div id="boldness">This text</div>should be next to each other
</div>​ 
```

```
#titlefont {
       font-family:arial;
       font-size:30px;
       text-align:center;
       color:#35404c;
}

 #boldness {
       font-weight:bold;
       font-style:italic; 
} 
```

[http://jsfiddle.net/nfSku/](http://jsfiddle.net/nfSku/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:22:50.447

默认情况下`div`s 被渲染为块元素，当不浮动时清除任何其他元素。

小提琴：http: [//jsfiddle.net/iambriansreed/eu7AW/](http://jsfiddle.net/iambriansreed/eu7AW/)

CSS：

```
#boldness {
    font-weight:bold;
    font-style:italic; 
    display: inline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:30:53.347

尝试在同一水平线上显示对象时， 您始终可以`float`使用`div`s 或添加属性。[如果您想在同一行对齐图像和文本，请阅读此处。](https://stackoverflow.com/questions/7718761/placing-div-on-same-line-as-image)`display`

# cordova - 运行 phonegap - cordova 子浏览器时出错？

> ID：11232610
> 
> 赞同：1
> 
> 时间：2012-06-27T18:21:33.537
> 
> 标签：cordova

运行子浏览器时出现此错误。

错误：WebKit 在 webView 中丢弃了一个未捕获的异常。

使用 childbrowser，它只会在我第一次点击链接时打开，第二次不会！它将 .bind 触发 2 次并解决问题。我在某处读到 [webview stopLoading]; 应该可以解决问题，我猜在 ChildBrowserViewContreller.m 文件中。我的问题是我不知道把代码放在哪里？我已经测试了几个地方，但没有运气。任何输入表示赞赏，谢谢！

我找到了解决办法！在 childbrowser.js 文件中取消注释这 4 行：

// 显示一个网页，将导致回调 onLocationChange ChildBrowser.prototype.showWebPage = function(loc) {
//if (typeof PhoneGap !== "undefined")
//{

// PhoneGap.exec("ChildBrowserCommand.showWebPage", loc);
//} if(typeof Cordova !== "undefined") { Cordova.exec("ChildBrowserCommand.showWebPage", loc); } };

就是这样，现在它一直打开！

# javascript - 如何让 BlueImp jQuery FileUpload 生成唯一的文件名

> ID：11232614
> 
> 赞同：4
> 
> 时间：2012-06-27T18:21:50.380
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-plugins, file-upload

我目前有一个使用 BlueImp jQuery FileUploader 的 ASP.NET MVC 项目，效果很好。

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

但是，似乎默认行为是在将文件上传到服务器时使用原始文件名。理想情况下，我想要让 jQuery FileUploader 为每个上传的文件生成一个唯一的文件名。

我确实尝试在服务器上对每个上传的文件进行重命名，但后来我意识到 FileUploader 似乎挂在原始文件名上。

有没有办法让 jQuery 上传器为每个上传的图像生成一个随机/唯一的文件名（无论是单独的还是批量的）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T22:49:54.827

我只是有同样的问题。使用 PHP 的 upload.class 文件，我向 handle_file_upload 方法添加了一个唯一的文件名，如下所示：

前：

```
$file->name = $this->trim_file_name($name, $type, $index); 
```

后：

```
$file->name = $this->trim_file_name(md5($name), $type, $index); 
```

我相信你可以在 ASP.NET 中做类似的事情

* * *

**编辑：**

在最新版本中，它位于 UploadHandler.php 的第 506 行，更改：

```
$name = $this->trim_file_name($file_path, $name, $size, $type, $error, $index, $content_range); 
```

至

```
$name = $this->trim_file_name($file_path, md5($name), $size, $type, $error, $index, $content_range); 
```

完美运行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T00:12:07.683

```
 protected function handle_file_upload($uploaded_file, $name, $size, $type, $error,
        $index = null, $content_range = null) {
            $file = new stdClass();
 } 
```

前：

```
$file->name = $this->get_file_name($name, $type, $index, $content_range); 
```

后：

```
$file->name = $this->get_file_name(uniqid(), $type, $index, $content_range); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T15:50:18.493

我编辑了保罗的答案，但它被拒绝了......无论如何，他的答案是正确的，但代码行是针对旧文件的。

在最新版本中，它位于 UploadHandler.php 的第 506 行，更改：

```
 $name = $this->trim_file_name($file_path, $name, $size, $type, $error, $index, $content_range); 
```

至

```
 $name = $this->trim_file_name($file_path, md5($name), $size, $type, $error, $index, $content_range); 
```

完美运行！

# android - Android：在gridview中用线条连接项目

> ID：11232615
> 
> 赞同：1
> 
> 时间：2012-06-27T18:21:51.030
> 
> 标签：android, gridview, draw, items

有没有办法将 GridView 中的项目与线/箭头最好在后台连接？

我在 GridView 中有动态数量的项目（按钮），并且必须根据数据库的数据将某些按钮与其他按钮连接起来。

GridView 很可能比屏幕大，因此包含线条/箭头的视图必须与 GridView 同时滚动。

[问题]：[Android：网络关系图](https://stackoverflow.com/questions/11225735/android-network-relationship-graph)更详细地描述了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:31:01.130

如果是我，我会考虑定义一个布局用作gridview 的“背景”对象。该布局将是一个具有自定义视图的单个相对布局，该视图在两个维度中都填充父级。

在这个自定义视图中，我将覆盖“onDraw”方法和所有适当的构造函数，以在单个画布上执行您的箭头绘制，该画布现在应该是您的 gridview 的确切大小！

这是我想开始的地方。

也看这里：

[在 Android 上从 .png 文件绘制自定义视图的背景](https://stackoverflow.com/questions/9015441/draw-background-of-custom-view-from-png-file-on-android)

因为它显示了如何设置视图的 backgroundDrawable。如果您将自定义视图实现为可绘制，那么您应该能够创建一个新视图并将其发送到网格视图的背景可绘制对象中。

要使其与您的实际网格数据一起滚动，您可能需要稍微调整一下 gridview 的大小，使其成为您正在显示的 DataSet 的完整大小，并将其包含在其他滚动视图中以完成此操作。

我的应用程序中确实有一个 gridview，我实现了一个水平滚动视图（因为我在顶部有按钮，允许我按任何列排序并希望这些列始终可见，并且 gridview 在下方垂直滚动） . 这为我创建了 gridview 的整体宽度，因为它只是遵循父宽度，它包装了定义顶部按钮集的线性布局的内容。然后，gridview 会在垂直方向上自动滚动，让更高级别的水平滚动条在水平方向上执行。对您而言，您可能需要在水平滚动条内有一个垂直滚动条，并允许您的 gridview 为全尺寸（即大于内容视图区域）并允许外部滚动条为您执行滚动。

# python - SQLAlchemy 一对多，没有子表有主键

> ID：11232616
> 
> 赞同：6
> 
> 时间：2012-06-27T18:21:52.173
> 
> 标签：python, database, orm, sqlalchemy, ddl

是否可以在 SQLAlchemy 中创建没有主键的表？我要定义的关系如下：

```
class TPost(Base):
  __tablename__ = "forum_post"
  id = Column(Integer, primary_key = True)
  topic_id = Column(Integer, ForeignKey("forum_topic.id"))
  index = Column(Integer)
  page = Column(Integer)
  user_id = Column(Integer, ForeignKey("forum_user.id"))
  posted_at = Column(DateTime)
  post_text = Column(String)
  has_quotes = Column(Boolean)
  quotes = relationship("TQuote")

class TQuote(Base):
  __tablename__ = "forum_quotes"
  id = Column(Integer, ForeignKey("forum_post.id"))
  is_direct = Column(Boolean)
  quoted_text = Column(String)
  quoted_id = Column(Integer) 
```

如您所见，我真的不需要主键，并且我不打算`Quote`将来扩展这种关系。

我的问题具体由以下错误消息表示：

```
sqlalchemy.exc.ArgumentError: Mapper Mapper|TQuote|forum_quotes 
could not assemble any primary key columns for mapped table 'forum_quotes' 
```

**编辑：** 这`(id,quoted_id)`对是唯一的，它存在于大多数数据中，但是当引用不是直接的（并且在这种情况下没有quoted_id）时，我将引用的文本直接内联到引用关系中。我可以使用双表方法（其中间接引号有一个带有主键的表），但我真的更愿意将其实现为单个一对多关系。我不想只做一个连接。

**编辑2：**

我会给引号编号并使用外键+应用程序生成的数字作为pkey，仍然很烦人。现在来弄清楚语法。

**编辑3：**

解决了编辑 2 中概述的问题。对 sql alchemy 非常恼火，因为它具有实现关系所需的所有信息，即使在对数据进行高级建模时也是如此。我了解 Sql Alchemy 想要拥有主键的原因（使 orm 更易于实现）。

我开始质疑为什么我使用 Sql Alchemy，没有它我可以使用 psycopg2 实现一种方式 UPSERT 或 CREATE_IF_NOT_EXIST 异步操作。ORM 真的需要迎头赶上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T12:58:50.320

我假设@TokenMacGuy 是对的，而您确实混淆了`PrimaryKey`, 和 a的概念`surrogate key`。在这种情况下，您的问题的答案是：

*   **否**，SA 不支持没有主键的表（因此不支持与表的关系）
*   并且**不**，您不需要为每个表创建代理键来充当`primary key`. 您可以使用具有唯一性的列的任意组合来定义 PK。

有关示例，请参见下面的代码：

```
class TPost(Base):
    __tablename__ = 'forum_post'
    id = Column(Integer, primary_key = True)
    post_text = Column(String)
    quotes = relationship("TQuote", backref="post")

class TQuote(Base):
    __tablename__ = "forum_quotes"
    id = Column(Integer, ForeignKey("forum_post.id"))
    is_direct = Column(Boolean)
    quoted_text = Column(String)
    quoted_id = Column(Integer) 
    __table_args__ = (PrimaryKeyConstraint(id, quoted_id),) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:19:40.617

添加一个额外的列给引号一个索引，然后添加这个新列+外键的复合键。

# excel - 使用 VBA 将数据从 Excel 导出到 Access

> ID：11232619
> 
> 赞同：2
> 
> 时间：2012-06-27T18:22:03.630
> 
> 标签：excel, ms-access, vba, export

我在 Excel 文件中有一个包含一些数据的表，我想使用 VBA 代码将这些数据导出到 Access 上的数据库（在我的数据库中名为 Water Quality 的具体表中），以避免每次打开我的数据库想介绍更多关于它的数据。

目前我有这个代码，但它不工作......

```
Sub Button14_Click()

' Macro purpose: To add record to Access database using ADO and SQL
' NOTE:  Reference to Microsoft ActiveX Data Objects Libary required

' Exports data from the active worksheet to a table in an Access database

'Dim cnt As New ADODB.Connection
'Dim rst As New ADODB.Recordset
Dim cnt As DAO.Database
Dim rst As Recordset
Dim dbPath As String
Dim tblName As String
Dim rngColHeads As Range
Dim rngTblRcds As Range
Dim colHead As String
Dim rcdDetail As String
Dim ch As Integer
Dim cl As Integer
Dim notNull As Boolean
Dim sConnect As String

'Set the string to the path of your database as defined on the worksheet
dbPath = "C:\Documents and Settings\Administrador\Mis documentos\MonEAU\modelEAU Database V.2.accdb"
tblName = "Water Quality"
Set rngColHeads = ActiveSheet.Range("tblHeadings")
Set rngTblRcds = ActiveSheet.Range("tblRecords")

'Set the database connection string here
sConnect = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & dbPath & "';"     'For use with *.accdb files
' sConnect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & dbPath & ";"     'For use with *.mdb files

'Concatenate a string with the names of the column headings
colHead = " ("
For ch = 1 To rngColHeads.Count
    colHead = colHead & rngColHeads.Columns(ch).Value
    Select Case ch
        Case Is = rngColHeads.Count
            colHead = colHead & ")"
        Case Else
            colHead = colHead & ","
    End Select
Next ch

'Open connection to the database
cnt.Open sConnect
'Begin transaction processing
On Error GoTo EndUpdate
cnt.BeginTrans

'Insert records into database from worksheet table
For cl = 1 To rngTblRcds.Rows.Count
    'Assume record is completely Null, and open record string for concatenation
    notNull = False
    rcdDetail = "('"

    'Evaluate field in the record
    For ch = 1 To rngColHeads.Count
        Select Case rngTblRcds.Rows(cl).Columns(ch).Value

                'if empty, append value of null to string
            Case Is = Empty
                Select Case ch
                    Case Is = rngColHeads.Count
                        rcdDetail = Left(rcdDetail, Len(rcdDetail) - 1) & "NULL)"
                    Case Else
                        rcdDetail = Left(rcdDetail, Len(rcdDetail) - 1) & "NULL,'"
                End Select

                'if not empty, set notNull to true, and append value to string
            Case Else
                notNull = True
                Select Case ch
                    Case Is = rngColHeads.Count
                        rcdDetail = rcdDetail & rngTblRcds.Rows(cl).Columns(ch).Value & "')"
                    Case Else
                        rcdDetail = rcdDetail & rngTblRcds.Rows(cl).Columns(ch).Value & "','"
                End Select
        End Select
    Next ch

    'If record consists of only Null values, do not insert it to table, otherwise
    'insert the record
    Select Case notNull
        Case Is = True
            rst.Open "INSERT INTO " & tblName & colHead & " VALUES " & rcdDetail, cnt
        Case Is = False
            'do not insert record
    End Select
Next cl

EndUpdate:
'Check if error was encounted
If Err.Number <> 0 Then
    'Error encountered.  Rollback transaction and inform user
    On Error Resume Next
    cnt.RollbackTrans
    MsgBox "There was an error.  Update was not succesful!", vbCritical, "Error!"
Else
    On Error Resume Next
    cnt.CommitTrans
End If

'Close the ADO objects
cnt.Close
Set rst = Nothing
Set cnt = Nothing
On Error GoTo 0

End Sub 
```

目前，问题是当我调试代码时，在函数“cnt.Open sConnect”上出现编译错误：“找不到方法或数据成员”。

如果这是可能的，任何帮助将不胜感激。

注意：我使用的是 Office 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:28:46.590

您的编译错误是由于以下 2 行：

```
Dim cnt As DAO.Database
cnt.Open sConnect 
```

`DAO.Database`对象没有方法`.Open`，这解释了“*找不到方法或数据成员*”。错误消息经常会有些含糊，而且不是很有帮助。但是，在这种情况下，我想不出错误信息怎么能更清楚。

还有一些我不明白的。 `sConnect`看起来像一个 ADO 连接字符串。但是`cnt`是一个**DAO**（数据库）对象。您不能像在一个语句中那样混搭两个对象模型。

你在你的活动变量声明之前有这个：

```
'Dim cnt As New ADODB.Connection 
```

然后在您的程序的后期，您有：

```
'Close the ADO objects
cnt.Close 
```

因此，也许您最初打算`cnt`成为一个`ADO.Connection`对象，并且在将其切换为对象后没有调整其余代码`DAO.Database`。

我建议您修改您的代码以理清 DAO 与 ADO 的混淆，然后如果您还有任何问题，请向我们展示新代码。请仅向我们展示重现您希望解决的问题所需的最少测试代码。TIA 供您考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:28:01.593

我只有打开 excel 文件的 Access 数据库（而不是相反），但是通过查看我的代码，我认为你应该直接看这个：

```
`Set cnt = OpenDatabase_
       (dbPath, False, True, "Access 8.0;") 
```

[在http://support.microsoft.com/kb/190195](http://support.microsoft.com/kb/190195)上也找到了这个。

这有帮助吗？

# jquery - 遍历 JSON 数组：获取参数名称

> ID：11232621
> 
> 赞同：2
> 
> 时间：2012-06-27T18:22:13.397
> 
> 标签：jquery, json, loops

我正在遍历我的 JSON 响应。我有以 id 作为参数名称的 HTML 元素。

例如，我的 JSON 响应包含一个`"costcenter":"1234"`，并且有一个`<span>`带有 id 的元素`costcenter`。

现在，我认为我可以遍历 JSON 数组并自动读取其名称，而不是为每个 id 编写语句。

这就是我得到的

```
$(".dataset").click(function() {
    changeid = this.id;

    $.ajax({
        url: "source",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: {
            id: changeid
        },
        success: function(data) {
            // How to get the name of the parameter, and then read it's value?
        }
    })
}) 
```

JSON 看起来像这样，它只是一维和 1 个结果集： `{"changeid":"1","costcenter":"478","manager":"John Smith"}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:24:30.000

如果我理解您的问题，您希望在成功功能中使用类似的东西：

```
for (var key in data) {
   $('#'+key).html(data[key]);
} 
```

# css - Bootstrap 输入的父容器的完美 100% 宽度？

> ID：11232627
> 
> 赞同：65
> 
> 时间：2012-06-27T18:22:26.173
> 
> 标签：css, twitter-bootstrap

如何使 Bootstrap 输入字段与其父项一样宽 100%？

正如 steve-obrien 在[Bootstrap 问题 #1058](https://github.com/twitter/bootstrap/issues/1058)中所写：

> 当直接应用于输入字段时，设置为 100% 不起作用，因为它没有考虑填充。所以你最终会得到 100% 的容器加上输入框上的填充，所以输入框通常会在其容器之外中断。

那张票提供了各种解决方案，但我正在寻找最好的方法——最好是 Bootstrap 已经提供的 CSS 类。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-27T18:22:26.610

`input-block-level`在各种屏幕宽度上应用该课程对我来说非常有用。它由[Bootstrap`mixins.less`](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L154)定义如下：

```
// Block level inputs
.input-block-level {
  display: block;
  width: 100%;
  min-height: 28px;        // Make inputs at least the height of their button counterpart
  .box-sizing(border-box); // Makes inputs behave like true block-level elements
} 
```

[这与 'assembler' 在他对问题 #1058 的评论](https://github.com/twitter/bootstrap/issues/1058#issuecomment-5110547)中建议的风格非常相似。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-03T01:37:12.697

Just add box-sizing:

```
input[type="text"] {
    box-sizing: border-box;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-02-28T08:50:50.147

如果您使用 C# ASP.NET MVC 的默认模板，您可能会发现**site.css**覆盖了一些 Bootstraps 样式。如果你想像我一样使用 Bootstrap，让 M$ 覆盖它（在你不知情的情况下）可能会让人非常沮丧！随意删除任何不需要的样式...

```
/* Set width on the form input elements since they're 100% wide by default */
input,
select,
textarea {
    max-width: 280px;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-10-15T07:28:12.527

对于任何在谷歌上搜索的人，一个建议是删除所有`input-group`类实例。在类似的情况下为我工作。原始代码：

```
<form>
  <div class="bs-callout">
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <div class="input-group">
            <input type="text" class="form-control" name="time" placeholder="Time">
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="form-group">
          <div class="input-group">
            <select name="dtarea" class="form-control">
              <option value="1">Option value 1</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="input-group">
        <input type="text" name="reason" class="form-control" placeholder="Reason">
      </div>
    </div>
  </div>
</form>
```

[![带输入组](../Images/f8a182c80e036134f874619ce6df2cdb.png)](https://i.stack.imgur.com/ArDao.png)

新代码：

```
<form>
  <div class="bs-callout">
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <input type="text" class="form-control" name="time" placeholder="Time">
        </div>
      </div>
      <div class="col-md-8">
        <div class="form-group">
          <select name="dtarea" class="form-control">
            <option value="1">Option value 1</option>
          </select>
        </div>
      </div>
    </div>
    <div class="row">
      <input type="text" name="reason" class="form-control" placeholder="Reason">
    </div>
  </div>
</form>
```

[![没有输入组](../Images/b2ebb55f7e5a499b3e8af759f0a07b0c.png)](https://i.stack.imgur.com/fIWXQ.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-29T08:10:39.620

我找到了一个适用于我的解决方案：

```
<input class="form-control" style="min-width: 100%!important;" type="text" /> 
```

您只需要覆盖**最小宽度**集**100%**和**重要**的，结果就是这个：

[![在此处输入图像描述](../Images/b4422c3a43f0c785e9ea7eefef9b8e89.png)](https://i.stack.imgur.com/xyoqS.png)

如果你不应用它，你总是会得到这个：

[![在此处输入图像描述](../Images/25a7c0a10628b11f6463466dd87943d1.png)](https://i.stack.imgur.com/EgYaA.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-17T00:12:29.897

为了得到想要的结果，你必须设置“box-sizing:border-box”而不是默认的“box-sizing:content-box”。这正是您所指的问题（来自 MDN）：

## 内容框

这是 CSS 标准指定的初始值和默认值。测量宽度和高度属性仅包括内容，但不包括填充、边框或边距。

## 边框

宽度和高度属性包括内容、内边距和边框，但不包括边距。”

* * *

参考：[https ://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)

这个 CSS 的兼容性很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-11T17:51:16.613

使用`.container-fluid`，如果你想全宽作为父级，跨越你的视口的整个宽度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-20T22:11:50.830

关于什么？

```
 input[type="text"] {
          max-width:none;
   } 
```

检查某些 css 文件是否导致问题。默认情况下，引导程序显示在整个宽度上。例如，在 MVC 目录中，内容是 site.css，并且有一个定义限制宽度。

```
input,select,textarea {
max-width: 280px;} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-10-10T03:46:29.890

只需添加：

```
width: 100% !important; 
```

# mongodb - Mongodb计数与findone

> ID：11232630
> 
> 赞同：5
> 
> 时间：2012-06-27T18:22:38.080
> 
> 标签：mongodb

我的问题是：有一组用户。我试图找到，用户`_id=xxx`是否有`somevalue > 5`。

我想知道，使用`find(...).count() > 0`or什么会更快`findOne(...) != null`？或者也许还有其他更快/更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:32:19.547

查询时间之间的差异应该几乎可以忽略不计，因为它们都限制了唯一_id的范围，因此会立即找到它们。这里唯一的轻微优势`count`在于 db 将返回一个 int 而不是整个文档。因此，您节省的时间纯粹是因为数据从数据库传输到客户端。

话虽如此，如果您的目标是执行*存在*查询并且您不关心数据，请使用`count`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:11:14.093

与 find() 不同，使用 count() 不会将文档固定到缓存中，这样可以节省内存。当使用 mongodb 或任何其他数据库时，内存是您最宝贵的资源……除了快速磁盘。

# silverlight - 当我更改项目时，为什么我的列表没有在我的列表框中刷新？

> ID：11232634
> 
> 赞同：0
> 
> 时间：2012-06-27T18:22:53.030
> 
> 标签：silverlight, windows-phone-7

我对列表和列表视图有疑问。

我开始了一个项目并添加了一个列表视图。在此之后，我创建了一个具有两个元素的类，例如 key1 和 key2 都是字符串。

我将列表框的 itemTemplate 的文本绑定到这个键，一切都很好。然后我设置`listbox1.ItemsSource = data;` 和数据是：`List<OwnListData> data = new List<OwnListData>();` 一切都显示出来了。

但问题是，当我更改一项数据时，列表现在确实显示了任何更改。如何让列表视图刷新`？

编辑：一个快速而肮脏的解决方案是

```
listbox1.ItemsSource = null;
listbox1.ItemsSource = data; 
```

每次更改后，但这不是好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:52:37.047

使用`ObservableCollection<OwnListData>`而不是`List<OwnListData>`. 我也遇到过这个问题。似乎 Lists 和 Enumerables 不能与 ListBox 一起使用，因为它们不会更新 UI。

希望能帮助到你

# ubuntu - gpg：“tag:launchpad.net:2008:redacted”不是密钥 ID：使用 apt-get 安装新软件包时出现跳过错误

> ID：11232635
> 
> 赞同：2
> 
> 时间：2012-06-27T18:22:57.747
> 
> 标签：ubuntu, debian, gnupg, apt, debian-based

无法在 Ubuntu 12.04 上安装新软件包，出现与“gpg”相关的错误。执行“更新管理器”（安装了所有更新）但问题仍然存在，以下是我尝试安装 Oracl JDK 7 时的错误

```
coder@ubuntu:~$ sudo add-apt-repository ppa:flexiondotorg/java
[sudo] password for vikram: 
You are about to add the following PPA to your system:
 tag:launchpad.net:2008:redacted
 More info: https://launchpad.net/~flexiondotorg/+archive/java
Press [ENTER] to continue or ctrl-c to cancel adding it

Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /tmp/tmp.jE42eWWvmU --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver hkp://keyserver.ubuntu.com:80/ --recv tag:launchpad.net:2008:redacted
gpg: "tag:launchpad.net:2008:redacted" not a key ID: skipping 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:26:07.623

我认为你想安装 Oracles Java - 我认为你做的最简单的事情就是直接从他们提供的二进制文件中进行：http: [//codingforme.wordpress.com/2012/05/14/installing- oracle-java-jdk-6-or-7-on-ubuntu-12-04/](http://codingforme.wordpress.com/2012/05/14/installing-oracle-java-jdk-6-or-7-on-ubuntu-12-04/)

# php - 从数据库中提取数据时，PHP 将任何具有非英语字符的内容替换为 null

> ID：11232636
> 
> 赞同：0
> 
> 时间：2012-06-27T18:22:59.483
> 
> 标签：php, mysql, sql, json

*我使用SQL从**MYSQL*数据库中提取标记的数据并建立标记数组（具有属性**location**、**name**、**address**、**phone_number**）。

 *******在脚本的结尾我`echo json_encode($myarray)`.

出于某种原因，如果某个特定标记的**名称**或**地址**最终带有任何法语符号（例如 é） - PHP 只是将整个名称或地址替换为`null`. 同时，我的数据库表可以很好地处理法语符号。

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:29:46.637

我对印地语内容也有类似的问题。对我来说，解决它的方法是在数据提取之前将字符集设置为 UTF-8。我向您推荐此页面以了解如何执行此操作。

[http://www.php.net/manual/en/mysqli.set-charset.php](http://www.php.net/manual/en/mysqli.set-charset.php)*******

# php - 在 Joomla 中放置自定义函数的位置

> ID：11232637
> 
> 赞同：0
> 
> 时间：2012-06-27T18:23:01.650
> 
> 标签：php, function, joomla, joomla1.5

我想创建一些函数来从 Joomla v1.5.23 中渲染图像。该功能应该通过所有 joomla 应用程序可见。

我必须把那个功能放在哪里？我应该创建插件、模块还是其他东西？

此致

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:30:45.357

版本信息会有所帮助，但我相信您的答案是创建一个插件。组件是在 Joomla 中安装和执行的非常广泛的“迷你应用程序”。模块通常是显示来自组件或外部源的信息的代码片段。插件在 Joomla 中有不同的位置，具体取决于它们所做的事情 - 例如身份验证或管理员等。您必须定义插件将扮演的角色以确定它适合该层次结构的位置。完成后，插件将被加载，您将能够从 Joomla 中访问它的功能。

此链接将向您展示如何从[编写内容插件](http://docs.joomla.org/Creating_a_content_plugin)开始。请注意可用的事件。这并不太难，所以不要过于复杂，你应该没问题。可以在[http://docs.joomla.org/Plugin/Events/System](http://docs.joomla.org/Plugin/Events/System)看到系统插件的示例（听起来像您正在寻找的东西） 。

# date - 使用 Selenium IDE 以 mmm 格式获取当前月份

> ID：11232639
> 
> 赞同：1
> 
> 时间：2012-06-27T18:23:23.467
> 
> 标签：date, selenium, selenium-ide

我一直在使用以下代码以格式获取**当前日期**，`"mm dd, yyyy"`但网页已更改，现在我需要获取信息`"mmm dd, yyyy"`（如“2012 年 6 月 27 日”）。有没有办法在下面的命令中重新格式化月份，还​​是我需要另一段代码来重新格式化它？

```
<tr>
<td>storeEval </td>
<td>var d=new Date(); ((d.getMonth())) + ' ' + d.getDate() +', '+d.getFullYear();</td>
<td>todayDate</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:19:31.960

这是我得到的最简单的方法：

```
var d = new Date().toDateString().split(' '); d[1] + ' ' + d[2] + ', ' +d[3]; 
```

[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)和的文档[`toDateString()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toDateString)。

# facebook - 如何使用 fql 查询查找 Youtube 分享

> ID：11232651
> 
> 赞同：1
> 
> 时间：2012-06-27T18:23:56.513
> 
> 标签：facebook, facebook-fql

我记得几个月前我在我的 Facebook 页面上分享了一个 youtube 视频。

我想找到那个 youtube 视频。

可以帮助我找到它的 fql 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:31:53.453

这很容易 ！

```
https://graph.facebook.com/fql?q=SELECT%20url,%20share_count,like_count,comment_count%20FROM%20link_stat%20WHERE%20url=%27http://www.youtube.com/watch?v=`<your-video-id>` 
```

# jquery - 下拉菜单动画仅适用于第二次悬停？

> ID：11232656
> 
> 赞同：0
> 
> 时间：2012-06-27T18:24:23.983
> 
> 标签：jquery, html, menu, jquery-hover

目前有一个在悬停时激活的下拉菜单（在 CSS 中从 display:none 到 display:block）。似乎 CSS 在 Jquery 之前执行，但是，因为在第一次悬停时，下拉菜单没有动画（即它立即出现），但在第二次悬停时，Jquery 的向下滑动和向上滑动正确执行。为什么 Jquery 没有在第一次悬停时应用？我找到了一个解决方案，指出添加此行 |$('.nav ul li ul').css('display','block').slideUp(0);| 到 Jquery 解决了这个问题，但它不适合我......忍受我的冗余我正在学习这个。

这是菜单的 HTML：

```
<ul class="nav">
    <li><a href="#">...</a></li>
    <li><a href="#">Dropdown1</a>
        <ul>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
        </ul>
    </li>
    <li><a href="#">Dropdown2</a>
        <ul>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
            <li><a href="#">...</a></li>
        </ul>
    </li>
    <li><a href="#">...</a></li>
    <li><a href="#">...</a></li>
</ul> 
```

我的 CSS：

```
.nav {
font-family: FrutigerLTStd-Roman, Trebuchet MS, Helvetica, Arial, sans-serif; 
font-size:16px; 
font-style: none; 
font-weight: normal; 
margin:0; 
list-style:none;
padding:0px 0px 0px 0px; 
z-index:600; 
text-align:center;
clear: both;
box-shadow: 0px 3px 3px 0px #888
background-clip: padding;
}
.nav a{
color:#FFF
background:#629ec4; 
display: block; 
font-weight: bold;
margin:0 0 0 0;
target-new:tab;
}
.nav li{ 
background:#629ec4;
margin:1px 0 1px 0;
border-top:0px solid;
border-right:0px solid;
border-bottom:0px solid;
z-index: 600;
float:left;
}
.nav li a:hover{
color:#0072bb;
}

.nav li ul{
list-style:none;
display:none;
position:relative;
z-index: 700;
background-color:#629ec4
}

.nav li:hover ul{
display:block;
border-top:2px solid;
}

.nav li:hover ul li {
clear:left;
}

.nav ul li:hover a{
color:#0072bb;
opacity: 1;
} 
```

我的jQuery：

```
$(document).ready(function () {  
    $('.nav ul li ul').css('display','block').slideUp(0);
    $('.nav li').hover(
    function () {
        //show its submenu
        $('ul', this).slideDown(300);
    },
    function () {
        //hide its submenu
        $('ul', this).slideUp(300);        
    }
);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:13:44.027

我无法复制您描述的问题，但是，我进行了一些修改以尝试清除您描述的问题。

将类添加到下拉列表`ul`：

```
 <li><a href="#">Dropdown1</a>
     <ul class="dropdown">
    ... 
```

更新的 CSS：

```
.nav { 
    font-family: FrutigerLTStd-Roman, Trebuchet MS, Helvetica, Arial, sans-serif;
    font-size:16px;
    font-style: none;
    font-weight: normal;
    margin:0;
    list-style:none; 
    padding:0px 0px 0px 0px;
    z-index:600;
    text-align:center; 
    clear: both; 
    box-shadow: 0px 3px 3px 0px #888;
    background-clip: padding; 
}
.nav a{ 
    color:#FFF; 
    background:#629ec4;
    display: block;
    font-weight: bold; 
    margin:0 0 0 0; 
    target-new:tab; 
}
.nav li{
    background:#629ec4; 
    margin:1px 0 1px 0; 
    border-top:0px solid; 
    border-right:0px solid; 
    border-bottom:0px solid; 
    z-index: 600; 
    float:left; 
}

.nav li a {
    padding: 0 15px 0 15px;   
}

.nav li a:hover{ 
    background:#0072bb; 
    color: #fff;    
}
.nav li:hover .dropdown { 
    display:block; 
    border-top:1px solid; 
}
.dropdown { 
    list-style:none; 
    display:none; 
    position:relative; 
    z-index: 700; 
    background-color:#629ec4;  
}
.dropdown li {
    clear: both; 
    display: block;
    width: 100%;
}
.dropdown li:hover a{ 
    background:#0072bb; 
    color: #fff;
    opacity: 1; 
} 
```

工作解决方案（出于说明目的稍作修改）：[JSFIDDLE](http://jsfiddle.net/GjjYW/)

# c++ - Mongoose 服务器回调循环

> ID：11232661
> 
> 赞同：0
> 
> 时间：2012-06-27T18:24:32.180
> 
> 标签：c++, http, https, mongoose-web-server

在寻找一个实现 Web 服务器的 C 库后，我学习了 Mongoose。实际上，我已经通过几个示例使其工作，这些示例调用了实际处理传入和传出数据的回调函数。我在 Windows 上使用，使用 Visual Studio 2008 进行编译和调试。

我称它为会话，它如下：

```
int CHttpsCom::Session( void )
{

  struct mg_context *ctx;

  const char *options[] = {
    "listening_ports", "443s",
#ifdef _DEBUG
    "ssl_certificate", "c:\\temp\\cert.pem",
#else
    "ssl_certificate", "cert.pem",
#endif
    NULL
  };

  ctx = mg_start( &callback, NULL, options );

  if( !ctx )
    return 1;

  //getchar();  // Wait until user hits "enter"
  while ( LeaveIt == false );

  Sleep(3500);// without this it won't work

  mg_stop( ctx ); 

  return 0;

} 
```

100% 的示例我注意到大多数示例使用 getchar 将会话结束与回调执行结束同步。我在收到一条消息后设置了这个 LeaveIt 标志。如果我不使用上面的 Sleep，我会在库内部出现死锁。有没有更好的方法来处理这个等待回调结束？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:54:15.517

代替

```
while ( LeaveIt == false );

Sleep(3500);// without this it won't work 
```

这样（在最坏的情况下，您将节省 CPU 消耗）：

```
while (!LeaveIt)
{
    Sleep(500);
} 
```

# wordpress - 如何为自定义帖子类型存档页面创建导航

> ID：11232663
> 
> 赞同：2
> 
> 时间：2012-06-27T18:24:37.923
> 
> 标签：wordpress, navigation, custom-post-type

我有一个显示自定义帖子类型标题的模板。我在小组中有大约 60 个帖子。页面设置为每页显示 10 个帖子。这会产生六个页面来显示所有标题，但我无法让导航（页面到页面）正常工作。

在下面的代码中，我得到了返回的第一组标题，但单击“上一个”“下一个”链接仅显示同一组标题。环顾四周，我找不到任何关于如何格式化模板以在自定义帖子类型的标题组之间导航的明确解决方案。我确实发现 CPT 需要定义 max_num_pages。因此，如果我插入一个值来代替 $max_num_pages 我确实会得到一个结果，您可以从一个页面单击另一个页面，但是一旦到达列表的末尾，您就会单击一个空白页面。

```
 <h2>Glossary</h2>
     <?php $loop = new WP_Query( array( 'post_type' => 'glossary', 'posts_per_page' => 10, 'paged='.$paged, 'orderby' => 'title', 'order' => 'ASC' ) ); ?>
     <?php $max_num_pages=$loop->max_num_pages ?>
     <p>Maximum Number of Pages Value: <?php echo $max_num_pages;// This line for debug purposes only?></p>
                <?php if ( have_posts() ) : ?>
                <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
                <div> 
        <h2><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
        </div>
                <?php endwhile; ?>
                    <div class="navigation">

<div class="alignleft"><?php next_posts_link('Previous entries',$max_num_pages) ?></div>
<div class="alignright"><?php previous_posts_link('Next entries',$max_num_pages) ?></div> 
```

ETC..

您使用什么代码允许用户从一组标题点击到另一组？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:57:41.923

尝试在您的 WP_Query 之前添加以下内容：

```
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; ?> 
```

# javascript - 带有 designMode 的文本编辑器。如何强制 designMode 使用 HTML 标签而不是 span

> ID：11232664
> 
> 赞同：1
> 
> 时间：2012-06-27T18:24:46.650
> 
> 标签：javascript, iframe, editor, designmode

我用 iframe 和 designMode 构建了一个小型文本编辑器。（这是一个不是我编码的示例[http://jsfiddle.net/Kxmaf/6/](http://jsfiddle.net/Kxmaf/6/)。我在 Stackoverflow 上找到了它）。

如果我检索 iframe ( `document.body.innerHTML`) 的内容，结果是这样的：`<span style="font-weight: bold;">Test</span> Text <span style="font-style: italic;">Text</span> <span style="text-decoration: underline;">TT</span>`

是否可以将 designMode 设置为使用标签而不是具有样式属性的跨度？

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:31:58.197

在大多数浏览器（但不是 IE）中，您可以使用“StyleWithCSS”命令在样式模式之间切换，允许您在使用元素的样式之间进行选择，例如`<b>`和`<i>`或使用`<span>`具有样式属性的元素进行样式设置。您可以使用“StyleWithCSS”命令执行此操作，在旧浏览器中回退到“UseCSS”。以下切换命令以使用非 CSS 版本：

```
try {
    if (!document.execCommand("StyleWithCSS", false, useCss)) {
        // The value required by UseCSS is the inverse of what you'd expect
        document.execCommand("UseCSS", false, !useCss);
    }
} catch (ex) {
    // IE doesn't recognise these commands and throws.
} 
```

# objective-c - 在执行大量需要在主线程上执行的操作时避免阻塞 UI

> ID：11232665
> 
> 赞同：3
> 
> 时间：2012-06-27T18:24:47.393
> 
> 标签：objective-c, ios, multithreading, uikit, uitextview

我需要在主线程上执行一系列可能很长的调用（因为否则 UIKit 会退缩）。“长”是指在 iPad 3 上进行 10,000 次操作，每次操作持续 0.1 秒。

显然，一次遍历所有这些可能不是最好的主意。

我不知道如何*在主线程上*执行所有这些，同时留出足够的喘息空间来保持 UIKit 响应和看门狗睡着（即不会因为占用运行循环而终止）。

有人有想法吗？我将瞄准iOS 5。

具体来说，我正在尝试做的是缓存`UITextPosition`s，因为 a`UITextView`显然在获取 s 时采用了非缓存的迭代方法`UITextPosition`，这意味着它在执行时非常非常慢`positionFromPosition:textview.beginningOfDocument offset:600011`，但在获取时要快得多`positionFromPosition:aPositionAt600000 offset:11`。事实上，在我的测试用例中，前者需要 100 多秒*（在主线程上！）*，而后者几乎是瞬时的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:45:52.053

为什么要在主线程上做呢？典型的答案是在后台线程上执行这些操作，并将 UI 更新发送回主线程。例如，您可以使用[Grand Central Dispatch](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // do my time consuming task and everytime it wants to update the UI, 
    // it should dispatch that back to the main queue, e.g.

    for (NSInteger i = 0; i < 10000; i++)
    {
        // do my background work

        // now update the UI
        dispatch_async(dispatch_get_main_queue(), ^{
            // update the UI accordingly
        });
    }
}); 
```

**更新：**

听起来您必须在前台执行此操作，因此使用 a`NSTimer`可能会更好。我不是一个大个子`NSTimer`，但它可能看起来像下面这样。

首先，确保你有一个类实例变量：

```
NSTimer *_timer; 
```

接下来，您可以使用以下命令对其进行初始化：

```
- (void)startTimer
{
    _timer = [NSTimer timerWithTimeInterval:0.0 target:self selector:@selector(timerCallback:) userInfo:nil repeats:YES];
    NSRunLoop *runloop = [NSRunLoop currentRunLoop];
    [runloop addTimer:_timer forMode:NSDefaultRunLoopMode];
} 
```

然后这将调用 timerCallback，可能在每次调用时处理一个 UITextPosition：

```
- (void)timerCallback:(NSTimer*)theTimer
{
    BOOL moreTextPositionsToCalculate = ...;

    if (moreTextPositionsToCalculate)
    {
         // calculate the next UITextPosition
    }
    else
    {
         [self stopTimer];
    }
} 
```

完成后，您可以像这样停止计时器：

```
- (void)stopTimer
{
    [_timer invalidate];    
    _timer = nil;
} 
```

# c# - C# 证书生成框架

> ID：11232669
> 
> 赞同：4
> 
> 时间：2012-06-27T18:25:11.273
> 
> 标签：c#, .net, certificate, x509

有谁知道可以生成公钥/私钥、X.509 证书并签署这些证书的 C# 框架？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T18:30:39.010

BouncyCastleCrypto，就像一个疯狂的名字一样，我很确定它拥有所有这些功能。几乎所有的 RFC 标准都已实施。几年前我使用它时，它的文档记录很差，但是单元测试非常彻底，以至于您可以搜索某些关键字，例如“509”，并找到正在执行框架部分的单元测试你需要。

我真的发现我必须详细阅读一些 RFC 标准才能了解如何使用该框架。他们真的没有付出任何努力来使事情变得像“cert.Sign（key）”这样简单。相反，它非常细化，您必须创建六个对象并确切地知道如何将它们组合在一起才能完成任务。但是，如果您知道如何运用这种力量，这将为您提供完全的灵活性和力量。

我个人用它来加载 X.509 证书，执行各种密钥生成任务，数字签名/验证，自签名等，但我早就忘记了所有这些，所以除了自信之外没有太多帮助，它可以完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:53:33.413

我还建议将 Bouncy Castle 库用于生产目的。但是，如果您想要一些不太全面且学习曲线更温和的东西，您可以使用 Windows 自己的证书创建工具[makecert.exe](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.100%29.aspx)。`Process.Start`您可以使用提供正确的命令行参数从 C# 运行它。

# c# - 数据模板仅在 ItemsControl 控件中是必需的？

> ID：11232674
> 
> 赞同：1
> 
> 时间：2012-06-27T18:25:24.700
> 
> 标签：c#, wpf, silverlight, xaml, datatemplate

让我解释一下我的情况。

我有一个名为 Shape 的基类，以及几个具体的类，如 Triangle、Square 等。

我有几个数据模板。

我只构建一个对象。所以我不会使用 ItemControl 控件，我想使用像网格这样的普通面板，并显示相应的数据模板（在 DataContext 中有具体项目）..

做到这一点的唯一方法是使用 ItemsControl？或者还有另一种方法..因为我只使用一个项目而不是一个集合并显示正确的模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:37:28.683

`DataTemplates`不仅仅用于`ItemsControls`

它们用于告诉 WPF 如何在可视树中绘制任何对象。例如，如果您在 中粘贴一个`User`类对象`VisualTree`，a`DataTemplate`可用于告诉 WPF 如何绘制该`User`对象

它们最常用于具有`ItemsSource`或`Content`属性的控件中，因为这些是将数据对象插入到`VisualTree`.

在您只想将一个数据项插入 VisualTree 的特定情况下，我建议您使用`ContentControl`

```
<ContentControl Content="{Binding MyDataObject}" /> 
```

要告诉 WPF 如何绘制`MyDataObject`，您可以使用该`ContentTemplate`属性并将其设置为`DataTemplate`

```
<ContentControl Content="{Binding MyDataObject}" 
                ContentTemplate="{StaticResource MyDataTemplate}" /> 
```

或定义一个隐式`DataTemplate`告诉 WPF 使用特定模板绘制特定类型的任何对象。

```
<DataTemplate DataType="{x:Type local:MyDataObject}">
    <!-- Tell WPF how to draw MyDataObject here -->
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:37:02.607

如果要显示具有基于项目类型选择的数据模板的单个项目，则应使用`ContentControl`或其任何派生类。

# asp.net - 应用程序对父站点文件夹结构的 AppPool 权限

> ID：11232675
> 
> 赞同：2
> 
> 时间：2012-06-27T18:25:26.887
> 
> 标签：asp.net, permissions, windows-server-2008, iis-7.5, application-pool

### ApplicationHost.config 上下文

```
<!-- App Pool -->
<add name="Site - Intranet" autoStart="true" managedRuntimeVersion="v4.0" />
<add name="App - App1" autoStart="true" managedRuntimeVersion="v4.0" />
<add name="App - App2" autoStart="true" managedRuntimeVersion="v2.0" />

<!-- Site -->
<site name="Intranet" id="1" serverAutoStart="true">
    <application path="/" applicationPool="Site - Intranet">
        <virtualDirectory path="/" physicalPath="D:\Web\Sites\Intranet" />
    </application>
    <application path="/Apps/App1" applicationPool="Application - App1">
        <virtualDirectory path="/" physicalPath="D:\Web\Apps\App1" />
    </application>
    <application path="/Apps/App2" applicationPool="Application - App2">
        <virtualDirectory path="/" physicalPath="D:\Web\Apps\App2" />
    </application>
</site> 
```

如您所见，我有一个拥有自己的 4.0 CLR 应用程序池和身份的站点，它托管两个独立的应用程序，每个应用程序都有自己的应用程序池和身份。这三个都被沙箱化到单独的文件系统位置。

### AppPoolIdentity 帐户的 NTFS 权限

必须授予每个 AppPoolIdentity 对其各自文件夹的权限（例如，`IIS AppPool\Site - Intranet`需要对 的读取/执行权限`D:\Web\Sites\Intranet`）。

此时，应用程序 App1 应该无法读取/执行其父站点的物理文件夹结构中的文件。反之亦然，托管站点 Intranet 不应该能够读取/执行 App1 的物理文件夹结构中的文件。***我理解对了吗？***

当我访问子应用程序（例如）时，我收到一个服务器错误，指出由于权限不足`http://intranet/apps/app1`，它无法读取父站点的文件。`web.config`

如果我授予应用程序的身份帐户对父站点的物理文件夹结构的读取/执行权限（例如`IIS AppPool\App - App1`访问`D:\Web\Sites\Intranet`），问题就解决了。

### 问题）

1.  为什么子应用程序需要`web.config`从父站点读取或任何其他文件？

    **注意：**我的父站点的 web.config 已经使用该`<location path="." inheritInChildApplications="false">`技术破坏了子 app/vdir 继承。

2.  鉴于此身份帐户本质上对许多文件夹具有写入权限 - [IIS AppPoolIdentity 和文件系统写入访问权限](https://stackoverflow.com/questions/5437723/iis-apppoolidentity-and-file-system-write-access-permissions)- 这不会带来安全风险吗？例如，现在不能有任何子应用程序写入父站点的 App_Data 文件夹或其他地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:51:31.757

对于 #1，子文件夹/应用程序默认继承其父文件夹的 web.config 设置。我假设 ASP.NET 在尝试访问那些父 web.config 文件之前不会检查您的元素。对我来说很有意义，尽管这不是您想要的。

对于＃2，不太确定。如果您的应用程序池身份是用户的成员（正如您的参考答案所述），那么它确实具有对很多地方的读取权限，但不能写入太多地方。我不会按照提问者那里所说的去做。不确定孩子是否会写入父文件夹。您应该能够使用适当的文件系统权限来阻止它（记住您的应用程序池身份所属的任何组）。我从来没有这个配置，所以我不确定。

# php - 试图将 the_slug 添加到我的身体课程中，但在 wordpress 中没有成功，有人可以建议吗？

> ID：11232676
> 
> 赞同：2
> 
> 时间：2012-06-27T18:25:27.063
> 
> 标签：php, wordpress

使用以下代码尝试将页面 slug 作为一个类添加到我的 body 标记中，但尚未成功，谁能告诉我如何实现这一目标？

在functions.php中添加PHP

```
function add_body_class( $classes )
{
    global $post;
    if ( isset( $post ) ) {
        $classes[] = $post->post_type . '-' . $post->post_name;
    }
    return $classes;
}
add_filter( 'body_class', 'add_body_class' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:43:14.253

您可以尝试将以下内容添加到您的`functions.php`：

```
function page_bodyclass() {  // add class to <body> tag
    global $wp_query;
    $page = '';
    if (is_front_page() ) {
           $page = 'home'; // If it's your Front page, apply 'home' as classs
    } elseif (is_page()) {
       $page = $wp_query->query_vars["pagename"]; // Otherwise use pagename
    }
    if ($page)
        echo 'class= "'. $page. '"';
} 
```

然后将您的`<body>`标签更改为`<body <?php page_bodyclass(); ?>>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:22:25.303

作为已接受答案的替代方法，请在标题（通常`header.php`）中找到具有以下内容的行：

```
<body <?php body_class(); ?>> 
```

并将其更改为：

```
<body <?php body_class($post->post_type . '-' . $post->post_name); ?>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T15:38:15.433

我正在使用这个

```
<?php body_class(strtolower(get_the_title())); ?> 
```

# javascript - 这段 javascript 代码有什么问题？

> ID：11232679
> 
> 赞同：0
> 
> 时间：2012-06-27T18:25:34.737
> 
> 标签：javascript

```
window.addEventListener("load", run, false);

function run() {
    var links = content.document.getElementsByTagName("a");
    var x = "";
    for (var i = 0; i < links.length; i++) {
        x = x + "<p>" + links[i] + "</p>";
    }
    document.write(x);
} 
```

我是 JavaScript 新手，我一辈子都搞不清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:26:58.950

删除`contents`，因为它不是文档之类的父级，`window`并且我怀疑没有`content`内置对象 JavaScript（尽管`contents()`jQuery 中有函数）：

```
var links = content.document.getElementsByTagName("a");
          ------^ 
```

或者您也可以获取所有链接，`document.links`例如：

```
var links = document.links; 
```

# oop - Lua 元表和元方法 - 如何调用不同的成员函数

> ID：11232680
> 
> 赞同：2
> 
> 时间：2012-06-27T18:25:35.350
> 
> 标签：oop, class, object, lua, metatable

我有以下课程

```
local PROGRESS = {}

PROGRESS.__index = function(self,key)

    if key~="__group" and self.__group[key] then 
        return  self.__group[key]           
    else 
        return rawget(self,key)
    end 
end 
```

这样做是当您访问`table[key]`它时执行查找`table.__group`（这是另一个类的对象）并返回`table.__group[key]`，如果它不是零。

现在我正在尝试对成员函数做同样的事情。即如果我调用`table:key()` 必须执行查找`table.__group`并且如果该函数存在，则`table.__group:key()`应该调用。

我该如何做到这一点？

我试图做到这一点。

```
local PROGRESS = {}

    PROGRESS.__index = function(self,key)

       if key~="__group" and self.__group[key] then 

         local val = self.__group[key]
         if type(val) == "function" then 
             self.__group:val()
             return function() end 
         end

         return  self.__group[key]          
       else 
         return rawget(self,key)
       end 
    end 
```

但是这里有两件事不对。

1.  我无法检索原始函数的参数
2.  事件如果我只是访问`table[key].function`而不调用它，该函数将被调用

而且我有一种感觉，我试图使事情复杂化，而解决方案则简单得多。

任何帮助表示赞赏。

**更新**

@Mud原始代码的问题是作为“自我”传递给成员函数的对象是新类的对象。不属于旧班。

考虑这段代码

```
GROUP_CLASS = {}
GROUP_CLASS.__index = GROUP_CLASS
function GROUP_CLASS:showSum    (a,b) print(self);print(a + b) end

group_object = setmetatable({},GROUP_CLASS)
group_object:showSum(1,2)

local PROGRESS_CLASS = {}
PROGRESS_CLASS.__index = function(self,key,value)
    if key~="__group" and self.__group[key] then 
        return self.__group[key]
    else 
        return rawget(self,key)
    end 
end 

progress_object = setmetatable( {__group = group_object} , PROGRESS_CLASS)
progress_object:showSum(3,3) 
--progress_object is passed as first argument to showSum.  But i need group_object to be passed 
```

在上面的代码中，当 `progress_object:showSum(3,3)`被调用时，是否可以将 group_object（或换句话说 progress_object.__group）作为 self 而不是 progress_object 传递。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T22:53:49.493

**对更新帖子的回应：**

> progress_object 作为第一个参数传递给 showSum。但我需要通过 group_object

如果您要忽略调用方法的对象的状态，并替换其他对象的状态，为什么它甚至是该对象上的方法？这就像重写加法运算符来进行乘法一样，这是一种混淆的方法。

换句话说，你想要这个：

```
progress_object:method("foo") 
```

通过奇怪的内部机制解决这个问题：

```
group_object:method("foo") 
```

为什么不跳过一个步骤，只打后一个电话呢？

如果*必须*，您可以通过返回替换为的方法的代理来实现此`self`目的`__group`

```
local PROGRESS_CLASS = {}
PROGRESS_CLASS.__index = function(self,key)
  local groupval = self.__group[key]
  if key == '__group' or not groupval then
    return rawget(self,key)
  elseif type(groupval) ~= 'function' then
    return groupval
  else
      return function(...)
        if self == ... then -- method call
          -- replace self argument with __group
          return groupval(self.__group,select(2,...))
        else
          return groupval(...)
        end
      end
  end
end 
```

* * *

**回复原帖：**

> 我如何尝试对成员函数做同样的事情。即如果我调用 `table:key()`必须执行查找`table.__group`并且如果该函数存在，则`table.__group:key()`应该调用。
> 
> **我该如何做到这一点？**

没做什么。您的原始代码处理此问题。

Lua 不知道什么是“成员函数”。成员是成员（即表中的元素），与该成员的*值*是否为函数无关。

记住：

1.  `obj:method(a,b,c)`完全等同于`obj.method(obj,a,b,c)`
2.  `obj.method`完全等价于`obj["method"]`。
3.  您的代码已经解析`obj["method"]`为`obj.__group["method"]`

所以你完成了。

例如，假设我们有：

```
group = {}
function group:showSum    (a,b) print(a + b) end
function group:showProduct(a,b) print(a * b) end 
```

使用您的第一个代码，我们可以编写：

```
foo = setmetatable({__group = group}, PROGRESS)

foo:showSum(3,3) -- 6
foo:showProduct(3,3) -- 9 
```

而已。

* * *

* * *

现在，只要我们在这里，让我们看看你的*第二个*函数在做什么：

```
 local val = self.__group[key]
     if type(val) == "function" then 
         self.__group:val()
         return function() end 
     end 
```

首先你从`__group`. 至此，您就完成了。只需返回该值，调用者就会调用该值（即`(...)`）。相反，您调用`__group["val"]`可能与`__group[key]`（除非 key=="val"）完全不同的函数，然后向调用者传递一个什么都不做的函数。

# python - django-social-auth : 连接成功，现在如何查询用户？

> ID：11232682
> 
> 赞同：6
> 
> 时间：2012-06-27T18:25:48.493
> 
> 标签：python, django, django-socialauth

我已经开始使用[https://github.com/omab/django-social-auth](https://github.com/omab/django-social-auth) 并且能够通过 twitter、google 和 facebook 成功登录。

**需要**

我需要查询登录用户才能做更多的事情，我应该使用哪个模型？

我没有看到任何例子

谢谢

**更新**

@Omab，我不明白这是如何工作的，请您帮忙。当我使用 twitter 登录时，回调转到以下代码

```
@login_required
def done(request):
    """Login complete view, displays user data"""
    ctx = {
        'version': version,
        'last_login': request.session.get('social_auth_last_login_backend')
    }
    logging.warn('context - ' + str(ctx))
    logging.warn('request - ' + str(request))
    return render_to_response('home.html', ctx, RequestContext(request)) 
```

**你能告诉我如何在这里访问用户实例吗？**

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T18:43:24.383

该应用程序使用模型存储社交帐户详细信息`UserSocialAuth`，检索任何实例只需执行以下操作：

```
user.social_auth.filter(provider="...") 
```

在哪里：

*   `user`是一个用户实例（`request.user`对于当前登录的用户）
*   `provider`是一个带有提供者名称的字符串（facebook、twitter 等）

`UserSocialAuth`实例存储了调用所需 API 所需的令牌：

```
print user_social_auth.tokens
{...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T01:24:11.660

正如 K-man 所建议的，您可以试试这个（[识别登录用户的后端提供者](https://stackoverflow.com/questions/11166240/identifying-the-backend-provider-of-a-logged-in-user)）：

```
 request.user.social_auth.values_list('provider') 
```

您可以在 values_list 中找到的其他值包括：**id**、**uid**（例如 facebook 用户 ID）、**user**、**extra_data**（包含**access_token**）

# c# - C# 动态站点地图内存泄漏

> ID：11232684
> 
> 赞同：2
> 
> 时间：2012-06-27T18:25:51.400
> 
> 标签：c#, asp.net, c#-4.0, asp.net-4.0, sitemap

我对我的站点地图有用户控制，在 ascx 中有以下内容：

```
<asp:SiteMapPath id="SiteMapPath1"runat="server" RenderCurrentNodeAsLink="true" /> 
```

在我网站的每个页面上都会调用此站点地图控件。

以及后面的用户控制代码：

```
private void Page_Load(object sender, EventArgs e)
{
    SiteMap.SiteMapResolve += new SiteMapResolveEventHandler(this.ExpandForumPaths);
}
private SiteMapNode ExpandForumPaths(Object sender, SiteMapResolveEventArgs e)
{
    SiteMapNode currentNode = SiteMap.CurrentNode.Clone(true);
    SiteMapNode tempNode = currentNode;

    if (0 != postID)
    {
        tempNode.Url = tempNode.Url + "?PostID=" + postID.ToString();
    }

    if ((null != (tempNode = tempNode.ParentNode)) &&
        (0 != forumID))
    {
        tempNode.Url = tempNode.Url + "?ForumID=" + forumID.ToString();
    }

    if ((null != (tempNode = tempNode.ParentNode)) &&
        (0 != forumGroupID))
    {
        tempNode.Url = tempNode.Url + "?ForumGroupID=" + forumGroupID.ToString();
    }

    return currentNode;
} 
```

问题是它每页加载消耗 1 - 2 mb 的内存，并且没有释放内存。例如，如果我刷新页面 2 mb 添加到 w3wp.exe，它会不断增长。

```
 SiteMap.SiteMapResolve += new SiteMapResolveEventHandler(this.ExpandForumPaths); 
```

我确实相信上面的行是通过每次使用我的用户控件时创建一个新的事件处理程序来导致问题的。

**问题**这种制作动态站点地图的方法失败了。有没有其他方法可以在不消耗内存的情况下做到这一点，或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:37:57.637

[http://netpl.blogspot.com/2008/04/sitemapresolve-and-dynamic-site-map.html](http://netpl.blogspot.com/2008/04/sitemapresolve-and-dynamic-site-map.html)

根据上面的文章，在每个 Page_Load 上都会添加一个新的 SiteMapResolveEventHandler，因为 SiteMapResolve 是静态的，这似乎是不必要的过度内存分配的一个很好的理由。文章也有一个解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:35:36.870

您可以将站点地图保存在一个静态缓存中，并且仅针对用户存储当前节点 ID。1-2mb 的 RAM 表明您正在为每个用户（更不用说每个请求）构建一个站点地图，这似乎有点矫枉过正。

就像是

```
var nodes = Session["ExpandedNodes"] as List<integer>
AddCurrentPageToExpandedNodes(nodes)
var siteMapForUser = StaticSiteMap.Apply(nodes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:27:45.667

您是否考虑过使用这行代码删除处理程序

```
SiteMap.SiteMapResolve -= this.ExpandForumPaths 
```

# c# - C# 字符串仅从位置 X 替换到 Y

> ID：11232688
> 
> 赞同：0
> 
> 时间：2012-06-27T18:25:58.543
> 
> 标签：c#, vb.net, string

> **可能重复：**
> [如何仅对字符串的一部分执行字符串替换？](https://stackoverflow.com/questions/2087175/how-do-you-perform-string-replacement-on-just-a-subsection-of-a-string)

如何仅将字符串从位置 X 替换到 Y，有字符串方法吗？

输入 = ABCDXYZABCDXYZ

字符串替换输入（开始位置 = 3，结束位置 = 9，XYZ 到 PQR）

XYZ 位置 3 到 9 应该被替换

输出 = ABCDPQRABCDXYZ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:37:24.113

这是一个扩展方法，它将创建您描述的方法：

```
public static class StringExtension
{
    public static string Replace(this string baseValue, int start, int length, string oldValue, string newValue)
    {
        return baseValue.Substring(0, start) + baseValue.Substring(start, length).Replace(oldValue, newValue) + baseValue.Substring(start + length, baseValue.Length - (start + length));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:28:34.637

尝试这个。

```
string result = str.Substring(0,3) + str.Substring(3, 6).Replace("XYZ", "PQR") + str.Substring(9); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:29:45.793

使用 Substring() 获取要替换的字符串，然后使用 Replace(

```
myString = Substring(positionOne, lenghtOfString) 
```

接着

```
finalString = Replace(myString, replacementString) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:28:34.417

String.Remove（开始，计数）

[http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx)

# c# - 自动化网站测试 - 网站在线/可用？

> ID：11232689
> 
> 赞同：1
> 
> 时间：2012-06-27T18:26:02.230
> 
> 标签：c#

我想自动测试一长串网站是否可用。我需要测试对 Intranet 中某些网站的访问。我只需要基本上创建一个 HTTPRequest 并发送 URL，然后读取 HTTPResponse（200、404、500 等）并记录结果。我已经有一些代码在执行此操作，并且得到了“OK”（200）的响应。这个对吗？还有什么我应该做的吗？

```
 try
        {
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(URL);
            webRequest.Method = "GET";
            HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();

            System.Diagnostics.Debug.WriteLine("The response code is: " + webResponse.StatusCode);
            System.Diagnostics.Debug.WriteLine("The response description is: " + webResponse.StatusDescription);
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine("Catch: " + ex.Message);
        } 
```

# heroku - Google Books API 服务器不接受来自 Heroku 服务器的调用

> ID：11232691
> 
> 赞同：4
> 
> 时间：2012-06-27T18:26:11.930
> 
> 标签：heroku, jax-rs, google-books

我正在 Heroku 服务器上使用 JAX-RS 开发应用程序，但在从服务器调用 Google Books API 时遇到问题。我一直在使用 Google 提供的 Java 库来进行这些调用，并且在某些情况下它可以工作，但在大多数情况下它会返回此错误

403 Forbidden { "code" : 403, "errors" : [ { "domain" : "global", "message" : "无法确定地理限制操作的用户位置。", "reason" : "unknownLocation" } ], " message" : "无法确定地理受限操作的用户位置。" }

我怀疑这个问题与 Heroku 用于路由的动态生成的 IP 地址系统有关，因为 Google 服务器在检测 API 调用的来源时遇到问题。我将如何解决这个问题？Heroku 有什么方法可以使用静态 IP 地址，或者我可以使用代理作为 API 的唯一访问点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T21:58:27.447

刚刚意识到这可以通过向 Google 图书查询 (&country=US) 添加国家代码或从原始 HTTP 请求添加 x-forwarded-for 标头来解决。

[http://productforums.google.com/forum/#!topic/books-api/7FQ-622q-jI](http://productforums.google.com/forum/#!topic/books-api/7FQ-622q-jI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:06:51.420

非常感谢你的问题......和答案:)

只是补充一点，Heroku 似乎有一种方法可以将静态 IP 地址与[Proximo一起使用](https://devcenter.heroku.com/articles/proximo)

# c# - 修改了应用程序退出集合；枚举操作可能无法执行

> ID：11232694
> 
> 赞同：4
> 
> 时间：2012-06-27T18:26:33.697
> 
> 标签：c#

我收到此错误集合已修改；枚举操作可能无法执行。

我有 3 个表格。这些是所有 3 的表单关闭事件我做了一些研究并了解到其中一些被修改/显示反过来导致此错误

表格1

```
private void btnExitl_Click(object sender, EventArgs e)
        {
            this.Close();   
        }

private void frmPlant_FormClosing(object sender, FormClosingEventArgs e)
    {

     if (DataDirty)
        {
            if (DialogResult.Yes == MessageBox.Show("Are you sure you want to exit", "Data Changed", MessageBoxButtons.YesNo, MessageBoxIcon.Question))

                 Application.Exit();
            else
                e.Cancel = true;
        }
        else

             Application.Exit();
    } 
```

表格2：

```
 private void btnCancel_Click(object sender, EventArgs e)
    {

        this.Close();
    }

    private void frmInputFiles_FormClosing(object sender, FormClosingEventArgs e)
    {
        int plantid = StaticClass.GlobalValue;
        //Properties.Settings.Default.PlantId = plantid;

        Program.fPlant = new frmPlant(plantid);

        Program.fPlant.Show();
        e.Cancel = false;
        //this.Hide();
    } 
```

表格3：

```
 private void btnClose_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void frmVesselData_FormClosing(object sender, FormClosingEventArgs e)
    {

        DialogResult result;
        int fileId = StaticClass.FileGlobal;
        if (DataDirty)
        {
            string messageBoxText = "You have unsaved data. Do you want to save the changes and exit the form?";
            MessageBoxButtons button = MessageBoxButtons.YesNo;
            string caption = "Data Changed";
            MessageBoxIcon icon = MessageBoxIcon.Question;
            result = MessageBox.Show(messageBoxText, caption, button, icon);
            if (result == DialogResult.No)
            {
                Program.fInputFiles = new frmInputFiles(gPlantId, gPlantName);

                    Program.fInputFiles.Show();
                   //e.Cancel=true;

            }
            if (result == DialogResult.Yes)
            {
                e.Cancel = true;
                //return;

            }
        }
        else
        {
            Program.fInputFiles = new frmInputFiles(gPlantId, gPlantName);
                Program.fInputFiles.Show();
                //e.Cancel = false;

        }      
    } 
```

只有当我查看第三种形式（Form3）时才会发生这种情况。Form1，Form2 效果很好，。但是如果我查看 form3 并尝试返回 form1 那么在 form3 的关闭事件中某处，form1

我的猜测是`btnExit_close`表单的事件`this.close()`

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-19T14:26:31.983

只需调用 Environment.Exit(0);

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T11:04:28.410

在关闭您的第一个表单时，请在 FormClosingEvent 上尝试此操作

```
 private void frmPlant_FormClosing(object sender, FormClosingEventArgs e)
    {

    if (DataDirty)
    {
        if (DialogResult.Yes == MessageBox.Show("Are you sure you want to exit", "Data Changed", MessageBoxButtons.YesNo, MessageBoxIcon.Question))
        {
             this.Close();
             Application.Exit();
        }
        else
            e.Cancel = true;
    }
    else
         Application.Exit();
    } 
```

先调用this.Close()然后再调用Application.Exit()，Application.Exit()终止所有进程，Close()关闭你的主窗体

# asp.net - 模态弹出窗口出现在 Ajax Control Toolkit 中模态背景的后面

> ID：11232695
> 
> 赞同：1
> 
> 时间：2012-06-27T18:26:40.320
> 
> 标签：asp.net, internet-explorer, ajaxcontroltoolkit, modal-dialog

![在此处输入图像描述](../Images/346d8c66fc0d4056ee2e58eb8696cf20.png)**问题：**

在 IE8 下，Ajax Control Toolkit 的弹出面板位于 modalBackground 下方（参见屏幕截图）。这只发生在 IE8 中。

**以前的尝试：**

我尝试在 css 文件中覆盖 z-index（它看起来像 z-index 问题），如下所示：

```
.modalPopup
{
    background-color: white;
    width:200px;
    height:150px;
    z-index:100000001 !important; 
} 
```

并且问题仍然存在。在 Firefox 中使用 firebug 我可以在用户单击按钮以显示模式弹出窗口时检查 z-index 的变化，并且 z-index 会正确更改。

**代码：**

```
<asp:ModalPopupExtender ID="MPsdE" runat="server" Enabled="true" DynamicServicePath=""
    OkControlID="OkButton" 
    CancelControlID="CancelButton"
    TargetControlID="MoreServers"
    PopupControlID="ModalPanel"
    BackgroundCssClass="modalBackground" >
</asp:ModalPopupExtender>

<asp:Panel ID="ModalPanel" runat="server" >
  <div class="modalPopup" >
    test <asp:Button ID="OkButton" runat="server" Text="Okay"/>
    <asp:Button ID="CancelButton" runat="server" Text="Cancel"/>
  </div>
</asp:Panel> 
```

CSS：

```
.modalBackground 
{
    position:fixed; 
    background-color:#000; 
    filter:alpha(opacity=50); 
    opacity:0.5;  
}
.modalPopup
{
    background-color: white;
    width:200px;
    height:150px;
    z-index:100000001 !important; 
} 
```

我也尝试将 modalBackground 的 z-index 设置得较低，但没有成功。

**问题：**

1.  以前有人遇到过这个问题吗？如果是这样，你能指出我正确的方向吗？
2.  如果你没有这个问题，你会看什么？我完全没有想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:30:08.470

尝试更改属性

位置：固定；定位：绝对；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:35:24.797

事实证明，这个问题不在我发布的任何内容中。问题出在我们的模板中，可能是标签未关闭。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T18:49:57.677

设置面板背景颜色（`BackColor="White"`）；它会解决你的问题。

# java - JAXB XSD 已定义类型

> ID：11232696
> 
> 赞同：3
> 
> 时间：2012-06-27T18:26:42.547
> 
> 标签：java, xsd, jaxb, xjc

我试图在我的 xsd 之后使用 xjc 生成我的类，但我陷入了这个错误：'MyType' 已经定义。

这个 MyType 是一个 complexType，我在 2 个不同的 XSD 中都有。在我在 google 上的搜索中，每个人都说要在 xjb 文件中创建一个 bindind 来纠正这个问题。我试过了，但总是失败。这是xjb：

```
 <jaxb:bindings schemaLocation="myfile.xsd" node="/xs:schema">
    <jaxb:bindings node="//xs:complexType[@name='MyType']">
      <jaxb:class name="MyType2" />
    </jaxb:bindings>
   </jaxb:bindings> 
```

我已经尝试将它用于两种 xsd 中的两种类型，但仍然无法正常工作。我不知道我能做些什么来解决这个问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:59:02.787

不久前我遇到了同样的问题，我能找到的唯一解决方案是[单独处理文件](https://stackoverflow.com/a/6696776/177800)或修改其中一个 .xsd 文件并将副本重命名为其他文件。

# c# - 在网络主机上存储密码或私钥的最佳方式是什么？

> ID：11232703
> 
> 赞同：8
> 
> 时间：2012-06-27T18:27:05.537
> 
> 标签：c#, asp.net, security, web-hosting

我不是指不必使用的密码（例如*我网站的**其他*用户的密码- 在这种情况下，我真的*不必*存储它们。请参阅[https://stackoverflow.com/a/ 1054069/939213](https://stackoverflow.com/a/1054069/939213) .) 所以简单地存储哈希不是一种选择。

 **我指的是存储密码到 SQL 数据库和共享服务器上的软件必须使用的私钥。

我认为没有*真正*安全的方法可以做到这一点。我只想知道*在这种情况下什么是最好的*。

我试图让他们免受黑客的攻击（在同一个网络主机上或不在同一个网络主机上）。不是来自有权查看文件的其他人。

将使用它们的是 ASP.Net 代码隐藏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:31:31.720

存储密码的最佳方法是不存储它。使用集成 (Windows) 身份验证连接到 SQL Server。这涉及以特定 (Windows) 用户身份运行 IIS 应用程序池，并[授予该用户访问权限](http://msdn.microsoft.com/en-us/library/bsz5788z.aspx)以登录数据库并运行所需的查询。

另请参阅[SQL Server 集成身份验证模式](https://stackoverflow.com/questions/5786175/sql-server-integrated-authentication-mode)

除了更安全之外，它的性能也更好。使用每用户连接字符串会破坏连接池。

编辑：

如果您绝对必须存储密码，那么在 ASP.NET 中使用[加密连接字符串是可行的方法。](http://weblogs.asp.net/owscott/archive/2005/07/29/Encrypting-the-connection-string-in-ASP.NET-V2.0.aspx)这负责使用 DPAPI 正确存储连接字符串和机器密钥，从而减少您将其搞砸并认为您在没有保护它的情况下已保护它的机会。

另外：[在 web.config 中加密连接字符串](https://stackoverflow.com/questions/1706613/encrypting-connection-string-in-web-config)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:42:54.567

Windows 专门为此目的提供数据保护 API (DPAPI)。查看[`ProtectedData`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)从 .NET 使用它的类。

DPAPI 的优势在于您的敏感数据会根据 Windows 用户的登录凭据进行加密，这意味着除非您的 Windows 帐户被盗用，否则它是安全的。**

# ruby-on-rails - 计算方法中的正则表达式匹配

> ID：11232704
> 
> 赞同：0
> 
> 时间：2012-06-27T18:27:06.070
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一些如下代码。`comment`每当在`html`. 然后，我正在做一个正则表达式匹配，我想计算解析后的评论中匹配的数量。它的打印如下

```
1
2
3
4
5 
```

我想要的只是打印`5`，因为那是匹配的总数。有人可以帮忙吗？

```
class PlainTextExtractor < Nokogiri::XML::SAX::Document
  def comment(string)
    # I am defining some regexp here 
    m = Regexp.new(re, Regexp::IGNORECASE);
    if m.match(string)
      $count += 1
      puts $count 
    end
  end
end

parser = Nokogiri::HTML::SAX::Parser.new(PlainTextExtractor.new)
parser.parse_memory(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:02:52.677

只需将您`puts $count`移出循环即可。你可以把它放在最后，在你调用解析器之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:10:12.373

一种方法是让您的类计算实例变量内部的匹配数，例如@count。然后使用 attr_reader 创建一个方法，允许您在最后读取其值。此外，您不需要全局变量。示例（未测试）：

```
class PlainTextExtractor < Nokogiri::XML::SAX::Document
  attr_reader :count
  def comment(string)
    # I am defining some regexp here 
    m = Regexp.new(re, Regexp::IGNORECASE);
    if m.match(string)
      @count += 1
    end
  end
end

pt_extractor = PlainTextExtractor.new
parser = Nokogiri::HTML::SAX::Parser.new(pt_extractor)
parser.parse_memory(html)
puts pt_extractor.count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:44:28.327

如果您只对可以进行的匹配次数感兴趣

```
m = Regexp.new(re, Regexp::IGNORECASE);
puts string.scan(m).length 
```

# excel - Excel 数据导出有带问号的小方框

> ID：11232705
> 
> 赞同：1
> 
> 时间：2012-06-27T18:27:06.860
> 
> 标签：excel, apostrophe

我已将我的一个网站数据文件导出为 CSV。在描述列中，文本中的撇号 (') 已替换为“带问号的小框”。您能否告知我们如何将这些字符替换回撇号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T15:07:08.143

导出为 CSV 文件时，不仅了解编码很重要，正如 datatoo 已经提到的那样，而且还有很多其他的事情，这可能会导致数据损坏，甚至比你提到的问号还要奇怪。

我在这里写了一篇关于它的深入文章：http: [//theonemanitdepartment.wordpress.com/2014/12/15/the-absolute-minimum-everyone-working-with-data-absolutely-positively-must-know- about-file-types-encoding-delimiters-and-data-types-no-excuses/](http://theonemanitdepartment.wordpress.com/2014/12/15/the-absolute-minimum-everyone-working-with-data-absolutely-positively-must-know-about-file-types-encoding-delimiters-and-data-types-no-excuses/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:12:14.500

[带有 HTML 标题、问号的 Unicode 问题？65533;](https://stackoverflow.com/q/3526965/191931) 查看有关 stackoverflow 的上一个问题，因为它解决了您的问题

请参阅 Jeff 关于 Unicode 的文章[http://www.codinghorror.com/blog/2008/03/i-entity-unicode.html](http://www.codinghorror.com/blog/2008/03/i-entity-unicode.html)

其中引用了此链接，您应该阅读[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

当你修复它>>>> [http://www.cafepress.com/nucleartacos/317769](http://www.cafepress.com/nucleartacos/317769)

# asp.net - 业务逻辑在 MVC 模式中属于哪里

> ID：11232707
> 
> 赞同：2
> 
> 时间：2012-06-27T18:27:39.407
> 
> 标签：asp.net, asp.net-mvc, design-patterns, edmx

假设我在数据库中有一个人表。每当一个新人被添加到数据库中时，都会生成一个 pdf 文件并通过电子邮件发送给某人。

这个逻辑是否进入模型，所以应用程序所做的只是传递数据以插入新的人，模型还处理 pdf 和电子邮件？

或者这个逻辑是否进入控制器？

如果这应该进入模型，并且我正在使用实体框架，我该怎么做？创建一个包装`.edmx`模型的 .cs 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:06:31.403

据我了解，您不想用这种逻辑搞砸控制器。属于控制器的事情将定义将被传递给视图的模型或打开或关闭验证。控制器应该控制其他几个与视图相关的东西，但这只是几个。我试图提出的一般观点是，控制器负责通过调用服务或模拟存储库来填充模型，然后将这些模型传递给视图。

要执行您所解释的操作，我将添加一个位于数据访问层之上的服务层（dal - 您的 EDMX 和存储库所在的位置）。在该服务层内部，我将调用方法或服务来生成 pdf 并发送电子邮件。

存储库和数据访问层应该只关心查询数据库和检索记录。这与您使用什么 ORM 或数据访问工具无关。检索到的记录被传递到服务层，您可以在其中对数据执行操作（例如验证或发送 pdf），然后表示层返回它需要在视图中显示的任何格式的记录。控制器不对检索到的数据执行任何逻辑操作，而是将其交给视图。

如果您想了解有关我所描述的架构布局的更多详细信息，那么我很乐意为您提供更深入的了解。

# c# - 插入使用对象的属性进行排序的 C# 对象列表

> ID：11232710
> 
> 赞同：1
> 
> 时间：2012-06-27T18:27:43.927
> 
> 标签：c#, list, sorting, object, orm

有一个对象列表，每个对象代表数据库中的一条记录。要对记录进行排序，有一个名为 SortOrder 的属性。这是一个示例对象：

```
public class GroupInfo
{
    public int Id { get; set; }
    public string Text { get; set; }
    public int SortOrder { get; set; }

        public GroupInfo()
        {
            Id = 0;
            Text = string.Empty;
            SortOrder = 1;
        }
} 
```

列表对象如下所示：

```
var list = new List<GroupInfo>(); 
```

我需要能够更改 SortOrder 并更新列表中其他对象的 SortOrder。我想出了如何按一个向上或向下排序。我需要知道如何将其更改多个并调整其他记录上的 SortOrder。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:51:42.290

这可以通过首先获取原始`SortOrder`和更新的`SortOrder`. 然后，您将遍历您的集合并调整 和之间范围内`SortOrder`的任何其他对象的。您可以将所有这些放在包含集合的“SetSortOrder”函数中。`GroupInfo``original``updated`

```
public static void SetSortOrder(List<GroupInfo> groupInfos, GroupInfo target, int newSortOrder)
{
    if (newSortOrder == target.SortOrder)
    {
        return; // No change
    }
    // If newSortOrder > SortOrder, shift all GroupInfos in that range down
    // Otherwise, shift them up
    int sortOrderAdjustment = (newSortOrder > target.SortOrder ? -1 : 1);
    // Get the range of SortOrders that must be updated
    int bottom = Math.Min(newSortOrder, target.SortOrder);
    int top = Math.Max(newSortOrder, target.SortOrder);
    // Get the GroupInfos that fall within our range
    var groupInfosToUpdate = from g in groupInfos
                                where g.Id != target.Id
                                && g.SortOrder >= bottom
                                && g.SortOrder <= top
                                select g;
    // Do the updates
    foreach (GroupInfo g in groupInfosToUpdate)
    {
        g.SortOrder += sortOrderAdjustment;
    }

    target.SortOrder = newSortOrder;
    // Uncomment this if you want the list to resort every time you update
    // one of its members (not a good idea if you're doing bulk changes)
    //groupInfos.Sort((info1, info2) => info1.SortOrder.CompareTo(info2.SortOrder));
} 
```

**更新：**按照建议，我将逻辑移到了静态辅助函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:34:17.563

```
var sortedList = list.OrderBy(item => item.SortOrder); 
```

编辑：对不起，我误会了。您需要自己编写一个方法`GroupInfo`来处理该属性的更新。

# c - 'All' 属于 Makefile 的什么位置？

> ID：11232714
> 
> 赞同：0
> 
> 时间：2012-06-27T18:27:57.560
> 
> 标签：c, gcc, makefile

我们将所有内容放在 Makefile 中的什么位置？

[我之前](https://stackoverflow.com/questions/2514903/makefile-what-does-all-stand-for)发现了一个类似的问题，但我需要更多细节。我还查看了[GNU make 手册](http://www.gnu.org/software/make/manual/make.html)，但在堆积如山的文档中迷失了方向。我尝试了谷歌，但没有找到一个很好的例子。所以，我做了我最后的手段，并试图通过自己破解一个 Makefile 来解决这个问题。我有：

```
CC=gcc
CFLAGS=-Wall -g

clean: 
rm -f all: ex1 
```

这没有在 C 中编译我的 ex1。另外，如果我想在这个 make 文件中添加更多内容。像ex1，ex2，锻炼什么。我可以将所有内容放在顶部并重复

```
rm - f whatever 
```

下面的线干净吗？

感谢您的帮助和帮助。耐心也值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:41:36.370

`all`其实没什么特别的，只是常用的一个目标名称。为了使其工作得最好，它应该是文件中的第一个目标。这使它成为默认目标，并且`gmake`与`gmake all`.

通常，`all`目标具有依赖关系，这是需要构建的东西。例如

```
all: myexe 
```

`rm`与`clean`目标有关（这也没什么特别的，只是一个常用的名称）。你这样定义它：

```
clean:
    rm -f myexe 
```

这使它在运行`myexe`时删除`gmake clean`。如果您 makefile 构建其他文件，它们也应该在此处列出。

关于makefile还有很多要了解的。通常你会使用变量和模板规则，这可以帮助你避免重复自己。但这远远不是一个简单的答案所能描述的。

# c++ - char 数组的访问冲突

> ID：11232717
> 
> 赞同：0
> 
> 时间：2012-06-27T18:28:05.727
> 
> 标签：c++, access-violation, strcmp, arrays

我*刚刚*使用创建的 char 数组出现访问冲突`new`。

```
DispatchCommand(char* cmdStr)
        {
            // Dispatch
            for(int i = 0; i < sizeof(_lpCommands); i++)
            {
                const int len = strlen(_lpCommands[i].szCommand);
                char* cmdblip = new char[len + 1];
                memcpy(&cmdblip, cmdStr, len);
                cmdblip[len] = '\0';  // Access Violation

                if(strcmp(cmdblip, _lpCommands[i].szCommand) == 0)
                {
                    if(strlen(cmdStr) > strlen(_lpCommands[i].szCommand))
                        (*_lpCommands[i].cbCallback)(&cmdStr[strlen(_lpCommands[i].szCommand)]);
                    else
                        (*_lpCommands[i].cbCallback)("");

                    delete cmdblip;
                    return;
                }

                delete cmdblip;
            }

            // Error and return
            *Out::ServerInfo<<"Command not found!"<<ENDL;
        } 
```

_lpCommands 是一个`Command`结构数组：

```
struct Command
{
    char* szCommand;
    CommandCallback cbCallback;
}; 
```

产生的错误信息是：

> Program.exe 中 0x012219cf 处的未处理异常：0xC0000005：访问冲突写入位置 0x66647366。

这是对`memcmp`使用`memcpy`.

是什么赋予了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:31:28.430

不要`&cmdblip`传给`memcpy`. 您应该传递一个指向目标缓冲区的指针，而不是指向该指针的指针。`cmdblip`而是通过。

编辑：我同意一般来说，std::string 应该在 C++ 中使用。尽管如此，该代码崩溃的技术原因是`memcpy`破坏了`cmdblip`指针，使其指向实际上由复制字符串的前 4 个字节组成的内存位置。然后，`cmdblip[len]`导致内存位置不在分配的缓冲区（或任何其他合法分配的缓冲区）内，因此崩溃。因此，如果您想编写更好的代码，请使用 C++ 类。如果您想了解给定代码崩溃的原因，请考虑以上内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:39:55.193

这个问题唯一可能有用的答案是“使用`std::string`”。每次您修改此函数或编写另一个类似的函数时，您现在遇到的特定问题只会再次出现或相同的问题。在一般情况下解决问题的唯一方法是转向基于类的解决方案，这是作为标准为您提供的。例如，您当前的代码是异常不安全的，除了给您带来访问冲突的任何内容之外，更不用说它不可读并且会出现许多其他错误，例如一对一，不正确的 NULL 终止，双删除和内存泄漏。哦，还有 UB，因为你`delete`就是你`new[]`。

# sql - 如何正确配置 SQL Server Management Studio 2008 以使用 SQL Server 2005 DB？

> ID：11232723
> 
> 赞同：0
> 
> 时间：2012-06-27T18:28:30.967
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-server-2008-r2

如何正确配置 SQL Server Management Studio 2008 以使用 SQL Server 2005 DB？我问的原因是因为我在使用集成服务时遇到问题并且无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:14:18.853

从 SQL 2005 迁移到 SQL 2008（这是我用来将我的数据库从 2005 年迁移到 2008 年的方法） [http://www.packtpub.com/article/moving-a-database-from-sql-server-2005-to- sql-server-2008-三步法](http://www.packtpub.com/article/moving-a-database-from-sql-server-2005-to-sql-server-2008-in-three-steps)

[使用 Managment Studio 2008 http://www.serverintellect.com/support/sqlserver/sql2k8-2k5-comp.aspx](http://www.serverintellect.com/support/sqlserver/sql2k8-2k5-comp.aspx)连接到 SQL Server 2005

在这里找到更多信息和提示（用于尝试将 2005 连接到 SMS2008）[http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error- 40-无法打开连接到 sql-server-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

祝你好运 ：）

# sql - SQL Joins 3个表---数据不是从内表中提取的

> ID：11232724
> 
> 赞同：-1
> 
> 时间：2012-06-27T18:28:33.743
> 
> 标签：sql, oracle, join

我有这个从 3 个表中提取数据的 SQL 查询。我无法从 table3 中获取任何列。可能是什么问题？

```
SELECT table1.col1        COUNTRY,
   table2_alias1.col3 STATE,
   table2.GEOG_LOCATION,
   table2.GEOG_LOCATION_pRE,
   table2.T2col4,
   table2.T2col5,
   TABLE3_ALIAS1.ZIP,
   TABLE3_ALIAS1.T3col2,
   TABLE3_ALIAS1.T3col3,
   TABLE3_ALIAS1.T3col4
FROM   table1,
   table2 table2_alias1,
   table2,
   (SELECT *
         FROM   table3
         WHERE  ( col5 = 'XXX'
                   OR col5 = 'YYY' )
                AND col6 = 'ZZZ')TABLE3_ALIAS1
      WHERE  table1.col3 = 'AAA'
              AND table1.col1 = table2_alias1.STATE
              AND table2_alias1.STATE = table2.col7(+)
              AND table2.STATE = TABLE3_ALIAS1.col6(+) 
ORDER BY 
2,
4,
10,
 9 
```

示例输出（将最重要的数据突出显示为有意义的 COL 名称）

```
 COUNTRY|STATE| GEOG_LOCATION   | T2COL2   | T2col3 | t2col4 | zip | T3col2 |T3col4

 USA       CA     LosAngls       LosAngls-1   0        y      90001
 USA       CA     SanFrans       SanFrans-4   0        y      94101
 USA       CA     Freemont       Freemont-A   0        n      94538 
```

只有前 5 列有数据，包括 zip 的列（来自 table3）及以后的列在运行查询时不包含任何数据

关系型数据库管理系统

```
 TABLE1          TABLE2             TABLE3 

 T1_COL1         GEOG_LOCATION          T3_COL1 
 GEOG_LOCATION        T2_COL2       T3_COL2
 T1_COL3         GEOG_LOCATION_pRE      GEOG_LOCATION
 T1_COL4         T2_COL4        T3_COL4
 T1_COL5         T2_COL5        T3_COL5
 T1_COL6         T2_COL6        T3_COL6
 T1_COL7         T2_COL7        T3_COL7
 T1_COL8         T2_COL8        T3_COL8
 T1_COL9         T2_COL9        T3_COL9
 T1_COL10                   T3_COL10 
```

这三个表通过列 startihg 与 HHH 链接。他们共享相同的数据。以 FFF 开头的列（表 2 中的第 3 个）与 table2 的第 1 列（HHH_col1）具有递归关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:32:50.870

尝试自己运行嵌套查询：

```
 SELECT *
     FROM   table3
     WHERE  ( col5 = 'XXX'
               OR col5 = 'YYY' )
            AND col6 = 'ZZZ' 
```

你拿回数据了吗？

此外，为了安全起见，可能值得在上面的查询中使用表名作为列名的前缀。

然后，尝试将其加入 table2：

```
 SELECT *
     FROM   table3, table2
     WHERE  ( col5 = 'XXX'
               OR col5 = 'YYY' )
            AND col6 = 'ZZZ'
            AND table2.col3 = table3.col6(+) 
```

...依此类推，一次重建您的查询，直到数据丢失。然后你知道哪一步是罪魁祸首...

# .net-4.0 - 在 C# 中的 WebBrowser 控件上运行 IE8+？

> ID：11232729
> 
> 赞同：0
> 
> 时间：2012-06-27T18:28:46.630
> 
> 标签：.net-4.0, browser

我试图运行 webbrowser 控件，我发现默认情况下它使用的是 IE7，我尝试了不同的修复，比如编辑注册表值或其他 - 没有一个有效。我正在使用 .net framework 4.0 并且想知道控件如何仍然卡在 IE7 上？如何更新控件以使其使用 IE8+ 而不是 IE7？任何人，请帮助提供信息

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:10:24.603

打开头部后添加以下内容就行了

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

如果安装在客户端计算机上，这将呈现为 IE。或者，您可以使用

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

在客户端机器上以最高可用的 IE 呈现。如果 HTML 不是您自己的（外部），也许您可​​以使用预加载事件将该行添加到 HTML

# c# - 在 LINQ 中，Join 和从嵌套查询中选择第一项之间有什么区别

> ID：11232735
> 
> 赞同：2
> 
> 时间：2012-06-27T18:29:07.583
> 
> 标签：c#, linq, linq-to-sql, join

这是一些用于选择所有订单详细信息的 LINQ。它创建与产品表的连接以获取产品名称：

```
var query = from od in db.Order_Details
            join p in db.Products on od.ProductID equals p.ProductID
            select new { od.OrderID, od.ProductID, p.ProductName }; 
```

如果我不知道 Join 存在，我会这样做：

```
var query = from od in db.Order_Details
            select new { od.OrderID, 
                         od.ProductID, 
                         ProductName = (from p in db.Products 
                                        where p.ProductID == od.ProductID 
                                        select p.ProductName).First()
            }; 
```

它们生成不同的底层 SQL 代码。第一种方法是否比第二种方法快，如果是，为什么？

**预计到达时间：**

db.Log 用于连接查询：

```
SELECT [t0].[OrderID], [t0].[ProductID], [t1].[ProductName]
FROM [dbo].[Order Details] AS [t0]
INNER JOIN [dbo].[Products] AS [t1] ON [t0].[ProductID] = [t1].[ProductID] 
```

db.Log 用于第二个查询：

```
SELECT [t0].[OrderID], [t0].[ProductID], (
    SELECT TOP (1) [t1].[ProductName]
    FROM [dbo].[Products] AS [t1]
    WHERE [t1].[ProductID] = [t0].[ProductID]
    ) AS [ProductName]
FROM [dbo].[Order Details] AS [t0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:48:12.743

连接通常比等效的嵌套选择更快，因为 DBMS 非常擅长优化连接，尽管一个好的 SQL 编译器可能会将它们优化为相同的 SQL。您应该使用使您的目的更明确的那个，在这种情况下可能是 join。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:55:04.953

您提供的没有连接的第二个示例执行所谓的“相关子查询”，并且通常比连接慢。结果是相同的，但不同的是获得这些结果的性能。你应该赞成加入。

[http://msdn.microsoft.com/en-us/library/ms187638%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms187638%28v=sql.105%29.aspx)

# c++ - 删除 char*[] 中的第一个索引

> ID：11232739
> 
> 赞同：2
> 
> 时间：2012-06-27T18:29:16.263
> 
> 标签：c++, c, arrays, char

在 CI 中想要这样的函数：

```
bool RemoveFirstIndex(char* inArray[]) 
```

它进入并取出该数组中的第一个元素。

例如

```
inArray = "Hello\o", "How\o", "Are\o"
RemoveFirstIndex(inArray)
inArray = "How\o", "Are\o" 
```

不知道该怎么做。

我的想法是，我必须创建一个新的 inSize - 1 数组，然后用索引 0 以外的所有内容填充它。但是如果我这样做，该函数是否需要返回一个新的 char*[]？是不是有点浪费？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T18:41:32.953

为什么要删除第一个元素或创建一个新数组？

只需增加您的指针，使其指向数组中的下一项。

```
char **newArray = inArray + 1; 
```

`newArray`只要是有效`inArray`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:34:36.587

使用动态内存管理并缩小该数组：

```
// create the array
size_t arrsize = 10;
char **arr = malloc(arrsize * sizeof(*arr));
int i;
for (i = 0; i < arrsize; i++)
    arr[i] = malloc(/* whatever the length of the string (incl. NUL) is */);

// then use it like this:
RemoveFirstIndex(arr, &arrsize);

bool RemoveFirstIndex(char **inArray, size_t *arr_len)
{
    if (*arr_len == 0 || inArray == NULL)
        return false;

    free(inArray[0]);
    int i;
    *arr_len--;
    for (i = 0; i < *arr_len; i++)
        inArray[i] = inArray[i + 1];

    inArray = realloc(inArray, sizeof(*inArray) * (*arr_len));

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:02:50.973

```
void RemoveFirstIndex(std::vector<std::string> &inArray) {
    if (!inArray.empty())
        inArray.erase(inArray.begin());
}

std::vector<std::string> array = {"Hello", "How", "Are"};
RemoveFirstIndex(inArray)
// array now contains {"How", "Are"} 
```

您不应该使用 char 指针数组，但如果需要，您需要指明它的大小以及函数随后指明新大小的方法。

```
size_t RemoveFirstIndex(char **inArray, size_t n) {
    if (n==0)
       return n;

    std::rotate(inArray,inArray+1,inArray+n);
    // raw pointers indicate we don't own these resources
    //   so we don't need to deallocate anything...
    return n-1;
}

char *array[] = {"Hello", "How", "Are"};
size_t size = sizeof array/sizeof *array;
for (size_t i=0;i<size;++i)
    std::cout << array[i] << '\n';

size = RemoveFirstIndex(array,size);
for (size_t i=0;i<size;++i)
    std::cout << array[i] << '\n'; 
```

# internet-explorer - 我可以在 IE 中使用 onpopstate 吗？

> ID：11232745
> 
> 赞同：2
> 
> 时间：2012-06-27T18:29:52.630
> 
> 标签：internet-explorer, browser-history

我目前（很高兴）使用 jquery 将 ajax 请求函数绑定到非 IE 浏览器中的 window.onpopstate 事件。但是，IE 从来没有达到我的`doAjax`功能。

```
 // Bind a function to the popstate event to execute ajax requests
    // this allows request to occur on back/fwd browser navigation 
    window.onpopstate = doAjax; 
```

任何人都知道是否有办法让 IE 8/9 以某种方式玩得很好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T15:34:16.987

我得出的解决方案是将两者绑定`onpopstate`并绑定`onhashchange`到所需的处理程序。

```
 // Popstate: load ajax
    window.onpopstate = handlePageWipe;

    // And onhashchange for IE
    if( jQuery.browser.msie ) window.onhashchange = handlePageWipe; 
```

当我对页面进行 ajax 更改时，我正在使用 History jquery 库来更新 url。不幸的是，可以预见的是，IE 还没有赶上，似乎没有办法用 JS 更改 url。历史回退到在 IE 中更新 url 的哈希状态，因此这符合我将 url 状态更改绑定到 IE 中的处理程序的初始目标。

当然，这打开了另一个蠕虫罐，因为我现在必须同时处理 url 更改和哈希更改。嗯，就这样吧……

**编辑：** 正如@linus 指出的那样，我们应该是慈善的，避免浏览器检测给 IE 一个改革的机会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-26T08:53:22.357

我宁愿这样做：

```
if (window.onpopstate != undefined) {
    window.onpopstate = locate;
} else {
    window.onhashchange = locate;
} 
```

因此，如果“msie”添加此功能，您就不必依赖旧代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:37:45.953

我在一个使用**jQuery 历史插件**的项目中，版权归 Takayuki Miwa 所有。客户端代码使用`$.history.init(callback, ...)`.
每次您导航到/刷新页面时，以及每次通过 AJAX 更新页面内容时都会调用该回调，无论是点击、历史回溯、历史前进。

如果您使用的是同一个库，您可以执行相同操作以便在页面内容更改时调用代码，从而删除 onpopstate/onhashchange 事物。

如果您使用的是[来自 BA Lupton](https://github.com/balupton/History.js)插件的更新的[**History.js**](https://github.com/balupton/History.js)`statechange` ，则可以绑定一个事件。

另外，请记住，`onhashchange`IE8“仅”支持 even。
高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-09T18:59:27.093

这解决了我：

if(navigator.userAgent.toLowerCase().indexOf('msie')) window.onhashchange = locate else window.onpopstate = locate

# php - exec() 不会播放（Apache 上的 php）

> ID：11232749
> 
> 赞同：1
> 
> 时间：2012-06-27T18:30:07.350
> 
> 标签：php, apache, shell

我的 exec() 命令停止工作。我从 Dreamhost Apache 服务器上的 PHP 脚本调用 exec()。

下面是一个测试脚本：

```
$disabled = explode(', ', ini_get('disable_functions'));
if (in_array('exec', $disabled)) 
    echo 'exec is in array of disabled functions';
else
    echo 'exec is NOT in array of disabled functions';
echo '</br> exec(ls): </br>';
$command = 'ls';
exec($command,$output,$returnvar);
echo '</br> output is: </br>';
var_dump($output);
echo '</br> return var is: </br>';
var_dump($returnvar); 
```

输出是：

```
exec is NOT in array of disabled functions
exec(ls):

output is:

array
  empty

return var is:

int 1 
```

恕我直言，这告诉我 exec() 在我的系统上已启用。$return_var 设置为 1，Google 向我保证这表示“小问题”。

这里可能是什么问题？为什么 exec() 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:35:23.523

更有可能是路径问题，请尝试使用绝对路径

> $command = '/path/to/ls'; //我认为它的 /bin/ls

如果找不到命令，您通常会得到空结果（您必须以不同的方式捕获错误输出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:15:08.140

这可能是路径问题或应用程序无法访问您尝试访问的命令。

添加`2>&1`到 exec 命令的末尾，看看输出是什么。这很可能会让你看到是什么阻止了命令的执行。 `2>&1`告诉操作系统将 STDERR 发送到 STDOUT。

例如，而不是

```
exec('ls'); 
```

尝试

```
exec('ls 2>&1'); 
```

# sql - SQL 错误：子查询返回超过 1 个值

> ID：11232751
> 
> 赞同：0
> 
> 时间：2012-06-27T18:30:09.823
> 
> 标签：sql, sql-server-2008, tsql

我在文本框中输入关键字，例如 test、check、..etc。我将这些关键字作为单独的行插入到我的数据库中以检查它是否存在，如果存在则更新或插入它。这个关键字 ID 和代表这个的项目id 应插入到桥表中。插入现有关键字时会引发错误：

> `Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.`
> 
> `Cannot insert the value NULL into column 'KeywordId', table 'dbo.Keywordsitems'; column does not allow nulls. INSERT fails.`

我正在使用以下存储过程

```
ALTER PROCEDURE [dbo].[InsertKeywords] 
(
  @keywordName nvarchar(256),
  @itemid uniqueidentifier
)
AS
begin
  declare 
    @itemid uniqueidentifier,
    @keywordid uniqueidentifier,
    @id uniqueidentifier;
  declare @keyworddata table (keywordid uniqueidentifier);

  set @id = (select KeywordId  from keywords where KeyName=@keywordName)
  set @itemid =(select itemId from Items where ItemID = @itemid);

  if not exists(select keyname from keywords where KeyName = @keywordName)
  begin
    insert into Keywords(KeywordId,KeyName)
    output inserted.KeywordId into @keyworddata(keywordid)
    values (newid(),@keywordName);

    select @keywordid = keywordid from @keyworddata;

    insert into Keywordsitems(KeywordId,ItemId)
    values (@keywordid,@itemid);
  end
  else
  begin
    update keywords set KeyName=@keywordName where KeywordName= @keywordName;
    insert into KeywordsResources(KeywordId,itemId) values (@id,@itemid);       
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:31:35.620

您可以使用 TOP 1 来解决此问题。

例如，

```
...
set @id = (select top 1 KeywordId  from keywords where KeyName=@keywordName)
set @itemid =(select top 1 resourcedatabaseId from Items where ItemID = @itemid); 
... 
```

# objective-c - Objective C 列举段落中的句子

> ID：11232761
> 
> 赞同：1
> 
> 时间：2012-06-27T18:30:29.523
> 
> 标签：objective-c, xcode, ios4, xcode4, text-segmentation

我想写一个枚举器，它会遍历一段文本并一次给我一个句子。我尝试将 stringEnumerate 与 NSStringEnumerationBySentences 一起使用，但这只是查看句点并失败。例如，假设我有以下文本块：

**“参议员 John A. Boehner 决定不继续前进。他还决定不召集国会。新闻记者说……”**

我希望我的功能将上述段落分解为以下句子：

1.  参议员约翰·A·博纳决定不再前进

2.  他还决定不召集大会（没有第三句话，因为它是半句话）

带有句子选项的字符串枚举器只查看句点并以错误的方式分解：

1.  参议员约翰 A。

2.  博纳决定不再前进

3.  他还决定不召开代表大会

4.  新闻记者说，虽然......

有没有我可以调用的库或函数在这方面做得更好？

谢谢

```
- (NSMutableString *) getOnlyFullSentencesFromTextBlock:(NSMutableString *) textBlock{
    [textBlock enumerateSubstringsInRange:NSMakeRange(0, [textBlock length])
                                  options:NSStringEnumerationBySentences | NSStringEnumerationLocalized
                                usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop)
    {
        NSLog(@"Sentence Frag:%@", substring);                                                                        
    }];
    return textBlock;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:12:34.400

我出现的唯一解决方案是检查句点之前的最后一个单词是否以大写字符开头。如果是这样，并且该单词的字符数不超过 3 或 4 个（您将不得不尝试看看哪种效果更好），那么它可能是一个缩写词。
我知道这并不涵盖所有情况，但它可能适用于大多数情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T16:57:45.510

NSLinguisticTagger 会这样做

# jquery - jQuery.show() 的问题

> ID：11232766
> 
> 赞同：0
> 
> 时间：2012-06-27T18:30:47.747
> 
> 标签：jquery

我正在尝试使用 jQuery 创建非常简单的图像浏览器。我这样做只是为了学习，目前不会在任何项目中使用。

我有如下图像和缩略图：

```
<div class="images">
  <img src="http://www.dummyimage.com/400x200/222/fff.jpg" alt="" data-idi="1"/>
  <img src="http://www.dummyimage.com/400x200/534/fff.jpg" alt="" data-idi="2"/>
  <img src="http://www.dummyimage.com/400x200/345/fff.jpg" alt="" data-idi="3"/>
  <img src="http://www.dummyimage.com/400x200/fed/111.jpg" alt="" data-idi="4"/>
</div>

<div class="thumbs">
  <button data-idb="1"><img src="http://www.dummyimage.com/50x50/222/fff.jpg" alt="" /></button>
  <button data-idb="2"><img src="http://www.dummyimage.com/50x50/534/fff.jpg" alt="" /></button>
  <button data-idb="3"><img src="http://www.dummyimage.com/50x50/345/fff.jpg" alt="" /></button>
  <button data-idb="4"><img src="http://www.dummyimage.com/50x50/fed/111.jpg" alt="" /></button>   
</div> 
```

悬停在缩略图上应替换上面的主图像。

我已经成功地做到了这一点，我们称之为图像“集”，如[jsfiddle.net](http://jsfiddle.net/hsuc8/)上所示。

这是用于实现此目的的简单脚本：

```
 $('#images img').hide().first().show();
  $('#thumbs button').on( "mouseover", function(e) {
     var idb = $(this).data("idb");
     $('#images img').hide();
     var img = $('#images').find("[data-idi='" + idb + "']").show();
  }); 
```

现在我想添加另一组图像，并用`.each()`函数包装脚本。但是当我试图只显示第一张图片时，我一开始就遇到了问题：

```
var imgs = $('.images').hide();
$.each(imgs, function( index, val ) {
    var firstImage = $(this).children(":first");
    console.log(firstImage);
    firstImage.show();
}); 
```

正在安慰正确的图像，但它没有显示，如例外。[jsfiddle.net](http://jsfiddle.net/hsuc8/1/)上的实时示例。你能帮我解决这个问题吗？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:34:28.903

您已经隐藏了父`.images`元素。

调用后`.show()`，您在隐藏的父级中有一个可见元素。

您需要`<img>`通过编写来选择元素本身`$('.images img')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:39:49.047

隐藏所有图像，然后显示第一个：

```
$('.images img').hide().first().show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:12:44.660

看看[http://jsfiddle.net/hsuc8/14/](http://jsfiddle.net/hsuc8/14/)

我改变了你的一些代码。

编辑：我更改了以前的 URL，因为我更改了代码以使用过滤器功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T21:24:11.027

谢谢大家的回答，我都投了赞成票。我设法改进了我的脚本，现在 HTML 结构如下所示：

```
<div class="images" data-set='1'>
  <img src="http://lorempixel.com/400/200/sports/1/" alt="" data-idi="a1" />
  <img src="http://lorempixel.com/400/200/sports/2/" alt="" data-idi="a2" />
  <img src="http://lorempixel.com/400/200/sports/3/" alt="" data-idi="a3" />
  <img src="http://lorempixel.com/400/200/sports/4/" alt="" data-idi="a4" />
</div>
<div class="thumbs" data-set="1">
  <button data-idb="a1"><img src="http://lorempixel.com/50/50/sports/1/" alt="" /></button>
  <button data-idb="a2"><img src="http://lorempixel.com/50/50/sports/2/" alt="" /></button>
  <button data-idb="a3"><img src="http://lorempixel.com/50/50/sports/3/" alt="" /></button>
  <button data-idb="a4"><img src="http://lorempixel.com/50/50/sports/4/" alt="" /></button>   
</div> 
```

JS 脚本如下所示：

```
 var imgs = $('.images');
    $('.images img').hide()
    $.each(imgs, function(index, val) {
        $(val).children(":first").show();
        $('.thumbs button').on( "mouseenter", function(e) {
             var idb = $(this).data("idb"),
                 set = $(this).parent().data("set");
             $('body').find("[data-set='" + set + "']").children("img").hide();
             var img = $('.images').find("[data-idi='" + idb + "']").show();
        });
    }); 
```

和[工作示例](http://jsfiddle.net/hsuc8/15/)。

# python - 使用 Python 或 Ruby 的 WSO2 ESB 代理

> ID：11232767
> 
> 赞同：0
> 
> 时间：2012-06-27T18:30:48.940
> 
> 标签：python, ruby, wso2, wso2esb

我是 WSO2 ESB 的新手，正在尝试设置一个非常简单的代理（我认为）。对于这个测试环境，我有两个 python 脚本，一个服务器和一个客户端，我只想互相交谈。如果这样更容易的话，我也可以使用 Ruby。

我已经阅读了[入门指南](http://wso2.org/project/esb/java/4.0.3/docs/quickstart_guide.html#Proxy)并创建了一个新代理，但是它告诉我我需要使用axis2，它看起来只适用于Java。我是否完全错过了某些东西，或者还有其他可以使用的东西？如果可能的话，我希望 ESB 直接与服务器脚本和客户端脚本连接。

如果您在这方面有任何经验并且可以指出我正确的方向，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:54:05.870

要集成您的服务器和客户端，您应该知道客户端-服务器通信发生在什么协议上。（例如：HTTP） WSO2 ESB 能够处理各种标准传输，例如 HTTP、JMS、VFS 等以及 SOAP、REST 等协议。因此，您希望在客户端和服务器之间使用哪种协议进行通信。

# r - R - 将列表合并为一个而不放置每个列表的编号

> ID：11232770
> 
> 赞同：0
> 
> 时间：2012-06-27T18:31:01.797
> 
> 标签：r, list

我有一堆这样的列表：

```
out[3]

[[3]]

[1] "forum=28&mid=11883" 
[2] "forum=29&mid=11884" 

out[4]

[[4]]

[1] "forum=30&mid=11885" 
[2] "forum=31&mid=11886" 
```

我想要的结果是

```
[1] "forum=28&mid=11883"

[2] "forum=29&mid=11884" 

[3] "forum=30&mid=11885" 

[4] "forum=31&mid=11886" 
```

没有[3]，[4]（每个列表的顺序）进入输出列表。大多数“组合列表”方法（即c（list1，list2），combine，paste，rbind ..）让我包括每个列表的顺序，如下所示

有什么建议么？将不胜感激。（我正在考虑将列表转换为数据框并使用 rbind，但我有 50,000 个列表（比这长），我希望它会减慢进程，所以我没有走那条路..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:42:34.160

只需使用`unlist()`. 这是一个例子：

```
out <- list(
  c("a", "b"),
  c("c", "d")
)

out[[1]]
[1] "a" "b" 
```

现在使用`unlist()`

```
unlist(out)
[1] "a" "b" "c" "d" 
```

# variables - play 2.0 创建变量并赋值

> ID：11232772
> 
> 赞同：2
> 
> 时间：2012-06-27T18:31:15.050
> 
> 标签：variables, playframework-2.0

我为这个问题搜索了很多。我只想在 scala html 模板中创建一个变量，并且需要一个临时变量。

我找到的唯一“有意义”的解决方案如下：

```
@defining("hello text") {testvariable =>
    <h1>output of variable: @testvariable</h1>
} 
```

这真的是唯一的方法吗？playframework的人是认真的吗？我不想将变量值从控制器传递给模板。我只想创建一个局部简单变量并在“if-block”中为其分配一个值，仅此而已。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:40:20.643

是的，我认为 Play 的人是认真的。

### 第一的。

将变量定义为`hardcoded`模板的元素是什么意思？好的，我知道您不想多次插入一个值，但是您展示的方式可以`@defining`解决问题。另一方面 - 如果您只想放置变量以将其用作`if`块中的条件，那也没有意义，因为您也可以编写类似的东西`@if(1==1){ code }`来模拟某些行为。在其他情况下，您的变量应该由控制器确定，并且为了清楚起见，您可以使用一些 Map 来将变量组`controllers`从`view`.

### 第二。

Play 中的 Scala 模板只是函数，这意味着您还可以调用其他函数或方法。例如，您可以调用一些`getter`或另一种方法，该方法将执行并返回您想要的任何内容。样本很多，所以我将跳过这部分。

### 第三。

如第二部分所述，如果您*不喜欢*@defining 方法，您可以在应用程序的某个位置（让我们考虑一下`app/controllers/Application.java`）创建一些超级简单的方法来存储和设置/获取一些值。当然，如果您打算使用许多“变量”，最好将其存储在一张地图中，而不是为每个地图创建单独的 getter 和 setter。

在您的`Application`控制器中，只需添加这些简单的方法（如果需要，还可以为其他类型创建自己的 getter）

```
private static Map<String, Object> map = new HashMap<String, Object>();

// setter
public static void setValue(String key, Object value) {
    map.put(key, value);
}

// general getter would work well with String, also numeric types (only for displaying purposes! - not for calculations or comparisons!)
public static Object getValue(String key) {
    return map.get(key);
}

public static Boolean isTrue(String key) {
    return  Boolean.valueOf(map.get(key).toString());
}

public static Double getDouble(String key) {
    return Double.valueOf(map.get(key).toString());
} 
```

所以接下来你可以`view`通过设置和读取 Map 键和值来使用它

```
@Application.setValue("name", "Stefan")
@Application.setValue("age", 30)
@Application.setValue("developer", false)
@Application.setValue("task1", 123.5)
@Application.setValue("task2", 456.7)

<h1>ellou' @Application.getValue("name")!</h1>

<div>
    Today there are your  @Application.getValue("age") birthday!
</div>

<div>
    You are @if( Application.isTrue("developer")  ) {
        very big developer
    } else {
        just common user
    }
</div>

<div>
    Once again: @{ val status = if (Application.isTrue("developer"))  "veeeeery big developer" else "really common user"; status }
</div>

<div>
    Today you earned $ @{ Application.getDouble("task1") + Application.getDouble("task2") }
</div>

<div> etc... </div> 
```

如您所见，您甚至可以执行一些基本操作，无论如何，对于更复杂的任务，我会将权重从（仅）模板引擎重定向到专用控制器的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:24:13.453

该示例不是“将变量值从控制器传递到模板”。它将一个值绑定到一个变量，以允许在后续大括号的范围内重用它，这似乎正是您想要的。即，您将在模板中使用该代码并通过将“hello text”绑定到 testvariable 它将产生：

```
<h1>output of variable: hello world</h1> 
```

即它与控制器无关。

如果您在尝试使用它的地方发布一些模板代码，我们可能会提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T13:22:12.687

很抱歉创建了一个僵尸......但由于我最终在这里搜索自己，我想通过详细说明我的首选替代方案 Biesiors 的第二个替代方案来做出贡献（以一个简单的条纹行示例）：

```
/** This goes in the top of the scala template, before the HTML **/
@injectStripeColor(index: Integer) = @{
    if(index % 2 == 0){
        "#EEE" // Even row
    } else {
        "#AAA" // Odd row
    }
} 
```

您现在有了一个可以在模板中使用的函数。（您也可以将上面的函数存储在一个单独的文件中，只要您需要它就可以将它包含在需要它的任何模板中）。

```
/** This goes in your row loop where i is current index **/
<tr><td style="background-color: @injectStripeColor(i)"> @content </td></tr> 
```

# php - PHP 我该如何解决这个错误？致命错误：无法重新声明类 iSerializable

> ID：11232776
> 
> 赞同：1
> 
> 时间：2012-06-27T18:31:28.163
> 
> 标签：php

我在检测是否已声明接口类时遇到问题

*报告的错误是：*

**致命错误：无法在第 3 行的 /public_html/application/AppCode/iSerializable.interface.php 中重新声明 iSerializable 类**

```
line1: //nothing here
line2:  require_once($filename);    
line3:  interface iSerializable
        {
            public function writeXML(DomDocument $doc, DomElement $element);
        } 
```

**如果这是一个普通的类，那么我会使用下面给出的这个示例函数**

```
if(class_exists('iSerializable') != true)
{
   //put class iSerializable here
} 
```

**但是在这里，这个类是一个接口，我如何检查这个接口是否已经声明？**

任何人都可以建议我解决这个问题的正确方法或解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:34:11.487

您可以使用[`interface_exists()`](http://php.net/interface_exists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:45:41.357

`interface iSerializable`是一个接口，而不是一个类。您正在尝试验证一个类是否存在，从技术上讲它不存在。类不表示接口。

调查`interface_exists()`

# bash - 在 xargs 中使用用户定义的 bash 函数

> ID：11232782
> 
> 赞同：10
> 
> 时间：2012-06-27T18:31:37.200
> 
> 标签：bash, xargs

我的 .bashrc 中有这个自定义函数：

```
function ord() {
  printf '%d' "'$1"
} 
```

如何让这个函数与 xargs 一起使用？：

```
cat anyFile.txt | awk '{split($0,a,""); for (i=1; i<=100; i++) print a[i]}' | xargs -i ord {}
xargs: ord: No such file or directory 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:05:29.923

首先，您的函数仅使用 1 个参数，因此在此处使用 xargs 只会采用第一个 arg。您需要将功能更改为以下内容：

```
ord() {
   printf '%d' "$@"
} 
```

要让 xargs 使用 bashrc 中的函数，您必须生成一个新的交互式 shell。像这样的东西可能会起作用：

```
awk '{split($0,a,""); for (i=1; i<=100; i++) print a[i]}' anyFile.txt | xargs bash -i -c 'ord $@' _ 
```

由于您已经依赖于分词，您可以将 awk 的输出存储在一个数组中。

```
arr=(awk '{split($0,a,""); for (i=1; i<=100; i++) print a[i]}' anyFile.txt)
ord "${arr[@]}" 
```

或者，您可以使用 awk 的 printf：

```
awk '{split($0,a,""); for (i=1; i<=100; i++) printf("%d",a[i])}' anyFile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:05:28.327

在简单的情况下，您可以使用`/usr/bin/printf`：

```
xargs -I {} /usr/bin/printf '%d' "'{}" 
```

# iphone - NSMutableArray removeObjectAtIndex：行为

> ID：11232785
> 
> 赞同：0
> 
> 时间：2012-06-27T18:31:53.930
> 
> 标签：iphone, objective-c, ios, arrays, nsmutablearray

我有一个 NSMutableArray，我分配给它：

```
NSMutableArray *newElements = [[NSMutableArray alloc] initWithObjects:self.currentScene.elements, nil];
//selectedElement is assigned somewhere above this, shouldn't be relevant since it's the same object as the one in the array
int indexToRemove = [self.currentScene.elements indexOfObject:selectedElement]; 
```

我正在`selectedElement`从这个数组中删除，但在调试器中看到了一些奇怪的行为。初始化数组后，通过在删除之前设置断点`selectedElement`，我看到了：

```
po newElements
(NSMutableArray *) $2 = 0x08c74e90 <__NSArrayM 0x8c74e90>(
<__NSArrayM 0x8c52e60>(
<StoryTextElement: 0x12ac6e00>,
<StoryTextElement: 0x8ca1a50>
)

)

(lldb) po selectedElement
(StoryElement *) $3 = 0x08ca1a50 <StoryTextElement: 0x8ca1a50> 
```

我;正在尝试使用以下方法删除对象：

```
NSLog(@"count: %d", [newElements count]); // prints count: 1
[newElements removeObject:selectedElement];
NSLog(@"count: %d", [newElements count]); // prints count: 1
[newElements removeObjectAtIndex:indexToRemove];  // throws an exception. indexToRemove is 1 in the debugger
NSLog(@"count: %d", [newElements count]); 
```

我不明白为什么我的对象没有被删除。这就像我错过了重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:35:45.863

`self.currentScene.elements`是一个数组。因此，您正在创建一个包含该数组的新数组。中唯一的项目`newArray`是`self.currentScene.elements`. 如果要创建 的可变副本`self.currentScene.elements`，只需使用`mutableCopy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:35:21.327

您有一个包含一个对象的数组，该对象是另一个数组。`newElements`只有一个有效索引，即`0`. 你需要改变你的第一行看起来像

```
NSMutableArray *newElements = [[self.currentScene.elements mutableCopy] autorelease]; 
```

# javascript - “innerHTML”：对象为空或未定义

> ID：11232788
> 
> 赞同：3
> 
> 时间：2012-06-27T18:32:07.860
> 
> 标签：javascript, asp.net, html, vb.net, innerhtml

我有以下内容：

```
<div id="valueboxes" style="overflow-x:hidden;overflow-y:scroll;width:100%;height:200px"> 
```

但是，每次我使用以下内容时：

```
document.getElementById("valueboxes").innerHTML = html; 
```

我收到此错误：

```
'innerHTML': object is null or undefined 
```

难道我做错了什么？

html 是一个表变量，它也由 javascript 在 for 循环中使用`+=`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T18:34:59.317

那是因为您在 DOM 完全加载之前执行代码。

这*应该*有效：

```
window.onload = function() {
  document.getElementById('valueboxes').innerHTML = html;
}; 
```

或者您可以简单地将您的 javascript 代码放在`</body>`标签之前，而无需在`onload`那里使用。

# c# - 使用 WinRT Geolocator 时“管道正在关闭”

> ID：11232792
> 
> 赞同：6
> 
> 时间：2012-06-27T18:32:29.533
> 
> 标签：c#, geolocation, windows-runtime

当我使用 WinRT Geolocator 时，我偶尔会收到错误消息：

```
{"The pipe is being closed. (Exception from HRESULT: 0x800700E8)"} 
```

同样，这是零星的。有什么建议么？

```
Windows.Devices.Geolocation.Geoposition _Postion = null;
try
{
    var _Locator = new Windows.Devices.Geolocation.Geolocator();
    _Postion = await _Locator.GetGeopositionAsync();
}
catch { /* continue, null okay */ }

if (_Postion == null)
{ 
    /* use alternate */ 
}
else
{
    /* use location */ 
} 
```

这是在模拟器中，也是在本地机器上运行时。通常这个错误不会导致中断。它只是突然结束应用程序。当它确实导致休息时。这就是由此产生的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:19:43.227

我发现当您的本地化设置为“模拟”时会发生这种情况，如果您使用设备模拟器运行您的应用程序，您可以通过单击世界图标（在显示和相机设置之间）来禁用它，然后取消选中“使用模拟位置”选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T08:45:18.983

我认为这个问题的根本原因是 GeoLocator 正在使用 Location API。

您得到的错误是 HRESULT_FROM_WIN32(ERROR_NO_DATA)，它似乎映射到友好的（但在这种情况下没有帮助）字符串“管道正在关闭”。当平台没有看到您的传感器提供有效报告时，这是预期的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T11:09:49.853

在我的项目中，我也遇到了类似的零星异常。看看我附上的图片截图。![在此处输入图像描述](../Images/665fd7a18530985a676792b89eb46db5.png)

这是对我有用的解决方案，但我不确定它是否对其他人有用。

这是我之前的代码：

```
Geolocator loc = new Geolocator();
try
{
      loc.DesiredAccuracy = PositionAccuracy.High;

      Geoposition pos = await loc.GetGeopositionAsync();
      var lat = pos.Coordinate.Point.Position.Latitude;
      var lang = pos.Coordinate.Point.Position.Longitude;
      Status = loc.LocationStatus;

      return GetGpsInfoObject(pos);
}
catch (System.UnauthorizedAccessException)
{
      return null;
} 
```

我将代码更改为：

```
Geolocator loc = new Geolocator();
try
{
       loc.DesiredAccuracy = PositionAccuracy.High;

       Geoposition pos = await loc.GetGeopositionAsync();
       var lat = pos.Coordinate.Point.Position.Latitude;
       var lang = pos.Coordinate.Point.Position.Longitude;
       Status = loc.LocationStatus;

       return GetGpsInfoObject(pos);
}
catch (Exception)
{
          return null;
} 
```

# r - 使用 R 的热图

> ID：11232793
> 
> 赞同：1
> 
> 时间：2012-06-27T18:32:34.173
> 
> 标签：r, heatmap

我正在尝试通过从 csv 文件中读取数据来绘制矩阵的热图。以下是代码的外观：

```
lda <- read.csv('topic_word_matrix.data',sep=",")
row.names(lda) <- lda$topics
lda <- lda[,2:ncol(lda)]
lda_matrix <- data.matrix(lda)
lda_heatmap <- heatmap(lda_matrix, Rowv=NA, Colv=NA,col = cm.colors(256), scale="column", margins=c(5,10)) 
```

我的输入文件如下所示：

```
topics,jockin,limited,raining,magnetic,reallamarodom
topic9,0.0,0.0,0.00671140939597,0.0022271714922,0.00234192037471
topic2,0.1,0.0,0.02671140939597,0.0022271714922,0.00234192037471 
```

我得到一个没有任何颜色的图和以下警告消息：

```
Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf 
```

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:33:18.400

参数 'scale = "columns"' 的错误结果。

您的列的标准差为 0，因此缩放 (mean / sd) 失败。因此，要么使用 scale = "row" 或 scale = "none" ，要么考虑为什么要在列上进行缩放。

高温高压

# javascript - 如何确定 HTML 元素文本中“新行”的位置？

> ID：11232795
> 
> 赞同：7
> 
> 时间：2012-06-27T18:32:38.250
> 
> 标签：javascript, html, word-wrap

在诸如 DIV 之类的 HTML 元素中添加长文本，该元素会包装该文本。实际上，就像这个问题文本一样。如何从这样的 HTML 元素中获取文本并确定它在哪里中断？即插入新行的位置。

例如，在这个框中，在“...like this”之后有一个新行，在“...where it”之后有一个新行，在“...is insert”之后有两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:23:11.913

所以，问题实际上是**如何在 HTML5 画布中进行自动换行**：

> 这一切都是为了将​​一些包含文本和/或照片的标准 HTML 元素转换为 HTML5 画布。不幸的是，'.fillText()' 方法不够聪明，无法为我破坏一段文本，所以我需要“手动”检测每一行。

您可能会做的是[`measureText`](https://developer.mozilla.org/en/Drawing_text_using_a_canvas#measureText%28%29)随后一次添加一个单词。测量第一个单词，如果它适合容器的宽度 ( `ctx2d.measureText(words).width <= containerWidth`)，那么您可以添加另一个单词并再次测量。直到单词串不适合为止。如果没有 - 你必须`fillText`在下一行。

至于手动插入的换行符，它们在 HTML 中专门表示，由textareas 中的`\n`或`\r`字符或 HTML 元素（如`<br \>`. 因此，在测量文本之前，您可能希望将其按段落拆分。

在文本区域中：

```
var paragraphs = textarea.value.split('\n'); 
```

在非表单元素中：

```
var paragraphs = [];

// getting all <p> and elements in a typical HTML element
// as well as individual text nodes (they are just DOM-nodes),
// separated by <br /> elements
var innerNodes = nonFormElement.childNodes;

for (var i = 0, len = innerNodes.length; i += 1) {
    // if a sub-element has some text in it,
    // add the text to our list
    var content = innerNodes[i].textContent;
    if (content) {
        paragraphs.push(content);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:07:22.430

我不确定你想要达到什么目的。但这里有一个简单的技巧，您可以使用它来识别单个单词的位置。看到这个[小提琴](http://jsfiddle.net/NW5jj/)

* * *

```
var $text = $('#text'),
    breaks = [],
    top;

// wrap words (\w+) and punctuation (\S+) [well, non-word and non-space]
// in <spans> we can easily identify
$text.html($text.text().replace(/(\w+|\S+)/g, '<span>$1</span>'));

$text.children().each(function() {
    var $this = $(this),
        _top = $this.position().top;

    if (top === undefined) {
        top = _top;
    } else if (top < _top) {
        top = _top;
        // moved a row down
        breaks.push($this.prev());
        $this.prev().css('color', 'red');
    }
});

console.log(breaks); 
```

# date - VBscript将日期添加到zip文件的名称

> ID：11232797
> 
> 赞同：0
> 
> 时间：2012-06-27T18:32:49.820
> 
> 标签：date, vbscript, zip

我目前有一个脚本，它删除旧的日志文件，然后获取比指定时间范围更新的任何文件，并将它们压缩到一个名为 localhost.zip 的 zip 中。

我想要做的只是将文件压缩时的日期添加到 zip 的名称上。

所以像 localhost_Date.zip 这样的东西。

我知道我需要在“%computername%”之后添加一些东西，但我只是不确定处理它的语法。

感谢您提前提供任何帮助。此外，如果您看到可以对我的脚本进行的任何改进，请告诉我。这几乎只是一个初学者调整在线找到的其他脚本以满足我的需要的工作。

```
Option Explicit

Dim oFSO, oFolder, sDirectoryPath 
Dim oFileCollection, oFile, sDir 
Dim iDaysOld 

' Specify Directory Path From Where You want to clear the old files 

sDirectoryPath = "C:\Testscripts\testfolder\"

' Specify Number of Days Old File to Delete

iDaysOld = 7

Set oFSO = CreateObject("Scripting.FileSystemObject") 
Set oFolder = oFSO.GetFolder(sDirectoryPath) 
Set oFileCollection = oFolder.Files 

For each oFile in oFileCollection

    'Specify the Extension of file that you want to delete 
    'and the number with Number of character in the file extension 

    If LCase(Right(Cstr(oFile.Name), 3)) = "log" Then

        If oFile.DateLastModified < (Date() - iDaysOld) Then 
        oFile.Delete(True) 
        End If 

    End If   
Next 

Set oFSO = Nothing 
Set oFolder = Nothing 
Set oFileCollection = Nothing 
Set oFile = Nothing 

WScript.Echo "Press to start zipping log files."

Dim objFile, objPath, objFolder, Command, PathLogs, RetVal
Dim objFSO: Set objFSO = CreateObject("Scripting.FileSystemObject")
Dim objShell: Set objShell = CreateObject("WScript.Shell")

PathLogs = "C:\Testscripts\testfolder\" 'This path just has some test logs

' Loop through the logs and zip and move each file (if required, you could just move files with an '.log' extension)

Set objPath = objFSO.GetFolder(PathLogs)
For Each objFile In objPath.Files

    If (LCase(objfso.GetExtensionName(objFile)) = "log") Then

        ' zip files

        Command = """C:\Program Files\7-zip\7z.exe"" a " & PathLogs & "%computername%" & ".zip " & PathLogs & objFile.Name 

        RetVal = objShell.Run(Command,0,true)

    End If

Next

WScript.Echo "Zip Successful."

WScript.Echo "Now Moving Zipped Files into Archived Folder"

'move files

Set objFSO = CreateObject("Scripting.FilesystemObject")
objFSO.MoveFile "C:\Testscripts\testfolder\*.zip" , "C:\Testscripts\testfolder\Archived"

WScript.Echo "Move Successful." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:44:08.873

我跳过了血腥的细节，对不起。这是一个两行 VBScript 代码，用于将当前日期格式化为`yyyy-mm-dd`（请记住，`/`文件名中不允许这样做）：

```
Dim d : d = Date()
Dim dateStr : dateStr = Year(d) & "-" & Right("00" & Month(d), 2) & "-" & Right("00" & Day(d), 2)

' Usage
Command = """C:\Program Files\7-zip\7z.exe"" a " & PathLogs & "%computername%" & "-" & dateStr & ".zip " & PathLogs & objFile.Name 
```

除此之外，这一行：

```
If LCase(Right(Cstr(oFile.Name), 3)) = "log" Then 
```

可以写成使用[FSO.GetExtensionName](http://www.devguru.com/technologies/vbscript/quickref/filesystemobject_getextname.html)：

```
If LCase(oFSO.GetExtensionName(oFile.Name)) = "log" Then 
```

# java - 正则表达式拆分没有空格的数字和字母组

> ID：11232801
> 
> 赞同：9
> 
> 时间：2012-06-27T18:32:52.857
> 
> 标签：java, regex

如果我有一个像“11E12C108N”这样的字符串，它是字母组和数字组的串联，如何在没有分隔符空格字符的情况下拆分它们？

例如，我希望得到的拆分为：

```
tokens[0] = "11"
tokens[1] = "E"
tokens[2] = "12"
tokens[3] = "C"
tokens[4] = "108"
tokens[5] = "N" 
```

我现在有这个。

```
public static void main(String[] args) {

    String stringToSplit = "11E12C108N";

    Pattern pattern = Pattern.compile("\\d+\\D+");
    Matcher matcher = pattern.matcher(stringToSplit);

    while (matcher.find()) {
        System.out.println(matcher.group());
    }
} 
```

这给了我：

```
11E
12C
108N 
```

我可以让原始的正则表达式一次性完成拆分吗？而不是必须在中间令牌上再次运行正则表达式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T18:36:17.187

使用以下正则表达式，并获取所有匹配项的列表。那将是您正在寻找的。

```
\d+|\D+ 
```

在 Java 中，我认为代码看起来像这样：

```
Matcher matcher = Pattern.compile("\\d+|\\D+").matcher(theString);
while (matcher.find())
{
    // append matcher.group() to your list
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:54:41.767

您还可以在拆分正则表达式中使用“环顾四周”

```
String stringToSplit = "11E12C108N";
String[] tokens = stringToSplit .split("(?<=\\d)(?=\\D)|(?=\\d)(?<=\\D)");
System.out.println(Arrays.toString(tokens)); 
```

出去 `[11, E, 12, C, 108, N]`

想法是在数字（`\d`）和非数字（`\D`）之间的位置进行拆分。换句话说，地方（空字符串）具有：

*   之前`(?<=\d)`的数字和之后的非数字`(?=\D)`
*   之前的非数字`(?<=\D)`和之后的数字`(?=\d)`

[您可以在http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)找到有关`(?<=..)`和`(?=..)`（以及更多）的更多信息

# c# - 在 .NET MVC 中，是否有一种简单的方法可以检查我是否在主页上？

> ID：11232802
> 
> 赞同：11
> 
> 时间：2012-06-27T18:32:58.640
> 
> 标签：c#, asp.net-mvc, razor

如果用户从主页登录，我需要采取特定操作。在我的 LogOnModel 中，我有一个隐藏字段：

```
@Html.Hidden("returnUrl", Request.Url.AbsoluteUri) 
```

在我的控制器中，我需要检查该值是否是主页。在下面的示例中，我正在检查用户是否在特定页面上（“帐户/重置密码”）。有没有办法在不使用正则表达式的情况下检查它们是否在主页上？

```
 [HttpPost]
    public ActionResult LogOnInt(LogOnModel model)
    {
       if (model.returnUrl.Contains("/Account/ResetPassword"))
       {
          return Json(new { redirectToUrl = @Url.Action("Index","Home")});
       } 
```

有任何想法吗？一百万谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T21:00:52.887

解决此问题的一种方法是在`RouteData`. 假设您用于主页的控制器称为“HomeController”，则`RouteData`请求的“控制器”键将包含值“Home”。

它看起来像这样：

而不是（或者除了你有其他原因之外）：

```
 @Html.Hidden("returnUrl", Request.Url.AbsoluteUri) 
```

你将会拥有：

```
 @Html.Hidden("referrer", Request.RequestContext.RouteData.Values['Controller']) 
```

你的控制器看起来像：

```
[HttpPost]
public ActionResult LogOnInt(LogOnModel model)
{
   if (model.referrer = "Home")
   {
      return Json(new { redirectToUrl = @Url.Action("Index","Home")});
   }
 } 
```

这将消除使用`.Contains()`

***更新***：

`Request.UrlReferrer.AbsoluteUri`您还可以通过将引荐来源网址 ( ) 映射到路由来消除对隐藏字段的需求（从而减少应用程序中每个页面的整体页面重量）。这里有一篇关于这个的帖子。

[如何通过 URL 获取 RouteData？](https://stackoverflow.com/q/3545432/1108562)

这个想法是使用 mvc 引擎将引用 url 映射到`LogOnInt`方法中的 MVC 路由，从而允许代码完全自包含。

这可能比将控制器名称和动作名称放在那里让全世界看到以及脚本将其推回服务器更干净。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T21:12:50.633

您可以通过以下方式获取当前 URL

```
string controller = (string)ViewContext.RouteData.Values["controller"];
string action = (string)ViewContext.RouteData.Values["action"];
string url = Url.Action(action, controller); 
```

您可以在 HtmlHelper 或呈现登录视图的控制器中执行此操作。

像您一样存储`url`在隐藏字段中，然后在您的发布操作中：

```
[HttpPost]
public ActionResult LogOnInt(LogOnModel model)
{
   // Create your home URL
   string homeUrl = Url.Action("Index", "Home");
   if (model.referrer == homeUrl)
   {
      return Json(new { redirectToUrl = @Url.Action("Index","Home")});
   }
 } 
```

使用的好处`Url.Action`是它将使用您的路由表来生成 URL，这意味着如果您的路由发生变化，您将不必更改此代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T21:17:20.710

在任何视图中，以下代码都会返回当前控制器名称。

```
@ViewContext.Controller.ValueProvider.GetValue("controller").RawValue.ToString() 
```

够容易吗？:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:37:01.667

你可以使用

```
 Request.Url.AbsoluteUri 
```

然后只需检查页面名称的字符串。

可能不是最好的方法，但它是一种快速简便的方法。

我从这个页面得到了那个方法：

[如何在 MVC 3 中获取当前页面 URL](https://stackoverflow.com/questions/5304782/how-to-get-current-page-url-in-mvc-3)

那里还有另一个可能对您有用的答案。

# javascript - 对 Expressjs / Nodejs 请求感到困惑 - 响应处理

> ID：11232803
> 
> 赞同：1
> 
> 时间：2012-06-27T18:33:02.923
> 
> 标签：javascript, node.js, express, dom-events

好吧 - 我读得越多，我就越困惑。所以这里的来源：

```
var express = require('express')
  , http = require('http')
  , server = express()
  ;

var home = require('./routes/home.js')
  , about = require('./routes/about.js')
  , contact = require('./routes/contact.js');

  server.configure(function () {
  server.set('port', process.env.PORT || 3000);
  server.set('view engine', 'hjs');
  server.set('views', __dirname + '/views');
  server.use(express.logger());
  server.use(server.router);
  server.use(express.favicon());
  server.use(require('stylus').middleware(__dirname + '/public'));
  server.use(express.static(__dirname + '/public'));
  server.use(express.bodyParser());
  server.use(express.cookieParser('your secret here'));
  server.use(express.methodOverride());
  server.use(express.session());
});

server.get('*', function (req, res) {
  switch (req.path) {

    case '/':
      res.render('home', { title:'Home Page' });
      break;

    case '/about/':
      res.render('home', { title:'About Page' });
      break;

    case '/contact/':
      res.render('contact', { title:'Contact Page' });
      break;

    default:
      res.render('home', { title:'404 - Page not found'});
  }
}); 
```

好吧，它正在工作，但我仍然没有将那个 req/res 组合放入我的头骨。我很确定我不需要`'*'`那里作为参数。但是我不知道如何建立更好的解决方案。任何简单的愚蠢愚蠢的例子，所以我可以想象魔法是如何运作的。

为了简化我的谜语，我想知道（并理解）为什么会这样：

```
server.get('*', function (req, res) { 
```

但这不是

```
server.get(function (req, res) { 
```

第一个参数总是被处理为究竟是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:11:08.160

我相信第一个参数是路线。您可以将代码分解为以下可能更有意义的代码，并遵循约定：

```
server.get('/', function (req, res) {
    res.render('home', { title:'Home Page' });
})

server.get('/contact/', function (req, res) {
    res.render('contact', { title:'Contact Page' });
});

server.get('*', function (req, res) {
    res.render('Page Not Found', 404);
}); 
```

等等……

`'*'`您正在使用的只是接受所有路线。类似于通配符！

# postgresql - 在 Postgresql 中如何在保持自定义日期格式的同时按日期排序

> ID：11232804
> 
> 赞同：3
> 
> 时间：2012-06-27T18:33:22.413
> 
> 标签：postgresql, date, formatting, sql-order-by

问题是使用 to_char 会将按日期的顺序转换为按 ascii 的顺序。例子：

```
SELECT foo, bar FROM baz ORDER BY foo; 
```

我想使用 to_char 格式化 foo，但是这样做会影响顺序：

```
SELECT to_char(foo,'dd/MM/yyyy') as foo, bar FROM baz ORDER BY foo; 
```

因为 foo 现在是文本类型。有办法正确地做到这一点吗？还是只在代码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T22:36:25.660

正确而简单的解决方案是：

```
SELECT to_char(b.foo,'dd/MM/yyyy') as foo, b.bar
FROM   baz b
ORDER  BY b.foo; 
```

格式化日期列`foo`是查询计划器的全新列，恰好与表列冲突`foo`。在 ORDER BY 和 GROUP BY 子句中，输出列的名称优先于表列。非限定名称`foo`将引用输出列。

要在 ORDER BY 子句中使用原始表列，只需**对列进行表限定**。

我对所有表格列进行了表格限定以阐明我的观点。在这种情况下，仅在 ORDER BY 子句中需要。表别名`b`只是为了方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:36:58.387

您可以为格式化的列使用不同的别名：

```
SELECT to_char(foo,'dd/MM/yyyy') as formatted_foo, 
       bar 
FROM baz 
ORDER BY foo; 
```

作为替代方案，如果您需要保留 foo 别名：

```
select foo,
       bar
from (
  SELECT to_char(foo,'dd/MM/yyyy') as foo,
         foo as foo_date 
         bar 
  FROM baz 
) t
order by foo_date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T22:09:13.413

出什么问题了

```
SELECT foo AS foo_date, to_char(foo,'dd/MM/yyyy') AS foo, bar 
FROM baz 
ORDER BY foo_date; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T21:32:14.663

不拉 foo 两次的替代方法是：

```
SELECT
  to_char(foo,'dd/MM/yyyy') AS foo -- Alias precedes original column name
  ,bar
FROM
  baz
ORDER BY
  CAST(foo AS DATE) -- Explicit cast ensures date order instead of text
; 
```

其原生 PostgreSQL 版本将是：

```
SELECT
  to_char(foo,'dd/MM/yyyy') AS foo -- Alias precedes original column name
  ,bar
FROM
  baz
ORDER BY
  foo::DATE -- Explicit cast ensures date order instead of text
; 
```

# selenium - XPath Selenium 无效的 xpath [2]

> ID：11232810
> 
> 赞同：-1
> 
> 时间：2012-06-27T18:33:40.293
> 
> 标签：selenium, selenium-rc, xpath

我正在使用硒进行闪光测试。我想获得`id`一个嵌入标签。我使用 firepath 来获取 xapth，它看起来像`html/body/div[1]/div[6]/div/embed`

当我试图检索它时

```
browser.getAttribute(("xpath=//[html/body/div[1]/div[6]/div/embed]")); 
```

然后我得到`com.thoughtworks.selenium.SeleniumException: ERROR: Invalid xpath [2]: //*[html/body/div[2]/div[6]/object/embedd`

我正在使用硒 2 RC。请任何人帮助获取`id`嵌入标签内的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:58:54.527

在我看来，您使用 getAttribute 不正确。Selenium 的`getAttribute`方法将attributeLocator 作为其参数。正如文档所描述的，属性定位器是一个元素定位器（在本例中为您的 xpath），后跟“@”和属性名称（在本例中为 id）。

尝试

```
String xpath = "xpath=//[html/body/div[1]/div[6]/div/embed]";
browser.getAttribute(xpath+"@id"); 
```

还要仔细检查您的代码。你在你写的代码中说，`div[1]`但错误说`div[2]`- 你可能只是打错了。这可以解释 xpath 错误，尽管您仍然需要更正对 getAttribute 的使用。

[硒 getAttribute 文档。](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/java/com/thoughtworks/selenium/Selenium.html#getAttribute%28java.lang.String%29 "获取属性文档")

# javascript - jQuery - 全局变量

> ID：11232814
> 
> 赞同：1
> 
> 时间：2012-06-27T18:34:09.043
> 
> 标签：javascript, jquery

我正在尝试在不同的函数中使用变量，我想设置*全局*变量。有没有办法怎么做？

我想要这样的东西：

```
$('.bar1').animate({'height':'10' + "%"},1500, function() {  
    var bar1_height = $(".bar1").height() * 0.5;  
}); 
```

然后`bar1_height`在别处使用变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T18:34:51.460

`bar_height`在你的函数之外声明。

```
var bar1_height;
$('.bar1').animate({'height':'10' + "%"},1500, function() {
    bar1_height = $(".bar1").height() * 0.5;
}); 
```

这将允许您在全局范围内访问它（即在您的函数内部和外部）。

来自[MDN](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Variable_scope)：

> 当您在任何函数之外声明变量时，它被称为全局变量，因为它可用于当前文档中的任何其他代码。在函数中声明变量时，它称为局部变量，因为它仅在该函数中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:35:24.370

```
$('.bar1').animate({'height':'10' + "%"},1500, function() {  
    window.bar1_height = $(".bar1").height() * 0.5;  
}); 
```

完毕。

或者更理想的方式

```
var bar1_height;
$('.bar1').animate({'height':'10' + "%"},1500, function() {  
    bar1_height = $(".bar1").height() * 0.5;  
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:48:56.543

javascript最*糟糕*的方面之一是[隐含的全局范围](https://stackoverflow.com/questions/4909578/what-are-some-of-the-problems-of-implied-global-variables)。您可以通过删除`var`关键字来使变量全局化：

```
$('.bar1').animate({'height':'10' + "%"},1500, function() {  
   bar1_height = $(".bar1").height() * 0.5;  
}); 
```

但这被认为是[非常](http://oreilly.com/javascript/excerpts/javascript-good-parts/awful-parts.html) [糟糕的](http://javascript.crockford.com/code.html#variable%20declarations) [做法](https://developer.mozilla.org/en/JavaScript/Strict_mode#Converting_mistakes_into_errors)。例如：

```
var getAddress = function(street, city, country) {
    location = street + ', ' + city + ', ' + country;
    return location;
}
getAddress('Holborn', 'London', 'England'); 
```

你能发现可怕的错误吗？[js小提琴](http://jsfiddle.net/RichardTowers/HztV8/)。

你真的应该在尽可能窄的范围内声明你的变量，否则你最终会得到一团混乱的全局变量。如果您在函数内部和外部都需要一个变量，您应该简单地在外部范围内声明它（正如其他答案所说）：

```
(function () {
    var bar1_height;

    $('.bar1').animate({'height':'10' + "%"},1500, function() {
        // Use variable from outer scope  
        bar1_height = $(".bar1").height() * 0.5; 
    }); 

    // Variable still has its value here
    alert(bar1_height);
})(); 
```

（这里神秘的外层功能是*防止*变量成为真正的全局变量。）

我发现[这篇博文](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)对于理解有关变量范围的最佳实践非常有用。

# java - 无法*正确地写入 java 文件*

> ID：11232821
> 
> 赞同：0
> 
> 时间：2012-06-27T18:34:18.913
> 
> 标签：java, file-io

我必须阅读一个文本文件并根据一些逻辑对文件进行一些更改。所以我正在使用逐行读取文件

```
 while ( (temp_string = inputstream.readLine()) != null )
 {
    /*after employing some other logic*/
    outputstream.write(temp_string);
    outputstream.flush();
} 
```

其中 temp_string 是一个字符串，输入流的声明是：

```
BufferedReader inputstream  = new BufferedReader(new FileReader(pathtosilentfile)); 
```

并且声明`outputstream`是：

```
BufferedWriter outputstream = new BufferedWriter(new FileWriter(pathtooutputfile)); 
```

但是当我写入文本文件（新文件）时，有很多垃圾，在记事本++上显示为 NULL。此外，写入的数据在记事本或写字板中看起来还不错。那么这是某种编码错误吗？我不明白！怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:38:59.243

一方面，您正在阅读行而不是写任何换行符。`temp_string`不包含任何换行符/换行符。尽管这似乎不是您遇到的唯一问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:37:59.680

如果您告诉我们是什么，那真的会有所帮助`output_stream`-但它*应该*是`Writer`某种描述-可能是`OutputStreamWriter`包裹在 a 周围`FileStream`，指定适当的编码（我猜这取决于您）。

如果它在记事本/写字板中看起来不错，但在 Notepad++ 中损坏了，则可能*是*编码问题，但您应该决定使用哪种编码。UTF-8 通常是一个不错的选择（ASCII 紧凑，涵盖整个 Unicode，被广泛支持），但这取决于读取文件的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:43:43.570

开头的负载`NULL`意味着您​​开始写入文件的中间而不是开头。记事本/写字板简单地忽略这一点，但您的文件将比您想要的大得多，并且在读入其他文件时可能会导致问题。

但是，由于在您开始写作之前我们不知道`outputstream`它是什么或对它做了什么，我们无法为您提供帮助。

# ios - 更改从 UIPickerView 中选择的 NSURL

> ID：11232822
> 
> 赞同：1
> 
> 时间：2012-06-27T18:34:22.860
> 
> 标签：ios, uipickerview, feed, nsurl

在我的应用程序中，我将“提要链接”加载到 tableView 中。它运作良好。但现在我需要使用`UIPickerView`.

在我`viewDidLoad`有这个代码用于将提要项加载到`tableview`.

第一次效果很好。

```
// Parse
feedURL = [NSURL URLWithString:FEEDSFULLPAGE];

feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL];
feedParser.delegate = self;
feedParser.feedParseType = ParseTypeFull; // Parse feed info and all items
feedParser.connectionType = ConnectionTypeAsynchronously;
[feedParser parse]; 
```

使用此代码，我`UIPickerView`从`UIBarButtonItem`导航栏上调用：

```
- (void) showPicker:(id)sender {

self.tableView.scrollEnabled = false;
categorie.enabled = NO;

UIColor *myColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];
rect = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
[rect setBackgroundColor:myColor];
[self.view addSubview:rect];

pickerviewToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 542, 320, 40)];
pickerviewToolbar.barStyle = UIBarStyleBlackTranslucent;
pickerviewToolbar.tintColor = nil;
[pickerviewToolbar sizeToFit];

UIBarButtonItem *cancelButton = [[[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(AnnullaPickerView)] autorelease];

UIBarButtonItem *flexSpace = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil] autorelease];

UIBarButtonItem *doneButton = [[[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(categoriaSelezionata:)] autorelease];

[pickerviewToolbar setItems:[NSArray arrayWithObjects:cancelButton, flexSpace, doneButton,  nil]];

pickerView.delegate = self;
pickerView.showsSelectionIndicator = YES;    // note this is default to NO

// Add the picker
pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0,585,0,0)];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
CGAffineTransform transform = CGAffineTransformMakeTranslation(0, -400);
pickerView.transform = transform;
pickerviewToolbar.transform = transform;

[self.view addSubview:pickerView];
[self.view addSubview:pickerviewToolbar];

[UIView commitAnimations];

[pickerView release];
[pickerviewToolbar release];
} 
```

Now when one row of UIPIckerView is selected I do this:

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

if ([[dataArray objectAtIndex:row] isEqual:@"Ultime"]) {

    feedURL = [NSURL URLWithString:@"http://www.tarantocrasbasket.com/index.php?option=com_ninjarsssyndicator&feed_id=8&format=raw"];

    NSLog(@"You selected this: %@", [dataArray objectAtIndex: row]);
    NSLog(@"Ultime: %@", feedURL);

} } 
```

最后当我点击完成按钮时`UIPickerView`：

```
-(void) categoriaSelezionata:(id)sender {

self.tableView.scrollEnabled = true;
categorie.enabled = YES;
[rect removeFromSuperview];
[pickerView removeFromSuperview];
[pickerviewToolbar removeFromSuperview];
[self refresh]; } 
```

我调用函数“刷新”来解析来自新链接的新项目，但应用程序崩溃了！

如果我放一个 NSLog 来查看链接是否正确，它也会崩溃。

Xcode 错误是：

> EXC_BAD_ACCESS（代码=2，地址=0xf）

为什么这不起作用？

# javascript - 对象构造函数 - 获取实例变量的名称

> ID：11232826
> 
> 赞同：2
> 
> 时间：2012-06-27T18:34:33.670
> 
> 标签：javascript, oop

我将一个名为的 JavaScript 对象放在一起，该对象`ListBox`接受一个二维数组，并将其输出到具有固定列标题、可滚动内容的表中，并可通过单击列标题进行排序。为了让 HTML 包含调用对象自己的方法的事件处理程序，对象需要知道自己的实例变量名称，例如....

```
var MyList = new ListBox(); 
```

设置列和内容后，适当的方法将生成 HTML...

```
...
<td class="ListBox_ColumnTitle" onclick="MyList.SortByColumn(1)">...</td>
... 
```

通过在 stackoverflow 上搜索，我找到了以下代码，并对其稍作修改，以便找到正确的对象实例：

```
for (var v in window) {
    try {
        if (window[v] instanceof ListBox) { InstanceName = v; break; }
        }
    catch (e) { }
    } 
```

然而，这在构造函数中不起作用——它根本找不到实例。之后它工作得很好，但我希望能够在构造函数中做到这一点，以使使用 ListBox 的代码更简单——这可能吗？

我也意识到将变量名作为构造函数的参数传递会更简单，但如果可以的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:46:21.903

您可以通过在脚本中绑定事件而不输出`onclick`属性来完全避免这个问题。

```
function ListBox() {
    var that = this;

    // do your existing stuff

    var element = ...; // whatever you're currently doing to create the html
    element.onclick = function () {
        that.SortByColumn(1);
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:49:37.637

**不要这样做。永远不要尝试[获取变量的名称](https://stackoverflow.com/a/9798053/1048572)。**

相反，您应该使用对象和对它们的引用。您不应该生成 HTML（字符串），而是生成 DOM 元素（对象）。您可以轻松地将函数作为事件侦听器分配给它们，只有您可以在您的范围内访问。

# java - 静态工厂方法是使用 Spring 将运行时值传递给原型构造函数的唯一方法吗？

> ID：11232827
> 
> 赞同：0
> 
> 时间：2012-06-27T18:34:33.983
> 
> 标签：java, spring, spring-3

我有一个对象被限定为原型，并且构造函数参数值是在运行时确定的。在我看来，我必须使用静态工厂方法来构造这个原型的实例。这是真的吗，我可以在文档中的什么地方找到它说明这个事实？我找不到任何讨论在运行时确定的构造函数值或引用。所有样本在启动时都有明确定义的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:41:26.937

基本上需要做的是：

```
applicationContext.getBean("beanName", new Object[]{arg1, arg2, arg3});

<bean id="beanName" class="my.package.className" scope="prototype">
  <constructor-arg index="0" type="java.lang.String" value=""/>
  //etc
</bean> 
```

如果您的类在其他方面没有弹簧，并且您不希望 applicationContext 依赖项弄乱它们，那么工厂方法可能是可取的。

您还可以使用方法替换来隔离与弹簧相关的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:06:23.893

签出[`lookup-method`（4.4.6.1 查找方法注入）](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection%5d)。目前它不支持将参数传递给新创建的原型 bean，但这[很快就会成为可能](https://jira.springsource.org/browse/SPR-7431)。

# wordpress - 在 Chrome 中的图像顶部显示“提交”的图像按钮

> ID：11232836
> 
> 赞同：0
> 
> 时间：2012-06-27T18:35:13.650
> 
> 标签：wordpress, button, submit

我有一个类似于[这个人的](https://stackoverflow.com/questions/8977520/image-button-displaying-submit-query-over-the-top-of-image-in-firefox)问题，但它发生在 Chrome 中。

值设置为 =“”，因此 Firefox 问题的修复已经在发挥作用。这仅发生在 Chrome 中，而不发生在 Firefox 中。我通过 Wordpress 搜索表单主题的代码如下：

```
<form method="get" class="searchBox" action="<?php bloginfo('url'); ?>">

<div id="search-form-wrap">

    <input type="text" id="searchBox" name="s" value="" accesskey="4" />

    <input type="image" name="submit" id="searchsubmit" class="nothidden" value="" />

    <?php if ( get_option('k2livesearch') ): ?>

    <?php endif; ?>

<span id="searchreset" title="<?php esc_attr_e('Reset Search', 'k2_domain'); ?>"></span>

        <span id="searchload"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T23:12:05.223

抱歉迟到了，但一个好的答案可能对所有想要提交图片的人都有帮助......

好吧，我想说为什么不尝试使用真正的提交类型和一些 CSS，例如我下面的示例，也许它没有按照您要求的方式解决，但我相信这是解决您的问题的最佳方法，它将是 W3C 有效的，它将在所有浏览器中工作没有更好的方法来处理图像所以我恳请你尝试我提供的代码，我希望你会喜欢我这样做的方式......

您的提交行是：

```
<input type="image" name="submit" id="searchsubmit" class="nothidden" value="" /> 
```

将其更改为真正的提交按钮：

```
<input class="nothidden" type="submit" name="submit" id="searchsubmit" value="Your value" /><!--// Add the style below and edit if needed to your style.css file to create what you want! //--> 
```

那么现在你会说“我不想要一个奇怪的标准提交按钮！” 并且我同意！这就是为什么使用下面的样式，CSS 将帮助我们使用提交类型的图像，所以请阅读下面我的 CSS...

> 您没有发布您的 css 行，所以我无法为您的项目编写最好的 css，但我希望我的回答会有所帮助。

```
 input.nothidden {
border-style: none; /** This is needed to remove borders! **/
display: block;
font-size: 11px; /** Define your font size **/
font-weight: bold; /** Define your font weight **/
height: 23px !important; /** Height of your image **/
/** padding: 4px 0 0; - add some padding if needed... **/
text-align: center; /** Where do you want the text? left, right or center?**/
text-decoration: none; /** Don't want a underline or other decorations? **/
width: 91px; /** Width of your image **/
background: url(http://www.hollandiateam.eu/plaatjes/purple_small.gif) no-repeat scroll 0 0 transparent; /** This is what you want! a image to submit your form and don't  use any javascript, W3C validation and no problems in firefox, Chrome and Internet Explorer! **/
border: none;  /** This is needed to remove image border! **/
color: #080808; /** This is the text color change it to your favorite color **/
} /** The css lines below if you want a hover image sprite or an other hover image, colors etc! **/
   /** use the css below if you would like to have hover changes! **/
input.nothidden:hover {
background-position: 0 -23px; /** example if you're using a sprite image, else use background: url(http://www.hollandiateam.eu/plaatjes/purple_small.gif) no-repeat scroll 0 0 transparent; with the path to your image, if you want to use hover and don't use sprites, you will need to add all css lines used by the input.nothidden class and change image url for hover... **/
color: #0000ff; /** hover text color **/
} 
```

如果您使用上述代码，它将适用于所有浏览器，如果您无法使其正常工作，请发布您的 css 和表单代码，我将根据您的需要编辑我的答案。

快乐编码

〜威廉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T05:54:32.573

在您的 CSS 中添加以下内容：

```
.nothidden {
text-indent: -9999px;
} 
```

这将隐藏文本（如果有）。

# python - 使用 savez 保存 numpy 数组时可以对其进行注释吗

> ID：11232844
> 
> 赞同：5
> 
> 时间：2012-06-27T18:35:30.663
> 
> 标签：python, numpy

假设我的程序创建了一个大型数据数组，然后我使用 numpy 的 savez 例程保存这些数据。但是，我还想将一些附加信息与该数组一起存储。示例是当前版本的 git commit id，以及用于生成数据的输入参数，以便稍后我可以查看数据并确切知道我是如何创建它的。

有没有办法将此信息与数组一起直接保存在 npz 文件中，还是我必须创建一个单独的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T19:01:11.757

简而言之，你可以（`.npz`只是一个腌制的字典），但你最好换成别的东西。（看起来@JoshAdel 刚刚发布了一个很好的例子，如果你想坚持的话`.npz`。）

对于这样的事情，HDF 是一个更好的选择。

hdf 文件中的每个组或数据集都可以存储属性。

我建议`h5py`将 numpy 数组存储在 hdf 文件中。

举个例子：

```
import numpy as np
import h5py

somearray = np.random.random(100)

f = h5py.File('test.hdf', 'w')

dataset = f.create_dataset('my_data', data=somearray)

# Store attributes about your dataset using dictionary-like access
dataset.attrs['git id'] = 'yay this is a string'

f.close() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T18:55:52.600

你应该能够：

```
In [2]: a = np.arange(10)

In [3]: b = 'git push'

In [5]: np.savez('file',a=a,b=b)

In [7]: data = np.load('file.npz')

In [8]: data.keys()
Out[8]: ['a', 'b']

In [9]: data['a']
Out[9]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

In [10]: str(data['b'])
Out[10]: 'git push' 
```

因此，您可以保存任意命名数据并获取类似字典的对象。使用 h5py 或 pytables 的 hdf5 可能是一种更好的格式，它可能更灵活并且内置了对各种元数据的支持：

[http://h5py.alfven.org/docs/](http://h5py.alfven.org/docs/)

[http://www.pytables.org/](http://www.pytables.org/)

# asp.net - 将 ~ 添加到相对 url

> ID：11232845
> 
> 赞同：0
> 
> 时间：2012-06-27T18:35:35.240
> 
> 标签：asp.net, html

我在我的项目中使用了一些相对 url `<img src="../images/portal_header.jpg" .../>`，但我们的顾问坚持要求我将每个 url 更改为`~/images/...`，并且因为它们是 html 控件，我必须`runat="server"`为每个添加标签，所以我的问题是有必要吗？我有几个母版页，它使所有 js 链接和 css 链接都无法访问。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:40:01.630

控件可以存在于任何子文件夹中，并被许多不同子文件夹中的许多不同页面引用。 `../`并非在所有情况下都有效。

因此，您应该解析 URL：

```
ResolveUrl("~/images/myimage.jpg") 
```

而且，不，您不必添加`runat="server"`，您可以这样做：

```
<img src="<% =ResolveUrl("~/images/portal_header.jpg") %>" .../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:40:56.850

这很大程度上取决于上下文。只要依赖资源的位置不会发生变化，使用相对 URL 就可以正常工作。将所有图像标签转换为控件确实为您提供了使用“~”（App Root）的好处，但它也增加了服务器处理的开销。

您的顾问可能会试图保护您免受常见问题的影响。您的所有相关链接在开发中都可以正常工作（“http://localhost/site”），但在您进入生产环境时会中断（“http://www.yourdomain.com/somelocation/”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:42:41.540

不确定您使用的是哪个 ASP 版本，但我使用`@Url.Content("~/relativepath")`MVC3 w/Razor 用于 ASP4

或者`<img src="@Url.Content("~/relativepath")" alt="" />`

# php - 从另一个 php 文件访问 SESSION 变量

> ID：11232848
> 
> 赞同：1
> 
> 时间：2012-06-27T18:35:46.440
> 
> 标签：php, session, session-variables

我想访问我在另一个 php 文件中声明的会话变量。

我怎样才能做到这一点？

这就是我所做的。

测试.php

```
$_SESSION['SESS_VERSION'] = $member['Version'];
session_write_close();
header('location: '.$_SESSION['SESS_VERSION']); 
```

这个会话变量正在工作，我被正确地重定向到另一个页面。

例如在该页面上：

```
test2.php 
```

我正在从 javascript 调用一个 php 脚本来返回一个 JSON 格式的数据。

我在该`test3.php`脚本中尝试做的是从`test.php`

这是代码：

```
<?php
header("Content-type: application/json; charset=UTF-8");

echo '{ "results" : [ ';

$result = dbMySql::Exec("SELECT 
    m.data1
    v.data2,
    k.data3
FROM {$_SESSION['SESS_MAIN_BASE']} m, {$_SESSION['SESS_SECOND_BASE']} v, {$_SESSION['SESS_THIRD_BASE']} k");
$result_array = array();
?> 
```

为什么我无法访问此 php 页面上的任何会话变量？也许我的语法不正确。但这是我得到的错误：

```
Warning: Cannot modify header information - headers already sent 
```

当然，变量为空的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:41:02.227

你需要

> session_start()

在每个 php 脚本的顶部，否则 session 变量在 php 文件中毫无意义。

Also you are getting the Cannot Modify header error because you have

> Here's the code:

being sent to the browser before the headers, move all header functions before any content

# javascript - 如何制作具有一组以上类型的猫鼬模式？

> ID：11232850
> 
> 赞同：0
> 
> 时间：2012-06-27T18:35:53.803
> 
> 标签：javascript, node.js, mongodb, mongoose

所以我有一个关于人和团体的模式。我想让一个人与一个或多个人或团体相关联成为可能。到目前为止，我有这个：

```
var PersonSchema = new Schema({
    name    : String,
});
var PersonModel = mongoose.model('Person', PersonSchema);

var GroupSchema = new Schema({
    name    : String,
    members : [PersonSchema]
});
var GroupModel = mongoose.model('Group', GroupSchema); 
```

如何向 PersonSchema 添加一组一个或多个组和/或其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:28:37.087

假设您的数据库中同时拥有`Persons`和`Groups`基于此的集合，您可以将 ObjectId 引用数组添加到 PersonSchema 以捕获一个人与其他人或组的关系。如：

```
var PersonSchema = new Schema({
    name    : String,
    people: [{ type: Schema.ObjectId, ref: 'Person' }],
    groups: [{ type: Schema.ObjectId, ref: 'Group' }]
}); 
```

然后，您可以[`populate`](http://mongoosejs.com/docs/populate.html)在需要完整详细信息时使用 mongoose 的支持来关注这些参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:03:40.563

您可以定义如下：

```
var Relation = new mongoose.Schema({
RelationType:String, RefObjId: String //You can also take Schema.ObjectId 
});

var PersonObj = new mongoose.Schema({
name: String,
OtherDetails: String,
RefObjDetails:[Relation]
}); 
```

例子：

A (_id:100) Person 与 B (_id:200) Person 和组 MyGroup (_id:333) 相关。

JSON 将如下所示：

```
{
 '_id':'100',
 'name': 'A',
 'OtherDetails': '',
 'RefObjDetails':[{'RelationType':'P', RefObjId:'200'},{'RelationType':'G', RefObjId:'333'}]
} 
```

# css - CSS 为 标签

> ID：11232852
> 
> 赞同：1
> 
> 时间：2012-06-27T18:36:00.290
> 
> 标签：css

我有一个带有三个选项卡的选项卡面板。下面是我通过“FIREBUG”获得的代码，并注意到只有一个呈现为的选项卡`<LI>`有一个类，其余两个选项卡没有它。有吗无论如何，如果我在 Mozilla Firebug 中进行一些更改，它将永远反映在实际的 asp.net 代码中。

```
<ul id="ext-gen59" class="x-tab-strip x-tab-strip-top">
<li id="tbGrid__pnlMain" class=" x-tab-strip-active">
<li id="tbGrid__pnlArticles" class="">
<li id="tbGrid__pnlCalendar" class="">
<li id="ext-gen60" class="x-tab-edge">
<div id="ext-gen61" class="x-clear"></div>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:40:38.727

Firebug 无法编辑您的代码——它只能在页面加载后修改页面。它是一个调试工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:44:24.043

您的代码没有结束`li`标记...

你的代码可能是

```
<ul id="ext-gen59" class="x-tab-strip x-tab-strip-top">
<li id="tbGrid__pnlMain" class=" x-tab-strip-active"></li>
<li id="tbGrid__pnlArticles" class=""></li>
<li id="tbGrid__pnlCalendar" class=""></li>
<li id="ext-gen60" class="x-tab-edge">
    <div id="ext-gen61" class="x-clear"></div>
</li>
</ul> 
```

希望这可以帮助....

# android - C2DM 到 Google 云消息传递 (GCM)

> ID：11232853
> 
> 赞同：13
> 
> 时间：2012-06-27T18:36:10.610
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

您可能已经看到，Google 正在迁移其推送通知系统。

[GCM 谷歌开发者指南](http://developer.android.com/guide/google/gcm/c2dm.html)

我想我不是一个人想知道：从 C2DM 获得的令牌对 GCM 仍然有效吗？

如果没有，这意味着我需要我的所有用户使用更新我服务器上的令牌的新版本来更新我的应用程序......

或者

我可以保留并行系统，但我认为这不是一个好的解决方案

或者

继续使用 C2DM 直到它完成，然后我就死了:-)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T17:44:00.753

尽管客户端迁移很容易（只需将“发件人”从电子邮件地址更改为项目 id），但如果您的应用程序使用 C2DM 一段时间，您仍然会面临转换问题。在此处查看我的问题：[将 GCM 通知发布到现有 C2DM 注册 ID](https://stackoverflow.com/q/11237289/401082)

基本上问题出在过渡期间，您需要维护来自旧 C2DM 应用程序的设备注册 ID，以及来自使用 GCM 的较新应用程序的新注册 ID。除非您可以强制所有用户一次全部升级，否则您必须在服务器中构建额外的逻辑（即在数据库表中添加一个新列以指示 GCM reg id）来处理向 C2DM 和 GCM 发送通知的时间。可以预见的将来。

如果您的服务器只向所有设备发送通知，那么这应该很容易迁移，因为您可以将 C2DM 和 GCM 通知发送到数据库中的所有设备，并从旧的 C2DM 注册中逐步删除陈旧或未注册的设备。随着时间的推移，您应该会在数据库中看到越来越少的 C2DM 设备注册 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T02:37:13.447

我已将我的应用程序从 C2DM 迁移到 GCM。不，我不应该说迁移。C2DM 和 GCM 的正确术语是“共存”。因为我不能强制所有当前用户升级到 GCM。我的目标是确保新用户（参考 GCM）和现有用户（参考 C2DM）都能够获得推送消息。

对于客户端：

1.  将发件人更改为项目 ID

对于服务器端：

1.  在 db 中添加一个新列来存储 GCM 注册 ID。
2.  如果用户使用 gcm 注册 ID 记录 > 然后推送到 gcm 服务器 > 否则 c2dm 服务器

到目前为止，我能够实现我的反对意见。但我唯一担心的是，c2dm 何时会完全关闭？如果这一天真的来了，我想如何强迫我的老用户升级到 gcm？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:15:09.447

Android 开发者文档站点上有一个[迁移指南。](http://developer.android.com/google/gcm/c2dm.html)

C2DM 会继续给予支持一段时间，最好在 GCM 中迁移我们的应用程序并发布我们应用程序的更新版本。（根据我的想法）

# ruby-on-rails - 单个 has_many 关联的 Rails 表单：无法编辑所有实例

> ID：11232854
> 
> 赞同：0
> 
> 时间：2012-06-27T18:36:14.333
> 
> 标签：ruby-on-rails

我正在制作一个博客应用程序。我的`Post`模型`has_many :revisions`（您所做的每次编辑都会修改一次）。

我的`Post`模型`accepts_nested_attributes_for :revisions`

防止用户编辑所有内容的最佳方法是什么`revisions`（`post`他们可以通过破解表单来做到这一点）？

```
= simple_form_for @post do |f|
    = f.error_notification

    = f.simple_fields_for :revisions, @revision do |r|
        = r.input :title
        = r.input :body 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:39:42.710

您可以将一个名为 :reject_if 的选项传递给 Accept_nested_attributes_for，如下所示：

```
accepts_nested_attributes_for :revisions, :reject_if => proc { |attributes| attributes['name'].blank? } 
```

在选项中传递的 proc 中，您可以指定附加条件，根据这些条件可以编辑修订。

# java - 如何从 Java ArrayList 中删除重复的对象？

> ID：11232857
> 
> 赞同：1
> 
> 时间：2012-06-27T18:36:30.587
> 
> 标签：java, object, collections, arraylist, duplicates

对于我无法摆脱的情况，我需要一些示例代码的帮助。我有一个简单的对象列表。我的课是这样的：

```
class MyClass {
    String str;
    Integer intgr;
} 
```

该列表包含以下元素：

```
[{a1  5}, {b2  3}, {g1  1}, {b5  1}, {c9  11}, {g2  3}, {d1  4}, {b3  19}... ... ...] 
```

我需要检查是否有任何元素在字符串中包含相同的前缀（这里后缀是最后一个字符），然后保留具有更大整数值的元素。上述示例列表的预期输出将是：

```
[{a1  5}, {c9  11}, {g2  3}, {d1  4}, {b3  19}... ... ...] 
```

字符串将具有唯一值，但可以在前缀中匹配。我在java中不是那么好。那么有人可以帮我解决这个问题吗？这是我正在尝试但得到的代码`IndexOutOfBoundsException`。这段代码有问题，所以需要你的帮助。

谢谢！

```
 int size = list.size();
        for (int j = 0; j < size; j++) {
        if (list.get(j).str.substring(0, list.get(j).str.length()-1).compareTo(list.get(j+1).str.substring(0, list.get(j+1).str.length()-1)) == 0) {
            if (list.get(j).intgr > list.get(j+1).intgr)
                list.remove(list.get(j+1));
                size--;
            else {
                list.remove(list.get(j));
                j--;
                size--;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:44:30.107

您可以迭代您的元素集合，将它们添加到`Map`将键（前缀）与值（对象）关联起来。每次添加元素时，您都会检查以相同前缀存储的元素是否大于添加的元素。

为了有这种行为：

```
provides this: [{a1 5}, {b2 3}, {g1 1}, {b5 1}, {c9 11}, {g2 3}, {d1 4}, {b3 19}]
results this: [{a1 5}, {c9 11}, {g2 3}, {d1 4}, {b3 19}] 
```

你可以实现这样的事情：

```
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

public class TestSystemOut {

    public static void main(final String[] a) {
        List<MyObj> list = prepareList();
        System.out.println("provides this: " + list);

        Map<String, MyObj> map = new LinkedHashMap<String, MyObj>(); // if result order doesn't matter this can be a simple HashMap

        String strTmp;
        for (MyObj obj : list) {

            strTmp = obj.str;
            strTmp = strTmp.substring(0, strTmp.length() - 1);

            if (map.get(strTmp) == null || map.get(strTmp).integer < obj.integer) {
                map.remove(strTmp); // this could be removed if order of result doesn't matter
                map.put(strTmp, obj);
            }
        }

        list.clear();
        list.addAll(map.values());

        System.out.println("results this: " + list);
    }

    public static class MyObj {
        String str;
        Integer integer;

        public MyObj(final String str, final Integer integer) {
            super();
            this.str = str;
            this.integer = integer;
        }

        @Override
        public String toString() {
            return "{" + str + " " + integer + "}";
        }

    }

    private static List<MyObj> prepareList() {
        List<MyObj> list = new ArrayList<MyObj>();
        list.add(new MyObj("a1", 5));
        list.add(new MyObj("b2", 3));
        list.add(new MyObj("g1", 1));
        list.add(new MyObj("b5", 1));
        list.add(new MyObj("c9", 11));
        list.add(new MyObj("g2", 3));
        list.add(new MyObj("d1", 4));
        list.add(new MyObj("b3", 19));
        return list;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:45:29.540

另一种（可能更容易阅读和调试）方法是：

1.  将您的项目放入列表中
2.  遍历列表并填充一个 Map，其中 String 是字母，MyClass 是最小值（即，如果地图已经包含“a”的内容，请检查您的新 MyClass 是更大或更小并相应地替换）

简单的实现：

```
public class Test {

    public static void main(String[] args) throws InterruptedException {
        List<MyClass> list = Arrays.asList(new MyClass("a1", 5),
                new MyClass("b2",  3),
                new MyClass("g1",  1),
                new MyClass("b5",  1),
                new MyClass("c9",  11),
                new MyClass("g2",  3),
                new MyClass("d1",  4),
                new MyClass("b3",  19));

        Map<String, MyClass> map = new HashMap<String, MyClass>();

        for (MyClass mc : list) {
            MyClass current = map.get(mc.getLetter());
            if (current == null || mc.intgr > current.intgr) {
                map.put(mc.getLetter(), mc);
            }
        }
        System.out.println(map);
    }

    static class MyClass  {

        String str;
        Integer intgr;

        MyClass(String str, Integer intgr) {
            this.str = str;
            this.intgr = intgr;
        }
        String getLetter() {
            return str.substring(0,1);
        }

        @Override
        public String toString() {
            return "[" + str + " " + intgr + "]";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:01:49.637

```
/*
 * For every string in the list, look at all strings in the
 * list and compare the substring from 0 to length-1, if they
 * match and the id is not the same as the current s (i.e. s and
 * list.get(i) are at the same address) then remove that string.
 */
public ArrayList remdup(ArrayList<String> list) {

    for (String s : list) {
        for (int i=0; i<list.size();i++) {
            if (s.substring(0, s.length()-1).compareTo(list.get(i).substring(0, list.get(i).length()-1)) == 0
                    && list.indexOf(list.get(i)) != list.indexOf(s)) {
                list.remove(list.get(i));
            }
        }
    }
    return list;
} 
```

也许试一试，尚未测试，但认为它应该可以工作。如果它不能尝试使用与 compareTo() 不同的东西，则可以使用 equals() 作为替代方法。

此外，您会收到 IndexOutOfBoundsException，因为每次删除元素时都会减去大小，从而使搜索区域变小。您没有考虑到 remove() 会为您执行此操作。

我会考虑为此使用 Map 而不是类。这样你就不必重新发明轮子了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:27:06.263

您的代码有两个问题。首先，当`j == size - 1`（最后一次迭代）时，您正在调用 list.get(j+1)，这就是导致异常的原因。只需将循环条件更改为`j < size - 1`，异常就会消失。（或者，从前一个元素开始`j = 1`并与前一个元素进行比较。）

其次，您只是将每个元素与其直接后继元素进行比较。根据您的描述，这听起来不像您想要做的。

我建议在单独的方法中捕获比较逻辑。它可能是以下内容的一部分`MyClass`：

```
class MyClass {
    String str;
    Integer intgr;
    /**
     * Returns the relationship between this and another MyClass instance.
     * The relationship can be one of three values:
     * <pre>
     *   -1 - This object should be discarded and other kept
     *    0 - There is no relationship between this and other
     *    1 - This object should be kept and other discarded
     * </pre>
     *
     * @param other The other instance to evaluate
     *
     * @return 0 if there is no relationship.
     */
    public int relationTo(MyClass other) {
        final String myPrefix = str.substring(0, str.length() - 1);
        final String otherPrefix = other.str.substring(0, other.str.length() - 1);
        if (myPrefix.equals(otherPrefix)) {
            return intgr < other.intgr ? -1 : 1;
        } else {
            return 0;
        }
    }
} 
```

（这可以很容易地转换为具有两个参数的方法，该方法将在外部`MyClass`。）然后您可以使用该方法来决定要保留什么。您需要进行两次迭代才能找到不相邻的对象：

```
int size = list.size();
for (int i = 0; i < size; ++i) {
    final MyClass current = list.get(i);
    for (int j = 0; j < i; ++j) {
        final MyClass previous = list.get(j);
        final int relation = previous.relationTo(current);
        if (relation < 0) {
            // remove previous (at index j)
            list.remove(j);
            --i;
            --j;
            --size;
        } else if (relation > 0) {
            // remove current (at index i)
            list.remove(i);
            --i;
            --size;
            break; // exit inner loop
        }
        // else current and previous don't share a prefix
    }
} 
```

# ruby - “如果”语句不起作用

> ID：11232860
> 
> 赞同：0
> 
> 时间：2012-06-27T18:36:55.937
> 
> 标签：ruby, if-statement

为什么其他不起作用？并且只打印“8”但不打印“10”。哪里错了？

```
<% if controller.controller_name == ('home' || 'products') %>8<% else %>10<% end %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T18:39:11.417

`||`如果不是`nil`or ，则运算符返回第一个操作数`false`。否则返回第二个操作数。因此，在您的情况下，它总是返回“家”，而不是“产品”。

你可能的意思是

```
<%= controller.controller_name.in?('home', 'products') ? 8 : 10 %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:40:49.263

一个简单的 + 1 班轮解决方案可以解决您的问题，如下所示

```
if %w[home products].include? controller.controller_name 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T18:41:46.690

因为`('home' || 'products')`总会回到“家”。`||`是一个总是返回第一个非 nil 和非 false 语句的操作。在这种情况下，`'home'`。所以你的条件正好等于`controller.controller == 'home'`。

你想要做的是：

```
<% if (controller.controller_name == 'home' || controller.controller_name == 'products') %>8<% else %>10<% end %> 
```

它将按照您的想象进行评估。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:42:49.517

试试这个：

```
case controller.controller_name
when "home" then 8
when "products" then 8
else 10
end 
```

# javascript - 将变量插入 SQL 表

> ID：11232865
> 
> 赞同：3
> 
> 时间：2012-06-27T18:37:09.390
> 
> 标签：javascript, sql, html

我似乎无法将用户输入的数据放入表中然后打印。

到目前为止，这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);
function submit() {
        var input = document.getElementById("save_name").value;
        localStorage.setItem("inputed_name", input);
        var msg;
        db.transaction(function (tx) 
        {
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log varchar(50))');
            tx.executeSql('delete from LOGS'); // Clears table (for debugging)

            tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, localStorage.inputed_name)');
            msg = '<p>Log message created and row inserted.</p>';
            document.querySelector('#status').innerHTML = msg;
        });

        db.transaction(function (tx) {
            tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
                var len = results.rows.length, i;
                msg = "<p>Found rows: " + len + "</p>";
                document.querySelector('#status').innerHTML += msg;
                for (i = 0; i < len; i++) {
                    msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
                    document.querySelector('#status').innerHTML += msg;
                }
            }, null);
        });
}
</script>
</head>
<body>
<div id="status" name="status">Status Message</div>
<p>Enter data: <input type="text" id="save_name" name="inputed_name" /><br/></p>
<p><button onclick="submit()" type="button">Submit Data</button></p> <!--Should print data from the table-->
</body>
</html> 
```

我从[这里得到了“模板”/开始](http://www.tutorialspoint.com/html5/html5_web_sql.htm)

**下面解决了**

现在我想在我的表中添加两个变量，原始日志变量和第二个用作时间戳

```
function submit() 
{
    var input = document.getElementById("save_name").value;
    var msg;
    var time_stamp = new Date();

    db.transaction(function (tx) 
    {
        tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id auto_increment, date_time varchar(128), log varchar(64))');
        tx.executeSql('INSERT INTO LOGS (log, date_time) VALUES (?, ?)', [input, time_stamp]); // <--Problem here!
        msg = '<p>Log message created and row inserted.</p>';
        document.querySelector('#status').innerHTML = msg;
    });
} 
```

其余代码与上面相同。我认为这会起作用，但是当我测试它时，表中没有任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:06:02.613

我认为您只需要更改获取和插入值的方式（此外，您在这一行的 SQL 中有语法错误）：

```
var input = document.getElementById('someId').value;

...
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, ?)', [input]);
... 
```

我认为您可以完全忘记`localStorage`变量，除非您需要保留这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T12:08:54.317

要将多个变量插入表中，请使用以下格式。

```
tx.executeSql('INSERT INTO CacheRequest (key,value) VALUES (?,?)',[variableKey,variableValue]);
```

# ios - 排序核心数据 nsarray numeric

> ID：11232866
> 
> 赞同：0
> 
> 时间：2012-06-27T18:37:09.530
> 
> 标签：ios, xcode, core-data, nsarray

我在排序 nsarray 时遇到问题。nsarray 填充了核心数据：

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"ReactionInfo" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
NSError *error;
self.scoreInfos_arr = [managedObjectContext executeFetchRequest:fetchRequest error:&error];

for (ReactionInfo *info in self.scoreInfos_arr) {
    debug(@"%@ - %f",info.player,info.score);             
} 
```

你看到我得到了球员的名字和分数。我的目标是在表格视图中显示分数，但当然它们应该是数字排序的。

我没有找到关于如何排序这个 NSArray 的解决方案（就是 self.scoreInfos_arr）

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:43:57.290

使用 NSSortDescriptor

```
[fetchRequest setSortDescriptors: [NSArray arrayWithObject:
                                       [[[NSSortDescriptor alloc] initWithKey:@"score"
                                                                    ascending:YES] autorelease]]]; 
```

# sql - Oracle 时间戳错误

> ID：11232877
> 
> 赞同：0
> 
> 时间：2012-06-27T18:37:53.227
> 
> 标签：sql, oracle, oracle10g

```
select to_timestamp(trunc(state_date) || ' ' || substr(state_time,1,12),'DD-MM-YYYY HH24:MI:SS:FF3') 
from state_log 
```

上面的语句给出错误

带有 uk nls 参数的“日期格式图片在转换整个输入字符串之前结束”。它适用于美国 nls 参数。

请告知我该如何解决这个问题。

问候，

柴土

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:42:20.777

正如你所说，你的 state_date 是 DD-MON-YY 然后使用

```
select to_timestamp(trunc(state_date) || ' ' || substr(state_time,1,12),'DD-MON-YYYY HH24:MI:SS:FF3') 
from state_log 
```

# ruby-on-rails-3 - 我可以在 Coffeebeans / js.coffee 视图中使用 HAML 风格的嵌入式 ruby 吗？

> ID：11232885
> 
> 赞同：5
> 
> 时间：2012-06-27T18:38:23.247
> 
> 标签：ruby-on-rails-3, coffeescript, haml

我的 rails 控制器经常返回 JS，我正在使用 Coffeebeans 让我拥有 js.coffee 视图。唯一的问题是它使用`<%= ... %>`嵌入式 Ruby 的语法......我理想情况下喜欢使用 Coffeescript/HAML 风格的字符串插值，即：`#{..}`和 HAML 风格的标签，即而不是`<%= ... %>`，只需使用`=`适当的缩进即可。

我想这种语法最好与文件扩展名 js.coffee.haml 一起使用。这可能吗？简单地使用该扩展名保存我的文件是行不通的，我猜 Coffeebeans 需要进行一些调整以允许这样做，但我不知道我需要做什么。

这篇文章建议它是可能的：[Chaining template handlers in Rails 3](https://stackoverflow.com/questions/6847690/chaining-template-handlers-in-rails-3/7238509#7238509)

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T01:30:03.477

您链接到的问题有第二个答案，该答案链接到posterous 上的一篇博客文章，现在已经死了......但[我在archive.org 上找到了它！](http://web.archive.org/web/20130501235915/http://rubyandrails.posterous.com/rails-jscoffeehaml-templates)该帖子还包含[一个要点，其中](https://gist.github.com/ncri/3772514#file-gistfile1-rb)包含初始化程序所需的代码，以便您可以命名以结尾的文件`js.coffee_haml`并对其进行处理。

为了防止将来出现死链接，这里是要点中的代码，但我没有编写它，也没有测试它是否仍然有效：

```
module Coffee
  module Rails
    class HamlTemplateHandler
      def self.haml_handler
        @@haml_handler ||= ActionView::Template.registered_template_handler(:haml)
      end

      def self.call(template)
        compiled_source = haml_handler.call(template)
        "CoffeeScript.compile(begin;#{compiled_source};end)"
      end
    end
  end
end

ActiveSupport.on_load(:action_view) do
  ActionView::Template.register_template_handler :coffee_haml, Coffee::Rails::HamlTemplateHandler
end 
```

博文中还提到了haml不允许嵌套纯文本，所以如果你想在coffeescript中做这样的事情：

```
if xyz == 1
  do_this y
  do_that x 
```

您必须将其包装在`:plain`过滤器中：

```
:plain
  if xyz == 1
    do_this y
    do_that x 
```

# ios - 更改 UITableView 的单元格颜色

> ID：11232886
> 
> 赞同：0
> 
> 时间：2012-06-27T18:38:23.337
> 
> 标签：ios, uitableview

我试图更改填充 UITableView cell.backgroundColor=[UIColor blueColor]; 的单元格的颜色 但它仍然是单元格的黑色。

```
 -(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {

if (tofriend) {

    if (indexPath.section==0){

        static NSString *CellIdentifier;
        CellIdentifier= @"MyCell";

        MyCell *cell =(MytCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (!cell) {
            [[NSBundle mainBundle] loadNibNamed:@"MyCell" owner:self options:nil];                 cell = myCell;

        }
        cell.backgroundColor=[UIColor blueColor]; 
```

好的，我知道它是 cell.contentView.backgroundColor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:01:37.237

由于单元格缓存，您应该在委托方法中更改背景颜色：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
} 
```

cell.backgroundColor 将在此方法中正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:08:18.683

看起来您正在尝试从笔尖加载单元格，但实际上从未将笔尖设置为`MyCell`

尝试更改为：

```
 if (!cell) {
       cell = [[[NSBundle mainBundle] loadNibNamed:@"MyCell" owner:self options:nil] objectAtIndex:0];
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:17:42.943

假设您的单元格正在加载，并且只有背景颜色没有改变，我认为您的自定义单元格 MyCell 中的其他元素正在覆盖单元格背景视图。

尝试将单元格中所有其他元素的背景颜色设置为红色/黄色，并查看是否有任何单元格。背景可见。

顺便说一句：为什么不在自定义单元格中设置背景颜色？

# php - 在 PHP 应用程序中使用装饰器模式

> ID：11232888
> 
> 赞同：3
> 
> 时间：2012-06-27T18:38:37.690
> 
> 标签：php, design-patterns

在我的应用程序中，我的模型中似乎有很多表示逻辑：

```
<?php foreach ($this->users as $user): ?>
    <span class="phone">
        <?php echo $user->getPhoneNumberFormattedAsText(); ?>
    </span>
<?php endforeach; ?> 
```

起初，我开始将其视为对 View Helpers 的需求：

```
<span class="phone"><?php echo $this->userPhone($user->getPhone()); ?></span> 
```

但是，我开始遇到一个问题，我有很多特定于某些模型的小视图助手，不需要占用整个文件。如果我可以将这个表示逻辑组合在一起并将其排除在模型之外，那就太好了。我认为这是[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)有意义的时候。

> “装饰器模式是一种允许将行为动态添加到现有对象的设计模式。”

我在网上看过一些例子，但没有真正的、实用的代码示例。我想知道你是否在你的 PHP 应用程序中成功地使用了这个模式，以及这个 PHP 示例应该是什么样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:12:33.057

我已经为我的 php 应用程序实现了一个装饰器模式。基本上它是一个 xml 配置文件的包装类，我在其中定义了我的基本需求。为简化起见，我以披萨为例。然后我为每种成分设置一个类，并将其包裹在另一个类中。最后，我调用了每个班级的 Prize 方法，它给了我所有内容的总和。

```
$order = new pizza($xml_file);
$order = new add_salami($order);
$order = new add_cheese($order);
$order = new add_tomato($order);   
$order = $order->prize(); 
```

您需要在每个成分类中维护一个指向当前对象的指针。当您调用 php new 函数时，您可以使用它来备份当前对象。它有点像（对象的）链表。然后你可以调用最后一个对象的 Prize() 方法并循环遍历所有其他类。但是要装饰你需要添加新的类。您还可以将 $xml_file 替换为起始值。我将所有装饰器类都放在一个文件中。装饰器类可以如下所示：

```
class add_salami {

    protected $order;
    protected $prize;

    public function __construct ($order) {
        $this->order = $order;
        $this->prize = $order->getPrize();
    }

    public function getPrize() {
        return $this->prize + 10;
    }
} 
```

我将许多这些微小的装饰器类保存在一个巨大的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:39:44.573

Zend Framework 对其表单元素使用装饰器模式。想象一下有一个 type="text" 的输​​入元素。你可以用标签、div、字段集等“装饰”这个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T10:58:36.830

我理解你的问题。是的，装饰器模式可以帮助您在甚至不同的业务逻辑中重用您的类。

我在所有可能的地方都使用装饰器模式，因为它真的可以帮助你。例如，假设您想从数据库中获取记录列表，为此您正在使用简单的存储库。这将返回您全部或一条记录。像这儿。有关存储库的更多信息，请访问此处。

```
$repo=new ClientRepository();
$repo->all(); 
```

但是，假设您有业务规则，在某些地方您应该记录请求的数据，而在其他地方您应该缓存请求。所以，你会怎么做。当然，大多数人会为 CacheClientRepository 和 LogClientRepository 创建单独的类。可能没问题，但是如果业务规则会同时询问您 Log 和 Cache 那么您将创建什么单独的类，例如 LogAndCacheClientReposiotry(); 如果你这样做，你最终会得到大量重复代码的类。

对于这种情况，最好的解决方案是使用 DecoratorPattern。您将需要创建一个接口并在每个装饰器中实现它。您可以随心所欲地装饰您的存储库。

这是代码示例：

```
 <?php

interface RepositoryInterface
{
    public function all();
}

class ClientRepository implements RepositoryInterface
{

    public function all()
    {
      // Your code for database goes here
    }
}

class CacheRepository implements RepositoryInterface
{
    /**
     * @var RepositoryInterface
     */
    private $repo;

    /**
     * CacheRepository constructor.
     * @param RepositoryInterface $repo
     */
    public function __construct(RepositoryInterface $repo)
    {
        $this->repo = $repo;
    }

    public function all()
    {
        //Code for caching goes here

        return $this->cache('cache-all',function(){
            return $this->repo->all();
        });
    }
    //......
}
class LogRepository implements RepositoryInterface
{
    /**
     * @var RepositoryInterface
     */
    private $repo;

    /**
     * LogRepository constructor.
     * @param RepositoryInterface $repo
     */
    public function __construct(RepositoryInterface $repo)
    {
        $this->repo = $repo;
    }

    public function all()
    {
        //Code for logging goes here

        return $this->log('log-all',function(){
            return $this->repo->all();
        });
    }
    //......
}

//.. Simple Repository
$repo=new ClientRepository();
//.. Cached Repository
$repo=new CacheRepository( new ClientRepository() );
//.. Logging Repository
$repo=new LogRepository( new ClientRepository() ) ;

//.. Logging and Caching at the same time
$repo=new LogRepository( new CacheRepository( new ClientRepository() ) ) ; 
```

我希望它会对你有所帮助，因为装饰器模式是我所知道的最好的模式之一。

# uml - 哪个更适合表示代码中的关系？

> ID：11232889
> 
> 赞同：0
> 
> 时间：2012-06-27T18:38:39.707
> 
> 标签：uml, associations, aggregation

我写了一个这样的示例代码：

```
class BaseClass
{
    public virtual void Execute() {}
}

class ClassA: BaseClass
{
    public override void Execute()
    {
        // ClassA Execute implementation
    }
}

class ClassB: BaseClass
{
    private BaseClass _b;

    public ClassB(BaseClass b)
    {
        _b = b;
    }

    public override void Execute()
    {
        _b.Execute();
    }
}
...
ClassB b = new ClassB(new ClassA()); 
```

我想为上面的代码绘制一个正确的 UML 图：

```
<|_______   =  inheritance = "is-a"
<________   =  association
<>_______   =  aggregation = "has-a" 
```

因为 ClassB 实际上使用 ClassA，所以我的图表如下所示：

```
 ______|>BaseClass<|_______
   |                          |
ClassA<_____________________ClassB 
```

但正如我们从 ClassB 构造函数中看到的那样，它接受任何“是”BaseClass 的对象并另外持有对它的引用，所以也许我应该立即让图表看起来像这样：

```
 ______|>BaseClass<|_______
   |             |            |
ClassA           |________<>ClassB 
```

哪一个更合适，或者为什么它们都不合适，正确的图表会是什么样子？

任何关于它的想法和推理都将受到欢迎。谢谢

编辑：事情是 ClassB 继承自 BaseClass，但它也持有对 BaseClass 派生对象的引用并使用该对象。所以简而言之，我的问题是：如何在类图上描述它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:55:21.147

在 UML 之前，我曾经使用过一些方法，它们具有独立的继承和组合图。我仍然在 UML 中将这两个图分开，除非有充分的理由将它们混合在一起。

我建议也这样做。

例子。

假设我正在使用一种类似 C++ 的编程语言，它不支持多重继承，但支持单一继承。

假设我在一个面向对象和类的库中工作，并且我想使用类图、继承和其他关联对该库中使用的类进行建模。

假设我用“流”类制作了我的自定义输入/输出库。

首先，我创建了一个基本的“流”类：

```
............................................................
.+--------------------------------------------------------+.
.|                    <<abstract>>                        |.
.|                      StreamClass                       |.
.+--------------------------------------------------------+.
.| [+] bool canRead()                         <<virtual>> |.
.| [+] bool canWrite()                        <<virtual>> |.
.| [+] bool canSeek()                         <<virtual>> |.
.| [+] bool isOpen()                          <<virtual>> |.
.| [+] void read(byte[] Buffer, int MaxSize)  <<virtual>> |.
.| [+] void write(byte[] Buffer, int MaxSize) <<virtual>> |.     
.| [+] void open()                            <<virtual>> |.
.| [+] void close()                           <<virtual>> |.
.+--------------------------------------------------------+.
............................................................ 
```

已经有一个文件系统库，我想用我的库“包装”，所以我想创建一个只读流和一个只写流类。

```
............................................................
.+--------------------------------------------------------+.
.|                    <<abstract>>                        |.
.|                      StreamClass                       |.
.+--------------------------------------------------------+.
.| [+] bool canRead()                         <<virtual>> |.
.| [+] bool canWrite()                        <<virtual>> |.
.| [+] bool canSeek()                         <<virtual>> |.
.| [+] bool isOpen()                          <<virtual>> |.
.| [+] void read(byte[] Buffer, int MaxSize)  <<virtual>> |.
.| [+] void write(byte[] Buffer, int MaxSize) <<virtual>> |.     
.| [+] void open()                            <<virtual>> |.
.| [+] void close()                           <<virtual>> |.
.+-+------------------------------------------------------+.
...^.........................................................
../.\........................................................
./...\........................................................
.--+--..........................................................
...|............................................................
...|...+---------------------------------------------------------+.
...|...|                     <<concrete>>                        |.
...|...|                    ReaderStreamClass                    |.
...|...+---------------------------------------------------------+.
...|...| [+] bool canRead()                         <<override>> |.
...+---+ [+] bool isOpen()                          <<override>> |.
...|...| [+] void read(byte[] Buffer, int MaxSize)  <<override>> |.
...|...| [+] void open()                            <<override>> |.
...|...| [+] void close()                           <<override>> |.
...|...+---------------------------------------------------------+.
...|...............................................................
...|...+---------------------------------------------------------+.
...|...|                    <<concrete>>                         |.
...|...|                  WriterStreamClass                      |.
...|...+---------------------------------------------------------+.
...|...| [+] bool canWrite()                        <<override>> |.
...+---+ [+] bool isOpen()                          <<override>> |.
.......| [+] void write(byte[] Buffer, int MaxSize) <<override>> |.     
.......| [+] void open()                            <<override>> |.
.......| [+] void close()                           <<override>> |.
.......+---------------------------------------------------------+.
................................................................... 
```

到目前为止，我已经建模了一个基类，加上 2 个子类，没什么大不了的。

后来，我需要一个允许读写的类，但不能同时允许，所以，我决定使用组合，并创建一个新类，它是我的流基类的后代，但是，必须复合读写器类，可能是隐藏的。

我自己，或者其他将要使用这个类的程序员，不知道也不关心内部有其他流。

(1) 继承图：

```
............................................................
.+--------------------------------------------------------+.
.|                    <<abstract>>                        |.
.|                      StreamClass                       |.
.+--------------------------------------------------------+.
............................^...................
.........................../.\..................
........................../...\.................
..........................--+--.................
............................|...................
............................|...................
............................|................................
.+--------------------------+------------------------------+.
.|                    <<abstract>>                         |.
.|               ReaderWriterStreamClass                   |.
.+---------------------------------------------------------+.
.| [#] ReaderStreamClass Reader()                          |.
.| [#] WriterStreamClass Writer()                          |.
.+---------------------------------------------------------+.
.| [+] bool canRead()                         <<override>> |.
.| [+] bool canWrite()                        <<override>> |.
.| [+] bool canSeek()                         <<override>> |.
.| [+] bool isOpen()                          <<override>> |.
.| [+] void read(byte[] Buffer, int MaxSize)  <<override>> |.
.| [+] void write(byte[] Buffer, int MaxSize) <<override>> |.     
.| [+] void open()                            <<override>> |.
.| [+] void close()                           <<override>> |.
.+---------------------------------------------------------+.
............................................................ 
```

(2) 组成图：

```
.............................................................
.........+-------------------------------------------------+.
.........|                    <<abstract>>                 |.
.........|               ReaderWriterStreamClass           |.
.........+-------------------------------------------------+.
..+------+ [#] WriterStreamClass Writer()                  |.
..|..+---+ [#] ReaderStreamClass Reader()                  |.
..|..|...+-------------------------------------------------+.
..|..|.......................................................
..|..|...+-------------------------------------------------+.
..|..+---+                    <<concrete>>                 |.
..|......|               ReaderStreamClass                 |.
..|......+-------------------------------------------------+.
..|..........................................................
..|......+-------------------------------------------------+.
..+------+                    <<concrete>>                 |.
.........|                     WriterStreamClass           |.
.........+-------------------------------------------------+.
............................................................. 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:55:40.897

第二张图是对的。第一个只是第二个可能的“实例”。

# coldfusion - ColdFusion mixin 导致“不能多次声明例程”。

> ID：11232891
> 
> 赞同：3
> 
> 时间：2012-06-27T18:38:53.097
> 
> 标签：coldfusion, mixins

[注意：在您的 cfcs 中包含代码通常是不好的做法，（请参阅下面的答案），因此请考虑这只是研究]

总而言之，我有一个类和一个子类以及一个被子类覆盖的方法。当我在子类中对方法进行硬编码时，一切正常，当我使用 cfinclude 将其包含在伪构造函数中时，mixin 样式，我得到一个“不能多次声明例程”。错误。

这似乎很简单。我想念什么：这个混音？

父类：

```
<cfcomponent >
    <cffunction name="hola" hint="i am the parent method">
        <cfreturn "hola - parent">
    </cffunction>
</cfcomponent> 
```

子班：

```
<cfcomponent extends="mixinTestParent">
    <!---   this would work, successfully overridding parent method
    <cffunction name="hola" hint="i am the child method">
        <cfreturn "hola - child">
    </cffunction>--->

    <cfinclude template="mixinTestInc.cfm">

    <cffunction name="init" access="public" returntype="any" output="false">
        <cfreturn this>
    </cffunction>
</cfcomponent> 
```

包括：

```
<cffunction name="hola" hint="i am the child method" access="public">
        <cfreturn "hola - child">
    </cffunction> 
```

跑步者：

```
<cfset test = new mixinTestChild().init()>
<cfdump var="#test.hola()#"> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T20:09:52.607

由于实例化 CFC 的方式，您会收到错误消息。

当您`hola()`在父级和`hola()`子级中具有子级扩展父级时，当创建子级 CFC 时，它会`hola()`在父级中看到并覆盖它。但是，该功能仍然存在于 CFC 中。

从子 CFC 中，您可以引用`hola()`（在子 CFC 中定义）和`super.hola()`（在父 CFC 中定义）。

当您使用`<cfinclude/>`时，CFC 被实例化，并且包含文件的内容被添加到混合中。但是，它们不被视为继承模型的一部分，就像“此 CFC 中的其他函数”一样，因此您会收到错误消息。

我同意在完成而不是重构时这是一种不好的做法，但这是一种允许实用 UDF 混合而不使它们成为模型的一部分的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:08:56.823

我认为在 cfc 中使用 cfinclude 通常是不好的做法。另外，我认为此链接与您的问题有关：[http ://www.bennadel.com/blog/972-CFCs-Are-Cached-CFIncludes-Are-Not.htm](http://www.bennadel.com/blog/972-CFCs-Are-Cached-CFIncludes-Are-Not.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:31:59.820

我认为你可以让你的东西正常工作，但做你正在做的事情根本不是一个好主意。包括管理文本和 HTML 以及将信息输出到屏幕的工作非常好。它不用于包含功能。

我为你找到了这个： [http ://www.justskins.com/forums/is-cfincludeing-from-cfcs-81144.html](http://www.justskins.com/forums/is-cfincludeing-from-cfcs-81144.html)

> 只是在与 Macromedia 的架构总监 Sean Corfield 交换电子邮件后的后续行动。
> 
> 他说从 CFC 函数中包含文件是“不好的做法”。我个人认为简化 CFC 是一种很好的做法，但他说不使用 cfinclude 会鼓励人们“将他们的 CFC 重构为更小、更有凝聚力的 CFC”。
> 
> 至于将“var”变量复制到包含文件的变量范围内，这是 CFMX 6.1 的一个错误，据 Sean 称，该错误已在 CF7 中修复。
> 
> Sean 没有具体说使用 cfinclude 会导致错误，但我倾向于相信这种做法确实导致了我们奇怪的错误。我们的错误与变量范围无关，我相信现在我们向服务器添加了 RAM，它们将得到解决，但这并不是说 cfinclude 没有贡献。
> 
> CF 的文档确实说可以使用 cfinclude，因此我们可能会在将所有代码移入 CFC 本身之前运行一些测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T22:01:01.400

只是为了补充@iKnowKungFoo的答案，问题在于这`<cfinclude>`不是“将代码粘贴在这里，就好像它实际上是文件的一部分”的简写，就像`#include`在C中工作一样。我这么说是因为这是大多数人们认为它有效。

在 C 中，a`#include`是编译器指令（不是 C 代码本身），实际上包含文件中的代码在编译之前实际上已包含在文件中。

在 CF 中，情况并非如此。包含的文件是单独编译的，然后发生一些 Java jiggery-pokery（对不起，技术术语；-），以使包含的代码看起来与包含它的代码内联（如果有意义的话）。

现在......这有什么后果？当 CFM 文件编译时，其中的函数编译为 UDF，它没有任何继承或覆盖或类似的概念，因为它们不是那种上下文。只有在编译*CFC*时，才能实现所有这些东西。基本上，CFM 编译时没有考虑任何面向对象的因素，而 CFC 则专门考虑在内。

因此，UDF 的规则之一是每个请求只能有一个给定名称的函数......这可以通过创建一个`hola()`连续两次包含您的文件（其中的文件）的 CFM 来证明：您会报错。现在我不知道为什么会有这条规则。对我来说，函数只是一个变量，所以第二个同名的函数声明应该只是覆盖前一个。不过CF一直都是这样的，所以我们现在应该已经习惯了。对于您的代码，您的 UDF（在包含中）与 CFC 中的方法具有相同的名称，这足以发生错误情况。这有点道理。

这是否有助于澄清正在发生的事情，以及为什么你会看到你所看到的？

# asp.net-mvc-3 - 部分视图没有看到 BeginForm 是 HtmlHelper 的一部分

> ID：11232896
> 
> 赞同：0
> 
> 时间：2012-06-27T18:39:04.967
> 
> 标签：asp.net-mvc-3, razor, mef, partial-views

在我的主应用程序中，我想将插件 DLL 中的部分视图加载到主视图中。现在`@Html.Partial(/~bin/PluginName.dll/PluginName.ViewName.vbhtml)`，我正在尝试查看部分视图。这是我得到的错误：

```
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET
Files\root\b3a37fd6\7fe17e9b\App_Web_cucontractnumberplugin.cucontractnumbersearch.vbhtml.1
45470.d2zb2yt5.0.vb(43): error BC30456: 'BeginForm' is not a member of 
'System.Web.WebPages.Html.HtmlHelper'. 
```

我有一个类可以在应用程序启动时将 dll 加载到影子目录中。在我的部分视图中（目前）所有的都是一个文本框。我最终想将搜索插件加载到我的主视图中。

这是我的部分观点：

```
@using(Html.BeginForm("ChangeCUNumber", "PluginName"))

@Html.TextBox("strCUNumber")

End Using 
```

**如果您需要任何澄清，请询问！谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:50:18.200

需要`@Inherits System.Web.Mvc.WebViewPage`在我的插件视图中添加

# javascript - 做一个记忆配对游戏——你能用不同的方式显示一个图像吗？

> ID：11232897
> 
> 赞同：0
> 
> 时间：2012-06-27T18:39:05.607
> 
> 标签：javascript, jquery

我正在做一个记忆配对游戏。目前，游戏运行良好。然而，我现在需要处理游戏中你实际上必须翻转卡片的部分。我首先要有两组图像：“卡片背面”和“卡片正面”。卡片的背面都将是相同的，然后当您单击其中一张时，卡片的正面就会显露出来。正面都是独特的一对图片。但是，我的代码是这样的，即单击的具有相同来源的图片将被删除。因此，一旦您单击图片的任意两个“背面”，它们将始终被删除，无论它们的“正面”是什么。

我只想使用一组图片，并在单击它们时以不同方式显示它们。抱歉，如果这听起来有点令人困惑，那是我能解释的最好方法。

这是我到目前为止的演示：http: [//jsfiddle.net/GquLr/](http://jsfiddle.net/GquLr/)

所以基本上，我需要一种方法来整合一个功能，你必须将两张卡片翻转过来，如果它们匹配，它们就会被移除，如果它们不匹配，它们就会翻转回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:21:47.493

通过显示卡片的正面和背面，每张卡片本质上是两个相互叠加的图像。您也可以使用 CSS 3 来翻转背面。

在我看来，您可以用 HTML 标记表示该结构，如下所示：

```
<div class="card">
    <img class="front" />
    <img class="back" />
</div> 
```

使用它，您可以轻松地将元素定位在需要翻转的元素上，等等。

但是，在 Javascript 方面，您的想法是，我认为您正在分配`click`处理程序*front* `<img/>`。我建议你把它移到`div.card`。这样您就不必担心卡片的哪一侧会获得点击。

从 中`div.card`，您可以通过以下方式轻松获取前端的来源`<img/>`：

```
$('div.card').on('click', function () {
    var _src = $(this).find('.front').attr('src');
}); 
```

...并使用它与显示中的其他卡片进行比较。

# android - Android 引用样式属性——触发 ResourceNotFoundException

> ID：11232900
> 
> 赞同：1
> 
> 时间：2012-06-27T18:39:16.980
> 
> 标签：android, resources, layout-inflater

我创建自己的样式属性，如下所示：

```
 <attr name="color_foreground" format="color|reference" /> 
```

我在我的主题中给它一个价值，如下所示：

```
 <item name="color_foreground">@color/blue</item> 
```

如果我在我的布局中访问它（已设置为 contentView）

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="?color_foreground"
> 
```

它就像一个魅力。但是如果我在膨胀的布局中做同样的事情，我会收到一个错误：

```
 final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.myInflatedLayout, null); 
```

错误输出：

```
Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x7f010005 a=-1}
    06-27 20:33:37.340: E/AndroidRuntime(31616):    at android.content.res.Resources.loadDrawable(Resources.java:1899)
    06-27 20:33:37.340: E/AndroidRuntime(31616):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
    06-27 20:33:37.340: E/AndroidRuntime(31616):    at android.view.View.<init>(View.java:2810)
    06-27 20:33:37.340: E/AndroidRuntime(31616):    at android.widget.TextView.<init>(TextView.java:561)
    06-27 20:33:37.340: E/AndroidRuntime(31616):    at android.widget.TextView.<init>(TextView.java:554)
    06-27 20:33:37.340: E/AndroidRuntime(31616):    ... 48 more 
```

二进制 XML 第 15 行实际上是我通过“？color_foreground”访问 attr 的行

如果我尝试获取这样的属性（在设置内容视图之后），几乎会发生同样的情况：

```
this.getResources().getColor(R.attr.color_foreground); 
```

错误：

```
06-28 12:55:16.975: E/AndroidRuntime(7089): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f010005
06-28 12:55:16.975: E/AndroidRuntime(7089):     at android.content.res.Resources.getValue(Resources.java:1019)
06-28 12:55:16.975: E/AndroidRuntime(7089):     at android.content.res.Resources.getColor(Resources.java:749)
06-28 12:55:16.975: E/AndroidRuntime(7089):     at ***.MyActivity.onCreate(AppointmentListActivity.java:66)
06-28 12:55:16.975: E/AndroidRuntime(7089):     at android.app.Activity.performCreate(Activity.java:4465)
06-28 12:55:16.975: E/AndroidRuntime(7089):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
06-28 12:55:16.975: E/AndroidRuntime(7089):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
06-28 12:55:16.975: E/AndroidRuntime(7089):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:09:53.963

问题是，我在活动的背景下工作。如果我在活动本身上工作，它不会造成任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:24:39.117

> Resources$NotFoundException：资源不是可绘制的（颜色或路径）

从该异常的外观来看，您的自定义属性没有被识别。您可能需要执行以下一项或两项操作：

1.  将引用更改为`android:background="?attr/color_foreground"`.
2.  在`LinearLayout`定义中，添加对定义自定义属性的命名空间的引用，这只是项目的包名称：`xmlns:android="http://schemas.android.com/apk/res/com.my.package.name"`

我的猜测是第一个建议就足够了，但以防万一，您也可以尝试第二个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T02:49:31.533

以防有人再次遇到这个问题。改变

```
android:background="?color_foreground" 
```

至

```
style="?color_foreground" 
```

在主题中您可以指定（如果您有多个主题，您将在每个主题中一个一个添加，但颜色/样式不同，取决于您的设计）

```
<item name="color_foreground">@color/blue</item> 
```

或者

```
<item name="color_foreground">@style/blue</item> 
```

并以你的风格

```
<style name="blue">
    <item name="android:background">#0000FF</item>
</style> 
```

# jquery - 在 HTML 和 jQuery 中动态添加表单及其内容

> ID：11232902
> 
> 赞同：0
> 
> 时间：2012-06-27T18:39:36.820
> 
> 标签：jquery, html, frames

JavaScript：

```
$('.addTable').live('click', function () {
    var appendTxt = "<table id='tab1'>  
                <tr><td><input type='text'   name='input1' /></td><td><input type='text'   name='input2' /></td>
                    <td><input type='button' class='addRow' value='Add Row' /></td></tr></table>";
    $("table:last").after(appendTxt);
});

$('.addRow').live('click', function () {
    var appendTxt = "<td><input type='text'name='input1' /></td><td><input 
                type='text'name='input2' /></td><td><input type='button' class='addRow' value='Add Row'/></td> ";
    $("tr:last").after(appendTxt);
}); 
```

HTML：

```
<table id="tab">
    <tr>
        <td>
            <input type="text" name="input1" />
        </td>
        <td>
            <input type="text" name="input2" />
        </td>
        <td>
            <input type="button" class="addRow" value="Add Row" />
        </td>
    </tr>
</table>

<input type="button" class="addTable" value="addTable" /> 
```

当我点击“添加行”按钮时，我会动态地获得一个新行。当我点击“添加表格”按钮时，我得到一个新表格。

但是在此之后，当我在新表和旧表中都点击“添加行”时，我在最后一个添加的表中添加了一行，因为我已经将`$("tr:last").after(appendTxt)` 它附加到`<tr>`最新表中的最新表中。

有没有更好的方法来做到这一点，以便当我点击“新表”时，我可以在各个表中添加一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:48:51.723

在你上面的评论之后。

改变：

```
$("tr:last").after(appendTxt); 
```

到：

```
$(this).closest('table').find('tr:last').after(appendTxt); 
```

我假设您的添加行按钮存在于您添加新行的每个表中。

# html - 从隐藏的 HTML 元素中删除空间

> ID：11232903
> 
> 赞同：0
> 
> 时间：2012-06-27T18:39:38.660
> 
> 标签：html, forms, input, hidden

在隐藏某些 HTML 元素后，我需要一些帮助来删除空格。在上下文中，我有一个表单，我使用 GET 方法发送结果，所以我需要隐藏某些字段。但是，当我使用：

```
<input type = "hidden"...> 
```

它留下一个空行而不是没有行。

有任何想法吗？

这是问题的看法：http: [//jsfiddle.net/zRcqB/](http://jsfiddle.net/zRcqB/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:49:07.047

在您的小提琴中，您正在使用`<br />`标签跟踪隐藏的输入。删除这些，你就可以开始了。

查看更新的小提琴：http: [//jsfiddle.net/iambriansreed/82ZwM/](http://jsfiddle.net/iambriansreed/82ZwM/)

# unit-testing - 测试静态类时的困难示例 (C#)

> ID：11232904
> 
> 赞同：1
> 
> 时间：2012-06-27T18:39:38.753
> 
> 标签：unit-testing, c#-4.0, testability

我正在寻找一个示例来说明测试静态类与实例类时的困难。有人可以提供一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:42:40.650

使用其他类型的类被称为依赖于其他类型。当您对类中的方法进行单元测试时，您通常会尝试测试该方法正在做什么，而不是依赖项正在做什么。设置对象以支持这些场景的常用方法是使用[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)。依赖注入是一种提高可测试性的常见模式。静态类不能很好地与该模式配合使用，这使得使用静态类的类的单元测试变得困难。

例如，如果您有要测试的类“A”，并且它使用静态类“B”来执行您不想测试的操作，例如访问数据库，那么 A 类现在很难测试.

```
class A
{
    // this is hard to test because of the static call through B
    public void MethodToTest() 
    {
         // ...
         B.HitTheDatabase();
         // ...
    }
} 
```

有一些方法可以解决这个问题，例如在 B 周围编写一个包装器并将其注入到 A 中，或者使用[Moles](http://msdn.microsoft.com/en-us/library/ff798506.aspx)框架

# java - Java 7 bug Container.remove() 删除所有组件

> ID：11232907
> 
> 赞同：0
> 
> 时间：2012-06-27T18:39:44.473
> 
> 标签：java, awt, java-7

我有一个带有一个直接子级的 AWT 容器，并在索引 0 处添加一个新子级，使其可见，验证父 Frame 并重新绘制。（子类是扩展 Panel 的类，但这似乎无关紧要。）一切都很好，Container 包含 2 个直接子类，如预期的那样。

然后我通过隐藏它并从孩子那里调用`Container.remove(this)`来解雇孩子，然后验证并重新绘制容器。在 1.7 之前的所有以前的 JRE 上，这都可以正常工作，并且原始子项留在容器中。然而，在 1.7 上，`remove(this)`它也删除了原来的孩子，即它清空了 Container。调用`Container.remove(0)`具有相同的效果。有没有人知道如何解决这个问题？它看起来像一个可怕的 JVM 错误。

即 - 开始时：容器包含子 [A]。- 添加 B 后，Container 包含子项 [B,A]。- 调用 remove(this) 或 remove(0) 后，Container 不包含任何内容：[]。

虽然我可以在 之前检索原始子项`remove()`，然后`add()`将其返回，但这不可避免地会导致重大的重绘和不可接受的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:58:38.070

我认为不是真的，我不能模拟这个问题，

Win7、JDK7_04在我这边

![在此处输入图像描述](../Images/eb0306a981a34ac9e804aeb179f31b36.png)

![在此处输入图像描述](../Images/d8f508dc649b9cb2b2492c21ddd9af9d.png)

![在此处输入图像描述](../Images/a80aebc98a861bc2e2fd209d19aee3b1.png)

打印出

```
run:
 Components Count after Adds :2
 Components Count after Adds :3
 Components Count after Adds :4
 Components Count after Adds :5
 Components Count after Adds :6
 Components Count after Adds :7
 Components Count after Removes :6
 Components Count after Removes :5
 Components Count after Removes :4
 Components Count after Removes :3
 Components Count after Removes :2
 Components Count after Removes :1
BUILD SUCCESSFUL (total time: 2 minutes 14 seconds) 
```

从代码

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class AddComponentsAtRuntime {

    private JFrame f;
    private Container panel;
    private JCheckBox checkValidate, checkReValidate, checkRepaint, checkPack;

    public AddComponentsAtRuntime() {
        JButton b = new JButton();
        b.setBackground(Color.red);
        b.setBorder(new LineBorder(Color.black, 2));
        b.setPreferredSize(new Dimension(600, 10));
        panel = new Container();
        panel.setLayout(new GridLayout(0, 1));
        panel.add(b);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, "Center");
        f.add(getCheckBoxPanel(), "South");
        f.setLocation(200, 200);
        f.pack();
        f.setVisible(true);
    }

    private JPanel getCheckBoxPanel() {
        checkValidate = new JCheckBox("validate");
        checkValidate.setSelected(false);
        checkReValidate = new JCheckBox("revalidate");
        checkReValidate.setSelected(false);
        checkRepaint = new JCheckBox("repaint");
        checkRepaint.setSelected(false);
        checkPack = new JCheckBox("pack");
        checkPack.setSelected(false);
        JButton addComp = new JButton("Add New One");
        addComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton b = new JButton();
                b.setBackground(Color.red);
                b.setBorder(new LineBorder(Color.black, 2));
                b.setPreferredSize(new Dimension(600, 10));
                panel.add(b);
                makeChange();
                System.out.println(" Components Count after Adds :" + panel.getComponentCount());
            }
        });
        JButton removeComp = new JButton("Remove One");
        removeComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int count = panel.getComponentCount();
                if (count > 0) {
                    panel.remove(0);
                }
                makeChange();
                System.out.println(" Components Count after Removes :" + panel.getComponentCount());
            }
        });
        JPanel panel2 = new JPanel();
        panel2.add(checkValidate);
        panel2.add(checkReValidate);
        panel2.add(checkRepaint);
        panel2.add(checkPack);
        panel2.add(addComp);
        panel2.add(removeComp);
        return panel2;
    }

    private void makeChange() {
        if (checkValidate.isSelected()) {
            panel.validate();
        }
        if (checkReValidate.isSelected()) {
            panel.revalidate();
        }
        if (checkRepaint.isSelected()) {
            panel.repaint();
        }
        if (checkPack.isSelected()) {
            f.pack();
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                AddComponentsAtRuntime makingChanges = new AddComponentsAtRuntime();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:20:42.743

可能会发生此异常，因为在移除组件时触发了事件，并且在此事件处理方法中您仍然引用组件。例如，当您在代码中删除某个位置（除了在 actionPeformed() 中）时，最后一个组件仍然会触发/执行事件 actionPerformed。但通常 actionPerformed() 方法包含对用户操作（用户单击组件上的某处）做出反应的代码。因此，当最后一个组件被删除时，在 actionPerformed() 中对组件的任何引用都会导致异常。

对此的解决方案是将代码从 actionPerformed() 移动到例如 mouseClicked() 或其他事件处理程序，具体取决于您想要执行的操作。

# unix - UNIX 加入命令求助？

> ID：11232914
> 
> 赞同：1
> 
> 时间：2012-06-27T18:40:09.507
> 
> 标签：unix, sorting, join

我有两个要根据第一个字段加入的排序文件：

文件1：

```
sa01^DS0^Pri^PE^Prod^EC
sa02^D0^App^PE^Prod^EC
sa03^D0^App^PE^Prod^EC
sa04^D0^App^PE^Prod^EC
sa05^D0^App^PE^Prod^EC
sa06^D0^App^PE^Prod^EC
sa07^D0^App^PE^Prod^EC
sa^AS1^ABAP^PE^Prod^EC
sar^ERS^Enq^PE^Prod^EC 
```

文件2：

```
sa01^uz006p
sa02^ua009p
sa03^ua005p
sa04^uz002p
sa05^uz001p
sa06^uz011p
sa07^uz012p
sa^uz016p
sar^uz019p 
```

我的加入命令：

```
join -a1 -a2 -t'^' -1 1 -2 1 $FILE1 $FILE2 
```

给我这个：

```
sa01^DS0^Pri^PE^Prod^EC^uz006p
sa02^D0^App^PE^Prod^EC^uz009p
sa03^D0^App^PE^Prod^EC^uz005p
sa04^D0^App^PE^Prod^EC^uz002p
sa05^D0^App^PE^Prod^EC^uz001p
sa06^D0^App^PE^Prod^EC^uz011p
sa07^D0^App^PE^Prod^EC^uz012p
sa^uz016p
sar^ERS^Enq^PE^Prod^EC^uz019p 
```

为什么=（？我对两个文件都进行了排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:52:26.387

文件应该使用以下方式排序：

```
sort -t'^' -k1,1 
```

这使它正确排序，因为 ^ 是分隔符=)！我希望这对其他人有帮助！！！

# php - 如何持续监控 mysql 数据库中的表并触发 php 脚本对其进行处理？

> ID：11232915
> 
> 赞同：3
> 
> 时间：2012-06-27T18:40:11.547
> 
> 标签：php, mysql, monitoring

我想要做的是监控 mysql 中的一个表，该表总是由 sms 网关自动更新。

该脚本应被持续监控，一旦表中有新条目，应触发执行进一步操作的 php 脚本 ritn。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:43:43.960

我已经使用 cron 做了很多次。因此，您的 php 脚本首先查看是否有新条目，然后执行它需要执行的操作（如果有）。如果没有什么可做的，它会立即退出。要记住的一件事是，如果脚本需要很长时间才能运行，您需要确保相应地设置您的 cron 作业，以免它们重叠。

实现此目的的一种简单方法是在表中设置一个特殊列，指示该行是否已由 php 脚本检查。因此，当 php 脚本运行时，它会查找该字段为 false 的所有数据。像这样的东西：

```
SELECT id from my_table where dealt_with = FALSE; 
```

然后当它在这些行上运行时，它会更新它们：

```
UPDATE my_table set dealt_with = TRUE where id=1234; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:33:26.870

Jocelyn 为带有文档的项目提出了一个非常好的解决方案，否则它对于其他可能想要更改任何内容的开发人员来说是一个杀手，因为它总是被忽视。

MySQL 的限制`AFTER UPDATE`是它只能运行 SQL，而不是 PHP 脚本。因此，最好的解决方案是每 * 分钟运行一次[CRON](http://en.wikipedia.org/wiki/Cron)作业，以启动 PHP 脚本，该脚本检查自动增量字段（例如`id`字段）的最后一个值，例如 mysql_insert_id。使用此逻辑的原因是您不想检查行数，因为其中一些可能已被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:42:25.957

我建议在您的表中添加一个 AFTER UPDATE[触发器。](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)
每次更新记录时，您的触发代码都会自动执行。

触发器中的代码是 MySQL 语句的列表。

# python - 使用 Python 进行分块 HTTP 上传

> ID：11232916
> 
> 赞同：3
> 
> 时间：2012-06-27T18:40:12.820
> 
> 标签：python, http, upload, chunked

我开发了一个 REST api 来处理文件上传。由于系统处理大文件，因此 api 使用分块编码处理上传。该 api 与 JQuery 的文件上传插件一起工作正常，因此在服务器端没有问题。

我目前正在使用 python 脚本对大量大文件进行一些批处理。但是我找不到任何关于如何使用 python 进行分块上传的示例、代码片段或指南。我查找了 urllib2、httplib，但我无法让它工作。我也深入研究了 curl 但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:35:11.367

您可以使用 Pycurl，如[示例](http://pycurl.cvs.sourceforge.net/viewvc/pycurl/pycurl/examples/file_upload.py)中所示。如果省略 if 设置`pycurl.INFILESIZE`，Pycurl 将执行*分块*上传，因为它不知道要上传的数据的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:54:26.107

您需要将文件作为多部分表单数据上传。可以通过将编码类型设置为“multipart/form-data”在 curl 中完成。类似的上传可以使用这里提到的东西来完成 - [Using MultipartPostHandler to POST form-data with Python](https://stackoverflow.com/questions/680305/using-multipartposthandler-to-post-form-data-with-python)

# erlang - Erlang：如何制作 UDP 数据包

> ID：11232917
> 
> 赞同：1
> 
> 时间：2012-06-27T18:40:18.823
> 
> 标签：erlang, udp, packets

如何在 Erlang 中制作 UDP 数据包？数据包的主干：

字节 0-3：SAMP 字节 4：127 字节 5：0 字节 6：0 字节 7：1 字节 8：'7777' 的第一个字节 字节 9：'7777' 的第二个字节 字节 10：'i'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:00:13.030

```
<<SAMP:32,127,0,0,1,7777:16,$i>> 
```

假设`SAMP`是一个变量并且`'i'`是字符“i”。

查看[Bit Syntax Expressions](http://www.erlang.org/doc/reference_manual/expressions.html#id77874)了解二进制文件的语法，查看[Bit Syntax Examples](http://www.erlang.org/doc/programming_examples/bit_syntax.html)了解更多示例。第二个有一个用一位语法表达式/模式编写IP数据包的例子，非常整洁。

# css - django staticfiles 在 url 根目录

> ID：11232922
> 
> 赞同：9
> 
> 时间：2012-06-27T18:40:27.083
> 
> 标签：css, django, static, media, django-staticfiles

我有一个关于新的 Django 1.3 静态文件框架的一般性问题。

我真的很喜欢 Django 1.3 中引入的新的 Django 静态文件功能。通常，我设置 STATIC_URL="/static/" 并将 {{ STATIC_URL }} 模板标签输入到我的模板中。开发服务器如何自动提供静态文件并且我的所有内容都按预期提供，这很棒。

```
The {{ STATIC_URL }} would be substituted in the template and might serve up files like this...
example.com/static/css/master.css
example.com/static/images/logo.png
example.com/static/js/site.js 
```

但是，我正在使用静态媒体安装在 url 根目录的旧站点。例如，静态 url 的路径可能如下所示：

```
example.com/css/master.css
example.com/images/logo.png
example.com/js/site.js 
```

它不使用“静态”url 命名空间。

我想知道是否有办法让新的静态文件功能不使用静态命名空间并提供上面的 url，但仍然保留新的静态文件框架的好处（收集静态文件、开发服务器提供的静态文件等）。我尝试设置 STATIC_URL="" 和 STATIC_URL="/"，但似乎都没有达到预期的效果。

有没有办法配置静态文件以在没有命名空间的情况下提供静态文件？感谢您的考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:53:17.513

`static`您可以手动添加项目目录中不存在的额外位置：

**网址.py**

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = patterns('',
    # ... the rest of your URLconf goes here ...
)

if settings.DEBUG:
    urlpatterns += static('/css/', document_root='app_root/path/to/css/')
    urlpatterns += static('/images/', document_root='app_root/path/to/images/')
    urlpatterns += static('/js/', document_root='app_root/path/to/js/') 
```

这将为 DEBUG 开发服务器映射媒体。当您运行生产模式服务器时，您显然会从 Web 服务器处理这些静态位置，而不是将请求发送到 django。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:33:40.053

为什么不保留静态文件功能并简单地在 Web 服务器级别使用重写来提供内容。

例如：

```
rewrite /css /static permanent; (for nginx) 
```

这将使您的项目目录更加整洁，并且使您将来可以更轻松地移动静态目录，例如将您的 STATIC_URL 移动到 CDN。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-10T10:39:01.750

这是您设置*urls.py*以在 Django 1.10 上同时提供 index.html 和其他静态文件的方式（同时仍然能够提供其他 Django 视图）：

```
from django.contrib.staticfiles.views import serve
from django.views.generic import RedirectView

urlpatterns = [

    # / routes to index.html
    url(r'^$', serve,
        kwargs={'path': 'index.html'}),

    # static files (*.css, *.js, *.jpg etc.) served on /
    url(r'^(?!/static/.*)(?P<path>.*\..*)$',
        RedirectView.as_view(url='/static/%(path)s')),
] 
```

请参阅[此答案](https://stackoverflow.com/a/40525157/544059)，我在其中对此类配置进行了更完整的解释——尤其是如果您想将其用于生产。

# uniobjects - 是否有与 UniBASIC LOCATE 等效的 UniObjects？

> ID：11232925
> 
> 赞同：3
> 
> 时间：2012-06-27T18:40:43.617
> 
> 标签：uniobjects

我查看了用于 Java 和 VB 的 UniObjects 的文档，但没有看到不求助于循环来搜索 UniDynArray 的方法。

这是你认为依赖 API 语言（即 Java）的意图吗？

这就是我最终在 VBScript 中所做的。

```
If InStr(daShipAlones.TextValue, sDocNum) = 0 Then 
    ....
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:12:11.510

我同意您的发现，即没有“UniObjects”方式来搜索 UniDynArray。

通过将 UniDynArray 转换为字符串数组，然后使用语言的 IndexOf 等效项来检索搜索词的位置，您可以搜索而不会导致循环（并且在一行中）。在 C#/VB 中，可以这样做：

```
Array.IndexOf(myUniDynArray.StringValue.Split(UniConstants.FieldMarker), "searchterm") 
```

Where`UniConstants.FieldMarker`本质上是一个别名`(char)254`

# c++ - SDL C++ TTF 一段时间后随机消失（并且不回来）

> ID：11232926
> 
> 赞同：2
> 
> 时间：2012-06-27T18:40:45.587
> 
> 标签：c++, text, sdl, truetype

我正在使用 SDL 在 c++ 中制作一个类似 Yahtzee 的（带有得分的骰子游戏）。这是我自己开发的第一个 SDL 项目。

**问题可以描述为**：当我开始游戏时，文本渲染良好。我可以得分并继续比赛。*但是*，如果我等待几分钟（无论我是否还在玩），文本最终会停止呈现。我可以继续游戏，但是没有文字显示，之前显示的文字也不再显示。

我对这个问题完全感到困惑。直到现在才发生，因为之前的比赛都没有足够长的时间让我注意到。

**注意：**我偶然发现的一件事是软件和硬件渲染。我不知道为什么，但我尝试使用硬件进行渲染，但这并没有解决问题。

**另一个注意事项：**代码的文本渲染部分接近结尾，在一个 for 循环中。

我迷路了，有人能帮帮我吗？我会发布代码，但它很长，很荒谬，我认为这不是问题。

```
int GUI(State& GameState)
{       
apply_surface( 0, 0, background, screen ); //background
apply_surface( SCORE_X, SCORE_Y, scoreImage, screen ); //score card
apply_surface( KEPT_TRAY_X, KEPT_TRAY_Y, keptTray, screen ); //kept tray
apply_surface( TEXT_BOX_X, TEXT_BOX_Y, textBox, screen ); //text box

//Blatantly handles only the next event on the queue per frame
if( SDL_PollEvent( &event ) )
    eventHandler(GameState);

//place button
if(GameState.placeButtonClicked)
{
    apply_surface( GameState.buttonV[GameState.placeButtonClicked].x, GameState.buttonV[GameState.placeButtonClicked].y, clickedButton, screen );
}

//dice[1]
apply_surface( *GameState.diceV[1].pointX, *GameState.diceV[1].pointY, *GameState.diceV[1].surfaceValue, screen );

//dice[2]
apply_surface( *GameState.diceV[2].pointX, *GameState.diceV[2].pointY, *GameState.diceV[2].surfaceValue, screen );

//dice[3]
apply_surface( *GameState.diceV[3].pointX, *GameState.diceV[3].pointY, *GameState.diceV[3].surfaceValue, screen );

//dice[4]
apply_surface( *GameState.diceV[4].pointX, *GameState.diceV[4].pointY, *GameState.diceV[4].surfaceValue, screen );

//dice[5]
apply_surface( *GameState.diceV[5].pointX, *GameState.diceV[5].pointY, *GameState.diceV[5].surfaceValue, screen );

//rollButton
if(GameState.navV[1].clicked)
{
    apply_surface( GameState.navV[1].x, GameState.navV[1].y, rollButtonClicked, screen);
}
else
{
    apply_surface( GameState.navV[1].x, GameState.navV[1].y, rollButton, screen );
}

//endTurnButton
if(GameState.navV[2].clicked)
{
    apply_surface( GameState.navV[2].x, GameState.navV[2].y, endTurnButtonClicked, screen );
}
else
{
    apply_surface( GameState.navV[2].x, GameState.navV[2].y, endTurnButton, screen );
}

//displaying the clickedButton if a score is clicked
if(GameState.placeButtonClicked != 0)
{
    apply_surface( GameState.buttonV[GameState.placeButtonClicked].x, GameState.buttonV[GameState.placeButtonClicked].y, clickedButton, screen );
}

//displaying the scores for each "button" (each score segment)
for(int i = 1; i <= (GameState.buttonV.size() - 1); i++)
{
    if(GameState.buttonV[i].value >= 0)
    {
        message = TTF_RenderText_Solid( scoreFont, GameState.buttonV[i].valueString, scoreFontColor );
        apply_surface( GameState.buttonV[i].x + 10, GameState.buttonV[i].y + 2, message, screen );
    }
}

if( SDL_Flip( screen ) == -1 )
{
    return 1;
}

decGUICounters(GameState);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:37:10.913

我在浏览这个网站时找到了答案（花了一段时间！）。希望我可以帮助其他人解决我的发现：

问题是我反复将新文本设置为消息：

```
message = TTF_RenderText_Solid(etc); 
```

当您调用 时`TTF_RenderText_Solid()`，它会向表面指针（消息）返回一个新表面。但是，它不会释放旧表面包含的 RAM。

您所要做的就是：`SDL_FreeSurface(message);`在将新内存分配给表面指针（消息）之前。

这可以防止内存泄漏，从而防止您的内存被 CPU 随机清除。

```
TL;DR:

SDL_FreeSurface(message); 
```

前：

```
message = TTF_RenderText_Solid(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T15:46:00.093

我遇到了同样的问题并解决了。我只是想补充一下，对于有同样问题的人，我们也应该破坏纹理。这是我的代码：

```
void fwRenderText(const char* text,int x, int y,int iw,int ih)
{
    surfaceMessage = TTF_RenderText_Solid(Sans, text, White);
    Message = SDL_CreateTextureFromSurface(gRenderer, surfaceMessage);
    White = { 255, 255, 255, 255 };

    Message_rect.x = x;  //controls the position - x
    Message_rect.y = y;  // controls the position - y
    Message_rect.w = iw; // controls the width of the rect
    Message_rect.h = ih; // controls the height of the rect

    SDL_RenderCopy(gRenderer, Message, NULL, &Message_rect);
    SDL_DestroyTexture(Message);        // Free up texture
    SDL_FreeSurface(surfaceMessage);    // Free up surface
} 
```

# fluent-nhibernate - Fluent NHibernate 多对多不保存

> ID：11232928
> 
> 赞同：3
> 
> 时间：2012-06-27T18:40:50.807
> 
> 标签：fluent-nhibernate, automapping

我在尝试使用 Fluent NHibernate 中的 Automapper 获得多对多关系以在 NHibernate 中保存连接记录时遇到问题。

SO上有很多关于这个的其他帖子，但到目前为止，他们都没有解决这个问题，想知道我是否在做一些不同的事情。

我有要映射的应用程序设置，当我在数据库中手动创建连接记录时，我确实取回了数据，因此在读取级别它正确映射，但它不会保持关系。

这是相关的映射。我正在使用具有默认约定的自动映射器，但最终基于另一篇 SO 帖子尝试了此操作。

```
.Mappings(m => {
                        m.AutoMappings.Add(AutoMap.AssemblyOf<User>);
                        m.AutoMappings.Add(AutoMap.AssemblyOf<PostalCode>);
                        m.AutoMappings.Add(
                                AutoMap.AssemblyOf<VPA>()
                                    .Override<VPA>(v => 
                                        v.HasManyToMany(x => x.PostalCodes)
                                            .Table("PostalCodesToVPAs")
                                            .ParentKeyColumn("PostalCode_Id")
                                            .ChildKeyColumn("VPA_Id")
                                            .Cascade.SaveUpdate())
                                    .Override<PostalCode>(p => 
                                        p.HasManyToMany(x => x.VPAs)
                                            .Table("PostalCodesToVPAs")
                                            .ParentKeyColumn("VPA_Id")
                                            .ChildKeyColumn("PostalCode_Id")
                                            .Cascade.SaveUpdate().Inverse())
                            );
                    }) 
```

我的实际保存看起来像这样。这可能有点矫枉过正，因为我明确地保存了邮政编码和 vpa，但我读了很多关于人们在映射中遇到逆行问题的信息，所以我想尝试两者。它没有用。

```
var postalCode = new PostalCode {Value ="90210", CreatedBy = 0, CreationDate = DateTime.Now, ModifiedBy = 0, ModifiedDate = DateTime.Now};
vpa.PostalCodes.Add(postalCode);
postalCode.VPAs.Add(vpa);
PostalCodeService.Save(postalCode);
VPAService.Save(vpa); 
```

在幕后 service.save 调用做

```
return (int)Session.Save(obj); 
```

有没有人看到这个并且知道为什么它不会保存加入记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T23:07:44.313

想出了解决方案，想更新以防万一有人遇到同样的问题。

您必须将保存调用包装在事务中，否则它不会提交加入记录。我最终修改了该服务代码以读取

```
using (var tx = Session.BeginTransaction()) {
    Session.Save(obj)
    tx.commit();
    return obj.Id;
} 
```

# opencv - 使用 OpenCV 打开 avi 文件：ffmpeg？

> ID：11232941
> 
> 赞同：0
> 
> 时间：2012-06-27T18:41:32.517
> 
> 标签：opencv, ffmpeg, codec

[这个问题与我在这里](https://stackoverflow.com/questions/11194713/open-and-read-avi-files-with-opencv-ubuntu)问的一个问题有关。

我在专用于 OpenCV 的 Willow Garage 网站上读到，自 1.2.x 版以来，在安装 OpenCV 时我们不必照顾 ffmpeg。[在这里](http://opencv.willowgarage.com/wiki/FFMPEG)。

但是，在 Stackoverflow 上提出的一些[问题表明相反。](https://stackoverflow.com/questions/7075180/how-to-compile-opencv-2-3-with-ffmpeg-support-with-visual-studio-2010)

所以我该怎么做 ？我是否必须重新编译 OpenCV 并执行一些与 ffmpeg 相关的特殊操作才能最终在我的 Linux 系统上打开 avi 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:48:46.877

问题解决了。根据 Willow Garage 的说法，自 OpenCV 1.2.x 以来，FFMPEG 确实默认为 ON。这意味着您不必照顾它。然后，我试图向 Astor 解释，然后通过使用 WITH_QT=ON 重新编译 OpenCV 毫无疑问地确认，Qt 与这个问题无关。视频“只是”必须以特定格式编码，即 MPEG-4 XVID。我使用 mencoder 来转换我的文件。

# jquery - jquery、引导、验证和所见即所得

> ID：11232948
> 
> 赞同：1
> 
> 时间：2012-06-27T18:41:51.270
> 
> 标签：jquery, asp.net-mvc, validation, twitter-bootstrap, cleditor

我有一个基于 asp.net MVC 并使用 twitters 引导程序的应用程序。为了让引导样式起作用，我添加了：

```
$.validator.setDefaults({
    highlight: function (element) {
        $(element).closest(".control-group").addClass("error");
    },
    unhighlight: function (element) {
        $(element).closest(".control-group").removeClass("error");
    }
}); 
```

到目前为止，一切都很好。今天，我在站点上添加了一个 cleditor，但由于 cleditor 隐藏了它（所有所见即所得的编辑器也是如此），因此在 textarea 上丢失了验证。所以我添加了以下代码来解决这个问题。

```
$.validator.setDefaults({ ignore: '' }); 
```

然后我添加了一个函数，它在验证之前对 textarea 做一些工作。这是一个必填字段，所以我正在测试它是否只包含空格、非中断空格和中断。如果是这样，我将其清除，以便我的验证正确捕获它。

```
$('#myForm').submit(function () {
    var contents = editor[0].$area[0].value;
    var patt1 = new RegExp('^((<br>)*(\s)*(&nbsp;)*)*$');
    if (contents.match(patt1))
        editor[0].$area[0].value = '';
    return true;
}); 
```

这个功能在验证之前触发，表单提交停止，错误信息显示出来，这一切都很好。问题是上面设置的验证器默认值不会被触发，因此这些字段的样式不合适。

更奇怪的是，如果我第二次提交表单，验证器默认值就会运行，并且字段的样式会适当。

我可以通过在 MVC 中创建自定义验证属性来解决此问题，但我仍然想知道为什么会这样，以及是否可以修复它。

作为旁注，我在上面使用的正则表达式来查找空格和中断等的组合不起作用。我已经把它放在两个正则表达式测试器中，它工作正常。在我的应用程序中，它找不到匹配项。我是一个正则表达式新手，所以可能有更好的方法来编写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T00:21:32.577

尝试在规则正上方的行中添加忽略：''。一个空字符串为我完成了这项工作。

# asp.net - 将图像按钮的事件处理程序作为字符串传递给 asp.net 中的用户控件

> ID：11232949
> 
> 赞同：1
> 
> 时间：2012-06-27T18:41:56.580
> 
> 标签：asp.net, user-controls, event-handling, imagebutton

我正在制作一个显示图像按钮的用户控件。我正在从 xml 文件中获取 id、imageURL 和图像 onclick 事件处理程序名称。但是不接受事件处理程序名称。我在 .ascx.cs 中的代码是：

```
var imageDetails = from image in imageDetailsXML.Descendants("image")
                       select new
                       {
                           imgID = image.Element("imgID").Value,
                           imgUrl = image.Element("imgUrl").Value,
                           imgClickHandler = image.Element("imgClickHandler").Value
                       };
    foreach (var imageBtn in imageDetails)
    {
        ImageButton imgBtn = new ImageButton();
        imgBtn.ID = imageBtn.imgID.ToString();
        imgBtn.ImageUrl = imageBtn.imgUrl.ToString();
        imgBtn.Height = height;
        imgBtn.Width = width;
        imgBtn.Visible = false;
        imgBtn.Click += new ImageClickEventHandler(imageBtn.imgClickHandler); 
        Panel1.Controls.Add(imgBtn);
     } 
```

imgClickHandler 在 .aspx.cs 页面中实现。如何将用户控件内的图像按钮的图像单击事件绑定到.aspx.cs页面中的处理程序？我转到以下链接：[如何使用委托和事件处理程序进行用户控制](https://stackoverflow.com/questions/2920145/how-to-work-with-delegates-and-event-handler-for-user-control) ，但无法理解解决方案。请帮忙。

# java - 我们可以说 Java 代理作为委托人工作吗？

> ID：11232953
> 
> 赞同：1
> 
> 时间：2012-06-27T18:42:07.470
> 
> 标签：java, proxy-classes

问这个问题的目的是提高我对 Java 代理和委托的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:50:59.433

语义上 Proxy*委托给某些实现，但这只是*[Proxy Pattern](http://en.wikipedia.org/wiki/Proxy_pattern)意图的副作用。

目的是在代理之前拦截并做额外的逻辑或修改逻辑，或者可能在Proxy返回结果之前影响返回值。

拦截和修改不是[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)的意图。

在那里，使系统中的接口与实现松散耦合是一种抽象。

[Java 中有一个特定于 Java 的动态代理](http://www.ibm.com/developerworks/java/library/j-jtp08305/index.html)的概念，它们的目的是构建适配器模式和装饰器模式的实现。

# google-docs-api - Google 表单：我可以创建一个公共网站而不是访问私有表单吗？

> ID：11232956
> 
> 赞同：0
> 
> 时间：2012-06-27T18:42:18.313
> 
> 标签：google-docs-api

我的雇主使用 Google Apps（企业版，而不是免费版）。我想创建一个无法单独使用 URL 访问的表单。可以通过登录谷歌应用程序帐户或通过向公众开放的网站访问该表格。这可能吗？

我已经尝试研究 google api、新的服务帐户和身份验证/授权协议，这听起来很有希望，但我不确定目前是否支持这样的东西。

感谢您的帮助，安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:48:27.887

如果您的意思是不向公众开放，那么只需为公司创建一个内部网，然后公司只有访问权限，如果您需要从家里或其他地方访问，请启用 VPN，但可能很难设置。我不认为谷歌会允许你添加一个 URL。

# python - 不使用真实数据库的 Python 数据结构的外键约束

> ID：11232958
> 
> 赞同：0
> 
> 时间：2012-06-27T18:42:23.867
> 
> 标签：python, data-structures, foreign-keys, relationship

我正在寻找一种方法来管理一组 Python 数据结构，这些数据结构可以很好地融入关系模式，但没有真正的数据库或解析 SQL 的开销。可以假设数据量足够小以方便地放入内存（例如，没有结构包含超过一百万个元素）。

最重要的是，我想自动强制执行外键约束。在违反外键约束时触发断言失败就足够了；它总是一个编程错误。

这是我想要完成的真实示例。我确实有执行此操作的代码，但是如果没有*自动*外键约束检查，它会变得容易出错并且断言混乱。

（这些是代码的数据结构，用于分析机器代码程序的执行跟踪，出于好奇。记录器程序将每个唯一的 (previous_instruction_addr, current_instruction_addr, stack_pointer_change) 元组输出一次。）

*   `instrs`: set(int) (看到的机器指令的地址)
*   `next_instrs`: dict(int -> set(int))，一个字典，将一条指令（必须在 in `instrs`）映射到一组指令（所有指令都必须在 in `instrs`）。从关系上讲，是`instrs`×的一个子集`instrs`。
*   `stk_changes`: dict((int,int) -> set(int))，一个字典，映射一对指令（这对指令必须在其中`next_instrs`）到堆栈指针寄存器中的一组变化
*   `jumps`: set((int,int))，`next_instrs`关系的子集，被认为是从一条指令到另一条指令的跳转（包括函数调用或函数返回）。实际上，我目前将其实现为两个字典，因为我需要能够以“这条指令在哪里跳转？”的形式进行查询。和“什么指令跳转到这个指令？”。
*   `calls`: set((int,int))，其中的一个子集`jumps`是函数调用。
*   `rets`: set((int,int))，其中的一个子集`jumps`是函数的返回值。
*   `basic_blocks`: set(int), 的子集`instrs`；*基本块*的第一个地址（执行只从第一条指令开始的代码块，即没有跳转到中间，并且只在最后一条指令结束，即没有从中间跳转）
*   `containing_bb`: dict(int -> int)，包含每条指令的基本块。`instrs`×的子集`basic_blocks`
*   `functions`: set(int), 被认为是函数开始的基本块。的一个子集`basic_blocks`。
*   `function_calls_by_bb`: dict(int -> int)，由基本块调用的函数；`basic_blocks`×的子集`functions`

等等; 你明白了。

我本质上要寻找的是一种管理所有这些结构并自动执行所有外键约束的方法；例如，`basic_blocks.add(something)`如果`something`不是`instrs`. 同样，`basic_blocks.remove(something)`如果`something`仍然由`function_calls_by_bb`. 显然，与例如 SQL 数据库模式中的外键约束相比，为所有这些结构编写断言`add()`和`remove()`方法是不必要的冗长且容易出错。

我目前正在使用带有内存中 sqlite 数据库的 sqlalchemy，这让我能够以一种很好的方式描述约束，但理想情况下，我正在寻找不涉及数据库引擎的更轻量级的东西。（可能是数据库引擎最终是做我正在做的事情的正确方法，但目前我正在评估替代方案。）

或者，如果你能想到其他方法来管理这样的结构，我也有兴趣了解这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:36:51.413

使用sqlite。无需安装服务器，您可以免费获得外键约束。如果这是一对表的问题，您可以对检查进行硬编码，但正如您所发现的，当您必须重新实现这么多 DBMS 的设计用途时，它就会失控。

# javascript - Javascript 正则表达式从句子中检索变量

> ID：11232960
> 
> 赞同：1
> 
> 时间：2012-06-27T18:42:26.630
> 
> 标签：javascript, regex, nlp

我想知道是否可以使用正则表达式或类似的方法从预定义的句子中提取一些变量。

例如

如果这是模式...

```
"How many * awards did * win in *?" 
```

还有人打字...

```
"How many gold awards did johnny win in 2008?" 
```

我怎么能以某种方式返回...

```
["gold","johnny","2008"] 
```

我还想在检索变量之前返回它与模式匹配的事实，因为会有许多不同的模式。注意：某人也可以键入多个单词来代替 *，例如*johnny english*而不是*johnny*

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:45:46.093

```
var text = "How many gold awards did johnny win in 2008?";
var query = text.match(/^How many ([^\s]+) awards did ([^\s]+) win in ([^\s]+)\?$/i);
query.splice(0,1); //remove the first item since you will not need it
query[0] //gold
query[1] //johny
query[2] //2008 
```

有关详细信息，请参阅[MDN - 匹配](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)。

## 更新

好像你想`johny english`在`How many gold awards did johnny english win in 2008?`.
这是正则表达式的更新版本：

```
/^How many (.+) awards did (.+) win in (.+)\?$/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:26:16.483

基于 Derek 的回答和 SimpleCoder 的评论，这里将是完整的功能：

```
// This function escapes a regex string
// http://simonwillison.net/2006/jan/20/escape/
function escapeRegex(text) {
    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
}

function match(pattern, text) {
    var regex = '^' + escapeRegex(pattern).replace(/\\\*/g, '(.+)') + '$';
    var query = text.match(new RegExp(regex, 'i'));
    if (!query)
        return false;

    query.shift(); // remove first element
    return query;
}

match("How many * awards did * win in *?", "How many gold awards did johnny win in 2008?"); 
```

# c++ - 为什么 RTTI 似乎不受欢迎？

> ID：11232969
> 
> 赞同：4
> 
> 时间：2012-06-27T18:42:43.070
> 
> 标签：c++

似乎在我读到的所有地方，图书馆都夸耀不需要 RTTI，或者有一篇文章建议不要使用它。它有什么不好，为什么不需要它是一件好事？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T18:45:01.910

1.  因为使用它通常意味着您正在颠覆多态性 ( `if (type is foo) { do this; } else if (type is bar) { do that; } else ...`)，这通常意味着您将自己设计到了一个角落，需要重新考虑您的设计。

2.  因为 C++ 编译器的作者在优化多态行为方面付出了很多努力，但在优化 RTTI 的使用方面却很少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T18:45:47.627

C++ 允许使用模板进行大量静态技巧，从而减少了对 RTTI 的需求（一切在编译时都是通用的，但在运行时是具体的）。

相反，处理类的“真正”（SmallTalk-like）OOP 方式需要动态绑定和 RTTI。

C++ 允许两者，但是过多的动态转换和虚函数可能并且确实会降低性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:45:59.307

许多精简的嵌入式系统将具有不支持 RTTI 的更简单/更小的实现。如果您的库不需要它，那么您可以移植到更多系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:52:28.297

RTTI 为 CRT（C 运行时）引入了更大的角色。C++ 开发人员珍惜执行速度。人们最不想看到的就是引入运行时，这会相对减慢应用程序的速度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T18:52:41.300

RTTI 做了一些在设计时指定的全局唯一序数可以做得更好的事情。不使用 RTTI 的两个原因。

Performance : It is non trivial to come up with a an implementation that scales as well as using ordinals / enums to represent types, and since you don't want namespace collisions you have to use strings, not just strings, globally unique strings. In scripting languages everything is a string inately, thus there is no frowning in these sorts of languages.

Design Elegance : Ordinal based typing works, and if your using it, chances are you had the foresight to design the system properly from the get-go. Such design are pretty much always better than relying on RTTI.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-29T21:58:53.263

It is not a good thing (to not have/use RTTI). Binding should be as late as possible (but not later). Speed and power consumption needs limit you in how late you can bind, but developments in chip technology mean more and more projects can afford to do later binding. Later binding allows design decisions to be made later, when more information is available allowing better decisions.

# ruby-on-rails - Rails“find_all_by”与“.where”

> ID：11232971
> 
> 赞同：27
> 
> 时间：2012-06-27T18:42:50.013
> 
> 标签：ruby-on-rails, where, dynamic-finders

我有以下代码：

```
def maturities
  InfoItem.find_all_by_work_order(self.work_order).map(&:maturity)
end 
```

我正在考虑将其更改为：

```
def maturities
  InfoItem.where(work_order: self.work_order).map(&:maturity)
end 
```

这样做会有什么好处吗？它似乎`.where`比`find_all_by`现在更普遍。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-27T19:23:08.493

我的观点是使用`.where`是一种更好的方法。

当您使用基于属性的查找器时，您将不得不通过缺少调用的方法进行隧道化，并最终定义一个类方法 via `class_eval`，该方法返回您的结果。这是您可能不需要做的额外处理。

此外，串在一起：find_by_this_and_this_and_this_and_this... 会变得丑陋。

[在此处查看 rails 如何完成基于属性的查找器](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/dynamic_matchers.rb)

github上的*模块DynamicMatchers*缺少方法：

```
def method_missing(name, *arguments, &block)
  match = Method.match(self, name)

  if match && match.valid?
    match.define
    send(name, *arguments, &block)
  else
    super
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:11:40.407

我认为主要优点是能够添加额外的标准到哪里，find_all_by 仅限于动态选择器的字段。如果您只有一个条件要搜索，那么我认为这是一种清洗，但是当您开始添加 3 或 4 时，动态查找器可能会很难看。散列很好看，如果需要，您可以将条件散列作为参数传递。动态查找器很酷，但我认为哪里可以更简洁地扩展并且更具可读性。

# asp.net - ASP.NET 中的子站点实现

> ID：11232974
> 
> 赞同：2
> 
> 时间：2012-06-27T18:42:58.827
> 
> 标签：asp.net, iis

我在 ASP.NET 中有一个网站。现在我需要在这个主站点之外创建子站点。这些子站点共享同一个数据库，但使用不同的母版页、主题、CSS、模板等。我应该如何在 IIS 中配置子站点？

我必须将子站点创建为单独的项目吗？或者，是否可以将子站点嵌套在主项目本身中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:48:12.333

你需要考虑很多事情：

*   您将拥有多少个子网站？
*   子站点是手动配置还是自动配置？
*   是否需要流程边界？IIS 应用程序和虚拟目录可以以不同的方式运行。如果所有者不关心隔离代码（或不想要开销），则目录可能是某些站点中的子站点。
*   开发人员将如何更新网站？他们会使用 Visual Studio 管理每个子站点吗？您可能希望对文件系统具有不同的权限，甚至希望阻止父站点中文件的任何可见性。您可能需要考虑如何在此处设置和启用 FTP（或更好的 SSH）访问，因为这与您的整体问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:49:15.737

你可以去任何一种方式。您可以在您的站点下创建一个单独的文件夹，该文件夹可以充当您的子站点，并为此文件夹中的文件指定不同的母版页、主题、css、模板等。

但更清洁的实现是拥有一个实际的子站点。这将独立于主站点。因此，您使用所需资源创建了一个不同的项目。在 IIS 中链接这个新项目的方法是右键单击并创建一个虚拟目录 (IIS 6) 或右键单击并在父网站下创建一个新应用程序 (IIS 7)。然后将其指向新的项目路径。

由于这两个站点将共享一个公共数据库，因此我还建议创建一组访问数据的 Web 服务，并且每个站点都可以从中获取数据。

# excel - 从水平行或字符串中删除重复值

> ID：11232977
> 
> 赞同：4
> 
> 时间：2012-06-27T18:43:18.750
> 
> 标签：excel, vba, duplicates

我有一个由大约 50,000 行组成的数据集，每行（或单元格）的值用逗号分隔。

```
item 1, item 2, item 1, item 1, item3, item 2, item 4, item3 
```

目标输出很简单

```
item 1, item 2, item3, item 4 
```

我可以使用 excel、open office calc、notepad++ 或任何其他免费提供的程序（我找到了一个 javascript 解决方案，但是它是针对单个字符串的，尝试运行它 50,000 次要么不起作用，要么需要的时间比我长有，而且我不知道足够的JS来调整它）

关于如何做到这一点的任何建议？

<*编辑注意某些项目将包含空格*>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:51:21.550

应该让你开始。关闭屏幕更新和计算以获得更好的性能...

```
Sub Tester()

    Dim dict As Object
    Dim arrItems, c As Range, y As Long
    Dim val

    Set dict = CreateObject("scripting.dictionary")

    For Each c In ActiveSheet.Range("A1:A100").Cells

        arrItems = Split(c.Value, ",")
        dict.RemoveAll
        For y = LBound(arrItems) To UBound(arrItems)
            val = Trim(arrItems(y))
            If Not dict.exists(val) Then dict.Add val, 1
        Next y

        c.Offset(0, 1).Value = Join(ArraySort(dict.keys), ",")

    Next c

End Sub 
```

对键进行排序：

```
Function ArraySort(MyArray As Variant)

    Dim First           As Integer
    Dim Last            As Integer
    Dim i               As Integer
    Dim j               As Integer
    Dim Temp

    First = LBound(MyArray)
    Last = UBound(MyArray)
    For i = First To Last - 1
        For j = i + 1 To Last
            If MyArray(i) > MyArray(j) Then
                Temp = MyArray(j)
                MyArray(j) = MyArray(i)
                MyArray(i) = Temp
            End If
        Next j
    Next i
    ArraySort = MyArray

End Function 
```

# ruby-on-rails - 在 Rails 3.2 中使用 specjour

> ID：11232978
> 
> 赞同：1
> 
> 时间：2012-06-27T18:43:19.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails, specjour

通过使用这些钩子（在 .specjour/hooks.rb 中定义），我们让 specjour (0.4.1) 与我们的 rails 应用程序（rails 3.0.12 & rspec 2.5.0 & rspec-rails 2.5.0）一起工作：

```
Specjour::Configuration.before_test = lambda do
  Fixtures.reset_cache if defined?(Fixtures)
end

Specjour::Configuration.after_fork = lambda do
  load('Rakefile')
  Rake::Task['db:test:load'].execute
end 
```

我们刚刚升级到 rails 3.2.6 & rspec 2.10.0 & rspec-rails 2.10.1 & specjour 0.5.6。当我们运行时，所有规范都通过了`rake spec`。

当我们使用 specjour 运行规范时，我们有很多规范失败。我们通过修补[已知的 rspec-core 问题](https://github.com/rspec/rspec-core/issues/621)来解决它以保留配置（而不是重置它）。我们解决了一个夹具问题（更改了名称）。许多仍然失败的规范似乎与使用 Rails 缓存的代码有关。

**有谁知道适用于 rails 3.2.6 的 rspec / rspec-rails / specjour （和/或钩子/解决方法/任何东西）的版本组合？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T10:44:59.787

我们用

```
gem "rails", "3.2.17"
gem "rspec-rails", "~> 2.14.0"
gem "specjour", "~> 0.7.0" 
```

它对我们来说很好。

# c# - 如何一次从c#多次插入sybase

> ID：11232981
> 
> 赞同：0
> 
> 时间：2012-06-27T18:43:34.323
> 
> 标签：c#, sql, sap-ase

我是 sybase 数据库的新手。我正在尝试使用以下代码插入多行

```
string sql="INSERT INTO dbo.table1 (c1,c2,c3)
     VALUES ('C1','c2','c2'); INSERT INTO dbo.table1 (c1,c2,c3)
     VALUES ('C1','c2','c2'); ";

                Sybase.Data.AseClient.AseCommand cmd = new Sybase.Data.AseClient.AseCommand();
                cmd.CommandType = System.Data.CommandType.Text;
                cmd.CommandText = sql;
                cmd.CommandTimeout = 30 * 60;`enter code here`
                cmd.Connection = conn;
                cmd.ExecuteNonQuery(); 
```

我收到错误“';'附近的语法不正确。” 在第一个语句的末尾？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:42:54.367

我发现没有必要；或去。非常感谢您的输入

# java - 将值传递给java中的List

> ID：11232984
> 
> 赞同：1
> 
> 时间：2012-06-27T18:43:49.047
> 
> 标签：java, list

我有一个列表，我试图用不同的数字填充`List`。但是，当我更改从中复制的列表中的数字时，它会在另一个列表中更改它们。有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:45:17.390

您需要将列表中的值复制到新列表中：

```
List<Integer> list1 = Arrays.asList(1, 2, 3);
List<Integer> list2 = new ArrayList<String>(list1); // copy the values of list1 into list2 
```

这会将所有值复制`list1`到`list2`. 然后您可以在`list2`不修改的情况下进行更改`list1`，反之亦然。

* * *

只是为了澄清：

那*不会*做深拷贝。但是，这不是深/浅复制的问题。这里的问题是 OP 将他的列表传递给另一种方法，然后惊讶地发现他的列表已经添加/删除了数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:46:17.613

这两个列表包含对相同*编号对象*的引用。更改第一个列表中的数字，您将更改第二个列表引用的同一对象。

要使用独立的数字副本维护两个列表，您需要复制列表，例如使用[`Collections.copy`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:51:06.293

您需要对列表的对象进行**[深度复制。](https://stackoverflow.com/questions/64036/how-do-you-make-a-deep-copy-of-an-object-in-java)**使用`Collections.copy(List1, List2);`或编写您的自定义代码。

# ios5 - 关闭键盘后iOS Section Footer浮动

> ID：11232985
> 
> 赞同：3
> 
> 时间：2012-06-27T18:43:53.317
> 
> 标签：ios5, uitableview

在过去的几天里，这个问题一直把我逼疯了。我没有使用自定义类，这一切都是使用 Interface Builder 设置的

我有一个导航视图控制器，它有 1 个子视图：一个表视图。我已在 xCode 中将其设置为带有 1 个带页脚部分的静态表。该部分包含一些大单元格，每个单元格中都有 1 个文本字段，就像截图一样![正常画面](../Images/a4db68ba47cbed64d66ab94710752cd2.png)没什么花哨的。

现在，当我单击文本字段并关闭键盘时，我最终将页脚留在页面中间，就像这样![浮动页脚](../Images/b27aeb656dd6e949bf7834f1ee3cf473.png)

如果我无论如何滚动表格，页脚将返回到它应该在的位置。有什么我忽略/可以做的来解决这个问题。对此事的任何见解将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:18:11.080

这是我克服这个问题的方法：

1.  创建一个新的视图控制器子类。
2.  使其成为 UITableViewDataSource 和 UITableViewDelegate
3.  在 IB（或 Storyboard）中将表格视图添加到您的视图控制器。
4.  将此表视图的数据源和委托设置为您的视图控制器。

关闭键盘后，您的页脚视图应位于正确的位置。

无论出于何种原因，将表格视图放在常规 UIViewController 而不是 UITableViewController 中意味着页脚在关闭键盘后会正确地重新定位。

# iphone - UITableViewCell 重用和图像重新渲染

> ID：11232992
> 
> 赞同：0
> 
> 时间：2012-06-27T18:44:14.007
> 
> 标签：iphone, ios, uitableview

我有一个 UITableView，它有 18 个部分，每个部分有 1 个标题标题和 1 个单元格。在每个单元格中，都会有一个水平的 UIScrollView，其中包含多个图像。

问题是......我可以正确加载图像和单元格，但是当图像数量增加并且单元格滚动到顶部时，其他单元格中会弹出来自不同单元格的图像......以及所有渲染和图像都错了……应该在第 3 节或第 4 节中的图像出现在第 1 节中……等等。

数据源是从 JSON 加载的，JSON 是对的。当图像不多且只有 5-8 个部分时，一切都可以完美运行。所以，它让我相信是 UITableViewCell 的重用导致了这个问题。

有人可以帮我解决这个问题...谢谢.. 下面是 UITableViewCell 的代码

```
// Customize the appearance of table view cells.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = nil;

// add a placeholder cell while waiting on table data
if ([self.datasource count] == 0 && indexPath.section == 0 && indexPath.row == 0)
{   
    UILabel *Fetch;
    static NSString *infoCell = @"infoCell";
    cell = [tableView dequeueReusableCellWithIdentifier:infoCell];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                       reuseIdentifier:infoCell] autorelease];   
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        CellFetch = [[[UILabel alloc] initWithFrame:CGRectMake(15.0, 120.0, 280.0, 80.0)] autorelease];
        CellFetch.tag = FETCH_TAG;
        CellFetch.font = [UIFont boldSystemFontOfSize:16.0];
        CellFetch.textColor = [UIColor grayColor];
        CellFetch.shadowColor = [UIColor whiteColor];
        CellFetch.shadowOffset = CGSizeMake(0, -0.5);
        CellFetch.textAlignment = UITextAlignmentCenter;
        [cell.contentView addSubview:CellFetch];
    } else {
        CellFetch = (UILabel *)[cell.contentView viewWithTag:FETCH_TAG];
    }
    Fetch.text = fetchStatus;
    return cell;
} else {
UIScrollView *imgScroll;
static NSString *imgCell = @"imgCell";
cell = [tableView dequeueReusableCellWithIdentifier:imgCell];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:imgCell] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    imgScroll = [[[UIScrollView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320, 108.0)]autorelease];
    imgScroll.tag = SCROLLVIEW_TAG;
    imgScroll.showsVerticalScrollIndicator = NO;
    imgScroll.showsHorizontalScrollIndicator = NO;
} else {
    imgScroll = (UIScrollView *)[cell.contentView viewWithTag:SCROLLVIEW_TAG];
}
    NSArray *sorted = [[self.datasource allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    //NSArray *allDistrict = [self.datasource allValues];
    NSString *key = [sorted objectAtIndex:indexPath.section];
    NSArray *img = [self.datasource valueForKey:key];

    int column = 0;
    int space = 10;
    int width = 80;
    int x = space+5.0;
    for (NSUInteger i=0; i < img.count; i++) {
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        NSDictionary *Info = [img objectAtIndex:i];
        NSString *iconURL = [NSString stringWithFormat:@"%@",[Info objectForKey:@"ImgURL"]];
        button.frame = CGRectMake(x , 4, 80, 80);
        [button setImageWithURL:[NSURL URLWithString:iconURL] placeholderImage:[UIImage imageNamed:@"pholder"]];
        NSString *imgID = [Info objectForKey:@"ImgID"];
        int k = [imgID intValue];
        button.tag = k; 
        [button addTarget:self action:@selector(onButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [imgScroll addSubview:button];

        x+=space+width;
        column++;
    }

    [imgScroll setContentSize:CGSizeMake(column*90+10, 108)];

    [cell.contentView addSubview:imgScroll];
}
// Configure the cell...
return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:49:29.197

尝试使每个部分的单元格标识符唯一，这样它们就不会跨部分重复使用：

```
 cell = [tableView dequeueReusableCellWithIdentifier:@"section1cell"];

  cell = [tableView dequeueReusableCellWithIdentifier:@"section2cell"]; 
```

我已经看到了某些部分中的单元格没有图像的问题，但在其他部分中却有。因此，当它重用单元格时，除非您专门将 image 属性设置为 nil ......您可以获得先前 laoded 的图像。

**更新：**

这是我在谈论的关于节号的内容

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    NSString *section = [NSString stringWithFormat:@"section%@cell", indexPath.section];

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:section];

    // some configuration

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:48:06.127

写 一部分`[cell.contentView addSubview:imgScroll];`。`cell == nil`

喜欢 ，

```
 if (cell == nil) 
{

         cell = [[[UITableViewCell alloc] nitWithStyle:UITableViewCellStyleDefault   reuseIdentifier:imgCell] autorelease];
         cell.selectionStyle = UITableViewCellSelectionStyleNone;

         imgScroll = [[[UIScrollView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320, 108.0)]autorelease];
         imgScroll.tag = SCROLLVIEW_TAG;
         imgScroll.showsVerticalScrollIndicator = NO;
         imgScroll.showsHorizontalScrollIndicator = NO;
         [cell.contentView addSubview:imgScroll];

} 
```

# mysql - MYSQL 结合查询进行优化

> ID：11232994
> 
> 赞同：0
> 
> 时间：2012-06-27T18:44:17.543
> 
> 标签：mysql, query-optimization

我想将几个查询组合成尽可能少的。这是我正在写的一个视频游戏。注意 -spawn_id 是在地图上给定位置的关卡上创建坏人的实体的 ID。-* 来自 spawns 包括 spawn_id、要生成的坏人的最大数量（数量）、要生成的坏人类型（mob_id）以及一个 ID，告诉它要生成的坏人类型 游戏在线所以我宁愿尽量减少查询的数量

如果我可以从生成 ID 相同的数量（游戏中的最大数量）中减去计数（游戏中已经存在的数量）并将其全部返回，那就太好了

如果我可以像这样将生成的生成ID数量和坏人的类型一起返回，那就更好了

SELECT spawn_id, COUNT(*) as 'count' FROM game_moblist GROUP BY spawn_id" 返回...

```
spawn_id count
======== =====
1         2 
```

表生成包含

```
spawn_id quantity mob_id level
======== ======== ====== =====
1        5        1      2 
```

mob_id 指向具有

```
mob_id ...stats for mob_id
====== ===================
1      unique stats for mob#1 
```

我想返回这样的东西：

```
spawn_id   quantity_to_spawn   mob_id   ...stats for mob_id
========   =================   ======
1          3                   1        unique stats for mob#1 
```

这意味着我必须插入从小怪中选择的 3 行，我不介意对其进行第二次查询，这样我就可以将统计数据逐级相乘，以在游戏中创建一个 2 级的坏人......基本上 2 级意味着统计数据是是“mobs”表中存储的数字的两倍

这是我的代码，到目前为止我可以完成它，但我宁愿先尝试减少查询的数量。

```
 sql= "SELECT spawn_id, COUNT(*) as 'count' FROM game_moblist  GROUP BY spawn_id"
       connection.query(sql, function(err, spawncount, fields) {
          sql= "SELECT  * FROM spawns"
          connection.query(sql, function(err, spawns, fields) {
             for (i=0;i<spawns.length;i++){
                if (spawns[i].next_spawn < new Date().getTime()){
               for (j=0;spawncount.length;j++){
                      if (spawncount[j].spawn_id ==spawns[i].spawn_id&&spawncount[j].count<spawns[i].quantity){
                         quantity_to_spawn = spawns[i].quantity -spawncount[j].count
                         //fetch spawns[i].mob_id mob from mobs table
                         for(k=0;k<quantity_to_spawn;k++){
                         //multiply for level
                         //insert into moblist
                         }
                      }
                   }
                }
             }
          });
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:52:46.797

这正是使用 LEFT 或 INNER JOIN 的原因。请阅读这些 SQL 函数是如何工作的 - 这样您将大大提升您的 SQL 知识！

基本思想是，如果您有两个表，例如 Items：

```
item      name
=====     =====
1         Sword of Ultimate Power
2         Big Freaking Gun 
```

和地点：

```
location  name
========  =====
1         Fortress of Solitude
2         Quendor 
```

然后想要一个表 item_locations 来跟踪哪些项目在哪些位置：

```
item_id    location_id
========   ============
1          2
2          1 
```

那么你可以使用类似的表达式

```
SELECT item.name, location.name FROM items LEFT JOIN item_locations AS il ON (item.id = il.item_id) LEFT JOIN locations ON (il.location_id = locations.id) 
```

然后你会返回一个类似的列表：

```
item.name                  location.name
===============            ================
Sword of Ultimate Power    Quendor
Big Freaking Gun           Fortress of Solitude 
```

这还具有您能够将多个索引添加到各种表中以优化实际行查找的优势。

您还可以使用视图来创建自动提供这些关系的新虚拟表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:52:57.357

```
SELECT 
 spawn_id,
 quantity - COUNT(game_moblist.(spawn_id)) AS quantity_to_spawn,
 mobs.*
FROM spawn_contains
LEFT JOIN mobs USING (mob_id)
LEFT JOIN game_moblist USING (spawn_id)
GROUP BY spawn_id 
```

# spring - 使用 Spring roo 优于 play 框架的优势（如果我们使用 Spring 框架）？

> ID：11232995
> 
> 赞同：11
> 
> 时间：2012-06-27T18:44:19.203
> 
> 标签：spring, playframework, spring-roo

我最近在评估项目中使用的框架时偶然发现了 Play 框架。我需要使用 Java 语言和 JVM（所以 grails 不是一个选项）。

从最初的印象来看，Play 框架看起来与 Django（或 Rails）非常相似，但 Spring Roo 看起来很有趣，因为我使用 Spring 框架作为核心组件。

如果我已经使用核心 Spring 框架（例如集成），使用 Spring Roo 有什么优势吗？

Spring Roo 是否存在任何已知的重大问题？（例如失去对我们生成的代码的控制）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T14:51:21.537

这完全取决于您正在开发什么样的应用程序。如果你想拥有一个带有几个控制器的简单应用程序，我相信 Play 是一个不错的选择。但是，如果您正在编写大型企业应用程序并希望利用 Spring 提供的所有功能，那么 Roo 是您的最佳选择。Spring 是事实上的企业 Java 框架，每个软件供应商都确保提供 Spring 集成，例如只需一行 XML 即可启动 SOAP Web 服务：

```
<jaxws:endpoint implementor="org.apache.cxf.jaxws.service.Hello" address="http://localhost:8080/test" /> 
```

想要连接到 RabbitMQ

```
<rabbit:connection-factory id="connectionFactory"/>
<rabbit:template id="amqpTemplate" connection-factory="connectionFactory"/> 
```

但这只是Spring的核心，Roo让事情变得更简单，要添加数据库吗？在 Roo 的命令 shell 中键入一行。安全？再来一行。启动到 Cloud Foundry？再来一行。自动建议功能将告诉您所有可用的命令和每个命令所需的参数。Roo（对于经验丰富的 Spring 开发人员）的最大优势是无需学习任何新框架，您只需键入 Roo 命令并获取标准 Spring 代码，然后您就可以随心所欲地做任何事情。如果您对普通 Spring 感觉更舒服，您可以使用 Roo 快速启动您的项目，然后将其删除。我不是一个追随最新技术潮流的人，当谈到“这将改善你的生活！”时，我持怀疑态度。承诺，但 Roo 确实使开发更简单、更快捷。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T19:39:51.663

从我之前看到的情况来看，Roo 和 Play 之间的一个很大区别是 Roo 为您创建样板代码，然后由您维护，而 Play 只是减少了您需要开发的代码量，因此减少了您的代码量需要维护。

如果您从零开始，我看不到 Roo 对 Play 的好处（作为 Play 倡导者的个人意见）。但是，由于您已经具有 Spring 背景，那么 Roo 可能是更好的选择，因为您没有学习曲线（并且取决于您正在考虑的 Play 版本，这可能是一个因素）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T00:50:02.557

这是我的个人印象，因此可能（非常）主观。我也是*Play*倡导者。

我被迫`Spring MVC`试一试...那是某种 %$%@$%#... 让我感到不舒服，不得不担心 XML 文件...

所以我发现`Roo`哪个可以很好地构建应用程序（尤其是与 Spring 相比）我认为使用它是明智的，但是在你的项目不断增长的同时关注所有依赖的文件也需要花费太多的精力（我不知道，也许是错误的 IDE，也许没有太多的耐心......）一周后，我准备好永远回到 PHP ;）

最后我找到了 Play，这就是我的重点，我不需要再处理让我发疯的 XML“支持”。通用结构比 Spring-* 中干净得多。我不需要关心配置[tomcat](/questions/tagged/tomcat "显示标记为“tomcat”的问题")或重新部署应用程序。一切都从第一步开始。我唯一需要做的就是……发展！

所以，结论是我认为你*应该*给 Play 一个机会，也许这会比庆祝不舒服的习惯更好。也许。你必须自己选择。

顺便说一句：两者都是真正不同的方法，如果没有对同一主题的两种解决方案进行可靠比较，您将无法正确判断它。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-04T21:49:07.033

我不知道[Spring Play Framework](http://www.playframework.com/documentation/1.0.1/spring)，但我一直在尝试按照[“Roo 入门” pdf](http://spring-roo-repository.springsource.org/Getting_Started_with_Roo.pdf&ei=-xs1UYbwA8XBqAGf6IHQDA&usg=AFQjCNE092ZIBX-2uPnwhSWL2ley3PKECg&bvm=bv.43148975,d.aWM)使用 Spring Roo 1.2.3，但体验非常令人失望。它不起作用，没有解决方法，也不支持互联网上的已知问题。下载我之前提到的指南并尝试逐步使用它：你会明白我在说什么。至于你的问题：选择至少没有被破坏或放弃的框架。Spring Roo 做了很多承诺，但是当你花了几天时间试图让它发挥作用时，却没有成功，你开始质疑自己：我的优势在哪里？不要误会我的意思，我很想使用 Spring Roo，但这样做是完全不可能的。

# javascript - 如何将 twitter oAuth 请求令牌转换为 Windows 8 JavaScript (Metro) 中的访问令牌

> ID：11232996
> 
> 赞同：1
> 
> 时间：2012-06-27T18:44:19.497
> 
> 标签：javascript, oauth, windows-8, microsoft-metro, twitter-oauth

好的，所以我正在尝试使用 Javascript 和 WinJS 为 Windows 8 构建一个小型 Twitter 客户端。我已经获得了请求 oauth 令牌以及 oauth 验证程序。Microsoft 的一个模板是一个很好的资源。不过，我似乎无法在网上找到任何关于 Javascript 和 oAuth 的帮助。无论如何，这是我的代码。我需要弄清楚在这里获取 oAuth 访问令牌表格并存储它们。

```
////
////    The function of this file is to connect with Twitter via oAuth
////

(function () {
    "use strict";

    //Define a namespace to keep track of controls 
    WinJS.Namespace.define("Account", {
        options: {                                                          // This is the object containing the apps
            consumerKey: ********,                          // Twitter credentials
            consumerSecret: **********,
            callback: *************
        }
    });

    Account.sendRequest = function (url) {
        try {
            var request = new XMLHttpRequest();
            request.open("GET", url, false);
            request.send(null);
            return request.responseText;
        } catch (err) {
            WinJS.log("Error sending request: " + err, "Web Authentication SDK Sample", "error");
        }
    };

    Account.sendPostRequest= function(url, authzheader) {
        try {
            var request = new XMLHttpRequest();
            request.open("POST", url, false);
            request.setRequestHeader("Authorization", authzheader);
            request.send(null);
            return request.responseText;
        } catch (err) {
            WinJS.log("Error sending request: " + err, "Web Authentication SDK Sample", "error");            
        }
    };

    Account.getVerifier = function (returned) {
        var URLstring = returned;    //returned;
        var oauth_token;
        Account.oauth_verifier = "";
        URLstring = URLstring.substring("http://novodevelopment.tk/?".length);
        var valuePairs = URLstring.split("&");
        for (var i = 0; i < valuePairs.length; i++) {
            var splits = valuePairs[i].split("=");
            switch (splits[0]) {
                case "oauth_token":
                    oauth_token = splits[1];
                    break;
                case "oauth_verifier":
                    Account.oauth_verifier = splits[1];
                    console.log("oAuth Verifier: " + Account.oauth_verifier);
                    break;
            }
        }
    };

    Account.convertTokens = function (url, authzheader) {
        try {
            var request = new XMLHttpRequest();
            request.open("POST", url, false);
            request.setRequestHeader("Authorization", authzheader);
            request.setRequestHeader("oauth_verifier", Account.oauth_verifier);
            reqest.send(null);
            return request.responseText;
        } catch (err) {
            console.log("failure");
        }

    };

    Account.authzInProcess = false;

    Account.launchTwitterWebAuth = function () {
        var twitterURL = "https://api.twitter.com/oauth/request_token";

        // Get all parameters
        var clientID = Account.options.consumerKey;
        var clientSecret = Account.options.consumerSecret;
        var callBackURL = Account.options.callback;

        // Get Date
        var timestamp = Math.round(new Date().getTime() / 1000.0);

        // Create a nonce
        var nonce = Math.random();
        nonce = Math.floor(nonce * 1000000000);

        // Compute base signature string and sign it.
        //    This is a common operation that is required for all requests even after the token is obtained.
        //    Parameters need to be sorted in alphabetical order
        //    Keys and values should be URL Encoded.
        //    To be fair I found all of this part online
        //    It basically serves the same purpose as jsOAuth
        var sigBaseStringParams = "oauth_callback=" + encodeURIComponent(Account.options.callback);
        sigBaseStringParams += "&" + "oauth_consumer_key=" + clientID;
        sigBaseStringParams += "&" + "oauth_nonce=" + nonce;
        sigBaseStringParams += "&" + "oauth_signature_method=HMAC-SHA1";
        sigBaseStringParams += "&" + "oauth_timestamp=" + timestamp;
        sigBaseStringParams += "&" + "oauth_version=1.0";
        var sigBaseString = "POST&";
        sigBaseString += encodeURIComponent(twitterURL) + "&" + encodeURIComponent(sigBaseStringParams);

        var keyText = clientSecret + "&";
        var keyMaterial = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(keyText, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
        var macAlgorithmProvider = Windows.Security.Cryptography.Core.MacAlgorithmProvider.openAlgorithm("HMAC_SHA1");
        var key = macAlgorithmProvider.createKey(keyMaterial);
        var tbs = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(sigBaseString, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
        var signatureBuffer = Windows.Security.Cryptography.Core.CryptographicEngine.sign(key, tbs);
        var signature = Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(signatureBuffer);
        var dataToPost = "OAuth oauth_callback=\"" + encodeURIComponent(Account.options.callback) + "\", oauth_consumer_key=\"" + clientID + "\", oauth_nonce=\"" + nonce + "\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"" + timestamp + "\", oauth_version=\"1.0\", oauth_signature=\"" + encodeURIComponent(signature) + "\"";
        var response = Account.sendPostRequest(twitterURL, dataToPost);
        var oauth_token;
        var oauth_token_secret;
        var keyValPairs = response.split("&");

        for (var i = 0; i < keyValPairs.length; i++) {
            var splits = keyValPairs[i].split("=");
            switch (splits[0]) {
                case "oauth_token":
                    oauth_token = splits[1];
                    break;
                case "oauth_token_secret":
                    oauth_token_secret = splits[1];
                    break;
            }
        }

        // Send user to authorization page
        twitterURL = "https://api.twitter.com/oauth/authorize?oauth_token=" + oauth_token;

        var startURI = new Windows.Foundation.Uri(twitterURL);
        var endURI = new Windows.Foundation.Uri(Account.options.callback);

        Account.authzInProgress = true;

        Windows.Security.Authentication.Web.WebAuthenticationBroker.authenticateAsync(
            Windows.Security.Authentication.Web.WebAuthenticationOptions.none, startURI, endURI)
            .done(function (result) {
                console.log("Authenticated URL: " + result.responseData);
                var returnData = result.responseData;
                Account.getVerifier(returnData);
                Account.authzInProgress = false;
            }, function (err) {
                console.log("Error returned by WebAuth broker: " + err, "Web Authentication SDK Sample", "error");
                Account.authzInProgress = false;
            });

        var authzheader = {
            oauth_consumer_key: clientID,
            oauth_nonce: nonce,
            oauth_signature: signature,
            oauth_signature_method: "HMAC-SHA1",
            oauth_timestamp: timestamp,
            oauth_token: oauth_token,
            oauth_version: "1.0"
        };
        var twitterURL = "https://api.twitter.com/oauth/access_token";
   //     var converted = Account.convertTokens(twitterURL);

        Account.convertTokens(twitterURL);

    };

})(); 
```

抱歉有点乱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:09:57.360

我解决了这个问题，但是由于与我的雇主的保密协议，我可能无法共享大部分代码。

看看这个博客：

[http://www.wackylabs.net/2011/12/oauth-and-flickr-part-2/](http://www.wackylabs.net/2011/12/oauth-and-flickr-part-2/)

我未能将请求令牌转换为访问令牌，因为我使用的密钥不正确。

我盲目地使用：app_secret + '&' 作为我的关键材料。

当你去升级时，你需要 app_secret + '&' + oauth_token_secret。

这可能没有多大意义，但是如果您想了解更多信息，请给我发消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:49:32.230

要存储信息，您可以使用允许您存储本地/漫游设置/文件的[Windows.Storage.ApplicationData类。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.aspx)

我建议您使用漫游设置/文件，因为您的应用程序可以通过不同的设备访问，这意味着如果您的应用程序安装在两个设备上，例如台式机和笔记本电脑，您可以从两个设备访问存储的信息。关联是通过 LiveID 完成的。

如果您没有使用 LiveID 登录，或者您没有互联网连接（在目前的情况下，这对于 Twitter 客户端 J 来说会有点问题），则设置/文件将在本地保存。

我希望这会有所帮助。

# java - arrayadapter 和空指针错误的意外行为

> ID：11232997
> 
> 赞同：1
> 
> 时间：2012-06-27T18:44:20.837
> 
> 标签：java, android

我正在使用以下代码。

```
mDbHelper.open();
        String[] areasList = new String[51];
        for (int i = 0; i<51; i ++)
        {
            areasList[i] = "";
        }
        areasList = mDbHelper.getAllAreas();
        mDbHelper.close();

        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, areasList);
        spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        chooseArea.setAdapter(spinnerArrayAdapter); 
```

`String[]`在调试器中，它显示了从数据库中获取的所有值。

```
public String[] getAllAreas()
    {
        String[] areasList = new String[51];
        String queryString = "SELECT areaName FROM TFTaxi";
        Cursor resultSet =  mDb.rawQuery(queryString, null); 
        for (int i = 0; i<51; i ++)
        {
            areasList[i] = "";
        }
        int i = 1;
        areasList[0] = "Choose your Area";

        while(resultSet.moveToNext())
        {

            areasList[i] = resultSet.getString(resultSet.getColumnIndex("areaName"));
            i++;
        }

        resultSet.close();
        return areasList;
    } 
```

但随后它给出了错误

```
06-27 23:40:43.882: E/AndroidRuntime(16467): FATAL EXCEPTION: main
06-27 23:40:43.882: E/AndroidRuntime(16467): java.lang.NullPointerException
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.Spinner.onMeasure(Spinner.java:285)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.View.measure(View.java:12723)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.os.Looper.loop(Looper.java:137)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at java.lang.reflect.Method.invokeNative(Native Method)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at java.lang.reflect.Method.invoke(Method.java:511)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:50:42.040

```
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
06-27 23:40:43.882: E/AndroidRuntime(16467):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362) 
```

从上面的错误很明显，错误是由于任何 areaList[i] 为空......[见第 394 行](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)

文本.setText( `item.toString()`);

*   在迭代将光标设置为第一个 cursor.moveToFirst() 之前。

.

```
 cursor.moveToFirst();
        do {

        } while (cursor.moveToNext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:51:29.723

`resultSet.moveToNext()`- 移动到下一个，所以我猜你只是跳过数据库中的第一个项目（即使光标包含正确数量的项目 - 50）。

尝试从前置条件切换`while(resultSet.moveToNext()) {}`到后置条件`do {} while(resultSet.moveToNext())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:00:18.863

我认为您在处理该记录之前通过调用 moveToNext 跳过了一条结果记录。

假设您的查询仅返回 50 条记录，请尝试以下更改：

```
public String[] getAllAreas()
    {
        .....
        resultSet.moveToFirst();
        while(!resultSet.isAfterLast())
        {
            areasList[i] = resultSet.getString(resultSet.getColumnIndex("areaName"));
            i++;
            resultSet.moveToNext();
        }
        .........
    } 
```

# apache - Mod_rewrite 根 URL，但维护子页面/查询的单独重定向

> ID：11232998
> 
> 赞同：1
> 
> 时间：2012-06-27T18:44:21.000
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting

我有一个单独的重定向列表，这些重定向将用户（和谷歌）从 abc.site.com/page/name 移动到 xyz.site.com/newpagename。我希望能够保留这些单独的重定向，而且还专门将“abc.site.com”重定向到“xyz.site.com”。

我发现完成该重定向的任何解决方案也会将 abc.site.com/pagename 重定向到 xyz.site.com/pagename，从而覆盖上述单个重定向。有没有办法只重定向文档根目录（abc.site.com），而不重定向任何子页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:55:00.040

使用 mod_rewrite

```
RewriteCond %{HTTP_HOST} ^abc.site.com$ [NC]
RewriteRule ^$ http://xyz.site.com [R=301] 
```