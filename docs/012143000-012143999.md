# StackOverflow 问答 12143000-12143999

# java - 使用比较器排序字符串列表

> ID：12143002
> 
> 赞同：3
> 
> 时间：2012-08-27T13:31:33.133
> 
> 标签：java, list, sorting, comparator

我有 -

```
import java.util.*;

public class TestCompare {

    List<String> list = Arrays.asList("10", "1", "20", "11", "21", "12");
    Comparator<String> cmp = new Comparator<String>() {
        public int compare(String o1, String o2) {
            return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
        }
    };
    Collections.sort(list, cmp);
} 
```

在`Collections.sort(list, cmp);`有一个错误 - `Syntax error on token "(", delete this token`。这种语法有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T13:33:53.230

您需要将代码包装在方法中，而不是直接在类块中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T13:34:30.530

您不能直接在类中包含代码，它应该在如下方法中`main`：

```
public class TestCompare {
    public static void main() {
      List<String> list = Arrays.asList("10", "1", "20", "11", "21", "12");
      Comparator<String> cmp = new Comparator<String>() {
      public int compare(String o1, String o2) {
        return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
      }
      };
      Collections.sort(list, cmp);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:35:42.223

在类级别，只允许声明（和初始化程序）块。您的前两个语句是声明（它们被解释为字段声明，即使这可能不是您的意图）。第三个不是声明，所以它失败了。

声明可以是：方法、字段、构造函数、内部类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-24T08:02:57.557

在 1.8 之后，您也可以使用 lambda 表达式。

```
public class TestCompare {
    public static void main() {
      List<String> list = Arrays.asList("10", "1", "20", "11", "21", "12");
        Comparator<String> cmp = (o1, o2) -> {
            return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
        };
        Collections.sort(list, cmp);
     }
} 
```

# android - android - 水平进度条未在列表项内更新

> ID：12143007
> 
> 赞同：2
> 
> 时间：2012-08-27T13:32:05.707
> 
> 标签：android, android-asynctask, progress-bar

我是android编程的新手，现在我在上面遇到了一个有线的东西，我创建了一个listActivity，列表项的布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="center_vertical"
    android:orientation="vertical"
    android:paddingBottom="10dp"
    android:paddingTop="15dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/transparent" >

        <ImageView
            android:id="@+id/offlineItemIcon"
            android:layout_width="44dp"
            android:layout_height="44dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:scaleType="fitXY"
            android:src="@drawable/user_avatar" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/offlineItemTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="5dp"
                android:text="卷001 2012-08-23 3.0M"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="@color/lightdark"
                android:textSize="18sp" />

            <ProgressBar
                android:id="@+id/offlineLoadingbar"
                style="?android:attr/progressBarStyleHorizontal"
                android:layout_width="fill_parent"
                android:layout_height="5dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="15dp"
                android:max="100"
                android:progress="10" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center" >

            <Button
                android:id="@+id/buttonOfflineItemDownload"
                android:layout_width="60dp"
                android:layout_height="44dp"
                android:background="@drawable/xml_button_loadmore"
                android:text="download"
                android:textColor="@color/lightwhite"
                android:textSize="18sp" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="@color/commentDate" >
    </LinearLayout>

</LinearLayout> 
```

我做了一个类来包装这个布局的内容，这个 -

```
public class OfflineItemView extends LinearLayout {

    Context _context = null;

    public Button buttonDownload = null;
    public ProgressBar loadingProgress = null;
    public TextView title = null;
    public ImageView icon = null;

    public String url = null;
    public String filename = null;

    public OfflineItemView(Context context) {
        super(context);
        _context = context;
        init();
    }

    public OfflineItemView(Context context, AttributeSet attrs) {
        super(context, attrs);
        _context = context;
        init();
    }

    protected void init() {
        LayoutInflater inflater = (LayoutInflater) _context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.module_offline_item, this);

        buttonDownload = (Button) findViewById(R.id.buttonOfflineItemDownload);
        buttonDownload.setTag("download");

        loadingProgress = (ProgressBar) findViewById(R.id.offlineLoadingbar);
        loadingProgress.setMax(100);
        loadingProgress.setProgress(0);

        title = (TextView) findViewById(R.id.offlineItemTitle);
        icon = (ImageView) findViewById(R.id.offlineItemIcon);
    }

    public void setTitle(String message) {
        if (message != null) {
            title.setText(message);
        } else {
            title.setText("");
        }
    }

    public void setImageBitmap(Bitmap bitmap) {

        if (bitmap != null) {
            icon.setImageBitmap(bitmap);
        }
    }

    public void setListener(View.OnClickListener listener) {
        this.buttonDownload.setOnClickListener(listener);
    }

    public void setProgress (int i)
    {
        android.util.Log.v ("item", i + "");
        loadingProgress.setProgress(i);
        android.util.Log.v ("item", "current : " + loadingProgress.getProgress());
    }

} 
```

列表工作得很好，它显示所有项目没有问题，列表项目的屏幕截图是 -

![在此处输入图像描述](../Images/0e6149b6daaee975f250ee2de2b4c826.png)

当用户单击按钮时，它将调用 AsyncTask 类来下载文件并显示项目的进度，下载类 -

```
public void downloadOffline(String url, String path,
        OfflineItemView progress) {

    DownloadOfflineAsync downloader = new DownloadOfflineAsync(progress);
    downloader.execute(url, path);
}

class DownloadOfflineAsync extends AsyncTask<String, String, String> {

    private final WeakReference<OfflineItemView> progressbarReference;

    public DownloadOfflineAsync(OfflineItemView progress) {
        progressbarReference = new WeakReference<OfflineItemView>(progress);
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            android.util.Log.v("downloadFile", "Lenght of file: "
                    + lenghtOfFile + ":" + aurl[1]);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(aurl[1]);

            try {
                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    publishProgress(""
                            + (int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                }

            } finally {

                if (output != null) {
                    output.flush();
                    output.close();
                }

                if (input != null) {

                    input.close();
                }
            }
        } catch (Exception e) {

            e.printStackTrace();

        }
        return null;

    }

    protected void onProgressUpdate(String... progress) {
        if (progressbarReference != null) {
            OfflineItemView p = progressbarReference.get();

            //android.util.Log.v ("offline.download", progress[0]);
            p.setProgress(Integer.parseInt(progress[0]));
        }
    }

    @Override
    protected void onPostExecute(String unused) {

        OfflineItemView p = null;

        if (progressbarReference != null) {
            p = progressbarReference.get();
            p.buttonDownload.setTag("browser");
            p.buttonDownload.setText("browse");
            p.requestLayout();
        }

    }
} 
```

它运行良好，文件被下载，进度被通知到 onProgressUpdate，项目类的加载进度条工作正常，进度设置正确（在 logcat 上打印，一切正确），但问题是进度条从不更新其指示器，因此即使进度从 0 更新到 100 越来越多，进度条也不会更改任何内容以在其 UI 上显示进度，因此感谢任何可以给我一些建议的人。

PS：

我把下载函数移到getView()，看起来效果很好，进度条在更新，但是在按钮事件处理程序中不起作用，所以似乎是列表视图问题，如何解决这个问题，但是？

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        rowView = new OfflineItemView(_context);
        JSONObject item = getItem(position);

        try {
            if (item != null) {
                String t = item.getString(Offline.TAG_NAME) + " "
                        + item.getString(Offline.TAG_DATE) + " "
                        + item.getString(Offline.TAG_SIZE);

                rowView.setTitle(t);

                if (listener == null) {
                    listener = new ItemButtonOnClickListener();
                }

                if (item.optBoolean("dir_exists")) {
                    rowView.buttonDownload.setText("browse");
                    rowView.buttonDownload.setTag("browser");
                }

                rowView.setListener(listener);
                rowView.url = item.getString(Offline.TAG_URL);
                rowView.filename = item.getString(Offline.TAG_FILENAME);

                String imageUrl = item.optString(Offline.TAG_ICON);

                if (imageUrl == null || imageUrl.trim().equals("")) {

                } else {

                    String name = item.optString(Offline.TAG_UNZIP_NAME) + "o";
                    if (name != null) {
                        if (DiskCache.getInstance().fileExists("user_" + name,
                                "user")) {
                            android.util.Log.v("offline", name + ":exists");
                            Bitmap bitmap = DiskCache.getInstance().get(
                                    "user_" + name, "user");
                            if (bitmap != null) {
                                rowView.setImageBitmap(bitmap);
                            }
                        } else {

                            // FileDownloader.getInstance().download(imageUrl,
                            // image, name);
                        }

                    }
                }

            }
        }

        catch (Exception e) {
            e.printStackTrace();
        }

        return rowView;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:37:47.080

你正在以一种奇怪的方式接近这个。您说您是 Android 新手，我无法从您的评论线程中看出您目前的破碎状态是什么。但是，我可以告诉您，您没有遵循`ListView`最佳实践，并且当您向下滚动列表时可能会遇到一些奇怪的问题。

您应该使用`convertView`给定的参数。 `convertView`是 null，或者是`View`您之前从 . 返回的`getView`。由于您只返回`OfflineItemView`s，如果`convertView != null`它将是 的一个实例`OfflineItemView`，您可以重用它以避免在每次显示新项目时在绘制时创建一个全新的实例的开销。

基本上：

```
View rowView;
if(convertView == null){
     rowView = convertView;
} else {
     rowView = new OfflineItemView(item);
} 
```

请注意这样的逻辑，因为下次您重新使用视图时，标签仍会从占用它的最后一项中出现：

```
 if (item.optBoolean("dir_exists")) {
                rowView.buttonDownload.setText("browse");
                rowView.buttonDownload.setTag("browser");
            } 
```

IE，您可能需要一个`else`子句来说明`rowView.buttonDownload.setText("");`并在错误的情况下使标签无效`dir_exists`。

此外，（假设您的意思是使用类似于您在 中的注释掉的`ImageDownloader`代码`getView`）如果图像不存在于图像缓存中，如果在`getView`图像之前多次调用，您可能会产生同一个图像的多次下载实际上是下载的。

如果您可以编辑您的问题以准确澄清现在的问题，我可以完善此答案以进一步帮助您。

# com - 如何从 Chrome 扩展中调用 COM+ 对象？

> ID：12143009
> 
> 赞同：2
> 
> 时间：2012-08-27T13:32:13.480
> 
> 标签：com, google-chrome-extension

我们有一个第三方客户端/服务器应用程序，它公开了一个**COM 接口**（例如打开/操作一个业务对象）。我们想编写一个 Google **Chrome 扩展程序**来调用这个 COM 接口。有人做过吗？你遵循什么方法？

注意：这样做的动机是因为尽管我们当前的 Web 应用程序能够使用供应商提供的 ActiveX 控件来调用 COM 接口，但我们的测试表明我们的应用程序无法在 IE9 上提供足够的性能和弹性。在 IE9 中它很慢，经常挂起并泄漏内存。相同的应用程序在 Chrome 上运行速度要快几个数量级，并且不会泄漏/崩溃。不幸的是，这意味着我们不能依赖第三方 ActiveX 控件，它使我们能够使用 COM 接口。这就是我们想要创建自定义扩展的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:01:21.343

我们有一个 COM 服务，它的 COM 接口正在我们的插件中使用。为此，我们使用 NP 插件。[这](https://developer.mozilla.org/en-US/docs/Plugins)是 NP API 参考的链接。

# ios - CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer 文档

> ID：12143016
> 
> 赞同：0
> 
> 时间：2012-08-27T13:32:25.307
> 
> 标签：ios, streaming

是否有此功能（适用于 iOS 核心音频）[CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMSampleBuffer/Reference/reference.html)的综合文档/教程？在网上找不到任何东西，堆栈溢出的[示例还有很多不足之处。](https://stackoverflow.com/questions/4972677/reading-audio-samples-via-avassetreader)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T07:57:30.103

在与 CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer 合作数月后，我了解到，虽然很难找到专门关于上述功能的帖子或链接，但在 iOS 中找到关于音频一般主题的大量资源也很容易，其中最主要的是书[学习核心音频](http://my.safaribooksonline.com/book/audio/9780321636973)..

深入iOS核心音频的密集概念需要时间，并且需要大量练习..一旦事情深入..上述方法将成为更大工具箱中的简单工具..及其所有参数和使用将具有直观意义

也是一种快速了解参数和函数在上面的确切作用的方法。只需转到头文件中提供的文档（即在 XCode 中，突出显示方法并右键单击 - > 跳转到定义）.. 你'将在**CMSampleBuffer.h**中看到这一点（但如果您不熟悉核心音频.. 如果您查看所有这些参数并且只了解其中的 10%，请不要感到沮丧.. 它发生在我们所有人身上，它需要时间）：

```
/*!
    @function   CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer
    @abstract   Creates an AudioBufferList containing the data from the CMSampleBuffer,
                and a CMBlockBuffer which references (and manages the lifetime of) the
                data in that AudioBufferList.  The data may or may not be copied,
                depending on the contiguity and 16-byte alignment of the CMSampleBuffer's
                data. The buffers placed in the AudioBufferList are guaranteed to be contiguous.
                The buffers in the AudioBufferList will be 16-byte-aligned if
                kCMSampleBufferFlag_AudioBufferList_Assure16ByteAlignment is passed in.
*/
CM_EXPORT
OSStatus CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(
    CMSampleBufferRef sbuf,             /*! @param sbuf
                                        CMSampleBuffer being accessed. */
    size_t *bufferListSizeNeededOut,    /*! @param bufferListSizeNeededOut
                                        Receives the size of the AudioBufferList required to
                                        accommodate the data. May be NULL. */
    AudioBufferList *bufferListOut,     /*! @param bufferListOut
                                        Allocated by the caller, sized as specified by bufferListSizeNeededOut.
                                        It is filled in with pointers into the retained blockBufferOut.
                                        May be NULL. */
    size_t bufferListSize,              /*! @param bufferListSize
                                        Size of the bufferListOut allocated by the client. If bufferListOut
                                        is not NULL and bufferListSize is insufficient, kFigSampleBufferError_ArrayTooSmall
                                        is returned. */ 
    CFAllocatorRef bbufStructAllocator, /*! @param bbufStructAllocator
                                        Allocator to use when creating the CMBlockBuffer structure. */
    CFAllocatorRef bbufMemoryAllocator, /*! @param bbufMemoryAllocator
                                        Allocator to use for memory block held by the CMBlockBuffer. */
    uint32_t flags,                     /*! @param flags
                                        Flags controlling operation. */
    CMBlockBufferRef *blockBufferOut)   /*! @param blockBufferOut
                                        The retained CMBlockBuffer. */
                            __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0); 
```

# java - 在 groovy 中模拟内部类

> ID：12143022
> 
> 赞同：0
> 
> 时间：2012-08-27T13:32:42.483
> 
> 标签：java, grails, groovy, junit, controller

> **可能重复：**
> [如何模拟控制器内部的命令对象](https://stackoverflow.com/questions/12112415/how-to-mock-command-object-that-is-inside-controller)

我有一个控制器类，里面有一个命令对象。我有一个方法 find() 它使用这个命令对象如下：

```
class RexController{

    //command object
    class SearchCommand{
        String email
        static constraints={
            email blank:false,email:true
        }

def find = {SearchCommand sc ->
    if(!sc.hasErrors()){
     ----- do something---
}

} 
```

现在，我正在编写一个测试用例来测试控制器中的 find 方法。但是测试用例失败了

```
 if(!sc.hasErrors()) 
```

因为 sc 仍然是'null'。我不确定如何在测试用例中处理这个内部类命令对象。到目前为止我写的测试用例是：

```
class itemControllerTests extends ControllerUnitTestCase {

    void testFind(){
    def model = controller.find()
    assertNotNull(model)
    }
} 
```

如何处理测试用例中的内部类命令对象。我嘲笑它吗？我尝试过使用 mockCommandObject(?)，但不确定我应该如何将内部类命令对象传递给它？

我是否应该在测试用例中更改控制器的任何元类属性，以便它识别内部类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:36:40.503

您在测试中创建/模拟并将 Command 实例传递给您的控制器调用。

```
void testFind() {
    def command = new RexController.SearchCommand(email: 'me@here.there')
    // or [email: 'me@here.there'] as RexController.SearchCommand
    def model = controller.find(command)
    assertNotNull(model)
} 
```

`mockCommandObject` [不再存在](http://grails.org/doc/latest/guide/single.html#upgradingFromPreviousVersionsOfGrails)：*“不再需要 mockCommandObject() 方法，因为 Grails 会自动检测动作是否需要命令对象。”*

但是您最好将所有与 UI 无关的逻辑移到其他地方 - 到域类或服务，并测试该类。

# android - 微调器显示所选项目

> ID：12143023
> 
> 赞同：0
> 
> 时间：2012-08-27T13:32:42.823
> 
> 标签：android

我想知道是否有`setText()`方法`spinners`？我想要做的是在微调器中显示所选项目（它是通过`sharedpreferences`. 保存的），所以下次用户显示保存的数据时，它应该显示在微调器中。我怎样才能做到这一点？我已经知道如何像这样编辑文本：`age.setText(age);` 但想知道如何在微调器中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:37:46.660

课堂上没有这样的方法`Spinner`。

您需要实现一个`SpinnerAdapter`负责创建的项目并通过该方法`Spinner`附加它。`setAdapter()`

官方 Spinners 指南可以帮助您：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

# php - 将字符串转换为变量

> ID：12143027
> 
> 赞同：-2
> 
> 时间：2012-08-27T13:32:51.787
> 
> 标签：php

如何转换这个

```
$myvar = '[aaa](11,22,33,44,55)[bbb](1,2,3,4,5)'; 
```

进入那个

```
$arr_name[1] = 'aaa';
$arr_val[1] = '11,22,33,44,55';

$arr_name[2] = 'bbb';
$arr_val[2] = '1,2,3,4,5'; 
```

我应该使用什么功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:41:34.293

```
if(preg_match_all('/\[(.*?)\]\((.*?)\)/',$myvar,$matches)) {
    foreach($matches[0] as $k=>$v) {
        $arr_name[$k] = $matches[1][$k];
        $arr_val[$k] = $matches[2][$k];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:37:11.697

您可以尝试使用正则表达式来提取您的键和变量，然后将它们插入到数组中：

```
$keys = array();
preg_match_all("/\[.+\]/", $myvar, $keys);

$values = array();
preg_match_all("/\(.+\)/", $myvar, $values);

$numKeys = count($keys);
$numVals = count($values);

$result = array();
foreach ($i = 0; $i < $numKeys; $i++) {
    if ($i < $numVals) {
        $result[trim($keys[$i], "[]")] = trim($values[$i], "()");
    }
} 
```

# iphone - 将 NSDictionary 条目添加到 NSMutableDictionary

> ID：12143028
> 
> 赞同：11
> 
> 时间：2012-08-27T13:32:52.573
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 for 循环，它遍历数组中的一系列字典。

当它通过 for 循环时，如何将所有字典条目合并为一个`NSMutableDictionary`？

我试过`addEntriesFromDictionary`了，但它不起作用。谢谢你的帮助。

```
for (int i=0; i<sections.count; i++){

    formElements    = [[sections objectAtIndex:i]objectForKey:@"Dictionary"];        
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T13:49:02.663

```
NSMutableDictionary * mutableDict = [NSMutableDictionary dictionary];

for (NSDictionary * formElements in sections)
{
    [mutableDict addEntriesFromDictionary:formElements];
} 
```

如果他们不共享任何密钥是正确的，这应该可以工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-27T13:36:04.550

您可以添加字典对象，如下所示。

```
NSMutableDictionary *mDict=[NSMutableDictionary dictionary];
    [mDict addEntriesFromDictionary:DictObj]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:54:58.823

```
NSMutableDictionary *mDict=[[NSMutableDictionary alloc]init];
    NSMutableDictionary *mDict2=[[NSMutableDictionary alloc]init];

//later suppose you have 5 object in mDict and 2 object in mDict2\. combine in this Way.
    NSMutableArray *keys=[[NSMutableArray alloc]init];
    NSMutableArray *obj=[[NSMutableArray alloc]init];

    keys=[[mDict allKeys] mutableCopy];
    obj=[[mDict allValues] mutableCopy];

    [keys addObjectsFromArray:[mDict2 allKeys]];
    [obj addObjectsFromArray:[mDict2 allValues]];

    NSMutableDictionary *dict=[[NSMutableDictionary alloc]initWithObjects:obj forKeys:keys]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:40:26.643

您可以使用 -objectEnumerator 或 NSDictionary 的其他方法来枚举您的字典。

因此，在您的循环中，您枚举您的字典并将所有对象和键添加到一个大字典中。

# ruby-on-rails - Ruby on rails - 无法使用 MiniMagick / CarrierWave Uploader 进行操作

> ID：12143030
> 
> 赞同：0
> 
> 时间：2012-08-27T13:32:58.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave, uploader

这是我尝试上传不是图像的内容（例如 mp3）时收到的消息。

> 使用 MiniMagick 操作失败，可能不是图像？原始错误：MiniMagick::Invalid

所以我试图通过检查文件扩展名来设置条件。仅在不是 mp3 时才调整大小。

这是我使用 CarrierWave 的 FileUploader：

```
class FileUploader < CarrierWave::Uploader::Base

include CarrierWave::MiniMagick

...

if File.extname(File.name) != ".mp3"
   process :resize_to_fit => [100, 100]

  version :thumb do
    process :resize_to_fit => [80, 80]
  end

end

...

end 
```

File.name 只为我提供不带当前文件扩展名的名称。您知道为我提供名称 + 扩展名的变量吗？

编辑：

我在我的控制器中找到了一个替代方案：

```
 def create
    @myfile = File.new(params[:icon])

    if @myfile.save

        if @myfile.file.file.extension != "mp3"
          @myfile.file.resize_to_fit(100, 100)

          @file.save
        end
     end 
```

但现在我被我的 CarrierWave FileUploader 困住了：

```
version :thumb do
    process :resize_to_fit => [80, 80]
  end 
```

太复杂了，我只需要 MiniMagick 来处理图像

我只需要一个小条件：

如果 file_is_image？==> 调整大小 + 创建缩略图

否则 ==> 什么也不做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:40:47.080

```
process :resize_to_fit => [100, 100]; :if => :processable?

def processable? upload_name
  File.extname(upload_name.path) != ".mp3"
end 
```

# html - 怎么做 可滚动？

> ID：12143031
> 
> 赞同：3
> 
> 时间：2012-08-27T13:32:57.830
> 
> 标签：html, css, jsp, struts, displaytag

我在用`<display:table>`标签在 jsp 页面中显示表格。

现在我可以使用页码浏览记录。

现在我想在单页中显示所有记录但滚动。（无分页）

此表设置为页面的一部分，因此只有一个 div 可以滚动。页面的其余部分应保持原样。

请建议..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:45:04.317

尝试将您的表格放入`div`标签中，然后编辑 css 文件：

```
<div class="displayTableFrame" style="margin-top: 20px; padding-top: 30px;">            
    <display:table cellpadding="5" cellspacing="1" name="myList" class="dataTable">             
        <display:column class="colId" property="id" title="ID" />    
        <display:column class="colName" property="name" />    
        <display:column class="colEmail" property="email" />    
        <display:column class="colStatus" property="status" />    
        <display:column class="colComments" property="description" title="Comments" />                                                                            
    </display:table>    
</div> 
```

例如，`div`标签是`displayTableFrame`. 然后css：

```
.displayTableFrame {
    background-color: green;
    overflow-x: scroll;
    height: 320px
    width: 100%;
} 
```

给它一个固定的高度，然后溢出-x：滚动。尝试让我们知道。

**更新：**
感谢 Jaimon 和他的神奇代码，可以在这里找到固定标头的解决方案： 我测试过
[的 Jaimon 的博客，它在 IE8 和 FF14 上运行顺畅。](http://jaimonmathew.wordpress.com/2010/03/19/making-scrollable-tables-with-fixed-headers-updated-2/)

祝鲁奇好运！
最好的问候，
Khanh Tran

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:24:28.843

@Sweety正如我已经回答过类似的问题一样，我将向您传递我为该答案所做的示例。

主要是为您定义`div`外部表数据。像这样的东西：

```
 <table>
        <tr><td>
            <div id="tbl-container" style="width: 850px;">
               <display:table name="CustomerList" export="true" id="customerList" class="dataTable" defaultorder="ascending" cellspacing="1" requestURI="" frame="true" decorator="org.displaytag.decorator.TotalTableDecorator"> 
                 <display:setProperty name="export.pdf.filename" value="OverallOverdue.pdf" /> 
                 <display:setProperty name="export.excel.filename" value="OverallOverdue.xls" /> 
                 <display:setProperty name="export.csv" value="true" /> 
                 <display:setProperty name="export.csv.filename" value="OverallOverdue.csv" /> 
                 <display:setProperty name="export.xml" value="true" /> 
                 <display:setProperty name="export.xml.filename" value="OverallOverdue.xml" /> 
                 <display:setProperty name="paging.banner.placement">top</display:setProperty> 
                 .........  
                 </display:table></div> </td></tr>
             <tr><td>&nbsp;</td></tr> 
             <tr><td>

             </td>
            </tr>
        </table>

<div id="export-links"> 
  This is not scroll-able. It will stay in position
</div> 
```

然后，您可以将其`div`与表格分开放置（或任何其他 div，事实上）

您可以在这里尝试看看这是如何在一个实时示例中工作的：http: [//jsfiddle.net/LQJY5/2/](http://jsfiddle.net/LQJY5/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:36:39.987

试试这个！！！

```
$(document).ready(
        function()  {
            scrolify($('#idOfDisplayTable'), 100); // 100 = HEIGHT
        }
    );

    function scrolify(tblAsJQueryObject, height){
        var oTbl = tblAsJQueryObject;
        var oTblDiv = $("<div/>");
        oTblDiv.css('height', height);
        oTblDiv.css('overflow-y','scroll');             
        oTbl.wrap(oTblDiv);

        // save original width
        oTbl.attr("data-item-original-width", oTbl.width());
        oTbl.find('thead tr td').each(function(){
            $(this).attr("data-item-original-width",$(this).width());
        }); 
        oTbl.find('tbody tr:eq(0) td').each(function(){
            $(this).attr("data-item-original-width",$(this).width());
        });                 

        // clone the original table
        var newTbl = oTbl.clone();
        oTbl.parent().parent().prepend(newTbl);
        newTbl.wrap("<div/>");

        // remove table header from original table
        oTbl.find('thead tr').remove();                 
        // remove table body from new table
        newTbl.find('tbody tr').remove();   

        // replace ORIGINAL COLUMN width                
        newTbl.width(newTbl.attr('data-item-original-width'));
        newTbl.find('thead tr td').each(function(){
            $(this).width($(this).attr("data-item-original-width"));
        });     
        oTbl.width(oTbl.attr('data-item-original-width'));      
        oTbl.find('tbody tr:eq(0) td').each(function(){
            $(this).width($(this).attr("data-item-original-width"));
        });                 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T10:01:09.340

将它放在您的 JSP Javascript 代码中

```
if(navigator.appName == 'Microsoft Internet Explorer')
{
document.write('<link rel="stylesheet" type="text/css" href="<%= request.getContextPath() %>/pages/styles/locked-column.css" />');
}
else
{
document.write('<link rel="stylesheet" type="text/css" href="<%= request.getContextPath() %>/pages/styles/displaytagex.css" />');
} 
```

并将locked-column.css 类设为

```
div#tbl-container {
width: 400px;
/ default value will be overrided by minimum of table width or screen resolution/
height: 300px;
overflow: auto;
/
scrollbar-base-color: #ffeaff;

/
}
.dataTable { /table-layout: fixed; /
border-collapse: collapse;
/ background-color: WhiteSmoke; /
}
.dataTable th {
top: expression(document . getElementById("tbl-container") . scrollTop-2
); / IE5+ only /
z-index: 20;
font-size: small;
padding: 3px 3px 3px 3px !important;
text-align: center;
position: relative;
cursor: default;
font-family: sans-serif;
font-size: small;
font-weight: bold;
background-color: rgb(46, 54, 64);
color: #FFFFF;
}
.dataTable thead tr {
position: relative;
height: 10px;
background-color: #7CA4E0;
}
.dataTable th a:link,th a:visited {
color: #FFFFFF;
text-decoration: none;
font-family: sans-serif;
font-weight: normal;
}
.dataTable a:hover {
color: #FFFFFF;
text-decoration: none;
font-family: sans-serif;
font-weight: bold;
}
.dataTable thead th.sorted A {
font-weight: bolder;
}
.dataTable td {
padding: 3px 3px 3px 3px !important;
}
.dataTable tbody tr {
height: auto;
white-space: nowrap;
}
.dataTable tbody tr.odd {
background-color: #eee;
font-size: x-small;
}
.dataTable tbody tr.tableRowEven,tr.even {
background-color: #ddd
font-size: x-small;
}
.dataTable tbody tr td:last-child { / padding-right: 20px; /
}
/these styles have nothing to do with the locked column/
.dataTable body {
background-color: white;
color: black;
font-family: sans-serif;
}
.dataTable tbody td {
padding: 2px 4px 2px 4px !important;
font-family: sans-serif;
font-size: x-small;
}
.exportlinks {
font-family: sans-serif;
}
/ style sheet to display light blue color for a mouse on row over event /
.dataTable tr.rowMouseOver {
color: white;
background-repeat: repeat-x;
background-color: rgb(228, 59, 47); /#8888FF;/
}
.dataTable .order1 {
background-position: right 50%;
background-image: url('../Images/arrow_up.gif');
background-repeat: no-repeat;
font-weight: bold;
}
.dataTable .order2 {
background-position: right 50%;
background-image: url('../Images/arrow_down.gif');
background-repeat: no-repeat;
font-weight: bold;
}
span.export {
padding: 0 4px 1px 20px;
font-size: x-small;
text-align: center;
}
span.excel {
background-image: url('../Images/ico_file_excel.png');
background-repeat: no-repeat;
width: 16px;
}
span.csv {
background-image: url('../Images/ico_file_csv.png');
background-repeat: no-repeat;
width: 16px;
}
span.xml {
background-image: url('../Images/ico_file_xml.png');
background-repeat: no-repeat;
width: 16px;
}
span.first {
background-image: url('../Images/first.jpg');
background-repeat: no-repeat;
width: 16px;
}
span.last {
background-image: url('../Images/last.jpg');
background-repeat: no-repeat;
width: 16px;
}
span.pdf {
background-image: url('../Images/ico_file_pdf.png');
background-repeat: no-repeat;
width: 16px;
}
span.rtf {
background-image: url('../Images/ico_file_rtf.png');
background-repeat: no-repeat;
width: 16px;
}
.rightAlignedPadded {
text-align: right;
padding-right: 10px;
} 
```

和另一个 css 作为 displaytagex.css，包含

```
input.displayTableFirst {
background-image: url('../Images/first.jpg');
background-repeat: no-repeat;
border: 0px;
width: 27px;
height: 24px;
}
input.displayTableNext {
background-image: url(../Images/next.jpg);
background-repeat: no-repeat;
border: 0px;
width: 27px;
height: 24px;
border: 10px;
}
input.displayTablePrevious {
background-image: url(../Images/previous.jpg);
background-repeat: no-repeat;
border: 0px;
width: 27px;
height: 24px;
border: 10px;
}
input.displayTableLast {
background-image: url(../Images/last.jpg);
background-repeat: no-repeat;
border: 0px;
width: 27px;
height: 24px;
border: 10px;
}
.displayPageButtonSimple {
background: #AEAFAD;
font-family: "Times New Roman", Times, serif;
font-size: small;
color: black;
}
.displayPageButton {
background: #AEAFAD;
font-family: "Times New Roman", Times, serif;
font-size: small;
width: 70px;
color: black;
}
overlay {
background-image: url(../Images/blackDot.png);
position: absolute;
top: 0px;
left: 0px;
width: 100%;
height: 100%;
}
.displayTableFrame {
background-color: white;
height: 320px;
width: 100%;
}
.dataTable {
text-decoration: none;
border: 1px solid #CCC;
/
width: 98%; /
}
.dataTable th {
font-family: sans-serif;
font-size: small;
font-weight: bold;
padding: 3px 3px 3px 3px !important;
background-color: rgb(46, 54, 64);
color: #FFFFF;
}
.dataTable td {
padding: 3px 3px 3px 3px !important;
}
.dataTable thead tr {
position: relative;
height: 10px;
}
.dataTable th a:link,th a:visited {
color: #FFFFFF;
text-decoration: none;
font-family: sans-serif;
font-weight: normal;
}
.dataTable a:hover {
color: #FFFFFF;
text-decoration: none;
font-family: sans-serif;
font-weight: bold;
}
.dataTable thead th.sorted A {
font-weight: bolder;
}
.dataTable tbody {
width: 400px;
height: 230px;
overflow-x: hidden;
overflow-y: auto;
}
.dataTable tbody tr {
height: auto;
white-space: nowrap;
}
.dataTable tbody tr.odd {
background-color: #eee
}
.dataTable tbody tr.tableRowEven,tr.even {
background-color: #ddd
}
.dataTable tbody tr td:last-child {
padding-right: 20px;
}
.dataTable tbody td {
padding: 2px 4px 2px 4px !important;
font-family: sans-serif;
font-size: small;
}
.exportlinks {
font-family: sans-serif;
}
/ style sheet to display light blue color for a mouse on row over event /
.dataTable tr.rowMouseOver {
color: white;
background-repeat: repeat-x;
background-color: rgb(228, 59, 47); / #7CA4E0; /
}
.dataTable .order1 {
background-position: right 50%;
background-image: url('../Images/arrow_up.gif');
background-repeat: no-repeat;
font-weight: bold;
}
.dataTable .order2 {
background-position: right 50%;
background-image: url('../Images/arrow_down.gif');
background-repeat: no-repeat;
font-weight: bold;
}
.defaultDataTable {
background-color: white;
border: 1px solid #000066;
font-size: xx-small;
margin: 5px;
font: bold normal normal xx-small "Arial Black";
}
.defaultDataTable th {
border-right: 1px solid #c8c8ff;
padding-left: 2px;
padding-right: 12px;
font-family: arial, helvetica, sans-serif;
font-weight: bold;
color: black;
background-color: #AEAFAD;
margin-right: 10px;
white-space: nowrap;
}
.defaultDataTable td {
font-family: verdana, arial, helvetica, sans-serif;
padding-left: 2px;
}
.defaultDataTable tr.total td {
white-space: nowrap;
vertical-align: top;
font-weight: bold;
border-top: 1px solid black;
padding-bottom: 10px;
}
.defaultDataTable tr.total td.customer {
visibility: hidden;
}
.defaultDataTable td.hidden {
display: none;
}
.defaultDataTable th.hidden {
display: none;
}
.defaultDataTable th.r {
text-align: right;
padding-right: 10px;
}
.defaultDataTable th.c {
text-align: center;
}
.defaultDataTable td.r {
text-align: right;
padding-right: 10px;
}
.defaultDataTable td.c {
text-align: center;
}
.defaultDataTable tr.odd {
background-color: #eee
}
.defaultDataTable tr.even {
background-color: #ddd;
}
.defaultDataTable th a {
text-align: left;
color: black;
}
.defaultDataTable .order1 {
background-position: right 50%;
background-image: url('../Images/arrow_up.gif');
background-repeat: no-repeat
}
.defaultDataTable .order2 {
background-position: right 50%;
background-image: url('../Images/arrow_down.gif');
background-repeat: no-repeat
}
span.export {
padding: 0 4px 1px 20px;
font-size: x-small;
text-align: center;
}
span.excel {
background-image: url('../Images/ico_file_excel.png');
background-repeat: no-repeat;
width: 16px;
}
span.csv {
background-image: url('../Images/ico_file_csv.png');
background-repeat: no-repeat;
width: 16px;
}
span.xml {
background-image: url('../Images/ico_file_xml.png');
background-repeat: no-repeat;
width: 16px;
}
span.first {
background-image: url('../Images/first.jpg');
background-repeat: no-repeat;
width: 16px;
}
span.last {
background-image: url('../Images/last.jpg');
background-repeat: no-repeat;
width: 16px;
}
span.pdf {
background-image: url('../Images/ico_file_pdf.png');
background-repeat: no-repeat;
width: 16px;
}
span.rtf {
background-image: url('../Images/ico_file_rtf.png');
background-repeat: no-repeat;
width: 16px;
}
.pageHeader {
height: 60px;
background-image: url('../Images/header.gif');
background-repeat: repeat-x
}
.pageHeaderText {
font-size: 30px;
margin-left: 5px;
color: black;
font-family: "century gothic", verdana, arial, helvetica, sans-serif;
font-weight: bold;
text-align: left;
display: inline;
white-space: nowrap;
}
.content {
width: 50%;
padding: 10px;
}
.rightColumn {
width: 3px;
}
.customer {
width: 10%;
text-align: left;
}
.company {
width: 10%;
text-align: left;
}
.email {
width: 14%;
text-align: left;
}
.broker {
width: 10%;
text-align: right;
}
.company {
width: 10%;
text-align: left;
}
.fmv {
width: 13%;
text-align: left;
}
.country {
width: 12%;
text-align: left;
}
.tax {
width: 14%;
text-align: left;
}
.size9 {
width: 9%;
text-align: left;
}
.hideColumn {
display: none;
}
.so {
width: 10%;
text-align: left;
}
.type {
width: 10%;
text-align: left;
}
.fmv {
width: 20%;
text-align: left;
}
.plan {
width: 13%;
text-align: left;
}
.eid {
width: 15%;
text-align: left;
}
.orderNumber {
width: 10%;
text-align: left;
}
.orderDate {
text-align: left;
width: 14%;
}
.productName {
width: 25%;
}
.size35 {
width: 35%;
text-align: left;
}
.quantity {
text-align: center;
width: 10%;
}
.rightAlignedPadded {
text-align: right;
padding-right: 10px;
}
.logo {
border-top: 1px solid #000066;
border-left: 1px solid #000066;
border-bottom: 1px solid #000066;
display: inline;
text-align: right;
}
.code {
font-family: verdana, arial, helvetica, "courier new", monospace;
font-size: xx-small;
}
.borderedInline {
display: inline;
border: 1px solid black;
}
img {
border: 0px;
}
.pagelinks {
color: #999999;
margin: 5px;
}
.pagelinks img {
vertical-align: middle;
} 
```

并制作一个类似的jsp

```
<div id="tbl-container">
   <display:table name="sessionScope.participantList" export="true" id="tmpId" class="dataTable" defaultorder="ascending" cellspacing="1" > 
   <display:setProperty name="decorator.media.html" value="displaytag.sample.decorators.MyHtmlTotalWrapper" /> 
    <display:setProperty name="export.pdf.decorator" value="displaytag.sample.decorators.MyITextTotalWrapper" /> 
    <display:setProperty name="export.pdf.filename" value="ParticipantProfile.pdf" 
/> 
    <display:setProperty name="export.rtf.decorator" value="displaytag.sample.decorators.MyITextTotalWrapper" /> 
    <display:setProperty name="export.rtf.filename" value="ParticipantProfile.rtf" 
/> 
    <display:setProperty name="export.excel.filename" value="ParticipantProfile.xls" 
/> 
    <display:setProperty name="export.csv" value="true" /> 
    <display:setProperty name="export.csv.filename" value="ParticipantProfile.csv" 
/> 
    <display:setProperty name="export.xml" value="true" /> 
    <display:setProperty name="export.xml.filename" value="ParticipantProfile.xml" 
/> 
    <display:setProperty name="paging.banner.placement">top</display:setProperty> 
    <display:column title="" > 
    </display:column> 

    </display:table></div> 
    <tr><td>&nbsp;</td></tr> 
    <div id="export-links"> 
 </div> 
```

# android - 对于 phonegap 中的动态表单，iscroll 无法正常工作

> ID：12143040
> 
> 赞同：0
> 
> 时间：2012-08-27T13:33:29.033
> 
> 标签：android, cordova, iscroll4

我已经开发了 android phonegap 应用程序。我在 div 中附加了一个包含“输入”和“选择”的动态表单。我需要为该 div 获取滚动条。所以我使用了 iScroll.js，但它不能正常工作。在输入时文本框突然滚动条消失。这个问题经常发生。

这是我的代码：

```
function loaded() 
{
    var myScroll = new iScroll('wrapper', 
    {
        scrollbarClass: 'myScrollbar',
        useTransform: false,
        vScroll: true,
        onBeforeScrollStart: function (e) 
        {
            var target = e.target;
            while (target.nodeType != 1) target = target.parentNode;
                if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA')
                    e.preventDefault();
        }
    });
}
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false); 
```

请指导我。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:01:16.933

所以有几件事会有所帮助——在你加载的函数之外定义你的 myScroll 变量，这样你就可以在任何地方访问它。

同样在您的内容已加载调用`myScroll.refresh()`并至少有 1 毫秒的延迟之后。小技巧，大有帮助。

# c++ - 缩小 std::priority_queue

> ID：12143042
> 
> 赞同：1
> 
> 时间：2012-08-27T13:33:35.913
> 
> 标签：c++, stl, priority-queue

给定一个 std::priority_queue 元素被添加到其中的速度比通过重复弹出最佳元素的通常过程删除它们的速度要快，因此除非执行某些操作，否则程序将耗尽内存，

有什么方法可以丢弃最差的一半元素，同时让最好的一半像往常一样一次处理一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:44:00.053

显然不是，因为 std::priority_queue 的接口非常有限。您可以实现自己的优先级队列，让您可以使用 make_heap、push_heap 和 pop_heap（这就是 std::priority_queue 的实现方式）并实现自己的函数来删除最差的一半元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:44:39.710

没有直接的方法。但无论如何，二进制堆并不真正支持该操作。

但间接地这样做并不难：

*   创建一个临时的空优先级队列
*   交换主队列和临时队列
*   输入一个从临时弹出并推送到主的循环
*   当您对复制元素的数量感到满意时停止
*   销毁临时队列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T13:46:17.427

这`std::priority_queue`是一个 2 堆，因此仅部分排序。数据结构对于定位元素的最佳一半而不是提取它们没有用处。

# php - 'Whenever' 相当于 PHP 或 Symfony2 用于处理 cronjobs？

> ID：12143048
> 
> 赞同：1
> 
> 时间：2012-08-27T13:34:06.380
> 
> 标签：php, symfony, symfony-2.1, cron-task

是否有用于处理 cronjobs 的捆绑包或其他东西？

我想念 Ruby 的[任何时候](https://github.com/javan/whenever#readme)，所以我正在寻找类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:11:55.200

[BCCCronManager](http://knpbundles.com/michelsalib/BCCCronManagerBundle)提供了一个用于管理 cron 表的 Web 界面。它是唯一维护的关于 CRON 的 Symfony2 包。

在纯 PHP 中，您可能对[cron-expression](https://github.com/mtdowling/cron-expression)或[Crontab](https://github.com/yzalis/Crontab)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T08:35:56.343

你需要乔比

[无需修改 crontab 即可管理所有 cron 作业。处理锁定、日志记录、错误电子邮件等。](https://github.com/jobbyphp/jobby)

# c++ - 有没有人在 RHEL 上构建过omniORB？

> ID：12143049
> 
> 赞同：2
> 
> 时间：2012-08-27T13:34:10.983
> 
> 标签：c++, linux, rhel, omniorb

我正在尝试在 RHEL 5.5 上构建omniORB 库。

我尝试运行配置

CC=gcc 和 CXX=g++ 和 PYTHON=bin/omnipython

我遇到了这个问题，它抱怨

```
gmake[3]: Entering directory `/home/local/NT/jayanthv/omniORB-4.1.4/src/lib/omniORB'
../../../bin/omniidl -bcxx -p../../../src/lib/omniORB -Wbdebug -Wba -p../../../src/lib/omniORB -Wbdebug -v -ComniORB4 ../../../idl/Naming.idl

omniidl: ERROR!

omniidl: Could not open IDL compiler module _omniidlmodule.so
omniidl: Please make sure it is in directory /home/local/NT/jayanthv/omniORB-4.1.4/lib
omniidl: (or set the PYTHONPATH environment variable)

omniidl: (The error was '/home/local/NT/jayanthv/omniORB-4.1.4/lib/_omniidlmodule.so: wrong ELF class: ELFCLASS64') 
```

所以，我尝试使用英特尔 C++ 编译器，

```
export CXX=/opt/intel/Compiler/11.1/080/bin/ia32/icc
export LD_LIBRARY_PATH=/opt/intel/Compiler/11.1/080/lib/ia32
export PYTHON=/home/local/NT/jayanthv/omniORB-4.1.4/bin/omnipython 
```

但是，现在它抱怨 ../../../bin/omniidl -bcxx -p../../../src/lib/omniORB -Wbdebug -Wba -p../../.. /src/lib/omniORB -Wbdebug -v -ComniORB4 ../../../idl/Naming.idl

```
omniidl: ERROR!

omniidl: Could not open IDL compiler module _omniidlmodule.so
omniidl: Please make sure it is in directory /home/local/NT/jayanthv/omniORB-4.1.4/lib
omniidl: (or set the PYTHONPATH environment variable)

omniidl: (The error was '/home/local/NT/jayanthv/omniORB-4.1.4/lib/_omniidlmodule.so: undefined symbol: __cxa_pure_virtual') 
```

操作系统是具有 x86_64 架构的 RHEL 5.5，我正在尝试构建 32 位二进制文​​件。将不胜感激任何洞察这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:19:38.153

这是因为omniidl 是作为Python 扩展模块实现的。您使用的 Python 可执行文件是 64 位可执行文件，因此它无法加载 32 位库。

看看这个[http://objectmix.com/object/196129-compiling-omniorb-32bits-libraries-64bits-machine-suse.html](http://objectmix.com/object/196129-compiling-omniorb-32bits-libraries-64bits-machine-suse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:18:01.240

我终于找到了使用英特尔编译器在 Linux 上构建omniORB 的神奇组合。

您会看到它抱怨找不到“__cxa_pure_virtual”的地方，这发生在 gcc 下，因为它找不到名为 libstdc++ 的库

因此，制作`CC="icc -lstdc++"`或`CC="gcc -lstdc++"`取决于您使用的编译器。对 CXX 执行相同操作（如果使用 g++，请在 g++ 处指定）

而对于Python，我使用了python1.5的omnipython，`PYTHON=bin/omnipython`

这意味着它看起来相对于 omniORB 根路径。

您可以看到它在哪里抱怨“错误的 ELF 类：ELFCLASS64”，这是因为您尝试使用 64 位链接器链接 32 位二进制文​​件。

所以，强制你的编译器和链接器标志为 32。

`CFLAGS=-m32 CXXFLAGS=-m32 LDFLAGS=-m32`

完成后，运行您的配置

`./configure --prefix=/opt/omniInst --build=i686-pc-linux-gnu`

运行 gmake，然后运行 ​​gmake install，您将在 omniInst 或您建议的任何前缀目录下看到所有二进制文件和库。

# ruby-on-rails - 在 Ruby on Rails 中过滤数据库结果

> ID：12143052
> 
> 赞同：1
> 
> 时间：2012-08-27T13:34:24.773
> 
> 标签：ruby-on-rails, filter, ruby-on-rails-3.2, filtering

我创建了一个 Rails 应用程序，用户可以在其中创建和申请工作。

正如您可以想象的那样，其中许多工作来自不同的国家/城市，并且具有不同的薪水和行业等。我想创建一个系统，允许我的用户过滤所有选项以找到他们最感兴趣的内容。

我想在我的视图中使用单选按钮和工资滑块（可能是 Jquery）的组合来选择显示的结果。然后，当用户点击一个名为过滤结果的按钮时，我希望页面重新加载（不刷新 - 如 AJAX）。

我想实现的过滤系统的一个很好的例子可以在[WIWT.com](http://www.wiwt.com)上看到，如果你只需点击他们的顶部过滤器按钮，他们就有一个优秀的过滤系统。

很高兴知道从哪里开始，以及是否已经有任何易于使用的 Gems？另外，如果有人能指出我的指导方向，那将是非常棒的，因为我发现的大部分内容都相当不完整，并且基于 has_scope。

谢谢！

# php - 如何调试 PHP/HTML/MySQL 中不工作的字符？

> ID：12143058
> 
> 赞同：0
> 
> 时间：2012-08-27T13:34:47.050
> 
> 标签：php, mysql, html, utf-8

我正在使用 PHP 和 MySQL 构建一个 HTML 网页，但在运行页面时遇到了瑞典字符 ÅÄÖ 的问题。它们显示为 � 而不是 Å/Ä/Ö。

我已在 HTML 元标记和 PHP 中将字符集设置为 UTF-8：

```
<?php
    header('Content-type: text/html; charset=UTF-8'); 
?> 

<meta charset="UTF-8"> 
```

此外，MySQL`utf8_general_ci`在所有表上运行排序规则。

所有文件也应编码并保存为 UTF-8，无需 Unicode 签名 (BOM) 和规范化形式。

所有这一切以前都完美无瑕，但今天，无论我尝试什么，我最终都会得到 - 而不是 Å/Ä/Ö。有没有好的方法来调试这个并找到问题？

我的任何步骤是不必要的还是我忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:42:00.193

[从deceze 的文章](http://kunststube.net/frontback/)中你需要的是关于 SET NAMES 的部分：

```
mysql_set_charset('utf8', $connection); //not mysql_query("SET NAMES 'utf8'"); 
```

只需在您的 php 代码的开头添加，在数据库连接启动后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:42:02.707

您可以尝试以 UTF-8 编码保存您的 php 文件。我假设这些文件是用其他东西编写的（可能是 ISO-xxxx 或 ANSI）

要使用 Notepad++ 执行此操作，请选择所有行并复制到剪贴板，在编码菜单中将编码更改为不带 BOM 的 UTF-8，然后粘贴所有内容并保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:45:01.110

这仅适用于少数记录还是所有带有瑞典字符的记录？

您可以在浏览器设置中手动更改页面编码 - 这就是您测试它的方式：将其更改为 latin1/iso-8854-1 以查看它是否正确显示这些错误为 utf-8。

可能有人正在使用不支持 utf8 或手动修改编码的浏览器。

还要确保你的数据库连接也是 utf8。( `set names utf8;`)

# regex - 正则表达式没有产生所需的缩进 - Perl

> ID：12143063
> 
> 赞同：1
> 
> 时间：2012-08-27T13:35:01.117
> 
> 标签：regex, perl

我有以下`Perl`脚本用于`XML`正确缩进文件：

```
@files = glob "*.xml";

undef $/;
for $file (@files) {
    $indent = 0;
    open FILE, $file or die "Couldn't open $file for reading: $!";
    $_ = readline *FILE;
    close FILE or die "Couldn't close $file: $!";

    # Remove whitespace between > and < if that is the only thing separating them
    s/(?<=>)\s+(?=<)//g;

    # Indent
    s{  # Capture a tag <$1$2$3>,
        # a potential closing slash $1
        # the contents $2
        # a potential closing slash $3
        <(/?)([^/>]+)(/?)> 

        # Optional white space
        \s*

        # Optional tag.
        # $4 contains either undef, "<" or "</"
        (?=(</?))?
    }
    {
        # Adjust the indentation level.
        # $3: A <foo/> tag. No alteration to indentation.
        # $1: A closing </foo> tag. Drop one indentation level
        # else: An opening <foo> tag. Increase one indentation level
        $indent +=
            $3 ?  0 :
            $1 ? -1 :
                  1;

        # Put the captured tag back into place
        "<$1$2$3>" .
        # Two closing tags in a row. Add a newline and indent the next line
    ($1 and defined($4) and ($4 eq "</") ? "\n" . ("  " x $indent) : 
$4                                   ? "\n" . ("  " x $indent) :
                                       ""
        )
    # /g repeat as necessary
    # /e Execute the block of perl code to create replacement text
    # /x Allow whitespace and comments in the regex
    }gex;

    open FILE, ">", $file or die "Couldn't open $file for writing: $!";
    print FILE or die "Couldn't write to $file: $!";
    close FILE or die "Couldn't close $file: $!";
} 
```

首先，它缩进了 my `tabs`，我想要**两个空格**。此外，它在同一缩进中生成标签，使其位于同一行，而不是下一行，但具有相同的缩进：

```
<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE kit SYSTEM "tc.dtd"><kit><contact/><description> 
```

它应该在哪里：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
  <!DOCTYPE kit SYSTEM "tc.dtd">
  <kit>
      <contact/>
      <description> 
```

...

我承认有用于缩进的 Perl 工具`XML`，例如`XML-Tidy`但由于`tc.dtd`标记，我总是收到一个错误，抱怨`tc.dtd`文件上无法解决的依赖关系，而我只关心相同（格式）的缩进，而不是依赖关系本身。我的`Perl`正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:40:15.223

您可以使用不一定验证的工具[xmllint 。](http://xmlsoft.org/xmllint.html)例子：

输入（格式错误）：

```
<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE kit SYSTEM "tc.dtd"> <kit>
  <contact/>      <description>chunky bacon</description> </kit> 
```

运行`xmllint --format file.xml`，你会得到：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE kit SYSTEM "tc.dtd">
<kit>
  <contact/>
  <description>chunky bacon</description>
</kit> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:14:14.343

您必须*始终* 处于*每个*程序`use strict`的顶部。这尤其适用于您在代码方面寻求帮助的情况，因为这些措施可以捕捉到原本会被忽略的简单错误`use warnings`

 *也请使用词法文件句柄，你有太多的注释让你的代码变得*清晰*

您的代码可能会失败，因为它没有考虑标签*已经*缩进的深度：它只是在任何两个连续标签之前添加空格。请特别注意这`" " x -1`不起作用，具有 PCDATA（文本）内容的元素将被简单地忽略并保留在其当前缩进处

格式化 XML 并不像您希望的那么简单。您应该听取每个人的建议并使用现有模块来格式化您的数据。两者[`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML)都有[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)格式选项。是的，他们需要访问相应的 DTD，但这是一件*好事**

# css - 使用 twitter bootstrap 自定义 less

> ID：12143064
> 
> 赞同：2
> 
> 时间：2012-08-27T13:35:02.993
> 
> 标签：css, less

当我们在 twitter bootstrap 中进行自定义时，我们可以在文本框中为变量赋值。例如@bodyBackground、@textColor。然后生成相应的css。我的老板希望我重新创建相同的功能。它应该接受我们项目的 less 文件中使用的变量的值。然后我们说自定义，它应该生成相应的css文件。请帮助我如何做到这一点。

# c++ - 条件语句上的按位与异或

> ID：12143065
> 
> 赞同：3
> 
> 时间：2012-08-27T13:35:03.867
> 
> 标签：c++, if-statement, bit-manipulation

我试图理解这个片段

```
for (; game->boxes_left > 0; game->turns++)
      {
      if ( (game->turns & 1) ^ game->computer_first )
         game->human_move();
      else
         game->computer_move();
      } 
```

因为 inf`game->turns`是一个整数，并且它具有递增的值，并且`game->comp_first`是一个布尔值，所以有人请告诉我如何`if ( (game->turns & 1) ^ game->computer_first )`返回它是 1 (true) 或 0 (false) 吗？因为我理解`&`的是按位运算符，当`turns & 1`它总是返回 0 时，作为`turns`一个递增的值，`(game->turns & 1)`这个 if 语句的功能是什么？有什么办法可以用java编写这个片段。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:38:35.347

在`game->turns`遍历连续值时，它的最后一位在每次迭代时在 0 和 1 之间切换。结果，`game->turns & 1`也介于 0 和 1 之间。如果 bool 为假，则用 bool 对结果进行 XOR 运算会得到相同的值，如果 bool 为真，则会得到相反的值。

```
game->turns   Last bit   XOR 0    XOR 1
-----------   --------   -----    -----
          0          0       0        1
          1          1       1        0
          2          0       0        1
          3          1       1        0
          4          0       0        1
          5          1       1        0 
```

请注意序列在 is 时如何变为 0-1-0-1-0-1 ，而在is时`game->computer_first`为`false`1-0-1-0-1-0 。`game->computer_first``true`

要将此代码段转换为 Java，请比较`game.turns & 1`with的结果`)`：

```
if (((game.turns & 1) != 0) ^ game->computer_first) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:41:02.597

game->turns & 1 将为每个奇数的 game->turns 值返回 true。例如：

```
turns= 0x00001111
one=   0x00000001
result=0x00000001 
```

因为对于两个值，最右边的位都是“1”。如果 computer_first 也是“1”，例如 true，则 if 语句将返回 false，因为 1 ^ 1 = 0。

如果你问我，这似乎是一种相当迂回的做事方式。怎么了`if (game->turns % 2) != game->computer_first`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:40:54.207

正如其他人已经指出的那样，此代码基于这样一个事实，即当您增加一个数字时，其二进制表示的最低有效位会在开和关之间交替。

IMO，缺乏可读性很大程度上是一个更大问题的症状：代码的逻辑并不是最好的。我想我会做一些不同的事情。这是少数几个指向成员函数的指针真正有意义并大大简化代码的情况之一。

由于我不知道实际的类型，我将假设它`game`是一个指向 type 对象的指针`Game`。从那里开始，为第一个和第二个玩家定义指向成员函数的指针是一件相当简单的事情，然后编写一个由一对动作而不是单个动作组成的循环（或者，根据您的观点，真的更像一个每次迭代完成移动）。

```
typedef void (Game::*pmf)();

pmf first_player = &Game::human_move;
pmf second_player = &Game::computer_move;

if (game->comp_first)
    std::swap(first_player, second_player);

for ( ; game->boxes_left > 0; game->turns+=2) {
    game->*first_player();
    game->*second_player();
} 
```

不幸的是，虽然这使您的代码更加干净和简单，但它也使转换为 Java 变得相当困难——Java 没有直接模拟 C++ 指向成员函数的指针。通常的替代方法是定义一个接口，然后定义一个实现该接口的匿名类。在你完成所有这些之前，从有一点代码重复的东西开始可能会更简单：

```
if (game->comp_first)
    for (; game->boxes_left > 0; game->turns+=2) {
        game->computer_move();
        game->player_move();
    }
else
    for (; game->boxes_left > 0; game->turns+=2) {
        game->player_move();
        game->computer_move();
    } 
```

...并且由于此代码不使用任何高级功能，因此将其转换为 Java 之类的低级语言应该相当简单。在我看来，使用指向成员函数的指针可以得到最干净的结果，*但*我仍然认为最后一个版本比你开始的版本要干净得多。

I suppose I should add one more detail. Depending on the situation, it's possible that you may have to exit the loop after only one player has made a move. If that's possible for whatever game you're implementing, you'd change the two lines like this:

```
game->*first_player();
game->*second_player(); 
```

and instead have each of the move functions return a boolean indicating whether further play remains possible following that move, and your loop body would become something like:

```
if (game->*first_player())
    game->*second_player(); 
```

# android - 以编程方式删除 GridView 周围的额外空间

> ID：12143067
> 
> 赞同：8
> 
> 时间：2012-08-27T13:35:10.447
> 
> 标签：android, gridview

我正在尝试`GridView`在我的 java 类中以编程方式制作一个，并且一切正常。问题是在`GridView`. 在xml中，我设法使用以下方法将其删除：

```
android:listSelector="@null" 
```

但我没有设法在java中做任何类似的事情。我尝试了一些解决方法，比如让`GridView`10 像素比实际屏幕大，但没有运气。

有没有人有任何代码？

编辑：

我的回答并没有解决问题。赏金还在继续。这是我的`GridView`代码：

```
 GridView gridView = new GridView(this);
    gridView.setNumColumns(someInt);
    gridView.setAdapter (new MyCustomAdapter(this));
    gridView.setLayoutParams(new GridView.LayoutParams(
            customValue,
            LayoutParams.FILL_PARENT,
            Gravity.CENTER_HORIZONTAL)
    ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T15:50:36.637

*   确保填充在不同密度的屏幕上显示相同的一种方法是将其转换为 DIP 单位。

    ```
    int padding = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, -5, 
                                        getResources().getDisplayMetrics()); 
    ```

*   您可以尝试的另一件事是在 xml 中定义一个空可绘制对象。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <drawable name="null_drawable">@null</drawable>
        ...
    </resources> 
    ```

    然后打电话`setSelector(R.drawable.null_drawable);`

***更新：***

*   `GridView`在自己的 xml 中定义你的并膨胀它。

    *布局/mygrid.xml*

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <GridView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:listSelector="@null"/> 
    ```

    在java中，

    ```
    GridView gridView = (GridView)inflater.inflate(R.layout.mygrid, null);
    gridView.setLayoutParams(new GridView.LayoutParams(customValue, 
                            LayoutParams.FILL_PARENT));
    gridView.setNumColumns(someInt);
    gridView.setAdapter (new MyCustomAdapter(this)); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:43:49.173

要获得与 using 相同的效果`android:listSelector="@null"`，但在代码中您需要使用[setSelector()](http://developer.android.com/reference/android/widget/AbsListView.html#setSelector%28int%29)，如 marvinX​​XII 所述。但是您需要传入有效的 ResourceId 或使用`setSelector(Drawable sel)`变体。不幸的是，它不可能传递`null`给该方法，因为这将导致 NullPointerException。[这里](https://stackoverflow.com/questions/2234292/creating-an-empty-drawable-in-android)描述的解决方法是使用这个：

```
gridView.setSelector(android.R.color.transparent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:26:43.270

通过以下方式解决它：

```
 gridView.setPadding(-5, 0, -5, 0); 
```

但是对于不同的屏幕，您需要不同的填充。但这不是一个完整的解决方案。将接受此代码的功能修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T11:17:49.257

我认为您可以在创建动态网格视图时使用 setPadding 来消除该问题。

```
int grids_height = (int) TypedValue.applyDimension(
            TypedValue.COMPLEX_UNIT_DIP, (int) (Row_num * 80),
            getResources().getDisplayMetrics());
    Log.v("", "" + grids_height);
    gridview = new GridView(this);
    gridview.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            grids_height));
    gridview.setPadding(0, 3, 0, 0);
    gridview.setBackgroundColor(Color.TRANSPARENT);
    gridview.setNumColumns(7);
    gridview.setVerticalSpacing(1);
    gridview.setHorizontalSpacing(1);
    gridview.setGravity(Gravity.CENTER_HORIZONTAL);
    gridview.setDescendantFocusability(ViewGroup.FOCUS_BEFORE_DESCENDANTS); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:54:23.550

你见过这个问题[为什么我的 Android GridView 周围有多余的像素？](https://stackoverflow.com/questions/4036990/why-are-there-extra-pixels-around-my-android-gridview)? 在这种情况下，问题是在 gridview 上用作选择器的图像有一个填充。

以编程方式应用该问题的建议解决方案，您将[设置选择器](http://developer.android.com/reference/android/widget/AbsListView.html#setSelector%28int%29)

```
gridView.setSelector(android.R.color.transparent) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T14:54:09.020

[setSelector(int)](http://developer.android.com/reference/android/widget/AbsListView.html#setSelector%28int%29) (from `AbsListView`) 不是你要找的吗？

喜欢`setSelector(0)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T17:34:36.667

使用以下设置对我有用：

```
public ContactContainer(Context context, AttributeSet attrs) {
    super(context, attrs);
    gallery = new GridView(context, attrs);
    gallery.setNumColumns(numColumns);
    gallery.setStretchMode(stretchMode);
    gallery.setSmoothScrollbarEnabled(smoothScrollbar);
    gallery.setSelector(listSelector);
    gallery.setGravity(Gravity.CENTER_HORIZONTAL);
    this.addView(gallery);
} 
```

我将它与这段 xml 代码结合使用：

```
<de.ramicro.SClip.components.ContactContainer
    android:id="@+id/gridview_gallery_contacts"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@id/contact_gallery_bottom_bar"
    android:layout_below="@id/contact_gallery_top_bar"
    android:padding="0dip"/> 
```

我认为您需要的可能是透明选择器和重力设置为 CENTER_HORIZONTAL 的组合。

# c# - 执行 GZipStream 压缩时抛出 System.OutofMemoryException

> ID：12143070
> 
> 赞同：3
> 
> 时间：2012-08-27T13:35:26.013
> 
> 标签：c#, .net, out-of-memory, gzipstream

我正在以胜利形式工作。执行以下操作时出错。`System.OutOfMemoryException`当我尝试连续运行大约 2-3 次操作时，它会显示错误。似乎.NET 无法释放操作中使用的资源。我用于操作的文件很大，大约**超过 500 MB。**

我的示例代码如下。请帮助我如何解决错误。

```
try
{
   using (FileStream target = new FileStream(strCompressedFileName, FileMode.Create, FileAccess.Write))
   using (GZipStream alg = new GZipStream(target, CompressionMode.Compress))
   {
       byte[] data = File.ReadAllBytes(strFileToBeCompressed);
       alg.Write(data, 0, data.Length);
       alg.Flush();
       data = null;
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:43:27.880

替换`ReadAllBytes`为[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/dd782932%28v=vs.100%29.aspx)

```
using (FileStream target = new FileStream(strCompressedFileName, FileMode.Create, FileAccess.Write))
using (GZipStream alg = new GZipStream(target, CompressionMode.Compress))
{
    using (var fileToRead = File.Open(.....))
    {
        fileToRead.CopyTo(alg);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T13:43:33.797

一个非常**粗略的例子**可能是

```
// destFile - FileStream for destinationFile 
// srcFile - FileStream of sourceFile
using (GZipStream gz = new GZipStream(destFile, CompressionMode.Compress))
{
     byte[] src = new byte[1024];
     int count = sourceFile.Read(src, 0, 1024);
     while (count != 0)
     {
         gz.Write(src, 0, count );
         count = sourceFile.Read(src, 0, 1024);
     }
}
// flush, close, dispose .. 
```

所以基本上我把你改成`ReadAllBytes`了只读取*1024 字节的块。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:44:04.623

您可以尝试使用此方法压缩文件[MSDN 链接](http://msdn.microsoft.com/ru-ru/library/system.io.compression.gzipstream.aspx)

```
 public static void Compress(FileInfo fileToCompress)
    {
        using (FileStream originalFileStream = fileToCompress.OpenRead())
        {
            using (FileStream compressedFileStream = File.Create(fileToCompress.FullName + ".gz"))
            {
               using (GZipStream compressionStream = new GZipStream(compressedFileStream, CompressionMode.Compress))
               {
                      originalFileStream.CopyTo(compressionStream);                                
               }
            }
        }
    } 
```

用法：

```
string directoryPath = @"c:\users\public\reports";

DirectoryInfo directorySelected = new DirectoryInfo(directoryPath);

foreach (FileInfo fileToCompress in directorySelected.GetFiles())
{
    Compress(fileToCompress);
} 
```

# junit - Junit 的静态分析

> ID：12143074
> 
> 赞同：2
> 
> 时间：2012-08-27T13:35:36.863
> 
> 标签：junit

是否有任何用于 Junits 静态分析的 Eclipse 插件。我正在寻找一些最好的工具，比如 PMD，它检查 Junit 实践并给我一个错误报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:46:51.590

[FindBugs](http://findbugs.sourceforge.net/)被描述为对 PMD 的强烈补充，并且应该涵盖 JUnit 测试，因为 JUnit 仍然只是 Java。它可从[马里兰大学获得](http://findbugs.sourceforge.net/downloads.html)。

# android - Android，创建不同类型的 jsonObject

> ID：12143078
> 
> 赞同：0
> 
> 时间：2012-08-27T13:35:46.637
> 
> 标签：android, json

我想创建一个通用类来创建我的 jsonObject。是否可以创建一个可以创建不同类型对象的类，例如

```
{"chunkSize":10,"filters"
[{"field":"segmentOwners.id","operator":"EQUAL","value":"11578","valueType":"java.lang.Integer"},
{"field":"language","operator":"EQUAL","value":"FR","valueType":"java.lang.String"},
{"field":"customerId","operator":"EQUAL","value":"77","valueType":"java.lang.Integer"}]
,"orderBy":[{"field":"creationTime","order":"DESC"}],"page":0} 
```

或者只是一个简单的请求：

```
{login:"mylogin",pwd:"mypwd"} 
```

我试过类似的东西：

```
 @Override
    protected JSONObject doInBackground(String... params) {
        byte[] result = null;
        Iterator iter = mData.entrySet().iterator();

       JSONObject jsonObj = new JSONObject();

        Iterator it = mData.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry pairs = (Map.Entry)it.next();
            try {
                jsonObj.put((String) pairs.getKey(), (String) pairs.getValue());
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            it.remove(); // avoids a ConcurrentModificationException
        } 
```

但我不确定这是同一种哈希图（字符串，jsonObjet ...？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:44:15.853

如果`JSONObject`要从 JSON 字符串创建实例，只需执行以下操作：

```
JSONObject jsonObj = new JSONObject("<your json string>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:45:48.003

我将创建通用容器类（即`DataContainer`），无论它拥有什么数据（即`setFromJson()`，`getData()`），它都会公开统一的 API。然后为每个数据结构（即`DataLogin`，`DataSomething`）创建单独的对象。然后，当您从远程源获取 json 数据时，您可以创建`DataLogin`对象并将其交给您`DataContainer`（或将 json 传递给 DataContainer，以便它可以检测到`DataLogin`应该使用并自己创建它，但这需要一些可能不是最佳方法的逻辑）。然后可以将预期对您的 json 数据起作用的所有方法交给 DataContainer 对象和方法可以`getType()`对其执行（当然您需要自己设置类型），这将返回存储的数据，然后`getData()`让数据自己工作在。

# watir - Watir 的下拉菜单很长，速度很慢

> ID：12143080
> 
> 赞同：0
> 
> 时间：2012-08-27T13:35:53.520
> 
> 标签：watir

Watir（“经典”Watir）大约需要两秒钟才能从包含大约 250 个选项的下拉菜单中选择一个选项。有什么办法可以让这更快吗？

（两秒钟可能听起来不多，但重复的“压力测试”会变得有点烦人......）

我已经测试过“browser.speed = :zippy”，但它对此没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:15:25.780

加快速度的一种方法是为每个选项生成自动 html ID 属性，然后按 id 定位。例如：

```
<select id="options">
  <option id="option1">First Option</option>
  <option id="option2">Second Option</option>
  ...
  <option id="optionx">X Option</option>
</select> 
```

然后像这样选择：

```
browser.option(:id => "option2").select 
```

# iphone - UILocalNotification 动作和打盹

> ID：12143095
> 
> 赞同：2
> 
> 时间：2012-08-27T13:36:28.773
> 
> 标签：iphone, ios, notifications, uilocalnotification

我正在为客户开发一个自定义应用程序，并且对 iOS 开发还比较陌生。该应用程序涉及设置提醒，我正在使用 UILocalNotifications。现在根据我的研究，通知上的操作将始终运行应用程序，但我真的希望有人能纠正我。同样从我读过的内容来看，您仅限于“查看”或“关闭”选项。理想情况下，我希望通知上有 3 个按钮，而不必打开应用程序来执行操作。

我想要一个 'dismiss' 选项、'snooze' 选项和一个 'ok' 选项，它可以关闭通知但在后台运行一些代码。

我遇到了一个与通知相关的问题，有人建议使用模式视图打开应用程序并从那里显示选项。可能，只是不那么干净，我猜。

任何其他想法，或者这是我必须做的才能实现我想要的功能？如果是这种情况，有没有办法在我从模式视图中选择一个选项后关闭应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:36:42.970

这是不可能的，因为通知不是由您的应用程序而是由系统创建的，因此您无法自定义通知的外观。（同样在 iOS 5 中，用户可以选择将通知显示为横幅而不是警报，如果可能的话，这将隐藏除查看和关闭按钮之外的任何其他按钮）。

其次，没有办法关闭你的应用程序，因为 iOS 是一个以用户为中心的系统，用户决定是打开还是关闭应用程序，而不是应用程序本身。

# python - 使用python进行字符串模式匹配

> ID：12143097
> 
> 赞同：0
> 
> 时间：2012-08-27T13:36:39.187
> 
> 标签：python, string

我正在研究 python 和生物序列。
我有一个序列。

```
seq1 = \
...        """ atgaaatttatcattgaacgtgagcatctgctaaaaccactgcaacaggtcagtagcccg
...        ctgggtggacgccctacgttgcctattttgggtaacttgttgctgcaagtcacggaaggc
...        tctttgcggctgaccggtaccgacttggagatggagatggtggcttgtgttgccttgtct
...        cagtcccatgagccgggtgctaccacagtacccgcacggaagttttttgatatctggcgt
...        ggtttacccgaaggggcggaaattacggtagcgttggatggtgatcgcctgctagtgcgc
...        tctggtcgcagccgtttctcgctgtctaccttgcctgcgattgacttccctaatctggat
...        gactggcagagtgaggttgaattcactttaccgcaggctacgttaaagcgtctgattgag
...        tccactcagttttcgatggcccatcaggatgtccgttattatttgaacggcatgctgttt
...        gagaccgaaggcgaagagttacgtactgtggcgaccgatgggcatcgcttggctgtatgc
...        tcaatgcctattggccagacgttaccctcacattcggtgatcgtgccgcgtaaaggtgtg
...        atggagctggttcggttgctggatggtggtgatacccccttgcggctgcaaattggcagt
...        aataatattcgtgctcatgtgggcgattttattttcacatctaagctggttgatggccgt
...        ttcccggattatcgccgcgtattgccgaagaatcctgataaaatgctggaagccggttgc
...        gatttactgaaacaggcattttcgcgtgcggcaattctgtcaaatgagaagttccgtggt
...        gttcggctctatgtcagccacaatcaactcaaaatcactgctaataatcctgaacaggaa
...        gaagcagaagagatcctcgatgttagctacgaggggacagaaatggagatcggtttcaac
...        gtcagctatgtgcttgatgtgctaaatgcactgaagtgcgaagatgtgcgcctgttattg
...        actgactctgtatccagtgtgcagattgaagacagcgccagccaagctgcagcctatgtc
...        gtcatgccaatgcgtttgtag"""

seq2 = \
...        """ accgtagcatctgctaaaaccagtacgcccg
...        ctgggtggacgatgcaacttgttgctgcaagtcacggaaggc
...        tctttgcggctgaccggtaccgacttggagatggagatggtggcttgtgttgccttgtct
...        cagtcccatgagccgggtgctaccacagtacccgcacggaagttttttgatatctggcgt
...        ggtttacccgaaggggcggaaattacggtagcgttggatggtgcatgatcgcctgctagtgcgc
...        tctggtcgcagccgtttctcgctgtctaccttgcctgcgattgacttccctaatctggat
...        gactggcagagtgaggttgaattcactttaccgcaggctacgttaaagcgtctgattgag
...        tccactcagttttcgatgctatttatgtccgttattatttgaacggcatgctgttt
...        gagaccgaaggcgaagagttacgtactgtggcgaccgatgggcatcgcttggctgtatgc
...        tcaatgcctattggccaggctaattcggtgatcgtgccgcgtaaaggtgtg
...        atggagctggttcggttgctggatggtggtgatacccccggcccctgcaaattggcagt
...        aataatattcgtgctcatgtgggcgattttattttcacatctaagctggttgatggccgt
...        ttcccggattatcgccgcgtattgccgaagaatcctgataaaatgctggaagccggttgc
...        gtcatgccaatgcgtttgtag""" 
```

我想知道 seq1 和 seq2 中有多少个字符串是相同的以及它们各自的位置。这不仅是模式匹配，也是获取位置。谁能告诉我如何使用 python 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:53:15.547

索引器函数将所有位置作为列表返回

```
def indexer(s, sub):
    positions=[]
    pos=0
    while True:
        pos=s.find(sub,pos+1)
        if pos==-1:
            return positions
        else:
            positions.append(pos) 
```

matcher 函数将返回一个字典。dict 中的每个键都是在 a 和 b 中都可用的序列，相应的 dict 值是 2 项元组，其中包含 a 的所有匹配位置和 b 的所有匹配位置：

```
def matcher(a,b):
    sequences=set()
    for l in range(1,len(a)):
        for pos in range(len(a)):
            sequences.add(a[pos:pos+l])
    for l in range(1,len(b)):
        for pos in range(len(b)):
            sequences.add(b[pos:pos+l]) 
    matches={}
    for seq in sequences:
        matches_a=indexer(a,seq)
        matches_b=indexer(b,seq)
        if result_a and result_b:
            matches[seq]=(matches_a,matches_b)
    return matches 
```

这个例子应该工作：

```
print matcher('asdfasdfa','asdfasasdfasdfasdfadfasdfdf') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:44:45.953

也许[Wikibooks](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_subsequence#Python)可以帮助您入门？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:42:11.673

你可以使用`index`：

```
>>> seq.index(str)
1046 
```

请注意，它会为您找到第一次出现的位置。然后，您可以尝试从切片中查找其他事件。

**已编辑**

当有多次出现时，这样的循环可能会起作用：

```
test = seq1 + ""
try:
    while test:
        position = test.index(str_)
        positions.append(position + last_position)
        position += len(str_)
        last_position += position
        test = test[position:]
except ValueError:
    print positions 
```

我们制作字符串的副本，`seq`因为我们将使用它。然后，我们继续使用该`index`方法检查位置，将其存储`positions`并相应地更新字符串。

[PS] 调用变量的坏主意`str`，你正在覆盖一个内置的......

# .net - 如何在鼠标悬停时更改边框粗细

> ID：12143099
> 
> 赞同：1
> 
> 时间：2012-08-27T13:36:41.603
> 
> 标签：.net, silverlight, styles, blend

我正在研究控件的样式。当鼠标悬停完成时，我想更改控件的边框厚度。我想用样式本身写这个，而不是用代码隐藏写

所以，我尝试了以下方式。

```
<VisualState x:Name="MouseOver">
<Storyboard>
<DoubleAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderThickness">
<SplineDoubleKeyFrame  KeyTime="0" Value="2" />                                   
</DoubleAnimationUsingKeyFrames>
</Storyboard>
</VisualState> 
```

但这会引发错误。

我怎样才能实现这个功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:49:15.787

`ObjectAnimationUsingKeyFrames`在您的情况下使用`DoubleAnimationUsingKeyFrames`：

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderThickness">
    <DiscreteObjectKeyFrame KeyTime="0" Value="2"/>
</ObjectAnimationUsingKeyFrames> 
```

`DoubleAnimationUsingKeyFrames`动画`Double`属性的值，而`BorderThickness`是 type of `Thickness`， not `Double`。

# python - 如何在 django 页面请求期间打开文件

> ID：12143101
> 
> 赞同：3
> 
> 时间：2012-08-27T13:36:51.043
> 
> 标签：python, django, django-debug-toolbar

我想优化我的 django 应用程序，为此，我使用 django_debug_toolbar 来了解为计算 html 页面所做的 SQL 请求。我想对打开的文件做同样的事情：是否有 django_debug_toolbar 插件或者有没有办法开发一个 django 中间件来在 html 页面请求期间跟踪打开的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:53:02.517

最后我给自己写了一个 django 中间件：

```
import __builtin__
def newFileClassFactory(oldfile,openfiles):
    class newfile(oldfile):
        def __init__(self, *args):
            self.thepath = args[0]
            print "### OPENING %s ###" % str(self.thepath)
            try:
                oldfile.__init__(self, *args)
            except Exception,e:
                print e
                raise
            openfiles.add(self.thepath)

        def close(self):
            print "### CLOSING %s ###" % str(self.thepath)
            oldfile.close(self)
            openfiles.remove(self.thepath)
    return newfile

class OpenedFiles(object):
    def __init__(self):
        self.oldfile = __builtin__.file
        self.openfiles = set()
        self.newfile = newFileClassFactory(self.oldfile,self.openfiles) 
        self.oldopen = __builtin__.open
        def newopen(*args):
            return self.newfile(*args)
        self.newopen = newopen

    def process_response(self, request, response):        
        if request.path.split('.')[-1].lower() not in ('ico','jpg','jpeg','gif','png','js','css'):
            if self.openfiles:
                print 'Not closed files :'
                print '----------------'
                print '/n'.join(self.openfiles)
            print '*' * 60,' End of Request (%s)' % request.path            
            __builtin__.file = self.oldfile
            __builtin__.open = self.oldopen
        return response

    def process_request(self, request):
        if request.path.split('.')[-1].lower() not in ('ico','jpg','jpeg','gif','png','js','css'):
            __builtin__.file = self.newfile
            __builtin__.open = self.newopen
            print '*' * 60,' Beginning of Request (%s)' % request.path
        return None 
```

只需在 MIDDLEWARE_CLASSES 的 settings.py 中添加 'your.module.path.OpenedFiles' （如果您想捕获 django 在其中间件中所做的事情，则在第一行），所有打开的文件都将在运行 django 内置时打印在控制台上服务器（python manage.py runserver）它还将打印发生的错误和未关闭的文件。

有趣的是，许多本地文件被 django 或应用程序打开以生成动态页面（模板、会话文件、缓存信息、图像以生成动态缩略图......）

# javascript - 在 Jquery 中创建元素

> ID：12143106
> 
> 赞同：15
> 
> 时间：2012-08-27T13:37:01.133
> 
> 标签：javascript, jquery, createelement

我想像这样使用“div.someelement”在 Jquery/Javascript 中创建元素

```
var SomeElement = $("div.someelement");
$( "#container" ).append( SomeElement ); 
```

但我不想复制同一个类的元素，我想创建一个新的。

`document.createElement`正在创造`"<div.somelement>"`而不是`<div class="someelement">`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-27T13:44:34.063

我将使用以下方法即时创建元素

```
$("<div/>",{
    "class" : "someelement",
    // .. you can go on and add properties
    "css" : {
        "color" : "red"
    },
    "click" : function(){
        alert("you just clicked me!!");
    },
    "data" : {
       "foo" : "bar"
    }
}).appendTo("#container"); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-27T13:39:38.593

尝试这个：

```
var $someelement = $('<div class="someelement"/>').appendTo('#container'); 
```

这将在其中创建一个全新的元素`#container`并将其保存以`$someelement`供以后参考。

[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

**更新**

您可以克隆原始文件，然后将其清空。这根本不会影响原始元素。

```
var $someelement = $('div.someelement').clone().empty().appendTo('#container'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T13:40:34.780

您可以通过以下方式做到这一点：

```
var newElement = $('<div class="someelement"></div>');
$('#container').append(newElement); 
```

或者如果您不需要该元素，您可以直接附加它：

```
$('#container').append('<div class="someelement"></div>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T13:47:45.547

根据您想要使用语法`"div.someelement"`来创建元素的问题。

为此，您需要制作自己的解析器。

如果这将是确切的语法，那将非常简单。

```
var str = "div.someelement",
    parts = str.split("."),
    elem = $("<" + parts.shift() + ">"),
    cls;

while (cls = parts.shift())
    elem.addClass(cls); 
```

但如果你要这样做，你不妨使用本机方法。

```
var str = "div.someelement",
    parts = str.split("."),
    elem = document.createElement(parts.shift());

elem.className = parts.join(" "); 
```

如果您想允许使用完整的 CSS 语法来创建元素，那么您可能需要查看 Sizzle 使用的正则表达式解析器，并根据您的需要使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T13:39:11.503

用这个：

```
var someElement = $("<div></div>");
someElement.addClass("someelement");
$("#container").append(someElement); 
```

或者您可以将调用链接在一起：

```
$("#container").append(
    $("<div></div>")
    .addClass("someelement")
); 
```

编辑：

也许我误解了这个问题，也许这会有所帮助。要创建一组新元素，请使用 jQuery 的`clone`方法：

```
$("div.someelement").clone().appendTo("#container"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-27T13:59:21.747

我会使用[textarea 的 zen 编码](http://code.google.com/p/zen-coding/downloads/detail?name=Zen.Coding-textarea.v0.7.1.zip&can=2&q=)作为起点。它的语法对于您正在尝试做的事情足够接近，它是一个很好理解的实现。您应该能够从原始字符串而不是从文本区域调用转换，只需稍作调整。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T15:11:40.380

由于您要求从 css 语法创建元素，因此您需要使用解析器来解释语法。

这是您可以从中构建的示例。这将匹配一个元素名称，后跟 id、类或其他属性。它不会涵盖一些边缘情况，但在大多数情况下都可以使用。

```
var elem_regex = /^(\w+)?|(#|\.)([^.#\[]+)|(\[[^\]]+?\])/g 
```

然后制作一个函数来获取零件并创建一个元素。

```
function elementFromSelector(str) {
    var match, parts = {}, quote_re = /^("|').+(\1)$/;
    while (match = elem_regex.exec(str)) {
        if (match[1]) 
            parts.name = match[1];
        else if (match[2] === ".") {
            if (!parts.clss) 
                parts.clss = [];
            parts.clss.push(match[3]);
        } else if (match[2] === "#")
            parts.id = match[3];
        else if (match[4]) {
            var attr_parts = match[4].slice(1,-1).split("="),
                val = attr_parts.slice(1).join("");
            parts[attr_parts[0]] = quote_re.test(val) ? val.slice(1,-1) : val;
        }
        else throw "Unknown match";
    }
    if (parts.name) {
        var elem = document.createElement(parts.name);
        delete parts.name;
        for (var p in parts)
            if (p === "clss")
                elem.className = parts[p].join(" ");
            else
                elem[p] = parts[p];
        return elem;
    } else throw "No element name at beginning of string";
} 
```

然后将适当的字符串传递给函数，它将返回元素。

```
var str = 'input#the_id.firstClass.secondClass[type="text"][value="aValue"]';

var element = elementFromSelector(str); 
```

在创建元素之前，零件看起来像这样。

```
{
    "name": "input",
    "id": "the_id",
    "clss": [
        "firstClass",
        "secondClass"
    ],
    "type": "text",
    "value": "aValue"
} 
```

然后它使用该信息来创建返回的元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-11T14:11:40.900

只需为 jQuery 创建一个新元素：

```
var $newElement = $(document.createElement("div"));
$newElement.appendTo($("body")); 
```

如果您想在属性中简单地使用 de 元素：

```
$newElement.attr({
    id : "someId",
    "class" : "someClass"
}); 
```

Rember by class 总是像这样使用“class”，因为 class 是一个保留名称

# c - C中的随机函数

> ID：12143115
> 
> 赞同：4
> 
> 时间：2012-08-27T13:37:19.997
> 
> 标签：c

我需要一个 11 到 99 之间数字的随机函数。我写了这个：

```
int random (void){
    int i2;
    i2=11+(rand()%99);      
    return i2;
} 
```

但数字超过 99。为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T13:39:28.653

因为如果`rand()`返回`98`，那么`98 % 99`就是`98`和`98 + 11 > 99`。

为此，您需要

```
i2 = 11 + ( rand() % 89 ); 
```

`rand() % 89`会给你数字`[0, 88]`，所以`+11`会变成`[11, 99]`。

* * *

顺便说一句，不要忘记`srand( time( NULL ) )`，否则它（很可能）会一直生成相同的（伪）随机数序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:42:34.077

（值 % 100 ）在 0 到 99 的范围内。您添加 11，因此范围在 11 到 110 之间。

尝试这样的事情：

```
int random (int min,int max){
    return min+(rand()%(max-min));
} 
```

参数 min 和 max 表示数字的范围

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:41:42.127

因为`rand()%99`返回一个 0 到 98 之间的值；然后添加 11，因此范围是 11 到 109。您必须将 99 更改为 89

# java - 如何将对象从 servlet 传递到 JSP？

> ID：12143123
> 
> 赞同：1
> 
> 时间：2012-08-27T13:37:59.810
> 
> 标签：java, jsp, servlets

> **可能重复：**
> [如何将对象从 servlet 传递到调用 JSP](https://stackoverflow.com/questions/12033092/how-to-pass-an-object-from-the-servlet-to-the-calling-jsp)

如何将对象从 servlet 传递到 JSP？

我在servlet端使用了以下代码

```
request.setAttribute("ID", "MyID");
request.setAttribute("Name", "MyName");
RequestDispatcher dispatcher = request.getRequestDispatcher("MangeNotifications.jsp");  
if (dispatcher != null){  
dispatcher.forward(request, response);  
} 
```

和 JSP 端的这段代码

```
 <td><%out.println(request.getAttribute("ID"));%> </td>
    <td><%out.println(request.getAttribute("Name"));%> </td> 
```

我在 JSP 页面中得到空结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:40:05.890

将其放在会话（`session.setAttribute("foo", bar);`）或请求中；然后可以通过您给它的名称（在我的示例中为“foo”）从 JSP 访问它。

编辑：使用简单`<%= ID %>`，`<%= Name %>`而不是`<%out.println.....%>`. 注意`=`java标签开头的，表示输出表达式的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:04:59.497

我认为不需要 servlet 的服务（doGet/doPost）方法。为了访问JSP 中的*请求*属性，您*必须*请求`servlet`via `url-pattern`，这样您就不必使用 session。

SampleServlet.java

* * *

```
@WebServlet(name = "SampleServlet", urlPatterns = {"/sample"})
public class SampleServlet extends HttpServlet {

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
   request.setAttribute("ID", "MyID");
   request.setAttribute("Name", "MyName");
   RequestDispatcher dispatcher = request
                       .getRequestDispatcher("/MangeNotifications.jsp");  
   if (dispatcher != null){  
      dispatcher.forward(request, response);  
   }
  }
} 
```

MangeNotifications.jsp（我假设这个文件位于 web-context 的根目录）

* * *

```
<br/>ID : ${ID}     Or scriptlets  <%-- <%=request.getAttribute("ID")%>  --%> 
<br/>ID : ${Name} 
```

现在打开浏览器并像这样设置请求 url somersetting，

```
http://localhost:8084/your_context/sample 
```

# javascript - JSONP 不工作

> ID：12143125
> 
> 赞同：0
> 
> 时间：2012-08-27T13:38:13.193
> 
> 标签：javascript, ajax, json, cordova, jquery-mobile

我正在制作一个 jQuery Mobile 和 PhoneGap 应用程序。我需要提交表格。我做了这样的事情：

```
$.ajax(
                {
                url: 'http://ip.ip.ip.ip:8070/services/rest/operator/login',//?email=' + email + '&password=' + haslo,
                dataType: 'jsonp',
                type: 'GET',
                callback: 'jsonpCallback',
                jsonpCallback: 'jsonpCallback',
                jsonp: '_jsonp',
                data: ({'email' : email, 'password' : pass}),
                contentType: 'application/x-www-form-urlencoded',

                success: function (data) {
                    window.location = ('file:///android_asset/www/custom/main.html');
                },

                error: function (data) {
                    alert('Login i/lub hasło nieprawidłowe '+data);
                }
            }); 
```

它适用于 Chrome，但不适用于我的 Android 设备。我阅读了 PhoneGap 和 jQuery Mobile 的文档，并尝试了白名单、$.mobile.allowCrossDomainPages 和 $.support.cors。据我所知，PhoneGap 允许跨域，我也尝试将数据类型更改为 json。

不幸的是，我无法访问服务器端代码。我只有这个简短的“wadl”。Web 服务返回 200 成功或 401 拒绝访问。

```
<resource path="/operator">
     <resource path="/login">
          <method name="GET">
                <request>
                     <representation mediaType="application/x-www-form-urlencoded">
                          <param name="email" style="query" type="xs:string"/>
                          <param name="password" style="query" type="xs:string"/>
                     </representation>
                </request>
                <response>
                     <representation mediaType="application/octet-stream"/>
                </response> 
```

我错过了什么？

注意：只有一次我收到 [object Object] 错误消息。但我不知道怎么做:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:47:05.543

昆汀是对的。这是一个服务器端的问题。使用 JSONP 请求时，服务器必须提供 json 格式的响应，而不仅仅是状态码。添加 true 和 false（正确的 json 格式）作为响应就足够了。

# c# - WPF - 无法获取资源文件

> ID：12143126
> 
> 赞同：0
> 
> 时间：2012-08-27T13:38:17.173
> 
> 标签：c#, wpf, bitmap, embedded-resource

我在 /Images 文件夹中有文件 animaha135.gif，将“构建操作”设置为“嵌入式资源”或“资源”，我想将此图像转换为位图：

```
 var image = new BitmapImage();
            image.BeginInit();
            image.UriSource = new Uri("pack://application:,,,/Images/animaha135.gif");
            image.EndInit(); 
```

但它不起作用：

> 找不到资源“images/animaha135.gif”。

我做错了什么？

* * *

解决了这个问题。程序集名称与项目名称不同。我设置相同，我的第一个代码有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:41:42.283

不要构建为“嵌入式资源”。构建为“资源”。-> 为我工作

编辑：

使用它来创建你的 uri：

```
protected static Uri GetUri(string filename, Type type)
{
    Assembly assembly = type.Assembly;
    string assemblyName = assembly.ToString().Split(',')[0];
    string uriString = String.Format("pack://application:,,,/{0};component/{1}",
        assemblyName, filename);
    return new Uri(uriString);
} 
```

我将它用于自定义着色器效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:52:38.717

如果您使用嵌入资源，则需要阅读程序集清单

```
 private void LoadImg()
    {

       //x is name of <Image name="x"/>
       x.Source = GetResourceTextFile(GetResourcePath("Images/animaha135.gif"));

    }

    private string GetResourcePath(string path)
    {
        return path.Replace("/", ".");
    }

    public BitmapFrame GetResourceTextFile(string filename)
    {

        string result = string.Empty;

        using (Stream stream = this.GetType().Assembly.GetManifestResourceStream(String.Format("{0}.{1}",this.GetType().Assembly.GetName().Name,filename)))
        {
            BitmapFrame bmp = BitmapFrame.Create(stream);
            return bmp;
        }

    } 
```

其他解决方案（返回位图）：

```
 //Use   BitmapImage bitmap = GetResourceTextFile(GetResourcePath("Images/animaha135.gif"));

    public BitmapImage GetResourceTextFile(string filename)
    {

        string result = string.Empty;

        using (Stream stream = this.GetType().Assembly.GetManifestResourceStream(String.Format("{0}.{1}",this.GetType().Assembly.GetName().Name,filename)))
        {

            BitmapImage bi = new BitmapImage();
            bi.BeginInit();
            bi.StreamSource = stream;
            bi.EndInit();

            return bi;
        }

    } 
```

注意：嵌入资源替换 path => / by 。

# android - 运行时选项卡应用程序崩溃

> ID：12143127
> 
> 赞同：0
> 
> 时间：2012-08-27T13:38:19.730
> 
> 标签：android, android-tabhost

我是 android 开发的新手，我一直在创建一个包含两个 tabs 的应用程序。在一个选项卡中将显示一个包含图像的网格，而在另一个选项卡上将显示另一个页面。我创建了 3 个 XML 布局文件和 3 个 java 类文件，其代码如下。（稍后我将编写 pageActivity.java 的代码）

MainActivity.java

```
public class MainActivity extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TabHost tabhost = getTabHost();

    TabSpec imgspec = tabhost.newTabSpec("Images");
    imgspec.setIndicator("Images");
    Intent imgIntent = new Intent(this,ImageAdapter.class);
    imgspec.setContent(imgIntent);

    TabSpec pagespec = tabhost.newTabSpec("NewPage");
    pagespec.setIndicator("New Page");
    Intent pageIntent = new Intent(this,pageActivity.class);
    pagespec.setContent(pageIntent);

    tabhost.addTab(imgspec);
    tabhost.addTab(pagespec);
}

} 
```

ImageAdapter.java

```
public class ImageAdapter extends BaseAdapter {
Context mContext;

public Integer[] mThumbIds  = {R.drawable.ic_action_search , R.drawable.ic_launcher , R.drawable.img1 };

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount(){
    return mThumbIds.length ; 
}

public Object getItem(int position){

    return mThumbIds[position];
}

public View getView(int position , View convertView , ViewGroup parent){
     ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mThumbIds[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
        return imageView;

}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

} 
```

pageActivity.java

```
public class pageActivity extends Activity {

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"/>

    </LinearLayout>

</TabHost> 
```

img_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

</GridView> 
```

page_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

</LinearLayout> 
```

在运行时，应用程序崩溃。查看 LogCat 后，似乎问题出在 ImageAdapter.java 文件上。请帮忙 。

LogCat 错误如下所示

```
08-27 19:16:14.772: E/AndroidRuntime(390): FATAL EXCEPTION: main
08-27 19:16:14.772: E/AndroidRuntime(390): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.prac1/com.example.prac1.MainActivity}: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.prac1/com.example.prac1.ImageAdapter}: java.lang.InstantiationException: com.example.prac1.ImageAdapter
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.os.Looper.loop(Looper.java:130)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-27 19:16:14.772: E/AndroidRuntime(390):  at java.lang.reflect.Method.invokeNative(Native Method)
08-27 19:16:14.772: E/AndroidRuntime(390):  at java.lang.reflect.Method.invoke(Method.java:507)
08-27 19:16:14.772: E/AndroidRuntime(390):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-27 19:16:14.772: E/AndroidRuntime(390):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-27 19:16:14.772: E/AndroidRuntime(390):  at dalvik.system.NativeStart.main(Native Method)
08-27 19:16:14.772: E/AndroidRuntime(390): Caused by: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.prac1/com.example.prac1.ImageAdapter}: java.lang.InstantiationException: com.example.prac1.ImageAdapter
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.widget.TabHost.addTab(TabHost.java:216)
08-27 19:16:14.772: E/AndroidRuntime(390):  at com.example.prac1.MainActivity.onCreate(MainActivity.java:32)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-27 19:16:14.772: E/AndroidRuntime(390):  ... 11 more
08-27 19:16:14.772: E/AndroidRuntime(390): Caused by: java.lang.InstantiationException: com.example.prac1.ImageAdapter
08-27 19:16:14.772: E/AndroidRuntime(390):  at java.lang.Class.newInstanceImpl(Native Method)
08-27 19:16:14.772: E/AndroidRuntime(390):  at java.lang.Class.newInstance(Class.java:1409)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-27 19:16:14.772: E/AndroidRuntime(390):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
08-27 19:16:14.772: E/AndroidRuntime(390):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:14:08.493

你的问题是它`ImageAdapter`不是一个`Activity`，因此Android不知道如何实例化它，就好像它是一个一样。

您需要创建一个`Activity`包含您的`ImageAdapter`和在该`Activity`集合中的适配器在其`GridView`.

首先，将 img_layout.xml 更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/img_grid"
android:layout_width="match_parent"
android:layout_height="match_parent" > 
```

让我们调用你的新 Activity `ImageGridActivity`。在你的范围内`ImageGridActivity.onCreate()`你会做：

```
setContentView(R.id.img_layout);
GridView grid = (GridView)findViewById(R.id.img_grid);
grid.setAdapter(new ImageAdapter(this)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:07:05.167

您正在尝试使用 设置其中一个选项卡`ImageAdapter`，但`ImageAdapter`不是`Activity`. 您只能将 Activity 类设置为选项卡。所以删除下面的代码

```
Intent imgIntent = new Intent(this,ImageAdapter.class);
imgspec.setContent(imgIntent); 
```

# java - 即时将数据流式传输到速度模板

> ID：12143128
> 
> 赞同：3
> 
> 时间：2012-08-27T13:38:20.620
> 
> 标签：java, velocity

有人可以告诉我，是否可以以某种方式打开 Velocity Excel 模板并在运行时向其中部分传输大量数据？

假设我想从外部资源 ArrayLists 中循环读取数据。每次迭代包含 10 000 个项目的列表。在简单的迭代中，我想将列表推送到 Velocity Excel 模板并通过跳转到下一个迭代来忘记它。在数据处理结束时，我会将 Velocity 上下文和模板与所有数据进行最终合并。

到目前为止，我已经看到了通过 Velocity 引擎通过几个简单的步骤生成 Excel 报告的方法：

*   创建速度模板
*   创建速度上下文
*   将数据置于上下文中
*   合并上下文和模板

但我需要多次重复第三步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:15:56.827

这是我经过测试的解决方案，在我的情况下效果很好。我能够在 Excel 表中生成直接从数据库加载的大量数据。

```
Connection conn = getDs().getConnection();
// such a configuration of prepared statement is mandatory for large amount of data
PreparedStatement ps = conn.prepareStatement(MY_QUERY, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY, ResultSet.CLOSE_CURSORS_AT_COMMIT);

// load huge amount of data per 50000 items
ps.setFetchSize(50000);
ResultSet rs = ps.executeQuery();

// calculate count of returned data earlier
final CountWrapper countWrapper = new CountWrapper(countCalculatedEarlier);
CustomResultSetIterator<MyObject> rowsIter = new CustomResultSetIterator<MyObject>(rs, new org.apache.commons.dbutils.BasicRowProcessor(), MyObject.class) {

    private Long iterCount = 0L;

    @Override
    public boolean hasNext() {
        // you can't call isLast method on defined as forward only cursor of result set, hence there is a homegrown calculation whether last item is reached or not
        return iterCount < countWrapper.getCount().longValue();
    };

    @Override
    public MyObject next() {
        iterCount++;
        return super.next();
    };
};

VelocityContext context = new VelocityContext();
// place an interator here instead of collection object
context.put("rows", rowsIter);

Template t = ve.getTemplate(template);
File file = new File(parthToFile);
FileWriter fw = new FileWriter(file);
// generate on the fly in my case 1 000 000 rows in Excel, watch out such an Excel may have 1GB size
t.merge(context, fw);

// The CustomResultSetIterator is a:

public class CustomResultSetIterator<E> implements Iterator<E> {
  //...implement all interface's methods
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:25:47.750

我看到的默认 Velocity 的唯一选择是实现类似“流式集合”的东西，它永远不会将完整的数据保存在内存中，而是一个一个地提供迭代器中的数据。

然后，您可以将此 Collection 放入 Velocity 上下文中，并在 Velocity 模板中使用它来迭代项目。在内部，Collection 将从您的外部源一个接一个地检索 hasNext()/next() 调用中的项目。

# php - RESTful API 路径设计指南

> ID：12143136
> 
> 赞同：0
> 
> 时间：2012-08-27T13:38:57.483
> 
> 标签：php, api, restful-url

我想知道一个宁静的API，以下哪个更实用？

1.  myapi.com/users/{userid}
2.  myapi.com/users?userid={userid}

当我们应该在 URL 参数与路径中传递参数时，我只是感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:49:31.317

参数用于过滤查询：

```
http://www.acme.com/products/?ﬁlter=cats&sort=des 
```

路径用于获取元素：

```
http://www.acme.com/products/1234 
```

所以，我推荐你使用`myapi.com/users/{userid}`.

[从这个精彩的演示文稿](http://slideshare.net/Wombert/designing-http-interfaces-and-restful-web-services-confoo11-20110310)跳到幻灯片 60 （我建议您阅读）。

# cakephp - 如何让 WebMatrix 将 CakePhp 模板 (*.ctp) 识别为 php？

> ID：12143139
> 
> 赞同：1
> 
> 时间：2012-08-27T13:39:08.137
> 
> 标签：cakephp, webmatrix

这个问题专门关于 Microsoft 的 WebMatrix 作为 IDE 如何让它识别扩展名为 ctp 的文件，这些文件是 php 的蛋糕模板，并在本地打开它们并对源代码进行格式化和着色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:59:58.750

这里有一点不受支持的 hack :) 打开这个文件：

C:\Program Files (x86)\Microsoft WebMatrix\config\filetypes.xml

在文件中查找 .php - 您应该会找到如下所示的内容：

`<FileType extension=".php;.phtml">`

修改该行，并添加您的文件扩展名。下次打开 WebMatrix 时，它应该将该文件视为 PHP。

# asp.net - Asp.net 对数图表不四舍五入值

> ID：12143142
> 
> 赞同：1
> 
> 时间：2012-08-27T13:39:26.310
> 
> 标签：asp.net, charts

我正在尝试在 ASP.NET 中创建一个对数图表控件，其 X 轴网格标记为以下值：125、250、500、1000、2000、4000 等。当我使用对数图表时，它会显示值为 125, 250, 500.000000000001, 1000, 2000, 4000.00000000003, ... 如何使这些值四舍五入为整数/整数？

这是我的 .aspx 文件中的代码：

```
<asp:Chart ID="ChartAudiogram" runat="server" Height="420px" Width="1033px">
    <chartareas>
        <asp:ChartArea BorderDashStyle="Solid" Name="MainArea">
           <AxisY .... />
            <AxisX IsLabelAutoFit="False" IsLogarithmic="True" IsStartedFromZero="False" 
                LogarithmBase="2" Maximum="25000" Minimum="125" IntervalType="Number">
                <MajorGrid LineColor="Gray" LineDashStyle="Dash" />
            </AxisX>
        </asp:ChartArea>
    </chartareas>
</asp:Chart> 
```

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:01:47.970

好的，想通了。我需要格式化 AxisX 的 LabelStyle - 实际上非常简单:)。将以下内容添加到 AxisX：LabelStyle Format="D"

```
<AxisX IsLabelAutoFit="False" IsLogarithmic="True" IsStartedFromZero="False" 
    LogarithmBase="2" Maximum="8000" Minimum="125" IntervalType="Number">
    <MajorGrid LineColor="Gray" LineDashStyle="Dash" />
    <LabelStyle Format="D" />
</AxisX> 
```

# javafx - 禁用分页动画

> ID：12143147
> 
> 赞同：2
> 
> 时间：2012-08-27T13:39:36.110
> 
> 标签：javafx, pagination, javafx-2

我正在尝试`Pagination`使用 JavaFX 禁用控制动画。我找不到任何关于如何做到这一点的准确信息。我知道有些控件有这个`setAnimated(false)`方法，但是这个没有。

也许有一个通过 CSS 样式或通过皮肤界面的解决方案，但我对 JavaFX 有点陌生

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T02:32:59.900

对于 JavaFX 2.2，分页动画将有点难以禁用。

正如您所注意到的，没有公共 API 可以禁用动画（CSS 中也没有任何内容）。您需要创建自己的皮肤并将该皮肤分配给分页控件。

为此，请使用默认的[JavaFX 2.2 分页皮肤](http://hg.openjdk.java.net/openjfx/2.2/master/rt/file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/PaginationSkin.java)作为基础并对其进行编辑，使其不播放动画。如果您将您的自定义分页皮肤重命名为另一个包（例如 org.acme.javafx.scene.control.skin），那么您可以通过为您的应用程序分配一个包含以下规则的 css 样式表来指定该新皮肤：

```
.pagination {
    -fx-skin: "org.acme.javafx.scene.control.skin.PaginationSkin";
} 
```

除了新 JavaFX 用户的初始实现困难（这是相当重要的）之外，这种方法的另一个严重缺点是在 JavaFX 2.2 中，皮肤 API 不公开，所以当 JavaFX 8 发布时皮肤 api 是公开的，您的更改可能不起作用，因此您需要为 JavaFX 8 重新编码。您的更改无法继续适用于 JavaFX 8 的原因是`com.sun.javafx.scene.control.skin.SkinBase`您的自定义分页皮肤需要派生的类将移至类似`javafx.scene.control.skin.SkinBase`成为公共 API。

所以我建议现在使用分页动画，除非你真的需要摆脱它。

当前有一个针对[JavaFX 运行时问题跟踪器](http://javafx-jira.kenai.com)的请求，以允许在分页控件中禁用动画。请参阅[RT-26439 分页：翻页动画应该是 deactivatable](http://javafx-jira.kenai.com/browse/RT-26439)。

# iphone - 谁删除了我的 iOS 应用程序？

> ID：12143152
> 
> 赞同：0
> 
> 时间：2012-08-27T13:39:43.813
> 
> 标签：iphone, ios, push-notification

基于[这个回复](https://stackoverflow.com/questions/6391351/how-to-know-all-devices-tokens-to-send-push-notification-apns-in-a-loop#comment7491681_6391389)说我只能向安装了我的应用程序的设备发送推送通知（所以我的证书没有被 Apple 列入黑名单），我怎么知道谁删除了应用程序，以便我可以从我的数据库中删除设备令牌？

还有其他解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:49:46.377

您可以通过使用苹果服务来检查推送通知 ID 是否仍然有效，您可以[在此处阅读相关信息](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)

# python - "preparing documents" hangs - toctree circular references in Sphinx

> ID：12143156
> 
> 赞同：1
> 
> 时间：2012-08-27T13:39:52.957
> 
> 标签：python, python-sphinx, circular-reference, toctree

i try to generate a documentation with Sphinx but the generation hangs on "preparing documents .." I search for a solution but I don't find any advice to solve the problem.

The problem appears after adding a Table of content to all files. The structure of the documentation looks like this :

a few Models: Every model has some Tables ( one file per table) example:

*   Model = AUDITRAIL
*   Tables = AUDITTRAIL_BFLOG.rst, AUDITTRAIL_SESSIONLOG.rst

AUDITRAIL.rst

> ```
> AUDITTRAIL
> ==========
> 
> .. toctree::
>    :maxdepth: 1
> 
>    AUDITTRAIL_BFLOG.rst
>    AUDITTRAIL_SESSIONLOG.rst 
> ```

AUDITTRAIL_SESSIONLOG.rst

> # AUDITTRAIL.SESSIONLOG
> 
> .. toctree:: :maxdepth: 1
> 
> AUDITTRAIL.rst
> 
> **Keys and indexes**
> 
> ===== ===== ==================== seq type fields
> ===== ===== ==================== 1 P SESSIONLOGID 2 I USRID,SESSIONLOGID ===== ===== ====================
> 
> **Fields**
> 
> ===== ==================== ===== ===== ========== =============== ==================== seq fieldname type inDB interface widgettype description
> ===== ==================== ===== ===== ========== =============== ==================== 5 CLIENTNAME S Y W20 EDITBOX Client name 4 COMPUTERNAME S
> Y W20 EDITBOX Server name 6
> CREDATIM E Y E8 EDITBOX Creation date field 11 DESCR S Y W1024
> EDITBOXLONG Description field 10 LABEL S
> Y W100 EDITBOX Label field 1
> SESSIONLOGID N Y C10 EDITBOX Id field 8 UPDDATIM E Y E8
> EDITBOX Update date field 2 USRID N
> Y C10 EDITBOX id user 7
> USRIDCRE N Y C10 EDITBOX Creation user id field 9 USRIDUPD N Y C10
> EDITBOX Update user id field *3 USR_CODE S
> N W30 EDITBOX * ===== ==================== ===== ===== ========== =============== ====================

I added a table of content on every table file to reference to the other tables from the same model. I hope somebody can help me.

Greeting, Mischa

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:37:59.343

You've got **circular references** in your documents' TOCs.

`AUDITRAIL.rst` references `AUDITTRAIL_SESSIONLOG.rst` in its TOC, and `AUDITTRAIL_SESSIONLOG.rst` references back to `AUDITTRAIL.rst`. You can't have circular toctree references, you need to remove the `.. toctree::` directive from one file or the other.

Up until 1.1.3 Sphinx failed with a `RuntimeError: maximum recursion depth exceeded in cmp`, in 1.1.3 this was [changed to ignoring the circular toctree references and printing a warning message](https://bitbucket.org/birkenfeld/sphinx/issue/851/sphinx-doesnt-notice-circular-tocs-nicely).

# javascript - 带有框架控制的画布上的 GIF 动画

> ID：12143157
> 
> 赞同：1
> 
> 时间：2012-08-27T13:39:53.830
> 
> 标签：javascript, canvas, gif

我在 gif 中有一些帧，我想通过碰撞检测在画布上播放它们。有没有办法用javascript从gif中提取帧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:36:34.367

简短的回答是 JavaScript 没有简单的方法来控制动画 GIF 的当前帧。

长的答案是，有一些方法可以用 JS 做你想做的事，但它们是非常复杂的 hack。

hackish 方式的示例：创建一个画布并且不将其添加到 DOM（因此任何人都不会看到）。在快速循环 (setTimeout) 中，不断绘制到此画布并收集快照。比较画布 ImageData 以查看帧是否已更改。

# c++ - 在 VC++ 2008 项目中使用 VC++ 2010 运行时库

> ID：12143158
> 
> 赞同：9
> 
> 时间：2012-08-27T13:39:59.243
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, stl

我研究优化算法，所以性能真的很重要。与 VS 2008 相比，在 VS 2010 中编译时，该算法大约快 8 倍。谷歌搜索表明这不是我的错（参见例如[https://stackoverflow.com/a/5560184/890355](https://stackoverflow.com/a/5560184/890355)）。问题是最终项目必须在VS 2008下构建。

我倾向于的解决方案是在 VS 2010 中将我的算法构建为 DLL，然后将其链接到主项目。是否可以在 VS 2008 下将 VC++ 2010 运行时库与我的 DLL 一起使用？如果是这样，最不痛苦的方法是什么？还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:09:03.880

运行时不是问题。没有什么能阻止您将 DLL 与 VC2010 运行时链接，然后在其他项目中使用该 DLL。这些项目是使用 Visual C++ 2008 还是任何其他语言构建的都没有关系。

棘手的部分是设计 DLL 接口。简单地导出一些 C++ 类是有风险的，因为它会使您暴露于不同编译器之间的不兼容性。我认为您最好的选择是公开 C 风格的界面或使用 COM。我认为 COM 是最好的方法，但如果您不熟悉该技术，那么 C 风格的界面就可以正常工作。（如果界面很简单，COM 也可能会过度杀伤。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:39:34.670

如果您要求以任何其他方式将 2008 和 2010 库组合到一个可执行文件中，而不是将 2010 部分移到 DLL 中，那么答案可能是“没有其他简单的方法可以实现这一目标”。

但是，如果您不想“VC++ 2010 运行时库...在 VS 2008 下”（即在旧 2008 IDE 中针对 2010 库构建），而是“在 2008 年编译的程序中使用 2010 年编译的 DLL” ，这是完全可能的。

正如我们在项目中所做的那样，最简单的方法是针对静态链接的标准库（MFC，如果您使用它）构建（.exe 和 DLL），然后`LoadLibrary`在您的 .exe 中使用以加载 DLL。在 DLL 中，您可以导出 ( `_declspec (dllexport)`) 一个函数（最好在`extern "C" {}`守卫内部）并在 .exe 中使用它`GetProcAddress`。

静态链接和显式加载使您免于因不同运行时导致的许多不一致错误。

如果您担心 DLL 加载和函数调用成本，您可以尝试使这些调用尽可能少（可能不仅将算法，而且将一些更高级的逻辑移动到 DLL 中）。也看到[这个 issie](https://stackoverflow.com/questions/4030043/overhead-of-dll)。

[您可以使用本机多目标](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)在一个 IDE (2010) 中构建所有代码（但是您仍然需要分别针对 v9 和 v10 库分别构建主应用程序和 DLL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T15:19:37.460

如果你小心的话，你可以，MS 文档提供了一些提示。我之前在这里回答过这个问题：

[想知道低版本的visual studio是否可以使用使用高版本visual studio构建的dll？](https://stackoverflow.com/questions/6046610/wondering-if-the-lower-version-of-visual-studio-can-use-the-dll-built-using-high/6047160#6047160)

# php - 检查 PHP 以查看是否完整接收 XML

> ID：12143159
> 
> 赞同：0
> 
> 时间：2012-08-27T13:39:59.313
> 
> 标签：php, xml

使用 FTP 定期向我发送一个 XML 文件。现在，在处理它之前，我想检查我是否收到了整个文件。因此，为此，我想检查结束标记是否在文件中。有没有办法使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:44:03.597

如果您使用 XML 解析器处理它，它应该告诉您 XML 是否无效（例如，如果整个文件不存在）。

您还可以使用 XSD 模式来验证 XML 的格式。

# php - 在 php 循环中使用 sql 函数 min()

> ID：12143162
> 
> 赞同：2
> 
> 时间：2012-08-27T13:40:16.030
> 
> 标签：php, sql, min, minimum

我必须从表“products”中输出一些产品，以及表“product_licenses”中的最低价格，这是我在此查询中需要从该表中获取的唯一列。

但是，当我尝试使用 sql 函数 MIN() 时，我的循环只运行一次代码并获得第一个结果然后停止，所以我在这里有点迷失。

这是使用 min() 的查询：

```
$mysql->query("
    SELECT pd.*, min(lc.price) AS price
    FROM `products` AS pd, product_licenses AS lc
    WHERE pd.`status` = '1' AND lc.product_id = pd.id
    ORDER BY pd.`id` ASC
    $limitQuery
"); 
```

我正在使用此功能来获取产品，但不幸的是，这获取了最高价格：

```
public function getAllProducts($start = 0, $limit = 0, $order = '`datetime` ASC') {
    global $mysql;

    $limitQuery = '';
    if ($limit != 0) {
        $limitQuery = " LIMIT $start,$limit ";
    }
    **// Not working if I use min() on lc.price**
    $mysql->query("
        SELECT pd.*, lc.price
        FROM `products` AS pd, product_licenses AS lc
        WHERE pd.`status` = '1' AND lc.product_id = pd.id
        ORDER BY pd.`id` ASC
        $limitQuery
    ");

    if ($mysql->num_rows() == 0) {
        return false;
    }

    $this->usersWhere = '';
    $return = array();
    while ($d = $mysql->fetch_array()) {
        $categories = explode(',', $d['category_id']);
        unset($d['category_id']);
        foreach ($categories as $c) {
            $c = trim($c);
            if ($c != '') {
                $d['category_id'][$c] = $c;
            }
        }

        $return[$d['id']] = $d;
    }

    $this->foundRows = $mysql->getFoundRows();

return $return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:43:22.283

您的查询中没有`group by`子句，因此查询仅返回第一行。

```
SELECT pd.col1, pd.col2, pd.col3,  min(lc.price) AS price
FROM `products` AS pd, product_licenses AS lc
WHERE pd.`status` = '1' AND lc.product_id = pd.id
group by pd.col1, pd.col2, pd.col3
ORDER BY pd.`id` ASC
$limitQuery 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:43:27.653

你需要一个`GROUP BY`在那里，像这样：

```
SELECT pd.*, min(lc.price) AS price
FROM `products` AS pd, product_licenses AS lc
WHERE pd.`status` = '1' AND lc.product_id = pd.id
GROUP BY pd.`id`
ORDER BY pd.`id` ASC
$limitQuery 
```

请注意，使用 MySQL，即使您从 products 表中选择其他列，您也只需要按 id 列进行分组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T13:44:03.427

添加`GROUP BY`您的查询。您当前的查询仅返回一个结果，因为您使用的是聚合函数（**MIN**）但没有对其进行分组。

```
SELECT  pd.col1, 
        pd.col2, min(lc.price) AS PRICE
FROM   `products` AS pd
             INNER JOIN product_licenses AS lc
                  ON lc.product_id = pd.id
WHERE    pd.`status` = '1' 
GROUP BY pd.col1, pd.col2, pd.col3
ORDER BY pd.`id` ASC
$limitQuery 
```

***PS：用记录发布数据库的结构。它会让社区清楚地理解你的问题:)***

# tsql - 如何从员工表中提取“名字、姓氏和出生日期”相同的员工

> ID：12143166
> 
> 赞同：0
> 
> 时间：2012-08-27T13:40:26.173
> 
> 标签：tsql

我需要提取名字、姓氏和出生日期相同的记录。请找到以下示例。

```
Employeeid   firstname lastname DOB
00010         ravi      sagi     22/01/1990
00035         ravi      sagi     22/01/1990
00060         vasanth   guptha   20/01/1987
00115         vasanth   guptha   20/01/1987 
```

你能帮忙写查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:44:53.503

尝试这个：

```
select *
from
  (
    select *,
           count(*) over(partition by firstname, lastname, DOB) as CC
    from YourTable
  ) as T
where T.CC > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:47:33.933

您可以`JOIN`将表与自身进行比较`firstname`，`lastname`并`DOB`确保它们是相同的值，然后`employeeid`是不一样的：

```
select * 
from yourtable t1
inner join yourtable t2
  on t1.firstname = t2.firstname
  and t1.lastname = t2.lastname
  and t1.dob = t2.dob
  and t1.empid != t2.empid 
```

上面的查询可能会显示重复的记录，因此您可以使用以下内容（请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/c3c5e/4)）：

```
select DISTINCT t1.empid,
  t1.firstname,
  t1.lastname,
  t1.DOB
from yourtable t1
inner join yourtable t2
  on t1.firstname = t2.firstname
  and t1.lastname = t2.lastname
  and t1.dob = t2.dob
  and t1.empid != t2.empid 
```

或者您可以使用`EXISTS`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/c3c5e/5)）：

```
select t1.empid,
  t1.firstname,
  t1.lastname,
  t1.DOB
from yourtable t1
where exists (SELECT *
              FROM yourtable t2
              WHERE t1.firstname = t2.firstname
                and t1.lastname = t2.lastname
                and t1.dob = t2.dob
                and t1.empid != t2.empid) 
```

# excel - 如何将带有日期的行移动到另一个工作表？

> ID：12143169
> 
> 赞同：0
> 
> 时间：2012-08-27T13:40:35.813
> 
> 标签：excel, vba

我有这个公式来搜索名称并将该行移动到另一张表：

```
With Intersect(Sheet.UsedRange, Sheet.Columns("D"))
    .AutoFilter 1, "=Name"
    With Intersect(.Offset(2).EntireRow, .Parent.Range("A:G"))
        .Copy Sheet.Cells(Rows.Count, "A").End(xlUp).Offset(1)
        .EntireRow.Delete
    End With
    .AutoFilter
End With 
```

有没有办法使用相同的公式仅将行从一张纸转移到另一张纸上，日期在所述单元格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:49:00.780

我们需要查看您的整个代码才能确定回答这个问题 - 以及您的电子表格的屏幕截图。我建议发布它。

与此同时，我可以对你现在在这里的情况做出合理的猜测。

您需要将自动过滤器的范围调整为包含您的日期的列。现在它正在检查 D 列的“=Name”标准。您可能还必须调整您的标准。到 "=Date" --- "date" 是字符串/文本格式的日期。由于 excel 中的日期通常实际上是数字，因此您可能必须使用实际数字，除非您将日期列转换为字符串/文本 - 我可能会推荐。.offset(2) 看起来很奇怪，你可能也需要调整它。我会假设“A：G”是包含整个表格的范围。

[http://www.ozgrid.com/VBA/autofilter-vba-criteria.htm](http://www.ozgrid.com/VBA/autofilter-vba-criteria.htm)

尝试这个：

```
With Intersect(Sheet.UsedRange, Sheet.Columns("G")) ' assuming column G contains your dates.    
.AutoFilter Field:=1, "=Date" ' put your date in number or text format here as the criteria 
```

祝你好运。

编辑：试试这个：

```
.AutoFilter Field:=1, Criteria1:="*/*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:21:41.313

在表格旁边的列中使用公式，如`=ISTEXT(D2)` 使用新列根据它是 True 还是 False 进行过滤。这假定列 D 中*只有*名称或日期，即如果有一个整数，那么这种方法将不起作用。

**编辑**

您可以使用`worksheetfunction`. 尝试以下...

```
Sub test()

With Excel.Application.ActiveWorkbook.Sheets("Sheet1")
            MsgBox (Excel.Application.WorksheetFunction.IsText(.Range("D2")))
End With

End Sub 
```

# actionscript-3 - as3 用 LineStyle 画线，然后用透明（不可见）像素进行编辑

> ID：12143171
> 
> 赞同：0
> 
> 时间：2012-08-27T13:40:40.337
> 
> 标签：actionscript-3

我有带有外部加载图像（jpg）的 MC。

下一层是蒙面的 Sprite，我在其中使用 graphics.lineStyle 绘制不同颜色、不透明度等的线条。一切正常，所以我可以看到图像和图纸。现在我想要制作橡皮擦，并尝试制作某种（透明）线来“擦除”现有线。

例如，如果我（用鼠标）绘制红线，然后将颜色切换为黄色并与前一条线相交，没关系，我看到黄色。现在我不知道如何制作“透明”颜色？因此，当鼠标移到现有绘图上时，只需再次查看背景图像的一部分。如果我设置一种颜色背景，一切都可以，但我有图像，末端橡皮擦会留下一些颜色，我需要透明。尝试了混合模式，缓存为 bmp，我找到了所有东西，但仍然没有解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:00:42.720

似乎您使用了覆盖图像的 Graphics 对象。为了擦除某些东西，你应该给你的精灵一个最上面的形状，它将 BlendMode.ERASE 作为混合模式，并在其上绘制颜色的 alpha 分量为 0xFF。精灵的 blendMode 应该是 BlendMode.LAYER。这是一个可以玩的测试：

```
public class TestErase extends Sprite 
{
    public function TestErase() {
        var b:Sprite = new Sprite();
        var c:Shape = new Shape();
        b.blendMode = BlendMode.LAYER;
        c.blendMode = flash.display.BlendMode.ERASE;
        c.graphics.beginFill(0, 1);
        c.graphics.drawRect(50, 50, 50, 50);
        c.graphics.endFill();
        b.graphics.beginFill(0xff0000, 1);
        b.graphics.drawRect(0, 0, 150, 150);
        b.graphics.endFill();
        b.addChild(c);
        addChild(b);
        this.graphics.beginFill(0x00c000, 1);
        graphics.drawRect(75, 75, 100, 100);
        graphics.endFill();

    }
} 
```

这会产生一个 50x50 的孔，由“b”精灵中的“c”精灵定义，它不会影响“this”精灵。

好吧，你问了一个例子。这里。

```
public class Main extends Sprite 
{
    public var sh:Shape;
    public var drawing:Boolean;
    public var sp:Sprite;
    public var bd:BitmapData;
    public var erasing:Boolean;
    [Embed(source = '../lib/093.jpg')]
    public static const Background:Class;

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // entry point
        var ba:Bitmap = new Background();
        ba.scaleX = 0.5;
        ba.scaleY = 0.5;
        addChild(ba);
        bd = new BitmapData(640, 400, true, 0);
        var bm:Bitmap = new Bitmap(bd);
        sp = new Sprite();
        sp.addChild(bm);
        sp.blendMode = BlendMode.LAYER;
        var tf:TextField = new TextField();
        tf.y = 401;
        tf.background = true;
        tf.backgroundColor = 0x0;
        tf.defaultTextFormat = new TextFormat('Arial', 12, 0xe00000, true, false, false);
        tf.selectable = false;
        tf.text = 'Erase';
        addChild(tf);
        addChild(sp);
        tf.addEventListener(MouseEvent.CLICK, toggleErasing);
        sp.addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
        sp.addEventListener(MouseEvent.ROLL_OUT, endDrawing);
        sp.addEventListener(MouseEvent.MOUSE_UP, endDrawing);
    }

    private function toggleErasing(e:MouseEvent):void {
        erasing = !erasing;
        if (erasing) (e.currentTarget as TextField).text = 'Erasing...'; else (e.currentTarget as TextField).text = 'Erase';
        e.stopPropagation();
    }
    private function startDrawing(e:MouseEvent):void {
        if (drawing) return;
        sh = new Shape();
        sh.graphics.lineStyle(3, Math.floor(Math.random() * 0x100000), 1,true);
        if (erasing) sh.blendMode = BlendMode.ERASE;
        sh.graphics.moveTo(e.localX, e.localY);
        addEventListener(MouseEvent.MOUSE_MOVE, trackMouse);
        sp.addChild(sh);
        drawing = true;
    }
    private function endDrawing(e:MouseEvent):void {
        if (!drawing) return;
        removeEventListener(MouseEvent.MOUSE_MOVE, trackMouse);
        if (erasing) bd.draw(sh, null, null, BlendMode.ERASE); 
        else  bd.draw(sh);
        sp.removeChild(sh);
        sh = null;
        drawing = false;
    }
    private function trackMouse(e:MouseEvent):void {
        sh.graphics.lineTo(e.localX, e.localY);
    }

} 
```

经我测试，应该按原样工作，只需更改背景 :)

# sql - oracle表中的重复总数

> ID：12143176
> 
> 赞同：4
> 
> 时间：2012-08-27T13:41:12.057
> 
> 标签：sql, oracle, count, duplicates

我有一张如下表

```
SUBJECT Years MARKS
AB      1       20
AB      1       25
AC      1       20
AC      1       30
AC      1       40
AD      1       20 
```

我只需要重复计数（主题||年份），预期答案是 2 而不是

```
AB1 -- 2
AC1 -- 3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:00:36.207

那将是重复查询之上的另一个查询...

```
select subject, year, count(*)
  from table1
  group by subject, year
  having count(*) > 1 
```

会给你所有的计数结果。另一个计数这个..

```
select count(*)
  from (
select subject, year, count(*)
  from table1
  group by subject, year
  having count(*) > 1
) 
```

应该给你有一个或多个重复的记录数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:47:36.067

```
select subject,years, count(*)
from table
group by subject,years
having count (*) > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:03:45.647

只需对用于获取示例（AB1，AC1）的查询使用内联视图，如下所示：

```
select count (*) from (select subject, years from t group by subject, years having count (*) > 1) 
```

# python - 列表转换

> ID：12143178
> 
> 赞同：4
> 
> 时间：2012-08-27T13:41:18.167
> 
> 标签：python, list

我正在寻找一种方法来转换这样的列表

```
[[1.1, 1.2, 1.3, 1.4, 1.5],
 [2.1, 2.2, 2.3, 2.4, 2.5],
 [3.1, 3.2, 3.3, 3.4, 3.5],
 [4.1, 4.2, 4.3, 4.4, 4.5],
 [5.1, 5.2, 5.3, 5.4, 5.5]] 
```

像这样

```
[[(1.1,1.2),(1.2,1.3),(1.3,1.4),(1.4,1.5)],
 [(2.1,2.2),(2.2,2.3),(2.3,2.4),(2.4,2.5)]
 ......................................... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T13:49:29.537

以下行应该这样做：

```
[list(zip(row, row[1:])) for row in m] 
```

`m`你的初始二维列表在哪里

**更新评论中的第二个问题**

您必须[转置](http://en.wikipedia.org/wiki/Transpose)（= 用行交换列）您的二维列表。实现转置的python方法`m`是`zip(*m)`：

```
[list(zip(column, column[1:])) for column in zip(*m)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T13:45:21.750

针对提问者的进一步评论，有两个答案：

```
# Original grid
grid = [[1.1, 1.2, 1.3, 1.4, 1.5],
 [2.1, 2.2, 2.3, 2.4, 2.5],
 [3.1, 3.2, 3.3, 3.4, 3.5],
 [4.1, 4.2, 4.3, 4.4, 4.5],
 [5.1, 5.2, 5.3, 5.4, 5.5]]

# Window function to return sequence of pairs.
def window(row):
    return [(row[i], row[i + 1]) for i in range(len(row) - 1)] 
```

### 原始问题：

```
# Print sequences of pairs for grid
print [window(y) for y in grid] 
```

### 更新的问题：

```
# Take the nth item from every row to get that column.
def column(grid, columnNumber):
    return [row[columnNumber] for row in grid]

# Transpose grid to turn it into columns.
def transpose(grid):
    # Assume all rows are the same length.
    numColumns = len(grid[0])
    return [column(grid, columnI) for columnI in range(numColumns)]

# Return windowed pairs for transposed matrix.
print [window(y) for y in transpose(grid)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:31:54.830

另一个版本是使用`lambda`和`map`

```
map(lambda x: zip(x,x[1:]),m) 
```

`m`您选择的矩阵在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:52:58.540

列表推导提供了一种创建列表的简洁方法：http: [//docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

```
[[(a[i],a[i+1]) for i in xrange(len(a)-1)] for a in A] 
```

# objective-c - NSString 替换正则表达式

> ID：12143182
> 
> 赞同：3
> 
> 时间：2012-08-27T13:41:35.297
> 
> 标签：objective-c, regex

我有一个这样的字符串：

```
NSString* msg = @"Hello this is a new message to @[123:Dr Zoidberg] and his nippers"; 
```

我想用来`-stringByReplacingMatchesInString:options:range:withTemplate:`将此模式转换为：

```
NSString* msg = @"Hello this is a new message to Dr Zoidberg and his nippers"; 
```

这是我到目前为止所拥有的：

```
NSString* msg = @"Hello this is a new message to @[123:Dr Zoidberg] and his nippers";
NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern: @"????"
                                                                       options: NSRegularExpressionCaseInsensitive
                                                                         error: nil];

NSString* plainText = [regex stringByReplacingMatchesInString: msg
                                                      options: 0
                                                        range: NSMakeRange(0, [msg length])
                                                 withTemplate: @"$2"]; 
```

任何人都可以帮助我@“？？？？？？” 图案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:49:39.360

这是我所追求的模式：`@(.*?):(.*?)]`。谢谢去[这个问题](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:46:44.887

尝试更换

```
@\[\d+:(.+?)\] 
```

与`\1`小组

解释：

匹配`@`后跟`[`，然后是任意数量的数字，后跟逗号。从这一点获取文本，直到找到右方括号。

如果数字之间可以有任何类型的空格，`:`您可以使用这个

```
@\[\d+\t*:(.+?)\] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:48:03.560

搜索`@\[123:(.*?)\]`并替换为`\1`

# objective-c - 将数据从一个类传输到另一个类

> ID：12143185
> 
> 赞同：0
> 
> 时间：2012-08-27T13:41:43.110
> 
> 标签：objective-c, ios

我正在尝试将 Android 应用程序移植到 ios。自从我完成 c/c++ 以来已经有一段时间了，无论如何我对目标 c 完全陌生：我从单个视图“ViewController”开始。我有一个在 ViewController.mm 中创建数据的按钮。为简单起见，可以说它只是一个双倍。

视图控制器.mm：

```
double myDouble = 13; 
```

我有一个按钮，可以像这样启动下一个视图：

```
[[NSBundle mainBundle] loadNibNamed:@"TrimView" owner:self options:nil]; 
[self.view addSubview:TrimView]; 
```

在“TrimView”上，我想以图形方式显示我在 ViewController.mm 中获得的数据，因此是双倍的 myDouble。我按照这个小教程来画线： [http ://www.techotopia.com/index.php/An_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D](http://www.techotopia.com/index.php/An_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)

我使用这段代码来画线：TrimView.mm：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGFloat components[] = {0.0, 0.0, 1.0, 1.0};
    CGColorRef color = CGColorCreate(colorspace, components);
    CGContextSetStrokeColorWithColor(context, color);
    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, 300, 400);
    CGContextStrokePath(context);
    CGColorSpaceRelease(colorspace);
    CGColorRelease(color);

} 
```

我有点卡住了，我现在正在寻找意见，我应该如何继续。为简单起见，假设我只想在位置 myDouble 处开始在 trimView.mm 中绘制的线。我如何将它从 ViewController 转移到 trimView ？

我现在的问题是我没有类似的东西

```
TrimView tf; 
```

在 ViewController.mm 中我可以执行以下操作：

```
TrimView.setMyDouble(myDouble); 
```

我只是（如上所述）：

```
[[NSBundle mainBundle] loadNibNamed:@"TrimView" owner:self options:nil]; 
[self.view addSubview:TrimView]; 
```

阅读答案后，我尝试了这个：

```
TrimView *nextView =  [[TrimView alloc] initWithNib=@"TrimView" bundle=nil]; 
```

但是得到了这个：“'UIView'没有可见的@interface声明选择器'alloc'”

修剪视图.h：

```
#import <UIKit/UIKit.h>

@interface TrimView: UIView

@property(nonatomic) double *myDouble;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:15:13.237

例如，使用 ViewControllerA 和 ViewControllerB。

要将`double`值从 ViewControllerA 传递到 ViewControllerB，我们将执行以下操作：

1) 在 ViewControllerB.h 中为 BOOL 创建一个属性

```
@property(nonatomic) double *myDouble; 
```

2) 在 ViewControllerA 中，包括 ViewControllerB ：

```
#import "ViewControllerB.h" 
```

3）当你想加载视图时，你需要在 ViewControllerB 中设置属性，然后再将其推送到导航堆栈：

```
ViewControllerB *nextView = [[ViewControllerB alloc] initWithNib=@"ViewControllerB" bundle=nil];
nextView.myDouble = myDouble;
[self pushViewController:nextView animated:YES]; 
```

这会将 ViewControllerB 中的 double 设置为您想要的值。

在您的情况下，您可以将最后一行更改为`[self.view addSubview:nextView];`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:49:12.287

您在 TrimView 上创建了一个双重属性 - 阅读属性。TrimView 将被创建，然后通过设置它需要的属性进行配置，当它运行时，它可以轻松获取这些属性。

```
@property (nonatomic, assign) double myDouble; 
```

# javascript - 格式问题：复选框的下拉

> ID：12143186
> 
> 赞同：0
> 
> 时间：2012-08-27T13:41:46.933
> 
> 标签：javascript, html, css

我一直在尝试创建一个包含 4 个元素的表单。一个是复选框的下拉框，另一个是简单的复选框。我试图将它们放在另一个下方。困难在于当单击带有复选框的下拉菜单时，另一个下拉菜单会向下滑动。在使用复选框关闭下拉菜单时，它们会再次向上滑动。我试图将它们放在另一个下方，这样如果单击带有复选框的下拉菜单，另一个就会变得不可见并且不会向下滑动。当复选框的下拉菜单关闭时，剩余的下拉菜单只会显示出来。有人可以帮我解决这个问题。我正在尝试模仿luxuryretreats.com上的过滤器之类的东西

下面是代码。

```
<html>
<head>
<script type="text/javascript">
function ExposeList1() {
    var showstatus = document.getElementById('ScrollCountry').style.visibility;
    if (showstatus == 'hidden') {
        document.getElementById('ScrollCountry').style.visibility = "visible";
        document.getElementById('Scrollguests').style.visibility = "hidden";
        document.getElementById('Scrollminprice').style.visibility = "hidden";
        document.getElementById('Scrollmaxprice').style.visibility = "hidden";
    } else {
        document.getElementById('ScrollCountry').style.visibility = 'hidden';
        document.getElementById('Scrollguests').style.visibility = "visible";
        document.getElementById('Scrollminprice').style.visibility = "visible";
        document.getElementById('Scrollmaxprice').style.visibility = "visible";
    }
}
</script>
</head>
<body>
<form action="trying.php" method="post">
    <img src="original1.png" onmouseover="this.src='onhover1.png'"
        onmouseout="this.src='original1.png'" onclick="ExposeList1()">

        <div id="ScrollCountry"
            style="height: 120; width: 150px; overflow: auto; border: 2px solid orange; visibility:hidden;border-radius:10px;">
            <input type="checkbox" id="scb1" name="c1" value="Mexico">Mexico<br>
            <input type="checkbox" id="scb2" name="c2" value="Belize">Belize<br>
            <input type="checkbox" id="scb3" name="c3" value="Jamaica">Jamaica<br>
            <input type="checkbox" id="scb4" name="c4" value="Thailand">Thailand<br>
            <input type="checkbox" id="scb5" name="c5" value="Turks &amp; Caicos">Turks &amp; Caicos<br>
        </div>

<br />
<div id = "Scrollguests">
<select>
<option id="n1" value="4">2 - 4</option>
<option id="n2"  value="6">4 - 6</option>
<option id="n3" value="8">6 - 8</option>
<option id = "n4" value="10">8 - 10</option>
<option id = "n5" value="30">10+</option>
</select>
</div>

<br />
<div id = "Scrollminprice">
<select>
<option id="mn1" value="200">200</option>
<option id="mn2"  value="300">300</option>
<option id="mn3" value="400">400</option>
<option id = "mn4" value="500">500</option>
<option id = "mn5" value="600">600</option>
</select>   
</div>

<br />      

<div id = "Scrollmaxprice">
<select >
<option id = "mx1" value="600">600</option>
<option id = "mx2" value="700">700</option>
<option id = "mx3" value="800">800</option>
<option id = "mx4" value="900">900</option>
<option id = "mx5" value="1000">1000</option>
</select>
</div>
<input type="submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:37:40.460

您必须通过添加 css 代码将 ScrollCountry-block 元素定位在正常的元素流之外：

```
position: absolute; 
```

给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:03:17.380

我将其更改为使用`display`而不是`visibility`因为它更有意义并且效果更好。由于`#ScrollCountry`now 位于复选框上方，因此无需再隐藏它们。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script type="text/javascript">
        function ExposeList1() {
            var showstatus=document.getElementById('ScrollCountry').style.display;
            if (showstatus == 'none') {
                document.getElementById('ScrollCountry').style.display="block";
            } else {
                document.getElementById('ScrollCountry').style.display='none';
            }
        }
    </script>
    <style>
        fieldset{ border: 0; padding: 0; position: relative }
        #ScrollCountry{ 
            height: 120px; 
            width: 150px; 
            overflow: auto; 
            border: 2px solid orange;
            display:none;
            border-radius:10px;
            position: absolute;
            background: #fff;
        }
    </style>
</head>
<body>

    <form action="trying.php" method="post">
        <fieldset>
            <img src="original1.png" onmouseover="this.src='onhover1.png'" onmouseout="this.src='original1.png'" onclick="ExposeList1();return false;">

            <div id="ScrollCountry">
                <input type="checkbox" id="scb1" name="c1" value="Mexico"><label for="scb1">Mexico</label><br>
                <input type="checkbox" id="scb2" name="c2" value="Belize"><label for="scb2">Belize</label><br>
                <input type="checkbox" id="scb3" name="c3" value="Jamaica"><label for="scb3">Jamaica</label><br>
                <input type="checkbox" id="scb4" name="c4" value="Thailand"><label for="scb4">Thailand</label><br>
                <input type="checkbox" id="scb5" name="c5" value="Turks &amp; Caicos"><label for="scb5">Turks &amp; Caicos</label><br>
            </div>

            <div id="Scrollguests">
                <select>
                    <option id="n1" value="4">2 - 4</option>
                    <option id="n2"  value="6">4 - 6</option>
                    <option id="n3" value="8">6 - 8</option>
                    <option id="n4" value="10">8 - 10</option>
                    <option id="n5" value="30">10+</option>
                </select>
            </div>

            <div id="Scrollminprice">
                <select>
                    <option id="mn1" value="200">200</option>
                    <option id="mn2"  value="300">300</option>
                    <option id="mn3" value="400">400</option>
                    <option id="mn4" value="500">500</option>
                    <option id="mn5" value="600">600</option>
                </select>
            </div>

            <div id="Scrollmaxprice">
                <select >
                    <option id="mx1" value="600">600</option>
                    <option id="mx2" value="700">700</option>
                    <option id="mx3" value="800">800</option>
                    <option id="mx4" value="900">900</option>
                    <option id="mx5" value="1000">1000</option>
                </select>
            </div>
            <input type="submit">
        </fieldset>
    </form>

</body>
</html> 
```

# jquery - 用 getJSON 调用替换内联 JSON

> ID：12143192
> 
> 赞同：1
> 
> 时间：2012-08-27T13:42:03.413
> 
> 标签：jquery, getjson

我是新手`jQuery`，`javascript`这可能是初学者的问题。

我正在使用 javascript 测验库[SlickQuiz](https://github.com/QuickenLoans/SlickQuiz)进行测验。测验使用以下回调来填充页面

```
$(function () {
    $('#slickQuiz').slickQuiz({json: {YOUR_JSON_HERE}});
}); 
```

我想将测验 json 放在一个单独的文件中并`$.getJSON`用来传递它。我尝试了以下方法，但没有奏效。

```
$(function(){
  $.getJSON('path/to/json', function(quizJSON){
     $('#slickQuiz').slickQuiz()
  });
}); 
```

我已将其作为问题发布在 上`github`，但认为这可能是一个微不足道的`jQuery`新手问题，因此将其发布在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:44:21.660

将 JSON 作为参数传递给测验函数：

```
$(function(){
  $.getJSON('path/to/json', function(quizJSON){
     $('#slickQuiz').slickQuiz({
         json: quizJSON // <--
     });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:44:38.427

```
$(function(){
  $.getJSON('path/to/json', function(quizJSON){
     // you need to pass the json to your quiz function
     $('#slickQuiz').slickQuiz({json: quizJSON});
  });
}); 
```

# sql-server - 使用 Lucene 作为 Dbms

> ID：12143193
> 
> 赞同：1
> 
> 时间：2012-08-27T13:42:07.760
> 
> 标签：sql-server, lucene, database

在我们的项目中，我们的数据容量很高（100Gb 的数据），我们使用 sql 作为 dbms 。不幸的是，sql server 中的全文搜索相当令人失望，所以我们使用 lucene 来搜索我们的数据。但问题是 lucene 需要索引数据，因此同时保存 lucene 索引和我们的数据库的容量会占用太多磁盘空间。所以我想知道我们可以把 sql server 放在一边，只使用 lucene 吗？它是否足够稳定以容纳数百万条数据记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:19:06.663

如果你想要全文搜索，你需要有全文索引，无论它位于何处。

但是，由于您有空间问题，我假设您在架构字段中使用了 stored="true" 。
将其存储在 db 中（最好是 MSSQL 以外的其他东西）并在 Solr/Lucene 中对其进行索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T22:20:07.213

您可能想看看[RavenDB](http://ravendb.net/)。它速度极快，基于 Lucene，可以作为独立数据库运行。更不用说制造商喜欢把它置于各种压力之下。

只有“缺点”：它是商业的，所以它会花费你 :)

# java - 两个日期之间的差异，仅包括工作日（即不包括周末和节假日）

> ID：12143194
> 
> 赞同：6
> 
> 时间：2012-08-27T13:42:10.827
> 
> 标签：java, date, datediff

如何获得两个之间的工作日数`java.util.Date`，即不包括周末和节假日？我所说的假期是指[法律认可的假期](http://feiertagskalender.ch/index.php?geo=3537&hl=en)。它必须取决于国家，因为不同国家的假期不同。

例如，`2012-08-27 - 2012-08-24`应该返回`1`而不是`3`，因为中间是周末。

我已经看过[Jollyday](http://jollyday.sourceforge.net/)和[ObjectLab-Kit](http://objectlabkit.sourceforge.net/)了，但我无法让它们满足我的需要。我的意思是，他们俩都有很多有趣的方法，但找不到类似`getBusinessDaysCount(Date d1, Date d2)`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:08:14.977

这里终于有了一个基于`Calendar`API的解决方案：

```
/**
 * Handles holidays by country.
 */
public enum Holidays {

  /**
   * See <a href="http://www.wikiwand.com/en/Public_holidays_in_France">http://www.wikiwand.com/en/Public_holidays_in_France</a>.
   */
  FRANCE {

    @Override
    protected void addFixedHolidays(Set<Holiday> holidays) {
      holidays.add(new Holiday(Calendar.JANUARY, 1));
      holidays.add(new Holiday(Calendar.MAY, 1));
      holidays.add(new Holiday(Calendar.MAY, 8));
      holidays.add(new Holiday(Calendar.JULY, 14));
      holidays.add(new Holiday(Calendar.AUGUST, 15));
      holidays.add(new Holiday(Calendar.NOVEMBER, 1));
      holidays.add(new Holiday(Calendar.NOVEMBER, 11));
      holidays.add(new Holiday(Calendar.DECEMBER, 25));
    }

    @Override
    protected void addVariableHolidays(int year, Set<Holiday> holidays) {
      Date easterSunday = getEasterSunday(year);
      holidays.add(new Holiday(getEasterMonday(easterSunday)));
      holidays.add(new Holiday(getAscensionThursday(easterSunday)));
      holidays.add(new Holiday(getPentecostMonday(easterSunday)));
    }

  },

  /**
   * See <a href="http://www.wikiwand.com/en/Public_holidays_in_the_United_Kingdom">http://www.wikiwand.com/en/Public_holidays_in_the_United_Kingdom</a>.
   */
  ENGLAND {

    @Override
    protected void addFixedHolidays(Set<Holiday> holidays) {
      holidays.add(new Holiday(Calendar.JANUARY, 1));
      holidays.add(new Holiday(Calendar.DECEMBER, 25));
      holidays.add(new Holiday(Calendar.DECEMBER, 26));
    }

    @Override
    protected void addVariableHolidays(int year, Set<Holiday> holidays) {
      Date easterSunday = getEasterSunday(year);
      holidays.add(new Holiday(getGoodFriday(easterSunday)));
      holidays.add(new Holiday(getEasterMonday(easterSunday)));
      holidays.add(new Holiday(get(WeekdayIndex.FIRST, Calendar.MONDAY, Calendar.MAY, year)));
      holidays.add(new Holiday(get(WeekdayIndex.LAST, Calendar.MONDAY, Calendar.MAY, year)));
      holidays.add(new Holiday(get(WeekdayIndex.LAST, Calendar.MONDAY, Calendar.AUGUST, year)));
      Holiday christmasDay = new Holiday(Calendar.DECEMBER, 25);
      if (christmasDay.isWeekend(year)) {
        holidays.add(new Holiday(Calendar.DECEMBER, 27));
      }
      Holiday boxingDay = new Holiday(Calendar.DECEMBER, 26);
      if (boxingDay.isWeekend(year)) {
        holidays.add(new Holiday(Calendar.DECEMBER, 28));
      }
    }

  };

  public class HolidayException extends Exception {

    private static final long serialVersionUID = 1L;

    private HolidayException(String message) {
      super(message);
    }

  }

  /**
   * A holiday is defined by a {@link Calendar#MONTH} and a {@link Calendar#DAY_OF_MONTH}.
   */
  private class Holiday {

    private final int day;
    private final int month;

    public Holiday(Date date) {
      Calendar calendar = Calendar.getInstance();
      calendar.setTime(date);
      month = calendar.get(Calendar.MONTH);
      day = calendar.get(Calendar.DAY_OF_MONTH);
    }

    public Holiday(int month, int day) {
      this.month = month;
      this.day = day;
    }

    public Date toDate(int year) {
      Calendar calendar = Calendar.getInstance();
      calendar.set(year, month, day);
      return calendar.getTime();
    }

    public boolean isWeekend(int year) {
      Calendar calendar = Calendar.getInstance();
      calendar.setTime(toDate(year));
      int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
      return dayOfWeek == Calendar.SATURDAY || dayOfWeek == Calendar.SUNDAY;
    }

    @Override
    public boolean equals(Object obj) {
      if (this == obj) {
        return true;
      } else if (!(obj instanceof Holiday)) {
        return false;
      } else {
        Holiday holiday = (Holiday) obj;
        return holiday.month == month && holiday.day == day;
      }
    }

    @Override
    public int hashCode() {
      return Arrays.hashCode(new int[] { month, day });
    }

  }

  /**
   * Use with {@link Holidays#get(WeekdayIndex, int, int, int)}.<br />
   * <br />
   * Example: <code>Holidays.get(WeekdayIndex.FIRST, Calendar.MONDAY, Calendar.MAY, 2000)</code>.
   */
  public enum WeekdayIndex {

    FIRST(1), SECOND(2), THIRD(3), FOURTH(4), LAST(null);

    private final Integer index;

    private WeekdayIndex(Integer index) {
      this.index = index;
    }

    private boolean is(int count) {
      return index != null && index == count;
    }

  }

  private final Set<Holiday> fixedHolidays = new HashSet<Holiday>();

  private final Map<Integer, Set<Holiday>> variableHolidays = new HashMap<Integer, Set<Holiday>>();

  private Holidays() {
    addFixedHolidays(fixedHolidays);
  }

  protected abstract void addFixedHolidays(Set<Holiday> holidays);

  protected abstract void addVariableHolidays(int year, Set<Holiday> holidays);

  /**
   * Returns the number of business days between two dates.
   * 
   * @param d1
   *          The first date.
   * @param d2
   *          The second date.
   * @return The number of business days between the two provided dates.
   * @throws HolidayException
   *           If <code>d1</code> or <code>d2</code> is not a business day.
   */
  public int getBusinessDayCount(Date d1, Date d2) throws HolidayException {
    Calendar calendar = Calendar.getInstance();
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    try {
      d1 = formatter.parse(formatter.format(d1));
      d2 = formatter.parse(formatter.format(d2));
    } catch (ParseException ignore) {
      // cannot happen
    }
    if (!isBusinessDay(d1) || !isBusinessDay(d2)) {
      throw new HolidayException("Input dates must be business days");
    }
    int businessDayCount = 0;
    Date min = d1.before(d2) ? d1 : d2;
    Date max = min.equals(d2) ? d1 : d2;
    calendar.setTime(min);
    while (calendar.getTime().before(max)) {
      calendar.add(Calendar.DAY_OF_MONTH, 1);
      if (isBusinessDay(calendar.getTime())) {
        businessDayCount++;
      }
    }
    return businessDayCount;
  }

  /**
   * Returns whether a date is a business day.
   * 
   * @param date
   *          The date.
   * @return <code>true</code> if the <code>date</code> is a business day, <code>false</code> otherwise.
   */
  public boolean isBusinessDay(Date date) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
    if (dayOfWeek == Calendar.SATURDAY || dayOfWeek == Calendar.SUNDAY) {
      return false;
    } else if (isFixedHoliday(date)) {
      return false;
    } else if (isVariableHoliday(date)) {
      return false;
    }
    return true;
  }

  private boolean isFixedHoliday(Date date) {
    return fixedHolidays.contains(new Holiday(date));
  }

  private boolean isVariableHoliday(Date date) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    int year = calendar.get(Calendar.YEAR);
    Set<Holiday> yearHolidays;
    if (!variableHolidays.containsKey(year)) {
      // variable holidays have not been calculated for this year yet
      yearHolidays = new HashSet<Holiday>();
      addVariableHolidays(year, yearHolidays);
      variableHolidays.put(year, yearHolidays);
    } else {
      yearHolidays = variableHolidays.get(year);
    }
    return yearHolidays.contains(new Holiday(date));
  }

  public static Date getEasterSunday(int year) {
    // credits: https://www.wikiwand.com/en/Computus#/Anonymous_Gregorian_algorithm
    Calendar calendar = Calendar.getInstance();
    int initialYear = year;
    if (year < 1900) {
      year += 1900;
    }
    int a = year % 19;
    int b = year / 100;
    int c = year % 100;
    int d = b / 4;
    int e = b % 4;
    int f = (b + 8) / 25;
    int g = (b - f + 1) / 3;
    int h = (19 * a + b - d - g + 15) % 30;
    int i = c / 4;
    int j = c % 4;
    int k = (32 + 2 * e + 2 * i - h - j) % 7;
    int l = (a + 11 * h + 22 * k) / 451;
    int m = (h + k - 7 * l + 114) % 31;
    int month = (h + k - 7 * l + 114) / 31 - 1;
    int day = m + 1;
    calendar.set(initialYear, month, day);
    return calendar.getTime();
  }

  public static Date getGoodFriday(Date easterSunday) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(easterSunday);
    calendar.add(Calendar.DAY_OF_MONTH, -2);
    return calendar.getTime();
  }

  public static Date getEasterMonday(Date easterSunday) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(easterSunday);
    calendar.add(Calendar.DAY_OF_MONTH, 1);
    return calendar.getTime();
  }

  public static Date getAscensionThursday(Date easterSunday) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(easterSunday);
    calendar.add(Calendar.DAY_OF_MONTH, 39);
    return calendar.getTime();
  }

  public static Date getPentecostMonday(Date easterSunday) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(easterSunday);
    calendar.add(Calendar.DAY_OF_MONTH, 50);
    return calendar.getTime();
  }

  public static Date get(WeekdayIndex weekdayIndex, int dayOfWeek, int month, int year) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(year, month, 1);
    int count = 0;
    Date last = null;
    do {
      if (calendar.get(Calendar.DAY_OF_WEEK) == dayOfWeek) {
        count++;
        last = calendar.getTime();
        if (weekdayIndex.is(count)) {
          return last;
        }
      }
      calendar.add(Calendar.DAY_OF_MONTH, 1);
    } while (calendar.get(Calendar.MONTH) == month);
    if (weekdayIndex.equals(WeekdayIndex.LAST)) {
      return last;
    }
    return null;
  }

} 
```

调用：

```
Holidays.FRANCE.getBusinessDayCount(d1, d2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:10:25.237

这似乎是日期计算的常见问题。我经常对建议使用 不寒而栗`JodaTime`，但它似乎是 Java 的事实上的 Date API。如果您想冒险，那么实现一个具有基于年份的日期的类是微不足道的。所以我们知道在美国小镇`4th of July`遵守这些[规则](http://www.opm.gov/Operating_Status_Schedules/fedhol/2012.asp)

“联邦法律 (5 USC 6103) 为联邦雇员规定了以下公共假期。请注意，大多数联邦雇员的工作时间为周一至周五。对于这些员工，当假期落在非工作日 - 周六或周日 -假期通常在周一（如果假期在周日）或周五（如果假期在周六）举行。”

因此，有了这些知识，您就可以计算出假期会在一周中的哪一天发生，然后从两个范围之间的天数中减去该值。

# wcf - autofac wcf注册错误

> ID：12143199
> 
> 赞同：10
> 
> 时间：2012-08-27T13:42:29.397
> 
> 标签：wcf, autofac

我正在尝试在 Wcf 上尝试使用 Autofac 的结构。

```
 namespace WcfService1.Model
    {
        [DataContract(IsReference = true)]
        public partial class Account
        {
            [DataMember]
            public int Id { get; set; }
            [DataMember]
            public string Name { get; set; }
            [DataMember]
            public string Surname { get; set; }
            [DataMember]
            public string Email { get; set; }
            [DataMember]
            public Nullable<System.DateTime> CreateDate { get; set; }
        }    
    } 
```

模型>IAccounRepository.cs

1.

```
namespace WcfService1.Model
{
  public interface IAccountRepository
    {
        IEnumerable<Account> GetAllRows();
        bool AddAccount(Account item);
    }
} 
```

模型>AccounRepository.cs

2.

```
namespace WcfService1.Model
{
    public class AccountRepository:IAccountRepository
    {
        private Database1Entities _context;
        public AccountRepository()
        {
            if(_context == null)
                _context =new Database1Entities();
        }

        public IEnumerable<Account> GetAllRows()
        {
            if (_context == null)
                _context = new Database1Entities();
            return _context.Account.AsEnumerable();
        }        

        public bool AddAccount(Account item)
        {
            try
            {
                if (_context == null)
                    _context = new Database1Entities();
                _context.Entry(item).State = EntityState.Added;
                _context.Account.Add(item);
                _context.SaveChanges();
                return true;
            }
            catch (Exception ex)
            {
                var str = ex.Message;
                return false;
            }
        }
    }
} 
```

1.  DbConnection > EntityFramework + DbContext

2.  IService1.cs

代码：

```
namespace WcfService1
{
    [ServiceContract(SessionMode = SessionMode.Allowed)]
    public interface IService1
    {
        [OperationContract]
        IList<Account> GetAccounts();

        [OperationContract]
        bool AddAccount(Account item);
    }
} 
```

1.  服务1.cs

代码：

```
namespace WcfService1
{
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1:IService1
    {
        private readonly IAccountRepository _repository;
        public Service1(IAccountRepository repository)
        {
            _repository = repository;
        }    
        public IList<Account> GetAccounts()
        {   
            var items = _repository.GetAllRows().ToList();
            return items;
        }
        public bool AddAccount(Account item)
        {
            item.CreateDate = DateTime.Now;    
            return _repository.AddAccount(item);
        }
    }
} 
```

1.  服务1.svc

代码：

```
<%@ ServiceHost Language="C#"
                Debug="true"
                Service="WcfService1.Service1, WcfService1"
                Factory="Autofac.Integration.Wcf.AutofacWebServiceHostFactory, Autofac.Integration.Wcf" %> 
```

1.  全球.asax.cs

代码：

```
protected void Application_Start(object sender, EventArgs e)
        {
            var builder = new ContainerBuilder();
            builder.RegisterType< AccountRepository>().As< IAccountRepository>();
            builder.RegisterType< Service1 >().As< IService1>();

            AutofacHostFactory.Container = builder.Build();
        } 
```

我收到以下错误，找不到解决方案。我怎么了。

错误信息 ：

## “/”应用程序中的服务器错误。

为 WCF 配置的服务“WcfService1.Service1，WcfService1”未向 Autofac 容器注册。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：为 WCF 配置的服务“WcfService1.Service1，WcfService1”未向 Autofac 容器注册。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[InvalidOperationException: The service 'WcfService1.Service1, WcfService1' configured for WCF is not registered with the Autofac container.]
   Autofac.Integration.Wcf.AutofacHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +667
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +2943
   System.ServiceModel.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity) +88
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +1239

[ServiceActivationException: The service '/Service1.svc' cannot be activated due to an exception during compilation.  The exception message is: The service 'WcfService1.Service1, WcfService1' configured for WCF is not registered with the Autofac container..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +454
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +413
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, String routeServiceVirtualPath, Boolean flowContext, Boolean ensureWFService) +327
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, Boolean flowContext, Boolean ensureWFService) +46
   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +384
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +238
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +114 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-31T00:40:23.260

除了其他答案之外，您还应确保在 .svc 文件的 ServiceHost 元素的 Service 属性中使用完全限定的服务名称。

例如，而不是：

```
<%@ ServiceHost Language="C#" Debug="true" Service="MoviesService.MoviesService" CodeBehind="MoviesService.svc.cs" %> 
```

利用：

```
<%@ ServiceHost Language="C#" Debug="true" Service="MoviesService.MoviesService, MoviesService" CodeBehind="MoviesService.svc.cs" %> 
```

* * *

资料来源：http: [//jmonkee.net/wordpress/2011/09/05/autofac-wcfintegration-service-not-registered-with-the-autofac-container/](http://jmonkee.net/wordpress/2011/09/05/autofac-wcfintegration-service-not-registered-with-the-autofac-container/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T07:05:48.160

您应该将服务注册为自己，而不是接口。

```
builder.RegisterType< Service1 >().AsSelf(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T17:44:16.560

只需注册`Service1`喜欢`builder.RegisterType<Service1>();`这个`builder.RegisterType<Service1>().As<IService1>();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:24:38.650

试试这个：

```
var builder = new ContainerBuilder();

builder.Register(c => new AccountRepository()).As<IAccountRepository>();
builder.Register(c => new Service1(c.Resolve<IAccountRepository>())).AsSelf();

AutofacHostFactory.Container = builder.Build(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T19:55:06.560

你不应该使用。`builder.RegisterType< Service1 >().As' 但使用无扩展方法的 RegisterType 'builder.RegisterType();'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-20T19:20:30.760

对我来说，我使用的是一个名为“WCF 服务”的项目

默认情况下，这给了我一个名为 WCF_Service 的名称空间，以及一个名为“WCF Service”的程序集名称

在删除该空间之前，没有任何修复工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-30T16:55:44.973

您应该写入 .svc 文件（Namespace1）：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Namespace1.Service1, Namespace1"
   Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf" CodeBehind="Service1.svc.cs" %> 
```

# android-linearlayout - LinearLayout 安卓方向

> ID：12143206
> 
> 赞同：0
> 
> 时间：2012-08-27T13:42:52.597
> 
> 标签：android-linearlayout

## 标题##我有一个简单的问题。

我正在为应用程序做 UI。我正在使用linearLayout，并为我的内容应用填充，我在第一个o内使用第二个LinearLayout

所以我找到了一个 xml 示例，但我不明白为什么它在 Linearlayout 中使用两个不同的方向？所以在主要的Linearlayout方向设置为水平，但在第二个linearLayout（在第一个内部）方向设置为垂直。对我来说，如果所有内容（按钮和文本视图）都应该只垂直显示，为什么你应该在主线性布局中使用水平方向，这是无稽之谈。

谢谢！

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@color/background"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="30dip"
android:orientation="horizontal" >
<LinearLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center">

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/main_title" 
android:layout_gravity="center"
android:layout_marginBottom="25dip"
android:textSize="24.5sp"/>
<Button 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T17:54:03.400

也许在 中`linearLayout`，程序员希望在同一行`TextView`中`Button`彼此并排。

# javascript - 打开绝对定位下拉菜单时页面滚动到顶部

> ID：12143207
> 
> 赞同：2
> 
> 时间：2012-08-27T13:43:01.457
> 
> 标签：javascript, html, css

我有通知下拉，就像 facebook 一样。单击链接时，将显示此下拉列表，该下拉列表定位为绝对。问题是，当打开下拉菜单时，页面会滚动到顶部。不幸的是，我无法粘贴代码，因为它很大。你能猜出可能是什么问题吗？

好的，这就是我所拥有的。[http://jsfiddle.net/testtracker/uuQf3/1/](http://jsfiddle.net/testtracker/uuQf3/1/)
首先向下滚动然后单击黑色链接，然后看到，它首先向上滚动然后显示通知下拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:07:36.047

这里的问题是您的链接试图找到一个名为 # 的锚标记。这不存在，所以它滚动到页面顶部。您需要告诉事件处理程序不要执行加载 href="#" 的默认操作。

解决方案是添加`e.preventDefault()`到您的事件处理程序。

在此处查看演示：http: [//jsfiddle.net/ksokhan/uuQf3/2/](http://jsfiddle.net/ksokhan/uuQf3/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:06:08.657

如上所述，带有#href 属性的锚标记会将您带到页面顶部，解决方法是

捕获 onclick 事件并执行此操作

```
$('a').click(function(e){
  e.preventDefault();
   //OR
  return false;

}); 
```

这将限制其默认行为。

或者您可以像这样直接将其写在您的锚元素中

```
<a href="#" onclick="return false;">link</a> 
```

# java - 是否可以使用 vaadin 插件 InvientCharts 动态更改 x 轴和 y 轴标题

> ID：12143210
> 
> 赞同：1
> 
> 时间：2012-08-27T13:43:19.540
> 
> 标签：java, visualization, vaadin, add-on, scatter-plot

我正在使用 vaadin，对于一些可视化数据分析，我为 vaadin 添加了插件 InvientCharts (https://vaadin.com/directory#addon/invient-charts)。

**是否可以动态更改散点图的 x 轴和 y 轴标题（因此在创建图表之后）？**

我目前有一个散点图和一个按钮。单击按钮时，所有现有点（系列）将被删除，x 轴和 y 轴标题应更改，新点应添加到图表上。

这是我目前正在尝试的代码片段：

```
public void changePoints(String xAxisTitle, String yAxisTitle, List<List<double[]>> xAndYCoordinates) {
        // remove all points from the scatterchart - THIS IS WORKING
        Object[] allSeries = chart.getAllSeries().toArray();
        for(int j = 0; j < allSeries.length; j++){
            Series serie = (Series) allSeries[j];
            chart.removeSeries(serie);
        }

        // update the x- and y-axis - THIS IS NOT WORKING AND WHAT I'M TALKING ABOUT
        chartConfig.getXAxes().clear();
        chartConfig.getYAxes().clear();
        NumberXAxis xAxis = new NumberXAxis();
        xAxis.setTitle(new AxisTitle(xAxisTitle));
        xAxis.setStartOnTick(true);
        xAxis.setEndOnTick(true);
        xAxis.setShowLastLabel(true);
        LinkedHashSet<XAxis> xAxesSet = new LinkedHashSet<InvientChartsConfig.XAxis>();
        xAxesSet.add(xAxis);
        chartConfig.setXAxes(xAxesSet);
        NumberYAxis yAxis = new NumberYAxis();
        yAxis.setTitle(new AxisTitle(yAxisTitle));
        LinkedHashSet<YAxis> yAxesSet = new LinkedHashSet<InvientChartsConfig.YAxis>();
        yAxesSet.add(yAxis);
        chartConfig.setYAxes(yAxesSet);

        // add the new points - THIS IS WORKING AGAIN
        for (int i = 0; i < versionDates.size(); i++) {
            String versionDate = versionDates.get(i);
            List<double[]> versionValues = xAndYCoordinates.get(i);

            ScatterConfig versionScatterConfig = new ScatterConfig();
            XYSeries series = new XYSeries("Version " + (i + 1) + " - "
                    + versionDate, versionScatterConfig);
            series.setSeriesPoints(getPoints(series, versionValues));
            chart.addSeries(series);
        }
    } 
```

如您所见，点的删除和添加工作得非常好，我认为这是因为我在这里直接处理图表，而当我尝试更改轴标题时，我正在处理 chartConfig。

您能否告诉或告诉我如何更改现有图表中 x 轴和 y 轴的标题（如上所述）？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:44:04.520

经过大量研究后，我得出的结论是，目前似乎没有办法动态地更改 x 轴和 y 轴标题，这是可行的。

我发现如果你刷新页面，例如按 F5，坐标轴标题就会改变。我尝试过实施复习，但不知何故行为仍然没有改变。

所以对我来说它看起来像是一个错误（或软件故障）。

My workaround which is doing the same is just removing the whole chart and then adding a completely new one with the new Axis-caption. This works perfectly fast and fine, but is a dirty solution in my eyes, since you have to add more lines of codes than necessary, as well as the logic is now basically more complicated then it should be.

# c# - 在 MVC3 中添加控制器时出现异常 - 找不到程序集文件

> ID：12143211
> 
> 赞同：1
> 
> 时间：2012-08-27T13:43:19.130
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我遇到了这个让我发疯的奇怪问题。我在 Visual Studio 2010 中有一个 MVC3 项目，它曾经可以正常工作。出于某种奇怪的原因，当我尝试添加控制器时出现异常。（见截图）。当我尝试添加视图时，对话框会在没有通知的情况下关闭。

我已将 Griffin.MvcContrib 添加为 NuGet 包 - 它工作正常。我从未使用异常屏幕中提到的程序集（版本 1.1.2.0） - 但最新版本是 1.1.2.1

我在我的解决方案中执行了全文搜索 - 未找到 1.1.2.0。

我清空了缓存，重新安装了 Visual Studio 项目模板，删除了对 Griffin.MvcContrib 的引用（通过 NuGet 卸载），删除了 Bin 文件夹，重新启动了我的机器，到目前为止没有任何帮助。:(

我的项目文件中的引用：

```
<Reference Include="Griffin.MvcContrib, Version=1.1.2.1, Culture=neutral, processorArchitecture=MSIL">
  <HintPath>..\..\packages\griffin.mvccontrib.1.1.2.1\lib\net40\Griffin.MvcContrib.dll</HintPath>
</Reference>
<Reference Include="Griffin.MvcContrib.Admin, Version=1.0.10.0, Culture=neutral, processorArchitecture=MSIL">
  <HintPath>..\..\packages\Griffin.MvcContrib.Admin.1.0.10\lib\net40\Griffin.MvcContrib.Admin.dll</HintPath>
</Reference>
<Reference Include="Griffin.MvcContrib.SqlServer, Version=1.0.8.0, Culture=neutral, processorArchitecture=MSIL">
  <HintPath>..\..\packages\Griffin.MvcContrib.SqlServer.1.0.8\lib\net40\Griffin.MvcContrib.SqlServer.dll</HintPath>
</Reference> 
```

有人对如何修复我的 IDE/项目有任何线索吗？

更新：重现步骤：

```
Install-Package Griffin.mvccontrib -Version 1.1.2
Install-Package Griffin.MvcContrib.SqlServer 
```

- 一切还好

```
Install-Package Griffin.MvcContrib.Admin 
```

--> 强制将 Griffin.mvccontrib 更新到 1.1.2.1

--> 导致如附件截图所示的异常

不知何故安装管理模块会强制更新 mvccontrib。

![在此处输入图像描述](../Images/903c8bedf4d0cac9efc082db6d5e5f26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T13:57:55.203

问题源于您的参考文献中针对 Griffin.MvcContrib 1.1.2.0 构建的 dll。所以会很难找到。

如果您可以摆脱它，您可以尝试删除对 Griffin.MvcContrib 的引用（如果您不需要它）或更改您的 packages.config 文件以引用 1.1.2.0 版本的 MvcContrib 而不是 1.1.2.1。

然后浏览所有 .csproj 文件并更正对 1.1.2.0 路径而不是 1.1.2.1 路径的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:45:37.947

我知道您已经搜索过，但请再次检查，查看您的包文件和 web.config - 查找对 Griffin.MvcContrib 1.1.2.0 的引用

根据我的经验，程序集无法加载并出现该错误通常意味着版本冲突。

如果失败，您可以尝试在记事本中查看您的项目定义。

另外，请检查您是否安装了冲突的版本。有时您可能在 GAC 中拥有一个版本并引用另一个版本的裸 .dll，这可能会导致冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T16:43:23.197

一个临时的解决方法是关闭解决方案，然后打开您尝试添加控制器的项目。它不能解决冲突的引用问题，但它可以让你继续做任何你想做的事情。

# symfony - Doctrine 实体字段根本无法识别

> ID：12143219
> 
> 赞同：0
> 
> 时间：2012-08-27T13:43:28.147
> 
> 标签：symfony, doctrine-orm, entity, entity-relationship

我正在使用 FOSUserBundle 进行身份验证。身份验证工作，到目前为止一切顺利。我有几个填充得很好的额外字段。

然后我添加了一个角色表（带有相应的实体），其中 id 字段由数据库中的 roleid 字段引用。

**但是，这个领域根本**没有教义承认。甚至

```
 php app/console doctrine:schema:update --dump-sql 
```

不显示！即使我重命名当前表然后尝试生成创建表查询，该字段也不会显示。我也尝试重命名该字段，但没有运气。

我的领域（当然是在课堂上）：

```
/*
 * @var int $roleid
 * 
 * @ManyToOne(targetEntity="Roles")
 * @JoinColumn(name="roleid", referencedColumnName="id")
 */
protected $roleid; 
```

如果有人能指出我正在发生的事情的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:37:33.677

采用

```
/** 
```

代替

```
/* 
```

否则注释将无法识别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:47:15.413

您必须遵循确切的语法

使用`/**`与不使用`/*`

# asp.net - Net tcp Binding Service:The request was aborted: 请求被取消

> ID：12143225
> 
> 赞同：1
> 
> 时间：2012-08-27T13:43:48.960
> 
> 标签：asp.net, asp.net-mvc-3, wcf, wcf-binding, wcf-client

我正在将文件上传到 Amazon S3。

1.上传大文件（最大 50 MB）时出现此错误：

请求被中止：请求被取消。

2.问题是当我不使用net tcp绑定服务，直接从UI上传到业务层，中间没有服务层，我可以毫无例外地上传。

3.这里是异常详情：

> System.Net.WebException：请求被中止：请求被取消。---> System.IO.IOException：在写入所有字节之前无法关闭流。在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting) --- 内部异常堆栈跟踪结束 --- 在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting) 在 System.Net.ConnectStream.System .Net.ICloseEx.CloseEx(CloseExState closeState) at System.Net.ConnectStream.Dispose(Boolean disposing) at System.IO.Stream.Close() at Amazon.S3.AmazonS3Client.getRequestStreamCallback[T](IAsyncResult 结果)

4.在服务的网站上。配置我已经将空闲和接收的超时时间增加到半小时以上。但仍然得到异常。

5.这与net tcp绑定服务的配置设置有关吗？

有什么解决办法吗？

# javascript - 在正文中将“&”替换为 &

> ID：12143233
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:44:07.863
> 
> 标签：javascript, html

第 251 行，第 117 列：字符“&”是分隔符的第一个字符，但作为数据出现。

```
…elf" href="/service/el-amp-sikring/">El & Sikring<!--<span>›&lt;/span>--></a></li> 
```

无论如何我可以替换正文中的所有“&”符号，因为这些是从后端给出的。所以它是放置在html中的&？

*编辑我试图验证我的网页，并且在 javascript、html 等中不断出现关于这个“&”符号的错误和警告，但是我不想在 javascript 中更改我的“&”符号，所以我尝试尝试使用 umbraco v 4.7.1.1 更改前端给出的每个“&”符号

*编辑2

```
<ul id="nav">
<% foreach (var topItem in Content.CurrentLanguage.VisibleChildren) { %>
<% var topMenuItems = NodeLocator.GetNodeOfExactType<TopMenuItems>(topItem.Id); %>
<li class="<%= topMenuItems != null ? "hasDropdown" : "" %><%= NodeController.IsNodeDescendantOfNode(Content.Id, topItem.Id) ? " active" : "" %>">
    <a href="<%= topItem.Url %>"><%= topItem.MenuTitle %></a>
    <%  if (topMenuItems != null) { %>
    <div class="drop">
        <div class="drop-holder">
            <div class="drop-frame">
                <div class="drop-content">
                    <div class="col-a">
                        <%= string.IsNullOrWhiteSpace(topMenuItems.LeftHeading) ? "" : "<strong>{0}</strong>".With(topMenuItems.LeftHeading) %>
                        <div class="holder">
                            <% foreach (var part in topMenuItems.LeftTargets.Split(1)) { %>
                            <ul>
                                <% foreach (var htmlLink in part) { %>
                                    <li style="" class="" ><a target="_self" href="<%= htmlLink.Url %>"><%= htmlLink.Title %><!--<span>›&lt;/span>--></a></li>
                                <% } %>
                                <li style="display:none;"></li>
                            </ul>
                            <% } %>
                        </div>
                    </div>
                    <div class="col-b">
                        <%= string.IsNullOrWhiteSpace(topMenuItems.RightHeading) ? "" : "<strong>{0}</strong>".With(topMenuItems.RightHeading)%>
                        <div class="holder">
                            <% foreach (var part in topMenuItems.RightTargets.Split(2)) { %>
                            <ul>
                                <% foreach (var htmlLink in part) { %>
                                    <li style="" class="" ><a target="_self" href="<%= htmlLink.Url %>"><%= htmlLink.Title %><!--<span>›&lt;/span>--></a></li>
                                <% } %>
                                <li style="display:none;"></li>
                            </ul>
                            <% } %>
                        </div>
                    </div>
                    <% if(topMenuItems.Image != null) { %>
                        <div class="col-c">
                            <div class="holder">
                                <div class="image-holder">
                                    <img src="<%= uComponents.Core.uQuery.GetMedia(topMenuItems.Image.Value).Url() %>" class="superimg" width="214" height="150" alt="superimg" />
                                </div>
                                <a href="<%= topMenuItems.ImageLink.Url %>" class="getoffer"><%= topMenuItems.ImageLink.Title %></a>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    <% } %>
</li>
<% } %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T13:45:44.603

不：JavaScript 运行得太晚了。当 JavaScript 运行时，浏览器已经被迫解析格式错误的 HTML。您需要修复后端。

**更新：**在您的 C#/ASP.NET 代码中，更改：

```
<%= htmlLink.Title %> 
```

对此：

```
<%= Server.HtmlEncode(htmlLink.Title) %> 
```

在这两个地方。

（请参阅[MSDN 上 .NET 框架文档中的“HttpServerUtility.HtmlEncode 方法（字符串）”](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T13:51:56.787

您可以在 IDE、后端代码或 javascript 中使用正则表达式来替换所有“&”后面还没有跟“amp;” 和 ”＆”：

```
str.replace(/&(?!amp;)/g, '&amp;'​) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-27T13:47:38.943

如果你需要做 javascript，这将替换每个 & 后面有一个空格。

```
document.body.innerHTML = document.body.innerHTML.split("& ").join("&amp; "); 
```

# search-engine - Robots.txt 文件的 Disallow 语句中的 * 字符

> ID：12143241
> 
> 赞同：1
> 
> 时间：2012-08-27T13:44:36.683
> 
> 标签：search-engine, web-crawler, robots.txt, search-engine-bots

不同的搜索机器人如何解释 robots.txt 文件的 disallow 语句中的 * 字符？他们都将其视为“无，一个或多个字符”吗？

让我们看下面的例子：

```
User-agent: *           
Disallow: /back-end*/* 
```

上面的代码是什么意思？这是否意味着任何具有“后端”的目录都不会被索引，即使“后端”这个词后面跟着任何字符集？/ 之后的 * 怎么样？写它是一个好的约定吗？

一般来说，我的问题是关于 disallow 语句中 * 的使用以及是否所有搜索引擎爬虫都以相同的方式对待它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:54:50.930

机器人排除标准没有提及 Disallow: 语句中的 * 字符。像 Googlebot 和 Slurp 这样的爬虫可以识别包含 * 的字符串，而 MSNbot 和 Teoma 则以不同的方式解释它。

# powershell - 带有类 rc 文件的 PowerShell 配置

> ID：12143245
> 
> 赞同：14
> 
> 时间：2012-08-27T13:44:40.843
> 
> 标签：powershell, windows-7, scripting

为了定义，我应该写什么脚本和哪里：

1.  `alias for ll="ls -l"`
2.  `alias/function cd = "original cd; ll"`

所以，我的问题是 Windows 7 上 Power Shell 的 rc 文件在哪里以及如何别名`ll`to`ls -l`和`cd`to `cd; ll`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-27T13:55:44.377

在您键入并按 Enter 键时 power shell 指向的位置创建一个文件（`$profile`如果该文件不存在）。（更多信息请看[这里](https://technet.microsoft.com/en-us/library/bb613488(v=vs.85).aspx)。）

此外，我在我的系统旁边找到了很多很好的示例`powershell.exe`，其中有一个示例文件夹，其中有一个`profile.ps1`使用以下代码命名的文件：

```
set-alias cat        get-content
set-alias cd         set-location
set-alias clear      clear-host
set-alias cp         copy-item
set-alias h          get-history
set-alias history    get-history
set-alias kill       stop-process
set-alias lp         out-printer
set-alias ls         get-childitem
set-alias mount      new-mshdrive
set-alias mv         move-item
set-alias popd       pop-location
set-alias ps         get-process
set-alias pushd      push-location
set-alias pwd        get-location
set-alias r          invoke-history
set-alias rm         remove-item
set-alias rmdir      remove-item
set-alias echo       write-output

set-alias cls        clear-host
set-alias chdir      set-location
set-alias copy       copy-item
set-alias del        remove-item
set-alias dir        get-childitem
set-alias erase      remove-item
set-alias move       move-item
set-alias rd         remove-item
set-alias ren        rename-item
set-alias set        set-variable
set-alias type       get-content

function help
{
    get-help $args[0] | out-host -paging
}

function man
{
    get-help $args[0] | out-host -paging
}

function mkdir
{
    new-item -type directory -path $args
}

function md
{
    new-item -type directory -path $args
}

function prompt
{
    "PS " + $(get-location) + "> "
}

& {
    for ($i = 0; $i -lt 26; $i++) 
    { 
        $funcname = ([System.Char]($i+65)) + ':'
        $str = "function global:$funcname { set-location $funcname } " 
        invoke-expression $str 
    }
} 
```

* * *

还要考虑以下问题。执行位于的文件时，您可能会遇到以下错误`$profile`：

> 无法加载“Microsoft.PowerShell_profile.ps”，因为此系统上禁用了脚本的执行。有关更多详细信息，请参阅“get-help about_signing”。

**解决方案：** 检查当前的执行策略

```
PS C:\Windows\System32> Get-ExecutionPolicy
Restricted
PS C:\Windows\System32> 
```

要更改执行策略以允许 PowerShell 从本地文件执行脚本，请运行以下命令：

```
PS C:\Windows\System32> Set-Executionpolicy RemoteSigned -Scope CurrentUser 
```

# php - 将国家名称转换为国家代码缩写 php

> ID：12143252
> 
> 赞同：7
> 
> 时间：2012-08-27T13:45:26.437
> 
> 标签：php, country

有没有办法将国家名称转换为国家代码缩写？还是一些php函数？

这样当它的“澳大利亚”将更改为“澳大利亚”

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T13:50:24.967

PHP 本身不知道这些值。您必须创建自己的代码：

**方法一：**

创建一个数组，如：

```
$COUNTRY = array(
  "Australia" => "AU",
  "Germany" => "GER"
  ...
); 
```

之后，只需使用 pre0stored 值：

```
echo $COUNTRY['Australia']; 
```

**方法2（建议）：**

将值存储到数据库中：

```
+-----------+------+
| Country   | Code |
+-----------+------+
| Australia | AU   |
| Germany   | GER  |
...
+-----------+------+ 
```

并通过简单查询访问：

```
SELECT Code FROM country_db WHERE Country = 'Australia'; 
```

*编辑*

```
CREATE TABLE
    country_code
(
    code,
    country
);

INSERT INTO
    country_code
    ( code, country )
VALUES
    ( 'AF', 'Afghanistan' ),
    ( 'AX', 'Aland Islands' ),
    ( 'AL', 'Albania' ),
    ( 'DZ', 'Algeria' ),
    ( 'AS', 'American Samoa' ),
    ( 'AD', 'Andorra' ),
    ( 'AO', 'Angola' ),
    ( 'AI', 'Anguilla' ),
    ( 'AQ', 'Antarctica' ),
    ( 'AG', 'Antigua and Barbuda' ),
    ( 'AR', 'Argentina' ),
    ( 'AM', 'Armenia' ),
    ( 'AW', 'Aruba' ),
    ( 'AU', 'Australia' ),
    ( 'AT', 'Austria' ),
    ( 'AZ', 'Azerbaijan' ),
    ( 'BS', 'Bahamas the' ),
    ( 'BH', 'Bahrain' ),
    ( 'BD', 'Bangladesh' ),
    ( 'BB', 'Barbados' ),
    ( 'BY', 'Belarus' ),
    ( 'BE', 'Belgium' ),
    ( 'BZ', 'Belize' ),
    ( 'BJ', 'Benin' ),
    ( 'BM', 'Bermuda' ),
    ( 'BT', 'Bhutan' ),
    ( 'BO', 'Bolivia' ),
    ( 'BA', 'Bosnia and Herzegovina' ),
    ( 'BW', 'Botswana' ),
    ( 'BV', 'Bouvet Island (Bouvetoya)' ),
    ( 'BR', 'Brazil' ),
    ( 'IO', 'British Indian Ocean Territory (Chagos Archipelago)' ),
    ( 'VG', 'British Virgin Islands' ),
    ( 'BN', 'Brunei Darussalam' ),
    ( 'BG', 'Bulgaria' ),
    ( 'BF', 'Burkina Faso' ),
    ( 'BI', 'Burundi' ),
    ( 'KH', 'Cambodia' ),
    ( 'CM', 'Cameroon' ),
    ( 'CA', 'Canada' ),
    ( 'CV', 'Cape Verde' ),
    ( 'KY', 'Cayman Islands' ),
    ( 'CF', 'Central African Republic' ),
    ( 'TD', 'Chad' ),
    ( 'CL', 'Chile' ),
    ( 'CN', 'China' ),
    ( 'CX', 'Christmas Island' ),
    ( 'CC', 'Cocos (Keeling) Islands' ),
    ( 'CO', 'Colombia' ),
    ( 'KM', 'Comoros the' ),
    ( 'CD', 'Congo' ),
    ( 'CG', 'Congo the' ),
    ( 'CK', 'Cook Islands' ),
    ( 'CR', 'Costa Rica' ),
    ( 'CI', 'Cote d\'Ivoire' ),
    ( 'HR', 'Croatia' ),
    ( 'CU', 'Cuba' ),
    ( 'CY', 'Cyprus' ),
    ( 'CZ', 'Czech Republic' ),
    ( 'DK', 'Denmark' ),
    ( 'DJ', 'Djibouti' ),
    ( 'DM', 'Dominica' ),
    ( 'DO', 'Dominican Republic' ),
    ( 'EC', 'Ecuador' ),
    ( 'EG', 'Egypt' ),
    ( 'SV', 'El Salvador' ),
    ( 'GQ', 'Equatorial Guinea' ),
    ( 'ER', 'Eritrea' ),
    ( 'EE', 'Estonia' ),
    ( 'ET', 'Ethiopia' ),
    ( 'FO', 'Faroe Islands' ),
    ( 'FK', 'Falkland Islands (Malvinas)' ),
    ( 'FJ', 'Fiji the Fiji Islands' ),
    ( 'FI', 'Finland' ),
    ( 'FR', 'France, French Republic' ),
    ( 'GF', 'French Guiana' ),
    ( 'PF', 'French Polynesia' ),
    ( 'TF', 'French Southern Territories' ),
    ( 'GA', 'Gabon' ),
    ( 'GM', 'Gambia the' ),
    ( 'GE', 'Georgia' ),
    ( 'DE', 'Germany' ),
    ( 'GH', 'Ghana' ),
    ( 'GI', 'Gibraltar' ),
    ( 'GR', 'Greece' ),
    ( 'GL', 'Greenland' ),
    ( 'GD', 'Grenada' ),
    ( 'GP', 'Guadeloupe' ),
    ( 'GU', 'Guam' ),
    ( 'GT', 'Guatemala' ),
    ( 'GG', 'Guernsey' ),
    ( 'GN', 'Guinea' ),
    ( 'GW', 'Guinea-Bissau' ),
    ( 'GY', 'Guyana' ),
    ( 'HT', 'Haiti' ),
    ( 'HM', 'Heard Island and McDonald Islands' ),
    ( 'VA', 'Holy See (Vatican City State)' ),
    ( 'HN', 'Honduras' ),
    ( 'HK', 'Hong Kong' ),
    ( 'HU', 'Hungary' ),
    ( 'IS', 'Iceland' ),
    ( 'IN', 'India' ),
    ( 'ID', 'Indonesia' ),
    ( 'IR', 'Iran' ),
    ( 'IQ', 'Iraq' ),
    ( 'IE', 'Ireland' ),
    ( 'IM', 'Isle of Man' ),
    ( 'IL', 'Israel' ),
    ( 'IT', 'Italy' ),
    ( 'JM', 'Jamaica' ),
    ( 'JP', 'Japan' ),
    ( 'JE', 'Jersey' ),
    ( 'JO', 'Jordan' ),
    ( 'KZ', 'Kazakhstan' ),
    ( 'KE', 'Kenya' ),
    ( 'KI', 'Kiribati' ),
    ( 'KP', 'Korea' ),
    ( 'KR', 'Korea' ),
    ( 'KW', 'Kuwait' ),
    ( 'KG', 'Kyrgyz Republic' ),
    ( 'LA', 'Lao' ),
    ( 'LV', 'Latvia' ),
    ( 'LB', 'Lebanon' ),
    ( 'LS', 'Lesotho' ),
    ( 'LR', 'Liberia' ),
    ( 'LY', 'Libyan Arab Jamahiriya' ),
    ( 'LI', 'Liechtenstein' ),
    ( 'LT', 'Lithuania' ),
    ( 'LU', 'Luxembourg' ),
    ( 'MO', 'Macao' ),
    ( 'MK', 'Macedonia' ),
    ( 'MG', 'Madagascar' ),
    ( 'MW', 'Malawi' ),
    ( 'MY', 'Malaysia' ),
    ( 'MV', 'Maldives' ),
    ( 'ML', 'Mali' ),
    ( 'MT', 'Malta' ),
    ( 'MH', 'Marshall Islands' ),
    ( 'MQ', 'Martinique' ),
    ( 'MR', 'Mauritania' ),
    ( 'MU', 'Mauritius' ),
    ( 'YT', 'Mayotte' ),
    ( 'MX', 'Mexico' ),
    ( 'FM', 'Micronesia' ),
    ( 'MD', 'Moldova' ),
    ( 'MC', 'Monaco' ),
    ( 'MN', 'Mongolia' ),
    ( 'ME', 'Montenegro' ),
    ( 'MS', 'Montserrat' ),
    ( 'MA', 'Morocco' ),
    ( 'MZ', 'Mozambique' ),
    ( 'MM', 'Myanmar' ),
    ( 'NA', 'Namibia' ),
    ( 'NR', 'Nauru' ),
    ( 'NP', 'Nepal' ),
    ( 'AN', 'Netherlands Antilles' ),
    ( 'NL', 'Netherlands the' ),
    ( 'NC', 'New Caledonia' ),
    ( 'NZ', 'New Zealand' ),
    ( 'NI', 'Nicaragua' ),
    ( 'NE', 'Niger' ),
    ( 'NG', 'Nigeria' ),
    ( 'NU', 'Niue' ),
    ( 'NF', 'Norfolk Island' ),
    ( 'MP', 'Northern Mariana Islands' ),
    ( 'NO', 'Norway' ),
    ( 'OM', 'Oman' ),
    ( 'PK', 'Pakistan' ),
    ( 'PW', 'Palau' ),
    ( 'PS', 'Palestinian Territory' ),
    ( 'PA', 'Panama' ),
    ( 'PG', 'Papua New Guinea' ),
    ( 'PY', 'Paraguay' ),
    ( 'PE', 'Peru' ),
    ( 'PH', 'Philippines' ),
    ( 'PN', 'Pitcairn Islands' ),
    ( 'PL', 'Poland' ),
    ( 'PT', 'Portugal, Portuguese Republic' ),
    ( 'PR', 'Puerto Rico' ),
    ( 'QA', 'Qatar' ),
    ( 'RE', 'Reunion' ),
    ( 'RO', 'Romania' ),
    ( 'RU', 'Russian Federation' ),
    ( 'RW', 'Rwanda' ),
    ( 'BL', 'Saint Barthelemy' ),
    ( 'SH', 'Saint Helena' ),
    ( 'KN', 'Saint Kitts and Nevis' ),
    ( 'LC', 'Saint Lucia' ),
    ( 'MF', 'Saint Martin' ),
    ( 'PM', 'Saint Pierre and Miquelon' ),
    ( 'VC', 'Saint Vincent and the Grenadines' ),
    ( 'WS', 'Samoa' ),
    ( 'SM', 'San Marino' ),
    ( 'ST', 'Sao Tome and Principe' ),
    ( 'SA', 'Saudi Arabia' ),
    ( 'SN', 'Senegal' ),
    ( 'RS', 'Serbia' ),
    ( 'SC', 'Seychelles' ),
    ( 'SL', 'Sierra Leone' ),
    ( 'SG', 'Singapore' ),
    ( 'SK', 'Slovakia (Slovak Republic)' ),
    ( 'SI', 'Slovenia' ),
    ( 'SB', 'Solomon Islands' ),
    ( 'SO', 'Somalia, Somali Republic' ),
    ( 'ZA', 'South Africa' ),
    ( 'GS', 'South Georgia and the South Sandwich Islands' ),
    ( 'ES', 'Spain' ),
    ( 'LK', 'Sri Lanka' ),
    ( 'SD', 'Sudan' ),
    ( 'SR', 'Suriname' ),
    ( 'SJ', 'Svalbard & Jan Mayen Islands' ),
    ( 'SZ', 'Swaziland' ),
    ( 'SE', 'Sweden' ),
    ( 'CH', 'Switzerland, Swiss Confederation' ),
    ( 'SY', 'Syrian Arab Republic' ),
    ( 'TW', 'Taiwan' ),
    ( 'TJ', 'Tajikistan' ),
    ( 'TZ', 'Tanzania' ),
    ( 'TH', 'Thailand' ),
    ( 'TL', 'Timor-Leste' ),
    ( 'TG', 'Togo' ),
    ( 'TK', 'Tokelau' ),
    ( 'TO', 'Tonga' ),
    ( 'TT', 'Trinidad and Tobago' ),
    ( 'TN', 'Tunisia' ),
    ( 'TR', 'Turkey' ),
    ( 'TM', 'Turkmenistan' ),
    ( 'TC', 'Turks and Caicos Islands' ),
    ( 'TV', 'Tuvalu' ),
    ( 'UG', 'Uganda' ),
    ( 'UA', 'Ukraine' ),
    ( 'AE', 'United Arab Emirates' ),
    ( 'GB', 'United Kingdom' ),
    ( 'US', 'United States of America' ),
    ( 'UM', 'United States Minor Outlying Islands' ),
    ( 'VI', 'United States Virgin Islands' ),
    ( 'UY', 'Uruguay, Eastern Republic of' ),
    ( 'UZ', 'Uzbekistan' ),
    ( 'VU', 'Vanuatu' ),
    ( 'VE', 'Venezuela' ),
    ( 'VN', 'Vietnam' ),
    ( 'WF', 'Wallis and Futuna' ),
    ( 'EH', 'Western Sahara' ),
    ( 'YE', 'Yemen' ),
    ( 'ZM', 'Zambia' ),
    ( 'ZW', 'Zimbabwe' ); 
```

# matlab - Matlab 部署工具，微软编译器

> ID：12143255
> 
> 赞同：1
> 
> 时间：2012-08-27T13:45:31.953
> 
> 标签：matlab, compiler-construction, mex

我想知道哪个特定文件是我的 Microsoft 编译器。我需要它来编译一些 Matlab 代码。通过运行`mex -setup`mex 能够在以下目录中找到编译器：`d:\Program Files (x86)\Microsoft Visual Studio 10.0`但是，当我在那里浏览时，没有可能是实际编译器的文件。我想构建我的应用程序，但它不起作用，看起来 Matlab 确实找到了编译器，但我得到一个错误（代码 = 53）`An error occurred while shelling out to mbuild` 所以我的猜测是我必须进入部署工具设置和添加一些选项，如编译器目录（即使我已经用 mex 设置了它），但我找不到它，`d:\Program Files (x86)\Microsoft Visual Studio 10.0`我什至不知道编译器的名称是什么。我真的需要这方面的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:03:09.127

为了`mex -setup`正常工作，**您**不需要知道实际编译器的名称。当我运行时，`mex -setup`我得到一个这样的列表：

```
Select a compiler: 
[1] Intel C++ 12.0 (with Microsoft Visual C++ 2010 linker) in C:\Program Files (x86)\Intel\ComposerXE-2011 
[2] Intel Visual Fortran 12.0 (with Microsoft Visual C++ 2010 linker) in C:\Program Files (x86)\Intel\ComposerXE-2011 
[3] Microsoft Visual C++ 2010 in C:\Program Files (x86)\Microsoft Visual Studio 10.0 

[0] None 
```

如果我选择`[3]`信息输出包括行

```
Trying to update options file: D:\Users\my.name\AppData\Roaming\MathWorks\MATLAB\R2012a\mexopts.bat 
From template:              C:\PROGRA~1\MATLAB\R2012a\bin\win64\mexopts\msvc100opts.bat 
```

如果您检查其中任何一个文件，您会发现编译器的名称（它被调用`cl.exe`，并且在 Matlab 建议它正在查找的目录下的目录中有几个不同的版本）分配为名为`COMPILER`. 您还将找到`mex`将代码编译为 mex 文件时使用的所有设置。您或许可以根据这些信息诊断出其余的问题。

如果您无法通过此“帮助”解决您的问题，请对其进行编辑并准确解释错误消息和

# javascript - 我正在尝试使用 jquery 启用下拉菜单

> ID：12143256
> 
> 赞同：0
> 
> 时间：2012-08-27T13:45:32.283
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 启用下拉菜单并单击搜索，然后该类别页面应该打开。但我可以这样做。当我从“SEARCH BY MAKE”下拉菜单中选择任何一个选项时，下一个“SEARCH BY MODEL”下拉菜单应该启用，这与其他下拉菜单相同。意味着下一个下拉菜单依赖于上一个。当我从最后一个下拉菜单中选择选项时，应该显示搜索按钮，当页面加载时我会隐藏它。我在“SEARCH BY MAKE”中有很多类别。我希望在单击搜索按钮后所有页面都应该动态打开。根据这三个下拉列表，应该打开类别或产品页面。请帮帮我。请检查以下代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<title>Untitled Document</title>
</head>

<body>
  <form>
        <select id="Make" name="Make" class="criterion">
        <option value="">SEARCH BY MAKE</option>
        <option value="1">ACURA</option>
        <option value="2">INTEGRA</option>
        <option value="3">MDX</option>
        </select>
  </form><br />
 <form>
        <select id="Model" name="Model" class="criterion">
        <option value="">SEARCH BY MODEL</option>
        <option value="1">XYZ</option>
       </select>
  </form><br />
  <form>
        <select id="Year" name="Year" class="criterion">
        <option value="">SEARCH BY YEAR</option>
        <option value="1">ABC</option>
  </form>
<br />
    <input type="submit" value="Search" class="CatsearchButton" />

<script type="text/javascript">

$(document).ready(function() {
$('.CatsearchButton').hide();

var $selects = $('select.criterion');
$selects.not("#Year").on('change', function() {
    $selects.each(function() {
        var $this = $(this);
        var disable = $this.val() == '';
        $this.closest('form').nextAll().find('select').prop('disabled', disable);
        if (disable) return false;
    })
}).eq(0).trigger('change');
$selects.filter('#Year').change(function() {
    $('.CatsearchButton').show();
});
});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:55:23.627

这是因为值中有空格，所以它不会进入 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:57:58.183

您使用的是 jQuery 1.7.2，因此请使用[.prop()](http://api.jquery.com/prop/)而不是`.attr()`设置 disabled 属性。你也用`.removeAttr('disabled', false);`错了——它应该是`.attr('disabled','false');`或者只是`.removeAttr('disabled')`，但是一旦你切换到它就无关紧要了`.prop()`

```
$('.go').hide();
var jSelect2 = $(".model");
jSelect2.prop('disabled', true); 

var jSelect3 = $(".year");
jSelect3.prop('disabled', true);

$('.make').change(function() {             
        jSelect2.prop('disabled', $(this).val() == ' ');  // disable if val == ' '
        jSelect2.val(' ').change(); // set to default and trigger change   
});
jSelect2.change(function() {      
     jSelect3.prop('disabled', $(this).val() == ' '); // disable if val == ' '
     jSelect3.val(' ').change();  // set to default and trigger change 
 });
jSelect3.change(function() {      
        $('.go').toggle($(this).val() !== ' ');  // show if val !== ' '
}); 
```

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

[http://jsfiddle.net/CE5VN/1/](http://jsfiddle.net/CE5VN/1/)

**编辑：**

由于您使用的是 jQuery，因此只需删除内联代码并将 click 事件绑定到 document.ready 函数中

```
$('.go').click(function(e) {
        e.preventDefault();
        location = 'www.lightsmax.com/category_s/' + myform.make.options[myform.make.selectedIndex].value + '.htm' + myform.model.options[myform.model.selectedIndex].value + '/' + myform.year.options[myform.year.selectedIndex].value;
}); 
```

[http://jsfiddle.net/CE5VN/2/](http://jsfiddle.net/CE5VN/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:23:11.080

```
$(document).ready(function() {
    $("select").each(function(i){
        $(this).addClass("class-" + i);
    });
    $("select").each(function(i){
        $(this)[0].disabled = true;
        $(this).change(function(){
           if($(this).val()!=""){
              $(".class-" + (i + 1))[0].disabled = false;
           }
        });
    });
    $("select:eq(0)")[0].disabled = false;  
}); 
```

[我在这里添加小提琴](http://jsfiddle.net/krishna_aim24/Fznbn/2/)

# ruby-on-rails - Rails 3.2.8 中的 ActionMailer 测试失败

> ID：12143257
> 
> 赞同：4
> 
> 时间：2012-08-27T13:45:33.637
> 
> 标签：ruby-on-rails, testing, actionmailer

我在 notifier_test.rb 中有一个测试，其中 Notifier 是我的邮件程序类

```
mail = Notifier.registered_client(client.firstname, client.emailaddress)

assert_match I18n.t('notifier.registered_client.email_body'), mail.body.encoded, 'Email contents should be correct' 
```

该测试在 Rails 3.2.8 之前通过，但现在测试失败：

```
NotifierTest
      FAIL (0:00:07.963) should create registration email in English
      Email contents should be correct.
      Expected /In\ order\ to\ activate\ your\ company's\ registration\ you\ must\ click\ on\ the\ following\ link:/ 
      to match 
      "\nDear First Name, thanks for registering.\n\nIn order to activate your company\&#x27;s registration you must click on the following link:\n\nhttp://localhost:3000/en/clients/activate?email=english%40email.com&key=7b6e6ed1-ac03-4d95-a0d5-6f2541092dd0\n". 
```

似乎出现了错误，因为我的邮件文本包含一个撇号，`mail.body.encoded`现在`\&#x27;`由于以下补丁而返回：

CVE-2012-3464 在[https://groups.google.com/forum/#!msg/rubyonrails-security/kKGNeMrnmiY/r2yM7xy-G48J中描述的 Ruby on Rails 中的潜在 XSS 漏洞](https://groups.google.com/forum/#!msg/rubyonrails-security/kKGNeMrnmiY/r2yM7xy-G48J)

以相同方式对 I18n.t 返回的字符串进行编码，或者从我的邮件对象中获取没有撇号的文本的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:22:27.317

最后，我通过使用来完成这项工作

CGI.unescapeHTML(mail.body.encoded)

这样线

assert_match I18n.t('notifier.registered_client.email_greeting', name: firstname), CGI.unescapeHTML(mail.body.encoded), '电子邮件问候应该存在'

通过测试

# html - 使用 Divs 作为角的 CSS 圆角

> ID：12143258
> 
> 赞同：0
> 
> 时间：2012-08-27T13:45:35.183
> 
> 标签：html, css, web

我正在考虑只使用 div 创建一个定制的圆角块，我很想知道你们的想法，如果这是一个足够好的方法，或者是否有更简单的方法来获得跨浏览器支持（同时也支持较旧的浏览器，例如 IE6)

我会写一个简单的解释代码让大家容易理解：

```
<div class="Block" style="position:relative">
    <div>
    Content will go here or something
    </div>
    <div name="TopLeft" style="position:absolute;top:0;left:0;"></div>
    <div name="TopRight" style="position:absolute;top:0;right:0;"></div>
    <div name="BottomLeft" style="position:absolute;bottom:0;left:0;"></div>
    <div name="BottomRight" style="position:absolute;bottom:0;right:0;"></div>
</div> 
```

在真正的代码中，我会给他们每个人一个背景，当然把它放在一个css文件中，而不是像这样内联写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:50:14.660

使用[CSS3Pie](http://css3pie.com/)。

这是 IE 的 Javascript hack，它`border-radius`在旧版本的 IE 中实现 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:49:26.487

如果你需要在 IE6-9 浏览器中使用圆角，你只需要使用 CSS3`border-radius`和一个`PIE.htc`文件

[**渐进式 Internet Explorer**](http://css3pie.com/)

```
div{ border-radius: 6px; -moz-border-radius: 6px; behavior: url(PIE.htc); } 
```

这在所有 IE 浏览器中效果最好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:52:39.167

是的，这会很好。

您还可以使用脚本添加元素，这将使标记更清晰。我在这里使用这种方法：[bytbil.com](http://www.bytbil.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:48:29.253

怀疑它会在 IE6 中工作，但您可以使用以下内容：

```
-moz-border-radius: 15px;
border-radius: 15px; 
```

把它放在你的 DIV 的 CSS 中，它将支持大多数浏览器，但同样，不确定 IE6...它确实适用于 IE9、Safari (5+)、FireFox(1.0+)、Chrome(5+) 和歌剧（10.5+）...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T13:55:19.207

我想这会行得通，它和支持 IE6 一样好。

任何涵盖 IE6 的解决方案都注定是一个可怕的 hack。我认为怀疑你是否真的需要它真的很值得。我宁愿只使用 css 圆角，让芯片落在可能的地方。

# bash - OpenStreetMap Bash / CGI 脚本

> ID：12143261
> 
> 赞同：0
> 
> 时间：2012-08-27T13:45:41.457
> 
> 标签：bash, cgi, openstreetmap

我正在尝试构建一个 Bash CGI 脚本，该脚本将坐标作为来自 url 的参数，并使用 osmosis 来提取地图，并使用拆分器和 mkgmap 来制作地图，以便可以使用 Qlandkarte 打开它。我的问题是，当我输入 wget localhost/cgi-bin/script.pl?top=42&left=10&bottom=39&right=9&file=map.osm 时，linux终端会读取带有坐标的文件。我怎样才能让 wget 只激活脚本，以便它获取坐标并执行命令。而且当最后创建地图时，如何返回由脚本创建的文件。谢谢

```
#!/bin/bash

TOP=`echo "$QUERY_STRING" | grep -oE "(^|[?&])top=[0.0-9.0]+" | cut -f 2 -d "=" | head -n1`
LEFT=`echo "$QUERY_STRING" | grep -oE "(^|[?&])left=[0.0-9.0]+" | cut -f 2 -d "=" | head -n1`
BOTTOM=`echo "$QUERY_STRING" | grep -oE "(^|[?&])bottom=[0.0-9.0]+" | cut -f 2 -d "=" | head -n1`
RIGHT=`echo "$QUERY_STRING" | grep -oE "(^|[?&])right=[0.0-9.0]+" | cut -f 2 -d "=" | head -n1`
FILE=`echo "$QUERY_STRING" | grep -oE "(^|[?&])file=[^&]+" | sed "s/%20/ /g" | cut -f 2 -d "="`

$(sudo osmosis --read-xml file=bulgaria.osm --bounding-box top=$TOP left=$LEFT bottom=$BOTTOM right=$RIGHT --write-xml file=$FILE)
$(sudo java -Xmx900m -jar splitter.jar --max-nodes=110000 $FILE)
$(sudo java -ea -Xmx900m -jar mkgmap.jar --tdbfile --route -c template.args)

echo "Content-type: text/html"
echo "" 
```

# eclipse - Pydev：在命令行上运行 Eclipse/Aptana 调试服务器

> ID：12143266
> 
> 赞同：1
> 
> 时间：2012-08-27T13:45:51.957
> 
> 标签：eclipse, command-line, pydev, remote-debugging, aptana3

我找到了很多关于如何使用 GUI 设置 Eclipse/Aptana 远程调试服务器的信息。有没有办法从命令行启动它？

整个过程一定不需要图形用户界面。我的目标是在只能通过命令行访问的服务器机器上设置远程调试服务器。

谢谢。

# bluetooth-lowenergy - Android 中的原生 BLE API

> ID：12143268
> 
> 赞同：2
> 
> 时间：2012-08-27T13:46:00.167
> 
> 标签：bluetooth-lowenergy

几个月前，stackoverflow 用户 Wilhelmsen 表示“有传言称谷歌将在 2012 年 8 月左右发布官方 API”。所以现在是八月底，我想知道是否有人对 Android 手机的原生 BLE API 的状态有任何更新——不幸的是，它不在 Jellybeans 上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T04:47:51.183

用于 BLE 开发的 Android API 现在可通过最新更新 [API 18] 获得。

检查链接[http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

# c - 在 C 中读取字符

> ID：12143272
> 
> 赞同：1
> 
> 时间：2012-08-27T13:46:15.603
> 
> 标签：c

我编写了以下程序来了解 EOF 的行为：

```
#include<stdio.h>

int main ()

    char c = 0;

    printf("Enter some chars, EOF stops printing:");

    while ((c == getc(stdin)) != EOF) 
        printf("c = %c, (int) c = %d\n", c, (int) c);

    return 0;
} 
```

但是，如果我输入一些东西，例如`abcd`我得到这个输出：

```
c = a, (int) c = 97
c = a, (int) c = 97
c = a, (int) c = 97 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:48:44.303

你有 a`==`而不是 a`=`所以你永远不会存储任何`getc`返回：

```
while ((c == getc(stdin)) != EOF) {
          ^^ 
```

And of course `c` should be `int`, not `char`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:47:59.910

您必须更好地阅读文档；`getc()`返回`int`，因为`EOF`不适合 a `char`。

此外，您同时使用`scanf()`and `getc()`，由于输入流缓冲，这会使事情变得混乱。

尝试这样的事情：

```
#include <stdio.h>

int main()

    int c = 0;

    printf("Enter some chars, EOF stops printing:");
    while ((c = getc(stdin)) != EOF) {
        printf("c = %c, (int) c = %d\n", c, c);
    }
    return 0;
} 
```

我还在您的代码中添加了缺少`}`的内容，并删除了对`c`的调用中的演员表，现在`printf()`不需要了。顺便说一下，这也是格式说明符的正确类型。`c``int``%c`

# php - 在 JavaScript 中运行 php

> ID：12143276
> 
> 赞同：0
> 
> 时间：2012-08-27T13:46:40.737
> 
> 标签：php, javascript

我正在我的服务器上制作一个应用程序，用户通过一些结合 javascript 的 HTML 上传图像。

用户通过

```
<form action="uploadimage.php" method="post"
enctype="multipart/form-data">
<label for="file">Filnavn:</label>
<input type="file" name="file" id="file" value="100000" /> 
```

然后javascript背后的重点是验证用户图像

```
if(picture_headline.value == "" || picture_uploaded.value == "" || !ischecked)
{
   // Don't execute, stay on same site
}
else
{
   // execute php and upload image
} 
```

php是上传图片的php脚本

```
<?php 
// The file is being uploaded into the folder "upload"
$target = "/navnesutten.eu/facebook/uploads/"; 
// add the original filename of our target path
$target = $target . basename( $_FILES['uploaded']['name']) ; 
$ok=1; 
// Moves the uploaded file into correct folder
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
{
echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
} 
else {
echo "Sorry, there was a problem uploading your file.";
}
?> 
```

我必须说我在这里有点困惑，因为我现在只使用 html、php 和 javascript 几天。

我是完全关闭还是什么？

我在网上找到了一些“简单”的例子，我通过cuteFTP放在我的服务器上，但每次我按下上传，网站只是把我送到.php文件并说该网站不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:02:09.613

就像 Boann 指出的那样，您正在尝试访问 PHP 代码中不存在的文件（“uploaded”和“uploadedfile”而不是“file”（这是您在 HTML 表单中命名该字段的名称））。

但是关于“从 JavaScript 运行 PHP”：你不必这样做。如果表单无效，JavaScript 应该*只返回 false。*如果它是有效的，你不需要做任何事情并且表单会提交，然后运行你的 PHP 脚本：

```
form.onsubmit = function () {
    if (!formIsValid()) {
        return false;
    }
}; 
```

如果表单无效，它将不会提交（该`return false`位（您可以使用`event.preventDefault()`）），如果它*是*有效的，则不会发生任何事情并且表单将执行它所做的（即提交数据到服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:53:40.880

每个数组键`$_FILES`对应`name`于表单中文件字段的属性，因此要匹配您的表单，它应该是`'file'`而不是`'uploaded'`or `'uploadedfile'`：

```
<?php 
// The file is being uploaded into the folder "upload"
$target = "/navnesutten.eu/facebook/uploads/"; 
// add the original filename of our target path
$target = $target . basename( $_FILES['file']['name'] ) ; 
$ok=1; 
// Moves the uploaded file into correct folder
if(move_uploaded_file($_FILES['file']['tmp_name'], $target)) 
{
echo "The file ". basename( $_FILES['file']['name']). " has been uploaded";
} 
else {
echo "Sorry, there was a problem uploading your file.";
} 
```

# javascript - 不理解 $(window).width() 的结果

> ID：12143277
> 
> 赞同：3
> 
> 时间：2012-08-27T13:46:42.987
> 
> 标签：javascript, jquery, window, width

我有几页，我注意到一个奇怪的时刻，这段代码：

```
var w = $(window).width();
alert(w); 
```

*   有时返回结果：1440，（这是真的，我的屏幕分辨率是 1440 x 900）
*   有时（在不同的页面中）返回：1423。

这个结果从何而来，我不明白。

`$(window).width()`必须总是（从所有页面）返回相同的结果，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:49:10.497

不包括滚动条。从您的结果来看`1440 - 1423 = 17px`，它与我的滚动条的宽度相同（例如，在 Stack Overflow 上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:49:34.653

当滚动条可见时，它返回 1423。

滚动条可见时返回的宽度可能会在不同的浏览器和操作系统上发生变化。

# ios - 项目 ...xcodeproj 无法打开，因为它缺少其 project.pbxproj 文件

> ID：12143281
> 
> 赞同：19
> 
> 时间：2012-08-27T13:46:57.283
> 
> 标签：ios, xcode, version-control, project

我试图合并分支并导致错误“**无法打开项目...无法打开，因为无法解析项目文件**”。然后我尝试接受其他 stackoverflow 响应的建议（即编辑文件以删除损坏），但无法编辑文件。看起来这实际上是一个目录，所以可能它的结构随着 xcode 的 4.4 版本而改变，并且由于写入了对[Unable to open project... 的响应无法打开，因为无法解析项目文件](https://stackoverflow.com/questions/361799/xcode-unable-to-open-project-cannot-be-opened-because-the-project-file-canno)。

然后我尝试从我的时间机器备份中恢复 myProject.xcodeproj。这不起作用，因为它说我无权访问 myProject.xcodeproj。我试图更改该目录的权限，但这没有帮助。

我关闭并重新打开了xcode。现在错误是：

**项目 ...xcodeproj 无法打开，因为它缺少其 project.pbxproj 文件**。

如何在 xcode 4.4 版中解决此问题？是否可以从 xcode 中的先前快照或存档或版本中恢复？能不能用时光机恢复。我想避免重建整个项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:56:33.387

最简单的事情可能是

1.  从源代码管理中签出 myProject.xcodeproj。这将包含上次导致您发生冲突的更改。
2.  重做自上次提交源代码控制以来所做的项目更改
3.  提交/推送到源代码控制。

将来，当您在项目文件中遇到冲突时，请查看 myProject.xcodeproj/project.pbxproj。通常只是项目中的新文件被添加到同一个地方。在这种情况下，您只需要删除冲突元数据并解决冲突状态。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T16:02:34.917

最后，我必须做的是

```
'cp -R ...TimeMachineBackup/myProject.xcodeproj ...myProjectArea/myProject.xcodeproj' 
```

然后我必须在 myProjectArea 中执行以下操作：

```
git reset --merge 
```

这允许我打开项目并将分支切换回我的主分支。

不是一次愉快的经历

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-07T12:59:27.323

另一种可能发生的情况是，如果您出于某种原因在 pod 或编辑器中使用 sudo - 如果文件存在于 yourApp.xcodeprojectroj 目录下但 xcode 抱怨找不到它 - 转到您的项目根目录并执行以下操作：

```
sudo chown -R yourusername:staff ./* 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-03T14:45:07.017

我能够在没有这样的命令行内容的情况下完成这项工作：

1.  转到 Finder 中的 Time Machine 驱动器。
2.  导航到所需的备份。
3.  将它拖到我想要的位置。这将抱怨没有访问 .pbxproj 的权限
4.  右击刚刚拖出来的xcodeproj，选择“Show Contents”。
5.  右键单击 Time Machine 备份文件夹中的 xcodeproj，选择“显示内容”。
6.  将您在内部看到的 .pbxproj 拖动到您刚刚使用 #3 中的拖动创建的目标。

现在它应该可以工作了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-08T20:43:06.103

对于其他关注这个问题的人来说，我的原因是，来自 git merge 的“冲突文本”已经潜入实际文件：

```
<<<<<<< HEAD
                F0FDA2D61B99EB80007DB99D /* Aptron-mCollegix.xcassets */,
=======
                F08CFAAA1BC1E9EE00A5B6F5 /* Aptron-mCollegix.xcassets */,
>>>>>>> hotfix/Column_Text_Cut-off 
```

在文本编辑器中打开 project.pbxproj 使修复变得容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-20T08:28:02.983

如果有人想找到丢失的 project.pbxproj 文件，请尝试使用一些代码编辑器打开 .xcodeproj，您会在那里找到该文件。请注意，我在我的另一台电脑上备份了我的应用程序，所以我在那里找到了那个文件，所以你可能会在某处备份你的项目以使其正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-30T00:50:11.127

我找到了自己的解决方案来解决这个问题。

该错误的原因是 .xcodeproj 文件缺少其包含的 pbxproj 文件，对吗？这通常在您右键单击 .xcodeproj 文件并单击“显示包内容”时出现。但是，在您自己的情况下，由于 git 版本控制的某些错误或其他原因，它已被删除。

由于您无法真正生成 .pbxproj 文件，因此我找到的解决方案是转到我用来创建存储库的原始项目文件夹位置。老实说，您也可以简单地创建一个新项目，只要它具有相同的包标识符等！由于此项目的 xcodeproj 文件将正确包含 .pbxproj 文件，因此将 XCode 环境中的文件替换为您自己的项目文件将允许 .pbxproj 文件根据这些文件进行更新。

因此，在打开这个原始项目文件夹（/new project folder）后，在XCode环境中，我将项目中的所有文件都删除了，并将它们替换为我项目中无法打开xcodeproj文件的相应文件. 鉴于您刚刚复制了一堆新文件，我不得不在这里和那里修复一些由此产生的错误，涉及构建阶段的东西等等。但是在修复了一些小错误之后，这个新位置的同一个项目最终能够运行没有问题！

最后，我拿了这个成功运行的项目版本，并将所有文件，.xcodeproj 文件，项目文件夹，测试文件和所有文件复制到原始存储库位置，事先从存储库中删除文件以避免混淆覆盖文件（如果您想安全，可以将旧的存储库文件剪切并粘贴到新位置，不要想删除它们！）。然后从存储库位置在 XCode 中打开项目，在您的模拟器/设备上构建并运行它，以确保一切正常（并修复您可能需要的任何小错误），瞧！您的项目现在可以提交、推送和运行！

这不是最干净的解决方案，如果各个分支都已损坏，您可能必须在各个分支上执行类似的操作。但是，如果您无法访问 Mac 时间机器，并且其他解决方案对您不起作用，那么这可能是再次拥有工作 .pbxproj 文件的最直接方法！

哦，我从我的 gitignore 中删除了 .pbxproj。我不确定它是否真的存在于你的 gitignore 中，但我建议你对这个主题进行自己的研究，我自己也不确定！

祝你好运！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-06-27T20:59:16.437

使用**xcodegen**库来避免这样的冲突。它有这些特点

*   ✅ 按需生成项目并从 git 中删除您的 .xcodeproj，这意味着不再有合并冲突！
*   ✅ Xcode 中的组和文件始终同步到磁盘上的目录
*   ✅ 易于配置的项目，易于阅读且对 git 友好
*   ✅ 轻松复制和粘贴文件和目录，无需在 Xcode 中编辑任何内容
*   ✅ 通过构建设置组跨多个目标共享构建设置
*   ✅ 自动为测试和生产等不同环境生成方案
*   ✅ 轻松创建具有复杂设置的新项目，而无需使用 Xcode
*   ✅ 从任何地方生成，包括在 CI 上
*   ✅ 在多个文件中分发您的规范，以便于共享和覆盖
*   ✅ 轻松创建多平台框架
*   ✅ 无需任何工作即可集成 Carthage 框架
*   ✅ 导出依赖图以在 Graphviz 中查看

[https://github.com/yonaskolb/XcodeGen](https://github.com/yonaskolb/XcodeGen)

# c# - PushSharp APNS 反馈服务示例

> ID：12143287
> 
> 赞同：4
> 
> 时间：2012-08-27T13:47:23.080
> 
> 标签：c#, apple-push-notifications, apns-sharp, pushsharp

我们已经实现了 PushSharp 来向我们的企业 iOS 设备发送推送通知。这是从 Windows 机器发送的，我们自定义了从控制台应用程序调用的 PushSharp 代码，该应用程序计划每分钟运行一次（检查 SQL Server DB 以发送推送通知，然后发送返回的内容）。这一切都很好，但我一直无法找到如何使用这个库调用反馈服务的示例。我看到有一个 FeedbackService.cs 类可以处理与 Apple 反馈服务的连接，但文档没有涵盖它的工作原理或您如何使用它。

有没有人有一个很好的教程或如何使用反馈服务的例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T18:30:37.270

从源代码看，好像没有直接使用。

您可以注册到`Events.OnDeviceSubscriptionExpired`PushService 的。

事件参数将`deviceInfo`使用苹果设备 ID 填充参数。

# android - 元素 当我按 ctrl+space 时出现未知错误

> ID：12143288
> 
> 赞同：2
> 
> 时间：2012-08-27T13:47:25.567
> 
> 标签：android, eclipse, admob

我想获得使用 admob sdk 的内容协助，但它给了我一个错误

```
Element <com.google.ads.AdView> is unknown. 
```

我认为 SDK 设置正确，因为其他一切正常，广告显示在我的应用程序上。

有谁知道可能是什么问题？

# javascript - 在 jquery 和 javascript 中创建自定义日历背后的逻辑

> ID：12143289
> 
> 赞同：0
> 
> 时间：2012-08-27T13:47:27.480
> 
> 标签：javascript, jquery

我正试图围绕日历背后的逻辑。目前，出于测试目的，我用计数器（1-31）显示天数，但 1 从日历的左上角开始。我的问题是，我需要做什么来计算当前月份的天数并相应地显示当月的天数。我已经包含了我的一些代码。

```
this.RenderCalendar = function () {

        var date = new Date();
        date = new Date(date.getYear(), date.getMonth(), 1);
        month = date.getMonth();

        var calendarHeader = $("<div class=\"calHeader\"></div>");
        var monthLabel = $("<label id=\"calMonth\">" + FRAMEWORK.GetMonthString(month) + "</label>");
        var yearLabel = $("<label id=\"calYear\">" + date.getYear() + "</label>");
        var nextMonth = $("<a href=\"javascript:void(0);\" id=\"nextMonth\" class=\"newMonth nextMonth\" title=\"Next Month\">&gt;&gt;</a>");
        var prevMonth = $("<a href=\"javascript:void(0);\" id=\"prevMonth\" class=\"newMonth previousMonth\" title=\"Previous Month\">&lt;&lt;</a>");

        nextMonth.click(function () {
            var oldTable = $(".calendarTableContainer table").first();
            var newTable = FRAMEWORK.RenderCalendarTableMarkup(month + 1);

            $(".calendarTableContainer").append(newTable);
            $(".calendarTableContainer table").each(function () {
                $(this).css("width", $(this).width() + "px");
            });

            $(".calendarTableContainer").css("width", ($(".calendarTableContainer table").outerWidth() * 2) + 25 + "px");

            $(".calendarContainer").animate({
                scrollLeft: $("div.calendarContainer").scrollLeft() + ($("div.calendarContainer table").next().width())
            }, 500, function () {
                $(".calendarTableContainer").css("width", "100%");
                oldTable.remove();
                $(".calendarTableContainer table").css("width", "100%");
            });
            var currentMonthIndex = $.inArray($("#calMonth").text(), months);
            $("#calMonth").text(months[currentMonthIndex + 1]);
        });

        prevMonth.click(function () {
            var oldTable = $(".calendarTableContainer table").first();
            var newTable = FRAMEWORK.RenderCalendarTableMarkup(month - 1);

            $(".calendarTableContainer").prepend(newTable);
            $(".calendarTableContainer table").each(function () {
                $(this).css("width", $(this).width() + "px");
            });

            $(".calendarTableContainer").css("width", ($(".calendarTableContainer table").outerWidth() * 2) + 25 + "px");
            $(".calendarContainer").scrollLeft(oldTable.outerWidth());

            $(".calendarContainer").animate({
                scrollLeft: $("div.calendarContainer").scrollLeft() - ($("div.calendarContainer table").next().width())
            }, 500, function () {
                $(".calendarTableContainer").css("width", "100%");
                oldTable.remove();
                $(".calendarTableContainer table").css("width", "100%");
            });
            var currentMonthIndex = $.inArray($("#calMonth").text(), months);
            $("#calMonth").text(months[currentMonthIndex - 1]);
        });

        calendarHeader.append(nextMonth);
        calendarHeader.append(prevMonth);
        calendarHeader.append(monthLabel);
        calendarHeader.append(yearLabel);
        $("#detailsContainer").append(calendarHeader);

        var calendarContainer = $("<div class=\"calendarContainer\"></div>");
        var calendarTableContainer = $("<div class=\"calendarTableContainer\"></div>");
        calendarContainer.append(calendarTableContainer);

        $("#detailsContainer").append(calendarContainer);
        $(".calendarTableContainer").append(FRAMEWORK.RenderCalendarTableMarkup());

        /*var containerHeight = $("#detailsContainer").height();
        calendarContainer.css("height", containerHeight);
        var calendarHeight = calendarContainer.outerHeight();
        var calHeaderHeight = calendarHeader.outerHeight();
        var calDayOfWeekHeight = $("#trCalDayOfWeekHeader").outerHeight();
        var remainingContainerHeight = calendarHeight - calHeaderHeight - calDayOfWeekHeight;
        $(".calendarContainer tr.trCalWeek").each(function () {
        $(this).css("height", remainingContainerHeight / weekCount);
        });*/
    };

    this.RenderCalendarTableMarkup = function (newMonth) {
        var calendarTable = $("<table id=\"tabCalendar\" class=\"tabCalendarContainer\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"></table>");
        var calendarDayOfWeekHeader = $("<tr id=\"trCalDayOfWeekHeader\" class=\"trCalDayOfWeek\"></tr>");

        for (var day = 0; day < days.length; day++) {
            var dayOfWeek = $("<td id=\"tdDayName-" + days[day] + "\">" + days[day] + "</td>");
            calendarDayOfWeekHeader.append(dayOfWeek);
        };
        calendarDayOfWeekHeader.find("td").each(function () {
            $(this).css("width", 100 / 7 + "%");
        });
        calendarDayOfWeekHeader.find("td:last").css("border-right", "none");
        calendarTable.append(calendarDayOfWeekHeader);

        weekCount = FRAMEWORK.CountWeeksOfMonth(new Date().getDate(), month, new Date().getYear());
        var dayCount = 1;

        for (var week = 1; week <= weekCount; week++) {
            var calendarWeek = $("<tr id=\"trWeek-" + week + "\" class=\"trCalWeek\"></tr>");
            for (var day = 0; day < 7; day++) {
                var calendarDay = $("<td id=\"tdDay-" + dayCount + "\"><label>" + dayCount + "</label></td>");
                calendarWeek.append(calendarDay);
                if (dayCount <= 30) {
                    dayCount++;
                }
                else { dayCount = 1; }
            };
            calendarWeek.find("td:last").css("border-right", "none");
            calendarTable.append(calendarWeek);
        };

        return calendarTable;
    }; 
```

`RenderCalendar()`被调用 dom 准备就绪。在 RenderCalendar 中，我有下个月和上个月的按钮，它们将相应地导航并`RenderCalendarTableMarkup(),`计算天数并相应地显示它们。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:49:19.837

为什么要自己计算所有这些。查看[http://momentjs.com/](http://momentjs.com/)

# ios - App Store 拒绝 - Game Center 上没有图标

> ID：12143304
> 
> 赞同：3
> 
> 时间：2012-08-27T13:48:17.533
> 
> 标签：ios, app-store, game-center, appstore-approval

在等待我的 iOS 游戏更新两周后，我被拒绝了，原因如下：

> 我们发现，在运行 iOS 5.1.1 的 iPhone 4 和 iPad（第 3 代）在 Wi-Fi 和蜂窝网络上审查时，您的应用程序出现了一个错误，这不符合 App Store 审查指南。
> 
> 我们发现，当我们启动 Game Center 应用程序并查看您的应用程序时，您的应用程序图标不会加载。

更新是为了修复我错过了在我的第一个版本中选择提交排行榜的问题。所以这个新的更新或多或少是相同的版本，但选择了排行榜和成就。

当我使用沙盒帐户调试应用程序时，它工作得很好。有什么想法吗？

这就是我在提交之前设置排行榜的方式（我在第一个版本中忘记了）。

![截屏](../Images/030e2ae4f04b5728804edc48e8c3e7c1.png)

图标和分数完全可见：

[![截屏](../Images/eec3cea1e83afeef1efee04693e8c2c0.png)](https://web.archive.org/web/20130319122628/https://dl.dropbox.com/u/6745218/bild.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:36:34.220

也许不是答案，但这就是我解决它的方法..

我刚刚重新提交了它，在评论中说它在带有沙盒帐户的 iPad 3 代设备上运行良好，并且图标完全可见。它被接受了，现在可以工作了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:22:24.553

只需为您的应用重新启用游戏中心

# replace - 文本操作：如何使用 sed 排除特定行

> ID：12143308
> 
> 赞同：1
> 
> 时间：2012-08-27T13:48:35.150
> 
> 标签：replace, sed, text-manipulation

currelty 我用`<`以下`sed`命令替换所有内容

```
sed -e 's/\&lt;/</g'' 
```

但现在我必须排除包含`<title>` 确切的行我必须排除和之间的`<title>`文本`</title>`

例如。以下行与我的命令匹配，但应排除此行...

```
 <title>BEWEGUNGSBOX der ÖDG ab sofort &lt; erhältlich </title> 
```

我怎样才能用 sed 解决它？我在 cygwin 中使用 sed

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:06:55.047

我不喜欢使用`sed`处理 HTML 数据的想法。但是说，试试这个：

```
sed -ne '/<title>.*<\/title>/ { p; b }; /<title>/,/<\/title>/ { p; b }; s/\&lt;/</g; p' infile 
```

`<title>...</title`它在同一行中查找具有两个标签的 a并在不更改的情况下打印它。否则，请使用范围在不同的行中查找这些标签。从前一个条件不成功的点开始，开始替换`&lt;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:04:29.207

要仅在文档正文中进行替换，您可以在 sed 中使用正则表达式范围：

```
sed -e '/<body/,/<\/body/ s/\&lt;/</g' input.htm 
```

# ios - 如何在执行冗长的操作时隐藏 UIPopoverController？

> ID：12143309
> 
> 赞同：2
> 
> 时间：2012-08-27T13:48:39.783
> 
> 标签：ios, ipad, uipopovercontroller

从弹出框控制器中选择一个选项后，代理会被告知已做出选择。

我想关闭弹出框，将其从屏幕上移除，并向用户显示活动指示器。

不幸的是，dismissPopover 下面的代码在 popover 实际消失之前运行，导致长时间等待而没有任何事情发生。

```
- (void)itemSelected:(int)option {

    [popController dismissPopoverAnimated:YES];

    activityIndicator.hidden = NO;
    [activityIndicator startAnimating];

    switch (option) {
        case 0:
            // Do something that takes some time
            break;

        case 1:
            // Do something that takes even longer
            break;
    }

} 
```

解除弹出框后将控制权返回给调用 ViewController 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:59:00.987

问题是，当您更改 UI 时，它不会立即发生。更改实际上已排队等待下次主事件循环完成时发生。由于这通常会立即发生，因此我们通常不必担心差异。所有 UI 更新都发生在主线程上，并且由于您的长操作也在主线程上，因此在完成长操作之前，应用程序永远不会更新 UI。

一种解决方案是使用 Grand Central Dispatch 将这些操作卸载到另一个线程，这将允许主线程继续执行（并且 UI 继续更新）直到操作完成。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{
    [self performReallyLongOperation];
});

dispatch_release(queue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:54:10.630

您可以使用[UIPopOverController 的委托](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIPopoverControllerDelegate/popoverControllerDidDismissPopover%3a)方法在弹出框`popoverControllerDidDismissPopover`关闭后执行您的代码：

标题

```
<UIPopoverControllerDelegate> 
```

执行

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    activityIndicator.hidden = NO;
    [activityIndicator startAnimating];

    switch (option) {
        case 0:
            // Do something that takes some time
            break;

        case 1:
            // Do something that takes even longer
            break;
    }

} 
```

# android - 如何将布局添加到对话框

> ID：12143310
> 
> 赞同：5
> 
> 时间：2012-08-27T13:48:41.427
> 
> 标签：android, android-layout, android-widget, android-dialog

我有一个想法，但我不确定如何实现它

首先我有一个对话框

```
final Dialog dialog = new Dialog(mContext); 
```

我也有布局

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textViewDescription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textViewWhen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我想要的是在对话框中添加此布局，我可能还想在该对话框内添加更多相同的布局我该怎么做？

例如，如何在一个对话框中添加两个这种布局？就像是

* * *

```
 Dialog Title

   Large Text
   Small Text
   Medium Text

   Large Text
   Small Text
   Medium Text 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T13:53:07.317

像这样的东西：

```
LayoutInflater li = LayoutInflater.from(SomeActivity.this);
someLayout = (LinearLayout)li.inflate(R.layout.some_layout, null);

alert = new AlertDialog.Builder(SettingsActivity.this);
alert.setView(someLayout); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:52:06.140

这是我的应用程序中的一个示例：

```
public class ConfirmDialog extends DialogFragment {

public static String TAG = "Confirm Dialog";

public interface ConfirmDialogCompliant {
    public void doOkConfirmClick();
    public void doCancelConfirmClick();
}

private ConfirmDialogCompliant caller;
private String message;

public ConfirmDialog(ConfirmDialogCompliant caller, String message){
    super();
    this.caller = caller;
    this.message = message;
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.confirm_dialog, container, false);
    getDialog().requestWindowFeature(Window.FEATURE_NO_TITLE);
    ((TextView) view.findViewById(R.id.textview_confirm)).setText(message);
    ((Button) view.findViewById(R.id.ok_confirm_button)).setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // When button is clicked, call up to owning activity.
            caller.doOkConfirmClick();
        }
    });
    ((Button) view.findViewById(R.id.cancel_confirm_button)).setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // When button is clicked, call up to owning activity.
            caller.doCancelConfirmClick();
        }
    });
    return view;
}

} 
```

其中膨胀的布局是confirm_dialog.xml。
您在 onCreateView 方法中扩展您的布局。
在这种情况下，我使用了 DialogFragment（我建议您使用...查看支持库，这样您就不必担心您的目标 SDK），但同样适用于 Dialog。
希望对你有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T13:50:20.660

您可以查看此文档页面，该页面解释了如何在对话框上添加自定义布局

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

关键是`setContentView`方法：

```
dialog.setContentView(R.layout.custom_dialog); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T08:42:50.130

看看这个：

[如何获得自定义的警报对话框，如图所示？](https://stackoverflow.com/questions/12721828/how-to-get-customized-alert-dialog-like-the-one-shown-in-image/12721965#12721965)

请参阅我给出的答案（Aamir Shah）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T13:50:46.033

使用 a `DialogFragment`，它允许您像任何其他 一样`Fragment`，完全自定义布局。它在 v4 支持库中可用。

[http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# actionscript-3 - 闪光。AS3。将 NetStream 保存到本地文件？

> ID：12143312
> 
> 赞同：0
> 
> 时间：2012-08-27T13:48:57.230
> 
> 标签：actionscript-3, flash, netstream

我想问一下如何将通过 NetStream 从某个站点加载的视频和音频内容保存为 FLV 文件。

有没有办法做到这一点？

```
var ns:NetStream = new NetStream(nc); 
ns.play('http://somefile.com/file.flv');
var file:FileReference=new FileReference();
**ns.doSomething(file); /// ???**
file.save(data,"flvfile.flv"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:58:20.287

我认为你不能用 NetStream 做到这一点——它不一定在任何时候都保存整个文件。

为什么不直接将文件引用指向“ [http://somefile.com/file.flv](http://somefile.com/file.flv) ” - 打开它，然后从中获取数据并在完成下载后将其与另一个引用一起保存？您可以将 NS 作为单独的操作并行运行，也可以在下载完成后从本地磁盘打开 NS。

关于直接使用 FileReference 下载有一个很好的答案，它涉及的问题在这里：[Flex 3 file download - without URLRequest](https://stackoverflow.com/questions/2589913/flex-3-file-download-without-urlrequest/2591626#2591626)

# c# - 如何使用 Entity Framework 4 组织与不同数据库的连接？

> ID：12143314
> 
> 赞同：0
> 
> 时间：2012-08-27T13:49:04.313
> 
> 标签：c#, sql-server, oracle, entity-framework-4

如何通过设置来组织与 Entity Framework 4 的不同数据库的连接？

例如：一个客户端使用 Oracle，另一个使用 SQL Server。数据库结构是平等的。我需要设置参数来更改数据库类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:07:11.863

当使用 XML 映射（数据库优先和模型优先方法）时，需要具有资源拆分（一个 CSDL、一个 MSL、多个 SSDL）和不同连接字符串的解决方案。这种方法的一个示例如下：[来自 Microsoft 的 EFQuerySamples](http://archive.msdn.microsoft.com/EFQuerySamples/)，说明了与不同 SQL Server 和 SQL Server Compact 版本的交互，以及[来自 Devart 的修改版本 EFQuerySamples](http://www.devart.com/dotconnect/efquerysamples.html)，除了 SQL Server 之外还支持 Oracle、MySQL、PostgreSQL 和 SQLite。

使用流畅映射（使用 DbContext 的 Code-First 方法）时，不需要多个资源，但必须考虑某些数据库和 EF 提供者的一些特性（缺少“dbo”模式等）。这种方法的一个示例如下：[SQL Server、Oracle、MySQL、PostgreSQL 和 SQLite 的 Code-First 示例](http://blogs.devart.com/dotconnect/entity-framework-code-first-support-for-oracle-mysql-postgresql-and-sqlite.html)。

# c++ - OpenGL glDeleteTextures C/C++

> ID：12143326
> 
> 赞同：0
> 
> 时间：2012-08-27T13:49:27.070
> 
> 标签：c++, opengl, memory, overflow

我正在使用具有多个级别的 2D 游戏，可以加载和（并且应该卸载。）

为了更容易处理纹理，我编写了一个 TextureLoader 类，它有一个包含所有纹理的列表，当游戏中的对象想要使用纹理时，它只有它希望使用的纹理的路径，然后询问 TextureLoader 是否它可以获得指向具有相同路径的纹理的指针。然后，如果纹理不存在于列表中，TextureLoader 将在发回指针之前尝试加载它。

这在整个游戏中运行良好，当我重新加载关卡时，内存使用量保持不变。

但是当我加载一个新关卡时，我显然希望之前的关卡被卸载，但它似乎不起作用。

这就是 glDeleteTextures 的用武之地。

所以我尝试做的是：

```
int arraySize = textures.size();
GLuint* arr = new GLuint[arraySize];
int x = 0;
for (std::list<Texture2D*>::iterator it = textures.begin(); it != textures.end(); ++it)
{
    arr[x] = (*it)->getImage();
    x++;
}
glDeleteTextures(arraySize, arr);

textures.clear(); 
```

由于指向内存的指针存储在单独的 Texture2D 类中，因此我尝试在调用 glDeleteTextures 之前收集所有这些指针；

然而，我的内存使用量不断增长，直到我达到堆栈溢出。

```
 getImage() 
```

返回一个 GLuint，它带有指向我第一次绑定纹理时获得的纹理的指针。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:03:55.243

你没有增加'x'。

此外，您还会泄漏数组的内存。为什么不使用向量？

```
std::vector<GLuint> arr;
arr.reserve(textures.size());
for (std::list<Texture2D*>::iterator it = textures.begin(); it != textures.end(); ++it)
{
    arr.push_back((*it)->getImage());

    // Are you missing:
    // delete *it;
}
if (!arr.empty()) {
    glDeleteTextures(arr.size(), &arr[0]);
}
textures.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:16:21.540

在监视我的 Vram 使用情况后，我可以看到 Vram 正在被正确释放，所以问题是因为 OpenGL 将副本存储在系统 RAM 中，当我调用 glDeleteTextures() 时这些副本没有被释放。

# php - Zend pdf，调整大小和放置以及将 pdfstring 转换为 pdf

> ID：12143328
> 
> 赞同：2
> 
> 时间：2012-08-27T13:49:30.907
> 
> 标签：php, zend-framework, pdf-generation, zend-pdf

我在使用 Zend PDF 制作 pdf 方面取得了不错的进展。

我现在正在将 Web 服务集成到我正在构建的应用程序中。一切都很顺利，但现在我正在努力渲染一个动态生成的 pdf，其中包含通过 Web 服务返回的 pdf 标签。考虑以下 ：

1.) 调用打印 pdf 的操作。2.) pdf 将包含 n 页（n 个对象/项目）关于项目/货物的动态信息。3.) n 个货物中的每一个都包含一个货物编号，当作为参数传递给 Web 服务的特定方法时，返回一个 pdfstring（我可以将其保存为 pdf）。4.) 我必须调整大小并将每个标签添加到相应页面的底部。

到目前为止，我已经能够使用已经保存的 pdf，并设法加载从 Web 服务返回的 pdfstring，并将其“合并”到最终的 pdf 中。这很好用。但我实际上想做以下事情：

1.）开始一个新的pdf并将所有其他内容添加到其中。2.) 进行 SOAP 调用并提取返回的 Pdf 字符串。

我已经这样做了，现在我想：

3.）调整“标签”的大小 4.）将其旋转 90 度 5.）将其添加到正在构建的 pdf 中。（不与现有的 pdf 合并）。

所以如果我：

```
$returnedFromWebServicePDF = Zend_Pdf::parse($pdfLabel, 1); 
```

我可以自己保存它，甚至可以合并它（通过克隆，请参见[此处](https://stackoverflow.com/questions/4254218/merging-2-pdf-with-zend-framework)），但想调整大小、旋转并将其添加到 pdf im 构建中。

有人可以引导我朝着正确的方向前进，因为我很难过。如果有人可以简单地向我展示如何将其添加到动态文档中，那就足以回答这个问题了。

提前致谢

**编辑**

到目前为止，我的努力没有结果。我现在正在尝试更改应用程序流程的主要部分，以便在调用此操作之前已经存储了 pdf。这意味着我可以将静态pdf合并到动态生成的pdf中。将保持此问题更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T15:41:26.170

澄清一下，您的目标是下载该服务创建的 PDF，将其加载回 Zend_PDF 并对 pdf 中存在的内容进行更改。

Zend_PDF 擅长向现有 pdf 添加内容，但无法更改页面上已有的内容。

它确实允许您在现有内容之上添加新内容。如果您无法控制该服务，您可以使用填充了背景颜色的形状来编辑您尝试更改的内容，并在该形状上添加一个新的文本块。

我们使用类似的东西来制作个性化的证书。

把它放在正确的位置是很棘手的。我在 pdf 上使用网格覆盖来了解我对 pdf 的了解。

```
/**
 * Creates a grid overlay on a pdf. Useful for positioning text on a page.
 * @param integer intPage The page number to operate on.
 * @param integer intInterval. Lines on the page will be drawn at this interval. Value is in points.
 * @return boolean TRUE for success.
 */
public function addGridLines($intPage = 0, $intInterval = 25)
{
    $this->objPdf->pages[$intPage]->saveGS();
    $pageWidth = $this->objPdf->pages[$intPage]->getWidth();
    $pageHeight = $this->objPdf->pages[$intPage]->getHeight();
    $this->objPdf->pages[$intPage]->setStyle($this->arrStyles['defaultLine']);
    $this->objPdf->pages[$intPage]->setStyle($this->arrStyles['defaultText']);
    //draw lines across the page.
    for($a = 0; $a < $pageHeight; $a+= $intInterval){
        $x = 0;
        $y = $a;
        $this->objPdf->pages[$intPage]->drawLine($x, $y, $pageWidth, $y);
        $this->objPdf->pages[$intPage]->drawText($a, $x, $y);
    }
    //Draw lines up the page.
    for($a = 0; $a < $pageHeight; $a+= $intInterval){
        $x = $a;
        $y = 0;
        $this->objPdf->pages[$intPage]->drawLine($x, $y, $x, $pageHeight);
        $this->objPdf->pages[$intPage]->drawText($a, $x, $y);
    }
    $this->objPdf->pages[$intPage]->restoreGS();

    return TRUE;
} 
```

此方法位于另一个具有 pdf 相关方法的对象中，但您明白了。'objPdf' 是我正在使用的 Zend_PDF 对象。

# dotnetnuke - DotNetNuke 安装

> ID：12143334
> 
> 赞同：-2
> 
> 时间：2012-08-27T13:49:41.893
> 
> 标签：dotnetnuke

我正在尝试在我的开发 PC 上下载安装程序 DotNetNuke，其中包含 IIS7 和 SQL Server 2008。我已按照此处的说明进行操作：http: [//www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/19/View /详细信息/如何安装-DotNetNuke-On-Your-Computer.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/19/View/Details/How-To-Install-DotNetNuke-On-Your-Computer.aspx)。

当我导航到 localhost 时，什么也没有发生。当我在 Firefox 中导航到此页面时，它显示：Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我查看了很多帖子条目并尝试了不同的东西。这看起来很有希望，但没有帮助： http: [//www.dotnetnuke.com/Resources/Forums/forumid/107/threadid/180233/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/107/threadid/180233/scope/posts.aspx)。

大多数建议似乎是针对正在升级网站的开发人员。是否有任何地方的日志文件可以准确地告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:30:59.440

The logs can be found in /Portals/_default/Logs .

You can increase the log sensitivity by editing DotNetNuke.log4net.config. Use

```
 <level value="All" /> 
```

for the most detailed log messages.

```
 <level value="Error" /> 
```

may also work if All provides too much info.

# iphone - 无法将 CordovaLib 添加为目标依赖项

> ID：12143338
> 
> 赞同：1
> 
> 时间：2012-08-27T13:49:48.063
> 
> 标签：iphone, xcode, cordova

我正在尝试将 phoneGap 框架作为一个库，有一个叫做 CordovaLib 的东西应该支持它。这是说明[http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html)

我完全按照这些步骤操作，但是在第 23 步我找不到要添加的 CordovaLib，如果我跳过它，我将无法导入 CDVViewController。

它看起来像一个基本的 Xcode 配置问题，谁能帮我解决这个问题？

[更新] 我已经安装了 1.9.0，它工作正常。他们对 2.0.0 中链接 Lib 的方式进行了一些更改，并相应地更改了说明，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:45:28.013

我在添加目标依赖项时也遇到了麻烦。

一种可能的解决方法是打开 CordovaLib 项目并进行构建。这将创建您需要替换 pre 2.0 框架的 CordovaLib.a 库。然后，您可以将该库复制到您的项目中，并将其作为库依赖项添加到构建阶段区域中。

# asp.net - 我可以在 Orchard CMS 中使用我的 Ninject .NET 项目吗？

> ID：12143341
> 
> 赞同：5
> 
> 时间：2012-08-27T13:50:01.173
> 
> 标签：asp.net, asp.net-mvc, ninject, orchardcms, autofac

我正在使用 Orchard CMS 创建一个网站，并且我有一个用 Ninject 编写的用于依赖注入的外部 .NET 项目，我想将它与 Orchard CMS 中的一个模块一起使用。我知道 Orchard 使用 Autofac 进行依赖注入，这给我带来了问题，因为我以前从未使用过 DI。

我创建了一个 Autofac 模块，`UserModule`它注册了一个源，`UserRegistrationSource`如下所示：

**用户模块.cs**

```
public class UserModule : Module
{
    protected override void Load(ContainerBuilder builder)
    {
        builder.RegisterSource(new UserRegistrationSource());
    }
} 
```

**UserRegistrationSource.cs**

```
public class UserRegistrationSource : IRegistrationSource
{
    public bool IsAdapterForIndividualComponents
    {
        get { return false; }
    }

    public IEnumerable<IComponentRegistration> RegistrationsFor(Service service, Func<Service, IEnumerable<IComponentRegistration>> registrationAccessor)
    {
        var serviceWithType = service as IServiceWithType;
        if (serviceWithType == null)
            yield break;

        var serviceType = serviceWithType.ServiceType;
        if (!serviceType.IsInterface || !typeof(IUserServices).IsAssignableFrom(serviceType) || serviceType != typeof(IUserServices))
            yield break;

        var registrationBuilder = // something...

        yield return registrationBuilder.CreateRegistration();
    }
} 
```

**用户服务.cs**

```
public interface IUserServices : IDependency
{
    void Add(string email, string password);
}

public class UserServices : IUserServices
{
    private readonly EFMembershipManager _manager;

    public UserServices(EFMembershipManager manager)
    {
        _manager = manager;
    }

    public void Add(string email, string password)
    {
        _manager.createUser(email, password);
    }
} 
```

**EFMembershipManager.cs**构造函数

```
public EFMembershipManager(ServerRepository db,
                           ServerRepositoryMembershipProvider membershipProvider,
                           string testUsername,
                           string serverUsername)
{
...
} 
```

`EFMembershipManager`是来自外部项目的一个类，它使用 Ninject 进行 DI 和使用`ServerRepository`，并且`ServerRepositoryMembershipProvider`也使用 Ninject 注入。

现在我被困住了......

应该`UserRegistrationSource`将 Ninject 容器（内核）作为构造函数参数并尝试查找`IUserServices`服务，然后将解析调解到 Ninject 内核并返回一个空的 Enumerable 以便 Autofac 不会尝试解决与此相关的任何问题，`IUserServices`或者这是错误的方法?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:32:55.277

Autofac 支持[注册源](http://nblumhardt.com/2010/01/resolve-anything/)（以及更多关于注册源[的信息](http://nblumhardt.com/2010/01/declarative-context-adapters-autofac2/)）。注册源是容器在尝试解析类型时将咨询的服务。源可以通过构建类型的方法或指示源无法提供请求的类型的空列表来响应。

在您的情况下，可以实现一个注册源，它将尝试从您的 Ninject 容器中解析请求的类型。

I'm not too familiar with Orchard but I'm guessing that it uses configuration files to configure Autofac. My suggestion is that you create [a simple Autofac module](http://code.google.com/p/autofac/wiki/StructuringWithModules) that registers your registration source implementation, and that you configure Orchard to [load the module from config](http://code.google.com/p/autofac/wiki/XmlConfiguration).

# php - PHP 在文件处理程序被垃圾收集后是否关闭文件？

> ID：12143343
> 
> 赞同：21
> 
> 时间：2012-08-27T13:50:03.943
> 
> 标签：php, file-io

如果我有一个打开文件并读取一行的简短函数，我是否需要关闭文件？或者当执行退出函数并被`$fh`垃圾收集时，PHP 会自动执行此操作吗？

```
function first_line($file) {
    $fh = fopen($file);
    $first_line = fgets($fh);
    fclose($fh);
    return $first_line;
} 
```

然后可以简化为

```
function first_line($file) {
    return fgets(fopen($file));
} 
```

这当然是理论上的，因为这段代码*没有任何错误处理*。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T14:06:06.307

一旦删除了对该资源的所有引用，PHP 就会自动运行资源析构函数。

由于 PHP 有一个基于引用计数的垃圾收集，您可以相当确定这会尽早发生，在您的情况下，只要 `$fh`超出范围即可。

在 PHP 5.4 之前`fclose`，如果您尝试关闭分配了两个以上引用的资源，则实际上并没有做任何事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T13:51:53.277

是的。资源超出范围时会自动释放。以机智：

```
<?php

class DummyStream {

    function stream_open($path, $mode, $options, &$opened_path) {
    echo "open $path<br>";
        return true;
    }

    function stream_close() {
        echo "close<br>";
        return true;
    }
}

stream_wrapper_register("dummy", "DummyStream");

function test() {
    echo "before open<br>";
    fopen("dummy://hello", "rb");
    echo "after open<br>";
}

test();

?> 
```

输出：

```
before open
open dummy://hello
close
after open 
```

一旦 fopen() 返回，文件句柄就会被释放，因为这里没有捕获句柄。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T13:54:28.723

是的，但最好在使用完文件指针后立即关闭它们。这样，如果您有另一个应用程序需要对该文件进行写访问，它就可以正常运行。

需要研究的是 PHP 5.3 和更好的[垃圾收集](http://php.net/manual/en/features.gc.php)特性。

# ios - 将按钮添加到静态表格视图/从表格视图单元格调用方法

> ID：12143345
> 
> 赞同：0
> 
> 时间：2012-08-27T13:50:11.790
> 
> 标签：ios, static, tableview

很简单，我试图在静态表格视图的底部添加多个按钮，就像在地址簿应用程序中一样（在发送消息、共享联系人和添加到收藏夹的联系人详细信息下方）。但是，除非我使用子视图，否则它根本不会让我在 Storyboards 中添加三个按钮，但是我不能完全使颜色与 iOS 6 背景的颜色相同（并且我使用了颜色选择器） . 发生的情况是它会简单地在表格视图部分下方添加按钮，它会占据 iPad 屏幕的整个宽度。

我的另一个（也是最初的）想法是使用静态表格视图单元格来简单地调用方法。我在这里要做的是在用户按下 tableview/button 时将建筑物的详细信息（如地址、名称等）添加到用户的联系人应用程序中——但我无法将其链接到任何 IBActions。

使用按钮是没有问题的，所以如果第一个问题可以解决，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:01:20.397

如果您将解决方案与子视图一起使用，您可以将视图背景色设置为 [UIColor clearColor]

# asp-classic - loader.asp 加载小文件但不加载大文件

> ID：12143346
> 
> 赞同：0
> 
> 时间：2012-08-27T13:50:14.373
> 
> 标签：asp-classic

您好我在通过管理系统将文件上传到我的服务器时遇到问题。我自己并不真正使用 ASP 脚本，所以我不明白这个问题。

上传缩略图之类的文件时，脚本似乎没有问题，但是在尝试上传较大的图像时，它不起作用并给我一个内部服务器错误 500（您正在寻找的资源有问题，它无法显示。）

使用的加载脚本是调用 LOADER.ASP 并且如使用小文件之前所述，该脚本可以正常上传，并且所有条目都可以正常输入到数据库中。

如果有人能给我一个提示，说明为什么会发生这种情况，或者给出错误的原因是什么，那真的很有帮助

谢谢

# javascript - AJAX SyntaxError：JSON.parse：意外字符

> ID：12143349
> 
> 赞同：1
> 
> 时间：2012-08-27T13:50:18.557
> 
> 标签：javascript, jquery, ajax, json

这几天我一直在试图找出这个问题。由于我的数据正在发送和检索，但它没有发布到我的 div 中。为什么？我做了一个测试，发现我是一个 SyntaxERROR 意外字符.. 我能找到它.. 我能不能。

有人可以看看这个并告诉我任何错误。

```
<script>
$(document).ready(function(){
    $("form#mycommentform").submit(function() {

        var streamidcontent = $(this).children("#streamidcontent").val();
        var contents = $(this).children("#contents").val();
        $.ajax({
            type: "POST",
            url: "comment_add.php",
            cache: false,
            dataType: "json",
            data: { streamidcontent: streamidcontent, contents: contents }, 
            success: function(data){  
                $("#containerid").html('<div class="stream_comment_holder" id="comment_holder_'+data['comment_streamitem']+'">\
                <div id="comment_list_'+data['comment_streamitem']+'">\
                <div id="tgy"></div><div class="stream_comment" id="comment_'+data['comment_id']+'" style="margin-top:0px;">\
                <table width=100%><tr><td valign=top width=30px></a><td valign=top align=left>\
                <a href="/profile.php?username='+data['username']+'">'+data['first']+'</a>\
                <div class="commentholder">'+data['first']+'</div><br/>\
                <div id="commentactivitycontainer"></div></div></table></div></div>\
                <div class="form"><form id="mycommentform" method="POST" class="form_statusinput">\
                <input type="hidden"  name="streamidcontent" id="streamidcontent" value="'+data['comment_streamitem']+'">\
                <input type="text" name="contents" id="contents" placeholder="Say something" autocomplete="off">\
                <input type="submit" id="button" value="Feed"></form></div>\
                <div class="stream_comment_holder" style="display:;"><div class="like_name"><b>\
                <a href="profile.php?username='+data['username']+'">You Like This</a>\
                </b></div></div>');
                  alert("SUCCESS!!!");
 },
 error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.statusText);
    alert(xhr.status);
    alert(thrownError);
 }
 });
        return false
    });
 });
 </script> 
```

回应

```
INSERT INTO streamdata_comments(comment_poster, comment_streamitem, comment_datetime, comment_content) VALUES (10,4090,UTC_TIMESTAMP(),'fff'){"comment_id":"2016","comment_streamitem":"4090","username":"hazy","id":"10","first":"Lucy","middle":"","last":"Botham"} 
```

PHP页面

```
<?php
session_start();
require"include/rawfeeds_load.php";

if(isset($_POST['streamidcontent'])&isset($_POST['contents'])){
rawfeeds_user_core::add_comment($_POST['streamidcontent'],$_POST['contents']);

$json = array();
$check = "SELECT comment_id, comment_datetime, comment_streamitem, comment_poster FROM streamdata_comments WHERE comment_poster='".$_SESSION['id']."' AND comment_streamitem='".$_POST['streamidcontent']."' ORDER BY comment_datetime DESC";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['comment_id'] = $resultArr['comment_id'];
$json['comment_streamitem'] = $resultArr['comment_streamitem'];
mysqli_free_result($check1);

$check = "SELECT * FROM users WHERE id=".$_SESSION['id']."";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];
mysqli_free_result($check1);

echo json_encode($json);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:24:01.043

正如上面的@thomas 所说。我将 SQL 查询回显到我的函数中。我删除了它，它现在可以正常工作了。

# ruby - 优雅地关闭 sidekiq 进程

> ID：12143350
> 
> 赞同：27
> 
> 时间：2012-08-27T13:50:19.630
> 
> 标签：ruby, sidekiq

有谁知道如何找到sidekiq的pidfile来优雅地关闭它？运行`ps ax | grep sidekiq`然后`sidekiqctl stop <pid from grep>`持续运行会`no such pidfile`报错？Cntl-C 和 Cntl-D 似乎也没有效果。

关闭进程窗口并重新打开一个新窗口并不会终止该进程，因为它似乎作为守护进程运行。

我发现的唯一一致的修复是重新启动。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-02-14T21:46:11.900

用它来强行杀死sidekiq。

```
ps -ef | grep sidekiq | grep -v grep | awk '{print $2}' | xargs kill -9 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-08-15T20:16:25.190

Sidekiq 提供了在启动时指定 pidfile 的能力，或者如下所示，在进程启动后创建 pidfile。无论哪种情况，您都可以在停止时使用 pidfile。

1.  用于`ps -ef | grep sidekiq`查找 pid
2.  创建一个文件（例如`sidekiq.pid`），其唯一内容是您刚刚找到的 pid
3.  `sidekiqctl stop <pidfile_name>`
4.  以后启动 sidekiq 时使用`-P <pidfile_name>`or`--pidfile <pidfile_name>`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-23T15:01:43.093

我自己也在研究这个...

似乎较新版本的 Sidekiq 内置了这个：

[https://github.com/mperham/sidekiq/wiki/Signals](https://github.com/mperham/sidekiq/wiki/Signals)

> 杀死 -USR1 [PROCESS_ID]

对我来说效果很好。工人们停止接受新工作，但完成了他们正在从事的工作，然后我终于在完成后终止了该过程。

> 杀死 -TERM [PROCESS_ID]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-28T21:44:20.260

我编写了一个可以启动或停止sidekiq 的小处理程序。

**start_stop_sidekiq.sh**

```
#!/bin/bash
cmd=$1
PROJECT_DIR=$2
PIDFILE=$PROJECT_DIR/tmp/pids/sidekiq.pid
cd $PROJECT_DIR

start_function(){
  LOGFILE=$PROJECT_DIR/log/sidekiq.log
  echo "Starting sidekiq..."
  bundle exec sidekiq -d -L $LOGFILE -P $PIDFILE -q mailer,5 -q default -e production
}

stop_function(){
  if [ ! -f $PIDFILE ]; then
    ps -ef | grep sidekiq | grep busy | grep -v grep | awk '{print $2}'  > $PIDFILE
  fi
  bundle exec sidekiqctl stop $PIDFILE
}

case "$cmd" in
  start)
    start_function
    ;;
  stop)
    stop_function
    ;;
  restart)
    stop_function && start_function;
    ;;
  *)
    echo $"Usage: $0 {start|stop|restart} /path/to/rails/app"
esac 
```

保存，输入`chmod +x start_stop_sidekiq.sh`。然后只需运行它：

`bash start_stop_sidekiq.sh start /path/to/your/rails/app`

或者

`bash start_stop_sidekiq.sh stop /path/to/your/rails/app`

如果您只有一个 Rails 应用程序，您还可以静态设置 $PROJECT_DIR 变量，这样您就不需要每次都指定路径。希望这可以帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-26T03:00:52.243

如果你喜欢 bashes...

**脚本/stop_sidekiq.sh**

```
#!/bin/bash
DIR="$( cd "$( dirname "$0" )" && pwd )"

PROJECT_DIR=$DIR/../ # EDIT HERE: rel path to your project form this file location (my scripts are in ./scripts/)
SIDEKIQ_PID_FILE=$PROJECT_DIR/tmp/pids/sidekiq.pid  # EDIT HERE: pid file location

if [ ! -f $SIDEKIQ_PID_FILE ]; then
    # if no pid file, retrieve pid and create file
    ps -ef | grep sidekiq | grep busy | grep -v grep | awk '{print $2}'  > $SIDEKIQ_PID_FILE
fi

(cd $PROJECT_DIR && bundle exec sidekiqctl stop $SIDEKIQ_PID_FILE) 
```

笔记：

*   即使 sidekiq 在没有 pid 文件参数的情况下启动也可以工作
*   假设此脚本位于项目内的文件夹中，并且 pid 文件存储在 ./tmp/pids/

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-12T00:17:53.343

尝试使用上帝来监控 sidekiq。

然后你需要做的就是 bundle exec god stop

或者，您可以使用：sidekiqctl stop 60

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-14T12:23:59.227

共享一个检查 sidekiq 是否正在运行的 bash 脚本，向其发送 TSTP 以要求它不要接收任何新作业，等待任何正在运行的作业完成，然后通过向其发送 TERM 信号来停止该进程。

[https://gist.github.com/kamilbednarz/5ea6398af2a7537aa8feb5a63f3acf2f](https://gist.github.com/kamilbednarz/5ea6398af2a7537aa8feb5a63f3acf2f)

# jquery - 调整大小时在表格单元格内对齐 div 标签

> ID：12143356
> 
> 赞同：1
> 
> 时间：2012-08-27T13:50:31.287
> 
> 标签：jquery, html, css, alignment, css-tables

我有一张可以调整大小的表格，效果很好。表格标题单元格包含一些额外`div`的标签，表示表格的排序方式。例如，如果对列进行排序，则会显示升序/降序图像。（现在，我使用红色框作为占位符。）

但是，当我调整表格大小时，`div`s在文本*下方移动。*

我试过这个CSS：

```
overflow:hidden
text-overflow:ellipsis; 
```

它适用于表格的文本，但对 s 没有帮助`div`。如何防止`div`s 在文本下方移动？

这是我的代码：[jsfiddle.net](http://jsfiddle.net/Uf8cN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:02:37.347

您可以将它们设为绝对值并在单元格中添加一些填充以避免重叠。

[http://jsfiddle.net/Uf8cN/4/](http://jsfiddle.net/Uf8cN/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:56:25.310

您可以尝试在 css 中设置 min-width 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:56:47.937

您可以应用类似`ascending`或`descending`指示对列进行排序的类，并将背景**图像**应用于这些类和**背景位置：右中心**，而不是使用 img 标签

只是提出一个选择

# actionscript-3 - 如何跟踪更长的调用堆栈？

> ID：12143357
> 
> 赞同：0
> 
> 时间：2012-08-27T13:50:31.870
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在使用它来显示调用堆栈：

```
throw new Error("show me"); 
```

但我想打印一个更长（更深）的堆栈，因为当前的堆栈没有显示我需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:00:53.210

如果您没有看到更多内容`Error.getStackTrace()`，可能是因为堆栈中没有更多内容。除了 [Render] 等私人内部播放器调用外。

查看调用堆栈中最深的项，它可能是某种事件处理程序。如果是这样，您将无法深入挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:58:32.737

您可以将堆栈跟踪作为字符串获取并将其记录到文件中或在文本字段中显示。

```
var e:Error = new Error();
var trace:String = e.getStackTrace();

someTextField.text = trace; 
```

编辑：使用 Flash Develop 我抛出了一个错误，并且能够看到超过 17 个堆栈跟踪步骤：

```
Error
    at Main/func14()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:100]
    at Main/func13()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:93]
    at Main/func12()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:88]
    at Main/func11()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:83]
    at Main/func10()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:78]
    at Main/func9()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:73]
    at Main/func8()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:68]
    at Main/func7()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:63]
    at Main/func6()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:58]
    at Main/func5()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:53]
    at Main/func4()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:49]
    at Main/func3()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:44]
    at Main/func2()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:39]
    at Main/func1()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:34]
    at Main/onCreationComplete()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:29]
    at Main/___Main_Application1_creationComplete()[C:\Users\SGU\Desktop\barisu\misc\flex4test\src\Main.mxml:5]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
    at mx.core::UIComponent/set initialized()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:1818]
    at mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:842]
    at mx.managers::LayoutManager/doPhasedInstantiationCallback()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:1180] 
```

# html - HTML5 'canvas' 元素的 z-index

> ID：12143360
> 
> 赞同：0
> 
> 时间：2012-08-27T13:50:44.270
> 
> 标签：html, css, z-index

在 HTML5 和 CSS3 之前的 HTML 和 CSS 中，可以将两个元素放置在彼此之上，具有透明背景，并使用该元素的 z-index 属性设置一个以接收“鼠标悬停”事件。

我一直在尝试使用 HTML5 块级元素下的“画布”来执行此操作，但画布似乎会阻止具有较高 z-index 的图层中的事件。

这是预期的行为吗？

我正在最新的 Mozilla 中进行测试。

# java - 在 Java 上使用 Soundbank 进行可靠的 MIDI 播放

> ID：12143362
> 
> 赞同：2
> 
> 时间：2012-08-27T13:50:48.370
> 
> 标签：java, macos, midi, javasound, javax.sound.midi

我正在编写一个播放一些 MIDI 音符的应用程序，但我在使用音库时遇到了问题。

在 Mac 的默认 JVM 上，有一个`soundbank-mid.gm`礼物，但 Java 告诉我没有默认的音库，也没有加载任何乐器。它也无法加载我自己的 SoundFont 文件。不过，它仍然会从一些默认值开始播放。

在我的 JVM 7 上，有一个默认的音库和加载的乐器，它还加载 SF2 文件。我有一个在 7 上不起作用的原生 dep。

在 Ubuntu 上我遇到了类似的问题，但那是因为`soundbank.gm`默认情况下没有安装。我也能够`SF2`很好地加载文件。

从未尝试过Windows。

跨平台播放 MIDI 的可靠方法是什么？

# silverlight - ListBox到达边界时的视觉效果

> ID：12143364
> 
> 赞同：0
> 
> 时间：2012-08-27T13:50:52.230
> 
> 标签：silverlight, windows-phone-7, windows-8

是否有可能获得一个事件来确定 ListBox（Windows Phone，Windows 8）控件到达边界之一的时刻。有一种特殊的视觉效果，有点像挤压

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:42:32.283

[Here is a sample](http://sharpgis.net/post/2011/04/03/RefreshBox-for-Windows-Phone-7.aspx) written for Windows Phone 7\. It allows you to see when the user has reaches the start/end of the list.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:24:53.003

您首先需要访问 ListBox 的 ScrollViewer。拥有 ScrollViewer 后，您将希望订阅 ViewChanged 事件。当该事件触发时，您可以检查 VerticalOffset 属性并将其与 ScrollableHeight 属性进行比较。这应该告诉你你是在滚动的顶部还是底部。

有多种方法可以访问 ScrollViewer。继承您自己的控件并覆盖 OnApplyTemplate 是其中之一，但使用 VisualTreeHelper 可能更容易。这是一篇文章，展示了如何：

[http://developingfor.net/2009/02/16/fun-with-the-wpf-scrollviewer/](http://developingfor.net/2009/02/16/fun-with-the-wpf-scrollviewer/)

# c# - 将字典的值分配给文本框

> ID：12143365
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:50:52.857
> 
> 标签：c#, .net, winforms

我有一个数据字典，它使用一个字符串作为索引和一个列表对象的值，如下所示：

```
Dictionary<string, List<string>> dataDict = new Dictionary<string, List<string>>(); 
```

我还有 20 个文本框（TextBox1、TextBox2、TextBox3 等）

如何将 List 对象中的值分配给 20 个文本框（假设列表对象中有 20 个值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:07:40.237

我建议将您的 TextBoxes 放在容器控件中，例如`Panel`：

```
var allTextBoxes = txtPanel.Controls.OfType<TextBox>();
foreach(var kv in dataDict)
{
    String index = kv.Key;
    String values = String.Join(",", kv.Value);
    TextBox txt = allTextBoxes.FirstOrDefault(txt => txt.Name == "TextBox" + index);
    if(txt != null)
    {
        txt.Text = values;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:10:59.193

我有一种我无法正确理解问题的感觉（尤其是拥有字典的目的），但您可以使用以下内容：

```
int i = 1;
List<string> values = dataDict["0"]; // gets the first item from the dictionary
foreach (string data in values)
{
    (this.Controls.Find("Textbox" + i, true)[0] as TextBox).Text = data;
    i++;
} 
```

# ruby-on-rails - 奇怪的输出“SELECT 1”

> ID：12143366
> 
> 赞同：3
> 
> 时间：2012-08-27T13:50:57.770
> 
> 标签：ruby-on-rails, rack-mini-profiler

当我在我的应用程序中使用 rack-mini-profiler（运行 ruby​​ 1.9.3 p194、rails 3.2.8 和 pg 0.14.0）时，我得到了非常奇怪的分析输出。通常它看起来像这样：

```
/da/brugte-biler/Fiat/Multipla autouncle.dev on Mon, 27 Aug 2012 13:30:50 GMT
                                             duration (ms) from start (ms) query time (ms)
GET http://autouncle.dev:80/da/brugte-biler/F...   19.2 +0.0   3 sql   0.5
  Executing action: search                         83.4 +16.0  48 sql  9.4
   Rendering: cars_search/table_listing            819.2  +99.0  356 sql   71.2
    Rendering: cars/_reliability_report            12.5 +601.0
    Rendering: cars_search/_sidebar                1093.7 +616.0   281 sql   356.7
    Rendering: cars/_listing_table                 1612.6 +1731.0  123 sql   549.5
    Rendering: kaminari/_paginator                 27.2 +3632.0
   Rendering: layouts/search_results               31.3 +3671.0
    Rendering: layouts/_shared_head_content        223.4  +3673.0
    Rendering: partials/_top_links                 2.6  +3907.0
    Rendering: partials/_search_form               165.1  +3912.0
    Rendering: partials/_footer_links              5.2  +4086.0
    Rendering: layouts/_shared_footer_content      8.7  +4099.0
share show trivial show time with children   24.0 % in sql 
```

这里奇怪的是，也就是说，有356条sql语句。但因为没有。如果我点击它们，看看叫什么，我会看到很多这样的陈述：

```
8.70 ms 
Executing action: search — 7.70 ms
Executing action: search
T+23.7 ms
Reader
0.3 ms
app/models/car_search.rb:97:in `relation'
app/controllers/cars_search_controller.rb:102:in `pagination_relation'
app/controllers/cars_search_controller.rb:37:in `search'
app/controllers/controller_concerns/country_requesting.rb:66:in `select_database_shard'
lib/www_middleware.rb:11:in `call'
SELECT 1   
Executing action: search
T+25.8 ms
Reader
0.2 ms
app/models/car_search.rb:97:in `relation'
app/controllers/cars_search_controller.rb:102:in `pagination_relation'
app/controllers/cars_search_controller.rb:37:in `search'
app/controllers/controller_concerns/country_requesting.rb:66:in `select_database_shard'
lib/www_middleware.rb:11:in `call'
SELECT 1   
Executing action: search
T+26.8 ms
Reader
0.2 ms
app/models/car_search.rb:97:in `relation'
app/controllers/cars_search_controller.rb:102:in `pagination_relation'
app/controllers/cars_search_controller.rb:37:in `search'
app/controllers/controller_concerns/country_requesting.rb:66:in `select_database_shard'
lib/www_middleware.rb:11:in `call'
SELECT 1 
```

它就这样持续了 356 次。

我很困惑该怎么做。关于这可能是什么的任何线索？

更新：

car_search.rb 中的代码是一个非常繁重的方法，它构建了相关的查询。基本上它的作用与此类似：

```
def relation
  cars = Car.onsale # a scope that says .where(:sales_state => 'onsale')

  cars = cars.with_brand(brand) if brand.present? # a scope that says .where(:brand => 'some_brand')

  cars = cars.with_model_name(model_name) if model_name.present? # a scope that says .where(:model_name => 'some_model_name')

  return cars
end 
```

# linux - 如何在 XServer(Xorg) 中知道客户端是 2D 还是 3D

> ID：12143367
> 
> 赞同：1
> 
> 时间：2012-08-27T13:50:59.143
> 
> 标签：linux

在 X 窗口系统中，有没有办法知道任何特定的客户端是 2D 或 3D？XORG 端的任何结构都带有可以做出此决定的参数？

有一个结构 _Client 包含有关客户端的信息，但我不知道是否可以使用此结构的任何参数来做出此决定。

如果有人知道这一点，请提供帮助。

谢谢

# c# - 如何通过 TCP 连接到 http 代理？

> ID：12143369
> 
> 赞同：0
> 
> 时间：2012-08-27T13:51:03.697
> 
> 标签：c#, http, tcp, proxy, tcpclient

我试图弄清楚代理连接如何通过 TCP 工作。我首先下载[了 stacksoft 库](http://www.starksoft.com/prod_proxy.html)并在远程服务器上安装了 Squid 代理。

现在我正在尝试通过 c# TcpClient 连接到它。

连接由以下请求打开：

```
CONNECT proxyjudge.iathao.com:80 HTTP/1.1 
HOST proxyjudge.iathao.com 
```

失败并显示错误代码 400（我尝试了几种变体，它总是失败）：

```
HTTP/1.0 400 Bad Request
Server: squid/3.1.10
Mime-Version: 1.0
Date: Mon, 27 Aug 2012 13:25:54 GMT
Content-Type: text/html
Content-Length: 3295
X-Squid-Error: ERR_INVALID_REQ 0
Vary: Accept-Language
Content-Language: en
X-Cache: MISS from ****
X-Cache-Lookup: NONE ****:***
Connection: close

....

<h1>ERROR</h1>
<h2>The requested URL could not be retrieved</h2>
....

<div id="content">
<p><b>Invalid Request</b> error was encountered while trying to process the request:</p>

<blockquote id="data">
<pre>CONNECT proxyjudge.iathao.com:80 HTTP/1.1 
HOST proxyjudge.iathao.com

</pre>
</blockquote>

<p>Some possible problems are:</p>
<ul>
<li><p>Missing or unknown request method.</p></li>
<li><p>Missing URL.</p></li>
<li><p>Missing HTTP Identifier (HTTP/1.0).</p></li>
<li><p>Request is too large.</p></li>
<li><p>Content-Length missing for POST or PUT requests.</p></li>
<li><p>Illegal character in hostname; underscores are not allowed.</p></li>
<li><p>HTTP/1.1 <q>Expect:</q> feature is being asked from an HTTP/1.0 software.</p></li>
</ul> 
```

所以我用wireshark跟踪了firefox发送到同一台服务器的请求，它看起来像一个普通的get请求，看不到连接命令：

```
GET http://proxyjudge.iathao.com/ HTTP/1.1
Host: proxyjudge.iathao.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Proxy-Connection: keep-alive

======================================================

HTTP/1.0 200 OK
Date: Mon, 27 Aug 2012 13:34:39 GMT
Server: Apache
X-Powered-By: PHP/5.3.15
Content-Type: text/html
X-Cache: MISS from ****
X-Cache-Lookup: MISS from ****:****
Connection: close

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>AZ Environment variables 1.04</title>
</head>
<body>
<pre>
HTTP_USER_AGENT = Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
HTTP_HOST = proxyjudge.iathao.com
REQUEST_URI = /
HTTP_CONNECTION = keep-alive
REMOTE_PORT = 46153
HTTP_ACCEPT_LANGUAGE = en-us,en;q=0.5
HTTP_ACCEPT = text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
REMOTE_ADDR = ****
HTTP_CACHE_CONTROL = max-age=259200
HTTP_ACCEPT_ENCODING = gzip, deflate
REQUEST_METHOD = GET
REQUEST_TIME = 1346074479
</pre>
</body>
</html> 
```

我在任何地方都读到 CONNECT 是必要的，但在这里它会导致错误。如果不需要连接，我如何在受密码保护的代理上授权连接？

谁能推荐一篇关于这个主题的好文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:35:05.623

据我所知，您应该只向代理发出 CONNECT 命令并获得响应。不是主机命令。如果 OK，其他一切都应该是用于上游服务器的合法 HTTP。

# android - 改变ActionBar的方向

> ID：12143370
> 
> 赞同：6
> 
> 时间：2012-08-27T13:51:04.833
> 
> 标签：android, android-actionbar, right-to-left, android-menu

我在我的项目中使用 ActionBar。我想改变 ActionBar 项目的方向意味着在屏幕右侧定位选项卡图标和徽标，并在屏幕左侧定位菜单项。我用谷歌搜索，但没有找到任何有用的东西，我也阅读了 API 14 中主题和样式的 xml 资源，但我还是没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T17:26:32.010

操作栏现在支持从右到左的方向。它是在新的 API 级别 17 中通过添加引入的

> android:supportsRtl 属性添加到清单文件中的元素并将其设置为“true”

在这里查看有关从右到左管理布局的更多信息[RTL 布局支持](http://developer.android.com/about/versions/android-4.2.html#RTL)

# python - 在 Flask 框架中设置全局属性

> ID：12143373
> 
> 赞同：4
> 
> 时间：2012-08-27T13:51:25.187
> 
> 标签：python, flask

我正在使用 Flask/Python 开发一个小型 Web 项目。这是一个没有数据库的简单客户端应用程序。

我想将 REST 服务地址设置为全局属性，但还没有弄清楚如何做到这一点。

我知道可以像这样在 flask.config 中设置属性：

```
app = Flask(__name__)
app.config['attribute_name'] = the_service_address 
```

但蓝图模块无法访问“应用”对象。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:02:58.080

在请求上下文中（即在视图/处理程序中），您可以访问`current_app`

```
from flask import current_app
current_app.config['attribute_name'] 
```

# ruby-on-rails - 如何使用 Uglifier 和资产管道进行 JS 预处理？

> ID：12143374
> 
> 赞同：2
> 
> 时间：2012-08-27T13:51:25.950
> 
> 标签：ruby-on-rails, asset-pipeline, uglifyjs

我正在尝试做的（我不确定是否可能）是使用 UglifierJS 使用它的 AST 'mangle' 选项对象来预处理 JS 文件。有一个选项 {defines: { **DEVMODE** : true}} 可以传递给 UglifyJS：[https ://github.com/mishoo/UglifyJS#use-as-a-code-pre-processor](https://github.com/mishoo/UglifyJS#use-as-a-code-pre-processor)

与 Rails 一起使用的 Uglify GEM 基本上使用相同的，“定义”不应该是 GEM 实现的一部分，但我对其进行了硬编码以更改 gem 的几行，因此它将作为一个选项包含在内。

无论如何，关键是我如何在开发中使用预处理方法，那么资产管道以这种方式传递 JS 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:50:44.520

我向 Uglifier 添加了对定义的支持。它尚未发布，但您可以根据 git 上的最新版本使用。

宝石文件：

```
gem 'uglifier', :git => 'https://github.com/lautis/uglifier.git' 
```

使用已使用的定义实例化 Uglifier，例如

```
Uglifier.new(:define => {"DEVMODE" => true}) 
```

或者，在使用资产管道时，您可以将 erb 预处理器与 JS 代码一起使用。将您的文件命名为 something.js.erb 并编写如下代码

```
<% if Rails.env.development? %>
  console.log(debug)
<% end %> 
```

# visual-studio-2010 - 将 VS2012 解决方案转换为 VS2010

> ID：12143383
> 
> 赞同：127
> 
> 时间：2012-08-27T13:52:10.223
> 
> 标签：visual-studio-2010, visual-studio-2012

我正在使用 VS 2012 进行 VB 项目，完成后我尝试添加安装项目。

我没有找到它（因为安装项目在 VS2010 之后停止）所以我切换到 VS2010 但问题是项目无法打开并且我收到以下消息：

> 所选文件是解决方案文件，但由该应用程序的较新版本创建，无法打开。

我试过这篇文章： http: [//www.codeproject.com/Tips/80953/Converting-VS2010-Solution-to-VS2008](http://www.codeproject.com/Tips/80953/Converting-VS2010-Solution-to-VS2008) 并尝试从 2012 年转换为 2010 年，但出现相同的消息。

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-11-19T16:38:57.363

我也遇到了类似的问题。我用谷歌搜索但找不到解决方案。所以我自己尝试了，这是我的解决方案。

在记事本中打开您的解决方案文件。进行 2 处更改

1.  将“Format Version 12.00”替换为“Format Version 11.00”（不带引号。）
2.  将“#Visual Studio 2012”替换为“#Visual Studio 2010”（不带引号。）

希望这对你也有帮助............

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2013-01-28T10:43:36.810

只是为了详细说明 Bhavin 的出色答案 - 编辑解决方案文件有效，但如果您在 VS2012 项目中将 .NET 4.5 选为默认 .NET 版本并且您的 VS2010 环境没有，您可能仍然会遇到不兼容的错误（正如 David 报告的那样）支持那个。

要快速解决此问题，请在文本编辑器中打开 VS2012 .csproj 文件并将 TargetFrameworkVersion 更改为 4.0（从 4.5）。VS2010 将愉快地加载“编辑”的解决方案和项目。

您还必须以类似的方式编辑引用 .NET 4.5 的 app.config 文件，以允许它们在 .NET 4.0 环境中运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T17:23:00.653

我遇到了类似的问题，上面的解决方案都没有奏效，所以我选择了一个总是有效的旧备用：

1.  重命名包含项目的文件夹
2.  新建一个与2010同名的项目
3.  区分这两个文件夹和->
4.  直接复制所有源文件
5.  忽略 bin/debug/release 等
6.  区分 .csproj 并复制所有相关的行。
7.  如果 .sln 文件只有一个项目，请忽略它。如果它很复杂，那么也可以区分它。

如果您花了 10 分钟时间却无法获得它，这几乎总是有效的。

请注意，对于旧版本（2008、2005）的类似问题，您通常可以只更改 .csproj 中的版本并更改 .sln 中的版本或丢弃它，但这似乎不适用于 2013 .

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-27T05:30:44.057

最简单的解决方案是.....在 vs2013 中打开您的网站，然后转到 **Debug->WebsiteProperties**（最后一个选项）将打开一个新窗口..

在此窗口中，转到“构建”选项并将 .net 框架版本从 4.5 更改为 4.0 .....然后选择确定。[注意：此步骤仅在您的项目与 vs2013 没有依赖关系时才有效...]

现在在 vs2010 中打开你的网站

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T17:40:41.370

VS2012 支持VS2010 的解决方案。VS2010 不支持 VS2012 的解决方案 --> 只能单向升级。VS2012 不支持设置项目。在此处查找有关 VS2010/VS2012 兼容性的更多信息：http: [//msdn.microsoft.com/en-us/library/hh266747 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh266747(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-20T18:05:25.820

打开项目文件而不是解决方案。该项目将由向导转换，转换后，当您构建项目时，将生成一个新的解决方案，作为 VS2010 的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-22T13:52:02.980

对我有用的简单解决方案。

1.  为 windows 安装 Vim 编辑器。
2.  使用 Vim 编辑器打开 VS 2012 项目解决方案并修改针对 Visual Studio 解决方案 10 的版本。
3.  使用 Visual Studio 2010 打开解决方案.. 并继续您的工作；）

# c# - 检索 3D 模型上的纹理坐标？

> ID：12143392
> 
> 赞同：1
> 
> 时间：2012-08-27T13:52:44.617
> 
> 标签：c#, wpf, 3d, textures

是否可以检索对象的纹理坐标，例如通过命中测试？

举个例子：我在一个简单的平面上使用了一个1920x1080的纹理，如果我点击右下角，我想得到坐标1920、1080。（该模型实际上稍微复杂一些，因此尝试通过数学计算位置并不容易）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:35:18.880

当数学由于某​​些原因不起作用时，我曾经进行以下图形命中测试：为平面的每个纹素分配唯一的颜色，然后在禁用光照和效果的情况下对屏幕外表面进行一帧渲染，然后读取下面的像素颜色光标并将其值转换回坐标。当您不需要经常进行此类查找（例如游戏）时，这在复杂模型上非常有效，因为回读像素会停止图形硬件管道并消耗性能。此外，这可能适用于任何投影：正交或透视。

# c# - 如何在 C# 中将日期和时间拆分为数组？

> ID：12143393
> 
> 赞同：0
> 
> 时间：2012-08-27T13:52:44.793
> 
> 标签：c#

我有以下拆分 dd/mm/yy 的代码：

```
var ukDatea = a.split('/');
return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1; 
```

如何更改它以便我可以使用 dd/mm/yy hh:MM 然后将小时和分钟放入另一个名为 ukTime 的数组中？我的问题是我不确定如何分配剩余的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:56:30.753

首先与`var arr = a.Split(" ")`. 您现在在数组中有 dd/mm/yy 和 hh:MM。现在用于`arr[0].Split('/')`获取 dd mm 和 yy。对于时间使用`arr[1].Split(':')`，你会得到 hh 和 MM

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:00:14.980

有几种方法可以做到这一点：

*   首先在空格上拆分，然后在斜杠上拆分日期部分，在冒号上拆分时间部分。

*   使用正则表达式提取所有部分。

*   使用该`DateTime.ParseExact`方法将字符串解析为一个`DateTime`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:01:03.997

[DateTime](http://msdn.microsoft.com/library/vstudio/system.datetime.aspx)结构是您正在寻找的。

从包含日期的原始`a`字符串中，您可以创建一个 DateTime 结构：

```
DateTime MyDateTime;
dateTime = new DateTime();
dateTime = DateTime.ParseExact(a, "yyyy/MM/dd HH:mm",
                              null); 
```

MyDateTime 然后包含一个日期结构。然后您可以定义 ukDataa：

```
string[] ukDatea = new string[3] { dateTime.Day, dateTime.Month, dateTime.Year }; 
```

和

```
string[] ukTime - new string[2] { dateTime.Hour, dateTime.Minute }; 
```

# iphone - 核心数据与字典

> ID：12143401
> 
> 赞同：0
> 
> 时间：2012-08-27T13:53:18.057
> 
> 标签：iphone, ios, ipad, core-data, nsdictionary

在 NSDictionary 上使用对象查询 Key 与在 Core Data 上使用 Fetch Request 之间是否存在性能差异？以相同的方式存储它们有什么性能差异吗？

请注意，我只询问性能，而不是代码设计或组织。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:55:44.027

NSDictionary 完全存储在 RAM 内存中。核心数据可以存储在 SQLite 数据库中，这可能会导致您无法从 NSDictionary 中获得一些延迟。

# android - facebook注销中的NullPointer异常

> ID：12143402
> 
> 赞同：2
> 
> 时间：2012-08-27T13:53:23.023
> 
> 标签：android

有人可以帮我解决以下代码中的空指针异常吗

我有以下`FoodStarLoginActivity`。以下行抛出一个 NullPointer 但我不明白为什么：`facebook.logout(FoodStarLoginActivity.this);`有人可以帮助我吗？我什至尝试`getApplicationcontext()`代替我的`FoodStarLoginActivity`，但没有奏效。

```
I am getting following exception  :
java.lang.NullPointerException
at android.context.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
at android.webkit.CookieSyncManager.createInstance(CookiesSyncManager.java:96)
at com.facebook.android.Util.clearCookies(Util.java:241)
at com.facebook.android.Facebook.logout(Facebook.java:617)
at ten.mob.socialapp.FoodStarLoginActivity.logout(FoodStarLoginActivity.java:131) 
```

* * *

```
package ten.mob.socialapp;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;

import ten.mob.socialapp.FacebookConnector;
import ten.mob.socialapp.SessionEvents;
import ten.mob.socialapp.FacebookConnector.LogoutRequestListener;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

public class FoodStarLoginActivity extends Activity{

    private static final String faceBookAppId = "*******************";
    private static final String faceBookPermission = "publish_stream";
    static Facebook facebook = new Facebook(faceBookAppId);
    private SharedPreferences mPrefs;
    FacebookConnector facebookConnector ;
    AsyncFacebookRunner asyncRunner;
    private Handler mHandler = new Handler();
    Context context;
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null){
            facebook.setAccessToken(access_token);
        }
        if(expires != 0){
            facebook.setAccessExpires(expires);
        }
        if(!facebook.isSessionValid()){
            facebook.authorize(this, new DialogListener(){
                @Override
                public void onComplete(Bundle values){
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();
                }
                @Override
                public void onFacebookError(FacebookError error){}
                @Override
                public void onError(DialogError e){}
                @Override
                public void onCancel(){}
            });
        }
        if(facebook.isSessionValid()){
            Intent intent = new Intent(this,SearchMyActivity.class);
            startActivity(intent);
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data){
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    public void logout(){
        try {
            facebook.logout(FoodStarLoginActivity.this);
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        asyncRunner = new AsyncFacebookRunner(facebook);
        System.out.println(asyncRunner);
        asyncRunner.logout(FoodStarLoginActivity.this, new LogoutRequestListener() {
            public void onComplete(String response, Object state) {}

            public void onFileNotFoundException(FileNotFoundException e,Object state) {}

            public void onFacebookError(FacebookError e, Object state) {}
        });
        System.out.println(asyncRunner);
        System.out.println(facebook.isSessionValid());
    }

    private class LogoutRequestListener implements RequestListener {
        public void onComplete(String response, Object state) {
            mHandler.post(new Runnable() {
                public void run() {
                    SessionEvents.onLogoutFinish();
                }
            });
        }
        public void onIOException(IOException e, Object state) {}
        public void onFileNotFoundException(FileNotFoundException e,Object state) {}
        public void onMalformedURLException(MalformedURLException e,Object state) {}
        public void onFacebookError(FacebookError e, Object state) {}
    }
}

public class SearchMyActivity(){

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()){
        case R.id.menu_create:
            Intent intent = new Intent(this, CreateRestaurantActivity.class);
            startActivity(intent);
            break;
        case R.id.menu_foodstars:
            intent = new Intent(this, RestaurantList.class);
            startActivity(intent);
            break;
        case R.id.menu_logout:
            FoodStarLoginActivity logoutFoodStar = new FoodStarLoginActivity();
            logoutFoodStar.logout();
            break;
        default: 
            return super.onOptionsItemSelected(item);
        }
        return true;
    }

} 
```

# objective-c - 移动图层后在 CAShapeLayer.path 上使用 CGPathContainsPoint

> ID：12143409
> 
> 赞同：0
> 
> 时间：2012-08-27T13:53:42.970
> 
> 标签：objective-c, cgpath, cashapelayer

使用 CGPathContainsPoint 时，我的结果与 CAShapeLayer 的原始位置一致，但与当前位置不一致。这是正常的吗，我是否需要在我正在测试的 CGPoint 上应用转换，或者我应该在代码的其他地方寻找问题？我的 CAShapeLayer 只是通过一次更新它的 .position 属性来移动的。

为了完整起见，我补充说我的 CAShapeLayer 是 UIButton.layer 的子层。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:08:38.707

为了回答我自己的问题，我需要使用以下方法将触摸点的位置（在 UIButton 的坐标空间中）转换为 CAShapLayer 的坐标空间：

```
CGPoint convertedTouchPoint = [myButton.layer convertPoint:touchPoint toLayer:myShapeLayer]; 
```

# php - cakephp 从选择行为插入

> ID：12143410
> 
> 赞同：0
> 
> 时间：2012-08-27T13:53:51.097
> 
> 标签：php, mysql, cakephp

是否有一种“蛋糕”方式来重现 mysql“从选择中插入”行为？我想从一个模型中获取值并插入另一个模型，而不将所有数据检索到我的应用程序，因为有大量数据的表会导致内存限制错误。

```
Ex: $this->model1->saveAll($this->model2->find()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:51:44.113

仅使用 Cake 语法是无法实现的。最好的方法是使用[$this->model->query()](http://book.cakephp.org/1.3/view/1027/query)并在里面编写你自己的查询。

# asp.net-mvc - MVC3 Razor - 格式化字符串集合

> ID：12143415
> 
> 赞同：0
> 
> 时间：2012-08-27T13:54:22.407
> 
> 标签：asp.net-mvc, razor

我有一组在 MVC3 Razor 中重复的字符串，代码如下：

```
 @if (Model.Publications != null)
        {
            <tr>
                <th>Publications</th>
                <td>
                    @foreach (var publication in @Model.Publications)
                    {
                        <text>@publication.Title</text>
                    }
                </td>
            </tr>
        } 
```

现在，当我显示这个时，我得到的只是：

```
Book1Book2Book3 
```

但我真正想要的是这样的：

```
Book1, Book2, Book3 
```

MVC razor 中是否有一种简单的方法来实现这一点，而无需结合“if”和“foreach”语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:57:27.120

```
string.Join(", ", model.Publications.Select(pub => pub.Title).ToArray()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T13:57:35.683

```
@string.Join(",",Model.Publications.Select(p=>"<text>"+ p.Title+ "</text>")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:58:40.413

```
@if (Model.Publications != null)
        {
            <tr>
                <th>Publications</th>
                <td>
                    @var first = true
                    @foreach (var publication in @Model.Publications)
                    {
                        <text>@string.format("{0}{1}", first ? "" : ", ",  publication.Title)</text> 
                        @first = false;
                    }
                </td>
            </tr>
        } 
```

# apache-flex - Adobe Flex：如何将 UID 转换为十六进制字符串？

> ID：12143418
> 
> 赞同：0
> 
> 时间：2012-08-27T13:54:34.437
> 
> 标签：apache-flex, actionscript, hex, guid, uid

我需要将像'ff5ac81c-fc51-9442-b993-60cff48c6b39'这样的UID转换为Flex中的十六进制字符串。在 C# 中，我可以使用如下格式参数：

```
public static string GuidToHex(Guid guid) {
    return ByteToHex(guid.ToByteArray());
}

public static string ByteToHex(byte[] bytes) {
    StringBuilder sb = new StringBuilder(bytes.Length * 2);
    foreach (byte b in bytes) {
        sb.AppendFormat("{0:x2}", b);
    }
    return sb.ToString().ToUpper();
} 
```

我怎样才能在动作脚本中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:06:41.430

在 MSDN 中我找不到任何东西，有什么可以帮助我的。在另一页上，我发现了一个将字节数组转换为十六进制字符串的示例。我不得不对其进行一些修改，但现在它可以工作了：

```
import flash.utils.ByteArray;

import mx.collections.ArrayCollection;
import mx.utils.UIDUtil;

public class RawTypeUtil
{

    private static const hexValues:Array = [ '0', '1', '2', '3', '4', '5', '6', '7',
                                             '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' ];

    private static const convertSequence:ArrayCollection = new ArrayCollection([ 3, 2,
                                                             1, 0, 5, 4, 7, 6, 8, 9,
                                                             10, 11, 12, 13, 14, 15 ]);

    public function RawTypeUtil(lock:Class)
    {
        if (lock != RawTypeUtilLock)
        {
            throw new Error("Invalid RawTypeUtil access.");
        }
    }

    public static function guidToHex(guid:String) : String
    {
        // the UIDUtil expects an uppercase uid...
        guid = guid.toUpperCase();
        if (!UIDUtil.isUID(guid))
        {
            return null;
        }

        var bytes:ByteArray = UIDUtil.toByteArray(guid);
        var hex:String = "";

        var byteArray:ArrayCollection = new ArrayCollection();
        for (var i:uint = 0; i < bytes.length; i++)
        {
            var byte:uint = bytes.readUnsignedByte();
            byteArray.addItem(byte);
        }

        for (var j:uint = 0; j < convertSequence.length; j++)
        {
            var index:uint = convertSequence.getItemAt(j) as uint;
            var value:uint = byteArray.getItemAt(index) as uint;
            var l:int = value / 16;
            var r:int = value % 16;
            hex += hexValues[l] + hexValues[r];
        }

        return hex;
    }
} 
```

我不知道为什么我必须更改 ByteArray 转换为正确格式的前 4 个字节、第 5 和第 6 以及第 7 和第 8 个字节的顺序。我希望有人可以向我解释。

# android - Android webview 看起来与 PC 浏览器不同

> ID：12143419
> 
> 赞同：-1
> 
> 时间：2012-08-27T13:54:40.353
> 
> 标签：android, android-webview, webviewclient

我在 Android webview 中加载了具有 js 表单资产的 html 内容。但是它在 Android webview 和 PC 浏览器中的外观有很大差异。我也启用了 loadjavascript 并使用了 weviewclient 但仍然有区别。请提出问题所在。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:02:08.587

Android 浏览器可能会以不同于 PC 浏览器的方式绘制内容或解释 JavaScript。

每个浏览器都有不同的 javascript 实现。您可能可以通过使用 jQuery 或类似的东西来解决这个问题。

Android 可能会以不同的方式绘制一些元素，以使它们更适合小屏幕。

此外，CSS 并非在所有浏览器中都以相同的方式工作。

# clearcase - 无法撤消变基流

> ID：12143425
> 
> 赞同：1
> 
> 时间：2012-08-27T13:55:12.333
> 
> 标签：clearcase, clearcase-ucm

我们试图重新定位我们的流。

单击完成后，我们遇到了一些问题，例如某些东西已损坏。[对不起我的同事没有截取错误的截图]

我们试图重做变基操作。

它说无法收集有关视图的信息

当我们尝试撤消变基时，我们得到了以下错误。

* * *

```
Rebase Stream
---------------------------
Error cancelling rebase of stream 'IELoc--Dev100'.

Integration activity change set is not empty.

---------------------------
OK 
--------------------------- 
```

现在如何完成或撤消变基？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:12:03.883

如果您正在取消，则没有回头路：您必须一直进行到完成“取消”操作。

技术说明“ [Rebase failed with error: integration activity change set is not empty](http://www-01.ibm.com/support/docview.wss?uid=swg21179696) ” 可以提供一些元素来解决这种情况。
当在 rebase 期间完成了其他*外部*操作时，可能会出现问题：`cleartool rmver`例如，a（删除版本）将非常危险。

取消（交付或变基）的想法是取消**签**出以前签出的所有版本以便合并。您需要确保所有这些版本都可以签出：有时正确的问题可以阻止`unco`，有时，版本已经签*入*。

现在，如果与 rebase 关联的活动实际上是空的，则有一个名为 'ucmutil' 的实用程序可以重置 rebase 状态，使其“消失”。
但这应该谨慎使用，并在 IBM Rational Support 的监督下使用。
请参阅“[取消 UCM rebase 失败并出现错误：cleartool: Error: Rebase in progress on stream](http://www-01.ibm.com/support/docview.wss?uid=swg21146614) ”和“[关于 ucmutil](http://www-01.ibm.com/support/docview.wss?uid=swg21237620) ”。

# jquery - jquery ajax 只有在没有服务器托管的情况下才能正常工作

> ID：12143426
> 
> 赞同：0
> 
> 时间：2012-08-27T13:55:12.427
> 
> 标签：jquery, ajax

我有以下代码：

```
$('span').click(function () {
    $.ajax({
        url: $(this).attr('class'),

        success: function (data) {
           $('#articleContent').html($(data).find('p').html());

        }
    });

}); 
```

当我通过文件系统访问页面时，它工作正常当`file:///...`
我想共享该页面并通过 IIS express 托管它时发生问题（我只是将页面目录复制到其他 aspx 页面文件夹目录中），然后成功函数触发但`data.html()`返回 null。

你有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:24:01.373

IIS 域是否与托管 JS 的域不同，因为如果是，同源策略将阻止您完成此操作。鉴于您描述的情况，我认为这是您的问题。

同源策略是防止 XSS 的安全限制。据说有使用服务器端的解决方法。

也许如果你澄清了你的目标，我可以更详细地帮助你？

# c# - 不能将 .length 属性与 IronJS 和 ArrayObject 一起使用

> ID：12143437
> 
> 赞同：3
> 
> 时间：2012-08-27T13:55:47.230
> 
> 标签：c#, javascript, .net, ironjs

我正在使用 IronJs 的最新版本 (0.2.0.1)，并且我的 js 脚本没有正确检索已使用 IronJs.Runtime.ArrayObject 设置为 js 引擎的数组的长度。但是，我的变量被很好地识别为数组，如下面的 C# 代码所示。

```
var jsCode = @"myArray.length;";
var javascriptEngine = new IronJS.Hosting.CSharp.Context();
var array = new ArrayObject(javascriptEngine.Environment, 2);//array of size 2
array.Put(0, 12.0);//mock values
array.Put(1, 45.1);

javascriptEngine.SetGlobal<ArrayObject>("myArray", array);

var result = javascriptEngine.Execute(jsCode);
Console.WriteLine(result);

var jsCode2 = @"myArray instanceof Array;";
var result2 = javascriptEngine.Execute<bool>(jsCode2);
Console.WriteLine(result2); 
```

我们得到以下输出

```
undefined
True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:52:24.683

这是 IronJS 运行时的一个错误。您应该在适当的 GitHub 存储库中打开一个问题：[https ://github.com/fholm/IronJS/](https://github.com/fholm/IronJS/)

一种解决方法是强制重新分配整个阵列。在这种情况下，该`.length`属性似乎已正确设置。实现此目的的一种骇人听闻的方法是**创建一个小于所需`ArrayObject`**的值（例如 0 大小`ArrayObject`），然后在其中放入一些值。以下测试通过：

```
 [TestMethod]
    public void TestWithZeroSizedArray()
    {
        string jsCode = @"myArray.length;";
        var javascriptEngine = new IronJS.Hosting.CSharp.Context();
        var array = new ArrayObject(javascriptEngine.Environment, 0); // Creates a 0-sized Array
        array.Put(0, 12.0);
        array.Put(1, 45.1);

        javascriptEngine.SetGlobal<ArrayObject>("myArray", array);

        var result = javascriptEngine.Execute(jsCode);
        Assert.AreEqual(2, result);
    } 
```

请记住，底层 .NET 数组的多次复制/重新分配将导致性能问题。

# ruby - 用 Jenkins 设置 Rake？

> ID：12143440
> 
> 赞同：0
> 
> 时间：2012-08-27T13:56:20.330
> 
> 标签：ruby, testing, logging, jenkins, rake

我如何向 Jenkins 报告单个任务或 rake 文件的步骤？

我想要尽可能多的关于每个子任务的信息。

# ruby-on-rails - centos 6的nginx 408错误

> ID：12143455
> 
> 赞同：0
> 
> 时间：2012-08-27T13:57:20.770
> 
> 标签：ruby-on-rails, nginx, centos, unicorn, centos6

我们有一个负载均衡器设置，后面有几个运行 nginx/unicorn/rails 的 centos 盒子。

我注意到我们只在 centos6 机器上看到 408 错误，而 centos5 服务器很好。所有机器上的 nginx 和 /proc 配置都是相同的。

我知道这些连接是由现代浏览器创建的。我只是想找出为什么我们只在 centos6 上获得那些 408er。有任何想法吗？

```
23.135.172.241 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip11:443 60.000 -
23.135.172.241 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip12:443 60.000 -
15.144.213.171 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip11:443 60.000 -
19.195.246.143 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip12:443 60.000 -
19.195.246.143 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip11:443 60.002 -
3.228.140.241 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip39:443 60.000 -
15.60.229.52 - - [27/Aug/2012:13:45:21 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip39:443 60.000 -
7.48.175.3 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip37:443 60.000 -
2.160.154.89 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip12:443 60.000 -
4.104.120.184 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip12:443 60.000 -
11.1.52.25 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip39:443 60.000 -
16.81.34.95 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip12:443 60.000 -
19.200.6.58 - - [27/Aug/2012:13:45:22 +0000] "-" 408 0 "-" "-" foo.bar.com 50.me.ip37:443 60.000 - 
```

# android - 只有“内圆角”的形状

> ID：12143460
> 
> 赞同：2
> 
> 时间：2012-08-27T13:57:45.873
> 
> 标签：android

这是我的应用程序现在的样子的屏幕截图：

[http://www.abload.de/image.php?img=unbenannt4kqjb.png](http://www.abload.de/image.php?img=unbenannt4kqjb.png)

这是灰色形状的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:top="0dp"
    android:bottom="0dp"
    android:left="0dp"
    android:right="0dp" >

    <shape
        android:shape="rectangle" >

        <stroke 
            android:width="8dp" 
            android:color="#9b9c9c" /> 

        <padding 
            android:left="13dp" 
            android:top="13dp" 
            android:right="13dp" 
            android:bottom="13dp" /> 

        <corners
            android:radius="10dp"
            android:topLeftRadius="0dp"
            android:bottomRightRadius="0dp" />

        <solid 
            android:color="@android:color/background_light" />

    </shape>

</item> 
```

正如您在屏幕截图中看到的那样，右上角和左下角仍然是白色的。好的，我用红色标记了它，这样更容易识别。我想用与灰色形状相同的灰色给这件红色的东西上色，这样就只有一个“内圆角”。我希望你明白我的意思。

我通过将其设置为布局的背景来包含形状。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:07:03.260

好吧，其实很简单：

我唯一要做的就是添加另一个布局，用形状的背景颜色将旧布局包围起来。

这就是布局现在的样子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#9b9c9c"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/background_shape"
        android:orientation="vertical" >
...
    </LinearLayout>
</LinearLayout> 
```

# android - 将 Context 从主 Activity 传递给另一个类

> ID：12143463
> 
> 赞同：1
> 
> 时间：2012-08-27T13:57:50.833
> 
> 标签：android, android-context

这可能是错误的解决方法，所以请告诉我是否是这种情况：

我正在尝试在另一个类中使用 getFileStreamPath （据我所知，它是从 Context 派生的）将一些代码与主活动类分开。我通过将主要活动的上下文传递给另一个类，并使用它来调用它的方法来做到这一点。

在我的主要活动课上：

```
LocalStorage lc = new LocalStorage(this); 
```

然后，在另一个班级：

```
public class LocalStorage {
    Context ctx;

    public LocalStorage (Context c) {
        c = ctx;
        File lfile = ctx.getFileStreamPath("Activity.log");

    .... 
```

但显然我遗漏了一些东西，因为在 LocalStorage 类中传递的上下文上运行 getFileStreamPath 会导致 NullPointerException。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T14:00:06.980

你有你的变量倒退。

```
c = ctx; 
```

应该

```
ctx = c; 
```

您将 uninitialized 分配给`Context` `ctx`传入的`Context` `c`，因此它将始终为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:00:41.607

你不是打错字了吗？

```
public LocalStorage (Context c) {
    ctx = c;
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:02:20.613

c = ctx ???

```
Context ctx;

public LocalStorage (Context c) {
    c = ctx; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:59:20.737

很难知道您的代码中的错误是什么，我们错过了信息。但看起来你正在以正确的方式传递上下文。所以问题就解决了。

# c# - 使用 PDFSharp 创建多个页面

> ID：12143465
> 
> 赞同：2
> 
> 时间：2012-08-27T13:57:54.580
> 
> 标签：c#, pdf, printing, pdfsharp

嗨，我正在使用 PDFSharp 为某些图表创建 PDF 文档。将我的图表转换为 PDF 后，我应该将它们打印在一个页面上以获得非常小的图表，但是如果我有大图表，那么将它们打印在一页上会产生不好的打印质量，图表将显示很小并且图表内容不可读. 如果我给出一个高比例，图表会显示得更大，但一些节点会消失。

那么如何创建更多取决于我的比例和图表大小的页面？

```
private void convertBitmap(BitmapSource Img)
{
  try
  {
     PdfSharp.Pdf.PdfDocument document = new PdfSharp.Pdf.PdfDocument();
     document.Info.Title = activeDiagram.Model.Name;
     PdfSharp.Pdf.PdfPage pdfPage = document.AddPage();
     XGraphics gfx = XGraphics.FromPdfPage(pdfPage);
     XImage xIMage = XImage.FromBitmapSource(Img);
     XImage logo = XImage.FromFile("logo.png");
     pdfPage.Width = xIMage.PointWidth;
     pdfPage.Height = xIMage.PointHeight;
     //draw the logo
     gfx.DrawImage(xIMage, 15, 70, pdfPage.Width, pdfPage.Height);
     gfx.DrawImage(logo, 500, 5);
     // Draw the texts
     string typ = "";
     if (activeDiagram == myDiagram1)
         typ = "EPC";

     XFont font = new XFont("Arial", 12, XFontStyle.Bold);
     XFont font2 = new XFont("Arial", 10, XFontStyle.Bold);
     gfx.DrawString("Modelname: " + activeDiagram.Model.Name, font, XBrushes.Black, 
                     new XRect(50, 5, 400, 20), XStringFormats.TopLeft);
    gfx.DrawString("Modeltyp: " + typ, font, XBrushes.Black, new XRect(50, 25, 400, 
                    20), XStringFormats.TopLeft);
    gfx.DrawLine(new XPen(XColor.FromKnownColor(XKnownColor.CornflowerBlue), 2), 20, 
                    45, 600, 45);

   gfx.DrawLine(new XPen(XColor.FromKnownColor(XKnownColor.CornflowerBlue), 2), 20, 
                    900, 600, 900);
   gfx.DrawString("Date: " + DateTime.Now.ToShortDateString(), font2, XBrushes.Black, 
                    new XRect(50, 905, 100, 25), XStringFormats.TopLeft);
   gfx.DrawString("Page: 1 von 1 ", font2, XBrushes.Black, new XRect(530, 905, 100, 
                25), XStringFormats.TopLeft);

    SaveFileDialog dlg = new SaveFileDialog();
    lg.FileName = activeDiagram.Model.Name;
    dlg.AddExtension = true;
    dlg.DefaultExt = "pdf";
    dlg.Filter = "PDF Document|*.pdf|*.pdf|";
    if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
                // Save the document...
                string filename = dlg.FileName;
                document.Save(filename);
                // ...and start a viewer.
                Process.Start(filename);
            }
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.Message, "Error saving graph as a 
             pdf");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:22:22.017

使用 PDFsharp 创建多个页面很简单 - 但 PDFsharp 不准备将您的位图分布在多个页面上，因此这项任务留给您。

根据位图的大小，您的代码应该决定将图像分成两部分或四部分，然后将它们绘制在两页或四页上。这样您就不必依赖打印机驱动程序的功能。

PDFsharp 可以创建更大的页面 - 但是您必须依靠打印机驱动程序的功能将单个 PDF 页面打印到多个物理页面上。这可能会也可能不会。

如果您自己拆分图像，您可以完全控制输出的 PDF 文件。我建议使用公共（重叠）条打印两个或四个段。

# ruby - 在拆分字符串结果中匹配子集模式

> ID：12143468
> 
> 赞同：0
> 
> 时间：2012-08-27T13:58:04.483
> 
> 标签：ruby, jekyll, liquid, jekyll-extensions

对我来说，这是一个更复杂的：

我有这样的内容被拉进一个 jekyll 帖子：

```
# Lorem ipsum dolor sit amet.
Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore.
~
# Et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation.
~
# Ullamco laboris nisi.
Ut aliquip ex ea commodo consequat.
~ 
```

我将其拉入我的布局中，如下所示：`{{ post.content | jekreged: 1 | markdownify }}`

Jekreged 是我编写的一个自定义液体插件，它根据 拆分内容`~`，然后指定要包含的部分。布局需要撕开这样的帖子。

我正在尝试对此进行调整，然后运行我可以从液体标签中专门调用的匹配命令的子集。

这是我正在尝试排除故障的示例（也是不工作的示例）。

```
module Jekyll
  module AssetFilter
    def jekreged(input, chunk)
      drugs = input.split("~")[chunk]
      title = (drugs).match(/^#{1}.+$/)
      jekreged = "#{title}"
    end
  end
end

Liquid::Template.register_filter(Jekyll::AssetFilter) 
```

我没有得到任何输出。理想情况下，我希望能够将“标题”指定为液体标签的参数，但我不确定如何将其连接到插件中。

远程版本我会有类似 title = regmatch for title, body = ..., img = ...

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:50:06.250

对它进行了尝试（将来，一些示例输入/输出将有很长的路要走）。

```
module Jekyll
  module AssetFilter
    def jekreged(input, matcher)
      titles = input.split("\n~\n").select { |title| title.include? matcher }
      if titles.size > 1
        raise "Can't determine title from #{matcher.inspect}, found #{titles.inspect}"
      elsif titles.size.zero?
        raise "#{matcher.inspect} didn't match any of #{titles.inspect}"
      end
      titles.first
    end
  end
end

describe 'jekreged' do
  include Jekyll::AssetFilter
  let(:titles) { <<-TITLES.gsub /^  /, "" }
  # Lorem ipsum dolor sit amet.
  Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore.
  ~
  # Et dolore magna aliqua.
  Ut enim ad minim veniam, quis nostrud exercitation.
  ~
  # Ullamco laboris nisi.
  Ut aliquip ex ea commodo consequat.
  ~
  TITLES

  it 'finds the title that has the string in it' do
    jekreged(titles, "Consectetur" ).should == "# Lorem ipsum dolor sit amet.\nConsectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore."
    jekreged(titles, "minim veniam").should == "# Et dolore magna aliqua.\nUt enim ad minim veniam, quis nostrud exercitation."
    jekreged(titles, "aliquip"     ).should == "# Ullamco laboris nisi.\nUt aliquip ex ea commodo consequat."
  end

  it 'raises an error if there is more than one title that matches' do
    expect { jekreged titles, 'Ut' }.to raise_error /Can't determine title/
  end

  it 'raises an error if there are no titles that match' do
    expect { jekreged titles, 'asdfasdfasdf' }.to raise_error /didn't match/
  end
end 
```

# spring - 当表映射使用其他数据库时，如何创建内存测试数据库？

> ID：12143469
> 
> 赞同：1
> 
> 时间：2012-08-27T13:58:03.500
> 
> 标签：spring, hibernate, jpa, hsqldb, dbunit

我正在尝试为使用 Spring 和 JPA（使用 Hibernate）的应用程序创建一些测试。

我想使用内存数据库，这样我就可以检查一切是否正常，而不必依赖主开发服务器（这是一个旧的 Sybase 安装），并且还可以让我更好地隔离测试功能。

问题是，有很多表被映射`@Table("dbname..dbo.someviewname")`用于访问其他数据库的视图。因此，我试图将 HSQLDB 与 DBunit 一起使用，但可以理解的是，HSQLDB 不允许创建名称中带有点的表。

我怎样才能对此进行测试？

我是否应该放弃内存中的东西并使用主 Sybase 开发服务器进行测试（冒着毁掉其他开发人员的风险：P）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:37:24.527

从`dbname.dbo.someviewname`HSQLDB 可能提取`dbname`为目录、`dbo`模式和`somewiewname`表名。

HSQLDB 确实允许创建名称中带有点的表。这可以通过将表名视为分隔标识符来完成：

```
@Table(name="\"dbname.dbo.someviewname\"") 
```

但是您不想使用它，因为 Sybase 的名称处理方式也发生了变化。如果您可以有单独的 orm.xml 用于测试，那么您可以在 orm.xml 中添加以下内容：

```
 <persistence-unit-defaults>
        <delimited-identifiers/>
    </persistence-unit-defaults> 
```

它使所有数据库对象名称都被视为分隔标识符。根据您的映射和查询，它最终可以工作，但很可能您会遇到一些问题。可能最好的方法是在映射和/或单独的 Sybase 实例中不使用模式名称进行测试。

# javascript - EmberJS 无法找到视图异常

> ID：12143478
> 
> 赞同：1
> 
> 时间：2012-08-27T13:58:47.230
> 
> 标签：javascript, ember.js

我无法理解 EmberJS 的问题

问题可以在 jsfiddle 中找到：http: [//jsfiddle.net/wLKKQ/](http://jsfiddle.net/wLKKQ/)

JS：

```
var fileUploader = [] || fileUploader;
fileUploader.app = Em.Application.create();

fileUploader.app.userDetailsView = Em.View.create({
    clientIP: null
});​ 
```

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <script type="text/x-handlebars">
        {{#view fileUploader.app.userDetailsView}}
            <h2>Hello Guest, your IP is: {{clientIP}}</h2>
        {{/view}}
    </script> 
    <script>
        $(function () {
            fileUploader.app.userDetailsView.set('clientIP', '::1');
        });
    </script>
</body>
</html> 
```

我收到以下错误：

> 未捕获的错误：断言失败：无法在路径“fileUploader.app.userDetailsView”中找到视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:20:57.413

您的代码中有几个问题。

*   Ember.Application 应位于大写名称空间中（请参阅[Emberist 博客](http://www.emberist.com/2012/04/09/naming-conventions.html)）。
*   您必须将视图类传递给 #view 助手，而不是实例（因此您必须替换`Ember.View.create`为`Ember.View.extend`.
*   您编辑的脚本`clientIP`不起作用，因为现在`FileUploader.app.userDetailsView`是一个类。您可以使用`didInsertElement`Ember.View 方法做同样的事情。
*   在您的模板中，您必须`view.clientIP`根据[View Context Changes](https://gist.github.com/2494968)指定。

现在[这个 JSFiddle 工作](http://jsfiddle.net/rNTde/)：

```
FileUploader = [] || fileUploader;
FileUploader.app = Em.Application.create();
FileUploader.app.userDetailsView = Em.View.extend({
    clientIP: null,

    didInsertElement: function() {
        this.set("clientIP", "::1");
    }
});​ 
```

的HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <script type="text/x-handlebars">
      {{#view FileUploader.app.userDetailsView}}
         <h2>Hello Guest, your IP is: {{view.clientIP}}</h2>
      {{/view}}
    </script> 
</body>
</html> 
```

# c# - 如何保存用户选择的最后一个文件夹？

> ID：12143484
> 
> 赞同：2
> 
> 时间：2012-08-27T13:58:55.607
> 
> 标签：c#, folderbrowserdialog

我有这个，这只保存用户关闭应用程序并重新打开它时使用的最后一个文件夹。

```
private void btnBrowse_Click(object sender, EventArgs e)
{
     Properties.Settings.Default.Reload();

     fbFolderBrowser.SelectedPath = AppVars.LastSelectedFolder;

     if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
     {
          Properties.Settings.Default.LastSelectedFolder = fbFolderBrowser.SelectedPath.ToString();
          Properties.Settings.Default.Save();
     }
} 
```

每次用户选择一个文件夹时，我都想保存该路径。然后，当他再次单击浏览按钮时，我希望默认路径成为他的最后选择。

以上不起作用。它只保存最后选择的路径，只有在我重新启动应用程序时才会返回。我将如何在同一个应用程序会话中保存最后一条路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:02:54.123

您需要重新加载设置：

```
Properties.Settings.Default.Reload(); 
```

请注意，这仅在未在调试模式 (AFAIK) 下运行时有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T01:34:22.000

我将在这里发布我的代码，因为我所看到的答案都没有解决所有问题。这将保存位置并重新加载文件浏览对话框的设置（获取路径时文件和文件夹浏览对话框略有不同）......上面的答案似乎仅适用于会话（？）。使用新方法进行了更新，以避免配置设置因更新 clickonce 应用程序而丢失...

代码：

```
public class ConfigSettingsDictionary
    {
        public Dictionary<String, String> ConfigSettings = new Dictionary<String, String>();
    }
    ConfigSettingsDictionary MyConfigurationSettings = new ConfigSettingsDictionary();

private void SaveConfig()
    {
        using (System.IO.StreamWriter sw = new System.IO.StreamWriter(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\YOUR_APP_NAME_PLUS_UNIQUE_VALUE.config"))
        {

            foreach (var pair in MyConfigurationSettings.ConfigSettings)
            {
                sw.WriteLine(pair.Key + "=" + pair.Value);
            }
        }

    }
    private void LoadConfig()
    {

        if (System.IO.File.Exists(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\YOUR_APP_NAME_PLUS_UNIQUE_VALUE.config"))
        {
            var settingdata = System.IO.File.ReadAllLines(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\YOUR_APP_NAME_PLUS_UNIQUE_VALUE.config");
            for (var i = 0; i < settingdata.Length; i++)
            {
                var setting = settingdata[i];
                var sidx = setting.IndexOf("=");
                if (sidx >= 0)
                {
                    var skey = setting.Substring(0, sidx);
                    var svalue = setting.Substring(sidx + 1);
                    if (!MyConfigurationSettings.ConfigSettings.ContainsKey(skey))
                    {
                        MyConfigurationSettings.ConfigSettings.Add(skey, svalue);
                    }
                }
            }
        }

    }
    private void UpdateConfig(Dictionary<String, String> keyvaluepairs)
    {

        foreach (var pair in keyvaluepairs)
        {
           if (!MyConfigurationSettings.ConfigSettings.ContainsKey(pair.Key))
           {
               MyConfigurationSettings.ConfigSettings.Add(pair.Key, pair.Value);
           }
           else
           {
               MyConfigurationSettings.ConfigSettings[pair.Key] = pair.Value;
           }
        }

    } 
```

然后我像这样使用它（这会保存在文件浏览对话框中选择的文件夹以及选择的文件）：

```
 string lastused = "";

        if (MyConfigurationSettings.ConfigSettings.ContainsKey("openFileDialog2_last_used"))
        {
          MyConfigurationSettings.ConfigSettings.TryGetValue("openFileDialog2_last_used", out lastused);
        }

        if (lastused != "")
        {
            openFileDialog2.InitialDirectory = lastused;
        }
        else
        {
            openFileDialog2.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        }

        string filestring = "";
        if (template_filename == "")
        {
            try
            {
                if (openFileDialog2.ShowDialog() == DialogResult.OK)
                {

                    filestring = openFileDialog2.FileName;
                    String chosenPath = Path.GetDirectoryName(openFileDialog2.FileName);
                    Dictionary<String, String> settings_to_save = new Dictionary<String, String>();

                    settings_to_save.Add("openFileDialog2_last_used", chosenPath);
                    settings_to_save.Add("openFileDialog2_last_used_template_file", filestring);
                    UpdateConfig(settings_to_save);
}
         else return;

            }
            catch (Exception ex)
            {
                MessageBox.Show("There was an error.", "Invalid File", MessageBoxButtons.OK);
                return;
            }
private void YOURFORMNAME_Load(object sender, EventArgs e)
    {
// Load configuration file          
LoadConfig();
    }
 private void YOURFORMNAME_FormClosing(object sender, FormClosingEventArgs e)
    {
// Save configuration file
        SaveConfig();
    } 
```

# iphone - 在iOS中将蒙版应用于图层后如何捕获屏幕？

> ID：12143487
> 
> 赞同：1
> 
> 时间：2012-08-27T13:59:28.430
> 
> 标签：iphone, ios, capture, layer

我在 ViewController.view 中添加了两个 UIView，并将 2 个正方形图像应用到每个 view.layer.mask 中，使其像一个正方形被切成 2 块，并在其上添加 Subview 图像视图。我在渲染蒙版图层并将其保存到相册时遇到问题。我希望保存的照片看起来像图片编号。1，但它总是看起来像图片没有。2 保存到相册后。有没有什么解决方案可以在涂抹面膜后捕捉到像第一张图片一样？</p>

以下是来自苹果的参考 renderIngContext。

重要此方法的 OS X v10.5 实现不支持整个 Core Animation 合成模型。QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定背景过滤器、过滤器、合成过滤器或遮罩值的图层。OS X 的未来版本可能会增加对渲染这些层和属性的支持。

![在此处输入图像描述](../Images/6aef13f05c9cc42cabfefbfedaf72c8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:38:11.577

我之前创建了一个图像捕获功能，它实际上是 UIView 的打印屏幕。我不使用它，因为它不能很好地满足我的需要，但也许你可以使用它：

```
UIImage *img;   

UIGraphicsBeginImageContextWithOptions(UIViewYouWantToCapture.bounds.size, self.opaque, 0.0);
[[UIViewYouWantToCapture layer] renderInContext:UIGraphicsGetCurrentContext()];

img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:11:15.953

当我们对任何图像应用遮罩时，我们得到的结果图像具有遮罩图像的 alpha 属性为 1，剩余图像为 0，当我们捕获视图图像时，仍然有完整的图像（我们能够看到半图像由于半图的alpa = 0，但仍有完整的图像），所以我们得到了完整视图的截图。

# wpf - 棱镜 - 使用它的坏主意？

> ID：12143488
> 
> 赞同：5
> 
> 时间：2012-08-27T13:59:32.500
> 
> 标签：wpf, prism, mef

我一直在从 Windows 窗体迁移到 WPF，并试图利用 Prism 来满足应用程序面向插件的要求。

我的问题是似乎没有支持它。我还听说在某些情况下它非常泄漏。由于我正在开发企业应用程序，这是不可接受的。

如果是这种情况，并且开始使用 Prism 是一个坏主意，是否有任何替代方案来制作复合应用程序？仅使用 MEF 是我能想到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:43:13.653

使用 Prism，您可以选择使用 Unity 和/或 MEF 作为 IoC/DI 框架……它还具有很强的可扩展性……因此您可以根据需要插入不同的 IoC 容器。

泄漏的一些问题通常可以归结为不以某种方式使用 WPF，例如需要使用弱委托/弱事件模式等。

您可以使用 MEF 推出自己的插件框架，但您可能需要重新发明一些 Prism 已经为您做的事情，例如 EventAggregator 等。

你可以选择一个替代框架，它们都有自己的长处和短处。

*   [用于模块化 MVVM 应用程序的 Prism + MEF 替代品](https://stackoverflow.com/questions/5005356/alternatives-to-prism-mef-for-modular-mvvm-apps)

还有另一种 Microsoft 技术旨在支持插件，即 System.AddIn/Managed Add-in Framework (MAF)....但是您必须添加更多的脚手架。

*   [http://www.matthidinger.com/archive/2008/10/12/managed-addin-framework-system.addin-with-wpf.aspx](http://www.matthidinger.com/archive/2008/10/12/managed-addin-framework-system.addin-with-wpf.aspx)

有人提出了一个在这里使用 MEF 的框架：

*   [http://www.codeproject.com/Articles/43625/Building-an-Extensible-Application-with-MEF-WPF-an](http://www.codeproject.com/Articles/43625/Building-an-Extensible-Application-with-MEF-WPF-an)

如果您想查看具有自己非常可插入/模块化架构的企业级项目，请查看 SharpDevelop 以获得灵感。

*   [http://www.icsharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/)

....如果你真的想要，结合几个框架中最好的部分并不是超出可能性的范围。

# css - 一个元素可以同时有 box-shadow 和 inset shadow 吗？

> ID：12143490
> 
> 赞同：7
> 
> 时间：2012-08-27T13:59:37.057
> 
> 标签：css

我想在同一个元素上同时拥有外阴影和内（插入）阴影，这可能吗？现在我有这个：

```
box-shadow: 0 4px 2px -2px #888;
box-shadow: inset 0 0 30px #EEE; 
```

有了这个嵌入阴影覆盖了正常的盒子阴影，有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T14:04:33.497

是的。用逗号分隔它们：

`box-shadow: inset 0 0 30px #EEE, 0 4px 2px -2px #888;`

我相信你最多可以有六个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:07:31.233

这是你想要[小提琴的一个例子](http://jsfiddle.net/uttara/D2z2C/1/)

```
box-shadow:0 0 30px #222 inset, 0 4px 2px -2px #888; 
```

# php - 使用指定数据 jquery ajax 成功

> ID：12143493
> 
> 赞同：0
> 
> 时间：2012-08-27T13:59:48.677
> 
> 标签：php, jquery, ajax

我正在向 saveworld.php 发送帖子数据并在该页面中获得一些结果，我想在当前页面中使用该数据。我的问题是我正在获取 saveworld.php 的整个 DOM。但我只需要一些特定的文本一个 id 为 linkid 的 div

这是我的代码

```
$.ajax({
    type: "POST",
    url: "saveworld.php",
    data: worldData,
    success: function(data) {
        if (data.length > 0) {
            $('#space').append("<a id='" + data + "' class='square' style='background-color:#" + color2 + ";color:#" + tcolor2 + ";' href='worlds/" + data + "'>" + name2 + "</a>")
        }
    }
});​ 
```

我想要一个特定的数据，例如我想要 saveworld.php 中存在的以下数据

```
<div id='linkid'>23</div> 
```

我想这将类似于 `($('#linkid',data))`获取该数据但我正在 `[Object Object ]` 使用它但我想使用响应页面 saveworld.php 数据的特定部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:05:48.850

如果你的 php 脚本返回一段 JSON 代码，你必须像这样解码你的 JSON：

```
var res = $.parseJSON(data); 
```

在您可以在 PHP 脚本上渲染表格时使用您的数据：

```
res.MyFirstVar; 
```

编写 php 脚本的更好方法是测试您的代码是否执行良好。您为执行检查测试呈现一个带有布尔值的 php 表：

```
$result = array();
$result['ok'] = false;
/* do something */
if( //all is ok )
{
$result['ok'] = true;
}
render_json($result); //choose your way to render the json 
```

在你的 js 代码上，它看起来像：

```
$.ajax({
type: "POST",
url: "saveworld.php",
data: worldData,
success: function(data){
var res = $.parseJSON(data);
 if (res .ok){ 

$('#space').append(
    "<a id='" + res.linkid + "' class='square' style='background-color:#"+ color2 +  ";color:#" + tcolor2 + ";' href='worlds/" + res.linkid + "'>"   
     + res.name2 + "</a>"
)
}else{
//notify the use that failled
} 
```

# javascript - Javascript 函数中的 PHP (PCRE) 验证

> ID：12143494
> 
> 赞同：4
> 
> 时间：2012-08-27T13:59:49.537
> 
> 标签：javascript, php, regex, pcre

是否有现有函数（或者可能有人编写了一些现有代码）在 JS 函数中验证传递的文本是有效的 PCRE？我一直在疯狂地谷歌搜索，但我能找到的最接近的东西只是“PCRE_JAVASCRIPT_COMPAT”（这是一个 PCRE 兼容性标志）或关于在 PHP 和 Javascript 中验证输入的讨论。

我见过的最接近 Javascript REGEX 验证的是：

```
try {
    "".match(regex);
    return true;
} catch (e) {
    return false;
} 
```

这没有考虑 JS (ECMA) 正则表达式和 PHP (PCRE) 正则表达式之间的差异——这显然是一个问题，但我还没有找到关于两者之间差异的明确讨论。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:39:26.963

用于检查 PHP 的快速且脏的 AJAX 代码：

Javascript：

```
function regexValidator(value) {
    var req = new XMLHttpRequest();
    req.onreadystatechange = function() {
        if (req.status == 200 && req.responseText.length() > 0) {
            alert(req.responseText);
        }
    };
    req.open('GET', 'http://example.com/validator.php?r=' + escape(value), true);
    req.send();
} 
```

PHP：

```
<?php
if (isset($_GET['r'])) {
    if (preg_match(urldecode($_GET['r']), '') === FALSE) {
        echo "NOT VALID";
    } else {
        echo "VALID";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:28:20.933

有趣的问题。正则表达式坏蛋 Steven Levithan 编写了一个漂亮的[正则表达式荧光笔/着色](http://stevenlevithan.com/regex/colorizer/)器，它解析*Javascript*正则表达式并在此过程中进行部分（如果不完整）验证。它突出显示它发现的任何语法错误。但关于 PCRE 正则表达式的味道......

我有一个 Javascript (GitHub) 项目可能会有所帮助。它被称为：[动态正则表达式荧光笔](http://jmrware.com/articles/2010/dynregexhl/DynamicRegexHighlighter.html)。它将验证关于组和字符类的括号匹配的 PCRE 语法。但是，它不检查任何其他语法要求。如果您喜欢正则表达式，无论如何它可能值得一看。我发现测试页面在检查以非自由间距模式编写的长而复杂的正则表达式（很差）时非常有用。当您将鼠标悬停在括号上时，匹配的括号会突出显示，如果它是捕获组，则会在弹出的工具提示中提供组号。

请参阅：[动态正则表达式荧光笔测试器](http://jmrware.com/articles/2010/dynregexhl/DynamicRegexHighlighterTester.html)

# html - Unity3D Html over 3D flash 游戏

> ID：12143495
> 
> 赞同：0
> 
> 时间：2012-08-27T13:59:50.487
> 
> 标签：html, flash, unity3d

我有 Unity3D 制作的 3D 游戏。用了一段时间后，它可以在 Flash 中正常工作。

目前我需要找到一种在我的闪存上显示 HTML 内容的方法。wmode=opaque, wmode=transparent 失败，因为 unity 用来渲染 3d 内容的 stage3d 需要 wmode=direct。

我已经尝试过其他黑客，比如使用 iframe，但这在所有浏览器中都不同（仅在带有发布 flash 播放器的 chrome 下正确行为）现在我正在考虑从动作脚本获取 flash 阶段的屏幕截图，将此数据传递给 javascript，渲染这个在画布上，隐藏 Flash，并将自定义 HTML 元素移到上面。这一切看起来很悲伤，我错过了一些重要的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:33:41.120

如果您使用闪光灯并想在画布中渲染场景:)....最好只使用闪光灯，不要那样做:)..奇怪为什么它不适合你，因为我经常在上面放一个 div Flash 内容，它的工作原理。

# java - 迭代嵌套（多维）哈希图

> ID：12143500
> 
> 赞同：2
> 
> 时间：2012-08-27T14:00:00.243
> 
> 标签：java

当我在其上调用 .toString() 时，我有一个`HashMap<String, Object>`看起来像这样的：

```
{somekey=false, anotherKey=someString, thirdKey={nestedKey=hello, nestedKey2=world,etc=etcetcetc}} 
```

在我的脚本中的某个时刻，我想将“thirdKey”集迭代为其自己的地图。是否有用于隔离“嵌套”HashMap 并将其用作自己的一维映射的通用约定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:15:18.117

这是我从地图（以及这些地图中的地图）中递归提取所有值的代码。

```
public List<Object> getValues(Map<String, Object> map) {

    List<Object> retVal = new ArrayList<Object>();

    for (Map.Entry<String, Object> entry : map.entrySet()) {
        Object value = entry.getValue();

        if (value instanceof Map) {
            retVal.addAll(getValues((Map) value));
        } else {
            retVal.add(value);
        }
    }

    return retVal;
} 
```

正如 Vikdor 已经说过的，我认为这没有真正的惯例。

**编辑：** 当然，您也可以将键和值写入新的 Map （“展平”它）。我只是将值添加到列表中，因为这样当嵌套映射之一使用已经存在的键时，您就不会遇到问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:13:43.630

没有我知道的约定。您必须回退以`instanceof`查看键处的值是否为 a `Map`，如果是，则对其进行特殊处理-在您的情况下是递归的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:10:43.260

我怀疑是否会有一个使用泛型的“*共同约定”。*最好转向强类型程序，不要使用 Object 作为 hashmap 的键或值。然后不会遇到这种情况，并且会有更多有组织的数据定义。我的两分钱！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-21T09:33:25.840

```
public static Map<String, Object> flatten(Map<String, Object> map) {
    Map<String, Object> newMap = new HashMap<>();
    for (Entry<String, Object> entry : map.entrySet()) {
        if (entry.getValue() instanceof Map) {
            @SuppressWarnings("unchecked")
            Map<String, Object> tempMap = flatten((HashMap<String, Object>) entry.getValue());
            for (Entry<String, Object> tempEntry : tempMap.entrySet()) {
                newMap.put(entry.getKey()+"."+tempEntry.getKey(), tempEntry.getValue());
            }
        } else {
            newMap.put(entry.getKey(), entry.getValue());
        }
    }
    return newMap;
} 
```

# c++ - 轮廓计数和标记

> ID：12143504
> 
> 赞同：0
> 
> 时间：2012-08-27T14:00:08.413
> 
> 标签：c++, opencv

我正在尝试开发一个程序来计算数量`contourAreas`作为大小的函数并将其显示给用户。

我能够创建`drawContours`所有区域，但我想在每个区域下添加一个文本标签`contouArea`并在那里显示相应的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:18:36.833

您可以使用打开的 cv 函数[putText](http://docs.opencv.org/modules/core/doc/drawing_functions.html#puttext)

我想您知道如何检索轮廓中心的位置，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:19:49.590

这应该让你开始。要遍历所有轮廓，您必须在下面使用带有 h_next 的 for 循环。如果您想了解更多信息，我强烈推荐 Gary Bradski 的《Learning OpenCv》一书。书中有一些关于轮廓查找的很好的例子。

```
CvMemStorage* contour_storage = cvCreateMemStorage(0);
CvSeq* contours;
CvFont font;
cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.6f, 0.6f, 0, 2);
cvFindContours(sourceImage, contour_storage, &contours, sizeof (CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);

for (CvSeq* d = contours; d != NULL; d = d->h_next) {
 CvRect iconBox = cvBoundingRect(d, 0);
 CvPoint center = cvPoint(iconBox.x + (iconBox.width / 2), iconBox.y + (iconBox.height / 2));
 int area = abs(cvContourArea(d, CV_WHOLE_SEQ));
 cvPutText(sourceImage,"area", center, &font, CV_RGB(255, 255, 255));
} 
```

# html - 使用 htmlunit 驱动程序时，html 页面未显示正确的链接

> ID：12143508
> 
> 赞同：0
> 
> 时间：2012-08-27T14:00:35.697
> 
> 标签：html, htmlunit, selenium-webdriver

我编写了一个在 java 中运行的 selenium 脚本：

```
 String pageName = "my test url which invloves an link to html which has javscript excution";
    logger.log(Level.INFO,"Page name : " + pageName);
    WebDriver driver = new HtmlUnitDriver(true);

    logger.log(Level.INFO,"driver instance created " );
    String str ="";

    logger.log(Level.INFO,"opening the url now.... " );
    driver.get(pageName);
    logger.log(Level.INFO,"url is now opened :: url = "+driver.getCurrentUrl());
    logger.log(Level.INFO,"driver now going to sleep = "+driver.getCurrentUrl());
    Thread.sleep(150000);

    logger.log(Level.INFO,"Wake up from sleep now....");
    logger.log(Level.INFO,"URL ::"+driver.getCurrentUrl());
    logger.log(Level.INFO,"PageSource ::"+driver.getPageSource());
    try {
        logger.log(Level.INFO,"Driver going to wait now...");
        driver.wait(100000);
        logger.log(Level.INFO,"Driver came out of wait now normally...");
    } catch (Exception e) {
        logger.log(Level.INFO,"Driver came out of wait now exception::"+e);
    }

    logger.log(Level.INFO,"driver instance task completed " );
    logger.log(Level.INFO,driver.getCurrentUrl());

    logger.log(Level.INFO,driver.getCurrentUrl());
    logger.log(Level.INFO,str);

    driver.close(); 
```

现在，当我调试这段代码时，我得到了正确的结果，但是当我从 servlet 运行这段代码时，我只得到了 html 内容，而不是来自给定链接的正确内容。

我还尝试使用 firefox 驱动程序，并且相同的代码可以正常工作。我也用 Web 客户端尝试了相同的代码，但同样的问题来了。

谁能帮我解决这个例外？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:56:36.087

调试代码时，您可以在检查点处暂停。但是您不能阻止浏览器加载。它独立加载自己。Htmlunitdriver pagesource返回所有html内容，因为它不能完全执行javascript。如果htmlpage包含Ajax，则javascript调用它会显示调用。

# html - Phonegap 和网络工作

> ID：12143509
> 
> 赞同：0
> 
> 时间：2012-08-27T14:00:38.523
> 
> 标签：html, cordova, blackberry-webworks

我已经下载了 webworks sdk 2.3.0.9，因为最新版本无法在我的计算机上编译我的 phonegap 应用程序。

我需要在我的 html 文件中包含什么才能访问推送消息等 webworks 方法。

我已经启动了我的应用程序，但需要包含黑莓的推送通知

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:21:02.343

我已经设法让通知工作，但是当我关闭应用程序时，我无法让它们通过。我知道这是一个新问题，所以我会将其发布在新线程上。

不需要指向 webworks.js 文件的链接。我编译不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:07:57.683

您需要将功能标签添加到您的 config.xml 文件中

```
<feature id="blackberry.push" /> 
```

至于使用该功能，您可以在此处找到详细说明[https://developer.blackberry.com/html5/api/blackberry.push.html](https://developer.blackberry.com/html5/api/blackberry.push.html)

# android - 如何在android列表警报对话框中删除多余的空间

> ID：12143512
> 
> 赞同：0
> 
> 时间：2012-08-27T14:00:42.640
> 
> 标签：android, android-alertdialog

我正在尝试显示带有单选项目的示例警报对话框，并且在列表结束后面临额外空间的问题。

这是我的代码

```
final CharSequence[] items = {"Red", "Green", "Blue"};

        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setTitle("Pick a color");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                Toast.makeText(context, items[item], Toast.LENGTH_SHORT).show();
            }
        });
        AlertDialog alert = builder.create();
        alert.show(); 
```

![带有单选项目的示例警报对话框](../Images/ae70ec1f1f6ee35be20b5938aaa044b3.png)

建议我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:04:33.217

您可以拥有自己的对话框布局（请参阅文档），但我建议保持原样，因为此对话框在 HC/ICS/JB 上的外观会有所不同，因此与其他版本的 android 相比，调整其外观是非常糟糕的主意它可能看起来不同。这只是操作系统的方式。离开它是我的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T10:08:42.923

我在构建自定义警报对话框时遇到了类似的问题。为了解决这个问题，我不得不使用主题来摆脱剩余的空间。以下是我遵循的代码：

```
private Dialog getCustomDialog() {
      AlertDialog.Builder builder = new AlertDialog.Builder(this, android.R.style.Theme_DeviceDefault_Panel);
      AlertDialog dialog = builder.create();
      dialog.setView(dialogView, 0, 0, 0, 0);
      return dialog;
    } 
```

根据[此处](http://developer.android.com/reference/android/R.style.html#Theme_DeviceDefault_Panel)`android.R.style.Theme_DeviceDefault_Panel`的文档，遵循以下用法：

> 这将删除所有无关的窗口装饰，因此您基本上有一个空的矩形来放置您的内容。它使窗口浮动，具有透明背景，并关闭窗口后面的调光。

# jquery - 颜色框覆盖关闭操作

> ID：12143513
> 
> 赞同：0
> 
> 时间：2012-08-27T14:00:51.380
> 
> 标签：jquery, colorbox

我有一个 ajax colorbox 脚本，如果成功提交，则只有在 esc 上关闭或单击外部以执行 window.location.reload();

问题是我的功能没有执行。我认为首先是关闭颜色框，因此不再需要执行任何操作。在 colorbox 函数之前我能做些什么来执行我的函数。

这是模式内的代码：http: [//jsfiddle.net/33BbG/](http://jsfiddle.net/33BbG/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:28:19.170

您可能必须使用您自己的一些代码来覆盖插件的自动关闭功能。

例如，重新定义方法**$.colorbox.close()**将允许您捕获默认退出条件并阻止它们，直到您的应用程序逻辑按照您的需要完成。然后您可以允许关闭颜色框。

ColorBox 网站上的这个常见问题解答应该让您开始...

*   [http://www.jacklmoore.com/colorbox/faq#faq-close](http://www.jacklmoore.com/colorbox/faq#faq-close)

问候，凯文 M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:07:54.030

您使用打开的调试运行它，您会看到您错过`'`了以下行：
`$(a.close, a.btn-close, .cboxOverlay').live('click', function(e){`

# javascript - Javascript 相等三等号但是大于和小于呢？

> ID：12143520
> 
> 赞同：21
> 
> 时间：2012-08-27T14:01:35.480
> 
> 标签：javascript

我在向一位同事解释说，在比较 JavaScript 中的变量时，你应该使用and `===`（`!==`当然还有），这样它就不会强制参数，让所有的问题变得混乱和混乱，但他们问了我一个我不知道的两部分问题答案并认为我会在这里问专家，具体来说是：`>==``<==`

> `>`和-当`<`他们比较时，他们是否也强制参数 - 为什么没有某种类型的`>>`和`<<`运算符（可能需要一些其他语法，因为我猜如果它沿着整个 C 风格，但你明白要点）？

所以我可以写一个测试来找到第一部分的答案，我做了，这里是：

```
// Demo the difference between == and ===
alert(5 == "5");
alert(5 === "5");   

// Check out what happens with >
alert(5 > "4");    
alert(5 > 4); 
```

它返回：

```
true
false

true
true 
```

所以看起来确实`>`在进行强制转换，`> "4"`并`> 4`返回相同的结果。那么第二部分呢...

是否有某种运算符 for `>`and`<`不强制类型（或者我如何更改我的测试以安全地执行测试）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T14:04:46.670

不，不需要这样的运营商。对这些关系运算符进行的类型检查不同于对等式和不等式的检查。（*编辑*——也许说“没有必要”有点过分；这是真的，因为 JavaScript 认为如此 :-)

具体来说，`>`and`<`和`>=`and`<=`运算符都对两个数值或两个字符串进行操作，优先选择数值。也就是说，如果一个值是数字，则另一个值被视为数字。如果非数字不能干净地转换为数字（即，如果它以 结尾`NaN`），那么比较的结果是`undefined`。（这有点问题，因为它`undefined`看起来像`false`在`if`语句的上下文中。）

如果两个值都是字符串，则改为执行排序顺序字符串比较。

如果您考虑一下，这些比较对于对象实例没有任何意义。一个对象“大于”另一个对象是什么意思？我想，也许，这意味着如果你发现自己的变量类型的值像这样被比较，这会导致问题，那么是的，你必须自己检测这种情况。在我看来，最好在上游工作并考虑导致这种情况的代码是否存在问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T14:07:39.753

> > 和 < 是否有某种不强制类型的运算符

不。

> 如何更改我的测试以安全地执行测试

您必须明确测试类型：

```
typeof a === typeof b && a > b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:12:16.597

我参考了 Flanagan 的 JavaScript：权威指南（第 5 版），似乎没有非强制比较运算符。

您说 << 和 >> 确实是按位运算符是对的，因此这是行不通的。

我建议你故意强迫自己的价值观：

```
var num_as_string = '4';
var num = +num_as_string;
if (5 > num) { ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-27T16:50:55.263

```
12 > '100' // false
'12' > 100 // false
'12' > '100' // true 
```

正如其他人所提到的，如果一个是数字，则另一个被转换为一个数字。同样的规则也适用于这些情况：

```
null > 0 // false
null < 0 // false
null >= 0 // true 
```

但是，您可能需要`null >= 0`给出某些情况`false`（或上面的任何数字字符串比较情况），因此*确实需要*进行严格比较`>==`或`<==`.

例如，我正在编写一个`compareFunction`for the`Array.prototype.sort()`和一个表达式 like`x>=0`会将`null`值视为 0 并将它们放在一起，而我想将它们放在其他地方。我必须为这些情况编写额外的逻辑。

Javascript 说你自己处理它（在实践中）。

# java - 从 netweaver 中的视图读取和映射上下文元素

> ID：12143521
> 
> 赞同：0
> 
> 时间：2012-08-27T14:01:37.250
> 
> 标签：java, sap, webdynpro, netweaver

我的应用程序中有两个视图，我想在它们之间共享一个变量，以便在提交字符串时`StartView`可以在`ResultView`. 不过，我对映射的工作方式有点困惑。

我在我的组件上下文中创建了一个`value attribute`被调用的[this](http://i.stack.imgur.com/67Mgq.png)和[this](http://i.stack.imgur.com/pv6it.png)。然后我在我的 StartView 和我的组件控制器之间创建了一个数据链接。我将 Username 属性从右侧（组件所在的位置）拖到 StartView 上下文中。结果看起来[像这样。](http://i.stack.imgur.com/eR6E8.png)`Username`

这就是我卡住的地方：我不知道如何将这个用户名属性从组件引用到 ResultView。显然我需要在两者之间创建一个数据链路但是然后呢？

*   我是否在 ResultView 上下文中创建一个新的值属性 [这种方式][4]。
*   或者我是否再次将 Username 属性从组件上下文拖到 ResultView 上下文[，就像我对 StartView 所做的那样](http://i.stack.imgur.com/eR6E8.png)。

基本上我想让这段代码工作：

```
String headerText = wdThis.wdGetWelcomeComponentController().
wdGetContext().currentContextElement().getUsername();
wdContext.currentContextElement().setHeaderText(headerText);
// headerText is the name of the attribute that I want to create in the ResultView 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:44:20.443

创建从用户名属性（在组件控制器中）到 headertext 属性（在结果视图中）的映射。通常为此，不需要编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T23:57:06.280

如图所示，您的上下文位于控制器中，这是 webdynpro 上的典型方式，您在将属性拖动到视图时定义了这一点。您可以通过箭头确认，在视图的 de 属性中选择属性，您会看到这是一个 WelcomeComponent 属性。

您既可以在新视图中创建新属性，也可以稍后加入这两个属性，或者只是将属性从控制器拖到视图中以创建新属性。最终的结果是一样的，所以我建议你直接用控制器创建它，它的步骤更少。

如果你选择创建一个新的，当你加入两个属性（控制器和视图）时，webdynpro 将强制你有一个控制器来查看关系，你不能让它反转，基于 de MVC 模式 webdynpro 实现。

例如，如果您在视图上有 ant int 属性，而在控制器上有一个字符串属性，则当您创建关系时，控制器属性将保留，视图将更改为字符串，通过属性定义是控制器属性。

# wordpress - WordPress PHP当前用户信息隐藏一行

> ID：12143522
> 
> 赞同：1
> 
> 时间：2012-08-27T14:01:50.140
> 
> 标签：wordpress

我在 WordPress 中有一个 div，它显示了已登录用户的一些当前用户信息。问题是，如果信息不存在或该字段为空白，我希望不显示整行，例如某人中间名字。如果中间名不存在或为空，我希望它像这样显示。

名字：布拉

姓名：布拉哈斯

**并不是**

名字：布拉

中间名字：

姓名：布拉哈斯

我的代码是

```
<?php global $current_user;  get_currentuserinfo(); echo 'Relationship to Employee:' . $current_user->dep1_relationship . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'First Name:' . $current_user->dep1_firstname . "\n";?>
<?php global $current_user;  get_currentuserinfo(); echo 'Middle Name:' . $current_user->dep1_middlename . "\n";?>
<?php global $current_user;  get_currentuserinfo(); echo 'Last Name:' . $current_user->dep1_lastname . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'SSN:' . $current_user->dep1_social . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'Date of Birth:' . $current_user->dep1_dob . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'Gender:' . $current_user->dep1_gender . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'Student:' . $current_user->dep1_student . "\n";?><br>
<?php global $current_user;  get_currentuserinfo(); echo 'Add of Cancel:' . $current_user->dep1_addorcancelcoverage . "\n";?><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:21:07.857

尝试以下...

```
<?php 
global $current_user;  
get_currentuserinfo(); 

echo ($current_user->dep1_relationship!='')?'Relationship to Employee: '.$current_user->dep1_relationship.'<br />':"";
echo ($current_user->dep1_firstname!='')?'First Name: '.$current_user->dep1_firstname.'<br />':"";
echo ($current_user->dep1_middlename!='')?'Middle Name: '.$current_user->dep1_middlename.'<br />':"";
echo ($current_user->dep1_lastname!='')?'Last Name: '.$current_user->dep1_lastname.'<br />':"";
echo ($current_user->dep1_social!='')?'SSN: '.$current_user->dep1_social.'<br />':"";
echo ($current_user->dep1_dob!='')?'Date of Birth: '.$current_user->dep1_dob.'<br />':"";
echo ($current_user->dep1_gender!='')?'Gender: '.$current_user->dep1_gender.'<br />':"";
echo ($current_user->dep1_student!='')?'Student: '.$current_user->dep1_student.'<br />':"";
echo ($current_user->dep1_addorcancelcoverage!='')?'Add of Cancel: '.$current_user->dep1_addorcancelcoverage.'<br />':"";
?> 
```

请注意，您只需要以下一次...

```
global $current_user;  
get_currentuserinfo(); 
```

# c# - LINQ 返回类型/值不是我在等待的

> ID：12143523
> 
> 赞同：0
> 
> 时间：2012-08-27T14:01:52.613
> 
> 标签：c#, regex, linq

当我执行这些行时

```
drpdf["meno"] = matches.Cast<Match>().Where(c => c.Groups["ID"].Value == i.ToString()).Select(c => c.Groups["meno"].Value);
drpdf["info"] = matches.Cast<Match>().Where(c => c.Groups["ID"].Value == i.ToString()).Select(c => Regex.Replace(c.Groups["zvysok"].Value, @"^,\s?", string.Empty)); 
```

它不会保存到我想要的 DataRow 值中，而不是

```
System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Text.RegularExpressions.Match,System.String] 
```

你能帮我请教如何选择/将返回值转换为可读类型吗？不管怎么说，还是要谢谢你。翁德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:04:18.477

您的 LINQ 查询使用`Select`，因此您得到了`IEnumerable<T>`回报。如果您想要 LINQ 查询的结果，并且只需要一个结果，请添加`.Single()`：

```
drpdf["meno"] = matches.Cast<Match>()
                       .Where(c => c.Groups["ID"].Value == i.ToString())
                       .Select(c => c.Groups["meno"].Value)
                       .Single(); 
```

另一方面，如果您的查询可以有多个结果，则应`.First()`改为使用第一个结果。然而，到那时，这取决于你的场景是什么以及你想要捕捉什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:06:43.363

就像是：

```
matches.Cast<Match>()
       .Where(c => c.Groups["ID"].Value == i.ToString())
       .Select(c => c.Groups["meno"].Value)
       .FirstOrDefault();  // this expression will evaluate the linq 
                           // expression, so you get the string you want 
```

请注意：如果 null 在您的上下文中实际上是一个有效值，您应该只使用 FirstOrDefault 或 SingleOrDefault。（就像@Daniel Hilgarth 所说的那样）。

如果`null`不是有效结果，而您想要一个空字符串，请将 a 附加`?? String.Empty`到表达式：

```
matches
  ...
  .FirstOrDefault() ?? String.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:07:36.160

您的查询结果是可枚举的对象。`ToString()`正如您已经注意到的那样，调用这些并不会为您提供有意义的字符串表示。您需要生成一个适合显示的字符串。

如果您只是想将内容显示为逗号分隔的列表，您可以使用它[`String.Join()`](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)来执行此操作：

```
var menos = matches.Cast<Match>()
                   .Where(c => c.Groups["ID"].Value == i.ToString())
                   .Select(c => c.Groups["meno"].Value);
drpdf["meno"] = String.Join(", ", menos); 
```

否则，如果您打算选择单个结果，请使用`Single()`选择该单个字符串结果。

# jquery - 如何为 Bootstrap Datepicker 设置第一天和第一周

> ID：12143526
> 
> 赞同：19
> 
> 时间：2012-08-27T14:02:04.370
> 
> 标签：jquery, asp.net, twitter-bootstrap, datepicker

我是新手：我正在使用 Bootstrap Datepicker 并且可以使用它

```
$(document).ready(function () {
  $('#datepickeron').datepicker()
}); 
```

然后一个

```
<div id="dateoickeron"></div> 
```

但我不能像在 jQuery UI 中那样设置第一天或第一周。通常我可以`firstDay: 1, weekHeader: "Uge", showWeek: true`在 jQuery UI 中使用 like 并显示 3 个月，例如 numberOfMonths: [3, 1], stepMonths: 3。

如何为 Bootstrap Datepicker 执行此操作？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-27T14:09:19.170

尝试添加`weekStart`. 访问[这里](https://github.com/eternicode/bootstrap-datepicker)了解更多详情

```
$(document).ready(function () {
 $('#datepickeron').datepicker({
   weekStart: 0 // day of the week start. 0 for Sunday - 6 for Saturday
 });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:04:34.113

一些例子。希望能帮助到你。像往常一样进入 $(document).ready(function(){});

```
$('#fromDate').datepicker('setStartDate', '-15d');
$('#fromDate').datepicker('setEndDate', '1d');
$('#toDate').datepicker('setStartDate', '-15d');
$('#toDate').datepicker('setEndDate', '1d');

    // Initialize the dates
$('#cv-rpt-sdate').datepicker({format: 'dd-mm-yyyy',"autoclose": true});
$('#cv-rpt-edate').datepicker({format: 'dd-mm-yyyy',"autoclose": true});
$('#cv-rpt-sdate').datepicker('setEndDate', '1d');
$('#cv-rpt-edate').datepicker('setEndDate', '1d');

$('#dboard-att-date').datepicker({format: 'dd-mm-yyyy',"autoclose": true});
$('#dboard-att-date').datepicker('setStartDate', '-7d');
$('#dboard-att-date').datepicker('setEndDate', '1d'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-08T13:54:39.823

您必须从 'ngx-bootstrap/datepicker' 导入 import {BsLocaleService}；并从 'ngx-bootstrap/chronos' 导入 {defineLocale, enGbLocale}；

在构造函数中，您必须添加 defineLocale('en-gb', enGbLocale); 在 ngOnit 你必须添加 this.localeService.use('en-gb');

它适用于带有 Angular 7+ 的 BS4

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-12T10:14:38.027

**不需要 jquery 或 javascript-**

您可以在 Tag 本身中设置此属性。

```
property -   data-date-week-start   
type  -    integer  
default  -    0 
description - day of the week start. 0 for Sunday - 6 for Saturday 
```

例如 - 我已经设置从星期一开始，然后 data-date-week-start="1"

```
<div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy" data-date-week-start="1">
  <input class="span2" size="16" type="text" value="12-02-2012">
  <span class="add-on"><i class="icon-th"></i></span>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-08T14:02:47.250

Calendar.component.ts 文件（它适用于 ngx-bootstrap datepicker -4 和 angular7）

步骤 1 从 'ngx-bootstrap/datepicker' 导入 {BsLocaleService}；从'ngx-bootstrap/chronos'导入{defineLocale，enGbLocale}；

构造函数中的第 2 步添加 defineLocale('en-gb', enGbLocale); 第 3 步 // 在 **ngOnit* 中添加 this.localeService.use('en-gb');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-16T21:11:41.877

您是否注意到您的“id”元素中有错字？将“datepickeron”拼错为“dateoickeron”。我提前道歉，不是简单地在评论中添加这个，但我还没有获得这样做的许可。

`<div id="dateoickeron"></div>`

...应该：

`<div id="datepickeron"></div>`

# cmd - 使用 cmd 操作文本和文本文件

> ID：12143527
> 
> 赞同：0
> 
> 时间：2012-08-27T14:02:04.610
> 
> 标签：cmd

我有一个在 win XP 上运行的 cmd 脚本，它输出一个文本文件：

```
:start
>outputfile.txt (findstr /v "^#" info.txt || echo No text available)
ping 127.0.0.1
goto start 
```

它检查 info.txt 中的数据，如果它不以 # 开头，则创建包含相同文本的 outputfile.txt。ping 仅用作一种简单的延迟策略。

现在我需要类似的东西来从 info.txt 中获取数据（前提是它不以 # 开头）并将其添加到 outputfile.txt 中已有的内容中。但前提是 info.txt 中的文本已更改！（将 > 更改为 >> 将给出相同文本的大量重复）。

这让我的大脑受伤了。请给我一些指示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:00:48.223

```
@echo off

set DataFile=info.txt
set OutputFile=outputfile.txt
set SavedSize=0

goto start

:filesize
set CurrentSize=%~z1
exit /b

:start
call :filesize %DataFile%
if %SavedSize% neq %CurrentSize% (>%OutputFile% (findstr /v "^#" %DataFile% || echo No text available))
set SavedSize=%CurrentSize%
ping 127.0.0.1 >nul
goto start 
```

这个想法是保存以前的数据文件大小并等到它被改变。

这不是一个理想的解决方案（因为我们需要`info.txt`为每个文件更改复制所有数据）并且如果有人`info.txt`在脚本运行时删除行，它可能无法正常工作。最好使用一些哈希算法（例如，MD5），但不幸的是标准的 CMD 工具集不包含任何合适的东西。

如果这些限制对您很重要，我建议使用一些命令行散列实用程序（例如[this](http://www.fourmilab.ch/md5/)）或某种更强大的脚本语言（Python、Perl、Powershell）。

# qt - 将 Qt 代码移植到 C（使用 libcurl 发布）

> ID：12143534
> 
> 赞同：0
> 
> 时间：2012-08-27T14:02:24.170
> 
> 标签：qt, http-post, libcurl

目前我正在将 Qt 代码移植到 C 中。

Qt代码：

```
QNetworkAccessManager *manager = new QNetworkAccessManager;
QByteArray data;
QNetworkRequest request;

mainReply = manager->post(request, data); //What is the equivalent in libcurl?
connect(mainReply, SIGNAL(finished()),   this, SLOT(get_imghttpFinished())); 
```

我想使用 libcurl 将相同的代码移植到 C 中。谁能建议“manager-> post”的等效功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:04:11.367

在该行中，QNetworkAccessManager 执行一个简单的 POST 请求。根据 curl 文档，您可以执行以下操作来替换此代码：

```
char *data="name=daniel&project=curl";
curl_easy_setopt(easyhandle, CURLOPT_POSTFIELDS, data);
curl_easy_setopt(easyhandle, CURLOPT_URL, "http://posthere.com/");
curl_easy_perform(easyhandle); 
```

这些链接可能会对您有所帮助，这里有 curl 的 C 绑定文档（请参阅第一个链接中的 HTTP POSTing 一章）以及在 C 中使用 curl 执行 POST 请求的示例。

[http://curl.haxx.se/libcurl/c/libcurl-tutorial.html](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html)

[http://curl.haxx.se/libcurl/c/postit2.html](http://curl.haxx.se/libcurl/c/postit2.html)

希望这有帮助:)

编辑：您似乎可以发送带有`curl_formadd` [功能](http://curl.haxx.se/libcurl/c/curl_formadd.html)的文件，而无需事先阅读。

```
curl_formadd(&post, &last, CURLFORM_COPYNAME, "picture",   CURLFORM_FILE, "my-face.jpg", CURLFORM_END); 
```

# php - 在 Etsy 上创建新列表

> ID：12143541
> 
> 赞同：3
> 
> 时间：2012-08-27T14:02:45.123
> 
> 标签：php, api, oauth, etsy

我正在尝试在 Etsy 上创建一个新列表。

1.  我使用 oauth 进行身份验证并获得 `OAUTH_CONSUMER_KEY` 了 `OAUTH_CONSUMER_SECRET`

2.  我用这段代码检查它，我得到了所有卖家数据的返回，所以 OAuth 一切正常。

    ```
    $oauth = new OAuth(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET, OAUTH_SIG_METHOD_HMACSHA1, OAUTH_AUTH_TYPE_URI);
    $oauth->setToken("key","secret"); 

    try {
     $data = $oauth->fetch("http://openapi.etsy.com/v2/users/__SELF__", null, OAUTH_HTTP_METHOD_GET);
     $json = $oauth->getLastResponse();
     print_r(json_decode($json, true));

    } catch (OAuthException $e) {
     error_log($e->getMessage());
     error_log(print_r($oauth->getLastResponse(), true));
     error_log(print_r($oauth->getLastResponseInfo(), true));
     exit;
    } 
    ```

3.  我正在尝试创建一个新列表。首先，我设法通过生产环境中的 api 浏览器创建了一个新列表。现在，我想通过 PHP 创建一个新列表。这就是我所做的，它返回了我的错误：

这是我的代码：

```
$oauth = new OAuth(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET,OAUTH_SIG_METHOD_HMACSHA1, OAUTH_AUTH_TYPE_URI);

$oauth->setToken("key","secret");

try {
 $url = "http://openapi.etsy.com/v2/listings";

 $params = array('description' => 'thisisdesc','materials' => 'yes','price'=>"5.99"
 ,'quantity'=>"2",'shipping_template_id'=>"52299",'shop_section_id'=>"1"
 ,'title'=>"thisistitle",'category_id'=>"i_did",'who_made'=>"5.99"
 ,'is_supply'=>"1",'when_made'=>"2010_2012");

 $oauth->fetch($url, $params, OAUTH_HTTP_METHOD_POST);
 print_r(json_decode($json, true));

} catch (OAuthException $e) {

 print_r($e);

 error_log($e->getMessage());
 error_log(print_r($oauth->getLastResponse(), true));
 error_log(print_r($oauth->getLastResponseInfo(), true));
 exit;
} 
```

我得到以下回应：

```
Invalid auth/bad request (got a 403, expected HTTP/1.1 20X or a redirect) 
This method not accessible to restricted API key. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T13:10:23.507

如果您仍在开发您的应用程序，您可以创建列表而无需获得完整的 API 访问权限，只要商店在您的帐户上。`listings_w`确保在发出第一个 OAUTH 请求时解析为权限范围。我在下面的代码中更改了 ETSY 提供的示例。

```
 // instantiate the OAuth object
    // OAUTH_CONSUMER_KEY and OAUTH_CONSUMER_SECRET are constants holding your key and   secret
    // and are always used when instantiating the OAuth object 
    $oauth = new OAuth(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET);

    // make an API request for your temporary credentials
    $req_token = $oauth->getRequestToken("https://openapi.etsy.com/v2/oaut/request_token?scope=email_r%20listings_r%20listings_w", 'oob');

    print $req_token['login_url']."\n";` 
```

注意`scope=email_r%20listings_r%20listings_w;`

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:16:54.430

啊哈，[这就是答案](https://groups.google.com/forum/?fromgroups=#!msg/etsy-api-v2/De4eIO0ELGQ/s4UWhEfXde0J)。来自 Etsy 开发人员：

> 您的 API 尚未获得完全 API 访问权限的批准。我已经解决了这个问题，所以你现在应该可以使用这些方法了。

因此，请与公司联系，并要求您的密钥获得批准。

# javascript - 客户端网格与 javascript 数组一起使用

> ID：12143543
> 
> 赞同：0
> 
> 时间：2012-08-27T14:02:49.223
> 
> 标签：javascript, arrays, binding, grid

我需要一个客户端网格来处理 javascript 数组。我需要以最少的配置进行编辑、过滤和排序功能。一个例子将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:17:04.533

我不知道你想让这些家伙为你做多容易。

[这是一个可编辑的 KendoUI 网格，数据在 JS 代码中设置。](http://jsfiddle.net/schapman/kvXVf/)

我没有连接保存方法，但您可以在[此处的 KendoUI 站点上找到如何执行此操作。](http://demos.kendoui.com/web/grid/editing-inline.html)

# javascript - 如何在javascript中将两种颜色相乘？

> ID：12143544
> 
> 赞同：12
> 
> 时间：2012-08-27T14:02:51.873
> 
> 标签：javascript, colors, html5-canvas

给定的参数是两种颜色的 r,g,b。

我怎样才能将它们相乘？（就像混合模式 - >在Photoshop中相乘）

例子：

颜色1：0,255,255

颜色2：255,255,0

相乘：0,255,0

![例子](../Images/69878cab9f531366703d6df2342c51c5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:15:09.457

基于简单的乘法公式，这是一个适用于 RGB 的 javascript 函数：

```
function multiply(rgb1, rgb2) {
    var result = [],
        i = 0;
    for( ; i < rgb1.length; i++ ) {
        ​result.push(Math.floor(rgb1[i] * rgb2[i] / 255));
    }
    return result;
}​ 
```

使用现代 JavaScript：

```
const multiply = (rgb1, rgb2) => rgb1.map((c, i) => Math.floor(c * rgb2[i] / 255)) 
```

这是一个使用背景颜色的小提琴，您可以使用：http: [//jsfiddle.net/unrLC/](http://jsfiddle.net/unrLC/)

![在此处输入图像描述](../Images/c7b261c744380888c9120f446be83d13.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T14:08:07.840

[这是乘以颜色的公式](http://en.wikipedia.org/wiki/Blend_modes#Multiply)（以及其他混合模式公式）。

> 公式：结果颜色 =（顶部颜色）*（底部颜色）/255

您可以在 JavaScript 中非常轻松地实现这一点。

```
var newRed = red1 * red2 / 255;
var newGreen = green1 * green2 / 255;
var newBlue = blue1 * blue2 / 255; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T14:07:39.250

您将颜色分量转换为 0 到 1 之间的值，然后是简单的乘法。将结果返回到 0 到 255 的范围内：

```
0, 255, 255  ->  0, 1, 1
255, 255, 0  ->  1, 1, 0

0*1 = 0, 1*1 = 1, 1*0 = 0

0, 1, 0  ->  0, 255, 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:08:46.030

我想目的是将颜色范围从 0 到 255 相乘。将它们缩小到 [0, 1] 的范围，将它们相乘，然后再次扩展它们：

```
color_new = ( (color_1 / 255) * (color_2 / 255) ) * 255
color_new = color_1 * color_2 / 255 
```

# java - 放在 JMS 之上的已知 RPC 协议

> ID：12143546
> 
> 赞同：1
> 
> 时间：2012-08-27T14:02:54.127
> 
> 标签：java, jms, protocols, rpc, thrift

我正在开发一个由不同组件（服务）组成的分布式系统，这些组件（服务）通过 JMS（ActiveMQ）松散（异步）耦合。

因此我不想重新发明轮子，我正在寻找一个（众所周知的）协议/库来促进这些组件之间的远程过程调用并帮助我处理方法接口。

因此，让我们通过肮脏的解决方案分解我现在已经解决的问题：

1.  **消费者组件想要调用服务，因此它构造了一个请求字符串（手写和脏）**
2.  请求字符串被压缩并放入 JMS 消息中（也很脏）
3.  请求消息通过 JMS 和路由机制传输（那部分没问题）
4.  **服务首先需要解压解析请求字符串，识别正确的方法（脏​​）**
5.  该方法被调用，回复类似于#2 - #4。

所以这看起来很像 SOAP，而我认为 SOAP 对我的应用程序来说太重了，而且我根本没有使用 HTTP。鉴于我在想一个人可能能够将问题解构为不同的组件。

1.  A 部分：HTTP 被 JMS 取代（那个没问题）
2.  B 部分：XML 被更轻量级的东西取代（好吧，[MessagePack](http://msgpack.org)在这里派上用场）
3.  **C部分：解析请求/回复字符串以识别操作名称和参数值的机制（这是真正的问题）**

我正在研究[MessagePack](http://wiki.msgpack.org/display/MSGPACK/Design+of+RPC)、[ProtocolBuffers](http://code.google.com/p/protobuf-rpc-pro/)、[Thrift](http://thrift.apache.org)等，但我不喜欢它们的是它们引入了自己的处理实际 (TCP) 通信的方式。绕过我已经很复杂的 JMS 基础设施（它也处理负载平衡和其他东西）。

为了进一步详细说明上面的 C 部分，这就是我目前处理它的方式：如果消费者调用服务，我会做类似以下的事情，让我们假设服务接受文本并回复关键字。我会让消费者创建一条 JMS 消息并将其（通过 ActiveMQ）传输到服务。该消息将包含：

```
 Syntax: OPERATION_NAME [PARAMETERS]
 Method: GET_ALL_KEYWORDS [String text] returns [JSON String[] keywords]

 Example Request: GET_ALL_KEYWORDS "Hello world, this is my input text..."
 Example Reply: ["hello", "world", "text"] 
```

不用说，这感觉就像被砍死了一样。我看到的问题是，如果我要通过添加或删除参数来更改方法接口，我必须检查所有请求/回复字符串构造/解构以同步更改。这很容易出错。我宁愿让库通过查看java接口并在运行时抛出真正的异常来构建正确的请求/回复语法，如果我搞砸了一些东西，比如“协议异常：未设置强制参数”或其他东西......

任何为此而闻名的项目/库？

要求是

1.  它体积小、重量轻、速度快。
2.  它是用 JAVA 实现的
3.  它没有太多用途（比如一些成熟的框架，例如[Spring](http://www.springsource.org)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:19:54.983

我认为这个 Spring 包是你正在寻找的。请参阅[JmsInvokerProxyFactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/remoting/JmsInvokerProxyFactoryBean.html)和相关类。

从javadoc：

> 用于 JMS 调用程序代理的 FactoryBean。使用指定的服务接口公开代理服务以用作 bean 引用。
> 
> 序列化远程调用对象和反序列化远程调用结果对象。像 RMI 一样使用 Java 序列化，但使用 JMS 提供程序作为通信基础设施。

# c - 我可以使用C语言中的一些系统函数列出堆栈中的局部变量吗

> ID：12143548
> 
> 赞同：1
> 
> 时间：2012-08-27T14:03:02.073
> 
> 标签：c

C 函数**回溯**只返回程序的一系列函数调用，但我想列出程序中的所有局部变量，就像 gdb 中的*信息*局部变量一样。知道这是否可以做到吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:21:04.920

一般来说，没有。您应该摆脱将“堆栈”视为某种上帝给定的事实的想法。调用堆栈只是 C 的一种常见实现技术。它没有内在含义或必需的语义。自动变量（如您所说的“局部变量”）必须以某种方式运行，*有时*这意味着它们被写入调用堆栈。但是，完全可以想象，局部变量根本不会在内存中实现——它们可能只会存储在处理器寄存器中，或者如果可以在没有它们的情况下制定等效程序，则完全消除它们。

所以，不，没有用于枚举局部变量的语言内在机制。正如您所说，调试器可以在某种程度上这样做（取决于存在的调试符号并进行优化）；也许您可以找到一个可以从正在运行的程序中处理调试符号的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:39:51.607

如果这只是为了偶尔调试，那么您可以调用调试器。但是，由于调试器本身会冻结您的程序，因此您需要一个中介来捕获输出。例如，您可以使用`system`并将输出重定向到文件，然后再读取该文件。在下面的示例中，该文件`gdbcmds.txt`包含行`info locals`.

```
char buf[512];
FILE *gdb;
snprintf(buf, sizeof(buf), "gdb -batch -x gdbcmds.txt -p %d > gdbout.txt",
         (int)getpid());
system(buf);
gdb = fopen("gdbout.txt", "r");
while (fgets(buf, sizeof(buf), gdb) != 0) {
    printf("%s", buf);
}
fclose(gdb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:33:43.047

首先，请注意它`backtrace`不是标准的 C 库函数，而是 GNU 特定的扩展。

一般来说，很难从编译后的代码中检索局部变量信息，特别是如果它是在没有调试或启用优化的情况下编译的。如果未打开调试，变量名称和类型通常不会保留在生成的机器代码中。

例如，使用以下简单得离谱的代码：

```
#include <stdio.h>
#include <math.h>

int main(void)
{
  int x = 1, y = 2, z;
  z = 2 * y - x;
  printf("x = %d, y = %d, z = %d\n", x, y, z);
  return 0;
} 
```

这是生成的机器代码，没有调试或优化：

```
 .file   "varinfo.c"
        .version        "01.01"
gcc2_compiled.:
                .section        .rodata
.LC0:
        .string "x = %d, y = %d, z = %d\n"
.text
        .align 4
.globl main
        .type    main,@function
main:
        pushl   %ebp
        movl    %esp, %ebp
        subl    $24, %esp
        movl    $1, -4(%ebp)
        movl    $2, -8(%ebp)
        movl    -8(%ebp), %eax
        movl    %eax, %eax
        sall    $1, %eax
        subl    -4(%ebp), %eax
        movl    %eax, -12(%ebp)
        pushl   -12(%ebp)
        pushl   -8(%ebp)
        pushl   -4(%ebp)
        pushl   $.LC0
        call    printf
        addl    $16, %esp
        movl    $0, %eax
        leave
        ret
.Lfe1:
        .size    main,.Lfe1-main
        .ident  "GCC: (GNU) 2.96 20000731 (Red Hat Linux 7.2 2.96-112.7.2)" 
```

`x`、`y`和分别通过、和`z`引用。除了用于执行算术的指令外，没有任何迹象表明它们是整数。 `-4(%ebp)``-8(%ebp)``-12(%ebp)`

打开优化（-O1）会更好：

```
 .file   "varinfo.c"
        .version        "01.01"
gcc2_compiled.:
        .section        .rodata.str1.1,"ams",@progbits,1
.LC0:
        .string "x = %d, y = %d, z = %d\n"
.text
        .align 4
.globl main
        .type    main,@function
main:
        pushl   %ebp
        movl    %esp, %ebp
        subl    $8, %esp
        pushl   $3
        pushl   $2
        pushl   $1
        pushl   $.LC0
        call    printf
        movl    $0, %eax
        leave
        ret
.Lfe1:
        .size    main,.Lfe1-main
        .ident  "GCC: (GNU) 2.96 20000731 (Red Hat Linux 7.2 2.96-112.7.2)" 
```

在这种情况下，编译器能够进行一些静态分析并`z`在编译时计算值；根本*不需要*为任何变量留出任何内存，因为编译器已经知道这些值必须是什么。

# php - .htaccess 将 $_GET= 视为变量

> ID：12143551
> 
> 赞同：1
> 
> 时间：2012-08-27T14:03:16.683
> 
> 标签：php, .htaccess, rewrite

我了解 .htaccess 和 ?var=$1，我想做的是将 $1 视为独立的，例如

```
http://localhost.com/file.php?stackoverflow 
```

相当于

```
http://localhost.com/file.php?site=stackoverflow 
```

我猜这必须以与我在下面说明的方式相同的方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:09:10.243

您**可以**使用此方法，但我建议您使用下面列出的传统方法...

对于 的 URL `http://localhost.com/file.php?stackoverflow`，如果您想测试该参数的存在，您可以使用这样的东西 -

```
if (isset($_GET['stackoverflow']){
  // parameter exists.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:09:27.653

假设站点始终应该是第一个查询字符串参数：

```
$site = "";
foreach($_GET as $key=>$_){
  $site = $key;
  break; //breaks at first run, as site should be the first querystring parameter
} 
```

# tomcat - 在 grails 中设置 maxPostSize

> ID：12143555
> 
> 赞同：0
> 
> 时间：2012-08-27T14:03:46.103
> 
> 标签：tomcat, grails

我正在尝试在 grails 中设置 maxPostSize（tomcats server.xml 属性）。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:57:17.263

已经找到了： http: [//grails.1312388.n4.nabble.com/tomcat-plugin-where-is-server-xml-and-tomcat-users-xml-td1322273.html](http://grails.1312388.n4.nabble.com/tomcat-plugin-where-is-server-xml-and-tomcat-users-xml-td1322273.html)

# php - Cookie 不起作用

> ID：12143558
> 
> 赞同：2
> 
> 时间：2012-08-27T14:03:56.417
> 
> 标签：php, cookies

我尝试使用 cookie 来记住登录信息，但 cookie 似乎从来没有按原样“接受”。这是初始登录脚本：

```
//try to login using cookies, but first make sure it doesn't have a $_SESSION variable for it
if (!(isset($_SESSION['valid_user']))) {
    if (isset($_COOKIE["login"])) {
        //try to login using cookie
        $query = "select from cookie_users where uniqueid = '".$_COOKIE["login"]."')";
        $conn = new mysqli('localhost', 'user', 'password', 'test');
        $result = $conn->query($query);
        if ($result->num_rows>0) {
            $result->fetch_assoc();
            $result['username'] = $username;
            $result['password'] = $password;
            //try to login using password and username from cookie database
            $query = "select * from authorized_users where username = '".$username."' and password = '".$password."'";
            $result2 = $conn->query($query);
            if ($result->num_rows>0) {
                $_SESSION['valid_user'] = $username;
            }
        }
    }
}

if (isset($_POST['userid']) && isset($_POST['password'])) {
    // if the user has just tried to log in
    $userid = $_POST['userid'];
    $password = $_POST['password'];

    $db_conn=new mysqli('localhost', 'user', 'password', 'test');

    if (mysqli_connect_errno()) {
        echo 'Connection to database failed: '.mysqli_connect_errno();
        exit;
    }
    $query = 'select * from authorized_users '."where name='$userid' "."and password=sha1('$password')";

    $result = $db_conn->query($query);
    if ($result->num_rows > 0) {
        //if they are in the database, register the user id
        $_SESSION['valid_user'] = $userid;
        //set up cookie
        setcookie("login", $uniqueid, time()*60*60*24*14);
        $query = "insert into cookie_users values ('".$userid."', sha1('".$password."'), '".$uniqueid."')";
        $result = $db_conn->query($query);
        if (!$result) {
            echo 'Could not update cookie in database';
        }
    }
    $db_conn->close();
} 
```

会员专属内容：

```
if (isset($_SESSION['valid_user'] {
echo "members only content goes here";
} else {
echo "you need to login"; } 
```

会话和登录脚本工作得很好。如果他们直接使用登录页面登录，则会显示。如果他们转到另一个页面然后返回，它仍然有效；所以这让我相信这些会议工作得很好。但是，如果您关闭浏览器并返回，它不会注册。如果剧本有问题，请告诉我。无论哪种方式，我都做了一个测试脚本，但它甚至都不起作用。这里是：

```
<?php

setcookie("test", "the test is good", time()*60*60);

?>

<html>
<body>
<?php
echo $_COOKIE["test"];
?>
</body>
</html> 
```

所以我认为我缺少一些基本的东西。对不起，如果答案很明显，cookie 对我来说是新的。感谢你们提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:23:29.723

您的问题出在这一行：

```
setcookie("login", $uniqueid, time()*60*60*24*14); 
```

在这里，您是在乘以时间而不是添加时间。您已将其乘以足以*超过* `MAX_INT` *大小*（请参阅[Y2038](http://en.wikipedia.org/wiki/Year_2038_problem)）。无论出于何种原因，Apache（至少在我的系统上）将忽略该标头，然后浏览器将仅在会话期间保留它。幸运的是，您可以相当简单地解决问题：

```
setcookie("login", $uniqueid, time() + 60*60*24*14); // Adding two weeks, not multipying by >9000 
```

# plugins - 测试浏览器插件的安装

> ID：12143559
> 
> 赞同：0
> 
> 时间：2012-08-27T14:04:00.707
> 
> 标签：plugins, browser, selenium, webdriver, selenium-webdriver

我正在使用 selenium webdriver 来测试我们的网站。我们还有一个浏览器插件/扩展，我们想以同样的方式进行测试。据我所知，没有任何方法可以使用 webdriver 测试插件的安装。有没有办法用webdriver做到这一点？如果不是，我该如何自动测试插件的安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:32:53.610

因此，firefox 和 chrome 似乎都允许您使用 webdriver 功能注册扩展。

这是文档

火狐：[https ://code.google.com/p/selenium/wiki/FirefoxDriver#Running_with_firebug](https://code.google.com/p/selenium/wiki/FirefoxDriver#Running_with_firebug)

铬：[https ://code.google.com/p/selenium/wiki/ChromeDriver#Chrome_Extensions](https://code.google.com/p/selenium/wiki/ChromeDriver#Chrome_Extensions)

不幸的是，没有支持，但这是一个非常好的开始。

# mysql - 数据目录 MySQL

> ID：12143561
> 
> 赞同：0
> 
> 时间：2012-08-27T14:04:11.877
> 
> 标签：mysql

询问：

```
CREATE TABLE IF NOT EXISTS `shop_product`
DATA DIRECTORY = '/var/lib/mysql/shop/'
INDEX DIRECTORY='/var/lib/mysql/shop/'
ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 
```

为什么我有这个错误：

**数据目录的参数不正确**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:10:29.463

你在这里至少有两个问题。首先，您的表格没有任何列。其次，您不能使用`DATA DIRECTORY`或`INDEX DIRECTORY`与 InnoDB 一起使用。

此外，从 MySQL 5.0.60 开始，您不能使用包含 MySQL 数据目录的路径名`DATA DIRECTORY`或`INDEX DIRECTORY`。我猜那`/var/lib/mysql`是你的 MySQL 数据目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T02:48:59.043

> DATA DIRECTORY 通过创建从表通常所在的位置（在 datadir 内部）到选项指定的位置的符号链接来工作。出于安全原因，为避免绕过特权系统，服务器不允许数据目录内的符号链接。因此，DATA DIRECTORY 不能用于指定数据目录内的位置。尝试这样做将导致错误 1210 (HY000) 数据目录的参数不正确。

[https://mariadb.com/kb/en/library/create-table/#data-directoryindex-directory](https://mariadb.com/kb/en/library/create-table/#data-directoryindex-directory)

您的 DATA DIRECTORY 位于`/var/lib/mysql/`，请尝试其他位置，例如`/var/shop`

# rally - 使用 Rally 作为您的（唯一的）缺陷跟踪器？

> ID：12143565
> 
> 赞同：5
> 
> 时间：2012-08-27T14:04:22.113
> 
> 标签：rally

Rally 显然具有一些缺陷跟踪功能。

我的问题是；作为组织的唯一缺陷跟踪器是否足够好/足够灵活？或者更常见的是在其他工具（如 Bugzilla 或 JIRA）中完成一般缺陷跟踪？（可能使用 Rally 连接器来集成它们）。

我们目前正在使用 Bugzilla，但正在增加 Rally 的使用率。如果 Rally 可以完成 Bugzilla 的工作，我会很高兴摆脱 Bugzilla 并少一个需要担心的系统。有人这样做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:46:51.743

Stack Overflow 通常用于询问和回答有关编程和代码的问题。因此，这可能不是获得准确答案的最佳论坛。话虽如此...

多年来，我一直是一名拉力工程师。在内部，我们使用 Rally 来管理我们的缺陷，我个人认为这是一个轻松的解决方案。Rally 可以汇总缺陷的方式以及它们所代表的从任务级别一直到产品组合级别的工作是有用的，我个人讨厌浪费我的时间来尝试保持多个系统同步。

我知道很多客户仍然使用我们的连接器与 Rally 结合使用其他缺陷跟踪解决方案，他们似乎对这种混合解决方案非常满意。去年我在维护这些连接器的团队中，我们有很多满意的客户。实际上，我是编写最初的 Bugzilla 连接器的人中的一员，它很好地保持系统同步。

可能不是最公正的答案，但我至少会检查是否仅使用 Rally，如果它似乎缺少您在旧系统中喜欢的东西，请花时间通过[Rally Ideas](http://ideas.rallydev.com/)让我们知道。

# php - 无法使用会话变量登录

> ID：12143566
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:04:27.353
> 
> 标签：php, mysql

我有这段代码，我正在尝试创建一个会话以获取用户的画廊 ID..

问题是，如果我使用 $_SESSION['username'] 它可以工作，但像这样不是......你能检查一下这有什么问题吗？

谢谢！

```
mysql_connect($host, $user, $pass);
mysql_select_db($database);
$username = mysql_real_escape_string($_POST['username']);
$password = md5($_POST['password']);

$result = mysql_query("SELECT * FROM $table WHERE username = '$username' AND password = '$password'
");
while ($rows = mysql_fetch_array($result)) {

if(mysql_num_rows($result))
{
$rows['gal_id']=$gal_id;
  session_start();
  $_SESSION['gal_id'] = htmlspecialchars($gal_id);
}
else
{
  // Invalid username/password
  echo '<p><strong>Error:</strong> Invalid username or password.</p>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:08:52.243

改变这个：

```
$rows['gal_id']=$gal_id; 
```

到

```
$gal_id=$rows['gal_id']; 
```

编辑：我认为不需要进一步的解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:10:34.737

`$rows['gal_id']=$gal_id;`您不能通过这样做来设置数据库行的值。另外，它永远不会被进一步引用。

`session_start();`在大多数情况下，这应该位于页面顶部。

`$_SESSION['gal_id'] = htmlspecialchars($gal_id);`$gal_id 从未在您的代码中设置为任何内容，它不存在。

# c++ - 如何打印可流类型的 boost::variant？

> ID：12143575
> 
> 赞同：6
> 
> 时间：2012-08-27T14:04:58.213
> 
> 标签：c++, boost

我觉得我有一个严重的“Doh！” 此刻……

我目前正在尝试实施：

```
std::ostream& operator<<(std::ostream &out, const MyType &type) 
```

MyType 拥有 int、char 和 bool 的 boost::variant。IE：使我的变体可流式传输。

我试过这样做：

```
out << boost::apply_visitor(MyTypePrintVisitor(), type);
return out; 
```

MyTypePrintVisitor 有一个模板函数，它使用 boost::lexical_cast 将 int、char 或 bool 转换为字符串。

但是，这不会编译，错误是 apply_visitor 不是 MyType 的函数。

然后我这样做了：

```
if(type.variant.type() == int)
out << boost::get<int> (type.variant);
// So on for char and bool
... 
```

我缺少更优雅的解决方案吗？谢谢。

**编辑：问题解决了。请参阅第一个解决方案和我对此的评论。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T14:28:10.717

`variant`如果所有包含的类型都是可流式传输的，您应该能够流式传输 a 。示范：

```
#include <boost/variant.hpp>
#include <iostream>
#include <iomanip>

struct MyType
{
    boost::variant<int, char, bool> v;
};

std::ostream& operator<<(std::ostream &out, const MyType &type)
{
    out << type.v;
}

int main()
{
    MyType t;
    t.v = 42;
    std::cout << "int: " << t << std::endl;

    t.v = 'X';
    std::cout << "char: " << t << std::endl;

    t.v = true;
    std::cout << std::boolalpha << "bool: " << t << std::endl;
} 
```

输出：

```
int: 42
char: X
bool: true 
```

如果您确实需要使用访问者（可能是因为某些包含的类型不可流式传输），那么您需要将其应用于`variant`自身；您的代码片段看起来像是将其应用于`MyType`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-22T18:24:56.757

不知道为什么，但这不适用于带有 C++17 的 clang 5.0。但我有另一个解决方案：

```
std::variant<int, char, bool> v;
std::visit(
    [](auto value) { std::cout << value << std::endl; },
    v
); 
```

# list - 在 Prolog 中检查连接

> ID：12143580
> 
> 赞同：0
> 
> 时间：2012-08-27T14:05:21.703
> 
> 标签：list, prolog

这是我目前无法解决的另一个序言任务。我必须写一个谓词 p(X,Y)，其中 X 是数字列表，Y 是数字列表。谓词必须验证：

1) 如果 X 可以表示为来自 Y 的 2 个元素之间的串联。 2) X 具有奇数个元素。3) X 中所有元素的总和是 Y 中的最后一个元素。

也许作为单独的任务 2、3 可以很容易地编写。问题出在 1)

先感谢您。我为发布如此简单的任务感到抱歉，但 prolog 真的让我发疯。我一遍又一遍地阅读我所有的课文。但是情况类似这样：school: 3+x=5, x = ? 考试： cos(x+y+z) + lim (5x+y)/t = .... 如果你明白我的意思。再一次感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:15:59.260

检查连接是用 来完成的`append/3`，它更常用于构建它们，但像许多 Prolog 谓词一样“在相反的方向”工作。更具体地说，`append(A,B,C)`检查是否`C`是 和 的`A`连接`B`。所以，

```
member(A, Y),
member(B, Y),
append(A, B, X) 
```

检查是否有一个元素`A`in`Y`和一个元素`B`in`Y`使得它们的连接与`X`.

（请注意，这不会*检查*和 是否`A`是`B`的*不同*元素`Y`。）

# asp.net - 过期的 asp.net 会话 cookie

> ID：12143581
> 
> 赞同：0
> 
> 时间：2012-08-27T14:05:43.917
> 
> 标签：asp.net

在我的注销功能中，我有

```
HttpContext.Current.Session.Abandon();
HttpContext.Current.Response.Cookies["ASP.NET_SessionId"].Expires = DateTime.Now.AddYears(-30); 
```

我看到响应包含具有正确过期时间的 ASP.NET_SessionId 的 set-cookie，但是浏览器（在本例中为 Chrome）实际上从未删除 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:32:44.313

tiy 可以尝试使用此代码

```
HttpCookie myCookie = new HttpCookie("ASP.NET_SessionId");
myCookie.Expires = DateTime.Now.AddDays(-1d);
Response.Cookies.Add(myCookie); 
```

# php - 通过使用 PHP 函数输出 unicode 来显示 unicode 符号

> ID：12143583
> 
> 赞同：0
> 
> 时间：2012-08-27T14:05:48.083
> 
> 标签：php, html, unicode

我正在尝试将字符的 unicode 输出为我的 PHP 函数的返回类型，但是当我在实践中调用该函数时，它只输出没有“0x”而不是符号的代码。但是，如果我在我的 HTML 中明确声明 unicode，它会很好地输出符号。下面是我的代码的简化版本。为什么会这样？

在显示表格的 PHP 文件中：

```
<td><?php echo verifyMatch($a,$b) ?></td> 
```

在我的另一个文件中的函数中：

```
function verifyMatch($_a,$_b){
  $_output = null;
  if (checkCondition()){
    $_output = 0x2714;
    // unicode for tick
  } else {
    $_output = 0x2718;
    // unicode for cross
  }
  return $_output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:12:44.340

就 PHP 而言，您的值`0x2714`和`0x2718`只是十六进制数字，它们分别存储为`2714`和`2718`。实际上，PHP 应该将它们转换为十进制值。当输出到 HTML 中时，它们被输出为数字。

如果您想以 HTML 格式输出它们并显示实际的符号，请尝试在它们`&#x`前面加上 a 并附加它们`;`：

```
<td><?php echo '&#x' . verifyMatch($a, $b) . ';'; ?></td> 
```

如果它们被转换为十进制值，您可以在它们前面加上 just`&#`而不是`&#x`. 添加`x`的是十六进制值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:20:05.680

参考：[具有 unicode 值的 php chr](https://stackoverflow.com/questions/5059706/php-chr-with-unicode-values)

```
function replace_unicode_escape_sequence($match) {
    return mb_convert_encoding(pack('H*', $match[1]), 'UTF-8', 'UCS-2BE');
}
function unicode_chr ($chr) {
    $str = "\u".end(explode("+", $chr));
    return preg_replace_callback('/\\\\u([0-9a-f]{4})/i', 'replace_unicode_escape_sequence', $str);
}

function verifyMatch($_a,$_b){
    $_output = null;
    if (checkCondition()){
       $_output = unicode_chr("U+2714");   // unicode for tick
    }
    else {
        $_output = unicode_chr("U+2718");   // unicode for cross
    }
    return $_output;
} 
```

# asp.net-mvc-3 - 使用 MetadataTypeAttribute 验证外部文件中的属性

> ID：12143585
> 
> 赞同：0
> 
> 时间：2012-08-27T14:05:52.713
> 
> 标签：asp.net-mvc-3, entity-framework, validation

我让 VS 使用 EF 4.3.1 从现有 SQL 表创建我的模型。因为数据库表不是最终的并且可能会更改，所以我不想将验证属性直接设置到模型文件中，因为当我更新模型时它会被覆盖。

我想使用此处描述的 MetadataTypeAttribute 方法： [Update Model From Database (Database First)](https://stackoverflow.com/questions/6758525/update-model-from-database-database-first)

所以我创建了一个包含这个类的外部文件：

```
using System.ComponentModel.DataAnnotations;

namespace PDB.Models
{
    [MetadataTypeAttribute(typeof(t_scriptingMetadata))]
    public partial class t_scripting
    {
    }

    public class t_scriptingMetadata
    {
        [Required]
        public int platform {get; set;}

        [Required]
        [StringLength(20)]
        public string Projectname {get; set;}
    }
} 
```

不幸的是，我在 VS 中遇到了这些错误：

*   重复的 EdmEntityTypeAttribute 属性
*   重复的可序列化属性
*   重复的 DataContractAttribute 属性

VS 生成的我的模型具有错误消息提到的这些属性：

```
[EdmEntityTypeAttribute(NamespaceName="CAWI_STDMGTModel", Name="t_scripting")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class t_scripting : EntityObject
{
    //...
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:48:27.353

我发现了问题。我的模型中有一个表，它实际上是一个视图，其中包含来自另一个表的字段，该表也在我的模型中。所以错误信息确实是正确的。感谢您的帮助，vfabre！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:12:33.910

~~您的 t_scriptingMetadata 类必须进入 t_scripting~~不一定

```
 [MetadataTypeAttribute(typeof(t_scriptingMetadata))] 
public partial class t_scripting 
{ 
  public class t_scriptingMetadata 
  { 
     [Required] 
     public int platform {get; set;} 

     [Required] 
     [StringLength(20)] 
     public string Projectname {get; set;} 
  } 
} 
```

并且两个部分类必须具有相同的命名空间。希望这有帮助。问候

# xml - 多行字符串的 XSD 数据类型？

> ID：12143587
> 
> 赞同：1
> 
> 时间：2012-08-27T14:06:02.783
> 
> 标签：xml, xsd

我注意到多行字符串不是有效`xsd:string`的。根据[XML 1.1 规范](http://www.w3.org/TR/xml11/#NT-Char)，`xsd:string`只能包含匹配的字符`[\u1-\uD7FF]|[\uE000-\uFFFD]|[\u10000-\u10FFFF]`，而换行符不匹配。在 JavaScript 中：

```
/[\u1-\uD7FF]|[\uE000-\uFFFD]|[\u10000-\u10FFFF]/.test("\n");
// returns false 
```

鉴于此，多行字符串的有效 XSD 数据类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:34:51.093

XML 1.1 规范实际上说的是

```
Char       ::=      [#x1-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] 
```

而且我看不到任何人都可以将其解读为不包括#xA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:12:39.170

换行符是 \u000A，它在允许的范围内。

尽管您的正则表达式没有任何问题，但您的测试是问题所在。

编辑：根据[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)正则表达式文档，Unicode 转义需要 4 个十六进制数字。我怀疑您的问题是您在测试中包含了更高的飞机。我没有检查 ECMA 规范，但我可以相信这会导致您的正则表达式出现问题。

# ruby - 使用从 rails 3.2 的下拉列表中选择的新数据更新页面

> ID：12143589
> 
> 赞同：0
> 
> 时间：2012-08-27T14:06:06.583
> 
> 标签：ruby, ruby-on-rails-3

我有使用 select_tag 的下拉列表，并且在它附近有按钮。
我有以下要求：
1）单击提交按钮时，它应该转到书籍#show 操作
2）然后在显示操作中，我从下拉列表中检索选定的书籍
3）显示方法应该显示我将从数据库中检索的书籍的详细信息
即，同一页面应该更新这本书的详细信息。

但是，我无法执行这些。
在我看来：

```
<%=  form_tag books_path do |f|%>
<%= label_tag "select book" %>
<%= select_tag "selectbook", options_from_collection_for_select(@bid,"book_id","book_id"), :prompt => "Select book",:class => 'cmbbook' %>
<%=  submit_tag "view ...", :disable_with => "Please wait." ,:action => "show"%>
<%end%> 
```

在我的控制器中

```
if(params[:selectbook])
      @books =  Book.where("book_id = ?",params[:selectbook])
else
      @books = Book.all
end
@bid= Books.select("book_id").uniq;

respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @books }
      format.json { render json: @books }
end 
```

提交方法调用操作`create`而不是，`show`我也希望页面自动更新新书数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:15:28.713

首先，您应该为表单指定控制器和操作，如下所示

```
form_tag( {:controller => 'your_controller', :action => "show"} ) 
```

对于自动更新页面，您应该[阅读 rails doc](http://guides.rubyonrails.org/ajax_on_rails.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:43:06.810

我找到了该怎么做：
我必须在 javascript 中编写一个方法，该方法调用**getJson()**方法来适当的控制器和操作，并再次使用 javascript 更新视图。因此，使用 ajax javascript 问题得到了解决。但是，我希望我能做同样的事情使用纯 ruby​​ 代码。

# javascript - 值、原型和属性的区别

> ID：12143590
> 
> 赞同：5
> 
> 时间：2012-08-27T14:06:11.583
> 
> 标签：javascript, jquery, oop, reverse-engineering

好的！首先，这个问题来自一个在 jQuery 世界中挖掘得太深（并且可能迷路）的人。

在我的研究中，我发现 jquery 的主要模式是这样的（如果需要更正的话）：

```
(function (window, undefined) {

   jQuery = function (arg) {
      // The jQuery object is actually just the init constructor 'enhanced'
      return new jQuery.fn.init(arg);
   },
   jQuery.fn = jQuery.prototype = {
      constructor: jQuery,
      init: function (selector, context, rootjQuery) {
         // get the selected DOM el.
         // and returns an array
      },
      method: function () {
         doSomeThing();
         return this;
      },
      method2: function () {
         doSomeThing();
         return this;,
         method3: function () {
            doSomeThing();
            return this;
         };

         jQuery.fn.init.prototype = jQuery.fn;

         jQuery.extend = jQuery.fn.extend = function () {

            //defines the extend method 
         };
         // extends the jQuery function and adds some static methods 
         jQuery.extend({
            method: function () {}

         })

      }) 
```

何时`$`发起`jQuery.prototype.init`发起并返回一个元素数组。但我不明白它是如何添加 jQuery 方法的，比如`.css`or`.hide`等​​。到这个数组。

我得到了静态方法。但是无法使用所有这些方法获得它如何返回和元素数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:20:13.243

我也不喜欢那种模式。他们有一个`init`函数，它是所有 jQuery 实例的构造函数 -`jQuery`函数本身只是该对象创建的包装器`new`：

```
function jQuery(…) { return new init(…); } 
```

然后，他们将这些实例的方法添加到`init.prototype`对象中。此对象作为接口公开在`jQuery.fn`. 此外，他们将`prototype`jQuery 函数的属性设置为该对象 - 对于那些不使用该`fn`属性的人。现在你有

```
jQuery.prototype = jQuery.fn = […]init.prototype 
```

但他们也做了两件[奇怪的]事情：

*   覆盖`constructor`原型对象的属性，将其设置为`jQuery`函数
*   暴露`init`函数`jQuery.fn`- 它自己的原型。这可能允许[扩展 $.fn.init 函数](https://stackoverflow.com/q/11146580/1048572)，但非常混乱

我认为他们需要/想要做这一切以防万一，但他们的代码是一团糟——从该对象文字开始，然后分配 init 原型的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:31:00.097

如果您将 API 视为方法的外部集合，而将 jQuery 函数视为包装器，则更容易理解。

它基本上是这样构造的：

```
function a() { return new b();}
a.prototype.method = function() { return this; }
function b() {}
b.prototype = a.prototype; 
```

除了`a`is`jQuery`和`b`is `jQuery.prototype.init`。

我确信 Resig 有他的理由将 api 构造函数放在 init 原型中，但我看不到它们。除了 Bergi 提到的之外，还有一些奇怪的地方：

1) 模式需要从`jQuery.fn.init.prototype`to的参考副本`jQuery.prototype`，这允许一个奇怪的无限循环：

```
var $body = new $.fn.init.prototype.init.prototype.init.prototype.init('body'); 
```

2) 每个 jQuery 集合实际上都是 的一个实例`jQuery.fn.init`，但是由于它们引用了相同的原型对象，它欺骗我们“认为”该集合是 的一个实例`jQuery`。你可以像这样做同样的巫术：

```
function a(){}
function b(){}
a.prototype = b.prototype;
console.log( new b instanceof a); // true
console.log( new a instanceof b); // true 
```

**旁注：**我个人使用了以下构造函数模式，结果相似，没有奇怪之处：

```
var a = function(arg) {
    if (!(this instanceof a)) {
        return new a(arg);
    }
};
a.prototype.method = function(){ return this; }; 
```

# asp.net-mvc-3 - 在mvc3中将id从javascript传递给控制器

> ID：12143592
> 
> 赞同：0
> 
> 时间：2012-08-27T14:06:17.367
> 
> 标签：asp.net-mvc-3

如何在 ajax 不显眼的表单提交上将 Id 从 javascript 传递到 mvc3 中的控制器操作

我的剧本

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#tblclick td[id]").each(function (i, elem) {

            $(elem).click(function (e) {
                var ID = this.id;
                alert(ID);
               // var url = '@Url.Action("Listpage2", "Home")'; 
                var data = { Id: ID };
//                  $.post(url,data, function (result) {
//                 }); 
                e.preventDefault();
                $('form#myAjaxForm').submit();
            });
                       });
    });
</script> 
```

如何使用 $('form#myAjaxForm').submit(); 传递 Id 到控制器而不是

```
$.post(url,data, function (result) {
    //                 }); 
```

我的观点

```
 @using (Ajax.BeginForm("Listpage2", "", new AjaxOptions
            {
                UpdateTargetId = "showpage"
            }, new { @id = "myAjaxForm" }))
            {

                <table id="tblclick">
                    @for (int i = 0; i < Model.names.Count; i++)
                    {
                        <tr>
                            <td id='@Model.names[i].Id'>
                                @Html.LabelFor(model => model.names[i].Name, Model.names[i].Name, new { @id = Model.names[i].Id })
                              <br />
                            </td>
                        </tr>
                    }
                </table>

            }
        </td>
        <td id="showpage">
        </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:15:01.323

我不确定 $.post 但我知道 window.location 对我很有用。改用这个，希望你有好的结果:)

```
window.location = "@(Url.Action("Listpage2", "Home"))" + "Id=" + ID; 
```

替换 $('form#myAjaxForm').submit(); 使用此代码，您的 jscript 看起来没有明显错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:20:37.190

我会避免使用 Ajax`Beginform`辅助方法并像这样做一些纯手写和**干净**的javascript

```
<table id="tblclick">
  @foreach(var name in Model.names)
  {
    <tr>
     <td id="@name.Id">
           @Html.ActionLink(name.Name,"listpage","yourControllerName", 
                         new { @id = name.Id },new { @class="ajaxShow"})         
     </td>
    </tr>
   }
</table>

<script>
 $(function(){
    $(".ajaxShow")click(function(e){
       e.preventDefault();
       $("#showpage").load($(this).attr("href")); 
    });
 });
</script> 
```

这将在你的每个循环中生成锚标记的标记，就像这样。

```
<a href="/yourControllerName/listpage/12" class="ajaxShow" >John</a>
<a href="/yourControllerName/listpage/35" class="ajaxShow" >Mark</a> 
```

当用户点击链接时，它使用 jQuery`load`函数将来自 thae action 方法的响应加载`listpage`到 id 的 div 中`showPage`。

假设你的`listpage`action 方法接受一个 id 参数并返回一些东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:09:40.387

只需使用带有 html 属性 ID 的文本框助手。

```
@Html.TextBox("ID") 
```

你也可以这样做：

```
 var form = $('form#myAjaxForm');
 $.ajax({
       type: "post",
       async: false,
       url: form.attr("action"),
       data: form.serialize(),
       success: function (data) {
          // do something if successful
          }
 }); 
```

# solr - SolR 搜索中的术语流行度

> ID：12143599
> 
> 赞同：0
> 
> 时间：2012-08-27T14:06:56.693
> 
> 标签：solr

有没有办法指定一组在执行搜索时更重要的术语？

例如，在以下问题中：

“今天早上我的打印机用完了纸”

诸如“打印机”或“纸张”之类的术语比其他术语重要得多，我不知道是否有办法列出这些术语来表明，在全球知识中，它们比其余的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:39:06.460

对于特定文档，您可以使用[QueryElevationComponent](http://wiki.apache.org/solr/QueryElevationComponent)，它使用特殊的 XML 文件，您可以在其中放置您想要特定文档 ID 的特定术语。不完全是你需要的，我知道。

对于您对用户不关心下面内容的评论，您可以控制最终查询。或者，在最坏的情况下，您可以在 Solr 服务器端收到它后对其进行修改。

类似：[Lucene term boosting with sunspot-rails](https://stackoverflow.com/questions/4186844/lucene-term-boosting-with-sunspot-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:30:03.557

当您构建查询时，您可以定义什么是值以及这些字段在搜索中的权重。这可以通过多种方式完成：

1.  设置升压

    可以使用设置提升`"^ "`

2.  使用加号运算符 如果您在查询中定义 + 运算符，则如果该字段值有准确的结果，则会显示在结果中。

为了更好地理解 solr，最好熟悉 lucene 查询语法。请参阅此[链接以获取更多信息](http://www.solrtutorial.com/solr-query-syntax.html)。

# php - 将复选框设置为“选中”会使 GET 变量不被发送

> ID：12143600
> 
> 赞同：1
> 
> 时间：2012-08-27T14:06:57.907
> 
> 标签：php, forms, checkbox, get

我正在尝试使复选框像单选按钮一样工作，并将开/关值传递给 $info。此代码工作正常，变量**信息**通过 GET 发送和读取

```
<?php if (empty($info)) { $info='on'; } ?>
<input type="checkbox" name="info" value="<?php if ($info=='on'){ echo "off"; } else {     echo "on"; } ?>" onchange="this.form.submit()"  /> 
```

添加这个：

```
**<?php if (!empty($info)){ echo 'checked="checked"'; } ?>** 

<input type="checkbox" name="info" value="<?php if ($info=='on'){ echo "off"; } else {   echo "on"; } ?>" <?php if (!empty($info)){ echo 'checked="checked"'; } ?> onchange="this.form.submit()"  /> 
```

破坏某些东西 - 不发送或读取 GET 变量，值始终为 OFF。为什么 ？这是没有意义的。将**checked="checked"**添加到复选框会使该复选框的GET 变量不被发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:05:51.853

如果未选中复选框，则不会提交该值。因此，当您取消选中它时，onchange 将触发但不会提交任何内容，因为未选中该框。这是一个解决方案：

```
<?php
$sub = $_POST['submitted'];
$info = $_POST['info'];
if ($sub) {
    if ($info == 'on') {
        echo 'turning it on!';
    } else {
        echo 'turning it OFF!';
    }
}
?>

<form method="post">
<input type="checkbox" name="info" value="on" onchange="this.form.submit()" <?php echo $info == 'on' ? 'checked="checked" ' : ''; ?> />
<input type="hidden" name="submitted" value="1" />
</form> 
```

# jquery - 加载gridview时如何获得加载图像？

> ID：12143604
> 
> 赞同：1
> 
> 时间：2012-08-27T14:07:24.107
> 
> 标签：jquery, tabs, load, spinner, menuitem

我做了一些研究，但我无法找到我的问题的答案。当我从我的菜单项中单击一个选项卡时，我想要一个加载图像。以下代码非常适用于特定事件，例如 click() 等（我尝试了其他几个示例），但在我的 gridview 加载时它不会。我想知道，jquery 中是否有任何类型的事件（我没有找到任何事件）与控件/实体何时开始执行加载有关？我的意思是 load(),onload(),ready() - 都是指加载完成的那一刻。

这是我的代码。任何帮助/建议都将不胜感激：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#spinner").bind("ajaxSend", function () {
            $(this).show();
        }).bind("ajaxError", function () {
            $(this).hide();
        });
    });
</script> 
```

还，

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnSave,#btnOne,#btnTwo,#btnThree,#btnFour,#btnUndo').click(function () {
            //$("#spinner").append('<img id="img-spinner" src="Images/ajax-loader-test.gif" alt="Loading.." style="position: absolute; z-index: 200; left:50%; top:50%; " />');
            $('#spinner').show().fadeIn(20);
        });
    });
</script> 
```

和 Asp 代码：

```
<div id="spinner" class="spinner" style="display: none; width: 100%; height: 150%; position: absolute; z-index: 100; background-color: Gray; left: 0; top: 0; bottom: 0; right: 0">
     <img id="img-spinner" src="Images/ajax-loader-test.gif" alt="Loading.."         style="position: absolute; z-index: 200; left: 50%; top: 50%;" />
</div> 
```

预先感谢您的帮助。

编辑：我尝试将我的功能更改为：

```
 $(document).ready(function () {
    $("#spinner").css.apply('display','none');
    }); 
```

在我的 asp 代码中，我删除了 display:none 属性，但它仍然不起作用，我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:13:12.667

我会将此代码添加到您的启动功能中：

```
$('body').ajaxStart(function() {
  $('#spinner').show();
});

$('body').ajaxComplete(function() {
  $('#spinner').hide();
}); 
```

这将在 ajax 调用开始时显示 div，并在完成时将其隐藏。

要使微调器在页面初始加载时显示，请将此行添加到 document.ready：

```
$("#spinner").hide(); 
```

并采取“显示：无；” 关闭微调器 div。

# c# - Asp.Net 中 <%: %> 和 <%#: %> 的区别

> ID：12143613
> 
> 赞同：11
> 
> 时间：2012-08-27T14:07:45.717
> 
> 标签：c#, asp.net-4.0, asp.net-4.5

我知道我们可以`<%: %>`使用 .Net 4 中引入的 html 编码的语法。但我正在阅读 Asp.Net 4.5 的新功能，我知道我们有另一种类型，即`<%#: %>`用于编码数据绑定表达式的结果。我对此感到困惑。

```
What is the difference between <%: %> and <%#: %> in Asp.Net 
```

请解释他们两个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:16:00.317

同理，`<%: %>`就是 的 HTML 编码版本`<%= %>`，`<%#: %>`标签就是 的 HTML 编码版本`<%# %>`。

标签的`<%#: %>`作用与 相同`<%# %>`，但随后它调用`Server.HTMLEncode`字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:16:47.967

ASP.NET 提供了所谓的“绑定”语法，将 HTML 标记和控件链接到从数据源或其他变量中提取的值；该绑定语法被视为类似于：

```
<%# someVariable %> 
```

下面的冒号只是将新的“auto-HtmlEncode”行为扩展到那些 bding 表达式的结果。

希望有帮助。

# hibernate - 超类应该是继承继承的抽象加入吗？

> ID：12143617
> 
> 赞同：0
> 
> 时间：2012-08-27T14:08:15.127
> 
> 标签：hibernate, jpa-2.0

我将 Jpa 2 与 Hibernate Provider 一起使用。

我使用类型的继承`InheritanceType.JOINED`。我的超类应该是抽象的还是不抽象的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:11:01.090

取决于您是要实例化 Super 类还是现在。就hibernate/jpa而言，没有什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:15:29.917

这是意见问题，因为根据 JPA 2.0 规范，在联合继承的情况下也允许抽象和具体超类。

您很可能没有这样的用例，您必须创建超类的实例。这就是为什么将其抽象为有意义的原因，因为它记录了类的目的（而不是直接实例化）。独立于类是否抽象，您还可以为超类类型创建查询。

# vim - 如何在 Eclim 中中断正在运行的 Java 进程？

> ID：12143621
> 
> 赞同：1
> 
> 时间：2012-08-27T14:08:19.217
> 
> 标签：vim, eclim

我想在 Eclim 中编码，但有一个问题困扰着我。有时我的代码中有一个永无止境的循环错误。如果我编译然后运行，那么 Eclim 会崩溃。我尝试在 Vim 中使用 Ctrl-c 命令来中断进程，但它不起作用。我不得不杀了埃克莱姆。

有什么解决方案可以解决这个问题，还是我在 Eclim 中的设置有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:44:28.457

作为后台执行进程，就像`:!javac <args> <file> &`

# php - 我可以让作者访问 wordpress 中的谷歌分析插件吗？

> ID：12143623
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:08:23.130
> 
> 标签：php, wordpress

我希望 wordpress 中的所有作者都能够查看和访问谷歌分析插件。但是，当我访问插件的谷歌分析页面时，我得到“Vous n'avez pas les droits suffisants pour accéder à cette page”。['您没有足够的权限访问此页面'] 错误.. 如何让所有作者访问此页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:28:08.430

Google Analytics 不知道 WordPress 帐户——它不知道您的作者和地面上的一个洞之间的区别。您需要明确添加他们的 Google 帐户才能访问您的分析面板。

# google-drive-api - 如何在同步算法中使用更改提要？

> ID：12143624
> 
> 赞同：2
> 
> 时间：2012-08-27T14:08:24.773
> 
> 标签：google-drive-api

我了解如何使用获取更改提要列出自上次获取以来的更改。

我不明白的是如何将其合并到双向同步算法中。具体来说，如何从后续提取中排除我自己的更改。

例如，我的同步是：- 阶段 1。我获取服务器更改。假设没有第 2 阶段。我上传了本地更改。说一个名为 NewFile 的新文件

一段时间后，我再次同步，第 1 阶段包含 NewFile 作为更改。因此 NewFile 会被往返。

我考虑添加一个重复获取更改的阶段 3，以推进 ChangeId 并忽略这些更改。问题是另一个客户端可能在第 2 阶段进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:40:21.927

您可以使用其他信息来测试文件是否已更改，例如条目的校验和或 etag，具体取决于您是否关心文件数据或元数据。

您应该将其集成到您的同步算法中，这样您就不会得到您所说的竞争条件。

# json - 格式化 MongoDB MapReduce 输出

> ID：12143625
> 
> 赞同：2
> 
> 时间：2012-08-27T14:08:33.800
> 
> 标签：json, mongodb, mapreduce

在我能找到的所有 MongoDB MapReduce 示例中，输出格式如下：

```
{ "_id" : ..., "value" : { "v1" : ..., "v2" : ..., "vn" : ... } } 
```

我想知道是否可以编写一个 MapReduce 命令来代替像这样格式化输出：

```
{ "_id" : ..., "v1" : ..., "v2" : ..., "vn" : ... } 
```

如果是这样，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:20:39.800

由于 MR 实际写出的方式，这是不可能的。

它写出一个值字段，适用的规则与这里对这个问题所做的规则相同：[在 MongoDB mapreduce 中，如何展平值对象？](https://stackoverflow.com/questions/7257989/in-mongodb-mapreduce-how-can-i-flatten-the-values-object). 为了让您不必单击两个链接，这里是 JIRA 为您的功能：[https ://jira.mongodb.org/browse/SERVER-2517](https://jira.mongodb.org/browse/SERVER-2517)

当然，您总是可以在 MR 之后运行一些后处理功能来更改集合的外观，但这通常是一种性能不佳且速度慢的方法，您可以在查询中轻松处理。

# forms - 如何在 HTML 中弹出一个表单字段到另一个表单

> ID：12143626
> 
> 赞同：1
> 
> 时间：2012-08-27T14:08:33.123
> 
> 标签：forms, html

我有两个 html 表单，一个是用户登录表单，另一个是注册表单，都在一个页面中相邻。假设一个不存在的用户尝试使用一些用户名和密码登录我的应用程序，我会以任何方式显示错误消息，但同时，一旦发生错误，输入的用户名和密码应自动填写在注册表单中。这样我可以通过填写两个字段来减少用户的工作量，以实现这一点，我该如何使用HTML5 功能 ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:12:39.397

使用 jQuery，如果出错，您可以执行以下操作：

```
$('form2#username').val($('form1#username').val());
$('form2#password').val($('form1#password').val()); 
```

这会将“form1”中“username”的所有内容移动到“form2”中的“username”

# sphinx - sphinx 在文本 unicode 字段中使用 sql_attr_str2ordinal 排序

> ID：12143628
> 
> 赞同：1
> 
> 时间：2012-08-27T14:08:37.377
> 
> 标签：sphinx

我将 sql_attr_str2ordinal 用于文本字段，所以我可以进行排序。我已经阅读了解释它如何工作的文档。（使用字节等......）如果我理解正确，就不可能按语言环境对文本字段进行排序？怎么可能做到这一点？

排序示例（查找 č 字母）：错误排序：a b c d e 。. . z

正确排序： a b c č d e 。. . z

来自文档：

> 理想情况下，应根据编码和语言环境对字符串进行不同的排序。例如，如果已知字符串是 KOI8R 编码中的俄语文本，那么对字节 0xE0、0xE1 和 0xE2 进行排序应该会产生 0xE1、0xE2 和 0xE0，因为在 KOI8R 中，值 0xE0 编码的字符（明显）在由0xE1 和 0xE2。不幸的是，Sphinx 目前不支持，只会按字节对字符串进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:53:02.690

您现在可以使用字符串属性进行排序。

有排序规则设置来实现这一点。 [http://sphinxsearch.com/docs/current.html#collat​​ions](http://sphinxsearch.com/docs/current.html#collations)

str2ordinal 中的文档尚未更新以说明它。

# python - Appengine 图像裁剪工具返回无

> ID：12143634
> 
> 赞同：0
> 
> 时间：2012-08-27T14:09:11.880
> 
> 标签：python, google-app-engine, python-imaging-library

我正在尝试使用 google.appengine.api.images 裁剪图像。

不幸的是，尝试使用这些参数裁剪尺寸为 612x612 的图像返回 None：

```
(0.0, 0.14052287581699346, 1.0, 0.85947712418300659) 
```

它不会生成异常或任何有意义的错误消息；只是一个无返回值。

任何想法？

编辑：

以下是我正在使用的整个代码：

```
path = urllib.unquote(path)
r = urllib.urlopen(path)
image_data = r.read()
img = Image(image_data = image_data)
width, height = float(img.width), float(img.height)
max_height = 440.0
max_width = 940.0

rest_height = 0.0
if height > max_height:
    rest_height = height - max_height

rest_width = 0.0
if width > max_width:
    rest_width = width - max_width

left_x = rest_width/(2 * width)
top_y = rest_height/(2 * height)
right_x = 1.0 - left_x 
bottom_y = 1.0 - top_y

img_cropped = img.crop(left_x,top_y,right_x,bottom_y) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:23:26.507

您需要使用 execute_transforms 方法，该方法将在指定所有图像操作后返回图像。指定裁剪只是将该操作添加到要执行的操作队列中，并且不会在该点返回图像实例。

所以你会做'img_cropped = img.execute_transforms()'

查看图像服务概述文档中的示例[https://developers.google.com/appengine/docs/python/images/overview](https://developers.google.com/appengine/docs/python/images/overview)

# php - PHP图像缩放不起作用

> ID：12143635
> 
> 赞同：0
> 
> 时间：2012-08-27T14:09:13.983
> 
> 标签：php, image-processing, gd

“res.php”下面提供的脚本旨在缩放图像，然后在 html 页面的 HEADER css 中使用。根据“CID”（俱乐部 ID）调用图像。每个俱乐部都有存储在数据库中的信息，包括名为 club_header 的信息。club_header 是一个 VARCHAR，用于存储图像的绝对位置（文件系统或 Web）。“res.php”功能是调用图像并将其输出到浏览器以及将图像重新调整为任何设置的大小。默认情况下，设置为 960 x 200。

但是由于某种原因，脚本没有做它必须做的事情，而是输出一个损坏的图像。代码可能有什么问题？

如果需要，一些服务器 + php 信息

**服务器：** Apache v2.2.21、PHP v5.3.8、SQL v5.5.16、GD v2.0.34

**PHP.ini:** max_execution_time = 300, max_input_time = 60, memory_limit = 208M, post_max_size = 24M

**“res.php”源代码**

```
require("php/db.class.php");

function scaleImageFileToBlob($file) {

    $file = $_GET['cid'];

    $query = mysql_query("SELECT * FROM clubs WHERE club_id = '".$_GET['cid']."'");
    $obj = mysql_fetch_array($query);
    $photoObj = $obj['club_header'];

    $source_pic = $photoObj;
    $max_width = 960;
    $max_height = 200;

    list($width, $height, $image_type) = getimagesize($file);

    switch ($image_type)
    {
        case 1: $src = imagecreatefromgif($file); break;
        case 2: $src = imagecreatefromjpeg($file);  break;
        case 3: $src = imagecreatefrompng($file); break;
        default: return '';  break;
    }

    $x_ratio = $max_width / $width;
    $y_ratio = $max_height / $height;

    if( ($width <= $max_width) && ($height <= $max_height) ){
        $tn_width = $width;
        $tn_height = $height;
        }elseif (($x_ratio * $height) < $max_height){
            $tn_height = ceil($x_ratio * $height);
            $tn_width = $max_width;
        }else{
            $tn_width = ceil($y_ratio * $width);
            $tn_height = $max_height;
    }

    $tmp = imagecreatetruecolor($tn_width,$tn_height);

    /* Check if this image is PNG or GIF, then set if Transparent*/
    if(($image_type == 1) OR ($image_type==3))
    {
        imagealphablending($tmp, false);
        imagesavealpha($tmp,true);
        $transparent = imagecolorallocatealpha($tmp, 255, 255, 255, 127);
        imagefilledrectangle($tmp, 0, 0, $tn_width, $tn_height, $transparent);
    }
    imagecopyresampled($tmp,$src,0,0,0,0,$tn_width, $tn_height,$width,$height);

    /*
     * imageXXX() only has two options, save as a file, or send to the browser.
     * It does not provide you the oppurtunity to manipulate the final GIF/JPG/PNG file stream
     * So I start the output buffering, use imageXXX() to output the data stream to the browser, 
     * get the contents of the stream, and use clean to silently discard the buffered contents.
     */
    ob_start();

    switch ($image_type)
    {
        case 1: imagegif($tmp); break;
        case 2: imagejpeg($tmp, NULL, 100);  break; // best quality
        case 3: imagepng($tmp, NULL, 0); break; // no compression
        default: echo ''; break;
    }

    $final_image = ob_get_contents();

    ob_end_clean();

    return $final_image;

}

echo scaleImageFileToBlob($file); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:14:32.053

您可能需要在图像输出之前发送正确的标头，例如

```
header('Content-Type: image/png');

header('Content-Type: image/jpeg');

header('Content-Type: image/gif'); 
```

# flash - gstreamer rtmpsrc 到 rtmpsink

> ID：12143639
> 
> 赞同：2
> 
> 时间：2012-08-27T14:09:19.670
> 
> 标签：flash, gstreamer, rtmp, gst-launch

我想使用 gstreamer rtmpsrc 插件从客户端机器捕获通过网络摄像头生成的实时传入 Flash 媒体流，并将其转换为一些可处理的格式。问题是当我尝试使用以下命令查看传入的 rtmp flash 媒体流时，我可以看到输出，但是当我尝试使用 filesink 将流保存到文件时，它根本不起作用。

```
gst-launch-0.10 rtmpsrc location='rtmp://127.0.0.1/flvplayback/mynewstream live=1' ! flvdemux name=d d. ! queue ! decodebin ! xvimagesink 
```

我也不会将此管道构建到 C/C++ 程序中，以便我可以处理传入的元素。我已经为“ filesrc --> appsrc --> appsink --> filesink ”编写了代码，它工作正常。

但是，当我为“rtmpsrc -->appsrc --> appsink--> rtmpsink”编写代码时，它不起作用。我是 gstreamer 编程的新手，所以你能帮我或告诉我在哪里可以获得这样的编程教程或示例的好资源。

我的系统配置：

Linux Ubuntu 12.04 64 位

crtmpserver x86_64

gstreamer 0.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-06T02:33:12.053

我认为您可以使用 flvdemux 分离视频（H.264）和音频（MPEG 4 AAC），然后处理它们。例如延迟10秒：`queue max-size-buffers=0 max-size-time=0 max-size-bytes=0 min-threshold-time=10000000000`。

例子：

`gst-launch-1.0 rtmpsrc location=rtmp://XXXX ! flvdemux name=mydemuxer flvmux name=mymuxer ! queue ! rtmpsink location=rtmp://XXXX mydemuxer.audio ! queue ! mymuxer.audio mydemuxer.video ! queue ! mymuxer.video`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:37:46.523

为什么需要appsrc 和appsink？试试 rtmpsrc ！filesink 直接转储文件。

# java - 无法运行 grep 命令

> ID：12143646
> 
> 赞同：0
> 
> 时间：2012-08-27T14:09:57.087
> 
> 标签：java, android, linux, android-mediaplayer, lsof

我试图运行以下指令，

```
 Process p = Runtime.getRuntime().exec("/system/bin/lsof|grep mediaserver"); 
```

在 android(java) 中，但出现错误。如果我按照说明运行，

```
 Process p = Runtime.getRuntime().exec("/system/bin/lsof "); 
```

文件已成功保存。谁能告诉错误是什么？实际上我想列出并检查媒体服务器服务是否正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:10:57.873

您的设备上可能未安装 grep 实用程序。

您可以通过在控制台中尝试以下操作来检查它：

```
> adb shell
$ grep
grep: not found 
```

最后一行表示此命令不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:39:28.493

问题是`Runtime.getRuntime().exec(...)`不知道如何处理shell语言。在 Linux / Unix 平台上，你会这样：

```
Process p = Runtime.getRuntime().exec(new String[]{
    "/bin/sh", "-c", "/system/bin/lsof | grep mediaserver"}); 
```

但是，（显然）Android 默认没有命令外壳/命令提示符。因此，要么您需要在设备上识别并安装合适的外壳，要么“手动”构建管道；即通过创建一个“管道”文件描述符，并执行这两个命令，以便`lsof`写入管道并`grep`从中读取。

也许答案是像这样运行它......

```
Process p = Runtime.getRuntime().exec(
        "adb shell /system/bin/lsof | grep mediaserver"); 
```

（在从 Java 执行之前，尝试从 adb 交互式运行“shell ....”部分。）

# c - 预期的 ';' 在 '{' 标记 C 代码之前

> ID：12143647
> 
> 赞同：1
> 
> 时间：2012-08-27T14:09:57.500
> 
> 标签：c, debugging

我收到上述错误。我正在用 C 编码并使用标准 gcc 编译器（命令窗口）。这是我的代码中有问题的部分。我没有看到任何错误，也许我的眼睛已经厌倦了看同一件事

```
LEADER *call_leader(double st1, double st2, double incentive, double pdis)
{
    LEADER *leader= (LEADER *)malloc(sizeof(LEADER));
    double shortest = MIN(st1, st2) ; //shortest station
    if (shortest == st1 && s1 != 0){ //no congestion
        leader->price1 = p_max;
        leader->price2 = p_max;
    }

    if (shortest == st2 && s2 != 0){ //no congestion
        leader->price1 = p_max;
        leader->price2 = p_max;
    }

    if (shortest == st1 && s1 == 0){ //congestion at station 1
        if (s2 != 0){ // no congestion at station 2, try to route
            leader->price1 = p_max;
            double cost_1 = shortest*pdrive + p_max;
            double p2 = cost1 - st2*pdrive - (sqrt(pow((st2 - st1),2)))*pdis -     incentive;
        if (p2 >= p_min){
            leader->price2 = p2;
        }else{
            leader->price2 = p_min;
        }
    }
    else if (s2 == 0){
        if (r1 >= r2){ // st1 less congestion
            leader-> price1 = p_max;
        }
Problematic Line =>     else (r1 < r2) {   //try to route s2
            leader -> price1 = p_max;
            double cost_1 = shortest*pdrive + p_max;
            double p2 = cost1 - st2*pdrive - (sqrt(pow((st2 - st1),2)))*pdis - incentive;
            if (p2 >= p_min){
                leader->price2 = p2;
            }
            else{
                leader->price2 = p_min;
            }
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:11:33.317

`... else if (r1 < r2) ...`将是语句的条件形式，但由于拳头`if`有一个补充条件，所以它`(r1 >= r2)`很简单。`else`

所以你将拥有：

```
if (r1 >= r2){
    leader-> price1 = p_max;
}
else {
    leader -> price1 = p_max;
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:11:52.677

尝试改变

```
else (r1 < r2) {   //try to route s2 
```

至

```
else if (r1 < r2) {   //try to route s2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T14:12:06.813

你不需要条件 for `else`。它在 all`if`的条件失败时执行。如果括号删除东西，你会没事的。：

```
else {
... 
```

# c# - 如何在运行时将属性级属性添加到 TypeDescriptor？

> ID：12143650
> 
> 赞同：12
> 
> 时间：2012-08-27T14:10:10.573
> 
> 标签：c#, .net, propertygrid, system.componentmodel, typedescriptor

我想向对象的属性添加一些以 PropertyGrid 为中心的自定义属性，以提供更丰富的编辑、隐藏一些值并将它们分组到类别中，因为我正在使用的那个类不提供这样的功能，我什么也做不了关于它。

确实，它是用于生成代码的 MS 的应用程序设置，因此您不能以任何方式扩展它的属性。请参阅我的另一个问题：[运行时 AppSettings.settings 编辑器对话框](https://stackoverflow.com/questions/12042056/runtime-appsettings-settings-editor-dialog/12042754)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-27T14:10:10.573

与其他人建议的不同，这是很有可能的，也没有那么难。例如，您想为某些属性添加*一些**新*属性，您可以在运行时根据某些条件选择这些属性。

 *我们需要两个帮助类来实现它。

首先`PropertyOverridingTypeDescriptor`，它允许我们为*某些*属性提供我们自己的属性描述符，同时保持其他属性不变：

```
public class PropertyOverridingTypeDescriptor : CustomTypeDescriptor
    {
        private readonly Dictionary<string, PropertyDescriptor> overridePds = new Dictionary<string, PropertyDescriptor>();

        public PropertyOverridingTypeDescriptor(ICustomTypeDescriptor parent)
            : base(parent)
        { }

        public void OverrideProperty(PropertyDescriptor pd)
        {
            overridePds[pd.Name] = pd;
        }

        public override object GetPropertyOwner(PropertyDescriptor pd)
        {
            object o = base.GetPropertyOwner(pd);

            if (o == null)
            {
                return this;
            }

            return o;
        }

        public PropertyDescriptorCollection GetPropertiesImpl(PropertyDescriptorCollection pdc)
        {
            List<PropertyDescriptor> pdl = new List<PropertyDescriptor>(pdc.Count+1);

            foreach (PropertyDescriptor pd in pdc)
            {
                if (overridePds.ContainsKey(pd.Name))
                {
                    pdl.Add(overridePds[pd.Name]);
                }
                else
                {
                    pdl.Add(pd);
                }
            }

            PropertyDescriptorCollection ret = new PropertyDescriptorCollection(pdl.ToArray());

            return ret;
        }

        public override PropertyDescriptorCollection GetProperties()
        {
            return GetPropertiesImpl(base.GetProperties());
        }
        public override PropertyDescriptorCollection GetProperties(Attribute[] attributes)
        {
            return GetPropertiesImpl(base.GetProperties(attributes));
        }
    } 
```

几点说明：

*   构造函数需要`ICustomTypeDescriptor`，不用担心，我们可以为任何类型或它的实例获取一个，其中`TypeDescriptor.GetProvider(_settings).GetTypeDescriptor(_settings)`_settings 可以是该类型之一。`Type``object`
*   `OverrideProperty`做我们需要的，稍后会详细介绍。

我们需要的另一个类`TypeDescriptionProvider`将返回我们的自定义类型描述符而不是默认的。这里是：

```
public class TypeDescriptorOverridingProvider : TypeDescriptionProvider
    {
        private readonly ICustomTypeDescriptor ctd;

        public TypeDescriptorOverridingProvider(ICustomTypeDescriptor ctd)
        {
            this.ctd = ctd;
        }

        public override ICustomTypeDescriptor GetTypeDescriptor (Type objectType, object instance)
        {
            return ctd;
        }
    } 
```

相当简单：您只需在构造时提供类型描述符实例，然后就可以了。

最后，处理代码。例如，我们希望所有以`ConnectionString`对象（或类型）结尾的属性`_settings`都可以使用`System.Web.UI.Design.ConnectionStringEditor`. 为此，我们可以使用以下代码：

```
// prepare our property overriding type descriptor
PropertyOverridingTypeDescriptor ctd = new PropertyOverridingTypeDescriptor(TypeDescriptor.GetProvider(_settings).GetTypeDescriptor(_settings));

// iterate through properies in the supplied object/type
foreach (PropertyDescriptor pd in TypeDescriptor.GetProperties(_settings))
{
    // for every property that complies to our criteria
    if (pd.Name.EndsWith("ConnectionString"))
    {
        // we first construct the custom PropertyDescriptor with the TypeDescriptor's
        // built-in capabilities
        PropertyDescriptor pd2 =
            TypeDescriptor.CreateProperty(
                _settings.GetType(), // or just _settings, if it's already a type
                pd, // base property descriptor to which we want to add attributes
                    // The PropertyDescriptor which we'll get will just wrap that
                    // base one returning attributes we need.
                new EditorAttribute( // the attribute in question
                    typeof (System.Web.UI.Design.ConnectionStringEditor),
                    typeof (System.Drawing.Design.UITypeEditor)
                )
                // this method really can take as many attributes as you like,
                // not just one
            );

        // and then we tell our new PropertyOverridingTypeDescriptor to override that property
        ctd.OverrideProperty(pd2);
    }
}

// then we add new descriptor provider that will return our descriptor instead of default
TypeDescriptor.AddProvider(new TypeDescriptorOverridingProvider(ctd), _settings); 
```

就是这样，现在所有以 结尾的属性`ConnectionString`都可以通过`ConnectionStringEditor`.

如您所见，我们只是每次都覆盖默认实现的一些功能，因此系统应该相当稳定并按预期运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T11:34:44.063

接受的答案确实有效，但它有一个缺陷：如果将提供程序分配给基类，它也适用于派生类，但是，因为`PropertyOverridingTypeDescriptor`父类（从中获取其属性）是基类类型，派生类型只会找到基类属性。这会导致例如 winforms 设计器中的破坏（如果您使用`TypeDescriptor`序列化数据，可能会导致您丢失数据）。

仅作记录，我根据@Gman 的回答制作了一个通用解决方案，并将其发布在[这里](https://stackoverflow.com/a/34511085/68972)作为我自己问题的解决方案（这是一个不同的问题，尽管解决方案使用这个解决方案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:26:07.240

如果您想要丰富的自定义 PropertyGrid，另一种设计是将您的类型包装在从 CustomTypeDescriptor 继承的类中。然后，您可以覆盖 GetProperties，使用 PropertyGrid 所需的属性注释基础类的属性。

回答相关问题的详细描述[https://stackoverflow.com/a/12586865/284795](https://stackoverflow.com/a/12586865/284795)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-15T08:59:23.907

如果您需要将 [ExpandableObject] 或 [Editor] 等属性添加到您无法编辑的对象的属性中，您可以将属性添加到属性的类型中。所以你可以使用反射来检查对象并使用

```
TypeDescriptor.AddAttributes(typeof (*YourType*), new ExpandableObjectAttribute()); 
```

然后它的行为就像你用属性修饰了*YourType*类型的所有属性。*

# sql-server - 集体网络聊天

> ID：12143654
> 
> 赞同：1
> 
> 时间：2012-08-27T14:10:14.710
> 
> 标签：sql-server, database, schema

我需要开发一个具有“高级”功能的网络聊天：分组聊天 - 就像 Skype 的聊天系统。

理论是微不足道的，但在实践中是非常困难的。从上周五开始我就在考虑这个问题，但我不知道如何应用这个架构。基本上我需要一个结构良好且没有存储冗余的数据库设计。

好的.......到目前为止看起来很简单，但现在我将介绍我们的主要功能：用户历史记录。

我可以与 2 个用户创建一个聊天。好的，两天过去了，我想添加第三个用户加入对话。他的聊天历史会有所不同：他将无法查看该聊天中的旧消息。

太棒了，对吧？请记住，朋友们：我不能使用 XML 在本地存储历史记录。我需要使用 SQL 数据库。就我而言，我使用的是 Microsoft 的 SQL-Server。

大家能理解我的问题吗？如果是的话，这不是微不足道的，对吧？行。有人能想到我该如何解决这个问题吗？我要疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:19:57.940

其实这个问题*是*微不足道的。将它存储在 XML 中将是真正的问题。

*   用户（用户 ID、名称）
*   聊天（ChatId、ChatName）
*   聊天参与（ChatParticipationId、UserId、JoinChatMessageId、LeaveMessageId）
*   ChatMessages（ChatMessageId、ChatId、UserId、消息）

通过添加`ChatParticipation`表格，您将确切知道`ChatMessageId`用​​户加入聊天的确切时间 ( `JoinChatMessageId`)，并且不会向他显示之前的消息。`LeaveMessageId`可以跟踪他何时离开聊天室。多个加入/离开可以建模为单独的参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:17:08.480

你还没有说什么语言（PHP 等）。所以这有点难，但是，如果我是从 PHP 的角度创建这个，我会根据 id 进行聊天。www.site.com/chat.php?id={id} 然后有办法相应地接受/拒绝用户。

> 我可以与 2 个用户创建一个聊天。好的，两天过去了，我想添加第三个用户加入对话。他的聊天历史会有所不同：他将无法查看该聊天中的旧消息。

为什么不给每条消息一个日期和时间，然后当用户成员进入聊天时，他们只能看到来自该日期/时间的消息？这在理论上是可行的。

因此，如果我今天下午 15:20 加入聊天，那么我只能在 15:21 或之后看到消息。

您的主要问题是实时显示消息，因为它是一个 Web 应用程序..

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:19:20.247

我不确定，我是否正确理解了您的问题。

据我了解，你需要4个表：user（userid，username），conversation（conversationid，conversationtitle），user_conversation（userid，conversationid） post（userid，conversationid，text）

user 存储在您的系统中注册的所有用户。对话存储所有对话。user_conversation 将用户映射到他们被允许进入的对话。Post 存储用户在特定对话中发布的帖子。

现在，您可以简单地按用户、对话或两者从帖子中检索数据。如果您不希望用户看到较旧的帖子，请添加日期字段。

问候

路易吉

# c# - C# Linq，在两个列表中搜索相同的项目

> ID：12143657
> 
> 赞同：5
> 
> 时间：2012-08-27T14:10:28.823
> 
> 标签：c#, linq

我们有以下设置：我们有一个对象数组，其中包含一个字符串（xml-ish 但未标准化），我们有一个带有 id 的字符串列表/数组。

我们需要找出该列表中带有 id 的字符串是否也在其中一个对象中存在。

在这里，我们有一个我们尝试过的设置：

```
public class Wrapper
{
    public string MyProperty { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        List<Wrapper> wrappers = new List<Wrapper>() 
        {
            new Wrapper{ MyProperty = "<flkds,dlsklkdlsqkdkqslkdlqk><id>3</id><sqjldkjlfdskjlkfjsdklfj>"}, 
            new Wrapper{ MyProperty = "<flkds,dlsklkdlsqkdkqslkdlqk><id>2</id><sqjldkjlfdskjlkfjsdklfj>"}
        };
        string[] ids = { "<id>0</id>", "<id>1</id>", "<id>2</id>" };

        var props = wrappers.Select(w => w.MyProperty);
        var intersect = props.Intersect(ids, new MyEquilityTester());
        Debugger.Break();
    }
}

class MyEquilityTester: IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.Contains(y);
    }

     public int GetHashCode(string obj)
     {
         return obj.GetHashCode();
     }
 } 
```

编辑：

我们期望的是，当我们执行`.Any()`on `intersect`that is时，`true`因为 wrappers 有一个带有 prop 的对象，该 prop 包含`<id>2</id>`, `intersect`is `null`。

如果我们使用了错误的方法，请说。它应该尽可能快地工作。一个简单的`true`当找到就行了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:16:17.747

对于您的情况，您可以这样写`IEqualitycomparer`：

```
class MyEquilityTester: IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.Contains(y) || y.Contains(x);
    }

    public int GetHashCode(string obj)
    {
        return 0;
    }
} 
```

它会发现

```
<flkds,dlsklkdlsqkdkqslkdlqk><id>2</id><sqjldkjlfdskjlkfjsdklfj> 
```

这是有效的，因为`GetHashCode`总是 return`0`和 `x.Contains(y) || y.Contains(x)`检查。

* * *

另一个不那么 hacky 的解决方案是`Where`结合使用 a`Any`

```
IEnumerable<String> intersect = props.Where(p => ids.Any (i => p.Contains(i))); 
```

如果您不关心实际项目并且只想要一个or ，则将其替换为`Where`另一个。`Any``true``false`

```
bool intersect = props.Any(p => ids.Any (i => p.Contains(i))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:19:55.260

```
wrappers.Where(w=>ids.Any(i=>w.MyProperty.Contains(i))) 
```

# iphone - 如何使用 GCD 创建一个 NSURLRequest 队列？

> ID：12143659
> 
> 赞同：1
> 
> 时间：2012-08-27T14:10:28.373
> 
> 标签：iphone, objective-c, cocoa-touch, nsurlconnection, grand-central-dispatch

我有一个`NSMutableArray`包含 7 个互联网`URLs`，我需要从中获取`HTTP`标题。

我正在使用这些方法`asynchronous`建立联系（并且一切都很好）：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

问题是我需要`URL`按照 的顺序下载每个`NSMutableArray`，但由于`asynchronous`连接的性质，顺序变得混乱。

我不想使用`synchronous`连接，因为它们会阻止`Main Thread.`

如何使用`GCD`on进行队列`Main Thread`以确保下载将遵循`NSMutableArray`包含 7的索引从 0 到 6 的顺序`URLs`？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:32:41.737

你不需要 GCD。您可以从第一次下载开始，然后在`connectionDidFinishLoading`或`didFailWithError`开始下一次下载。您只需要维护当前下载的索引，以便您知道您是否已完成或接下来要开始哪个下载。

以下只是这个想法的一个草图：

```
// Start the first download:
self.currentDownload = 0;
request = [NSURLRequest requestWithURL:[self.myURLArray objectAtIndex:0]];
connection = [NSURLConnection connectionWithRequest:request delegate:self];

// and in connectionDidFinishLoading/didFailWithError:
self.currentDownload++;
if (self.currentDownload < self.myURLArray.count) {
    request = [NSURLRequest requestWithURL:[self.myURLArray objectAtIndex:self.currentDownload]];
    connection = [NSURLConnection connectionWithRequest:request delegate:self];
} else {
     // All downloads finished.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:38:53.403

我认为另一种解决方案相当不灵活，使用 NSOperation 可能会更好。可以在[NSHipster](http://nshipster.com/nsoperation/)和[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)中找到对它的一个很好的介绍。还有几个关于这个主题和[这个](http://www.cocoabuilder.com/archive/cocoa/279826-nsurlrequest-and-nsoperationqueue.html)的 Stack Overflow 问题。

# dynamics-crm - CRM 2011 开发工具包

> ID：12143663
> 
> 赞同：1
> 
> 时间：2012-08-27T14:10:43.707
> 
> 标签：dynamics-crm, dynamics-crm-2011

我刚刚安装了 CRM 开发工具包，在我需要部署插件之前，一切似乎都运行良好。根据教程，当我右键单击项目包（在本例中**为 Lan2Lan**）时，我应该在**Rebuild**下方有一个**Deploy选项。**不幸的是，我没有这样的选择。有什么想法我可能做错了吗？

 ****![在此处输入图像描述](../Images/ed2d4b54e5deee7e223585b4415ffa12.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:50:29.267

如果您想以这种方式进行部署，请使用解决方案模板而不是单独的插件库模板来创建您的初始项目。它将为插件、工作流和 SilverLight 创建项目。您可以删除不需要的项目。最后，您应该有一个名为“CrmPackage”的项目，您可以右键单击它并拥有一个“部署”选项。

![在此处输入图像描述](../Images/90dd978a1f5053ff9db29f420a3c6f4f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:54:23.493

我建议如果您只维护 JScript，那么使用 CRM 2011 Package 项目。它不会创建插件、WF 和 Silverlight 项目 - 必须编译和部署这些项目会减慢您的部署速度。

就个人而言，我将 Web 资源和编译项目保存在单独的项目中，以加快我的 JScript 开发/调试/部署过程。****

# iphone - UIView Rotation 不能发生两次

> ID：12143664
> 
> 赞同：5
> 
> 时间：2012-08-27T14:10:46.110
> 
> 标签：iphone, ios, rotation, core-graphics

在我的 UITableViewCell 中，我有 UIImageView，每次用户单击该行时我想旋转 180° (didSelectRowAtIndexPath:)。代码很简单：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     UITableViewCell *curCell = [self.tableView cellForRowAtIndexPath:indexPath];
     UIImageView *imgArrow = (UIImageView*)[curCell viewWithTag:3];
     [UIView animateWithDuration:0.3 animations:^{imgArrow.transform = CGAffineTransformMakeRotation(M_PI);}];
 } 
```

问题是这总是只发生一次 - 用户第一次单击单元格时，imgArrow 正确旋转，但当第二次单击单元格时它不会旋转回来。为什么？

感谢帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T14:16:24.113

问题是视图变换属性旋转到视图原始变换指定的程度。因此，一旦您的按钮旋转 180 度，再次调用此按钮将不会执行任何操作，因为它会尝试从当前位置 (180) 旋转到 180。

话虽如此，您需要创建一个 if 语句来检查转换。如果是 180，则将旋转设置为“0”，反之亦然。

实现此目的的一种简单方法是使用`BOOL`.

```
if (shouldRotate){
     [UIView animateWithDuration:0.3 animations:^{imgArrow.transform = CGAffineTransformMakeRotation(M_PI);}];
     shouldRotate = NO;
}else{
     [UIView animateWithDuration:0.3 animations:^{imgArrow.transform = CGAffineTransformMakeRotation(0);}];
     shouldRotate = YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:15:46.527

您只是在设置转换。要应用多个变换，您必须将`imgArrow.transform`变换矩阵乘以所需的新变换。您可以使用它`CGAffineTransformConcat()`来执行此操作。

```
CGAffineTransform currTransform = [imgArrow transform];
CGAffineTransform newTransform = CGAffineTransformConcat(currTransform, CGAffineTransformMakeRotation(M_PI));
[imgArrow setTransform:newTransform]; 
```

# iphone - 在 CGPoint touchPoint 绘制圆

> ID：12143666
> 
> 赞同：1
> 
> 时间：2012-08-27T14:10:50.253
> 
> 标签：iphone, objective-c, ios, ipad, core-graphics

我正在尝试在 a 的确切点画一个圆（像点一样小）`UITouch`。

问题是，当我从用户触摸中获取触摸点时，我必须绘制`Rect`放置圆圈的位置。

为了计算出 Rect 的原点，放置它使得在其中绘制的圆圈将在原始接触点有一个中心点，我使用了毕达哥拉斯定理。

然而，这种方法并不优雅，也不准确。

有一个更好的方法吗？

```
UITouch *touch = obj;
CGPoint touchPoint = [touch locationInView:self.view];

CGContextAddEllipseInRect(context,(CGRectMake ((touchPoint.x - 5.7), (touchPoint.y - 5.7)
                                                   , 9.0, 9.0))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:29:59.890

你可以像下面那样做

```
 CFFloat radius=10;
  UITouch *touch = obj;
  CGPoint touchPoint = [touch locationInView:self.view];

  CGContextAddEllipseInRect(context,(CGRectMake ((touchPoint.x - radius/2), (touchPoint.y 
                                              - radius/2)
                                               , radius, radius))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:21:38.380

我认为你的方法很好。还有什么比毕达哥拉斯更优雅的呢？至于准确性，在常数上增加几位数字，您可以比用户对自己手指位置的感觉和系统计算更准确，从而为您提供触摸的质心。

更重要的是，我想不出一个好的选择。（也许一个：使用图像视图执行此操作，其中图像是一个圆圈，并设置[视图的锚点](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)，使其位于触摸的中间）。

# android - SharedPreferences 如何从 ListPreference 中读取标题而不是值

> ID：12143668
> 
> 赞同：1
> 
> 时间：2012-08-27T14:10:49.837
> 
> 标签：android, sharedpreferences

我正在阅读共享偏好，例如

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this); 
```

然后`preferences.getString("list_of_text_modes", "0")`我可以获得任何共享偏好的价值。在我的示例中（0 或 1）

是否也可以获得头衔，而不仅仅是价值？

例如。我正在使用 ListPreference。

```
<ListPreference
            android:entries="@array/list_of_text_modes"
            android:entryValues="@array/list_of_text_mode_values"
            android:key="list_of_text_modes"
            android:summary=""
            android:title="@string/title_language_mode" 
            android:defaultValue="default" />       

    <string-array name="list_of_text_modes">
        <item>Default</item>
        <item>Settings</item>
    </string-array>
    <string-array name="list_of_text_mode_values">
        <item>0</item>
        <item>1</item> 
```

现在如果我选择“默认”，我会得到“0”。我可以以某种方式阅读标题“默认”。或者有偏好我只能读取值？

如果我没有 0 和 1 怎么办。如果我保存为“text1”和“tetx2”怎么办。我可以通过键、值对读取吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:25:23.350

如果您有标题索引，您可以从资源中提取标题。试试这个代码：

```
CharSequence[] titles = context.getResources().getTextArray(R.array.list_of_text_modes);
String myTitle = titles[titleIndex]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:27:45.937

您只能获得价值。如果您查看可以从 DDMS -> 数据 - 数据 -> 包名称中提取的实际共享首选项文件。您将只看到存储的值和密钥，而不是标题。

但这并不是真正的问题，因为您的阵列中已经有了它。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T01:20:28.047

我也试图弄清楚这一点。最初的问题为时已晚，但我想出了一个关于 Hit 答案的变体。对于标题和值都是字符串的数组，找到索引并不简单。

```
<string-array name="sound_keys">
    <item>Gong1</item>
    <item>Gong2</item>
</string-array>
<string-array name="sound_values">
    <item>gonghi</item>
    <item>gongmid</item>
</string-array> 
```

但是由于该值是已知的，您可以搜索值数组并以这种方式获取索引，并使用它从它的数组中获取标题。我有一个功能可以做这样的事情：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
String prefValue = sp.getString("sound_values", "some default");
// the arrays used by the ListPreference
CharSequence[] keys = getApplicationContext().getResources().getTextArray(R.array.sound_keys);
CharSequence[] values = getApplicationContext().getResources().getTextArray(R.array.sound_values);
// loop and find index...
int len = values.length;
for (int i = 0; i < len; i++) {
    if (values[i].equals(prefValue)) {
        return (String) keys[i];
    }
}
// if not found use some default value 
```

# spring - Spring：相当于BeanNameAware的注解？

> ID：12143674
> 
> 赞同：1
> 
> 时间：2012-08-27T14:11:02.227
> 
> 标签：spring

有没有我可以使用的注释来代替实现 BeanNameAware？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:27:20.230

如果它是一个单例，您可以使用以下内容：

```
@Service(value=MyService.myname)
public class MyService{
  public static final String myname = "myservicename";
} 
```

否则，我认为您将不得不使用 BeanNameAware。

# ruby-on-rails-3.1 - 无法使用设计注册表单批量分配受保护的属性问题

> ID：12143676
> 
> 赞同：0
> 
> 时间：2012-08-27T14:11:18.833
> 
> 标签：ruby-on-rails-3.1, devise, ruby-1.9.3

我正在为我的应用程序使用 rails 3.1 和 ruby​​ 1.9.3。问题是，我在保存详细信息时收到“无法批量分配受保护的属性”。

我有用户模型：

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

has_one :profile
accepts_nested_attributes_for :profile

attr_accessible :email, :password, :password_confirmation, :remember_me, :profile_attributes, :first_name, :last_name

end 
```

和 Profile 模型为：

```
class Profile < ActiveRecord::Base

belongs_to :user

end 
```

我在“用户”模型和“个人资料”模型中的名字、姓氏等个人数据中几乎没有字段。我正在尝试通过自定义设计注册表单来获取所有必需的数据，如下所示：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<%= devise_error_messages! %>

<div><%= f.label :email %><br />
<%= f.email_field :email %></div>

<div><%= f.label :password %><br />
<%= f.password_field :password %></div>

<div><%= f.label :password_confirmation %><br />
<%= f.password_field :password_confirmation %></div>

<%= f.fields_for :profile do |builder| %>
    <div><%= builder.label :first_name, "First Name" %><br />
    <%= builder.text_field :first_name %></div>
    <div><%= builder.label :last_name, "Last Name" %><br />
    <%= builder.text_field :last_name %></div>
<% end %>

<div><%= f.submit "Sign up" %></div> 
```

谁能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:37:55.913

如果`first_name`和`last_name`字段属于配置文件模型，那么您应该`attribute_accessible`在配置文件模型本身中提及它。

您的个人资料模型应该看起来像

```
class Profile < ActiveRecord::Base
belongs_to :user
attribute_accessible :first_name, :last_name
end 
```

# angularjs - Angularjs - 基于浏览器/平台更改视图？

> ID：12143678
> 
> 赞同：8
> 
> 时间：2012-08-27T14:11:24.863
> 
> 标签：angularjs

是否有任何内置服务/指令/路由来根据用户访问的浏览器/平台的类型更改视图（或使用路由的页面）？我希望手机和平板电脑拥有与桌面用户不同的视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T05:23:19.673

我不知道 Angular 有什么内置的东西，但你可以通过在路由规则中插入逻辑来做到这一点。例如：

```
angular.module('browser-routing', []).
  config(function($routeProvider) {
    $routeProvider.
      when('/', {templateUrl: getBrowser() + '.html'})
}); 
```

在此示例中，如果 getBrowser() 返回`'iphone'`，它将呈现视图`iphone.html`

您可以使用 [BrowserDetect](http://www.quirksmode.org/js/detect.html)来做顾名思义。

[Chrome 和 Firefox 检测的小提琴示例](http://jsfiddle.net/5dWYW/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:59:45.817

尽管 AngularJS 没有任何开箱即用的特定功能，但有许多不同的方法可以完成类似的事情：

1.  使用[CSS3 媒体查询进行响应式设计](https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/code_example_of_responsive_web_design_using_css3_media_queries13?lang=en)。根据您的需要，这可能是您最好的选择，因为您可以避免为多个视口重新实现功能。
2.  您可以编写一个服务来检查并更改路线：

    ```
    myApp.factory('checkWidth', function ($location, $window) {
      return function () {
        if ($window.document.width < 700) {
          $location.url('/mobile');
        }
      }
    }); 
    ```

# java - 在 Java 中实现队列的最快方法

> ID：12143685
> 
> 赞同：4
> 
> 时间：2012-08-27T14:11:54.980
> 
> 标签：java, queue

我想知道我应该对此代码进行哪些更改以减少其执行时间。

```
import java.util.*;

public class ExamPeekableQueueImpl <E extends Comparable<E>> implements ExamPeekableQueue<E> {

    LinkedList<E> li = new LinkedList<E>();

    public ExamPeekableQueueImpl(){
    }

    public void enqueue(E e){
        if(li.isEmpty()){
            li.add(0, e);
        }
        else
        li.add(e);
    }

    public E dequeue(){
        li.pollFirst();
        return null;
    }

    public void printlist(){
        System.out.println(li.toString());
    }

    public E peekMedian(){
        int var = (((li.size())/2)+1);
        Collections.sort(li);
        //Integer var2 = li.get(var);
        System.out.println("the median is:" + li.get(var-1));
        return null;
    }

    public E peekMaximum(){
        Collections.sort(li);
        System.out.println("the maximum is:" + li.getLast());
        return null;
    }

    public E peekMinimum(){
        Collections.sort(li);
        System.out.println("the minimum is:" + li.getFirst());
        return null;
    }

    public int size(){
        li.size();
        return 0;
    }   
} 
```

另外我想知道是为了实现`queues`，`LinkedList`更快`ArrayList`还是任何其他数据结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:19:43.403

这是一个加载的问题。

你想加快什么*操作？*现在，您的 peekMin/Max/Mid 代码非常慢，因为您必须每次都进行排序。但是，您的插入代码很快。如果你愿意，你可以在内部维护一个排序的数据结构。这会减慢您的插入方法，但会加快您的窥视方法。像这样的操作之间通常需要权衡速度。很少能够仅加速某些数据结构上的所有操作，因此您需要选择您认为常见的操作，并对其进行优化。

这是关于您想要加快哪些操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:23:13.023

目前您有*O(1)*用于插入和*O(nlogn)*用于`getMin/getMax/getMedian`. 您可以使用排序的数据结构将*logn从 getter 移动到插入部分。*或者，您可以保持插入不变，并`getMin/getMax`通过对列表进行线性搜索并仅存储最小值进行优化。因为`getMedian`没有什么可做的，因为您**需要**一个排序集。

进一步的优化是存储最小值/最大值并在每个插入步骤期间更新这两个值。这在插入时不会有任何（非常量）变化，并将减少`getMin/getMax`到*O(1)*。（感**谢泰迪尔**）

这同样适用于`getMedian`，您可以将排序列表与链接列表并行保留。然后，您可以简单地从该列表的中间选择中位数。当然，这会将插入时间更改为*O(logn)*或更糟（取决于您使用的列表），并且还会使存储空间量增加一倍。因此，它是一种比 for 更昂贵的优化`getMin/getMax`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:18:58.803

回答你的后一个问题。请查看[此](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)主题以了解在结构中使用数组或链表之间的区别。

此外，作为建议，在声明结构时，请始终使用接口作为类型，这样您就可以在不影响功能的情况下更改实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:36:21.047

这取决于。

实际上，大多数人回答/评论没有意识到的一件事是 Collections.sort 在几乎排序的列表上提供了大约 N 性能。（N log N 是列表未排序时的性能。）

正如其他人所说，也许您应该在更改列表而不是阅读列表时进行排序。也许您应该使用有序集而不是列表。（如果您确实需要一个列表来保存一个项目的多个副本，请考虑使用有序映射并将出现次数设为值。）

您还可以考虑创建一个对象来存储集合并跟踪最小值和最大值而不对其进行排序。如果找到中位数很少，或者您可以摆脱对中位数的需要，这将很有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T15:12:37.167

在 peekMaximum() 和 peekMinimum() 方法中，您可以直接使用方法`Collections.max(li)`和，而不是对 LinkedList 进行排序`Collections.min(li)`。

我认为这将节省浪费在对列表进行排序的时间。

# debugging - ntdll.dll映射到新进程时如何闯入WinDBG

> ID：12143686
> 
> 赞同：5
> 
> 时间：2012-08-27T14:11:55.267
> 
> 标签：debugging, windbg

当 ntdll.dll 映射到新进程时，以及任何 ntdll 的进程初始化运行之前，我想使用以下命令闯入 WinDBG。

**sxe ld ntdll.dll ;g**

然而，这个技巧根本不起作用，

```
ModLoad: 7c900000 7c9b0000   ntdll.dll
eax=010043af ebx=7ffde000 ecx=020f18f5 edx=00000034 esi=00c2f720 edi=00c2f6f2
eip=7c810867 esp=0006fffc ebp=00000720 iopl=0         nv up ei pl nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000200
7c810867  ??              ???
Processing initial command 'sxe ld ntdll.dll ;g'
0:000> sxe ld ntdll.dll ;g
(ae8.6f4): Break instruction exception - code 80000003 (first chance)
eax=00181eb4 ebx=7ffde000 ecx=00000001 edx=00000002 esi=00181f48 edi=00181eb4
eip=7c901230 esp=0006fb20 ebp=0006fc94 iopl=0         nv up ei pl nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000202
ntdll!DbgBreakPoint:
7c901230 cc              int     3 
```

那么，当ntdll.dll映射到新进程时，如何闯入WinDBG呢？谢谢

**[更新]**

我完全按照 jcopenha 提到的步骤进行操作，但我不知道为什么 Windbg在运行 Notepad.exe 时会出现奇怪的错误（**内存访问错误）。**

请帮帮我！非常感谢！

```
0:000> .restart /f
CommandLine: C:\WINDOWS\NOTEPAD.EXE
Symbol search path is: D:\Symbols\Symbols;SRV*D:\Symbols\MySymbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 01000000 01014000   notepad.exe
eax=0100739d ebx=7ffd9000 ecx=020f18f5 edx=0000004e esi=00f7f73a edi=00f7f6f2
eip=7c810867 esp=0007fffc ebp=0000024c iopl=0         nv up ei pl nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000200
7c810867 ??              ???
0:000> u 7c810867
7c810867 ??              ???
            ^ Memory access error in 'u 7c810867' 
```

**[UPDATE2]** 我发现 7c810867 显示了一条奇怪的指令，但是 p 命令仍然可以工作。

它是 WinDBG 中的错误吗？

![在此处输入图像描述](../Images/65fb2dcecb8c08b6e313bf01b2a8a569.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T19:41:02.827

如果您转到 Debug->Event Filters 并将“创建进程”更改为“启用”然后重新启动应用程序，它将在 ntdll.dll 出现在模块列表中之前启动。如果您这样做`sxe ld ntdll.dll;g`，它将停止在`ntdll!RtlUserThreadStart`.

```
0:000> .restart /f
CommandLine: C:\Windows\System32\notepad.exe
Symbol search path is: SRV*d:\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 00000000`ffe00000 00000000`ffe35000   notepad.exe
00000000`7790c500 4883ec48        sub     rsp,48h
0:000> sxe ld ntdll.dll;g
ModLoad: 00000000`778e0000 00000000`77a89000   ntdll.dll
ntdll!RtlUserThreadStart:
00000000`7790c500 4883ec48        sub     rsp,48h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T23:35:12.380

关于 ntdll 的加载，我推荐阅读[这个](http://www.nynaeve.net/?p=205). 您可以在任何代码运行之前闯入该过程：

```
windbg -xe cpr notepad 
```

或者

```
windbg -xe ld:ntdll notepad 
```

此时 ntdll 仍将被映射到进程中——在这发生之前你不能闯入。

至于内存访问错误，kernel32 还没有加载到进程中。初始线程在 kernel32!BaseProcessStartThunk 处排队运行，但由于 kernel32 尚未加载到地址空间，因此您不会在该地址看到任何内容。

线程的起始地址能够在未映射的内存中开始的原因是因为在线程开始执行之前，发生的第一件事是用户 APC 在负责所有进程初始化的初始线程的上下文中运行，包括加载内核32。如果您设置类似的事件，您可以看到此事件发生，例如：

```
sxe ld kernel32 
```

您将需要加载符号以获取堆栈跟踪中的内部函数名称。

除了第一个链接，您还可以[在此处](http://www.nynaeve.net/?p=127)阅读有关进程初始化的更多信息。希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T13:03:53.733

据我记得 ntdll 不是由用户模式映射的。如果它是由用户模式映射的，那么映射 ntdll 的模块会映射什么？ntdll 包含一组用于系统调用进入内核的存根，还包含一些其他内容，例如作为进程初始化一部分的 COFF 加载程序。它有点像一个神奇的 dll，它不能被重定位，因此在每个进程中总是位于相同的虚拟地址。

如果您想在映射 ntdll 之前中断，恐怕您将不得不使用内核调试器。

请问您在映射ntdll之前尝试通过中断来实现什么？

# javascript - 函数声明 vs 函数表达式：在这种情况下会打印什么？

> ID：12143688
> 
> 赞同：1
> 
> 时间：2012-08-27T14:12:05.923
> 
> 标签：javascript, function

我读了很多关于这个论点的页面，但仍然不明白为什么会这样（声明）

```
function foo() {console.log("foo");}

(function(){
  // Really there is nothing here
})(); 
```

什么都不做，而这个（表达式）

```
var foo = function() {console.log("foo");}

(function(){
  // Really there is nothing here
})(); 
```

输出

> 富
> 
> 未捕获的类型错误：未定义不是函数

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:22:34.260

正如 Felix Kling 指出的那样，您在分配后缺少分号。

第二个匿名函数周围的括号将被解释为函数调用参数周围的括号：

```
var foo = function() {console.log("foo");}(function(){ })(); 
```

表达式`function() {console.log("foo");}(function(){ })`将返回`undefined`，因为第一个函数中没有 return 语句。最后一对括号将使其成为另一个函数调用，但由于`undefined`不是函数，您会收到特定的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:23:56.097

这就是为什么分号不应该是可选的情况。空白只是为了让我们更容易阅读。编码：

```
var foo = function() {console.log("foo");}

(function(){
    // Really there is nothing here
})(); 
```

看起来像这样

```
var foo = function() {console.log("foo");}(function(){})(); 
```

使它看起来像一个命名函数调用

```
myFunction(function(){})(); 
```

或者

```
myFunction("some code")(); 
```

第一个函数`myFunction("some code")`返回未定义，然后您尝试运行该函数。

```
~undefined~(); 
```

所以随着那里的回报。

```
var foo = function() {console.log("foo"); return undefined;}(function(){})(); 
```

如果您返回一个函数，代码将运行良好

```
var foo = function() {console.log("foo"); return arguments[0];}(function(){return "hello"})(); 
```

# asp.net - 使用代码隐藏用户控件 - 内部代码仍然运行吗？即，我是否让服务器做的比它需要的更多？

> ID：12143693
> 
> 赞同：0
> 
> 时间：2012-08-27T14:12:18.417
> 
> 标签：asp.net, user-controls, webforms, code-behind

我的网站是一个购物网站，通过检测浏览器标题，它会自动调整大小/样式并为移动/桌面浏览器安排一些零碎的东西。

重新排列一些东西的一个例子是购物车的位置。

在桌面浏览器视图中，购物车出现在右侧边缘。该站点被设计为在移动浏览器（即 iPhone）中更窄，因此在移动浏览器中显示时不存在右侧边距。在这种情况下，购物车被加载到标题中。

头部和购物车都是用户控件，而右侧边距内置在母版页中，因此，购物车用户控件的声明存在于母版页和页眉控件中。

我的 MasterPage 的相关标记如下所示

```
<div class="content">
    <div id="leftMargin" runat="server"></div>
    <div id="centre">
       <asp:ContentPlaceHolder id="centreContent" runat="server">/asp:ContentPlaceHolder>
    </div>
    <div id="rightMargin" runat="server">

        <controls:shopping ID="shoppingBasket" runat="server" />

    </div>
</div> 
```

然后我有代码隐藏，如下所示：

```
If Common.isMobile() Then
    leftMargin.Visible = False
    rightMargin.Visible = False
End If 
```

`Header`控件类似，除了隐藏一个完整的 div 之外，它隐藏了一个用户控件，即：

标记：

```
<div id="miniNav">
    <div id="mobileCart" class="mobileCart insertCart">                    
        <controls:shopping ID="shoppingBasket" runat="server" />
     </div>
     <!--- more buttons --->
</div> 
```

代码：

```
If Common.isMobile Then
    shoppingBasket.Visible = True
Else
    shoppingBasket.Visible = False
End If 
```

显然，但`Common.isMobile`功能是确定我们是否显示移动版。

所以，经过冗长的解释，我的实际问题很简单。

鉴于上面的示例，当在任何一种情况下呈现页面时，服务器是否完全忽略了所有隐藏元素的编码/标记/数据库交互等，`htmlControl.display=false`或者我是否导致服务器必须实际运行所有这些脚本两次，一旦被浪费，因为它实际上并没有做任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:27:40.790

您的代码将始终运行，它根本不会呈现给客户端。

如果您担心性能，您不应该将用户控件添加到页面。如果这不是一个选项，如果您是移动设备，您总是可以添加额外的逻辑来忽略昂贵的操作。

解决此问题的一种“可爱”方法是使用类似于 Visual WebParts 的范例，并使用服务器控件来包装您的用户控件。然后您的控件包装器会喜欢：

```
public class MyServerControl : WebControl
{
    #region Private Fields
    private const string _ascxPath = @"~/VisualControls/MyUserControl.ascx";
    #endregion

    #region Control Events
    protected override void CreateChildControls()
    {
        if (!Common.IsMobile)
        {
            var control = Page.LoadControl(_ascxPath);
            Controls.Add(this.control);
        }   
    }
    #endregion
} 
```

并且只包括 MyServerControl 而不是 MyUserControl。

# java - 用户从不同国家/地区登录时，需要在本地时间显示交易。

> ID：12143697
> 
> 赞同：0
> 
> 时间：2012-08-27T14:12:27.563
> 
> 标签：java, web-applications, servlets

如果我的 java web 应用程序部署在美国，无论客户所在的国家/地区如何，我都会获得美国时间。但是，如果客户在印度，他应该使用时区或区域设置或用户偏好来获取印度时间。我应该怎么办？

谁能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:23:24.427

通过用户 IP 地址确定国家（使用一些[网络服务](http://www.hostip.info/use.html)或任何特殊[的本地库](http://www.maxmind.com/app/geoip_country)）。如果是印度，则根据适当的时区显示时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:18:06.793

在我之前的项目（一个由不同地区办公室的客户使用的 Web 应用程序）中，我们曾经依靠对象的[getTimezoneOffset()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)值来找出客户的时区偏移量，维护到国家的偏移量地图和适当地显示区域。`Date``Javascript`

例如

*   330 -> IST
*   -240 -> 美国东部标准时间
*   -200 -> EST5EDT

ETC。，

timezoneoffset 曾经存储在客户端的 cookie 中，并用于服务器端的每个请求。如果未找到 cookie（当用户清除 cookie 时发生），我们使用了一个中间页面来确定时区偏移，设置 cookie 并将用户重定向到他打算访问的页面。

在客户端设置cookie（示例代码）：

```
document.cookie= 
    "clientOffset=" + new Date()).getTimezoneOffset() 
    + "; expires=" + expireDate.toGMTString() 
    + "; domain=<your domain>;"; 
```

在服务器端，

```
// aRequest is of type HttpServletRequest
Cookie [] cookies = aRequest.getCookies();
if (null == cookies) {
    // redirect the user to the intermediate page that gets the client offset and 
    // takes the user the actually-intended page. 
    return;
}
for (Cookie cookie : cookies) {
    // Find the cookie whose name matches the one you are looking for and 
    // read the value and parse to an integer.
} 
```

日期转换为用户的时区，如下所示：

```
// Here 'date' represents the date to be displayed in the server's time zone.
Date date = new Date();
SimpleDateFormat userDateFormat = new SimpleDateFormat("yyyyMMdd HH:mm:ss.SSS z");
// As mentioned above, you would maintain a map of clientOffset to timezone ID
// Let's say your client is in EST time zone which means you will get -240 as the
// client offset.
userDateFormat.setTimeZone(TimeZone.getTimeZone("EST"));

// This would convert the time in server's zone to EST.
System.out.println(userDateFormat.format(date)); 
```

希望这可以帮助！

# javascript - 使用 CSS 的类似银河的结构

> ID：12143698
> 
> 赞同：0
> 
> 时间：2012-08-27T14:12:28.073
> 
> 标签：javascript, html, css

我想使用 JSPlumb 构建一个节点连接器应用程序。

现在的想法是有一个中心**div**元素可以连接到所有

**div**元素沿中心**div**的圆周以特定半径 分布![在此处输入图像描述](../Images/e58db3459cce307f6243930d1c88e031.png)

附上相同的屏幕截图是可以用CSS做的

抱歉，如果我的问题使任何人感到困惑，但我决定尽可能有效地解释它。我将非常感谢有人编辑它以更好地理解观点

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:11:10.223

乱搞这个。

[http://jsfiddle.net/A7pY2/2/](http://jsfiddle.net/A7pY2/2/)

HTML：

```
<div id="container">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div> 
```

CSS：

```
#container {
     position: absolute;
    top: 300px;
    left: 300px;
}
#container div {
    position: absolute;
    background-color: #eee;
    width: 50px;
    height: 50px;
} 
```

JavaScript：

```
startCar();

function startCar() {
    var items = document.getElementById("container").getElementsByTagName("div").length;
    var angles = new Array(items);
    var rx = 200;
    var ry = 100;

    initCar();

    function initCar() {
        var content = document.getElementById("container");
        var divs = content.getElementsByTagName("div");
        var xpos, ypos;
        for(var i = 0; i < items; i++) {
            angles[i] = ((Math.PI * 2) / items) * i;
            xpos = Math.cos(angles[i]) * rx;
            ypos = Math.sin(angles[i]) * ry;
            divs[i].style.left = xpos + 'px';
            divs[i].style.top = ypos + 'px';
            divs[i].style.zIndex = parseInt(ypos);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:06:11.533

好吧，我不打算学习 JSPlumb，但我可以告诉你我将如何解决它的 HTML/CSS 方面，并提供一些关于如何在 JS 中使用该布局来发挥你优势的指针。我不认为有任何实用的非复杂/愚蠢的方式来设置仅使用 CSS 的坐标，因为这里需要数学，但你可以使用 SVG 来做到这一点，这就是 JSPlumb 似乎在其演示中使用的页。

CSS：

```
#central_div { position:relative; overflow:visible; }
/* or absolute or fixed */

.orbit { overflow:visible; }
/* no position set for orbits so stars anchor to #central_div */

.star { position:absolute; width:20px; height:20px; } 
```

HTML：

```
<div id="central_div">

    <div class="orbit" data-radius="50">
        <div class="star" data-radians="1.23"></div>
        <div class="star" data-radians="2.22"></div>
        <div class="star" data-radians="4.10"></div>
        <div class="star" data-radians="6.01"></div>
    </div>

    <div class="orbit" data-radius="100">
        <div class="star" data-radians="1.23"></div>
        <div class="star" data-radians="2.22"></div>
        <div class="star" data-radians="4.10"></div>
        <div class="star" data-radians="6.01"></div>
    </div>

</div> 
```

注意：请记住，轨道 div 都位于中央 div 的一侧。它们只是用来组织您的恒星并以数据半径属性的形式提供易于调整的轨道钩。无需在它们上设置任何尺寸或移动它们。

JS：

现在您的 JS 可以遍历轨道，获取数据半径并将其应用于星弧度或度数数据（可以轻松转换为其中一个）。我现在将几何留给您，因为这看起来更像是一个标记/css 问题，但让我们假设一个名为的函数`setStarCoordinates`接受`<star dom element object>`,`<radius>`和`<radians or degrees - your choice>`for 参数。

只有星星具有高度/宽度尺寸，但它们本身是绝对的，因此可以假设它们的容器都占据单个 x,y 点。除了几何形状，您还必须将星星的顶部和左侧坐标设置为 as`top + (.5 * height)`和 left as`left + (.5 * width)`

弧度链接： [http ://www.teacherschoice.com.au/maths_library/angles/angles.htm](http://www.teacherschoice.com.au/maths_library/angles/angles.htm)

然后是这样的循环：

```
var orbits = document.querySelectorAll('#central_div .orbit'),
i = orbits.length;

while(i--){
    var radius = orbits[i].getAttribute('data-radius'),
    stars = orbits.getElementsByClassName('star'),
    //or use querySelectorAll again if you're supporting IE8
    j = stars.length;

    while(j--){
        var thisStar = stars[j],
        radian == thisStar.getAttribute('data-radian');
        setStarCoords(thisStar, radius, radian);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:25:06.493

最简单的方法是使用带有虚线背景图像的 DIV。

然后有更多的 DIV、A 标签或任何绝对位于此之上的东西。

```
<div id="my-background-div">
    <a href="#">Node #1</a>
    <a href="#">Node #2</a>
    <a href="#">Node #3</a>
    <a href="#">Node #4</a>
</div> 
```

...等等。

不是编程解决方案，但我认为仅使用纯 CSS 是不可能的，所以我上面的解决方案对于静态页面来说是可以的。

# jquery - 用jquery中的锚链接替换http https

> ID：12143699
> 
> 赞同：1
> 
> 时间：2012-08-27T14:12:28.623
> 
> 标签：jquery

如果它有任何带有 http / https 的文本以及带有类 disableUrl 和 rel=nofollow 的链接，我将使用以下方法替换我的描述。由于我的描述也有一些图像`<img src="https://assests/..."/>`，所以图像 src 也更改为

```
<img src="<a class='disableUrl' rel='nofollow'>https://assests/...</a>"/> 
```

下面是我用过的replacePattern。

```
replacePattern = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim
replacedText = content.replace(replacePattern, "<a class='disableUrl' rel='nofollow'>$1</a>") 
```

建议我限制图像不要在图像标签内生成锚链接

编辑

描述包含带有所有标签的文本以及所有类型的数据。甚至带有带有 https:// 的 src 的图像标签

# iphone - iPhone - Twitter“选择并复制 PIN”问题

> ID：12143706
> 
> 赞同：1
> 
> 时间：2012-08-27T14:12:41.027
> 
> 标签：iphone, objective-c, ios, twitter, twitter-oauth

我想在我的应用程序中启用“使用 Twitter 登录”选项。
为此，我正在使用`Twitter-OAuth-iPhone`库（我真的需要所有这些库才能登录吗？）

无论如何，在用户输入他的推特用户名和密码并授权应用程序后，我将看到“选择并复制 PIN”消息的视图，但我无事可做。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:32:32.447

这将帮助您：

```
- (NSString *)locatePin {
    NSString *pin = [[_theWebView stringByEvaluatingJavaScriptFromString:newPinJS]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if (pin.length == 7) {
        return pin;
    } else {
        pin = [[_theWebView stringByEvaluatingJavaScriptFromString:oldPinJS]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

        if (pin.length == 7) {
            return pin;
        }
    }

    return nil;
} 
```

在您的课程之后添加这些`@implementation`：

```
static NSString * const newPinJS = @"var d = document.getElementById('oauth-pin'); if (d == null) d = document.getElementById('oauth_pin'); if (d) { var d2 = d.getElementsByTagName('code'); if (d2.length > 0) d2[0].innerHTML; }";
static NSString * const oldPinJS = @"var d = document.getElementById('oauth-pin'); if (d == null) d = document.getElementById('oauth_pin'); if (d) d = d.innerHTML; d;"; 
```

并且您需要一个库才能登录，如果您需要，此[链接](https://stackoverflow.com/questions/17207317/ios-how-to-fetch-tweet-from-twitter-api-1-1/17207745#17207745)提供了如何登录的答案。

# javascript - 显示 JSON 请求的输出

> ID：12143710
> 
> 赞同：2
> 
> 时间：2012-08-27T14:12:54.933
> 
> 标签：javascript, ajax, json

JSON URL：[http](http://en.wikipedia.org/w/api.php?format=json&action=opensearch&search=) ://en.wikipedia.org/w/api.php? format=json&action=opensearch&search= "+str+"&namespace=0&suggest=

这里的“str”可以是任何 2-3 个字符，例如 str = 'nas' 然后 JSON URL：[http ://en.wikipedia.org/w/api.php?format=json&action=opensearch&search=nas&namespace=0&suggest=](http://en.wikipedia.org/w/api.php?format=json&action=opensearch&search=nas&namespace=0&suggest=)

我想获取所有结果并将这些结果放在一个表中

我尝试了 AJAX、JSON、JQUERY 任何人都可以向我发送执行此操作的工作代码。

我的虚拟代码为：-

```
<!DOCTYPE html>
<html>
<head>
<script type="application/javascript">
function FillSearchBox(str)
{
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function()
    {

        if (xmlhttp.readyState==4 && xmlhttp.status=200)
        {
            //Pointer never Comes in this Section (If I Debuug I got xmlhttp.status=0 every time) 
            var JSONObject = JSON.parse(xmlhttp.responseText);
        }
    }
    var strr= "http://en.wikipedia.org/w/api.php?format=json&action=opensearch&search="+str+"&namespace=0&suggest=";
    xmlhttp.open("GET",strr,true);
    xmlhttp.send();
}
</script>
</head>
<body>
<form>
<input type="text" name="wikisearch" id=""   onkeyup="FillSearchBox(this.value)" />
</form>
<!-- add Table or Div Here -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:32:45.593

您需要使用 JSONP 进行跨域请求：

```
function gotData(d) { alert(d); }

var s = document.createElement('script');
s.src = "http://en.wikipedia.org/w/api.php?format=json&action=opensearch&search="+str+"&namespace=0&callback=gotData";
s.appendTo(document.body); 
```

请注意，使用 jQuery 会更容易。

# sql - 为数据中的不同列选择数据和列的总和

> ID：12143713
> 
> 赞同：10
> 
> 时间：2012-08-27T14:13:01.843
> 
> 标签：sql

我有一张这样的桌子，（有总和客户，每个人都有一些付款）：

```
customerID      Payments   InvoicCode
1                 1000         112
1                 250          456
2                 100          342
1                 20           232
2                 500          654
3                 300          230 
```

我想要的是如下（每行客户付款的总和）：

```
customerID      Payments   InvoicCode   SumPayment
1                 1000         112        1270
1                 250          456        1270
2                 100          342        600
1                 20           232        1270
2                 500          654        600
3                 300          230        300 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:15:33.333

在多行中复制范围更广的数据不是正确的正常形式。考虑更新付款或添加新客户付款的影响 - 您将必须更新该客户的所有相关总数。

创建一个视图/存储过程会更简单，它可以在运行时为您提供总计，您可以在需要时调用它们：

```
create view CustomerTotals as

  select customerID
        ,sum(Payments) as SumPayment
    from mytable
group by customerID 
```

然后您将使用以下`select * from CustomerTotals`输出引用它：

```
customerID      SumPayment
1               1270
2               600
3               300 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T14:18:05.153

这里是：

```
SELECT t.customerID,
       t.Payments,
       t.InvoicCode,
       aux.SumPayment
FROM tablename t
INNER JOIN
(SELECT customerID,
        SUM(Payments) as SumPayment
 FROM tablename
 GROUP BY customerID) aux ON t.customerID = aux.customerID 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T14:19:57.707

试试这个，（*主要适用于任何 rdbms*）

```
SELECT  a.*, b. totalPayment
FROM    paymentsTable a
            INNER JOIN
            (
                SELECT customerID, SUM(Payments) totalPayment
                FROM paymentsTable
                GROUP BY customerID
            ) b ON a.customerID = b.customerID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/7fcae/1)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T14:16:38.793

您可以创建一个视图或尝试这样的选择：

```
SELECT customerID, 
Payments, 
InvoicCode, 
(SELECT SUM(Payments) 
    FROM Customer IC 
    WHERE IC.customerID = OC.customerID )
FROM Customer  OC 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T14:17:59.153

将表加入到自身的求和版本中：

```
select mytable.customerID, Payments, InvoicCode, SumPayment
from mytable
join (select customerID, sum(Payments) as SumPayment from mytable group by 1) x
  on x.customerID = mytable.customerID 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-27T14:18:05.967

您可以使用子查询来获取总和，然后将其连接到您的表中以添加其他列。

```
SELECT x2.customerID
  , x2.payments
  , x2.invoice
  , x1.sumpayment
FROM
(
  select customerID
   ,sum(Payments) as SumPayment
  from yourtable
  group by customerID
) x1
inner join yourtable x2
  ON x1.customerID = x2.customerid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2bdc1/3)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-27T14:16:28.243

```
select t1.*,sumPay
from table t1,
(select customerID,sum(Payments) as sumPay
 from table
 group by customerID) t2
where t1.cutomerID=t2.customerID 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-27T14:15:49.127

对于 MSSQL

```
SELECT Т1.*, Т2.SumPayment
FROM TableName T1 INNER JOIN 
 ( SELECT customerId, SUM(Payments) SumPayment 
    FROM TableName
    GROUP BY customerID  
) T2 ON T1.customerID = T2.customerId 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-27T14:19:53.420

假设您的 dbms 是 MS Sql-Server，您可以使用`SUM(Payments)`with[`OVER`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句：

```
SELECT customerID, Payments,InvoicCode
   ,SumPayment=SUM(Payments)OVER(PARTITION BY customerID)
FROM t 
```

SQL小提琴：[http ://sqlfiddle.com/#!3/2ac38/2/0](http://sqlfiddle.com/#!3/2ac38/2/0)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-27T14:19:56.517

# **[SqlFiddle](http://sqlfiddle.com/#!2/cf09e/1/0)**：

```
SELECT
       t.customerID     as customerID,
       t.Payments       as Payments,
       t.InvoicCode     as InvoicCode,
       total            as SumPayment
FROM
       theTable t, 
       (
          SELECT   customerId,
                   sum(Payments) as total
          FROM     theTable
          GROUP BY customerId
       ) tmp
WHERE  
       tmp.customerId = t.customerId 
```

# android - oauth1 本机客户端流程中的经典用户名/密码登录

> ID：12143720
> 
> 赞同：1
> 
> 时间：2012-08-27T14:13:34.110
> 
> 标签：android, ios, api, oauth

我正在开发一个 Web 项目，该项目将为移动原生客户端（Android 和 iPhone）提供一个 api。我已经阅读了很多文件。由于我不想使用 SSL/TLS，我决定使用 OAuth 1，基于前主要作者对 OAuth 2.0 的 OAuth 批评。

我的问题如下；

我有一个数据库功能；`function login( email,password)`这会在无效的用户凭据中给出错误。我不明白我应该在哪里使用这个功能。

获取所有and后，函数是`function login( email, password)`API 调用之一吗？`access_token``access_token_secret`

或者

是`function login( email, password)`获取请求令牌时应该使用的中间步骤之一，获取`oauth_token`& `oauth_token_secret`？

# linux - Linux TCP 堆栈 - 对等重置或断开连接的通知

> ID：12143721
> 
> 赞同：0
> 
> 时间：2012-08-27T14:13:39.453
> 
> 标签：linux, tcp, notifications, reset, disconnect

我有一个情况-

处于已建立状态的 A-->B 之间存在 TCP 连接。A 向 B 发送几个字节，然后自行终止。B 既不做 send() 也不做 recv()。

**我想知道是否有办法知道连接已断开。**

我知道，对于断开的连接，recv() 返回“0”。但是在上述情况下 - A 已经向 B 发送了一些数据，所以第一个（一个或多个）recv() 会返回给我发送的数据，最后我会得到 recv() == 0。但我想知道断开连接，而不必从 recv 缓冲区中抽出所有数据。

1.  我想收到有关传入 FIN/RST 数据包的通知
2.  我已经激活了 keep-alive，所以我想在伙伴未回复 keep-alive 数据包时收到通知

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:34:16.773

无论您想在哪里检查实时连接，您都可以尝试`send(fd, buf, 0, 0)`发送 0 字节的数据。如果连接断开，它将失败。

# doxygen - 使用 doxygen 生成 postgis docset 文档

> ID：12143723
> 
> 赞同：0
> 
> 时间：2012-08-27T14:13:39.883
> 
> 标签：doxygen, postgis

首先对不起愚蠢的问题，这是我第一次来这里。

我正在尝试从 PostGis 2 生成 docset 文档并使用 MacOsX 的片段管理器 Dash (http://kapeli.com/dash/) 来探索它。

这里有一个现有的 doxygen 文档[http://www.postgis.org/documentation/postgis-doxygen/](http://www.postgis.org/documentation/postgis-doxygen/)，但我需要在我的机器上生成它。

[我从http://svn.osgeo.org/postgis/](http://svn.osgeo.org/postgis/)下载了最后一个主干，然后运行 ​​doxygen，其中仅包含一些子目录：

-loader -macros -postgis -raster -regress -topology

在我在 doxygen html docs 目录中运行 make 之后，它很好地生成了一个 Postgis.docset 文件。

一切顺利，但文档一团糟，并且错过了 Postgis 文档（/doc/ 子文件夹）中已经存在的所有评论。

有人有这方面的经验吗？我应该排除/包含其他子文件夹还是以某种方式指向 doxygen 中现有的 PostGis 文档？

谢谢！

更新：

感谢迈克！我无法运行`./configure`，我不得不重新下载 PostGIS 代码（2.0.1）。按照Dash 编码器的建议，`make doxygen`更改`doxygen.cfg`和文件运行良好：`doxygen.cfg.in`

```
GENERATE_DOCSET   = YES
SEARCHENGINE      = NO
DISABLE_INDEX     = YES
GENERATE_TREEVIEW = NO 
```

无论如何，文档看起来很糟糕，我试图生成类似 PostgreSQL 文档集的东西。在下一步中，我想手动生成 docset，将 html 文件直接链接到 .docset 中存在的 sqlite db 中。我在 PostGIS 中生成 html 文档时遇到问题

```
make chunked-html
make -C html/image_src images
make -C ../../../liblwgeom liblwgeom.la
make[2]: *** No rule to make target `liblwgeom.la'.  Stop.
make[1]: *** [../../../liblwgeom/.libs/liblwgeom.a] Error 2
make: *** [images] Error 2 
```

任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:47:20.737

感谢 Mike 的及时回答，但我对 doxygne 的输出不满意。对不起，我不能投票给你的答案，因为我没有足够的声誉。我最终从[http://postgis.refractions.net/documentation/manual-2.0/](http://postgis.refractions.net/documentation/manual-2.0/)下载了现有文档，并手动创建了 sqlite db，将所有内容打包在 docset 中，如此处所述[http://kapeli.com/文档集/](http://kapeli.com/docsets/)。如果有人感兴趣，我会发布更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:40:56.183

您可以使用`make`它为您构建它。此外，请确保您在 PATH 上安装了[Graphviz 。](http://www.graphviz.org/)

从源根：

```
./configure
cd doc
make doxygen 
```

要构建文档的其他组件，请参阅[doc/README](http://trac.osgeo.org/postgis/browser/trunk/doc/README)。

# netbeans - 如何将 Netbeans 中的所有编译错误显示为任务列表？

> ID：12143726
> 
> 赞同：25
> 
> 时间：2012-08-27T14:13:47.637
> 
> 标签：netbeans, netbeans-7.2

Netbeans 7.2 中有没有办法让所有打开的项目的所有编译错误都显示在某个任务列表中，就像“操作项”一样？我就是找不到。

这背后的原因是我做了一些方法签名更改，例如影响 20 个不同的调用者，我想连续更改这些调用者，而不必通过项目树。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-27T14:33:13.657

1.  *您可以在操作项*窗口中为此创建一个过滤器：**操作项过滤器 -> 新建**（检查*编译错误*）
2.  将*Action Items***范围**设置为“*所有打开的项目*”

# .net - 将 DataGrid 单元格设为只读

> ID：12143734
> 
> 赞同：1
> 
> 时间：2012-08-27T14:14:25.147
> 
> 标签：.net, windows, winforms, datagrid, compact-framework

有 DataGrid (WinForms / .NET CF 3.5) 与 DataSource 绑定以列出对象。如何禁用单元格中的数据编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:43:27.007

尝试这个，

```
dt.Columns(0).ReadOnly = True '// Make the column(0) readonly and assign to DataGrid.

dataGridView1.DataSource = dt 
```

此代码可以使您设置为只读的任何列。顺便一提，

> dt

表示为用于将数据从数据库及其数据源收集到数据网格 dataGridView1 的数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:25:13.183

您可以尝试使用 DataGridView 而不是 DataGrid 并将其 EditMode 属性设置为 EditProgrammatically

```
 dataGridView1.EditMode = DataGridViewEditMode.EditProgrammatically; 
```

# jquery - Requirejs 2.0 和 jQuery with Plugins using ShimConfig 需要路径吗？

> ID：12143737
> 
> 赞同：4
> 
> 时间：2012-08-27T14:14:57.227
> 
> 标签：jquery, jquery-plugins, requirejs

我正在使用 requirejs 2.x 并从 CDN 加载 jQuery 并在本地文件中备份。我正在尝试使用 shim 配置解决方案加载 jQuery 插件。这似乎在快速连接和本地浏览器上运行良好，但是当我通过无线或慢速连接进行测试时，我似乎在插件正在寻找 jquery 并且尚未加载的地方出现随机错误。尽管我浏览过与此问题相关的文档和其他网站，但设置看起来不错。

下面是一个示例。

```
// main.js    
requirejs.config({
   baseUrl: "scripts",
   paths: {
      "jquery" : [
         "//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min",
         "libs/jquery/jquery-1.8.0.min"
      ],
      "$plugins":"./libs/jquery",
      "modules" : "./app/modules",
   },
   shim: {
      "jquery.easing" : ["jquery"],
      "jquery.urlutils": ["jquery"]
   },
   priority: ["jquery"]
});

// somemodule.js
define([
   'modules/otherModule',
   'jquery',
   '$plugins/jquery.urlutils'
], function( OtherModule, $ ) {
   // code...
}); 
```

在这里我们可以看到“somemodule”正在加载 jQuery 和 otherModule（工作正常）。另一方面，jquery 有时仅在插件之前加载。我尝试使用直接路径将插件添加到路径对象，然后在上面的“somemodule”中省略 $plugins 路径。这似乎每次都设置得很好。但这不会破坏 shim 的目的吗？不喜欢我必须设置路径并设置它的依赖项的事实。

任何帮助，将不胜感激。它快把我逼疯了。:)

我错过了什么吗？还是我需要在 jquery 插件之前使用 $plugins 路径为 shim 键添加前缀？

## 可能的解决方案

我找到了解决方案……我相信；我仍在测试以确认跨浏览器。

请注意 shim 中 jquery 插件 (jquery.urlutils) 的路径以及“somemodule”中定义的依赖项列表。另请注意，我使用的是指向插件实际位置的路径。

另请注意，我最终没有使用“enforeDefine”，如果我这样做了，我会再次收到错误和/或“定义不存在”错误。

```
requirejs.config({
   baseUrl: "scripts",
   paths: {
      "jquery" : [
         "//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min",
         "libs/jquery/jquery-1.8.0.min"
      ],
      "$plugins":"./libs/jquery",
      "modules" : "./app/modules",
   },
   shim: {
      "$plugins/jquery.easing" : ["jquery"],
      "$plugins/jquery.urlutils": ["jquery"]
   },
   priority: ["jquery"]
});

// somemodule.js
define([
   'modules/otherModule',
   'jquery',
   '$plugins/jquery.urlutils'
], function(OtherModule, $ ) {
   // code...
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:00:50.290

实际上，我现在正在阅读整个 RequireJS 2.0 文档，并且发现了我认为可以解决您的问题的内容。

您需要在 require config 中设置，如下所示`enforceDefine`：`true`

```
requirejs.config({
    //To get timely, correct error triggers in IE, force a define/shim exports check.
    enforceDefine: true,
}) 
```

这种强制要求`undef()`模型出错，并等待模型正确定义后再继续。[在这里](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-ieloadfail)阅读

进一步阅读文档后，您似乎还必须将该`exports`值设置为包含脚本的返回值，以便 require 有一个可以检查加载是否成功的变量。将 jquery 和 jquery-ui 添加到您的 shim。

```
shim: {
    "jquery": {
        exports: "jQuery"
    },
    "jquery-ui": {
        deps: ['jquery'],
        exports: "jQuery.ui"
    }
} 
```

# java - 仅在没有 gwt 调试的情况下运行 java 项目时出现 ClassCastException

> ID：12143739
> 
> 赞同：0
> 
> 时间：2012-08-27T14:15:01.540
> 
> 标签：java, javascript, gwt, maven, classcastexception

我想知道是否有人已经有这种 javascript 错误：

在 Chrome 控制台中：

```
Uncaught java.lang.ClassCastException (anonymous function)
EED997003B4F236C1F5D6AE53E1170DA.cache.html:1624 
```

使用火狐：

```
CallPageHandler method : 
'java.lang.ClassCastException' when calling method: [nsIDOMEventListener::handleEvent] 
```

考虑到当我以调试模式（gwt eclipse 插件 + 插件 chrome 浏览器）执行我的项目时，我有 0 个错误/警告。所以前面的错误只发生在不使用 gwt 调试的情况下（项目是用 maven 成功构建的）。

我已经检查了我的客户端源数次以发现可能的错误，但我什么也没发现......

也许我在 pom 文件中的 gwt 插件配置不正确（并且可能是对调试和非调试模式之间不同行为的解释）：

```
 <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwt.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwt.version}</version>
        <scope>compile</scope>
    </dependency>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>${gwt.version}</version>
            <executions>
                <execution>
                    <configuration>
                        <webappDirectory>${basedir}/target/${project.build.finalName}</webappDirectory>
                        <module>[myMainClass]</module>
                    </configuration>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

*   我正在使用 2.4.0 gwt 版本和 2.0 maven 插件。

感谢您的帮助，如有必要，我可以提供更多详细信息！

```
>>> Resolved (see comments...) <<< 
```

# java - 如何编译java代码设置类加载器（通过ant任务）

> ID：12143740
> 
> 赞同：0
> 
> 时间：2012-08-27T14:15:02.773
> 
> 标签：java, ant, compilation, classloader, javac

我需要设置编译我的代码的任务ant的javac的类加载器..我已经阅读[了这个stackoverflow帖子](https://stackoverflow.com/questions/945971/use-a-custom-classloader-at-compile-time)但是这个

`javac -J-Djava.system.class.loader=org.awesome.classloader sourcefile.java`

没有为我工作，总是返回类未找到异常..而且，是的，我为源代码和编译的类加载器**.class设置了类路径**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:30:32.653

经过对这项任务的一些研究，我找到了一种方法。我初始化了一个自定义类加载器，然后通过 Java 6 的新编译器 API 使用它

[http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)

# qt - Qt 4.8：布局：如果没有更多可用空间，则隐藏小部件

> ID：12143742
> 
> 赞同：1
> 
> 时间：2012-08-27T14:15:10.753
> 
> 标签：qt, layout

我的应用程序窗口可以调整为零大小。我不想限制最小窗口大小。HBoxLayout 有几个小部件（QLineEdits、QLabels、QPushButtons）布局集。

起初，当窗口非常小时，HBoxLayout 中的所有小部件都在不考虑它们的 sizeHint 的情况下调整大小。然后我在他们身上使用了 setFixedSize(sizeHint) 。现在它们不会缩小到 sizeHint 以下，而是在窗口非常小时时开始重叠。

我想要的是 Thunderbird 所做的（附截图）：它通过将小部件移出窗口边框来平滑地隐藏它们。它们的大小不变。

如何使用 Qt 布局系统实现这一目标？

```
my application: normal window
http://i.stack.imgur.com/WLgLy.png

my application: small window
http://i.stack.imgur.com/IIhhs.png

Thunderbird: normal window    
http://i.stack.imgur.com/AYJ83.png

Thunderbird: small window
http://i.stack.imgur.com/ZyQou.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:04:47.920

1.  将您的小部件放入 QScrollArea
2.  将垂直和水平滚动条策略设置为 AlwaysOff
3.  根据需要布局滚动区域

完成并完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:31:30.700

可能这不是你想要的，但考虑一下：把你所有的东西放在一个小部件中（这里只命名为“小部件”），不要把这个“小部件”放到任何布局中，让它自由并将这个事件函数添加到你的窗口类：

```
void MainWindow::resizeEvent(QResizeEvent *event){
   ui->widget->move(QPoint(event->size().width()-ui->widget->width()-20,ui->widget->y()));
   QMainWindow::resizeEvent(event);
} 
```

有用！

# bash - sed 内部的管道

> ID：12143745
> 
> 赞同：1
> 
> 时间：2012-08-27T14:15:16.263
> 
> 标签：bash, sed

有没有办法将 SED s/// 命令的反向引用发送到管道？为了从文本中获取条目，更改它，然后将其写回。我发现 SED 内部的替换有效：

```
$ echo 'Test ....' | sed 's/Test/'$( echo "<\0>" )'/' 
<Test> .... 
```

但是第一个管道没有：

```
$ echo 'Test ....' | sed 's/Test/'$( echo "<\0>" | tr 's' 'x' )'/' 
<Test> .... 
```

是什么原因？此外，我完全不明白为什么这会起作用。我认为应该在 sed 之前处理 $() 替换（当我打破引号时更是如此）。

以及如何使用 sed 将一个 s/// 命令插入另一个？我使用 bash。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:18:46.220

该`tr`命令对文本“<\0>”进行操作，而不是对“<Test>”进行操作。`sed`直到管道完成后，反向引用才会展开。你的第二个例子相当于

```
foo=$( echo "<\0>" | tr 's' 'x' )
echo 'Test ....' | sed 's/Test/'$foo'/' 
```

这里更容易看到`tr`在其输入中无法看到“测试”的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T15:16:14.800

您可以使用 GNU sed 和`e`标志来实现您想要的效果：

```
echo 'Test ....' | sed 's/Test.*/echo "<\0>" | tr s x/e' 
```

输出：

```
<Text ....> 
```

# javascript - 如何获取帖子数据

> ID：12143749
> 
> 赞同：1
> 
> 时间：2012-08-27T14:15:33.437
> 
> 标签：javascript, facebook-javascript-sdk

我的代码在 javascript 下面，但响应为空。

```
var query = FB.Data.query("SELECT link_id, owner, owner_comment, created_time, title, summary, url, image_urls FROM link WHERE owner="+response.id+"url = 'http://xys.com/xyz'");
                 query.wait(function(rows) {alert(rows);return false;
   if(!rows[0]){
   alert('You have not Liked the Page.');
   }else{
   alert('Congratulations!!!');
   //document.promocode.submit();
   }
                 }); 
```

# browser - 如何删除 Textmate 中的快捷方式？

> ID：12143753
> 
> 赞同：0
> 
> 时间：2012-08-27T14:15:50.357
> 
> 标签：browser, keyboard, textmate, shortcut

每当我在 TextMate（版本 1.5.11）中按 CMD + R 时，它都会打开 Safari。

如何禁用该快捷方式，或者至少让它打开 Chrome？

在 TextMate 首选项和系统首选项的应用程序快捷方式上都找不到任何内容。

# magento - Magento 使用 gd2 错误图像调整大小

> ID：12143765
> 
> 赞同：1
> 
> 时间：2012-08-27T14:16:32.897
> 
> 标签：magento, resize, gd2

当原始图像是条纹或格子衬衫时，我无法从某些图像中获得好的拇指。

使用 Varien_Image_Adapter_Gd2 类（magento 1.5 版本）中的 magento 的 gd2 库 resize()，我获得了一个具有奇怪效果的图像，可以修改真实图像的方面。

我找不到这个效果的名称，所以我无法在谷歌上搜索这个问题！:(

您可以在这两张图片中看到我的问题： ![原来的](../Images/9aade7e1517e619314565b0d63d8fc0b.png) ![拇指](../Images/383ac04789330deda157abeaae6ab559.png)

如您所见，在拇指图像上，特别是在左上角位置有一些滚动的奇怪线条。

这个问题在格子衬衫上更为明显，所以我必须找到解决方案来纠正这个问题。

如果有人对这个问题有一些建议，请告诉我！:)

谢谢卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:37:46.047

'Moire' 是您描述的模式，由于使用了可能使用或不使用双三次缩放的 'gd2' 库，它特别明显。

我不确定@Guerra 是否理解这里的问题，但对我来说，这是直接缺乏双三次（或更好）缩放。

请参阅此问题的答案并点击链接：

[https://stackoverflow.com/a/255666/1617149](https://stackoverflow.com/a/255666/1617149)

因此，您可能希望使用 imagemagick 而不是 Magento 附带的标准 gd2 库并使用过滤器来为前端缩放图像。

您可以通过 php（正确的方式）运行 imagemagick，或者，如果您在旅途中进行复杂的图像处理，您可以使用命令行 'exec' 并以这种方式对图像处理进行原型设计。我没有任何可直接使用的代码，但是，这正是您需要的：比 gd2 更好的缩略图渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:54:34.390

尝试使用 cloudzoom，他会根据您的需要自动调整您的图像大小。 [http://ecommerce-team.com/cloud-zoom.html](http://ecommerce-team.com/cloud-zoom.html)

# jquery - 围绕着 jQuery 的 .trigger 事件的具体使用

> ID：12143766
> 
> 赞同：1
> 
> 时间：2012-08-27T14:16:36.350
> 
> 标签：jquery

我正在尝试浏览并记录一个插件，以便了解它是如何工作的，并且我遇到了一个以我无法理解的方式使用 .trigger 的函数。据我所知， .trigger 通常用于调用自定义事件。这是插件中触发器的这个用例：

```
$( this ).trigger( "beforecreate." + pluginName )
[ pluginName ]( "_init" )
[ pluginName ]( "_addNextPrev" )
.trigger( "create." + pluginName ); 
```

谁能向我解释这是在说什么？语法与 jQuery 文档中的不同，所以我假设它是某种速记或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:38:19.097

我假设您对 the`[...]`而不是`.trigger`. 在 JavaScript 中有两种访问对象属性的方法：点表示法 ( `obj.someProp`) 和括号表示法 ( `obj['someProp']`)。
如果属性名称不是有效的标识符（例如，如果它包含空格），或者您在变量中有属性名称，则必须使用括号表示法，这就是这种情况。

让我们假设

```
var pluginName = 'foo'; 
```

那么上面的代码相当于：

```
$( this )
  .trigger( "beforecreate." + pluginName )
  .foo( "_init" )
  .foo( "_addNextPrev" )
  .trigger( "create." + pluginName ); 
```

这是另一个（虚构的）示例。这两个是等价的：

```
$(this).find('.foo');
$(this)['find']('.foo'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:32:52.007

长话短说：

```
//  This is triggering the "beforecreate" EVENT on the plugin
$( this ).trigger( "beforecreate." + pluginName )
//  is calling the initialize event within the class
[ pluginName ]( "_init" )
//  i assume is calling another method in the class, probably to set specific html to the element being modded
[ pluginName ]( "_addNextPrev" )
//  Now that everything has been setup and the element has been "Created" into the plugin,
//    the coder is now triggering the plugin upon that element
.trigger( "create." + pluginName ); 
```

# jquery - jquery .append 函数顺序问题

> ID：12143774
> 
> 赞同：0
> 
> 时间：2012-08-27T14:17:11.160
> 
> 标签：jquery, append

我知道这个话题并不具体。让我告诉你。

我有一个文本框和按钮。当您输入内容并单击按钮时，它会创建 div 并将其附加到另一个 div。但问题是它必须将其附加到页面顶部。它将成为第二个 div。

jQuery代码：

```
$('#send').click(function() {
   var not=$('#not').val();

   $.ajax({
    type:"POST",            
    url: "some.php?islem=not",
    data:{not:not},
    success: function(result){
        $('#comment_box').append('<div class="comment">'+not+'</div>'); 
    }   
   });
}); 
```

html代码：

```
<textarea style="width: 794px; height: 48px;" id="not"></textarea>
<input type="button" value="Yolla" style="margin-top:35px;" id="send"/>

<div id="comment_box">
    <div class="comment">comment-1</div>
    <div class="comment">there is comment in here-2</div>
    <div class="comment">there is comment in here-3</div>
    <div class="comment">there is comment in here-4</div>
    <div class="comment">there is comment in here-5</div>
</div> 
```

当我添加一些东西时，新的 div 在comment-1 之后显示，我希望它是第一个。因为它是最新的评论，它必须是第一个，在页面的顶部。

抱歉英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:19:39.160

尝试 .prepend() [http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:19:45.150

使用[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/) `perpend`而不是 append

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:19:57.983

而不是`.append()`使用`.prepend()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T14:20:21.157

使用“之前”而不是附加：

```
$('#comment_box').before('<div class="comment">'+not+'</div>'); 
```

*爱土耳其键盘中的我呵呵

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T14:24:50.310

我建议或多或少相同的事情，但对您最初发布的代码略有改动：

```
$('<div />', {'class' : 'comment'}).prependTo('#comment_box'); 
```

element-creation 指定要创建的元素，并作为第二个参数接受一个对象，该对象定义了应该创建该元素的属性/属性。

这使得从长远来看（在大型项目中）维护代码更容易一些，尽管这或多或少是纯粹的个人意见，没有我可以为这种方法提供支持的指标。

**针对OP的问题进行了**编辑：****

 **> 我应该在哪里插入文本？我想用数据添加 div。

要将文本添加到元素，有两种方法：

```
$('<div />', {'class' : 'comment', 'text' : not}).prependTo('#comment_box'); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/5N9KZ/)。

或者：

```
$('<div />', {'class' : 'comment'}).text(not).prependTo('#comment_box'); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/5N9KZ/1/)。

**针对OP的问题进行了**编辑：****

 **> 我可以问最后一个问题吗？我想在之后添加，`not`但它不起作用

为此，您需要获取对`div`插入的引用，然后只需在`br`之后插入元素`div`：

```
var newDiv = $('<div />', {'class' : 'comment'}).text(not).prependTo('#comment_box');
$('<br />').insertAfter(newDiv); 
```

如果你想要你刚刚创建的，那么`br` *只需*使用：`div``append()`

```
$('<div />', {'class' : 'comment', 'text' : not}).append('<br />').prependTo('#comment_box'); 
```

或者：

```
$('<div />', {'class' : 'comment'}).text(not).append('<br />').prependTo('#comment_box'); 
```

参考：

*   [`append()`](http://api.jquery.com/append/).
*   [`jQuery(html, props)`](http://api.jquery.com/jQuery/#jQuery2)，这是该部分的最后一部分。
*   [`prependTo()`](http://api.jquery.com/prependTo/).
*   [`text()`](http://api.jquery.com/text/).****

# css - 替换文本块

> ID：12143776
> 
> 赞同：0
> 
> 时间：2012-08-27T14:17:19.380
> 
> 标签：css, html

我在这里有一个问题 [Replacing an image (in an <img /> tag) using css](https://stackoverflow.com/questions/12142386/replacing-an-image-in-an-img-tag-using-css)

关于图像替换，现在我对文本有另一个疑问

我有以下代码

```
<div class="A">
<a class="B" href="#">Learn more</a>
</div> 
```

在媒体查询css中，我想不再显示文本，这种情况我该怎么办？

```
.A a .B
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:29:47.283

识别的新方法是不使用负缩进（因为它会创建一个由浏览器呈现并导致性能下降的大框）是使用 Kellum 方法，请参见[zeldman.com](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)，如下所示：

```
.A a.B {
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:18:59.817

尝试这个：

```
.A a.B
{
    text-indent:-9999px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:19:28.927

a 和 .B 之间有一个空格，这意味着 css 解析器正在寻找一个 .B INSIDE 标记。

您的代码应如下所示：

```
.A a.B
{
    text-indent:-999em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:22:22.593

在 和之间有一个空格`a`，`.B`这意味着元素内具有 B 类的任何`a`元素。

我猜你的意思是`.A a.B`

```
.A a.B
{
  display:none;
} 
```

# c# - Asp.net MCV4 框架问题

> ID：12143777
> 
> 赞同：12
> 
> 时间：2012-08-27T14:17:21.753
> 
> 标签：c#, asp.net, asp.net-mvc-4

我使用 VS 2012 和 MVC4 创建了一个网站，它在我的本地主机上工作，但是当我发布并放置我的主机时它不起作用。IIS 配置是相同的。但它给了我这个错误行：

这是错误；

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: The 'targetFramework' attribute in the <compilation> element of the Web.config file is used only to target version 4.0 and later of the .NET Framework (for example, '<compilation targetFramework="4.0">'). The 'targetFramework' attribute currently references a version that is later than the installed version of the .NET Framework. Specify a valid target version of the .NET Framework, or install the required version of the .NET Framework.

Source Error: 

Line 20:   </appSettings>
Line 21:   <system.web>
Line 22:     <compilation targetFramework="4.5" />
Line 23:     <httpRuntime targetFramework="4.5" />
Line 24:     <authentication mode="Forms"> 
```

提前感谢您的建议

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-25T00:13:31.713

将此标签更改为 4.0：

```
<compilation targetFramework="4.0" /> 
```

并删除此标签：

```
<httpRuntime targetFramework="4.5" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T09:51:34.083

我在服务器上安装 nopCommerce 2.80 时遇到了类似的问题。我使用 IIS7 网络。4.0集成池。并且刚刚从 WebMatrix Products->Frameworks 部分安装了 .net 4.5。将需要重新启动。然后它开始工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T14:43:30.503

您必须在 IIS 中将应用程序池更新为 .net 4.0。它目前可能设置为 2.0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T14:54:14.250

很有可能 IIS 没有安装 4（或者如果它是该站点未指定使用它）。假设您正在运行 IIS7，请查看这篇文章：

*   [如何在 IIS 7、Windows 7 上将 ASP.NET 4.0 添加为应用程序池](https://stackoverflow.com/questions/4890245/how-to-add-asp-net-4-0-as-application-pool-on-iis-7-windows-7/4890368#4890368)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-09T14:01:22.850

您只需在 IIS 7.5 服务器中将 .NET 框架升级到 4.5 版，您可以使用**Microsoft Web 安装程序**搜索 .NET，然后安装 .NET 框架 4.5 版，所有针对该版本的应用程序将工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-16T13:22:59.107

您必须安装 .net framework 4.5 才能正常工作。.net framework 4.0 无法识别“targetframework”属性。因此，在命令提示符下运行以下命令并检查是否安装在主机上的 .net 版本 4.5。如果没有，则安装 .net framework 4.5。它将正常工作。在 cmd 上运行此命令，如下所示。

```
wmic /namespace:\\root\cimv2 path win32_product where "name like '%%.NET%%'" get version 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-18T13:59:49.960

运行这个：[Microsoft .NET Framework 修复工具](https://www.microsoft.com/en-us/download/details.aspx?id=30135)

*   如果您需要针对与 Internet 隔离的服务器运行，请确保您在脱机模式下运行。

# java - 无法完成安装，因为找不到一项或多项所需项目

> ID：12143778
> 
> 赞同：2
> 
> 时间：2012-08-27T14:17:29.880
> 
> 标签：java, eclipse

我尝试安装 Green UML，它说：

> 无法完成安装，因为找不到一项或多项所需项目。
> 正在安装的软件：Green 3.5.0 (Green.feature.group 3.5.0)
> 缺少要求：Green 3.5.0 (Green.feature.group 3.5.0) 需要 'org.eclipse.core.boot 0.0.0' 但它找不到，

我该如何安装`org.eclipse.core.boot 0.0.0`？我尝试了许多其他 UML 工具，但总是遇到同样的错误。我正在使用**Eclipse Juno**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:47:02.590

如果您想在 Eclipse 4.2 (Juno) 上运行 Green UML，请添加

[http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

前往帮助 -> 安装新软件的站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:45:11.357

看起来您的 UML 插件需要[Eclipse Core Tools](http://wiki.eclipse.org/Core_Tools)

从这里获取：http: [//www.eclipse.org/eclipse/platform-core/downloads.php](http://www.eclipse.org/eclipse/platform-core/downloads.php)

您提到的 UML 工具`Green UML`和`euml2`，目前都没有显示对 Eclipse Juno 的支持。可能这就是他们不工作的原因。它们显示 Eclipse 3.7 (Indigo) 之前的版本兼容性

# nhibernate-mapping - NHibernate 映射多对一 fetch="join" 公式

> ID：12143780
> 
> 赞同：0
> 
> 时间：2012-08-27T14:17:40.007
> 
> 标签：nhibernate-mapping

我有桌子：

```
PROCESSES  STEP_STATUSES  STEPS
---------  -------------  -----------
PROC_ID    STAT_ID        STEP_ID
PROC_NAME  NAME           STEP_NUMBER
...                       STEP_NAME
                          ...
                          STAT_ID
                          PROC_ID 
```

有什么方法可以将 Processes 表映射到 NHibernate 中，并带有 CurrentStep 属性（这是一个映射的 STEPS 表行）？

我几乎可以用映射做我需要的事情：

```
<many-to-one name="CurrentStep" formula="(
  select t.step_id
  from STEPS t
  where PROC_ID = t.PROC_ID 
    and STEP_NUMBER = nvl((select max(STEP_NUMBER), PROC_ID from STEPS where STAT_ID > 0 and PROC_ID = t.PROC_ID),
                                (select min(STEP_NUMBER), PROC_ID from STEPS where STAT_ID = 0 and PROC_ID = t.PROC_ID))
)"/> 
```

但是我不能为这个字段设置 fetch="join"，我想用一个查询来获取所有数据，连同 CurrentStep 属性值——像这样：

```
select t.*, st.*
from PROCESSES t
left outer join (
    select STEP_ID, PROC_ID 
    from STEPS s1
    where STEP_NUMBER = nvl((select max(STEP_NUMBER) from STEPS where STAT_ID > 0 and PROC_ID = s1.PROC_ID),
                            (select min(STEP_NUMBER) from STEPS where STAT_ID = 0 and PROC_ID = s1.PROC_ID))
          ) s on s.PROC_ID = t.PROC_ID
left outer join STEPS st on st.PROC_ID = s.PROC_ID and st.STEP_ID = s.STEP_ID 
```

这是必要的，因为性能。

所以，问题ID：

1.  有没有办法为这样一个复杂的公式字段设置 fetch="join" ？
2.  有没有办法加入这样一个复杂的子查询？
3.  如果无法设置映射，有什么方法可以创建 ICriteria 来获得这样的查询结果？

如果问题不清楚，我很抱歉，如果出现任何问题，我会尽力澄清/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:17:39.720

使用批量读取查询您想要的内容的想法

```
var lastStepWithStatus = session.CreateCriteria<Step>()
    .Add(Restriction.Eq("Process.Id", processId))
    .Add(Restriction.NotNull("Status"))
    .AddOrder(Order.Desc("Number"))
    .SetMaxResults(1)
    .Future<Step>();

var firstStepWithoutStatus = session.CreateCriteria<Step>()
    .Add(Restriction.Eq("Process.Id", processId))
    .Add(Restriction.IsNull("Status"))
    .AddOrder(Order.Asc("Number"))
    .SetMaxResults(1)
    .Future<Step>();

return lastStepWithStatus.Concat(firstStepWithoutStatus).Select(step => new { Process = Step.Process, CurrentStep = step }).FirstOrDefault(); 
```

另一种选择是在 Steps 集合上使用 LINQ 来获取当前步骤，这意味着首先加载所有步骤。

# jquery - 在 New .Animate() 上停止 Jquery .Animate()

> ID：12143782
> 
> 赞同：1
> 
> 时间：2012-08-27T14:17:47.403
> 
> 标签：jquery, jquery-animate

我正在尝试为推送框设置动画以显示该区域要做的事情的列表。

不幸的是，如果您足够快地单击 2 个或更多框，它会展开所有单击的框，然后锁定框以防止再次被选中。

您可以单击任何未选中的框，它会起作用，但我终生无法阻止其中两个同时出现的问题。

我不是 100% 确定我是否正确使用了 .stop 命令。

请帮忙！

这是我的代码。这里还有一个带有一些演示的 jsfiddle 链接。[http://jsfiddle.net/hceFT/4/](http://jsfiddle.net/hceFT/4/)

```
$(document).ready(function() {
    $("#attractionsbox").css( { width:0 } );
    $("#entertainmentbox").css( { width:0 } );
    $("#diningbox").css( { width:0 } );
    $("#attractionspointer").css( { width:0 } );
    $("#entertainmentpointer").css( { width:0 } );
    $("#diningpointer").css( { width:0 } );
    $("#experiences").css( 'overflowY' , 'hidden' );
});

$("#freefunbutton").click(function() {
    if ($("#freefunbox").width()) {} else {
        $(".contentbox").stop(true, false).animate({
            width: 0
        }, 200, function() {
            $(".pointer").animate({
                width: 0
            }, 50, function() {
                $("#freefunpointer").animate({
                    width: 40
                }, 50, function() {
                    $("#freefunbox").animate({
                        width: 500
                    }, 200);
                });
            });
        });
    }
});

$("#attractionsbutton").click(function() {
    if ($("#attractionsbox").width()) {} else {
        $(".contentbox").stop(true, false).animate({
            width: 0
        }, 200, function() {
            $(".pointer").animate({
                width: 0
            }, 50, function() {
                $("#attractionspointer").animate({
                    width: 40
                }, 50, function() {
                    $("#attractionsbox").animate({
                        width: 500
                    }, 200);
                });
            });
        });
    }
});

$("#entertainmentbutton").click(function() {
    if ($("#entertainmentbox").width()) {} else {
        $(".contentbox").stop(true, false).animate({
            width: 0
        }, 200, function() {
            $(".pointer").animate({
                width: 0
            }, 50, function() {
                $("#entertainmentpointer").animate({
                    width: 40
                }, 50, function() {
                    $("#entertainmentbox").animate({
                        width: 500
                    }, 200);
                });
            });
        });
    }
});

$("#diningbutton").click(function() {
    if ($("#diningbox").width()) {} else {
        $(".contentbox").stop(true, false).animate({
            width: 0
        }, 200, function() {
            $(".pointer").animate({
                width: 0
            }, 50, function() {
                $("#diningpointer").animate({
                    width: 40
                }, 50, function() {
                    $("#diningbox").animate({
                        width: 500
                    }, 200);
                });
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:52:25.607

当您调用新动画时，通过 clearQueue 取消所有预先存在的动画：http: [//api.jquery.com/clearQueue/](http://api.jquery.com/clearQueue/)

或者，如果您想维护一些动画，只需通过停止停止您不想再运行的动画：http: [//api.jquery.com/stop/](http://api.jquery.com/stop/)

# php - 向数据库添加数据的最佳方式是什么？

> ID：12143783
> 
> 赞同：4
> 
> 时间：2012-08-27T14:17:47.210
> 
> 标签：php, sql

```
$user='root';

try{
$pdo=new PDO('mysql:host=localhost;dbname=test',$user);
$pdo->exec('set character set utf8');
}
catch(PDOException $e){
echo 'Error: '.$e->getMessage();
}

//using bound variables?
$stmt=$pdo->prepare('insert into test(name) value(:name)');
$stmt->bindParam(':name',$_POST['name']);
$stmt->execute();

//using named parameters
$stmt=$pdo->prepare('insert into test(name) value(:name)');
$stmt->execute(array(':name'=>$_POST['name']));

//using placeholders
$stmt=$pdo->prepare('insert into test(name) value(?)');
$stmt->execute(array($_POST['name']));

//using bound parameters w/ placeholders
$stmt=$pdo->prepare('insert into test(name) value(?)');
$stmt->bindParam($_POST['name']);
$stmt->execute(); 
```

我只是想知道作为 PHP 初学者最适合使用什么，我只是对使用什么感到困惑，我想知道什么是最好的和最常用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:21:33.777

我发现第二种方法最好：

```
//using named parameters
$stmt=$pdo->prepare('insert into test(name) value(:name)');
$stmt->execute(array(':name'=>$_POST['name'])); 
```

您已经命名了参数，因此您知道数组中的内容 - 我讨厌查看`?`代码中的五个或更多并尝试确定顺序是否正确，并且将更少的代码行放入数组并执行这一切都在同一时间而不是通过许多`->bindParam()`线路。

如果这个选项不在桌面上，我会通过其他的许多行`->bindParam()`。

这个问题归结为个人喜好。选择最适合您的内容、易于阅读和理解的内容（特别是如果您在数周或数月后再次阅读）以及对于可能不得不通过您的代码进行调试的*其他人来说易于阅读的内容。*

编辑：没有什么比这*更快*了。以某种方式将查询放在一起可能需要多*毫秒*的时间，但查询将花费相同的时间在数据库上执行。更快真的不是在这里看的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:22:10.907

答案归结为一件事——个人喜好。它们都按预期工作并且同样给出相同的结果，但是“你如何编写它”完全取决于你更喜欢什么 - 以及可能（最终）可能使用你的代码的其他人。

我个人的观点，我认为命名参数是最好的，因为它可以很清楚你正在设置什么值。在查询中使用单个参数可能毫无意义 - 但是当有 10 多个时，它可以派上用场。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:36:14.407

就个人而言，我更喜欢这四个中的第一个。很清楚您在做什么，因此您的代码将被证明更易于维护。当数组已经存在并且所有值都将在查询中使用时，使用数组很有用。尽管如此，在编写代码时，您*仍会*遇到错误。并且调试使用`?`占位符的查询可能会很痛苦。

在性能方面，这 4 种方法中的任何一种都没有太大的区别，但是有一些区别：

在 4 个示例中的 2 个中，您正在创建一个数组。创建数组很便宜，但不是免费的。
使用时`bindParam`，您可以轻松指定数据类型（只需浏览 PDO 预定义的常量）。大多数情况下，这不会产生太大的影响，但在执行全表扫描的情况下，最好不要让 MySQL 进行类型转换。

所以关于性能：如果你不需要，不要构造新的数组，并尽可能设置正确的数据类型。

关于代码质量：命名参数通常会让你的生活更轻松，所以我建议你尽可能多地使用它们

# c# - 滚动问题 - Usercontrol 中的 Datagridview，将 Usercontrol 实例添加到 Flowlayoutpanel

> ID：12143786
> 
> 赞同：0
> 
> 时间：2012-08-27T14:17:59.037
> 
> 标签：c#, winforms, datagridview, scroll, flowlayoutpanel

我有一种情况，我在流布局面板（.net 3.5 Winforms）中添加多个用户控件（每个包含 datagridview 控件、按钮和单选按钮）。流布局面板的高度小于网格。

问题是当我向下滚动 Flowlayout 面板垂直滚动并选择网格中的一个单元格时，焦点随机向上移动到一个单元格，选择这两个位置之间的所有单元格。

请给点建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:46:25.683

我认为您一定遇到了与以下 URL 中解释的相同的问题：

[为什么单击文本框会导致 AutoScroll 面板滚动回顶部？](https://stackoverflow.com/questions/4357362/why-does-clicking-in-a-text-box-cause-an-autoscroll-panel-to-scroll-back-to-the)

[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/445af1e5-0f8d-4e4e-ba97-bc6dc72b5c74/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/445af1e5-0f8d-4e4e-ba97-bc6dc72b5c74/)

如果是这样，按照上述 URL 中的说明覆盖 ScrollToControl 可以帮助解决问题。

# https - 如何使用 HTTPS 连接使用 VBSCRIPT 并接受所有证书来下载文件

> ID：12143787
> 
> 赞同：2
> 
> 时间：2012-08-27T14:17:58.147
> 
> 标签：https, vbscript, certificate

我有一个脚本，可以从[https://mysite.com/xxx.zip](https://mysite.com/xxx.zip)下载文件，但是当它进入安全链接时，我想接受证书。这里有一个很大的问题。我无法有效地使用“ServicePointManager.ServerCertificateValidationCallback”。

有人可以帮忙吗？

我还有证书站点的域：*.mysite.com

代码：

```
Const scriptVer  = "1.0"
Const DownloadDest = "https://mysite.com/xxx.zip"
Const LocalFile = "F:\Testing\xxx.zip"
Const webUser = "admin"
Const webPass = "admin"
Const DownloadType = "binary"
dim strURL

function getit()
  dim xmlhttp

  set xmlhttp=createobject("MSXML2.XMLHTTP.3.0")
  'xmlhttp.SetOption 2, 13056 'If https -> Ignore all SSL errors
  strURL = DownloadDest
  Wscript.Echo "Download-URL: " & strURL

  'For basic auth, use the line below together with user+pass variables above
  xmlhttp.Open "GET", strURL, false, WebUser, WebPass
  'xmlhttp.Open "GET", strURL, false

  xmlhttp.Send
  Wscript.Echo "Download-Status: " & xmlhttp.Status & " " & xmlhttp.statusText

  If xmlhttp.Status = 200 Then
    Dim objStream
    set objStream = CreateObject("ADODB.Stream")
    objStream.Type = 1 'adTypeBinary
    objStream.Open
    objStream.Write xmlhttp.responseBody
    objStream.SaveToFile LocalFile
    objStream.Close
    set objStream = Nothing
  End If

  set xmlhttp=Nothing
End function 

'=======================================================================
' End Function Defs, Start Main
'=======================================================================
' Get cmdline params and initialize variables
If Wscript.Arguments.Named.Exists("h") Then
  Wscript.Echo "Usage: http-download.vbs"
  Wscript.Echo "version " & scriptVer
  WScript.Quit(intOK)
End If

getit()
Wscript.Echo "Download Complete. See " & LocalFile & " for success."
Wscript.Quit(intOK)

ServicePointManager.ServerCertificateValidationCallback = AddressOf AcceptAllCertifications

Private Shared Function ValidateCertificate(sender As Object, certificate As X509Certificate, chain As X509Chain, sslPolicyErrors As SslPolicyErrors) As Boolean
    return True
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:34:13.760

`ServicePointManager`是一个`.NET`类，所以它不能用于`VBScript`. 试试这个：

```
Set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP")
xmlhttp.setOption 2, 13056 
```

你**必须**在这里使用`MSXML2.ServerXMLHTTP`，因为`MSXML2.XMLHTTP`请求没有`setOption`方法。

也许你不应该[传播](http://www.visualbasicscript.com/fb.ashx?m=99201)你的问题。这不是很有礼貌。

# ruby-on-rails - Rails - 在助手中转义html？

> ID：12143788
> 
> 赞同：0
> 
> 时间：2012-08-27T14:18:01.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前在我的 application_helper.rb 文件中有一个简单的方法，该方法旨在添加一个链接，该链接将在单击时向表单添加一些新字段。看起来像：

```
def link_to_add_fields(type, object_form_builder)
  link_to type, "#", "data-partial" => h(render(:partial => type + '/form', 
                       :locals => {type.singularize.to_sym => object_form_builder,
                                   :form_actions_visible => false})),
                       :class => 'add_fields'
end 
```

我遇到了这段代码的问题，即应该添加到`data-partial`html 属性的部分被转义（大概是在呈现的 html 中的某处用引号引起来）。我的理解`h()`应该防止这种情况发生，但它似乎没有这样做。谁能建议如何逃避这个？

编辑：我尝试使用`html_safe`如下所述的方法，但无济于事。我已经设法让它逃脱了：

```
"data-partial" => "'" + render(:partial => type + '/form', :locals => {type.singularize.to_sym => object_form_builder, :form_actions_visible => false}) + "'" 
```

但我不确定这有多安全？

编辑 2：使用单引号转义并不好 - 尽管它会转义 html，但它会在部分呈现时输出引号，这是不可取的。仍在寻找有关如何在渲染部分时成功转义 html 的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:21:54.320

尝试一种`.html_safe`方法

```
def link_to_add_fields(type, object_form_builder)
  link_to type, "#", "data-partial" => h(render(:partial => type + '/form', 
                       :locals => {type.singularize.to_sym => object_form_builder,
                                   :form_actions_visible => false})).html_safe,
                       :class => 'add_fields'
end 
```

# wcf - 可怕的 BizTalk 接收位置错误

> ID：12143789
> 
> 赞同：1
> 
> 时间：2012-08-27T14:18:04.653
> 
> 标签：wcf, biztalk, biztalk-2010, azureservicebus

我刚刚注意到使用 WCF-Custom 适配器连接到服务总线队列的 BizTalk 中的一个主要错误（除非我遗漏了什么）。

我注意到一条消息没有从队列中到达 BizTalk，所以我检查了接收位置是否在 BizTalk 中运行。

但是我可以看到消息堆积在队列中。

BizTalk 没有提供警告或错误消息，并且 BizTalk 没有指示接收位置已失去与队列的连接。

当我重新启动接收位置时，我可以看到服务总线管理控制台中的消息计数下降到零，因此 BizTalk 似乎失去了连接，甚至没有注意到它。

如果我没有遗漏重要的东西，这是 BizTalk 中的一个非常严重的错误，因为它会在没有任何警告或明显原因的情况下阻止流程。

我有 2 位同事也遇到了这个问题，但我认为他们使用的是 sftp 适配器。

其他人对这种行为有任何经验吗？

我试着用谷歌搜索它，但什么也没找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:00:56.323

您如何使用 WCF-Custom 适配器接收消息？我假设您正在使用一些自定义代码，因为它不能开箱即用。

您使用的是哪个 BizTalk Server？BizTalk Server 中没有 SFTP 适配器。

我们最近发布了 BizTalk Server 2010 R2 CTP，我们将为服务总线队列/主题提供一流的适配器。我们希望您尝试一下并提供反馈。我们也想了解您是如何使用它的。

# mysql - MySQL UPDATE table1 其中 table1.FIELD = table2.FIELD

> ID：12143794
> 
> 赞同：0
> 
> 时间：2012-08-27T14:18:15.820
> 
> 标签：mysql, set, sql-update, inner-join

我有两张桌子。我想`UPDATE` `table1`什么时候`table1.MODEL = table2.MODEL`：这当前更新（0）零行，我做错了什么？

```
UPDATE table1 t1
 INNER JOIN table2 t2
      ON t1.MODEL = t2.MODEL
SET t1.LINK = t2.LINK 
```

这在理论上应该设置`table1.LINK`为`table2.LINK`where`table1.MODEL = table2.MODEL`但它更新零行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:22:43.683

尝试使用

```
UPDATE table1, table2
SET table1.link = table2.link
WHERE table1.model = table2.model 
```

希望能帮助到你...

# python - 如何查看 Heroku 的 github 存储库？

> ID：12143795
> 
> 赞同：0
> 
> 时间：2012-08-27T14:18:17.553
> 
> 标签：python, django, heroku, github

每当有新的推送到存储库时，我希望能够在 Github 存储库中记录某些文件中的字数。我已经在 Github 上设置了一个钩子，以便在每次推送后点击 Django Heroku 应用程序 url，但我不知道如何从 Heroku 上运行的 Django 应用程序运行 git pull in python。是否可以在 Heroku 中写入本地文件系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:03:46.367

> 查看 Heroku 的 github 存储库？

从命令行，您可以轻松地从 heroku 中提取：`git pull heroku master`

> 已经在 Github 上设置了一个钩子，以在每次推送后点击 Django Heroku 应用程序 url，但我不知道如何从 Heroku 上运行的 Django 应用程序运行 git pull in python？

它是一个不同的heroku应用程序（与已部署的应用程序不同）将进行拉动吗？

*   **是的？**那么你会有问题。因为拉取应用程序需要权限（heroku 登录）才能拉取......而且它不会拥有它。此外，临时文件系统的 b/c，即使您登录（通过`heroku run bash`或类似方式）它，拉取应用程序最终也会丢失其登录会话（请参阅下面的原因）
*   **不？**然后不要拉。只需使用`os`文件系统库查看应用程序目录...

> 甚至可以在 Heroku 中写入本地文件系统吗？

是和否。您可以写入本地文件系统，但它会被核爆。请参阅：[https ://devcenter.heroku.com/articles/dynos#ephemeral-filesystem](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)

此外，使用 EFS，每个 dyno 都将拥有不同的 EFS - 因此每个 Web 进程在某种程度上都是沙盒化的。

# oracle - 如何在包中调用 Oracle 过程？

> ID：12143798
> 
> 赞同：2
> 
> 时间：2012-08-27T14:18:24.507
> 
> 标签：oracle, plsql, packages

我正在尝试在包中调用 Oracle 存储过程，但出现此错误：SQL 错误：ORA-06576：不是有效的函数或过程名称

我正在使用 SQL Developer，这是我正在使用的命令

```
call WEATHERDATAUPDATES.GetLastRunDate("WeatherData") 
```

这是包/程序

```
PACKAGE BODY WEATHERDATAUPDATES AS

  PROCEDURE GetLastRunDate(PROCESS IN VARCHAR2, RUNDATE OUT DATE) AS
  BEGIN
    SELECT rundate FROM Marcie.last_rundate
    where process = PROCESS;
  END GetLastRunDate;

END WEATHERDATAUPDATES; 
```

我对 Oracle Packages 很陌生，不确定我缺少什么。我尝试搜索，但找不到有效的答案。有人可以告诉我我错过了什么吗？

谢谢，玛西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:21:37.583

GetLastRunDate 有 2 个参数（进程和运行日期），但您只在调用中传递 1。

由于您想将第二个参数传递出去，一种选择是使其起作用并返回运行日期。

```
PACKAGE BODY WEATHERDATAUPDATES AS

  FUNCTION GetLastRunDate(PROCESS IN VARCHAR2)
  RETURN DATE
  AS
     lDate DATE;
  BEGIN
    SELECT rundate
    INTO   lDate
    FROM   Marcie.last_rundate
    where  process = PROCESS;

    RETURN lDate;
  END GetLastRunDate;

END WEATHERDATAUPDATES; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:36:18.710

在您的过程中，您没有将检索到的值放在任何地方，您应该使用`INTO`：

```
...    
   PROCEDURE GetLastRunDate(PROCESS IN VARCHAR2, RUNDATE OUT DATE) AS
   BEGIN
     SELECT rundate 
     INTO RUNDATE 
     FROM Marcie.last_rundate  
     where process = PROCESS;
   END GetLastRunDate;
... 
```

在调用中传递 out 参数的变量`RUNDATE OUT DATE`。

将调用放在 PL/SQL 块中：

```
DECLARE
    lastRunDate DATE;
BEGIN
    WEATHERDATAUPDATES.GetLastRunDate("WeatherData",lastRunDate);   
    -- do something with lastRunDate
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T03:29:11.620

您已经显示了包的主体，但没有显示规范 - 检查`GetLastRunDate`包规范中声明的内容。

# javascript - 是否可以有 2 个变量指向同一个对象？(javascript)

> ID：12143799
> 
> 赞同：8
> 
> 时间：2012-08-27T14:18:32.343
> 
> 标签：javascript, pointers, pass-by-reference

我试图让变量“my_a”和 letters.a 都指向同一个对象。

```
//i want letters.a to reference (point to) my_a, not be a copy...
//expected output should be: letters.a = c
//made variables into Objects.. but didn't help.

var my_a = new Object('a');
var my_b = new Object('b');
var letters = {'a': my_a, 'b': my_b};

$('#output').append('my_a = ' + my_a + '<br>');
$('#output').append('leters.a = ' + letters.a + '<br>');

my_a = new Object('c');

$('#output').append('my_a = ' + my_a + '<br>');
$('#output').append('letters.a = <span style="color:red">' + letters.a + '</span>');
​ 
```

看到这个小提琴：

[http://jsfiddle.net/jCsUq/1/](http://jsfiddle.net/jCsUq/1/)

但正如您从输出中看到的那样，这是行不通的。

有任何想法吗？这可以用javascript吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:22:10.200

您的问题的答案是“是”，但我认为您的问题并不能准确地描述您正在尝试做的事情。你想要的`letters.a`是引用变量“my_a”，从某种意义上说，在 C++ 中可以使用`&`操作符做什么。这在 JavaScript 中是不可能的。

在声明中：

```
my_a = new Object('c'); 
```

你给“my_a”一个新的、不同的价值。因此，`letters.a`仍然指的是它所做的相同的事情，而“my_a”已经改变了。没有办法让变量或对象属性“跟踪”另一个（在 JavaScript 中）。

*编辑*——实际上我想到你可以通过为“letters”的“a”属性定义一个“getter”来做你正在寻找的事情，它返回“my_a”的当前值。它需要您正在使用的 JavaScript 引擎中的该功能，但它看起来像：

```
var letters = {};
Object.defineProperty(letters, "a", {
  get: function() { return my_a; },
  set: function(v) { my_a = v; }
}); 
```

不幸的是，IE9 之前的 IE 不支持该功能。[这是更新的jsfiddle。](http://jsfiddle.net/jaPWQ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T14:22:01.637

您可以将 2 个变量指向 javascript 中的相同对象或值，如下所示：

```
var a = b = {};
// both a and b now reference the same object 
```

此外，不需要使用对象构造函数，花括号用作构造函数并节省输入。即，这个：

```
var a = new Object(); 
```

相当于：

```
var a = {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:22:57.750

您对指针的概念感到困惑。当您将对象存储在变量中时，您实际上将该对象的地址存储在变量中。

所以，my_a 和 letters.a 都包含同一个对象的地址。然后更改 my_a 以包含新对象的地址。但是 letters.a 仍然包含第一个对象的地址！

所以在脚本的最后，my_a 指向对象'c'，而 letters.a 指向对象'a'。

让 letters.a 和 my_a 指向您称为“c”的对象的唯一方法是

```
letters.a = my_a 
```

再次设置 letters.a 以包含新的“c”对象的地址。

顺便说一句，持有更基本类型（如 ints、char）的变量实际上包含变量本身的值，而不是指向实际数据的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:24:34.603

是的，这是可能的。

你的方向是对的，但犯了一个小错误。初始化时`var letters = {'a': my_a, 'b': my_b};`，您插入了 my_a**在那一刻**指向的对象。

之后更改`my_a`并没有改变`letters`，因为它已经包含一个直接指向`Object('a')`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T14:25:25.800

是的，这是非常可能的，并且是默认设置。但是，在您的代码中，当您打算修改值时，您正在修改引用 (my_a = new Object('c');)。如果您使用数组而不是字符串，这将更清楚地说明，例如 my_1 = [23]; 我的_1[0] = 8；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T14:26:35.053

为什么你不使用这样的构造：

```
var letters = {'a': (new Object('a')), 'b': (new Object('b'))}; 
```

恕我直言，它更清洁。

# uml - 用于业务规则的 UML

> ID：12143802
> 
> 赞同：1
> 
> 时间：2012-08-27T14:18:42.057
> 
> 标签：uml

我想为我的网站的一部分或捆绑创建一个类图 UML。这部分包含三个子部分：

1.  工作：我想按日期显示工作列表（标题、工作日期、位置、截止日期）
2.  当我点击列表中的工作时，我希望有工作的详细信息（标题，描述......）
3.  管理工作列表（删除、创建、编辑...）

我可以想象创建它的视图模板，但我希望在创建代码后为业务规则（类抽象、方法、对象...）创建一个类图 UML 以供使用。

我在 UML 方面不是很专业。有人可以给我一个图或模式的例子来创建它，预测在模板中使用它的方法和对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:43:09.660

这是我以前的一些大学课程的一个例子。它可能有一些用处。对不起，如果我不能进一步帮助你，因为我也开始专业。

![https://www.dropbox.com/s/oe9zfwt18g3t1st/ClassDiagram.png](../Images/5327a2a9124d3400150b4242a9c7d5b5.png)

# c# - 在非 web c# 项目上读取 cookie

> ID：12143812
> 
> 赞同：-3
> 
> 时间：2012-08-27T14:19:10.783
> 
> 标签：c#, asp.net, cookies

我写了一个网站

我想编写将读取 cookie 的 cookie 管理器。

我可以将它驻留在非网页项目中吗？

我用 ASP.NET 开发

```
if (Request.Cookies["UserSettings"] != null)
{
    string userSettings;
    if (Request.Cookies["UserSettings"]["Font"] != null)
    { userSettings = Request.Cookies["UserSettings"]["Font"]; }
} 
```

但在添加 system.web 之后

请求.Cookies

无法解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:23:05.590

> 我可以将它驻留在非网页项目中吗？

是的，您只需要在非 Web 项目中引用适当的程序集 (System.Web)。

# c - 链表还是顺序内存？

> ID：12143814
> 
> 赞同：2
> 
> 时间：2012-08-27T14:19:17.553
> 
> 标签：c, arrays, data-structures, linked-list, memory-access

我不是 100% 确定如何描述这一点，但我会尽力而为。我目前正在开发一个项目，其中他们有一个结构（称为集合），其中包含指向一组结构（称为 objs）的指针。要访问这些结构集，on 必须遍历它们的内存地址（如数组）。主结构在其集合中具有结构的数量。我就是这样做的

```
objs = set->objs;

for(n=0; n < set->numObjs; n++)
{
  do_something(objs);
  objs++;
} 
```

我的问题是，链表会更安全、更快还是更好？一个结构数组怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:24:44.777

数组通常在元素方面的遍历和操作要快得多，因为所有数据都连续位于内存中，因此将非常有效地使用 CPU 缓存。相比之下，链表在缓存使用方面或多或少是*最差*的，因为每个链表节点都可能很容易地最终位于内存的一个完全独立的部分，并独自占据整个缓存行。

另一方面，链表作为容器更容易操作，因为您可以以非常低的成本插入和删除元素，而您根本无法真正使用数组，除非您愿意移动整个片段周围的阵列。

任你选。

或者更好的是，尝试两者并配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:35:01.163

这个源代码有些不完整，但似乎 objs 是指向与 set->objs 中相同类型的指针。您正在做的是通过使用指针算法而不是使用数组语法索引来迭代这些 objs 的列表或数组。但是，obj 列表存储在顺序内存中，否则指针增量将无法为您提供顺序列表中的下一个 obj。

问题实际上是就维护和更改列表而言，您想要执行什么样的操作。例如，如果列表基本上是一个很少更改的静态列表，那么顺序列表应该可以正常工作。如果唯一的主要操作是将某些内容添加到列表中，那么如果您知道最大数量并且可以分配那么多顺序内存，那么顺序列表可能会很好。

链表的亮点在于以下领域：（1）从列表中插入和/或删除元素，尤其是不在前面或后面的元素，（2）能够增长并且不必依赖于特定的数字列表中的元素。

为了增加一个固定大小的顺序列表，您通常必须分配一个新的内存区域并将列表复制到新的内存区域。

另一种选择是拥有一个基本上是一组链接顺序列表的数据结构。随着顺序列表填满并且您需要更多空间，您只需分配另一个顺序列表区域，然后将两者链接起来。但是，使用这种方法，您可能需要额外的代码来管理空白空间，这取决于您是需要删除项目还是在插入新项目时将它们按某种排序顺序排列。

这是[关于链接列表的维基百科文章](http://en.wikipedia.org/wiki/Linked_list)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:21:49.287

链表会更慢，因为您可能不会有效地使用内存缓存（与数组不同，列表节点可能位于不同的内存页面上），但是使用链表可能更容易也更安全。如果您发现链表解决方案太慢，我建议您仅使用数组。

# objective-c - 在 iOS 应用程序运行时禁用空闲模式

> ID：12143815
> 
> 赞同：6
> 
> 时间：2012-08-27T14:19:18.017
> 
> 标签：objective-c, xcode, web-services, rest, ios5

有谁知道如何在应用程序运行时禁用模式设备空闲？我用 web 服务编写了 iOS 应用程序，但是当屏幕保护程序启动时，我有同步下降。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:24:45.973

假设通过“屏幕保护程序”您的意思是禁用关闭屏幕的设备空闲计时器，您可以使用这个简单的行：

```
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

# javascript - 可视化到选择框

> ID：12143818
> 
> 赞同：3
> 
> 时间：2012-08-27T14:19:28.810
> 
> 标签：javascript, visualization

我是 javascript 新手，我正在尝试将可视化代码放入 selection02 的选择框中。我的可视化代码：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js"> {"dataSourceUrl":"//docs.google.com/spreadsheet/tq?key=0AihqKzH-MgAndERnaFVsYk1RLUM3S0pDSmNjcEQ4M1E&transpose=0&headers=0&range=A2%3AB13&gid=0&pub=1","options":{"vAxes":[{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}}],"booleanRole":"certainty","animation":{"duration":0},"useFirstColumnAsDomain":true,"hAxis":{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},"isStacked":false,"width":454,"height":285},"state":{},"chartType":"AreaChart","chartName":"\u0393\u03c1\u03ac\u03c6\u03b7\u03bc\u03b1 1"} </script> 
```

这是我的两个链接选择框。我试图从另一个文件中获取此代码，但出了点问题。在我做出第一选择之前，我还能让 selectbox2 消失吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">

function allagi()
{
   if (document.getElementById("selection01").selected==true)
   {

   }
   else if (document.getElementById("selection02").selected==true)
   {

   }
   else if (document.getElementById("selection03").selected==true)
   {

   }
   else if (document.getElementById("selection04").selected==true)
   {

   }
}

function allagi2()
{
     if (document.getElementById("select02").selected==true)
     {
         document.getElementById("selectbox01").disabled=false;
     }
}

</script>

</head>

<body>

<div id="wrapper">
  <div id="logo">

  <select onchange="allagi2()">
  <option id="select01" selected="true">Επιλέξτε</option>
  <option id="select02">Τουρισμό</option>
  <option id="select03">Προϋπολογισμό</option>
  </select>

  <select id="selectbox01" onchange="allagi()" disabled="true">
  <option id="selection01">Selection01</option>
  <option id="selection02">Selection02</option>
  <option id="selection03">Selection03</option>
  <option id="selection04">Selection04</option>
  </select>
</div>
  <div id="chart">

  </div>
</div>

</body>
</html> 
```

谁能帮帮我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:33:27.427

有两种方法可以解决您的问题。

1.  第一个是在进行选择时编写脚本标签。这种方法有点棘手，因为涉及到一个 json 对象。
2.  第二个是简单地隐藏“可视化”，直到用户做出选择。这可以使用 CSS 轻松完成。

我使用了第二种方法。
生成的图形放置在 ID 为“chart-0”的 DIV 中，由于此 DIV 不可直接编辑，因此我使用 css 在页面加载时隐藏它，并在第二次选择时显示它，如下所示：

```
else if (document.getElementById("selection02").selected == true) {
    $('#chart-0').css('display', 'block') //show chart if 2nd option is selected 
```

至于第二个选择，使用相同的方法。选择非默认选项时，将使用以下代码显示第二个选择：

```
if ($('#option1').val() != 'Επιλέξτε') {
    $('#selectbox01').css('display', 'block'); //show second option
 } else if ($('#option1').val() == 'Επιλέξτε') { //hide is user reselects default option
    $('#selectbox01').css('display', 'none'); //hide option
    $('#chart-0').css('display', 'none'); //hide chart
 } 
```

[这是一个工作演示](http://jsfiddle.net/efqYA/12/)，不要忘记在您的页面中包含 jquery。

# c++ - 在子类（param=指向子的指针）中实现继承类的方法（param=指向父级的指针）

> ID：12143836
> 
> 赞同：0
> 
> 时间：2012-08-27T14:20:28.240
> 
> 标签：c++, inheritance, interface, parameters, implementation

假设我有一个带有虚拟方法的接口，但其中一个参数是：

```
virtual void Delete(ParentClass *parentClass) = 0; 
```

如果我以后在子类中实现它

```
void Delete(ChildClass *childClass)
{
}; 
```

...为什么这不能作为实现工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:22:23.730

由于函数原型不同（一个用途`ParentClass`和另一个用途`ChildClass`），它们*不是*相同的功能。相反，带有`ChildClass`参数的那个是重载而不是覆盖`Delete`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:04:02.520

**C++03 标准：10.3/2**

> `vf`如果在一个类中声明一个虚拟成员函数，`Base`并且在一个类`Derived`中直接或间接地派生自一个与声明**的具有相同名称和相同参数列表**`Base`的成员函数**，**那么它也是虚拟的并且被它覆盖。`vf` **`Base::vf`**`Derived::vf``Base::vf`

注意粗体字。
派生类函数仅覆盖基类函数，并且仅当它具有与基类函数相同的签名，但协***[变返回类型](http://msdn.microsoft.com/en-us/library/8z9feath%28v=vs.80%29.aspx)***除外。由于您的函数`Delete()`在基类和派生类中没有相同的签名，因此派生类函数不会覆盖基类函数，而您得到的只是***[Function Hiding](http://www.parashift.com/c++-faq/hiding-rule.html)***。

**C++03 标准：3.3.7/1：**

> 可以通过在嵌套声明区域或派生类中显式声明相同名称来隐藏名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:12:45.267

因为任何被接受为基类函数参数的类型，也必须被该函数的覆盖所接受。这可以防止错误，例如：

```
struct BastardClass : ParentClass {} wrong;
Delete(&wrong); 
```

如果将其分派到期望 a 的覆盖`ChildClass`，则会导致它将对象解释为错误的类型。

（这被称为*逆变- 被**更*具体类型覆盖的函数的参数*不能比被覆盖的参数更*具体。出于类似的原因，返回类型必须是*协变的 - 由**更*具体类型覆盖的函数指定的那些必须是*同样*具体。）

# java - JAXB 将 XSD 转换为 Java 类

> ID：12143838
> 
> 赞同：3
> 
> 时间：2012-08-27T14:20:32.527
> 
> 标签：java, xml, class, xsd, jaxb

当我运行以下命令时：

```
xjc -b xmlSchema.xjb -d src -p com.q1labs.qa.xmlgenerator.model.generatedxmlclasses xmlSchema.xsd 
```

它创建了 Java 类，但是我发现我的根类没有正确的名称，也没有将`@XmlRootElement`其声明为根元素，这意味着当我使用这些类生成 XML 时，它的格式不正确。

XSD 架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified"
    elementFormDefault="qualified" targetNamespace="http://ibm.org/seleniumframework"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="Test" type="sel:TestType" xmlns:sel="http://ibm.org/seleniumframework"/>

    <xs:complexType name="TestType">
        <xs:choice minOccurs="1" maxOccurs="unbounded">
            <xs:element type="sel:Option1" name="Option1" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:Option2" name="Option2" xmlns:sel="http://ibm.org/seleniumframework"/>
            <xs:element type="sel:Option3" name="Option3" xmlns:sel="http://ibm.org/seleniumframework"/>
        </xs:choice>
    </xs:complexType> 
```

这是我得到的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<testType xmlns="http://ibm.org/seleniumframework"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:31:53.390

生成的类对应于复杂类型。声明为全局元素一部分的匿名复杂类型将获得`@XmlRootElement`注释。其他人将在类`@XmlElementDecl`上生成注释。`ObjectFactory`这是因为可能有多个全局元素对应于相同的复杂类型。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# c++ - 在 C++ 中初始化变量的偏好

> ID：12143841
> 
> 赞同：7
> 
> 时间：2012-08-27T14:20:36.553
> 
> 标签：c++, variable-assignment, copy-constructor, assignment-operator

从 c++ 开始，并注意到您可以通过两种方式初始化变量

```
int example_var = 3;  // with the assignment operator '=' 
```

或者

```
int example_var(3);  // enclosing the value with parentheses 
```

有理由使用其中一个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T14:28:35.757

第一种形式可以追溯到 C 时代，而第二种形式是在 C++ 中添加的。添加的原因是在某些情况下（特别是构造函数中的初始化列表）第一种形式是不允许的。

这两者并不完全等同于所有类型，这就是其中一种可能更有用的地方。第一种形式在语义上意味着从右侧创建一个临时变量，然后从该临时变量复制构造。第二种形式是从参数直接初始化变量。

*什么时候重要？*

如果没有从右侧到变量类型的隐式转换，或者如果复制构造函数不可用，则第一种形式将失败，因此在这些情况下，您将不得不使用直接初始化。

第二种形式比第一种形式可以在更多的上下文中使用，**但**它很容易出现*最麻烦的解析*。也就是说，在某些情况下，语法将与函数的声明（而不是常规变量的定义）兼容，并且语言确定在这种情况下，表达式将被解析为函数声明：

```
std::string s = std::string();  // ok declares a variable
std::string s( std::string() ); // declares a function: std::string s( std::string(*)() ) 
```

最后在 C++11 中还有第三种形式，它使用花括号：

```
std::string s{std::string{}}; 
```

这种形式具有带括号直接初始化的优点，但同时也不易产生误解。

*使用哪一个？*

如果可以的话，我会推荐第三种选择。话虽如此，我倾向于使用第一个，或者第二个取决于上下文和类型......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T14:22:43.460

对于内置类型，`int`两者的含义相同。
但对于自定义数据类型，它们可能意味着不同。第一种格式称为***Copy Initialization***，第二种称为***Direct Initialization***。

**好读：**

[复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:23:22.837

它们的输出是相同的......这两种语法都调用了复制构造函数。对于 int 和其他类似的内置数据类型，它是相同的，尽管用户定义的数据类型存在一些差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:22:17.720

他们编译成同样的东西。但是，两者都是变量初始化的一种形式，而不是赋值，这在 C 中很重要，在 C++ 中很重要，因为调用了完全不同的函数（构造函数与赋值）。

# xmpp - 如何使用 Smack lib 仅使用 XMPP 服务器的一些聊天消息？

> ID：12143845
> 
> 赞同：0
> 
> 时间：2012-08-27T14:20:50.297
> 
> 标签：xmpp, smack

我想知道是否可以决定何时使用 xmmp 服务器的消息？

让我试着更好地解释一下......假设我开发了一个机器人来读取消息正文以“MESSAGETOBOTONLY:”开头的所有消息，如果我使用通常的方法来读取消息：

```
public void processMessage(Chat chat, Message message) {
    if (message.getType() == Message.Type.chat) { ... }
} 
```

我收到的所有消息都将被消耗和丢失......我想要的只是消耗以“MESSAGETOBOTONLY:”开头的消息，并让服务器上的其他消息由 xmpp 聊天客户端使用。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:22:26.173

不要滥用消息正文元素中的魔术字符串来指示特殊的消息类型。

如果您想控制机器人，请使用 IQ 数据包或在消息类型数据包中添加额外的扩展名，以指示此消息用于特殊目的。然后，您可以添加一个带有 packetFilter 的 packetListener，以便在收到这些类型的 XMPP 节时得到通知。

# c# - 如何在 C# 中将 ElementHost 添加到 Datagridview 单元格？

> ID：12143849
> 
> 赞同：2
> 
> 时间：2012-08-27T14:20:58.897
> 
> 标签：c#, wpf, winforms, datagridview, elementhost

我想将 ElementHost 添加到我的 datagridview 以将设计的 WPF 控件带入 win 表单。我的问题是如何做到这一点！到目前为止，这是我的代码：

```
 dgv.Columns[0].Name = "controls?";
            ElementHost host = new ElementHost();
            UserControl1 uc;
            uc = new UserControl1(10,20);
            host.Name = "test";
            host.Dock = DockStyle.Fill;
            host.Child = uc;
            dgv.Columns.Add(host); //< this gives me error! 
```

我都试过了`dgv.Columns.Add(host)`，`dgv.Controls.Add(host)`但它们都不起作用。有没有办法做到这一点？谢谢您的帮助。

ps datagridview 应该有 10 行，每行在每个单元格中嵌入一个用户控件。

# google-apps-script - 谷歌应用脚 本“点击授权”不起作用

> ID：12143850
> 
> 赞同：0
> 
> 时间：2012-08-27T14:21:01.183
> 
> 标签：google-apps-script

刚刚用谷歌应用脚​​本编写了我的应用程序。将其嵌入到[https://sites.google.com/site/1000eventz/home](https://sites.google.com/site/1000eventz/home)但是当其他人单击单击以授权时，发送电子邮件但未加载，可能是什么问题？我的设置>> 将应用程序执行为：用户访问应用程序，将应用程序执行为：任何人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:48:05.063

我刚刚测试了你的脚本副本，我有一个这样的授权屏幕：

![在此处输入图像描述](../Images/0c689a928118013cf5d09f9fcb095378.png) 这是正常的......然后该应用程序似乎也可以正常工作。（我的授权是法语的，因为我在一个法语帐户上测试过它；-）

[您可以在此链接上](https://script.google.com/macros/s/AKfycbw3GIJXnjLcophfWTiQsIDaDJx8Q0qlqtyke-Ims4QfVGanJoU/exec)测试副本，该应用程序的演示文稿似乎有点奇怪，但我不想调试它......至少它可以工作......

![在此处输入图像描述](../Images/86b0f3227d19f69bd65e51967d5a77fe.png)

编辑：我刚刚在您的网站上进行了测试，如果我右键单击“授权”和“在新标签页中打开”，它就可以工作，否则它确实不会！似乎浏览器无法打开另一个窗口。（在 chrome 和 safari 上测试）。

但是您在页面上设置的解决方法效果很好（*单击此处以授权*链接）所以我想这个问题可以被认为是部分解决了;-)

我还看到了你的其他帖子，看来你还有很多问题要解决或解决……祝你好运 ;-)

注意：*按钮验证是个好主意，您应该尝试使用另一篇帖子上的 Sriks 回答（禁止 setformat）使其正常工作。*

# javascript - javascript 对象显示为 null 但 object.property 返回数据

> ID：12143852
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:21:14.527
> 
> 标签：javascript, object

我正在尝试设置一个对象 var，但由于某种原因，这个对象不允许我设置一个变量，但它仍然显示出来。

```
Theme.opts.series = series_data.series;     
console.log(Theme.opts);
console.log(Theme.opts.series); 
```

在上面的示例中，第一个控制台日志返回一个对象，但 series 为空。第二个控制台日志按预期返回 series_data.series 的内容。

当另一个人说它在那里时，为什么它看起来是空的？

如果您需要更多信息，请告诉我。Series 包含 1000+ 的数组。

**我也可以将其设置为除系列之外的任何其他属性。所以 Theme.opts.foo = series_data.series 按预期工作。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:29:15.017

您需要先定义`Theme.opts`：

```
Theme.opts = {};
Theme.opts.series = series_data.series; 
```

# android - Android 应用程序：减少电池使用量

> ID：12143855
> 
> 赞同：0
> 
> 时间：2012-08-27T14:21:34.287
> 
> 标签：android, synchronization, battery

我刚刚完成了一个将其数据与服务器同步的应用程序（在后台运行 SyncAdapter）。我将它安装在我的手机上，让它在后台运行（我几乎没有使用我的手机），我发现我的应用程序的 23% 的电池使用量属于我的应用程序，所以我真的需要减少它的电池使用量。

现在我将同步时间设置为 30 秒。这是一个多用户应用程序，如果其他用户与您交互，您会收到通知，我不能将同步时间设置得太高（实际上我想减少它直到我看到电池使用情况）。

在每次同步中，它总是向服务器询问任何更改并检查本地数据库中的更改。如果本地数据库中有更改，它们将被发送到服务器，如果我们从服务器检索更改，它们将应用于本地数据库。

有人知道一些减少电池使用的技巧吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:24:42.807

可能您能做的最好的事情就是使用推送而不是轮询来实现 GCM（ [Google Cloud Messaging ）。](http://developer.android.com/guide/google/gcm/index.html)

通过这种方式，当新的事情发生时，您将能够得到“痒痒”，并且您将知道何时向服务器请求数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:24:15.473

每 30 秒进行一次网络轮询非常激进。我建议您阅读 Google 的这篇文章：http: [//developer.android.com/training/efficient-downloads/index.html](http://developer.android.com/training/efficient-downloads/index.html)

但是，如果您真的需要经常请求网络，我看不出有什么神奇的技巧......

# c# - 基于参数组合的动态加载

> ID：12143864
> 
> 赞同：2
> 
> 时间：2012-08-27T14:21:55.817
> 
> 标签：c#, asp.net

我正在开发一个程序，用户必须选择四个参数才能查看适当的数据。这些参数中的每一个都有一个定义的可能性列表。目前，这些参数中的每一个分别具有 6、5、3、3 个不同的可能输入总数。如果您进行数学计算，这意味着有 270 种可能的输入组合，并且许多（但不是全部）将需要加载不同的图表/图形。它看起来很像*amazon*或*newegg*，因为它们有`treeview`多种不同的选择。不同之处在于界面本身会发生变化，而不仅仅是查询。显然我不能手动创建每个组合，即使我可以在 270 时，最终也可能会添加第五个数据集。

管理上述输入组合的设计模式有哪些？

**编辑**

只是为了澄清如果我的输入是`A6`, `B3`, `C1`,`D2`然后我想动态加载特定的内容。

**编辑**

我试图让它更通用一点，以避免加入会增加混乱的变量，因为它们是行业特定的。我会为此编四个新的。

```
Animals     Age Group    North American Country    Dataview
 Dog          All           Canada                   Historical
 Cat          Teen          U.S.                     Predicted
 etc 
```

所以如果我选择美国历史上所有年龄组拥有的狗，那么它应该拉出一组图表和图表来展示青少年狗拥有的趋势，也许是因为它的狗可能会按品种分类，并显示过去二十年的趋势。

在此示例中，更改国家/地区仅是查询更改，但更改`Dataview`或“动物”可能会加载一组完全不同的图形/图表。如前所述，在查找每个列时进行硬编码实际上是不可行的，因为以后需要第 5 列和可能的第 6 列存在巨大危险。此外，其中一些国家不会像北美国家那样很快改变，但其他国家可能会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:47:47.810

由于对实际问题知之甚少，因此在这种情况下很难得出明确的答案，而且我不确定是否有任何设计模式会产生预期的结果，但是为了对可能的解决方案提供一些理论上的启发：

**场景 1 - 算法计算给定参数值的结果，如数学方程。IE：**

```
(A6 + B3 + C1 + D2 = "Result 23")    
(A1 + B2 + C3 + D4 = "Result 119") 
```

**场景 2 - 参数形成绝对结果。您可以考虑使用哈希表或其他类似的数据结构，其中您的参数针对所需结果进行哈希映射。IE**

```
(A6 + B3 + C1 = d0c423a2 = "Result 1")
(A2 + B5 + C4 = f6d33e56 = "Result 2")
(A3 + B4 + C1 = a34e6bbc = "Result 3") 
```

**场景 3 - 参数单独返回部分结果，这些结果共同返回所需的结果集。同样，您可以使用哈希表。IE**

```
(A1 = cd3de456 = "Partial Result 1")
(A3 = d4e5ca23 = "Partial Result 2")
(B3 = b567d342 = "Partial Result 4")
(C1 = a34e6bbc = "Partial Result 66")
(D2 = f6d33e56 = "Partial Result 123") 
```

*所以* `(A1 + B3 + C1 + D2 = "Partial Result 1", "Partial Result 4", "Partial Result 66", "Partial Result 123")`

如果编码正确，这些中的任何一个理论上都可以工作，并有助于添加额外的未来参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:07:06.673

根据您的最新编辑，我认为这绝对看起来像是数据库的工作，或者失败了，可以使用 linq 之类的结构或一组结构进行查询。

鉴于我的最后一个答案，我认为这看起来像是场景 2（您的参数绝对映射到一组特定的数据）或场景 3（其中每个参数都与一条数据相关，一旦收集，就可以编译成所需的结果）。

在数据库结构方面（如下图所示），我将其编码如下：

```
[TABLE  : Parameters]
PK  : ParameterID
    : Parameter1
    : Parameter2
    : Parameter3
    : Parameter4
    : Parameter5
    : Parameter6

[TABLE  : Results]
PK  : ResultID
FK  : ParameterID [related to Parameters.ParameterID]
    : ResultData 
```

你可以这样查询：

```
"SELECT ResultData FROM Results WHERE ParameterID = (SELECT ParameterID FROM Parameters WHERE Parameter1 = "" AND Parameter2 = ""); 
```

这样，您可以将任何参数组合映射到唯一的结果

你甚至可以用另一种方式做到这一点：

```
[TABLE  : Results]
PK  : ResultID
    : ParameterHash
    : ResultData [possibility that this relates to other tables holding your results] 
```

您可能会以稍微不同的方式查询：

```
"SELECT ResultData from Results WHERE ParameterHash = '" + ComputeParameterHash(P1, P2, P3, P4, P5, P6); + "'"; 
```

使用这样的数据结构不会受到将来添加的其他参数的影响。给定我的第二个表示例，它使用散列将参数解析为结果，可以将任意数量的参数添加到散列计算器，为每个数据集生成唯一的散列值。（小心碰撞）。第一个示例需要更多工作，因为随着您添加更多参数，您将不可避免地向表中添加更多列。这不应影响现有记录，但需要更多工作。

如果您的结果数据分布在多个表中，您可能会考虑使用视图来连接来自不同表的数据以提供所需的结果。例如：您的参数选择视图中的数据，这反过来又从创建视图的基础表中提取数据，因此您不必担心在代码级别将来自多个表的数据连接在一起。您的数据库可以为您做到这一点。

在使用设计模式方面，我想说，鉴于您的示例，实体框架可能在维护关系数据（在您的数据库中）和面向对象的数据（在您的代码中）之间的关系方面有一些用处。

抱歉，如果这根本不是您想要的，这是我现在能想到的。将其视为基于数据库结构的抽象设计，但可以对其进行修改以与其他数据结构一起使用。

# c++ - Listview 三态复选框

> ID：12143868
> 
> 赞同：0
> 
> 时间：2012-08-27T14:22:02.403
> 
> 标签：c++, windows, winapi

我有一个带有复选框的报表样式的列表视图。
有什么简单的方法可以使复选框显示为禁用？给它一种三态的效果？
我想要 3 种状态：启​​用、禁用和未设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:05:29.073

标准`LVS_CHECKBOXES`样式不支持三态复选框。但是，`LVS_CHECKBOXES`内部实现为 ListView 管理的 ImageList 和普通 ListView 状态索引，因此您可以简单地将自己的 ImageList 分配给 ListView，将三个复选框图像放入其中，并根据需要设置每个 ListView 项的状态索引。然后，您只需处理鼠标消息，ListView 即可在单击项目的状态图像时在状态索引之间切换。

# javascript - 使用全球化库脚本的 MVC3 日期验证

> ID：12143870
> 
> 赞同：7
> 
> 时间：2012-08-27T14:22:07.960
> 
> 标签：javascript, asp.net-mvc-3

我正在尝试让我的 MVC3、EF4 项目与 javascript datepicker 一起使用，但我遇到了问题，因为我希望日期采用英国格式 (dd/mm/yyyy)。

我花了几个小时研究这个问题，我决定实现我在这个[链接](https://stackoverflow.com/questions/10137765/mvc3-validation-with-componentmodel-dataannotations-for-uk-date-format-also-usi)中看到的“全球化”库脚本。

但是，当我运行它时，我`Uncaught TypeError: Cannot read property 'methods' of undefined`在 javascript 中得到了一个（来自该行）。`$.validator.methods.date`我对 javascript 的了解非常有限，我发现使用“全球化”库的所有示例都没有提到这个错误，因此我很困惑。

我从下面的视图中显示了相关代码：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.globalize/globalize.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.globalize/cultures/globalize.culture.en-GB.js")" type="text/javascript"></script>

<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    Globalize.culture("en-GB");
    $.validator.methods.date = function (value, element) { return this.optional(element) || Globalize.parseDate(value); }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('.date').datepicker({ dateFormat: "dd/mm/yy" });
    });
</script>

//SNIP

<div class="editor-field">
    @Html.TextBox("Expires", Model.Expires, new { @class = "date" })
    @Html.ValidationMessageFor(model => model.Expires)
</div> 
```

有人可以帮我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T21:18:35.983

我已经有一段时间没有使用 Globalize 库了，但我觉得它对你来说可能有点过头了——假设你只需要 en-GB 中的日期值，下面的 Javascript/jQuery 代码就可以工作（[这里是一个小提琴)](http://jsfiddle.net/dGYWx/2/) :

```
<input type="text" class="date" placeholder="en-gb datepicker" />
<button id="btnGetVal">Get Value</button>

<script type="text/javascript">
$(document).ready(function () {
    /* you correctly have the date format set when initializing the datepicker */
    $('.date').datepicker({ dateFormat: "dd/mm/yy" });
    /* create an event handler for the "click" function of the button */
    $('#btnGetVal').on('click', function() {
       /* event handler */
       var targetValue = $('.date').val();
       alert(targetValue);
    });
});
</script> 
```

我使用 jQuery 2.1.0 和 jQuery UI 1.10.4 对此进行了测试 - 您可能需要为两者更新 NuGet 包（我看到您使用的是非常旧版本的 jQuery，所以我假设您需要支持 IE8 或正在使用旧版本的 MVC）。

顺便说一句，您可能希望确保在 document.ready() 函数内初始化所有 Javascript 代码，以便在加载时可以访问所有函数（因为在初始化 datepicker() 时无法访问 Globalize 代码. 我建议在这里阅读更多内容：[http ://learn.jquery.com/using-jquery-core/document-ready/](http://learn.jquery.com/using-jquery-core/document-ready/)

# c# - 河豚无效长度异常

> ID：12143873
> 
> 赞同：1
> 
> 时间：2012-08-27T14:22:17.097
> 
> 标签：c#, blowfish

我正在使用 Blowfish 算法加密我的文件，但似乎我对此一无所知。每当我尝试它时，`Encipher()`它都会抛出一个异常，上面写着“长度无效”。我认为当它使用 8 获得 mod 时长度必须为零，我认为这意味着应该有 8 x 8 个流块来开始加密。我应该怎么办？

Blowfish的加密方法：

```
public void Encipher(byte[] data, int length)
{
    uint xl, xr;
    if ((length % 8) != 0) <-- Exception Line
        throw new Exception("Invalid Length");
    for (int i = 0; i < length; i += 8)
    {
        // Encode the data in 8 byte blocks.
        xl = (uint)((data[i] << 24) | (data[i + 1] << 16) | (data[i + 2] << 8) | data[i + 3]);
        xr = (uint)((data[i + 4] << 24) | (data[i + 5] << 16) | (data[i + 6] << 8) | data[i + 7]);
        Encipher(ref xl, ref xr);
        // Now Replace the data.
        data[i] = (byte)(xl >> 24);
        data[i + 1] = (byte)(xl >> 16);
        data[i + 2] = (byte)(xl >> 8);
        data[i + 3] = (byte)(xl);
        data[i + 4] = (byte)(xr >> 24);
        data[i + 5] = (byte)(xr >> 16);
        data[i + 6] = (byte)(xr >> 8);
        data[i + 7] = (byte)(xr);
    }
} 
```

我的加密方法：

```
private void EncryptFile(string szFilePath, string szInfoFile, string szKey, string szEncryptedFile = "")
        {
            // Blowfish
            Blowfish alg = new Blowfish(Encoding.Unicode.GetBytes(szKey));

            // Open file
            System.IO.FileStream originalStream = System.IO.File.OpenRead(szFilePath);

            // Store original file length
            long originalLength = originalStream.Length;
            System.IO.File.WriteAllText(szInfoFile, originalLength.ToString());

            Byte[] buffer = new byte[originalStream.Length + (originalStream.Length % 8)];
            originalStream.Read(buffer, 0, buffer.Length);
            originalStream.Close();

            // Encrypt
            alg.Encipher(buffer, buffer.Length);

            string szEncFile;

            if (szEncryptedFile != string.Empty) szEncFile = szEncryptedFile; else szEncFile = szFilePath;

            System.IO.FileStream stream = new System.IO.FileStream(szEncFile, System.IO.FileMode.Create);
            stream.Write(buffer, 0, buffer.Length);
            stream.Close(); 
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:44:44.370

如果你想要做的是将一个值四舍五入到下一个可被 8 整除的值，那么你应该这样做：

```
Byte[] buffer = new byte[originalStream.Length + (8-(originalStream.Length % 8))]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:55:16.870

[彼得里奇](https://stackoverflow.com/users/5620/peter-ritchie) [回答](https://stackoverflow.com/a/12144248/3312)了这个问题。但是，您应该在下面考虑一些惯用的部分。一种是将`IDisposable`实现的类（例如`FileStream`s）包装在`using`块中，以确保在处理过程中出现异常情况时对资源的处置。另一种是`if..then`你放在一行中。真的……很奇怪。我已经用三元运算符替换了它，这似乎适合您正在使用的用法。祝你好运。

```
private void EncryptFile(string szFilePath, string szInfoFile, string szKey, string szEncryptedFile = "")
    {
        // Blowfish
        Blowfish alg = new Blowfish(Encoding.Unicode.GetBytes(szKey));

        // Open file
        using (System.IO.FileStream originalStream = System.IO.File.OpenRead(szFilePath))
        {
            // Store original file length
            long originalLength = originalStream.Length;
            System.IO.File.WriteAllText(szInfoFile, originalLength.ToString());

            Byte[] buffer = new byte[originalStream.Length + (originalStream.Length % 8)];
            originalStream.Read(buffer, 0, buffer.Length);
        }

        // Encrypt
        alg.Encipher(buffer, buffer.Length);

        string szEncFile;

        szEncFile = string.IsNullOrEmpty(szEncryptedFile) ? szFilePath : szEncryptedFile;

        using (System.IO.FileStream stream = new System.IO.FileStream(szEncFile, System.IO.FileMode.Create))
        {
            stream.Write(buffer, 0, buffer.Length);
        }
    } 
```

# hibernate - 在 GWT 中使用 RequestFactory 时如何排除属性

> ID：12143886
> 
> 赞同：1
> 
> 时间：2012-08-27T14:22:47.037
> 
> 标签：hibernate, gwt, requestfactory

我正在使用 RequestFactory 从服务器检索对象列表。现在我想排除可以包含长文本的对象的“描述”（字符串）属性。

有没有办法在运行时的 RequestFactory 中做到这一点？

这就是我检索列表的方式

```
 collectcontextProvider.get().getListObject().fire(
    new Receiver<List<ObjectProxy>>() {
    @Override
    public void onSuccess (List<ObjectProxy> objectList) {
        //display the list
        }           

        @Override
        public void onFailure(ServerFailure error) {
            //Error
          }
        }); 
```

我使用休眠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:28:52.170

假设您希望在应用程序的其他位置使用 description 字段，您将需要一个不暴露该属性的精简代理，当然还有一个返回此类代理列表的服务方法。

```
@ProxyFor(value=MyObject.class, locator=MyLocator.class)
interface MyObjectLiteProxy extends EntityProxy {
   // all properties but 'description'
}

@ProxyFor(value=MyObject.class, locator=MyLocator.class)
interface MyObjectProxy extend MyObjectLiteProxy {
   String getDescription();
}

@Service(MyService.class)
interface CollectContext extends RequestContext {
   Request<List<MyObjectLiteProxy>> getListObjectLite();

   Request<List<MyObjectProxy>> getListObject();
} 
```

实际上，您甚至可以走得更远，在`MyService`2 秒内使用相同的实现`RequestContext`：

```
@Service(MyService.class)
interface CollectLiteContext extends RequestContext {
   Request<List<MyObjectLiteProxy>> getListObject();
}

@Service(MyService.class)
interface CollectContext extends RequestContext {
   Request<List<MyObjectProxy>> getListObject();
} 
```

# java - 在 ant 中启用断言

> ID：12143887
> 
> 赞同：4
> 
> 时间：2012-08-27T14:22:49.050
> 
> 标签：java, ant, junit, assert, assertions

我想在`ant`. 在我的 ant`build.xml`中，我放了以下内容，试图启用断言。

`<project> ... <assertions> <enable/> </assertions> </project>`

我将断言放在一个`junit`文件中，该文件只包含一个函数，

```
testAssertions() {
  assert false;
} 
```

运行时`ant`，不会抛出断言失败。如何在此设置中启用断言？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T15:47:59.107

看起来您的`<assertions>`子元素是 的子元素`<project>`，这是正确的吗？

我假设您正在通过`<junit>`ant 任务运行测试。如果这是正确的，那么将`<assertions><enable/></assertions>`子元素作为子元素`<junit>`应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T17:30:40.990

为了启用断言，我编辑`nbproject/project.properties`并更改了

```
# Space-separated list of JVM arguments used when running the project.
# You may also define separate properties like run-sys-prop.name=value instead of -Dname=value.
# To set system properties for unit tests define test-sys-prop.name=value:
run.jvmargs= 
```

到

```
run.jvmargs=\
    -ea 
```

完成此操作后，我执行时启用了断言`ant run`。

# ajax - ajax 工具包图片上传没有发生

> ID：12143888
> 
> 赞同：4
> 
> 时间：2012-08-27T14:22:55.917
> 
> 标签：ajax

我在页面上上传了一个 ajaxtoolkit 文件

```
<ajax:HtmlEditorExtender runat="server" ID="htmEditor" 

DisplaySourceTab="true" TargetControlID="txtWelcomenote"  

OnImageUploadComplete="htmEdtior_OnUploadComplete"> 
```

后面的代码是

```
protected void htmEdtior_OnUploadComplete(object sender, AjaxFileUploadEventArgs e)
        {
            // Generate file path
            string filePath = "~/Images/" + e.FileName;

            // Save uploaded file to the file system
            var ajaxFileUpload = (AjaxFileUpload)sender;
            ajaxFileUpload.SaveAs(MapPath(filePath));

            // Update client with saved image path
            e.PostedUrl = Page.ResolveUrl(filePath);
        } 
```

我的问题是，当我尝试上传图像时，它没有上传，事件也没有触发。我也调试了我正在获取额外的查询字符串，例如**contextkey={DA8BEDC8-B952-4d5d-8CC2-59FE922E2923}** 可能是什么问题？解决方案是什么？请一些帮助我

# android - findviewbyid 返回 null (Textview)

> ID：12143889
> 
> 赞同：0
> 
> 时间：2012-08-27T14:22:56.427
> 
> 标签：android, textview, findviewbyid

当我尝试设置文本视图的文本时，我得到一个空指针异常。不知何故 findviewbyid 方法返回 null 但我不知道为什么。

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<RelativeLayout
    android:id="@+id/rl_ros_layout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@+id/tv_ros_view1"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ProgressBar
        android:id="@+id/pb_ros_bar1"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:visibility="invisible" />
</RelativeLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/rl_ros_layout1" >

    <TableLayout
        android:id="@+id/tl_rostertable"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:stretchColumns="2" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="@string/team" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="@string/pos" />

            <TextView
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="@string/name" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:padding="3dp"
                android:text="@string/score" />
        </TableRow>
    </TableLayout>
</ScrollView>
</RelativeLayout> 
```

和我的 oncreate 方法

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.roster);
    final Bundle extra = getIntent().getExtras();
    position = extra.getInt("pos");
    int id = de.damps.fantasy.HomeActivity.ID[position];
    url = de.damps.fantasy.HomeActivity.URL + "/roster/2011/" + id;
    tbl = (TableLayout) findViewById(R.id.tl_rostertable);
    team = (TextView) findViewById(R.id.tv_ros_view1);
    String  s= de.damps.fantasy.HomeActivity.TEAMS[position];
    team.setText(s);

    new GetRoster().execute(url);
} 
```

发现表格布局没有任何问题。但文本视图为空。我已经清理了项目，但它没有解决问题

如果有人可以帮助我会很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:25:01.807

你有一个错字：

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:id="@+id/tv_ros_view1"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

(android:text 而不是 android:id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:25:29.823

你写了

```
 android:text="@+id/tv_ros_view1" 
```

代替

```
android:id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:26:20.767

您可以像这样创建`ID`文本视图`android:id="@+id/tv_ros_view1"`来代替它，`android:text="@+id/tv_ros_view1"`这对您完全有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:26:36.423

在您的错误/第一个文本视图中，您这样写：

```
 android:text="@+id/tv_ros_view1" 
```

只需将其替换为：

```
 android:id="@+id/tv_ros_view1" 
```

这就是您必须将 id 分配给视图（TextView）的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T14:26:59.560

在你的 xml 布局中：

```
android:text="@+id/tv_ros_view1" 
```

应该：

```
android:id="@+id/tv_ros_view1" 
```

text 属性用于告诉 textview 显示什么文本。

# java - 向 Scala 应用程序发送 unix 信号

> ID：12143891
> 
> 赞同：1
> 
> 时间：2012-08-27T14:22:57.270
> 
> 标签：java, scala, unix

> **可能重复：**
> [向正在运行的 JVM 发送信号](https://stackoverflow.com/questions/5023520/sending-signals-to-a-running-jvm)

我有一个 scala 应用程序正在运行，我想向它发送一个“重新加载”信号，比如命令行中的 Ctrl-R（现在）。我如何为此注册一个处理程序？谢谢

# python - PyFace、TraitsUI 和 TraitsGUI

> ID：12143894
> 
> 赞同：3
> 
> 时间：2012-08-27T14:23:01.400
> 
> 标签：python, traits, enthought, pyface

我只是在阅读有关 PyFace、TraitsUI 和 TraitsGUI 的信息，但我无法理解这些项目之间的区别。

*   PyFace：[GitHub](https://github.com/enthought/pyface)。

> pyface 项目包含一个独立于工具包的 GUI 抽象层，用于支持 Traits 包的“可视化”特性。

*   TraitsUI：[主页](http://code.enthought.com/projects/traits_ui/)，[GitHub](https://github.com/enthought/traitsui)。

> traitsui 项目包含一个独立于工具包的 GUI 抽象层，用于支持 Traits 包的“可视化”特性。

*   TraitsGUI：[主页](http://code.enthought.com/projects/traits_gui/)，[GitHub](https://github.com/enthought/traitsgui)。

> TraitsGUI 项目包含一个独立于工具包的 GUI 抽象层（称为 Pyface），用于支持 Traits 包的“可视化”功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:32:35.170

TraitsGUI 是 TraitsUI 的旧名称。TraitsGUI 这个名字现在已经被弃用了：github repo 是为了遗留兼容性。TraitsUI 是使用 Traits 构建 UI 的主界面。

对于大多数 TraitsUI 用户来说，Pyface 在很大程度上应该是看不见的，它在 OS UI 和 Python 之间提供了一个抽象层。

如果您对开发 UI 感兴趣，您绝对应该看看[Enaml](http://docs.enthought.com/enaml/)，这是一种基于约束的标记语言，用于在 Python 中构建 GUI。如果您已经深入 TraitsUI，您可能会遇到一些挫败感，无法按照您想要的方式进行布局。Enaml 允许许多非常酷的布局和非常温和的学习曲线。

# javascript - 如何实现水平页面导航系统？

> ID：12143896
> 
> 赞同：1
> 
> 时间：2012-08-27T14:23:09.470
> 
> 标签：javascript, jquery, navigation, edit

下面的代码是类似于 www.blacknegative.com 的水平页面拖动导航系统的功能，用户在其中单击并向左或向右拖动以查看不同的页面。目前设置为四页，但我需要十页，我不确定如何更新此处包含的数学以添加这些页面：

```
function initDrag(){
    var selfWidth = $("#proof").width();
    var selfLimit = selfWidth * .75;
    var slide2 = selfWidth * 0.25;
    var slide3 = selfWidth * 0.5;

    var currentIndex = 0;
    var items = [];
    $("#proof > div").each(function(){
        items.push({
            element:$(this),
            id:$(this).attr("id")
        });
    });
    $('#proof').draggable({
        axis: 'x',
        cursor: 'move',
        containment: [-selfLimit, 0, 0, 0, 0],
        start: function(event,ui){
            event.stopPropagation();
            var offsetXPos = parseInt(ui.offset.left) * -1;
            if (offsetXPos >= 0 && offsetXPos < selfWidth * 0.25){
                currentIndex = 0;
            } else if (offsetXPos >= selfWidth * 0.25 && offsetXPos < selfWidth * 0.5){
                currentIndex = 1;
            } else if (offsetXPos >= selfWidth * 0.5 && offsetXPos < selfWidth * 0.75){
                currentIndex = 2;
            } else {
                currentIndex = 3;   
            };
            console.log(currentIndex);
        },
        stop: function(event,ui){
            event.stopPropagation();
            var offsetXPos = parseInt(ui.offset.left) * -1;
            console.log(offsetXPos);
            var updatedPosition;
            if(currentIndex == 0){
                if(offsetXPos >= selfWidth * 0.04){
                    $('#proof').animate({
                        left: slide2 * -1
                    });
                } else {
                    $('#proof').animate({
                        left: 0
                    });
                }
            } else if(currentIndex == 1){
                if(offsetXPos >= selfWidth * 0.29){
                    $('#proof').animate({
                        left: slide3 * -1
                    });
                } else if(offsetXPos <= selfWidth * 0.21){
                    $('#proof').animate({
                        left: 0
                    });
                } else {
                    $('#proof').animate({
                        left: slide2 * -1
                    });
                }
            } else if(currentIndex == 2){
                if(offsetXPos <= selfWidth * 0.46){
                    $('#proof').animate({
                        left: slide2 * -1
                    });
                } else if(offsetXPos >= selfWidth * 0.54){
                    $('#proof').animate({
                        left: selfLimit * -1
                    });
                } else {
                    $('#proof').animate({
                        left: slide3 * -1
                    });
                }
            } else {
                if(offsetXPos <= selfWidth * 0.71){
                    $('#proof').animate({
                        left: slide3 * -1
                    });
                } else {
                    $('#proof').animate({
                        left: selfLimit * -1
                    });
                }
            }
        }
    });
}

$(document).ready(function(){
    initDrag();
    window.onresize = function(){
        initDrag();
    };
    $('a.gallery').colorbox();
    //Examples of how to assign the ColorBox event to elements
    $(".group1").colorbox({rel:'group1'});
    $(".group2").colorbox({rel:'group2', transition:"fade"});
    $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
    $(".group4").colorbox({rel:'group4', slideshow:true});
    $(".ajax").colorbox();
    $(".youtube").colorbox({iframe:true, innerWidth:900, innerHeight:506});
    $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
    $(".inline").colorbox({inline:true, width:"50%"});
    $(".callbacks").colorbox({
        onOpen:function(){ alert('onOpen: colorbox is about to open'); },
        onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
        onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
        onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
        onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
    });

    //Example of preserving a JavaScript event for inline calls.
    $("#click").click(function(){ 
        $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
        return false;
    });

}); 
```

调用这些页面的 CSS 是 #page-1 到 #page-4。

如果您需要更多信息，请告诉我，但我的猜测和检查工作只会毁了事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:56:24.353

我制作了一个更简单但功能强大的滑块系统，无论你在证明 div 中有多少个 div

你可以在这里查看[JsFiddle](http://jsfiddle.net/eT5MM/3/)（拖动查看）

# jquery - 在 Apache 中启用了 CORS，但 AJAX 不起作用（chrome 表示不允许来源）

> ID：12143906
> 
> 赞同：12
> 
> 时间：2012-08-27T14:23:47.580
> 
> 标签：jquery, ruby-on-rails, ajax, apache, cors

我试图让一些 AJAX 在两个子域之间工作。

rails.mydomain.com 和 mydomain.com

在 apache 中，在 /etc/apache2/sites-available/ 我有我的 rails.mydomain.com 文件：

```
<VirtualHost *:80>
    Header add Access-Control-Allow-Origin "http://www.mydomain.com"
    Header add Access-Control-Allow-Origin "http://www.dev-mydomain.com"
</VirtualHost> 
```

但是，每当我尝试从[http://www.dev-mydomain.com](http://www.dev-mydomain.com)执行简单的 ajax 测试请求时，在 Chrome 中我会得到：**“XMLHttpRequest cannot load [http://rails.mydomain.com/directory](http://rails.mydomain.com/directory)。Origin [http://](http://www.dev-mydomain.com) Access-Control-Allow-Origin 不允许[/www.dev-mydomain.com 。”](http://www.dev-mydomain.com)**

有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:03:31.063

正如 Dahazer 的链接所指出的，最好的办法是设置一个 Access-Control-Allow-Origin 标头。它绝对不适合生产，但您可以`Origin`在开发模式下回显标题。

如果您仍然有问题，则可能是您在响应中没有设置足够多的 CORS 标头。根据我在 chrome 中做跨域 ajax 的经验（不使用 jquery mind），我还需要设置以下标题：

```
Access-Control-Allow-Headers : X-Requested-With,Content-Type 
```

鉴于我使用的是 POST 和 GET 以外的 HTTP 方法，因此我也有必要设置

```
Access-Control-Allow-Methods : GET,PUT,POST,DELETE 
```

但是，最重要的是，我建议阅读 html5 CORS 教程，尤其是[服务器](http://www.html5rocks.com/en/tutorials/cors/#toc-types-of-cors-requests)部分的 CORS。根据您的特定用例，它应该让您对配置 CORS 的不同方法有一个很好的了解，无论是在服务器上还是客户端上（在您的情况下为 jquery 的 ajax 配置选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T23:16:44.760

你能试试这个吗？

到 Gemfile

```
gem "rack-cors", "~> 0.2.7" 
```

到**config/application.rb**

```
config.middleware.use Rack::Cors do |requests|
  requests.allow do |allow|
    allow.origins '*'
    allow.resource '*', headers: :any, methods: [:get, :post, :put, :delete, :options]
  end
end 
```

不要忘记重启服务器。那么它应该是工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:00:35.997

我最近有这个问题。我已经在 Apache中设置`Access-Control-Allow-Origin`了。`*`然而，Chrome 仍然阻止我的跨域请求，而它在 Firefox 中运行良好。

对我有用的解决方案是添加一个`Access-Control-Allow-Methods`带有 value 的标题`OPTIONS, GET, POST`。在这里发布这个，以防将来有人遇到同样的问题并且其他解决方案都不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T19:14:48.623

问题可能出在 4 个不同的地方。让我们从你的`<virthualhost`定义开始。首先，您需要一些模块和配置设置，才能让您的虚拟主机定义实现这些设置。

*   确保`mod_headers`已启用
*   确保您的主要 apache 配置文件具有`AllowOverride`允许您的虚拟主机覆盖默认 CORS 设置的设置

完成这两项后，您可以使用该`Access-Control-Allow-Origin`设置，前提是您还使用`DocumentRoot`指令

```
<VirtualHost *:80>
    DocumentRoot /server/path/to/site/root
    Header add Access-Control-Allow-Origin "mydomain.com"
    Header add Access-Control-Allow-Origin "dev-mydomain.com"
    Header set Access-Control-Allow-Methods "GET,POST,PUT,OPTIONS"
</VirtualHost> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T12:02:59.913

我已经使用[rack-cors](https://github.com/cyu/rack-cors)取得了一些成功，在做跨源 ajax 时添加非常简单......

# c++ - OpenMP C++ - 如何并行化这个函数？

> ID：12143911
> 
> 赞同：4
> 
> 时间：2012-08-27T14:24:05.193
> 
> 标签：c++, parallel-processing, openmp

我想并行化这个函数，但我是 open mp 的新手，如果有人能帮助我，我将不胜感激：

```
void my_function(float** A,int nbNeurons,int nbOutput, float* p, float* amp){
   float t=0;
   for(int r=0;r<nbNeurons;r++){
      t+=p[r];
   }

   for(int i=0;i<nbOutput;i++){
      float coef=0;
      for(int r=0;r<nbNeurons;r++){
       coef+=p[r]*A[r][i];
      }
   amp[i]=coef/t;
   }
} 
```

由于双循环，我不知道如何正确并行化它，目前，我只想做一个： `#pragma omp parallel for reduction(+:t)`

但我认为这不是通过 openMp 加快计算速度的最佳方式。

预先感谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T14:50:53.930

首先：我们需要了解上下文。您的分析器告诉您在哪里花费的时间最多？

通常，粗粒度并行化效果最好，正如@Alex 所说：并行化外部 for 循环。

```
void my_function(float** A,int nbNeurons,int nbOutput, float* p, float* amp)
{
    float t=0;
    for(int r=0;r<nbNeurons;r++)
        t+=p[r];

#pragma parallel omp for 
    for(int i=0;i<nbOutput;i++){
        float coef=0;
        for(int r=0;r<nbNeurons;r++){
            coef+=p[r]*A[r][i];
        }
        amp[i]=coef/t;
    }
} 
```

根据实际体积，在后台计算 t 并将除法移出并行循环可能会很有趣：

```
void my_function(float** A,int nbNeurons,int nbOutput, float* p, float* amp)
{
    float t=0;
#pragma omp parallel shared(amp)
    {
#pragma omp single nowait // only a single thread executes this
        {
            for(int r=0;r<nbNeurons;r++)
                t+=p[r];
        }

#pragma omp for 
        for(int i=0;i<nbOutput;i++){
            float coef=0;
            for(int r=0;r<nbNeurons;r++){
                coef+=p[r]*A[r][i];
            }
            amp[i]=coef;
        }

#pragma omp barrier
#pragma omp master // only a single thread executes this
        {
            for(int i=0; i<nbOutput; i++){
                amp[i] /= t;
            }
        }
    }
} 
```

**注意**未经测试的代码。OMP 有时具有棘手的语义，所以我可能错过了那里的“共享”声明。不过，分析器不会很快通知您。

# android - 将变量的值从第一个活动传递到第三个活动

> ID：12143915
> 
> 赞同：1
> 
> 时间：2012-08-27T14:24:17.800
> 
> 标签：android, variables, global-variables

在将变量的值从第一个活动传递到第三个活动时，我应该使用 intent.putextra 还是应该将变量设为全局变量，以便可以在任何活动中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:27:18.700

你有几个选择：

*   实现你自己的 Application 类，并使这个变量成为类的属性
*   在首选项中保存并获取此变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:26:20.533

最好的方法是使用意图。

不过，有时您需要一个更持久的变量，或者存储一个更复杂的对象。在这些情况下，您可以使用静态变量，例如在单例类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T14:26:36.517

这绝对是您的决定，但我想用户可以转到活动 2 并按回，从而取消对这个变量的需要。

最好的选择是将值作为附加值发送到活动 2。然后，如果需要，它可以将其发送到活动 3。

***提醒*** 不要将静态`variables`用于静态变量几乎总是错误的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T03:22:38.140

您可以将会话 ID 传递给意图中的注销活动，用于启动活动：

```
 Intent intent = new Intent(getBaseContext(), SignoutActivity.class);
    intent.putExtra("EXTRA_SESSION_ID", sessionId);
    startActivity(intent) 
```

注意：使会话 ID 可用于您希望允许用户注销的每个活动。否则，您可以将其存储在 Application 对象中，但是您必须管理会话的状态（在使用它之前检查它是否有效，...）

# html - 通过上传小部件上传视频

> ID：12143917
> 
> 赞同：0
> 
> 时间：2012-08-27T14:24:24.740
> 
> 标签：html, youtube, html5-video, youtube-api

嗨，我是网页设计的新手。我正在创建一个代码，用户可以将视频从他的 PC 上传到 YouTube。我正在使用 Google 视频上传小部件。但它只给了我一个从网络摄像头录制视频的选项。我没有从我的文档 (PC) 中浏览和选择视频的选项。请问我能得到一些帮助吗？或者有没有其他方法可以将视频上传到 YouTube 并获取其 url 或 id？我需要它，以便作为管理员，我可以将其保存在数据库中以便以后查看视频。这是我的代码：

```
<%@ page contentType="text/html; charset=iso-8859-1" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html>
<html>
  <body>  
    <div id="widget"></div>
    <div id="player"></div>
    <script>   
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);    
      var widget;
      var player;
      function onYouTubeIframeAPIReady() {
        widget = new YT.UploadWidget('widget', {
          width: 500,
          events: {
            'onUploadSuccess': onUploadSuccess,
            'onProcessingComplete': onProcessingComplete
          }
        });
      }      
      function onUploadSuccess(event) {
        alert('Video ID ' + event.data.videoId + ' was uploaded and is currently being processed.');
      }
      function onProcessingComplete(event) {
        player = new YT.Player('player', {
          height: 390,
          width: 640,
          videoId: event.data.videoId,
          events: {}
        });
      }
    </script>
  </body>
</html> 
```

我的输出是：

![在此处输入图像描述](../Images/4c6bd3861b7ae7c8a0bd9d9964ce9483.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T20:29:51.870

上传小部件不再可以满足您的要求，因为他们已删除该功能。我已经确认，即使您将“webcamOnly: false”设置为选项，显示的上传按钮实际上也不会执行任何操作。

查看他们的变更日志：[https ://developers.google.com/youtube/youtube_upload_widget#Revision_History](https://developers.google.com/youtube/youtube_upload_widget#Revision_History)

> “webcamOnly 属性已从您可以在上传小部件的构造函数中指定的小部件选项列表中删除。以前，此属性被记录为具有默认值 false，这意味着小部件还将显示一个按钮用于上传现有视频文件。但是，**当前不支持上传现有文件的选项**，因此小部件始终只显示录制和上传网络摄像头视频的选项。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T23:44:08.327

尝试改变这个：

```
widget = new YT.UploadWidget('widget', {
          width: 500,
          events: {
            'onUploadSuccess': onUploadSuccess,
            'onProcessingComplete': onProcessingComplete
          }
        }); 
```

对此：

```
widget = new YT.UploadWidget('widget', {
      width: 500,
      webcamOnly: false,
      events: {
        'onUploadSuccess': onUploadSuccess,
        'onProcessingComplete': onProcessingComplete
      }
    }); 
```

# matplotlib - 绘制指数分布并适当命名所有变量

> ID：12143927
> 
> 赞同：1
> 
> 时间：2012-08-27T14:24:59.280
> 
> 标签：matplotlib, plot

我想在一些指数分布图中插入一些箭头：

```
import pylab as pl
import numpy as np

def gauss2d(x,sigma):
    return (1/np.sqrt(2*np.pi*sigma ))*np.exp(-1/2*(x/sigma)**2 )

def draw_arrow(zero, sigma, function):
    startx = zero
    print startx,function(sigma, sigma)
    arr = pl.Arrow(startx,function(startx+sigma, sigma), sigma,0,fc="k",ec="k")
    ax = pl.gca()
    ax.add_patch(arr)

def plot_gauss2d():
    x = np.mgrid[115:135:100j]
    #x=np.array(zip(range(5)),dtype=float)
    sigma = 1
    off=1.0
    pl.plot(x,gauss2d(x-126.21,3.56), 'b-')
    draw_arrow(126.21, 3.56, gauss2d)
    pl.plot(x,gauss2d(x-126.71,4.57), 'b-')
    pl.plot(x,gauss2d(x-120.64,3.5), 'b-')
    pl.ylabel('frequency')
    pl.xlabel('ppm of N')
    pl.title
    pl.show()

def main():
    plot_gauss2d()                                                             

if __name__ == "__main__":
    main() 
```

![示例1](../Images/7660be79d6e18981b84498b9bf199c7e.png)

不知何故，我似乎无法让箭头正确。我基本上想要的是这样的：

![希望](../Images/28ce7f064d0647b313fbfde28a82f9e3.png)

我根本无法弄清楚如何将箭头直接设置到我想要的位置。它应该在正确的高度上标出标准偏差的点。整个事情当然应该产生多条指数曲线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:47:19.097

箭头的问题在于它使用`figure`坐标而不是`data`坐标。因此，正如@Paul 所建议的，您可以使用注释，如

```
import pylab as pl
import numpy as np

def gauss2d(x,sigma):
    return (1/np.sqrt(2*np.pi*sigma ))*np.exp(-1/2*(x/sigma)**2 )

def markParameters(m,s):
    p1=gauss2d(s,s)
    p2=gauss2d(0,s)

    pl.annotate("", xy=(m-s, p1), xycoords='data', xytext=(m+s, p1), textcoords='data', arrowprops=dict(arrowstyle="<->", connectionstyle="arc3"),)
    pl.text(m,p1,'sigma',horizontalalignment='center',verticalalignment='top')
    pl.annotate("", xy=(m, 0), xycoords='data', xytext=(m, p2), textcoords='data', arrowprops=dict(arrowstyle="<->", connectionstyle="arc3"),)
    pl.text(m,p2*0.75,'mean',horizontalalignment='right',verticalalignment='center',rotation=90)

def plot_gauss2d():
    x = np.mgrid[115:135:100j]
    #x=np.array(zip(range(5)),dtype=float)
    m,s=126,3.56

    pl.plot(x,gauss2d(x-m,s), 'b-')
    markParameters(m,s)

    pl.ylabel('frequency')
    pl.xlabel('ppm of N')
    pl.title
    pl.show()

def main():
    plot_gauss2d()

if __name__ == "__main__":
    main() 
```

![在此处输入图像描述](../Images/c11516d0846ab7bced01e7b0e13c1af7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:09:53.577

查看该`annotate`方法的演示：http: [//matplotlib.sourceforge.net/examples/pylab_examples/annotation_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/annotation_demo.html)

那应该照顾你所需要的。

# zend-framework - Zend Framework：显示表状态查询

> ID：12143930
> 
> 赞同：1
> 
> 时间：2012-08-27T14:25:03.293
> 
> 标签：zend-framework, zend-db

如何在 zend 中编写此查询：

```
$tableStatus = mysql_query("SHOW TABLE STATUS LIKE 'table_Name'"); 
```

因为我需要获得下一个自动增量编号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:44:01.767

关于什么？

```
$stmt = $dbAdapter->query("SHOW TABLE STATUS LIKE 'table_name';");
$tableStatus = $stmt->fetchObject(); 
```

# spring - 如何获取让我在 Spring Web Flow 中陈述的事件？

> ID：12143932
> 
> 赞同：0
> 
> 时间：2012-08-27T14:25:04.973
> 
> 标签：spring, spring-mvc, spring-webflow

假设我有一个被许多状态作为目标的视图状态。他们中的许多人将在此状态下进行目的地转换。对于其中一些，我想在页面上显示某些数据。所以假设如果从状态 A->B 则不显示，如果 C->B 显示。我认为如果我知道触发转换的事件，我可以轻松地做到这一点......但我找不到方法（我是 SWF 的新手）。你知道怎么做吗？或者获得相同结果的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:57:45.263

我已经使用`FlowExecutionListener`. `FlowExecutionListenerAdapter`作为基类提供，用于在转换、状态更改等上添加行为。如何注册此类侦听器的示例可以[在](http://static.springsource.org/spring-webflow/docs/2.0-m1/reference/practical.html) 文档中找到。每个方法都传递一个包含有关事件的元数据的定义。从该元数据中，您可以确定该事件是否是您感兴趣的事件并执行您的自定义逻辑。

希望有帮助。

# c++ - 如何从成员函数返回迭代器？

> ID：12143934
> 
> 赞同：-3
> 
> 时间：2012-08-27T14:25:09.573
> 
> 标签：c++, stl

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我有一个像下面这样的模板类

```
 template <class Key, class Object>
  class  TObjectRegistery
  {
  public:
     typedef map<const Key,  Object*> ObjectMap;

     void AddObject(Object *obj){
        objectMap_[obj.code()] = obj;
     }
  private:
     ObjectMap  objectMap_;
     } 
```

我想在 之外运行迭代`TFactory`，然后我想向类中添加两个成员函数。

```
 ObjectMap::iterator xbegin(){
     return objectMap_.begin();
  } 
```

但我得到一个我错过的错误；在 xbegin 之前取消定义 ObjectMap::iterator

```
 "missing ';' before identifier 'xbegin'" 
```

为什么会这样？我该如何解决？如果这是进行课外迭代的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:30:45.420

您还需要在 ObjectMap 之前使用 typename 关键字，因为它是模板参数的派生类型：

```
typename ObjectMap::iterator xbegin(){
    return objectMap_.begin();
} 
```

# c# - 使用来自 badgerports 的 Mono 包，在运行时出现异常

> ID：12143935
> 
> 赞同：2
> 
> 时间：2012-08-27T14:25:16.930
> 
> 标签：c#, ubuntu, mono

我正在尝试将用 C# 编写的 .NET 应用程序移植到 linux 中。
使用 MoMa 工具进行的兼容性测试表明该应用程序是兼容的。我使用 Visual Studio 2010 编译了代码，并将生成的 .exe 文件复制到我的 Ubuntu VM（运行 10.04 LTS）。

我已经安装了带有 badgerport 源的单声道（来自[http://badgerports.org/lucid.html](http://badgerports.org/lucid.html)）。我看到 /usr/lib/mono 目录中有 4.0 库：

```
user@ubuntu:~$ ls -l /usr/lib/mono
total 52
drwxr-xr-x   3 root root  4096 2012-08-27 07:15 2.0
drwxr-xr-x   3 root root  4096 2012-08-27 07:15 3.5
drwxr-xr-x   3 root root 12288 2012-08-27 07:15 4.0
drwxr-xr-x   2 root root  4096 2012-08-27 07:14 compat-2.0
drwxr-xr-x 145 root root 12288 2012-08-27 07:15 gac
drwxr-xr-x   3 root root  4096 2012-08-27 07:15 mono-configuration-crypto
drwxr-xr-x   2 root root  4096 2012-08-27 07:15 monodoc
drwxr-xr-x   3 root root  4096 2012-08-27 07:15 xbuild
drwxr-xr-x   3 root root  4096 2012-08-27 07:15 xbuild-frameworks 
```

当我查看 mono 的手册页时，我看到了 Mono 2.5。
mono -V 返回以下内容。

```
user@ubuntu:~$ mono -V
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1~dhx1~lucid1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
TLS:           __thread
SIGSEGV:       altstack
Notifications: epoll
Architecture:  x86
Disabled:      none
Misc:          softdebug 
LLVM:          supported, not enabled.
GC:            Included Boehm (with typed GC and Parallel Mark) 
```

这是我尝试运行应用程序时的输出。

```
user@ubuntu:~$ mono MyApplication.exe 

Unhandled Exception: System.TypeLoadException: A type load exception has occurred.
at MyApplication.ConsoleRunner..ctor () [0x00000] in <filename unknown>:0 
at MyApplication.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: A type load exception has occurred.
at MyApplication.ConsoleRunner..ctor () [0x00000] in <filename unknown>:0 
at MyApplication.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

对正在发生的事情有什么见解，我能做些什么来解决它？不幸的是，由于其他开发限制，我仅限于使用 Ubuntu 10.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:44:25.690

您绝对*不必*使用 Mono 编译器进行编译，至少不是设计使然。尝试使用 运行`MONO_LOG_LEVEL="debug" mono your_software.exe`，您将看到尝试查找程序集和其他可能有用的信息。并把它放在这里;）

# c# - 使用“progid:DXImageTransform.Microsoft.AlphaImageLoader”在 chrome 和 firefox 中未显示图像

> ID：12143936
> 
> 赞同：0
> 
> 时间：2012-08-27T14:25:21.790
> 
> 标签：c#, asp.net

我正在使用“progid:DXImageTransform.Microsoft.AlphaImageLoader”在 div 中显示 iamge

我的代码是：

```
<body class="style_page" style="margin: 0px; background: white;" onload="onLoad()"
onunload="onUnload()" onresize="onResize()">
<div id="mediaPlayer" style="position: absolute; visibility: hidden;">
</div>
<div id="first" style="position: absolute; left: 50%; top: 0px; width: 800px; height: 600px;
    font-size: 10pt; background: white;">
    <div class="placeholder" style="left: 0%; top: 0%; width: 100%; height: 166%;">
        <div class="outline" style="filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=scale, src='output6.jpg');">
        </div>
    </div>
</div> 
```

它在 IE8 中运行良好，但在 Mozilla 和 google chrome 中无法运行

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:18:51.473

Mozilla、Opera、G.Chrome 和其他浏览器不支持用于转换文本和图像（控件）的 Microsoft 过滤器。我认为每个浏览器生产商都使用不同的方法。尝试在他们的网站上寻求帮助，您必须编写 javascript 函数来识别您开发的加载页面的浏览器。

# php - php oop 每次调用一个通用函数

> ID：12143942
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:25:37.173
> 
> 标签：php, oop

我试图通过这个循环

```
public static function CSS() {

        $filenames = array(
            "css/tableStyles.css"=>"function1()",
            "css/resetCSS.css"=> "function2()"
        );
        foreach ($filenames as $filename=>$method){
            CSS::$method;
        }

    }

   public function1(){
//do something
   }

   public function2(){
//do something else
   }

} 
```

我收到运行时错误。有小费吗？

编辑：感谢arxanas，

答案是 ：

```
$filenames = array(
                "css/tableStyles.css"=>"function1",
                "css/resetCSS.css"=> "function2"
            );
            foreach ($filenames as $filename=>$method){
                CSS::$method();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:28:01.313

`CSS::function1`甚至存在吗？你没有表现出来。无论如何，你不应该在你有括号的地方有括号`function1()`。而是使用

```
$filenames = array(
    "css/tableStyles.css"=>"function1",
    "css/resetCSS.css"=> "function2"
);
foreach ($filenames as $filename=>$method){
    CSS::$method();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:29:22.643

您需要将 function1 和 function2 定义为静态的。

```
 public static function1(){
//do something
   }

   public static function2(){
//do something else
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:31:01.927

您不能从静态方法调用非静态方法。您需要定义`function1`和`function2`喜欢静态方法。你也叫属性而不是方法。

```
public static function CSS() {

        $filenames = array(
            "css/tableStyles.css"=>"function1()",
            "css/resetCSS.css"=> "function2()"
        );
        foreach ($filenames as $filename=>$method){
            CSS::$method();
        }

    }

   public static function1(){
//do something
   }

   public static function2(){
//do something else
   }

} 
```

# c# - 如何为类型参数添加 2 个 new() 约束？

> ID：12143944
> 
> 赞同：1
> 
> 时间：2012-08-27T14:25:38.173
> 
> 标签：c#, .net, generics, syntax, generic-constraints

我想要这样的东西：

```
public static TTo JumpTo<TFrom, TTo>(this TFrom from_page) 
       where TTo : new() TFrom : new()
{
    ...
} 
```

而且我想强制 TFrom 和 TTo 都是从基本类型派生的。

我想把这个方法作为TFrom 类型**的扩展方法**。

可能吗 ？什么是正确的语法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T14:29:30.290

将关键字放在`where`每种类型之前。

```
public static TTo JumpTo<TFrom, TTo>(this TFrom from_page) 
    where TTo : SomeBaseType, new() 
    where TFrom : SomeOtherBaseType, new()
{
     ...
} 
```

# php - 在 Wordpress 主题和缩略图上重复发布不出现

> ID：12143946
> 
> 赞同：0
> 
> 时间：2012-08-27T14:25:51.080
> 
> 标签：php, wordpress, posts, repeat

我需要一些帮助来解决这个问题，但目前，当我在我的 Wordpress 网站上发布关于 Manhusay 主题的帖子时，它会重复 3 次并替换其他帖子。该网站是 www.pcrmj.com。如果有人有任何建议或纠正此问题的方法，这是当前存在的脚本。

```
<?php get_header(); ?>

<div id="content">

    <div class="postgroup">
        <?php for($i=1;$i<4;$i++) : ?>
        <?php
            $latest = get_option('mahusay_category_' . $i);
            $latcat = (empty($latest)) ? 1 : get_category_by_slug($latest);
            query_posts('showposts=1&cat='.$latcat->cat_ID);
        ?>

        <?php while (have_posts()) : the_post(); ?>
        <div class="post indexpost" id="post-<?php the_ID(); ?>">
            <?php
                $customfields = get_post_custom();
                $scrp = get_bloginfo('wpurl') . '/tt-scripts/timthumb.php?';
                if (empty($customfields['paddimage'][0])) {
                    $imgpath = $scrp . 'src=' . get_bloginfo('wpurl') . '/wp-content/themes/mahusay/images/thumbnail.png' . '&amp;w=125&amp;h=125&amp;zc=1';
                } else {
                    $imgpath = $scrp . 'src=' . get_bloginfo('wpurl') .  $customfields['paddimage'][0] . '&amp;w=125&amp;h=125&amp;zc=1';
                }
            ?>
            <div class="title">
                <p>
                    <span class="date"><?php the_time('F j, Y'); ?></span>
                    <span class="nodisplay">|</span>
                    <span class="comments"><?php comments_popup_link('No Comments', '1 Comment', '% Comments'); ?></span>
                    <span class="nodisplay">|</span>
                    <span class="categories"><?php echo $latcat->cat_name; ?></span>
                </p>
            </div>
            <img class="header" src="<?php echo $imgpath; ?>" alt="<?php the_title(); ?>" />
            <div class="entry">
                <h2 class="title"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>
                <?php themefunction_content(400,'');?>
            </div>
        </div>
        <?php endwhile; ?>
        <?php endfor; ?>
    </div>

    <div class="extra">
        <div class="box box-popular">
            <h2>Popular</h2>
            <div class="interior">
                <ul>
                <?php akpc_most_popular(5,'<li><span>','</span></li>'); ?>
                </ul>
            </div>
        </div>
        <div class="box box-recent">
            <h2>Recent</h2>
            <div class="interior">
                <?php themefunction_recent_post(); ?>
            </div>
        </div>
        <div class="clearer"></div>
    </div>

</div>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

此外，Thumbnail.png 没有出现。如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:08:09.710

首先要做的是在以下行之后......

```
<?php endfor; ?> 
```

添加...

```
<?php wp_reset_query(); ?> 
```

这会将查询重置为该页面的查询应该是什么，并将停止任何影响页面上其他循环的 query_posts 函数。

# javascript - 如何访问 XHR 对象使主干.模型保存

> ID：12143948
> 
> 赞同：3
> 
> 时间：2012-08-27T14:25:56.863
> 
> 标签：javascript, ajax, jquery, backbone.js

通过使用 ajax，我可以简单地访问 XHR 对象：

```
$.ajax().fail(function (XHR) {
     // some code
}); 
```

保存主干模型时：

```
var MyView = Backbone.View.extend({

    saveModel: function () {
        this.myModel.save({
            error: this.onError
        });
    }

    onError: function (xhr) {
       // how to access xhr?
    }

}); 
```

`backbone.model`保存onError 服务器事件时应该如何获取 XHR ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:14:49.733

当您调用通过 Backbone.Sync 的任何函数时，Backbone 返回对 XHR 的引用：

```
var MyModel = Backbone.Model.extend({
    url: "/some/path/that/is/an/error/"
});

var myModel = new MyModel();

xhr = myModel.save( {} , {
    error: function(model, response) {
        console.log(xhr);            
    }
}); 
```

另外，请注意，它[`Model.save()`](http://backbonejs.org/#Model-save)需要 2 个参数 - 保存前要更改的属性，以及选项哈希作为第二个参数。

这是一个 jsFiddle 示例：http: [//jsfiddle.net/edwardmsmith/8AVjy/7/](http://jsfiddle.net/edwardmsmith/8AVjy/7/)

**发表评论：**

我从来没有真正需要这样做，但这是我可能会做的：

```
var MyModel = Backbone.Model.extend({
    url: "/some/path/that/is/an/error/"
});

var MyView = Backbone.View.extend({

    saveModel: function () {
        that = this;
        xhr = this.model.save({}, {
            error: function (model, resp) {
                that.onError(xhr);
            }
        });
    },

    onError: function (xhr) {
       // how to access xhr?
        console.log(xhr);            
    }

});

var myModel = new MyModel();

var myView = new MyView({model: myModel});

myView.saveModel(); 
```

为此更新了 jsFiddle：http: [//jsfiddle.net/edwardmsmith/8AVjy/14/](http://jsfiddle.net/edwardmsmith/8AVjy/14/)

# java - Java 7 是否有办法将文件放入回收站而不是在 Windows 上删除

> ID：12143952
> 
> 赞同：8
> 
> 时间：2012-08-27T14:26:08.967
> 
> 标签：java, windows, recycle-bin

Java 7 是否有办法将文件放入回收站而不是在 WINdows 上删除？我知道它在 Java 6 中不存在，但我真的认为这是被添加到 Java 7 中但一直找不到它，如果没有，是否有可用的 3rd 方库来执行此操作，我不想摆弄JNI 本人。

FWIW，您可以使用 Apple 扩展在 OSX 上执行此操作

```
com.apple.eawt.FileManager.moveToTrash() 
```

**编辑：** 使用 jna 库作为答案。FWIW 它在 maven 中央存储库中可用，但您需要同时包含 jna pom 和平台 pom，因为平台 jar 是包含回收站方法的。

```
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna</artifactId>
    <version>3.4.0</version>
</dependency>

<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>platform</artifactId>
    <version>3.4.0</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:33:39.667

我认为答案是否定的。

存在第 3 方库，这在 JNA 中受支持（请参阅[Windows 上的 Java：如何将文件删除到垃圾箱（使用 JNA）](https://stackoverflow.com/questions/3709492/java-on-windows-how-to-delete-a-file-to-trash-using-jna)），但此功能不是**标准 Java 7 平台**AFAIK 的一部分。

该 RFE 倾向于证实这一点：[http ://bugs.sun.com/view_bug.do?bug_id=5080625](http://bugs.sun.com/view_bug.do?bug_id=5080625)

# java - JTextArea 行限制

> ID：12143956
> 
> 赞同：0
> 
> 时间：2012-08-27T14:26:23.383
> 
> 标签：java, swing, jtextarea, documentlistener

所以，我有一个`JTextArea`.

我需要以防止用户输入超过 4 行文本的方式对其进行设置。我找到了一种计算行数的方法。但也必须考虑复制/粘贴。而且我没有使用等宽字体。

考虑到这一切，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:32:13.160

为什么不添加 a`DocumentListener`并检查每次删除、插入或更改文本时的行数`JTextArea`：

```
JTextArea.getDocument().addDocumentListener(new DocumentListener() {
  public void changedUpdate(DocumentEvent e) {
    check();
  }
  public void removeUpdate(DocumentEvent e) {
    check();
  }
  public void insertUpdate(DocumentEvent e) {
    check();
  }

  public void check() {
     if (JTextArea.getLineCount()>4){//make sure no more than 4 lines
       JOptionPane.showMessageDialog(null, "Error: Cant have more than 4 lines", JOptionPane.ERROR_MESSAGE);
     }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T15:25:54.823

您需要定义一个关键侦听器，并且在其中肯定我们需要定义实现的方法，下一个代码是我的解决方案，希望对您有所帮助。

```
////
textfield.addKeyListener(new KeyListener() {
                public void keyPressed(KeyEvent e) {
                    // TODO Auto-generated method stub
                    if(textfield.getLineCount() == maximum_number_of_your_default) {
                        c = ta.getCaret(); 
    // c is an object of Caret class as : Caret c; initialization only.
                        a = c.getDot();
    // a is an integer value initialized by zero as : int a = 0;
                    }
                    if(ta.getLineCount() > maximum_number_of_your_default){
                        c.moveDot(a);// To retrieve the caret to the last row.
                    }
    // to show line segment on the output with each enter-press key :
                    if(e.getExtendedKeyCode() == KeyEvent.VK_ENTER)
                        System.out.println("!!!!!" + ta.getLineCount() + "  " 
                        + ta.getText());    
                }
    // default methods of KeyListener class
                public void keyReleased(KeyEvent arg0) {
                    // TODO Auto-generated method stub

                }

                public void keyTyped(KeyEvent arg0) {
                    // TODO Auto-generated method stub

                }
            });
//// 
```

这是我的想法，我希望它是正确的，祝你好运，一个世界，一个上帝，一个解决方案。

# couchbase - 沙发底座一致性

> ID：12143957
> 
> 赞同：2
> 
> 时间：2012-08-27T14:26:25.663
> 
> 标签：couchbase, consistency

当 couchbase 服务器响应 set 命令时：

*   当数据保存到单个（主）节点时
*   当数据保存到所有节点时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:29:15.540

答案会因您使用的客户端库而略有不同。但一般来说，调用 set 的肯定结果仅意味着客户端和服务器之间没有 I/O 或其他错误。在这种情况下，对于给定的密钥，数据*应该*安全地保存在主节点的内存中。

在 2.0 中，Couchbase Server 和各自的客户端库将支持 Observe 方法，这将允许进行持久性检查。调用观察，您将能够提出以下问题：

*   其主节点上是否有内存中的密钥？
*   密钥是否保存在其主节点上的磁盘上？
*   密钥是否已在内存中复制？
*   是否已将密钥持久保存到其副本？

有关观察的更多信息，请参阅[http://www.couchbase.com/wiki/display/couchbase/Observe](http://www.couchbase.com/wiki/display/couchbase/Observe)。

还有一点，只是为了确保清楚...... Couchbase 集群中的节点在职责方面都是对等的，但在密钥和这些密钥的复制方面具有主/从关系。换句话说，键“foo”有一个主节点，但可以作为该键的从属副本复制到其他节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T06:33:44.090

Couchbase 的默认行为是它只会将数据写入主节点。对其他副本节点的写入以对等通信方式异步发生。此外，实际上在主节点中，数据仅在执行写入操作时才写入缓存（RAM）（稍后会被持久化）。

# iis - 用于远程 IIS 管理器的 HTML 5 苹果平滑流

> ID：12143958
> 
> 赞同：0
> 
> 时间：2012-08-27T14:26:27.100
> 
> 标签：iis, video-streaming, windows-server-2008, iis-manager, windows-media-services

您好我正在尝试使用转换管理器将视频从 IIS 7 流式传输到我的 iOS 应用程序。

教程链接：[http ://www.hanselman.com/blog/StreamingLiveOrOnDemandVideoFromIIS7ToIOSDevicesIPhoneiPadAndSilverlightClients.aspx](http://www.hanselman.com/blog/StreamingLiveOrOnDemandVideoFromIIS7ToIOSDevicesIPhoneiPadAndSilverlightClients.aspx)

我已经创建了一个 IIS 虚拟目录来输出转换管理器的目录。在 AppleOutput 文件夹中为 iOS 流媒体创建的 Index.html 以及当我从本地计算机打开它时，视频无法在我的 safari、chrome 或 iOS 浏览器中播放。是否有任何 IIS 设置我必须启用才能从我的远程服务器流式传输视频

这是生成的代码

```
<html>
    <head>
        <title>iOS Streaming page for xhaO6UhGMU-m3u8-aapl...</title>
    </head>
    <body>
        <video autoplay="true" controls="true" src="xhaO6UhGMU-m3u8-aapl.ism/manifest(format=m3u8-aapl)">xhaO6UhGMU-m3u8-aapl</video>
    </body>
</html> 
```

这是我的 Apple 输出目录 ![在此处输入图像描述](../Images/63ee01e01967407ebbd48775005d50ee.png)

这是我从本地计算机访问的虚拟目录，但视频无法播放

![在此处输入图像描述](../Images/b428bd0e704ed86826a8d3b977e93850.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:19:30.600

几个问题：

1.  您是否打开了 IIS Web 发布？
2.  您引用的 AppleOutput 文件夹是否在 inetpub\wwwroot 目录中？

默认情况下，Transform Manager 监视文件夹位于 Web 根目录之外。任何平滑流转换都需要移动到 Web 根目录中可用的目录中。

# c++ - 如何在 C++ 中实现缓存？

> ID：12143959
> 
> 赞同：5
> 
> 时间：2012-08-27T14:26:30.230
> 
> 标签：c++, caching, memory-management

假设，我有一个非常大的`std::map< unsigned int, Foo > FooDB`，它在内存中保存`Foo`对象，可以通过它们的 ID 检索。现在可能有`Foo`比可用内存更多的对象来存储它们。所以我想有以下构造：

*   检索`Foo`ID为*x*的对象`FooDB`
*   如果对象*x*在 中`FooDB`，则返回它
*   如果不是，请从 HD 加载它，尝试将其存储起来以`FooDB`供进一步查询
    *   有足够的可用内存：将其添加到`FooDB`
    *   内存不足：通过`FooDB`从未使用的对象中删除来释放一些空间（最旧的查询时间戳）

我想为 保留一些内存，但`FooDB`我不知道其中可以存储多少个`Foo`对象，因为它们的大小不同。

关于如何实现这一点的任何想法？

**编辑**

我的基本问题是：我怎样才能知道 a`std::map`的内存大小？当然，存储在其中的所有堆对象都包括在内。我怎么知道*内存不足的*部分何时到达？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T15:59:24.317

据我所知，除了 sizeof() 之外，没有办法询问对象的大小。您说 sizeof() 不起作用，因为 Foo 对象没有固定大小。在这种情况下，如果您可以修改 Foo，那么您的 Foo 类可能可以在内部跟踪其内存占用。如果你不能修改 Foo，你也许可以编写一个可以推断内存占用的外部函数。

从根本上说，语言/编译器/运行时很难知道动态大小的对象有多大，因为它不知道哪些分配属于该对象。一个简单的解决方案，只是递归地总结它的成员指向的所有东西，将在任何具有指向它不“拥有”的对象的指针上失败。另一个简单的解决方案是跟踪在构造函数启动和返回之间完成的所有分配，对于在调用构造函数后进行分配的任何事情都会失败。

您可能只想使用 Foo 的数量作为缓存限制，而不是内存大小。除非您对整个系统的内存可用性和使用情况了解很多，否则基于内存大小的上限也是任意的。如果您对整个系统的内存使用情况了解很多，您可以只使用整体内存可用性来确定何时从缓存中释放对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T14:38:18.113

这很简单。

只需将 FooDB 中每个内存中 Foo 实例的引用放在按年龄排序的排序链表中。

当您第一次将新项目加载到内存中时，请将其添加到列表的前面。

当您阅读/修改一个项目时，将其从列表的中间移动到列表的前面。

当您需要删除旧项目以腾出空间时，将其从列表的后面弹出。

例如：

```
typedef shared_ptr<Foo> PFoo;

class Foo
{
    ...
    list<PFoo>::iterator age;
};

typedef map< unsigned int, PFoo > FooDB;
FooDB foodb; 

list<PFoo> ages;

void LoadFoo(PFoo foo)
{
    ages.push_front(foo);
}

void ReadFoo(PFoo foo)
{
    ...
    ages.erase(foo->age);
    ages.push_front(foo);
}

void MakeSpace()
{
    PFoo foo = ages.back();
    ages.pop_back();
    DeleteFoo(foo);
} 
```

# clojure - 为什么编译 tools.cli 会导致向量 args 错误？

> ID：12143963
> 
> 赞同：1
> 
> 时间：2012-08-27T14:26:36.563
> 
> 标签：clojure, command-line-interface

我正在从0.2.2 迁移`[org.clojure/tools.cli "0.1.0"]`到 0.2.2，但正在

```
Exception in thread "main" clojure.lang.ArityException: 
Wrong number of args (2) passed to: PersistentVector 
```

在以开头的行`(cli args`

```
(defn parse-opts
  "Using the newer cli library, parses command line args."
  [args]
  (cli args
       ["--ifn1" ".csv input file" :default "benetrak_roster.csv"]
       ["--ifn2" ".csv input file" :default "billing_roster.csv"]
       ["--rpt" ".csv pipe delimited output file" :default "bene_gic_rpt.csv"]
       ["--dump1" "text file report for debug output" :default "dumpfile1.txt"]
       ["--dump2" "text file report for debug output" :default "dumpfile2.txt"]
       ["--debug" "Debug flag for logging." :default 0 :parse-fn #(Integer. %)])) 
```

像这样包含 tools.cli (:use clojure.tools.cli)。

我看不出我做错了什么，并希望得到任何指示或帮助。谢谢。

顺便说一句，我通过查看示例尝试了以下方法，但它不起作用：

```
(defn -main 
  [& args]
  (let [[opts args banner]
        (cli args
        ["--ifn1" ".csv input file" :default "benetrak_roster.csv"]
        ["--ifn2" ".csv input file" :default "billing_roster.csv"]
        ["--rpt" ".csv pipe delimited output file" :default "bene_gic_rpt.csv"]
        ["--dump1" "text file report for debug output" :default "dumpfile1.txt"]
        ["--dump2" "text file report for debug output" :default "dumpfile2.txt"]
        ["--debug" "Debug flag for logging." :default 0 :parse-fn #(Integer. %)])
        start-time (str (Date.))]
        .
        .
        . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:34:06.317

这似乎有效：

```
(ns test.core
  (:use clojure.tools.cli))

(defn parse-opts
  "Using the newer cli library, parses command line args."
  [args]
  (cli args
       ["--ifn1" ".csv input file" :default "benetrak_roster.csv"]
       ["--ifn2" ".csv input file" :default "billing_roster.csv"]
       ["--rpt" ".csv pipe delimited output file" :default "bene_gic_rpt.csv"]
       ["--dump1" "text file report for debug output" :default "dumpfile1.txt"]
       ["--dump2" "text file report for debug output" :default "dumpfile2.txt"]
       ["--debug" "Debug flag for logging." :default 0 :parse-fn #(Integer. %)]))

test.core> (parse-opts [])
[{:debug 0, :dump2 "dumpfile2.txt", :dump1 "dumpfile1.txt", :rpt "bene_gic_rpt.csv", :ifn2 "billing_roster.csv", :ifn1 "benetrak_roster.csv"} [] "Usage:\n\n Switches  Default              Desc                              \n --------  -------              ----                              \n --ifn1    benetrak_roster.csv  .csv input file                   \n --ifn2    billing_roster.csv   .csv input file                   \n --rpt     bene_gic_rpt.csv     .csv pipe delimited output file   \n --dump1   dumpfile1.txt        text file report for debug output \n --dump2   dumpfile2.txt        text file report for debug output \n --debug   0                    Debug flag for logging.           \n"]
test.core> 
```

你确定错误不在你传递给的任何地方`parse-opts`吗？

另外：您确定您的 project.clj 中有正确版本的 tools.cli（并且只有正确的版本）吗？

# jquery - 如何从单击网格的复选框中获取文本 td？

> ID：12143965
> 
> 赞同：-1
> 
> 时间：2012-08-27T14:26:41.120
> 
> 标签：jquery, select, text, grid, html-table

我需要在网格上获取 td 的文本，只有单击并选中的复选框，而不是所有选中的复选框。

在此示例中选择了 FTP，当我单击另一条记录时，它应该显示该记录的门。

非常感谢。

HTML 代码：

```
<table id="grid_tabela_servicos" tabindex="1" cellspacing="0" cellpadding="0" border="0" role="grid" aria-multiselectable="true" aria-labelledby="gbox_grid_tabela_servicos" class="ui-jqgrid-btable" style="width: 382px; border-width: 1px 1px 0px 0px; ">
<tbody>
    <tr role="row" id="1" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr ui-state-highlight ui-state-hover" aria-selected="true">
        <td role="gridcell" style="text-align: center; padding: 3px; " aria-describedby="grid_tabela_servicos_cb">
            <input role="checkbox" type="checkbox" id="jqg_grid_tabela_servicos_1" class="cbox" style="font-size: 14px; ">
        </td>
        <td role="gridcell" style="padding: 3px; " title="Apache" aria-describedby="grid_tabela_servicos_idx0">Apache</td>
        <td role="gridcell" style="padding: 3px; " title="80" aria-describedby="grid_tabela_servicos_idx1">80</td>
    </tr>
    <tr role="row" id="2" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr">
        <td role="gridcell" style="text-align: center; padding: 3px; " aria-describedby="grid_tabela_servicos_cb">
            <input role="checkbox" type="checkbox" id="jqg_grid_tabela_servicos_2" class="cbox" style="font-size: 14px; ">
        </td>
        <td role="gridcell" style="padding: 3px; " title="FTP" aria-describedby="grid_tabela_servicos_idx0">FTP</td>
        <td role="gridcell" style="padding: 3px; " title="21" aria-describedby="grid_tabela_servicos_idx1">21</td>
    </tr>
    <tr role="row" id="3" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr">
        <td role="gridcell" style="text-align: center; padding: 3px; " aria-describedby="grid_tabela_servicos_cb">
            <input role="checkbox" type="checkbox" id="jqg_grid_tabela_servicos_3" class="cbox" style="font-size: 14px; ">
        </td>
        <td role="gridcell" style="padding: 3px; " title="SSH" aria-describedby="grid_tabela_servicos_idx0">SSH</td>
        <td role="gridcell" style="padding: 3px; " title="22" aria-describedby="grid_tabela_servicos_idx1">22</td>
    </tr>
    <tr role="row" id="4" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr">
        <td role="gridcell" style="text-align: center; padding: 3px; " aria-describedby="grid_tabela_servicos_cb">
            <input role="checkbox" type="checkbox" id="jqg_grid_tabela_servicos_4" class="cbox" style="font-size: 14px; ">
        </td>
        <td role="gridcell" style="padding: 3px; " title="Testeaaa" aria-describedby="grid_tabela_servicos_idx0">Testeaaa</td>
        <td role="gridcell" style="padding: 3px; " title="22;25;110" aria-describedby="grid_tabela_servicos_idx1">22;25;110</td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:34:12.787

门是指表格行中的端口（最后一个 td）吗？所以像这样

```
$(this).parent().siblings().last().text();
// current clicked, parent td, siblings, last sibling, get text 
```

[http://jsfiddle.net/SdPur/](http://jsfiddle.net/SdPur/)

# jquery - 样式化 JQuery UI 滑块

> ID：12143975
> 
> 赞同：2
> 
> 时间：2012-08-27T14:27:22.140
> 
> 标签：jquery, css, jquery-ui, styles

这是我对 JQuery UI 滑块的标记

```
<li class = "volume">
    <div class = "slider-vertical" style="height:50px; margin-left:4px;
     margin-top:-60px; background-color: black;" hidden></div>
</li> 
```

我为此使用了内联样式。我的问题是，jquery 滑块的颜色怎么没有改变？即使我已将其设置为黑色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:54:53.050

[您应该使用jQuery UI Themeroller](http://jqueryui.com/themeroller/)为您的 UI 组件设置样式并为您的实现生成自定义 CSS 文件，而不是尝试将内联样式应用于滑块。

许多 jQuery UI 组件使用图像作为背景，因此更新背景颜色通常不会产生预期的效果。使用 Themeroller 会给你最好的结果。

# spring - 使用 Arquillian 和 Arquillian Spring Framework Extension 进行集成测试

> ID：12143976
> 
> 赞同：4
> 
> 时间：2012-08-27T14:27:25.537
> 
> 标签：spring, junit, jboss-arquillian

我想为集成测试建立一个基础设施。目前我们使用 maven 引导 tomcat，然后执行 httpunit 测试。但是当前的解决方案几乎没有缺点。

1.  如果测试，提交到数据库的任何更改最终都需要手动回滚
2.  在集成测试中运行代码覆盖率并不简单（我们使用的是声纳）。

**我的目标是：**

1.  允许在测试之间自动回滚（希望使用 String @transaction 和 @rollback）
2.  简单直接的代码覆盖率
3.  使用 @RunWith 将从 JUnit 引导系统，而不是从外部引导系统
4.  与实时 servlet 和 javascript 交互（我考虑从 httpuinit 切换到 selenium……）
5.  合理的执行时间（至少不长于现有的执行时间）

上面的目标在我看来是合理的，并且对于许多 Java/J2ee 项目来说都是通用的。我正在考虑通过使用 Arquillian 和 Arquillian Spring Framework Extension 组件来实现这些目标。另请参阅[https://github.com/arquillian/arquillian-showcase/](https://github.com/arquillian/arquillian-showcase/)

1.  有没有人使用 Arquillian 和[Arquillian Spring Framework Extension](http://arquillian.org/blog/2012/08/17/arquillian-extension-spring-1-0-0-Beta1/)并有经验？
2.  你能分享问题的最佳实践和经验教训吗？
3.  任何人都可以提出上述方法的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-17T01:01:53.573

我不能完全回答你的问题。只有一些提示

1.  关于自动回滚。就我而言。使用 liquibase 在“hsqldb”或“h2”上初始化测试数据，可以设置为内存模式。然后无需回滚。

2.  对于阿奎利安。这是一个很好的真实测试方法。我学到的是“ *Arauillian Spring Framework Extension* ”只是一个扩展。您必须绑定到特定容器，例如“jboss、glasshfish、tomcat”才能运行测试。但是我不知道如何申请一个不需要应用服务器支持的基于spring的javaSE程序。

我的教训是 jboss 端口冲突。因为 jboss-dist 被设置为 8080 作为默认的 http 端口。但是我们公司的代理与8080相同。所以我不能使用maven来获取jboss-dist工件。

希望其他人可以提供更多信息。

# python - 向 x 轴 python matplotlib 添加更多标签

> ID：12143977
> 
> 赞同：2
> 
> 时间：2012-08-27T14:27:27.740
> 
> 标签：python, matplotlib

这是我的原始图表： ![在此处输入图像描述](../Images/b9681c99fff83683ce5d16d69631e725.png)

我没有更改 xticklabels 或任何东西，我只是做`plot(x,y)`了，标签是根据 x 值自动生成的。

但是我想将 x 标签更改为 [0,24,48,72....480,504]

这就是我所做的

```
ax.plot(x1,y1)

xlabel =[]
xinterval = np.arange(0,504,24) 
ax.set_xticks=(xinterval)
ax.set_xticklabels(xinterval) 
```

结果是： ![在此处输入图像描述](../Images/ef6c08f1f9cf96b9c3fa2dfd5132f4a6.png)

这显然是错误的，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:30:38.160

你有一个错字；它应该是`ax.set_xticks(xinterval)`，没有`=`.

不需要`set_xticklabels`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:44:05.020

以下似乎对我有用

```
from string import lowercase

xs = range(0,504,24)
plot(xs, [sin(x) for x in xs])
locs,labels = xticks(xs, [lowercase[xs.index(x)] for x in xs]) 
```

稍微扭曲的示例，但至少标签正确显示为`string`s 并且似乎在正确的位置。

# javascript - 在浏览器历史记录中导航时从最新页面返回多少步？

> ID：12143981
> 
> 赞同：2
> 
> 时间：2012-08-27T14:27:38.003
> 
> 标签：javascript, html, browser-history

在 HTML5 历史 API 的上下文中，当我在历史中导航时，如何检索当前深度，即，我距离最新视图还有多少步，或者我可以使用浏览器上的前进按钮执行的最大转发次数在现阶段？

或者至少如果我可以获得一个布尔值，指示我当前是在最新视图还是一些旧视图（导航到使用后退按钮）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:09:10.827

历史 API 可以提供长度，但它不会告诉您您处于多远/多深。

您可能想尝试将其他信息传递给 pushstate 以获取此信息。像[这样](https://github.com/balupton/history.js#working-with-historyjs)的东西。

# cakephp - 具有多个域的 APE

> ID：12143983
> 
> 赞同：0
> 
> 时间：2012-08-27T14:27:39.377
> 
> 标签：cakephp, cross-domain, ape

在我的应用程序中，我使用 APE 从其他用户那里获取异步更新。现在它适用于特定域（abc.com），但现在我的用户（公司）想要将 xyz.com 用于 company.abc.com，我通过创建**CNAME**来做到这一点。但是现在**APE**给出了以下错误

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:57:08.173

嘿，我解决了这个问题。

APE 有跨域传输可用且可能，请参考，

[http://www.ape-project.org/wiki/index.php/Tutorial:Use_different_transport_method_%28JSONP%2C_XHRStreaming%29](http://www.ape-project.org/wiki/index.php/Tutorial:Use_different_transport_method_%28JSONP%2C_XHRStreaming%29)

我正在使用

APE.Config.transport = 1; 我改成

APE.Config.transport = 2; // 2 是 JSONP

它对我来说很酷:)

# c# - SHA512哈希到C#中的字符串

> ID：12143986
> 
> 赞同：9
> 
> 时间：2012-08-27T14:27:47.520
> 
> 标签：c#, string, hash, sha512

我有从字符串生成 SHA512 的代码。

```
 public static string GetCrypt(string text)
        {
            string hash = "";
            SHA512 alg = SHA512.Create();
            byte[] result = alg.ComputeHash(Encoding.UTF8.GetBytes(text));
            hash = Encoding.UTF8.GetString(result);
            return hash;
        } 
```

现在我必须将哈希转换回字符串。有什么想法怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T14:28:40.087

哈希是单向的。您无法（轻松）将其取回。您可能需要实际加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:36:13.150

是的。哈希是单向的。请使用 RijndaelManaged 等对称加密类。

这是我正在使用的 RijndaelSimple 类： [http ://www.obviex.com/samples/encryption.asp](http://www.obviex.com/samples/encryption.asp)

相同链接的缓存版本在这里： [http ://webcache.googleusercontent.com/search?q=cache:WyVau-XgIzkJ:www.obviex.com/samples/encryption.asp&hl=en&prmd=imvns&strip=1](http://webcache.googleusercontent.com/search?q=cache:WyVau-XgIzkJ:www.obviex.com/samples/encryption.asp&hl=en&prmd=imvns&strip=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:34:43.987

您无法将`hash`返回的字符串转换为计算散列的字符串。

如果需要，则必须将**散列**与每个目标字符串散列进行比较。

如果其中一个与哈希匹配，则该哈希来自目标字符串。

**它的用途：**如果你想存储`passwords`，`database`你可以存储它的哈希值而不是密码。所以即使黑客访问了你的数据库，他也不能得到密码，因为它是哈希的。知道我们通过它的字符串的唯一方法创建哈希是为了**将**它与所需的字符串匹配！

# java - 在具有基于网格的背景的网格中排列组件

> ID：12143989
> 
> 赞同：2
> 
> 时间：2012-08-27T14:28:03.400
> 
> 标签：java, swing, miglayout

![在此处输入图像描述](../Images/9f6f66a583602f3f5761ccb1cd356a05.png)

我正在做一个大学项目，我很难将组件与板网格对齐。该板将始终保持 1:1 的宽高比，但尺寸可能会有所不同。这是我尝试过的结果：

![在此处输入图像描述](../Images/8d574d6622d38825640e3c6d8b65ff9c.png)

为什么百分比与我计算的实际图像尺寸 1200x1200 的百分比不一致？

这是我的布局代码：

```
public class BoardPanel extends ViewComponent {

    public static final int ROWS = 27;
    public static final int COLS = 23;
    private Board board = new Board();

    private BufferedImage background = ResourceLoader.openImage("images/board.jpg");

    public BoardPanel() {
        this.add(board, "pos 4.5% 4.5%, width 76.5%, height 91%");           
    }

    @Override
    public void paintContent(Graphics2D g) {
        g.drawImage(background, 0, 0, getHeight(), getHeight(), null);
    }

    private class Board extends ViewComponent {

        public Board() {
            setLayout(new GridLayout(ROWS, COLS,  1, 1));

            for (int row = 0; row < ROWS; row++)
                for (int col = 0; col < COLS; col++)
                    this.add(new Location(row, col));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:30:30.907

作为替代方案，使用[`BufferedImage#getSubimage()`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getSubimage%28int,%20int,%20int,%20int%29)将图像分成全等的部分，如此[处所示](https://stackoverflow.com/questions/3078354)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:50:58.153

**`GridLayout`**我已经想出了如何做到这一点，当您查看和之间的区别时，答案就来了**`MigLayout`**。

发生的事情是我在使用时有空白空间（插图），**`GridLayout`**因为它强制所有单元格的大小相同。我在添加 1px 时注意到了这一点`LineBorder`。

处理额外空间的方式**`MigLayout`**似乎是在单元格之间分配额外的像素，从而迫使它尽可能理想地修复容器。例如：

```
this.setLayout(new MigLayout("ins 0, wrap " + COLS + ", gap 1", "grow", "grow"));

        for (int row = 0; row < ROWS; row++)
            for (int col = 0; col < COLS; col++)
                this.add(new Location(row, col), "grow"); 
```

![在此处输入图像描述](../Images/a4951ad8721b1740d43ae37016882e52.png)

它使用与此处显示的网格布局完全相同的容器和面板大小：（注意插图）

```
this.setLayout(new GridLayout(ROWS, COLS, 1, 1));
this.setBorder(new LineBorder(Color.RED));

    for (int row = 0; row < ROWS; row++)
        for (int col = 0; col < COLS; col++)
            this.add(new Location(row, col)); 
```

![在此处输入图像描述](../Images/126aa25e1fc1259b2b34749a13f5c613.png)

# java - 使用 LiquiBase 和 Spring 将大量值（使用 FK）插入数据库

> ID：12143994
> 
> 赞同：22
> 
> 时间：2012-08-27T14:28:19.720
> 
> 标签：java, sql, database, spring, liquibase

我正在尝试使用 Liquibase 将大量记录（当前位于 Excel 文件中）添加到我的数据库中（以便我知道如何为将来的数据库更改做这件事）

我的想法是使用 Java 读取 excel 文件，然后从我的 Spring 初始化类中填充 ChangeLogParameters，如下所示：

```
SpringLiquibase liqui = new SpringLiquibase();
liqui.setBeanName("liquibaseBean");
liqui.setDataSource(dataSource());
liqui.setChangeLog("classpath:changelog.xml");

HashMap<String, String> values = new HashMap<String, String>();
values.put("line1col1", ExcelValue1);
values.put("line1col2", ExcelValue2);
values.put("line1col3", ExcelValue3);
values.put("line2col1", ExcelValue4);
values.put("line2col2", ExcelValue5);
values.put("line2col3", ExcelValue6);
...
liqui.setChangeLogParameters(values); 
```

这种方法的问题是我的 changelog.xml 会很奇怪（而且没有生产力）

```
<changeSet author="gcardoso" id="2012082707">
    <insert tableName="t_user">
        <column name="login" value="${ExcelValue1}"/>
        <column name="name" value="${ExcelValue2}}"/>
        <column name="password" value="${ExcelValue3}"/>
    </insert>
    <insert tableName="t_user">
        <column name="login" value="${ExcelValue4}"/>
        <column name="name" value="${ExcelValue5}}"/>
        <column name="password" value="${ExcelValue6}"/>
    </insert>
    ...
</changeSet> 
```

有什么办法可以让我做这样的事情：

```
HashMap<String, ArrayList<String>> values = new HashMap<String, ArrayList<String>>();
values.put("col1", Column1);
values.put("col2", Column2);
values.put("col3", Column3);
liqui.setChangeLogParameters(values);

<changeSet author="gcardoso" id="2012082707">
    <insert tableName="t_user">
        <column name="login" value="${Column1}"/>
        <column name="name" value="${Column2}}"/>
        <column name="password" value="${Column3}"/>
    </insert>
</changeSet> 
```

或者还有其他方法吗？

**编辑：** 我目前的选择是将 Excel 转换为 CSV 文件并使用导入数据

```
<changeSet author="gcardoso" id="InitialImport2" runOnChange="true">

    <loadData tableName="T_ENTITY" file="com/exictos/dbUpdate/entity.csv">
        <column header="SHORTNAME" name="SHORTNAME" />
        <column header="DESCRIPTION" name="DESCRIPTION" />
    </loadData>

    <loadData tableName="T_CLIENT" file="com/exictos/dbUpdate/client.csv">
        <column header="fdbhdf" name="ENTITYID" defaultValueComputed="(SELECT ID FROM T_ENTITY WHERE SHORTNAME = ENTITY_REFERENCE"/>
        <column header="DESCRIPTION" name="DESCRIPTION" />
    </loadData>

</changeSet> 
```

使用这些 CSV 文件：

实体.csv

```
SHORTNAME,DESCRIPTION
nome1,descricao1
nome2,descricao2 
```

客户端.csv

```
DESCRIPTION,ENTITY_REFERENCE
descricaoCliente1,nome1
descricaoCliente2,nome2 
```

但我得到这个错误：

```
liquibase.exception.DatabaseException: Error executing SQL INSERT INTO `T_CLIENT` (`DESCRIPTION`, `ENTITY_REFERENCE`) VALUES ('descricaoCliente1', 'nome1'): Unknown column 'ENTITY_REFERENCE' in 'field list' 
```

如果我将 client.csv 的标头更改为DESCRIPTION,ENTITYID，我会收到以下错误：

```
liquibase.exception.DatabaseException: Error executing SQL INSERT INTO `T_CLIENT` (`DESCRIPTION`, `ENTITYID`) VALUES ('descricaoCliente1', 'nome1'): Incorrect integer value: 'nome1' for column 'entityid' at row 1 
```

在任何这些情况下，看起来 defaultValueComputed 的工作方式与以下示例中的 valueComputed 不同

```
<changeSet author="gcardoso" id="InitialImport1">

    <insert tableName="T_ENTITY">
        <column name="SHORTNAME">nome1</column>
        <column name="DESCRIPTION">descricao1</column>
    </insert>

    <insert tableName="T_CLIENT">
        <column name="ENTITYID" valueComputed="(SELECT ID FROM T_ENTITY WHERE SHORTNAME = 'nome1')"/>
        <column name="DESCRIPTION">descricaoCliente</column>
    </insert>

</changeSet> 
```

这是预期的行为吗？LiquiBase 的错误？或者只是我做错了什么（最有可能）？

或者有没有其他方法可以导入大量数据？但总是使用 LiquiBase 和/或 Spring。

**EDIT2：**我的问题是我无法使用正确的外键将数据插入到第二个表中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T07:42:01.450

我会说 Liquibase 不是您想要实现的目标的理想工具。Liquibase 非常适合管理数据库结构，而不是数据库的数据。

如果您仍想使用 Liquibase 来管理数据，您有几个选择（请参阅[此处](https://stackoverflow.com/questions/12144520/merging-values-from-db-using-liquibase-and-spring)）-

1.  将您的插入语句记录为 SQL，并从 changelog.xml 中引用它们，如下所示：

    `<sqlFile path="/path/to/file.sql"/>`

2.  使用您从 changelog.xml 中引用的[自定义重构类，如下所示：](http://www.liquibase.org/manual/custom_refactoring_class)

    `<customChange class="com.example.YourJavaClass" csvFile="/path/to/file.csv"/>`

    YourJavaClass 将从 CSV 文件中读取记录，并将它们应用到数据库，实现此方法：

    `void execute(Database database) throws CustomChangeException;`

请记住，一旦您通过 Liquibase 加载了这些数据，就不应修改文件中的数据，因为这些更改不会被重新应用。如果要对其进行更改，则必须在后续更改集中进行。因此，一段时间后，您可能会得到很多不同的 CSV 文件/liquibase 变更集，它们都在相同/相似的数据上运行（这取决于您将如何使用这些数据——一旦插入它会改变吗？）。

我建议查看使用[DBUnit](http://www.dbunit.org/)来管理您的参考数据。它是一个主要用于单元测试的工具，但它非常成熟，适合在生产中使用。您可以将信息存储在 CSV 或 XML 中。我建议使用 Spring 'InitializingBean' 从类路径加载数据集并执行 DBUnit 'refresh' 操作，这将来自[文档](http://www.dbunit.org/apidocs/org/dbunit/operation/RefreshOperation.html)：

> 此操作从字面上将数据集内容刷新到数据库中。这意味着更新现有行的数据并插入不存在的行。任何存在于数据库中但不在数据集中的行不受影响。

这样，您可以将参考数据保存在一个地方，并随着时间的推移添加到其中，以便只有一个信息来源，并且不会跨多个 Liquibase 变更集拆分。将您的 DBUnit 数据集保存在版本控制中将提供可追溯性，并且作为奖励，DBUnit 数据集可以跨数据库移植，并且可以管理诸如插入顺序之类的事情，以防止您违反外键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:47:58.423

这取决于您的目标数据库。如果您使用的是**Sybase**或**MSSQL**服务器，那么您可以使用随您安装的客户端+驱动程序一起提供的[BCP 工具。](http://msdn.microsoft.com/en-us/library/aa174646%28v=sql.80%29.aspx)这是将大量数据移入/移出这些数据库的最快方式。

谷歌搜索我也发现了这些链接......

Oracle 有[SQL*LOADER](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)工具

MySQL 有[LOAD DATA INFILE](http://www.ben90.com/2011/06/import-bcp-output-file-into-mysql-database/)命令

我希望每个数据库供应商都提供一些描述的工具来批量加载数据。

# javascript - 使用 JSONP 使用 WCF 跨域存储在 datagrid 中并查看数据道场？

> ID：12143996
> 
> 赞同：1
> 
> 时间：2012-08-27T14:28:23.473
> 
> 标签：javascript, wcf, datagrid, dojo, jsonp

我在任何地方都找不到这个，我不知道为什么 dojo 不能解决跨域 REST 请求。无论如何，这是问题所在：

我正在实现 dojo 数据网格，并且我试图从不在我的域中的 WCF 获取网格的数据，所以我提出了跨域问题，我试图通过使用 JSONP 来解决这个问题。

但我是道场的新手，所以我可能做错了什么。这是我的代码：

```
require([
         "dojo/store/JsonRest",
         "dojo/store/Memory",
         "dojo/store/Cache",
         "dojox/grid/DataGrid",
         "dojo/data/ObjectStore",
         "dojo/query",
         "dijit/form/Button",
         "dojo/domReady!",
         "dojo/request/script","dojo/dom-construct"
     ],function(script, domConstruct){

  //make the request just as before
  script.get("http://localhost:8060/ListService.svc/LoadLists?uid=c4446476-15e6-e111-9ecb-b7c5971d170a", {
    jsonp: "callback",
    query: {q: "#dojo"}
   }).then(function(data){
        test = data;         
    }).then(function(){
     console.log(results);
    });
 }, function (JsonRest, Memory, Cache, DataGrid, ObjectStore ,query) {

         grid = new DataGrid({
             store: dataStore = test,

             structure: [
                 { name: "Blog Id", field: "id", width: "50px", },
                 { name: "Name", field: "listtype", width: "200px",classes:"Name" },
                 { name: "Phone Number", field: "longlevel", width: "200px",classes:"test" }
             ]
         }, "gridTest"); // make sure you have a target HTML element with this id

         grid.startup();

         dojo.query("body").addClass("claro");

         grid.canSort = function () { return false; };

     }); 
```

我得到的错误是查询不是函数。任何想法如何正确实施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:47:28.217

简单的错误只是将数据网格命令放在第一个然后返回数据

```
require([
         "dojo/store/JsonRest",
         "dojo/store/Memory",
         "dojo/store/Cache",
         "dojox/grid/DataGrid",
         "dojo/data/ObjectStore",
         "dojo/query",
         "dijit/form/Button",
         "dojo/domReady!",
         "dojo/request/script","dojo/dom-construct"
     ],function(script, domConstruct){

  //make the request just as before
  script.get("http://localhost:8060/ListService.svc/LoadLists?uid=c4446476-15e6-e111-9ecb-b7c5971d170a", {
    jsonp: "callback",
    query: {q: "#dojo"}
   }).then(function(data){
       function (JsonRest, Memory, Cache, DataGrid, ObjectStore ,query) {

         grid = new DataGrid({
             store: dataStore = test,

             structure: [
                 { name: "Blog Id", field: "id", width: "50px", },
                 { name: "Name", field: "listtype", width: "200px",classes:"Name" },
                 { name: "Phone Number", field: "longlevel", width: "200px",classes:"test" }
             ]
         }, "gridTest"); // make sure you have a target HTML element with this id

         grid.startup();

         dojo.query("body").addClass("claro");

         grid.canSort = function () { return false; };

     })        
    }).then(function(){
     console.log(results);
    });
 }; 
```

如果您仍然发现问题可能是因为在请求从 wcf 返回之前创建了网格。

如果发生这种情况，请使用 dojo 1.8 中的 Deferred，它可以让您控制您的流程顺序。

因此您将能够调用请求给它一些时间，然后将数据放入要查看的网格中。

# xul - Thunderbird中“另存为模板”的Javascript代码？

> ID：12143997
> 
> 赞同：0
> 
> 时间：2012-08-27T14:28:28.423
> 
> 标签：xul, thunderbird, thunderbird-addon

我正在尝试在 Thunderbird 中创建自己的自定义按钮。我正在尝试制作一个“另存为模板”独立按钮。我已经完成了 chrome 目录，但我无法弄清楚 button.js 文件中的命令是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:15:26.307

You need to associate the command "cmd_saveAsTemplate" with your toolbar button.

For tasks like this one, I recommoned [DOM Inspector](https://addons.mozilla.org/de/firefox/addon/dom-inspector-6622/) which lets you dive into the a window's XUL structure.

# actionscript-3 - 有效地使用数组来禁用按钮

> ID：12143999
> 
> 赞同：0
> 
> 时间：2012-08-27T14:28:30.867
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flex3

例如，我在数组中有值。

这些值是按钮的 ID。我的问题是如何有效地使用数组来禁用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:50:58.920

您可以将按钮本身存储在数组（或向量）中，这比使用 id 更容易：

```
private var _clickedButtons:Array = [];

function onClick(e:MouseEvent):void
{
  _clickedButtons.push(e.currentTarget);
} 
```

然后浏览此数组以禁用它们

```
function disableButtons():void
{
  for each(var button:Button in _clickedButtons)
  {
    button.enabled = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:51:17.130

假设您在评论中有一个数组：

```
var buttons:Array=new Array('button1','button2','button3'); 
```

并且您的 MC 中有带有名称的按钮对象，即 button1、button2、button3。使用以下内容：

```
for each (var s:String in buttons) this[s].disable(); 
```

其中“禁用”是禁用按钮所需的任何操作。