# StackOverflow 问答 10887000-10887999

# python - 在 python 中读取 Freebase 数据转储，读取几行？

> ID：10887001
> 
> 赞同：4
> 
> 时间：2012-06-04T19:19:51.200
> 
> 标签：python, file, readline, freebase

我正在尝试使用 freebase 数据转储，但似乎我在使用 python 读取文件时遇到了一些问题。看起来我的程序无法读取所有行。

```
def test2():
    count=0
    for line in open(FREEBASE_TOPIC):
        count+=1
    return count

def test3():
    count=0
    for line in open(FREEBASE_QUAD):
        count+=1
    return count

if __name__ == "__main__":

   print "FREEBASE TOPIC - NR LINES:",test2()
   print "FREEBASE QUAD - NR LINES:",test3() 
```

结果如下：

```
FREEBASE TOPIC - ITR TIME: 1.21000003815
FREEBASE TOPIC - NR LINES: 1643010

FREEBASE QUAD - ITER TIME: 0.797000169754
FREEBASE QUAD - NR LINES: 3155131 
```

这可以是全部。包含整个游离碱似乎只有几行。而且我看不出如何在 2 秒内迭代一个 33GB 文件和另一个 5GB 文件。

怎么了？我正在再次下载文件，以防下载过程中出现问题，但我的连接需要数十年的时间，所以我在此同时询问。文件大小是正确的，我已经打印了一些行，它们看起来是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:03:44.417

我遇到了一个问题：

```
open('file', 'rb') 
```

应该解决它。

```
chr(26) 
```

有时会导致文件以默认的文本模式“r”结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:27:05.127

听起来您在使用它们之前正在解压缩文件。几乎可以肯定，最好保持文件压缩并在访问时对其进行解压缩。

```
from bz2 import BZ2File
for line in BZ2File('freebase-datadump-quadruples-<date>.tsv.bz2','rU'):
    <process a line> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:37:58.230

您的脚本运行良好，并在 Ubuntu 上为我生成了正确的行数。这可能是您的操作系统的限制吗？

[使用 python 解析大型（20GB）文本文件 - 将 2 行读取为 1](https://stackoverflow.com/questions/10220862/parsing-large-20gb-text-file-with-python-reading-in-2-lines-as-1)

# fortran - 错误：此名称没有类型，并且必须具有显式类型

> ID：10887009
> 
> 赞同：0
> 
> 时间：2012-06-04T19:20:35.233
> 
> 标签：fortran

这是我的代码：

```
Program Fortran_Project1

IMPLICIT NONE

INTEGER:: i
REAL*4:: NORM
INTEGER,PARAMETER:: N=5
REAL*4,DIMENSION(N)::X0,NORM_X0

WRITE(*,*) 'parametrhaye matrix X0 ra vared konid'

NORM=0

Do i=1,N
 READ(*,*) X0(i)
 NORM=NORM + X0(i)**2
EndDo

NORM=SQRT(NORM)
NORM_X0(:)=1.0d0

Do i=1,N
 NORM_X0(i)=X(i)/NORM
EndDo

WRITE(*,'(A,\)') 'X0='
WRITE(*,'(F,\)') (X0(i),i=1,N-1)
WRITE(*,'(F)') X(N)
WRITE(*,'(A5,x,F)') 'NORM_X0=',NORM
WRITE(*,'(A7,\)') 'NORM_X0='

Do i=1,N-1
 WRITE(*,'(2x,F8.6,\)') NORM_X0
EndDo

WRITE(*,'(2x,F8.6)') NORM_X0

ENDPROGRAM Fortran_Project1 
```

错误：

> ```
> --------------------Configuration: F5 - Win32 Debug--------------------
> Compiling Fortran...
> C:\FORTRAN\F5\F5.F90
> C:\FORTRAN\F5\F5.F90(16) : Error: This name does not have a type, and must have an explicit type.   [X]
>  NORM_X0(i)=X(i)/NORM
> -------------------^
> Error executing df.exe.
> 
> F5.OBJ - 1 error(s), 0 warning(s) 
> ```

来自康柏编译器。我需要帮助，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:47:50.153

您有两次“Program Fortran_Project1 / IMPLICIT NONE”，这让编译器感到困惑。几个非标准语法项目。变量 x 未声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:13:20.843

```
Program Fortran_Project1
implicit none
INTEGER:: i
REAL*4:: NORM
INTEGER,PARAMETER:: N=5
REAL*4,DIMENSION(N)::A0,NORM_A0
WRITE(*,*) 'parametrhaye matrix A0 ra vared konid'
NORM=0
Do i=1,N
    READ(*,*) A0(i)
    NORM=NORM + A0(i)**2
EndDo
NORM=SQRT(NORM)
NORM_A0(:)=1.0
Do i=1,N
    NORM_A0(i)=A0(i)/NORM
EndDo
WRITE(*,'(A,\)') 'A0='
WRITE(*,'(F,\)') (A0(i),i=1,N-1)
WRITE(*,'(F)') A0(N)
WRITE(*,'(A8)') 'NORM_A0='
WRITE(*,'(3x,(F,\))') (NORM_A0(i),i=1,N-1)
WRITE(*,'(F)') NORM_A0(N)
ENDPROGRAM Fortran_Project1 
```

# svg - SVG渐变填充不起作用

> ID：10887010
> 
> 赞同：3
> 
> 时间：2012-06-04T19:20:36.480
> 
> 标签：svg

我正在尝试将渐变背景添加到 SVG 路径。相反，路径是黑色的。这是我得到的代码：

```
<svg style="overflow: hidden; position: relative; " height="150" version="1.1" width="290" xmlns="http://www.w3.org/2000/svg">
...
    <defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); ">
        <lineargradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:rgb(255,255,0);stop-opacity:1"></stop>
            <stop offset="100%" style="stop-color:rgb(255,0,0);stop-opacity:1"></stop>
        </lineargradient>
    </defs>
    <path style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); " fill="url(#grad1)" stroke="none" d="M100,114L74,114L74,83L100,83Z"></path>
...
</svg> 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:45:47.487

`linearGradient`里面有一个大写字母G。你上面的片段有它作为`lineargradient`

# javascript - 带有跨浏览器换行符的 Javascript 预格式化文本

> ID：10887011
> 
> 赞同：7
> 
> 时间：2012-06-04T19:20:40.513
> 
> 标签：javascript, cross-browser, line-breaks, pre, textnode

我已经预先格式化了带有换行符和多空格的字符串，我想将它们附加到文本节点中。

```
<pre id="bar"></pre>

<script>
   var string = "Preformatted"
                + "\n"  // \r, \r\n, \n\r or what else?
                + "multispace     string";
   var text = document.createTextNode(string);
   document.getElementById('bar').appendChild(text);
</script> 
```

我试图采用作为线路断路器：

*   `\n`在所有浏览器中换行，但在 IE 中（我在 7 上测试）变成了一个空格
*   `\r`仅在 IE 中换行
*   `\r\n`适用于所有浏览器，但在 IE 中，第二行开头的空间令人恐惧
*   `\n\r`总的来说还可以，但是在 IE 中，第一行末尾的空格对于我的布局来说是不可接受的。

我不能使用`<br>`和 innerHTML，因为 IE 会折叠多个空格。
jQuery`.text(string)`具有完全相同的行为`.appendChild(createTextNode(string))`

如何插入跨浏览器换行符？
最终，我怎样才能轻松检测浏览器是否支持`\n`或`\r`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:53:54.173

这似乎适用于我测试的所有浏览器（safari、opera、chrome、firefox、ie7、ie8、ie9）：

[http://jsfiddle.net/4bQ5Q/1/](http://jsfiddle.net/4bQ5Q/1/)

代码：

```
var textarea = document.createElement("textarea");
textarea.value = "\n";
var eol = textarea.value.replace(/\r\n/, "\r");

var string = "Preformatted" + eol + "multispace     string";

var text = document.createTextNode(string);
document.getElementById('bar').appendChild(text);​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T19:39:26.503

由于 IE 看​​起来很奇怪，也许将字符存储在一个变量中，并根据需要使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512.aspx)来更改它：

```
<script> var $LF = '\n'; </script>
<!--[if lt IE 8]>
    <script> $LF = '\r'; </script>
<![endif]-->

<script>
  var string = "Preformatted"
               + $LF
               + "multispace     string";
  var text = document.createTextNode(string);
  document.getElementById('bar').appendChild(text);
</script> 
```

您的代码段似乎至少在 IE8 中正确显示，因此`lt IE 8`条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T10:14:17.857

与此同时，我发现了一个似乎是跨浏览器的更简单的解决方案：
`innerHTML`使用蛮力`<pre>`强加

```
<div id="bar"></div>

<script>
  var string = "Preformatted \n"
             + "string \r"
             + "with \r\n"
             + "assorted \n\r"
             + "line   breaks";
  document.getElementById('bar').innerHTML = "<pre>"+string+"</pre>";
</script> 
```

`\r\n`变成单回
`\n\r`双回

不完美之处：IE 10 兼容模式 7 在最后一行末尾添加一个空格。

# php - MySQL：<>1 有效，但 =0 无效

> ID：10887015
> 
> 赞同：1
> 
> 时间：2012-06-04T19:20:46.310
> 
> 标签：php, mysql, mysqli

当我发送查询时

```
SELECT id FROM private_messages WHERE to_id=1 AND opened=0 
```

它不返回任何东西

```
SELECT id FROM private_messages WHERE to_id=1 AND opened<>1 
```

返回 open=0 的所有结果。`opened`列类型是具有“1”和“0”（默认）值的枚举。问题是，为什么第一个查询不返回任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T19:21:59.553

因为`opened`是一个枚举，你应该写：

```
SELECT id FROM private_messages WHERE to_id=1 AND opened='0' 
```

枚举实际上只是一组可能的字符串。从[文档中](http://dev.mysql.com/doc/refman/5.5/en/enum.html)：

> An`ENUM`是一个字符串对象，其值选自创建表时列规范中明确枚举的允许值列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:29:26.357

在 ENUM 字段中，您指定为输入值的字符串会自动编码为数字。在可读查询和输出中，数字被转换回查询结果中的相应字符串。

所以，你必须使用`'0'`而不是`0`.

当您以这种方式使用查询时`SELECT id FROM private_messages WHERE to_id=1 AND opened='0'`，您是在要求 MySQL 返回索引值为 的所有值，`to_id=1`而不是字符串值。`opened``0`

# php - Zend 框架循环生成 HTML

> ID：10887021
> 
> 赞同：1
> 
> 时间：2012-06-04T19:21:17.510
> 
> 标签：php, model-view-controller, zend-framework, zend-db, zend-view

我是 Zend 框架的新手，想了解如何最好地循环数据库数据以生成链接列表。我的理解是模型应该包含大部分应用程序逻辑，控制器和视图尽可能轻。

我正在查询数据库以获取一组记录，我想遍历它们并生成 HTML 链接。下面的伪代码。

**控制器：**

```
$this->view->myList = MODEL->generateHtml(); 
```

**模型：**

```
function generateHtml() {
    query db

    loop through record set

    build a string of html within loop including links

    return string to controller

} 
```

**看法：**

```
echo $this->myList; 
```

这似乎将逻辑放入模型中，并将控制器灯和视图仅用于渲染。

我遇到的一个问题是我想`$this->view->url`在输出的 html 中生成路由链接，但不能在模型中这样做。我在网上所做的阅读表明您不应该在模型中构建 html。我可以在模型中生成所需数据的数组并将其返回，然后在控制器或视图中循环以生成 html，但不确定什么是正确的方法，并希望得到一些建议。

感谢您提供的任何帮助。

* * *

新问题 - 更新代码：

再次嗨....下面有厌倦的建议，但现在有不同的问题。

我的代码现在是：

模型：

不用于此测试。将返回类似于在控制器中创建的数组的数组。

控制器：

```
 $aStoryList = array( 
        array(
           'headline' => 'Headline 1', 
           'story' => 'Story 1' 
        ), 
        array(
           'headline' => 'Headline 2',
           'story' => 'Story 2'
        )
    );
    $this->view->aStoryList = $aStoryList; 
```

看法：

```
echo $this->partialLoop('partials/storyList.phtml', $this->aStoryList); 
```

故事列表.phtml：

```
echo "<br />" . $this->headline . $this->story; 
```

我已经把部分放在了....

视图/部分/storyList.phtml

视图中使用的此位置和路径源自此 stackoverflow 问题的答案 -[我在 Zend Framework 中的何处保存部分（视图），以便我的应用程序中的所有视图都可以访问？](https://stackoverflow.com/questions/746260/where-do-i-save-partial-views-in-zend-framework-to-be-accessible-for-all-view)

当我运行它时，我收到以下错误

消息：在路径 (/home/sites/xxxxx.com/public_html/xxxxxxx/application/views/scripts/) 中找不到脚本“partials/storyList.phtml”

现在把我的头发拉出来！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:23:32.427

该模型应用于从数据源中提取数据，但不应生成任何 HTML 标记。保存视图的 HTML 生成。控制器将成为模型和视图之间的粘合剂；也就是说，控制器将完成获取数据并将其交给生成输出的视图的工作。

在您的特定情况下，[PartialLoop View Helper](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.partial)对于在循环中创建标记应该很有用。

我建议使用以下伪代码，而不是您在上面发布的内容：

**控制器：**

```
$this->view->myList = MODEL->getListOfItems();  // return an array of data 
```

**模型：**

```
function getListOfItems() {
    $results = array(); // array of data to return

    // query db

    // loop over result set
    foreach($result as $row) {
        $results[] = $row;
    }

    return $results;
} 
```

**看法：**

```
<?php echo $this->partialLoop('myList.phtml', $this->myList); 
```

**myList.phtml 查看部分：**

```
<tr>
    <td><a href="<?php echo $this->url(array('id' => $this->id))"><?php echo $this->username ?></a></td>
    <td><?php echo $this->firstName ?> <?php echo $this->lastName ?></td>
    <td><?php echo $this->email ?></td>
</tr> 
```

总结一下：

*   控制器查询数据模型
*   模型返回结果数组
*   控制器直接传数组查看
*   View 调用`partialLoop`helper 并从模型中传递数组
*   `partialLoop`helper 遍历所有结果，一次将它们传递给`myList.phtml`（注意变量范围如何成为局部视图的本地）。

我的示例假设模型返回的数组包含键`id`, `username`, `firstName`, `lastName`。

希望对您有所帮助，如果您有任何问题，请随时发表评论。

# c# - 从多个进程写入相同的性能计数器

> ID：10887022
> 
> 赞同：1
> 
> 时间：2012-06-04T19:21:19.880
> 
> 标签：c#, performancecounter

我正在使用较新的[System.Diagnostics.PerformanceData](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancedata.aspx) api 集写入我的计数器，并希望同时从多个进程增加/减少单个计数器。

我尝试以各种方式调整 CounterSetInstanceType 均未成功：

如果我使用 Multiple 或 MultipleAggregate，我总是会在 perfmon 中看到一个实例，但实际上每个进程都有一个单独的计数器，它们会相互覆盖。Single counterset 类型也会发生相同的行为。

当我尝试使用 gloablAggregate 计数器集类型的性能监视器时，似乎根本没有读取这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:31:18.127

回答我自己的问题：

如此处所述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee781345%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee781345%28v=vs.90%29.aspx)

您需要指定如何在清单文件中聚合计数器（通过为每个计数器设置聚合属性）。

似乎不这样做会导致计数器简单地停留在 0 / 未定义。

在 globalAggregate 的情况下，这非常有效。

在 multipleAggregate 的情况下，这只会对自动为 counterset 创建的 _Total 实例产生影响（作为将其定义为 multipleAggregate 的结果）。所有其他实例都保持旧行为。

似乎还有一个“MultipleInstanceAggregate”计数器类型，但据我所知，清单模式不支持它。（参见：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.performancedata.countersetinstancetype](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancedata.countersetinstancetype)）

# apache - 如何创建条件 htaccess 传递不同的变量

> ID：10887023
> 
> 赞同：0
> 
> 时间：2012-06-04T19:21:22.130
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我试图弄清楚这种情况：我需要重写

```
url.com/a/b/c/1 
```

进入

```
url.com?page_id=1&listing[make]=a&listing[model]=b&listing[region]=c 
```

例外

```
url.com/a/all/c/1 
```

进入

```
url.com?page_id=1&listing[make]=a&listing[model]=&listing[region]=c 
```

ETC

我不知道如何根据正在传输的变量中的字符串匹配创建否定条件。在这种情况下，如果变量是“全部”

# android - Android 贝宝集成

> ID：10887024
> 
> 赞同：3
> 
> 时间：2012-06-04T19:21:26.883
> 
> 标签：android, paypal

我已经在我的 Android 应用程序中集成了贝宝。我有一个主要活动——关于活动，我在其中显示了贝宝按钮。关于从主 Activity 访问的 Activity。Paypal 对象在一个线程中初始化，由 Application 对象的 OnCreate 创建。

我现在面临 2 个问题： 1\. Paypal 按钮仅在我第一次单击时才起作用。第二次不起作用。我必须返回主菜单，然后返回 about Activity，然后它又可以工作了。这是：

将 paypal 按钮添加到布局的代码：

```
mDonateButton = AppObj.Instance().GetPayPalObj().getCheckoutButton( mCaller, 
                                                                            PayPal.BUTTON_152x33, 
                                                                            CheckoutButton.TEXT_PAY );
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(   LayoutParams.WRAP_CONTENT, 
                                                                    LayoutParams.WRAP_CONTENT );
mDonateButton.setLayoutParams(params);
mDonateButton.setGravity( Gravity.CENTER_HORIZONTAL );
mDonateButton.setOnClickListener( this );

LinearLayout container = (LinearLayout) findViewById( R.id.donateLayout );
container.addView(mDonateButton); 
```

OnClick 相关代码：

```
 PayPalPayment newPayment = new PayPalPayment();
                newPayment.setSubtotal(new BigDecimal(Integer.parseInt(info)));
                newPayment.setCurrencyType("USD");
                newPayment.setRecipient("xxx@xxx.com");
                newPayment.setPaymentType(PayPal.PAYMENT_TYPE_NONE);
                newPayment.setMerchantName("xxx");
                Intent paypalIntent = PayPal.getInstance().checkout(newPayment, mCaller);
                (mCaller).startActivityForResult(paypalIntent, 1); 
```

1.  第二个问题我有....因为我在 BG 中初始化了 paypal obj，如果我在 paypal 完成初始化之前访问 About 活动（其中创建了 paypal 按钮），我崩溃了......关于它？

谢谢约阿夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:45:31.300

如果您仍在寻找答案，我有一个

如果您查看`getCheckoutButton`方法，它将`Context`作为参数，因此当`Activity`例如说当您启动另一个时发生的 Paused 时`Activity`，该实例`CheckoutButton`会以某种方式丢失。

我修复是通过`updateButton`在活动的 onResume 中使用方法

```
 @Override
    protected void onResume() {
        /**
         * The CheckoutButton has to be updated each time the Activity is
         * resumed, otherwise the onClickListener of CheckoutButton will not work
         **/
        if (mCheckOutBtn != null && (mCheckOutBtn instanceof CheckoutButton))
            mCheckOutBtn.updateButton();
        super.onResume();
    } 
```

考虑到您已初始化库`PayPal`并`CheckoutButton`在`onCreate`.`Activity`

# javascript - 从字符串中解析自定义日期

> ID：10887026
> 
> 赞同：0
> 
> 时间：2012-06-04T19:21:28.093
> 
> 标签：javascript

> **可能重复：**
> [帮助在 Javascript 中解析 ISO 8601 日期](https://stackoverflow.com/questions/4829569/help-parsing-iso-8601-date-in-javascript)

我有一组字符串，格式相似：2012-05-31T00:00:00.0000000

我想从中提取的是年（2012）、月（05）和日（31），然后从这些数据构造一个javascript Date 对象。

解析这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:27:19.840

我能想到的最简单的方法是使用正则表达式，并将值传递给[Date 构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)：

```
function parseISODate(dateString) {
    var match = /^(\d{4})-(\d\d)-(\d\d)/.exec(dateString);
    return new Date(Number(match[1]), Number(match[2]) - 1, Number(match[3]));
}

console.log(parseISODate('2012-05-31T00:00:00.0000000'));
// Date {Thu May 31 2012 00:00:00 GMT+0200} 
```

当然，您也可以随时扩展它以匹配时间......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T19:34:24.727

编辑（UTC）：

```
var origDate = new Date('2012-05-31T00:00:00.0000000');
var newDate = new Date(origDate.getUTCFullYear(), origDate.getUTCMonth(), origDate.getUTCDate(), 0, 0, 0, 0); 
```

# javascript - 如何在 D3.js 强制有向图中设置焦点节点？

> ID：10887027
> 
> 赞同：4
> 
> 时间：2012-06-04T19:21:28.230
> 
> 标签：javascript, d3.js, force-layout

我有一个数据集，它定义了在力有向图中使用的许多节点。看起来像...

```
 var nodeSet = [
    {id: "N1", name: "Node 1", type: "Type 1", hlink: "http://www.if4it.com"},
    {id: "N2", name: "Node 2", type: "Type 3", hlink: "http://www.if4it.com/glossary.html"},
    {id: "N3", name: "Node 3", type: "Type 4", hlink: "http://www.if4it.com/resources.html"},
    {id: "N4", name: "Node 4", type: "Type 5", hlink: "http://www.if4it.com/taxonomy.html"},
    {id: "N5", name: "Node 5", type: "Type 1", hlink: "http://www.if4it.com/disciplines.html"}
  ]; 
```

如何专门告诉 d3.js 库中的 force.layout 使用 id = "N1" 的 "Node 1" 作为主根或焦点节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T22:39:33.003

如果您只想要一个根节点，您可以在对象中拥有一个根属性并将其设置为 true，而不是单独处理该节点。您还可以将此根设置为中心。以下是我们的做法（d3 + Prototype - 当时 - 现在切换到 d3+jQuery+underscore）：

```
getCenter: function() {
    var center = {
        x : this.width / 2,
        y : this.height / 2
    };
    return center;
}

//later do something like this in your init method:
var first = {
                id : id,
                name : name,
                x : this.getCenter().x,
                y : this.getCenter().y,
                root : true,
                //other properties
            };

//later in your redraw() or other methods you might employ...
//try to find the root node later in the code using something like:
var rootNode = this.nodes.detect(function(node) {
    return node.root;
});

//do something to the root node after you have detected it...
if (rootNode) {
    rootNode.x = rootNode.px = this.getCenter().x;
    rootNode.y = rootNode.py = this.getCenter().y;
    //some other stuff...
} 
```

我们就是这样做的。但是，我不清楚您的示例中的链接是什么……有点困惑。您会注意到，对于强制导向布局或更复杂的动画，您几乎总是需要使用 D3+其他东西（原型、jQuery、下划线）来实现简单的方法，例如检测或包含或其他类似的 Ruby 样式方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:12:03.560

我不确定焦点或根节点是什么意思。如果您想在特定位置（例如中心）修复某个节点，您可以将其 'fixed' 属性设置为 true。有关详细信息，请参阅[D3 Force-Directed Layout 中的 Fix Node Position 以及在 D3 中](https://stackoverflow.com/questions/10392505/fix-node-position-in-force-directed-layout)移动[固定节点](https://stackoverflow.com/questions/10502877/moving-fixed-nodes-in-d3)。

我不认为您的[力导向径向图](http://bl.ocks.org/2879486)示例确实表明 d3 隐式使用节点列表中的第一个节点作为“根”节点。由于网络结构，您示例中的节点 1 始终倾向于中心。如果稍后将节点 1 放置在节点数组中，则其行为是相同的。

# java - 如何找到验证我的 JDK 安全提供程序的加密强度？

> ID：10887030
> 
> 赞同：6
> 
> 时间：2012-06-04T19:21:37.080
> 
> 标签：java, security, encryption

我有这个小程序可以打印出我的 JDK 安装中所有受支持的提供程序，但我想知道是否有人知道我可以如何更改该程序以打印出每个提供程序的“强度”？

```
import java.security.Provider; 
import java.security.Security; 

public class SecurityListings 
{ 
  public static void main(String[] args) 
  { 
    for (Provider provider : Security.getProviders()) 
    { 
      System.out.println("Provider: " + provider.getName()); 
      for (Provider.Service service : provider.getServices()) 
      { 
        System.out.println(" Algorithm: " + service.getAlgorithm());

      } 
    } 
  }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T20:24:44.423

[Cipher.getMaxAllowedKeyLength()](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html)

传入转换，它将返回允许的最高密钥。

这是一个简单的检查

```
public bool isUnlimitedKeyStrength() {
    return Cipher.getMaxAllowedKeyLength("AES") == Integer.MAX_VALUE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:14:16.987

多亏了 Andrew Finnell 的帮助，回答了这个问题的 Groovy 脚本：

```
import javax.crypto.Cipher
import java.security.*
import javax.crypto.*
// Groovy script
class SecurityTests {    
    static void main(String[] args) {       
        for (Provider provider : Security.getProviders())
        {
            System.out.println("Provider: " + provider.getName())
            for (Provider.Service service : provider.getServices() )
            {
                int maximum = 0;
                String alg = service.getAlgorithm()
                if ( getKeyStrength( alg ) == 2147483647 ) { 
                  System.out.println(" Algorithm: " + alg +
                    ", max" ) 
                } else {
                  System.out.println(" Algorithm: " + alg +
                    ", " + getKeyStrength( alg ) ) 
                }    
            }
        }       
    }
    static int getKeyStrength( cipher ) {       
        int max     
        try {
            max = Cipher.getMaxAllowedKeyLength( cipher)
        } catch (NoSuchAlgorithmException e) {
            e.getLocalizedMessage()
            return 0
        }       
        return max
    }
} 
```

还有一个运行它的 Windows 批处理文件：

```
@echo off

set JAVA_HOME1=C:\jdk1.6.0_31
set JAVA_HOME2=C:\jdk1.6.0_16

ECHO Listings from %JAVA_HOME1%
groovy.exe --javahome %JAVA_HOME1% SecurityListings.groovy > 31.result.txt

ECHO Listings from %JAVA_HOME2%
groovy.exe --javahome %JAVA_HOME2% SecurityListings.groovy > 16.result.txt

pause 
```

# html - 无法将 CSS 应用于表单

> ID：10887036
> 
> 赞同：0
> 
> 时间：2012-06-04T19:22:03.500
> 
> 标签：html, css, forms, button

您好，我正在尝试将 CSS 应用于此表单：

```
<form action="http://example.com/result.xml" accept-charset="UTF-8" method="get">
            <div id="search-box">
                Catalog Search:<br />
                <input type="hidden" id="rt" name="rt" value="keyword" />
                <input type="hidden" id="tp" name="tp" value="keyword" />
                <input type="text" alt="Input Box for Catalog Search" maxlength="250" 
                size="20" id="t" name="t" value=""  />
                <input type="hidden" id="ft" name="ft" value="" />
                <input type="hidden" id="l" name="l" value="9" />
                <input type="hidden" id="d" name="d" value="2" />
                <input type="hidden" id="f" name="f" value="" />
                <input type="hidden" id="av" name="av" value="" />
                <input type="submit" value="Search" class="form-submit"  />
            </div>
            </form> 
```

我正在尝试设置搜索按钮以及输入字段的样式。我查看了整个 Google 搜索结果和该站点，并一遍又一遍地发现使用这种格式来设置按钮的样式：

```
.submit input {
    color      : #000;
    background : #ffa20f;
    border     : 2px outset #d7b9c9;
} 
```

但这根本不会影响我的搜索按钮。如何正确引用该按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:25:25.380

您的搜索按钮具有“form-submit”类别，而您的 CSS 规则正在寻找“submit”类别。如果您将 CSS 规则更改为以下内容，它应该针对正确的元素：

```
.form-submit
{
  color: #000;
  background: #ffa20f;
  border: 2px outset #d7b9c9;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:25:50.357

看来您输入的目标不正确。尝试使用以下 CSS，它以父元素的 ID 为目标，然后是提交按钮。

```
#search-box .form-submit {
   color: #000;
   background: #ffa20f;
   border: 2px outset #d7b9c9;
} 
```

[http://jsfiddle.net/WcVdn/](http://jsfiddle.net/WcVdn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:26:38.303

实际上，您要做的是在具有类提交的容器内设置输入标签的样式。如果要设置输入类型的样式，请提交。

```
input[type="submit"]{
  color: #000;
  background: #ffa20f;
  border: 2px outset #d7b9c9;

} 
```

# backbone.js - 如何在 CollectionView 中呈现依赖于 DOM 的视图？

> ID：10887040
> 
> 赞同：7
> 
> 时间：2012-06-04T19:22:07.753
> 
> 标签：backbone.js, marionette

我有一个`Marionette.CollectionView`呈现`ItemView`s 的列表。在此期间`render()`，我使用 ItemView`model`使用[Raphael](http://raphaeljs.com/)绘制一些 SVG 。

Raphael 要求我为其画布指定高度和宽度，我通常会从`this.$el`. 但是，`$el`（作为空的`<div>`）在添加到 DOM 并对其应用 CSS 规则之前没有尺寸，所以我需要延迟渲染，直到我*知道*视图在 DOM 中。

问题是`Marionette.CollectionView`在渲染之前不会将子视图添加到 DOM。如何在不重新实现一半的情况下覆盖此行为`CollectionView`？

## 示例代码

```
// Renders a single object.
var ItemView = Marionette.ItemView.extend({
    template: "#item-view-template",
    onRender: function() {
        var svgEl = this.$el.find("div.svg-canvas");
        // Raphael needs the element's width and height, which
        // is 0 until this.$el is in the DOM.
        var paper = Raphael(svgEl.get(0), svgEl.height(), svgEl.width());
        // ... draw some SVG...
    }
});

// Renders a collection of objects.
var ListView = Marionette.CollectionView.extend({
    itemView: ItemView,
    model: MyModel
});

// Main point of entry.
MyApp.show = function() {
    var collection = new MyCollection();
    var listView = new ListView({ collection: collection });
    MyApp.mainRegion.show(listView);
    collection.fetch();
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T23:00:25.293

`onRender`不会满足您的需求，因为在呈现视图时会调用此方法 - 但不保证视图已添加到 DOM 中。

为此，您需要一个`onShow`方法，当您在区域中显示视图时，该方法将由该区域调用。问题是当前的实现只调用`onShow`你直接传入的视图——在这种情况下是集合视图。因此，您需要以一种使其在所有集合视图的子视图上调用该方法的方式来实现您的 onShow。

```
 Marionette.CollectionView.extend({
  // ...  

  onShow: function(){
    _.each(this.children, function(childView){
      if (childView.onShow){ childView.onShow(); }
    });
  }
}); 
```

那应该这样做。当您调用`MyApp.mainRegion.show(listView)`它时，它将调用`onShow`集合视图的方法，然后它将在子级上调用它（如果它在那里）。

* * *

根据评论中的讨论，即使在调用父视图并且稍后将项目添加到集合中之后，也会调用保证`onShow`子视图方法的实现：`onShow`

```
 ItemView = Marionette.ItemView.extend({
  // ...

  onShow: function(){
    // I am guaranteed to be called from the CollectionView
    // because the CollectionView registers me in a promise
  }
});

CollectionView = Marionette.CollectionView.extend({

  initialize: function(){
    this.onShowCallbacks = new Marionette.Callbacks();
  },

  onShow: function(){
    this.onShowCallbacks.run();
  },

  appendHtml: function(cv, iv){
    cv.append(iv.el);

    // promise to run 'onShow' if it exists
    if (iv.hasOwnProperty("onShow")){
      this.onShowCallbacks.add(iv.onShow);
    }
  }
}); 
```

也可在此要点中找到：[https ://gist.github.com/2872526](https://gist.github.com/2872526)

# php - 加快从数据库加载图像

> ID：10887042
> 
> 赞同：2
> 
> 时间：2012-06-04T19:22:09.697
> 
> 标签：php, sql, performance, wordpress

我正在从数据库中加载 9 张图像，我的语法大致如下：

```
<img src="image_loader.php?id=4"></img> 
```

我的 image_loader.php 的 PHP 看起来像：

```
<?php
    /* I set up my connection using mysql_connect and mysql_select_db */

    $query = sprintf("SELECT ... FROM ... WHERE id='".$_GET["id"]."'");
    $result = mysql_query($query, $con);
    mysql_close($con);

    if (!$result) {
        // no result
    }
    else {
        $row = mysql_fetch_row($result); 
        header('Content-type: image/png');
        echo $row[0];
        mysql_free_result($result);
        }
?> 
```

每张图片大约 10-13k，但一堆似乎加载得很慢。我意识到浏览器一次可以执行的请求数量存在一些瓶颈，但等待时间似乎是不必要的。

关于如何快速从数据库加载图像的任何建议？

此外，这几乎是一个单独的问题，但是否可以指示浏览器（或服务器）使用现在 .gif/.png/.jpg srcs 缓存图像？似乎 Firefox 有而 Chrome 没有，但我不确定这一点。

![在此处输入图像描述](../Images/e69c849bf9ff005525f4eebe629a8373.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:11:59.567

我首先考虑将图像存储在数据库中是否最有意义。可能，但应该认真考虑，因为在文件系统中为每个图像提供一个唯一的文件名并将其存储***在***数据库中通常会更快。

如果您可以***直接***从客户端请求该文件，而不是请求执行某种`fopen()`-style 抽象的通用 PHP 脚本，您将获得额外的速度。

为了缩小延迟的来源，首先检查您的数据库是否与您的网络服务器托管在同一台服务器上可能会有所帮助。它不是在本地托管而是在远程数据库服务器上的一种指示是检查您在`mysql_connect()`调用中提供的主机字符串。 `localhost`会暗示它是本地的，其他的会暗示它不是。需要注意的是，许多共享托管服务（例如 GoDaddy）将其数据库服务器与 Web 服务器分开。

为了更好地了解延迟的来源，我建议您`image_loader.php`使用时间戳来检测您的代码以定位延迟？我的猜测是它会在查询中。

如果延迟出现***在***您的查询中，您将希望限制您进行的查询数量。允许您进行一次查询而不是 9 次查询的策略将限制任何网络服务器到数据库服务器延迟的影响。

# jquery - 在“结束”事件上循环 HTML5 视频

> ID：10887045
> 
> 赞同：4
> 
> 时间：2012-06-04T19:22:29.937
> 
> 标签：jquery, html5-video

播放 html5 视频。完成后，将调用下面的脚本，该脚本将添加到下一个视频，并将其添加到下一行并开始播放。如何将其变成一个循环，以便第二个视频播放完毕后，它将附加第三个视频，依此类推？

```
<div>
    <video id="video0" autoplay>
        <source src="video0.mp4" />
    </video>
</div> 
```

.

```
var i=0
$('video'+i).on("ended", function() {
    i++;
    $(this).parent().append('<br /><video id="video'
        + i
        + '" autoplay><source src="video'
        + i
        + '.mp4" /></video>');
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:24:43.837

**更新答案：**

在重新阅读您的问题并查看更改后，这里有一些逻辑应该可以满足您的要求......

```
var i = 0;
var numVideos = 5;
var addVideo = function() {
    i++;
    var nextVideo=$('<video id="video'
        + i
        + '" autoplay><source src="video'
        + i
        + '.mp4" /></video>');
    nextVideo.on('ended', addVideo);
    $(this).after('<br />').after(nextVideo);
};
$('video0').on('ended', addVideo); 
```

**原答案：**

如何将`loop`属性添加到您的`video`标签？ [W3 资源](http://www.w3.org/wiki/HTML/Elements/video)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T14:20:51.373

试试用它对你有帮助吗？

**在头部标签中：**

```
 <script type="text/javascript" language="javascript"> 
            video_count = 1; 
            function run() { 
                video_count++; 
                var videoPlayer = document.getElementById("homevideo"); 
                if (video_count == 4) 
                    video_count = 1; 
                var nextVideo = "ModelVideo/1/video" + video_count + ".mp4"; 
                videoPlayer.src = nextVideo; 
                videoPlayer.load(); 
                videoPlayer.play();        
            }; 
        </script> 
```

**在正文标签中：**

```
 <div style="width: 30%;"> 
            <video id="homevideo" width="100%" controls autoplay onended="run()"> 
            <source id="ss" src="ModelVideo/1/video1.mp4" type='video/mp4'/></video> 
        </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:25:18.170

HTML 5 视频可以使用 'loop' 属性循环播放：

```
loop="loop" 
```

可以通过以下方式支持不支持循环的浏览器：

```
$("#video").bind('ended', function(){ 
  this.play();
}); 
```

[参考](https://stackoverflow.com/questions/7375088/workaround-for-video-loop-attribute-in-firefox)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-27T17:54:02.400

尝试用它来帮助你做 jQuery？

**在头部标签中：**

```
 <script type="text/javascript">
            $(document).ready(function () {
                v_count = 1;
                $("#video").bind('ended', function () {
                    v_count++;
                    if (v_count == 4)
                        v_count = 1;
                    $("#sovideo").attr("src", "ModelVideo/1/video" + v_count + ".mp4");
                    $("#video").load();
                    this.play();                            
            });   
        </script> 
```

**在正文标签中：**

```
 <div style="width: 30%;"> 
            <video id="video" width="100%" controls>
            <source id="sovideo" src="ModelVideo/1/video1.mp4" />
        </div> 
```

# asp.net - 无法连接到共享服务器上的 sql 数据库

> ID：10887053
> 
> 赞同：0
> 
> 时间：2012-06-04T19:23:07.393
> 
> 标签：asp.net

我购买了一个安装在专用服务器上的网站。我现在已将其移至 arvixe，并且能够在他们的一台共享服务器上成功恢复数据库。我可以通过使用域名 (www.mydomain.com) 以及我在 arvixe 控制面板中设置的数据库帐户的用户名和密码从 sql studio management studio 2008 连接到服务器。但是，我无法使用应用程序连接到数据库。我能够看到不使用数据库的网站页面。该应用程序使用的是 .net 3.5，所以我使用经典 IIS 将服务器设置为 .net 2.0。我在网上做了很多搜索，并阅读了许多论坛。我已经尝试了 web.config 中连接字符串的所有可能选项，但仍然收到同样的错误：

## “/”应用程序中的服务器错误。

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例） 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4849719
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject) +4863021
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +90
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +376
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +221
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +189
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +31
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +433
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +499
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +65
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +117
   System.Data.SqlClient.SqlConnection.Open() +122
      System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

* * *

版本信息：Microsoft .NET Framework 版本：2.0.50727.4223；ASP.NET 版本：2.0.50727.4223

现在我的连接字符串在 web.config 中采用以下格式。我有一个用于 appsettings，一个用于连接字符串，并且还向 applicationsetting.cs 添加了信息：

```
 <appsettings>
          <add key="ConnStringWebsite" value="SERVER=www.mydomain.com;DATABASE=mydatabase;UID=xxxxx;PWD=xxxxx"/>
          <appsettings/>
          <connectionstrings>
          <add name="FantasyActionConnectionString" connectionString="SERVER=www.mydomain.com;DATABASE=mydatabase;UID=xxxxx;PWD=xxxxx"/>
          <connectionstrings/> 
```

应用程序设置.cs

```
//Connection String
                private const string _CONNSERVER = @"www.mydomain.com";
                private const string _CONNDATABASE = "mydatabase";
                private const string _CONNUSERID = @"xxxxxx";
                private const string _CONNPASSWORD = "xxxxxx"; 
```

# c# - 对多个 TryParse() 调用重用相同的变量

> ID：10887056
> 
> 赞同：1
> 
> 时间：2012-06-04T19:23:21.217
> 
> 标签：c#, code-reuse, tryparse

我对此进行了一些阅读，并且从与我*类似*的问题来看，看起来我要问的问题可能（很容易）不可能......但我还是想验证一下。也许所有这些问题都来自旧版本的 C#/.NET，而且最近已经实现了。

反正。我的一个类中有一个 switch-case 语句，其目的本质上是采用 int( `typeID`) 和 string( `value`) 并检查是否`value`可以将其解析为`typeID`. 例如，这是我现在拥有的一部分：

```
 case 1:
        char charret;
        return char.TryParse(value, out charret);
    case 2:
        Regex re = new Regex(Constants.REGEX_ALPHANUMERIC);
        return re.IsMatch(value);
    case 3:
        bool boolret;
        return bool.TryParse(value, out boolret);
    //And so on... 
```

我想做的是能够避免您在案例 1 和 3 中看到的`char`/`bool`实例化。理想情况下，我只想拥有 return 语句。这没什么大不了的（显然），但如果我能把它做得更（甚至更）紧凑，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:27:33.360

这本来就是不可能的。

作为参数传递的变量`out`必须与参数类型完全匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:27:51.943

当您使用 out 参数调用函数时，无法避免声明变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:33:24.590

这篇文章可能会有所帮助，因为它执行了一个通用的 TryParse（如果可用）：

[http://toadcode.blogspot.com/2010/10/generic-object-tryparse.html](http://toadcode.blogspot.com/2010/10/generic-object-tryparse.html)

# gwt - 根在 gwt 应用程序中自动创建

> ID：10887062
> 
> 赞同：2
> 
> 时间：2012-06-04T19:23:45.280
> 
> 标签：gwt

你好

我在其中一个入口点类中编写了代码：

```
if(RootPanel.get("fb-root") != null)
         form = new BloodDonorForm(Constants.INSERT, null, Constants.FACEBOOK, Constants.BLOOD_DONOR_REGISTER_FORM); 
else
         form = new BloodDonorForm(Constants.INSERT, null, null, Constants.BLOOD_DONOR_REGISTER_FORM); 
```

这在某个时候肯定可以正常工作（不记得我上次检查的时候）。但是现在当我在启用了 firebug 的 Firefox 中运行该页面时，我看到如下消息：

`The "fb-root" div has not been created, auto-creating`

那么，如果它不存在，为什么要这样做呢？我确信我过去已经对此进行了测试，并且之前没有发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:58:08.260

这可能是 GWT 本身的变化。也就是说，这不是检查 dom 元素是否存在的最佳方法。

相反，使用`Document.get().getElementById(String)`通过 id 检查元素，并将其与 null 进行比较。这将编译为非常简单的东西（可能只是`$doc.getElementById(id)`），并且不会创建小部件（RootPanel 是一个小部件）以及随之而来的开销。

# java - 使用 Maven 和 Subetha SMTP 和 LOG4J 构建可执行 uber jar 时遇到问题

> ID：10887063
> 
> 赞同：0
> 
> 时间：2012-06-04T19:23:46.840
> 
> 标签：java, maven, smtp, log4j, maven-shade-plugin

我是 maven 新手，正在尝试创建一个使用 [Subetha SMTP 库][1] 的应用程序，并将整个应用程序打包到一个可执行应用程序中。

为了进行打包，我尝试使用 [Mavens Shade 插件][2]，但遇到了 Subetha SMTP 正在使用/包含的库之一的问题。

该项目似乎构建良好：

```
[INFO]
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ smtpServer ---
[INFO] Building jar: D:\dev\apps\smtpServer\target\smtpServer-1.0-SNAPSHOT.jar
[INFO]
[INFO] --- maven-shade-plugin:1.7:shade (default) @ smtpServer ---
[INFO] Including org.subethamail:subethasmtp:jar:3.1.6 in the shaded jar.
[INFO] Including javax.mail:mail:jar:1.4.4 in the shaded jar.
[INFO] Including javax.activation:activation:jar:1.1.1 in the shaded jar.
[INFO] Including com.google.code.findbugs:jsr305:jar:1.3.9 in the shaded jar.
[INFO] Including org.slf4j:slf4j-api:jar:1.5.6 in the shaded jar.
[INFO] Replacing original artifact with shaded artifact.
[INFO] Replacing D:\dev\apps\smtpServer\target\smtpServer-1.0-SNAPSHOT.jar with D:\dev\apps\smtpServer\target\smtpServer-1.0-SNAPSHOT-shaded.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.959s
[INFO] Finished at: Mon Jun 04 15:11:28 EDT 2012
[INFO] Final Memory: 10M/24M
[INFO] ------------------------------------------------------------------------
D:\dev\apps\smtpServer> 
```

但是当我运行它时，我得到：

```
D:\dev\apps\smtpServer\target>java -jar smtpServer-1.0-SNAPSHOT.jar
Starting Up...
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/impl/StaticLoggerBinder
        at org.slf4j.LoggerFactory.getSingleton(LoggerFactory.java:189)
        at org.slf4j.LoggerFactory.bind(LoggerFactory.java:112)
        at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:105)
        at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:235)
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:208)
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:221)
        at org.subethamail.smtp.server.SMTPServer.<clinit>(SMTPServer.java:49)
        at com.rim.hms.smtpServer.App.main(App.java:13)
Caused by: java.lang.ClassNotFoundException: org.slf4j.impl.StaticLoggerBinder
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 8 more 
```

错误消息指示我将 SL4J jar 放在我尝试过的类路径上，但问题没有解决。

这是我的项目的 pom.xml （我已经尝试指定 slf4j，这是导致问题的一个，以及删除它）：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
        <groupId>com.foo.bar.apps</groupId>
        <artifactId>apps</artifactId>
        <version>1.0-SNAPSHOT</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.foo.bar.apps.smtpServer</groupId>
  <artifactId>smtpServer</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>smtpServer</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.subethamail</groupId>
        <artifactId>subethasmtp</artifactId>
        <version>3.1.6</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.5.6</version>
    </dependency>

  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                  <mainClass>com.foo.bar.smtpServer.App</mainClass>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

</project> 
```

以下是创建的 JAR 文件的内容：

```
META-INF/MANIFEST.MF
META-INF/
com/
com/foo/
com/foo/bar/
com/foo/bar/smtpServer/
com/foo/bar/smtpServer/App.class
com/foo/bar/smtpServer/DumbMessageHandlerFactory$Handler.class
com/foo/bar/smtpServer/DumbMessageHandlerFactory.class
META-INF/maven/
META-INF/maven/com.foo.bar.apps.smtpServer/
META-INF/maven/com.foo.bar.apps.smtpServer/smtpServer/
META-INF/maven/com.foo.bar.apps.smtpServer/smtpServer/pom.xml
META-INF/maven/com.foo.bar.apps.smtpServer/smtpServer/pom.properties
org/
org/subethamail/
org/subethamail/smtp/
org/subethamail/smtp/auth/
org/subethamail/smtp/auth/EasyAuthenticationHandlerFactory.class
org/subethamail/smtp/auth/LoginAuthenticationHandlerFactory$Handler.class
org/subethamail/smtp/auth/LoginAuthenticationHandlerFactory.class
org/subethamail/smtp/auth/LoginFailedException.class
org/subethamail/smtp/auth/MultipleAuthenticationHandlerFactory$Handler.class
org/subethamail/smtp/auth/MultipleAuthenticationHandlerFactory.class
org/subethamail/smtp/auth/PlainAuthenticationHandlerFactory$Handler.class
org/subethamail/smtp/auth/PlainAuthenticationHandlerFactory.class
org/subethamail/smtp/auth/UsernamePasswordValidator.class
org/subethamail/smtp/AuthenticationHandler.class
org/subethamail/smtp/AuthenticationHandlerFactory.class
org/subethamail/smtp/client/
org/subethamail/smtp/client/SmartClient.class
org/subethamail/smtp/client/SMTPClient$Response.class
org/subethamail/smtp/client/SMTPClient.class
org/subethamail/smtp/client/SMTPException.class
org/subethamail/smtp/command/
org/subethamail/smtp/command/AuthCommand.class
org/subethamail/smtp/command/DataCommand.class
org/subethamail/smtp/command/EhloCommand.class
org/subethamail/smtp/command/HelloCommand.class
org/subethamail/smtp/command/HelpCommand.class
org/subethamail/smtp/command/MailCommand.class
org/subethamail/smtp/command/NoopCommand.class
org/subethamail/smtp/command/QuitCommand.class
org/subethamail/smtp/command/ReceiptCommand.class
org/subethamail/smtp/command/ResetCommand.class
org/subethamail/smtp/command/StartTLSCommand.class
org/subethamail/smtp/command/VerifyCommand.class
org/subethamail/smtp/DropConnectionException.class
org/subethamail/smtp/helper/
org/subethamail/smtp/helper/SimpleMessageListener.class
org/subethamail/smtp/helper/SimpleMessageListenerAdapter$Delivery.class
org/subethamail/smtp/helper/SimpleMessageListenerAdapter$Handler.class
org/subethamail/smtp/helper/SimpleMessageListenerAdapter.class
org/subethamail/smtp/helper/SmarterMessageListener$Receiver.class
org/subethamail/smtp/helper/SmarterMessageListener.class
org/subethamail/smtp/helper/SmarterMessageListenerAdapter$Handler.class
org/subethamail/smtp/helper/SmarterMessageListenerAdapter.class
org/subethamail/smtp/io/
org/subethamail/smtp/io/BetterByteArrayOutputStream.class
org/subethamail/smtp/io/CRLFOutputStream.class
org/subethamail/smtp/io/CRLFTerminatedReader$MaxLineLengthException.class
org/subethamail/smtp/io/CRLFTerminatedReader$TerminationException.class
org/subethamail/smtp/io/CRLFTerminatedReader.class
org/subethamail/smtp/io/DeferredFileOutputStream.class
org/subethamail/smtp/io/DotTerminatedInputStream.class
org/subethamail/smtp/io/DotTerminatedOutputStream.class
org/subethamail/smtp/io/DotUnstuffingInputStream.class
org/subethamail/smtp/io/ExtraDotOutputStream.class
org/subethamail/smtp/io/ReceivedHeaderStream.class
org/subethamail/smtp/io/ThresholdingOutputStream.class
org/subethamail/smtp/MessageContext.class
org/subethamail/smtp/MessageHandler.class
org/subethamail/smtp/MessageHandlerFactory.class
org/subethamail/smtp/RejectException.class
org/subethamail/smtp/server/
org/subethamail/smtp/server/BaseCommand.class
org/subethamail/smtp/server/Command.class
org/subethamail/smtp/server/CommandException.class
org/subethamail/smtp/server/CommandHandler.class
org/subethamail/smtp/server/CommandRegistry.class
org/subethamail/smtp/server/HelpMessage.class
org/subethamail/smtp/server/InvalidCommandNameException.class
org/subethamail/smtp/server/RequireTLSCommandWrapper.class
org/subethamail/smtp/server/ServerThread.class
org/subethamail/smtp/server/Session.class
org/subethamail/smtp/server/SMTPServer.class
org/subethamail/smtp/server/UnknownCommandException.class
org/subethamail/smtp/TooMuchDataException.class
org/subethamail/smtp/util/
org/subethamail/smtp/util/Base64.class
org/subethamail/smtp/util/EmailUtils.class
org/subethamail/smtp/util/TextUtils.class
org/subethamail/smtp/Version.class
org/subethamail/wiser/
org/subethamail/wiser/Wiser.class
org/subethamail/wiser/WiserMessage.class
META-INF/maven/org.subethamail/
META-INF/maven/org.subethamail/subethasmtp/
META-INF/maven/org.subethamail/subethasmtp/pom.xml
META-INF/maven/org.subethamail/subethasmtp/pom.properties
javax/
javax/mail/
javax/mail/EventQueue$QueueElement.class
javax/mail/Flags$Flag.class
javax/mail/Service$TerminatorEvent.class
javax/mail/Service.class
javax/mail/FolderClosedException.class
javax/mail/Folder$TerminatorEvent.class
javax/mail/MessageContext.class
javax/mail/Session$3.class
javax/mail/FetchProfile.class
javax/mail/Provider.class
javax/mail/UIDFolder$FetchProfileItem.class
javax/mail/internet/
javax/mail/internet/ParseException.class
javax/mail/internet/ParameterList.class
javax/mail/internet/MimeMultipart.class
javax/mail/internet/MailDateParser.class
javax/mail/internet/UniqueValue.class
javax/mail/internet/MailDateFormat.class
javax/mail/internet/InternetAddress.class
javax/mail/internet/ParameterList$Value.class
javax/mail/internet/ParameterList$MultiValue.class
javax/mail/internet/MimeMessage.class
javax/mail/internet/SharedInputStream.class
javax/mail/internet/HeaderTokenizer.class
javax/mail/internet/MimeUtility.class
javax/mail/internet/InternetHeaders$InternetHeader.class
javax/mail/internet/InternetHeaders.class
javax/mail/internet/NewsAddress.class
javax/mail/internet/MimeUtility$1NullInputStream.class
javax/mail/internet/HeaderTokenizer$Token.class
javax/mail/internet/PreencodedMimeBodyPart.class
javax/mail/internet/AsciiOutputStream.class
javax/mail/internet/InternetHeaders$matchEnum.class
javax/mail/internet/ParameterList$ToStringBuffer.class
javax/mail/internet/MimePart.class
javax/mail/internet/MimeBodyPart$MimePartDataHandler.class
javax/mail/internet/MimePartDataSource.class
javax/mail/internet/ParameterList$1.class
javax/mail/internet/MimeMessage$RecipientType.class
javax/mail/internet/ContentType.class
javax/mail/internet/MimeBodyPart.class
javax/mail/internet/AddressException.class
javax/mail/internet/ParameterList$ParamEnum.class
javax/mail/internet/ContentDisposition.class
javax/mail/IllegalWriteException.class
javax/mail/Quota.class
javax/mail/Version.class
javax/mail/Session$2.class
javax/mail/Part.class
javax/mail/BodyPart.class
javax/mail/Message$RecipientType.class
javax/mail/UIDFolder.class
javax/mail/Transport.class
javax/mail/AuthenticationFailedException.class
javax/mail/Quota$Resource.class
javax/mail/Session$1.class
javax/mail/Multipart.class
javax/mail/EventQueue.class
javax/mail/PasswordAuthentication.class
javax/mail/Authenticator.class
javax/mail/ReadOnlyFolderException.class
javax/mail/Folder.class
javax/mail/FetchProfile$Item.class
javax/mail/FolderNotFoundException.class
javax/mail/MessageAware.class
javax/mail/MultipartDataSource.class
javax/mail/event/
javax/mail/event/FolderEvent.class
javax/mail/event/TransportListener.class
javax/mail/event/MessageCountListener.class
javax/mail/event/MailEvent.class
javax/mail/event/MessageChangedEvent.class
javax/mail/event/TransportAdapter.class
javax/mail/event/ConnectionEvent.class
javax/mail/event/MessageCountEvent.class
javax/mail/event/TransportEvent.class
javax/mail/event/FolderListener.class
javax/mail/event/MessageChangedListener.class
javax/mail/event/StoreEvent.class
javax/mail/event/FolderAdapter.class
javax/mail/event/ConnectionAdapter.class
javax/mail/event/ConnectionListener.class
javax/mail/event/StoreListener.class
javax/mail/event/MessageCountAdapter.class
javax/mail/search/
javax/mail/search/NotTerm.class
javax/mail/search/MessageNumberTerm.class
javax/mail/search/HeaderTerm.class
javax/mail/search/ComparisonTerm.class
javax/mail/search/IntegerComparisonTerm.class
javax/mail/search/BodyTerm.class
javax/mail/search/FromTerm.class
javax/mail/search/StringTerm.class
javax/mail/search/SentDateTerm.class
javax/mail/search/RecipientTerm.class
javax/mail/search/AndTerm.class
javax/mail/search/FlagTerm.class
javax/mail/search/MessageIDTerm.class
javax/mail/search/SubjectTerm.class
javax/mail/search/AddressTerm.class
javax/mail/search/SearchException.class
javax/mail/search/OrTerm.class
javax/mail/search/RecipientStringTerm.class
javax/mail/search/ReceivedDateTerm.class
javax/mail/search/FromStringTerm.class
javax/mail/search/DateTerm.class
javax/mail/search/AddressStringTerm.class
javax/mail/search/SearchTerm.class
javax/mail/search/SizeTerm.class
javax/mail/MessageRemovedException.class
javax/mail/Store.class
javax/mail/Session$7.class
javax/mail/NoSuchProviderException.class
javax/mail/URLName.class
javax/mail/StreamLoader.class
javax/mail/Address.class
javax/mail/StoreClosedException.class
javax/mail/MessagingException.class
javax/mail/Session$6.class
javax/mail/Provider$Type.class
javax/mail/Session.class
javax/mail/MethodNotSupportedException.class
javax/mail/Message.class
javax/mail/Session$5.class
javax/mail/QuotaAwareStore.class
javax/mail/Header.class
javax/mail/Session$4.class
javax/mail/util/
javax/mail/util/SharedFileInputStream.class
javax/mail/util/ByteArrayDataSource.class
javax/mail/util/SharedByteArrayInputStream.class
javax/mail/util/ByteArrayDataSource$DSByteArrayOutputStream.class
javax/mail/util/SharedFileInputStream$SharedFile.class
javax/mail/Flags.class
javax/mail/SendFailedException.class
com/sun/
com/sun/mail/
com/sun/mail/smtp/
com/sun/mail/smtp/SMTPTransport.class
com/sun/mail/smtp/SMTPSSLTransport.class
com/sun/mail/smtp/SMTPMessage.class
com/sun/mail/smtp/SMTPAddressSucceededException.class
com/sun/mail/smtp/SMTPTransport$PlainAuthenticator.class
com/sun/mail/smtp/SMTPAddressFailedException.class
com/sun/mail/smtp/SMTPSendFailedException.class
com/sun/mail/smtp/SMTPOutputStream.class
com/sun/mail/smtp/SMTPSenderFailedException.class
com/sun/mail/smtp/SMTPTransport$LoginAuthenticator.class
com/sun/mail/smtp/SMTPSaslAuthenticator.class
com/sun/mail/smtp/SaslAuthenticator.class
com/sun/mail/smtp/SMTPTransport$NtlmAuthenticator.class
com/sun/mail/smtp/SMTPTransport$DigestMD5Authenticator.class
com/sun/mail/smtp/SMTPSaslAuthenticator$1.class
com/sun/mail/smtp/DigestMD5.class
com/sun/mail/smtp/SMTPTransport$Authenticator.class
com/sun/mail/imap/
com/sun/mail/imap/IMAPNestedMessage.class
com/sun/mail/imap/IMAPFolder$10.class
com/sun/mail/imap/Rights$Right.class
com/sun/mail/imap/IMAPMessage$1FetchProfileCondition.class
com/sun/mail/imap/IMAPFolder$2.class
com/sun/mail/imap/MessageLiteral.class
com/sun/mail/imap/IMAPFolder$11.class
com/sun/mail/imap/IMAPFolder$3.class
com/sun/mail/imap/DefaultFolder$2.class
com/sun/mail/imap/IMAPInputStream.class
com/sun/mail/imap/IMAPFolder$ProtocolCommand.class
com/sun/mail/imap/IMAPStore$1.class
com/sun/mail/imap/ACL.class
com/sun/mail/imap/IMAPFolder$12.class
com/sun/mail/imap/DefaultFolder$1.class
com/sun/mail/imap/IMAPFolder.class
com/sun/mail/imap/IMAPFolder$13.class
com/sun/mail/imap/IMAPStore$ConnectionPool.class
com/sun/mail/imap/IMAPBodyPart.class
com/sun/mail/imap/IMAPFolder$1.class
com/sun/mail/imap/IMAPFolder$18.class
com/sun/mail/imap/LengthCounter.class
com/sun/mail/imap/MessageCache.class
com/sun/mail/imap/IMAPFolder$14.class
com/sun/mail/imap/IMAPStore.class
com/sun/mail/imap/IMAPMultipartDataSource.class
com/sun/mail/imap/IMAPFolder$6.class
com/sun/mail/imap/IMAPFolder$19.class
com/sun/mail/imap/IMAPMessage.class
com/sun/mail/imap/IMAPSSLStore.class
com/sun/mail/imap/Rights.class
com/sun/mail/imap/DefaultFolder.class
com/sun/mail/imap/IMAPFolder$15.class
com/sun/mail/imap/IMAPFolder$7.class
com/sun/mail/imap/IMAPFolder$16.class
com/sun/mail/imap/protocol/
com/sun/mail/imap/protocol/IMAPAddress.class
com/sun/mail/imap/protocol/ListInfo.class
com/sun/mail/imap/protocol/SearchSequence.class
com/sun/mail/imap/protocol/SaslAuthenticator.class
com/sun/mail/imap/protocol/MessageSet.class
com/sun/mail/imap/protocol/Namespaces.class
com/sun/mail/imap/protocol/BASE64MailboxEncoder.class
com/sun/mail/imap/protocol/BODY.class
com/sun/mail/imap/protocol/ENVELOPE.class
com/sun/mail/imap/protocol/IMAPSaslAuthenticator.class
com/sun/mail/imap/protocol/Namespaces$Namespace.class
com/sun/mail/imap/protocol/IMAPProtocol.class
com/sun/mail/imap/protocol/MailboxInfo.class
com/sun/mail/imap/protocol/IMAPResponse.class
com/sun/mail/imap/protocol/BASE64MailboxDecoder.class
com/sun/mail/imap/protocol/Status.class
com/sun/mail/imap/protocol/Item.class
com/sun/mail/imap/protocol/UID.class
com/sun/mail/imap/protocol/IMAPSaslAuthenticator$1.class
com/sun/mail/imap/protocol/FetchResponse.class
com/sun/mail/imap/protocol/BODYSTRUCTURE.class
com/sun/mail/imap/protocol/INTERNALDATE.class
com/sun/mail/imap/protocol/RFC822DATA.class
com/sun/mail/imap/protocol/RFC822SIZE.class
com/sun/mail/imap/protocol/FLAGS.class
com/sun/mail/imap/protocol/UIDSet.class
com/sun/mail/imap/IMAPFolder$FetchProfileItem.class
com/sun/mail/imap/IMAPFolder$8.class
com/sun/mail/imap/Utility.class
com/sun/mail/imap/AppendUID.class
com/sun/mail/imap/IMAPFolder$4.class
com/sun/mail/imap/Utility$Condition.class
com/sun/mail/imap/IMAPFolder$17.class
com/sun/mail/imap/IMAPFolder$9.class
com/sun/mail/imap/SortTerm.class
com/sun/mail/imap/IMAPFolder$5.class
com/sun/mail/iap/
com/sun/mail/iap/CommandFailedException.class
com/sun/mail/iap/Argument.class
com/sun/mail/iap/ResponseHandler.class
com/sun/mail/iap/ConnectionException.class
com/sun/mail/iap/ResponseInputStream.class
com/sun/mail/iap/ProtocolException.class
com/sun/mail/iap/ByteArray.class
com/sun/mail/iap/AString.class
com/sun/mail/iap/Response.class
com/sun/mail/iap/LiteralException.class
com/sun/mail/iap/Literal.class
com/sun/mail/iap/ParsingException.class
com/sun/mail/iap/Atom.class
com/sun/mail/iap/Protocol.class
com/sun/mail/iap/BadCommandException.class
com/sun/mail/auth/
com/sun/mail/auth/MD4.class
com/sun/mail/auth/Ntlm.class
com/sun/mail/handlers/
com/sun/mail/handlers/multipart_mixed.class
com/sun/mail/handlers/text_plain.class
com/sun/mail/handlers/image_gif.class
com/sun/mail/handlers/text_plain$NoCloseOutputStream.class
com/sun/mail/handlers/text_html.class
com/sun/mail/handlers/text_xml.class
com/sun/mail/handlers/image_jpeg.class
com/sun/mail/handlers/message_rfc822.class
com/sun/mail/util/
com/sun/mail/util/PropUtil.class
com/sun/mail/util/BASE64EncoderStream.class
com/sun/mail/util/TraceOutputStream.class
com/sun/mail/util/UUDecoderStream.class
com/sun/mail/util/LineOutputStream.class
com/sun/mail/util/MailSSLSocketFactory$1.class
com/sun/mail/util/BEncoderStream.class
com/sun/mail/util/QPDecoderStream.class
com/sun/mail/util/QEncoderStream.class
com/sun/mail/util/LineInputStream.class
com/sun/mail/util/FolderClosedIOException.class
com/sun/mail/util/MailSSLSocketFactory$MailTrustManager.class
com/sun/mail/util/UUEncoderStream.class
com/sun/mail/util/SocketFetcher$1.class
com/sun/mail/util/QDecoderStream.class
com/sun/mail/util/QPEncoderStream.class
com/sun/mail/util/MimeUtil$1.class
com/sun/mail/util/MessageRemovedIOException.class
com/sun/mail/util/logging/
com/sun/mail/util/logging/LogManagerProperties.class
com/sun/mail/util/logging/LogManagerProperties$1.class
com/sun/mail/util/logging/MailHandler.class
com/sun/mail/util/logging/MailHandler$TailNameFormatter.class
com/sun/mail/util/MailSSLSocketFactory.class
com/sun/mail/util/SocketFetcher.class
com/sun/mail/util/MimeUtil.class
com/sun/mail/util/DecodingException.class
com/sun/mail/util/ASCIIUtility.class
com/sun/mail/util/TraceInputStream.class
com/sun/mail/util/BASE64DecoderStream.class
com/sun/mail/util/CRLFOutputStream.class
com/sun/mail/pop3/
com/sun/mail/pop3/AppendStream.class
com/sun/mail/pop3/POP3SSLStore.class
com/sun/mail/pop3/POP3Message.class
com/sun/mail/pop3/TempFile.class
com/sun/mail/pop3/Status.class
com/sun/mail/pop3/POP3Store.class
com/sun/mail/pop3/SharedByteArrayOutputStream.class
com/sun/mail/pop3/Response.class
com/sun/mail/pop3/DefaultFolder.class
com/sun/mail/pop3/WritableSharedFile.class
com/sun/mail/pop3/Protocol.class
com/sun/mail/pop3/POP3Folder.class
META-INF/mailcap
META-INF/gfprobe-provider.xml
META-INF/javamail.charset.map
META-INF/javamail.default.address.map
META-INF/LICENSE.txt
META-INF/javamail.default.providers
META-INF/maven/javax.mail/
META-INF/maven/javax.mail/mail/
META-INF/maven/javax.mail/mail/pom.xml
META-INF/maven/javax.mail/mail/pom.properties
META-INF/mailcap.default
META-INF/mimetypes.default
com/sun/activation/
com/sun/activation/registries/
com/sun/activation/registries/LineTokenizer.class
com/sun/activation/registries/LogSupport.class
com/sun/activation/registries/MailcapFile.class
com/sun/activation/registries/MailcapParseException.class
com/sun/activation/registries/MailcapTokenizer.class
com/sun/activation/registries/MimeTypeEntry.class
com/sun/activation/registries/MimeTypeFile.class
com/sun/activation/viewers/
com/sun/activation/viewers/ImageViewer.class
com/sun/activation/viewers/ImageViewerCanvas.class
com/sun/activation/viewers/TextEditor.class
com/sun/activation/viewers/TextViewer.class
javax/activation/
javax/activation/ActivationDataFlavor.class
javax/activation/CommandInfo.class
javax/activation/CommandMap.class
javax/activation/CommandObject.class
javax/activation/DataContentHandler.class
javax/activation/DataContentHandlerFactory.class
javax/activation/DataHandler$1.class
javax/activation/DataHandler.class
javax/activation/DataHandlerDataSource.class
javax/activation/DataSource.class
javax/activation/DataSourceDataContentHandler.class
javax/activation/FileDataSource.class
javax/activation/FileTypeMap.class
javax/activation/MailcapCommandMap.class
javax/activation/MimeType.class
javax/activation/MimeTypeParameterList.class
javax/activation/MimeTypeParseException.class
javax/activation/MimetypesFileTypeMap.class
javax/activation/ObjectDataContentHandler.class
javax/activation/SecuritySupport$1.class
javax/activation/SecuritySupport$2.class
javax/activation/SecuritySupport$3.class
javax/activation/SecuritySupport$4.class
javax/activation/SecuritySupport$5.class
javax/activation/SecuritySupport.class
javax/activation/URLDataSource.class
javax/activation/UnsupportedDataTypeException.class
javax/annotation/
javax/annotation/CheckForNull.class
javax/annotation/CheckForSigned.class
javax/annotation/CheckReturnValue.class
javax/annotation/Detainted.class
javax/annotation/MatchesPattern$Checker.class
javax/annotation/MatchesPattern.class
javax/annotation/Nonnegative$Checker.class
javax/annotation/Nonnegative.class
javax/annotation/Nonnull$Checker.class
javax/annotation/Nonnull.class
javax/annotation/Nullable.class
javax/annotation/OverridingMethodsMustInvokeSuper.class
javax/annotation/ParametersAreNonnullByDefault.class
javax/annotation/ParametersAreNullableByDefault.class
javax/annotation/PropertyKey.class
javax/annotation/RegEx$Checker.class
javax/annotation/RegEx.class
javax/annotation/Signed.class
javax/annotation/Syntax.class
javax/annotation/Tainted.class
javax/annotation/Untainted.class
javax/annotation/WillClose.class
javax/annotation/WillCloseWhenClosed.class
javax/annotation/WillNotClose.class
javax/annotation/concurrent/
javax/annotation/concurrent/GuardedBy.class
javax/annotation/concurrent/Immutable.class
javax/annotation/concurrent/NotThreadSafe.class
javax/annotation/concurrent/ThreadSafe.class
javax/annotation/meta/
javax/annotation/meta/Exclusive.class
javax/annotation/meta/Exhaustive.class
javax/annotation/meta/TypeQualifier.class
javax/annotation/meta/TypeQualifierDefault.class
javax/annotation/meta/TypeQualifierNickname.class
javax/annotation/meta/TypeQualifierValidator.class
javax/annotation/meta/When.class
javax/annotation/CheckForNull.java
javax/annotation/CheckForSigned.java
javax/annotation/CheckReturnValue.java
javax/annotation/Detainted.java
javax/annotation/MatchesPattern.java
javax/annotation/Nonnegative.java
javax/annotation/Nonnull.java
javax/annotation/Nullable.java
javax/annotation/OverridingMethodsMustInvokeSuper.java
javax/annotation/ParametersAreNonnullByDefault.java
javax/annotation/ParametersAreNullableByDefault.java
javax/annotation/PropertyKey.java
javax/annotation/RegEx.java
javax/annotation/Signed.java
javax/annotation/Syntax.java
javax/annotation/Tainted.java
javax/annotation/Untainted.java
javax/annotation/WillClose.java
javax/annotation/WillCloseWhenClosed.java
javax/annotation/WillNotClose.java
javax/annotation/concurrent/GuardedBy.java
javax/annotation/concurrent/Immutable.java
javax/annotation/concurrent/NotThreadSafe.java
javax/annotation/concurrent/ThreadSafe.java
javax/annotation/meta/Exclusive.java
javax/annotation/meta/Exhaustive.java
javax/annotation/meta/TypeQualifier.java
javax/annotation/meta/TypeQualifierDefault.java
javax/annotation/meta/TypeQualifierNickname.java
javax/annotation/meta/TypeQualifierValidator.java
javax/annotation/meta/When.java
org/slf4j/
org/slf4j/helpers/
org/slf4j/helpers/BasicMarker.class
org/slf4j/helpers/BasicMarkerFactory.class
org/slf4j/helpers/BasicMDCAdapter.class
org/slf4j/helpers/MarkerIgnoringBase.class
org/slf4j/helpers/MessageFormatter.class
org/slf4j/helpers/NamedLoggerBase.class
org/slf4j/helpers/NOPLogger.class
org/slf4j/helpers/NOPMakerAdapter.class
org/slf4j/helpers/SubstituteLoggerFactory.class
org/slf4j/helpers/Util.class
org/slf4j/ILoggerFactory.class
org/s 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:08:42.623

NoClassDefFoundError的重复[： org/slf4j/impl/StaticLoggerBinder](https://stackoverflow.com/questions/3737992/noclassdeffounderror-org-slf4j-impl-staticloggerbinder)。

问题是您依赖于 slf4j api 而不是 slf4j 实现。

# php - PHP shell 脚本和 MAMP 上的 PHP 之间的区别？

> ID：10887066
> 
> 赞同：1
> 
> 时间：2012-06-04T19:23:54.757
> 
> 标签：php, web

这对我来说很奇怪。我想知道为什么。我编写了一个 PHP 脚本来验证另一个名为**test.php的 PHP 脚本的语法**

```
 <?php
    print("Hello World");
    ?> 
```

验证脚本**index.php**是：

```
#!/usr/bin/env php
<?php
exec("php -l test.php", $error, $retcode);
echo($retcode . "<br />");
var_dump($error);
?> 
```

当我在命令行**php index.php**上运行时，它会生成以下输出：

```
0<br />array(1) {
  [0]=>
  string(37) "No syntax errors detected in test.php"
} 
```

这对我来说看起来不错。但是，当我在 localhost 上运行时，它会生成以下输出：

```
#!/usr/bin/env php 5
array(0) { } 
```

为什么 $retcode 设置为 5？另外，我在 PHP5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:50:18.663

好吧，我已经想通了。

检查[http://linux.die.net/man/1/rsync](http://linux.die.net/man/1/rsync)以获取退出代码信息。

问题是我必须在 MAMP 上使用 PHP 解释器，即：

```
exec("/Applications/MAMP/bin/php/php5.3.6/bin/php -l $file",$error,$retcode); 
```

我之前使用的是 OS X 上的 PHP 解释器。

# c# - 读取隐藏文件

> ID：10887069
> 
> 赞同：-4
> 
> 时间：2012-06-04T19:23:59.140
> 
> 标签：c#, javascript, hidden-files

是否可以在程序中读取具有属性的文件`hidden`？我知道文件的路径。

例如，如果我将文件复制到某个地方并将属性设置为隐藏：

```
File.Copy("sender.exe", path+"system.exe");
File.SetAttributes(path + "sender.exe", FileAttributes.Hidden); 
```

我可以使用此代码运行隐藏的 .EXE 文件吗（如果我知道路径）？

```
function Run(path, lang, city) {
    var shell = new ActiveXObject("WScript.Shell");
    shell.run(path + " " + city + " " + lang);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:26:22.220

是的; 这是完全可能的。

# oauth - 如何在 Java 桌面应用程序中使用 Google Drive？

> ID：10887074
> 
> 赞同：7
> 
> 时间：2012-06-04T19:24:24.207
> 
> 标签：oauth, google-drive-api

我正在处理移动和桌面应用程序。我正在尝试将 Google Drive 用作永久存储文件夹。不幸的是，我不知所措，因为我找不到任何例子。有人可以指点我从 Google Drive 存储或检索文件的示例吗？

我真的很想在代码中看到一个简单的例子，或者可能是一个可以处理这个问题的库。我被困在检索和使用 OAuth 2.0 凭据 [https://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:39:20.450

您是否查看过驱动器 API 页面上的示例应用程序？

*编辑*

谷歌将[示例移至 github](https://github.com/googledrive/dredit/tree/master/java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:31:41.007

不知道我有没有发现你的问题。我所理解的是，您正在寻找一种方法，使您能够从不同的计算机上处​​理同一个项目。

如果是这样，您只需下载 Drive。安装后，它会询问您要与 Drive 保持同步的文件夹。如果您选择您的工作区，它将与 Drive 同步。因此，在另一台电脑上，如果您安装了 Drive，您也可以使用相同文件的工作区文件夹。

我希望这是有帮助的。

马可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:28:19.100

您应该查看[Documents List API。](https://developers.google.com/google-apps/documents-list/)

Google Drive API 和 SDK 旨在将应用程序集成到 Google Drive 的 Web-UI 中。为了保护用户文件的安全，它对应用程序开发者施加了一些限制，例如：

*   该应用程序必须从 Chrome 网上应用店安装
*   该应用程序只能访问从应用程序本身创建的文件，
*   或用户使用 Google Picker UI 选择的文件。

所有这些限制使得 Google Drive API 对于大多数非 Web 应用程序来说不是一个好的选择。例如，从 Chrome 网上应用店安装应用程序可能会让您觉得向用户请求移动或桌面应用程序很麻烦。尽管如此，如果没有从 Chrome Web Store 安装，您的应用程序在从 Google Drive 访问文件时总是会收到错误消息。

[Documents List API](https://developers.google.com/google-apps/documents-list/)允许您将文件（不仅是 Google Documents！）存储和加载到 Google Drive。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T01:14:59.897

这个问题有点老了，仍然。你可以看看这个例子：[https ://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

他们为访问任务执行 OAuth2。但我只是使用相同的代码通过 v2 API 访问文件。[http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API)

我只检索了文件列表，但它正在工作（来自.NET，桌面应用程序）。

# tfs - 每个团队的 TFS 2012 产品积压订单

> ID：10887077
> 
> 赞同：1
> 
> 时间：2012-06-04T19:24:38.280
> 
> 标签：tfs

这是我在 TFS 2012 中当前的项目/团队设置：

**项目**：MyProject
**团队**：Team1、Team2

所以这意味着我有 2 个单独的积压工作 - 每个团队 1 个 - 每个都可以通过其适当的团队区域路径（“MyProject/Team1”和“MyProject/Team2”）访问。这也意味着我有一种“主”产品待办事项，可以在“MyProject”级别访问；没有按团队划分任务的地方。

我正在尝试做的是设置项目经理/高管/等。可以看到“大师”版本，每个团队都有自己的细化细节。就目前而言，这一切都很好，直到您尝试在团队级别进行任何积压排序。假设您有以下积压工作：

**顺序 - 任务名称 - 团队**
1 - 任务 1 - 团队 1 2 - 任务
2 - 团队 2
3 - 任务 3 - 团队 1 4 - 任务
4 - 团队 2

我在设置中看到的情况是，如果您尝试在“MyProject/Team2”积压中重新确定优先级，您最终可能会在“MyProject”积压中将“Task4”置于高于“Task1”的位置，这将在那个宏观层面上是错误的。

我完全意识到*为什么*会发生这种情况，我想知道是否有人可以为设置/解决方案提供更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:13:34.460

我可能不理解您的问题，但是您提供的顺序实际上是按时间顺序排列的吗？如果是这样，为什么要在团队之间分配？如果将task4重新排序为team2的第一优先级，它实际上是否取决于team1完成task1？我认为不会，如果是这种情况，那么在项目级别查看任务时，我会建议按团队排序，然后按任务排序。这似乎保留了团队的时间顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T09:15:40.293

IMO：团队积压只是 PBL 上的一个视图（过滤）。PBL 订单是项目 PBL 的属性，而不是团队 PBL 的属性。您必须始终在 PBL 级别重新订购，而不是在团队级别。

# mysql - 在mysql中替换时单独留下一列

> ID：10887081
> 
> 赞同：2
> 
> 时间：2012-06-04T19:24:51.533
> 
> 标签：mysql, sql, database, replace

所以假设有一张桌子：

```
id column1 column2

 1   333     4444 
```

其中 id 是主键

然后我做

```
REPLACE INTO table (id, column2) VALUES (1, 55) 
```

这将导致 column1 变为空......有没有办法指定查询，以便在 REPLACE 匹配现有条目时保留 column1 的任何现有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:27:10.197

使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

```
INSERT INTO table (id, column2) VALUES (1, 55)
ON DUPLICATE KEY UPDATE column2 = VALUES(column2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:31:00.600

根据 MySQL [docs](http://dev.mysql.com/doc/refman/5.5/en/replace.html)，不，你不能。但是您可以在 DUPLICATE KEY UPDATE 上插入 ...。

# ruby-on-rails - 在 OS X 上使用命令行命令启动 Sublime Text 2

> ID：10887083
> 
> 赞同：0
> 
> 时间：2012-06-04T19:24:57.697
> 
> 标签：ruby-on-rails, terminal, sublimetext2

我刚开始阅读 Michael Hartl 关于 Rails 的书，在设置阶段遇到了一个问题。Hartl 一直提到在我的主目录中创建一个文件，但我不太确定如何执行此操作。例如，当我尝试为 sublime text 设置命令行时，说明告诉我这样做：假设您已将 Sublime Text 2 放在 Applications 文件夹中，并且您的路径中有 ~/bin 目录，您可以跑：

ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl

我的问题是我不知道如何将 ~/bin 目录放在我的路径中。我知道这是真正的基础，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:30:12.233

创建或编辑`~/.profile`（适用于 bash 和 zsh）

添加以下内容

`export PATH=$PATH:$HOME/bin`

上面这行是说，覆盖`PATH`环境变量并将其设置为之前的路径加上`~/bin`

现在，当您尝试运行命令时，bash 将在您的`PATH`环境变量中的所有冒号分隔的路径中查找可执行文件。

要查看整个`PATH`，请输入`echo $PATH`终端。或者更好的是，键入`env`以查看所有环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T10:03:04.213

## 在您的终端上

> $ mkdir ~/bin
> $ sudo ln -s "/Applications/Sublime Text2.app/Contents/SharedSupport/bin/subl" /usr/bin/subl

## 编辑 ~/.base_profile

> 导出 PATH=$PATH:~/bin

## 用法：

打开当前目录：

> 下层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:30:09.697

在您的`~/.bashrc`文件中添加到末尾：

```
 PATH="$HOME/bin:$PATH" 
```

# .net - 没有 Lazy 的 MEF [ImportMany]

> ID：10887095
> 
> 赞同：1
> 
> 时间：2012-06-04T19:25:52.003
> 
> 标签：.net, mef

是否可以在不存储的情况下访问 MEF 中的导出元数据 `IList<Lazy<T,TM>> parts`，但只需 `IList<T> parts`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:55:37.100

不，事后您无法获取元数据。您必须将其与部件本身一起导入。

将导入视为指定组件需求的合同。如果它需要访问某些依赖项的元数据，那么您不应该隐藏它。

另请参阅 Nicholas Blumhardt 关于[The Relationship Zoo](http://nblumhardt.com/2010/01/the-relationship-zoo/)的帖子，其中组件之间的这种关系被描述为*A 在使用它之前需要了解 X 关于*B。关键是这个元数据是组件之间关系的一个方面，而不是应该以某种方式单独处理的东西。

# regex - 正则表达式以匹配 AND 条件中的两个字符串

> ID：10887098
> 
> 赞同：0
> 
> 时间：2012-06-04T19:26:09.083
> 
> 标签：regex, string, match

我是正则表达式的新手，请帮助我解决错误情况，我需要使用正则表达式来匹配日志文件中 AND 条件中的两条错误消息（出现在不同的行，但相同的段落中）：

`Msg1 - ERROR [com.company.util.ejb.TimedBean] () FAILED processing Loader`

`Msg2 - java.lang.RuntimeException: Message code:[SL] is unknown.`

基本上，我需要的是 match `(msg1)&&(msg2)`，在这种情况下， (ERROR...Loader) 将出现在第一行， (java...unknown) 将出现在下一行。消息将始终遵循此顺序。我在这里没有使用任何典型的语言进行编程，它们将被放入一个接受正则表达式的企业工具中。

如果可能的话，你能告诉我如何在 Or 条件下制作它`(msg1)||(msg2)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:15:04.373

理论上，匹配两个连续的行只是将两个正则表达式端对端放置的问题。因此，为了便于说明，假设您有一个名为的文件`logfile.txt`，其中包含您要查找的消息。然后从 Linux 命令行，您可以执行以下操作：

```
pcregrep -M -o '^ERROR\N*Loader$\njava\N*unknown\.$\n' logfile.txt 
```

它会打印您正在寻找的线对。将其分解为几部分：

*   `^ERROR`匹配行首的单词 ERROR。
*   `\N*`匹配任意数量的不是行终止符的字符。
*   `Loader$`与行尾的单词 Loader 匹配。
*   `\n`匹配换行符。（在 Windows 上可能会有所不同。）
*   `java\N*unknown\.$\n`更多的是相同的。

但是...这是一个大问题...处理您的正则表达式的工具必须能够进行多行匹配，并且必须打开该功能。（这就是启用的`-M`命令行选项`pcregrep`。）许多正则表达式工具，例如`grep`在许多系统上的plain，不能进行多行搜索。所以你可能不走运。

# c# - SHA256.Create() 总是返回 null

> ID：10887099
> 
> 赞同：4
> 
> 时间：2012-06-04T19:26:13.000
> 
> 标签：c#, .net, asp.net-mvc-3, sha

每当我使用该`SHA256.Create()`方法时，它总是返回一个空值。这是我加密密码的方法...

```
private string EncryptPassword(string password)
{
    SHA256 sha = SHA256.Create(password);
    return BitConverter.ToString(sha.Hash);
} 
```

调试器显示该变量`sha`为空。我什至尝试将它放在控制器中的自己的方法中，但我仍然得到一个`System.NullReferenceException`

```
public String Index()
{
    return BitConverter.ToString(SHA256.Create("Hello World").Hash);
} 
```

我完全迷路了。有什么我明显做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:28:55.717

是的，`Create()`不是针对消息的，它指定了 SHA256 实现。

我怀疑您想改用实现类`SHA256Managed`。

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256managed.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256managed.aspx)

例子：

```
using (var sha256 = new SHA256Managed())
{
    byte[] raw = Encoding.Default.GetBytes(password);
    return sha256.ComputeHash(raw);
} 
```

# frame - 网页嵌入网页中，与 Watir 元素交互

> ID：10887102
> 
> 赞同：1
> 
> 时间：2012-06-04T19:26:22.820
> 
> 标签：frame, watir

我在访问网站上的文本字段时遇到问题。我将编写什么代码将数据输入到输入字段中`txtUser`？

![在此处输入图像描述](../Images/59ffa986f03f3d92c88cd584f010cddc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:25:24.977

你必须明确地说文本字段在一个框架中：

```
browser.frame(:name => "content").text_field(:name => "txtUser").set "Lorem Ipsum" 
```

# php - 计算行数

> ID：10887103
> 
> 赞同：-1
> 
> 时间：2012-06-04T19:26:28.790
> 
> 标签：php

你好这是我的代码

```
$query['2'] = mysql_query("SELECT DISTINCT site FROM logs") or die(mysql_error());

while ($row = mysql_fetch_assoc($query['2'])) {
    if (!$row['site'] == NULL) {
        echo "<a href='http://".$row["site"]."' target='_BLANK'>".$row["site"]."</a>  <a href='./" . basename($_SERVER[PHP_SELF]) . "?site=" . $row["site"] . "'> (View logs)</a>
        <a href='./" . basename($_SERVER[PHP_SELF]) . "?action=exportall&site=" . $row['site'] . "'>(Dump to file)</a>
        <a href='./" . basename($_SERVER[PHP_SELF]) . "?action=delete&site=" . $row['site'] . "'>(Delete)</a>
        <br>";
    }
} 
```

这给出了输出

> test.com（查看日志）（转储到文件）（删除）

我希望是这样

> www.iraceonline.com（查看日志）（转储到文件）（删除）（26 行）

一些如何通过将这样的代码添加到上面的代码中 `mysql_num_rows(mysql_query()`

这是一个很难问的问题。但我想有些人会理解。

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

## **问题已解决！- 感谢大家试图帮助我！**

所需的代码如下所示，我用一些简单的常识弄清楚了。

```
while ($row = mysql_fetch_assoc($query['2'])) {
    if (!$row['site'] == NULL) {
        $numSites = $row['site'];
        echo "<a href='http://".$row["site"]."' target='_BLANK'>".$row["site"]."</a>  <a href='./" . basename($_SERVER[PHP_SELF]) . "?site=" . $row["site"] . "'> (View logs)</a>
        <a href='./" . basename($_SERVER[PHP_SELF]) . "?action=exportall&site=" . $row['site'] . "'>(Dump to file)</a>
        <a href='./" . basename($_SERVER[PHP_SELF]) . "?action=delete&site=" . $row['site'] . "'>(Delete)</a>
        (".mysql_num_rows(mysql_query("SELECT site FROM logs WHERE site='$numSites'")).")
        <br>";
    }
} 
```

所以就是这里——

```
mysql_num_rows(mysql_query("SELECT site FROM logs WHERE site='$numSites'")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:28:31.850

```
$num_rows = mysql_num_rows($query['2']); 
```

这应该让你得到你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:35:42.940

您可以将 SQL 查询更改为：

```
mysql_query("SELECT COUNT(*) AS num_rows, site FROM logs WHERE 1 GROUP BY site") 
```

然后循环中每个站点的行数将在 $row['num_rows']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:33:14.877

您可以使用**mysql_num_rows($query['2'])**来获取行数。

# git - 远程服务器上需要 git 安装，只能通过 ssh 访问

> ID：10887107
> 
> 赞同：5
> 
> 时间：2012-06-04T19:26:51.643
> 
> 标签：git

我正在尝试从远程机器访问当前不包含任何 git 安装的服务器机器。问题是：服务器机器是否需要任何类型的 git 安装（我认为它需要）才能仅通过 ssh 和 git 从客户端工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:32:11.127

## 是的，您需要在服务器上安装 git

如果服务器上没有 git，您将无法推送/拉到远程。您用于远程操作 git 存储库的协议不会改变这一点。

## 可怜的人git

如果你真的需要/想要将你的 .git 目录同步到远程服务器，你可以这样做。因为 .git/objects 目录中的所有文件都是基于哈希的，所以您不会遇到任何冲突。

这原则上意味着：

```
# git push
rsync -rv .git server:repo.git

# git pull
rsync -rv server:repo.git .git
git reset HEAD --hard # Here lies the problem with this technique. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:48:03.163

您需要在服务器上安装 Git，才能在服务器上设置真正的远程存储库，我可以建议您[Gitolite](https://github.com/sitaramc/gitolite)工作正常...

# tfs - 将代码从一个 TFS 服务器移动到另一个

> ID：10887120
> 
> 赞同：1
> 
> 时间：2012-06-04T19:28:02.177
> 
> 标签：tfs

我有目录和文件的本地结构。这个代码库是我所有代码的最新版本。我现在需要将其上传到 TFS。如何一次上传一堆文件夹和文件？

目前，我正在查看“源代码管理资源管理器”。我看到“将项目添加到文件夹”。但是，我不知道如何将文件夹和文件上传到我想要添加到的项目中。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:31:28.920

1.  首先，确保您的本地文件夹[映射](http://msdn.microsoft.com/en-us/library/ms181384.aspx)到 TFS 工作区。
2.  在`Add Items to Folder`对话框中，在`Items to add`和`Exlcuded items`选项卡中设置所需的文件夹和文件。这些项目进入待定更改列表。
3.  签入挂起的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T03:23:49.477

如果要保留修订历史记录，则需要执行以下步骤：

[http://www.robusthaven.com/blog/release-management/Migrating-TFS-to-New-Hardware](http://www.robusthaven.com/blog/release-management/Migrating-TFS-to-New-Hardware)

否则按照@KMoraz 回答使用源代码管理资源管理器并右键单击以将项目添加到存储库。

# java - jarsigner 错误：java.lang.RuntimeException：密钥库加载：密钥库被篡改，或密码不正确

> ID：10887127
> 
> 赞同：18
> 
> 时间：2012-06-04T19:28:16.500
> 
> 标签：java, security, jarsigner

我正在尝试使用 Java 6 的 jarsigner 对 .wgt 文件（小部件，它是一个 jar 文件）进行签名。但是当我尝试签名时，在要求输入密钥库的密码后，它给了我以下错误。

```
jarsigner error: java.lang.RuntimeException: keystore load: Keystore was tampered with, or password was incorrect 
```

我什至尝试使用新创建的密钥库，所以我确定我输入了正确的密码。还有其他可能出错的地方吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-24T16:22:49.083

如果您引用密码，请尝试删除引号。我在 Windows 7 上的 JDK 中使用 jarsigner 时遇到了这个错误`1.7.0_25-b17`。我通常在 Solaris 和 Linux 上使用早期版本的 jarsigner，并且总是使用单引号引用密码，因为它通常包含由 shell 解释的字符。

我尚未验证，但我猜测 *nix 上的 shell 解释器在将参数传递给 jarsigner 之前会修剪引号，但 Windows 命令提示符不会。

例如，而不是

`jarsigner -keystore /my/cert/file -storepass 'password' /my/jar/file my_alias`

尝试

`jarsigner -keystore /my/cert/file -storepass password /my/jar/file my_alias`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-10T09:55:10.850

我遇到了与@Peter 完全相反的问题，我的密码中有特殊字符，我的签名脚本一直给出这个错误，直到我将密码用双引号括起来`"`

我认为这是因为我正在运行一个批处理文件来签署我的应用程序，而不是直接在命令行中输入它，并且 Windows 对密码中的特殊字符感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T07:30:20.080

检查一次您的密钥库别名。有时密钥库别名与 keytool 别名不同，然后它会给出相同的错误...所以检查一下别名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:35:48.497

您收到的错误消息描述了问题。您输入的密码不正确，或者密钥库已损坏。

最可能的答案是您将密钥库密码与别名/密钥密码的密码混淆了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-19T16:02:30.823

我的问题是我使用`-storepass`and`-keypass`开关将密码放入命令中（无论如何这都是个坏主意），而在我的系统上，Jarsigner 没有密码。一旦我将它们取出并允许 Jarsigner 提示我输入密码，它就会按预期工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-02T08:29:00.600

就我而言，Caps Lock 键有问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-28T08:09:09.627

就我而言，问题在于该文件夹有奇怪的字符。我更改了名称并且它有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-08T11:10:24.197

只需更改文件名。您只给出了没有扩展名的名称。

# objective-c - Cocos2d，旋转（透明）精灵碰撞

> ID：10887128
> 
> 赞同：0
> 
> 时间：2012-06-04T19:28:18.310
> 
> 标签：objective-c, cocos2d-iphone, collision-detection

是否有一种内置方法可以让我检测两个旋转精灵之间的交集？

我知道这是第二个问题，但是否有（也许）一种像素完美的检测方法来排除这两个精灵的透明部分？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:26:30.103

也许。但也有这样的：

> [http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)
> 
> 带有示例代码的 Cocos2D 快速像素完美碰撞检测 (1/2)

# python - 我们可以在同一个模块中运行多个函数吗？

> ID：10887131
> 
> 赞同：5
> 
> 时间：2012-06-04T19:28:37.650
> 
> 标签：python, timeit

我想在同一个 Python 模块中编写多个函数，每个函数都是使用 的单独分析测试`timeit`，以便我可以使用命令行参数来指定要运行的函数。一个天真的例子（profiling.py）是：

```
import sys
import timeit

def foo():

    setup = """
    import random
    """

    foo_1 = """
    for i in range(1000):
        random.randint(0, 99) + random.randint(0, 99)
    """

    foo_2 = """
    for i in range(1000):
        random.randint(0, 99) + random.randint(0, 99)
    """

    foo_3 = """
    for i in range(1000):
        random.randint(0, 99) + random.randint(0, 99)
    """

    print 'foo_1', timeit.Timer(foo_1, setup).timeit(1000)
    print 'foo_2', timeit.Timer(foo_2, setup).timeit(1000)
    print 'foo_3', timeit.Timer(foo_3, setup).timeit(1000)

if __name__ == '__main__':
    if (len(sys.argv) > 1):
        if (sys.argv[1] == 'foo'):
            foo()
    else:
        print 'Which profiling do you want to run?'
        print 'available:'
        print '    foo' 
```

但是，当我尝试时`python profiling.py foo`，我收到如下错误：

```
foo_1
Traceback (most recent call last):
  File "profiling.py", line 32, in <module>
    foo()
  File "profiling.py", line 25, in foo
    print 'foo_1', timeit.Timer(foo_1, setup).timeit(1000)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/timeit.py", line 136, in __init__
    code = compile(src, dummy_src_name, "exec")
  File "<timeit-src>", line 6
    _t0 = _timer()
                 ^
IndentationError: unindent does not match any outer indentation level 
```

我在代码中搜索了通常的空格/制表符缩进错误，但没有找到。因此我想知道是不是因为我`timeit`在函数中包装了一个测试，这是不允许的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:37:10.093

这有效：

```
import sys
import timeit

def foo():

    setup = """
import random
"""

    foo_1 = """
for i in range(1000):
    random.randint(0, 99) + random.randint(0, 99)
"""

    foo_2 = """
for i in range(1000):
    random.randint(0, 99) + random.randint(0, 99)
"""

    foo_3 = """
for i in range(1000):
    random.randint(0, 99) + random.randint(0, 99)
"""

    print 'foo_1', timeit.Timer(foo_1, setup).timeit(1000)
    print 'foo_2', timeit.Timer(foo_2, setup).timeit(1000)
    print 'foo_3', timeit.Timer(foo_3, setup).timeit(1000)

if __name__ == '__main__':
    if (len(sys.argv) > 1):
        if (sys.argv[1] == 'foo'):
            foo()
    else:
        print 'Which profiling do you want to run?'
        print 'available:'
        print '    foo' 
```

问题是您传递为`setup`and`foo_1`等的字符串*是缩进的*，因为您已将它们与函数内的缩进代码对齐。但是，当该字符串由 执行时`timeit`，它会引发您看到的缩进错误，因为代码不应缩进。如果您尝试过，这基本上与发生的事情相同...

```
exec("    import sys") 
```

作为您的交互式口译会话中的第一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T17:18:23.713

mgilson 给出了一个很好的答案。但就个人而言，我发现heredoc 字符串中视觉上凹陷的线条令人分心。它还破坏[了我使用的 vim python 代码折叠](https://github.com/klen/python-mode)。

您可以通过单独编写行并加入它们来获得相同的效果，如下所示：

```
import sys
import timeit

def foo():

    setup = 'import random'

    foo_1 = '\n'.join([
        'for i in range(1000):',
        '    random.randint(0, 99) + random.randint(0, 99)',
    ])

    foo_2 = '\n'.join([
        'for i in range(1000):',
        '    random.randint(0, 99) + random.randint(0, 99)',
    ])

    foo_3 = '\n'.join([
        'for i in range(1000):',
        '    random.randint(0, 99) + random.randint(0, 99)',
    ])

    print 'foo_1', timeit.Timer(foo_1, setup).timeit(1000)
    print 'foo_2', timeit.Timer(foo_2, setup).timeit(1000)
    print 'foo_3', timeit.Timer(foo_3, setup).timeit(1000)

if __name__ == '__main__':
    if (len(sys.argv) > 1):
        if (sys.argv[1] == 'foo'):
            foo()
    else:
        print 'Which profiling do you want to run?'
        print 'available:'
        print '    foo' 
```

你在每条线上得到的空间更少，但我的权衡对我来说是值得的。

# installation - wix、InnoSetup、nsis 的安装程序开销

> ID：10887134
> 
> 赞同：0
> 
> 时间：2012-06-04T19:29:02.283
> 
> 标签：installation, wix, inno-setup, nsis

Wix 创建的安装程序的典型包大小开销是多少？

关于 NSIS 和 InnoSetup 的相同问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:38:35.177

NSIS 安装程序的开销只有 34 KB。

Inno Setup 最小大小约为 350kB（比 NSIS 大十倍）。

# jetty - JCS 管理页面：JSPAdmin.jsp 上的链接不能开箱即用

> ID：10887139
> 
> 赞同：0
> 
> 时间：2012-06-04T19:29:32.477
> 
> 标签：jetty, jcs

我使用 JCS 已经有一段时间了，我似乎遇到了与从 apache 下载的 jcs 捆绑在一起的 JSPAdmin.jsp 页面的问题。该页面帮助我们监控远程缓存服务器设置中的缓存元素。

页面上的链接（摘要 | 详细信息 | 清除）似乎不起作用，因为当我尝试单击这些链接时出现资源未找到错误。JCS 论坛建议调整 jar 中的几个类文件以启用此功能，但这不起作用。

远程缓存服务器当前设置在码头内。

有没有人遇到过这样的问题并且能够为这些链接配置页面？主页工作正常。

谢谢，

# javascript - 哪个 javascript 对象创建更有效？

> ID：10887140
> 
> 赞同：1
> 
> 时间：2012-06-04T19:29:34.560
> 
> 标签：javascript, object, prototype

我了解推荐的方式是版本 2（如下），使用原型。但是，这两个版本之间有什么区别，因为版本 1 不仅在内存消耗方面有时会超过版本 2，而且通常在一半到三分之一的时间内完成（根据我使用 Chrome 的测试）。

**版本 1：**

```
 var C = function() { console.log("new C"); }

   C.f = function(foo) { console.log("function"); }

   var a = [];
   for (var i = 0; i < 100000; i++) {
       a.push(new C());
   } 
```

**版本 2：**

```
 var C = function() { console.log("new C"); }

   C.prototype.f = function(foo) { console.log("function"); }

   var a = [];
   for (var i = 0; i < 100000; i++) {
       a.push(new C());
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:33:19.340

版本 1 将仅将函数提供给您的对象，而版本 2 将向保存原型的函数中的所有对象提供函数。

实际上，我很想知道您`new C();`在版本 1 中的任何实例是否可以访问 Cf 方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:58:17.277

任何性能差异都是没有意义的，因为第一个版本不起作用。

将函数作为属性添加到构造函数不会使其成为创建对象中的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:05:06.617

要在浏览器之外测试 JavaScript 语言，您可以使用我的[Script Scraper](http://www.scriptscraper/answers/felix/felix.html)工具。

![在此处输入图像描述](../Images/82e7e0edeebceaf1446bd67072a933d8.png)

谢谢，马丁。

# javascript - 控制 ENTER 键

> ID：10887145
> 
> 赞同：2
> 
> 时间：2012-06-04T19:30:16.823
> 
> 标签：javascript, jquery, forms

我们如何在页面中制作表单而不是在按下时提交`Enter`- 而是。它与按下特定按钮或图标或图像的作用相同吗？

以下是我的表格内容：

```
<input type="text" id="txt" /><input type="button" value="search"            
 onclick="searchresult()" /> 
```

问题是，如果我按`Enter`，表单会提交并且文本字段会自行清除，但该功能`searchresult()`不会显示其效果。当只按下按钮时，它工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:31:51.150

**HTML**

```
<input type="text" id="txt"/>
<input type="button" value="search"/> 
```

**jQuery**

```
$('input[type=text]').on('keyup', function(e) {
  if(e.which == 13) {   // 13 is keycode for enter
    e.preventDefault();
  }
}) 
```

您还可以绑定到`submit()`以下

```
$('form').submit(function(e) {  // instead of only `form`, 
                                // use with `id` or `class` combination
   if(e.which == 13) {
     e.preventDefault();
   }
}); 
```

### 余

不要忘记将代码放入

```
$(document).ready(function() {
   // your code
}); 
```

简而言之

```
$(function() {
  // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:32:48.090

尝试：

```
$('form').submit(function(event){
    if(!$(':focus',this).is(':button'))
        event.preventDefault();
}); 
```

这附加到表单本身。如果它是通过单击提交按钮以外的任何方式提交的，它会停止提交过程。为了获得更好的性能，缩小`'form'`选择器的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:33:09.743

或者，您可以绑定到`onsubmit`事件以在提交表单之前执行任何处理，而不是禁用 enter 键。从[MDN 文档](https://developer.mozilla.org/en/DOM/window.onsubmit)：

> 当用户单击表单 () 中的提交按钮时，将引发提交事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:54:15.973

尝试这个：

形式

```
<form id="myForm">
<input type="text" id="txt" />
<input type="submit" value="search" />
</form> 
```

js

```
<script>
$(document).ready(function(){
    $("#myForm").submit(function(e){
        e.preventDefault();
        searchresult();
    });
});
</script> 
```

# c# - 如何从表中获取所有行

> ID：10887146
> 
> 赞同：2
> 
> 时间：2012-06-04T19:30:29.167
> 
> 标签：c#, linq

使用 LINQ 获取表中所有行的最佳方法是什么？

前期我已经生成了一个 *.dbml 文件并创建了一个 dbContext。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:32:37.620

只需在上下文类中引用生成的可枚举集合即可：

```
var allRecords = context.SomeTable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T19:34:21.820

可能

```
FooDB fooBD = new FooDB();
var foo = fooBD.EntityFoo.ToList(); 
```

# android - Android不关注文件变化？

> ID：10887148
> 
> 赞同：0
> 
> 时间：2012-06-04T19:30:59.240
> 
> 标签：android

我遇到了一个非常令人沮丧的错误。

我有一个 java 类，它从文件中读取数据，并将其输入数据库。

```
 package edu.uci.ics.android;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DbAdapter extends SQLiteOpenHelper{

    private static final String DATABASE_NAME = "mydb";
    private static final int DATABASE_VERSION = 1;
    private static final String TABLE_NAME = "fruits";
    private static final String FRUIT_ID = "_id";
    private static final String FRUIT_NAME = "name";
    private static final String FILE_NAME = "fruits.txt";
    private static final String CREATE_TABLE = "CREATE TABLE "+ TABLE_NAME + "("+FRUIT_ID+" integer primary key autoincrement, "+FRUIT_NAME+" text not null);";
    private SQLiteDatabase mDb;
    private Context mContext;

    public DbAdapter(Context ctx){
        super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
        mContext = ctx;
        this.mDb = getWritableDatabase();
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE);
        // populate database
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(mContext.getAssets().open(FILE_NAME)));
            String line;

            while((line=in.readLine())!=null) {
                ContentValues values = new ContentValues();
                values.put(FRUIT_NAME, line);
                db.insert(TABLE_NAME, null, values);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME);
        onCreate(db);   
    }

    public Cursor fetchAll() {
        return mDb.query(TABLE_NAME, new String[] {FRUIT_NAME}, null, null, null, null, null);
    }

} 
```

编辑：

更清楚地说，这是失败的：

当我更改数据库名称变量，表名称变量时，程序强制关闭，表明出现问题。为什么我不能更改我创建的表的名称？

当我在 fruits.txt 文件中进行更改时，我在运行时看不到任何反映这些更改的内容。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:35:07.753

`SQLiteOpenHelper.onCreate()`只有在数据库不存在时才会自动调用，这只会发生一次。之后，数据库文件存在于设备的内部存储中，因此它只会加载它拥有的版本。

如果要在更改外部文件时创建新数据库，则需要删除当前数据库文件（手动过程）或更改创建助手的当前数据库版本。当 Android 发现`SQLiteOpenHelper`创建的版本与内部存储中的当前文件不同时，它会调用`onUpgrade()`以允许修改现有数据库以匹配新的“版本”。

编辑：

澄清一下，当您创建数据库时，会在设备的内部存储上创建（并持久化）一个 db 文件，与应用程序的资产分开。当你重新运行你的应用程序时，持久化的数据存储不会被清除（否则它不会被“持久化”），所以你的应用程序最后一次运行的数据库文件仍然存在……所有的设置都是从​​什么时候开始的它被创造了。

当您更改此类中的变量时，它不会以某种方式神奇地修改设备上已经存在的数据库文件，因此现在您正在寻找不存在的表和数据库（可能是您的崩溃来自何处） ）。

如果您只需要清除数据库以反映您在开发过程中所做的更改，只需在设备上手动清除数据库，方法是进入设置 -> 管理应用程序 -> {应用程序名称} -> 清除数据。这会删除持久文件，以便您的应用程序在下次启动时重新创建它们。

但是，如果您需要此功能以某种方式成为您的应用程序自动识别您对 /assets 中的文件所做的更改并因此修改或重新创建数据库的功能，那么请查看我之前关于使用升级的建议内置机制`SQLiteOpenHelper`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:35:30.413

当您更改代码中的数据库名称或表名称时，它们不再反映设备上数据库中的名称，因此您会强制关闭。在开发过程中，最简单的方法是卸载您的应用程序，然后在您进行此类不兼容的更改时重新安装。将数据库架构从一个发布版本更改为另一个时，您需要增加数据库版本号并在`onUpgrade()`.

例如，现在，你有

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME);
    onCreate(db);   
} 
```

因此，当您将代码中的表名从“fruits”更改为“veggies”时，`onUpgrade()`会运行，但表`veggies`不存在，因此不会被删除，然后您`onCreate(db)`在现有的顶部调用一个冲突的 shchema数据库。所以你需要检查`oldVeresion`并`newVersion`做更多类似的事情

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (newVersion == 2 && oldVersion == 1) {
        db.execSQL("DROP TABLE IF EXISTS" + TABLE_NAME_V1);
        db.execSQL("CREATE TABLE "+ TABLE_NAME ...);
    }
} 
```

如果您尝试`fruits.txt`在设备上进行更改，它将无法正常工作。这就是 Android 的设计方式：您的资产永远不会改变，它们是您的 APK 的只读部分。`fruit.txt`如果您希望文件能够更改，则需要将文件写入SD 卡。

# linq - 嵌套集合的 OrderBy 父对象

> ID：10887154
> 
> 赞同：6
> 
> 时间：2012-06-04T19:31:31.210
> 
> 标签：linq

简单的

```
public class TimeLine
{
  public String Name {get;set}
  public List<Milestone> MilesStones {get;set}
}

public class Milestone
{
  public String Name {get;set}
  public DateTime Time {get;set}
} 
```

我试过了： `from t in DataAccess.TimelineCollection.OrderBy(c=>c.MilesStones.OrderBy(z=>z.MilestoneDate)) select t;`但得到一个错误“至少一个对象必须实现 IComparable”。

我需要按 Milestone.Time 订购 TimeLine。列表中的第一个项目将是 Milestone 集合中具有最早 Time 属性的项目。

需要链接帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T19:35:46.217

听起来你可能想要

```
var query = DataAccess.TimelineCollection
                      .OrderBy(t => t.MileStones.Min(m => m.Time)); 
```

换句话说，对于每个`TimeLine`，找到*最早*的里程碑，并将其用于排序。

当然，如果里程碑是有序的，您可以使用：

```
var query = DataAccess.TimelineCollection
                      .OrderBy(t => t.MileStones.First().Time); 
```

`TimeLine`如果任何一个没有里程碑，这两个都将失败。

# qt - QMetaCallEvent 的用途是什么以及如何访问其详细信息？

> ID：10887157
> 
> 赞同：4
> 
> 时间：2012-06-04T19:31:44.720
> 
> 标签：qt, events, filter, meta, qevent

我有一个事件过滤器，当我单击展开/折叠我得到的树枝时，我注意到了`QEvent::MetaCall`。我正在考虑使用它来滚动我自己的展开/折叠代码，但我不知道如何获取任何信息，例如项目的索引。

**这个 MetaCall 事件类型有什么可用的吗？**

我发现有人在另一个网站上问过同样的问题，但没有答案，在这里： [http ://www.qtcentre.org/threads/37525-How-to-filter-QEvent-MetaCall](http://www.qtcentre.org/threads/37525-How-to-filter-QEvent-MetaCall)

这个事件通常用于什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-08T00:09:57.793

最大的问题是：*你到底想做什么？接收这些事件的 Qt 类是什么？*就我而言，你正试图以艰难的方式做事，那何必呢？

**每当使用排队连接**来调用插槽时，该`QMetaCallEvent`事件表示插槽调用。这可能是由于连接到插槽的信号触发，或者由于使用或. 排队的连接位是重要的部分！默认情况下，队列连接**不**用于同一线程中的对象之间的调用，因为它们具有事件队列管理开销，除非以下两个条件之一成立：**`QMetaObject::invoke``QMetaObject::invokeMethod`**

 ****1.  您为or提供`Qt::QueuedConnection`参数，*或*`QObject::connect``QMetaObject::invoke[Method]`

**   接收对象`thread()`不同于发起调用的线程——在调用时。* 

 *[`QMetaCallEvent`](http://code.woboq.org/qt5/qtbase/src/corelib/kernel/qobject_p.h.html#361)事件类携带调用槽所需的信息。它包含发送者`QObject`及其信号 ID（如果调用来自信号槽连接），以及目标槽标识符，以及需要传递到槽的参数。

因此，您可以检查被调用的插槽是否是您希望拦截的插槽，以及传递给它的参数。例如，如果您使用单个`int`参数调用插槽，那么`*reinterpret_cast<int*>(metaCallEvent->args()[1])`将为您提供该整数的值。第零个参数用于返回值（如果有），因此参数以基数 1 进行索引。

**免责声明**由于`QMetaCallEvent`该类是 Qt 实现的内部类，因此您将应用程序的二进制文件完全绑定到特定的 Qt 版本（整个 major.minor 版本），并且您失去了 Qt 在主要版本中提供的二进制兼容性的好处。当您切换到 Qt 的另一个次要版本时，您的代码可能仍然可以编译但无法正常工作！

以下适用于Qt 5.2.0，其他版本我没看过！

因此，假设您要拦截对`QLabel::setNum`. 您将捕获如下事件：

```
#include <private/qobject_p.h> // Declaration of QMetaCallEvent

bool Object::eventFilter(QObject * watched, QEvent * event) {
  QLabel * label = qobject_cast<QLabel*>(watched);
  if (! label || event->type() != QEvent::MetaCall) return false;
  QMetaCallEvent * mev = static_cast<QMetaCallEvent*>(event);
  static int setNumIdx = QLabel::staticMetaObject.indexOfSlot("setNum(int)");
  if (mev->id() != setNumIdx) return false;
  int num = *reinterpret_cast<int*>(mev->args()[1]);
  // At this point, we can invoke setNum ourselves and discard the event
  label->setNum(num);
  return true;
} 
```

如果您想在全局范围内查看使用元调用系统调用的所有插槽，您也可以这样做。基类的模板参数化允许灵活地使用任何应用程序类——比如`QCoreApplication`, `QGuiApplication`,`QApplication`或用户派生类型。

```
template <class Base> class MetaCallWatcher : public Base {
  MetaCallWatcher(int& argc, char** argv) : Base(argc, argv) {}
  bool notify(QObject * receiver, QEvent * event) { 
    if (event->type() == QEvent::MetaCall) {
      QMetaCallEvent * mev = static_cast<QMetaCallEvent*>(event);
      QMetaMethod slot = receiver->metaObject()->method(mev->id());
      qDebug() << "Metacall:" << receiver << slot.methodSignature();
    }
    return Base::notify(receiver, event);
  }
}

int main(int argc, char ** argv) {
  MetaCallWatcher<QApplication> app(argc, argv);
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:26:29.033

`QEvent::MetaCall`每当发出连接到接收中插槽的信号时，都会创建 -type事件`QObject`。在自定义过滤器/事件处理程序中对此事件做出反应似乎绕过了 Qt 最强大的功能，即信号槽架构。最好找出调用了哪个插槽以及该插槽是否是虚拟的，以便您可以重载它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-20T06:31:53.240

`QEvent::MetaCall`用于传递跨线程信号。*****

# jquery - 左侧分配无效

> ID：10887160
> 
> 赞同：2
> 
> 时间：2012-06-04T19:32:01.720
> 
> 标签：jquery, coldfusion

我正在尝试通过 jquery 将一个类分配给 a 标签，但这会导致通过萤火虫出现错误，在下面的第四行显示“左侧分配无效”。

```
<cfoutput>
$('.pngfix a').each(function(index) {
var hreflink = $(this).attr("href");
if (hreflink.toLowerCase() = '../Audio.cfm') {
$(this).addClass('audioImg');   
}
});
</cfoutput> 
```

网上看了一圈，貌似是语法问题，但是我好像没看到。。。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T19:36:48.753

> ```
> if (hreflink.toLowerCase() = '../Audio.cfm') 
> ```

这试图分配一个值，而不是检查相等性。`=`将运算符更改为`==`。

# objective-c - 委托方法“canMoveRowAtIndexPath”的目的是什么？

> ID：10887162
> 
> 赞同：1
> 
> 时间：2012-06-04T19:32:04.277
> 
> 标签：objective-c, ios, uitableview, delegates

我现在正在开发一个 UI 组件，因为它的行为类似于 UITableView，所以我在 UITableView 之后对委托和数据源协议进行了大量建模。但是，我注意到一种我不太了解的方法——“canMoveRowAtIndexPath”。

这实质上允许代理指定它是否希望给定的单元格是“可移动的”。但是，将另一个可移动单元格放入比不可移动单元格更高的索引（即在表格中的“上方”）不会导致它间接移动吗？（因为被移动的单元格下方的每个单元格都会被向下推一排）。

所以基本上，我的问题是这种方法的意义何在？任何人都可以提供一个示例用例吗？因为我正在争论我是否应该费心将它包含在我的组件中。

如果有的话，我认为更有用的委托方法可能是诸如“canMoveRowInSection”之类的东西，它允许您指定是否可以移动给定部分中的任何行。这将允许您禁用特定部分的重新排序，并且将其他行移到该部分之外不会影响其中行的顺序。

我知道 Apple 工程师提供这种方法是有原因的，我只是看不出这个原因可能是什么。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:39:46.473

**`canMoveRowAtIndexPath`**告诉 UITableView 如果表格处于编辑模式，则可以上下移动单元格（或单元格，如果您特别选择）。

由开发人员负责处理该动作的另一面。

例如，假设您有一个包含“A”、“B”、“C”的数组*（`NSMutableArray`准确地说）*，并且您想将该数组重新排列为“B”、“C”、“A”。您需要根据要移动的单元格的位置在数组中进行更改并保存该数组。

## 例子

```
-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    id objectToMove = [[array objectAtIndex:fromIndexPath.row] retain];
    [array removeObjectAtIndex:fromIndexPath.row];
    [array insertObject:objectToMove atIndex:toIndexPath.row];
    [objectToMove release];
} 
```

## 部分示例

此示例说明如果表格部分为 0，则任何单元格都不能移动。任何其他部分（比如你有 3 个），第 1 和第 2 部分中的那些单元格可以移动。您仍然需要相应地处理数组。

```
-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if ( indexPath.section == 0 )
        return NO;

    return YES;
} 
```

# c# - 使用 Web 服务为 Windows 窗体客户端运行 SQL 查询

> ID：10887163
> 
> 赞同：0
> 
> 时间：2012-06-04T19:32:07.023
> 
> 标签：c#, sql, web-services

我需要使用在远程客户端上运行的 Windows 应用程序，它将连接到 Web 服务。Web 服务将访问 SQL 数据库以验证用户和角色，并执行其他任务。我正在使用 ASP.NET Membership 来管理用户和角色。我有 ASP.NET 成员资格，并且 Web 服务在开发机器上工作。我有一个带有服务引用的 Windows 客户端，当我访问不访问数据库的方法时，它可以工作，但是当我尝试访问访问数据库方法的服务方法时，我得到**了用户与受信任的 SQL Server 连接没有关联。**根据我尝试解决的问题，我会收到各种权限错误，但这是要点。我不希望 Windows 客户端需要数据库权限。我希望它向 Web 服务发送用户名和密码，然后 Web 服务包装**Membership.ValidateUser(userName, password)**

有人可以告诉我如何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:39:45.320

您应该考虑将 SQL Server 设置为使用 SQL 和 Windows 身份验证（混合模式）。它很可能仅在 Windows 身份验证模式下运行。您可以查看[此](http://msdn.microsoft.com/en-us/library/ms144284.aspx)链接以开始使用。

听起来，按照您设计的方式，您必须为每个用户设置一个帐户。根据我的经验，最好只创建一个具有必要权限的特定 SQL 帐户，并让每个客户都使用该帐户。您可以在连接字符串中指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:45:55.597

假设您在 SQL 中启用了命名管道身份验证，您的 ASP.NET 应用程序中的 SQL 连接字符串可以配置为使用集成安全性 ( `Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;`)。然后在 SSMS 中，将适当的 ASP.NET 用户权限授予数据库。IIS 使用的用户取决于您运行的 IIS 版本，并且可以在相关服务器的应用程序池配置中看到。

# r - 用一系列数字替换唯一 ID

> ID：10887164
> 
> 赞同：0
> 
> 时间：2012-06-04T19:32:08.620
> 
> 标签：r, ggplot2

我正在尝试制作一个图表，其中 x 轴是日期（每个刻度是 1 天），y 轴的每个刻度代表一个唯一标识的个体（一条鱼）。然后，对于每天的每个人，我将绘制一个点来显示每个人是否在某一天被检测到。

我的问题是我有数千个检测要绘制，大约有 400 个人。个人唯一标识号非常大（例如：161795550 和 165705763 是 400 个唯一 ID 中的两个）。有些人只见几天，有些人几百。

问题：以这种方式绘制它（使用 ggplot2）使得 y 轴不可能在低唯一 ID 和高唯一 ID 之间展开，并且使用 ggplot2 没有办法打破轴。因此，我对解决方案的想法是将唯一 ID 重新编号为从 1 到 400 的序列，作为控制 y 轴上分布的一种方式。我可以手动执行此操作，但需要很长时间。有什么好方法可以自动重命名吗？

这是一些可用于重新创建应用情况的代码，我想将三个唯一 ID (165705763,161795422,161795351) 重命名为 (1,2,3)（现实生活中会有 400 个 ID问题）。

```
a<-c("165705763","165705763","165705763","165705763","165705763","161795422","161795351","161795351","161795351")
b<-c("Seine","Seine","Seine","Seine","Seine","Seine","HookAndLine","HookAndLine","HookAndLine")
f<-c("2010-10-25","2010-10-18 ","2010-10-30","2010-11-12","2010-10-29","2010-10-16","2010-10-25","2010-10-16","2010-10-18")
d<-cbind(a,b,f) 
```

欢迎任何其他解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:50:12.077

安德烈的评论导致了一个非常简单的解决方案。原始数据的 ID 为“整数”类。我只是将 ID 重新分类为字符，而 ggplot2 自动缩放 y 轴

# sql - 如何选择不同的2个字段

> ID：10887170
> 
> 赞同：0
> 
> 时间：2012-06-04T19:32:42.033
> 
> 标签：sql, database, group-by, distinct

除了所有这些之外，我还需要能够只选择具有 IsActive = 1 的记录：

```
SELECT DISTINCT 0 as CommunityID,  

                    CASE Libname
                        WHEN 'RKHL' THEN 'ROCK HILL'
                        WHEN 'FTML' THEN 'FORT MILL'
                        WHEN 'LANC' THEN 'LANCASTER'
                        WHEN 'BREV' THEN 'BREVARD'
                        WHEN 'PBTC' THEN 'MIDLANDS-CLEC'
                        WHEN 'PBTI' THEN 'MIDLANDS-ILEC'

                    END AS CommunityDesc,

                    LibName,
                    LibName + '|' AS FilterByID,
                    IsActive 
                    FROM Reference.dbo.Community
                    WHERE LibName <> 'CAROTEL' 
                    UNION
                    SELECT CommunityID, RTRIM(COMMNAME) AS CommunityDesc, LibName, LibName + '|' + RTRIM(COMMNAME) AS FilterByID, IsActive
                    FROM Reference.dbo.Community 

                    WHERE LibName <> 'CAROTEL'
                    ORDER BY 1,3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:35:43.167

添加`IsActive=1`到联合两边的 WHERE 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:37:24.587

您可以通过这种方式过滤结果集：

```
 SELECT * 
    FROM (
    SELECT DISTINCT 0 as CommunityID,  

                    CASE Libname
                        WHEN 'RKHL' THEN 'ROCK HILL'
                        WHEN 'FTML' THEN 'FORT MILL'
                        WHEN 'LANC' THEN 'LANCASTER'
                        WHEN 'BREV' THEN 'BREVARD'
                        WHEN 'PBTC' THEN 'MIDLANDS-CLEC'
                        WHEN 'PBTI' THEN 'MIDLANDS-ILEC'

                    END AS CommunityDesc,

                    LibName,
                    LibName + '|' AS FilterByID,
                    IsActive 
                    FROM Reference.dbo.Community
                    WHERE LibName <> 'CAROTEL' 
                    UNION
                    SELECT CommunityID, RTRIM(COMMNAME) AS CommunityDesc, LibName, LibName + '|' + RTRIM(COMMNAME) AS FilterByID, IsActive
                    FROM Reference.dbo.Community 

                    WHERE LibName <> 'CAROTEL'
) i
WHERE IsActive = 1
ORDER BY 1,3; 
```

# jquery - 使用 Jquery 回发加载列表视图

> ID：10887177
> 
> 赞同：0
> 
> 时间：2012-06-04T19:33:21.613
> 
> 标签：jquery, asp.net, asynchronous-postback

我是 Jquery 的新手，想构建一个列表视图，它将由代码隐藏函数创建。我想要一个 Jquery 函数，它可以在没有页面回发的情况下做到这一点。实际上是为了实现 UpdatePanel 功能，但不使用 UpdatePanel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:37:25.000

使用 jQuery[加载](http://api.jquery.com/load/)调用服务器页面，该页面返回 ListView/ 表的标记

```
//inlcude jQuery library here
<div id="myDiv"></div>
<script type="text/javascript">

    $(function(){

      //This code will execute once DOM is ready
      $("#myDiv").load("myServerPage.aspx");        

    });
</script> 
```

在 中`myServerPage.aspx`，您可以返回要在主页中显示的 HTML 标记。

```
 protected void Page_Load(object sender, EventArgs e)
 {
    StringBuilder strItems = new StringBuilder();
    strItems.Append("<table>");
    //You can replace the below dummy for each loop with your code 
    //to read data from database.
    for(int i=0;i<10;i++)
    {
      strItems.Append("<tr><td>"+i.ToString()+"</td><td>I am awesome</td></tr>");    
    } 
    strItems.Append("</table>");
    Response.Write(strItems.ToString());
 } 
```

如果它是简单的 HTML 标记，我会使用**ashx 处理程序**而不是 aspx 页面。

load 函数将加载您从 myServer.aspx 页面返回的标记。它不会有您通常通过 ListView 服务器控件获得的事件。

# iphone - Shadowbox YouTube 视频未出现在 iPhone 设备上

> ID：10887188
> 
> 赞同：0
> 
> 时间：2012-06-04T19:34:38.333
> 
> 标签：iphone, html, css, flash, youtube

[http://www.execairshare.com/about-us/testimonials](http://www.execairshare.com/about-us/testimonials)

有没有人在 shadowbox 中加载 youtube 视频并且无法在 iphone 上查看它时遇到问题？在其他移动设备上它工作正常，但在 iphone 上它只显示一个空白黑框。我假设它是一个闪光的东西？

```
<a href="http://www.youtube.com/v/Mf5Mpd1LIgM" rel="shadowbox:width=680;height=480">
<img src="//i4.ytimg.com/vi/Mf5Mpd1LIgM/default.jpg" alt="Thumbnail">
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:41:11.037

您链接到 Youtube 视频的 Flash 版本。由于 iPhone 没有闪光灯，因此无法使用。

您需要链接到视频的 HTML5 版本。

尝试添加 '?html5=1'

```
<a href="http://www.youtube.com/v/Mf5Mpd1LIgM?html5=1" rel="shadowbox:width=680;height=480">
<img src="//i4.ytimg.com/vi/Mf5Mpd1LIgM/default.jpg" alt="Thumbnail">
</a> 
```

# triggers - Apex Trigger Works，无法通过测试

> ID：10887191
> 
> 赞同：2
> 
> 时间：2012-06-04T19:34:42.490
> 
> 标签：triggers, salesforce, apex-code

3 小时后我又回到了这里，没有对任何代码进行任何更改，测试执行工作正常。无视这个问题

我编写了一个触发器，该触发器非常适合根据外部 ID 在联系人记录上设置 accountID。

我有一个效果很好的测试，但我在触发器中添加了一些逻辑，因此它只更新使用“默认帐户”作为帐户的联系人。现在我的测试失败了，说它没有更新帐户，即使它在保存记录时仍然按设计工作。

我错过了什么？

我添加了第 4 行

```
ID DefaultAccID = [select ID from Account where Name = 'Default Account'].ID; 
```

以及第 9 行附近的 if

```
if (contactNew.AccountID == DefaultAccID) {
} 
```

触发：

```
trigger TRG_Contact_SetHouseholdID on Contact (before update, before insert) {
Set<String> AccIDlist = new Set<String>();
ID DefaultAccID = [select ID from Account where Name = 'Default Account'].ID;

// loop through records finding thoes that need to be linked
for(Contact contactNew:Trigger.New){
    if (contactNew.AccountID == DefaultAccID) {
        AccIDlist.add(contactNew.RPHouseholdID__c);
    }
}

Map<String, ID> AccountMap = new Map<String, ID>();

//loop needing linked and get account ID if it exist     
for(Account oneAccount:[SELECT RPHouseholdID__c, ID from Account where RPHouseholdID__c IN :AccIDlist]){
    AccountMap.put(oneAccount.RPHouseholdID__c, oneAccount.ID);
}

// loop through records updating the ones that need link
for(Contact contactNew:Trigger.New){
    if (AccountMap.get(contactNew.RPHouseholdID__c) <> null){
        contactNew.AccountID = AccountMap.get(contactNew.RPHouseholdID__c);
    }
}
} 
```

测试类：

```
@isTest
Private class TRG_Contact_SetHouseholdID_Test {
static TestMethod void Test0_TestInsertWithValue(){
    insertTestAccounts();
    Account defaultAccount = [select ID from Account where name = 'Default Account' limit 1];
    Account newAccount = [select ID from Account where name = 'Camper Family' limit 1];
    test.startTest();
        insertTestContact(defaultAccount.ID);
    test.stopTest();
    Contact newContact = [select ID,AccountID from Contact where firstname = 'Happy' and lastname = 'Camper' limit 1];
    System.assertEquals(newContact.AccountID, newAccount.ID, 'accountID did not get changed from default (' + defaultAccount.ID + ')');
}

private static void insertTestAccounts()
{
    Account obj = new Account();
    obj.Name = 'Default Account';
    insert obj;
    obj = new Account() ;
    obj.Name = 'Camper Family';
    obj.RPHouseholdID__c = '111';
    insert obj;

}
private static void insertTestContact(ID defaultID)
{
    Contact obj = new Contact();
    obj.AccountID = defaultID;
    obj.firstName = 'Happy';
    obj.lastname = 'Camper';
    obj.RPHouseholdID__c = '111';
    insert obj;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:00:30.487

扩展一点@zachelrath 的回答，从 API 版本 24.0 开始，测试方法与组织中的数据隔离（除了一些例外用户、记录类型等，请参阅[此处](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_data_access.htm)以获取完整列表）。与其更改文件的 API 版本，最简单的做法是将查看所有数据指令添加到 isTest 注释，如下所示：

```
@isTest(SeeAllData=true)
Private class TRG_Contact_SetHouseholdID_Test {
// etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:42:38.367

将您的测试类的 API 版本设置为 24.0 --- 我敢打赌，您对默认帐户的初始查询是在提取名称为“默认帐户”的预先存在的记录，而不是您在测试数据中创建的默认帐户. 有两种方法可以解决这个问题：

1.  （最简单）将您的测试类更改为 API 版本 24.0
2.  如果您希望使用 API 23.0 或更低版本，那么在您的测试方法开始时，删除所有名为“默认帐户”的帐户，然后插入您的测试帐户。

# xpath - XSLT 前后位置

> ID：10887198
> 
> 赞同：0
> 
> 时间：2012-06-04T19:35:28.440
> 
> 标签：xpath

```
<parent>
...
  <child>foo</child>
  <child current="true">current</child>
  <child>bar</child>
...
</parent> 
```

我如何在@current child 之前和之后获取孩子的值（即输出 foo 和 bar）？我将使用这些值输出 Prev/Next 链接。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:02:33.997

```
child[@current='true']/preceding-sibling::child[1]

child[@current='true']/following-sibling::child[1] 
```

# c# - 多个过滤器在 DataGrid WPF 中不起作用

> ID：10887200
> 
> 赞同：1
> 
> 时间：2012-06-04T19:35:30.710
> 
> 标签：c#, data-binding, datagrid, filter, observablecollection

我的数据绑定在我的 DataGrid 中工作正常，但是当我尝试从我的 CollectionViewSource 获取 collectionview 时，它为空，并且我在 DataGrid 中的过滤器不起作用。这是代码：

```
<Window.Resources>
    <CollectionViewSource x:Key="jobItemViewSource" d:DesignSource="{d:DesignInstance my:JobItem, CreateList=True}"/>
</Window.Resources>

<Grid Visibility="Visible" ShowGridLines="False" UseLayoutRounding="True" DataContext="{StaticResource jobItemViewSource}">

<DataGrid Grid.Row="4" Grid.ColumnSpan="6" LoadingRow="jobItemDataGrid_LoadingRow" ItemsSource="{Binding}" Name="jobItemDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" IsReadOnly="True" IsSynchronizedWithCurrentItem="True" AutoGenerateColumns="False" Grid.RowSpan="2">
                    <DataGrid.Columns>
                        <DataGridTextColumn x:Name="workOrderNoColumn" Binding="{Binding Path=WorkOrderNo}" Header="Work Order No." Width="75" />
                        <DataGridTextColumn x:Name="assigneeColumn" Binding="{Binding Path=PrimaryAssignee}" Header="Assignee" Width="80" />
                        <DataGridTextColumn x:Name="dateReceivedColumn" Binding="{Binding Path=DateReceived}" Header="Date Received" Width="90" />
                        <DataGridTextColumn x:Name="dueDateColumn" Binding="{Binding Path=DueDate}" Header="Due Date" Width="90" />
                        <DataGridTextColumn x:Name="statusColumn" Binding="{Binding Path=Status}" Header="Status" Width="70" />
                    </DataGrid.Columns>

                </DataGrid>
<CheckBox Content="Show Active Jobs" Name="actJobsCheckBox" Grid.Column="1" Grid.ColumnSpan="2"  Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="AddFiltering" Unchecked="RemoveFiltering"/>
                <CheckBox Content="Show Completed Jobs" Name="compJobsCheckBox" Grid.Column="3" Grid.ColumnSpan="3"  Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="AddFiltering" Unchecked="RemoveFiltering"/>

</Grid> 
```

在我后面的代码中，我有以下内容：

```
public partial class AdminView : Window
{
    ObservableCollection <JobItem> JobItemList = new ObservableCollection<JobItem>();
    CollectionViewSource jobItemViewSource = new CollectionViewSource();
    ICollectionView view; 
    MainWindow parent;
    Employee currEmployee;
    GroupFilter filterList = new GroupFilter();

    public AdminView(MainWindow parent, Employee currEmployee)
    {
        this.parent = parent;
        this.currEmployee = currEmployee;
        InitializeComponent();
        jobItemDataGrid.DataContext = JobItemList;
        jobItemViewSource = (CollectionViewSource)(this.Resources[jobItemViewSource]);
        view = CollectionViewSource.GetDefaultView(jobItemDataGrid);

    }

private void AddFiltering(object sender, RoutedEventArgs args)
    {
        CheckBox check = sender as CheckBox;
        Predicate<object> active = new Predicate<object>(ContainsActive);
        Predicate<object> completed = new Predicate<object>(ContainsComp);

        switch (check.Name)
        {
            case "actJobsCheckBox":
                filterList.AddFilter(active);
                if( view != null)
                    view.Filter = filterList.Filter;
                break;
            case "compJobsCheckBox":
                filterList.AddFilter(completed);
                if (view != null)
                    view.Filter = filterList.Filter;
                break;
        }

    }

    private void RemoveFiltering(object sender, RoutedEventArgs args)
    {
        CheckBox check = sender as CheckBox;
        Predicate<object> active = new Predicate<object>(ContainsActive);
        Predicate<object> completed = new Predicate<object>(ContainsComp);

        switch (check.Name)
        {
            case "actJobsCheckBox":
                filterList.RemoveFilter(active);
                break;
            case "compJobsCheckBox":
                filterList.RemoveFilter(completed);
                break;
        }

    }

    public bool ContainsActive(object de)
    {
        JobItem item = de as JobItem;

        return (item.Status != "Completed");
    }

    public bool ContainsComp(object de)
    {
        JobItem item = de as JobItem;

        return (item.Status == "Completed");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:08:30.097

我实际上已经找到了自己的答案，我只需要刷新我的视图就可以了。

# c - 指向函数与全局变量的指针

> ID：10887201
> 
> 赞同：4
> 
> 时间：2012-06-04T19:35:37.497
> 
> 标签：c, function, variables, pointers, global

这里的软件经验很少的新 EE。在过去的几年里，在这个网站上阅读了很多问题，这将是我的第一个问题/帖子。还没有完全找到这个问题的答案。

我想知道让函数修改主体内的全局变量（不将其作为参数传递）与传递变量地址之间的区别/动机。

这是每个示例以使其更清楚。假设我声明了一些函数“peripheral.c”（在“peripheral.h”中使用它们的正确原型，并在“implementation.c”中使用它们

方法一：

```
//peripheral.c

//macros, includes, etc

void function(*x){
   //modify x
} 
```

.

```
//implementation.c

#include "peripheral.h"

static uint8 var;

function(&var);  //this will end up modifying var 
```

方法二：

```
//peripheral.c

//macros, includes, etc

void function(void){
   //modify x
} 
```

.

```
//implementation.c

#include "peripheral.h"

static uint8 x;

function();    //this will modify x 
```

避免使用“全局”变量的唯一动机是什么？（另外，如果它只有文件范围，它真的是全球性的吗？）

希望这个问题是有道理的。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:42:36.673

接收指向变量的参数的函数更通用。它可用于修改全局变量、局部变量或任何变量。修改全局的函数可以执行该任务并且只能执行该任务。

哪个是首选完全取决于上下文。有时一种方法更好，有时另一种方法更好。不可能明确地说一种方法总是比另一种更好。

至于你的全局变量是否真的是全局的，它是全局的，因为你的进程中只有一个该变量的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:38:54.280

`static`变量有**内部链接**，它们不能在它们所在 的**[翻译单元之外被访问。](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**

因此，如果您想`static`在另一个 TU 中修改全局变量，则必须像第一个示例一样通过函数参数将其作为指针传递。

您的第二个示例无法工作，因为`x`无法在外部访问`implementation.c`，它应该会给您一个编译错误。

好读：
[什么是外联和内联？](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:49:32.230

首先，在 C/C++ 中，“全局”确实意味着文件范围（尽管如果您在标头中声明全局，那么它会包含在 #include 该标头的文件中）。

当调用函数具有被调用函数应修改的某些数据时，例如在您的示例中，使用指针作为参数很有用。当正在修改其输入的函数不确切知道它正在修改什么时，作为参数的指针特别有用。例如：

```
scanf("%d", &foo); 
```

scanf 不会知道任何关于 foo 的信息，并且你不能修改它的源代码来让它知道 foo。但是，scanf 使用指向变量的指针，这允许它修改任意变量的值（当然是它支持的类型）。这使得它比依赖全局变量的东西更可重用。

在您的代码中，您通常应该更喜欢使用指向变量的指针。但是，如果您注意到您正在将相同的信息块传递给许多函数，那么全局变量可能是有意义的。也就是说，你应该更喜欢

```
int g_state;
int foo(int x, int y);
int bar(int x, int y);
void foobar(void);
... 
```

至

```
int foo(int x, int y, int state);
int bar(int x, int y, int state);
void foobar(int state);
... 
```

基本上，将全局变量用于应该由它们所在的文件（或文件，如果您在标头中声明全局）中的所有内容共享的值。使用指针作为值的参数，这些值应该在一组较小的函数之间传递以进行共享，以及可能有多个变量您希望对其执行相同操作的情况。

编辑：另外，作为未来的说明，当您说“指向函数的指针”时，人们会假设您的意思是指向函数的指针，而不是将指针作为参数传递给函数。“指针作为参数”对于您在这里的要求更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:23:43.807

全局变量的主要问题是它们促进了函数或模块之间的所谓[“紧密耦合” 。](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)在您的第二个设计中，`peripheral`模块知道并依赖于 的设计`implementation`，以至于如果您`implementation`通过删除或重命名进行更改，即使不触及任何代码`x`，您也会*破坏。* 您还无法独立于模块 `peripheral`重用。`peripheral``implementation`

同样，这种设计意味着`function`in`peripheral`只能处理 的单个实例`x`，无论其`x`代表什么。

理想情况下，函数及其调用者应仅通过参数、返回值和异常（在适当的情况下）进行通信。如果您需要在调用之间维护状态，请使用可写参数来存储该状态，而不是依赖全局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T19:45:20.293

这里有几个不同的问题：

1.  一般来说，“全局变量不好”。如果可以避免，请不要使用它们。是的，最好传递一个指向变量的指针，以便函数可以修改它，而不是使其成为全局变量，以便函数可以隐式修改它。

2.  话虽如此，全局变量还是很有用的：一定要酌情使用它们*。*

3.  是的，“全局”可以表示“函数之间”（在一个模块内）以及“模块之间”（在整个程序中是全局的）。

4.  关于您的代码，有几件有趣的事情需要注意：

    a) 大多数变量是从“堆栈”分配的。当您在这样的函数之外声明一个变量时，它是从“块存储”分配的 - 空间存在于程序的生命周期中。

    b）当您将其声明为“静态”时，您将其从其他模块“隐藏”：该名称在模块之外不可见。

    c) 如果你想要一个真正的全局变量，你*不会*使用关键字“static”。您*可以*在头文件中将其声明为“extern uint8 var”（因此所有模块都有定义）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T19:46:05.167

我不确定您的第二个示例是否真的有效，因为您声明`x`为静态（因此将其范围限制为文件），但除此之外，指针传递版本还有一些优点：

*   它为您在分配和模块化方面提供了更大的灵活性。虽然您只能在文件中拥有一个全局变量的副本，但您可以拥有任意数量的指针，它们可以指向在许多不同位置创建的对象（静态数组、malloc、堆栈变量......）

*   全局变量被强制到每个函数中，因此您必须始终意识到有人可能想要修改它们。另一方面，指针只能由您明确传递给它们的函数访问。

*   除了最后一点之外，全局变量都使用相同的范围，并且可能会因变量过多而变得混乱。另一方面，指针与普通变量一样具有词法作用域，并且它们的作用域受到更多限制。

* * *

是的，如果你有一个小的、独立的文件，事情会变得有些模糊。如果您不打算实例化一个以上的“对象”，那么有时静态全局变量（对于单个文件是本地的）与指向结构的指针一样工作。

# java - 了解 HashMap

> ID：10887209
> 
> 赞同：5
> 
> 时间：2012-06-04T19:36:21.093
> 
> 标签：java, hashmap

好的，这是我不明白的一点。
*如果您尝试使用该`get()`方法检索一个对象并返回 null，则仍然有可能将该对象存储为与您提供给该方法`null`的键关联的对象。`get()`您可以通过将对象的键传递`containsKey()`给 map 方法来确定是否是这种情况。`true`如果键存储在地图中，则返回*
因此，`containsKey()`应该如何告诉我**与提供的键关联的值是否为`null`**？如果您想检查，
这是[参考。](http://books.google.co.in/books?id=10WYCnEHM9sC&pg=PR5&dq=Ivor+Horton+Beginning+Java+7&hl=en&sa=X&ei=fA3NT6ypLsO_8wO_q-gB&ved=0CDsQ6AEwAA#553=onepage&q=Ivor%20Horton%20Beginning%20Java%207&f=false)第 553 页

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T19:38:27.190

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("Foo", null);
System.out.println(map.containsKey("Foo"));
System.out.println(map.containsKey("Boo")); 
```

**输出：**

```
true
false 
```

* * *

`get()``null`在两种情况下返回：

*   地图中不存在该键。
*   键确实存在，但关联的值为`null`。

你无法分辨`get()`哪个是真的。但是，`containsKey()`将告诉您该键是否存在于地图中，无论其关联值是否为`null`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T19:48:00.803

考虑这个简单的代码片段：

```
Map<String, String> m = new HashMap<String, String>();
m.put("key1", "value1");
m.put("key2", null);

System.out.println("m.get(\"key1\")=" + m.get("key1"));
System.out.println("m.containsKey(\"key1\")=" + m.containsKey("key1"));

System.out.println("m.get(\"key2\")=" + m.get("key2"));
System.out.println("m.containsKey(\"key2\")=" + m.containsKey("key2"));

System.out.println("m.get(\"key3\")=" + m.get("key3"));
System.out.println("m.containsKey(\"key3\")=" + m.containsKey("key3")); 
```

如您所见，我在地图中放入了两个值，其中一个为空。然后我向地图询问三个值：其中两个存在（一个为空），一个不存在。看看结果：

```
m.get("key1")=value1
m.containsKey("key1")=true
m.get("key2")=null
m.containsKey("key2")=true
m.get("key3")=null
m.containsKey("key3")=false 
```

第二个和第三个是棘手的部分。`key2`存在空值，因此，使用`get()`您无法区分元素是不在地图中还是在地图中具有`null`值。但是，使用`containsKey()`你可以，因为它返回一个`boolean`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T19:40:45.303

```
(get() == null && containsKey()) == value is null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T19:38:58.250

containsKey 会告诉您密钥是否在哈希图中。考虑一个键存在空值的情况，以及您要查找的键根本不在哈希图中的另一种情况。

# android - 以编程方式启动Skype后删除国家/地区代码-Android

> ID：10887210
> 
> 赞同：2
> 
> 时间：2012-06-04T19:36:27.410
> 
> 标签：android, android-intent, skype

我想从我的应用程序开始 Skype 通话，我使用此代码

```
Intent skype_intent = new Intent("android.intent.action.CALL_PRIVILEGED");
skype_intent.setClassName("com.skype.raider", "com.skype.raider.Main");
skype_intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 

skype_intent.setData(Uri.parse("tel:+99mynubber")); 
Context context = getApplicationContext();

context.startActivity(skype_intent); 
```

此代码工作正常，但 Skype 删除 + 并添加我的国家代码调用 +3999mynumber

如何避免这种影响并准确拨打我想要的号码？

# c++ - 是否可以避免在实现文件中重复类名？

> ID：10887211
> 
> 赞同：29
> 
> 时间：2012-06-04T19:36:30.243
> 
> 标签：c++, class, syntax

有没有办法避免`Graph::`实现文件中的重复，但仍然将类拆分为头文件+实现？比如在：

头文件：

```
#ifndef Graph_H
#define Graph_H

class Graph {
public:
    Graph(int n);
    void printGraph();
    void addEdge();
    void removeEdge();
};

#endif 
```

实施文件：

```
Graph::Graph(int n){}
void Graph::printGraph(){}
void Graph::addEdge(){}
void Graph::removeEdge(){} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T19:56:00.007

我猜这是为了避免大量“不必要的打字”。可悲的是，没有办法摆脱范围（正如许多其他答案告诉你的那样）但是我个人所做的是用我所有的函数原型在漂亮的行中定义类，然后复制/粘贴到实现文件中，然后 ctrl-c你的 ClassName:: 在剪贴板上，然后用 ctrl-v 运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T19:40:59.247

如果您想避免在 printGraph、addEdge 等前面键入“Graph::”，那么很遗憾，答案是“否”。类似于 C# 的“部分类”功能在 C++ 中不可访问，任何类的名称（如“Graph”）都不是命名空间，而是范围。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T19:41:28.873

不，没有。至少不是直接的。您可以使用预处理器技巧，但**不要这样做**。

```
#define IMPL Graph::

IMPL Graph(int n){}
void IMPL printGraph(){}
void IMPL addEdge(){}
void IMPL removeEdge(){} 
```

此外，您甚至不应该*这样*做。重点是什么。除了它是 C++ 规则之外，它还让您知道您实际上正在实现一个成员函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-03T05:49:48.320

一种选择是`using`。如果您的方法定义位于从不获取`#include`d 的 cpp 文件中，那么`using`是安全的（不影响其他文件）：

富.h：

```
class FooLongNameSpecialisationsParamaters
{
    int x_;

public:

    int Get () const;
    void Set (int);
}; 
```

foo.cpp：

```
#include "foo.h"

using Foo = FooLongNameSpecialisationsParamaters;

int Foo::Get () const
{
    return x_;
}

void Foo::Set (int x)
{
    x_ = x;
} 
```

主.cpp：

```
#include "foo.h"

int main ()
{
    //Foo foo; <-- error
    FooLongNameSpecialisationsParamaters foo;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T19:41:12.877

不，没有办法避免它。否则，你怎么知道给定的函数定义是用于类函数还是静态函数？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T19:46:27.917

如果您询问是否可以定义成员函数，例如`Graph::printGraph`不指定类名限定，那么答案是否定的，不是您想要的方式。这在 C++ 中是不可能的：

> 实现文件：

```
void printEdge(){}; 
```

以上将编译得很好，但它不会做你想要的。它不会在`Graph`类中以相同的名称定义成员函数。相反，它将声明并定义一个名为`printEdge`.

这是好的和适当的，如果从您的角度来看有点痛苦，因为您可能只想要两个具有相同名称但在不同范围内的函数。考虑：

```
// Header File
class A
{
  void foo();
};

class B
{
  void foo();
};

void foo();

// Implementation File
void foo()
{
} 
```

该定义应适用于哪个范围？C++ 不限制您在不同范围内使用具有相同名称的不同函数，因此您必须告诉编译器您正在定义什么函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-06T20:14:45.047

```
 //yes it is possible using preprocessor like this:

        #define $ ClassName //in .cpp 

    void $::Method1() 
    { 
    } 

    //or like this: in the header .h:

        #undef $
        #define $ ClassName' 

// but you have to include the class header in last #include in your .cpp:

        #include "truc.h"
        #include "bidule.h" ...
        #include "classname.h" 

        void $::Method() { }  

        //i was using also 
        #define $$ BaseClass 
        //with single inheritance  than i can do this: 

        void $::Method() 
        { 
        $$::Method(); //call base class method 
        } 

        //but with a typedef defined into class like this it's better to do this: 
        class Derived : Base 
        { 
        typedef Base $$;  

    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T20:04:46.543

**编辑：**我误读了你的问题。这将是您是否可以拆分头文件的问题的答案。`LongClassName::`抱歉，避免使用 -syntaxes对您没有帮助。

简单的答案：您可以拆分 c++ 文件，但不能拆分头文件。

原因很简单。每当您的编译器需要编译构造函数时，它都需要确切知道需要为这样的对象分配多少内存。

例如：

```
class Foo {
   double bar;  //8 bytes
   int goo;  //4 bytes
} 
```

`new Foo()`需要分配`12 bytes`内存。但是如果你被允许在多个文件上扩展你的类定义，从而拆分头文件，你很容易把它弄得一团糟。你的编译器永远不会知道你是否已经告诉了它关于类的一切，或者你是否没有。代码中的不同位置可能对类有不同的定义，从而导致分段错误或神秘的编译器错误。

例如：

`h1.h`：

```
class Foo {
   double bar;  // 8 bytes
   int goo;     // 4 bytes
} 
```

`h2.h`: #include "h1.h"

```
class Foo {
   double goo;   // 8 bytes
} // we extend foo with a double. 
```

`foo1.cpp`：

```
#include "foo1.h"

Foo *makeFoo() {
   return new Foo();

} 
```

`foo2.cpp`：

```
#include "foo2.h"

void cleanupFoo(Foo *foo) {
   delete foo;
} 
```

`foo1.h`：

```
#include "h1.h"

Foo *makeFoo(); 
```

`foo2.h`：

```
#include "h1.h"
#include "h2.h"

void cleanupFoo(Foo *foo) 
```

`main.cpp`：

```
#include foo1.h
#include foo2.h

void main() {
    Foo *foo = makeFoo();
    cleanupFoo(foo);
} 
```

仔细检查如果您首先编译`main.cpp`到 main.o，然后编译`foo1.cpp`到`foo1.o`和`foo2.cpp`到`foo2.o`，最后将所有这些链接在一起会发生什么。这应该编译，但`makeFoo()`分配的东西然后`cleanupFoo()`释放。

所以你有它，随意拆分`.cpp`-files，但不要在头文件上拆分类。

# python - 将 numpy 数据类型与字符串进行比较

> ID：10887212
> 
> 赞同：7
> 
> 时间：2012-06-04T19:36:32.730
> 
> 标签：python, numpy

许多 numpy 函数将 dtype 参数作为字符串（如`"float64"`）或 numpy 数据类型（如`numpy.float64`）甚至 python 数据类型（如`float`）。

我需要比较两种数据类型并希望支持这种灵活的接口。有没有一种功能在所有这些形式下都是等价的？即我想要最小的功能`f`，这样

`f("float64") == f(numpy.float64) == f(float)`

numpy 在内部使用什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T19:47:59.100

您应该阅读 numpy 文档的[Scalars](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html)页面，该页面描述了数据类型层次结构。

为了比较 dtypes 本身，您可以使用[np.issubdtype](http://docs.scipy.org/doc/numpy/reference/generated/numpy.issubdtype.html)。一些例子：

```
>>> import numpy as np
>>> np.issubdtype(np.int32, int)
True
>>> np.issubdtype(np.int32, float)
False
>>> np.issubdtype(float, np.floating)
True
>>> np.issubdtype(float, np.inexact)
True
>>> np.issubdtype(np.float32, float)
True
>>> np.issubdtype(np.float32, int)
False
>>> np.issubdtype(np.float32, np.floating)
True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T19:42:01.410

最简单的方法是`numpy.dtype`每次都创建一个新对象，因为它已经内置了所有必要的类型规范化/标准化和相等检查。实际上，我还没有看内部结构，所以它是可能的它实际上并没有`dtype`为`numpy`已经拥有的实例创建一个新实例（例如 using`numpy.array`并不总是创建一个新数组），这将非常有效。

```
numpy.float64 == numpy.dtype('float64') == numpy.dtype(numpy.float64) == numpy.dtype(float)
numpy.int32 == numpy.dtype('int32') == numpy.dtype(numpy.int32) == numpy.dtype(int) 
```

# c# - 来自 c# 服务的 Outlook 互操作

> ID：10887215
> 
> 赞同：1
> 
> 时间：2012-06-04T19:36:38.033
> 
> 标签：c#, email, service, interop, outlook

我安装了一个准系统 c# 服务，并希望在我的程序中使用 outlook.interop 功能。只是为了检测和阅读收到的新电子邮件。我有执行此操作的程序，但它是一个表单应用程序。是否可以从 C# 服务使用 outlook.interop？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:44:34.990

最好避免在服务环境中使用交互式应用程序。Microsoft 不支持从服务中使用 Outlook，这可能会给您带来各种麻烦（例如，弹出消息框）。

如果您想与 Exchange 服务器通信，最好使用 CDO/MAPI 或 Exchange Web 服务 API。

如果您想与 POP3 或 IMAP 服务器通信，请使用专用库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:04:17.490

您应该查看[Redemption RDO 库](http://www.dimastr.com/redemption/rdo_introduction.htm)（商业第三方工具），它实际上是 MAPI 的托管包装器，允许对 Outlook 存储进行进程外访问。要检测新邮件，您可以订阅该[`RDOStore.OnNewMail`](http://www.dimastr.com/redemption/rdostore.htm#events)事件。

# vb6 - VB-连接网络时将离线txt文件保存到服务器

> ID：10887216
> 
> 赞同：0
> 
> 时间：2012-06-04T19:36:39.960
> 
> 标签：vb6, excel, vba

我编写了一个 Excel VB 来将文件从自动化任务中保存到共享点。如果它连接到办公网络，它就可以正常工作。如果我离线，我将文件保存到本地驱动器。当计算机连接到办公网络时，有人可以帮助我使用宏将文件保存到服务器吗？我的办公室不建议连续检查网络状态。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:10:16.490

自动化任务是指计划任务吗？

如果是这样并且您恰好在 Windows 7 上运行，您可以将计划任务设置为仅在满足某些网络条件时运行。您可以构建一个单独的宏来获取本地存储的任何文件并将它们推送到服务器，并让该宏仅在网络连接时运行。

# php - PHP文件包含错误

> ID：10887218
> 
> 赞同：2
> 
> 时间：2012-06-04T19:36:49.010
> 
> 标签：php

我在 PHP 页面中有以下代码。有时当我删除 cache2.html 文件时，我希望 php 重新创建它，下一个人将获得 cache2.html 而不是执行 php 代码。我有时在页面上收到以下警告，但没有内容。是因为多个用户同时访问php吗？如果是这样，我该如何解决？谢谢你。

> 警告：include(dir1/cache2.html) [function.include]：无法打开流：第 8 行的 /home/content/54/site/index.php 中没有此类文件或目录

```
<?php 
if (substr_count($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip')) ob_start("ob_gzhandler"); else ob_start();

$cachefile = "dir1/cache2.html";
if (file_exists($cachefile)) {
        include($cachefile); // output the contents of the cache file
} else {

/* HTML (BUILT USING PHP/MYSQL) */

$cachefile = "dir1/cache2.html";
$fp = fopen($cachefile, 'w'); 
fwrite($fp, ob_get_contents()); 
fclose($fp);
ob_flush(); // Send the output to the browser
}  
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:44:51.540

对 file_exists() 的调用本身会被缓存，因此即使在文件被删除之后，您也可能会获得 true 的返回值。看：

[http://us.php.net/manual/en/function.clearstatcache.php](http://us.php.net/manual/en/function.clearstatcache.php)

所以，你可以这样做：

```
clearstatcache();
if (file_exists($cache)) {
    include($cache);
} else {
    // generate page
} 
```

或者，您可以执行以下操作：

```
if (file_exists($cache) && @include($cache)) {
    exit;
} else {
    // generate page
} 
```

或者更好的是，如果您要从 PHP 进程中删除缓存文件，则只需在删除文件后调用 clearstatcache()。

# windows-8 - WinRT 共享 HTML 和文件的源合同

> ID：10887225
> 
> 赞同：0
> 
> 时间：2012-06-04T19:37:30.350
> 
> 标签：windows-8, windows-runtime

我似乎无法在 DataRequestedEvent 处理程序中同时提供 HTML 内容和文件内容。

如果我提供 HTML 内容（通过 args.Request.Data.SetHtmlFormat(xxx)）和文件（通过 args.Request.Data.SetStorageItems(xxx)），共享魅力会显示“没有什么可共享的”。

任何人有任何想法或这是设计使然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:00:44.733

```
var htmlExample = "<p>Here is our store logo: <img src='images/logo.png'>.</p>";
var htmlFormat = Windows.ApplicationModel.DataTransfer.HtmlFormatHelper.createHtmlFormat(htmlExample);
request.data.setHtmlFormat(htmlFormat); 
```

完整的例子在这里[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.sethtmlformat](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datapackage.sethtmlformat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T10:01:25.980

如果生成内容的时间超过 200 毫秒，则分享魅力会说“没有什么可分享的”。您可以使用 DataProvider 避免此问题。

```
 args.Request.Data.SetDataProvider(StandardDataFormats.Html,
                    new DataProviderHandler(this.OnDeferredHTMLRequestedHandler)); 

       args.request.Data.SetDataProvider(StandardDataFormats.StorageItems,
                    new DataProviderHandler(this.OnDeferredStorageItemsRequestedHandler)); 
```

您可以在这里找到更多信息：

[如何支持拉取操作 (XAML)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh871375.aspx)

# java - 放大 Java 图形

> ID：10887226
> 
> 赞同：1
> 
> 时间：2012-06-04T19:37:32.760
> 
> 标签：java, graphics, zooming

我正在使用 java 图形制作声速曲线图。我绘制了静态图（运行程序时弹出的图），但我正在尝试实现它，如果用户单击 x 或 y 轴，那么它将放大以便您查看声速剖面更接近。我还没有图表中的声速曲线（我已经知道如何做到这一点，我只是节省了绘制它的努力，直到我弄清楚了缩放功能）。有没有人对如何使这项工作有任何想法？我见过有人尝试将仿射变换用于类似的任务，但我不确定这是正确的做法，或者我是否正确地执行此操作。要查看的特定代码是paint()、zoomIn() 和mouseClicked() 方法。想法将不胜感激！

```
public class SoundSpeedProfile extends JPanel implements MouseListener, ActionListener {

    private String title;
    private String subTitle;
    private JFrame frame;
    private Graphics g;
    .
        .
        .

    /**Draws the sound speed profile and surrounding graphics
     * @param Graphics g - graphics object
     */
        public void paint(Graphics g){
            this.g = g;
            super.paint(g); //the super knows how to draw "standard" components like squares, rectangles, circles, etc
            g.setColor(Color.DARK_GRAY);
            //1) Set up the graph the sound speed profile lives in
            //X-Axis for Speeds
            g.drawLine(100, 150, 450, 150);//the graphics display has 0,0 in the upper left corner versus the lower left corner
            int i = 120;
            int k = 1460;
            while (i<440){
                g.drawString("|", i, 155);
                g.drawString("" + k + "", i-2, 140);
                k = k + 20;
                i = i + 60;
            }
            //Y-Axis
            g.drawLine(100, 500, 100, 150);
            k= 7000;
            int j = 500;
               while (j>160){
                g.drawString("" + k, 60, j);
                g.drawString("--", 94, j);
                k = k - 1000;
                j = j - 50;
            }

            Font f1 = new Font("Serif", 4, 15);
            g.setFont(f1);
            g.drawString(this.title, 200,30);//Graph Title
            g.drawString(this.subTitle, 225, 50);
            Font f2 = new Font("Serif", 2, 15);
            g.setFont(f2);
            g.drawString("Sound Speed ", 200, 110);//x-axis label
            g.drawString("(" + spdUnits + ")", 290, 110); //Units label--taken from input array
            g.drawString("Depth", 10, 180); //y-axis label
            g.drawString("(" + depUnits + ")", 07, 200); //Units label--taken from input array
            //((Graphics2D)g).scale(20, 20);

        }
        /**Creates and shows the GUI drawing of the sound speed profile in a JFrame
         */
        private void createAndShowGUI(){
            frame = new JFrame("Sound Speed Profile");
            canvas = new Canvas();
            frame.add(canvas);
            frame.addMouseListener(this);
            frame.setBackground(Color.cyan);
            frame.setSize(600,800);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            this.setLayout(new BorderLayout());
            frame.add(this, BorderLayout.CENTER);//add the sound speed profile graphic and set a Border Layout
            //frame.pack();
            frame.setVisible(true);
        }

        /**
         * Runs test cases
         * @param args
         */
        public static void main (String [] args){

                ssp.setTitle("Sound Speed Profile 1");
                ssp.setSubtitle("June 1, 2012");
                ssp.createAndShowGUI();

                ssp.repaint(); //necessary?

        }

        @Override
        public void actionPerformed(ActionEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseClicked(MouseEvent arg0) {
            int x = arg0.getX();
            //System.out.println("x: " + x);
            int xMin = x - 50;
            int xMax = x + 50;
            int y = arg0.getY();
            //System.out.println("y: " + y);
            int yMin = y-50;
            int yMax = y + 50;
            //If the user clicked on the x-axis
            if ( 160<y &&  y<180 && 100<x && x<450){
                System.out.println("About to zoom in on the x-axis");
                zoomIn(x, y);

                //System.out.println("zooming in on the x-axis");
            } 
            //If the user clicked on the y-axis
            if (90<x && x<110 && 150 <y && y<500){
                //System.out.println("zooming in on the y-axis");
            }

        }

        public void zoomIn(int x, int y){
            AffineTransform old = ((Graphics2D) g).getTransform();
            for (double zoom = 1; zoom >=0.1; zoom=-0.1){
                  AffineTransform tr2 =AffineTransform.getTranslateInstance(-x, -y);
                    AffineTransform  tr= AffineTransform.getScaleInstance(zoom,zoom);
                    tr.concatenate(tr2); tr2=tr;
                    tr =AffineTransform.getTranslateInstance(x, y);
                    tr.concatenate(tr2); tr2=tr;
                    tr= new AffineTransform(old);
                    tr.concatenate(tr2);  tr2=tr;
                    ((Graphics2D)g).setTransform(tr2);
                    ((Graphics2D)g).drawRect(x, y, 10, 10);
                    ((Graphics2D)g).setTransform(old);

            }
        } 
```

# vba - 刷新数据时宏不运行？

> ID：10887227
> 
> 赞同：2
> 
> 时间：2012-06-04T19:37:42.910
> 
> 标签：vba, excel

我编写了以下代码来检测单元格值的变化，然后运行宏，但是由于数据连接而刷新数据时，代码不起作用。

```
Private Sub worksheet_change(ByVal target As Range)
If target.Address = "$A$2" Then

If target.Value = 1 Then

taskID = Shell("c:\imawesome.bat", vbNormalFocus)
    End If
    If target.Value = 0 Then

taskID = Shell("c:\Sender.bat", vbNormalFocus)
    End If
    End If
End Sub 
```

该代码仅在我在单元格中手动输入数据时才有效。请建议刷新数据时运行的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:42:20.650

按照这篇微软文章[KB213187](http://support.microsoft.com/kb/213187)并假设您的数据连接是一个查询表

你可以试试这个

创建一个新模块并将此代码放入其中

```
Public WithEvents qt As QueryTable

Private Sub qt_BeforeRefresh(Cancel As Boolean)

  'do your stuff here

End Sub 
```

然后在另一个模块上创建一个类

```
Dim X As New Class1

Sub Initialize_It()
  Set X.qt = Thisworkbook.Sheets(1).QueryTables(1)
End Sub 
```

并确保每次打开文档时 Initialize_It 都会运行。

请注意，此代码仅适用于每个文档一个 qquerytable，如果您有更多，则需要进行修改。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:00:04.637

如果 worksheet_change 不会触发，请尝试使用 worksheet_calculate 事件。它在任何单元格计算时执行，因此您可以对所需的单元格和（以前的）值进行测试。

# hadoop - 如何在 HDFS 中查找文件的不同片段

> ID：10887228
> 
> 赞同：0
> 
> 时间：2012-06-04T19:37:44.337
> 
> 标签：hadoop, hdfs

有没有办法找出我放在 Hdfs 中的文件片段去了哪里？我的意思是有关文件片段存储在 hdfs 中的位置的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:32:37.110

您可以使用 fsck 命令：

```
#> hadoop fsck /path/to/file -files -blocks -locations -racks 
```

这列出了文件、块及其相关元数据：

*   块名称/ID
*   块长
*   块复制
*   位置（datanodeIp：端口）
*   机架（带有关联机架 ID 的数据节点 IP 前缀）

例如：

```
/user/chris/file1.txt 123 bytes, 1 block(s): OK
0\. blk_432678432632_3426532 len=123 repl=2 [/rack1/1.2.3.4:50010, /rack2/4.5.6.7:50010] 
```

# sql - 什么情况下更新Join表在T-SQL中没有FROM语句可以工作？

> ID：10887230
> 
> 赞同：1
> 
> 时间：2012-06-04T19:37:49.853
> 
> 标签：sql, sql-server, tsql

我试图找出这两个语句有效或无效的情况。我能够在一个项目中使用声明 1 几次；但是我无法解读其中的区别。声明 1

```
UPDATE tbl1 AS a INNER JOIN tbl2 as b where a.clm = b.clm
SET
    a.clm1 = 
    CASE
        WHEN b.clm2 = 1 THEN 11
        ELSE 2
    END,
  b.clm2 = 
    CASE
        WHEN b.clm4 = 2 THEN 3
        ELSE 100
    END; 
```

相比

声明 2

```
UPDATE a
SET
a.clm1 = 
    CASE
        WHEN b.clm2 = 1 THEN 11
        ELSE 2
    END,
  b.clm2 = 
    CASE
        WHEN b.clm4 = 2 THEN 3
        ELSE 100
    END
FROM tbl1 AS a INNER JOIN tbl2 as b where a.clm = b.clm; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:54:24.783

您的语句 1 应该在编译时引发错误。[更新语法](http://msdn.microsoft.com/en-us/library/ms177523.aspx)

更新后始终必须跟被更新的对象。否则，SQL Server 将不知道连接中的哪个表是需要更新的表。

如果您参考 msdn 文章的链接，您会看到语法需要以下内容：

1.  更新 [别名或对象名称]
2.  设置语句
3.  从（如果您使用别名）
4.  哪里声明

正如 jonnyGold 所说，您的第二个示例是使用连接或任何复杂查询进行更新的理想方式。对于简单的查询，您只需执行“更新 [object] set...where...”。

# asp.net - asp:FileUpload 对象的方法？

> ID：10887231
> 
> 赞同：2
> 
> 时间：2012-06-04T19:38:00.570
> 
> 标签：asp.net, syntax, methods, file-upload

. .

在单击“浏览”并选择一个文件后，我正在尝试设置一个 <asp:FileUpload> 对象以在客户端触发。（具体来说，我希望它返回所选文件的名称。）

但是，我很难找到正确的方法。没有一个服务器端方法能做我想做的事情（无论如何我更希望它在客户端触发），而且客户端方法的各种组合（onclick、onchange 等）似乎都没有工作。

想法，有人吗？

谢谢！

**编辑：**我想我可能已经回答了我自己的问题。我最终放弃了 ASP.NET <asp:FileUpload> 工具，而只是使用了技术含量较低的 <input type="file"> 代替。方法似乎可以很好地解决这个问题。

**编辑＃2：**什么都不做。这在客户端工作得很好，但是我遇到了尝试在服务器端保存文件的问题。我猜它又回到了Square 1。

**编辑#3：**我认为这是最终的答案。我将其改回 <asp:FileUpload ID="FileUploader"> 并将 FileUploader.Attributes.Add 添加到 Page_Load。它看到了这一点并毫无问题地开火。当然，现在我遇到了“预期对象”错误（因为它调用的脚本在代码之后——啊，处理 JavaScript 顺序的乐趣）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:40:24.900

正如我昨天在编辑中提到的那样——答案最终是在 Page_Load 中添加属性。假设我的 FileUpload ID 是“FileUploader”。我添加了**FileUploader.Attributes.Add("onchange","CallThisCode();")**。那成功了！

现在我只需要弄清楚如何让它正确调用 JavaScript —— 一个完全不同的问题！:-)

# ios - 崩溃以从 ModalView 执行 popover segue

> ID：10887233
> 
> 赞同：1
> 
> 时间：2012-06-04T19:38:16.397
> 
> 标签：ios, xcode, ios5, storyboard, popover

我需要从 ModalView 中的子视图打开一个弹出窗口。这些子视图使用 [self.storyboard instatiateViewControllerWithIdentifier:identifier] 在 vi​​ewDidLoad 的 ModalView 添加

当我单击打开一个弹出窗口时，应用程序退出时没有任何有关崩溃的信息。

可以在此处下载出现此错误的示例项目 (https://www.dropbox.com/s/mjpaqk6xwt86dbd/PopoverTest.zip)

我正在使用 xCode 4.3.1 和 iOS SDK 5.0 和故事板。

谢谢

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:10:02.127

在 viewDidLoad 中，您使用 实例化了一堆视图控制器`instantiateViewControllerWithIdentifier:`，但在此之后它们不会被保留或引用。我很确定 ARC 会在 viewDidLoad 结束时为您释放它们，这会导致崩溃。如果它不这样做，那将是一个泄漏。

一种解决方案是将这些视图控制器存储在一个数组中，并在 viewDidUnload 上释放它。

# javascript - 在javascript游戏中更改播放器

> ID：10887235
> 
> 赞同：-3
> 
> 时间：2012-06-04T19:36:39.427
> 
> 标签：javascript

游戏：onClick startbutton > mathrandom 为第一个开始游戏的玩家。4张图片：其中2张> player1和player2。另一个 2> 玩家回合。

需要帮助：点击按钮 > 下一个玩家回合

```
function game(){
    var PlayerTurn;
    PlayerTurn=parseInt(Math.random()*2);   
    if(PlayerTurn==0){PlayerTurn=1;window.document.player1.src="Cache/Player3.PNG";} 
    else{PlayerTurn=0;window.document.player2.src="Cache/Player4.PNG";} 
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:44:40.243

```
function game(){
    var playerTurn;
    if (Math.random()>0.5){
        playerTurn=1;
       window.document.player1.src="Cache/Player3.PNG";
    } else {
        playerTurn=0;
        window.document.player2.src="Cache/Player4.PNG";
    }
} 
```

# osgi - OSGi 是适合我们的方法吗？

> ID：10887241
> 
> 赞同：1
> 
> 时间：2012-06-04T19:38:40.530
> 
> 标签：osgi

我们必须同时支持至少 2 个版本的功能。它可以在 web 端或服务中，这意味着我们将在 web 中为不同的用户提供不同的布局，或者对于不同的用户，服务实现将是不同的。我们应该能够根据用户的登录将用户路由到正确版本的 Web 应用程序/捆绑包。

我们想到了这样的事情（请在此处查看大图[http://i.stack.imgur.com/6NxhF.png](https://i.stack.imgur.com/6NxhF.png)）。

![在此处输入图像描述](../Images/faedb31f9b05f292ddd3444bd4e5181e.png)

是否可以将多个 Web 应用程序/捆绑包部署为一个 EBA？如果是，是否可以在这些网络应用程序/捆绑包之间共享会话？由于我们是 OSGi 的新手，期待对我们选择的设计提出任何建议。感谢对此的任何帮助/建议。

谢谢，

呸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:04:36.663

OSGi 可能适合您。在我的上一个项目中，我们采用了与您的方法等效的方法。我们已经使用 OSGi 开发了一个后端系统，其中我们有一个后端连接器作为想要使用后端功能的不同其他捆绑包的起点。在您的情况下，后端是您的共享包上下文。然后，我们有一个 SOAP Web 服务、几个 servlet 和网页（也应该是基于 OSGi 的），它们将请求发送到后端连接器。当然，您可以直接将请求发送到像您的经理这样的内部捆绑包，但我会提出分层架构。如果是共享会话：问题是哪个组件负责处理会话？如果您不仅希望在您的环境中拥有 Web 应用程序，则可以通过数据库或内存方法管理会话。一个“会话管理器” 然后，共享上下文中的 bundle 负责创建用户会话（用于标识的 sessionid），关联 sessionid 和临时数据，获取 sessionid 的数据并删除 sessionid 的临时数据。使用这种方法，每个客户端请求都应该发送 sessionid，这将在您的共享上下文中的某处进行验证。然后你不需要网络会话。创建的 sessionid 可以存储在请求/响应的特定 HTTP 标头条目中以进行通信。但这只是一种方法。然后你不需要网络会话。创建的 sessionid 可以存储在请求/响应的特定 HTTP 标头条目中以进行通信。但这只是一种方法。然后你不需要网络会话。创建的 sessionid 可以存储在请求/响应的特定 HTTP 标头条目中以进行通信。但这只是一种方法。

希望以上所有内容对您有意义。如果不给我发电子邮件，我们可以更深入地讨论它。:) 有时图片会表达更多的句子，如果你愿意，我可以画一些。;)

问候。基督教

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:43:53.030

是的，OSGi 可以在这方面为您提供很多帮助。

您选择的架构看起来不错，我建议也许还按照 Christian 的建议添加一个“SessionManager”。

关于您需要的 OSGi 细节：

如果您有两个不同版本的“服务”包，它们打包在同一个 Java 包中，那么在清单中导出它们时，您绝对应该定义包版本：

在服务 V1 中：

```
Export-Package: com.acme.foo;version="1.24" 
```

在服务 V2 中

```
Export-Package: com.acme.foo;version="2.3" 
```

然后，您可以通过定义限制来控制在 Web 包中导入哪个包，例如整个间隔：

```
Import-Package: com.acme.foo;version="[1.23, 2)" 
```

这样做的美妙之处在于，由于 OSGi 的模块化和捆绑包的单独类加载器，com.acme.foo 的两个版本都可以在同一个系统中安装和使用。您无法在“通常的”Java 设置中实现这一点，因为只有一个类加载器，并且包的一个版本会影响另一个版本。

[例如，您可以在此处](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/index.html)查看 OSGi 演示和示例

这是关于包和库的。现在关于实际的服务对象：

您还可以在 OSGi 服务注册表中发布同一服务的两个版本。区分两者的最简单方法是在注册服务时使用服务属性：

```
Hashtable properties = new Hashtable();
properties.put( "service_flavour",
"advanced" );
context.registerService(
SomeService.class.getName(),
this, properties ); 
```

然后，您可以使用这些道具在 Web 包中查找正确的服务：

```
ServiceTracker someServiceTracker = new ServiceTracker(bc, "(&(objectclass="+SomeService.class.getName()+")(service_flavour=advanced))", null);
someServiceTracker.open(); 
```

关于您关于 EBA 的问题-我不确定您的意思。您可以在任何 OSGi 框架中安装任意数量的包，并且它们都可以在 OSGi HTTP 服务中以不同的别名注册。只要别名之间没有冲突就可以了。如果需要，您还可以拥有一个主 servlet，并将不同页面的处理分发给其他包，而无需将它们也注册为 servlet - 例如，您的主 Web servlet 可以在 OSGi 服务注册表中查找它们，然后分发工作。这完全取决于您是否期望更多的应用程序逻辑/计算等，或者更多的是关于一些现有数据的格式化和表示。

希望这可以帮助。

# url - Kohana 路由外部 url

> ID：10887243
> 
> 赞同：0
> 
> 时间：2012-06-04T19:38:48.290
> 
> 标签：url, routing, kohana

我想在我的应用程序中有这样的网址 [http://website.com/click/http://google.com](http://website.com/click/http://google.com)

和

```
Route::set('click', 'click(/<action>(/<link>))', array('link' =>'[\w\d-_/:]+'))
        ->defaults(array(
        'controller' => 'admanager',
        'action' => 'index',
    )); 
```

但它不适用于 http:// 但在从 url 中省略 http:// 时有效

请指教，谢谢阿巴斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:56:21.013

你需要对它进行base64编码。将原始 url 放在 url 中（看到问题了吗？:) 永远不会很好。

# asp.net - 从 HttpServerUtility.Execute 调用 MVC 操作时出现错误“执行子请求”

> ID：10887246
> 
> 赞同：2
> 
> 时间：2012-06-04T19:39:00.343
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我们最近开始从 webforms 迁移到 ASP.NET MVC 3。有一个 PDF 导出实用程序，用于获取页面路径 (url) 并使用 HttpServerUtility.Execute 方法呈现 html。 [http://msdn.microsoft.com/en-us/library/k8e2dw5s](http://msdn.microsoft.com/en-us/library/k8e2dw5s)

当请求的 url 是 web 表单时，这很好用，但是当它是 MVC 操作时，我们只会收到错误“执行 /MyControllerName/MethodName 的子请求时出错。”。在调试我们的 IDependencyResolver 类和控制器构造函数时，永远不会受到影响，因此失败的不是操作。

我们做错了什么？是否有另一种方法可以从当前上下文发出服务器端请求以获取 MVC 操作的 html 输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:42:25.430

你有没有看过这个：

[http://connect.microsoft.com/VisualStudio/feedback/details/102401/httpserverutility-throws-httpexception-in-attempt-to-transfer-from-httphandler-httpmodule-to-another-httphandler](http://connect.microsoft.com/VisualStudio/feedback/details/102401/httpserverutility-throws-httpexception-in-attempt-to-transfer-from-httphandler-httpmodule-to-another-httphandler)

# javascript - 函数链

> ID：10887247
> 
> 赞同：2
> 
> 时间：2012-06-04T19:39:01.040
> 
> 标签：javascript, d3.js

我正在努力理解这段 JavaScript 代码是如何工作的。我正在学习 JS，之前没有接触过动态的函数式语言。因此，我以位过程、分层顺序可视化函数调用。使用 d3.js，可以绘制 svg 元素，如此[处所述](http://alignedleft.com/tutorials/d3/using-your-data/)

* * *

```
var dataset = [ 5, 10, 15, 20, 25 ];

d3.select("body").selectAll("p")
    .data(dataset)
    .enter()
    .append("p")
    .text("New paragraph!"); 
```

让我们更改最后一行：

```
.text(function(d) { return d; }); 
```

在此演示页面上查看新代码的作用。

哇！我们使用我们的数据来填充每个段落的内容，这一切都归功于 data() 方法的魔力。您会看到，当将方法链接在一起时，在您调用 data() 之后的任何时候，您都可以创建一个接受 d 作为输入的匿名函数。给定当前元素，神奇的 data() 方法可确保将 d 设置为原始数据集中的相应值。

* * *

上面提到的这个魔法是我无法理解的。"d" 不是全局变量，就像我换成另一个 (c) 名称一样，它仍然有效。因此，该`data`方法可能正在设置匿名 fn 的值。

但是，通常（我的阅读有限）链接是可能的，因为当前函数返回一个对象，可以在该对象上调用下一个方法。在上述情况下，`data`方法如何知道用户是否传递了文本（“新段落！”），否则将数据传递给匿名 fn。怀疑是，该`text`方法已经下线并且`data()`已经执行。数据如何传递给匿名函数？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:53:47.457

深入研究 d3.js[内部](http://alignedleft.com/content/15.tutorials/10.d3/d3/d3.js)显示了以下`text`函数结果：

```
d3_selectionPrototype.text = function(value) {
  return arguments.length < 1
      ? this.node().textContent : this.each(typeof value === "function"
      ? function() { var v = value.apply(this, arguments); this.textContent = v == null ? "" : v; } : value == null
      ? function() { this.textContent = ""; }
      : function() { this.textContent = value; });
}; 
```

如果提供的参数是函数，则执行以下代码：

```
this.each(function() {
    var v = value.apply(this, arguments);  // executing function provided
    this.textContent = v == null ? "" : v;
}); 
```

函数`each`声明为：

```
d3_selectionPrototype.each = function(callback) {
  for (var j = -1, m = this.length; ++j < m;) {
    for (var group = this[j], i = -1, n = group.length; ++i < n;) {
      var node = group[i];
      if (node) callback.call(node, node.__data__, i, j); // this is the line you are interested in
    }
  }
  return this;
}; 
```

所以在每次调用时，它都会提供一个来自 的元素`this`。而且，归根结底，它`this`是由`data`函数调用填充的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:52:24.773

好吧，我以前从未使用过d3，但这就是我所理解的。

`d`是数据对象（我会调用它`data`而不是`d`在`data()`方法中设置。

那么该`text()`方法有什么作用呢？它会调用函数并使用它的输出吗，如下所示：

```
function text (callback) {
  var theText;
  if (typeof callback === "function") {
    theText = callback(dataset);
  } else {
    theText = callback;
  }
  // does something more
} 
```

因此，如果回调是一个函数，则调用它，并将其返回值用作文本。

然后，我的猜测是，如果函数是一个数组，它将为数组中的每个元素调用 text 方法。

像这样的东西...

```
function text(callback) {
  var theText;
  if (typeof callback === "function") {
    theText = callback(dataset);
  } else {
    theText = callback;
  }
  if (theText instanceof Array) { // this is not the best way to check if an object is an array, I'll come back to this later. I'm sorry.
    for (var i=0, len=theText.length; i<len; i++) {
      text(theText[i]);
    }
  } else {
    // do something else
  }
  // do something more
} 
```

请考虑到这将是真正发生的事情的一个非常简单的版本。

如果还不够清楚，请告诉我。

# xml - 在 Perl 中输出完整的 xml (XML::Xpath)

> ID：10887250
> 
> 赞同：2
> 
> 时间：2012-06-04T19:39:05.267
> 
> 标签：xml, perl

我正在查看的一些 Perl 代码正在从方法调用返回 xml 数据。如何查看此 xml 数据？

**代码：**

```
print "$xml"; 
```

**我得到什么：**

```
XML::XPath=HASH(0xa408dbc) 
```

**我想要什么：** 实际的xml内容，即：

```
<sometag>
  <sometag2/>
</sometag> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:02:51.990

我相信你想要一个

```
print $xml->find('/')->string_value;
print $xml->findnodes_as_string('/'); 
```

也就是说，找到`/`XPath 对象的根 (' ') 节点，并将其作为字符串打印出来。

# javascript - 取消方法内默认的onbefoarunload弹出消息

> ID：10887251
> 
> 赞同：2
> 
> 时间：2012-06-04T19:39:05.460
> 
> 标签：javascript, html

我有以下代码，我的问题是，有没有办法可以从方法调用内部取消 onbeforeunload 自定义弹出窗口？如果是 Firefox，我想显示我自己的自定义消息，如果用户按下取消，我不想显示默认消息。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var clicked = false;

function copyText()
{
    var span = document.getElementById('sp');
    if(clicked == false)
    {   
        clicked = true;
        span.appendChild( document.createTextNode("clicked") );
    }
    else
    {
        clicked = false;
        span.removeChild( span.firstChild );
    }
}

window.onbeforeunload = function () { 

if(clicked == true)
return ; 

else 
{
if(navigator.userAgent.indexOf("Firefox")!=-1)
{ 
if(confirm("Are you sure you want to close the window without submitting the documents?")){
          self.close();
          return; // I want to not call the custom pop up here 
    }
}
    return "Are you sure you want to close the window without submitting the documents?";

}
};
//}

</script>
</head>
<!--<body onunload="confirmMe()>-->
<body>

<button onclick="copyText()">Click!</button>
<br>
<span style="color:lightblue" id="sp"></span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:04:01.063

您无法从函数内部取消 onbeforunload 事件。但是如果用户不想关闭页面，以下将显示默认弹出窗口，如果用户想留在页面上，它只会在 Firefox 中发生。

```
window.onbeforeunload = function () { 

if(clicked == false) 
{
    if(navigator.userAgent.indexOf("Firefox")!=-1)
    { 
        if(confirm("Are you sure you want to close the window without submitting the documents ?")){
                self.close();   
                return;   
        }

    }
   return "Are you sure you want to close the window without submitting the documents?";
}

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:54:58.550

这是我正在使用的代码：

```
window.onbeforeunload = function (e) { 
    if (clicked != true) {
        e = e || window.event;
        if (e) {
            e.returnValue = 'Are you sure you want to close the window without submitting the documents?';
        }
        return 'Are you sure you want to close the window without submitting the documents?';
    }
} 
```

# jquery - 数据由 JSON 加载的 Highcharts 中的无效日期

> ID：10887253
> 
> 赞同：1
> 
> 时间：2012-06-04T19:39:15.740
> 
> 标签：jquery, json, highcharts

我似乎无法让 Highcharts 中的 xAxis 显示通过 JSON 加载的数据的日期。此外，当我将鼠标悬停在数据点上时，标签会显示“日期无效”。

这是用于生成数据的 PHP 代码：

```
function fetchLineChart() {
    $fetchData = $this->db->query("SELECT download, upload, date FROM speed_entries ORDER BY date DESC");

    while ($data = $fetchData->fetch()) {
        $date = date("Y, m, d", strtotime($data['date']));
        $downloadData[] = array('Date.UTC(' . $date . ')', (float)$data['download']);
        $uploadData[] = array('Date.UTC(' . $date . ')', (float)$data['upload']);
    }
    $result = array('download' => $downloadData, 'upload' => $uploadData);
    echo json_encode($result);
} 
```

这是图表的jQuery

```
$(document).ready(function() {
                var options = {
                    chart: {
                        renderTo: 'lineChart',
                        type: 'line'
                    },
                    title: {
                        text: 'Download / Upload Results'
                    },
                    subtitle: {
                        text: 'Source: Speedtest.net'
                    },
                    yAxis: {
                            title: {
                                    text: 'Speed'
                            },
                            plotLines: [{
                                    value: 0,
                                    width: 1,
                                    color: '#808080'
                            }]
                    },
                    xAxis: {
                        type: 'datetime'
                     },
                    series: [{
                        name: 'Download',
                        lineWidth: 2,
                        marker: {
                            radius: 2
                        },
                        data: []
                    }, {
                        name: 'Upload',
                        data: []
                    }]
                };

                $.getJSON('class.speed.php?mode=lineChart', null, function(json) {
                    var downloads = json.download;
                    var uploads = json.upload;

                    options.series[0].data = downloads;
                    options.series[1].data = uploads;

                    chart = new Highcharts.Chart(options);
                });
            }); 
```

其他一切正常，数据线显示正确。只是无法弄清楚如何使日期生效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:15:33.493

我在这里可能错了，但是通过将 xAxis 设置为“日期时间”，您告诉 Highcharts 他们将以毫秒（即整数）的形式提供日期，但您传递的是字符串。正如Linger 已经建议的那样，您为什么不直接在您的php 函数中生成毫秒？

```
$miliseconds = strtotime($data['date']) * 1000;
$downloadData[] = array($miliseconds, (float)$data['download']) 
```

# python-3.x - Python 3.2 使用子进程模块

> ID：10887254
> 
> 赞同：0
> 
> 时间：2012-06-04T19:39:15.903
> 
> 标签：python-3.x

我使用 Python 3.2 和 Eclipse 经典作为 IDE。我正在尝试使用如下所示的命令将 rawinput 中的用户添加到现有组 North_AMERICAS。我测试了 cmd，它完成了它的工作。现在对于 rawinput 中的所有用户，我想使用 python 脚本将它们添加到组中。下面是我的代码和错误消息。你能告诉我我错过了什么吗？谢谢。

```
# coding=UTF-8
import subprocess
def AddUsers():
 rawinput = ('corp\\arrigh', 'corp\\banjar', 'corp\\bicknk', 'corp\\BINDEM')
for user in rawinput:
 rs = subprocess.call("c:/dicfg -remote admin:admin@myserver:2130 add user -user "+user+" -groups North_AMERICAS")
 print(user)
AddUsers() 
```

错误：

```
Traceback (most recent call last):
  File "C:\eclipse\Eclipse\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydev_runfiles.py", line 307, in __get_module_from_str
    mod = __import__(modname)
  File "C:/Documents and Settings/user21/Shworkspace/PYTHON TEST\PYTEST.py", line 5, in <module>
    for user in rawinput:
NameError: name 'rawinput' is not defined
ERROR: Module: PYTEST could not be imported (file: C:\Documents and Settings\user21\Shworkspace\PYTHON TEST\PYTEST.py). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:57:42.893

根据评论，这是一个缩进问题：`for`应该在上一行的`rawinput`.

# c - 遍历链表导致分段错误

> ID：10887260
> 
> 赞同：0
> 
> 时间：2012-06-04T19:39:37.047
> 
> 标签：c, list

我刚刚写了一个简单的链表，但是当通过列表迭代时`add()`，`display()`程序段错误。

```
#include <stdlib.h>
#include <stdio.h>

typedef struct entry {
    void *value;
    struct entry *next;
} entry;

typedef struct list {
    entry *items;
} list;

list *create(void) {
    list *l;

    l = malloc (sizeof(list));
    l->items = malloc(sizeof(entry*));
    l->items->next = NULL;

    return l;
}

void add(list *l, void *value) {
    entry *temp, *last, *new;

    for (temp = l->items; temp != NULL; temp = temp->next) {
        last = temp;
    }

    new = malloc(sizeof(*new));

    new->value = value;
    new->next = NULL;

    last->next = new;
}

void display(list *l) {
    entry *temp;

    for (temp = l->items; temp != NULL; temp = temp->next) {
        printf("%s\n", temp->value);
    }
}

int main(void) {
    list *l = create();

    add(l, "item1");
    add(l, "item2");
    add(l, "item3");
    add(l, "item4");

    display(l);

    return 0;
} 
```

我已经在几台机器上测试了代码，它在一些机器上工作，在其他机器上不起作用。我对错误的来源一无所知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T19:44:01.993

这没有分配足够的空间：

```
l->items = malloc(sizeof(entry*)); 
```

应该是`sizeof(entry)`，或者如果您想遵循在其他地方使用的模式：

```
l->items = malloc(sizeof(*l->items)); 
```

结果，您当前正在践踏记忆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T19:52:52.713

除了传递给`malloc`提到的 FatalError 的错误大小之外，您还为`l->items`

```
list *create(void) {
    list *l;

    l = malloc (sizeof(list));
    l->items = malloc(sizeof(entry*));
    l->items->next = NULL;

    return l;
} 
```

但永远不要设置`l->items->value`任何东西，所以它是一个未初始化的指针，当您尝试在打印时取消引用它时

```
void display(list *l) {
    entry *temp;

    for (temp = l->items; temp != NULL; temp = temp->next) {
        printf("%s\n", temp->value);
    }
} 
```

在循环的第一次迭代中，即使分配大小不足之前没有导致段错误，也很容易导致段错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T19:51:24.960

FatalError 已经发现了问题并发布了解决方案。我想补充一点，比提出这样一个特定问题更好的方法是调试您的代码。

`valgrind`是一个允许调试内存管理的 Linux 工具。您需要做的就是在您的应用程序中运行该工具并在其输出中查找错误。

如果你使用“./myapp”运行你的应用程序，你只需要运行：

```
# valgrind -v --leak-check=full --show-reachable=yes ./myapp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:05:45.000

为了证明您不需要列表结构，因为它只带有一个“头”指针（我将原始条目重命名为 llist，end 删除了列表和 typedef）：

```
#include <stdlib.h>
#include <stdio.h>

struct llist {
    char *value;
    struct llist *next;
};

void add(struct llist **ll, void *value) {

      /* find the end of the list;
      ** keeping a pointer to the (final NULL) pointer.
      ** If this function is called with the first argument pointing to
      ** a NULL pointer (the empty list),
      ** this loop will iterate zero times.
      */
    for ( ; *ll != NULL; ll = &(*ll)->next) {;}

    *ll = malloc(sizeof(**ll));

    (*ll)->value = value;
    (*ll)->next = NULL;

}

void display(struct llist *l) {

    for (; l != NULL; l = l->next) {
        printf("%s\n", l->value);
    }
}

int main(void) {
    struct llist *l = NULL;

    add(&l, "item1");
    add(&l, "item2");
    add(&l, "item3");
    add(&l, "item4");

    display(l);

    return 0;
} 
```

# php - joomla中的Ajax分页

> ID：10887265
> 
> 赞同：3
> 
> 时间：2012-06-04T19:39:47.327
> 
> 标签：php, ajax, joomla

我希望在 joomla 中实现一个基于 ajax 的分页系统。以前有人试过吗？和指针或建议？

使用 joomla，您无法通过“获取”离开网址。这禁止几乎所有分页类工作，因为大多数使用 url 修改工作（通过 get）。因此，我的替代方案是 post 或 ajax 分页，而 ajax 似乎更容易完成，并且会有更好看的结果。

我试过的任何教程都没有那么好。我不知道这是否真的很重要，但我正在使用 MySQLi。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:23:53.560

上一个答案中建议的 AddFullAJAX 插件默认尝试使您的站点“fullajax'd”。但这可以简单地覆盖。这里有几个简单的步骤来配置这个插件以启用 AJAX（正确的 AHAH ;)）分页：

1.  将“启用职位更新”设置为“使用 fullajax_tmpl”（也不要忘记安装此模板）
2.  在“内容 CSS id”需要设置内容 id 放置你的内容
3.  在“高级选项”中“FullAjax 的参数”字段需要全部删除，然后放下一段代码：

```
function wrapPager(){
  $$('div.pagination a').addEvent('click', function(){
    hax({url:this.href, id:fullAjaxId,nohistory:1, onload:wrapPager});
    return false;
 });
}
window.addEvent('domready', function() {
  wrapPager()
}) 
```

同样你可以不用插件，只需在你的模板中下载并连接[FullAJAX](https://github.com/Fedik/FullAJAX)库。然后使用下一个示例：

```
function wrapPager(){
  $$('div.pagination a').addEvent('click', function(){
    var url = this.href + '&tmpl=component'
    hax({url:url, id:'id-of-block-where-a-content',nohistory:1, onload:wrapPager});
    return false;
 });
}
window.addEvent('domready', function() {
  wrapPager()
}) 
```

更多关于`hax()`可以在[wiki页面上找到](https://github.com/Fedik/FullAJAX/wiki/HAX---HtmlAjaX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:34:44.943

我认为你应该然后编写一个组件/插件并编辑 AJAX 使用的模板......因为这很难实现并且消耗大量时间，你为什么不使用 Joomla 2.5 并使用这个伟大的插件：[http： //extensions.joomla.org/extensions/core-enhancements/performance/scripts/13293](http://extensions.joomla.org/extensions/core-enhancements/performance/scripts/13293)

这里有一个小演示：http: [//getsite.org.ua/jdemo/](http://getsite.org.ua/jdemo/)

**PS**：使用的模块/组件可能存在一些兼容性问题，因此由您来搜索/解决它们:)

# android - NFC 中的 AAR 记录：有效载荷在哪里？

> ID：10887275
> 
> 赞同：8
> 
> 时间：2012-06-04T19:40:52.257
> 
> 标签：android, nfc, ndef, android-applicationrecord

根据[这个答案](https://stackoverflow.com/a/9235624/115145)，并通过测试验证，当您使用 Android Beam 推送包含 AAR 记录的 NFC 消息时，接收设备将为AAR 中指定的应用程序启动`MAIN`/活动。`LAUNCHER`

那`MAIN`/`LAUNCHER` `Intent`不包含`NfcAdapter.EXTRA_NDEF_MESSAGES`额外的。因此，如果您使用 AAR，我们费尽心思传输过来的数据似乎会丢失。

在这种情况下，是否有某种方法可以获取触发应用程序启动的 NFC 消息？

如果答案是“否”，那么 AAR 的用例是什么？当接收设备上不存在所需的应用程序（打开 Play 商店）时，我可以看到它可能有用的地方，但是一旦安装了应用程序，AAR 就会阻止任何将数据从一台设备传递到另一台设备的尝试，即有点像NFC背后的一点。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T12:50:45.653

冒着回答我自己的问题的风险，让这个工作（显然）的一个方法是：

*   让 Beam 发送者使用带有两个 NFC 记录的 NFC 消息，第一个包含用于唯一 MIME 类型的内容，第二个是 AAR

*   让 Beam 接收者有一个`<intent-filter>`响应第一个 NFC 记录的活动，例如通过：

    ```
     <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>

            <category android:name="android.intent.category.DEFAULT"/>

            <data android:mimeType="application/vnd.commonsware.webbeam"/>
        </intent-filter> 
    ```

如果应用程序已经存在，`NDEF_DISCOVERED` `Intent`将被使用，接收者可以拿起 NFC 消息并从初始记录中提取数据。如果应用程序不存在，AAR 将启动，调出 Play 商店（无论您的应用程序是否通过 Play 商店分发）。

[这是开发人员网站上的 Android Beam 示例中](http://developer.android.com/guide/topics/nfc/nfc.html#p2p)显示的配方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:16:47.713

从查看文档看来，用例似乎保证您的应用程序是从 NFC 事件启动的。第二个用例基本上为手机提供了一种方法来了解它需要哪个应用程序来读取标签。

几个问题如果您使用两条记录：第一条正常，第二条 AAR 活动如何启动？我希望您会通过标签调度意图开始。AAR 意图是否包含任何让您获得标签的内容？我想你可以手动

# twitter - 检查 Twitter 流媒体访问级别

> ID：10887280
> 
> 赞同：0
> 
> 时间：2012-06-04T19:41:18.220
> 
> 标签：twitter, twitter-oauth

我有一个访问级别较高的 twitter 帐户（15% 的 firehose 和额外的关键字），但我在使用令牌时遇到了一些问题。我现在正在尝试解决它们，但无法确定是否正在使用提升的速率限制。

有什么好方法可以测试我是否收到了这笔款项？甚至是登录和检查的地方？登录[dev.twitter.com](http://dev.twitter.com)站点似乎没有提供任何有关访问级别的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:50:13.950

只需创建一个包含 400 多个关键字的过滤器流。如果可以，那么您的帐户完全没问题。

顺便说一句，您介意我问您是如何获得该提升访问级别的帐户的吗？我的应用程序确实需要这种帐户来跟踪 400 多个关键字，但我不知道如何获得它。

非常感谢。

# c# - 使用 LINQ 根据特定条件在列表中查找列表项的位置

> ID：10887290
> 
> 赞同：1
> 
> 时间：2012-06-04T19:42:06.493
> 
> 标签：c#, linq, linq-expressions

类似于[linq find in which position is my object in List](https://stackoverflow.com/questions/8209197/linq-find-in-which-position-is-my-object-in-list)，除了他接受的答案是在对象级别进行评估。

说我有

```
public interface IFoo{
    string text {get;set;}
    int number {get;set;}
} 
```

和

```
public class Foo : IFoo{
    public string text {get;set;}
    public int number {get;set;}
} 
```

现在我有一个`IFoo`这样的列表集合：

```
public IList<IFoo> Foos; 
```

`Foos`我想编写一个基于属性值和/或值（例如，`text`或`number`在这种情况下）带回索引的方法，以便我可以执行以下操作：

```
var fooIndexes = Foos.GetIndexes( f => f.text == "foo" && f.number == 8 ); 
```

我该怎么写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:46:12.000

你可以使用类似的东西：

```
public static IEnumerable<int> GetIndices<T>(this IEnumerable<T> items, Func<T, bool> predicate)
{
    return items.Select( (item, index) => new { Item = item, Index = index })
                     .Where(p => predicate(p.Item))
                     .Select(p => p.Index);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:57:36.333

这是非 LINQ 实现：

```
public static IEnumerable<int> GetIndexes<T>(this IEnumerable<T> items, 
    Func<T, bool> predicate)
{
    int i = 0;

    foreach (T item in items)
    {
       if (predicate(item))
           yield return i;

       i++;
    }
} 
```

在这种情况下，这可能会更有效，因为它避免了匿名类型初始化。

# javascript - JavaScript中的全局变量到局部变量

> ID：10887291
> 
> 赞同：2
> 
> 时间：2012-06-04T19:42:15.450
> 
> 标签：javascript, variables, global, local

我知道全局变量是在函数外部声明时创建的（[比如 W3Schools](https://en.wikipedia.org/wiki/W3Schools)）。

如果我创建一个全局变量并在函数中编辑它，它会变成本地变量吗？函数给出的新值是否成为全局值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T19:51:45.623

一般来说，不，编辑全局不会使其成为本地：

```
var myglob = 5;
function incGlob() {
    myglob = myglob + 1;
}

incGlob();
console.log(myglob); // is 6 now 
```

但是，如果您将全局变量作为参数传递，则该参数是本地副本：

```
var myglob = 5;
function incArg(myloc) {
    myloc = myloc + 1;
}

incArg(myglob);
console.log(myglob); // is still 5 
```

请注意，对象是通过引用传递的，因此编辑参数变量的成员变量会更改传入的原始对象的成员变量：

```
var myglob = { foo:5 };
function editLoc(myloc) {
    myloc.foo = 6;
}

editLoc(myglob);
console.log(myglob.foo); // foo is 6 now 
```

最后，请注意`editLoc`，上面的局部变量只是一个参考。如果我们试图覆盖整个对象（而不是一个成员变量），函数只会丢失对原始对象的引用：

```
var myglob = { foo:5 };
function clobberLoc(myloc) {
    myloc = { bar:7 };
}

clobberLoc(myglob);
console.log(myglob.foo); // myglob is unchanged...
// ...because clobberLoc didn't alter the object,
// it just overwrote its reference to the object stored in myglob 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T19:44:25.130

不，编辑全局变量不会改变变量的范围。分配的新值成为全局值。

[http://jsfiddle.net/RtnaB/](http://jsfiddle.net/RtnaB/)

```
myGlobal = 'foo'; // notice no 'var' keyword, implicitly global (DON'T DO THIS)

console.log(myGlobal); // logs 'foo'

var myFunc = function () {
    myGlobal = 'bar';
};

myFunc();

console.log(myGlobal); // logs 'bar' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T19:44:13.163

是的。

`var`如果您使用关键字在函数内*声明*它，您只会创建一个局部变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T19:44:16.667

新值成为全局值。

# linux - 如何释放套接字？

> ID：10887295
> 
> 赞同：0
> 
> 时间：2012-06-04T19:42:34.700
> 
> 标签：linux, sockets, tcp, pthreads

我正在制作一个小型 tcp 服务器，它通过线程处理许多请求。当我的服务器关闭时，他会留下未关闭的套接字。如何在新启动服务器时自动关闭它们或以某种方式释放它们？插座的数量很大，我不想手动管理它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:48:30.637

当我上次处理套接字时，我曾经做的是启动各个线程，每个线程都管理一个套接字，然后分别关闭它们，因此每个线程中的每个变量都包含套接字号。可以使用 close(s) 关闭套接字；其中 s 是套接字。即使当您关闭程序时，套接字也会由运行时释放，但最好关闭套接字以便其他程序可以使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:02:46.320

套接字是在哪里创建的？在新线程内还是在线程启动之前？如果它在线程内，您可以考虑使用 pthread_cleanup_push() 安装一个处理程序，该处理程序在线程退出时关闭套接字（如果它仍然打开）。

# c++ - 反序列化插件中定义的类

> ID：10887298
> 
> 赞同：-1
> 
> 时间：2012-06-04T19:42:56.387
> 
> 标签：c++, plugins, deserialization

在我的过程中，我加载插件，从中获取我在其余过程中使用的对象。
这个类继承自`MyInterface`所以序列化它不是什么大问题。
我只是`virtual const unsigned char* Serialize()`在其中实现一个方法。我不知道如何反序列化它，因为反序列化方法应该是静态的，我不能这样做。
我必须从插件 DLL 公开反序列化方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:52:35.790

是否需要`Deserialize`在 DLL 的导出中公开函数取决于应用程序的设计。如果您需要客户端调用该`Deserialize`函数，则需要将其公开。

就其工作方式而言，需要具有与[工厂方法](http://en.wikibooks.org/wiki/C++_Programming/Code/Design_Patterns#Factory)`Deserialize`相同的基本架构。除了对象中的所有好东西之外，序列化的数据还需要指示它所代表的对象类型。否则，调用者需要知道要反序列化哪种对象，但这听起来在您的场景中是不可能或不可取的。如果您将对象类型存储为序列化数据的一部分，那么您可以在您的方法中使用它，并构造正确类型的对象。`Deserialize``switch``Deserialize`

# jetty - Jetty - 配置 Gerrit 时发送 403 而不是 401 的基本身份验证

> ID：10887299
> 
> 赞同：3
> 
> 时间：2012-06-04T19:43:04.700
> 
> 标签：jetty, basic-authentication, http-authentication, gerrit

我有一个战争文件（特别是[gerrit.war](http://code.google.com/p/gerrit/)），它期望容器（特别是码头）[处理基本的 HTTP 身份验证并将该信息传递给 webapp](http://gerrit.rockbox.org/r/Documentation/config-sso.html#_http_basic_digest_authentication)。所以我无权访问代码或 web.xml 文件。

我按照[这些说明](https://stackoverflow.com/a/5332049/295797)使用退出码头配置将 gerrit 包装在一个领域中，但是当我访问基本 URL (/login/) 时，我收到 403 (Forbidden) 错误。我希望得到一个 401，它会提示我的浏览器要求提供凭据（不是吗？）

我可以发布我的文件，但我没有更改上面示例中的任何内容。让我知道它是否会有所帮助，但是..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:56:35.487

可能有很多方法可以发生这种情况。在我的情况下，它发生是因为我的约束没有角色集。此代码生成 403：

```
private void secureServlet(ServletContextHandler handler) {
    ConstraintSecurityHandler security = new ConstraintSecurityHandler();
    security.setRealmName(this.realm);
    security.setAuthenticator(new BasicAuthenticator());
    security.setLoginService(new WebLoginService(this.engine));

    Constraint constraint = new Constraint();
    constraint.setName(Constraint.__BASIC_AUTH);
    //constraint.setRoles(new String[]{"user"});
    constraint.setAuthenticate(true);

    ConstraintMapping mapping = new ConstraintMapping();
    mapping.setConstraint(constraint);
    mapping.setPathSpec("/*");

    security.addConstraintMapping(mapping);
    handler.setSecurityHandler(security);
} 
```

在角色行中评论将提示码头以 401:s 代替。

# php - 如何转换这个正则表达式

> ID：10887300
> 
> 赞同：0
> 
> 时间：2012-06-04T19:43:12.570
> 
> 标签：php, regex, preg-replace

我试图弄清楚这是做什么的，以及如何改变它。

```
preg_replace('/[^\w\s]/','',$var); 
```

我认为这将所有符号都替换为空（基本上删除它们）。如果我想允许一些特定的符号怎么办，我在这里改变什么？

例如，我想替换所有内容，除了：

*   /
*   数字
*   字母
*   空间

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:47:50.757

`^`表示除此之外的所有内容，因此这将替换除单词字符 ( `\w`) 和空格 ( `\s`) 之外的所有内容。

要替换除您提到的字符之外的所有内容，请使用以下命令：

```
preg_replace('/[^\w\s\/]/', '', $var); 
```

`\/`是 的转义版本`/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:48:49.353

这基本上是：“找到不是单词字符或空格字符的所有内容并将其从字符串中删除”

^ 是一个否定，所以你可以在 [] 之后放任何你想要的东西，它会跳过那些。它已经在做你想做的一切，除了 /

注意： \w 是 [0-9A-Za-z_] 的简写（或接近它。）

来自[perl.org](http://perldoc.perl.org/perlrequick.html)

> \w 是一个单词字符（字母数字或*），代表 [0-9a-zA-Z* ]

# kalman-filter - 定义卡尔曼滤波器及其应用（概念）

> ID：10887303
> 
> 赞同：5
> 
> 时间：2012-06-04T19:43:32.960
> 
> 标签：kalman-filter

我有一个简单的问题。我正在跟踪一个对象并以非均匀的时间间隔获取它的位置。物体的速度和加速度不是恒定的。

```
data_=[time x,y,z] 
```

要设计卡尔曼滤波器，我需要定义

```
z=[x;y;z] % observation

% Estimation vector
xt=[xt;yt;zt;x't;y't;z't]  % ' first derivative

P=Covariance matrix of estimation vector 
R=Covariance matrix of measurement 
Q= covariance of noise 
```

问题1：这两个R＆P有什么区别如果测量精度为1mm，P是多少？问题2：在后期处理中使用这种卡尔曼滤波器有什么好处。如果是的话，它可以得到平滑的轨迹，为什么我们需要它。

希望我能从你们那里得到足够的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:10:38.133

**问题 1**

R 是测量的协方差矩阵。它与您的模型和您的估计无关。

P 是您的估计中的误差的协方差矩阵。它与您的模型和您估计状态的方式完全相关。P 与您的测量精度无关。您必须使用[更新](http://en.wikipedia.org/wiki/Kalman_filter#Update)方程在每次迭代中计算它。

**问题 4**

Kalman 的目标是过滤您想要跟踪的状态的噪声测量，因此您可以获得更类似于没有噪声的真实状态的结果（噪声是测量中的不确定性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T20:16:04.737

卡尔曼滤波器可以首先用[图形模型](http://www.kev-smith.com/tutorial/images/graph.png)来描述，它显示了依赖关系、独立性、隐藏了什么和观察到什么、事物如何演变；也可以通过[概率公式](http://web4.cs.ucl.ac.uk/staff/s.prince/book/19_Temporal_Models.pptx)，然后通过表示噪声、线性模型等的矩阵显式编写这些概率。理解概率是在将它们编写为矩阵模型之前**不可避免**的第一步（一个典型的错误是在不理解的情况下跳到矩阵和线性代数基本的概率框架）。

下面的 W 表示世界状态变量（隐藏），X 表示测量值；下标 t 是一个时间步长。

问题 1：您有两个卡尔曼滤波器基于的模型
：**数据模型**P(Xt|Wt) = 给定世界隐藏状态的测量概率；这只是数据中的噪声模型（由 R 表示），它还线性变换 W 以获得 X（使用其他矩阵）；请注意，它仅取决于当前步骤 Wt，即不涉及历史记录。
湾。**时间转换模型**P(Wt|Wt-1)，显示您的系统如何演变（例如移动、加速）；就像之前的模型一样，它也有一些由 P 表示的不确定性（不是噪声，而是类似的），还有一些线性转换矩阵（用于及时转换状态）；
C。**问？**在您的问题中，“噪声协方差”是一个奇怪的术语，因为它没有说明这种噪声来自何处。通常在描述中 Q 是您所指的 P，因此您可能只是将 P 误认为 Q，反之亦然。

问题 2：卡尔曼滤波器的目标是在给定时间 t 的测量值以及测量历史的情况下，给出时间 t 的隐藏世界状态的统计最优估计。由于历史是一次合并一个步骤（马尔可夫属性），因此您的*“测量合并”步骤*将当前测量与其估计相结合，因此产生的不确定性*小于*这些信息中的每一个。

用外行的话来说，卡尔曼滤波器对您的数据和数据预测进行加权平均，其中权重是可靠性（与方差成反比）。在统计术语中，卡尔曼滤波器是一个马尔科夫模型，它假设仅依赖于前一步，并使用 t-1 时的状态后验概率来评估时间 t 的先验（*预测步骤*），然后将此先验与贝叶斯中的数据概率相结合框架（测量合并步骤）。像这样阅读下面的公式：

```
 prediction: current state guess  = transition_model * prev. state guess 
```

P(Wt | Xt1..t-1) = 积分[ P(Wt|Wt-1) * P(Wt-1 | X1..t-1) dWt-1]

```
 measurement: best estimate = data_noise_model * current state guess 
```

P(Wt | Xt1..t) = P(Xt | Wt) P(Wt | Xt1..t-1) /P(Xt1..t)

请注意 LHS 的微小差异（顶部公式具有 t-1，底部公式具有 t 强调考虑了电流测量）。注意左侧的相似性，这是卡尔曼滤波器更新的关键：先前的后验变为先验。你学到了一些东西，然后用它作为你的假设来学习/估计更多。

# java - Java GUI 编程

> ID：10887304
> 
> 赞同：-5
> 
> 时间：2012-06-04T19:43:43.397
> 
> 标签：java, swing, nullpointerexception, scope

代码给出了空指针异常的错误.....要做什么？

```
import java.awt.event.*;
import javax.swing.*;

public class Gui implements ActionListener{
JButton button;

public Gui(){
    JFrame frame=new JFrame();
    JButton button =new JButton("click me!");
    button.addActionListener(this);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(button);
    frame.setSize(270,300);
    frame.setVisible(true);
}
public static void main(String[] args){
    new Gui();
}

public void actionPerformed(ActionEvent e){
    button.setText("I've been clicked");
}

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T19:45:28.250

```
JButton button =new JButton 
```

这将创建一个**局部**变量。场依旧
。`button``null`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T19:48:10.430

您在 actionPerformed 方法中引用的字段`button`从未初始化，因此为空。

您在 main 方法中添加了这个按钮`JButton button =new JButton("click me!");`，但您的 actionPerformed 从未意识到这一点。

更改要读取的行

`this.button =new JButton("click me!");`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T19:45:13.520

您的问题是该按钮仅在构造函数中可见。

# wordpress - 将新菜单页面添加到仪表板

> ID：10887305
> 
> 赞同：1
> 
> 时间：2012-06-04T19:43:46.640
> 
> 标签：wordpress

我正在寻找用于`add_menu_page`向 WordPress 仪表板添加一个新部分。我唯一的问题是把这段代码放在哪里？我看了几个教程，令人沮丧的是，没有一个提到在哪里添加代码！

如果有人可以告诉我：

1.  在哪里放置您的`add_menu_page`代码和
2.  在哪里注册作为参数传递给函数的`add_menu_page`函数

将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:35:18.943

通常我不会回答没有您已经尝试过的任何代码的问题，但似乎这是一个更抽象的问题，所以我会给出一个更抽象的答案。

通过使用在 Wordpress 执行某些操作时触发的钩子来实现对 Wordpress 的“入侵”。当到达一个钩子时，系统会检查是否有任何注册的函数要在执行的那个点被调用。您的菜单页面可以在主题的functions.php 文件或插件文件中注册 - 只要您使用适当的操作挂钩注册它并不重要。

**例子**

首先，我们需要一个菜单​​项链接到的*页面（在任何地方创建此页面，但如果您正在制作主题，最好在您的主题目录中，如果您正在制作插件，则最好在插件目录中）*。我调用了我的 settings_page.php 并将其放在我的主题目录中。

然后我们有你的功能来注册你的菜单页面*（如果你正在做一个主题，在functions.php中，如果你正在做一个插件，在你的主插件文件中）*：

```
function create_menu() {
    $settings_page = add_menu_page( 
        __("My Settings", EMU2_I18N_DOMAIN),
        __("My Settings", EMU2_I18N_DOMAIN),
        0,
        THEME_DIRECTORY.'/settings_page.php' 
        // obviously replacing THEME_DIRECTORY with your actual directory
    );
} 
```

然后我们使用 Wordpress 钩子注册您的菜单页面 - 在本例中为“admin_menu”钩子*（在与您在上面注册函数的文件相同的文件中）*：

```
add_action( 'admin_menu', 'create_menu' ); 
```

现在你完成了。我在下面列出了一些额外的资源，以防你想更深入地研究任何东西，但我希望这有助于为表面下发生的事情打下更多的基础。

**额外资源**

[Wordpress codex 中 create_menu 的函数参考](http://codex.wordpress.org/Function_Reference/add_menu_page)

[Wordpress codex 中 create_sub_menu 的函数参考](http://codex.wordpress.org/Function_Reference/add_submenu_page)

[WordPress 钩子列表](http://codex.wordpress.org/Plugin_API/Action_Reference)

[用于编写插件的 Wordpress 教程](http://codex.wordpress.org/Writing_a_Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:10:15.880

如果我没有误解您的问题，请将您的代码放入主题目录中的 functions.php 文件中。

# sql - AppEngine 实体和管理

> ID：10887308
> 
> 赞同：0
> 
> 时间：2012-06-04T19:44:10.950
> 
> 标签：sql, google-app-engine

我将为我正在构建的应用程序使用 App 引擎。

我正在做这样的事情..从用户输入信息的应用程序

```
class Employee(db.Model):
  first_name = db.StringProperty()
  last_name = db.StringProperty()
  hire_date = db.DateProperty()

  location = db.StringProperty();

  attended_hr_training = db.BooleanProperty()

employee = Employee(first_name='Antonio',
                last_name='Salieri')

employee.hire_date = datetime.datetime.now().date()
employee.attended_hr_training = True

employee.put() 
```

插入用户后，我希望用户收到一个数字，该数字在数据库中时被识别。

然后我想通知 PC 应用程序添加了一个新用户，然后 PC 将能够向应用程序发送一些内容，并且消息会发送到消息所针对的正确 ID。

App Engine 可以做到这一点吗？

编辑：

我想要一个主 PC 应用程序，它连接到每个实体，当新条目出现时会收到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:04:04.157

我不确定您所说的“已识别的数字”是什么意思。

您可以存储这样的记录键，这样您就可以`emp_key = employee.put()`在不进行数据库查询的情况下访问该记录。如果这就是你的意思。

至于通知“PC 应用程序”取决于应用程序的功能。您可以使用频道或 xmpp 发送通知。PC App 可以定期查询数据存储。有很多方法可以做到这一点。您将记录密钥作为字符串发送给 PC 应用程序，它可以在请求中返回以获取记录。

虽然说实话，PC 应用程序是 1990 年的事。你可能应该使用网络浏览器，在这种情况下，请访问我的[AE-BaseApp/Python](http://ae-baseapp.appspot.com/python)，单击 Github 链接并查看源代码。你所要求的一切的例子都在那里。它仍然是我正在开发的一个非常基本的应用程序，它演示了如何在 App Engine 中做事。

# asp.net-mvc - 高图表无法正常工作

> ID：10887312
> 
> 赞同：1
> 
> 时间：2012-06-04T19:44:30.773
> 
> 标签：asp.net-mvc, highcharts

我想制作这样的高图[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-labels/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-labels/)我有一个存储过程，计算每个月保留的所有房间类型（一月：双 2，三倍 4 ..）我需要将 I 参数传输到 Roomtypereservations.RoomTypeByDate(i) 中的存储过程；当 i 为 1 时，我得到 1 月的数据，i 为 2 月的数据......

```
 public ActionResult Gresit()
    {
   DBContext.Current.Open();

  List<Series> allSeries = new List<Series>();
  List<Roomtypereservations> rezervari = new List<Roomtypereservations>();
  for (int i =1; i < 13; i++)
  {
      rezervari = Roomtypereservations.RoomTypeByDate(i);
      var results = new object[4];

      foreach (var a in rezervari)
      {
          results = (new object[] { a.NumRezervari });

          allSeries.Add(new Series
      {
          Name = a.Room_Type,

    //Data = new Data(myData)
          Data = new Data(results.ToArray())

      });
      }
  };

      Highcharts charts = new Highcharts("chart")
          .InitChart(new Chart { DefaultSeriesType = ChartTypes.Spline, })
          .SetTitle(new Title { Text = "Gradul De Ocupare pe luni" })
          .SetXAxis(new XAxis { Categories = Reservation.Categories })
          .SetYAxis(new YAxis
          {
              Title = new YAxisTitle { Text = "Numarul de Camere" },
              Labels = new YAxisLabels { Step = 5, Formatter = "function() { return this.value}" }

          })
          .SetTooltip(new Tooltip
          {
              Crosshairs = new Crosshairs(true),
              Shared = true
          })
          .SetPlotOptions(new PlotOptions
          {
              Spline = new PlotOptionsSpline
              {
                  Marker = new PlotOptionsSeriesMarker
                  {
                      Radius = 4,
                      LineColor = ColorTranslator.FromHtml("#666666"),
                      LineWidth = 1
                  }
              }
          })
          .SetSeries(allSeries.Select(s => new Series { Name = s.Name, Data = s.Data }).ToArray());

      return View(charts);

    } 
```

但我做错了，因为我明白了：我的所有数据都显示为 1 月。我究竟做错了什么？ ![在此处输入图像描述](../Images/d03b67b138f92bd7087c958ca6eae1b3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:02:05.510

那是因为您正在循环并为每个数据点创建一个系列。您需要将 allSeries.Add 语句从 foreach 结构中取出。尝试使用以下修改的结构：

```
for (int i =1; i < 13; i++)
{
  rezervari = Roomtypereservations.RoomTypeByDate(i);
  var results = new List<object>();

  foreach (var a in rezervari)
  {
    results.Add(a.NumRezervari);
  }

  allSeries.Add(new Series
  {
    Name = a.Room_Type,
    Data = new Data(results.ToArray())
  });
} 
```

从外观上看，您正在创建多达 12 个不同的系列。

# jenkins - 限制 Jenkins 作业可以在哪个节点上运行，但只允许管理员修改此字段

> ID：10887314
> 
> 赞同：0
> 
> 时间：2012-06-04T19:44:39.037
> 
> 标签：jenkins, configure, restrict

我知道您可以通过在 Job 中填写该字段来限制项目的运行位置。我希望找到一种方法，允许对作业具有配置访问权限的个人用户仍然能够编辑作业的其余部分，但要从他们的视图中删除该字段。我希望只有系统管理员能够修改它。这样做的原因是我们目前设置了许多与单个用户相关的节点，我想防止一个用户在另一个用户的节点上运行（也就是作为另一个用户运行），但我仍然希望用户能够改变他们工作的其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:06:08.693

据我所知安全系统，您可以只允许所有用户编辑作业，或允许特定用户编辑作业。一旦您可以编辑作业，您就可以编辑所有可用的字段，并且无法限制特定的配置值。

我认为让所有用户编辑作业权限不是一个好习惯，如果我必须让所有用户都拥有某种控制权，那就是使用您可以添加的参数。

# xamarin.android - Mono for android：使用 Facebook 绑定

> ID：10887315
> 
> 赞同：1
> 
> 时间：2012-06-04T19:44:39.457
> 
> 标签：xamarin.android

我正在尝试使用 Facebook sdk api 绑定（https://github.com/xamarin/monodroid-samples/tree/master/Facebook）

仅当我将清单中的包名称设置为 Com.Facebook.Android 时，绑定才有效。

如果我不这样做，我会在启动登录对话框时遇到异常（NoClassDefFoundError: com.facebook.android.R$drawable）。该对话框尝试从 com.facebook.android 包中加载资源。

有没有办法解决这个问题？我的应用程序不能使用 Com.Facebook.Android 作为包名，因为它必须是唯一的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-13T13:49:35.470

我有同样的问题，我解决它有点不同。导入项目后，转到项目属性 > Android > 并向下滚动到“库”，其中应列出包“com.facebook.android”，选择它并单击“应用”和“确定”。这将为 facebook api 构建 R.java，因为 API 会生成一个需要 R.java 的对话框。

如果您没有看到上面所说的包，则该项目已添加为外部 Jar。这将在您的资源管理器中将其列在“引用的库”下。

只需将其作为项目导入并按照上述方法进行操作即可。

# google-app-engine - 使用 GAE 任务队列中的任务

> ID：10887317
> 
> 赞同：1
> 
> 时间：2012-06-04T19:44:42.967
> 
> 标签：google-app-engine, task-queue

我想`Task Queue`在`GAE`. 据我所知（根据`Task Queue`文档和 API），我们可以将任务添加到`push queue`，然后应用程序会自动使用它们。同样在 中`pull queue`，我们可以添加任务，并且任务会根据我们处理的缩放属性自动消耗。

我想知道是否有能力从`task queue`（`push or pull queues`）中消费任务，当我们想要通过调用`consume-like method`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:08:49.337

我认为您误解了推送和拉取任务队列的工作原理。在这两个队列中，您都将任务添加到队列中，但在推送队列中，系统会将任务出列并将其分配给拉入队列中的适当处理程序，您需要使用lease_tasks 将任务出列并处理任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:16:20.143

请注意，添加到拉取队列的任务不会自动使用。

您想要的类消费方法是[lease_tasks](https://developers.google.com/appengine/docs/python/taskqueue/overview-pull#Leasing_Tasks)（请注意，这仅适用于拉队列）。如果您想在给定时间使用任务，您可以拥有一个处理这些任务的端点。您还可以设置[cron 作业](https://developers.google.com/appengine/docs/python/config/cron)来调用该特定端点。

# node.js - Node.js REPL 中的“读取”

> ID：10887321
> 
> 赞同：0
> 
> 时间：2012-06-04T19:44:55.323
> 
> 标签：node.js, read-eval-print-loop

Node.js 中是否有一个函数可以从流中读取字符，直到它读取完整的 JavaScript 表达式并返回该表达式？读取-评估-打印循环的“读取”部分？

我想从流中读取 JSON 对象并在它们进入时对其进行处理。在这个用例中我不需要 REPL 的交互部分。

```
{"r": 0.0,
 "e": -0.2,
 "t": 0.98}
// callback happens here with the content of the object

{"r": 0.2,
 "e": 0.0,
 "t": 1.0}
// callback happens here with the content of the object
// etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:53:36.803

完整的 Javascript 表达式不一定是有效的 JSON 序列化，例如`{ foo: 'bar' }`有效的 JS 表达式，但无效的 JSON（JSON 需要双引号对象键和字符串文字）。如果您*知道*您的 JSON 对象将始终在换行符边界上结束，您可以在变量中累积行，尝试`JSON.parse()`它直到成功（不成功`JSON.parse()`会抛出 a `SyntaxError`），但这不允许您检测输入中的错误（你只会永远积累线条）。如果您提供有关您希望收到什么以及如何准确收到的更多详细信息，则可能还有其他更合适的方法。

# python - 在声明装饰器的文件中导入模块

> ID：10887322
> 
> 赞同：2
> 
> 时间：2012-06-04T19:45:00.750
> 
> 标签：python, decorator

这是我的文件结构：

```
annotations
    Helper.py
    annotations.py
test
    HelloWorld.py 
```

这是`HelloWorld.py`一个简单的`HelloWorld`类：

```
from annotations.annotations import annie

class HelloWorld:
    @annie.mydecorate
    def something():
        echo 'Hello World' 
```

在里面`annotations.py`，我只是声明了一些简单的装饰器：

```
from annotations.Helper import Helper

class annie:
    @staticmethod
    def mydecorate(func):
        Helper.prepare()
        print func.__name__ 
```

在这里我得到一个错误说`No such module: Helper`。我猜这是在加载模块时发生的`HelloWorld`，它正在加载注释模块，但是在加载模块期间调用函数，此时`Helper`模块未加载。我不确定我有多正确，但我只是在这里寻找解决方案。

问题是别的吗？我可以像在声明装饰器的文件中那样导入模块吗？任何帮助将不胜感激。

问候，罗汉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:06:23.683

在`annotations.py`中，尝试：

```
import Helper 
```

或（相对导入，Python 2.5 及更高版本）

```
from . import Helper 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:58:39.227

尝试这个：

```
annotations
    Helper.py
    annotations.py
    __init__.py
HelloWorld.py 
```

# python - 如何配置 Pyramid 的 JSON 编码？

> ID：10887324
> 
> 赞同：6
> 
> 时间：2012-06-04T19:45:07.820
> 
> 标签：python, json, pyramid, pymongo

我正在尝试返回这样的函数：

```
@view_config(route_name='CreateNewAccount', request_method='GET', renderer='json')
def returnJSON(color, message=None):
    return  json.dumps({ "color" : "color", "message" : "message" }, default=json_util.default) 
```

由于 Pyramid 自己的 JSON 编码，它会像这样进行双重编码：

```
"{\"color\": \"color\", \"message\": \"message\"}" 
```

我怎样才能解决这个问题？我需要使用[`default`参数](http://api.mongodb.org/python/1.7/api/pymongo/json_util.html)（或等效参数），因为它是 Mongo 的自定义类型所必需的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T20:00:36.663

似乎字典被 JSON 编码了两次，相当于：

```
json.dumps(json.dumps({ "color" : "color", "message" : "message" })) 
```

也许您的 Python 框架会自动对结果进行 JSON 编码？试试这个：

```
def returnJSON(color, message=None):
  return { "color" : "color", "message" : "message" } 
```

**编辑：**

要使用以您想要的方式生成 JSON 的自定义 Pyramid 渲染器，请尝试此操作（基于[渲染器文档](http://pyramid.readthedocs.org/en/latest/api/renderers.html)和[渲染器源](https://github.com/Pylons/pyramid/blob/master/pyramid/renderers.py)）。

在启动时：

```
from pyramid.config import Configurator
from pyramid.renderers import JSON

config = Configurator()
config.add_renderer('json_with_custom_default', JSON(default=json_util.default)) 
```

然后你有一个 'json_with_custom_default' 渲染器可以使用：

```
@view_config(route_name='CreateNewAccount', request_method='GET', renderer='json_with_custom_default') 
```

**编辑 2**

另一种选择可能是返回一个`Response`他的渲染器不应该修改的对象。例如

```
from pyramid.response import Response
def returnJSON(color, message):
  json_string = json.dumps({"color": color, "message": message}, default=json_util.default)
  return Response(json_string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:09:11.367

除了其他出色的答案，我想指出，如果您不希望视图函数返回的数据通过 json.dumps 传递，那么您不应在视图配置中使用 renderer="json" ： )

所以而不是

```
@view_config(route_name='CreateNewAccount', request_method='GET', renderer='json')
def returnJSON(color, message=None):
    return  json.dumps({ "color" : "color", "message" : "message" }, default=json_util.default) 
```

你可以使用

```
@view_config(route_name='CreateNewAccount', request_method='GET', renderer='string')
def returnJSON(color, message=None):
    return  json.dumps({ "color" : "color", "message" : "message" }, default=json_util.default) 
```

`string`渲染器只会按原样传递函数返回的字符串数据。但是，注册自定义渲染器是一种更好的方法（请参阅@orip 的答案）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:07:05.370

你没有说，但我会假设你只是使用标准`json`模块。

该`json`模块没有为 JSON 定义一个类；它使用标准 Python`dict`作为数据的“本机”表示。 `json.dumps()`将 a 编码`dict`为 JSON 字符串；`json.loads()`接受一个 JSON 字符串并返回一个`dict`.

所以不要这样做：

```
def returnJSON(color, message=None):
    return  json.dumps({ "color" : "color", "message" : "message" }, default=json_util.default) 
```

尝试这样做：

```
def returnJSON(color, message=None):
    return { "color" : "color", "message" : "message" } 
```

只是传回一个平原`dict`。看看你的 iPhone 应用程序如何喜欢这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:58:50.173

您正在[转储您提供的 Python 对象（字典）的*字符串*](http://docs.python.org/library/json.html#json.dumps)。

json.dumps 的手册指出：

> 将 obj 序列化为 JSON 格式的 str。

要从字符串转换回来，您需要使用[Python JSON 函数加载](http://docs.python.org/library/json.html#json.loads)，该函数将字符串加载到 JSON 对象中。

但是，您似乎正在尝试做的是`encode`JSON 的 python 字典。

```
def returnJSON(color, message=None):
    return  json.encode({ "color" : color, "message" : message }) 
```

# vba - 将多行从多张纸复制到一张纸

> ID：10887325
> 
> 赞同：0
> 
> 时间：2012-06-04T19:45:07.780
> 
> 标签：vba, loops, excel

我每天都会收到一本工作簿，其中每页列出 50 行信息，页数不定，具体取决于总共有多少行。

如何将每页的 50 行复制到一个主列表中？

从录制宏我得到

```
Sub Macro2()  
    Sheets("Page1_2").Select
    Rows("5:54").Select
    Selection.Copy
    Sheets("Page1_1").Select
    Range("A56").Select
    ActiveSheet.Paste
End Sub 
```

但我需要它遍历整个工作簿。我找不到将工作表选择每次迭代增加 1 并将粘贴范围增加 50 的方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:22:50.227

怎么样：

```
Sub test()

    Dim curRow As Integer
    Dim activeWorksheet As Worksheet
    Set activeWorksheet = ActiveSheet
    curRow = 1
    For Each ws In ActiveWorkbook.Worksheets
        If Not ws.Name = activeWorksheet.Name Then
            ws.Range("5:54").Copy Destination:=activeWorksheet.Range(CStr(curRow) & ":" & CStr(curRow + 49))

            curRow = curRow + 50
        End If
    Next ws

End Sub 
```

它遍历工作簿中的所有工作表并将内容复制到当前活动工作表。循环不包括当前活动的工作表。它假定您尝试聚合的内容始终位于第 5 到 54 行。

# c++ - 用于 boost/c++11 的 C++ 包装器

> ID：10887332
> 
> 赞同：8
> 
> 时间：2012-06-04T19:45:32.897
> 
> 标签：c++, boost, c++11

我不确定问题的标题是否正确。这是问题所在。我正在编写一个使用一些 c++11 库功能的库。显然，并非所有实现都支持这些库，因此存在可移植性问题。此处关注哪个库并不重要。一种解决方案是使用 boost，它已经提供了很多 c++11 库。所以我的解决方案是定义一个宏，say `USE_CXX11`，并定义一个新的命名空间say `internal`，并将名称引入这个依赖于宏的内部命名空间。例如，假设我需要使用`foo`c++ 库中的名称，该库`<foo>`在`<boost/foo/foo.hpp>`. 我所做的是

```
#ifdef USE_CXX11
#include <foo>
#else
#include <boost/foo/foo.hpp>
#endif

namespace internal {
#ifdef USE_CXX11
using std::foo;
#else
using boost::foo::foo;
#endif
} 
```

而在图书馆的其余部分我只使用`internal::foo`. 使用这个库的第三方代码可以定义适当的宏来指示他们是否有一个有效的 c++ 11 实现，或者他们只能使用 boost。我的图书馆将获取正确的标题和命名空间。到目前为止，这有效。希望我已经很好地解释了我的意图。

但上述解决方案对我来说似乎很丑陋。这种事情有更好的做法吗？或者有没有这种方法行不通的可能情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:39:58.293

你的解决方案对我来说很好；唯一的问题是（正如切特提到的）在 Boost 和 C++11 接口和/或实现不同的情况下。

事实上，我在 Boost.Algorithms 库中执行此操作（即将发布的 1.50 版本中的新功能）

```
namespace boost { namespace algorithm {
#if __cplusplus >= 201103L
using std::find_if_not;      // Section 25.2.5
#else
template<typename InputIterator, typename Predicate> 
InputIterator find_if_not ( InputIterator first, InputIterator last, Predicate p )
{
    for ( ; first != last; ++first )
        if ( !p(*first))
            break;
    return first;
}
#endif
}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:26:34.627

我不认为这是一个可行的解决方案。有条件地在类之间切换将限制它们的使用仅限于那些具有相同签名和语义的成员函数。您还将访问重定向到标准库，这对许多开发人员来说可能感觉不自然。

如果可用性是 C++03 和 C++11 之间的一个问题，那么你绝对应该使用 Boost 来解决所有问题。如果 C++11 是您唯一的目标，您可能会更成功地评估各种编译器以查看它们支持的语言和库功能。选择那些得到很好支持并被认为没有错误的。对于其他所有内容，请使用 Boost 并在必要时稍后重构以支持更多 C++11 库功能。串联使用这些库而不是在它们之间切换会更好。

您可以从[GCC 的 C++ 标准库实现](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)的状态页面开始。

# javascript - 无法在 Chrome 的 Javascript 控制台中读取 null 的属性“样式”

> ID：10887338
> 
> 赞同：0
> 
> 时间：2012-06-04T19:46:01.883
> 
> 标签：javascript, google-chrome, null

我正在检查 JS 控制台，它帮助我解决了一些小问题，但我想知道这个警告是否值得严重担心？

这是给出错误的代码：

```
<script type="text/javascript"
src="https://www.safaviehhome.com/product_images/locations/js/jqgalscroll.js"></script>
<script src="https://www.safaviehhome.com/product_images/mainnav/stuHover.js"             type="text/javascript"></script>
<script>
function layerSetup(id,visibility){
if(document.getElementById){
this.obj = document.getElementById(id).style;
Uncaught TypeError: Cannot read property 'style' of null
Uncaught TypeError: Cannot read property 'style' of null
<!--Includes many more of the same "Cannot read property 'style' of null messages -->

this.obj.visibility = visibility;
return this.obj;}
else if(document.all){
this.obj = document.all[id].style;
this.obj.visibility = visibility;
return this.obj;}
else if(document.layers){
this.obj = document.layers[id];
this.obj.visibility = visibility;
return this.obj;}
}
function visVisible(param){
new layerSetup(param,'visible');
}

function visHidden(param){
new layerSetup(param,'hidden');
}</script> 
```

我无法真正弄清楚为什么会发生这种情况，以及我是否应该担心，因为我们的地毯类别运行良好。任何人都可以提供任何见解吗？我很抱歉没有提供任何我自己的解释，但我没有写这个 JS 以前的同事做过，现在由我来调试他犯的每一个错误。这是一个学习过程，但我对此还是有些陌生..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:50:13.553

这可能有两个原因。

1.  在页面的某处，该`layerSetup`函数`null`作为参数之一被调用。
2.  `layerSetup`页面上不存在具有传递给函数的 id 的元素。

在 Chrome 开发控制台中，您可以单击`Pause on All Exceptions`左下栏中带有*暂停*符号的按钮。这将帮助您确定传递给函数的参数是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:49:32.943

避免 document.all

[http://www.javascripttoolbox.com/bestpractices/](http://www.javascripttoolbox.com/bestpractices/)

[http://simonwillison.net/2003/Aug/11/documentAll/](http://simonwillison.net/2003/Aug/11/documentAll/)

# javascript - 让 Facebook Like 按钮（由 JS 生成）出现

> ID：10887345
> 
> 赞同：0
> 
> 时间：2012-06-04T19:46:40.417
> 
> 标签：javascript, facebook, prettyphoto

我正在使用 PrettyPhoto 灯箱作为图片库。当图像弹出时，其下方会出现 Twitter 和 Facebook 按钮。它内置在 PrettyPhoto 插件中，并且运行良好。

问题是，Facebook 按钮是 iframe 类型（不允许用户输入评论）。我想用 HTML5 按钮替换它（单击它时会打开一个评论框，而不仅仅是喜欢）。

我想替换它（iframe 按钮的标准 FB 代码）：

`<div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href='+pp_real_links[set_position]+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:23px;" allowTransparency="true"></iframe></div>`

...使用此（HTML5 按钮的标准 fb 代码）：

`<div class="fb-like" data-href="instagram.com/the-pic" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false">test text</div>`

当我进行更换时，它不会出现在灯箱中。不过，它可以在网站上的其他任何地方使用。

是的，我`.facebook`用`.fb-like`. 我还将文本放入 div 以验证它是否显示在正确的位置。

我认为问题的根源在于社交链接代码是在JS中定义的；在 PrettyPhoto 设置中，有一个名为“标记”的属性，用于存储灯箱和共享按钮的 html。所以它可能没有与 FB JS 代码连接。

解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:21:59.400

您发布的代码（旧的 iframe 代码）不需要使用[facebook javascript sdk](http://developers.facebook.com/docs/reference/javascript)，因为它只是加载 iframe。

另一方面，您要使用的 html5 代码确实需要 sdk 来呈现它，您会看到`fb-like`div 只是 sdk 插入新 iframe 的容器。

从您的代码中，我不能说您是否正在加载 js sdk，如果没有，则按照文档中的说明加载/初始化它，只需确保包含该`xfbml`属性：

```
FB.init({
    appId      : 'YOUR_APP_ID', // App ID
    channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
}); 
```

如果您已经在使用 js sdk，那么它应该可以工作，除非在 sdk 完成加载和初始化后动态添加类似按钮代码。
如果是这种情况，那么只需使用[FB.XFBML.parse](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)方法：

```
FB.XFBML.parse();

// or you can pass the container element:
FB.XFBML.parse(document.getElementById(ELEMENT_ID)); 
```

# java - 对等方 java.net.SocketException 重置连接：传输端点未连接

> ID：10887347
> 
> 赞同：0
> 
> 时间：2012-06-04T19:46:45.033
> 
> 标签：java

我正在使用将打开ServerSocketChannel并绑定客户端端口的NIO线程。但是当我们尝试从Socket chanel读取数据时，显示了下面提到的异常。如果有人提供解决方案，那就太好了。

```
Connection reset by peer java.net.SocketException: Transport endpoint is not connected
    at sun.nio.ch.SocketChannelImpl.shutdown(Native Method)
    at sun.nio.ch.SocketChannelImpl.shutdownOutput(SocketChannelImpl.java:669)
    at sun.nio.ch.SocketAdaptor.shutdownOutput(SocketAdaptor.java:386)
    at iyp.trncomms.ConnRecordWriter.checkShutDown(ConnRecordWriter.java:131)
    at iyp.trncomms.ConnRecordWriter.continueWriting(ConnRecordWriter.java:214)
    at iyp.trncomms.ConnRecordWriter.retry(ConnRecordWriter.java:101)
    at iyp.trncomms.ConnRecordWriter.shutDown(ConnRecordWriter.java:92)
    at iyp.trncomms.ConnRecord$WorkingState.toOnHoldState(ConnRecord.java:1224)
    at iyp.trncomms.ConnRecord$WorkingState.onInputError(ConnRecord.java:1152)
    at iyp.trncomms.ConnRecord.read(ConnRecord.java:124)
    at iyp.trncomms.NIO.run(NIO.java:137) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:10:06.257

`Connection reset by peer`非常明确。您打开了连接，但远程端在您的代码执行之前将其关闭。您需要调查远程系统上的日志以了解连接过早关闭的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:40:44.513

你似乎是`shutdownOutput()`在一个错误的情况下打电话。那是行不通的：你已经遇到了一个错误，这将导致另一个错误。关掉频道就行了。

# php - 查询数据库的下拉菜单

> ID：10887349
> 
> 赞同：0
> 
> 时间：2012-06-04T19:46:52.913
> 
> 标签：php, forms, drop-down-menu

首先，如果这是一个愚蠢的问题，我深表歉意 - 我刚刚开始学习我的 php/mysql 技能。我正在制作一个包含 3 个下拉菜单的下拉表单。我希望能够从表单中触发查询。您选择 Part Type、Make、Model hit submit 并显示结果表。

我的表单填充了 3 个数组，当您点击提交时，我可以将每个选定项目的键回显到页面：

```
 echo '<form action="dbBrowse.php" method="post">';

    $mak = array (0 => 'Make', 'Ford', 'Freightliner', 'Peterbilt', 'Sterling', 'Mack', 'International', 'Kenworth', 'Volvo');
    $mod = array (0 => 'Model', 'Argosy', 'Midliner');
    $p = array (0 => 'Part', 'Radiator', 'Charge Air Cooler', 'AC');                        

    echo '<select name="drop1">';
    foreach ($p as $key => $value) {
    echo "<option value=\"$key\">
    $value</option>\n";

    }

    echo '</select>';

    echo '<select name="drop2">';
    foreach ($mak as $key => $value) {
    echo "<option value=\"$key\">
    $value</option>\n";

    }

    echo '<select/>';

    echo '<select name="drop3">';
    foreach ($mod as $key => $value)  {
    echo "<option value=\"$key\">
    $value</option>\n";

    }

    echo '<select/>';
    echo '</form>';

            //echo keys of selection
    echo $_POST['drop1'];
    echo "<br />";
    echo $_POST['drop2'];
    echo "<br />";
    echo $_POST['drop3'];
            //these echo something like 1, 1, 3 etc. to my page 
```

我迷路的地方是我正在寻找选择的选项并将它们插入到这样的查询中：

```
 $dropSearch = mysql_query('SELECT * FROM parts WHERE part= "$partTypeVar" . AND  WHERE make = "$makeTypeVar" . AND WHERE model = "$modelTypeVar"');    

            $partTypeVar being the corresponding value to the key that is being returned from the array. 
```

我正在让自己发疯，试图弄清楚如何做到这一点。最终我想进一步扩展它，但只要能够创建一个带有所选值的 mysql 语句就可以让我现在很开心。我理解需要发生什么的概念，但我不确定如何完成它。任何帮助或朝着正确的方向推动将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:58:36.953

如果我理解了您的问题，那么在`form`提交时，您希望`query`使用所选值进入数据库。

**使用示例`AND`：**

```
// Prepare the Query
$query = sprintf(
           "SELECT * FROM parts WHERE part='%s' AND make='%s' AND model='%s'",
           mysql_real_escape_string($_POST['drop1']),
           mysql_real_escape_string($_POST['drop2']),
           mysql_real_escape_string($_POST['drop3'])
         );

// Execute the Query
mysql_query($query); 
```

*这将从表部分中选择与这三个值匹配的所有行。*

**使用示例`OR`：**

```
// Prepare the Query
$query = sprintf(
           "SELECT * FROM parts WHERE part='%s' OR make='%s' OR model='%s'",
           mysql_real_escape_string($_POST['drop1']),
           mysql_real_escape_string($_POST['drop2']),
           mysql_real_escape_string($_POST['drop3'])
         );

// Execute the Query
mysql_query($query); 
```

*这将从表部分中选择与这三个值中的任何一个匹配的所有行。*

**您可以阅读更多相关信息：**

[mysql_query](http://php.net/manual/en/function.mysql-query.php)

[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

[MySQL 5.6 参考手册](http://dev.mysql.com/doc/refman/5.6/en/index.html):: [12 函数和运算符](http://dev.mysql.com/doc/refman/5.6/en/functions.html):: [12.3 运算符](http://dev.mysql.com/doc/refman/5.6/en/non-typed-operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:58:53.993

首先，您必须删除 . char 在您的 SQL 查询中，现在不需要使用它，当然可以为变量分配正确的值。

```
$partTypeVar = mysql_real_escape_string($_POST['$drop1']);
$makeTypeVar = mysql_real_escape_string($_POST['$drop2']);
$modelTypeVar = mysql_real_escape_string($_POST['$drop3']);

$dropSearch = mysql_query('SELECT * FROM parts WHERE part= "$partTypeVar" AND WHERE make = "$makeTypeVar" AND WHERE model = "$modelTypeVar"'); 
```

我假设这是你的变量的正确顺序。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T18:32:59.717

```
<select name="myFilter">
<option value="Chooseafilter" name="default">Choose a filter...</option>
<option value ="Lastname" name="opLastName">Last Name</option>
<option value="Firstname" name="opFirstName">First Name</option>
<select>
<li><!--TEXT SEARCH INPUT--><input type="text" name="search_filter" /></li> 
...
dbconnection();#assume that all connection data is here        
...
$filter = $_POST['myFilter']; #
...

switch($filter)
    {
        case "Lastname":
        $selectedoption = "profile_name";
        break;

        case "Firstname":
        $selectedoption="profile_first_name";
        break;

        case "Chooseafilter":
        $selectedoption = "";
        break;  
    }           

$result = pg_query($db_con, "SELECT * FROM profile WHERE ".$selectedoption." LIKE'%$_POST[search_filter]%'"); 
$row = pg_fetch_assoc($result);  
if (isset($_POST['submit']))
    {   
        while($row = pg_fetch_assoc($result))
        {
        echo"<ul>  
                <form name='update' action='' method='POST'>
                <li>Guest Last Name:</li>
                <li><input type='text' name='profile_name_result' value='$row[profile_name]' /></li>  
                <li>Guest First Name:</li>
                <li><input type='text' name='profile_first_name_result' value='$row[profile_first_name]' /></li>  
                <li><input type='submit' value='Update' name='update'></input></li>
    ... 
```

# c# - Encoding fails when marshalling string via COM Interop in C# (double UTF8 encoding?)

> ID：10887352
> 
> 赞同：2
> 
> 时间：2012-06-04T19:47:00.230
> 
> 标签：c#, unicode, marshalling, com-interop, autodesk-navisworks

I'm writing a plugin for Autodesk Navisworks, trying to pass a C# unicode string to a property on a COM object. However, the string is encoded incorrectly somewhere in the process.

```
var property = ...;
property.Name = "中文";   // becomes "??"
property.Value = "中文"; // OK 
```

"中文" comes out as "??" in the user interface, whereas strings limited to ASCII work just fine (e.g. "abcd"). Furthermore, setting the Value-property (a VARIANT) on the same object works just fine, but not the Name.

Further exploration leads me to try encoding the string "ä" as utf-8:

```
C3 A4 
```

and somehow "encoding" this into a (unicode) string:

```
property.Name = "\u00c3\u00a4"; // shows up as "ä" 
```

Surprisingly this seemed to work.

This led me to try the following:

```
var bytes = Encoding.UTF8.GetBytes("中文abcd");
char[] chars = new char[bytes.Length];
for(int i = 0; i < chars.Length; i++)
    chars[i] = (char)bytes[i];
string s = new string(chars); 
```

However, when I use this trying to encode "中文abcd" I only get the first character "中" in the GUI. Yet, with "äabcd" I get more than one character again...

What is happening here? How can I get around the problem? Is it a marshalling problem (e.g. incorrectly specified encoding in the COM Interop)? Or perhaps some weird code inside the application? If it's a marshalling problem, can I modify it for this property only?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:32:26.617

Turns out that `Name` was an "internal" string, and I should have used the property `UserName` for text displayed in the GUI.

I.e. I changed:

```
var property = ...;
property.Name = "中文";   // becomes "??"
property.Value = "中文"; // OK 
```

to this:

```
var property = ...;
property.UserName = "中文";   // OK!
property.Value = "中文"; // OK 
```

which worked. Presumably UserName is implicitly set from Name internally in some way ignoring or mishandling the encoding.

# java - Java 和 .Net 之间 Couchbase 的 memcached 实现中的数据共享

> ID：10887353
> 
> 赞同：0
> 
> 时间：2012-06-04T19:47:05.167
> 
> 标签：java, .net, memcached, couchbase

我正在尝试在 Java 和 .Net 之间共享存储在 couchbase memcached 存储桶中的数据。

我能够在 .Net 中读取 Java 中的字符串集，但是每当我尝试在 Java 中读取 .Net 中的字符串集时，结果都是 Null。

那么是否有可能在沙发库服务器中的 memcache 存储桶中在 .Net 和 Java 之间交换数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:23:58.537

谢谢回复，我明白了。

.NET 能够读取 Java 中设置的字符串的原因是，如果 enyimMemcached 库无法识别标志，则将缓存项解释为字符串。

因此，为了能够读取 Java 中的字符串，我只是通过扩展 SpyObject 创建了自己的自定义转码器并将其设置为远离，例如它忽略标志。然后我像这样通过我的 get 调用传递自定义转码器，

```
_obj = GetMemcachedClient().get(key, new StringTranscoder()) 
```

我的 StringTranscoder 类看起来像这样，

```
 /**
 * Copyright (C) 2006-2009 Dustin Sallings
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALING
 * IN THE SOFTWARE.
 */

package cachingjavatestapp;

import java.io.IOException;
import net.spy.memcached.CachedData;
import net.spy.memcached.compat.SpyObject;
import net.spy.memcached.transcoders.Transcoder;
import net.spy.memcached.transcoders.TranscoderUtils;

/**
 * Transcoder that serializes and unserializes longs.
 */
public final class StringTranscoder extends SpyObject implements
    Transcoder<String> {

  private static final int FLAGS = 0;

  public boolean asyncDecode(CachedData d) {
    return false;
  }

  public CachedData encode(java.lang.String l) {
        try{
            return new CachedData(FLAGS, l.getBytes("UTF-8"), getMaxSize());
        }
        catch (Exception e){
            return null;
        }
    }

  public String decode(CachedData d) {
        try{
            return new String(d.getData(), "UTF-8");
        }catch(Exception e){
            return null;
        }
  }

  public int getMaxSize() {
    return CachedData.MAX_SIZE;
  }
} 
```

为了能够在 .NET 和 Java 之间交换数据。我只是使用 json.net 库和 gson 库来序列化对象并将 json 字符串传递给 memcached，在那里它被作为字符串拾取，然后使用 json 库进行反序列化。

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:02:47.463

Yes, it is possible. In the case of the Java client, it has a built in "transcoder" that will handle converting a java.lang.String to bytes with appropriate encoding (UTF-8 I think? I'd have to check). The .NET side would be able to read this data back in.

Where things get sticky is how each client library stores a string. In memcached protocol, the recommended but not required way to do this is with the flags. The challenge is, each client library does flags differently, something the Couchbase client library developers are looking to resolve into a common set of flags.

This means, for now, to normalize how the data is stored between the two client libraries, you may have to set up the client library a particular way. For example, Java has customizable transcoders and you can extend one of the existing transcoders to read/write your strings with the flags that the .NET client library is using.

Let me know what client libraries you're using, and I'll update this with an example.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-19T15:14:00.157

我知道这是一个相当古老的问题，但我遇到了同样的问题，并认为我会分享我目前的解决方案。EnyimMemcached 的以下转码器与 spymemcached 中的类型序列化/标记方式更加匹配。显然，如果您尝试在 .Net 和 Java 之间序列化对象，这将不起作用；但它可以让您使用的不仅仅是字符串。

[https://github.com/mikeleedev/EnyimMemcached/blob/master/Enyim.Caching/Memcached/Transcoders/SpymemcachedTranscoder.cs](https://github.com/mikeleedev/EnyimMemcached/blob/master/Enyim.Caching/Memcached/Transcoders/SpymemcachedTranscoder.cs)

```
 public class SpymemcachedTranscoder : ITranscoder
    {
        #region Private Members
        // General flags
        private const uint SERIALIZED = 1; //00000000 00000001
        private const uint COMPRESSED = 2; //00000000 00000010 <-- TODO - add support for compression
        private const uint NOFLAG = 0; //00000000 00000000

        // Special flags for specially handled types.
        private const uint SPECIAL_MASK = 0xff00; //11111111 00000000
        private const uint SPECIAL_BOOLEAN = (1 << 8); //00000001 00000000
        private const uint SPECIAL_INT = (2 << 8); //00000010 00000000
        private const uint SPECIAL_LONG = (3 << 8); //00000011 00000000
        private const uint SPECIAL_DATE = (4 << 8); //00000100 00000000
        private const uint SPECIAL_BYTE = (5 << 8); //00000101 00000000
        private const uint SPECIAL_FLOAT = (6 << 8); //00000110 00000000
        private const uint SPECIAL_DOUBLE = (7 << 8); //00000111 00000000
        private const uint SPECIAL_BYTEARRAY = (8 << 8); //00001000 00000000

        private readonly ArraySegment<byte> NullArray = new ArraySegment<byte>(new byte[0]);
        private readonly DateTime EPOCH_START_DATETIME = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
        private readonly SpyMemcachedTranscoderUtils _spyTranscoderUtil = new SpyMemcachedTranscoderUtils(true); 
        #endregion

        #region Serialize/Deserialize
        CacheItem ITranscoder.Serialize(object value)
        {
            return this.Serialize(value);
        }

        object ITranscoder.Deserialize(CacheItem item)
        {
            return this.Deserialize(item);
        }

        protected virtual CacheItem Serialize(object value)
        {
            // raw data is a special case when some1 passes in a buffer (byte[] or ArraySegment<byte>)
            if (value is ArraySegment<byte>)
            {
                // ArraySegment<byte> is only passed in when a part of buffer is being 
                // serialized, usually from a MemoryStream (To avoid duplicating arrays 
                // the byte[] returned by MemoryStream.GetBuffer is placed into an ArraySegment.)
                return new CacheItem(SPECIAL_BYTEARRAY, (ArraySegment<byte>)value);
            }

            var tmpByteArray = value as byte[];

            // - or we just received a byte[]. No further processing is needed.
            if (tmpByteArray != null)
            {
                return new CacheItem(SPECIAL_BYTEARRAY, new ArraySegment<byte>(tmpByteArray));
            }

            uint flags = NOFLAG;
            ArraySegment<byte> data;
            TypeCode code = value == null ? TypeCode.Empty : Type.GetTypeCode(value.GetType());

            switch (code)
            {
                case TypeCode.Empty:
                case TypeCode.DBNull:
                    flags = SPECIAL_BYTEARRAY;
                    data = this.SerializeNull();
                    break;
                case TypeCode.String:
                    flags = NOFLAG;
                    data = this.SerializeString((String)value);
                    break;
                case TypeCode.Int64:
                    flags = SPECIAL_LONG;
                    data = this.SerializeInt64((Int64)value);
                    break;
                case TypeCode.Int32:
                    flags = SPECIAL_INT;
                    data = this.SerializeInt32((Int32)value);
                    break;
                case TypeCode.Boolean:
                    flags = SPECIAL_BOOLEAN;
                    data = this.SerializeBoolean((Boolean)value);
                    break;
                case TypeCode.DateTime:
                    flags = SPECIAL_DATE;
                    data = this.SerializeDateTime((DateTime)value);
                    break;
                case TypeCode.Byte:
                    flags = SPECIAL_BYTE;
                    data = this.SerializeByte((byte)value);
                    break;
                case TypeCode.Single: //float
                    flags = SPECIAL_FLOAT;
                    data = this.SerializeSingle((float)value);
                    break;
                case TypeCode.Double:
                    flags = SPECIAL_DOUBLE;
                    data = this.SerializeDouble((double)value);
                    break;
                default:
                    flags = SERIALIZED;
                    data = this.SerializeObject(value);
                    break;
            }

            //TODO - determine when to apply compression and do it

            return new CacheItem(flags, data);
        }

        protected virtual object Deserialize(CacheItem item)
        {
            if (item.Data.Array == null)
                return null;

            byte[] data = new byte[item.Data.Count];
            Array.Copy(item.Data.Array, item.Data.Offset, data, 0, item.Data.Count);

            //TODO - compression support
            //if ((item.Flags & COMPRESSED) != 0)
            //{
            //    data = Decompress(item.Data);
            //}

            if ((item.Flags & SERIALIZED) != 0)
            {
                return DeserializeObject(data);
            }

            uint flags = item.Flags & SPECIAL_MASK;
            if (flags == NOFLAG)
            {
                return DeserializeString(data);
            }
            else
            {
                switch (flags)
                {
                    case SPECIAL_BYTEARRAY:
                        return data;
                    case SPECIAL_BOOLEAN:
                        return this.DeserializeBoolean(data);
                    case SPECIAL_INT:
                        return this.DeserializeInt32(data);
                    case SPECIAL_LONG:
                        return this.DeserializeInt64(data);
                    case SPECIAL_DATE:
                        return this.DeserializeDateTime(data);
                    case SPECIAL_BYTE:
                        return this.DeserializeByte(data);
                    case SPECIAL_FLOAT:
                        return this.DeserializeSingle(data);
                    case SPECIAL_DOUBLE:
                        return this.DeserializeDouble(data);
                    default:
                        throw new InvalidOperationException(string.Format("SpyTranscoder undecodable with flags: {0}", flags));
                }
            }
        }     
        #endregion

        #region Typed Serialization

        protected virtual ArraySegment<byte> SerializeNull()
        {
            return NullArray;
        }

        protected virtual ArraySegment<byte> SerializeString(string value)
        {
            return new ArraySegment<byte>(Encoding.UTF8.GetBytes((string)value));
        }

        protected virtual ArraySegment<byte> SerializeByte(byte value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeByte(value));
        }

        protected virtual ArraySegment<byte> SerializeBoolean(bool value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeBoolean(value));
        }

        protected virtual ArraySegment<byte> SerializeInt32(Int32 value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeInt(value));
        }

        protected virtual ArraySegment<byte> SerializeInt64(Int64 value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeLong(value));
        }

        protected virtual ArraySegment<byte> SerializeDateTime(DateTime value)
        {
            var epochMilliseconds = (long)(value - EPOCH_START_DATETIME).TotalMilliseconds;
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeLong(epochMilliseconds));
        }

        protected virtual ArraySegment<byte> SerializeDouble(Double value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeLong(BitConverter.DoubleToInt64Bits(value)));
        }

        protected virtual ArraySegment<byte> SerializeSingle(Single value)
        {
            return new ArraySegment<byte>(_spyTranscoderUtil.EncodeLong(BitConverter.ToInt32(BitConverter.GetBytes(value), 0)));
        }

        protected virtual ArraySegment<byte> SerializeObject(object value)
        {
            using (var ms = new MemoryStream())
            {
                new BinaryFormatter().Serialize(ms, value);

                return new ArraySegment<byte>(ms.GetBuffer(), 0, (int)ms.Length);
            }
        }

        #endregion

        #region Typed deserialization

        protected virtual String DeserializeString(byte[] value)
        {
            //return Encoding.UTF8.GetString(value.Array, value.Offset, value.Count);
            return Encoding.UTF8.GetString(value);
        }

        protected virtual Boolean DeserializeBoolean(byte[] value)
        {
            return _spyTranscoderUtil.DecodeBoolean(value);
        }

        protected virtual Int32 DeserializeInt32(byte[] value)
        {
            return _spyTranscoderUtil.DecodeInt(value);
        }

        protected virtual Int64 DeserializeInt64(byte[] value)
        {
            return _spyTranscoderUtil.DecodeLong(value);
        }

        protected virtual DateTime DeserializeDateTime(byte[] value)
        {
            var epochMilliseconds = _spyTranscoderUtil.DecodeLong(value);
            return EPOCH_START_DATETIME.AddMilliseconds(epochMilliseconds);
        }

        protected virtual Double DeserializeDouble(byte[] value)
        {
            return BitConverter.Int64BitsToDouble(_spyTranscoderUtil.DecodeLong(value));
        }

        protected virtual Single DeserializeSingle(byte[] value)
        {
            byte[] bytes = BitConverter.GetBytes(_spyTranscoderUtil.DecodeInt(value));
            return BitConverter.ToSingle(bytes, 0);
        }

        protected virtual Byte DeserializeByte(byte[] data)
        {
            return _spyTranscoderUtil.DecodeByte(data);
        }

        protected virtual object DeserializeObject(byte[] value)
        {
            //using (var ms = new MemoryStream(value.Array, value.Offset, value.Count))
            using (var ms = new MemoryStream(value))
            {
                return new BinaryFormatter().Deserialize(ms);
            }
        }

        #endregion

        #region GZip
        private ArraySegment<byte> Compress(ArraySegment<byte> data)
        {
            using (var outStream = new MemoryStream())
            {
                using (var compressStream = new GZipStream(outStream, CompressionMode.Compress))
                {
                    using (var inStream = new MemoryStream(data.Array))
                    {
                        inStream.CopyTo(compressStream);
                        return new ArraySegment<byte>(outStream.ToArray());
                    }
                }
            }
        }
        private ArraySegment<byte> Decompress(ArraySegment<byte> data)
        {
            using (var inStream = new MemoryStream(data.Array))
            {
                using (var decompressStream = new GZipStream(inStream, CompressionMode.Decompress))
                {
                    using (var outStream = new MemoryStream())
                    {
                        decompressStream.CopyTo(outStream);
                        return new ArraySegment<byte>(outStream.ToArray());
                    }
                }
            }
        } 
        #endregion
    }

    internal class SpyMemcachedTranscoderUtils
    {

        private readonly bool _packZeros;

        public SpyMemcachedTranscoderUtils(bool pack = true)
        {
            _packZeros = pack;
        }

        public byte[] EncodeNum(long value, int maxBytes)
        {
            byte[] rv = new byte[maxBytes];
            for (int i = 0; i < rv.Length; i++)
            {
                int pos = rv.Length - i - 1;
                rv[pos] = (byte)((value >> (8 * i)) & 0xff);
            }
            if (_packZeros)
            {
                int firstNon0 = 0;
                // Just looking for what we can reduce
                while (firstNon0 < rv.Length && rv[firstNon0] == 0)
                {
                    firstNon0++;
                }
                if (firstNon0 > 0)
                {
                    byte[] tmp = new byte[rv.Length - firstNon0];
                    Array.Copy(rv, firstNon0, tmp, 0, rv.Length - firstNon0);
                    rv = tmp;
                }
            }
            return rv;
        }

        public byte[] EncodeLong(long value)
        {
            return EncodeNum(value, 8);
        }

        public long DecodeLong(byte[] value)
        {
            long rv = 0;
            foreach (byte i in value)
            {
                rv = (rv << 8) | (i < 0 ? 256 + i : i);
            }
            return rv;
        }

        public byte[] EncodeInt(int value)
        {
            return EncodeNum(value, 4);
        }

        public int DecodeInt(byte[] value)
        {
            if (value.Length > 4)
                throw new InvalidOperationException("Too long to be an int (" + value.Length + ") bytes");

            return (int)DecodeLong(value);
        }

        public byte[] EncodeByte(byte value)
        {
            return new byte[] { value };
        }

        public byte DecodeByte(byte[] value)
        {
            if (value.Length > 1)
                throw new InvalidOperationException("Too long for a byte");

            byte rv = 0;
            if (value.Length == 1)
            {
                rv = value[0];
            }
            return rv;
        }

        public byte[] EncodeBoolean(bool b)
        {
            byte[] rv = new byte[1];
            rv[0] = (byte)(b ? '1' : '0');
            return rv;
        }

        public bool DecodeBoolean(byte[] value)
        {
            if (value.Length != 1)
                throw new InvalidOperationException("Wrong length for a boolean");

            return value[0] == '1';
        }
    } 
```

# python - 获取维基百科图像的链接

> ID：10887356
> 
> 赞同：0
> 
> 时间：2012-06-04T19:47:15.580
> 
> 标签：python, mediawiki, wikipedia, wikipedia-api

我正在尝试提取维基百科中所有图像的链接，而不会丢失图像名称和可能的 alt 标签。我从

[如何从信息框中获取指向维基百科图像的链接？](https://stackoverflow.com/questions/1026337/how-do-i-get-link-to-an-image-on-wikipedia-from-the-infobox)

我可以通过查询得到它：[http](http://en.wikipedia.org/wiki/File:filename.jpg) ://en.wikipedia.org/wiki/File: filename.jpg 但是，要做到这一点，我需要获取图像的所有文件名。有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:52:18.817

这也给出了页面中所有图像 url 和文件名的列表

```
http://en.wikipedia.org/w/api.php?action=query&titles=World&generator=images&gimlimit=10&prop=imageinfo&iiprop=url|dimensions|mime&format=json 
```

更改标题=部分

# qt - 如何更改 QTreeView 中项目焦点矩形的颜色？

> ID：10887358
> 
> 赞同：1
> 
> 时间：2012-06-04T19:47:26.610
> 
> 标签：qt, qt4

是否可以轻松更改 QTreeView 中项目（由多个 QStandardItems 组成的行）的虚线焦点矩形的颜色？

在样式表**QTreeView::item:focus**不起作用

而且我无法在自定义**QItemDelegate中重新实现****绘画**功能，因为它会覆盖我的样式表设置。

 **提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:16:12.417

`QTreeView::item:selected`为我工作：

```
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QFileSystemModel model;
    model.setRootPath(QDir::currentPath());
    QTreeView tree;
    tree.setModel(&model);

    tree.setAllColumnsShowFocus(true);

    tree.setStyleSheet("QTreeView::item:selected { border-color:green; "
                       "border-style:outset; border-width:2px; color:black; }");

    tree.show();
    return app.exec();
} 
```**

# map - 带有 2 个键的 CouchDB 视图

> ID：10887359
> 
> 赞同：2
> 
> 时间：2012-06-04T19:47:31.473
> 
> 标签：map, views, couchdb, mapreduce

我正在寻找针对 couchdb 视图问题的通用解决方案。

例如，有这样的视图结果：

```
{"total_rows":4,"offset":0,"rows":[
{"id":"1","key":["imported","1"],"value":null},
{"id":"2","key":["imported","2"],"value":null},
{"id":"3","key":["imported","3"],"value":null},
{"id":"4","key":["mapped","4"],"value":null},
{"id":"5,"key":["mapped","5"],"value":null}
] 
```

1）如果我只想选择“导入”的文件，我会使用这个：

```
view?startkey=["imported"]&endkey=["imported",{}] 
```

2）如果我想选择所有具有更高 id 的导入文档然后 2：

```
view?startkey=["imported",2]&endkey=["imported",{}] 
```

3) 如果我想选择 id 介于 2 和 4 之间的所有导入文档：

```
view?startkey=["imported",2]&endkey=["imported",4] 
```

我的问题是：如何选择 id 介于 2 和 4 之间的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:26:43.110

您可以尝试扩展上面的解决方案，但在键前添加一种“发射索引”标志，如下所示：

```
map: function (doc) {
  emit ([0, doc.number, doc.category]); // direct order
  emit ([1, doc.category, doc.number]); // reverse order
} 
```

这样你就可以用

```
view?startkey=[0, 2]&endkey=[0, 4, {}] 
```

或者

```
view?startkey=[1, 'imported', 2]&endkey=[1, 'imported', 4] 
```

但无论如何，两种不同的观点会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T19:31:25.640

不久前我遇到了同样的问题，所以我将解释我的解决方案。在任何地图函数内部，您都可以进行多次`emit()`调用。在您的情况下，地图功能可能如下所示：

```
function(doc) {
  emit([doc.number, doc.category], null);
  emit([doc.category, doc.number], null);
} 
```

您还可以使用`?include_docs=true`从任何查询中取回文档。那么您要返回第 2 到第 4 行的查询将是

```
view?startkey=[2]&endkey=[4,{}] 
```

您可以在[CouchDB 查看排序规则查看排序规则](http://wiki.apache.org/couchdb/View_collation)

# java - 通过 Java 使用自定义 WCF 用户名/密码 (UserNamePasswordValidator) 身份验证

> ID：10887366
> 
> 赞同：1
> 
> 时间：2012-06-04T19:48:02.260
> 
> 标签：java, wcf, interop, basichttpbinding, wshttpbinding

我找到了一个关于使用自定义用户名/密码验证 WCF 服务的好例子（[一个简单的 WCF 服务和用户名密码验证：他们没有告诉你的事情](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)）。这符合我的需要......部分，我猜。它使用 wsHttpBinding 和 Message 作为安全模式。

我需要构建的 WCF 服务将具有 Java 客户端，我的问题是上面链接中的示例是否适用于**Java**（“互操作”）。还是我应该使用 basicHttpBinding，在传输级别 (https) 保护连接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:21:04.570

WCF 实现了许多 Web 服务协议：http: [//msdn.microsoft.com/en-us/library/ms730294](http://msdn.microsoft.com/en-us/library/ms730294)

虽然复杂的解决方案不一定是最好的解决方案。如果满足您的所有其他要求，请继续使用 basicHttpBinding 和 Transport 安全性。

有一篇很好的描述配置的多合一文章：

[http://www.remondo.net/using-ssl-transport-security-wcf-basichttpbinding/](http://www.remondo.net/using-ssl-transport-security-wcf-basichttpbinding/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:50:00.100

传输安全几乎总是对互操作性更好。话虽如此，用户名安全性也非常安全，尤其是在 ssl 下且不使用消息级证书的情况下。即使有证书，也可以与axis2 或wsit java 框架进行互操作。但这可能具有挑战性，因此如果您将有许多任意客户端并希望他们在没有任何特殊指导的情况下与您的服务互操作，您可能希望避免它。

顺便说一句，basicHttp 和 wsHttp 都能够执行消息或传输级别。basic 对于互操作来说更容易一些，因为它不使用 ws 寻址。

# python - MySQLdb 执行

> ID：10887372
> 
> 赞同：0
> 
> 时间：2012-06-04T19:48:24.153
> 
> 标签：python, mysql, syntax-error, mysql-python

我在这个网站和许多其他网站上进行了高低搜索，发现了类似的问题，但没有一个答案对我有用（通常只是考虑元组）。我正在编写一个 python 脚本来解析 html 页面并填充数据库。除了填充部分，我几乎所有东西都在工作......

这是处理 mySQL 数据库的代码段（注意：在 python 中使用 MySQLdb 模块）

```
conn = MySQLdb.connect(user="root", passwd="xxxxx",db="nutrients")
cur = conn.cursor()
test = "Canned Corn"
cur.execute("INSERT INTO food (name) VALUES (%s)", (test,))
conn.commit() 
```

我首先用解析过的字符串对其进行了测试，但这不起作用。这给了我2个错误：

1.  回溯（最近一次调用最后）：文件“C:\Python32\lib\site-packages\MySQLdb\cursors.py”，第 171 行，在执行 r = self._query(query) 文件“C:\Python32\lib\ site-packages\MySQLdb\cursors.py”，第 330 行，在 _query rowcount = self._do_query(q) 文件“C:\Python32\lib\site-packages\MySQLdb\cursors.py”，第 294 行，在 _do_query db .query(q) _mysql_exceptions.ProgrammingError: (1064, "您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '%s)' 附近使用正确的语法")

2.  回溯（最近一次调用最后）：文件“C:\Python32\lib\site-packages\MySQLdb\cursors.py”，第 171 行，在执行 r = self._query(query) 文件“C:\Python32\lib\ site-packages\MySQLdb\cursors.py”，第 330 行，在 _query rowcount = self._do_query(q) 文件“C:\Python32\lib\site-packages\MySQLdb\cursors.py”，第 294 行，在 _do_query db .query(q) _mysql_exceptions.ProgrammingError: (1064, "您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '%s)' 附近使用正确的语法")

为什么这个查询不起作用！？

* * *

更新：在几乎拔掉我的头发后，我决定恢复到 2.7.3 并猜猜是什么......现在一切正常：D 应该知道这是那种类型的错误......仍然感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:29:04.653

我也遇到了这个。经过大量挖掘后，发现这是可行的（注意对值的更改）：

```
conn = MySQLdb.connect(user="root", passwd="xxxxx",db="nutrients")
cur = conn.cursor()
test = "Canned Corn"
cur.execute("INSERT INTO food (name) VALUES ({0})", (test,))
conn.commit() 
```

[背景信息：在非官方 Python 包](http://www.lfd.uci.edu/~gohlke/pythonlibs/)站点上发布的 MySQLdb 到 Python 3 的移植中，cursors.py 中的执行函数被修改为使用 format() 而不是 % 运算符。因此，为什么 %s 保留在 SQL 语句中而不是被替换。看起来这些更改从未上传到[官方来源](http://mysql-python.hg.sourceforge.net/hgweb/mysql-python/MySQLdb-2.0/log/566baac88764/MySQLdb/cursors.py)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:59:23.823

我认为您不需要任何棘手或高级的 SQL；你只需要存储和检索一些东西。所以，我认为 ORM 可能会让你的生活更轻松。

我建议你尝试使用秋季 ORM：

[http://pypi.python.org/pypi/autumn/0.5.1](http://pypi.python.org/pypi/autumn/0.5.1)

那是一个小而简单的 ORM，易于理解和使用。

另一个适用于 Python 的优秀且流行的 ORM 是 SQLAlchemy：

[http://www.sqlalchemy.org/](http://www.sqlalchemy.org/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-04T21:35:29.133

你应该这样写你的代码：

```
 conn = MySQLdb.connect(user="root", passwd="xxxxx",db="nutrients")
 cur = conn.cursor()
 test = "Canned Corn"
 cur.execute("INSERT INTO food (name) VALUES (%s)" % (test,) )
 conn.commit() 
```

如果您是 python 新手并且有一些编程经验，那么请遵循[Dive Into Python](http://www.diveintopython.net/)书。免费。

# ruby-on-rails - 铁路更新

> ID：10887378
> 
> 赞同：1
> 
> 时间：2012-06-04T19:49:19.470
> 
> 标签：ruby-on-rails, heroku, bundler

我尝试运行`git push heroku`并显示以下错误

```
In Gemfile:

rails (= 3.2.3) depends on

  railties (= 3.2.3)

jquery-rails (= 2.0.0) depends on

  railties (3.2.5) 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'jquery-rails', '2.0.0'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.5'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
end

# Gems used only for assets and not required
# in production environments by default.

group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
  gem 'cucumber-rails', '1.2.1', require: false
  gem 'database_cleaner', '0.7.0'
  gem 'rb-fsevent', '0.4.3.1', :require => false
  gem 'growl', '1.0.3'
  gem 'guard-spork', '0.3.2'  
  gem 'spork', '0.9.0'
  gem 'launchy', '2.1.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

我将我的 rails 版本更改为 3.2.5 并进行了捆绑更新和捆绑安装。仍然遇到同样的问题，因此我将 rails 版本改回 3.2.3。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T21:30:48.283

几天前，我遇到了一个与此相关的问题。
我所做的是

1.  移除 Gemfile.lock
2.  从 Gemfile 中删除了 gem 的版本
3.  `Bundle install`

除非必要，否则我通常不会在 Gemfile 中使用版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T20:47:42.743

检查 Gemfile.lock 并搜索哪个 gem 需要 railties 3.2.5。

也尝试删除 Gemfile.lock 并再次运行“捆绑安装”

# android - 横向的 Android 搜索对话框

> ID：10887380
> 
> 赞同：0
> 
> 时间：2012-06-04T19:49:29.260
> 
> 标签：android, xml, dialog

我在我的应用程序中使用了一个 android 搜索对话框，它在纵向方向上运行良好。但是，一旦您翻转到横向，searchpage xml 就会被一个大的白色对话框覆盖。如果您进行搜索，该框仍然存在，并且您点击设备或模拟器上的后退按钮，白色的大框滑开并出现您的搜索结果。似乎代码中的某个地方将布局宽度设置为 fill_parent 或其他东西。我四处寻找解决方案，有人建议`android:imeOptions="flagNoExtractUi"`在 xml 文件夹中添加到 seachable.xml ，但这似乎没有任何效果。

我发现这`onSearchRequested();`是抛出填充屏幕的白框的方法。这也可能与在横向、垂直方向时不调用软件键盘这一事实有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:30:43.770

您可以以 Activity 的形式创建自己的 Dialog。你这样做：

```
 <activity
    android:theme="@android:style/Theme.Dialog"
    android:configChanges="keyboardHidden|orientation|screenSize"
    android:name="ExampleActivity" >
 </activity> 
```

这个活动当然可以通过 XML 以任何你喜欢的方式排列。这样，您可以优雅地处理从纵向到横向的变化。

注意：如果您使用的是 ICS (14+)，则只需要“screenSize”属性。

# mysql - 同月两个不同的总和

> ID：10887388
> 
> 赞同：1
> 
> 时间：2012-06-04T19:50:05.477
> 
> 标签：mysql, join, group-by

我试图在同一年的同一个月获得不同的总和，只是为了获得不同类型的总和。尝试使用此代码：

```
SELECT a.invoice_type, year( a.date ) AS Year, 
       date_format( a.date, '%M' ) AS `month` , 
       Sum( x.amount * x.price ) AS sum FROM records x 
JOIN paper_invoice a ON x.invoice_id = a.invoice_id 
WHERE year( a.date ) = '2012' 
GROUP BY a.invoice_type, Year( a.date ) , Month( a.date ) LIMIT 0 , 30 
```

但它会在不同的行中给出结果：

[http://www.part.lt/img/1505f0f13172922150febede85ddbf0925.png](http://www.part.lt/img/1505f0f13172922150febede85ddbf0925.png)

但我需要它看起来像：

```
Year | Month   | SUM_GRYNAIS      | SUM_PAVEDIMU
2012 | January | 7597.14997705445 | 58740.2800849304 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:57:47.643

尝试这个：

```
SELECT Year, Month,
MAX(CASE WHEN invoice_type = 'GRYNAIS' THEN sum END) As Sum_GRYNAIS
MAX(CASE WHEN invoice_type = 'PAVEDIMU' THEN sum END) As SUM_PAVEDIMU
FROM
(
SELECT a.invoice_type, year( a.date ) AS Year, 
date_format( a.date, '%M' ) AS `month` , Sum( x.amount * x.price ) AS sum 
FROM records x JOIN paper_invoice a ON x.invoice_id = a.invoice_id 
WHERE year( a.date ) = '2012' GROUP BY a.invoice_type, Year( a.date ) , 
Month( a.date ) LIMIT 0 , 30     

)
GROUP BY Year, Month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:56:19.547

因为每个月都有不同的价值。仅在现场年份尝试 Group By。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:56:33.833

您基本上是在寻找 PIVOT。MySql 没有 PIVOT 功能，但您仍然可以完成此操作。以下是 MySql 中的 PIVOT 示例：

[http://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

# python - 使用函数内声明的值，函数外

> ID：10887393
> 
> 赞同：1
> 
> 时间：2012-06-04T19:50:23.913
> 
> 标签：python, function, variables

如果定义了这样的函数：

```
def plop(plop):
    ploplop = 1234
    if plop == ploplop:
         print "I plopped" 
```

如何将 ploplop 置于函数范围之外？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T19:51:24.070

你返回它，然后在另一边捕获它。

```
def plop(plop):
    ploplop = 1234
    if plop == ploplop:
         print "I plopped"
    return plopplop

someval = plop(1235) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:52:12.987

```
def plop(plop):
    global ploplop 
    ploplop = 1234
    if plop == ploplop:
         print "I plopped" 
```

但几乎不应该使用全局变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:30:07.453

另一种解决方案是向函数添加属性。（我更改了函数名称，因为 plops 太多）：

```
def f(plop):
    f.ploplop = 1234
    if plop == f.ploplop:
         print "I plopped"
f(5)
print f.plopplop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:55:18.370

你没有提供足够的信息来给出一个好的答案。这两个函数和变量之间有什么关系？

如果变量表示两个函数操作的某种持久状态，那么您希望创建一个具有两个方法和一个成员变量的类：

```
class Plopper( object ):
    ploplop = 1234

    def plop( self, ploppity ):
        if ploppity == self.ploplop:
            print "I plopped"   # ew.

    def plop2( self, ploppity ):
        if ploppity == self.ploplop * 2:
            print "I plopped twice"

a = Plopper()

a.plop( 1234 )
a.plop2( 2468 ) 
```

如果变量控制函数的行为并且您只需要确保它们是一致的，则将变量从方法中拉出到全局（请注意，与 user1320237 相反，如果您不需要将其声明为全局）仅读取其值）：

```
PLOPLOP = 1234    # I like the all-caps convention for global constants

def plop(plop):
    if plop == PLOPLOP:
         print "I plopped" 

def plop2(plop):
    if plop == 2 * PLOPLOP:
         print "I plopped twice" 

plop(1234)
plop2(2468) 
```

# android - TimerTask 不生效

> ID：10887396
> 
> 赞同：2
> 
> 时间：2012-06-04T19:50:47.800
> 
> 标签：android, timer, timertask

这是我的代码：

```
public class SomeName extends MapActivity implements OnClickListener, OnTouchListener{
public Timer t1 = new Timer();
public TimerTask tt;
public long interval = 5000;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.map);
    timer();
}
public final void timer()
{ 

    t1 = new Timer();
    tt = new TimerTask() {
        @Override
        public void run() {
            systemClick();
        }
    };
    t1.scheduleAtFixedRate(tt, 10000, interval);
}
 public void systemClick()
{
      Toast.makeText(getApplicationContext(),"System Button Clicked", 5).show();
} 
```

实际上，我想调用一些函数来刷新我的位置。

但我不明白为什么我从来没有在屏幕上看到吐司。我是安卓新手。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:07:07.607

在您的活动中使用处理程序

```
final Handler handlerforadd = new Handler();
Runnable runnableforadd  = new Runnable() {
    @Override
    public void run() {
        handlerforadd.postDelayed(this, 1000);
    }   
};

handlerforadd.postDelayed(runnableforadd, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:33:43.287

原因是 Toast 必须在 UI 线程上完成。在您当前的代码中，该方法`run()`正在单独的线程上执行。我建议查看有关进程和线程的这篇[文章。](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)@parag 是正确的，使用 Handler 是获取 UI 线程引用的一种方法，但还有其他方法。

# iphone - 在 UIWebView/Phonegap 中使用 web 资源和 appcache 的“合法性”

> ID：10887397
> 
> 赞同：5
> 
> 时间：2012-06-04T19:50:51.960
> 
> 标签：iphone, html, caching, uiwebview, app-store

我们正在尝试开发一个混合应用程序，它可以通过使用来自互联网的 css/javascript/html 进行自我更新，而不是将它们存储在 phonegap 项目中。

就像 [UIWebView 中的 Html5 缓存清单一样？](https://stackoverflow.com/questions/1540240/html5-cache-manifest-in-a-uiwebview)

[UIWebView 中的 HTML5 AppCache](https://stackoverflow.com/questions/1247264/html5-appcache-in-uiwebview)

它现在在 iOS 5 和 5.1 上运行良好

事实上，我们在 phonegap index.html 或 location.href 中重定向到网站。该网站具有离线清单，它允许 phonegap 应用程序在离线模式下第二次启动和工作（在第一次缓存所有资源之后）。清单的更改确实会正确更新应用程序。我曾尝试终止手机中的应用程序，并在网站关闭时重新启动它 - 它仍然有效。

有一些允许自我更新的解决方案——例如基于 phonegap 的 Worklight。因此，无声的自我更新似乎不再是问题。

所以问题是，有没有人向应用商店提交过类似的应用程序？应用程序中可能根本没有代码，它所做的只是访问网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:56:25.673

Apple 似乎允许应用程序下载数据更新和 Javascript/HTML 以在 UIWebViews 中使用。几年前，他们甚至举办了一场关于数据驱动应用程序的 WWDC 会议。

但请注意 Apple 的应用审查指南中的此项：

2.12 应用程序......只是捆绑为应用程序的网站......可能会被拒绝。

确定您的应用程序是否可接受的唯一方法是将其提交给 Apple 进行审核，因为“类似”应用程序似乎不会为任何未来的批准设置任何先例。

# javascript - 从 jQuery Ajax 调用中捕获嵌入变量

> ID：10887399
> 
> 赞同：0
> 
> 时间：2012-06-04T19:50:53.680
> 
> 标签：javascript, jquery, ajax, variables

我正在尝试将我们当前的 javascript 框架转换为 jQuery，因为我们需要 jQuery 的附加功能来进行进一步的项目。到处都有一个特定的功能（它是如何设置的……），我想用等效的 jQuery 覆盖它。这是对 php 页面进行 ajax 调用的原始 Javascript 函数。

```
function ajax(n,f,v){
    var ajaxRequest;
    if(window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        ajaxRequest=new XMLHttpRequest();
    }
    else{// code for IE6, IE5
        ajaxRequest=new ActiveXObject("Microsoft.XMLHTTP");
    }
    ajaxRequest.onreadystatechange=function(){
        if(ajaxRequest.readyState==4 && ajaxRequest.status==200){

            //This is where the result is stored
            result = ajaxRequest.responseText;
            //parseScript pulls out the content and the div and populates the div with the retrieved content.
            parsed_result = parseScript(result);
            document.getElementById(parsed_result.div).innerHTML = parsed_result.source;
        }
    }
    ajaxRequest.open("GET","view.php?n="+n+"&f="+f+"&v="+v+"&time="+(new Date).getTime(),true);
    ajaxRequest.send();
}

function parseScript(_source) {
    var source = _source;
    var scripts = new Array();

    while(source.indexOf("<script") > -1 || source.indexOf("</script") > -1) {
        var s = source.indexOf("<script");
        var s_e = source.indexOf(">", s);
        var e = source.indexOf("</script", s);
        var e_e = source.indexOf(">", e);

        scripts.push(source.substring(s_e+1, e));
        source = source.substring(0, s) + source.substring(e_e+1);
    }

    for(var i=0; i<scripts.length; i++) {
        try {
            eval(scripts[i]);
            var div = div;
        }
        catch(ex) {
        }
    }

    return {source: source, div: div};
} 
```

这是刚刚检索到的页面顶部（因此是 parseScript 函数）。这个 div 变量告诉在哪里放置检索到的内容。

```
<script>
    var div = 'content_1';
</script>
<!-- some retrieved html --> 
```

我只想“设置在”javascript 函数之上的 jQuery 函数将要求我根本不编辑检索 ajax 文件。请参阅下文，了解我对 jQuery 调用的尝试。

```
function jAjax(n,f,v) {
$.get('view.php', 'n='+n+'&f='+f+'&v='+v, function(result) {
        if(result) {
            if($('#'+result.div).length) {
                $('#'+result.div).html(result);
            } else {
                console.log("Couldn't find the div= "+result.div);
            }
        } else {
            console.log("Couldn't find the names for n="+n+' f='+f+' v='+v);
        }
    });
} 
```

所以我的问题是如何使用 jQuery 从 ajax 调用中捕获变量，以便我可以使用检索到的 html 填充捕获 div？

另一件事，是的，除了这样做之外，我还可以想出很多方法来做到这一点，但是对于我到达这里时已经设置好的当前框架，这种方法是最简单的。因此，请仅建议从 ajax 脚本中检索变量的方法。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:02:10.347

没有内置方法可以获取您通过 jquery ajax 方法检索的 javascript 文件中的变量值。但是，您可以只在 $.get 回调中调用 parseScript 函数：

```
$.get('view.php', 'n='+n+'&f='+f+'&v='+v, function(result) {
        if(result) {
            parsed_result = parseScript(result);

            if($('#' + parsed_result.div).length) {
                $('#' + parsed_result.div).html(parsed_result.source);
            } else {
                console.log("Couldn't find the div= " + parsed_result.div);
            }
        } else {
            console.log("Couldn't find the names for n="+n+' f='+f+' v='+v);
        }
    }); 
```

**编辑：**

您可能必须使用较长的 $.ajax(...) 方法进行此调用，将内容类型设置为文本，因为您在页面中有一个脚本标记。

**编辑（替代）：**

您可以简单地在 $.get 回调中引用变量“div”，因为此时脚本将被执行：

```
$.get('view.php', 'n='+n+'&f='+f+'&v='+v, function(result) {
        if(result) {               

            if($('#' + div).length) {
                $('#' + div).html(result);
            } else {
                console.log("Couldn't find the div= " + div);
            }
        } else {
            console.log("Couldn't find the names for n="+n+' f='+f+' v='+v);
        }
    }); 
```

# jquery - 为什么 responseText 返回空白？

> ID：10887401
> 
> 赞同：4
> 
> 时间：2012-06-04T19:51:08.220
> 
> 标签：jquery, mysql, ajax, responsetext

我有一个数据库表，其字段包含位置的纬度和经度坐标。我想使用数据库中的信息为 Google 地图视图创建标记。

我已经将查询功能实现为

```
function getCords(){
  $link = connectDB();
  $query = "SELECT * FROM tour";
  $results = mysqli_query($link, $query);

  $jsonArray = array();
  while ($row = mysqli_fetch_assoc($results)){
    $jsonArray[] = array('fileName' => $row['FileName'], 'lat' => $row['Lat'], 'lon' => $row['Lon']);

  }

return json_encode($jsonArray);
} 
```

当我从 php 页面调用此函数时，它返回通常的 JSON 格式。

我的问题是执行 ajax 查询。我在一个包含六个左右控制登录、注销、注册等实用程序功能的 php 脚本文件中有上面的查询功能。要通过 jquery 查询数据库，我试过

```
var request = $.ajax({
  type:"GET",
  url: "includes/phpscripts.php?action=cords",
  type: "json"
});

var response = request.responseText; 
```

我的问题是响应总是空的。这是由于 URL 的形成还是其他原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:52:17.380

```
 $.ajax({
      type:"GET",
      url: "includes/phpscripts.php?action=cords",
      dataType: 'json', // necessary, because you're sending json from server
      success: function(response) {  // response will catch within success function
        console.log(response);
      }
    }); 
```

或者

```
 var request = $.ajax({
      type:"GET",
      url: "includes/phpscripts.php?action=cords",
      dataType: 'json', // necessary, because you're sending json from server
    }).done(function(response) {
       console.log(response);
    }); 
```

### 笔记

而不是`return json_encode($jsonArray);`，使用`echo json_encode($jsonArray);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:28:45.077

响应是空白的，因为在执行该行代码时服务器没有返回响应。尝试在 ajax 回调中设置 responseText。见下文，

```
var response = '';
var request = $.ajax({
  type:"GET",
  url: "includes/phpscripts.php?action=cords",
  type: "json"
}).done (function (data) {
   console.log(data); //json object as jquery converts it for you
   console.log(request.responseText); //string text as returned the server.
   response = request.responseText; 
   //^-- response is a string text as returned the server.
}); 
```

**演示：http:** [//jsfiddle.net/hUY6v/](http://jsfiddle.net/hUY6v/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T19:56:08.750

见[jQuery.ajax](http://api.jquery.com/category/ajax/)，你没有使用正确的格式，这就是为什么响应是空白的。

成功处理程序将返回来自服务器端的响应。所以像这样使用它：

```
 $.ajax({
      type:"GET",
      url: "includes/phpscripts.php?action=cords",
      type: "json"
      success : function(response){
               console.log(response);
        }
   }); 
```

# spring-mvc - 如何限制 Spring MVC 控制器的 @RequestMapping 路径中 的路由扩展？

> ID：10887409
> 
> 赞同：2
> 
> 时间：2012-06-04T19:51:50.010
> 
> 标签：spring-mvc, routes, uri, controllers

我有一个相当简单的任务要完成，但似乎找不到有关 Spring MVC 路由的信息。我有一个非常简单的控制器，可以将路径路由到视图：

```
@Controller
@RequestMapping(value = "/help")
public class HelpController {

    private static final String HELP = "help";

    @RequestMapping(method = RequestMethod.GET)
    public String help(Model model, Locale locale) {
        model.addAttribute("locale", locale);
        return HELP;
    }
} 
```

*如果http://mysite.com/help.some.extension.is.entered* ，我想抛出 404 ，但 Spring 似乎将示例解析为 /help。javadoc 说 @RequestMapping 注释只是一个 servlet URI 映射，但我认为 /help 意味着它需要完全匹配。任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T20:09:39.017

对于 Spring 4，很容易解决：

```
<mvc:annotation-driven>
    <mvc:path-matching suffix-pattern="false" />
</mvc:annotation-driven> 
```

所以你仍然可以使用`mvc:annotation-driven`你的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:12:30.427

您可以在 @RequestMapping 注释中提及它

它仅与 Servlet URL 模式相同。

```
@Controller
public class HelpController {

    private static final String HELP = "help";

    @RequestMapping(value = "/help" method = RequestMethod.GET)
    public String help(Model model, Locale locale) {
        model.addAttribute("locale", locale);
        return HELP;
    }

    @RequestMapping(value = "help/*" method = RequestMethod.GET)
    public String helpWithExtraWords() {
        return "error";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:33:05.170

我能想到的最好方法是明确配置您的 RequestMappingHandlerMapping 以不考虑后缀路径，这样：

```
<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useSuffixPatternMatch" value="false"></property>
</bean> 
```

但是，如果您使用 配置了 Spring MVC `mvc:annotation-driven`，这将不起作用，您将不得不扩展整个 handlerAdapter 定义，这并不难做到，沿着这些线（这不完整，您可以`org.springframework.web.servlet.config.AnnotationDrivenBeanDefinitionParser`查看完整定义）：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean>

<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useSuffixPatternMatch" value="false"></property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:49:56.743

在 Spring 3.0.X 中，您可以使用[useDefaultSuffixPattern](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html#setUseDefaultSuffixPattern%28boolean%29)属性。

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="useDefaultSuffixPattern" value="false" />
</bean> 
```

您将需要删除`</mvc:annotation-driven>`

参考[SPRING MVC 中的 URL 模式限制](https://stackoverflow.com/questions/10883192/url-pattern-restricting-in-spring-mvc)

# java - 使用 String[][] 模拟 contains()

> ID：10887411
> 
> 赞同：0
> 
> 时间：2012-06-04T19:52:09.890
> 
> 标签：java

我有两个 SQL 表。在抓取两个表后`ResultSets`，我将它们存储在 中`String[][]s`，按公共 id 列排序。这些表应该包含相同的数据，但是其中一个可能具有与另一个相同的行的重复项。为了检查表 A 中的每个`String[]`是否在表 B 中至少出现一次，我需要`contains()`为`String[]`.

这是我到目前为止所拥有的，但我很困惑（也不确定是否有更有效的解决方案）。给它源表和目标表。它获取`String[]`源表中的每一个，并且（应该）遍历目标表中的每一个，并通过检查是否至少有一个与原始的、逐个元素的匹配来找到目标中某处`String[]`的源实例。谁能指出我正确的方向和/或填写空白？这不是家庭作业或任何作业，我正在重构一些代码并且脑子里放了一个大屁。谢谢！`String[]``String[][]``String[]``String[]`

```
 public boolean targetContainsSource(String[][] s, String[][] t) {
    boolean result = true;

    //For each String[] in String[][] s
    for (int i = 0; i < s.length; i++) {

        //For each String[] in String[][] t
        for (int j = 0; j < t.length; j++) {

            //For each String in t's String[]
            for (int k = 0; k < t[0].length; k++) {
                if (!s[i][k].equals(t[j][k])) {

                }
            }
        }
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:59:52.663

可以使用[Arrays.equals()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29)删除最里面的循环。

对于第一个数组的每个元素，您应该定义一个`found`布尔变量，只有在第二个数组中找到该元素时才会将其设置为 true。一旦第二个循环结束，如果这个变量仍然是假的，你已经找到了第一个数组的一个元素不在第二个中，你可以立即返回。

当然，只要将此变量设置为 true，您就可以跳出第二个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:00:41.727

本质上，您通常需要执行以下操作：

*   使用强散列函数对每一行**进行散列**：这为您提供了一个整数（可能足够长）或表示整行的单个字符串/字节数组
*   然后继续进行，就好像您正在比较两个“列表”行一样。这些“列表”中的至少一个实际上应该存储在 HashSet/HashMap 中，其 contains() 方法是有效的。

对于散列函数，您可以使用 MD5（例如，您可以[使用此代码](http://www.javamex.com/tutorials/cryptography/hash_functions_algorithms.shtml)，但使用“MD5”而不是“SHA-1”）。您可以使用 MessageDigest.compare() 与表示哈希码的字节数组进行比较。

如果您只有少量（例如，几万）行，那么您可以[使用 64 位散列码](http://www.javamex.com/tutorials/collections/strong_hash_code_implementation.shtml)——这只是具有每个散列存储在 long 中的优点，因此它们有点更容易调整和比较。但是 64 位哈希码仅足以保证数万到数十万个对象的哈希的唯一性（=在您的情况下为不同的行）。

PS如果您准备将所有数据存储在内存中，那么您也可以将所有列连接到一个字符串中作为每行的“哈希”。诀窍是使检查有效，以将表的行表示形式之一存储在 HashSet/HashMap 中。

# java - 如何在没有 JavaScript 的情况下设计可扩展的 HTML 表单？

> ID：10887415
> 
> 赞同：5
> 
> 时间：2012-06-04T19:52:22.200
> 
> 标签：java, html, forms, servlets

**如果不使用 JavaScript**，设计和处理一个用户可以添加任意数量的新输入字段的表单是非常乏味的。

目前我正在执行以下操作：在表单中使用**两个不同的提交按钮**，一个用于添加新输入字段，一个用于提交导致数据库请求的表单。

*   使用的方法是**POST**

    为了添加新的输入字段，我想使用**GET**但由于一种形式的两种方法是不可能的，我必须在 POST 请求中进行。

*   为一种类型的输入字段进行此操作相当容易，但是当您需要为子表单（同一表单中的某些输入字段组）执行此操作时，这不仅变得乏味，而且**容易出错**！

我不满意，是否有更智能的方法来实现这一点，而无需开始编写大量处理代码并进行重定向，或者至少简化实现以降低错误风险！

**此外，也许Java**提供了一个解决方案来解决这个一般优雅的问题，因为我使用的是**Java Servlets**。

打开 JavaScript 后，我​​会提供一个单独的解决方案，我只关心后备解决方案，这不是正常情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:54:54.600

See, working without JavaScript severely restrict your abilities: you have to rely upon the standard HTTP request/response cycle. In other words, you have to rebuild a new page (adding some input field) and send this new page *each time* - there's no workarounds.

Here's how I would implement it:

```
<form action="/path/to/action" method="post">
  <input name="param_a" />
  <input name="param_b" />
  <button type="submit" name="next_input" value="param_c">Add a field</button>
  <button type="submit" name="submit">Submit your form</button>
</form> 
```

... then within the server-side code I'd just check whether `next_input` param is sent or not. If sent, its value will be used to get the control which is to be added - and give the corresponding value (`param_d`, for example) to the next `next_input`.

UPDATE: but I just can't help wondering is this really necessary. Usually we design for 'No JS' cases when these pages are typical landing pages (scanned by search robots). Thinking about some users that will go to your page without JS enabled, yet willing to use it with all pretty things enabled... well, it's not very cost-effective, to say the least. )

# android - System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Data.SqlClient.SqlException：

> ID：10887418
> 
> 赞同：1
> 
> 时间：2012-06-04T19:52:44.507
> 
> 标签：android, web-services, sql-server-2008

我有一个 android 应用程序，我想在其中从 SqlServer 2008 检索数据。

android 应用程序连接到访问 Sqlserver 数据库的 Web 服务，我尝试调用从数据库中检索数据的方法“getCommentsTest”，但出现此错误：

System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Data.SqlClient.SqlException：无法打开登录请求的数据库“我的数据库”。登录失败。用户“NT AUTHORITY\NETWORK SERVICE”登录失败。

知道我在发布后尝试在浏览器上查看 Web 服务，我调用了该函数并且它起作用了。

这是调用网络服务的android代码：

公共无效调用TestGetComments（）{尝试{

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME_GET_COMMENTS);

       request.addProperty("eID", 140);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_TEST);
        androidHttpTransport.call(SOAP_ACTION_GET_COMMENTS, envelope);

        Object result = (Object)envelope.getResponse();

        String xml=result.toString();
        Document doc=XMLfromString(xml);

        doc.getDocumentElement().normalize();

        //System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("Comment");
        //System.out.println("-----------------------");
                //String commentBody,userName;
                String commentBody="";

        for (int i = 0; i < nList.getLength(); i++) 
        {

           Node nNode = nList.item(i);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) 
           {

              Element eElement = (Element) nNode;
                      //Comment c=new Comment();
             commentBody += getTagValue("comment", eElement);
              commentBody+= getTagValue("uPhone", eElement);
                  //System.out.println("Nick Name : " + getTagValue("nickname", eElement));
              //System.out.println("Salary : " + getTagValue("salary", eElement));
                      //comments.add(c);
           }
       // tv.setText(result.toString());
           tv.setText(commentBody);
        } 
    }
    catch (Exception e) {
        tv.setText(e.getMessage());
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:21:25.587

这是与权限相关的问题。当您在浏览器中查看 Web 服务时，它是否要求您登录？

您使用什么方法与 Web 服务通信？你能发布那个代码。我愿意打赌您没有通过任何凭据，但如果没有看到代码，我无法确定。

您有权访问 SQL 服务器吗？如果是这样，您是否检查了错误日志以查找无效登录？

基于这个[SO question](https://stackoverflow.com/questions/7037105/is-there-any-solid-way-to-deal-with-windows-integrated-ntlm-authentication-fro)，没有简单的方法可以使用来自 android 的 NTLM 对 Windows 服务进行身份验证。

他们的用户在 sql server 上是什么并不重要，因为从 android 设备的角度来看，他们没有经过身份验证。

# c# - 在 asp.net 后面的代码中更改 CSS

> ID：10887423
> 
> 赞同：5
> 
> 时间：2012-06-04T19:53:12.317
> 
> 标签：c#, asp.net, css, code-behind

在我的 aspx 页面中，我有这个 div..

`<div id="downloadableProducts" runat="server"><a href="#">Downloadedable Products</a></div>`

我正在尝试像这样更改后面代码中的css..

`downloadableProducts.Style("display") = "none";`

但这不起作用，我`downloadableProducts`在后面的代码中收到错误和红色下划线，并显示“当前上下文中不存在名称‘downloadableProducts’”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T19:57:27.837

您需要添加`runat="server"`到 div 并`HtmlControl`在代码隐藏中将其作为 a 访问。例如：

```
HtmlControl div1 = (HtmlControl)Page.FindControl("downloadableProducts"); 
```

问问题 问问题 2012-06-04T19:53:14.767 10587 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 好的，我在 2001 年开始使用 html 和 css。我曾经做过这样的事情（创建一个具有“垂直列”布局的网站）： <title>Vertical-column layout</title>

|  |
|  |  |  |
|  |

很容易，一切都按照我想要的方式自动对齐，没有 css 头痛等。那时的生活很好。但是，不久前，我读到不应再使用这种方法。我打算使用一堆 div 尝试一种新方法，但是 w3c 和 w3c 的验证不喜欢你使用块元素作为内联元素...... WTF ！！！ 所以......我的挫败感让我问你们： 如何？如何以“现代方式”完成这样的事情......尽可能简单？html 5有更好的方法吗？ 为什么？为什么现在我们不应该使用这种表格方法在网站上获得“垂直列布局”？ 为什么 RVM 会为不同的 gemset 安装重复的 gem？ 因此，我为我的每个 rails 项目创建了一个单独的 rvm gemset。他们都使用相同版本的 ruby1.9.3 。 这会导致bundle install为两个项目完全安装一组新的 gem。另一个项目是否在另一个 gemset 中安装了完全相同版本的 gem 并不重要。我猜这对我来说是预期的行为，但这似乎是对硬盘空间和带宽的低效使用。 我知道我可以手动将其中一些 gem 移动到全局 gemset，但这对我来说似乎很乏味，而且如果我的依赖项针对特定项目发生更改，也容易中断。 有没有更好的方法来组织事物，或者让 rvm 自动检测何时已安装 gem 版本并使用该副本？ 或者我应该使用 RVM 的更好替代方案吗？ htmlcss 4 3 回答 3 This answer is useful 6 HOW? 选项 1：谷歌“CSS 3 列布局”。在过去 6 年左右的时间里，这已经得到了很好的覆盖，并且那里有大量的教程。 选项 2：谷歌“CSS 框架”并选择一个来构建您的布局。960.gs 很受欢迎。 WHY? 理想情况下，您会使用表格来存储表格数据，并使用 css 来布局页面的其余部分。为什么？嗯，理论上，CSS 给了你更多的灵活性。最好的例子可能是响应式网页设计。在 iPhone 上，我可能需要 2 列。在我的 iPad 上，我可能需要 4 列。这一切都可以通过 CSS 完成，但如果使用表格硬连接 HTML，就会变得非常复杂。 于 2012-06-04T19:57:15.583 回答 This answer is useful 5 下面是我拼凑的一个基本网格，你可以在任何规模的网站上使用。您需要使用溢出隐藏或 clearfix 清除列上的浮动。如果您的项目不需要支持 IE7，您可以使用 box-sizing border-box 为您的列添加填充，否则在每列中添加一个额外的元素用于填充。 虽然我可以理解，使用表格制作列非常容易，这几乎是唯一更适合布局的东西。 HTML：  CSS： .grid { } .grid .col { float: left; } .grid .col.s1of1 { width: 100%; } .grid .col.s1of2 { width: 50%; } .grid .col.s1of3 { width: 33.33333333%; } .grid .col.s2of3 { width: 66.66666666%; } .grid .col.s1of4 { width: 25%; } .grid .col.s3of4 { width: 75%; } .grid .col.s1of5 { width: 20%; } .grid .col.s2of5 { width: 40%; } .grid .col.s3of5 { width: 60%; } .grid .col.s4of5 { width: 80%; } 于 2012-06-06T15:31:16.863 回答 This answer is useful 2 CSS3 有一些简洁的列布局选项，但它们在兼容性方面不是很好，并且大量浏览器不支持相当数量的选项。 如果您正在寻求制作可变/固定宽度的列，那么这可能是您正在寻找的文章： http://www.alistapart.com/articles/holygrail 使用此方法，您可以将一个或多个 div 设置为固定宽度，同时适当调整另一个 div 的大小以填充页面。 如果您只想调整所有列的大小，那么只需将它们全部设置float: left为width: {percentage of page}% 于 2012-06-04T19:58:17.917 回答 Related 1 gettext - 自制医生：找到gettext 0 javascript - Opera：尝试从脚本存储中读取值时出现安全错误 2 c# - 根据行索引列表从 DataGridView 获取项目列表 3 http - 如何查看（嗅探）http 流量？ 1 wpf - 这是 XAML a bad example?[2](/questions/11870455 "Question score (upvotes - downvotes)")[playframework - playframework 1.2.x How to have my method call every time play reloads in dev mode?](/questions/11870455)[2](/questions/11870460 "Question score (upvotes - downvotes)")[objective-c - 在 iphone 中实现日志记录机制的最佳方法？](/questions/11870460)[1](/questions/11870461 "Question score (upvotes - downvotes)")[html - Does HTML5 video only work on an actual web server?](/questions/11870461)[1](/questions/11870463 "Question score (upvotes - downvotes)")[ios - Push view controller without animating nav bar](/questions/11870463)[3](/questions/11870465 "Question score (upvotes - downvotes)")[javascript - 尽管语法错误，但在浏览器中读取 javascript 文件](/questions/11870465)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

  <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# html - CSS：没有垂直列布局 好的，我在 2001 年开始使用 html 和 css。我曾经做过这样的事情（创建一个具有“垂直列”布局的网站）： <title>Vertical-column layout</title> 问问题 问问题 2012-06-04T19:53:14.767 10587 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 好的，我在 2001 年开始使用 html 和 css。我曾经做过这样的事情（创建一个具有“垂直列”布局的网站）： <title>Vertical-column layout</title>

|  |
|  |  |  |
|  |

很容易，一切都按照我想要的方式自动对齐，没有 css 头痛等。那时的生活很好。但是，不久前，我读到不应再使用这种方法。我打算使用一堆 div 尝试一种新方法，但是 w3c 和 w3c 的验证不喜欢你使用块元素作为内联元素...... WTF ！！！ 所以......我的挫败感让我问你们： 如何？如何以“现代方式”完成这样的事情......尽可能简单？html 5有更好的方法吗？ 为什么？为什么现在我们不应该使用这种表格方法在网站上获得“垂直列布局”？ 为什么 RVM 会为不同的 gemset 安装重复的 gem？ 因此，我为我的每个 rails 项目创建了一个单独的 rvm gemset。他们都使用相同版本的 ruby1.9.3 。 这会导致bundle install为两个项目完全安装一组新的 gem。另一个项目是否在另一个 gemset 中安装了完全相同版本的 gem 并不重要。我猜这对我来说是预期的行为，但这似乎是对硬盘空间和带宽的低效使用。 我知道我可以手动将其中一些 gem 移动到全局 gemset，但这对我来说似乎很乏味，而且如果我的依赖项针对特定项目发生更改，也容易中断。 有没有更好的方法来组织事物，或者让 rvm 自动检测何时已安装 gem 版本并使用该副本？ 或者我应该使用 RVM 的更好替代方案吗？ htmlcss 4 3 回答 3 This answer is useful 6 HOW? 选项 1：谷歌“CSS 3 列布局”。在过去 6 年左右的时间里，这已经得到了很好的覆盖，并且那里有大量的教程。 选项 2：谷歌“CSS 框架”并选择一个来构建您的布局。960.gs 很受欢迎。 WHY? 理想情况下，您会使用表格来存储表格数据，并使用 css 来布局页面的其余部分。为什么？嗯，理论上，CSS 给了你更多的灵活性。最好的例子可能是响应式网页设计。在 iPhone 上，我可能需要 2 列。在我的 iPad 上，我可能需要 4 列。这一切都可以通过 CSS 完成，但如果使用表格硬连接 HTML，就会变得非常复杂。 于 2012-06-04T19:57:15.583 回答 This answer is useful 5 下面是我拼凑的一个基本网格，你可以在任何规模的网站上使用。您需要使用溢出隐藏或 clearfix 清除列上的浮动。如果您的项目不需要支持 IE7，您可以使用 box-sizing border-box 为您的列添加填充，否则在每列中添加一个额外的元素用于填充。 虽然我可以理解，使用表格制作列非常容易，这几乎是唯一更适合布局的东西。 HTML：  CSS： .grid { } .grid .col { float: left; } .grid .col.s1of1 { width: 100%; } .grid .col.s1of2 { width: 50%; } .grid .col.s1of3 { width: 33.33333333%; } .grid .col.s2of3 { width: 66.66666666%; } .grid .col.s1of4 { width: 25%; } .grid .col.s3of4 { width: 75%; } .grid .col.s1of5 { width: 20%; } .grid .col.s2of5 { width: 40%; } .grid .col.s3of5 { width: 60%; } .grid .col.s4of5 { width: 80%; } 于 2012-06-06T15:31:16.863 回答 This answer is useful 2 CSS3 有一些简洁的列布局选项，但它们在兼容性方面不是很好，并且大量浏览器不支持相当数量的选项。 如果您正在寻求制作可变/固定宽度的列，那么这可能是您正在寻找的文章： http://www.alistapart.com/articles/holygrail 使用此方法，您可以将一个或多个 div 设置为固定宽度，同时适当调整另一个 div 的大小以填充页面。 如果您只想调整所有列的大小，那么只需将它们全部设置float: left为width: {percentage of page}% 于 2012-06-04T19:58:17.917 回答 Related 1 gettext - 自制医生：找到gettext 0 javascript - Opera：尝试从脚本存储中读取值时出现安全错误 2 c# - 根据行索引列表从 DataGridView 获取项目列表 3 http - 如何查看（嗅探）http 流量？ 1 wpf - 这是 XAML a bad example?[2](/questions/11870455 "Question score (upvotes - downvotes)")[playframework - playframework 1.2.x How to have my method call every time play reloads in dev mode?](/questions/11870455)[2](/questions/11870460 "Question score (upvotes - downvotes)")[objective-c - 在 iphone 中实现日志记录机制的最佳方法？](/questions/11870460)[1](/questions/11870461 "Question score (upvotes - downvotes)")[html - Does HTML5 video only work on an actual web server?](/questions/11870461)[1](/questions/11870463 "Question score (upvotes - downvotes)")[ios - Push view controller without animating nav bar](/questions/11870463)[3](/questions/11870465 "Question score (upvotes - downvotes)")[javascript - 尽管语法错误，但在浏览器中读取 javascript 文件](/questions/11870465)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：10887424
> 
> 赞同：4
> 
> 时间：
> 
> 标签：html, css

好的，我在 2001 年开始使用 html 和 css。我曾经做过这样的事情（创建一个具有“垂直列”布局的网站）：

```
<html>
<head>
    <title>Vertical-column layout</title>
</head>
<body>
<table id="doc" >
<!-- header -->
    <tr>
    <td id="header" colspan="3"><!-- header code/php include --></td>
    </tr>
<!-- / header -->

<!-- / content -->
    <tr>
    <td id="col1" name="menu"><!-- content code/php include --></td>
    <td id="col2" name="content_left"><!-- content code/php include --></td>
    <td id="col3" name="content_right"><!-- content code/php include --></td>
    </tr>
<!-- / content -->

<!-- footer -->
    <tr>
    <td id="footer" colspan="3"><!-- header code/php include --></td>
    </tr>
<!-- / footer -->
</table>
</body>
</html> 
```

很容易，一切都按照我想要的方式自动对齐，没有 css 头痛等。那时的生活很好。但是，不久前，我读到不应再使用这种方法。我打算使用一堆 div 尝试一种新方法，但是 w3c 和 w3c 的验证不喜欢你使用块元素作为内联元素...... WTF ！！！

所以......我的挫败感让我问你们：

**如何？**如何以“现代方式”完成这样的事情......尽可能简单？html 5有更好的方法吗？
**为什么？**为什么现在我们不应该使用这种表格方法在网站上获得“垂直列布局”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T19:57:15.583

```
HOW? 
```

选项 1：谷歌“CSS 3 列布局”。在过去 6 年左右的时间里，这已经得到了很好的覆盖，并且那里有大量的教程。

选项 2：谷歌“CSS 框架”并选择一个来构建您的布局。960.gs 很受欢迎。

```
WHY? 
```

理想情况下，您会使用表格来存储表格数据，并使用 css 来布局页面的其余部分。为什么？嗯，理论上，CSS 给了你更多的灵活性。最好的例子可能是响应式网页设计。在 iPhone 上，我可能需要 2 列。在我的 iPad 上，我可能需要 4 列。这一切都可以通过 CSS 完成，但如果使用表格硬连接 HTML，就会变得非常复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T15:31:16.863

下面是我拼凑的一个基本网格，你可以在任何规模的网站上使用。您需要使用溢出隐藏或 clearfix 清除列上的浮动。如果您的项目不需要支持 IE7，您可以使用 box-sizing border-box 为您的列添加填充，否则在每列中添加一个额外的元素用于填充。

虽然我可以理解，使用表格制作列非常容易，这几乎是唯一更适合布局的东西。

HTML：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

    <header></header>

    <div class="content grid">
        <div id="col1" class="col s1of3"></div>
        <div id="col2" class="col s1of3"></div>
        <div id="col3" class="col s1of3"></div>
    </div>

    <footer></footer>

</body>
</html> 
```

CSS：

```
.grid {
}
    .grid .col { float: left; }

    .grid .col.s1of1 { width: 100%; }
    .grid .col.s1of2 { width: 50%; }
    .grid .col.s1of3 { width: 33.33333333%; }
    .grid .col.s2of3 { width: 66.66666666%; }
    .grid .col.s1of4 { width: 25%; }
    .grid .col.s3of4 { width: 75%; }
    .grid .col.s1of5 { width: 20%; }
    .grid .col.s2of5 { width: 40%; }
    .grid .col.s3of5 { width: 60%; }
    .grid .col.s4of5 { width: 80%; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T19:58:17.917

CSS3 有一些简洁的列布局选项，但它们在兼容性方面不是很好，并且大量浏览器不支持相当数量的选项。

如果您正在寻求制作可变/固定宽度的列，那么这可能是您正在寻找的文章：

[http://www.alistapart.com/articles/holygrail](http://www.alistapart.com/articles/holygrail)

使用此方法，您可以将一个或多个 div 设置为固定宽度，同时适当调整另一个 div 的大小以填充页面。

如果您只想调整所有列的大小，那么只需将它们全部设置`float: left`为`width: {percentage of page}%`

# ruby - 为什么 RVM 会为不同的 gemset 安装重复的 gem？

> ID：10887425
> 
> 赞同：7
> 
> 时间：2012-06-04T19:53:30.577
> 
> 标签：ruby, rvm, bundler

因此，我为我的每个 rails 项目创建了一个单独的 rvm gemset。他们都使用相同版本的 ruby`1.9.3`​​ 。

这会导致`bundle install`为两个项目完全安装一组新的 gem。另一个项目是否在另一个 gemset 中安装了完全相同版本的 gem 并不重要。我猜这对我来说是预期的行为，但这似乎是对硬盘空间和带宽的低效使用。

我知道我可以手动将其中一些 gem 移动到全局 gemset，但这对我来说似乎很乏味，而且如果我的依赖项针对特定项目发生更改，也容易中断。

有没有更好的方法来组织事物，或者让 rvm 自动检测何时已安装 gem 版本并使用该副本？

或者我应该使用 RVM 的更好替代方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:28:50.957

这是设计使然。Gemsets 允许您完全隔离所使用的库，这样您就不会在项目之间发生任何意外交互。如果您不需要隔离，则可以只使用没有 gemset 的解释器：

```
rvm use 1.9.3 
```

如果您在所有项目中都使用了一些 gem，只需切换到解释器的全局 gemset：

```
rvm use 1.9.3@global 
```

`gem install`常见的 gem，然后当您在 gemset 中时，它们将不再为每个项目重新安装。

虽然 gemset 在带宽或 HD 空间方面绝对不是有效的，但它们非常方便，因为您可以轻松地清除项目的所有依赖项，并`bundle`随时从头开始。它们还完全消除了意外更改依赖项的版本。如果您不喜欢 gemsets，`Gemfile`那么在没有它们的情况下正确指定版本可以让您在这方面走得很远。

至于替代方案，[rbenv](https://github.com/sstephenson/rbenv)是我要检查的主要选项。

# mysql - MySQL 连接四个表并获得某种 SUM 结果

> ID：10887431
> 
> 赞同：1
> 
> 时间：2012-06-04T19:53:52.683
> 
> 标签：mysql, foreign-keys, relationship

我有四个这样的表：

```
mysql> describe courses;
+-----------------+-------------+------+-----+---------+----------------+
| Field           | Type        | Null | Key | Default | Extra          |
+-----------------+-------------+------+-----+---------+----------------+
| course_id       | int(11)     | NO   | PRI | NULL    | auto_increment |
| course_name     | varchar(75) | YES  |     | NULL    |                |
| course_price_id | int(11)     | YES  | MUL | NULL    |                |
+-----------------+-------------+------+-----+---------+----------------+

mysql> describe pricegroups;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| price_id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| price_name  | varchar(255) | YES  |     | NULL    |                |
| price_value | int(11)      | YES  |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+

mysql> describe courseplans;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| plan_id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| plan_name  | varchar(255) | YES  |     | NULL    |                |
| plan_time  | int(11)      | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> describe course_to_plan;
+-----------+---------+------+-----+---------+-------+
| Field     | Type    | Null | Key | Default | Extra |
+-----------+---------+------+-----+---------+-------+
| course_id | int(11) | NO   | PRI | NULL    |       |
| plan_id   | int(11) | NO   | PRI | NULL    |       |
+-----------+---------+------+-----+---------+-------+ 
```

让我试着解释一下我有什么以及我想做什么......

我所有的课程（`course_id`）都有不同的步骤（`plan_id`），其值为 1 天或更多天（`plan_time`）。

课程有一个或多个步骤 ( `course_to_plan`)

课程连接到价格组 ( `price_id`)。

我想查询我的 MySQL 数据库并得到一个输出：
The `course_name`, the `plan_id`'s it has, and based on the value of the value and `price_id`the value in the `plan_time`get a result who looks like this:

```
+------------+--------------+------------+---------+
| course_name| pricegroup   | plan_time  | RESULT  | 
+------------+--------------+------------+---------+
| Math       | Expensive    | 7          | 3500    |
+------------+--------------+------------+---------+ 
```

我希望你能理解我......
我拥有的结构是否有可能，或者我应该“重建和重做”什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:02:37.280

让我看看我是否了解您的需求：

```
SELECT c.course_name, pg.price_name, 
       COUNT(cp.plan_time), SUM(pg.price_value * cp.plan_time) AS result
FROM courses c 
INNER JOIN pricegroups pg ON c.course_price_id = pg.price_id
INNER JOIN course_to_plan ctp ON c.course_id = ctp.course_id
INNER JOIN courseplans cp ON ctp.plan_id = cp.plan_id
GROUP BY c.couse_name, pg.price_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:06:11.210

```
SELECT c.course_name, p.price_name, SUM(cp.plan_time), SUM(cp.plan_time * p.price_value)
FROM courses c
    INNER JOIN pricegroups p        ON p.price_id = c.course_price_id
    INNER JOIN course_to_plan cpl   ON cpl.course_id = c.course_id
    INNER JOIN courseplans cp       ON cp.plan_id = cpl.plan_id
GROUP BY c.course_name, p.price_name 
```

请注意，在我看来，您的实施可能是错误的。您想要数据的方式使我认为您可能会对有价格的计划感到满意，因此您不会对“昂贵”的计划和另一个“便宜”的计划应用相同的价格，这就是你现在正在做。但我真的不知道，这很直观:-)

感谢您接受答案，问候。

# android - Android 搜索栏不显示

> ID：10887436
> 
> 赞同：0
> 
> 时间：2012-06-04T19:54:07.970
> 
> 标签：android, seekbar, invisible

伙计们，我有以下布局：[http ://dpaste.com/hold/755261/](http://dpaste.com/hold/755261/)

它有两个搜索栏小部件。两者都没有显示。如果我将它们移动到根线性布局，它们就会出现，否则不会出现。我需要它们在第一个线性布局内。任何人都可以帮助我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:03:12.700

看起来您需要在第三个 LinearLayout 中添加以下内容：

```
android:layout_weight="1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:09:53.353

将第二个 LinearLayout 高度更改为 wrap_content。如果内容不适合屏幕，那么也许您必须使用 ScrollView。

# objective-c - 目标 c - 核心数据保存方法

> ID：10887437
> 
> 赞同：0
> 
> 时间：2012-06-04T19:54:10.210
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我的应用程序中有一些`NSManagedObject`子类，我试图了解何时以及如何保存更改。
我将尝试解释自己，例如类`A`是`NSManagedObject`子类。
在应用程序生命周期中，我会：

```
App launched
...
Create an instance of class A
...
Change some properties of A instance
...
App go to background
...
App becomes active again
...
Change some more properties of A instance
...
App terminates 
```

我什么时候需要调用 [context save:] ？
我是否在 A 实例的每次更改后调用它？或者也许我只在应用程序进入后台时才调用它？
我应该在创建或删除任何 A 实例后调用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:17:11.883

一个不错的方法是将 UIManagedDocument 放在 AppDelegate 中。然后，只要应用程序发生某些更改（如崩溃），您就可以调用 [context save]。我喜欢遵循的顺序是这样的：

1.  创建 UIManagedDocument 对象（在应用程序中加载或任何地方）并将其分配给属性
2.  设置文档（检查它是否存在于磁盘上或是否已经打开等。并做出相应的响应）
3.  将 UIManagedObjectContext 传递给应用程序中的初始 UIViewController（从那里您可以将上下文传递给其他视图控制器）

UIManaged 文档将为您保存上下文。

查看 UIManagedDocument 文档以配置持久存储选项（您将选项的 NSDictionary 发送到您的 UIManagedDocument 实例，通过下面的链接查看第一个示例）。

UIManagedDocument 文档：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIManagedDocument_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIManagedDocument_Class/Reference/Reference.html)

另请参阅 iTunesU 上免费提供的 iPhone 和 iPad 应用程序开发课程的 CoreData 讲座和演示（第 13 和第 14 讲座），Paul Hegarty（2011 年秋季）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:21:21.880

根据您所做的更改量以及每次更改需要保存的数据量，您可以选择保存少量或大量。如果您只是保存一个字符串、一个数字或一个布尔值，那么请在进行更改后立即在您的上下文中调用 save:。

如果数据很多，您可能需要合并您的更改，然后将其保存在后台队列中，这样您就不会阻塞主队列。这样您就不必等待去后台执行保存。

蒂姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:03:48.333

在调用 save 之前，数据不会保存到持久存储中。所以，这取决于你在你的应用程序中想要什么。如果您希望它能够恢复它曾经拥有的最后一个值，那么您应该在每次修改后保存。

简单的更改是在进行修改后保存。

您可以做一些更花哨的事情，例如仅在一定时间后保存，将许多更改组合在一起...并捕获任何将您的应用程序置于后台的事件，然后保存...

但是，这就是 UIManagedDocument 自动为您所做的，因此您可以直接使用它。

# ios - 当我的应用再次激活时，将 uiviewcontroller 推送到现有 ViewController 之上

> ID：10887440
> 
> 赞同：2
> 
> 时间：2012-06-04T19:54:33.120
> 
> 标签：ios, uiviewcontroller, storyboard, uiapplicationdelegate

我的应用程序有多个 UIViewControllers 可以由用户随时显示。该应用程序也可以从一个文档启动（例如，邮件应用程序的附件）。

场景如下： - 用户启动应用程序并在应用程序内部导航 - 用户将应用程序置于后台模式并转到邮件应用程序 - 从邮件应用程序中，用户选择带有附件的邮件并使用我的应用程序打开附件 -我的应用程序将进入前台，我想在特定的视图控制器中显示附件。- 当用户完成附件后，他应该能够在应用程序中返回之前的状态（附件打开之前）。

我从 UIApplicationDelegate 重载了以下方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

使用这些方法，我可以找到是否有要显示的文档以及我的应用程序是否已经启动。

我的问题是推送特定的 ViewController。

下面是我推送 ViewController 的代码的摘录，但什么也没发生，知道吗？如何在我的应用程序中找到活动的 ViewController？

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive");

    if (_navigationCell != Nil) 
    {
        if ([DataCenter sharedInstance].isAppStarting == FALSE) 
        {
            // push a new navigation stack to display the cell from the navigation
            //PushArroundMeId
            UIWindow* window = [UIApplication sharedApplication].keyWindow;
            UIViewController* rvc = window.rootViewController;
            UIStoryboard* sb= [UIStoryboard storyboardWithName:@"MainStoryboardiPhoneApp" bundle:[NSBundle mainBundle]];
            AroundMeViewController* avc = [sb instantiateViewControllerWithIdentifier:@"AroundMeViewControllerId"];

            if (avc != Nil) {
                [rvc presentViewController:avc animated:TRUE completion:NULL];
                window.rootViewController = avc;
            }
        }
    }
} 
```

# coldfusion - 仅使用变量时，有没有办法在 Coldfusion 中为 cfmail type=text 电子邮件添加一些间距？

> ID：10887446
> 
> 赞同：1
> 
> 时间：2012-06-04T19:55:15.117
> 
> 标签：coldfusion, formatting, cfmail

我对我的第一个**Cfmail**的外观有点敬畏。

问题是，我对文本和内容都使用了变量，我仍然希望有某种间距。

例如，如果我有：

```
<cfprocessingdirective suppresswhitespace="No">
    <cfmail
        TO="#Local.User.email#"
        FROM="..."
        SERVER="..."
        USERNAME="..."
        PASSWORD="..."
        WRAPTEXT="80"
        SUBJECT="#tx_automailer_register_subject# - #Local.User.Comp#">

#tx_automailer_default_hello#

#tx_automailer_register_info#

#tx_automailer_register_iln#:   #Local.User.iln#
#tx_firma#:                     #Local.User.firma#
#tx_ansprechpartner#:           #Local.User.ansprechpartner#
#tx_adresse#:                   #Local.User.adresse#
#tx_plz#:                       #Local.User.plz#
#tx_ort#:                       #Local.User.ort#
... 
```

唯一看起来不错的地方是我的 cfc :-) 在邮件本身中，一切都像火箭筒一样。

**问题：**
有没有办法隔开这个？我也尝试过根据变量的长度来划分空间，但这也没有任何好处，我也不太热衷于为此做数学......

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:19:53.637

唯一的选择可能是对内容进行后处理。在 cfsavecontent 中构建漂亮的内容，然后运行清理功能。

```
<cfprocessingdirective suppresswhitespace="No">
<cfsavecontent variable="message">
    #tx_automailer_default_hello#

    #tx_automailer_register_info#

    #tx_automailer_register_iln#:   #Local.User.iln#
    #tx_firma#:                     #Local.User.firma#
    #tx_ansprechpartner#:           #Local.User.ansprechpartner#
    #tx_adresse#:                   #Local.User.adresse#
    #tx_plz#:                       #Local.User.plz#
    #tx_ort#:                       #Local.User.ort#
</cfsavecontent>
<cfmail
    TO="#Local.User.email#"
    FROM="..."
    SERVER="..."
    USERNAME="..."
    PASSWORD="..."
    WRAPTEXT="80"
    SUBJECT="#tx_automailer_register_subject# - #Local.User.Comp#"
>#cleanupTextMessage(message)#</cfmail>

<cffunction name="cleanupTextMessage" output="false">
    <cfargument name="content" />
    <!--- remove whitespace at beginning of each line --->
    <cfset arguments.content = reReplace(arguments.content, "^\s+", "", "all") />
    <!--- replace any multiple whitespace characters with one space --->
    <cfset arguments.content = reReplace(arguments.content, "\s+", " ", "all") />
    <cfreturn arguments.content />
</cffunction> 
```

您实际上可能能够将 cfsavecontent 嵌套在 cfmail 中，或者创建一个自定义标签来执行 savecontent 和函数操作。

注意：我是在假设问题是“如何使代码看起来不错而不影响生成的文本消息”的情况下回答的。如果您试图对生成的文本输出做一些不同的事情，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:20:52.320

您可以使用 HTML 通过将 TYPE="html" 添加到您的 cfmail 属性来执行此操作。如果你想要那个 sysprint 类型的外观，然后放入一个“pre”标签。如在

```
<pre>
#tx_automailer_default_hello#

#tx_automailer_register_info# 
....

</pre> 
```

或者您可以添加一个表格，如下所示：

```
<table
<tr>
<td>#tx_automailer_default_hello#</td>
</tr>
<tr><td>

#tx_automailer_register_info#
</td> 
```

如果你想坚持纯文本，你需要确保你的制表符/空格计数正确，并且你的每一行都不超过 80 个字符（或者它们会换行......也没有节拍）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:23:54.977

如果您设置为纯文本电子邮件并且确信收件人将使用固定宽度的字体，您可以使用[lJustify()](http://cfquickdocs.com/cf9/?getdoc=LJustify#ljustify)将您的文本和填充与空格对齐。

> 左对齐指定长度的字符串中的字符。

```
#lJustify(tx_automailer_register_iln & ":",32)# #lJustify(Local.User.iln,25)#
#lJustify(tx_firma & ":",32)# #lJustify(Local.User.firma,25)#
#lJustify(tx_ansprechpartner & ":",32)# #lJustify(Local.User.ansprechpartner,25)#
#lJustify(tx_adresse & ":",32)# #lJustify(Local.User.adresse,25)#
#lJustify(tx_plz & ":",32)# #lJustify(Local.User.plz,25)#
#lJustify(tx_ort & ":",32)# #lJustify(Local.User.ort,25)# 
```

# android - Android中的朝拜指南针

> ID：10887447
> 
> 赞同：7
> 
> 时间：2012-06-04T19:55:26.537
> 
> 标签：android, compass-geolocation

我已经尝试了很多，但无法为我的应用程序制作 Qibla 指南针。我无法理解我在做什么。我需要完美运行的朝拜指南针。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T20:21:11.460

您知道麦加的位置，并且您知道用户的当前位置（如果您有 GPS 或其他位置提供商）。方位由这个公式给出，纬度和经度应该以弧度为单位。

```
float lonDelta = (lon2 - lon1);
float y = Math.sin(lonDelta) * Math.cos(lat2);
float x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lonDelta);
float brng = Math.atan2(y, x).toDeg(); 
```

`brng`是以度为单位的方向。

您还可以探索 Location.bearingTo() 方法，[请参见此处](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)。

# avfoundation - 黑色视频 CAAnimation 和 AVFoundation AVAssetExportSession

> ID：10887449
> 
> 赞同：1
> 
> 时间：2012-06-04T19:55:28.913
> 
> 标签：avfoundation, caanimation, avassetexportsession

我是整个 AVFoundation 视频编辑电路的新手。

我当前的测试应用程序是一个双屏应用程序，第一个屏幕执行 AVFoundation 视频录制 (1.mov)，第二个屏幕让您查看视频并使用 CAAnimation 在其上添加一些标题学分。

1.mov 视频文件以纵向记录保存到磁盘，然后通过此例程运行，该例程应该在视频顶部给我一个标题。然而，我得到的只是一个尺寸正确的黑色视频，上面有 CATextLayer 的时间长度。

我很确定我缺少一些基本的东西。我确实有代码可以处理整个横向纵向旋转。

```
-(IBAction)ComposeMovie:(id)sender {
    NSLog (@"ComposeMovie");

    CALayer *aLayer = [CALayer layer];
    aLayer.Frame = CGRectMake(0, 0, videoSize.height, videoSize.width); 
    CALayer *bLayer = [CALayer layer]; 

    NSLog(@"Create the title"); 
    CATextLayer *titleLayer = [CATextLayer layer]; 
    titleLayer.string = @"SUDO make me a sandwich"; 
    titleLayer.font = [UIFont boldSystemFontOfSize:18].fontName; 
    titleLayer.backgroundColor = [UIColor whiteColor].CGColor; 
    titleLayer.foregroundColor = [UIColor blackColor].CGColor; 
    titleLayer.fontSize = 24; 
    titleLayer.alignmentMode = kCAAlignmentRight; 
    titleLayer.bounds = CGRectMake(videoSize.width, videoSize.height /6, 300, 32); 
    [aLayer addSublayer:titleLayer]; 

    NSURL *url = [NSURL fileURLWithPath:getCaptureMoviePath()]; //Hard coded path to the 1.mov file in the documents directory
    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil];

    AVMutableComposition *cmp = [[AVMutableComposition alloc] init] ;  
    AVMutableCompositionTrack *trackA = [cmp addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    NSError *error = nil ;
    AVAssetTrack *sourceVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    [trackA insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceVideoTrack atTime:kCMTimeZero error:&error] ;
    AVMutableVideoComposition *animComp = [[AVMutableVideoComposition videoComposition] retain];
    animComp.renderSize = CGSizeMake(videoSize.height, videoSize.width); 
    animComp.frameDuration = CMTimeMake(1,30);

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction]; 
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, CMTimeMakeWithSeconds(60, 30) ); 

    AVMutableVideoCompositionLayerInstruction* rotator = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]];
    CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation( 0,-320);    
    CGAffineTransform rotateBy90Degrees = CGAffineTransformMakeRotation( M_PI_2);
    CGAffineTransform shrinkWidth = CGAffineTransformMakeScale(0.66, 1); // needed because Apple does a "stretch" by default - really, we should find and undo apple's stretch - I suspect it'll be a CALayer defaultTransform, or UIView property causing this
    CGAffineTransform finalTransform = CGAffineTransformConcat( shrinkWidth, CGAffineTransformConcat(translateToCenter, rotateBy90Degrees) );
    [rotator setTransform:finalTransform atTime:kCMTimeZero];

    instruction.layerInstructions = [NSArray arrayWithObject: rotator];
    animComp.instructions = [NSArray arrayWithObject: instruction];

    NSLog(@"Creating Animation"); 
    //animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithAdditionalLayer: asTrackID:1];
    animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithAdditionalLayer:aLayer asTrackID:2];
    animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithAdditionalLayer:bLayer asTrackID:3]; 
    //AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [asset duration]);
    AVMutableVideoCompositionLayerInstruction* layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:trackA];
    //[layerInstruction setTrackID:1]; 

    /*CMTime startTime = CMTimeMake(3,1); 
    CMTime stopTime = CMTimeMake(5,1); 
    CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime); 
    */ 

    //AVMutableVideoCompositionLayerInstruction *passThroughLayer = AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    CGAffineTransform rotationTransform = CGAffineTransformMakeRotation(degreesToRadians(90.0));
    CGAffineTransform rotateTranslate = CGAffineTransformTranslate(rotationTransform,320,0);
    [layerInstruction setTransform:rotateTranslate atTime:kCMTimeZero];

    [layerInstruction setOpacity:1.0 atTime:kCMTimeZero ];
    instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
    animComp.instructions = [NSArray arrayWithObject:instruction];

    CALayer *parentLayer = [CALayer layer]; 
    CALayer *videoLayer = [CALayer layer]; 
    parentLayer.frame = CGRectMake(0,0, videoSize.width, videoSize.height); 
    videoLayer.frame = CGRectMake(0,0, videoSize.width, videoSize.height); 
    [parentLayer addSublayer:aLayer]; 
    [parentLayer addSublayer:bLayer];
    [parentLayer addSublayer:videoLayer]; 

    animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

    NSLog(@"Creating File"); 
        NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *tempPath = [docPaths objectAtIndex:0];
        NSLog(@"Temp Path: %@",tempPath);

        NSString *fileName = [NSString stringWithFormat:@"%@/render.MOV",tempPath];
        NSFileManager *fileManager = [NSFileManager defaultManager] ;
        if([fileManager fileExistsAtPath:fileName ]){
            NSError *ferror = nil ;
            BOOL success = [fileManager removeItemAtPath:fileName error:&ferror];
        }

        NSURL *exportURL = [NSURL fileURLWithPath:fileName];

        AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:cmp presetName:AVAssetExportPresetHighestQuality]  ;
        exporter.outputURL = exportURL;
        exporter.videoComposition = animComp ;
        exporter.outputFileType= AVFileTypeQuickTimeMovie ;
        [exporter exportAsynchronouslyWithCompletionHandler:^(void){
            switch (exporter.status) {
                case AVAssetExportSessionStatusFailed:{
                    NSLog(@"Fail");
                    break;
                }
                case AVAssetExportSessionStatusCompleted:{
                    NSLog(@"Success");
                    break;
                }

                default:
                    break;
            }
        }];

    NSLog(@"End ComposeMovie"); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:19:33.030

问题在于以下几行。

```
parentLayer.frame = CGRectMake(0,0, videoSize.width, videoSize.height); 
videoLayer.frame = CGRectMake(0,0, videoSize.width, videoSize.height); 
```

将 videoSize.width 更改为 320，并且 videoSize.height = 480 解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T21:33:49.983

但是如果视频的尺寸不是 320X480，它就会一团糟。尝试使用这个来获取视频大小。

```
 CGSize videoSize = [[[self.videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] naturalSize]; 
```

# c# - 为什么我不能在运行时添加 .NET DLL

> ID：10887454
> 
> 赞同：0
> 
> 时间：2012-06-04T19:55:54.227
> 
> 标签：c#, codedom

使用 CodeDOM 我有这样的事情：

```
CompilerParameters parameters = new CompilerParameters();
parameters.ReferencedAssemblies.Add("System.dll");
parameters.ReferencedAssemblies.Add("System.Windows.Forms.dll");
parameters.ReferencedAssemblies.Add("System.Data.Linq.dll");
parameters.ReferencedAssemblies.Add("System.Xml.Linq.dll");
parameters.ReferencedAssemblies.Add("System.Core.dll"); 
```

当我运行程序时，这是最后三个 DLL 的错误，前两个（ System.DLL 和 System.Windows.Forms.DLL ）没有问题和错误，但只要我添加最后三个也加载这些 DLL 的行，然后我得到像图片中的错误。如此奇怪和烦人，找不到解决方法。

谢谢。

![在此处输入图像描述](../Images/30afe3971b66bc915a371f18fee5b961.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:47:38.713

哦哇！这很棘手！

它不关心 Visual Studio 设置的 Target Platform 是什么，它看的是它自己的**CodeProvider**类。以前我使用它的[默认构造函数](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)。但它也有另一个接受 Dictionary 参数的构造函数。在此参数中，我们指定应使用的 .NET 版本。因此，我应该这样做，而不是仅仅创建一个新的 CodeProvider 对象：

```
 Dictionary<string, string> compilerInfo = new Dictionary<string, string>();
    compilerInfo.Add("CompilerVersion", "v3.5");
    CSharpCodeProvider codeProvider = new CSharpCodeProvider(compilerInfo); 
```

现在它起作用了。

# entity-framework-migrations - EF 迁移 - 如何在开发和部署期间进行管理？

> ID：10887457
> 
> 赞同：3
> 
> 时间：2012-06-04T19:56:05.193
> 
> 标签：entity-framework-migrations

我们正在考虑使用 EF 4.3.1 基于代码的迁移，但不清楚如何将迁移与我们目前的开发/部署方法集成......

有问题的应用程序是一个桌面 WPF 应用程序，每个桌面都有自己的 SQL Server 实例（每个都有 4 个独立的数据库）。它被部署到本地 IT 支持为零的“现场”环境中。任何数据库迁移都必须使用安装程序（可能是 InstallShield）执行的 SQL 脚本来完成。在现场部署/升级数据库时，没有任何人可以在 PMC 提示符下运行命令来升级数据库。因此，EF Migrations 的最终“输出”必须是一组 SQL 脚本，安装程序将有选择地应用这些脚本。

此外，我们有多个开发人员进行并发数据库更改.. 没有 DBA。每个开发人员只需将他们的代码（模型）更改签入到 TFS，并且下次他们更新时，对模型的更改会自动导致在他们的开发系统上创建一个新数据库。那么我们现在如何让每个开发人员执行他们自己的本地迁移（而不是删除/重新创建他们的本地数据库），然后管理/合并/组合这些迁移？那么碰撞呢？

在开发和单元测试期间，每个开发人员都可以在一次签出/签入迭代期间多次删除他们的（整个）本地数据库。这对 Code First 非常有用，因为当应用程序重新启动时，数据库会自动重建。但这意味着数据库中的 _MigrationHistory 表也会被删除。我们如何处理这个？我们不需要每个开发系统的迁移历史吗？如果不是，那么我们在哪里/如何检测需要应用于交付系统的聚合更改？

我可以看到使用迁移来处理迁移数据库的机制的价值，但不清楚的是如何利用它而不在开发周期中引入集中式数据库“更改控制”瓶颈，从而失去一个Code First 的主要优势。

任何见解/建议将不胜感激！

爸爸猫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T19:13:21.333

我知道这是一个老问题，但我想我会发布一些我在 EF Migrations (v6.1) 方面的经验。

每个开发人员都会好起来的。迁移被放入名称中带有时间戳的类中，因此不会发生冲突。在执行获取最新并运行应用程序（或 update-database 命令）后，将更新开发人员机器上的数据库。

删除本地数据库并重新创建就可以了。只需确保开发人员在添加其他迁移之前运行更新数据库，否则事情将不同步。我对他们为什么需要删除本地数据库感到有些困惑，但这超出了范围。您可能会发现您的流程需要更改以适应 EF 迁移。

我无法帮助您解决安装程序问题，因为类似的问题将我带到了这里。update-database 命令确实有一个 -script 选项，可以生成正确的更改脚本，但我不清楚如何在构建服务器上自动化。

# javascript - getLastRow() 的问题

> ID：10887461
> 
> 赞同：5
> 
> 时间：2012-06-04T19:56:19.170
> 
> 标签：javascript, google-apps-script, google-sheets

我对 getLastRow() 有疑问。我认为这个函数应该返回有数据的最后一行。但是由于我正在处理的工作表在填充数据的行下方有更多空行，因此这些函数似乎会进入并选择其执行时的最后一个空行，而不是选择具有数据的最后一行，这可能不会是相同的。有人可以告诉我如何解决这个异常。这是谷歌脚本错误还是我不清楚该怎么做？如果我没有说清楚，请提出进一步的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T22:21:10.950

工作表中是否有任何“整列”公式？是数组公式，还是一直向下复制的公式？即使这些公式旨在返回底部的空白单元格，`getLastRow()`仍然会捕获它们。

如果是这种情况，请尝试：

```
function getLastPopulatedRow(sheet) {
  var data = sheet.getDataRange().getValues();
  for (var i = data.length-1; i > 0; i--) {
    for (var j = 0; j < data[0].length; j++) {
      if (data[i][j]) return i+1;
    }
  }
  return 0; // or 1 depending on your needs
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-25T14:31:31.987

这是当前所选答案的另一个版本。这将内部循环换成数组连接，项目之间没有空格。这将连接行上的所有字符。如果在任何位置有角色，它将与当前答案相似。

我做了一些速度测试，虽然我认为选择的答案可能会更快，但由于某种原因，根据我的测试，这似乎处理得更快。我相信几年前我在堆栈溢出时发现了这个概念，但现在没有看到那个参考。

```
function getLastPopulatedRow(sheetX) {
  var arrVals = sheetX.getDataRange().getValues();
  for (var i = arrVals.length-1; i > 0; i--) {
    if (arrVals[i].join('')){
      return i+1
    }
  }
  return 0; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:01:56.620

更简单的方法是

```
var lastRow = sheet.getDataRange().getValues().length ; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T19:35:45.847

虽然亚当斯的解决方案可以进行一些调整，但我通过一些搜索找到了解决这个问题的另一种解决方案。我看到了一个应该找到第一个空行的代码，我想我可以简单地返回第一个空行后面的行来获取最后一个填充的行。我在这里附上代码：

```
function getLastPopulatedRow(sheet) {
  var cell = sheet.getRange('a1');
  var ct = 0;
  while ( cell.offset(ct, 0).getValue() != "" ) {
    ct++;
  }
  return (ct--);
} 
```

# arrays - Knockout Cart Editor 示例问题：使用嵌套数组和函数扩展级联下拉菜单

> ID：10887465
> 
> 赞同：2
> 
> 时间：2012-06-04T19:56:25.653
> 
> 标签：arrays, data-binding, nested, knockout.js, shopping-cart

这是[我尝试](http://jsfiddle.net/dunderjeep/mVNr8/16/)结合 Knockoutjs.com 网站上的 Knockout 级联购物车编辑器实时示例中的代码，以及 RP Niemeyer 的[数据绑定嵌套数组](http://jsfiddle.net/rniemeyer/VUfSS/)示例，以尝试实现一个级联购物车，并以 Niemeyer 给出的功能格式扩展产品选项。

1.  为什么数量字段不更新小计？

2.  为什么“删除”不起作用？

3.  为什么 formatCurrency(price) 会产生“无法解析绑定”错误？

4.  为什么更改产品字段不会更新价格，但如果按下“添加产品”按钮，更改将出现在下一行？

5.  在 Niemeyer 的示例中，'add-product' 是函数范围内的方法，而不是我为 'subtotal' 方法复制的 cartLine - 哪个是处理这些操作的更好地方？

感谢 S.Sanderson、RPNiemeyer、J.Papa 在社区中为推广 Knockout 所做的令人难以置信的努力。这很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:06:50.217

好吧，所以你的小提琴比它需要的要复杂一些，但我试图不理会结构，以防你打算扩展。我确实有几个问题，但我会在最后回答这些问题。首先，你的问题：

1.  您有多个数量和小计属性，每个对象（行、类别和产品）都有一个。你的分层让他们（和我，老实说）感到困惑。我删除了您模型上的额外数量和小计属性，无论如何这都没有意义，但我将它们留在了您的数据中。你真的应该理清你想要这个看起来像什么。

2.  您的分层错误，removeLine 正在寻找 cartLine 上的函数并发送产品，但您在 viewmodel 上有该函数并且需要 cartLine。将删除线移动到最外层的上下文修复了这个问题。

3.  我没有收到这个错误。

4.  您的价格没有正确更新。这是一个上下文分层问题。

5.  我认为您为 Niemeyer 链接到了错误的小提琴，您链接的小提琴中没有产品。

这是您的代码的[工作小提琴](http://jsfiddle.net/zaUQm/1/)。它仍然有点混乱，因为我再次尝试不要弄乱我需要的东西。你真的应该考虑重组数据和/或视图模型，它不需要这么复杂。不过，我删除了一些分层，因为它与您的视图模型不匹配。

此外，您的 category.subscribe 方法在小计的计算 observable 内部。我把它移到外面，放到模型上。

注意：我在小提琴中使用了 knockout2.0。请考虑更新。Knockout1.3Beta 没有以相同的方式实现控制流，这导致了一个我没有谈论的单独错误。

所以，我的问题：

1.  为什么数据和对象定义中的产品和选项都有数量？
2.  为什么每个产品、类别和购物车都有小计？
3.  为什么菜单和视图模型上有总计？3a。为什么菜单上有总计？这是没有意义的。

# php - 访问 PHP 函数的替代方法

> ID：10887466
> 
> 赞同：0
> 
> 时间：2012-06-04T19:56:29.623
> 
> 标签：php

目前，我正在使用标准 PHP 开发应用程序。因此，有各种从表单调用的函数。一些示例包括注册、登录、注销等。

我没有为每个函数创建一个单独的文件，而是使用`phpscripts.php`包含文件夹中的一个文件。为了从 html 输入执行一个函数，我用`?action=functionName`. 在脚本文件中，我使用 switch/case 树来执行基于`S_GET['action']`变量的正确函数。

有没有更好的方法来实现对 PHP 函数的 HTML 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:59:17.503

不，这是将 HTML 表单与 PHP 脚本接口的正确方法。其他替代方案包括使用 URL 重写（将类似的东西转换`/actions/functionname/param`为`?action=functionname&param=x`），但基本原理保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:08:26.303

为了您的理智...考虑使用一个脚本来处理上述所有请求。/process_action.php 之类的东西。您确实处理统一的操作，例如：检查以确保功能存在、检查登录用户、连接到数据库、创建共享资源等......

如果您使用的是 Apache，则可以使用 mod rewrite 使 URL 更漂亮。你可以转

```
/actions/function/?restofquery 
```

进入

```
/process_action.php?action=function&restofquery 
```

通过使用类似于以下放置在您网站的 .htaccess 文件中的内容。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^/actions/([-_a-zA-Z0-9]+)/?$ /process_action.php?action=$1&%1 [L] 
```

作为旁注，您的问题听起来像是您即将发现[模型/视图/控制器 (MVC)](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。有几个很棒的框架，但不要让那些阻止你自己动手。通过实践学习 ：）

# ios - 自定义 ipad 表格视图设计

> ID：10887471
> 
> 赞同：1
> 
> 时间：2012-06-04T19:56:47.353
> 
> 标签：ios, objective-c, uitableview, ipad, cocoa-touch

我想创建一个外观如下的 iPad 应用程序：

![风格 2](../Images/9b6ef9c75393e788f6af7b388b9d73aa.png)

![在此处输入图像描述](../Images/9f9ca4482d1f4d6e52fe2ecc21a0b2a5.png)

*   做左侧菜单的最佳标准方法是什么，我不想继承任何类。
*   像屏幕截图中那样做表格单元格的最佳方法是什么。

请指教，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:01:39.137

你当然不能“不继承任何类”来做到这一点。我猜，屏幕截图上的应用程序使用了一个拆分视图，一个自定义表格视图控制器子类，左侧有自定义表格单元格，还有一个更复杂的视图控制器子类，还有一个带有自定义单元格类的表格视图。剩下的只是大量调整像素、背景图像和渐变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:28:58.053

[将其用于此处](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)的左表，子类 UISplitView**或**仅将背景颜色设置为图像，右表只是位于调整后的 UIViewController 框架中的 UItableView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:51:11.057

您可以使用 实现左侧菜单`Grouped TableView`。右侧菜单上的表格单元格将是`cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;`

# php - 如何检查mysql列是否不为NULL？

> ID：10887472
> 
> 赞同：1
> 
> 时间：2012-06-04T19:56:48.517
> 
> 标签：php, mysql

我跟踪某人是否是 MySQL 的“艺术家”。如果用户是艺术家，则艺术家列从 NULL 变为 Y，我对这部分进行了排序。但是，我无法确定如何检查用户的艺术家列是否为 Y，以便我可以禁用该用户的功能。该站点主要使用 cookie 进行登录，因此我需要对 Y 进行查询检查，其中用户名和密码等于 cookie。当艺术家 = Y 时应显示内容。

这是我到目前为止所拥有的：

```
$username = $_COOKIE['username']; 
$pass = $_COOKIE['password']; 
include ("../database.php");

if (mysql_query("SELECT artist FROM members WHERE username='$username' ,
       artist = 'Y'")) {

    //artist specific content goes here
   echo '<div class="bubble"><h1>Artist</h1><div class="innerbubble">Some text</div></div>'; 
} 
```

不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:23:15.810

除了其他答案的建议之外，我还有一些建议。

1) Cookie 非常适合开发，但它们的所有者可以查看和编辑它们。我建议使用会话；您仍然可以将有关用户的信息存储到其中，但该用户无法访问。

2）准备好的陈述，准备好的陈述，准备好的陈述！如果我将用户名设置为

```
'; DELETE FROM members;-- 
```

你的会员表将被废弃！通过使用准备好的语句，传入查询的字符串被参数化，而不是按字面意思传入。

指南：
[http ://www.php.net/manual/en/pdo.connections.php](http://www.php.net/manual/en/pdo.connections.php)
[http://www.php.net/manual/en/pdo.prepared-statements.php](http://www.php.net/manual/en/pdo.prepared-statements.php)

使用准备好的语句，您的查询变为

```
SELECT artist FROM members WHERE username=? AND artist='Y' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:01:20.237

```
 //artists if
   $username = $_COOKIE['username']; 
   $pass = $_COOKIE['password']; 
   include ("../database.php");
   $result = mysql_query("SELECT artist FROM members WHERE username='$username' , artist = 'Y'");
   $count = mysql_num_rows($result);

  // check the total count for artist 
      if ($count > 0) {
     //artist specific content goes here

       echo '<div class="bubble"><h1>Artist</h1><div class="innerbubble">Hi there, I see       that yo are an artist so you have access to loads of awesome features. Contact us with ease, upload new tracks, share your street sessions and tell everyone about your latest gigs.</div></div>'; 
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:06:35.777

我认为您的查询需要以下内容：

```
 $res = mysql_query("SELECT count(*) FROM members WHERE username='$username' AND artist = 'Y' LIMIT 1");
   if($res){
     $count = mysql_fetch_array($res);
         if($count[0]>0){
       /* Artist content goes here */
         }
    } 
```

# c# - .Net BlockingCollection.Take(2) ：一次安全地删除两个项目

> ID：10887473
> 
> 赞同：2
> 
> 时间：2012-06-04T19:56:55.850
> 
> 标签：c#, .net-4.0, task-parallel-library, concurrent-programming

在做了一些研究之后，我求助于有关如何有效地从并发集合中删除两个项目的任何反馈。我的情况涉及通过 UDP 传入的消息，这些消息当前被放入 BlockingCollection。一旦集合中有两个用户，我需要安全地取两个用户并处理它们。我见过几种不同的技术，包括下面列出的一些想法。我当前的实现如下，但我认为有一种更简洁的方法可以做到这一点，同时确保用户以两个为一组进行处理。这是这种情况下的唯一限制。

当前实施：

```
 private int userQueueCount = 0;
    public BlockingCollection<User> UserQueue = new BlockingCollection<User>();

    public void JoinQueue(User u)
    {
           UserQueue.Add(u);
           Interlocked.Increment(ref userQueueCount);

           if (userQueueCount > 1)
           {
               IEnumerable<User> users = UserQueue.Take(2);
               if(users.Count==2) {
                 Interlocked.Decrement(ref userQueueCount);
                 Interlocked.Decrement(ref userQueueCount);
                 ... do some work with users but if only one 
                 is removed I'll run into problems
               }

           }
    } 
```

我想做的是这样的事情，但我目前无法在生产环境中测试它以确保完整性。

```
 Parallel.ForEach(UserQueue.Take(2), (u) => { ... }); 
```

或者更好：

```
 public void JoinQueue(User u)
    {
           UserQueue.Add(u);
           // if needed? increment
           Interlocked.Increment(ref userQueueCount);
           UserQueue.CompleteAdding();
    } 
```

然后在某处实现：

```
 Task.Factory.StartNew(() =>
        {
            while (userQueueCount > 1) OR (UserQueue.Count > 1) If it's safe?
            {
                IEnumerable<User> users = UserQueue.Take(2);
                ... do stuff
            }

        }); 
```

问题是我不确定我能否保证在条件（Count > 1）和 Take(2) 之间，我确保 UserQueue 至少有两个项目要处理？传入的 UDP 消息是并行处理的，因此我需要一种方法来安全地将项目从阻塞/并发集合中以两个成对的方式拉出。

有没有更好/更安全的方法来做到这一点？

**修改后的评论：** 这个问题的目的实际上只是为了实现一种稳定/线程安全的方法来处理 .Net 4.0 中并发集合中的项目。它不必很漂亮，它只需要在并行环境中以无序的二对二的形式处理项目的任务中保持稳定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:58:20.737

这是我在粗略代码中所做的：

```
ConcurrentQueuequeue = new ConcurrentQueue(); //can use a BlockingCollection too (as it's just a blocking ConcurrentQueue by default anyway)

public void OnUserStartedGame(User joiningUser)
{
   User waitingUser;
   if (this.gameQueue.TryDequeue(out waitingUser)) //if there's someone waiting, we'll get him
      this.MatchUsers(waitingUser, joiningUser);
   else
      this.QueueUser(joiningUser); //it doesn't matter if there's already someone in the queue by now because, well, we are using a queue and it will sort itself out.
}

private void QueueUser(User user)
{
   this.gameQueue.Enqueue(user);
}

private void MatchUsers(User first, User second)
{
   //not sure what you do here
} 
```

基本思想是，如果有人想要开始游戏并且您的队列中有人，您匹配他们并开始游戏 - 如果没有人，将他们添加到队列中。充其量你一次只能有一个用户在队列中，但如果没有，那也不错，因为当其他用户开始游戏时，等待的用户将逐渐删除，并且在队列为空之前不会添加新用户再次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:22:20.197

如果由于某种原因我无法将成对的用户放入集合中，我会使用 ConcurrentQueue 并尝试一次 TryDequeue 2 个项目，如果我只能得到一个 - 把它放回去。根据需要等待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T09:27:55.517

我认为这里最简单的解决方案是使用锁定：您将为所有消费者拥有一把锁（生产者不会使用任何锁），这将确保您始终以正确的顺序获取用户：

```
User firstUser;
User secondUser;

lock (consumerLock)
{
    firstUser = userQueue.Take();
    secondUser = userQueue.Take();
}

Process(firstUser, secondUser); 
```

另一种选择是有两个队列：一个用于单个用户，一个用于成对用户，并有一个将它们从第一个队列转移到第二个队列的过程。

如果你不介意浪费另一个线程，你可以用两个`BlockingCollection`s 做到这一点：

```
while (true)
{
    var firstUser = incomingUsers.Take();
    var secondUser = incomingUsers.Take();

    userPairs.Add(Tuple.Create(firstUser, secondUser));
} 
```

您不必担心这里的锁定，因为单个用户的队列将只有一个消费者，而对的消费者现在可以`Take()`安全地使用 simple。

如果您确实关心浪费线程并且可以使用 TPL 数据流，则可以使用[`BatchBlock<T>`](http://msdn.microsoft.com/en-us/library/hh194745%28v=vs.110%29.aspx)，它将传入的项目组合成*n 个*项目的批次，其中*n*在创建块时配置，因此您可以将其设置为 2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T06:39:31.500

愿这能有所帮助

```
public static IList<T> TakeMulti<T>(this BlockingCollection<T> me, int count = 100) where T : class
{
    T last = null;
    if (me.Count == 0)
    {
        last = me.Take(); // blocking when queue is empty
    }

    var result = new List<T>(count);

    if (last != null)
    {
        result.Add(last);
    }

    //if you want to take more item on this time.
    //if (me.Count < count / 2)
    //{
    //    Thread.Sleep(1000);
    //}

    while (me.Count > 0 && result.Count <= count)
    {
        result.Add(me.Take());
    }

    return result;
} 
```

# java - 从需要修复的日期代码中添加/删除天数

> ID：10887475
> 
> 赞同：0
> 
> 时间：2012-06-04T19:56:57.563
> 
> 标签：java

我在这里有这段代码：

```
public static String AddRemoveDays(String date, int days) throws ParseException
    {
        SimpleDateFormat k = new SimpleDateFormat("yyyyMMdd");
        Date d = k.parse(date);
        d = new Date(d.getTime() + days*86400000);
        String time = k.format(d);

        return time;
    } 
```

它需要字符串形成“yyyyMMdd”，并在其中添加 int 天数。它应该可以工作，然后天数是负数 - 然后他会从日期中减去天数。当它进行数学运算时，它返回格式为“yyyyMMdd”的字符串。

至少这是它应该做的。它适用于小数字，但如果我尝试添加（或删除）例如一年（365 或 -365），它会返回奇怪的日期。

有什么问题？我应该以另一种方式完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:05:41.063

```
 d = new Date(d.getTime() + days*86400000); 
```

如果您将 86400000 乘以 365 整数，则无法保持它。将 86400000 更改为 Long

```
 d = new Date(d.getTime() + days*86400000L); 
```

会好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:06:07.913

很难说没有具体日期会发生什么。

如果您致力于使用原始 Java 类执行此操作，您可能希望查看使用`Calendar`-eg

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(d);
calendar.add(Calendar.DATE, days); // this supports negative values for days;
d = calendar.getTime(); 
```

也就是说，我建议不要使用 java`Date`类，而是改用[jodaTime](http://joda-time.sourceforge.net/)或[jsr310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)。

例如在 jsr310 中，您可以使用`DateTimeFormatter`and `LocalDate`：

```
DateTimeFormatter format = DateTimeFormatters.pattern("yyyyMMdd");
LocalDate orig = format.parse(dateString, LocalDate.rule());
LocalDate inc = orig.plusDays(days); // again, days can be negative;
return format.print(inc); 
```

# php - 我的脚本根据每个用户的本地时间发送电子邮件

> ID：10887481
> 
> 赞同：0
> 
> 时间：2012-06-04T19:57:31.977
> 
> 标签：php, mysql, email, codeigniter, time

我正在发布我的 php 脚本，希望得到您的意见和建议。我的 PHP 应用程序需要根据本地时间向用户发送单独的电子邮件。

每个用户都有一组他们选择接收电子邮件的时间标记。这是数据库中时间标记字段的样子：`12:00:00, 14:15:00, 16:30:00`.

我将时间标记四舍五入到最接近的一刻钟，并每一刻钟发送一次 cronjobs 以检查哪些用户被安排接收电子邮件并在循环中一个**接一个地**发送相应的电子邮件（担心的样子：-/）。

我的服务器时区设置为，`America/New_York`因此我无法根据我的时间发送电子邮件，因为用户位于不同的位置。下面我开发了一个应该处理这个问题的模型。

**解决方案：**

1.  收集每个用户的时区
2.  在每个 cronjob 上，使用他们的时区数据在 php 中获取每个用户的本地时间
3.  创建用户的时间标记数组。

    示例：`12:00:00, 14:15:00, 16:30:00`到

    `Array ( [0] => 12:00:00 [1] => 14:15:00 [2] => 16:30:00 )`

4.  如果用户的本地时间与他/她的时间标记之一匹配，则发送电子邮件

5.  使用发送日期更新数据库

**php脚本：**

```
 //loop through user's entries table that holds content to be emailed    
    foreach ($entries as $entry) { 

         //create array of user's time-marks set            
         $timemarks_arr = array_map( "trim", str_getcsv($entry->timemarks));

         //get user's localtime
         $timezone = $entry->timezone; //user's time-zone
         $userlocaltime = gmt_to_local($timestamp, $timezone, $daylight_saving); //gets user's localtime

         //if a user's time-mark matches his/her localtime      
         if (in_array($userlocaltime, $timemarks_arr))
         {  
                //send email using Codeigniter's email class

                $this->email->clear(); //reset between cycles

                $this->email->from('myemail@gmail.com', 'Name');
                $this->email->to($entry->email); 

                $this->email->subject($entry->content);
                $this->email->message($entry->content); 

                $this->email->send();   

                echo $this->email->print_debugger();                    

                //update date sent
                $user_id = $entry->user_id;

                $this->db->query("UPDATE `entries` SET date_sent=now() WHERE `user_id` = $user_id AND `entry_id` = $entry->entry_id");

         }

    } 
```

**关注点：**

*   模型可靠吗？
*   性能问题。仅发送 4 封电子邮件大约需要 5 秒。（注意：我正在从本地 Windows 服务器上的测试环境发送电子邮件 - WAMP）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T19:54:17.860

除非您为服务器时间设置服务器脚本，否则您所能做的就是获取本地时间。

我要做的是用 c++ 或其他可以更新数据库记录的语言编写一个简单的程序。将程序设置为按小时将服务器时间记录到数据库中，当用户需要调用它时，让他们从数据库中读取该字段。我以前做过这个，效果很好。

# wix - 用于 SQL 数据库安装的 Wix 自定义 UI

> ID：10887486
> 
> 赞同：1
> 
> 时间：2012-06-04T19:57:45.113
> 
> 标签：wix

这是我的第一个 wix 项目。我下载了 wix 3.6 rc。我的安装项目包括 2 个 wcf 和 1 个 silverlight 项目。默认 Wix UI 一切正常。但是现在我需要向它添加 sql 数据库。它适用于以下默认值：

```
 <Component Id='SqlComponent' Guid='8B72C159-1477-4A58-AFAE-E94D756BFFA6'>
                    <CreateFolder/>
                    <sql:SqlDatabase Id='SqlDatabase' Database='master' Server='.'
                      CreateOnInstall='yes' DropOnUninstall='no' ContinueOnError='yes'>
                      <sql:SqlScript Id='CreateTable' BinaryKey='CreateTable' ExecuteOnInstall='yes' />
                      <sql:SqlScript Id='CreateTable1' BinaryKey='CreateTable1' ExecuteOnInstall='yes' />
                    </sql:SqlDatabase>
                  </Component> 
```

但是我需要为 sql 数据库路径、数据库名称、用户名和密码提供一个用户界面，如果没有指定用户和密码，则使用 windows 用户。

只是为了看看如何添加自定义 ui，我尝试了以下操作：但它会立即显示自定义 ui。但我希望它仅针对 sql 数据库安装显示。

```
<Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes">
  <Text>Ready to Install</Text>
</Control>

<Control Id="Install" Type="PushButton" X="304" Y="243" Width="56" Height="17"
    Default="yes" Text="Install">
  <Publish Event="EndDialog" Value="Return" />
</Control> 
```

我想，一旦我让它在我想要的位置显示自定义 UI，我的下一个要求是能够获取用户输入的数据库路径、名称、用户和密码，并将该信息传递给脚本。我也不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T11:56:37.413

阅读 .chm 中的 WiX UI 扩展。选择最适合您的安装程序的对话框集。然后，您可以相应地对其进行自定义。假设您要自定义 WixUI_Advanced 对话框集：

*   下载[WiX 源代码](http://wix.codeplex.com/SourceControl/list/changesets?branch=wix36)
*   导航到位于 中的 UI 扩展的源代码`src\ext\UIExtension\wixlib`。
*   复制文件 *WixUI_Advanced.wxs* 并将其重命名为不同的名称，例如 *WixUI_Advanced_Custom.wxs*。
*   打开 .wxs 文件并确保将 UI Id 重命名为`<UI Id="WixUI_Advanced_Custom">`.
*   将 *WixUI_Advanced_Custom.wxs* 添加到您的安装项目中。

现在您可以引用自定义对话框集，就像引用 UI 扩展中的其他对话框集一样。但是 UI 并没有完全定制，它只是提供与 WixUI_Advanced 对话框集相同的功能。要添加新对话框，您需要使用 wix 源作为示例创建一个新的 .wxs。查看其中的任何对话框以`src\ext\UIExtension\wixlib`获取帮助。然后在 *WixUI_Advanced_Custom.wxs* 中通过添加和修改`<Publish>`元素来引用您的对话框，以确定您的对话框何时显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:05:12.917

最后我在这里找到了一篇关于 wix 的大开眼界的文章[How to add custom UI](http://www.codeproject.com/Articles/115036/Creating-WIX-Installer-for-ASP-NET-Web-Application#h44)

经过长时间的努力来理解 wix 的工作原理，上面的 codeproject 链接帮助我理解了。尤其是解释创建 UI 的部分（那篇文章中的 MyWebUI.wxs）是救命稻草。

# sql-server - SQL 服务器和休眠更新 DDL 问题

> ID：10887489
> 
> 赞同：1
> 
> 时间：2012-06-04T19:57:53.883
> 
> 标签：sql-server, hibernate, ddl

我一直在使用休眠 ddl 更新工具和 Sql Server 的问题。首先我想解释一下，我们的应用程序 ddl update 在 mysql、postgres 甚至 oracle 上都能正常工作。

让我解释一下会发生什么：

我们在 sqlserver 中创建了访问相同数据库的用户，但是它在不同的模式中，例如：

*   用户：USER1、USER2、USER3
*   USER1 连接到 SCHEMA1
*   USER2 连接到 SCHEMA2
*   USER3 连接到 SCHEMA3

    我们授予这些用户的权限是：db_datareader、db_datawriter、dbowner、public

    它有时有效，但有时无效

各位有遇到过这样的问题吗？

# iphone - 按字典键对可变数组进行排序

> ID：10887490
> 
> 赞同：6
> 
> 时间：2012-06-04T19:58:03.210
> 
> 标签：iphone, objective-c, ios, sorting, nsmutablearray

我已经使用 的各种排序方法查看了一些答案`NSMutableArray`，但由于某种原因，它们对我不起作用。

我只是想通过`Delay`每个字典中的键对包含字典的可变数组进行排序。但是，“排序”数组与原始数组完全相同。

顺便说一句，如果我创建一个虚拟可变数组并用包含数字的字典填充它，它工作正常，但由于某种原因，它不会对我正在初始化的这个可变数组进行排序。

我究竟做错了什么？

这是我的代码：

```
playlistCalls = [[NSMutableArray alloc] initWithArray:[currentPlaylist objectForKey:@"Tunes"]];

NSLog(@"original %@", playlistCalls);

NSSortDescriptor *delay = [NSSortDescriptor sortDescriptorWithKey:@"Delay" ascending:YES];
[playlistCalls sortUsingDescriptors:[NSArray arrayWithObject:delay]];

NSLog(@"sorted %@", playlistCalls); 
```

这是包含字典的数组：

```
2012-06-04 15:48:09.129 MyApp[57043:f503] original (
        {
        Name = Test Tune;
        Delay = 120;
        Volume = 100;
    },
        {
        Name = Testes;
        Delay = 180;
        Volume = 100;
    },
        {
        Name = Testing;
        Delay = 60;
        Volume = 100;
    }
)

2012-06-04 15:48:09.129 MyApp[57043:f503] sorted (
        {
        Name = Test Tune;
        Delay = 120;
        Volume = 100;
    },
        {
        Name = Testes;
        Delay = 180;
        Volume = 100;
    },
        {
        Name = Testing;
        Delay = 60;
        Volume = 100;
    }
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T20:09:54.430

当我`NSNumber`在字典中使用 s 时，上面的代码很好。这使我相信该`Delay`值作为字符串存储在您的字典中。然后您需要做的是按字符串排序`integerValue`。

```
NSSortDescriptor *delay = 
   [NSSortDescriptor sortDescriptorWithKey:@"Delay.integerValue" ascending:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:06:54.510

请尝试以下方法，它对我有用

```
NSDictionary *dic;
NSMutableArray *arr = [[NSMutableArray alloc] init];

dic = [NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithInt:120], @"Delay",
        [NSNumber numberWithInt:100], @"Volume",
       nil];
[arr addObject:dic];

dic = [NSDictionary dictionaryWithObjectsAndKeys:
       [NSNumber numberWithInt:160], @"Delay",
       [NSNumber numberWithInt:100], @"Volume",
       nil];
[arr addObject:dic];

dic = [NSDictionary dictionaryWithObjectsAndKeys:
       [NSNumber numberWithInt:100], @"Delay",
       [NSNumber numberWithInt:100], @"Volume",
       nil];
[arr addObject:dic];

NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Delay" ascending:YES];
[arr sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; 
```

# css - jquerymobile listview自定义css

> ID：10887491
> 
> 赞同：0
> 
> 时间：2012-06-04T19:58:07.250
> 
> 标签：css, jquery-mobile

[http://jsfiddle.net/WEuzB/11/](http://jsfiddle.net/WEuzB/11/)

在此示例中，我试图显示锚定在左侧的评论消息和右侧的评论者，

但我想要更大的消息（或更小的屏幕），它不会像示例中所示的那样重叠，

我正在寻找换行文本 + 浮动右属性

当然是margin-right：250px，在评论的div上不好（对于小屏幕，什么都没有

谢谢

**编辑**；另外，如果您可以解释为什么此解决方案[http://jsfiddle.net/WEuzB/12/](http://jsfiddle.net/WEuzB/12/)不起作用（由于某种原因，文本被隐藏）

**编辑 2**：几乎可以工作[http://jsfiddle.net/WEuzB/13](http://jsfiddle.net/WEuzB/13)或[http://jsfiddle.net/WEuzB/31/](http://jsfiddle.net/WEuzB/31/)，但我想要右下角的评论者，以及比宽度更好的评论文本换行如果可能的话，60% 会很酷

编辑3：最后用*li data-role="list-divider"*作为作者姓名，用*li*作为消息，更简单更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:14:41.173

[http://jsfiddle.net/xhellzx/WEuzB/26/](http://jsfiddle.net/xhellzx/WEuzB/26/)

像这样？

我只是使用“位置：相对”移动它并操纵顶部和右侧边缘值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:00:08.963

这个怎么样？[http://jsfiddle.net/nirmaljpatel/8ceuD/5/](http://jsfiddle.net/nirmaljpatel/8ceuD/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:05:47.783

使用 li data-role="list-divider" 分隔消息 + 显示作者姓名

# c# - 具有输出参数的存储过程连接到 C# 中的方法

> ID：10887493
> 
> 赞同：1
> 
> 时间：2012-06-04T19:58:09.683
> 
> 标签：c#, sql-server, visual-studio-2008

您是否看到这**条**线明显有问题：

```
commaSepString1 = com.Parameters["@CommaSepString"].Value.ToString(); 
```

它显示如下错误：

> 你调用的对象是空的。

**简而言之，C# 方法如下所示：**

```
public static DataTable GetFilmDetails(string filmId, out string
commaSepString1) 
```

它采用以下存储过程（自行正确执行）：

```
com.CommandText = "CatalogGetFilmDetails2"; 
```

由于**@CommaSepString 是存储过程中的输出参数，因此**在 C# 中我有这个：

```
param = com.CreateParameter();
param.ParameterName = "@CommaSepString";
param.Direction = ParameterDirection.Output;
param.DbType = DbType.String;
com.Parameters.Add(param);

commaSepString1 = com.Parameters["@CommaSepString"].Value.ToString(); 
```

如果您对存储过程感到好奇，它的开头是这样的：CREATE PROCEDURE CatalogGetFilmDetails2

```
(@FilmID int, @CommaSepString VARCHAR(50) OUTPUT) AS 
```

SP 根据一些连接将一些行插入到表变量中，它将该表中 x 列中的所有值放入带有逗号分隔值的字符串中：

> ```
> SELECT @CommaSepString 
> = STUFF((SELECT ', ' + Categ  FROM @Filme1 FOR XML PATH('')), 1,1,'') 
> ```

然后它选择表。

感谢您耐心阅读本文。如果我发布存储过程和 C# 方法的整个代码会更清楚吗？不确定我是否被允许这样做，并担心它可能太长而无法阅读。

PS：**commaSepString 一定有问题！在我在这两个地方添加它之前，该代码运行良好。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:32:16.580

SQL Server 不知道`output`，它只知道`input/output`。所以当你指定

```
param.Direction = ParameterDirection.Output; 
```

SQL Server 实际上也会读取该字符串。由于您没有提供值，SQL Server 确定其长度为零。

令人难以置信的是，如果您指定幻数`-1`，SQL Server 将为您确定大小：

```
param.Size = -1; 
```

这可能是关于 ADO.NET 的第二个最糟糕的问题。就在 SQL`NULL`转换为`DBNull.Value`而不是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:11:06.277

您应该在有问题的行上设置一个断点，然后您应该检查您的参数集合以检查参数是否存在。
如果存在，则检查其值是否为空。
在这种情况下，`.ToString()`将为您提供所描述的错误。

# facebook - 未列出的 Facebook 连接应用程序

> ID：10887497
> 
> 赞同：1
> 
> 时间：2012-06-04T19:58:25.637
> 
> 标签：facebook, settings, facebook-apps

如何使我的 facebook connect 应用不公开？我不希望人们能够在 facebook 上搜索应用程序并找到我的 facebook 连接应用程序。但我不想使用沙盒模式，因为任何来到我网站的人都需要能够使用 facebook connect 应用程序。

谢谢，布伦丹

# java - 使用用户输入计算平均值

> ID：10887498
> 
> 赞同：0
> 
> 时间：2012-06-04T19:58:30.513
> 
> 标签：java, average

我正在编写一个程序来计算用户输入的平均值。

```
import java.util.Scanner;
public class mean
{   
    static Scanner input = new Scanner (System.in);
    public static void main (String[] args)
    {
    double i;
    double sum = 0;
    int count = 0;
    do
    {
        System.out.println("input");
        i = input.nextDouble();
        sum = sum + i;
        count++;
    }while (i != 0);
    System.out.println("sum is " + sum + " count is " + (count - 1));
    System.out.println("average is " + sum / (count - 1));
}
} 
```

这里如果我输入0，它会计算。但如果列表中有 0。有人可以指导我一段时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:08:19.613

您可以询问扫描仪，扫描仪正在读取的下一个令牌是否是双重的，如果不是，则中断。下面的例子：

```
import java.util.Scanner;
public class mean
{   
    static Scanner input = new Scanner (System.in);
    public static void main (String[] args)
    {
    double i;
    double sum = 0;
    int count = 0;
    while(input.hasNextDouble())
    {
        System.out.println("input");
        i = input.nextDouble();
        sum = sum + i;
        count++;
    }
    System.out.println("sum is " + sum + " count is " + (count));
    System.out.println("average is " + sum / (count));
}
} 
```

如果用户输入一个非数字字符（例如不是'+'、'-'、0-9、'.'等），循环将中断，因为`input.hasNextDouble()`将返回false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T17:17:10.183

而不是 `sum = sum + i`更简单的方法`sum += i`

# sql-server - 导入 DATETIME 数据时出现批量加载数据转换错误

> ID：10887502
> 
> 赞同：1
> 
> 时间：2012-06-04T19:58:36.787
> 
> 标签：sql-server, sql-server-2008

我在 StackOverflow 上找到了一些关于这个主题的帖子，但似乎没有一个可以解决我的问题。

我正在尝试为 SQL Server 2008 Express 设置批量导入，但无法导入`datetime`值。这个问题似乎很基本，以至于我必须遗漏一些非常简单的东西，我希望其他人能解决这个问题。

## 问题

我正在导入此表：

```
CREATE TABLE [dbo].[BulkTest](
    [ReportDate] [datetime] NOT NULL
) 
```

这是我的格式文件（BulkTest.fmt）：

```
10.0
1
1       SQLDATETIME   0       0       "\r\n"   1     ReportDate                                 "" 
```

这是正在导入的数据（BulkTest.tab）：

```
ReportDate
2010-12-31
2011-01-31 
```

这是导入语句：

```
BULK INSERT dbo.BulkTest
FROM 'Q:\...\BulkTest.tab'
WITH (
    CHECK_CONSTRAINTS,
    TABLOCK,
    FORMATFILE='Q:\...\BulkTest.fmt',
    FIRSTROW=1,
    DATAFILETYPE='char'
    ); 
```

这些是错误：

```
Bulk load data conversion error (type mismatch or invalid character for the specified codepage) for row 1, column 1 (ReportDate).
Msg 4864, Level 16, State 1, Line 1
Bulk load data conversion error (type mismatch or invalid character for the specified codepage) for row 2, column 1 (ReportDate).
Msg 4832, Level 16, State 1, Line 1 
```

## 我努力了

*   更改日期格式，包括`12/31/2010`、`31/12/2010`、`20101231`、`2010-12-31 00:00:00`和各种其他格式。
*   添加/删除/更改批量插入语句选项`DATAFILETYPE`, `TABLOCK`, `CHECK_CONSTRAINTS`.
*   更改格式文件中的分隔符和字段大小（尽管根据 MSDN，字段大小无关紧要）。
*   运行`SET DATEFORMAT ymd`。
*   使用十六进制编辑器检查导入的文件，确保它确实包含 8 位字符而不是 unicode；它包含以 ASCII 格式显示的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:05:58.537

为什么你需要一个格式文件呢？当你不使用它时会发生什么？

```
BULK INSERT dbo.BulkTest
FROM 'Q:\...\BulkTest.tab'
WITH (
    CHECK_CONSTRAINTS,
    TABLOCK,
    FIRSTROW=1,
    DATAFILETYPE='char',
    ROWTERMINATOR='\r\n'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T13:17:30.443

对不起，我迟到了，但我希望这可以帮助其他一些可怜的人。

无论如何，我在使用格式文件时发现了同样的错误。

我没有使用**SQLDATE**类型，而是使用了**SQLCHAR**和长度。

2015-01-01 = 长度 10

> 11.0
> 
> 1
> 
> 1 SQLCHAR 0 10 "\r\n" 1 my_date ""

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:06:56.943

这是适用于我的代码的格式：

```
08/17/2000 16:32:32 
```

生产者恰好是 .NET `ToString(DateTimeFormatInfo.InvariantInfo)`，.

# php - 用数组构建 CSV

> ID：10887505
> 
> 赞同：6
> 
> 时间：2012-06-04T19:58:39.637
> 
> 标签：php, arrays, codeigniter, csv, download

我需要运行一个将返回多行并将其导出到 CSV 的查询。不过，我必须按一定的顺序放置单元格。

因此，可以说我的表的布局是 ID、姓名、地址、妻子。我需要按照id、地址、妻子、姓名的顺序构建一个csv。我想我可以按正确的顺序制作一个数组，然后用它制作一个 csv，但是经过一个小时的谷歌搜索，我无法找到如何用数组制作一个 csv。

有 fputcsv 但这需要一个预制的 csv。另外，我希望有一种codeigniter方式来做到这一点。

```
 public function export() {
    $this->load->helper('download');

    $data[1] = 'i like pie';
    $data[2] = 'i like cake';
    force_download('result.csv', $data);  
} 
```

我试过了，但错误说下载帮助文件需要一个字符串而不是数组。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T20:10:24.413

这是我使用的一些代码...您可以调整导出中所需的列...

注意：此 CSV 直接发送到`php://output`直接写入输出缓冲区的内容。这意味着**您不会在服务器上保存任何 .csv 文件**，它可以处理**更大的文件大小**，构建一个巨大的数组然后尝试循环遍历它。

```
 header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=\"Jobs_".date('M.j.y', $from)."-".date('M.j.y', $to).".csv\"");
    header("Pragma: no-cache");
    header("Expires: 0");

    $handle = fopen('php://output', 'w');
    fputcsv($handle, array(
        'JobId',
        'Template',
        'Customer',
        'Status',
        'Error',
        'PDF',
        'Run Time',
        'Wait Time',
        'Server'
    ));

    foreach ($jobs as $jobData) {
        fputcsv($handle, array(
            $job->getId(),
            $job->getTemplate(),
            $jobData['customers_firstname'].' '.$jobData['customers_lastname'],
            $status,
            $error,
            $jobData['products_pdfupload'],
            $job->getRunTime(),
            $job->getWaitTime(),
            $jobData['server']
        ));
    }

    fclose($handle);
    exit; 
```

这应该可以让您很好地了解 CSV 导出的工作原理。我不使用 CodeIgniter 的文件下载助手，所以在这方面我无法为您提供帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-02T20:38:36.833

这个简短的脚本构建 CSV 并允许您下载它：

```
function convert_to_csv($input_array, $output_file_name, $delimiter)
{
    /** open raw memory as file, no need for temp files */
    $temp_memory = fopen('php://memory', 'w');
    /** loop through array */
    foreach ($input_array as $line) {
        /** default php csv handler **/
        fputcsv($temp_memory, $line, $delimiter);
    }
    /** rewrind the "file" with the csv lines **/
    fseek($temp_memory, 0);
    /** modify header to be downloadable csv file **/
    header('Content-Type: application/csv');
    header('Content-Disposition: attachement; filename="' . $output_file_name . '";');
    /** Send file to browser for download */
    fpassthru($temp_memory);
}

/** Array to convert to csv */
$array_to_csv = Array(Array(12566, 'Enmanuel', 'Corvo'), Array(56544, 'John', 'Doe'), Array(78550, 'Mark', 'Smith'));
convert_to_csv($array_to_csv, 'report.csv', ','); 
```

你可以在这里阅读完整的帖子：

[PHP 数组到 CSV - 下载](http://webtricksandtreats.com/export-to-csv-php/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:15:33.173

```
<?php

$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp);
?> 
```

# f# - 带有活动模式的 FizzBu zz

> ID：10887506
> 
> 赞同：4
> 
> 时间：2012-06-04T19:58:40.643
> 
> 标签：f#, fizzbuzz, active-pattern

我试图理解活动模式，所以我在玩 FizzBu​​zz：

```
let (|Fizz|_|) i = if i % 3 = 0 then Some Fizz else None
let (|Buzz|_|) i = if i % 5 = 0 then Some Buzz else None
let (|FizzBuzz|_|) i = if i % 5 = 0 && i % 3 = 0 then Some FizzBuzz else None

let findMatch = function
    | Some Fizz -> "Fizz"
    | Some Buzz -> "Buzz"
    | Some FizzBuzz -> "FizzBuzz"
    | _ -> ""

let fizzBuzz = seq {for i in 0 .. 100 -> Some i}
                |> Seq.map (fun i -> i, findMatch i) 
```

这基本上是正确的方法，还是有更好的方法在这里使用活动模式？我不应该能够`findMatch`使用 int 而不是 int 选项吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T04:27:01.950

Daniel 的第一个解决方案可以简化，因为您实际上不需要为`FizzBuzz`. 这种情况可以描述为既`Fizz`和`Buzz`匹配，也可以用模式语言很好地表达：

```
let findMatch = function 
  | Fizz & Buzz -> "FizzBuzz" 
  | Fizz -> "Fizz" 
  | Buzz -> "Buzz" 
  | _ -> "" 

let fizzBuzz = [ for i in 0 .. 100 -> findMatch i ] 
```

`Fizz & Buzz`如果两者都匹配`Fizz`，则模式`Buzz`匹配。这依赖于模式首先匹配的事实，因此在这种情况下顺序是相关的。我还将您的最后一行缩短为我喜欢的样式并且更短（但意见不同）。

或者，如果您不想定义太多单一用途的活动模式，您还可以编写一个参数化的活动模式来测试输入是否可以被任何指定的数字整除：

```
let (|DivisibleBy|_|) by n = if n%by=0 then Some DivisibleBy else None

let findMatch = function 
  | DivisibleBy 3 & DivisibleBy 5 -> "FizzBuzz" 
  | DivisibleBy 3 -> "Fizz" 
  | DivisibleBy 5 -> "Buzz" 
  | _ -> "" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T20:08:41.427

你的`findMatch`功能应该是：

```
let findMatch = function
    | FizzBuzz -> "FizzBuzz" (* should be first, as pad pointed out *)
    | Fizz -> "Fizz"
    | Buzz -> "Buzz"
    | _ -> "" 
```

您可以重写最后几行：

```
let fizzBuzz = Seq.init 100 (fun i -> i, findMatch i) 
```

您的活动模式很好。一种替代方法是使用完整的活动模式：

```
let (|Fizz|Buzz|FizzBuzz|Num|) i = 
    match i % 3, i % 5 with
    | 0, 0 -> FizzBuzz
    | 0, _ -> Fizz
    | _, 0 -> Buzz
    | _ -> Num i 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T20:15:15.637

删除（不必要的）`Some`，以便`findMatch`函数`int`作为其参数：

```
let findMatch = function
    | FizzBuzz -> "FizzBuzz" (* Should be the first pattern *)
    | Fizz -> "Fizz"
    | Buzz -> "Buzz"
    | _ -> ""

let fizzBuzz = seq { for i in 0..100 -> i, findMatch i } 
```

# c++ - 从 .in 文件中读取对象

> ID：10887512
> 
> 赞同：0
> 
> 时间：2012-06-04T19:59:16.120
> 
> 标签：c++

您好，我有一个由 2 个空格分隔的 3 个 int 列表，我想阅读它们并创建一个对象。我将从数据结构、类和前/后数据中粘贴我的代码。我找不到错误的原因。欢迎任何帮助：

类.h：

```
class RAngle{
private:
    int x,y,l,b; 
    int solution,prec;
    RAngle(){
        x = y = solution = prec = b = l = 0;
    }

    RAngle(int i,int j,int k){
        x = i;
        y = j;
        l = k;
        solution = 0; prec=0; b=0;
    }

    friend ostream& operator << (ostream& out, const RAngle& ra){
        out << ra.x << " " << ra.y<<" " << ra.l <<endl;
        return out;
    }

    friend istream& operator >>( istream& is, RAngle& ra){
        is >> ra.x;
        is >> ra.y;
        is >> ra.l;

        return is ;
    }

}; 
```

数据结构.h：

```
template <class T>
class List
{
private:
    struct Elem
    {
        T data;
        Elem* next;
    };

    Elem* first;

    void push_back(T data){
    Elem *n = new Elem;
    n->data = data;
    n->next = NULL;
    if (first == NULL)
    {
        first = n;
        return ;
    }
    Elem *current;
    for(current=first;current->next != NULL;current=current->next);
    current->next = n;
} 
```

主.cpp：

```
void readData(List <RAngle> &l){
    *RAngle r;
    int N;
    ifstream f_in;
    ofstream f_out;

    f_in.open("ex.in",ios::in);
    f_out.open("ex.out",ios::out);

    f_in >> N;
    for(int i=0;i<13;++i){
        f_in >> r;
        cout << r;
        l.push_back(r);
    }

    f_in.close();
    f_out.close();
}* 
```

输入数据：

```
3 1 2
1 1 3
3 1 1 
```

输出（阅读时打印）：

```
1 2 1
1 3 3
1 1 3 
```

正如你所看到的，它以第二个位置开始读取并以第一个位置结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:08:08.350

读取的行`f_in >> N`首先将计数读入变量，但您的输入文件缺少该计数。（或者更确切地说，它将第一个“3”视为计数，这意味着元组实际上以“1 2 1 ...”开头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:08:31.253

> 正如你所看到的，它以第二个位置开始读取并以第一个位置结束。

那是因为您提取了第一个值。

在`readData`功能上：

```
f_in >> N;    //  This line will extract the first value from the stream.

// the loop starts at the second value
for(int i=0;i<13;++i){
f_in >> r;
    cout << r;
    l.push_back(r);
} 
```

# c# - MethodBase.GetCurrentMethod() 反射线解释

> ID：10887513
> 
> 赞同：1
> 
> 时间：2012-06-04T19:59:17.377
> 
> 标签：c#, reflection, syntax, .net-3.5

我正在从 C++ 过渡到 C#，我有一个让我感到困惑的方法调用。我想我可能能够猜到它的作用，但如果专家直接告诉我，我将不胜感激：

```
WDResult returnValue = (WDResult)Invoke(
    (MethodInfo)MethodBase.GetCurrentMethod(),
    new object[] { request, loadType }); 
```

在我看来，它使用反射来获取已经被调用的方法。我不明白为什么有人会这样做，如果是这样的话。另外，为什么要使用反射而不是递归调用呢？请注意，在代码中，调用中没有使用不同的重载。参数 request 和 loadType 几乎直接传递到该代码中出现的函数的第一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:01:14.717

那是调用一个自定义`Invoke()`方法，它需要一个`MethodInfo`.
这不是标准反射。

查看`Invoke()`方法以了解他们为什么这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:06:57.793

> 另外，为什么要使用反射而不是递归调用呢？

您可以将该行复制粘贴到其他方法中，只要它们采用相同的参数，它仍然可以工作。

# java - 在 Mac OS X 上更改 Java 的最大内存堆

> ID：10887518
> 
> 赞同：15
> 
> 时间：2012-06-04T19:59:36.487
> 
> 标签：java, macos, scala

我正在尝试在 Mac OS X 上更改 Java 的最大内存大小“堆”。我已经阅读了很多地方来更改“-XX:MaxPermSize”，但我找不到该文件，也不知道在哪里进行更改环境。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T20:08:54.750

您可以使用以下参数设置 java VM 可用的内存：

```
-Xms64m -Xmx200m 
```

-Xms 指定最小内存；-Xmx 最大值。

您必须在运行应用程序时指定它们。例如，如果你有一个名为 app.jar 的 jar，你可以输入运行它

```
java -Xms64m -Xmx512m -jar app.jar 
```

我认为在 32 位机器上你不能给 JVM 超过 1Gb。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-21T18:41:05.950

我正在使用 WEKA，我遇到了同样的问题。在这里，我找到了解决方案，而且很容易。

转到应用程序==> 左键单击特定应用程序（如 Weka）==> 显示包内容==> 内容==>Info.Plist==>Java==> VMOptions==> 根据需要增加内存大小（在我的 Mac 中默认为 1 Gb，我增加到 6 Gb）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:02:02.060

`-Xmx`使用switch设置最大堆大小。

-XX:MaxPermSize 用于指定 perm 生成的最大大小，它是总堆的子集

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-15T13:22:45.333

我试图在终端中运行一个带有非常大数组的 java 程序。它一直用完内存，但我通过增加每个线程允许的内存来解决问题：

```
$ java -Xss12G name 
```

这里`-Xss12G`告诉 java 运行时为每个线程分配 12Gb，然后运行`name`​​. 同样`-Xss4G`，每个线程使用 4Gb。这`$`是`Terminal`控制台提示，可能会有文件夹和你的名字。

注意：如果您不使用线程，则分配内存以用于当前程序或正在运行的主线程。

通过在终端中编写命令`java -X`，您将获得有关分配堆和线程内存的更多详细信息：

```
$ java -X 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T20:11:41.907

如果您从终端启动应用程序，您将在命令行上提供参数：

```
java -XX:MaxPermSize=128m ... 
```

这与任何其他平台上的相同。

如果您需要为应用程序包设置此设置（即，看起来像常规的可双击 Mac 应用程序的 Java 应用程序），您需要编辑 info.plist 文件，该文件位于包内，通常不是可见的。

[此页面](http://blog.bensmann.com/set-intellij-java-options-on-mac-os-x)包含有关如何为 IntelliJ 执行此操作的说明，但也适用于其他捆绑的 Mac Java 应用程序。

# bash - 在双引号内执行本地 bash 变量

> ID：10887519
> 
> 赞同：6
> 
> 时间：2012-06-04T19:59:48.967
> 
> 标签：bash, for-loop, echo

假设我有四个网络服务器，我需要将一行 HTML 添加到文件中。如您所见，我需要整数出现在**cluster=之后**

```
for i in 01 02 03 04; do ssh web.${i}.domain.com 'echo "<img src=beacon.gif?cluster=${i}>" >> /var/www/index.html'; done 
```

如何实现？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T20:02:26.593

请注意`'`之前和之后`${i}`：

```
for i in 01 02 03 04; do
    ssh web.${i}.domain.com 'echo "<img src=beacon.gif?cluster='${i}'>" >> /var/www/index.html'
done 
```

**编辑：**在编程语言中引用 shell 和字符串文字之间存在巨大差异。在 shell 中，“引用用于删除某些字符或单词对 shell 的特殊含义”（bash 手册）。以下 to 行与 bash 相同：

```
'foo bar'
foo' 'bar 
```

无需引用字母字符 - 但它增强了可读性。在您的情况下，只有特殊字符，例如`"`and`<`必须被引用。但是变量`$i`只包含数字，并且这种替换可以在引号之外安全地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:02:09.643

我认为应该这样做：

```
"echo \"<img src=beacon.gif?cluster=${i}>\" >> /var/www/index.html" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:05:23.657

```
for i in 01 02 03 04
do
  ssh web.${i}.domain.com "echo \"<img src=beacon.gif?cluster=${i}>\" >> /var/www/index.html
done 
```

基本上，只需使用双引号，但您必须转义内部引号。

# xslt - 将参数从 xquery 传递到 xslt

> ID：10887523
> 
> 赞同：0
> 
> 时间：2012-06-04T20:00:11.160
> 
> 标签：xslt, xquery, exist-db

我想使用 xslt 转换 xml，但重要的变量来自请求。我有这样的xquery：

```
let $transform := doc("projekt.xsl")
let $serialization-options := 'method=xml media-type=text/xml omit-xml-declaration=yes indent=no'
let $params := 
<parameters>
    <param name="output.omit-xml-declaration" value="yes"/>
    <param name="output.indent" value="yes"/>
    <param name="output.media-type" value="text/html"/>
    <param name="output.method" value="xhtml"/>
    <param name="param.name" value="topicid" />
    <param name="param.select" value="{$topid}"/>
</parameters>

return 
    transform:transform($doc, $transform, $params, $serialization-options) 
```

文件 project.xsl 在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="topicid"/>

<xsl:template match="/">
    <xsl:value-of select="$topicid"/>
    <xsl:apply-templates select="discussflow/message[@topic=$topicid]"/>
</xsl:template>

<xsl:template name="msg" match="//message">
    ..........
</xsl:template> 
```

我想你添加属性'select'到：

```
<xsl:param name="topicid"/> 
```

在 xquery 中指定了 $topid 值。

我在这里看到了类似的东西：[http](http://www.techrepublic.com/article/pass-parameters-to-xsl-templates-programmatically/1044596) ://www.techrepublic.com/article/pass-parameters-to-xsl-templates-programmatically/1044596 但在 xquery 中它不需要工作。

我使用存在数据库 1.4.1

**编辑：**

transform:transform 来自[http://exist-db.org/xquery/transform](http://exist-db.org/xquery/transform)命名空间

官方文档在这里：[https ://en.wikibooks.org/wiki/XQuery/XQuery_and_XSLT](https://en.wikibooks.org/wiki/XQuery/XQuery_and_XSLT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:11:02.233

在您的 xslt 文档中，您需要使用：

```
<xsl:param name="param.select" select="default value" />
<xsl:param name="output.omit-xml-declaration" select="default value""/>
<xsl:param name="output.indent" select="default value"/>
<xsl:param name="output.media-type" select="default value"/>
<xsl:param name="output.method" select="default value"/>
<xsl:param name="param.name" select="default value" />
<xsl:param name="param.select" select="default value"/> 
```

也就是说，参数的名称必须与 xquery 中定义的名称相同。如果没有这样的参数，您可以使用 select 输入默认值（或者您在没有请求的情况下运行 xslt，例如用于测试目的......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:55:26.843

我不熟悉这个 API，但我不知道你从哪里得到这个想法：

```
<param name="param.name" value="topicid" />
<param name="param.select" value="{$topid}"/> 
```

我对文档的阅读是，如果样式表有一个名为 topicid 的参数，那么我希望查询传递类似

```
<param name="topicid" value="{$topid}"/> 
```

# java - JavaFX 样式类不会刷新

> ID：10887525
> 
> 赞同：11
> 
> 时间：2012-06-04T20:00:22.183
> 
> 标签：java, css, styles, javafx, fxml

如果选择了节点，则将样式类添加到节点，如果选择其他项目，则将其删除。即使我删除了样式类，样式也不会刷新，因此它不会回到正常状态：

```
admin_category_label.getStyleClass().remove(admin_category_label.getStyleClass().indexOf("selected"));
admin_category_label.getStyleClass().add("clear"); 
```

但样式将与选定的类保持一致

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T08:43:56.840

这是一个错误。据报道这里[删除了悬停样式类，不更新样式](http://javafx-jira.kenai.com/browse/RT-19089)。您可能想投票并观看它。作为一种解决方法，您应该覆盖您触摸/更改为与默认规则相同的 css 规则。演示：

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBoxBuilder;
import javafx.stage.Stage;

public class StyleDemo extends Application {

    @Override
    public void start(Stage primaryStage) {
        final Label lbl = new Label("Style Me");
        lbl.getStyleClass().add("style1"); // initial style

        Button btn = new Button("Change the style");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent arg0) {
                lbl.getStyleClass().remove("style1");
                lbl.getStyleClass().add("style2");
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(VBoxBuilder.create().spacing(20).children(lbl, btn).build());
        Scene scene = new Scene(root, 300, 250);
        scene.getStylesheets().add(this.getClass().getResource("style.css").toExternalForm());
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

style.css 是：

```
.style1 {
    -fx-text-fill: red;
    -fx-border-color: green;
    -fx-font-size: 20;
}

.style2 {
    -fx-text-fill: blue;
    -fx-border-color: red;
    -fx-font-size: 15;
    -fx-underline: true;
} 
```

单击按钮时，`style1`删除最初添加的并`style2`添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T09:26:04.293

感谢 Uluk Biy 发布的解决方案。但它似乎不能“按原样”工作（在 jdk 1.70_40 win x 64 上测试）。我必须在设置类之前清除样式类。这是我的工作代码：

```
import javafx.application.Application;
import javafx.beans.property.BooleanProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBoxBuilder;
import javafx.stage.Stage;

public class StyleDemo extends Application {
    //ADD just a toggle property
    public static BooleanProperty toggle = new SimpleBooleanProperty(false);

    @Override
    public void start(Stage primaryStage) {
        final Label lbl = new Label("Style Me");
        lbl.getStyleClass().add("style1"); // initial style

        Button btn = new Button("Change the style");

        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                //ADD clear style class !
                lbl.getStyleClass().clear();
                if(toggle.get()) {
                    lbl.getStyleClass().add("style1");
                    toggle.set(!toggle.get());
                }else{
                    lbl.getStyleClass().add("style2");
                    toggle.set(!toggle.get());
                }
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(VBoxBuilder.create().spacing(20).children(lbl,btn).build());
        Scene scene = new Scene(root, 300, 250); 
        scene.getStylesheets().add("/style.css");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-11T09:07:20.877

至少对于 Java 8，这现在有效。但是，我不会做 OP 所做的事情，而是会实现这样的效果：

```
admin_category_label.getStyleClass().remove("selected");
admin_category_label.getStyleClass().add("clear"); 
```

看起来干净一些。

请记住，您的 CSS 选择器需要如下所示：

```
.selected {
    /* Styling attributes... */
}

.clear {
    /* Styling attributes... */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-05T13:05:42.387

6 年后，该错误仍然存​​在，这是一种更简单的方法，特别是如果您不想弄乱其他类：

```
int indexOf = textField.getStyleClass().indexOf(INVALID_CLASS);
if(indexOf != -1){
    textField.getStyleClass().remove(indexOf);
} 
```

为什么这行得通？因为用于 StyleClass 的列表是 TrackableObservablieList 继承自 remove(index) 确实触发了 remove(Object) 没有的更改的层次结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T19:25:44.763

您可以尝试为应用程序添加一个 CSS。您甚至可以使用 FXML 将设计与应用程序的逻辑分开。这是一段在 JavaFX 2.1 中对我有用的代码！

```
private Parent replaceSceneContent(String fxml) throws Exception {
   Parent page = (Parent)
      FXMLLoader.load(
         Main.class.getResource(fxml), null, new JavaFXBuilderFactory());
   Scene scene = stage.getScene();
   if (scene == null) {
      scene = new Scene(page, 1366, 720);
      scene.getStylesheets().add(
         Main.class.getResource(
            "../skinFolder/css/defaultSkin.css" ).toExternalForm());
      stage.setScene(scene);
   } else {
      stage.getScene().setRoot(page);
   }
   stage.sizeToScene();
   return page;
} 
```

# hibernate - 休眠模式导出发生两次

> ID：10887527
> 
> 赞同：1
> 
> 时间：2012-06-04T20:00:39.130
> 
> 标签：hibernate

我和一个朋友开发了一个使用休眠（学校项目）的会议管理网络应用程序。当我启动应用程序时，会使用一些数据创建 db (mysql) 表。直到最近一切正常，但昨天我的朋友输入了将参与者分配到会议的功能，每当我尝试使用它时，我都会得到以下信息（在此操作之前清除控制台）：

```
Hibernate: 
    select
        conference0_.conferenceId as conferen1_2_,
        conference0_.active as active2_,
        conference0_.description as descript3_2_,
        conference0_.endDate as endDate2_,
        conference0_.location_name as location7_2_,
        conference0_.name as name2_,
        conference0_.startDate as startDate2_ 
    from
        test.CONFERENCES conference0_ 
    where
        conference0_.name=?
Hibernate: 
    select
        location0_.name as name5_0_,
        location0_.active as active5_0_,
        location0_.address as address5_0_,
        location0_.contactName as contactN4_5_0_,
        location0_.locationId as locationId5_0_,
        location0_.maxCapacity as maxCapac6_5_0_,
        location0_.phone1 as phone7_5_0_,
        location0_.phone2 as phone8_5_0_ 
    from
        test.LOCATION location0_ 
    where
        location0_.name=?
Hibernate: 
    select
        user0_.userId as userId1_,
        user0_.active as active1_,
        user0_.admin as admin1_,
        user0_.company_companyID as company13_1_,
        user0_.email as email1_,
        user0_.lastLogin as lastLogin1_,
        user0_.name as name1_,
        user0_.pasportID as pasportID1_,
        user0_.password as password1_,
        user0_.phone1 as phone9_1_,
        user0_.phone2 as phone10_1_,
        user0_.salt as salt1_,
        user0_.userName as userName1_ 
    from
        test.Users user0_ 
    where
        user0_.userName=?
Hibernate: 
    select
        company0_.companyID as companyID0_0_,
        company0_.active as active0_0_,
        company0_.companyType as companyT3_0_0_,
        company0_.name as name0_0_ 
    from
        test.Company company0_ 
    where
        company0_.companyID=?
Hibernate: 
    alter table test.CONFERENCES 
        drop 
        foreign key FKC0DCF2B7133695CF
04/06/2012 22:42:32 org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export
Hibernate: 
    alter table test.Conferences_Participants 
        drop 
        foreign key FK5D9C90484DAAAE9B
Hibernate: 
    alter table test.Conferences_Participants 
        drop 
        foreign key FK5D9C9048751CA8AA
Hibernate: 
    alter table test.Conferences_Users 
        drop 
        foreign key FK7EAAE2604DAAAE9B
Hibernate: 
    alter table test.Conferences_Users 
        drop 
        foreign key FK7EAAE260751CA8AA
Hibernate: 
    alter table test.Users 
        drop 
        foreign key FK4E39DE8B5D743AE
Hibernate: 
    drop table if exists test.CONFERENCES
Hibernate: 
    drop table if exists test.Company
Hibernate: 
    drop table if exists test.Conferences_Participants
Hibernate: 
    drop table if exists test.Conferences_Users
04/06/2012 22:42:33 org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
04/06/2012 22:42:33 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
04/06/2012 22:42:33 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
04/06/2012 22:42:33 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
04/06/2012 22:42:33 org.hibernate.mapping.RootClass checkCompositeIdentifier
WARN: HHH000038: Composite-id class does not override equals(): model.ConferencesParticipants
04/06/2012 22:42:33 org.hibernate.mapping.RootClass checkCompositeIdentifier
WARN: HHH000039: Composite-id class does not override hashCode(): model.ConferencesParticipants
04/06/2012 22:42:33 org.hibernate.mapping.RootClass checkCompositeIdentifier
WARN: HHH000038: Composite-id class does not override equals(): model.ConferencesUsers
04/06/2012 22:42:33 org.hibernate.mapping.RootClass checkCompositeIdentifier
WARN: HHH000039: Composite-id class does not override hashCode(): model.ConferencesUsers
04/06/2012 22:42:33 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
04/06/2012 22:42:33 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 1
04/06/2012 22:42:33 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
04/06/2012 22:42:33 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/test]
04/06/2012 22:42:33 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=root, password=****}
Hibernate: 
    drop table if exists test.LOCATION
Hibernate: 
    drop table if exists test.Users
04/06/2012 22:42:34 org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
04/06/2012 22:42:34 org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
04/06/2012 22:42:34 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export
Hibernate: 
    alter table test.CONFERENCES 
        drop 
        foreign key FKC0DCF2B7133695CF
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.CONFERENCES drop foreign key FKC0DCF2B7133695CF
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.conferences' doesn't exist
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.Conferences_Participants drop foreign key FK5D9C90484DAAAE9B
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.conferences_participants' doesn't exist
Hibernate: 
    alter table test.Conferences_Participants 
        drop 
        foreign key FK5D9C90484DAAAE9B
Hibernate: 
    alter table test.Conferences_Participants 
        drop 
        foreign key FK5D9C9048751CA8AA
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.Conferences_Participants drop foreign key FK5D9C9048751CA8AA
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.conferences_participants' doesn't exist
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.Conferences_Users drop foreign key FK7EAAE2604DAAAE9B
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.conferences_users' doesn't exist
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.Conferences_Users drop foreign key FK7EAAE260751CA8AA
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.conferences_users' doesn't exist
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table test.Users drop foreign key FK4E39DE8B5D743AE
04/06/2012 22:42:34 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Table 'test.users' doesn't exist
Hibernate: 
    alter table test.Conferences_Users 
        drop 
        foreign key FK7EAAE2604DAAAE9B
Hibernate: 
    alter table test.Conferences_Users 
        drop 
        foreign key FK7EAAE260751CA8AA
Hibernate: 
    alter table test.Users 
        drop 
        foreign key FK4E39DE8B5D743AE
Hibernate: 
    drop table if exists test.CONFERENCES
Hibernate: 
    drop table if exists test.Company
Hibernate: 
    drop table if exists test.Conferences_Participants
Hibernate: 
    drop table if exists test.Conferences_Users
Hibernate: 
    drop table if exists test.LOCATION
Hibernate: 
    drop table if exists test.Users
Hibernate: 
    create table test.CONFERENCES (
        conferenceId bigint not null,
        active boolean not null,
        description varchar(255),
        endDate datetime,
        name varchar(255),
        startDate datetime,
        location_name varchar(255),
        primary key (conferenceId)
    )
Hibernate: 
    create table test.Company (
        companyID bigint not null,
        active boolean not null,
        companyType varchar(255),
        name varchar(255),
        primary key (companyID)
    )
Hibernate: 
    create table test.Conferences_Participants (
        date datetime not null,
        user_userId bigint not null,
        conference_conferenceId bigint not null,
        primary key (user_userId, date, conference_conferenceId),
        unique (user_userId),
        unique (conference_conferenceId)
    )
Hibernate: 
    create table test.Conferences_Users (
        attendanceStatus integer,
        notifiedByMail boolean not null,
        userRole integer not null,
        user_userId bigint not null,
        conference_conferenceId bigint not null,
        primary key (user_userId, conference_conferenceId),
        unique (user_userId),
        unique (conference_conferenceId)
    )
Hibernate: 
    create table test.LOCATION (
        name varchar(255) not null,
        active boolean not null,
        address varchar(255),
        contactName varchar(255),
        locationId bigint not null,
        maxCapacity integer not null,
        phone1 varchar(255),
        phone2 varchar(255),
        primary key (name)
    )
Hibernate: 
    create table test.Users (
        userId bigint not null,
        active boolean not null,
        admin boolean not null,
        email varchar(255),
        lastLogin datetime,
        name varchar(255),
        pasportID varchar(255),
        password varchar(255),
        phone1 varchar(255),
        phone2 varchar(255),
        salt varchar(255),
        userName varchar(255),
        company_companyID bigint,
        primary key (userId)
    )
Hibernate: 
    alter table test.CONFERENCES 
        add index FKC0DCF2B7133695CF (location_name), 
        add constraint FKC0DCF2B7133695CF 
        foreign key (location_name) 
        references test.LOCATION (name)
Hibernate: 
    alter table test.Conferences_Participants 
        add index FK5D9C90484DAAAE9B (conference_conferenceId), 
        add constraint FK5D9C90484DAAAE9B 
        foreign key (conference_conferenceId) 
        references test.CONFERENCES (conferenceId)
Hibernate: 
    alter table test.Conferences_Participants 
        add index FK5D9C9048751CA8AA (user_userId), 
        add constraint FK5D9C9048751CA8AA 
        foreign key (user_userId) 
        references test.Users (userId)
Hibernate: 
    alter table test.Conferences_Users 
        add index FK7EAAE2604DAAAE9B (conference_conferenceId), 
        add constraint FK7EAAE2604DAAAE9B 
        foreign key (conference_conferenceId) 
        references test.CONFERENCES (conferenceId)
Hibernate: 
    alter table test.Conferences_Users 
        add index FK7EAAE260751CA8AA (user_userId), 
        add constraint FK7EAAE260751CA8AA 
        foreign key (user_userId) 
        references test.Users (userId)
Hibernate: 
    alter table test.Users 
        add index FK4E39DE8B5D743AE (company_companyID), 
        add constraint FK4E39DE8B5D743AE 
        foreign key (company_companyID) 
        references test.Company (companyID)
Hibernate: 
    select
        conference0_.user_userId as user4_16_0_,
        conference0_.conference_conferenceId as conference5_16_0_,
        conference0_.attendanceStatus as attendan1_16_0_,
        conference0_.notifiedByMail as notified2_16_0_,
        conference0_.userRole as userRole16_0_ 
    from
        test.Conferences_Users conference0_ 
    where
        conference0_.user_userId=? 
        and conference0_.conference_conferenceId=?
04/06/2012 22:42:36 org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
Hibernate: 
    insert 
    into
        test.Conferences_Users
        (attendanceStatus, notifiedByMail, userRole, user_userId, conference_conferenceId) 
    values
        (?, ?, ?, ?, ?)
04/06/2012 22:42:36 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 1048, SQLState: 23000
04/06/2012 22:42:36 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Column 'user_userId' cannot be null
04/06/2012 22:42:37 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ConferenceServlet] in context with path [/conf4u] threw exception
org.hibernate.TransactionException: nested transactions not supported
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:152)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1396)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:352)
    at $Proxy14.beginTransaction(Unknown Source)
    at daos.ConferenceDao.isConferenceNameExists(ConferenceDao.java:129)
    at servlets.ConferenceServlet.assignUser(ConferenceServlet.java:282)
    at servlets.ConferenceServlet.processRequest(ConferenceServlet.java:76)
    at servlets.ConferenceServlet.doPost(ConferenceServlet.java:432)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

由于某种原因，它似乎再次运行 hbm2ddl 模式导出，我认为这会导致问题？

问题是它不会发生在他身上，而且我们使用相同的版本进行了检查。

我不知道可能是什么问题。

**休眠配置：**

```
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
        <property name="connection.username">root</property>
        <property name="connection.password">root</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.default_schema">test</property>
        <property name="dialect">org.hibernate.dialect.MySQL5Dialect</property>

        <property name="show_sql">true</property>

        <property name="format_sql">true</property>
        <property name="hbm2ddl.auto">create-drop</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>
        <property name="current_session_context_class">thread</property>

        <!-- Mapping files will go here.... -->

        <mapping class="model.Company" />
        <mapping class="model.User" />
        <mapping class="model.Conference" />
        <mapping class="model.ConferencesParticipants" />
        <mapping class="model.ConferencesUsers" />
        <mapping class="model.Location" />

    </session-factory>
</hibernate-configuration> 
```

**正在为分配操作运行的函数：**

```
public void assignUserToConference(ConferencesUsers cu){

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    try {
        session.beginTransaction(); 
        session.save(cu);
        session.getTransaction().commit();
    }
    catch (RuntimeException e) {
        session.getTransaction().rollback();
        throw e;
    }   
} 
```

**休眠实用程序：**

```
public class HibernateUtil {

private static SessionFactory sessionFactory = configureSessionFactory();
private static ServiceRegistry serviceRegistry;

private static SessionFactory configureSessionFactory() throws HibernateException {
    Configuration configuration = new Configuration();
    configuration.configure();
    serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
    sessionFactory = configuration.buildSessionFactory(serviceRegistry);
    return sessionFactory;
}

/**
 * get a session to the database
 * @return
 */
public static SessionFactory getSessionFactory() {
    if(sessionFactory== null){
        sessionFactory = configureSessionFactory();
    }
    return sessionFactory;
}

/**
 * close the current session to the database
 */
public static void closeSession(){
    sessionFactory.close();
}

} 
```

感谢您对此的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:14:11.877

在您的日志中，我看到有一个空值：

```
04/06/2012 22:42:36 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 1048, SQLState: 23000
04/06/2012 22:42:36 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Column 'user_userId' cannot be null 
```

顺便说一句，您和您的朋友使用哪些操作系统？我问它是因为我正在调查一个类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T07:49:09.453

原来问题不在休眠状态。由于某种原因，无论我在 Eclipse 中尝试了什么，代码都与编译后的代码不同步。我通过创建一个新的工作区解决了这个问题。

# java - java奇怪的递归优化

> ID：10887528
> 
> 赞同：4
> 
> 时间：2012-06-04T20:00:39.480
> 
> 标签：java, recursion, stack-overflow, tail-recursion

当我试图回答这个问题时，我遇到了一些奇怪的结果：[如何提高递归方法的性能？](https://stackoverflow.com/q/10884217/373151)

但你不需要阅读那篇文章。我将在这里给出相关的上下文。这可能看起来很长，但如果你通读一遍，实际上并没有那么复杂。我希望这对所有人来说都很有趣。对于上下文，

```
syra(n) = { 1 if n=1; 
            n + syra(n/2) if n is even; and 
            n + syra(3n+1) if n is odd
          } 
```

和

```
syralen(n) = No. of steps to calculate syra (n) 
```

例如， `syralen(1)=1`，`syralen(2)=2 since we need to go two steps.` `syra(10) = 10 + syra(5) = 15 + syra(16) = 31 + syra(8) = 39 + syra(4) = 43 + syra(2) = 45 + syra(1) = 46`。所以 syra(10) 需要 7 个步骤。所以`syralen(10)=7`

最后，

```
lengths(n) = syralen(1)+syralen(2)+...+syralen(n) 
```

那里的问题海报试图计算`lengths(n)`

我的问题是关于 Op 发布的递归解决方案（这是该问题中的第二个片段）。我会在这里转发：

```
public class SyraLengths{

        int total=1;
        public int syraLength(long n) {
            if (n < 1)
                throw new IllegalArgumentException();
            if (n == 1) {
                int temp=total;
                total=1;
                return temp;
            }
            else if (n % 2 == 0) {
                total++;
                return syraLength(n / 2);
            }
            else {
                total++;
                return syraLength(n * 3 + 1);
            }
        }

        public int lengths(int n){
            if(n<1){
                throw new IllegalArgumentException();
            }
            int total=0;
            for(int i=1;i<=n;i++){
                total+=syraLength(i);
            }

            return total;
        }

        public static void main(String[] args){
            System.out.println(new SyraLengths().lengths(5000000));
        }
       } 
```

当然是一种不寻常的（并且可能不推荐）递归方式，但它确实计算出正确的东西，我已经证实了这一点。我试图写一个更常见的递归版本：

```
public class SyraSlow {

    public long lengths(int n) {
        long total = 0;
        for (int i = 1; i <= n; ++i) {
            total += syraLen(i);
        }
        return total;
    }

    private long syraLen(int i) {
        if (i == 1)
            return 1;
        return 1 + ((i % 2 == 0) ? syraLen(i / 2) : syraLen(i * 3 + 1));
    } 
```

现在这是奇怪的部分 - 我尝试测试上述两个版本的性能，例如：

```
public static void main(String[] args){
            long t1=0,t2=0;
            int TEST_VAL=50000;

            t1 = System.currentTimeMillis();
            System.out.println(new SyraLengths().lengths(TEST_VAL));
            t2 = System.currentTimeMillis();
            System.out.println("SyraLengths time taken: " + (t2-t1));

            t1 = System.currentTimeMillis();
            System.out.println(new SyraSlow().lengths(TEST_VAL));
            t2 = System.currentTimeMillis();
            System.out.println("SyraSlow time taken: " + (t2-t1));
        } 
```

对于`TEST_VAL=50000`，输出为：

```
5075114
SyraLengths time taken: 44
5075114
SyraSlow time taken: 31 
```

正如预期的那样（我猜），普通递归稍微好一些。但是当我更进一步并使用`TEST_VAL=500000`时，输出是：

```
62634795
SyraLengths time taken: 378
Exception in thread "main" java.lang.StackOverflowError
    at SyraSlow.syraLen(SyraSlow.java:15)
    at SyraSlow.syraLen(SyraSlow.java:15)
    at SyraSlow.syraLen(SyraSlow.java:15) 
```

为什么？Java 在这里做了什么样的优化，SyraLengths 版本没有达到 StackOverflow（它甚至可以工作`TEST_VAL=5000000`）？**我什至尝试使用基于累加器的递归版本，以防我的 JVM 进行一些尾调用优化：**

```
private long syraLenAcc(int i, long acc) {
        if (i == 1) return acc;
    if(i%2==0) {
        return syraLenAcc(i/2,acc+1);
    }
    return syraLenAcc(i * 3 + 1, acc+1);
    } 
```

**但我仍然得到相同的结果（因此这里没有尾调用优化）。**那么，这里发生了什么？

PS：如果您能想到任何标题，请编辑为更好的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:06:05.110

使用原始版本，尾递归优化是可能的（在 JIT 内）。不过，不知道它是否真的发生过。但有可能原始版本在堆 [呃，我的意思是堆栈] 使用方面效率更高。（或者可能存在粗略检查不明显的功能差异。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:05:12.327

好吧，事实证明有一个简单的解释：

我`long syraLen(int n)`用作方法签名。但 的值`n`实际上可以远大于`Integer.MAX_VALUE`。所以`syraLen`得到负面的输入，这就是问题所在。如果我将其更改为`long syraLen(long n)`，则一切正常！我希望我也把`if(n < 1) throw new IllegalArgumentException();`原来的海报一样。本来可以节省我一些时间。

# c# - 检索两个列表的子列表的每个可能组合的算法

> ID：10887530
> 
> 赞同：6
> 
> 时间：2012-06-04T20:00:41.947
> 
> 标签：c#, algorithm

假设我有两个列表，我如何遍历每个子列表的所有可能组合，以使每个项目出现一次且仅出现一次。

我想一个例子可能是，如果您有员工和工作，并且您希望将它们分成团队，每个员工只能在一个团队中，每个工作只能在一个团队中。例如

```
List<string> employees = new List<string>() { "Adam", "Bob"}  ;
List<string> jobs      = new List<string>() { "1", "2", "3"}; 
```

我想

```
Adam       : 1
Bob        : 2 , 3

Adam       : 1 , 2
Bob        : 3

Adam       : 1 , 3
Bob        : 2

Adam       : 2 
Bob        : 1 , 3

Adam       : 2 , 3
Bob        : 1

Adam       : 3
Bob        : 1 , 2

Adam, Bob  : 1, 2, 3 
```

我尝试使用[这个](https://stackoverflow.com/questions/10515449/generate-all-combinations-for-a-list-of-strings)stackoverflow问题的答案来生成每个可能的员工组合和每个可能的工作组合的列表，然后从每个列表中选择一个项目，但这就是我所得到的。

我不知道列表的最大大小，但肯定会小于 100，并且可能还有其他限制因素（例如每个团队最多可以有 5 名员工）

**更新**

不确定这是否可以进一步整理和/或简化，但这是我到目前为止的最终结果。

它使用 Yorye 提供的 Group 算法（请参阅下面的答案），但我删除了我不需要的 orderby，如果密钥不可比较，则会导致问题。

```
var employees = new List<string>() { "Adam", "Bob"  } ;
var jobs      = new List<string>() { "1", "2", "3"  };

int c= 0;
foreach (int noOfTeams in Enumerable.Range(1, employees.Count))
{   
    var hs = new HashSet<string>();

    foreach( var grouping in Group(Enumerable.Range(1, noOfTeams).ToList(), employees))
    {   
        // Generate a unique key for each group to detect duplicates.   
        var key = string.Join(":" , 
                      grouping.Select(sub => string.Join(",", sub)));           

        if (!hs.Add(key))
            continue;

        List<List<string>> teams = (from r in grouping select r.ToList()).ToList();

        foreach (var group in Group(teams, jobs))
        {
            foreach (var sub in group)
            {               
                Console.WriteLine(String.Join(", " , sub.Key )   + " : " + string.Join(", ", sub));
            }
            Console.WriteLine();
            c++;
        }
    }

}           
Console.WriteLine(String.Format("{0:n0} combinations for {1} employees and {2} jobs" , c , employees.Count, jobs.Count)); 
```

由于我不担心结果的顺序，这似乎给了我我需要的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:16:55.827

好问题。

首先，在你写下你的代码之前，让我们了解你的问题的基本组合。

基本上，您要求对于集合 A 的任何分区，您需要集合 B 中相同数量的部分。

例如，如果您将集合 A 拆分为 3 个组，则您需要将集合 B 也拆分为 3 个组，如果您不这样做，则至少一个元素在另一组中不会有相应的组。
将集合 A 拆分为 1 组更容易描绘，我们必须有一组由集合 B 组成，如您的示例 (Adam, Bob : 1, 2, 3) 。

所以现在，我们知道集合 A 有**n 个**元素，集合 B 有**k**个元素。
所以自然我们不能要求任何集合被分割得更多`Min(n,k)`。

假设我们将两个集合分成 2 个组（分区），现在我们`1*2=2!`在两个集合之间有了唯一的对。
另一个例子是 3 个组，每个组都会给我们`1*2*3=3!`独特的配对。

但是，我们还没有完成，在将任何集合拆分为几个子集（组）之后，我们仍然可以对元素进行多种组合排序。
因此，对于`m`集合的分区，我们需要找出在分区中放置`n`元素的组合数量。这可以通过使用第二类公式的斯特林数找到：`m`

（等式 1）![第二类斯特林数](../Images/3a79f4372719d680fb0b0952e2c86a5d.png)

这个公式为您提供了将一组`n`元素划分`k`为非空集的方法的数量。

因此，从 1 到所有分区的对组合的总数`min(n,k)`为：（

等式 2）![所有组合](../Images/d6187e0038cefff59de01dba085318d6.png)

简而言之，它是两个集合的所有分区组合的总和，乘以所有对的组合。

所以现在我们了解了如何对数据进行分区和配对，我们可以写下代码：

**代码：**

所以基本上，如果我们看一下我们的最终等式（2），我们就会明白我们需要四部分代码来解决我们的问题。
1\. 求和（或循环）
2\. 从两个集合中获取我们的斯特林集或分区
的方法 3\. 获取两个斯特林集的笛卡尔积的方法。
4\. 一种对集合中的项目进行置换的方法。（嗯！）

在 StackOverflow 上，您可以找到许多方法来排列项目以及如何查找笛卡尔积，这是一个示例（作为扩展方法）：

```
 public static IEnumerable<IEnumerable<T>> Permute<T>(this IEnumerable<T> list)
    {
        if (list.Count() == 1)
            return new List<IEnumerable<T>> { list };

        return list.Select((a, i1) => Permute(list.Where((b, i2) => i2 != i1)).Select(b => (new List<T> { a }).Union(b)))
                   .SelectMany(c => c);
    } 
```

这是代码中最简单的部分。
更困难的部分（恕我直言）是找到`n`一组所有可能的分区。
所以为了解决这个问题，我首先解决了如何找到集合中所有可能的分区（不仅仅是大小为 n）的更大问题。

我想出了这个递归函数：

```
public static List<List<List<T>>> AllPartitions<T>(this IEnumerable<T> set)
    {
        var retList = new List<List<List<T>>>();

        if (set == null || !set.Any())
        {
            retList.Add(new List<List<T>>());
            return retList;
        }
        else
        {
            for (int i = 0; i < Math.Pow(2, set.Count()) / 2; i++)
            {
                var j = i;

                var parts = new [] { new List<T>(), new List<T>() };

                foreach (var item in set)
                {
                    parts[j & 1].Add(item);
                    j >>= 1;
                }

                foreach (var b in AllPartitions(parts[1]))
                {
                    var x = new List<List<T>>();

                    x.Add(parts[0]);

                    if (b.Any())
                        x.AddRange(b);

                    retList.Add(x);
                }
            }
        }
        return retList;
    } 
```

: 的返回值`List<List<List<T>>>`仅表示所有可能分区的列表，其中分区是集合列表，集合是元素列表。
我们在这里不必使用 List 类型，但它简化了索引。

所以现在让我们把所有东西放在一起：

**主要代码**

```
//Initialize our sets
        var employees = new [] { "Adam", "Bob" };
        var jobs = new[] {  "1", "2", "3" };

        //iterate to max number of partitions (Sum)
        for (int i = 1; i <= Math.Min(employees.Length, jobs.Length); i++)
        {
            Debug.WriteLine("Partition to " + i + " parts:");

            //Get all possible partitions of set "employees" (Stirling Set)
            var aparts = employees.AllPartitions().Where(y => y.Count == i);
            //Get all possible partitions of set "jobs" (Stirling Set)
            var bparts = jobs.AllPartitions().Where(y => y.Count == i);

            //Get cartesian product of all partitions 
            var partsProduct = from employeesPartition in aparts
                      from jobsPartition in bparts
                               select new {  employeesPartition,  jobsPartition };

            var idx = 0;
            //for every product of partitions
            foreach (var productItem in partsProduct)
            {
                //loop through the permutations of jobPartition (N!)
                foreach (var permutationOfJobs in productItem.jobsPartition.Permute())
                {
                    Debug.WriteLine("Combination: "+ ++idx);

                    for (int j = 0; j < i; j++)
                    {
                        Debug.WriteLine(productItem.employeesPartition[j].ToArrayString() + " : " + permutationOfJobs.ToArray()[j].ToArrayString());
                    }
                }
            }
        } 
```

**输出：**

```
Partition to 1 parts:
Combination: 1
{ Adam , Bob } : { 1 , 2 , 3 }
Partition to 2 parts:
Combination: 1
{ Bob } : { 2 , 3 }
{ Adam } : { 1 }
Combination: 2
{ Bob } : { 1 }
{ Adam } : { 2 , 3 }
Combination: 3
{ Bob } : { 1 , 3 }
{ Adam } : { 2 }
Combination: 4
{ Bob } : { 2 }
{ Adam } : { 1 , 3 }
Combination: 5
{ Bob } : { 3 }
{ Adam } : { 1 , 2 }
Combination: 6
{ Bob } : { 1 , 2 }
{ Adam } : { 3 } 
```

我们可以通过计算结果轻松检查我们的输出。
在这个例子中，我们有一组 2 个元素和一组 3 个元素，等式 2 表明我们需要 S(2,1)S(3,1)1!+S(2,2)S(3,2 )2！= 1+6 = 7
这正是我们得到的组合数。

这里是第二类斯特林数的例子供参考：
S(1,1) = 1

S(2,1) = 1
S(2,2) = 1

S(3,1) = 1
S(3,2) = 3
S(3,3) = 1

S(4,1) = 1
S(4,2) = 7
S(4,3) = 6
S(4,4) = 1

**编辑 19.6.2012**

```
public static String ToArrayString<T>(this IEnumerable<T> arr)
    {
        string str = "{ ";

        foreach (var item in arr)
        {
            str += item + " , ";
        }

        str = str.Trim().TrimEnd(',');
        str += "}";

        return str;
    } 
```

**编辑 24.6.2012**

该算法的主要部分是寻找斯特林集，我使用了一种低效的 Permutation 方法，这里有一个基于 QuickPerm 算法的更快的方法：

```
public static IEnumerable<IEnumerable<T>> QuickPerm<T>(this IEnumerable<T> set)
    {
        int N = set.Count();
        int[] a = new int[N];
        int[] p = new int[N];

        var yieldRet = new T[N];

        var list = set.ToList();

        int i, j, tmp ;// Upper Index i; Lower Index j
        T tmp2;

        for (i = 0; i < N; i++)
        {
            // initialize arrays; a[N] can be any type
            a[i] = i + 1; // a[i] value is not revealed and can be arbitrary
            p[i] = 0; // p[i] == i controls iteration and index boundaries for i
        }
        yield return list;
        //display(a, 0, 0);   // remove comment to display array a[]
        i = 1; // setup first swap points to be 1 and 0 respectively (i & j)
        while (i < N)
        {
            if (p[i] < i)
            {
                j = i%2*p[i]; // IF i is odd then j = p[i] otherwise j = 0

                tmp2 = list[a[j]-1];
                list[a[j]-1] = list[a[i]-1];
                list[a[i]-1] = tmp2;

                tmp = a[j]; // swap(a[j], a[i])
                a[j] = a[i];
                a[i] = tmp;

                //MAIN!

               // for (int x = 0; x < N; x++)
                //{
                //    yieldRet[x] = list[a[x]-1];
                //}
                yield return list;
                //display(a, j, i); // remove comment to display target array a[]

                // MAIN!

                p[i]++; // increase index "weight" for i by one
                i = 1; // reset index i to 1 (assumed)
            }
            else
            {
                // otherwise p[i] == i
                p[i] = 0; // reset p[i] to zero
                i++; // set new index value for i (increase by one)
            } // if (p[i] < i)
        } // while(i < N)
    } 
```

这将把时间减半。
但是，大部分 CPU 周期都用于字符串构建，这是本示例特别需要的。
这将使它更快一点：

```
 results.Add(productItem.employeesPartition[j].Aggregate((a, b) => a + "," + b) + " : " + permutationOfJobs.ToArray()[j].Aggregate((a, b) => a + "," + b)); 
```

在 x64 中编译会更好，因为这些字符串会占用大量内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T20:09:53.143

你可以使用另一个库吗？[这](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)是一个用于组合的通用库（您显然想要一个没有重复的库）。然后你只需要对你的员工列表做一个 foreach 并运行两者的组合。

从大 O 的角度来看，我不认为您对自己有任何好处，效率是这里的优先事项吗？

这是从臀部开始的，但这应该是获得你想要的东西的代码（使用那个库）：

```
Combinations<string> combinations = new Combinations<string>(jobs, 2);

foreach(IList<string> c in combinations) {
  Console.WriteLine(String.Format("{{{0} {1}}}", c[0], c[1]));
} 
```

然后需要将其应用于每个员工

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:18:03.527

*在我的回答中，我将忽略您的最后一个结果：* `Adam, Bob: 1, 2, 3`*，因为它在逻辑上是一个例外。跳到最后看看我的输出。*

**解释：**

这个想法将是迭代“元素将属于哪个组”的组合。

假设您有元素“a，b，c”，并且您有组“1, 2”，让我们有一个大小为 3 的数组作为元素的数量，它将包含组“1, 2”的所有可能组合, 重复：

```
{1, 1, 1} {1, 1, 2} {1, 2, 1} {1, 2, 2}
{2, 1, 1} {2, 1, 2} {2, 2, 1} {2, 2, 2} 
```

现在我们将取出每个组，并使用以下逻辑从中制作一个键值集合：

Group of`elements[i]`将是 的值`comb[i]`。

```
Example with {1, 2, 1}:
a: group 1
b: group 2
c: group 1

And in a different view, the way you wanted it:
group 1: a, c
group 2: b 
```

毕竟，您只需过滤所有不包含所有组的组合，因为您希望所有组至少具有一个值。

因此，您应该检查所有组是否以某种组合出现并过滤不匹配的组，因此您将得到：

```
{1, 1, 2} {1, 2, 1} {1, 2, 2}
{2, 1, 2} {2, 2, 1} {2, 1, 1} 
```

这将导致：

```
1: a, b
2: c

1: a, c
2: b

1: a
2: b, c

1: b
2: a, c

1: c
2: a, b

1: b, c
2: a 
```

这种破组的组合逻辑也适用于更多的元素和组。这是我的实现，它可能可以做得更好，因为即使我在编码时也有点迷失（这真的不是一个直观的问题，呵呵），但它工作得很好。

**执行：**

```
public static IEnumerable<ILookup<TValue, TKey>> Group<TKey, TValue>
    (List<TValue> keys,
     List<TKey> values,
     bool allowEmptyGroups = false)
{
    var indices = new int[values.Count];
    var maxIndex = values.Count - 1;
    var nextIndex = maxIndex;
    indices[maxIndex] = -1;

    while (nextIndex >= 0)
    {
        indices[nextIndex]++;

        if (indices[nextIndex] == keys.Count)
        {
            indices[nextIndex] = 0;
            nextIndex--;
            continue;
        }

        nextIndex = maxIndex;

        if (!allowEmptyGroups && indices.Distinct().Count() != keys.Count)
        {
            continue;
        }

        yield return indices.Select((keyIndex, valueIndex) =>
                                    new
                                        {
                                            Key = keys[keyIndex],
                                            Value = values[valueIndex]
                                        })
            .OrderBy(x => x.Key)
            .ToLookup(x => x.Key, x => x.Value);
    }
} 
```

**用法：**

```
var employees = new List<string>() { "Adam", "Bob"};
var jobs      = new List<string>() { "1", "2", "3"};
var c = 0;

foreach (var group in CombinationsEx.Group(employees, jobs))
{
    foreach (var sub in group)
    {
        Console.WriteLine(sub.Key + ": " + string.Join(", ", sub));
    }

    c++;
    Console.WriteLine();
}

Console.WriteLine(c + " combinations."); 
```

**输出：**

```
Adam: 1, 2
Bob: 3

Adam: 1, 3
Bob: 2

Adam: 1
Bob: 2, 3

Adam: 2, 3
Bob: 1

Adam: 2
Bob: 1, 3

Adam: 3
Bob: 1, 2

6 combinations. 
```

**更新**

组合键组合原型：

```
public static IEnumerable<ILookup<TKey[], TValue>> GroupCombined<TKey, TValue>
    (List<TKey> keys,
     List<TValue> values)
{
    // foreach (int i in Enumerable.Range(1, keys.Count))
    for (var i = 1; i <= keys.Count; i++)
    {
        foreach (var lookup in Group(Enumerable.Range(0, i).ToList(), keys))
        {
            foreach (var lookup1 in
                     Group(lookup.Select(keysComb => keysComb.ToArray()).ToList(),
                           values))
            {
                yield return lookup1;
            }
        }
    }

    /*
    Same functionality:

    return from i in Enumerable.Range(1, keys.Count)
           from lookup in Group(Enumerable.Range(0, i).ToList(), keys)
           from lookup1 in Group(lookup.Select(keysComb =>
                                     keysComb.ToArray()).ToList(),
                                 values)
           select lookup1;
    */
} 
```

仍然存在重复的小问题，但它会产生所有结果。

这是我**用来删除重复项**的方法，作为**临时解决方案**：

```
var c = 0;
var d = 0;

var employees = new List<string> { "Adam", "Bob", "James" };
var jobs = new List<string> {"1", "2"};

var prevStrs = new List<string>();

foreach (var group in CombinationsEx.GroupCombined(employees, jobs))
{
    var currStr = string.Join(Environment.NewLine,
                              group.Select(sub =>
                                           string.Format("{0}: {1}",
                                               string.Join(", ", sub.Key),
                                               string.Join(", ", sub))));

    if (prevStrs.Contains(currStr))
    {
        d++;
        continue;
    }

    prevStrs.Add(currStr);

    Console.WriteLine(currStr);
    Console.WriteLine();
    c++;
}

Console.WriteLine(c + " combinations.");
Console.WriteLine(d + " duplicates."); 
```

**输出：**

```
Adam, Bob, James: 1, 2

Adam, Bob: 1
James: 2

James: 1
Adam, Bob: 2

Adam, James: 1
Bob: 2

Bob: 1
Adam, James: 2

Adam: 1
Bob, James: 2

Bob, James: 1
Adam: 2

7 combinations.
6 duplicates. 
```

**请注意**，它还将生成非组合组（如果可能 - 因为不允许空组）。要仅生成组合键，您需要替换它：

```
for (var i = 1; i <= keys.Count; i++) 
```

有了这个：

```
for (var i = 1; i < keys.Count; i++) 
```

在 GroupCombined 方法的开头。用三名员工和三份工作测试该方法，看看它是如何工作的。

**另一个编辑：**

更好的重复处理将在 GroupCombined 级别处理重复的组合键：

```
public static IEnumerable<ILookup<TKey[], TValue>> GroupCombined<TKey, TValue>
    (List<TKey> keys,
     List<TValue> values)
{
    for (var i = 1; i <= keys.Count; i++)
    {
        var prevs = new List<TKey[][]>();

        foreach (var lookup in Group(Enumerable.Range(0, i).ToList(), keys))
        {
            var found = false;
            var curr = lookup.Select(sub => sub.OrderBy(k => k).ToArray())
                .OrderBy(arr => arr.FirstOrDefault()).ToArray();

            foreach (var prev in prevs.Where(prev => prev.Length == curr.Length))
            {
                var isDuplicate = true;

                for (var x = 0; x < prev.Length; x++)
                {
                    var currSub = curr[x];
                    var prevSub = prev[x];

                    if (currSub.Length != prevSub.Length ||
                        !currSub.SequenceEqual(prevSub))
                    {
                        isDuplicate = false;
                        break;
                    }
                }

                if (isDuplicate)
                {
                    found = true;
                    break;
                }
            }

            if (found)
            {
                continue;
            }

            prevs.Add(curr);

            foreach (var group in
                     Group(lookup.Select(keysComb => keysComb.ToArray()).ToList(),
                           values))
            {
                yield return group;
            }
        }
    }
} 
```

看起来，给方法添加约束是很聪明的，这样也可能`TKey`是.`ICompareable<TKey>``IEquatable<TKey>`

这最终导致 0 个重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T22:28:56.560

假设我们有两个集合，A 和 B。
`A = {a1, a2, a3} ; B = {b1, b2, b3}`

首先，让我们得到一个由包含子集的元组及其补集组成的集合：

```
{a1} {a2 a3} 
{a2} {a1 a3}
{a3} {a1 a2}
{a2, a3} {a1}
... 
```

为此，您可以使用上面的 Rikon 库，或编写自己的代码。你需要这样做：

1.  获取所有子集的集合（称为幂集）
2.  对于每个子集，从更大的集合中获取该子集的补集或剩余元素。
3.  将它们加入一个元组或对；例如（子集，补码）

这里的订单很重要；`{a1} {a2 a3} and {a2 a3} {a1}`毕竟是不同的元组。

然后我们为 B 得到一个相似的集合。然后，我们在两个集合之间执行交叉连接，得到：

```
{a1} {a2 a3} | {b1} {b2 b3}

{a2} {a1 a3} | {b2} {b1 b3}
... 
```

这与您上面的描述非常吻合。只需将 {Bob, Adam} 视为一组，将 {1, 2, 3} 视为另一组。根据您的要求，您必须转储一些空集（因为电源集也包括空子集）。不过，据我所知，这是一般要点。抱歉缺少代码；我要睡觉了:P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T10:14:04.590

忽略您的其他约束（例如团队的最大规模），您正在做的是创建集合*P*的分区和具有相同子集数量的集合*Q*的分区，然后找到其中一个集合的所有组合以映射第一个分区到第二个。

Michael Orlov 的论文似乎是一种用于生成分区的简单算法，在该算法中，每次迭代都使用恒定[空间](http://www.cs.bgu.ac.il/~orlovm/papers/partitions.pdf)。他还提供了一种用于列出给定大小的分区的算法。

从*P = { A, B }* 和*Q = { 1, 2, 3 }*开始，那么大小为 1 的分区是*[ P ]*和*[ Q ]*，所以唯一的配对是*( [ P ], [ Q ] )*

对于大小为 2 的分区，*P*只有两个元素，因此只有一个大小为 2 的分区*[ { A }, { B } ]*，*Q*有三个大小为 2 的分区*[ { 1 }, { 2, 3 } ], [ { 1 , 2 }, { 3 } ], [ { 1, 3 }, { 2 } ]*。

由于*Q*的每个分区包含两个子集，因此每个分区有 2 种组合，这为您提供了六个配对：

```
( [ { A }, { B } ], [ { 1 }, { 2, 3 } ] )
( [ { A }, { B } ], [ { 2, 3 }, { 1 } ] )
( [ { A }, { B } ], [ { 1, 2 }, { 3 } ] )
( [ { A }, { B } ], [ { 3 }, { 1, 2 } ] )
( [ { A }, { B } ], [ { 1, 3 }, { 2 } ] ) 
( [ { A }, { B } ], [ { 2 }, { 1, 3 } ] ) 
```

由于其中一个原始集合的大小为 2，因此没有大小为 3 的分区，因此我们停止。

# html - 如何使用 width 属性均匀地分隔导航栏的元素？

> ID：10887531
> 
> 赞同：2
> 
> 时间：2012-06-04T20:00:55.987
> 
> 标签：html, css

这是一个模拟：http: [//jsfiddle.net/LQ9DP/](http://jsfiddle.net/LQ9DP/)

这里分别是 HTML 和相关的 CSS 部分： HTML：

```
<div id="footer">        
        <div class="nav_wrapper">
            <ul id="list_orientation">
                <li><a href="http://www.facebook.com">Facebook</a></li>
                <li id = "portfolio_text"><a href="http://www.google.com">Portfolio</a></li>
                <li><a href="http://www.google.com">Email</a></li>
            </ul>
        </div>
    </div> 
```

CSS：

```
 #heading{
    font-family:'ChunkFiveRomanRegular';
    position: absolute;
    font-size:80px;
    top: 10%;
    left: 0px;
    width: 100%;
    height: 1px;
    text-align:center;
}

.border{
    border-top: 5px dashed #000000;
    border-bottom:5px dashed #000000;
    padding:20px;
}

body{
background:#ffdd22;
}

#subheading{
    font-family:'MuseoSlab500Regular';
    text-align:center;
    font-size:25px;
}

.nav_wrapper{
    position:relative;
    margin:auto;
    /*width:30%;*/
    /*Change this
    width:30%;*/
}

.nav_wrapper ul li {display:inline; width:30%;}
.nav_wrapper ul li a {width:30%;}

#footer{
    width:100%;
    float:left;
    position:fixed;
    bottom:0;
    z-index:100;
}

#list_orientation {
    padding:0;
    margin:0;
    height:5%;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:07:04.220

你的意思是这样吗？[http://jsfiddle.net/LQ9DP/13/](http://jsfiddle.net/LQ9DP/13/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:27:12.503

你介意尝试给元素填充而不是给定宽度吗？在垂直居中文本的情况下，您可以使用与文本相同的文本包含框的高度`line-height`。

# android - MyLocationOverlay - 自定义图像，但没有阴影

> ID：10887532
> 
> 赞同：0
> 
> 时间：2012-06-04T20:00:58.957
> 
> 标签：android, google-maps, mono, xamarin.android

我有一个应用程序，它使用*MyLocationOverlay*的自定义实现。

在实现中，我通过 Draw 的重载设置了一个在指定时使用的 Bitmap 属性。

它使用我的自定义图像效果很好，**但它不显示阴影- 正如在***ItemizedOverlay*中自动完成的那样。

任何人都可以帮忙吗？

这是我的班级（相关代码）：

```
public class LocationOverlay: MyLocationOverlay
{
    /// <summary>Bitmap to use for indicating the current fixed location.</summary>
    public Bitmap LocationMarker { get; set; }

    /// <summary>Uses the custom marker bitmap if one has been specified. Otherwise, the default is used.</summary>
    /// <param name="canvas"></param>
    /// <param name="mapView"></param>
    /// <param name="shadow"></param>
    /// <param name="when"></param>
    /// <returns></returns>
    public override bool Draw(Canvas canvas, MapView mapView, bool shadow, long when)
    {
        var drawShadow = shadow;

        if (LocationMarker != null && LastFix != null)
        {
            var screenPoint = new Point();
            var geoPoint = new GeoPoint((int)(LastFix.Latitude * 1E6), (int)(LastFix.Longitude * 1E6));
            mapView.Projection.ToPixels(geoPoint, screenPoint);
            canvas.DrawBitmap(LocationMarker, screenPoint.X, screenPoint.Y - 32, null);
            drawShadow = true;
        }

        base.Draw(canvas, mapView, drawShadow);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:05:53.987

我认为你错过了影子论点的重点。地图两次调用您的 draw() 方法，它会告诉您这是否是阴影通道。它不会为你画阴影。所以你的代码看起来像这样：

```
public override bool Draw(Canvas canvas, MapView mapView, bool shadow, long when)
{
    if (LocationMarker != null && LastFix != null)
    {
        var screenPoint = new Point();
        var geoPoint = new GeoPoint((int)(LastFix.Latitude * 1E6), (int)(LastFix.Longitude * 1E6));
        mapView.Projection.ToPixels(geoPoint, screenPoint);

        if(shadow)
        {
            // Draw your shadow bitmap here
        }
        else
        {
            canvas.DrawBitmap(LocationMarker, screenPoint.X, screenPoint.Y - 32, null);
        }
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:19:32.663

知道了。您可以使用*DrawAt*自动绘制阴影。

所以我的财产就这样变成了*可绘制*的：

```
public Drawable MarkerResource
{
    set
    {
        _locationMarker = value;
        var widthOffset = _locationMarker.IntrinsicWidth / 2;
        _locationMarker.SetBounds(-widthOffset, -_locationMarker.IntrinsicHeight, widthOffset, 0);
    }
} 
```

覆盖现在看起来像这样：

```
public override bool Draw(Canvas canvas, MapView mapView, bool shadow, long when)
{
    if (LastFix == null) return false;

    if (_locationMarker != null)
    {
        var screenPoint = new Point();
        var geoPoint = new GeoPoint((int)(LastFix.Latitude * 1E6), (int)(LastFix.Longitude * 1E6));
        mapView.Projection.ToPixels(geoPoint, screenPoint);
        DrawAt(canvas, _locationMarker, screenPoint.X, screenPoint.Y, shadow);
    }
    else if (MyLocation != null) DrawMyLocation(canvas, mapView, LastFix, MyLocation, when);

    if (IsCompassEnabled) DrawCompass(canvas, Orientation);
    return false;
} 
```

完美运行。

*现在，这也尊重启用指南针，如果未指定Drawable*，将使用默认技术进行绘制。

# java - 在 Lucene 中将数字与字母分开

> ID：10887533
> 
> 赞同：4
> 
> 时间：2012-06-04T20:00:59.933
> 
> 标签：java, lucene

在我使用 Lucene 索引的许多文档中，人们不小心将单词与数字连接起来。例如，可以说：“我出生于 2000 年”，而不是“我出生于 2000 年”。

是否有任何 Lucene 分词器可以将带数字的单词（例如 in2000and）分成几个单词（例如 in 2000 and）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:29:09.183

您可以使用[WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)并将 splitOnNumerics=1 参数添加到您的架构中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:09:54.427

我没有使用 Solr。所以我从 Solr. 下载了 WordDelimiterFilter 和 WordDelimiterIterator，并将这段代码添加到我的自定义分析器中：

```
 final Tokenizer source = new StandardTokenizer(matchVersion, reader);
    TokenStream result = new StandardFilter(matchVersion, source);
    int flags = WordDelimiterFilter.SPLIT_ON_NUMERICS
                | WordDelimiterFilter.GENERATE_NUMBER_PARTS
                | WordDelimiterFilter.GENERATE_WORD_PARTS;
    result = new WordDelimiterFilter(result, flags, null); 
```

# javascript - 如何从包含元素的 javascript 变量中获取单元格数据

> ID：10887534
> 
> 赞同：1
> 
> 时间：2012-06-04T20:01:11.377
> 
> 标签：javascript, jquery, datatables

我正在使用数据表和表格工具插件。我可以将选定的行作为 javascript 变量返回。使用该变量，我想获取每一行中特定单元格的值。我完全不确定如何做到这一点。这基本上就是我所拥有的

```
var rowData = TableTools.fnGetInstance( 'tableID' ).fnGetSelected(); 
```

而我想要做的是类似于 rowData.children('td') 的东西，它不起作用，但有一些效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:06:03.433

```
var cellValue = $("#tableID").dataTable().fnGetData(rowData, colIndex); 
```

其中 colIndex 是您想要获取其值的任何列（这包括隐藏单元格）。

如果你不关心隐藏的单元格，你也可以这样做：

```
var cellValue = $(rowData).children("td")... 
```

# file - bat 文件一次读取一行并执行命令然后移动到下一行

> ID：10887540
> 
> 赞同：2
> 
> 时间：2012-06-04T20:01:39.543
> 
> 标签：file, loops, vbscript, batch-file

我正在编写一个 bat 文件，我需要它一次从 txt 文件读取一行并每次执行一个命令，然后移至下一行并再次执行相同的命令。所以基本上我会有一个包含 30 个 IP 地址的文本文件，然后我希望 bat 读取第一个，执行命令，将输出写入单独的 txt 文件，然后移动到第 2 行，执行命令然后将输出写入 txt 文件，然后是第 3 行，依此类推，有人可以帮我吗？我不介意您是否希望我使用 vbscript，但是请解释清楚，因为我不太了解 vbscript :(

请我绝望我正在将它与另一个工具集成以运行我正在做的审计，我需要帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:55:55.257

对于这样一个简单的任务，您不需要 vbscript，如果 ip.txt 是带有您的 ip-adresses 的文件，那么在您的 .bat 或 .cmd 中放置

```
echo off
::to write the result to separate files
for /f %%a in (ip.txt) do ping -n 1 %%a>%%a.txt

::to write the result to one file
for /f %%a in (ip.txt) do ping -n 1 %%a>>output.txt 
```

如果您在控制台发出命令，请将 %% 替换为 %

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T07:36:17.940

这是一个使用`FOR`来尝试`slmgr /ipk`密钥文件的示例：

```
@echo off
echo Proccessing keys...
echo ============================================================================
for /f %%a in (%1) do slmgr /ipk %%a
echo ============================================================================
echo Done proccessing keys.
pause 
```

如果您需要一次尝试很多键，则可以使用它。

# java - 如何在 Bonita BPM 表单中显示小程序？

> ID：10887547
> 
> 赞同：0
> 
> 时间：2012-06-04T20:02:17.123
> 
> 标签：java, applet, business-process-management

* * *

当我尝试通过带有数据的 HTML Widget 在 Bonita Form 上显示一个小程序时：

```
<applet archive="jarfile-with-applet-code.jar" code="com.company.applets.MyFooApplet.class" width="400" height="500"> </applet> 
```

我收到了这个错误：

```
Exception: java.lang.ClassNotFoundException: com.company.applets.MyFooApplet.class
load: class com.company.applets.MyFooApplet.class not found.
java.lang.ClassNotFoundException: com.company.applets.MyFooApplet.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:690)
    at sun.plugin2.applet.Plugin2Manager.cre 
```

我已经 JAR 文件（选择池 > 应用程序 > 依赖项 > 添加 JAR），但仍然无法正常工作。

我认为当我在工具栏上按 [运行] 时，WAR 生成丢失的依赖项.. 或生成到页面的模板找不到小程序类..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T00:24:45.907

我在 Bonita 中使用了一个小程序来嵌入 ms office 文档。我已经通过在小程序类中使用默认包使其工作。然后通过选择池 -> 应用程序 -> 资源 -> 添加文件在进程中添加您的小程序 jar 和依赖项，当然如果您首先签署小程序 jar 会更好。请注意，（选择池 > 应用程序 > 依赖项 > 添加 JAR）方法不起作用，因为这些是运行时核心流程库，小程序是独立于 BOS 核心的独立应用程序。我希望这有帮助

# php - 带有电子邮件和贝宝的贝宝表格

> ID：10887550
> 
> 赞同：0
> 
> 时间：2012-06-04T20:02:28.683
> 
> 标签：php, forms, paypal

我正在尝试制作具有名称、电子邮件、file_upload 和一些单选按钮选项等字段的表单。我需要的 ：

1）当用户提交表单时，他的所有详细信息都会发送到我的电子邮件地址，他将被重定向到贝宝付款。

我的表单代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" onsubmit="this.target='_blank'; return ReadForm(this, true);" name="myForm" class="payment-form ">

       <div class="left-section">

     <input name="cmd" value="_xclick" type="hidden">
<input name="add" value="1" type="hidden">
<input name="business" value="test@gmail.com " type="hidden">
<input name="shipping" value="0.00" type="hidden">
<input name="no_shipping" value="1" type="hidden">
<input name="return" value="" type="hidden">
<input value="Select Inner Pages, +85.00, +00.00 no-font-image-replacement, +00.00 no-favicon, +99.00 wordpress integration, +00.00 no-all-in-one-seo" name="item_name" type="hidden">
<input value="184.00" name="amount" type="hidden">
<input name="currency_code" value="USD" type="hidden">
<input name="lc" value="US" type="hidden">
<input name="bn" value="PP-ShopCartBF" type="hidden">

<div class="d-section"> 

    <label class="delivery">
 <input class="DEPENDS ON basedes "   onclick="ReadForm (this.form, false);" name="pepperoni" onchange="choixPersonne('cacher1')" value="+120.00" type="radio">
      <p>24 Hour fastest  delivery</p>    
      <span>$120 Home page    $30 inner pages</span></label>

    <label class="delivery">
        <input class="DEPENDS ON basedes "   onclick="ReadForm (this.form, false);" name="pepperoni" value="+85.00" type="radio" onchange="choixPersonne('cacher2')" ><p>2,3 Business day delivery</p>  <span> $85 Home page     $30 inner pages</span></label>
    <label class="delivery">
        <input class="DEPENDS ON basedes "  onclick="ReadForm (this.form, false);" name="pepperoni" value="+70.00" type="radio"><p>5,6 Day Calm Delivery</p> <span> $70 Home page     $25 inner pages</span> </label><br>

             </div>
              <h4>How many pages you need</h4>

        <p>
    <select size="1" onclick="ReadForm (this.form, false);" name="basedes" class="pages-count">
        <option selected="selected">Select Inner Pages</option>
        <option value="2 pages">2 pages ----- $60.00</option>
        <option value="2 pages">3 pages ----- $90.00</option>
        <option value="4 pages">4 pages ----- $120.00</option>
        <option value="2 pages">5 pages ----- $150.00</option>
        <option value="6 pages">6 pages ----- $180.00</option>
        <option value="2 pages">7 pages ----- $210.00</option>
        <option value="2 pages">8 pages ----- $240.00</option>
        <option value="2 pages">9 pages ----- $270.00</option>
        <option value="2 pages">10 pages ----- $300.00</option>
        <option value="2 pages">11 pages ----- $320.00</option>
        <option value="2 pages">12 pages ----- $340.00</option>
        <option value="2 pages">13 pages ----- $360.00</option>
        <option value="2 pages">14 pages ----- $380.00</option>
        <option value="2 pages">15 pages ----- $400.00</option>
        <option value="2 pages">16 pages ----- $420.00</option>
        <option value="2 pages">17 pages ----- $440.00</option>
    </select></p>

              <p class="normal-12">Please select amount of inner pages<br>
              <strong>$10 Off</strong> for order of more than 10 pages</p>

              <h4 class="red-order">Your Order Details <p>(Excluding weekends)</p></h4>

              <div class="order-detail-box">

              <div style="height:100px"></div>
              <h5 class="bold-30">TOTAL COST <input class="ack" size="7" name="tot" value="$00.00" type="text"></h5>
                   <div id="rien" style="display:none">baber </div> 
```

Nosaccords mets et vins fonctionnent uniquement avec les appellations（例如：苏玳、希农等）

```
 </div> 
```

```
 <div class="right-section"> 
```

```
 <div class="final-form">

           <label>Name</label>
            <input name="name" class="txt-feild" type="text"> 

                           <label>Email</label>
            <input name="email" class="txt-feild" type="text">   

            <label>Upload</label>

          <div id="divinputfile">
<input name="filepc" size="20" id="filepc" onchange="document.getElementById('pc').value = this.value;" type="file">
<div id="inputfile"><input name="pc" id="pc" type="text"></div> 
```

```
 <label>Project Title</label>
            <input name="project title" class="txt-feild" value="" type="text">

                          <label>Project Note</label>
           <textarea name="area" class="" style="height:109px; width:331px; border:#adaaaa 1px solid;" ></textarea>                    

           </div> 
```

```
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:08:20.700

你只是在使用 HTML 和 JavaScript，还是你想用什么语言来做这件事？我已经用 PHP 设置了这样的东西。我所做的只是当最终用户提交表单，将其转移到 PHP 脚本并读取数据时。PHP 脚本发送了电子邮件，然后重定向到 PayPal，它在其中发布了需要 PayPal 变量/信息。然后买家完成了付款，然后我在 PayPal 网站上完成付款后将买家重定向回我的网站。

# javascript - 如何通过计算用户在 textarea 中输入的文本长度来输入特定标签？

> ID：10887555
> 
> 赞同：1
> 
> 时间：2012-06-04T20:02:51.350
> 
> 标签：javascript, string, tags, dhtml

我正在使用个人定制的所见即所得 dhtml 编辑器。编辑器只能在桌面上使用。但我希望它同时显示在桌面和移动设备上。（它需要特定类别的标签和标签。）这让我开始思考……台式机（主要是笔记本电脑）和移动设备不一样。它们有不同的像素~如果我只使用文本数据，这不会有问题。但我使用的是特定的 & 标签（它们的宽度和高度必须在 CSS 中用像素定义）基本上我需要找到一种方法从一个传入的输入中放置两种不同类型的标签（一个用于桌面，一个用于移动）用户对 dhtml 编辑器 textarea 的输入）通过计算文本输入。

```
ex>
.my_div
{
width: 450px;
height: 550px; 

}
.my_div .my_span
{
width: 350px;
height: 530px;

Ex1> <div class="my_div"><span class"my_span">It's like when the text user input here is more than
height of 530px....close this one and... </span></div>
<div class="my_div"><span class"my_span">...and in put new div and span tags automatically, reapeatedly until i press "End" button then close it with </span></div> 
```

当 Ex1> 被选中时...我想将两个不同的文本数据发送到 mysql DB。一种用于桌面 一种用于移动。所以基本上我需要Ex1>一个高度为530px（用于桌面）和一个高度为350px（用于移动）

我很想用整个代码来回答，但是，只是关键字！或方法或基本上与那个怪物有关的任何事情.... :(因为这个，我已经夜以继日了 3 天！我的头快要爆炸了......我得到的每一个搜索结果......只是显示如何“删除”标签或如何
自动输入标签请帮助我~谢谢你的时间~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:23:48.670

您可以尝试 JavaScript + jQuery 来嗅探设备是否是移动设备并加载相关的 css。尝试检测移动浏览器 JavaScript 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:49:26.863

*   高度等于字体大小 * 行数
*   行数等于文本长度/文本区域的宽度
*   对于等宽字体，文本长度等于字符 + 空格，而不是其他字体
*   [修剪](http://wonko.com/post/how_not_to_write_a_javascript_trim_function)后由[textContent/innerText](https://stackoverflow.com/questions/1359469/innertext-works-in-ie-but-not-in-firefox)属性返回字符 + 空格

# ruby-on-rails - rails 渲染缺失的变量

> ID：10887557
> 
> 赞同：2
> 
> 时间：2012-06-04T20:02:52.973
> 
> 标签：ruby-on-rails, render, nomethoderror

对于我的 rails 应用程序，我的错误消息显示不正确。我认为原因是因为验证失败，我的控制器做了重定向而不是渲染。但是，我无法渲染。我所有的变量似乎都不见了。例如在我的 pub_messages#create 我有...

```
def create
    @pub_message = current_user.pub_messages.build
    @pub_message.to_id = params[:pub_message][:to_id]
    @pub_message.user_id = current_user.id
    @pub_message.content = params[:pub_message][:content]
    if @pub_message.save
        flash[:success ] = "Your post has been sent"
        redirect_to user_path(params[:pub_message][:to_id])
    else
        render 'users/show'
    end
end 
```

^（附带说明，由于某些安全问题，我会保存每个属性，所以我没有制作：to_id attr_accessible）

但回到正题，当我渲染“用户/节目”时，它似乎找不到我的任何变量。它进入我的用户显示视图，抱怨......

```
undefined method `name' for nil:NilClass
1: <% provide(:title, @user.name) %> 
```

但是，如果它转到我的 users#show 操作，我声明了@user。

```
 def show
    @user = User.find(params[:id])
    @current_user = current_user
    if user_signed_in?
        @message = current_user.messages.build
        @pub_message = current_user.pub_messages.build
    end
    @feed_items = @user.feed.paginate(page: params[:page], per_page: 20)
 end 
```

我错过了还是做错了什么？谢谢你

更新：所以它似乎没有进入表演动作。我该如何解决不显示的错误消息？如果我进行重定向，是否会导致浏览器立即请求新页面？因此我的错误信息永远不会出现？

UPDATE2：所以...我实际上不是来自模型的“新”页面，而是来自用户显示模板。在模板中，我有以下内容

```
<%= form_for([current_user, @pub_message])  do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
    <%= f.hidden_field :to_id, :value => @user.id %>
  <div class="micropost_message_field">
    <%= f.text_area :content, placeholder: "Comments?", :id => 'public_message_text' %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

这是构建对象的地方，最终转到我的 pub_messages#create。如果我确实重新初始化了所有变量，我是否还需要将所有模板移动到共享文件夹中，因为它会抱怨这一点。

还是有更好的方法来做到这一点？也许就像渲染“新”，然后重定向到用户#show？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:04:51.330

重定向将显示 Flash 消息，但不会显示验证错误。由于您没有设置 Flash 错误消息，我猜您想显示模型的验证错误。为此，您需要坚持渲染，而不是重定向。

为了渲染，您需要初始化显示视图所需的所有变量（尽管我不清楚您为什么不渲染“新”，这表面上是用户导航的地方）。要干净地做到这一点，您可以将 show 方法的所有内容移动到另一个方法，并从 show 和失败的创建中调用该方法。

```
def initialize_show_vars
   @user = User.find(params[:id])
    @current_user = current_user
    if user_signed_in?
        @message = current_user.messages.build
        @pub_message = current_user.pub_messages.build
    end
    @feed_items = @user.feed.paginate(page: params[:page], per_page: 20)
end

def show
  initialize_show_vars
end

def create
  <stuff ...>
  if @pub_message.save
    <stuff ...>
  else
    flash[:error] = "Didn't work"
    initialize_show_vars
    render 'users/show'
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:09:18.257

当您进行渲染时，控件直接从此操作转到视图模板，并且不会触及您的 users_controller。这就是您的变量丢失的原因。

但是，当您重定向时，它会转到 users_controller，就好像来自用户的新请求一样。

而不是`render 'users/show'`，尝试`redirect_to :controller => :users, :action => :show, :id => current_user.id`

重定向确实会显示 Flash 通知和错误。在这种情况下，重定向非常常用。

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:06:10.897

你没有调用 show 动作，你只是在渲染模板，所以`@user`没有被定义。

您可以尝试另一个重定向而不是呈现模板。

# arrays - ZSH for 循环数组变量问题

> ID：10887560
> 
> 赞同：29
> 
> 时间：2012-06-04T20:03:04.300
> 
> 标签：zsh, bash, arrays, shell, unix, for-loop, zsh

我在[zsh](/questions/tagged/zsh "显示标记为“zsh”的问题")工作，但我相信[bash](/questions/tagged/bash "显示标记为“bash”的问题")指令也会有所帮助。

我需要一个 for 循环来遍历数组中存储的值`lw`，然后根据存储在数组中的名称值启动一个 shell 脚本。

到目前为止，这就是我想出的：

```
$lw=('plugin1' 'plugin2' 'plugin3')

for i in $lw;
  do . ~/Library/Rogall/plugins/$lw[$i]/lw.prg end;
done 
```

运行这个给我一个错误，说它找不到`~/Library/Rogall/plugins//lw.prg`。看起来好像它完全忽略了我的变量。

我搞砸了有什么想法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-04T20:12:48.273

它实际上比这简单得多：

```
lw=('plugin1' 'plugin2' 'plugin3')

for i in $lw; do
  . ~/Library/Rogall/plugins/$i/lw.prg end
done 
```

总之：

*   分配给`foo`，而不是`$foo`（外壳会尝试扩展`$foo`并分配给它扩展的任何内容；通常没有用）
*   直接使用循环变量；它包含数组*值*而不是*索引*

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-04T20:31:17.687

为什么要麻烦使用数组？这可以很容易地在便携式 sh 中完成：

```
lw='plugin1 plugin2 plugin3'

for i in $lw;
  do . ~/Library/Rogall/plugins/$i/lw.prg end
done 
```

请注意，要使其在 zsh 中工作，您需要使 zsh 做正确的事情：`set -o shwordsplit`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-03-31T11:59:55.177

我遇到了一个问题，像这样的循环

```
for i in (1 2 3 4); do echo $i; done 
```

反复没有按我的意愿工作。我会收到类似的错误`zsh: unknown file attribute: 1`，或类似的输出

```
1 2 3 4 
```

无论我如何重新扭曲它，而不是我想要的

```
1
2
3
4 
```

为了获得我想要的行为，我必须`in`从循环定义中删除关键字

```
for i (1 2 3 4); do echo $i; done
1
2
3
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-14T23:48:26.663

对于其他最终在这里与shell脚本，文件名中的数组和空格搏斗的人......就像我下面的文件列表；

```
$ ls *.meta
20160324 1850 - ABC - Clarke And Dawe.ts.meta
20160706 1515 - 9Gem - Agatha Christie's Poirot.ts.meta
20181213 0155 - 10 BOLD - Star Trek_ The Next Generation.ts.meta
20210424 1927 - ABCTV HD - The Durrells.ts.meta
20210501 1927 - ABCTV HD - The Durrells.ts.meta
20210818 1930 - SBS ONE HD - Tony Robinson's World By Rail.ts.meta 
```

经过大量搜索和尝试不同的方法后，这被证明是问题最少的并且适用于 MacOS 10.15

```
eval "list=( $(find . -name "*.ts" -exec echo \"{}\" \;) )"
for name in "${list[@]}"
do
res=`mediainfo --Output=''Video\;\%Width\%:%Height\%'' "$name"`
echo ${name} :: $res
sed -i .bak -e 5s/\;[[:digit:]]*:[[:digit:]]*// -e 5s/$/\;$res/ "$name.meta" 
done 
```

忽略我试图实现的内部结构，关键方面是使用 eval 并在 find 内的 echo 中将双引号包裹在文件名周围。（我在做什么？我从 Enigma2 PVR 记录中提取分辨率并将其写入相关元数据文件的第 5 行）

感谢所有就 shell 脚本生成的各种问题发表自己的知识的人。

# qt - Qt 某些 ASCII 仅在某些机器上丢失

> ID：10887561
> 
> 赞同：0
> 
> 时间：2012-06-04T20:03:07.340
> 
> 标签：qt, ascii, qtextedit

我有一个 QTextEdit 的问题。当我在调试或发布模式下从 QtCreator 在我的开发环境中编译和运行时，文本编辑会很好地显示字符。他们都完美地出现了。此外，如果我将所有依赖的 dll（我在 Windows 上）复制到一个文件夹中并从那里运行发布版本，一切仍然正确显示。

但是，当我将刚刚在最后一步构建的目录复制到另一台机器时，并非所有字符都正确显示。只有其中一些出现。它们都是 ASCII 字符，来自屏幕上的 QWERTY 键盘。文本编辑是为屏幕键盘显示字符的位置。当包含文本编辑和 QWERTY 键盘的小部件关闭时，文本会从文本编辑中复制到新的文本编辑中，其中 ASCII 字符显示正常。

对于这个古怪的文本编辑，似乎只有某些字符没有显示。显示的相同字符始终显示，未显示的相同字符始终不显示。

假设我已经说得很清楚了（很难描述，所以这是为了你的努力），有没有人知道这是如何发生的以及为什么会发生？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:07:00.190

这听起来像一个字体问题。目标计算机上可能缺少文本框中使用的字体或已损坏。强制您的第一个文本编辑（行为怪异的那个）使用像“Arial”这样的字体。这有什么区别吗？

# php - 具有公共前缀的动态命名数组上的单个foreach循环语句？

> ID：10887563
> 
> 赞同：0
> 
> 时间：2012-06-04T20:03:16.400
> 
> 标签：php, foreach, dynamic-allocation

```
$size_of_groups = "4";
// for the purpose of the question, assume $seeded_teams size is currently 32, it's array that returns data from a function i have created, 
//however the size can change
// depending on user input

// creates dynamically named arrays (i realize this is a poor way of doing 
//things, but, for my purposes it is fine
$ft = "true"; 
for ($i = 1; $i < sizeof($seeded_teams) / $size_of_groups + 1; $i++) {
    if ($ft == "true") {
        ${"group{$i}"} = array($seeded_teams[0], $seeded_teams[sizeof($seeded_teams) / 2 - 1], 
        $seeded_teams[sizeof($seeded_teams) / 2], $seeded_teams[sizeof($seeded_teams) - 1]);
        $ft = "false";
    } else {
        ${"group{$i}"} = array($seeded_teams[-1 + $i], $seeded_teams[sizeof($seeded_teams) / 2 - $i], 
        $seeded_teams[sizeof($seeded_teams) / 2 - 1 + $i], $seeded_teams[sizeof($seeded_teams) - $i]);
    }
} 
```

我正在我的脚本中创建具有动态名称的数组。以这种方式创建的所有数组都附加了一个数字。
例如：$group1、$group2、$group3、$group4、$group5、$group6、$group7、$group8

如果我知道（并且我的脚本理解）确切有多少个数组（因此，将知道所有的附件），我想知道是否有任何方法可以执行一个可以理解所有 8 个的语句数组，而不必调用 8 个单独的循环。

我想只重写这部分代码以使用多维数组可能会好得多，但是我在很久以前使用这些信息编写了一些其他函数，当时我的经验要少得多，并且还没有意识到该项目。请注意，此项目仅用于个人目的。

举一个更好的例子，是否可以做这样的事情？

```
for($i=0;$i < $number_of_groups + 1; i++) {
    foreach ($"{group{$i}"} as $value) {
        echo $value."<br>";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:06:10.190

您可以通过以下方式完成此操作[`variable variables`](http://us.php.net/manual/en/language.variables.variable.php)：

```
for($i = 0; $i < $number_of_groups + 1; i++) {
    $var = 'group' . $i;
    foreach ($$var as $value) {
        // ...
    }
} 
```

# jquery - Fill viewport with squares

> ID：10887570
> 
> 赞同：0
> 
> 时间：2012-06-04T20:04:02.233
> 
> 标签：jquery

I am trying to get the dimensions of the viewport and then fill it squares so that they perfect cover the whole viewport. There must be a better way than my current code (below). Perhaps there is a way to find an easily divisible number for the denominator of this line `var boxWidthHeight = wrapperArea / 30000;`?

```
$(document).ready(function() {
    var wrapperWidth = $(window).width();
    var wrapperHeight = $(window).height();
    $('.wrapper').css('width', wrapperWidth);
    $('.wrapper').css('height', wrapperHeight);
    var wrapperArea = wrapperWidth * wrapperHeight;
    var boxWidthHeight = wrapperArea / 30000;
    var boxWidthHeight = parseInt(boxWidthHeight);
    var boxArea = boxWidthHeight * boxWidthHeight;
    var boxCount = wrapperArea / boxArea;
    for(var i = 0; i < boxCount; i++) {
        $('.wrapper').append('<div class="box"></div>');
    }
    $(".box").css({ width: boxWidthHeight, height: boxWidthHeight });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:25:10.717

[http://jsfiddle.net/iambriansreed/nwPy5/](http://jsfiddle.net/iambriansreed/nwPy5/)

JavaScript

```
 $(function() {

    var box_size = 20,
        wrapper = $('.wrapper'),
        x = Math.round( wrapper.width()/box_size ) + 
        (wrapper.width()%box_size ? 1 : 0),
        y = Math.round( wrapper.height()/box_size ) + 
        (wrapper.height()%box_size ? 1 : 0),
        html = '';

    for(var i = 0; i <= x*y; i++)
        html += '<div class="box"></div>';

    wrapper.hide().html('<div class="inner">'+html+'</div>');

    $('.inner', wrapper ).css({'width' : x*box_size , 'height' : y*box_size , 'overflow': 'visible'});

    $('.box', wrapper ).css({
        'background': '#ccc',
        'width': box_size - 2,
        'height': box_size - 2,
        'border': '#fff solid 1px',
        'float':'left',
        'clear': 'none'
    });

    wrapper.show();

});​ 
```

HTML

```
<div class="wrapper"></div>​ 
```

CSS

```
.wrapper {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: #333;
    overflow: hidden;
} 
```

# c++ - 正确使用用户定义类型的 std::vector.push_back()

> ID：10887573
> 
> 赞同：3
> 
> 时间：2012-06-04T20:04:17.747
> 
> 标签：c++, class, vector

我使用当前的vector.push_back（）方法遇到了分段错误（我认为）。

这是一些示例代码：

所以我有我的班级僵尸

```
class Zombie
{
    public:
       Zombie();
       ~Zombie();

       SDL_Surface* image;

       SDL_Rect box;

       bool dead;

   protected:

   private:
       // gets random coordinates around the screen
       SDL_Rect get_zombie_rect();
 }; 
```

构造函数是：

```
Zombie::Zombie()
   :
   dead(false),
   image(load_image("Player.png")),
   box(get_zombie_rect())
{

} 
```

Zombie 有一个处理程序类，通过一个名为 create_new_zombie() 的函数来管理向量。（这是问题）

```
void Zombie_Manager::create_new_zombie()
{
   Zombie newZombie;
   zombies.push_back(newZombie);
} 
```

这是将元素添加到向量的正确方法吗？

我可以使用指针获得一个工作版本，但是必须有一种更简单、更正确的方法来实现这一点，对吧？

如果 std::vector.push_back() 浅拷贝其新元素，为什么会出现段错误？我的假设错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T20:04:58.307

您需要实现一个复制构造函数和一个赋值运算符。

`zombies.push_back(newZombie);`推`newZombie`入向量中的副本。当方法进入时，原始`newZombie`被破坏。我愿意在`~Zombie()`你跟注中打赌`delete image;`。

因为您没有适当的复制构造函数和赋值运算符，所以所有副本都将无效，因为它们将包含悬空指针。

始终遵循**三规则**- 如果您需要实现析构函数，则还需要实现 c-ctor 和赋值运算符。

# android - 在 Android 主屏幕小部件中使用 SpannableString？

> ID：10887574
> 
> 赞同：1
> 
> 时间：2012-06-04T20:04:25.913
> 
> 标签：android, widget, spannablestring

我可以`SpannableStrings`在小部件的 textView 中使用吗？我试过了，它呈现的只是纯文本。我不知道这是否是我做错了（很可能），或者是否由于某种原因不可能。

这是我正在使用的代码（真的没什么特别的......）

```
 public static void updateWidgetState(Context paramContext, String paramString, Integer appWidgetId) {

    SpannableString majorLabel = new SpannableString("");
    SpannableString minorLabel = new SpannableString("");
    if (position > -1) {
        majorLabel = GetParsedMajorLabel(paramContext);
        minorLabel = GetParsedMinorLabel(paramContext);
    }
    RemoteViews localRemoteViews = buildUpdate(paramContext, paramString, appWidgetId);
    localRemoteViews.setTextViewText(R.id.majorlabel, majorLabel);
    localRemoteViews.setTextViewText(R.id.minorlabel, minorLabel);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:23:39.783

```
String urlink = "http://www.google.com";
String link = "<a href=\"+urlink+ >link</a>"; 
textView.setText(Html.fromHtml(link)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:15:02.790

如果您想在 a 中显示格式化文本`TextView`，请使用[`fromHtml`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-15T10:50:49.737

## 2020 年更新 Html.fromHtml 在 Android N 中已弃用

用于`HtmlCompat.fromHtml`更好的兼容性

使用 HTML 设置粗体文本的示例

```
 setTextViewText(
                  R.id.wind, HtmlCompat.fromHtml(
                            "<b>Wind:</b>"+ windSpeedKmh+"<br/>"+
                            "<b>Direction:</b>" +windDirection
                       , HtmlCompat.FROM_HTML_MODE_LEGACY)
                    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T07:53:57.520

您可以轻松地在小部件中设置 Spannable String。我所做的是我将`SpannableStringBuilder` 其设置为 remoteView's `textView`。

```
 views.setTextViewText(R.id.rsTV, WidgetUtils.setPriceSpannableHomeScreenString(currentUserBalance.balance, context))

fun setPriceSpannableHomeScreenString(price: String, context: Context?): SpannableStringBuilder {

    val builder = SpannableStringBuilder()

    if (AppClass.hasValue(price) && context != null) {

        val st = StringTokenizer(price.trim { it <= ' ' }, ".") //pass dot as delimeter

        val balanceArrayList = ArrayList<String>()

        //iterate through tokens

        while (st.hasMoreTokens()) {
            balanceArrayList.add(st.nextToken("."))
        }

        val priceRsText = context.getString(R.string.rs)
        var priceBeforeDecimal = ""
        var priceAfterDecimal = ""

        if (balanceArrayList.size > 0) {

            if (balanceArrayList.size > 0 && balanceArrayList.get(0) != null) {
                priceBeforeDecimal = balanceArrayList.get(0)
            }

            if (balanceArrayList.size >= 2 && balanceArrayList.get(1) != null) {
                priceAfterDecimal = balanceArrayList.get(1)
            }

        }

        val firstValue = "$priceRsText.$priceBeforeDecimal."

        val lastValue = priceAfterDecimal

        val txtSpannable = SpannableString(firstValue)
        val boldSpan = StyleSpan(Typeface.BOLD)
        txtSpannable.setSpan(RelativeSizeSpan(1.5f), 0, firstValue.length, 0) // set size
        txtSpannable.setSpan(boldSpan, 0, firstValue.length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
        builder.append(txtSpannable)
        builder.append(lastValue)
        // priceSpannableTextView.setText(builder, TextView.BufferType.SPANNABLE)

        return builder
    }

    return builder
} 
```

# windows - VB.NET 上（受保护/部分）和（朋友/共享）和（子/功能）之间有什么区别

> ID：10887579
> 
> 赞同：-1
> 
> 时间：2012-06-04T20:04:51.960
> 
> 标签：windows, vb.net, visual-studio-2010

当我在网上找到 VB.NET 的示例时，请观看一些功能使用：

```
 (Protected / Partial) & (Friend / Shared) & (Sub / Function) exp()
    End (Sub / Function) 
```

我的问题有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T20:21:12.280

这些实际上是不同的，有些无关的项目。

`Public`, `Protected`, `Private`, 和`Friend`是[访问级别](http://msdn.microsoft.com/en-us/library/76453kax.aspx)，它们确定谁可以“看到”或使用您的方法。

`Partial`用于将类型的声明拆分到多个文件中。有关详细信息，请参阅[部分](http://msdn.microsoft.com/en-us/library/yfzd5350.aspx)。

`Sub`并`Function`定义程序。 [Sub](http://msdn.microsoft.com/en-us/library/dz1z94ha)过程不返回值，而[Function](http://msdn.microsoft.com/en-us/library/sect4ck6)过程返回值。

您通常会将一个访问级别与一个过程定义结合起来，因此`Private Sub`or`Public Function`等​​。

# ms-word - 如何将网页（从 Intranet wiki）转换为 Office 文档？

> ID：10887580
> 
> 赞同：5
> 
> 时间：2012-06-04T20:04:58.120
> 
> 标签：ms-word, ms-office, mediawiki, data-conversion

我在公司的 Intranet 上有一组 Wiki 页面（MediaWiki 样式），我想将其转换为 Microsoft Office Word 文档（或我可以在其中导入的内容）。我正在寻找具有以下特性的东西：

## 要求

*   尽可能保持格式
*   不需要更改托管 Wiki 的服务器上的任何内容（不能添加插件，也不能从我这边修改配置文件）
*   该解决方案可以以编程方式（因为我也是开发人员），具有 Python/C#/C++ 等风格

## 排除项

*   看起来不像*“Wiki 到 Acrobat PDF Pro 到 Microsof Office Word”*的解决方案（因为我们没有 Acrobat PDF Pro）。实际上，即使是非专业版（允许“在​​线另存为 Microsoft Word”选项）在我的公司（非常旧的 Adob​​e 套件版本）中也不可用。但是，我仍然可以将页面导出为 pdf，但是从我们拥有的 Wiki 来看，它看起来不太好（因为某些元素太大，对于 A4 格式，并且从生成的 pdf 中刮掉了多余的部分。我无论如何都希望它们被包含在内，并最终能够在 Word 中使用“坏”格式
*   由于它是一个内部网 wiki，在线解决方案超出了范围
*   暗示我可以复制 Wiki 的数据库并在其他地方（例如在家）进行操作的解决方案也超出了范围

## 选项

*   该解决方案可以在 Windows 或类似 Linux (CentOS) 上
*   如果可以批量做就更好了，但不是必须的

## 问题

您是否有任何可以满足我需求的解决方案的提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:29:19.850

一个非常简单的解决方案是在 Word 的*打开文档对话框中打开 Wiki 的 URL，例如，将 URL* [http://en.wikipedia.org/w/index.php?title=Microsoft_Word&printable=yes](http://en.wikipedia.org/w/index.php?title=Microsoft_Word&printable=yes)粘贴到*文件名*文本框中. 这不需要任何编程，仍然给出了令人满意的结果。

如果您需要批处理解决方案，您可以在 VBA 中编写一个简单的脚本来为您创建和保存文档：

```
Sub OpenFromWiki()

    Documents.Open FileName:= _
        "http://en.wikipedia.org/w/index.php?title=Microsoft_Word&printable=yes", _
         ConfirmConversions:=False, ReadOnly:=True, AddToRecentFiles:=False, _
        PasswordDocument:="", PasswordTemplate:="", Revert:=False, _
        WritePasswordDocument:=""

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:44:39.083

您可以安装[OpenDocument 导出扩展](http://www.mediawiki.org/wiki/Extension%3aOpenDocument_Export)，它允许您下载OpenDocument 格式的单页或[集合，可以使用 MS Word 打开。](http://www.mediawiki.org/wiki/Extension%3aCollection)

使用扩展内部使用的[`mwlib`python 包](http://pediapress.com/code/)，您还可以轻松地执行批处理脚本。

# jquery - 在不使用标题属性的情况下向fancybox添加标题以避免黄色框？

> ID：10887587
> 
> 赞同：0
> 
> 时间：2012-06-04T20:05:37.793
> 
> 标签：jquery, fancybox

所以我正在使用fancybox，我希望我的iFrame 框有标题，但我不想在HTML 中使用title 属性，因为这样我就会在鼠标悬停时看到那个丑陋的黄色框。有谁知道如何避免这种情况？

# javascript - 用于改变 backgroundPosition 的动态变量

> ID：10887590
> 
> 赞同：1
> 
> 时间：2012-06-04T20:05:50.867
> 
> 标签：javascript, variables, dynamic

我找到了一些松散相关的答案，但没有一个具有我需要的可变性水平。

我正在尝试创建一个类似于您在汽车网站上可以找到的变色芯片调色板：当单击油漆样本时，主图像的背景位置将发生变化，从而产生油漆颜色已更改的错觉。我还是 javascript 的新手，但*认为*这是最优雅的方式。有人可以帮助将语法转换为实际的工作脚本吗？

定义CSS：

```
#target { 
     background: url("/images/center-stage.jpg") no-repeat; 
     background-position: 0 0;
} 
```

外部脚本文件上的函数：

```
function colorChange(x,y)
{
    var x=("x" + px); // i don't get how to format this stuff
    var y=("y" + px);
    document.getElementById("target").style.backgroundPosition="(,)"; // this doesn't really go here, does it?
} 
```

和 html 调用：

```
<a href="#" onclick="colorChange(0,50)"><img src="/images/swatches/red.jpg"></a>
<a href="#" onclick="colorChange(0,100)"><img src="/images/swatches/yellow.jpg"></a>
<a href="#" onclick="colorChange(0,150)"><img src="/images/swatches/blue.jpg"></a>
<a href="#" onclick="colorChange(0,200)"><img src="/images/swatches/green.jpg"></a> 
```

等等。

更复杂的是，有 2 个颜色变量；就像汽车网站可以选择外部内部颜色一样，此脚本也需要具有外部和内部颜色选项（黑色或白色外部以及 4 种可能的内部颜色）。

我认为最好的方法是在 y 轴上设置所有外部选项，在 x 轴上设置所有内部选项，但需要以单击红色、黄色、蓝色或绿色将移动 x 的方式定义调用-axis 但保持当前选择相同（反之亦然）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:44:33.587

如果你把 JS 改成这样：

```
function colorChange(x,y) {
    document.getElementById("target").style.backgroundPosition=x+'px '+y+' px'; 
} 
```

背景图像将开始移动。它在您的示例中不起作用的原因：

```
function colorChange(x,y)
    {
        var x=("x" + px); // i don't get how to format this stuff
        var y=("y" + px);
        document.getElementById("target").style.backgroundPosition="(,)"; // this doesn't really go here, does it?
    } 
```

是不是这个语句： var x=("x" + px);

这不起作用，因为“x”是一个变量，不应该被引用。'px' 也是一个字符串，应该被引用，这样语句就变成了： var x = x+'px';

现在，在声明中： document.getElementById("target").style.backgroundPosition="(,)";

可以直接设置值而不必使用'var x = x+"px"'，所以变成：

```
document.getElementById("target").style.backgroundPosition=x+'px '+y+' px'; 
```

另外，出于好奇，您使用的是 jQuery 还是 jQuery 类型的 JS 库？因为不是说：

```
document.getElementById("target").style.backgroundPosition=x+' '+y 
```

你可以说：

```
$("#target").css('background-position', x+'px '+y+'px'); 
```

* * *

** 编辑 **

只更新您需要的值，而不是 x 和 y：使用 CSS，没有 background-position-x 或等效项。所以你必须在 JS 中保留一个变量来保存每个 X 和 Y 值。然后您的更改功能可以更新变量...然后进行背景位置更改。

看看这段代码：

```
// variable outside of function() scope
var xposition, 
     yposition;

// Update values of xposition and or yposition
function updatePositions(axes) { // Should be {x:0,y:0}
    // Check to see which axis was passed in x, y or both, then update values
     if (typeof(axes.x) !== 'undefined') xposition = axes.x;
     if (typeof(axes.y) !== 'undefined') yposition = axes.y;

//Call function to actually move BG image
colorChange();
}

// Function move BG image, using variables declared above
function colorChange() {
    // Use xposition and yposition which are changed by JS function above
    $("#target").css('background-position', xposition+'px '+yposition+'px');
}

$(document).ready(function() {
    updatePositions({x:0,y:0}); // Initialize to starting position
}); 
```

* * *

上面的 {x:0,y:0} 代码只是我用来将参数传递给具有多个值的函数的一种方式。
{} 表示 Javascript '对象'...所以你可以这样说：

```
var obj = {};
obj.x = 150;
obj.y = 200;
console.log(obj); 
```

输出：对象 {x: 150, y:200}

* * *

HTML（请注意，您可以传入 x 和 y 或仅传入 x 或仅传入 y）

```
<a href="#" onclick="updatePositions({x:0,y:50})"><img src="/images/swatches/red.jpg"></a>
<a href="#" onclick="updatePositions({x:0,y:100})"><img src="/images/swatches/yellow.jpg"></a>
<a href="#" onclick="updatePositions({x:0})"><img src="/images/swatches/blue.jpg"></a>
<a href="#" onclick="updatePositions({y:200})"><img src="/images/swatches/green.jpg"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:29:49.607

```
function colorChange(x,y)
        {
            var positionX = x + "px";
            var positionY = y + "px";
            document.getElementById("target").style.backgroundPosition = positionX + " " + positionY;
        } 
```

# image-processing - 如何调整相似的照片以匹配？（自动图像配准任务）

> ID：10887600
> 
> 赞同：2
> 
> 时间：2012-06-04T20:06:11.220
> 
> 标签：image-processing, centering, image-scaling, autorotate, edge-detection

我有一组自己的减肥进度照片，都非常相似，背景是白色的，空白的。我想要一张基本照片和一个（任何类型的）脚本，可以在没有人工干预的情况下纠正镜头之间的细微变化（角度、颜色（白平衡）、距离），以便肩部、臀部和裁剪翻阅照片时匹配。

要求（所有关于我创建的基本图像）：
非扭曲
匹配肩宽（调整大小）
旋转调整
白平衡
裁剪（粗略没关系）（如果我只在基本图像中下降膝盖，其他图像应该去除小腿或头部等）

我在这方面非常不了解，我不确定我应该寻找什么（所以我可能只需要一个简单的谷歌搜索）。

我应该看哪些工具？C、C++、Python、MatLab、Shell 都适用于库/工具。

更新：做更多研究我发现这被称为自动图像配准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:37:56.630

我找到了有关如何在 Python 中使用 OpenCV 在 Python 中执行此操作的基本教程。

[http://www.neuroforge.co.uk/index.php/image-registration](http://www.neuroforge.co.uk/index.php/image-registration)

不过，这只是部分答案。

# machine-learning - Gibbs 采样代码

> ID：10887603
> 
> 赞同：-2
> 
> 时间：2012-06-04T20:06:17.713
> 
> 标签：machine-learning, montecarlo, markov-chains

这里有没有人使用一些测试实现了吉布斯抽样。我必须实施 Gibbs 抽样，但我在将其确定为实施级别时遇到了问题。

----如何以及从哪里选择测试数据？
----如何根据该数据创建贝叶斯网络？（据我了解，您应该有一些贝叶斯网络可供采样。）

如果有人能在这方面指导我，那将是很大的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:08:51.343

有使用 Gibbs Sampling 进行 BN 推理的开源[BUGS](http://www.mrc-bsu.cam.ac.uk/bugs/)软件。这是一个非常通用的软件。但是，我不建议从数据中创建贝叶斯网络。您应该有一些实际对应于 BN 的数据。然后，您可以根据一些观察结果尝试推断 BN 中任何节点的后验概率分布。

# html - Internet Explorer 9 显示 CSS 精灵图像，但内容奇怪

> ID：10887604
> 
> 赞同：0
> 
> 时间：2012-06-04T20:06:18.740
> 
> 标签：html, internet-explorer-9, css-sprites

我有一个我正在使用的图像精灵，但 IE9 没有正确显示它。

它在 Firefox 中运行良好，但在图像上方显示灰色边框和符号（如图所示）。它在 Chrome 中也不太适用 - 它显示图像，但带有灰色边框。

这是抓住它的CSS代码：

```
#see_more_vendors {
background:url('vendor_sprite.png') no-repeat 0px 0px; height: 60px; width:135px; display:block;} 
```

这是html：

```
<td><a href="#"><img id="see_more_vendors" alt=""/></a> 
```

（我已经删除了图像的前导地址，因为这不是问题。）

最初，我认为它是边框，因为在 Chrome 中它只显示灰色边框。但是后来，我在Internet Explorer中看到了，网上还没有看到过这样的案例。

这就是图像的样子，它应该没有边框，左上角也没有图标。

[http://imageshack.us/photo/my-images/713/examplec.jpg/](http://imageshack.us/photo/my-images/713/examplec.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:49:44.840

如果您使用它超过 1 次，则在 css 中创建类：

```
.see_more_vendors {
background:url('vendor_sprite.png') no-repeat 0px 0px; height: 60px; width:135px;display:block;} 
```

然后你的 A 标签应该是这样的：

```
<a class="see_more_vendors" href="#">&nbsp;</a> 
```

因为正如您在发布的图片 (imageshack) 上看到的那样，您看到的是背景但没有图片。因为`img`标签`src`是空的。好吧`&nbsp;`，如果您知道更好的方法，我会使用，然后告诉我。谢谢。

# php - 强制下载和 htaccess = 零字节文件

> ID：10887607
> 
> 赞同：1
> 
> 时间：2012-06-04T20:06:24.603
> 
> 标签：php, .htaccess

我试图拒绝访问我服务器上的一个文件夹，其中有些文件只能通过 php 脚本下载。php脚本用于强制下载文件，就像这样：

```
 function downloadFile($file){
        $file_name = $file;
        $mime = 'application/force-download';
        header('Pragma: public');
        header('Expires: 0');
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Cache-Control: private',false);
        header('Content-Type: '.$mime);
        header('Content-Disposition: attachment; filename="'.basename($file_name).'"');
        header('Content-Transfer-Encoding: binary');
        header('Content-Length: '.filesize($file_name));    // provide file size
        header('Connection: close');
        readfile($file_name);
        exit();
    } 
```

并且 htaccess 必须只提供对 localhost 的访问权限：

```
order deny,allow
deny from all
allow from 127.0.0.1 
```

但是每次脚本下载一个同名的零字节文件，而不是完整的文件。但是，当我删除 htaccess 时，一切都很好。我不知道错误在哪里。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:07:39.913

问题是 readfile(); 需要机器上文件的绝对路径而不是 url。

例如 /home/person/file.exe

# javascript - 如何改进我的 jQuery 以始终在 IE8 中工作，目前它很受欢迎

> ID：10887608
> 
> 赞同：2
> 
> 时间：2012-06-04T20:06:30.397
> 
> 标签：javascript, jquery, internet-explorer-8

我有一个网页，它从用户那里获取数值并将它们绘制在网格上。下面是输入一组数字时使用的 jQuery 示例：

```
$('#c_per,#c_pot').keyup(function() {
        $('.ls_ref').each(function() {
            if($(this).text().search('C') > 0) {
                countDown(this.id);
            }
            $(this).text($(this).text().replace('C', ''));
        });
        if($('#c_per').val() > 0 && $('#c_pot').val() > 0) {
            setGridPosition('C',$('#c_per').val(),$('#c_pot').val());
        }
        var c_per = +$('#c_per').val() || 0;
        var c_pot = +$('#c_pot').val() || 0;
        $('#c_tot').val(c_per + c_pot);
    }); 
```

c_per 和 c_pot 是用户放置数字的两个输入：文本。每组数字对应的类别只能在网格中出现一次，因此是给定 keyup 事件函数中的第一个函数。接下来检查两个输入是否都有一个值，然后调用 setGridPosition 函数。其余的只是将两个数字的总和相加，并确保当两个输入之一中没有值时函数不会崩溃。

```
function setGridPosition(cat,per,pot) {
    var id = "ls_" + per + "_" + pot;
    $('#'+id).append(cat);
    var check = per + "-" + pot;
    switch(check) {
        case '1-1': case '2-1': case '1-2': case '2-2':
            counts.q_1 += 1;
            switch(check) {
                case '1-1':
                    priority_one_count.s_1_1++; break;
                case '2-1':
                    priority_one_count.s_2_1++; break;
                case '1-2':
                    priority_one_count.s_1_2++; break;
                case '2-2':
                    priority_one_count.s_2_2++; break;
            }    
            break;
        case '3-1': case '4-1': case '5-1': case '3-2': case '4-2': case '5-2':
            counts.q_2 += 1;
            switch(check) {
                case '3-1':
                    priority_two_count.s_3_1++; break;
                case '4-1':
                    priority_two_count.s_4_1++; break;
                case '5-1':
                    priority_two_count.s_5_1++; break;
                case '3-2':
                    priority_two_count.s_3_2++; break;
                case '4-2':
                    priority_two_count.s_4_2++; break;
                case '5-2':
                    priority_two_count.s_5_2++; break;
            }
            break;
        case '3-3': case '4-3': case '3-4':
            counts.q_3 += 1;
            switch(check) {
                case '3-3':
                    priority_three_count.s_3_3++; break;
                case '4-3':
                    priority_three_count.s_4_3++; break;
                case '3-4':
                    priority_three_count.s_3_4++; break;
            }
            break;
        case '5-3': case '4-4': case '3-5':
            counts.q_4 += 1; break;
        case '5-4': case '4-5': case '5-5':
            counts.q_5 += 1; break;
        default: counts.q_6 += 1;
    }
} 
```

这个函数的大部分只是跟踪我需要编译的一些统计数据在哪里。不确定通过 switch 语句是否影响 IE8。

我试图让 jsfiddle.net 与这个网站一起工作，但我想不通。我有一个临时站点设置，您可以在其中查看完整版本。**-链接已删除-**

这段代码每次都可以在 Chrome 和 FireFox 上运行，大约 95% 的时间都可以在 IE8 上运行（需要支持）。通常 9/11 组数字会正确生成网格上的位置。

这段代码中有什么东西是 IE8 遇到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:45:42.280

一个疯狂的猜测，但你不需要休息吗？最后一个默认值：声明？就像在一组开关中一样，也许这使它跳转到另一个案例，就像您对案例“随便”所做的那样：案例“是的”：您可以尝试为默认语句添加中断吗？我看起来像一个非常复杂的算法，但希望这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:52:56.223

我发现 IE8 的 javascript 引擎会不一致地处理 $('#id').val() 数据类型。在处理它们之前，我将每个值解析为 Int ，这似乎修复了错误。

感谢大家看这个。抱歉，我无法正确运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:07:22.933

您是否尝试过简化 switch 语句？

```
 function setGridPosition(cat,per,pot) {
        var id = "ls_" + per + "_" + pot;
        $('#'+id).append(cat);
        var check = per + "-" + pot;
        switch(check) {
          case '1-1':   counts.q_1 += 1;  priority_one_count.s_1_1++; break;
          case '2-1':  counts.q_1 += 1;  priority_one_count.s_2_1++;  break;
          case '1-2':  counts.q_1 += 1;  priority_one_count.s_1_2++; break;
          case '2-2':  counts.q_1 += 1;  priority_one_count.s_2_2++;  break;

          case '3-1': counts.q_2 += 1; priority_two_count.s_3_1++; break;
          case '4-1': counts.q_2 += 1;   priority_two_count.s_4_1++; break;
          case '5-1': counts.q_2 += 1;  priority_two_count.s_5_1++; break;
          case '3-2': counts.q_2 += 1;  priority_two_count.s_3_2++; break;
          case '4-2':  counts.q_2 += 1;  priority_two_count.s_4_2++; break;
          case '5-2': counts.q_2 += 1; priority_two_count.s_5_2++; break;

          case '3-3': counts.q_3 += 1;  priority_three_count.s_3_3++; break;
          case '4-3': counts.q_3 += 1;  priority_three_count.s_4_3++; break;
          case '3-4':counts.q_3 += 1;  priority_three_count.s_3_4++; break;

           case '5-3':  counts.q_4 += 1; break;
           case '4-4':  counts.q_4 += 1; break;
           case '3-5':  counts.q_4 += 1; break;

           case '5-4':  counts.q_5 += 1; break;
           case '4-5':  counts.q_5 += 1; break;
            case '5-5':  counts.q_5 += 1; break;

            default: counts.q_6 += 1; break;
        }
    } 
```

在不知道何时调用此函数以及真正用于什么的情况下很难。希望能引导您找到 IE 8 的问题 :)

# c# - Type.GetType(string) 应该知道动态生成的类型吗？

> ID：10887609
> 
> 赞同：3
> 
> 时间：2012-06-04T20:06:33.950
> 
> 标签：c#, .net, reflection, codedom

我有一个使用 CodeDom 编译器创建一些代码的应用程序。我可以看到生成的程序集在内存中。但是当我调用 Type.GetType(typeName) 时，它返回 null。我觉得这有点令人困惑。

我究竟做错了什么？

```
static void Main(string[] args)
{
    // FYI: Code is some dummy class with only 1 instance method.
    string code = System.IO.File.ReadAllText("CodeToCompile.cs.txt");

    string errors = null;
    Assembly asm = DynamicCompiler.Compile(code, generateInMemory: true, generateDebugInfo: false, message: ref errors);

    // Get type from the generated assembly. We know there is only one.
    Type oneAndOnlyTypeInAssembly = asm.GetTypes().First();

    string typeName = oneAndOnlyTypeInAssembly.AssemblyQualifiedName;

    // Tell the type system to return instance of type based on fully qualified name.
    // I'd expect this to work, since the assembly is already loaded to memory.
    Type sameType = Type.GetType(typeName);

    if (sameType != null)
    {
        Console.WriteLine("Type found and equal={0}", oneAndOnlyTypeInAssembly.Equals(sameType));
    }
    else
    {
        Console.WriteLine("Type NOT FOUND");
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T20:09:40.047

请参阅[**MSDN**](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)中的备注部分。不支持您想要做的事情：

> GetType 仅适用于从磁盘加载的程序集。如果调用 GetType 来查找在使用 System.Reflection.Emit 服务定义的动态程序集中定义的类型，则可能会出现不一致的行为。行为取决于动态程序集是否是持久的，即使用 System.Reflection.Emit.AssemblyBuilderAccess 枚举的 RunAndSave 或 Save 访问模式创建。如果动态程序集是持久的并且在调用 GetType 之前已写入磁盘，则加载程序会在磁盘上找到保存的程序集，加载该程序集，并从该程序集中检索类型。如果调用 GetType 时程序集尚未保存到磁盘，则该方法返回 null。GetType 不理解瞬态动态程序集；**因此，调用 GetType 来检索瞬态动态程序集中的类型会返回 null**。

# tcl - 将日期设置为距当前 unix 时间戳 90 天

> ID：10887610
> 
> 赞同：1
> 
> 时间：2012-06-04T20:06:34.993
> 
> 标签：tcl

嗨，我想设置我的 future_date 变量以显示从今天起 90 天的日期。

```
set $future_date ""
#set $future_date to date in unixtime stamp 90 days from the current timestamp 
```

我可以在 tcl 中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:18:57.080

这样做的方法是使用`clock add`：

```
# The [clock seconds] produces _now_
set future_date [clock add [clock seconds] 90 days]
set future_readable [clock format $future_date] 
```

好的，这*几乎*是正确的。首先，它在某些地区大约半年都不起作用。问题？他们有 DST 变化，这意味着一天的长度实际上不是恒定的（有时，民事日为 23 或 25 小时）。但是，应用这种校正需要​​了解当前时区（因为世界不同地区有不同的规则）。时区是参考[zoneinfo 数据库](http://en.wikipedia.org/wiki/Tz_database)指定的：

```
set zone ":America/New_York"
set future_date [clock add [clock seconds] 90 days -timezone $zone]
set future_readable [clock format $future_date -timezone $zone]
# Normally should use the same timezone for each *unless* there's a
# business reason to do otherwise... 
```

第二个问题是这忽略了闰秒。请注意，如果您不是在编写 GPS 软件或其他同样敏感的软件，这可能正是您想要的（如果您*真的很*在意，您可能有合适的软件/算法来应用校正）。

第三个问题是这只能从 8.5 开始工作（当`clock`命令几乎从头开始重写时；我们厌倦了处理其他人在时间处理方面的错误并决定只拥有我们自己的错误！）所以如果你仍然保守地使用8.4（或之前！）然后你需要一个不同的咒语：

```
set future_date [clock scan "now + 90 days"]
set future_readable [clock format $future_date] 
```

这不是首选，因为它没有正确处理时区（嗯，*可能*使用当前系统时区或可能使用 UTC[*]），并且构建在高度不明显的时间字符串解析器之上。然而，尽管如此，它是 8.5 之前的最佳选择。

* * *

[*] 不要低估这有多奇怪；我记得处理过第三方打印机驱动程序中的错误，当加载到 Windows 上的单独进程中时，会更改*所有*正在运行的应用程序的系统时区，直到打印运行完成。即使确认实际发生的事情也很困难（就像后来把我的下巴从地板上抬起一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:50:52.077

在 Tcl 中，该`clock seconds`命令以秒为单位返回现在的时间。要添加 90 天，您必须将 90 乘以 60（一分钟的秒数）、60（一小时的分钟数）和 24（一天的小时数）：

```
set today [clock seconds]
set future [expr {$today + 90 * 60 * 60 * 24}]
puts [clock format $today -format "Today is %B %m, %Y"]
puts [clock format $future -format "90 days from today is %B %m, %Y"] 
```

请查看`clock`命令以获取更多信息。

# javascript - POST 后使用带有 jQ uery 的 Location 标头重定向

> ID：10887614
> 
> 赞同：5
> 
> 时间：2012-06-04T20:06:49.097
> 
> 标签：javascript, jquery, ajax, http, redirect

我想使用`Location`带有 jQ​​uery 1.7 的标头重定向到目标。

我的代码看起来像这样

```
$('#creationLink').click(function(){
  $.ajax({
    type: 'POST',
    url: '/',
    success: function(data, textStatus, xhr) {
      window.location = xhr.getResponseHeader("Location");
    }
  })
}); 
```

...但它不起作用。`xhr.getResponseHeader("Location")`一片空白。

HTTP 标头：

```
POST / HTTP/1.1
Host: localhost:9000
X-Requested-With: XMLHttpRequest
Content-Length: 0

HTTP/1.1 302 Found
Content-Type: text/plain; charset=utf-8
Location: http://localhost:9000/vIRdD0PdWp4/bearbeiten
Content-Length: 0 
```

如何使用位置标头重定向？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T20:16:47.930

AFAIK，浏览器应该在 XHR 期间透明地遵循响应标头中的重定向。也就是说，XHR 实际上会查看响应，查看 Location 标头，然后神奇地运行该 URI 的第二个请求。只有当它有那个结果时，*它*才会给你任何东西，它给你的是*第二个*请求的结果。

**看到** [这个stackoverflow答案](https://stackoverflow.com/a/4370009/352449)！

因此，如果您需要重定向功能，则必须使您请求的内容以其他方式返回目标 URI，例如作为 JSON 响应。

**看** [此 stackoverflow 解决方案](https://stackoverflow.com/a/1534662/352449)！

PS。参考：[http ://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method](http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method)

# php - 如何计算在 CakePHP 中调用控制器动作的次数？

> ID：10887615
> 
> 赞同：0
> 
> 时间：2012-06-04T20:06:51.863
> 
> 标签：php, cakephp, cakephp-1.3

找出在 CakePHP 应用程序中调用了多少次控制器操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:18:56.730

如果您的应用程序中不需要它，这仅用于调试（听起来像）

我会设置[XDebug](http://xdebug.org)和[Webgrind](http://code.google.com/p/webgrind/)

这将为您提供调用计数以及函数的成本。

# asp.net-mvc-3 - 从查询中排除实体数据

> ID：10887625
> 
> 赞同：0
> 
> 时间：2012-06-04T20:07:56.833
> 
> 标签：asp.net-mvc-3, entity-framework-4, linq-to-entities

我正在查询我的数据库，并且我有一些导航属性，我不一定想在我的查询中返回。我包含了很多导航属性来禁用延迟加载，但是我的 Producer 实体遇到了问题。生产者与葡萄酒具有一对多的关系，而葡萄酒与生产者具有一对一的关系。当我运行查询时，我需要生产者信息（姓名、地址、电话等），但我不需要此查询的关联生产者中的葡萄酒列表。是否有一种 linq 方法可用于仅包含一些生产者字段？这只是一个问题，因为我通过 json 将对象发回，所以我不想要所有额外的数据。

```
Wine w = db.Wines.Where(n => n.WineID == WineID).Include(n => n.VarType).Include(n => n.Origin).Include(n => n.App)
                .Include(n => n.Vintage).Include(n => n.Importer).Include(n => n.Reviews.Select(r => r.Publication))
                .Include(n => n.Producer.Name).Include(n => n.Docs).FirstOrDefault();

public class Producer : Contact
{
    [Key]
    public int ProducerID { get; set; }
    public string Name { get; set; }
    public string Twitter { get; set; }

    public virtual ICollection<Wine> Wines { get; set; }
    public virtual ICollection<UserObj> UserObjs { get; set; }
}

public class Wine :Updater
    {
        public int WineID { get; set; }
        //public int WineTypeID { get; set; }
        [Display(Name = "Varietal/Type")]
        public int? VarTypeID { get; set; }
        [Display(Name = "Origin")]
        public int? OriginID { get; set; }
        [Display(Name = "Appellation")]
        public int? AppID { get; set; }
        [Display(Name = "Vintage")]
        public int? VintageID { get; set; }
        [Display(Name = "Importer")]
        public int? ImporterID { get; set; }
        public int ProducerID { get; set; }
        public string Designate { get; set; }
        [Display(Name = "Drink Window")]
        public string DrinkWindow { get; set; }
        public string Body { get; set; }
        public string SKU { get; set; }
        [Display(Name = "Case Production")]
        public int? CaseProduction { get; set; }
        [Display(Name = "Alcohol Content")]
        public double? AlcoholContent { get; set; }
        public string Winemaker { get; set; }
        [Display(Name = "Consulting Winemaker")]
        public string ConsultWinemaker { get; set; }
        public bool Sustainable { get; set; }
        public bool Kosher { get; set; }
        public bool Organic { get; set; }
        public bool Biodynamic { get; set; }
        public bool SalmonSafe { get; set; }
        public Boolean Active { get; set; }

        public virtual WineType WineType { get; set; }

        public virtual VarType VarType { get; set; }
        public virtual Origin Origin { get; set; }
        public virtual App App { get; set; }
        public virtual Vintage Vintage { get; set; }
        public virtual Importer Importer { get; set; }
        public virtual Producer Producer { get; set; }

        public virtual ICollection<POS> POSs { get; set; }
        public virtual ICollection<Review> Reviews { get; set; }
        public virtual ICollection<Doc> Docs { get; set; }

        public IEnumerable<SelectListItem> BodyList { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:17:21.493

好吧，如果你这样做

```
.Include(n => n.Producer) //not n.Producer.Name 
```

它会“急切地加载”您的葡萄酒生产商，而不是您的葡萄酒生产商。葡萄酒...

另一种方法是使用匿名对象仅获取所需的属性

```
db.Wines.Where(n => n.WineID == WineID)
.Select(w => new {
        w.VarType.Cepage,
        w.Origin.Description,
        ///blabla
        w.Producer.Name,
        w.Producer.Address.Street,
}).FirstOrDefault(); 
```

**编辑**

如果您仍然想要第一个解决方案，请看这里。避免“循环引用”。 [实体框架将 POCO 序列化为 JSON](https://stackoverflow.com/questions/7235650/entity-framework-serialize-poco-to-json)

或其他解决方案 [EF 4.1 - Code First - JSON Circular Reference Serialization Error](https://stackoverflow.com/questions/5588143/ef-4-1-code-first-json-circular-reference-serialization-error)

# javascript - 任何输入或文本区域中数字字符串的事件侦听器？

> ID：10887633
> 
> 赞同：0
> 
> 时间：2012-06-04T20:08:25.713
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

试图制作一个greasemonkey脚本/chrome扩展，所以当我输入信用卡的前四个数字时，它会打开一个带有色情内容的新标签来分散我的注意力。帮我帮我们大家省钱。

顺便说一句，非常严重-可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:27:21.317

这里有一些东西可以帮助你开始：

```
$(function() {
    $("html").on("keyup", "input", function() {
        if(/^\d{4}$/.test(this.value)) {
            // do something
        }
    });
}); 
```

它将一个侦听器绑定`keyup`到所有输入字段（包括动态创建的字段），该侦听器检查字段中是否有恰好四位数字的值。

# xcode - TableView 导航 - 一个 ViewController 或单独的 ViewController 中的所有标签、文本字段和图像？

> ID：10887634
> 
> 赞同：0
> 
> 时间：2012-06-04T20:08:25.837
> 
> 标签：xcode, view, navigation, tableview, labels

我正处于我的第一个 iPhone 应用程序的启动阶段。它是一个基于选项卡的应用程序，其中每个选项卡都代表一个带有 x 个单元格的 TableView 菜单，从而通向其他菜单。当我开始时，在看了几个教程之后，从 Apples 数据库中阅读了很多信息，在 sof 等处，当我在 x-Code 中相处时，我真的很困惑.. 一些基本的东西正在慢慢变得更清楚，但是.. 有这么多的选择和这么多的方法来判断事情的对错，我害怕犯大错误，把事情搞砸。但回到正题：

这个应用程序的全部内容是红酒。它是在挪威销售的红酒的指南/注册，带有瓶装图像、价格信息、口味等。现在 TableView 主菜单正在慢慢形成，我开始考虑葡萄酒注册单元以及如何在详细视图中委派信息。

我是否应该只为 WinelistMasterViewController 创建一个 DetailView，并将有关葡萄酒的信息作为标签/文本字段/图像添加到情节提要的背景图像上，根据您在列表中按下的单元格进行编码以显示？

对于超过 100 种葡萄酒，在一个视图中所有这些标签似乎都是一团糟，制作 100 个视图并建立从 WinelistMasterViewController 到每个表视图的连接似乎更整洁。为什么我不应该这样做？我希望你们中的一些人能给我一些指导。这就是我构建故事板的方式：

TabBarController --> 选项卡的导航控制器。在这种情况下： Tab 2: The Wines --> TableView with cells to select if you want to show the wine table alfabetally, by popular, price, etc --> TableView with the Wines in the selected order (cells with text, bottle图片和最喜欢的明星 ---> 全屏背景 img 包含您选择的葡萄酒的所有信息，您还可以在葡萄酒之间滑动，添加到收藏夹等。

我是一个初学者，所以我面前有一项艰巨的工作要弄清楚如何在委托和 xviewcontrollers 中编写所有这些代码。但我耐心地做这件事，一次做一件事，尝试、失败、学习，慢慢地事情就形成了。但这似乎是一个主要问题，我想，这在很大程度上决定了以后编码的复杂程度上。

我还想提一下，稍后我将添加一个搜索功能来根据需要对列表进行规则和排序，所以这一切也应该适用于此。提前感谢您对这个项目的所有帮助！参考教程、文章、网站和其他可以帮助我的方法，也非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:07:52.850

我为葡萄酒制作了一个字典列表，由于它们都相似（名称键、地区键、国家键等），我在 TableView 中填充了一个原型单元格，并制作了一个“原型”详细信息视图来显示详细信息。所以我最终只得到了 2 个视图控制器：1 个 TableViewController 和 1 个 DetailViewContoller。比为每种葡萄酒制作一个视图控制器要容易得多......

# delphi - 获取给定 DLL、EXE 或 BPL 所需的 BPL 列表

> ID：10887641
> 
> 赞同：8
> 
> 时间：2012-06-04T20:08:44.947
> 
> 标签：delphi, packages, bpl, runtime-packages

我想知道是否有人知道确定给定（已*编译*）DLL、EXE 或 BPL需要哪些 BPL的*优雅方法。*

 *我不确定这是否可能只是简单地扫描二进制文件以查找对*.bpl*文件名的文本引用（*这很容易出现误报*）。

理想情况下，我想返回一个包含所有必需*.bpl*`TStringList`文件名称的甚至逗号分隔的文件。`String`

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:57:02.740

对于包，您可以使用 PACKAGEINFO 资源的 requires 部分 - 请参阅 TJclPePackageInfo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:41:23.590

我 [从 felix-cobri 发现了这个](http://www.felix-colibri.com/papers/colibri_utilities/exe_dll_pe_explorer/exe_dll_pe_explorer.html)- 它的边缘有点粗糙，但可以满足我的需要，那就是列出我的 exe（或 DLL）使用的所有 DLLS。

[http://www.felix-colibri.com/papers/colibri_utilities/exe_dll_pe_explorer/exe_dll_pe_explorer.html](http://www.felix-colibri.com/papers/colibri_utilities/exe_dll_pe_explorer/exe_dll_pe_explorer.html)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:01:41.747

[GExperts](http://www.gexperts.org/)的 PE 信息工具显示隐式加载到任何 .exe、.dll 或 .bpl 中的 bpls 和 dll 列表**

# javascript - Sencha Touch 2 上的 PDF 查看器

> ID：10887643
> 
> 赞同：1
> 
> 时间：2012-06-04T20:08:54.563
> 
> 标签：javascript, pdf, embed, sencha-touch-2

我在 Sencha touch2 遇到了一个奇怪的情况。

我在此框架中阅读和显示 PDF 文件时遇到问题。我在 sencha forum/google .etc 上读到了这个，但我并没有真正找到真正的解决方案。

我有一个带有 PDF 网址的 JSON 对象提要（PDF 不在本地）。

我试过这个：

* * *

*   `<embed type="application/pdf" width="100%" height="100%" src="file.pdf" />`

    我有滚动问题，t 只显示第一页，因为 Sencha 有自己的滚动面板......等等

* * *

*   `<object data="YourFile.pdf" TYPE="application/x-pdf" width="100%" height="100%" </object>`

它有同样的东西，滚动问题

* * *

*   `<iframe src="http://docs.google.com/viewer?url='+encodeURI+'&embedded=true" width="100%" height="780" style="border: none;"></iframe>`

我有点喜欢谷歌的想法，但它在我的 Ipad 上不起作用，我认为谷歌需要登录，以防你想阅读查看 PDF

* * *

PS：我在 sencha 面板中将所有这 3 种方法设置为 HTML：

```
 {
                xtype:'panel',
                height:'100%'
                html:'iframe or object or google'
            } 
```

有人找到解决方案或解决方法来查看 pdf 文件吗？

感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:28:57.943

我发现我使用或计划使用的替代品很少：

1.  Google PDF 查看器[https://docs.google.com/viewer](https://docs.google.com/viewer)，这对我来说并不完美，当您登录并且会话过期时它会出现一些会话问题
2.  如果您的应用程序可以打开 PDF 的新窗口，您可以在浏览器版本中打开一个新窗口，您可以在 Phonegap ChildBrowser 中使用例如查看 pdf
3.  我曾经为 1 个应用程序使用第三方服务 ex: [http://crocdoc.com/](http://crocdoc.com/)，但对我来说真的不起作用，因为我需要在[http://crocdoc.com/](http://crocdoc.com/)上传 pdf后才能预览在应用程序中，这不是即时的
4.  对我来说，下一步是使用 pdfjs [https://github.com/SunboX/st2_pdf_panel](https://github.com/SunboX/st2_pdf_panel)。我仍然需要处理跨域文档，但这就是我所得到的。

如果您有一个很棒的真正解决方案，但是这个问题在我的应用程序实施期间已经存在一段时间了，不确定在这种情况下哪个是真正的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:14:55.413

是的，亲爱的，您可以使用以下示例在 sencha touch-2 上轻松查看 pdf 文档：

```
Ext.Viewport.add({
        //first we define the xtype, which is tabpanel for the Tab Panel component
        xtype: 'tabpanel',

        //next we define the items that will appear inside our tab panel
        items: [
            {
                //each item in a tabpanel requires the title configuration. this is displayed
                //on the tab for this item
                title: 'Tab 1',

                //next we give it some simple html
                items: {
                    html: '1',
                    centered: true
                },

                //then a custom cls so we can style it
                cls: 'card1'
            },
            {
                //title
                title: 'Tab 2',

                //the items html
                items: {
                    html: '2',
                    centered: true
                },

                //custom cls
                cls: 'card2'
            },
            {
                //title
                title: 'Tab 3',

                //the items html
                items: {
                    html: '<embed type="application/pdf" width="800px" height="800px" src="YourFile.pdf" />',
                    centered: true
                },

                //custom cls
                cls: 'card3'
            }
        ]
    }); 
```

# javascript - 在 HTML(5) 文本输入中屏蔽字符的最简单方法

> ID：10887645
> 
> 赞同：28
> 
> 时间：2012-06-04T20:09:00.830
> 
> 标签：javascript, html, masking

HTML5 是否有任何类型的文本字段掩码或者我仍然需要捕获`onkeydown`等？

jbabey 是对的——“屏蔽”就像阻止某些非法字符，而不是隐藏输入的内容。

我发现的最好的（最简单和最可靠的）方法是捕获`onkeyup`然后只对文本字段的值运行正则表达式替换，删除任何非法字符。

这有几个优点：

1.  它很容易实现（一个功能，两行代码）。
2.  它很可靠，涵盖了我想到的所有情况。
3.  它不会阻止复制/粘贴、全选或箭头键等键盘命令。

但它的主要缺点是它会在删除之前简要显示键入的字符，这使它看起来非常生硬和不专业。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T20:21:19.853

查找新的[HTML5 输入类型](http://www.html5rocks.com/en/tutorials/forms/html5forms/)。这些指示浏览器执行数据的客户端过滤，但在不同的浏览器中实现是不完整的。该`pattern`属性将执行正则表达式样式的过滤，但同样，浏览器并不完全（或根本不）支持它。

但是，这些不会阻止输入本身，它只会阻止提交带有无效数据的表单。您仍然需要在`onkeydown`事件显示在屏幕上之前捕获事件以阻止键输入。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-16T13:19:42.077

1.  可以通过选择输入元素的**类型属性来执行基本验证。**例如： `<input type="email" /> <input type="URL" /> <input type="number" />`

2.  使用**模式**属性，如： `<input type="text" pattern="[1-4]{5}" />`

3.  **必需**的属性 `<input type="text" required />`

4.  **最大长度**： `<input type="text" maxlength="20" />`

5.  **最小值和最大值**： `<input type="number" min="1" max="4" />`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-04T20:19:25.477

是的，根据 HTML5 草案，您可以使用该`pattern`属性使用正则表达式指定允许的输入。对于某些类型的数据，您可以使用特殊的输入字段，例如`<input type=email>`. 但这些功能仍然普遍缺乏支持或质量较差的支持。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-25T14:47:16.873

有点晚了，但是一个有用的插件，它实际上会使用一个掩码来对用户输入提供更多的限制。

```
<div class="col-sm-3 col-md-6 col-lg-4">
  <div class="form-group">
     <label for="addPhone">Phone Number *</label>
      <input id="addPhone" name="addPhone" type="text" class="form-control 
       required" data-mask="(999) 999-9999"placeholder>
    <span class="help-block">(999) 999-9999</span>
  </div>
</div>

 <!-- Input Mask -->
 <script src="js/plugins/jasny/jasny-bootstrap.min.js"></script> 
```

[![在此处输入图像描述](../Images/71ad700a9bf667c765320b9925d8c4b2.png)](https://i.stack.imgur.com/BNr0A.png)

有关插件的更多信息[https://www.jasny.net/bootstrap/2.3.1/javascript.html#inputmask](https://www.jasny.net/bootstrap/2.3.1/javascript.html#inputmask)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2019-11-04T10:43:48.660

使用这个 JavaScript。

```
$(":input").inputmask();
$("#phone").inputmask({"mask": "(999) 999-9999"}); 
```

# iphone - CALayer的效率和极限是多少

> ID：10887654
> 
> 赞同：2
> 
> 时间：2012-06-04T20:09:41.873
> 
> 标签：iphone, ios, calayer, gpu, processing-efficiency

在我的 iPhone 应用程序中，我需要显示大量（最多 150 个）10x10 像素的小点，它们分别在屏幕上移动。它们不需要以任何方式顺利移动，但需要每秒钟左右更新一次。目前，我已将其实现为一个每秒重绘的 CALayer。

但我知道 CALayers 非常高效，因为它们映射到 GPU 硬件。所以我想知道为每个点创建一个单独的 CALayer 并通过设置它们的位置属性来移动它是否会更有效（就电池使用而言）。

所以我想知道你是否有这方面的经验。CPU 可以做的更少，但 GPU 更多。GPU硬件仍然可以处理多少个CALayer？

如果我让它们分开 CALayers，我也可以轻松地为它们设置动画，这样看起来会更好。那会更耗能吗？

在我的情况下更糟糕的是，我目前为它们使用 CATiledLayer，最多暴露 4 个图块。这也意味着我每次更新都需要重绘它们 4 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:33:25.010

那里。我遇到了和你一样的问题。就我而言，我在条形图中绘制了 80 个左右的条形立管。以前，我们为每个立管使用一个 UIView（实现了它的 drawRect），后来我决定为每个立管使用 CALayer（不实现它的 drawLayerInContext）来制作动画。条数为 80，我发现 1\. UIView 方法消耗更多内存（因为它在 drawRect 中请求 cgcontext）。2\. UIView 方法具有更好的动画响应能力。在我的例子中，UIE FPS 大约是 60，但 CALayer 大约是 34。

后来，我尝试了一个bar数少的案例（40、30等），GPU压力更小，可以从CALayer动画中得到满意的FPS数。

我想在这里提到的是，当您切换到“每点一层”时，您需要检查动画是否像以前一样流畅。

# php - 如何安装 wkhtmltopdf shell 实用程序？

> ID：10887661
> 
> 赞同：0
> 
> 时间：2012-06-04T20:10:11.030
> 
> 标签：php, installation, wkhtmltopdf, whm

我有一个具有 root 访问权限的专用 WHM / cPanel 服务器。

我正在尝试将 shell 实用程序 (wkhtmltopdf) 安装到 /usr/local/bin/ 以便我可以使用 exec 从 php 中调用它。

我已经掌握了 php 的东西。但我对所有与服务器/系统管理员相关的事情都是全新的。

我已经查看了[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)上的说明- 但这些说明比我目前拥有的知识水平更高。

我想知道是否有人可以帮助向一个完整的新手解释如何安装 wkhtmltopdf。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:58:56.697

取决于您的服务器和系统。你有 root/sudo 访问权限吗？它是一个ubuntu吗？

```
sudo apt-get install wkhtmltopdf 
```

很好地为我安装了它，然后你可以做符号链接来指向可执行文件，但这一切都取决于环境。这是一个广泛的问题，如果您需要更多信息，我会编辑答案，但很难写出这样一个通用的答案，它在任何情况下都可以工作:) 也可以查看[如何在基于 linux 上安装 wkhtmltopdf (共享主机）网络服务器](https://stackoverflow.com/questions/2273534/how-to-install-wkhtmltopdf-on-a-linux-based-web-server)

# search - 使用什么样的过滤器来匹配像 OCallaghan 和 O'Callaghan 这样的东西？

> ID：10887662
> 
> 赞同：3
> 
> 时间：2012-06-04T20:10:11.140
> 
> 标签：search, filter, lucene, elasticsearch

谁能给我指出一个像这样标准化令牌的过滤器？

```
L.A. Reid -> LA Reid
O'Callaghan -> OCallaghan 
```

搜索`LA Reid`将匹配`L.A. Reid`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:50:01.650

您不能在 StandardAnalyzer 的输出上使用过滤器，因为 StandardAnalyzer 会在您的过滤器有机会组合标记之前去除标点符号。

您可以通过修改标准分析器来创建自己的分析器。StandardAnalyzer 使用[JFlex](http://jflex.de/manual.html)创建分词器。源 jflex 文件在[这里](https://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_6_0/lucene/core/src/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex)，我没有尝试过，但你可以更改这一行，

```
ALetter = ([\p{WB:ALetter}] | {ALetterSupp}) 
```

到类似的东西，

```
ALetter = ([\p{WB:ALetter}] | {ALetterSupp} | "." | "'" ) 
```

您还需要更改 jflex 文件中的类名和包声明。完成此操作后，使用 jflex 生成新的分析器。

分析器将生成类似 的标记`L.A.`，因此将分析器的输出传递给[TokenFilter](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/analysis/TokenFilter.html)，从标记中去除特殊字符，查看[ISOLatin1AccentFilter](https://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_6_0/lucene/core/src/java/org/apache/lucene/analysis/ISOLatin1AccentFilter.java)示例代码。

# c++ - C++ Array vs Vector 性能测试说明

> ID：10887668
> 
> 赞同：8
> 
> 时间：2012-06-04T20:10:32.860
> 
> 标签：c++, arrays, performance, vector, benchmarking

为了量化 C++ 中类 C 数组和向量的性能差异，我编写了这个小程序。[https://github.com/rajatkhanduja/Benchmarks/blob/master/C%2B%2B/vectorVsArray.cpp](https://github.com/rajatkhanduja/Benchmarks/blob/master/C%2B%2B/vectorVsArray.cpp)

为了在共同点上比较它们，我决定测试随机访问和顺序访问。我添加了迭代器，只是为了比较它们（但这不是问题的重点）。

结果，对于具有 7.7 GB RAM 且阵列/向量大小为 100 万的 64 位 Linux 机器，结果如下：-

*   写入数组所花费的时间。: 12.0378 毫秒
*   顺序读取数组所花费的时间。: 2.48413 毫秒
*   随机读取数组所花费的时间。: 37.3931 毫秒
*   写入动态数组所需的时间。: 11.7458 毫秒
*   顺序读取动态数组所花费的时间。: 2.85107 毫秒
*   随机读取动态数组所花费的时间。: 36.0579 毫秒
*   使用索引写入向量所花费的时间。: 11.3909 毫秒
*   使用索引顺序读取向量所花费的时间。: 4.09106 毫秒
*   随机使用索引从向量中读取所花费的时间。: 39 毫秒
*   使用迭代器写入向量所花费的时间。: 24.9949 毫秒
*   使用迭代器从向量中读取所花费的时间。: 18.8049 毫秒

向量的大小是在初始化时设置的，不会更改，因此不会调整向量的大小（程序中的断言有助于验证这一点）。该时间不包括任何静态分配的数组、动态分配的数组或向量的初始化时间。

据统计，Vector 的写入时间比array 少，但是vector 的读取时间是array 的2 倍。

差异很小，但是有没有解释为什么会有性能差异？测试有什么问题吗？我希望两者都以相同的速度执行。该测试的重复显示相同的趋势。

编码：

```
#include <vector>
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <sys/time.h>
#include <cassert>

#define ARR_SIZE 1000000

using std::string;

void printtime (struct timeval& start, struct timeval& end, string str);   

int main (void)
{
  int arr[ARR_SIZE];
  int tmp;
  struct timeval start, stop;

  srand (time (NULL));

  /* Writing data to array */
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    arr[i] = rand();
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to write to array."));

  /* Reading data from array */
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = arr[i];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from array sequentially."));

  /* Reading data from array randomly*/
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = arr[rand() % ARR_SIZE];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from array randomly."));

  int *darr = (int *) calloc (sizeof (int), ARR_SIZE);  

  /* Writing data to array */
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    darr[i] = rand();
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to write to dynamic array."));

  /* Reading data from array */
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = darr[i];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from dynamic array sequentially."));

  /* Reading data from dynamic array randomly*/
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = darr[rand() % ARR_SIZE];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from dynamic array randomly."));

  std::vector<int> v(ARR_SIZE);
  assert (v.capacity() == ARR_SIZE);

  /* Writing to vector using indices*/
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    v[i] = rand();
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to write to vector using indices."));
  assert (v.capacity() == ARR_SIZE);

  /* Reading from vector using indices*/
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = v[i];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from vector using indices, sequentially."));

  /* Reading data from dynamic array randomly*/
  gettimeofday (&start, NULL);
  for (int i = 0; i < ARR_SIZE; i++)
  {
    tmp = v[rand() % ARR_SIZE];
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from vector using indices, randomly."));

  std::vector<int> v2(ARR_SIZE);

  /* Writing to vector using iterators*/
  gettimeofday (&start, NULL);
  std::vector<int>::iterator itr, itr_end;
  for (itr = v2.begin(), itr_end = v2.end(); itr != itr_end; itr++)
  {
    *itr = rand();
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to write to vector using iterators."));

  /* Reading from vector using iterators*/
  gettimeofday (&start, NULL);
  for (itr = v2.begin(), itr_end = v2.end(); itr != itr_end; itr++)
  {
    tmp = *itr;
  }
  gettimeofday (&stop, NULL);
  printtime (start, stop, string ("Time taken to read from vector using iterators."));

  return 0;
}

void printtime (struct timeval& start, struct timeval& end, string str)
{
  double start_time, end_time, diff;

  start_time = ((start.tv_sec) * 1000 + start.tv_usec/1000.0);
  end_time   = ((end.tv_sec) * 1000 + end.tv_usec/1000.0);
  diff = end_time - start_time;

  std::cout << str << " : " << diff << " ms" << std::endl;
} 
```

* * *

**编辑**

正如评论中所建议的，这里有更多信息：-

*   编译器：- g++ - 4.5.2
*   标志：- 无（​​即默认值）
*   优化：- 无（​​我想在通常的设置中测试行为。优化可以改变程序的行为，例如，由于变量 tmp 从未使用过，读取向量/数组的步骤可能完全被跳过或减少到只是最后一个任务。至少我是这么理解的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:25:03.247

当然不是一个确定的答案，但是您正在循环中写入变量，这意味着编译器可以轻松猜测顺序读取的最终结果应该是什么，从而优化循环。由于它显然没有这样做，我假设没有任何优化绝对不支持迭代器方法。其他数字太接近了，无法得出结论。

# cocoa - NSTableView makeViewWithIdentifier 跨笔尖

> ID：10887670
> 
> 赞同：8
> 
> 时间：2012-06-04T20:10:44.040
> 
> 标签：cocoa, interface-builder, nstableview, xib, nib

我有一个与[Cocoa - View-Based NSTableView 类似的问题，在多个表格中使用一个单元格](https://stackoverflow.com/questions/8262136/cocoa-view-based-nstableview-using-one-cell-in-multiple-tables)，由 Apple 自己的[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nstableview_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTableView/makeViewWithIdentifier:owner:)放大 `makeViewWithIdentifier:owner:`

> “通常标识符与 Interface Builder 中的外部 NIB 相关联，并且表视图将使用提供的所有者自动实例化 NIB。”

这似乎意味着您应该能够将.`NSTableCellView`与包含`NSTableView`. 但是，在我的实验中，我只能获得包含在我调用它的 tableview 中的单元格。即，如果我将单元格剪切并粘贴到新的 .xib 文件中，则 tableview 将无法再找到它。我做错了什么，或者这实际上是不可能的，我在某种程度上误读了 Apple 的文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T23:59:17.847

用于`- (void)registerNib:(NSNib *)nib forIdentifier:(NSString *)identifier`注册要与单元标识符一起使用的笔尖。

如果它不起作用，您可能是在加载 tableView 数据后注册 nib。使用`[tableView reloadData]`后记来确保这不是时间问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:59:04.573

我刚刚遇到了这个问题，我认为你不能使用**makeViewWithIdentifier:owner:**当你使用专用的 Nib 来填充基于视图的表时。

问题与文件所有者（即视图控制器）有关。**makeViewWithIdentifier:owner:**似乎打算与“self”一起用作简单自定义视图的所有者。

通常，如果您有一个带有插座的自定义视图的单独笔尖，您也将需要一个单独的视图控制器。否则，如果您的自定义视图有一个插座并且表格显示了许多自定义视图，那么您从“自我”表格视图所有者那里指的是哪个插座？

所以在我的测试中，我将 AppDelegate 作为表视图的委托/数据源。我有一个*CellView.xib*和*CellViewController.h/.m*与接口的插座。然后在我的**tableView:viewForTableColumn:row:**委托方法中，我有以下代码：

```
SSCellViewController *vc = [[SSCellViewController alloc] initWithNibName:@"CellView" bundle:nil];
return vc.view; 
```

您失去的是使用 makeViewWithIdentifier:owner: 自动发生的单元重用。要自己实现它，您可能还必须管理您创建的许多视图控制器。

我可能仍然缺少一些东西，因为我在多年只做 iOS 工作之后才开始进行 OS X 开发。

# c# - ASP.Net 尝试在后面的代码中调整 css 时出错

> ID：10887671
> 
> 赞同：0
> 
> 时间：2012-06-04T20:11:00.733
> 
> 标签：c#, asp.net

我在后面的代码中有这段代码：

```
if (Request.QueryString["category"] == "9")
{
    HtmlControl downloadableProducts = (HtmlControl)Page.FindControl("downloadableProducts");
    downloadableProducts.Style.Add("display", "none");
} 
```

它正在生成以下错误：

System.NullReferenceException：对象引用未设置为对象的实例。在第 43 行，这是这个`downloadableProducts.Style.Add("display", "none");`

我的 div 看起来像这样：

```
<div id="downloadableProducts" runat="server">
    <a href="#">Downloadedable Products</a>
</div> 
```

我究竟做错了什么？

如果我从后面的代码中删除这一行：

```
HtmlControl downloadableProducts = (HtmlControl)Page.FindControl("downloadableProducts"); 
```

我收到此错误：

当前上下文中不存在名称“downloadableProducts”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:24:52.223

看起来您的 DIV 是直接在 ASPX 文件 ( `<div id="downloadableProducts" runat="server">`) 中定义的。因此，您根本不需要打电话`FindControl()`。 `this.downloadableProducts`应该让您直接访问控件。

注意：这假设控件是在与代码隐藏相同的类中定义的。例如，您的 DIV 定义在 中`Foobar.aspx`，而您正在编写代码`Foobar.aspx.cs`。（这两个文件组成一个类`Foobar`：）

相反，如果您的 DIV 定义在 中`Fred.ascx`，您将无法直接从`Barney.ascx.cs`文件中访问它。（这两个文件定义了两个不同的类：`Fred`和`Barney`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:22:26.240

由于 downloadableProducts 已经在服务器上运行，您应该可以删除第 42 行。我在下面将其注释掉：

```
if (Request.QueryString["category"] == "9")
{
    //HtmlControl downloadableProducts  = HtmlControl)Page.FindControl("downloadableProducts");
    downloadableProducts.Style.Add("display", "none");
 } 
```

这对我有用...

# ios - NSPredicate - 核心数据 - 比较两个属性

> ID：10887673
> 
> 赞同：5
> 
> 时间：2012-06-04T20:11:16.917
> 
> 标签：ios, xcode, core-data, nspredicate

我有我认为在 Google-verse 上很容易做/找到的事情，但我完全感到困惑。我在 Core Data 中有一个带有两个日期属性设置的对象。我想获取两个日期不相同的对象列表。如何使用 Core Data 做到这一点？

```
[NSPredicate predicateWithFormat:@"dateModified != dateCreated"]; 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-11T13:40:24.027

您使用的格式是搜索键值关系，但两边都有键，`dateModified`并且`dateCreated`. 尝试这样的事情：

```
[NSPredicate predicateWithFormat:@"(dateModified != %@)", someObject.dateCreated] 
```

# iphone - iPhone Safari 上“添加到主屏幕”的 url 可以自定义吗？

> ID：10887676
> 
> 赞同：23
> 
> 时间：2012-06-04T20:11:31.830
> 
> 标签：iphone, ios, mobile, safari, mobile-safari

“添加到主屏幕”显示在网站的所有页面上，我希望 URL 成为保存的主页。

例如在此页面上：http: [//www.domain.com/category/page.html](http://www.domain.com/category/page.html)

“添加到主屏幕”是否可以保存此网址： http: [//www.domain.com](http://www.domain.com)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T00:25:10.233

我找到了一种解决方法。[您可以通过window.navigator.standalone](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)检测到您是从主页启动的，并且基于该潜在重定向。

另外，我做了一些测试，发现在最新的 iOS 上，不同的用户代理会报告给服务器，这开启了更快重定向的可能性。我找不到任何关于这种情况是否一直如此的信息。

从主页启动：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) 
AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A523 
```

移动Safari：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) 
AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A523 Safari/8536.25 
```

如果您的页面通过 AJAX 获取大部分内容，或者您​​注意到服务器上存在不同的用户代理，则可能会跳过重定向并“就好像”您在另一个 URL 上一样，因为在独立模式下，该 URL 是不可见的反正。我正在调查这件事，但还没有说清楚它是否会烧伤你。

另请注意，用户选择标记为应用程序的 URL 可能是有意义的，但我将把它留给您自己的 UX 判断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-13T09:57:32.813

WrightsCS 和 svachalek Answers 的组合 - 您不能将远程页面添加到主屏幕，但是，您可以在页面添加到主屏幕后重定向该页面。

您需要做的就是使用这个简单的 javaScript：

```
if ("standalone" in window.navigator && window.navigator.standalone){ //checks if you're in app mode

  window.location = 'http://www.domain.com';  //the URL you want to refer to.

} 
```

确保将此 html 代码添加到您的页面：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:32:00.310

不，如果没有越狱*（据我所知，没有任何东西可以实现这一点）*，就无法编辑实际的 URL。

Apple 至少出于我能想到**Security**的一个原因限制了这一点。编辑 URL 将允许人们使用 javascript，这将不可避免地导致恶意软件。

# objective-c - 无法识别的选择器发送到类 0x89e40

> ID：10887677
> 
> 赞同：-1
> 
> 时间：2012-06-04T20:11:39.813
> 
> 标签：objective-c, ios

我的应用程序因错误而崩溃：+ [AccountService createMockAccountData] 无法识别的选择器已发送到类 0x89e40 ..请告知我该如何解决此错误？我是 Objective C 的新手。这是我的代码：

```
@interface AccountService : NSObject
+ (NSMutableArray *)accounts: createMockAccountData;
@end

#import AccountService.h"
@implementation AccountService
+(NSMutableArray *)accounts: createMockAccountData{
    NSMutableArray * accounts = [[NSMutableArray alloc] init];
    UserAccount *mockUserAccount1 = [[UserAccount alloc] init];
    *mockUserAccount1 setName:@"Stella"];
    [accounts addObject:mockUserAccount1];
    UserAccount *mockUserAccount2  = [[UserAccount alloc] init];
    [mockUserAccount2 setName:@"Marko"];
    [accounts addObject:mockUserAccount2];
    [mockUserAccount1 release];
    [mockUserAccount2 release];
    return accounts;
} 
```

……

在我的控制器中......我正在调用这个类方法，如下所示：

```
NSMutableArray *accounts = [AccountService createMockAccountData];
NSUInteger count = [accounts count];
NSLog(@"# of records = %d",count); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:15:23.843

改变

```
+(NSMutableArray *)accounts: createMockAccountData{ 
```

到

```
+(NSMutableArray *)createMockAccountData{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:14:38.283

你的语法搞砸了。方法标头如下所示：

```
 - (return type)name:(parameter type)parameterName 
```

# android - 网页左侧在 Android 手机上被截断，但在 Chrome、Safari 和 Firefox 上看起来不错

> ID：10887679
> 
> 赞同：0
> 
> 时间：2012-06-04T20:12:01.263
> 
> 标签：android, html, css

我的网站[http://scissormanmusic.com/](http://scissormanmusic.com/)在我的机器人上查看时令人难以置信，它显示左侧 200(ish)px 被切断。但是，当我在 Firefox、Safari 或 Chrome 等台式机/笔记本电脑网络浏览器上查看它时，不会发生截断。我不知道为什么。解决此问题的最佳方法是什么。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title> || ScissormanMusic.com || </title>

<script language="javascript">
function simplePreload()
{ 
  var args = simplePreload.arguments;
  document.imageArray = new Array(args.length);
  for(var i=0; i<args.length; i++)
  {
    document.imageArray[i] = new Image;
    document.imageArray[i].src = args[i];
  }  
}
simplePreload( 'news.png','newsRO.png','beats.png','beatsRO.png','music.png','musicRO.png','contact.png','contactRO.png','links.png','linksRO.png','scissorsHeader.png','scissorLeftLeftHeader.png','facebook.png','twitter.png','leftHeader.png','rightHeader.png' ); 
</script>

<style type="text/css">
a:link {color:#222229; text-decoration:none; border:none;}
a:visited {color:#222229; text-decoration:none; border:none;}
a:hover {color:#222229; text-decoration:underline; border:none;}
a:focus {color:#222229; text-decoration:none; border:none;}
a:active {color:#222229; text-decoration:none; border:none;}
html {
    background-color:#222229;
    margin:auto;
}
body {
    background:#222229;
    margin:0;
}   
#scissorsHeader{
    position:fixed center center;
}
#headerLeft {
    position:relative;
    right:408px;
    bottom:347px;
}
#headerLeftLeft {
    position:relative;
    right:640px;
    bottom:765px;
}
#headerRight {
    position:relative;
    left:344px;
    bottom:450px;
}
#twitter {
    position:relative;
    left:573px;
    bottom:907px;
}
#facebook {
    position:relative;
    left:573px;
    bottom:914px;
}
#leftMenu {
    position:relative;
    left:186px;
    bottom:451px;
    width:700px;
}
#rightMenu {
    position:relative;
    left:942px;
    bottom:524px;
    width:700px;        
}
#leftFrame {
    position:relative;
    right:450px;
    bottom:900px;
    z-index:3;  
    width:800px;
    height:2000px;
}
#rightFrame {
    position:relative;
    left:472px;
    bottom:2900px;
    z-index:4;  
    width:800px;
    height:2000px;  
}
#menuContainer {
    position:relative;
    right:600px;
}
#everything{
    position:relative;
    left:150px; 
}
</style>

</head>
<body>
<div id="everything" align="center">
<div id="scissorsHeader" align="center"><img src="scissorsHeader.png"/></div>

<div id="headerLeft" align="center"><img src="headerLeft.png"/></div>
<div id="headerRight" align="center"><img src="headerRight.png"/></div>

<div id="menuContainer" align="center">

<div id="leftMenu" align="center">

<a href="news.html" target="leftFrame">
<img name="news" src="news.png" 
onmouseover="document.news.src='newsRO.png'" 
onmouseout="document.news.src='news.png'"/>
</a>

<a href="beats.html" target="leftFrame">
<img name="beats" src="beats.png" 
onmouseover="document.beats.src='beatsRO.png'" 
onmouseout="document.beats.src='beats.png'"/>
</a>

<a href="music.html" target="leftFrame">
<img name="music" src="music.png" 
onmouseover="document.music.src='musicRO.png'" 
onmouseout="document.music.src='music.png'"/>
</a>
</div>

<div id="rightMenu" align="center">
<a href="contact.html" target="rightFrame">
<img name="contact" src="contact.png" 
onmouseover="document.contact.src='contactRO.png'" 
onmouseout="document.contact.src='contact.png'"/>
</a>

<a href="links.html" target="rightFrame">
<img name="links" src="links.png" 
onmouseover="document.links.src='linksRO.png'" 
onmouseout="document.links.src='links.png'"/>
</a>
</div>
</div>

<div id="headerLeftLeft" align="center"><img src="scissorLeftLeftHeader.png"/></div>
<div id="facebook" align="center"><a href="http://www.facebook.com/scissormanmusic"     target="_new"><img src="facebook.png"/></a></div>
<div id="twitter" align="center">
<a href="http://www.twitter.com/scissormanmusic" target="_new"><img src="twitterLogo.png"/></a></div>

<br /><br /><br /><br /><br />

<div align="center">
<iframe src="news.html" name="leftFrame" id="leftFrame" style="border:hidden" scrolling="no"></iframe>
</div>

<div align="center">
<iframe src="contact.html" name="rightFrame" id="rightFrame" style="border:hidden" scrolling="no"></iframe>
</div>

</div>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:33:04.570

你有 CSS 的问题。试试这个：（覆盖你的代码所需的）

```
#leftFrame {
    position:relative;
    right:400px; /*change here any value*/
    bottom:900px;
    z-index:3;  
    width:800px;
    height:2000px;
} 
```

此外，您可能希望在另一个文件（例如 style.css）上使用此 CSS，而不是内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:05:22.517

如果不给出固定定位，您可以尝试给出一个`margin`，如果您坚持使用固定定位，那么您会尝试使用`media query`来检测视口宽度，然后给出不同的`right`定位吗？

# ajax - Grails - 选择框绑定到对象 ID 和远程字段

> ID：10887680
> 
> 赞同：0
> 
> 时间：2012-06-04T20:12:08.063
> 
> 标签：ajax, grails

遇到一个越来越令人沮丧的奇怪问题

场景：我有一个域对象列表，每个对象都有 ag:select 附加到它，由远程字段呈现。

如何将状态变量或 personInstance ID 绑定到选择框，以便在使用 renderField 时更新 testDiv_(number)

看法：

```
<g:each in="${listOfPeople}" status="i" var="personInstance">
<td>
    Text: <g:remoteField action="getResults" controller="person" id="" update="testDiv_${personInstance.id}" paramName="search" name="getResults" value="" />
    <g:each in ="${personInstance?.choices}" var="choice" status="x">
        <li>${choice}</li>
    </g:each>
</td>
<td>
    <g:render template="renderThisTemplate"></g:render>
</td>
</g:each> 
```

模板：

```
<div id="testDiv_${personInstance.id}" class="testDiv_${personInstance.id}">
    <g:select id="aChoice" name="aChoice.id" from="${allChoices}" optionKey="id" value="" />
    <g:actionSubmit action="addChoice" value="Add"/>
</div> 
```

**编辑**

我知道远程调用 (ajax) 正在传递 testDiv_(number) 的更新。问题在于模板 ID 并将该值分配给模板 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:42:48.237

以防将来有人需要这个答案。显然，您不能从模板中引用 g:each 中的实例变量 (personInstance)。

所以我用它的代码替换了 g:render 并且它起作用了：

```
<g:each in="${listOfPeople}" status="i" var="personInstance">
<td>
    Text: <g:remoteField action="getResults" controller="person" id="" update="testDiv_${personInstance.id}" paramName="search" name="getResults" value="" />
    <g:each in ="${personInstance?.choices}" var="choice" status="x">
        <li>${choice}</li>
    </g:each>
</td>
<td>
<div id="testDiv_${personInstance.id}" class="testDiv_${personInstance.id}">
    <g:select id="aChoice" name="aChoice.id" from="${allChoices}" optionKey="id" value="" />
    <g:actionSubmit action="addChoice" value="Add"/>
</div>
</td>
</g:each> 
```

# asp.net-mvc - 是否可以在不创建另一个 Web 应用程序项目的情况下将我的管理部分与常规网站分开？

> ID：10887681
> 
> 赞同：0
> 
> 时间：2012-06-04T20:12:10.157
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我使用 asp.net mvc3 构建了我的 Web 应用程序。我需要添加管理页面来监控和管理所有用户帐户及其帖子。

现在，管理员和常规网站位于同一个 Web 应用程序中。如果我只对管理页面做了一点改动，我仍然需要编译所有内容。这是一种将它们分开的方式，所以我只需要上传管理员而不接触网站。我能想到的唯一解决方案是创建另一个网络应用程序。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:44:20.590

您可以将您的 mvc 应用程序分成多个区域 [http://msdn.microsoft.com/en-us/library/ee671793.aspx](http://msdn.microsoft.com/en-us/library/ee671793.aspx) 区域可以帮助您更好地组织您的应用程序，它不会只部署该区域，但是 VS2010 确实有一些好处部署功能。她的文章很好 [http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

# tumblr - Tumblr AVATAR API 抓取

> ID：10887683
> 
> 赞同：0
> 
> 时间：2012-06-04T20:12:11.077
> 
> 标签：tumblr

我正在做一个网站，我希望我的访问者发表评论，但我不想显示典型的 gravatar，我只想通过输入他们的 URL 来显示他们的 tumblr 头像。

看，我正在使用 wordpress，有一个插件，但它仅适用于 twitter。

有谁知道我需要改变什么才能使其适用于 tumblr？

该插件名为 Twitter Avatar 重载

我试图更改 tumblr API 但 id 没有用，或者有人知道另一种方法吗？

我有点绝望，我只想像在这个网站[tumblrplug.com中一样抓住 tumblr 头像](http://tumblrplug.com)

谢谢我真的很感激任何解决方案！

在这里你可以看到插件

[http://wordpress.org/extend/plugins/twitter-avatar-reloaded/](http://wordpress.org/extend/plugins/twitter-avatar-reloaded/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:17:45.963

您是否尝试过致电：

```
http://api.tumblr.com/v2/blog/david.tumblr.com/avatar 
```

查看此文档以获取更多信息 - [http://www.tumblr.com/docs/en/api/v2#blog-avatar](http://www.tumblr.com/docs/en/api/v2#blog-avatar)

# iphone - 多个 alertViews 创建错误

> ID：10887684
> 
> 赞同：2
> 
> 时间：2012-06-04T20:12:11.050
> 
> 标签：iphone, ios, xcode, error-handling, uialertview

您好，下午好，我在这里遇到了一些问题，老实说，我不明白我必须为具有不同消息的同一屏幕创建不同的警报视图，这些警报中的大多数只有 1 个按钮，但是有这个删除需要 2 个按钮的问题是，由于其他按钮只有 1 个按钮，所以当我创建 2 个按钮屏幕视图并添加 (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 方法时，我有一些问题

这里有一些代码

```
- (IBAction)saveInfo{
if (med.text.length ==0) {
    UIAlertView *alertViewError = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"ERROR",@"")
                                                        message:NSLocalizedString(@"EMPTY1",@"") 
                                                       delegate:self 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles: nil];
    [alertViewError show];
    [alertViewError release];
}
else if(medicamento.text.length >= 41){
    [self lenghtError:40:NSLocalizedString(@"TF_MED",@"")];
}
else if (med.text.length ==0 || descripcion.text.length == 0) {
    UIAlertView *alertViewError = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"ERROR",@"")
                                                        message:NSLocalizedString(@"EMPTY2",@"") 
                                                       delegate:self 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles: nil];
    [alertViewError show];
    [alertViewError release];
}
else if (descripcion.text.length >= 41){
    [self lenghtError:40:NSLocalizedString(@"TF_DESCRIPCION",@"")];
}
else{
    [self insertDictionary];
    UIAlertView *alertViewAcept = [[UIAlertView alloc] initWithTitle:@"" 
                                                        message: NSLocalizedString(@"ACCEPT_MSG",@"")
                                                       delegate:self 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles: nil];
    [alertViewAcept show];
    [alertViewAcept release];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

}

```
- (IBAction)cancelData{
UIAlertView *alertViewCancel = 
[[UIAlertView alloc] initWithTitle: NSLocalizedString(@"BT_DELETE_MED",@"")
                    message: NSLocalizedString(@"MSG_DELETE_MED",@"")
                   delegate:self 
          cancelButtonTitle:@"OK" 
          otherButtonTitles: @"Cancel", nil];
[alertViewCancel setTag:999];
[alertViewCancel show];
[alertViewCancel release]; 
```

}

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if (alertView.tag == 999) {
    if(buttonIndex==0){
        [self.Bayer_DB_obj deleteRowWithKeyValue:[NSString stringWithFormat:@"%d",IdMed] onKeyName:@"id_ctl_med" onTable:@"ctl_med"];
        // code to delete here
        [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

}

因此，在第一部分中，我创建了一些警报以指示用户他/她犯了错误，在第二部分中，我需要在删除之前进行确认，但是在这里，我需要 2 个按钮，然后，在第三部分中，我有被调用的方法，我在我的警报中添加了一个标签以避免在所有警报中进行这种比较，问题是，当您显示 alertViewAcept 时，它会将您带到上一个视图控制器，然后单击确定按钮（实际上是取消按钮标题）应用程序崩溃而没有任何“错误消息”

所以我不确定我做错了什么，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:21:42.263

我猜问题是您为 alertViewAcept 设置了委托，并且在显示警报后立即弹出 viewController，因此您的委托将被释放，一旦单击警报视图上的按钮，就会给您一个错误.

你应该做这个：

```
UIAlertView *alertViewAcept = [[UIAlertView alloc] initWithTitle:@"" 
                                                        message: NSLocalizedString(@"ACCEPT_MSG",@"")
                                                       delegate:nil 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles: nil]; 
```

更好的是，所有只有 OK 按钮的警报都不需要委托。在这种情况下，您甚至不需要标签。

# objective-c - 隐藏另一个 NSButton 的简单 NSButton

> ID：10887685
> 
> 赞同：1
> 
> 时间：2012-06-04T20:12:21.573
> 
> 标签：objective-c, macos, cocoa, button, nsbutton

我有 2 个 NSButton，两个 IBAction。当我单击其中一个按钮时，我希望隐藏另一个按钮。我可以让他们隐藏自己，但我不知道如何隐藏另一个。我对此的实际实现是有一个“开始”按钮，该按钮在用户完成某些任务之前是隐藏的，然后在其他对象被隐藏的情况下再次显示。

谢谢你的帮助！

```
@interface Label : NSObject 
{
    IBOutlet NSTextField *myTextField;
}

-(IBAction)btnTest1:(id)sender;
-(IBAction)btnTest2:(id)sender;

-(IBAction)btnTest1:(id)sender
{
    myTextField.stringValue = @"You selected the 1st Button";

    NSButton *tempButton = sender;
    [tempButton setHidden:YES];
}

-(IBAction)btnTest2:(id)sender
{
    myTextField.stringValue = @"You selected the 2nd Button";

    NSButton *tempButton = sender;
    [tempButton setHidden:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:16:46.010

```
@interface Label : NSObject 
{
    IBOutlet NSTextField *myTextField;
    IBOutlet NSButton *btn1;
    IBOutlet NSButton *btn2;
} 
```

在方法中：`[btn1 setHidden: YES]`对于 btn2 相同。

# jsf-2 - 如何在运行时初始化 jsf 2.0 文本字段？

> ID：10887686
> 
> 赞同：2
> 
> 时间：2012-06-04T20:12:29.320
> 
> 标签：jsf-2, primefaces, runtime, seam3

我想在运行时初始化我的文本字段。例如，我有这样的primefaces inputtext：

```
<p:inputText value="#{myBean.value}" id="inputText" /> 
```

还有一个豆类：

```
@PostConstruct
public void onPageLoad() {
    ....
    ....
    inputText.setMaxlength(15);
    inputText.setStyle(".....");
} 
```

jsf 2.0可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:35:15.730

You could do so by binding the component to the bean:

```
<p:inputText binding="#{bean.input}" ... /> 
```

with

```
private InputText input; // +getter+setter

@PostConstruct
public void init() {
    input = new InputText();
    input.setMaxlength(15);
    input.setStyle("background: pink;");
}

// ... 
```

This is however not the recommended approach. You should rather bind the individual attributes to a bean property instead.

```
<p:inputText ... maxlength="#{bean.maxlength}" style="#{bean.style}" /> 
```

with

```
private Integer maxlength;
private String style; 

@PostConstruct
public void init() {
    maxlength = 15;
    style = "background: pink;";
}

// ... 
```

Even more, if your app is well designed, then you should already have such a bean object for this (why/how else would you like to be able to specify it during runtime?). Make it a property of the managed bean instead so that you can do something like:

```
<p:inputText ... maxlength="#{bean.attributes.maxlength}" style="#{bean.attributes.style}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:10:37.727

为此，您可以使用以下代码从 jsf 框架中获取组件对象

```
UIComponent componentObj = FacesContext.getCurrentInstance().getViewRoot().findComponent(id) 
```

然后您可以在标签组件类型中键入 cast 组件对象，就像您使用 inputText 一样

```
HtmlInputText inputTextObj = (HtmlInputText) componentObj; 
```

和 HtmlInputText 类具有标签中所有可用属性的所有 getter 设置器，因此您可以设置诸如

```
inputTextObj.setMaxlength(15);
inputTextObj.setStyle(....);
inputTextObj.setDisabled();
inputTextObj.setReadonly(); 
```

# php - PHP 地图投影

> ID：10887692
> 
> 赞同：0
> 
> 时间：2012-06-04T20:12:50.467
> 
> 标签：php, proj

我已经用谷歌搜索了自己。我正在尝试编写 2 个 php 函数，它们将在墨卡托和平面非投影（网格）地图中从纬度和经度返回 X 和 Y。问题是我遇到的每个计算都假设您的地图在拐角处具有相同的纬度和经度，然后结果以米为单位。啊

这就是我所拥有的 .. 4 个角落的不同尺寸、不同纬度、经度的地图。我下载了 Proj4 php 端口，但是由于零文档和我需要的更多代码，我不知所措...

帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:54:54.190

这假定您的纬度/经度坐标是十进制值，并且不会在地图的可见范围内从北/南或东/西改变方向。如果是这样，这些值应保持为单一格式，并设为负值（例如：1.0 S 将变为 -1.0 N）

首先，您将设置以下变量，或者使用 PHP 查找它们，或者如果您已经在脚本中知道它们：

```
$width=//width of image
$height=//height of image

$long_at_left=//Longitude of left-hand coordinates
$long_at_right=//Longitude of right-hand coordinates
$lat_at_left=//Latitude of left-hand coordinates
$lat_at_right=//Latitude of right-hand coordinates

$target_long=//Longitude you want to find
$target_lat=//Latitude you want to find 
```

然后使用：

```
$xtarget=$target_long-$long_at_left;
$ytarget=$target_lat-$lat_at_top;

$xdist=$long_at_left-$long_at_right;
$ydist=$lat_at_top-$lat_at_bottom;

$x=round(($xtarget/$xdist)*$width); //Percentage of distance times width
$y=round(($ytarget/$ydist)*$height); //Percentage of distance times height 
```

或者那种形式的东西应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T18:28:02.160

上一个答案中的比例方法不起作用。墨卡托投影是非常非线性的。

以下是我将生成的图像叠加到 Google 或 Bing 地图上的方法。就我而言，我正在创建一个将作为叠加层的多边形的 GD 图像。在 GD 库中处理多边形比地图提供程序 API 快得多。

首先，设置从标准纬度经度到 WGS84 投影的比例。度数以米为单位的墨卡托 xy 坐标。

[http://gisgeography.com/wgs84-world-geodetic-system/](http://gisgeography.com/wgs84-world-geodetic-system/)

// $minlat = 最小图像纬度

// $minlon = 最小图像经度

// $maxlat = 最大图像纬度

// $maxlon = 最大图像经度

// $latbounds = 图像高度（以像素为单位）

// $lonbounds = 图像宽度（以像素为单位）

```
$lonrange = abs($maxlon - $minlon);
$WGS84min = log(tan((90.+$minlat)*M_PI/360.))/(M_PI/180.);
$WGS84min = (int) ($WGS84min * 2037598.34/180);
$WGS84max = log(tan((90.+$maxlat)*M_PI/360.))/(M_PI/180.);
$WGS84max = (int) ($WGS84max * 2037598.34/180);
$WGS84diff = $WGS84max - $WGS84min;
$WGS84factor = $latbounds/$WGS84diff; 
```

然后对于每个纬度/经度，我想计算图像上的实际 XY 坐标。

// $lon1 = 要转换为图像坐标的点的经度

// $lat1 = 要转换为图像坐标的点的纬度

X 很简单

```
$x = (int) ((abs($lon1-$minlon)/$lonrange)*$lonbounds); 
```

Y有点难，先计算到WGS84，然后映射到图像。最后一步，反转 Y 坐标，因为显示顺序是倒置的。

```
$y1 = log(tan((90.+$lat1)*M_PI/360.))/(M_PI/180.);
$y1 = $y1 * 2037598.34/180;
$y1 = (int) (($y1- $WGS84min)*$WGS84factor);
$y  = $latbounds - $y1; 
```

图像文件完成后，使用 GD 保存图像，然后使用 API 库中的示例显示您的叠加层。

[https://developers.google.com/maps/documentation/javascript/examples/overlay-simple](https://developers.google.com/maps/documentation/javascript/examples/overlay-simple)

# iphone - Cocos2D 场景释放

> ID：10887700
> 
> 赞同：4
> 
> 时间：2012-06-04T20:13:50.520
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

场景的`dealloc`方法究竟是什么时候调用的？`Cocos2D`就在加载另一个场景时？还是在场景加载完成后？
此外，如果我打算覆盖它，dealloc 方法中必须包含什么？
显然，`cocos2D`当场景被解除分配时，会自动删除附加到场景的所有节点。但是，如果我打算覆盖它，具体我必须调用哪些方法？那么如何管理我的场景以确保它们 100% 无泄漏？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:33:02.590

您在场景类中分配的每个未作为子对象添加到场景中的对象都必须显式释放。

`replaceScene`当您用另一个场景对象替换它（使用该方法）或从场景堆栈中弹出它时，会释放一个场景（如果您没有将其保留在其他地方，则大多数情况下会释放它） 。

始终建议查看源代码（其中包含非常有用的注释）并了解如果您自定义场景类应该做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:40:52.853

CCScene 的释放器遵循与任何其他对象相同的规则。当对 CCScene 的引用计数达到零时，它将运行。

默认情况下，一个场景不关心另一个即将替换它的场景，但是如果您使用过渡更改场景，则会有一段时间同时存在两个场景。当过渡结束时，过渡将释放它对第一个场景的引用，这可能是最后一个这样的引用，然后第一个场景将被释放。

在您的场景释放器中，放置一个 CCLOG 以准确查看它何时运行。我在每个中放了一个以确保。

`alloc`通常，手动释放您使用以、`new`或开头的方法创建的任何对象`copy`，无论它是否为 Cocos2D 对象或其他对象。其他创建方法，例如 Cocos2D `node`，不需要手动释放，除非您`retain`自己也手动选择了对象，如果您不打算立即将其作为子节点添加到另一个节点，这可能是可取的。

正如您所说，将一个节点作为子节点添加到另一个节点并不意味着它需要额外的`release`; Cocos2D 会处理那个。

# php - 使用单个 XPath 查询检索（关联）两个单独的标签/属性？

> ID：10887705
> 
> 赞同：1
> 
> 时间：2012-06-04T20:14:28.023
> 
> 标签：php, xpath, xml-parsing, domdocument

我正在 Xpathing 我拥有的 DOMDocument 文件。这个domdocument的一般模式如下：

```
<h2> Title info </h2>
<div> .... </div>
<p> ...</p>
<div class = format_text> 
  <p> 
    <a href= "http://link..."><img src = "http://sourceofimageOnline.com"></a>
  </p>
</div>
<h2> 2nd title</h2>
<div> .... </div>
<p> ...</p>
<div class = format_text> 
  <p> 
    <a href= "http://link..."><img src = "http://sourceofimageOnline.com"></img></a> 
    <a href = "http://linkanother.."><img src = "http://sourceofimageonline.com"</img></a>
  </p>
</div> 
```

关键是返回超链接图像的标题和 src 属性。本质上，我将其渲染为：

标题 1 图像 URI 1 标题 2 图像 URI 2 图像 URI 3 ... ..

现在可以使用以下方法轻松检索标题

```
DomDocument->getElementsByTagNames('h2') 
```

并且 img src 由 XPATH 查询检索：

```
//div[@class = "format_text"]/p/a/img/@src 
```

这将返回我需要的所有信息。但是，我试图让 img src 与它们所属的标题相关联，这给我带来了挑战。由于它们是独立检索的，因此我无法理解我需要执行哪种 Xpath 查询来检索它们以满足上述约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:19:20.173

1.  使用 XPath 表达式获取数组`/html/body//h2`
2.  用另一个 XPath 表达式迭代这个数组
3.  参考当前`h2`的`.`和参考第一个链接

    `./../div[@class='format_text']/p/a[$counter]/img`

XPath 表达式 其中`$counter`是数组 id。

# c++ - 为什么 C++ 类没有像 Java 中的类那样的访问说明符？

> ID：10887721
> 
> 赞同：1
> 
> 时间：2012-06-04T20:15:36.683
> 
> 标签：c++, class, privileges

我是 C++ 新手，我熟悉 Java。当我开始查看 C++ 代码时，我首先想知道的是类本身（不是成员）没有访问说明符，例如`private`,`protected`和`public`. [这里](http://www.cplusplus.com/doc/tutorial/classes)和[这里](http://www.cplusplus.com/doc/tutorial/classes2)的例子。

```
public class A { // This line.
  private class B { } // Not this line.
} 
```

为什么呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T20:20:23.800

在类级别没有访问修饰符，因为该语言没有**包**的概念。但是在数据成员，成员函数和继承级别上有：

```
class Foo {};
class Bar : public Foo {

 public:
  void bar() const {}
 private:
  int bar_(float) {}
  int a, b, c;

}; 
```

最接近的方法是在类中声明嵌套类：

```
class Foo {

  struct Bar0 {
    void bar0() const {}
  };
  struct Bar1 {
    Bar0 b0;
    Bar1() { b0.bar0();}
  };

}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T20:17:43.617

不需要类级别的访问说明符。如果你想要一个`private`类，你可以在实现文件或匿名中定义它`namespace`。这种限制是在 C++ 的文件级别完成的（即你如何组织你的头文件，预处理器指令）。

编辑前：

他们这样做，但他们不是*per-method*。此外，类具有默认`private`说明符，因此，除非另有说明，否则它们是`private`.

```
class A
{
   void foo(); //private
};
class B
{
   void foo();  //private
public:
   void foo1(); //public
   void foo2(); //public
protected:
   void foo3(); //protected
private:
   void foo4(); //private
}; 
```

**注意 1** C++ 也有`struct`，它与 a 相同，`class`但默认访问级别是`public`.

**注 2** C++中没有*包范围*。在 Java 中，`protected`提供对整个包的访问权限，在 C++ 中，它只提供对派生类的访问权限。

**注3**关键字`friend`可以用来绕过限制，查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:17:50.677

C++ 使用稍微不同的语法，其中访问修饰符是为声明组而不是单独指定的：

```
class Test {
  class MyPrivateClass {
    // ...
  };

  void privateByDefault();

public:
  void myPublicFunction();
  void anotherPublicFunction();

private:
  void myPrivateFunction();

public:
  class MyPublicClass {
    // ...
  };

  void morePublicFunctions();

protected:
  // ...
}; 
```

`Test::MyPrivateClass`在 之外无法访问`Test`，而`Test::MyPublicClass`可以在任何地方使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-04T20:20:13.567

从您的来源：[http ://www.cplusplus.com/doc/tutorial/classes](http://www.cplusplus.com/doc/tutorial/classes)

> 类的私有成员只能从同一类的其他成员或他们的朋友访问。受保护的成员可以从它们的同一个类的成员和它们的朋友访问，也可以从它们的派生类的成员访问。最后，公共成员可以从对象可见的任何地方访问。

# c# - 在 Outlook 2007 中显示 WebView

> ID：10887723
> 
> 赞同：1
> 
> 时间：2012-06-04T20:15:46.713
> 
> 标签：c#, vsto, outlook-addin

我正在使用 Addin Express 2010，并希望在用户单击文件夹时开发 Web 窗格视图。

我可以在 Outlook 2003 中做到这一点。

![在此处输入图像描述](../Images/9198d288ff733f4f9bedc2b78a85c082.png)

对于 Outlook 2007，相同的安装程序不会显示相同的视图。对 Addin Express 的一年技术支持已过期，因此我无法将其发布到他们的论坛。

然后我查看了 Outlook 对象模型并将 WebView 设置为 true，但我仍然看不到 webpane。

[在Outlook 2010 add-in build custom WebViewPane without add-in Express 中](https://stackoverflow.com/q/9172764/102062)有一个类似的问题。但就我而言，我有 Addin Express 2010 和 Outlookspy。

关于如何显示 webview 的任何想法都可以在 Outlook 2007 / Outlook 2010 中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:09:11.700

所以我正在回答我自己的问题。

原因可在此处找到 -[您无法在 Outlook 2007 的“主页”选项卡上的“地址”框中添加 URL](http://support.microsoft.com/kb/923933)。

我已经更改了注册表项，这是 Outlook 2007 中的屏幕截图。

![在此处输入图像描述](../Images/e567668bf923aef34fc1dfe61ddfc63e.png)

# asp.net-mvc - T4MVC 如何排除单个文件

> ID：10887728
> 
> 赞同：2
> 
> 时间：2012-06-04T20:16:33.187
> 
> 标签：asp.net-mvc, asp.net-mvc-3, t4mvc

有没有办法从 T4MVC 中排除某些控制器或单个文件？

# algorithm - SPOJ WATER：开发 BFS 算法

> ID：10887734
> 
> 赞同：1
> 
> 时间：2012-06-04T20:17:09.233
> 
> 标签：algorithm, breadth-first-search

我正在尝试从 SPOJ 解决以下问题：

> 在包含 n *m 个场*的矩形网格上，放置 n m 个长方体，每个场上一个长方体。每个长方体的底面覆盖一个区域，其表面积等于一平方英寸。相邻场上的长方体彼此紧密相连，以至于它们之间没有间隙。一场大雨倾盆而下，在一些地方出现了水坑。
> 
> **任务**
> 
> 编写一个程序：
> 
> *   从标准输入中读取棋盘的大小和放置在场上的长方体的高度
> *   计算最大水量，雨后可能聚集在水坑中
> *   将结果写入标准输出。
> 
> **输入**
> 
> 测试用例的数量 t 在输入的第一行，然后是 t 个测试用例，以空行分隔。在每个测试用例的第一行，写入两个正整数 1 <= n <= 100, 1 <= m <= 100。它们是网格的大小。在以下 n 行的每一行中，有 m 个来自区间 [1..10000] 的整数；第 j 行中的第 i 个数字表示长方体的高度，以英寸为单位，放在第 i 列和第 j 个棋盘上的场地上。
> 
> **输出**
> 
> 你的程序应该为每个案例写一个等于最大水量的整数（以立方英寸为单位），它可能会聚集在结构上的水坑中。
> 
> ```
> Example
> 
> Sample input:
> 1
> 3 6
> 3 3 4 4 4 2
> 3 1 3 2 1 4
> 7 3 1 6 4 1
> 
> Sample output:
> 5 
> ```

我正在使用 BFS 来添加从边界元素流入水坑的水量（如果找到任何路径）。但我无法处理水坑可能像两个连续的长方体的情况。任何人都可以帮我处理这个案子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:51:52.070

这是我对这个问题的回答。为方便起见，我假设索引从 (1,1) 到 (M,N)

正如您可以想象的水流一样，水只能从较高的长方体流向较低的长方体（没有反向方向，即来自较低长方体的水会撞到较高长方体的壁并停在那里）。

所以我们构建图 G = (V,E) 使得 V 是 M x N 个顶点，即矩阵上的长方体。当 height(i) >= height(j) 并且（i 和 j 物理连接）时，边缘连接（仅 1 路）将长方体 i(th) 连接到长方体 j(th)

所以问题只是一个简单的 BFS。

顺便说一句，我发现另一个也解决了这个问题。请看一下

[http://www.spojsolutions.com/212-water-among-cubes/](http://www.spojsolutions.com/212-water-among-cubes/)

# php - 使用 .htpasswd 文件进行 HTTP 身份验证

> ID：10887735
> 
> 赞同：0
> 
> 时间：2012-06-04T20:17:09.413
> 
> 标签：php, apache, .htpasswd

PHP 提供了使用[HTTP-Authentication](http://php.net/manual/en/features.http-auth.php)的可能性。

但是，很难使用 .htpasswd 文件。

有一些脚本可以检查 php 中的 .htpasswd 文件（例如[这个](http://koivi.com/php-http-auth/)）。但是，这些脚本非常复杂，并且其中大多数不支持所有相关的加密类型（例如 MD5，这是程序[htpasswd](http://httpd.apache.org/docs/2.2/programs/htpasswd.html)使用的默认值）。

使用标准的 .htaccess 文件会容易得多（只是`AuthUserFile <.htpasswd-file>`需要）。

但是，我想避免使用显式的 .htaccess 文件并改用 php。

有没有一种*简单*的方法可以使用 php 检查 .htpasswd 文件？php 是否可以“询问”apache 是否应该授予访问权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:15:49.180

我怀疑是否有直接的方法要求 apache 验证用户，但几乎没有解决方法：

1.  为自己实现缺失的算法：[APR1-MD5](http://www.php.net/manual/en/function.crypt.php#73619) , [SHA](https://stackoverflow.com/a/39963/258674)
2.  使用 with`shell_exec("htpasswd -nb $user $password")`生成哈希并签入 .htpasswd 文件
3.  在使用 .htpasswd 文件对其进行身份验证和执行 curl 调用（使用用户凭据）的内部接口上设置虚拟服务器，检查响应标头（200 表示已授权，4xx 表示未授权）

# javascript - 如何阻止下拉菜单上升？

> ID：10887742
> 
> 赞同：3
> 
> 时间：2012-06-04T20:17:23.577
> 
> 标签：javascript, html, css, drop-down-menu, selector

对于大多数屏幕尺寸，我有一个位于页面顶部的下拉菜单，但在较小的屏幕上，例如笔记本电脑，菜单位于屏幕中间，因此，下拉列表位于选择器上方. 我想要一个下拉菜单，无论它在页面的哪个位置，它都会持续下降。这是可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:20:05.197

下拉菜单由浏览器/操作系统呈现。您无法使用 CSS 或 JavaScript 控制此类行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:21:11.353

因为它是留给浏览器渲染的元素，不，这是不可能的（至少就标准而言不是）。

您最好的选择是使用 HTML 替代下拉菜单 - 这可以通过 CSS 和 Javascript 来实现，尽管已经存在多个 javascript/jQuery 库来执行此任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-14T14:19:08.300

主要问题是IE。似乎如果您有一个选项列表并且您当前选择的选项不是第一个选项，那么下拉菜单可能会变成“Dropup”。要解决此问题，您可以添加一行 javascript 以将所选项目移动到列表顶部。每次做出新选择时，您都需要触发此代码。同样在页面第一次加载之后。通过将所选选项保留在选项列表的顶部，IE 仅呈现下拉菜单。我并不是说这个解决方案很漂亮，但它可以作为最后的手段。（您需要保存代码和脚本并将其加载到 IE 中才能真正看到它的工作）。

```
$('select.dropdowntest').prepend($('select.dropdowntest option:selected'));
$('select.dropdowntest').on('change', function() {
  $('select.dropdowntest').prepend($('select.dropdowntest option:selected'));
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js"></script>
<select class="dropdowntest">
  <option value="sv">Option 1</option>
  <option selected="selected" value="en">Option 2</option>
</select>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-25T19:49:50.873

您可以在选择中编辑字体大小，这将改变浏览器的行为

```
select {
   font-size: 15px;
} 
```

# coldfusion - CFMail 返回表格

> ID：10887743
> 
> 赞同：2
> 
> 时间：2012-06-04T20:17:26.133
> 
> 标签：coldfusion, cfmail

我的网页末尾有一个反馈表格，一旦用户填写并提交，它就会发送到我的电子邮件地址。电子邮件发送，但浏览器发送到 cfm 文件。我希望能够隐藏表单并用感谢信息替换它。这可能吗？如果没有，那么只停留在表单所在的网页上将是理想的。

感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:19:57.837

您可以将用户发送到您想要的任何地方。只需在电子邮件发送后使用 cflocation 将它们发送到某个地方，或者将它们保持在同一页面上并仅显示一条感谢消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T10:29:18.287

通常在提交数据后，如果用户点击刷新，最好使用重定向来避免第二次提交。

cflocation 标签将允许您简单地执行此操作。

我建议您将数据发布到“处理”cfm 文件（或者，更好的是 cfc），然后使用 cflocation 标签将您带到感谢页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:36:02.103

很多时候，表单被提交到同一个页面和一个隐藏的表单字段，该字段会触发后续的 if 语句。假设您在 form.cfm 页面上。你会提交这样的表格吗？

```
<form action="form.cfm">
<input type="hidden" name="ThisFormWasSubmitted">
 // form stuff
</form> 
```

您可以在表单上方添加一个 if 语句，用于显示表单或显示感谢您提交表单，如下所示：

```
<cfif structKeyExists(FORM, "ThisFormWasSubmitted")>
    // process the form
    // show thank you message
<cfelse>
    // show the form
</cfif> 
```

这肯定有几十种变化。

# regex - PCRE 正则表达式语法

> ID：10887744
> 
> 赞同：2
> 
> 时间：2012-06-04T20:17:28.410
> 
> 标签：regex, pcre

我想这或多或少是一个由两部分组成的问题，但首先是基础知识：我正在编写一些 PHP 以使用 preg_match_all 来查找以 {} 结尾的字符串的变量。然后它遍历每个返回的字符串，用 MySQL 查询中的数据替换它找到的字符串。

第一个问题是：有什么好的网站可以真正了解 PCRE 表达式的来龙去脉吗？我在谷歌上做了很多搜索，但到目前为止我能找到的最好的是[http://www.regular-expressions.info/](http://www.regular-expressions.info/)。在我看来，那里的信息没有很好的组织，因为我不想在需要编写复杂的正则表达式时寻求帮助，所以请指点我几个网站（或几本书！）这将有助于我以后不必打扰你们。

第二个问题是：我有这个正则表达式

```
"/{.*(_){1}(.*(_){1}[a-z]{1}|.*)}/" 
```

我需要它来捕获诸如`{first_name}, {last_name}, {email}`等之类的实例。这个正则表达式有三个问题。

第一个是它将“ `{first_name} {last_name}`”视为一个字符串，而它应该将其视为两个。我已经能够通过检查空间的存在来解决这个问题，然后在空间上爆炸。凌乱，但它的工作原理。

第二个问题是它包含标点符号作为捕获字符串的一部分。因此，如果您有“ `{first_name} {last_name}`，”，那么它将逗号作为字符串的一部分返回。我已经能够通过简单地使用 preg_replace 删除句点、逗号和分号来部分解决这个问题。虽然它适用于那些标点符号项目，但我的逻辑无法处理感叹号、问号和其他所有内容。

我对这个正则表达式的第三个问题是它根本看不到 {email} 的实例。

现在，如果您可以、愿意并且有时间简单地将这个问题的解决方案交给我，谢谢您，因为这将解决我眼前的问题。但是，即使您可以做到这一点，也*请*提供一个 lmgfty 提供良好的网站作为参考和/或一两本书，以提供有关该主题的良好教育。由于资金紧张，站点会更可取，但如果一本书是解决方案，我会找到钱（假设我当地的图书馆系统无法获得上述数量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:35:11.993

Back then I found PHP's own PCRE syntax reference quite good: [http://uk.php.net/manual/en/reference.pcre.pattern.syntax.php](http://uk.php.net/manual/en/reference.pcre.pattern.syntax.php)

Let's talk about your expression. It's quite a bit more verbose than necessary; I'm going to simplify it while we go through this.

A rather simpler way of looking at what you're trying to match: "find a `{`, then any number of letters or underscores, then a `}`". A regular expression for that is (in PHP's string-y syntax): `'/\{[a-z_]+\}/'`

This will match all of your examples but also some wilder ones like `{__a_b}`. If that's not an option, we can go with a somewhat more complex description: "find a `{`, then a bunch of letters, then (as often as possible) an underscore followed by a bunch of letters, then a `}`". In a regular expression: `/\{([a-z]+(_[a-z]+)*\}/`

This second one maybe needs a bit more explanation. Since we want to repeat the thing that matches `_foo` segments, we need to put it in parentheses. Then we say: try finding this as often as possible, but it's also okay if you don't find it at all (that's the meaning of `*`).

So now that we have something to compare your attempt to, let's have a look at what caused your problems:

*   Your expression matches any characters inside the `{}`, including `}` and `{` and a whole bunch of other things. In other words, `{abcde{_fgh}` would be accepted by your regex, as would `{abcde} fg_h {ijkl}`.
*   You've got a mandatory `_` in there, right after the first `.*`. The `(_){1}` (which means exactly the same as `_`) says: whatever happens, explode if this ain't here! Clearly you don't actually want that, because it'll never match `{email}`.

Here's a complete description in plain language of what your regex matches:

1.  Match a `{`.
2.  Match a `_`.
3.  Match absolutely anything as long as you can match all the remaining rules right after that anything.
4.  Match a `_`.
5.  Match a single letter.
6.  Instead of that `_` and the single letter, absolutely anything is okay, too.
7.  Match a `}`.

This is probably pretty far from what you wanted. Don't worry, though. Regular expressions take a while to get used to. I think it's very helpful if you think of it in terms of instructions, i.e. when building a regular expression, try to build it in your head as a "find this, then find that", etc. Then figure out the right syntax to achieve exactly that.

This is hard mainly because not all instructions you might come up with in your head easily translate into a piece of a regular expression... but that's where experience comes in. I promise you that you'll have it down in no time at all... if you are fairly methodical about making your regular expressions at first.

Good luck! :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:27:19.450

对于 PCRE，我只是简单地消化了 PCRE 联机帮助页，但无论如何我的大脑都是这样工作的......

至于匹配分隔的东西，你通常有两种方法：

1.  匹配第一个定界符，匹配任何不是结束定界符的，匹配结束定界符。
2.  匹配第一个分隔符，不贪婪地匹配任何东西*，*匹配结束分隔符。

例如，对于您的情况：

1.  `\{([^}]+)\}`
2.  `\{(.+?)\}`- 注意**？**在**+之后**

我围绕您可能想要提取的内容添加了一个组。

另请注意，特别是在#1 的情况下，而且对于#2，如果“点匹配任何东西”有效（dotall、singleline 或任何你最喜欢的正则表达式风格调用它），它们也会匹配内部的换行符 - 你会如果这会成为问题，则需要手动排除它以及您不想要的任何其他内容；如果您想要更像白名单方法的东西，请参阅上面的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T03:00:12.243

1.  这是一个[很好的正则表达式站点](http://regex101.com/)。
2.  这是一个可以工作的 PCRE 正则表达式：`\{\w+\}`

它是这样工作的：它基本上是在寻找，`{`然后`one ore more word characters`是`}`. 有趣的是，单词字符类实际上也包含下划线。`\w`本质上是简写`[A-Za-z0-9_]`

所以它基本上会匹配大括号内这些字符的任何组合，因为加号只会匹配非空的大括号。

# asp.net-mvc - 使用 JavaScriptSerializer 处理 JSON 返回 NULL 对象

> ID：10887750
> 
> 赞同：1
> 
> 时间：2012-06-04T20:17:54.613
> 
> 标签：asp.net-mvc, json, null, javascriptserializer

我的 Json 字符串：

```
 jsonString ="{"GetStatusResult":[{"CaseCompleteInd":"N","CaseNbr":"999999","InSurgeryNowInd":"Y","InRoomNowInd":"N"}]}"; 
```

我的课程：

```
public class GetStatusResult
{
    public List<CaseModel> caseDetails { get; set; }
}

public class CaseModel
{
    public string CaseCompleteInd { get; set; }
    public string CaseConfirmNbr { get; set; }

    public string InSurgeryNowInd { get; set; }
    public string InRoomNowInd{ get; set; }
} 
```

}

我的代码：

```
 GetStatusResult caseInfo = new GetStatusResult();

    JavaScriptSerializer jsSerializer = new JavaScriptSerializer();

    caseInfo = jsSerializer.Deserialize<GetStatusResult>(jsonString); 
```

我的问题：

该对象始终返回为 NULL，并且未填充 CaseModel 详细信息。JSON字符串显然有数据，但我觉得我的类结构与根级别的类有些混乱。它似乎与此处和其他地方发布的其他示例相似，所以我现在不知所措。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:21:30.963

如果您将 JSON 字符串修改为

```
jsonString ="{"caseDetails":[{"CaseCompleteInd":"N","CaseNbr":"999999","InSurgeryNowInd":"Y","InRoomNowInd":"N"}]}"; 
```

那么它应该可以工作。

JSON 对象的属性对应于具有相同名称的 .NET 对象的属性。

# python - 从页面下载文件

> ID：10887751
> 
> 赞同：1
> 
> 时间：2012-06-04T20:17:55.170
> 
> 标签：python, perl, network-programming, streaming, urllib2

我想制作一个脚本（使用任何语言，但最好是 python 或 perl）下载由网页流式传输的特定类型的文件。但是我不知道这个文件的位置，所以我必须通过查找页面流式传输的所有文件来找到它，并根据文件类型选择我想要的文件。

一个类似的例子是说我想从 youtube 上下载一个视频，但是除了找到正在流式传输到我的计算机的文件之外，没有找到 URL 的模式或方法。

我无法弄清楚的部分是如何找到页面流式传输的所有文件。其余的我可以自己做。html页面的源代码中的任何地方都没有提到文件名。

问题的例子...

这工作正常：

```
import urllib
urllib.urlretrieve ("http://example.com/anything.mp3", "a.mp3") 
```

但是，这不会：

```
import urllib
urllib.urlretrieve ("http://example.com/page-where-the-mp3-file-is-being-streamed.html", "a.mp3") 
```

如果有人可以帮助我弄清楚如何从页面下载所有文件或找到正在流式传输的文件，我将不胜感激。**我只需要知道哪种语言/库/方法可以实现这一点。**谢谢

# rpm - 在一台服务器上多次安装单个 rpm

> ID：10887758
> 
> 赞同：3
> 
> 时间：2012-06-04T20:18:29.823
> 
> 标签：rpm

您好，提前感谢任何人都可以为这个问题提供的任何答案。

我有一个 RPM，它本质上是一个爆炸 WAR 的包装器。在我的服务器上我运行

```
rpm -i myRPM.rpm 
```

这工作得很好，世界上一切都很好。然后我想使用 --relocate 触发器再次运行 rpm 以创建相同的安装。理想情况下，我希望它使用 rpm 数据库中的新条目安装应用程序，并带有增量实例或类似性质的东西。

我可以通过运行强制安装

```
rpm -i --force --relocate  OLDPATH=NEWPATH myRPM.rpm 
```

然而这里的问题是旧版本不再由 rpm 管理。我能做些什么来让这项工作按我想要的方式工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:51:43.893

不。RPM 维护一个文件数据库，安装的 RPM 等。这个数据库的设计方式，一个文件（通常）只能属于 1 个 RPM，这个 RPM 将只有这个文件的 1 个副本。即，它不能在多个位置跟踪它的多个副本（--relocate）。

一般来说，重新定位 RPM 是一个非常糟糕的主意 - 如果您在应用程序中依赖它，我会认真重新考虑。

请参阅：[http](http://rpm.org/wiki/PackagerDocs/MultipleVersions) ://rpm.org/wiki/PackagerDocs/MultipleVersions ，了解有关如何处理此问题的一些好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T12:05:45.407

这是一个迟到的答案——但也许还不算太晚。

如果您确实需要在同一台机器上安装带有 rpm 的独特软件的多个版本，您只需使用替代 rpm 数据库即可。

```
mkdir $HOME/rpm 
rpm --dbpath $HOME/rpm --initdb # older version need the initialization
rpm --dbpath $HOME/rpm -i --relocate OLDPATH=NEWPATH myRPM.rpm 
```

这种方法可用于在一台机器上热部署或蓝/绿部署守护进程。

# ios - 是否可以在没有 Mac 的情况下为 iOS 制作 PhoneGap 应用程序？

> ID：10887759
> 
> 赞同：73
> 
> 时间：2012-06-04T20:18:30.043
> 
> 标签：ios, html, cordova

所以我有一个 HTML 5 应用程序，并且我可以访问 Apple Developer Center（更准确地说是 iOS Dev Center）。问题是我可以在不购买（借出）Mac 的情况下实际使用它吗？意思是，我可以从 Windows 或 Linux 创建/下载我的开发人员证书和配置文件吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-24T09:20:25.893

根据这篇文章，您不再需要 Mac？

[https://web.archive.org/web/20150303180446/http://community.phonegap.com/nitobi/topics/detailed_guide_for_setting_up_building_ios_apps_without_a_mac](https://web.archive.org/web/20150303180446/http://community.phonegap.com/nitobi/topics/detailed_guide_for_setting_up_building_ios_apps_without_a_mac)

编辑：链接已更新

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-16T15:51:48.190

对于那些想知道如何在 Windows 中为 iOS 应用程序签名的人，您可以这样做：[在 Windows 中为 PhoneGap 构建 iOS 签名密钥](http://www.iandevlin.com/blog/2012/11/phonegap/building-an-ios-signing-key-for-phonegap-in-windows)。

你仍然需要一个 Apple 开发者帐户，没有办法解决这个问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-04T12:01:47.777

不，这是不可能的。您可以在没有 Mac 的情况下在云中**构建**phonegap 应用程序（根据[您选择的构建计划](https://build.phonegap.com/)有一些限制）。
正如@stu sais 所说，您也许可以使用 Windows 为 Apple Store 制作证书。但是，最后，您需要一台安装了 Xcode 的 Mac 才能将您的应用程序上传到 App Store。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-04T20:23:04.883

是的，这是可能的，通过 PhoneGap Build。[https://build.phonegap.com/](https://build.phonegap.com/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-19T18:54:18.550

最终，您需要一台 Mac 来提交您的 iOS 应用程序。您可以简单地在您的 PC 上试用 Remote Mac Server [MacinCloud](http://www.MacinCloud.com)。您可以在云端安装 PhoneGap 并开发 iOS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T05:37:02.167

您可以使用 windows 为苹果商店制作证书。任何说其他话的人都不知道。我自己做。只需将 ssl 安装到 windows 并从 cmd 提示符运行它。查找有关如何从 cmd 使用 ssl 为 mac 商店创建证书的教程。

# python - django HttpResponseBadRequest 中没有内容

> ID：10887760
> 
> 赞同：1
> 
> 时间：2012-06-04T20:18:35.253
> 
> 标签：python, django

我正在尝试组织我的 django 应用程序返回的错误消息，并且遇到内容为空的 HttpResponseBadRequest 对象的子类的问题：

在views.py中：

```
class HttpNoContentAvailable(django.http.HttpResponseBadRequest):
    content = "Must add content before making this request."

def get_content(request, project_id):
    project = Project.objects.get(pk=project_id)
    if not project.has_content():
        return HttpNoContentAvailable()
    ... 
```

它的工作原理如下：

```
def get_content(request, project_id):
    project = Project.objects.get(pk=project_id)
    if not project.has_content():
        return HttpNoContentAvailable("Must add content before making this request.")
    ... 
```

在我的应用程序中，有很多视图需要根据是否有内容返回相同的 400 响应，我想将响应内容存储在一个地方。为了让事情变得更“有趣”，我在开发服务器上运行的单元测试通过了——我得到了包含正确内容的 HTTP 400 响应，但是在生产环境中运行时，我得到了没有内容的 HTTP 400 响应。

如何获得 HTTP 400 响应以获取正确的内容？（或者，更一般地说，您建议我如何组织代码以实现仅将响应内容存储一次的目标？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:30:45.813

您应该覆盖子类中的构造函数，而不是将内容定义为类变量。

例如：

```
 def __init__(self):
         super(django.http.HttpResponseBadRequest, self).__init__("Must add content before making this request.") 
```

# timezone - IBM vs Oracle/Sun JDK，java.util.Timzone getOffset() 表现不同

> ID：10887761
> 
> 赞同：2
> 
> 时间：2012-06-04T20:18:50.007
> 
> 标签：timezone, java, timezone-offset, ibm-jdk

IBM vs Oracle/Sun JDK，java.util.Timzone 表现不同，

IBM JDK 1.5 与 Sun/Oracle JDK 1.6

```
import java.util.*;
class TimeTest {

public static void main(String args[]){

long now = System.currentTimeMillis();

System.out.println("EST : " + TimeZone.getTimeZone("EST").getOffset(now));
System.out.println("US/Eastern : " + TimeZone.getTimeZone("US/Eastern").getOffset(now));

}
}

***IBM JVM ouput

EST : -14400000
US/Eastern : -14400000

Oracle JVM

EST : -18000000
US/Eastern : -14400000
IBM JDK

java -version

java version "1.5.0"
Java(TM) 2 Runtime Environment, Standard Edition (build pxi32devifx-20090811 (SR10 +IZ56666+IZ56751))
IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Linux x86-32 j9vmxi3223-20090707 (JIT enabled)
J9VM - 20090706_38445_lHdSMr
JIT  - 20090623_1334_r8
GC   - 200906_09)
JCL  - 20090811

Oracle JDK

java -version

java version "1.6.0_24"                                         
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)            
Java HotSpot(TM) Client VM (build 19.1-b02, mixed mode, sharing) 
```

更新，使用 IBM JDK 6 测试，它匹配 oracle/sun java -version java version "1.6.0" Java(TM) SE Runtime Environment (build pxi3260sr6ifix-20091015_01(SR6+152211+155930+156106)) IBM J9 的输出VM（构建 2.4，JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr6-20091001_43491（启用 JIT，启用 AOT）J9VM - 20091001_043491 JIT - r9_20090902_1330ifx1 GC - 20090817_AA_）JCL01 - 2

```
java TimeTest
EST : -18000000
US/Eastern : -14400000*** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T16:55:25.013

IBM 告诉我们[答案](http://www-01.ibm.com/support/docview.wss?uid=swg21250503)：

> 2006 年，[Olson 数据库](https://en.wikipedia.org/wiki/Tz_database)中 EST 时区标识符的含义发生了变化。从历史上看，EST 参考美国东部标准时间并针对夏令时进行了调整。更改后，EST 指的是东部标准时间，没有针对夏令时进行调整。还引入了一个新的标识符 EST5EDT，它与原始 EST 标识符具有相同的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:29:08.700

我认为可以肯定地说您的 IBM JDK 安装具有比其他 JDK 安装的更旧的时区数据库。JDK 1.5 于 2004 年发布。

# python - Python/Tkinter 根窗口后台配置

> ID：10887762
> 
> 赞同：3
> 
> 时间：2012-06-04T20:18:52.773
> 
> 标签：python, window, tkinter, root, configure

我正在尝试创建一个带有黑色背景的根窗口以与我的按钮背景混合。

我有以下内容：

```
class Application(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent = parent
        self.initUI()
...

    def initUI(self):
        self.outputBox = Text(bg='black', fg='green', relief=SUNKEN, yscrollcommand='TRUE')
        self.outputBox.pack(fill='both', expand=True)
        self.button1 = Button(self, text='button1', width=40, bg ='black', fg='green', activebackground='black', activeforeground='green')
        self.button1.pack(side=RIGHT, padx=5, pady=5)
        self.button2 = Button(self, text='button2', width=20, bg='black', fg='green', activebackground='black', activeforeground='green')
        self.button2.pack(side=LEFT, padx=5, pady=5)
...

def main():
    root = Tk()   
    root.geometry('1100x350+500+300')
    root.configure(background = 'black')
    app = Application(root)
    root.mainloop() 
```

但是`root.configure(background = 'black')`没有改变根窗口的背景颜色......有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:46:55.817

这有效（检查如何引用父根）：

编辑：我编辑了代码和图形以明确设置颜色的位置：

```
from Tkinter import *

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.parent = master
        self.initUI()

    def initUI(self):
        self.outputBox = Text(self.parent, bg='yellow', height= 10, fg='green', relief=SUNKEN, yscrollcommand='TRUE')
        self.outputBox.pack(fill='both', expand=True)
        self.button1 = Button(self.parent, text='button1', width=20, bg ='blue', fg='green', activebackground='black', activeforeground='green')
        self.button1.pack(side=RIGHT, padx=5, pady=5)
        self.button2 = Button(self.parent, text='button2', width=25, bg='white', fg='green', activebackground='black', activeforeground='green')
        self.button2.pack(side=LEFT, padx=5, pady=5)

def main():
    root = Tk()
    app = Application(root)
    app.parent.geometry('300x200+100+100')
    app.parent.configure(background = 'red')
    app.mainloop()

main() 
```

![在此处输入图像描述](../Images/11970e55b2ce7b5e86e3d4585cdd3741.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T18:19:11.323

它在 .configure 行中的“bg”不是“背景”。

# xml - Perl - 解析属性列表？

> ID：10887770
> 
> 赞同：1
> 
> 时间：2012-06-04T20:19:31.837
> 
> 标签：xml, json, macos, perl, property-list

用 Perl 解析 Mac 属性列表的最佳方法是什么？我正在尝试编写一个脚本，该脚本将解析包含各种参数的 plist，包括一些嵌套在容器层中的参数（字典中的数组或字典中的字典）。

据我所知，有几个选项：

*   [CPAN 上的Mac::PropertyList](http://search.cpan.org/~bdfoy/Mac-PropertyList-1.35/lib/Mac/PropertyList.pm)模块。然而，它是相当低级的，这个警告让我停下来：

> 您可能不应该在应用程序中使用它——在此之上构建接口，这样您就不必将所有令人发指的多级对象放在人们必须查看的地方。

*   我可以选择将 plist 转换为另一种格式，因此我也在考虑使用 XML 解析器模块。我不确定在这种情况下哪个是最好的。

*   我还读到 plists 可以在 OS X 10.7 中转换为 JSON，所以如果存在用于解析 JSON 的优秀 Perl 库，我也愿意接受，只要它不是太令人头疼的交易带有嵌套条目。

有什么建议么？

**更新**：在这一点上，我非常倾向于 JSON 选项，只是因为它可能不像 XML 那样令人头疼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:40:40.000

*   [数据::Plist](http://p3rl.org/Data%3a%3aPlist)
*   [Mac::属性列表](http://p3rl.org/Mac%3a%3aPropertyList)
*   [Mac::Tie::PList](http://p3rl.org/Mac%3a%3aTie%3a%3aPList)

* * *

*   [XML::简单](http://p3rl.org/XML%3a%3aSimple)
*   [JSON::XS](http://p3rl.org/JSON%3a%3aXS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:33:16.393

你在 Perl 方面有多好？

在 CPAN 中，有一个名为[Mac::PropertyList](http://search.cpan.org/~bdfoy/Mac-PropertyList-1.35/lib/Mac/PropertyList.pm)的模块可以完全满足您的需求。我没用过，你可以试试。

如果您可以使用 XML，则使用[XML::Simple](http://search.cpan.org/~grantm/XML-Simple-2.18/lib/XML/Simple.pm)。我一直使用这个模块来解析和构建 XML 文件。有了`XML::Simple`，解析 XML 文件就很容易了。

CPAN中有一个`JSON`模块，但我从未使用过它，我不确定它是否会对您有所帮助。

您以前使用过 CPAN 模块吗？

# php - Jquery .clone() 导致 $.post 失败

> ID：10887771
> 
> 赞同：1
> 
> 时间：2012-06-04T20:19:35.767
> 
> 标签：php, javascript, jquery

我使用 .clone(true, true) 复制了 HTML，因为我想保留 JQuery 事件处理程序。当我通过 $.post 将其传递给 PHP 时，帖子失败并在 firebug 中给出以下错误

```
uncaught exception: [Exception... "Could not convert JavaScript argument" nsresult: "0x80570009 (NS_ERROR_XPC_BAD_CONVERT_JS)" location: "JS frame :: jquery-1.7.2.js :: <TOP_LEVEL> :: line 7740" data: no] 
```

我想以某种方式保留 HTML 及其 JQuery 事件处理程序，因为我正在编写一个脚本来保存用户所处的状态。

**更新（添加代码）**

```
//Save HTML w/ JQuery
GSaveState = new Object();
GSaveState['HTML'] = $('#content').clone(true, true);

$.post("DecoPOState.php", { SavedState: GSaveState},
        function(data){
            alert("Test");
        }
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:26:17.107

您的代码的问题在于您尝试发送一个 DOM 元素 - 由于显而易见的原因，您不能这样做。假设您要发送该元素的 HTML 代码，请使用`$('#content').html()`

```
var GSaveState = {
    HTML: $('#content').html();
}; 
```

但是，事件处理程序不包含在该字符串中，因为它们附加到元素而不是内联事件（即它们不是出现在 DOM 树中的属性）。

但是，保存应用程序的状态事件处理程序根本不重要。将变量用于您要保存的状态信息并将它们包含在您的 POST 数据中。

# c# - jqgrid 功能允许使用 add-form 添加两列，但允许通过 inline-edit 选项仅编辑一列

> ID：10887773
> 
> 赞同：0
> 
> 时间：2012-06-04T20:19:48.910
> 
> 标签：c#, asp.net, jqgrid-asp.net

我正在使用 jqGrid 显示数据库表并使用来自 ASP.NET 代码隐藏文件的 DataSet 加载 JQGrid。列也是在运行时从文件后面的代码生成的。我有两列（PrimaryKey 列[不是自动增量字段]，文本字段列），我想使用添加表单为两列提供添加功能，但仅对一列提供编辑功能，即使用内联编辑的文本字段列.

[这与此处](https://stackoverflow.com/questions/4307147/jqgrid-how-to-make-a-column-editable-in-the-add-dialog-but-not-during-inline)报告的问题相似，答案非常接近我想要的。我也找到了其他解决方案，但大多数解决方案使用 JSON 格式的数据并从 Javascript 加载。

我很难弄清楚上述功能，因为数据已经从数据库中加载，我只想修改可编辑属性。默认情况下，我有主字段不可编辑和文本字段 - 可编辑。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:38:33.677

[您参考的答案](https://stackoverflow.com/a/4308172/315935)是针对内联编辑模式的。如果使用表单编辑，我可以建议您遵循[此](https://stackoverflow.com/a/3405961/315935)。您可以将两者结合起来，以强制`beforeShowForm`在“添加”表单中可以编辑两列内部，并在“编辑”表单或内联编辑的情况下仅使一列可编辑。

**更新**：从您发给我的电子邮件中，我首先可以发现您在问题中使用了错误的标签[jqgrid](https://stackoverflow.com/tags/jqgrid/info)而不是[jqgrid-asp.net](https://stackoverflow.com/tags/jqgrid-asp.net/info)。因此，您使用了商业[jqSuite](http://www.trirand.net/default.aspx)产品，而不是免费的开源 JavaScript jQuery 插件[jqGrid](http://www.trirand.com/blog/?page_id=6)。我回答了您如何解决 jqGrid 中的问题，但您的问题是如何在提供 jqSuite 的 .NET 类中使用相同的问题。

在这种情况下，您可以在[答案](https://stackoverflow.com/a/3986901/315935)中找到解决方案。您应该只修复代码中的输入错误并使用不同的属性`JQGrid1.ClientSideEvents.AfterAddDialogShown`和`JQGrid1.ClientSideEvents.AfterEditDialogShown`.

# graphics - 从 Bezier 补丁的控制点生成多边形网格

> ID：10887782
> 
> 赞同：1
> 
> 时间：2012-06-04T20:20:38.280
> 
> 标签：graphics, bezier

我想在贝塞尔曲面上制作程序，我在网上找到了[这篇文章](http://web.cs.wpi.edu/~matt/courses/cs563/talks/surface/bez_surf.html)，有一种方法可以做到，但我不明白第二步，特别是第三步。或者我可能只是无法想象作者的意思。

```
B. Use blending tables to calculate points in "row curve":

for( u = 0; u < 10; u++ )
{
    blend row 0 control points -> new control point
    blend row 1 control points -> new control point
    blend row 2 control points -> new control point
    blend row 3 control points -> new control point

    for( v = 0; v < 10; v++ )
    {
        blend 4 new control points -> point on surface
    }
}
C. Generate edges and polygons from grid of surface points. 
```

谁能解释我的意思？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:25:49.150

贝塞尔曲面是贝塞尔曲线，其中控制点沿其他贝塞尔曲线移动，而不是静止不动。

```
B(0,u) = (1-u)^3
B(1,u) = 3*u*(1-u)^2
B(2,u) = 3*u^2*(1-u)
B(3,u) = u^3

C[0..3, 0..3] = control points

Curve(t,C0,C1,C2,C3) = B(0,t)*C0 + B(1,t)*C1 + B(2,t)*C2 + B(3,t)*C3

Surface(s,t,C[0..3,0..3]) =
    Curve(t, Curve(s, C[0,0], C[1,0], C[2,0], C[3,0]),
             Curve(s, C[0,1], C[1,1], C[2,1], C[3,1]),
             Curve(s, C[0,2], C[1,2], C[2,2], C[3,2]),
             Curve(s, C[0,3], C[1,3], C[2,3], C[3,3])) 
```

`t`这些函数对( 和) 的特定值的曲线（或曲面）进行采样`s`。

本文讨论了`B(i,u)`在计算总和之前缓存 Bernstain 多项式（函数）的值。这样您就不必每次都重新计算它。

然后它继续谈论细分。这涉及将每条曲线中的四个控制点分成两组，每组四个。每组将追踪原始曲线的一半。

将其推进到曲面中，将每条行曲线分成两条，然后将每条列曲线分成两条。这将为您提供四个曲面跟踪原始曲线的一部分。

细分通常比对曲线/曲面进行采样要快。

```
SplitCurve(C0,C1,C2,C3) = [
    C0,                           # First control-point of first sub-curve
    (C0 + C1)/2,                  # Second control-point of first sub-curve
    (C0 + 2*C1 + C2)/4,           # Third control-point of first sub-curve
    (C0 + 3*C1 + 3*C2 + C3)/8,    # Shared first/last control-point
    (C1 + 2*C2 + C3)/4,           # Second control-point of second sub-curve
    (C2 + C3)/2,                  # Third control-point of second sub-curve
    C3                            # Fourth control-point of second sub-curve
]

SplitSurface(C[0..3,0..3]) =
    col0 = SplitCurve(C[0,0], C[0,1], C[0,2], C[0,3])
    col1 = SplitCurve(C[0,0], C[0,1], C[0,2], C[0,3])
    col2 = SplitCurve(C[0,0], C[0,1], C[0,2], C[0,3])
    col3 = SplitCurve(C[0,0], C[0,1], C[0,2], C[0,3])
    return [
        SplitCurve(col0[0], col1[0], col2[0], col3[0]),
        SplitCurve(col0[1], col1[1], col2[1], col3[1]),
        SplitCurve(col0[2], col1[2], col2[2], col3[2]),
        SplitCurve(col0[3], col1[3], col2[3], col3[3]),
        SplitCurve(col0[4], col1[4], col2[4], col3[4]),
        SplitCurve(col0[5], col1[5], col2[5], col3[5]),
        SplitCurve(col0[6], col1[6], col2[6], col3[6])
    ] 
```

继续细分每个子表面，直到所有控制点都位于同一像素内。这里的“像素”是指投影曲线。要检查这一点，最简单的方法是将每个控制点投影到屏幕坐标。

要创建三角形网格，您可以将控制点细分一些固定次数，然后选择每个曲面的左上角控制点。

# computer-science - 最佳更新频率

> ID：10887784
> 
> 赞同：0
> 
> 时间：2012-06-04T20:20:44.520
> 
> 标签：computer-science, data-mining

我有一个经常对其执行数据挖掘操​​作的数据集。我想根据数据更新的频率来确定执行数据挖掘操​​作的频率。是否有任何方程式可以根据数据更新频率为我提供最佳挖掘频率？如果没有，并且我想获得自己的，我将如何去做？如果我想包含更多变量怎么办？如果有的话，我只需要一些指向一些阅读材料的指针。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:43:11.060

这不是一个真正的 CS 问题，即使它听起来像一个（除非它是一个家庭作业问题......我假设你有一个现实世界的问题要解决）。我假设如果您是“数据挖掘”，您所做的不仅仅是针对实时 OLTP 数据库运行查询（例如在单独的系统上设置多维数据集）。这将归结为用户问题。答案将取决于：

*   您正在捕获的数据中的模式（它是周期性的，即每小时/每天/每周）。比一个周期更频繁的更新可能没有用。同样，如果它是基于事件的，并且事件不是连续发生的，那么比传入事件更频繁地更新您的采矿系统将是无用的。
*   您能否收集数据以将其转换为数据挖掘设置，而不会让用户或系统编写原始数据陷入困境？如果没有，您需要在系统负载较低时执行此操作。如果您正在分析日志，或使用自动复制（即 oracle 流），您可能不受此限制。
*   进行数据挖掘的人员/流程何时可以停止并接受新的数据集……您不能只是从正在进行的工作中撤出地毯并替换他们正在处理的数据。

答案可能不是你可以“推导出”的东西。它将来自两端用户（自动或人工）的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:40:18.383

不确切知道您的数据是什么样的，或者您的需求是什么 - 通常我们数据挖掘到

1.  在数据中找到模式
2.  创建一个模型以根据我们的（过去）数据做出未来的决策

你只需要进一步数据挖掘，如果

1.  您已经收集了足够的“新”数据，您可能能够找到新的模式
2.  您已经收集了足够的“新”数据，您的模型不再预测新现象
3.  你开发了一种新技术，或者修改了数据，使得再次执行数据挖掘是有意义的

一些盲目的猜测：

1.  每次您收集占当前数据集 5% 的新数据时，我都会执行该操作，即，如果您有 10 GB，则在收集 0.5 GB 后执行该操作（假设这是可行的！（不到一天））
2.  如果您没有以这种规模收集新数据，那么每周运行一次操作应该相对便宜，并且肯定会让您放心
3.  如果您以每天千兆字节或更多的规模收集数据，那么瓶颈就是操作成本。使用您的判断，如果手术时间超过一天，可能每月一次。在这种规模下，运营本身将开始在计算能力上花钱，公司应该聘请专家。

就公式而言，没有，但我会向您推荐有关[统计意义](http://en.wikipedia.org/wiki/Statistical_significance)的维基百科文章。

# c# - 如何使用 C# .NET 从 Google 邮件中读取邮件并将邮件标记为保存并将邮件保存在本地文件夹中

> ID：10887796
> 
> 赞同：1
> 
> 时间：2012-06-04T20:21:22.997
> 
> 标签：c#, .net, winforms, email

我正在尝试构建一个 winform 应用程序

1.  从谷歌应用程序读取邮件
2.  将邮件和附件保存到本地文件夹
3.  将邮件标记为已读
4.  将电子邮件正文和附件保存到 SQL-Server 数据库

后者没问题，但我在前 3 个方面确实遇到了麻烦。我到处找，人们告诉我如何在 winform 应用程序上发送邮件，而不是如何阅读、标记和保存内容和附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:29:19.023

CodeProject 可能是继 SO（恕我直言）之后的下一个最佳在线资源。以下是一些经过充分审查的示例项目，它们将使您走得更远：

*   [http://www.codeproject.com/Articles/14304/POP3-Email-Client-NET-2-0](http://www.codeproject.com/Articles/14304/POP3-Email-Client-NET-2-0)
*   [http://www.codeproject.com/Articles/6062/A-POP3-Client-in-C-NET](http://www.codeproject.com/Articles/6062/A-POP3-Client-in-C-NET)
*   [http://www.codeproject.com/Articles/188349/Read-Gmail-Inbox-Message-in-ASP-NET](http://www.codeproject.com/Articles/188349/Read-Gmail-Inbox-Message-in-ASP-NET)
*   [http://www.codeproject.com/Articles/34495/Building-your-own-Mail-Client-using-C](http://www.codeproject.com/Articles/34495/Building-your-own-Mail-Client-using-C)
*   [http://www.codeproject.com/Articles/15611/POP3-Email-Client-with-full-MIME-Support-NET-2-0](http://www.codeproject.com/Articles/15611/POP3-Email-Client-with-full-MIME-Support-NET-2-0)

# ruby - CURSOR_NOT_FOUND - 我的 cron 工作开始在中间死亡

> ID：10887797
> 
> 赞同：0
> 
> 时间：2012-06-04T20:21:24.187
> 
> 标签：ruby, mongodb, rake

一个成功运行多年的 cron 作业在完成大约 80% 后突然开始死亡。不知道是因为带有结果的集合在稳步增长并达到一定的临界大小（对我来说似乎不是那么大）还是出于任何其他原因。我不知道如何调试它，我找到了作业死亡的用户并尝试为该用户运行作业，2 小时后收到 CURSOR_NOTFOUND 消息。昨天它在为所有用户运行 3 小时后死亡。我仍在使用旧的 mongoid (2.0.0.beta)，因为存在多种依赖关系并且没有时间更改它，但是 mongo 是最新的（我知道[1.1.2 之前版本](http://osdir.com/ml/mongodb-user/2010-11/msg00896.html)中的错误）。

我发现了两个类似的问题，但它们都不适用。在[这种情况下](https://stackoverflow.com/questions/9963599/mongodb-debug-cursor-refresh-for-cursor-7078636577051629992 "堆栈溢出问题 9963599")，他们使用了尚未投入生产的 Mopped。这里[的](https://stackoverflow.com/questions/7339695/mongoid-is-slow-and-shows-this-in-the-log-mongodb-cursor-refresh-for-cursor-3)问题在于分页。

我收到此错误消息

```
MONGODB cursor.refresh() for cursor xxxxxxxxx
rake aborted!
Query response returned CURSOR_NOT_FOUND. Either an invalid cursor was specified, or the cursor may have timed out on the server. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:10:59.550

来自 MongoDB 的“未找到游标”错误通常表明游标超时（在 10 分钟不活动后），但它可能表明客户端代码已变得混乱并且正在使用过时或关闭的游标或已损坏游标不知何故。如果 3 小时的运行时间在调用 MongoDB 之间包括客户端上的大量忙碌时间，这可能会给服务器时间以使光标超时。

您可以在游标上指定一个无超时选项，以查看是否是游标的服务器超时导致了您的问题。

# objective-c - 了解仪器和内存管理

> ID：10887801
> 
> 赞同：1
> 
> 时间：2012-06-04T20:21:42.153
> 
> 标签：objective-c, ios, memory-management, cocos2d-iphone

我需要了解如何在目标 C 中管理内存。我知道基础知识，如果您创建并拥有它，则必须自己释放它。但是，当涉及到以下代码时：

```
self.storeDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath2]; 
```

我拥有这个吗？我必须释放这段记忆吗？

```
self.storeDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath2]; 
//73.3% leak   
totalCharacters = [storeDict count];
tagCounter = 1;

dictKeyArray = [[storeDict allKeys] mutableCopy];
//13.3% leak 
```

当 Instruments 在突出显示的泄漏旁边放置一堆百分比时，这告诉我什么？它是否告诉我泄漏的大小相对于泄漏的内存总量？
最后一件事..分配的内存量持续增加是否正常？还是应该稳定在某个地方？感谢所有的帮助！一切都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:17:41.660

在大多数情况下，您只拥有名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法返回的对象。当然，您还拥有您发送的任何东西`-retain`。这些规则的例外情况应在不合格方法的文档中注明。

见[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1)

Instruments 将泄漏归因于创建对象的行。但是，这不一定是泄漏对象的代码。如果指向对象的指针被传递给其他代码并且该代码没有平衡其保留和释放，则该代码负责泄漏。Instruments 可以向您显示特定对象的保留和释放历史，您必须查看这些以查看哪些代码没有正确履行其所有权责任。

此外，如果一个对象由另一个对象拥有并且它确实是第二个对象被泄露，那么它所拥有的所有东西都将“传递地”泄露。因此，在尝试追踪已泄漏的低级别对象之前，请先查找已泄漏的高级对象。通常，泄漏实例较少的对象是泄漏对象图的根。

记忆力持续上升还是趋于稳定是正常的，这取决于一点。通常，内存使用应该稳定。但是，如果您的应用程序确实做得越来越多，那么它的内存使用量不断增加可能是正常的。例如，如果一个应用程序通过网络接收数据并在此过程中累积结果，那么随着更多数据的到达，它的内存使用量可能会增加。但如果它没有在某个合理的点停止，那就是个问题。在 iOS 设备上，系统最终会杀死它。

# image - Wordpress 标题图像不会在 IE 中显示

> ID：10887804
> 
> 赞同：0
> 
> 时间：2012-06-04T20:21:52.940
> 
> 标签：image, wordpress, internet-explorer, header

标头中的图像在 Safari、FFX 和 Opera 中显示，但在 IE 中**不显示（在 9 上，顺便说一句）。**

不确定这是否重要，但在使用 IE 的开发人员工具时，它会到处显示“空文本节点”。

我什至不知道要在这篇文章中附加什么其他代码……请告诉我。

网站网址： http: [//glassinfusion.accountsupport.com/](http://glassinfusion.accountsupport.com/)

标头代码：

```
<!DOCTYPE html>
<html <?php language_attributes(); ?>>

<head>
    <meta charset="<?php bloginfo('charset'); ?>" />

    <?php if (is_search()) { ?>
       <meta name="robots" content="noindex, nofollow" /> 
    <?php } ?>

    <title>
           <?php
              if (function_exists('is_tag') && is_tag()) {
                 single_tag_title("Tag Archive for &quot;"); echo '&quot; - '; }
              elseif (is_archive()) {
                 wp_title(''); echo ' Archive - '; }
              elseif (is_search()) {
                 echo 'Search for &quot;'.wp_specialchars($s).'&quot; - '; }
              elseif (!(is_404()) && (is_single()) || (is_page())) {
                 wp_title(''); echo ' - '; }
              elseif (is_404()) {
                 echo 'Not Found - '; }
              if (is_home()) {
                 bloginfo('name'); echo ' - '; bloginfo('description'); }
              else {
                  bloginfo('name'); }
              if ($paged>1) {
                 echo ' - page '. $paged; }
           ?>
    </title>

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">

    <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">

    <link rel="icon" href="<?php bloginfo('template_directory'); ?>/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="<?php bloginfo('template_directory'); ?>/favicon.ico" type="image/x-icon" />

    <?php if ( is_singular() ) wp_enqueue_script('comment-reply'); ?>

    <?php wp_head(); ?>
</head>

<body>
<div id="wrapper">
<div id="header">

    <!-- start logo -->

 <h1><a href="<?php echo get_option('home'); ?>/"><span><?php bloginfo('name'); ?></span>
       <img src="<?php bloginfo('template_directory'); ?>/images/logo3.jpg" width="" height=""alt="<?php bloginfo('name'); ?>"/> 
        </a></h1> 

     <!-- End Logo -->

<?php
        /* A sidebar on top of the content? Yep. You can can customize
         * your top with three columns of widgets.
         */
        get_sidebar('navigation');
?>

</div><!--end header -->

<!-- start middle -->
<div id="middle"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:00:24.570

对于未显示的图像，请尝试使用不同格式的图像，例如 gif 而不是 jpg。

# c# - Roslyn CTP - 如何将更改写入文件系统

> ID：10887805
> 
> 赞同：2
> 
> 时间：2012-06-04T20:21:54.003
> 
> 标签：c#, c#-4.0, roslyn

我创建了一个名为 Solution.sln 的空 Visual Studio 解决方案，我将其加载到工作区的第一行。然后我将一个项目添加到解决方案中，并将工作区更新为现在应该包含一个项目的最新解决方案。如何写出我添加到空解决方案中的新内容的文件？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Roslyn.Compilers;
using Roslyn.Compilers.CSharp;
using Roslyn.Services;

namespace RoslynMainApp 
{
    class Program 
    {
        static void Main(string[] args) 
        {
            IWorkspace workspace = Workspace.LoadSolution(@"C:\RoslynSolutions\Solution.sln");
            ProjectId projectId;

            ISolution solution = Solution.Create(SolutionId.CreateNewId("Solution"));
            solution.AddCSharpProject("Project1.dll", "Project1", out projectId);
            var success = workspace.ApplyChanges(workspace.CurrentSolution, solution); 
            if(success)
            {
                //How do I write out all the stuff I just added to Solution.sln to the directory RoslynSolutions?
            }
        }
    }
} 
```

提前致谢，

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:27:18.847

调用的行为`ApplyChanges`应该将更改写入磁盘。但是，请注意，在 CTP1 中，实际上只有一小部分可以应用于解决方案的更改得到实施。

# ruby-on-rails-3 - 创建 rails 应用程序时缺少 Gemfile.lock

> ID：10887809
> 
> 赞同：0
> 
> 时间：2012-06-04T20:22:09.173
> 
> 标签：ruby-on-rails-3, rubygems, gemfile

在创建 Rails 应用程序时：

```
user$ rails new App 
```

所有其他文件都被创建，即`app, config, db, doc, script, test, Gemfile, etc`我发现`Gemfile.lock`创建失败。发生这种情况的任何特殊原因？我在捆绑 gem 时遇到错误，但我不知道`Gemfile.lock`文件的缺失是否导致了这种情况。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:24:07.077

直到你完成你的捆绑之后，你才会得到锁，只要有一组良好的 gems 构建（所有依赖项都可用..）

如果你运行：

`bundle install`

我认为应该为您创建一个。

或者

`bundle update`

如果您有一个锁定文件并且有一个更新的 gemset

# c++ - 初学者和cpp类

> ID：10887810
> 
> 赞同：3
> 
> 时间：2012-06-04T20:22:10.377
> 
> 标签：c++

我在[这里使用“构造函数和析构函数”下的代码](http://www.cplusplus.com/doc/tutorial/classes/)

基本上，我想将它与“指向类的指针”（下面一点）下的指针构造结合起来，我觉得它真的很整洁。

现在这有效：

```
int main () {
   CRectangle * prect;     //l2
   CRectangle rect (3,4);  //l3
   prect = &rect;          //l4
   cout << "rect area: " << (*prect).area() << endl;
   return 0;
} 
```

我的问题是，我们可以用一种更优雅的方法替换 l2-l4，而不需要在第 3 行创建 rect 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:35:29.723

要创建不需要任何自动变量的对象（例如`rect`在上面的代码中），您必须使用`new`运算符。使用运算符创建的对象`new`存储在*free store*中，`new`表达式计算为指向新创建对象的指针。

现在，可以继续说，`new`操作符就是答案，仅此而已，但实际上不是：它没有回答用更优雅的解决方案替换这几行的问题，因为它不会是一个。

这个答案的其余部分与如何`new`使用有关。

与自动对象不同，存储在空闲存储中的对象不会自动销毁，而是它们的生命周期和销毁由`delete`操作员控制（您应该删除不再需要的对象以释放资源）。为确保销毁，您应该始终将`new`表达式中的指针存储到所谓的*智能指针*中。一个很好的、简单的规则：*仅在智能指针构造函数**中使用`new`*运算符（除非您知道自己在做什么）。

C++11 中有几个智能指针，而标准的早期版本只定义了一个，`auto_ptr`. 也许是因为它的怪癖，或者仅仅因为它有一个替代品，它实际上在 C++11 中已被弃用，并且可能不应该在新代码中使用，至少在 C++11 中不应该（现在，这是一种观点） .

智能指针使用示例：

```
boost::shared_ptr<CRectangle> shared_rect(new CRectange(3, 4));
std::unique_ptr<CRectangle> rect(new CRectangle(3, 4)); // C++11 only

// use smart pointers like like regular pointers; indirection through * or ->
// i.e. (*rect).area() or rect->area() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:28:59.947

我也喜欢@eq- 的回答，但除了动态内存分配之外，您还可以尝试放置新的。（当我说“尝试”时，我并不是说这是做事的方式，而是更像这样更值得深思。我不是想把你引向一个曲折的小通道迷宫，都一样。）

```
char mem[sizeof(CRectangle)] alignas(CRectangle);
CRectangle *prect = new (mem) CRectangle(3, 4); // construct
std::cout
    << "rect area: " << prect->area()
    << std::endl;
prect->~CRectangle();                           // destruct 
```

在使用自定义分配器时，您通常会使用placement new。可以出于各种原因使用自定义分配器，但在我的工作中，它通常用于预分配策略（例如池分配器或具有严格内存配置的嵌入式系统）。在这种情况下，放置 new 用于初始化具有自动存储类的内存。与您的原始`rect`对象一样，当代码超出范围时，该对象的内存将变得无效。但是，`CRectangle`构造函数可能会执行需要清理的初始化，因此在内存超出范围之前会显式调用析构函数。

请注意，您不能使用`auto_ptr`for `prect`，因为在指针上调用 delete 将是未定义的（因为内存不是动态创建的）。`shared_ptr`如果您将自定义删除器传递给构造函数，则可以使用。`unique_ptr`如果您在第二个模板参数中传入自定义删除器，则可以使用。自定义删除器只是对析构函数进行显式调用，以便智能指针在代码超出范围时自动进行清理工作。

```
template <typename T>
struct placement_delete {
    void operator () (T *t) const { t->~T(); }
};

char mem2[2][sizeof(CRectangle) alignas(CRectangle);
std::shared_ptr<CRectangle>
    sprect(new (mem2[0]) CRectangle(2, 3), placement_delete<CRectangle>());
std::unique_ptr< CRectangle, placement_delete<CRectangle> >
    uprect(new (mem2[1]) CRectangle(3, 4)); 
```

该`new`调用可能会引发`std::bad_alloc`异常。由于它未被捕获，因此您的程序将在抛出异常并返回错误结果后立即终止。如果你想优雅地处理异常，你可以使用`try`and`catch`阻塞。

```
CRectangle *prect;
try {
    prect = new (mem) CRectangle(3, 4);
} catch (std::bad_alloc) {
    // do something about it?
    abort();
} 
```

学习用，`abort`还行。它可以让您练习捕获异常，但可以让您在分析由于`abort`. （在 UNIX 上，这通常是一个核心文件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:25:31.757

那这个怎么样？

```
int main () {
   CRectangle rect (3,4); // on stack
   cout << "rect area: " << rect.area() << endl;
   return 0;
} 
```

或者如果你*必须*有`prect`：

```
int main () {
   CRectangle rect (3,4); // still on stack
   CRectangle * prect = &rect; // simple alias
   cout << "rect area: " << prect->area() << endl; // same as (*prect).area()
   return 0;
} 
```

但至少在您的简单代码`prect`中是多余的。

通常人们会期望看到一些`new CRectangle()`（或派生自 的类`CRectangle`，在堆上分配）`prect`在创建时或以后分配。但目前还不是很清楚你打算做什么。但是由于在您的示例`prect`中只是 的别名`rect`，为什么不`rect`直接使用（我的第一段代码）？

* * *

使用堆：

```
int main () {
   CRectangle* prect = new CRectangle(3,4); // using heap
   // new will throw if out of memory, so no check for null pointer needed here
   cout << "rect area: " << prect->area() << endl; // same as (*prect).area()
   delete prect; // free the memory - needed because it's not a stack object
   return 0;
} 
```

正如 Mooing Duck 在评论中提到的，STL`std::auto_ptr`现在已被（在 C++11 中）取代。`std::unique_ptr`由于这个“智能指针”充当堆栈上的容器类，用于存放我们在堆上的类的指针，因此它也会进行清理

```
int main () {
   try
   {
     std::auto_ptr<CRectangle> prect(new CRectangle(3,4)); // using heap, via smart ptr
     // new will throw if out of memory, so no check for null pointer needed here
     cout << "rect area: " << prect->area() << endl; // same as (*prect).area()
   }
   catch(exception& e)
   {
     cout << "Exception caught: " << e.what() << endl;
   }
   return 0;
} 
```

`auto_ptr`和之间的主要区别在于`unique_ptr`它们在所有权方面的语义。[您可以在智能指针](https://secure.wikimedia.org/wikipedia/en/wiki/Smart_pointer)的 Wikipedia 页面上获得概述。

# java - 实现子类的好方法

> ID：10887813
> 
> 赞同：0
> 
> 时间：2012-06-04T20:22:28.950
> 
> 标签：java, class, inheritance

所以我有大约 10-15 个类（这可能会随着时间增长到更大的数量），并且它们内部都有相当相似的变量：

```
temp
conditions
humidity
load 
```

..还有类似的东西。我正在寻找实现一个父类（抽象）来更好地管理它，因为它们都是可运行的。

有一部分我为他们每个人调用了一个构造函数，这……很糟糕。

```
 public ThreadHandler(NH.NHandler NSH, int threadNum){
    this.threadNum=threadNum;
    this.NSH = NSH;
}

public ThreadHandler(OPA.OpaHandler SgeSH, int threadNum){
    this.threadNum=threadNum;
    this.OpaSH = OpaSH;
}

public ThreadHandler(SGE.SgeHandler SgeSH, int threadNum){
    this.threadNum=threadNum;
    this.SgeSH = SgeSH;
} 
```

.....并持续15

我将如何实现一个父类来简单地做

```
public ThreadHandler(objectType name, int threadNum){
    //Do stuff
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:59:13.590

你需要创建一个接口，比如 IHandler 和通用方法，所有的处理程序都应该实现这个接口

```
public interface IHandler {
      .... declare public methods 
    } 
```

```
public NHandler implements IHandler  {
       .... implement all the methods declared in IHandler..
    }
```

现在你可以在`ThreadHandler`

```
public ThreadHandler(IHandler  handler, int threadNum){
        .... call the methods
    }
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:00:18.007

我有另一个例子使用`abstract class`and `extends`that to `ChildClass`。我希望对您的问题有所帮助。

**ParentHandler.java**

```
public abstract ParentHandler<T> {

    public T obj;
    public int threadNum;
    // Declare the common variable here...

    public ParentHandler(T obj, int threadNum) {
        this.threadNum = threadNum;
        this.obj = obj;
    }
} 
```

**ChildHandler.java**

```
public class ChildHandler extends ParentHandler<NH.NHandler> {

    public ChildHandler(NH.NHandler nsh, int threadNum) {

        super(nsh, threadNum);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T20:36:27.857

实现一个接口，每个“子”类都会实现它，然后您可以声明一个接口类型的对象并创建一个基于某些东西返回特定类的方法，就像这样。

```
 public Interface ITest
    {
        string temp;
        void Test(string param1, string param2);
    }

    public Class Class1 : ITest
    {
        void Test(string param1, string param2)
        {
            // DO STUFF
        }
    }

    public Class Class2 : ITest
    {
        void Test(string param1, string param2)
        {
            // DO STUFF
        }
    } 
```

接着：

```
 public ITest GetClass(string type)
    {
         switch (type)
         {
             case "class1":     
                   return new Class1();
             case "class2":     
                   return new Class2();
         }  
    } 
```

你称之为

```
 ITest obj = GetClass("class1");
    obj.Test(); 
```

# javascript - 如何将文本框中的光标位置作为像素值获取？

> ID：10887815
> 
> 赞同：1
> 
> 时间：2012-06-04T20:22:40.833
> 
> 标签：javascript, cursor-position

我正在尝试做这样的事情：![在此处输入图像描述](../Images/6f114fd4cd5754cc83e661b19ad18a5d.png)

当使用在文本框中输入“#”时，颜色选择器 div 必须在光标位置的底部打开。我可以使用 element.selectionStart 获取光标的顺序，但这不是可靠的方法。它必须是一个像素值。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:27:40.263

如果您确定文本字段永远不会滚动，您可以简单地将文本字段的字体和框大小复制到位于视野之外的 div 中，然后使用与文本字段相同的内容测量跨度的大小。

# php - 为什么我的 php 代码会创建不必要的空间？

> ID：10887817
> 
> 赞同：0
> 
> 时间：2012-06-04T20:22:51.087
> 
> 标签：php

这是我的 php 代码。这是创建下面的 html 代码。

```
foreach($sorular->soruCek($_GET["kategori"]) as $data)
{
    $kontrol = $sorular->cevapCek($data["id"]);
    if($kontrol)
    {
        echo $data["soru"] . '<br/>';
            foreach(@$sorular->cevapCek($data["id"]) as $veri)
            {
                ?>
                <input type="radio" name="soru<? echo $data["id"]; ?>" value="<? echo $veri["id"]; ?>"/><? echo $veri["cevap"]; ?>
                <?
                echo "<br/>";
            }
        echo "<br/>";
    }
} 
```

结果： ![在此处输入图像描述](../Images/b152ebb80655a72a38c332ca9821df91.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:23:34.197

PHP 是一种模板语言。php 标签之外的任何空格都会发送到浏览器。

```
<?php $a = 'foo';?>
                        <input type="string" />
<?php $b = 'bar';?> 
```

输入将缩进那么多空格。关于“格式化”你的 html 标记：

1) 不要担心格式化您的 HTML，只要它在浏览器中验证或正确显示即可。

2）无论如何，您都应该缩小输出，消除这些空间。

3）如果你真的希望你的 HTML 是原始和正确的，你可以在你的输出中使用[Tidy 。](http://php.net/manual/en/book.tidy.php)

# php - 获取 id 的标签

> ID：10887818
> 
> 赞同：0
> 
> 时间：2012-06-04T20:22:57.043
> 
> 标签：php, mysql, database, kohana, database-performance

获取 id 标签的最佳方法是什么。

这是我面临的问题。

我有很多只包含 id 的表（subject_id、level_id、place_id 等）

显示这些 id 的标签而不进行复杂的 sql 查询的最佳方法是什么（至少有 6 个 id）？

其他不太好的选项是调用 get_label(id,table,lang)

但当然你可以看到每一列的问题（总查询数 = 列 * 行）

有没有更好的解决方案，或者我没有在 6 个表上进行连接就被困住了？

如果有帮助，我正在使用 kohana

这就是我所拥有的...

![在此处输入图像描述](../Images/07596caed832811a967fb0da8dc7a83d.png)

和 subject_id 的主题表：

![在此处输入图像描述](../Images/a5bd9602c265311011b6d8e6e34936a3.png)

我对每个 field_id 都有一个对应的表。

就性能而言，最好在需要时进行连接或仅调用查询以获取特定标签。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:29:53.283

您想为此使用 SQL `JOIN`。

```
SELECT t1.*, t2.subject_en, ...
FROM table1 t1
JOIN table2 t2 ON (t2.id = t1.subject_id) 
```

JOIN 具有更好的性能 - 您只有一个查询，可以由数据库引擎正确优化，同时执行 SELECT 同时迭代初始查询中的行将为您提供 n+1 个单独的查询。

# silverlight - 在 Silverlight 中绑定 ExpandoObject

> ID：10887820
> 
> 赞同：4
> 
> 时间：2012-06-04T20:23:03.503
> 
> 标签：silverlight, dynamic, binding, expandoobject

在 WPF 中，您可以绑定 ExpandoObject 和其他动态类型：

```
 dynamic o = new ExpandoObject();
    o.Foo = "Hello";
    DataContext = o;

<TextBlock Text="{Binding Foo}"/> 
```

这在 Silverlight 5 中不起作用。有没有办法让它起作用，或者有人有这个问题的链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:36:07.347

在 Silverlight 5 中，他们没有添加绑定到动态对象的默认机制，而是添加了一个新接口`ICustomTypeProvider`。并且该接口也没有添加到 ExpandoObject 中，但是使用 expando 您应该能够使用索引器绑定，因为它是一个`IDictionary<string, object>`实现`INotifyPropertyChanged`.

```
<TextBlock Text="{Binding [Foo]}"/> 
```

# python - Python Fileinput openhook=fileinput.hook_compressed 语法使用

> ID：10887823
> 
> 赞同：1
> 
> 时间：2012-06-04T20:23:07.177
> 
> 标签：python, gzip, glob, file-io

我正在尝试使用 glob 打开许多文件并通过一系列函数提供它们。我的一些文件是 gzip 压缩的，有些是 bz2，有些是纯文本。我通常使用 fileinput，但无法弄清楚将其用于压缩文件的语法。基于这个[Python Fileinput Doc](http://docs.python.org/library/fileinput.html)它应该是这样的：

```
openhook=fileinput.hook_compressed 
```

我的代码如下所示：

```
import fileinput
import glob

filestobeanalyzed = glob.glob('./files/*')

for fileName in filestobeanalyzed:
    inputfilename = fileName
    for line in fileinput.input([inputfilename, openhook=fileinput.hook_compressed]):
        #do stuff 
```

我在 = 符号处的 fileinput 行上得到一个无效的语法。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:54:45.877

你要

```
for line in fileinput.input(inputfilename, openhook=fileinput.hook_compressed):
    #do stuff 
```

（我删除了方括号）。您试图在列表构造函数中进行赋值。例如

```
my_list=["foo",bar="baz"]  #this doesn't work (SyntaxError) 
```

您可能从 python 文档中得到了这个想法，该文档使用`[`and`]`来指示函数的可选参数。

这只是一个问题——回溯中通常有更多信息可以帮助确定问题，而不仅仅是错误类型和行号。（阅读：当您有回溯时，如果您粘贴整个内容以便我们可以看到它，通常会受到赞赏）

# asp.net-mvc-3 - MVC3 中的大于或等于今天日期验证注释

> ID：10887824
> 
> 赞同：26
> 
> 时间：2012-06-04T20:23:07.340
> 
> 标签：asp.net-mvc-3, datetime, data-annotations

有没有人看到需要单个选定日期等于或大于当前日期的日期验证的 MVC3 数据注释？

如果已经有第三方添加，那也很酷。我已经在使用 DataAnnotationsExtensions 但它没有提供我正在寻找的东西。

似乎没有任何关于此的参考。所以，希望有人在我尝试重新发明轮子并编写我自己的自定义验证器之前已经解决了这个问题。

我已经尝试过`Range`，但这需要 2 个日期，并且两者都必须是字符串格式的常量，例如，`[Range(typeof(DateTime), "1/1/2011", "1/1/2016")]`但这无济于事。并且 DataAnnotationsExtensions`Min`验证器只接受`int`和`double`

* * *

**更新**已解决

感谢@BuildStarted，这就是我最终得到的结果，它在服务器端运行良好，现在在客户端使用我的脚本

* * *

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace Web.Models.Validation {

    [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public sealed class DateMustBeEqualOrGreaterThanCurrentDateValidation : ValidationAttribute, IClientValidatable {

        private const string DefaultErrorMessage = "Date selected {0} must be on or after today";

        public DateMustBeEqualOrGreaterThanCurrentDateValidation()
            : base(DefaultErrorMessage) {
        }

        public override string FormatErrorMessage(string name) {
            return string.Format(DefaultErrorMessage, name);
        }  

        protected override ValidationResult IsValid(object value, ValidationContext validationContext) {
            var dateEntered = (DateTime)value;
            if (dateEntered < DateTime.Today) {
                var message = FormatErrorMessage(dateEntered.ToShortDateString());
                return new ValidationResult(message);
            }
            return null;
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context) {
            var rule = new ModelClientCustomDateValidationRule(FormatErrorMessage(metadata.DisplayName));
            yield return rule;
       }
    }

    public sealed class ModelClientCustomDateValidationRule : ModelClientValidationRule {

        public ModelClientCustomDateValidationRule(string errorMessage) {
            ErrorMessage = errorMessage;
            ValidationType = "datemustbeequalorgreaterthancurrentdate";
        }
    }
} 
```

在我的模型中

```
[Required]
[DateMustBeEqualOrGreaterThanCurrentDate]
public DateTime SomeDate { get; set; } 
```

客户端脚本

```
/// <reference path="jquery-1.7.2.js" />

jQuery.validator.addMethod("datemustbeequalorgreaterthancurrentdate", function (value, element, param) {
    var someDate = $("#SomeDate").val();
    var today;
    var currentDate = new Date();
    var year = currentDate.getYear();
    var month = currentDate.getMonth() + 1;  // added +1 because javascript counts month from 0
    var day = currentDate.getDate();
    var hours = currentDate.getHours();
    var minutes = currentDate.getMinutes();
    var seconds = currentDate.getSeconds();

    today = month + '/' + day + '/' + year + '  ' + hours + '.' + minutes + '.' + seconds;

    if (someDate < today) {
        return false;
    }
    return true;
});

jQuery.validator.unobtrusive.adapters.addBool("datemustbeequalorgreaterthancurrentdate"); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T20:34:11.977

Create a custom attribute.

```
public class CheckDateRangeAttribute: ValidationAttribute {
    protected override ValidationResult IsValid(object value, ValidationContext validationContext) {
        DateTime dt = (DateTime)value;
        if (dt >= DateTime.UtcNow) {
            return ValidationResult.Success;
        }

        return new ValidationResult(ErrorMessage ?? "Make sure your date is >= than today");
    }

} 
```

code was written off the cuff so fix any errors :)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-04T20:37:15.863

用于`[Remote]`特殊验证，简单易行：

您的型号：

```
[Remote("ValidateDateEqualOrGreater", HttpMethod="Post", 
    ErrorMessage = "Date isn't equal or greater than current date.")]
public DateTime Date { get; set; }
//other properties 
```

你的行动：

```
[HttpPost]
public ActionResult ValidateDateEqualOrGreater(DateTime Date)
{
     // validate your date here and return True if validated
     if(Date >= DateTime.Now)
     {
       return Json(true);
     }
     return Json(false);    
} 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-08T09:02:17.253

完成此任务的简单方法是使用`CompareValidator`.

下面的代码使用 AjaxControlToolKit 的`CalendarExtender`. 将以下代码复制到您的 HTML 指令中

```
<asp:TextBox ID="txtCompletionDate" runat="server" CssClass="txtNormal"></asp:TextBox>
                        <cc1:CalendarExtender ID="CalendarExtender1" TargetControlID="txtCompletionDate"
                            Format="dd/MM/yyyy" runat="server">
                        </cc1:CalendarExtender>
                        <asp:RequiredFieldValidator ID="rfvCompletionDate" runat="server" ControlToValidate="txtCompletionDate"
                            CssClass="labelError" ErrorMessage="*"></asp:RequiredFieldValidator>
                        <asp:CompareValidator ID="cvDate" runat="server" ControlToCompare="hiddenbox" ErrorMessage="*"
                            ControlToValidate="txtCompletionDate" CssClass="labelError" ToolTip="Completion  Date should be greater than or equal to Today"
                            Operator="GreaterThanEqual" Type="Date"></asp:CompareValidator>                        
                        <asp:TextBox ID="hiddenbox" runat="server" CssClass="hiddenbox">
</asp:TextBox> 
```

**在 CSS 中添加以下行**

```
.hiddenbox {display:none;} 
```

# sql - 可能的索引损坏？

> ID：10887825
> 
> 赞同：4
> 
> 时间：2012-06-04T20:23:15.750
> 
> 标签：sql, tsql, msde

![证明](../Images/42405f0a693c263f71e7f766cefe58dc.png)

在上图中，您可以看到我有一个表，当我从中查询一个字段的最大值时，我会根据 where 子句得到不同的结果，其余查询似乎被排除为无关紧要。

后端是 MSDE 2000，前端是用 VB.NET 2008 编写的应用程序，使用通过 VPN 连接到 MSDE 实例的 SSMS 2008R2 执行验证。

这是一个来自应用程序开发的封闭系统，但是如果我能纠正造成这种情况的任何原因，我相信数据库和应用程序都会恢复运行。

问题是当它请求 Max([record_index]) + 1 其中 [station_id] = 10 时，该值作为该表中已经存在的记录出现，并且由于唯一约束而插入失败.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:54:49.363

PK 索引的重新索引解决了该问题，并使上述对 Max([record_index]) 的查询返回与 Max([record_index]) 相同的数字 WHERE... 返回相同的数字，因为它们应该。所以此时索引损坏是唯一合乎逻辑的答案。DB引擎已经12岁了，这是我们唯一一次发生过，我猜我只能接受它

# c# - 什么都不做或抛出异常的方法

> ID：10887827
> 
> 赞同：1
> 
> 时间：2012-06-04T20:23:17.950
> 
> 标签：c#, oop, refactoring

我有一个大方法，其中一部分检查对象的状态，如果状态无效则抛出异常。我应该提取一个方法吗？新方法“CheckState”将什么都不做或抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:33:31.337

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:34:50.270

If I understand you correctly, you mean to say that part of your method checks the state of an object and throws an exception if it is invalid.

You are further asking whether you should move this to its own method(one that checks the state of an object and throws an exception of it is invalid).

The answer really is; probably neither. An exception should really only be thrown in "exceptional" circumstances. If you enter your method and expect the object to be in a valid state, then use it as if it were.

If something occurs that is unexpected, then catch that exception and throw your "InvalidStateException". (If programmed properly this shouldn't even be necessary either.)

If you enter your method and are not sure that your object is in a valid state, then it being in an invalid one is **not** "unexpected" behavior, and it should be handled differently.

This is where your `Check` method would come into place. It shouldn't throw an exception but should probably return a boolean, which will determine what you do next. An invalid object in your case is perfectly reasonable, so use your code to handle that case with a check method that returns its `valid_state boolean`.

[This](http://onjava.com/onjava/2003/11/19/exceptions.html) and [this](https://stackoverflow.com/questions/77127/when-to-throw-an-exception) describe what I am talking about.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:47:22.220

将状态检查与状态更改代码分开甚至是一种很好的做法。但是，如果您的课程在各处都非常依赖状态，那么您可能应该看看[State Design Pattern](http://en.wikipedia.org/wiki/State_pattern)。

在这种模式中，行为差异是通过使用一种方法来建模的，每个 State 类的实现方式都不同。

这可能比以下实现得更好，但它让您尝到了味道：

```
class FooState {
   FooState handleFoo();
   FooState handleBar();
}

class ValidState {
   FooState handleFoo(){...
   }
   FooState handleBar(){
      return InvalidState(stateful);
   }
}

class InvalidState {
   FooState handleFoo() { throw InvalidState(); }
   FooState handleBar() {

       return ValidState(stateful);
   }
}

class StatefulObject {
   public FooState state;
   public void foo(){ state=state.handleFoo(); }
   public void bar(){ state=state.handleBar(); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:24:51.670

如果它真的什么都不做，那么您应该能够安全地完全删除代码。

否则，代码必须做一些事情。在这种情况下，您应该能够安全地创建一个单独的方法，这肯定会使您的代码更干净。

# java - 字符串到 GZIPOutputStream

> ID：10887828
> 
> 赞同：12
> 
> 时间：2012-06-04T20:23:31.647
> 
> 标签：java, compression, gzip, gzipoutputstream

我已经尝试搜索，但找不到任何东西。我正在尝试做的是循环遍历一个列表，在该列表中我从多个列表中的项目组合构造一个字符串。然后我想将这些字符串转储到一个 gzip 文件中。我只是将它转储到一个普通的 ascii 文本文件中，但我似乎无法让它与 gzipoutputstream 一起工作。所以基本上，

循环创建字符串转储字符串到压缩文件 endloop

如果可能的话，我想避免转储到纯文本文件然后压缩它，因为这些文件每个几乎 100 兆。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-04T21:15:56.933

是的，你可以做到这一点没问题。您只需要使用编写器将基于字符的字符串转换为基于字节的 gzip 流。

```
 BufferedWriter writer = null;
    try {
        GZIPOutputStream zip = new GZIPOutputStream(
            new FileOutputStream(new File("tmp.zip")));

        writer = new BufferedWriter(
            new OutputStreamWriter(zip, "UTF-8"));

        String[] data = new String[] { "this", "is", "some", 
            "data", "in", "a", "list" };

        for (String line : data) {
            writer.append(line);
            writer.newLine();
        }
    } finally {         
        if (writer != null)
            writer.close();
    } 
```

另外，请记住 gzip 只是压缩一个流，如果你想要嵌入文件，请参阅这篇文章：[gzip archive with multiple files inside](https://stackoverflow.com/questions/10653683/gzip-archive-with-multiple-files-inside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T12:04:16.613

```
try {
        String srcString = "the string you want to zip.";

        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        GZIPOutputStream gzip = new GZIPOutputStream(stream);
        gzip.write(srcString.getBytes(StandardCharsets.UTF_8));
        gzip.close();

        // the gzip bytes you get
        byte[] zipBytes = stream.toByteArray();

    } catch (IOException ex) {
        // ...
    } 
```

# javascript - CSS 位置固定。Div 包装器必须垂直固定，但必须水平变化

> ID：10887834
> 
> 赞同：6
> 
> 时间：2012-06-04T20:23:45.630
> 
> 标签：javascript, jquery, html, css

我有一个 div ，像这样

```
 #footer
   {   position:fixed;
       left:40px;
       top:0px; 
   } 
```

当我垂直或水平滚动时，位置是固定的。但是我希望当用户垂直滚动滚动条时 div 是固定的，但当用户水平滚动滚动条时应该会有所不同。

我看过一些论坛和帖子，但大多数情况下我发现了 jquery 脚本。我想知道是否有办法在 CSS 中做到这一点？

[仅在一个方向上固定位置](https://stackoverflow.com/questions/4176432/fixed-position-in-only-one-direction-with-css) 我读了这篇文章，但我不理解 jquery 脚本。请让我知道在 css 中执行此操作的方法或使用 jquery 执行此操作的更好方法。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T00:43:27.513

似乎不可能仅使用 CSS/HTML 来获得这种“看起来不错”。正如[Ruup所说](https://stackoverflow.com/users/1435376/ruup)或[仅在一个方向上的固定位置](https://stackoverflow.com/questions/4176432/fixed-position-in-only-one-direction-with-css)所提到的，在 JS 上分层是一个不错的选择。

幸运的是，我找到了一种让它以某种方式工作的方法（不是那么漂亮）： [//jsfiddle.net/MKEbW/5/](http://jsfiddle.net/MKEbW/5/)

HTML（在正文标签内）：

```
<div id="simulated-html">
    <div id="footer">
        <span>
            <!-- Footer text here -->
        </span>
    </div>
    <div id="simulated-body">
        <!-- Your website here -->
    </div>
</div> 
```

CSS：

```
* { margin:0; padding:0; }

html {
    font: 12px/1.5em Georgia;
}
p { padding: 5px; }

html, body {
    height: 100%;
    overflow: hidden; /* hide scrollbars, we create our own */
}

#simulated-html {
    background: orange;
    overflow-x: scroll; /* force horizontal scrollbars (optional) */
    overflow-y: hidden; /* hide. we use the #simulated-body for it. */
    position: relative; /* to align #footer on #simulated-html */
    height: 100%;
}

#simulated-body {
    overflow-y: scroll; /* force vertical scrollbars (optional) */
    overflow-x: hidden; /* hide. we use the #simulated-html for it. */
    height: 100%;
    background: #eee;

    /* use as a container */
    width: 450px;
    margin: 0 auto;
}

#footer {
    position: absolute;
    bottom: 0px; /* vertical align it to #simulated-html */
    width: 100%;
    background: red;
    z-index: 99; /* always show footer */
    color: white;
}
#footer span {
    width: 450px;
    margin: 0 auto;
    background: green;
    display: block;
} 
```

似乎可以在 IE7+ 和现代浏览器中工作，通过 browserlab.adobe.com 进行测试。

在 Chrome 18 中使用滚动条、更小和更宽的视口进行了测试。

我建议对不支持的浏览器和/或 JS 解决方法进行后备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:59:50.993

对前面的代码有一个小修复。

用于水平移动固定 div 的更改 javascript 代码

```
$(window).scroll(function(){
  $('#footer').css('left',-$(window).scrollLeft());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:38:40.180

链接的帖子正是您所需要的。您可以复制确切的脚本。

```
$(window).scroll(function(){
$('#footer').css('left','-'+$(window).scrollLeft());
}); 
```

div css 是这样的（当它有顶部 0px 时可能不是页脚：P 但没关系）

```
#footer
{  position:fixed;
   left:40px;
   top:0px; 
} 
```

当您滚动 jquery 脚本时，只需将 left(x) 坐标调整为与窗口的 scrollLeft 相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:34:39.137

how should the horizontal axis vary? the way this code is currently it would stay 40px from the left at all times. in order to make the left margin change position relative to the size of the window you must use percentages and negative margins. for instance, to center a fixed div:

```
 #centered { 
          height: 350px;
          top: 0;  
          position: fixed;
          width: 1024px; 
          left: 50%; 
          margin-left: -512px; 
          z-index: 9999;
          } 
```

notice that your negative margin must be HALF the width of your div. if you want it 40px to the left of center then you would add another 40px to margin-left.

# c# - 套接字同步发送优于异步开始发送/结束发送？

> ID：10887835
> 
> 赞同：2
> 
> 时间：2012-06-04T20:23:56.523
> 
> 标签：c#, sockets, networking, asynchronous

我正在编写支持大量（50,000+）连接的 tcp 服务器，我发现了这一点。

同步发送的性能至少比异步发送好 3 倍。除了这两行之外，这些程序是相同的：

```
m_socket.Send(sendingBuffer, length, SocketFlags.None); 
```

和

```
m_socket.BeginSend(sendingBuffer, 0, length, 0, new AsyncCallback(SendCallback), this); 
```

在 SendCallback 中，我只调用 EndSend，仅此而已。

这种巨大的性能差异来自哪里？异步方法不应该表现得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:31:16.413

异步方法通常**比**同步方法慢（由于在实现中涉及一些额外的开销），但如果您需要**在**它们执行时执行某些操作，则总体上“更快” - 如果您只是等待它们完成，它们是完全没有必要的.

# python - QueryFrame 在 Windows 上非常慢

> ID：10887836
> 
> 赞同：1
> 
> 时间：2012-06-04T20:23:59.157
> 
> 标签：python, windows, performance, opencv

我在 linux 上构建了一个简单的网络摄像头记录器，效果很好。我得到〜25fps的视频和良好的音频。

我正在将记录器移植到 Windows (win7) 上，虽然它可以工作，但它*无法使用*。QueryFrame 函数需要超过 350 毫秒的时间，即 2.5fps。

代码在 python 中，但问题似乎确实是 lib 调用。

我在具有相同网络摄像头（罗技 E2500）的同一台机器上进行了测试。在 Windows 上，我安装了 openCV v2.2。我现在无法检查，但 Ubuntu 上的版本可能会更高一些。

知道可能是什么问题吗？

编辑：我刚刚安装了openCV2.4，速度也一样慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:00:24.957

我有同样的问题，我发现这是由于长时间暴露造成的。可能是 Windows 驱动程序增加曝光以增加图像亮度。尝试将相机对准光源或手动设置减少曝光

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:07:06.540

如果问题确实存在，`QueryFrame`我怀疑可能会发生以下情况：Windows 的相机驱动程序以 OpenCV 本身不支持的格式检索帧，因此 OpenCV 被迫将帧转换为它可以理解的格式。此操作会消耗 CPU，如果帧的大小很大，您会注意到性能损失。

出于测试目的，您可以：

**1）**为帧设置较小的尺寸，看看它是否提高了性能：

```
cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH, 320);
cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT, 240); 
```

**2）**使用另一台相机，看看问题是否消失。

一旦您确定确实是这样，请尝试查找驱动程序的更新并希望它能解决问题，或者停止使用 Windows。=)

# maven - 如何在 Gradle 构建中指定 Spring propertyPlaceHolderConfig 值？

> ID：10887837
> 
> 赞同：0
> 
> 时间：2012-06-04T20:23:59.580
> 
> 标签：maven, gradle

我正在将现有的 Maven 构建迁移到 gralde 并面临这个问题。在 Maven pom.xml 中，spring propertyplaceholderConfig 值在 Maven 配置文件中指定。Maven 构建指定了三种类型的配置文件 dev、test 和 prod

我想在 gradle build 中实现相同的目标，但直到现在无法弄清楚如何在 gradle 中做到这一点

谢谢，马诺伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:35:56.867

我认为有不同的选项可以使用 gradle 对现有的 mvn 配置文件进行建模。我在这里举一个例子：

假设您有一个如下所示的属性文件：

```
property1=$prop1 //prop1 and prop2 are placeholder for your environment specific values
property2=$prop2 
```

现在您可以在 build.gradle 文件中为您的配置文件建模：

```
def profileProperties = [
    test:[prop1:"testValue1", prop2:"testValue2"],
    dev:[prop1:"devValue1", prop2:"devValue2"],
    prod:[prop1:"prodValue1", prop2:"prodValue2"]
] 
```

这只是一个在 groovy 中定义的普通嵌套映射。

通过将命令行选项“配置文件”传递给您的 gradle 调用

```
gradle clean build -Pprofile=dev 
```

您可以将当前所处的环境传递给您的 gradle 项目。在构建脚本中，您可以通过将以下内容添加到构建文件来区分这一点：

```
def usedProfile = project.getProperty("profile")

processResources{
     expand(profileProperties[usedProfile])
} 
```

这将获取您定义的 profileAttribute 并读取相应的环境属性映射。此环境属性作为映射传递给扩展过滤器方法，该方法是 gradle API 的一部分。查看[http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Copy.html#org.gradle.api.tasks.Copy:expand(java.util.Map](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Copy.html#org.gradle.api.tasks.Copy:expand(java.util.Map) ) 了解详情关于扩展方法。

一个简单的 java 项目的整个 build.gradle 文件现在看起来像这样：

```
apply plugin:'java'

def profileProperties = [
    test:[prop1:"testValue1", prop2:"testValue2"],
    dev:[prop1:"devValue1", prop2:"devValue2"],
    prod:[prop1:"prodValue1", prop2:"prodValue2"]
]

def usedProfile = project.getProperty("profile")
processResources{
    expand(profileProperties[usedProfile])
} 
```

这只是一个草稿，当然您可以在这里使用所有 groovy goodness 在这里添加更多逻辑，例如具有默认配置文件等。

希望有帮助，

问候，勒内

# javascript - jsp如何转义双引号

> ID：10887839
> 
> 赞同：0
> 
> 时间：2012-06-04T20:24:13.527
> 
> 标签：javascript, html, jsp

```
 <center>
    <span class="ReportSubsectionTitle">Report Type</span>
                                    <br />
        <html:radio  styleId="summary" property="reportOutputStyleID" onclick="doDetail();" value="2" />Pending Funding
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
       <html:radio  styleId="detail" property="reportOutputStyleID" onclick="doSummary();" value="1" />Previously Funded
</center> 
```

因此，在加载时，我希望选择默认选项 2。

```
 <body topmargin="0" leftmargin="0" rightmargin="0" onload="window.moveTo(0,0);
                                                       window.resizeTo(screen.availWidth,screen.availHeight);
                                                       window.focus();
                                                       insertOption('number');
                                                       document.achReportCriteria.reportOutputStyleID.value="2";
                                                       doDetail();"> 
```

我厌倦了\"甚至"，但它似乎不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:26:15.200

为什么不使用简单的报价？

```
document.achReportCriteria.reportOutputStyleID.value='2'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:35:40.247

这是最简单，最简单的解决方案和最干净的解决方案：

```
<body topmargin="0" leftmargin="0" rightmargin="0" onload="initializePage()">

<script>
    function initializePage() {
        window.moveTo(0,0);
        window.resizeTo(screen.availWidth,screen.availHeight);
        window.focus();
        insertOption('number');
        document.achReportCriteria.reportOutputStyleID.value="2";
        doDetail();
    }
</script> 
```

并且这个函数甚至可以存储在一个外部的 JS 文件中，以避免每次重新加载页面时都重新加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:42:53.977

就嵌套引号而言，您可以使用单引号，就像您已经使用的一样`insertOption('number')`：

```
document.achReportCriteria.reportOutputStyleID.value='2'; 
```

您在对另一个答案的评论中说那不起作用，但这一定是因为其他一些错误，而不是因为引号。我认为这是因为该语法不适用于选择单选按钮。尝试设置第一个的 checked 属性：

```
document.achReportCriteria.reportOutputStyleID[0].checked = true; 
```

或者，更好的是，与其使用 JS，不如直接在标记中包含选中的属性：

```
<html:radio  styleId="summary" property="reportOutputStyleID"
 onclick="doDetail();" value="2" checked="checked" /> 
```

# python - Python 和 UDP 监听

> ID：10887844
> 
> 赞同：8
> 
> 时间：2012-06-04T20:24:46.733
> 
> 标签：python, udp

我有一个应用程序，软件定义的无线电，它在一个端口上广播 UDP 数据包，告诉听众已经设置了什么频率和解调模式（除其他外）。

我编写了一个演示 python 客户端（下面的代码），它监听端口，并将适当数据包中的信息转储到控制台。

它们都在 OSX 10.6、Snow Leopard 下运行。他们在那里工作。

我遇到的问题/问题是：Python 应用程序必须在无线电应用程序之前启动，或者它声称在绑定期间端口已在使用中（ERRNO 47），我不明白为什么。广播应用程序正在广播 UDP；当然，我想容纳多个听众——这就是广播的想法，或者至少我是这么想的。

所以这是 Python 代码（由于堆栈溢出的“make-it-code”缩进非常愚蠢，缩进有点混乱，但我向你保证没关系）：

```
#!/usr/bin/python
import select, socket 

# AA7AS - for SdrDx UDP broadcast

# this is a sample python script that captures the UDP messages
# that are coming from SdrDx. SdrDx tells you what frequency and
# mode it has been set to. This, in turn, would be used to tell
# another radio to tune to that frequency and mode.

# UDP packet from SdrDx is zero terminated, but receiving the
# packet makes it seem like the string contains zeros all the
# way out to the 1024th character. This function extracts a
# python string up to the point where it hits the first zero,
# then returns that string.
# -----------------------------------------------------------
def zeroterm(msg):
    counter = 0;
    for c in msg:
        if ord(c) != 0:
            counter += 1
    strn = msg[:counter]
    return strn

port = 58083        # port where we expect to get a msg
bufferSize = 1024   # room for message

# Create port to listen upon
# --------------------------
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
try:
    s.bind(('', port))
except:
    print 'failure to bind'
    s.close()
    raise
    s.setblocking(0)

# Listen for messages
# -------------------
looping = True

while looping:
try:
    result = select.select([s],[],[])
except: # you can kill the client here with control-c in its shell
    s.close()   # must close socket
    print 'Closing, exception encountered during select' # warn
    raise SystemExit    # and quit
msg = result[0][0].recv(bufferSize) # actually fetch the UDP data
msg = zeroterm(msg) # convert content into python string

# in next line, [] contain optional repeats
# message format is keyword:data[|keyword:data]
# where from 1...n keyword:data pairs may appear, up to 1024 bytes
# ----------------------------------------------------------------

try:
    msgs = msg.split('|')       # can be more than one message in packet
except: # failed to split
    msgs = []                   # on the other hand, can just be one. :)
    msgs.append(msg)            # so build array with that one.
for m in msgs:                  # now, for every message we have
    keyw,data = m.split(':')    # break into keyword and data
    print keyw + "-->" + data   # you'd do something with this
    if keyw == "closing":       # Our client terminates when SdrDx does
        looping = False         # loop stops

 s.close()                          # must close socket
print 'Normal termination' 
```

作为参考，这是发送 UDP 消息的 Qt 代码：

设置：

```
bcast = new QHostAddress("192.168.1.255");
if (bcast)
{
    udpSocketSend = new QUdpSocket(0);
    if (udpSocketSend)
    {
        udpSocketSend->bind(*bcast, txudp);
    }
} 
```

播送：

```
if (udpSocketSend)
{
    QByteArray *datagram = new QByteArray(1024,0);  // datagram is full of zeroes
    strcpy(datagram->data(),msg);                   // except where text message is in it at beginning
    udpSocketSend->writeDatagram(*datagram, QHostAddress::Broadcast,txudp); // send
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:36:26.320

您正在尝试绑定相同的端口，两次。

您在发件人中绑定一次：

```
if (udpSocketSend)
{
    udpSocketSend->bind(*bcast, txudp);
} 
```

并再次在接收器

```
s.bind(('', port)) 
```

而且由于它们在同一台机器上运行，因此您会收到错误消息。

除非您关心源端口是什么，否则您不需要`bind()`在发送方上，只需发送它，堆栈就会选择适当的传出源端口号。在发送方的情况下，当您传输 UDP 数据报时，您指定目的地 ( `udpSocketSend->writeDatagram(...)`)，并且`bind`实际确定传出数据报的*来源*。如果你不这样做`bind`，那很好，堆栈会为你分配一个端口。

如果您*确实*关心源端口是什么，那么我建议您为传出源端口和传入目标端口使用不同的端口号。然后你就可以毫无问题地绑定发送者和接收者。

最后，可以选择设置`SO_REUSEADDR`套接字选项（以您使用的任何语言）。如果您想在同一台机器上运行*多个客户端*，这将是必要的，因为所有客户端都必须绑定到同一个地址。但是，我不确定这个套接字选项是否是跨平台的（*nix 工作正常），我认为上述建议更好。

# javascript - 将变量传递给函数

> ID：10887847
> 
> 赞同：0
> 
> 时间：2012-06-04T20:24:58.980
> 
> 标签：javascript, jquery

我声明了一个变量：

```
var recent; 
```

我写了一个需要传递变量的函数。但是，我相信正在发生的事情是变量作为字符串传递。var 表示为`thisVar`：

```
function detachVariable(thisDiv, thisVar, fileName) {

    //Check if this section is visible:
    if($(thisDiv + " li").length > 0) {
        $(thisDiv).prepend(thisVar);
    } else {

        //If variable does not have content stored, store it:
        if(thisVar === undefined) {

            $("#site-nav li a").parents().removeClass("nav-active");
            $(this).addClass("nav-active");
            $(thisDiv + " ul.top-level").load('assets/includes/' + thisFile, function () {
                $(this).show().siblings().hide();
                ajaxAudioController();
            });

            //If variable has content, show it:
        } else {
            $("#site-nav li a").parents().removeClass("nav-active");
            $(this).addClass("nav-active");
            $(thisDiv).prepend(thisVar);
        }
    }

} 
```

我的点击功能：

```
$("#site-nav .nav1").on("click", function (event) {
    detachVariable("#recent", "recent", "recent.php");
    event.preventDefault();
}); 
```

有没有办法可以将我的变量传递给函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:26:56.450

如果我理解正确.. 你所要做的就是删除`recent`.. 周围的引号，见下文，

```
detachVariable("#recent", recent, "recent.php"); //removed quotes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:28:11.910

只需省略第二个参数周围的引号。使用它们，您确实传递的是字符串文字而不是变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:28:14.933

Javascript 中的变量具有全局范围。因此，您实际上可以直接使用`recent == whatever`而不是尝试将其作为参数传递。

# c# - lambda表达式如何表达or？

> ID：10887851
> 
> 赞同：0
> 
> 时间：2012-06-04T20:25:15.007
> 
> 标签：c#

我想使用 lambda 表达式来搜索状态等于 1 或 2。我的代码如下：

```
return database.Find<Patient>(p=>(p.Id==Id && p.status ==1)||(p.Id==Id && p.status==2)); 
```

我知道这是不对的，但是您可以从上面的代码中了解我想要做什么。

我用c#

* * *

更新：对不起，我只是意识到这不是语法的原因，而是我用来从数据库获取数据的第三方 api 的原因。请关闭这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T20:27:06.903

```
return database.Find<Patient>(p=>p.Id==Id && 
        (p.status ==1 || p.status==2)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T20:27:39.417

好吧，它可以简化一点，但它应该像你所拥有的那样在语义上等同于下面的简化版本。

```
return database.Find(p => p.Id == Id && (p.Status == 1 || p.Status == 2)); 
```

需要注意的一件事；您说您需要找到状态为 1 或 2 的患者，但您的代码显示为 1 或 20。您是否直接复制了该代码段（即，这是一个简单的拼写错误问题吗？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:27:58.523

我可能会减少一点，但我认为你现在所拥有的应该可以工作。

```
return database.Find<Patient>(p => p.Id==Id && (p.status == 1 || p.status == 2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T20:29:01.983

也许你写的是“20”而不是“2”？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T20:28:50.877

我假设`database`在这个代码片段中是指一个有效的 DataContext。我会使用`Where`而不是`Find`：

```
return database.Where(p=>(p.Id == Id && (p.status == 1 || p.status == 20)); 
```

# java - StringBuilder 可能存在内存泄漏？

> ID：10887858
> 
> 赞同：0
> 
> 时间：2012-06-04T20:26:09.670
> 
> 标签：java, file-io, memory-leaks

我正在使用 a`StringBuilder`创建一个`File`对象，但也使用它来查看文件所在的目录是否存在：

```
StringBuilder sbFile = new StringBuilder();
sbFile.append("/home/logs/");

File oFile = new File(sbFile.toString());

if(!oFile.exists())
    oFile.mkdir();

sbFile.append("MyLogFile.log");

oFile = new File(sbFile.toString()); 
```

但我担心在字符串生成器（ vs ）`oFile`的两个不同“版本”上重用相同的引用会造成内存泄漏。如果是这样，我应该如何以不同的方式写这个？`/home/logs/``/home/logs/MyLogFile.log`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T20:30:37.877

没有内存泄漏。首次创建的实例，`File`在不再使用时会被 JVM 进行垃圾回收。

另一件事是您实际上并不需要使用`StringBuilder`. `File`类有一个构造函数，它接受一个*父对象*和一个文件名。您的示例可能如下所示：

```
File parent = new File("/home/logs/");
if(!parent.exists())
    parent.mkdir();

File file = new File(parent, "MyLogFile.log");
// TODO: do something with file... 
```

此外，您可能对[Java 中垃圾收集的工作](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)方式感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T20:29:22.820

你没有什么可担心的。字符串在 Java 中是不可变的，不会给您带来内存泄漏（至少不是您使用它们的方式）。`sbFile.toString()`每次调用它时都会创建一个新的不可变字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:45:18.330

没有内存泄漏，垃圾收集器返回旧未使用对象的重用内存。

关于`File oFile`您在代码中使用 2 个不同的对象。您在此处创建的第一个对象：

```
File oFile = new File(sbFile.toString()); 
```

当您再次使用 oFile 引用并且在等待垃圾收集的任何地方都没有引用旧对象时。

每当`StringBuilder sbFile`您使用它的 toString() 方法时，都会创建一个新的不可变 String 对象（Java 中的 String 对象始终是不可变的）。因此，在第二次`sbFile.toString()`调用中，创建了第二个 String 对象，并且垃圾收集器可以安全地删除第一个 String 对象。

# php - PHP数值方法

> ID：10887863
> 
> 赞同：2
> 
> 时间：2012-06-04T20:26:21.257
> 
> 标签：php, numerical-methods

我有一个非线性函数，我需要为它找到一个根。有谁知道是否有实现数值方法的 PHP 库？

（我可以编写方法，但我想知道是否有一个库可以完成这项工作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:28:53.860

[PEAR](http://pear.php.net/)有[Math_Numerical_RootFinding](http://pear.php.net/package/Math_Numerical_RootFinding/docs/latest/li_Math_Numerical_RootFinding.html)。

# windows - 如何使用其 ID 检索线程的起始地址？

> ID：10887866
> 
> 赞同：1
> 
> 时间：2012-06-04T20:26:28.667
> 
> 标签：windows, winapi

我想使用它的 ID 获取线程的起始地址。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:38:50.937

您只需要[OpenThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684335%28v=vs.85%29.aspx)并调用[NtQueryInformationThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684283%28v=vs.85%29.aspx)

第二个参数设置为`ThreadQuerySetWin32StartAddress`

也可以参考这篇[文章](https://stackoverflow.com/questions/10159516/get-thread-start-address)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:39:54.943

嗯，这并不是微不足道的，原因如下：在 Win32 子系统中，*所有*线程都具有相同的起始地址。在 Windows 到（但不包括）Vista 中，它位于内部（根据官方符号`kernel32.dll`命名）。`BaseThreadStartThunk`在从 Vista 开始的 Windows 版本中，公共起始地址现在`RtlUserThreadStart`位于`ntdll.dll`（并且已`BaseThreadStartThunk`重命名为`BaseThreadInitThunk`并且现在似乎只执行特定于 Win32 的任务）。

但是，您可以*尝试*暂停线程，检索其`CONTEXT`（使用`GetThreadContext`）并从中遍历堆栈回到其顶部以调查那里的参数。这将需要对线程启动例程的每个实现进行一些逆向工程`kernel32.dll`，但它应该是可行的。

另一种方法是使用未记录的原生 API[`NtQueryInformationThread`](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/Thread/NtQueryInformationThread.html)和`ThreadQuerySetWin32StartAddress`. 还有[一个关于该功能的 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684283.aspx)，但还远远不够。

# android - ndk-build arm-linux-androideabi-gcc：找不到命令

> ID：10887868
> 
> 赞同：1
> 
> 时间：2012-06-04T20:26:38.450
> 
> 标签：android, android-ndk

我花了一整天时间看了几个教程，但我无法让 ndk-build 编译我的 make 文件。要查看我当前的代码是什么，请查看我在此处关注的教程：[https ://thenewcircle.com/s/post/1153/introduction_to_ndk](https://thenewcircle.com/s/post/1153/introduction_to_ndk)

我在 Windows 7 64 位系统上，所以我正在运行 Cygwin。我转到项目目录“FibonacciNative”并输入“ndk-build”，这就是我得到的：

```
$ ndk-build
make: /cygdrive/c/Android/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows-/bin/arm-linux-androideabi-gcc: Command not found
make: /cygdrive/c/Android/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows-/bin/arm-linux-androideabi-gcc: Command not found
Compile thumb  : com_marakana_android_fibonaccinative_FibLib <= com_marakana_android_fibonaccinative_FibLib.c
/bin/sh: /cygdrive/c/Android/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows-/bin/arm-linux-androideabi-gcc: No such file or directory
/cygdrive/c/Android/android-ndk-r8/build/core/build-binary.mk:240: recipe for target `obj/local/armeabi/objs/com_marakana_android_fibonaccinative_FibLib/com_marakana_android_fibonaccinative_FibLib.o' failed
make: *** [obj/local/armeabi/objs/com_marakana_android_fibonaccinative_FibLib/com_marakana_android_fibonaccinative_FibLib.o] Error 127 
```

我总是得到“找不到命令”。我究竟做错了什么？

谢谢马特

安装东西的文件夹：
C:\Android\android-ndk-r8
C:\Android\android-sdk
C:!Personal\eclipse/FibonacciNative
C:\cygwin

在 Cygwin 中，我有 gcc-core、gcc-mingw-core、libgcc1。
我可能错过了 Cygwin 的一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:32:05.883

看起来这是脚本中的错误。我将 HOST_TAG 硬编码到 \build\core\init.mk 中的窗口，一切正常。向克里斯·斯特拉顿 +1 寻求帮助。

```
# If we are on Windows, we need to check that we are not running
# Cygwin 1.5, which is deprecated and won't run our toolchain
# binaries properly.
#
ifeq ($(HOST_TAG),windows-x86)
    ifeq ($(HOST_OS),cygwin)
        # On cygwin, 'uname -r' returns something like 1.5.23(0.225/5/3)
        # We recognize 1.5\. as the prefix to look for then.
        CYGWIN_VERSION := $(shell uname -r)
        ifneq ($(filter XX1.5.%,XX$(CYGWIN_VERSION)),)
            $(call __ndk_info,You seem to be running Cygwin 1.5, which is not supported.)
            $(call __ndk_info,Please upgrade to Cygwin 1.7 or higher.)
            $(call __ndk_error,Aborting.)
        endif
    endif
    # special-case the host-tag
    HOST_TAG := windows
endif

HOST_TAG := windows 
```

我通过在“找不到主机 tols 预建目录”之后搜索消息中的拼写错误找到了它：)

# objective-c - IOS应用程序中的虚拟和真实内存

> ID：10887869
> 
> 赞同：0
> 
> 时间：2012-06-04T20:26:39.250
> 
> 标签：objective-c, ios, memory-management, cocos2d-iphone

我的应用程序在物理上占用的内存量（例如在硬盘驱动器上）是否与运行时占用的内存量有任何关系？例如，我的 Background.caf 文件占用了 4.9 兆字节的磁盘空间，当在 iPhone 上运行时，是否正好为我的音乐分配了 4.9 兆字节的空间？同样，如果我的图形占用 20 兆字节的空间，iPhone 上用于存储和访问这些图形的内存量是否相当于 20 兆字节？这很重要，因为我想知道我现在正在使用的文件的大小是否会对性能产生很大影响。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:09:41.347

> 我的应用程序在物理上占用的内存量（例如在硬盘驱动器上）是否与运行时占用的内存量有任何关系？

不，绝对不是。否则 Autodesk 很快就会倒闭！

> 在 iPhone 上运行时，是否为我的音乐分配了 4.9 兆字节？

不，音乐不会一次全部加载到内存中，它是以块、流或实时解压缩的形式发送的，但绝不会全部存在于内存中。

> 同样，如果我的图形占用 20 兆字节空间，iPhone 上用于存储和访问这些图形的内存量是否相当于 20 兆字节？

这取决于。UIImage 按需加载并根据调用的方法进行缓存（例如`+imageNamed:`是否缓存`+imageWithContentsOfFile:`），然而，PNG 资源占用的内存总是比它们的文件大小略多，因为 Xcode 在将它们加载到捆。缓存图像确实会稍微增加整体内存占用，但是，它会导致更快的图像加载，因为 UIImage 不必再次在磁盘上查找它。

JPEG 图像再次改变了这种情况，它具有著名的文件格式特定的有损压缩机制，允许它们在磁盘上小得多，但在内存中却很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:30:07.903

音频文件作为流加载，它们不会占用应用程序的 20M 内存对于图像文件不确定，但我仍然知道 ios 会缓存您使用应用程序加载的图像，因此我无法为您提供有关的确切信息图像

# ember.js - 我可以为 ember-data 模型属性定义默认值吗？

> ID：10887873
> 
> 赞同：22
> 
> 时间：2012-06-04T20:26:57.987
> 
> 标签：ember.js, ember-data

当我在 ember-data 中为模型定义属性时，我可以指定默认值吗？

ember-data[模型定义](https://github.com/emberjs/data#defining-models)建议属性定义如下：

```
attributeName: DS.attr('number') 
```

...带有可选的第二个参数作为选项哈希。我查看[了代码](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/attributes.js)，但我的代码阅读技能无法弄清楚我可以在选项哈希中放入哪些属性。有可能做这样的事情吗？

```
attributeName: DS.attr('number', { default: 0 }) 
```

或者

```
attributeName: DS.attr('boolean', { default: false }) 
```

?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-04T21:41:08.740

你很接近，它是`defaultValue`，见[attributes.js#L63-65](https://github.com/emberjs/data/blob/b4a415e1be4db3673a102b3fdc45b6bd22d46d59/packages/ember-data/lib/system/model/attributes.js#L63-65)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-14T21:28:34.263

如果属性为 null，则 defaultValue 不起作用。它仅适用于“未定义”属性。[看到这个](https://github.com/emberjs/data/blob/b4a415e1be4db3673a102b3fdc45b6bd22d46d59/packages/ember-data/lib/system/model/attributes.js#L63-65)

# c# - C#快速图表近似比较算法

> ID：10887881
> 
> 赞同：1
> 
> 时间：2012-06-04T20:27:24.540
> 
> 标签：c#, algorithm, charts

我有两个系列的价值观。通过在图表中显示它们，它们非常相似（它们具有相同的行为，当一个增长时，另一个增长，当一个具有较小的值时，另一个具有较小的值；但是：可能会出现一个正在增长并且另一个是下降的）。重要的是它们没有严格相同的值。我对这两个图表的一般行为感兴趣。

现在，我通过在两张图上取平均值并构建 2 个 bool 数组来比较它们。当某个值高于平均值时，bool[] 中对应的值为真，否则为假。然后我使用汉明距离比较这两个 bool[]。该算法有效，但不如我希望的那么好。（它不会检测图表之间的所有匹配项）。

有没有人知道执行此操作的更好算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:05:19.293

计算两个数字列表之间距离的一种简单方法是计算它们之间差异的平方和。这在统计中经常使用。

```
double sum = 0.0;
for (int i = 0; i < N; i++) {
    double diff = a[i] - b[i];
    sum += diff*diff;
} 
```

但最根本的问题是，你期望从这样的分析中得到什么样的陈述。

* * *

另一种可能性是计算两个系列之间的[相关系数。](http://mathbits.com/mathbits/tisection/statistics2/correlation.htm)系数`+1`表示两个系列拟合 100%，`0`表示这两个系列之间没有明显的关系，`-1`表示它们彼此完全相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:03:09.770

为了获得更好的性能，我会使用“零均值检验”。它包括使用置信区间检查两个样本的平均值是否显着不同。

基本上，它包括：

1.  计算图表所有点的差值
2.  计算这些差异的平均值和标准误差（下一点需要）
3.  计算确定置信度的置信区间（95%、99%、...，取决于您想要的精度）

如果该间隔包含值 0，则图表没有不同。

这种方法的问题是您需要一个统计库来计算间隔，所以我不确定它是否适合您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:30:28.317

现在你只区分大于或小于 & 等于的 2 个状态。

我会使用 1、0 -1 或创建一个枚举来表示更大、相同、更少。这样您就可以区分所有三种状态。

# wpf - 在 WPF 中绑定嵌套的 ListView

> ID：10887882
> 
> 赞同：0
> 
> 时间：2012-06-04T20:27:25.123
> 
> 标签：wpf, listview, binding, nested

我有一个简单的 ListView，其中有另一个 ListView。我似乎无法让内部列表视图与我的实际列表<>绑定，它只是显示为空。

我的代码：

```
public CollectionViewSource CVSmain {get;set;} //Which is actually a List<MyClassViewModel>, my main ListView bounds to this correctly

public class MyClassViewModel{

    public class MySubClass{
          public string Name{return _name;}
    }

    List<MySubClass> MyList = new List<MySubClass>();
    public string MyText{get;set;}
} 
```

我的 XAML：

```
<ListView DataContext="{Binding CVSmain}" ItemsSource="{Binding}" >
        <ListView.View>
            <GridView>
                <GridViewColumn DisplayMemberBinding="{Binding MyText}" Header="My Text"/>
                <GridViewColumn Header="My List">
                <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <ItemsControl ItemsSource="{Binding MyList}">
                                <ItemsControl.Template>
                                    <ControlTemplate TargetType="ItemsControl">
                                        <ItemsPresenter/>
                                    </ControlTemplate>
                                </ItemsControl.Template>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <ListView>
                                            <ListView.View>
                                                <GridView>
                                                    <GridViewColumn DisplayMemberBinding="{Binding Name}" Header="Name"/>                                                  </GridView>
                                            </ListView.View>
                                        </ListView>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn> 
```

如果我只是放置一个带有“{Binding Name}”的文本块而不是我的第二个 ListView，它就可以工作。不知道如何绑定这个内部 ListView，有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:05:22.447

您有三个嵌套控件：外部 ListView、中间的 ItemsControl，然后是内部 ListView。我认为 ItemsControl 是不必要的。尝试更换

```
 <ItemsControl ItemsSource="{Binding MyList}"> 
  ...
 </ItemsControl> 
```

经过

```
 <ListView ItemsSource="{Binding MyList}"> 
     <ListView.View>  
        <GridView>  
            <GridViewColumn DisplayMemberBinding="{Binding Name}" Header="Name"/> 
        </GridView>  
     </ListView.View> 
 </ListView> 
```

此外，改变

```
List<MySubClass> MyList = new List<MySubClass>(); 
```

到

```
public List<MySubClass> MyList { get; set; } 
```

因为您只能绑定到公共属性，而不能绑定到私有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:06:44.520

请注意，这`MyText`是公共财产，`MyList`必须是公共财产。

# flash - 带有外部文本的水平动态文本滚动

> ID：10887889
> 
> 赞同：0
> 
> 时间：2012-06-04T20:28:09.893
> 
> 标签：flash, actionscript, actionscript-2

如果我将文本放在 上，我有一些脚本效果很好`Dynamic Text`，但是如果我从外部`.txt`文件加载它，我加载的文本不会插入到动态文本中。

这是我的代码：

在我的外部 txt 文件中，我使用这个：

```
_txt=Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
```

我用它来加载外部文本。

```
loadText = new LoadVars();
loadText.load("letreiro.txt");
loadText.onLoad = function() {
    _root.textoletreiro = this._txt;
    trace(_root.textoletreiro); // the Output shows the text!
    mcText._txt.text = _root.textoletreiro; // here i'm puting the text on the Dynamic Text, but is not working.
}; 
```

这是我的水平滚动代码：

```
var resetPos:Number = (mcText._txt._x * -1) + 2; 
var endOfText= mcText._txt._x - (mcText._txt.textWidth + 5); 

function scroller()
{   

    mcText._txt._width = mcText._txt.textWidth;
    mcText._txt.multiline = false;
    mcText._txt.autoSize = "right";

    mcText.onEnterFrame = function() {
        mcText._txt._x -= 1;  
        if (mcText._txt._x < endOfText)
        {
            mcText._txt._x = resetPos;
            delete this["onEnterFrame"]; 
            scroller();
        }
    }
}
scroller(); 
```

我做错了什么？

PS：用我的来源编辑`letreiro.txt`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:41:26.820

假设您在舞台上有一个名为 mcText 的 MovieClip，位于 0,0 并且在其中一个名为 _txt 的 TextField 内，则以下代码滚动您的文本，直到它到达容器的边缘，然后重置为 0 并再次滚动：

```
var text:String = "here is some text I would like to scroll.";
var fmt:TextFormat = new TextFormat("Arial", 32);

mcText._txt.multiline = false;
mcText._txt.wordWrap = false;
mcText._txt.autoSize = true;
mcText._txt.text = text;
mcText._txt.setTextFormat(fmt);

function scroller()
{   

    mcText.onEnterFrame = function() {
        mcText._txt._x -= 2; 

        if (Math.abs(mcText._txt._x) >= mcText._txt._width)
        {
            mcText._txt._x = 0;
            delete this["onEnterFrame"]; 
            scroller();
        }
    }
}
scroller(); 
```

# twitter-bootstrap - Twitter Bootstrap - 表单中的复选框列/列

> ID：10887893
> 
> 赞同：20
> 
> 时间：2012-06-04T20:28:33.273
> 
> 标签：twitter-bootstrap

我有一个包含多个复选框的表单字段 - 如何将复选框显示为 3 列而不是 1 列？

与此类似的东西：

![在此处输入图像描述](../Images/33d7df861df92b295b16c70b34f32c41.png)

我尝试在其中添加一个行/跨度 div，`<div class="controls">`但它似乎正在添加一个左填充。

我知道文档中有内联复选框示例，但元素未对齐。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-05T00:31:58.140

您可以通过分隔 `.control-group`容器内的复选框块而不是每个`.control`容器来实现这样的设置，如下所示：

```
<div class="control-group">
    <p class="pull-left">Payment Types</p>
    <div class="controls span2">
        <label class="checkbox">
            <input type="checkbox" value="option1" id="inlineCheckbox1"> Cash
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option2" id="inlineCheckbox2"> Invoice
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> Discover
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> Financing
        </label>
    </div>
    <div class="controls span2">
        <label class="checkbox">
            <input type="checkbox" value="option1" id="inlineCheckbox1"> Check
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option2" id="inlineCheckbox2"> American Express
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> MasterCard
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> Google Checkout
        </label>
    </div>
    <div class="controls span2">
        <label class="checkbox">
            <input type="checkbox" value="option1" id="inlineCheckbox1"> Traveler's Check
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option2" id="inlineCheckbox2"> Diner's Club
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> Visa
        </label>
        <label class="checkbox">
            <input type="checkbox" value="option3" id="inlineCheckbox3"> Paypal
        </label>
    </div>
</div> 
```

演示：http: [//jsfiddle.net/LVFzK/468/show/](http://jsfiddle.net/LVFzK/468/show/)

# android - 与 SQLite 数据库和 Android 日历同步

> ID：10887899
> 
> 赞同：2
> 
> 时间：2012-06-04T20:28:59.883
> 
> 标签：android, sqlite, calendar, sync

`SQLite`关于在我的应用程序的数据库、用户的数据库`Calendar`和网络服务器之间同步数据，我有一个相当复杂的问题。

这本质上是我需要的行为：

`onResume()`: any on any**上的****任何修改`Event`s都会导致我的应用程序数据库中的更新。`Calendar``Account``SQLite`**（当然，只有`Account`用户指定）。

我现在正在写的是`SQLite`用每个事件更新我数据库中的每个条目`Calendar`，无论它是否在`onResume()`. 当然，这并不理想。

我已经能够将所有事件提取到我的应用程序的`SQLite`数据库中，并在我的数据库和我的网络服务器之间进行同步。主要问题是我的`SQLite`数据库和`Calendar`. 从[我的研究](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)中，我了解到，`DIRTY`如果您实现自己的，则只能写入日历上的标志`SyncAdapter`。这也需要我实现一个`ContentProvider`我想避免的。所以我的问题是：

1.  是否有任何可靠的方法可以在`Calendar`不实现 SyncAdapter 的情况下查看修改后的事件？
2.  如果没有，是否可以保证我能够`DIRTY`为我的应用程序维护自己的标志？我知道 Google 使用该`DIRTY`标志将`Calendar`s 与 Google 日历同步。如果 Google 日历不断设置和重置此标志，它不会帮助我维护我的应用程序。
3.  是否有针对此类问题的推荐设计方法，否则我会忘记这些方法？例如另一种为每个保留“last_modified”类型标志的方法`Calendar Event`？

干杯。

**编辑：**我还应该补充一点，我现在的应用程序针对的是 Android 4.0+，但我希望将来支持所有版本。

# android - Android Sqlite3 数据库：SQLite 中的光标不返回 null？

> ID：10887900
> 
> 赞同：0
> 
> 时间：2012-06-04T20:29:00.567
> 
> 标签：android, sqlite

有人可以告诉我为什么我只得到`true`结果，即使我的数据库中不存在该记录？

为了澄清，在我的表中，`_id`是电话号码。

这是我的代码：

```
public boolean checkifExists(String number){
    String[] columns = new String[]{"_id"};
    String[] wehreargs = new String[]{number};
    this.openDataBase();
    if (myDataBase.query("mytable", columns, "_id=?", wehreargs, null, null, null)==null){
        myDataBase.query("mytable", columns, "_id=?", wehreargs, null, null, null).close();
        this.close();
    return false;
    } else {
        myDataBase.query("mytable", columns, "_id=?", wehreargs, null, null, null).close();
        this.close();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:38:39.080

`query`返回一个[`Cursor`](http://developer.android.com/reference/android/database/Cursor.html)总是非空的。您必须从 中读取[`Cursor`](http://developer.android.com/reference/android/database/Cursor.html)以获取结果`query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:55:02.840

正如@DougCurrie 提到的：查询只返回非空游标：修改你的代码：

```
public boolean checkifExists(String number){
    String[] columns = new String[]{"_id"};
    String[] wehreargs = new String[]{number};
    this.openDataBase();
    Cursor c = myDataBase.query("mytable", columns, "_id=?", wehreargs, null, null, null)
    boolean hasEntry = c.moveToFirst()
    c.close();
    this.close()
    return hasEntry;
} 
```

# perl - 递归中的prepare_cached dbi

> ID：10887903
> 
> 赞同：0
> 
> 时间：2012-06-04T20:29:08.063
> 
> 标签：perl, dbi

当我使用准备函数时，我正在使用 DBi 递归调用 DB 上的表，一切正常，但是当我使用 prepare_cached 时，我收到一条错误消息，提示 prepare_cached 失败

在我的代码片段下面

```
sub rec {

my $data = shift;
my $dbh = shift;

if($x eq 'foo') { 

return 1;
 }

my $query="select x from table where z =?";

my $sth=$dbh->prepare_cached($query);
$sth= $dbh->execute($data);

 while(my ($x)=$sth->fetchrow_array) {   
$rec($x,$dbh);

}

} 
```

有人可以帮助可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:51:55.403

问题是您正在迭代 $sth 并在执行此操作时再次递归并执行。因为这作用于相同的 $sth，所以这是行不通的（prepare_cached 将调用 $sth->finish，请参阅 DBI 文档）。

所以如果可能的话，把你的行放到一个数组中，做 $sth->finish 然后递归数组。或者使用普通的 prepare()。根据 DBS，这可能足够高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T21:00:35.917

我认为在这种情况下，您应该为 prepare_cached 使用“$if_active”参数，可能将其设置为 3，如下所示： $sth = $dbh->prepare_cached($query, {}, 3) 这会做什么，但是，如果您的递归速度比查询完成的速度快，很可能，您可能从使用 prepare_cached 获得的任何性能提升都将丢失：如果缓存中的语句句柄仍在使用中，它将创建一个新句柄为你。

tinita 的建议听起来不错，但我要指出，通常没有任何理由调用 $sth->finish 自己（它本质上是错误命名的，实际上它的意思是“我已经完成了这个，所以把剩下的数据扔掉这套藏在服务器上”）。

# google-apps-script - 如何通过按 Google App Script UIApp 中的按钮在当前窗口中打开链接？

> ID：10887906
> 
> 赞同：0
> 
> 时间：2012-06-04T20:29:15.273
> 
> 标签：google-apps-script

我正在编写一个允许用户登录该站点的脚本。我已经完成了所有工作，但是在按下登录按钮对用户进行身份验证后，我似乎无法找到打开新链接的方法。

脚步：

1.  用户输入用户名和密码
2.  用户已通过身份验证
3.  如果用户存在于电子表格中，则会打开一个指向用户个人资料的链接（这是我似乎无法使用的链接）。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:57:03.710

您是否尝试过使用[锚点](https://developers.google.com/apps-script/class_anchor?hl=fr-FR)，我认为它可以满足您的需求，不是吗？一旦用户通过身份验证，您就可以使其可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:38:12.627

这是一个工作示例：输入其中一个名称，如果 3 个字母正确，则显示链接

```
function showDialog() {
  var app = UiApp.createApplication();
  app.setTitle("AnchorTest");
  var panel = app.createVerticalPanel();
  var txtBox = app.createTextBox().setName("tbox");
  var subm = app.createAnchor('OK', 'href').setId('subm').setVisible(false);
  var fake = app.createButton('Enter your lastName').setId('fake');
  panel.add(txtBox).add(subm).add(fake);
  var keyHandler = app.createServerHandler("textkey");
  txtBox.addKeyUpHandler(keyHandler);
  keyHandler.addCallbackElement(panel);
  var clickHandler = app.createServerHandler("showurl");
  subm.addClickHandler(clickHandler)
  clickHandler.addCallbackElement(panel);
  app.add(panel);
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
}
//
function textkey(e){
  var app = UiApp.getActiveApplication();
  var href = app.getElementById('subm');
  var fake = app.getElementById('fake');
  href.setVisible(false);
  fake.setVisible(true);
  var txtValue = e.parameter.tbox;
  var data=SpreadsheetApp.getActiveSheet().getDataRange().getValues();
    Logger.log(data)
    Logger.log(txtValue.length);
    if (txtValue.length>2){
      for(nn=0;nn<data.length;++nn){
        Logger.log(txtValue+'  '+data[nn][0])
          if(data[nn][0].match(txtValue)==txtValue){
          href.setHref(data[nn][1]).setHTML('ACCEPTED').setVisible(true);
          fake.setVisible(false);
          break;
      }
    }
  }
return app;  
}
//  
function showurl(e){
  var app = UiApp.getActiveApplication();
  app.close();
  return app;  
} 
```

以下是相应工作表中可用的数据（A 和 B 栏）

```
> lastName  url
> serge https://sites.google.com/site/appsscriptexperiments/home
> john  https://sites.google.com/site/appsscriptexperiments/home/a-database-project
> paul  https://sites.google.com/site/appsscriptexperiments/home/a-simple-search-tool-ui
> mike  https://sites.google.com/site/appsscriptexperiments/home/doc-list-viewer 
```

# amazon-ec2 - 如何重命名 Amazon RDS 实例终端节点？

> ID：10887911
> 
> 赞同：1
> 
> 时间：2012-06-04T20:29:30.430
> 
> 标签：amazon-ec2, rename, amazon-rds

假设我有一个名为“webserver”的实例，我的端点是

```
webserver.i2jfi23dfds.us-east-1.rds.amazonaws.com 
```

该字符串的开头是我的实例名称。

我可以将我的实例端点的开头更改为..

```
adifferentname.i2jfi23dfds.us-east-1.rds.amazonaws.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:23:00.460

最近添加了此功能。只需修改实例，看看你可以重命名它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:31:25.677

与他们交谈后，无法重命名它。我只需要制作另一个副本并重命名它。

# database - 什么数据库更适合存储和搜索键/值对数据？

> ID：10887912
> 
> 赞同：1
> 
> 时间：2012-06-04T20:29:32.677
> 
> 标签：database, nosql, relational-database, key-value

我需要构建一个应用程序，您的主要目的是存储和搜索键/值数据。什么类型的数据库用于此目的？

或者考虑到所有数据库都是为了存储和搜索数据，什么样的数据库更适合存储和搜索键/值数据？NoSql？关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:41:51.247

正如已经指出的，NoSQL 数据库比关系数据库更适合您的应用程序。

您可能想查看[Redis](http://redis.io/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:35:16.377

You should use NoSQL. There is no point in using relational database when you have no relations whatsoever.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:31:21.857

这取决于您想要实现的目标；你甚至可以使用文本文件（不是开玩笑！）。

# javascript - 使用 innerHTML 防止脚本注入

> ID：10887913
> 
> 赞同：1
> 
> 时间：2012-06-04T20:29:35.187
> 
> 标签：javascript, innerhtml, xss, script-tag, javascript-injection

我编写了一个微模板实用程序，它使用 innerHTML 根据用户输入（纯文本字符串或 html 字符串）在网页中注入 html 片段。

我主要担心的是恶意脚本注入的风险。脚本可以通过脚本标签或内联事件（例如 img onload、div onmouseover）注入。

有没有办法清理 html 字符串以防止此类注入？另外，还有其他我应该注意的脚本注入方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:02:39.367

如果您想安全，您将在客户端和服务器上清理您的模板。不要编写自己的反 XSS 库，因为恶意用户一定会知道您没有考虑到的漏洞；细微差别太多了，除非您是 XSS 专家，否则您一定会错过任何一个。

在客户端，[Google Caja](http://code.google.com/p/google-caja/)有一个非常不错的[HTML 清理实用程序](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer)，它可以对 HTML 字符串执行强大的清理，清理恶意属性或其他讨厌的用户可以做讨厌的事情的区域，例如通过注入`script`标签的 XSS 攻击。它们还清理属性和各种其他 XSS 注入点（例如，`object`和`applet`标签），因此您可以感到相当安全。

虽然您应该在服务器上进行清理以防止恶意用户简单地禁用 javascript 或覆盖 Caja 的清理程序，但您可以使用 Caja 清理输入和输出以尽可能多地捕获。

# visual-studio-2010 - 使用任务栏功能的 CFrameWnd SetProgressBarPosition 方法，在 MFC 中使用 CDialog

> ID：10887919
> 
> 赞同：0
> 
> 时间：2012-06-04T20:29:57.540
> 
> 标签：visual-studio-2010, visual-c++, mfc

`CFrameWnd`在 Visual Studio 2010 及更高版本的 MFC 类中，带有一个名为的方法，该方法`CFramWnd::SetProgressBarPosition(int pos)`使用添加到 windows vista 和更高版本的操作系统的一些功能。我如何在 MFC Dialog 应用程序中使用 os 的这个特性，例如使用 CDialog 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:20:45.013

```
CComPtr<ITaskbarList3> ptbl3;
ptbl3.CreateInstance(CLSID_TaskbarList);
if(ptbl3!=NULL)
{
    ptbl3->SetProgressState(m_hWnd, TBPF_NORMAL);
    ptbl3->SetProgressValue(m_hWnd, 100, 50);
} 
```

# r - R中的每小时日期序列

> ID：10887923
> 
> 赞同：13
> 
> 时间：2012-06-04T20:15:09.967
> 
> 标签：r, time-series

我正在尝试每隔一小时生成一系列日期。例如，我尝试了以下操作：

```
> seq(as.Date("1912-02-24 23:00:00"), as.Date("1912-02-25 08:32:00"), by="hour") 
```

这会产生一个错误，但它适用于 by= 年、月、日。

seq.POSIXt {base} 的文档声明它应该工作小时、秒、分钟等，但所有这些都会产生错误。

```
> ?seq.POSIXt 
```

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T20:19:07.627

好吧，你不要自己给出答案;-)

关于什么：

```
seq(as.POSIXct("1912-02-24 23:00:00"), as.POSIXct("1912-02-25 08:32:00"), by="hour") 
```

（也适用于`as.POSIXlt`）。

# c# - C# MVC 3 使用不必要的参数生成链接

> ID：10887926
> 
> 赞同：0
> 
> 时间：2012-06-04T20:30:24.333
> 
> 标签：c#, asp.net-mvc-3, razor

我是.Net 的新手。我的第一个项目接近尾声，我遇到了一个困扰我的小问题。我正在使用 MVC 3、Razor、C# 和 VisualStudio 2010。

以下是我用于将用户重定向到不同 RDLC 报告的 Razor 代码：

```
@Html.ActionLink("Length of stay for all data packages - summary", "RptLngthStay", "Reports", new { @class = "link" })<br />
@Html.ActionLink("Packages denied registration by WHS reviewers", "RptPkgsDenied", "Reports", new { @class = "link" })<br />
<...> 
```

它生成以下 HTML：

```
<a class="link" href="/reg_pkgs/Reports/RptLngthStay?Length=7">Length of stay for all data packages - summary</a><br />
<a class="link" href="/reg_pkgs/Reports/RptPkgsDenied?Length=7">Packages denied registration by WHS reviewers</a><br />
<...> 
```

我的问题是，参数“Length=7”从何而来？没有一个控制器需要参数，更不用说一个名为“长度”的控制器了。它不会影响我的任何代码的运行方式，但在地址栏中看到它让我感到困扰。

以下是我的 Global.asax.cs 文件中的路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "PackageTrack", action = "TrackSearch", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

它们只是使用新项目创建的默认路由。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:35:43.617

您使用了错误的重载，`Html.ActionLink`其签名为[(HtmlHelper, String, String, Object, Object)](http://msdn.microsoft.com/en-us/library/dd492124)。

其中第三个参数`"Reports"`被解释为 rootvalues 对象，并且框架试图获取它的属性。并且字符串`"Reports"`有一个属性 Lenght 等于 7。

您需要的是带有签名的重载[（HtmlHelper、String、String、String、Object、Object）](http://msdn.microsoft.com/en-us/library/dd504972.aspx)

将您的代码更改为：

```
@Html.ActionLink("Link text", "RptLngthStay", "Reports", null,  new { @class = "link" })<br />
@Html.ActionLink("Link text", "RptPkgsDenied", "Reports", null, new { @class = "link" })<br /> 
```

注意`null`s 作为第四个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:35:57.930

你应该使用

```
@Html.ActionLink("Packages denied registration by WHS reviewers", "RptLngthStay", "Reports", null, new { @class = "link" }) 
```

或者

```
@Html.ActionLink("Packages denied registration by WHS reviewers", "RptLngthStay", "Reports", new {}, new { @class = "link" }) 
```

HTML 帮助程序需要具有路由数据值，以便它可以区分 routedata 和 htmlAttribute 属性。

# jquery - 在 Jquery 中放置链接

> ID：10887927
> 
> 赞同：0
> 
> 时间：2012-06-04T20:30:27.720
> 
> 标签：jquery

我正在使用在 jsfiddle [http://jsfiddle.net/mekwall/fNyHs/](http://jsfiddle.net/mekwall/fNyHs/)上找到的代码，因为它似乎最适合我的情况，因为我需要动态文本来适应容器（通过更改字体大小）。

```
(function($) {
$.fn.textfill = function(maxFontSize, maxWords) {
    maxFontSize = parseInt(maxFontSize, 10);
    maxWords = parseInt(maxWords, 10) || 4;
    return this.each(function(){
        var self = $(this),
            orgText = self.text(),
            fontSize = parseInt(self.css("fontSize"), 10),
            lineHeight = parseInt(self.css("lineHeight"), 10),
            maxHeight = self.height(),
            maxWidth = self.width(),
            words = self.text().split(" ");

        function calcSize(text) {
            var ourText = $("<span class='dyntextval'><a href='#' class='trigger'>"+text+"</a></span>").appendTo(self),
                multiplier = maxWidth/ourText.width(),
                newSize = fontSize*(multiplier-0.1);
            ourText.css(
                "fontSize", 
                (maxFontSize > 0 && newSize > maxFontSize) ? 
                    maxFontSize : 
                    newSize
            );
            var scrollHeight = self[0].scrollHeight;
            if (scrollHeight  > maxHeight) {
                multiplier = maxHeight/scrollHeight;
                newSize = (newSize*multiplier);
                ourText.css(
                    "fontSize", 
                    (maxFontSize > 0 && newSize > maxFontSize) ? 
                        maxFontSize : 
                        newSize
                );
            }
        }
        self.empty();
        if (words.length > maxWords) {
            while (words.length > 0) {
                var newText = words.splice(0, maxWords).join(" ");
                console.log
                calcSize(newText);
                self.append("<br>");
            }
        } else {
            calcSize(orgText);
        }
    });
};
})(jQuery);

$(document).ready(function() {
$('.large').textfill({ maxFontPixels: 120, minFontPixels: 36});
$('.medium').textfill({ maxFontPixels: 32 });
$('.small').textfill({ maxFontPixels: 18 });        
}); 
```

但是我在这部分遇到了问题：

```
var ourText = $(""+text+"").appendTo(self), 
```

问题是我需要一个链接，一旦点击它就会切换另一个 div。

**切换：**

```
$(".side-toggle").hide();
$('.trigger').click(function() {
    $(this).closest('.group').find('.side-toggle').slideToggle();
    return false; //Prevent the browser jump to the link anchor
});

$(".toggle").click(function() {
    $(this).next(".group").slideToggle();
}); 
```

切换本身可以工作，但当我还实现代码文本填充代码时则不行。

**的HTML：**

```
<div class="quepasa">
  <div class="large artist">
    <span class="dyntextval">
      <a title="<?php the_title();?>" href="#" class="trigger">
        <?php if ( get_the_title() ) the_title(); else the_ID(); ?>+
      </a>
    </span>
  </div>
</div> 
```

我没有足够的 jQuery 知识来知道如何：a) 将链接放入？b) 保留切换功能

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:26:24.697

您的切换发生的事情是 Javascript 堆栈中的中断，或者简单地说，早期的错误会使其他一切都陷入困境。

例子：

假设这会导致错误（无法`bar`调用`undefined`）

`var darth = $('#foo').data().bar;`

然后在这段代码中：

```
$('#threepeeoh').hide();
var darth = $('#foo').data().bar;
$('luke').show('fade', 500); 
```

`#luke`永远不会显示，因为之前的行有错误。`#threepeeoh`之所以能够隐藏，是因为他在`darth`出现之前就这样做了并抛出了一个错误。之后发生的任何代码很可能不会被执行。（值得谷歌搜索“JS try/catch 块”）

所以，当你添加你的文本填充代码时，它一定会抛出一个错误并使你的切换*看起来*像是 FUBAR。

至于该错误是什么，您需要学习为您的 Web 浏览器使用 Javascript 调试器并查看引发了什么错误。据我所知，`var ourText = $(""+text+"").appendTo(self)`甚至不在您发布的代码块中，也不在小提琴中，所以我什至不知道您在说什么。

所以：

1.  去找一个开发者控制台来使用 Javascript 调试器（Firefug 很流行，Chrome 内置了一个，点击 CTRL SHIFT J）
2.  刷新，查找错误（很可能是红色）
3.  编辑您的问题（可能最好问一个新问题）并将该错误与引发错误的位置附近的代码一起发布（通常提供文件和行号）
4.  如果可能，请将您的工作样本上传到您不打算删除的公共服务器，以便社区可以参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:27:54.900

通过将切换触发器移动到链接周围的 div 来解决它： **HTML：**

```
<div class="group">
<div class="large trigger"><a title="<?php the_title();?>" href="#" class="large"><?php if ( get_the_title() ) the_title(); else the_ID(); ?>+</a></div>
<div class="side-toggle">Content of the toggle</div> 
```

**切换脚本：**

```
$(".side-toggle").hide(); 
$('.trigger').click(function() {
$(this).closest('.group').find('.side-toggle').slideToggle();
return false; //Prevent the browser jump to the link anchor
}); 
```

**文本填充脚本：**

```
(function($) {
$.fn.textfill = function(maxFontSize, maxWords) {
    maxFontSize = parseInt(maxFontSize, 10);
    maxWords = parseInt(maxWords, 10) || 4;
    return this.each(function(){
        var self = $(this),
            orgText = self.text(),
            fontSize = parseInt(self.css("fontSize"), 10),
            lineHeight = parseInt(self.css("lineHeight"), 10),
            maxHeight = self.height(),
            maxWidth = self.width(),
            words = self.text().split(" ");

        function calcSize(text) {
            var ourText = $("<span>"+text+"</span>").appendTo(self),
                multiplier = maxWidth/ourText.width(),
                newSize = fontSize*(multiplier-0.1);
            ourText.css(
                "fontSize", 
                (maxFontSize > 0 && newSize > maxFontSize) ? 
                    maxFontSize : 
                    newSize
            );
            var scrollHeight = self[0].scrollHeight;
            if (scrollHeight  > maxHeight) {
                multiplier = maxHeight/scrollHeight;
                newSize = (newSize*multiplier);
                ourText.css(
                    "fontSize", 
                    (maxFontSize > 0 && newSize > maxFontSize) ? 
                        maxFontSize : 
                        newSize
                );
            }
        }
        self.empty();
        if (words.length > maxWords) {
            while (words.length > 0) {
                var newText = words.splice(0, maxWords).join(" ");
                console.log
                calcSize(newText);
                self.append("<br>");
            }
        } else {
            calcSize(orgText);
        }
    });
};
})(jQuery);

$(document).ready(function() {
  $('.large').textfill(120, 42);
  $('.medium').textfill(90,24);
  $('.small').textfill(24,18);
}); 
```

CSS：

```
.large, .medium, .small {text-align: center;white-space:nowrap; overflow: hidden;word-wrap: break-word;width:526px; max-width:526px; }
.large{line-height:180px;}
.medium {letter-spacing:2px; line-height:72px;}
.small {letter-spacing:2px; line-height:18px;} 
```

**示例：http:** [//jsfiddle.net/inTOWN/vxSze/10/](http://jsfiddle.net/inTOWN/vxSze/10/)

只希望我知道如何更多地传播文本，这样它就会填满整个容器

# android - 使用 ActionBarSherlock 的 ShareActionProvider 只有四个选项

> ID：10887929
> 
> 赞同：7
> 
> 时间：2012-06-04T20:30:34.530
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

我试图在通过 ActionBarSherlock 使用共享操作提供程序时共享纯文本，并且只有四个选项可以共享它，并且没有“查看全部...”选项。

这是为什么？

这是它的样子：
![](../Images/14e345a0c513356d422faa9e9efb56bf.png)

这就是我希望它看起来的样子：
![](../Images/6f0e1a9c1d9386acff4ddae1fd3424fa.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T00:56:16.417

好的，所以无论 ActionBarSherlock 第一次测试是否正确创建了您的意图，ABS 使用与通用选择器相同的代码，因此在执行此代码时查看您正在寻找的应用程序是否出现。

```
 Intent I= new Intent(Intent.ACTION_SEND);
    I.setType("text/plain");
    I.putExtra(android.content.Intent.EXTRA_TEXT, "My Test Text");

    startActivity(Intent.createChooser(I,"Share using ...")); 
```

所有处理纯文本的应用程序都将显示，如果 facebook 或任何您期望的内容不存在，那么这些应用程序不支持您注册的类型（纯文本/文本）的 ACTION_SEND 意图。（Facebook 有，但稍后会详细介绍）

ABS 有一个使用共享操作提供程序的示例，但它尝试发送照片，而不是短信（状态更新）您应该使用的设置是这样的

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate your menu.
    getSupportMenuInflater().inflate(R.menu.share_action_provider, menu);

    // Set file with share history to the provider and set the share intent.
    MenuItem item = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
    ShareActionProvider provider = (ShareActionProvider) item.getActionProvider();
                  provider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
    // Note that you can set/change the intent any time,
    // say when the user has selected an image.
    provider.setShareIntent(createShareIntent());

    return true
} 
```

这是将用于匹配应用程序并将它们从示例中列出的意图

```
private Intent createShareIntent() {
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("image/plain");
        Uri uri = Uri.fromFile(getFileStreamPath("shared.png"));
        shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
        shareIntent.putExtra(Intent.EXTRA_TITLE, "This is an android icon");
        return shareIntent;
    } 
```

但你希望它是

```
private Intent createShareIntent() {
        Intent I= new Intent(Intent.ACTION_SEND);
        I.setType("text/plain");
        I.putExtra(android.content.Intent.EXTRA_SUBJECT, "TEST - Disregard");
        I.putExtra(android.content.Intent.EXTRA_TEXT, Uri.parse("http://noplace.com"));
    } 
```

这应该在 ABS 中为您提供与上面选择器显示的小测试存根中相同的列表。

现在是坏消息。Facebook 应用程序并没有真正起作用，它会调出用户更新页面，但不会填写文本。这是一个再次打开，再次关闭的破损，但我昨晚尝试过，但失败了。这是 facebook 应用程序的一个已报告并已接受的错误。虽然无法设置标题，但您可以发布照片，请参阅[Facebook 会破坏/修复此问题多少次？](https://stackoverflow.com/questions/3515198/share-text-on-facebook-from-android-app-via-action-send)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:24:49.937

请注意，从 v4.1.0 开始，ActionBarSherlock`ShareActionProvider`不支持溢出菜单。也许这可能会在将来更新。

* * *

以下是`share_action_provider.xml`SampleList 演示文件中的代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/menu_item_share_action_provider_action_bar"
        android:showAsAction="always"
        android:title="@string/action_bar_share_with"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" />

    <!-- XXX: For now, ShareActionProviders must be displayed on the action bar -->
    <!--item android:id="@+id/menu_item_share_action_provider_overflow"
        android:showAsAction="never"
        android:title="@string/action_bar_share_with"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" /-->

</menu> 
```

* * *

这个信息答案 - 我花了很长时间才找到它，所以我想让未来的读者更容易找到。

# android - 在线性布局中拉伸图像按钮以使用可用空间

> ID：10887935
> 
> 赞同：1
> 
> 时间：2012-06-04T20:31:02.657
> 
> 标签：android, layout, android-relativelayout, android-linearlayout, imagebutton

为了实现以下目标，我一直在使用一些 XML；

第一行是横幅（工作正常）。然后; 我每行有 3 个按钮。我希望按钮占据所有水平空间（因此；屏幕宽度减少了 3）。此外，按钮上的图像应该调整到该宽度，而不改变纵横比！。如何才能做到这一点？

下一个; 如果我添加 ImageButtons 行，我应该如何在滚动视图中“壳”LinearLayouts 以保持 3 个按钮的宽度分布？

谢谢

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/blogbanner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"
        android:src="@drawable/test_banner_ad" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:scaleType="fitXY"
            android:src="@drawable/trololo" />

        <ImageButton
            android:id="@+id/imageButton2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:scaleType="matrix"
            android:src="@drawable/scout" />

        <ImageButton
            android:id="@+id/imageButton3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:scaleType="fitEnd"
            android:src="@drawable/painting" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageButton
            android:id="@+id/imageButton4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/whoop" />

        <ImageButton
            android:id="@+id/imageButton5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/drown" />

        <ImageButton
            android:id="@+id/imageButton6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/love" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageButton
            android:id="@+id/imageButton7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/shredder" />

        <ImageButton
            android:id="@+id/imageButton8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/frog" />

        <ImageButton
            android:id="@+id/imageButton9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/yeah03" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:46:35.363

将每行的 3 个按钮放到另一个水平布局中，然后使用“ [weight](http://developer.android.com/reference/android/R.attr.html#layout_weight) ”属性定义它们的宽度。

图像需要具有“fill_parent”尺寸并使用[scaleXY](https://stackoverflow.com/questions/5873748/android-autofit-image-in-imageview)。

# google-chrome-extension - 设置我自己的代理服务器并在谷歌浏览器中将参数传递给它

> ID：10887939
> 
> 赞同：1
> 
> 时间：2012-06-04T20:31:15.673
> 
> 标签：google-chrome-extension, webproxy

我想在谷歌浏览器中设置我自己的网络代理，以从我的服务器获取所有网页。我知道我们可以从设置中设置一个 Web 代理服务器，但我想要的也是将参数传递给服务器，所以不是：24.33.20.87:8888 我想将页面重定向到这里：24.37.47.30:8888/cgi -bin/mgetpage?tm=567567567&send=0&murl=google.com

你知道怎么做吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:43:13.620

您必须编写一个扩展程序来捕获每个选项卡并将其重定向到您的自定义 URL（如果它不存在）。

您需要使用[Tabs](http://code.google.com/chrome/extensions/tabs.html) API。假设您用于`getCurrent`获取当前选项卡。你可以得到它`url`，看看是否`document.domain`等于你的`24.37.47.30`. 如果不是，您可以使用`window.location`将其重定向到：

```
24.37.47.30:8888/cgi-bin/mgetpage?tm=567567567&send=0&murl={tab_url} 
```

显然有一些 Chrome 扩展已经做了这样的事情。

[https://chrome.google.com/webstore/detail/odchblbgkkchnldldakeikkjfbkllaah](https://chrome.google.com/webstore/detail/odchblbgkkchnldldakeikkjfbkllaah)

[https://chrome.google.com/webstore/detail/lacckjdlmkdhca​​cjdodpjokfobckjclh](https://chrome.google.com/webstore/detail/lacckjdlmkdhcacjdodpjokfobckjclh)

# layout - HTML 布局滚动 div

> ID：10887943
> 
> 赞同：0
> 
> 时间：2012-06-04T20:31:24.833
> 
> 标签：layout, html, scroll

这是我指的页面：[http ://searchleaf.com/v2/search_2.php](http://searchleaf.com/v2/search_2.php)

我在页面中间有一个浮动 div，它是我的“内容”div。其中我有 3 个 div，我的“内容框”，并排放置，每个占据 33% 的空间。

当您从第一个内容框搜索时，它会返回一些结果，并且第二个内容框变得可见。从那里，当您单击一个单词时，第三个内容框将变得可见，其中包含更多信息。

我的问题是当页面缩小，或者一个词有很多信息时，第二个和第三个框有时会超出主要内容框。我已经查看了 CSS 的溢出属性，但我似乎无法得到我想要的。它不应该溢出主要内容框。

将主内容框上的溢出设置为自动会发生什么情况：出现滚动条并滚动整个内容区域。

我想要发生的事情：根据需要为每个内容框提供一个滚动条。

这是我的问题的一个简单的 html 布局示例，这可能更容易：

[http://searchleaf.com/v2/layout.html](http://searchleaf.com/v2/layout.html)

当 .content 中的溢出属性更改为自动时。整个事情滚动。我怎样才能让它只滚动第三个框？

谢谢，布莱斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:40:25.577

您的问题可能是内部 div 的宽度为 33.3%，并且它们还有一个厚边框和填充，它们被添加到它们的宽度中（因此得到的宽度是容器的 33.3% + 边框中的像素 + 15px 内边距（两侧）。

您可以尝试将内部 div 添加到这些 div 并将边框和填充放在内部 div 中，如果有意义的话，只在其父 div 中保留 width:33.3% 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:41:02.840

尝试为您的主容器提供固定宽度并将溢出设置为隐藏，然后将内部 div 设置为固定高度并将溢出-y 设置为滚动。

# ember.js - Ember 数据引导模型对象

> ID：10887944
> 
> 赞同：2
> 
> 时间：2012-06-04T20:31:30.277
> 
> 标签：ember.js, ember-data

当使用不是来自远程 AJAX 调用的现有 JSON 引导 Ember 数据模型对象时，我是否必须进行以下 2 个调用：

```
App.store.load(App.Account, data);
var account = App.store.find(App.Account, data.id); 
```

是否可以一步创建对象，类似于调用`setProperties`现有的 Ember 对象？

此外，这将如何用于创建 Ember 模型对象的集合？例如：

```
var users = App.get('users');
App.store.loadMany(App.User, users);
this.set('content', App.store.findMany(App.User, users.mapProperty('id').uniq())); 
```

以上似乎是错误的。如何从现有的 JSON 对象创建这些对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:21:06.633

对我来说似乎没问题，因为`store.load*`返回的不是模型对象（已加载`ids`& `clientIds`）。

到目前为止，我认为没有其他选择。

# c# - Page_Load 中的 C# 将代码放在上面

> ID：10887945
> 
> 赞同：2
> 
> 时间：2012-06-04T20:31:32.610
> 
> 标签：c#, asp.net, html

更具体地说，我使用`C#`和`.aspx`文档制作了一个小网页。我在文档的一部分中放入的所有`C#`代码，如下所示：`<head>``Page_Load`

```
<script language="C#" runat="server">
protected void Page_Load(Object s, EventArgs e) {  
     Response.Write(@"<div class=""header"">Foo Bar</div>");
     ...
}
</script> 
```

这以某种方式起作用，但问题是由此生成的 html 被填充在`<html>`文档中的开始标记之上，这导致字符设置损坏（不读取元标记？）并且不应该发生奇怪的事情。我是新手，`ASP.NET`很明显。我会将所有语句放在哪里，以便可以从`<body>`使用`<%`分隔符访问它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:37:25.720

你会把它们放在身体里。这个特定的代码除了直接写到你放置它的地方之外没有做任何事情。

```
<body>

    <%= @"<div class=""header"">Foo Bar</div>"; %>

</body> 
```

我确定这只是对某些东西的测试，但是如果您想写入页面中的特定位置，最好使用标签或文字控件：

```
<head>
<script language="#C" runat="server">

    <script language="C#" runat="server">
    protected void Page_Load(Object s, EventArgs e)
    {  
         this.lblWriteToMe.Text = @"<div class=""header"">Foo Bar</div>");
         // ...
    }

    </script>
</head>

<body>
    <asp:Label ID="lblWriteToMe" runat="server" />
</body>
</html> 
```

**编辑：** 为了将文本放置在 html 块中，您可以将其直接放入您希望它出现的 html 块中，就像我在第一个示例中所做的那样。这是一种非常“经典的 asp”方法，尽管 MVC 将这个概念带回来了。顶部的脚本标签可以保存所有的方法/事件定义和全局变量/属性或其他任何东西，但是当你使用它时`Response.Write`，`<%=`它会在它出现时立即输出。请记住，标准 Web 表单页面具有必须考虑的事件生命周期，并且`Response.Write`可能会对其产生干扰。如果您在方法或事件中生成了输出，最好将该结果发布到控件中。这将允许控件确定在 html 块中出现时的正确呈现顺序`Page_Render`。

# c# - SqlDatasource 选择命令未从声明的列中选择值，它采用包含输入值的所有列

> ID：10887946
> 
> 赞同：0
> 
> 时间：2012-06-04T20:31:32.690
> 
> 标签：c#, asp.net, sql

我有一个gridview 和sqldatasource。

我正在尝试使用 sqldatasource.select 命令从某些列中选择值，但不是从声明的列中选择要搜索的值，而是选择所有具有搜索值的列。此外，找到该值时会突出显示该值。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
 {

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                foreach (TableCell rws in e.Row.Cells)
                {
                    if (rws.Controls.Count == 0)
                    {
                        rws.Text = rws.Text.Replace(search.text, "<span style='background-color:#FFFF00;'>" + search.text + "</span>");
                    }
                }
             }
 } 
```

button1 选择命令：

```
SqlDataSource1.SelectCommand = "Select * FROM TTBs where Name like '%" + search.text + "%' or Age like '%" + search.text + "%' or Birthday like '%" + search.text + "%'"; 
```

有没有什么办法解决这一问题？

谢谢

# c# - 从另一个表单更新 Datagridview

> ID：10887948
> 
> 赞同：1
> 
> 时间：2012-06-04T20:31:44.927
> 
> 标签：c#, winforms, datagridview

首先我应该说我看到了这个链接：

[关闭子窗体时如何刷新datagridview？](https://stackoverflow.com/questions/2395624/how-to-refresh-datagridview-when-closing-child-form)

我确实喜欢这样：（我在 Form1 中有 datagridview） **Form1：**

```
 public void FillDataGridView(DataTable dt1)
            {
                    bindingSource1.DataSource = dt1;
                    bindingSource1.ResetBindings(false);
                    dataGridView1.DataSource = bindingSource1;
                    //here i checked number of rows of dt1 and it shows the correct value
            } 
```

**表格2：**

```
 SqlConnection cnn = new SqlConnection(@"My connection string");
            private Form1 Handled_frm1;
            public Form2(Form1 frm1)
            {
                    InitializeComponent();

                Handled_frm1 = frm1;
            }

               private void textbox1_TextChanged(object sender, EventArgs e)
                     {
                        dt.Clear();
                        using (SqlCommand cmd =cnn.CreateCommand())
                        {
                            if (cnn.State == ConnectionState.Closed)
                            {
                                cnn.Open();
                            }
                            cmd.CommandType = CommandType.StoredProcedure;
                            cmd.Connection = cnn;
                            cmd.CommandText = "spSearchCustomerByName";
                            SqlParameter inparam1 = cmd.Parameters.AddWithValue("@name", textbox1.Text);
                            inparam1.Direction = ParameterDirection.Input;
                            dap.SelectCommand = cmd;
                            dap.Fill(dt);

                            Handled_frm1.FillDataGridView(dt);
                        } 
```

但是 Datagridview 的值并没有改变！

**编辑：**

我想测试是否可以清除数据网格视图，所以我像这样更改了 FillDataGridView：

```
 public void FillDataGridView(DataTable dt1)
            {
                    dt.Clear();
                    dataGridView1.Columns.Clear();
                    dataGridView1.DataSource = null;
                    dataGridView1.Refresh();
            } 
```

但它并没有清除datagridview1！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:15:53.413

我错误地使用了不正确的 Form1 实例！！

在form1中，有一个按钮，当点击它时，它会显示form2。我在它的点击事件中写了这段代码：

```
Form1 frm1=new Form1();
Form2 frm2=new Form2(frm1); 
```

这是不正确的，因为我制作了 Form1 的其他实例。

我像这样更改代码：

```
Form2 frm2=new Form2(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:39:00.307

尝试使用 BindingSource，如以下链接中所述：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource)

我认为直接设置 DataSource 不会导致 DataGridView 重新绑定，而 BindingSource 会处理这个问题。

# html - 将html文件的文件夹树导入mediawiki？

> ID：10887951
> 
> 赞同：0
> 
> 时间：2012-06-04T20:31:59.217
> 
> 标签：html, mediawiki, wiki

假设我们有一个由多个嵌套文件夹组成的树，每个文件夹中都有几个简单的 HTML 文件。

有没有办法将此结构导入到媒体维基网站？（或者，在这些 HTML 文件中添加类似 wiki 的功能）？

我不确定哪些工具可以完成这样的任务或在哪里询问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:56:48.687

你需要一个 HTML 到 wikitext 的转换器（有几个，例如[HTML::WikiConverter](http://search.cpan.org/dist/HTML-WikiConverter/) Perl 模块，或者[这个 web 服务](https://toolserver.org/~diberri/cgi-bin/html2wiki/)，或者[这个 xsl 文件](http://mozile.mozdev.org/0.8/demos/html2wiki.xsl)）和一些 bot 框架来自动化它（最成熟的一个是[pywikipediabot](https://www.mediawiki.org/wiki/Manual%3aPywikipediabot)）。

# android - 使用 Android 搜索对话框搜索两个或更多数据库列

> ID：10887953
> 
> 赞同：1
> 
> 时间：2012-06-04T20:32:14.343
> 
> 标签：android, sqlite

我有一个三列数据库，其中 Android 搜索对话框工作正常。但我希望能够从两个不同的列中输入作品或短语，并让它返回搜索短语在一个或另一列或两列中的所有结果。我正在使用以下方法：

```
 //--- GET RECORDS FOR SEARCH
public Cursor searchDB(String query) {  
return db.query(true, DB_TABLE, new String[] { KEY_ROWID, KEY_COLUMN1, KEY_COLUMN2, 
KEY_COLUMN3 }, KEY_COLUMN1 + " LIKE" + "'%" + query + "%' OR " + KEY_COLUMN2 +  
" LIKE" + "'%" + query + "%' OR " + KEY_COLUMN3 + " LIKE" + "'%" + query + "%'",  
null, null, null, null, null);  
}
//--- END Get Records for Search 
```

因此，如果您有这样的数据库，这可以正常工作：

```
 COL1     COL2     COL3
______________________

Hi       there    guys
how      are      you 
```

你在“嗨”上搜索它会返回“嗨，伙计们”。但我想要做的是搜索“你好”并让它返回所有三列的整行 - “嗨，伙计们”。我尝试添加：

```
OR "+ KEY_COLUMN2 + KEY_COLUMN3 + " LIKE" + "'%" + query + "%'" 
```

但这会在运行搜索时使搜索崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:40:13.590

我认为您应该在查询数据库之前再应用一步。

您应该将`query`字符串拆分为单词数组。

然后一个解决方案是使用 selectionArgs 参数来传递查询的单词：

```
String[] queryWords = splitInWords(query); // your own method to split a string in words
db.query(true, DB_TABLE, new String[] { KEY_ROWID, KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 }, 
KEY_COLUMN1 + " LIKE" + " ? OR " + KEY_COLUMN2 + " LIKE" + " ? OR " + KEY_COLUMN3 + " LIKE" + " ?", queryWords, null, null, null, null); 
```

上一个的问题是你应该有三个单词（我从未尝试过我不确定你会得到什么结果）。另一种解决方案是创建一个选择字符串：

```
String[] queryWords = splitInWords(query); // your own method to split a string in words
String selection = "";
String[] keyColumns = new String[]{KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3};
for (int i = 0; i < queryWords.length; i++){
  if ( i > 1){
  selection += " OR ";
  }
selection += keyColumns[i] + " LIKE " + queryWords[i];
} 
```

好吧，它可能不完全是您正在寻找的内容，但您会根据您期望查询的内容进行调整（您还可以使用所有键/queryWord 对构建更长的选择字符串）。而且我从来没有找到更好的主意来处理这种查询。

# c# - Razor 查看竞态条件

> ID：10887959
> 
> 赞同：4
> 
> 时间：2012-06-04T20:33:16.387
> 
> 标签：c#, asp.net-mvc, multithreading, razor, race-condition

在从 RazorViewEngine 派生的自定义剃须刀引擎中，我发现了我认为不稳定的代码：

```
 public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        ViewLocationFormats = AddViewDynamicFormat(controllerContext, viewName).ToArray();
        AreaViewLocationFormats = AddAreaViewDynamicFormat(controllerContext, viewName).ToArray();
        return base.FindView(controllerContext, viewName, masterName, useCache);
    } 
```

我担心的是，当“同时”处理两个请求时，第一个请求将根据需要设置位置格式，但在它可以使用它们之前 - 第二个线程请求可能有机会将位置格式设置为不同的方式。其余的变得丑陋。

这是一个有效的担忧吗？换句话说，ASP.NET MVC 是否保证 Razor View 引擎一次只处理一个请求？我怀疑情况是否如此。

同样，如果每个请求有一个 razor 视图引擎*对象*，那么就可以了。但我也不相信是这样的。

**更新** 我已经确认这是一个竞争条件。我还发现一篇文章显示了一个[动态扩展剃刀搜索示例](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)，它在没有竞争条件的情况下解决了问题（尽管我仍然想知道它是否有缓存问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:33:19.373

是`ViewLocationFormats`和`AreaViewLocationFormats`虚的？如果是这样，您可以将该值放入`HttpContext.Current.Items`集合中并从覆盖的属性中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:46:05.390

我几乎肯定 RazorViewEngine 不打算在运行时修改，而只是在 Global.asax Application_Start 中配置。我相信 RazorViewEngine 实例在启动后的应用程序域的生命周期内都存在。

如果您需要添加额外的 ViewLocationFormats 或 AreaViewLocationFormats，请在 Application_Start 中进行。Application_Start 保证每个应用程序域仅运行一次。

# jquery - android 上的 jQuery 移动使用 phonegap 时布局模糊/低质量

> ID：10887961
> 
> 赞同：4
> 
> 时间：2012-06-04T20:33:22.617
> 
> 标签：jquery, android, mobile, jquery-mobile, cordova

我正在使用 phonegap 和 jQuery mobile 开发 Android 应用程序。在浏览器中，页面看起来不错，但是当我在设备上运行应用程序（=在 web 视图中）时，页面看起来很便宜而且有点……关闭。几乎就像页面缩放了 101% 或类似的东西。有没有其他人遇到过这个问题？知道如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:35:44.147

您是否尝试过将`target-densitydpi=device-dpi`值添加到页面中的视口元标记，`</head>`如下所示：

```
<head>    
    <meta name="viewport" content="width=device-width, target-densitydpi=device-dpi" />
    ...
</head> 
```

这应该够了吧; 我希望它有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-09T21:20:13.447

实际上，没有任何字体大小副作用的真正解决方法是解决 CSS 文本阴影，如下所示。

```
* {
text-shadow:0 0 0 transparent;
text-shadow:none;
} 
```

这可以确保您的字体没有阴影，这就是文本看起来模糊的原因。如果仔细观察，您会发现文字实际上并不模糊，而是具有相同颜色的阴影。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:59:07.323

[在jQuery 论坛](https://forum.jquery.com/topic/android-visual-quality-problems-pages-looks-cheep-pixelated-forms-images-with-tons-of-blur)上也有人建议添加`user-scalable=0`到不断增加的元标记中。所以它最终看起来类似于：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=device-dpi, user-scalable=0"> 
```

这个修复对我有用。尽管 jQuery 论坛帖子也建议最终的解决方法可能是包含一些 Android 特定的 css：

```
- if is_android?
  %link{:rel => 'stylesheet', :type => 'text/css', :href => '/stylesheets/mobile/android.css'}/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T03:22:17.443

在移动设备上测试时我也遇到了同样的问题。但请参阅此[链接](http://darkforge.blogspot.com/2010/05/customize-android-browser-scaling-with.html)：

> CSS“px”单位可能与设备的实际像素不同，因为浏览器会将图像和字体“缩放”到比您请求的更大的尺寸。（当您说“px”时，浏览器会自然而然地假定您不是真的指“像素”，并会帮助您调整内容的大小，使其在高分辨率手机屏幕上可读。）

然后，我将我的 TARGET-DENSITYDPI 更改为“target-densitydpi=150”，它工作正常（在 NEXUS 10 上测试）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T13:47:00.410

Webkit 使用“css 像素”，然后将其重新计算为物理设备分辨率——也许这就是这里的问题。

如果你有一个典型的 4 英寸手机，屏幕为 480x800，css 像素可能是 320x533，CSS 像素比是 1.5。

在这种情况下，一张 32 x 32 像素的图像至少需要 48 x 48 像素才能看起来又好又锐利。因为某些设备的像素比为 2（iPhone 4/5），我通常使用 2 倍大的图像，它们看起来非常好，几乎和 svg 图像一样好（并且在较旧的浏览器上宽度没有问题）。

这样做，您需要记住定义图像大小

```
background:url('myimage64.png'); background-size:32px 32px; 
```

或者

```
<img src='myimage64.png' width='32' height='32'> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-06T09:50:42.757

尝试将空白字符“”放在您的图像的同一个容器中，我不知道确切但它对我有用。

# iphone - 在 UIWebView 中禁用 PDF 文件中的超链接

> ID：10887965
> 
> 赞同：2
> 
> 时间：2012-06-04T20:33:37.810
> 
> 标签：iphone, objective-c, ios, pdf, uiwebview

我有一个带有 PDF 文件的 WebView，其中的一个文档包含我要禁用的超链接。我尝试使用这种方法，但它不起作用，链接仍然打开并加载讨厌的 URL：

> 1.  我把`UIWebViewDelegate`我的`ViewController.h`
> 2.  然后我把这段代码放在我的`ViewController.m`：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if (webView == myReadingArticlesWebView) {
        return NO;
    }
    else {
        return YES;
    }
} 
```

任何想法如何使这个简单易行？我承认我在上面描述的过程中可能会犯一些错误。

编辑：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([request.URL isFileReferenceURL]) {
        return YES;
    } else {
        return NO;
    }
} 
```

上面的代码对我也没有任何作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:48:01.920

只需将`UIWebView`'`dataDetectorTypes`属性设置为**None**：

```
[myReadingArticlesWebView setDataDetectorTypes:UIDataDetectorTypeNone]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:03:57.517

基于所有来回的评论！！！

所以现在你需要做的不是简单地在你的

```
shouldStartLoadWithRequest 
```

方法，如果正在加载的 URL 来自本地，则需要回答“是”，如果来自其他任何地方，则需要回答“否”。使用

```
[request.URL isFileReferenceURL] 
```

方法来检查它是否是本地文件。注意：此方法显然仅适用于 iOS 5 及更高版本，请查看

[检查 NSURL 是否为本地文件](https://stackoverflow.com/questions/3057588/check-if-nsurl-is-local-file)

希望这对你有用:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T00:45:10.547

如果 trumpetlicks 说 PDF 查看器会忽略您从 shouldStartLoadWithRequest 中说的话，并且如果您不想禁用所有链接（设置数据检测器会这样做）。

然后您可以尝试的其他方法是创建一个派生自 NSURLProtocol 的类并将其注册到您的应用程序委托中。这将能够拦截源自 pdf 的网络流量，并让您有机会过滤链接并阻止您不想出去的链接。

# php - 即使在设置 date_default_timezone_set 之后，PHPExcel 也会出现错误的时区

> ID：10887967
> 
> 赞同：4
> 
> 时间：2012-06-04T20:33:59.687
> 
> 标签：php, timezone, phpexcel

我在我的一个项目中使用[http://phpexcel.codeplex.com](http://phpexcel.codeplex.com)，我遇到了一个问题。我想在一个单元格中写入 time() 值，我正在这样做：

```
function writeTimeLine($objActiveSheet, &$lineNumber, $timeStart, $timeEnd, $duration, $category, $client, $date, $comment)
{
    $objActiveSheet->setCellValue('A'.$lineNumber, PHPExcel_Shared_Date::PHPToExcel( $timeStart ));
    $objActiveSheet->getStyle('A'.$lineNumber)->getNumberFormat()->setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_DATE_TIME4);
} 
```

$objActiveSheet 指的是 $objPHPExcel->getActiveSheet()

Excel中的结果是：

20:27:39

当我在电脑上进行真实测试时，它是 16:27:39

所以这是时区的问题（我住在东美洲-4）。但是，我在设置默认时区后包含了 PHPExcel 文件

```
date_default_timezone_set('America/New_York'); 
```

即使有 time() 的回声，我也确实看到了正确的时间 (16:27:39)。

这是PHPExcel的错误还是我在这里做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-30T16:08:06.187

最好添加时间差，而不是更改 PHPExcel 库：

```
$timeStart + date('Z', $timeStart)
```

例如像这样：

```
date_default_timezone_set('America/New_York');
function writeTimeLine($objActiveSheet, &$lineNumber, $timeStart, $timeEnd, $duration, $category, $client, $date, $comment)
{
    $objActiveSheet->setCellValue('A'.$lineNumber, PHPExcel_Shared_Date::PHPToExcel( $timeStart + date('Z', $timeStart) ));
    $objActiveSheet->getStyle('A'.$lineNumber)->getNumberFormat()->setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_DATE_TIME4);
}
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T20:45:11.173

刚刚发现问题：PHPExcel 内部转换为UTC时间：PHPExcel/Shared/Date.php

函数 PHPToExcel 将时区临时更改为 UTC，然后返回默认时区。

解决方案很简单，但需要更改该文件。只需复制粘贴 PHPToExcel 函数，将其命名为 PHPToExcelWithoutUTC（或您想要的任何名称）并注释以下行：

```
//$saveTimeZone = date_default_timezone_get();
//date_default_timezone_set('UTC');

//date_default_timezone_set($saveTimeZone); 
```

它有效。

编辑：似乎默认情况下总是使用 UTC 时间。我不会删除这个线程，因为它可能对那些想要用户时区的人有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-09T00:59:20.860

授予相当老，但想提供另一种解决方案。

如果您不想编辑库源文件，因为[`PHPExcel_Shared_Date::PHPToExcel`(1.7.8+)](https://github.com/PHPOffice/PHPExcel/blob/1.7.8/Classes/PHPExcel/Shared/Date.php#L171)接受整数时间戳或 DateTime 对象，您可以轻松地将整数时间戳转换为 DateTime 对象。

然后 PHPToExcel 将在调用 $dateValue->format() 时使用您的 DateTime 对象的时区。

DateTime 时区仅根据构造/修改计算，而不是根据格式计算。

**PHP 5 <= 5.2**

```
$timeStart = new DateTime(date("c", $timeStart));
PHPExcel_Shared_Date::PHPToExcel($timeStart); 
```

**PHP 5 >= 5.3**

```
$date = new DateTime();
PHPExcel_Shared_Date::PHPToExcel($date->setTimestamp($timeStart)); 
```

**笔记**

> DateTime 构造在使用`'@' . $timestamp`.
> 
> `setTimestamp`使用环境当前时区。
> 
> 但是`setTimestamp`直到 5.3 才提供

在开发交钥匙解决方案时，通常最好的做法是尽量避免发生任何改变或试图确定部署环境的任何事情。我经常需要在其他应用程序中修复的一个很好的例子是`date('Y-m-d', PHP_INT_MAX);`. 这在 32 位系统上可以正常工作，但不能在 64 位系统上运行（Windows 除外）。在不同环境之间产生意想不到的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-06T04:08:33.430

你可以去看看源码，

ExcelToPHP() 和 PHPToExcel()

[https://github.com/PHPOffice/PHPExcel/blob/1.8/Classes/PHPExcel/Shared/Date.php#L115](https://github.com/PHPOffice/PHPExcel/blob/1.8/Classes/PHPExcel/Shared/Date.php#L115)

还提供参数，以便您可以将时区从 UTC 转换为您的时区

```
 /**
 *    Convert a date from Excel to PHP
 *
 *    @param        integer        $dateValue            Excel date/time value
 *    @param        boolean        $adjustToTimezone    Flag indicating whether $dateValue should be treated as
 *                                                    a UST timestamp, or adjusted to UST
 *    @param        string         $timezone            The timezone for finding the adjustment from UST
 *    @return       integer        PHP serialized date/time
 */
public static function ExcelToPHP($dateValue = 0, $adjustToTimezone = false, $timezone = null) 
```

# asp.net - ASP.NET 在哪里存储用户数据？

> ID：10887970
> 
> 赞同：0
> 
> 时间：2012-06-04T20:34:23.427
> 
> 标签：asp.net, forms-authentication, asp.net-mvc-4

我看到了一些奇怪的行为，我确信有一个我看不到的简单解释。

使用 Visual Studio 2012 RC、MVC 4，我创建了一个标准的 Internet 应用程序（使用 Forms 身份验证）。然后我使用 aspnet_regsql 将成员表添加到我的数据库中。然后我更新了 Web.config 连接字符串以指向我的自定义数据库：

```
<add name="NewEdCoConnectionString" connectionString="Data Source=localhost\sqlexpress2012;Initial Catalog=NewEdCo;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

当然，更新了 Web.config 中的提供程序节点以使用该连接字符串。

它工作正常。我可以在通常的 IIS Express 中启动应用程序，注册用户，以该用户身份登录等。我终止应用程序，重新启动，我仍然可以以该用户身份登录。所以它正在持久化数据。

但是，在 SQL Server Management Studio 中，当我使用`SELECT * FROM`任何 aspnet_* 表时，它们都不包含任何数据。

它在哪里保存这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:22:42.663

事实证明，正如@Aristos 在对上述问题的评论中所暗示的那样。它使用的*是*不同的数据库，尽管我目前不确定*如何*. 数据库之间的区别是：

```
localhost\SQLEXPRESS2012 
```

对比

```
DAVIDDONAHU436A\SQLEXPRESS2012 
```

如果这是一个网络环境，我会假设命名主机不是本地主机。但这是一个沙盒虚拟机。我已经确认有问题的主机就是那个名字。不知何故，同一主机上有两个同名的 SQL 实例绑定到不同的主机名条目。

奇怪的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T20:41:26.303

在以后的版本中，数据不存储在 aspnet_... 中，而是存储在用户和角色中。在此处查看更多信息：[Aspnet 网站管理工具、Users 表或 aspnet_users 表](https://stackoverflow.com/questions/7915622/aspnet-web-site-administration-tool-users-table-or-aspnet-users-table)

# python - Strange error: AssertionError: Request global variable is not set

> ID：10887972
> 
> 赞同：2
> 
> 时间：2012-06-04T20:34:25.690
> 
> 标签：python, google-app-engine, webapp2

Im getting really frustrated with this error. After i updated to sdk 1.6.6 im starting to see the following error the first time i run certain handlers.

AssertionError: Request global variable is not set.

the important part of the stacktrace

```
Request global variable is not set.
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/data/home/apps/s~kobstadendev/1.359392875892326983/main.py", line 81, in dispatch
    webapp2.RequestHandler.dispatch(self)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 1009, in synctasklet_wrapper
    return taskletfunc(*args, **kwds).get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 322, in get_result
    self.check_success()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 362, in _help_tasklet_along
    value = gen.send(val)
  File "/base/data/home/apps/s~kobstadendev/1.359392875892326983/items_ndb/items.py", line 439, in get
    user = self.auth.get_user_by_session()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 726, in __get__
    value = self.func(obj)
  File "/base/data/home/apps/s~kobstadendev/1.359392875892326983/main.py", line 88, in auth
    return auth.get_auth()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2_extras/auth.py", line 623, in get_auth
    request = request or webapp2.get_request()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1720, in get_request
    assert getattr(_local, 'request', None) is not None, _get_request_error
AssertionError: Request global variable is not set. 
```

It seems like something isnt going right when loading up a new instance. So that when a handler gets loaded and try to use

user = self.auth.get_user_by_session()

webapp2 isnt loaded properly, because if i refresh and hit the same instance the error goes away. Has anyone seen this error, any help or direction would be greatly apreciated.

EDIT:

A little more info. Im using

```
libraries:
- name: webapp2
  version: latest 
```

and python 2.7 . my BaseHandler looks like this

```
class BaseHandler(webapp2.RequestHandler):
"""
    BaseHandler for all requests

    Holds the auth and session properties so they are reachable for all requests
"""
def dispatch(self):
    # Get a session store for this request.
    self.session_store = sessions.get_store(request=self.request)
    try:
        # Dispatch the request.
        webapp2.RequestHandler.dispatch(self)
    finally:
        # Save all sessions.
        self.session_store.save_sessions(self.response)

@webapp2.cached_property
def auth(self):
    return auth.get_auth()

@webapp2.cached_property
def session(self):
    # Returns a session using the default cookie key.
    return self.session_store.get_session()

@webapp2.cached_property
def session_store(self):
    return sessions.get_store(request=self.request)

@webapp2.cached_property
def messages(self):
    return self.session.get_flashes(key='_messages')

def add_message(self, message, level=None):
    self.session.add_flash(message, level, key='_messages')

@webapp2.cached_property
def user(self):
    return self.auth.get_user_by_session()

app = ndb.toplevel(webapp2.WSGIApplication(routes.URLS, debug=config.DEBUG, config=config.CONFIG)) 
```

* * *

Something is wrong with webapp2 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:36:39.927

这似乎是此处讨论的 Webapp2 库中的错误：[https ://groups.google.com/forum/?fromgroups=#!topic/webapp2/sHb2RYxGDLc](https://groups.google.com/forum/?fromgroups=#!topic/webapp2/sHb2RYxGDLc)

# javascript - Variable names and character encodings

> ID：10887974
> 
> 赞同：7
> 
> 时间：2012-06-04T20:34:39.230
> 
> 标签：javascript, character-encoding, sublimetext2

I have [checked](http://mothereff.in/js-variables) that `π` is valid for a JavaScript variable name. Also, when I try writing `var π = Math.PI` in the Chrome console, all is fine.

However, when I include the line `var π = Math.PI` inside a `.js` file written with Sublime Text 2 on a Mac, Chrome complains:

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

I have tried the encodings UTF-8, UTF-16 LE and UTF-16 BE, but none work. When I execute the line `console.log('π')`, written inside Sublime Text 2 with UTF-8, Chrome prints:

```
Ï€ 
```

How can I use the JavaScript variable name `π` in Sublime Text 2, so that Chrome understands it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T20:42:00.803

检查以确保您`<meta charset="utf-8">`在 html 的头部设置了 a ，或者如果字符集不同，您可以在脚本标签上设置 charset 属性：

```
<script src="script.js" charset="utf-8"> 
```

# matlab - Solving non linear equations related to distance

> ID：10887978
> 
> 赞同：0
> 
> 时间：2012-06-04T20:35:00.057
> 
> 标签：matlab, geometry, distance

I want to solve a set of non linear equations in matlab. I mean lets say I have two points defined by (lat1,lon1) and (lat2,lon2). Now I want to find a point lat3,lon3 such that it is at a distance of 20km from both of the points. It is given by the intersection of the circles with radius 20km drawn with points (lat1,lon1) and (lat2,lon2) as center.

However, I am a bit confused about how to solve this equation.

I have the function to calculate the distance between two points in matlab

```
function [ distance ] = calculateDistance( latitude1,longitude1,latitude2,longitude2 )
radius = 6371;
dLat = degtorad(latitude2-latitude1);
dLon = degtorad(longitude2-longitude1);
a = sin(dLat/2) * sin(dLat/2) + cos(degtorad(latitude1)) * cos(degtorad(latitude2)) * sin(dLon/2) * sin(dLon/2);
c = 2 * atan2(sqrt(a), sqrt(1-a));
distance = radius * c;
end 
```

and I am trying to use the solve function of matlab available at [http://www.mathworks.com/help/toolbox/symbolic/solve.html](http://www.mathworks.com/help/toolbox/symbolic/solve.html)

However when I define

```
syms lat3 lon3 
```

and try to get the equations to pass to the solve function it throws the error that `atan2 only accepts arguments of type sym`. How can I over this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:55:23.397

如果您只需要解决该特定问题，则不需要 Matlab 的任何方程求解函数。您可以简单地使用毕达哥拉斯的公式：

如果您的点是（0,0）和（1,0）并且半径是x，那么距离（0,0）和（1,0）都是x的两个点是

(0.5, sqrt (x^2 - 0.25) ) 和 (0.5, - sqrt (x^2 - 0.25))。

现在如果你的点是（a，b）和（c，d），那么两点的距离是

dist = sqrt ( (ca)^2 + (db)^2 )。

好的，现在我们采用一个坐标系，原点为 (a,b)，单位为 dist，横轴经过 (c,d)。在这个坐标系中，有问题的点是

(0.5, +/- sqrt ( (r/dist)^2 - 0.25 ) )。

现在，为了得到原始坐标系，我们必须乘以 dist，得到

(0.5 * dist, +/- sqrt (r^2 - 0.25 * dist^2)),

然后随着矩阵旋转（dist，0）到（ca，db），即

```
cos alpha   -sin alpha
sin alpha   cos alpha 
```

其中 alpha = arccos ( (db) / dist)，即矩阵

```
(d-b) / dist   -(c-a) / dist
(c-a) / dist    (d-b) / dist 
```

这使

(0.5 (db) -/+ (ca) sqrt (r^2 / dist^2 - 0.25), 0.5 (ca) +/- (db) sqrt (r^2 / dist^2 - 0.25)

最后加上 (a,b)，得到

(a + 0.5 (db) -/+ (ca) sqrt (r^2 /dist^2 - 0.25), b + 0.5 (ca) +/- (db) sqrt (r^2 /dist^2 - 0.25) )

这些是您正在寻找的要点。可能我在某个地方犯了一个错误，但我希望方向应该是明确的。

# facebook - how facebook extract abstract of shared linked (articles) ?

> ID：10887979
> 
> 赞同：0
> 
> 时间：2012-06-04T20:35:00.923
> 
> 标签：facebook, algorithm

When sharing an article on facebook in a status, facebook generates a title, abstract and attach an image to the shared article.

For instance, putting www.stackoverflow.com in your status will geenrate

Stack Overflow [https://stackoverflow.com/](https://stackoverflow.com/) This is a collaboratively edited question and answer site for professional and enthusiast programmers. It's 100% free, no registration required.

(which btw: is not in the source code of stackoverflow.com page)

But when trying something like an article in news website, we get some extracted results from source code of the page (check any article in www.goal.com for example) ..

Any idea about the algorithm facebook uses for that ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:54:35.487

facebook 用来显示链接的元数据总是从 html 源代码中提取的。

正如@amit 所说，描述存在于源代码中，标题取自标题标签。[如果您在调试器](http://developers.facebook.com/tools/debug/og/object?q=https://stackoverflow.com/)
中检查该 url，您可以看到 facebook 正在抱怨。 如果您单击页面上的最后一个链接（[查看我们的](http://developers.facebook.com/tools/debug/og/echo?q=https://stackoverflow.com/)[**爬虫**](http://developers.facebook.com/tools/debug/og/echo?q=https://stackoverflow.com/)[对您的 URL 看到的](http://developers.facebook.com/tools/debug/og/echo?q=https://stackoverflow.com/)确切内容），您可以看到 fb**爬虫**得到的响应。
[](http://developers.facebook.com/tools/debug/og/echo?q=https://stackoverflow.com/)

 ****此来源有时可能与您在浏览器中获得的不同（尽管在这种情况下不是），因为某些网站会检查用户代理字符串，如果它是 fb **scraper** ( `facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)`)，则会返回不同的响应。****

# python - libjpeg.so.62：无法打开共享对象文件：没有这样的文件或目录

> ID：10887980
> 
> 赞同：3
> 
> 时间：2012-06-04T20:35:05.893
> 
> 标签：python, eclipse, python-imaging-library

我正在尝试使用 python 和 PIL 进行一些图像处理。我遇到了一个问题，我无法正确导入 _imaging 文件夹，所以我重新安装了，现在我遇到了这个问题：

```
libjpeg.so.62: cannot open shared object file: No such file or directory 
```

我在命令行中做了 apt-get remove python-imaging 然后 apt-get install python-imaging ，现在它在 Eclipse 中不起作用。有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:58:50.867

尝试在 Ubuntu 中安装 libjpeg62 模块，libjpeg.so.62 文件是其中的一部分。

# c# - reportviewer.LocalReport.GetTotalPages() returns 0 or error

> ID：10887981
> 
> 赞同：1
> 
> 时间：2012-06-04T20:35:10.760
> 
> 标签：c#, asp.net, custom-controls, reportviewer, report-viewer2010

I'm using a user control, and added my report viewer and a custom toolbar. I want to create a custom navigation for it aswell, but for some reason when I want to check the total pages to decide whether or not to show the navigation buttons it either returns 0 or "This expression causes side effects and will not be evaluated" error..

I've ran out of ideas and not quite sure where to go from here..

```
<rsweb:reportviewer 
ID="rvReports" 
runat="server" ShowToolBar="False"
SizeToReportContent="True" AsyncRendering="false" /> 
```

codebehind:

```
rds = new Microsoft.Reporting.WebForms.ReportDataSource("dsName", myclasstoload());     
rvReports.LocalReport.DataSources.Add(rds);
rvReports.PageCountMode = PageCountMode.Actual;
rvReports.LocalReport.Refresh();
rvReports.DataBind();

if (rvReports.LocalReport.GetTotalPages() > 1)
{
 liFirst.Visible = true;
 liPrevious.Visible = true;
 liNext.Visible = true;
 liLast.Visible = true;
} 
```

this is all on the databind event in my usercontrol (.ascx). Any help is more than appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:01:31.437

这个[msdn question](http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/95672f99-a480-4cae-a583-50422a596f94/)可能是您的答案，`GetTotalPages()`直到报告呈现后才能调用该方法。相关报价：

> 在呈现报表的第一页之前，报表服务器不会计算总页数。在 ASP.Net 事件 PreRender 之前，ReportViewer 不会从服务器请求页面呈现。如果在 ReportViewer.PreRender 事件触发后将 GetTotalPages 调用移动到某个点，您应该会获得所需的行为。

另请参阅[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T19:57:28.923

为了像我一样获取页面，我必须以 pdf 格式呈现报告，然后使用 Itextsharp 库中的 pdfreader 类来获取总页数

```
var bytes=viewer.Render("PDF");
PdfReader reader = new PdfReader(bytes);
var pageCount = reader.NumberOfPages 
```

如果您想以 pdf 格式呈现您的 rdlc，这很有效

# mysql - 包含 UTF8 字符的旧条目未正确保存在 UTF8 数据库中

> ID：10887985
> 
> 赞同：2
> 
> 时间：2012-06-04T20:35:28.623
> 
> 标签：mysql, unicode

好的，所以我已经确保我的 MySQL（5.1.61）数据库是 UTF8，表是 UTF8，字段是 UTF8，并且 MySQL 客户端的字符集设置为 UTF8。我可以成功存储和检索 UTF8 条目。我还确保我的终端编码设置为 UTF8。

```
CREATE TABLE `cities` (
  `name` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

当涉及到数据库中已经存在的 200,000 个条目时的问题。看来我们继承该项目的人搞砸了很多编码，实际上保存了一个字符串，例如`Hörby`where`HÃ¶rby`和`Ã`有效`¶`的 UTF8 字符。也就是说，**MySQL 正在接收 UTF8 字符串`HÃ¶rby`并将其存储为**. 这是一个示例，其中第一个条目是旧条目之一，第二个是我们将“ `Hörby`”插入数据库，并将所有内容设置为 UTF8：

```
mysql> INSERT INTO cities SET name = 'Hörby';
Query OK, 1 row affected (0.00 sec)

mysql> SELECT * FROM cities;
+----------+
| name     |
+----------+
| HÃ¶rby   | <--- old entry
| Hörby    | <--- new entry
+----------+ 
```

我们可以做些什么来将被压扁的角色变成他们曾经的样子？在这一点上，我们几乎已经准备好做任何事情，但是重新键入所有 200,000 条记录是不可行的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:48:23.170

看起来您之前已将`utf8`编码字符串存储在一个`latin1`列中，然后将该列转换为`utf8`. 要解决这个问题：

1.  将数据转换回`latin1`：

    ```
    ALTER TABLE cities MODIFY name varchar(255) CHARACTER SET latin1; 
    ```

2.  在不更改数据的情况下将列类型更改为 UTF-8（通过`binary`）：

    ```
    ALTER TABLE cities MODIFY name varchar(255) CHARACTER SET binary;
    ALTER TABLE cities MODIFY name varchar(255) CHARACTER SET utf8; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:41:32.020

您可以`REPLACE`在 MYSQL 中使用该函数。

就像是 -

```
`UPDATE cities
 SET name = REPLACE(name, 'Ã¶', 'ö');` 
```

# php - Magento Programming: Getting list of all Manufacturers and corresponding Manufacturer ID

> ID：10887987
> 
> 赞同：4
> 
> 时间：2012-06-04T20:35:32.490
> 
> 标签：php, magento

I need help with some coding. I need to get a list of All Manufacturers with their corresponding magento ID. Is that possible? Please help. thanks. I tried some mods but only get one or the other. If its possible, pls help w/ this one last thing. I thank you in advance

```
$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 'manufacturer');

foreach ( $attribute->getSource()->getAllOptions(true, true) as $option){
     $attributeArray[$option['value']] = $option['label'];
     }  

foreach($attributeArray as $key=>$val){
echo $val;

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T20:58:03.160

不确定您需要什么格式，但下面的示例应该说明如何获得您需要的值：

```
$attribute = Mage::getModel('eav/entity_attribute')
                ->loadByCode('catalog_product', 'manufacturer');

$valuesCollection = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter($attribute->getData('attribute_id'))
            ->setStoreFilter(0, false);

$preparedManufacturers = array();            
foreach($valuesCollection as $value) {
    $preparedManufacturers[$value->getOptionId()] = $value->getValue();
}   

if (count($preparedManufacturers)) {
    echo "<h2>Manufacturers</h2><ul>";
    foreach($preparedManufacturers as $optionId => $value) {
        echo "<li>" . $value . " - (" . $optionId . ")</li>";
    }
    echo "</ul>";
} 
```

# asp.net - ASP.net content tags, and the id attribute

> ID：10887988
> 
> 赞同：0
> 
> 时间：2012-06-04T20:35:35.907
> 
> 标签：asp.net, visual-studio

I've made a few master pages in visual studio, and then a few implementing pages, and Visual Studio sticks ID attributes onto all of my tags:

```
<asp:Content ID="Content1" ContentPlaceHolderID="OtherContent" ></asp:Content> 
```

What gives with the IDs? What are they good for? How do I access them from the code behind?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:41:34.203

在服务器上运行的所有控件都必须具有 ID 属性作为唯一标识符。它们适用于查找子控件并保持控件层次结构到位。如果您有一个文本框位于一个面板中，该面板位于更新面板中，而更新面板位于 WebUserControl 中，而 WebUserControl 位于页面中的 ContentPlaceHolder 中，那么只需要其中一个没有正确的 ID 属性以保持 TextBox 之间的连接和页面。

为了从后面的代码中访问它，您需要`runat="server"`在此标签上设置属性。

# clojure - 将类型提示附加到 Clojure 延迟调用

> ID：10887994
> 
> 赞同：4
> 
> 时间：2012-06-04T20:35:47.827
> 
> 标签：clojure

我试图将句柄放在编译时不可用但在运行时可用的 Java 对象上，如下所示：

```
(def component-manager (delay (SomeJavaObject/getHandle))) 
```

（如果有比延迟更好的机制可用，这将是受欢迎的）。

使用这些对象时，会生成反射警告。由于有时这些相当频繁，我试图通过以下方式避免它：

```
(def my-handle ^SomeJavaObject (delay (SomeJavaObject/getHandle))) 
```

不幸的是，在这种情况下仍然会产生反射警告。

* * *

修改参考作品：

```
(.foo ^SomeJavaObject @my-handle) 
```

...但这大大丑化了代码。

* * *

包装在添加类型提示的宏中似乎是一种明显的方法：

```
(def my-handle' (delay (SomeJavaObject/getHandle)))
(defmacro my-handle []
  (with-meta '(deref my-handle')
             {:tag SomeJavaObject})) 
```

...看起来它应该做正确的事情：

```
=> (set! *print-meta* true)
=> (macroexpand '(my-handle))
^SomeJavaObject (deref my-handle') 
```

...但是当橡胶上路时，这并不成立：

```
=> (.foo (my-handle))
Reflection warning, NO_SOURCE_PATH:1 - reference to field foo can't be resolved. 
```

* * *

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:28:43.690

我不确定延迟是否是最好的选择，或者是否有更好的解决方案来管理这些 Java 对象，但就反射警告而言，下面的代码确实通过将延迟值访问包装在具有类型提示的函数中来解决它。

```
user=> (set! *warn-on-reflection* true)
true
user=> (def myobj (delay "hello world"))
#'user/myobj
user=> (defn ^String get-my-obj [] @myobj)
#'user/get-my-obj
user=> (.length (get-my-obj))
11 
```

为了使它更容易，您可以创建一个创建延迟对象的宏，还可以创建一个`get-<delay object name>`函数来使用类型提示访问该延迟对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-01T00:20:34.420

我想提供两种不同的解决方案：

**1.延迟**

首先，我想发布一个答案，说明如何重现您的问题。（正如措辞，您的问题是抽象的，不能在 REPL 中运行。）

```
(set! *warn-on-reflection* true)
(def rt (delay (Runtime/getRuntime)))
(.availableProcessors @rt) ; Reflection warning 
```

您提到您不喜欢以下方法，因为您认为它很冗长：

```
(.availableProcessors ^java.lang.Runtime @rt) ; no warning 
```

我尝试了以下方法，但没有解决反射警告：

```
(def rt (delay ^java.lang.Runtime (Runtime/getRuntime)))
(.availableProcessors @rt) ; Reflection warning 
```

结论：如果您想使用延迟，[Ankur 的回答](https://stackoverflow.com/a/10891567/109618)效果很好。为了适应这个例子：

```
(def delayed-runtime (delay (Runtime/getRuntime)))
(defn ^java.lang.Runtime get-runtime [] @delayed-runtime)
(.availableProcessors (get-runtime)) ; no warning 
```

**2\. 记忆**

你也可以考虑使用 memoization，因为它需要更少的代码：

```
(def ^java.lang.Runtime get-runtime (memoize #(Runtime/getRuntime)))
(.availableProcessors (get-runtime)) ; no warning 
```

# c# - WPF“仅日历月”在悬停时触发 DisplayDateChanged

> ID：10887999
> 
> 赞同：3
> 
> 时间：2012-06-04T20:36:06.063
> 
> 标签：c#, wpf, calendar

我会尽力解释我的问题：

首先我想要一个只显示月份的日历，我做到了

```
<Calendar x:Name="_Calendar" DisplayMode="Year" DisplayModeChanged="_Calendar_DisplayModeChanged" DisplayDateChanged="_Calendar_DisplayDateChanged"/> 
```

然后当 DisplayModeChanged 触发时，我简单地这样做：

```
private void _Calendar_DisplayModeChanged(Object InSender, CalendarModeChangedEventArgs InE)
        {
            if (_Calendar.DisplayMode != CalendarMode.Year)
            {
                _Calendar.DisplayMode = CalendarMode.Year;
            }
        } 
```

一切都很好，直到我想在用户更改所选月份时刷新网格上的数据，例如：

```
private void _Calendar_DisplayDateChanged(Object InSender, CalendarDateChangedEventArgs InE)
        {
                _RefreshGrid();
        } 
```

第一次（我的意思是在用户与日历交互之前），网格刷新正常，如果用户将鼠标悬停在其他月份上，则没有任何反应（我想要这个）。但是在用户单击另一个月份后，网格再次刷新确定，但是当用户将鼠标悬停在其他月份时，网格再次刷新，我希望网格仅在用户单击其他月份时刷新。

因此，当用户悬停时会触发 DisplayDateChanged ...

这很奇怪，因为如果我在 _RefreshGrid() 中放置一个消息框，则悬停不会触发 DisplayDateChanged。

希望你能理解，如果不是我可以尝试更好地解释。

谢谢！！

编辑：我认为问题出在焦点上，消息框不会发生错误，因为消息框获得焦点，当我单击任何日期时，如果我将鼠标悬停在其他日期上，则触发 DisplayDateChanged，但是如果我首先单击另一个地方不要有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:35:06.567

这解决了我的问题：

```
 private void _Calendar_PreviewMouseUp(object sender, MouseButtonEventArgs e)
            {
                if (Mouse.Captured is CalendarItem)
                {
                    Mouse.Capture(null);
                }
            } 
```