# StackOverflow 问答 10540000-10540999

# asp.net-mvc - 从长远来看，HttpRuntime.Cache 上的 ConcurrentDictionary 会伤害我吗？

> ID：10540002
> 
> 赞同：1
> 
> 时间：2012-05-10T18:22:21.483
> 
> 标签：asp.net-mvc, performance

我试图挤出一点点性能，因此我正在查看自定义 ViewLocationCache。

默认值将查找存储在 中`HttpRuntime.Cache`，如果可能的话，我想尽量避免那里相关的开销。`Html.RenderPartial`主要是因为我有几个循环调用的视图。

我想做的是使用 a`ConcurrentDictionary`代替。我查看了 MVC 源代码，我看不到也想不出这会不好的原因。我部署到 Azure，所以 AppDomain 保证在部署时得到重置，我不需要担心坏命中。

关于为什么我*不应该这样*做，我是否错过了一些痛苦的显而易见的事情？

```
//fastCache is a static ConcurrentDictionary<string, string>
public string GetViewLocation(HttpContextBase httpContext, string key)
{
    return fastCache[key];
}

public void InsertViewLocation(HttpContextBase httpContext, string key, string virtualPath)
{
    fastCache[key] = virtualPath;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:13:00.270

`HttpRuntime.Cache`为您提供了可以配置的细粒度过期策略，而并发字典无法获得这些策略。例如，如果您的服务器根据您为项目定义的优先级开始内存不足，它将使它们过期，而并发字典将继续增长，直到您的应用程序因内存不足错误而崩溃。但是，如果您确定这`HttpRuntime.Cache`会以某种方式损害您的应用程序性能（这将是非常令人惊讶的），那么尝试寻找替代方案似乎是一个正当理由。只是不要忘记，`HttpRuntime.Cache`不仅仅是一个简单的线程安全哈希表。

# django - Django 表单：is_valid 不同意通过 Ajax 检索的字段值

> ID：10540003
> 
> 赞同：1
> 
> 时间：2012-05-10T18:22:25.493
> 
> 标签：django, django-forms, django-validation

我正在使用一些 ajax 在我的表单中动态填充自定义选择框。但是，当我发布数据时，该**`is_valid`**方法不想验证该字段的提交值，尽管它是来自数据库的有效值，只是 Django 本身没有检索到。

这是我最初用 Ajax 填充的空字段：

```
accompanying_partner = forms.ChoiceField(required=False) 
```

它是根据另一个选定的选择字段动态填充的。

Django 警告我该值无效。

关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:15:45.847

您应该以某种方式提供过滤器数据集以形成构造函数（如果它包含在`data`- 那很好），然后在构造函数中计算实际选择并设置`self.fields['accompanying_partner'].choices = actual_choices`为使验证工作。

# java - 无法从哈希图中删除元素

> ID：10540004
> 
> 赞同：0
> 
> 时间：2012-05-10T18:22:27.313
> 
> 标签：java, hashmap, element

我创建了一个 hashmap 来存储对象 Person，键是一个 String（Person 的电子邮件地址）。我正在尝试使用该键删除哈希图中的一个条目，但不确定为什么它不会删除它。什么地方出了错？我的代码和输出包括在内。任何帮助表示赞赏！

```
import java.util.HashMap;
import java.util.Map;

public class TestHashMap {

    private Map <String, Person> personDB = new HashMap<String, Person>();

    // added main to test the code
    public static void main(String[] args) {

TestHashMap org = new TestHashMap() ;

      // add data to personDB
org.add(new Person("A", "Smith","1234567890","ASmith@atest.com"));
org.add(new Person("B", "Smith","1234567890", "BSmith@atest.com"));
org.add(new Person("C", "Walsh","1234567890","CWalsh@atest.com"));
org.add(new Person("D", "Glatt","1234567890","DGlatt@atest.com"));
org.add(new Person("E", "Cheong", "1234567890","ACheong@atest.com"));
org.add(new Person("F", "Walsh","0123456789","FWalsh@sg.com"));

      // remove an element from personDB
org.display("testing ......before remove");  // display all elements in personDB
org.remove("ACheong@atest.com");
org.display("after..................");   
    }

    public void add(Person p) {
    String key = p.getEmail();
    personDB.put(key, p);
    }

    public void remove(String mail) {
Object obj = personDB.remove(personDB.get(mail));   
System.out.println(obj + " deleted!");
    }
} 
```

我的输出：

```
testing ......before remove("ECheong@atest.com")
ID:[ASmith@atest.com]
ID:[CWalsh@atest.com]
ID:[FWalsh@sg.com]
ID:[ECheong@atest.com]
ID:[DGlatt@atest.com]
ID:[BSmith@atest.com]
null deleted!
after..................
ID:[ASmith@atest.com]
ID:[CWalsh@atest.com]
ID:[FWalsh@sg.com]
ID:[ECheong@atest.com]
ID:[DGlatt@atest.com]
ID:[BSmith@atest.com] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:28:35.513

```
Object obj = personDB.remove(personDB.get(mail)); 
```

应该

```
Object obj = personDB.remove(mail); 
```

to 的参数`remove`是`key`，而不是元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:31:14.393

人是关键，而不是“Acheong@atest.com”

这应该有效：

```
Person p = new Person("E", "Cheong", "1234567890","ACheong@atest.com");
org.remove(p); 
```

# linux - Linux 内核如何确定 __init 调用的顺序？

> ID：10540008
> 
> 赞同：10
> 
> 时间：2012-05-10T18:22:35.480
> 
> 标签：linux, linux-kernel, kernel-module

`__init`在驱动模块初始化和内核的其他函数中，内核中有很多调用实例。我的疑问是内核如何确定`__init`调用的顺序。更重要的是，它又如何确定驱动模块_init的调用顺序呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T11:51:29.283

所有的初始化魔法都在文件中实现：

1.  [包括/asm-generic/vmlinux.lds.h](http://lxr.free-electrons.com/source/include/asm-generic/vmlinux.lds.h)
2.  [包括/linux/init.h](http://lxr.free-electrons.com/source/include/linux/init.h)
3.  [初始化/main.c](http://lxr.free-electrons.com/source/init/main.c)

* * *

首先，看看`include/asm-generic/vmlinux.lds.h`它包含[以下内容](http://lxr.free-electrons.com/source/include/asm-generic/vmlinux.lds.h#L14)：

```
 13  *      . = START;
 14  *      __init_begin = .;
 15  *      HEAD_TEXT_SECTION
 16  *      INIT_TEXT_SECTION(PAGE_SIZE)
 17  *      INIT_DATA_SECTION(...)
 18  *      PERCPU_SECTION(CACHELINE_SIZE)
 19  *      __init_end = .; 
```

其中[INIT_TEXT_SECTION](http://lxr.free-electrons.com/source/include/asm-generic/vmlinux.lds.h#L790)和[INIT_DATA_SECTION](http://lxr.free-electrons.com/source/include/asm-generic/vmlinux.lds.h#L798)定义如下：

```
790 #define INIT_TEXT_SECTION(inittext_align)                               \
791         . = ALIGN(inittext_align);                                      \
792         .init.text : AT(ADDR(.init.text) - LOAD_OFFSET) {               \
793                 VMLINUX_SYMBOL(_sinittext) = .;                         \
794                 INIT_TEXT                                               \
795                 VMLINUX_SYMBOL(_einittext) = .;                         \
796         }
797 
798 #define INIT_DATA_SECTION(initsetup_align)                              \
799         .init.data : AT(ADDR(.init.data) - LOAD_OFFSET) {               \
800                 INIT_DATA                                               \
801                 INIT_SETUP(initsetup_align)                             \
802                 INIT_CALLS                                              \
803                 CON_INITCALL                                            \
804                 SECURITY_INITCALL                                       \
805                 INIT_RAM_FS                                             \
806         } 
```

让我们看一下[INIT_CALLS](http://lxr.free-electrons.com/source/include/asm-generic/vmlinux.lds.h#L633)定义的例子：

```
628 #define INIT_CALLS_LEVEL(level)                                         \
629                 VMLINUX_SYMBOL(__initcall##level##_start) = .;          \
630                 *(.initcall##level##.init)                              \
631                 *(.initcall##level##s.init)  

633 #define INIT_CALLS                                                      \
634                 VMLINUX_SYMBOL(__initcall_start) = .;                   \
635                 *(.initcallearly.init)                                  \
636                 INIT_CALLS_LEVEL(0)                                     \
637                 INIT_CALLS_LEVEL(1)                                     \
638                 INIT_CALLS_LEVEL(2)                                     \
639                 INIT_CALLS_LEVEL(3)                                     \
640                 INIT_CALLS_LEVEL(4)                                     \
641                 INIT_CALLS_LEVEL(5)                                     \
642                 INIT_CALLS_LEVEL(rootfs)                                \
643                 INIT_CALLS_LEVEL(6)                                     \
644                 INIT_CALLS_LEVEL(7)                                     \
645                 VMLINUX_SYMBOL(__initcall_end) = .; 
```

您可以看到 this 定义了标有 的部分名称`.initcall...`。所有标记的数据都进入该`__initcall_start .. __initcall_end`范围。

* * *

现在让我们看一下`[include/linux/init.h`包含[以下](http://lxr.free-electrons.com/source/include/linux/init.h)内容的内容：

```
44 #define __init          __section(.init.text) __cold notrace
45 #define __initdata      __section(.init.data) 
```

并进一步：

```
189 #define __define_initcall(level,fn,id) \
190         static initcall_t __initcall_##fn##id __used \
191         __attribute__((__section__(".initcall" level ".init"))) = fn
...
220 #define device_initcall(fn) __define_initcall("6",fn,6)
...
225 #define __initcall(fn) device_initcall(fn)
...
271 /**
272  * module_init() - driver initialization entry point
273  * @x: function to be run at kernel boot time or module insertion
274  * 
275  * module_init() will either be called during do_initcalls() (if
276  * builtin) or at module insertion time (if a module).  There can only
277  * be one per module.
278  */
279 #define module_init(x)  __initcall(x); 
```

所以你可以看到`module_init`定义为`__initcall` 定义为`device_initcall`定义为`__define_initcall("6",fn,6)`。这里的 6 表示 initcall 级别。见下文...

* * *

`init/main.c`包含[以下内容](http://lxr.free-electrons.com/source/init/main.c)：

```
711 extern initcall_t __initcall_start[];
712 extern initcall_t __initcall0_start[];
713 extern initcall_t __initcall1_start[];
714 extern initcall_t __initcall2_start[];
715 extern initcall_t __initcall3_start[];
716 extern initcall_t __initcall4_start[];
717 extern initcall_t __initcall5_start[];
718 extern initcall_t __initcall6_start[];
719 extern initcall_t __initcall7_start[];
720 extern initcall_t __initcall_end[];
721
722 static initcall_t *initcall_levels[] __initdata = {
723         __initcall0_start,
724         __initcall1_start,
725         __initcall2_start,
726         __initcall3_start,
727         __initcall4_start,
728         __initcall5_start,
729         __initcall6_start,
730         __initcall7_start,
731         __initcall_end,
732 };
733 
734 /* Keep these in sync with initcalls in include/linux/init.h */
735 static char *initcall_level_names[] __initdata = {
736         "early",
737         "core",
738         "postcore",
739         "arch",
740         "subsys",
741         "fs",
742         "device",
743         "late",
744 };
745 
746 static void __init do_initcall_level(int level)
747 {
748         extern const struct kernel_param __start___param[], __stop___param[];
749         initcall_t *fn;
750 
751         strcpy(static_command_line, saved_command_line);
752         parse_args(initcall_level_names[level],
753                    static_command_line, __start___param,
754                    __stop___param - __start___param,
755                    level, level,
756                    &repair_env_string);
757 
758         for (fn = initcall_levels[level]; fn < initcall_levels[level+1]; fn++)
759                 do_one_initcall(*fn);
760 }
761 
762 static void __init do_initcalls(void)
763 {
764         int level;
765 
766         for (level = 0; level < ARRAY_SIZE(initcall_levels) - 1; level++)
767                 do_initcall_level(level);
768 } 
```

如您所见`do_initcall`，简单地迭代所有 initcall 级别并调用每个级别的条目`do_initcall_level`调用[do_one_initcall的每个级别。](http://lxr.free-electrons.com/source/init/main.c#L680)

* * *

我们还要注意内核`__init`在执行后会丢弃所有函数。因此它们不会在内核加载后发生在内存中。

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-05T15:37:57.707

@Ilya 有很好的回应。我将添加三个项目：

1.  `__initcall`条目可以在和之间`System.map`看到。每个级别也有一个。这是 futex.c:和 System.map 条目的初始化示例：`__initcall_start``__initcall_end``__initcall[0-7]_start``core_initcall(futex_init)``ffffffff82abf83c t __initcall_futex_init1`

2.  内置模块不需要明确的`LEVEL_initcall`源定义。它们会在链接期间自动添加到符号表中。查看`.config`内置的模块。请参阅`CONFIG_SERIAL_8250=y`，`serial/8250`代码和 System.map 条目：`ffffffff82ac0020 t __initcall_serial8250_init6`

3.  `__initcall`调用不存在的设备，但将失败并显示状态`ENODEV`。该`do_one_initcall`功能不检查状态。如果这是一个关键子系统，它负责通过紧急情况停止引导过程。

# c# - “当前上下文中不存在名称‘modToSend’”

> ID：10540009
> 
> 赞同：0
> 
> 时间：2012-05-10T18:22:42.953
> 
> 标签：c#

我的 Homecontroller.cs 中有一段简单的编码，但我在最后一行收到错误消息，说“当前上下文中不存在名称‘modToSend’”。这怎么可能？只有最后一行不知道？？？？

```
public class HomeController : Controller, IDisposable
{
    private MvcEShop2.WcfEshop2Service.Eshop2ServiceClient proxy = null;

    private String GetDuration(DateTime startdatum, DateTime einddatum)
    {
        String maand1 = startdatum.Month.ToString("MMMM");
        String maand2 = einddatum.Month.ToString("MMMM");
        String duration = "";
        if (maand1 == maand2)
        {
            duration = startdatum.Day.ToString()
                + " - " + einddatum.Day.ToString()
                + " " + maand1
                + " " + startdatum.Year.ToString();
        }
        else
        {
            duration = startdatum.Day.ToString()
                + startdatum.Month.ToString("MMMM")
                + " - " + einddatum.Day.ToString()
                + " " + einddatum.Month.ToString("MMMM")
                + " " + startdatum.Year.ToString();
        }
        return duration;
    }

    public HomeController()
     {
         proxy = new MvcEShop2.WcfEshop2Service.Eshop2ServiceClient();
     }

    struct EventStruct
    {
        public SEvent Event { get; set; }
        public String Duration { get; set; }
    };

    public ActionResult Index()
    {
        List<SEvent> modFromWcf = proxy.GetAllEventsByPeriod(@System.DateTime.Now.Year, @System.DateTime.Now.Year + 1, "EN").ToList();
        List<EventStruct> modTosend = new List<EventStruct>();
        foreach (SEvent item in modFromWcf)
        {
            EventStruct ES;
            ES.Event = item;
            ES.Duration = GetDuration(item.StartDate ,item.EndDate);
            modTosend.Add(ES);
        };

        return View("Index", modToSend);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:25:58.997

如果这是从您的代码中直接复制和粘贴，请检查参数中“S”的大小写是否与返回的视图有关。

# asp.net-mvc-3 - 如何从模型重定向到操作

> ID：10540010
> 
> 赞同：-1
> 
> 时间：2012-05-10T18:22:44.227
> 
> 标签：asp.net-mvc-3

我有一个使用大型模型的应用程序。收集所有数据需要五个视图页面。我将模型保持在视图页面之间的会话中。有时会话在进程中间不活动后终止。发生这种情况时，我想将用户推回到主页。

这是我的模型的一部分：

```
 private MemberRegistration MemberRegistration {
        get {
            if (HttpContext.Current.Session["RegisterModel_MemberRegistration"] == null)
            {
               return null;
               >>>> I want to go back the home page here <<<<
            }
            return (MemberRegistration)HttpContext.Current.Session["RegisterModel_MemberRegistration"];
        }
        set {
            HttpContext.Current.Session["RegisterModel_MemberRegistration"] = value;
        }
    }
    public string FirstName {
       get {
           return MemberRegistration.FirstName;
       }
       set {
           MemberRegistration.FirstName = value;
       }
    } 
```

我的问题是这个。当用户单击“下一步”按钮时，模型绑定开始。模型绑定发生在 [HTTPPost] 控制器操作之前。如果会话已过期，我们点击“return null”行。我想立即将用户送回主页。

第二个问题 - 除了使用 Session. （请不要建议我们将部分注册保留在数据库中。我宁愿将其保留在 Session 中，也不愿在数据库中保留部分记录所产生的问题。）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:17:55.233

替代方案：使用 jQuery UI 并创建选项卡。在单个视图页面上使用 5 个选项卡而不是 5 个视图页面 - 您不必将模型分解成碎片。

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

# java - JNA 调用 RegisterDeviceNotification 失败并出现错误 1066

> ID：10540011
> 
> 赞同：0
> 
> 时间：2012-05-10T18:22:45.900
> 
> 标签：java, winapi, jna

我正在尝试注册有关 USB 设备到达和设备从 java swing 应用程序中删除完整事件的通知。

我已成功调用

```
SetWindowLong(hWnd, MyUser32.GWLP_WNDPROC, listener); 
```

注册一个监听器，我收到类型的通知`WM_DEVICECHANGE`。到现在为止还挺好。

现在我想调用 RegisterDeviceNotification 以确保我收到设备到达通知并删除完整事件。这是我尝试过的：

```
HWND hWnd = new HWND();
hWnd.setPointer(Native.getWindowPointer(frame));
DEV_BROADCAST_DEVICEINTERFACE filter = new DEV_BROADCAST_DEVICEINTERFACE();
filter.dbcc_classguid = GUID_DEVINTERFACE_USB_DEVICE;       
filter.dbcc_devicetype = DBT_DEVTYP_DEVICEINTERFACE;
filter.dbcc_name = new char[1];
filter.dbcc_reserved = new DWORD(0);
filter.dbcc_size = new DWORD(filter.size());
filter.dbcc_size = new DWORD(filter.size());

long retVal = MyUser32.MYINSTANCE.RegisterDeviceNotification(new HANDLE(hWnd.getPointer()), filter.getPointer(), DEVICE_NOTIFY_WINDOW_HANDLE);

if (retVal != 0) {
    System.out.println("Error registering for usb: " + Native.getLastError());
} 
```

我的 JNA 声明是：

```
public long RegisterDeviceNotification(HANDLE hRecipient, Pointer NotificationFilter, DWORD Flags);

public static class DEV_BROADCAST_DEVICEINTERFACE extends Structure {
      public DWORD dbcc_size;
      public DWORD dbcc_devicetype;
      public DWORD dbcc_reserved;
      public GUID  dbcc_classguid;
      public char[] dbcc_name;
}

public static final GUID GUID_DEVINTERFACE_USB_DEVICE = new GUID(new byte[] {
        (byte)0xA5, (byte)0xDC, (byte)0xBF, 0x10, 0x65, 0x30, 0x11, (byte)0xD2, (byte)0x90, 0x1F, 0x00, (byte)0xC0, 0x4F, (byte)0xB9, 0x51, (byte)0xED          
}); 
```

我总是收到错误 1066。任何帮助将不胜感激。如果需要更多信息，请告诉我，我可以将其包括在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:28:58.147

声明 RegisterDeviceNotification 返回 long 是导致问题的原因。根据 JNA 常见问题，[JNA 常见问题](https://github.com/twall/jna/blob/master/www/FrequentlyAskedQuestions.md#how-do-i-map-a-native-long-type)

> 实际上，从来没有人问过这个问题，但他们确实需要答案。不要长时间使用Java！
> 
> 在 Windows 上，您可以使用 Java int，因为本机 long 类型始终是 32 位。在任何其他平台上，该类型可能是 32 位或 64 位，因此您应该使用 NativeLong 类型以确保使用正确的大小。

# ruby-on-rails - 为投票系统找出/重构这个 if/else

> ID：10540016
> 
> 赞同：1
> 
> 时间：2012-05-10T18:23:03.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, refactoring

在没有庞大的 if/else 结构的情况下，我很难概念化如何以最好的方式做到这一点。我知道我可以那样做，但我试图将它抽象成方法，我迷路了。

```
upvote = 1
no vote = 0
downvote = -1 
```

基本上，一个人可以点击赞成或反对按钮。

如果他们点击 upvote 并且他们当前的投票是 upvote，它会“取消投票”帖子并将其设置为零

如果他们点击了downvote并且他们当前的投票是upvote，它会将其切换为downvote

如果他们的投票为零，并且他们点击了upvote，它将投票设置为1

反对票的情况正好相反

这是我到目前为止所拥有的，但它不考虑在您已经单击 upvote 之后单击 upvote .. 而不是将其设置为 0，而是将其设置为 -1。

我得到了问题，我只是很难弄清楚如何写它

```
 def update_vote(upvote_or_downvote)
    self.active_vote? ? self.value = 0 : self.alternate_vote
  end

  def active_vote?
    self.value != 0
  end

  def alternate_vote
    self.value *= -1
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:33:18.433

有很多方法可以做到这一点。这是一个。我认为 up_or_down 将通过 +1 表示赞成票和 -1 表示反对票。不要把事情复杂化。

```
def update_vote(up_or_down)
  self.value = self.value == up_or_down ? 0 : up_or_down
end 
```

如果您以这种方式考虑逻辑，这很简单：如果用户单击相同的东西，则重置为零。否则将其设置为单击的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:23:27.990

玩弄状态机（这比我想象的要容易）：

```
require 'statemachine' #it's a gem

vote_state = Statemachine.build do
 #trans old_state, event, new_state
  trans :zero, :upvote, :up
  trans :zero, :downvote, :down
  trans :down, :upvote, :up
  trans :down, :downvote, :zero
  trans :up, :upvote, :zero
  trans :up, :downvote, :down
end

vote_state.upvote
p vote_state.state #=> :up
vote_state.upvote
p vote_state.state #=> :zero
vote_state.upvote
p vote_state.state #=> :up
vote_state.downvote
p vote_state.state #=> :down 
```

# c++ - 在 C++ 中使用不同的分配器复制对象

> ID：10540020
> 
> 赞同：17
> 
> 时间：2012-05-10T18:23:27.517
> 
> 标签：c++, c++11

所以我有一个很好的持久分配器类`persistent_alloc<T>`，它允许我在持久内存中分配 C++ 容器对象和字符串，该内存由一个 mmaped 文件支持，该文件可以从我的程序的一次运行持续到下一次。

当我想做任何混合持久性和非持久性对象的事情时，我的问题就来了。例如，我有

```
typedef std::basic_string<char, std::char_traits<char>, persistent_alloc<char>> pstring;

pstring a, b, c;
std::string x, y, z; 
```

我希望能够执行以下操作：

```
if (a == x)
    a = y;
c = z + b; 
```

等等，但默认情况下它不起作用，因为`pstring`它们`std::string`是不相关的类型。现在就比较而言，我可以定义：

```
template<typename Alloc1, typename Alloc2> inline bool
operator==(const std::basic_string<char, std::char_traits<char>, Alloc1> &a,
           const std::basic_string<char, std::char_traits<char>, Alloc2> &b)
{
    return strcmp(a.c_str(), b.c_str()) == 0;
} 
```

...现在我可以比较字符串是否相等。但是为每个操作添加这些似乎很痛苦——似乎它们应该由标准库提供。更糟糕的是，赋值运算符和复制构造函数必须是成员，不能像这样定义为全局内联函数。

有没有合理的方法来做到这一点？还是我必须有效地重写整个标准库以有效地支持分配器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T20:38:34.567

有一种方法可以解决这个问题，但你需要跳出框框思考一下。您需要的是一种中间类型，它可以从`std::string`您的分配器字符串和您的分配器字符串中隐式构造。

目前[在 C++ 委员会面前有这样的提议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3334.html)。它基于[已存在的 Google 构建的 Apache 许可实现](http://cxx1y-array-string-ref.googlecode.com/git-history/115bdc29789cea33f0fa6e706213ca5f03819fa3/include/string_ref.h)。它被称为`basic_string_ref`; 它是一个模板类，基本上是一个指向字符串中第一个字符的指针和一个大小，表示字符串的长度。它不是一个真正的容器，因为它不管理内存。

这正是您所需要的。

`basic_string_ref`对于特定的字符类型和特征类型可以从不`std::basic_string` *考虑*分配器的情况下隐式构造。

所有的比较运算符都可以用 来定义`basic_string_ref`。由于它可以隐式构造`std::basic_string`（并且几乎可以自由构造），因此它可以透明地用于不同分配的字符串之间的比较。

做任务相当棘手，但可行。它需要一系列转换：

```
a = pstring{basic_string_ref{y}}; 
```

当然，不是最漂亮的代码。我们宁愿简单地将复制构造函数和赋值运算符更改为与`std::basic_string`分配器无关。但由于这是不可行的，这确实是次佳的事情。您甚至可以将其包装在模板函数中：

```
template<typename DestAllocator, typename SourceAllocator, typename charT, typename traits>
std::basic_string<charT, traits, DestAllocator> conv_str(const std::basic_string<charT, traits, SourceAllocator> &input)
{
  return std::basic_string<charT, traits, DestAllocator>{basic_string_ref<charT, traits>{y}};
} 
```

当然，如果你能做到这一点，你可以这样做：

```
template<typename DestAllocator, typename SourceAllocator, typename charT, typename traits>
std::basic_string<charT, traits, DestAllocator> conv_str(const std::basic_string<charT, traits, SourceAllocator> &input)
{
  return std::basic_string<charT, traits, DestAllocator>{y.begin(), y.end()};
} 
```

如果这只是其中的一部分，那就太好了`std::basic_string`，这样您就不需要解决方法了。但事实并非如此。

# python - 如何在 python 中构建一个 facebook signed_request 字符串？

> ID：10540021
> 
> 赞同：0
> 
> 时间：2012-05-10T18:23:28.297
> 
> 标签：python, facebook, facebook-graph-api

有很多关于 signed_request-s 是如何构建的文档，但找不到（并想出）一个创建签名请求的简单方法

有人有解决方案吗？

基本文档在[这里](https://developers.facebook.com/docs/authentication/signed_request/)：

我需要它进行单元测试。更准确地说，我正在使用[facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)，并且刚刚编写了一个不错的中间件，用于将 facebook 身份验证与tastepie 一起使用。为了测试这一点，我需要模拟 facebook 的身份验证过程，最后缺少的步骤是在身份验证发生时在浏览器中创建 cookie 集。

结果将是开源的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:13:13.407

如下：

```
from hashlib import md5
def fb_signature(request, app_secret):
    fb_request = dict([(k,request[k]) for k in request if k.startswith('fb_sig')])
    payload = ''.join(['%s=%s' % (k[len('fb_sig_'):], fb_request[k]) \
                          for k in sorted(fb_request.keys()) if k != 'fb_sig' ])
    return md5(payload + app_secret).hexdigest() 
```

这里*request* --- 您计算签名的请求，app_secret --- 您的 FB 应用程序密码。

# java - RabbitMQ 多线程通道和队列绑定

> ID：10540029
> 
> 赞同：2
> 
> 时间：2012-05-10T18:24:04.630
> 
> 标签：java, multithreading, rabbitmq, amqp

我继承了一些让我非常头疼的遗留 RabbitMQ 代码。任何人都可以提供帮助，最好是指向一些*“官方”文档*，我可以在其中浏览类似的问题？

我们创建一些通道接收来自工作人员的响应，这些工作人员使用如下通道执行搜索：

```
channelIn.queueDeclare("", false, false, true, null);
channelIn.queueBind("", AmqpClient.NAME_EXCHANGE,
     AmqpClient.ROUTING_KEY_ROOT_INCOMING + uniqueId); 
```

我浏览邮件列表和论坛的理解是

*   使用空名称声明队列允许服务器自动生成唯一名称，并且
*   队列必须具有全局唯一名称。

这是真的？

此外，在上面的第二行中，我基于对博客和邮件列表的一些自由解释的理解是，队列名称为空的 queuebind 会自动绑定到最后创建的队列。这看起来不错，因为这样您就不必从笨重的 DeclareOK 对象中提取自动生成的名称。

这是真的？如果是这样，这将在多线程环境中工作吗？

即是否有可能某个通道将自己绑定到另一个通道的队列，然后如果另一个通道关闭，错误绑定的通道会在尝试使用队列时出错？（请注意，队列是使用 autodelete=true 创建的。）我的测试让我认为是的，但我不确定这就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:30:31.743

我不能确定这将在多线程环境中工作。大部分时间可能没问题，但您可能会得到错误的队列。为什么要冒险？这不是更好更安全吗？

```
String queueName = channelIn.queueDeclare("", false, false, true, null).getQueue();
channelIn.queueBind(queueName, AmqpClient.NAME_EXCHANGE,
 AmqpClient.ROUTING_KEY_ROOT_INCOMING + uniqueId); 
```

并不完全笨重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-28T18:04:53.270

**问：当一个队列被声明为没有名字时会发生什么？**

**A：服务器为队列选择一个唯一的名称。**如果没有提供名称，RabbitMQ 服务器将生成一个唯一的 RabbitMQ 集群名称，使用该名称创建一个队列，然后将该名称传输回调用`queue.declare`. RabbitMQ 在内部以线程安全的方式执行此操作（例如，许多`queue.declare`使用空白名称调用的客户端将永远不会获得相同的名称）。[这](https://www.rabbitmq.com/amqp-0-9-1-reference.html#domain.queue-name)是有关此行为的文档。

**问：队列名称是否需要全局唯一？**

**答：不，但它们可能需要在您的用例中。**任意数量的发布者和订阅者可以共享一个队列。队列声明是幂等的，因此如果 2 个客户端同时或在不同时间声明一个具有相同名称和设置的队列，则服务器状态将与只有一个客户端声明它时相同。但是，具有空白名称的队列永远不会发生冲突。考虑用一个空白名称声明一个队列，就好像它是两个操作一样：一个 RPC 要求 RabbitMQ “给我一个全局唯一的名称，您将保留它仅供我使用”，然后幂等地声明一个具有该名称的队列。

**问：`queue.bind`在多线程环境中，空白名称会绑定到最后创建的队列吗？**

**A：是的，但你不应该那样做；它一无所获，令人困惑，并且具有未指定/未指定的行为。**这种技术在很大程度上是没有意义的并且容易在客户端代码中出现错误（如果在声明和添加之间添加了行怎么办？那么很难确定正在绑定哪个队列）。

`queueDeclare`相反，使用;的返回值 该返回值将包含已声明的队列的名称。**如果您声明了一个没有名称的队列，则 的返回值`queueDeclare`将包含 RabbitMQ 提供的新的全局唯一名称。**您可以将其显式提供给使用该队列的后续调用（例如绑定它）。

另一个不这样做的原因是，有关空白队列名称行为的[文档](https://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.bind.queue)非常模棱两可：

> 客户端必须要么指定一个队列名称，要么之前已经在同一通道上声明了一个队列

这意味着什么？如果声明了多个队列，将绑定哪个队列？如果之前声明的队列在同一个频道上被删除了怎么办？这似乎是尽可能明确而不依赖这种行为的一个很好的理由。

**问：队列是否可以删除连接到它们的“下方”通道？**

**A：是的，在特定情况下。**对您的问题术语的细微说明：通道不会将自己“绑定”到队列：但是，通道可以使用队列。将通道想象成网络端口，将队列想象成远程对等点：您不会将端口绑定到远程对等点，但您可以通过同一个端口与多个对等点通信。消费者相当于连接的套接字；不是渠道。反正：

通道在这里无关紧要，但消费者和连接很重要（每个通道可以有多个消费者，甚至是同一个队列；每个连接可以有多个通道）。以下是可以在订阅它的频道“下方”删除队列的情况（我可能错过了一些，但这些都是非灾难性的——例如我所知道的“服务器爆炸”的情况）：

1.  声明了一个队列并`exclusive`设置为 true，并且声明该队列的*连接*关闭。用于声明队列的通道可以关闭，但只要连接保持打开状态，队列就会保持存在。连接到独占队列的客户端将看到它消失。但是，如果独占队列被“锁定”到其声明者，客户端可能无法首先访问用于消费的独占队列——[文档](https://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.exclusive)不清楚“使用”在独占锁定方面的含义。
2.  通过`queue.delete`调用手动删除的队列。在这种情况下，所有连接到队列的消费者在下次尝试使用它时可能会遇到错误。

**请注意**，在许多客户端情况下，消费者通常足够“被动”，以至于他们不会意识到队列已经消失；他们只会永远听什么实际上是一个封闭的套接字。发布到队列，或尝试用`passive`(existence poll) 重新声明它可以保证显示不存在；单独消费是不行的：有时你会看到一个“这个队列被删除了！” 错误，有时需要几分钟或几小时才能到达，有时如果您所做的只是消耗，您将永远不会看到这样的错误。

**问：`auto_delete`当另一个消费者退出时，队列会在一个消费者“下方”被删除吗？**

**A:不会。队列会在** *最后一个*消费者离开队列`auto_delete`后的某个时间被删除。因此，如果您在 auto_delete 队列上启动两个消费者，您可以退出其中一个而不会打扰另一个。[这是](https://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.auto-delete)有关该行为的文档。

 *此外，过期的队列（通过[每个队列的 TTL](https://www.rabbitmq.com/ttl.html)）遵循相同的行为：队列只会在最后一个消费者离开后的某个时间消失。*

# spring - Spring：如何使用非 setter 方法注入属性？

> ID：10540030
> 
> 赞同：3
> 
> 时间：2012-05-10T18:24:11.637
> 
> 标签：spring, dependency-injection, jetty

是否可以通过签名不以开头的方法注入属性bean `set`？

具体来说，我正在尝试使用 Spring 配置嵌入式 Jetty 实例，并且我需要能够通过`addServlet()`方法注入 servlet bean。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:39:35.407

我正在查看[Jetty/Tutorial/Embedding Jetty 文档](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)。我猜你的意思是打电话`ServletContextHandler.addServlet()`。你有几个选择：

# `@Configuration`（自 3.0 起）

我最喜欢的方法。您可以使用 Java 配置所有内容！

```
@Configuration
public class Jetty {
    @Bean(initMethod = "start")
    public Server server() {
        Server server = new Server(8080);
        server.setHandler(context());
        return server;
    }

    @Bean
    public ServletContextHandler context() {
        ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
        context.setContextPath("/");
        context.addServlet(servlet(), "/*");
        return context;
    }

    @Bean
    public ServletHolder servletHolder() {
        return new ServletHolder(helloServlet());
    }

    @Bean
    public HelloServlet helloServlet() {
        return new HelloServlet();
    }
} 
```

# 继承/装饰

您可以继承或包装原始`ServletContextHandler`类以遵循 Java bean 命名约定。当然它需要一个额外的类，但是使 Jetty 类对 Spring 友好。您甚至可以发布这样的包装器，或者也许有人已经这样做了？

# [`MethodInvokingFactoryBean`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/config/MethodInvokingFactoryBean.html)

我不喜欢这种方法，因为它似乎太低级了。基本上，您创建一个使用任意参数调用任意方法的 bean：

```
<bean id="javaVersion" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
 <property name="targetObject" ref="servletContextHandler"/>
 <property name="targetMethod" value="addServlet"/>
 <property name="arguments">
   <list>
     <ref bean="yourServlet"/>
   </list>
 </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:18:58.120

只是适用于 Jetty 7 的 spring 文件。可以添加你的 contextHandlers ......

```
<bean id="contexts"
    class="org.eclipse.jetty.server.handler.ContextHandlerCollection" />

<context:property-placeholder location="src/main/resources/ws.properties" />

<!-- Manually start server after setting parent context. (init-method="start") -->
<bean id="jettyServer" class="org.eclipse.jetty.server.Server"
    destroy-method="stop">
    <property name="threadPool">
        <bean id="ThreadPool" class="org.eclipse.jetty.util.thread.QueuedThreadPool">
            <property name="minThreads" value="10" />
            <property name="maxThreads" value="50" />
        </bean>
    </property>
    <property name="connectors">
        <list>
            <bean id="Connector" class="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <property name="port" value="8181" />
            </bean>
        </list>
    </property>
    <property name="handler">
        <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
            <property name="handlers">
                <list>
                    <ref bean="contexts" />
                    <bean id="defaultHandler" class="org.eclipse.jetty.server.handler.DefaultHandler" />
                    <bean class="org.eclipse.jetty.servlet.ServletContextHandler"
                        p:contextPath="/${ws.context.path}">
                        <property name="sessionHandler">
                            <bean class="org.eclipse.jetty.server.session.SessionHandler" />
                        </property>
                        <property name="servletHandler">
                            <bean class="org.eclipse.jetty.servlet.ServletHandler">
                                <property name="servlets">
                                    <list>
                                        <bean class="org.eclipse.jetty.servlet.ServletHolder"
                                            p:name="spring-ws">
                                            <property name="servlet">
                                                <bean
                                                    class="org.springframework.ws.transport.http.MessageDispatcherServlet" />
                                            </property>
                                            <property name="initParameters">
                                                <map>
                                                    <entry key="contextConfigLocation" value="classpath:/spring-ws-context.xml" />
                                                </map>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                                <property name="servletMappings">
                                    <list>
                                        <bean class="org.eclipse.jetty.servlet.ServletMapping"
                                            p:servletName="spring-ws" p:pathSpec="/*" />
                                    </list>
                                </property>
                            </bean>
                        </property>
                    </bean>
                    <bean class="org.eclipse.jetty.server.handler.RequestLogHandler" /> 
                </list>
            </property>
        </bean>
    </property>
</bean> 
```

# database - 尔辰业务规则

> ID：10540031
> 
> 赞同：1
> 
> 时间：2012-05-10T18:24:12.760
> 
> 标签：database, entity

有了这个[ER 图](http://www.freeimagehosting.net/newuploads/1brvb.png)，可以假设哪三个业务规则？

我知道这很简单，但我已经搜索了这个问题的答案，但我还没有找到任何可以明确说明我正在寻找的内容的内容，即如何准确地发音每个规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:28:08.903

1.  每个学生可以学习多个模块。
2.  每个模块可能有多个学生学习它。
3.  每个模块可能有一个或多个必备模块，学生在学习该模块之前必须先学习这些模块。

# objective-c - NSArray 在访问应用程序时崩溃

> ID：10540034
> 
> 赞同：0
> 
> 时间：2012-05-10T18:24:21.933
> 
> 标签：objective-c, crash, nsarray

我在使用 CFPreferencesCopyAppValue() 方法从/向返回的 NSArray 访问/设置对象时遇到问题。在这种情况下，我的应用程序崩溃了，而当我自己分配/初始化它时，一切正常。

```
 CFArrayRef cfArray;
    if ((cfArray = (CFArrayRef)CFPreferencesCopyAppValue(CFSTR("buttonsOrder"), appID))) {
        NSArray *castedArray = [(NSArray *)cfArray retain];
        NSLog(@"castedArray : %@", castedArray);
        buttonsOrder = [castedArray mutableCopy];
        NSLog(@"buttonsOrder : %@", buttonsOrder);
        CFRelease(cfArray);
        [castedArray release];
        castedArray = nil;
    }
    else {
        buttonsOrder = [[NSMutableArray alloc] init];
        for (NSMutableDictionary *info in togglesInfo) {
            [buttonsOrder addObject:[info objectForKey:@"buttonIdentifier"]];
        }
    } 
```

PS：NSLog() 向我展示了 CFArray 被很好地返回并被强制转换为 NSArray 然后 NSMutableArray 也很好。

任何想法 ？

编辑 ：

这是我修改数组的方式：

```
- (void) tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
NSUInteger fromIndex = [fromIndexPath row];
NSUInteger toIndex = [toIndexPath row];
if (fromIndex == toIndex)
    return;
NSString *movedButtonId = [[[buttonsOrder objectAtIndex:fromIndex] retain] autorelease];
[buttonsOrder removeObjectAtIndex:fromIndex];
[buttonsOrder insertObject:movedButtonId atIndex:toIndex]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:38:13.423

如果在尝试*将对象添加*到可变数组时崩溃，这通常意味着您正在尝试添加 nil 对象。我看到您向可变数组添加任何内容的唯一地方（在上面的代码片段中）是在您没有`cfArray`从 CFPreferences 获得有效的“”的情况下。你应该确保 " `[info objectForKey:@"buttonIdentifier"]`" 没有返回 nil。

检查以确保您没有抛出异常。或者，如果不是这样，请说出您的崩溃到底是什么（它会在 Xcode 的控制台日志中说明）。

# cuda - 推力减少不适用于不相等的输入/输出类型

> ID：10540038
> 
> 赞同：1
> 
> 时间：2012-05-10T18:24:50.043
> 
> 标签：cuda, thrust

我正在尝试使用 Thrust 减少一组值的最小值和最大值，但我似乎被卡住了。给定一组浮点数，我想要一次减少它们的最小值和最大值，但是使用推力的 reduce 方法，我得到了所有模板编译错误的母亲（或至少是阿姨）。

我的原始代码包含 5 个值列表，分布在 2 个我想要减少的 float4 数组中，但我已将其归结为这个简短的示例。

```
struct ReduceMinMax {
    __host__ __device__
    float2 operator()(float lhs, float rhs) {
        return make_float2(Min(lhs, rhs), Max(lhs, rhs));
    }
};

int main(int argc, char *argv[]){

    thrust::device_vector<float> hat(4);
    hat[0] = 3;
    hat[1] = 5;
    hat[2] = 6;
    hat[3] = 1;

    ReduceMinMax binary_op_of_dooooom;
    thrust::reduce(hat.begin(), hat.end(), 4.0f, binary_op_of_dooooom);
} 
```

如果我将它分成 2 个缩减而不是它当然有效。那么我的问题是：是否有可能通过推力同时减少最小值和最大值，以及如何减少？如果不是，那么实现上述减少的最有效方法是什么？转换迭代器会帮助我吗（如果是这样，那么减少会是一次减少吗？）

一些附加信息：我正在使用 Thrust 1.5（由 CUDA 4.2.7 提供） 我的实际代码使用的是 reduce_by_key，而不仅仅是 reduce。我在写这个问题时发现了 transform_reduce ，但是这个问题没有考虑到密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:42:14.613

正如 talonmies 所指出的，您的归约不会编译，因为`thrust::reduce`期望二元运算符的参数类型与其结果类型匹配，但是`ReduceMinMax`的参数类型是`float`，而它的结果类型是`float2`。

`thrust::minmax_element`直接实现此操作，但如有必要，您可以改为使用 来实现归约`thrust::inner_product`，这概括了`thrust::reduce`：

```
#include <thrust/inner_product.h>
#include <thrust/device_vector.h>
#include <thrust/extrema.h>
#include <cassert>

struct minmax_float
{
  __host__ __device__
  float2 operator()(float lhs, float rhs)
  {
    return make_float2(thrust::min(lhs, rhs), thrust::max(lhs, rhs));
  }
};

struct minmax_float2
{
  __host__ __device__
  float2 operator()(float2 lhs, float2 rhs)
  {
    return make_float2(thrust::min(lhs.x, rhs.x), thrust::max(lhs.y, rhs.y));
  }
};

float2 minmax1(const thrust::device_vector<float> &x)
{
  return thrust::inner_product(x.begin(), x.end(), x.begin(), make_float2(4.0, 4.0f), minmax_float2(), minmax_float());
}

float2 minmax2(const thrust::device_vector<float> &x)
{
  using namespace thrust;
  pair<device_vector<float>::const_iterator, device_vector<float>::const_iterator> ptr_to_result;

  ptr_to_result = minmax_element(x.begin(), x.end());

  return make_float2(*ptr_to_result.first, *ptr_to_result.second);
}

int main()
{
  thrust::device_vector<float> hat(4);
  hat[0] = 3;
  hat[1] = 5;
  hat[2] = 6;
  hat[3] = 1;

  float2 result1 = minmax1(hat);
  float2 result2 = minmax2(hat);

  assert(result1.x == result2.x);
  assert(result1.y == result2.y);
} 
```

# javascript - 带有 jQ uery 的 qTip 动态按钮（当前使用选择器）

> ID：10540049
> 
> 赞同：1
> 
> 时间：2012-05-10T18:25:22.010
> 
> 标签：javascript, jquery, selector, qtip

整个页面中的随机元素都有一个名为`qtip`. 我想找到每一个，并在 qTip`content`部分中显示`qtip`属性的内容。

```
$("*[qtip]").qtip({
    content: $(this).attr("qtip"),
    show: 'mouseover',
    hide: 'mouseout'
}); 
```

如果我不放`$(this).attr("qtip")`并且只放静态文本（例如“测试”），它就可以工作。然而，`$(this)`它搞砸了。我有另一种方法吗？`qtip`如果有另一种方法可以找到具有该属性的所有元素，我不会附加到选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:38:30.663

您可以使用 .each() 函数，因此“this”指的是每个元素。

```
$("*[qtip]").each(function() {
    $(this).qtip({
        content: $(this).attr("qtip"),
        show: 'mouseover',
        hide: 'mouseout'
    });
}); 
```

# django - django 中的 _unicode() 方法有问题

> ID：10540054
> 
> 赞同：3
> 
> 时间：2012-05-10T18:25:28.920
> 
> 标签：django

我在我的模型中添加了一个**unicode** () 方法，但是在交互中显示所有对象时它不起作用。

```
import datetime
from django.db import models
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def _unicode_(self):
        return self.question
    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
    def _unicode_(self):
        return self.choice
# Create your models here.

(InteractiveConsole

>>> from polls.models import Poll, Choice
>>> Poll.objects.all()
[<Poll: Poll object>] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:28:27.030

它们需要命名`__unicode__`（两边各有两个下划线）。这是 Python 保留方法的一个尴尬细节，通过查看它们并不会立即显而易见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:35:28.433

django 文档向您展示了如何在模型中指定 unicode 方法：
[https ://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#other-model-instance-methods](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#other-model-instance-methods)

```
class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)

    def __unicode__(self):
        return u'%s %s' % (self.first_name, self.last_name) 
```

**注意：**这些是双下划线，在您的示例中，您只使用单下划线。

它是一个标准的 python 特殊类方法，[如此处所列](http://docs.python.org/reference/datamodel.html#object.__unicode__)

# autocomplete - 带有自动完成功能的 Google 路线

> ID：10540055
> 
> 赞同：1
> 
> 时间：2012-05-10T18:25:32.387
> 
> 标签：autocomplete, directions

我正在尝试用谷歌自动完成填充 2 个输入，然后获取谷歌地图方向 asd 路线。

我设法使用自动完成，但是当我单击提交按钮时没有任何反应。

我正在使用这段代码：

```
function initialize() {
    map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(39.57182223734374, -7.811279296875), 15);
    gdir = new GDirections(map, document.getElementById("directions"));

    var input = document.getElementById('tb_fromPoint');
    var autocomplete = new google.maps.places.Autocomplete(input);

    var input2 = document.getElementById('tb_endPoint');
    var autocomplete2 = new google.maps.places.Autocomplete(input2);

    setDirections();

}

function setDirections() {
    var fromAddress = document.getElementById('tb_fromPoint');
    var toAddress = document.getElementById('tb_endPoint');
  gdir.load("from: " + fromAddress + " to: " + toAddress,  { "locale": "pt_PT" }); 
```

}

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

从 :
到:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T07:16:54.607

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Directions service</title>
     <script src="http://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&amp;libraries=places" type="text/javascript"></script>

    <script>
      var directionsDisplay;
      var directionsService = new google.maps.DirectionsService();
      var map;

     function initialize() {
       directionsDisplay = new google.maps.DirectionsRenderer();
       var chicago = new google.maps.LatLng(13.0524139, 80.25082459999999);
       var mapOptions = {
       zoom:7,
      center: chicago
      }
      map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
     directionsDisplay.setMap(map);
     }

      function calcRoute() {
      var start = document.getElementById('city1').value;
      var end = document.getElementById('city2').value;

      var request = {
       origin:start,
       destination:end,
       travelMode: google.maps.TravelMode.DRIVING
     };
       directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
       directionsDisplay.setDirections(response);
     }
     });
    }

       google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
      <div id="map-canvas" style="width: 650px; height: 350px;"></div>

<script type="text/javascript">
        function initialize1() {
        var options = {
             types: ['(cities)'],
           componentRestrictions: {country: "in"}
         };    

        var input1 = document.getElementById('searchTextField1');
        var autocomplete = new google.maps.places.Autocomplete(input1,options);
          google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place1 = autocomplete.getPlace();
            document.getElementById('city1').value = place1.name;
            document.getElementById('cityLat1').value = place1.geometry.location.lat();
            document.getElementById('cityLng1').value = place1.geometry.location.lng();
            document.getElementById('cityy').value = place1.city_name;
            initialize();
            calcRoute()
         });
    }

       google.maps.event.addDomListener(window, 'load', initialize1); 

      function initialize2() {
      var options = {
      //types: ['(cities)'],
      componentRestrictions: {country: "in"}
      };

        var input2 = document.getElementById('searchTextField2');
        var autocomplete = new google.maps.places.Autocomplete(input2, options);
        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place2 = autocomplete.getPlace();
            document.getElementById('city2').value = place2.name;
            document.getElementById('cityLat2').value = place2.geometry.location.lat();
            document.getElementById('cityLng2').value = place2.geometry.location.lng();
            initialize();
            calcRoute()

        });
      }
     google.maps.event.addDomListener(window, 'load', initialize2);

</script>  

<input id="searchTextField1" type="text" size="50" placeholder="Enter a location" autocomplete="on" runat="server" />  <br />
<input type="text" id="city1" name="city1" />  <br />
<input type="text" id="cityLat1" name="cityLat1" />  <br />
<input type="text" id="cityLng1" name="cityLng1" />   <br />

<input id="searchTextField2" type="text" size="50" placeholder="Enter a location" autocomplete="on" runat="server" />  <br />
<input type="text" id="city2" name="city2" />  <br />
<input type="text" id="cityLat2" name="cityLat2" />  <br />
<input type="text" id="cityLng2" name="cityLng2" />   <br />

  </body>
</html> 
```

# jakarta-ee - Eclipselink many to many relationship, no result in join-table

> ID：10540057
> 
> 赞同：1
> 
> 时间：2012-05-10T18:25:37.983
> 
> 标签：jakarta-ee, jpa, many-to-many, eclipselink

I java ee project with two entity classes: Employee and Shift, and there's a many to many reletaionship between them. It looks like this:

```
 @Entity
    public class Employee implements Serializable {
    @ManyToMany(mappedBy="employees")
    private List shifts;
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String surname;
    private String firstname; 

```

...

```
 @Entity

    public class Shift implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Temporal(javax.persistence.TemporalType.TIMESTAMP)
    private Date timeStart;
    @Temporal(javax.persistence.TemporalType.TIMESTAMP)
    private Date timeEnd;
    private int workers;
    private int overseers;
    @ManyToMany
    private List employees; 
```

I have a JSF page where i would like to add employees (one by one) to the selected shift so in my backing bean theres this method:

```
 public void addToShift(Employee e){
            selectedShift.addEmployee(e);
            e.addShift(selectedShift);      
    } 
```

After the method is called, i see nothing in the join table. I tried a few things, like looking up the entities again using entitymanager.find, but nothing really helped, i can't see anything in the join table and i can't see why. There were no problem managing employees and shift, it's "just" the connection... Do you have any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:34:04.113

Simply setting values to detached entities is not enough. You still have to call [EntityManager.merge](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge%28T%29) inside transaction. Then after when transaction is committed (or entitymanager is flushed) you will see results in database as well.

When persistence context is still open (which it is not in your case), flush alone is enough and merging is not needed.

# wcf - 面向初学者的 Windows Communication Foundation (WCF)

> ID：10540059
> 
> 赞同：2
> 
> 时间：2012-05-10T18:25:40.187
> 
> 标签：wcf

当我在 Windows 下构建客户端-服务器应用程序时，我需要为我的项目学习 WCF。最好的起点是什么。我用谷歌搜索了教程和书籍，但找不到适合初学者的东西。我更喜欢一本书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:30:53.800

至于资源：有[MSDN WCF 开发人员中心](http://msdn.microsoft.com/wcf)，其中包含从初学者教程到文章和示例代码的所有内容。

此外，请查看[MSDN 上的屏幕投射库，](http://msdn.microsoft.com/en-us/netframework/wcf-screencasts.aspx)了解一些非常有用的 10-15 分钟信息块，这些信息几乎涉及您可能感兴趣的任何与 WCF 相关的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:50:29.963

如果您喜欢一本好书，请查看Juval Lowy 的[Programming WCF Services, 3rd Edition](http://shop.oreilly.com/product/9780596805494.do)。

[此](https://stackoverflow.com/questions/386801/wcf-book-recommendations)问题中列出了其他 WCF 书籍推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:38:46.777

查看[PluralSight 视频](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=wcf-fundamentals&highlight=aaron-skonnard_introducing-wcf*9#introducing-wcf)可能是您开始的简单方法。[一些视频](http://msdn.microsoft.com/en-us/netframework/dd939784)在 MSDN 上是免费的。

自己找书。例如[，这](https://rads.stackoverflow.com/amzn/click/com/0735645566)对于初学者来说可能很容易理解。

查看[WCF 示例](http://msdn.microsoft.com/en-us/netframework/dd728058)。一些示例可以帮助您学习。

# javascript - Google Maps v3 - 多个标记 - 不同颜色

> ID：10540061
> 
> 赞同：2
> 
> 时间：2012-05-10T18:25:49.467
> 
> 标签：javascript, coldfusion, google-maps-api-3

我正在使用coldfusion来填充谷歌地图 - 我想要不同颜色的标记

使用谷歌地图 API v3

此代码有效，但它们都是 1 标记颜色 - 始终显示绿色 - 我无法显示不同的颜色。

想法？感谢任何输入

```
 <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 

 <script type="text/javascript"> 

 var locations = 
[ 
<cfloop query=due>
<cfoutput>
<cfquery name="info" datasource="data">
SELECT * FROM data
WHERE id = #due.id#
</cfquery>
<cfif info.gpslat is not "">["#info.id#", #info.gpslat#, #info.gpslong#,      #info.id#],</cfif>
</cfoutput>
</cfloop> 
]; 

 var map = new google.maps.Map(document.getElementById('map'), { 
  zoom: 14, 
  center: new google.maps.LatLng(51.19, -114.48),
  mapTypeId: google.maps.MapTypeId.HYBRID
 }); 

var infowindow = new google.maps.InfoWindow(); 

 <cfloop query=due>
<cfquery name="info" datasource="data">
SELECT * FROM data
WHERE id = #due.id#
</cfquery>

       var marker, i;

<cfif info.gpslat is not "">    
   <cfif due.data is 'yes'>
   var image = 'red.png'; 
   </cfif>
   <cfif due.data is 'no'>
   var image = 'green.png'; 
   </cfif>
</cfif>
</cfloop> 

 for (i = 0; i < locations.length; i++) {   
  marker = new google.maps.Marker({ 
    position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
    map: map,
    icon: image
  }); 

  google.maps.event.addListener(marker, 'click', (function(marker, i) { 
    return function() { 
      infowindow.setContent(locations[i][0]); 
      infowindow.open(map, marker); 
    } 
  })(marker, i)); 
 } 

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:11:37.917

我会说你需要一个数组或其他东西。这个循环：

```
<cfloop query=due>
<cfquery name="info" datasource="data">
SELECT * FROM data
WHERE id = #due.id#
</cfquery>

       var marker, i;

<cfif info.gpslat is not "">    
   <cfif due.data is 'yes'>
   var image = 'red.png'; 
   </cfif>
   <cfif due.data is 'no'>
   var image = 'green.png'; 
   </cfif>
</cfif>
</cfloop> 
```

我认为这意味着要么/要么并在地图上产生不止一种标记 - 实际上为“图像”产生一个变量..它会这样做：

```
var image = 'red.png';
var image = 'red.png';
var image = 'green.png'; 
```

但是每个 set 语句都将覆盖脚本中的下一个。

而是创建一个您调用的 JS 函数，它可以返回红色或绿色。在你做的地方：

```
icon: image; 
```

你现在会做：

```
icon: getimage(var1, var2); 
```

其中 var1 和 var2 等于 info.gsplat 和 due.data。无论是那个还是整个事情都需要进入循环，所以你要按顺序写出每个标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T20:55:41.703

您正在混合 javascript 和 ColdFusion 代码，因此拍摄的标记图像是循环中最后一个可用的图像。可能有用的东西是

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 

<script type="text/javascript"> 

    var locations = 
    [ 
    <cfloop query=due>
    <cfoutput>
    <cfquery name="info" datasource="data">
    SELECT * FROM data
    WHERE id = #due.id#
    </cfquery>
    <cfif info.gpslat is not "">['#info.id#', #info.gpslat#, #info.gpslong#,#info.id#,<cfif due.data is "yes>'red.png'<cfelse>'green.png'</cfif>],</cfif>
    </cfoutput>
    </cfloop> 
    ]; 

    var map = new google.maps.Map(document.getElementById('map'), { 
        zoom: 14, 
        center: new google.maps.LatLng(51.19, -114.48),
        mapTypeId: google.maps.MapTypeId.HYBRID
    }); 

    var infowindow = new google.maps.InfoWindow(); 

    for (i = 0; i < locations.length; i++) {   
        marker = new google.maps.Marker({ 
        position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
        map: map,
        icon: locations[i][4]
    }); 

    google.maps.event.addListener(marker, 'click', (function(marker, i) { 
            return function() { 
                infowindow.setContent(locations[i][0]); 
                infowindow.open(map, marker); 
            } 
        })(marker, i)); 
    } 
</script> 
```

代码也没有优化......但那是另一回事:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:34:29.900

您可以使用[CSS Sprite 技术](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)来使用各种标记：

```
var mImage = new google.maps.MarkerImage("/i/Images/IconsLarge.png", 
    new google.maps.Size(34, 35), 
    new google.maps.Point(0, vPos), <--- set the vertical position to match your sprite offset.
    new google.maps.Point(10, 34)
); 
//insert marker
marker = new google.maps.Marker({
    icon: mImage,
    position: new google.maps.LatLng(latitude, longitude),
    map: map
}); 
```

# c# - 如何遍历所有 XElement 属性并获取它们的值

> ID：10540063
> 
> 赞同：6
> 
> 时间：2012-05-10T18:25:56.517
> 
> 标签：c#, xml, xpath

如何遍历所有 XElement 属性并获取它们的值？

```
foreach (SyndicationElementExtension extension in f.ElementExtensions)
{
    XElement element = extension.GetObject<XElement>();

    // How to loop through all its attributes and get their values?
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T18:29:23.507

简单 - 使用[`Attributes()`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.attributes.aspx)方法：

```
foreach (var attribute in element.Attributes())
{
    string value = attribute.Value;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:42:06.993

假设你想要[这个问题的答案](https://stackoverflow.com/questions/10539428/how-to-get-all-possible-image-urls-from-rss-feed-item)

```
var img2 = feeds.Items
     .SelectMany(i => i.ElementExtensions
                       .Select(e => e.GetObject<XElement>().Attribute("url").Value)
                )
     .ToArray(); 
```

# php - 在大型 PHP 堆栈中通过引用访问类

> ID：10540067
> 
> 赞同：1
> 
> 时间：2012-05-10T18:26:04.600
> 
> 标签：php, object, reference, stack

所以我有一个看起来大致像这样的 PHP 堆栈

```
Class Stack {

    public $name;
    public $parent;
    public $children = array();

    public function __construct($name, $parent = false) {
        $this->name = $name;
        $this->parent = $parent;
    }

    public function newChild($name) {
        $this->children[] = new Stack($name, $this);
    }

    public function &top() {
        if(is_object($this->parent))
            return $this->parent->top();
        return $this;
    }

} 
```

所以在这个堆栈的第 5 级附近的某个地方，我想使用 top() 方法访问第 0 级，因为我需要对其进行修改。所以我做了，但我所做的修改不适用于最终的构建序列，因为它是通过引用传递的。我尝试了几个不同的想法，但我仍然无法让它正确通过。有任何想法吗？

编辑：我实际上想通了。我上面写的实际上完美地工作了我正在使用的堆栈有点大，并且在父wasent设置的某个地方，所以它并没有一路上升。看看这实际上是什么项目。看看[http://github.com/EvolutionSDK/lhtml](http://github.com/EvolutionSDK/lhtml)（逻辑 HTML ......允许从基于 HTML 的页面对 PHP 的有限访问。基本上 MVC 架构框架中的 C 和 V。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:06:35.707

基本上在我的大型 PHP 堆栈中，我有一个未设置的“父”变量。这使 top() 函数无法访问堆栈的顶部。所以它只上升了一部分。

当我弄清楚这一点并将孩子重新连接到其父母时，它工作得很好。因为类总是通过引用传递。

很抱歉我花了多长时间才发布这个。

# javascript - 可移动的 jquery 框不应移出页面

> ID：10540069
> 
> 赞同：1
> 
> 时间：2012-05-10T18:26:04.537
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-draggable

我正在创建一个需要进行一些设计调整的 Web 应用程序。这是示例功能代码：http: [//jsfiddle.net/rkumarnirmal/FSDPH/](http://jsfiddle.net/rkumarnirmal/FSDPH/)

那里显示的黑色可移动框不应该移出页面（甚至一点也不），但是如果您选中那里，您可以移动该框并将其稍微移出页面。我该如何控制它？

还有一件事，我将在那个框中实现 jPicker 工具[http://www.digitalmagicpro.com/jPicker/ 。](http://www.digitalmagicpro.com/jPicker/)如果我们点击颜色框，jPicker 工具会弹出，然后如果框被移动，jPicker 工具必须根据页面自行排列。

我知道问这样的问题是不公平的，但我没有机会:(有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:33:01.350

您可以使用[`containment`](http://jqueryui.com/demos/draggable/#option-containment)on 属性`draggable`将可拖动元素保留在其父元素之一内。

例如：

```
$("#box_bg").draggable({scroll: false, cancel: "div#box", containment: 'document'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:38:22.953

现在不可能完成整个代码。我给你逻辑。你可以轻松做到。

您必须跟踪叠加层的拖动事件。然后在事件处理程序中，您必须检查覆盖的左侧和顶部位置。如果它超出了您的限制，则将 left/top 设置为 0（或某个偏移量）。

另一方面，如果它超出了最右边（或底部），则必须相应地设置窗口的宽度（或高度）减去覆盖层的宽度（或高度）。

拾色器也是如此。但是，当显示颜色选择器时，您必须执行重新定位，而不是拖动事件。

# iphone - 触摸位置的值超出了视图的范围

> ID：10540070
> 
> 赞同：1
> 
> 时间：2012-05-10T18:26:06.877
> 
> 标签：iphone, ios, ipad, touch

我正在尝试记录触摸的位置。下面是我的代码。据我了解，在最远的左上角触摸会给我一个 (0,0) 的位置，而最远的右下角将是 (768, 1024) 假设我正拿着 iPad 纵向. 但是，我得到的值是左上角的 (-6, -18) 和右下角的 (761,1003)。看起来坐标以某种方式移动。一丝 self.bounds 确实给了我 {{0,0}, {768, 1024}}。谁可以给我解释一下这个？我想得到在界限 {{0,0}, {768, 1024}} 之间的 x 和 y 值。非常感谢您提前。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     CGRect bounds = [self bounds]; 
     NSLog(@"frame: %@", NSStringFromCGRect(bounds)); // this value was traced as frame: {{0, 0}, {768, 1024}}

     UITouch* touch = [[event touchesForView:self] anyObject]; 
     location = [touch locationInView:self];
     NSLog(@"Location: %@", NSStringFromCGPoint(location));

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
     CGRect bounds = [self bounds]; 

     UITouch* touch = [[event touchesForView:self] anyObject]; 
     location = [touch locationInView:self];
     NSLog(@"Location: %@", NSStringFromCGPoint(location));

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

     CGRect bounds = [self bounds]; 

     UITouch* touch = [[event touchesForView:self] anyObject]; 
     location = [touch locationInView:self];
     NSLog(@"Location: %@", NSStringFromCGPoint(location));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:50:27.337

Since I cannot comment yet, I have to post an answer. Have you tried setting the background color of the view to a different color so that you can see if its in the top left corner for sure?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:59:29.983

Here's what I have for the view:

```
@implementation TouchesView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setUserInteractionEnabled:YES];
        [self setBackgroundColor:[UIColor colorWithRed:1.0f green:0.6f blue:0.6f alpha:1.0f]];
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint touch = [[touches anyObject] locationInView:self];
    NSLog(@"(%.1f, %.1f)", touch.x, touch.y);
    NSLog(@"%@", NSStringFromCGPoint(touch));
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event{}

@end 
```

And this is the initialization and adding it to a view controller:

```
TouchesView *touchView = [[TouchesView alloc] initWithFrame:self.view.bounds];
[self.view addSubview:touchView]; 
```

This works fine for me.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:15:37.837

The -20 offset on the y values is fixed by setting "Status bar is initially hidden" to YES. The rest of the problem looks like it's a hardware issue because I got a different range for x and y values each time I run the program on the iPad. I didn't get this problem while running the program on the simulator. On the simulator, x values range from 1 to 767 and y values range from 1 to 1023, which are pretty correct.

# android - 将所有者信息写入 Android 平板电脑

> ID：10540071
> 
> 赞同：0
> 
> 时间：2012-05-10T18:26:07.143
> 
> 标签：android, owner

我们最终将为我们的商店提供 100 多台 Android 平板电脑。在“所有者信息”屏幕上，我需要一些文本，例如“属性...如果找到，请将其返回到“地址”。我不想手动在每个平板电脑中输入这个（因为我们将来可能会更改这个地址）。那么有没有办法编写一个应用程序，将“所有者信息”从一个普通的文本文件或那些行上的东西写入平板电脑？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:08:19.087

两个想法：

取决于设备的新/最新程度，如果您要编写一些东西，您可以查看[ContactsContract.Profile](http://developer.android.com/reference/android/provider/ContactsContract.Profile.html) 这是一个相对较新的 API（版本 14），因此它仅在 ICS 中。在旧设备上，您可以从“联系人”中获取此类信息，但没有简单的方法可以知道要使用哪个联系人。我最近尝试从帐户中找到有用信息或“所有者”联系人的路径，但最终得到的启发式方法在 80% 的时间都有效，例如“选择第一个类型为 'com.google' 的帐户使用查找联系人其电子邮件地址与该帐户的登录信息相匹配”。可能大部分时间都可以工作，但我不想把我的生命押在上面。

如果您不想编写应用程序，[Contact Owner](https://play.google.com/store/apps/details?id=com.appengine.paranoid_android.lost&feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5hcHBlbmdpbmUucGFyYW5vaWRfYW5kcm9pZC5sb3N0Il0.)是我偶然发现的一个应用程序，它查找了以前的答案，它的作用非常相似。它似乎从用户选择的联系人中提取信息。

# mysql - MySQL 表联合问题

> ID：10540072
> 
> 赞同：0
> 
> 时间：2012-05-10T18:26:14.037
> 
> 标签：mysql, sql, sql-server, union

我正在尝试在 MySQL 中合并两个表，我正在使用的查询是：

```
SELECT qa_invoicesitems.item_code, qa_invoicesitems.item_unitprice,    qa_invoicesitems.item_subtotal, qa_invoicesitems.item_discount, 
qa_invoicesitems.item_total 
FROM qa_invoicesitems   
RIGHT JOIN qa_invoicesitems_returnlog USING (item_code) 
WHERE invoice_code = 17
UNION
SELECT qa_invoicesitems_returnlog.item_code, qa_invoicesitems_returnlog.item_unitprice, qa_invoicesitems_returnlog.item_subtotal, 
qa_invoicesitems_returnlog.item_discount, qa_invoicesitems_returnlog.item_total 
FROM qa_invoicesitems_returnlog 
LEFT JOIN qa_invoicesitems USING (item_code) 
WHERE returnlog_code = 9 
```

但我无法看到预期的结果。

一个图形示例.. ![在此处输入图像描述](../Images/522ce4e0081c68cd05bd189e81cc0e9f.png)

任何人都知道我怎样才能得到这个结果？
**注意：** qa_invoicesitems_returnlog 替换数据。

代码：1234、1585、23取自(qa_invoicesitems_returnlog)，因为两个表都存在，其余的就简单展示一下。 ![在此处输入图像描述](../Images/3f37ba280e4b72d72d9c58aca02781d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:50:35.540

根据您的评论和您的形象，我会说您想要：

*   表 2 中的所有行`qa_invoicesitems_returnlog = 9`
*   表 1 中的所有行，除了表 2 的输出中已经存在的`invoice_code = 17`那些行。`item_id`

所以，把它写成一个工会，给你：

```
SELECT qa_invoicesitems_returnlog.item_code as item_code, 
       qa_invoicesitems_returnlog.item_unitprice as item_unitprice,
       qa_invoicesitems_returnlog.item_subtotal as item_subtotal,         
       qa_invoicesitems_returnlog.item_discount as item_discount, 
       qa_invoicesitems_returnlog.item_total as item_total 
FROM qa_invoicesitems_returnlog
WHERE qa_invoicesitems_returnlog.returnlog_code = 9
UNION
SELECT qa_invoicesitems.item_code as item_code, 
       qa_invoicesitems.item_unitprice as item_unitprice,
       qa_invoicesitems.item_subtotal as item_subtotal,         
       qa_invoicesitems.item_discount as item_discount, 
       qa_invoicesitems.item_total as item_total 
 FROM qa_invoicesitems   
 WHERE qa_invoicesitems.invoice_code = 17
   AND NOT EXISTS (SELECT * FROM qa_invoicesitems_returnlog qir2
                   WHERE qir2.returnlog_code = 9 
                      and qir2.item_code = qa_invoicesitems.item_code) 
```

关键是`NOT EXISTS`从表 1() 的结果中排除`qa_invoiceitems`已存在于表 2 的输出中并具有匹配项的子句`item_code`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:34:32.097

你为什么使用UNION？我认为以下内容等同于您的查询：

```
SELECT qa_invoicesitems.item_code, qa_invoicesitems.item_unitprice,
       qa_invoicesitems.item_subtotal, qa_invoicesitems.item_discount,
       qa_invoicesitems.item_total
FROM qa_invoicesitems RIGHT JOIN
     qa_invoicesitems_returnlog
     USING (item_code)
WHERE invoice_code = 15 or returnlogcode = 8 
```

LEFT 和 RIGHT 连接做同样的事情，因为表是相反的。

# c# - Wpf在拖放时突出显示ListViewItem

> ID：10540074
> 
> 赞同：4
> 
> 时间：2012-05-10T18:26:31.307
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，每当有东西落在上面时，我都需要突出显示 ListViewItem。我覆盖 ListViewItem 的 OnDragEnter、OnDragOver、OnDragLeave 等以应用我的样式（比如更改背景）。它工作正常。但是在列表视图项目上放置了一些东西后，当我单击列表视图项目时，选择和鼠标悬停效果无法正常工作。我该如何解决这个问题？

```
public class CustomListViewItem : ListViewItem
{
    protected override void OnDragOver(System.Windows.DragEventArgs e)
    {
        this.Background = Brushes.Green;
        base.OnDragOver(e);
    }

    protected override void OnDragEnter(System.Windows.DragEventArgs e)
    {
        this.Background = Brushes.Green;
        base.OnDragEnter(e);
    }

    protected override void OnDragLeave(System.Windows.DragEventArgs e)
    {
        if (!this.IsSelected)
        {
            this.Background = Brushes.Transparent;
            this.BorderBrush = Brushes.Transparent;
        }
        base.OnDragLeave(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:48:05.493

执行 DragDrop 后，您的本地值按样式优先于选择和鼠标悬停效果（请参阅[Dependency Property Setting Precedence List](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing) ）。

尝试[DependencyObject.ClearValue 方法](http://msdn.microsoft.com/en-us/library/ms597465.aspx)：

```
protected override void OnDragLeave(System.Windows.DragEventArgs e)
{
    if (!this.IsSelected)
    {
        this.ClearValue(BackgroundProperty);
        this.ClearValue(BorderBrushProperty);
    }
    base.OnDragLeave(e);
} 
```

# active-directory - 从 Active Directory 重命名或删除自定义属性？

> ID：10540081
> 
> 赞同：1
> 
> 时间：2012-05-10T18:27:07.010
> 
> 标签：active-directory

我公司的 AD 管理员向 Active Directory 架构添加了一个自定义属性。分配给此属性的名称完全是错误的，我希望更正它。有什么方法可以更改自定义属性的名称，或将其从架构中删除？

锦上添花的是，他直接把它扔进了生产环境。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:55:27.527

据我所知，无法重命名 Active-Directory 架构中的属性。

为了处理您的问题，我将：

首先在 Shema 中创建新的（拼写良好的）属性（确保复制了模式）。

搜索所有具有旧（完全错误）属性的对象，然后将值复制到新属性并从旧属性中删除值。

然后您会在此处找到允许将属性设置为无效的 LDIF 脚本。它完成的奇怪方式（在模式定义中重命名所有存在名称的属性）允许您重新创建具有相同名称的属性（例如，如果您想更改属性的语法）。它应该可以工作到 W2K3R2（不要在 W2K8R2 上测试）。

```
dn: CN=slxMesPotes,CN=Schema,CN=Configuration,DC=XXXX
changetype: modrdn  
newrdn: cn=slxMesPotesOld
deleteOldRdn: 1

dn: CN=slxMesPotesOld,CN=Schema,CN=Configuration,DC=XXXX
changetype: modify  
replace: adminDisplayName
adminDisplayName: slxMesPotesOld
-

dn: CN=slxMesPotesOld,CN=Schema,CN=Configuration,DC=XXXX
changetype: modify  
replace: lDAPDisplayName
lDAPDisplayName: slxMesPotesOld
-

dn: CN=slxMesPotesOld,CN=Schema,CN=Configuration,DC=XXXX
changetype: modify  
replace: isDefunct
isDefunct: TRUE
- 
```

# tfs - AD 组名称存储在 TFS 2008 中的什么位置？

> ID：10540082
> 
> 赞同：0
> 
> 时间：2012-05-10T18:27:07.030
> 
> 标签：tfs, tfs-warehouse

Team Foundation Server 管理工具有一个名为“用户”的列，其中包含被授予 TFS 权限的域组。通过 TFSWarehouse 表搜索，我看到了 Person 表，其中包含个人用户，但找不到 AD 组名称的存储位置。它在 TFS 表中吗？我正在寻找已被允许访问 TFS 的域组列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:00:27.800

查看 TfsIntegration 数据库中的 tbl_security_identity_cache 表。那里应该有一个域或 account_name 列，其中将包含此数据。

# php - TrialPay 在回调中发送格式错误的 JSON

> ID：10540083
> 
> 赞同：1
> 
> 时间：2012-05-10T18:27:16.230
> 
> 标签：php, facebook, json

我正在尝试在 Facebook 应用程序上实施 TrialPay/Offerwall/Dealspot。在他们的[文档](http://help.trialpay.com/credits/?p=545)中，他们举例说明了他们发送给您的 JSON 的样子：

```
{"order_id":9006316682257,"buyer":409697,"app":107032282669135,"receiver":409697,
"amount":1,"time_placed":1322622026,"update_time":1322622027,"data":"",
"items":[{"item_id":"0","title":"3 Fred Currency","description":"Make it rain!",
"image_url":"http:\/\/external.ak.fbcdn.net\/safe_image.php?d=AQDldsPcWsejAJdC&url=http\u00253A\u00252F\u00252Fwww.etftrends.com\u00252Fwp-content\u00252Fuploads\u00252F2011\u00252F10\u00252Fcurrency-trading.jpg",
"product_url":"","price":1,"data":"{\"modified\":{\"product\":\"URL_TO_APP_CURR_WEBPAGE\",
\"product_title\":\"Fred Currency\",\"product_amount\":3,\"credits_amount\":1}}"}],"status":"placed"} 
```

他们说如果你 json_decode 它作为一个数组你应该得到这个：

```
Array (
  [order_id] => 9006316682257
  [buyer] => 409697
  [app] => 107032282669135
  [receiver] => 409697
  [amount] => 1
  [time_placed] => 1322622026
  [update_time] => 1322622027
  [data] =>
  [items] => Array (
               [0] => Array (
                        [item_id] => 0
                        [title] => 3 Fred Currency
                        [description] => Make it rain!
                        [image_url] => http://external.ak.fbcdn.net/safe_image.php?d=AQDldsPcWsejAJdC&url=http%3A%2F%2Fwww.etftrends.com%2Fwp-content%2Fuploads%2F2011%2F10%2Fcurrency-trading.jpg
                        [product_url] =>
                        [price] => 1
                        [data] => {"modified":{"product":"URL_TO_APP_CURR_WEBPAGE","product_title":"Fred Currency","product_amount":3,"credits_amount":1}}
                      )
             )
  [status] => placed
) 
```

但事实并非如此，数据实际上如下所示：

```
[data] => "{"modified":{"product":"URL_TO_APP_CURR_WEBPAGE","product_title":"Fred Currency","product_amount":3,"credits_amount":1}}" 
```

字符串中的 JSON 导致它是无效的 JSON。有没有一种简单的方法可以删除这些引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:38:50.193

首先，您似乎需要在 Trialpay 的网站上完成应用程序的配置，因此`URL_TO_APP_CURR_WEBPAGE`. 这里的问题可能是您尚未将应用配置完成到*生成*有效 JSON 所需的程度。

但是，如果这不是答案，如果您仍然收到无效的 JSON（我同意，那是无效的），我建议您联系您的 Trialpay 代表。他们通常反应灵敏，我们在游戏开发过程中确实发现了他们产品的一些问题。

祝你好运 - 如果/当您找到更多信息时，请在此处回复。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:33:55.703

您是否尝试`json_decode($json_string, true);`过将其转换为关联数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:56:53.593

[TrialPay](http://www.trialpay.com)的开发人员在这里。我们的文档站点中可能有错字，我会发送一个便条来仔细检查。

与此同时，我已经验证了 Facebook 在完成基于报价的应用内货币订单时传递给服务器端回调的实际 JSON 应该是有效的，并且可以正确解码为上述所需的结果。

如果您遇到此线程范围之外的任何其他问题，请随时直接 ping 我。

编辑：

在复制您的代码并针对[JSONLint](http://www.jsonlint.com)进行验证后，我立即遇到了您提到的问题。但是，在删除之前的坏换行符之后`\"product_title\"`，我能够正确验证。下面包含的示例 PHP 代码段：

```
<?php

$order_details = '{"order_id":9006316682257,"buyer":409697,"app":107032282669135,"receiver":409697,"amount":1,"time_placed":1322622026,"update_time":1322622027,"data":"","items":[{"item_id":"0","title":"3 Fred Currency","description":"Make it rain!","image_url":"http:\/\/external.ak.fbcdn.net\/safe_image.php?d=AQDldsPcWsejAJdC&url=http\u00253A\u00252F\u00252Fwww.etftrends.com\u00252Fwp-content\u00252Fuploads\u00252F2011\u00252F10\u00252Fcurrency-trading.jpg","product_url":"","price":1,"data":"{\"modified\":{\"product\":\"URL_TO_APP_CURR_WEBPAGE\",\"product_title\":\"Fred Currency\",\"product_amount\":3,\"credits_amount\":1}}"}],"status":"placed"}';
$order_details_decoded = json_decode($order_details, true);
$order_details_decoded['items'][0]['data'] = json_decode($order_details_decoded['items'][0]['data'], true);
print_r($order_details_decoded); 
```

正如我之前提到的，如果在此线程范围之外还有其他问题，请随时直接 ping 我。

# php - Drupal 7\. 使用 PHP 将图像添加到节点

> ID：10540085
> 
> 赞同：0
> 
> 时间：2012-05-10T18:27:23.447
> 
> 标签：php, image, drupal, drupal-7

有没有办法以编程方式从特定文件路径添加一组图像？我想从我的 drupal 站点的一个文件夹中添加所有图像并向它们添加fancybox 样式，可以这样做吗？我试过在 drupal.org 上查找，但没有成功。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:12:06.767

当然可以，只需启用 php 过滤器模块，并将执行此操作的 php 代码放在节点的主体中。确保将正文的格式设置为 PHP 而不是纯文本或 html。

因此，如果图像在您的主题文件夹中，您可以使用以下方法抓取并显示它：

```
<img src="<?php print path_to_theme() . "/files/image.jpg"; ?>" title='some image'/> 
```

[您可以使用 php 的scandir](http://php.net/manual/en/function.scandir.php)函数获取目录中的所有文件。此函数将返回文件目录中所有文件的数组，之后您可以遍历此数组并将所有图像文件输出到屏幕，如：

```
$files = scandir("path/to/files/dir");
/*Unset the first 2 items in the array since they contain . and .. respectively */
unset($files[0]);
unset($files[1]);
foreach($files as $file)
{
    /* 
      Here we get the file extension 
      If the value of $file = "photo.jpeg"; this returns "jpeg"
    */
    $f_ext =  end(explode(‘.’, $file));   
    /*Checking if file is an image*/
    if($f_ext == 'jpg' || $f_ext == 'png' || $f_ext == 'gif'|| $f_ext == 'jpeg')
    {
         print "<img src='<?php print "path/to/files/$file"; ?>' title='some image'/>";
    }
} 
```

# html - Twitter Bootstrap 和格式化 CSS 中的标头类

> ID：10540089
> 
> 赞同：1
> 
> 时间：2012-05-10T18:27:46.097
> 
> 标签：html, css

我正在尝试从 CodeAcademy 复制构建您自己的简历项目，但在设置标题样式时遇到了一些问题。出于某种原因，它只会将我想要的背景颜色放在我的 h1 和 h2 标签周围，而不是放在我的 dl 标签周围。此外，我包含的 twitter 引导链接在我的页面上也不起作用。对于这两个问题的任何帮助将不胜感激！

这是我的 HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <title>
       Parker Preyer's Resume
    </title>
    <link rel="stylesheet"href="style.css" />
    <link rel="stylesheet"    href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
  </head>
  <body>
    <div class="header">
            <h1>
                          Parker J. Preyer
                        </h1>
            <h2>
                          "I'm learning how to design websites!"
                       </h2>

            <dl>
            <dt>
                          Email
                        </dt>
            <dd>
                          Parker.preyer1@gmail.com
                       </dd>

            <dt>
                          Phone
                        </dt>
                <dd>
                          919-740-4206
                        </dd>

            <dt>
                          Address
                        </dt>
            <dd>
                          1042 Clay Street, San Francisco, CA
                        </dd>
          </dl>
    </div>

  </body> 
</html>

Here is my CSS: 

body, .details {
    background: #ccc;
}

.header {
    background: #222;
    color: white;
}

dl dd {
    color:white;
}

.header h1 {
    font-size: 42px;
}

.header h2 {
      font-family: "Georgia", Serif;      
      font-weight: normal;
      font-style: italic;
      color: #666;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:39:37.557

首先，我将从你如何调用你的 css 文件开始，它应该是这样的

```
<link rel="stylesheet"  href="style.css" />
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" /> 
```

并不是

```
<link rel="stylesheet"href="style.css" />
<link rel="stylesheet"    href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" /> 
```

然后我会通过执行以下操作将背景颜色添加到您的 dl

```
dl {
    background: red; /* or whatever colour you need */
    } 
```

# jsf - j_security_check 没有重定向到欢迎页面 - 成功的登录事件监听器？

> ID：10540091
> 
> 赞同：1
> 
> 时间：2012-05-10T18:27:50.930
> 
> 标签：jsf, authentication, glassfish, mojarra, j-security-check

多年来，我一直很困惑为什么在登录后*有时*我没有定向到应用程序欢迎页面。我终于想通了（比其他人晚了几年）：

*   我通过 j_security_check 成功登录并进入欢迎页面

*   等待会话超时

*   单击发送 GET 请求的 h:link

*   因为它是 GET 而不是 POST 我的自定义 ViewExpiredException
    处理程序不会启动

*   由于会话超时，容器安全性重定向到登录页面。由于会话超时+容器安全性，应用程序在阶段侦听器或过滤器中看不到获取请求（来自 h:link）。

*   我再次成功登录

*   j_security_check 将我重定向到触发
    身份验证的页面，在这种情况下是 GET 请求的目标。

最后一点我不明白，我认为它总是会进入欢迎页面。

我的问题是我目前的设计要求登录后我总是显示欢迎页面。欢迎页面有一个 preRenderView 事件，它在登录后在会话范围的 bean 中设置一些上下文信息并增加一些计数器等......

支持其他页面的 bean 代码需要此上下文信息，目前如果我不先浏览欢迎页面，则会出现异常。

在修复它方面，我查看了以下选项：

1.  理想情况下，会有一个可以调用的@PostLogin 方法，它可以彻底解决我的所有问题。我将 JSF (Mojarra) 与 Myfaces CODI 一起使用，但我没有看到任何我想要的东西。

2.  我可以向我的过滤器添加更多代码，但我需要保留一些数据（即登录计数），这看起来不是一个不错的选择。也许我错了。

3.  我让 j_security_check 的潜在目标（使用 GET 调用的页面）的所有 preRenderView 方法处理直接从 j_seecurity_check 调用它们的情况。我可以看到这是我必须做的，但这似乎很麻烦。

4.  为 glassfish 编写一个服务器身份验证模块以覆盖 j_security_check 行为。

这通常是如何处理的？经过多年滥用 POST 后，我开始使用 GET 处理简单的导航案例，并且自定义异常处理程序不起作用。如果有人对此问题有任何指导，我将不胜感激，至少我知道现在发生了什么。希望我错过了一些明显的东西！

感谢操作系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:41:35.747

> *理想情况下，会有一个可以调用的@PostLogin 方法，它可以彻底解决我的所有问题。我将 JSF (Mojarra) 与 Myfaces CODI 一起使用，但我没有看到任何我想要的东西。*

确实没有这样的事情。

* * *

> *我可以向我的过滤器添加更多代码，但我需要保留一些数据（即登录计数），这看起来不是一个不错的选择。也许我错了。*

这确实是“最简单”的方式。基本上：

```
UserPrincipal user = request.getUserPrincipal();
HttpSession session = request.getSession();

if (user != null && session.getAttribute("user") == null) {
    session.setAttribute("user", user);

    // First-time login. You can do your intercepting thing here.
    response.sendRedirect(request.getContextPath() + "/welcome.xhtml");
} 
```

* * *

> *我让 j_security_check 的潜在目标（使用 GET 调用的页面）的所有 preRenderView 方法处理直接从 j_seecurity_check 调用它们的情况。我可以看到这是我必须做的，但这似乎很麻烦。*

那不是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

* * *

> *为 glassfish 编写一个服务器身份验证模块以覆盖 j_security_check 行为。*

无法回答，因为我从来没有这样做过。

# c - 测试缓冲区溢出

> ID：10540094
> 
> 赞同：2
> 
> 时间：2012-05-10T18:28:04.193
> 
> 标签：c, security, buffer-overflow

我得到了一个 C 代码文件，其中给定正确的输入会发生缓冲区溢出，然后授予 root 访问权限。这是一个使用 ZShell 的 Fedora 错误。为了测试这一点（安全主题），我们禁用了 Linux 内核中启用的随机内存地址分配。

我被要求测试不同的输入，直到发生分段错误，其中输入是缓冲区大小。我不明白的是，我为什么要使用不同的值进行测试？我不确定代码是否会有所帮助，但我只是不明白改变输入的意义。

```
/* vulnerable.c */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
unsigned char buf[] =
"\x31\xc0" /* xorl %eax,%eax */
"\x50" /* pushl %eax */
"\x68""//sh" /* pushl $0x68732f2f */
"\x68""/bin" /* pushl $0x6e69622f */
"\x89\xe3" /* movl %esp,%ebx */
"\x50" /* pushl %eax */
"\x53" /* pushl %ebx */
"\x89\xe1" /* movl %esp,%ecx */
"\x99" /* cdql */
"\xb0\x0b" /* movb $0x0b,%al */
"\xcd\x80" /* int $0x80 */
;
/* -------------------------------------------------- */
void vuln(char * buf)
{
    char a[16] = { 0 };
    strcpy(a, buf);
}
int main(int argc, char * argv[])
{
    int *ret;
    if (argc != 2)
    {
        printf("Usage: %s <input>\n", argv[0]);
        exit(1);
    }
    vuln(argv[1]);
    printf("%p\n", buf);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:10:04.823

> 我不明白的是，我为什么要使用不同的值进行测试？我不确定代码是否会有所帮助，但我只是不明白改变输入的意义。

缓冲区溢出只会在给定特定输入时发生，因此您应该尝试不同的输入以查看导致问题发生的原因。

提示：当用户输入长于程序预期时会发生缓冲区溢出，因此您应该尝试使用不同长度的输入，直到程序开始崩溃或出现意外情况。

# android - 实现 Pinch 以放大画廊内的 ImageView

> ID：10540097
> 
> 赞同：1
> 
> 时间：2012-05-10T18:28:10.150
> 
> 标签：android, android-layout, android-gallery

我在我的应用程序中的 ImageView 上实现捏缩放。我有一个持有画廊视图的 Activity，我在画廊中显示我的 ImageView。独立地 pich-zoom 正在工作，当图像在时我也能够处理画廊投掷正常大小但我的问题是：当图像处于某个缩放级别时如何投掷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:44:17.423

您可以按照此链接向 ImageView 添加平移、缩放和边界检测。

[如何获得图像的缩放功能？](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images/7458910#7458910)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:39:32.217

一般图库包括两个功能

*   缩放当前显示给用户的图像
*   并滑动到下一张/上一张图片

问题是当我们在图库中缩放图像时，它应该禁用滑动视图。它应该只在缩放图像拖动到达结束时滑动。

这篇[文章讲述了如何完美地缩放图像](http://androidtrainningcenter.blogspot.in/2013/04/update-pinch-to-zoom-example-and.html)。现在您必须使用一个 ViewPager 并集成两者

# qt - QMenu QThread 实现错误

> ID：10540099
> 
> 赞同：0
> 
> 时间：2012-05-10T18:28:17.983
> 
> 标签：qt

我正在尝试将我的 QSystemTrayIcon 模块移动到单独的线程。运行应用程序时出现以下错误。Initialize() 方法 addAction 导致错误。

**QWidget：必须在 QPaintDevice 之前构造一个 QApplication**

我的示例代码片段：

声明了全局变量 QMenu myMenu；

头文件QAction* openFile中的成员变量；

在构造函数中 openFile = new QAction(parent);

```
Initialize() 
{
myMenu.addAction(openFile);
}

 void myApp::run()
 {
     Initialize()
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:39:16.510

您**不能**在主线程之外使用任何与 GUI 相关的类，即在其中`QApplication`创建的类。因此，您不能`QSystemTrayIcon`在单独的线程中移动您的东西。不，没有解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:13:52.607

您正在倒退解决这个问题。“如果在后台运行某些功能，则不显示 TrayIcon 菜单的原因菜单将在进程完成后显示。” 是因为您在等待时阻塞了 GUI 线程。不要通过等待来阻塞 GUI 线程。大多数 Qt 提供了在事情完成时触发的信号（当它们成功或失败时）。这些是您应该使用的非阻塞 API。

# php - 即使我进行了检查，in_array 仍会获取公司 ID

> ID：10540107
> 
> 赞同：0
> 
> 时间：2012-05-10T18:28:45.003
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我对下面的数组有以下代码

```
$arrCompany = array();
foreach($users as $k => $user){

    if(!in_array($user['User']['company_id'], $arrCompany)){
        $arrCompany['company'][] = $user['User']['company_id'];
        }else{}
        } 
```

我想要做的只是有一个公司ID，所以我可以在它下面添加用户，但由于某些原因它不起作用

这是我的数组

```
Array
(
    [0] => Array
        (
            [User] => Array
                (
                    [id] => 1
                    [company_id] => 20
                    [type] => 
                )

        )

    [1] => Array
        (
            [User] => Array
                (
                    [id] => 6
                    [company_id] => 21
                    [type] => 
                )

        )

    [2] => Array
        (
            [User] => Array
                (
                    [id] => 7
                    [company_id] => 22
                    [type] => 
                )

        )

    [3] => Array
        (
            [User] => Array
                (
                    [id] => 14
                    [company_id] => 21
                    [type] => 
                )

        )

    [4] => Array
        (
            [User] => Array
                (
                    [id] => 15
                    [company_id] => 22
                    [type] => 
                )

        )

    [5] => Array
        (
            [User] => Array
                (
                    [id] => 16
                    [company_id] => 21
                    [type] => 
                )

                )

        )

) 
```

当我做 var_dump ......我明白了

```
Array
(
    [company] => Array
        (
            [0] => 20
            [1] => 21
            [2] => 22
            [3] => 21
            [4] => 22
            [5] => 21
        )

) 
```

你可以看到公司已经重复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:33:45.343

```
$arrCompany = array('company'=>array());

foreach($users as $k => $user){
    if(!in_array($user['User']['company_id'], $arrCompany['company'])){
        $arrCompany['company'][] = $user['User']['company_id'];
        }
   } 
```

# python - 在 Django 模型中存储 Field 的版本历史

> ID：10540111
> 
> 赞同：9
> 
> 时间：2012-05-10T18:29:00.540
> 
> 标签：python, django, model, version, history

我有一个带有文本字段的模型，需要进行版本控制。

```
class Book(models.Model):
    title = models.CharField(max_length=100)
    summary = models.TextField() 
```

预期的行为如下：

*   如果我创建一本带有摘要的新书，文本将正常保存
*   如果更新摘要，则需要将旧状态存储在带有版本号和时间戳的某个位置
*   应该可以很容易地查询当前的、范围的或特定的版本
*   **应该只对字段`summary`进行版本控制，而不是整个模型**

我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T18:58:15.847

我自己搞定了。

首先创建一个名为的新模型`SummaryHistory`：

```
class SummaryHistory(models.Model):
    version = models.IntegerField(editable=False)
    book = models.ForeignKey('Book')
    text = models.TextField()

    class Meta:
        unique_together = ('version', 'book',)

    def save(self, *args, **kwargs):
        # start with version 1 and increment it for each book
        current_version = SummaryHistory.objects.filter(book=self.book).order_by('-version')[:1]
        self.version = current_version[0].version + 1 if current_version else 1
        super(SummaryHistory, self).save(*args, **kwargs) 
```

现在扩展初始模型如下：

```
class Book(models.Model):
    title = models.CharField(max_length=100)
    summary = models.TextField()

    def summary_history(self):
        return SummaryHistory.objects.filter(book=self).order_by('-version')

    def save(self, *args, **kwargs):
        super(Book, self).save(*args, **kwargs)
        # save summary history
        summary_history = self.summary_history()
        if not summary_history or self.summary != summary_history[0].text:
            newSummary = SummaryHistory(book=self, text=self.summary)
            newSummary.save() 
```

现在，每次更新书籍时，都会为特定书籍创建一个新的递增版本的摘要，除非它没有更改。

# google-maps - 生成动态谷歌地图标记的库？

> ID：10540112
> 
> 赞同：4
> 
> 时间：2012-05-10T18:29:06.517
> 
> 标签：google-maps, google-maps-markers, google-visualization

谷歌[最近弃用](http://googledevelopers.blogspot.com/2012/04/changes-to-deprecation-policies-and-api.html)了它的 Image Charts API，我们正在寻找替代他们的[动态图标](https://developers.google.com/chart/image/docs/gallery/dynamic_icons)生成器，我们用它来生成谷歌地图标记。例如：

![在此处输入图像描述](../Images/8afeae4d701b883588bfa436ae9f4ed0.png)

由此 URL 生成：

[https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|Stack%20Overflow|C6EF8C|000000](https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|Stack%20Overflow|C6EF8C|000000)

我们可以在服务器中部署任何公共服务或库来替换此 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:57:20.737

[存在一个名为Google Maps Utility Library V3](http://code.google.com/p/google-maps-utility-library-v3/)的开源项目，其中包含用于在标记下创建信息框的单独[库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)

![在此处输入图像描述](../Images/54c16ec311828402d85e3c593b4190d5.png)

和[带有标签的标记](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel)

![在此处输入图像描述](../Images/9d1f5cf86b4e28bed15eb26ac83eccc8.png)

[或带标签的样式标记](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#StyledMarker)

![在此处输入图像描述](../Images/04ae727f8da0068045e30d3622cc34e6.png)

想知道这些在这种情况下是否有用？

# excel - 使用 Access VBA 格式化 Excel 中的日期以显示当前日期

> ID：10540119
> 
> 赞同：1
> 
> 时间：2012-05-10T18:29:32.460
> 
> 标签：excel, ms-access, vba

我正在尝试格式化 Access VBA 中的日期值以在 excel 文件中显示当前日期（我正在为此编写 Access VBA 代码）。但是，使用 Date() 并没有帮助（我猜它只在 Access 中有效）。例如，使用 Cells(2, 3) = Date() 只显示数字“41039”，而不是日期。我也尝试过格式化，但也没有用。我是 Access VBA 的新手，非常感谢上述问题的任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:01:00.930

在大多数情况下，日期应该以正确的格式显示，除非应用了以前的格式。

```
''Requires library reference 
Dim xl As Excel.Application

''Existing instance
Set xl = GetObject(, "Excel.application")

xl.Workbooks(1).ActiveSheet.Cells(2, 2) = Date
xl.Workbooks(1).ActiveSheet.Cells(2, 3) = 30
xl.Workbooks(1).ActiveSheet.Cells(2, 3).NumberFormat = "dd/mm/yyyy" 
```

# jvm - 使用属性占位符来决定路线和骆驼上下文

> ID：10540120
> 
> 赞同：1
> 
> 时间：2012-05-10T18:29:37.793
> 
> 标签：jvm, apache-camel, jvm-arguments

有什么方法可以根据属性值对骆驼上下文或路线进行分组？

我将我的环境定义为 -Denv="preprod" 并且我想根据它对路由和上下文进行分组/决定。例如：
对于开发环境：

```
<camel:route id="foo" >
        <camel:from uri="seda:start"/>
        <camel:to uri="mock:result"/>
    </camel:route> 
```

对于生产：

```
<camel:route id="foo" >
            <camel:from uri="seda:start"/>
            <camel:to uri="jmsqueue:result"/>
        </camel:route> 
```

我正在使用 Spring Application Context 来声明 Camel Contexts

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:32:51.877

您提到您使用 Spring，然后您可以使用 spring 属性占位符，并且每个环境具有不同的 .properties 文件。然后将端点定义为`<endpoint>`并在路由中引用这些端点。请参阅此常见问题解答：[http ://camel.apache.org/how-do-i-use-spring-property-placeholder-with-camel-xml.html](http://camel.apache.org/how-do-i-use-spring-property-placeholder-with-camel-xml.html)

然后配置 spring 属性占位符以使用您的 -D 系统环境为给定环境加载 .properties 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:40:51.673

与其使用 Spring 占位符来管理您的路线，不如考虑使用 Camel 的 Properties 组件 [1] 来管理您的配置。在配置路由时，我个人更喜欢依赖 Camel 的 API 而不是 Spring 的。

[1] [http://camel.apache.org/properties.html](http://camel.apache.org/properties.html)

# c++ - 在 Allegro 中创建光标？

> ID：10540121
> 
> 赞同：2
> 
> 时间：2012-05-10T18:29:38.403
> 
> 标签：c++, image, collision-detection, allegro, allegro5

我正在写一个基本的游戏。

我想要一个带有实际正确轮廓的光标图像，用于碰撞检测。这不适用于鼠标——我希望小光标在我的游戏中飞来飞去，我不希望它们的边界框是矩形。

但我是 Allegro 和图形编程的新手。我的第一个想法是使用 al_draw_polygon 来创建一个标准光标外观，但后来我意识到我完全不知道如何确定要喂它的顶点。有没有更好的方法来做到这一点？另外，在绘制多边形时计算顶点相对于彼此的坐标的标准方法是什么？你肯定不会在纸上画一个图表，然后每次都计算出来吗？

我想到的另一种方法是加载鼠标的图像，但它会是矩形的。我该如何正确地做到这一点？

注意：C++。这是一个给定的数字，但以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:04:07.920

您正在询问如何绘制光标以及如何进行碰撞检测。虽然相关，但这是两个独立的主题。

如果您刚刚开始，那么我建议为光标加载 32 位 RGBA PNG 文件。Alpha 通道将允许您绘制非矩形图像。您还可以旋转和/或缩放图像。

然后你必须担心碰撞检测。这真的与 Allegro 无关。您可以使用任何 2D 物理库，或者只是查找有关如何检查线是否与三角形碰撞的公式等。最简单的方法是从在对象的重要区域周围近似一个框开始。您以后总是可以构建更高级的碰撞检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T08:23:32.607

很难理解你的意思，但你可以；想要将鼠标添加到您的程序中，将其添加到循环中（通常在计时器上，这样即使没有输入也会刷新）并使用从光标获得的坐标然后绘制光标。

有 2 种碰撞检测方法 - 像素完美方法，检查透明度和命中框方法，您可以检查 x / y 是否试图移动到框之外，如果是，则将其移回，或扣除健康，无论你打算做什么。

Allegro 5 wiki 中介绍了这两种方法。我希望我能有所帮助。要创建一组在不同方向上飞行的游标，请使用 srand(); 之类的方法创建一个随机方向 int；然后添加一个速度，结果将是一个向量，接下来每个游标必须调用一个碰撞函数，以防止其退出例如，游戏窗口的侧面我会创建一个 windowheight 和 windowwidth 整数，然后检查对象的 x 或 y 是否超出范围。如果是，则“弹回”光标，或改变它的方向. 然后你需要做同样的事情，除了“玩家”，比较看看当前的 x/y 是否与另一个 x/y 不重叠，如果是，那么做一些事情。

# c# - 在表达式中使用 string.Compare(a, b)

> ID：10540124
> 
> 赞同：1
> 
> 时间：2012-05-10T18:29:46.250
> 
> 标签：c#, expression, expression-trees

从昨天开始，我一直在自学**表达式树**，但在比较两个字符串值时遇到了问题。我做了这个测试用例失败并出现错误：

`No method 'Compare' on type 'System.String' is compatible with the supplied arguments.`

在运行时失败`left = Expression.Call(`

```
Type type = typeof(string);
Expression left, right;
left = Expression.Constant("1", type);
right = Expression.Constant("2", type);
// fails at run-time on the next statement
left = Expression.Call(
    typeof(string),
    "Compare",
    new Type[] { type, type },
    new Expression[] { left, right });
right = Expression.Constant(0, typeof(int)); 
```

我将在`Expression.Equal, LessThan, LessThanOrEqual, GreaterThan or GreaterThanOrEqual`. 这就是使用比较方法的原因。

我确信它很简单，我已经将我的代码归结为这个简单的测试用例。有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T18:31:38.747

这是您的`Expression.Call`代码中的问题：

```
new Type[] { type, type }, 
```

这是试图调用`string.Compare<string, string>`- 它们是*通用参数*，而不是普通参数的类型。鉴于它是一种非泛型方法，因此只需在此处使用 null。

简短而完整的程序：

```
using System;
using System.Linq.Expressions;

class Test
{
    static void Main()
    {
        var left = Expression.Constant("1", typeof(string));
        var right = Expression.Constant("2", typeof(string));
        var compare = Expression.Call(typeof(string),
                                      "Compare",
                                      null,
                                      new[] { left, right });
        var compiled = Expression.Lambda<Func<int>>(compare).Compile();
        Console.WriteLine(compiled());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-22T18:15:46.367

我试图做与 lambda where 子句（**LINQ to SQL**）类似的事情，并且由于各种搜索让我登陆了这个页面，所以我将在这里分享这样的解决方案，以防它帮助其他登陆这里的人。

**当您使用 Compare 的通用表达式**简化您正在做的事情时，这是最简单的。

```
 public static Expression CompareLessThanOrEqualTo(Expression e1, Expression e2)
    {
        var compare = Expression.Call(typeof(string),
                           "Compare",
                           null,
                           new[] { e1, e2 });

        return Expression.LessThanOrEqual(compare, Expression.Constant(0));
    } 
```

然后你可以像使用其他任何表达式一样使用这个表达式

```
 public static Expression<Func<TypeOfParent, bool>> PropertyLessThanOrEqualString<TypeOfParent, String>(PropertyInfo property, String value)
    {
        var parent = Expression.Parameter(typeof(TypeOfParent));
        var expressionBody = CompareLessThanOrEqualTo(Expression.Property(parent, property), Expression.Constant(value));
        return Expression.Lambda<Func<TypeOfParent, bool>>(expressionBody, parent);
    } 
```

可以使用女巫，例如

```
public static IQueryable<T> ApplyFilters<T>(this IQueryable<T> query, List<GridFilters> gridFilters)
{
    // foreach filter
        // Get property (propertyInfo)
        // Get Value(s)
        // Apply Filter
        query = query.Where(PropertyLessThanOrEqualString<T, string>(propertyInfo, value1));

    // ...

    return query;
} 
```

如果您有一个需要应用的用户选择的过滤器列表，这将很有用，其中值和运算符都可以选择。（开始于、包含、介于范围之间）

# ruby-on-rails - Windows 上 Rails 的路由问题

> ID：10540128
> 
> 赞同：1
> 
> 时间：2012-05-10T18:30:06.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-services, wso2

我正在使用以下指南让 WSO2 在带有 Rails 的 Windows 上工作：

[http://wso2.org/project/wsf/ruby/1.1.0/docs/install_guide.html](http://wso2.org/project/wsf/ruby/1.1.0/docs/install_guide.html)

我已按照说明进行操作，现在正在尝试运行示例服务“安全性”。该文档指定：

```
1\. Copy security/security_controller.rb into the controllers directory of your rail application
2\. Copy keys and policies directories into the controllers directory of your rail application
3\. Try the services with your client using following endpoint addresses:
   http://your_rails_application_uri/security/callback
   http://your_rails_application_uri/security/timestamp
   http://your_rails_application_uri/security/timestamp_file
   http://your_rails_application_uri/security/usernametoken
   http://your_rails_application_uri/security/usernametoken_file
   http://your_rails_application_uri/security/signing
   http://your_rails_application_uri/security/signing_file
   http://your_rails_application_uri/security/encryption
   http://your_rails_application_uri/security/encryption_file
   http://your_rails_application_uri/security/complete 
```

但是，当我输入[http://localhost:3000/timestamp 时](http://localhost:3000/timestamp)，出现路由错误：

```
No route matches [GET] "/security/timestamp" 
```

我正在尝试验证 WSO2 框架是否已成功安装。我是 ruby​​ 和 Web 服务的新手，所以我可能忽略了一些琐碎的事情......任何帮助将不胜感激。

# c# - Thread.Sleep - 按时更新我？

> ID：10540129
> 
> 赞同：1
> 
> 时间：2012-05-10T18:30:12.380
> 
> 标签：c#, multithreading

是否有可能以某种方式返回 Thread.Sleep 上还剩多少秒？

我已经尝试过使用 while 循环和 Thread.Sleep() 的其他方法，但从未让它正常工作。

基本上我想用剩下多少时间来更新一个列表视图字段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:36:04.783

虽然我同意 vcsjones 所说的。满足您的要求的最佳方式

```
int millisecondsToSleep=2000;
while (milliseconds>0)
{
    Thread.Sleep(500);
    millisecondsToSleep=millisecondstoSleep-500;
    //alert yourself how much time you have left
    MessageBox.Show(millisecondsToSleep.ToString());
    //do something else if you wish
} 
```

所以这会睡半秒钟，然后向您发送剩余时间的警报

至于计时器

```
 Timer myTimer = new Timer();
            myTimer.Interval = 2000; //2 seconds
            myTimer.Tick += new EventHandler(myTimer_Tick);// fires the myTimer_Tick event every 2 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:36:44.530

`Thread.Sleep`将停止线程执行任何操作。它也不是完全准确（尽管我真的不知道它有多准确）。如果你想让一个线程休眠，然后显示一个显示剩余时间的字段；我认为最好的方法是

1.) 让你的一个线程休眠 X 秒

2.) 在你的 UI 线程上启动一个 Timer，它每秒触发 X 秒，进行数学运算并显示估计的剩余时间。

我能想到的另一种选择是让同一个线程 Sleep 并显示它的剩余时间；但你需要做一些像 L'Leg 建议的事情。

也许我误解了你的目标是什么；但我无法想象你想要其中任何一种行为的情况。

如果您正在另一个线程中完成工作，并且您想报告还剩多少时间 - 不妨看看使用 BackgroundWorker 并使用“ReportProgress”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T20:50:24.947

调用`Thread.Sleep`有时*可能*是一种代码气味。在没有确切了解您如何使用它的情况下，我不能提倡在您的场景中使用它。但是，除此之外，以下课程可能会解决您的问题。虽然，我个人无法想到我会使用它的情况。

```
public class Sleeper
{
  private TimeSpan remaining = TimeSpan.Zero;

  public TimeSpan GetRemaining()
  {
    lock (this)
    {
      if (remaining > TimeSpan.Zero)
      {
        Monitor.Pulse(this);
        Monitor.Wait(this);
      }
      return remaining;
    }
  }

  public void Sleep(TimeSpan timeout)
  {
    lock (this)
    {
      if (remaining > TimeSpan.Zero)
      {
        throw new InvalidOperationException("Sorry, but I'm not safe for multiple sleepers.");
      }
      remaining = timeout;
      DateTime expires = DateTime.UtcNow.Add(remaining);
      bool complete = remaining <= TimeSpan.Zero;
      while (!complete)
      {
        bool complete = Monitor.Wait(this, remaining);
        remaining = expire - DateTime.UtcNow;
        if (remaining <= TimeSpan.Zero)
        {
          complete = true;
        }
        if (complete)
        {
          remaining = TimeSpan.Zero;
        }
        Monitor.Pulse(this);
      }
    }
  }
} 
```

然后像这样使用它。

```
public static void Main()
{
  var sleeper = new Sleeper();

  Task.Factory.StartNew(
    () =>
    {
      while (true)
      {
        sleeper.Sleep(TimeSpan.FromMinutes(1);
      }
    });

  while (true)
  {
    Console.WriteLine("Press ENTER to get time remaining...");
    Console.ReadLine();
    TimeSpan remaining = sleeper.GetRemaining();
    Console.WriteLine("Remaining = " + remaining.ToString());
  }
} 
```

同样，只有少数情况下我可以想象这可能有用。我想一个更复杂的锁存器变体更关注时序可能是有用的。它的工作原理与我在上面创建的非常相似。您可以将其称为“定时锁存器”，它还可以向任何感兴趣的调用者报告其到期时间。

# sql-server - 从 sql server 备份文件中恢复数据文件而不恢复日志文件

> ID：10540135
> 
> 赞同：0
> 
> 时间：2012-05-10T18:30:39.150
> 
> 标签：sql-server

我有一个需要 SQL Server 支持的客户。客户提供了数据库的备份。在尝试恢复数据库进行测试时，我意识到数据文件为 100MB，而日志文件为 250GB，这使得在我的开发计算机上无法恢复。

我已经看到可以使用[idera SQL 虚拟数据库](http://www.idera.com/SQL-Toolbox/)和Redgate [SQL Virtual Restore](http://www.red-gate.com/products/dba/sql-virtual-restore/)创建 SQL 虚拟数据库，但我还没有对这些工具进行任何测试。

是否可以在没有日志文件 (ldf) 的情况下单独提取或恢复数据文件 (mdf)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:27:50.613

我认为没有办法只恢复一个而不是两个。不要让客户向您发送备份，而是让他们仅在单个文件中向您发送 .MDF。他们可能必须先分离数据库，然后才能复制 .MDF 文件。另一种选择是在复制文件时暂时停止 SQL 服务。

您应该能够仅使用 MDF 文件附加数据库。如果 LDF 文件不存在，它会自动为您创建一个。

# jquery - jQuery 代码不能在 Netbeans 之外工作

> ID：10540140
> 
> 赞同：1
> 
> 时间：2012-05-10T18:31:17.747
> 
> 标签：jquery

嗨，我对脚本不起作用感到有些困惑。这是我的情况，我有以下代码：

```
<script src="jquery.js"></script>
<script>
    $(document).ready(function(){

        $('a#Press_one').click(function(event){
            event.preventDefault();
            $('div#main_left').load('1.html');

        })

    });
</script>
</head>
<body>
         <div id="main_left"></div>
         <a href="#" id="Press_one">Citeste mai mult...</a>
</body>
</html> 
```

我已经使用 NetBeans IDE 编写了这个，当我运行它时，它运行得非常好。我保存了名为 index.html 的文件，并转到了文件所在的文件夹。我双击了链接，但是奇怪的是它不起作用。我在 NetBeans 中再次尝试并且它起作用了。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T16:16:21.870

尝试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
    $(document).ready(function(){

        $('a#Press_one').click(function(event){
            event.preventDefault();
            $('div#main_left').load('1.html');
        })
    });
</script>
</head>
    <body>
         <div id="main_left"></div>
         <a href="#" id="Press_one">Citeste mai mult...</a>
    </body>
</html> 
```

建议使用内容交付网络或 CDN 来获取您可能需要的所有文件，有许多 javascript 库和其他类型的库不在 Google 或 Microsoft 的 CDN 上，但 jQuery 几乎在每个 CDN 上。

请检查上面的代码以确保您确实获得了 js 文件，并检查浏览器的工具是否存在任何 javascript 错误，如果由于任何原因 jQuery 没有加载`window.$ == undefined`，那么`window.jQuery == undefined`它将是正确的。记住`$`是`jQuery`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:05:42.317

好吧，在阅读 load() 之后，很明显为什么这个问题中的代码不起作用

但是您在 html 中缺少 div #main_left 我在本地使用 div 进行了尝试，并且效果很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:33:08.043

只是一种预感，但我打赌您没有将 jquery.js 文件复制到 html 文件的新位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T13:45:33.570

您使用的是 Chrome 还是 Firefox？如果是 Chrome，这不是找不到 jQuery 的问题。如果我运行它，我会在 javascript 控制台中收到以下错误：

`Origin null is not allowed by Access-Control-Allow-Origin.`

这基本上是浏览器中的一项安全功能，可以阻止该`XMLHttpRequest`功能`load`。这在尝试从本地文件执行 ajax-ish 时很常见。如果您在文件服务器上提供它，应该没问题，但 Chrome 不会从本地文件运行它，以防止脚本出现任何安全问题。

如果我在 Firefox 中运行它，它可以工作。Chrome 对从本地文件系统加载脚本有更严格的安全限制。

在这个堆栈溢出问题中也有一个很好的讨论：[Origin null is not allowed by Access-Control-Allow-Origin](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-10T18:35:01.647

您需要让浏览器解析脚本标签...尝试将 type="text/javascript" 添加到脚本标签，如下所示：

`<script type="text/javascript">/*theFunction()*/</script>`

div#main_left 在哪里？ [http://jsfiddle.net/sVaHa/](http://jsfiddle.net/sVaHa/)

# sql - 需要帮助找出在本地表 (SQL) 中操作数据的逻辑

> ID：10540144
> 
> 赞同：1
> 
> 时间：2012-05-10T18:31:35.970
> 
> 标签：sql

我有一张看起来像下面的桌子。

```
EMPLID EFFDT    EFFSEQ     DEPTID   JOBCODE FLAG1     FLAG2      FLAG3
  X    <date>   <number>   <text>   <text>  <number>  <number>   <number>
  X                         
  Y                         
  Z    <date1>  <number1>  <text1>  <text1> <number1>  <number1>  <number1>
  Z    <date2>  <number2>  <text2>  <text2> <number2>  <number2>  <number2>
  Z 
```

我无法弄清楚的是，如何消除第二行和最后一行，同时设法保留第三行（`EMPLID=Y`）

换句话说，我需要消除员工的记录，其中有一个人满为患，并保留唯一一个空的员工记录。这是我不得不面对的一个更大问题的一部分。我希望我有时间讨论整个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:33:11.150

根据您认为是否为空的列，您可以使用：

```
DELETE TABLENAME
WHERE
EMPLID IN (
SELECT DISTINCT EMPLID
    FROM TABLENAME
WHERE EFFDT IS NOT NULL [OR EFFSEQ IS NOT NULL [...]]
) AND EFFDT IS NULL [AND EFFSEQ IS NULL [...]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:40:15.340

您需要一个“DELETE DUPE”查询。这种查询背后的想法是按某个唯一键对行进行分组，按主键或日期时间字段排序，然后删除除第一个或最后一个之外的所有内容。如果您需要隔离具有重复项的组，请添加一个`HAVING`子句（即`having count(*) > 1`）

这是关于SO的一个：

[T-SQL：删除所有重复的行但保留一个](https://stackoverflow.com/questions/6025367/t-sql-deleting-all-duplicate-rows-but-keeping-one)

```
with cte as (   
  select [foo], [bar],       
    row_number() over (partition by foo, bar order by baz) as [rn]   from table ) 
delete cte where [rn] > 1 
```

如果您不使用 SQL Server，我相信几乎所有其他 DBMS 都有一种方法可以做到这一点。

这是另一个更通用的 SO：

[如何删除重复的行？](https://stackoverflow.com/questions/18932/sql-how-can-i-remove-duplicate-rows)

```
DELETE MyTable  
FROM MyTable 
LEFT OUTER JOIN (    
  SELECT MIN(RowId) as RowId, Col1, Col2, Col3     
  FROM MyTable     
  GROUP BY Col1, Col2, Col3 
) as KeepRows ON    MyTable.RowId = KeepRows.RowId 
WHERE    KeepRows.RowId IS NULL 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T18:34:52.020

我假设您只想删除查询中的行，而不是从表本身中删除：

```
select *
from MyTable
where EMPLID = 'Y'
    or coalesce(EFFDT, '') <> '' 
```

# java - 如何在 Java、TCP/IP 服务器/客户端模型中使用套接字获取远程 IP 地址？

> ID：10540146
> 
> 赞同：0
> 
> 时间：2012-05-10T18:31:37.810
> 
> 标签：java, networking, client-server, ip

所以我有一个在桌面应用程序中使用 Socket 和 ServerSocket 的 TCP/IP 服务器/客户端模型（应该在网络中玩的游戏）。

我需要获取服务器远程 IP 地址，以便客户端应用程序可以在打开的特定端口处打开的服务器应用程序连接到它。

```
public class ServerConnection {

private int PORT = 8100;
private ServerSocket serverSocket = null;

public void create() throws IOException {
    serverSocket = new ServerSocket();
    serverSocket.bind(new InetSocketAddress("localhost", PORT));
}

public void close() throws IOException {
    serverSocket.close();
}

public ClientConnection acceptRequest() throws IOException {
    Socket socket = serverSocket.accept();
    return new ClientConnection(socket);
}

public ServerConnection() throws IOException {
}
}
public class ClientConnection {

    private String adress = "127.0.0.1";
    private int PORT = 8100;
    private Socket socket = null;
    private PrintWriter out = null;
    private BufferedReader in = null;

    public ClientConnection() {

    }

    public ClientConnection(Socket socket) throws IOException {
        this.socket = socket;
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
    }

    public void connect() throws UnknownHostException, IOException {
        socket = new Socket(adress, PORT);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
    }

    public void close() throws IOException {
        if (out != null) {
            out.close();
        }
        if (in != null) {
            in.close();
        }
        if (socket != null) {
            socket.close();
            socket = null;
        }
    }

    public void send(String request) {
        if (socket != null) {
            out.println(request);
        }            
    }

    public String receive() throws IOException {
        if (socket != null) {
            return in.readLine();
        }
        return null;
    }
} 
```

它在本地主机上运行良好，但我希望它能够在任何地方（服务器和客户端）运行。所以我需要一种方法让服务器找出它的当前远程IP，用户将通过一些通信线路（IM、电子邮件等）发送它，然后客户端将输入地址并连接到服务器。因此，一个应用程序既可以充当服务器，也可以充当客户端，因此不需要一个稳定的服务器应用程序，它可以持续运行并为客户端提供服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:01:28.763

如果您的客户端和服务器位于同一网段，Zeroconf 是一个非常有吸引力的零配置（嗯...）解决方案。你会发现一个[带有 JmDNS的 Java 实现](http://sourceforge.net/projects/jmdns/)

此外，从头开始实现稳定的协议并不是一件容易的事。如果不是出于教育目的，我建议依靠类似的东西

*   阿帕奇米娜
*   灰熊
*   网状 3
*   快速服务器
*   xSocket

这些库为您提供了许多在这里很重要的特性，例如错误处理和并发（非阻塞调用）。

如果你想从外部访问你的服务器，你不能绑定到“localhost”。请参阅 ServerSocket.bind。您可以通过ServerSocket.getInetAddress绑定到“null”并请求默认使用的网络适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:35:42.263

您需要进行两项调整：

*   服务器套接字必须绑定到 localhost 以外的其他东西。通常，您使用 来创建服务器套接字`new ServerSocket(port)`，而不指定主机名。这样，服务器套接字将在给定端口上侦听机器上所有可用地址。如果将套接字绑定到“localhost”，则只能通过 localhost 访问它。那不是你想要的。创建服务器套接字后，您可以尝试`SocketAddress`使用`serverSocket.getLocalSocketAddress()`.

*   客户端将需要连接到您在创建/绑定服务器套接字时指定的地址。如果您创建了服务器套接字而没有指定地址（即绑定到所有可用地址），那么客户端可以连接到其中的任何一个（通常是本地主机 + 外部 IP 地址）。

服务器通常不需要知道他们的地址。它们只是绑定到`<any address>:port`，并且客户端必须知道要连接的地址。

# php - 获取数组项在php中的位置

> ID：10540149
> 
> 赞同：0
> 
> 时间：2012-05-10T18:32:00.930
> 
> 标签：php, arrays

假设我有一个类似于以下的数组，并且我正在循环遍历它：

```
$sidebar = array("Best of the Month" => $featuredBestMonth, 
                 "Featured Content"  => $featuredContent);

<? while($item = current($sidebar)):?>
    <? if($item):?>

         <h3><?=key($sidebar);?></h3>

         <? foreach($item as $single):?>
            <p><?=$single['title'];?></p>
        <? endforeach;?>

    <? endif;?>
    <? next($sidebar);?>
<? endwhile;?> 
```

如何计算当前数组编号，所以第一个 while 会显示 1，第二个会显示 2？

我知道我可以做到这一点，`$i++;`但只是想知道是否有一个数组函数可以做到这一点？

不确定我是否可以将 key 与 foreach 循环一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:33:49.697

```
array_search(key($sidebar), array_keys($sidebar)); 
```

嗯..不漂亮。使用`for`循环？:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:37:13.207

我建议您使用 foreach 来满足几乎所有的数组循环需求：

```
foreach ($sidebar as $single) {} 
```

对于计数数组元素，只需使用`count()`

```
count ($sidebar); 
```

* * *

```
if (is_array($sidebar))
foreach ($sidebar as $key => $single) :
?>
    <h3><?php echo $key; ?></h3>
    <p><?php echo $single['title']; ?></p>
<?
endforeach; 
```

* * *

最终解决方案：

```
if (is_array($sidebar))
{
    $i = 0;
    foreach ($sidebar as $key => $item)
    {
        $i2 = ++ $i;
        echo "<h3>{$i2}.- $key</h3>\n";

        if (is_array($item))
        {
            $j = 0;
            foreach ($item as $single)
            {
                $j2 = ++ $j;
                echo "<p>{$j2}.- {$single['title']}</p>";
            };
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:38:33.797

我不相信有一种方法可以使用字符串索引来完成您所要求的事情（无需使用单独的计数器变量）。一个 for 循环或另一个带有计数器的循环实际上是完成您所要求的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T18:59:07.390

Oi - 所有这些标签（以及短标签）看起来都很痛苦。感觉很像 PHP 4，任何被迫支持此代码的人都不会很高兴。无意冒犯，但我可以提出类似的建议：

```
$i = 0;

$sidebar = array(
    "Best of the Month" => $featuredBestMonth, 
    "Featured Content"  => $featuredContent
);

foreach($sidebar as $key => $item){
    if($item){   // will $item ever NOT evaluate to true?
        echo "<h3>".++$i.". $key</h3>";

        foreach($item as $single){
            echo "<p>$single[title]</p>";
        }
    }
} 
```

我仍然不确定这段代码是否有意义，但根据您的示例，它至少应该产生相同的结果（也不确定您希望计数器显示在哪里，因为您的问题不是很清楚......所以我猜到了）。

祝你好运。

# ruby-on-rails - 带有 RVM 的 Mac OSX 上的 Rails 分段错误

> ID：10540155
> 
> 赞同：8
> 
> 时间：2012-05-10T18:32:42.397
> 
> 标签：ruby-on-rails, osx-snow-leopard, rvm

创建新的 Rails 应用程序时，出现以下错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799: [BUG] Segmentation fault
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin10.8.0] 
```

所有的rails文件似乎都生成了，但上面的错误仍然存​​在。任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T18:39:51.893

在我看来，这就像 LLVM GCC 的问题，请尝试使用 GNU GCC。

最简单的方法是安装 osx-gcc-installer 并重新安装 ruby​​：

```
rvm reinstall 1.9.3 
```

EDIT2：也可以使用通过 HomeBrew/MacPorts 提供的 gcc-4.2，安装 CommandLineTools 并按照`rvm requirements`.

编辑 1：我搜索了一下，发现了这个[http://www.seqmedia.com/2012/05/08/frustrations-abound-rvm-vs-macports-and-the-bug-segmentation-fault/](http://www.seqmedia.com/2012/05/08/frustrations-abound-rvm-vs-macports-and-the-bug-segmentation-fault/) - 和我记得`openssl`在 OSX 中已经向我提到它坏了，检查它的最简单方法是：

```
rvm get stable
rvm autolibs enable
rvm reinstall 1.9.3 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-12T01:28:31.750

我用谷歌搜索了这个问题，发现了以下魔法咒语：

```
rvm pkg install openssl
rvm reinstall 1.9.3 --with-openssl-dir=$rvm_path/usr 
```

很抱歉没有链接回源，但我不记得哪个网站有获胜的公式。它的要点是红宝石链接到一个坏版本的openssl，所以这样做会使rvm安装它自己的openssl版本并链接红宝石。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T11:53:41.743

设法像这样修复它：

**更新 rvm：** rvm get head
**安装所需库：** rvm 要求运行
**重新安装 1.9.3：** rvm 重新安装 1.9.3

运行一段时间，看起来很干净

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T19:50:35.823

我通过删除全球安装的 gem 并重新安装 Heroku 工具带来修复此错误。不知道为什么，但它对我有用。

# ruby - SASS --watch 不断失败，检测到已删除的模板

> ID：10540156
> 
> 赞同：5
> 
> 时间：2012-05-10T18:32:44.313
> 
> 标签：ruby, gem, sass

我正在 vim 中处理一个项目，每次保存 .scss 文件时，都会收到以下错误：

```
Deleted template detected: /home/path/to/my.scss
/usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/plugin/compiler.rb:338:in `read': No such file or directory - public/stylesheets/my.scss (Errno::ENOENT)
        from /usr/lib/ruby/gems/1.8/gems/listen-0.4.2/lib/listen/adapters/linux.rb:34:in `join'
        from /usr/lib/ruby/gems/1.8/gems/listen-0.4.2/lib/listen/adapters/linux.rb:34:in `start'
        from /usr/lib/ruby/gems/1.8/gems/listen-0.4.2/lib/listen/multi_listener.rb:44:in `start'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/plugin/compiler.rb:306:in `watch'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/plugin.rb:107:in `send'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/plugin.rb:107:in `method_missing'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/exec.rb:431:in `watch_or_update'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/exec.rb:302:in `process_result'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/exec.rb:41:in `parse'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/../lib/sass/../sass/exec.rb:21:in `parse!'
        from /usr/lib/ruby/gems/1.8/gems/sass-3.1.17/bin/sass:8
        from /usr/bin/sass:19:in `load'
        from /usr/bin/sass:19 
```

想法？如果我每次都手动重新启动 --watch 服务器，它会起作用，但这有点违背它的精神。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-23T18:15:09.500

你应该完全使用[指南针](http://compass-style.org/)！ 

## 指南针是什么

Compass 是每个 SASS 编码人员必备的工具。指南针由两部分组成：

*   SASS 的元框架；
*   一个命令行工具，用于编译 Compass 项目和做其他有用的事情。

该`compass watch`命令正是您正在寻找的。每当您保存更改时，它都会重新编译 CSS，就像`sass --watch`. **当你删除一个 SASS/SCSS 文件时它不会失败**，除非你继续`@import`删除被删除的文件。

## 可笑的简短安装指南

为了使以下工作，您必须拥有 Ruby 和[RubyGems](http://rubygems.org/pages/download)。当您使用`sass`命令行工具时，很可能您已经拥有了它们。

要开始使用 Compass，请执行以下操作：

1.  使用 RubyGems 安装指南针：`gem install compass`.
2.  在项目的根目录中创建一个`compass.rb`文件（在您的情况下是`Project/compass.rb`）。
3.  运行`compass watch`并开始编码。

## config.rb 文件示例

`compass.rb`这是一个可能对您 有用的最小值：

```
css_dir =   "stylesheets"
sass_dir =  "sass" 
```

# c++ - C++ 临时变量生命周期

> ID：10540157
> 
> 赞同：5
> 
> 时间：2012-05-10T18:32:48.823
> 
> 标签：c++, visual-studio, variables, lifetime, construction

*此代码有效吗？*

```
int foo()
{
    std::vector<std::string>& v = std::vector<std::string>(5, "X");

    // Do something silly...

    return 42;
} 
```

出于某种原因，我认为临时`std::vector`对象*（从赋值符号开始）*应该在构造后立即被破坏*（从而使引用无效）*。

但是，调试证明我错了，好吧，我意识到我不太明白为什么**函数返回时临时变量会被破坏。**

* * *

*我想我对一些基本的东西有很大的误解，所以请赐教:)*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T18:34:29.570

您显示的代码是非法的——临时对象只能绑定到右值引用或*const*左值引用。

VC++ 恰好允许它作为扩展（并给出[4 级警告](http://msdn.microsoft.com/en-us/library/186yxbac.aspx)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:56:33.997

临时的正常生命周期是直到创建它的完整表达式结束为止；它不一定在使用时立即销毁。如果使用临时对象来初始化引用，则它的生命周期会延长以匹配引用的生命周期（在构造函数的初始化列表中创建的临时对象除外）。

当然，你的代码是非法的；如果引用是一个非常量，它只能用某种左值来初始化。但如果它是合法的（并且至少有一个编译器接受它），则应该延长生命周期以匹配引用的生命周期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T18:42:22.813

您有一个对已释放对象的引用。它靠“纯粹的运气”工作（参见**The C++ Programming Language**，第 10.4.10 节临时对象）。你不能保证它会在每个编译器中工作。

`const`只有绑定到引用时，您才能确定临时对象的生命周期会延长。

# gem - JRuby 1.6.7 Weblogic 10.3 LoadError: no such file to load -- active_record

> ID：10540164
> 
> 赞同：0
> 
> 时间：2012-05-10T18:33:12.317
> 
> 标签：gem, weblogic, jruby

我的目标：将所有 Ruby 源代码和 gem 放在与 war/ear 一起打包的 jar 文件中。这是必需的，因为我工作的组织不接受将它们放在 J2EE 容器之外的文件系统上。

在 Weblogic 10.3 上使用 JRuby 1.6.7 我收到以下错误。“LoadError：没有要加载的文件——active_record”。我的设置是我已经下载了 jruby-complete 并将它放在我的网络应用程序中。[我还使用这些方向](http://blog.nicksieger.com/articles/2009/01/10/jruby-1-1-6-gems-in-a-jar)将 ActiveRecord 及其支持的 gem 添加到 jruby-gems.jar 中。当我构建我的 web 应用程序时，我将两个 jar 添加到了 war 文件库和 ear 文件中的 META-INF/lib。我还尝试将它们添加到 ear 文件的 APP-INF/lib 文件夹中。仍然收到 LoadError。

此外，我将以下内容添加到我的加载路径中，如此[处](https://stackoverflow.com/questions/5501455/jruby-loadpath-messed-up)所述。我已经做到了这一点，有无开始的正斜杠，有无“类路​​径：”

```
 List paths = new ArrayList();
    paths.add("classpath:/ruby");
    paths.add("classpath:/myapp");
    paths.add("classpath:/META-INF/jruby.home/lib/ruby/gems/soart");
    paths.add("classpath:/META-INF/jruby.home/lib/ruby/1.9");
    paths.add("classpath:/META-INF/jruby.home/lib/ruby/site_ruby/1.9");
    paths.add("classpath:/META-INF/jruby.home/lib/ruby/site_ruby/shared");
    paths.add("classpath:/META-INF/jruby.home/lib/ruby/gems/1.9");
    container.setLoadPaths(paths); 
```

我所有的单元测试都通过了，我已经验证了 jar 文件正在进入 ear 和 war 文件。单元测试包括使用 ActiveRecord 从数据库中提取数据。

因为我不会控制我的部署服务器，所以我将 GEM_PATH 和 GEM_HOME 环境变量设置为空字符串。所有资源都需要来自战争/耳朵。

另外值得一提的是，这不是一个 Ruby on Rails 应用程序，我现在也不能让它成为一个。

**更新**

尝试将 gem 文件放在 jruby-complete.jar 中但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:49:26.583

您可能缺少 Active Record 库。如果可以，请尝试通过以下方式安装它们

```
sudo gem install activerecord 
```

# html - HTML/CSS - 隐藏图像源的一部分

> ID：10540167
> 
> 赞同：1
> 
> 时间：2012-05-10T18:33:25.220
> 
> 标签：html, css, image, background-image, src

在 img 标签中隐藏部分图像源的最佳和最正确的方法是什么

说我有以下内容：

```
<img alt="" src="myimage.jpg" class="photo" /> 
```

我的目标是将图像封闭在一个圆角容器中，这显然会覆盖图像顶部的角。

我应该去在图像顶部放置一个绝对定位的元素，就好像你在照片上放一张剪纸一样，还是有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:20:14.260

如果您的意图是图像得到圆角，您可以使用`border-radius`它。如果您需要容器具有圆角并且图像被剪裁，请使用`overflow: hidden`它。

你可以在这个小提琴中找到一个演示：http: [//jsfiddle.net/frozenkoi/hwDYV/](http://jsfiddle.net/frozenkoi/hwDYV/)

你想要的是类似于这个的东西

```
<div class="contact">
    <img src=http://jsfiddle.net/img/top-bg.png /><a href="#">Username</a>
</div> 
```

使用这个 CSS：

```
DIV.contact {background: silver; border-radius: 8px; margin: 10px auto 0 5px; width: 200px; text-align: center; overflow: hidden}
DIV.contact IMG {display: block; width: 100%; } 
```

请注意，图像只是一个蓝色矩形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:37:42.190

几个选项：

*   处理图像服务器端以应用转换。
*   在图像之上叠加一个绝对定位的蒙版图像。
*   使用一些带有圆角和绝对定位的透明元素的巧妙 CSS 来实现与蒙版图像相同的效果。

# cakephp - 如何对这个数组进行分组

> ID：10540168
> 
> 赞同：0
> 
> 时间：2012-05-10T18:33:25.810
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有以下数组，我想将同一家公司的所有用户分组在一起。目前，每个用户都会显示一个公司 ID，有时一个公司下有 2 个或更多用户。所以我有点想恢复它并显示公司下的用户而不是用户下的公司。我是怎么做到的

```
Array
(
    [0] => Array
        (
            [User] => Array
                (
                    [id] => 1
                    [company_id] => 20
                    [type] => 
                )

        )

    [1] => Array
        (
            [User] => Array
                (
                    [id] => 6
                    [company_id] => 21
                    [type] => 
                )

        )

    [2] => Array
        (
            [User] => Array
                (
                    [id] => 7
                    [company_id] => 22
                    [type] => 
                )

        )

    [3] => Array
        (
            [User] => Array
                (
                    [id] => 14
                    [company_id] => 21
                    [type] => 
                )

        )

    [4] => Array
        (
            [User] => Array
                (
                    [id] => 15
                    [company_id] => 22
                    [type] => 
                )

        )

    [5] => Array
        (
            [User] => Array
                (
                    [id] => 16
                    [company_id] => 21
                    [type] => 
                )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:53:20.737

From the example I suppose that your relations are as follows:

"User belongsTo Company" and "Company hasMany User"

@tigrang is right, if you do a find on Company, you will get the users Grouped by Company:

```
$this->Company->find('all', array('conditions' => array('id' => $companyId))); 
```

If your Company Model has many other relations and you need only the Users you can use the ContainableBehaviour. Firstly add it in the Company model:

```
public $actsAs = array('Containable); 
```

Then in the find() call:

```
$this->Company->find('all', array('conditions' => array('id' => $companyId), 'contain' => array('User'))); 
```

The 'contain' key accepts an array of Model names or a string for a single Model. It will adjust the model bindings on the fly, leaving you only with the Company and User models' data (if used as in the example above).

And a little thing I missed. You can also use the 'group' key in a find over the User model:

```
$this->User->find('all', array('group' => 'company_id')); 
```

Try both approaches and see what you come up with.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T18:42:51.123

使用递归或 ContainableBehavior 在 Company 模型上进行查找。

# jpa - 有没有办法在表更改后重新生成 JPA 实体

> ID：10540170
> 
> 赞同：1
> 
> 时间：2012-05-10T18:33:34.797
> 
> 标签：jpa, wid

我创建了一些 JPA 实体，并且自从我第一次重新创建它们以来，表结构发生了一些变化。有没有办法重新生成表，这样我就不会丢失我创建的任何关系或命名查询？我真的不想失去那些。我正在使用 Web Interface Developer btw... 这只是 IBM 的日食。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:59:28.637

Net Beans IDE 有一个有用的从数据库表生成实体。您只需从向导的下拉菜单中选择“更新”，而不是“新建”选项。我意识到您没有使用 Net Beans，但这可能对寻找相同功能的其他人有用。

# iphone - 内存泄漏问题，内存管理

> ID：10540171
> 
> 赞同：0
> 
> 时间：2012-05-10T18:33:40.523
> 
> 标签：iphone, objective-c, memory-management

我现在拥有的是

**类A.h**

```
@interface ClassA: NSObject <DelegateA>
-(id)initWithData:(NSData*)data;
+(Stores*)makeClass:(Class) name fromData:(NSData*)data;
@property (assign) NSMutableArray    *arr;
@property (assign) RXMLElement       *rxmlRoot;
@end 
```

**班A.m**

```
 -(id)initWithData:(NSData*)data { 
        self = [super init]; 
        if (self) { 
            arr      = [[NSMutableArray array] retain]; 
            rxmlRoot = [[RXMLElement elementFromXMLData:data] retain]; 

        } 

        [rxmlRoot iterate:node with:^(RXMLElement *e){   <--------get warning at here
            NSLog(@"element is %@",e.tag);
            Detail   *detail  =   [[[Detail alloc] init] autorelease];
            [detail setLat:       [e attribute:@"lat"]];
            [detail setLon:       [e attribute:@"lon"]];

            [arr addObject:detail];

        }];
        return self; 
        }

      +(classA*)makeClass:(Class) name fromData:(NSData*)data{
            ClassA  *classA =   [[ClassA alloc] initWithData:data];
            return [storeClass autorelease] ;

        } 
```

和 RaptureXML.m

```
+ (id)elementFromXMLData:(NSData *)data {
    return [[[RXMLElement alloc] initFromXMLData:data] autorelease];
}
- (id)initFromXMLData:(NSData *)data {
    if ((self = [super init])) {
        xml_ = [[TBXML alloc] initWithXMLData:data];
        tbxmlElement_ = xml_.rootXMLElement;
    }

    return self;    
} 
```

**警告**：实例变量访问（通过'self'）导致空指针取消引用

**问题**：为什么我收到此警告以及如何解决此问题。请就此给我建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:41:22.873

尝试将所有初始化代码放入

```
if (self) {

} 
```

那就是移动 [rxmlrRoot 迭代...等。进入那个 if 语句

作为一般规则，所有初始化语法（init 方法中的所有内容！）都应该在 if (self) 块中。原因是当超类返回 nil 时，该块之外的代码将运行（想想 else if (!self) {...)。如果未调用超级方法（初始化程序只是 OC 中的常规方法），您不希望代码继续执行。

我还被教导在我的自定义类中始终有一个指定的初始化程序（这是可以调用 super init 的那个），我的类中的所有其他初始化程序然后调用这个指定的初始化程序。前任。

```
// Designated initializer
- (id)init
{
    self = [super init];
    if (self) {
        // initialize some stuff
    }

    // else { something went wrong and super returned nil..
    // don't put anything here

    return self;
}

// Another initializer
- (id)initWithFoo:(int)foo
{
    self = [self init]; // Now i call my designated initializer instead of super
    if (self) {
        self.foo = foo; // or something
    }
} 
```

这使您可以控制从那一点开始的所有流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:08:08.917

在通话`[rxmlRoot iterate:node with:^(RXMLElement *e){ ... }]`中，什么是节点？它不是局部变量，也不是 iVar。它是全球性的还是存在于其他地方？

不管它是什么，检查以确保它已被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T01:37:45.950

在块内部，`arr`通过引用访问实例变量。由于微妙的内存管理规则，访问导致`self`被块保留。

由于`if (self)`编译器的线索`self`可能为 nil，`self`因此块的隐式保留可能会导致空指针取消引用。

要修复，请检查 nil 并提前退出：

```
if (!(self = [super init])) {
    return nil;
}

// now it is impossible for self to be nil and cause a null pointer dereference
// when self is implicitly retained by the block

// ...continue initialization 
```

# ruby - 如果我有两个值，如何将它们中的每一个推送到数组中的同一行？- 红宝石

> ID：10540174
> 
> 赞同：1
> 
> 时间：2012-05-10T18:33:44.983
> 
> 标签：ruby

因此，我正在使用 Nokogiri 解析页面并存储如下值：

```
contents[link[:href]] = content_page.css("p a")
copy = content_page.xpath('//p/text()[1]').text 
```

然后我像这样将它们推到我的`my_listing`阵列上：

```
my_listing << contents[link[:href]]
my_listing << copy 
```

但是，这样做是为每个条目创建一个 2 元素数组。

所以`contents[link[:href]]`存储在 中`my_listing[0]`，而 `copy`存储在 中`my_listing[1]`。

然而，我想要发生的是`my_listing[0][0] == contents[link[:href]]`&& `my_listing[0][1] == copy`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:37:29.223

我建议你做一个单行：

```
my_listing << [ contents[link[:href]], copy ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:36:47.057

我猜`contents`是哈希？

`Hash#to_a`如果是这样，您可以通过简单地使用该方法来制作您想要的数组。

```
{'a' => 123, 'b' => 456}.to_a
#=> [["a", 123], ["b", 456]] 
```

* * *

```
contents = {}
contents['http://google.com'] = 'Its a google!'
contents['http://yeahoo.com'] = 'Like yahoo, but with some yeah!'

my_listing = contents.to_a

puts my_listing[0][0] #=> http://google.com
puts my_listing[0][1] #=> Its a google! 
```

# ember.js - 如何在 Ember Handlebars 中使用 if 语句实现 not？

> ID：10540176
> 
> 赞同：197
> 
> 时间：2012-05-10T18:33:45.953
> 
> 标签：ember.js, handlebars.js

我有这样的声明：

```
{{#if IsValid}} 
```

我想知道如何使用`if`如下所示的否定陈述：

```
{{#if not IsValid}} 
```

* * *

## 回答 #1

> 赞同：467
> 
> 时间：2012-05-10T18:38:22.300

简单问题的简单答案：

```
{{#unless isValid}}
{{/unless}} 
```

另请记住，您可以在or和结束标记`{{else}}`之间插入一个。`{{#if}}``{{#unless}}`

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-09-27T14:57:11.653

你有很多方法可以做到这一点。

# 1.使用`{{unless}}`：

```
{{#unless isValid}}
  ...
{{else}}
  ...
{{/unless}} 
```

# 2\. 使用 inline-if 助手：

```
{{#if (if isValid false true)}}
  ...
{{else}}
  ...
{{/if}} 
```

# 3\. 使用[ember-truth-helpers](https://github.com/jmurphyau/ember-truth-helpers)插件：

```
{{#if (not isValid)}}
  ...
{{else}}
  ...
{{/if}} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-31T11:42:43.170

它可以通过多种方式完成。

1 次使用`unless`

```
{{#unless IsValid}}
<Your Code>
{{/unless}} 
```

2.使用`if else`

```
{{#if IsValid}}
{{else}}
<Your Code>
{{/if}} 
```

3.使用`not`助手

```
{{#if (not IsValid)}}
<Your Code>
{{/if}} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-20T06:30:29.707

**`unless`块助手**（内置助手）

`unless`助手是助手的逆`if`。

> 如果表达式返回一个假值，它的块将被渲染。

```
 {{#unless valid}}
  <h3 class="warning">WARNING</h3>
  {{/unless}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T06:29:55.323

```
{{#if items.length}}
    //Render
{{/if}} 
```

这里 items.length .. 如果它返回除 null 之外的某个值，那么只有它会进入 if 循环。

注意：您也可以检查布尔值。在 If 块中

```
{{#if booleanFloag}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-24T06:34:40.307

如果您想使用 if 和 else ，以下语句将有助于完整：

```
{{#if author}}
    <h1>{{firstName}} {{lastName}}</h1>
{{else}}
    <h1>Unknown Author</h1>
{{/if}} 
```

注意：在逻辑完成之前不要关闭 if 块...

# c++ - 传感器数据采集 C 守护进程的困境

> ID：10540185
> 
> 赞同：0
> 
> 时间：2012-05-10T18:34:07.713
> 
> 标签：c++, mysql, c, udp, sensors

这是问题所在。传感器板每秒以各种 UDP 数据包大小发送 31 字节数据 3 次。例如：

```
1st packet 6 bytes
2nd packet 8 bytes
3rd packet 1 byte
4th packet 5 bytes
5th packet 5 bytes
6th packet 6 bytes

1st packet 4 bytes
2nd packet 5 bytes
3rd packet 1 byte
4th packet 7 bytes
5th packet 3 bytes
6th packet 6 bytes
7th packet 5 bytes 
```

有多个传感器板从不同位置发送数据。

我遇到的问题是如何在接收到多个传感器板数据时对其进行序列检测。我可以顺序检测一块板，因为它是连续的。但不知道如何排序检测每个传感器板的数据，然后存储每个传感器板每100组数据的平均值。如果没有一个结构来为每个唯一的发送者收集数据，直到收到 31 个字节的缓冲区以形成一个完整的数据包，然后将其存储在另一个结构中，直到每个发送者收到 100 个集合，我不知道该怎么做。

正如我所说，使用一个设备，我可以对接收一整套 31 个字节进行序列检测。数据存储在 mysql 数据库中。

程序在 C 中。

任何想法将不胜感激。

谢谢，

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:50:20.310

它是UDP，源端口号不应该是数据包的一部分吗？您可以根据数据包的来源，为每个单独的数据按顺序构建一个 31 字节的数据集。

但是，由于它是 UDP，因此您不能保证数据包会按顺序发送。路由问题可能导致数据包丢失、延迟和各种问题。如果它实际上没有通过互联网，那么这些问题将是最小的，而是只有一跳。

如果您无法修改这些传感器的输出，那么我认为您将必须拥有多个接收器，以便您可以顺序构建一个 31 字节的数据包，然后将其传递给组合来自所有的传感器。

# c# - 如何在 WCF + EF POCO 解决方案中返回插入的 id（身份列）？

> ID：10540186
> 
> 赞同：1
> 
> 时间：2012-05-10T18:34:12.863
> 
> 标签：c#, wcf, entity-framework

我在 WCF 4 中有以下服务操作：

```
public void InsertUsers(IEnumerable<User> Users)
{
    using (LaCalderaEntities Context = new LaCalderaEntities())
    {
        UserBL UserBl = new UserBL(Context);
        UserBl.InsertUsers(Users);
        Context.SaveChanges();
    }
} 
```

该操作按预期工作并将用户列表添加到数据库中，但我想知道从对象中取回所有 UserId（身份列）的最佳方法。

如果在执行 SaveChanges() 时由 EF 在服务器上设置 UserId 属性应该自动返回到客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:45:41.860

EF 使用它们生成的值自动更新键属性。您可以简单地从 POCO 访问这些属性

```
public void InsertUsers(IEnumerable<User> Users)
{
    using (LaCalderaEntities Context = new LaCalderaEntities())
    {
        UserBL UserBl = new UserBL(Context);
        UserBl.InsertUsers(Users);
        Context.SaveChanges();
    }
    foreach (var user in Users)
    {
        Console.Writeline(user.id);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:54:54.040

好吧，您发送来获取更新的用户对象将在保存后附加 ID。

如果是 void 方法，您的服务可能会返回 ID 的 Int[]。但是，您不会知道哪个 ID 与哪个用户相关联。

```
public int[] InsertUsers(IEnumerable<User> Users)
{
    using (LaCalderaEntities Context = new LaCalderaEntities())
    {
        UserBL UserBl = new UserBL(Context);
        UserBl.InsertUsers(Users);
        Context.SaveChanges();
//At This Point Your Users objects have ID's
return Users.Select(u=>u.ID).ToArray()
    }
} 
```

如果您只需要身份证，那将可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:26:02.557

我在另一个[SO question](https://stackoverflow.com/a/2553961/266474)中找到了答案。WCF 支持参数中的 ref 修饰符，因此这将起作用并在客户端更新源用户列表。

```
public void InsertUsers(ref IEnumerable<User> Users) 
{ 
    using (LaCalderaEntities Context = new LaCalderaEntities()) 
    { 
        UserBL UserBl = new UserBL(Context); 
        UserBl.InsertUsers(Users); 
        Context.SaveChanges(); 
    } 
} 
```

但我不喜欢这个解决方案，我要使用 Andrew 解决方案，从方法中返回对象列表。

# assembly - “andw $~3, %dx”是什么意思？

> ID：10540194
> 
> 赞同：1
> 
> 时间：2012-05-10T18:34:39.213
> 
> 标签：assembly

这段代码来自linux内核源代码。$~3 到底是什么意思？我知道 $3 表示一个立即数，但是带前导符号 ~ 是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T18:37:31.243

按位补码。因此，与 ~3 进行与运算意味着清除两个最低位。

# java - 不能发邮件。？

> ID：10540196
> 
> 赞同：0
> 
> 时间：2012-05-10T18:34:39.757
> 
> 标签：java, jakarta-mail

我创建了一个发送邮件的功能。当我在 main() 中调用时，它的工作原理。但是当我从 jsp 或其他类调用它时，它会抛出异常“java.lang.NoClassDefFoundError: javax/mail/MessagingException”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:36:36.683

您需要在 Web 应用程序的类路径中包含 JavaMail。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:38:57.417

似乎 javaxmail jar 不在您的 webapp 的 WEB-INF/lib 文件夹中。如果使用默认 java 包，Web 应用程序需要包含 javax.mail.* 的 Jar 才能发送邮件。

# jquery - jQuery 脚本在 Firefox 上不起作用

> ID：10540197
> 
> 赞同：1
> 
> 时间：2012-05-10T18:34:43.423
> 
> 标签：jquery, jquery-ui, firefox

我从StackOverflow 上[的一个问题](https://stackoverflow.com/questions/1423671/jquery-click-off-element-event)中获取了以下代码：

```
$('body').click(function(event) {
    if (!$(event.target).closest('#myDiv').length) {
        $('#myDiv').hide();
    };
}); 
```

唯一的问题是在 Firefox 上（在 Safari 上工作）不起作用。这是为什么？我应该如何更改它以使其与 Firefox 兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:42:40.410

这是从[哪个 HTML 元素是事件的目标？](http://www.quirksmode.org/js/events_properties.html)

```
$(function() {
    $('body').click(function(event) {

        var targ;
        if (event.target) targ = event.target;
        else if (event.srcElement) targ = event.srcElement;
        if (targ.nodeType == 3) // defeat Safari bug
           targ = targ.parentNode;

        if (!$(targ).closest('#myDiv').length) {
            $('#myDiv').hide();
        };
    });

}); 
```

[**DEMO**](http://jsfiddle.net/skram/MGQj5/) 在 div 外点击会隐藏 div`!$(targ).closest('#myDiv').length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:45:44.307

试试这个，让我知道它是否不起作用

```
$('body').click(function(event) {
    target = (window.event) ? window.event.srcElement /* for IE */ : event.target;
    if (!($(target).closest('#myDiv').length>0)) {
        $('#myDiv').hide();
    };
}); 
```

# asp.net - 添加控制器/视图的上下文菜单丢失

> ID：10540198
> 
> 赞同：57
> 
> 时间：2012-05-10T18:34:48.293
> 
> 标签：asp.net, asp.net-mvc, visual-studio, visual-studio-2010, asp.net-mvc-4

我已将 ASP.NET MVC 4 集成到现有的 asp.net 网站中。两者都工作正常，但我没有看到任何菜单/快捷方式来在 Visual Studio IDE 中创建控制器/视图。那些仅适用于 ASP.NET MVC 模板吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-05-11T06:08:18.557

> 那些仅适用于 ASP.NET MVC 模板吗？

是的，但你可以作弊。Visual Studio 显示这些快捷方式的方式是查看项目类型，如果它发现它是一个 ASP.NET MVC 项目，它将使它们可用。但是它怎么知道它是一个 ASP.NET MVC 项目呢？毕竟 ASP.NET MVC 是一个 ASP.NET 项目。

打开`.csproj`文件并查找`<ProjectTypeGuids>`ASP.NET MVC 4 项目的节点。你会看到这样的东西：

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

现在打开`.csproj`您的常规 ASP.NET 项目的文件，只需将`{E3E379DF-F4C6-4180-9B81-6769533ABE47}`GUID 添加为列表中的第一项（如果您没有项目甚至不加载）。就这样。现在，您将在 WebForms 项目中看到 ASP.NET MVC 特定的上下文菜单。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-02-07T04:24:49.717

更改 GUID 的步骤

1.  右键单击解决方案资源管理器中的项目
2.  点击卸载项目
3.  在解决方案资源管理器中再次右键单击项目
4.  编辑项目文件夹/projectname.csproj
5.  查涅 GUID
6.  右键单击并选择“重新加载项目”

在`<ProjectTypeGuids>`标签中，在开头添加任何这些 GUID

```
{E3E379DF-F4C6-4180-9B81-6769533ABE47};

{E53F8FEA-EAE0-44A6-8774-FFD645390401}; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-15T11:15:27.413

对于使用 MVC 5 的人，请添加此密钥

```
{E3E379DF-F4C6-4180-9B81-6769533ABE47}; 
```

在开始。其他向导将不起作用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-05T15:55:01.353

什么都不做，只是更新你的 MVC 项目。在 Nuget 包管理器控制台中触发此命令。

> 更新包 Microsoft.AspNet.Mvc

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-16T21:23:01.317

答案 2 是正确的只是错误的指导

> {E53F8FEA-EAE0-44A6-8774-FFD645390401}

是VS2010中MVC所需要的

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-22T19:02:30.503

通过在解决方案资源管理器中右键单击项目，您需要卸载项目、编辑项目、使用下表更改标签，然后重新加载项目。将适当的 GUID 粘贴到 csproj 文件中列表的前面。

不同版本的 MVC 的不同 GUID：

```
ASP.NET MVC 1   {603C0E0B-DB56-11DC-BE95-000D561079B0}
ASP.NET MVC 2   {F85E285D-A4E0-4152-9332-AB1D724D3325}
ASP.NET MVC 3   {E53F8FEA-EAE0-44A6-8774-FFD645390401}
ASP.NET MVC 4   {E3E379DF-F4C6-4180-9B81-6769533ABE47}
ASP.NET MVC 5   {349C5851-65DF-11DA-9384-00065B846F21} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-02T15:34:03.610

当打开 MVC 项目作为网站时，我遇到了同样的问题。我通过 Open -> Project 重新打开了解决方案，并且此功能按预期工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-20T16:42:46.890

我知道这是一篇旧文章，但我刚刚遇到了一个 MVC 5 项目的 VS2013 和 VS2012 之间的切换。我遇到的问题是我使用的 MVC 模板版本不是从 Visual Studio 更新中安装的。VS2012 没有附带 MVC5，因为它是在它之后出现的，所以 VS2012 需要更新才能添加模板。与我想象的 VS2010 和 MVC4 相同。

无论如何，从 Microsoft 下载更新解决了我的问题，因为当另一个版本打开并保存项目时，使用上面的修复程序时它会再次消失。

这是 VS2012 MVC5 更新的链接。确保下载并安装工具更新和 VS 插件。

[http://www.microsoft.com/en-us/download/details.aspx?id=41532](http://www.microsoft.com/en-us/download/details.aspx?id=41532)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-10T19:14:43.097

对我来说，它在我期望它存在的地方丢失了（在菜单顶部，当您右键单击视图文件夹并单击“添加”时显示），但后来我在“新建”下的子上下文菜单中找到了它从模板'！我已经重新安装了锐器，我猜它是因为它而发生的（也是 Visual Studio 2012）：

![在此处输入图像描述](../Images/156e983d3208cb7712ee489120cda70b.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-11-11T20:38:04.323

**与VS2015**有同样的问题，帮助将 ProjectTypeGuids 内容更改为：

```
{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-04T23:15:15.520

我在 VS2012 上并尝试了 Dimitrov 的答案（将特定的 GUID 添加到项目文件的 ProjectTypeGuids）。虽然这确实给了我缺少控制器操作的上下文菜单，但我在我的 Razor 页面上缺少智能感知。

事实证明，我正在处理的 MVC 项目版本缺少 VS 工具，安装此工具（而不是编辑项目文件）解决了我的问题。

[适用于 Visual Studio 2012 的 ASP.NET 和 Web 工具 2013.1 的下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=41532 "适用于 Visual Studio 2012 的 ASP.NET 和 Web 工具 2013.1")

我从以下博客文章中找到了这个下载链接：

[宣布发布适用于 Visual Studio 2012 的 ASP.NET 和 Web 工具 2013.1](http://blogs.msdn.com/b/webdev/archive/2013/11/18/announcing-release-of-asp-net-and-web-tools-2013-1-for-visual-studio-2012.aspx "宣布发布适用于 Visual Studio 2012 的 ASP.NET 和 Web 工具 2013.1")

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-10T18:36:46.060

你是对的。这些上下文菜单选项的存在是项目类型/模板特定的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-26T13:58:55.743

对于旧版本

```
{F85E285D-A4E0-4152-9332-AB1D724D3325} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-07T16:27:46.637

当所有其他方法都失败时（在重新安装 VS2015 之前），您可能需要重置 VS 缓存。这对我有用（修复后 - 不干预 GUIDS）。只需删除此链接中提到的文件夹中的内容（大约需要 30 秒），然后执行命令。这需要另外 10 秒。重新启动 VS，您将在 VS 中看到第一次使用的用户的屏幕。它就像一个魅力。

[http://blogs.msdn.com/b/willy-peter_schaub/archive/2010/09/15/if-you-have-problems-with-tfs-or-visual-studio-flush-the-user-cache- or-not.aspx](http://blogs.msdn.com/b/willy-peter_schaub/archive/2010/09/15/if-you-have-problems-with-tfs-or-visual-studio-flush-the-user-cache-or-not.aspx)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-11-07T14:35:02.773

当您刚刚从代码存储库中检出解决方案的新副本并且尚未下载包括 Microsoft.AspNet.Mvc 在内的 NuGet 包时，也会出现此问题。重建解决方案可以解决问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-04-21T21:54:58.097

这是对我有用的 VS 2017。

首先检查您是否能够创建一个新的空 MVC 项目。

如果不是 - 这意味着缺少某些组件。启动 Visual Studio 安装程序（通常位于其中，`C:\Program Files (x86)\Microsoft Visual Studio\Installer\vs_installer.exe`但您只需点击“开始”并开始输入“Visual Studio 安装程序”）

舔“修改”并简单地重新运行它并检查所有现有组件。

只需确保选中“ASP.NET Web 开发”即可。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-27T19:13:10.550

您可能已将项目作为文件夹类型打开，这限制了 Visual Studio IDE 以限制某些 GUID 选项，因此请加载您的项目解决方案。

它应该工作。右键单击 ActionResult 或内部控制器后，添加视图或添加控制器应该可用。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2015-06-01T14:45:44.817

VS2012 上下文菜单添加控制器/视图丢失

在 VS2012 和 MVC4 中尝试在 PM 中卸载 Web API 5.2：

```
UnInstall-Package Microsoft.AspNet.WebApi 
```

# java - AlarmManager 设置Android？

> ID：10540201
> 
> 赞同：0
> 
> 时间：2012-05-10T18:34:59.073
> 
> 标签：java, android

我有需要每 12 小时重复一次的警报管理器。

```
AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        Intent in = new Intent(this, myReceiver.class);
        myAlarmSender = PendingIntent.getBroadcast(getApplicationContext(), 0, in, 0);
        am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), time, myAlarmSender); 
```

在那之后，我在扩展广播接收器的类 myReceiver 中捕获触发事件

```
@Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "text", Toast.LENGTH_LONG).show();
    } 
```

现在我想设置状态栏通知或启动我的通知类，其中我有通知代码，但我无法启动新的 Intent 或在 onReceive() 方法中编写通知代码。帮助？谢谢，狼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:40:12.500

为什么不？

```
@Override
public void onReceive(final Context context, final Intent bootintent)
{
    Intent anyService = new Intent(context, AnyService.class);
    context.startService(anyService);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:42:06.650

我的朋友我为你做的事情：

[http://blog.blundell-apps.com/notification-for-a-user-chosen-time/](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)

您将希望您的 AlarmManager 设置您的警报，因为它启动服务。然后，当您的服务启动时，您可以显示通知。

设闹钟：

```
public class AlarmTask implements Runnable{
    // The date selected for the alarm
    private final Calendar date;
    // The android system alarm manager
    private final AlarmManager am;
    // Your context to retrieve the alarm manager from
    private final Context context;

    public AlarmTask(Context context, Calendar date) {
        this.context = context;
        this.am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        this.date = date;
    }

    @Override
    public void run() {
        // Request to start are service when the alarm date is upon us
        // We don't start an activity as we just want to pop up a notification into the system bar not a full activity
        Intent intent = new Intent(context, NotifyService.class);
        intent.putExtra(NotifyService.INTENT_NOTIFY, true);
        PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, 0);

        // Sets an alarm - note this alarm will be lost if the phone is turned off and on again
        am.set(AlarmManager.RTC, date.getTimeInMillis(), pendingIntent);
    }
} 
```

这将启动一个服务`NotifyService`

然后在 NotifyService 类中：

```
private void showNotification() {
        // This is the 'title' of the notification
        CharSequence title = &quot;Alarm!!&quot;;
        // This is the icon to use on the notification
        int icon = R.drawable.ic_dialog_alert;
        // This is the scrolling text of the notification
        CharSequence text = "Your notification time is upon us";
        // What time to show on the notification
        long time = System.currentTimeMillis();

        Notification notification = new Notification(icon, text, time);

        // The PendingIntent to launch our activity if the user selects this notification
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, SecondActivity.class), 0);

        // Set the info for the views that show in the notification panel.
        notification.setLatestEventInfo(this, title, text, contentIntent);

        // Clear the notification when it is pressed
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Send the notification to the system.
        mNM.notify(NOTIFICATION, notification);

        // Stop the service when we are finished
        stopSelf();
    } 
```

# c# - Excel.Worksheet.UsedRange 在不同机器上不相等

> ID：10540208
> 
> 赞同：0
> 
> 时间：2012-05-10T18:35:25.483
> 
> 标签：c#, excel-interop

我在两台不同的机器上用 c# 4.0 解析同一个 Excel 文件。我在每台机器上
得到不同的**xlWorkSheet.UsedRange值。**

我的程序针对两台机器上的相同互操作 dll：

-Microsoft.Office.Interop.Excel -版本：12.0.0.0 -运行
时版本：v1.1.4322

***机器A***

*   视窗服务器 2003 R2
*   Excel 2007 (12.0.4518.1014)

***机器 B***

*   视窗 XP 2002 SP3
*   Excel 2007 (12.0.4518.1014)

我的 Excel 工作表的 A 列是空的。

```
Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet = GetWorkSheet(); 
```

在机器 A 上

```
((dynamic)xlWorkSheet.UsedRange).Column = 2 
```

在机器 B 上

```
((dynamic)xlWorkSheet.UsedRange).Column = 1 
```

知道可能导致这种差异的原因是什么吗？

# iphone - NSDictionary 的描述性变量名称

> ID：10540211
> 
> 赞同：0
> 
> 时间：2012-05-10T18:35:32.503
> 
> 标签：iphone, objective-c, ios

我有一个名为`Item`NSManagedObject 的类。`Item`s 是从 NSDictionary 对象创建的。这些 NSDictionary 对象存在于一个 NSArray 中，作为其表视图控制器的数据模型。NSDictionary 对象有一些功能可以保证将其包装在一个类中（也就是说，我将创建一个具有 NSDictionary 实例 var 的新类）：

1.  `save`被调用，此时下载过程开始
2.  时`connectionDidFinishLoading`，我从该 NSDictionary 数据创建并保存一个实例，`Item`以便该`Item`实例持续存在。

我在想`ItemRawData`or `ItemDictionary`，但它们似乎并没有真正起作用（即我不喜欢它们）。

这些项目以 JSON 开头。只有当用户将商品添加到他的帐户/购物车时，我们才希望通过创建实例`Item`并保存上下文来持久保存商品。

`Item`保存“原始”数据、下载和创建对象的此类的描述性名称是什么？是否有 Objective-C 或 iOS 规定的通用前缀或后缀？

编辑：有人认为这个问题应该被关闭。我并没有过多地询问您对如何命名这个类的个人意见，因为我想知道是否存在针对我正在尝试做的事情的 Objective-C 或 iOS 命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:54:24.430

我并不完全清楚这个对象在明确定义的 MVC 范例中的位置（听起来该类可能将持久数据（模型）与控制（例如，执行下载）混合在一起。但我将架构留给你我不知道你项目的全部范围。

一个常见的设计模式或习语是“经理”。这可能是一个合适的候选者，其名称如 MYItemManager（当然，带有您自己的前缀）。

# java - 我可以用java注释做这种事情吗？

> ID：10540212
> 
> 赞同：2
> 
> 时间：2012-05-10T18:35:32.927
> 
> 标签：java, annotations

我有一组我调用的方法和一个主处理程序，如下所示：

```
public class MyHander
{
    HashMap<String, Method> methodMap = ...;

    static {
        ... fill the methodMap by looking up local methods
        methodMap.put("typeA", findMethod("handleTypeA"));
        .... etc.
    }

    public void handle(MyObject obj) {
        Method handler = methodMap.get(obj.getType());
        handler.invoke(.....);
    }

    private handleTypeA() {
        ....
    }

    private handleTypeB() {
        ....
    }
} 
```

所以这通常是我调用我的个人处理程序方法的方法。我可以通过注释方法handleTypeA()、handleTypeB() 等然后在我的主handle() 方法中找到正确的方法来做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:51:22.277

是的，您可以为处理程序方法创建一个注释，列出它们接受的类型，并创建一个类来处理它们并返回一个处理程序映射。这会将静态初始化程序中容易出错的代码移动到可测试的工厂类中。

```
public class MyHander
{
    HashMap<String, Method> methodMap = HandlerType.buildMap(MyHandler.class);

    public void handle(MyObject obj) {
        Method handler = methodMap.get(obj.getType());
        handler.invoke(.....);
    }

    @HandlerType({"typeA", "typeAprime"})
    private handleTypeA() {
        ....
    }

    @HandlerType({"typeB"})
    private handleTypeB() {
        ....
    }
} 
```

`HandlerType.buildMap`将使用反射来处理注释。您需要确保可以将数组作为默认注释参数传递，或者执行一些巧妙的操作，例如将其编码为逗号分隔的字符串。

# android - 使用 Mono for Android 监听偏好变化

> ID：10540213
> 
> 赞同：1
> 
> 时间：2012-05-10T18:35:37.840
> 
> 标签：android, xamarin.android

我正在尝试从[使用 Mono for Android 和 .Net/C#](http://books.google.com/books?id=YDeNQia3BwQC&pg=PA203&lpg=PA203&dq=ISharedPreferencesOnSharedPreferenceChangeListener&source=bl&ots=f8Hl0QJMVP&sig=mkk2oktnp_8nNhqVLEWqmXWxddw&hl=en&sa=X&ei=sPirT9OiKObe0QHnr4n7Dw&ved=0CEcQ6AEwBQ#v=onepage&q=ISharedPreferencesOnSharedPreferenceChangeListener&f=false) （第 202 到 204 页）的专业 Android 编程一书中获取一个示例。

要注册和注销更改侦听器，它显示以下代码示例：

```
using System;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Preferences;

namespace MonoForAndroidPreferences
{
    [Activity(Label = "User Preferences")]
    public class UserPreferences : PreferenceActivity
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Create your application here
            this.AddPreferencesFromResource(Resource.Layout.userpreferences);
        }

        protected override void OnResume()
        {
            base.OnResume();

            this.GetPreferences(FileCreationMode.Private).RegisterOnSharedPreferenceChangeListener(this);
        }

        protected override void OnPause()
        {
            base.OnPause();

            this.GetPreferences(FileCreationMode.Private).UnregisterOnSharedPreferenceChangeListener(this);
        }

        public void OnSharedPreferenceChanged(ISharedPreferences prefs, string key)
        {
            // Do something with the changed value pointed to by key
        }
    }
} 
```

两者当然不能从转换`RegisterOnSharedPreferenceChangeListener`为。`UnregisterOnSharedPreferenceChangeListener``UserPreferences``ISharedPreferencesOnSharedPreferenceChangeListener`

我不确定作者是如何做到这一点的。任何帮助将不胜感激。

我还尝试从[wrox.com](http://www.wrox.com/WileyCDA/WroxTitle/Professional-Android-Programming-with-Mono-for-Android-and-NET-C-.productCd-1118026438,descCd-DOWNLOAD.html)下载示例代码，但它不包括在示例代码中侦听首选项更改。

编辑：

以下代码可以编译，但`OnSharedPreferenceChanged`不会在首选项中进行更新时被调用。

```
 public class UserPreferences : PreferenceActivity, ISharedPreferencesOnSharedPreferenceChangeListener
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Create your application here
            this.AddPreferencesFromResource(Resource.Layout.userpreferences);
        }

        protected override void OnResume()
        {
            base.OnResume();

            this.GetPreferences(FileCreationMode.Private).RegisterOnSharedPreferenceChangeListener(this);
        }

        protected override void OnPause()
        {
            base.OnPause();

            this.GetPreferences(FileCreationMode.Private).UnregisterOnSharedPreferenceChangeListener(this);
        }

        void ISharedPreferencesOnSharedPreferenceChangeListener.OnSharedPreferenceChanged(ISharedPreferences prefs, string key)
        {
            // Do something with the changed value pointed to by key
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T02:54:02.570

我正在处理完全相同的示例，并且触发 OnPause 和 OnResume 事件没有问题。

问题是在暂停/恢复时注册/注销监听器有效，但绝对没有效果。侦听器本身从未被解雇。

切换到实际的 UserPreferences 意图导致 OnPause 触发，取消注册侦听器。反之亦然，当我从那里回来时。但这只是问题的一部分。我什至无法使用此方法正确加载首选项

```
this.GetPreferences(FileCreationMode.Private).RegisterOnSharedPreferenceChangeListener(this); 
```

（我认为原因是因为我使用的活动有不同的名称，启动器被调用`PreferencesDemoActivity`并且首选项本身正在被处理`UserPreferences`- 见下文）。

不幸的是，解决方案标记为上面的答案

```
PreferenceScreen.SharedPreferences.RegisterOnSharedPreferenceChangeListener(this); 
```

也不起作用（它抱怨 SharedPreferences 在静态上下文中不可用）。

一旦我将所有 OnPause/OnResume/Listener 代码移到UserPreferences 类**中**，一切都运行良好。

然而，这对我没有好处。我需要我的**MAIN**应用程序立即响应对首选项的更改，而不必在从首选项屏幕返回时重新阅读它们并检查更改。

当我的（单独的）首选项屏幕中的某些内容发生更改时，我可以在我的“主”类中触发实际的 OnSharedPreferenceChanged 监听器的唯一方法是这样实现它：

```
[Activity(Label = "More user preferences", MainLauncher = true, Icon = "@drawable/icon")]
public class PreferencesDemoActivity : Activity, ISharedPreferencesOnSharedPreferenceChangeListener
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button>(Resource.Id.MyButton);

        // !!!NB !!! Remember to implement ISharedPreferencesOnSharedPreferenceChangeListener in this class, 
        // or you'll never get to OnSharedPreferenceChanged method
        PreferenceManager.GetDefaultSharedPreferences(this).RegisterOnSharedPreferenceChangeListener(this);

        button.Click += delegate
                            {
                                Intent i = new Intent(this, new UserPreferences().Class);
                                this.StartActivityForResult(i, 0); // this ensures that we come back to this one when we exit the pref screen
                            };

    }

    /// <summary>
    /// Remember to implement ISharedPreferencesOnSharedPreferenceChangeListener in this class, or you'll never get this method to compile
    /// </summary>
    /// <param name="sharedPreferences"></param>
    /// <param name="key"></param>
    public void OnSharedPreferenceChanged(ISharedPreferences sharedPreferences, string key)
    {
        Log.Debug("MUP", string.Format("Preference {0} changed", key));

        if (key == "PREF_AUTO_UPDATE")
        {
            bool autoRefresh = sharedPreferences.GetBoolean("PREF_AUTO_UPDATE", false);
            Log.Debug("MUP", string.Format("Preference {0} changed to {1}", key, autoRefresh));
        }

    } 
```

这对我有用，并解决了我的问题。关键似乎是使用**PreferenceManager.GetDefaultSharedPreferences**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:43:21.033

正如您所注意到的，您需要为这些方法提供一个实现的类的实例[`ISharedPreferencesOnSharedPreferenceChangeListener`](http://docs.mono-android.net/?link=T%3aAndroid.Content.ISharedPreferencesOnSharedPreferenceChangeListener)。这可以是一个单独的类，或者如果您想在该示例中使用“this”，请修改该类以实现该接口：

```
[Activity(Label = "User Preferences")]
public class UserPreferences : PreferenceActivity, ISharedPreferencesOnSharedPreferenceChangeListener
{
    // OnCreate, OnResume, etc

    public void OnSharedPreferenceChanged(ISharedPreferences sharedPreferences, string key)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T17:09:41.117

你需要使用

```
PreferenceScreen.SharedPreferences.RegisterOnSharedPreferenceChangeListener(this); 
```

代替

```
 this.GetPreferences(FileCreationMode.Private).RegisterOnSharedPreferenceChangeListener(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:56:15.330

这可能是[我的 Samsung Galaxy Nexus 出现问题](https://stackoverflow.com/q/10757138/48700)的症状。当我将一个应用程序（在较旧的 Android 2.3.4 手机上运行良好）调试到 Andriod 4.0.2 手机时，根本没有触发`OnStart`, `OnResume`, `OnPause`, 和`OnStop`事件。

如果您正在使用这样的新手机，请尝试在 Mono for Android 项目属性中添加“armeabi-v7a”作为支持的架构。

根据您的支持需求，您可以[只提供“armeabi-v7a”架构](http://mono-for-android.1047100.n5.nabble.com/Supported-architectures-armeabi-v7a-tp5069377p5070002.html)。

# javascript - mongo日期问题

> ID：10540214
> 
> 赞同：0
> 
> 时间：2012-05-10T18:35:41.727
> 
> 标签：javascript, mongodb

所以我需要帮助来尝试理解以下内容？

在 mongo shell 中，我这样做了：

```
 > var start = new Date(2011,2,2,8,0,0) 
```

然后开始给我：

```
 > start
  ISODate("2011-03-02T16:00:00Z") 
```

我期望解析的是创建了一个日期变量，它属于以下类型

2011 年 2 月 2 日上午 8 点，格式为（yyyy-mm-dd）python 格式。

我无法理解发生了什么？

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:37:46.683

我真的认为这是一个 Javascript 日期问题，您的月份实际上比实际月份少一个数字

例如，二月是 1，如 w3c 中所述

> 注意：一月为 0，二月为 1，以此类推。

[http://www.w3schools.com/jsref/jsref_getmonth.asp](http://www.w3schools.com/jsref/jsref_getmonth.asp)

关于时间，这是一个时区问题，请尝试使用

```
start.setUTCHours(8) 
```

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

你可以通过做得到字符串

```
start.toUTCString(); 
```

# c# - 使用 WCF 使用 REST 服务 - 可选的查询字符串参数？

> ID：10540216
> 
> 赞同：7
> 
> 时间：2012-05-10T18:35:43.267
> 
> 标签：c#, .net, wcf

我在尝试使用 WCF 使用简单服务时遇到问题。到目前为止，一切都很顺利，除了实现可选的查询字符串参数。界面看起来有点像这样：

```
[ServiceContract]
[XmlSerializerFormat]
public interface IApi
{
    [OperationContract]
    [WebGet(UriTemplate = "/url/{param}?top={top}&first={first}")]
    object GetStuff(string param, int top, DateTime first);
} 
```

然后通过创建一个继承的类来消耗它`ClientBase<IApi>`。我尝试了几种使参数可选的方法：

**1）使参数可以为空**

这没有用。我收到来自`QueryStringConverter`另一个问题的类似消息：[WCF 服务合同可以有一个可为空的输入参数吗？](https://stackoverflow.com/questions/1393359/can-a-wcf-service-contract-have-a-nullable-input-parameter)

**2）URL末尾的一个参数**

因此，我考虑将 UriTemplate 更改为更通用，构建查询字符串并将其作为参数传递。这似乎也不起作用，因为传入的值被编码，因此服务器不会将其识别为查询字符串。

例子：

```
[WebGet(UriTemplate = "/url/{query}")] 
```

**3) 黑客解决方案**

到目前为止，我发现使它起作用的唯一方法是将所有参数更改为字符串，并且此处似乎允许使用 NULL。

例子：

```
[WebGet(UriTemplate = "/url/{param}?top={top}&first={first}")]
object GetStuff(string param, string top, string first); 
```

这个接口的消费仍然接受正确的变量类型，但是`ToString`被使用了。这些查询字符串参数仍然出现在实际请求中。

那么，有没有办法在**使用**WCF 使用 REST 服务时，使查询字符串参数成为可选？

**更新 - 如何修复**

采纳了创建服务行为的建议。这继承自`WebHttpBehaviour`. 它看起来如下：

```
public class Api : ClientBase<IApi>
{
    public Api() : base("Binding")
    {
        Endpoint.Behaviors.Add(new NullableWebHttpBehavior());
    }
} 
```

`NullableWebHttpBehavior`可以在以下 Stackoverflow 问题中找到：WCF[服务合同可以有一个可为空的输入参数吗？](https://stackoverflow.com/questions/1393359/can-a-wcf-service-contract-have-a-nullable-input-parameter). 唯一的问题是，`ConvertValueToString`没有超载，所以我快速做了一个：

```
 public override string ConvertValueToString(object parameter, Type parameterType)
    {
        var underlyingType = Nullable.GetUnderlyingType(parameterType);

        // Handle nullable types
        if (underlyingType != null)
        {
            var asString = parameter.ToString();

            if (string.IsNullOrEmpty(asString))
            {
                return null;
            }

            return base.ConvertValueToString(parameter, underlyingType);
        }

        return base.ConvertValueToString(parameter, parameterType);
    } 
```

这可能并不完美，但它似乎按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:46:13.100

您的选项 1) 可以用于 WCF 客户端，因为`WebHttpBehavior`可以将其应用于 ClientBase（或 ChannelFactory）派生类，如此[SO question & answer 中所示。](https://stackoverflow.com/questions/6346965/capture-response-when-a-service-returns-a-500-error-using-wcf)只需将您在 1) 中引用的代码与捕获 500 个响应问题中显示的配置结合起来，它就会显示工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:52:27.253

您是否尝试过使用可为空的类型？

```
object GetStuff(string param, int? top, DateTime? first); 
```

# javascript - 将变量从 ASP.net 传递到 JavaScript

> ID：10540217
> 
> 赞同：25
> 
> 时间：2012-05-10T18:35:46.483
> 
> 标签：javascript, asp.net

如何将变量从 asp.net 传递给 JavaScript？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T18:39:32.097

在后面的代码中创建一个属性

```
protected string MyProperty { get { return "your value"; } } 
```

然后在 javascript

```
var myValue = "<%= MyProperty %>"; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-10T18:39:06.073

有很多方法：

1 - 用你的 JavaScript 写出来`<%= myVariable %>`
2 - 设置一个 cookie 服务器端，然后检索 cookie 客户端
3 - 将隐藏的表单输入设置为你的值
4 - 将值作为查询字符串参数重定向到你的页面，然后使用 JavaScript 5 解析参数
- 在服务器端构建所有 JavaScript，保存到变量，然后在客户端写出变量。
6 - 使用 AJAX 请求检索值

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-10T18:37:43.517

您可以使用 ASP.Net HiddenField。您只需在服务器上设置它的值，并在需要时通过 javascript 检索它。

**服务器端**

```
hdf_Test.Value = "yourValue"; 
```

**HTML**

```
<asp:HiddenField runat="server" ID="hdf_Test" /> 
```

**Javascript**

```
document.getElementById('hdf_Test').value 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T18:47:02.413

1.  使用 javascript 标签

    ```
    <script>
        var var1 = @var1;  
        var var2 = @var2;  
    </script> 
    ```

2.  使用隐藏字段

    ```
    <input type="hidden" value="@var1" id="h_var1"/>  
    <input type="hidden" value="@var2" id="h_var2" />` 
    ```

在js中

```
$(function()
{
    var var1 = $("#h_var1").val();
    var var2 = $("#h_var2").val();
} 
```

3.通过ajax使用json检索数据

```
var var1;
var var2;
    $.get(url,function(result)
    {
        var1 = result.var1; var2 = result.var2;
     } 
```

@var 语法取决于您的视图引擎。它也许 `<%= Var1 %>`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-27T17:59:55.783

您可以在后面的代码中使用它：

公共字符串 json;

**你需要给它一个值**

在您的 JavaScript 中，您可以输入：

```
<script>
    var myVar = <%=json%>;
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-09T06:02:58.893

如果您想在代码端获得等效的字符串变量，这是代码：

例子：

```
string jsString= JsEncoder.JavaScriptEncode("This is an example of C# string to be converted to javascript string",true)); 
```

班级代码：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Text;

namespace stackoverlofw.JavascriptEncoder
{
public class JsEncoder
{
    /// <summary>
    /// Empty string for Java Script context
    /// </summary>
    private const string JavaScriptEmptyString = "''";

    /// <summary>
    /// Initializes character Html encoding array
    /// </summary>
    private static readonly char[][] SafeListCodes = InitializeSafeList();

    /// <summary>
    /// Encodes input strings for use in JavaScript.
    /// </summary>
    /// <param name="input">String to be encoded.</param>
    /// <param name="emitQuotes">value indicating whether or not to emit quotes. true = emit quote. false = no quote.</param>
    /// <returns>
    /// Encoded string for use in JavaScript and does not return the output with en quotes.
    /// </returns>
    /// <remarks>
    /// This function encodes all but known safe characters.  Characters are encoded using \xSINGLE_BYTE_HEX and \uDOUBLE_BYTE_HEX notation.
    /// <newpara/>
    /// Safe characters include:
    /// <list type="table">
    /// <item><term>a-z</term><description>Lower case alphabet</description></item>
    /// <item><term>A-Z</term><description>Upper case alphabet</description></item>
    /// <item><term>0-9</term><description>Numbers</description></item>
    /// <item><term>,</term><description>Comma</description></item>
    /// <item><term>.</term><description>Period</description></item>
    /// <item><term>-</term><description>Dash</description></item>
    /// <item><term>_</term><description>Underscore</description></item>
    /// <item><term> </term><description>Space</description></item>
    /// <item><term> </term><description>Other International character ranges</description></item>
    /// </list>
    /// <newpara/>
    /// Example inputs and encoded outputs:
    /// <list type="table">
    /// <item><term>alert('XSS Attack!');</term><description>'alert\x28\x27XSS Attack\x21\x27\x29\x3b'</description></item>
    /// <item><term>user@contoso.com</term><description>'user\x40contoso.com'</description></item>
    /// <item><term>Anti-Cross Site Scripting Library</term><description>'Anti-Cross Site Scripting Library'</description></item>
    /// </list>
    /// </remarks>
    public static string JavaScriptEncode(string input, bool emitQuotes)
    {
        // Input validation: empty or null string condition
        if (string.IsNullOrEmpty(input))
        {
            return emitQuotes ? JavaScriptEmptyString : string.Empty;
        }

        // Use a new char array.
        int outputLength = 0;
        int inputLength = input.Length;
        char[] returnMe = new char[inputLength * 8]; // worst case length scenario

        // First step is to start the encoding with an apostrophe if flag is true.
        if (emitQuotes)
        {
            returnMe[outputLength++] = '\'';
        }

        for (int i = 0; i < inputLength; i++)
        {
            int currentCharacterAsInteger = input[i];
            char currentCharacter = input[i];
            if (SafeListCodes[currentCharacterAsInteger] != null || currentCharacterAsInteger == 92 || (currentCharacterAsInteger >= 123 && currentCharacterAsInteger <= 127))
            {
                // character needs to be encoded
                if (currentCharacterAsInteger >= 127)
                {
                    returnMe[outputLength++] = '\\';
                    returnMe[outputLength++] = 'u';
                    string hex = ((int)currentCharacter).ToString("x", CultureInfo.InvariantCulture).PadLeft(4, '0');
                    returnMe[outputLength++] = hex[0];
                    returnMe[outputLength++] = hex[1];
                    returnMe[outputLength++] = hex[2];
                    returnMe[outputLength++] = hex[3];
                }
                else
                {
                    returnMe[outputLength++] = '\\';
                    returnMe[outputLength++] = 'x';
                    string hex = ((int)currentCharacter).ToString("x", CultureInfo.InvariantCulture).PadLeft(2, '0');
                    returnMe[outputLength++] = hex[0];
                    returnMe[outputLength++] = hex[1];
                }
            }
            else
            {
                // character does not need encoding
                returnMe[outputLength++] = input[i];
            }
        }

        // Last step is to end the encoding with an apostrophe if flag is true.
        if (emitQuotes)
        {
            returnMe[outputLength++] = '\'';
        }

        return new string(returnMe, 0, outputLength);
    }

    /// <summary>
    /// Initializes the safe list.
    /// </summary>
    /// <returns>A two dimensional character array containing characters and their encoded values.</returns>
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity", Justification = "This is necessary complexity.")]
    private static char[][] InitializeSafeList()
    {
        char[][] allCharacters = new char[65536][];
        for (int i = 0; i < allCharacters.Length; i++)
        {
            if (
                (i >= 97 && i <= 122) ||        // a-z
                (i >= 65 && i <= 90) ||         // A-Z
                (i >= 48 && i <= 57) ||         // 0-9
                i == 32 ||                      // space
                i == 46 ||                      // .
                i == 44 ||                      // ,
                i == 45 ||                      // -
                i == 95 ||                      // _
                (i >= 256 && i <= 591) ||       // Latin,Extended-A,Latin Extended-B        
                (i >= 880 && i <= 2047) ||      // Greek and Coptic,Cyrillic,Cyrillic Supplement,Armenian,Hebrew,Arabic,Syriac,Arabic,Supplement,Thaana,NKo
                (i >= 2304 && i <= 6319) ||     // Devanagari,Bengali,Gurmukhi,Gujarati,Oriya,Tamil,Telugu,Kannada,Malayalam,Sinhala,Thai,Lao,Tibetan,Myanmar,eorgian,Hangul Jamo,Ethiopic,Ethiopic Supplement,Cherokee,Unified Canadian Aboriginal Syllabics,Ogham,Runic,Tagalog,Hanunoo,Buhid,Tagbanwa,Khmer,Mongolian   
                (i >= 6400 && i <= 6687) ||     // Limbu, Tai Le, New Tai Lue, Khmer, Symbols, Buginese
                (i >= 6912 && i <= 7039) ||     // Balinese         
                (i >= 7680 && i <= 8191) ||     // Latin Extended Additional, Greek Extended        
                (i >= 11264 && i <= 11743) ||   // Glagolitic, Latin Extended-C, Coptic, Georgian Supplement, Tifinagh, Ethiopic Extended    
                (i >= 12352 && i <= 12591) ||   // Hiragana, Katakana, Bopomofo       
                (i >= 12688 && i <= 12735) ||   // Kanbun, Bopomofo Extended        
                (i >= 12784 && i <= 12799) ||   // Katakana, Phonetic Extensions         
                (i >= 19968 && i <= 40899) ||   // Mixed japanese/chinese/korean
                (i >= 40960 && i <= 42191) ||   // Yi Syllables, Yi Radicals        
                (i >= 42784 && i <= 43055) ||   // Latin Extended-D, Syloti, Nagri        
                (i >= 43072 && i <= 43135) ||   // Phags-pa         
                (i >= 44032 && i <= 55215) /* Hangul Syllables */)
            {
                allCharacters[i] = null;
            }
            else
            {
                string integerStringValue = i.ToString(CultureInfo.InvariantCulture);
                int integerStringLength = integerStringValue.Length;
                char[] thisChar = new char[integerStringLength];
                for (int j = 0; j < integerStringLength; j++)
                {
                    thisChar[j] = integerStringValue[j];
                }

                allCharacters[i] = thisChar;
            }
        }

        return allCharacters;
    }
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T18:45:04.887

在 HTML 中：

```
<script type="text/javascript">
  alert(<%=Greetings()%>);
</script> 
```

在后面的代码中：

```
protected string Greetings()
{
    return Microsoft.Security.Application.AntiXss.JavaScriptEncode("Hello World!");
} 
```

[AntiXss 库](http://wpl.codeplex.com/releases/view/80289)

# javascript - JQuery Mobile Change Page 不加载 JS 文件

> ID：10540219
> 
> 赞同：1
> 
> 时间：2012-05-10T18:35:49.180
> 
> 标签：javascript, jquery, jquery-mobile

为了更好地组织我们的 JQuery Mobile PhoneGap 应用程序，我希望能够在新页面上使用标签，并在引入页面时使用 changePage 或其他方式让 JS 进入。

到目前为止，我为此所做的努力并没有达到我想要的效果。除非我在 index.html 上包含所有 JS 文件，然后在 PageShow 事件处理程序中编写条件逻辑，这不是一个好的解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:44:07.943

要将新的 JS 包含到使用 jQuery Mobile 加载（通过 AJAX）的页面中，您必须在每个页面的`data-role="page"`或 ( `data-role="dialog"`) 元素中引用这些文件，因为 jQuery Mobile 在 AJAX 页面加载期间不会处理这些元素之外的任何内容。

或者，您可以使用 JavaScript 在`script`每个页面转换的“pageshow”事件上动态创建新标签。像这样的东西：

```
$(document).on('pageshow', 'div[data-role*="page"],div[data-role*="dialog"]', function () {
     (function () {
        var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
        script.src = '/path/to/new/include.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:18:13.653

我也有一个类似的问题，没有通过修复`<script>`标签的位置来解决。似乎如果您的代码中有编译错误（在我的情况下，`int`不是`var`在声明 for 循环变量时放置），整个脚本将不会被加载并且不会向日志抛出任何错误（至少，不会Eclipse 的 Android 模拟器中的 LogCat）。确保首先通过 JSLint 之类的错误检查器运行您的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T16:49:25.567

只需在 "div data-role='page' 中移动您的 JS 代码，因为 JQM 将跳过其余部分

# sql - SQL - 空外键或联结表？

> ID：10540222
> 
> 赞同：1
> 
> 时间：2012-05-10T18:36:05.030
> 
> 标签：sql, sql-server, database-design

我的问题与 0 到许多关系有关。例如，如果您有一个客户表和一个订单表，一个客户可以有一个或多个订单，而一个订单可以有零个或一个客户。它可以为零的原因是因为订单是从未保存客户详细信息的旧订单系统导入的。

我相信有两种选择：

1.  对于没有客户的订单，将 CustomerID（Orders 表中的外键）设置为 null。
2.  在包含 CustomerID 和 OrderID 的客户和订单之间创建联结表。但是，我认为联结表专门用于多对多关系

哪个是最好的选择？

编辑：

我发现了以下帖子并同意 Molf 的回答，这是我原来问题中的选项 2：[任何必要的可为空外键的示例？](https://stackoverflow.com/questions/925203/any-example-of-a-necessary-nullable-foreign-key).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:37:18.527

我不会创建联结表，除非您最初将订单键限制为唯一和/或预见到关系变为多对多。

具有普通单个 FK 的更简单的两表选项中的问题是您是否希望在订单行中允许 NULL 客户 FK。当然可以不允许这样做（出于明显的良好参考完整性原因），并有一个“未知客户”客户，用于所有具有未知客户的旧订单。以一种非常好的方式，这将 NULL （可能被误解）替换为明确的内容（对“未知客户”的引用，一旦创建或识别出真正的客户就可以随时修复）。

我会强烈考虑这一点，因为人们希望遗留数据将是您未来数据中相对较小的一部分，并且您希望确保典型案例的数据中有尽可能多的 RI（所有未来的案例都必须确定一个客户在订单创建期间），同时仍然适应遗留案例（随着时间的推移，这些案例在您的数据世界中的重要性会降低）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:53:29.343

这里有一个概念上令人困惑的冗余，尽管您可能对此有要求。如果您从头开始执行此操作，您可以简单地让 Orders 具有 Customer.CustomerID 的 NULLable FK。这将满足有 1 个客户 - 许多订单和 1/0 个客户的订单。您也可以通过使用联结表来做到这一点，因为这在技术上是多对多的关系。

最好的选择将取决于您如何查询数据。例如，对 Orders 表进行分析型查询可能更方便

在没有客户的情况下寻找订单

```
SELECT SUM(CASE WHEN customer iS NULL THEN 1 ELSE 0 END) FROM Orders 
```

对比

```
SELECT SUM(CASE WHEN j.oid iS NULL THEN 1 ELSE 0 END) FROM 
Orders o  LEFT OUTER JOIN Junction j 
WHERE o.o_id = j.o_id 
```

您可以提出其他示例也可以进行更清洁、更有效的查询。

# c# - MSDN 帮助作为 XML 或 JSON 数据而不是 HTML 页面

> ID：10540225
> 
> 赞同：2
> 
> 时间：2012-05-10T18:36:08.617
> 
> 标签：c#, .net, msdn

我正在尝试为 .NET BCL 类构建帮助工具。Microsoft 是否以 XML 文件或 JSON 或 REST 的形式提供 MSDN 帮助页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:20:48.253

好像你可以在这里访问它[http://services.msdn.microsoft.com/ContentServices/ContentService.asmx](http://services.msdn.microsoft.com/ContentServices/ContentService.asmx)作为 XML

# c++ - C++中的C复数？

> ID：10540228
> 
> 赞同：11
> 
> 时间：2012-05-10T18:36:32.893
> 
> 标签：c++, c99, complex-numbers

以下代码在 C 中编译并运行得很好（至少根据 'gcc -std=gnu99'），但在 C++ 下编译失败，给出“第 5 行：错误：无法将 'double' 转换为 'double **complex** ' in初始化”。有人知道为什么吗？

```
#include "/usr/include/complex.h"
#include <stdio.h>

int main(int argc, char * argv[]) {
  double complex a = 3;  // ERROR ON THIS LINE
  printf("%lf\n", creal(a));
  return 0;
} 
```

我意识到在 C++ 中还有另一种处理复数的方法，但我必须在 C++ 中使用 C 复数，因为这就是我得到的遗留代码的作用方式。谢谢，如果你能帮忙！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T18:44:17.863

C++ 编译器可以选择支持`_Complex`关键字作为扩展（少数支持），但这不是可移植的。如果您想拥有一个可移植的 C++ 解决方案，那么不幸的是，您需要使用 C++ std::complex 模板。

好消息是 C++ std::complex numbers 保证与 C complex numbers 兼容（从某种意义上说，指向一个的指针总是可以转换为指向另一个的指针，并且会发生正确的事情），这意味着如果您需要与需要 C 复杂值的 C 库进行互操作，您将不会遇到任何麻烦。

C11：

> 每个复杂类型具有与恰好包含对应实类型的两个元素的数组类型相同的表示和对齐要求；第一个元素等于复数的实部，第二个元素等于复数的虚部。

C++11：

> 如果`z`是 cv 类型的左值表达式，`std::complex<T>`则：
> 
> — 表达式`reinterpret_cast<cv T(&)[2]>(z)`应格式正确，
> 
> —`reinterpret_cast<cv T(&)[2]>(z)[0]`应指定 的实部`z`，并且
> 
> —`reinterpret_cast<cv T(&)[2]>(z)[1]`应指定 的虚部`z`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T18:41:21.393

使用 C 关键字表示复杂：_Complex。C++ 使用 complex 作为（模板）类。我不确定 creal 在哪里，否则我会取消注释。

```
#include <complex.h>
#include <cstdio>

int main(int argc, char * argv[]) {
  double _Complex a = 3.0 + 0.0I;  // DECLARATION WORKS NOW - NOTE ASSIGNMENT MUST HAVE IMAG PART
  //printf("%lf\n", creal(a));
  return 0;
} 
```

这适用于 gcc（我用 g++ 编译）。我收到有关已弃用的 .h 标头的警告。

[这](http://gcc.gnu.org/ml/libstdc++/2007-02/msg00161.html)是一个电子邮件跟踪的链接，显示了与 C++ 和 C 的非标准兼容性以及复数。C++11 要求 C++ 复合体与 C _Complexes 的布局兼容性。

我目前正在研究 C++ 中的 creal 等。我在标准中找不到任何东西。由于似乎有一些努力在 C++ 和 C 之间提供一些源代码兼容性，因此 creal、cpow 等可能会对 TR2 库提案做出很好的补充。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-10T18:40:06.137

[C 和 C++ 的兼容性](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C++)

> C++ 不支持 C99 的一些添加或与 C++ 功能冲突，例如可变参数宏、复合文字、指定的初始值设定项、可变长度数组和**本机复数类型**。C99 中定义的 long long int 数据类型和限制限定符不包含在当前的 C++ 标准中，但一些编译器（例如 GNU Compiler Collection[4]）将它们作为扩展提供。新的 C++ 标准 C++11 中包含 long long 数据类型以及可变参数模板，通过这些模板可以实现可变参数宏的某些功能。另一方面，C99 通过合并 C++ 特性（例如 // 注释以及混合声明和代码）减少了其他一些不兼容性。

# node.js - iisnode 托管的 Web 应用程序能否计算出托管它的虚拟路径？

> ID：10540235
> 
> 赞同：6
> 
> 时间：2012-05-10T18:36:48.807
> 
> 标签：node.js, iis, express, iisnode

我正在使用[iisnode](https://github.com/tjanczuk/iisnode)在 Windows 上的 IIS 中托管节点 Web 应用程序。当我在 Web 服务器（比如 Express 或 Restify）上设置路由时，我希望以一种独立于 IIS 托管应用程序的路径的方式来完成。

例如，我的应用程序可以托管在运行 IIS 的两台机器上的两条不同路径上；第一个可以在 举办，`/foo`第二个可以在`/bar`. 假设我的应用程序想要在第一台机器上设置路由，`/baz`我需要在第一台机器上配置路由，`/foo/baz`而在第二台机器上我必须使用`/bar/baz`这意味着复制 IIS 中保存的一些配置。

是否可以从 iisnode 托管的应用程序中可靠地计算出路径，以便我可以计算正确的设置路径？还是我可以使用另一种技术来避免这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:02:25.213

我不知道有一种方法可以避免在 iisnode 中托管的 node.js 应用程序中看到与虚拟目录相对应的路径段。确保您的应用程序代码与主机无关的最佳方法是将其托管在 IIS 网站的根目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:37:00.983

@GraemeF：这有点老套，但这就是我绕过这个限制的人。

首先，我在名为 home 的应用程序中添加了一个全局变量：

```
var express = require('express'),
    app = express.createServer(),
    home = process.env.deployPath || ''; 
```

然后，我使用 home 变量设置我的路线：

```
app.get(home + '/baz', function(req, res) {
    res.send('This is the /baz route');
    res.end();
}); 
```

然后，只需在您的应用程序 web.config 中设置 deployPath appSetting：

机器1：

```
<appSettings>
    <add key="deployPath" value="/foo" />
</appSettings> 
```

机器2：

```
<appSettings>
    <add key="deployPath" value="/bar" />
</appSettings> 
```

您可以在每台机器上手动设置值，让构建过程设置值，甚至将设置添加到目标机器的全局 web.config。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T11:46:28.523

[这个答案](https://stackoverflow.com/questions/15979904/iis-node-js-and-web-application-with-iisnode-not-configured-right)建议从`web.config`文件中获取路径。

此外，[此链接](http://rainabba.blogspot.co.uk/2013/11/how-to-run-iisnode-nodejs-for-iis-app.html)也可能会有所帮助：

> 事实证明，该解决方案得到了很好的解决，至少对于使用 app.use() 的“快速”框架应用程序而言
> 
> 当你调用 app.use(app.router) 时，你可以为你的虚拟目录传递一个命名空间前缀，然后请求将成功但是谁想要将他们的虚拟目录名称硬编码到他们的应用程序中 [yuck!]？
> 
> 解决方案非常简单，因为 IISNODE 将 appSettings 提升为环境变量。利用这一事实，您可以在应用程序 web.config 中添加一个条目，例如：

```
<appSettings>
        <add key="appvirtdir" value="/nodetest" />
</appSettings> 
```

> 然后你可以像这样对你的 server.js 文件做一个简单的修改：

```
app.configure(function () {
....
    app.use(process.env.appvirtdir || '', app.router);
....
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-16T04:17:24.780

express 和 restify 都允许使用正则表达式定义路径。通过使用正则表达式路径，您可以完全避免前缀问题。

代替

```
server.get({ path: '/virtual/directory/structure/status/',... 
```

利用

```
server.get({ path: /.*\/status/,... 
```

并且不需要任何魔法。

# android - 列表视图元素的附加项目

> ID：10540236
> 
> 赞同：0
> 
> 时间：2012-05-10T18:37:05.903
> 
> 标签：android, android-widget

我的 Android 应用程序中有一个列表视图。此列表视图的每个元素中显示的内容只是一个字符串。但对于应用程序逻辑，每个列表视图项需要有三个与之关联的字符串（名称、id、评级），但只有需要显示一个（名称）。因此，这个问题可以总结如下。

1- 每个列表视图元素由三个字符串组成 2- 只显示一个 3- 单击项目时所有字符串都应该可用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:50:04.990

创建一个新对象来包装您的数据，然后为您的数组适配器使用这些对象的列表：

```
public class MyObject {

      private final String name;
      private final int id;
      private final int rating;

      public MyObject(String name, int id, int rating){
             this.name = name;
             this.id = id;
             this.rating = rating;
      }

      public String getName(){
          return name;
      }

      public int getId(){
          return id;
      }

      public int getRating(){
          return rating;
      }

} 
```

在您的活动中创建您的列表：

```
MyObject myObject = new MyObject("Name" 123, 5);
MyObject mySecondObject = new MyObject("Name2" 124, 1);

List<MyObject> list = new ArrayList<MyObject>;
list.add(myObject);
list.add(mySecondObject); 
```

将此列表传递给您的阵列适配器一旦您在适配器中，您将使用 getView

以下是您应该做的大致内容：

```
@Override
public void getView(View v, int position){
   // ... something something
   MyObject anObject = (MyObject) list.get(position);

   v.setText(anObject.getName()); // This is the main point

   /// ... something something
   return v;
} 
```

# html - Facebook like 按钮下降了几个像素

> ID：10540240
> 
> 赞同：1
> 
> 时间：2012-05-10T18:37:23.407
> 
> 标签：html, css, facebook

我对 facebook 按钮布局有一点问题。

您会在我的网站 ( [http://develop.chaotix.nl](http://develop.chaotix.nl) ) 上看到 facebook 按钮的位置不佳。

解释了与此处相同的问题

[“Like”按钮的 4 像素偏移](https://stackoverflow.com/questions/7513009/4-pixel-offset-of-like-button)

当然，我尝试了解决方案，但没有任何效果（可能是因为 fb 更新了一些东西？）

我什么都试过了。你们有我的解决方案吗。

整个代码在网站上！我上传了一个文本文件。

*请将我的帖子编辑为正确的英文*

问候 Jochem*学生*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:43:22.937

如果您将以下内容放入您的CSS中，它将解决问题

```
.fb_edge_widget_with_comment {
    top: -4px;
    } 
```

这是一个快速修复，将为您完成这项工作。

# java - 根据iText中的大小或颜色从PDF中提取文本

> ID：10540242
> 
> 赞同：2
> 
> 时间：2012-05-10T18:37:24.390
> 
> 标签：java, pdf, itext, pdf-parsing

我有一些布局相似的 PDF 文件。

例如，它们的介绍部分具有相同的字体颜色和大小。

我想使用此文本属性信息从这些 PDF 文件中提取介绍部分，但我找不到任何方法。

例如，我将给出一个像#333333 这样的参数，它只从PDF 中返回#333333 颜色的文本。可能吗？

我使用 iText 库。

谢谢..

# c# - 查找和替换 HEX 字符串

> ID：10540243
> 
> 赞同：0
> 
> 时间：2012-05-10T18:37:25.607
> 
> 标签：c#, hex, replace

好的，我被困在这一点上......我想比较两个文件并将字符串从一个文件复制（替换）到另一个文件。

示例文件 1：

```
01cd74a8h: 65 00 00 00 54 45 53 54 00 00 00 00 00 00 00 00 ; e...TEST........
01cd74b8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd74c8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd74d8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd74e8h: 00 00 00 00 00 00 20 C5 00 00 00 00 00 00 20 C5 ; ...... ?..... ?
01cd74f8h: 00 00 20 45 00 00 00 00 00 00 20 45 01 00 00 00 ; .. E...... E....
01cd7508h: 00 00 00 00 00 00 00 00 C9 00 00 00 54 61 6D 20 ; ........?..Tam 
01cd7518h: 54 61 20 51 75 61 6E 00 00 00 00 00 00 00 00 00 ; Ta Quan.........
01cd7528h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd7538h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd7548h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20 45 ; .............. E
01cd7558h: 00 00 00 00 00 00 20 C5 00 00 F0 45 00 00 00 00 ; ...... ?.餎....
01cd7568h: 00 00 20 45 01 00 00 00 00 00 00 00 00 00 00 00 ; .. E............
01cd7578h: 2D 01 00 00 4C 69 65 75 20 43 68 69 6E 68 20 51 ; -...Lieu Chinh Q
01cd7588h: 75 61 6E 00 00 00 00 00 00 00 00 00 00 00 00 00 ; uan.............
01cd7598h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd75a8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd75b8h: 00 00 00 00 00 00 F0 C5 00 00 00 00 00 00 20 C5 ; ......鹋...... ?
01cd75c8h: 00 00 20 C5 00 00 00 00 00 00 20 45 01 00 00 00 ; .. ?..... E....
01cd75d8h: 00 00 00 00 00 00 00 00 91 01 00 00 56 6F 20 54 ; ........?..Vo T
01cd75e8h: 68 69 65 6E 20 43 61 63 20 31 00 00 00 00 00 00 ; hien Cac 1......
01cd75f8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd7608h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01cd7618h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 48 C4 ; ..............H?
01cd7628h: 00 00 00 00 00 00 48 C4 00 00 48 44 00 00 00 00 ; ......H?.HD....
01cd7638h: 00 00 48 44 00 00 00 00 10 CA 9A 3B 00 00 00 00 ; ..HD.....蕷;.... 
```

示例文件 2：

```
01b954a8h: 65 00 00 00 43 65 6E 74 72 61 6C 20 56 61 6C 6C ; e...Central Vall
01b954b8h: 65 79 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ey..............
01b954c8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b954d8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b954e8h: 00 00 00 00 00 00 20 C5 00 00 00 00 00 00 20 C5 ; ...... ?..... ?
01b954f8h: 00 00 20 45 00 00 00 00 00 00 20 45 01 00 00 00 ; .. E...... E....
01b95508h: 00 00 00 00 00 00 00 00 C9 00 00 00 48 69 6C 6C ; ........?..Hill
01b95518h: 20 56 61 6C 6C 65 79 00 00 00 00 00 00 00 00 00 ;  Valley.........
01b95528h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b95538h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b95548h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20 45 ; .............. E
01b95558h: 00 00 00 00 00 00 20 C5 00 00 F0 45 00 00 00 00 ; ...... ?.餎....
01b95568h: 00 00 20 45 01 00 00 00 00 00 00 00 00 00 00 00 ; .. E............
01b95578h: 2D 01 00 00 52 69 76 65 72 73 69 64 65 20 50 6C ; -...Riverside Pl
01b95588h: 61 69 6E 73 00 00 00 00 00 00 00 00 00 00 00 00 ; ains............
01b95598h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b955a8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b955b8h: 00 00 00 00 00 00 F0 C5 00 00 00 00 00 00 20 C5 ; ......鹋...... ?
01b955c8h: 00 00 20 C5 00 00 00 00 00 00 20 45 01 00 00 00 ; .. ?..... E....
01b955d8h: 00 00 00 00 00 00 00 00 91 01 00 00 46 6F 72 62 ; ........?..Forb
01b955e8h: 69 64 64 65 6E 20 54 6F 77 65 72 20 31 46 00 00 ; idden Tower 1F..
01b955f8h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b95608h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
01b95618h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 48 C4 ; ..............H?
01b95628h: 00 00 00 00 00 00 48 C4 00 00 48 44 00 00 00 00 ; ......H?.HD....
01b95638h: 00 00 48 44 00 00 00 00 10 CA 9A 3B 00 00 00 00 ; ..HD.....蕷;.... 
```

我想要做的是将 File1 与 File2 进行比较，以查看项目 ID 中是否有任何匹配项，并将 File2 的信息复制到 File1，仅当项目存在时。

项目 ID 在项目名称后面 4 个字节开始。

```
 01b954a8h: 65 00 00 00 43 65 6E 74 72 61 6C 20 56 61 6C 6C ; e...Central Vall
  01b954b8h: 65 79 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ey..............

  01b95508h: 00 00 00 00 00 00 00 00 C9 00 00 00 48 69 6C 6C ; ........?..Hill
  01b95518h: 20 56 61 6C 6C 65 79 00 00 00 00 00 00 00 00 00 ;  Valley......... 
```

在这里你可以看到“65 00”和“C9 00”分别是Central Valley和Hill Valley的ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:46:56.680

对我来说，不清楚为什么要在 Hex 中执行此操作。似乎您可以将其作为文本处理。

我的想法是，您应该考虑使用正则表达式来查找以空格分隔的单词并备份几个字符以获取 ID 字符（如果需要，可以将其转换为十六进制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:49:23.523

不是将项目加载到列表框中，而是将项目加载到两个 Dictionary 对象中（其中整数是项目的 ID，字符串是项目的描述。每个文件加载一个字典。然后比较字典中的项目，做任何事情您需要对一本字典进行修改，然后将其保存回文件中。

# android - Android 中的推送通知

> ID：10540247
> 
> 赞同：2
> 
> 时间：2012-05-10T18:37:37.103
> 
> 标签：android, android-c2dm

我把你作为我最后的手段。我相信，我已经阅读了关于如何在 android 中进行推送通知的每一个教程，但是每个教程都缺少一些东西或者它没有完全工作。

所以我想做的只是在状态栏中显示一个简单的通知，让用户知道应用程序中有新信息可用。

我认为正确的方法是 C2DM。我的问题是，我不知道如何在应用程序或服务器端实现它。

我不需要任何花哨的东西，只需要一个发出句子或其他东西的 php 脚本。还有一个代码片段放入我的应用程序中，以便它向服务器注册。我有自己的服务器，它为我的 iOS 推送提供服务，所以这里没有问题。

如果您能为我提供有关如何使其正常工作的分步教程，我将非常感激。

感谢您的提示，但我在此代码上遇到错误：

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");

        registrationIntent.putExtra("app", PendingIntent.getBroadcast(context, 0, new Intent(), 0));

        registrationIntent.putExtra("sender", "o.engelhardt@gmail.com");

        context.startService(registrationIntent); 
```

它说上下文无法解析为变量，但 tut 没有告诉我创建它或告诉我变量的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:41:39.513

我认为本教程会对您有所帮助。

[http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)

[https://developers.google.com/android/c2dm/#push](https://developers.google.com/android/c2dm/#push)

[http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#c2dm_sendmessage](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#c2dm_sendmessage)

本教程是关于使用 GCM 和 PHP 发送推送通知

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# javascript - 如何按时间顺序运行 mocha 测试？

> ID：10540254
> 
> 赞同：4
> 
> 时间：2012-05-10T18:38:13.723
> 
> 标签：javascript, unit-testing, node.js, asynchronous, mocha.js

我有一组基于全局事件发射器运行的模块。它们基于按时间顺序排列的事件链运行，如下所示：

1.  启动准备就绪
2.  服务器已创建（由于 boot.ready 事件）
3.  服务器配置（因为 server.created 事件）

因此，我需要创建一个按时间顺序执行测试的 server-test.js。

摩卡有可能吗？像下面这样的东西？

```
var EventEmitter2      = require('eventemitter2').EventEmitter2,
    should             = require('should');

describe('server', function() {

    var mediator = new EventEmitter2({
            wildcard: false
        });

    require('../../src/routines/server/creator')(mediator);
    require('../../src/routines/server/configurer')(mediator);

    it('should be created after boot', function(done) {
        mediator.once('server.created', function(server) {
            server.should.exist;
            done();
        });

        it('should be configured after created', function(done) {
            mediator.once('server.configured', function() {
                done();
            });
        });

        mediator.emit('boot.ready');
    });
}); 
```

因为这个全局事件发射器的工作方式似乎有些混乱，所以这是`server/creator.js`模块：

```
module.exports = function(mediator) {

    var express = require('express');

    mediator.once('boot.ready', function() {

        var server = express.createServer();

        //event: server created
        mediator.emit('server.created', server);

    });
}; 
```

如您所见，服务器是在`boot.ready`. 这将触发`server.created`，之后配置器将运行，然后将触发`server.configured`。

这一系列事件需要通过 mocha 进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:57:05.360

如果我正在测试一系列事件，那么快速的方法是嵌套 eventEmitter.once 调用，如下所示：

```
it('executes in the right sequence', function(done) {
  mediator.once('boot.ready', function() {
    mediator.once('server.created', function() {
      done()
    })
  })
}) 
```

编辑：正如所指出的 server.created 将在测试的 boot.ready 处理程序被触发之前被触发。这是一个解决方法：

```
it('executes in the right sequence', function(done) {
  var bootReadyFired = false
  mediator.once('boot.ready', function() {
    bootReadyFired = true
  })
  mediator.once('server.created', function() {
    assert.ok(bootReadyFired)
    done()
  })
}) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:47:29.280

实际上 mocha 使用`function.length`你的`it`回调来知道你是否想要它们异步，所以`function(done)`你不知道它们以什么顺序运行。`function()`没有 done 参数将同步运行它们。

**编辑**

您的调解器是一个 EventEmitter2，这意味着当您发出某些内容时，处理程序将异步运行。就像我说的那样，他们无法知道执行的顺序。

问题出在您所需的模块中，每个事件可能应该在前一个的处理程序中发出。代码胜于文字：

```
// require('../../src/routines/server/creator')(mediator);
// I guess this module creates the server, then it should emit server.created

// require('../../src/routines/server/configurer')(mediator)
// This one should listen to server.created then configure the server
// and finally emit server.configured
// So in it you should have something like this:

mediator.once('server.created', function(server) {

    // Here you should configure you're server
    // Once it is configured then you emit server.configured

}); 
```

此外，您应该知道在节点中发出是即时的，因此您最好在发出之前添加您的侦听器。

希望这很清楚。

# jquery - knockout.js：如何更新列表（调用服务器）作为用户更改的过滤器值

> ID：10540256
> 
> 赞同：0
> 
> 时间：2012-05-10T18:38:22.533
> 
> 标签：jquery, knockout.js, ko.observablearray

我有一个从服务器（AJAX + JSON）获取的项目列表，并过滤了这些项目的状态来过滤列表。我希望在更改过滤器值后立即更新列表（发布新的 Ajax 请求）。请帮忙

```
 <select data-bind="options: statuses, value: selectedStatus">
  ...
 <table>
   <tbody data-bind="foreach: items">
   ...
   </tbody>
 </table>

 function Model() {
      var self = this;
      self.items =  ko.observable();
      self.statuses = ko.observable();
      self.selectedStatus = ko.observable();
 } 
```

更新：其中一种方法是订阅 selectedStatus 模型内部的更改，如下所示：

```
self.SelectedStatus.subscribe(function () {
            $.getJSON(...)
}); 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:17:41.633

一种可能的方法是使用*[Computed Observables](http://knockoutjs.com/documentation/computedObservables.html)*

[简短的例子](http://jsfiddle.net/dmitry_zaets/QjHzf/4/)

因此，您可以在所选值更改时更新您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:54:35.843

orgonaize 更新的另一种方法 - 只需创建一个可计算的触发器，该触发器将调用将更新列表的函数

[查看示例](http://jsfiddle.net/dmitry_zaets/QjHzf/21/)

But I'm not sure that this is a best way.. I think *Subscribe* is most simple way, but dont forgot about loker for ajax request!

# google-maps - 如何找到谷歌地图地面覆盖的坐标？

> ID：10540259
> 
> 赞同：3
> 
> 时间：2012-05-10T18:38:30.210
> 
> 标签：google-maps, google-maps-api-3

我正在尝试开始使用 Google Maps API，但我发现文档令人难以置信的混乱。有谁知道如何找到地面覆盖图像的坐标？

我在这里复制了代码（https://developers.google.com/maps/documentation/javascript/overlays#GroundOverlays），并让它在我的网站上使用我的图像。但是当我尝试将坐标从纽瓦克更改为我的位置时，图像根本不会出现。我一直在猜测 imageBounds 的坐标，我猜这就是导致它不起作用的原因。非常感激任何的帮助。

这是我的代码（从示例中复制了 LatLng 坐标）：

```
 function initialize() {

  var newark = new google.maps.LatLng(40.740, -74.18);
  var imageBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(40.712216,-74.22655),
      new google.maps.LatLng(40.773941,-74.12544));

  var myOptions = {
    zoom: 13,
    center: newark,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var oldmap = new google.maps.GroundOverlay(
      "http://www.mcography.com/beta/Accessibility_Map.png",
      imageBounds);
  oldmap.setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:16:17.493

我使用 maps.google.com 实验室的 LatLng 标记和 LatLng 工具提示选项（链接在右栏中 - 底部）。一旦我接近它，我只需对我的 LatLng 数字进行一些小调整。

此外，您的 LatLngBounds 框看起来可能使用了错误的角。它应该是西南（左下）然后是东北（右上）。使用错误的角会产生不显示图像的效果。

# java - 如何解码文本

> ID：10540268
> 
> 赞同：0
> 
> 时间：2012-05-10T18:39:15.823
> 
> 标签：java, android

我从网络服务收到一个 Json 字符串，如下所示：

converte da voce a testo questa Ã¨ una prova di compressione

“Ã¨”在意大利语中必须是“è”。

如何在 Java 中解码为正确的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:01:54.237

看看这个 SO 答案。 [显示非 ASCII 字符](https://stackoverflow.com/a/4526618/786337)

# php - 仅获取 db 列名，用于使用 php 在动态表中显示

> ID：10540272
> 
> 赞同：1
> 
> 时间：2012-05-10T18:39:26.743
> 
> 标签：php, mysql, database, fetch

在下面的代码中，我从 db 表中搜索特定列并将它们放入 html 表中，为空 db 字段插入   以保持统一的结构。该部分工作正常，但我无法找出最佳方法来获取正在搜索的列名并在 html 表的最顶部动态显示它们一次？如果我的搜索发生变化，则 html 表上显示的列名将随之更改。我对 php/mysql 相当陌生，希望能得到任何帮助。

```
$result = mysql_query('SELECT part, ers, make, model, years, oe, core, inlet, outlet FROM parts LIMIT 3');
echo '<table>';
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo '<tr>';
    foreach ($row as $name => $value) {
        if ( $value == "" ) $value="&nbsp;";
        echo '<td> '.$value.' </td>'; 
    }
    echo '</tr>'; 
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:46:25.463

像这样的东西怎么样：

```
$result = mysql_query('SELECT part, ers, make, model, years, oe, core, inlet, outlet FROM parts LIMIT 3');
echo '<table>';

$cnt = 0;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    if ($cnt == 0) {
        $columns = array_keys($row);
        echo '<tr><th>' . implode('</th><th>', $columns) . '</th></tr>';
    }

    $cnt++;
    echo '<tr>';

    foreach ($row as $name => $value) {
        if ( $value == "" ) $value="&nbsp;";
        echo '<td> '.$value.' </td>'; 
    }

    echo '</tr>'; 
}

echo "</table>"; 
```

# css - 响应式 CSS - 多个文件只有一个工作

> ID：10540273
> 
> 赞同：-1
> 
> 时间：2012-05-10T18:39:29.053
> 
> 标签：css, html, responsive-design

我正在努力使我当前的设计具有响应性。我开始使用`@media screen...`，但设计中的任何内容都不会改变。我尝试使用`html, div, p, a, li, td { -webkit-text-size-adjust: none; }`来查看这是否至少有助于字体更改大小（我正在使用 em），但没有任何改变。

然后我切换到`<link type="text/css"...`. 我目前在我的 HTML 文档中链接了 3 个媒体查询文件，并且我正在使用 HTML5/CSS3。

我的问题是：为什么文档只引用第一个文件？我取出了核心样式表，只使用了直接目标表，看看这是否会阻止它只使用第一个样式表，但它没有。字体没有调整大小。容器不会调整大小。图像不会调整大小或删除。只有第一个样式表被引用 - 其他的被忽略。

这些是我当前的链接样式表：

```
<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 1280px)" href="scripts/css/style.css" />

<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 800px)" href="scripts/css/style800.css" />

<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="scripts/css/style1024.css" /> 
```

编辑：样式表确实从一个更改到另一个，但样式本身不会更改。就像 1280 样式表用它的样式覆盖了所有其他样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:59:53.980

你如何调试它们？尝试调整浏览器的大小，这些应该可以工作。另外，我真的不建议用800px，iPad也会掉进去，你最好用767。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:46:51.497

也许您正在寻找最大宽度而不是最大设备宽度？

前者用于显示区域，例如浏览器，后者是实际的设备区域。

此外，您希望将最小的一个（在您的情况下为 800px）放在最后。

试试这个：

```
<link rel="stylesheet" media="only screen and (min-device-width: 1280px)" href="scripts/css/style.css" />
<link rel="stylesheet" media="only screen and (max-width: 1024px)" href="scripts/css/style1024.css" />
<link rel="stylesheet" media="only screen and (max-width: 800px)" href="scripts/css/style800.css" /> 
```

# c++ - 使用 boost::interprocess 编译的链接器错误

> ID：10540276
> 
> 赞同：3
> 
> 时间：2012-05-10T18:39:35.597
> 
> 标签：c++, boost, linker-errors, undefined-reference, boost-interprocess

我编写了一个小程序，它将 boost::interprocess::container 字符串写入共享内存并从中读取另一个。

我收到以下链接器错误：

```
g++ SharedMemTest.cpp -L /usr/lib/x86_64-linux-gnu/librt.a
/tmp/cc5v7WKj.o: In function `boost::interprocess::detail::mutexattr_wrapper::mutexattr_wrapper(bool)':
SharedMemTest.cpp:(.text._ZN5boost12interprocess6detail17mutexattr_wrapperC2Eb[_ZN5boost12interprocess6detail17mutexattr_wrapperC5Eb]+0x1c): undefined reference to `pthread_mutexattr_init'
SharedMemTest.cpp:(.text._ZN5boost12interprocess6detail17mutexattr_wrapperC2Eb[_ZN5boost12interprocess6detail17mutexattr_wrapperC5Eb]+0x31): undefined reference to `pthread_mutexattr_setpshared'
SharedMemTest.cpp:(.text._ZN5boost12interprocess6detail17mutexattr_wrapperC2Eb[_ZN5boost12interprocess6detail17mutexattr_wrapperC5Eb]+0x4c): undefined reference to `pthread_mutexattr_settype'
/tmp/cc5v7WKj.o: In function `boost::interprocess::detail::mutexattr_wrapper::~mutexattr_wrapper()':
SharedMemTest.cpp:(.text._ZN5boost12interprocess6detail17mutexattr_wrapperD2Ev[_ZN5boost12interprocess6detail17mutexattr_wrapperD5Ev]+0x14): undefined reference to `pthread_mutexattr_destroy'
/tmp/cc5v7WKj.o: In function `boost::interprocess::shared_memory_object::priv_open_or_create(boost::interprocess::detail::create_enum_t, char const*, boost::interprocess::mode_t, boost::interprocess::permissions const&)':
SharedMemTest.cpp:(.text._ZN5boost12interprocess20shared_memory_object19priv_open_or_createENS0_6detail13create_enum_tEPKcNS0_6mode_tERKNS0_11permissionsE[boost::interprocess::shared_memory_object::priv_open_or_create(boost::interprocess::detail::create_enum_t, char const*, boost::interprocess::mode_t, boost::interprocess::permissions const&)]+0xe0): undefined reference to `shm_open'
SharedMemTest.cpp:(.text._ZN5boost12interprocess20shared_memory_object19priv_open_or_createENS0_6detail13create_enum_tEPKcNS0_6mode_tERKNS0_11permissionsE[boost::interprocess::shared_memory_object::priv_open_or_create(boost::interprocess::detail::create_enum_t, char const*, boost::interprocess::mode_t, boost::interprocess::permissions const&)]+0x116): undefined reference to `shm_open'
SharedMemTest.cpp:(.text._ZN5boost12interprocess20shared_memory_object19priv_open_or_createENS0_6detail13create_enum_tEPKcNS0_6mode_tERKNS0_11permissionsE[boost::interprocess::shared_memory_object::priv_open_or_create(boost::interprocess::detail::create_enum_t, char const*, boost::interprocess::mode_t, boost::interprocess::permissions const&)]+0x16c): undefined reference to `shm_open'
SharedMemTest.cpp:(.text._ZN5boost12interprocess20shared_memory_object19priv_open_or_createENS0_6detail13create_enum_tEPKcNS0_6mode_tERKNS0_11permissionsE[boost::interprocess::shared_memory_object::priv_open_or_create(boost::interprocess::detail::create_enum_t, char const*, boost::interprocess::mode_t, boost::interprocess::permissions const&)]+0x1c0): undefined reference to `shm_open'
/tmp/cc5v7WKj.o: In function `boost::interprocess::shared_memory_object::remove(char const*)':
SharedMemTest.cpp:(.text._ZN5boost12interprocess20shared_memory_object6removeEPKc[boost::interprocess::shared_memory_object::remove(char const*)]+0x40): undefined reference to `shm_unlink' 
```

我还尝试与以下链接：

```
g++ -c SharedMemTest.cpp
g++ -L /usr/lib/x86_64-linux-gnu/librt.a SharedMemTest.o -o SharedMemTest 
```

但是这些命令都不起作用。有人可以告诉我如何编译这个简单的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:26:15.810

to 的参数`-L`应该是一个目录，但你在它后面放了一个库文件名。你可能的意思是`-l rt`。其他人已经建议`-l pthread`，您也可以用来`-pthread`链接到 pthreads 库。

# android - Android 上的条码实现

> ID：10540279
> 
> 赞同：-1
> 
> 时间：2012-05-10T18:39:41.987
> 
> 标签：android, android-camera, barcode

我想制作一个 Android 应用程序，它使用相机为产品的条码拍照以获取条码的数量，但我在实现时遇到了一些问题。

主要问题是如何在不使用任何外部应用程序的情况下使用相机拍照以识别此条码的 id。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:42:50.590

您应该尝试 Zxing 库，该库包含条形码扫描功能。

这里：[http ://code.google.com/p/zxing/downloads/list](http://code.google.com/p/zxing/downloads/list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:44:19.750

为什么不使用外部应用程序？这就是 Android 应用程序的强大之处——它们可以使用彼此的功能，这些功能在它们的应用程序中得到了完美的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:18:00.257

是的，你应该使用 zxing 工具，这是一个开源工具，你也可以在你的代码中使用，这里：[http](http://code.google.com/p/zxing/) ://code.google.com/p/zxing/downloads/list 。从主站点下载源代码并查看手册，它也会为您提供说明

# windows - 在哪里可以找到 kernel32.dll 支持的 api？

> ID：10540280
> 
> 赞同：2
> 
> 时间：2012-05-10T18:39:44.770
> 
> 标签：windows, kernel32

在哪里可以找到 kernel32.dll 中提供的所有功能？[我可以在这里](http://www.astercity.net/~azakrze3/html/win32_api_functios.html)找到一些功能，但我不知道该网站的真实性如何。是否有一个真实的网站列出了所有可用功能和适当的文档。我在网上搜索但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:52:23.307

为什么你特别想了解 kernel32.dll 中的函数？由于遗留原因，dll 仍然是许多 windows api 功能的入口点，但 windows API 现在远远大于 Windows 3.x 提供的 3 个子系统（内核、用户和 gdi）。

MSDN 中的[系统服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663297%28v=vs.85%29.aspx)部分涵盖了从 kernel32.dll 导出的 API 等等。

* * *

由于 MSDN 不再仅在单个列表中记录 Kernel32 导出，您可以使用[DumpBin](http://support.microsoft.com/kb/177429)提取所有导出的列表...然后在 MSDN 上搜索该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:59:20.717

我找到了这个链接 -

[http://download.microsoft.com/download/2/E/9/2E911956-F90F-4BFB-8231-E292A7B6F287/GRMSDK_EN_DVD.iso](http://download.microsoft.com/download/2/E/9/2E911956-F90F-4BFB-8231-E292A7B6F287/GRMSDK_EN_DVD.iso)

这是微软的官方文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T04:09:04.387

kernel32 中可用的功能随 Windows 版本而变化。添加了新功能，并且每个版本都删除了一些功能。

如果您想在您的机器上获得一个规范列表，请启动 Depends.exe（随 Windows SDK 提供）并将 kernel32.dll 加载到其中。所有内核 API 都作为导出在 Kernel32 上实现。

给定函数名称，请访问 msdn.microsoft.com 上的 MSDN 文档。这是记录所有 Microsoft 官方 Windows API 的官方站点。

# java - GAE - 删除对象后列表不存在（DataNucleus 和 JDO）

> ID：10540284
> 
> 赞同：2
> 
> 时间：2012-05-10T18:39:54.620
> 
> 标签：java, google-app-engine, jdo, datanucleus

我有一个实体，我的一个属性是一个对象的 ArrayList，它是序列化的。我正在尝试删除列表中的一个元素并保留该实体。在本地一切正常，但在部署时却不行。

我的代码：

```
@Inject
public Repository<User> userRepo;
...
Leader leader = (Leader) item.getModelObject();
...
MySession.get().getUser().getLeaders().remove(leader);
JDOHelper.makeDirty(MySession.get().getUser(), "leaders");
userRepo.persist(MySession.get().getUser()); 
```

用户实体中的属性定义：

```
@Persistent(defaultFetchGroup = "true", serialized = "true")
@Extension(vendorName = "datanucleus", key = "gae.unindexed", value = "true")
private ArrayList<Leader> leaders = new ArrayList<Leader>(); 
```

我正在使用 datanucleus-core 版本 1.1.6、jdo2-api 2.3-eb 和 datanucleus-appengine 1.0.10

当我向列表中添加新项目时它可以正常工作，但当我删除某些内容时它不能正常工作 - 为什么会这样？我怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:41:18.450

把东西弄脏了就弄脏了，仅此而已；在...开始下一个事务（根据 JDO/JPA 规范）或关闭 PM/EM 之后发生持久/刷新；没有调用 makePersistent/persist 会改变这一点。这不是 DataNucleus “自己决定”不持久化一个对象，它只是遵循规范。

如果您使用最新的 GAE 版本 (v2.0)，您可以拥有非事务性原子持久/删除（对规范的扩展）。如果您使用 SVN 中继（v2.1），您还可以进行非事务性原子更新（进一步扩展）。即使用最新的代码，你有相当于 JDBC“自动提交”

# c - 在 hudson 上运行的 cUnit 测试

> ID：10540289
> 
> 赞同：2
> 
> 时间：2012-05-10T18:40:09.023
> 
> 标签：c, unit-testing, hudson, cunit

我正在hudson中寻找一些运行单元测试的插件，我在构建任务和CMake构建后得到两个名称，但是通过描述创建任何人来运行单元测试，我想要一些关于帮助我实现这一目标的工具的指示，或一些教程或链接，使这两个工具之一像我的情况预期的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:12:13.327

Hudson（或者最好是[Jenkins](http://jenkins-ci.org)，更积极地维护和改进）本身没有运行单元测试的插件 - 你通常会在构建脚本中这样做。我认为 Cmake 构建会在你的情况下处理它，例如“cmake test”

您需要查看一个单元测试框架，该框架可以与您的代码编写的语言一起使用——Java 的 JUnit 或 TestNFG、C/C++ 的 CPPUnit、.NET 的 NUnit 等。

Hudson / Jenkins 确实有可以记录单元测试结果的[插件——xUNit 插件](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)是一个很好的通用示例。

# python - 如何获取未来导入的 print() 函数的 Python 2.6 文档？

> ID：10540294
> 
> 赞同：2
> 
> 时间：2012-05-10T18:40:26.483
> 
> 标签：python, printing, pydoc

我使用带有新`print()`功能的 Python 2.6：

```
from __future__ import print_function 
```

现在，我怎样才能`pydoc`打印该功能的文档？一个简单的

```
$ pydoc print 
```

将打印有关 2.6 版打印功能的文档。

（不用说，我可以在网上找到文档，但我希望能够在命令行上使用 pydoc 访问它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:02:33.553

不幸的是，没有捷径：

```
$ python -c 'from __future__ import print_function; help(print)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T20:08:54.373

这可能不是您想要的，但在我的系统上，我可以这样做`pydoc3.2 print`，因为我同时安装了 python 2.6 和 python 3.2...

# python - 从文本表示重建 Python 对象

> ID：10540300
> 
> 赞同：3
> 
> 时间：2012-05-10T18:41:01.280
> 
> 标签：python, object

当它们`repr`在屏幕上出现时，是否可以从 python 对象的表示文本创建一个对象？

```
>>> select.select([s], [],[])
([<socket._socketobject object at 0x7f274914c600>], [], [])
>>> eval('<socket._socketobject object at 0x7f274914c600>') # Fail 
```

或者一旦对象被表示为标准输出，它会得到 GCd 吗？

用处不大，但在使用 Python CLI 时，它可能偶尔会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:42:36.137

的输出`repr`可能能够重建对象，但惯例是，如果它的位被尖括号包围，那么这些位是不可重建的。

因此，在这种情况下，您无法重建套接字，是的，它将立即被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:43:17.250

它不是，因为显然文本呈现不一定包含对象的所有信息。

如果您想使用类似文本的对象表示，请尝试 JSON 模块。

[http://docs.python.org/library/json.html?highlight=json#json](http://docs.python.org/library/json.html?highlight=json#json)

另请注意，此演示文稿中封装的对象不能具有本机对象绑定，如套接字、文件句柄等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T18:54:49.703

鼓励您创建`repr`允许您通过粘贴输出来创建新对象的对象`repr`，但这不是严格执行的。根据对象的性质和任何内部结构，这也可能不是一件容易做到的事情。

有很多方法可以做到这一点。这是一种方法的非常简单的示例：

```
class ReprObject(object):
    def __init__(self, value, item):
        self.value = value
        self.item = item

    def __repr__(self):
        return '%s(**%r)' % (self.__class__.__name__, self.__dict__) 
```

然后我们把它带到交互式解释器并创建一个实例：

```
>>> r = ReprObject(value=1, item=True)
>>> r
ReprObject(**{'item': True, 'value': 1}) 
```

现在复制/粘贴它`repr`并使用它来创建一个新对象：

```
>>> r2 = ReprObject(**{'item': True, 'value': 1})
>>> r2
ReprObject(**{'item': True, 'value': 1}) 
```

并且`eval()`也可以工作：

```
>>> eval(repr(r2))
ReprObject(**{'item': True, 'value': 1}) 
```

# jquery - 将随机背景颜色应用于多个 DIV

> ID：10540301
> 
> 赞同：5
> 
> 时间：2012-05-10T18:41:19.677
> 
> 标签：jquery, html, css, background-color

我在页面上有一系列 DIV（每个都有相同的类）。在加载时，我想随机化每个 DIV 的颜色。

我想为给定的 DIV 选择一种颜色，然后为下一个 DIV 选择一种颜色，依此类推。

我发现这篇文章：[将随机颜色单独应用于类元素？](https://stackoverflow.com/questions/1535128/apply-random-color-to-class-elements-individually)

我不懂 jquery，但是我已经开始更改代码以反映我正在使用的类的名称：

```
$(document).ready(function() {
$('.main').each(function () {
    var hue = 'rgb(' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ')';
    $(.jump-response).css("background-color", hue);
});
}); 
```

进一步的帮助将不胜感激！

--

此处的代码示例：http: [//jsfiddle.net/ollyf/LmwYP/](http://jsfiddle.net/ollyf/LmwYP/)

而且我还应该添加来自预设/预定颜色列表的随机背景颜色。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T18:45:12.733

我不知道您的 html，但假设您的 div 定义如下。

```
<div class="jump-response">one</div>
<div class="jump-response">two</div> 
```

代码中的主要问题是如何选择元素。

## 1.解决方案

```
$(function() {
    $(".jump-response").each(function() {
        var hue = 'rgb(' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ')';
         $(this).css("background-color", hue);
    });
}); 
```

### [jsFiddle 演示](http://jsfiddle.net/r74j6/5/)

## 2.解决方案

您可以使用以下函数来获取随机颜色

```
function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
} 
```

并使用

```
$(".jump-response").each(function() {
    $(this).css("background-color", get_random_color());
}); 
```

### [jsFiddle 演示](http://jsfiddle.net/r74j6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:49:41.590

尝试这个

```
$(document).ready(function() {
  $('.jump-response').each(function () {
      var hue = 'rgb(' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ')';
      $(this).css("background-color", hue);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:44:26.697

我相信你只需要在周围添加引号`.jump-response`

```
$(".jump-response").css("background-color", hue); 
```

此外，您正在使用“main”类遍历所有元素，但随后对该元素不做任何事情，所以我认为您可以删除循环代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-04T11:45:37.030

要按需获取 div 的随机颜色，请将其设为浏览器上的书签：

```
javascript:jQuery("div").each(function() {var hue = 'rgb(' + (Math.floor((256 - 199) * Math.random()) + 200) + ',' + (Math.floor((256 - 199) * Math.random()) + 200) + ',' + (Math.floor((256 - 199) * Math.random()) + 200) + ')';jQuery(this).css("background-color", hue);}); 
```

书签需要开头的“javascript:”（不带引号），否则就是 jQuery。

# c# - 无论参数类型如何，如何按参数化类型进行过滤？

> ID：10540303
> 
> 赞同：3
> 
> 时间：2012-05-10T18:41:21.533
> 
> 标签：c#, templates, reflection

我想知道一个类型是否是 IQueryable。

```
var t = typeof(IQueryable<int>);
bool isQueryable = (t is IQueryable); // false
bool isAssignableFrom = t.IsAssignableFrom(typeof(IQueryable)); // false
bool nameStartsWithIQueryable = t.Name.StartsWith("IQueryable"); // true 
```

第三种方法 - 查看类型名称的开头 - 有效，但感觉就像一个 hack。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:43:27.803

使用`GetGenericTypeDefinition`：

```
bool isQueryable = t.GetGenericTypeDefinition() == typeof(IQueryable<>); 
```

如果您需要处理更深层次的祖先（您正在检查 aganist 基类型），您可以编写一个辅助方法：

```
public static bool IsType(Type type, Type ancestor)
{
    while (type != null)
    {
        if (type.IsGenericType)
            type = type.GetGenericTypeDefinition();
        if (type == ancestor)
            return true;
        type = type.BaseType;
    }
    return false;
} 
```

像这样称呼它：

```
bool isQueryable = IsType(typeof(IQueryable<int>), typeof(IQueryable<>)); 
```

`Type.GetInterfaces`（请注意，这对实现其他接口的基类型没有帮助，因为对此进行检查需要递归使用更多代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:15:42.360

你只是有`IsAssignableFrom`倒退，它应该是：

```
typeof(IQueryable).IsAssignableFrom(t); 
```

我更喜欢在一般情况下使用 IsAssignableFrom ，因为当您不处理接口时， IsAssignableFrom 会告诉您是否将类作为隐式用户定义的转换运算符。另外，您不必处理类型层次结构等......

# regex - Grep 模式匹配用双引号括起来的小写字符串

> ID：10540305
> 
> 赞同：9
> 
> 时间：2012-05-10T18:41:30.707
> 
> 标签：regex, string, grep

我对 grep 有点问题，我似乎无法弄清楚。我正在尝试在一组源文件中搜索用双引号（C 字符串）括起来的所有小写单词实例。使用 bash 和 gnu grep：

```
grep -e '"[a-z]+"' *.cpp 
```

不给我火柴，而

```
grep -e '"[a-z]*"' *.cpp 
```

给我像“Abc”这样的匹配，而不仅仅是小写字符。什么是仅匹配“abc”的正确正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T18:50:04.070

您忘记转义元字符。

```
grep -e '"[a-z]\+"' 
```

对于第二部分，它匹配多写字符的原因是因为您的语言环境。如下：

```
$ echo '"Abc"' | grep -e '"[a-z]\+"'
"Abc"
$ export LC_ALL=C
$ echo '"Abc"' | grep -e '"[a-z]\+"'
$ 
```

要获得“ascii-like”行为，您需要将您的语言环境设置为“C”，如 grep 手册页中所述：

> 在方括号表达式中，范围表达式由两个用连字符分隔的字符组成。它使用区域设置的整理顺序和字符集匹配在两个字符之间排序的任何单个字符，包括两个字符。例如，在默认的 C 语言环境中，[ad] 等效于 [abcd]。许多语言环境按字典顺序对字符进行排序，在这些语言环境中，[ad] 通常不等同于 [abcd]；例如，它可能等同于 [aBbCcDd]。要获得括号表达式的传统解释，可以通过将 LC_ALL 环境变量设置为值 C 来使用 C 语言环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:47:39.543

屏蔽 +

```
grep -e '"[a-z]\+"' *.cpp 
```

或使用 egrep：

```
egrep  '"[a-z]+"' *.cpp 
```

也许你有 -E 的想法：

```
grep -E '"[a-z]+"' *.cpp 
```

例如，小写字母 -e 用于指定多个搜索模式。

大写字符的现象可能来自您的语言环境 - 您可以通过以下方式防止：

```
LC_ALL=C egrep  '"[a-z]+"' *.cpp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:49:15.427

您可能需要转义`+`：

```
grep -e '"[a-z]\+"' *.cpp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T10:08:05.780

如果您不想弄乱语言环境，这对我有用：

```
grep -e '"[[:lower:]]\+"' 
```

# haml - HAML - 如何创建使浏览器返回按钮的路径？

> ID：10540308
> 
> 赞同：1
> 
> 时间：2012-05-10T18:41:36.463
> 
> 标签：haml

我目前有一个这样的按钮：

```
= button_to "Go Back" , mobile_disclosures_url , :method => :get 
```

但是我不确定要给它什么路径才能使浏览器返回。有什么帮助吗？:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:48:46.477

您必须将 JS 用于基于浏览器的真实向后导航。

```
= button_to "Go Back", '#', :onclick => 'history.back(); return false;' 
```

从记忆中，我认为适用于`button_to`，但它绝对应该适用于`link_to`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T06:09:21.770

```
=link_to "Go Back", :back 
```

它会将链接设置为 REFERER 标头

# xml - 如何将 XML 节点分成单独的页面并添加链接或导航栏来访问每个页面？

> ID：10540311
> 
> 赞同：0
> 
> 时间：2012-05-10T18:41:56.147
> 
> 标签：xml, xslt

我对如何使用单个 XML 文件执行此操作感到困惑。例如，我想去*蓝页*，我会点击蓝色的超链接，然后会被定向到*“这个页面是蓝色的”。*有没有办法在不使用绑定的情况下做到这一点？

**XML 文件**

```
<Colors>
   <Color>
       <description>
           <p>This page is red.</p>
       </description>
   </Color>
   <Color>
       <description>
           <p>This page is blue.</p>
       </description>
   </Color>
   <Color>
       <description>
           <p>This page is green.</p>
       </description>
   </Color>
<Colors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:46:55.977

您可以使用颜色节点上的属性来表示它的颜色。使用 linq 查找其属性具有单击的超链接目标名称的节点，并提供该节点的描述。

# python - Python：输出中的拉丁字符问题

> ID：10540314
> 
> 赞同：0
> 
> 时间：2012-05-10T18:42:10.487
> 
> 标签：python, diacritics

我有一份西班牙语文档，我想使用 Python 进行格式化。问题是在输出文件中，重音字符被弄乱了，以这种方式：\xc3\xad。不久前，当我进行了一些类似的编辑时，我成功地保留了正确的角色，尽管我已经尝试了我当时所做的一切以及更多，但不知何故，这次它不起作用。这是当前版本的代码：

```
# -*- coding: utf-8 -*- 

import re
import pickle

inputfile = open("input.txt").read()

pat = re.compile(r"(@.*\*)")

mylist = pat.findall(inputfile)

outputfile = open("output.txt", "w")

pickle.dump(mylist, outputfile)

outputfile.close() 
```

我在 Windows 7 上使用 Python 2.7。任何人都可以看到任何明显的问题吗？输入文件以 utf-8 编码，但我也尝试过将其编码为 latin-1。谢谢。

澄清一下：我的问题是拉丁字符在输出中没有正确显示。现在已经解决了，我只需要按照 mata 的建议添加这一行：

```
inputfile = inputfile.decode('utf-8') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:53:37.143

如果输入文件编码为`utf-8`，那么您应该`decode`首先使用它：

```
import re
import pickle

inputfile = open("input.txt").read()
inputfile = inputfile.decode('utf-8')

pat = re.compile(r"(@.*\*)")

mylist = pat.findall(inputfile)

outputfile = open("output.txt", "w")

pickle.dump(mylist, outputfile)

outputfile.close() 
```

如此创建的文件将包含您列表的腌制版本。如果您宁愿拥有一个人类可读的文件，那么您可能只想使用一个普通文件。
处理不同编码的一个好方法是使用该`codecs`模块：

```
import re
import codecs

with codecs.open("input.txt", "r", "utf-8") as infile:
    inp = infile.read()

pat = re.compile(r"(@.*\*)")
mylist = pat.findall(inp)

with codecs.open("output.txt", "w", "utf-8") as outfile:
     outfile.write("\n".join(mylist)) 
```

# android - TimePicker 小部件没有获取当前时间

> ID：10540315
> 
> 赞同：1
> 
> 时间：2012-05-10T18:42:12.203
> 
> 标签：android, keyboard, timepicker

这个问题是关于 Android 中的 TimePicker 行为。

要获取小时和分钟的值，我使用 getCurrentHour() 和 getCurrentMinute()。

起初，我发现用户使用未注册的电话键盘所做的更改，因此调用 getCurrentHour() 或 getCurrentMinute() 并没有显示小部件内 texboxes 中更改的值。使用 setAddStatesFromChildren(true) 很快解决了这个问题；有了这个，我得到了这些变化。

现在，我的问题是，只有在 timepicker 失去焦点时才会注册这些更改。因此，从按钮内的 timepicker 获取值会得到错误的值，因为它没有失去焦点。有什么帮助吗？

我需要的是：我可以强迫时间选择器放松焦点并在文本框中获得真正的书面价值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:08:27.003

我解决了它，并在这里为需要它的人写了它。感谢“Tarun Maheshwari”，我找到了我需要的东西：

在 onCreate 上做这样的事情：

```
MyTimerPicker.setAddStatesFromChildren(true); 
```

在 onClick 方法上，获取值时，执行以下操作：

```
MyTimerPicker.clearFocus();
int iHour = MyTimerPicker.getCurrentHour();
int iMinute = MyTimerPicker.getCurrentMinute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:18:17.630

获得 onTimeChanged 回调后，在 timepicker 视图上调用 clearFocus()。

# yahoo-finance - 从雅虎为应用程序图表和雅虎图表加载的错误数据

> ID：10540316
> 
> 赞同：-1
> 
> 时间：2012-05-10T18:42:14.513
> 
> 标签：yahoo-finance

我有一个使用雅虎股票数据购买的应用程序。它适用于除 ^ndx 之外的大多数股票代码。它在 2012 年 1 月 9 日至 2012 年 1 月 10 日的数据中有一个跳跃，从那里向后是错误的，即显示的价格与正确数据相比太高了。

当我直接在雅虎图表中使用相同的符号时，同样的事情！但是从yahoo下载的历史数据是正确的！

我已经与该应用程序的开发人员进行了交谈，他说他没有这个问题。他将雅虎的 IOS 数据用于他的应用程序。

什么可以解释这些相互矛盾的结果。

哦，如果我调出一个新的应用程序副本，或者在它已经放在那里一段时间之后，同一个股票代码的数据看起来不错！但是雅虎图表总是很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:02:15.267

看这个：

[http://ichart.finance.yahoo.com/b?s=%5endx](http://ichart.finance.yahoo.com/b?s=%5endx)

%5E 是一个插入符号编码。

# mysql - MySQL中整数括号中的属性的目的是什么？

> ID：10540326
> 
> 赞同：1
> 
> 时间：2012-05-10T18:42:59.880
> 
> 标签：mysql, sql, types

根据文档，括号中的属性（例如 SMALLINT(3) 中的“3”）应该将 SMALLINT 的值的显示限制为三位数。但是，当我插入五个测试数字（9、99、999、9999、99999）时，它会取每个数字的全部值，而不是将其限制在三位数字上并相应地显示（当然，除了 99999，它上限为 32767）。至少在显示时，数字不应该被限制为三位数吗？还是我错过了这里的真正目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:47:21.000

如[手册](http://dev.mysql.com/doc/en/data-types.html)所述：

> ***`M`***表示整数类型的最大显示宽度。对于浮点和定点类型，***`M`***是可以存储的总位数（精度）。对于字符串类型，***`M`***是最大长度。的最大允许值***`M`***取决于数据类型。

此外，如此[处](http://dev.mysql.com/doc/en/numeric-type-attributes.html)所述：

> MySQL 支持扩展，用于在类型的 base 关键字后面的括号中可选地指定整数数据类型的显示宽度。例如，[`INT(4)`](http://dev.mysql.com/doc/en/integer-types.html)指定[`INT`](http://dev.mysql.com/doc/en/integer-types.html)显示宽度为四位的 an。应用程序可以使用这个可选的显示宽度来显示宽度小于为列指定的宽度的整数值，方法是用空格向左填充它们。（也就是说，这个宽度存在于与结果集一起返回的元数据中。是否使用它取决于应用程序。）
> 
> 显示宽度不*限制*可以存储在列中的值的范围。它也不会阻止正确显示比列显示宽度更宽的值。例如，指定为 as 的列[`SMALLINT(3)`](http://dev.mysql.com/doc/en/integer-types.html)的通常[`SMALLINT`](http://dev.mysql.com/doc/en/integer-types.html)范围为`-32768`to `32767`，超出三位数字允许的范围的值将使用三位以上的数字完整显示。
> 
> 当与可选（非标准）属性结合使用时`ZEROFILL`，空格的默认填充将替换为零。例如，对于声明为 的列，检索[`INT(4) ZEROFILL`](http://dev.mysql.com/doc/en/integer-types.html)的值为。`5``0005`
> 
> > **注意**当列涉及表达式或查询时，将忽略
> > 该属性。`ZEROFILL`[`UNION`](http://dev.mysql.com/doc/en/union.html)
> > 
> > 如果您在具有该属性的整数列中存储大于显示宽度的值`ZEROFILL`，当 MySQL 为某些复杂的连接生成临时表时，您可能会遇到问题。在这些情况下，MySQL 假定数据值适合列显示宽度。
> 
> 所有整数类型都可以有一个可选（非标准）属性`UNSIGNED`。无符号类型可用于在列中仅允许非负数，或者当您需要该列的较大数值范围时。例如，如果一[`INT`](http://dev.mysql.com/doc/en/integer-types.html)列是`UNSIGNED`，则该列范围的大小是相同的，但它的端点从`-2147483648`和`2147483647`向上移动到`0`和`4294967295`。
> 
> 浮点和定点类型也可以是`UNSIGNED`. 与整数类型一样，此属性可防止将负值存储在列中。与整数类型不同，列值的上限保持不变。
> 
> 如果您`ZEROFILL`为数字列指定，MySQL 会自动将该`UNSIGNED`属性添加到该列。
> 
> 整数或浮点数据类型可以具有附加属性`AUTO_INCREMENT`。当您将值`NULL`（推荐）或`0`插入索引`AUTO_INCREMENT`列时，该列将设置为下一个序列值。通常这是，其中 value 是表中当前列的最大值。序列以.***`value`***`+ 1`***`value`***`AUTO_INCREMENT``1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:56:17.080

对于整数类型，该属性与显示宽度有关，并且只有在将 zerofill 添加到列创建语句时才能看到。

显示宽度不影响分配给列的存储空间，仅在启用 zerofill 时填充显示。

另请参阅此说明： http: [//matthom.com/archive/2006/11/28/mysql-integer-columns-and-display-width](http://matthom.com/archive/2006/11/28/mysql-integer-columns-and-display-width)

# sql - 查找从 VB.net 应用程序中使用的表以删除未使用的表

> ID：10540327
> 
> 赞同：2
> 
> 时间：2012-05-10T18:43:09.723
> 
> 标签：sql, database, vb.net, winforms

我们目前正在开发一个应用程序，我们称之为它`APP1`，它使用一个 SQL 数据库，它有大约 800 个存储过程，600 个表等`APP1`，最初是为了替换另一个应用程序，`APP0`我们没有源代码，只有 SQL表、存储过程、视图等。以前的程序员`APP1`使用同一个数据库中的一些 DB 对象并添加了一些特定于的其他对象，`APP1`因为它变得比`APP0`. 而且我们不再需要`APP0`我们`APP1`想要的所有东西，甚至更多。

所以，现在，我们正在考虑一种方法来找出哪些对象被使用`APP1`，以便删除**仅**由`APP0`.

`APP1`在不必打开每个类和表单的情况下发现所有对象的最佳方法是什么？

一旦我们有了这些对象的完整列表，就可以很容易地使用我们购买的程序来检测直接从 SQL 指定的所有 SQL 对象的所有依赖关系，并删除不从任何依赖关系返回的对象。有什么想法可以让我得到这个列表，而不必经历我们所有有很多很多类和表单的程序？

谢谢，

注意：我知道，在一个完美的世界里，所有对 PS 和表的调用都应该在 DAL 中，但对于我们目前正在处理的应用程序......这不是我们的情况！嘻嘻！（讽刺的嬉皮士）；）

注意 2：此应用程序未使用任何 ORM。所以所有的查询都是直接使用SqlCommand。所以对任何数据库对象的任何调用都是字符串格式的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:45:44.317

您提到您拥有来自 APP0 的所有表格、Sprocs 等。大概有其中的一个 BAK，或者您可以通过在新 PC 上安装 APP0 来获取原始 SQL 对象。

然后使用RedGate 的[SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)将 APP1 使用的数据库与原始 APP0 数据库进行比较，然后您可以看到您添加了哪些对象，并可以剥离所有多余的 APP0 db 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:51:19.797

您可以在应用程序正在使用时在数据库上运行跟踪。这可能会创建大量数据，但您可以将其减少为应用程序执行的过程和/或 SQL 语句。

你能保证你会或者可以使用所有的功能吗？您可能还想运行 NCover 之类的东西来检查您在使用它时执行了多少应用程序代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:31:25.510

我没有一个简单的答案，但这就是我如何攻击它。我事先承认这需要相当长的时间，所以我很乐意让给有更好答案的人。

这是一个两步的问题。

第 1 步：查找 SQL 中的所有依赖项。即查找所有用于制作视图的表，并查找所有用于存储过程和函数的表和视图。MS SQL 服务器具有为您执行此操作的功能。对于其他数据库，您可以针对 information_schema（或任何它们的专有等价物）编写一些查询。

第 2 步：获取从代码中执行的所有 SQL 语句和存储过程的列表。如果您不即时构建 SQL 语句，这应该相对简单。只需搜索所有 SQLCommand 对象并找到您将查询设置为的内容。您可以编写一个小程序来扫描您的源并将其转储。

然后解析这个转储并列出引用的存储过程、表和视图。按字母顺序排序并消除重复项。然后添加从 sprocs 引用的任何表或视图以及从视图引用的任何表。再次排序并消除重复项。然后你有你的清单。

如果您确实即时生成 SQL，我认为复杂程度会大大增加。然后，您必须按照自己的方式编写生成 SQL 的代码并挑选表名。如果在某些地方将表名从函数传递到函数，这可能会变得非常困难。（我可以想象真正的噩梦场景，比如你要求用户输入一个表名，或者你从片段中构建一个表名。比如，“dim tablename = if(dept="B17","accounting", "manufacturing"） ＆ “_“ ＆ 年”。）

# internet-explorer-8 - dojo.connect not working in IE but sometimes in chrome&firefox

> ID：10540336
> 
> 赞同：1
> 
> 时间：2012-05-10T18:43:33.370
> 
> 标签：internet-explorer-8, onclick, dojo

I finally got some parts working here: [http://jsfiddle.net/trXBr/5/](http://jsfiddle.net/trXBr/5/) but when I put the code back into my project and tried to browse using internet explorer; the button onclick events do not work. Interestingly the one button onclick function to show the dialog works in firefox and chrome. I was excited to have this working in the editor but now if this does not work with all browsers, then this is just really frustrating. I am using version 1.5.1

```
 dojo.connect(loadBtn,'onClick',function(){ 
                userDialog.show(); 
              });   

        dojo.connect(butt,'onClick',function(evt){ 
               showTab(); 
        }); 
```

Any help/ideas appreciated.

EDIT:

Ok using the compatibility mode in IE helps to get the one function working which displays the dialog box.

So as you can see here I have an borderlayout where I want a tabcontainer to be displayed in the middle with a click of a button and this works fine in jsfiddler but not from my code in the browsers;

```
 <div dojoType="dijit.layout.ContentPane" region="center" splitter="true">
  <div id="mainTabContainer"dojoType="dijit.layout.TabContainer"
           style="width:500px;height:100px;display:none">
      <div id="tab1" dojoType="dijit.layout.ContentPane"
       title="First Tab" selected="true" 
         closable="true">First Tab</div>
     <div id="tab2" dojoType="dijit.layout.ContentPane" 
      title="Second Tab" closable="true">
       Second Tab
     </div>
    </div>    

</div> 
```

so the display:none but when I click the button I call the following:

```
dojo.connect(butt,'onClick',function(evt){ 
               showTab(); 
}); 
function showTab(){
         dijit.byId("mainTabContainer").domNode.style.display = 'block'
         dijit.byId("mainTabContainer").resize();
   } 
```

Also if I remove the display=none then the tabcontainer appears fine. So is these something wrong with my function call.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:42:34.940

ok sorry guys....all my fault here...I forgot to remove the added code I had in my html in my asp.net code

```
<body class="claro">
  <form id="form1" runat="server">
  <asp:ScriptManager ID="ToolkitScriptManager1" runat="server">
  </asp:ScriptManager> 
```

Once I removed the form and scriptmanager lines it works fine..Thanks for everyones efforts. Just worried that if I were to incorporate ajax and other controls, then would dojo still work

# hibernate - 在 Grails / Hibernate 中避免 N+1 选择

> ID：10540337
> 
> 赞同：3
> 
> 时间：2012-05-10T18:43:39.373
> 
> 标签：hibernate, grails, orm

**更新**：可能与 2.0.1 中的这个 Grails 错误有关：http: [//comments.gmane.org/gmane.comp.lang.groovy.grails.user/125400](http://comments.gmane.org/gmane.comp.lang.groovy.grails.user/125400)

**更新2**：这让我最接近，但分页不起作用。在这种情况下，所有的 A 都被返回，每个 A 都有它们的 B 列表，每个 B 都有它的 C。只要我添加了 offset 和 max，事情就会变得一团糟。例如，在这种情况下，不会返回 10 个 A。可能会退回 1 个 A 和 9 个 B。

```
def results = A.list([fetch:[bees: "eager"], offset: 0, max: 10]); 
```

* * *

问题：我想在一个查询中加载所有 A、它们关联的 B 和 B 关联的 C。在一个查询中检索所有 A 及其关联的 B 非常简单。我不确定如何将所有 B 的 C 作为同一个查询的一部分加载。按照设计，从 B -> C 的默认映射应该是急切的，因为我在加载 B 时总是需要 C。我认为设置此映射可以解决问题。

```
class A {
    static hasMany = [
            bees:  B,
    ]
}

class B {
    C c;

    static belongsTo = [a: A]

    // also tried this and every possible combination
    //static fetchMode = [c: 'eager']

    static mapping = {
        c fetch: 'join'
        // c lazy: 'false'
    }
}

class C {
    String someField;
} 
```

这是我的查询：

```
def results = A.executeQuery("from A a left join fetch a.bees",
                     [max: pageSize, offset: offset]); 
```

如果我现在迭代结果：

```
for (A a in results) {
   for (B b in a.bees) {
      println "B: " + b; // this is OK, B is already loaded
      println "B's C: " + b.c.someField; // C not loaded
   }
} 
```

当我迭代结果时，行 bcsomeField 将导致每个 B 执行一个“选择”。这很糟糕，我想尽可能避免这种情况。我发布了一个解决方案作为答案，它使用带有查找图的第二个查询，但必须有更好的方法。

我在“更新 2”中发布的查询让我非常接近。事实上，在我使用分页（使用偏移量/最大值）之前它工作得很好。Grails 用户指南提到“fetch: 'join' 可能会导致带有偏移量/最大值的查询出现问题，但它没有详细说明。注意：为了让这个查询正常工作，我必须禁用休眠查询缓存，如由于 Grails 2.0.1 中的错误，“更新 1”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:57:26.067

根据 Grails 的文档，GORM 默认会延迟加载。这是文档[http://grails.org/doc/1.1/guide/5.%20Object%20Relational%20Mapping%20(GORM).html的链接](http://grails.org/doc/1.1/guide/5.%20Object%20Relational%20Mapping%20(GORM).html)

我不清楚你在这里问什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:54:16.573

一种解决方法是简单地获取所有 A 及其关联的 B。

一旦你有了它，你就可以得到所有 C 的 ID，而无需做任何查询：

```
def cIds = [] as Set;

for (A a : results) {
    for (B b : a.bees) {
        // Note: getCId() is a special method which does not cause a query
        cIds.add(b.getCId());
    }
} 
```

获得所有 C ID 后，您可以使用第二个查询从数据库中获取这些 ID，并将它们存储到映射中以供以后查找：

```
def cMap = [:]
def cees = C.getAll(cIds.toList());
for (C c : cees) {
    cMap[c.id] = c;
} 
```

现在，您可以遍历原始结果集以打印出 C 的字段：

```
for (A a : results) {
    for (B b : a.bees) {
        println "The meaning of life is " + cMap[b.getCId()].someField;
    }
} 
```

总查询数 = 2（一个用于原始左连接，第二个用于获取所有 C）

如果有人有更好的解决方案，请发布。

# c++ - 如何使用 Boost Graph Library 创建 named_graph？

> ID：10540338
> 
> 赞同：2
> 
> 时间：2012-05-10T18:43:41.823
> 
> 标签：c++, boost, boost-graph

我目前正在使用 Boost Graph Library。我需要独特的边缘和顶点。不幸的是，升压图不提供此功能。所以我每次在插入边或顶点之前都必须检查手册。

现在我发现了这个： http: [//www.boost.org/doc/libs/1_49_0/boost/graph/named_graph.hpp](http://www.boost.org/doc/libs/1_49_0/boost/graph/named_graph.hpp) 我想知道这是否对我有帮助？因为文档没有提到 named_graph 我不知道如何使用它。也许周围有人可以给我一个小例子或解释？这对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:13:58.570

Boost Graph Library 非常灵活，允许您为顶点和边选择内部表示。如果您选择诸如 std::set 之类的容器，则可以直接强制执行唯一的顶点和边。详细信息在这里：[使用邻接表](https://www.boost.org/doc/libs/1_78_0/libs/graph/doc/adjacency_list.html)

named_graph 类型允许您通过您可以自己选择的属性（例如代表名称的“字符串”）来索引您的顶点。它有效地将标准 adjacency_list 包装在一个映射中，其键是命名属性，其值是节点。[在 boost source named_vertices_test.cpp](https://github.com/boostorg/graph/blob/develop/test/named_vertices_test.cpp)中有一个很好的例子来说明如何使用它。

不确定您要做什么，但是您可以使用 std::map/std::set 自己从某些唯一属性映射到 adjacency_list 中的节点。如果您只需要在制作时确保图形具有唯一的节点/边，那么这种方法简单明了，通常是最好的方法。

您应该考虑将支持的容器更改为 std::set 的后果——例如，许多算法的性能会发生变化。哪个是最好的容器没有简单的答案。

# java - 保留粒度的Java函数

> ID：10540341
> 
> 赞同：4
> 
> 时间：2012-05-10T18:44:07.290
> 
> 标签：java, function, granularity

我需要在一个模糊的工作中保持粒度，所以我制作了一个作为参数接收的函数：

*   粒度（0 和 1 之间的双精度数，不包括 0）
*   如有必要，要转换的值（大于 0 的两倍）

并返回具有正确粒度的新值。

这是我的功能：

```
public static double preserveGranularity(double granul, double value){
    double integerValue= (double)(int)value;
    if(granul == 1)
        return integerValue;
    double decimal = value - integerValue;
    long factor = Math.round(decimal/granul);
    return integerValue + granul*factor;
} 
```

例子：

*   preserveGranularity(0.25, 7.7) 应该返回 7.75
*   preserveGranularity(0.01, 0.009) 应该返回 0.01

它适用于大多数值，但不适用于所有值（例如：preserveGranularity(0.2, 0.57)=0.6000000000000001，它应该返回 0.6）

问候

PS对不起，我在这个问题上犯了任何错误，这是我的第一个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:50:04.463

你不能用`double`- 来实现这一点，因为它不够精确。
`double`s 不是实数。只有有限数量的位来表示它们 - 而那里有无限数量的实数（甚至是有理数），所以这些舍入误差是可以预料的。

我认为您正在寻找[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)，它可以让您根据需要控制粒度，例如使用它的[`round()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#round%28java.math.MathContext%29)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:50:32.917

浮点计算并不精确（计算机只能表示这么多数字）。这意味着在除法/乘法/舍入/减法/加法运算的某个地方，您会失去精度。

# jquery - 数据在 Asp.Net MVC3 UI 上不可见

> ID：10540351
> 
> 赞同：0
> 
> 时间：2012-05-10T18:44:30.083
> 
> 标签：jquery, asp.net-mvc-3

我在尝试什么：

使用 Asp.Net MVC3 / JQuery 将 id 传递给控制器​​获取结果并在 UI 中显示结果

我做了什么：

我有一个 contoller( `[HttpPost] Index(Int? id)`) ，它返回 listDetails 来查看

我有一个文本框，它通过 jquery 将 id 传递给控制器​​ Index 并将 listDetails 作为模型获取到 View

现在我正在尝试显示`@Model.xyz.Name`

我尝试在控制器中使用断点和模型调试代码，并获得有效数据。

我在视图中尝试了断点，它获取数据。

但是当我运行应用程序时，数据在 UI 上根本不可见。有人可以建议我哪里出错了吗？

控制器代码

```
[HttpGet]
public ActionResult Index()
{
    return View();
}

 [HttpPost]
        public ActionResult Index(int? Id)
        {
            if (Id.HasValue)
            {
get list of values
  return View(listOfValues);
} 
```

查看代码

```
 @if (@Model != null)
            {
                @Model.Person.DisplayName
            } 
```

具有自动完成功能的 Jquery 代码（触发选择）

```
$(document).ready(function () {

    $(function () {

        $("#tbxSearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Details/GetSearchData", type: "POST", dataType: "json",
                    data: { searchText: request.term, maxResults: 10 },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.label, value: item.label, id: item.value }
                        }))
                    }
                })
            },
            select: function (event, ui) {
                //alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id)
                //      : "Nothing selected, input was " + this.value);
                $.ajax({ url: 'PersonDetails',
                    type: 'POST',
                    data: { id: ui.item.id
                    },
                    async: false,
                    success: function (result) {
                       // alert("Success");
                        //$('#DivDetails').show();
                    }
                });
            }
        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:50:17.800

视图顶部的 using 语句是什么？它是 IEnumerable 吗？看起来您正在返回一个人员列表。

试着说 foreach(var item in Model) ... 看看你是否看到了什么。

# sql-server - 如何删除 SQL Server Link Server 中的系统表或其他表

> ID：10540355
> 
> 赞同：0
> 
> 时间：2012-05-10T18:44:47.617
> 
> 标签：sql-server, sql-server-2008, tsql, oracle11g

今天是个好日子！

***我在 Windows 7 64 上的 SQL Server 2008 SP3 中***为 Oracle 11G Express设置了链接服务器。我使用 Oracle SQL Developer 作为数据库应用程序/管理系统。

除了表树中的一长串表之外，一切都运行良好。SQL Developer 中有一个过滤器功能，但我没有看到那里列出的表 APEX。

有没有办法将 SQL Server 配置为我在链接服务器中只看到一个指定的表？

这是我所指的图像：

![在此处输入图像描述](../Images/ffd146334503af7ac487fcf07ae4b837.png)

感谢您的知识-您正在发挥巨大的作用！

盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:05:41.547

在安全下编辑您的帐户并转到用户映射取消勾选主。

重新连接到 sql 服务器。

希望这可以帮助。

或此链接

[http://msdn.microsoft.com/en-us/library/ms190644.aspx](http://msdn.microsoft.com/en-us/library/ms190644.aspx)

# java - TreeViewer setSelectionProvider 仅适用于一个控件

> ID：10540358
> 
> 赞同：1
> 
> 时间：2012-05-10T18:44:53.327
> 
> 标签：java, eclipse, jface

我正在尝试创建 Eclipse 插件，它具有两个并排的 TreeViewer 组合。我已经使用 setSelectionProvider() 将它们注册到 Workbench，以便在 Eclipse 属性视图中显示 Treeviewer 的选定节点的属性。我面临的问题是一次只能将 1 个 TreeViewer 注册到工作台。我该如何解决这个问题？谢谢，托尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:44:30.130

您可以通过`ISelectionProvider`自己实现并将两棵树的选择事件委托给已注册的侦听器来解决此问题。`getSelection()`可以返回在任一树中所做的最后选择。不过，我不确定如何`setSelection(ISelection selection)`以合理的方式实施。`UnsupportedOperationException`除非您确定在这种情况下实际上需要此方法，否则我可能会让它抛出一个。

# c# - 将 DotNetOpenAuth 与消费者 + 客户端密钥/秘密一起使用

> ID：10540366
> 
> 赞同：0
> 
> 时间：2012-05-10T18:45:51.750
> 
> 标签：c#, dotnetopenauth

我正在尝试使用 oauth 验证 api 调用我有消费者密钥和秘密，所以希望只使用 DotNetOpenOAuth 和嘿 presto，但是在经历了令人沮丧的一天和头痛之后，我无法弄清楚..

我有以下示例 - 使用 python-oauth2 库在 python 中工作 - 任何人都对如何翻译这个有任何经验/想法？我能找到的一切都是处理基于用户的回调 url——但在这里我只有一个更复杂的旧用户/密码版本（知道它有点复杂——但希望能得到我的要点！）

```
 consumer=oauth.Consumer(key='CONSUMERKEY', secret='ITSASECRET')

   # Your unique key:
   token= oauth.Token('CLIENTKEY','ITSASECRET')

   # The client object which combines both consumer and token:
   client = oauth.Client(consumer, token=token)

   # To figure out what reporting options you have, first run the following:
   response_headers, response_content = client.request(url)

   # The below will display the reporting options you have available:
     print cjs

   on.dumps(response_content) 
```

**编辑**：更新以反映这是 OAuth 1.0，而不是 2

# eclipse - Eclipse Egit 未检测到更改的文件

> ID：10540367
> 
> 赞同：9
> 
> 时间：2012-05-10T18:45:54.853
> 
> 标签：eclipse, egit

我已经一起使用 Egit 和 Eclipse 一年多了。我最近升级了我的电脑，不得不重新安装所有东西。以前，每当我对文件进行更改时，它都会立即被 Egit 拾取，并在项目资源管理器中的文件名旁边显示为红色突出显示和星号。

我已将所有内容备份并按原样运行，但是每当我进行更改时，Egit 都不会接受更改。我必须执行“git status”才能使文件显示为准备好在文件资源管理器中暂存。我做错了什么让 Egit 自动检测更改的文件并且其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T20:21:12.803

*   您使用的是哪个版本的 EGit
*   如果您右键单击 git 跟踪项目中的任何资源，您会获得 egit 团队菜单吗？
*   如果没有，那么您需要执行“团队 > 共享 > Git”，然后选中“在项目的父文件夹中使用或创建存储库”。如果您使用的是最近的夜间构建版本，则会自动检查。
*   当您修改由 (e)git 跟踪的文件时，文本装饰器“>”应该出现在修改后的文件前面
*   一旦您暂存修改后的文件（团队>添加），装饰器应该显示星星
*   登台视图也应该始终显示所有修改文件的 git 状态

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:50:48.643

您可能需要再次“添加到索引”所有文件

> **跟踪更改**
> 单击项目节点上的**团队**>**添加。**（此菜单项在 Egit 的最新版本中可能显示为**Add to Index ）**

（来自[EGit](http://wiki.eclipse.org/EGit/User_Guide#Track_Changes)文档：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T20:48:28.713

我发现您需要确保您的 git 存储库显示在 Eclipse`Git Repositories`视图中。

1.  在存储库视图中，单击带有绿色 +（加号）符号的 [very] 小 Git 图标`Add and Existing Local Git Repository`。
2.  浏览到已有子目录的目录`.git`并单击`Finish`。然后，您应该会看到您的本地存储库出现在该列表中。
3.  然后您可以在存储库视图中右键单击存储库并将下拉添加到 `Import Projects`.
4.  选择“导入现有项目”。点击下一步。
5.  你的项目应该被选中。如有必要，将其添加到工作集中。单击下一步（可能是完成）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-05T00:08:18.533

我有一个类似的问题，我的所有更改都消失了。不知何故，Eclipse 取消了我的 Git 存储库的选择。一旦我再次选择它，它们都回来了。

[![在此处输入图像描述](../Images/40988d6e2dddaa3d1239b8f0457baec2.png)](https://i.stack.imgur.com/qvKcP.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-10T19:38:17.970

如果您已经将文件添加到 Stage 然后更改分支，它将要求您提交/存储/重置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-26T12:27:57.813

我遇到了同样的问题。从您的 git 存储库视图中：**右键单击 -> 在 git staging 中显示**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-25T20:30:26.207

对我来说，我点击了 Team --> Advanced --> No Assume Unchanged，解决了这个问题

# functional-programming - 如何通过 QuickLisp 将安装包安装到 SBCL 的系统目录中？

> ID：10540371
> 
> 赞同：2
> 
> 时间：2012-05-10T18:46:16.313
> 
> 标签：functional-programming, lisp, common-lisp, sbcl, quicklisp

我使用 quicklisp 作为 SBCL 的包管理工具。

但是，有时我发现通过`ql:quickload`. （比如我`(ql:quickload "xmls")`用来安装xmls，其他用户就不能用了。）

更糟糕的是，我想将 lisp 代码作为脚本运行。所以我在使用quicklisp安装的包的时候，很不爽的需要加上那个包的绝对路径，比如：

```
#!/usr/bin/sbcl --script
(require 'xmls "..../quicklisp/dists/quicklisp/software/xmls-1.4/xmls") 
```

如果我使用，编译器将无法工作，因为如果我使用这些选项`(require 'xmls)`，它将找不到该包。`--script`

有谁知道如何解决这个问题，以便我可以同时使用`--script`和`require`（无需添加绝对路径）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:20:26.197

我不知道解决这个问题的好方法。我使用的解决方案是不使用 Common Lisp 编写脚本；我通常编写我在 CL 会话中以交互方式使用的应用程序。当我确实想从命令行运行东西时，我使用[buildapp](http://xach.com/lisp/buildapp/)来`ql:write-asdf-manifest-file`创建一个文件以传递给`--manifest-file`buildapp。

我有时希望有一个更好的解决方案，但这可能需要某人（希望不是我）做一些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:55:33.410

我只是这样做`sudo sbcl`，这样它就会为我的 PC 上的每个用户安装 - 没关系，因为它是我的家用 PC，所以没有危险。

我能想到的一件事可能是将 ql 安装东西的目录符号链接到更容易访问的东西，比如 $HOME/packages -> .../quicklisp/software 什么的？

# php - 在服务器端验证移动应用程序

> ID：10540372
> 
> 赞同：0
> 
> 时间：2012-05-10T18:46:22.733
> 
> 标签：php, iphone, web-services, authentication, oauth

我正在编写一个需要与我们的服务器通信的 iphone 应用程序。在服务器端，我正在用 php 编写一个应用程序将与之对话的 api。验证应用程序并基本上限制对应用程序的访问并将其他所有人拒之门外的最佳方法是什么？

我需要一种方法来识别对 api 的传入请求是来自我们 api 的合法请求。

我应该记住并计算其他哪些安全问题？

有什么设计建议吗？

我目前正在研究 oauth 可以在这里为我做什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:51:34.803

我认为您不需要**oauth**，因为它只会在您需要涉及三方的身份验证时为您提供帮助。示例：**您的应用程序对****Fecebook**用户进行身份验证（此处为三方：您、Facebook 用户和 Facebook）。

我会确保你使用这个：

1.  HTTPS（永远不要通过纯 HTTP 发送密码或敏感数据）
2.  一个`login.php`将对您的用户进行身份验证的脚本，并且在有效的身份验证后将`access_token`为您的移动用户生成一个脚本。
3.  您使用 PHP 提供的每个受限服务都将要求一个有效`access_token`的参数作为执行参数。
4.  确保`access_token`在您可能施加的特定时间或条件后过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:49:28.957

看看大公司？Google 为其所有公共 API 使用 API 密钥，以便他们可以跟踪行为并在预期滥用时阻止。

由于您的 API 可能不公开，您可能需要更高的安全性，但您可能需要加密所有通信：<

# python - python替换为捕获组

> ID：10540379
> 
> 赞同：0
> 
> 时间：2012-05-10T18:46:58.287
> 
> 标签：python, bash, ubuntu, batch-file

如何将“.nmv-fas”的所有实例更改为“title”标签之间的任何内容？这可以用python还是有更好的方法？

基本上改变：

这

```
<html>
<head>
<title>.rtpv05-tl</title>
</head>
<a href="http://www.youversion.com/bible/gen.1.nmv-fas">http://www.youversion.com/bible/gen.1.nmv-fas</a>
<a href="http://www.youversion.com/bible/gen.2.nmv-fas">http://www.youversion.com/bible/gen.2.nmv-fas</a>
<a href="http://www.youversion.com/bible/gen.3.nmv-fas">http://www.youversion.com/bible/gen.3.nmv-fas</a>
<a href="http://www.youversion.com/bible/gen.4.nmv-fas">http://www.youversion.com/bible/gen.4.nmv-fas</a>
<a href="http://www.youversion.com/bible/gen.5.nmv-fas">http://www.youversion.com/bible/gen.5.nmv-fas</a> 
```

对此

```
<html>
<head>
<title>.rtpv05-tl</title>
</head>
<a href="http://www.youversion.com/bible/gen.1.rtpv05-tl">http://www.youversion.com/bible/gen.1.rtpv05-tl</a>
<a href="http://www.youversion.com/bible/gen.2.rtpv05-tl">http://www.youversion.com/bible/gen.2.rtpv05-tl</a>
<a href="http://www.youversion.com/bible/gen.3.rtpv05-tl">http://www.youversion.com/bible/gen.3.rtpv05-tl</a>
<a href="http://www.youversion.com/bible/gen.4.rtpv05-tl">http://www.youversion.com/bible/gen.4.rtpv05-tl</a>
<a href="http://www.youversion.com/bible/gen.5.rtpv05-tl">http://www.youversion.com/bible/gen.5.rtpv05-tl</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:53:32.463

```
awk -v text='.nmv-fas' '
    /<title>/ {title=$0; gsub(/<\/?title>/, "", title); replace=1}
    replace {gsub(text, title)}
    {print}
' file > file.tmp && mv file.tmp file 
```

awk 没有像 sed 那样的“就地”选项`-i`

当然，这取决于标题文本与`<title>`标签在同一行。为了安全起见，您应该使用 HTML 解析器来解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:57:49.810

您可以使用正则表达式将标题作为字符串拉出。假设您的 html 在一些字符串中：

```
import re
match = re.compile(r"<title>(.+)</title>",re.I|re.DOTALL)
title = match.group(1) 
```

然后只需对字符串 s 进行字符串替换

```
s.replace(".nmv-fas",title) 
```

# c# - 显示客户端除法的小数位

> ID：10540383
> 
> 赞同：1
> 
> 时间：2012-05-10T18:47:18.613
> 
> 标签：c#, asp.net

我正在使用以下代码填充模板字段

```
<%# ((ListData)Container.DataItem).TotalMinutes / 60.00 %> 
```

但是，有时返回值显示为 40.5 或 29 或 34.75。

我希望它始终显示 2 位小数，无论是 40.50、29.00 还是 34.75。应始终显示小数点后 2 位。

我也试过

```
<%# string.Format("{0:###.##}", (double)((PendingApprovalListData)Container.DataItem).TotalMinutes / 60D)%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:49:28.563

试试这个 ：

```
(((ListData)Container.DataItem).TotalMinutes / 60.00).ToString("N2") 
```

![在此处输入图像描述](../Images/ddda240a77cdacb2a6f24e8acd87a093.png)

请注意它是圆形的！

如果你想要可爱：

![在此处输入图像描述](../Images/a17a8c365bc17dda698a656aa41d9bcb.png)

# jquery - 带有动态 html 和 jquery 的后退按钮

> ID：10540393
> 
> 赞同：0
> 
> 时间：2012-05-10T18:48:18.577
> 
> 标签：jquery, ajax

我有一个搜索页面，它执行 ajax 调用，然后在页面底部生成结果（动态 HTML）。问题是当用户转到一个结果（另一个站点）然后点击后退按钮时，原始页面和查询在那里，但动态 HTML 消失了。

我以前使用过 jquery 历史插件。如果用户搜索披萨，这需要将“#pizza”附加到我的 URL。然后每当我的页面加载时，它可以从 # 之后的状态恢复状态。但这需要重新进行 ajax 调用，再次进行搜索，并再次构建动态 HTML。

是否有可能构建事物，以便当用户点击“返回”时，结果页面会立即与他们离开之前完全一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:55:01.260

有些浏览器会保留页面状态，有些则不会。或者他们有时会，除非浏览器试图最小化内存使用。归根结底，你不能依赖它。

因此，如果您将`mypage.html#content-hash`样式 url 用于 ajax 状态，则必须在 JS 处理哈希标记并重建相关页面时加载空布局。这可能会更慢并且需要更多请求，但是该哈希不会发送到服务器，因此需要 JS 来查看需要什么内容。

或者，如果您使用 HTML5 推送状态 API，您可以更改窗口的完整 URL，而无需重新加载页面。在这种情况下，您的服务器可以将整个页面呈现为与设置为 ajax 相同的状态。浏览 Github 上的一些存储库，您可以了解它们是如何做到这一点的。单击一个文件夹，它会在其中动画化，并且 url 会更改。通过 URL 直接转到子文件夹，页面将呈现该子文件夹的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:57:28.047

是的，在搜索结果生成的链接中添加点击处理程序。并将搜索字符串传递给它

然后在处理函数中将字符串保存到 cookie 变量中。如果用户从点击页面返回，您可以在服务器端搜索结果。因此，它将在没有第二次调用的情况下显示结果。

# image-processing - ImageMagick：来自不同大小的瓷砖的蒙太奇图像

> ID：10540394
> 
> 赞同：2
> 
> 时间：2012-05-10T18:48:19.330
> 
> 标签：image-processing, imagemagick

我正在开发一个脚本来从基于图块的图像托管中下载图像。我使用 wget 下载了瓷砖并尝试使用蒙太奇来合成它们。

问题是我有不同尺寸的瓷砖（行中的最后一个瓷砖比其他瓷砖更窄）。这是组合命令：

```
montage $temp/*.jpg -tile $maxcolumn"x"$maxrow -geometry -1-1 -quality 100% merged.jpg 
```

ImageMagick 按网格对齐图块并生成此图像（见右侧和底部）。

[图片 http://leftparagraphs.ru/!/merged.jpg](http://leftparagraphs.ru/!/merged.jpg)

如何用蒙太奇解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:40:47.220

通过指定“-mode Concatenate”修复。

此外，我必须在蒙太奇之后运行另一个转换实例以“-trim”结果图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T19:59:05.690

这个解决方案对我不起作用。要将两个不同高度的图像合并为一个，我首先使用 identify 命令来获取最大图像的高度（1280 像素）：

```
identify large.jpg 
```

然后我使用以下命令调整较小图像的大小并将其与较大的图像并排组合：

```
montage -tile 2x1 -geometry +0+0 small.jpg"[x1280]" large.jpg output.jpg 
```

# javascript - 在 Rails 搜索引擎上开发类似 Google 的关键字突出显示

> ID：10540395
> 
> 赞同：0
> 
> 时间：2012-05-10T18:48:20.450
> 
> 标签：javascript, ruby-on-rails, search-engine

我正在开发一个[聚类搜索引擎](http://www.bunch-it.com)，是时候开发一个类似谷歌的关键字突出显示了。我用很少的 Jquery 代码实现了它，但它是正确的方法吗？而且谷歌也不区分字符“o - ö”和“g - ğ”。我怎样才能以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:52:22.963

> 而且谷歌也不区分字符“o - ö”和“g - ğ”。我怎样才能以有效的方式做到这一点？

音译字符并以这种方式找到偏移量。我希望 Ruby 有一些内置的音译支持，否则你将很难找到一个好的映射。

# url - url 中的特殊字符 (å æ ø) 会导致 404 错误 Facelets？

> ID：10540396
> 
> 赞同：1
> 
> 时间：2012-05-10T18:48:22.543
> 
> 标签：url, seo, special-characters, facelets

我无法导航到在 facelets 配置文件中正确配置的页面，如下所示：

```
<navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>nyhet</from-outcome>
            <to-view-id>/Bughaugane-område-Nyheiter.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule> 
```

单击引用 url 的锚点会导致 404 错误：

```
<li><a jsfc="h:link" outcome="nyhet">#{global.nyhet}</a></li> 
```

在文件名中使用特殊字符也会遇到类似的问题。这是一个 Facelets 还是一个 HTML 问题？我该如何解决这个问题（我知道这些字符是罪魁祸首，因为删除它们可以解决问题）。

我需要为 SEO 保留带有奇怪字符的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:47:36.637

当您使用 Tomcat 时，您需要告诉它使用 UTF-8 解释 URL。打开`/conf/server.xml`，找到`<Connector>`您的 webapp 使用的元素并添加`URIEncoding`值为 的属性`UTF-8`。

```
<Connector ... URIEncoding="UTF-8"> 
```

这样您就不需要手动更改带有特殊字符的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:17:30.923

正如 BalusC 亲切地评论的那样。网址编码应该可以解决这个问题。 [这是我需要的代码](http://krypted.com/utilities/html-encoding-reference/)

# python - strftime 不返回缩写时区

> ID：10540399
> 
> 赞同：1
> 
> 时间：2012-05-10T18:48:42.763
> 
> 标签：python, timezone

谁能告诉我为什么时区返回为“山地夏令时间”而不是 MST ？

```
import time

print time.strftime( "%H:%M %A %Z %d %b %y") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:58:52.263

根据您提出的另一个问题，我猜您正在使用 Windows。

在 Windows 上，`strftime("%Z")`显示位于注册表中此键的`DaylightName`或值： 。显示哪个（当然）取决于夏令时是否有效。如果更改这些设置，则必须重新启动它们才能生效。`StandardName``HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation`

在 Linux 上，我相信（大约 80% 肯定 :-)`strftime`使用它在`/etc/localtime`. 在 Ubuntu 上，您使用`dpkg-reconfigure tzdata`. 在 Linux 上，`%Z`显示时区（例如，我的现在显示`'EDT'`，`%z`显示与 UTC 的偏移量（例如，我的现在显示`'-0400'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T16:16:54.120

我在使用 Windows 时遇到了同样的问题。作为 4 个美国时区的快速而肮脏的解决方案，您可以简单地从时区字符串中删除所有不是大写字母的字符：

```
 abbreviated_tz_str = re.sub(r'[^A-Z]', '', multiplatform_tz_str ) 
```

举个例子，下面是我如何将时间戳变成一个漂亮的字符串：

```
 import re
    import time

    def nice_str( timestamp ):
        dt_str    = time.strftime( "%m/%d/%Y %I:%M:%S %p", time.localtime( timestamp ) )
        tz_str    = time.strftime( "%Z", time.localtime( timestamp ) )
        final_str = "%s (%s)" % ( dt_str, re.sub(r'[^A-Z]', '', tz_str ) )
        return( final_str ) 
```

所以：

```
 print( nice_str( 1425917368 ) ) 
```

显示：

```
 03/09/2015 09:09:28 AM (PDT) 
```

它可以工作，即使在 Windows 上也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:55:14.693

您的代码似乎是正确的

```
import time

print time.strftime( "%H:%M %A %Z %d %b %y")

#=> 13:54 Thursday CDT 10 May 12 
```

你运行的是哪个版本的python？

# php - php和mysql的highcharts

> ID：10540410
> 
> 赞同：0
> 
> 时间：2012-05-10T18:49:33.980
> 
> 标签：php, mysql, json, highcharts

我尝试在我的网站上实现 highcharts，但我不知道如何从数据库中获取信息。

在我的 jquery 我有这个

```
 xAxis: {
                categories: [1,2,3,4,5,6,7,8,9,10]
            }, 
```

这代表当月的天数，就像今天是 10 所以去 1 到 10

```
series: [{
                name: 'acessos',
                data: [1,0,0,0,0,0,7,0,0,4]
            }, 
```

这代表每天的点击次数

所以我的数据库有这个结构

```
tabstats |tabstats.Stats_Id | tabstats.Stats_Type | tabstats.Stats_Clicks | tabstats.Stats_Date | 
```

所以我有

```
Stats_Id = 1 / Stats_Type = 1 / Stats_Clicks = 10 / Stats_Date = 2012-05-01

Stats_Id = 2 / Stats_Type = 1 / Stats_Clicks = 5 / Stats_Date = 2012-05-02 
```

等每一天

所以我尝试首先获取本月的当前日期

以及每天的点击次数。

谢谢你的帮助。

我想出了如何像这样输出当月的天数

```
for($i=1; $i <= date("d"); $i++) { $days[] = $i;    }
echo json_encode($days); // ouput [1,2,3,4,5,6,7,8,9,10] 
```

现在我只需要修复点击次数

```
for($i=1;$i <= date("d"); $i++) {
        $Sql = "SELECT COUNT(Stats_Clicks) AS Total FROM tabstats WHERE DAY(Stats_Date) = $i
                AND MONTH(Stats_Date) = $month
                AND YEAR(Stats_Date) = $year 
                ";
        $Query = mysql_query($Sql,$Conn) or die (mysql_error($Conn));
        $Rs = mysql_fetch_array($Query);    

        $clicks[] = $Rs['Total'];
    }
    echo json_encode($clicks); 
```

但是我遇到了一个问题，json输出返回这个

```
["1","1","0","0","0","0","0","0","0","0","0"] 
```

但我需要不带引号，我尝试使用一个简单的向量，但 dint 对我有用。

我不知道我的代码是最好的解决方案还是正确的，但这是我唯一需要的结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:59:48.520

解决方案

```
$clicks[] = (int)$Rs['Estatistica_Click']; 
```

固定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T02:52:55.063

你也可以用这个

```
echo json_encode($clicks,JSON_NUMERIC_CHECK); 
```

# sql-server-2008 - Where 子句有时会过滤 NULL 值，但有时不会

> ID：10540411
> 
> 赞同：0
> 
> 时间：2012-05-10T18:49:34.300
> 
> 标签：sql-server-2008, null, where-clause

有人可以解释一下为什么我对这两个类似的查询有两个不同的结果吗？

例子：

```
-- Create table t1 and insert values.
CREATE TABLE t1 (a NVARCHAR(4) NULL)
INSERT INTO t1 values (NULL)
INSERT INTO t1 values ('0')
INSERT INTO t1 values ('1')
GO

PRINT 'Testing NULL values'
DECLARE @varname NVARCHAR(4)
SET @varname = '1'

SELECT * 
FROM t1 
WHERE a <> @varname

SELECT * 
FROM t1 
WHERE a <> '1'
GO

-- Drop table t1.
DROP TABLE t1 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:00:36.940

如果使用 set ansi nulls off 与打开 ansi nulls 时，我会得到不同的结果。

# rally - 我怎样才能获得拉力赛 api 中的所有标签

> ID：10540430
> 
> 赞同：2
> 
> 时间：2012-05-10T18:50:42.323
> 
> 标签：rally

我们使用标签来识别我们完成的用户故事。现在我们需要通过查询标签并生成与该标签相关联的用户故事列表来自动执行该过程。

我发现以下链接非常有用：

[Rally：过滤到特定标签的查询](https://stackoverflow.com/questions/8748318/rally-query-filtered-to-specific-tags)

但是，我想以某种方式查询 Rally，以便我可以首先获取所有标签的列表，以便用户可以自由选择他们想要查询的标签。知道如何实现吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:56:35.837

如果您使用的是 SDK 1.0，您可以使用下面的代码来获取所有允许的标签。您所要做的就是提供一个名为“回调”的函数来处理您的结果。

```
queryConfig = { 
    type : 'defect',
    key : 'defects',
    query: '(Archived = false)',
    fetch: 'Name,Priority'
  };

  var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__', 
                           '__PROJECT_OID__',
                           '__PROJECT_SCOPING_UP__', 
                           '__PROJECT_SCOPING_DOWN__'); 
  rallyDataSource.findAll(queryConfig, callback); 
```

# cordova - 显示信息 5 秒

> ID：10540433
> 
> 赞同：0
> 
> 时间：2012-05-10T18:50:49.353
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我需要显示以下消息 5 秒钟，然后将其隐藏。

显示消息的代码是；

```
Ext.Msg.alert("Alert","How are you?"); 
```

隐藏消息的代码是；

```
Ext.Msg.hide(); 
```

但如何仅显示它`5 seconds`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:54:17.027

```
var alertBox = Ext.Msg.alert("Alert","How are you?");
setTimeout(function(){
   alertBox.hide();
}, 
5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:54:27.503

使用 setTimeout 应该可以解决问题：

```
setTimeout(function () {
    Ext.Msg.hide();
}, 5000); 
```

# c# - 版本 11 的 localdb 的连接字符串是什么

> ID：10540438
> 
> 赞同：66
> 
> 时间：2012-05-10T18:51:12.217
> 
> 标签：c#, sql-server, connection-string, sql-server-2012, localdb

我正在尝试执行实体框架的 Code First 演练（[http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx)）。

我有最新的 SQL Server Express，当我通过命令行 ( *sqllocaldb info* ) 检查可用的版本时：我看到 localdbApp1 和 v11.0。当我尝试通过一些小的调整来运行演练时，我得到一个无法连接的错误。

我的 app.config 看起来像这样：

```
<parameter value="Server=(LocalDB)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" /> 
```

我编写了一个简单的连接测试，如下所示，代码返回相同的 SQL 连接错误（（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接））。

```
new System.Data.SqlClient.SqlConnection("Data Source=(LocalDB)\v11.0; Integrated Security=True; MultipleActiveResultSets=True").Open(); 
```

我尝试过替换`"Data Source=..."`，`"Server=..."`但在那里无济于事。

任何想法连接字符串应该是什么？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-22T19:12:52.160

1.  需要将 .NET Framework 4 更新到至少 4.0.2。[如果你有 4.0.2，那么你应该有](https://stackoverflow.com/questions/8065002/how-can-i-find-out-if-net-4-02-is-installed)

    HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\v4.0.30319\SKUs.NETFramework,Version=v4.0.2

如果您安装了最新的 VS 2012，那么您可能已经拥有 4.0.2。先验证一下。

2.  接下来，您需要有一个`LocalDb`. 默认情况下，您有一个实例，其名称是单个`v`字符，后跟 LocalDB 版本号，格式为 xx.x。例如，`v11.0`代表 SQL Server 2012。[默认情况下，自动实例是公共的。您还可以拥有私有的命名实例](http://msdn.microsoft.com/en-us/library/hh510202.aspx)。命名实例提供与其他实例的隔离，并且可以通过减少与其他数据库用户的资源争用来提高性能。[您可以使用该实用程序检查实例的状态`SqlLocalDb.exe`（从命令行运行它）。](http://msdn.microsoft.com/en-us/library/hh212961.aspx)

3.  接下来，您的连接字符串应如下所示：

    “服务器=（localdb）\v11.0；集成安全=真；” 或者

    “数据源=(localdb)\test;集成安全=true;”

**从你的代码**。[他们都是一样的。](https://stackoverflow.com/questions/15025055/server-vs-data-source-in-connection-string)注意两个`\\`必需的，因为`\v`和`\t`表示特殊字符。另请注意，后面出现`(localdb)\\`的是您的 LocalDb 实例的名称。`v11.0`是默认的公共实例，`test`是我手动创建的私有实例。

1.  **如果您已有数据库（.mdf 文件）：**

    ```
     "Server=(localdb)\\Test;Integrated Security=true;AttachDbFileName= myDbFile;" 
    ```

2.  **如果您没有 Sql Server 数据库：**

    ```
     "Server=(localdb)\\v11.0;Integrated Security=true;" 
    ```

您可以通过编程方式创建自己的数据库：

a)**使用默认设置将其保存在默认位置：**

```
var query = "CREATE DATABASE myDbName;"; 
```

b)**使用您自己的自定义设置将其保存在特定位置：**

```
// your db name
string dbName = "myDbName";

// path to your db files:
// ensure that the directory exists and you have read write permission.
string[] files = { Path.Combine(Application.StartupPath, dbName + ".mdf"), 
                   Path.Combine(Application.StartupPath, dbName + ".ldf") };

// db creation query:
// note that the data file and log file have different logical names
var query = "CREATE DATABASE " + dbName +
    " ON PRIMARY" +
    " (NAME = " + dbName + "_data," +
    " FILENAME = '" + files[0] + "'," +
    " SIZE = 3MB," +
    " MAXSIZE = 10MB," +
    " FILEGROWTH = 10%)" +

    " LOG ON" +
    " (NAME = " + dbName + "_log," +
    " FILENAME = '" + files[1] + "'," +
    " SIZE = 1MB," +
    " MAXSIZE = 5MB," +
    " FILEGROWTH = 10%)" +
    ";"; 
```

并执行！

可以使用以下内容将示例表加载到数据库中：

```
 @"CREATE TABLE supportContacts 
    (
        id int identity primary key, 
        type varchar(20), 
        details varchar(30)
    );
   INSERT INTO supportContacts
   (type, details)
   VALUES
   ('Email', 'admin@sqlfiddle.com'),
   ('Twitter', '@sqlfiddle');"; 
```

请注意，`SqlLocalDb.exe`实用程序不会让您访问数据库，您需要单独[`sqlcmd`](http://msdn.microsoft.com/en-IN/library/ms162773.aspx)的实用程序，这是可悲的..

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-05T18:18:21.827

我安装了提到的 .Net 4.0.2 更新，但我收到了相同的错误消息：

> 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误

我通过控制台检查了 SqlLocalDb，如下所示：

```
C:\>sqllocaldb create "Test"
LocalDB instance "Test" created with version 11.0.

C:\>sqllocaldb start "Test"
LocalDB instance "Test" started.

C:\>sqllocaldb info "Test"
Name:               Test
Version:            11.0.2100.60
Shared name:
Owner:              PC\TESTUSER
Auto-create:        No
State:              Running
Last start time:    05.09.2012 21:14:14
Instance pipe name: np:\\.\pipe\LOCALDB#B8A5271F\tsql\query 
```

这意味着 SqlLocalDb 已正确安装并运行。那么我无法使用此连接字符串通过.Net 代码连接到 SqlLocalDB 的原因是什么：**`Server=(LocalDB)\v11.0;Integrated Security=true;`**？

然后我意识到我的应用程序是为 DotNet 框架 3.5 编译的，但 SqlLocalDb 仅适用于 DotNet 4.0。

改正后，问题就解决了。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-09-14T10:07:15.543

这是一个相当古老的线程，但由于我今天重新安装了我的 Visual Studio 2015 社区，我想我可能会添加一些关于在 VS2015 上使用什么的信息，或者什么可以正常工作。

要查看默认安装了哪些实例，请`sqllocaldb info`在命令提示符内键入。在我的机器上，我得到了两个实例，第一个名为**`MSSQLLocalDB`**.

```
C:\>sqllocaldb info
MSSQLLocalDB
ProjectsV13 
```

如果您愿意，您也可以使用 创建一个新实例`sqllocaldb create "some_instance_name"`，但默认实例可以正常工作：

```
// if not using a verbatim string literal, don't forget to escape backslashes
@"Server=(localdb)\MSSQLLocalDB;Integrated Security=true;" 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-12-05T15:47:43.240

我有同样的问题。我注意到我有：

```
Data Source= (localdb)\v11.0" 
```

只需添加一个反斜杠，它就为我解决了这个问题：

```
Data Source= (localdb)\\v11.0" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-05T16:22:22.310

在 Sql Server 2008 R2 数据库文件中，您可以连接

```
Server=np:\\.\pipe\YourInstance\tsql\query;InitialCatalog=yourDataBase;Trusted_Connection=True; 
```

仅，但在 sql Server 2012 中，您可以使用：

> 服务器=(localdb)\v11.0；集成安全=true；数据库=DB1；

这取决于您的`.mdf` `.ldf`版本。

[为了找到程序，我使用了这篇文章](https://stackoverflow.com/questions/12164208/sql-server-management-studio-local-database-connection-error-in-windows-7?answertab=active#tab-top)中解释的这个方法

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T06:36:54.240

这是给那些像我一样努力工作的人的……我在一件看似微不足道的事情上浪费了半天多……

如果您想从 VS2010 使用 SQL Express 2012 LocalDB，您必须安装此补丁 [http://www.microsoft.com/en-us/download/details.aspx?id=27756](http://www.microsoft.com/en-us/download/details.aspx?id=27756)

就像上面评论中提到的那样，我也有 Microsoft .NET Framework 版本 4.0.30319 SP1Rel，因为它到处都提到你需要“框架 4.0.2 或更高版本”，我想我很高兴......

但是，当我明确下载该 4.0.2 补丁并安装它时，我得到了它的工作......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-10T18:56:38.907

您需要安装[此处](http://blogs.msdn.com/b/sqlexpress/archive/2011/10/27/net-framework-4-now-supports-localdb.aspx)提到的 Dot Net 4.0.2 或更高版本。
4.0 位不理解 LocalDB 所需的语法

[在这里看到这个问题](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)

[您可以在此处](http://support.microsoft.com/kb/2544514/en-us)下载更新

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-24T10:56:43.573

我有连接字符串`Server=(localdb)\v11.0;Integrated Security=true;Database=DB1;`

甚至一个**.NET 3.5**程序成功连接并执行 SQL。

但是很多人说需要 .NET 4.0.2 或 4.5。

# asp.net-mvc - Windows 8 上的脚手架

> ID：10540444
> 
> 赞同：6
> 
> 时间：2012-05-10T18:51:42.807
> 
> 标签：asp.net-mvc, windows-8, visual-studio-2012

有人尝试将 MvcScaffolding/T4Scaffolding 与 Visual Studio 11 beta 和 Windows 8 Customer Preview 一起使用吗？对我来说，当我写：

```
Scaffold CustomScaffolder SomeScaffold 
```

没有结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T01:55:00.027

当我尝试从 NuGet 安装 MvcScaffolding 时，我收到以下消息：

```
Sorry, T4Scaffolding and MvcScaffolding currently do not support preview 
versions of PowerShell 3 (for example, on prerelease copies of Windows 8). 
```

看来我们需要等待作者的更新。您可以通过[MvcScaffolding NuGet 包](https://nuget.org/packages/mvcscaffolding)与他们联系以请求更新。

# actionscript-3 - 比较数字和小数

> ID：10540445
> 
> 赞同：0
> 
> 时间：2012-05-10T18:51:45.613
> 
> 标签：actionscript-3, numbers, decimal

我在 AS3 中有一个问题，我需要比较一些值类型`Number`。我有两个`Numbers`。例如，`3.10`和`3.9`

比较两者，3.9 大于 3.10，因为与 0 相比，它降低了 0`3.9`等`3.1`。

这确实有道理。我尝试过使用值类型`int`，`uint`并且结果相同。我可以做些什么来比较两个值，这将导致`3.10`大于`3.9`而不必像在小数点处拆分并`9`比较`10`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:02:59.697

不。

3.9 大于 3.10 - 如果不拆分小数点，则无法将 3.10 视为高于 3.9 的数字。

我假设您将其用于版本控制，所以我想提醒您，您的版本比较代码会考虑所有情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:27:23.773

**不是，但..**

如果您使用字符串，则可以按点拆分，将每个数字作为整数进行比较。

跟踪（getHighestVersion（“3.9”，“2.10”））；// 输出：3.9

```
trace(getHighestVersion("3.9", "3.10"));        // output: 3.10 
trace(getHighestVersion("3.9", "3.9"));        // output: 3.9 (same) 
trace(getHighestVersion("3.90", "3.10"));        // output: 3.90 
trace(getHighestVersion("3.9.2.1", "3.9.1.9")); //output: 3.9.1.9
trace(getHighestVersion("3.9.2.1", "3.9.3.0")); //output: 3.9.3.0

function getHighestVersion(version1:String,version2:String):String
{
    var list1:Array = version1.split(".");
    var list2:Array = version2.split(".");

    if (list1.length != list2.length) trace("not equal lengths: " + version1 + " / " + version2);

    for(var i:int = 0, leni:uint = list1.length; i < leni; i++)
    {
        var num1:uint = uint(list1[i]);
        var num2:uint = uint(list2[i]);
        if (num1 > num2)
        {
            return version1;
        }
        if (num1 < num2)
        {
            return version2;
        }
    }
    trace("both versions are equal: " + version1 + " / " + version2)
    return version1;
} 
```

# css - 如何将两个 div 保持在同一行？

> ID：10540446
> 
> 赞同：36
> 
> 时间：2012-05-10T18:51:53.433
> 
> 标签：css, internet-explorer, opera, css-float

我一直在研究类似于 Suckerfish 的下拉菜单。我现在已经让下拉菜单工作了，但是我有一些图像我正试图放在链接的任一侧。现在我正在使用图像大小的 div，然后将`background-image`属性设置为我需要的图像（以便它可以使用伪 :hover 类进行更改）。

这是适用的CSS：

```
ul#menu3 li {
    color: #000000;
    float: left;
    /*I've done a little playing around here, doesn't seem to do anything*/
    position: relative;
    /*margin-bottom:-1px;*/

    line-height: 31px;
    width: 10em;
    padding: none;
    font-weight: bold;
    display: block;
    vertical-align: middle;
    background-image: url(../../images/dropdown/button-tile.gif);
}
.imgDivRt {
    width: 20px;
    height: 31px;
    display: inline;
    float: right;
    vertical-align: middle;
    background-image: url(../../images/dropdown/button-right.gif);
}
.imgDivLt {
    width: 20px;
    height: 31px;
    display: inline;
    float: left;
    vertical-align: middle;
    background-image: url(../../images/dropdown/button-left.gif);
} 
```

我使用选择器来节省一些不同的课程，但 Internet Explorer 似乎不支持它们:(

这是我适用的 HTML：

```
<li><div class="imgDivLt"></div>Option 1<div class="imgDivRt"></div>
<ul>
    <li><a href="#"><div class="imgDivLt"></div>Sub 1<div class="imgDivRt"></div></a>
        <ul>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sandwich<div class="imgDivRt"></div></a></li>
        </ul>
    </li>
    <li><a href="#"><div class="imgDivLt"></div>Sub 2<div class="imgDivRt"></div></a> 
    <ul>
            <li><a href="#"><div class="imgDivLt"></div>Sub 1<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sub 2<div class="imgDivRt"></div></a> </li>
            <li><a href="#"><div class="imgDivLt"></div>Sub 3<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sub 4<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sub 5<div class="imgDivRt"></div></a></li>
            <li><a href="#"><div class="imgDivLt"></div>Sub 6<div class="imgDivRt"></div></a></li>
        </ul>
    </li>
    <li><a href="#"><div class="imgDivLt"></div>Sub 3<div class="imgDivRt"></div></a></li>
    <li><a href="#"><div class="imgDivLt"></div>Sub 4<div class="imgDivRt"></div></a></li>
    <li><a href="#"><div class="imgDivLt"></div>Sub 5<div class="imgDivRt"></div></a></li>
    <li><a href="#"><div class="imgDivLt"></div>Sub 6<div class="imgDivRt"></div></a></li>
</ul>
</li>
<li><div class="imgDivLt"></div>Option 2<div class="imgDivRt"></div> 
```

我不确定我的代码是否存在故障，或者我是否走错了路。它适用于 firefox、safari 和 chrome，但不适用于 IE 或 Opera，所以我不确定它们是在弥补愚蠢还是什么。理想情况下，第二个图像在包含块中贪婪地向右浮动。在有问题的浏览器中，它位于下一行（至少在最右边）

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-10T18:55:52.823

您可以通过这种方式使两个 div 内联：

```
display:inline;
float:left; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-30T18:45:14.630

对我来说，这工作得更好，因为它没有消除浮动项目之间的间距：

```
display:inline-block; 
```

以防万一对其他人有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-22T18:11:17.893

`display: inline-block`对两者都很简单，但一定要确定并`div`设置两者。下面的例子：`min-width``max-width`

```
div {
  max-width: 200px;
  min-width:200px;
  background:grey;
  display:inline-block;
  vertical-align: top;
}
```

```
<div>
  <p>test</p>
  <p>test</p>
  <p>test</p>
  <p>test</p>
  <p>test</p>
  <p>test</p>
</div>

<div>
  <p>test 2</p>
  <p>test 2</p>
  <p>test 2</p>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-31T09:23:33.120

将此添加到容器 div

```
.container_class {
    display: flex;
    justify-content: center;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-13T20:53:52.747

如果你想在一个单一的延续中创建多个 div，那么只需将下面的代码行添加到你的 css 文件中，每个 div、div 类等。

```
display: inline-block; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T21:52:29.250

此方法也适用于将两个 div 调整到同一行，以便为诸如 shopify、weebly 等网站构建器，您无法很容易地调整 CSS 文件。只是想为其他搜索网站构建器解决方案的人提供这个特定的答案。

```
display:inline;
float:left; 
```

所有功劳归于最初发现上述解决方案的京东。

# wpf - WPF 的时间跨度控制

> ID：10540447
> 
> 赞同：9
> 
> 时间：2012-05-10T18:51:55.770
> 
> 标签：wpf, timespan

WPF 是否有良好的时间跨度控制？我正在寻找一个看起来像 WPF Toolkit 中的 Timepicker 扩展（小而紧凑）的工具。我从 codeproject 看到的示例对于我的 UI 来说太庞大了。如果不是，我愿意自己创建一个并希望得到建议。谢谢

# ios - 在加载第一个视图之前显示带有表单的弹出窗口并在控制器之间传递数据

> ID：10540454
> 
> 赞同：0
> 
> 时间：2012-05-10T18:52:27.957
> 
> 标签：ios, view, popup

在 iOS 上显示第一个视图之前显示某种形式或弹出窗口的最佳方式是什么？我需要用户填写一些会影响视图外观的数字。

我还需要定期填写数据，以便在视图加载后执行计算。因此，如果我要为此任务选择一个视图（然后按照建议切换到下一个视图），我如何将数据从第一个视图/控制器传递到下一个视图/控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:58:57.397

试试看`AppDelegate.m`。在那里你会发现一堆你可能感兴趣的方法。`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`是呈现第一个视图的方法。

或者尝试呈现一个“临时”视图，用户必须在其中填写该表单。从那里你展示你的主要观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:00:36.850

您需要的表单必须是您加载和显示的第一个视图，在获得所需信息后，您可以隐藏表单，然后加载并显示您的主视图（它不再是第一个视图）。

# javascript - 网格视图中页面上的弹出 div 位置

> ID：10540455
> 
> 赞同：0
> 
> 时间：2012-05-10T18:52:44.337
> 
> 标签：javascript, css

我有一个gridview，每个数据行都有一个链接。当用户单击链接时，会弹出一个 div。弹出的div在页面的某个位置，但是如果gridview中有很多行，用户在向下滚动到页面底部后点击一个链接，div会在页面顶部弹出，将页面移回顶部。

我希望 div 相对于他们单击的链接在页面上的位置。因此，如果他们向下滚动并单击 gridview 链接，则 div 会在此处弹出。如果gridview顶部有一个链接，则在顶部弹出。

这是我的代码：

```
<script type="text/javascript">
        function CopyRecords() {            
            document.all.CopyItemsDiv.style.display = 'block';
            document.getElementById("outerdiv2").style.display = 'block';                
        }
        function closeFrame2() {
            document.getElementById("outerdiv2").style.display = 'none';               
            location.replace('default.aspx');
        }    
    </script>

<div id="outerdiv2" style="position: absolute; top: 30px; left: 550px; filter: alpha(opacity=85); z-index: 1001; display: none; background-color: white; border: .125em solid #736F6E;">
    <div style="text-align: right; padding: .25em .5em; font-size: 1.25em; border: outset 2px gray; margin-bottom: 4px; background-color: #cccccc;">
    <span style="float: left; font-size: medium;">Import Budget</span>
            <b><a href="javascript:closeFrame2();" style="cursor: pointer; color: Black;" title="close window">&#120;</a></b></div>
                <div  id="CopyItemsDiv" style="height: 150px; width: 300px; border: none; margin-left: 15px;" >

                    Div Contents... 
                </div>               
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:06:17.703

恐怕您的示例不完整：http: [//jsfiddle.net/6H7Ss/5/embedded/result/](http://jsfiddle.net/6H7Ss/5/embedded/result/)屏幕上没有显示任何内容。

请更新代码以获得更完整的示例：http: [//jsfiddle.net/6H7Ss/](http://jsfiddle.net/6H7Ss/)

那我试着回答一下。

# php - 使用 XML 获取谷歌网络字体列表

> ID：10540464
> 
> 赞同：1
> 
> 时间：2012-05-10T18:53:46.630
> 
> 标签：php, html, xml, fonts

我在这个文件中有一个谷歌网络字体列表：[http](http://phat-reaction.com/googlefonts.php?format=xml) ://phat-reaction.com/googlefonts.php?format=xml 或者说这种格式等等......

```
<font>
    <font-family>
      <![CDATA[font-family: 'Abel', sans-serif;]]>
    </font-family>
    <font-name>
      <![CDATA[Abel]]>
    </font-name>
    <css-name>
      <![CDATA[Abel]]>
    </css-name>
  </font>
  <font>
    <font-family>
      <![CDATA[font-family: 'Abril Fatface', cursive;]]>
    </font-family>
    <font-name>
      <![CDATA[Abril Fatface]]>
    </font-name>
    <css-name>
      <![CDATA[Abril+Fatface]]>
    </css-name>
  </font>
  <font>
    <font-family>
      <![CDATA[font-family: 'Aclonica', sans-serif;]]>
    </font-family>
    <font-name>
      <![CDATA[Aclonica]]>
    </font-name>
    <css-name>
      <![CDATA[Aclonica]]>
    </css-name>
  </font> 
```

无论如何，我可以使用该文件仅提取 css-name 吗？喜欢，我想要一个喜欢

```
 "Aclonica",
  "Allan",
  "Annie+Use+Your+Telescope",
  "Anonymous+Pro",
  "Allerta+Stencil", 
```

我正在考虑使用 Notepad++ 或 Dreamweaver 进行一些通配符搜索和替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:47:45.040

挖掘...

```
<?php

  $url = 'http://phat-reaction.com/googlefonts.php?format=xml';
  $xml = simplexml_load_file($url, null, LIBXML_NOCDATA);

  foreach($xml->font as $font)
    $fonts[] = $font->{'css-name'};
  echo implode('<br/>', $fonts); 
```

# android - PhoneGap/Cordova 1.6.1 FileReader ReadAsDataURL 在运行 2.3.4 的 Droid X 上崩溃

> ID：10540466
> 
> 赞同：0
> 
> 时间：2012-05-10T18:53:58.733
> 
> 标签：android, cordova, filereader

我在使用 Cordova 1.6.1 在 Droid X 2.3.4 上运行的 Android 应用程序中遇到间歇性崩溃。我创建了一个示例项目 ( [http://bit.ly/IWxTv7](http://bit.ly/IWxTv7) )，它清楚地展示了设备上的错误，但只是间歇性的。这种情况经常发生，如果您运行示例并重复挑选照片，大约 6 次尝试后您应该会看到崩溃。另请注意，这在 iOS 和其他 Android 设备上正常运行，因此它是间歇性的*和*特定于设备/操作系统的事实让我感到困惑。

预期功能描述：该示例允许用户从库或相机中选择一张照片，并将其显示在页面上的图像元素中。实际应用程序的工作方式不同，但这可以隔离问题。

代码在做什么：按钮上的单击处理程序正在调用具有 FILE_URI 目标类型的 navigator.camera.getPicture 方法。选择照片后，系统使用生成的临时 URI 读取图像数据并将其复制到持久位置。这使用 FileReader 对象上的 readAsDataURL 方法。当它工作时，它获取结果并使用 FileWriter 对象上的 write 方法将其保存到持久位置。完成后，它将持久位置的 URI 返回给按钮单击事件处理程序，该处理程序将图像元素的 src 属性设置为持久 URI。（那部分不起作用，可能是因为我没有正确使用它，但它与真正的应用程序无关，所以我没有费心进行故障排除，也不需要回答为什么它不起作用。）

崩溃：运行应用程序，点击页脚中的“照片”按钮。当照片页面加载时，点击“从相机中获取”或“从库中获取”按钮。选择一张照片并返回应用程序。如果该过程成功完成，图像元素将显示损坏的图像图标。如果该过程未成功完成，UI 将保持原样，否则应用程序将崩溃。

我的分析：应用程序在尝试执行 FileReader.readAsDataURL 时间歇性崩溃。我得出这个结论是因为它*总是*我在崩溃之前看到的最后一个日志条目。但是，在过去，由于下游错误，我看到成功执行的内容的日志条目没有显示在控制台中，所以我不能 100% 确定这是原因，只是一个假设。崩溃是间歇性的，但我能够在 6 次尝试内快速重现。有时它会成功，但当它失败时，它似乎总是在尝试执行 readAsDataURL 时这样做。

有没有其他人在尝试以这种方式读取本地文件时遇到错误或崩溃？怎么了，我该如何解决这个问题？替代解决方案或变通办法*必须*让我能够访问 base 64 编码图像数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:06:02.100

如果你有“adb logcat”的输出，我可能会为你指出这个问题，但现在我必须告诉你我的怀疑。Droid X 上的摄像头为 8 MP，这意味着它可以拍出非常高质量的照片，而且文件大小可能非常大。现在，当您尝试将文件作为 Base64 编码数据读取时，数据的大小会变得更大，因为 base64 会产生 33% 的开销。

所以我怀疑正在发生的是您的应用程序正在抛出 OutOfMemoryException 并崩溃。遗憾的是，您无法捕获 OOM 异常，因此除了重新设计应用程序以使用更少的内存外，没有什么可做的。

您可能需要考虑减小图片的宽度/高度或质量以减小整体文件大小。或者，只需将您的图像标签设置为您获得的 FILE_URI，而不是进行任何 base64 编码。

# asp.net - ASP.Net 中的动态查询（SQLDataSource 中的 WHERE 子句）

> ID：10540470
> 
> 赞同：0
> 
> 时间：2012-05-10T18:54:27.317
> 
> 标签：asp.net, sql, vb.net, sqldatasource

我目前正在尝试遍历一个数组（两个值）并在循环内的查询中使用这两个值。请看下面的代码。现在我的代码不起作用。我正在尝试在 SQLDataSource 的“SelectParameters”标签中动态填充“appType”参数，但这不起作用。

有什么建议吗？

```
<%

    Dim appTypes() As String = {"Extranet", "Internet"}

    For Each appType As String In appTypes

%>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ProviderName = "<%$ ConnectionStrings:CMS.ProviderName %>"
    SelectCommand = "SELECT Applications.Name as AppName, Applications.Abbr as AppAbbr, Types.Name as TypeName, Managers.LastName as LastName, Managers.FirstName As FirstName, Managers.EDKeyEmpID as EDKeyID
        FROM Types INNER JOIN (Managers INNER JOIN Applications ON Managers.ID=Applications.Manager) ON Types.ID=Applications.Type
        WHERE (Types.Name = @appType)
           ORDER BY Types.Name, Applications.Name;"
    ConnectionString="<%$ ConnectionStrings:CMS %>">
    <SelectParameters>
        <asp:Parameter DefaultValue="<%=appType%>" Name="appType"  Type="String" />
    </SelectParameters>   
</asp:SqlDataSource>

<asp:Repeater ID="Repeater1" DataSourceID="SqlDataSource1" runat="server">
    <ItemTemplate>
        <%#Eval("AppName")%> (<%=appType%>)
    </ItemTemplate>
</asp:Repeater>

<% Next %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:56:45.997

修改您的 SqlDataSource 以拥有一个`OnSelecting`成员：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" OnSelecting="OnSelecting" 
```

将您的 SelectParameters 重置为正常：

```
<SelectParameters>
    <asp:Parameter Name="appType" Type="String" />
</SelectParameters> 
```

在您的代码隐藏中定义此方法。根据需要实现逻辑。在这里，我从您的中继器中显示了一个虚拟值。这将由您来确定实际来自的方式/位置（SelectedItem 或类似的东西）。

```
Protected Sub OnSelecting(sender As Object, e As SqlDataSourceSelectingEventArgs) Handles SqlDataSource1.Selecting
    e.Command.Parameters("@appType").Value = Repeater1.SomeValue
End Sub 
```

# c++ - 将向量填充到地图中

> ID：10540472
> 
> 赞同：0
> 
> 时间：2012-05-10T18:54:28.017
> 
> 标签：c++, stl, map

我正在尝试使用点向量填充点图。我正在尝试制作一个棋盘游戏，其中棋盘上的每个位置都有一个点（x，y）和合法移动的向量（点对象）。

我似乎无法将地图 KEY 作为一个点。

```
struct Point
{
    Point() {}
    Point(int ix, int iy ) :x(ix), y(iy) {}

    int x;
    int y;
};

Point p_source (2,2);
Point p_next1 (1,2);
Point p_next2 (1,3);
Point p_next3 (1,4);

map <Point, vector<Point> > m_point;

dict[p_source].push_back(p_next1);
dict[p_source].push_back(p_next2);
dict[p_source].push_back(p_next3); 
```

这是我得到的错误

> 在成员函数'bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = Point]':|
> 
> 从 '_Tp& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const _Key&) [with _Key = Point, _Tp = std::vector, std::allocator >, std::allocator, std::allocator > > >, _Compare = std::less, _Alloc = std::allocator, std::allocator >, std::allocator, |
> 
> 从这里实例化|
> 
> c:\program 文件（'__x < __y' 中的 'operator<' 不匹配|||=== 构建完成：1 个错误，0 个警告 ===|

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T18:58:58.577

查看我最喜欢的在线参考资料[，上面写着](http://en.cppreference.com/w/cpp/container/map)：

> ```
> template<
>     class Key,
>     class T,
>     class Compare = std::less<Key>,
>     class Allocator = std::allocator<std::pair<const Key, T> >
> > class map; 
> ```
> 
> Map 是一个关联容器，其中包含唯一键值对的排序列表。**该列表使用应用于键****的比较函数进行排序 。`Compare`**搜索、删除和插入操作具有对数复杂性。地图通常实现为红黑树。

由于您没有提供明确的`Compare`它使用默认排序`std::less<Key>`。似乎我们走在正确的轨道上，因为错误在该类中：

> 在成员函数'bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = Point]':|

让我们[检查一下](http://en.cppreference.com/w/cpp/utility/functional/less)：

> ```
> template< class T >
> struct less; 
> ```
> 
> 用于执行比较的函数对象。用于`operator<`类型`T`。

这与错误消息告诉我们的内容相符：

> '__x < __y' 中的 'operator<' 不匹配

嗯，但是没有`operator<`类型`Point`...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T18:57:22.073

`std::vector<>`您的错误与-*`std::map<>`*要求其键与完全无关`operator<`，或者您提供自定义比较器。最简单的解决方案是在定义之后添加以下内容`Point`：

```
bool operator <(Point const& lhs, Point const& rhs)
{
    return lhs.y < rhs.y || lhs.y == rhs.y && lhs.x < rhs.x;
} 
```

# android-emulator - Titanium Studio Android 模拟器无法启动 MacBook

> ID：10540477
> 
> 赞同：1
> 
> 时间：2012-05-10T18:55:06.417
> 
> 标签：android-emulator, osx-lion

我构建了一个非常基本的应用程序，我是新手，代码如下。该应用程序在 iOS 中运行良好，但是当我尝试在 android 模拟器上午餐时没有任何反应。我有一个包含所有错误的文件，大约 40，但我无法在此处上传文件。

系统信息：MacBook Pro 版本 10.7.3，Xcode 4.3，

Titanium Studio，内部版本：2.1.0.201205041150 (c) 版权所有 2012 Appcelerator, Inc. 保留所有权利。

构建：jenkins-titanium-rcp-development-707（起源/开发）日期：2012 年 5 月 4 日，11:51:06

有什么建议么？

提前致谢

```
 // this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('red');

var isAndroid = false;
if (Titanium.Platform.name == 'android') {
    isAndroid = true;
}

var win = Titanium.UI.createWindow({
    title: 'Test Dropzone Database',
    backgroundColor: 'white',
});

var inputTextContinentName = Titanium.UI.createTextField({
    hintText:'Select One Continent',
    top: 50,
    left: 10,
    width: 200,
    height: 40,
    editable: true,
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_LINE,
});

var queryButton = Titanium.UI.createButton({
    title: 'Get Region',
    top: 90,
    left: 10,
    width: 200,
    height: 40,
    backgroundFocusedColor: 'blue',
//  backgroundColor: 'red',
    color: 'black'
});

var textAreaAnswer = Titanium.UI.createTextArea({
    value : 'I am a textarea',
//  color : '#888',
    top: 130,
    left: 10,
    width: 200,
    height: 50,
    editable: false,
    textAlign : 'left',
//      borderWidth : 2,
    borderColor : 'black',
//  borderRadius : 5
});

win.add(inputTextContinentName);
win.add(queryButton);
win.add(textAreaAnswer);
win.open()

>[ERROR][Netd    (   33)] Unable to bind netlink socket: No such file or directory
>[ERROR][Netd    (   33)] Unable to open quota2 logging socket
>[ERROR][PhonePolicy(   37)] Could not preload class for phone policy: com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
>[ERROR][BatteryService(   85)] usbOnlinePath not found
>[ERROR][BatteryService(   85)] batteryVoltagePath not found
>[ERROR][BatteryService(   85)] batteryTemperaturePath not found
>[ERROR][AndroidRuntime(   85)] Error reporting WTF
>[ERROR][AndroidRuntime(   85)] java.lang.NullPointerException
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.RuntimeInit.wtf(RuntimeInit.java:345)
>[ERROR][AndroidRuntime(   85)]     at android.util.Log$1.onTerribleFailure(Log.java:103)
>[ERROR][AndroidRuntime(   85)]     at android.util.Log.wtf(Log.java:278)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl.getNetworkStatsDetailGroupedByUid(BatteryStatsImpl.java:5738)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl.access$100(BatteryStatsImpl.java:76)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl$Uid.computeCurrentTcpBytesReceived(BatteryStatsImpl.java:2457)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl$Uid.getTcpBytesReceived(BatteryStatsImpl.java:2446)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl.writeSummaryToParcel(BatteryStatsImpl.java:5437)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl.writeLocked(BatteryStatsImpl.java:4836)
>[ERROR][AndroidRuntime(   85)]     at com.android.internal.os.BatteryStatsImpl.writeAsyncLocked(BatteryStatsImpl.java:4818)
>[ERROR][AndroidRuntime(   85)]     at com.android.server.am.ActivityManagerService.<init>(ActivityManagerService.java:1489)
>[ERROR][AndroidRuntime(   85)]     at com.android.server.am.ActivityManagerService.<init>(ActivityManagerService.java:150)
>[ERROR][AndroidRuntime(   85)]     at com.android.server.am.ActivityManagerService$AThread.run(ActivityManagerService.java:1390)
>[ERROR][StrictMode(   85)] A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
>[ERROR][StrictMode(   85)] java.lang.Throwable: Explicit termination method 'close' not called
>[ERROR][StrictMode(   85)]     at dalvik.system.CloseGuard.open(CloseGuard.java:184)
>[ERROR][StrictMode(   85)]     at java.io.FileInputStream.<init>(FileInputStream.java:80)
>[ERROR][StrictMode(   85)]     at com.android.server.pm.UserManager.readUserList(UserManager.java:114)
>[ERROR][StrictMode(   85)]     at com.android.server.pm.UserManager.<init>(UserManager.java:81)
>[ERROR][StrictMode(   85)]     at com.android.server.pm.UserManager.<init>(UserManager.java:85)
>[ERROR][StrictMode(   85)]     at com.android.server.pm.PackageManagerService.<init>(PackageManagerService.java:923)
>[ERROR][StrictMode(   85)]     at com.android.server.pm.PackageManagerService.main(PackageManagerService.java:833)
>[ERROR][StrictMode(   85)]     at com.android.server.ServerThread.run(SystemServer.java:163)
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Lock.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Unlock.ogg
>[ERROR][EventHub(   85)] could not get driver version for /dev/input/mouse0, Not a typewriter
>[ERROR][EventHub(   85)] could not get driver version for /dev/input/mice, Not a typewriter
>[ERROR][CommandListener(   33)] Failed to open /proc/sys/net/ipv6/conf/wlan0/disable_ipv6: No such file or directory
>[ERROR][WifiStateMachine(   85)] Failed to disable IPv6: java.lang.IllegalStateException: Unable to communicate to native daemon for disabling ipv6
>[ERROR][MobileDataStateTracker(   85)] default: Ignoring feature request because could not acquire PhoneService
>[ERROR][MobileDataStateTracker(   85)] default: Could not enable APN type "default"
>[ERROR][ActivityThread(  175)] Failed to find provider info for com.android.inputmethod.latin.dictionarypack
>[ERROR][BinaryDictionaryGetter(  175)] Could not find a dictionary pack
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Effect_Tick.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Effect_Tick.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Effect_Tick.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Effect_Tick.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/Effect_Tick.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/KeypressStandard.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/KeypressSpacebar.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/KeypressDelete.ogg
>[ERROR][SoundPool(   85)] error loading /system/media/audio/ui/KeypressReturn.ogg
>[ERROR][DefaultVoicemailNotifier(  366)] No voicemails to notify about: clear the notification.
>[ERROR][TiApplication(  612)] (KrollRuntimeThread) [3124,3212] APP PROXY: ti.modules.titanium.app.AppModule@4103c728 
```

# frameworks - 用于驱动 Hive 查询的工作流

> ID：10540480
> 
> 赞同：0
> 
> 时间：2012-05-10T18:55:19.257
> 
> 标签：frameworks, workflow, hive

是否有一个很好的框架作为驱动 Hive 查询的工作流？我查看了 Hamake、Oozie、Azkaban 和 Cascading，但似乎它们不适合这个目的。我目前正在使用 shell 脚本来执行此操作，但随着我们业务流程的发展，它变得越来越混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:47:42.897

我没有过多关注许多工作流引擎，但很多人（包括我自己）使用 Hive 客户端（[https://cwiki.apache.org/Hive/hiveclient.html](https://cwiki.apache.org/Hive/hiveclient.html)）从他们选择的语言发出 Hive 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T07:07:34.883

如果您想在输入数据到达或修改时运行配置单元查询，Hamake 非常好。如果您想在给定的时间表上运行您的配置单元查询，Oozie 是很好的选择。

# c# - C# - Windows Mobile - 与 Zebra RW 420 配对

> ID：10540482
> 
> 赞同：1
> 
> 时间：2012-05-10T18:55:27.457
> 
> 标签：c#, windows-mobile, bluetooth, windows-mobile-6

更新：这可能不是“配对”。这可能只需要启动一个服务并绑定到一个端口。但是，此代码也不存储它。即使在应用程序关闭后，我也需要存储设备。

我正在 Windows Mobile 6 手持设备上构建一个特别适合 Zebra RW 420 的程序。应用程序需要允许移动设备与 COM1 上的打印机配对。我相信我非常接近它，但我无法让这对请求起作用。

我可以与打印机进行通信，甚至可以通过直接连接和打印进行打印，但我无法让移动设备真正与之配对。我尝试了各种别针，包括`null`、`"1"`、`"0000"`和`"1234"`。无论如何，该方法总是返回 false。任何建议或想法为什么这可能会失败？我可以配对仅在 WM6 蓝牙菜单中找到的设备，但不能在我的应用程序中配对。

需要注意的是，当程序说它正在尝试配对时，打印机上的小灯泡图标会亮起，但大约 5 到 10 秒后，它会失败。

```
BluetoothSecurity.PairRequest(device, "1")) 
```

* * *

附加信息：

我已使用此代码成功与我的 Android 手机配对。

然后我登录并在 Zebra 打印机上设置了一个 PIN。但是，即使我知道打印机中的引脚正确/设置，此代码仍然无法与打印机配对。

* * *

来自[https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1336682809706&answerid=16777216&iqaction=5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSO8031 %26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=6292341,26,43#](https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1336682809706&answerid=16777216&iqaction=5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSO8031%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=6292341,26,43#)

Zebra 支持蓝牙的移动打印机只是“从属”设备。打印机将与任何试图建立有效连接的“主”设备配对。由于只有主设备可以发起连接，打印机不存储配对数据，该功能始终在主设备上完成。打印机一次只能连接到一个主设备，但任何数量的已存储打印机配对信息的主设备都可以启动与打印机的连接，而无需重新发现它。

我猜这意味着 InTheHand.Net BluetoothSecurity.PairRequest 可能不适用于这种类型的配对？

* * *

在 WM 手持设备的蓝牙部分，在“设备”选项卡下，我可以添加设备。我需要基本上做到这一点。我需要在该列表中注册设备，然后在“COM 端口”部分将其设置为使用 COM 1。我正在使用的应用程序实际上并没有打印。它的唯一目的是为其他应用程序准备打印机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:41:35.710

Zebra 的引述听起来像是实际上根本不需要配对。你是从你的应用程序打印吗？如果是这样，只需连接到 SPP 服务并发送文本。

```
BluetoothAddress addr = ...
Guid serviceClass;
serviceClass = BluetoothService.SerialPort;
var ep = new BluetoothEndPoint(addr, serviceClass);
var cli = new BluetoothClient();
cli.Connect(ep);
Stream peerStream = cli.GetStream();
peerStream.Write ... 
```

（来自[通用蓝牙数据连接](http://32feet.codeplex.com/wikipage?title=General%20Bluetooth%20Data%20Connections)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:51:12.550

在与此方法配对之前，需要正确配置 Zebra 移动打印机。这是我所做的：

*   首先，我在打印机上运行了以下命令：

.

```
! U1 setvar "bluetooth.authentication" "setpin"

! U1 getvar "bluetooth.authentication"

! U1 getvar "bluetooth.enable"

! U1 getvar "bluetooth.discoverable"

! U1 setvar "bluetooth.bluetooth_pin" "0000"

! U1 getvar "bluetooth.bluetooth_pin" 
```

*   然后，使用此代码的应用程序成功运行。

.

```
int pair_req = 0;
try
{
    if (BluetoothSecurity.SetPin(device, "0000")) {
        while (status == false && pair_req < 3)
        {
            ++pair_req;
            status_box.Text = status_box.Text + '\n' + "Attempt " + pair_req.ToString();
            status_box.Update();

            if (BluetoothSecurity.PairRequest(device, "0000"))
            {
                status = true;
                client.Refresh();
                status_box.Text = "Paired Successfully.";
                status_box.Update();
                Thread.Sleep(5000);
            }
            else
            {
                status = false;

            }

        }
    }
}
catch (ArgumentNullException e)
{
    status_box.Text = "Pair failed.";
    status_box.Update();
    Thread.Sleep(5000);
}

status_box.Update();
Thread.Sleep(400); 
```

# php - PDOstatement (MySQL)：将值 0 插入 bit(1) 字段会导致 1 写入表中

> ID：10540483
> 
> 赞同：25
> 
> 时间：2012-05-10T18:55:27.860
> 
> 标签：php, mysql, pdo, prepared-statement

我正在使用 bit(1) 字段来存储布尔值并使用 PDO 准备好的语句写入表中。

这是测试表：

```
CREATE TABLE IF NOT EXISTS `test` (
  `SomeText` varchar(255) NOT NULL,
  `TestBool` bit(1) NOT NULL DEFAULT b'0'
) ENGINE=MEMORY DEFAULT CHARSET=latin1; 
```

这是测试代码：

```
$pdo = new PDO("connection string etc") ;
$statement = $pdo->prepare('INSERT INTO `test` (SomeText,TestBool) VALUES (?,?)') ;
$statement->execute(array("TEST",0)) ; 
```

运行该代码会在 TestBool 下给我一个值为 1 的行。使用 bindValue() 和 bindParm() 也是如此。我还尝试了具有相同结果的命名占位符（而不是？）。

然后我尝试了：

```
$statement = $pdo->prepare('INSERT INTO `test` (SomeText,TestBool) VALUES ("TEST",0)') ;
$statement->execute() ; 
```

哪个工作正常（TestBool 的值为 0）。将 SQL 直接插入 MySQL 也可以。

请注意，插入 1 始终有效。

那么为什么占位符不能插入值 0 呢？（我该怎么做？）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-10T21:06:52.100

BIT 列是 mysql 中的二进制类型（尽管它被记录为数字类型 - 这并不完全正确），由于客户端库的问题（PDO 问题证明了这一点），我建议避免使用它。如果您将列类型修改为 TINYINT(1)，您将省去很多麻烦

TINYINT(1) 当然会为每一行消耗完整字节的存储空间，但根据 mysql docs BIT(1) 也会这样做。

来自： [http ://dev.mysql.com/doc/refman/5.1/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.1/en/storage-requirements.html)

位存储要求是：大约 (M+7)/8 个字节，这表明 BIT(M) 列也是字节对齐的。

我也发现了这个：[https ://bugs.php.net/bug.php?id=50757](https://bugs.php.net/bug.php?id=50757)

因此，您可以检查以下代码是否按预期工作：

```
$pdo = new PDO("connection string etc") ;
$statement = $pdo->prepare('INSERT INTO `test` (SomeText,TestBool) VALUES (:someText,:testBool)') ;
$statement->bindValue(':someText', "TEST");
$statement->bindValue(':testBool', 0, PDO::PARAM_INT);
$statement->execute(); 
```

您也可以尝试使用与 PARAM_INT 不同的类型提示，即使您成功了，我还是建议您更改为 TINYINT。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T19:02:01.303

pdo 默认情况下不为 mysql 驱动程序使用准备好的语句，它通过在幕后为您创建动态 sql 来模拟它们。发送到 mysql 的 sql 最终是一个单引号 0，如 '0'，mysql 将其解释为字符串，而不是数字。

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

它现在应该可以工作了，而且您实际上也将使用真正的准备好的语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-21T07:24:57.307

因为`prepare`添加`'`到您的参数，您只需`b`在参数名称之前添加

```
$statement = $pdo->prepare('INSERT INTO `test` (SomeText,TestBool) VALUES (?, b?)');
$statement->execute(array("TEST", 1 /* or TRUE */)); 
```

**注意**：您可以使用`1, 0` 或`TRUE, FALSE`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-03T15:30:21.527

你可以试试这个没有参数

```
if($_POST['bool'] == 1)
{
 $bool = "b'1'";
}
else
{
 $bool = "b'0'";
}
$statement = $pdo->prepare("INSERT INTO `test` (SomeText,TestBool) VALUES (?,$bool)") ;
$statement->execute(array("TEST")) ; 
```

并且没有安全问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-23T17:44:59.060

只需在您的位变量之前添加 (bool)，如下所示：

```
$id = 1234;
$active = 0;
$statement = $pdo->prepare('INSERT INTO `test_table` (id, active) VALUES (?, ?)');
$statement->execute([$id, (bool) $active]); 
```

# sql - Oracle - 从表中选择 n-1 条记录

> ID：10540485
> 
> 赞同：2
> 
> 时间：2012-05-10T18:55:34.497
> 
> 标签：sql, oracle

我有一张数据表，想检索倒数第二条记录。

这是怎么做到的？

```
TABLE:        results
              -------
              30
              31
              35 
```

我需要得到31。

我一直在尝试使用rownum，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:57:58.763

假设您想要第二高的数字并且没有平局

```
SELECT results
  FROM (SELECT results,
               rank() over (order by results desc) rnk
          FROM your_table_name)
 WHERE rnk = 2 
```

根据您想要处理关系的方式，您可能需要`rank`、`dense_rank`或`row_number`分析函数。例如，如果有两个 35，您是否希望返回 35？还是31？如果有两个 31，您希望返回单行吗？或者你想要两个 31 的返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T10:28:16.863

## 这可以用于 n th rank ##

```
select Total_amount from (select Total_amount, rank() over (order by Total_amount desc) Rank from tbl_booking)tbl_booking where Rank=3 
```

* * *

# ruby-on-rails - 仅在编译资产后 Internet Explorer 中的 CSS 和 Javascript 错误

> ID：10540487
> 
> 赞同：0
> 
> 时间：2012-05-10T18:55:39.170
> 
> 标签：ruby-on-rails, internet-explorer, asset-pipeline

所以我在我的 Rails 应用程序的 Internet Explorer 中遇到了一些 CSS 和 Javascript 错误。问题是，当资产未编译时，一切正常。但是，一旦资产被编译成一个 application.css 和一个 application.js，我就开始遇到很多问题（并且仅在 Internet Explorer 7、8、9 中）。知道为什么会发生这种情况吗？我不需要关于确切错误的具体答案，而只需要一般的事情来帮助我开始寻找修复程序。

基本上，为什么编译资产会导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:54:03.110

欢迎来到 IE 4095 选择器限制错误：IE 忽略 css 文件中第 4095 个选择器之后的所有内容。

[http://support.microsoft.com/kb/262161](http://support.microsoft.com/kb/262161)

你可以在这里测试这个案例：http: [//marc.baffl.co.uk/browser_bugs/css-selector-limit/](http://marc.baffl.co.uk/browser_bugs/css-selector-limit/)

您的单个 css 文件不会扩展此数量（希望如此），但所有 css 文件合并 - 可能。

如果您使用 jammit 进行压缩，您可以通过编辑 assets.yml 文件来拆分压缩的资产文件：

```
stylesheets:
  common:
   file1.css
   file2.css
  other:
   file3.css
   file4.css 
```

然后 jammit 会将您的文件拆分为 common.css 和 other.css 不要忘记在您的视图中调用这些文件：

```
 <%= include_stylesheets :common, :media => 'all' -%>
   <%= include_stylesheets :other, :media => 'all' -%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:16:12.610

您是否在布局中使用任何 IE 特定样式表或 java 代码..

喜欢

```
<!--[if IE ] --><%= stylesheet_link_tag 'ie' %><!-- [endif]--> 
```

如果是这样，那么你需要添加这样的东西

```
config.assets.precompile += %w(ie.css) 
```

或者可能是压缩问题 config.assets.compress == false

或者如果您使用任何 3rd 方 CSS 东西，如 css3pie 等

# python - Python Dropbox API 错误：“提供的令牌不允许此操作”

> ID：10540493
> 
> 赞同：1
> 
> 时间：2012-05-10T18:56:17.727
> 
> 标签：python, dropbox, dropbox-api

我一直试图让这个脚本工作但没有取得多大成功。我可以补充一下，我完成了整个设置和授权过程，没有任何问题。一旦脚本提示我在浏览器中打开链接并单击“允许”按钮，我就会收到错误消息（见下文）：

```
# Include the Dropbox SDK libraries
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website
APP_KEY = 'iqxjea6s7ctxv9j'
APP_SECRET = 'npac0nca3p3ct9f'

# ACCESS_TYPE should be 'dropbox' or 'app_folder' as configured for your app
ACCESS_TYPE = 'dropbox'

sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE )

request_token = sess.obtain_request_token()

# Make the user sign in and authorize this token
url = sess.build_authorize_url(request_token)
print "url:", url
print "Please authorize in the browser. After you're done, press enter."
raw_input()

# This will fail if the user didn't visit the above URL and hit 'Allow'
access_token = sess.obtain_access_token(request_token)

client = client.DropboxClient(sess)
print "linked account:", client.account_info()

f = open('t.txt')
response = client.put_file('/magnum-opus.txt', f)
print "uploaded:", response

folder_metadata = client.metadata('/')
print "metadata:", folder_metadata

f, metadata = client.get_file_and_metadata('/magnum-opus.txt',rev='362e2029684fe')
out = open('magnum-opus.txt', 'w')
out.write(f)
print(metadata) 
```

这是错误：

```
url: https://www.dropbox.com/1/oauth/authorize?oauth_token=puetsb17t1g2htd
Please authorize in the browser. After you're done, press enter.

linked account: {'referral_link': 'https://www.dropbox.com/referrals/NTMxMzM4NjY5', 'display_name': 'Greg Lorincz', 'uid': 3133866, 'country': 'GB', 'quota_info': {'shared': 78211, 'quota': 28185722880, 'normal': 468671581}, 'email': 'alkopop79@gmail.com'}
Traceback (most recent call last):
  File "dropb.py", line 28, in <module>
    response = client.put_file('/magnum-opus.txt', f)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/client.py", line 149, in put_file
    return RESTClient.PUT(url, file_obj, headers)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py", line 146, in PUT
    return cls.request("PUT", url, body=body, headers=headers, raw_response=raw_response)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py", line 113, in request
    raise ErrorResponse(r)
dropbox.rest.ErrorResponse: [403] 'The provided token does not allow this operation' 
```

任何想法为什么？

# system.reactive - 反应式扩展是否适合公共汽车？

> ID：10540497
> 
> 赞同：15
> 
> 时间：2012-05-10T18:56:36.990
> 
> 标签：system.reactive, cqrs, event-sourcing

我一直在使用 Rx 在单个应用程序中创建事件总线（想想 CQRS/ES），它似乎工作得很好。然而，在调查了一堆不同的事件溯源框架之后，我还没有看到使用过一次 Rx。与基于反射/容器的调度程序相比，它似乎非常适合，但也许我缺少一些东西。我宁愿不花很多时间在 3 个月内大获成功的事情上。Rx 不适合有什么原因吗？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T20:55:58.270

Rx 绝对是一个出色的事件驱动和反应式*编程*框架。事实上，我会说将自己限制在`IObservable`用于调度的接口实际上是比任何更重的重量更好的形式。然后，您自然会使用面向“消息传递”的风格，这种风格非常适合规模化和不变性。关注点分离变得很自然。

将来您可能会遇到的困难是您的系统是否超出了单个应用程序。Rx 在单个应用程序中非常简单，但是一旦您需要在应用程序之间添加“基础设施”，就需要付出一些努力。并不是说它不起作用！确实如此，当您为您的实例`Subject`和`IObservable`实例寻找不同的来源时——它只需要在某些情况下手动完成，而其他“事件溯源”框架（您的想法是什么？）可能有更大范围的外部“适配器” '。

关于通常以这种方式使用 Rx（即，在互联网上）。首先，请记住，除了 .NET 之外还有许多其他平台，Rx 不会出现在其中任何一个平台中。反应式风格可能会使用不同的名称。

其次，[你](http://social.msdn.microsoft.com/Forums/is/rx/thread/a706c9f9-d55c-4781-9a9c-a1b2cdb98924)[不是](http://abdullin.com/journal/2010/9/19/domain-driven-design-event-sourcing-rx-and-marble-diagrams.html)[一个](http://blog.perbrage.com/tag/event-sourcing/)[人](http://abdullin.com/journal/2010/8/21/rx-works-nicely-with-ddd-and-event-sourcing.html)。_ _ 包括[那些非常喜欢 Rx 的 CQRS 的人，他们想在 Scala 和 JVM 中实现它](http://erikrozendaal.blogspot.com.au/2010/10/event-sourcing-and-state-derivation.html)！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T23:15:51.507

[这是Rx 中的消息总线](https://github.com/reactiveui/ReactiveUI/blob/develop/src/ReactiveUI/MessageBus.cs)示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-12T10:42:24.640

如果您想在两个进程之间使用 RX，请查看：

*   [NetMQ.ReactiveExtensions](https://github.com/NetMQ/NetMQ.ReactiveExtensions)。这是一个 RX 包装器，它使用 ZeroMQ 在网络上传输消息。
*   [观察](https://github.com/inter8ection/Obvs)。
*   Kafka 上的任何 RX 包装器。
*   任何进程间消息传递系统上的任何 RX 包装器，例如 RabbitMQ。

所有这些库都在做同样的事情：它们实现了 Microsoft 的 IObservable 和 IObserver 接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T12:34:24.043

如果您想在 .NET 中使用支持 Rx 的 In-Memory Bus，那么您应该查看[MemBus](https://github.com/flq/MemBus)。

另一种方法是`MessageBus`从[ReactiveUI](http://reactiveui.net/)使用。但是因为它没有在专用库中发布，所以您必须安装整个 ReactiveUI 库，这仅在 WPF 应用程序中有意义，而不是在旧版 WinForms 项目中。

# matlab - Arrayfun 语法和类方法的用法

> ID：10540500
> 
> 赞同：0
> 
> 时间：2012-05-10T18:56:47.797
> 
> 标签：matlab

这是给我带来麻烦的一行代码。

```
arrayfun(@(x)container.nodelist(x).config(@a_func_handle,0),2:6); 
```

Container 是一个类，其属性之一是节点的对象数组，该数组称为节点列表。

每个节点都有一个名为 config 的函数，用于对其进行初始化。Config 需要一个输入，其中一个是函数的句柄。我传递的函数句柄需要一个与之一起传递的常量，用 0 表示。

在这种情况下，我想使用特定函数配置 nodelist 中位置 2 到 6 的节点，所以我想使用 arrayfun 而不是 for 循环。

不幸的是，Matlab 对函数配置有“太多输入”的错误。我写错了什么？这个例子清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:08:40.347

我想到了。我最终做的是使用嵌套的匿名函数，如下所示：

```
arrayfun(@(y)y.config(@(x)(configSlave(x,0))),exp.pico_list(2:6)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:48:58.030

如果我理解正确，`config`是您的`nodelist`数组中包含的对象的一种方法。在这种情况下，以通常的 MATLAB 方式，您调用该方法的对象将作为第一个参数传递。例如，您可能需要编写如下`config`方法：

```
function config(obj, fcnHandle, value)
    obj.FunctionHandle = fcnHandle;
    obj.Value = value;
end 
```

# python - wx Python标签右对齐

> ID：10540501
> 
> 赞同：0
> 
> 时间：2012-05-10T18:56:52.573
> 
> 标签：python, label, wxwidgets

我有一个要右对齐的标签，并且文本要右对齐。但是当我的代码运行并且标签更新它时，StaticText 会对齐到按钮对象的左侧。我的代码如下

```
hbox14 = wx.BoxSizer(wx.HORIZONTAL)
self.buttonRemove = wx.Button(self.panel,label='Remove')
self.buttonRemove.Bind(wx.EVT_BUTTON,self.removeAccount) # Remove account from list
self.labelSecTic = wx.StaticText(self.panel,label='0.0',style=wx.TE_RIGHT|wx.EXPAND)
self.labelSecTic.SetForegroundColour('white')
self.labelSecTic.SetBackgroundColour('black')
hbox14.Add(self.buttonRemove,proportion=0)
hbox14.Add(self.labelSecTic,proportion=1,flag=wx.ALIGN_RIGHT|wx.TE_RIGHT|wx.EXPAND) 
```

当标签更新时，我打电话

```
self.gui.labelSecTic.SetLabel(str(self.diff)) 
```

关于如何使 labelSecTic 保持固定在面板右侧的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:36:15.837

首先附注：样式`wx.TE_RIGHT`是 for `wx.TextCtrl`，它可能对静态文本没有任何作用。关于您的真正问题，您应该强制设置尺寸器的布局`hbox14`。不确定你的窗口的 sizer/panel 结构是什么，你应该调用`Layout`一些祖先`hbox14`，它可能是`self.gui.panel`甚至`self.gui`（不知道是什么`gui`），例如：

```
self.gui.labelSecTic.SetLabel(str(self.diff))
self.gui.Layout() 
```

或者

```
self.gui.labelSecTic.SetLabel(str(self.diff))
self.gui.panel.Layout() 
```

# iphone - 获取给定字体和矩形的字符串长度

> ID：10540505
> 
> 赞同：2
> 
> 时间：2012-05-10T18:57:32.793
> 
> 标签：iphone, objective-c, ios, ios5, core-graphics

我有一个自定义`UIView`类，并且`- (void)drawRect:(CGRect)rect`我想在其中绘制一些文本。但是，我希望在系统字体大小为 12 时将文本块的最大宽度限制为 84 像素。如果文本超过此宽度，我想将其剪切并将最后 3 个字符设为“...”。

例子：

```
"This is some text"    // length okay
"Information co..."    // length truncated 
```

我知道我可以通过`NSString`'s计算具有给定字体的字符串的宽度`- (CGSize)sizeWithFont:(UIFont *)font`，但是如何获得 84px 宽度的最大字符串长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:25:14.570

如果我正确理解您的情况，那么您应该使用该方法
`- (CGSize)drawAtPoint:(CGPoint)point forWidth:(CGFloat)width withFont:(UIFont *)font lineBreakMode:(UILineBreakMode)lineBreakMode`并将 UILineBreakModeTailTruncation 用于换行模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:45:40.363

我想你想知道特定宽度和字体允许的最大字符数。不幸的是，这是不可能知道的，因为有许多不同的字符大小（'m' 比 'l' 宽）。

你可以做的是调用：

```
[@"Your text here" sizeWithFont:yourFont minFontSize:smallestFontSizeYouWillAccept actualFontSize:&pointerToYourFontSizeFloatValue forWidth:yourWidthConstraint lineBreakMode:yourLineBreakMode]; 
```

这将改变您的 fontSize 浮点值（因为您将指针传递给它），它现在将是您可以使用的最大字体大小而无需换行。使用您给它的浮动，您可以创建一个新字体并将大小设置为您的浮动。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:11:19.597

此方法对您的情况很有帮助： `- (CGSize)drawAtPoint:(CGPoint)point forWidth:(CGFloat)width withFont:(UIFont *)font lineBreakMode:(UILineBreakMode)lineBreakMode`

这是您案件的可靠线索

# ruby-on-rails - Rails 3 Ajax文件上传不成功与remotipart gem

> ID：10540506
> 
> 赞同：1
> 
> 时间：2012-05-10T18:57:43.607
> 
> 标签：ruby-on-rails, ruby, ajax, uploading

我在使用 gem 'remotipart'、'~> 0.4' 在 Rails 3.0.5 Ruby v 1.8.7 中上传 Ajax 文件时遇到问题。当我删除 if @asset.save? 时，我成功显示了警报？控制器中的语句，但是当它在那里时，不调用 js 文件。由于某种原因，资产没有被保存。

有任何想法吗？

控制器：

```
def create
  @asset = Asset.new(params[:asset])

  respond_to do |format|
    if @asset.save
      format.html
      format.js
    end
  end
end 
```

看法：

```
<%= form_for @asset, :remote => true, :html => {:multipart => true}, :id =>             "new_asset_form" do |f| %>
    <%= render :partial => 'shared/error_messages', :locals => { :target => @asset } %>
    <%= f.hidden_field :company_id, :value => current_company.id %>
    <%= f.file_field :asset %> 
    <%= submit_tag 'Add', :class => 'submit' %>
<% end %> 
```

创建.js.erb：

```
<%= remotipart_response do %>
  // Display a Javascript alert
  alert('success!');
  <% if remotipart_submitted? %>
    alert('submitted via remotipart')
  <% else %>
alert('submitted via native jquery-ujs')
  <% end %>
<% end %> 
```

终端日志：

```
Started POST "/assets" for 127.0.0.1 at Thu May 10 14:45:40 -0400 2012
  Processing by AssetsController#create as JS
  Parameters: {"commit"=>"Add",     "authenticity_token"=>"9TDxFQfTGrdz8gKti413FoIr1JUSwLGQQXv/tJQd+sY=", "utf8"=>"✓", "_"=>"",     "asset"=>{"company_id"=>"5"}}
  Company Load (0.5ms)  SELECT `companies`.* FROM `companies` WHERE     `companies`.`subdomain` = 'demo' LIMIT 1
  User Load (0.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 295 AND (company_id = 5) LIMIT 1
  CACHE (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 295 AND (company_id = 5) LIMIT 1
Rendered assets/create.js.erb (0.7ms)
Completed 200 OK in 182ms (Views: 8.9ms | ActiveRecord: 1.2ms) 
```

谢谢你的帮助。被困了好几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:26:59.777

尝试升级到最新版本的 Remotipart，可在此处找到：http: [//os.alfajango.com/remotipart/](http://os.alfajango.com/remotipart/)

# symfony - 在 Symfony2 中的“vendors”文件夹上运行“bin/vendors install”并进行本地修改

> ID：10540515
> 
> 赞同：1
> 
> 时间：2012-05-10T18:58:45.300
> 
> 标签：symfony

在 Symfony2 中，当我运行命令时，`bin/vendors install`我收到以下消息：

```
?? src/Symfony/Component/Validator/Constraints/Alphanumeric.php
?? src/Symfony/Component/Validator/Constraints/AlphanumericValidator.php
?? src/Symfony/Component/Validator/Constraints/GreaterThan.php
?? src/Symfony/Component/Validator/Constraints/GreaterThanValidator.php
"symfony" has local modifications. Please revert or commit/push them before running this command again. 
```

列出的文件是我按照[此处](http://symfony.com/doc/master/cookbook/validation/custom_constraint.html)的说明书条目创建的自定义约束验证器。

有没有办法更新 deps 文件而忽略我所做的更改？我的目标是安装一个新包，同时保留我创建的约束验证器文件。

**更新：**彼得的解决方案是正确的，唯一剩下的就是在实体中“使用”正确的命名空间，如下所示：

（代码中有西班牙语单词，我再次假设我在 DemoBundle 中只是为了保持一致性）

```
namespace Acme\DemoBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Acme\DemoBundle\Component\Validator\Constraints as CustomAssert;

/**
 * @ORM\Entity
 */
class Employee
{
    //...

    /**
     * @ORM\Column(type="string", length=20)
     * @Assert\NotBlank()
     * @CustomAssert\Alphanumeric()
     */
    protected $alfanum;

    //...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:14:47.150

您永远不应更改供应商目录中包含的任何内容。如果您有新功能要添加（并且您总是必须添加），请将这些功能放在您的应用程序特定的捆绑包中（在 src 目录中）。

您的命名空间/类方案应遵循框架约定。例如，您的约束验证器应该进入“src/MyNamespace/MyBundle/Validator/Constraint”（并且您的命名空间应该是“MyNamespace\MyBundle\Validator\Constraint”）。

请注意，您的版本管理器应该忽略供应商目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:25:15.757

不，不要这样做。您编写的自定义验证器（或自定义任何东西）应该是*您*命名空间的一部分，而不是 Symfony 的。而且它们当然根本不应该是供应商目录（除非您编写自己的供应商）。这是命名空间和供应商管理的*重点*——避免冲突！

因此，您需要将自定义验证器移动到应用程序的源代码中。以 AcmeDemoBundle 为例...

为以下路径创建目录

```
src/Acme/DemoBundle/Component/Validator/Constraints 
```

然后*将*您的自定义验证器移动到此文件夹中。然后相应地更新每个验证器类的命名空间

```
namespace Acme\DemoBundle\Component\Validator\Constraints 
```

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T19:37:29.480

您可以将自定义验证器放在自己的包中，并以下列方式引用它，

```
# in validation.yml

# define namespace identifier
namespaces:
  namespace_name: Path\To\Your\Validator\Namespace\

# then in your entity
FQCN\Of\Entity:
  constraints:
    - Path\To\Your\Validator\Namespace\Alphanumeric
    # or
    - "namespace_name:Alphanumeric": ~ 
```

# objective-c - 用于传递 NSStrings 的 c 样式数组的 Objective-c 语法

> ID：10540521
> 
> 赞同：4
> 
> 时间：2012-05-10T18:59:16.100
> 
> 标签：objective-c, arrays, syntax, methods, parameter-passing

`NSString*`将包含的 c 样式数组传递给 Objective-c 方法的最佳语法是什么？这是我目前正在使用的：

```
- (void) f:(NSString **) a {

}

- (void) g {
    NSString* a[2] = {@"something", @"else"};
    [self f:a];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:22:33.963

您唯一的其他选择如下：

```
- (void) f:(NSString* []) a {

} 
```

编译时是一样的。我不知道“最好”，但我更喜欢这个版本的可读性。更容易推断出您传递的指针旨在用作数组。指向指针的指针在其他地方有不同的用途（参见`NSError**`iOS SDK 中使用的各种参数），因此区分是有帮助的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:23:36.287

稍微好一点的是：

```
- (void) f:(NSString *[]) a 
```

因为它清楚地表明它期望一个对 NString 的引用的数组（通过引用传递），而不是对 NString 的引用的引用。

但是，这很可能**不会**改变编译器的类型检查，您可以`NSString **`毫无问题地通过。如果添加边界也是如此：

```
- (void) f:(NSString *[2]) a 
```

在这里，编译器很可能会忽略 2 - 无论是在调用时还是在正文中，您都只是添加了一个“注释”。（如果要传递多维数组，则需要指定除最后一个索引之外的所有数组。）

**附录**

*由 Mike Keskinov 提示（见评论）*

**ARC 更新**

在 ARC 下，问题中的声明：

```
NSString* a[2] = {@"something", @"else"}; 
```

没有明确的所有权限定符被视为：

```
NSString* __strong a[2] = {@"something", @"else"}; 
```

那是对字符串的强引用数组。当传递指向变量本身的指针时，在这种情况下是指向数组的指针，编译器需要知道指向变量的所有权资格。在编写指向数组的指针的情况下，编译器没有默认值，因此上述答案中的声明：

```
- (void) f:(NSString *[]) a 
```

将产生错误，正如 Mike Keskinov 在下面的评论中所报告的那样，您必须插入一个明确的所有权限定符：

```
- (void) f:(NSString * __strong []) a 
```

有了这些信息，编译器就知道如何自动处理数组中的字符串引用——在`f`编译器的主体中，将根据需要自动保留和释放`NSString`引用。

有关 ARC 和指向变量/指针的指针的更多详细信息，请参阅处理 ARC和[NSError 和 __autoreleasing](https://stackoverflow.com/questions/13587742/nserror-and-autoreleasing/13590696#13590696)[中的指针对指针所有权问题](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc/8829294#8829294)。

**用于常量数组**

虽然不是原始问题的一部分，但很明显，许多人使用 C 数组作为在 Objective-C 中拥有字符串*常量*数组的一种方式。对于这种特殊用途，请注意：

1.  如果数组和参数类型被声明为对字符串的常量引用数组，则数组元素不能更改；

2.  使数组静态也将确保它只创建和初始化一次，即使使用函数声明也是如此；和

3.  如果您的 C 数组仅包含字符串文字，则`__strong`不需要默认所有权限定符，因为字符串文字是不朽的。相反，`__unsafe_unretained`可以使用限定符，数组中的引用将始终有效。

这些产生代码片段：

```
static NSString * const __unsafe_unretained a[2] = {@"something", @"else"}; 
```

和：

```
- (void) f:(NSString * const __unsafe_unretained[]) a 
```

并且您的目标是常量字面量的常量数组`NSString`。编译器将不允许修改数组或插入冗余内存管理调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:04:27.320

最好的方法是使用 NSArray 而不是 c 样式的数组。

# android - 单击 ListView 中的 ImageView 时显示按钮

> ID：10540523
> 
> 赞同：0
> 
> 时间：2012-05-10T18:59:24.053
> 
> 标签：android

我的问题是，当我单击`ImageView`. `ListView`按钮 id 是 eliminarMen in `main.xml`。

我尝试在 ArrayAdapter 类中使用 inflate，但按钮未显示。

这是 ArrayAdapter 类的代码：

```
package sms.manager;

import android.content.Context;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class Array extends ArrayAdapter{

private String[] datos;
private ImageView img;
private Button eliminar;

public Array(Context context, int textViewResourceId,String[] items) {
   super(context, textViewResourceId, items);

   this.datos=items;

}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

  View v=convertView;

    if(v==null){
      LayoutInflater 
    vi=(LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
      v=vi.inflate(R.layout.cheks, null); 

    }

        LayoutInflater 
    vi=(LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        View view=null;
        view=vi.inflate(R.layout.main, null);
        eliminar=(Button)view.findViewById(R.id.eliminarMen);

        TextView contiene=(TextView)v.findViewById(R.id.contieneTexto);
        contiene.setText(datos[position]);

        img=(ImageView)v.findViewById(R.id.icon);
        final ImageView [] imagen=new ImageView[datos.length];
        imagen[position]=img;
        imagen[position].setTag("unchecked");

        imagen[position].setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            eliminar.setVisibility(View.VISIBLE);

            if (imagen[position].getTag()=="unchecked"){
              imagen[position].setImageResource(R.drawable.check);
              imagen[position].setTag("checked");
            }
            else
            {

                             imagen[position].setImageResource(R.drawable.uncheck); 
                imagen[position].setTag("unchecked");
            }
        }

        });

    return v;
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:56:31.187

要通过适配器中的 OnClick 在您的活动中发生某些事情，您必须使用如下界面：

```
public class MyArrayAdapter extends ArrayAdapter {

    public interface OnImageClickListener {
        public void onImageClick(int id);
    }

    public MyArrayAdapter(Context context, int textViewResourceId, String[] items) {
        super(context, textViewResourceId, items);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        ....

        imagen[position].setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                OnImageClickListener activity = (OnImageClickListener) getContext();
                activity.onImageClick(R.id.some_image_id);
            }
        });

        .....

        return v;
    }
} 
```

那么你的Activity需要实现这个接口：

```
 public class MainMenuActivity extends Activity implements OnImageClickListener{

        ImageView someImageView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_main_menu);

            someImageView = (ImageView) findViewById(R.id.your_image_view);
        }

        @Override
        public void onImageClick(int id) {
            someImageView.setImageResource(id);
        }
    } 
```

如果您的 Activity 没有实现此接口，您的 LogCat 中会出现错误

*编辑*

刚刚注意到您想显示一个按钮而不是显示图像。这非常相似，您仍然会使用界面，这意味着您不需要传递 id 引用并且在您的 Activity 中`onImageClick()`只需使用`setVisibility`（假设按钮`android:visibility="gone"`在您的 XML 布局中设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:27:40.343

这是 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearMain"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" android:onClick="eliminar">

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:scrollbars="vertical">

    <TableRow
        android:id="@+id/nuevo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" > 
```

这是活动代码：

```
package sms.manager;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.os.Handler;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
 import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.Toast;

public class SMSManagerActivity extends Activity implements        

OnItemClickListener,OnTouchListener  {

private String numero,texto,recibeNumBandera="";
public Button nuevo_mensaje,marcarVarios,eliminarMen;
public ListView mensajes;
private String []almacenaNombres,almacenaNumeros,datos,datos2;
private int posicion,n,cantFilas=0,cant,posicionInfo=0;
private ArrayAdapter<?> adaptador;
public boolean entra=true,banderaServicio=true,inhabilitar=true;
private TimerTask task;
private Handler handler=new Handler();
private Timer t=new Timer();
private String maximo="";
private TableRow menu,nuevo,tableRow1;
private TextView contienetexto;
public ImageView icono;
private LinearLayout layoutCheks,linearMain;
private Array array;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mensajes=(ListView)findViewById(R.id.mensajes);
    mensajes.setOnItemClickListener(this);
    menu=(TableRow)findViewById(R.id.menu);
    marcarVarios=(Button)findViewById(R.id.marcarVarios);
    eliminarMen=(Button)findViewById(R.id.eliminarMen);
    nuevo=(TableRow)findViewById(R.id.nuevo);
    registerForContextMenu(mensajes);
    nuevo_mensaje=(Button)findViewById(R.id.nuevo_mensaje);
    nuevo_mensaje.setOnTouchListener(this);
    LayoutInflater infl = (LayoutInflater)getSystemService   

  (Context.LAYOUT_INFLATER_SERVICE);
    View view = infl.inflate(R.layout.cheks,null);
    icono=(ImageView)view.findViewById(R.id.icon);
    icono.setVisibility(8);

    Intent service = new Intent(this, Servicios.class);
    startService(service);

  llenarList();

  task = new TimerTask() {
        public void run() {
                handler.post(new Runnable() {
                        public void run() {
                            marcar();

                        }

               });
        }};

        t.schedule(task, 500, 500);  

}

public boolean  onKeyDown(int keyCode, KeyEvent event){

    final Principal_mensajes cierraPrin= new Principal_mensajes();
    final ListaContactos lista= new ListaContactos();
    final Conversaciones conv= new Conversaciones();

    if (keyCode==KeyEvent.KEYCODE_BACK){

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("SMS Manager se cerrará")  
        .setCancelable(false)       
        .setPositiveButton("Sí", new DialogInterface.OnClickListener() { 

        public void onClick(DialogInterface dialog, int id) {                

            cierraPrin.finish();
            lista.finish();
            conv.finish();
            finish();

        }     
        })       
        .setNegativeButton("No", new DialogInterface.OnClickListener() {   

        public void onClick(DialogInterface dialog, int id) {                
           dialog.cancel();        
            }

        });

        AlertDialog alert = builder.create();
        alert.show();
        return true;
    }
    else if (keyCode==KeyEvent.KEYCODE_HOME){
        cierraPrin.finish();
        lista.finish();
        conv.finish();
        finish();
        return true;
    }
    else  if (keyCode==KeyEvent.KEYCODE_MENU){

        menu.setVisibility(0);
        return true;
    }
    else
    {
        return false;
    }
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

if (inhabilitar){
 BaseDeDatos db2=new BaseDeDatos  
      (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
      SQLiteDatabase desmarca=db2.getWritableDatabase(); 
      desmarca.execSQL("UPDATE conversaciones SET noLeido='' WHERE number='" +   
      almacenaNumeros[position] + "'");
      desmarca.close();
      db2.close();

      llenarList();

      Intent abreConversacion=new Intent(this,Conversaciones.class);
 abreConversacion.putExtra("contactoNom", almacenaNombres[position]);
 abreConversacion.putExtra("contactoNum", almacenaNumeros[position]);
 startActivity(abreConversacion);
}

} 

public void llenarList(){

  BaseDeDatos suplente=new BaseDeDatos(this,"administradorDeMensajes", null,5); 
       SQLiteDatabase base=suplente.getReadableDatabase(); 
       Cursor cursor=base.rawQuery("SELECT *,count(body) FROM conversaciones GROUP BY 
       number ORDER BY address ASC",null);

  cantFilas=cursor.getCount();

  String fecha="";
  String nombre="";
  String cuerpo="";
  String numero="";
  String cantidad="";
  String noLeido="";

  datos=new String[cursor.getCount()];
  almacenaNombres=new String[cursor.getCount()];
  almacenaNumeros=new String[cursor.getCount()];

  n=-1;

  while (cursor.moveToNext()){

    fecha=cursor.getString(cursor.getColumnIndex(("date")));
    nombre=cursor.getString(cursor.getColumnIndex(("address")));
    cuerpo=cursor.getString(cursor.getColumnIndex(("body")));
    noLeido=cursor.getString(cursor.getColumnIndex(("noLeido")));
    numero=cursor.getString(cursor.getColumnIndex(("number")));
    cantidad=cursor.getString(cursor.getColumnIndex(("count(body)")));

    if (cuerpo.length()>25){
     cuerpo=cuerpo.substring(0,25) + "...";
    }

    if (!(noLeido!=null)){
        noLeido="";
    }

    n++;

    if (nombre.equals("No agendado")){
        datos[n]=noLeido + numero + "\n" + fecha + "\n" + cuerpo + "\n(" + 
               cantidad + ") mensajes";
    }
    else
       {
        datos[n]=noLeido + nombre + "\n" + fecha + "\n" + cuerpo + "\n(" + cantidad 
         + ") mensajes";
       }

    almacenaNombres[n]=nombre;
    almacenaNumeros[n]=numero;

  }

  cursor.close();
  base.close();
  suplente.close();

  if (cantFilas!=0){
     adaptador=new ArrayAdapter<Object>
     (this,android.R.layout.simple_list_item_1,datos);
     mensajes.setAdapter(adaptador); 
  }
 else
 {
    Toast ninguno=Toast.makeText(SMSManagerActivity.this,"Lista de mensajes 
      vacía",Toast.LENGTH_LONG);
    ninguno.show();

 }
}

@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
if (arg0.getId()==nuevo_mensaje.getId()){
    Intent nuevo = new Intent(this,Principal_mensajes.class);
    startActivity(nuevo);
    return true;

}
return false;
}

public void marcar(){

SharedPreferences p=getSharedPreferences("DatosNumero",Context.MODE_PRIVATE); 
     recibeNumBandera=p.getString("numeroPasado",""); 

if (!recibeNumBandera.equals("")){
     task.cancel(); 

    BaseDeDatos db=new BaseDeDatos(SMSManagerActivity.this,"administradorDeMensajes", 
   null,5); 
    SQLiteDatabase insertar=db.getWritableDatabase(); 

    insertar.execSQL("UPDATE conversaciones SET noLeido='' WHERE number='" +  
     recibeNumBandera + "'");
    insertar.close();
    db.close();

    BaseDeDatos sel=new BaseDeDatos
    (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
    SQLiteDatabase max=sel.getReadableDatabase(); 

    Cursor cursorMax=max.rawQuery("SELECT max(id) as maximo FROM conversaciones WHERE 
    number='" + recibeNumBandera + "'",null);

    while (cursorMax.moveToNext()){
    maximo = cursorMax.getString(cursorMax.getColumnIndex(("maximo")));
    }
    cursorMax.close();
    max.close();
    sel.close();

     BaseDeDatos db3=new BaseDeDatos
     (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
    SQLiteDatabase insertar2=db3.getWritableDatabase(); 
    insertar2.execSQL("UPDATE conversaciones SET noLeido='*' WHERE number='" + 
     recibeNumBandera + "'  AND  id='" + maximo + "'");
    insertar2.close();
    db3.close();

    BaseDeDatos PasaNum2=new BaseDeDatos
   (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
    SQLiteDatabase paraEsc=PasaNum2.getWritableDatabase(); 
    paraEsc.execSQL("DELETE FROM PasaNum");
    paraEsc.close();
    PasaNum2.close();

    llenarList();

    SharedPreferences pr=getSharedPreferences
    ("DatosNumero",Context.MODE_PRIVATE); 
    Editor ed=pr.edit(); 
    ed.putString("numeroPasado","" ); 
    ed.commit(); 

    task.run();  

 }
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
super.onCreateContextMenu(menu, v, menuInfo);

 AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)
 menuInfo;
 menu.setHeaderTitle(almacenaNombres[info.position]);

 posicionInfo=info.position; 

 menu.add(0, v.getId(), 0, "Ver");
 menu.add(0, v.getId(), 0, "Eliminar conversación");

}

@Override
public boolean onContextItemSelected(MenuItem item) {

if(item.getTitle()=="Ver"){

 Intent abreConversacion2=new Intent(this,Conversaciones.class);
 abreConversacion2.putExtra("contactoNom", almacenaNombres[posicionInfo]);
 abreConversacion2.putExtra("contactoNum", almacenaNumeros[posicionInfo]);
 startActivity(abreConversacion2);
    return true;
}
else if(item.getTitle()=="Eliminar conversación"){

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Confirmación");
    builder.setMessage("Está seguro de eliminar la conversación con " + 
         almacenaNombres[posicionInfo] + "?")
    .setCancelable(false)
    .setPositiveButton("Aceptar", new DialogInterface.OnClickListener()  {
    public void onClick(DialogInterface dialog, int which) {

     BaseDeDatos administraM=new BaseDeDatos
     (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
     SQLiteDatabase elimina=administraM.getWritableDatabase(); 
     elimina.execSQL("DELETE FROM conversaciones WHERE address='" + almacenaNombres
     [posicionInfo] + "'");
     elimina.close();
     administraM.close();

     BaseDeDatos administraM2=new BaseDeDatos
     (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
     SQLiteDatabase elimina2=administraM2.getWritableDatabase(); 
     elimina2.execSQL("DELETE FROM recibidos WHERE address='" + almacenaNombres
     [posicionInfo] + "'");
     elimina2.close();
     administraM2.close();

     BaseDeDatos administraM3=new BaseDeDatos
      (SMSManagerActivity.this,"administradorDeMensajes", null,5); 
     SQLiteDatabase elimina3=administraM3.getWritableDatabase(); 
     elimina3.execSQL("DELETE FROM enviados WHERE address='" + almacenaNombres
     [posicionInfo] + "'");
     elimina3.close();
     administraM3.close();

     llenarList();

    }
    })
    .setNegativeButton("Cancelar", new DialogInterface.OnClickListener() {   

    public void onClick(DialogInterface dialog, int id) {                
       dialog.cancel();        
        }

    });

    AlertDialog alert = builder.create();
    alert.show();

   return true; 
}
else
{
    return false;
}

}

public void marcar(View view){

nuevo.setVisibility(8);
menu.setVisibility(8);
inhabilitar=false;

array= new Array(this,R.layout.main,datos);
mensajes.setAdapter(array);

}

public void eliminar(View view){

}

} 
```

# apache - mod_rewrite 从 Codeigniter 的子目录中删除 index.php

> ID：10540524
> 
> 赞同：1
> 
> 时间：2012-05-10T18:59:27.723
> 
> 标签：apache, .htaccess, mod-rewrite, codeigniter-url

`index.php`Codeigniter 应用程序通常使用 mod_rewrite从 url中排除字符串。我在同一个域中有两个 Codeigniter 应用程序。一个 Codigniter 应用程序位于 web 根文件夹中，另一个 Codigniter 应用程序位于 web 根文件夹的子文件夹中。

Codeigniter 应用程序 1：

```
http://domain.com/index.php 
```

Codeigniter 应用 2（登陆页面应用）：

```
http://domain.com/land/index.php 
```

这两个 Codeigniter 应用程序都是原子的，它们之间不共享任何文件。Codeigniter 框架中的每个文件都`public_html/`在`public_html/land/`. 所以我需要排除`index.php`urls 中寻址根文件夹的字符串，`/`并排除子文件夹中的字符串。`index.php``/land/`

根文件夹中的 .htaccess 文件使用[Codeigniter wiki](http://codeigniter.com/wiki/mod_rewrite)中广泛推荐的 mod_rewrite 规则（代码如下） ，这组规则适用于根 Codeigniter 应用程序（应用程序 1）。这些规则位于 Web 根文件夹中。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

上述规则集`index.php`从根 Codeigniter 应用程序中的 url 中删除没有问题。但是这组规则似乎不允许执行 mod_rewrite 规则`public_html/land/.htaccess`。

当我删除 中的 mod_rewrite 规则时`public_html/.htaccess`，`public_html/land/.htaccess`开始评估中的 mod_rewrite 规则。

有没有办法更改 mod_rewrite 规则`public_html/.htaccess`以处理旨在访问`/land/`子文件夹的 url 的特殊情况？

我认为最好的解决方案可能是更改 mod_rewrite 规则`public_html/.htaccess`以允许在`public_html/land/.htaccess`url 中寻址子文件夹时执行 mod_rewrite 规则。我愿意接受任何建议。

先发制人地回答“为什么不使用子域？” 1\. 在 SSL 证书上省钱。2) 非技术用户有时会对营销基础域名的子域感到困惑。

先发制人地回答“为什么不将 Codeigniter 应用程序结合起来使用框架中的相同文件？” 复制框架文件是保持版本控制存储库分离的一种简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:09:43.533

问题是规则`public_html/.htaccess`正在重写 URL 的去向`/land/`，你需要一个直通，这样当`/land/`被请求时什么都不会发生。添加：

```
RewriteRule ^land/ - [L] 
```

在你的其他规则之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:05:25.733

如果它是请求字符串的一部分，则在顶部添加一条规则以仅转到 land 子文件夹。这样，/land/.htaccess 中的规则将被执行，而不是 /.htaccess 中的后续规则。所以把它放在顶部：

```
RewriteRule ^land.*$ - [NC,L] 
```

这将检查请求是否以“land”开头并将其重定向到子目录，其中将应用与该子目录对应的 .htaccess 规则。

现有规则检查文件和文件夹并且如果请求对应于其中之一则不进行重写的原因是因为请求中“土地”后面的任何内容可能不是真实文件，因此会触发重写规则。

# arrays - 在 Perl 中，如何从 hashrefs 数组中提取 ID 字段列表？

> ID：10540529
> 
> 赞同：2
> 
> 时间：2012-05-10T18:59:49.003
> 
> 标签：arrays, perl, hash

您将如何从散列数组中推送数组中的每个 id 值？

我有这个数组：

```
@friends = [ 
   {'id' => 1, 'last_name' => 'Fo', 'first_name' => 'fa' }, 
   {'id' => 3, 'last_name' => 'pa', 'first_name' => 'pi' }, 
   {'id' => 2, 'last_name' => 'ma', 'first_name' => 'mi' } 
]; 
```

我想创建一个像这样的值 id 数组：`@friend_ids = [1, 3, 2]`，使用[push](http://perldoc.perl.org/functions/push.html)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T19:08:11.990

您可能拥有`@friends = ( ... )`并且想要`@friend_ids = (1, 3, 2)`. 方括号用于数组引用，而不是列表。您可以像这样创建这样的数组：

```
#!/usr/bin/perl
use warnings;
use strict;

my @friends = ( {id => 1, last_name => 'Fo', first_name => 'fa' },
                {id => 3, last_name => 'pa', first_name => 'pi' },
                {id => 2, last_name => 'ma', first_name => 'mi' } );
my @friend_ids;
push @friend_ids, $_->{id} for @friends;
print "@friend_ids\n"; 
```

但是你可以在没有 push 的情况下更轻松地实现相同的目标：

```
my @friend_ids = map $_->{id}, @friends; 
```

如果您需要删除重复项并对键进行排序，您可以使用：

```
my @friend_ids = sort {$a <=> $b} uniq map $_->{id}, @friends; 
```

如果所有 ID 都是数字或只是

```
my @friend_ids = sort uniq map $_->{id}, @friends; 
```

如果某些 ID 不是数字（`uniq`来自[List::MoreUtils](http://search.cpan.org/perldoc/List%3a%3aMoreUtils)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:23:31.613

我会为此使用哈希，以便删除重复项并使结果易于排序（*如果需要*）：

```
my @friends = ( {id => 1, last_name => 'Fo', first_name => 'fa' },  
                {id => 3, last_name => 'pa', first_name => 'pi' },  
                {id => 2, last_name => 'ma', first_name => 'mi' } );  

my %id = map { $_->{id} => 1 } @friends;
my @friend_ids = sort { $a <=> $b } (keys %id); 
print "@friend_ids\n"; 
```

你可以[在 Ideone 上测试这个脚本](http://ideone.com/XKW5Q)。

# javascript - 实现一个没有数据库的聊天应用程序

> ID：10540531
> 
> 赞同：5
> 
> 时间：2012-05-10T19:00:01.447
> 
> 标签：javascript, ajax, jsp, servlets, chat

可以使用数据库来实现聊天应用程序（浏览器在特定时间段内连续发送请求并从保存消息的表中获取数据）。

我想知道，有没有办法在 HTTP 中使用 Ajax 和 jsp/servlet 实现聊天应用程序并且没有数据库连接？我知道jsp，servlet。如何在 jsp/servlet 应用程序内部处理会话、请求、响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:01:44.783

数据库只是一个美化的文件。如果您的数据足够简单并且您不想处理数据库，只需写入文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:06:09.960

如果您想要非生产、教育版本，您可以使用 Application Scope：

您可以拥有一个应用程序范围的变量来保存聊天列表

例如使用[`<jsp:useBean scope="application">`](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm14.html)（每个应用程序一个实例）

只要您有线程安全护目镜，并且在需要的地方进行同步，就可以了

但如前所述，尝试检查**node.js**，这似乎是自然的候选者

**编辑：**

请注意，应用程序上下文是每个 VM 的，例如，不是最具扩展性的方法

您也可以使用[`ServletContext.setAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#setAttribute%28java.lang.String,%20java.lang.Object%29)（相同的同步和扩展问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:47:13.113

如果您是一个 java 人，那么在我看来，您需要的东西与[spire.io](http://spire.io)很相配，该服务允许您使用 java 客户端构建无服务器、无数据库的应用程序。

# asp.net-mvc-2 - 使用 ASP.NET MVC2 的 Google 自定义搜索

> ID：10540533
> 
> 赞同：0
> 
> 时间：2012-05-10T19:00:18.250
> 
> 标签：asp.net-mvc-2

我正在使用 ASP.NET MVC2 来实现谷歌自定义搜索。我能够连接到 googleAPI，传递我的查询，以 JSON 格式获取结果并将其映射到 .NET 类。但是，当我创建一个视图来显示这些结果时，我收到了一个错误。

```
public ActionResult SiteSearch(string query)
        {
            var googleSiteSearchClient = new GoogleSiteSearchClient();
            var model = googleSiteSearchClient.RunSearch(query);
            return View(model);

        } 
```

我创建了一个基于模型的强类型视图并尝试使用 FOREACH 循环来获取结果

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <h2>SiteSearch</h2>

   <% foreach (var item in Model) { %>

                <%: item.Kind %> <br />

    <% } %>

    </table>

</asp:Content> 
```

我收到了这个错误

传入字典的模型项的类型为“AASD2.Models.GoogleAPI.GoogleSearchResponse”，但该字典需要类型为“System.Collections.Generic.IEnumerable`1[AASD2.Models.GoogleAPI.GoogleSearchResponse]”的模型项。

任何建议，我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:08:01.890

似乎 googleSiteSearchClient 的结果不是一个集合。搜索结果集合可能是 googleSiteSearchClient 结果的一个属性。

要么使用

```
 <% foreach (var item in Model.WhatEverTheCollectionIsNamed) { %>

                <%: item.Kind %> <br />

    <% } %> 
```

或者

```
public ActionResult SiteSearch(string query)
        {
            var googleSiteSearchClient = new GoogleSiteSearchClient();
            var model = googleSiteSearchClient.RunSearch(query);
            return View(model.WhatEverTheCollectionIsNamed);        
        } 
```

# java - 如何仅在需要时显示框架并将框架设置为始终显示在顶部？

> ID：10540535
> 
> 赞同：1
> 
> 时间：2012-05-10T19:00:29.580
> 
> 标签：java, swing, loops, frame, toolkit

当数据库中的数据（股票名称和价格）与雅虎财经的数据（股票名称和价格）匹配时，我的程序会提醒用户。[在HarryJoy](http://harryjoy.com/2011/07/01/create-new-message-notification-pop-up-in-java/)的帮助下，我能够实现弹出通知。

问题是屏幕上的弹出位置基于数据库循环（int db）。即使数据不匹配，框架也会弹出。

仅当数据库数据=雅虎财经数据时，如何设置计数器或某种方法来弹出框架？此外，我的通知面板似乎位于主框架后面。如何使面板出现在我的主框架顶部？

我希望我已经提供了足够的信息，如果仍然不清楚，请询问。任何指导将不胜感激！谢谢！

在数据库中（使用代码示例仅按顺序显示我的解释，源代码如下）。

```
Object 1 = match
Object 2 = doesn't match (hence there's a gap)
Object 3 = match
Object 4 = match 
```

截屏：

![弹出窗口](../Images/ec302643c9d27abdc0b282f97ddf0c38.png)

代码：

```
 for (int db=0; db<= rowCount; db++) 
    {                   
        Object popSymbol = table.getModel().getValueAt(db, 0); 
        String popupSymbol = popSymbol.toString(); 

        Object popValue = table.getModel().getValueAt(db, 1);                          
        String str = popValue.toString(); 
        double popStockValue = Double.valueOf(str).doubleValue(); 

        String stockNameDB = popupSymbol;       
        StockPara stock = YahooStock.getInstance().getStockPrice(stockNameDB);
        double stockPriceDB = Math.round(stock.getPrice()); 

        final JFrame popUpFrame;
        final JPanel popupPanel;                    

        if (stockPriceDB == popStockValue)                      
        {
            String header = "Stock: "  + stock.getTicker() + " is now @ " +  stock.getPrice();          
            String message = "";  

            popUpFrame = new JFrame();
            popUpFrame.setSize(320,90);                         
            popUpFrame.setUndecorated(true);                                    
            popUpFrame.getContentPane().setLayout(null);    

            popupPanel = new JPanel();
            popupPanel.setBorder(new LineBorder(new Color(0, 0, 0)));
            popupPanel.setBounds(0, 0, 320, 90);
            getContentPane().add(popupPanel);
            popupPanel.setBackground(new Color(255, 255, 224));
            popupPanel.setLayout(null);
            popUpFrame.add(popupPanel);                 

            // Other labels, images, etc. 

            Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
            Insets toolHeight = Toolkit.getDefaultToolkit().getScreenInsets(popUpFrame.getGraphicsConfiguration());
            popUpFrame.setLocation(screenSize.width - popUpFrame.getWidth(), screenSize.height - toolHeight.bottom - (popUpFrame.getHeight() * (db+1)));

        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:57:57.643

要快速解决您的问题，只需创建一个额外的计数器 ( `int counter = 0;`)。然后使用该计数器而不是`db`定位您的 popUpFrame 并在该增量计数器之后。

```
int counter = 0; // Initiate outside de loop
...
for(int db=0; db<= rowCount; db++) {
    ...
    if (stockPriceDB == popStockValue) {
         ...
         popUpFrame.setLocation(screenSize.width - popUpFrame.getWidth(), 
            screenSize.height - toolHeight.bottom - (popUpFrame.getHeight() * (counter+1)));
         counter++;
    }
} 
```

要将您的框架放在前面，请使用：

```
popUpFrame.toFront() 
```

并强制它始终位于顶部（尽管我真的不建议这样做，因为它对用户来说比其他任何事情都更烦人）：

popUpFrame.setAlwaysOnTop(true);

这不一定是所有平台都支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:12:38.390

对于最重要的问题，使用

```
 notificationPanel.requestFocus(); 
```

# azure-storage - 我应该将 blob 内容缓存到本地高清吗？

> ID：10540540
> 
> 赞同：0
> 
> 时间：2012-05-10T19:00:43.963
> 
> 标签：azure-storage

假设我在 blob 存储中有文件，并且这些文件经常被托管在 Windows Azure 中的 Web 应用程序使用。

我是否应该对这些 blob 执行某种缓存，例如将它们下载到我的应用程序的本地硬盘驱动器？

**更新：**我被要求提供一个案例来说明我为什么要缓存内容，所以就这样吧：假设我有一个电子商务网站，我的产品图片都是高分辨率的。不过，有时我想将它们用作缩略图（例如，用于产品列表），一种可能的解决方案是使用 HTTP 处理程序按需调整图像大小。我知道我可以使用输出缓存，这样图像只需要调整一次大小，但是为了这个例子，让我们考虑一下我会在每次请求图像时处理它。我想将内容缓存在本地会更快。在这种情况下，将其缓存在 HD 上或使用本地存储会更好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:46:46.747

刚开始回答您的问题，是的，由于网络延迟，即使计算和 blob 位于同一数据中心，从角色特定的本地存储访问静态内容也会比从 Azure blob 存储访问静态内容更快。

可能有一个解决方案，您可以在启动任务（或后台任务）期间在角色特定的本地存储中从 Azure 存储下载 X 数量的 blob，并通过本地存储引用这些静态内容，但真正的问题是您想要的原因是什么缓存 Azure Blob 存储中的内容？是为了更快的访问还是为了可靠性？如果原因是几乎可以立即访问静态内容，那么我可以考虑将其缓存在本地存储中。

每种方法都有利有弊，但是如果您可以提供具体的原因，那么您可能会得到更好的点响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T00:30:27.147

为什么不使用本地资源？它为您提供了 HD 上文件夹的路径，并且您可以获得大量空间。您甚至可以在重新启动之间保留它。

另一种选择是 Azure 云驱动器。它很快，并且允许您在实例之间共享缓存（但只能一次写入）。

埃里克

# android - 如何使用应用内计费永久隐藏添加？？？安卓

> ID：10540543
> 
> 赞同：0
> 
> 时间：2012-05-10T19:01:05.180
> 
> 标签：android, admob

我刚刚在我的应用中实现了广告，我想为用户添加一个选项，以永久隐藏使用应用计费的广告......

我该怎么做？

先谢谢了

PS 我已经使用 xml 文件实现了广告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:33:40.593

我认为您可以使用 sharedPreferences 来存储应用程序的状态。

如果用户购买了 adfree 选项，您将更改 sharedPreference 中一项的状态。

例如，在购买后，您必须执行以下操作：

```
SharedPreferences preferences = 
PreferenceManager.getDefaultSharedPreferences(this);
// The SharedPreferences editor - must use commit() to submit changes
SharedPreferences.Editor editor = preferences.edit();

// Edit the saved preferences
editor.putString("status", "purchased");
editor.commit(); 
```

然后当应用程序启动时，您必须检查该偏好值并仅在用户没有购买状态时才请求广告。例如：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefs.getString("status", "free");

if(prefs.equals("free") {
        AdView adView = (AdView) findViewById(R.id.adViewMain);                
        adView.loadAd(new AdRequest());   
} 
```

问题是当用户卸载应用程序时，问题是如果用户已经购买了无广告选项，他必须继续在没有广告的情况下工作。在这种情况下，应用内结算可以帮助您，如果您将购买项目设置为托管，在这种情况下，谷歌市场会永久存储有关交易的信息，并且当应用程序首次启动时，使用应用内结算，您可以使用 RESTORE_TRANSACTION 选项检查所有以前的事务。

在此处查看托管和非托管应用程序之间差异的说明：http: [//developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type](http://developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type) 希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:42:32.673

1.  `id`在您的 XML 布局中为您的每个广告添加一个

2.  实施 InApp 计费

3.  检查购买成功

4.  参考`id`使用`findViewById(int id)`方法

5.  设置可见性`advert.setVisibility(View.GONE);`

`onCreate`如果您需要将其作为永久设置，请存储他们购买该物品的事实`setVisibility`并按上述方式进行检查

# c#-4.0 - 如何让这个旧的 Ninject 2 代码与 Ninject 3 和 MVC 2 扩展 (NinjectControllerFactory) 一起使用？

> ID：10540544
> 
> 赞同：0
> 
> 时间：2012-05-10T19:01:14.050
> 
> 标签：c#-4.0, asp.net-mvc-2, entity-framework-4, ninject.web.mvc

在我的 MVC 2 项目中，我最初使用 Ninject 2 并编写了这个版本的 NinjectControllerFactory：

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel kernel = new StandardKernel(new HandiGamerServices());

    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        try
        {
            if (controllerType == null)
            {
                return base.GetControllerInstance(requestContext, controllerType);
                // return null;
            }
        }
        catch (HttpException ex)
        {
            if (ex.GetHttpCode() == 404)
            {
                IController errorController = kernel.Get<ErrorController>();
                ((ErrorController)errorController).InvokeHttp404(requestContext.HttpContext);

                return errorController;
            }
            else
            {
                throw ex;
            }
        }

        return (IController)kernel.Get(controllerType);
    } 
```

最重要的是检索我的 ErrorController，它允许我优雅地处理大量 HTTP 错误。

问题是我通过 Nuget 升级到 MVC 2 扩展，所以已经提供了 NinjectControllerFactory。是否可以使用我自己的 GetControllerInstance 覆盖？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:13:33.623

我正是这样做的，并且出于同样的原因。在`Global.asax.cs`中，我将其添加到我的`OnApplicationStarted`覆盖中（在 中声明为虚拟`NinjectHttpApplication`）：

```
ControllerBuilder.Current.SetControllerFactory(
    new MyControllerFactory(ControllerBuilder.Current.GetControllerFactory())); 
```

这意味着您正在创建自己的控制器工厂，但为其提供默认实现以完成繁重的工作。

然后像这样定义你的控制器工厂：

```
public class MyControllerFactory : IControllerFactory
{
    private IControllerFactory defaultFactory;

    public MyControllerFactory(IControllerFactory defaultFactory)
    {
        this.defaultFactory = defaultFactory;
    }

    public IController CreateController(RequestContext requestContext, string controllerName)
    {
        try
        {
            var controller = defaultFactory.CreateController(requestContext, controllerName);
            return controller;
        }
        catch (HttpException e)
        {
            // Pasted in your exception handling code here:
            if (ex.GetHttpCode() == 404)
            {
                IController errorController = kernel.Get<ErrorController>();
                ((ErrorController)errorController).InvokeHttp404(requestContext.HttpContext);

                return errorController;
            }
            else
            {
                throw ex;
            }
        }
    }

    public SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, string controllerName)
    {
        return defaultFactory.GetControllerSessionBehavior(requestContext, controllerName);
    }

    public void ReleaseController(IController controller)
    {
        defaultFactory.ReleaseController(controller);
    }
} 
```

如您所见，我们只是在大多数情况下使用默认（Ninject）控制器工厂，除非它找不到页面。要获取错误控制器，您可以像以前一样传入，也可以使用错误控制器名称进行`kernel`调用。`defaultFactory.CreateController`

# linux - Qt 蓝牙与 Linux

> ID：10540546
> 
> 赞同：0
> 
> 时间：2012-05-10T19:01:26.943
> 
> 标签：linux, qt, bluetooth, dbus

我正在尝试使用 Qt 为一台设备设置蓝牙服务器，但不知道如何使用 QDbus 和 bluez。

设备将发送字符串。两人已经配对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:15:53.017

你的问题很笼统，你的问题到底是什么？

开始了解蓝牙协议及其 C 编程模型[的](http://people.csail.mit.edu/albert/bluez-intro/)一个很好的资源 是[http://www.btessentials.com/](http://www.btessentials.com/)您可以认真考虑用 Qt 包装所有内容 :)

# linq - Idatareader 到列表

> ID：10540551
> 
> 赞同：0
> 
> 时间：2012-05-10T19:01:45.020
> 
> 标签：linq, c#-3.0, idatareader

使用 Linq 有没有更有效的方法来做到这一点？

```
 IDataReader reader = qSeats.ExecuteReader();
            var seats = new List<int>();
            using (IDataReader reader = qSeats.ExecuteReader())
            {
                while (reader.Read())
                {
                    seats.Add(Convert.ToInt32(reader.GetInt32(0)));
                }
            } 
```

我看到：[如何从 dataReader 将数据加载到列表中？](https://stackoverflow.com/questions/1003480/how-do-i-load-data-to-a-list-from-a-datareader) 然而，这与我上面的代码相同，似乎有更快的方法。就像使用 Linq 或 seat.AddRange() 或某种 ToList()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:05:08.247

DataReader 是来自数据库的只读、只进数据流。你这样做的方式可能是最快的。

> 使用 DataReader 可以通过在数据可用时立即检索数据来提高应用程序性能，而不是等待返回查询的全部结果，并且（默认情况下）一次只在内存中存储一​​行，从而减少系统开销. [使用 DataReader 检索数据](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx)

# cuda - SDK 4.1 中的 cuda sdk 示例 simpleStreams 不起作用

> ID：10540553
> 
> 赞同：0
> 
> 时间：2012-05-10T19:01:50.337
> 
> 标签：cuda

我将CUDA GPU计算SDK和CUDA计算工具包升级到4.1。我正在测试 simpleStreams 程序，但始终需要比非流式执行更多的时间。我的设备具有计算能力 2.1，我使用的是 VS2008，Windows 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:20:28.893

我也注意到了这一点。我以为只是我的问题，但我没有注意到任何改进，并尝试搜索论坛，但没有找到其他有问题的人。

我还在 Cuda By Example 一书中运行了源代码（这真的很有帮助，如果您对 GPU 编程很认真，我建议您选择它）。

第 10 章的例子有一系列例子，展示了应该如何使用流。 [http://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0](http://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0)

但是比较一下，1\. 非流式版本（基本上是单流版本） 2\. 流式（错误地排队 asyncmemcpy 和内核启动） 3\. 流式（正确排队 asyncmemcpy 和内核启动）

我发现使用 cuda 流没有任何好处。这可能是一个 win7 问题，因为我在网上找到了一些讨论 win vista 不正确支持 cuda 流的资源。

让我知道您在我链接的示例中发现了什么。我的设置是：Win7 64bit Pro、Cuda 4.1、双 Geforce GTX460 卡、8GB RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:49:32.473

这个样本经常有问题。如果您调整样本以使内核和内存副本具有相同的持续时间，则重叠将得到改善。通常广度优先提交更适合并发；但是，在 WDDM OS 上，如果您在内核启动后立即发出内存副本，则此示例通常会有更好的重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T04:15:00.567

我对 Cuda 很陌生，所以可能无法提供帮助，但如果没有您发布任何代码，通常很难提供帮助。如果无法发布，那么我建议您查看[Nvidia 的视觉分析器](http://developer.nvidia.com/nvidia-visual-profiler)。它是跨平台的，可以向您展示您的瓶颈所在。

# jquery - 按键后的事件（jquery）

> ID：10540557
> 
> 赞同：0
> 
> 时间：2012-05-10T19:02:07.420
> 
> 标签：jquery, events, keypress

我有一个文本区域。用户在 textarea 中输入 X 个字符后，我希望触发一些不同的事件。

*   将输入的前 X 个字符附加到另一个文本字段中。
*   扩展文本区域以提供更多空间继续输入

我知道我可以在 jquery 中使用按键事件，但是在输入 25 个字符后如何触发事件？

我目前正在尝试这个：

```
$('#post-content-field').keyup(function () {
$('#post-title-field').val($("#post-content-field").val()).trigger('change');
                            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:04:08.120

您可以`.length`在每次按键后检查 textarea 的值。如果大于等于25，抓取前几个字符，增加textarea高度。

```
$("textarea.affectMe").on("keyup", function(){
  if ( this.value.length >= 25 && !$(this).hasClass("done") ) {
    $(this).addClass("done");
    $(".threeChars").val( this.value.substring(0,25) );
  }
}); 
```

请注意，我正在向 textarea 添加一个类，因此当长度大于 25 时，我们不会在每次按键后一遍又一遍地执行此操作。

演示：http: [//jsbin.com/afonar/edit#javascript,html](http://jsbin.com/afonar/edit#javascript,html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:06:37.183

使用 jquery 和下面的 countChar 函数

```
 <script src="http://code.jquery.com/jquery-1.5.js"></script>
    <script>
        function countChar(val){
                                var len = val.value.length;
                                if (len >= 500) {
                                    val.value = val.value.substring(0, 500);
                                }else {
                                    $('#charNum').text(500 - len);
                                }
        };
    </script> 
```

在 HTML 中调用类似的函数

```
<textarea id="field" onkeyup="countChar(this)"></textarea>
<div id="charNum">
</div> 
```

div 将显示字符数。你可以在函数内部做任何事情

参考：[计算文本区域中的字符](https://stackoverflow.com/questions/5371089/jquery-count-characters-in-textarea)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:31:36.127

那是供您参考的，您可以做任何您喜欢的事情。删除阻止您添加更多文本的行

请参阅下文

```
function countChar(val){
    var len = val.value.length;
     $('#charNum').text(len);
     if (len >= 500) {
                     // Copy
      }else {
            //DO anything
      }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:04:34.517

```
$('textarea').bind('keyup', function(e){
    if(e.target.value.length === 25) {
        // do stuff
    }
}); 
```

# javascript - 是否有 HTML5 AJAX 应用程序的 URL 更改处理程序？（如 HTML4 的 hashchange 处理程序）

> ID：10540564
> 
> 赞同：1
> 
> 时间：2012-05-10T19:02:34.330
> 
> 标签：javascript, jquery, browser-history

我用来收听 hashchange 处理程序事件。但是现在使用 HTML5，您可以在不使用哈希的情况下更改 url。如何为 url 更改添加侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:09:31.007

即使不使用 JS，也可能发生哈希更改。就像单击锚链接的默认行为可以触发哈希更改一样。

HTML5 历史对象只能通过 JS 进行操作。为此，有[pushState()](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#section_6)和[replaceState()](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#section_7)。一旦使用，浏览器的前后按钮就会触发[popstate 事件](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#section_8)。我所知道的 HTML5 History 没有其他事件处理程序。

```
$(window).bind("popstate", function() {
    console.log(window.location.href);
}); 
```

如果您在将状态推送到历史对象时需要触发器，那么您应该依靠调用它的人来允许观察者（回调）。

否则你可以尝试一些不那么健壮的东西：

```
function onPushState(callback) {
    (function(pushState) {
       history.pushState = function() {
           pushState.apply(this, arguments);
           callback.apply(window, arguments);
       };
    })(history.pushState);
}

onPushState(function() {
    console.log(window.location.href);
}); 
```

[http://jsfiddle.net/Cxjey](http://jsfiddle.net/Cxjey)

您可以对替换状态执行相同的操作。

同样，这可能不是一个好主意，因为您正在更改默认浏览器行为。

# objective-c - UiBarButtonItem 与“完成”按钮颜色相同

> ID：10540566
> 
> 赞同：4
> 
> 时间：2012-05-10T19:02:46.877
> 
> 标签：objective-c, xcode, uibarbuttonitem, uicolor

我希望能够以编程方式将 a 添加`UIBarButtonItem`到导航栏并将其色调设置为与 Apple 的 "Done" 完全相同的蓝色阴影`UIBarButtonItem`。

我已经在这段代码中为 Apple 的红色阴影做了这个：

```
UIBarButtonItem *myDeleteButton = [[UIBarButtonItem alloc] initWithTitle:@"Clear" style:UIBarButtonItemStyleBordered target:self action:@selector(myDeleteItemsMethod:)];
myDeleteButton.tintcolor = [[UIColor alloc] initwithRed:1 green:0.0470275 blue:0.0116515 alpha:1];
self.navigationItem.rightBarButtonItem = myDeleteButton; 
```

我想我需要的只是 RGB 值。

我很难尝试“逆向工程”`UIBarButtonItem's`在 Storyboard 中制作的色调（无法转换`UIColor`为文本）。

而且我还意识到 Xcode 的调色板有一个用于“开发人员”配色方案的区域，但它似乎没有包含“完成”按钮的颜色。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T09:57:55.240

我用我的 DigitalColor Meter 花了大约 15 分钟，基本上是猜测和检查，直到我最终得到它。问题是您正在为黑色按钮添加“色调”以使其变为蓝色，因此它不会是正确的蓝色。以下是正确的测量值：

```
[buttonName setTintColor:[UIColor colorWithRed:34.0/255.0 green:97.0/255.0 blue:221.0/255.0 alpha:1]]; 
```

希望它可以帮助某人:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T19:10:38.137

你想要`UIBarButtonItemStyleDone`而不是`UIBarButtonItemStyleBordered`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-25T12:03:21.687

user1641653 的建议颜色只是用色度计拍摄的真实 DoneButton 的底部颜色。问题是普通/边框按钮的阴影与 SystemButton 的阴影不同。阴影会将建议的颜色更改为 -11、-36、-11。因此，如果您真的希望它看起来像真正的 DoneButton，您必须将这些值添加到建议的 34/97/221。

这表示：

```
[yourButton setTintColor:[UIColor colorWithRed:45.0/255.0 green:133.0/255.0 blue:232.0/255.0 alpha:1]]; 
```

# php - 给定 value 的索引，替换多维数组中的值

> ID：10540568
> 
> 赞同：4
> 
> 时间：2012-05-10T19:02:54.697
> 
> 标签：php, arrays, multidimensional-array, indexing

我有一个数组，其中包含一个非常大的多维数组中值的位置。我需要获取这个位置并将该位置的值替换为另一个值。我发现了许多关于通过编写递归函数使用这样的索引数组返回位置值的文章。但是，这不起作用，因为我无法分割大数组，我只需要替换那个值。

该位置将类似于：

```
array(1,5,3,4,6); 
```

我必须找到一个值的代码如下：

```
function replace_value($indexes, $array, $replacement){
    if(count($indexes) > 1)
        return replace_value(array_slice($indexes, 1), $array[$indexes[0]], $replacement);
    else
        return $array[$indexes[0]];
    }
} 
```

我将如何修改它而不是递归地削减一个数组，直到找到值我可以简单地修改一个大数组的一部分？有没有办法建

```
array(1,5,3,4,6); 
```

进入

```
$array[1][5][3][4][6]; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T19:11:40.037

你可以像这样修改你的函数：

```
function replace_value($indexes, &$array, $replacement){
    if(count($indexes) > 1) {
        return replace_value(array_slice($indexes, 1), $array[$indexes[0]], $replacement);
    } else {
        return $array[$indexes[0]] = $replacement;
    }
} 
```

确保你写`&$array`在函数定义中，而不是`$array` 这将传入实际的数组，以便你可以就地修改它。否则，您将只是传递一份副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T19:04:50.673

假设您信任包含数组索引的变量的内容，这是完全有效的用法`eval`：

```
$keys = array(1,5,3,4,6);

$keys = "[" . join($keys, "][") . "]";

$value = "what";

eval("\$array$keys = '$value';"); # $array[1][5][3][4][6] = 'what'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:11:06.357

这是一个不使用 eval 的解决方案。遍历每个键并在进行时减少数组。下面的`$ref`变量是对原始数组的引用，因此更改它将更改原始数组。

```
$keys = array(1,5,3,4,6);
$array[1][5][3][4][6] = 'foo';
$ref = &$array;

foreach( $keys as $key ) {
    $ref = &$ref[ $key ];
}

$ref = 'bar';

echo $array[1][5][3][4][6];  // 'bar' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:20:48.893

这是未经测试的。我倾向于回避使用引用，因为我认为它们特别令人困惑，并且它们会在您的代码中留下残留的引用，这可能会导致难以找到错误。

```
$keys = array(1,5,3,4,6);
$path = 'new leaf value';
foreach (array_reverse($keys) as $key) {
    $path = array($key => $path);
}

$modified = array_replace_recursive($origionalArray, $path); 
```

# xml - XML 模式唯一子元素

> ID：10540576
> 
> 赞同：4
> 
> 时间：2012-05-10T19:04:09.157
> 
> 标签：xml, xpath, xsd

我正在尝试通过元素名称验证父元素是否具有唯一的子元素。我还需要验证至少存在一个可能的元素。

例子

```
<StorageTypes>
    <Status/>
    <Warning/>  
    <Error/>             
</StorageTypes> 
```

将是有效的，但

```
<StorageTypes>
    <Status/>
    <Status/>
    <Warning/>  
    <Error/>             
</StorageTypes> 
```

和

```
<StorageTypes>               
</StorageTypes> 
```

将是无效的。

我曾尝试使用 xs:unique，选择当前节点，但无法一般选择带有字段元素的元素。

下面实现了我想要做的事情，但它不是我正在寻找的强大解决方案。我希望能够添加更多类型，而无需为每次更改更改 xpath。

```
<element ect.>
    <xs:unique name="something">
        <xs:selector xpath="."/>
        <xs:field xpath="Status"/>
        <xs:field xpath="Warning"/>
        <xs:field xpath="Error"/>
    </xs:unique>
</element> 
```

这可能吗？这是好习惯吗？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:52:44.137

基于 XSD 1.0 的通用解决方案是不可能的。我不相信你的独特性也能达到​​你想要的，仅仅因为一个字段的值是使用 text(); 评估的。所以标签的名称永远不会在其中发挥作用......

虽然您可能能够实现接近您想要的东西，但它可能并非在所有情况下都有效，或者它缺乏优雅或可行性......

以下方法可能不被某些人认为是优雅的......但是，它可以达到相同的目的。

例如，如果改为使用属性来捕获“标签”名称，如下所示：

```
<StorageTypes>
   <Storage type="Status"/>
   <Storage type="Warning"/>
   <Storage type="Error"/>
</StorageTypes> 
```

然后在 @type 字段上写下你的唯一值，并结合一系列存储，maxOccurs=whatever 严格地为你提供你所描绘的内容。

相反，如果您正在寻找实际上具有复杂内容的元素，或者不允许使用属性，那么您可以使用替换组来达到相同的效果。

# java - 如何从用户那里获得 15 万个粉丝 ID？

> ID：10540578
> 
> 赞同：0
> 
> 时间：2012-05-10T19:04:17.283
> 
> 标签：java, twitter, twitter4j

我正在尝试从一个拥有大约 150.000 个关注者的 Twitter 帐户中获取所有关注者 ID。后来我想映射他们的位置，但首先我需要所有这些 ID。

目前我正在使用这段代码：

```
long lCursorIDs = -1;
    long[] fArray = new long[100];

    do
    {               
        fArray = twitter.getFollowersIDs(name, lCursorIDs).getIDs();            
    } while (twitter.getFollowersIDs(name, lCursorIDs).hasNext ()); 

    try
    {
        PrintWriter pr = new PrintWriter(filenameOutput);    

        for (int i=0; i<fArray.length ; i++)
        {
            pr.println(fArray[i]);
        }
        pr.close();
        System.out.println("Follower IDs collected and saved to file: " + filenameOutput );
    }
    catch (Exception e)
    {
        e.printStackTrace();
        System.out.println("No such file exists.");
    } 
```

这适用于关注者较少的用户。但是有那么多它总是返回一条错误消息 - 超出速率限制。我正在考虑每小时只获得一定数量的追随者ID，但我不确定如何做到这一点，而不是从第一个追随者开始每小时开始。另外，我不确定一个请求可以获得多少关注者。也许它是 100，与“lookupUser”方法一样，但我不确定.. 有什么想法/建议吗？

编辑：好的，我只是尝试获取具有 2700 个关注者的帐户的关注者 ID，并将它们正确存储在文本文件中。它也只“花费”了一个请求。比我将帐户名称更改为拥有 15500 个关注者的帐户，它再次崩溃并显示超出速率限制的消息。我不明白为什么，因为它只有大约 6 倍的追随者，但所有剩余的请求都被花费了。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:04:28.507

答案：

```
 int numberOfFollowers; 
    numberOfFollowers = user.getFollowersCount(); 

            //CREATE ARRAYS FOR FOLLOWER IDS
    long cursor = -1;
    long[] fArray = new long[numberOfFollowers];
    long[] local = new long[5000];

    IDs ids = twitter.getFollowersIDs(name, cursor);
    int j = 0;

            int x = 5000;
    int durchgang = 1;
    int d_anzahl = 1 + numberOfFollowers / 5000;
    //STROE FOLLOWER IDS IN ARRAYS
    do 
    {                       
        ids = twitter.getFollowersIDs(name, cursor);            
        local = twitter.getFollowersIDs(name, cursor).getIDs();
        System.out.println("Durchgang: " + durchgang + " / " + d_anzahl );          
        System.arraycopy(local, 0, fArray, j * x , local.length);           
        j++;
        durchgang++;

        cursor = ids.getNextCursor();           
    } while (ids.hasNext()); 
```

这将获得一个包含任何 twitter 用户的所有追随者 ID 的数组。它计算获取所有追随者 ID 所需的循环数，并将每个 5000 个 ID 的数组复制到最后包含所有 ID 的新数组中。

# video - iOS 5 - ALAssets 库 - 将视频的 URL 从资产转换为 NSDATA 文件

> ID：10540580
> 
> 赞同：0
> 
> 时间：2012-05-10T19:04:31.543
> 
> 标签：video, ios5, assets, alassetslibrary

所以我有一个应用程序可以让用户录制视频或从他们的照片库中挑选视频，然后将视频上传到服务器。录制视频后，我得到了资产的 URL。

我尝试使用以下代码将 NSData 设置为assetURL：

```
NSString *vidString =[NSString stringWithFormat:@"%@",savedVideoURL];
NSURL *vidURL = [NSURL URLWithString:vidString];
NSData *videoData = [NSData dataWithContentsOfURL:vidURL]; 
```

savedVideoURL 是录制过程中获取的资产 URL。资产 URL 如下所示：`assets-library://asset/asset.MOV?id=6EB7A04D-3DF8-44E5-A6D8-FD98461AE75E&ext=MOV`

当我尝试将 NSData 设置为该 url 时，之后 NSData 仍然等于 nil。

我无法使用以下解决方案：[Get video NSData from ALAsset url iOS](https://stackoverflow.com/questions/8791049/get-video-nsdata-from-alasset-url-ios)

有其他人知道将 NSData 设置为该资产 URL 的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T04:40:01.817

不要忘记导入：AssetsLibrary/ALAssetRepresentation.h

和代码：

```
 ALAssetsLibrary *assetLibrary=[[ALAssetsLibrary alloc] init];
    [assetLibrary assetForURL:YOURURL resultBlock:^(ALAsset *asset) // substitute YOURURL with your url of video
    {
        ALAssetRepresentation *rep = [asset defaultRepresentation];
        Byte *buffer = (Byte*)malloc(rep.size);
        NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
        NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];//this is NSData may be what you want
        [data writeToFile:photoFile atomically:YES]; //you can remove this if only nsdata needed
    } 
    failureBlock:^(NSError *err) {
        NSLog(@"Error: %@",[err localizedDescription]);
    }]; 
```

# php - 如何遍历名称中带有符号属性的xm文档

> ID：10540583
> 
> 赞同：0
> 
> 时间：2012-05-10T19:04:34.817
> 
> 标签：php, xml

我正在循环一个 xml 文件，但我想使用一个包含“-”的属性名称。

```
 foreach( $xml as $person)
    {
        echo 'Name: '.$person->Name.'<br />';
        echo 'Home address: '.$person->home-address.'<br />';
        echo 'Away address: '.$person->away-address.'<br />';
    } 
```

“-”符号破坏了脚本，我该如何使它工作？我不想重命名属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:16:10.550

在变量名周围使用大括号：

```
$person->{'away-address'} 
```

# c# - String.Join 对象列表

> ID：10540584
> 
> 赞同：21
> 
> 时间：2012-05-10T19:04:44.767
> 
> 标签：c#, list

在 C# 中，如果我有一个`List<MyObj>`where`MyObj`是一个带有重写`ToString()`方法的自定义类，这样 List 中的每个`MyObj`对象都可以轻松转换为字符串。

如何*将*它`List<MyObj>`与分隔符连接起来，例如将管道 (|) 连接到单个字符串中。

所以，如果我有 3 个 MyObj 对象，它们的 ToString 方法将分别产生 AAA、BBB、CCC。我会创建一个字符串：AAA|BBB|CCC。

对于更简单类型的列表，例如`List<string>`，我将其简单地执行为：`String.Join("|", myList.ToArray());`。有没有办法我可以做类似的事情？或者我是否被迫遍历对象列表并使用 StringBuilder 将列表中的每个对象的 ToString 附加在一起？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-10T19:06:27.187

在 .NET 4 中，您可以使用：

```
var x = string.Join("|", myList); 
```

.NET 3.5 虽然没有那么多重载`string.Join`- 您需要执行字符串转换并将其显式转换为数组：

```
var x = string.Join("|", myList.Select(x => x.ToString()).ToArray()); 
```

比较可用的重载：

*   [.NET 3.5](http://msdn.microsoft.com/en-us/library/0h8wc12c%28v=vs.90%29)
*   [.NET 4](http://msdn.microsoft.com/en-us/library/0h8wc12c%28v=vs.100%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-25T09:11:46.957

[谢谢你，乔恩·斯基特](https://stackoverflow.com/questions/10540584/string-join-on-a-list-of-objects/10540609#10540609)。对于更复杂的对象，我使用以下内容：

```
string.Join("-", item.AssessmentIndexViewPoint.Select(x =>
              x.ViewPointItem.Name).ToList()) 
```

# git - 本地 Git 遥控器：到“…/.git”还是不到“…/.git”？

> ID：10540586
> 
> 赞同：1
> 
> 时间：2012-05-10T19:04:52.787
> 
> 标签：git, url, version-control

从另一个本地 git 存储库添加远程（或关闭）时，指向工作副本内的“<code>.git”目录和指向刚刚工作的副本之间是否存在功能差异？

*IE 从“a-repo”中获取/推送/拉取的方式有什么不同吗，“a-repo”被克隆为：*

```
git clone ~/Projects/some-old-repo/.git ~/Desktop/a-repo 
```

对比

```
git clone ~/Projects/some-old-repo ~/Desktop/a-repo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:15:03.313

我会说没有区别。通常，当您克隆一个裸存储库时，工作副本是空的，尽管如此，无论您指向 .git 文件夹还是包含 .git 文件夹的目录，克隆的结果都是相同的......

# android - Admob 不刷新广告

> ID：10540587
> 
> 赞同：0
> 
> 时间：2012-05-10T19:04:54.923
> 
> 标签：android, admob

几天后我的 admob 广告不再刷新，这是一个全球性问题吗？一切正常，我没有改变任何事情。

```
05-10 19:00:15.594: I/Ads(824): onReceiveAd()
05-10 19:00:28.705: I/Ads(824): Refreshing ad.
05-10 19:00:29.345: I/Ads(824): adRequestUrlHtml: <html><head><script 
.... 
```

Logcat 显示它应该刷新但仍然存在相同的广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:06:56.277

你能提供一些代码吗？如果您正在执行以下操作之一：

1.  在 xml 中请求广告并使用`ads:testDevices`
2.  在代码中请求广告并使用`adRequest.addTestDevice()`

那么您可能处于测试模式，并且您会收到相同的测试广告。

# c - 找不到带有 -L/lib/path 的库

> ID：10540596
> 
> 赞同：0
> 
> 时间：2012-05-10T19:05:41.040
> 
> 标签：c

C 新手，尝试制作我自己的第一个库。但是 gcc 说找不到库。使用 -L/lib/path 应该没问题，但事实并非如此。

仅供参考，我使用 Mac os x。

```
~/c$make
gcc -c -o obj/hellomake.o src/hellomake.c -I./include
gcc -c -o obj/hellofunc.o src/hellofunc.c -I./include
gcc -o hellomake obj/hellomake.o obj/hellofunc.o -I./include -L./lib -lm -llibfunc
ld: library not found for -llibfunc
collect2: ld returned 1 exit status
make: *** [hellomake] Error 1

~/c$ls ./lib
README.txt libfunc.a  libfunc1.c libfunc1.o libfunc2.c libfunc2.o 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T19:07:53.700

该`-l`参数自动将`lib`部件添加到库名称之前。所以该命令应该用来`-lfunc`代替`-llibfunc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:07:55.500

`lib`链接时删除`libfunc`。只需使用`-lfunc`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:08:27.553

使用`-lfunc`，跳过前缀`lib.`

# php - PHP中测试数组键是否存在并保存其值的最简洁方法是什么？

> ID：10540599
> 
> 赞同：1
> 
> 时间：2012-05-10T19:06:01.290
> 
> 标签：php, arrays, simplexml

这看起来很笨拙：

```
if (empty($xml['soap:Envelope']['soap:Body']['SendPurchasesResponse']['PurchasesResponse']['Status']['Code'])) {
    $status = $xml['soap:Envelope']['soap:Body']['SendPurchasesResponse']['PurchasesResponse']['Status']['Code'];
} 
```

如果缺少某些数组键，是否有更好的方法来处理“未定义索引”错误？正如您可能猜到的那样，这个数组来自基于 XML 的 API，我无法相信他们对我的响应。

您是否认为使用“@”来抑制错误是一种逃避：

```
$status = @$xml['soap:Envelope']['soap:Body']['SendPurchasesResponse']['PurchasesResponse']['Status']['Code']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:13:12.470

这对你有什么作用？

```
try {
  $status = $xml['soap:Envelope']['soap:Body']['SendPurchasesResponse']['PurchasesResponse']['Status']['Code'];
} catch (Exception $e) {
  $status = ""
} 
```

# visual-studio-2010 - 只想加载单个 csproj 文件

> ID：10540601
> 
> 赞同：0
> 
> 时间：2012-05-10T19:06:04.167
> 
> 标签：visual-studio-2010

我有一个包含 3 个项目的解决方案文件。出现了一种情况，我只需要打开解决方案中的一个 csproj 文件。所以我试图打开那个单一的 csproj 文件。

猜猜 Visual Studio 做了什么。它**总是**打开 csproj 文件的整个关联解决方案！我尝试从 Windows 资源管理器双击 csproj 文件，尝试 File->Open->Project/Solution 并*明确*选择 csproj 文件，但均无济于事。

这就是我不得不说微软的蛋头们非常聪明以至于他们愚蠢的地方。有没有人知道我能做什么，除了创建**另一个**解决方案（只包含我想要的一个 csproj 文件）？

# python - Python 无法通过命令行处理导入

> ID：10540605
> 
> 赞同：5
> 
> 时间：2012-05-10T19:06:21.173
> 
> 标签：python, windows, import

我的 python 脚本在 IDLE 中运行良好，但是当我尝试从命令行运行它们时，出现了问题。首先我在导入 pygame 时遇到了麻烦，但我将 C:\Python27\Lib\site-packages 添加到 PYTHONPATH 环境变量中，一切都很好，我想。但是，现在当我尝试从命令行运行某些东西时，我得到了这个：

```
C:\Users\Ian Sinke\Documents\Pong>python pong.py
'import site' failed; use -v for traceback
Traceback (most recent call last):
  File "pong.py", line 3, in ?
    import pygame
  File "C:\Python27\Lib\site-packages\pygame\__init__.py", line 27, in ?
    import sys, os, string
  File "C:\Python27\Lib\os.py", line 63, in ?
    import ntpath as path
  File "C:\Python27\Lib\ntpath.py", line 401
    backslash, dot = (u'\\', u'.') if isinstance(path, unicode) else ('\\', '.')

                                    ^
SyntaxError: invalid syntax 
```

有任何想法吗？

这不是本地化问题；当我尝试从命令行运行另一个脚本时，我得到了这个：

```
C:\Users\Ian Sinke\Documents>python app.py
'import site' failed; use -v for traceback
Traceback (most recent call last):
  File "app.py", line 4, in ?
    import urllib2
  File "C:\Python27\Lib\urllib2.py", line 92, in ?
    import base64
  File "C:\Python27\Lib\base64.py", line 346
    with open(args[0], 'rb') as f:
            ^
SyntaxError: invalid syntax 
```

那语法肯定没问题...

Pong.py 的开头是这样的：

```
#import sys
import math
import pygame
import time
from pygame.locals import *

# Helper functions
def centerdist(paddletop, balltop):
    return balltop - paddletop - 30

# Constants
BLACK = 0, 0, 0

pygame.init() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T19:16:19.287

在我看来，这听起来就像您的计算机上有两个不同版本的 Python。一个是接受 Python 版本的三元表达式的更新版本，一个是旧版本。当您使用 IDLE 时，会调用较新的版本。使用命令行时，会调用旧版本。`python -V`您可以通过从命令行运行来确认或反驳这个假设。

[为了详细说明，在Python 2.5](http://docs.python.org/whatsnew/2.5.html)中添加了对条件表达式的支持。因此，当您修改 时`PYTHONPATH`，您最终会使用旧版本的 python（根据您的测试为 2.4）运行一个较新的 python 文件（听起来像是从 2.7 开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:23:15.373

确保您的命令行 python 至少是 2.5 版，因为在此之前，没有三元运算符 (http://marc-abramowitz.com/archives/2008/05/18/python-ternary-operator/)。

# eclipse - Maven Eclipse 中的“java.library.path 中没有 J3D”

> ID：10540607
> 
> 赞同：2
> 
> 时间：2012-05-10T19:06:24.590
> 
> 标签：eclipse, maven, java-3d, unsatisfiedlinkerror

我得到的错误在这里得到了很好的讨论，但我似乎仍然无法掌握我做错了什么。

我正在尝试使用 java3d 运行一个简单的代码。我将 jard 添加到 Maven 依赖项中，它们正在显示。没有显示错误，一切似乎都很好。

但是当我试图编译代码时，突然消息

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no J3D in java.library.path
at java.lang.ClassLoader.loadLibrary(Unknown Source)
at java.lang.Runtime.loadLibrary0(Unknown Source)
at java.lang.System.loadLibrary(Unknown Source)
at javax.media.j3d.MasterControl$22.run(MasterControl.java:889)
at java.security.AccessController.doPrivileged(Native Method)
at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:886)
at javax.media.j3d.VirtualUniverse.<clinit>(VirtualUniverse.java:229)
at de.act.gui.Skelett3D.main(Skelett3D.java:15) 
```

出现。

显然我只是错过了一些微不足道的错误。既然这个问题被问了很多次，答案应该在某个地方。

我通过 pom.xml 添加了罐子

```
 <dependency>
        <groupId>java3d</groupId>
        <artifactId>j3d-core-utils</artifactId>
        <version>1.3.1</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T20:44:16.567

If the above solution is not working try to manually install maven and j3d, or reinstall it. a missing file is sometimes a really bad sign, because sometimes if 1 file is missing maybe you haven't installed propertly and other files will be missing later on so i suggest you reinstalling.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:09:55.247

您缺少本机库（即一个`dll`或`so`文件）。

我不知道如何从 maven 中正确引用它（显然你可以构建类似 NAR 的东西，但我还没有研究过）。

eclipse 的一个快速解决方案是将 dll 作为本机依赖项添加到`Maven Dependencies`eclipse 中的库中：

在项目属性的“Java Build Path”中的“Libraries”选项卡中，展开“Maven Dependencies”并编辑“Native library location”以指向包含您的本机库的目录。

# oop - 如果观察者也是主体，如何应用观察者模式

> ID：10540608
> 
> 赞同：1
> 
> 时间：2012-05-10T19:06:26.360
> 
> 标签：oop, design-patterns

我有一个容器面板。在容器中，我没有其他面板。用户可以更改任何面板中的信息。当面板更改时，所有其他容器都应更新并刷新它们呈现的信息。

在正常情况下，观察者模式有一个主题和一群观察者。在这种情况下，观察者也是主体。

这是设计模式可以解决的问题吗？我应该如何以良好的 OOP 风格构建这些对象之间的交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:22:46.340

[http://en.wikipedia.org/wiki/Mediator_pattern](http://en.wikipedia.org/wiki/Mediator_pattern)在这里可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T05:35:56.030

听起来更像是[发布/订阅模式](http://www.codeproject.com/Articles/34316/Topic-based-Publish-Subscribe-design-pattern-imple)而不是观察者模式。

*   小组 A、B 和 C 订阅主题 X。
*   面板 B 在收到手动处理的主题 X 时生成主题 Z

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:18:59.330

您可以通过将其设置为多对多来调整观察者模式的想法。唯一的区别是观察者需要知道什么主题改变了状态，而不是任何主题改变了状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:54:08.873

假设您有一个容器类实例 C1 和 Observer 类实例 ob1、ob2、ob3，它们都在观察 Subject 类实例 s1。当 ob1 上发生事件时，您可以触发类 S1 中的事件并确保 S1 中的事件处理函数通知观察者 ob1、ob2、ob3

希望这可以帮助。如果有请告诉我:)

谢谢！

# objective-c - 在另一个类中使用一个类的功能

> ID：10540612
> 
> 赞同：0
> 
> 时间：2012-05-10T19:06:33.737
> 
> 标签：objective-c, ios, geonames

我正在尝试在我的项目中使用[ILGeoNames](https://github.com/InfiniteLoopDK/ILGeoNames)类。但是我无法理解以何种方式可以将这些类用于我的目的。这个框架中有一个“简单的项目”。从中我只想要一件事：国家时区（我已经有了县名）。因为有很多方法，变量和其他人员，我无法理解我到底需要使用什么。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:38:50.337

如果它是一堆类并且你想使用某个类的方法或属性，那么你必须#import name_of_class_you_want_to_utilize; 在文件的开头，然后拨打电话。类方法可以直接调用，而实例方法需要您创建类的实例才能访问它们。

# c# - Selenium 与 NUnit 和 .Net 提供 NoSuchElementExcpection

> ID：10540616
> 
> 赞同：1
> 
> 时间：2012-05-10T19:07:04.080
> 
> 标签：c#, firefox, selenium, nunit

我正在使用 selenium 进行自动化测试。当测试在 Selenium IDE 上运行时，它会成功运行，当将其导出为 .Net Web 驱动程序并使用 NUnit 运行时，会抛出 NoSuchElementsException。请问有人是什么导致了这个异常吗？

```
SeleniumTests.UserNotLogged.TheUserNotLoggedTest: 
```

OpenQA.Selenium.NoSuchElementException : Unable to locate element: {"method":"link text","selector":""} //异常来自 NUnit

```
[Test]
    public void TheUserNotLoggedTest()
    {
        driver.Navigate().GoToUrl(baseURL + "Index.aspx");
        driver.FindElement(By.Id("wrapper")).Click();
        driver.FindElement(By.LinkText("Home")).Click();
        driver.FindElement(By.LinkText("News")).Click(); //Exception thrown here
        driver.FindElement(By.LinkText("Events")).Click();
        driver.FindElement(By.LinkText("Contact Us")).Click();
        driver.FindElement(By.LinkText("Register")).Click();
    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:10:18.633

在这种情况下，通常是时间问题。我认为这些是导航链接？在这种情况下，Selenium 很可能在页面完成加载之前就试图找到新闻链接。尝试添加一个 WebDriverWait：

[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

如果这仍然不能解决问题，请使用不同的方法来查找链接，例如 css 选择器或 XPath - 只是为了验证您是否可以使用不同的方法找到它（尽管不是最好的方法）。

# asp.net - 无法从 Visual Studio 中选择 GridView 控件

> ID：10540620
> 
> 赞同：3
> 
> 时间：2012-05-10T19:07:16.530
> 
> 标签：asp.net, visual-studio-2010, gridview

我敢肯定这可能是我忽略的一件非常愚蠢的事情。当 Visual Studio 2010 中的任何 GridView 控件位于 asp:table 元素中时，我似乎无法选择/突出显示它们。如果我将 GridView 移到 asp:table 元素之外，那么我可以突出显示它并在属性窗口中查看属性。

当控件位于表格元素中时，它不会显示在设计器中（但在运行站点时会显示）并且不会出现在属性窗口下拉列表中。请看屏幕截图。有任何想法吗？我已经查看了 Visual Studio 中的几乎所有选项，但似乎找不到适用的选项。

这不是编码问题，因为网格本身可以正常工作 - 这就是这里没有发布代码的原因。

有什么想法吗？

编辑 - 它不会让我发布屏幕截图，所以我会发布链接

[http://i.stack.imgur.com/lfO86.jpg](http://i.stack.imgur.com/lfO86.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:37:14.410

您无法访问它，因为它成为表格控件集合的一部分，就像您无法直接访问`TextBox`GridView 列中的 a 一样。

你有两个选择：

1.  改用常规的 HTML 表格
2.  使用`FindControl()`方法来访问`GridView`in 代码隐藏

**编辑**

对于在设计时编辑控件，进入源视图（标记）而不是将其拖入和拖出容器可能更有效。它将使您不必一直移动它，并且您可能会发现它比使用属性窗口更快；我知道我发现编辑标记要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:57:04.070

欢迎来到 VS2010 ... 和其他所有 VS :D

你可以做的是去你的源代码，滚动到你想要的项目，然后点击它的标签。它应该显示在右侧的属性窗口中供您编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:00:38.947

在源视图中，使用 just`<table>`代替`<asp:Table>`and `<tr>`，分别`<td>`用于行和表数据，而不是`<asp:TableRow>`and `<asp:TableCell>`。然后，您可以在设计视图中选择该表的内部控件

# apache - Apache2 中是否可以有两个密码文件？

> ID：10540621
> 
> 赞同：6
> 
> 时间：2012-05-10T19:07:26.883
> 
> 标签：apache, apache2, basic-authentication

我可以在 apache2/sites-enabled/000-default 配置文件中有两个 AuthUserFile 指令吗？

```
 <Location /repo/trac>
      AuthType Basic
      AuthName "Trac"
      AuthUserFile /etc/apache2/passfile1
      AuthUserFile /etc/apache2/passfile2
      Require valid-user
    </Location> 
```

我想要两种类型的用户的用户名/密码。

*   DEV - 可以访问 SVN 和 Trac
*   NOM - 只能访问 Trac

我有两个选择：为 Trac 和 Svn 保留单独的密码文件并分别包含它们，或者在 1 中包含 2 个密码文件我将 DEV 放在其他 NOM 中，并且仅包含 1 个用于 svn 并在 trac 位置下包含两个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T19:40:36.250

您应该将所有内容移动到单个密码文件中，然后使用组来控制对特定资源的访问。您可以`/etc/apache2/groups`使用以下内容创建：

```
DEV: bob alice
NOM: norm fred bart 
```

然后修改您的配置，使其看起来像这样：

```
<Location /repo/trac>
  AuthType Basic
  AuthName "Trac"
  AuthUserFile /etc/apache2/passfile
  AuthGroupFile /etc/apache2/groups
  Require group DEV NOM
</Location> 
```

这将允许`DEV`和`NOM`组的成员访问此资源。

如果您*真的*想使用多个密码文件，请参阅[mod_authn_alias](http://httpd.apache.org/docs/2.2/mod/mod_authn_alias.html)的文档，其中有一个可以做到这一点的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-16T13:59:03.930

从文档中，您实际上可以拥有多个密码文件**。**诀窍是使用 AuthnProviderAlias

[https://httpd.apache.org/docs/2.4/mod/mod_authn_core.html](https://httpd.apache.org/docs/2.4/mod/mod_authn_core.html)

**在您的全局配置中**：

*（正如@RickyLevi 所说，AuthnProviderAlias 不能出现在虚拟主机中）*

> ```
> <AuthnProviderAlias file file1>
>     AuthUserFile "/www/conf/passwords1"
> </AuthnProviderAlias>
> 
> <AuthnProviderAlias file file2>   
>     AuthUserFile "/www/conf/passwords2"
> </AuthnProviderAlias> 
> ```

**在您的虚拟主机中：**

> ```
> <Directory "/var/web/pages/secure">
>     AuthBasicProvider file1 file2
>     AuthType Basic
>     AuthName "Protected Area"
>     Require valid-user
> </Directory> 
> ```

[https://httpd.apache.org/docs/2.4/en/mod/mod_auth_basic.html#authbasicprovider](https://httpd.apache.org/docs/2.4/en/mod/mod_auth_basic.html#authbasicprovider)

> 按顺序查询提供者，直到提供者找到所请求的用户名的匹配项，此时该唯一提供者将尝试检查密码。验证密码失败不会导致将控制权传递给后续提供者。

# asp.net - ModalPopupExtender 绕过 OnClick

> ID：10540622
> 
> 赞同：0
> 
> 时间：2012-05-10T19:07:27.310
> 
> 标签：asp.net, asp.net-ajax

嘿，所以我对 asp.net 还是很陌生，我正在尝试创建一个网站/表单来接收大量数据并用它做一些事情。我有一个调用 submitButton_Click 方法的提交按钮，但是当我在服务器端对同一事件进行处理时，我也有一个显示“请稍候”更新面板的 modalpopup。问题是 modalpopup 似乎工作正常，但它抑制了我的 submitButton_Click 方法调用。我该怎么办？

另外，是否有可能在更新面板打开时调用默认方法？尽管我上次更新它，但我希望面板每次弹出时都相同。

```
<asp:Button ID="submitButton" runat="server" Text="Submit" OnClick="submitButton_Click"
            CssClass="buttons"/>

<asp:ModalPopupExtender 
        ID="modalProgress" 
        runat="server" 
        OkControlID="btnOkay" 
        TargetControlID="submitButton" 
        PopupControlID="progessPanel"
        BackgroundCssClass="modalBackground">

</asp:ModalPopupExtender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:46:49.397

它不会*绕过*点击事件；它只是将客户端更改`onclick`为返回 false，从而否定回发。老实说，我一直觉得这很痛苦。幸运的是，有一个解决方法：

```
<asp:Button ID="submitButton" runat="server" Text="Submit" OnClick="submitButton_Click"                CssClass="buttons"/>
<!-- hidden button to satisfy the extender -->
<asp:Button ID="hiddenButton" runat="server" style="display:hidden" />

<asp:ModalPopupExtender 
        ID="modalProgress" 
        runat="server" 
        OkControlID="btnOkay" 
        TargetControlID="hiddenButton" 
        PopupControlID="progessPanel"
        BackgroundCssClass="modalBackground">
</asp:ModalPopupExtender> 
```

通过添加隐藏按钮，您将满足扩展器的要求，并且您可以在提交按钮的单击事件中以代码隐藏的方式打开对话框：

```
protected void submitButton_Click(object sender, EventArgs e)
{
    //display the modal dialog
    modalProgress.Show();
} 
```

# javascript - 在 for 循环中使用 var 关键字

> ID：10540623
> 
> 赞同：3
> 
> 时间：2012-05-10T19:07:29.603
> 
> 标签：javascript, performance, coding-style, standards

这与[JavaScript 的“for-in”循环中的“var”或没有“var”有关吗？](https://stackoverflow.com/questions/5717126/var-or-no-var-in-javascripts-for-in-loop)（但更多地谈论范围 - 这个问题不是关于范围）

循环遍历对象或数组是否更有效/更常见，为什么？

**选项 1 - 在循环外设置 var**

```
// Object
var x;
for (x in obj) { ... }
// Array
var i;
for (i = 0; i < array.length; ++i) { ... } 
```

**选项 2 - 在循环中设置 var**

```
// Object
for (var x in obj) { ... }
// Array
for (var i = 0; i < array.length; ++i) { ... } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:10:07.510

`var`被提升并被限定为函数，而不是块，因此编译器将优化差异。

第二个稍微快一些，因为通过网络发送的字符更少。这种差异不足以成为您决定使用哪个的影响因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:11:27.590

实际上，最快的方法是在列表中循环 BACKWARDS（确保在影响结果时不要这样做）。请参阅[反向循环真的更快吗？](https://stackoverflow.com/questions/1340589/javascript-are-loops-really-faster-in-reverse)

```
var i = arr.length; //or 10
while(i--)
{

} 
```

至于 var 问题，只要您尚未使用该名称/重置值/之后删除引用，就可以在外部声明它。

# ruby-on-rails - 无法初始化属于的 state_machined 类

> ID：10540630
> 
> 赞同：1
> 
> 时间：2012-05-10T19:08:03.253
> 
> 标签：ruby-on-rails, initializer, state-machine

我在课堂上包含了 state_machine 并在控制台中使用它进行操作时退出了。但是，当我尝试在应用程序中使用它时，我的兴奋消失了。我有

```
wrong number of arguments (2 for 0) 
```

当我调用 user.requests.build 时，我的 state_machined 类“request”的“initialize”方法出错。

“初始化”方法看起来像

```
def initialize
  super()
end 
```

[因为 gem 的创建者在https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)告诉我。类定义以

```
class Request < ActiveRecord::Base
 attr_accessible :subject, :details, :assigned_to, :log, :status, :solution

 belongs_to :user
 belongs_to :assignee, class_name: "User", foreign_key: "assigned_to" 
```

我认为初始化程序不知道的关联引起的错误。我对吗？我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:49:47.033

自述文件中给出的示例不适用于 ActiveRecord 集成——仅适用于普通的 Ruby 类。在 ActiveRecord 集成中，不需要在你的初始化方法中做任何特殊的事情来让 state_machine 工作。通过覆盖您的初始化方法，您正在更改 ActiveRecord 所依赖的方法签名。如果您在该覆盖中没有做任何其他事情，我建议您完全删除它。

希望这可以帮助！

# java - java - 如何将子进程stdout/stderr重定向到Java中的主进程stdout/stderr？

> ID：10540631
> 
> 赞同：11
> 
> 时间：2012-05-10T19:08:09.620
> 
> 标签：java, process

在其他语言（如*bash*和*Python*）中，当我们生成子进程时，这个新进程将从父进程继承 stdout 和 stderr。这意味着子进程的任何输出都将打印到终端以及父进程的输出。

我们如何在 Java 中实现相同的行为？

我的第一次尝试是：

```
proc = Runtime.getRuntime().exec(cmd); 
```

但它不会起作用。基于[this answer](https://stackoverflow.com/a/3644288/124946)和[this answer](https://stackoverflow.com/a/3641817/124946)，我已将代码替换为：

```
ProcessBuilder pb = new ProcessBuilder(cmd);
pb.redirectOutput(System.out);
pb.redirectError(System.err); 
```

但这甚至无法编译，因为参数与预期的方法参数不兼容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T19:18:04.750

您需要读取您创建的进程的输出和错误流，并将输出写入您想要的位置（在您的情况下为 System.out 和 System.err）。

编辑。上面的答案对于 java < 7 是正确的。从 javadoc 的 7 开始，它看起来可以改为调用

```
processBuilder.redirectOutput(Redirect.INHERIT) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T17:15:46.353

这还不错。我最初说“简单”，然后我意识到我必须编写 InputStreamConsumer：

```
public static class InputStreamConsumer extends Thread {

    private InputStream is;

    public InputStreamConsumer(InputStream is) {
        this.is = is;
    }

    @Override
    public void run() {

        try {
            int value = -1;
            while ((value = is.read()) != -1) {
                System.out.print((char)value);
            }
        } catch (IOException exp) {
            exp.printStackTrace();
        }
    }
}

private void captureOutput(Process p) {

    InputStreamConsumer stdout;
    InputStreamConsumer errout;

    errout = new InputStreamConsumer(p.getErrorStream());
    stdout = new InputStreamConsumer(p.getInputStream());
    errout.start();
    stdout.start();
} 
```

....在...里面运行

```
 ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/D", "/C", myCommand, parm, parm...);
    try {
        System.out.println("Start "+myCommand);
        Process myProcess = pb.start();
        captureOutput(myProcess);

        int returnCode = myProcess.waitFor();
        System.out.println("myProcess: return code : "+returnCode);
    }
    catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:19:53.543

这当然是可能的。当 fork 设置为 true 时，Ant Java 任务会执行此操作。我不记得所有细节，但快速浏览一下，似乎大部分魔法都在[PumpStreamHandler](http://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/PumpStreamHandler.java?view=markup)中。你可以尝试从中寻找一些灵感。

# powershell - 是否可以只包含函数而不执行脚本？

> ID：10540632
> 
> 赞同：5
> 
> 时间：2012-05-10T19:08:10.570
> 
> 标签：powershell, pester

假设我有*MyScript.ps1*：

```
[cmdletbinding()]
param ( 
    [Parameter(Mandatory=$true)]
        [string] $MyInput
)

function Show-Input {
    param ([string] $Incoming)
    Write-Output $Incoming
}

function Save-TheWorld {
    #ToDo
}

Write-Host (Show-Input $MyInput) 
```

是否可以仅以某种方式点源函数？问题是如果上面的脚本是点源的，它会执行整个事情......

我最好的选择是使用`Get-Content`和解析函数并使用 Invoke-Expression ...？或者有没有办法以编程方式访问 PowerShell 的解析器？我看到这可能与 PSv3 一起使用`[System.Management.Automation.Language.Parser]::ParseInput`，但这不是一个选项，因为它必须在 PSv2 上工作。

我问的原因是我正在尝试[Pester](https://github.com/scottmuc/Pester) PowerShell 单元测试框架，它对函数运行测试的方式是通过点源文件与测试夹具中的函数。测试夹具如下所示：

*MyScript.Tests.ps1*

```
$here = Split-Path -Parent $MyInvocation.MyCommand.Path
$sut = (Split-Path -Leaf $MyInvocation.MyCommand.Path).Replace(".Tests.", ".")
. "$here\$sut"

Describe "Show-Input" {

    It "Verifies input 'Hello' is equal to output 'Hello'" {
        $output = Show-Input "Hello"
        $output.should.be("Hello")
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:39:05.587

使用[Doug 的*Get-Function*函数](http://www.dougfinke.com/blog/index.php/2008/11/14/using-powershells-psparsertokenize-discover-functions-in-powershell-scripts/)，您可以通过以下方式包含函数：

```
$script = get-item .\myscript.ps1
foreach ($function in (get-function $script))
{
  $startline = $function.line - 1
  $endline = $startline
  $successful = $false
  while (! $successful)
  {
    try {
      $partialfunction = ((get-content $script)[$startline..$endline]) -join [environment]::newline
      invoke-expression $partialfunction
      $successful = $true
    }
    catch [Exception] { $endline++ }
  }
} 
```

**编辑**：[System.Management.Automation.IncompleteParseException] 可以用来代替 Powershell V2 中的 [Exception]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T02:14:48.693

**注意**- 如果您发现此答案有帮助，请投票支持 jonZ 的答案，因为如果不是因为他的有用答案，我将无法提出这个答案。

我基于链接到的脚本@jonZ 创建了这个函数提取器函数。这用于`[System.Management.Automation.PsParser]::Tokenize`遍历输入脚本中的所有标记并将函数解析为函数信息对象并将所有函数信息对象作为数组返回。每个对象如下所示：

```
Start       : 99
Stop        : 182
StartLine   : 7
Name        : Show-Input
StopLine    : 10
StartColumn : 5
StopColumn  : 1
Text        : {function Show-Input {,     param ([string] $Incoming),     Write-Output $Incoming, }} 
```

text 属性是一个字符串数组，可以写入临时文件和点源，或者使用换行符组合成一个字符串，并使用`Invoke-Expression`.

仅提取函数文本，因此如果一行有多个语句，例如：`Get-Process ; function foo () {`仅提取与函数相关的部分。

```
function Get-Functions {
    param (
        [Parameter(Mandatory=$true)]
        [System.IO.FileInfo] $File
    )

    try {
        $content = Get-Content $File
        $PSTokens = [System.Management.Automation.PsParser]::Tokenize($content, [ref] $null)

        $functions = @()

        #Traverse tokens.
        for ($i = 0; $i -lt $PSTokens.Count; $i++) {
            if($PSTokens[$i].Type -eq  'Keyword' -and $PSTokens[$i].Content -eq 'Function' ) {
                $fxStart = $PSTokens[$i].Start
                $fxStartLine = $PSTokens[$i].StartLine
                $fxStartCol = $PSTokens[$i].StartColumn

                #Skip to the function name.
                while (-not ($PSTokens[$i].Type -eq  'CommandArgument')) {$i++}
                $functionName = $PSTokens[$i].Content

                #Skip to the start of the function body.
                while (-not ($PSTokens[$i].Type -eq 'GroupStart') -and -not ($PSTokens[$i].Content -eq '{')) {$i++ }

                #Skip to the closing brace.
                $startCount = 1 
                while ($startCount -gt 0) { $i++ 
                    if ($PSTokens[$i].Type -eq 'GroupStart' -and $PSTokens[$i].Content -eq '{') {$startCount++}
                    if ($PSTokens[$i].Type -eq 'GroupEnd'   -and $PSTokens[$i].Content -eq '}') {$startCount--}
                }

                $fxStop = $PSTokens[$i].Start
                $fxStopLine = $PSTokens[$i].StartLine
                $fxStopCol = $PSTokens[$i].StartColumn

                #Extract function text. Handle 1 line functions.
                $fxText = $content[($fxStartLine -1)..($fxStopLine -1)]
                $origLine = $fxText[0]
                $fxText[0] = $fxText[0].Substring(($fxStartCol -1), $fxText[0].Length - ($fxStartCol -1))
                if ($fxText[0] -eq $fxText[-1]) {
                    $fxText[-1] = $fxText[-1].Substring(0, ($fxStopCol - ($origLine.Length - $fxText[0].Length)))
                } else {
                    $fxText[-1] = $fxText[-1].Substring(0, ($fxStopCol))
                }

                $fxInfo = New-Object -TypeName PsObject -Property @{
                    Name = $functionName
                    Start = $fxStart
                    StartLine = $fxStartLine
                    StartColumn = $fxStartCol
                    Stop = $fxStop
                    StopLine = $fxStopLine
                    StopColumn = $fxStopCol
                    Text = $fxText
                }
                $functions += $fxInfo
            }
        }
        return $functions
    } catch {
        throw "Failed in parse file '{0}'. The error was '{1}'." -f $File, $_
    }
}

# Dumping to file and dot sourcing:
Get-Functions -File C:\MyScript.ps1 | Select -ExpandProperty Text | Out-File C:\fxs.ps1
. C:\fxs.ps1
Show-Input "hi"

#Or import without dumping to file:

Get-Functions -File  C:\MyScript.ps1 | % { 
    $_.Text -join [Environment]::NewLine | Invoke-Expression
}
Show-Input "hi" 
```

# endeca - 确定由 endeca 触发的规则

> ID：10540636
> 
> 赞同：0
> 
> 时间：2012-05-10T19:08:28.147
> 
> 标签：endeca

我们在应用程序中通过规则管理器设置了各种 endeca 规则，这些规则在呈现页面时触发。

是否可以通过 Java/JSP 代码确定页面触发了哪个规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:34:52.000

正确的方法是使用 Content Assembler API (endeca_content.jar)。您需要创建内容查询并检索内容对象：

```
ContentItem content = results.getContent();
content.getName(); 
```

也可以使用导航 API，使用导航对象中的 SupplementList 对象：标题键将代表触发的规则的名称。但是，您是否以任何有意义的方式使用页面构建器，正确的方法是使用 Content Assemble API。

```
SupplementList sl = nav.getSupplements();
for (Object object : sl) {
   Supplement s = (Supplement) object;
   PropertyMap map = s.getProperties();
   Set keys = map.keySet();
   for (Object key : keys) {
    logger.info("Sup prop: " + key + " \t" + map.get(key));
   }
} 
```

# android - 在自定义视图之上显示类似于视图的网格

> ID：10540639
> 
> 赞同：1
> 
> 时间：2012-05-10T19:08:49.477
> 
> 标签：android

我想在自定义视图顶部显示一个 3*3 网格，如矩阵视图。（该自定义视图用作显示作用在加速度计上的球的视图）。我想要实现的是，当加速度计作用于自定义视图上的球时，它将沿着自定义视图（我将其命名为“mSimulationView”）移动，穿过 9 个网格中的任何一个，如框。通过任何框（网格）会触发方向控制，就像手柄的方向控制一样。我想让盒子（网格）对用户可见，并在球通过它时改变盒子（网格）的颜色。

问题是我不知道如何在自定义视图之上添加网格视图。如果我添加“表格行”或“网格视图”，它将完全阻止自定义视图。我正在考虑为此目的使用“GLSurfaceView”，但我不确定这是否可行。我正在尝试为 android.v2.1 制作重力模拟手柄。

```
 <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="250dp"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >           
    </LinearLayout> 
```

我需要在线性布局顶部有一个 3*3 网格状结构。

# android - 设计一个仅限安卓平板电脑的应用程序

> ID：10540646
> 
> 赞同：32
> 
> 时间：2012-05-10T19:09:10.630
> 
> 标签：android, android-layout, google-play

假设我想构建 2 组不同的仅平板电脑布局。一种用于 600dp（7" 平板电脑 1024x600）和一种用于 720dp（10" 平板电脑 1280x720 或 1280x800）

我了解使用 android 3.2 您现在可以指定平板电脑布局。我明白这一点，但如何在 Google Play 上指定这是一个仅限平板电脑的应用程序。

有这个 android:requiresSmallestWidthDp 来指定所需的最小最小宽度。很好，但稍后您可以阅读指南

> 注意：Android 系统不关注该属性，因此它不会影响您的应用程序在运行时的行为方式。相反，它用于为您的应用程序在 Google Play 等服务上启用过滤。但是，Google Play 目前不支持此属性进行过滤（在 Android 3.2 上），因此**如果您的应用程序不支持小屏幕，您应该继续使用其他尺寸属性。**

所以它不被系统使用，也不被Google Play使用......所以基本上它没用，对吧？

“如果您的应用程序不支持小屏幕，您应该继续使用其他尺寸属性。

行。还有什么尺寸属性？支持屏幕之一？Xlarge：屏幕至少为 960dp x 720dp 大：屏幕至少为 640dp x 480dp

1024x600 7" 平板电脑是一个“大”屏幕。所以我基本上必须为 640x480 res 设计一个布局。因为如果我希望我的应用程序可用于 2 种不同尺寸的平板电脑，我必须启用 large 和 xlarge屏幕。

所以我想我可以像这样构建两组不同的布局

```
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

并完全省略为较小的屏幕指定布局，但应用程序会在较小的屏幕上崩溃。这是一种阻止应用程序运行的方法，这肯定是不优雅的。

有没有办法让该应用程序仅适用于 Google-Play 上 600dp 及更大的屏幕？我很困惑。我想制作一个 640x480 手机无法在 Google-Play 上下载的仅限平板电脑的应用程序。我想我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-10T19:27:17.050

要让您的应用仅针对在 Google-Play 中运行 ICS 的平板电脑进行过滤，您可以在 AndroidManifest 中执行此操作：

```
<supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:requiresSmallestWidthDp="600"
        android:smallScreens="false"
        android:xlargeScreens="true" />

 <uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="14" /> 
```

要获得 HoneyComb 平板电脑，您只需更改您的 minSdk

```
 <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="14" /> 
```

因此，您现在所说的 Gingerbread (2.3) 及以下版本无法下载您的应用程序（因为它们不是平板电脑**，也不是设计用于平板电脑，即使它已被黑客入侵**）。

支持 HoneyComb Tablets (3.0)（因为 <3.2 忽略了 requiresSmallestWidth 属性）

没有**手机**运行蜂窝

支持 ICS 平板电脑，因为它确实会查看您的最小宽度属性

最后 ICS 手机不是因为我们说 ICS 使用了最小宽度属性

# java - 克隆和序列化与使用“新”和反射有何不同？

> ID：10540647
> 
> 赞同：2
> 
> 时间：2012-05-10T19:09:11.583
> 
> 标签：java, conceptual

当我读到“我们可以用多少种方式在 java 中创建对象”时。

我找到了四种方法：

1.  使用 new 运算符创建对象。
2.  克隆
3.  序列化
4.  反射。

有了新的和反思，我对这两种方法都很好。

我的问题是：

**为什么人们认为克隆和序列化是创建对象的不同方式？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T19:17:14.103

这里非常重要的一点是，在对象反序列化过程中**不涉及构造函数**——这就是为什么它是创建对象的一种独特方式。克隆也是如此——该方法`Object.clone`通过 JVM 魔术创建一个新对象，同样不涉及任何构造函数。实际上，一方面这两种方式和另一方面`new`的反射之间存在更大的差异，因为反射只是调用涉及特定构造函数的普通对象实例化的一种稍微不同的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:14:35.387

当你克隆一个对象时，这意味着你正在处理与原始对象不同的内存部分。是的，它们可能具有相同的属性，但它们是具有两个不同内存块的两个不同指针。

当您反序列化一个对象时，就会存在一个以前不存在的对象。即使你序列化然后立即反序列化，它也会独立于原始对象而存在。

# php - php会话变量多维关联数组问题

> ID：10540648
> 
> 赞同：2
> 
> 时间：2012-05-10T19:09:14.937
> 
> 标签：php, multidimensional-array, session-variables, associative-array

我环顾四周，但找不到对我的 $_SESSION 变量中发生的事情的解释。

```
@ob_start();
$k=@ob_get_contents();
@ob_end_clean();
@session_start();
unset($s,$m);
$m1 = explode(" ", microtime());
$stime = $m1[1] + $m1[0];
echo $k;

$_SESSION['resendConfirmation']['function'] = 'resend';
$_SESSION['resendConfirmation']['id'] = '8';                

print_r($_SESSION); 
```

输出：

```
Array ( [resendConfirmation] => 8esend ) 
```

为什么要替换字符串？我以前从来没有遇到过这个问题。

我想要的是：

```
Array([resendConfirmation] => Array(
                             [id] =>8
                             [function} => resend
                             )
) 
```

我从来没有遇到过这种情况，我完全糊涂了！

***更新*** 作为对@DanRedux 的回应，我已更改为两个不存在的变量名称以将引用排除在等式之外，结果仍然相同...

```
$_SESSION['resendConfirmation']['tweak'] = 'resend';
$_SESSION['resendConfirmation']['tweak2'] = '8'; 
```

结果相同:(

是否进行了站点范围的查询`resendConfirmation`，但没有找到，但是一旦我更改了该数组名称，这一切都有效，令人困惑，但已修复...

```
$_SESSION['reConfirm']['function'] = 'resend';
$_SESSION['reConfirm']['id'] = '8';             

print_r($_SESSION); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:21:33.273

您认为的多维数组实际上并非如此。真正发生的是：

你认为的数组实际上是一个字符串。之后，您尝试将字符串作为数组访问。您正在尝试访问`id`不存在的元素。PHP 总是试图变得比它应该的更聪明，只是说：好的，我假设你的意思是第一个索引。所以基本上发生的事情是：

```
<?php
$notAnArray = 'somestring';
$notAnArray['id'] = '8'; 

var_dump($notAnArray); // 8omestring 
```

这就是您[应该*始终*](http://codepad.viper-7.com/jottbA)在您的开发机器上[启用 error_reporting的原因：](http://codepad.viper-7.com/jottbA)

```
error_reporting(E_ALL | E_STRICT);
ini_set("display_errors", 1); 
```

并且*永远不要*使用`@`. 好吧，在某些情况下您可以使用`@`，但这确实不是其中之一。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T19:22:05.973

因为我真的不知道代码在你给我们的这个块之外还有什么其他类型的恶作剧，所以我想说试试这个：

```
$_SESSION['resendConfirmation'] = array('id' => 8, 'function' => 'resend'); 
```

如果这也失败了，那么在您发布的内容之外必须有其他事情发生。祝你好运！

# javascript - 自定义确认对话框

> ID：10540657
> 
> 赞同：2
> 
> 时间：2012-05-10T19:10:10.147
> 
> 标签：javascript, modal-dialog, confirm

```
function deleteRecordDialog() {
    var returnThis;
    var numRecordss = recs.length;
    var html = ""
    /*html= html +'<div id="popupContainer" style="width:' + width + 'px; height: ' + height + '; display: block;">';
    html= html + '<div id="popupInner">';
    html= html + '<div id="popupFrame">';
    html= html + '<div class="margin15px dialog-messages">';*/
    html= html + '<table>';
    html= html + '<tr>';
    html= html + '<td class="warning-icon-cell"></td>';
    html= html + '<td style="padding-left: 5px;">';
    if (numAddresses == 1) {
        html = html + '<p>You have chosen to delete a contact.</p>';
    }
    else {
        html = html + '<p>You have chosen to delete ' + numAddresses + ' contact(s).</p>';
    }
    html= html + '<p>Are you sure you wish to proceed?</p>';
    html= html + '</td>';
    html= html + '</tr>';
    html = html + '</table>';
    if (numAddresses == 1) {
        html = html + '<div class="add-postage-submit-buttons"><input type="button" value="Yes, Delete Contact" style="width: 160px; onclick="returnThis=true; CloseDialog();"/>&nbsp;&nbsp;<input type="button" value="Cancel" onclick="returnThis=false; CloseDialog();"/></div>';
    }
    else {
        html = html + '<div class="add-postage-submit-buttons"><input type="submit" value="Yes, Delete Contact(s)" style="width: 160px; onclick="returnThis=true; CloseDialog();"/>&nbsp;&nbsp;<input type="button" value="Cancel" onclick="returnThis=false; CloseDialog();"/></div>';
    }
    html = html + '</div>';
    html = html + '</div>';
    html = html + '</div>';
    html = html + '</div>';
    OpenDialog(html, 350, 180, false, "Delete Contact")
    return returnThis;
} 
```

现在通常我会使用 JQuery 并将 modal 设置为 true 以启用 false/true 分配，但我没有 jquery 的奢侈。有没有办法使用这个自定义对话框？

有没有办法在没有 JQuery 的情况下执行以下操作？

```
$("#dialogInfo").dialog({
    modal: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:40:51.490

jQuery-ui-dialog 只是在幕后运行一堆 JavaScript 代码来呈现对话框的外观。

您可以使用 CSS 完成大部分相同的功能。

我不会*确切*地告诉你在这里做什么，但我会为你指明大方向。

对于初学者，您可以创建一个`div`包含您的对话框内容的内容。给它 id `dialog`。

然后，在 CSS 中，给它`position:fixed`加上你想要的宽度和高度`display:none`。`z-index:9999`确切地知道它的大小是多少，您可以编写 JavaScript 代码以使其在屏幕上居中。如果要显示对话框，请将其`display`属性设置为`block`。另外，一定要给它一个背景颜色和一个边框。这将允许您使部分文档看起来像一个对话框。

如果您想在对话框后面有一个“掩码”，以便用户无法单击页面上的任何其他内容，请使用 id 创建另一个 div `mask`。给它这些 CSS 属性：`position:fixed`, `top:0px`, `left:0px`, `height:100%`, `width:100%`, `display:none`background-color:black `,`z-index:9998 `,`opacity:0.8 `. When you want to display the dialog as modal, set this div's`display `property to`block`。

最后，jQuery-ui-dialog 还捕获 [Tab] 按键以保持键盘焦点在模态对话框内。如果您愿意，也可以随意这样做。

快乐编码！

# .htaccess - 删除尾随 ? [问号] 来自 url - 空查询字符串

> ID：10540658
> 
> 赞同：1
> 
> 时间：2012-05-10T19:10:11.803
> 
> 标签：.htaccess, mod-rewrite, opencart

我正在将网站移动到新的 Open Cart 安装，并且我设置了 301 重定向以保持任何 SEO 价值。

我不得不在这里使用以下技巧 - [http://www.itsadam.co.uk/opencart-301-redirect-not-working-seo-fix- *route* /](http://www.itsadam.co.uk/opencart-301-redirect-not-working-seo-fix-_route_/) - 解决 Open Cart 处理方式的恼人问题url 重写。所以，我目前在我的 .htaccess 文件中有这样的东西：

```
redirect 301 /products-page /products? 
```

但是，这现在让我重写的网址带有尾随？- 一个有效的空查询字符串：

```
http://www.mysite.com/products? 
```

有没有办法可以使用重写来匹配和丢弃任何多余的问号？（我需要保留任何实际的查询字符串）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:28:01.853

我在opencart中遇到了同样的问题。而不是按照您的解决方案的链接这样做：

```
RewriteRule ^original-url$ new-url [L,R=301] 
```

# asp.net-mvc-3 - 我的视图中的模型类型不正确

> ID：10540660
> 
> 赞同：0
> 
> 时间：2012-05-10T19:10:15.590
> 
> 标签：asp.net-mvc-3, linq, entity-framework, razor

我收到一条错误消息：

传入字典的模型项的类型为“System.Data.Entity.Infrastructure.DbQuery `1[System.Collections.Generic.List`1[RTDOTNET.Song]]”，但该字典需要类型为“System.Collections.Generic.List`1[RTDOTNET”的模型项。歌曲]'。

听起来我使用了错误的模型类型，但我不确定我应该使用什么类型。

这是我的控制器：

```
public ActionResult Index()
        {

            var theSongList = from u in db.Users
                              join s in db.Songs
                              on u.UserId equals s.UserId
                              into newSongList
                              select newSongList.ToList();

            ViewBag.Message = "Current Song";

            return View(theSongList);
        } 
```

这是视图：

```
@model List<RTDOTNET.Song> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:13:06.027

您正在返回一个您想要结果列表的查询列表，因此将其更改为：

```
var theSongList = (from u in db.Users
                   join s in db.Songs
                   on u.UserId equals s.UserId
                   into newSongList
                   select newSongList).ToList(); 
```

添加 () 会给你结果。

# android - CursorAdapter 似乎没有设置光标的功能

> ID：10540665
> 
> 赞同：0
> 
> 时间：2012-05-10T19:10:29.960
> 
> 标签：android, android-cursoradapter

我正在尝试创建一个自定义`CursorAdapter`. 我已经设置了一个`DBAdapter`类中的数据库。我有：

```
public class ExampleCursorAdapter extends CursorAdapter {

    public ExampleCursorAdapter(Context context, Cursor c) {
        super(context, c);
    }

    public void bindView(View view, Context context, Cursor cursor) {
        TextView summary = (TextView)view.findViewById(R.id.label);
        summary.setText(cursor.getString(
                cursor.getColumnIndex(DBAdapter.question)));
    }

    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(R.layout.more_results, parent, false);
        bindView(v, context, cursor);
        return v;
    }

} 
```

我有一个详细的反馈类，我正在其中创建一个`ExampleCursorAdapter`. 我遇到的问题是似乎没有任何东西可以设置`CursorAdapter`.

```
 public class DetailedFeedback extends ListActivity {
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        Cursor c = db.getAllContacts();
    ExampleCursorAdapter adapter = new ExampleCursorAdapter(this, c);
        setListAdapter(adapter);

    }

} 
```

我不确定这是否是正确的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:21:30.610

您的自定义适配器构造函数是：

```
public ExampleCursorAdapter(Context context, Cursor c) {
    super(context, c);
} 
```

当你实例化它时，你设置 a`null` `Context`和 a `null` `Cursor`。设置实例化适配器的光标：

```
Cursor c = //.. retrieve a cursor with results from the database
ExampleCursorAdapter adapter = new ExampleCursorAdapter(this, c); 
```

你也有方法[`changeCursor()`](http://developer.android.com/reference/android/widget/CursorAdapter.html#changeCursor%28android.database.Cursor%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:24:51.280

尝试使用 SimpleCursorAdapter 获取数据库条目。 [简单光标适配器](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

# c++ - 在 Mac OSX 10.7.4 上编译简单 Qwt 程序时出错

> ID：10540666
> 
> 赞同：1
> 
> 时间：2012-05-10T19:10:33.453
> 
> 标签：c++, osx-lion, qwt

我正在尝试使用 Qwt v. 6.0.1 使以下 c++ 程序工作：

```
#include <cmath>
#include <QApplication>
#include <qwt_plot.h>
#include <qwt_plot_curve.h>

int main(int argc, char **argv)
{
   QApplication a(argc, argv);
   QwtPlot plot(QwtText("CppQwtExample1"));
   plot.setGeometry(0,0,640,400);
   plot.setAxisScale(QwtPlot::xBottom, 0.0, 2.0*M_PI);
   plot.setAxisScale(QwtPlot::yLeft, -1.0, 1.0);

   QwtPlotCurve sine("Sine");
   std::vector<double> xs;
   std::vector<double> ys;
   for (double x=0; x<2.0*M_PI; x+=(M_PI/10.0)) {
      xs.push_back(x);
      ys.push_back(std::sin(x));
   }
   sine.setData(&xs[0], &ys[0], xs.size());
   sine.attach(&plot);

   plot.show();
   return a.exec();
} 
```

.pro 文件如下所示：

```
TEMPLATE = app
TARGET = CppQwtExample1
QMAKEFEATURES += /usr/local/qwt-6.0.1/features
CONFIG += qwt
INCLUDEPATH += /usr/local/qwt-6.0.1/lib/qwt.framework/Headers
LIBS += -L/usr/local/qwt-6.0.1/lib/qwt.framework/Versions/6/ \
 -lqwt
SOURCES += qwtTest.cpp 
```

但是，当我现在尝试做

qmake

制作

我得到错误：

ld：找不到-lqwt collect2的库：ld返回1退出状态make：*** [qwtTest.app/Contents/MacOS/qwtTest]错误1

我肯定想念这里的东西。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:38:47.900

```
LIBS += -L/usr/local/qwt-6.0.1/lib/qwt.framework/Versions/6/ -lqwt 
```

这是错误的。由于 Mac OS X 框架的命名约定，qwt.framework 中的动态库没有命名为“libqwt.dylib”（链接器需要），而只是命名为“qwt”。采用

```
LIBS += -F/usr/local/qwt-6.0.1/lib -framework qwt 
```

反而。

# c# - 带有成员动态指针数组的 PInvoke 样式传递结构

> ID：10540668
> 
> 赞同：4
> 
> 时间：2012-05-10T19:10:39.303
> 
> 标签：c#, pinvoke, marshalling, dllimport, unsafe

似乎有多种方法可以做到这一点，但我尝试过的例子对我不起作用。

我在某处读到使用不安全的指针将是需要指针的更复杂结构的方法。（对不起，我再也找不到源了）

我最近的尝试是这样的：

```
unsafe public struct ComplexStruct {
    public Int32 NumSubStruct;
    public SubStruct*[] arr;
}

unsafe public static extern UInt32 DLL_Call(ref ComplexStruct p);

function {
unsafe {
    ComplexStruct p = new ComplexStruct();
    p.NumSubStruct = 2;
    p.arr= new SubStruct*[p.NumSubStruct];
    SubStruct p1 = new SubStruct();
    SubStruct p2 = new SubStruct();
    p.arr[0] = &p1;
    p.arr[1] = &p2;

    testLogHandlerHandle = DLL_Call(ref p);
}
} 
```

我收到一条错误消息，指出无法封送 SubStruct（签名不兼容互操作）。

是否可以在不编组的情况下传递对象？（DLL 应该加载到与 C# 应用程序相同的进程空间中）。

如果没有，传递对象副本的最简单方法是什么？

注意：更改 DLL 不是问题。我隐约知道一些其他的解决方案，例如C++/CLI，但我只有相对较少的结构类型需要以这种方式传递。

**编辑：** 一些注意事项：

1.  数组需要通过动态
2.  实际的结构有点复杂（有 4 层像这样的嵌套结构），所以我认为添加它们会影响问题，但为了完整起见，我将在 C++ 中声明它们：

    ```
    struct ComplexStruct {

         unsigned int NumSubStruct;

         SubStruct** arr;

    };

    struct SubStruct {

         unsigned int NumSubStruct;

         //some more datamembers here as well

         SubSubStruct** arr;

    }; 
    ```

（不需要额外的间接，但我认为能够将 SubStruct 指针数组声明为 IntPtrs 可能很有用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:08:28.247

也许像这样？

```
unsafe public struct ComplexStruct 
{ 
  public Int32 NumSubStruct; 
  public SubStruct** arr; 
}

unsafe static void Main(string[] args)
{
  ComplexStruct p = new ComplexStruct();
  p.NumSubStruct = 2;
  SubStruct[] s = new SubStruct[p.NumSubStruct];
  // no need to new here, valuetype array
  s[0].value = 1;
  s[1].value = 2;
  fixed (SubStruct* sp = s)
  fixed (SubStruct** spp = new SubStruct*[] { sp })
  {
    p.arr = spp;
    testLogHandlerHandle = DLL_Call(ref p);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:54:45.447

你应该使用类似[this](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.structuretoptr.aspx)和[this](http://social.msdn.microsoft.com/Forums/en/clr/thread/a58ba53c-871c-4386-ab03-f3d236c3f43e)的东西。

```
[StructLayout(LayoutKind.Sequential)]
public struct ComplexStruct
{
    public Int32 NumSubStruct;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = MAX_NO_SUB_STRUCTS)]
    public SubStruct[] arr;
}

public static extern UInt32 DLL_Call(IntPtr p); 
```

然后用这样的东西编组它：

```
IntPtr ptr = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(ComplexStruct)));

try
{
    // Copy the struct to unmanaged memory.
    Marshal.StructureToPtr(p, ptr, false);

    testLogHandlerHandle = DLL_Call(ptr);
}
finally
{
    // Free the unmanaged memory.
    Marshal.FreeHGlobal(ptr);
} 
```

尝试摆脱所有不安全的东西，我怀疑它是必要的！

# mysql - 触发语法错误

> ID：10540670
> 
> 赞同：1
> 
> 时间：2012-05-10T19:10:57.773
> 
> 标签：mysql, triggers

我有两个具有以下列名称的表。

**用户**

用户界面 | 电子邮件 | 经过

**用户配置文件**

_电子邮件| 数量 | 等级

我试图确保每次将新用户添加到**用户**表时，**user_profiles**表都会为新用户创建一个新行。然而它失败了。在阅读了许多示例触发语句后，我似乎找不到错误。

```
CREATE TRIGGER updatUserProfilesTBL AFTER INSERT ON users
BEGIN
INSERT INTO user_profiles (_email)
VALUES (new.email)
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:15:01.893

看起来你错过了`FOR EACH ROW`. 此外，您需要更改`DELIMITER`if 通过 MySQL 命令行执行此操作，并`;`在插入语句后添加一个。

```
DELIMITER $$
CREATE TRIGGER updatUserProfilesTBL AFTER INSERT ON users
FOR EACH ROW BEGIN
  INSERT INTO user_profiles (_email)
     VALUES (new.email);
END$$
DELIMITER ; 
```

根据[规范](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)，它不是可选的[。`CREATE TRIGGER`](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# jquery - Jquery 和 Drop Down - 确定值

> ID：10540673
> 
> 赞同：2
> 
> 时间：2012-05-10T19:11:25.903
> 
> 标签：jquery, html

我有一个下拉列表，我需要比较下拉列表中的值（*余额*）并将其与全局变量进行比较，然后执行 if / else 语句以显示一些 HTML。

这是下拉列表：

```
 <select name="batch">
 <option value='null'>-- None --</option>
 <option value='96'>Check (#2200) (Bal. $84.00) - Jim Jones</option>
 <option value='98'>Credit Card (#0) (Bal. $90.00) - Bailey Adams</option>
 </select> 
```

这是我的jQuery：

```
 $("select[name=batch]").change(function () {
    if ($(this).val() >= GlobalTotal) {
        $("th#show_refund").show();
        $("th#no_show_refund").hide();
    } else {
        $("th#show_refund").hide();
        $("th#no_show_refund").show();
    }
}); 
```

jquery 是否可以确定 HTML 选择中的余额是多少？如果是这样，我很感激一个指针，让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:20:17.070

我假设您正在动态构建它。在每个选项上，添加一个属性`data-balance=84`或任何平衡，然后使用 jQuery，您将使用

```
$("select[name=batch] option:selected").attr("data-balance") 
```

因此，您的完整代码将是：

```
<select name="batch">
    <option value='null'>-- None --</option>
    <option value='96' data-balance="84.00">Check (#2200) (Bal. $84.00) - Jim Jones</option>
    <option value='98' data-balance="90.00">Credit Card (#0) (Bal. $90.00) - Bailey Adams</option>
</select>

$("select[name=batch]").change(function () {
    if ($("select[name=batch] option:selected").attr("data-balance") >= GlobalTotal) {
        $("th#show_refund").show();
        $("th#no_show_refund").hide();
    } else {
        $("th#show_refund").hide();
        $("th#no_show_refund").show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:21:25.163

`innerHTML`您可以从所选值中提取该值：

```
// Store our Global Total
var gTotal = 87;
// Bind to the change event of our dropdown
$("select[name='batch']").on("change", function(){
  // If we find a dollar amount in our selected element, save it to `amount`
  if ( amount = $(":selected", this).html().match( /\$(\d+\.\d{2})/ ) )
    // If that amount is greater than the Global Total
    amount[1] >= gTotal
      // Do something when it's greater than
      ? console.log( amount[1] + ' is greater than ' + gTotal )
      // Do something else when it's lesser than
      : console.log( amount[1] + ' is less than ' + gTotal ) ;
}); 
```

演示：http: [//jsbin.com/upotuy/2/edit](http://jsbin.com/upotuy/2/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:17:05.760

最好将您的选择选项值设置为余额，如下所示：

```
<select name="batch">
    <option value='null'>-- None --</option>
    <option value='84.00'>Check (#2200) (Bal. $84.00) - Jim Jones</option>
    <option value='90.00'>Credit Card (#0) (Bal. $90.00) - Bailey Adams</option>
</select> 
```

这使您无需任何时髦的文本解析即可获得值。例如：

```
$("select[name=batch]").change(function () {
    if ($("select[name=batch] option:selected").val() >= GlobalTotal) {
        $("th#show_refund").show();
        $("th#no_show_refund").hide();
    } else {
        $("th#show_refund").hide();
        $("th#no_show_refund").show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:30:46.657

```
$("select[name=batch]").change(function () {
 var selectedText= "";
      $("select option:selected").each(function () {
            selectedText+= $(this).text() + " ";
          }); 
```

# java - 保存更新的 ArrayList 不起作用

> ID：10540677
> 
> 赞同：-1
> 
> 时间：2012-05-10T19:11:43.733
> 
> 标签：java, serialization, servlets, save

我有以下问题：

我将 ArrayList 保存为 .ser 文件。如果文件不存在，它会在加载时创建，而不是引发异常。

然后我想向 ArrayList 添加一些内容并再次保存。但是当我打开 ArrayList 时，它是空的。错误在哪里？

当我在 servlet 中的大量注释前丢弃 ArrayList 时，一切正常，因此可以创建一个空的 arraylist 并添加包含所有信息的对象。但是保存这个更新的 ArrayList 似乎是个问题。

我不知道问题到底出在哪里，也不知道为什么会这样。我认为围绕 Servlet 中的巨大评论。这里：

```
ArrayList<Lieferinhalte> auftraege = new ArrayList();
Lieferinhalte l = new Lieferinhalte();
l.setID(id);
l.setVon(start);
l.setNach(end);
l.setMail(mail);
l.setLink(link);

open o = new open();
auftraege = o.getAuftraege();
auftraege.add(l);

/*-----------> PROBLEM<-------------*/

File file = new File("C:\\Users\\Christoph\\workspace\\ServletTest\\auftraege.ser");

speichern s = new speichern();
s.abspeichern(auftraege);

open o2 = new open();
auftraege = o2.getAuftraege();

out.println(docType + "<HTML>\n"+
        "<HEAD><TITLE>HalloWelt</TITLE></HEAD>\n"+
        "<BODY>" + 
        "Servlet funktioniert! <br /><br />"); 
```

以下是用于理解的其余代码：

Servlet，开头的字符串从加载此 servlet 的 jsp 文件中获取信息。

```
package servlet;

import java.io.*;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LoginCheck extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{   
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    String id = request.getParameter("ID");
    String start = request.getParameter("Start");
    String end = request.getParameter("End");
    String mail = request.getParameter("Mail");
    String link = request.getParameter("Link"); 
    String docType =
            "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "+
            "Transitional//EN\">\n";

    ArrayList<Lieferinhalte> auftraege = new ArrayList();
    Lieferinhalte l = new Lieferinhalte();
    l.setID(id);
    l.setVon(start);
    l.setNach(end);
    l.setMail(mail);
    l.setLink(link);

    open o = new open();
    auftraege = o.getAuftraege();
    auftraege.add(l);

    /*-----------> PROBLEM<-------------*/

    File file = new File("C:\\Users\\Christoph\\workspace\\ServletTest\\auftraege.ser");

    speichern s = new speichern();
    s.abspeichern(auftraege);

    open o2 = new open();
    auftraege = o2.getAuftraege();

    out.println(docType + "<HTML>\n"+
            "<HEAD><TITLE>HalloWelt</TITLE></HEAD>\n"+
            "<BODY>" + 
            "Servlet funktioniert! <br /><br />");

    for(int i = 0; i < auftraege.size(); i++) {
        String id2 = auftraege.get(i).ID;
        String start2 = auftraege.get(i).von;
        String end2 = auftraege.get(i).nach;
        String mail2 = auftraege.get(i).mail;
        String link2 = auftraege.get(i).link;

         out.println("Die ID war: " + id2 + "<br />" +
                "Der Startpunkt war: " + start2 + "<br />" +
                "Der Endpunkt war: " + end2 + "<br />" + 
                "Die Mail war: " + mail2 + "<br />" + 
                "Der Link war: " + link2 + "<br />");
    }

    out.println("<a href='index.jsp'>Hier</a> geht es zur&uuml;ck zur Eingabemaske!" +
            "</BODY></HTML>");

}
} 
```

储蓄类：

```
package servlet;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.util.ArrayList;

public class speichern {

public void abspeichern(ArrayList<Lieferinhalte> a) {

     OutputStream outputStream = null;
        try
        {
            // Byteorientierten Ausgabekanal Öffnen
            outputStream = new FileOutputStream("auftraege.ser");

            // Objektausgabekanal für Serialisierung Öffnen
            ObjectOutputStream objectOutput = new ObjectOutputStream(outputStream);

            // Objekte serialisiert in Datei ausgeben
            objectOutput.writeObject(a);

            // Ausgabekanal schließen
            objectOutput.close();
        } catch (IOException e)
        {
            e.printStackTrace();
        } finally
        {
            try
            {
                outputStream.close();
            } catch (Exception e)
            {
                e.printStackTrace();
            }
        }

}

} 
```

负载等级：

包小服务程序；

```
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.util.ArrayList;

public class open {

ArrayList<Lieferinhalte> a;

open() {

    try
    {
        // Serialisiertes Objekt
        FileInputStream inputStream = new FileInputStream("auftraege.ser");
        // Deserialisierung
        ObjectInputStream objectInput = new ObjectInputStream(inputStream);
        // String auslesen
        this.a = (ArrayList<Lieferinhalte>) objectInput.readObject();

    } catch (IOException e)
    {
        speichern s = new speichern();
        ArrayList<Lieferinhalte> auftraege = new ArrayList();
        s.abspeichern(auftraege);

        open o = new open();
        this.a = o.a;

    } catch (ClassNotFoundException e)
    {
       speichern s = new speichern();
       ArrayList<Lieferinhalte> auftraege = new ArrayList();
       s.abspeichern(auftraege);

       open o = new open();
       this.a = o.a;
    }

}

ArrayList<Lieferinhalte> getAuftraege(){
    return a;
}

} 
```

以及应该保存在arraylist中的对象的类：

```
package servlet;

public class Lieferinhalte {

String link = "";
String ID ="";
String von ="";
String nach ="";
String mail ="";

void setLink(String a) {
    this.link = a;
}

void setID(String a) {
    this.ID= a;
}

void setVon(String a) {
    this.von = a;
}

void setNach(String a) {
    this.nach = a;
}

void setMail(String a) {
    this.mail = a;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:10:21.037

只需添加

```
implements Serializable 
```

比它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:25:36.397

您需要将您的 Lieferinhalte 类声明为可序列化（实现可序列化）！

# c - 基本主菜单代码不起作用

> ID：10540680
> 
> 赞同：-1
> 
> 时间：2012-05-10T19:11:53.063
> 
> 标签：c, function, menu, structure, main

所以我想做的是编写一个带有主菜单的简单程序，用户可以在其中填写项目的详细信息、列出所有项目、删除选定的项目或退出程序。项目将保存在一个数组中。这些函数将使用结构。

我已经编写了一个功能代码，它编译得很好（我知道大事大声笑），但到目前为止只有第 4 个选项“退出”有效。其他 3 个选项似乎不起作用。

这是我的代码：

```
#include <stdio.h> 
#include <stdlib.h>
#include <string.h>

struct fullname
{
        char name[10];
        char surname[10];
};
struct meletes
{
        int identifier;
        struct fullname customer;
        char date[10];
        float price;
};
void initialize(struct meletes projects[10]);
struct meletes newp(struct meletes projects[10]);
struct meletes list(struct meletes projects[10]);
struct meletes deletep(struct meletes projects[10]);

int main(void)
{
int choice,k;
struct meletes projects[10];

void initialize(struct meletes projects[10]);

printf("Main Menu\n ========\n");
printf("Please choose a function from below:\n");
printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
scanf("%d", &choice);

    while ((choice != 1) && (choice != 2) && (choice != 3) && (choice != 4))
          {

           printf("You have chosen a wrong function, please use numbers 1-4:\n\n");
           printf("Main Menu\n ========\n");
           printf("Please choose a function from below:\n");
           printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
           scanf("%d", &choice);
           }

          while (choice != 4)
          {
          switch (choice) {

                 case 1:
                 {
                  struct meletes newp(struct meletes projects[10]);

                  }

                 case 2:
                 {
                  struct meletes deletep(struct meletes projects[10]);

                  }

                 case 3:
                 {
                  struct meletes list(struct meletes projects[10]);

                  }
                         }

            printf("Main Menu\n ========\n");
            printf("Please choose a function from below:\n");
            printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
            scanf("%d", &choice);             

          }        

          printf("Thank u.\n");

system("pause");
return 0;
}

 void initialize(struct meletes projects[10])
 {
int l;
 for(l=0; l<10; l++)
  {
          projects[l].identifier = 00000;
          projects[l].price = 0.00;
          strcpy(projects[l].customer.name,"----------");
          strcpy(projects[l].customer.surname,"----------");
          strcpy(projects[l].date, "0/0/0");
  }          
}          

struct meletes newp(struct meletes projects[10])
{
        int i;
        for(i=0; i<10; i++)
        {
                  if (projects[i].identifier == 00000)
                 {
                    scanf("Please enter the project's identifier %d\n",        &projects[i].identifier);
                    scanf("Name:%s\n", &projects[i].customer.name);
                    scanf("Surname:%s\n", &projects[i].customer.surname);
                    scanf("Give the date in dd/mm/yyyy! format :%c\n", &projects[i].date);
                    scanf("Price:&f\n", &projects[i].price);
                 }
             break;
        }                

}

struct meletes deletep(struct meletes projects[10])
{
       int j,id;
        for (j=0; j<10; j++)
        {
            if (projects[j].identifier != 00000)     //Emfanizei oles tis meletes pou den ine diegrammenes
               {
               printf("%d\n", projects[j].identifier);
               }
        }

        scanf("\nPlease insert the identifier of the project u want to delete:%d", &id);

        for(j=0; j<10; j++)
        {                       
          projects[j].identifier = 00000;
          projects[j].price = 0.00;
          strcpy(projects[j].customer.name,"----------");
          strcpy(projects[j].customer.surname,"----------");
          strcpy(projects[j].date, "0/0/0");
        }

}

struct meletes list(struct meletes projects[10])
{
       int k;
        for(k=0; k<10; k++)
        {
                 if (projects[k].identifier != 00000); 
                    {
                    printf("         Project %d:", k);
                    printf("\nIdentifier:%d\n", projects[k].identifier);
                    printf("Name:%s\n", projects[k].customer.name);
                    printf("Surname:%s\n",projects[k].customer.surname);
                    printf("Date:%s\n", projects[k].date);
                    printf("Price:%d\n", projects[k].price);
                    }
        }

 }        ` 
```

任何想法都将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:21:44.517

中的以下几行`main`声明了函数，但不要*调用*thyem

```
void initialize(struct meletes projects[10]);
struct meletes newp(struct meletes projects[10]);
struct meletes deletep(struct meletes projects[10]);
struct meletes list(struct meletes projects[10]); 
```

您需要*调用*函数，如下所示：

```
initialize(projects);
newp(projects);
deletep(projects);
list(projects); 
```

最后三个似乎也返回了一个`meletes`结构，您需要声明一个新的类型变量`meletes`并根据需要使用它：

```
struct meletes proj = newp(projects);
// use proj as appropriate 
```

第二次查看函数`newp`，`deletep`并且`list` *不*返回任何内容，如果您使用上述建议的分配，这将导致问题。您要么需要返回一个项目（并且分配会很好），要么将它们的返回类型更改为`void`（并且不进行分配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:06:20.383

这是一个工作示例。请仔细看一下，让我们知道你学到了什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct 
{
        char name[10];
        char surname[10];
}fullname;

typedef struct 
{
        int identifier;
        fullname customer;
        char date[10+1]; /* need a NULL */
        float price;
}meletes;

void initialize(meletes *projects);
meletes *newp(meletes *projects);
void list(meletes *projects);
void deletep(meletes *projects);

int main(int argc, char *argv[])
{

    int choice,k;
    meletes projects[10];
    meletes *retMeletes;

    initialize(projects);

    printf("Main Menu\n ========\n");
    printf("Please choose a function from below:\n");
    printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
    scanf("%d", &choice);

    while ((choice != 1) && (choice != 2) && (choice != 3) && (choice != 4))
    {

           printf("You have chosen a wrong function, please use numbers 1-4:\n\n");
           printf("Main Menu\n ========\n");
           printf("Please choose a function from below:\n");
           printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
           scanf("%d", &choice);
    }

    while (choice != 4)
    {
        switch (choice)
        {
            case 1:
                retMeletes = newp( projects);
            break;

            case 2:
                deletep(projects);
            break;

            case 3:
                list(projects);
            break;
        }

        printf("Main Menu\n ========\n");
        printf("Please choose a function from below:\n");
        printf("1.New Project\n2.Delete\n3.List\n4.Exit\n");
        scanf("%d", &choice);             
    }

    printf("Thank u.\n");

    system("pause");
    return 0;
}

void initialize(meletes *projects)
{
    int l;
    for(l=0; l<10; l++)
    {
        projects[l].identifier = 00000;
        projects[l].price = 0.00;
        strcpy(projects[l].customer.name,"----------");
        strcpy(projects[l].customer.surname,"----------");
        strcpy(projects[l].date, "00/00/0000");
    }          
}          

meletes *newp(meletes *projects)
{
    int i;

    for(i=0; i<10; i++)
    {
        if (projects[i].identifier == 0)
        {
            printf("Please enter the project's identifier: ");
            scanf("%d", &projects[i].identifier);
            printf("Name: ");
            scanf("%s", &projects[i].customer.name);
            printf("Surname: ");
            scanf("%s", &projects[i].customer.surname);
            printf("Give the date in dd/mm/yyyy! format: ");
            memset( &projects[i].date, 0x00, sizeof( projects[i].date ));
            scanf("%s", &projects[i].date );
            printf("Price: ");
            scanf("%f", &projects[i].price);
            break;
        }
    }                
    return( &projects[i] );
}

void deletep(meletes *projects)
{
    int j,id;

    for (j=0; j<10; j++)
    {
        if (projects[j].identifier != 0)     //Emfanizei oles tis meletes pou den ine diegrammenes
        {
            printf("%d\n", projects[j].identifier);
        }
    }

    printf("\nPlease insert the identifier of the project u want to delete: ");
    scanf("%d", &id);

    projects[id-1].identifier = 0;
    projects[id-1].price = 0.00;
    strcpy(projects[id-1].customer.name,"----------");
    strcpy(projects[id-1].customer.surname,"----------");
    strcpy(projects[id-1].date, "0/0/0");

    return;
}

void list(meletes *projects)
{
    int k;

    for(k=0; k<10; k++)
    {
        if (projects[k].identifier != 00000); 
        {
            printf("         Project %d:", k);
            printf("\nIdentifier:%d\n", projects[k].identifier);
            printf("Name:%s\n", projects[k].customer.name);
            printf("Surname:%s\n",projects[k].customer.surname);
            printf("Date:%s\n", projects[k].date);
            printf("Price:%f\n", projects[k].price);
        }
    }
    return;
} 
```

# bing-maps - 从 bing 地图中删除多边形/折线

> ID：10540683
> 
> 赞同：0
> 
> 时间：2012-05-10T19:12:00.223
> 
> 标签：bing-maps

使用 Bing v7 AJAX 控件，如果它包含多个多边形/多段线，并且我想一次删除所有这些，我该怎么做？我想我可以遍历 map.Entities 集合并检查每个集合以查看它是否是 poly* 对象，但我想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T01:22:23.083

当需要轻松处理一组元素时，我通常将它们放在[EntityCollection](http://msdn.microsoft.com/en-us/library/gg427616)上。然后，您可以隐藏/删除该图层。

看看[这个](http://www.garzilla.net/vemaps/Layers-via-the-Entity-Collection-with-Bing-Maps-7.aspx)例子。它隐藏实体而不是删除它们，但原理是相同的。

# php - 将总数添加到数组中

> ID：10540686
> 
> 赞同：0
> 
> 时间：2012-05-10T19:12:36.527
> 
> 标签：php, cakephp, php-5.3

以下算法将用户添加到公司数组。我想为任何给定的公司添加用户总数。我是怎么做的

```
public function all_company_information($id = null){
        $arrCompany = array();
        $arrCompany['company']= array();
        $arrData = array();
        $this->autoRender = false;
        $this->loadModel("User");
        $users = $this->User->find('all');
        foreach($users as $k => $user){

                if(!in_array($user['User']['company_id'], $arrCompany['company'])){

                    $arrCompany['company'][$user['User']['company_id']][] = $user;

                }else{

                $arrCompany['company'][$user['User']['company_id']][] = $user;

                }

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:19:21.577

在 Company 模型上进行查找，然后您可以轻松获得用户数。

```
$results = $this->Company->find('all');
foreach($results as $k => $company) {
    $results[$k]['Company']['user_count'] = count($company['User']);
} 
```

类似的东西。返回的结果将是一个`Company`记录数组，每条`Company`记录的`User`键中都有一个关联的用户记录列表。

# google-drive-api - WappWolf 如何从 Google Drive 获取通知？

> ID：10540687
> 
> 赞同：2
> 
> 时间：2012-05-10T19:12:41.533
> 
> 标签：google-drive-api

据我所知，Google Drive 无法通知服务器端应用程序某些文件已更新或上传。

但似乎 WappWolf 通过一些 API 以某种方式获得了它——它是如何做到的？（见介绍视频[http://wappwolf.com/gdriveautomator](http://wappwolf.com/gdriveautomator)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T20:59:35.953

目前无法从 Google 云端硬盘获取通知。最好的方法是轮询[Documents List API 的更改提要，](https://developers.google.com/google-apps/documents-list/#detecting_changes_to_resources)以查看用户的 Drive 文件是否已更改、哪些文件已更改，并相应地对这些更改采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:53:13.503

有一种方法，**只有**在电子表格格式时才能从 GoogleDrive 获取通知。但这是一个好的开始。

在电子表格中，转到工具 > 通知规则。在这里，设置在表单 + 数据 + 电子表格（无论我们如何称呼它）发生任何更改时通知您的电子邮件的规则。

从这个起点，您可以定义您将如何收到通知。对我来说，最简单的是我的安卓手机中的 gmail 应用程序通知。天空才是真正的极限。

# java - 使用 Spring MVC 3 进行正确的表单验证 - 捕获 PersistenceException

> ID：10540689
> 
> 赞同：2
> 
> 时间：2012-05-10T19:12:43.907
> 
> 标签：java, spring, spring-mvc

我一直在寻找一种在 Spring MVC 3 中使表单验证尽可能简单和不显眼的方法。我喜欢 spring 通过将 @Valid 传递给我的模型（已使用验证器注释进行注释）并使用result.hasErrors() 方法。

我正在设置我的控制器操作，如下所示：

```
@RequestMapping(value = "/domainofexpertise", method = RequestMethod.PUT)
public String addDomainOfExpertise(@ModelAttribute("domainOfExpertise") 
@Valid DomainOfExpertise domainOfExpertise, final BindingResult result) {

    if (result.hasErrors()) {
        return "/domainofexpertise/add";
    } else {
        domainOfExpertiseService.save(domainOfExpertise);
        return "redirect:/admin/domainofexpertise/list";
    }
} 
```

这就像一个魅力。数据库异常（例如尝试在字段上保存具有唯一约束的内容）仍然可以通过。有没有办法在幕后进行的验证过程中捕获这些异常？这种验证方式非常简洁，所以我想避免在我的控制器中手动捕获它们。

有这方面的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T20:00:38.203

这是我用来将 PersistentExceptions 转换为更友好的消息的示例。它是控制器中的一种方法。这对你有用吗？

```
/**
 * Shows a friendly message instead of the exception stack trace.
 * @param pe exception.
 * @return the exception message.
 */
@ExceptionHandler(PersistenceException.class)
@ResponseBody
@ResponseStatus(HttpStatus.BAD_REQUEST)
public String handlePersistenceException(final PersistenceException pe) {
    String returnMessage;
    if (pe.getCause()
            instanceof ConstraintViolationException) {
        ConstraintViolationException cve =
                (ConstraintViolationException) pe.getCause();
        ConstraintViolation<?> cv =
                cve.getConstraintViolations().iterator().next();
        returnMessage = cv.getMessage();
    } else {
        returnMessage = pe.getLocalizedMessage();
    }
    if (pe instanceof EntityExistsException) {
        returnMessage = messages.getMessage("user.alreadyexists");
    }
    return returnMessage;
} 
```

# android - SSL 与 Android 2.2 和 2.3

> ID：10540690
> 
> 赞同：1
> 
> 时间：2012-05-10T19:12:50.240
> 
> 标签：android, ssl

如果我在 Android 2.3 中点击 https url，它会自动使用 SSL 吗？我在使用 Android 2.2 和 Android 2.3 之间编写的应用程序时遇到问题。当我在 Android 2.2 上点击 https url 时，它会爆炸并给我以下信息，但是当我在 Android 2.3 上使用相同的代码时，我什么也得不到。因此，从我所做的阅读来看，我认为此 url 上的证书类型是默认情况下 Android 2.3 接受的类型，但 Android 2.2 不接受，对吗？

```
05-10 13:04:37.659: WARN/System.err(2177): javax.net.ssl.SSLException: Not trusted server certificate
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:92)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-10 13:04:37.659: WARN/System.err(2177): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-10 13:04:37.667: WARN/System.err(2177): at giat.hermes.network.IntelinkConnector.connect(IntelinkConnector.java:120)
05-10 13:04:37.667: WARN/System.err(2177): at giat.hermes.view.CreateAccount$ThreadLogMeIn.run(CreateAccount.java:77)
05-10 13:04:37.667: WARN/System.err(2177): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
05-10 13:04:37.667: WARN/System.err(2177): at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:168)
05-10 13:04:37.674: WARN/System.err(2177): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:366)
05-10 13:04:37.674: WARN/System.err(2177): ... 11 more
05-10 13:04:37.674: WARN/System.err(2177): Caused by: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
05-10 13:04:37.698: WARN/System.err(2177): at org.bouncycastle.jce.provider.PKIXCertPathValidatorSpi.engineValidate(PKIXCertPathValidatorSpi.java:225)
05-10 13:04:37.698: WARN/System.err(2177): at java.security.cert.CertPathValidator.validate(CertPathValidator.java:202)
05-10 13:04:37.698: WARN/System.err(2177): at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:164)
05-10 13:04:37.698: WARN/System.err(2177): ... 12 more 
```

而且我不想只接受所有服务器证书

此外，如果这是导致问题的原因，是否足以涵盖向后兼容性？我不太可能在未来的 Android 更新中遇到这种情况，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:37:23.877

如果您希望/需要您的应用程序使用 2.2 及更低版本，您需要在您的应用程序中包含 CA 证书并设置 HttpClient 以信任它。您不需要（也不应该）接受所有证书。至于未来的更新，如果证书被泄露，可能会被删除，否则不太可能。

是的，如果您访问的是 HTTPS URL，将使用 SSL（加密）发送和接收数据。您可以捕获数据包进行验证。

# jquery - jquery 验证 - 在为其他验证输入值之前忽略字段空白/不需要

> ID：10540691
> 
> 赞同：1
> 
> 时间：2012-05-10T19:13:00.083
> 
> 标签：jquery, jquery-validate

使用 jQuery 验证 - 验证模糊：

```
$('input, select, radio, checkbox').blur(function(){
        $("#createAccount").validate().element(this);
}); 
```

如果用户在表单中切换，并且该字段是可选的，则该字段被验证为 ok（并且添加了一个类，更改了输入字段的颜色等）

我想做的是忽略对不需要的空字段的验证。

我目前的忽略仅适用于`:hidden`

```
ignore: ":hidden", 
```

当我尝试时：

```
ignore: ":hidden, .ignore", 
```

这将在任何关注类忽略的字段时引发错误。所以这几乎可以工作，除非您忽略该字段，否则该字段上的其他验证不会触发。所以该字段是可选的，但仍有验证。我只是不希望它在空的可选字段上触发成功验证。

谢谢！

***编辑***

所以逻辑应该是： onblur 如果为空且不需要，则忽略 - 如果不为空，则运行附加到该字段的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:21:51.873

在验证行之前添加以下行

```
if($(this).val()=="")
{
 return;
} 
```

对于文本字段，它是“”。对于 Select，它可能是“0”或您为第一个选项指定的任何其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:19:07.583

您可以为不需要的字段添加不同的 css 类，并忽略这些类的字段。例如

```
ignore: ".ignore" 
```

`ignore`可以在哪里使用

```
<input type="text" class="ignore" value=""/> 
```

只是我的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:19:50.640

我不确定 validate 是如何工作的，但您可以向您不想验证的字段添加一个标志/类，然后忽略那些

更新

好的，如果可选的空字段有忽略类，那么

```
$('input, select, radio, checkbox').blur(function(){
    if( !($(this).hasClass('ignore') && $(this).val()=="")) {       
        $("#createAccount").validate().element(this);
    }
}); 
```

代码可能不是 100% 正确，但概念是存在的，仅验证字段是否为空且字段没有 .ignore 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T23:44:43.653

也许我不太明白这个问题，但这里有一个例子，看起来像你试图用 1 个被忽略的文本框和 1 个隐藏的文本框做的事情：http: [//jsfiddle.net/brianmat/wJveQ/2/](http://jsfiddle.net/brianmat/wJveQ/2/)

**相关的jQuery：**

```
$(document).ready(function() {

$("form").validate({
    invalidHandler: function(e, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1 ? 'You missed 1 field. It has been highlighted below' : 'You missed ' + errors + ' fields.  They have been highlighted below';
            $("div.error span").html(message);
            $("div.error").show();
        } else {
            $("div.error").hide();
        }
    },
    ignore: ".ignore, :hidden",
    errorPlacement: function(error, element) {},
    submitHandler: function(form) {
        $("div.error").hide();
        form.submit();
    }
});

});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T13:16:05.300

这就是我为实现此目的所做的：

对于需要被忽略直到它有一个值的输入，我在输入中添加了一个类 - “忽略”

```
$('.ignore').blur(function(){
        if( $(this).val()=="") {
         $(this).parent().removeClass("inputSuccess");
        }
    }); 
```

在函数中，如果输入具有类忽略且未输入任何值，则删除我在验证调用中设置的有效类。输入值时，将在这些项目上触发正常验证。

# objective-c - 如何为自定义 UIButton 设置动画？

> ID：10540692
> 
> 赞同：0
> 
> 时间：2012-05-10T19:13:03.343
> 
> 标签：objective-c, ios5, uibutton, uiviewanimation

我正在尝试为自定义 UIButton 设置动画，但我的代码似乎不起作用。我在 ViewDidLoad 中使用它：

```
[UIView animateWithDuration:40.0 delay:0 options:UIViewAnimationOptionRepeat animations:^{
        duckButton.frame = CGRectMake(120, 80, 120, 180);
        duckButton.frame = CGRectMake(200, 90, 120, 180);
    } completion:^(BOOL finished) {
    }]; 
```

我应该怎么办？

> [编辑：答案在评论中]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:17:31.390

在开始动画块之前设置初始帧位置，然后在动画块中只有结束位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:54:27.403

我提出了我在评论中所说的内容，以使其成为 BoltClock 建议的实际答案。

我想指出，代码确实没有问题（除了为两个不同的最终位置设置了框架）。问题是按钮在执行动画块之前没有正确初始化，并且由于 nil 对象不能有帧，它基本上什么也没做。

# javascript - sencha touch 2 中的 javascript on("load")

> ID：10540698
> 
> 赞同：1
> 
> 时间：2012-05-10T19:13:41.970
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我在 sencha touch 1.1 版本中有这个代码，如何使它在版本 2 中工作？“负载”不起作用

html:

```
<img src="" id="previewImage"/> 
```

代码：

```
this.domImage=Ext.get("previewImage");
this.domImage.on("load",function(){
    debugger; // not working
    a.sizePhotoInContainer();
    a.resizePhoto()
}); 
```

on() 已弃用：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.EventManager-method-on](http://docs.sencha.com/touch/2-0/#!/api/Ext.EventManager-method-on)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:28:09.053

`load`不是ST2中组件***的属性。***加载图像时将触发`image`它。`event`

因此，您需要在 Sencha Touch 2 中为组件`listen`的`load`事件。`image`

像这样做，

```
var img = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/assets/images/sencha-avatar-64x64.png',
    height: 64,
    width: 64,
    listeners : {
        load : function {
          // ....
          // ....
          // ....
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:25:52.870

我对煎茶没有太多经验，但我认为它会是这样的......

```
// create image
var img = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/example.png'
});
// callback on load
img.load = function() {
} 
```

或者

```
var img = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/example.png',
    load : function() {    }
}); 
```

# php - PHP 使用 curl 和 torcache

> ID：10540699
> 
> 赞同：1
> 
> 时间：2012-05-10T19:13:46.667
> 
> 标签：php, html, curl

嗨，我希望能够做到以下几点：

```
<?php

function get_data($url)
{
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
$data = get_data('https://torcache.net/torrent/7975CDEEDCEC6092729DAEAE302CB9BD7D633B0B.torrent');

?> 
```

然而，似乎 torcache 正在返回一个 html 页面，然后种子在几秒钟后被切断，curl 是否有办法获得实际的 torrent？一分钟 $data 只包含 html 页面 torcache 返回？

尝试将引用设置为： curl_setopt($ch, CURLOPT_REFERER, 'https://torcache.net/torrent/7975CDEEDCEC6092729DAEAE302CB9BD7D633B0B.torrent');

但不工作，我得到这个回应：

```
<head><title>302 Found</title></head>
<body bgcolor="white">
<center><h1>302 Found</h1></center>
<hr><center>nginx/1.2.0</center>
</body>
</html> 
```

谢谢

解决了：

```
function get_data($url)
{
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch,CURLOPT_REFERER, 'https://torcache.net/');
    curl_setopt($ch,CURLOPT_ENCODING,"gzip");
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

添加“curl_setopt($ch,CURLOPT_ENCODING,"gzip");” 这也是因为数据被压缩了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:19:59.127

弄清楚他们如何检查是否提供 HTML 页面或 torrent 文件。我的猜测是`HTTP_REFERER`。恶搞它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:13:39.037

如果`$_GET['tor']`包含来自 torrentz.eu 网站的 info_hash，这应该可以解决问题。

```
$ch = curl_init('http://torcache.net/torrent/'.strtoupper($_GET['tor']).'.torrent');                                                                      
curl_setopt($ch, CURLOPT_POSTFIELDS, null);
curl_setopt($ch, CURLOPT_POST, FALSE);
curl_setopt($ch, CURLOPT_HTTPGET, TRUE);                                                                 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-bittorrent','Referer: http://torcache.net/torrent/'.strtoupper($_GET['tor']).'.torrent')); 
curl_setopt($ch, CURLOPT_REFERER, 'http://torcache.net/torrent/'.strtoupper($_GET['tor']).'.torrent'); 
curl_setopt($ch, CURLOPT_ENCODING,"gzip");
$result = curl_exec($ch);
echo $result; 
```

# php - 在移动到下一个项目之前等待 PHP 中的任务完成

> ID：10540702
> 
> 赞同：1
> 
> 时间：2012-05-10T19:14:03.407
> 
> 标签：php, mysql, rss, readability

这里有一个快速的问题，我有一个正在运行的进程，它可以抓取 RSS 提要并将它们添加到 mySQL 数据库中。

在此过程中，我将使用可读性 API 来获取 URL 内容。

现在这在单个条目上运行良好，但由于此脚本可以有数百个条目，因此没有任何内容插入到我的数据库中。

我想知道它是否没有机会完成该过程并立即跳到 RSS 中的下一个条目。

任何人都可以建议在继续之前让它完成的方法吗？下面的代码：

```
$db_hostname="localhost";
$db_username="myusername";
$db_password="mypassword";

try
{
/*  query the database */

$db = mysql_connect($db_hostname,$db_username,$db_password);
if (!$db)
{
    die("Could not connect: " . mysql_error());
}
mysql_select_db("MyDB", $db);

// Get stories that don't have a the readability assigned
$query="select item_id, item_url from tw_articles_parse where story_readability = '' LIMIT 0 , 1";
$result=mysql_query($query);
$num=mysql_numrows($result);
// Close the DB connection
mysql_close();

// Start the loop of source RSS feeds
$i=0;
while ($i < $num) {

    $item_url=mysql_result($result,$i,"item_url");
    $item_id=mysql_result($result,$i,"item_id");

    // Parse the story URL into the Readability API
        $url = "https://www.readability.com/api/content/v1/parser?url=$item_url&token=myapikey";
        // Get the contents of the JSON returned by the API
        $json = file_get_contents($url);
        // Decode the JSON
        $out = json_decode($json, true);
        // Set the content as a variable
        $story = mysql_real_escape_string($out['content']);

        // Insert into the DB - Adding 0 to story_club_id as default
        $item_insert_sql = "UPDATE tw_articles_parse SET story_readability=$story WHERE item_id='" . $item_id . "'";
        $insert_item = mysql_query($item_insert_sql, $db);

$i++;
}// end the loop of feeds

   } catch (Exception $e)
{
echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:17:03.967

也许你的内存或时间用完了？启用警告和错误报告：

```
ini_set("display_errors", 1);
error_reporting(E_ALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:21:29.597

可能没有插入任何内容，因为您使用的是 UPDATE 语句，并且根本没有相应的 item_id 记录要更新？尝试将 UPDATE 查询更改为 INSERT ... ON DUPLICATE KEY UPDATE

不幸的是，我们不知道您的数据库方案，但这样的事情应该可以工作：

```
$item_insert_sql = "INSERT INTO tw_articles_parse (story_readability, item_id) VALUES ('$story', $item_id) ON DUPLICATE KEY UPDATE story_readability='$story'"; 
```

# apache - HTTP 状态 500 - 服务器遇到内部错误 () 阻止它完成此请求

> ID：10540704
> 
> 赞同：0
> 
> 时间：2012-05-10T19:14:25.713
> 
> 标签：apache, rest, jax-rs

当我尝试在本地主机上使用 JAXRS 访问 Restful Web 服务时，我收到下面提到的错误。我确实检查了重复的 jar 文件，甚至我的 web.xml 似乎都是正确的。知道我哪里出错了吗？

错误（i）：[尝试访问本地主机时]

![在此处输入图像描述](../Images/53ed529ed386a01e7e9be23b10e91b56.png)

错误（ii）：[在 Eclipse 控制台中]

```
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
May 10, 2012 2:08:19 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /validatorService threw load() exception
javax.servlet.ServletException: Resource configuration class, validatorService.ValidatorServiceConfig, is not a super class of class javax.ws.rs.core.Application
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:741)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

May 10, 2012 2:08:19 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files (x86)\apache-tomcat-7.0.27\webapps\docs
May 10, 2012 2:08:19 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files (x86)\apache-tomcat-7.0.27\webapps\examples
May 10, 2012 2:08:20 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
May 10, 2012 2:08:20 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
May 10, 2012 2:08:20 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@79e582c1')
May 10, 2012 2:08:20 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files (x86)\apache-tomcat-7.0.27\webapps\host-manager
May 10, 2012 2:08:20 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files (x86)\apache-tomcat-7.0.27\webapps\manager
May 10, 2012 2:08:20 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files (x86)\apache-tomcat-7.0.27\webapps\ROOT
May 10, 2012 2:08:20 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
May 10, 2012 2:08:20 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
May 10, 2012 2:08:20 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 675 ms 
```

错误 (iii) Apache / 日志

```
127.0.0.1 - - [10/May/2012:14:28:18 -0500] "GET / HTTP/1.1" 200 11444
0:0:0:0:0:0:0:1 - - [10/May/2012:14:28:18 -0500] "GET /validatorService/WEB-INF/classes/validatorService/ValidatorService.java HTTP/1.1" 404 952
0:0:0:0:0:0:0:1 - - [10/May/2012:14:28:34 -0500] "GET /validatorService/rest/ HTTP/1.1" 500 2604
0:0:0:0:0:0:0:1 - - [10/May/2012:14:28:39 -0500] "GET /validatorService/rest/valid HTTP/1.1" 500 2604
0:0:0:0:0:0:0:1 - - [10/May/2012:14:28:52 -0500] "GET /validatorService/rest/valid HTTP/1.1" 500 2604 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:59:28.573

应该想通了，我一看到这个就知道了。无论如何，这就是我的错误

错误：

```
javax.servlet.ServletException: Resource configuration class, validatorService.ValidatorServiceConfig, is not a super class of class javax.ws.rs.core.Application 
```

使固定：

```
public class ValidatorServiceConfig extends Application 
```

前：

```
public class ValidatorServiceConfig 
```

# python - 使用python递归读取Json响应

> ID：10540712
> 
> 赞同：1
> 
> 时间：2012-05-10T19:14:49.973
> 
> 标签：python, json, recursion

我试图在不知道键名的情况下从 json 响应中打印所有“键、值”（例如，不使用语法 json['example']）。我正在使用使用 iteritems() 的递归函数来执行此操作，但我遇到了一些问题：

这是我试图阅读的 Json 响应：

```
{"servers": [{"id": "a059eccb-d929-43b2-8db3-b32b6201d60f", "links": [{"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}, {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"}], "name": "birk"}]} 
```

这是我正在使用的功能：

```
def format_main_response(self, json_string):
    print "json:       " + json_string
    content = json.loads(str(json_string))
    for key, value in content.iteritems():
        print key
        if type(value) == type(['']):
            strg = str(json.dumps(value))
            strg = strg.strip('[]')
            self.format_main_response(strg)
        else:
            print value 
```

我正在使用 strip 函数从我的 json 字符串中取出所有的 '[ ]' 。如果我没有这样做，我在尝试使用 'json.loads()' 函数加载它时会出错。

```
 Traceback (most recent call last):
      File "main.py", line 135, in <module>
        formatter.format_main_response(nova_API.list_servers())
      File "/home/python/jsonformatter.py", line 51, in format_main_response
        self.format_main_response(strg, mod)
      File "/home/python/jsonformatter.py", line 51, in format_main_response
        self.format_main_response(strg, mod)
      File "/home/python/jsonformatter.py", line 31, in format_main_response
        for key, value in content.iteritems():
    AttributeError: 'list' object has no attribute 'iteritems' 
```

我的问题是，在某些时候应该打印的 json 看起来像这样，没有'[]'：

```
{"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}, {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"} 
```

当函数试图从这个 json 中找到“键、值”时，我收到了这个错误：

```
 Traceback (most recent call last): File "main.py", line 135, in <module>
    formatter.format_main_response(nova_API.list_servers())
  File "/home/python/jsonformatter.py", line 34, in format_main_response
    self.format_main_response(strg)
  File "/home/python/jsonformatter.py", line 34, in format_main_response
    self.format_main_response(strg)
  File "/home/python/jsonformatter.py", line 28, in format_main_response
    content = json.loads(str(json_string))
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 369, in decode
    raise ValueError(errmsg("Extra data", s, end, len(s)))
ValueError: Extra data: line 1 column 135 - line 1 column 273 (char 135 - 273) 
```

在这种情况下我该怎么办？或者任何其他方式来获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:26:24.237

使用它：

```
def format_main_response(json_string):
    print "json:       " + json_string
    content = json.loads(str(json_string))
    for key, value in content.iteritems():
        print key
        if type(value) == type(['']):
            for sub_value in value:
                strg = str(json.dumps(sub_value))
                format_main_response(strg)
        else:
            print value 
```

结果是这样的：

```
~$ python test_pdb.py 
json:       {"servers": [{"id": "a059eccb-d929-43b2-8db3-b32b6201d60f", "links": [{"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}, {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"}], "name": "birk"}]}
servers
json:       {"id": "a059eccb-d929-43b2-8db3-b32b6201d60f", "links": [{"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}, {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"}], "name": "birk"}
id
a059eccb-d929-43b2-8db3-b32b6201d60f
links
json:       {"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}
href
http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f
rel
self
json:       {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"}
href
http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f
rel
bookmark
name
birk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:14:34.023

怎么样：

```
jsonStr = {"href": "http://192.168.100.142:8774/v2/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "self"}, {"href": "http://192.168.100.142:8774/2ad1fc162c254e59bea043560b7f73cb/servers/a059eccb-d929-43b2-8db3-b32b6201d60f", "rel": "bookmark"}
print json.dumps(jsonStr, sort_keys=True, indent=2, separators=(',', ': ')) 
```

这应该给你你想要的格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T12:11:58.790

下面的代码递归遍历 json 响应并打印键值对：技巧是在 main 中只加载一次 json 响应，然后递归遍历响应：

```
def parse_json_response(content):

    if len (content.keys()) > 1 :
        for key, value in content.iteritems():
           print "key : ", key
           print "Value", value

            if type(value) is dict:
                parse_json_response(value)
    else:
        print value

if __name__ == '__main__':

    content = json.loads(str(response))
    parse_json_response(content) 
```

希望能帮助到你。

# java - Android Webview 中的 HTML 音频

> ID：10540716
> 
> 赞同：7
> 
> 时间：2012-05-10T19:15:03.530
> 
> 标签：java, android, html

我是 HTML 和 Java 的初学者，我正在尝试通过使用 HTML 和 Java 的 Web 视图在 android 上的一个简单的 Web 应用程序中播放音频文件。我已经成功地让它在 Android 4.0 上运行。但是，它不适用于 2.3.3 或 2.2。我做了很多研究，到目前为止，我发现它不受支持。任何人都可以确认或否认这一点，并可能指出我正确的方向吗？这是我在 4.0 上所做的工作，但没有别的。

```
WebView engine = (WebView) findViewById(R.id.web_engine);

String audioTest =  "< html >" + <br/>
                "< body >" + <br/>
                "< audio id='egSound' preload='auto'  autoplay ='autoplay'>" + <br/>
                "< source src=' www.egSoundUrl.com '>" +                    
                "< /audio>" + <br/>
                "< /body>"  +  
                "< /html>";

engine.loadData(audioTest, "text/html", null); 
```

如何让相同的代码适用于 2.3.3？在我的研究中，我遇到了一个能够使用视频标签播放音频文件的人，但我无法让它工作。任何共享的知识将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:04:39.520

是的。遗憾的是，只有 Gingerbread 支持 HTML5 音频元素。

我读到在 2.2 和 2.3 中以某种方式支持音频标签，但由于某些非常奇怪的原因，mp3 和 ogg 编解码器不支持。因此，即使在 Android 2.3 之前的手机上支持它也毫无用处。

**解决方案 1** 视频标签解决方法（1.6 到 2.2）如下：

```
<video src="soundfile.mp3" onclick="this.play();"></video> 
```

是你试过的吗？

**解决方案 2** 另一种可能的解决方案（2.2+）是实现一个带有 Flash 后备的 JQuery Player，比如[UbaPlayer](http://www.brianhadaway.com/ubaplayer-the-jquery-html5-audio-player-with-flash-fallback/)。

**解决方案 3** 最后.. StackOverflow 的另一个用户有一个 java 解决方法，这里：

*   [Android 上的 HTML5 音频标签 - mdelolmo 的回答](https://stackoverflow.com/a/4896110/1614381)

..希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-19T02:56:24.237

对于任何新访问者来说，这只是一个快速的单线 - 尝试在您的 webview 设置代码中使用以下内容：

```
mWebView.getSettings().setMediaPlaybackRequiresUserGesture(false); 
```

它成功解决了音频播放问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:39:39.980

我也遇到了同样的问题，对我有用的解决方案是.. 使用Android 的Mediaplayer ( [http://developer.android.com/reference/android/media/MediaPlayer.html ) 播放音频。](http://developer.android.com/reference/android/media/MediaPlayer.html)您可以从您在 HTML 文件中编写的 javascript 调用 android 的功能..

```
WebView webView = (WebView) findViewById(R.id.webview);
webView.addJavascriptInterface(new WebAppInterface(this), "Android");
--------------------------------
public class WebAppInterface {

    Context mContext;
    /** Instantiate the interface and set the context */
    WebAppInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
}

---------------------------
java sript code

<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script> 
```

这样您就可以从 Android 代码中调用音频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T16:51:27.917

Tag Audio 刚刚为我工作，使用`.loadUrl("https://webpage.html")`.

显示不支持`.loadData(htmlString, "text/html", null)`的 mime 消息。

# excel - Excel 数组公式 IF（多个条件）

> ID：10540719
> 
> 赞同：4
> 
> 时间：2012-05-10T19:15:21.157
> 
> 标签：excel, excel-2007, excel-formula

在我的电子表格中，比较耳机，我们的指令基本上是使用尽可能多的不同公式。

因此，作为电子表格的一部分，我希望能够展示每个制造商最昂贵的耳机、*每个制造商*最便宜的耳机、每个制造商的最佳评价等......到目前为止，我已经能够获得一些主要工作的数组公式。

例如，这个公式可以得到价格最高的制造商“Sennheiser”的*型号：*

```
=INDEX($Data.$B$5:$L$32,SMALL(IF($Data.$E$5:$E$32 = $Sheet2.D17, ROW($Data.$B$5:$E$32) - ROW($Data.$B$5) + 1, ROW($Data.$E$32) + 1), 1), 2) 
```

E 列是价格列，D17 是“sennheiser”预先计算的最高价格

这很好用，直到您获得 2 个价格/等级相同的耳机或其他耳机。然后它开始返回错误的值。

所以我尝试了在互联网上找到的各种解决方案，比如

```
AND(condition1, condition2) 
condition1 * AND(cndition2)
condition1 * condition2 
```

但由于某种原因，这些似乎都不适用于数组公式。我收到 #N/A 或 #VALUE 以及其他各种错误。所以基本上我想知道如何修改我的公式，甚至是一个全新的公式，以检查最低价格和正确的制造商。

我希望我的问题很清楚，所以我上传了电子表格以了解我在说什么。

[http://dl.dropbox.com/u/18816338/Stats%20Analysis%20%20%281%29.xlsm](http://dl.dropbox.com/u/18816338/Stats%20Analysis%20%20%281%29.xlsm)

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T16:21:24.940

您还可以使用简单的公式：

**=if( (Condition_A) * (Condition_B) * ... ; true; false)**

确保将条件放在括号之间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T19:36:02.460

通常 AND 在这里不起作用，因为 AND 返回单个结果而不是数组....但是 * 应该没问题，即在 B3 中尝试这个公式

`=INDEX(Data!C$5:C$32,MATCH(1,(Data!$E$5:$E$32=$D3)*(Data!$B$5:$B$32=$A3),0))`

用 CTRL+SHIFT+ENTER 确认并复制到 C3 然后向下两列

这将找到价格和制造商的第一个匹配项并返回相关的型号/类型

# javascript - 如何在特定位置启动 CSS3 动画？

> ID：10540720
> 
> 赞同：11
> 
> 时间：2012-05-10T19:15:26.387
> 
> 标签：javascript, css, webkit, css-animations

我正在使用 CSS3 动画，我希望能够移动到动画中的特定位置。例如，如果 CSS 看起来像这样（并假设我使用了所有正确的前缀）：

```
@keyframes fade_in_out_anim {
  0% { opacity: 0; }
  25% { opacity: 1; }
  75% { opacity: 1; }
  100% { opacity: 0; }
}
#fade_in_out {
  animation: fade_in_out_anim 5s;
} 
```

然后我希望能够停止动画，并将其移动到 50% 标记。我猜理想的 JavaScript 应该是这样的：

```
var style = document.getElementById('fade_in_out').style;
style.animationPlayState = 'paused';

// Here comes the made up part...
style.animation.moveTo('50%'); // Or alternately...
style.animationPlayPosition = '50%'; 
```

有谁知道实现这一点的方法（希望在 Webkit 中）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-03T16:10:33.850

我们可以使用该`animation-delay`属性。通常它会延迟动画一段时间，如果你设置`animation-delay: 2s;`，动画将在你将动画应用到元素后两秒开始。但是，您也可以通过使用负值来强制它开始播放具有特定时移的动画：

```
.element-animation{
animation: animationFrames ease 4s;
animation-delay: -2s;
} 
```

[http://default-value.com/blog/2012/10/start-css3-animation-from-specified-time-frame/](http://default-value.com/blog/2012/10/start-css3-animation-from-specified-time-frame/)

# macos - OS X 播放音频帧是否发送给我

> ID：10540721
> 
> 赞同：0
> 
> 时间：2012-05-10T19:15:33.063
> 
> 标签：macos, audio, osx-lion, core-audio, avaudioplayer

我可以在 OS X 10.7 中使用什么 API 来输出由我无法更改的现有对象生成的线性 PCM 音频帧，并传递给我创建的类的对象？我无权访问原始音频流，只有数据包。可以设置 CoreAudio AudioUnit 或 AudioQueue，或者 AVAudioPlayer 来简单地播放这些帧，因为它们被发送到我的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:03:36.650

Mac OS X 或 iOS 设备上没有公共 API 可以播放由现有源生成的 PCM 音频样本流。

Audio Queue 和 (RemoteIO) Audio Unit API 都是基于回调（“pull”）的，以严格的采样率运行，并且具有实时要求（例如，您不能只等待回调中的数据）。您的对象必须将由源生成的音频 PCM 帧保存在其自己的缓冲区或数据结构中，然后以音频回调请求的数量从这些缓冲区中复制样本。您的对象可能还必须在开始音频之前预加载一定数量的缓冲区，如果以低于音频回调要求的速率生成样本，则自适应地处理下溢，以及如果它接收到的数据多于它可以在某处缓冲并播放的数据，则处理溢出及时。

# c++ - 类派生形式结构上的虚函数

> ID：10540722
> 
> 赞同：2
> 
> 时间：2012-05-10T19:15:36.447
> 
> 标签：c++, segmentation-fault, virtual

我有一个派生自 C 结构的类。该类没有做任何特殊的事情，除了在构造函数中进行初始化、在析构函数中取消初始化函数以及调用 C 函数的一些其他方法。基本上，它是一个普通的包装器。使用 GCC，它抱怨我的析构函数不是虚拟的，所以我做到了。现在我遇到了段错误。

```
/* C header file */
struct A
{
  /* ... */
}

// My C++ code
class B : public A
{
public:
  B() { /* ... init ... */ }
  virtual ~B() { /* ... deinit ... */ }

  void do()
  {
    someCFunction(static_cast<A *>(this));
  }
}; 
```

我总是假设`static_cast`它将返回正确的指向基类的指针，修剪掉虚拟表指针。所以情况可能并非如此，因为我在 C 函数中遇到了段错误。

通过删除`virtual`关键字，代码可以正常工作，除了我收到 gcc 警告。最好的解决方法是什么？随意启发我:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:36:43.787

显式和隐式转换`A*`都是安全的。既不需要显式强制转换，也不会在任何地方引入 vtable 或类似的东西。如果不是这种情况，该语言将根本无法使用。

> 我总是假设 static_cast 会返回正确的指向基类的指针，修剪掉虚拟表指针。

是绝对正确的。

仅当在具有类型的地方调用析构函数或手动调用析构函数`virtual`时才需要析构函数。它必须是虚拟的 ' 析构函数，但事实并非如此。`delete ptr;``ptr``A*``A`

无论您的代码有什么问题，它都与显示的代码无关。您需要大大扩展您的样本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:18:39.253

基类的析构函数应该是虚拟的。否则，您可能会遇到未定义的行为。这只是一个猜测，因为代码不足以说明实际原因。

尝试制作`A`virtual 的析构函数，看看它是否崩溃。

请注意，a`class`和 a`struct`是相同的东西，除了默认访问级别，因此一个是类而另一个是结构的事实与它无关。

编辑：如果`A`是 C 结构，使用组合而不是继承 - 即在`A`内部有一个成员`B`而不是扩展它。没有必要推导，因为多态性是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:26:48.137

这不是如何`static_cast`工作的。指向对象的指针仍然是相同的指针，只是类型不同。在这种情况下，您要将指向派生类型 ( `B`) 的指针转换为指向基类型 ( `A`) 的指针。

我的猜测是转换指针实际上并没有改变指针值，即它仍然指向相同的内存地址，即使它被转换为`A*`指针类型。请记住，`struct`and`class`是 C++ 中的同义词。

正如@Luchian 所说，如果您混合使用 C 和 C++，最好将普通的旧 C 结构（及其指针）保留为普通的旧 C 结构，并使用类型组合而不是继承。否则，您将在幕后混合不同的指针实现。不能保证 C 结构和 C++ 类的内部排列是相同的。

**更新**

您应该用规范包围 C 结构声明`extern "C"`，以便 C++ 编译器知道该结构是纯 C 结构：

```
extern "C"
{
    struct A
    {
        ...
    };
} 
```

*或者：*

```
extern "C"
{
#include "c_header.h"
} 
```

# java - Java递归返回一个字符串

> ID：10540726
> 
> 赞同：2
> 
> 时间：2012-05-10T19:15:57.273
> 
> 标签：java

```
public  String starString(int n){               
    int m = (int)Math.pow(2,n);
    String str="";
    str = starString(m-1,str);                  
    return str;
}
private  String starString(int n, String str){          
    String temp ="";
    if (n<0) {
        try{
            throw new IllegalArgumentException();
        } 
        catch(IllegalArgumentException ex){               
        }          
    }
    else { 
        temp+=("*");              
        starString(n-1,str);        
    }                       
    return temp;       
} 
```

有人可以向我解释为什么这个代码返回一个星号，即使它被一个大于的值调用`n >= 0`？

我调试并注意到在抛出异常后它再次递归并且所有星号都被切成“”。我已经试过很多次了。它还要求你应该抛出`IllegalArgumentException`if `n < 0`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:20:37.210

在 Java 中，字符串是不可变的，因此您需要为`temp`（并`temp`作为参数传递）分配一个新值：

```
temp = starString(n-1, temp); 
```

此外，您需要分配`str`to `temp`，否则每个递归只会返回一个星号：

```
String temp = str; 
```

递归方法的更简单、更清晰（和正确）的版本如下所示：

```
private  String starString(int n){          
  String temp = "*";

  //only recurse as long as n > 0, i.e. the last invocation would be made with n = 0
  if (n > 0){ 
    temp += starString(n-1);                     
  }                      
  return temp;       
} 
```

请注意，您甚至不需要将字符串作为参数传递。另请注意，递归在这里是多余的，使用循环将毫无意义。另请注意，字符串连接的成本很高，并且对于较高的值`n`（由于一遍又一遍地创建不可变的字符串实例）会很快变慢。在这种情况下，您最好使用`StringBuilder`：

```
private  String starString(int n){          
  StringBuilder s = new StringBuilder();
  for( int i = 0; i <= n; i++ ) {
    s.append("*");
  }
  return s.toString();
} 
```

在我的机器上，对于 n = 100000，使用字符串连接的循环版本大约需要 12 秒，而`StringBuilder`版本需要 0.007 秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T19:20:57.537

您的代码调用每个递归，存储一个 local `temp`，返回 this 并且它从未使用过。

# excel - 向现有 OpenXML 电子表格添加页脚

> ID：10540727
> 
> 赞同：0
> 
> 时间：2012-05-10T19:16:01.313
> 
> 标签：excel, c#-4.0, openxml, openxml-sdk

编辑：我在原始帖子中遗漏了更多细节。该程序使用模板流而不是“.Open”命令的具体模板。模板流使用以下代码块进行初始化：

```
public void Initialize(Stream templateStream)
{
    spreadsheet = SpreadsheetDocument.Open(templateStream, true);
} 
```

我仍在研究这个，但有谁知道在 OpenXML 中为 HeaderFooter 对象使用流的含义？

我是 OpenXML 的新手，并且仍在阅读和学习这个庞大的 SDK 的内容。我继承了一个 C# MVC.NET 程序，该程序使用 OpenXML 在 Excel 电子表格上显示信息，所有这些都可以正常工作，但是我现在需要在同一个电子表格中添加页脚，而且我在 OpenXML 中遇到了一些问题知识。

我将想要的页脚信息放入电子表格中，使用 Open XML SDK Productivity Tool 打开它，在 <.x:oddFooter(OddFooter) 下找到了这段代码：

```
 // Creates an OddFooter instance and adds its children.
        public OddFooter GenerateOddFooter()
        {
            OddFooter oddFooter1 = new OddFooter();
            oddFooter1.Text = "&L&\"Times New Roman,Regular\"Page &P of &N&C&\"Times New Roman,Regular\"Generated On: <Date/Time> Central&R&\"Times New Roman,Regular\"Report";
            return oddFooter1;
        } 
```

这段代码在 <>x:headerFooter(OddFooter) 下一级：

```
// Creates an HeaderFooter instance and adds its children.
        public HeaderFooter GenerateHeaderFooter()
        {
            HeaderFooter headerFooter1 = new HeaderFooter();
            OddFooter oddFooter1 = new OddFooter();
            oddFooter1.Text = "&L&\"Times New Roman,Regular\"Page &P of &N&C&\"Times New Roman,Regular\"Generated On: <Date/Time> Central&R&\"Times New Roman,Regular\"Report";

            headerFooter1.Append(oddFooter1);
            return headerFooter1;
        } 
```

现在我当然需要在某处附加页脚信息，这就是我卡住的地方。在 <>x:worksheet(Worksheet) 我看到这行代码：

```
worksheet1.Append(headerFooter1); 
```

这看起来很容易，但是当我回顾应用程序代码时，我发现没有要附加的工作表对象。我以为我很接近以下代码行：

```
spreadsheet.WorkbookPart.Workbook.Append(headerFooter1); 
```

但这没有产生任何结果。在应用程序中，我看到一个 SpreadsheetDocument 对象和对 OpenXMLParts 的引用...我需要获取一个电子表格部件来附加到吗？或者我是否需要对电子表格与工作表对象采取不同的方法？我是否需要具体化当前工作表然后追加？

我觉得这有一个简单的解决方案，但正如我所说，我仍在学习 SDK。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:21:58.847

对于那些不了解生产力工具的人，它包含在 SDK 中，可以从[https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124下载](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124)

在我的 64 位机器上，该工具的安装路径是：“C:\Program Files (x86)\Open XML SDK\V2.0\tool\OpenXmlSdkTool.exe”

您应该能够手动将页脚添加到电子表格，并使用该工具打开它并查看创建整个电子表格（包括页脚）所需的确切 C#。然后，您可以删除不需要的代码部分，例如自动添加的一些样式。

# iphone - 通过 Objective-C 创建 SQLite3 数据库文件

> ID：10540728
> 
> 赞同：6
> 
> 时间：2012-05-10T19:16:05.837
> 
> 标签：iphone, ios, sqlite

我试图在运行时通过 Objective-C 创建一个 SQLite3 数据库文件。我正在尝试创建一个名为“tblStore”的表。我希望将字段名称称为“strStoreNumber”和“strStoreReg”。我是 iOS 和 SQLite 的新手，所以我很难找到执行此操作的语法。除了创建表之外，我希望创建的表不驻留在应用程序包中，而是驻留在/存储在手机上的某个位置。该表需要是可读/可写的。我已经阅读了“用户沙箱”和“文档目录”。我不确定我是否理解两者之间的区别。理想情况下，我的应用程序将使用一个按钮从文本字段中获取输入。将文本字段的输入放入字符串后，

回顾一下： 1\. Obj-C/SQLite 创建一个名为“tblStore”的表，其中包含“strStoreNumber”和“strStoreReg”字段的语法是什么？2.db文件应该放在哪里？我需要读取和写入 tblStore db 文件。3\. “用户沙箱”和“文档目录”有什么区别？

这是我目前拥有的：

```
-(IBAction)setInput:(id)sender
{
    NSString *strStoreNumber;
    NSString *strRegNumber;
    NSString *tableName = @"tblStore";
    NSString *dbStrStore = @"strStore";
    NSString *dbStrReg = @"strReg";

    strStoreNumber = StoreNumber.text;
    strRegNumber = RegNumber.text;

    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths lastObject];
    NSString* databasePath = [documentsDirectory stringByAppendingPathComponent:@"tblStore.sqlite"];
//  NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
    {
        NSLog(@"Opened sqlite database at %@", databasePath);

        char *err; 
        NSString *sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@' TEXT PRIMARY KEY, '%@' TEXT);", tableName, dbStrStore, dbStrReg];
        if (sqlite3_exec(database, [sql UTF8String], NULL, NULL, &err) != SQLITE_OK) 
        { 
            sqlite3_close(database);
            NSAssert(0, @"Table failed to create.");
        }
        //...stuff
    } 
    else 
    {
        NSLog(@"Failed to open database at %@ with error %s", databasePath, sqlite3_errmsg(database));
        sqlite3_close (database);
    }

    NSString *querystring;

    // create your statement
    querystring = [NSString stringWithFormat:@"SELECT strStore, strReg FROM tblStore WHERE strStore = %@ AND strReg = %@;", strStoreNumber, strRegNumber];  

    const char *sql = [querystring UTF8String];

    NSString *szStore = nil;
    NSString *szReg = nil;

    sqlite3_stmt *statement = nil;
    if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK) //queryString = Statement
    {
        NSLog(@"sql problem occured with: %s", sql);
        NSLog(@"%s", sqlite3_errmsg(database));
    }
    else
    {
        // you could handle multiple rows here
        while (sqlite3_step(statement) == SQLITE_ROW) 
        {            
            szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)];
            szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
        }        
    }

    sqlite3_finalize(statement);

    lblStoreNumber.text = szStore;
    lblRegNumber.text = szReg;   
} 
```

当我运行我的应用程序时，我收到以下错误：

```
2012-05-10 14:58:38.169 CCoDBTry[355:f803] Opened sqlite database at /Users/Matt****/Library/Application Support/iPhone Simulator/5.1/Applications/5DB7A218-A0F6-   485F-B366-91FD2F9BC062/Documents/tblStore.sqlite
2012-05-10 14:58:38.307 CCoDBTry[355:f803] sql problem occured with: SELECT strStore, strReg FROM tblStore WHERE strStore = 8053 AND strReg = 4;
2012-05-10 14:58:38.308 CCoDBTry[355:f803] no such column: strStore 
```

我感谢任何抽出时间来解释其中一些内容的人，因为我很新，并且在完成我尝试过的一些事情方面没有成功。非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T12:04:27.693

// 创建数据库

```
-(NSString *) filePath
{
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentDirectory=[paths objectAtIndex:0];
 return [documentDirectory stringByAppendingPathComponent:@"LoginDatabase.sql"];
} 
```

// 打开数据库

```
-(void)openDB
{
 if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK)
 {
   sqlite3_close(db);
   NSAssert(0, @"Database failed to Open");
 }
} 
```

// 创建表

```
-(void) createTableNamed:(NSString*)tableName withField1:(NSString*) field1 withField2:(NSString*) field2

{
   char *err;
   NSString *sql=[NSString stringWithFormat:@" CREATE TABLE IF NOT EXISTS '%@'('%@' TEXT PRIMARY KEY,'%@' TEXT);",tableName,field1,field2];

   if(sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err) !=SQLITE_OK)
   {
    sqlite3_close(db);
    NSAssert(0, @"Table failed to create");
   }
} 
```

// 插入记录

```
-(void)insertrecordIntoTable:(NSString*) tableName withField1:(NSString*) field1 field1Value:(NSString*)field1Vaue andField2:(NSString*)field2 field2Value:(NSString*)field2Value
{

  NSString *sqlStr=[NSString stringWithFormat:@"INSERT INTO '%@'('%@','%@')VALUES(?,?)",tableName,field1,field2];
 const char *sql=[sqlStr UTF8String];

 sqlite3_stmt *statement1;

 if(sqlite3_prepare_v2(db, sql, -1, &statement1, nil)==SQLITE_OK)
 {
  sqlite3_bind_text(statement1, 1, [field1Vaue UTF8String], -1, nil);
  sqlite3_bind_text(statement1, 2, [field2Value UTF8String], -1, nil);
 }
 if(sqlite3_step(statement1) !=SQLITE_DONE)
    NSAssert(0, @"Error upadating table");
 sqlite3_finalize(statement1);
} 
```

// 从表中检索数据

```
-(void)getAllRowsFromTableNamed:(NSString *)tableName
{
  NSString *field1Str,*field2Str;

  NSString *qsql=[NSString stringWithFormat:@"SELECT * FROM %@",tableName];
  sqlite3_stmt *statement;
  if(sqlite3_prepare_v2(db, [qsql UTF8String], -1, &statement, nil)==SQLITE_OK)
  {
   while(sqlite3_step(statement) ==SQLITE_ROW)
   {
     char *field1=(char *) sqlite3_column_text(statement, 0);
     char *field2=(char *) sqlite3_column_text(statement, 1);

     field1Str=[[NSString alloc]initWithUTF8String:field1];
     field2Str=[[NSString alloc] initWithUTF8String:field2];

     NSString *str=[NSString stringWithFormat:@"%@ - %@",field1Str,field2Str];
     NSLog(@"%@",str);
   }
} 
```

}

在 viewDidLoad 调用方法

```
- (void)viewDidLoad
{

  [self openDB];
  [self createTableNamed:@"Login" withField1:@"USERNAME" withField2:@"PASSWORD"];
  [self insertrecordIntoTable:@"Login" withField1:@"USERNAME" field1Value:username andField2:@"PASSWORD" field2Value:password];

} 
```

其中用户名和密码是 NSString 值；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:30:10.900

如果你不知道自己在做什么，sqlite 会很痛苦。我在使用 sqlite c 函数时也遇到了一些问题，但后来我决定使用 sqlite 包装器。

[FMDB](https://github.com/ccgus/fmdb)和[BWDB](http://www.filefactory.com/file/4ddnk9b1vad3/n/BWRSS-appstore-02-done.zip)是用于目标 c 的良好且易于使用的 sqlite 包装器。我建议你使用其中之一。

请注意，BWDB 在 lynda.com 教程（[这个](http://www.lynda.com/iOS-SDK-4-tutorials/ios-4-building-data-driven-applications/66385-2.html)）中，如果您在网络上找不到它......请发表评论，我会将其上传到某个地方。

编辑：你可以在你的应用程序中写东西的唯一地方是你的文档目录......所以..它是简单的术语......如果数据库不在你的文档目录中..是只读的..也是..当您读/写到您的数据库..操作系统将数据库复制到文档目录中..并在那里进行所有读取和写入，因此您可以在应用程序包中拥有一个数据库，但您不能编辑那个...所以你最终会得到 2 db。我自己也有同样的问题。我在更新应用程序时通过合并 2 db 来修复它

edit2：我上传了 BWDB 最终项目（你有你的包装器和项目，看看它是如何工作的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T19:50:08.533

您可以使用以下代码获取在 Documents 文件夹中创建的数据库。只需在文档文件夹中传递一个路径，如果需要，该函数将在给定路径的文档文件夹中复制 sqlite 数据库。然后，您可以使用此路径来创建和查询数据库表。

```
+ (NSString*) createDatabaseIfRequiredAtPath:(NSString*)databasePath {

    if (databasePath == nil)
       return nil;

   NSString *path = [NSString stringWithFormat:@"%@/%@", databasePath, kMainDBName];
   NSFileManager *fileManager = [NSFileManager defaultManager];
   NSError *error = nil;

   if ([fileManager fileExistsAtPath:path] == NO) 
   {
    // The writable database does not exist, so copy the default to the appropriate location.
      NSString *defaultDBPath = [[NSBundle mainBundle] pathForResource:kMainDBName
                                                              ofType:nil];
      BOOL success = [fileManager copyItemAtPath:defaultDBPath 
                                       toPath:path
                                        error:&error];
      if (!success)
      {
        NSCAssert1(0, @"Failed to create writable database file with message '%@'.", [  error localizedDescription]);
        return nil;
    }
}

return path; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:34:02.017

您可以打开终端并 cd 到 /Users/Matt* *** /Library/Application Support/iPhone Simulator/5.1/Applications/5DB7A218-A0F6-485F-B366-91FD2F9BC062/Documents/

然后 sqlite3 tblStore.sqlite

然后使用 .schema tblStore 应该显示您的表模式，您可以查看它是否正确构建。

您的数据库需要位于文档目录中才能进行写访问。如果您的数据库只是被读取，从不写入它可能在您的应用程序包中。完成此操作的一种方法是创建您的 database.sqlite 文件并将其添加到包中，然后在启动时将其复制到文档目录（如果它不存在）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T19:34:23.053

您是否有特定的原因想要直接使用 SQLLite，而不是使用 CoreData？CoreData 使用 SQLLite 数据库，但它本身是一个更高级别的 API，特别是对于表视图等，您可以获得许多 Xcode 中已经为其设置的功能和模板方法。定义数据模型是微不足道的，你会得到大量的样板代码，而且都经过优化。

[http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

CoreData 有时被描述为具有陡峭的学习曲线。我不同意。如果您正在考虑自己在应用程序中编写 SQL，那么使用 CoreData 不会有任何问题。

术语“沙盒”是您的应用程序具有读/写访问权限的设备文件系统部分的抽象术语。“文档”目录是应用程序沙箱中的特定目录。沙箱中除了文档目录之外还有其他文件，但大多数在 iOS 中将数据保存到文件系统的应用程序都是在文档目录中进行的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T19:38:13.243

也许你忘记了表格插入。创建了数据库和表，但它的空表。您试图从空表中读取记录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-11T09:27:27.297

我试过上面的方法对我不起作用，主要是因为给出的示例通常指向数据库文件，但并没有真正创建它。

在观察 sqlite3 如何使用命令 shell 工作时，我是这样解决问题的：

1.  （出于测试目的），要使用 Linux shell 创建文件，请执行以下操作：

> sqlite3 Heider.db

这创建了一个新的数据库文件名 (Heider.db)，还启动了 DB 命令提示符以创建 SQL 查询，... 在执行任何查询之前，只需输入以下内容，无需执行任何操作即可存在：

> 。出口

在 Linux shell 检查创建的文件，执行：

> ls -ltra

您应该看到创建了一个大小为 0 字节的“Heider.db”文件，这意味着 sqllite3 工具正在创建一个没有内容的空白文件。

现在，要检查这是否可行，请返回 sqlite：

> sqlite3 Heider.db

现在，使用以下命令创建一个新表：

> 创建表测试（id int not null 主键）；

插入一些东西：

> 插入 test(id) 值（123）；

请注意，查询执行得很好，没有任何错误。

现在，退出并检查：

> .exit ls -ltra

该文件中应该有一些数据，这证实了 Linux 中的工具至少可以工作......

现在，离开 Linux/Shell 并回到 XCODE/Development（或您正在开发的任何工具）......这使我们的生活变得如此简单，因为我们需要做的就是使用代码“以某种方式”手动创建文件, 然后让 sqlite 使用它。

因此，这是您需要做的：

// 检查文件名是否已经存在：

```
DBFileName = @"MyNewFile.db";  

if (![[NSFileManager defaultManager] fileExistsAtPath: DBFileName])
{

    NSLog([NSString stringWithFormat:@"Database does not exists, creating: %@", DBFileName]);
    [[NSFileManager defaultManager] createFileAtPath:DBFileName contents:NULL attributes:NULL];  
}

// Use SQLite to access the new file to do whatever you want:

int DBOpen = sqlite3_open([_DBFileName UTF8String], &_SqlLite);

if (DBOpen == SQLITE_OK) 
{

    NSLog([NSString stringWithFormat: @"Client: SQLite DB Opended Successfully, creating test table..."]); 

// Heider: Notice I am using "self" here because I am having this as a
wrapper class (see at the bottom of this post the whole function), you don't have to do the same, as you can use your own
SQLITE3 object directly instead...

 [self ExecQuery:@"create table Test(id int not null primary key);"];
 [self ExecQuery:@"insert into Test(id) values (123);"];

} 
```

如果您需要，我在上面使用的 SELF ExecQuery 也在下面：

> -(BOOL)ExecQuery:(NSString *)Query { BOOL 成功 = NO;
> 
> ```
> if (sqlite3_prepare_v2(_SqlDB, [Query UTF8String], -1, &_SqlQuery, NULL) == SQLITE_OK)
> {
>     if (sqlite3_step(_SqlQuery) == SQLITE_DONE)
>     {
>         NSLog([NSString stringWithFormat: @"Client: SQL Query Successful: %@", Query]);
>     } else {
>         NSLog([NSString stringWithFormat: @"Client-Error Executing SQL Query: %@", Query]);
>     }
> } else {
>     Log(3, [NSString stringWithFormat: @"Client-Error Preparing SQL Query: %@", Query]);
> }
> 
> sqlite3_finalize(_SqlQuery);
> 
> return Successful; 
> ```
> 
> }

该过程是创建一个您喜欢的空白文件，然后将 sqlite3 指向它，然后以旧的方式执行您的 SQL ......应该很简单。

祝你好运，我希望这会有所帮助。

H

# c - 如何使用 MPLAB X IDE 在库项目中创建全局变量

> ID：10540731
> 
> 赞同：0
> 
> 时间：2012-05-10T19:16:13.123
> 
> 标签：c, mplab

我想使用 MPLAB X IDE（用于 PIC 开发的 IDE）在 C 中创建一个库。

我的图书馆 ABCLib 有一个简单的源文件，如下所示：

**文件 abc.c**

```
void abcTest(int n){ 
    // I want store n as global variable
} 
```

要在 MyProject 中使用这个库，我必须在 MyProject 头文件夹中创建 abc.h：

**文件 abc.h**

```
#ifndef _ABC_H
#define _ABC_H 

void abcTest(int n);

#endif; 
```

**文件 MyProject.c（主文件）**

```
#include "abc.h"

void main(void) {
    abcTest(10);
} 
```

现在，我想将 n 存储为全局变量，因此，在调用 abcTest() 之后，我可以在任何我想要的地方检索 n 的值。

我正在开发一个库，打算在我的所有项目中重用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:57:44.377

您需要在要使用其全局值的所有文件中将该变量声明为外部变量。

例子：

**文件 abc.c**

```
extern int global_a;
void abcTest(int n){ 
    global_a+=n;
} 
```

**文件 abc.h**

```
#ifndef _ABC_H
#define _ABC_H 

void abcTest(int n);

#endif; 
```

**文件 MyProject.c（主文件）**

```
#include "abc.h"
int global_a = 0; // always initialize global variables

void main(void) {
    abcTest(10);
} 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:42:44.740

编译 MyProject.c 后，abc.h 文件将包含在翻译单元中，因此全局静态变量应在该翻译单元中保持可见。为了从外部对象访问它，您必须在翻译单元中有一个可以将值传递到外部的函数。

否则，只需在文件中的任何位置命名它而没有范围，它将是全局的。为了在多个文件中进行全局进位，请使用`extern`关键字告诉编译器您指的是另一个链接器符号中已经存在的全局变量。

# asp.net - 在启用 Sitecore 的 ASP.NET 网站中为默认 ASPX 页面启用输出缓存？

> ID：10540736
> 
> 赞同：2
> 
> 时间：2012-05-10T19:16:42.487
> 
> 标签：asp.net, iis-7, sitecore, outputcache

我通过将其放入我的 default.aspx（位于 CMS 之外）中，在启用了 Sitecore 的 ASP.NET 站点中启用了输出缓存：

```
<%@ OutputCache Duration="300" VaryByParam="None" %> 
```

在我的 Web.config 中：

```
<setting name="DisableBrowserCaching" value="false" /> 
```

这在我直接点击我的页面时有效，如在 http://[website]/default.aspx 中，但在我浏览到根站点 http://[website]/ 时无效。在这种情况下，它总是返回 200 响应，而不是重复请求时返回 304（未修改）。

我在一个不使用 Sitecore 的网站上尝试了同样的方法，并且缓存在 IIS 7 和 Sitecore 6.4.1 下的所有实例中都有效。

如何为启用 Sitecore 的站点中的默认（无扩展）ASP.NET 页面启用输出缓存？

**更新：**
似乎在我的本地机器上工作（这个问题在我们的 QA 环境中），我能看到的唯一区别是我有 IIS 7.5 而不是 7.0，但相同的 web.config 和 Sitecore 实例。

另外，我创建了另一个测试页面 (http://[website] **/Test/default.aspx** )，它表现出相同的行为，因此受影响的不仅仅是根。

**更新 2：**
坏消息 - Sitecore 已确认输出缓存[不受官方支持](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/ASP%20NET%20Output%20Caching.aspx)：

“Sitecore CMS 并非设计用于在 IIS 中启用用户模式或内核模式输出缓存，因此不支持其使用。”

这并不能解释为什么它*有时*适用于特定的 URL 和环境，我仍然希望有一个解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:31:23.323

我做了快速测试，看起来将**DisableBrowserCaching**设置为 false 并将**OutputCache**指令添加到 aspx 布局文件工作正常。

对，响应码是**200 OK**，但是页面是从浏览器的缓存中获取的（不是从服务器获取的）。响应代码**304**表示有对服务器的调用，并且服务器回答没有任何更改。

您能否再次检查页面的代码是否在服务器端执行？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T12:56:43.143

如果使用 sitecore，您需要将该指令放入每个布局 (.aspx) 文件中，以便演示设置始终是这些布局之一。

```
<%@ OutputCache Duration="300" VaryByParam="None" %> 
```

如果您的主页使用不同的布局减去指令，它可能会解释这种行为。

除此之外，使用 Sitecore 的内置缓存方法可能会更好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-11T07:11:13.393

您需要在 web.config 中的公共站点上启用缓存：

```
<Sites>
  <site name="website" cacheHtml="true" ... /> 
```

通常输出缓存在组件级别工作，并在演示文稿的 Sitecore 中配置。

# sql - 什么是 In 的 SubSonic 更新查询安全最大值

> ID：10540746
> 
> 赞同：1
> 
> 时间：2012-05-10T19:17:23.840
> 
> 标签：sql, subsonic

```
 var query = new Query(Tables.Ticket) {QueryType = QueryType.Update};

                query.WHERE(Ticket.Columns.IsDeleted, false);
                query.AND(Ticket.Columns.IsSold, false);                
                query.AND(Ticket.Columns.SeatId, Comparison.In, seats);
                query.AddUpdateSetting(Ticket.Columns.Price, 123);
                query.Execute(); 
```

如果 "seats" 是一个**包含 2000 个项目的列表**，那么这个查询是否写得不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:54:57.723

我的数据库是 MySQL，所以我只能谈论这个，但是对于这种类型的查询，性能仍然很好（取决于你的情况是什么慢查询。我的代码可以查询一个有 160000 条记录的表，甚至可以用`SELECT * FROM table WHERE id IN(1,2,3,...159999)`更少的时间） 3 秒）。在这种情况下，瓶颈是通过网络传输大型查询，但这在本地局域网中并不是什么大问题。

如果您可以从另一个表中查询座位 ID，您甚至可以通过服务器端执行（子查询）来提高性能。

```
SubSonic.SqlQuery subQuery = DB
    .Select(Seats.Columns.Id)
    .From<Seats>()
    .Where(Seat.Columns.Type).IsEqualTo(1);

// translates to
// UPDATE tickets SET price = 123
// WHERE seatid IN (SELECT id FROM seats WHERE type = 1)
DB.Update<Tickets>()
  .Set(Tickets.Columns.Price).EqualTo(123)
  .Where(Tickets.Columns.SeatId).In(subQuery)
  .Execute();

// translates to
// UPDATE tickets SET price = 123
// WHERE seatid IN (1,3,5,7,...,2000)
DB.Update<Tickets>()
  .Set(Tickets.Columns.Price).EqualTo(123)
  .Where(Tickets.Columns.SeatId).In(subQuery.ToList<int>())
  .Execute(); 
```

# php - CakePHP ACL 为不同的组生成不同的链接

> ID：10540747
> 
> 赞同：0
> 
> 时间：2012-05-10T19:17:28.147
> 
> 标签：php, cakephp

使用 CakePHP 2.0 的 ACL 我创建了 2 个组。一个是管理员，一个是访客。现在管理员可以添加和上传图片，访问者只能查看图片，如果他们点击添加或删除，它不会让他们做任何事情。为访客组删除这些链接的最佳方法是什么？如果我使用 if/else 语句检查他们属于哪个组，那会是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:54:30.737

要隐藏导致用户无权执行的操作的链接，视图必须以某种方式了解用户权限。您可以通过检查用户所属的组来检查这些权限，但这意味着您将不再依赖 ACL 权限。因此，任何 ACL 权限更新都必须在代码中报告。不是很方便。

然后还有什么 ？一种方法是检查控制器中的用户权限，通常是在登录期间，然后将这些权限保留在会话中。然后可以在视图中检查会话中的权限以隐藏或显示视图的某些部分。[您可以在此处](http://bakery.cakephp.org/articles/thanos/2011/01/17/acl_checking_permissions_in_views)找到此方法的示例：

但是对于具体的链接，您可以走得更远，避免在视图中编写测试。我个人使用从 HtmlHelper 继承并覆盖 link() 方法的助手。基本上它的工作原理是相同的：在被覆盖的 link() 方法中，检查目标操作的权限并且帮助程序返回链接，或者如果不允许用户访问目标操作，则不返回任何内容。

如果你想试试我的代码，你可以使用我的[Acl 插件](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

在您的 AppController 中，设置权限：

```
var $components = array(..., 'Acl.AclManager');

function beforeFilter()
{
    ...
    //you can put it here as the permissions check is performed only once per session
    $this->AclManager->set_session_permissions();
    ...
} 
```

在您看来，使用 AclHtmlHelper

```
$this->AclHtml->link(...); 
```

不过，此方法所基于的原则的一般说明：在登录期间检查所有权限。如果您的应用程序中有许多操作，这会大大减慢登录速度。

一种更有效的方法是仅在需要时检查每个操作的用户权限，即调用 link() 方法时。但这意味着助手必须检查 Acl 权限本身，这会以某种方式破坏 MVC 模型。而在核心库中，Acl 检查与组件高度耦合。

# jsp - java.lang.NoSuchMethodError：uges.servlets.MyQuery：方法 ()V 未找到

> ID：10540753
> 
> 赞同：0
> 
> 时间：2012-05-10T19:17:56.853
> 
> 标签：jsp, tomcat, servlets, jess

我正在使用 Tomcat v 7 和 Jess v 7.0

这是我得到的例外

```
root cause 

javax.servlet.ServletException: java.lang.NoSuchMethodError: uges.servlets.MyQuery:       method <init>()V not found
org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.jav  a:911)
org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
org.apache.jsp.catalog_jsp._jspService(catalog_jsp.java:121)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.NoSuchMethodError: uges.servlets.MyQuery: method <init>()V not found
org.apache.jsp.catalog_jsp._jspService(catalog_jsp.java:69)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我的 MyQuery 类包 uges.servlets 的源代码；

```
import jess.*;;

public class MyQuery
{

private static QueryResult result;
public MyQuery(Rete engine) throws JessException
{
    getQuery(engine);
}
public QueryResult getQuery(Rete engine) throws JessException
{
    result = engine.runQueryStar("all-products", new ValueVector());
    return result;
}
public String getString(String str) throws JessException
{
    String srtResult;
    srtResult = result.getString(str);
    return srtResult;

}
public Float getFloat(String str) throws JessException
{
    float flt;
    flt = result.getFloat(str);
    return flt;

}
public boolean next() throws JessException
{
    boolean next;
    next = result.next();
    return next;

}
} 
```

这是目录 Servlet 包 uges.servlets；

```
import jess.*;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Catalog extends BaseServlet {

public void doGet(HttpServletRequest request,
                   HttpServletResponse response)
    throws IOException, ServletException {
    checkInitialized();

    try {
        String customerId =
            (String) request.getParameter("customerId");
        if (customerId == null || customerId.length() == 0) {
            dispatch(request, response, "/index.html");
            return;
        }

        request.getSession().invalidate();
        HttpSession session = request.getSession();

        session.setAttribute("customerId", customerId);
        session.setAttribute("orderNumber",
                             String.valueOf(getNewOrderNumber()));

        ServletContext servletContext = getServletContext();
        Rete engine = (Rete) servletContext.getAttribute("engine");

        //engine.reset();
          MyQuery result = new MyQuery(engine);
          //engine.runQueryStar("all-products", new ValueVector());
            request.setAttribute("queryResult",result);               

    } catch (JessException je) {
        throw new ServletException(je);
    }

    dispatch(request, response, "/catalog.jsp");
}

private int getNewOrderNumber() throws JessException {
    ServletContext servletContext = getServletContext();
    Rete engine = (Rete) servletContext.getAttribute("engine");
    int nextOrderNumber = 
        engine.executeCommand("(get-new-order-number)").intValue(null);
    return nextOrderNumber;
}

public void destroy() {
    try {
        ServletContext servletContext = getServletContext();
        Rete engine = (Rete) servletContext.getAttribute("engine");
        String factsFileName =
            servletContext.getInitParameter("factsfile");
        File factsFile = new File(factsFileName);
        File tmpFile =
            File.createTempFile("facts", "tmp", factsFile.getParentFile());
        engine.executeCommand("(save-facts " + tmpFile.getAbsolutePath() +
                              " order recommend line-item next-order-number)");
        factsFile.delete();
        tmpFile.renameTo(factsFile);

    } catch (Exception je) {
        // Log error
    } 
}

} 
```

JSP 目录.jsp

```
<HTML>
<%@ page import="jess.*" %>
<jsp:useBean id="queryResult" class="uges.servlets.MyQuery" scope="request"/>

<HEAD>
<TITLE>Ordering from Tekmart.com</TITLE>
</HEAD>

<BODY>
<H1>Tekmart.com Catalog</H1>
Select the items you wish to purchase and press "Check Order" to continue.
<FORM action="/Order/recommend" method="POST">
<TABLE border="1">
<TR><TH>Name</TH>
    <TH>Catalog #</TH>
    <TH>Price</TH>
    <TH>Purchase?</TH>
</TR>
<% while (queryResult.next()) {
    String partNum =
            queryResult.getString("part-number");%> 
   <TR>
     <TD><%= queryResult.getString("name") %></TD>
     <TD><%= queryResult.getString("part-number") %></TD>
     <TD><%= queryResult.getFloat("price") %></TD>
     <TD><INPUT type="checkbox" name="items"
                value=<%= '"' + partNum + '"'%>></TD>
   </TR> 
 <% } %>                 
</TABLE>
<INPUT type="submit" value="Check Order">
</FORM>
</BODY>
</HTML> 
```

任何线索将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:20:02.813

JSP 引擎正在尝试使用无参数构造函数通过反射来实例化您的类。您尚未定义无参数构造函数，因此会发生此错误。一个 bean 必须有一个无参数的构造函数。如果需要在 bean 上设置属性，请使用`jsp:set-property`.

如果您绝对不能添加无参数构造函数，那么您必须在`jsp:use-bean`标记之外实例化它并自己将其添加到适当的上下文中，如

```
< %   
  pkg.Foo foo = new pcg.Foo(constructor-arg);  
  context.setAttribute("foo", foo);  
% > 
```

这违反了无参数构造函数的基本 JavaBean 要求。

我相信一旦在适当的范围内创建它，其他 JSP 就可以使用`jsp:use-bean`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:16:57.670

您已经在预处理 servlet**中**设置`queryResult`了请求范围。

```
request.setAttribute("queryResult",result); 
```

所以你根本**不需要**使用`<jsp:useBean>`。完全删除以下行：

```
<jsp:useBean id="queryResult" class="uges.servlets.MyQuery" scope="request"/> 
```

因为您的 servlet 已将其设置为请求属性，所以该对象**已**在 EL 中可用`${queryResult}`。但是由于类本身的奇怪设计，很难在 EL 中正确访问它，因此您需要求助于老式的*scriptlet*。您只需要先通过`request.getAttribute("queryResult")`.

要获得更好的设计方法，请检查[servlets 标记 wiki 页面](https://stackoverflow.com/tags/servlets/info)和[Show JDBC ResultSet in HTML in JSP page using MVC and DAO pattern](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)。

# mysql - mysql - how to replace a sub-string?

> ID：10540755
> 
> 赞同：1
> 
> 时间：2012-05-10T19:18:01.687
> 
> 标签：mysql, regex

a field is a varchar, i want to replace a sub string of this field.

```
ab123fg => ab456fg 
```

the above is just a example. just like the sub string to be replaced.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:20:02.237

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

```
REPLACE(str, 'ab123fg ', 'ab456fg') 
```

**EDIT:**

MySQL doesnt have a find and replace regex function, maybe have a look at [UDFs](https://launchpad.net/mysql-udf-regexp)

# c++ - openMP 嵌套并行 for 循环与内部并行 for

> ID：10540760
> 
> 赞同：27
> 
> 时间：2012-05-10T19:18:40.127
> 
> 标签：c++, parallel-processing, openmp

如果我使用这样的嵌套并行循环：

```
#pragma omp parallel for schedule(dynamic,1)
for (int x = 0; x < x_max; ++x) {
    #pragma omp parallel for schedule(dynamic,1)
    for (int y = 0; y < y_max; ++y) { 
    //parallelize this code here
   }
//IMPORTANT: no code in here
} 
```

这是否等同于：

```
for (int x = 0; x < x_max; ++x) {
    #pragma omp parallel for schedule(dynamic,1)
    for (int y = 0; y < y_max; ++y) { 
    //parallelize this code here
   }
//IMPORTANT: no code in here
} 
```

除了创建新任务之外，外部平行是否可以做任何事情？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-10T20:47:57.943

如果您的编译器支持 OpenMP 3.0，则可以使用以下`collapse`子句：

```
#pragma omp parallel for schedule(dynamic,1) collapse(2)
for (int x = 0; x < x_max; ++x) {
    for (int y = 0; y < y_max; ++y) { 
    //parallelize this code here
    }
//IMPORTANT: no code in here
} 
```

如果不支持（例如仅支持 OpenMP 2.5），有一个简单的解决方法：

```
#pragma omp parallel for schedule(dynamic,1)
for (int xy = 0; xy < x_max*y_max; ++xy) {
    int x = xy / y_max;
    int y = xy % y_max;
    //parallelize this code here
} 
```

You can enable nested parallelism with `omp_set_nested(1);` and your nested `omp parallel for` code will work but that might not be the best idea.

By the way, why the dynamic scheduling? Is every loop iteration evaluated in non-constant time?

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T19:49:27.557

不。

第一个`#pragma omp parallel`将创建一个并行线程团队，然后第二个将尝试为每个原始线程创建另一个团队，即团队团队。然而，在几乎所有现有的实现中，第二个团队只有一个线程：第二个并行区域基本上没有使用。因此，您的代码更像是

```
#pragma omp parallel for schedule(dynamic,1)
for (int x = 0; x < x_max; ++x) {
    // only one x per thread
    for (int y = 0; y < y_max; ++y) { 
        // code here: each thread loops all y
    }
} 
```

如果您不想这样做，而只是并行化内部循环，则可以这样做：

```
#pragma omp parallel
for (int x = 0; x < x_max; ++x) {
    // each thread loops over all x
#pragma omp for schedule(dynamic,1)
    for (int y = 0; y < y_max; ++y) { 
        // code here, only one y per thread
    }
} 
```

# c# - C# 客户端/服务器线程连接

> ID：10540762
> 
> 赞同：0
> 
> 时间：2012-05-10T19:18:47.757
> 
> 标签：c#, .net, vb.net

这部分代码我遇到了麻烦。事实上，我想设置一个客户端/服务器应用程序。在客户端部分，我启动一个线程，它的功能只是每次检查它是否连接到服务器（如果与服务器的连接仍然建立） TraceLog 是一个使用其 Info() 方法写入文件的类。这是客户端代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.IO;

namespace ClientApp
{
    class ClientOpenConnection
    {
        private static Thread threadConnect;
        static TcpClient myClient = new TcpClient();
        static String host = "";
        static Int32 port = 0;

        //Function that makes the client runs
        public static void RunClient(String hostname, Int32 hostport)
        {
            host = hostname;
            port = hostport;
            int _tryAgain = 0;

            while (!myClient.Connected) {
                try
                {   //I start the connection
                    myClient.Connect(host, port);
                }
                catch {

                }
                _tryAgain += 10;
                if (_tryAgain == 1000)
                    break;
                 //_tryAgain allows me to define how long will the client try to connect to the server.
            }
            TraceLog.Info("Out of the while ", ""); // This is to know where am I

            if (_tryAgain != 1000)
            {    //If I get out because _tryAgain is less than 1000\. It means that I am already connected to the server
                //Here I start a Thread to be sure that I am always connected to the server
                threadConnect = new Thread(isConnected);
                threadConnect.Start();
                TraceLog.Info("Launch the thread","");
            }
            //While threadConnect is executing parallely I continue my program
        }

        private static void isConnected() { 
            //I keep my eyes on the network connection
            while (myClient.Connected) { 
                //Nothing is done
            }
            TraceLog.Info("The connection has been lost","");
            RunClient(host,port);
        }
    }
} 
```

我遇到的问题是，当我在服务器之前启动客户端时，我进入了第一个 WHILE 循环。在这个级别上是可以的。当我启动服务器之后，我启动了 threadConnect 但问题是如果现在我停止服务器，通常我应该在日志文件中显示“连接已丢失”但我什么都没有。这部分代码有什么问题？您过去是否已经做过类似的事情？

我进行了修改，但仍然无法获得我想要的东西，即即使服务器停止，客户端仍然尝试联系服务器。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.IO;

namespace ClientApp
{
    class ClientOpenConnection
    {
        private static Thread threadConnect;
        static TcpClient myClient = new TcpClient();
        static String host = "";
        static Int32 port = 0;

        //Function that makes the client runs
        public static void RunClient(String hostname, Int32 hostport)
        {
            host = hostname;
            port = hostport;

            TraceLog.Info(" -> "+myClient.Connected,"");

            while (!myClient.Connected) {
                try
                {
                    myClient.Connect(host, port);
                    TraceLog.Info(" <-> " + myClient.Connected, "");
                }
                catch {
                    TraceLog.Info("Trying to contact the server","");
                }
            }
            TraceLog.Info("I am connected ", "");

            //Here I start a Thread to be sure that I am always connected to the server
            threadConnect = new Thread(isConnected);
            threadConnect.Start();
            TraceLog.Info("Launch the thread to be sure I am constantly online","");
        }

        private static void isConnected() { 
            //I keep my eyes on the network connection
            TraceLog.Info("->>"+myClient.Connected,"");
            while (myClient.Connected) {

                Thread.Sleep(500);

                try
                {
                    NetworkStream stream = myClient.GetStream();

                    ASCIIEncoding ascii = new ASCIIEncoding();

                    byte[] _incomingMsg = new byte[1024];

                    stream.Read(_incomingMsg, 0, _incomingMsg.Length);

                    String strToGet = System.Text.Encoding.ASCII.GetString(_incomingMsg);

                    strToGet = strToGet.Trim();

                    if (!strToGet.Equals("ONLINE"))
                        if (strToGet.Equals(""))
                        {
                            TraceLog.Info("The message receive is empty","");
                            break;
                        }
                }
                catch {
                    break;
                }
            }          
            TraceLog.Info("The connection has been lost", "");
            RunClient(host, port);
        }
    }
} 
```

但是当我在 isConnected() 函数中调用 RunClient() 时，它会在 WHILE 中执行并输出***TraceLog.Info("Trying to contact the server","");*** 即使我再次启动服务器，客户端仍处于 while 循环中并且根本不会连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:25:59.000

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.connected.aspx)：

> Connected 属性获取上次 I/O 操作时客户端套接字的连接状态。当它返回 false 时，客户端套接字要么从未连接，要么不再连接。
> 
> 因为 Connected 属性仅反映最近操作时的连接状态，所以您应该尝试发送或接收消息以确定当前状态。消息发送失败后，该属性不再返回true。请注意，此行为是设计使然。您无法可靠地测试连接的状态，因为在测试和发送/接收之间的时间内，连接可能已经丢失。您的代码应假定套接字已连接，并优雅地处理失败的传输。

换句话说，为了检查你是否仍然连接，你需要发送或接收一些数据，然后检查连接状态。

由于您的代码在建立连接后不会发送任何数据包，因此 connected 属性始终返回 true，并且循环永远不会退出。

# sql - SQL COUNT(*) 返回错误答案

> ID：10540763
> 
> 赞同：3
> 
> 时间：2012-05-10T19:18:50.547
> 
> 标签：sql

以下脚本应返回部门名称和这些部门中的员工人数，市场营销、执行和销售部门的员工人数为“0”，但返回的值不是“0”，而是“1”。我该如何纠正？

```
select Department, Departments.DepartmentID, count(*) as 'NumOfEmps' 
from Departments
left join Employees
on   Employees.DepartmentID = Departments.DepartmentID
group by Departments.DepartmentID,Department 
```

![在此处输入图像描述](../Images/f213fe4b2f11815c7fc3e62b2b5e7f1f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:21:20.157

您不能在一个查询中完成所有操作。您需要一个子查询首先获取员工人数，然后使用汇总结果获取相关部门信息（姓名等）：

```
SELECT Department, Departments.DepartmentID, t.NumOfEmps
FROM Departments
LEFT JOIN (SELECT DepartmentID, count(*) as 'NumOfEmps'
           FROM Employees
           GROUP BY DepartmentID) t
  ON t.DepartmentID = Departments.DepartmentID 
```

我正在对您的架构做出一些假设，因为它没有列出。列名可能有点偏离，但这是一般的想法。希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T19:35:43.223

不要使用`Count(*)`计数您想要计数的东西，即员工。

`Count(*)`计算整行。因为当你计算时，部门中的每个部门总是至少有一个记录（*）你总是会得到至少 1

```
SELECT d.Department, d.DepartmentID, count(e.EmployeeID)
FROM Departments d
    LEFT JOIN employees e
    ON d.DepartmentID = e.DepartmentID
GROUP BY 
 d.Department, d.DepartmentID 
```

[演示](http://sqlfiddle.com/#!3/6c0cf/2)

# jquery - Jquery - 如果'draggable div'的大小大于'droppable div'，则不会发生Drop事件

> ID：10540768
> 
> 赞同：1
> 
> 时间：2012-05-10T19:19:10.860
> 
> 标签：jquery, css, html, draggable, droppable

> **可能重复：**
> [jQuery UI 可拖动到更小的 droppable](https://stackoverflow.com/questions/2542137/jquery-ui-draggable-to-smaller-droppable)

我有一个可拖动的 div 和一个可放置的 div。可拖动 div 的高度和宽度大于可放置 div。所以 drop 事件没有发生。

```
<div id='draggable' style="width:500px; height:500px;">
       ABCABC
</div>

<div id='droppable' style="width:100px; height:100px;">
       XYZXYZ
</div>

$('#droppable').droppable({
          drop: function( event, ui ){
                        alert("Drop event occured");
          }
}); 
```

当我使可拖动 div 的尺寸小于可放置 div 时，成功触发了 drop 事件。

请指导我如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T19:44:35.857

您可以在 droppable 方法中将`tolerance`选项更改为`touch`

[http://jqueryui.com/demos/droppable/#option-tolerance](http://jqueryui.com/demos/droppable/#option-tolerance)

```
$( "#droppable" ).droppable({ tolerance: "touch" }); 
```

默认值为`intersect`，这意味着您的可拖动 div 必须与可放置 div 重叠 50%。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T19:42:57.237

所有你需要做的就是改变`tolerance`你的droppable。

> 指定用于测试可拖动对象是否“越过”可放置对象的模式。可能的值：'fit'、'intersect'、'pointer'、'touch'。

```
fit: draggable overlaps the droppable entirely
intersect: draggable overlaps the droppable at least 50%
pointer: mouse pointer overlaps the droppable
touch: draggable overlaps the droppable any amount 
```

默认为`intersect`，需要 50% 的重叠。也许试试`pointer`。

# ruby - 如何将此 Objective C 重写为 RubyMotion？

> ID：10540770
> 
> 赞同：2
> 
> 时间：2012-05-10T19:19:17.603
> 
> 标签：ruby, ios5, rubymotion

在目标 C 中，可以将背景图像设置为拉伸的 png，如下所示：

```
button = [[UIButton alloc] initWithFrame:CGRectMake(10, 0, 300, 44)];
[button setTitle: @"Tap me" forState: UIControlStateNormal];
[button setBackgroundImage:[[UIImage imageNamed: @"greenButton.png"]
                                 stretchableImageWithLeftCapWidth:8.0f
                                 topCapHeight:0.0f]
                       forState:UIControlStateNormal]; 
```

尝试将其转换为 Ruby，但我不断收到异常。问题在于 UIImage 实例上调用的两个方法：**stretchableImageWithLeftCapWidth**和**topCapHeight**。

我尝试了以下方法无济于事：

```
greenImage = UIImage.imageNamed("greenButton.png")
greenImage.stretchableImageWithLeftCapWidth = 8.0
greenImage.topCapHeight = 0.0
@timerButton.setBackgroundImage(greenImage, forState: UIControlStateNormal) 
```

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T19:35:43.490

您错误地破坏了该方法选择器

它被声明为

```
- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight 
```

应该这样称呼

```
greenImage.stretchableImageWithLeftCapWidth(8.0, topCapHeight:0.0) 
```

您很可能希望将其分配给某些东西，因此它可能看起来像这样

```
greenImage = UIImage.imageNamed("greenButton.png")
greenImage = greenImage.stretchableImageWithLeftCapWidth(8.0, topCapHeight:0.0)
@timerButton.setBackgroundImage(greenImage, forState: UIControlStateNormal) 
```

## 边注

您是对的，该方法在 iOS 5 中被标记为新弃用，但同样重要的是要注意替换方法也在 iOS 5 中引入，因此如果您计划支持旧 iOS，那么您将需要继续使用它。

# c# - .net 中的字符大小不符合预期？

> ID：10540774
> 
> 赞同：4
> 
> 时间：2012-05-10T19:19:39.117
> 
> 标签：c#, .net, .net-4.0, char

char 的大小为：2 ( [msdn](http://msdn.microsoft.com/en-us/library/x9h8tsay%28v=vs.71%29.aspx) )

```
sizeof(char)  //2 
```

一个测试 ：

```
char[] c = new char[1] {'a'};

Encoding.UTF8.GetByteCount(c) //1 ? 
```

为什么值为 1？

*（当然，如果 c 是像 'ש' 这样的 unicode 字符，那么它确实会显示 2。）*

`a`不是 .net char 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T19:20:57.240

这是因为 'a' 在 UTF-8 中只需要一个字节来编码。

`Encoding.UTF8.GetByteCount(c)`[将告诉您将给定的字符数组编码为UTF-8](http://en.wikipedia.org/wiki/UTF-8)需要多少字节。有关更多详细信息，请参阅文档[`Encoding.GetByteCount`](http://msdn.microsoft.com/en-us/library/system.text.encoding.getbytecount.aspx)。`char`这与.NET 内部类型的宽度完全不同。

每个码位小于 128 的字符（即 U+0000 到 U+007F）都需要一个字节来以 UTF-8 进行编码。

其他字符在 UTF-8 中占用 2、3 甚至 4 个字节。（有超过 U+1FFFF 的值*需要*5 或 6 个字节进行编码，但它们目前不是 Unicode 的一部分，而且可能永远不会。）

`char`请注意，在 UTF-8 中编码需要 4 个字节的唯一字符无论如何都不能编码为单个字符。A`char`是一个 UTF-16 代码单元，任何超过 U+FFFF 的 Unicode 代码点都需要两个 UTF-16 代码单元组成一个*代理对*来表示它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T19:22:00.887

原因是，在内部，.NET 将字符表示为 UTF-16，其中每个字符通常占用 2 个字节。另一方面，在 UTF-8 中，如果每个字符在前 128 个代码点（偶然与 ASCII 重叠）中，则每个字符占用 1 个字节，超过 2 个或更多字节。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T19:23:17.193

这不公平。你提到的页面说

> char 关键字用于声明 Unicode 字符

那就试试吧：

```
Encoding.Unicode.GetByteCount(c) 
```

# c# - 为接受表值参数的存储过程生成表参数

> ID：10540778
> 
> 赞同：0
> 
> 时间：2012-05-10T19:19:53.683
> 
> 标签：c#, entity-framework, stored-procedures, ef-code-first, table-valued-parameters

我正在调用一个采用表值参数的存储过程。

我知道传递此参数的以下选项： create `DataTable`、`DbDataReader`或`IList<SqlDataRecord>`.

我正在使用`IList<SqlDataRecord>`（使用`DataTable`类似），但它涉及编写大量样板代码：创建集合、设置每个列的类型、添加行、设置每个单元格的值。

我认为这正是 Entity Framework 应该自动化的代码类型。所以我希望定义与 SQL TVP 类型匹配的 C# 类，添加常用的 EF 属性，创建这些对象的集合并让 EF 实现`DbDataReader`或`IList<SqlDataRecord>`在我的集合之上。但是我找不到任何方法来做到这一点——例如，有`EntityDataReader`，但那是从 SQL 中读取的——我找不到在内存集合之上实现任何合适接口的实现。

在我开始使用反射自己编写之前，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T23:45:03.723

实体框架当前不支持表值参数。您可以在这里投票支持此功能：[http ://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/1015347-table-valued-parameters](http://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/1015347-table-valued-parameters)

# php - 将FB生日插入Mysql给出NULL

> ID：10540780
> 
> 赞同：1
> 
> 时间：2012-05-10T19:20:02.263
> 
> 标签：php, mysql, sql, date

当我在 MYSQL 中插入生日和当前时间时，我得到 NULL

```
$graph_url = "https://graph.facebook.com/me?access_token=".$params['access_token']."&format=json&fields=birthday";
$user = json_decode(file_get_contents($graph_url),true);
     echo("birthday is " . $user['birthday']); 
```

SQL

```
$queryip = "insert into table (birthday,currenttime) values (".$user['birthday'].','.CURDATE().")";
                $resultip = mysql_query($queryip); 
```

MYSQL结构生日，当前时间字段都是类型`DATE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:26:49.323

您需要请求`birthday_date`列，而不是`birthday`，因为它始终采用相同的格式 DDMMYYY。之后，您需要将以下内容添加到您的 INSERT 查询中：

```
STR_TO_DATE('" . mysql_real_escape_string ($user ['birthday_date']) . "', '%m/%d/%Y') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:43:28.323

在 PHP 中：

```
function formatDateFbToSql($fbdate)
{
    // facebook user_birthday format (02/19/1988)
    $date = DateTime::createFromFormat('m/d/Y', $fbdate);
    // mysql format (1988-02-19)
    return $date->format('Y-m-d');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:26:18.127

（尽管是不同的语言和 RDBMS，但这与[此问题](https://stackoverflow.com/a/10461630/372643)中的问题相同。）

首先，SQL 字符串必须包含在 中`''`：您显然在`(".$user['birthday'].' ...`. 其次，更重要的是，它们**必须**被转义，以防止 SQL 注入攻击（并确保字符串仍然有效）。

通常，最好使用准备好的语句将参数传递给 SQL 查询，而不是在查询本身中插入变量：这应该为您处理转义和转换。

如有必要，您还需要将生日字符串转换为日期。

我建议改为使用[`mysqli`和准备好的语句](http://www.php.net/manual/en/mysqli.prepare.php)。（有很多例子，也许[这](https://stackoverflow.com/a/9285654/372643)会有所帮助。）

**编辑：**

或许可以尝试以下方式（假设您已切换到`mysqli`）：

```
$query = "insert into table (birthday,currenttime) values (STR_TO_DATE(?, '%m/%d/%Y'), CURDATE())";
if ($stmt = $mysqli->prepare()) {
    $stmt->bind_param('s', $user['birthday']);
    $stmt->execute();
    $stmt->close();
} else {
    die($mysqli->error);
} 
```

（这可能也需要`birthday_date`像 Jeroen 建议的那样。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:26:06.037

您是否尝试替换“.$user['birthday'].','.CURDATE().” 进入 '".$user['birthday']."',CURDATE() ？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-03T19:29:48.367

尝试

```
$user['birthday'] = date("Y-m-d", strtotime($user['birthday'])); 
```

在 SQL 插入语句之前。

# ruby-on-rails - 一个片段如何缓存带有会话信息的评论？

> ID：10540786
> 
> 赞同：1
> 
> 时间：2012-05-10T19:20:27.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

一个片段如何缓存带有会话信息的评论？例如：

```
 <% cache "song_#{@song.id}_comments" do %>
    <ul>
        <% @comments.each do |comment| %>

          <li class="clearfix">
            <p><%= comment.comment %></p>

            <% if can? :destroy, comment %>
              <span>&middot;</span><%= link_to 'delete', comment_path(comment), :confirm => 'Are you sure?', :method => :delete, :remote => true %>
            <% end %>

          </li>
        <% end %>
    </ul>
  <% end %> 
```

如果用户拥有评论，则会显示删除链接。但是因为，这是缓存的。它不应该显示给其他用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:04:36.287

我认为片段缓存中不可能有基于会话的逻辑，除非您将该信息作为密钥的一部分，这会违背缓存的目的。

如果评论归用户所有，一种可能的方法是使用基于客户端的逻辑动态添加删除链接。例如，您可以为每条评论嵌入一个 hidden_​​field - owner_id。然后，对于每次渲染，除了缓存的评论（带有所有者 ID）之外，您还可以拥有另一个隐藏字段 - 当前用户 ID。然后，JS 可以为用户拥有的所有评论添加删除链接。

# objective-c - 在按钮 B 的触地期间触发按钮 A 上的触地

> ID：10540792
> 
> 赞同：1
> 
> 时间：2012-05-10T19:20:54.150
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我正在尝试将触摸事件交换为两个按钮。当触发按钮的 TouchDown 事件时，我会在当前被触摸的按钮之上加载一个新按钮。问题是我需要选择这个新按钮进行拖动。我需要取消第一个按钮的 TouchDown，然后将其强制到新按钮上，以便用户立即开始拖动它。如何手动调用我的`widgetTouch:(id)sender forEvent:(UIEvent *)event`并保持触摸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:30:59.763

我会尝试`[button sendActionsForControlEvents: UIControlEventTouchDown]`

# xcode - 由于 IBOutletCollection，每当我运行时，XCode 都会引发 Sigabrt 错误

> ID：10540795
> 
> 赞同：3
> 
> 时间：2012-05-10T19:21:01.847
> 
> 标签：xcode, ios5, iboutlet

我正在为 iOS 5 创建一个应用程序，但出现以下错误：

```
Assertion failure in -[UIRuntimeOutletCollectionConnection performConnect], /SourceCache/UIKit_Sim/UIKit-1912.3/UIRuntimeOutletCollectionConnection.m:43 
```

我尝试调试错误并且可以看到它发生是因为我将一个项目连接到 IBOutletCollection。

IBOutletCollection 的定义如下：

```
@property (strong) IBOutletCollection(BallButton) NSSet *Balls; 
```

和

```
NSSet *Balls; 
```

被定义为实例变量。

每当我没有将 Ball 连接到界面生成器中的集合时，应用程序都会正常加载。但是，只要将任何球添加到集合中，那么在 ViewController 和所有球都已实例化且在 ViewController 中的 ViewDidLoad 之前，我将收到错误消息。

它工作正常，然后我重新定位了一些图层，现在我无法摆脱这个错误。

如果有人可以提供关于为什么会发生这种情况的建议，甚至只是一个使用 IBOutletCollection 的 iOS 5 示例（以防我在设置中做错了，但我认为我没有），那么将不胜感激.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:39:46.987

除了使用 IBOutletCollection 之外，您还可以获得包含集合中您想要的所有项目的视图，并使用 IBOutlet 连接它。然后使用：

```
- (NSSet *)getBallsFromView:(UIView *)view
{
    NSMutableSet *balls = [[NSMutableSet alloc] init];
    for (UIView *subview in [view subviews]) 
    {
        if ([subview isKindOfClass:[BallButton class]])
            [balls addObject:(BallButton *)subview];
    }
} 
```

这将从视图中检索特定类型的所有项目，然后您可以简单地将它们添加到集合中。如果它们直接在您正在迭代的视图上，这只会获取所有项目。如果有一个子视图也包含您想要的项目，则必须递归调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T16:59:13.547

IBOutletCollections 应该被声明为 NSArray，你有它作为 NSSet。它应该写成：

```
@property (strong, nonatomic) IBOutletCollection(BallButton) NSArray *Balls; 
```

# delphi - 确定一个点是否在多边形内？

> ID：10540796
> 
> 赞同：7
> 
> 时间：2012-05-10T19:21:06.810
> 
> 标签：delphi, custom-controls, delphi-xe2, polygon

我在 Delphi 中制作了一个自定义控件（继承自`TCustomControl`），它由许多多边形列表项（不规则形状）组成。我需要为每个项目实现鼠标事件，但首先我需要能够检测鼠标位置是否在给定的多边形 ( `array of TPoint`) 内。我正在捕获命中测试消息 ( `WM_NCHITTEST`)，这就是我需要进行此验证的地方。我有许多多边形，我将对每个多边形项目进行循环并执行此检查以查看鼠标的 X/Y 位置是否在此多边形内。

```
procedure TMyControl.WMNCHitTest(var Message: TWMNCHitTest);
var
  P: TPoint; //X/Y of Mouse
  Poly: TPoints; //array of TPoint
  X: Integer; //iterator
  I: TMyListItem; //my custom list item
begin
  P.X:= Message.XPos;
  P.Y:= Message.YPos;
  for X := 0 to Items.Count - 1 do begin
    I:= Items[X]; //acquire my custom list item by index
    Poly:= I.Points; //acquire polygon points

    //Check if Point (P) is within Polygon (Poly)...?

  end;
end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T19:25:55.173

您可以使用[`PtInRegion`](http://msdn.microsoft.com/en-us/library/dd162883.aspx)：

```
function PointInPolygon(Point: TPoint; const Polygon: array of TPoint): Boolean;
var
  rgn: HRGN;
begin
  rgn := CreatePolygonRgn(Polygon[0], Length(Polygon), WINDING);
  Result := PtInRegion(rgn, Point.X, Point.Y);
  DeleteObject(rgn);
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T19:27:59.577

您可以使用此处找到的光线投射算法： [http ://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm](http://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm)

大多数计算机图形类都以此为例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T10:02:57.883

检查点是否在多边形内部可以通过想象一条穿过该点的水平线来完成，然后从左到右计算这条想象的线穿过多边形的次数。如果在碰到一个点之前多边形交叉的数量是奇数，那么点在里面，如果偶数那么点在多边形之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-26T23:44:15.527

还有另一种我们广泛使用的技术，它根本不涉及任何数学，并且可以处理任何形状的极其复杂的嵌入式控件。只需有一个控件的屏幕外图像，所有部件都用颜色编码（如下图所示），用户可以单击。

当他们移动鼠标时，只需在我们的屏幕外图像中查看鼠标下方像素的颜色，它就可以准确地告诉我们他们在哪个按钮/控件上方——白色表示未超过它，任何一系列颜色表示各种零件。

[彩色蒙版](https://i.stack.imgur.com/PD180.png)

//伪代码

```
function MouseOverControl(LocalMousePos:TPoint):ControlID;
begin
   //sanity check
   Result:=IDNull;
   if (LocalMouse.X < 0) or (LocalMouse.X > ControlWidth) or 
      (LocalMouse.Y < 0) or (LocalMouse.Y > ControlHeight) then
          exit;
   case OffScreenControlMask.Canvas.Pixels[LocalMousePos.X,LocalMousePos.Y] of
    clwhite:exit;
    clRed:result:=ControlIDOne;
    clGreen:result:=ControlIDTwo;
    clBlue:result:=ControlIDThree;
  ... etc
   end;
end; 
```

注意：附加的颜色蒙版图像代表五个相同的圆形控件，它们被分成带有中心按钮的象限（并且由于它们都使用相同的颜色，我们为每种颜色设置了常量，我们通过一个简单的方法确定鼠标在五个中的哪一个上XPosition）以及右侧的附加不规则控件和下方的一组或矩形按钮。

# google-apps-script - GAS UI 服务中的语法

> ID：10540809
> 
> 赞同：0
> 
> 时间：2012-05-10T19:21:42.387
> 
> 标签：google-apps-script

我有这行代码对它创建的 listBox 没有影响......我想调整它的高度和字体大小，我错过了什么？

```
 var titre = app.createListBox(false).setId("titre").setName("titre").setHeight('45px').setStyleAttribute("fontSize","12").setStyleAttribute("verticalAlign","middle"); 
```

谢谢

哔叽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:27:08.453

可能不是你要找的，但是这个相同的代码对我有用。唯一没有用的东西，也是你唯一没有抱怨的:)，是verticalAlign的东西。

这是我的测试的完整代码。

```
function uiTest() {
  var app = UiApp.createApplication().setTitle("UI");
  var titre = app.createListBox(false).setId("titre").setName("titre").setHeight('45px').
      setStyleAttribute("fontSize","16").setStyleAttribute("verticalAlign","middle");
  titre.addItem("test");
  var panel = app.createHorizontalPanel().add(
    titre).add(
    app.createLabel('example')).add(
    app.createListBox().addItem("test2"));
  SpreadsheetApp.getActive().show(app.add(panel));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:10:19.750

您可以摆脱所有这些： .setStyleAttribute()

```
 function applyCSS(element, style){
    for (var key in style){
      element.setStyleAttribute(key, style[key]); 
    }   
  } 
```

如果有帮助，我这里有一堆 CSS：[https ://sites.google.com/site/scriptsexamples/gs-interactive](https://sites.google.com/site/scriptsexamples/gs-interactive)

# lucene - Umbraco 检查：如何在嵌入式内容数据类型中搜索？

> ID：10540812
> 
> 赞同：4
> 
> 时间：2012-05-10T19:21:56.820
> 
> 标签：lucene, umbraco

我正在使用嵌入式内容数据类型（http://farmcode.org/post/2011/01/20/Presenting-a-new-Umbraco-data-type-Embedded-Content.aspx），但我似乎无法找到一种方法来正确使用 Umbraco 检查在嵌入式内容数据类型中进行搜索。

返回的搜索结果对象将 Embedded Content 类型显示为一个字符串，其中所有字段混合在一起，而不是原始 xml 格式。

有没有办法解决这个问题，以便我可以搜索嵌入内容类型中的各个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:04:27.187

这个问题在[Umbraco 论坛](http://our.umbraco.org/forum/developers/extending-umbraco/31632-Umbraco-Examine-how-to-search-inside-Embedded-Content-data-type?p=0#comment117290)上得到了回答（正如上面评论中所提到的），推测：

当索引以 XML 或其他自定义格式存储的内容时，您需要在将数据插入 Lucene 索引之前对其进行预处理。

您可以通过挂钩到`GatheringNodeData`检查中的事件来做到这一点。然后处理 XML 并将数据保存到新字段中。您可以使用各种自定义数据类型来执行此操作。

完整的细节可以在这里找到：

[http://our.umbraco.org/forum/developers/extending-umbraco/31632-Umbraco-Examine-how-to-search-inside-Embedded-Content-data-type?p=0#comment117290](http://our.umbraco.org/forum/developers/extending-umbraco/31632-Umbraco-Examine-how-to-search-inside-Embedded-Content-data-type?p=0#comment117290)

（添加此答案以帮助可查找性并防止链接失效）

# jquery - rails中的jquery无法识别点击事件

> ID：10540820
> 
> 赞同：0
> 
> 时间：2012-05-10T19:22:25.197
> 
> 标签：jquery, ruby-on-rails, click, coffeescript

在 Rails 中使用 jQuery 的新手，无法识别 div 以用于单击或悬停事件。也使用咖啡脚本，但编译看起来不错。div 在 Chrome 开发工具的元素窗口中看起来都不错，但我没有在控制台窗口中看到我的 console.log。

我的 _form.html.haml 的一部分

```
.field
  = f.label :question
  = f.text_field :question
%p Click the plus sign to add answers.
.field#answerone
  = f.label :answers
  = f.text_field :answers
#plusanswer
  = image_tag("plusWhite.png", :alt => "plus sign")

.actions
  = f.submit 'Save' 
```

咖啡脚本：

```
$("#plusanswer").click ->
  console.log("here we are")
  $("#answerone").clone().appendto() 
```

编译的javascript：

```
(function() {

  $("#plusanswer").click(function() {
    console.log("here we are");
    return $("#answerone").clone().appendto();
  });

}).call(this); 
```

我做 image_tag 的方式是不是把事情搞砸了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:34:05.953

我相信塞尔吉奥的评论是正确的。如果您的 JS 出现在页面标记之前，则选择器会`$(#plusanswer')`在该元素存在之前运行。您可以使用代码验证这一点

```
console.log $('#pluganswer').length 
```

要解决此问题，请将您的代码包装在 jQuery 的文档就绪包装器中，如下所示：

```
$ ->
  # the rest of your code goes here 
```

这看起来有点神奇，但它是这样工作的：当你将一个函数传递给 jQuery 对象时`$`，它只会在`document`' 的“就绪”事件触发后运行该函数。所以，再次假设你的代码在你的标记之前，你应该得到这个行为：

```
console.log $('#pluganswer').length    # 0
$ ->
  console.log $('#pluganswer').length  # 1, because the page's markup is loaded 
```

# python - Sublime Text 的构建感知 Python 自动补全

> ID：10540823
> 
> 赞同：5
> 
> 时间：2012-05-10T19:22:39.087
> 
> 标签：python, plone, sublimetext, buildout

是否有任何技巧可以让 Sublime Text 的 Python 自动完成功能从 buildout 的 [eggs] 部分中清除所有鸡蛋

例如，获取与 Plone 生成的命令相同的 sys.path`bin/instance`并将它们暴露给 Sublime 的自动完成。在此之后，您可以轻松地自动完成导入和内容。

一个更好的解决方案是

*   `bin/sublime`有buildout 生成的特殊命令

*   此命令会将`src/`文件夹作为 Sublime 文本（项目？）打开，并设置所有必要的环境变量和内容

欢迎其他解决方案/想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T21:42:07.247

检查[http://pypi.python.org/pypi/corneti.recipes.codeintel/0.1.3](http://pypi.python.org/pypi/corneti.recipes.codeintel/0.1.3)

这比 Martin 的解决方案更容易，我将它与 omelette 一起使用，在我的 development.cfg buildout 中有这样的部分

```
[codeintel]
recipe = corneti.recipes.codeintel
eggs = ${buildout:eggs}
extra-paths =
    ${omelette:location} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T20:53:18.783

我和 Martin Aspelli 一样，使用[SublimeCodeIntel 插件](https://github.com/Kronuz/SublimeCodeIntel)；与collective.recipe.omelette 一起，这满足了我所有的代码完成需求。Martin 在博客中介绍了他的设置，包括一个为您设置 CodeIntel 配置文件的小脚本：

[http://www.martinaspeli.net/articles/sublime-text-2-for-zope-and-plone](http://www.martinaspeli.net/articles/sublime-text-2-for-zope-and-plone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T08:16:09.900

对于那些对使用 SublimeRope 感兴趣的人，您可以在 .ropeproject/config.py 中添加类似这样的内容：

```
import os
import glob
for path in glob.glob(os.path.join(os.path.dirname(__file__), '../../buildout-cache/eggs/*.egg')):
    prefs.add('python_path', path) 
```

那些构建方法虽然很花哨！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-17T04:17:16.513

这是另一个构建配方[plone.recipe.sublimetext](https://pypi.python.org/pypi/plone.recipe.sublimetext/)，它支持`SublimeText 3`最好的自动完成插件[之一 SublimeJEDI](https://github.com/srusskih/SublimeJEDI)，SublimeLinter (flake8, pylint)。

这个配方将创建包含所有路径的特定于 sublime 项目文件的构建（即 Jedi 的所有鸡蛋路径）。简单的用例可能是

```
[buildout]
eggs =
# All eggs here
parts = 
    sublimetext
#   other parts here
[sublimetext]
recipe = plone.recipe.sublimetext
eggs = ${buildout:eggs}
jedi-enabled = True
sublimelinter-enabled = True
sublimelinter-flake8-enabled = True 
```

# php - NetBeans 不显示当前打开的 php 文件中定义的函数列表

> ID：10540826
> 
> 赞同：18
> 
> 时间：2012-05-10T19:22:47.423
> 
> 标签：php, netbeans

我从早上开始就一直在尝试 NetBeans。这是一个非常棒的 IDE，但它让我很想弄清楚如何为我打开的文件启用函数列表视图。例如，我有一个包含 100 个函数的库文件。我需要使用搜索来执行特定功能，这很愚蠢。

我确信有办法完成这项工作，但无法弄清楚。[netbeans.org](http://netbeans.org)也没有这方面的任何信息。他们的帮助文件在这方面也做得不好。

Netbeaners，在那里！请给我一个帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-07T13:10:27.837

# jquery - jquery中的嵌套元素搜索

> ID：10540828
> 
> 赞同：2
> 
> 时间：2012-05-10T19:22:58.177
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery 和 jQuery ui。下面是我的标记：

```
<div id="content">   
   <ul id="sortable">             
    <li class="button_tab"><div id="select_me">Select Me</div></li>
    <li class="button_tab"><div id="select_me_1">Select Me 1</div></li>
    <li class="button_tab"><div id="select_me_2">Select Me 2</div></li>           
  </ul>  
</div> 
```

jQuery：

```
 $( ".button_tab" ).button(); 
```

我试图在点击事件上获取 id="select_me" ，但没有任何反应，因为 button() 函数插入了特定的类名，我无法正确选择它：

```
 $('div#content ul#sortable li.button_tab div').click(function() {
   alert($(this).attr('id'));        
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:34:32.087

给定的代码工作正常。然而，调用它们的顺序很重要。

`.button()` 将清除所有`click`事件，因为它在逻辑上应该处理 'clicks' 。`click`因此，为了再次为孩子启用自定义事件。您必须`click`在调用后创建一个事件侦听器`.button()`

1.  `$( ".button_tab" ).button();`
2.  `$('div#content ul#sortable li.button_tab div').click(function() { alert($(this).attr('id'));
    });`

否则，您可以在 Jquery 中使用`.on()` 并创建一个动态`click`事件侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:27:38.127

尝试

```
$("#sortable li.button_tab div[id^='button_tab']").click(function() {
   alert($(this).attr('id'));        
}); 
```

或者

```
$("#sortable li.button_tab").click(function() {
   var div_id = $(this).find("div[id^='button_tab']").attr("id");
   alert(div_id);        
}); 
```

# ubuntu - nginx php-fpm 和 ubuntu 的随机 502 网关错误

> ID：10540834
> 
> 赞同：13
> 
> 时间：2012-05-10T19:23:16.677
> 
> 标签：ubuntu, nginx, php

我在使用 nginx 和 php-fpm 时遇到了随机 502 网关错误的问题。就我而言，我发现了一个场景，其中各种 php.ini error_log 设置和 error_reporting 级别导致出现随机 502 网关错误。

通过更改 php.ini 设置 error_reporting 和 error_log 我能够使 502 网关错误消失 - 但更重要的是我能够查看日志中真正的 php 错误并修复它们。

主要问题是，如果“error_reporting 设置为显示通知”，“error_logging = On”，那么我需要确保将 error_log 设置为可写入服务器的有效路径。

```
// !!! 502 Gateway Error (unhappy server)
error_reporting = E_ALL & E_NOTICE
; error_log = php_errors.log (note this is commented)

// Happy Server, no 502 gateway error
error_reporting = E_ALL & E_NOTICE
error_log = /valid/log/path/and/permissions

// Happy Server, no 502 gateway error
error_reporting = E_CORE_ERROR
; error_log = php_errors.log (note this is commented) 
```

请注意，实际错误是 php 通知......但是 ngingx 为与未设置属性相关的 php 通知抛出 502 网关错误。

另请注意，并非在每个 php 通知中都会触发 502 网关错误。

希望这可以节省一些人的挫败感！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:50:25.527

Nginx 中的 502 网关错误是由 php-fpm 没有足够的进程和/或超时引起的。日志记录只会告诉您问题是什么，而不是 502 错误的原因。

我在 25 台服务器上使用 stunnel+haproxy+nginx+php-fpm。pfp-fpm 中的默认值非常低，即使对于中等繁忙的服务器也是如此。配置 fpm 子进程的方式与使用 apache mod_php 的方式大致相同。

我使用以下内容：

```
pm.max_children = 250
pm.start_servers = 20
pm.min_spare_servers =10
pm.max_spare_servers = 20
pm.max_requests = 1500 
```

这是一个 2GB 内存的服务器。它每天提供 20-30GB 流量，没有 502

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:23:48.340

我在以 fastCGI 模式运行 iis 和 php 的 Windows 机器上遇到过这个问题，所以这不仅仅是一个 nix 问题。

罪魁祸首也是 php 日志记录。您不必将其设置为静态目录，但如果您授予适当的权限，它可以写入脚本所在的同一目录。（如果您有一个庞大而复杂的站点，这将非常有帮助）

我的服务器是这样设置的，我只是添加了一条不向公众提供错误日志的规则。

总而言之，检查权限！=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T04:53:47.963

我有一个类似的问题，可以通过禁用 PHP 警告来解决，但是，我认为这个问题与错误日志记录使用的缓冲区的 NGINX 配置有关。该错误仅在一定数量的警告消息排队后触发，并且似乎是可以预见的可重复的；但我无法弄清楚涉及哪些设置，所以在我可以解决损坏的设置之前关闭警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T11:30:02.820

如果上述步骤不能帮助您解决问题，请检查您是否启用了加速器。

通过禁用 php.ini 或 php.d/eaccelerator.ini 中的 load .so 条目来全局禁用它

所有的问题都没有了。似乎加速器在某些情况下与 php-fpm 结合使用会失败。

# php - 需要帮助来设计工作流系统

> ID：10540837
> 
> 赞同：-3
> 
> 时间：2012-05-10T19:23:30.267
> 
> 标签：php, workflow, desktop-application, business-process-management

我计划开发一个基于 Web 的工作流程系统，该系统还为工作流程创建和表单构建器提供不同实体的拖放选项。主要是我在寻找 PHP 的解决方案，但如果不能，那么我可以使用 Java。

我得到了一些关于 ezComponnts 的信息，但我还需要一个可视化，像[这样](http://www.dailymotion.com/video/xbuiry_free-workflow-with-flowmind-org-qui_tech)的东西，所以我想知道什么对我来说是最好的选择？ezComponnt 在编程上看起来不错，无论如何我可以在其中集成可视界面和表单构建器吗？或者我将可视化构建器制作为桌面程序，然后将整个工作流程导出到某个 TextFile 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:51:24.970

查看[ProcessMaker](http://processmaker.com "工艺制造商")，它可以满足您的大部分要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:30:09.697

[WSO2 Business Process Server](http://wso2.com/products/business-process-server)提供了一个完整的基于 Web 的图形控制台来部署、管理和查看流程。它由 Apache Orchestration Director Engine (ODE) BPEL 引擎提供支持。

最新的快照分发可在[http://wso2.org/bamboo/browse/WSO2CARBON-PRODUCTS-235/artifact/JOB1/BPS获得](http://wso2.org/bamboo/browse/WSO2CARBON-PRODUCTS-235/artifact/JOB1/BPS)

[WSO2 Developer Studio](http://wso2.com/products/developer-studio)提供了基于 Eclipse 的开发环境，用于在 BPS 引擎上开发可部署的工件。

# php - 分层选择人口jQuery / PHP

> ID：10540839
> 
> 赞同：0
> 
> 时间：2012-05-10T19:23:32.730
> 
> 标签：php, jquery, mysql, html, ajax

我在 HTML 中有 3 个选择框，请参阅此[演示](http://jsfiddle.net/VJtYg/)。

应该发生什么：当单击第一个选项中的一个`<select>`时，应将数据`<select>`从数据库加载到第二个选项中。当一个人点击第二个中的数据时`<select>`，第三个`<select>`应该填充来自数据库的更多数据。

**简单的问题**

以分层方式存储和加载数据的最佳和最简单的方法是什么。像[树视图](http://www.codeproject.com/KB/tree/Generic_Tree_View/GenericTreeView.JPG)，但有`<select>`元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:27:17.597

看看这个[教程](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:29:35.083

使用 ajax，您可以将我们附加到您选择的 php 选项中。

```
$.post('thephp.php',{parameter,value},function(data) {
    $('selectid').append(data);
} 
```

或者您可以使用 json 并以这种方式添加。

# javascript - 显示禁用按钮的弹出框

> ID：10540841
> 
> 赞同：1
> 
> 时间：2012-05-10T19:23:38.207
> 
> 标签：javascript, html, forms, twitter-bootstrap

我有一个使用 twitter bootstrap js 和 css 的表单。在我的表单中存在两个按钮。一键提交表单并将用户发送到某个地方。另一个按钮显示一个弹出对话框。

我需要第二个按钮不可点击但显示弹出框。

当我完全禁用按钮时，不会显示弹出框，当我不禁用按钮时，它会转到表单的操作页面。我怎样才能解决这个问题？

[http://jsfiddle.net/wnTUV/6/](http://jsfiddle.net/wnTUV/6/)

```
<form class="well span3" action="/gosomeplace/" method="post">

    <div class="span3">

        <button type="submit" class="btn btn-info btn-large" href="gosomeplace/">
        <i class="icon-user icon-white"></i>
        Go now
    </button>
    </div>

    <div class="span3">
    <button class="btn disabled" rel="popover"
            title="Some title"
            data-content="Some content"
        >
        <i class="icon-question-sign"></i>
    </button>
        </div>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:34:57.483

您是否尝试过使用 onclick 并返回 false，或者这是否也会阻止弹出窗口？您需要保持该按钮处于启用状态，但这应该会阻止它提交表单。

```
<button onclick="return false;" class="btn disabled" rel="popover"
        title="Some title"
        data-content="Some content"> 
```

[如何防止按钮提交表单](https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T09:53:07.000

您可以通过跨度添加包装按钮，并添加 `style="display: inline-block;"`到此跨度。以下是一个例子。

```
<span style="display: inline-block;" popover="XXX" popover-trigger="mouseenter">
<button class="disabled">确定</button>
</span> 
```

# c - Linux 堆结构和 malloc() 和 free() 的行为

> ID：10540845
> 
> 赞同：5
> 
> 时间：2012-05-10T19:24:08.377
> 
> 标签：c, linux, memory-management, gdb, heap-memory

我有一个带有 Linux 2.6 内核的 D​​ebian，我试图了解堆是如何工作/行为`malloc()`的`free()`。我试图搜索算法`malloc()`和`free()`堆结构，但找不到任何有用的东西。不幸的是，我对 Linux 和内存如何工作的了解太少，无法理解`free()`和`malloc()`.

这是一个示例代码：

```
int main(int argc, char **argv)
{
    char *a, *b, *c;

    a = malloc(32);
    b = malloc(32);
    c = malloc(32);

    strcpy(a, argv[1]);
    strcpy(b, argv[2]);
    strcpy(c, argv[3]);

    free(c);
    free(b);
    free(a);
} 
```

有了`gdb`，`run AAAA BBBB CCCC`我可以检查堆。这是 之后`strcpys`但之前的状态`frees`：

```
(gdb) x/32x 0x804c000
0x804c000:  0x00000000  0x00000029  0x41414141  0x00000000
0x804c010:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c020:  0x00000000  0x00000000  0x00000000  0x00000029
0x804c030:  0x42424242  0x00000000  0x00000000  0x00000000
0x804c040:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c050:  0x00000000  0x00000029  0x43434343  0x00000000
0x804c060:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c070:  0x00000000  0x00000000  0x00000000  0x00000f89 
```

您可以很好地看到 char 数组。然后我试图弄清楚为什么会有**0x29**（12 月 41 日）。我希望像**0x20**（12 月 32 日）或**0x24**（12 月 36 日）这样的东西。

*   为什么malloc算法会*浪费*这个空间？
*   如何确定它是0x29？
*   最后的**0xf89**代表什么？
*   程序如何跟踪分配的内容和免费的内容？

特别是我想了解它是如何`free()`工作的。在三个释放之后，堆看起来像这样：

```
(gdb) x/32x 0x804c000
0x804c000:  0x00000000  0x00000029  0x0804c028  0x00000000
0x804c010:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c020:  0x00000000  0x00000000  0x00000000  0x00000029
0x804c030:  0x0804c050  0x00000000  0x00000000  0x00000000
0x804c040:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c050:  0x00000000  0x00000029  0x00000000  0x00000000
0x804c060:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c070:  0x00000000  0x00000000  0x00000000  0x00000f89 
```

*   为什么用这个特定的地址替换 char 数组？
*   free 的伪代码是什么？

看这个例子：

```
(gdb) run AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDDDD BBBB CCCC
...
(gdb) x/32x 0x804c000
0x804c000:  0x00000000  0x00000029  0x41414141  0x41414141
0x804c010:  0x41414141  0x41414141  0x41414141  0x41414141
0x804c020:  0x41414141  0x41414141  0x44444444  0x00000044
0x804c030:  0x42424242  0x00000000  0x00000000  0x00000000
0x804c040:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c050:  0x00000000  0x00000029  0x43434343  0x00000000
0x804c060:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c070:  0x00000000  0x00000000  0x00000000  0x00000f89
...
(gdb) c
Program exited with code 021. 
```

我已经覆盖了0x29，但程序正常退出。但是当我添加另一个字节时，我遇到了分段错误：

```
(gdb) run AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDDDD BBBB CCCC
...
(gdb) x/32x 0x804c000
0x804c000:  0x00000000  0x00000029  0x41414141  0x41414141
0x804c010:  0x41414141  0x41414141  0x41414141  0x41414141
0x804c020:  0x41414141  0x41414141  0x44444444  0x00004444
0x804c030:  0x42424242  0x00000000  0x00000000  0x00000000
0x804c040:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c050:  0x00000000  0x00000029  0x43434343  0x00000000
0x804c060:  0x00000000  0x00000000  0x00000000  0x00000000
0x804c070:  0x00000000  0x00000000  0x00000000  0x00000f89
...
(gdb) c
Program received signal SIGSEGV, Segmentation fault.
0x080498b9 in free (mem=0x804c030) at common/malloc.c:3631 
```

对我来说最重要的问题是：

*   为什么在`free()`覆盖更多字节时会出现分段错误？
*   该算法是如何`free()`工作的？
*   malloc 和 free 如何跟踪地址？

非常感谢您的阅读，亲切的问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T19:36:04.347

大多数`malloc()`实现通过在分配的内存块之前和/或之后跟踪堆本身内的堆状态来工作。超出分配的块会导致此数据损坏——其中一些数据可能包括指针或长度，损坏这些数据会导致实现尝试访问无效的内存位置。

实现如何工作的细节`malloc()`取决于您使用的系统和 libc。如果您使用的是 glibc（如果您使用的是 Linux，则很可能），这里有一个很好的解释它是如何工作的：

[http://gee.cs.oswego.edu/dl/html/malloc.html](http://gee.cs.oswego.edu/dl/html/malloc.html)

假设是这种情况，`0x29`您看到的可能是块大小 (32 = `0x20`) 和一些标志的按位或。这是可能的，因为所有堆分配都四舍五入到最接近的 16 个字节（或更多！），因此始终可以假定大小的低 8 位为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:36:48.720

我不知道具体的细节。但总的来说，它是这样工作的：

较大`malloc()`的 s 通过 处理`mmap()`，因此我们专注于较小的。有一个限制可以设置阈值。

较小`malloc()`的 s 在数据段的末尾处理。这可以由 glibc 使用系统调用`brk()`和`sbrk()`.

在你`malloc()`一个内存块之后，必须保持它以便知道在`free()`调用时要释放多少，并且必须保持指向下一个块的指针以便找到它们并将它们链接在一起。

在结束`free()`一个内存块之后，数据段被减少`sbrk()`。在`free()`ing 一个不在末尾的块之后，该块被添加到空闲列表中。这是一个空闲内存块的链表，以便重用它们。

`0x29`, which is `41`, is the memory block size you allocated plus a bit of memory to hold the said fields (size and next pointer), which needs 8 bytes. What the 9th is for, I don't know, but it might be that it has to do with alignment.

If you write more than the "promised" 32 bytes, you destroy this linked list and the pointer associated with it. Therefore, `free()` has wrong data which it trusts and tries to write at an unallowed place, which leads to `SIGSEGV`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:36:37.950

*当您覆盖更多字节时，为什么会在 free() 中出现分段错误？*

一旦你通过了你要求的空间的尽头，你在技术上调用了*未定义的行为*，所以一切皆有可能。最终，您将破坏内部数据结构中的指针或大小字段，并且这种损坏可能会或可能不会导致引用狂野到足以引用不存在的整个页面。

也就是说，分段错误是页面保护的结果。这可以很好地保护一个完整的程序免受另一个不相关的程序的影响，并且是操作系统用来限制对单个用户模式地址空间的破坏的工具。这种机制与内部数据结构没有紧密同步。有效指针和有效页面之间存在粗略的对应关系，但并不准确。

*free() 算法是如何工作的？*

当 malloc() 返回一个块时，会创建一个内部数据结构，以便当该确切块被传递给 free() 时，它将被识别并链接到一个空闲列表中。如果可能，它将与相邻的空闲块合并。

*malloc 和 free 如何跟踪地址？*

由于您正在运行 Linux，因此源代码是可用的，阅读它自然会得到最准确的答案。但是，一般的答案*是保留一个目录。* 这个目录可能是一个单独的数据结构，也可能是一个链表的形式，元数据保存在返回的实际地址的前面。

*为什么会浪费空间？*

它并没有完全浪费。一些空间可能用于目录，而另一些空间可以通过保持块在缓存边界上对齐来换取性能。对大小与高速缓存行相等或可能更小的小块进行映像。如果此块与高速缓存行边界重叠，则将其保留在高速缓存中将需要两倍的空间。如果这种情况发生在任何地方，缓存实际上将是一半大小并且命中率更低。（嗯，除了实际需要相邻地址的情况。）使用更大的块也将导致更少的[*内部碎片*](http://en.wikipedia.org/wiki/Internal_fragmentation#Internal_fragmentation)，这实际上可能在 malloc() 和 free() 调用平衡的稳态中使用更少的内存一个长期运行的过程。

# app-store - 验证 iPhone 应用程序存档

> ID：10540848
> 
> 赞同：4
> 
> 时间：2012-05-10T19:24:24.803
> 
> 标签：app-store, xcode4.3, armv7, entitlements

尝试将应用程序发送到 Apple 的 App Store。Xcode 4.3.2。已通过 testflightapp 成功将应用程序发送给用户，现在想将其发送到商店。当我尝试通过管理器分发应用程序时，我收到以下三个验证错误：

*   iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。必须至少存在以下架构之一：armv6
*   应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。
*   无法从应用程序中提取权利：（null）

我想我应该自下而上地工作，因为当我开始着手解决这个问题时，我只遇到了第一个错误，而且从我阅读的所有内容来看，提交到应用商店时不需要权利。

我有一个 Entitlements.plist。我尝试将其删除。我试过用它创造新鲜的。Targets->App->Summary 的 Entitlements 部分未选中/清除。Targets->App->Build Settings->Deployment 部分确实为安装所有者/组以及备用安装所有者/组列出了“Entitlements.plist”。我已将这些重置为一组“员工”和“pedstrom”的所有者。

我已经尝试过像这样的说明：[必须至少存在以下架构之一：armv7 (-19033) 无法验证您的应用程序。- (null)](https://stackoverflow.com/questions/10152382/at-least-one-of-the-following-architectures-must-be-present-armv7-19033-un)无济于事。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:45:50.077

您的问题可能是由于 Build Variants 构建设置的设置无效。有效设置是**normal**、**profile**和**debug**。提交到应用商店，这个设置应该是**normal**。

以下是解决此问题的方法：

首先更新项目构建设置：

*   单击项目 -> `<your project>`-> 构建设置
*   搜索“构建变体”
*   单击搜索结果中构建变体旁边的箭头图标以展开该部分
*   删除任何现有条目并将其替换为**普通条目**

接下来更新目标构建设置：

*   单击目标 -> `<your project>`-> 构建设置
*   搜索“构建变体”
*   单击搜索结果中构建变体旁边的箭头图标以展开该部分
*   删除任何现有条目并将其替换为**普通条目**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T22:06:20.523

由于几个不同的原因，我遇到了这个问题，并且发现在实际提交之前使用管理器中的验证功能特别有用。它可以为您提供有关上传失败错误中可能未包含的错误的线索。

# c# - 泛型类等于限制输入参数和对象具有相同类型 T 的方法

> ID：10540854
> 
> 赞同：2
> 
> 时间：2012-05-10T19:25:31.443
> 
> 标签：c#

以下 [c#] 代码将无法编译，并出现错误“运算符 == 不能应用于 'T' 和 'T' 类型的操作数”。

```
public class Widget<T> where T: IComparable
{
    public T value;
    public Widget(T input) { value = input; }
    public bool Equals<T>(Widget<T> w) where T : System.IComparable
    {
        return (w.value == value);
    }
} 
```

有没有办法将 w 输入参数的类型 T 限制为与被比较对象相同的类型 T ，从而保证它们可以相互比较并消除编译器错误？在如下值前面使用 (dynamic) 可以编译，但似乎有更好的方法可以在编译时捕获问题：

`public bool Equals<T>(Widget<T> w) where T : System.IComparable { return (w.value == (dynamic) value); }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:29:01.387

假设你*真的*对这里的价值平等感兴趣，你可以使用[`EqualityComparer.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)：

```
EqualityComparer<T> comparer = EqualityComparer<T>.Default;
return comparer.Equals(w.value, value); 
```

请注意，目前您的`Equals`方法也是通用的，试图声明*另一个*类型参数 T。我认为您并不想这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:29:16.067

```
public class Widget<T> where T: IComparable
{
    public T value;
    public Widget(T input) { value = input; }
    public bool Equals(Widget<T> other)
    {
        if(value == null)
        {
          return other == null || other.Value == null;
        }
        if(other == null) return false; //ensure next line doesn't get null pointer exception
        return value.CompareTo(other.Value) == 0;
    }
} 
```

您可能需要根据您希望它在 、 和为 null 的各种排列下的行为方式来使用 null`value`检查`other`逻辑`other.value`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:34:39.073

这是你想要的吗？

```
public class Widget<T> : IEquatable<Widget<T>>, IComparable<Widget<T>>
    where T : IEquatable<T>, IComparable<T>
{
    public T value;
    public Widget(T input) { value=input; }
    public override bool Equals(object obj)
    {
        if(obj is Widget<T>)
        {
            return Equals(obj as Widget<T>);
        }
        return false;
    }
    public override int GetHashCode()
    {
        return value.GetHashCode();
    }
    public bool Equals(Widget<T> other)
    {
        return value.Equals(other.value);
    }

    public int CompareTo(Widget<T> other)
    {
        return value.CompareTo(other.value);
    }
    public static bool operator==(Widget<T> a, Widget<T> b)
    {
        return a.Equals(b);
    }
    public static bool operator!=(Widget<T> a, Widget<T> b)
    {
        return !a.Equals(b);
    }
    public static bool operator<(Widget<T> a, Widget<T> b)
    {
        return a.CompareTo(b)==-1;
    }
    public static bool operator>(Widget<T> a, Widget<T> b)
    {
        return a.CompareTo(b)==1;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Widget<int> a=new Widget<int>(100);
        Widget<int> b=new Widget<int>(200);

        if(a==b||a>b)
        {
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:52:05.323

```
public class Widget<T> where T: IEquatable<T>
{
    public T value;
    public Widget(T input) { value = input; }
    public bool Equals(Widget<T> w)
    {
        return (w.value.Equals(this.value));
    }
} 
```

如果您需要*相等*比较，那么您应该使用`IEquatable`. `IComparable`更适合您还需要顺序比较（小于，大于）。

我认为您的主要错误是您在`Equals<T>`方法中引入了新的类型参数。不; 相反，让`T`参数`Widget<T>`中的 与实例化类的类型相同。这保证`w.Value`了 与 的类型相同`this.value`。

# c# - 格式化字符串 - 货币价值

> ID：10540856
> 
> 赞同：2
> 
> 时间：2012-05-10T19:25:42.260
> 
> 标签：c#, string-formatting

我正在尝试将我的格式`double`设置为美元货币格式，但`00`如果值是一个整数，我不希望尾随 's。

我试过了

```
String.Format("{0:#,0.#0}", cost); 
```

和

```
String.Format("{0:#,0.##}", cost); 
```

前者让我落后`00`于整数，后者会给我`55.6`我想要的地方`55.60`。如何格式化我的值以满足这两个需求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:30:01.543

尝试这样的事情：

```
var output = string.Format(((Math.Round(num) == num) ? "{0:0}" : "{0:0.00}"), num); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:27:56.343

我认为使用标准格式字符串是不可能的，但一个技巧是：

```
Regex.Replace(String.Format("{0:#,##0.00}", cost),"\\.00$",""); 
```

或者：

```
string s = String.Format("{0:#,##0.00}", cost);

if (s.EndsWith(".00"))
   s = s.Substring(0,s.Length-3); 
```

我知道，这很丑...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T20:17:12.360

尝试

```
string val = decimal.Parse("2.00").ToString("G29")

?decimal.Parse("2.00").ToString("G29")
"2"
?decimal.Parse("2.02").ToString("G29")
"2.02"
?decimal.Parse("12.0045").ToString("G29")
"12.0045"
?decimal.Parse("0.0045").ToString("G29")
"0.0045"
?decimal.Parse("0.00").ToString("G29")
"0"
?decimal.Parse("0.05").ToString("G29")
"0.05" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T20:30:03.603

您可以通过调用来使用[货币（“C”）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#CFormatString)`ToString`。无需实际工作。

例子

```
string s = cost.ToString("C0"); // Where 0 is the precision 
```

您不能在单个调用中执行任何有条件的操作，例如省略精度显示，但您可以通过一些扩展方法来完成。

```
static class CurrencyExtensions
{
    public static String ToCurrency(this decimal d) { // Extend Decimal
        if (d % 1 != 0) return d.ToString("C2");
        return d.ToString("C0");
    }

    public static String ToCurrency(this double d) { // Extend Double
        if (d % 1 != 0) return d.ToString("C2");
        return d.ToString("C0");
    }
} 
```

示例用法

```
decimal amount1 = 4m;
decimal amount2 = 4.25m;

string s1 = amount1.ToCurrency(); // $4
string s2 = amount2.ToCurrency(); // $4.25 
```

与其他方式相比，这样做的优势在于它可以为您处理文化信息，并且是一种更优雅的解决方案。

# c# - C# 行选择器？

> ID：10540857
> 
> 赞同：0
> 
> 时间：2012-05-10T19:25:45.737
> 
> 标签：c#, .net, winforms, custom-controls

我有一个应用程序，用户需要选择某一行来开始解析操作。我的想法是有一个简单的滚动列表，用户可以在其中选择他们想要的行，当单击它时，列表将关闭并关闭程序。

我想自定义代码控件，使其看起来尽可能像一个普通的文本框，但突出显示用户当前正在选择的行（并在单击时返回行号）。

当然我不只是想要这个代码，这是我需要学习做的事情；但是有什么好的资源可以帮助我创建这个新控件吗？尤其是需要的垂直滚动条（文本可能长达数百行）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T19:33:00.933

与其创建您自己的自定义控件，不如直接使用列表框来存储您的潜在用户想要选择的所有信息。您正在寻找的所有功能都已内置在控件中。如果我遗漏了什么，请进一步解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:39:23.800

您可以（理论上）通过在 SelectionStart （插入符号位置）上拆分来重用任何 *TextBox 控件，这将为您提供第一个 CRLF 的索引（第一个子字符串中的 LastIndexOf）并通过将选择长度设置到下一个来选择整行（IndexOf在第二个子字符串中）。但如前所述——标准的 ListBox 是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:33:48.243

这是静态文本区域还是基于某些用户输入或复制/粘贴操作？我问是因为您可能会遇到一些潜在的包装问题，并且您仍然必须处理 < IE8 无法正确处理 SelectionStart。

虽然不完全优雅，但您可以根据换行符拆分文本并使用一系列 span/div 标签作为内容或（不寒而栗）一个表格，您可以在其中使用 jQuery 抓取最近的 DOM 元素以获得特定的行偏移量. 我认为 textarea 不会成为您想要做的事情的最佳方法，因为它对于那种块级别的选择确实不是最佳的。

# javascript - 样式化内容可编辑列表 ( ) 带有字体系列、字体大小和颜色

> ID：10540862
> 
> 赞同：8
> 
> 时间：2012-05-10T19:25:57.503
> 
> 标签：javascript, css, html, contenteditable

我正在寻找一种样式列表的方法，以便他们在 contentEditable 元素中编辑时使用用户设置的格式。具体来说，我希望能够以与其他`<li>`内容相同的方式设置数字/项目符号的样式。

从我所做的测试来看，浏览器从不 `<li>`直接设置标签的样式（实际上控制数字/项目符号的样式），但总是将`<font>`标签（或`<span>`if `StyleWithCSS`）作为第一个子节点，使用它进行格式化。我已经尝试了一些想法来解决这个问题，但没有成功：

## 1\. 以`<li>`编程方式将样式应用于

在这里，我尝试侦听“DOMNodeInserted”，当`<li>`标签插入 DOM 时，我查询当前`fontName`的`fontSize`、 和`foreColor`命令，并将它们作为内联样式应用到`<li>`.

```
textarea.addEventListener('DOMNodeInserted', function (evt) {
    if (evt.target.nodeName === 'LI') {
        evt.target.style.color = queryCommandValue('foreColor');
        evt.target.style.fontFamily = queryCommandValue('fontName');
        evt.target.style.fontSize = queryCommandValue('fontSize');
    }
}, false); 
```

即使这样做，一旦您开始输入列表项，浏览器就会尝试“智能”并从 中删除样式`<li>`，将它们放入`<font>`（或`<span>`）标记中。:(

## 2\. 为要插入样式表的样式创建规则

基于上面的尝试，我没有编写内联样式，而是为它们创建了一个规则，给`<li>`节点一个 ID，并将规则插入到样式表中。现在规则将管理 的样式`<li>`，我可以使用 CSSOM 不断更新任何特定`<li>`的样式。

这似乎工作得很好（需要解决一些错误），但是，它完全破坏了 contentEditable 撤消堆栈。由于撤消命令仅`textContent`与其他格式化命令相关联，因此无法“撤消”您在样式表中设置的样式。（至少不是很直观，我已经想过如何做到这一点......）

## 3\. 观察`<li>`'s 属性的变化并保留它们

对于这次尝试，我使用了 DOM 级别 4 中新可用的 MutationObserver [http://www.w3.org/TR/dom/#mutationobserver](http://www.w3.org/TR/dom/#mutationobserve)。这个观察者可以观察节点属性的变化，这些变化将被传递回到 MutationRecord 中。它甚至可以保存以前的属性值，包括`style`值，所以我可以找出被删除的内容并重新应用它。

```
var observer = new WebKitMutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.target.nodeName === 'LI') {
            ...
        }
    })
});

observer.observe(document, {
    attributes: true,
    subtree: true,
    attributeOldValue: true
}); 
```

这仍然受到缺乏撤消支持的影响。您将撤消其他格式更改，但`<li>`s 将保留其样式。

有什么新奇的想法吗？仅限现代浏览器的解决方案也受到欢迎。我知道我可以格式化自己的 HTML 以用于列表，但我试图看看这是否可以使用标准`insertOrderedList`和`insertUnorderedList`使用真实列表标签的命令来完成。

## ** 2012 年 11 月 7 日更新 **

看起来还没有人解决这个问题，这里有一个 JSFiddle 示例，看看我在描述什么：http: [//jsfiddle.net/8LyZR/](http://jsfiddle.net/8LyZR/)。只需尝试更改项目符号列表或编号列表的样式。

对于我正在进行的项目，我们使用的是自己构建的 WebKit，因此我们能够通过本机更改来解决此问题，但我希望有一种方法（或将有一种方法）直接使用 HTML/ CSS/JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:41:30.637

这里有一些有趣的 CSS 技巧。[http://jsfiddle.net/GZ3cv/](http://jsfiddle.net/GZ3cv/)

它基本上依赖于在内联标签上放置一个伪元素`:before`（这将继承样式），然后尝试将其放置在原始列表项目符号/编号的顶部。

我无法决定是否将其称为解决方案，因为嵌套/内联标签（字体、u、b、span、i）的所有不同组合可能会变得不切实际。

但只是玩弄字体、大小、颜色和列表类型控件，它似乎可以通过一些明显的彻底调整来模仿你正在寻找的东西。

我很好奇这种技术是合理的还是荒谬的:)把它扔在那里..

# php - 使用 .htaccess 文件进行 url 重写时出现错误 500？

> ID：10540869
> 
> 赞同：0
> 
> 时间：2012-05-10T19:26:10.950
> 
> 标签：php, .htaccess

假设我有一个网站 www.mywebsite.com。我的 Web 目录中有几个页面，这些页面都带有 .htm 扩展名。唯一带有 .php 扩展名的页面是索引文件。显然在每一页的菜单中，都有一个指向我的“index.php”的链接。因此，每当我从网站上的任何其他页面转到主页时，它都会在地址栏中显示“www.mywebsite.com/index.php”。我希望它只显示为“http://www.mywebsite.com/”而不是“http://www.mywebsite.com/index.php”。如何使用 .htaccess 文件来做到这一点。我需要一个简单而安全的方法来做到这一点。我搜索了谷歌，但是有很多复杂的东西要理解和解决这个小问题，当我尝试其中的几个（mod rewrite）时，我总是得到错误 500。

这是我的 .htaccess 文件的结构：

```
Options All -Indexes

<Files /scripts/proc_enq.php>
Order Allow,Deny
Deny from all
Allow from 127.0.0.1
</Files> 
```

# php - 如何将 JQuery 应用于 PHP 生成的 HTML？

> ID：10540872
> 
> 赞同：1
> 
> 时间：2012-05-10T19:26:22.573
> 
> 标签：php, jquery, ajax

我有一个生成 HTML 元素的 PHP 文件，并在页面加载时从 AJAX 调用。我要做的是将 JQuery 应用于动态生成的元素，因此每次单击从 PHP 文件生成的标签时，都会发生一些事情。我尝试将 JQuery 代码放在 PHP 文件中并将其回显，但这不起作用，我还将代码放在调用 AJAX 的 HTML 页面中，但这也不起作用。

在我的 HTML 中，我有：

```
<body onLoad="javascript:getLabels();">, 
```

这通过 AJAX 调用 php 文件：

```
function getComments() { 
    var thePage ='loadLabels.php'; 
    ... 
```

PHP文件作为行：

```
echo '<label id="labellink" class="ldClass">Label </label>'; 
```

一旦加载，页面中的标签可能不止一个，但它们都在一个标签中`<form>`，所以我需要使用 JQuery，所以一旦加载了标签并单击它们，我就可以做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:38:56.910

`.on()`([文档](http://api.jquery.com/on/)）提供了一种为动态元素创建处理程序的方法，在创建处理程序时可能不一定存在。

要使用`.on()`，您需要将处理程序附加到 DOM 树中更高的非动态对象。点击将从子元素向上传播，此时附加的处理程序（委托）`.on()`将使用提供的过滤器来查看点击是否源自正确的对象（这将是您的动态对象）。

```
$('body').on('click', '.dynamic_element', function() {
   // Handler code
}); 
```

在这种情况下，我使用`body`了 ，因为它不会消失并随身携带处理程序。您可以将处理程序附加到任何作为其祖先的对象`.dynamic_element`只要它是静态元素。通常更接近更好，但如果您的页面非常动态，`body`则可以使用。

背后的整个想法`.on()`是处理程序必须附加到现有的 DOM 元素。如果对象尚不存在，则无法将处理程序附加到它，并且如果您的元素被删除，则处理程序也会被删除。这就是为什么`$('.dynamic_element').click()`不起作用，除非`.dynamic_element`已经存在。因此，使用`.on()`，我们只是将处理程序附加到我们知道*确实*存在（并且不会消失）的东西上。此处理程序称为“委托”。它监视来自其子对象的事件，这些事件根据 DOM 元素的性质沿树向上传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:30:30.403

~~你想要的是 jQuery “live” [http://api.jquery.com/live/](http://api.jquery.com/live/)~~

编辑：您希望 .on() 在较新版本的 jQuery 中，因为 .live() 已被贬值：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

有关更多信息，请参阅下面的评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T19:44:46.777

有两种方法可以实现您想要的。

1：将事件附加到 AJAX 调用的 onSuccess 内的链接以检索内容。这样，当新内容添加到 DOM 时，您会将必要的事件附加到这些特定元素。

2：推荐的解决方案是使用事件委托。基本上，不是将事件附加到特定元素，而是将单个事件附加到父元素容器，并且当事件被触发时，它基于调节单击的目标（如果它本身具有特定的类）执行特定的行动。这是一种用于处理流动/可变内容的技术，无需将事件重新附加到特定元素。jQuery 的 .on() API 方法优雅地提供了这样的解决方案：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

例如：

```
$("#container").on("a.changeColor", "click", function() {
  $(this).toggleClass("newColor");
}); 
```

您将事件委托/附加到 id="container" 的父元素，告诉它您希望所有具有“changeColor”类的子锚元素切换“newColor”类。即使在您更新和更改#container 元素的内部内容之后，具有类“changeColor”的新元素仍将继承单击时的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T19:29:51.603

**编辑**谢谢你纠正我。由于它是贬值的，我已经有一段时间没有使用它了。

我确信这更像是一种“破解”而不是解决方案，如有必要，我将公开欢迎反对票，但您**可以**将后 AJAX 功能放入成功功能中。

此外，旧版本的 jQuery 使用了一个名为的函数，该函数`.live()`将查找一个元素，无论它是否在 DOM 中。它在最新版本的 jQuery 中已被贬低，但如果你愿意实现这一飞跃，我知道它在 1.5 中有效。（我说的是类似的东西`$(a).live('click', function () { });`）。

作为记录，我很乐意将其发布为评论而不是答案，但我还没有足够的街头信誉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T20:07:54.840

Just an example of dynamic created elements and onload bound events

```
var a = $("<a>").attr('href','#')
                .attr('class','elem')
                .text('click me')
                .prependTo('body');
$(document).on("click", "a.elem", function(e){ 
    e.preventDefault();
    alert("Goodbye!"); 
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-10T19:35:25.517

使用 .delegate() 是我用过的最好的方法。

参考 [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# sql - SqlTransaction 多个命令：执行顺序？

> ID：10540879
> 
> 赞同：0
> 
> 时间：2012-05-10T19:27:03.550
> 
> 标签：sql, ado.net, transactions

我正在使用`SqlTransaction`对具有 FK 关系的多个表进行一系列更改。它从通过 ID 删除记录开始，然后转到 foreach 循环以进行插入。如果删除“没有”发生，那么它当然会失败。我已经多次进入它，但我仍然得到这个错误。

> INSERT 语句与 FOREIGN KEY 约束“FK__xxxx_P_ *Reque* _3C69FB99”冲突。冲突发生在数据库“xxxxx”、表“dbo.xxxxx”、列“Request_ID”中。

除非我遗漏了什么，否则这是因为在删除之前尝试插入。是否有我不知道的执行顺序和执行顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:13:42.043

外键冲突表明您正在向子表中插入一行，而父表中的相应行缺失。也就是说，您需要先在父级中插入一行。

它与删除失败无关。

# c# - XNA 益智游戏如何点击鼠标

> ID：10540881
> 
> 赞同：0
> 
> 时间：2012-05-10T19:27:08.360
> 
> 标签：c#, xna, puzzle

我一直在到处搜索，我不知道该怎么做才能使光标能够单击一个图块并将其删除，以便它上面的其他图块可以掉下来。

就此而言，有人知道如何在屏幕上加载随机图块吗？没有关于益智游戏的教程...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:40:25.467

你在问什么，如何使用鼠标点击？如何让瓷砖掉下来？或如何制作随机瓷砖？由于您的标题不适用于鼠标单击。（顺便说一句，为图块制作一个随机列表，然后将它们随机播放，只需谷歌即可）

```
 MouseState ms = Mouse.GetState();
        double x = Math.Floor(((double)ms.X  / (double)TILE WIDTH);
        double y = Math.Floor(((double)ms.Y  / (double)TILE HEIGHT);

            if (ms.RightButton == ButtonState.Pressed)
            {

                //Add tile (tiles[x,y] = whatever, or something like that)

            }
            if (ms.LeftButton == ButtonState.Pressed)
            {
                //And so on...

            } 
```

希望这会有所帮助，另请注意，您可以使其全局化以获得更好的性能。下次尝试进一步澄清您的问题。

# php - 如何从同一页面上的不同 html 页面加载其他内容？

> ID：10540889
> 
> 赞同：-4
> 
> 时间：2012-05-10T19:27:51.917
> 
> 标签：php, jquery, html, ajax

我有这个主页，上面有几个按钮。我想知道如何通过单击按钮将 DIV 的内容与不同 html 页面上的内容相匹配。任何提示都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:29:31.620

假设你有一个 div，你希望你的内容去到哪里。

```
<div id="result"></div>    
<a href="#" id="other">Click Here</a> 
```

然后使用 jQuery ajax`[.load()](http://api.jquery.com/load/)`函数，您可以在另一个页面上获取数据并将 html 发送到 div。

```
$(function() {    
   $("#other").click(function() {
       $('#result').load('ajax/test.html');
   });   
}); 
```

在这种情况下，当用户单击链接时，来自 'ajax/test.html' 的所有 html 将被发送到带有 id 结果的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:35:09.027

欢迎来到堆栈溢出！如果您对常见问题解答不满意，人们在这里可能会有点苛刻。你会一直想要：

1.  告诉我们你尝试了什么
2.  向我们展示您的代码

如果你做这些事情，你会在这里找到一些惊人的帮助（尽管已经被否决了；）。

要回答您的问题，您需要监控对导航元素的点击并在点击时加载页面。您还需要确保*停止按钮的默认操作*。所有这些都可以这样实现：

```
$(document).ready(function() {
  $("#target").click(function(e) {
    $('#result').load('file.html');
    e.preventDefault();
  });
}); 
```

`#target`您的特定按钮 在哪里，`#result`是您的 file.html 加载到的位置（在当前页面上），并`e.preventDefault()`阻止您的按钮执行其他操作（大多数人将此称为劫持）。

# iphone - UITableView 和 NSMutableArray 动态的？

> ID：10540891
> 
> 赞同：0
> 
> 时间：2012-05-10T19:27:55.787
> 
> 标签：iphone, ios5, tableview

我有一个表格视图，用户可以通过按下添加按钮来添加一个单元格（其中包含文本字段）。

我将文本（来自文本字段）写入 NSMutable 数组，并保存在 NSUserdefaults 中。工作正常！

但是当用户选择（例如）第 5 行时，我会切换到一个包含一些文本字段的新视图。

如何将文本字段中的值（文本）添加到新数组中并将其存储在 userdefaults 中？我应该为用户选择的每一行创建一个数组吗？(indexpath.row) 我需要在另一个视图中显示这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:54:31.513

您可以使用 NSMutableDictionary。它看起来像：

```
{
    "rowOne":{"textFieldOne":"DataOne", "textFieldTwo":"DataTwo"},
    "rowTwo":{"textFieldOne":"DataOne", "textFieldTwo":"DataTwo"}
} 
```

要像使用之前一样取出 tableViewCells 数组：tableArray = [dictFromUserDefaults allKeys];

当您需要获取您使用的该行中的字段的数据时

```
dataDictionary = [dictFromUserDefaults objectForKey:[tableArray objectAtIndex:index.row]]; 
```

对于您将使用的每个 textField ：

```
textfieldOne.text = [dataDictionary objectForKey:@"textFieldOne"]; 
```

# javascript - javascript触发器中的onmouseout事件

> ID：10540893
> 
> 赞同：0
> 
> 时间：2012-05-10T19:27:56.763
> 
> 标签：javascript, html

.izberiLokacija 类中的 onmouseout 事件似乎是由 .izberiLokacija 类中的 onmouseout 事件触发的`<li>`。这是Javascript的工作方式还是我做错了什么。如果是这种情况，请建议一个可能的解决方案，仅在离开 div 本身时激活 .izberiLokacija 类中的 onmouseout 事件......

```
<div class="izberiLokacija" onmouseout="alert('asd');toggleDivZaMalaMapa(2);">
          <ul>
                    <li onmouseover="toggleDivZaMalaMapa(1);">li1</li>
                    <li onmouseover="toggleDivZaMalaMapa(1);" style="border-top: solid 2px #00699B"> li2 </li>
          </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:33:57.250

这就是 JavaScript 的工作方式。要么在每个上放置一个处理程序`<li>`以防止冒泡（使用`event.stopPropagation()`或通过返回`false`），或者测试`event.target`你是否希望它在你的`.izberiLokacija`处理程序中。阅读有关事件冒泡的更多信息，这应该可以消除混乱。

另一种方法是将`onmouseout`/`onmouseover`替换为`onmouseleave`/ `onmouseenter`。它们几乎是同一事件，但后一对不会冒泡。

题外话：如果你从`alert`到，你会更快乐`console.log`；此外，内联 JavaScript 也很难使用；考虑分离你的 JS 和 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:41:44.740

每次你将鼠标悬停在一个元素上......“悬停”事件都会触发。事件也会在 DOM 树中冒泡，并为它的每个父级触发……一直到 body 标记。

请不要内联分配事件......这使得难以维护代码和臃肿的非语义标记。

相反，试试这个（使用 jQuery ......因为每个人都使用 jQuery，对吗？）

[http://jsfiddle.net/ryanwheale/fab8Z/](http://jsfiddle.net/ryanwheale/fab8Z/)

# java - 需要android socket编程的建议

> ID：10540897
> 
> 赞同：0
> 
> 时间：2012-05-10T19:28:42.120
> 
> 标签：java, android, sockets, port

我们正在开发一个通过 wifi 发送和接收短信的安卓应用程序。我们使用 TCP 套接字进行此通信（IP 地址和随机端口），但问题是如果我不允许路由器的“端口转发部分”中的这些端口号，则无法发送消息。有没有办法摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:14:36.567

您可以从选定范围内随机选择端口并在路由器中转发该范围，如下所示：

int 端口 = (Math.abs(random.nextInt())) % 3000 + 1024;

这样我就生成了一个介于 1024 和 2999 之间的随机数。或者只是选择一个固定端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:29:06.913

如果两个客户端都在不同的限制性防火墙后面，您应该研究打孔，其中两个客户端都打开与第三台服务器的连接，然后第三台服务器预测在 NAT 上打开的端口：[NAT traversal with Java](https://stackoverflow.com/questions/2116403/nat-traversal-with-java) , [https://stackoverflow.com /questions/917385/nat-traversal-with-java/](https://stackoverflow.com/questions/917385/nat-traversal-with-java/)。请注意，正如您在此处所描述的，这通常是 P2P 应用程序（即客户端到客户端）所需要的。是的，它非常复杂和讨厌:(

您最好使用 Amazon Cloud Services 之类的东西将消息存储在云中，并使用基于推送的机制来通知对方收到消息，也许使用长轮询 HTTP。

# node.js - 套接字挂在 dnode

> ID：10540898
> 
> 赞同：1
> 
> 时间：2012-05-10T19:28:51.200
> 
> 标签：node.js, socket.io, dnode

我已经使用 dnode 开发了客户端/服务器双向通信。
当客户端连接到服务器时，我会保持连接，以便服务器可以在需要时使用此连接调用客户端上的方法。
有时连接似乎变得不活跃，然后我需要手动重新启动客户端。连接是否可以通过某些特定选项保持活动状态？（我虽然每 3 秒重新连接一次就可以解决问题，但似乎并非如此）。

服务器就像

```
dnode(function (remote, conn) {

  conn.on('connect', function (){     // THIS METHOD IS NEVER CALLED !!! I DON'T KNOW WHY
    console.log("connection");
  });

  // Connection starts
  conn.on('ready', function () {
      // Keep remote in a hash for later usage
      ...
  });

  // Connection ends
  conn.on('end', function(){
     // Remove remote object from hash
     ...
  });

}).listen(5000); 
```

客户端：

```
// Define client functions
dnode(function (remote, conn) {
    // Ping
    this.ping = function (cb) {
        cb("pong");
    };

    // Other functions
    ...
}).connect(server, port, {'reconnect': 3000}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:38:08.233

听起来您可以使用[upnode 来做](https://github.com/substack/upnode)，它会自动为您缓冲命令并重新连接丢弃的 dnode 连接。

我不认为该`connect`事件会被触发，因为您在内部设置的函数*是*dnode 的“连接时”处理程序。

您可能还想查看我的[enode](https://github.com/timoxley/enode)库，它捆绑了 upnode 功能和 IMO，使 dnode api 更加直观。它还维护一个活动连接列表，更好地处理错误对象并简化断开和关闭。

# jquery - asp.net mvc 3 razor 文件上传

> ID：10540901
> 
> 赞同：3
> 
> 时间：2012-05-10T19:29:04.953
> 
> 标签：jquery, asp.net-mvc-3, file-upload, razor

这是使用 asp.net mvc3 razor 上传单个文件并使用 jquery 验证的最佳方法。

我只需要用户上传 jpg，png 小于 5 mb。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T20:05:24.047

您需要使用 javascript 进行验证，这是一个示例

```
function onSelect(e) {
    if (e.files[0].size > 256000) {
        alert('The file size is too large for upload');
        e.preventDefault();
        return false;
    }
    // Array with information about the uploaded files
    var files = e.files;
    var ext = $('#logo').val().split('.').pop().toLowerCase();
    if ($.inArray(ext, ['gif', 'jpeg', 'jpg', 'png', 'tif', 'pdf']) == -1) {
        alert('This type of file is restricted from being uploaded due to security reasons');
        e.preventDefault();
        return false;
    } 
    return true;
} 
```

这表示文件不得大于 256K，并且只允许 gif、jpg、jpeg、tif、png 和 pdf。只需将 256000 更改为 5000000 和您的特定文件类型

我在 MVC 3 中使用 Telerik 上传控件在剃刀视图中使用它。您也可以使用标准上传输入，只需在选择时或提交之前触发此事件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T21:44:56.947

除了 jQuery 验证（非常好的 Acid 的回答），您还应该进行服务器验证。这是一些简单的例子：

**看法：**

```
@if (TempData["imageUploadFailure"] != null)
{
    @* Here some jQuery popup for example *@
}

@using (Html.BeginForm("ImageUpload", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{                  
    <legend>Add Image</legend>

    <label>Image</label>
    <input name="image" type="file" value=""/>
    <br/>

    <input type="submit" value="Send"/>
} 
```

**控制器：**

```
public ActionResult ImageUpload()
{
    return View();
}

[HttpPost]
public ActionResult ImageUpload(HttpPostedFileBase image)
{
    var result = ImageUtility.SaveImage("/Content/Images/", 1000000, "jpg,png", image, HttpContext.Server);

    if (!result.Success)
    {
        var builder = new StringBuilder();
        result.Errors.ForEach(e => builder.AppendLine(e));

        TempData.Add("imageUploadFailure", builder.ToString());
    }

    return RedirectToAction("ImageUpload");
} 
```

**ImageUtility 助手类：**

```
public static class ImageUtility
{
    public static SaveImageResult SaveImage(string path, int maxSize, string allowedExtensions,  HttpPostedFileBase image, HttpServerUtilityBase server)
    {
        var result = new SaveImageResult { Success = false };

        if (image == null || image.ContentLength == 0)
        {
            result.Errors.Add("There was problem with sending image.");
            return result;
        }

        // Check image size
        if (image.ContentLength > maxSize)
            result.Errors.Add("Image is too big.");

        // Check image extension
        var extension = Path.GetExtension(image.FileName).Substring(1).ToLower();
        if (!allowedExtensions.Contains(extension))
            result.Errors.Add(string.Format("'{0}' format is not allowed.", extension));

        // If there are no errors save image
        if (!result.Errors.Any())
        {
            // Generate unique name for safety reasons
            var newName = Guid.NewGuid().ToString("N") + "." + extension;
            var serverPath = server.MapPath("~" + path + newName);
            image.SaveAs(serverPath);

            result.Success = true;
        }

        return result;
    }
}

public class SaveImageResult
{
    public bool Success { get; set; }
    public List<string> Errors { get; set; }

    public SaveImageResult()
    {
        Errors = new List<string>();
    }
} 
```

您还可以修改响应格式、不同的文件重命名或为多个文件处理添加功能等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T09:02:13.553

这只是为了指定要接受的文件类型：MSvisualstudio2010。

在您的视图（.cshtml）中：

```
ATTACHMENT:<input type="file" name="file" id="file" accept=".PNG,.TXT,.JPG,.BMP" /> 
```

只需指定您需要的格式。

# c++ - 大多数派生类类型上未调用虚函数

> ID：10540915
> 
> 赞同：1
> 
> 时间：2012-05-10T19:30:26.907
> 
> 标签：c++, templates, virtual-functions

**编辑解决并重新发布为示例程序**

场景如下：

类层次结构：

```
class Base
{
public:
   virtual void output() = 0;
private:
   int a;
};

class Derived_1 : public Base
{
public:
   virtual void output()
   {
      cout << "Derived_1" << endl;
   }
};

class Derived_2 : public Derived_1
{
public:
   virtual void output()
   {
      cout << "Derived_2" << endl;
   }
}; 
```

实施：

```
Derived_2* obj = reinterpret_cast<Derived_2*>(new Derived_1());
obj->output(); 
```

这将输出“Derived_1”而不是“Derived_2”。我敢肯定这对你们大多数人来说并不新鲜，但这是我在应用程序中创建一些工厂函数时没有想到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:37:51.723

**编辑**此答案基于发布的原始代码。OP 在看到截断的示例按预期工作后更新了代码示例。

* * *

您的代码并不完全正确，但发生这种情况的最常见原因是您在尝试覆盖时没有完全正确地获得签名，而是创建了重载。当您通过基类调用时，它仍然会调用正确定义的那个。

签名中的所有内容都很重要——一个常见的错误是方法的常量是签名的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T21:23:16.317

您正在分配一个`Value_object_data`对象，而不是`Value_object_uint32`. 您将其转换为 a 的事实`Value_object_uint32`没有任何改变。实际对象的虚拟表不知道`Value_object_uint32`; 在 err... 构造时构造的虚函数表中，`format`指向`Value_object_data`'s `format`。对指向实际对象的指针类型进行强力武装并不能解决问题。

给定层次结构中所有基类和继承类的构造函数从最派生到根调用，每个类只调用一次。这意味着，您不必显式调用基类构造函数。它将被自动调用。如果您需要指定应该使用几个基类构造函数中的哪一个，您也可以这样做：

```
class Base
{
public:
    Base() {} // default constructor
    Base(int a) {}
};

class Derived
{
public:
    Derived() : Base()
    {
    }

    Derived(int a)
      : Base(a) // Select the Base ctor that takes an int, instead of the default
    {
    }
};

int main()
{
    Derived d1;    // Calls Derived() and Base() ctors in this order
    Derived d2(5); // Calls Derived(5) and Base(5) in this order
} 
```

当然，`Derived(int a)`构造函数不需要调用`Base(int)`构造函数。在这种情况下，`Base()`构造函数将被自动调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:22:05.273

至少，`new_VO_data()`方法被打破了。由于可变虚拟表大小和可变填充，它可能工作也可能不工作，这在标准上是任意的并且取决于编译器选项。简单地说，行为是未定义的。

# path - 使用装饰器在 Python 中行走的路径

> ID：10540917
> 
> 赞同：1
> 
> 时间：2012-05-10T19:30:43.860
> 
> 标签：path, decorator, python

我很好奇装饰器是如何工作的，所以想看看它是否可以将通用函数放置在行走路径中。我想在路径下方的空格分隔文件中返回最长的整数段（然后返回此值或可能打印它）。这可能吗？

我试图在 countL 中返回东西但没有成功。然后很好奇如果我把它放在函数之外，这将如何工作。装饰器仅用于打印还是您可以从他们那里返回以使此示例正常运行？

```
def walkPath(fn):
    def wrapper(*args, **kwargs):
        outside = None
        for dirname, dirnames, filenames in os.walk(args[0]):
            for filename in filenames:
                fn(filename, dirname, outside, *args, **kwargs)
    return wrapper

@walkPath
def countL(filename, dirname, outside, path, extension = '.wrd'):
    if (filename[-4:]  == extension):
        with open(os.path.join(dirname, filename), 'r') as input:
            data = input.readlines()
        for i in range(len(data)):
            temp = data[i].split()
            if (int(temp[1]) - int(temp[0]) > longest):                
                outside = int(temp[1]) - int(temp[0]) 
```

这解释了我在没有装饰器的情况下所做的事情，然后只是看看你是否可以获得相同的功能但使其通用。这意味着它不一定是一组文件中最长的单词，但可能是一组文件名中带有单词“s”的文件。只是不知道如何正确处理最长的外部变量，或者是否可以使用装饰器。

```
def countLength(path, extension = '.wrd'):
    longest = 0
    for dirname, dirnames, filenames in os.walk(path):
        for filename in filenames:
            if (filename[-4:]  == extension):
                with open(os.path.join(dirname, filename), 'r') as input:
                    data = input.readlines()
                for i in range(len(data)):
                    temp = data[i].split()
                    if (int(temp[1]) - int(temp[0]) > longest):
                        longest = int(temp[1]) - int(temp[0])
    return longest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:14:26.783

您的问题是，您试图拆分为外部循环及其主体，但在循环内您有一个局部变量 ( `longest`) 来比较数字。所以你需要做的是让你的内部函数聚合结果。这意味着 walkPath 循环需要保存每次调用的结果`fn`并将其交给下一次调用，因此您可以*在* `fn`. 最后它应该吐出最后一次调用返回的内容。我想这就是你想要做的`outside`。我还`path`从 中删除了参数`countL`，因为它没有做任何事情。你的例子应该像这样工作：

```
def walkPath(fn):
    def wrapper(outside, *args, **kwargs):
        for dirname, dirnames, filenames in os.walk(args[0]):
            for filename in filenames:
                outside = fn(outside, filename, dirname, *args, **kwargs)
        return outside
    return wrapper

@walkPath
def countL(outside, filename, dirname, extension = '.wrd'):
    if (filename[-4:]  == extension):
        with open(os.path.join(dirname, filename), 'r') as input:
            data = input.readlines()
        for i in range(len(data)):
            temp = data[i].split()
            if (int(temp[1]) - int(temp[0]) > outside):                
                outside = int(temp[1]) - int(temp[0])
    return outside 
```

然后，您将不得不调用类似`countL(0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:26:12.563

您必须决定要聚合的位置以及如何返回数据。我会这样做：

```
def walkPath(fn):
    def wrapper(walkroot, *args, **kwargs):
        for dirname, dirnames, filenames in os.walk(walkroot):
            for filename in filenames:
                res = fn(filename, dirname, *args, **kwargs)
                if res is not None: yield res
    return wrapper

@walkPath
def countL(filename, dirname, extension='.wrd'):
    if os.path.splitext(filename)[1] == extension:
        with open(os.path.join(dirname, filename), 'r') as input:
            data = input.readlines()
        for i in range(len(data)):
            temp = data[i].split()
            return int(temp[1]) - int(temp[0]) 
```

现在，调用者`walkPath()`得到一个生成器，它从每个文件中产生一个“增量值”。所以你可以很容易地找到最大值`max(walkPath(...))`

此外，我将扩展比较更改为

```
if os.path.splitext(filename)[1] == extension: 
```

为你提供了`import os`某个地方。

* * *

停止。重新阅读代码后，我不得不问：

一个文件中可能有多个值对吗？如果是这样，我们必须`countL()`返回一个生成器。

```
@walkPath
def countL(filename, dirname, extension='.wrd'):
    if os.path.splitext(filename)[1] == extension:
        with open(os.path.join(dirname, filename), 'r') as input:
            data = input.readlines()
        for i in range(len(data)):
            temp = data[i].split()
            yield int(temp[1]) - int(temp[0]) 
```

现在装饰`countL()`器返回一个生成器的生成器，所以我们必须这样做

```
max(value for filegen in countL(...) for value in filegen) 
```

或者，我们可以更改`walkPath()`为

```
def walkPath(fn):
    def wrapper(walkroot, *args, **kwargs):
        for dirname, dirnames, filenames in os.walk(walkroot):
            for filename in filenames:
                for item in fn(filename, dirname, *args, **kwargs):
                    yield item
    return wrapper 
```

以便它产生每次调用的项目`fn()`。还不够

```
max(countL(...)) 
```

再次。

# android - android - 如何向公共日历添加订阅？

> ID：10540918
> 
> 赞同：3
> 
> 时间：2012-05-10T19:30:45.567
> 
> 标签：android, calendar, subscribe

我想让用户可以在我的应用程序中轻松订阅公共日历。

我一直在搜索 api，但没有找到任何关于向现有公共日历添加订阅的内容。是否有代码可以做到这一点？如果有人能指出我正确的方向，我将不胜感激。

我不想添加单个事件，而是订阅预先存在的日历。

# javascript - 下拉路由到不同的控制器/动作方法无缝

> ID：10540926
> 
> 赞同：1
> 
> 时间：2012-05-10T19:31:29.787
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

MVC 网站 - 在主页标题部分，我有一个下拉菜单，其中包含两个选项。每个选项都应该路由到不同的 Controller/ActionMethod。由于我需要将其放在每个页面的标题部分，因此我将其放在 site.master 文件中。

下拉代码：

```
 <%=Html.DropDownList("OneOrTwo", 
       new List<SelectListItem>
      {
       new SelectListItem{ Text="One", Value = "One" }, 
       new SelectListItem{ Text="Two", Value = "Two" }                       
      }
      , new { @style = "background-color:#f00; border: none;", onchange = 

       "fnNum()" }                    

      )%> 
```

在 javascript 文件中，我有这个根据下拉选择路由到不同的控制器/操作方法。

```
function fnNum()
{   
    var e = document.getElementById("OneOrTwo");
    var SelValue = e.options[e.selectedIndex].value;

    if (SelValue == "One")
        window.location.href = "Controller1/Index";  

    else
       window.location.href = "Controller2/Index";      
} 
```

这种方法有两个问题：

1.  更改选择时 - 新选择的选项不保留。即使网页显示新的控制器/操作方法视图，下拉菜单也会切换回原始选择...

2.  在相同选择的后续选择中 - 带我到 localhost:/Controller1/Index/Controller1/Index/etc ......必须有一种干净的方法来做到这一点。

所以我想要两件事：

1.  应保留更改的选择。
2.  在随后的选择中，控件每次都需要正确路由到控制器/索引，而不是控制器/索引/控制器/索引...等。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:48:12.140

`Selected`要解决问题 1，您必须设置`SelectListItems`. 因此，我会更改您的代码以将下拉列表生成如下：

```
@Html.DropDownList("FooOrBar", new List<SelectListItem> {
        new SelectListItem{ Text="One", Value = "Two", Selected = Request.Path == "/Controller1/Index" }, 
        new SelectListItem{ Text="One", Value = "Two", Selected = Request.Path == "/Controller1/Index" }                       
    }, new { @style = "background-color:#f00; border: none;", onchange = "fnNum()" } ) 
```

第二个问题更容易解决。这是因为您将窗口位置设置为*相对*URL ，而不是*绝对*URL。只需将其更改为：

```
if (SelValue == "One")
    window.location.href = "/Controller1/Index";  
else
   window.location.href = "/Controller2/Index"; 
```

# php - 获取逗号分隔字符串的第一个值

> ID：10540928
> 
> 赞同：8
> 
> 时间：2012-05-10T19:31:34.363
> 
> 标签：php, arrays

我正在寻找从逗号分隔的字符串**in-line**中获取第一个值的最快/最短方法。

我能做的最好的就是

```
$string = 'a,b,c,d';
echo "The first thing is " . end(array_reverse(explode(',', $string))) . "."; 
```

但我觉得这是过度和多余的。有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T19:33:13.490

```
list($first) = explode(',', 'a,b,c,d');
var_dump($first);  // a 
```

可能有效:)

* * *

在 PHP 6.0 中，您将能够简单地：

```
$first = explode(',', 'a,b,c,d')[0]; 
```

但这是 5.x 及更低版本中的语法错误

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T19:57:43.290

怎么样

```
echo reset(explode(',', 'a,b,c,d')) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-12T14:48:41.543

史蒂夫

它有点短

```
strtok('a,b,c,d', ",") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T19:32:42.983

```
<?php    
$array = explode(',', 'a,b,c,d');
$first = $array [0]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-18T10:41:40.967

```
 $int = substr($string,0,strpos($string,",")); 
```

# python - imshow() 的图太小

> ID：10540929
> 
> 赞同：141
> 
> 时间：2012-05-10T19:31:35.830
> 
> 标签：python, numpy, matplotlib

我正在尝试使用 imshow() 可视化一个 numpy 数组，因为它类似于 Matlab 中的 imagesc() 。

```
imshow(random.rand(8, 90), interpolation='nearest') 
```

生成的图形在灰色窗口的中心非常小，而大部分空间都未被占用。如何设置参数以使图形更大？我试过 figsize=(xx,xx) 这不是我想要的。谢谢！

![](../Images/a0361b4cd2d5d021308866a11d577ba3.png)

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-05-11T06:05:24.127

如果您不给`aspect`参数`imshow`，它将使用`image.aspect`您的值 for `matplotlibrc`。此值在 new 中的默认`matplotlibrc`值为`equal`. 所以`imshow`将以相等的纵横比绘制你的数组。

如果您不需要相等的方面，您可以设置`aspect`为`auto`

```
imshow(random.rand(8, 90), interpolation='nearest', aspect='auto') 
```

给出了下图

![imshow-自动](../Images/dfbf96030dc9c0e6cb08aaefd012ef22.png)

如果您想要相等的纵横比，则必须`figsize`根据纵横比进行调整

```
fig, ax = subplots(figsize=(18, 2))
ax.imshow(random.rand(8, 90), interpolation='nearest')
tight_layout() 
```

这给了你：

![imshow-等于](../Images/06c76e97792ec4a07726744441612bef.png)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-05-10T20:17:23.533

这很奇怪，它肯定对我有用：

```
from matplotlib import pyplot as plt

plt.figure(figsize = (20,2))
plt.imshow(random.rand(8, 90), interpolation='nearest') 
```

顺便说一句，我正在使用“MacOSX”后端。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-03T10:31:11.473

## 2020 年更新

### 根据@baxxx 的要求，这是一个更新，因为`random.rand`同时不推荐使用。

这适用于 matplotlip 3.2.1：

```
from matplotlib import pyplot as plt
import random
import numpy as np

random = np.random.random ([8,90])

plt.figure(figsize = (20,2))
plt.imshow(random, interpolation='nearest') 
```

这情节：

[![在此处输入图像描述](../Images/1c40f587211426908101f07dbf08a236.png)](https://i.stack.imgur.com/1Rhca.png)

要更改随机数，您可以尝试`np.random.normal(0,1,(8,90))`（此处均值 = 0，标准差 = 1）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T20:18:52.203

我也是 python 新手。这里有一些看起来会做你想做的事情

```
axes([0.08, 0.08, 0.94-0.08, 0.94-0.08]) #[left, bottom, width, height]
axis('scaled')` 
```

我相信这决定了画布的大小。

# php - 新会话登录详细信息

> ID：10540931
> 
> 赞同：0
> 
> 时间：2012-05-10T19:31:45.393
> 
> 标签：php

该脚本运行良好，非常感谢！我对 PHP 非常陌生，我想将登录用户名带入下一页和后续页面。我已经尝试了下面的代码，它适用于简单的登录脚本，但不是这个我一定遗漏了一些东西。如果有人能指出我正确的方向，将不胜感激。谢谢：

```
<?php 
session_start(); // start up your PHP session! 

if (isset($_SESSION['username'])
{

    echo "You are logged in as ".$_SESSION['username'];
    echo "<p>";

    echo "<a href='logout.php'> Click here to logout<a/>";
    }

else

header ("Location: form.php");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:50:14.403

考虑您有一个登录字段`loginTxt`和一个密码字段`passwordTxt`。

在您的所有页面中，您应该有一个`session_start()`声明。然后，您发布到 login.php 脚本。

如果您的 login.php 脚本，您必须验证这是正确的用户名 (admin) 或密码 (123456)。

```
session_start();

if(isset($_POST['loginTxt']) && isset($_POST['passwordTxt'])&& $_POST['loginTxt'] == "admin" && $_POST['passwordTxt'] == "123456"){
    $_SESSION['connected']=true;
}
else{
    header("Location: index.php");
} 
```

然后，您必须验证用户是否已连接，如果他未登录，则必须为您网站的所有页面重定向他：

```
session_start();

    if(empty($_SESSION['connected']) || $_SESSION['connected']!== true){ 
        header("Location: index.php");
    } 
```

您可以实现数据库而不是使用硬编码的登录名/密码，但原理是相同的。

# asp.net - ASPxUploadControl FileUploadComplete 获取文件名

> ID：10540933
> 
> 赞同：0
> 
> 时间：2012-05-10T19:32:06.720
> 
> 标签：asp.net, vb.net, file-upload

有没有一种简单的方法来获取文件名？

我正在尝试这样的事情，但没有运气；/

```
 Protected Sub ASPxUploadControl1_FileUploadComplete(ByVal sender As Object, ByVal e As DevExpress.Web.ASPxUploadControl.FileUploadCompleteEventArgs) Handles ASPxUploadControl1.FileUploadComplete

        Dim fileInfo As New FileInfo(e.UploadedFile As String) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:36:37.123

> 有没有一种简单的方法来获取文件名？

是的

```
Dim fileName As String = System.IO.Path.GetFileName(e.filename) 
```

这是一个完整的示例，其中只允许使用 excel 文件：

```
Private Shared allowedExtensions As New List(Of String)(New String() {".xls", ".xlsx"})

Private ASPxUploadControl1_FileUploadComplete(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) ASPxUploadControl1.FileUploadComplete
    If e.state = AjaxControlToolkit.AsyncFileUploadState.Success Then
        Dim fileExtension As String = System.IO.Path.GetExtension(e.filename)
        If allowedExtensions.Contains(fileExt) Then
            Dim fileName As String = System.IO.Path.GetFileName(e.filename)
            Dim appDir As String = Hosting.HostingEnvironment.ApplicationPhysicalPath
            Dim subDir As String = My.Settings.UploadSubDirectory
            Dim path As String = appDir & subDir & fileName
            ASPxUploadControl1.PostedFile.SaveAs(path)
            ASPxUploadControl1.FileContent.Close()
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:38:06.190

文档（包括示例）存在于[此处](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxUploadControlASPxUploadControl_FileUploadCompletetopic)。

给出的示例是在 C# 中，但想法是相同的。

文档中的示例：

```
protected void ASPxUploadControl1_FileUploadComplete(object sender, DevExpress.Web.ASPxUploadControl.FileUploadCompleteEventArgs e) {
        if (e.IsValid) {
            ASPxUploadControl1.PostedFile.SaveAs(MapPath("Images/" + 
                   ASPxUploadControl1.PostedFile.FileName));
        }
    } 
```

# c# - MonoTouch上如何将指定图片添加到用户的相册相册中

> ID：10540934
> 
> 赞同：1
> 
> 时间：2012-05-10T19:32:11.993
> 
> 标签：c#, ios, xamarin.ios, uiimage, uiimagepickercontroller

在 Obj-C 中将指定的图像添加到用户的相机胶卷相册可以使用[UIImageWriteToSavedPhotosAlbum](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageWriteToSavedPhotosAlbum)方法。

MonoTouch 上有什么等价物，或者我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T20:09:28.777

该`UIImageWriteToSavedPhotosAlbum`函数映射到[`UIImage.SaveToPhotosAlbum`](http://docs.go-mono.com/index.aspx?link=M%3aMonoTouch.UIKit.UIImage.SaveToPhotosAlbum%28MonoTouch.UIKit.UIImage.SaveStatus%29)。

Craig 在他的博客上有一个[示例](http://conceptdev.blogspot.ca/2009/10/monotouch-screen-capture-in-c-code.html)，展示了如何使用这个 API。

**编辑**：简单的示例代码：（照片是`UIImage`）

```
photo.SaveToPhotosAlbum((image, error) => {
    if (error == null)
        new UIAlertView("", "Saved", null, "OK", null).Show();
    else
        new UIAlertView("", "Failed", null, "OK", null).Show();
}); 
```

# unix - tar 和 zip 有什么区别？

> ID：10540935
> 
> 赞同：221
> 
> 时间：2012-05-10T19:32:29.123
> 
> 标签：unix, compression, zip, tar

tar 和 zip 有什么区别？每个的用例是什么？

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-05-10T19:33:49.947

`tar`本身只是将文件捆绑在一起（结果称为*tarball*），同时`zip`也应用压缩。

通常您使用`gzip`with`tar`来压缩生成的*tarball*，从而获得与 with 类似的结果`zip`。

但是，对于相当大的档案，存在重要差异。`zip`档案是压缩文件的*集合*。gzipped tar 是一个*压缩的集合*（未压缩的文件）。因此，zip 存档是一个可随机访问的串联压缩项目列表，而 a`.tar.gz`是必须在目录可访问之前完全展开的存档。

*   a的*警告*`zip`是您不会跨文件进行压缩（因为每个文件都独立于存档中的其他文件进行压缩，因此压缩无法利用不同文件内容之间的相似性）；*优点*是您可以通过仅查看存档的特定（取决于目标文件）部分来访问其中包含的任何文件（因为集合的“目录”与集合本身是分开的）。
*   a的*警告*`.tar.gz`是，您必须解压缩整个存档才能访问其中包含的文件（因为文件在 tarball 中）；*优点*是压缩可以利用文件之间的相似性（因为它压缩了整个 tarball）。

# uiscrollview - 以编程方式添加在多个方法中使用的 UIScrollView

> ID：10540936
> 
> 赞同：0
> 
> 时间：2012-05-10T19:32:33.910
> 
> 标签：uiscrollview

所以我想做的是有一个屏幕，每次我按下一个按钮时，它都会向我创建的 UIScrollView 添加一个新的图像视图，但我遇到了一个问题......因为 uiscrollview 是在 viewDidLoad 中创建的'没有声明用于后面的方法......所以我的问题基本上是......我该如何解决这个问题？

```
int pixels = 20;
int playerCount = 2;
-(void) viewDidLoad{

UIScrollView *mainScroll = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 400)];
mainScroll.contentSize = CGSizeMake(320, 700);
mainScroll.showsHorizontalScrollIndicator = YES;
[self.view addSubview:mainScroll];
[mainScroll setScrollEnabled:YES];

UIButton *addPlayersButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];

[addPlayersButton addTarget:self
                     action:@selector(addPlayer)
           forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview: addPlayersButton];
    addPlayersButton.frame = CGRectMake(20, pixels, 50, 50);

-(void)addPlayer{
pixels += 90;
playerCount++;

if (playerCount <= 7) {
    UIImageView *player3 = [[UIImageView alloc]initWithFrame: CGRectMake(15, pixels, 290, 80)];
    player3.image = [UIImage imageNamed:@"player1Bar.png"];
    [mainScroll addSubview:player3];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T00:17:39.697

我发现我需要做的是在 .h 文件中制作 UIScrollView 并合成它，以便能够在多种方法中使用它

# php - 查询从两列中获取值

> ID：10540939
> 
> 赞同：0
> 
> 时间：2012-05-10T19:32:45.410
> 
> 标签：php, mysql

我需要编写一个查询来使用 mysql 表从两列中检索值

我的桌子有以下结构

```
| ID | to_user_id | from_user_id | message |        datetime     | 
| 1  |     21     |      07      |   hi    | 2012-05-10 04:13:01 | 
| 2  |     07     |      21      |  hello  | 2012-05-10 04:17:51 | 
```

我想编写一个查询来获取用户发送的消息并在单个查询中获取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:46:08.297

尝试简单并执行

```
SELECT `message` FROM `table` WHERE `to_user_id` = 21 OR `from_user_id` = 21 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:35:36.250

像这样的东西怎么样：

```
SELECT * FROM `table` WHERE `to_user_id` = 21 OR `from_user_id` = 21 
```

它将获取 id 为 21 的用户是发送者和接收者的行。

# c# - 保存画布绘图

> ID：10540940
> 
> 赞同：2
> 
> 时间：2012-05-10T19:32:46.377
> 
> 标签：c#, windows-phone-7

我创建了一个应用程序，可让用户在画布上绘制图片。我希望用户也能够将该绘图保存到他的媒体库中。我查找了有关 IsolatedStorage 的信息，但这不是我想要的，还是我错了？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T20:41:47.153

您可以将画布渲染为`WriteableBitmap`

```
var bitmap = new WriteableBitmap(400, 400);
bitmap.Render(canvas, null);
bitmap.Invalidate(); 
```

然后，您可以将其编码为 JPEG 并保存到隔离存储中，如[本博文](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T20:51:36.547

使用 MediaLibrary SavePictureToCameraRoll 方法。有关完整示例，请参阅本文：http: [//msdn.microsoft.com/en-us/library/ff769549 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff769549%28v=VS.92%29.aspx)

# django - 为 FK 创建精确的 django db 列

> ID：10540943
> 
> 赞同：0
> 
> 时间：2012-05-10T19:33:04.363
> 
> 标签：django, django-models

我在表中创建外键时遇到问题。外键表为：

```
CREATE TABLE `main_app_provider` (
  `provider` varchar(100) NOT NULL DEFAULT '',
  `provider_slug` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`provider`),
  KEY `main_app_provider_75a6f163` (`provider_slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如果我做泛型`provider = models.ForeignKey('main_app.Provider')`，我会得到一个`errno:150`. 我将如何在 django 中添加一个具有提供程序中定义的**确切**标准的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:08:08.933

用于`to_field`指定 Django 应用作主键的字段。

```
provider = models.ForeignKey('main_app.Provider', to_field='provider') 
```

# php - 如何创建具有页面关系的站点地图

> ID：10540947
> 
> 赞同：2
> 
> 时间：2012-05-10T19:33:23.490
> 
> 标签：php, arrays, loops, sitemap

我目前正在尝试找出一种编写脚本（最好是 PHP）的方法，该脚本将爬过站点并创建站点地图。除了传统的标准页面列表之外，我还希望脚本能够跟踪哪些页面链接到其他页面。

示例页面

```
A
B
C
D 
```

我希望输出给我如下内容。

**页面名称：** A

**链接到页面 A 的页面：**

*   乙
*   C
*   D

**页面名称：** B

**链接到页面 B 的页面：**

*   一个
*   C

ETC...

我遇到了多个标准站点地图脚本，但没有什么能真正完成我正在寻找的东西。

* * *

**编辑** 似乎我没有提供足够的信息。对不起，我在那里不够清楚。这是我目前拥有的代码。我使用 simple_html_dom.php 为我处理解析和搜索 html 的任务。

```
<?php

include("simple_html_dom.php");

url = 'page_url';

$html = new simple_html_dom(); 
$html->load_file($url);

$linkmap = array();

foreach($html->find('a') as $link):
    if(contains("cms/education",$link)):
        if(!in_array($link, $linkmap)):
            $linkmap[$link->href] = array();
        endif;
    endif;
endforeach;

?> 
```

*注意：我的小 foreach 循环只是根据 url 中的特定子字符串进行过滤。*

所以，我有必要的第一级页面。我陷入困境的是创建一个不会无限期运行的循环，同时跟踪您已经访问过的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:03:21.513

基本上，您需要两个数组来控制这里的流程。第一个将跟踪您需要查看的页面，第二个将跟踪您已经查看过的页面。然后，您只需在每个页面上运行现有代码，直到没有剩余代码：

```
<?php

include("simple_html_dom.php");

$urlsToCheck = array();
$urlsToCheck[] = 'page_url';
$urlsChecked = array();

while(count($urlsToCheck) > 0)
{
   $url = array_pop($urlsToCheck);
   if (!in_array($url, $urlsChecked)
   {
      $urlsChecked[] = $url;

      $html = new simple_html_dom(); 
      $html->load_file($url);

      $linkmap = array();

      foreach($html->find('a') as $link):
          if(contains("cms/education",$link)):
              if((!in_array($link, $urlsToCheck)) && (!in_array($link,$urlsChecked)))
                 $urlsToCheck[] = $link;

              if(!in_array($link, $linkmap)):
                  $linkmap[$link->href] = array();
              endif;
          endif;
      endforeach;
   }
}

?> 
```

# ruby-on-rails - AssociationTypeMismatch 在 ruby on rails 中是什么意思？我收到带有嵌套属性的错误

> ID：10540949
> 
> 赞同：1
> 
> 时间：2012-05-10T19:33:39.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我有一个系统设置，用户可以在其中发布微博（基本上是状态更新）并上传照片以与微博一起使用。

我有：

微博模型（has_one photo） Photo_album 模型（has_many photos） 照片模型（belongs_to micropost, belongs_to photo_album）

用户在文本区域中填写文本并选择一张照片。提交后，微博表会使用微博相关数据（例如内容、created_at 等）进行更新。

同时，我希望我的照片表（照片模型）更新为用户选择的照片但正确的相册。如果您看下面，您可以在我的 users_controller 中看到实例变量 @photo 的值。这样可以确保上传的照片链接到名为“微博相册”的正确相册。它的目的是链接到所有与微博相关的照片。

**我有一个用户控制器：**

```
 def new
     @user = User.new 
     @micropost = Micropost.new(:user_id => users_id)
     @photo = Photo.new(:photo_album_id => PhotoAlbum.where(:user_id => current_user.id, :album_title => "microposts album").first.id)
  end 
```

根据我之前提出的问题，确定我需要使用accepts_nested_attributes_for、fields_for 以便能够使用一种形式更新多个模型。这就是我设置的方式。

**微贴模型：**

```
class Micropost < ActiveRecord::Base

  belongs_to :user
  has_one  :photo
  accepts_nested_attributes_for :photo
  attr_accessible :content, :user_id, :poster_id, :username, :image, :remote_image_url

end 
```

**照片模型：**

```
class Photo < ActiveRecord::Base

  belongs_to :photo_album

    attr_accessible :photo_album_id, :photo_title, :image, :remote_image_url
    mount_uploader :image, ImageUploader

end 
```

**最后是微博表格：**

```
= form_for @micropost, :remote => true do |f|
    = f.fields_for @photo do |p|
        = p.file_field :image
    = f.hidden_field :user_id
    = f.text_area :content
    = f.submit "Post" 
```

**起初我得到了错误：**

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: photo): 
```

我有点困惑，因为我认为属性是自动分配的。至少这就是我在文档中读到的内容。无论如何，我继续将 :photo 添加到 micropost 模型 attr_accessible 白名单中。

**第一个错误发生了，然后我得到了这个：**

```
ActiveRecord::AssociationTypeMismatch (Photo(#2169424320) expected, got ActiveSupport::HashWithIndifferentAccess(#2157396720)): 
```

也许我误解了这个功能是如何工作的，但我已经通读了[这个](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)并且还查看了 3.2.3 api 文档，但不是我哪里出错了。

我真的很感激一些帮助，让这个工作。

在此先感谢，我希望这篇长篇文章不受欢迎。只是想提供所有这些信息会让人们了解我正在努力做得更好。

亲切的问候

**更新：** 使用 :photo_attributes 而不是照片会给我以下错误：

```
Started POST "/microposts" for 127.0.0.1 at 2012-05-10 21:01:11 +0100
[02b23327ad83000f75c418d8739e7f49] [127.0.0.1] Processing by MicropostsController#create as JS
[02b23327ad83000f75c418d8739e7f49] [127.0.0.1]   Parameters: {"micropost"=>{"photo"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x00000102c293d8 @original_filename="7seriesbmw.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"micropost[photo][image]\"; filename=\"7seriesbmw.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/fh/fhADKPjGG8qSuCeoHCTNYE+++TI/-Tmp-/RackMultipart20120510-14787-1e1mrhh>>}, "user_id"=>"2", "content"=>"ioo"}, "commit"=>"Post", "utf8"=>"✓", "authenticity_token"=>"/y8Lr+e7xgabt60GWxnMGvCtIi7IjqrYDoA84vAqYcE=", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
[02b23327ad83000f75c418d8739e7f49] [127.0.0.1]   User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
[02b23327ad83000f75c418d8739e7f49] [127.0.0.1] Completed 500 Internal Server Error in 649ms
[02b23327ad83000f75c418d8739e7f49] [127.0.0.1] 
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: photo):
  app/controllers/microposts_controller.rb:9:in `create' 
```

**将 attr_accessor 改回 :photo 而不是 :photo_attributes 后：**

```
Started POST "/microposts" for 127.0.0.1 at 2012-05-10 21:20:07 +0100
[985e0f204bf7ffac1f7c02fbec35ad9b] [127.0.0.1] Processing by MicropostsController#create as JS
[985e0f204bf7ffac1f7c02fbec35ad9b] [127.0.0.1]   Parameters: {"micropost"=>{"photo"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x00000102f8a3b0 @original_filename="7seriesbmw.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"micropost[photo][image]\"; filename=\"7seriesbmw.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/var/folders/fh/fhADKPjGG8qSuCeoHCTNYE+++TI/-Tmp-/RackMultipart20120510-15197-9rt2xn>>}, "user_id"=>"2", "content"=>"pp"}, "commit"=>"Post", "utf8"=>"✓", "authenticity_token"=>"/y8Lr+e7xgabt60GWxnMGvCtIi7IjqrYDoA84vAqYcE=", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
[985e0f204bf7ffac1f7c02fbec35ad9b] [127.0.0.1]   User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
[985e0f204bf7ffac1f7c02fbec35ad9b] [127.0.0.1] Completed 500 Internal Server Error in 452ms
[985e0f204bf7ffac1f7c02fbec35ad9b] [127.0.0.1] 
ActiveRecord::AssociationTypeMismatch (Photo(#2180069640) expected, got ActiveSupport::HashWithIndifferentAccess(#2153916820)):
  app/controllers/microposts_controller.rb:9:in `create' 
```

**Microposts 控制器创建动作：**

```
def create

    if params[:micropost][:user_id].to_i == current_user.id
     @micropost = current_user.microposts.build(params[:micropost])

     @comment = Comment.new(:user_id => current_user.id)
        respond_to do |format|
            if @micropost.save

            format.js   { render :post_on_springboard }

            end
        end
    else

    user = User.find_by_username(params[:micropost][:username])
    @micropost = user.microposts.build(params[:micropost])
    if @micropost.save

    UserMailer.new_wall_post_notification(user, current_user).deliver if user.email_notification == 1

    flash[:success] = "Micropost posted"
    redirect_to root_path+user.username
    else
    flash[:error] = "#{@micropost.errors.full_messages.first}"
    redirect_to root_path+user.username
    end

    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:54:23.577

您尝试做的很多事情都与关系有关，并且您应该能够让 Rails 约定为您工作。如果您开始使用rails 编写一些相当简单的代码，这通常是一个不好的迹象。

实际上，我会首先关注您的路线。

例如，如果您将照片嵌套在相册中，例如

```
resources :albums do
  resources :photos
end 
```

然后你会得到很多你想要的路径和功能。

`form_for [@album, @post]`确保您的表格使用与您的表格一起使用的东西`accepts_nested_attributes_for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:41:57.900

尝试将 :photo_attributes 添加到您的 micropost 模型中的 attar_accessible 列表中

我认为这应该解决第一个错误。

还在看第二个。

您能否从表单中发布完整的堆栈跟踪，这可能是您的控制器方法的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:18:25.730

改变

```
f.fields_for @photo 
```

到

```
f.fields_for :photo 
```

并添加

```
@micropost.build_photo(:photo_album_id => :photo_album_id => current_user.photo_albums.find_by_album_title("microposts album").id) 
```

到我的 microposts_controller 解决了我的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T11:30:44.697

```
class Organization < ActiveRecord::Base

  has_one :picture, :dependent => :destroy
  accepts_nested_attributes_for :picture

  attr_accessible :address, :contect_number, :email, :name, :type_of_organization, :picture_attributes
end

class Picture < ActiveRecord::Base
  belongs_to :organization
  mount_uploader :avatar, AvatarUploader
  attr_accessible :avatar, :organization_id
end

class OrganizationsController < ApplicationController
  load_and_authorize_resource

  def new
    @organization = Organization.new
    # @organization.attributes = Picture.new
    # @picture = Picture.new
  end

  def create
    logger.info "++++++++inside the organisation controller++++++++++"
    logger.info params[:organization].inspect

    @org = Organization.new(params[:organization])
    if @org.save
      @picture = Picture.new(:avatar => params[:organization][:picture_attributes][:avatar])
      @picture.organization_id = @org.id
      @picture.save

      logger.info "---------- inside Avtar controller ---------------"
      logger.info @picture.inspect
      session[:org_id] = @org.id
      redirect_to new_admin_user_path :notice => 'Organization created successfully.'
    else
      render 'new'
    end
  end
end

<div>
    <h4>FillUp organization details.</h4>
    <%= form_for @organization, :url => organizations_path do |f| %>
        <%= f.label :name, "Name" %>
        <%= f.text_field :name %>

        <%= f.label :contect_number, "Contact Number" %>
        <%= f.text_field :contect_number %>

        <%= f.label :address, "Address" %>
        <%= f.text_field :address %>

        <%= f.label :website, "Website" %>
        <%= f.text_field :email %>

        <%= f.label :company_type, "Type" %>
        <%= f.text_field :type_of_organization %>

        <%= f.fields_for :picture_attributes, :html => { :multipart => true } do |p| %>
            <%= p.label :avatar, "My Avatar" %>
            <%= p.file_field :avatar %><br/>
        <%end%>

        <%= f.submit :Create, :class => 'btn btn-primary' %>    
    <%end%> 
</div> 
```

# ios - Instruments 报告说我正在泄漏 NSMallocBlocks（又名块对象），但我真的是这样吗？

> ID：10540951
> 
> 赞同：0
> 
> 时间：2012-05-10T19:33:47.373
> 
> 标签：ios, cocoa-touch, instruments, objective-c-blocks

我正在开发一个应用程序，在该应用程序中，向导航控制器推送和弹出的不同视图控制器可以注册 CoreAnimation 序列，然后在推送控制器的整个生命周期中的不同时间触发这些序列。

Instruments 报告说，每次我推动控制器时，我都会泄漏块对象（每次推动时，每个动画块都会泄漏 32 字节）。但是，我看不出我在哪里泄漏。这是相关代码：

有一个单例 AnimationFactory，其中包括以下方法：

```
- (void)registerAnimationBlock:(int(^)(NSArray*, NSDictionary*))animationBlock forKey:(NSString*)key
{
  [self.animationBlocks setObject:[animationBlock copy] forKey:key];
  [animationBlock release];
} 
```

然后，不同的视图控制器，当推送到导航控制器的堆栈时，使用如下代码注册它们不同的动画序列，例如：

```
- (void)setupCommonAnimations
{
  int(^animationBlock)(NSArray*,NSDictionary*);

  /************************************************************************************************************************/
  //  Move stuff up
  /************************************************************************************************************************/
  animationBlock =
  ^(NSArray* layers, NSDictionary* parameters)
  {
    CGFloat timeOffset = [[parameters objectForKey:@"timeOffset"] floatValue];
    CABasicAnimation* a;

    CABasicAnimation* a2 = [CABasicAnimation animationWithKeyPath:@"opacity"];
    a2.fromValue = [NSNumber numberWithFloat:0.];
    a2.toValue = [NSNumber numberWithFloat:1.];

    CAAnimationGroup* g = [CAAnimationGroup animation];
    g.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    g.fillMode = kCAFillModeBoth;
    g.removedOnCompletion = NO;
    g.duration = .4;

    [CATransaction begin];
    [CATransaction setCompletionBlock:
     ^{
       for(CALayer *layer in layers)
         layer.opacity = 1;
     }];

    for(CALayer *layer in layers)
    {
      a = [CABasicAnimation animationWithKeyPath:@"position.y"];
      a.fromValue = [NSNumber numberWithFloat:1024 + layer.frame.size.height / 2];
      a.toValue = [NSNumber numberWithFloat:layer.frame.origin.y + layer.frame.size.height / 2];

      g.animations = [NSArray arrayWithObjects:a,a2, nil];
      g.beginTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil] + timeOffset;

      [layer addAnimation:g forKey:nil];

      timeOffset += .2;
    }

    [CATransaction commit];

    return 0;
  };

  [[AnimationFactory sharedFactory] registerAnimationBlock:animationBlock forKey:@"StuffUpAnimation"];

/************************************************************************************************************************/
  //  Sequential Fade-in
  /************************************************************************************************************************/
  animationBlock =
  ^(NSArray* layers, NSDictionary* parameters)
  {
    CGFloat timeOffset = [[parameters objectForKey:@"timeOffset"] floatValue];
    CABasicAnimation* a2 = [CABasicAnimation animationWithKeyPath:@"opacity"];
    a2.fromValue = [NSNumber numberWithFloat:0.];
    a2.toValue = [NSNumber numberWithFloat:1.];
    a2.duration = .4;
    a2.fillMode = kCAFillModeBoth;
    a2.removedOnCompletion = NO;

    [CATransaction begin];
    [CATransaction setCompletionBlock:
     ^{
       for(CALayer *layer in layers)
         layer.opacity = 1;
     }];

    for(CALayer *layer in layers)
    {
      a2.beginTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil] + timeOffset;
      [layer addAnimation:a2 forKey:nil];
      timeOffset += .4;
    }

    [CATransaction commit];

    return 0;
  };

  [[AnimationFactory sharedFactory] registerAnimationBlock:animationBlock forKey:@"SeqFadeInAnimation"]; 
```

例如，上面的方法将在视图控制器的 init 或 viewWillAppear 上调用。我正在重用 animationBlock 变量来注册不同的动画。

最后，当一个控制器被弹出时，它会调用以下代码作为其 dealloc 序列的一部分：

```
- (void)cleanupAnimations
{
  [[AnimationFactory sharedFactory] removeAnimationBlockForKey:@"SeqFadeInAnimation"];
  [[AnimationFactory sharedFactory] removeAnimationBlockForKey:@"StuffUpAnimation"];
} 
```

根据 Instruments 的说法，我每次都会泄漏：

```
[[AnimationFactory sharedFactory] registerAnimationBlock:animationBlock forKey:@"StuffUpAnimation"]; 
```

从第一个代码片段开始，它转换为：

```
[self.animationBlocks setObject:[animationBlock copy] forKey:key];
[animationBlock release]; 
```

据我所理解：

1.  我正在视图控制器中创建一个堆栈块
2.  然后将其传递给单例，后者创建它的堆副本，将其存储在可变字典中并调用 release 以平衡块上增加的保留计数。
3.  一旦声明它的视图控制器的方法超出范围，原始堆栈块应该不再存在。
4.  我什至没有从块的封闭范围中引用任何东西，所以它不应该保留 self 或任何变量/对象。它在执行时从参数中获取它的东西。

所以我不知道泄漏在哪里。此外，当视图控制器被弹出时，我会从 animationBlocks 数组中删除块，但我什至不需要这个（除了在我完成后立即回收内存）。因为下次用户推动同一个视图控制器时，它将使用相同的键重新注册动画块，并且使用现有键调用 setObject:withKey 将导致释放被发送到散列到该键的对象然后将新对象设置到该位置。

我在看什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:36:27.853

您应该发布您制作的副本，而不是原始块。你需要做：

```
animationBlock = [animationBlock copy];
[self.animationBlocks setObject:animationBlock forKey:key];
[animationBlock release]; 
```

# c# - 在 vs2010 上搜索会跳过区域

> ID：10540953
> 
> 赞同：0
> 
> 时间：2012-05-10T19:33:53.350
> 
> 标签：c#, visual-studio-2010

在 VS 2010 中搜索时，有时它不会在区域内搜索。（是一个 C# 代码）

欢迎任何其他有此问题的评论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:38:10.523

“搜索隐藏文本”复选框确实已从 VS2010 中删除。但是，VS 现在应该默认在折叠区域内搜索，所以我不明白你为什么会遇到问题。

在“查找”对话框中删除*不*搜索隐藏文本的选项已[在 Microsoft Connect 中作为一个错误](http://connect.microsoft.com/VisualStudio/feedback/details/552975/no-more-search-hidden-text-in-find-and-replace-dialog)提交。

微软回应：

> ...我们有意从“查找和替换”对话框中删除了“搜索隐藏文本”复选框，并将“查找”的行为更改为始终搜索隐藏文本。...

Microsoft 邀请了恢复该功能的理由，并且有许多帖子解释了它为什么有用（我同意这些帖子），但该问题目前状态为“按设计关闭”。微软确实表示他们会将该功能添加到建议列表中，尽管不一定作为“查找”对话框中的选项。

令人困惑的是，[快速查找、查找和替换窗口的 MSDN 帮助](http://msdn.microsoft.com/en-us/library/87a13zt0.aspx)描述了复选框及其行为，就好像它仍然存在一样（并且社区内容评论正确地指出了该功能不存在）。

# api - 如何为 Facebook 应用程序的测试帐户激活时间线？

> ID：10540957
> 
> 赞同：1
> 
> 时间：2012-05-10T19:34:04.433
> 
> 标签：api, facebook-graph-api

我正在创建一个将操作发布到用户时间轴的 Web 应用程序。

对于我的测试帐户，它说我无法发布操作，因为用户没有使用时间轴。

我以该用户身份登录时进入时间轴页面，但那里不可用。我还为用户添加了开发者应用程序，这并没有打开选项。我编辑了个人资料设置，那里什么也没有。我查看了个人资料，那里什么也没有。我检查了超过一年的测试帐户。

`{ "error": { "message": "(#100) User ############### is not allowed to create actions of custom action type because their Timeline is not activated", "type": "OAuthException", "code": 100 } }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T22:12:20.917

这些帐户最终转换为“时间轴”配置文件。我的猜测是，当他们推出 Timeline 时，我太接近了，以至于延迟了进程。

# jquery - 打开时颜色框太宽

> ID：10540961
> 
> 赞同：0
> 
> 时间：2012-05-10T19:34:26.407
> 
> 标签：jquery, css, colorbox

我有一个颜色框，它的显示宽度也大约是 css 指示的宽度的两倍。一个例子是[here](http://www.wesleywoodsiowa.org/photo_gallery.php?catid=5)。单击任何图像，您将看到该框大约是应有大小的两倍。这在 FF 和 IE 中是一样的。[css](http://www.wesleywoodsiowa.org/colorbox/jquery.colorbox.css)中没有任何宽度为 1200 的内容。为什么要这样做？

这是我给出颜色框代码的地方。

```
<link media="screen" rel="stylesheet" href="colorbox/colorbox.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script src="colorbox/jquery.colorbox.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    //Examples of how to assign the ColorBox event to elements
    $("a[rel='example1']").colorbox();
    $("a[rel='example2']").colorbox({transition:"fade"});
    $("a[rel='example3']").colorbox({transition:"none", width:"75%", height:"75%"});
    $("a[rel='example4']").colorbox({slideshow:true});
    $(".example5").colorbox();
    $(".example6").colorbox({iframe:true, innerWidth:425, innerHeight:344});
    $(".example7").colorbox({width:"80%", height:"80%", iframe:true});
    $(".example8").colorbox({width:"50%", inline:true, href:"#inline_example1"});
    $(".example9").colorbox({
        onOpen:function(){ alert('onOpen: colorbox is about to open'); },
        onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
        onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
        onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
        onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
    });

    //Example of preserving a JavaScript event for inline calls.
    $("#click").click(function(){
        $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
        return false;
    });
});
</script> 
```

这是制作在颜色框中显示的图片的代码。

```
<div class="gallerywrap_1">
    <a href="<?=$pic2?>" title="<?=$caption?>" rel="example3">
        <div class="gallery_1">
            <div class="galleryimg_1" style="background-image: url(<?=$pic?>)"></div>
        </div>
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:46:45.370

colorbox javascript 正在设置与屏幕分辨率相关的宽度。/尺寸

```
$("a[rel='example3']").colorbox({transition:"none", width:"75%", height:"75%"}); 
```

尝试将其更改为像素宽度或降低百分比宽度。

希望这会有所帮助。

# matlab - 我如何在matlab中实现这个算法

> ID：10540962
> 
> 赞同：0
> 
> 时间：2012-05-10T19:34:28.397
> 
> 标签：matlab, image-processing, image-segmentation, iris-recognition

我正在研究虹膜识别系统。我想通过分析图像中的连通分量来找到瞳孔`bwconncomp`。

瞳孔检测算法如下：

1.  连接组件标签通过扫描图像来工作。它根据像素连通性将像素分组为组件。连接组件中的所有像素共享相似的像素强度值，并且以某种方式相互连接。
2.  一旦确定了所有像素组，就标记该组中的每个像素。确定所有组的中心和直径，直径最大的一组是瞳孔。
3.  位于虹膜上方和下方的图像部分被睫毛和眼睑遮挡。这些像素位于瞳孔直径的上方和下方。要删除它们，请将这些像素设置为 NaN（不是数字）。
4.  发现最小/最大光圈半径为 90/125。基于此，瞳孔左右 45 个像素被认为是所提出算法分析的虹膜区域。

我的问题是：如何将虹膜上方和下方的空间设置为 NaN。以及如何获得与虹膜对应的像素？

我的代码如下：

```
%% Read the file and dilate it
I = imread('eye.jpg');  %See the comments for the image.
erodedBW = rgb2gray(I);
se2 = strel('disk',35); 
dilatedBW= imdilate(erodedBW ,se2);
imshow(dilatedBW);

%%pupil Detection
cc2=bwconncomp(dilatedBW);
labeled = labelmatrix(cc2);
L = bwlabel(dilatedBW);
[L, num] = bwlabel(dilatedBW);

%% Find the largest value of L
count=num;
largvalue=0;  
for i=0:count,
    L = bwlabel(dilatedBW);
    if  largvalue<=L
        largvalue=L; 
    end    
end 
```

# svn - 使用 Tortoise 和 SVN 将分支重新集成到主干时出错

> ID：10540965
> 
> 赞同：0
> 
> 时间：2012-05-10T19:34:35.533
> 
> 标签：svn, tortoisesvn, visualsvn

我试图将一个分支重新集成到主干中，它一直告诉我分支中缺少主干中的修订，但是当我尝试将修订合并到分支时，它显示不需要合并。我在 vs2010 中使用 VisualSVN，但即使直接进入源文件夹并使用 Tortoise，我也会遇到同样的错误。

错误： ![在此处输入图像描述](../Images/07077e8e702e99953292390bf38fc592.png)

当我尝试返回并合并已经合并的修订时合并日志（这是来自分支的图片，试图从主干合并修订） ![在此处输入图像描述](../Images/c6f7e2bd985a5c4dc892b59482722d6f.png)

这是分支的修订日志： ![在此处输入图像描述](../Images/bc19c4afafbe257964fd2327a795064c.png)

这是来自主干的修订日志： ![在此处输入图像描述](../Images/a1cb59b8afd2c3e47c81018b45b60af9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:08:27.590

我有两种方法解决了这个问题：

**(1) 在您的主干中，对有问题的文件进行空白更改并将其提交到主干。然后将此更改合并到您的分支中。这应该强制该文件的分支上的 mergeInfo 属性将其结束范围更新为最新版本。**

这仅在相关文件的 MergeInfo 中没有间隙时才有效：

```
/trunk/[path to file on HD]:750-763. 
```

从主干获取更新后，这将强制合并信息看起来像这样：

```
/trunk/[path to file on HD]:750-791. 
```

如果有间隙，它将不起作用：

```
/trunk/[path to file on HD]:750-755, 766-788. 
```

它只会更新最后一个范围，从 766-788 到 766-791，仍然跳过有问题的修订。在这种情况下，您必须执行选项 2。

**(2) 如果您 100% 确定缺少的修订确实在您的分支中，并且有问题的文件在主干和分支中是相同的，我只会建议这样做。否则，这可能会导致在将分支重新集成回主干时丢失更改。**

在您的分支的本地副本中，导航到有问题的文件夹/文件，右键单击，在 tortoise svn 菜单中选择属性。突出显示“svn:mergeinfo”属性并单击“编辑”。

由于您知道更改已经在您的分支中，因此请更改主干中合并修订的范围以强制它包含缺少的修订：

```
/trunk/[path to file on HD]:750-755, 764, 766-788. 
```

将此 mergeinfo 属性更改提交到您的分支。当您将此分支重新集成回主干时，您应该不再有任何错误。

如果您的主干和分支之间的文件发生更改，您将不得不在提交时将差异添加到您的分支，这样您就不会在重新集成您的分支时将它们从主干中删除。

# javascript - 为什么要先显示图片才能让 jquery 图像放大镜工作？

> ID：10540967
> 
> 赞同：3
> 
> 时间：2012-05-10T19:34:43.630
> 
> 标签：javascript, jquery, html, jplayer

我正在开发一个托管音乐、图片和视频的网站。我目前有 4 个页面，一个标题页、一个音乐页面、一个视频页面和一个图像页面。这很好用，但我希望能够同时播放音乐和查看图片。为此，我创建了一个 HTML 文档，其中每个前一页包含在一个具有描述性类名的 div 中。然后，我编写了一个 javascript 函数，该函数在调用每个 div 时显示和隐藏它，因此页面的行为就像是 4 页，但事实并非如此。因此，我将音乐播放器嵌入到页脚 div 中，该 div 在音乐播放时保持打开状态，这意味着您可以在每种媒体类型之间来回切换，同时保持音乐页脚打开和播放。这就是问题所在。完成后，我在图像页面上使用的图像放大镜 jquery 功能不再正常工作，除非图像 div 在页面打开时显示在开头。只有这样您才能在媒体类型之间切换并仍然放大图片。如果标题 div 首先显示（就像它应该显示的那样），然后您尝试放大图像，它就不起作用。

起初我以为可能是一些外部 javascript 库彼此之间存在负面交互，但后来我遇到了我上面解释的内容，现在我不知道为什么图像需要成为显示的第一件事放大镜才能正常工作。

我正在使用的 jquery 代码称为 jQuery Image Magnify，它是由 Dynamic Drive 制作的。

编辑：我隐藏和显示 div 的方式是使用 style="display:none" 隐藏和 style="display:block" 显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:38:52.427

有趣的问题。可能是因为该元素需要实际可见才能运行 jQuery Image Magnify 函数。我愿意打赌该插件`imageElement.onload`用于图像放大处理程序或类似的东西，如果图像元素被隐藏，我认为它不起作用。

就解决方案而言，尝试将您的图像设置为在页面首次加载时可见，可能将左侧设置为 -9999 px 或类似的东西，因此它在技术上仍然“可见”但用户看不到它。然后，在图像加载并（希望）被放大或插件所做的任何事情之后，将其移动到它的页面应该打开的 div 的子级并摆脱负左值。

# php - 用php写xml

> ID：10540969
> 
> 赞同：0
> 
> 时间：2012-05-10T19:34:52.507
> 
> 标签：php, xml

我不知道我的错误来自哪里，我是 xml 新手，我需要一些帮助。我想使用 php 编写一个 xml 文件。我有以下 php 代码：

```
<?php 
 $xml = array(); 
 $xml [] = array( 
 'error' => 'ERROR_ID'
  ); 

 $doc = new DOMDocument(); 
 $doc->formatOutput = true; 

 $r = $doc->createElement( "xml" ); 
 $doc->appendChild( $r ); 

 $parameters = $doc->createElement( "parameters" );    
  $error = $doc->createElement( "error" ); 
 $error->appendChild( 
 $doc->createTextNode( $xml['error'] ) 
 ); 
 $parameters->appendChild( $error ); 

 $r->appendChild( $parameters ); 

 echo $doc->saveXML(); 
 $doc->save("write.xml") 
 ?> 
```

我的 xml 文件应如下所示：

```
<?xml version="1.0"?>
<xml>
  <parameters>
    <error>ERROR_ID</error>
  </parameters>
</xml> 
```

但是文件中没有显示 ERROR_ID 文本节点。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:37:50.233

第一个选项：替换这一行：

```
$doc->createTextNode( $xml['error'] ) 
```

有了这个：

```
$doc->createTextNode( $xml [0] ['error'] ) 
```

第二种选择：替换这一行：

```
$xml [] = array( 
```

有了这个：（并删除第一行）

```
$xml = array( 
```

# ios - 在 XCode 4+ 中创建/编辑子类模板

> ID：10540970
> 
> 赞同：0
> 
> 时间：2012-05-10T19:34:55.940
> 
> 标签：ios, objective-c, xcode, templates, uiviewcontroller

我在早期版本的 XCode 中编辑了模板，但我不知道如何使用 XCode 4+ 来完成，因为目录完全不同。

我是否仍导航到子类模板目录并编辑文件？如果是这样，找到文件的路径是什么？

如果没有，我该怎么做才能编辑它们？

谢谢您阅读此篇！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:23:20.213

嗯，我已经想通了。您可以在其中创建自定义目录以`~/Library/Developer/XCode/Templates/File Templates`自定义子类。

# maven - 使用 release+versions 插件完全自动化发布过程

> ID：10540977
> 
> 赞同：12
> 
> 时间：2012-05-10T19:35:39.387
> 
> 标签：maven, maven-release-plugin, versions-maven-plugin

如果 Maven 大师社区可以帮助我完成以下任务，那就太好了。

我想以批处理模式运行发布过程的方式自动化哈德逊中 Maven 模块的发布过程（不需要从控制台询问任何内容）。目前我使用通用步骤`release:prepare`（`<preparationGoals>versions:update-parent clean verify</preparationGoals>`在提交之前将父级更新到最新版本）+ `release:perform`. 但是我希望 Maven 执行以下操作：

在准备步骤中的某个时候：

*   `groupId`对于与当前模块*和父*模块匹配的所有依赖项，替换`-SNAPSHOT`为发布版本（例如`versions:use-releases -Dincludes=???`）。

发布后的某个时候：

*   `groupId`对于与当前模块*和父*模块匹配的所有依赖项，将发布版本替换为`-SNAPSHOT`版本（例如`versions:use-latest-snapshots ...`）。

例子：

```
<parent>
    <groupId>org.mycompany.myproject</groupId>
    <artifactId>myproject-parent</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>myproject-api</artifactId>
    <version>1.1-SNAPSHOT</version>         
</dependency> 
```

在模块被标记之前转换为：

```
<parent>
    <groupId>org.mycompany.myproject</groupId>
    <artifactId>myproject-parent</artifactId>
    <version>1.0</version>
</parent>

<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>myproject-api</artifactId>
    <version>1.1</version>          
</dependency> 
```

并在发布成功后转化为：

```
<parent>
    <groupId>org.mycompany.myproject</groupId>
    <artifactId>myproject-parent</artifactId>
    <version>1.1-SNAPSHOT</version>
</parent>

<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>myproject-api</artifactId>
    <version>1.2-SNAPSHOT</version>         
</dependency> 
```

我觉得它需要混合

`versions:use-releases scm:commit release:prepare release:perform versions:use-latest-snapshots scm:commit`

但我不确定这样做的最佳方法是什么。尤其是尽可能少的提交会很好：困难在于在版本检查`reparationGoals`之后运行。`-SNAPSHOT`

所描述的项目不是一个多模块项目，因为父 POM 没有通过`<modules>`. 单片机结构如下：

```
 .
 |
 +-- myproject-parent
 |   +-- pom.xml
 +-- myproject-api
 |   +-- pom.xml
 +-- myproject-impl
     +-- pom.xml 
```

依赖项是：

```
myproject-api → myproject-parent
myproject-impl → myproject-parent
myproject-impl → myproject-api 
```

项目的父 POM ( `myproject-parent`) 将很少发布，因此将首先发布。然后`myproject-api`（如有必要）然后`myproject-impl`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:36:28.097

您遇到的一个简单问题是您的父母与您的孩子的版本号不同，这是多模块构建的错误方式。多模块构建旨在具有多个相关的模块，这些模块具有相同的发布过程，随后具有相同的版本号。如果您遵循该指南，则不需要版本插件，您只需通过 release:prepare 和 release:perform 进行发布就是这样。

**更新：** 在进一步讨论之后，我建议设置一组新的 Hudson 作业，其中包含模块之间的依赖项（下游/上游部门），并在每个 hudson 作业上发布，触发作业字符串中的下一个和很快。这个先决条件是在版本控制中也有单独的模块和单独的区域。否则这场战斗将与 Maven 一起失败并使生活复杂化。

# mysql - 在 MYSQL 中将 AM / PM 中的时间转换为午夜后的分钟格式

> ID：10540979
> 
> 赞同：2
> 
> 时间：2012-05-10T19:35:40.820
> 
> 标签：mysql, sql

在 MySQL 中，如何将 AM / PM 中的时间转换为午夜后的分钟格式。例如：- 1\. 上午 8:40 将是 520 2\. 晚上 9:00 将是 1260

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:18:10.427

首先使用 将字符串转换为日期`STR_TO_DATE()`，然后使用`HOUR()`和`MINUTE()`函数进行计算：

```
SELECT HOUR(STR_TO_DATE('8:40 AM', '%l:%i %p')) * 60 +
  MINUTE(STR_TO_DATE('8:40 AM', '%l:%i %p')) AS minutes 
```

结果是：

```
minutes
---------
520 
```

和 ...

```
SELECT HOUR(STR_TO_DATE('9:00 PM', '%l:%i %p')) * 60 +
  MINUTE(STR_TO_DATE('9:00 PM', '%l:%i %p')) AS minutes 
```

结果是：

```
minutes
---------
1260 
```

# java - 使用其他类的方法？

> ID：10540983
> 
> 赞同：1
> 
> 时间：2012-05-10T19:35:50.837
> 
> 标签：java, class, methods, hierarchy

在`MainFrame`类中有一个名为的方法`createPerson`，它接受`String id`并返回`Person`类型。

在我的`Person`课堂上有一个`getFatherName`返回字符串的方法。

在我的`Tree`课堂上，我可以做以下陈述吗？：

`String father = ( MainFrame.createPerson("001") ).getFatherName();`

我可以在不创建 MainFrame 实例的情况下做到这一点吗？

编辑：我无法创建 MainFrame 的实例，它是带有 GUI 的主类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:41:05.797

你当然可以！如果方法`MainFrame.createPerson()`被定义为[静态/类方法](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

您可能已经熟悉静态方法，但并不知道，例如类中的方法[`Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)或[`System.exit()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)

这些通常用作工厂方法，这里似乎就是这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T19:38:53.333

这仅在 MainFrame 是静态类时才有效。否则，您将需要创建 MainFrame 的一个实例。您可以像这样创建实例内联思想：

```
String father = ( new MainFrame.createPerson("001") ).getFatherName(); 
```

# java - 如何为文件系统上的文件使用属性占位符

> ID：10540986
> 
> 赞同：18
> 
> 时间：2012-05-10T19:36:04.330
> 
> 标签：java, spring

我们曾经有一种方法可以从类路径上的文件中加载属性：

```
<context:property-placeholder location="classpath:myConfigFile.properties" /> 
```

效果很好。但是现在我们想从系统上不在类路径中的特定文件加载属性。我们希望能够动态加载文件，因此我们使用 Java 环境变量来填充它。下面我举一个简单的例子：

在 Java 中：

```
 System.setProperty("my.prop.file", "/path/to/myConfigFile.properties"); 
```

在 Spring XML 中：

```
<context:property-placeholder location="${my.prop.file}" /> 
```

由于 Luciano 的一个想法，我也尝试过这种方式：

```
<context:property-placeholder properties-ref="prop" />

<util:properties id="prop" location="reso"/>

<bean id="reso" class="org.springframework.core.io.FileSystemResource">
    <constructor-arg index="0" value="${my.prop.file}" />
</bean> 
```

我尝试过的一切都失败了。无论我将 my.prop.file 设置为什么。最热门的歌曲包括：

```
<context:property-placeholder location="/path/to/myConfigFile.properties" />
(ClassNotFoundException: .path.to.myConfigFile.properties)

<context:property-placeholder location="file:/path/to/myConfigFile.properties" />
(ClassNotFoundException: file:.path.to.myConfigFile.properties)

<context:property-placeholder location="file:///path/to/myConfigFile.properties" />
(ClassNotFoundException: file:...path.to.myConfigFile.properties) 
```

您如何使用位于文件系统上而不是类路径上的位置的属性占位符？我们使用的是 Spring 3.0.5。

事实证明，运行加载 spring 文件的 Java 程序的脚本存在问题。谢谢你的帮忙。我将要求删除这个问题，因为原始代码毕竟有效。感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T03:49:27.453

这对我有用：

```
<context:property-placeholder location="file:/path/to/myConfigFile.properties" /> 
```

但这（有趣的是）没有：

```
<context:property-placeholder location="#{ systemProperties['foo'] }" /> 
```

我有

```
java.io.FileNotFoundException: Could not open ServletContext resource [/#{ systemProperties['foo'] }] 
```

您将无法将属性占位符`${..}`与 PropertyPlaceholderConfigurer 的定义一起使用。这是先有鸡的先有蛋的。

你总是可以继承 PropertyPlaceholderConfigurer 并让它做任何你想做的事情（例如，调用`setLocations()`一个`@PostConstruct`方法。然后，而不是使用`<context:property-placeholder>`，使用：

```
<bean class="com.foo.MyPropertyPlaceholderConfigurer"/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T19:55:14.447

这种方式呢？

```
<context:property-placeholder properties-ref="prop" />

<util:properties id="prop" location="reso"/>

<bean id="reso" class="org.springframework.core.io.FileSystemResource">
    <constructor-arg index="0" value="/yourpathandfile" />
</bean> 
```

# applescript - Applescript 通用应用程序

> ID：10540995
> 
> 赞同：1
> 
> 时间：2012-05-10T19:36:54.083
> 
> 标签：applescript, universal

有没有办法让我创建一个 Applescript 作为仅可在 10.5 及更高版本上运行的应用程序？

我正在运行狮子。每当我将脚本保存为仅运行的应用程序时，它就不适用于 10.5，并给我一个“不适用于此架构”的错误。

奇怪的是，我保存了一次并在 10.5 机器上成功启动了它，但是当我去编辑它并重新保存时，它不再起作用了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:16:09.523

您不能，Apple 的文档也不清楚。基于大量试验和错误，我的经验是，将 Applescript 保存为应用程序时，必须将其保存在目标环境中，就像为 Xcode 编译时针对特定操作系统一样。过去，我不得不为 10.6 和 10.7 以及 PowerPC 和 Intel 制作单独的应用程序，其中的代码完全相同。

# java - 在集合中使用“前体”类

> ID：10540996
> 
> 赞同：3
> 
> 时间：2012-05-10T19:37:03.160
> 
> 标签：java, generics

我有一个方法

```
<T> void f (Collection<T> c, T t) 
```

唉，有时我需要作为第一个参数传递而不是**Collection**而是**Collection<P>**其中**P**是**T的***前体*，即有一个**P** *getter*方法返回一个**T**。那么如何修改我的方法以同时使用**Collection<P>**和**Collection<T>**（在后一种情况下，*getter*是身份）？

 ********例如，

```
<T> boolean f (Collection<T> c, T t) {
  for (T x : c) if (x.equals(t)) return true;
  return false;
}
class Z { String a, b; } 
```

我希望能够使用**f**通过**a**或**b**搜索**Collection<Z>**：

 ****```
f(Collection<Z> c1 ???searching by a???, "foo")
f(Collection<Z> c2 ???searching by b???, "bar") 
```

我*无法*控制**T**和**P**的实施；特别是，我不能让**P从****T**继承（而且我不想：就像上面的**Z**一样，我可能想在不同的时间按不同的字段进行搜索）。

我不想*通过*映射创建中间**Collection<T> 。**

我想要一些像[common **:key** Lisp 关键字参数](http://www.lispworks.com/documentation/HyperSpec/Body/f_reduce.htm)这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:56:38.533

如何使用类似接口的谓词来检查相等性。一个例子是：

```
interface Predicate<T> {
     public boolean test(T element);
} 
```

然后使用以下功能：

```
 public <T> boolean f(Collection<T> c, Predicate<T> p) {
     for (T x : c) if (p.test(x)) return true;
     return false;
 } 
```

然后你可以通过以下方式调用它：

```
Collection<T> ts;
f(ts, new Predicate<T> () { 
            public boolean test(T element) { 
                      return element.equals("foo"); 
            }
 });

Collection<P> ps;
f(ps, new Predicate<P> () { 
            public boolean test(P element) { 
                      return element.getT().equals("foo"); 
            }
}); 
```

虽然这种语法非常冗长，但它应该适合您的问题。然而，当 lambda 函数到来时，它会在 Java 8 中变得更漂亮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T19:42:49.490

鉴于“Holder”是前体类，“Stuff”是得到的类，您可以这样做：
编辑：切换到凌乱的 instanceof 语句。

```
public <H, T> boolean contains (Collection<H> c, T t) {
  if (c instanceof Collection<T>)
  {
    for (T x : c) if (x.equals(t)) return true;
    return false;
  }
  //else
  for (H x : c) if (x.getStuff().equals(t)) return true;
  return false;
} 
```************

# vb.net - 如何在 VB.net 中创建此 JSON 的（标头）？

> ID：10540998
> 
> 赞同：0
> 
> 时间：2012-05-10T19:37:08.543
> 
> 标签：vb.net, json, json.net

这是我正在努力重新创建的 json。：

```
WorkLoadResult({
  "AreaReturned":[
    {
      "ResultCode":"0"
    }
  ],
  "Process":"Generic",
  "WorkLoadId":"megaupload_server_798811",
  "Status":"1",
  "TotalSuccessfulRuns":"3"
}); 
```

我在将我的班级滚动到另一个班级的代码中完美地创建了所有这些。我一直在尝试创建 WorkLoadResult 标头（我知道这确实不是标头，但由于缺少更好的词，我将其称为此标头），但是我什至看不到如何创建它。当我通过 JSON 格式化程序运行它时，JSON 被确定为有效。这是我从网络服务收到的东西。反过来，我需要创建一个类来捕获这个 JSON。我查看了多个不同的 json 示例，但没有看到以这种方式格式化 JSON 并在数据开头带有某种标题的示例。

我目前的一个选择是在将其推入类之前将其从数据中剔除。我不喜欢这个选项，并且不得不认为在我的班级中有这个 WorkLoadResult 是可能的。

对 JSON 很陌生，非常感谢任何建议/指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:04:38.647

这看起来像一个[JSONP](http://en.wikipedia.org/wiki/JSONP)响应。如果 Web 服务准确返回此字符串，并且您无法告诉 Web 服务返回纯 JSON，则您别无选择，只能删除围绕真实 JSON 对象的函数调用。

# python - 如何在运行时配置 Clojure 库？

> ID：10540999
> 
> 赞同：4
> 
> 时间：2012-05-10T19:37:09.667
> 
> 标签：python, dependency-injection, clojure

作为一个 Clojure 学习练习，我将 Bulbs ( [http://bulbflow.com](http://bulbflow.com) )（我编写的一个图形数据库库）从 Python 移植到 Clojure。

我仍然有些模糊的一件事是如何以 Clojure 惯用的方式构建库。

为了支持多个数据库，Bulbs 使用依赖注入。不同的数据库后端在实现接口的自定义客户端类中抽象出来，客户端在运行时进行配置。

Graph 对象及其各种代理对象包含一个低级 Client 对象的实例：

```
# bulbs/neo4jserver/graph.py

class Graph(object):

    default_uri = NEO4J_URI

    def __init__(self, config=None):
        self.config = config or Config(self.default_uri)
        self.client = Neo4jClient(self.config)

        self.vertices = VertexProxy(Vertex, self.client)
        self.edges = EdgeProxy(Edge, self.client) 
```

您可以通过为相应的图形数据库服务器创建 Graph 对象来使用 Bulbs：

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph() 
```

然后您可以通过代理对象在数据库中创建顶点和边：

```
>>> james = g.vertices.create(name="James")
>>> julie = g.vertices.create(name="Julie")
>>> g.edges.create(james, "knows", julie) 
```

这种设计使得使用 REPL 中的 Bulb 变得很容易，因为您所要做的就是导入和实例化 Graph 对象（或者如果需要也可以传入自定义的 Config 对象）。

但我不确定如何在 Clojure 中处理这种设计，因为 Graph 对象及其代理需要保存在运行时配置的 Client 对象。

这样做的 Clojure 方式是什么？

更新：这就是我最终做的......

```
;; bulbs/neo4jserver/client.clj

(def ^:dynamic *config* default-config)

(defn set-config!
  [config]
  (alter-var-root #'*config* (fn [_] (merge default-config config))))

(defn neo4j-client
  [& [config]]
  (set-config! config))

(neo4j-client {:root_uri "http://localhost:7474/data/db/"})

(println *config*) 
```

更新 2：

Andrew Cooke 指出，使用全局变量会阻止您在程序中使用多个独立的图形“实例”，而在 Python 版本中则可以。

所以我想出了这个：

```
(defn graph
  [& [config]]
  (let [config (get-config config)]
    (fn [func & args]
      (apply func config args))))

(defn create-vertex
  [config data]
  (let [path (build-path vertex-path)
        params (remove-null-values data)]
    (rest/post config path params)))

(defn gremlin
  [config script & [params]]
  (rest/post config gremlin-path {:script script :params params})) 
```

然后你可以像这样调用不同的函数：

```
(def g (graph {:root_uri "http://localhost:7474/data/db/"}))

(g create-vertex {:name "James"})

(g gremlin "g.v(id)" {:id 178}) 
```

现在我还没有深入研究宏，与其他方法相比，我不太确定这种方法的优点，因此欢迎反馈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T20:22:23.357

[协议](http://clojure.org/protocols)在 Clojure 中非常适合这一点，你定义一个协议（很像一个接口），它定义了与数据库接口所需的所有功能，然后在运行时调用在协议实例中构建的图形协议的构造函数连接到您选择的数据库。

基本流程非常相似，除了使用 Clojure 协议。