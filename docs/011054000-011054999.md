# StackOverflow 问答 11054000-11054999

# microsoft-dynamics - 从哪里开始 MS Dynamics

> ID：11054000
> 
> 赞同：-1
> 
> 时间：2012-06-15T15:42:30.507
> 
> 标签：microsoft-dynamics

有人能告诉我从哪里开始学习 Microsoft Dynamics 吗？也许一本书或在线会有所帮助

我的主要背景是 C#，主要是 asp.net 和过去 5 年的服务，尝试开始学习 Dynamics 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:50:58.827

您好，首先收集互联网上可用的 pdf 电子书，具体取决于您使用的版本，我假设 AX 2009 / 2012，所以这里有一些我知道的文档；

Dynamics AX 2009 简介 Dynamics AX 2009 Cook Book MorphxIT Inside Dynamics AX 2009

此外，如果您与客户或合作伙伴在一起，您可以使用开发包。

如果您精通 C#，x++ 对您来说不是问题，语言非常相似。

# jquery - 在悬停 SlickGrid 的行上显示工具提示

> ID：11054006
> 
> 赞同：2
> 
> 时间：2012-06-15T15:42:55.427
> 
> 标签：jquery, .net, tooltip, title, slickgrid

我是 jquery 的新手。

我的任务是在 slickgrid 的每一行上放置一个工具提示。我知道如何ajax它。但是，阅读 slickgrid 文档时，“悬停”或“工具提示”等选项中没有任何内容。

我的电话是这样的：

```
var grid = new gridd.Grid("#ite", result,
                [{ id: "var1", field: "var1" },
                    { id: "var2", field: "var2" },
                    { id: "var3", field: "var3", width: 100, resizable: false },
                    { id: "var4",  field: "var4", width: 110, resizable: false}],
                { forceFitColumns: true },
                //I thought of something like
                { onHover: function.. },
                //
                { onClick: function (e, row, cell) {
                    var result = this.getData();

                    postSomething(result[row]);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T17:02:12.040

获取信息的一种选择是订阅网格的事件`onMouseEnter`和`onMouseLeave`. 你可以使用任何你想让文本跟随鼠标的工具提示库。

使用该事件来发现您在哪个单元格上方。我使用数据视图，因此需要`view.getItem`在任何行被过滤掉的情况下使用。如果您只是在不过滤的情况下显示数据，我相信`data[cell.row]`会起作用，但您需要进行测试。

这只会让您将信息放入工具提示中，您需要使用类似的东西在鼠标之后将其放入工具提示中[。](https://stackoverflow.com/q/6638128)对于我的测试，我刚刚更新了一个标签（带有 id= `boringLabel`）并且标签已正确更新。

```
var grid = new Slick.Grid(selector, view, cols, opts);

....

grid.onMouseLeave.subscribe(function(e, args) {
    $("#boringLabel").text("NONE");
});

grid.onMouseEnter.subscribe(function(e, args) {
    var cell = args.grid.getCellFromEvent(e);
    var item = view.getItem(cell.row);
    $("#boringLabel").text(item.id + " " + item.description);
}); 
```

# python - 从乳胶文件中提取数字

> ID：11054008
> 
> 赞同：1
> 
> 时间：2012-06-15T15:42:59.107
> 
> 标签：python, text

嗨，我可以用一只手来解决以下问题。我正在尝试编写一个 python 脚本，该脚本将从 tex 文件中提取图形并将它们放入另一个文件中。输入文件是这样的：

```
\documentclass[]....
\begin{document}

% More text

\begin{figure}    
figure_info 1
\end{figure}

\begin{figure}    
figure_info 2
\end{figure}    

%More text 
```

输出文件应该是这样的：

```
\begin{figure}    
figure_info 1
\end{figure}

\begin{figure}    
figure_info 2
\end{figure} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:34:19.930

非常感谢我最终以这种方式完成的答案。这可能不是最佳方式，但它确实有效。我尝试了几种建议的解决方案，但它们需要一些调整才能使它们起作用。

```
infile = open('data.tex', 'r')
outfile = open('result.tex', 'w')
extract_block = False
for line in infile:
    if 'begin{figure}' in line:
        extract_block = True
    if extract_block:
        outfile.write(line)
    if 'end{figure}' in line:
        extract_block = False
        outfile.write("------------------------------------------\n\n")

infile.close()
outfile.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:57:44.853

您可以使用正则表达式（[`re`](http://docs.python.org/library/re.html)模块）`findall()`功能来做到这一点。需要注意的是：

*   使用`re.DOTALL`标志来允许“。” 匹配换行符，
*   该点上的“惰性”运算符（“。*？”中的问号），这意味着正则表达式不会贪婪地跑过第一个`\end{figure}`以寻找最长的匹配
*   确保您的正则表达式字符串是一个，`r'raw string'`否则您必须将每个正则表达式反斜杠转义为“\\”，并将正则表达式中的文字反斜杠转义为“\\\\”。硬编码的输入字符串也是如此。

开始了：

```
import re

TEXT = r"""\documentclass[]....
\begin{document}

% More text

\begin{figure}
figure_info 1
\end{figure}

\begin{figure}
figure_info 2
\end{figure}

%More text
"""

RE = r'(\\begin\{figure\}.*?\\end\{figure\})'

m = re.findall(RE, TEXT, re.DOTALL)

if m:
    for match in m:
        print match
        print '' #blank line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:58:18.747

```
import re

# re.M means match across line boundaries
# re.DOTALL means the . wildcard matches \n newlines as well
pattern = re.compile('\\\\begin\{figure\}.*?\\\\end\{figure\}', re.M|re.DOTALL)

# 'with' is the preferred way of opening files; it
#    ensures they are always properly closed
with open("file1.tex") as inf, open("fileout.tex","w") as outf:
    for match in pattern.findall(inf.read()):
        outf.write(match)
        outf.write("\n\n") 
```

**编辑：**发现问题 - 不是在正则表达式中，而是在我匹配的测试文本中（我忘了转义其中的 \b）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:00:09.277

我可能会采取简单的方法并将整个文件读入字符串变量。这个

```
import string

f = open('/tmp/workfile', 'r')
f = f.read()

text = string.split(f,"\begin{figure} ")

text.pop(0)

for a in text:
    a = string.split(a,"\end{figure}")
    print "\begin{figure}\n"
    print a[0]
    print "\end{figure}" 
```

您可以像这样从命令行执行此操作：

```
your_script.py > output_file.tex 
```

# php - Drupal 表单元素表

> ID：11054009
> 
> 赞同：1
> 
> 时间：2012-06-15T15:43:11.943
> 
> 标签：php, forms, drupal-7

我正在尝试在我的模块的配置页面中创建一个表。我需要表格包含一些表单元素、复选框和文本字段。我想像这样构造表格。

启用 | 姓名 | 诠释

Enable 是复选框，name 是标准文本值，int 是文本字段。我希望能够选中名称旁边的框，输入一个值，然后在提交时保存它。目前我正在.admin.inc 中执行此操作。我实际上已经能够制作表格并在其中包含元素。但是我不能把价值放进去或把它们拿出来。

我如何创建行

```
 foreach($rows as  $row){

  $form['table']['intvalue'] = array(
      '#type' => 'textfield',
      '#default_value' => 100,
      '#size' => 8,      
  );
  $form['table']['enable'] = array(
    '#type' => 'checkbox',
    '#default_value' => TRUE,   
  );
  $rows[] = array(drupal_render($form['table']['enable']), $name, drupal_render($form['table']['intvalue']));
  } 
```

这就是我显示表格的方式

```
 $table = theme('table', array(
    'header' => $header,
    'rows' => $rows,
    'id' => 'table-articles',
    'class' => 'articles',
  ));
  $form['table'] = array(

  '#type' => 'item',
  '#title' => t('Table'),
  '#markup' => $table,
  '#weight' => -2,
  ); 
```

任何想法？

# jquery - 带有 ajax 站点刷新的 jQuery load()

> ID：11054010
> 
> 赞同：0
> 
> 时间：2012-06-15T15:43:15.947
> 
> 标签：jquery, load, hashchange, history.js, browser-refresh

我有一个使用 jQuery 的 ajax 站点，我想知道如何允许用户刷新页面并加载适当的内容。

我有它，所以当用户单击具有我的网站域的 href 属性的元素时，该页面的内容会加载到主 div 中。加载的 html 内容只是一个完整的 html 文档，所以我没有加载页面片段。我正在使用 History.js 来检查 URL 和 hashchanges。但是当我刷新页面时，只加载静态内容（无样式），而不是包含主页的页眉和页脚。另一个问题是我需要清除现有哈希以避免 GET 404 错误。我显然想要的是整个页面正常加载。

到目前为止，这是我的代码：

```
jQuery(document).ready(function() {
    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
        console.log("History is not enabled.");
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }
    else {
        console.log("History is enabled");
    }

    //vars for history
    var changes = 0;
    // Bind to StateChange Event
    History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
        var State = History.getState(); // Note: We are using History.getState() instead of event.state
        History.log(State.data, State.title, State.url);
    });

    $("a").click(function(e) {
        e.preventDefault();
        $("#content").load(this.href, function() {
            // Change our States
            changes++;
            History.pushState({state:changes}, "State " + changes, "#" + this.href); // logs {state:1}, "State 1", "?state=1"
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:59:06.990

你在使用**HTML5**吗？您可以使用本地持久性方法来维护已通过 ajax 加载的项目，或存储任何特定的键、在加载或刷新页面时填充所需内容所需的 id。

如果没有 HTML5，则可以选择 jQuery.data，但我认为您无法在页面刷新之前捕获/存储持久性项目，***因此*****这不太可能是一个可行的解决方案**- 所以我唯一可以选择的其他选项想到的是使用**cookie**（在内存中，通过JavaScript（jQuery）创建） - 作为一种解决方案，这将是一场噩梦（可能）有很多不同的点来同步所有状态，以便刷新/重新加载填充正确的东西....但如果设计得当它可以为你工作。

# .net - 代码应该对 CPU 内存模型做出哪些假设，以及如何记录这些假设？

> ID：11054017
> 
> 赞同：2
> 
> 时间：2012-06-15T15:43:37.453
> 
> 标签：.net, multithreading, memory-barriers, memory-model

根据我的阅读，英特尔处理器架构强制执行比 .net 实现所需提供的更强大的内存模型。代码在多大程度上利用英特尔处理器做出的保证是合适的，或者代码应该在多大程度上添加英特尔实现不需要的内存屏障，以防代码迁移到一个较弱的平台记忆模型？定义一个带有方法的静态类是否合适，例如“如果使用弱内存模型，则执行内存屏障”，并要求代码酌情与该库的“强模型”或“弱模型”版本链接？或者，是否可以在程序启动时使用反射来生成这样一个静态类，这样 JIT 编译器可以在使用强模型时，“

如果我有我的 druthers，.net 将提供`MemoryLock`具有一些半锁操作的类的变体，这将要求所有持有半锁的线程都必须遵守该半锁的内存模型。在具有非常强大的内存模型的系统中，半锁不会做任何事情。在内存模型非常弱的系统中，任何希望进入已经有另一个线程的半锁的线程都必须等到第一个线程退出，或者它可以被 CPU 或内核调度（基于根据半锁指定的模型）第一个线程正在使用。请注意，与普通锁不同，a`MemoryLock`永远不会死锁，因为任何冲突的锁定要求的组合都可以通过调度所有线程在同一个 CPU 上运行来解决，并且系统可以释放`MemoryLock`由死掉的线程持有的任何线程（因为这样做的目的`MemoryLock`是保护资源不被访问以违反内存模型的方式，死线程当然不能进行此类访问）。

当然，从 .net 4.0 开始就不存在这样的东西了；鉴于此，处理确实存在的情况的最佳方法是什么？将专为更强的内存模型设计的代码迁移到具有更弱模型的系统，在没有一些方法来强制执行更强的模型的情况下，将是灾难的根源，但是添加大量`Lock`或`MemoryBarrier`对于代码的原始目标平台而言，不必要的调用似乎不是很吸引人。我所知道的强制使用强内存模型的代码的唯一方法是让每个线程设置其 CPU 亲和性。如果有一种方法可以设置一个进程选项，这样 .net 一次只能使用一个内核，那可能会很有用（特别是如果它意味着 JIT 可以用更快的非总线锁定等价物代替总线锁定互锁操作） ，但我知道设置 CPU 亲和性的唯一方法是限制程序将特定选定的 CPU 用于其所有线程，即使该 CPU 被其他应用程序负载过重并且其他一些 CPU 处于空闲状态。

**附录**

考虑以下代码：

```
// 线程 1 -- 假设在开始时 SharedPerson 指向一个人 "Smiley", "George"
  var newPerson = new Person();
  newPerson.LastName = "辛普森";
  newPerson.FirstName = "巴特";
  // 也许MemoryBarrier1
  SharedPerson = newPerson;

// 线程 2
  var wasPerson = SharedPerson;
  // 也许MemoryBarrier2
  var wasLastName = wasPerson.FirstName;
  var WasFirstName = wasPerson.LastName;

```

据我了解，即使没有内存屏障，在英特尔处理器上运行的代码也能保证写入不会被重新排序；因此，在线程 2 中，被读取的人要么是“Smiley”、“George”，要么是“Simpson”、“Bart”。然而，.net 内存模型比这更弱，.net 程序可能会发现自己运行在线程 2 可能会看到不完整对象的处理器上（因为写入`SharedPerson`可能发生在写入之前`newPerson.FirstName`）。在 at 添加内存屏障`MaybeMemoryBarrier1`可以避免这种危险，但无论是否实际需要内存屏障，都会有性能成本。

我认为最低要求的 .net 内存模型不会那么弱，以至于在保证线程 2在读取自身之前`MaybeMemoryBarrier2`永远不会访问所引用的对象的情况下需要（如上面代码中的情况，因为新实例在存储到 ) 之前不会暴露给任何外部代码。另一方面，假设情况略有变化，因此创建了一条记录，然后将其放入队列中（假设队列本身所有必要的锁和内存屏障）；之后，处理器会：`SharedPerson``SharedPerson``SharedPerson``Thread 2``JobInfo``Thread 1`

```
// 线程 1
  var newJob = JobQueue.GetJob(); // 获取 Thread2 写入的 JobInfo
  newJob.StartTime = DateTime.Now(); // 八字节结构可能跨越缓存行
                                     // 一旦写入就永远不会改变
  // 也许MemoryBarrier1
  当前工作 = 新工作；

// 线程 2
  var wasJob = 当前工作；
  // 也许MemoryBarrier2
  var wasStartTime = CurrentJob.StartTime();

```

如果线程 1 有内存屏障，但线程 2 没有，是否可以保证当线程 2 看到`JobInfo`它创建的记录出现在 中时`CurrentJob`，它会正确读取其`StartTime`字段（并且不会看到缓存或部分缓存的值从`Thread 2`操纵那个物体的时候开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T19:27:19.243

TL；DR：您应该只针对 .net 内存模型编写代码；没有更强。

确实，x86 架构的内存模型比 .net 所描述的更强大。

但即使您从未计划将您的代码移植到其他平台（例如 ARM），您也不应该考虑 x86 内存模型。因为您的编译器和 JITer 可以自由地进行破坏 x86 模型的优化。因此，即使在 Intel CPU 上，您也不安全。

例如，JIT 可以决定在您的示例中完全避免使用 newPerson 局部变量，这等效于以下代码：

```
SharedPerson = new Person();
SharedPerson.LastName = "Simpson";
SharedPerson.FirstName = "Bart"; 
```

你看这有多破？即使使用先前初始化的 SharedPerson，线程 2 也可以看到 FirstName 和 LastName == null（如果它在设置之前读取）！这种优化是完全合法的，不会改变单线程行为。

如果没有适当的同步，只要单线程行为不改变，硬件*和运行时就可以随意引入/消除/重新排序内存写入和读取。*

要以原子方式发布对其他线程的引用，您应该使用 volatile write。如果 SharedPerson 是易失的，那么您的代码就可以了（不需要额外的显式内存屏障）。请注意，在 x86 上，易失性写入只是常规写入，因此它是“免费的”：运行时不会添加任何指令。但它确实禁止了 .net 运行时的优化（上面的示例变得非法，因为在 volatile 写入之后没有先前的内存操作可以移动。所以 .LastName 和 .FirstName*必须*在 volatile 写入发生之前分配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:04:23.327

我不相信你的理解是正确的。.NET 内存模型似乎确实允许对存储进行重新排序，也就是说，在某些内存模型极弱的不存在 CPU 上，SharedPerson 可以在 thread1`FirstName`和`LastName`成员存储之前由 thread1 存储，从而导致 "Bart"/null 或 null/ “辛普森”，甚至是 null/null。但我不相信弱内存模型可能导致您的示例中的*写入不一致*（“George”/“Simpson”），因为 thread2 创建了一个本地引用`SharedPerson`并从中读取，而 thread1 正在执行`SharedPerson`用新实例进行原子替换。

[CLI 规范](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)指出：

> 当对一个位置的所有写访问都相同时，符合 CLI 的 CLI 应保证对不大于本机字大小（本机 int 类型的大小）的正确对齐的内存位置的读写访问是原子的（参见 §12.6.2）尺寸

也就是说，据我所知，在任何受支持的平台上都不存在这样的内存模型，Chris Brumme 的博客[在这里](http://blogs.msdn.com/b/cbrumme/archive/2003/05/17/51445.aspx)提出了类似的建议。

# debugging - 从美国以外（南美）为 Twilio 开发

> ID：11054018
> 
> 赞同：4
> 
> 时间：2012-06-15T15:43:43.173
> 
> 标签：debugging, twilio, voip, skype

我们有一位开发人员正在处理我们的 Twilio 代码。他位于玻利瓦。问题是他需要能够拨打和接听电话才能测试 Twilio 代码。据我所知，Twilio 不支持玻利维亚的电话号码。

对此有什么好的解决方法。是否可以使用Skype或其他一些voip解决方案，以便他可以拥有一个美国号码进行调试？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:42:57.487

有数百家 VoIP 提供商每月以几美元的价格向您出售美国号码，来电将通过 SIP 传递给您。因此，您只需要一个 SIP 客户端即可连接到此类提供商，拨打您的美国号码的电话就会落在您的办公桌上。

搜索关键字：“DID 号码”、“虚拟号码”。

最近我通过[http://www.sipglobalphone.com/](http://www.sipglobalphone.com/)获得了一个免费的iNUM 号码，他们还以低价提供美国号码。

也有替代 Twilio 的服务。例如，[http://www.plivo.org/](http://www.plivo.org/) 是具有类似功能的开源产品。

# ios - iOS：检测touchEnded是否来自屏幕滑出或抬起手指？

> ID：11054019
> 
> 赞同：6
> 
> 时间：2012-06-15T15:43:45.487
> 
> 标签：ios, touch

在 iOS 中，有什么方法可以判断触摸何时结束，是通过滑出屏幕还是用户抬起手指而结束？

我不知道为什么，但我希望在发生这种情况时取消触摸，但事实并非如此。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:47:28.043

这是标准的 iOS 行为，您可以在任何 Apple 应用程序中看到它。

您可以检查触摸是否在屏幕末尾结束并将其视为“取消滑动”，但用户可能希望滑动这么远。

我的建议是接受它，因为正如我之前所说，这是标准行为，Apple 告诉我们要坚持它——用户期望标准行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:47:06.910

只能通过扣除。如果手指向屏幕边缘移动，然后触摸在该边缘附近结束，您可以相对确定手指确实滑离了屏幕。如果在触摸结束之前它没有立即移动，则用户可能只是抬起手指。

# graphicsmagick - 在 GraphicsMagick 中编写 BGRA

> ID：11054026
> 
> 赞同：1
> 
> 时间：2012-06-15T15:44:10.290
> 
> 标签：graphicsmagick

在 GraphicsMagick 中，我可以导出各种格式的图像。例如 RGB。通过写作

```
Blob blob( imageContent, imageSize );
image.magick("RGB");
image.write( &blob ); 
```

似乎不支持以**RGBA**导出。什么是最简单和最快的方法？使用 ColorMatrix 似乎有点麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:56:14.423

我还没有找到 GrapicsMagick 定义的写入 Blob 的方法，但这有效：

```
Image image("test.jpg");

int rows = image.rows();
int cols = image.columns();
int imageStride = cols*4;
size_t imageSize = rows*imageStride;
LPBYTE imageContent = (LPBYTE) malloc(imageSize);

image.write( 0,0, cols, rows, "BGRA", CharPixel, imageContent ); 
```

# javascript - jquery - Firefox 中的 event.preventDefault()

> ID：11054028
> 
> 赞同：0
> 
> 时间：2012-06-15T15:44:13.923
> 
> 标签：javascript, jquery

我`event.preventDefault()`在Firefox中遇到问题，它无法正常工作。这是jquery代码。

```
$("#facebook-del-1").click(function(){
event.preventDefault();
var selector = "#"+$(this).attr("id");
$(selector).closest('a.tag').remove();
}); 
```

它可以在 Chrome 中运行，但不能在 Firefox 中运行。你可以在这里查看[http://jsfiddle.net/qXPj8/2/](http://jsfiddle.net/qXPj8/2/)

有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:44:42.093

将事件参数传递给处理函数，

```
//                                   V-- Added event arg
$("#facebook-del-1").click(function(event) { 
```

**固定小提琴：http:** [//jsfiddle.net/skram/qXPj8/6/](http://jsfiddle.net/skram/qXPj8/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:44:46.777

您似乎忘记了*事件*参数：

```
$("#facebook-del-1").click(function(event){
    event.preventDefault();
    var selector = "#"+$(this).attr("id");
    $(selector).closest('a.tag').remove();
}); 
```

请参考[event.preventDefault](http://api.jquery.com/event.preventDefault/)文档页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:49:44.677

正如其他答案所述，您应该将“事件”参数传递给处理程序方法。如果您不想传递“事件”参数，您应该能够在方法结束时“返回 false”并禁用默认行为。

# javascript - 带有 setTimeout 的 javascript 递增/递减数

> ID：11054029
> 
> 赞同：-2
> 
> 时间：2012-06-15T15:44:22.240
> 
> 标签：javascript, settimeout, increment

我正在尝试使用计时器增加和减少一个数字，我的代码不起作用......

```
var i = 0,
max = 5,
timer = function() {
    if (i<max) {
        i++;
        console.log(i) //ok
    } 

    if (i==max) {
        i--;
        console.log(i) //fail ...
    }

    setTimeout(timer, 60); 
}; 

timer(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:50:14.323

当它到达 5 时，第二个 if 语句导致它转到 4，然后第一个 if 语句将它放回 5。

```
var i = 0,
max = 5,
dir = 0; // 0 for up, 1 for down.

timer = function() {
    if (dir == 0) {
        i++;
        console.log(i)
    }

    if (dir == 1) {
        i--;
        console.log(i)
    }

    if(i == 0) {
        dir = 0;
    } else if(i == max) {
        dir = 1;
    }
    setTimeout(timer, 60);
}

timer(); 
```

我使用方向变量来跟踪它的计数方式。

[演示](http://jsfiddle.net/Rjf89/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:13:20.137

@sachleens 想法，代码更短一点

```
var i = 0, max = 5, cnt = 1;
      timer = function() {
        i += cnt;
        if (i>=max) {cnt = -1;}
        if (i===0)  {cnt = 1;}
        console.log(i);
        setTimeout(timer,60);
      }
timer(); 
```

# function - 滚动脚本、scrollTop、回调函数

> ID：11054031
> 
> 赞同：0
> 
> 时间：2012-06-15T15:44:35.547
> 
> 标签：function, callback, scroll, scrolltop

在这里，我正在运行一个成绩单，该成绩单也突出显示了当前单词。成绩单向上滚动并且文本失去视图时的问题，突出显示也是如此。我想要发生的是，当高光到达框的顶部时，它应该保持在顶线上的视图中，而不会向上消失。你能帮我吗？？？

```
function runTransript() {

//var player = _V_('video');
 //var videoCurrentTime = player.currentTime();

var transcriptSpeed = 300; //videoCurrentTime; 

transcriptSpeed *= $("#transcript .full-transcript").parent().height();

$("div").css({ top: $(this).parent().height() + 'px' });
$("div").animate({top: -$(this).height() }, transcriptSpeed, 'linear');
$(".transcript-text").each(function(index){

    var curObj = $(this);
    var interval = $(this).attr('time');

    curObj.delay(interval).animate({color: '#5c9127'}, 100, function() {
        $(this).prev().removeAttr("style").prev().removeAttr("style").prev().removeAttr("style");
    });

}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:33:59.810

函数 runTransript() {

```
var player = _V_('video'),
    videoCurrentTime = player.currentTime(),
    lineCount = 1,
    transcriptSpeed = videoCurrentTime;

transcriptSpeed *= $("#transcript .full-transcript").parent().height();

$("div").css({ top: $(this).parent().height() + 'px' });
$("div").each(function(index){

    var curObj = $(this);
    var interval = $(this).attr('time');

    curObj.delay(interval).animate({color: '#f0e53d'}, 100, function() {

        var pos = $(this).position();
        console.log(pos.left);
        if(parseInt(pos.left) == 15 && index > 0){
            $("div").delay(2000).animate({top: "-"+parseInt(lineCount*35)+"px" }, 'slow', 'linear');
            lineCount++;
        } 
        $(this).addClass('active').prev().removeClass('active').removeAttr("style");
    });

}); 
```

}

# c# - HttpContext.Current.Items 被踩？请求范围内的数据

> ID：11054032
> 
> 赞同：0
> 
> 时间：2012-06-15T15:44:36.167
> 
> 标签：c#, rest, iis-7, httpcontext, wcf-web-api

我正在研究使用**WCF WebApi Preview 6**构建的**REST API**。这适用于多租户应用程序并由不同的客户端（Web 和移动应用程序）使用。

 **此 API 上的某些资源需要身份验证才能访问或操作它们。这些端点的 API 信息由客户端使用加密令牌提供，其中包含有关设备、用户、租户等的加密信息。

我创建了一个压力测试，它实际上揭示了租户之间的数据泄漏。我将解释一个具体的例子和工作流程，所以你有一个更好的主意。

客户端设备中的用户使用 API 进行身份验证并获取令牌。稍后，设备将资源发布到需要安全令牌才能运行的端点。令牌验证发生在**MessageHandler**中，它确保一切正常，然后将瞬态信息放入**HttpCurrent.Items**中，以便其余请求可用。

我们使用**HttpContext.Current.Items**是因为我们*确定*它的范围是请求，所以稍后在处理请求时，我可以参考正确的租户并在那里插入信息。

我们不确定发生了什么，但根据 HttpContext.Current.Items 中的信息，一些数据被路由到了错误的租户。

这怎么可能发生？

HttpContext.Current.Items 中的信息是否在请求完成之前被踩到？处理数据的过程实际上是在请求*之外吗？***

# c# - 如何使用一种方法填充 DropDownList 或 AJAX ComboBox

> ID：11054041
> 
> 赞同：1
> 
> 时间：2012-06-15T15:44:56.913
> 
> 标签：c#, drop-down-menu, combobox, polymorphism

我正在尝试编写一个可以在 C# 中填充 DropDownList 或 AJAX ComboBox（而不是具有两个独立的、几乎相同的方法）的方法。我向该方法传递了一个查询字符串、文本字段的名称、值字段的名称以及下拉对象。这是我到目前为止所拥有的：

```
public static void BindDropDown(string selectCmd, string textField, string valueField, object ddList)
//Populate dropdown list (DropDownList or ComboBox)
{
    // var for dropdown object
    object _ddl = null;

    // Get type of dropdown
    if (ddList.GetType() == typeof(DropDownList))
    {
        _ddl = (DropDownList)ddList;
    }
    else if (ddList.GetType() == typeof(ComboBox))
    {
        _ddl = (ComboBox)ddList;
    }

    // Setup DB connection
    SqlConnection dbConn = new SqlConnection(LTConnStr);
    SqlCommand myCmd = new SqlCommand(selectCmd, dbConn);

    //Set dropdown list params
    _ddl.DataTextField = textField;
    _ddl.DataValueField = valueField;

    try
    {
        dbConn.Open();
        _ddl.DataSource = myCmd.ExecuteReader();
        _ddl.DataBind();
    }
    finally
    {
        dbConn.Close();
    }
} //end method BindDropDown 
```

但我得到错误“'object'不包含'DataTextField'的定义......”。我也尝试过“is”语法：

```
 // Get type of dropdown
        if (ddList is DropDownList)
        {
            _ddl = (DropDownList)ddList;
        }
        else if (ddList is ComboBox)
        {
            _ddl = (ComboBox)ddList;
        } 
```

结果相同。我知道我很接近，但我无法完全弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:59:36.000

我会说这个“对象_ddl = null;” 导致问题。对象不公开 DataTextField 属性。

如果您使用的是 .net 4，则可以更改：

对象_ddl = null;

到

动态_ddl = null;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:01:37.787

您的`_ddl`变量是对象类型，强制转换不会改变这一事实，因此即使您已强制转换`ddList`为 a`DropDownList`或`ComboBox`您只能访问基础`object`类的方法/属性。

基本上，您应该查找它们都继承自包含您需要使用的方法的类。这是[ListControl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.aspx)类。

然后，您可以简单地使用：

```
ListControl _ddl = null; 
```

代替：

```
object _ddl = null; 
```

或者你可以在投射时做这样的事情：

```
ListControl _ddl = null;
_ddl = ddList as DropDownList;
_ddl = (_ddl == null) ? ddList as ComboBox: _ddl;
if (_ddl == null) { return; } 
```

# php - PHP while循环返回空结果

> ID：11054042
> 
> 赞同：0
> 
> 时间：2012-06-15T15:44:57.020
> 
> 标签：php, mysql

```
$connect_status = "SELECT connected_to_id FROM tbl_connect WHERE user_id = 
{$_SESSION['user_id']}";

$exec_connstatus_query = mysql_query($connect_status, $db_connect);

while($check_status = mysql_fetch_array($exec_connstatus_query))
{   
  if ($check_status['connected_to_id'] == $profileid)
  {
    echo "{$check_status['connected_to_id']}";
  }
  else
  {
    echo "fail";
  }
} 
```

这段代码困扰了我 3 个小时。这里的问题是即使这种情况：

`if ($check_status['connected_to_id'] == $profileid)`

`else`返回 false，当语句执行时我看不到“失败” 。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:53:24.753

mysql_query() 出错时返回 FALSE，并且循环根本不会执行。如果 $_SESSION['user_id'] 不是数字，就会发生这种情况。为什么不只是

```
$connect_status = "SELECT connected_to_id FROM tbl_connect WHERE user_id ='$_SESSION[user_id]'"; 
```

如果没有（更多）行，同上 mysql_fetch_array() 返回 FALSE。**如果您的会话在tbl_connect**中不存在，则循环不会执行。你不想要这样的东西：

```
$connect_status = "SELECT connected_to_id FROM tbl_connect 
                   WHERE user_id ='$_SESSION[user_id]' LIMIT 1";
$exec_connstatus_query = mysql_query($connect_status, $db_connect);
if( ($check_status = mysql_fetch_array($exec_connstatus_query)) && 
    ($check_status['connected_to_id'] == $profileid) ) {
    echo "{$check_status['connected_to_id']}";
} else {
    echo "fail";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:51:36.387

我建议您先检查一下`$exec_connstatus_query`，因为可能是您的查询没有正确执行，这就是为什么控制没有进入 while 循环的原因。你的回应是空的。打印 $exec_connstatus_query 并首先检查。
或者如果查询返回零记录，在这种情况下循环将不会运行。

# ruby-on-rails - Rails 中非常有限的 502 Bad Gateway 错误

> ID：11054049
> 
> 赞同：2
> 
> 时间：2012-06-15T15:45:23.730
> 
> 标签：ruby-on-rails

这太奇怪了。

我的一个客户一直收到 502 Bad Gateway 错误（在每个浏览器中都没有失败），但只有在我的 Rails 站点的一个特定页面上，她才能正常访问其余页面。此外，其他所有人（包括同一公司网络上的人员）都可以正常访问同一页面。此外，production.log 不包含任何错误痕迹，它表示页面已呈现 200 OK。这可能是什么原因造成的？？？

编辑：我已经仔细检查了其他 Rails 错误，例如尝试调用不存在的产品 ID 的详细信息，而是导致 404 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:03.377

我找到了。这是页面标题（会话对象-> cookie）变得太大的错误。我正在使用 Facebook 身份验证并将 Facebook 用户会话存储在会话对象中。对于这个人来说，她在 Facebook 上的个人信息太长了，以至于在其他人都很好的情况下，她收到了这个错误。我通过仅将 Facebook ID 存储在会话对象中来修复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T14:55:48.770

仅几页我就有类似的问题，这很奇怪，将以下设置添加到 nginx.conf 修复了它

```
proxy_connect_timeout       600;
proxy_send_timeout          600;
proxy_read_timeout          600;
send_timeout                600; 
```

希望有帮助

# java - Java 的 Proxy 类将从哪里检索代理配置？

> ID：11054062
> 
> 赞同：0
> 
> 时间：2012-06-15T15:46:13.203
> 
> 标签：java, proxy

我对 Java 的 Proxy 类有一个基本的疑问。假设一台电脑正在使用代理连接互联网，那么通过java代码找到代理地址如下，

```
Proxy next = ProxySelector.getDefault().select(new URI("http://www.google.com/")).iterator().next();
proxy_address = next.address().toString(); 
```

在这里，变量将保存代理地址。现在，这个代理类会从哪里找到地址详细信息？谁能解释一下？

还有一件事是，如果它来自网络浏览器，那么如果我安装了多个浏览器，那么它将从哪个浏览器获取配置？

我怀疑它会从 IE 中获取（对于 Windows）。那正确吗？如果是这样，Linux 和 Mac 呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:53:31.027

在 Windows XP 上，代理设置保存在注册表中。UNIX 有一个名为`http_proxy`. 代理设置可通过 Internet Explorer 访问和更改。

如果您有多个浏览器，则每个浏览器都会从操作系统获取代理设置。

# c - printf 的参数数量错误会导致奇怪的结果

> ID：11054064
> 
> 赞同：1
> 
> 时间：2012-06-15T15:46:18.680
> 
> 标签：c, printf, format-specifiers

```
#include <stdio.h>

int main() {
   int i=10,j=20;
   printf("%d%d%d",i,j);
   printf("%d",i,j); 
   return 0;
} 
```

使用 Turbo C 编译器，输出如下：

```
10 10 垃圾值

20

```

有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:50:55.920

行为是*undefined*，这意味着语言规范没有说明在这种情况下会发生什么。这完全取决于编译器的实现和您的系统架构。解释未定义的行为有时会很有趣，经常令人抓狂，而且几乎总是无用的——所以不要担心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:49:48.233

第一次调用`printf()`有一个太多的格式说明符，导致未定义的行为。在这种情况下，会打印一个垃圾值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:49:52.007

```
printf("%d%d%d",i,j); => 
```

你告诉 printf 打印三个整数，但你只提供了三个，所以 printf 从堆栈中打印一些垃圾。另一个：

```
printf("%d",i,j); 
```

应该只取一个整数，但你传递了两个。C 语言无法防范此类错误，并且发生的情况完全未定义，因此除非您知道编译器内部，否则很难解释您如何*准确看到这些输出，并且由于该代码错误并且预计会失败，因此没有那么有用。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:51:22.460

你把你的格式说明符都弄混了，我不认为你发布的代码是你的实际代码。在我的 Visual Studio 编译器上，我看到了这个：

```
1020010 
```

每个都`%d`表示`printf`应该插入一个整数值的地方。

```
printf("%d%d%d",i,j); 
```

你告诉`printf`期待三个，但你只给了它两个。Turbo C 可能在后台对参数做一些不同的事情，但您仍然需要将格式说明符与您的参数相匹配：

```
printf("%d%d",i,j); 
```

# wix - 如何更改签名安装程序（WiX）的 UAC 提示中的图标？

> ID：11054069
> 
> 赞同：14
> 
> 时间：2012-06-15T15:46:30.730
> 
> 标签：wix, windows-installer, uac, wix3.5

我正在使用 WiX 3.5 (VS2010) 创建一个 msi 包，一切都很好，除了我不知道如何在 UAC 提示符中设置我的图标。我已经有一个签名证书，并且知道如何使用“signtool.exe”进行签名以在 UAC 提示符上获取发布者信息和应用程序描述，但我无法更改默认图标，也找不到任何有关如何执行此操作的信息.

我的 WiX 脚本包含以下行：

```
<Icon Id="MyApp.ico" SourceFile="$(var.SolutionDir)Libraries\Images\MyApp.ico" />
<Property Id="ARPPRODUCTICON" Value="MyApp.ico" /> 
```

但我想这仅适用于添加/删除程序菜单。

这是我的 UAC 现在的样子（抱歉俄语）：![带有默认图标的 UAC 提示](../Images/6f83c797953baf5f3bc6f68c0177d32f.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T20:56:53.573

MSI 文件没有可执行文件那样的图标，因此您无法自定义此对话框上的图标。您看到的是调用进程（我认为）的图标，它是 msiexec.exe，用于执行 MSI 文件。

# qt - Qt 自定义小部件内部边界

> ID：11054071
> 
> 赞同：0
> 
> 时间：2012-06-15T15:46:45.200
> 
> 标签：qt

我在 Qt 中编写了一个自定义小部件，它子类化并进行自定义绘画，但是它是一个非矩形对象（具有多边形顶部区域），并且工作正常，但是当添加布局时，它们“打破”到顶部区域，因为它是得到错误的边界区域。无论如何我可以在自定义小部件中指定子小部件的边界区域是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:20:04.943

一种方法是`QLayout::setContentsMargins`在小部件的布局上使用。

如果您想要一个不是矩形的边界，您可以使用填充了固定大小的矩形填充物的网格布局。填充物可以使用[扫描线转换](https://stackoverflow.com/a/11043448/1329652)从多边形派生——只需将多个扫描线合并成一个更高的边界矩形并将其用于填充物。

# javascript - Url 编码 javascript 对象字面量

> ID：11054078
> 
> 赞同：13
> 
> 时间：2012-06-15T15:47:07.187
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3, url

我有模特

```
public class SomeModel
{
    public string SomeText { get; set; }
} 
```

在 javascript 中，我制作了模型的 javascript 对象文字：

```
var model = {
                SomeText: "test"
            };
var serializedData = JSON.stringify(model); 
```

这会生成一个如下所示的字符串：

```
"{"SomeText":"test"}" 
```

现在假设我想将此模型发送到一个控制器，该控制器接受具有以下功能的此类模型：

```
public void Index(SomeModel model)
{
} 
```

我需要的是一个 url 字符串，其中模型具有以下形式：

```
"?SomeText=test" 
```

我知道当您通过 ajax post 发送模型时，ajax 正是这样做的：

```
$.ajax({type:"POST", 
        url: "someUrl", 
        data: serializedData,
        ...
}); 
```

'data:' 对序列化数据进行 url 编码。

但是我其实并不想使用ajax，所以我需要自己构建这个url。我想做与 ajax 对“数据：”所做的完全相同的事情。如何自己对序列化数据进行 url 编码？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-15T15:51:05.667

你应该使用[`jQuery.param`](http://api.jquery.com/jQuery.param/)：

```
$.param({foo:'bar', fizz:'buzz'});
//produces foo=bar&fizz=buzz 
```

* * *

数组也可以：

```
$.param({foo:['bar', 'baz']});
//produces foo%5B%5D=bar&foo%5B%5D=baz
//which is the url encoded form of: foo[]=bar&foo[]=baz 
```

如果您需要传统的数组语法，请使用第二个参数：

```
$.param({foo:['bar','baz']}, true);
//produces foo=bar&foo=baz 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T15:49:59.030

为了转义单个值，Javascript 具有函数`escape`. 您必须提供自己的函数来遍历对象、添加键等等。

**编辑**

Esailija 好心提醒我，`escape`很多常见的情况都处理不好，而且`encodeURIComponent`好多了。如果您已经在使用 jQuery（并且您应该使用），那么 zzzzBov 的答案会更好。

# drupal - Outlook 2010 日历是否可以生成要由另一个系统导入的 ical 提要

> ID：11054080
> 
> 赞同：0
> 
> 时间：2012-06-15T15:47:13.657
> 
> 标签：drupal, calendar, outlook, icalendar, outlook-2010

我希望我的 Drupal 站点有一个同步到外部 Outlook 日历的日历。数据输入发生在 Outlook 日历端，因此我希望从 Outlook 同步到我的 Drupal 站点。

我已经找到了很多关于这方面的信息：如何在 Outlook 上订阅 ical 提要（但它会从 Outlook 获取数据而不是从 Outlook 获取数据。叹息），如何将我的 Outlook 日历与谷歌日历同步等。

但是，我还没有找到有关如何获取源自我的 Outlook 日历的 iCal 提要的信息。那是因为它无法完成还是我只是没有在正确的地方看:-)。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:00:17.817

如果您的 Outlook 数据已经与谷歌日历同步，那么您可以使用完整日历模块显示谷歌日历，从版本 2 开始。

[http://drupal.org/node/1056752](http://drupal.org/node/1056752)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:22:13.443

如果您的 Outlook 服务器具有 Outlook Web 访问 (OWA)，那么您可以使用 Exchange Web 服务将您的 drupal 站点同步到您的 Outlook。这里至少有一个开源项目：http: [//davmail.sourceforge.net/](http://davmail.sourceforge.net/)以获取详细信息。

# image-processing - 图像中黑白文本的二值化

> ID：11054083
> 
> 赞同：0
> 
> 时间：2012-06-15T15:47:26.080
> 
> 标签：image-processing

许多文档图像二值化算法假设黑色文本位于白色背景上，反之亦然。我的问题是，如果白色和黑色文本共存于一个文档图像中，我该怎么办。任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:10:22.200

检测黑色区域并反转它们。

# c++ - 从 dll 启动 Qt GUI（在 DLLStart 函数中）

> ID：11054087
> 
> 赞同：10
> 
> 时间：2012-06-15T15:47:32.700
> 
> 标签：c++, qt, dll

我必须从公开的 dll`DLLStart`和`DLLStop`. main中的正常（.exe）方法如下：

```
int main(int argc, char *argv[]) {
    QApplication a(argc, argv); Dialog w;
    w.show();
    return a.exec();
} 
```

问题是阻塞`a.exec()`调用，因为在 dll 中`DLLStart`需要立即返回（见下文）。有什么解决方法吗？[备注：这个问题与“将 Qt GUI 添加到动态库](https://stackoverflow.com/questions/1048254/adding-a-qt-gui-to-a-dynamic-library)”有一些共同点，但它并不完全重复。

```
/** start module  */
int __stdcall DLLStart(void) {
    .. 
    QApplication qaDll(ac, av); Dialog w;
    w.show();
    qaDll.exec();
    return 0; // never reached
}

/** stop module */
void __stdcall DLLStop(void) { } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T19:02:18.447

One way works on Windows is to start `QApplication` in a separate `QThread`. It's not portable -- it doesn't work on OS X (I'm researching a fix).

But, you don't need a separate thread. If you inject your code into a running application, it already has an event loop. You only need to create a global `QApplication` object and you're done. The event loop is already running, so you don't need to call `exec()`. Qt's windows integrate with the native event loop, and everything is good on that front.

You [do need](https://stackoverflow.com/q/16540743/1329652) to call `QCoreApplication::processEvents` once. It will integrate the current application instance into the windows event loop, and that's it.

Thus, your startup code could look as follows:

```
static struct Data {
  int argc = 1;
  char *argv[2] = {strdup("dummy"), {}};
  QApplication app{argc, argv};
  MainWindow win;
} *d;

static void startup() {
  d = new Data;
  d->win.show();
  d->app.processEvents();
}

static void shutdown() {
  delete d;
} 
```

The `startup()` and `shutdown()` should be called at appropriate times (on process attach and detach).

* * *

Old answer follows. This is not completely up to date anymore.

A short example is below, for a complete self-contained example see my [other answer](https://stackoverflow.com/a/10847072/1329652).

It is not portable and that's why Qt documentation advises against it. It works just fine on Windows. The main thread is not magic -- not on Windows. Cocoa on OS X is clumsy in a way and makes it impossible, apparently :(.

Note that if the application that loads the DLL already uses Qt, then there's nothing further for you to do. Ensure you compile your DLL with the same C++ compiler, link against the same C++ runtime, and use a version of Qt that's binary compatible with the one used by application. You then don't need your own instance of `QApplication`. To get some useful work done, show a Widget or instantiate some `QObjects` with timers that will get them busy. You can also use `QMetaObject::invokeMethod(obj, "mySlot", Qt::QueuedConnection)` instead of using timers: the call will be made when control returns to the event loop.

If that's not possible, then the below is your only option. Works just fine, as far as I can tell.

Note that I'm a bit sarcastic here: The conditions in the previous paragraph will be met reliably maybe if you are the author of the application that uses the DLL. Otherwise -- forget about it.

```
class AppThread : public QThread {
  int & argc;
  char ** argv;
  int result;
  void run() {
    QApplication a(argc, argv);
    Dialog d;
    d.show();
    result = a.exec();
  }
public:
  AppThread(int & argc, char ** argv) : argc(argc), argv(argv) {}
  ~AppThread() { quit(); wait(); }
}

extern "C" int __stdcall DLLStart(void) {
  auto *thread = new AppThread(argc, argv);
  thread->start();
  return 0;
}

extern "C" void __stdcall DLLStop(void) {
  delete qApp->thread();
} 
```

# backbone.js - 主干模型在 id 属性中有 url

> ID：11054088
> 
> 赞同：0
> 
> 时间：2012-06-15T15:47:43.490
> 
> 标签：backbone.js

我不确定这是否是它应该的方式，但是在调试我的主干应用程序时，我意识到我的模型在其 ID 属性中具有 API 的 URL，例如：

```
 App.houseCollection.models[0]
       Object
        _callbacks: Object
        _escapedAttributes: Object
        _pending: Object
        _previousAttributes: Object
        _silent: Object
        attributes: Object
        changed: Object
        cid: "c4"
        collection: Object
        id: "/api/v1/post/4/"
        __proto__: Object 
```

我有一条路由需要通过 ID 访问集合中的模型，即在此示例中只是数字 ID`id = 4`

做`App.houseCollection.get('/api/v1/post/4/')`作品，但我希望能够做到`App.houseCollection.get(4)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:53:37.340

大概您的服务器将返回`id`作为 URL 而不是简单的数字。修复您的服务器或向您的模型添加一个[`parse`方法](http://documentcloud.github.com/backbone/#Model-parse)来清理`id`：

```
parse: function(response) {
    var matches;
    if(response.id
    && (matches = response.id.match(/\/(\d+)\/$/)))
        response.id = parseInt(matches[1], 10);
    return response;
} 
```

当然，您可能想要调整正则表达式。

# vb.net - 为什么 combobox.Text 的值在实际更改时会滞后？

> ID：11054092
> 
> 赞同：1
> 
> 时间：2012-06-15T15:48:08.013
> 
> 标签：vb.net, winforms

真的很奇怪的问题，也许有人可以阐明。我有一个带有组合框的 Windows 窗体。当您进行选择时，它应该更新另一个控件，所以我有

```
Private Sub LoadAssociatedLocations() Handles combobox_categories.SelectionChangeCommitted

        Dim test As String = combobox_categories.Text 
```

我已经在其他 winforms 项目中毫无问题地做到了这一点，但在这种情况下，由于某种原因，当组合框发生更改时，combobox.Text 具有先前选择的值。SelectedIndex 值是连接索引，但 Tex 始终是先前选择的索引的文本。我当然可以只使用选定的索引，但我想知道是什么导致了这种奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:58:11.773

尝试改用该`SelectedItem`属性。

```
Private Sub LoadAssociatedLocations(ByVal sender As Object, _
                                    ByVal e As EventArgs) _
                            Handles combobox_categories.SelectionChangeCommitted
   TextBox1.Text = combobox_categories.SelectedItem.ToString
End Sub 
```

或者，设置`DropDownStyle = DropDownList`将使`comboBox1.Text`更新正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:58:01.057

显然（至少根据您的示例）您有两个组合框。一个叫`combobox`一个`combobox_categories`。你用错了吗？

# media - JavaFx 和在 Ubuntu 下播放高清电影 - 低 FPS

> ID：11054096
> 
> 赞同：1
> 
> 时间：2012-06-15T15:48:37.547
> 
> 标签：media, h.264, javafx-2

我一直在用 JavaFx 2.x 开发一个可以播放电影的应用程序。据我了解，此平台支持的唯一有效电影格式是`H.264/MPEG-4`. 现在，在 Windows 下它工作得很好，但是当我在 Ubuntu 下运行完全相同的代码时 - FPS 很明显。这不是一个巨大的差异，但人们肯定可以发现它，因此 - 让观看变得不舒服。

我注意到它在我的笔记本电脑（2xCores 和内置标准 VGA 卡）上，在 PC（4xCores + ATI Radeon）上不太明显。

我的问题是 -**有没有办法在 Linux 下提高这个 FPS 因素**？也许选择一些特殊的分布？也许安装一些其他编解码器？也许是 Linux 下的 JavaFx 2.x 的东西，在这方面会有所改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:45:02.513

> 此平台支持的唯一有效电影格式是 H.264/MPEG-4。

该平台还支持 VP6 编解码器。

有一个 Stack Overflow 答案总结了[JavaFX 2.1 视频播放功能和注意事项](https://stackoverflow.com/questions/10440152/any-simple-and-up-to-date-java-frameworks-for-embedding-movies-within-a-swing/10441210#10441210)。答案包括播放 VP6 编码视频的示例应用程序。

> 也许是 Linux 下的 JavaFx 2.x 的东西，在这方面会有所改进？

可能，Linux 上的 JavaFX 目前只是开发人员预览版。

> 在 Windows 下它工作得很好，但是当我在 Ubuntu 下运行完全相同的代码时 - FPS 很明显。

试用最新的[JavaFX 开发人员预览版](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)。如果您在 Ununtu 下仍然遇到不稳定的帧速率，请创建[jira 问题](http://javafx-jira.kenai.com)，附上您的*短*视频和*简短*的示例播放器代码。

# java - 从 JSON 响应中获取 String[][] 数组

> ID：11054099
> 
> 赞同：0
> 
> 时间：2012-06-15T15:48:46.673
> 
> 标签：java, json, string

我从服务器收到以下 JSON 响应...

```
[["1","1"],["2","1"],["3","1"],["4","1"],["5","1"],["6","1"],["7","1"],["8","1"],["9","2"],["10","3"],["11","3"],["12","3"],["13","3"],["14","3"],["15","3"],["16","3"],["17","3"],["18","3"],["19","3"]] 
```

它是 JSON 格式，我把它当作一个`String[]`类似这样的东西......

```
String response = Response.getValue();
System.out.println(response) = [["1","1"],["2","1"],["3","1"],["4","1"],["5","1"],["6","1"],["7","1"],["8","1"],["9","2"],["10","3"],["11","3"],["12","3"],["13","3"],["14","3"],["15","3"],["16","3"],["17","3"],["18","3"],["19","3"]] 
```

但是，响应是 2 个值的矩阵，`[USU_ID, DEPARTMENT]`我需要在`String[][]`. 我怎样才能做到这一点？我尝试使用`StringTokenizer`，但效果不是很好。

这是我写的代码...

```
public static String[][] Json2Matrix(String jsonStringArray) {
        int i = 0;
        int j = 0;

        String[][] mstrJsonString = null;
        StringTokenizer tokElementos, tokSubelementos, tokTemp;
        //jsonArray = "[["a","b"],["c","d"],["e","f"]]";
        //jsonStringArray = jsonStringArray.replace("\"", "");
        //jsonArray = "[[a,b],[c,d],[e,f]]";
        jsonStringArray = jsonStringArray.substring(1, jsonStringArray.length() - 2);
        //jsonArray = "[a,b],[c,d],[e,f]";/

        //System.out.println(jsonStringArray);

        //JSONSerializer.toJSON(jsonStringArray);

        //System.out.println(jsonArray.toString());

        //<editor-fold defaultstate="collapsed" desc="Prueba">
        tokElementos = new StringTokenizer(jsonStringArray, "[]");

        tokTemp = tokElementos;
        tokSubelementos = new StringTokenizer(tokTemp.nextToken(), ",");

        //System.out.println(tokElementos.countTokens());

        //System.out.println(tokElementos.nextToken());

        //System.out.println(tokSubelementos.countTokens()/2);

        mstrJsonString = new String[tokElementos.countTokens()][tokSubelementos.countTokens()];

        while (tokElementos.hasMoreTokens()) {
            tokSubelementos = new StringTokenizer(tokElementos.nextToken(), ",");
            j = 0;
            while (tokSubelementos.hasMoreTokens()) {

                mstrJsonString[i][j] = tokSubelementos.nextToken();
                System.out.println(i + "," + j + " " + mstrJsonString[i][j]);
                j++;
            }
            i++;

        }
        //</editor-fold>
        return mstrJsonString;
    } 
```

我把它作为输出......

```
run:
1,0 "2"
1,1 "1"
3,0 "3"
3,1 "1"
5,0 "4"
5,1 "1"
7,0 "5"
7,1 "1"
9,0 "6"
9,1 "1"
11,0 "7"
11,1 "1"
13,0 "8"
13,1 "1"
15,0 "9"
15,1 "2"
17,0 "10"
17,1 "3"
19,0 "11"
19,1 "3"
21,0 "12"
21,1 "3"
23,0 "13"
23,1 "3"
25,0 "14"
25,1 "3"
27,0 "15"
27,1 "3"
29,0 "16"
29,1 "3"
31,0 "17"
31,1 "3"
33,0 "18"
33,1 "3"
35,0 "19"
35,1 "3" 
```

它得到正确的值，但不正确的索引。有人可以帮我纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:44:52.007

与自己编写原始解析器相比，使用 JSON 解析器可以节省大量精力。

我使用了这些基于 Java 的 JSON 解析器：

1.  杰克逊 [http://jackson.codehaus.org/]
2.  谷歌的 GSON [http://code.google.com/p/google-gson/]

我推荐谷歌的 GSON 为：

1.  您可以将 json 字符串序列化/反序列化为 Java 对象 [POJO]，无需注释 [使用变量名]。
2.  可以轻松地序列化/反序列化深层对象层次结构。
3.  它对 Java 泛型有很好的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:56:11.453

[http://json.org/java/](http://json.org/java/)

希望这会有所帮助，几个月前我正在使用它来使用 JSON 和 java，它工作得非常好（*也在使用 netbeans）

# reverse-proxy - 如何使用反向代理绕过公司可接受的使用政策？

> ID：11054100
> 
> 赞同：0
> 
> 时间：2012-06-15T15:48:53.127
> 
> 标签：reverse-proxy

如何使用反向代理绕过公司可接受的使用政策？可以做些什么来防止这种情况发生？

我正在做一个演示，我只需要知道如何使用反向代理绕过 AUP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-19T21:52:21.620

[![简单的反向代理图](../Images/b646ec0e5950aeebe885ef9337180b85.png)](https://i.stack.imgur.com/T24Ni.gif)

根据上图，假设您是左侧客户端计算机的用户。您连接到右侧的站点，该站点正在反向代理其源下的其他服务。任何可能正在监视您离开公司网络的流量的组织将只能看到与反向代理服务器的连接，而不是其后面的任何其他原始服务器。它们实际上被“隐藏”在视线之外。

现在一般来说，网站只反向代理他们自己的内部服务和组件，而不是其他完全不同的网站，但有人可能会创建这样的设置以欺骗组织过滤器（例如，使用反向代理访问 YouTube、Facebook和葫芦）。

# c# - 如何使用 LINQ 选择器设置通用属性

> ID：11054107
> 
> 赞同：3
> 
> 时间：2012-06-15T15:49:16.500
> 
> 标签：c#, linq, entity-framework, linq-to-sql, expression

我有多个查询，如下所示：

```
var query = from a in EntityAs
            select new EntityASmall()
            {
                // Common Stuff:
                Id = a.Id,
                Name = a.Name,
                ShortName = a.ShortName,
                // Specific to EntityA:
                ASpecificProperty1 = a.1,
                ASpecificProperty2 = a.2
            };

var query = from b in EntityBs
            select new EntityBSmall()
            {
                // Common Stuff:
                Id = b.Id,
                Name = b.Name,
                ShortName = b.ShortName,
                // Specific to EntityB:
                BSpecificProperty1 = b.1,
                BSpecificProperty2 = b.2
            }; 
```

EntityA 和 EntityB 都派生自具有 、 和 属性的公共`Id`基`Name`类`ShortName`。`EntityASmall`和 也是如此`EntityBSmall`。我有很多看起来像这样的查询，所以我想做一些速记查询，先把常见的东西排除在外。我发现了一个有点前途的扩展方法，看起来像这样：

```
public static TSource SetCommonProperties<TSource>(this TSource input, EntityBaseClass entity, Action<TSource> updater) where TSource : EntitySmallBase
{
    input.Id = entity.Id;
    input.Name = entity.Name;
    input.ShortName = entity.Name;

    updater(input);

    return input;
} 
```

我可以这样使用它：

```
var query = from a in EntityAs.AsEnumerable()
            select new EntityASmall().SetCommonProperties(a, x =>
            {
                ASpecificProperty1 = x.1;
                ASpecificProperty2 = x.2;
            }); 
```

注意`AsEnumerable()`. 没有它，我会得到“无法将带有语句体的 lambda 表达式转换为表达式树”，我大致猜测这意味着它正在尝试将`Action`部分转换为 LINQ-to-SQL 的表达式。看起来`AsEnumerable()`将集合在本地完全发挥作用。很抱歉这篇冗长的帖子，但是有没有任何表达方式来编写这个可以与 LINQ-to-SQL 和实体框架一起使用的方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:17:12.570

您想让您的代码 DRY，这总是需要付出一些努力。也许您会通过一些辛勤劳动和一些`Expression`巫术来使您的方法工作，但也许您会喜欢这个链接：[停止使用 AutoMapper in您的数据访问代码](http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code)。（即使您不使用 AutoMapper）。

通过这项出色的工作，您将能够编写简洁的语句，例如：

```
context.EntityAs.Project().To<EntityASmall>();
context.EntityBs.Project().To<EntityBSmall>(); 
```

我自己用过这个，我真的很喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:12:17.737

您提出的扩展方法看起来不错。

它只是你必须为每个派生实体创建它，这在你的情况下可能很好，因为你似乎有几个派生实体。

其次，我不认为你真的需要在你的扩展方法中传递那个动作委托。如果可能的话，只需在其中调用该方法即可。我对设计了解不多。

所以你的扩展方法看起来像这样

```
public static TSource SetCommonProperties<TSource>(this TSource input, EntityBaseClass entity)     where TSource : EntitySmallBase 
{ 
   input.Id = entity.Id; 
   input.Name = entity.Name; 
   input.ShortName = entity.Name; 

   this.Update(input); // Or this method could exist in any other class or static class.

  return input; 
```

}

然后你也可以使用如下的扩展方法。

```
var query = from a in EntityAs
        select new EntityASmall
        {      
            ASpecificProperty1      
            ASpecificProperty2    
        }).SetCommonProperties(a,entity) 
```

这将消除您对 AsEnumerable 的使用。如果需要，您还可以使用相同的方法从基础方法转换为 derviced 方法：

```
DerivceEntityObject SetCommonProperties(BaseEntity) 
```

我希望这能让您了解我在这里要提出的建议。

# java - Google App Engine 不支持英镑等特殊字符

> ID：11054110
> 
> 赞同：1
> 
> 时间：2012-06-15T15:49:20.453
> 
> 标签：java, google-app-engine, jsp, jakarta-ee

我有一个接受用户输入的 jsp 和一个 servlet 来处理提交的数据。我正在使用 Ajax 请求来调用 servlet 并与它一起传递参数。

这是我的jsp代码：

```
<%@ page language="java"  import="java.util.*,com.*,bo.*" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>

<script type="text/javascript">

function check(){
              var i = document.getElementById('input').value;
              var escapedi = escape(i);
              escapedi = escapedi.replace("%u2019","%27");
              var xhr = new XMLHttpRequest();
              xhr.open("GET","LinkHandler?text="+ escapedi,true);
              xhr.send();
       }

</script>
</head>
<body>
<input type="text" id="input"/><input type="button" onclick="check()" value="Submit"/>
</body>
</html> 
```

这是我的 Servlet 代码：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String text = URLDecoder.decode(req.getParameter("text"),"UTF-8");
        System.out.println(text);
    } 
```

该代码在普通的 Web 项目上运行良好，但是当我在 Google Web 应用程序项目上运行它时，一些特殊字符（如英镑）显示为“？”。

我该如何解决这个问题？请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:29:12.483

这可能是因为 App Engine 的[语言环境](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)与您本地机器的语言环境不同。您可以使用打印环境的当前本地

```
Locale.getDefault() 
```

此外，您可以使用 setDefault() 更改它

# xcode - UITableViewPlain 的默认部分标题？

> ID：11054111
> 
> 赞同：0
> 
> 时间：2012-06-15T15:49:29.763
> 
> 标签：xcode, uitableview, header

类似的问题：[如何模仿 UITableView 的 UITableViewStylePlain 部分标题样式](https://stackoverflow.com/questions/4664687/how-to-mimic-uitableviews-uitableviewstyleplain-section-header-style)
没有完整的答案。BarrettJ's 很接近，但并不完全在那里。

图像似乎是最简单、最有效的方法，但我无法获得正确的尺寸/位置，即使我靠近，它在第一个和第二个标题中看起来仍然不同。（关于表格视图的顶部有什么不同吗？）

文字不是问题。我只需要一些东西来填充空间并且看起来与默认标题完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:39:04.020

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *sectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, tableView.sectionHeaderHeight)];
    sectionHeaderView.backgroundColor = [UIColor colorWithWhite:0 alpha:0];
    sectionHeaderView.userInteractionEnabled = YES;
    sectionHeaderView.tag = section;

    UIImageView *backgroundImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, -1, tableView.bounds.size.width, 23)];
    backgroundImageView.image = [UIImage imageNamed:@"header.png"];

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(12, 2, tableView.bounds.size.width-10, 18)];
    headerLabel.backgroundColor = [UIColor clearColor];
    headerLabel.textColor = [UIColor whiteColor];
    headerLabel.shadowColor = [UIColor darkGrayColor];
    headerLabel.shadowOffset = CGSizeMake(0, 1);
    headerLabel.font = [UIFont boldSystemFontOfSize:18];
    headerLabel.text = [self tableView:tableView titleForHeaderInSection:section];

    [sectionHeaderView addSubview:backgroundImageView];
    [sectionHeaderView addSubview:headerLabel];

    return sectionHeaderView;
} 
```

修复。任何人都可以使用/修改它。

![头文件.png](../Images/2b3c37220e4d68aea10b77d8feba9aee.png)

# image - 如何使用MATLAB从文件夹中读取img格式文件

> ID：11054114
> 
> 赞同：-2
> 
> 时间：2012-06-15T15:49:33.360
> 
> 标签：image, matlab, file-io

我是 MATLAB 新手。`fopen`我已经使用命令读取了一个 .img 文件。如何在不知道标题和像素信息[即行和列]的情况下从文件夹中连续读取 .img 文件。

另外我需要知道如何仅从图像部分中找到平均像素值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T15:32:59.887

我不知道你的图像格式，但看看 imread 命令。这就是你通常所做的。如果您知道格式，即 bmp、tiff 等，它会处理其余的事情。

# .net - 在 .NET 项目中引用程序集。奇怪的行为

> ID：11054123
> 
> 赞同：2
> 
> 时间：2012-06-15T15:49:52.237
> 
> 标签：.net, asp.net-mvc-3, entity-framework, entity-framework-4, .net-assembly

史前史：

我有一个简单的 ASP.NET MVC3 应用程序。在项目文件中，我打开了构建 MVC 的视图：

```
<MvcBuildViews>True</MvcBuildViews> 
```

我也使用实体框架 4.0。我已经在`System.Data.Entity`我的 Web 项目中添加了对程序集的引用。（是的，我知道在 UI 中使用数据访问层不好，它只是为了测试）。在项目文件中，它看起来：

```
<Reference Include="System.Data.Entity" /> 
```

然后我尝试在我的视图（Razor 引擎）中使用 ObjectContext 类，但我收到了错误消息：

```
errorCS0012: The type 'System.Data.Objects.ObjectContext' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. 
```

在我的另一个项目文件中，我看到 System.Data.Entity 被其他引用：

```
<Reference Include="System.Data.Entity" >
    <Private>True</Private>
</Reference> 
```

接下来，我使用`<Private>True</Private>`子元素更改了项目文件（参考部分），问题已经解决。

那么，什么是`<Private>True</Private>`以及它如何影响构建过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:38:42.823

Private=True 将程序集复制到网站的“bin”文件夹中，它们会自动成为网站引用的程序集字典的一部分。

但是您不想将框架程序集复制到 bin 文件夹中。只需将以下内容添加到位于“~/Views”文件夹中的 web.config 中：

```
 <system.web>
    <compilation>
        <!--add assembly references needed for MvcBuildViews build task-->
        <assemblies>
            <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        </assemblies>
    </compilation> 
```

如果存在不需要指定完整版本 4.0.0.0.0 的语法，我很乐意收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:15:15.893

MvcBuildViews 正在使用 msbuild 编译您的视图。Visual Studio 和 msbuild 之间似乎存在一些差异。

`<Private>True</Private>`与从视觉工作室复制本地相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T16:45:54.760

实际上[这个解决方案](http://www.itorian.com/2012/09/the-type-systemdataobjectsobjectcontext.html)对我有用

> *   在解决方案资源管理器中，右键单击引用并从右键单击菜单中选择添加引用。
>     
>     
> *   显示参考管理器对话框。
>     
>     
> *   如果尚未选择 System.Data.Entity，请从对话框的列表中选择。确保选中项目旁边的复选框。
>     
>     
> *   单击确定。

# android - 我可以将我的网站链接到 android 菜单上的菜单项吗？

> ID：11054125
> 
> 赞同：0
> 
> 时间：2012-06-15T15:49:59.277
> 
> 标签：android, android-intent, menu, web, menuitem

我想知道是否有人可以帮助我。当用户在他们的安卓手机上点击菜单按钮时，菜单会弹出。我想创建一个新的菜单项，以便在单击时立即将它们带到我的网站。有没有办法通过意图或类似的东西来做到这一点：ACTION_SEND？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:54:03.317

看这里：[如何从我的应用程序中打开 Android 网络浏览器中的 URL？](https://stackoverflow.com/questions/2201917/how-can-i-open-a-url-in-androids-web-browser-from-my-application)-- 只需将它放在按钮的 onClick() 事件中。

# python - 如何在一系列值中更改轮廓颜色

> ID：11054126
> 
> 赞同：3
> 
> 时间：2012-06-15T15:50:02.007
> 
> 标签：python, matplotlib

matplotlib 中的 Colormap 类有很好的方法`set_over`和`set_under`，它允许设置颜色以用于等高线图上的超出范围的值。

但是，如果我需要将颜色设置为在一系列值中使用，例如从 -0.1 到 0.1 的白色值，该怎么办？有方法`set_between(colormap, interval, color)`吗？如果没有，最简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:22:14.773

您可以使用 NumPy where 函数将指定范围内的值替换为总体最大值或最小值，这将有效地使绘图中的这些值变白或变黑。

```
q = np.random.normal( 0, 1, (10,10) )
np.where( ( q > -.1 ) & ( q < .1 ), np.max( q ), q ) 
```

# bash - 如何防止`for`循环解析空格？

> ID：11054129
> 
> 赞同：1
> 
> 时间：2012-06-15T15:50:15.903
> 
> 标签：bash, recursion

我有这个命令去每个目录，一旦有对每个文件运行一些命令：

```
STDIR=$PWD;
for dir in $(find . -type d 2>&-); do 
    cd "$dir";
    for file in $(find * -prune -type f 2>&-); do 
        command "$file";
    done; 
    cd "$STDIR"; 
done 
```

但是当文件或目录的名称中有空格时，就会出现问题。我该如何解决？

当试图对这个问题应用答案时，就会出现[这种疑问](https://stackoverflow.com/questions/10983278/apply-a-script-to-subdirectories)。

**编辑：**[这个评论](https://stackoverflow.com/a/10983727/882056) 中也出现了一个很好的解决方案。要解决空格问题，请添加

```
IFS=$'\n' 
```

在上面代码的第一行之后，以及

```
unset IFS 
```

之后`done`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:08:13.287

与往常一样，简短的答案是“引用扩展”，但对于您的情况，正确的答案是

```
find . -type f -execdir command {} \; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:57:58.180

有以下三种方式：

```
1) find -exec (see the answer from Sorpigal)
2) find ... | xargs
3) find ... | while read line ; do command "$line" ; done 
```

第三种解决方案有一个优势：您不需要变体 (1) 和 (2) 中的那么多分叉。当你需要处理很多行时，它会变得很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:02:00.883

我建议使用`find`with`-exec`并避免使用`for`.

或者使用`find`with`-print0`和一个将 NULL 字符解释为“新行”的程序，例如`xargs`with`--null`

# python - 在给定操作系统的 Python 中加入路径

> ID：11054131
> 
> 赞同：3
> 
> 时间：2012-06-15T15:50:23.853
> 
> 标签：python

背景 - 我正在使用 paramiko 将文件放在一堆远程服务器上，运行几个不同的操作系统，并且远程系统上没有安装 Python。我需要为应该放置文件的位置指定远程目录。因为不同的操作系统指定的路径不同，所以我想使用一些模块。

我想使用`os.path.join`，但它从我的本地机器获取它的配置。有没有办法在 os 模块的方法之一或类似方法中指定平台？

编辑：也在与 paramiko 的 ssh 会话期间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:56:18.200

通常包括所有不同的路径模块，`os.path`只是本地机器的一个。`ntpath`如果要进行 Windows 路径操作，以及`posixpath`Unix 路径操作，请导入。

# azure - 如何从队列中获取错误消息的数量

> ID：11054132
> 
> 赞同：1
> 
> 时间：2012-06-15T15:50:35.170
> 
> 标签：azure, azure-storage

如何从 Windows Azure 存储队列中获取错误消息的计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:55:20.613

如果您在谈论存储队列，其中队列项目由于处理时出现问题而重新出现（意味着不可见超时已过期），每条消息都有一个 DequeueCount （在第一次获取时，它设置为 1，然后随着每个额外获得）。没有办法发现重新出现的消息的总数。

使用服务总线队列，您可以设置死信子队列，让您有条件地将消息移动到此死信队列：

*   过期消息
*   已达到最大交货次数

[这篇文章](http://geekswithblogs.net/asmith/archive/2011/10/21/147398.aspx)有一个很好的设置死信子队列的例子。

# c++ - 使用 FindWindowEx 函数找不到子窗口

> ID：11054134
> 
> 赞同：2
> 
> 时间：2012-06-15T15:50:45.543
> 
> 标签：c++, c, winapi, hwnd

我正在开发一个小程序，以便在使用 Microsoft 远程协助 (msra.exe) 时让我的生活更轻松。使用 c++，我可以打开 msra.exe，然后找到窗口句柄。然后我想找到子窗口（按钮），并与它们进行交互。问题似乎是，我找不到我想要的按钮。Spy++ 显示按钮具有以下文本：

窗口 004902F4“邀请您信任的人帮助您”按钮。

我的程序返回搜索此字符串时，该按钮不存在。有人有想法么？这是代码：

```
#include "stdafx.h"
#include <windows.h>
#include <string>
#include <sys/types.h>
#include <stdlib.h>
#include <Windows.h>
#include <process.h>

using std::string;

void openRA(void * dummy);

int _tmain(int argc, _TCHAR* argv[])
{

_beginthread(openRA, 0, NULL);

Sleep(1000);

HWND handle = NULL;

handle = FindWindow(NULL, TEXT("Windows Remote Assistance"));

if(handle == NULL){
    printf("handle was null\n");
}
else{
    printf("handle was not null\n");
}

HWND button1 = NULL;
Sleep(1000);
button1 = FindWindowEx(handle, 0, 0, TEXT("Invite someone you trust to help you"));

if(button1 == NULL){
    printf("Button1 was null");
}
else{
    printf("I found he button!");
}
fflush(stdout);
return 0;
}

void openRA( void * dummy){
printf("I'm inside this function\n");
system("msra.exe &");

} 
```

编辑：

这是 spy++ 显示的图像。 ![间谍++图像](../Images/ea93ff8af1c9e3727cfa92845bb72bb1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:21:46.847

顶级窗口的标题为“Windows 远程协助”。这是由 . 返回的窗口`FindWindow`。

这包含一个嵌入式对话框，该对话框还具有标题“Windows 远程协助”并包含您感兴趣的按钮。

该按钮不是顶级窗口的直接子级，因此`FindWindowEx`找不到它。

用于`EnumChildWindows`递归枚举顶层窗口的所有子窗口并自己检查标题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T21:05:04.710

我在这里编写了这段代码，所以没有尝试（我现在正在运行我的 linux）

```
 EnumChildWindows(FindWindow(NULL, TEXT("Windows Remote Assistance), (WNDENUMPROC)&EnumProc, 0);
    //------------------------------------------------------------------------
BOOL CALLBACK EnumChildProc(HWND hwnd, LPARAM lParam);
{
LPTSTR szBuff;
if (GetWindowText(hwnd, szBuff, sizeof(szBuff)
{
if (!strcmp("Invite someone you trust to help you", szBuff)
{
//We found the button!
}
}
//No button was found
} 
```

# windows - 安装 Python 3 后安装 Python 2.7

> ID：11054135
> 
> 赞同：2
> 
> 时间：2012-06-15T15:50:51.300
> 
> 标签：windows, windows-7, path, python-3.x, python-2.x

我在安装 Python 2.7 时遇到问题。

因为我在我的一个课程中学习了 Python，所以我首先学习了 Python 3，并且目前已经将它安装在我的计算机上（我使用的是 Windws 7）。

我需要安装 Python 27，因为我想学习如何使用 Django，而它们目前仅与 Python2 兼容。

安装 Python 2.7 后，当我尝试运行 Python 2.7 时，我不断收到语法错误：

文件=sys.stderr 语法错误：无效语法

我知道这是因为它从我当前的 Python 3 路径中获取了这个文件。

那我怎么能解决这个问题？如何让我的 Python27.exe 从 Python27 路径而不是 Python3 路径中获取所有文件。我对此很陌生，甚至不知道如何切换 exe 文件的路径。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T22:10:58.867

为此，您可以将 python.exe 文件的文件名更改为“python”和“python3”，然后将两个版本的路径添加到 $PATH 环境变量中。

参考：[如何使快捷方式从 PATH 工作](https://stackoverflow.com/questions/19267714/how-to-make-shortcut-work-from-path/19965326#19965326)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:33:40.703

您问题的长期答案可能是[virtualenv](http://pypi.python.org/pypi/virtualenv)。它将允许您使用各种版本的 python 和相同版本的 python 的各种设置，而不会互相踩到对方的脚趾。我相信它甚至会默认从即将发布的 python 3 版本中打包。

尝试卸载python 3，看看是否可以使用python 2。如果可以，请尝试重新安装python 3，不要告诉它是默认的python安装（在安装过程中有某种类似的选项我相信）。如果卸载 python 3 后 python 2 仍然无法工作，那么你还有其他一些奇怪的问题正在发生。

***Windows上多个python的一般设置***

[这个问题](https://stackoverflow.com/questions/4583367/how-to-run-multiple-python-version-on-windows)的公认答案显示了如何在没有 virtualenv 的情况下设置它，并能够有选择地运行你想要的任何版本的 python。

***路径设置***

如果你想直接弄乱路径，你可以试试这个。如果您通过删除它们并将其重置为仅具有 python 主目录，以某种方式将 python 库的路径直接添加到您的路径中，这可能会有所帮助。

*   在 windows 7 中：开始按钮 --> 右键单击​​计算机 --> 属性 --> 高级系统设置 --> 环境变量 --> 系统变量
*   （免责声明：如果您不想冒险删除重要内容，请按照上面的教程进行操作）删除任何看起来像与 python 相关的路径的内容
*   在主“路径”变量中，添加`c:/python27;c:/python31`或您拥有的任何路径。
*   在每个 python 文件夹中，创建一个名为 python27 / python31 的 python.exe 快捷方式
*   打开一个***新***的命令提示符并尝试命令“python27”或“python31”

# wcf - 应该增加哪一个 MaxReceivedMessageSize

> ID：11054138
> 
> 赞同：1
> 
> 时间：2012-06-15T15:51:04.280
> 
> 标签：wcf, iis-7, web-config

貌似这个问题已经被问过千百次了，但是每个人的配置问题都不一样。我有提供图像并接收上传图像请求的 WCF 服务器。上传图片时，当大小超过 65k 时出现错误 400。

我在 WCF 上打开了跟踪，我得到了确切的错误

> 已超出传入邮件 (65536) 的最大邮件大小配额。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。

我知道我需要增加这个参数，但我只能在我的 web.config 文件中找到它应该在哪里。这是我在 web.config 中的内容：

```
 <system.serviceModel>
    <protocolMapping>
      <add binding="webHttpBinding" scheme="http" />
    </protocolMapping>
    <services>
      <service behaviorConfiguration="ReportTransferServiceBehavior" name="ReportTransferService">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="ReportTransferService" contract="IReportTransferService"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
        <behavior name="ReportTransferServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="500" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <domainServices>
      <endpoints>
        <add name="json" type="Microsoft.ServiceModel.DomainServices.Hosting.JsonEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
            maxReceivedMessageSize="2000000" />
      </endpoints>
    </domainServices>
    <bindings>
      <basicHttpBinding>
        <binding name="ReportTransferService" maxReceivedMessageSize="2000000" maxBufferSize="2000000" transferMode="Streamed">
          <readerQuotas maxDepth="2000000" maxStringContentLength="2000000" maxArrayLength="2000000" maxBytesPerRead="2000000" maxNameTableCharCount="2000000" />
          <security mode="None"></security>
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel> 
```

The URL I'm sending images (HTTP POST) is `hostname/ReportTransferService.svc/UploadImage`. Looks like it's using some kind of default binding and not `basicHttpBinding` configured for bigger size.

Anyone can tell me what's wrong with my web.config?

**Update: Resolved**

I had to specify fully qualified name for ReportTransferService in service configuration and serviceBehavior configuration and added whole new webHttpBinding section with similiar limits and pointed service to use this binding.

Thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:24:01.090

Your service section should have fully qualified names as shown below:

```
 <services>
      <service behaviorConfiguration="ReportTransferServiceBehavior" name="namespace.ReportTransferService">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="ReportTransferService" contract="namespace.IReportTransferService"></endpoint>
      </service>
    </services> 
```

# c# - 自定义 pinterest 按钮

> ID：11054146
> 
> 赞同：0
> 
> 时间：2012-06-15T15:51:42.500
> 
> 标签：c#, pinterest

我正在尝试将 pinterest 按钮添加到控件中。我正在尝试在后面的代码中添加 href，但它似乎不起作用。

到目前为止我有

```
pinterestButton.Attributes.Add("href", "http://pinterest.com/pin/create/button/?url=" + productLink + "&media=" + imageLink); 
```

pinterest 窗口打开，但其中没有数据。

谁能帮我一把？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:41:08.950

看起来您需要对查询字符串参数进行 URI 编码，即

`"http://pinterest.com/pin/create/button/?url=" + productLink + "&media=" + imageLink`

应该：

`"http://pinterest.com/pin/create/button/?url=" + HttpUtility.UrlEncode(productLink) + "&media=" + HttpUtility.UrlEncode(imageLink)`

我不是 ASP/C# 程序员，但快速查找表明这是 URI 编码的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:24:43.993

我不确定您要查找的代码到底是什么...但是将此代码粘贴到您要固定的页面的 url 的位置。应该作为一个 pin it 按钮。

```
javascript:void((function(){var%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)})()); 
```

# sql-server - SQL Server 2008 Spatial：在多边形中查找一个点

> ID：11054149
> 
> 赞同：29
> 
> 时间：2012-06-15T15:51:47.277
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, geospatial, spatial

我正在使用 SQL Server 2008 空间数据类型。我有一个表，所有状态（作为多边形）作为数据类型 GEOMETRY。现在我想检查一个点的坐标（纬度、经度）作为数据类型 GEOGRAPHY 是否在该州内。

我找不到任何使用新空间数据类型的示例。目前，我有一个多年前实施的解决方法，但它有一些缺点。

我有 SQL Server 2008 和 2012。如果新版本有一些增强，我也可以开始使用它。

谢谢。

更新 1：

为了更清晰，我添加了一个代码示例。

```
declare @s geometry  --GeomCol is of this type too.
declare @z geography --GeogCol is of this type too.

select @s = GeomCol
from AllStates
where STATE_ABBR = 'NY'

select @z = GeogCol
from AllZipCodes
where ZipCode = 10101 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T18:11:06.537

我认为地理方法 STIntersects() 会做你想做的事：

```
DECLARE @g geography;
DECLARE @h geography;
SET @g = geography::STGeomFromText('POLYGON((-122.358 47.653, -122.348 47.649, -122.348 47.658, -122.358 47.658, -122.358 47.653))', 4326);
SET @h = geography::Point(47.653, -122.358, 4326)

SELECT @g.STIntersects(@h) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-18T15:22:58.863

如果您无法将存储的多边形的数据类型更改为，`GEOGRAPHY`那么您可以将输入的纬度和经度转换为`GEOMETRY`并使用`STContains`或`STIntersects`反对转换后的值。

```
DECLARE @PointGeography GEOGRAPHY = geography::Point(43.365267, -80.971974, 4326)
DECLARE @PointGeometry GEOMETRY = geometry::STGeomFromWKB(@PointGeography.STAsBinary(), 4326);

SELECT @PolygonGeometry.STContains(@PointGeometry); 
```

朝着相反的方向——试图将`GEOMETRY`多边形转换为`GEOGRPAHY`——很容易出错，并且根据我的经验可能会失败。

请注意，如果您尝试`GEOMETRY`直接从纬度和经度值创建点，那么`STContains`(or `STIntersects`) 将不起作用（即在应该匹配时不会给出匹配）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-10T13:49:31.643

```
declare @g geometry
set @g=geometry::STGeomFromText('POLYGON((-33.229869 -70.891988, -33.251124 -70.476616, -33.703094 -70.508045, -33.693931 -70.891052,-33.229869 -70.891988))',0)

DECLARE @h geometry;

SET @h = geometry::STGeomFromText('POINT(-33.3906300 -70.5725020)', 0);
SELECT @g.STContains(@h); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-04T11:23:23.347

1.  你不应该混合几何和地理。几何适用于平面，地理适用于球体（如地球）。
2.  您“应该”协调 SRID 以处理此问题。每个 SRID（例如 2913 = NZG2000）描述一个转换关系。每个 SRID 都可用于映射到/从一个统一的球体，这是您从一个球体到另一个球体的方式。
3.  直到你在两个值上得到一个“相同”的 SRID，许多 .STxXX 函数将返回 NULL（在这两种情况下你可能有默认值 0）
4.  如果它们不一样，但你假装它们是一样的，你可能会在边缘情况下出错。
5.  如果您花费一些“预计算”时间，您可以确定所涉及的边界矩形的顶部/左侧和底部/右侧点（并存储它们），并在索引中使用这些值来限制要检查的记录。除非 AT/L < BB/R 和 AB/R > BT/L 它们不能重叠，这意味着在您的 WHERE 中进行简单的 4 AND 数字检查将限制您的 STWithin 检查

这是我在 SRID 2193 中使用的示例。给定点半径 3 公里内以及特定学区内的所有道路

```
DECLARE @g geometry

SELECT @g = GEO2193 FROM dbo.schoolzones WHERE schoolID = 319

SELECT DD.full_road_name, MIN(convert(int,  dd.address_number)), MAX(convert(int,  dd.address_number))
FROM (

select A.* from dbo.[street-address] A

WHERE (((A.Shape_X - 1566027.50505) * (A.Shape_X - 1566027.50505)) + ((A.Shape_Y - 5181211.81675) * (A.Shape_Y - 5181211.81675))) < 9250000

and a.shape_y > 5181076.1943481788

and a.shape_y < 5185097.2169968253

and a.shape_x < 1568020.2202472512

and a.shape_x > 1562740.328937705

and a.geo2193.STWithin(@g) = 1
) DD
GROUP BY DD.full_road_name
ORDER BY DD.full_road_name 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-12T18:23:49.983

如果您有表格（例如：SubsriberGeo），其中一列（例如：位置）具有地理点作为值，并且您想从该表格中找到多边形内的所有点，这是一种方法：

```
 WITH polygons
 AS (SELECT 'p1' id, 
            geography::STGeomFromText('polygon ((-113.754429 52.471834 , 1 5, 5 5, -113.754429 52.471834))', 4326) poly
),
 points
 AS (SELECT [SubscriberId],[Location] as p FROM [DatabaseName].[dbo].[SubscriberGeo])
 SELECT DISTINCT 
        points.SubscriberId, 
        points.p.STAsText() as Location
 FROM polygons
      RIGHT JOIN points ON polygons.poly.STIntersects(points.p) = 1
 WHERE polygons.id IS NOT NULL; 
```

# facebook - Selenium 适用于 Facebook Connect IE 和 Safari 的任何解决方法

> ID：11054152
> 
> 赞同：2
> 
> 时间：2012-06-15T15:51:52.313
> 
> 标签：facebook, internet-explorer, selenium

只是想知道是否有人遇到过类似的问题，如果发现他们的工作方法是什么。

对于解决方案，寻找 Selenium RC，因为 Selenium 2 / WebDriver 是最后的手段，因为我们还没有使用 WebDriver。

似乎 Facebook 连接和相关功能在启动弹出窗口时可能很难实现自动化，尤其是在 IE 和 Safari 中。

尝试了 Selenium RC 的各种选项：

*   getAllWindowTitles/Names/Ids - 仅返回 1 个窗口（弹出窗口出现后，对于 IE，无用）
*   openWindow('','someName') - 出现后似乎没有获得弹出名称/焦点的效果

IE 在单击时启动弹出窗口很好，但无法找到并获取弹出窗口。

如果您手动打开新窗口（使用通过单击 Facebook 按钮触发的相同 URL，通过 HttpFox 等工具进行间谍活动发现），来自登录的会话不会从手动弹出窗口转移回主窗口，因此没有登录发生。

也许有一种方法可以调用正确的 javascript 和 XmlHttpRequest 调用以将会话从弹出窗口（手动打开时）传递回主窗口？

任何帮助表示赞赏。谢谢。

# java - 从正在运行的 C++ 代码调用正在运行的 Java 代码，反之亦然

> ID：11054157
> 
> 赞同：0
> 
> 时间：2012-06-15T15:52:08.950
> 
> 标签：java, c++, java-native-interface, rcp, method-invocation

我的问题是如何从正在运行的 C++ 代码中调用正在运行的 Java 代码，反之亦然。有几篇关于从 C unsing Java Native Interface (JNI) 或 Java Native Access (JNA) 调用 Java 或 JVM 编译的 c++ 文件的文章。但是，对我来说，这似乎不是调用运行代码的适当方式，因为在示例中只调用了编译库。

我的情况如下。有两个应用程序在本地计算机上运行。一种应用程序是基于 Eclipse 和 Java 的。另一个应用程序是基于 C++ 的。我需要让他们双向交流。也许这是 RPC 的情况？但我不需要通过网络进行交流。

我认为 RCP 可能是一种方式，但它对我来说似乎太大了，因为我不想通过网络进行交流，而且我不知道如何在这种情况下使用 RCP。我正在寻找更智能的解决方案。

有什么经验可以帮助我吗？

谢谢并恭祝安康

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:33:10.010

您可能希望查看我的 C++ 到 Java RPC 解决方案。给定一个 Java 类，它会生成一个 C++ 客户端存根和 Java 服务器存根。

[https://github.com/danfickle/cppToJavaRpcStubGenerator](https://github.com/danfickle/cppToJavaRpcStubGenerator)

编辑：我认为 CORBA 是“标准”解决方案。但是，我书架上（但尚未阅读）的 1000 页 Java 和 CORBA 书表明存在学习曲线。您可能还希望查看 MessagePack、Thrift、ActiveMQ 等。抱歉，我无法提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:56:34.497

JNI 允许您链接 C++ 和 Java 代码；但是，两者是同一个程序。

如果您想让一个程序调用另一个程序，最简单的方法是使用支持网络的技术。RPC、CORBA、客户端/服务器套接字或包括网络在内的任何其他方式都非常适合您。

存在更难的非网络堆栈解决方案，如共享内存、信号量、管道等；但是，它们需要一个支持它们的操作系统，并且它们的使用方式受到限制，而且您需要找到使用它们的两种语言的语言绑定。

# php - PHP GD 文本和特殊字符/编码？

> ID：11054160
> 
> 赞同：0
> 
> 时间：2012-06-15T15:52:19.077
> 
> 标签：php, encoding, gd

我正在使用 imagettftext 在 php 中生成文本。文本是从 mysql 数据库中提取的。尽管在字体的字符映射中并出现在数据库中，但某些字符并未出现在呈现的文本中。例如，m 破折号 (-) 和智能引号/撇号 (“”')。

这些字符要么不出现，要么被问号替换。

我怀疑这与编码有关，但我对编码知之甚少，不知道从哪里开始。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:14:51.617

`htmlentityencode`在将文本传递给函数之前尝试使用文本。

> UTF-8 编码的文本字符串。
> 
> 可能包括十进制数字字符引用（形式：）`&#8364;`以访问位置 127 以外的字体中的字符。`&#xA9;`支持十六进制格式（如 ）。UTF-8 编码的字符串可以直接传递。
> 
> `&copy;`不支持命名实体，例如。考虑使用 html_entity_decode() 将这些命名实体解码为 UTF-8 字符串（html_entity_decode() 自 PHP 5.0.0 起支持此功能）。
> 
> 如果字符串中使用了字体不支持的字符，则空心矩形将替换该字符。

来源：[http ://www.php.net/manual/en/function.imagettftext.php](http://www.php.net/manual/en/function.imagettftext.php)

# php - 使用 file_get_contents 时 URL 中的奇怪实体会断开链接

> ID：11054162
> 
> 赞同：1
> 
> 时间：2012-06-15T15:52:26.923
> 
> 标签：php, image, file-get-contents

我正在尝试保存图像，其中包含以下链接：`"r%c3%a9glisse"`

翻译后会显示：`"réglisse"`.

奇怪的是，当我使用提供的链接时`file_get_contents`，它得到一个 HTTP 404 错误，找不到文件。

我尝试了几种方法来编码/解码链接等，但没有太多运气。所以我想知道这里是否有人知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:00:08.607

要检查哪个文件未找到，请检查您的 Web 服务器 access_log 和 error_log。问题可能是您正在尝试 file_get_contents() 一个“url 编码”的 uri。尝试打开它“url解码”：

```
file_get_contents(urldecode("r%c3%a9glisse")); 
```

# html - 并排排列按钮

> ID：11054163
> 
> 赞同：0
> 
> 时间：2012-06-15T15:52:33.883
> 
> 标签：html, css, css-float, css-sprites

请帮我将这 3 个按钮水平排列，就像这张照片处理过的图像：

![用photoshop制作](../Images/5b009b462a2547d244d4d0b9de1d1512.png)

请看[这里](http://jsfiddle.net/FzYkJ/1/)的代码。

CSS：

```
a.facebookbt {
    background: url(http://i1068.photobucket.com/albums/u445/neobx/bonus5.png) no-repeat 0 0;
    width: 132px;
    height: 52px;
    display: block;
}
a.facebookbt:hover { background-position: 0 -52px; }
a.facebookbt:active { background-position: 0 -104px; }

a.twitterbt {
    background: url(http://i1068.photobucket.com/albums/u445/neobx/bonus5.png) no-repeat -132px 0;
    width: 132px;
    height: 52px;
    display: block;
}
a.twitterbt:hover { background-position: -132px -52px; }
a.twitterbt:active { background-position: -132px -104px; }

a.abpbt {
    background: url(http://i1068.photobucket.com/albums/u445/neobx/bonus5.png) no-repeat -265px 0;
    width: 286px;
    height: 50px;
    display: block;
}
a.abpbt:hover { background-position: -265px -52px; }
a.abpbt:active { background-position: -265px -104px; }​ 
```

HTML：

```
<a class="facebookbt" href="javascript:;"></a>

<a class="twitterbt" href="javascript:;"></a>

<a class="abpbt" href="javascript:;"></a>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:54:36.713

怎么样：

```
a {
    float:left;
}
​ 
```

或者

```
a {
    display:inline-block !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:56:48.443

```
a { float:right; margin-left: 5px;} 
```

并将html标记更改为这种方式：

```
<a class="abpbt" href="javascript:;"></a>
<a class="twitterbt" href="javascript:;"></a>
<a class="facebookbt" href="javascript:;"></a> 
```

这样布局将*向右对齐*，并且按照屏幕截图*中的正确顺序排列*。

**演示**：http: [//jsfiddle.net/FzYkJ/12/](http://jsfiddle.net/FzYkJ/12/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:54:26.103

你可以加

```
float:left; 
```

到每个按钮

[http://jsfiddle.net/FzYkJ/2/](http://jsfiddle.net/FzYkJ/2/)

# c# - 将图像复制到 WPF 中的图像目录

> ID：11054167
> 
> 赞同：1
> 
> 时间：2012-06-15T15:52:40.213
> 
> 标签：c#, wpf, visual-studio-2010

我正在开发一个 WPF 应用程序。我让用户选择一些图片，然后我想将该图片保存`EmployeePics`在同一项目目录中的目录中。这是屏幕截图：

![在此处输入图像描述](../Images/a728697372dd0f6d380d17f250de5217.png)

我已经编写了以下代码，但它不起作用：

```
string appPath = System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "EmployeePics\\");
File.Copy(Chosen_File, appPath + Chosen_File); 
```

我收到以下异常：
![在此处输入图像描述](../Images/3c159378302ae2c5076fd7e28b54ae57.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:56:24.887

尝试使用[File.Copy](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.100%29.aspx)方法。如果不是不可能，请提供更多详细信息。

**更新：**

要解析图片目录，您可以使用`System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "EmployeePics")`.

**更新 2**

完整代码：

`File.Copy(Chosen_File, Path.Combine(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "EmployeePics"), Path.GetFileName(Chosen_File)))`.

# objective-c - 如何将多种语言加载到 IVONA SDK - 文本到语音

> ID：11054170
> 
> 赞同：4
> 
> 时间：2012-06-15T15:52:57.080
> 
> 标签：objective-c, ios, text-to-speech, multiple-languages

我想加载多种语言以使用 IVONA SDK 和 SSML for iPhone。在*Xcode/objective-C*中没有使用文档，只给出了 SDK 本身和几个 C/java 示例。

**如何使用适用于 iOS 的 IVONA SDK 加载多种语言的文本讲话？**

**编辑1：**见下面我的代码

首先加载声音：

```
- (NSInteger) loadVoice: (NSString*) vox {

if(voice != nil) {
    XLog(@"(voice != nil)");
    [voice unload];
    voice = nil;
}

NSString *pathIvona = [[NSString alloc] initWithFormat:@"%@", vox];

self.paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
self.documentsDirectory = [self.paths objectAtIndex:0];
self.path = [self.documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", pathIvona]];

voice = [[IvonaVoice alloc] init:instance withLibrary:self.path withVox:self.path];

[pathIvona release];

if (voice == nil) {
    XLog(@"Cannot load voice");
    [self setTtsError: @"Cannot load voice"];
    return 0;
}
[voice setParam:@"vol" withInteger: 99];
return 1;
} 
```

尝试将多种语言加载到一个流媒体**（流媒体仍然为零，它不会改变）**：

```
NSArray *allVoices = [self getAvaliableVoxes];  

/**
* Here the streamer is still nil, 
* i cant find the mistake here.
*
*/
IvonaStreamer *streamer = [[IvonaStreamer alloc] initWithVoices:allVoices  
withText:[NSString stringWithContentsOfFile:self.path  
encoding:NSUTF8StringEncoding error:&error] atSpeed:[NSNumber numberWithFloat:-1]]; 
```

方法 getAvailableVoices：

```
- (NSArray*)getAvaliableVoxes {
XLog(@"-----------------------------------entered");

self.paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
self.documentsDirectory = [self.paths objectAtIndex:0];

NSFileManager *manager = [NSFileManager defaultManager];
NSArray *fileList = [manager contentsOfDirectoryAtPath:[self.paths objectAtIndex:0] error:nil];
for (NSString *s in fileList){
    //XLog(@"s: %@", s);
}

NSMutableArray *pathsIvona = [[NSMutableArray alloc] init];
NSEnumerator *e = [fileList objectEnumerator];
NSString *vox;
while (vox = [e nextObject]) {

if([[vox lastPathComponent] hasPrefix:@"vox_"]) {
        XLog(@"vox: %@", vox);
        [pathsIvona addObject: [vox lastPathComponent]];
        XLog(@"pathsIvona: %@", pathsIvona);
    }   

}

XLog(@"pathsIvona: %@", pathsIvona);

return [pathsIvona autorelease];
} 
```

**如何使用 IVONA SDK 在 iOS 上的一个流媒体中加载多种语言？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:23:33.823

也许添加到数组 allVoices 的对象不符合预期的 initWithVoices 数组：...

# mysql - 在日期范围内使用时行级锁定问题

> ID：11054172
> 
> 赞同：0
> 
> 时间：2012-06-15T15:53:10.870
> 
> 标签：mysql, transactions, innodb

我有以下表格结构。

```
 reservation: (InnoDB)
 ------------------------------------------
 id INT,
 date DATE,
 item_id INT,
 slot VARCHAR(50);
 PRIMARY KEY(id), UNIQUE KEY(item_id,date). 
```

现在我正在尝试在事务内的保留表上使用 SELECT.....FOR UPDATE 来锁定特定 item_id 的日期范围内的特定行（例如：2012-06-15 到 2012-06-16）。

```
SELECT availability FROM reservation WHERE item_id={$item_id} AND (date>='{$to_date}' AND date<='{$from_date}') FOR UPDATE 
```

现在，当我使用上述语句时，它会阻止特定 item_id 的所有行，甚至超出日期范围。我也在使用这个唯一键（item_id，date）。

如何仅锁定特定 item_id 的特定日期范围？

问候，
拉维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:02:52.637

假设`$from_date`是 2012-06-15 并且`$to_date`是 2012-06-16，您实际上是在选择外部范围加上这些日期，因为`=`s。将您的查询更改为：

```
SELECT availability FROM reservation 
WHERE item_id={$item_id} AND (date <= '{$to_date}' AND date >= '{$from_date}') 
FOR UPDATE; 
```

**更新：**

这个

> ERROR 1205 (HY000): 超过锁定等待超时；尝试重启事务

意味着，您的查询已中止，导致另一个查询对这些行的锁定时间过长。你最好的办法是找出是什么/哪个查询/交易导致了这种情况，并尝试加快速度。也许[这篇文章](http://www.mysqlperformanceblog.com/2011/03/08/how-to-debug-long-running-transactions-in-mysql/)有帮助。

如果这没有帮助，您可以尝试增加`innodb_lock_wait_timeout`变量。[在手册](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html)中阅读有关它的更多信息。

# client-side - Angular JS 与 Google Closure 有什么关系？

> ID：11054175
> 
> 赞同：45
> 
> 时间：2012-06-15T15:53:20.403
> 
> 标签：client-side, google-closure, angularjs

现在**AngularJS** 1.0[发布了](http://googledevelopers.blogspot.cz/2012/06/better-web-templating-with-angularjs-10.html)，我想知道这个项目如何与谷歌的另一个通用 JavaScript 框架/工具**Closure**结合在一起。

我只看过这两种技术的基本描述（并且阅读了关于 Closure 的书的大约一半），所以我没有直接的经验，但这就是我的看法：

*   闭包是一组可以单独使用的技术。我觉得最吸引人的可能是：
    *   **Closure Compiler**在某种意义上似乎“修复了 JavaScript”，它会针对典型问题发出警告，提供一些编译时检查（并非所有人都喜欢，但可能大多数 Google 开发人员都这样做，我也这样做）。当然，生成的代码更小更高效也很好。
    *   然后有一些我喜欢**闭包库**的部分，例如对内置类型（`ArrayLike`等）的抽象、基于类的系统、事件机制、DOM 抽象等。我不确定我是否喜欢 GUI 库（似乎很复杂，我还没有时间研究它）。
    *   还有一些我认为我不会觉得有用的功能，例如**Templates**。
*   **AngularJS**，我只是简单地读过，似乎比 Closure 高得多。它似乎是一个*应用程序框架*，提供数据绑定、可重用组件、MVC 结构等功能。

所以这两种技术似乎针对的是完全不同的抽象级别，所以我的第一个想法是，它们可以一起使用吗？闭包提供低级编译器和浏览器抽象，而 Angular 提供应用程序级服务和结构？这是否有意义，并且可以很好地协同工作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-25T11:27:12.203

我知道的唯一使用 AngularJS 的 Google 项目是 DoubleClick 团队。[（演示文稿）](http://www.youtube.com/watch?feature=player_detailpage&v=OkCik7SE3po)本质上，除了 UI 构建之外，他们仍然使用 Google Closure Library 来做所有事情。另请注意，他们使用 Google Closure Compiler，但这几乎是给定的，“没有人”只使用没有编译器的库。

Google Closure Library 在其命名空间中带有一个 UI 框架`goog.ui`。这个框架在几乎所有方面都可以与 Android、iOS、Swing 和 QT 等非 Web UI 框架进行比较。他们有一个我喜欢称之为 DOM 元素的东西`goog.ui.Component`，它有很多很棒的生命周期机制，用于垃圾收集和事件监听等等。你有类似的东西`goog.ui.Control`，它是 的子类`goog.ui.Component`，并以一种非常有趣的方式处理用户交互。例如，它允许您插入渲染器，因此您可以将 a 更改`<button>`为 an，`<a>`而无需更改除实际渲染之外的任何其他逻辑。

说到类和子类，Google Closure Library 也有这个。您不必使用内置的，重要的部分是您在方法中以某种方式调用“超类”的原型。例如，您可以使用 CoffeeScript 中的类系统，Google Closure Library 不在乎。

DoubleClick 团队选择 AngularJS 的原因[显然](https://groups.google.com/d/topic/closure-library-discuss/C87SV9f0p6o/discussion)很大程度上是因为 AngularJS 提供的数据绑定功能。Google Closure Library 中没有内置任何东西可以在数据更改时自动更新 UI。

综上所述，Google Closure 是一头巨大的野兽，AngularJS 可以替代`goog.ui`Google Closure Library 的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:11:16.673

我认为 AngularJS 更像是一个可靠的 MVC/MVVM 框架，而闭包库是一组松散的组件，尽管[AngularJS 模板](http://docs.angularjs.org/guide/dev_guide.templates)和[闭包模板](https://developers.google.com/closure/templates/)有很多共同点。

# ruby - 无法将 Range 转换为 Integer (Ruby on Rails)

> ID：11054177
> 
> 赞同：8
> 
> 时间：2012-06-15T15:53:22.007
> 
> 标签：ruby, ruby-on-rails-3, heroku, range

我正在使用 Ruby (1.9.3) 和 Rails (3.2.2)。我有一个任务文件，其中包含一堆要填充到我的数据库中的假数据。

这是我认为导致问题的任务的一部分

```
#Create random Tender and populate the db
     20.times do |n|
      title  = "#{Faker::Company.bs()} tender "
      company_name = Faker::Company.name
      opening_date=Time.at(rand * Time.now.to_i)
      closing_date=Time.at(opening_date + ( 8*7*24*60*60)) #add 8 weeks to the deadline
      bid_amount= rand(10000..100000)
      description=Faker::Lorem.paragraph(sentence_count = 3)

      Tender.create!(title: title,
                   company_name: company_name,
                   opening_date: opening_date,
                   closing_date: closing_date,
           bid_amount: bid_amount    ,
           bid_amount: bid_amount    ,
           description: description )
    end 
```

它适用于 dev，但只有上述部分不在生产数据库上执行。我 `gem 'sqlite3', '1.3.5'`在开发中使用。和

`gem 'pg', '0.12.2'`在生产中（heroku）

当我跑

```
git push heroku
$ heroku pg:reset SHARED_DATABASE --confirm myapp
$ heroku run rake db:migrate
$ heroku run rake db:populate

db:populate throws an error that says **can't covert Range to Integer.** 
```

任何想法可能是什么问题？

**编辑：** bid_amount 的数据类型是`decimal`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T16:03:59.557

您的生产 ruby​​ 版本不是 1.9.3。大概是1.8.7

```
$ ruby -v
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]
$ irb
>> rand(10000..100000)
TypeError: can't convert Range into Integer
    from (irb):1:in `rand'
    from (irb):1
>> exit
$ rvm use 1.9.3
Using /Users/chirantan/.rvm/gems/ruby-1.9.3-p0
$ irb
1.9.3p0 :001 > rand(10000..100000)
 => 37036 
```

在生产环境中安装 ruby​​ 1.9.3，rand 方法应该可以正常工作。

# .net - 在发布模式下在 .NET 中调试

> ID：11054183
> 
> 赞同：7
> 
> 时间：2012-06-15T15:53:37.650
> 
> 标签：.net, debugging, clr, cil

前段时间看了一篇关于CLR的文章，作者展示了如果一个项目是在DEBUG模式下编译的，在每个操作符之前都会有一个NOP命令，这样就可以调试代码了。尽管如此，今天我发现我们也可以在发布模式下调试......请帮助理解差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:03:49.637

调试 .net 代码以便您可以在执行源代码时单步执行它通常需要三件事：

*   **与程序集 .dll 或 .exe 一起构建的**符号（相关的 .pdb 文件）****
***   **源**（相关的.cs、.vb等文件）*   执行的机器代码必须**未经优化****

 ****符号**由[/debug:{full | pdbonly}](http://msdn.microsoft.com/en-US/library/8cw0bt21%28v=vs.80%29)标志。如果您指定`/debug:full`（即使在发布版本中，关闭编译器优化），您可以附加到已经运行的进程并逐步执行代码。如果您有`/debug:pdbonly`，那么您必须使用调试器来启动程序（并且在附加到已运行的进程时无法查看符号）。

**优化**由[/debug](http://msdn.microsoft.com/en-us/library/8cw0bt21%28v=vs.80%29.aspx)编译器选项精细控制，但可以由[/optimize-](http://msdn.microsoft.com/en-US/library/t0hfscdc%28v=vs.80%29)进一步控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:03:32.523

您可以在一定程度上在发布模式下进行调试。Debug 和 Release 只是简单的构建配置（您可以创建许多配置），真正的区别在于 Debug 配置不会优化生成的二进制代码（优化的代码使调试复杂化）。它还生成附加的调试数据，而发行版没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:09:22.120

在发布模式下编译会优化生成的二进制文件，这使得调试器更难（但并非不可能）知道哪个二进制代码来自源代码的哪一行。

调试模式旨在使调试器更容易“跟随”，因此它使用 NOP 分隔代码行，并且不优化生成的二进制文件。**

# memory - AdMob AdView SDK 6.0.1 内存使用情况

> ID：11054184
> 
> 赞同：2
> 
> 时间：2012-06-15T15:53:38.530
> 
> 标签：memory, admob, allocation, adview

我尝试使用 AdMobsAdsSdk6.0.1 在我的 Android 应用中包含 AdMob 横幅。横幅正确显示，但将手机任务管理器中显示的内存使用量从 2 MB 增加到 10 MB。DDMS 显示大约 5MB。我已经阅读了一些关于旧版本中可能存在内存泄漏的文章，但找不到任何解决我问题的方法。我用一个简单的测试应用程序重现了这种行为。

Activity 仅包含 AdView

```
public class TestActivity extends Activity {
    private AdView adView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        adView = new AdView(this, AdSize.BANNER, "adunitid");
        LinearLayout layout = (LinearLayout) findViewById(R.id.content_Layout);
        layout.addView(adView);
        adView.loadAd(new AdRequest());
    }
    @Override
    protected void onDestroy() {
        if (adView != null) {
                adView.destroy();
        }
        super.onDestroy();
    }
} 
```

清单也只是教程的副本

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="admobtest.test"
android:versionCode="1"
android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="13" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    </application>
</manifest> 
```

我也尝试通过 xml 包含横幅，但我最终得到了相同的结果。切换到横向和返回会越来越多地提高记忆力。我错过了什么还是有人可以给我一些提示如何解决这个问题？我认为 adView.destroy 解决了内存泄漏。

# ios - In App Purchase Crash - [[SKPaymentQueue defaultQueue] addPayment:payment];

> ID：11054190
> 
> 赞同：3
> 
> 时间：2012-06-15T15:53:44.073
> 
> 标签：ios, ios5, in-app-purchase

我遇到了以下错误消息：

`[FilterPurchase respondsToSelector:]: message sent to deallocated instance 0x1edacba0`

这发生在这一行：

```
 [[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

当我加载 In App Purchase View 时出现问题，然后从 superview 中删除该视图，然后重新打开它并单击进行购买。

有没有人对我如何纠正这个问题有任何想法。不知道以上信息是否足以纠正问题。

不知道这是否与它有关，但在每次负载时都会调用它。

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T16:32:46.693

我认为问题已经解决。就在按下关闭模式的后退按钮之前，我调用了。

```
 [[SKPaymentQueue defaultQueue] removeTransactionObserver:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T08:22:54.277

您需要在 viewWillDisappear 中清理 SKPaymentQueue

斯威夫特 2.2

```
override func viewWillDisappear(animated: Bool) {
    super.viewWillDisappear(true)

    SKPaymentQueue.defaultQueue().removeTransactionObserver(self)

} 
```

斯威夫特 2.3

```
override func viewWillDisappear(animated: Bool) {
    SKPaymentQueue.defaultQueue().removeTransactionObserver(self)
} 
```

斯威夫特 3.0

```
override func viewWillDisappear(_ animated: Bool) {
    SKPaymentQueue.default().remove(self)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T18:04:57.480

崩溃的原因之一可能是插入**SKPayment**与 empty `productIdentifier`。

# android - 获取每个帐户类型的联系人

> ID：11054191
> 
> 赞同：0
> 
> 时间：2012-06-15T15:53:44.690
> 
> 标签：android

有人可以帮助我了解如何获取每个帐户的所有联系人吗？意思是，我想设置一个条件来确定联系人是来自手机（由用户创建）还是来自谷歌和其他一些同步源，因为到目前为止我正在获取所有联系人及其所有同步源的组合，例如本地联系人、谷歌甚至雅虎联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:53:28.450

> 有人可以帮助我了解如何获取每个帐户的所有联系人吗？

您可以使用下一个片段来检索特定帐户类型的联系人：

```
String where = RawContacts.ACCOUNT_TYPE+ "=?";
String[] args = { accountType };
Cursor contacts = contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, where, args, null);

int numberIndex = contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
int displayNameIndex = contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
for (contacts.moveToFirst(); !contacts.isAfterLast(); contacts.moveToNext()) {
    String number = contacts.getString(numberIndex);
    String displayName = contacts.getString(displayNameIndex);
    // do something with account contacts
}
contacts.close(); 
```

要过滤普通电话联系人（未连接到任何帐户），您可以使用：

```
String where = RawContacts.ACCOUNT_TYPE+ " IS NULL"; 
```

# naming-conventions - 对于“允许”或启用的选项，布尔值有哪些好的变量名称后缀？

> ID：11054192
> 
> 赞同：1
> 
> 时间：2012-06-15T15:53:46.183
> 
> 标签：naming-conventions

我正在尝试为布尔变量提出一个良好的命名约定，以表明某些东西是“允许的”。

例如， **WarningAllowed** 或**WarningEnabled**（表示我们已打开选项以发出警告）。

*CodeComplete*对布尔值 (Has<> Is<>) 有一些建议，但这些建议不适用。

我的想法：

*   <>启用
*   <>允许
*   应该<>
*   允许<>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:12:36.483

我已经看到`Can`在这种情况下使用的前缀。例如：

*   [`StackPanel.CanHorizontallyScroll`](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.canhorizontallyscroll.aspx)
*   [`ReceiveActivity.CanCreateInstance`](http://msdn.microsoft.com/en-us/library/system.workflow.activities.receiveactivity.cancreateinstance.aspx)
*   [`CanExecuteToolEventArgs.CanExecute`](http://msdn.microsoft.com/en-us/library/microsoft.windows.design.interaction.canexecutetooleventargs.canexecute%28v=vs.100%29.aspx)

我非常喜欢这种命名约定，因为它抽象了值的原因，无论是*真*还是*假*：API 的用户通常不必知道命令是因为被禁止还是因为不可能而不合格执行。结果是一样的：一个灰色的菜单项/按钮/任何东西。

这也允许在将来的版本中更改原因（例如，如果一个`Can*`属性仅在最初实际上不可能时才返回*false*，但在将来的版本中，添加了访问权限模型，从那时起，该`Can*`属性的值也取决于关于当前的访问权限）。

# git - gitolite 中的每个分支，每个 repo 提交钩子

> ID：11054194
> 
> 赞同：1
> 
> 时间：2012-06-15T15:53:54.037
> 
> 标签：git, gitolite, githooks, git-post-receive

我想添加一个提交钩子，当在 gitolite/git 服务器上收到推送时，只针对给定的分支和 repo 组合（repo 'dog' 上的分支'cat'）。

我的环境：git版本1.7.4.1，

到目前为止我做了什么：

1.  `/home/git/repositories/dog.git/hooks/post-receive.secondary`在 git/gitolite 服务器上触摸了一个文件。

2.  使用以下内容编辑文件：

    ```
    #!/bin/sh
    #
    refname="$1"
    oldrev="$2"
    newrev="$3"
    if [ "$refname" == "refs/heads/cat" ]
    then
       touch /tmp/test
    fi 
    ```

3.  将文件的所有者设置为“git”用户

4.  将文件权限设置为 700

5.  对“狗”回购的“猫”分支进行了提交

结果：未创建测试文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:55:31.317

如果我查看[Gitolite v2 (g2) 钩子链接部分](http://sitaramc.github.com/gitolite/g2/hooks.html#hookchaining)，只有两个钩子与“ `.secondary`”扩展有关：

*   更新钩子，因为它被用于所有 repos 并且对 gitolite 的访问控制至关重要
*   post-update 挂钩，因为它`gitolite-admin`仅在 repo 中使用，用于“编译”配置等。

*   （`post-receive`仅在激活镜像时才涉及，在您的 gitolite 安装中不应该是这种情况）

所以你不需要在你的 中声明一个`post-receive.secondary`，只是一个`post-receive`钩子`</path/to/gitolite>/hooks/common/`，如“[如何在 gitolite 中安装钩子](https://stackoverflow.com/a/10617926/6309)”中所述。

* * *

[OP specialsauce](https://stackoverflow.com/users/1459145/specialsauce) 在评论中总结：

> 我需要`post-receive`在存储库文件夹中添加一个钩子（而不是第二个），我认为这是它没有执行的主要原因。
> 
> 我认为最后我唯一改变的另一件事是将烫发从`700`（无论如何应该没问题？）设置为`755`.
> 钩子现在可以可靠地执行。
> 
> 我不需要运行`gl-setup`脚本。此外，我从上面概述的 var 分配代码更改为 "while" on `STDIN`。

# java - 来自静态方法 Java 的线程

> ID：11054198
> 
> 赞同：0
> 
> 时间：2012-06-15T15:54:09.853
> 
> 标签：java, multithreading

我想要做的是，传递`clientId`给`ClearSession()`并使用`clientId`in`run()`来调用`session.loadByLastAccessed()`。但它抛出的错误是......

```
Service.java:117: non-static variable this cannot be referenced from a static context 
    at Thread t = new Thread(new ClearSession(clientId)) (since it is inner class) 
```

如果我将类更改为is `static`，它将在`session.loadByLastAccessed(entityManager, clientId);`since `entityManager`is上引发错误`non-static`。

关于如何`start()`从方法中创建线程`static`并传递`non-static`变量的任何想法？

这是我的代码...

```
private EntityManager entityManager; //declared within class along with code below.

public static void initClients()
        throws SessionServiceException
    {
        Properties properties = ApplicationConfig.getInstance().getProperties();
        Set<Object> keys = properties.keySet();
        String clientId = null;
        for (Object keyObject : keys)
        {
            String key = (String)keyObject;
            if (key.startsWith(SessionFactory.CLIENT_PREFIX))
            {
                clientId = StringUtils.substringAfter(key, SessionFactory.CLIENT_PREFIX);
                SessionFactory.getSessionIntf(clientId);
            }
        }

        if(!StringUtils.equals("branch", clientId ))
        {
            Thread t = new Thread(new ClearSession(clientId));
            t.start();
        }
    }

private class ClearSession implements Runnable 
{
    private String clientId = "";

    public ClearSession(String clientId) 
    {
        this.clientId = clientId;
    }

    public void run() 
    {
        try 
        {
            // Pause for 2 hours
            Thread.sleep(7200000);
            // get client session
            AbstractImpl session = SessionFactory.getSessionIntf(clientId);
            session.loadByLastAccessed(entityManager, clientId);

        } catch (InterruptedException ie) {
            throw ie;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:34:58.457

我现在明白了。你有`private class`，这意味着它是内部类。默认情况下，内部类隐式引用外部类的`this`. 只需将类声明为`private static class`或将其移出即可。

# android - 在Android中关闭/完成活动的正确方法

> ID：11054205
> 
> 赞同：0
> 
> 时间：2012-06-15T15:54:40.433
> 
> 标签：android, android-activity, activity-finish

我的应用程序在包含 ListView 的 Activity A 处启动。如果用户点击“添加”按钮并转到 Activity B，ListView 可以添加项目。

在活动 B 中，他们填写了一些表格并点击“确定”按钮，这会将他们带回活动 A，在该活动 A 中将新项目添加到 ListView。

从 B 到 A 后，我有一个 finish() 方法——但反之则不然。

所以如果你在添加三个项目后回击三次。它只会重复 ListView (Activity A) 3 次以上——少了一个添加的项目。

这样做的最佳方法是什么？我不能在“添加”按钮（从 A 到 B）上放置完成方法，因为如果您在 Activity B 中，它将关闭应用程序而不是将您带回 A ——这是我不想要的。也就是说，如果用户改变主意并且不想在 B 中通过点击“确定”来“添加新项目”。手动返回按钮是唯一的答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:07:44.020

使用表格开始活动 B `startActivityForResult()`，填写表格后完成活动 B。

**编辑**

当你`startActivityForResult()`，你传递2个参数，即`intent`和`requestcode`。完成新活动（在您的情况下为活动 B）后，您使用一个函数`setResult(RESULT_OK)`来表示活动 B 中的操作成功，然后调用`finish()`. 调用`finish()`Activity B 后会返回到 Activity A 并会调用`onActivityResult(int requestCode, int resultCode, Intent data)`. 该参数`requestcode`有助于识别返回的特定活动/请求。

希望这个解释对你有所帮助。

# r - lapply 和 do.call 运行很慢？

> ID：11054208
> 
> 赞同：7
> 
> 时间：2012-06-15T15:54:55.457
> 
> 标签：r, data.table, lapply, do.call

我有一个大约 35,000 行，7 列的数据框。它看起来像这样：

> 头(nuc)

```
 chr feature    start      end   gene_id    pctAT    pctGC length
1   1     CDS 67000042 67000051 NM_032291 0.600000 0.400000     10
2   1     CDS 67091530 67091593 NM_032291 0.609375 0.390625     64
3   1     CDS 67098753 67098777 NM_032291 0.600000 0.400000     25
4   1     CDS 67101627 67101698 NM_032291 0.472222 0.527778     72
5   1     CDS 67105460 67105516 NM_032291 0.631579 0.368421     57
6   1     CDS 67108493 67108547 NM_032291 0.436364 0.563636     55 
```

gene_id 是一个因子，它有大约 3,500 个独特的级别。我想，对于每个级别的gene_id 得到`min(start)`, `max(end)`, `mean(pctAT)`, `mean(pctGC)`, 和`sum(length)`.

我尝试使用 lapply 和 do.call ，但它需要永远 +30 分钟才能运行。我正在使用的代码是：

```
nuc_prof = lapply(levels(nuc$gene_id), function(gene){
  t = nuc[nuc$gene_id==gene, ]
  return(list(gene_id=gene, start=min(t$start), end=max(t$end), pctGC =
              mean(t$pctGC), pct = mean(t$pctAT), cdslength = sum(t$length))) 
})
nuc_prof = do.call(rbind, nuc_prof) 
```

我确定我做错了什么来减慢速度。我还没有等待它完成，因为我确信它可以更快。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T16:14:22.693

由于我处于传福音的心情……这就是快速`data.table`解决方案的样子：

```
library(data.table)
dt <- data.table(nuc, key="gene_id")

dt[,list(A=min(start),
         B=max(end),
         C=mean(pctAT),
         D=mean(pctGC),
         E=sum(length)), by=key(dt)]
#      gene_id        A        B         C         D   E
# 1: NM_032291 67000042 67108547 0.5582567 0.4417433 283
# 2:       ZZZ 67000042 67108547 0.5582567 0.4417433 283 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-15T16:05:36.813

`do.call`在大型物体上可能会非常慢。我认为这是由于它如何构建调用，但我不确定。一个更快的选择是`data.table`包。或者，正如@Andrie 在评论中建议的那样，`tapply`用于每个计算和`cbind`结果。

关于您当前实现的注释：您可以使用该`split`函数将您的 data.frame 分解为您可以循环的 data.frames 列表，而不是在您的函数中进行子集设置。

```
g <- function(tnuc) {
  list(gene_id=tnuc$gene_id[1], start=min(tnuc$start), end=max(tnuc$end),
       pctGC=mean(tnuc$pctGC), pct=mean(tnuc$pctAT), cdslength=sum(tnuc$length))
}
nuc_prof <- lapply(split(nuc, nuc$gene_id), g) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-18T20:27:49.347

正如其他人所提到的 -`do.call`大型对象存在问题，我最近发现它在大型数据集上到底有多慢。为了说明这个问题，这里有一个使用带有大型回归对象的简单摘要调用的基准测试（使用 rms 包的 cox 回归）：

```
> model <- cph(Surv(Time, Status == "Cardiovascular") ~  
+              Group + rcs(Age, 3) + cluster(match_group),
+              data=full_df, 
+              x=TRUE, y=TRUE)

> system.time(s_reg <- summary(object = model))
   user  system elapsed 
   0.00    0.02    0.03 
> system.time(s_dc <- do.call(summary, list(object = model)))
   user  system elapsed 
 282.27    0.08  282.43 
> nrow(full_df)
[1] 436305 
```

虽然该`data.table`解决方案是一个很好的方法，但它不包含完整的功能，`do.call`因此我想我会分享我的`fastDoCall`功能 - Hadley Wickhams 的修改建议在 R-mailing 列表中进行[hack 。](http://r.789695.n4.nabble.com/call-do-call-expression-too-big-td3574335.html)它在 Gmisc-package 1.0-version 中可用（尚未在 CRAN 上发布，但您可以在[此处](http://gforge.se/packages/)找到它）。基准是：

```
> system.time(s_fc <- fastDoCall(summary, list(object = model)))
   user  system elapsed 
   0.03    0.00    0.06 
```

该函数的完整代码如下：

```
fastDoCall <- function(what, args, quote = FALSE, envir = parent.frame()){
  if (quote)
    args <- lapply(args, enquote)

  if (is.null(names(args))){
    argn <- args
    args <- list()
  }else{
    # Add all the named arguments
    argn <- lapply(names(args)[names(args) != ""], as.name)
    names(argn) <- names(args)[names(args) != ""]
    # Add the unnamed arguments
    argn <- c(argn, args[names(args) == ""])
    args <- args[names(args) != ""]
  }

  if (class(what) == "character"){
    if(is.character(what)){
      fn <- strsplit(what, "[:]{2,3}")[[1]]
      what <- if(length(fn)==1) {
        get(fn[[1]], envir=envir, mode="function")
      } else {
        get(fn[[2]], envir=asNamespace(fn[[1]]), mode="function")
      }
    }
    call <- as.call(c(list(what), argn))
  }else if (class(what) == "function"){
    f_name <- deparse(substitute(what))
    call <- as.call(c(list(as.name(f_name)), argn))
    args[[f_name]] <- what
  }else if (class(what) == "name"){
    call <- as.call(c(list(what, argn)))
  }

  eval(call,
       envir = args,
       enclos = envir)
} 
```

# apache-flex - writeText() 中的 AlivePDF 自动换行

> ID：11054210
> 
> 赞同：0
> 
> 时间：2012-06-15T15:55:04.050
> 
> 标签：apache-flex, pdf-generation, alivepdf

我正在尝试将大字符串打印到alivepdf。我将字符串按其换行符拆分为一个数组，然后在循环中打印每个单独的元素。

我遇到的问题是当在alivepdf中打印一个长字符串时，writeText（）将自动换行并转到新行（基于第一个参数）。如果字符串换行超过两次，则数组中的下一个元素将在下一次迭代期间打印在换行字符串的最后一位上。

是否可以在字符串被自动换行后提取当前的 y 值？或者也许返回字符串将被自动换行的次数？我的边距设置为 20。谢谢！

```
var noteLines:Array = noteText.text.split('\r');
for each (var line:String in noteLines) {
    y += 10;
    printPDF.setXY(x, y);
    printPDF.writeText(5, line);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:01:22.960

这是获取pdf当前y位置的代码。

`printPDF.getY()`

# javascript - 在 Javascript 中模拟“IN”运算符以简化冗余逻辑 OR 的最佳解决方案是什么

> ID：11054211
> 
> 赞同：0
> 
> 时间：2012-06-15T15:55:05.630
> 
> 标签：javascript

我有一个可以返回多个有效值的 Ajax 请求，所以我使用“OR”运算符来分析响应，如下所示：

```
if(json.reply == "d" || json.reply == "e" || json.reply == "i" || json.reply == "j" || json.reply == "k" ) 
```

我的真实代码还有更多的比较，那么在 Javascript 中是否有更易读和更优雅的 sintaxe 来编写这个？类似于 SQL "IN" 运算符：

```
if( json.reply IN ("d", "e", "i", "j", "k") ) 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:02:20.027

switch 语句是另一种可能的方式：

```
switch (varName)
{
case "mike": case "joe": case "larry": 
alert('cool');
break;

default: 
alert('also cool');
break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:59:10.603

您可以创建一个包含所有允许答案的数组，然后查看回复是否在该数组中。

```
var allowedReplies = ["d", "e", "i", "j", "k"];

if(allowedReplies.indexOf(json.reply) != -1) {
  // your other code
} 
```

请注意，`indexOf`并非在所有版本的 IE 中。根据 MDN，它显示在 IE9 中。您可以轻松地为没有它的版本编写自己的实现，特别是如果您使用 jQuery（我为我的一个项目做了同样的事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:05:46.200

您可以像这样重新编程函数：

```
function IN()
{
    var exist=0;
    for(var i=0,il=arguments.length;i<il;i++)
        if(arguments[0]==arguments[i])
            exist=1;
    return exist;
} 
```

你这样调用函数：`IN(json.reply,"d","e","i","j","k");`

这是一个小提琴：http: [//jsfiddle.net/mageek/TwCKC/3](http://jsfiddle.net/mageek/TwCKC/3)

**编辑：**

相同的函数，但调用方式不同：

```
function IN()
{
    var exist=0;
    for(var i=0,il=arguments.length;i<il;i++)
        if(this!=arguments[i])
            exist=1;
    return exist;
}
String.prototype.IN=IN;
Number.prototype.IN=IN;
Object.prototype.IN=IN; 
```

然后你这样称呼它：`json.reply.IN("d","e","i","j","k");`

还有小提琴：http: [//jsfiddle.net/mageek/TwCKC/2](http://jsfiddle.net/mageek/TwCKC/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:05:53.410

```
 if(json.reply in {d:1,e:1,i:1,j:1,k:1}){

or

    if({d:1,e:1,i:1,j:1,k:1}[json.reply]){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:57:36.803

使用[`indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf). 它将返回找到的字母的索引，如果没有找到，则返回 -1。

```
["d", "e", "i", "j", "k"].indexOf("i")
> 2
["d", "e", "i", "j", "k"].indexOf("a")
> -1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T16:05:26.240

为避免可能缺少`indexOf`使用正则表达式：

```
var allowed = ["a","b","c","d"];
if (RegExp("^("+allowed.join("|")+")$").test(json.reply)){
    console.log('allowed');
    } 
```

如果您允许的回复可能包含正则表达式量词等，那么您首先要转义它们。

# css - CSS3 背景剪辑不适用于透明边框

> ID：11054212
> 
> 赞同：2
> 
> 时间：2012-06-15T15:55:15.690
> 
> 标签：css, transparency, border

我正在关注 CSS-Tricks 上的[透明边框教程](http://css-tricks.com/transparent-borders-with-background-clip/)。但是，我的代码不会使边框透明。我的代码（在我看来）看起来是正确的。

请看[这个小提琴](http://jsfiddle.net/26795/1/)

```
#popup {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 300px;
    border: 20px solid rgba(0,0,0,0.3);
    border-radius: 20px;

    -moz-background-clip: padding; 
    -webkit-background-clip: padding;  
    background-clip: padding-box;     

    padding: 10px;
    margin: 20px;
    background: white;
}​ 
```

您可以在 css-tricks[示例页面上](http://css-tricks.com/examples/TransparentBorders/)看到它们不需要任何双重包装的 div 技巧。他们只是将 div 背景设置为白色，将边框设置为透明并指定填充的剪辑区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:01:25.797

交换顺序，`background`看看`border-color`：

[http://jsfiddle.net/efortis/26795/4/](http://jsfiddle.net/efortis/26795/4/)

# binary - 2的补码优于1的补码？

> ID：11054213
> 
> 赞同：63
> 
> 时间：2012-06-15T15:55:22.353
> 
> 标签：binary, negative-number

在二进制数系统的负数表示中，2 的补码比 1 的补码有什么优势？它如何影响二进制系统中以数字的某个位表示形式存储的值的范围？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-15T16:04:11.777

二进制补码相对于一个补码的主要优点是二进制补码只有一个值为零。一个补码有一个“正”零和一个“负”零。

接下来，要使用一个补码添加数字，您必须首先进行二进制加法，然后添加一个结束进位值。

二进制补码只有一个零值，并且不需要进位值。

您还询问了存储的值范围如何受到影响。考虑一个八位整数值，以下是您的最小值和最大值：

```
Notation     Min   Max
==========  ====  ====
Unsigned:      0   255
One's Comp: -127  +127
Two's Comp: -128  +127 
```

参考：

*   [http://en.wikipedia.org/wiki/Signed_number_representations](http://en.wikipedia.org/wiki/Signed_number_representations)
*   [http://en.wikipedia.org/wiki/Ones%27_complement](http://en.wikipedia.org/wiki/Ones%27_complement)
*   [http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-11-27T18:10:16.113

主要优点是：

1.  在 1 中有一个`-0`( `11111111`) 和一个`+0`( `00000000`)，即相同的两个值`0`。另一方面，在 2 的补码中，`0`( `00000000`) 只有一个值。这是因为

    ```
    +0 --> 00000000 
    ```

    和

    ```
     -0 --> 00000000 --> 11111111 + 1 --> 00000000 
    ```

2.  在使用 1 进行加法或减法等算术运算时，我们必须添加一个额外的进位位，即`1`在结果中添加正确的答案，例如：

    ```
     +1(00000001)
         +
           -1(11111110)
         -----------------
         = (11111111) 
    ```

但正确答案是`0`。为了得到`0`，我们必须`1`在结果中添加一个进位位 ( `11111111 + 1 = 00000000`)。

在 2 的补码中，不必修改结果：

```
 +1(00000001)
              +
               -1(11111111)
         -----------------
              = 1 00000000 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-15T16:09:00.750

**负整数：** 2 的补码可用于负整数。1 的补码只是一种计算技术，可能有助于评估 2 的补码。2 的补码的真正（击败）对手是负整数的符号幅度表示。

**无溢出：** 1 的补码对负整数没有特殊用途。2 的补码是有意义的，因为它可以用于自然加法和减法运算，而无需更改位。如果没有发生溢出，结果的符号位就是正确的值。这种表示法中的位数提升是直截了当的，例如，要将一个 8 位有符号整数提升为 16，我们可以简单地在其高字节中重复整数值的符号位。

**符号幅度：**相反，符号幅度符号只是人类用来表示负整数的方式。位数提升和加减运算与这种表示法有点混乱。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-06T06:55:34.807

## 二进制补码的优点 #1

在二进制补码表示中，值零通过将所有位设置为零来唯一表示：

**

## 补码 #2 的优点

** 当您在二进制补码表示中对两个有符号整数执行算术运算（例如，加法、减法、乘法、除法）时，您可以使用完全相同的方法，就好像您有两个无符号整数（即非负整数与没有符号位）...除了，你扔掉高进位（或减法的高借位）

## **补码 #3 的优点**

二的补码表示的这个性质是这样的

## 非常方便，几乎每个将军

今天可用的专用计算机使用Two's Complement。为什么？因为，使用二进制补码，我们不需要特殊算法（因此不需要额外的电路）来进行涉及负值的算术运算。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-28T16:14:32.150

二进制补码相对于有符号位表示的另一个主要优点是 2 的补码表示在硬件中易于操作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T16:02:24.910

2s 补码不是用来表示负数，而是倒数。

意味着你可以做 A + B'（其中 B' 是 B 的 2s 补码）来给出 A - B，意味着你可以用加法器做所有事情，而不需要减法器

# android - 图库视图顶部的自定义绘图（及其子视图）

> ID：11054214
> 
> 赞同：2
> 
> 时间：2012-06-15T15:55:27.577
> 
> 标签：android, gallery, android-gallery, android-custom-view, ondraw

我正在尝试在画廊顶部绘制自定义 UI（在本例中为路径）。我扩展了基本的 Gallery 类并覆盖了 draw 方法，如下所示：

```
public class MyGallery extends Gallery {
...
@Override 
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawPath(mPath, mPaint);
} 
```

我认为将我的路径图放在之后`super.onDraw`可以确保路径被绘制在画廊的顶部并且它是子视图，但是子视图被分层在我的路径之上。有谁知道如何正确绘制这个？（我知道我可以包含一个 RelativeLayout 并分层一个进一步的视图，以这种方式在画廊顶部绘制我的路径，但我宁愿将它全部放在一个类中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:55:28.187

我在询问后直接发现了这个，所以决定无论如何发布，以防有​​人遇到同样的问题。要在画廊中绘制子视图，请覆盖`dispatchDraw`而不是`onDraw`

```
@Override
protected void dispatchDraw(Canvas canvas) {
    super.dispatchDraw(canvas);
    canvas.drawPath(mPath,mPaint);
} 
```

# asp.net - ASP.NET 运行时错误：无法加载文件或程序集“Interop.CertEnroll”

> ID：11054217
> 
> 赞同：1
> 
> 时间：2012-06-15T15:55:32.653
> 
> 标签：asp.net

我有一个在 VS2010 中编辑的 ASP.Net 4.0 站点。每个 @Master 和 @Page 标记都有蓝色的波浪线，给出以下错误：

ASP.NET 运行时错误：无法加载文件或程序集“Interop.CertEnroll”或其依赖项之一。试图加载格式不正确的程序。

我知道这与尝试将 32 位 dll 加载到 64 位应用程序中有关，但我不确定如何控制它，因为我不确定这个 Iterop.CertEnroll 客户端是如何被引用的。

我的构建目标是任何 CPU。

我的应用程序仍然可以运行，但看到所有这些警告让我很困扰，而且我已经看到提示，这可能会导致无法识别我的 AjaxToolkit 服务器标签的问题。

谢谢！卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:02:08.637

确保您是针对 .NET 4 而不是 .NET 4 Compact Framework 进行编译。

不久前我遇到了同样的问题，这个缺失的依赖项。

安装[Microsoft Online Services 登录](http://www.microsoft.com/download/en/details.aspx?id=11859)提供了正确的程序集，但我不确定为什么需要这样做。

编辑：我似乎找不到将我指向上述下载的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T06:15:03.597

这是一个他们不会修复的[已知错误。](http://connect.microsoft.com/VisualStudio/feedback/details/556670/could-not-load-file-or-assembly-error-when-referencing-a-64-bit-assembly)不过，您可以尝试建议的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:57:45.973

我为你发现了[这个](http://blogs.msdn.com/b/alejacma/archive/2011/11/07/problems-when-compiling-and-running-code-that-uses-certenroll-with-net-4-0-and-x64.aspx)解决方案。由于我无法重现该错误，因此不能确切地说它是否会为您解决该错误，但您仍然可以尝试。以下是链接中故事的关键：

> 如果您针对 x86 平台而不是 Any CPU 平台进行编译（这使得代码默认在 x64 系统上针对 x64 平台运行），它将正常工作。

一切顺利！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-04T22:27:36.240

TL;DR：如果`ContentPlaceHolder`标签指定正确，请检查您的母版页，并检查您的页面以查看`ContentPlaceHolder`标签 ID 是否正确。

长答案：

对于面临此问题的任何人并且如果其他解决方案不起作用，您可以尝试另一件事。我遇到了同样的错误，所有母版和页面标签都以错误突出显示：

> 无法加载文件或程序集 Microsoft.Practices.ServiceLocation，版本 = 1.3.0.0

我的包裹都井井有条，我花了很多时间试图让它工作。原来错误是误导，实际错误是`ContentPlaceHolder`我的嵌套母版页中缺少标签。

# notepad - 删除此字符串 END_PAGEREFS 之后的任何内容并删除 BEGIN_PAGEREFS 之前的任何内容

> ID：11054220
> 
> 赞同：1
> 
> 时间：2012-06-15T15:55:49.310
> 
> 标签：notepad

我有大量的文本文件，我有一个问题，我想在这个字符串 END_PAGEREFS 之后删除任何东西，并在 BEGIN_PAGEREFS 之前删除任何东西，因为我想在它们之间。

使用notepadd ++或frontpage 2003或powergrip软件regular-expressions.info

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:06:22.913

在记事本++中，尝试打开一些文件，然后替换

```
BEGIN_PAGEREFS.* 
```

和

```
END_PAGEREFS.* 
```

标记“正则表达式”和“替换所有打开的文件”选项。

# c# - C# catalogProductRequestAttributes 中的 MagentoAPI

> ID：11054221
> 
> 赞同：0
> 
> 时间：2012-06-15T15:55:57.430
> 
> 标签：c#, magento

我正在尝试通过使用 c# 调用其 Web 服务来从 magento 检索产品信息。到目前为止，除了衬​​衫尺寸、颜色等自定义属性外，我已正确获取所有产品信息

我想以字符串形式获取 shirt_size，例如“Medium”、“Large”、“XXS”等但是当我调用带有附加属性的 catalogProductInfo

```
 //attribute
                var attributes = new catalogProductRequestAttributes
                                                                 {
                                                                     attributes =
                                                                         new string[] { "name", "description", "price" },
                                                                     additional_attributes = new string[] { "shirt_size","gender","color" }
                                                                 };

 catalogProductReturnEntity productReturnEntity =
                        magentoService.catalogProductInfo(sessionId, product.sku, null, attributes, null); 
```

我只得到 key="shirt_size", value="100", 另一个 key="gender", value="36" 的 associativeEntity

这是否意味着我必须使用另一种方法来查找该 associativeEnity 值的值以获取诸如“Medium”、“Large”、“male”等字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:25:00.837

var 属性 = magentoService.catalogProductAttributeOptions(sessionId, "shirt_size", null);

然后它将返回带有 Label="Small", value="100" 信息的 catalogAttributeOptionEntity

# unit-testing - 使用 Umbraco v4 API 的单元测试代码

> ID：11054223
> 
> 赞同：1
> 
> 时间：2012-06-15T15:56:08.903
> 
> 标签：unit-testing, umbraco

我正在尝试编写一套集成测试，其中我有使用 Umbraco API 的自定义代码。Umbraco 数据库位于 SQL Server CE 4.0 数据库（*.sdf 文件）中，我设法使该关联正常工作。

我的问题看起来是 Umbraco 代码中的依赖项。例如，我想为我的测试创建一个新用户，所以我尝试：

```
var user = User.MakeNew("developer", "developer", "mypassword", "my.email@email.com", adminUserType); 
```

现在你可以看到，我已经传递了一个用户类型，它是一个对象。我尝试了两种不同的方法来创建用户类型，这两种方法都由于空对象异常而失败：

```
var adminUserType = UserType.GetUserType(1);
var adminUserType2 = new UserType(1); 
```

问题在于，在每种情况下，UserType 代码都会调用`Cache`使用`HttpRuntime`该类的方法，该类自然为空。

我的问题是：有人可以建议一种针对 Umbraco 代码编写集成测试的方法吗？我最终是否必须使用诸如 TypeMock 或 JustMock 之类的模拟框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:12:49.357

以下是一些可能有帮助的资源：

[http://www.aaron-powell.com/unit-testing-with-umbraco](http://www.aaron-powell.com/unit-testing-with-umbraco)

[http://stream.umbraco.org/video/726639/aaron-powell-unit-testing](http://stream.umbraco.org/video/726639/aaron-powell-unit-testing)

# php - Yii，使用 with() 方法调用 findAll 时出错。

> ID：11054237
> 
> 赞同：0
> 
> 时间：2012-06-15T15:57:02.350
> 
> 标签：php, yii

我有 PHP 课

```
class SurveyQuestion extends CActiveRecord
{
    public function relations()
    {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'surveyOptions' => array(self::HAS_MANY, 'SurveyOptions', 'surveyQuestion_id'),
        'survey' => array(self::BELONGS_TO, 'Survey', 'survey_id'),
         );
    }
} 
```

在控制器中，我想获取带有选项的调查列表，所以我正在做..

```
$this->renderJson(array('success'=>true, 'message'=>'Records Retrieved Successfully',
'data'=>SurveyQuestion::model()->with('surveyOptions')->findAll())); 
```

但是当这个控制器方法被调用时，我得到了这个错误..

```
include(SurveyOptions.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory 
```

根据[http://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)，我应该能够在每次调查中得到选项的回复。

我认为， inclue(SurveyOptions.php) 应该是 SurveyOption.php （没有's'），但我看不出有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:57:40.860

阅读您的评论后，您只需要更改您的关系：

```
'surveyOptions' => array(self::HAS_MANY, 'SurveyOption', 'surveyQuestion_id') 
```

由于您的班级名称是`SurveyOption`并且文件是*SurveyOption.php*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:10:05.537

在`SurveyQuestion::model()->with('surveyOptions')->findAll()`使用与在 SurveyOptions 中定义的名称的关系

# marionette - 外部车把模板骨干木偶

> ID：11054239
> 
> 赞同：4
> 
> 时间：2012-06-15T15:57:05.893
> 
> 标签：marionette

在我的应用程序中，我添加了 Marionette.sync 插件并覆盖这些方法：

```
Backbone.Marionette.TemplateCache.prototype.loadTemplate = function (templateId, callback) {
    var tmpId = templateId.replace("#", ""),
        url = "/app/templates/" + tmpId + ".html";

    $.get(url, function (templateHtml) {
        compiledTemplate = Handlebars.compile($(templateHtml).html())
        callback.call(this, compiledTemplate);
    });
};

Backbone.Marionette.Renderer.renderTemplate = function (template, data) {
    template(data);
}; 
```

但这不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T18:37:33.747

我假设您正在运行 Marionette v0.9，因为您提到了 Marionette.Async 插件。

方法名称的`Renderer`更改略有不同，并且不再调用您的`TemplateCache`对象。

如果你打算使用预编译的 Handlebars 函数，那么你只需要这样做：

```
 Backbone.Marionette.Renderer.render = function(template, data){
  return template(data);
}; 
```

如果您打算异步加载模板然后使用 TemplateLoader 进行编译，您的代码需要如下所示：

```
 Backbone.Marionette.TemplateCache.prototype.loadTemplate = function (templateId, callback) {
    var tmpId = templateId.replace("#", ""),
        url = "/app/templates/" + tmpId + ".html";

    $.get(url, function (templateHtml) {
        compiledTemplate = Handlebars.compile($(templateHtml).html())
        callback.call(this, compiledTemplate);
    });
};

Backbone.Marionette.Renderer.renderTemplate = function (templateId, data) {
    var renderer = $.Deferred();
    Backbone.Marionette.TemplateCache.get(templateId, function(template){
      var html = template(data);
      renderer.resolve(html);
    });
    return renderer.promise();
}; 
```

Renderer 负责调用 TemplateCache。

* * *

旁注：您使用什么文章/博客文章/维基页面/文档来获取您的代码？我可能错过了一些需要更新的页面。

# xcode - 在 Xcode 4.3.2 中将现有项目置于源代码控制之下

> ID：11054240
> 
> 赞同：11
> 
> 时间：2012-06-15T15:57:07.373
> 
> 标签：xcode, git, version-control, xcode4.3

我正在寻找一种将现有项目置于源代码控制之下的方法，并且我查看了[这个问题](https://stackoverflow.com/questions/5618686/how-to-add-a-new-project-to-source-control-in-xcode-4?rq=1)，但看起来该解决方案仅适用于 Xcode 4.0，因为我找不到执行建议的方法。我也查看了[这个问题](https://stackoverflow.com/questions/8349721/committing-project-to-source-control-in-xcode)，但该解决方案也不起作用，因为我的项目目前不受源代码控制。我怎样才能让我现有的项目处于源代码控制之下？

## 编辑

我希望它是一个 git 存储库，而不是颠覆。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T18:40:13.277

你可以在终端使用：

cd /to/app/文件夹

```
git init
git add .
git commit -am 'a descriptor of your first commit' 
```

然后应该在 Xcode 中获取它，您可能需要关闭并重新打开

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T15:55:50.810

如果您想通过 xcode（不是命令行）获取现有项目，可以按照以下步骤操作：

1.  打开“欢迎使用 XCode”窗口（在菜单窗口下方，或按 Shift-Cmd-1）
2.  选择“连接到存储库”
3.  粘贴你的 git URL，然后下一步。

您可以在[http://www.mindthe.net/devices/2011/04/28/12-steps-to-using-github-with-xcode-4/阅读更多内容](http://www.mindthe.net/devices/2011/04/28/12-steps-to-using-github-with-xcode-4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T19:39:25.693

以下是可以实现此目的的步骤，但需要将现有项目克隆到新项目：

1、（假设你的项目已经不在本地源码控制下）在LOCAL源码控制下新建一个项目（注意这个阶段添加远程源码控制可能不会成功）

2，使这个新项目成为旧项目的克隆 - 拖动文件，添加框架等。

3、在菜单“源代码管理”->->“配置”新窗口中，点击“远程”->“+”->“添加远程”

4、名称：anything（可以使用“BitBucket”）

地址：[https://accountname@bitbucket.org/accountname/reponame.git](https://accountname@bitbucket.org/accountname/reponame.git)

5、“源代码管理”->“提交”

6、选择左下角的“推送到远程”

7、点击“提交”

8、在BitBucket网站上查看是否真的推送到了它

# xpages - 尝试动态绑定到手风琴扩展库控件中的 id

> ID：11054252
> 
> 赞同：1
> 
> 时间：2012-06-15T15:57:53.753
> 
> 标签：xpages

我正在使用 Xpages 扩展库中包含的手风琴控件构建自定义控件。我正在尝试绑定到 AccordianPane id，但收到错误消息：

**属性 id 的值不能是运行时绑定**

错误是指这行代码：

```
<xe:djAccordionPane
              title="#{javascript:sectiontitles.getColumnValue('Section')}" id="#{javascript:sectiontitles.getColumnValue('Section')}"
                parseOnLoad="false"> 
```

我看到保罗威瑟斯在这里发帖：

[http://www.intec.co.uk/combining-and-an-alternative-approach/](http://www.intec.co.uk/combining-and-an-alternative-approach/) 这让我觉得这是可能的，我只是不在那里。我在哪里使用 $ 而不是 # ？

这是我正在使用的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.data>
        <xp:dominoView var="view1" viewName="MenuLinks"></xp:dominoView>
        <xp:dominoView var="view2" viewName="MenuLinksSections"></xp:dominoView>
    </xp:this.data>

    <xp:panel
        style="float:left;padding-left:20.0px;padding-right:20.0px; padding-top:20.0px">

        <xe:djAccordionContainer id="djBorderContainer1"
            style="width:200px; height:540px" styleClass="soria">
            <xe:this.selectedTab><![CDATA[#{javascript:var selectedTab = context.getUrlParameter("tab");
if (selectedTab == "") {
""
} else {
selectedTab
}
}]]></xe:this.selectedTab>

            <xp:repeat id="repeat1" rows="30" var="sectiontitles"
                value="#{view2}" disableOutputTag="true">

                <xe:djAccordionPane
                    title="#{javascript:sectiontitles.getColumnValue('Section')}" **id="#{javascript:sectiontitles.getColumnValue('Section')}"**
                    parseOnLoad="false">

                    <xp:text escape="true" id="computedField1">
                        <xp:this.value><![CDATA[#{javascript:var id = "#{id:djAccordionPane}";
id}]]></xp:this.value>
                    </xp:text>
                    <xp:text escape="true" id="computedField2"></xp:text>
                    <xp:repeat id="repeat2" rows="30" var="menulinks"
                        disableTheme="true">
                        <xp:this.value><![CDATA[#{javascript:var tview = database.getView("MenuLinks");
var v = sectiontitles.getColumnValue("unid");
var vc:NotesViewEntryCollection = null;
if (v != null) {

    vc = tview.getAllEntriesByKey(v);
}
vc
}]]></xp:this.value>

                        <xp:text escape="false">
                            <xp:this.value><![CDATA[#{javascript:menulinks.getColumnValues()[3]}]]></xp:this.value>
                        </xp:text>

                    </xp:repeat>
                </xe:djAccordionPane>
            </xp:repeat>

        </xe:djAccordionContainer>
    </xp:panel>

</xp:view> 
```

任何帮助表示赞赏。

谢谢，

以利亚拉普森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:03:03.757

几乎可以肯定的是 id 属性不能作为运行时绑定。这是因为服务器使用 ID 来创建 XPage 上的元素映射。所以不能用#动态计算。

除非 repeatContents 属性设置为 true，否则您将无法在重复中使用 $。$ 表示它将在页面加载时尝试计算 ID，但尚未计算重复中的元素数量。它们将被动态计算。所以你需要 repeatContents="true" 重复，所以重复控件的内容是在页面加载时计算的。repeatControls 属性可能对分页之类的事情产生连锁影响，但听起来这对您来说不是问题。

但是，您为什么要尝试计算 ID？是否可以在 CSJS 中的某处使用 ID 来获取每个单独元素的句柄？如果是这样，另一种方法可能是在 djAccordionPane 中添加一个普通的 HTML 元素（如 div）并计算它的 ID。您不会遇到运行时绑定问题。或者改为计算 styleClass 属性。然后您可以使用 dojo.query 根据类属性选择元素。您应该能够使用 dojo.query(.#{javascript:sectiontitles.getColumnValue('Section')}) 来获取与 sectiontitles.getColumnValue('Section') 匹配的类的元素的句柄

# android - 在移动和引擎时为 Sprite 设置动画

> ID：11054256
> 
> 赞同：0
> 
> 时间：2012-06-15T15:58:01.250
> 
> 标签：android, animation, sprite, andengine, move

我想在使用 DigitalController 移动时为精灵设置动画。我有下一个代码，并且可以很好地移动播放器：

```
@Override
public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {
    //Evitar que se salga
    int velocidad = 200;

    if(pValueX>0) {//Derecha
        player.animate(new long[]{200, 200, 200}, 0, 2, true);
    } else {
        if(pValueX<0){//Izquierda
            player.animate(new long[]{200, 200, 200}, 3, 5, true);
            }
    }

    /* Sin salir de la cámara */ 
    if (player.getX()<=0) { 
            player.setX(player.getWidth());
    } else if((player.getX()+player.getWidth())>=CAMERA_WIDTH){
            player.setX(CAMERA_WIDTH-(player.getWidth()*2));
    }

    physicsHandler.setVelocity(pValueX * velocidad, pValueY);
} 
```

如果 pValue 是 1.0 是正确的，如果 pvalueX 是 -1.0 是左，我不想向上或向下移动，只能向左/向右移动。问题是当我松开操纵杆时 player.animate 开始，我想在我敲击操纵杆时开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:04:06.947

嗨解决我的问题。

这个想法是使用 sprite.isAnimationRunning() 并将动画循环设置为 false：

```
if(!player.isAnimationRunning())
                if(pValueX>0){//Derecha
                    player.animate(new long[]{200, 200, 200}, 0, 2, false);
                }else{
                    if(pValueX<0){//Izquierda
                        player.animate(new long[]{200, 200, 200}, 3, 5, false);
                    }
                } 
```

# java - 类变量以外的对象的波动性

> ID：11054259
> 
> 赞同：6
> 
> 时间：2012-06-15T15:58:09.783
> 
> 标签：java, multithreading, concurrency, volatile

我曾经相信两个线程之间共享的任何变量都可以在线程本地缓存，并且应该声明为 volatile。但这种信念最近受到队友的挑战。我们试图弄清楚在以下情况下是否需要 volatile。

```
class Class1
{
   void Method1()
   {
      Worker worker = new Worker();
      worker.start();
      ...
      System.out.println(worker.value); // want to poll value at this instant
      ...
   }

   class Worker extends Thread
   {
      int value = 0; // Should this be declared as a volatile?
      public void run()
      {
         ...
         value = 1; // this is the only piece of code that updates value
         ...
       }
   }
} 
```

现在我的论点是，Worker（子）线程可能已经在线程中缓存了 Worker 对象的变量“值”，并在将值设置为 1 时仅更新了它的副本。在这种情况下，主线程可能看不到更新的值。

但是我的队友认为，由于对“值”的访问是通过对象（工作者）发生的，因此对于两个线程来说，看到不同的值，只有当两个线程都维护“工作者”对象本身的单独副本时才有可能（这进一步意味着创建线程涉及创建所有共享对象的深层副本）。

现在我知道这不可能是真的，因为每个线程维护所有共享对象的完全不同的副本是非常低效的。因此，我对此表示严重怀疑。在主线程中执行“worker.value”是否引用了与在子线程中执行“this.value”不同的内存位置？子（Worker）线程会缓存“值”吗？

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T16:01:17.160

> 现在我的论点是，Worker（子）线程可能已经在本地缓存了 Worker 对象线程的变量“值”，并在将值设置为 1 时仅更新它的副本。在这种情况下，主线程可能看不到更新的值。

你是对的。即使你们都在处理同一个`Worker`实例，也不能保证`Worker`'s 字段的缓存内存版本已在各种不同的线程内存缓存之间同步。

该`value`字段必须标记为`volatile`保证其他线程将看到`value = 1;`该字段的更新`value`。

> 但是我的队友认为，由于对“值”的访问是通过对象（工作者）发生的，因此对于两个线程来说，看到不同的值，只有当两个线程都维护“工作者”对象本身的单独副本时才有可能...

不，这是不正确的。关于线程内存的棘手部分围绕处理器内存缓存展开。如果没有由 强加的内存屏障，`volatile`进程可以完全自由地缓存内存。因此，即使两个线程都在使用 的同一个实例`Worker`，它们也可能*拥有*与`Worker`.

线程架构获得了很大的速度，因为它们使用单​​独的高速处理器本地内存，而不是始终引用中央存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:21:23.873

> 但是我的队友认为，由于对“值”的访问是通过对象（工作者）发生的，因此对于两个线程来说，看到不同的值，只有当两个线程都维护“工作者”对象本身的单独副本时才有可能（这进一步意味着创建线程涉及创建所有共享对象的深层副本）。

您的同事没有意识到实例变量（与此相关的任何变量）的值可以临时缓存在机器寄存器或处理器的第一级或第二级内存缓存中。Java 语言规范明确指出，两个线程不一定会看到相同变量的相同值，除非它们采取了适当的步骤。

JLS 有一个完整的部分处理这个问题：[JLS 17.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)。如果您要讨论 Java 在这方面的表现，我建议您和您的同事都阅读本文以及 17.5 和 17.6。或者您可以阅读 Brian Goetz 等人撰写的“Java Concurrency in Practice”的最后一章，它比 JLS 更容易阅读。

我建议您和您的同事不要依赖您对线程应该起作用的直觉。阅读规格。线程行为的某些方面**并不直观**......尽管有充分的理由说明它们是这样的，

# javascript - 没有模型的 MVC 3 中的验证

> ID：11054261
> 
> 赞同：4
> 
> 时间：2012-06-15T15:58:14.153
> 
> 标签：javascript, asp.net-mvc, c#-4.0, asp.net-mvc-4

我对 mvc3 中的验证有疑问。内置验证看起来很棒。但是，我不得不在一种情况下使用 javascript，导致它与外观和感觉不一致（警报窗口与漂亮的红色文本）。我们有一个表单，其中包含一些供用户输入的字段。提交时，一些 ajax 代码会触发一个链接，该链接映射到一个控制器方法，该控制器方法获取从表单提交的值并启动导致创建客户端数据库的进程。问题是：由于没有模型直接映射到该表单上的字段，因此对字段（长度、字符等）进行验证的最佳方法是什么？我的解决方案是编写一些 javascript 函数，但有更简洁的方法吗？

```
 <td>@Html.TextBox("NewClientId")</td>
...            

    <script language="javascript">
       function ValidateFieldLength(min, max, element) {
            var len = element.value.length;
            if (len < min || len > max)
                return false;
            else {
                return true;
            }
        }
        function createNewClient() {
            if (!ValidateFieldLength(3,3,document.getElementById('NewClientId'))) {
            alert("Invalid Client ID length");
            return;
        }
        $.ajax({
            url: '/api/Clients',
            type: 'PUT',
            data: JSON.stringify({
                ClientId: $('#NewClientId').val(),
                Name: $('#NewClientName').val()
            }),
            contentType: 'application/json; charset=utf-8',
            success: function (reponse) {
                //alert(reponse.data.model.Id);
                alert("Database created");
            },
            error: function (err) {
                alert(err);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T16:54:50.100

我会看到的另一个选项是将**验证数据属性**手动添加到 html 元素。通过这种方式，您可以避免在服务器端和客户端重复错误消息和其他属性。

例如。

```
@Html.TextBox("NoOfJoinees", "", new 
{ 
   size = 5,  
   data_val_required="No. of joinees is required",
   data_val_number = "The field No. of joinees must be a number.",
   data_val_range = "No. of joinees should be minimum 2 and not more than 10",
   data_val_range_max="10",
   data_val_range_min="2"
}) 
```

在上面的文本框中，我添加了三种类型的验证：**required**，**type**和**range**通过添加数据属性很容易。微软提供的*不显眼的验证库*将负责其余的工作。

您应该从一个地方读取错误消息和其他常量。因此，当您在服务器端进行验证时，您不需要复制它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:06:33.127

您可以使用 jQuery.validate 并使用一些内置的验证方法。
[jQuery.验证](http://archive.plugins.jquery.com/project/validate)

虽然对于您所做的事情可能有点矫枉过正，并且仍然需要您进行服务器端验证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:45:57.850

您仍然可以拥有一个视图模型来设置验证规则，然后使用一些不显眼的 javascript 来捕获表单提交以执行您的 ajax 发布。

**视图模型**

```
public class YouViewModel
{
    [DisplayName("Client name")]
    [Required()]
    public string NewClientName { get; set; }

    [DisplayName("Client id")]
    [StringLength(3, MinimumLength = 3, ErrorMessage = "{0} must be 3 characters")]
    public string NewClientId { get; set; }
} 
```

**控制器**

```
public ActionResult YourAction()
{
    return View() //Note that you don't even need to pass a view model to the view
} 
```

**看法**

```
@model Namespace.YouViewModel

@using (Html.BeginForm())
{
    <div class="form-body">
        @Html.ValidationSummary()

        <div class="control-group">
            @Html.LabelFor(x => x.NewClientName )
            @Html.TextBoxFor(x => x.NewClientName , new { @class = "span3" })
        </div>

        <div class="control-group">
            @Html.LabelFor(x => x.NewClientId )
            @Html.PasswordFor(x => x.NewClientId , new { @class = "span3" })
        </div>
    </div>
} 
```

# javascript - 打开窗口后如何使用javascript修改浏览器属性/属性

> ID：11054262
> 
> 赞同：0
> 
> 时间：2012-06-15T15:58:14.917
> 
> 标签：javascript, html, window.open

打开窗口后，如何使用 javascript 修改浏览器属性/属性（即不使用 window.open('', '' ,'') 并使用第三个参数修改属性）。我需要这样做，因为该窗口已经被 java 打开，并且我想在它已经打开之后用 javascript 修改它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:24:42.227

好吧，因为您想使用 JS 和 CSS 修改用户浏览器的外观。

首先，您需要使用[Modernizr](http://modernizr.com/)来检测用户浏览器是否支持某些功能。

对于滚动条，这里有一个在您的网站上使用 Webkit 滚动条的快速[演示](http://css-tricks.com/examples/WebKitScrollbars/)。

对于菜单栏、导航栏等，您可以使用[Bootstrap](http://twitter.github.com/bootstrap/)，因为它提供了一些流行的用户界面组件。

# objective-c - 将代表转移到他们自己的班级？

> ID：11054265
> 
> 赞同：2
> 
> 时间：2012-06-15T15:58:34.190
> 
> 标签：objective-c, design-patterns, delegates

我的视图控制器对我来说有点大了。我正在实现五个委托协议，并且即将添加第六个。

```
ABCViewController : UITableViewController<NSFetchedResultsControllerDelegate,
                                          UITableViewDelegate,
                                          UITableViewDataSource,
                                          UIAlertViewDelegate,
                                          CLLocationManagerDelegate> 
```

一个控制器来实现它们似乎很荒谬，但它们并没有在其他任何地方使用。这些应该在它们自己的类中还是在视图控制器中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:05:31.003

您可以向 ABCViewController 添加类别，如下所示：

**1\. 将 ABCViewController.m 中的任何声明移动到 ABCViewController.h 中的私有类别中**

```
// in ABCViewController.h
@interface ABCViewController : UIViewController <delegates>
// anything that's in the _public_ interface of this class.
@end

@interface ABCViewController ()
// anything that's _private_ to this class.  Anything you had defined in the .m previously
@end 
```

**2\. ABCViewController.m 应该包含那个 .h。**

**3.然后在ABCViewController+SomeDelegate.h和.m**

```
// in ABCViewController+SomeDelegate.h
@interface ABCViewController (SomeDelegateMethods)

@end

// in ABCViewController+SomeDelegate.m
#import "ABCViewController+SomeDelegate.h"
#import "ABCViewController.h"  // here's how will get access to the private implementation, like the _fetchedResultsController

@implementation ABCViewController (SomeDelegateMethods)

// yada yada

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:17:44.643

您还可以在 .m 文件中声明符合该协议，如下所示：

```
@interface ABCViewController (NSFetchedResultsControllerDelegateMethods) <NSFetchedResultsControllerDelegate>
@end
@implementation ABCViewController (NSFetchedResultsControllerDelegateMethods)
...
@end 
```

这不会使您的文件更短，但至少会清楚地分为几部分

如果您使用的是 Xcode，您可以尝试这样的事情，例如：

```
#pragma mark - NSFetchedResultsControllerDelegateMethods 
```

在这个提示中找到您的方法非常方便[：Pragma mark](http://cocoasamurai.blogspot.jp/2006/09/tip-pragma-mark-organizing-your-source.html)

* * *

或者，根据您对委托方法的操作以及代码的结构，您可以拥有另一个仅具有委托协议方法的对象

```
@interface Delegate <NSFetchedResultsControllerDelegate> : NSObject
@end 
```

您将在您的 ABCViewController 中有一个该对象的实例作为 ivar。

# java - java/android OutputStream 块，但在使用套接字时不够长

> ID：11054267
> 
> 赞同：2
> 
> 时间：2012-06-15T15:58:36.780
> 
> 标签：java, android, sockets, block, outputstream

因此，我正在编写一个应用程序，它获取图像，并使用套接字立即将其发送到远程计算机。

```
OutputStream mStream;

mStream = mySocket.getOutputStream();

/* filling header/bmbytes*/
mStream.write(header);
mStream.write(BitmapBytes);

mStream.flush(); //not working?

/*try { 
    wait(2000);
} catch (InterruptedException e) {

}*/
mStream.close(); 
```

写入函数可以完美运行，直到最后几 KB。不发送随机数量的数据（大约 295 kb 的 300 kb 是好的）。我读到它是因为它会阻塞直到它缓冲所有数据，但它似乎并不关心数据是否真的被发送，所以 mStream.close() 被调用得太快了。如果我取消注释等待部分，它工作得很好，但我可能需要每秒调用一次以上，而且它仍然不可靠（取决于连接），所以我需要另一种方法来正确调用 close()。冲洗似乎没有做任何事情。我用错了吗？任何想法表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T12:00:38.450

此代码发送所有数据。问题出在接收端。

在收盘前，睡眠和冲洗都是毫无意义的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T16:06:18.713

看这个例子[http://stunningco.de/2010/04/25/uploading-files-to-http-server-using-post-android-sdk](http://stunningco.de/2010/04/25/uploading-files-to-http-server-using-post-android-sdk)

尝试按部分而不是全部发送数据。喜欢：

```
while (bytesRead > 0)
{
    outputStream.write(buffer, 0, bufferSize);
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
} 
```

# android - 如何获取片段对话框窗口的标题（应用程序使用 ActionBarSherlock）

> ID：11054268
> 
> 赞同：2
> 
> 时间：2012-06-15T15:58:47.670
> 
> 标签：android, android-fragments, gettext, actionbarsherlock

我需要将片段对话标题中的字符串与资源中的 R.id.string 进行比较。它看起来像这样（用户 Robotium）。

> assertTrue(doesAlertTitleExist(getSolo().getString(R.string.error_dialog_title_text)));

但是我无法从在 ActionBar Sherlock 的帮助下创建的对话窗口片段的标题中获取文本。此代码仅查找出现此对话的屏幕中的视图，而不查找来自对话的视图。

你可以在这里找到截图：http: [//imgur.com/d1ZjL](http://imgur.com/d1ZjL)

```
public boolean doesAlertTitleExist(String extectedTitle) {
    List<TextView> views = getDialogTextViews((ViewGroup) getSolo().getView(android.R.id.content));
    assertNotNull(views);
    for(TextView view : views){
        if(view.getText().toString().equals(extectedTitle)){
            return true;
        }
    }
    return false;
}

private List<TextView> getDialogTextViews(ViewGroup view) {
    List<TextView> out = new LinkedList<TextView>();
    int count = view.getChildCount();
    for(int i=0; i<count; i++){
        View child = view.getChildAt(i);
        if(child instanceof ViewGroup){
            out.addAll(getDialogTextViews((ViewGroup) child));
        }else if(child instanceof TextView){
            out.add((TextView) child);
        }
    }
    return out;
} 
```

# extjs - 使用 EXT sdk 存储问题添加视图

> ID：11054269
> 
> 赞同：0
> 
> 时间：2012-06-15T15:58:52.007
> 
> 标签：extjs, extjs4.1

我有以下 app.js 文件。

当我在没有“要求”的情况下运行命令时，它可以工作，但不包括视图。当我添加所需的行时，我得到“商店未定义”。

我想这是因为那时还没有定义商店。那么这里最好玩的是什么？

```
sencha create jsb -a http://mysite.local/ext/cutter/app/index.html -p app.jsb3 
```

应用程序.js

```
Ext.Loader.setConfig({ enabled: true });
    Ext.Loader.setPath('App', '/ext/Cutter/app');
    Ext.Loader.require(['App.view.ViewCutter']);

    Ext.application({    
        name: 'Mis',
        appFolder: '/ext/Cutter/app',
        models: [ 'Cutter', 'Project', 'CutterHistory','Job', 'Part' , 'ClientFinder'],
        stores: [ 'Cutters','CutterHistories','Projects', 'Jobs', 'Parts'],
        controllers: ['Cutter'],

        launch: function () {

            Ext.QuickTips.init();
            var cmp1 = Ext.create('App.view.ViewCutter', {
                renderTo: "mis-application"
            });
            cmp1.show();
        }

    }); 
```

# 更新

这是创建的jsb

```
{
"projectName": "Project Name",
"licenseText": "Copyright(c) 2012 Company Name",
"builds": [
    {
        "name": "All Classes",
        "target": "all-classes.js",
        "options": {
            "debug": true
        },
        "files": [
            {
                "clsName": "Mis.model.Cutter",
                "name": "Cutter.js",
                "path": "/ext/Cutter/app/model/"
            },
            {
                "clsName": "Mis.store.Cutters",
                "name": "Cutters.js",
                "path": "/ext/Cutter/app/store/"
            },
            {
                "clsName": "Mis.model.CutterHistory",
                "name": "CutterHistory.js",
                "path": "/ext/Cutter/app/model/"
            },
            {
                "clsName": "Mis.store.CutterHistories",
                "name": "CutterHistories.js",
                "path": "/ext/Cutter/app/store/"
            },
            {
                "clsName": "Mis.model.Project",
                "name": "Project.js",
                "path": "/ext/Cutter/app/model/"
            },
            {
                "clsName": "Mis.store.Projects",
                "name": "Projects.js",
                "path": "/ext/Cutter/app/store/"
            },
            {
                "clsName": "Mis.model.Job",
                "name": "Job.js",
                "path": "/ext/Cutter/app/model/"
            },
            {
                "clsName": "Mis.store.Jobs",
                "name": "Jobs.js",
                "path": "/ext/Cutter/app/store/"
            },
            {
                "clsName": "Mis.model.Part",
                "name": "Part.js",
                "path": "/ext/Cutter/app/model/"
            },
            {
                "clsName": "Mis.store.Parts",
                "name": "Parts.js",
                "path": "/ext/Cutter/app/store/"
            }
        ]
    },
    {
        "name": "Application - Production",
        "target": "app-all.js",
        "compress": true,
        "files": [
            {
                "path": "",
                "name": "all-classes.js"
            },
            {
                "path": "",
                "name": "app.js"
            }
        ]
    }
],
"resources": [] 
```

}

# 控制器

```
 Ext.define('Mis.controller.Cutter', {
    extend:'Ext.app.Controller',
    refs:[
        {
            ref:'Cutter',
            selector:'Cutter'
        },
        {
            ref:'CutterEdit',
            selector:'CutterEdit'
        }
    ],
   // views: ['ViewCutter'],
    stores:[ 'Cutters', 'CutterHistories', 'Clients' ,  'Projects' ,  'Jobs' , 'Parts'  ],
    init:function () {
        this.control({
            '#category menu':{
                click:this.onCutterTypeSelect
            },
            '#cutterGrid button[action=create]':{
                click:this.onCutterCreate
            },
            '#sortby menu':{
                click:this.onSortBySelect
            },
            '#cutterGrid button[action=search]':{
                click:this.onSearch
            },
            '#cutterGrid':{
                cellclick :this.onCutterSelectRow
            },
            '#cutterHistories actioncolumn':{
                click:this.onCutterHistoryRemove
            },
            '#cutterForm button[action=save]':{
                click:this.onCutterUpdate
            },
            '#cutterForm button[action=remove]':{
                click:this.onCutterRemove
            },
            '#cutterForm button[action=create]':{
                click:this.onCutterNumberCreate
            },
            '#cutterForm #ClientDropdown': {
                select: this.onClientSelect
            },
            '#cutterForm #ProjectDropdown': {
                select: this.onProjectSelect
            },
            '#cutterForm #JobDropdown': {
                select: this.onJobSelect
            }/*,,
            '#cutterForm #Clients': {
                change: this.onClientSelect
            },
            '#cutterForm #Projects': {
                change: this.onProjectSelect
            },
            '#cutterForm #Jobs': {
                change: this.onJobSelect
            }*/
        });
    },
    onLaunch:function () {

        var cutterStore = this.getCuttersStore();
        cutterStore.load();
        var clients = this.getClientsStore();
        clients.load();
        Ext.getCmp('cutterFieldset').setVisible(false);

    },
    onLoad:function (selection) {

    },
    onSortBySelect:function (selModel, selection) {

        var action = selection.action;

        if (selection != null) {
            if (action != "") {
                contactUrl = "/Contact/" + action;
                sortBy = action;
            }
        }
    },
    onClientSelect: function (selModel, selection) {
        var projects = this.getProjectsStore();
        projects.load({
            url: '/Projects/ReadByClientId/' + selection[0].data.Id,
            scope: this
        });

        Ext.getCmp('ProjectDropdown').setValue("---- Select -----");
        Ext.getCmp('JobDropdown').setVisible(false);
        Ext.getCmp('PartDropdown').setVisible(false);
    },
    onProjectSelect: function (selModel, selection) {
        Ext.getCmp('JobDropdown').setValue("---- Select -----");
        var jobs = this.getJobsStore();
        jobs.load({
            url: '/Jobs/ReadByProject/' + selection[0].data.Id,
            scope: this
        });
        Ext.getCmp('JobDropdown').setVisible(true);

        Ext.getCmp('PartDropdown').setVisible(false);
    },
    onJobSelect: function (selModel, selection) {
        var parts = this.getPartsStore();
        parts.load({
            url: '/Part/Read/' + selection[0].data.Id,
            scope: this
        });

        Ext.getCmp('PartDropdown').setValue("---- Select -----");
        Ext.getCmp('PartDropdown').setVisible(true);

    },
    onClientFinder: function (selModel, selection) {

        var clientId = Ext.getCmp('ClientId').value;
        var projectId = Ext.getCmp('ProjectId').value;
        var jobId = Ext.getCmp('JobId').value;
        var partId = Ext.getCmp('PartId').value;
        var clientGuid = Ext.getCmp('Clients').value;
        var projectGuid = Ext.getCmp('Projects').value;
        var jobGuid = Ext.getCmp('Jobs').value;
        var partGuid = Ext.getCmp('Parts').value;
        var form = Ext.getCmp('cutterForm');

            Ext.Ajax.request({
            method:'POST',
            url:'/Cutter/ClientFinder',
            params:{ ClientId:clientId, ClientGuid:clientGuid, ProjectId:projectId, ProjectGuid:projectGuid, JobId:jobId, JobGuid: jobGuid  },
            success:function (request) {
                var data = Ext.decode(request.responseText);
                if (data.ClientId != 0) Ext.getCmp('ClientId').setValue(data.ClientId);
                if (data.ProjectId != 0) Ext.getCmp('ProjectId').setValue(data.ProjectId);
                if (data.JobId != 0) Ext.getCmp('JobId').setValue(data.JobId);
                if (data.PartId != 0) Ext.getCmp('PartId').setValue(data.PartId);

                Ext.getCmp('Clients').setValue(data.ClientGuid);
                Ext.getCmp('Projects').setValue(data.ProjectGuid);
                Ext.getCmp('Jobs').setValue(data.JobGuid);
                Ext.getCmp('Parts').setValue(data.PartGuid);
            }
        });

    },
    onCutterHistoryRemove: function(gridview, el, rowIndex, colIndex, e, rec, rowEl) {

        var store = this.getCutterHistoriesStore();

        Ext.Msg.confirm('Remove History', 'Are you sure?', function(btn, text){
            if (btn == 'yes'){
                rec.destroy({
                    success:function () {
                        store.remove(rec);
                        Ext.MessageBox.alert('Status', 'History removed.');
                    },
                    callback:function () {
                    },
                    failure:function () {
                        Ext.MessageBox.alert('Status', 'History cannot be removed as it has related items');
                    }
                });

            }
        });
    },
    onCutterRemove:function (selection) {

            var form = Ext.getCmp('cutterForm');
            var record = form.getRecord();
            var values = form.getValues();
            record.set(values);

        var cutterStore = this.getCuttersStore();
        Ext.Msg.confirm('Remove Cutter', 'Are you sure?', function(btn, text){
            if (btn == 'yes'){
                record.destroy({
                    success:function () {
                        cutterStore.remove(record);
                        var view = Ext.widget('EditCutter');
                        view.close();
                    },
                    callback:function () {

                    },
                    failure:function () {
                        Ext.MessageBox.alert('Status', 'This cutter cannot be removed as it has related items');
                    }
                });

            }
        });
    },
    onCutterSelectRow : function (item, td, cellIndex, rec,  tr, rowIndex,  e, eOpts ) {

        if (rec != null) {
            var view = Ext.widget('EditCutter');
             var cutters = this.getCutterHistoriesStore();
                cutterNumber = rec.data.CutterNumber;
             cutters.load({
             url: '/CutterHistory/Read/' + rec.data.Id,
             scope: this
             });
            var form = Ext.getCmp('cutterForm');
            form.loadRecord(rec);

            /* Load client */
            var clientStore = this.getClientsStore();
            var clientCombo = Ext.getCmp("ClientDropdown");
            var clientUrl = '/Client/Read/';
            selectCombo(clientStore, clientCombo, rec.data.ClientGuid, clientUrl);

            /* Load projects */
            var projectsStore = this.getProjectsStore();
            var projectCombo = Ext.getCmp("ProjectDropdown");
            var projectUrl = '/Projects/ReadByClientId/' + rec.data.ClientGuid;
            selectCombo(projectsStore, projectCombo, rec.data.ProjectGuid, projectUrl);

            /* Load job */
            var jobsStore = this.getJobsStore();
            var jobCombo = Ext.getCmp("JobDropdown");
            var jobUrl = '/Jobs/ReadByProject/' + rec.data.ProjectGuid;
            selectCombo(jobsStore, jobCombo, rec.data.JobGuid, jobUrl);

            /* Load part */
            var partsStore = this.getPartsStore();
            var partCombo = Ext.getCmp("PartDropdown");
            var partUrl = '/Part/Read/' + rec.data.JobGuid;
            selectCombo(partsStore, partCombo, rec.data.PartGuid, partUrl);

            Ext.getCmp('cutterFieldset').setVisible(true);
            Ext.getCmp('CutterSave').setVisible(true);
            view.show()
        }

    },
    onCutterCreate:function (selModel, selection) {
        var r = Ext.ModelManager.create({
        }, 'Mis.model.Cutter');

        var view = Ext.widget('EditCutter');
        var form = Ext.getCmp('cutterForm');
        form.loadRecord(r);
        Ext.getCmp('cutterFieldset').setVisible(true);
        Ext.getCmp('CutterSave').setVisible(true);
        view.show();
    },
    onCutterNumberCreate:function (selModel, selection) {

        var form = Ext.getCmp('cutterForm');
        var r = Ext.ModelManager.create({
            CutterNumber: cutterNumber
        }, 'Mis.model.Cutter');
        form.loadRecord(r);
    },
    onSearch:function (selModel, selection) {

        destroyed = Ext.getCmp('Destroyed').value;
        var searchBox = Ext.getCmp('SearchTerm');
        search = searchBox.getValue();
        var cuttersStore = this.getCuttersStore();
        cuttersStore.proxy.setExtraParam('sort', sortBy);
        cuttersStore.proxy.setExtraParam('search', search);
        cuttersStore.proxy.setExtraParam('destroyed', destroyed);
        cuttersStore.load({params:{start:0, page:1}});
        var url  = Ext.String.format('/Cutter/Export/?sortBy={0}&search={1}&destroyed={2}', sortBy, search, destroyed);
        Ext.getCmp('ExportCutter').el.down('a').dom.setAttribute('href', url);
    },
    onCutterUpdate:function (selection) {

        var form = Ext.getCmp('cutterForm');
        var record = form.getRecord();
        var values = form.getValues();
        record.set(values);
    //    var cutterNumbersStore = this.getCutterNumbersStore();
        var cuttersStore = this.getCuttersStore();
        if (form.getForm().isValid()) {

            record.save({
                success:function () {
                    Ext.MessageBox.alert('Status', 'Changes saved successfully.');
                 //   cutterNumbersStore.insert(0, record);
                  //  cuttersStore.load();
                },
                callback:function () {

                },
                failure:function () {
                    Ext.MessageBox.alert('Status', 'Changes could not be saved');
                }
            });

        } else {
            Ext.MessageBox.alert('Status', 'Please enter all fields');
        }
    }

});

function selectCombo(store, combo, selectedValue, url) {

    store.load({
        url: url,
        callback: function(){
            combo.setValue(selectedValue);
        },
        scope: this
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:27:02.960

消除

> Ext.Loader.require(['App.view.ViewCutter']);

你的控制器`App.view.ViewCutter`应该有行`views: ['ViewCutter']`，这将有效地告诉 Sencha SDK 将 App.view.ViewCutter.js 文件包含到包中。

# html - 限制对齐的 HTML 段落中的空白拉伸

> ID：11054270
> 
> 赞同：2
> 
> 时间：2012-06-15T15:58:53.007
> 
> 标签：html, justify

我有一些由 Sphinx 生成的 HTML 文档。Sphinx 将正文文本对齐并将其设置`div`为宽度为 50em。当然，我可以编辑生成的 CSS/HTML。文本有一些内联方程，以预渲染图像的形式，当在我的浏览器中查看时，它们的宽度约为正文文本的 50%。对齐文本和宽大、牢不可破的内联图像的组合有时会在单词之间产生大而难看的空格。

有没有办法在减少空间拉伸的同时使用对齐的文本？例如，是否可以将空间宽度限制为某个最大值，并且如果在拉伸空间后线条不够满，它们是否可以向左对齐？

**编辑示例：**

当宽图像之前有一小行文本时，会发生错误的间距。这是一些生成的 HTML 源代码。alt 标签包含公式的 TeX 源，因此您可以了解这些公式与单个单词相比有多大。

```
<p>Suppose that we want to sort a list of pairs, using the pair's first member as the key.
Given the list
<img class="math" src="math001.png" alt="[\pair 13,\pair 19,\pair 36,\pair 24,\pair 38]"/>,
we want a list of pairs starting with 1, a list of pairs starting with 2, and so forth.
The sorted list would be
<img class="math" src="math002.png" alt="[\,[\pair 13,\pair 19], [\pair 24], [\pair 36,\pair 38],[]\,]"/>.
More text follows.</p> 
```

最后一个公式有点太宽，无法放在行尾，所以它被移到下一行，导致字间距非常松散。

```
Suppose that we want to sort a list of pairs, using the pair's first member
as the key.   Given the list [<1,3>, <1,9>, <2,4>, <3,6>, <3,8>], we want a
list of pairs  starting with 1,  a list  of pairs starting  with 2,  and so
forth.           The         sorted          list         would          be <-- This line!
[[<1,3>, <1,9>], [<2,4>], [<3,6>, <3,8>], []].  More text follows. 
```

我希望看到类似下面的内容。我愿意接受其他建议。

```
Suppose that we want to sort a list of pairs, using the pair's first member
as the key.   Given the list [<1,3>, <1,9>, <2,4>, <3,6>, <3,8>], we want a
list of pairs  starting with 1,  a list  of pairs starting  with 2,  and so
forth.    The   sorted   list   would   be
[[<1,3>, <1,9>], [<2,4>], [<3,6>, <3,8>], []].  More text follows. 
```

# database - oracle - 违反完整性约束 - 找到子记录

> ID：11054272
> 
> 赞同：6
> 
> 时间：2012-06-15T15:58:55.923
> 
> 标签：database, oracle, plsql, constraints

我有一个巨大的 pl/sql 存储过程，只要插入，我们就会在其中进行一些删除。程序以语句开始

```
 EXECUTE IMMEDIATE 'SET CONSTRAINTS ALL DEFERRED' 
```

在最后一条`commit`语句中，我收到 ORA-02292：违反完整性约束 AAA。问题是我不知道究竟是哪个语句导致它，因为我既从父表中删除（在子表之前），又在父表之前插入子表。我试图用谷歌搜索它，但到处都说当我尝试删除时会发生 02292。

当我尝试在子表中插入值但父表中没有此条目时会发生此错误吗？

另外，02292和02291有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T18:41:31.463

ORA-02292 表明发生错误是因为 A) 约束没有指定 ON DELETE 子句，并且 B) 您从主表中删除了在子表中具有匹配引用的行。您的选择是修改约束以便使用 ON DELETE CASCADE 或确保在从主记录中删除之前删除所有子记录。我的偏好是添加 ON DELETE CASCADE 但我想可能有理由不这样做。请参阅[ORA-02292](http://www.techonthenet.com/oracle/errors/ora02292.php)。

ORA-02291 与此相反。如果您尝试在子表中插入一行，但约束中指定的新子行上的键字段值在主表中不存在，则会引发 ORA-02291。请参阅[ORA-02291](http://www.techonthenet.com/oracle/errors/ora02291.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-27T11:00:38.487

如果要从名称中禁用约束来解决 ORA-02292。

1.  查找绑定到该约束的表名

    `SELECT owner, table_name FROM dba_constraints WHERE constraint_name = '{CONSTRAINT_NAME}';`

2.  禁用约束（此命令应由管理员用户执行）

    `ALTER TABLE {TABLE_NAME} DISABLE constraint {CONSTRAINT_NAME} cascade;`

# hibernate-envers - Envers 审计实体

> ID：11054278
> 
> 赞同：1
> 
> 时间：2012-06-15T15:59:11.117
> 
> 标签：hibernate-envers

获取已审核实体列表的更好方法是什么？可以使用 REVCHANGES 表并从该表中查找所有已审计的实体，但我相信这不是最佳解决方案。

谢谢， 沃拉迪米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:25:17.323

给定 Hibernate 的 Configuration 对象，您可以调用 AuditConfiguration.getFor(cfg)，然后调用 EntitiesConfigurations 对象来检查实体是否被审计。

请注意，这不是官方 API。

# php - SQL Server 2005 php 5.2

> ID：11054287
> 
> 赞同：1
> 
> 时间：2012-06-15T15:59:39.340
> 
> 标签：php, sql-server-2005, iis-6, windows-server-2003

我很难让 php 连接到 SQL Server 2005。似乎无论我做什么或访问什么页面，我要么得到错误的扩展/驱动程序，要么找到死链接。最近的尝试是 php_sqlsrv_52_ts_vc6.dll，它显然不支持 2008 年之前的任何内容。

经过两天多的搜索，我迷路了，不幸的是，升级 php 或 SQL Server 不是一个选项......

编辑：一切都在 IIS 6 - Server 2003 上运行（相同的框）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:53:49.363

您的问题可能是您正在运行 IIS6，这将需要**nts** -version。

此外，您必须安装 SQL Server Native Client 2008，这有点误导，因为它仍然可以与 MSSQL 2005 一起使用。

它应该是这样的：

1.  下载适用于 PHP 的 SQL Server 驱动程序 2.0
2.  将 dll (5.2 nts) 放入 PHP 的 ext 文件夹
3.  在 php.ini 中启用扩展`extension=sqlsrv*.dll`
4.  安装最新版本的 Microsoft 本地客户端（例如从 SQL Server 2012 功能包）
5.  重新启动您的网络服务器。

我使用 Apache，所以我不确定在 IIS 上是否还有其他事情要做，或者某些步骤是否不同，但这就是我让它工作的方式。

# c# - 将 ComboBox 绑定到数据集，但从其他来源读取显示值

> ID：11054291
> 
> 赞同：0
> 
> 时间：2012-06-15T15:59:45.157
> 
> 标签：c#, winforms, combobox

我有一个`DataSet`, 在第一个表和行中我有一个名为`OrderStatus`.

该字段是一个`number between 0 and 3`. 我想要实现的是在加载数据时，我想在我的 windows 窗体上看到`clear text of the`OrderStatus ComboBox`。`in the`

> 状态 0 = 订单进行中，1 = 订单已打包，2 = 订单完成等。

我还没有找到绑定组合框并使用值列表以明文形式显示状态的方法。

此外，当 iIchange 使用组合框更改状态时，我希望它反映回数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:19:16.297

使用 [组合框](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_properties)`DisplayMember and ValueMember property`的。

Combobox的**[DisplayMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember)**获取或设置一个字符串，该字符串指定要显示其内容的数据源的属性。在这里你想要`Order In Progress`等等`Order is packaged`。

**[ValueMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember)**属性确定将哪个值移动到组合框的 SelectedValue 中。在这里，您将在您的情况下设置相应的 ID 值，即 0、1 或 2

因此，`OnSelectionChanged`您可以获得之前绑定的 SelectedValue 即 0、1 或 2，并更新回 DataSet。

# android - 放置/定位虚拟键盘

> ID：11054292
> 
> 赞同：3
> 
> 时间：2012-06-15T15:59:47.420
> 
> 标签：android, keyboard

我希望键盘出现在我的应用程序中的某个位置。

将 a 放置在您的 Activity 中非常简单，`KeyboardView`就像您在其他任何地方一样`View`：

```
 <android.inputmethodservice.KeyboardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/keyboard"/> 
```

除此之外，还可以将其插入`KeyboardView`设备的其余部分：

```
 mKeyboardView.setOnKeyboardActionListener(new OnKeyboardActionListener() {

        @Override public void swipeUp() {}

        @Override public void swipeRight() {}

        @Override public void swipeLeft() {}

        @Override public void swipeDown() {}

        @Override public void onText(CharSequence text) {}

        @Override public void onRelease(int primaryCode) {}

        @Override public void onPress(int primaryCode) {}

        @Override
        public void onKey(int primaryCode, int[] keyCodes) {
            dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, primaryCode));
        }
    }); 
```

我的问题是我**不**想像这样指定我自己的`Keyboard`对象：

```
mKeyboardView.setKeyboard(new Keyboard(this, R.xml.qwerty)); 
```

而不是使用我的（它将拥有自己的风格/布局/等），我想通过使用设备上其他任何地方`Keyboard`使用的，让用户尽可能舒适和在家。`Keyboard`

有人知道我如何访问构建键盘的`Keyboard`对象或标准资源吗？`android.R.xml.keyboard`

（或者，反常地，如果有人知道如何以上述以外的方式放置标准键盘，我会很高兴的！:)）

# design-patterns - 我们可以在运行时将特征分配/更改给 scala 类吗？怎么样 - 任何示例代码？Like Strategy Pattern (Gang of Four Design Pattern)

> ID：11054299
> 
> 赞同：2
> 
> 时间：2012-06-15T16:00:04.930
> 
> 标签：design-patterns, scala, strategy-pattern

解释我的问题：

类别：玩具

特质1：说话像男性

特质2：像女性一样说话

我可以在运行时更改玩具的行为（特征），所以有时同一个对象说话像男性，有时同一个对象说话像女性？

我想在运行时改变说话的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:31:16.967

```
sealed trait Speaker
case object Male extends Speaker
case object Female extends Speaker

class Toy(name: String, speaks: Speaker = Male) { 
  def speak = speaks match {
    case Male   => "ugh"
    case Female => "What time do you call this?"
  }
} 
```

然后

```
barbie = ken.copy(speaks = Female) 
```

您不能更改`trait`对象在运行时扩展的 s，因为`trait`混入了 a 以创建一个类（在 .class 文件中）。给定的对象只有一个类，并且永远不能更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:25:09.460

Scala 真的不这样做。有 Kevin Wright 的 autoproxy 插件可以做到这一点，您可以使用任一 trait*实例化*和对象，而该 trait 不是基类的一部分。

我个人认为，试图以这种方式完成事情违背了 Scala 的特点：困难且容易陷入困境。最好设计一个不需要这些东西的解决方案——事实上，Scala 粒度更倾向于函数式，它把重点放在所有不可变的东西上，并通过计算将一个对象替换为一个新对象。

# actionscript-3 - Alert.Show() 空引用 as3

> ID：11054301
> 
> 赞同：0
> 
> 时间：2012-06-15T16:00:08.160
> 
> 标签：actionscript-3, alert, nullreferenceexception

我只是想在 AS3 中弹出一个警报框。我正在使用 Flashdevelop，当我运行这个简单的代码时出现空引用错误。我认为这与舞台有关，但我不知道。

```
import mx.controls.Alert;
public class Main extends Sprite
{
  public function Main()
  {
     Alert.show("hello World","title",Alert.YES | Alert.NO);
  }
} 
```

我想运行此警报，并根据警报返回的内容返回真或假。但如果我们可以从显示警报对话框开始，我会很高兴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:11:08.607

警报是一个弹性组件。你确定你正在创建一个弹性应用程序吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:56:36.303

问题是，我将所有文本都写在了 AS 文件中。当我使用 MXML 文件作为视图时，警报将正确弹出。

# java - JScrollBar 中“工作”区域的大小

> ID：11054304
> 
> 赞同：2
> 
> 时间：2012-06-15T16:00:13.433
> 
> 标签：java, swing, jscrollbar

如何在 Swing 中定义 JScrollBar 的这个大小？

![JScrollBar 工作区大小](../Images/6dc3f555269029e75dac95afdac5480e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:03:08.010

构造时`JScrollBar`，可以在[构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JScrollBar.html#JScrollBar%28int,%20int,%20int,%20int,%20int%29)中使用`extent`参数设置可视区域的大小。

```
public JScrollBar(int orientation,
                  int value,
                  int extent,
                  int min,
                  int max) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:03:28.423

宽度 - 左图标 - 右图标。您可以通过 javax.plaf 访问图标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:02:14.750

你在找`JScrollBar.getWidth()`吗？

# css - CSS选择另一个元素的多个后代

> ID：11054305
> 
> 赞同：21
> 
> 时间：2012-06-15T16:00:17.817
> 
> 标签：css, css-selectors

是否可以在 CSS 中选择具有某个类、id 等祖先的多个元素？例如：

```
table.exams caption, tbody, tfoot, thead, tr, th, td 
```

如果没有，有没有办法选择该元素的所有后代？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-15T16:01:40.290

> 是否可以在 CSS 中选择具有某个类、id 等祖先的多个元素？

现在可以使用[`:is()`伪类](https://www.w3.org/TR/selectors-4/#matches)来实现这一点，它起源`:matches()`于下面这个答案的原始版本中提到的。确保不要将其与 混淆[`:where()`](https://www.w3.org/TR/selectors-4/#zero-matches)，这会消除对选择器至关重要的特殊性：

```
table.exams :is(caption, tbody, tfoot, thead, tr, th, td) 
```

* * *

之前，如果不复制整个祖先选择器并指定所有后代¹`:is()`，这是不可能的：

```
table.exams caption, 
table.exams tbody, 
table.exams tfoot, 
table.exams thead, 
table.exams tr, 
table.exams th, 
table.exams td 
```

直到 Selectors 3 最终确定后，他们才提出了一个伪类符号来执行此操作，并且直到最近才开始出现基本实现。请参阅[此答案](https://stackoverflow.com/questions/800779/why-cant-you-group-descendants-in-a-css-selector/11786102#11786102)以获取一些历史课程。

简而言之，现在进入标准的伪类称为`:matches()`. 在遥远的将来，一旦浏览器开始实现`:matches()`，您将能够执行以下操作：

```
table.exams :matches(caption, tbody, tfoot, thead, tr, th, td) 
```

* * *

¹ [特别是表，你可以逃脱`table.exams > :not(colgroup), table.exams > * > tr > *`，但正如你所知，这是非常神秘的（更不用说它假设你在这个表中没有[脚本支持元素](https://html.spec.whatwg.org/multipage/dom.html#script-supporting-elements-2)或嵌套表），你最好只列出所有您明确想要的后代。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-01T19:17:05.857

您现在可以使用[:is()](https://developer.mozilla.org/en-US/docs/Web/CSS/:is)选择器执行此操作。如果它需要更大的选择，您可以将较小的比率`:not`与它结合使用，如代码片段中所示：

此选择器可用于所有 4 种主要浏览器（Edge、Firefox、Chrome 和 Safari）的最新版本：[https](https://caniuse.com/?search=is) ://caniuse.com/?search=截至 26/1/2021。

```
.match-elements :is(.match-1,.match-2,.match-5,.match-10) {
  background: #5548B0;
}

.match-elements :not(:is(.match-1,.match-2,.match-5,.match-10)) {
  background: #BADA55;
}

/* For snippet styling, not required */

.match-elements div {
  font-family: sans-serif;
  font-weight: 600;
  color: white;
  padding: 10px;
  margin: 10px 0;
}
```

```
<div class="match-elements">
  <div class="match-1">Matched using is</div>
  <div class="match-2">Matched using is</div>
  <div class="match-3">Matched using not</div>
  <div class="match-4">Matched using not</div>
  <div class="match-5">Matched using is</div>
  <div class="match-6">Matched using not</div>
  <div class="match-7">Matched using not</div>
  <div class="match-8">Matched using not</div>
  <div class="match-9">Matched using not</div>
  <div class="match-10">Matched using is</div>
</div>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-31T19:09:46.073

> 是否可以在 CSS 中选择具有某个类的祖先的多个标签？

可以使用 SCSS 实现类似于 :matches 的结果，如[本文所示](http://css-tricks.com/almanac/selectors/m/matches/)

此外，某些浏览器部分支持`:matches`供应商特定前缀。

# ruby-on-rails - Rails rename_column，但保留旧版本

> ID：11054307
> 
> 赞同：0
> 
> 时间：2012-06-15T16:00:25.540
> 
> 标签：ruby-on-rails, heroku

几周前，我最初发布了我的第一个 Rails 应用程序（我们的 iPhone 应用程序的 API），但昨晚我注意到我拼错了一个列名。我要重命名该列，但是当我这样做时，它会破坏 iPhone 应用程序，因为它会拼写不同。

在我的专栏重命名后保持旧 iPhone 应用程序完好无损的最佳方法是什么？我正在 Heroku 上部署 rails 应用程序，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:03:56.033

重命名该列，然后使用旧的不正确名称为其创建一个别名。例如：

```
alias_attrib :wrong_name, :right_name 
```

然后等到老的 iPhone 应用不再需要支持的那一天，去掉别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:05:37.860

保留新的和旧的别名，直到您将所有或几乎所有客户端更新到仅访问右侧列的最新版本。

在您的客户停止使用（或其使用接近于零）别名后，将其删除。

# solr - 带有句点的缩写词的 SOLR 解析器

> ID：11054313
> 
> 赞同：0
> 
> 时间：2012-06-15T16:01:09.920
> 
> 标签：solr

在 SOLR Apache 3.6 中搜索选择了突出显示的 USC 时，为什么它在突出显示的结果中也没有选择 USC？

字段类型如下：

```
 <fieldType name="text_en_splitting" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
  <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
  <analyzer type="query">
   <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
</fieldType> 
```

我希望 SOLR 在突出显示的搜索结果中返回 USC 和 USC。

然而它只返回南加州大学：

```
<response><lst name="responseHeader"><int name="status">0</int><int name="QTime">7</int><lst name="params"><str name="explainOther"/><str name="fl">*,score</str><str name="indent">on</str><str name="start">0</str><str name="q">USC</str><str name="hl.fl">*</str><str name="wt"/><str name="fq"/><str name="hl">on</str><str name="version">2.2</str><str name="rows">10</str></lst></lst><result name="response" numFound="1" start="0" maxScore="0.047945753"><doc><float name="score">0.047945753</float><str name="id">978-064172344522</str><arr name="title"><str>my <a href="www.foo.bar">link</a>  power-shot PowerShot USC Utility <br>hello</br> Rejections Under 35 U.S.C. 101 and 35 U.S.C. 112, First Paragraph Petitions to correct inventorship of an issued patent are decided by the <Underline>Supervisory Patent Examiner</Underline>, as set forth</str></arr></doc></result><lst name="highlighting"><lst name="978-064172344522"><arr name="title"><str>my <a href="www.foo.bar">link</a>  power-shot PowerShot <em>USC</em> Utility <br>hello</br> Rejections Under</str></arr></lst></lst></response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:28:18.457

如果您转到 Solr 中的分析页面，并在 fieldType 上运行字符串“USC”，`text_en_splitting`您将看到它被索引为三个单独的标记：`u`、`s`和`c`。使用 WordDelimiterFilterFactory 的属性（可能是 catenateAll 属性），看看是否可以将其作为`usc`（一个标记）而不是三个拆分标记来索引。如果这不起作用，也许您必须扩展标记器以适应您的情况。

# android - 在android中触摸屏幕上的任意位置时显示和隐藏一个对话框

> ID：11054318
> 
> 赞同：0
> 
> 时间：2012-06-15T16:01:27.833
> 
> 标签：android, dialog, popup, touch-event

我正在开发一个小应用程序，其中当用户触摸屏幕上的任何位置时必须弹出一个对话框，如果对话框已经显示，然后单击对话框外的任何位置，它必须消失。有人请就如何去做这件事提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:58:45.273

这可能是[链接的重复](https://stackoverflow.com/questions/8384067/how-to-dismiss-the-dialog-with-click-on-outside-of-the-dialog)

如果你想在触摸事件后隐藏对话框，那么

```
Dialog dialog = new Dialog(context);
dialog.setCanceledOnTouchOutside(true); 
```

并通过将 onTouch 侦听器覆盖为

```
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
        dialog.dismiss();
    }
    return false;
} 
```

# android - $.ajax() on phonegap

> ID：11054319
> 
> 赞同：3
> 
> 时间：2012-06-15T16:01:28.493
> 
> 标签：android, jquery, cordova, github

任何人都知道Android的*github*中的*phonegap*示例吗？我读过 JSONP 或 CORS，但我只从 Twitter 请求数据。`$.ajax()`

 *我只需要获取我的数据服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:58:17.347

通过jquery mobile非常容易。您可以使用普通的 Ajax 和一点点 JSON 来完成您的工作。我完成了 php 服务器。这里的示例代码，

通过 jquery 向服务器发送请求。

```
$.ajax({
          url: <your Server URL>,
          dataType: 'jsonp',
          jsonp: 'jsoncallback',
          timeout: 5000,
          success: function(data, status){
                             /*Process your response here*/
                        }
       }); 
```

在 php 服务器文件中，

```
<?php
$data="I am sending response to you";

/*you have to mention this callback compulsory*/

echo $_GET['jsoncallback'] . '(' . json_encode($data) . ');';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:07:09.613

检查此[网址](http://samcroft.co.uk/2010/loading-data-into-a-phonegap-app/)。它将帮助您从数据服务器加载数据。*

# iphone - 纵向视频列表；横向视频播放

> ID：11054320
> 
> 赞同：0
> 
> 时间：2012-06-15T16:01:31.777
> 
> 标签：iphone, ios5, mpmovieplayercontroller

我有一个用户可以从中选择观看的视频列表。所有视频都包含在应用资源中并在本地播放。

除了一件事，我的一切都很好。我不知道如何强制视频播放进入横向模式。

选择视频时，我正在使用此代码显示视频播放器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    VideoPlayerViewController *detailViewController = [[VideoPlayerViewController alloc] init];
    detailViewController.delegate = self;

    detailViewController.contentPath = [[videos objectAtIndex:indexPath.row] objectAtIndex:1];

    [self presentModalViewController:detailViewController animated:YES];
} 
```

我的播放器类 VideoPlayerViewController 使用上面代码中设置的 contentPath 加载播放器并播放视频。

我可以旋转手机，它会切换到横向，但如果我将手机旋转回纵向，视频也会旋转。我的播放器有以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

任何想法为什么它允许旋转回纵向以及如何开始横向播放？

我正在寻找与原生 YouTube 应用类似的功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:12:03.427

在 VideoPlayerViewController viewDidLoad 方法和 shouldautorotate 方法中使用它：

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];

 [[self view] setBounds:CGRectMake(0, 0, 480, 320)];
 [[self view] setCenter:CGPointMake(160, 240)];
 [[self view] setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

# javascript - tinyMCE - 将 RemoveFormat 限制为格式列表

> ID：11054324
> 
> 赞同：3
> 
> 时间：2012-06-15T16:01:47.123
> 
> 标签：javascript, tinymce

当前的 tinyMCE 版本 (3.5.2)。

你好，

我正在开发一个添加和删除[自定义格式](http://www.tinymce.com/tryit/custom_formats.php)的自定义插件。

向当前选择添加格式很简单，但是我找不到删除多种格式的合适解决方案。

我确实找到了 RemoveFormat 命令：

```
tinymce.activeEditor.execCommand('RemoveFormat');
// which is the same as 
tinymce.activeEditor.formatter.remove('removeformat'); 
```

此功能确实删除了当前选择的任何格式，这绝对是我只想删除某些格式的原因。

所以我尝试`remove`为每种格式调用该方法

```
tinymce.activeEditor.formatter.remove('format_1');
tinymce.activeEditor.formatter.remove('format_2');
... 
```

但是，这也不成功，因为它没有删除嵌套格式。如果您选择以下段落并调用`tinymce.activeEditor.formatter.remove('format_2');`它，则**不会**删除该格式，因为该段落本身不使用此格式。

```
<p class="format_1">abcd<span class="format_2>ef</span>g</p> 
```

有没有办法**删除一个元素的格式以及它的所有子元素的格式，**比如 RemoveFormat？

* * *

更新（@Thariama）

我所有的格式都是具有以下结构的自定义格式：

```
 "demo_format_1" : { 
      "classes" : "demo_format_1",
      "deep" : true,
      "exact" : false,
      "inline" : "span",
      "selector" : "*",
      "title" : "Demo Format"
   }} 
```

* * *

更新：

再次实施后，我发现了更多案例。以下是我想到的所有特殊情况的示例：

删除格式之前的文本：

```
<p>abc<span class=demo_format_1>def</span></p> 
```

案例 1（由 Jeffery To 覆盖）

选择整个段落应该会给你以下结果

```
 <p>abcdef</p> 
```

案例2

仅选择 f 应该会给您以下结果

```
<p>abc<span class=demo_format_1>de</span>f</p> 
```

案例3

只选择 cd 应该会给你以下结果

```
<p>abcd<span class=demo_format_1>ef</span></p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:42:01.093

[tinymce.Formatter.remove](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Formatter.remove)可以在特定节点上调用，因此：

```
var selection = ed.selection.getSel(),
    ancestor = ed.selection.getNode(),
    els = ancestor.getElementsByTagName('span'),
    l = els.length,
    i = 0;
if (selection.containsNode(ancestor, true) && ancestor.nodeName.toLowerCase() === 'span') {
    ed.formatter.remove('demo_format_2', null, ancestor);
}
for ( ; i < l; i++) {
    if (selection.containsNode(els[i], true)) {
        ed.formatter.remove('demo_format_2', null, els[i]);
    }
} 
```

[演示](http://jsfiddle.net/jefferyto/82BRe/)

* * *

**更新：**原来问题是由于在格式中包含`inline`和引起的`selector`，这将其标记为“混合”（内联+块级）。如果您仅使用 定义格式`inline`：

```
demo_format_1: {
    inline: "span",
    classes: "demo_format_1"
} 
```

然后`formatter.remove('demo_format_1')`按您的预期工作（[演示](http://jsfiddle.net/jefferyto/82BRe/2/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:26:49.917

您应该执行以下操作：

1.  获取用户选择触及的所有段落
2.  获取这些段落下的所有节点
3.  检查选择范围是否触及节点
4.  如果是：从其类元素中删除“不需要的”类

稍后我将为此提供一些代码。

# ruby - 如果窗口没有焦点，jQuery UI 日期选择器将不会出现

> ID：11054327
> 
> 赞同：0
> 
> 时间：2012-06-15T16:01:52.027
> 
> 标签：ruby, selenium, webdriver, capybara, jquery-ui-datepicker

我有一个用 Ruby 编写的集成测试，使用 Capybara (Webdriver/Selenium) 找到日期选择器的图标，然后单击它，打开日历以选择日期：

```
find("input[type=date]").click 
```

当运行测试的窗口（即 Firefox 窗口）没有焦点时，日历不会出现（并且测试失败）。

有什么想法吗？或如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:03:30.033

你使用了错误的事件。日期选择器由*焦点*激活，而不是*单击*。当窗口没有焦点时，此示例在 Firefox 和 Chrome 中运行良好：

```
$("#datepicker").datepicker();
setTimeout(function() {
    $('#datepicker').focus();
}, 5000); 
```

演示：http: [//jsfiddle.net/ambiguous/dXJKL/](http://jsfiddle.net/ambiguous/dXJKL/)

因此，请尝试修复您的测试以使用`find('input[type=date]').focus()`.

# tridion - Tridion 代理数据库连接问题

> ID：11054330
> 
> 赞同：4
> 
> 时间：2012-06-15T16:01:58.637
> 
> 标签：tridion

我不太确定发生了什么，但在 Tridion 2011 SP1 支持的网站上出现了几个问题，我只能认为是由代理 db 引起的

1，加载网站导致环境数据模块出错：

[NullReferenceException：对象引用未设置为对象的实例。] Tridion.ContentDelivery.AmbientData.HttpModule.OnRequestStart(Object sender, EventArgs e) +292 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +79 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +269

2，代理和订阅管理数据库之间的受众管理器配置文件同步失败，从日志中收到以下错误：

从带有 url:[URL] Profilesync.aspx 的演示系统获取同步批处理时出错。消息类 java.sql.SQLException 没有 AudienceManagerProfile 的数据访问对象 java.sql.SQLException：没有 AudienceManagerProfile 的数据访问对象

3、在传输阶段多次发布网站发布失败，返回：Transport failed: Could not transport tcm_0-10689-66560.Content.zip using HTTPS

我知道这些听起来像是同时发生了几个问题，但我的网站运行良好，直到另一个网络出版物被添加到蓝图中。从那时起，我们一直收到这些错误，并且认为这都与代理数据库的问题有关。

有人遇到过这样的事情吗？

更新：还应该添加动态链接也停止工作的事实，这加强了我的信念，无论是连接到代理数据库还是与代理数据库连接都存在问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:57:01.893

这充满了加载的问题，哦.. 男孩.. 让我们一一回答。

> 您是否检查过您的许可证文件是否有效并且最近没有过期。

我会先排除许可证文件。如果不是这种情况，请参见下文。

首先，添加发布蓝图发布对 CDA 站点没有任何影响。所以，我会完全排除这种可能性。

其次，您的网站启动并运行，直到发布添加.. 这不可能发生。您的网站上应该有一些配置更改/添加。有时，配置更新但 APPpool 没有回收，因此您看不到影响。稍后，当 AppPool 重新启动/回收时，您会注意到错误，并且可能会有站点突然中断的印象。

1.  您是否仔细检查了您的配置和 dll？
2.  您是否可以使用代理用户 ID/密码直接连接到您的数据库？
3.  最近发生了任何防火墙更改，请尝试从 CDA 服务器连接到数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:30:11.760

对于#3，我遇到了同样的问题......添加新出版物是否有可能导致包大小从不到 30mb 增加到超过 30mb？如果是这样，请检查 IIS 请求过滤>>编辑功能设置并查看最大允许内容长度。这默认为 30MB，对我们来说，将这个大小增加到大于我们的包大小解决了传输失败错误（因为 IIS 会因为大小大于 30mb 而拒绝我们的传输）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T21:30:52.053

关于问题 #1：您是否在 Web.config 中配置了 Tridion.ContentDelivery.AmbientData.HttpModule，但缺少 java 安装？您的配置文件夹中有 cd_ambient_conf.xml 吗？以及库中的 cd_ambient.jar？

关于问题 #2：您似乎缺少受众管理器 DAO（数据访问对象）。您的 cd_storage_conf.xml 中有以下内容吗？

```
<StorageBindings>
  <Bundle src="AudienceManagerDAOBundle.xml"/>
</StorageBindings> 
```

关于问题 #3：您在 cd_transport.log 或 windows 事件查看器中有更多信息吗？

我同意 Ram 的观点，即添加的出版物不可能造成这种情况。看起来您的 CD 安装以某种方式更改。你做了升级还是什么？

# javascript - Google+ 按钮损坏了工具提示

> ID：11054334
> 
> 赞同：0
> 
> 时间：2012-06-15T16:02:04.760
> 
> 标签：javascript, css, html, google-plus-one

我已经创建了我的[作品集](http://portfolio.yanavichus.info)并放了一个 Google+ 按钮。页面仍然没有样式，损坏的工具提示让我放慢了速度。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:17:59.103

您的样式表 css/style.css 中存在冲突的样式，这会导致问题。

如果我摆脱了该样式表，那么它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:10:37.653

代替：

```
<div class="g-plusone">
        </div> 
```

尝试：

```
<g:plusone annotation="inline"></g:plusone> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:09:38.233

我不确定您将代码放在哪里，但您想将其替换为：[http ://www.google.com/webmasters/+1/button/](http://www.google.com/webmasters/+1/button/)

```
<!-- Place this tag where you want the +1 button to render -->
<g:plusone annotation="inline"></g:plusone>

<!-- Place this render call where appropriate -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

# vb.net - 如何剪断部分绳子

> ID：11054335
> 
> 赞同：0
> 
> 时间：2012-06-15T16:02:06.583
> 
> 标签：vb.net, string

如何从这个字符串中剪切一部分...

```
"abb.c.d+de.ee+f.xxx+qaa.+.,,s," 
```

...我通过这个知道位置：

结果总是在“.”之间 （结果左侧）和“+”（右侧）。我知道“。”的数量。从左侧和右侧的“+”数，以分隔结果字符串。

问题在右侧，因为我需要从末尾数“+”。

说...

从左侧开始：从第 4 个“。”开始。
（这很容易），结果是=

```
"xxx+qaa.+.,,s," 
```

从右侧：结束在第二个“+”从结束！

```
"xxx[here]+qaa.+.,,s," 
```

结果是=

```
"xxx" 
```

我尝试用.substring和.indexOf自己做这个，但没有成功......

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:31:39.650

您可以使用正则表达式解决此问题：

```
Dim r As New Regex("^(.*\.){4}(?<value>.*)(\+.*){2}$")
Dim m As Match = r.Match("abb.c.d+de.ee+f.xxx+qaa.+.,,s,")
Dim result As String = m.Result("${value}") 
```

**解释**

*   `^` 表示字符串的开头
*   `(.*\.){4}` 这意味着任何字符 ( `.`) 重复任意次数 ( `*`) 后跟一个句点 ( `\.`)。句点必须用反斜杠转义，否则句点将是任何字符的通配符。`.*\.`附在里面是说`(){4}`模式必须重复四次。
*   `(?<value>.*)` 这指定了我们要查找的文本的占位符。 `value`是我们分配给它的名称。`.*`指定该值是任意数量的任意字符。
*   `(\+.*){2}` 这意味着加号字符（必须转义）后跟任意数量的任意字符，重复两次。
*   `$` 表示字符串的结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:17:59.663

要查找子字符串的开头，请从左侧循环遍历字符串。数一数`.`你看到的 s 数量，当你达到你想要的数量时停止。将索引存储在某个变量中，例如`start`.

类似地找到子字符串的结尾，从右边循环并计数`+`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:36:58.877

您可以使用该`StrReverse`函数来反转字符序列，然后`+`从左侧开始计数（使用与计数相同的方法`.`）。

# asp.net - 如何使用 Microsoft Sync Framework 同步 sql server 2008-R2（本地远程服务器）

> ID：11054337
> 
> 赞同：0
> 
> 时间：2012-06-15T16:02:08.960
> 
> 标签：asp.net, sql-server-2008-r2, sync, microsoft-sync-framework, remote-server

如何使用 Microsoft Sync Framework 同步 sql server 2008-R2（远程服务器和本地）？
有大量关于该框架的文档，但我找不到同步的分步指南。[我从这里](http://www.microsoft.com/en-us/download/details.aspx?id=23217)
下载了 Sync Framework 2.1 SDK 只是一个框架，安装后程序文件夹中有一些 dll。 现在我应该做什么以及应该使用哪些**工具**？ 我在哪里可以下载这些工具？ 我在我可以访问的一个服务器中看到了一个工具（PUTTY.exe）。这个工具是什么，它与同步框架有关系吗？ 我有两个数据库（sql server 2008 - R2）：本地**的 A**和Web 服务器中的**B。**

 ******这两个数据库都是相同的，我只想将它们的数据与预定程序同步。******

 ******提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:09:51.350

该文档包括演练/教程，请参阅：

[教程：同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928700)

这应该也适用于 SQL Server 到 SQL Sever，您应该在随 SDK 安装的文档中找到相同的内容。

这是使用 WCF 的示例： [Database Sync:SQL Server and SQL Express N-Tier with WCF](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)******

# html - CSS 列 - 在 WebKit 中减小字体大小和 scrollWidth 反应

> ID：11054342
> 
> 赞同：1
> 
> 时间：2012-06-15T16:02:22.803
> 
> 标签：html, css, safari, webkit

我的文档中有多列（具有固定高度的 css3 webkit 列）布局。当我增加元素的字体大小时（使用 element.style.setProperty('font-size', ...); 我的 body.scrollWidth 也会增加，这没关系。但是，减小字体大小 body.scrollWidth 保持不变并且我在最右边留下了很多空白空间。

有什么想法可以解决这个问题吗？如何强制 body.scrollWidth 反映对文档的更改并在必要时缩小？

# android - 在android图形中连接树节点

> ID：11054348
> 
> 赞同：3
> 
> 时间：2012-06-15T16:02:54.310
> 
> 标签：android, html, graphics, opengl-es, android-canvas

如何在 Android 中创建与 html5 的画布几乎相似的拖放图形。具体来说，我想模仿 ancestry.com 的 android 应用程序“家谱”屏幕在下图中的样子。我希望能够拖放节点并连接/断开它们。我还希望屏幕看起来“无穷无尽”；如果您使用过 ancestry.com 的 android 应用程序，您会注意到在下面的这个屏幕中，您可以向左/向右移动整个树，直到没有更多节点离开。我的猜测是这些屏幕中的节点是图像按钮，它们使用某种类型的水平滚动视图，但我不确定。提前感谢您的帮助！:)

![在此处输入图像描述](../Images/f48e645509d32dc81674db9d2ba7ddc6.png)

![在此处输入图像描述](../Images/54df3aa15237f685262f1f8901695d07.png)

# ruby-on-rails - 如何将 gem 打包到我正在与该应用程序同时开发的 Rails 应用程序中？

> ID：11054352
> 
> 赞同：0
> 
> 时间：2012-06-15T16:03:11.930
> 
> 标签：ruby-on-rails, git, gem, omniauth, subclassing

我正在开发一个 Rails 应用程序。凉爽的。

我还必须将组件开发为 Gem。

基本上，Rails 应用程序使用 Omniauth 来允许来自 OAuth2 服务提供商的身份验证。但是，对于这个特定的服务提供商，不存在任何策略，所以我正在编写一个，并使用我的应用程序对其进行测试（它们需要一起测试）。不幸的是，Omniauth 现在需要将策略打包为 gem，并与 omniauth gem 一起放入 Gemfile。

所以基本上我想把 /my-new-strategy-gem 和策略内容放在我的 /myrailsapp 文件夹中，然后在 /my-new- 里面做 gem "mystrategy" :as => "/myrailsapp" strategy-gem 有一个实际的 gem，带有 gemfile、readme 等。

*我在这里问*的原因是我之前尝试过这个，Git 无法识别我的主应用程序文件夹中的 /my-new-strategy-gem 文件夹，因为它包含自己的 .git 文件和其他信息。

我听说过将其作为子模块，或者使用供应商文件夹的方法以及其他东西，所以我想知道哪种方法在这种情况下最有效。

编辑：我也想这样做的原因是，我的编码伙伴同时帮助两者，可以一次克隆一个 repo，我们可以稍后重新打包独立的策略 gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:07:06.480

您可以使用该`:git`属性指向您的 gem 的 git 存储库。

[http://gembundler.com/git.html](http://gembundler.com/git.html)

```
gem "my_strategy", :git => "git://github.com/rcd/my_strategy.git" 
```

我相信您也可以在本地而不是在 github 上执行此操作。

# c - typedef结构在c中的使用

> ID：11054354
> 
> 赞同：0
> 
> 时间：2012-06-15T16:03:22.380
> 
> 标签：c, struct, typedef

```
struct pointsto_val_def
{
    unsigned int lhs;
    bitmap rhs;
    struct pointsto_val_def *next;
};
typedef struct pointsto_val_def *pointsto_val;

typedef pointsto_val *pointsto_val_hash; 
```

最后两个语句可以简单地替换为这一个语句吗？

```
typedef struct pointsto_val_def *pointsto_val_hash 
```

提前致谢。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:09:28.023

我认为答案是否定的。因为pointsto_val_hash 的类型是`struct pointsto_val_def**`，这意味着pointsto_val_hash 是指向的指针。而`struct pointsto_val_def*`您的替换意味着指向的指针`struct pointsto_val_def`，它们是不一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:07:37.280

`typedef`如果不需要类型，可以用一个替换它`_val`，但是用一个双指针：

```
typedef struct pointsto_val_def** pointsto_val_hash; 
```

# jsf-2 - 将焦点设置在第一个错误字段 JSF 2.0

> ID：11054355
> 
> 赞同：1
> 
> 时间：2012-06-15T16:03:24.997
> 
> 标签：jsf-2

您如何将输入焦点设置在第一个有错误的字段上？

[BalusC](http://balusc.blogspot.com/2007/12/set-focus-in-jsf.html)的代码运行良好。但是，`setHighlight()`并且`setFocus()`是在一个文件中，而不是在每个 xhtml 页面中：

```
 $(document).ready(function() {
   setHighlight('${highlight}');
   setFocus('${focus}');
    }); 
```

这导致传递`${highlight}`给`setHighlight()`方法而不是元素 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:28:03.817

JSF 不解析 JavaScript 文件中的 EL。所以你真的需要内联声明它们。如果您在主 Facelets 模板中执行此操作，则无需在所有模板客户端上复制它。

```
<h:outputScript target="body">
    setHighlight('${highlight}');
    setFocus('${focus}');
</h:outputScript> 
```

# silverlight - 新开发 ASP.NET + GIS 推荐哪个 Silverlight 版本？

> ID：11054356
> 
> 赞同：1
> 
> 时间：2012-06-15T16:03:27.077
> 
> 标签：silverlight

我刚刚开始了一份新工作，我需要在 Silverlight 技术方面进行新的开发。现有应用程序是 ASP.NET 和 GIS 应用程序。

推荐使用什么版本的 Silverlight？

我没有任何使用 Silverlight 的经验，请建议我一个好的起点——教程/博客/资源...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:45:43.803

[这个](http://silverlighttutorials.blogspot.in/)、[这个](http://www.dotnetspider.com/tutorials/Silverlight-Tutorials.aspx)和[这个](http://learn2codehere.blogspot.in/2012/03/silverlight-tutorials-introduction-to_05.html)对于初学者来说是非常好的和知识渊博的。

**[这](http://www.silverlight.net/content/samples/sl3/toolkitcontrolsamples/run/default.html)**显示了许多带有源代码的 silverlight 控件示例。 [这](http://nokola.com/)显示了 silverlight**与源代码的不同实际用途！**

如果您在开发过程中遇到任何其他疑问，您可以[在 StackOverflow 上](https://stackoverflow.com/)非常轻松地发布问题并获得建议。！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:43:37.590

如果您使用的是 ArcGIS，那么您应该使用 Silverlight [4。Esri Silverlight SDK](http://www.esri.com/apps/products/download/)的当前版本是[2.4 版](http://www.esri.com/apps/products/download/index.cfm?fuseaction=download.main&downloadid=746)。它建立在 Silverlight 4 之上。如果您使用的是 ArcGIS 10.1，那么您可以使用[3.0 版本](http://www.esri.com/apps/products/download/index.cfm?fuseaction=download.main&downloadid=714)。当前的 3.0 版本（测试版）也是在 Silverlight 4 上构建的，但他们正在讨论在 Silverlight 5 上构建它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:08:05.600

Silverlight 5 将是最好的选择。您可以在[http://silverlight.net](http://silverlight.net)上获得大量教程。

# css - 将相邻的内联块添加到任何内联内容

> ID：11054360
> 
> 赞同：0
> 
> 时间：2012-06-15T16:03:34.910
> 
> 标签：css

我的目标是在文本块旁边提供类似“阅读更多”链接的内容。它会在内容发送到客户端之前自动添加，并且包含它的块应该与先前的文本相邻，就像它是该文本的一部分一样。问题是文本块内容是使用 TinyMCE 编写的，因此内容将被打包在各种标签中（主要是段落标签） - 因此以下内容将被推送到下一行（或块）。

因此，在经历解构 textblock 服务器端内容以决定在何处以及如何附加另一个块的痛苦之前，我认为可能有一种方法可以使用纯 CSS 完成此操作。我有一种感觉这是不可能的，因为我认为它需要相邻的块来覆盖前一个块的属性，但是对于所有这些 CSS/内联业务，我可能会错过一两件事。

[我在这里](http://jsfiddle.net/D2RnS/)创建了一个 JSFiddle

感谢您对此事的任何建设性意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:34:53.783

您可以在 css 中使用伪元素，方法是在之前的标签中添加一个 ID：

```
#block:after {
    content:"You will have this appended.";
} 
```

你可以在这里看到效果：http: [//jsfiddle.net/D2RnS/14/](http://jsfiddle.net/D2RnS/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:09:39.273

看到这个小提琴：http: [//jsfiddle.net/D2RnS/5/](http://jsfiddle.net/D2RnS/5/)

```
p + p, .adjacentBlock { float : left; } 
```

我刚刚离开了第二段和相邻块。这样做记得也要对父容器应用某种浮动清除（`<div>`在你的例子中）

# visual-studio-2008 - VS 模拟器 - Windows CE 设备错误

> ID：11054366
> 
> 赞同：1
> 
> 时间：2012-06-15T16:04:02.333
> 
> 标签：visual-studio-2008, windows-ce, emulation

我正在尝试学习如何为 Windows CE 6.0 编写程序

我正在使用 Visual Studio 2008 并安装了 Windows Device Emulator v3

我正在运行 64 位 Windows 7。

当我尝试启动模拟器并选择“Windows CE”作为设备时，我收到以下错误消息。

“连接失败。ActiveSync 引导初始化失败。请连接/安装真实设备或从[http://go.microsoft.com/fwlink?linkid=67763](http://go.microsoft.com/fwlink?linkid=67763)下载用户级 Windows Mobile 设备中心应用程序”

我已经点击了指向微软网站的链接，但它只是指向一个对我没有帮助的 windows phone 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:28:07.027

我已经很久没有使用模拟器了，但是 IIRC 你应该能够[启动 Device Emulator Manager](http://msdn.microsoft.com/en-us/library/aa188168%28v=vs.90%29)，然后连接和摇篮模拟器。

另一种选择是通过将位复制到模拟器并运行 conmanclient2.exe 和 cmaccept.exe来[使用直接 CoreCon 连接进行调试。](http://msdn.microsoft.com/en-us/library/ms228708%28v=VS.80%29.aspx)

# android - 如何将字符串 id 分配给 UI 元素。

> ID：11054368
> 
> 赞同：3
> 
> 时间：2012-06-15T16:04:18.150
> 
> 标签：android, android-layout, android-ui

我在 android 上开发一个应用程序，我正在循环生成 UI 元素。但是我需要这些元素有一个带有字母和数字的 id，例如`"rl1"`or `"rl2"`。我试图使用该方法`RelativeLayout.setId()`，但是该方法只接受`int`. 有没有一种方法可以根据需要设置 ID 而不受数字限制？

谢谢。

这是我试图使工作的代码。

```
for (int i=1; i < 10; i++)
{
    //gets the frameview where the elements will be created.
    String LinearLayoutId = "frameview1";
    int resID = getResources().getIdentifier(LinearLayoutId, "id", "com.myapp.ERS");
    LinearLayout linearLayout = (LinearLayout)findViewById(resID);

    //creates the RelativeLayout that will hold the ImageIcon and the TextView
    RelativeLayout rl = new RelativeLayout(this);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,40 );
    rl.setLayoutParams(lp);
    rl.setId("rl"); /// >>>> I would like here to set and ID of "rl1" for example.
    rl.setBackgroundDrawable(getResources().getDrawable(R.drawable.bk36));

    //creates the image icon within the layout at the left side
    ImageView image = new ImageView(this);
    lp = new RelativeLayout.LayoutParams(
            40,RelativeLayout.LayoutParams.MATCH_PARENT );

    image.setLayoutParams(lp);
    String imageicon = "icon_"+i;
    resID = getResources().getIdentifier(imageicon, "drawable", "com.myapp.ERS");
    image.setImageDrawable(getResources().getDrawable(resID));  //sets the icon
    rl.addView(image); //adds the ImageView to the relative layout

    //creates the TextView within the layout with a 40 margin to the left
    TextView tv = new TextView(this);
    lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT,RelativeLayout.LayoutParams.MATCH_PARENT );
    lp.setMargins(40, 0, 0, 0);
    tv.setLayoutParams(lp);
    String textViewID = "tv"+i;
    resID = getResources().getIdentifier(textViewID, "string", "com.myapp.ERS");
    tv.setText(getResources().getString(resID));
    tv.setTextColor(Color.BLACK);
    tv.setTextSize(25);
    rl.addView(tv);//adds the TextView to the relative layout
    rl.setOnClickListener(mAddListener);
    linearLayout.addView(rl);//adds the RelativeLayout to the LinearLayout
} 
```

然后我有这样的 OnCLickListener ...

```
private OnClickListener mAddListener = new OnClickListener()
{
    public void onClick(View v){
        Intent intent;
        Bundle bundle;

        String id = getResources().getResourceEntryName(v.getId());
        id = id.replaceAll("\\D+","");
        int value = Integer.parseInt(id);

        intent = new Intent(ERS.this, ShowInfo.class);
        bundle = new Bundle();
        bundle.putInt("key", value);  
        System.out.println(v.getId());
        intent.putExtras(bundle); 
        startActivity(intent);
    }
}; 
```

我曾尝试设置数字 ID，但是当我查找它们时：

```
String id = getResources().getResourceEntryName(v.getId()); 
```

它找不到它们。

我一开始就将所有这些都放在一个`xml`文件中，但它真的很长，因为列表中有大约四十个项目，而且我去更改所有这些项目中的一个字母是很复杂的。我想出了这个想法，在运行时以`for loop`. 与此同时，我正在测试十个，但我无法让它工作。

如果我做错了什么，请原谅我，但我对此并不陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:55:56.903

您可能仍然会发现返回`XML`布局并使用`R class`生成有意义的 ID 更容易。尽管由于您没有包含`xml`您在问题末尾引用的原始文件，所以我只能猜测您遇到的问题。不过，它似乎确实符合要求，并且可以让您按照以下方式创建一些东西：

```
<?xml version="1.0" encoding="utf-8"?>

<TextView 
  android:id="@+id/hellotextview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:text="Hi there"/> 
```

`android:id="@+id/hellotextview"`生成一个可以在项目的其他地方使用的 id 。在您的 java 代码中，您可以使用`TextView` 类似于以下内容的方式访问该特定内容：

```
TextView helloText = (TextView) findViewById(R.id.hellotextview); 
```

`R.id.hellotextview`是在构建项目时自动生成的 int (in ) `gen/R.java`，但是当您选择名称时，您可以为它们分配与您和您的项目相关的东西。因此，您可以使用and ，而不是尝试使用`"rl1"`和`"rl2"`您提到的字符串值。 `R.id.rl1``R.id.rl2`

除了单个 UI 元素，您还可以对字符串 (in `res/values/strings.xml`) 以及存储在项目`res/`文件夹下的其他资源（例如图标、媒体文件等）使用相同的技术。对于字符串，您可以访问它们`getString(R.string.some_name_given_by_you);`

有关更多信息，请参阅Android 开发者网站上的[访问资源](http://developer.android.com/guide/topics/resources/accessing-resources.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T16:08:00.823

为什么不尝试使用 SharedPreferences 作为替代方案，以防您想访问您在其他活动中在其他地方提供某些 ID 的元素。

# android - 为什么我的 WeakReference 在我的 AsyncTask 中为 NULL？

> ID：11054375
> 
> 赞同：1
> 
> 时间：2012-06-15T16:04:32.620
> 
> 标签：android, memory-leaks, android-asynctask

我花了很多时间试图重现和理解这个问题的原因，但在这两个目标中都没有成功。

我试图只留下与问题相关的代码，但我相信仍然需要几分钟来理解问题和上下文。我希望有人能够在我的实施中发现问题，或者至少帮助我理解原因。

**申请说明：**

与电脑对战的文字游戏。电脑在黑板上打下一个词后，在线获取该词的定义，`AsyncTask`并显示在一个`TextView`

**我是如何发现这个问题的：**

1.  我使用[ACRA](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGwQFjAA&url=http://code.google.com/p/acra/&ei=tlfbT5PkPIqZ8QOzsa2xCw&usg=AFQjCNF1L9fawVNYyKuqqIa7q22TBcL08w&sig2=fyVkGVNNS9DcOUY4CnEWjA)进行崩溃和错误报告（顺便说一句，这是一个很棒的免费工具）。它会向我发送每个意外情况的报告（这不会导致崩溃）。我收到了许多关于**错误 1、2、3 和 4**的报告（见代码）

2.  Google Play 上的一些差评往往表明一些用户即使连接到互联网也看不到定义。（我很确定这个功能性错误与前面提到的错误有关，尽管我无法证明）

**关于代码设计的一句话：**

在阅读了很多关于 Android 内存泄漏的内容后，我决定将在线检索定义的 AsyncTask 设为**静态内部类**（尽管我的主要活动目前不支持旋转，这是导致泄漏的主要原因：我把我的清单`android:screenOrientation="portrait"`）。

`Activity`我需要从这里访问父级，`AsyncTask`因为我从资源中检索字符串，并在`onPostExecute()`. 因此，我`WeakReference`在`AsyncTask`其中使用 a 指向 parent `Activity`。`Activity is recreated or killed while the`如果AsyncTask 仍在运行，这应该可以防止内存泄漏。

**究竟是什么问题：**

*   其方法的或返回是在`WeakReference`一些无法解释的情况下（我怀疑它影响了超过 1% 的游戏或玩家）（见代码）`get()``null`
*   各种设备和Android版本都受到影响，我经常看到同一设备出现几次）
*   我从来没有能够重现这些错误（最明显的尝试是在下载定义时退出活动，但这并没有导致任何错误）

**我的代码中有意义的部分：**

```
public class GameActivity extends Activity {
    private TextView _definition; //inflated from XML in onCreate()
    private ProgressDialog _pDialog; //created in onCreate()

    private Handler _handlerToDelayDroidMove = new Handler();
    private Handler _handlerToDelayProgressDialog = new Handler();
    private Handler _handlerToDelayDefinitionClosure = new Handler();

    public void onClickValidatePlayerMoveAndTriggerDroidMove(View v) {
        int score = _arbitre.validatePlayerMoveAndReturnScore(_listOfLetters);
        toast(String.format(getResources().getString(R.string.player_word_score), score));

        // ***** Only start Droid move when previous toast has been displayed ****
        timedDroidPlayWithSpinner();
    }

    private void timedDroidPlayWithSpinner() {
        _handlerToDelayProgressDialog.removeCallbacks(_droidThinkingDialogRunnable);
        _handlerToDelayDroidMove.removeCallbacks(_droidPlayRunnable);

        _handlerToDelayProgressDialog.postDelayed(_droidThinkingDialogRunnable, 1500);
        _handlerToDelayDroidMove.postDelayed(_droidPlayRunnable, 1500 + DUMMY_DELAY);
    }

    private Runnable _droidThinkingDialogRunnable = new Runnable() { //Show a "Droid is thinking spinner dialog"
        public void run() {
            _pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            _pDialog.setMessage(getResources().getString(R.string.droid_thinking));
            _pDialog.setCancelable(false);
            _pDialog.show();
        }
    };

    private Runnable _droidPlayRunnable = new Runnable() {
        public void run() {
            String word = playBestMoveAndUpdateGUI(); // Droid move (CPU intensive, can take several seconds)
            saveGameStateToPrefs();

            _pDialog.dismiss(); //Hide "Thinking dialog")
            new SearchDefinitionTask(GameActivity.this).execute(word);
        }
    };

    private Runnable _hideDefinitionRunnable = new Runnable() {
        public void run() {
            _definition.startAnimation(_slideUpAnim);
            _definition.setVisibility(View.GONE);
        }
    };

    // Made static so we are sure if does not reference the Activity (risk of leak)
    public static class SearchDefinitionTask extends AsyncTask<String, Void, String[]> {
        private WeakReference<GameActivity> weakRefToGameActivity;

        public SearchDefinitionTask(GameActivity context) { //Save a weak reference to the Activity
            super();
            weakRefToGameActivity = new WeakReference<GameActivity>(context);
        }

        protected String[] doInBackground(String... words) {
            try {
                DefFetcherInterface defFetcher = null;
                Language l = weakRefToGameActivity.get()._dictionaryId;
                defFetcher = new OnlineDefinitionFetcher(l);
                return defFetcher.getDefinition(words[0]);
            } catch (Exception e) { // Typical exceptions are due to lack of internet connectivity
                Log.e("Definition fetch error: ", e.toString());
                String[] ret = { "", "" };
                ret[0] = mots[0];
                if (weakRefToGameActivity == null) { // !!! This occurs in ~0.3% of the games !!!
                    ErrorReporter.getInstance().handleSilentException(new Exception("Silent ERROR 1: weakRef is NULL"));
                    return ret;
                }
                if (weakRefToGameActivity.get() == null) { !!! This occurs in ~1% of the games !!!
                    ErrorReporter.getInstance().handleSilentException(new Exception("Silent ERROR 2: weakRef.get() is NULL"));
                    return ret;
                }

                // If we get here we still have a reference on our Activit/context, so let's show a decent error message
                ret[1] = weakRefToGameActivity.get().getResources().getString(R.string.no_connection);
                return ret;
            }
        }

        protected void onPostExecute(String[] result) {
            if (result[0] != "") { //Don't send another error report if WeakRef was already NULL in doInBackground()
                if (weakRefToGameActivity == null) { !!! This occurs in ~0.5% of the games !!!
                    ErrorReporter.getInstance().handleSilentException(new Exception("Silent ERROR 3: weakRef is NULL"));
                } else if (weakRefToGameActivity.get() == null) { !!!!!!!! This occurs in ~1% of the games !!!!!!!!
                    ErrorReporter.getInstance().handleSilentException(new Exception("Silent ERROR 4: weakRef.get() is NULL"));
                } else {
                    // Everything is fine, show a box with the definition of the word for a few seconds 
                    //(with animation to make the box appearing from the top of the screen)
                    weakRefToGameActivity.get()._definition.setVisibility(ImageView.VISIBLE);
                    weakRefToGameActivity.get()._handlerToDelayDefinitionClosure.removeCallbacks(weakRefToGameActivity.get()._hideDefinitionRunnable);
                    weakRefToGameActivity.get()._definition.setText(Html.fromHtml("<b>" + result[0].toUpperCase() + "</b> " + result[1]));

                    weakRefToGameActivity.get()._definition.startAnimation(weakRefToGameActivity.get()._slideDownAnim);
                    weakRefToGameActivity.get()._handlerToDelayDefinitionClosure.postDelayed(weakRefToGameActivity.get()._hideDefinitionRunnable,
                            DURATION_OF_DEFINITION);
                }
            }
        }    
    }
} 
```

知道什么可能出错或如何重现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:21:11.400

Sebastien，也许您可​​以尝试检查 onDestroy 从未为您的 Activity 调用...当屏幕旋转（您已经处理过）时，可以重新启动 Activity，但还有其他配置更改可能会导致相同的行为。

另一个很常见的方法是在某些手机上取下键盘，但还有一些对我来说更加晦涩难懂。[你可以在那里](http://developer.android.com/guide/topics/manifest/activity-element.html#config)看到列表

除此之外，我真的没有在您的代码中看到任何错误，也无法想象还有什么可能导致您的麻烦。

最糟糕的是你的错误1和3。你能在构造函数中检查weakRefToGameActivity在创建后不为空吗？（如果它为空，那么上下文参数呢）。

找到问题的根本原因后，请发布更新。好机会。

# android - 为什么 Location.getAltitude() 总是返回零，至少在模拟器中？

> ID：11054379
> 
> 赞同：2
> 
> 时间：2012-06-15T16:04:46.767
> 
> 标签：android, gps

有谁知道为什么我下面的 getAltitude 总是返回 0？

```
package com.example.helloandroid;

import android.app.Activity;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;

public class HelloAndroid extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("main", "onCreate");
        setupGps();
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    LocationListener locationListener;
    LocationManager lm;

    void setupGps() {
        Log.d("gps", "Setting up GPS...");
        locationListener = new MyLocationListener();
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 20000, 5,
                locationListener);

        Log.d("gps",
                "GPS supports altitude: "
                        + lm.getProvider(LocationManager.GPS_PROVIDER)
                                .supportsAltitude());
        Log.d("gps", "Finished setting up GPS.");
    }

    static class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            Log.d("gps", "onLocationChanged");
            Log.d("gps",
                    "x: " + location.getLongitude() + ", y: "
                            + location.getLatitude() + ", alt.: "
                            + location.getAltitude());
        }

        public void onProviderDisabled(String provider) {
            Log.d("gps", "onProviderDisabled");
        }

        public void onProviderEnabled(String provider) {
            Log.d("gps", "onProviderEnabled");
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            Log.d("gps",
                    "onStatusChanged; new status: " + String.valueOf(status));
        }
    }
} 
```

为了测试，我`geo`向模拟器发出了一个带有高度的命令：

```
[someone@somewhere ~]$ telnet localhost 5554
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Android Console: type 'help' for a list of commands
OK
geo fix -121.45356 46.51119 4392
OK 
```

但`getAltitude()`返回 0：

![在此处输入图像描述](../Images/e20e5e360b06f3ac52236783aacd85de.png)

我只尝试过模拟设备。

**编辑**

跟进checheen的评论，我证实这`Location.hasAltitude()`是真的。这是。还有什么想法吗？

```
public void onLocationChanged(Location location) {
    Log.d("gps", "onLocationChanged");
    Log.d("gps", "x: " + location.getLongitude() 
        + ", y: " + location.getLatitude());
    Log.d("gps", "hasAltitude: " + location.hasAltitude() 
        + ", alt.: " + location.getAltitude());
} 
```

![在此处输入图像描述](../Images/7a0c124fee14b67a3f232233692e2dfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:38:35.233

似乎很多人都遇到了类似的问题，甚至被报告为[可能的错误](http://code.google.com/p/android/issues/detail?id=24809)。如果模拟器此时根本不支持它，我不会感到惊讶。您可能必须使用真实设备。

# sap - 将销售订单等数据从 SugarCRM 发送到外部 Web 服务的示例

> ID：11054381
> 
> 赞同：0
> 
> 时间：2012-06-15T16:04:57.577
> 
> 标签：sap, sugarcrm

有很多通过网络服务向 SugarCRM 发送数据的例子，但是很难找到从 SugarCRM 出站的好例子，比如在会计系统中创建新订单等。谁能指出一些发送的例子请从 SugarCRM 使用 REST 或任何类似方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:36:51.887

一种轻量级的方法是通过 after_save 逻辑钩子通过 Web 服务调用来执行此操作；我们现在在 Sugar 6.5 中有一个用于进行 REST 调用的简单 API

[http://developers.sugarcrm.com/wordpress/2012/05/11/new-for-sugar-6-5-sugarhttpclient/](http://developers.sugarcrm.com/wordpress/2012/05/11/new-for-sugar-6-5-sugarhttpclient/)

然而，更强大的方法是利用我们提供与 Facebook、Twitter、WebEx、InsideView、Google 和其他服务集成的相同连接器 API。这是在野外完成的一些示例

[http://forums.sugarcrm.com/f6/connect-external-application-80706/#post280938](http://forums.sugarcrm.com/f6/connect-external-application-80706/#post280938)

# php - php标头不转发ie9

> ID：11054384
> 
> 赞同：1
> 
> 时间：2012-06-15T16:05:00.910
> 
> 标签：php

我使用以下在所有浏览器中都能完美运行，除了 ie9

```
$result = mysql_query("SELECT u_id, from users where (id = '$userID')",$db); 
$item = mysql_fetch_row($result);

$how_many = mysql_num_rows($result);

// if not a user send to reg
if ($how_many < 1){ 
header("Location: /pages/registration");
} 
```

它根本不转发 - 标头函数什么都不做 - 但是，如果我将代码的最后一个块更改为下面的内容，它可以工作？！？！

```
if ($how_many < 1){ 
header("Location: /pages/registration");
// added echo for ie9
echo "<br /><br /><br /><br />here i am ";
} 
```

我无法理解任何合乎逻辑的原因，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:11:38.123

只要您不需要在重定向后进行任何处理，您就应该在发送标头后[退出](http://php.net/exit)`Location`：

```
if ($how_many < 1){ 
    header("Location: /pages/registration");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:21:44.950

通过退出或回显，缓冲区由网络浏览器刷新，IE9 在采取行动之前等待。

以下也将起作用：

```
header('Location: /page');
flush(); 
```

我建议在调用标头函数后使用 exit/die 以防止使用不必要的代码/资源。

# qemu - 通过pulseaudio将音频路由到远程机器上运行的Flash应用程序

> ID：11054388
> 
> 赞同：1
> 
> 时间：2012-06-15T16:05:13.217
> 
> 标签：qemu, pulseaudio

我有多个在 qemu-kvm 上运行的虚拟机。我想将每个 VM 的音频输出发送给其各自的远程用户。为此，我想在远程机器上运行 flash。

在这方面，我遇到了脉冲音频。脉冲音频可以获取源并将其路由到接收器。我现在无法做到这一点。

我想了解我如何将我的虚拟机作为源并将该音频发送到它们各自的远程接收器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:26:28.817

看看 的输出`qemu-kvm --audio-help`。

关于 pulseaudio 的部分如下所示：

```
Name: pa
...
Options:
  ...
  QEMU_PA_SOURCE: string, default = (not set)
  QEMU_PA_SINK: string, default = (not set) 
```

您应该能够在运行 qemu 之前设置环境变量 QEMU_PA_SINK 来定义虚拟机的音频流应该路由到的接收器。

# drop-down-menu - 使用组创建选中列表下拉列表 - knockoutjs

> ID：11054391
> 
> 赞同：0
> 
> 时间：2012-06-15T16:05:21.850
> 
> 标签：drop-down-menu, knockout.js

请查看我正在处理的下拉复选框列表的示例。

[http://jsfiddle.net/Yojik/VJHVK/143/](http://jsfiddle.net/Yojik/VJHVK/143/)

问题是我通过取消映射对象而失去了可观察的力量

解决这个问题的“淘汰方式”是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:18:12.020

这绝对不是淘汰赛做事的方式——你一直在与淘汰赛作斗争，这只会造成痛苦。

下面是一个简单的例子，展示了如何使用映射插件和 jQuery 处理的 click 事件：

[http://jsfiddle.net/tlarson/VJHVK/173/](http://jsfiddle.net/tlarson/VJHVK/173/)

这是一个更复杂的例子，点击事件由敲除绑定处理：

[http://jsfiddle.net/tlarson/VJHVK/172/](http://jsfiddle.net/tlarson/VJHVK/172/)

# javascript - 为幻灯片同步 jQuery setInterval

> ID：11054393
> 
> 赞同：0
> 
> 时间：2012-06-15T16:05:26.577
> 
> 标签：javascript, jquery, slideshow, setinterval

我通过重复`jQuery`效果创建了一个非常基本的幻灯片`setInterval`。但是，每个周期后的时序不匹配`setInterval`。几个周期后，它会导致两个平行幻灯片效果出现明显的不匹配。

代码是

```
$(document).ready(function(){
var frontslides =$("#first li").length,
    slideTime=500,
    slideCycle=parseInt(slideTime*frontslides);

function frontSlide(){
    $("#first li").each(function(n){
        $(this).delay(slideTime*n).fadeIn(400).fadeOut(100);
        $("#second li").eq(n).delay(slideTime*n).fadeIn(400).fadeOut(100);
    });}
frontSlide();setInterval(frontSlide, slideCycle);});​ 
```

工作示例在[这里](http://jsfiddle.net/zrmyY/)

为了节省您宝贵的时间，它的速度很快，但它发生在任何速度。几个循环后，您可以看到左右幻灯片不再同步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:20:09.313

## 第一种方法：setTimeout

您可以在单独的函数中将过渡移动到下一张幻灯片并使用`setTimeout`. 然后，您只需将幻灯片编号存储在一个变量中，并在每次函数调用后递增它。

```
$(document).ready(function(){
    var firstSlides = $("#first li"),
        secondSlides = $("#second li"),
        nbSlides = firstSlides.length,
        slideTime = 500,
        nextSlide = 0;

    function slideshow() {
        firstSlides.eq(nextSlide).fadeIn(400).fadeOut(100);
        secondSlides.eq(nextSlide).fadeIn(400).fadeOut(100);

        nextSlide = (nextSlide+1) % nbSlides;
        setTimeout(slideshow, slideTime);
    }

    slideshow();
}); 
```

这是第一种方法的[小提琴](http://jsfiddle.net/MattiasBuelens/mnygF/)。

## 第二种方法：承诺

如果你想在开始下一个动画时**绝对保证**两个动画都完成，你可以使用 jQuery 1.6 中的新 Promise。您可以调用[`$.promise()`](http://api.jquery.com/promise/)两个 jQuery 对象来获得一个承诺，该承诺将在该元素的所有动画完成后得到解决。然后，您可以设置一个主 Promise，`$.when(promises...)`当所有给定的 Promise 都被解决并设置一个`then`处理程序时，该主 Promise 将被解决。

```
$(document).ready(function(){
    var firstSlides = $("#first li"),
        secondSlides = $("#second li"),
        nbSlides = firstSlides.length,
        fadeInTime = 400,
        fadeOutTime = 100,
        nextSlide = 0;

    function slideIn() {
        var p1 = firstSlides.eq(nextSlide).fadeIn(400).promise();
        var p2 = secondSlides.eq(nextSlide).fadeIn(400).promise();

        $.when(p1, p2).then(slideOut);
    }

    function slideOut() {
        var p1 = firstSlides.eq(nextSlide).fadeOut(100).promise();
        var p2 = secondSlides.eq(nextSlide).fadeOut(100).promise();

        nextSlide = (nextSlide+1) % nbSlides;

        $.when(p1, p2).then(slideIn);
    }

    slideIn();
}); 
```

对于一个简单的幻灯片，您可能不会注意到太大的不同。然而，有了 Promise，你可以制作更高级的过渡序列，同时保持同步。

这是这种方法的一个[小提琴](http://jsfiddle.net/MattiasBuelens/pK8Br/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:12:38.607

将动画设置为“同时”运行：

```
function frontSlide(){
    $("#first li").each(function(n){
        var _ = $(this);
        setTimeout(function() {
            _.fadeIn(400).fadeOut(100);
            $("#second li").eq(n).fadeIn(400).fadeOut(100);
        }, slideTime*n);
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T19:26:21.240

自从我张开嘴，这是我想出的版本。我`blocked`在其中添加了一个标志以指示当前正在运行效果循环，希望能防止脚本自身超限。我还添加了一个`factor`值，这样如果确实发生了溢出，它会更快地循环，以保持循环没有中断的外观。

如果您对此有任何其他问题，请告诉我。这很简单。

```
$(document).ready(function() {
    var $sel = $('#left, #right').find('li:first-child'),
        slidetime = 200,
        timein = 400,
        timeout = 100,
        blocked = false;

    var fadeout = function() {
        $sel.fadeOut(timeout, next);
    };

    var next = function() {
        if ($sel.is(':last-child')) {
            $sel = $sel.siblings(':first-child');
        } else {
            $sel = $sel.next();
        }

        blocked = false;
    };

    (function slider() {
        var factor = .2;

        if (!blocked) {
            factor = 1;
            blocked = true;

            $sel.fadeIn(timein, fadeout);
        }

        setTimeout(slider, slidetime * factor);
    })();
});​ 
```

[http://jsfiddle.net/j63vH/](http://jsfiddle.net/j63vH/)

# jquery - 克隆字段的 Jquery onchange 事件

> ID：11054402
> 
> 赞同：0
> 
> 时间：2012-06-15T16:06:03.910
> 
> 标签：jquery, clone, onchange

我想出了如何克隆我的表单行并将一个犯罪数字附加到每个表单字段的 ID 末尾。因此，我认为在 ID 末尾附加的犯罪数字将很容易在更改事件中使用以将一个 id 的值复制到另一个，但这不适用于克隆的行！

我正在使用它来创建新的表单行：

```
$('#btnRemove').attr('disabled','disabled');
            $('#btnAdd').click(function() {
                var num     = $('.clonedInput').length;
                var newNum  = new Number(num + 1);

                var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

                                newElem.children('.product').attr('id', 'product' + newNum).attr('name', 'product' + newNum);
                newElem.children('.productid').attr('id', 'productid' + newNum).attr('name', 'productid' + newNum);

                $('#input' + num).after(newElem);
                $('#btnRemove').removeAttr('disabled','disabled');

                if (newNum == 7)
                $('#btnAdd').attr('disabled','disabled');

            });

            $('#btnRemove').on('click', function() {
                $('.clonedInput').last().remove();
                $('#btnAdd').removeAttr('disabled','disabled');
            }); 
```

我正在（尝试）使用此代码将序列化的产品 id`.val(value.split('-')[3])`从产品选择值复制到表单中的“id”字段。它仅适用于第一个，但不适用于“克隆”表单字段：

```
 $("#product").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid").val(value.split('-')[3]);
        }).keyup();
        $("#product2").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid2").val(value.split('-')[3]);
        }).keyup();
        $("#product3").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid3").val(value.split('-')[3]);
        }).keyup();
        $("#product4").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid4").val(value.split('-')[3]);
        }).keyup();
        $("#product5").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid5").val(value.split('-')[3]);
        }).keyup();
        $("#product6").on('change keyup', function() {
        var value = $('option:selected', this).val();
            $("#productid6").val(value.split('-')[3]);
        }).keyup();​ 
```

我把它放在 jsfiddle 上，这样更容易看出我的问题是什么：[**Demo**](http://jsfiddle.net/Xh4Qp/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:08:14.577

当您`select`使用克隆创建并动态附加到 DOM 时，您需要为它们委托事件处理程序

```
// delegate event handler
$('#myForm').on('change keyup', 'select[id^=product]', function() {
    var value = $('option:selected', this).val();
    $(this).next('input.productid').val(value.split('-')[3]);
}).keyup(); 
```

**[演示](http://jsfiddle.net/Xh4Qp/14/)**

# jquery-mobile - 使用jquery mobile将按钮动态添加到listview中

> ID：11054408
> 
> 赞同：4
> 
> 时间：2012-06-15T16:06:28.953
> 
> 标签：jquery-mobile

我在 jquery mobile 中有一个代码，它将在列表视图中动态添加按钮。问题是当我在 listview 上动态添加按钮时，按钮的样式会消失。

这是代码：http: [//jsfiddle.net/eLENj/98/](http://jsfiddle.net/eLENj/98/)

我尝试使用 .button("refresh") 但不起作用。

如何解决问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T16:09:16.603

只需使用触发器（“创建”）

[http://jsfiddle.net/eLENj/101/](http://jsfiddle.net/eLENj/101/)

阅读更多：http: [//jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

# visual-studio - Visual Studio 2012 是否利用所有可用的 CPU 内核？

> ID：11054410
> 
> 赞同：14
> 
> 时间：2012-06-15T16:06:31.840
> 
> 标签：visual-studio

我计划在 Visual Studio 2012 和 Windows 7 64 位下构建一个新的非常快速的开发人员计算机。我正在获得所有快速组件，例如 SSD 和 16G RAM。我想知道**Visual Studio 2012**是否可以利用所有可用的 CPU 内核。我正在尝试决定是购买昂贵的 6 核 I7 CPU 还是购买更便宜的四核 CPU 是否会影响编译时间，因为这是我不编码时花费的最多时间。

注意：[2009 年有一篇类似的帖子，](https://stackoverflow.com/questions/1814015/was-visual-studio-2008-2010-or-2012-v11-written-to-use-multi-cores)但我想知道 VS2012 在内核利用率方面是否比 VS 2010 有更好的性能。

我对 I7 Extreme 1000 美元以上的价格犹豫不决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T07:15:28.010

我建议购买具有不错 SSD 和双倍 RAM 的**非**极端最新一代 i7。如果您跟踪文件系统，Visual Studio 实际在做什么，您会看到它正在读取和写入**大量文件**。这些文件中的大部分在连续第二次构建期间被缓存，但**SSD 和足够的 RAM 似乎是**等式中最重要的加速组件，**四核**i5 或 i7 就足够了，最好使用超线程和**VT**技术如果您想稍后运行 64 位虚拟机。

我还注意到，按照正确的指南，在 bios 中将旧计算机从**IDE 更改为 AHCI ，编译性能得到了不错的升级。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T17:35:44.147

Visual Studio 可以选择最大并行构建数量 - 它们使用任意数量的 CPU 内核。

但是，在决定购买哪个 CPU 时，您不应该过分关注此选项。最新的 Intel 处理器使用 Turbo Boost 来加速使用少于最大内核数的进程。此外，Extreme 系列非常昂贵，性能却没有太大提升。较低的型号通常可以超频并匹配更昂贵的型号。

但是，如果您真的觉得您的编译时间太长，您应该看看[IncrediBuild](http://www.google.pl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=http://www.xoreax.com/&ei=QHLbT97bFI_DtAakz5HECQ&usg=AFQjCNHaEXl1dzULEg88k__dwvG3pBP8tA) - 我自己使用过它，并且必须说它确实加快了构建过程。它能够真正了解您的系统规范并使用所有可能的资源，还可以使用远程构建服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T13:58:32.787

如果您正在构建大型 C++ 项目，您需要尽可能多的内核！例如，在我的带有 SSD 驱动器的八核机器上构建 Qt 4.8.3 确实花费了不到两个小时 - o 带有 HDD 的 2 核机器花费了 20 多个小时

使用[BlueGo](https://bitbucket.org/Vertexwahn/bluego/src/default/)，您可以测量在您的系统上构建 Qt 或 boost 需要多长时间 - 因此您可以将其用作基准来了解您的系统是否适合构建大型 C++ 项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T16:33:07.983

当 VS 2012 只有 32 位时，为什么内存如此重要？也许如果您打开了 10 个不同的项目。否则 8 GB 应该绰绰有余吧？也许内存速度更重要，但我也读到任何超过 1600MHz 的东西都是浪费。我猜最好的东西是 SSD，而像 OCZ 制造的 PCI Express 卡 SSD 将是最好的东西。

# c# - 如何编辑列表中的项目：C# 和 WPF

> ID：11054419
> 
> 赞同：1
> 
> 时间：2012-06-15T16:07:07.837
> 
> 标签：c#, wpf, list

好的，至此我已经学会了如何创建列表、查看列表中的项目以及使用列表中的项目。我现在想学习如何编辑列表中的信息。

这是我的清单：

```
 class ObjectProperties
        {
            public string ObjectNumber { get; set; }
            public string ObjectComments { get; set; }
            public string ObjectAddress { get; set; }

        }

        List<ObjectProperties> Properties = new List<ObjectProperties>(); 
```

这就是我向列表添加值的方式：

```
 ObjectProperties record = new ObjectProperties
            {
                ObjectNumber = txtObjectNumber.Text,
                ObjectComments = txtComments.Text,
                ObjectAddress = addressCombined,
            };

            Properties.Add(record); 
```

我希望用户使用文本框（txtUpdateObjectNumber）输入他们想要更新的数字。然后，我想将该数字与存储在 record.ObjectNumber 中的值进行比较，然后如果存在，我想替换 record.ObjectNumber 和 record.ObjectComments 中的信息，其中 record.ObjectNumber == txtUpdateObjectNumber。如果您需要我详细说明任何事情，请告诉我。任何帮助，将不胜感激。谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:19:45.727

要查找列表项，请使用 linq：

```
ObjectProperties opFound = Properties.Find(x => x.ObjectNumber == txtUpdateObjectNumber.Text); 
```

或委托表格：

```
ObjectProperties opFound = Properties.Find(delegate (ObjectProperties x) { return x.ObjectNumber == txtUpdateObjectNumber.Text; }); 
```

在列表中找到项目后，您对 所做的任何更改`opFound`（包括`ObjectNumber`）都将保留在列表中。

# nginx - nginx 为特定用户显示一个 html 页面

> ID：11054422
> 
> 赞同：0
> 
> 时间：2012-06-15T16:07:35.250
> 
> 标签：nginx, rewrite

我想为某些国家/地区显示该服务不可用的页面，需要显示他们访问的任何 URL，我该怎么做？

表示用户类型：domain.com/whatever 我们将始终显示来自静态页面的内容不可用.html 或转发给他们。静态内容文件位于另一个根目录中。

```
if ($allow_visit = no) {
  rewrite ^(.*)$ /unavailable.html last;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:39:42.760

您正在谈论[nginx Geo 模块](http://wiki.nginx.org/HttpGeoModule)。文档还包含有关如何创建自己的基于 MaxMind 的配置文件的链接。

# prolog - 如何设计和加载我的 Prolog 源文件，这样我就不必手动 use_module？

> ID：11054424
> 
> 赞同：0
> 
> 时间：2012-06-15T16:07:42.163
> 
> 标签：prolog, swi-prolog

我有一个源文件 openpage.pl，我在其中调用 use_module/1 来“导入”SWI-Prolog 的 http_open/3：

```
use_module(library(http/http_open)).

request(URL, In) :- http_open(URL, In, []),
    copy_stream_data(In, user_output),
    close(In). 
```

它毫无怨言地加载。但是，尽我所能，我无法按照其中的规则运行它。

```
?- [openpage].
% openpage compiled 0.00 sec, 1,828 bytes
true.

?- request('http://www.google.com', In).
ERROR: request/2: Undefined procedure: http_open/3
?- use_module(library(http/http_open)).
true.

?- request('http://www.google.com', In).
ERROR: request/2: Undefined procedure: http_open/3
?- make.
% Scanning references for 1 possibly undefined predicates
Warning: The predicates below are not defined. If these are defined
Warning: at runtime using assert/1, use :- dynamic Name/Arity.
Warning: 
Warning: http_open/3, which is referenced by
Warning:    status/2 at /home/dale/sesame_test/prolog/openpage.pl:16
Warning:    request/2 at /home/dale/sesame_test/prolog/openpage.pl:3
Warning:    modified/2 at /home/dale/sesame_test/prolog/openpage.pl:7
true.

?- [openpage].
% openpage compiled 0.00 sec, 616 bytes
true.

?- request('http://www.google.com', In).
ERROR: request/2: Undefined procedure: http_open/3
?- 
[forced] Action (h for help) ? exit 
```

所以在我的下一个会话中，我在加载源文件之前调用 use_module/1 ，一切都很好：

```
?- use_module(library(http/http_open)).
%  library(uri) compiled into uri 0.00 sec, 199,772 bytes
%  library(readutil) compiled into read_util 0.00 sec, 10,312 bytes
%  library(socket) compiled into socket 0.00 sec, 6,376 bytes
%  library(option) compiled into swi_option 0.00 sec, 7,748 bytes
%  library(base64) compiled into base64 0.00 sec, 9,776 bytes
%  library(debug) compiled into prolog_debug 0.01 sec, 12,056 bytes
% library(http/http_open) compiled into http_open 0.01 sec, 282,844 bytes
true.

?- [openpage].
% openpage compiled 0.00 sec, 1,380 bytes
true.

?- request('http://www.google.com/', In).
<!doctype html><html itemscope itemtype="http://schema.org/WebPage">
...
In = <stream>(0x9366508). 
```

如何设置和执行我的文件，以便在加载我自己的代码之前不需要这个手动加载模块的步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:41:27.067

尝试：

```
:- use_module(library(http/http_open)). 
```

在您的源文件中。

# zend-framework - Zend 框架路由技术

> ID：11054425
> 
> 赞同：0
> 
> 时间：2012-06-15T16:07:42.930
> 
> 标签：zend-framework, routing

我想知道这种在 Zend Framework 中设置路由的方法是否被认为是一种合理的方法——我对使用 ZF 很陌生。

在我的引导文件中，我设置了一个方法，如下所示：

```
protected function _initRouting()
{
    $zfc  = Zend_Controller_Front::getInstance();
    $router = $zfc->getRouter();

    $router->addRoute(
        'home',
        new Zend_Controller_Router_Route(
            '', 
            array(
                'controller' => 'index',
                'action' => 'index'
            )
        )
    );

    $router->addRoute(
        'saveStory',
        new Zend_Controller_Router_Route(
            'save-story/:date/:seolink/:saveStory', 
            array(
                'controller' => 'story',
                'action' => 'index',
                'saveStory' => 1
            )
        )
    ); 
```

等等我所有的路线。

这很好用，我喜欢这样指定路由的清晰性，但有一种烦人的感觉，更有经验的 ZF 程序员会告诉我这不是最好的方法，我不应该在引导程序中这样做，我应该指定路由在单独的配置文件中。如果是这种情况，配置文件将采用什么形式以及我将如何以及在哪里阅读它。

任何建议将不胜感激......因为我的技术有效，所以这个问题更像是一个风格问题 - 什么是最“优雅”的方法......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:16:53.080

这完全取决于个人喜好。和你一样，我更喜欢在代码中定义我的路由，但有些人更喜欢配置文件（如果你想尝试这个，手册中有几个例子）。

# php - 发送电子邮件问题

> ID：11054435
> 
> 赞同：0
> 
> 时间：2012-06-15T16:08:21.107
> 
> 标签：php

我是php的菜鸟，所以请原谅我的无知。我已经创建了 php 表单，它工作正常，除了一件事。当我收到我的邮件时，它说它是从**任何人**发送的，我不知道我该如何解决这个问题，所以我寻求一点帮助！谢谢！！！
这是我的代码：

```
 <?php  

    if (isset($_POST['Submit'])) {  

        if (!empty($_POST['name'])) {  
            $_POST['name'] = filter_var($_POST['name'], FILTER_SANITIZE_STRING);  
            if ($_POST['name'] == "") {  
                $errors .= 'Molimo unesite Vaše ispravno ime.';  
            }  
        } else {  
            $errors .= '<p>Molimo unesite Vaše ime.</p>';  
        }  

        if (!empty($_POST['email'])) {  
            $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);  
            if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {  
                $errors .= "$email is <strong>NIJE</strong>  valjana email adresa.<br/><br/>";  
            }  
        } else {  
            $errors .= '<p>Molimo unesite  email adresu.</p>';  
        }  

        if ($_POST['message'] != "") {  
            $_POST['message'] = filter_var($_POST['message'], FILTER_SANITIZE_STRING);  

        }  

        if (!$errors) { 

            $mail_to = 'dejo.dekic@yahoo.com';  
            $subject = 'Kontakt';  
            $tema = 'Info';
            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers  = 'Od: ' . $_POST['name'] . "\n"; 
            $headers .= 'Email: ' . $_POST['email'] . "\n";  
            $headers .= "Poruka:\n" . $_POST['message'] . "\n\n";  

            $user = $_POST['email'];
            $poruka ='Vaš kontakt je uspjesno zaprimljen! Odgovorit ću vam u najkraćem mogućem roku. Hvala! Molimo ne odgovarajte na ovu poruku. Ova poruka je automatska.';
            mail($mail_to, $subject, $headers, "Content-Type: text/plain; charset=UTF-8;");  
            mail($user, $tema, $poruka, "Content-Type: text/plain; charset=UTF-8;"); 

            echo "<div style='color:white;margin:0px auto;padding-top:20px;width:290px;background-color:white;font-weight:bold;text-align:center;'><p>Hvala Vam na kontaktu!</p></div>";

        } else {  
            echo '<div class="errors">' . $errors . '<br/></div>';  

        }  
    }  

?> 
```

这就是它在我的雅虎邮件中的样子：http: [//www.homepagepays.robertpeic.com/yahoo.png](http://www.homepagepays.robertpeic.com/yahoo.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:12:38.403

```
$from = 'yourdesiredemail@here.com';
$headers .= "From: " . $from . "\r\n"; 
```

只需要添加到标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:15:13.030

经过一番努力，我在您的帮助下设法解决了这个问题：）因此，如果有人遇到同样的问题，我将发布解决方案。谢谢！注意：***$add_headers 和内部邮件功能：-fmail@robertpeic.com***这是我的完整代码：

```
 if (isset($_POST['Submit'])) {  

        if (!empty($_POST['name'])) {  
            $_POST['name'] = filter_var($_POST['name'], FILTER_SANITIZE_STRING);  
            if ($_POST['name'] == "") {  
                $errors .= 'Molimo unesite Vaše ispravno ime.';  
            }  
        } else {  
            $errors .= '<p>Molimo unesite Vaše ime.</p>';  
        }  

        if (!empty($_POST['email'])) {  
            $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);  
            if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {  
                $errors .= "$email is <strong>NIJE</strong>  valjana email adresa.<br/><br/>";  
            }  
        } else {  
            $errors .= '<p>Molimo unesite  email adresu.</p>';  
        }  

        if ($_POST['message'] != "") {  
            $_POST['message'] = filter_var($_POST['message'], FILTER_SANITIZE_STRING);  

        }  

        if (!$errors) { 

            $mail_to = 'dejo.dekic@yahoo.com';  
            $subject = 'Kontakt';  
            $tema = 'Info';
            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers .=  "Content-Type: text/plain; charset=UTF-8" . "\r\n";
            $headers .= 'Od: ' . $_POST['name'] . "\n"; 
            $headers .= 'Email: ' . $_POST['email'] . "\n";  
            $headers .= "Poruka:\n" . $_POST['message'] . "\n\n"; 
            $add_headers = 'From: mail@robertpeic.com' . "\r\n". "Return-path: mail@robertpeic.com" . "\r\n";

            $user = $_POST['email'];
            $poruka ='Vaš kontakt je uspjesno zaprimljen! Odgovorit ću vam u najkraćem mogućem roku. Hvala! Molimo ne odgovarajte na ovu poruku. Ova poruka je automatska.';
            mail($mail_to, $subject, $headers, $add_headers, "-fmail@robertpeic.com");  
            mail($user, $tema, $poruka, $add_headers, "-fmail@robertpeic.com"); 

            echo "<div style='color:white;margin:0px auto;padding-top:20px;width:290px;background-color:white;font-weight:bold;text-align:center;'><p>Hvala Vam na kontaktu!</p></div>";

        } else {  
            echo '<div class="errors">' . $errors . '<br/></div>';  

        }  
    }  

?> 
```

这就是它现在在我的雅虎邮件中的样子：http: [//www.homepagepays.robertpeic.com/yahoo2.png](http://www.homepagepays.robertpeic.com/yahoo2.png)

# android - 向 ListView 添加新行会使上面的行消失

> ID：11054436
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:08:25.207
> 
> 标签：android, listview, baseadapter

我有一个使用自定义 BaseAdapter (MyBaseAdapter) 填充的 ListView ：

```
public class MyBaseAdapter extends BaseAdapter
{

    private View renderer;

    List<MyItemModel> items;

    public MyBaseAdapter(View renderer) {
        this.renderer = renderer;
    }

    public void setModel(List<MyItemModel> items)
    {

        this.items = items;
        notifyDataSetChanged();
    }

    @Override
    public int getCount()
    {

        return items != null ? items.size() : 0;
    }

    @Override
    public Object getItem(int position)
    {

        return items != null ? items.get(position) : null;
    }

    @Override
    public long getItemId(int position)
    {

        return items != null ? items.get(position).id : -1;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {

        if (convertView == null)
        {
            convertView = renderer;
        }
        MyItemModel item = items.get(position);
        // replace those R.ids by the ones inside your custom list_item layout.
        TextView timeText = (TextView) convertView.findViewById(R.id.timeText);
        timeText.setText(item.time);

        ToggleButton button = (ToggleButton) convertView.findViewById(R.id.toggleButton);
        button.setOnClickListener(item.listener);

        ImageView coinImage = (ImageView) convertView.findViewById(R.id.coinImage);
        coinImage.setImageResource(R.drawable.ic_refresh);

        return convertView;
    }

} 
```

它是使用这些项目填充的

```
public class MyItemModel
{

String time;
long id;

OnClickListener listener = new OnClickListener(){
    @Override
    public void onClick(View v) {
        Log.d("app", "whatever");
    }
};

} 
```

我使用如下代码从我的 Main 类中添加项目：

```
private void setUpList()
{

    myListModel = new ArrayList<MyItemModel>();

    MyItemModel item = new MyItemModel();
    item.time = "12:00";
    item.id = 0;
    myListModel.add(item);

   //if I add a few more items here, it still only shows the bottom one

    LayoutInflater li = getLayoutInflater();
                      //alarm_list_item is a table row 
    View view = li.inflate(R.layout.alarm_list_item, null);

    adapter = new MyBaseAdapter(view);
    adapter.setModel(myListModel);
    setListAdapter(adapter);
    listView = getListView();
    listView.setTextFilterEnabled(true);

} 
```

这工作正常，直到我在发生这种情况时将另一个项目添加到列表中（注意它上面的行是空白的。如果我添加多行，除了最后一行之外的所有行都是空白的，就像这样。）

有什么想法吗？

![截屏](../Images/bd63ce47094b3e42caee63e4ecc016a6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:27:34.613

你到底在做什么？/想做什么？

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{

    if (convertView == null)
    {
        convertView = renderer;
    }
    //...//
} 
```

只有您的最后一个项目才能获得渲染视图！

尝试添加 100 个项目（以启用滚动）并滚动！你会看到它有多棒。

* * *

*解决方案：* 每次您的 convertView 为空时，您都必须为新视图充气。返回相同的视图将显示最后`getView`调用的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:40:25.647

我不知道您的问题的背景，但是您的适配器接缝中的成员*渲染器*有点奇怪。它使*listView*中的所有项目视图成为创建的第一个 itemView。

我认为您可以尝试修改您的*getView(int position, View convertView, ViewGroup parent)*方法，如下所示：

```
public class MyBaseAdapter extends BaseAdapter
{

    //private View renderer;
    private Context mContext;

    List<MyItemModel> items;

    public MyBaseAdapter(Context context) {
        this.mContext = context;
    }

    public void setModel(List<MyItemModel> items)
    {

        this.items = items;
        notifyDataSetChanged();
    }

    @Override
    public int getCount()
    {

        return items != null ? items.size() : 0;
    }

    @Override
    public Object getItem(int position)
    {

        return items != null ? items.get(position) : null;
    }

    @Override
    public long getItemId(int position)
    {

        return items != null ? items.get(position).id : -1;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {

        if (convertView == null)
        {
            LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = li.inflate(R.layout.alarm_list_item, null);
        }
        MyItemModel item = items.get(position);
        // replace those R.ids by the ones inside your custom list_item layout.
        TextView timeText = (TextView) convertView.findViewById(R.id.timeText);
        timeText.setText(item.time);

        ToggleButton button = (ToggleButton) convertView.findViewById(R.id.toggleButton);
        button.setOnClickListener(item.listener);

        ImageView coinImage = (ImageView) convertView.findViewById(R.id.coinImage);
        coinImage.setImageResource(R.drawable.ic_refresh);

        return convertView;
    }

} 
```

并在您的*setUpList()*中，在构建适配器时将您的主机活动作为参数传递：

```
private void setUpList(){

    MyItemModel item = new MyItemModel();
    item.time = "12:00";
    item.id = 0;
    myListModel.add(item);

    LayoutInflater li = getLayoutInflater();
                  //alarm_list_item is a table row 
    View view = li.inflate(R.layout.alarm_list_item, null);

    //adapter = new MyBaseAdapter(view);
    adapter = new MyBaseAdapter(Activity.this);
   adapter.setModel(myListModel);
    setListAdapter(adapter);
    listView = getListView();
    listView.setTextFilterEnabled(true);

} 
```

愿它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:18:52.580

您可能想要移到方法`myListModel = new ArrayList<MyItemModel>();`之外`setUpList()`，按照您拥有的方式，每次调用时都会创建一个新数组，`setUpList()`因此数组中始终只有一个项目，如果将数组声明移到方法之外，则项目将正确添加到数组中

```
myListModel = new ArrayList<MyItemModel>();

private void setUpList(){

    MyItemModel item = new MyItemModel();
    item.time = "12:00";
    item.id = 0;
    myListModel.add(item);

    LayoutInflater li = getLayoutInflater();
                  //alarm_list_item is a table row 
    View view = li.inflate(R.layout.alarm_list_item, null);

    adapter = new MyBaseAdapter(view);
    adapter.setModel(myListModel);
    setListAdapter(adapter);
    listView = getListView();
    listView.setTextFilterEnabled(true);

} 
```

# ant - 是否有任何现有的 ant buildfile (build.xml) 浏览器？

> ID：11054438
> 
> 赞同：1
> 
> 时间：2012-06-15T16:08:36.747
> 
> 标签：ant, build, explorer, build.xml

这个问题说明了一切。我正在寻找一个`build.xml`文件浏览器，我可以轻松地从目标跳转到目标。目标树会很棒。我不确定这样的事情是否存在。

谷歌搜索没有帮助。所以我问我的同事。你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:26:29.993

IntelliJ IDEA 和 Eclipse 都提供了出色的 Ant 支持，包括构建文件大纲视图。

*   [Ant 和 Maven 集成](https://www.jetbrains.com/idea/features/ant_maven.html)（见后半部分）
*   [Eclipse 蚂蚁编辑器](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.user/reference/ref-anteditor.htm)

# php - PHPSESSID 在每个请求上都更改而不是持久化

> ID：11054440
> 
> 赞同：1
> 
> 时间：2012-06-15T16:08:46.157
> 
> 标签：php, ios, session

我有一个 iOS 应用程序向基于 PHP 的 Web 服务发送请求，以前一切正常，但最近我一直在丢失会话。

我检查了 cookie 并注意到 PHPSESSID 在我发送的每个请求上都会发生变化，而不是使用相同的请求，

在请求 #1 之后：`I am a cookie ! PHPSESSID = 9lsv80co96op3mg4tffpuoav22`
在请求 #2 之后：`I am a cookie ! PHPSESSID = nn3f3v32j598jbhsof0admc442`

我想知道是否有任何方法可以保留会话 ID，或者我只需要保存它并每次都发布它？我宁愿将此作为服务器端解决方案，因为如果我必须在应用程序本身中更改某些内容，Apple 需要一周到十天的时间才能批准它。

如果有任何配置可以帮助我保留 PHPSESSID 值，这对我很有帮助。

感谢您的帮助。谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:27:32.367

我相信您的应用程序没有保存 PHP 使用 PHPSESSID 发送的 cookie，因此它会为每个请求生成一个新的会话 ID。

# jquery - ASP 按钮不会触发

> ID：11054441
> 
> 赞同：0
> 
> 时间：2012-06-15T16:08:46.927
> 
> 标签：jquery, asp.net, aspbutton

我读过其他名称相似的帖子，但他们的问题都没有与我的匹配，他们的解决方案也没有解决我的问题。我有一个带有显示模式（ish）框的链接按钮字段的网格视图。因为链接按钮字段调用服务器端而不是客户端，所以我无法让 JQUERY 模式表单工作。相反，在链接按钮单击时，我会显示一个带有 CSS 的 asp 面板，使其看起来像模态（ish）。在该面板中，我有一个 asp 按钮，用于通过设置 panel.visible = false 来退出模式。

但是，当我单击“退出”按钮时，它永远不会调用隐藏面板的 btnExitProject_Click 子过程。通常在 Visual Studio 的设计模式下，我可以双击一个按钮，它会在服务器端代码中显示“onClick”事件；然而，现在它把我带到了 page_load 子。我不确定发生了什么事。页面上的其他按钮，在面板之外工作得很好，调用 jquery 函数的“加入项目”按钮（见图）也工作得很好。

```
<asp:Panel ID="pnlProjectInfo" runat="server" Visible="false">
    <div class="overlay"></div>
    <div class ="projectPanel">

        <span class="spanStyle">Project Code: </span><asp:Label ID="lblProjectCode" runat="server" Text="[proj code]" CssClass="lblStyle1"></asp:Label><br /><br />
        <span class="spanStyle">Entry Date: </span><asp:Label ID="lblEntryDate" runat="server" CssClass="lblStyle1"></asp:Label><br /><br />
        <span class="spanStyle">Project: </span><br />
        <asp:TextBox ID="tbProject" runat="server" Width="500px" CssClass="tbStyle1"></asp:TextBox><br />
        <span class="spanStyle">Organization: </span><br />
        <asp:TextBox ID="tbOrgName" runat="server" Width="395px" CssClass="tbStyle1" Enabled="false"></asp:TextBox><br />
        <span class="spanStyle">Project Leader: </span><br /><asp:TextBox ID="tbProjLeader" runat="server" Width="196px" CssClass="tbStyle1"></asp:TextBox><br />
        <span class="spanStyle">Description: </span><br /><asp:TextBox ID="tbDescription" runat="server" 
            Height="50px" Width="500px" TextMode="MultiLine" CssClass="tbStyle1"></asp:TextBox><br />
        <span class="spanStyle">Comment: </span><br /><asp:TextBox ID="tbComment" runat="server" 
            Height="50px" Width="500px" TextMode="MultiLine" CssClass="tbStyle1"></asp:TextBox><br />

        <br />

        <span class="spanStyle">Project Members: </span>
        <br />

         <asp:GridView ID="gvProjectMembers" runat="server" AutoGenerateColumns="False" 
            CellPadding="3" 
            Width="512px" Font-Names="Arial" GridLines="Vertical" BackColor="White" 
            BorderColor="#333333" BorderStyle="Solid" BorderWidth="1px" 
            CssClass="projMembersGV">
            <RowStyle BackColor="#ecf1ef" ForeColor="Black" HorizontalAlign="Center" 
                 VerticalAlign="Top" />
            <Columns>
                <asp:BoundField DataField="individual_first_name" HeaderText="First Name" />
                <asp:BoundField DataField="individual_last_name" HeaderText="Last Name" />
                <asp:BoundField DataField="percentage_effort" HeaderText="Effort"  />
                <asp:BoundField DataField="participation_description" 
                    HeaderText="Participation" />
                <asp:BoundField DataField="active_indicator" HeaderText="Active" />
                <asp:CommandField ButtonType="Button" ShowEditButton="True" />
            </Columns>
            <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
            <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
             <EmptyDataTemplate>
                 No members assinged to this project in the database.
             </EmptyDataTemplate>
            <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <AlternatingRowStyle BackColor="#ecf1ef" />
        </asp:GridView>
         <br />
        <button id="create-user" type="button">Join Project</button> <!-- displays a jquery modal -->
        <asp:Button ID="btnExitProject" runat="server" Text="Close" CssClass="btnClose" CausesValidation="false" Enabled="true" />

    </div>
</asp:Panel> 
```

这是面板的外观： ![模态面板](../Images/e1062b4a517780e9bcbd794f98d02dcd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:14:44.813

您似乎没有将按钮单击事件与按钮连接起来。尝试从此更改您的代码：

```
<asp:Button ID="btnExitProject" runat="server" Text="Close" 
             CssClass="btnClose" CausesValidation="false" Enabled="true" /> 
```

对此：

```
<asp:Button ID="btnExitProject" runat="server" Text="Close" 
             CssClass="btnClose" CausesValidation="false" Enabled="true" OnClick="btnExitProject_Click" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:15:44.610

您尚未连接 ASP.NET 按钮来调用 btnExitProject_Click

```
<asp:Button ID="btnExitProject" runat="server" Text="Close" CssClass="btnClose" CausesValidation="false" Enabled="true" OnClick="btnExitProject_Click" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:43:00.440

我决定使用 JQuery 而不是服务器端的 onclick 事件。这实际上被证明是一个好主意，因为响应时间要快得多。

将我的 btnExitProject 替换为：

```
<input type="button" id="close_modal" value="Close"/> 
```

然后我在 $(document).ready(function() {

```
 $("#close_modal")
        .button()
        .click(function() {
            $("#<%=pnlProjectInfo.ClientID %>").hide();
        }); 
```

这只是说，当单击具有“close_modal”ID 的按钮时，我需要隐藏我的 asp 面板。因为面板是asp的，代码中给它的ID并不是实际读取的ID，所以我不得不`"#<%=pnlProjectInfo.ClientID %>"`引用面板。

谢谢你们的帮助！

# c++ - “for num in [1,4,5]” C++ 中的 Python 等价物？

> ID：11054444
> 
> 赞同：2
> 
> 时间：2012-06-15T16:08:59.547
> 
> 标签：c++, python, for-loop

在 C++ 中有直接的类似物吗？

```
for num in [1,4,5] : 
```

`num=1`使用, then `4`, then遍历循环`5`。如果我在这个循环中调用 continue ，它会转到下一个我可以调用它的号码。

C++中有类似的结构吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T16:11:42.943

在 C++11 中，以下是合法的：

```
for (auto num : {1,4,5})
{
    // loop body
} 
```

`{1,4,5}`这是一个实例`std::initializer_list<int>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T16:13:06.720

在 C++03 中，最接近的等价物是：

```
int values[] = {1,4,5};
for (int *p = values; p != values + sizeof(values) / sizeof(*values); ++p) {
    int num = *p;
    ...
} 
```

`std::end`当您不再需要它时，已添加到 C++11 中的一个常见定义是：

```
template <typename T, size_t N>
T *endof(T (&ra)[N]) {
    return ra + N;
} 
```

然后你像这样使用它：

```
int values[] = {1,4,5};
for (int *p = values; p != endof(values); ++p) {
    int num = *p;
    ...
} 
```

所以对于 C++03，简短的回答是“不”，没有类似的结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:10:15.130

A`vector<int>`及其前向迭代器。

**编辑：**

伙计，我的 C++ 生锈了...

```
#include <iostream>
#include <vector>

int main(int argc, char *argv[])
{
  int ints[] = {1, 4, 5};
  std::vector<int> v (ints, ints + 3);

  for (std::vector<int>::iterator i = v.begin(); i != v.end(); i++)
  {
    std::cout << *i << std::endl;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:11:41.213

类似的事情是创建这个整数的 stl-Vector 并使用 for 循环和迭代器对其进行迭代。但我认为，在 C++ 中做这件事不是很实用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T16:11:55.823

[Boost.Foreach](http://www.boost.org/libs/foreach/)是您正在寻找的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T16:22:24.737

正如 Ignacio 的回答中所述，来自标准模板库的向量是这里的方法。[cplusplus.com](http://www.cplusplus.com/reference/stl/vector/vector/)条目中的第一个示例似乎是您想要的。

# eclipse - 如何在 Eclipse 中为单个项目设置 2 个环境

> ID：11054446
> 
> 赞同：0
> 
> 时间：2012-06-15T16:09:03.207
> 
> 标签：eclipse, pydev

我正在跨两台计算机（一台 32 位和另一台 64 位）使用 pydev 项目。当我在环境之间切换时，我的计算机所需的库会从 Program files 目录移动到 Programs (x86)。这些库是第三方，我无法控制它们的放置位置。

如果我为这两个环境添加所有外部库，则会收到有关环境中不可用的其他库的错误。

有没有其他人遇到过这个问题，有没有办法让 eclipse 知道这不是问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:58:04.030

好吧，最简单的可能是配置多个解释器，每个解释器首先具有正确的路径，因此，实际项目在使用给定解释器时已经正确（注意：virtualenv 在这里可能很好）。

如果你想让它成为项目配置的一部分，你可以为此使用变量（参见下面的通用示例）：

假设你想要

/project/build/libs-32（32 位）

和

/project/build/libs-64（64 位）

因此，您必须配置您的项目（右键单击项目 > 属性 > PyDev - PYTHONPATH > 基于变量添加）

/project/build/libs-${平台}

然后，在您的解释器配置中（窗口 > 首选项 > pydev > 解释器 - python > 字符串替换变量 > 设置“平台”：“32”或“64”，具体取决于您的配置）

# c++ - Ubuntu 上的 Google 地球 C++ API 库错误

> ID：11054448
> 
> 赞同：1
> 
> 时间：2012-06-15T16:09:13.320
> 
> 标签：c++, linux, api, terminal, google-earth

我是这个论坛的新手，但是在尝试寻找解决此问题的方法时，我已经看过几次了。**我正在尝试使用我为 Ubuntu ( libkml-dev_1.2.0-1ubuntu6_amd64** )找到的 C++ API 库生成要在 Google Earth 中使用的 KML 文件。我使用命令**sudo apt-get install libkml-dev**安装了软件包，成功返回。之后，我使用命令行终端导航到示例文件夹以尝试使用命令**g++ helloworld.cc -o helloworld执行程序“helloworld.cc”**，但随后出现大量错误（主要声称 kmldom 是未定义的引用）。抱歉，我想附上文本文件，但不知道怎么做，所以我在下面提供了一个错误示例。我整周都在搜索，确保头文件确实包含在下载中，甚至就问题联系了谷歌地球开发人员（他们回答说他们与此无关，并重定向所有关于这个问题到 StackOverflow）。

有谁知道是什么导致了这个问题以及我能做些什么来解决这个问题，所以我可以继续前进吗？

* * *

/tmp/cc5u2JyV.o: 在函数`HelloKml(bool)': helloworld.cc:(.text+0x17): undefined reference to` kmldom::KmlFactory::GetFactory()' helloworld.cc:(.text+0x27): 未定义的对`kmldom::KmlFactory::CreateCoordinates() const' helloworld.cc:(.text+0x328): undefined reference to` kmldom::AsPoint(boost::intrusive_ptrkmldom::Element)' 的引用cc5u2JyV.o: 在函数`boost::intrusive_ptr<kmldom::Coordinates>::intrusive_ptr(kmldom::Coordinates*, bool)': helloworld.cc:(.text._ZN5boost13intrusive_ptrIN6kmldom11CoordinatesEEC2EPS2_b[_ZN5boost13intrusive_ptrIN6kmldom11CoordinatesEEC5EPS2_b]+0x3d): undefined reference to` kmlbase::intrusive_ptr_add_ref(kmlbase::Referent*)' /tmp/cc5u2JyV.o: 在函数`boost::intrusive_ptr<kmldom::Coordinates>::~intrusive_ptr()': helloworld.cc:(.text._ZN5boost13intrusive_ptrIN6kmldom11CoordinatesEED2Ev[_ZN5boost13intrusive_ptrIN6kmldom11CoordinatesEED5Ev]+0x23): undefined reference to` kmlbase::intrusive_ptr_release(kmlbase::Referent*)' /tmp/cc5u2JyV.o: 在函数`boost::intrusive_ptr<kmldom::Geometry>::intrusive_ptr(boost::intrusive_ptr<kmldom::Geometry> const&)': helloworld.cc:(.text._ZN5boost13intrusive_ptrIN6kmldom8GeometryEEC2ERKS3_[_ZN5boost13intrusive_ptrIN6kmldom8GeometryEEC5ERKS3_]+0x35): undefined reference to` kmlbase: :intrusive_ptr_add_ref(kmlbase::Referent*)' collect2: ld 返回 1 退出状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:25:50.200

当您编译使用库的应用程序时，您需要在应用程序编译时链接它。因此，请尝试使用以下参数：

要指定一个目录来搜索您的库，请使用 -L：

`-L/data[...]/lib`

要指定实际的库名称，请使用 -l：

`-labc` （链接 abc.a 或 abc.so）

要指定搜索包含文件的目录，请使用 -I：

`-I/data[...]/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-15T06:13:17.003

我找到了解决方案。问题是您错误地链接了 libkml。您应该找到头文件和库文件 (*.so) 的路径。我在这里找到了它们：

`/usr/include/kml/`（包括带有标题的dit），
`/usr/lib/x86_64-linux-gnu/`（库目录）。

我将 CMake 和 CMakeLists.txt 用于项目。使用 libkml 可能如下所示：

```
`cmake_minimum_required (VERSION 3.2)
# Set language standard
set(CMAKE_CXX_STANDARD "11")
project (test_proj)

add_definitions(-std=c++11)

# Set default build type to RelWithDebInfo if not specified
if (NOT CMAKE_BUILD_TYPE)
    message (STATUS "Default CMAKE_BUILD_TYPE not set using Release with Debug Info")
    set (CMAKE_BUILD_TYPE "RelWithDebInfo" CACHE
        STRING "Choose the type of build, options are: None Debug Release RelWithDebInfo MinSizeRel"
        FORCE)
endif()

# linking boost library
find_package(Boost COMPONENTS system filesystem thread REQUIRED)
if(NOT Boost_FOUND)
    message(SEND_ERROR "Failed to find boost.")
    return()
else()
    include_directories(${Boost_INCLUDE_DIRS})
endif()

add_executable(test_proj main.cpp)

set (LibKML_INCLUDE_DIRS /usr/include/kml/)
set (LibKML_LIBRARIES /usr/lib/x86_64-linux-gnu/libkmlbase.so /usr/lib/x86_64-linux-gnu/libkmlconvenience.so /usr/lib/x86_64-linux-gnu/libkmldom.so /usr/lib/x86_64-linux-gnu/libkmlengine.so /usr/lib/x86_64-linux-gnu/libkmlregionator.so /usr/lib/x86_64-linux-gnu/libkmlxsd.so)

message("LibKML is at: ${LibKML_INCLUDE_DIRS} and ${LibKML_LIBRARIES}")
message("Boost is at: ${Boost_INCLUDE_DIRS} and ${Boost_LIBRARIES}")

target_include_directories(test_proj 
PUBLIC 
${LibKML_INCLUDE_DIRS} 
${Boost_INCLUDE_DIRS} ) 

target_link_libraries(test_proj 
PUBLIC
${LibKML_LIBRARIES} ${Boost_LIBRARIES})

install(TARGETS test_proj EXPORT test_proj_export)
export(EXPORT test_proj_export FILE cmake/test_proj-targets.cmake)` 
```

# c# - 层次/树结构表的流畅 Nhinernate 映射

> ID：11054449
> 
> 赞同：0
> 
> 时间：2012-06-15T16:09:15.033
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有一个分层（树形结构）SQL Server 表 TEmployee 与以下列

```
Id bigint identity(1,1) not null
FirstName nvarhcar(50) not null
LastName nvarchar(50) not null
ManagerId bignint null 
```

列 ID 是主键。每个员工都有或拥有一名经理；如果他/她这样做了，那么他/她自己的 ManagerId 列的值将引用另一个经理员工行的值 Id。例如，表 TEmployee 的一些条目：

```
1 John Doe    null
2 Jane Smith  1
3 Keith Johnson 1
4 Fox   Lynson  2
5 Kim   McFeinstein 4
... 
```

员工 John Doe 没有经理。但他是简·史密斯和基思·约翰逊的经理。Kim McFeinstein 的经理是 Fox Lynson。

我想知道如何使用 Fluent NHibernate 映射编写域模型类和映射类。另外，我想在映射类的代码中了解级联删除的好方法。换句话说，如果我删除 John Doe，那么它的所有子项（由 John Doe 管理的员工）也将被递归删除。

请帮忙。谢谢你。

域模型类，但我不确定它的源代码：

```
public class Employee
{
   public virtual long Id {get;set;}
   public virtual string FirstName {get;set;}
   public virtual string LastName {get;set;}
   public virtual Employee  Manager {get;set;}  // not sure here ???
} 
```

映射类，但我也不确定它的源代码：

```
public class EmployeeMap : MapClass<Employee>
{
   Table("TEmployee");
   SchemaAction.None();
   // not sure about following codes
   ???
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:19:33.740

```
public class Employee
{
   public virtual long Id {get; private set;}
   public virtual string FirstName {get;set;}
   public virtual string LastName {get;set;}
   public virtual Employee Manager {get;set;}
   public virtual ICollection<Employee> ManagedEmployees {get; private set;}
}

public class EmployeeMap : MapClass<Employee>
{
   Table("TEmployee");
   SchemaAction.None();

   Id(e => e.Id).GeneratedBy.HiLow("1000");
   References(e => e.Manager, "ManagerId");
   HasMany(e => e.Manager).KeyColumn("ManagerId").Cascade.All();
} 
```

# jquery - Jquery Validation - Custom Method > 确定是否选中了一组单选按钮中的任何一个

> ID：11054450
> 
> 赞同：0
> 
> 时间：2012-06-15T16:09:16.723
> 
> 标签：jquery, validation, jquery-validate, radio-button

我有一组以形式的广播按钮，当检查某些按钮时，显示了一些其他字段，需要添加验证。我试图通过使用自定义方法设置带有条件的验证规则来做到这一点。注意：- 一次只能检查组中的一个单选按钮（此行为在其他地方处理）

**定义单选按钮以触发其他字段的显示：-**

```
showEmployerDetails = $("#employerType_0,#employerType_2,#employerType_8,#employerType_4,#employerType_8,#employerType_6,#employerType_5");

employerInital = showEmployerDetails.is(":checked"); 
```

*注意 :- 这些变量在脚本中的其他地方使用来执行一些显示/隐藏行为，所以我不想在其他地方重新定义。*

**自定义方法**

```
$.validator.addMethod("employdetailsreq", function(value) {
return employerInital;
}, "Please supply details"); 
```

**验证规则**

```
$("#myform_1").validate({
        rules: {
        field1: {employdetailsreq : true },
        field2: {employdetailsreq : true },
        field3: {employdetailsreq : true },
        field4: {employdetailsreq : true },
        field5: {employdetailsreq : true }
        }

                }); 
```

如果选中任何单选按钮，我的目标是让变量“ *employerInital* ”返回真或假。不用说，这是行不通的。我想我把事情复杂化了。

**附加查询：-**

我还有其他规则（为清楚起见此处省略），如下所示：-

```
field__238: {required: "#vehicleuse_1:checked" }, 
```

我可以做类似的事情：-

```
field1: {required:  "employdetailsreq : true" } 
```

或者这与： -

```
field1: { employdetailsreq : true } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:13:40.190

该变量仅包含一个值，它不受用于计算该值的属性的约束，因此当任何复选框被选中或未选中时，它都不会更改其值。您必须重新选中复选框才能获得当前状态：

```
$.validator.addMethod("employdetailsreq", function(value) {
  return showEmployerDetails.is(":checked");
}, "Please supply details"); 
```

# ios - iOS - 并发访问内存资源

> ID：11054457
> 
> 赞同：5
> 
> 时间：2012-06-15T16:09:25.850
> 
> 标签：ios, xcode, multithreading, locking, multitasking

我的应用程序从服务器、数据和数据描述符下载了几个资源。这些由用户操作触发的下载可以同时执行，比方说，一次最多可以下载 50 次。所有这些异步任务最终都会在内存中创建对象（例如，将叶子附加到数据结构中，例如将键添加到可变字典或对象到数组）。我的问题是：这会导致稳定性问题吗？例如，如果多个同时执行的任务尝试将键添加到同一个字典中，我是否应该处理这种情况，放置某种锁？如果我实现一个在数组中查找图形元素的 for 循环，其他正在运行的任务是否有可能在循环“期间”更改数组内容？关于这种多任务处理的任何参考或主要的一般方向，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:37:17.580

取决于您如何处理下载 - 如果您使用 NSURLConnection 它会为您处理单独的线程/并发，并且*您的*代码是可重入的，因此您不必担心同时操作。如果您正在创建自己的线程，您可能会遇到问题。

编辑：您的代码在主线程（主运行循环）中运行，假设您有一个 NSURLConnection 也在运行，然后它将在单独的线程中运行。但是，处理连接正在进行时发生的事件的委托代码在您的运行循环中运行，而不是在其他线程中。这意味着您的代码一次只能执行一件事。连接成功的方法不会与您的任何其他代码*同时被调用。*如果你有一个 for 循环运行，那么它会阻塞你的主线程，直到它完成循环，同时如果连接完成而 for 循环仍在运行，那么你的委托代码将在循环完成后才会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:56:00.037

您可能需要查看 Grand Central Dispatch (GCD) 和障碍物块。障碍块将允许您在后台做您想做的事情并“锁定”资源。

在 GCD 上查看 Apple 文档和 Mike Ash 的博客文章[。](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)

基本要点是您使用您创建的并发队列来执行读取并使用屏障块来阻止对该资源的所有访问以进行写入。好东西。

祝你好运

蒂姆

# jquery - jQuery ajax 成功和错误方法args 颠倒了，为什么？

> ID：11054460
> 
> 赞同：1
> 
> 时间：2012-06-15T16:09:33.660
> 
> 标签：jquery, ajax, arguments, consistency

我的 jQuery fu 是新的，所以如果这个问题确实如此，请原谅显而易见的问题。

jQuery ajax 文档显示错误和成功定义如下：

```
error(jqXHR, textStatus, errorThrown)
success(data, textStatus, jqXHR) 
```

这让我有点一致性，因为默认情况下，服务器端我返回状态（200、401、404 等）以及 JSON 编码响应，这可能是 json 错误或成功字符串、数组、对象等等。

基本上发生的事情是成功接收json字符串（coffeescript）

```
success: (data) ->
  $('#status').html( data ) 
```

我可以直接打印 json 响应字符串，这很令人困惑，因为等效的错误版本需要我解析 json 字符串并访问数据对象的 responseText 属性：

```
error: (data) ->
  $('#status').html( jParse(data.responseText) ) 
```

那么，我怎样才能让客户端镜像服务器端的一致性呢？即响应 json 服务器端并知道我需要在客户端解析/访问对象属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:11:29.007

Ok, a bit clearer now:

ajax success's first argument, data, is automatically parsed according to mime type if no dataType param option was set.

That explains why, when handling a json map containing say, an order number, I *do not have to parse it* client-side, could simply refer to `data.orderNum`

On the other hand, there is no such mime type inference on ajax error's first argument, jqXHR, which explains why *I do have to parse* the reply prior to referencing attribs like `data.responseText`.

Probably old hat to many, but good to know what to expect from success/error, was getting double, double quoted string replies and other oddities...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:12:29.573

据我了解，在 HTTP 状态代码中指示成功（或其他）的“RESTful”服务中，您不应该将有意义的内容放入错误条件的 HTTP 正文中。而是将其放在`40x`错误代码的文本中。

# php - php 变量名和大括号

> ID：11054465
> 
> 赞同：3
> 
> 时间：2012-06-15T16:09:57.887
> 
> 标签：php

这里问了一个类似的问题：[PHP variable like $myvar-test is not valid?](https://stackoverflow.com/questions/2690858/php-variable-like-myvar-test-is-not-valid)

我已经阅读了[PHP Userland Naming Guide](http://www.php.net/manual/en/userlandnaming.php) 它说：

> > 变量名称遵循与 PHP 中其他标签相同的规则。有效的变量名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为正则表达式，它会这样表达：'[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'

我很好奇的是这个[答案](https://stackoverflow.com/a/2690951/671191)，以及为什么这些变通办法有效：`${'0x00'}`，或者这个：`${'900'}`，或者这个`${'bad-name'}`。

我的问题有两个部分......为什么这行得通？我的问题的第二部分：它们会被视为有效变量还是会被视为其他东西（我不是在问它们是否有效，而是在问它们将被归类为什么。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:20:33.157

根据此链接：[http ://cowburn.info/2008/01/12/php-vars-curly-braces/](http://cowburn.info/2008/01/12/php-vars-curly-braces/)

答案是：

*   问题1：因为大括号内的内容不仅仅是变量的名称，而是`$_GLOBALS`数组中的键/值对。
*   问题 2：它们将成为您脚本的 $Globals 的一部分，但您无法使用常规`$var`符号访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:22:01.137

我相信解析器实际上并没有验证 {} 中的表达式。尽管如此，PHP 内部使用 HashTable 来存储变量，因此任何字符串或数字都是有效的。

# c# - facebook c# sdk 和 windows 8 发布预览

> ID：11054466
> 
> 赞同：0
> 
> 时间：2012-06-15T16:10:04.207
> 
> 标签：c#, c#-4.0, build, facebook-c#-sdk

我下载了 facebook c# sdk 的最新位，并且存在构建错误，所以我想我为时过早。任何想法何时可能有稳定的构建。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:18:51.087

看起来我的错误是未能使用 Nuget，我也有一个旧示例，但我可以使用[http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-上的示例登录First-Facebook-Application-v6.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx)

# c# - PropertyGrid 清除一个值

> ID：11054473
> 
> 赞同：1
> 
> 时间：2012-06-15T16:10:34.397
> 
> 标签：c#, .net, winforms, propertygrid

我有一个以空值开头的属性网格。这些值是可选的。如果用户不小心在其中一个属性中输入数据并将其清除，则网格不允许他们清除它。例如，如果属性是 uint32 类型，则它需要 uint32 范围内的内容。如何让网格接受为空的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:21:48.917

您可以使用可为空的类型（例如`int?`）声明您的属性，以使 propertygrid 接受空值。可空类型表示基础数据类型加上空值的范围。

这是一个使用可为空的 int 的小示例：

```
// Your class for which the property grid should display properties
public class YourClass
{    
  public int? MyIntValue        // Nullable int
  {
    get;set;     
  }

  public string MyStringValue
  {
    get;set;
  }
}

public partial class Form1 : Form
{
  private YourClass yourClass;

  // In your winform
  private void Form1_Load(object sender, EventArgs e)
  {
    yourClass = new YourClass();

    // Set selected object
    propertyGrid1.SelectedObject = yourClass;
  }
} 
```

# java - 推荐的最大堆内存使用水平是多少？推荐的垃圾收集时间？

> ID：11054476
> 
> 赞同：2
> 
> 时间：2012-06-15T16:10:50.457
> 
> 标签：java, garbage-collection, heap-memory, alarm

我最近发现我的一项服务在垃圾收集中花费了大量时间，因为最大堆大小太小了。该服务在我开始之前就在那里，所以我不知道堆大小很小。如果它超过某个点，我想设置一个警报来警告我，但我也不想给它比它实际需要的更多的资源。您认为对于垃圾收集和堆使用百分比应该警惕的合理水平是多少？

我在想平均堆使用量的警报大约为 85%，gc 为 100 毫秒/5 分钟。

我知道这是基于要求和硬件，但我真的在寻找一些基准或标准来做出决定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:05:24.307

亚历克斯洛克伍德的回答是这样的：

> 建议的堆内存使用和 GC 时间的“最大级别”*越少越好*。

那是误导。我实际上建议相反。尝试压缩堆大小是一个坏主意，因为这将导致您的应用程序更频繁地运行 GC，并且花费更少的时间（平均而言）做有用的工作。

问题基本上是这样的。当 JVM 用完空间来分配对象时，就会运行经典（非并发）GC。然后它遍历非垃圾对象，将它们复制到不同的“空间”。运行 GC 周期的处理器时间很大程度上取决于非垃圾的数量......但它实现的有用工作（它释放的空间量）与`heapsize - nongarbage`. 因此，当您压缩堆大小时，您会减少 GC 所做的有用工作量……对于相同的处理器时间消耗。

原来的问题是这样说的：

> 我在想平均堆使用量的警报大约为 85%，gc 为 100 毫秒/5 分钟。

在绝对级别的 GC CPU 使用率上设置监视器/警报可能没有用。GC 时间将取决于服务器活动以及 GC 效率。您不希望每次服务器繁忙时 GC 警报都会响起。

85% 的平均堆使用率是值得警惕的合理水平，尽管再次将警报设置为固定水平可能会产生过多的错误警报。

另一种方法是使用 JVM 选项设置“GC 所用时间百分比”阈值，并将其与“在 OutOfMemoryException 上杀死 JVM”选项相结合，并在服务器的启动脚本中放置一个自动重启循环。然后监视重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:17:30.850

这完全取决于您编写的上下文和程序。

建议的堆内存使用和 GC 时间的“最大级别”*越少越好*。

# c# - 通过文本框在 sql server 2005 中存储数据时出错

> ID：11054477
> 
> 赞同：2
> 
> 时间：2012-06-15T16:10:58.897
> 
> 标签：c#, asp.net, database, sql-server-2005

我通过文本框和按钮在 SQL Server 2005 中存储数据（大约 1500 个字）。我正在使用此代码。

```
protected void Button1_Click(object sender, EventArgs e)
{
    conn.Open();
    String query = String.Format("insert into try (data,sno) values ('{0}',22)",TextBox1.Text);
    SqlCommand cmd = new SqlCommand(query, conn);
    cmd.ExecuteNonQuery();
    Label1.Text = "submitted";
    conn.Close();
} 
```

我有`'data'`数据类型的列`'char(4000)'`。

问题是，当我存储第 1 段（大约 1500 个字）时，它存储成功。但是当我存储另一段（大约 1500 字）时，它显示了错误。

> “'s' 附近的语法不正确。字符串 ',22)' 后面的未闭合引号。”

问题是什么 ？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T16:14:13.270

使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

```
String query = "insert into try (data,sno) values (@data,22)"; 
SqlCommand cmd = new SqlCommand(query, conn); 
cmd.Parameters.AddWithValue("@data", TextBox1.text);
cmd.ExecuteNonQuery(); 
```

通过这种方式，您无需担心文本中是否存在单引号，最重要的是，您可以避免[SqlInjection 攻击](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:14:42.817

`String.Format`不会转义适合在 SQL 语句中使用的输入字符串，这将导致错误和[严重漏洞](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。

您应该使用专门为解决此问题而设计的[*参数化查询。*](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:13:17.267

您的文本是否包含`'`字母？如果是，那么它正在中断`INSERT`查询。

如果您尝试插入以下文本：

> 你好呀

然后您的查询将如下所示：

```
insert into try (data,sno) values ('Hello' there,22) 
```

这导致不正确的查询。

这不是应该进行查询的方式，因为它会导致安全问题（阅读更多：[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)）您应该使用[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:13:29.560

这听起来像`'`您`'`在`TextBox1.Text`. 您需要将所有单引号替换为双引号。

```
String query = String.Format("insert into try (data,sno) values ('{0}',22)",Replace(TextBox1.Text,"'","''")); 
```

但是，这种方法会使您面临 SQL 注入攻击。我建议使用存储过程，如下所示：

```
SqlCommand cmd = new SqlCommand(query, conn);
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "spInsertDataIntoTry";
cmd.Parameters.AddWithValue("@data", TextBox.Text);
cmd.ExecuteNonQuery(); 
```

否则，您可以像其他人提到的那样使用[参数。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T16:22:38.227

“'s'附近的语法不正确-这表明您的sql语句是错误的。我猜您的输入内容可能包含sql server关键字，因此请检查您的第二段是否有任何关键字，例如“'”。
例如：
第二段是：天气怎么样？好酷！！！！！！！
所以sql语句是：插入try(data,sno)值（'天气怎么样？好酷！！！！！！',22）
就会出现's' 附近的异常语法不正确

# python - 在 Python 中过滤字符串

> ID：11054478
> 
> 赞同：5
> 
> 时间：2012-06-15T16:10:59.713
> 
> 标签：python, error-handling, invalid-characters

我正在制定检查字符串（电子邮件）的算法 - 例如“电子邮件地址有效”，但它们是规则。电子邮件的第一部分必须是包含 1-8 个字符的字符串（可以包含字母、数字、下划线 [ _ ]...电子邮件包含的所有部分）并且在电子邮件的第二部分之后拥有 1-12 个字符的字符串（还包含所有合法表达式），并且必须以顶级域 .com 结尾

```
email = raw_input ("Enter the e-mail address:")
length = len (email)
if length > 20 
    print "Address is too long"
elif lenght < 7:
    print "Address is too short"  
if not email.endswith (".com"):   
    print "Address doesn't contain correct domain ending"   
try:
    first_part = len (splitting[0])
    second_part = len(splitting[1])  

    account = splitting[0]
    domain = splitting[1] 

    list = "abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_."

    for c in account: 
        if c not in list:
            print "Invalid char", "->", c,"<-", "in account name of e-mail"

    for c in domain:
        if c not in list:
            print "Invalid char", "->", c,"<-", "in domain name of  e-mail"

    if first_part == 0:
        print "You need at least 1 character before the @"
    elif first_part> 8:
        print "The first part is too long"
    if second_part == 4:
        print "You need at least 1 character after the @"
    elif second_part> 16:
        print "The second part is too long"
except IndexError:
        print ""The address must consist of 2 parts connected with symbol @,\
 and ending must be .com"

    if first_part > 0 and first_part < 8 and second_part >4 and second_part < 16:
       print "Valid e-mail address" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:06:42.067

[正则表达式](http://docs.python.org/library/re.html)FTW！

```
import re

address = 'test@gmail.com'
if re.match(r'^[a-z0-9_]{1,8}@[a-z0-9_]{1,8}\.com$', address, re.IGNORECASE):
  print 'valid'
else:
  print 'invalid' 
```

一个较短的正则表达式（如注释所示）将是`r'^\w{1,8}@\w{1,8}\.com$'`

我不知道这是否是你老师的目标，但正则表达式总是很高兴知道:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T21:08:16.970

如果我理解得很好，除了查找无效字符的部分之外，您一切正常。真的吗？

你知道`for`循环吗？它可能对您有帮助。只需获取电子邮件的部分内容：

```
account = splitting[0]
domain = splitting[1] 
```

然后，遍历每个部分。每次都会产生一个字符。如果此字符不在允许的字符集中，则打印一条消息：

```
for c in account:
    if c not in "abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_.":
        print "Invalid char", c, "in e-mail"

for c in domain:
    if c not in "abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_.":
        print "Invalid char", c, "in e-mail" 
```

这不是一个非常优雅的解决方案（例如，可以使用代替，或[列出综合](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)），但我敢打赌，对于新用户来说，它已经足够理解了。[`string.ascii_letters`](http://docs.python.org/library/string.html#string.ascii_letters)`+`[`string.digits`](http://docs.python.org/library/string.html#string.digits)`+"._"``"abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_."`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:37:31.093

构造一个 validate email 方法，带有两个参数：要验证的电子邮件地址和一个有效域列表。

```
def validEmail(email, domains):

    length = len(email)

    index = email.find('@')

    if len(email[0:index]) <= 8 and len(email[0:index]) > 0:
        dot = email.find('.')
        if (len(email[index + 1:]) - dot) <= 12:
            if index+1==dot:
                return False
            else:
                for i in domains:
                    if email[dot + 1:] == i:
                        return True
    return False

domains = ['com', 'org', 'co.uk']

email = raw_input ("Enter the e-mail address:")
print validEmail(email, domains) 
```

# vba - 为什么我不能将我的工作簿定义为对象？

> ID：11054482
> 
> 赞同：16
> 
> 时间：2012-06-15T16:11:27.500
> 
> 标签：vba, excel

为什么我不能通过这两种方式定义工作簿？（我有一个范围位只是为了快速测试。）我该如何解决它？

这会产生一个`"Compile Error: Type Mismatch"`

```
Sub Setwbk()

    Dim wbk As Workbook

    Set wbk = "F:\Quarterly Reports\2012 Reports\New Reports\ _
           Master Benchmark Data Sheet.xlsx"

    Range("A2") = wbk.Name

End Sub 
```

这创造了一个`"Runtime Error '91': Object variable or with block variable not set"`

```
Sub Setwbk()

    Dim wbk As Workbook

    wbk = "F:\Quarterly Reports\2012 Reports\New Reports\ _
          Master Benchmark Data Sheet.xlsx"

    Range("A2") = wbk.Name

End Sub 
```

我在这里想念什么？我已经在 VBA 上苦练了一个月，变得相当老练，但这让我很困惑。我错过了一些基本的东西。
我只想定义一个工作簿，所以我不必全部输入！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T16:15:13.793

这实际上是一个明智的问题。这是 Excel 2010 帮助中的答案：

“Workbook 对象是 Workbooks 集合的成员。Workbooks 集合包含当前在 Microsoft Excel 中打开的所有 Workbook 对象。”

因此，由于该工作簿未打开 - 至少我认为它没有打开 - 它不能设置为工作簿对象。如果它是打开的，您只需将其设置为：

```
Set wbk = workbooks("Master Benchmark Data Sheet.xlsx") 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-15T16:20:09.850

您需要打开工作簿才能引用它。

```
Sub Setwbk()

    Dim wbk As Workbook

    Set wbk = Workbooks.Open("F:\Quarterly Reports\2012 Reports\New Reports\ _
        Master Benchmark Data Sheet.xlsx")

End Sub 
```

[*如果工作簿已经打开，请按照[Doug 的回答。](https://stackoverflow.com/a/11054545/698590)为了使这个答案尽可能完整，我在他的回答中加入了我的评论：]

> 为什么我必须“设置”它？

`Set`是 VBA 分配*对象*变量的方式。由于 a`Range`和 a `Workbook`/`Worksheet`是*objects*，因此您必须`Set`与这些一起使用。

# plone - Plone 的内部/外部链接小部件

> ID：11054483
> 
> 赞同：2
> 
> 时间：2012-06-15T16:11:28.683
> 
> 标签：plone

是否存在类似于“链接小部件”的东西，可以提供与 TinyMCE 的链接浏览器类似的功能

*   浏览器网站内容和链接引用的内部链接

*   通过复制粘贴完整 URL 链接外部链接

在这样的事情不存在的情况下，链接转换的良好起点是什么？例如，一个参考浏览器将结果转换为基于 UID 的链接，然后是 HTML 输出中的人类可读链接。

最好是 z3c.form 或 zope.formlib 解决方案与 portlet 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:22:47.917

前段时间我们为 Archetypes [http://pypi.python.org/pypi/collective.referencedatagridfield开发了这种类型的字段和小部件](http://pypi.python.org/pypi/collective.referencedatagridfield)

# c++ - 当 C++ 断言失败时，如何自动创建迷你转储？

> ID：11054488
> 
> 赞同：2
> 
> 时间：2012-06-15T16:11:41.440
> 
> 标签：c++, .net, debugging, windbg, assertions

我在生产服务器上使用 Sqlite 但进入死锁场景。我在调试模式下编译了 System.Data.Sqlite.org dll，死锁消失了（当然他们做到了..）

现在，由于我们是在调试模式下编译的，所以每隔一段时间我就会遇到断言失败。这些显然只是作为一个对话框出现并且不会在任何地方记录下来？

有没有办法（可能使用 DebugDiag 或其他工具）在发生断言失败时创建内存转储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:19:40.087

为您的应用程序创建 DebugDiag 崩溃规则，使用表达式添加断点

```
MSVCR90D!_wassert 
```

捕获在 cassert 中定义的普通断言宏和

```
MSVCR90D!_CrtDbgReport 
```

捕获 Microsoft 调试 CRT _ASSERT、_ASSERTE 宏，

```
MSVCR90D!_CrtDbgReportW 
```

如果您在启用 unicode 的情况下进行编译。

您可以通过为 Ntdll!ZwTerminateProcess 添加断点、在断言失败对话框中按 abort 并在生成的日志中查看堆栈跟踪 (c:\Program Files\DebugDiag\Logs\<process name>) 来找出所需的表达式。

摆脱“中止、重试或忽略”对话框调用

```
_CrtSetReportMode(_CRT_ASSERT, _CRTDBG_MODE_DEBUG); 
```

在应用程序启动的某个地方（请参阅MSDN 上[的详细 _CrtSetReportMode 描述](http://msdn.microsoft.com/en-us/library/1y71x448%28v=vs.90%29.aspx)）。不幸的是，这仅适用于 _ASSERT、_ASSERTE 宏，_wassert 函数完全跳过了这些 _Crt 模式设置和自定义挂钩。

*笔记：*

1.  MSVCR90D 是 Visual Studio 2008 附带的 CRT 的库名称（对于 VS2010，它将是 MSVCR100D）。

2.  您应该直接运行应用程序（从资源管理器或 Visual Studio 中的“不调试启动”），以便 DebugDiag 将更改附加到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:23:04.960

使用 MiniDumpWriteDump： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)并设置适当的标志以使所有相关信息能够写入倾倒。

您可以通过设置注册表项来告诉 Windows 为您执行此操作，并且有 adplus 和 procdump，请参阅相关问题：[crash generate dump](https://stackoverflow.com/questions/6073135/crash-generate-dump)和这个：[Generate dump with unmanaged code crash?](https://stackoverflow.com/questions/265171/generate-dump-with-unmanaged-code-crash)

# android - 动态壁纸性能问题

> ID：11054491
> 
> 赞同：0
> 
> 时间：2012-06-15T16:11:42.943
> 
> 标签：android, live-wallpaper

我目前无法使用动态壁纸进行一些非常密集的绘图。但是，在测试我的代码时，我发现壁纸滞后并且在屏幕旋转时被破坏。

在我的 draw 方法中，我有这个：

```
mRectArray = new Rect[] {
                new Rect(0, 0, c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 2),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 2,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 3),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 3,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 4),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 4,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 5),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 5,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 6),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 6,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 7),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 7,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 8),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 8,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 9),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 9,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 10),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 10,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 11),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 11,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 12),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 12,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 13),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 13,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 14),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 14,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 15),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 15,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 16),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 16,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 17),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 17,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 18),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 18,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 19),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 19,
                        c.getWidth(),
                        (c.getHeight() + statusBarHeight) / 20 * 20),

                new Rect(0, 0, right1,
                        (c.getHeight() + statusBarHeight) / 20),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20, right2,
                        (c.getHeight() + statusBarHeight) / 20 * 2),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 2,
                        right3, (c.getHeight() + statusBarHeight) / 20 * 3),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 3,
                        right4, (c.getHeight() + statusBarHeight) / 20 * 4),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 4,
                        right5, (c.getHeight() + statusBarHeight) / 20 * 5),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 5,
                        right6, (c.getHeight() + statusBarHeight) / 20 * 6),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 6,
                        right7, (c.getHeight() + statusBarHeight) / 20 * 7),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 7,
                        right8, (c.getHeight() + statusBarHeight) / 20 * 8),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 8,
                        right9, (c.getHeight() + statusBarHeight) / 20 * 9),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 9,
                        right10,
                        (c.getHeight() + statusBarHeight) / 20 * 10),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 10,
                        right11,
                        (c.getHeight() + statusBarHeight) / 20 * 11),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 11,
                        right12,
                        (c.getHeight() + statusBarHeight) / 20 * 12),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 12,
                        right13,
                        (c.getHeight() + statusBarHeight) / 20 * 13),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 13,
                        right14,
                        (c.getHeight() + statusBarHeight) / 20 * 14),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 14,
                        right15,
                        (c.getHeight() + statusBarHeight) / 20 * 15),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 15,
                        right16,
                        (c.getHeight() + statusBarHeight) / 20 * 16),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 16,
                        right17,
                        (c.getHeight() + statusBarHeight) / 20 * 17),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 17,
                        right18,
                        (c.getHeight() + statusBarHeight) / 20 * 18),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 18,
                        right19,
                        (c.getHeight() + statusBarHeight) / 20 * 19),
                new Rect(0, (c.getHeight() + statusBarHeight) / 20 * 19,
                        right20,
                        (c.getHeight() + statusBarHeight) / 20 * 20),

                new Rect(c.getWidth() / 20, c.getHeight() / 15,
                        c.getWidth() / 20 * 8, c.getHeight() / 15 * 4),

                new Rect(c.getWidth() / 20, c.getHeight() / 15,
                        c.getWidth() / 20 * 8, c.getHeight() / 15 * 8), }; 
```

那是 40 个矩形不断被初始化 onDraw。现在，问题是这些矩形必须不断初始化，因为我正在为 20 个矩形的右侧设置动画......

我还有另外 40 个左右的 if 语句用于动画矩形..

如何压缩我的代码以不牺牲性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:04:56.777

通过使用 onSurfaceChange() 函数的高度和宽度在 onSurfaceChange() 中初始化您的数组。

# ruby - Ruby中重复元素的数组交集

> ID：11054492
> 
> 赞同：1
> 
> 时间：2012-06-15T16:11:45.080
> 
> 标签：ruby, arrays

我想（快速）确定一个数组是否包含另一个数组的所有元素，考虑到数组可能有重复的元素。

因此，我尝试了这样的事情：

```
alice = %w(a a a b)
bob = %w(a a b c d e)
alice & bob => ["a", "b"]
alice - bob => [] 
```

但我想要的是一个运算符，它可以让我确定 bob 不包括 alice 的所有元素，因为 bob 没有足够的“a”字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:35:06.777

可能最容易计算每个元素出现的频率，因此我们不必太担心跟踪我们有/没有计算过的重复项：

```
alice_counts = alice.each_with_object(Hash.new(0)) { |o, h| h[o] += 1 }
#=> {"a"=>3, "b"=>1}

bob_counts = bob.each_with_object(Hash.new(0)) { |o, h| h[o] += 1 }
#=> {"a"=>2, "b"=>1, "c"=>1, "d"=>1, "e"=>1} 
```

然后检查每个键 in`alice_counts`是否具有等于或大于 in 的值`bob_counts`：

```
alice_counts.all? { |k, v| bob_counts[k] >= v }
#=> false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T01:42:50.280

```
alice.select{|x| alice.count(x) > bob.count(x)} 
```

**更新** 设置基准：

```
require 'benchmark'

def subset_multivalue?(a, b)
  bb = b.clone
  a.each do |e|
    i = bb.index(e)
    if i
      bb.delete_at(i)
    else
      return false
    end
  end
  return true
end

def subset_multivalue2?(a, b)
  a.find{|x| a.count(x) > b.count(x)}
end

def subset_multivalue3?(alice, bob)
  alice_counts = alice.each_with_object(Hash.new(0)) { |o, h| h[o] += 1 }
  bob_counts = bob.each_with_object(Hash.new(0)) { |o, h| h[o] += 1 }

  alice_counts.all? do |k, v|
    bob_counts.has_key?(k) && bob_counts[k] >= v
  end
end

alice = %w(a a a b)
bob = %w(a a b c d e)

Benchmark.bm do |x|
  x.report("dave:") do
    1000000.times do
      subset_multivalue?(alice, bob)
    end
  end

  x.report("me:") do
    1000000.times do
      subset_multivalue2?(alice,bob)
    end
  end

  x.report("andrew:") do
    1000000.times do
      subset_multivalue3?(alice,bob)
    end
  end
end 
```

结果：

```
 user     system      total        real
dave: 15.054000   0.000000  15.054000 ( 15.108864)
me: 11.529000   0.031000  11.560000 ( 11.689669)
andrew: 65.036000   0.047000  65.083000 ( 67.463859) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:51:14.100

Enumerable#group_by() 将是一个选择。

```
alice = %w(a a a b)
bob = %w(a a b c d e)
alice_group = alice.group_by{|a| a}.map{|k,v| [k ,v.length]}
#=> [["a", 3], ["b", 1]]
bob_group = bob.group_by{|a| a}.map{|k,v| [k ,v.length]}
#=> [["a", 2], ["b", 1], ["c", 1], ["d", 1], ["e", 1]]
alice_group-bob_group
#=> [["a", 3]]
bob_group-alice_group
#=>[["a", 2], ["c", 1], ["d", 1], ["e", 1]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T00:12:32.023

我想我正在解决这个问题：

```
def subset_multivalue?(a, b)
    bb = b.clone
    a.each do |e|
            i = bb.index(e)
            if i
                    bb.delete_at(i)
            else
                    return false
            end
    end
    return true
end 
```

我意识到这不是很红宝石，但它似乎完成了这项工作。

# python - 如何有效地搜索文件中的字符串？

> ID：11054496
> 
> 赞同：0
> 
> 时间：2012-06-15T16:12:07.060
> 
> 标签：python, algorithm

我有以下形式的 10GB 数据：

```
A=good
B=c++ 
```

现在我想找出B的。例如，我希望找出“c++”，因为对于这种情况......我针对这个问题所遵循的方法是选择 B 部分（即首先是第二行），然后从那里找出一个相等的字符串到 B 的字符串。然后在第二轮循环中..我正在寻找 B 的另一个值（现在是第 4 行），然后从那里找到一个具有相等字符串的 B....等等

但是，上述方法需要很多时间，Python中是否有其他方法可以有效地解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T16:18:57.200

由于您的文件太大而无法轻松放入内存中，如何：

1.  拆分成两个文件，As和Bs
2.  对每个进行排序（例如，使用 unix`sort`或 Python 外部内存归并排序）
3.  执行合并排序的合并步骤以查找重复项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:15:59.497

这样做的最好方法是读入数据，构造一组`A`项目和一组`B`项目。然后，您只需找到两者之间的交集。

唯一潜在的缺点是您需要一次将所有数据放入内存中。鉴于您的数据集很大，这可能是个问题。如果你能处理一半，那么你可以创建你的`A`项目集，然后通过`B`项目检查对集。

例子：

使用输入数据：

```
A=good
B=c++
A=df
B=kj
A=c++
B=programming language 
```

第一种方法可以像这样简单地完成：

```
a = set()
b = set()
with open("test") as data:
    for line in data:
        line_data = line[2:].strip()
        if line.startswith("A"):
            a.add(line_data)
        else:
            b.add(line_data)

print(a & b) 
```

给我们：

```
{'c++'} 
```

第二种方法可以这样做：

```
with open("test") as data:
    a = {line[2:].strip() for line in data if line.startswith("A")}

with open("test") as data:
    results = {item for item in (line[2:].strip() for line in data if line.startswith("B")) if item in a}

print(results) 
```

这给出了相同的结果，同时仅涉及将一半的数据存储在内存中（如果存在大量数据重复，则更少），并且由于集合查找的高效性，效率仍然高得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:01:26.883

由于此数据太大，我建议将其存储在 mysql 之类的数据库中。然后，您的问题通过单行查询得到解决。

```
select * from t1,t2 where t1.a=t2.b; 
```

这是一个替代建议。如果你选择去，mysqldb模块可以帮助你连接python和mysql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:46:22.220

运行这个：

```
cat huge_file | awk 'BEGIN {FS = "="} { print $2 "***" $1 }' | sort -n | awk 'BEGIN {FS = "\\*\\*\\*"} { if (prev == $1 && $2 == "B") { print $1 } prev = $1 }' 
```

这会将它们拆分为 A/B 和 value，按 value 排序，并找到相邻的对。它假设所有字符串都没有子字符串“ *** ”，但是您可以将其替换为您知道不会出现的任何其他子字符串。

# c++ - 删除元素并将元素添加到主循环内的向量

> ID：11054498
> 
> 赞同：2
> 
> 时间：2012-06-15T16:12:09.490
> 
> 标签：c++, vector, openframeworks

我之前搜索过，但找不到任何答案。我对 c++ 有点陌生，所以希望这个问题不会太愚蠢。

我正在尝试在向量中添加和删除元素，在我的情况下，在所有粒子的大更新或绘制循环期间填充了粒子。例如删除一些粒子，因为它们已经死亡，但也添加一些其他粒子，因为一个粒子与一个物体碰撞，我想在碰撞点显示一个小粒子爆发。我在演示文件中制作了这个简单的测试代码，以深入了解问题的根源。

我认为问题是因为我删除并添加了迭代器指针变得无效的粒子。删除有效，但是当我添加一些随机的时，我得到一个空指针。下面的代码有点冗长，我知道我应该使用带有 begin() 和 end() 的迭代器，但我遇到了同样的问题，并且稍微使用了代码，尝试更多的 javascript 数组样式循环，因为我更熟悉那。

```
void testApp::drawParticles()
{

    int i=0;
    int max = particles.size();
    vector<Particle*>::iterator it = particles.begin();

    while ( i < max ) {

        Particle * p = particles[i];

        if ( ofRandom(1) > .9 ) {
            it = particles.erase(it);
            max = particles.size();
        } else {
            ofSetColor(255, 255, 0);
            ofCircle( p->x, p->y, p->z, 10);

            if ( ofRandom(1) < .1 ) addSomeNewOnes();
            i++;
            it++;
        }
    }

}

void testApp::addSomeNewOnes()
{
    int max = ofRandom(4);

    for ( int i=0; i<max; i++ ) {
        Particle * p = new Particle();
        p->x = ofRandom( -ofGetWidth()/2, ofGetWidth()/2 );
        p->y = ofRandom( -ofGetHeight()/2, ofGetHeight()/2 );
        p->z = ofRandom( -ofGetHeight()/2, ofGetHeight()/2 );
        particles.push_back( p );
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:19:16.497

每次插入 a`vector`时，它的迭代器都可能失效。你不可以做这个：

```
if ( ofRandom(1) < .1 ) addSomeNewOnes();
it++ 
```

因为调用`addSomeNewOnes()`,之后`it`是无效的。

您可以使用调用返回的迭代器`vector::insert`，但在您的情况下，这意味着重新设计您的代码。

无论如何，这是您可能想要做的事情，因为您的代码有点笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:22:21.943

您可以从最后循环它，这应该允许您删除当前的（因为您只是从末尾删除）并添加新的添加到末尾：

```
Vector<Particle*>::iterator it = particles.end();

while (iter != particles.begin()) {

    Particle * p = *iter;

    if ( ofRandom(1) > .9 ) {
        particles.erase(iter);
    } else {
        ofSetColor(255, 255, 0);
        ofCircle( p->x, p->y, p->z, 10);

        if ( ofRandom(1) < .1 ) addSomeNewOnes();
    }
    iter--;
} 
```

如果您不添加，根据[此处](http://www.velocityreviews.com/forums/t459969-deleting-stl-list-entry-are-all-iterators-invalidated.html)的信息，STL 中的迭代器是稳定的，因此您应该能够向前迭代并且仍然能够获得相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:17:25.843

当底层数据发生变化时，迭代器在某些情况下会失效。

您必须跳出循环并重新开始。

您应该能够通过将整个 drawParticles 函数包装在一个`while(notDone)`循环中来做到这一点，并在完成矢量修改后将 notDone 设置为 true。

这是另一个关于规则的 SO 问题：[Iterator invalidation rules](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:21:54.360

```
it = particles.erase(it); 
```

将返回一个迭代器，指向删除后元素的新位置。如果擦除的那个恰好是最后一个，它将指向`particles.end()`。`it++`“结束”是一个错误。

此外，如果：

```
if ( ofRandom(1) < .1 ) addSomeNewOnes(); 
```

评估为 true 并被`addSomeNewOnes()`调用，正如其他人所说，这也会使迭代器无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T16:26:06.997

你是在迭代器的位置插入和删除吗？如果是这样，插入和擦除返回的迭代器将是有效的，你可以使用它们。就像是：

```
std::vector<T>::iterator i = v.begin();
while ( i != v.end() ) {
    if ( someCondition ) {
        i = v.erase( i );
    } else {
        ++ i;
    }
} 
```

是一个或多或少的标准习语。

对于随机插入和删除，您必须使用索引，根据插入或删除的元素数量以及插入或删除是在当前位置之前还是之后进行更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T16:35:39.807

有一种简单的方法可以使这项工作正常工作，而无需担心失效规则：只需为下一次迭代构建一个*新*向量。

```
typedef vector<Particle*> ParticleVector;

// modifies the particle vector passed in 
void testApp::drawParticles(ParticleVector &particles)
{
    ParticleVector next;
    next.reserve(particles.size()); // seems like a reasonable guess

    for (auto it = particles.begin(); it != particles.end(); ++it)
    {
        Particle *p = *it;

        if (ofRandom(1) > .9) {
            // don't copy to the next cycle
            delete p;
        } else {
            // copy to the next cycle
            next.push_back(p);

            ofSetColor(255, 255, 0);
            ofCircle(p->x, p->y, p->z, 10);

            if (ofRandom(1) < .1)
                addSomeNewOnesTo(next);
        }
    }
    particles.swap(next);
} 
```

请注意，当您不使用全局变量时，像这样重构是多么容易，顺便说一句。

```
void testApp::addSomeNewOnesTo(ParticleVector &particles)
{
    int max = ofRandom(4);

    for ( int i=0; i<max; i++ ) {
        Particle * p = new Particle();
        p->x = ofRandom( -ofGetWidth()/2, ofGetWidth()/2 );
        p->y = ofRandom( -ofGetHeight()/2, ofGetHeight()/2 );
        p->z = ofRandom( -ofGetHeight()/2, ofGetHeight()/2 );
        particles.push_back( p );
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T16:40:26.660

另一方面：您的实现中没有内存泄漏吗？您正在使用

```
vector<Particle*>  particles 
```

并且还使用`particles.erase()`. 那不会只是删除指向粒子的指针，而不是创建对象吗？

# javascript - 如何在 Ext4 中将 css 类添加到树节点？

> ID：11054500
> 
> 赞同：2
> 
> 时间：2012-06-15T16:12:20.400
> 
> 标签：javascript, extjs, extjs4

我想突出显示 Ext.tree.Panel 中的一些节点。

在 Ext3 中，我通过向树节点 ui 对象添加一个类来实现这一点：

```
// add a class with to highlight the node
myTreeNode.getUI().addClass('highlightclass');

// remove the class to remove the highlighting
myTreeNode.getUI().removeClass('highlightclass'); 
```

Ext4 中的等价物是什么？我已经能够通过设置节点模型的 iconCls 字段来更改图标，但我真的希望能够设置一个允许我突出显示整个节点的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:28:27.950

这是我对自己的问题找到的答案：

```
// add a css class to a specific tree node
myTreePanel.getView().addRowCls(myTreeNode,'highlightclass');

// remove a css class from a specific tree node
myTreePanel.getView().removeRowCls(myTreeNode,'highlightclass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T22:57:12.973

虽然所选答案可能有效，但在我的 ExtJS 版本（4.0.7）中，只要我在树面板中展开或折叠节点，css 类就会全部重置。我相信解决这个问题的更永久的方法是

```
myTreeNode.set('cls', 'highlightclass'); 
```

这会将您的类添加到特定树节点的 td.x-grid-cell DOM 元素。

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:21:47.277

要做到这一点，您需要将树视为树形网格。为您的树设置一个只有一列的列定义，隐藏列的标题并向列添加渲染器。

之后，您可以使用为突出显示的行定义的 css 类来定义渲染器，并且可能在行模型上使用一个属性来告诉应该突出显示哪些行：

```
renderer: function(value, metaData){
    if (whatever you want here as a condition) {
        metaData.tdCls = "x-grid-row-alt-mine";
    }
    return value;
} 
```

# javascript - 使用 Google Maps Api 缩放计算可见距离

> ID：11054504
> 
> 赞同：3
> 
> 时间：2012-06-15T16:12:34.457
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一张地图，我需要计算具有地图缩放值和高度的地图顶部和底部的距离。

你知道一些漂亮的解决方案吗？

更新：

我写了一个例子来解决我自己的问题。

代码：[https ://github.com/CrisalixLabs/crisalixlabs.github.com/tree/master/map_utilities/visible_area](https://github.com/CrisalixLabs/crisalixlabs.github.com/tree/master/map_utilities/visible_area)

工作示例：[http ://crisalixlabs.github.com/map_utilities/visible_area/](http://crisalixlabs.github.com/map_utilities/visible_area/)

# c# - Wpf 文本框未从视图模型更新

> ID：11054510
> 
> 赞同：1
> 
> 时间：2012-06-15T16:12:53.350
> 
> 标签：c#, wpf, binding

我的视图模型中有一个属性，它在某些条件下返回一个常量。

其实现与此类似：

```
 class Tmp : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public String Text
        {
            get { return "testing"; }
            set
            {
                PropertyChanged(this,new PropertyChangedEventArgs("Text"));                }
        }
    } 
```

所以属性文本总是返回“测试”。

我将它绑定到一个文本框，如：

```
 <TextBox Text="{Binding Path=Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

当应用程序启动时，文本框 correclty 表示正在测试。

现在，当我在文本框中键入内容时，将调用 setter，它调用 PropertyChanged。

在此之后（可能是 GUI）调用 getter 并获取值“testing”。

但是，文本框中的文本不会更改回测试。

所以我可以在文本框中输入“abc”，即使模型只是存储“测试”，文本框也会显示“abc”。

为什么每次击键时文本框中的文本都没有重置为“测试”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:22:12.957

为什么文本框要再次获取文本？它只是将它写入您的源属性，它“知道”它必须相同，因为他正在告诉属性新值。否则，您将创建循环引用。您正在做的事情完全违背了物业所期望的准则和行为。

删除 setter，以一种方式绑定，在常量更改时提高 text 属性，并使文本框只读。请记住，不必在 setter 中调用 Propertychanged。

为了使您的初始方法有效，您需要打破“文本框更改属性但不会监听传入的提升”状态

```
set
{
   sUIDispatcher.BeginInvoke((Action)(() => Raise("Name")));
} 
```

我想补充一点，这是一个非常糟糕的主意，并且强烈不鼓励你这样做。

# javascript - 如何处理 IE 8 中缺少 JavaScript Object.bind() 方法

> ID：11054511
> 
> 赞同：25
> 
> 时间：2012-06-15T16:13:03.193
> 
> 标签：javascript, internet-explorer-8, cross-browser, bind, backwards-compatibility

我正在编写一些使用该`Object.bind`方法的 JavaScript。

```
funcabc = function(x, y, z){ 
    this.myx = x;
    this.playUB = function(w) {
        if ( this.myx === null ) {
            // do blah blah
            return;
        }

        // do other stuff
    };
    this.play = this.playUB.bind(this);
}; 
```

由于我在 WinXP 中使用 Firefox 开发，有时在 Win7 中使用 IE 9 或 10 进行测试，我没有注意到或注意 IE8 及以下不支持`bind`.

这个特定的脚本不使用画布，所以我有点犹豫要注销所有 IE 8 用户。

有标准的解决方法吗？

我在 JavaScript 中的表现还不错，但我还是个菜鸟。如果解决方案完全显而易见，请原谅我。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-15T16:17:47.217

此页面上有一个很好的兼容性脚本： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

只需将其复制并粘贴到您的脚本中即可。

**编辑：**为了清楚起见，将脚本放在下面。

```
if (!Function.prototype.bind) {
  Function.prototype.bind = function(oThis) {
    if (typeof this !== 'function') {
      // closest thing possible to the ECMAScript 5
      // internal IsCallable function
      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
    }

    var aArgs   = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP    = function() {},
        fBound  = function() {
          return fToBind.apply(this instanceof fNOP && oThis
                 ? this
                 : oThis,
                 aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
  };
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T14:33:26.523

最好的解决方案可能是安装[Modernizr](http://modernizr.com)。

Modernizr 会告诉您当前浏览器是否本地实现了此功能，并且它提供了一个脚本加载器，因此您可以在旧浏览器中引入 polyfill 以回填功能。

这是生成您的modernizr自定义版本的链接：http:
[//modernizr.com/download/#-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes](http://modernizr.com/download/#-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-22T14:35:46.180

Internet Explorer 8 及更低版本不支持 Function.prototype.bind。兼容性图在这里： http: [//kangax.github.io/es5-compat-table/](http://kangax.github.io/es5-compat-table/)

Mozilla Developer Network 为未原生实现 .bind() 的旧版浏览器提供了这种替代方案：

```
if (!Function.prototype.bind) {
  Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
      // closest thing possible to the ECMAScript 5 internal IsCallable function
      throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function () {},
        fBound = function () {
          return fToBind.apply(this instanceof fNOP && oThis
                                 ? this
                                 : oThis,
                               aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
  };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T21:37:13.993

Function 构造函数是执行此操作的老式方法：

```
var foo = function(x,y,z){ return Function("x,y,z","return Math.max.call(this, x, y, z)")(x,y,z) }

var bar = function(x,y,z){ return Function("x,y,z","return Math.min.call(this, x, y, z)")(x,y,z) }

console.log(foo(1,2,3) );

console.log(bar(3,2,1) );
```

**参考**

*   [函数式 JavaScript：利用函数对象的力量](http://www.webreference.com/programming/javascript/rg25/3.html)
*   [eval() 不是邪恶的，只是被误解了](http://www.nczonline.net/blog/2013/06/25/eval-isnt-evil-just-misunderstood/)
*   [通过 Function 构造函数创建的函数的 [范围]](http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/#scope-of-functions-created-via-function-constructor)
*   [John Resig - Fast JavaScript Max/Min](http://ejohn.org/blog/fast-javascript-maxmin/)

# ms-access - ALTER 锁定的 ms-access 表

> ID：11054512
> 
> 赞同：1
> 
> 时间：2012-06-15T16:13:03.973
> 
> 标签：ms-access, ms-access-2003, jet

我正在尝试在 ms-access 后端的表中添加一列，该后端正被多个 ms-access 前端使用。当我尝试像这样（或使用 DAO）向表中添加一列时：

```
sql = "ALTER Table MyTable " & _
      "ADD COLUMN NewCol Integer "
CurrentDb.Execute (sql) 
```

我收到一个错误，Access 抱怨该表已被另一个用户锁定。

有没有办法改变一个锁定的表？

如果不能，您如何处理修改始终在使用的后端表？就等大家周末回家吧？以后有没有一些管理技巧可以用来避免这种情况？

# sql - 触发器中的非更新列

> ID：11054521
> 
> 赞同：0
> 
> 时间：2012-06-15T16:13:42.397
> 
> 标签：sql, oracle, plsql, triggers

我的问题是下面详述的触发器似乎正确执行，除了更新语句 `UPDATE my_dblist SET passive_servername = v_newpassive WHERE server = :NEW.server AND dbname = :NEW.dbname;`似乎没有发生。旧记录被删除并正确插入到历史记录中，但新记录没有在passive_servername 下列出旧的活动服务器。我有一种感觉，这可能与它的自主性有关？

```
create or replace
TRIGGER cluster_check
AFTER INSERT ON my_dblist
FOR EACH ROW
DECLARE
pragma autonomous_transaction;
v_duplicates NUMBER;
v_newpassive varchar2(30);
BEGIN
SELECT count(*) INTO v_duplicates FROM my_dblist WHERE passive_servername         = :new.server and dbname = :new.dbname order by 1;
IF v_duplicates > 0
THEN 
SELECT server INTO v_newpassive FROM my_dblist WHERE passive_servername = :NEW.server AND dbname = :NEW.dbname ORDER BY 1;
UPDATE my_dblist
SET passive_servername = v_newpassive WHERE server = :NEW.server AND dbname = :NEW.dbname;
INSERT INTO my_dblist_history 
SELECT * FROM my_dblist WHERE passive_Servername = :NEW.server AND dbname = :NEW.dbname;
DELETE FROM my_dblist 
WHERE passive_Servername = :NEW.server AND dbname = :NEW.dbname;
END IF;
commit;
END; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:26:40.570

您的触发器被声明为使用自治事务。这几乎总是一个错误，除非触发器的唯一目的是记录更改您想要保留的一行数据的尝试，无论更改最终是否成功提交。在这种情况下，它也可能是您的问题的根源。由于触发器是一个自治事务，它无法看到触发语句所做的未提交更改。例如，您的`UPDATE`语句将看不到导致触发触发器的行，因为根据定义，这些行是在不同事务中完成的未提交工作。

你能退后一步，准确地解释你要解决的问题吗？我假设您正在尝试使用自治事务来解决变异表异常。这几乎总是一个错误。变异表异常几乎普遍表明您有数据模型问题，因此修复数据模型比解决错误要好得多。如果您无法更正数据模型，则需要使用多个触发器来解决变异表错误。

# opencl - 在 OpenCL 中从 GPU 复制 float2 值

> ID：11054522
> 
> 赞同：0
> 
> 时间：2012-06-15T16:13:48.677
> 
> 标签：opencl, gpu

我想将 float2 值复制回 CPU。GPU 端的结果是正确的，但 CPU 端的结果有些不正确。有人可以帮帮我吗

显卡代码

```
 #pragma OPENCL EXTENSION cl_amd_printf : enable
__kernel void matM(__global float* input, int width, int height, __global float2* output){    
    int X = get_global_id(0);
    float2  V;  
    V.x = input [X];
    V.y = input [X];
    output[X] = V;  
    printf("%f\t %f\n",output[X].x,output[X].y);
  } 
```

中央处理器代码

```
output = clCreateBuffer(context, CL_MEM_WRITE_ONLY, sizeof(cl_float2) * wid*ht, NULL, NULL);
clEnqueueReadBuffer( commands, output,CL_TRUE, 0, sizeof(cl_float2) * wid *ht, results, 0, NULL, NULL ); 
```

内部`printf`GPU 内核打印正确的结果，但主机端结果不正确。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:15:22.060

`cl_float2`数据类型可用于主机端访问`float2`数据，但我的问题是别的。

全局 ID 不匹配，我有两个全局 ID，第 3 行应该是`int X = get_global_id(0) + get_global_id(1)`.

# c# - 无法读取注册表项

> ID：11054525
> 
> 赞同：1
> 
> 时间：2012-06-15T16:14:15.347
> 
> 标签：c#

我在尝试读取 Windows server 2008 上的注册表项时遇到了一个问题。令人费解的是，该代码确实可以在另一台服务器上运行，该服务器也是 2008，但它是 R2。我已经检查并且注册表项已经到位，并且我以管理员身份运行了该程序。下面是一个代码示例。Registry.LocalMachine.OpenSubKey 返回的注册表键为空。这是一个 64 位应用程序

```
string strPath = "";
try
{
    //The registry key:
    //SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\SnmpClient.exe
    using (RegistryKey rk = Registry.LocalMachine.OpenSubKey(strKey))
    {
            try
            {
                //InstallDirectory
                if (!(rk.GetValue(strValue) == null))
                {
                    strPath += rk.GetValue(strValue).ToString();
                }
            }
            catch(Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
    }
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
}
return strPath; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:50:57.623

您还没有说您是将应用程序编译为 32 位还是 64 位。

如果您将应用程序编译为 32 位应用程序，它将被重定向到

> HKEY_LOCAL_MACHINE\SOFTWARE\ **Wow6432Node** \Microsoft\Windows\CurrentVersion\App 路径...

要么检查正确的密钥是否也存在，要么编译为 64 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:07:46.920

以下是打开 64 位配置单元的方法。

```
var localMachine = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry64); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T06:18:58.007

Graham Wager 和 Tom Brothers 都对建议的方法是正确的。我在使用 VS 2013 和 MSTEST 运行单元测试时遇到的问题中的 2 美分：

在执行通过单元测试从注册表读取的方法时，存在的注册表项在 Registry.LocalMachine.OpenSubkey(string, bool) 方法上始终返回为 null。问题是测试设置使**默认处理器架构为 X86**，因此在运行测试时，正在读取**Wow6432Node 。**

概括：

在 Windows 7 64 位上运行 MSTEST 的 VS 2013

要确保测试以 64 位运行，请转到 TEST -> TEST Settings -> Default processor architecture 并选择 X64

**注意**：Wow6432Node 适用于在 64 位系统上运行的 32 位应用程序

# facebook - 使用 javascript 检查 publish_action 权限

> ID：11054527
> 
> 赞同：1
> 
> 时间：2012-06-15T16:14:21.797
> 
> 标签：facebook, facebook-opengraph

如何检查用户是否已授予权限且未禁用 (publish_action) 权限以使用开放图形 API 进行发布 (publish_action)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:26:21.647

`/me/permissions`使用用户的访问令牌或`/USER_ID/permissions`应用访问令牌进行调用。它显示您对该用户拥有的权限。

示例输出为：

```
{
  "data": [
    {
      "installed": 1, 
      "manage_pages": 1, 
      "user_actions.music": 1
    }
  ]
} 
```

# android-emulator - 如何创建多核 Android 虚拟设备

> ID：11054530
> 
> 赞同：4
> 
> 时间：2012-06-15T16:14:30.940
> 
> 标签：android-emulator, avd

有没有办法创建一个具有多个 CPU 内核的 Android 虚拟设备？

我在 Windows 7 AMD64 上使用 Android Virtual Device Manager Rev 19。

请注意，这个问题*不是*关于让模拟器使用多个主机内核！

# web-services - 如何制作可作为 Ms Office Excel 2007 数据源的 Web 服务“页面”

> ID：11054531
> 
> 赞同：0
> 
> 时间：2012-06-15T16:14:33.393
> 
> 标签：web-services, excel, office-interop, office-2007

在数据选项卡下的 MS-Excel 中，有一个按钮“来自 WEB”。
我很想尝试制作我的网络服务（网页），它可以为工作表提供数据。
我应该从哪里开始寻找什么样的网络服务，页面EXCEL可以使用这种方法导入。
我很乐意尝试使用 C# (.NET) ASP.NET

![在此处输入图像描述](../Images/b3bdacc9c65000ed37d012086a42fe14.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:37:14.607

“From Web”按钮从任何 HTML 表格中提取信息。

您只需将数据放入 HTML 表格中，Excel 就会将该数据提取到新电子表格或现有电子表格中。

# node.js - 将 Express 会话中间件限制为某些路由

> ID：11054532
> 
> 赞同：0
> 
> 时间：2012-06-15T16:14:37.263
> 
> 标签：node.js, express

我正在使用 Express 建立一个网站。我正在提供静态文件并有一个 REST API。对于静态文件，我使用会话中间件将某些页面限制为登录用户。这样做的缺点是 REST API 在 HTTP 标头中有 cookie。我可以限制某些路由不使用 cookie 吗？这是挂载功能的用途吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:42:43.840

好吧，如果您正在设置或需要 cookie，则必须使用某种中间件功能来执行此操作（因为 Express*本身*没有任何东西可以这样做）。如果你自己编写了中间件函数，你只需要重写它，以便对何时设置/需要 cookie 更加挑剔。如果您使用的是预先编写的中间件函数，请尝试将它放在堆栈中，而不是任何不需要 cookie 的路由函数（这通常意味着放在`app.use(express.router);`任何`app.use(...)`调用依赖于 cookie 的中间件函数的调用之前）。

如果这对您没有意义，请发布您正在做的事情（在将其剥离为最小的测试用例之后）。

# windows - 如何使用/安装 GNU binutils (objdump)

> ID：11054534
> 
> 赞同：16
> 
> 时间：2012-06-15T16:14:41.100
> 
> 标签：windows, cygwin, gnu, binutils, objdump

我需要在 Windows 上运行的应用程序中使用 objdump 和 readelf 命令。我知道我可以安装 cygwin 来使用它们。我不想使用 cygwin 的原因是因为我想让它随笔进行部署。另外，我不知道如何进行 cygwin 的静默安装。因此，我相信我需要的是[GNU Utilities For Win32](http://www.cyberciti.biz/faq/unix-command-line-utilities-for-windows/)，因为链接指出这些库是无服务器的。“可执行文件仅依赖于 Microsoft C 运行时 (msvcrt.dll)，而不依赖于 Cygwin 工具提供的模拟层”

无论如何，一旦我转到该链接，我不知道如何安装它。**具体来说，我想使用[>这个工具<](http://www.gnu.org/software/binutils/)**

如果有人能指出我将如何在我的应用程序中使用 objdump 和 readelf（cygwin 中的 binutils）的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T18:43:04.660

它们已经编译，可以从[这里下载！](https://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.28/)

下载后，它们将位于 bin 目录中：

![在此处输入图像描述](../Images/c2e070bb2e521ab7205490b79b4ad6d6.png)

然后您将通过传递相同的参数以与在 linux 上使用它的方式相同的方式使用它。

# validation - Struts2 验证拦截器转到 xhtml 文档

> ID：11054542
> 
> 赞同：2
> 
> 时间：2012-06-15T16:15:06.937
> 
> 标签：validation, xhtml, struts2, action, interceptor

**背景：**我将 Struts2 与 REST 和 Convention 插件一起使用，因此大约 99% 的设置在我编写的类中，而不是在 xml 文件中。使用约定，您可以使用方法上的注释配置服务器和客户端验证，例如，我使用的帐户创建方法如下所示：

```
@Validations(
        requiredFields = {
                @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "userName", message = "You must enter a value for field."),
                @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "firstName", message = "You must enter a value for field."),
                @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "lastName", message = "You must enter a value for field."),
                @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "password", message = "You must enter a value for field.")
        },
        emails = {@EmailValidator(type = ValidatorType.SIMPLE, fieldName = "email", message = "You must enter a value for email.")},
        stringLengthFields = {
                @StringLengthFieldValidator(type = ValidatorType.SIMPLE, trim = true, minLength = "6", maxLength = "16", fieldName = "userName", message = "Username must be at least 6 letters."),
                @StringLengthFieldValidator(type = ValidatorType.SIMPLE, trim = true, minLength = "8", maxLength = "16", fieldName = "password", message = "Password must be at least 8 characters.")
        }
)
public String create() {
    //create the account
} 
```

这很好用，javascript 被正确推送到 JSP，表单在提交之前经过验证，服务器端验证也很好用，如果满足所有条件，`create()`则正确调用方法并且一切正常。

问题在于绕过客户端验证并在服务器端验证失败。所有文档都告诉我，验证拦截器将用户发送回表单并设置了正确的字段错误，以便用户可以解决他们的问题，但在我的应用程序中，它只是重定向到一个完全空白的页面。

**问题** - 如何告诉验证拦截器将表单重定向到哪里，以便可以填写值并正确设置 fieldErrors？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:26:46.403

在不知道您的配置的情况下，很难判断出了什么问题。

我的猜测是您只为您的操作配置了验证拦截器示例：

```
// this is wrong
<action name="doSomething" class="DoSomethingAction">
   <interceptor-ref name="validation">
   </interceptor-ref>
</action> 
```

这里只调用验证拦截器，但不调用其他拦截器，如工作流

```
// this is better
<action name="doSomething" class="DoSomethingAction">
   <interceptor-ref name="defaultStack">
   </interceptor-ref>
</action> 
```

# php - 动态插入值

> ID：11054543
> 
> 赞同：0
> 
> 时间：2012-06-15T16:15:11.797
> 
> 标签：php

我想遍历表单字段并动态获取表单字段数据并将其插入数据库。我不想为每个表单字段绑定一个值，而是循环遍历数组中的值。它似乎没有按照我的方式工作。有什么建议么？

谢谢

```
<?php
    $FormFields = array();
    $Values = array();
    global $i;
    $i = 0;

    $conn= new PDO(DB_DSN, DB_USERNAME, DB_PASSWORD);
    foreach($_POST as $key => $value) {
        $FormFields[++$i] = $key;
        $Values[$i] = $value;

        echo $FormFields[$i] . "<br />";
        echo $Values[$i] . "<br />";

        //loop through all form fields and bind value
        $sql = "INSERT INTO sectiona ($FormFields[$i]) VALUES (:$i)";
        $st = $conn->prepare($sql);
        $st->bindValue(":$i", $Values[$i]);
        $st->execute();

    }
    echo "Total Fields: " . $i;
    $conn = null;

?> 
```

编辑：

为什么它为每个数据条目创建一个新行？不应该只有一排吗？

![我的形象](../Images/e605ec8eaefb291b08234c524048ceb5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:23:09.773

你不能`++$i`在引号里做。将查询的那部分移出。

```
$field = $FormFields[++$i];
$sql = "INSERT INTO sectiona ($field) VALUES (:$i)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:33:42.710

我认为`$i`设置正确。我做了一个

```
 echo $i . " - " . $FormFields[$i] . " - " . $Values[$i] . "<br />"; 
```

行，它在 URL 上给出正确的输出`test.php?test=1&something=2&nothing=true`为

```
1 - test - 1 
2 - something - 2
3 - nothing - true 
```

可能是变量未在查询中正确导出。尝试：

```
$sql = "INSERT INTO sectiona ('".$FormFields[$i]."') VALUES (:".$i.")";
$st = $conn->prepare($sql);
$st->bindValue(":".$i, $Values[$i]); 
```

* * *

编辑回答你的编辑：你在做`$sql = "INSERT INTO sectiona ($FormFields[++$i]) VALUES (:$i)";` 你已经在第一位增加了 $i `$FormFields[++$i] = $key;`。不要再这样做了。这就是为什么我将其编辑为

```
$sql = "INSERT INTO sectiona ('".$FormFields[$i]."') VALUES (:".$i.")"; 
```

在第一反应。

# java - UseCompressedOops JVM 标志有什么作用，我应该什么时候使用它？

> ID：11054548
> 
> 赞同：84
> 
> 时间：2012-06-15T16:15:34.347
> 
> 标签：java, memory, jvm, jvm-hotspot

HotSpot JVM 标志有什么作用`-XX:+UseCompressedOops`，我应该什么时候使用它？在 64 位 Java 实例上使用它（与不使用它相比）时，我会看到什么样的性能和内存使用差异？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-15T16:37:20.810

去年的大多数 HotSpot JVM 都默认启用了它。此选项允许在 64 位 JVM 中使用 32 位的引用并访问接近 32 GB 的堆。（超过 32 位指针可以）（您也可以拥有几乎无限的堆外内存）。这可以节省大量内存并潜在地提高性能。

如果您想使用此选项，我建议您更新到默认启用它的版本，因为可能有一个很好的理由，例如错误，为什么以前没有启用它。尝试 Java 6 更新 23 或 Java 7 更新 5。

简而言之，不要打开它，使用默认打开它的版本。

* * *

更新：

在 Java 8 中，您可以选择设置`-XX:ObjectAlignmentInBytes=`，事实上，如果您将堆大小设置为 64 GB，它将使用`-XX:ObjectAlignmentInBytes=16`并且仍然使用 32 位引用。

# android - 如何制作这个用户界面？

> ID：11054553
> 
> 赞同：3
> 
> 时间：2012-06-15T16:16:01.197
> 
> 标签：android, user-interface

所以我已经四处寻找了几天，我找不到任何关于如何制作类似于此的 UI 的教程。

![在此处输入图像描述](../Images/6b53c2c514efbb68b87cf6de354c4116.png)

我想做与此类似的事情，其中​​按钮是意图并转到我的活动而不是主屏幕活动（电话、市场、联系人等）。有人知道如何开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:34:21.583

这很复杂，因为它使用 3D 相机转换，它不适合初学者，但你可以尝试一下：

[Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

# php - 使用类的实例访问静态方法是否被认为是不好的做法？

> ID：11054555
> 
> 赞同：5
> 
> 时间：2012-06-15T16:16:17.920
> 
> 标签：php, oop

使用类的实例访问静态方法是否被认为是不好的做法？

IE

```
$model = new MyClass();
$options = MyClass::getOptions(); 
```

对比

```
$model = new MyClass();
$options = $model::getOptions(); 
```

（`$model`在任何一种情况下都会被实例化，我只是想知道一种方法是否比另一种更可取。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:25:34.407

传统上，第一种方式（指定类名本身）与其他语言（如 Java）有更多相似之处。

第二个是 PHP 独有的（afaik）；它之所以有效，是因为`::`运算符消除了表达式的歧义，这与 Java 不同，其中句点同时用于实例和静态属性。

我不确定使用第二个选项对性能的影响是什么，但我认为这取决于个人品味/编码标准。

**结论**

如果您的实例类型从周围的代码中立即清楚，则选择第二个选项可能更容易（有时类名可能很大）；但如果不是，请使用第一个选项，因为它是最明确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:27:18.330

这取决于，我想。您可以愉快地使用静态方法多年，享受无实例化的代码，但有一天您将不得不将*一些*（这就是它的去处）调用重新路由到另一个后代类，所以简单的搜索和替换调用不会'不做。) 因此，我认为使用准备好的对象是一条更安全的路线。

作为替代方案，您可以使用以下内容：

```
$className = 'MyClass';
$className::classyMethod1();
$className::classyMethod2(); 
```

...但我想这可能会随着时间的推移变得相当混乱（并且仅在 PHP 5.3+ 中可用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:39:08.680

我相信，这种选择：

```
$options = MyClass::getOptions(); 
```

实际上浪费的内存更少，因为您不需要额外的变量来调用静态函数。

# sql - 实体框架 + 存储过程 = 错误“PLS-00306：调用中的参数数量或类型错误”

> ID：11054556
> 
> 赞同：1
> 
> 时间：2012-06-15T16:16:27.700
> 
> 标签：sql, oracle, entity-framework

我正在尝试让实体使用 Oracle 存储过程。我在两个不同的存储过程中遇到了同样的错误。

我已经能够在 App.Config 文件中设置列，以便它们在我“添加函数导入..”时出现，但是当我尝试访问实体上下文时出现以下错误

> ORA-06550：第 1 行，第 7 列：PLS-00306：调用“RISK_GETALLCHANNELS”时参数的数量或类型错误

该程序非常基本：

```
 PROCEDURE       "RISK_GETALLCHANNELS" (p_cursor OUT SYS_REFCURSOR)
    IS 
    BEGIN
    OPEN p_cursor FOR
    SELECT r.ChannelId, r.Name, CASE WHEN r.active = 1 THEN 'Active' ELSE 'InActive'       END AS "Active", r.domain
    FROM risk_channel r;
    END Risk_GetAllChannels; 
```

这一直让我发疯，所以任何帮助将不胜感激！:)

# c# - 为什么表单不会自动调整大小

> ID：11054557
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:16:46.030
> 
> 标签：c#, winforms, user-interface

我已将表单的属性设置为 True 并且在我的菜单和工具栏下方`AutoSize`有一个`Dock`设置为的面板。`Top`我正在将面板的`Visible`属性更改为 True 和 False，并且我希望当面板变得可见或不可见时可以正确调整表单的大小，但这不能按预期工作。什么不见​​了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:38:45.597

当你设置`AutoSizeMode`它`GrowAndShrink`会工作。

# c++ - 如何按元素出现的次数将多重集排序到容器中

> ID：11054558
> 
> 赞同：5
> 
> 时间：2012-06-15T16:16:48.770
> 
> 标签：c++, sorting, stl, stl-algorithm

我想按出现次数对元素进行排序。这就是我想出的（mHeights 是一个 std::multiset）：

```
namespace{
  template<class U,class T>
  class HistPair{
    public:
      HistPair(U count,T const& el):mEl(el),mNumber(count){      
      }
      T const&  getElement()const{return mEl;}

      U getCount()const{return mNumber;}
    private:
      T mEl;
      U mNumber;
  };

  template<class U,class T>
  bool operator <(HistPair<U,T> const& left,HistPair<U,T> const& right){
    return left.getCount()< right.getCount();
  }
}

std::vector<HistPair<int,double>  > calcFrequentHeights(){
  typedef HistPair<int,double> HeightEl;
  typedef std::vector<HistPair<int,double>  > Histogram;
  std::set<double> unique(mHeights.begin(),mHeights.end());
  Histogram res;
  boostForeach(double el, unique) {
    res.push_back(HeightEl(el,mHeights.count(el)));    
  }
  std::sort(res.begin(),res.end());
  std::reverse(res.begin(),res.end()); 
  return res;
} 
```

因此，首先我从多重集中获取所有唯一元素，然后对它们进行计数并将它们分类到一个新容器中（我需要计数，所以我使用地图）。对于如此简单的任务，这看起来相当复杂。除了在其他地方也使用的 HistPair 之外，没有任何 stl 算法可以简化此任务，例如使用 equal_range 或 sth。一样。

编辑：我也需要出现次数，抱歉我忘记了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:31:47.857

此代码段通过组合`std::set`、 lambda 和来满足您的需求`std::multiset::count`：

```
#include <iostream>
#include <set>
#include <vector>
#include <algorithm>

int main() {
    std::multiset<int> st;
    st.insert(12);
    st.insert(12);
    st.insert(12);
    st.insert(145);
    st.insert(145);
    st.insert(1);
    st.insert(2);

    std::set<int> my_set(st.begin(), st.end());
    std::vector<int> my_vec(my_set.begin(), my_set.end());
    std::sort(my_vec.begin(), my_vec.end(), 
      [&](const int &i1, const int &i2) {
          return st.count(i1) < st.count(i2);
      }
    );

    for(auto i : my_vec) {
        std::cout << i << " ";
    }
    std::cout << std::endl;
} 
```

您可能想要反转向量。这输出：

```
1 2 145 12 
```

**编辑**：考虑到您还需要项目计数，这将做到：

```
#include <iostream>
#include <set>
#include <vector>
#include <algorithm>

int main() {
    typedef std::vector<std::pair<int, int>> MyVector;
    std::multiset<int> st;
    st.insert(12);
    st.insert(12);
    st.insert(12);
    st.insert(145);
    st.insert(145);
    st.insert(1);
    st.insert(2);

    std::set<int> my_set(st.begin(), st.end());
    MyVector my_vec;
    my_vec.reserve(my_set.size());

    for(auto i : my_set) 
        my_vec.emplace_back(i, st.count(i));

    std::sort(my_vec.begin(), my_vec.end(), 
      [&](const MyVector::value_type &i1, const MyVector::value_type &i2) {
          return i1.second < i2.second;
      }
    );

    for(const auto &i : my_vec)
        std::cout << i.first << " -> " << i.second << std::endl;
} 
```

哪个输出：

```
1 -> 1
2 -> 1
145 -> 2
12 -> 3 
```

# java - 如何在 Android 4.0 中实现“向上”导航按钮？

> ID：11054561
> 
> 赞同：1
> 
> 时间：2012-06-15T16:16:54.313
> 
> 标签：java, android, xml

我正在通过构建一个简单的聊天应用程序来自学如何构建 Android 应用程序。我有一部 Android 手机，它已经植根并且目前在最新版本的 Android 上（在撰写本文时为 4.0.4 Ice Cream Sandwich）。我一直在疯狂地翻阅 Android Dev Guide 和 Android Design 网站，尽可能多地吸收信息。已经很受益了！

谈论很多的一件事是在 Android 中引入了“向上”导航按钮。虽然我看不到它的真正目的，但这对我来说将是一个很好的学习经验，如何实现它。问题是：我如何实现它？我觉得我可以使用我的应用程序的图标，加上一个灰色的左向箭头来表示返回。我的问题是我不知道如何捕获该输入并创建返回的意图。它与捕获任何其他用户输入并从那里构建侦听器对象相同吗？还是我必须构建一些更复杂的东西？任何和所有的帮助都会非常有帮助，如果我的问题不清楚，我很乐意在必要时改写我的问题。

# java - Java 数组：通过用户输入选择和替换值

> ID：11054562
> 
> 赞同：0
> 
> 时间：2012-06-15T16:16:56.600
> 
> 标签：java, arrays, user-input, replace

在我正在创建的程序中，用户将输入值来创建视频数组。每个视频包含多个数据字段（编号、标题、发布者、持续时间和日期）。然而，我目前试图实现的是让用户在他们刚刚创建的数组中选择一个特定的视频，选择他们希望重命名的数据字段，重命名值，然后将重命名的值设置为新值。这是我将视频添加到数组的代码：

```
public Library createLibrary()
{
    Library video = new Library();
    java.util.Scanner scannerObject =new java.util.Scanner(System.in); 
    for (int i = 0; i < videos.length; i++)
    {
    //User enters values into set methods within the Library class
    System.out.print("Enter video number: " + (i+1) + "\n");
    String number = scannerObject.nextLine();
    System.out.print("Enter video title: " + (i+1) + "\n");
    String title = scannerObject.nextLine();
    System.out.print("Enter video publisher: " + (i+1) + "\n");
    String publisher = scannerObject.nextLine();
    System.out.print("Enter video duration: " + (i+1) + "\n");
    String duration = scannerObject.nextLine();
    System.out.print("Enter video date: " + (i+1) + "\n");
    String date= scannerObject.nextLine();
    System.out.print("VIDEO " + (i+1) + " ENTRY ADDED " + "\n \n");
    //Initialize arrays
    videos[i] = new Library ();
    videos[i].setVideo( number, title, publisher, duration, date  );
    }
    return video;
} 
```

对于那些不明白我的意思的人来说，这是我的选择和替换功能的基本概念：

```
public void replaceVideo(Library[] videos, String replaceTo, String replaceWith) 
    {
    for (int i = 0; i < videos.length; i++) 
        if (videos[i].equals(replaceTo)) {
            videos[i]= replaceWith;
        }
    } 
```

更简单的解决方案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:35:58.760

我看不到您的替换一直有效，因为您似乎正在将库类型和字符串类型与 .equals() 进行比较。

如果您使用 Collection 类之一而不是数组，则 replace 方法将更改为

```
public void replaceVideo(Vector<Library> videos, Library current, Library newCopy)
{
  Collections.replaceAll(videos, current, newCopy);
} 
```

我使用了 Vector，但您可以根据需要使用 Set、List 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:07:39.300

为了使您的代码正常工作，您需要重写 Library.equals 方法以仅比较字符串。否则，您可以将一个样本的视频标题与参数 replaceTo 进行比较。

当然，重写 equals 方法是 OOP 优雅的。试试我的建议和托马斯

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:23:17.593

尝试比较`replaceTo`视频的名称（或任何`replaceTo`应该匹配的名称）：

```
if (videos[i].getName().equals(replaceTo)) { 
```

# c# - 无法信任网络位置上的项目 .DLL

> ID：11054563
> 
> 赞同：0
> 
> 时间：2012-06-15T16:17:00.337
> 
> 标签：c#, visual-studio-2010, visual-studio

我在编辑 Visual Studio 项目时遇到问题，通过该项目将其保存在家里的远程服务器上。

首先，我的设置是：-

1.  Windows 8 64 位 RC，安装了 Visual Studio 2010。
2.  Windows 服务器 2012 RC。使用帐户 (//Dev) 访问共享文件夹。

这里的问题来自 Windows 8 RC，我可以访问共享并创建我想要的项目。但是，如果我构建项目，我会收到此错误：-

无法加载程序集文件：///C:\***.dll。此程序集可能已从 Web 下载。如果程序集是从 Web 下载的，Windows 会将其标记为 Web 文件，即使它驻留在本地计算机上也是如此。这可能会阻止它在您的项目中使用。您可以通过更改文件属性来更改此名称。仅取消阻止您信任的程序集。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=179545](http://go.microsoft.com/fwlink/?LinkId=179545)。

我试图从其属性中取消阻止 .DLL 文件，但 UNBLOCK 按钮不可用。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:45:55.380

有一个关于类似问题的线程：

[在使用 XP 模式的 Windows 7 上构建 Visual Studio 2010 Silverlight 4 项目时出错](https://stackoverflow.com/questions/1823339/error-building-visual-studio-2010-silverlight-4-projects-on-windows-7-with-xp-mo)

在 devenv.exe.config 中的 <configuration> <runtime> 下添加 <loadFromRemoteSources enabled="true"/> 实际上为我在 VS2010 中修复了“此程序集可能已从 Web 下载”问题，试一试。

# solr - 按日期范围求和字段

> ID：11054565
> 
> 赞同：0
> 
> 时间：2012-06-15T16:17:28.043
> 
> 标签：solr, sum, facet

我正在使用 solr 3.6，但我在尝试执行特殊查询时有点卡住了。

我实际上是按日期范围使用构面，`face.date.gap`设置为`+1DAY`. 当然，构面应该返回某个日期范围内的文档计数，但我还需要在构面中使用的相同范围内获取特殊字段的总和。这就像我需要计算我每天每月、每周有多少票……这取决于差距参数。

有任何想法吗？我应该使用 group.query 还是 facet.query？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:23:42.350

我的一个建议是将几周、几天分开处理，并将它们编入索引。例如。今天是第 24 周的一部分。另一个建议是不排除多次​​搜索来服务一个请求。一个用于计算所有其他方面，一个用于返回给定日期范围的计数（基于第一个查询的搜索结果）。

# backbone.js - 我应该如何使用 requireJs 获取 Backbone.Marionette.Application

> ID：11054567
> 
> 赞同：1
> 
> 时间：2012-06-15T16:17:35.400
> 
> 标签：backbone.js, requirejs, marionette

我决定将我`web app`的分成不同的`Apps`（app1，app2）。

为什么从`js/app1.js`我那里得到`undefined`？
我应该如何使用 requirejs 从 app1 访问 mainApp？

这是我的代码：

* * *

**js/main.js**

```
require([
    'js/app',
    'js/app1/app1',
    'js/app2/app2'
],
function (App)
{
    "use strict";
    App.initialize();
}); 
```

* * *

**js/mainApp.js**

```
define([''],
function(app)
{
    var mainApp = new Backbone.Marionette.Application();

    mainApp.start();

    mainApp.initialize = function() {
        Backbone.history.start();
    }

    return  mainApp;
}); 
```

* * *

**js/app1/app1.js**

```
define(['js/mainApp],
function(app)
{
    console.log(app); // undefined
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:57:32.107

使用 require.js，如果所需文件之一有错误，有时它不会显示为错误但返回值变得未定义。在您的情况下，`app`in`js/app1/app1.js`很可能是由于 in 中的错误而未定义`js/mainApp.js`。

仅从您提供的代码中，`js/mainApp.js`就有一个`define`带有空字符串的语句，但希望`App`将其传递给它的函数。尝试删除空字符串并将空列表 ( `[]`) 传递给`define`，而不是传递`App`给那里的函数。

如果您的实际代码没有这些语法问题，但您仍然遇到问题`undefined`，请更新您问题中的代码片段。

尝试这个：

**js/mainApp.js**

```
define(['jquery', 'underscore', 'backbone', 'backbone.marionette'],
function($, _, Backbone)
{
    var mainApp = new Backbone.Marionette.Application();

    // Make sure main app is not undefined here.
    console.log('mainApp:', mainApp);  

    mainApp.start();

    mainApp.initialize = function() {
        Backbone.history.start();
    };

    return  mainApp;
}); 
```

不要忘记为 JS 库提供正确的路径。

# c# - 在 3.ToString() 上调用哪个方法；

> ID：11054577
> 
> 赞同：0
> 
> 时间：2012-06-15T16:18:28.433
> 
> 标签：c#

3.ToString() 调用哪个方法？

1.  System.Int16.ToString()
2.  System.Int32.ToString()
3.  System.Int64.ToString()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:20:32.457

C# 中的所有整数文字默认为`int`( `Int32`)，除非它们对于 来说太大`int`，在这种情况下，它们会成为适合的更大数据类型，例如`long`( `Int64`)。

所以在这种情况下，`Int32.ToString()`被称为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:19:34.687

`System.Int32.ToString()`因为文字整数是 Int32 类型

# python - 简单的json换行符

> ID：11054578
> 
> 赞同：1
> 
> 时间：2012-06-15T16:18:32.287
> 
> 标签：python, django

我正在尝试使用 django python 向客户端发送带有换行符的 json 字符串：

```
 string += u'hello\n'
        data = {'data':string}
return HttpResponse(simplejson.dumps(data), mimetype = 'application/json') 
```

在浏览器端，我得到字符串并在文本编辑器中打开它，但看到 'hello\n' 。是因为 simplejson 转义了换行符吗？如何将它作为换行符而不是两个字符'\n'传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:26:25.760

如果您`\n`在文本编辑器中看到，那是因为您还没有解码它。一旦你在浏览器中将它解码为 JSON 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:23:19.990

`\n`是 JSON 用来表示换行符的转义码。当您解码 JSON 时，它将被转换回换行符。

![在此处输入图像描述](../Images/805690448249f158512b09a1b5e5fbcb.png)

# java - 如何声明这样一个java类？

> ID：11054579
> 
> 赞同：0
> 
> 时间：2012-06-15T16:18:32.113
> 
> 标签：java, generics

以下 java 类声明不正确：

```
public class BookKeeping<T extends Transaction<K extends Money>> { ... } 
```

在这里，不能使用泛型声明`K extends Money`。

我的问题是为什么不允许这种声明？应该如何用 java 泛型声明这样一个类？

**解决方案**

```
class Money {

}

class Dollar extends Money {

}

class Transaction<T extends Money> {

}

public class BookKeeping<K extends Money,T extends Transaction<K>> {
    public void foo () {
        Dollar d = new Dollar();
        Transaction<Dollar> t = new Transaction<Dollar>();
        BookKeeping<Dollar, Transaction<Dollar>> b = new BookKeeping<Dollar, Transaction<Dollar>>(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:38:12.253

您需要指定通用参数和适当的约束，然后将它们用于任何额外的事情。

```
public class BookKeeping<K extends Money, T extends Transaction<K>> { ... } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T16:30:38.047

`public class BookKeeping<K ,T extends Transaction<K extends Money>> { ... }`

您需要先“声明” K 泛型，然后才能嵌套或使用它。它与局部变量的规则相同。

# c - OpenCV - 显示网络摄像头视频时出错

> ID：11054583
> 
> 赞同：0
> 
> 时间：2012-06-15T16:18:51.350
> 
> 标签：c, opencv, webcam

我对 OpenCV 很陌生，我试图通过查看和运行示例代码来了解我的方位。

我正在查看的示例程序之一是用于显示网络摄像头视频的程序。以下是重要的几行（程序不会执行得更远）：

```
// Make frame.
CvCapture* capture = cvCaptureFromCAM(0);

if(!capture) {
    printf("Webcam not initialized....");
}
// Display video in frame. 
```

不幸的是，该`if`语句总是执行。由于某种原因，`capture`没有初始化。

更奇怪的是，当我运行程序时，它甚至给了我一个 GUI 来选择我想使用的网络摄像头：

![网络摄像头选择 GUI](../Images/beeb1c24faa040e6b5b7cb5e27cc862a.png)

但是，即使我选择了网络摄像头，`capture`也没有初始化！

这是什么意思？我该如何解决？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:57:54.067

在您选择网络摄像头之前，OpenCV 可能无法访问它。在这种情况下，请尝试循环播放，直到网络摄像头可用：

```
CvCapture *capture = NULL;
do {
    // you could also try passing in CV_CAP_ANY or -1 instead of 0
    capture = cvCaptureFromCAM(0);
} while (!capture); 
```

如果这仍然不起作用，请调用`cvErrorStr(cvGetErrStatus())`以获取解释错误的字符串。

# c# - 事件节流/排队 - 反应式扩展？

> ID：11054595
> 
> 赞同：8
> 
> 时间：2012-06-15T16:19:24.483
> 
> 标签：c#, .net, system.reactive, silverlight-5.0

我希望在我的一个视图模型中实现一些节流行为。这是一个 Silverlight 应用程序，但我认为这不是特别重要。

考虑一个具有三个属性的类：

*   财产1
*   财产2
*   财产3

每当更新这些属性之一时，都需要进行刷新。

```
private void Refresh()
{
    //Call out to the server, do something when it comes back
} 
```

我的目标如下：

*   如果正在刷新，我们最好取消对服务器的调用，并发出新请求
*   如果更改了属性，我们应该留出一些小时间窗口（可能是 0.1 秒）等待其他更改。这样，如果多个属性被快速更改（例如，以编程方式），我们就不会向服务器发送垃圾邮件请求。每次更改都可以重置 0.1 秒的窗口，但不是必需的。

如果重要的话，我正在使用 ChannelFactory 实现来进行服务器调用。

我可以使用什么样的模式来实现这一点？这是响应式扩展可以帮助我的东西吗？

**编辑：**

将保罗的答案标记为正确。虽然 ReactiveUI 目前不适用于 silverlight5，但它清楚地概述了使用 Rx 解决问题的方法/组合步骤。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T18:46:34.633

以下是使用 ReactiveUI 执行此操作的方法：

```
IObservable<TheData> FetchNewData() 
{
    // TODO: Implement me
}

this.WhenAny(x => x.Property1, x => x.Property2, x => x.Property3, (x,y,z) => Unit.Default)
    .Throttle(TimeSpan.FromMilliseconds(200), RxApp.DeferredScheduler)
    .Select(x => FetchNewData())
    .Switch()    // We only care about the req corresp. to latest values of Prop1-3
    .ToProperty(this, x => x.Data); 
```

**更新：**以下是如何保证一次只运行一个，但需要注意的是您可能会得到无序的结果。

```
this.WhenAny(x => x.Property1, x => x.Property2, x => x.Property3, (x,y,z) => Unit.Default)
    .Throttle(TimeSpan.FromMilliseconds(200), RxApp.DeferredScheduler)
    .Select(_ => Observable.Defer(() => FetchNewData()))
    .Merge(1)
    .ToProperty(this, x => x.Data); 
```

您描述的行为实际上可能是不可取的，因为如果属性不断变化，您最终会得到一个旧请求队列 - 如果您制作类似“BufferingSwitch()”运算符的东西，则可以优化它在确定没有变化之前没有返回结果——写起来真的很酷。

故事的寓意，Async Is Complicated™ :)

# java - Java 7 与 Java6 错误

> ID：11054596
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:19:25.140
> 
> 标签：java, runtime, startup

我遇到一个问题，如果计算机使用低于最新 java7 运行时环境的任何东西，当他们单击 jar 文件时，它会显示“找不到主类：xxx。程序将退出”。

我不明白为什么它在 java6 Runtime 上这样做。有任何想法吗？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:39:58.873

在操作系统级别而不是在 Java 中出现问题。例如，[通过双击在 Vista 上执行 Jar](https://stackoverflow.com/questions/354664/executing-a-jar-on-vista-with-a-double-click)的公认答案解释说，您需要在 Windows 操作系统上正确设置文件关联，以便双击以处理 JAR 文件。

# oracle - oracle 初始化或关闭正在进行中

> ID：11054597
> 
> 赞同：0
> 
> 时间：2012-06-15T16:19:26.117
> 
> 标签：oracle, oracle11g

我收到错误：`oracle initialization or shutdown in progress`连接到 oracle 数据库时。我的机器上安装了 oracle 11g。我什至无法使用“sys”帐户访问我的 sql plus。有没有办法知道oracle数据库中的sys账户密码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T20:18:42.500

**在 linux** ... 杀死 oracle 进程。`pkill -9 -f oracle`

然后`sqlplus / as sysdba`运行

`SQL>startup force`

然后退出并从shell运行`lsnrctl start`

**在 Windows**中...`OracleService<SIDName>`在 Windows 服务中重新启动。并遵循相同的。

确保在两个 env.for 命令中都设置了路径才能正常工作。

类似于[如何解决 ORA-011033: ORACLE 初始化或关机正在进行中](https://stackoverflow.com/questions/53676/how-to-resolve-ora-011033-oracle-initialization-or-shutdown-in-progress?rq=1)

# c# - Windows 8：下载带编码的字符串 (WinRT)

> ID：11054598
> 
> 赞同：1
> 
> 时间：2012-06-15T16:19:28.527
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro

我使用此代码从 Internet 下载字符串

```
public static async Task<string> DownloadPageAsync(string url)
{
    HttpClientHandler handler = new HttpClientHandler {UseDefaultCredentials = true, AllowAutoRedirect = true};
    HttpClient client = new HttpClient(handler);            
    client.MaxResponseContentBufferSize = 196608;
    HttpResponseMessage response = await client.GetAsync(url);

    response.EnsureSuccessStatusCode();

     string responseBody = await response.Content.ReadAsStringAsync();
     return responseBody;
  } 
```

但它仅适用于 UTF8 文档。我在哪里设置编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-27T20:34:44.543

将 ReadAsStringAsync 更改为 ReadAsBufferAsync 并使用所需编码解析结果

```
var buffer = await response.Content.ReadAsBufferAsync();
byte [] rawBytes = new byte[buffer.Length];
using (var reader = DataReader.FromBuffer(buffer))
{
    reader.ReadBytes(rawBytes);
}

var res = Encoding.UTF8.GetString(rawBytes, 0, rawBytes.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:16:08.007

在 WinRT 中，HttpContent 从 Headers 属性中读取 Enconding。如果来自服务器的 HTTP 响应没有设置带有编码的 Content-Type 标头，它会尝试在流中查找 BOM 标记，如果没有 BOM，它将默认为 UTF-8 编码。

如果服务器未发送正确的 Content-Type 标头，您可以使用 HttpContent.ReadAsStreamAsync() 方法并使用您自己的 Encoding 类实例来正确解码数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:22:58.110

设置 HttpResponse 对象的“ContentEncoding”属性：

*   [http://msdn.microsoft.com/en-us/library/system.web.httpresponse.contentencoding%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.contentencoding%28v=vs.71%29.aspx)

价值观包括：

*   [http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.71%29.aspx)

    *   System.Text.ASCIIEncoding
    *   System.Text.UnicodeEncoding
    *   System.Text.UTF7Encoding
    *   System.Text.UTF8Encoding

PS：

这真的不是“地铁”本身——只是 C#/.Net（尽管是 .Net 4.x）

# android - 确定 Android 应用程序（不是我的）可见多长时间

> ID：11054599
> 
> 赞同：2
> 
> 时间：2012-06-15T16:19:33.720
> 
> 标签：android, time, visible

我正在编写一个应用程序，它需要知道任何给定的应用程序对用户可见多长时间。

当应用程序打开并且用户不再可见时（onStop()），我的服务是否可以接收任何系统范围的事件？还是我必须求助于定期轮询 ActivityManager？

应用程序 Tasker( [http://tasker.dinglisch.net](http://tasker.dinglisch.net) ) 似乎能够检测到任何给定应用程序何时可见/不可见。他们只是简单地轮询 ActivityManager，还是有其他方法可以解决这个问题？

参考：
[应用程序运行的时间](https://stackoverflow.com/questions/3903650/time-that-an-application-is-running)
[如何知道应用程序在 android 中运行了多长时间？](https://stackoverflow.com/questions/4133262/how-to-know-for-how-much-long-the-application-is-running-in-android)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T16:26:37.443

您可以通过以下方式检测您的应用是否可见：

在您的所有活动中，设置：

```
@Override
protected void onResume() {
super.onResume();

VisibilityManager.setIsVisible(true);
}

@Override
protected void onPause() {
VisibilityManager.setIsVisible(false);

super.onPause();
} 
```

（这可能会导致您为将实现此行为的所有活动定义一个超类）

然后创建一个 VisibilityManager（这个很基础，你可能需要更高级的东西）：

```
public class VisibilityManager {
private boolean mIsVisible = false;

public void setIsVisible(boolean visible) { 
     mIsVisible = visible; 
}

public boolean getIsVisible() {
     return mIsVisible;
}
} 
```

然后，在您的计时器线程中，当倒计时达到零时，您可以终止应用程序：

```
if (VisibilityManager.getIsVisible()) {
finish();
}
else {
showNotification();
} 
```

# python - 在 trac 插件 (trac-git) 中查找要修改的文件

> ID：11054607
> 
> 赞同：1
> 
> 时间：2012-06-15T16:19:56.403
> 
> 标签：python, windows, compiler-errors, trac

我最近第一次在 Windows 上安装了 Trac。设置完所有内容后，尝试浏览 GIT 存储库中的源时出现此错误：

```
Trac detected an internal error:
WindowsError: (5, 'Access is denied') 
```

看起来很多人都没有遇到过这个问题，因为这个问题的唯一出票错误没有得到很多回应，但是有人建议我修改文件 PyGIT.py。进一步研究我自己的异常，我发现：

```
 return gen.next()
    yield historian

    if p:
        p[0].stdout.close()
        p[0].terminate()    # <-- This line highlighted as the problem
        p[0].wait()

def last_change(self, sha, path, historian=None):
    if historian is not None:
        return historian(path) 
```

现在我不确定，但我读到这与`p[0].terminate()`导致错误的 Windows 处理方式有关，并且建议通过将异常更改为以下内容来忽略该异常：

```
try:
    p[0].terminate()
except WindowsError:
    pass 
```

天气与否，这将起作用，我不知道。但我想知道的是——这个***PyGIT.py***文件到底在哪里？我所要做的就是路径：

```
build/bdist.win32/egg/tracext/git/PyGIT.py 
```

我认为这不是编译文件或其他东西的一部分是对的吗？我安装了将代码作为 .egg 运行的插件

如果有人可以帮我一把，我只想看看我是否可以修改文件！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:53:19.090

如果您将插件安装为 .egg 文件，那么您可能没有源代码。您下载 .egg 文件的网站也应该有其存储库的 URL。只需检查源代码的副本，进行建议的修改，然后用 .egg 重建 .egg `python setup.py bdist-egg`。

# c++ - 如何返回 iterator_range

> ID：11054608
> 
> 赞同：2
> 
> 时间：2012-06-15T16:20:02.333
> 
> 标签：c++, boost, iterator, boost-range, iterator-range

我想创建并保留一个 iterator_range。范围是基于谓词构造的（对于本示例，我查找偶数）。

我可以这样做，但似乎我必须从正在迭代的底层向量中复制元素。

请在下面的示例中查找标记为“>>>”的注释。

有没有办法创建 iterator_range 而不必从原始向量创建条目的副本？

我看过，但还没有看到这种特殊情况的答案。

```
#include <vector>
#include <iostream>

#include <boost/bind.hpp>
#include <boost/range.hpp>
#include <boost/foreach.hpp>
#include <boost/iterator/filter_iterator.hpp>
#include <boost/range/iterator_range.hpp>

using namespace std; 
using namespace boost; 

typedef boost::iterator_range<vector<int>::iterator> int_range;

template< class Range, class Pred >
boost::iterator_range< boost::filter_iterator< Pred, typename boost::range_iterator<Range>::type > > 
make_filter_range( Range& rng, Pred pred ) {
    return boost::make_iterator_range( 
     boost::make_filter_iterator(pred, boost::begin(rng), boost::end(rng)), 
     boost::make_filter_iterator(pred, boost::end(rng), boost::end(rng)) );
}

// This is the predicate evaluation function.
bool IsEvenFilter(int val) { return val % 2 == 0; }

void TestMakeIteratorRange()
{
    std::vector<int> vals;
    vals.push_back(1);
    vals.push_back(4);
    vals.push_back(7);
    vals.push_back(11);
    vals.push_back(16);
    vals.push_back(19);
    vals.push_back(28);

    //>>> The following int_range line does not compile.  Why?
    //>>> How can I return an int_range?
    //>>> int_range intRange = make_filter_range( vals, boost::bind(&IsEvenFilter, _1));

    //>>> The following WILL work, but it forces a second copy of elements from vals.
    std::vector<int> v2 = boost::copy_range< std::vector<int> >( 
        make_filter_range( vals, boost::bind(&IsEvenFilter, _1)));

    int_range intRange = int_range(v2);

    // Dump out contents
    BOOST_FOREACH(int &val, intRange)
    {
        cout << " " << val;
    }
    cout << endl;
}

void main()
{
    TestMakeIteratorRange();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:35:09.463

```
int_range intRange = make_filter_range( vals, boost::bind(&IsEvenFilter, _1)); 
```

您必须存储返回的类型`make_filter_range`。哪个*不是* `int_range`。

这就是`auto`存在的原因（在 C++11 中）；因此，如果要存储函数返回的内容，则不必键入该返回值。如果您无权访问 C++11 `auto`，请[`BOOST_AUTO`](http://www.boost.org/doc/libs/1_49_0/doc/html/typeof/refe.html#typeof.auto)改用。

如果由于某种原因你不能使用它，你也可以使用[`any_range`.](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/ranges/any_range.html) 顾名思义，它可以存储特定类型的任何范围。

此外，请考虑使用[适当的 Boost range-adapters](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/adaptors/introduction.html)，例如[`boost::adaptors::filtered`](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/adaptors/reference/filtered.html)代替`make_filter_iterator`.

# 3d - 如何将 SketchUp 模型导入 After Effects CS6

> ID：11054614
> 
> 赞同：1
> 
> 时间：2012-06-15T16:20:27.777
> 
> 标签：3d, 3d-modelling, sketchup, after-effects

我很难找到将 SketchUp 模型从 Google 的[3D 仓库](http://sketchup.google.com/3dwarehouse/)导入 After Effects CS6 的方法。

如[本教程](http://www.damonledet.com/2009/03/using-google-sketchup-models-in-after-effects-cs4/)所述，在 AE CS5.5 及之前的版本中，可以在 Google 的 3D 仓库中找到 .kmz 文件，在 Photoshop 中打开该文件，将其保存为 .psd 文件，然后在 After Effects 中打开该 .psd 文件.

但是，Adobe 现在[声明](http://help.adobe.com/en_US/aftereffects/cs/using/WS3878526689cb91655866c1103906c6dea-7f29a.html)“在 After Effects CS6 中，不再支持PDS [*原文如此？ ] 文件中的 3D 对象图层。”*

After Effects CS6 显然可以导入 SoftimagePIC、RLA、RPF、OpenEXR 和 Electric Image EI 3D 模型。

如何将 .skp 或 .kmz SketchUp 文件转换为其中一种格式？我试过 SketchUp 7 和 8，但都只能保存为 .skp。Blender 支持大量文件类型，但我还没有找到 After Effects 可以识别的文件类型。

或者，是否有 After Effects CS6 可以导入格式的简单免费 3D 模型资源？

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:57:11.277

After Effects 无法导入任何模型。您所能做的就是像往常一样将 3D 应用程序中的内容渲染到图片或视频上，然后做同样的事情，但将深度信息渲染为 rpf。然后在AE中结合。您将无法更改相机位置，但您将能够应用 3D 效果，例如灯光。但是要以 AE 识别的方式导出内容，您需要昂贵的应用程序，例如 3dmax 或cinema4d。像sketchup这样的免费东西，甚至它的专业版只是一个玩笑，而不是真正的`3D app`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-29T14:50:47.623

这是可能的。如果您仍在搜索 - 或者有人登陆这里：首先将对象数据从sketchup导出到搅拌机： [http](http://ssimpossible.blogspot.nl/2010/10/technically-second-video-tutorial.html) ://ssimpossible.blogspot.nl/2010/10/technically-second-video-tutorial.html 然后从搅拌机至 AE： [http ://cg.bartekskorupa.com/b2ae/](http://cg.bartekskorupa.com/b2ae/)

# jquery - 生成函数后的jquery无限循环

> ID：11054616
> 
> 赞同：0
> 
> 时间：2012-06-15T16:20:33.033
> 
> 标签：jquery, loops, infinite-loop, infinite

我有一个通过淡入淡出来旋转各种广告的功能，但我需要它无限循环，直到有人点击其中一个图像。这是功能

```
$(document).ready(function() {
    /* thumbnail ads */
    $('#adthumb1').delay(3500).fadeIn(1500).delay(9000).fadeOut(1500);
    $('#adthumb2').fadeIn(0000).delay(3500).fadeOut(1500).delay(2000).fadeIn(1500);
    $('#adthumb3').fadeIn(0000).delay(7000).fadeOut(1500).delay(2000).fadeIn(1500);
    $('#adthumb4').fadeIn(0000).delay(10500).fadeOut(1500).delay(2000).fadeIn(1500);
    /* main ads */
    $('#mainad1').fadeIn(0000).delay(3500).fadeOut(1500);
    $('#mainad2').delay(3500).fadeIn(1500);
    $('#mainad3').delay(7000).fadeIn(1500);
    $('#mainad4').delay(10500).fadeIn(1500);
}); 
```

任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:24:37.990

您可以使用[setInterval](https://developer.mozilla.org/en/window.setInterval)，捕获 intervalID，并使用[clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)取消包含轮播广告的 div 上的点击处理程序中的循环。

# php - CodeIgniter PDO 数据库驱动程序不工作

> ID：11054618
> 
> 赞同：12
> 
> 时间：2012-06-15T16:20:40.817
> 
> 标签：php, mysql, codeigniter, pdo

我正在尝试在我的 CodeIgniter 应用程序中使用 PDO MySQL 驱动程序。这是我的数据库配置：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'testdatabase';
$db['default']['dbdriver'] = 'pdo';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

但是，当我加载控制器时出现此错误：

> 致命错误：在 C:\xampp\htdocs\testsite\system\database\drivers\pdo\pdo_driver.php:114 中未捕获的异常 'PDOException' 和消息“无效的数据源名称”

我已经使用`die($this->hostname);`in检查了数据源`pdo_driver.php`，结果如下：

```
localhost;dbname=testdatabase 
```

所以它得到了正确的数据库名称。数据库存在，我确实运行了 MySQL。

这里可能出了什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-27T15:57:57.220

在文件**/application/config/database.php**上

```
$db['default']['hostname'] = 'localhost'; 
```

一定是

```
$db['default']['hostname'] = 'mysql:host=localhost'; 
```

*localhost*或您的数据库主机。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-15T16:23:59.770

这不应该是这样。

```
localhost;dbname=testdatabase 
```

应该

```
mysql:dbname=testdatabase;host=localhost; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-26T08:12:57.893

PDO 驱动程序需要提供完整的 DSN 字符串。像这样的字符串

```
'dsn' = ‘mysql:host=localhost;dbname=databasename’; 
```

当您使用此字符串时，您应该从数组中删除主机和数据库名称值。我认为以下示例为您提供了一个想法。

```
$db['default'] = array(
'dsn'   => 'mysql:host=localhost;dbname=codeigniter3',
'hostname' => '',
'username' => 'root',
'password' => '',
'database' => '',
'dbdriver' => 'pdo',
'dbprefix' => '',
'pconnect' => FALSE,
'db_debug' => TRUE,
'cache_on' => FALSE,
'cachedir' => '',
'char_set' => 'utf8',
'dbcollat' => 'utf8_general_ci',
'swap_pre' => '',
'encrypt' => FALSE,
'compress' => FALSE,
'stricton' => FALSE,
'failover' => array(),
'save_queries' => TRUE
); 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T07:05:16.257

根据 CodeIgniter 的[数据库配置](http://www.codeigniter.com/user_guide/database/configuration.html)页面，

对于 PDO 驱动程序，您应该将“ **`hostname => 'localhost'`**”更改为“ **`'hostname' => mysql:host=localhost`**”，如下所示：

```
$db['default'] = array(
    'dsn'   => '',
    'hostname' => 'mysql:host=localhost',
    'username' => 'root',
    'password' => '',
    'database' => 'database_name',
    'dbdriver' => 'pdo',
    'dbprefix' => '',
    'pconnect' => FALSE,
    'db_debug' => (ENVIRONMENT !== 'production'),
     .....
     .....
); 
```

# c# - 如何声明只能在运行时初始化的 const

> ID：11054619
> 
> 赞同：4
> 
> 时间：2012-06-15T16:20:42.350
> 
> 标签：c#

我的课程包含`LOT_SIZE`无法更改的常量。但我只能在执行期间对其进行初始化，因为我`LOT_SIZE`是在运行时从 Securities 表中获取的。但是，我想明确表示这是不变的，并且我想保护它免受任何其他地方的更改，除了我要初始化它的一个“朋友”地方（“证券”表读取）。

我们在 C# 中有什么东西，或者我只需要`LOT_SIZE`用作常规变量吗？

我不能声明`LOT_SIZE`，`readonly`因为在对象构造期间“证券”表仍未读取，所以我不知道`LOT_SIZE`价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:35:39.763

最好的方法可能是在创建必须保存它的类之前读取该值，因此您可以将其传递给构造函数并将其放入`readonly`字段中。但是，由于您排除了以明显的方式进行操作...

您可以使用只读属性（具有 get 但未设置的属性）并始终通过该属性访问它，除非在您最初设置值的位置。

如果您甚至不想冒险从自己的类中更改它，那么创建一个类来“包装”该值。此类只会在第一次需要时读取该值并将其作为只读属性公开给您的使用者类。

但无论您选择哪种方式，请不要为您的常量使用“1970 年代 C 宏常量”（ALL_CAPS）命名 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:23:31.487

您不能以可以在一个地方而不是在任何其他地方修改的方式声明变量（除了您排除的 readonly ）。

我建议你使用某种“惰性模式”。编写一个包装一个值并允许该值被设置一次的类。您可以将引用此类实例的变量设为只读。

```
class WriteOnce<T>
{
 T _val;
 bool _isInitialized;

 public T Value {
  get { if (!_isInitialized) throw; return _val; }
  set { if (_isInitialized) throw; _val = value; }
 }
}

...

class SomeOtherClass {
 readonly WriteOnce<int> LOT_SIZE = new WriteOnce<int>();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:25:10.357

您可以使用私有成员变量创建一个从表中读取的类（甚至使该类成为 Singleton 以获得超级幻想）。然后制作一个只有 getter 的静态公共变量。这有点矫枉过正，但这是允许在初始化后设置它的唯一方法，但只能修改一次。

# javascript - 如何创建人类可读的规范化字符串？

> ID：11054621
> 
> 赞同：1
> 
> 时间：2012-06-15T16:20:50.763
> 
> 标签：javascript, coffeescript, normalize

我需要替换特殊字符，例如

*   ü -> ue
*   ä -> ae
*   é -> e

在一个字符串中。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:20:51.857

谷歌搜索后，我找不到任何合适的东西。所以我最终写了我自己的。

```
normalize = (s) ->

  mapping = 
    'ä': 'ae'
    'ö': 'oe'
    'ü': 'ue'
    '&': 'and'
    'é': 'e'
    'ë': 'e'
    'ï': 'i'
    'è': 'e'
    'à': 'a'
    'ù': 'u'
    'ç': 'c'
    "'": ''
    '´': ''

  r = new RegExp(Object.keys(mapping).join('|'), 'g')
  s.replace(r, (s)->
    mapping[s]
  ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:23:59.523

考虑[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)（和相关的解码）。

该 w3schools 页面上给出的示例：

```
var uri="http://w3schools.com/my test.asp?name=ståle&car=saab"; 
```

document.write(encodeURIComponent(uri));

输出：

```
http%3A%2F%2Fw3schools.com%2Fmy%20test.asp%3Fname%3Dst%C3%A5le%26car%3Dsaab 
```

注意中间的 å 变成`%C3%A5`。

如果你不介意`* @ - _ + . /`不被编码，还有[escape()](http://www.w3schools.com/jsref/jsref_escape.asp)（和 unescape()）。

根据“人类可读”要求进行编辑：

请注意，通过执行“oe”类型替换可能会出现所有字符，并且不要尝试将这些“可读”字符串转换回它们的原始形式，否则会破坏转换中的内容。这就是 escape 和 unescape 方法的重点。

考虑在您自己的转换后应用转义/取消转义以捕获任何剩余的意外字符。

# asp.net - 发送电子邮件到 Exchange 时 ASP.NET 应用程序双跳问题

> ID：11054623
> 
> 赞同：0
> 
> 时间：2012-06-15T16:20:54.063
> 
> 标签：asp.net, delegation

我为内部目的创建了一个 ASP.NET 应用程序，域用户在该应用程序中访问一个简单的 Web 表单，填写表单并提交。该应用程序模拟用户并以登录域用户的身份向我们的票务系统发送一封电子邮件，在该系统中，填写表单的用户会生成票证。现在，当我通过登录到 IIS (7.5) 所在的同一台服务器并提交表单进行测试时，一切正常，但是当我尝试从桌面执行相同操作（打开浏览器并指向 Web 服务器）时，它不起作用. 在调查了这个问题之后，我发现这可能是一个双跳问题（当交换管理员在几次尝试失败后检查日志并发现该站点试图以 NTAuthority/Anonymous 发送电子邮件时，我确认了这一点。）

我在网上搜索了很多关于这个问题的信息，但我似乎只能找到详细说明与早期版本的 IIS（IIS 5 或 6）相关的问题的文章。我使用的是 7.5，所以我不确定解决此问题的过程会有什么不同。在 IIS 7.5 上遇到此问题的人能否发布解决与 IIS 7.5 相关的双跳并将模拟电子邮件发送到 Exchange 服务器的基本分步说明？大意是，第一步——做这个，第二步——做这个，等等……</p>

我遇到的另一个问题如下：我读过的许多文章都指定为委派设置服务帐户，然后创建 SPN...但是对于 IIS 7.5，我可以选择使用应用程序池标识。应用程序池身份是否可以与委派模拟一起使用，或者是否需要服务帐户来解决问题？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:10:50.523

根据您的描述，听起来您的 ASP.NET 应用程序正试图通过他们的 Windows 网络登录凭据来确定登录用户？

如果是这样，您需要做的就是关闭 IIS 站点中的“启用匿名访问”，并确保“身份验证访问”已打开“集成 Windows 身份验证”。然后 IIS 应该正确地向浏览器查询他们的登录信息，并且会话应该使用用户的凭据。这假设一些关于所使用的客户端浏览器的事情，如果使用了 Internet Explorer 以外的其他东西，那么您可能还需要打开其他身份验证方法之一，以便其他浏览器正确提示用户输入他们的网络登录凭据。抱歉，我目前没有正在运行的 IIS 7.5 服务器来为您提供要查看的确切站点属性和描述。所以如果你不能从我这里的描述中确定，

# c++ - 在执行过程中休眠一个线程

> ID：11054625
> 
> 赞同：1
> 
> 时间：2012-06-15T16:20:58.850
> 
> 标签：c++, multithreading, boost, boost-thread

当一个线程在执行过程中`sleep`被其他线程（可能由主线程）放入时会发生什么？

假设我有一个函数`Producer`。如果`Consumer` `sleep()`生产者正在生产一个单元怎么办？

假设该单位生产了一半。然后它放在 sleep() 上。系统完整性可能存在问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:24:01.690

被调用的线程`sleep`被线程调度程序放入空闲队列中，并从运行它的 CPU 中切换到上下文，因此其他线程可以取代它。

所有上下文（寄存器、堆栈指针、基指针等）都保存在线程堆栈中，因此下次运行时，它可以从中断处继续。

操作系统不断在线程之间进行上下文切换，以使您的系统看起来像是在做多种事情。操作系统线程调度程序算法负责这一点。

线程调度和线程是一个很大的课题，如果你想真正理解它，我建议你开始阅读它。:)

编辑：`sleep`不建议用于线程同步目的，您应该使用适当的同步机制来告诉线程等待其他线程等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:31:42.677

我不知道一个线程强制导致另一个线程休眠的方法。如果两个线程正在访问共享资源（例如输入/输出队列，这对于您的生产/消费者示例来说很可能），那么两个线程可能会争夺同一个锁。如果争用不是“trylock”种类，失败的线程必须等待其他线程释放锁。等待的线程被放入与锁关联的等待队列中，并从调度程序运行队列中删除。当获胜的线程释放锁时，代码会检查队列以查看是否还有线程在等待获取它。如果有，则选择一个作为获胜者并获得锁，并将其放入调度程序运行队列中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:29:20.470

这没有任何问题，除非在线程休眠时某些状态发生了变化，因此它会以与休眠前不同的一组值唤醒。

线程一直由 CPU 切换进出执行，但这不会影响它们执行的整体结果，假设不存在数据竞争或其他错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:26:11.443

一个线程强制同步干扰另一个线程的执行是不可取的。一个线程可以向另一个线程发送异步消息，请求它以某种方式重新调度自己，但是当另一个线程处于合适的状态时，它将由另一个线程处理。

假设它们使用线程安全的通道进行通信，那么应该不会发生任何不好的事情，因为睡眠线程最终会唤醒并从其任务队列中获取数据，或者看到已设置一些信号量并读取已生成的数据。

如果线程使用非易失变量或改变状态的直接函数调用进行通信，那就是坏事发生的时候。

# backbone.js - 这是在骨干网中使用路由器的正确方法吗？

> ID：11054627
> 
> 赞同：1
> 
> 时间：2012-06-15T16:21:22.567
> 
> 标签：backbone.js

我刚开始研究backbone.js，我不确定使用路由器的最佳方式是什么。

```
App.Events = _.extend({}, Backbone.Events);

App.HouseDetailRouter = Backbone.Router.extend({
    routes: {
        '': 'main',
        'details/:id': 'details',
    },
    initialize: function() {

    },
    main: function() {
        App.Events.trigger('show_main_view');  
    },
    details: function(id) {
        model = App.houseCollection.get(id);
        App.Events.trigger('show_house', model);
    },
}); 
```

路由器应该像上面那样触发事件，然后让视图监听这些事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:13:14.090

This is actually not a bad way to use a router as it relegates the router to simply handling routes as opposed to business logic. What you might consider when using a router this way is to have a controller object listen to the router events then update the app's models. When the models change state the views would update.

# javascript - 如何为表格中已有的每个链接创建基于 URL 的一部分的链接？

> ID：11054632
> 
> 赞同：1
> 
> 时间：2012-06-15T16:21:39.117
> 
> 标签：javascript, greasemonkey

我感到相当沮丧，因为我觉得这可能很容易/很明显，我只是没有把这些碎片放在一起。我正在尝试创建一个 GM 脚本，该脚本将查看表中的每个 URL，提取每个 URL 的一部分（每个条目唯一），然后插入一个*新*链接，该链接将出现在每个条目之后。

这是 HTML 的外观示例：

```
<table border="1" cellpadding="1" cellspacing="0" width="400">
<tbody>
<tr>
    <td>
        <a href="http://website.com/names/1936">joseph smith</a>
    </td>
    <td>11</td>
</tr>
<tr>
    <td>
        <a href="http://website.com/names/1756">john smith</a>
    </td>
    <td>1</td>
</tr>
<tr>
    <td>
        <a href="http://website.com/names/350466">scott smith</a>
    </td>
    <td>0</td>
</tr>
<tr>
    <td>
        <a href="http://website.com/names/789533">adam smith</a>
    </td>
    <td>6</td>
</tr>
</tbody>
</table> 
```

对于每个条目，我想确定“/names/”之后的数字，它对每个名称都是唯一的，并且长度并不总是相同。然后我想在已经存在的链接*之后*插入一个新链接，如下所示：

```
<a href="http://website.com/names/[number]/edit">[number]</a> 
```

对于它的外观的基本示例，我想要这个（对于每个条目）：

```
<tr>
    <td>
        <a href="http://website.com/names/1936">joseph smith</a> <a href="http://website.com/names/1936/edit">1936</a>
    </td>
    <td>11</td>
</tr> 
```

任何帮助将非常感激。正如我所说，我觉得我有点密集，而且这应该比我想象的要简单得多。几天来我一直在努力解决这个问题，但我似乎无处可去（我还没有完全精通 javascript！）。

**更新**：为了澄清，我的困难是做我认为是三件事：1）识别这些特定的 URL（与可能出现在表格或页面中其他地方的任何其他 URL 不同）从 URL 中提取数字 3）插入新的每个链接之后的链接

我无法更改已经存在的 HTML 代码，例如提供 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:29:25.077

```
var slash=str.lastIndexOf("/");
var number=str.slice(slash); 
```

其中 str 是包含 url 的字符串。第一行获取字符串中最后一个 / 的位置，第二行将字符串从该 / 的索引分割到字符串的末尾，为您提供 URL 中 / 之后的所有内容

然后“数字”将是代表这些数字的变量

给表一个 ID，id="mytable"。您需要包含 jQuery 库才能使其正常工作。

```
$('#mytable tr').each(function() {
    var url= $(this).find("td:first").html();
    //at this point url holds the contents of the entire td

}); 
```

.. 然后您可以使用一系列“lastIndexOf”和“slice”语句来修剪 url 周围的区域以隔离您需要的信息

试试这个，

```
var count = 1
$('table').each(function(){
   (this).attr("id", "table"+count);
   count++;
}); 
```

这将为页面上的每个表分配一个 ID。所以第一个表的 id 为 table1，第二个表为 table2。

然后您可以使用该功能（我假设它是您想要的第二张表），

```
$('#table2 tr').each(function() {
    var url= $(this).find("td:first").html();
    //at this point url holds the contents of the entire td
}); 
```

并且，如上所述，使用 indexOf 和 slice 函数来隔离您的号码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:16:16.733

我将假设在这里使用 jQuery 是可以的。我试图对此进行相当冗长的评论，以便让您对每一步发生的事情有一个很好的了解

```
// Get all <a> tags within the table and loop over them
$("table a").each( function() {
    // Get the url this <a> tag points to
    var url = $(this).attr("href");

    // Parse the id using regex (find a string of numbers following a "/"
    var userId = url.replace( /.*\/(\d+).*/, "$1" );

    // Create the new, desired, url
    var newUrl = "http://website.com/names/" + userId + "/edit/";

    // Append the new link after this <a> tag
    $(this).after( "<a href='" + newUrl + "'>" + userId + "</a>" );
} ); 
```

希望这可以帮助。如果您有任何问题，请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T00:50:43.127

这是一个完整的脚本，它展示了如何使用[jQuery](http://jquery.com/)来做到这一点，并使用 CSS 样式使它看起来更好：

```
// ==UserScript==
// @name     _Add edit links after user links
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==

//--- This next selector is highly page-specific.
var nameLinks   = $("td a[href*='names']");
nameLinks.each ( function () {
    /*---   From: <a href="http://website.com/names/1756">john smith</a>
            Make: <a href="http://website.com/names/1756/edit">Edit user 1756</a>
            (Plus some housekeeping.)
    */
    var newURL  = this.href.replace (/names\/(\d+)$/i, "names/$1/edit");
    var userNum = RegExp.$1;    // Special feature of replace().

    $(this).after (
        '<a href="' + newURL + '" class="gmEditLink">Edit user ' + userNum + '</a>'
    );
} );

GM_addStyle ( '                         \
    a.gmEditLink {                      \
        margin-left:            1em;    \
        font-size:              80%;    \
        vertical-align:         super;  \
    }                                   \
' ); 
```

# c# - 与系统时钟同步运行每分钟（不适用于 Windows Server 2003）

> ID：11054633
> 
> 赞同：2
> 
> 时间：2012-06-15T16:21:41.677
> 
> 标签：c#, timer, system, sync, clock

我试图让计时器每分钟运行一次，与系统时钟（00:01:00、00:02:00、00:03:00 等）同步。这是我的代码。

```
private System.Timers.Timer timer;

public frmMain()
{
    timer = new System.Timers.Timer();
    timer.AutoReset = false;
    timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    timer.Interval = GetInterval();
    timer.Start();
}

private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{

        System.Diagnostics.Trace.WriteLine(DateTime.Now.ToString("hh:mm:ss tt"));
            timer.Interval = GetInterval();
            timer.Start();

}
private double GetInterval()
{
    DateTime now = DateTime.Now;
    return ((60 - now.Second) * 1000 - now.Millisecond);
} 
```

它在我的家用电脑上完美运行。

```
12:12:00 AM
12:13:00 AM
12:14:00 AM
12:15:00 AM
12:16:00 AM
12:17:00 AM
12:18:00 AM
12:19:00 AM
12:20:00 AM
12:21:00 AM 
```

但是，我在我的 VPS（Windows Server 2003）上得到了奇怪的结果。

```
12:11:59 AM
12:12:59 AM
12:13:00 AM
12:13:59 AM
12:14:00 AM
12:14:59 AM
12:15:00 AM
12:15:59 AM
12:16:00 AM
12:16:59 AM
12:17:00 AM
12:17:59 AM
12:18:00 AM
12:18:59 AM
12:19:00 AM
12:19:59 AM
12:20:00 AM
12:20:59 AM
12:21:00 AM 
```

是因为 System.Timers.Timer 在 windows server 2003 上不能正常工作吗？还是我的 VPS 有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:28:26.783

像这样的普通计时器`System.Timers.Timer`并不准确，也不足以达到 1 毫秒的间隔。

首先，它们的内部更新速率为 10-15 毫秒。其次，根据系统，其他线程可能会运行约 15 毫秒，从而在 Windows 强制它们让步之前延迟您的计时器。

如果您想要比另一个线程中报告的 Timer 使用更准确`System.Diagnostics.Stopwatch`，它可以从 0.3 毫秒开始，并与您的 .NET 环境集成。

另一种选择是使用多媒体时间（精确到 1ms 左右）。

无论哪种方式[，这里](http://www.codeproject.com/Articles/1236/Timers-Tutorial)都是关于这个问题的优秀教程。

分解它：

定时器漂移通常会增加定时器的延迟。但你看到相反的情况发生。由于计时器没有毫秒精度（它们仅精确到 15 毫秒范围内），它们通常会以该粒度被触发。因此，实际上在某些情况下会在分钟标记前几毫秒触发计时器（导致它在之后立即触发）。如果您要求它只在新的一分钟内触发，我会添加几毫秒的等待时间来补偿（5ms 应该这样做）。

您的家用电脑不是那么快（这意味着它会在处理计时器处理程序时表现出额外的计时器漂移）并且通常会在下一秒触发事件。您的工作 PC 有时会设法以足够快的速度处理计时器事件，以记录过去 59 秒（我确实认为它被截断，可能是 59.900 ~ 59.999）。如果机器是多核的，也可能发生这种情况，因为没有线程屈服延迟并且可以非常快速地触发计时器。

这就是您的 Timer 异常的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:36:40.367

((60 - now.Second) * 1000 - now.Millisecond)

这意味着如果 now.Second 恰好是 59，您的时间将在不到一秒的时间内再次触发。这就是你奇怪结果的原因（计时器没有在 0 秒偏移处触发）。

让计时器每秒触发一次，将先前的日期/时间值保存在单独的变量中，并在第二部分更改时更新屏幕计时器，这可能会更有效率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:42:21.597

而不是使用 DateTime.Now 并拉动各个部分，只需使用[Ticks](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)。开始时获取滴答声，然后计算下一个计时器滴答声的滴答声。一旦发生该计时器滴答，使用最后一个值来计算下一个值应该是什么。

**示例**：

```
 private const long MILLISECOND_IN_MINUTE = 60 * 1000;
    private const long TICKS_IN_MILLISECOND = 10000;
    private const long TICKS_IN_MINUTE = MILLISECOND_IN_MINUTE * TICKS_IN_MILLISECOND;

    private System.Timers.Timer timer;
    private long nextIntervalTick;

    public void frmMain()
    {
        timer = new System.Timers.Timer();
        timer.AutoReset = false;
        timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        timer.Interval = GetInitialInterval();
        timer.Start();
    }

    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {

        System.Diagnostics.Trace.WriteLine(DateTime.Now.ToString("hh:mm:ss tt"));
        timer.Interval = GetInterval();
        timer.Start();

    }
    private double GetInitialInterval()
    {
        DateTime now = DateTime.Now;
        double timeToNextMin = ((60 - now.Second) * 1000 - now.Millisecond) + 15;
        nextIntervalTick = now.Ticks + ((long)timeToNextMin * TICKS_IN_MILLISECOND);

        return timeToNextMin;
    }
    private double GetInterval()
    {
        nextIntervalTick += TICKS_IN_MINUTE;
        return TicksToMs(nextIntervalTick - DateTime.Now.Ticks);
    }
    private double TicksToMs(long ticks)
    {
        return (double)(ticks / TICKS_IN_MILLISECOND);
    } 
```

您可能可以像以前一样使用 Seconds 和 Milliseconds 来做到这一点。诀窍是有一个起点来计算（而不是确定下一分钟的秒数）。如果原始问题中未提及其他问题，例如 timer_Elapsed 中的代码可能需要更长的时间才能运行，那么您将需要添加代码来处理此问题。

如果您需要其他帮助，请发表评论。否则请选择正确答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-31T14:49:32.380

您好，另一个示例是使用 System.Windows.Threading 中的计时器。

```
using System;
using System.Windows.Threading;

namespace Yournamespace
{
    public partial class TestTimer
    {
        DispatcherTimer dispatcherTimer1m;
        public TestTimer()
        {
            dispatcherTimer1m = new  DispatcherTimer();
            dispatcherTimer1m.Tick += new EventHandler(DispatcherTimer1m_Tick);
            dispatcherTimer1m.Interval = TaskHelper.GetSyncIntervalms;
            dispatcherTimerm.Start();

        }

        private void DispatcherTimer1m_Tick(object sender, EventArgs e)
        {
            try
            {
            dispatcherTimer1m.Stop();           
            //Do your effort here
        }
        catch (Exception exc)
        {
                //Your exception handled here
        }
        finally
        {  
            dispatcherTimer1m.Interval = TaskHelper.GetSyncInterval1m;
            dispatcherTimer1m.Start();
            }
        }   
    }
    public class TaskHelper
    {
        private const ushort internalUpdate = 15;//ms        
        public static TimeSpan GetSyncInterval1m => new TimeSpan(0, 0, 0, 60,internalUpdate).Subtract( new TimeSpan(0, 0, 0, DateTime.Now.Second, 0));
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T16:42:35.520

请记住，Windows Server 默认设置为比客户端版本更愿意与后台任务共享资源，因此如果服务器正在运行大量后台任务，则计时器的准确性可能会受到影响。

您可以尝试暂时更改它以优先处理前台任务，以查看是否会产生不同的结果 - 该设置位于系统控制面板中的某处，您正在寻找两个单选按钮，一个显示“程序”，一个显示“后台”服务”或类似的。

# ios - iOS 通知和服务器检查

> ID：11054641
> 
> 赞同：0
> 
> 时间：2012-06-15T16:22:01.613
> 
> 标签：ios, web-services, background, gps

我是第一次为IOS制作程序。我从来没有iPhone，所以我真的不明白它是如何工作的......

我想让我的系统能够在后台调用 web 服务，并根据答案显示通知。

我怎样才能做到这一点？我在互联网上读到我可以将通知推送到手机，但这并不能解决我的问题，因为我希望我的服务器跟踪用户位置，所以它需要用户默默地告诉服务器它的 gps 坐标。

谢谢你，GustDD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:38:25.450

我建议先构建应用程序以在前台运行。我假设您已经了解如何使用 GPS，因此不会对此进行详细介绍。

首先，您需要几乎同时编写服务器后端和应用程序。明智地编写服务器后端语言有很多选择。我更喜欢 python，其他的 ruby​​ on rails。您想为 iDevice 可以使用简单 HTTP 协议与之通信的服务器构建一个[REST API](http://en.wikipedia.org/wiki/Representational_state_transfer)。

您必须决定 API。您必须考虑要发送和接收什么样的数据以及如何包装数据。此外，对于特定请求，您将使用什么 HTTP 协议，例如 GET POST 等。此外，您必须根据要发送或接收的数据来决定服务器上的哪个 URL 对 GET 或 POST 有用。我建议您使用[JSON](http://www.json.org/)来包装您的数据。它非常直观且易于编码和解码。

接下来，您必须决定如何在 iOS 中与服务器通信。有许多很棒的第三方库可以[修饰 NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)或者您可以使用[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)本身（有时有点乏味）。我个人喜欢使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它将为您进行[JSON](http://www.json.org/)解码和编码，这是一个很大的好处。

最后，一旦你让两者以你想要的方式和你想要的数据进行通信，现在是时候修饰它了。您可以让您的应用程序在后台运行并收集 GPS 数据并将其发送。您还可以使用通知中心在后台显示从服务器获取的信息。

**更新评论**

[这将对](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)您进行后台编程非常有帮助。从 Android 的角度来看，iOS 有点不同，因为 iOS 中的 Android 服务并没有真正的直接关联。将您的项目组合在一起的每个小细节都在该链接中。

# html - firefox - html5 视频 - 默认视频后备不显示

> ID：11054653
> 
> 赞同：4
> 
> 时间：2012-06-15T16:22:45.623
> 
> 标签：html, firefox, video

我使用最新的 firefox 浏览器，我想在`fallback message`firefox 不支持视频格式时显示默认值（如 html5 文档所述），但 firefox 仅`poster`在其上显示图像和文本“*没有找到支持格式和 MIME 类型的视频*”

任何想法如何显示`This is FALLBACK MESSAGE content`（必须显示）而不是`firefox error message`？谢谢

```
<video poster="movie.jpg" controls>
        <source src="movie.mp4" type='video/mp4; codecs="avc1.4D401E, mp4a.40.2"'/>
        <p>This is FALLBACK MESSAGE content</p>
</video> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T04:47:25.357

根据规范，如果浏览器支持，则不得显示回退`<video>`，即使它碰巧不支持提供的编解码器.....因此，您在 Firefox 中看到的行为：规范需要该行为。

# android - API 级别低于 9 的 android:filterTouchesWhenObscured 的类似物

> ID：11054654
> 
> 赞同：4
> 
> 时间：2012-06-15T16:22:47.183
> 
> 标签：android, android-2.1-eclair, obscured-view

从 API 级别 9 开始`android:filterTouchesWhenObscured`，`setFilterTouchesWhenObscured`在`ViewGroup`. 例如，当一个视图已`onClickListener`设置并且另一个视图遮住了该视图（例如，覆盖面板、烤面包或其他任何东西）时，触摸将不会传递给被遮蔽的视图 - 在我的示例中，`onClick`不会触发。

但是，这在 API 级别 7 中不可用 - 对于我的项目，要求是 Android 2.1 及更高版本，这意味着我必须使用级别 7。

有没有简单的方法解决它？在第 7 级中，此属性本质上被硬编码为 FALSE。结果，我得到了这个奇怪的行为：在一个视图上，我有一个按钮。按下时，另一个视图滑入到位，用按钮覆盖视图。在这个视图中，有它自己的按钮，但它与下方按钮的位置不匹配。因此，如果用户在下面的按钮所在的位置触摸覆盖面板，则`onClick`该按钮的 将再次触发 - 这不是我想要/需要的。

在这种情况下，我能做些什么来防止`onClick`射击？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T10:36:57.427

事实证明，没有办法做到这一点。在 API 级别 9 之前的 Android 中，有两种方法可以解决此问题：

1.  从底层视图中删除侦听器（在我的情况下，我有大约十几个，我需要删除它们，然后在覆盖层再次不可见后重新设置）；或者

2.  在整个叠加层上添加一个空的 onClickListener（即拦截`click`事件并且不对其执行任何操作）——这就是我在我的情况下处理它的方式。

有趣的是，接收事件的隐藏视图的行为`click`在早期版本的 Android 中被报告为一个错误，但该错误已关闭，表明它不是错误而是预期的功能（我不明白为什么有人会想要那个功能尽管）。我想该`android:filterTouchesWhenObscured`属性是在第 9 级中添加的，以安抚所有不开心的开发人员:)

# doctrine - 将字符串转换为十进制时保持精度

> ID：11054659
> 
> 赞同：0
> 
> 时间：2012-06-15T16:22:59.557
> 
> 标签：doctrine, symfony-1.4, database-migration, schema.yml

我有一个数据库，其中包含字符串类型的列，其中包含十进制值。这些小数是经度和纬度，因此这些数字在点后可以长 8 个单位。

我想将类型从字符串转换为十进制。问题是，当我在我的 中分配十进制类型时`schema.yml`，它会将值四舍五入到点后的 2 个单位，如果我有一个 12 的比例参数和 16 的大小（很大），它会在点并在末尾添加 10 个零。

```
lat: { type: string(255), notnull: false } 
```

至

```
lat: { type: decimal, scale: 12, size:16, notnull: false } 
```

有没有办法将这些列迁移到十进制类型而不会丢失精度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:39:35.270

你真的需要小数吗？

因为关于[Doctrine bug tracker 上的旧票，](http://www.doctrine-project.org/jira/browse/DC-62)对于这种情况，使用 a`float`而不是 a似乎更好。`decimal`

试试看。

# c# - 带有 scaletransform 的自定义边框无法正常工作

> ID：11054661
> 
> 赞同：0
> 
> 时间：2012-06-15T16:23:02.387
> 
> 标签：c#, wpf, xaml

我正在使用下面的模板来呈现一个半透明的“标签”来显示某些数据。如您所见，显示器是椭圆的（我为此使用 Border.CornerRadius）。我现在正尝试在基于鼠标进入/存在时弹出并收缩标签。这行得通，但问题是，当弹出时，显示的文本显示为矩形，而不是椭圆。此外，似乎文本本身被扩展时，边框不是，导致一些文本被截断. 所以总结一下......我怎样才能让弹出窗口也显示为椭圆而不切断任何文本？

```
 <DataTemplate x:Key="LabelTmplt" >
    <Border Name="myBorder" BorderThickness="0" CornerRadius="9" RenderTransformOrigin="0.5,0.5" >
        <Border.Background>
            <SolidColorBrush Opacity=".3" Color="Red"/>
        </Border.Background>
        <TextBlock Text="{Binding Path=Text}" Padding="5,1,5,1.5" Margin="0,0,0,0"/>
        <Border.RenderTransform>
            <ScaleTransform />
        </Border.RenderTransform>
        <Border.Triggers>
            <EventTrigger RoutedEvent="MouseEnter">
                <BeginStoryboard>
                    <Storyboard TargetName="myBorder">
                        <DoubleAnimation Duration="0:0:0.25" To="1.5" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)">
                            <DoubleAnimation.EasingFunction>
                                <BackEase Amplitude="2" EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation Duration="0:0:0.25" To="1.5" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                            <DoubleAnimation.EasingFunction>
                                <BackEase Amplitude="2" EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="MouseLeave">
                <BeginStoryboard>
                    <Storyboard TargetName="myBorder">
                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)">
                            <DoubleAnimation.EasingFunction>
                                <CircleEase EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                            <DoubleAnimation.EasingFunction>
                                <CircleEase EasingMode="EaseOut"/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>                
        </Border.Triggers>
    </Border>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:45:12.357

如果您不介意文本随着弹出窗口实际缩小和增长，您可以将其放在 ViewBox 中

```
 <Viewbox Margin="0,0,0,0">
        <TextBlock Text="{Binding Path=Text}" Padding="5,1,5,1.5"/>
    </Viewbox> 
```

# mysql - MySQL：将不同的表合并为一张大表

> ID：11054665
> 
> 赞同：0
> 
> 时间：2012-06-15T16:23:21.600
> 
> 标签：mysql, copy

我有 12 个包含这 2 个字段的表：

*   **代码**（varchar 主键）和**文本**（varchar）

每个表已经有 1055 个条目（所有表的数量相同）

我需要创建一个包含以下字段的新表：

*   **id** (int pk), **field-1** , **field-2** , ... **field-2**

每个**字段-N**将包含其中一个表的**文本**字段的内容。我不需要这些表中的**代码**字段。

所以，最后，这个新的大表应该有 1055 个条目，其中**id**字段从 1 到 1055，其余字段（**field-1**，**field-2**等）存储保存在**文本**字段中的值我现在拥有的 12 张桌子。

我怎样才能做到这一点？我已经尝试了一段时间，但我找不到正确的方法来做到这一点。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:33:30.697

我不确定我是否理解您的问题，但我会简单地编写一个循环，将每个表的每一行插入到新创建的表中。

像这样的东西

```
CREATE TABLE newTable
(
code int NOT NULL AUTO_INCREMENT,
text varchar(255),
PRIMARY KEY (code)
) 
```

// 对每个表执行此操作：

```
SELECT text FROM table1;

for(int i = 0; i < dataSet.size; i++)
{
  INSERT INTO newTable (text) VALUES (row(i).value)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:15:28.813

所以我最终决定做的是将这些表的所有信息下载到excel，创建一个具有我需要的结构和值的新excel，并将这个新的excel上传为CSV。现在我得到了我想要的！可能不是最好的方法，但它并没有花这么长时间就奏效了:)

# javascript - Superfish jQuery 工具提示弹出 div 允许下面的事件

> ID：11054667
> 
> 赞同：0
> 
> 时间：2012-06-15T16:23:31.387
> 
> 标签：javascript, jquery, popup, superfish

当您将鼠标悬停在列表中的某个项目上时，我正在使用 Superfish 弹出工具提示，这很有效，但是当鼠标悬停在基础列表项上时，弹出 div 允许其下方的其他项目触发弹出窗口。

换句话说，虽然弹出窗口看起来不透明，但它不像不透明的 div，因为它允许它下面的项目在弹出窗口消失之前仍然触发事件。

我将 z-index 设置为 9999 以确保 div 的位置高于其他所有内容，但它不像实心/不透明 div。

我错过了什么？设置不透明度是否会影响视觉不透明度？

这是在鼠标悬停时调用气泡弹出窗口的 jQuery 函数：

```
function Popup(){

    //create a bubble popup for each DOM element with class attribute as "text", "button" or "link" and LI, P, IMG elements.
    $('.text, .button, .link').CreateBubblePopup({
        selectable: true,
        position : 'top',
        align    : 'center',
        innerHtml: '<img src="/images/loading.gif" alt="Loading" style="border:0px; vertical-align:middle; margin-right:10px; display:inline-block;" /><span>loading!</span>',
        innerHtmlStyle: {
                            //color:'#FFFFFF', 
                            'text-align':'left',
                            'z-index':'9999',
                            'width':'500px'
                        },                          
        themeName:  'blue', //'all-black',
        themePath:  '/jquerybubblepopup-theme'
    });

    // add a mouseover event for the "link" element...
    $('.link').mouseover(function(){

            //get a reference object for "this" target element
            var link = $(this);

            //load data asynchronously when mouse is over...
            $.ajax({
                    url: '/bodytext.php?id=' + this.id,
                    type: 'GET',
                    cache: false,
                    success: function(data) {
                        var seconds_to_wait = 0;
                        function pause(){
                            var timer = setTimeout(function(){
                                seconds_to_wait--;
                                if(seconds_to_wait > 0){
                                    pause();
                                }else{

                                    //set new innerHtml for the Bubble Popup
                                    link.SetBubblePopupInnerHtml(data, false); //false -> it shows new innerHtml but doesn't save it, then the script is forced to load everytime the innerHtml... 

                                    // take a look in documentation for SetBubblePopupInnerHtml() method
                                    //$('.link').SetBubblePopupOptions(selectable, true);

                                };
                            },500);
                        };pause();
                    }
                });

    }); //end mouseover event 
```

}

# cql - 复合键和计数器。我可以创建列族但无法填充它

> ID：11054670
> 
> 赞同：1
> 
> 时间：2012-06-15T16:23:41.277
> 
> 标签：cql

我知道柜台家庭可以拥有任何类型的钥匙。不支持复合键吗？

```
 cqlsh:goh_master> create columnfamily balance (kind ascii, corporation_id ascii, amount  counter, primary key ( kind,corporation_id) ) with compact storage;
 cqlsh:goh_master> insert into balance(kind,corporation_id,amount) values ('c',103,123456789);
 Bad Request: invalid operation for commutative columnfamily balance
 cqlsh:goh_master> create columnfamily balance (kind ascii, corporation_id ascii, amount counter, primary key ( kind,corporation_id) ) with compact storage;
 cqlsh:goh_master> insert into balance(kind,corporation_id,amount) values ('c',103,123456789);
 Bad Request: invalid operation for commutative columnfamily balance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:21:30.427

I solved it by myself thanks to [this answer](https://stackoverflow.com/questions/8813211/cassandra-cql-comparator-type-counter?rq=1). You cant insert into counters nor just set. You must always use set counter =counter +n syntax:

```
cqlsh:goh_master> update balance set amount=amount+12 where kind='c' and corporation_id = 103; 
```

worked like a charm

# javascript - 使用 Javascript 获取和设置元素的宽度

> ID：11054675
> 
> 赞同：0
> 
> 时间：2012-06-15T16:24:05.027
> 
> 标签：javascript, html, css

我有一个 ul 列表元素，其宽度随其中的文本而变化，并且会定期变化。现在我想将 ul 列表的宽度设置为第一个列表元素的宽度，这是可以更改的文本。我想“获取”第一个列表项（#item1）的宽度，并将 ul 列表（#myList）的宽度“设置”为刚才提到的第一个列表项的宽度。我尝试了以下代码，但它不起作用：

```
<script type="text/javascript">
  var width = document.getElementById('item1').offsetWidth;
  document.getElementById('myList').style.width = width;
</script> 
```

HTML：

```
<ul id="myList">
  <li id="item1">text1</li>
  <li>text2</li>
  <li>text3</li>
</ul> 
```

有什么建议么？我宁愿不使用 jquery，而是使用纯 javascript ...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-26T04:14:04.920

使用这个..在这里我假设 ul 元素是#ul 并且列表元素是#list

```
 var liWidth=document.querySelector('#list').clientWidth;

 // make the width of ul same
 document.querySelector('#ul').style.width=liWidth+'px'; 
```

那应该可以工作..并确保在加载 JavaScript 之前创建元素，否则它会抛出错误，它找不到 null 的样式属性

# php - array_push 性能

> ID：11054679
> 
> 赞同：0
> 
> 时间：2012-06-15T16:24:49.337
> 
> 标签：php, performance, array-push

我有一个连接到数据库并为我获取一些资源的 php 文件。

在 while 循环中，我将数据附加到 php 数组中。最后，`json_encode`与这个结果数组一起使用。

现在，我正在使用`array_push`，但是对于它被调用的次数，脚本非常慢！我试图更改为“[]”以附加到最后一个元素，但我没有注意到性能有任何变化。

我的问题是：有没有更好的方法（而且更快！）。我也尝试过`array_splice`and `array_merge`，但没有运气，

**编辑：** 通过评论 array_push 部分（但访问相同的行数和次数）脚本很快。所以，这让我认为瓶颈在于推动。

**编辑2：**

编码

```
 $Tema=-1;
    $SubTema=-1;
    $Topico=-1;
    $SubTopico=-1;
    $RS = mysql_query($SQL);
    $respArray['items'] = array();
    $resLevel=-1;
    $UniqueKey=1;

    $TemaId = '';
    $TemaOpen = '';
    $TemaActivo = '';
    $TemaIsRecurso = '';
    $TemaTipoRecurso = '';

    $SubtemaId = '';
    $SubtemaOpen = '';
    $SubtemaActivo = '';
    $SubtemaIsRecurso = '';
    $SubtemaTipoRecurso = '';

    $TopicoId = '';
    $TopicoOpen = '';
    $TopicoActivo = '';
    $TopicoIsRecurso = '';
    $TopicoTipoRecurso = '';

    $SubtopicoId = '';
    $SubtopicoOpen = '';
    $SubtopicoIsRecurso = '';
    $SubtopicoTipoRecurso = '';

    while($row = mysql_fetch_array($RS))   
    {

        if(!is_null($row['IDTEMA'])){
            if($Tema!=$row['IDTEMA']){
                $TemaId = $row['IDTEMA'];
                $TemaOpen = '1';
                $TemaActivo = $row['MACTIVO'];
                $TemaTitle = $row['TEMA'];
                $TemaIsRecurso = '0';
                $TemaTipoRecurso = '';

                $Tema=$row['IDTEMA'];
                $SubTema=-1;

                $respArray['items'][] = array ('Id' => $TemaId, 'isRecurso' => '0', 'Level' => '1', 'Title' => $TemaTitle, 'UniqueKey' => $UniqueKey++, 'children_items' => array() );
                continue;
                //array_push($respArray['items'], array ('Id' => $TemaId, 'isRecurso' => '0', 'Level' => '1', 'Title' => $TemaTitle, 'UniqueKey' => $UniqueKey++, 'children_items' => array() ));
                //echo("TEMA ".$TemaTitle."\n");
            }

            if($row['IDSUBTEMA']!=""){
                if($SubTema!=$row['IDSUBTEMA']){
                    $SubtemaId = $row['IDSUBTEMA'];
                    $SubtemaOpen = '1';
                    $SubtemaActivo = $row['MACTIVO'];
                    $SubtemaTitle = $row['SUBTEMA'];
                    $SubtemaIsRecurso = '0';
                    $SubtemaTipoRecurso = '';

                    $SubTema=$row['IDSUBTEMA'];
                    $Topico=-1;

                    $numTemas = count($respArray['items'])-1;
                    $respArray['items'][$numTemas]['children_items'][] = array ('Id' => $SubtemaId, 'isRecurso' => '0', 'Level' => '2', 'Title' => $SubtemaTitle, 'UniqueKey' => $UniqueKey++, 'children_items' => array() );
                    continue;
                }

                if($row['IDTOPICO']!=""){
                    if($Topico!=$row['IDTOPICO']){
                        $TopicoId = $row['IDTOPICO'];
                        $TopicoOpen = '1';
                        $TopicoActivo = $row['MACTIVO'];
                        $TopicoTitle = $row['TOPICO'];
                        $TopicoIsRecurso = '0';
                        $TopicoTipoRecurso = '';

                        $Topico=$row['IDTOPICO'];
                        $SubTopico=-1;

                        $numTemas = count($respArray['items'])-1;
                        $numSubTemas = count($respArray['items'][$numTemas]['children_items'])-1;
                        $respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][] = array ('Id' => $TopicoId, 'isRecurso' => '0', 'Level' => '3', 'Title' => $TopicoTitle, 'UniqueKey' => $UniqueKey++, 'children_items' => array() );
                        continue;
                    }

                    if($row['IDSUBTOPICO']!=""){
                        if($SubTopico!=$row['IDSUBTOPICO']){
                            $SubtopicoId = $row['IDTOPICO'];
                            $SubtopicoOpen = '1';
                            $SubtopicoActivo = $row['MACTIVO'];
                            $SubtopicoTitle = $row['SUBTOPICO'];
                            $SubtopicoIsRecurso = '0';
                            $SubtopicoTipoRecurso = '';

                            $SubTopico=$row['IDSUBTOPICO'];

                            $numTemas = count($respArray['items'])-1;
                            $numSubTemas = count($respArray['items'][$numTemas]['children_items'])-1;
                            $numTopicos = count($respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'])-1;
                            $respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][$numTopicos]['children_items'][] = array ('Id' => $SubtopicoId, 'Level' => '4', 'isRecurso' => '0', 'Title' => $SubtopicoTitle, 'UniqueKey' => $UniqueKey++, 'children_items' => array() );
                            continue;
                        }
                        if($row['IDRECURSO']!=""){

                            $resId = $row['IDRECURSO'];
                            $resLevel = '5';
                            $resFic = ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PUBSEC) ? $row['FICSRC'] . "$" . $row['FICVOL'] : ((($row['IDCATEGORIA']==$BD->ID_CATEGORIA_LINKS) || ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PAGINAS)) ? $row['FICSRC'] : $row['FICHEIRO']);
                            $resIcon = $row['ICON'];
                            $resCat = $row['IDCATEGORIA'];
                            $resFormato =  $row['IDFORMATO'];
                            $resProf = (($row['IDDESTINATARIO']==3) || ($row['IDDESTINATARIO']==4)) ?  1 : 0;
                            $resInfo = $row['INFORMACAO'];
                            $resDown = $row['GRAVACAO'];
                            $resFicD = $row['FICDOWNLOAD'];
                            $resGuia = $row['GUIA'];
                            $resVol = $row['VOLUME'];
                            $resIdFavorito = $row['IDFAVORITO'];
                            $resActivo = $row['MACTIVO'];
                            $resTempoGasto = $row['TEMPOGASTO'];
                            $resNumSessoes = $row['NUMSESSOES'];
                            $resLastDate = $row['LASTDATE'];
                            $resScore = $row['SCORE'];
                            $resProgresso = $row['PROGRESSO'];
                            $resTitle = utf8_encode($row['RECURSO']);
                            $resIsRecurso = '1';

                            $numTemas = count($respArray['items'])-1;
                            $numSubTemas = count($respArray['items'][$numTemas]['children_items'])-1;
                            $numTopicos = count($respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'])-1;
                            $numSubTopicos = count($respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][$numTopicos]['children_items'])-1;

                            $respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][$numTopicos]['children_items'][$numSubTopicos]['children_items'][] = array (
                                    'Id' => $resId, 
                                    'Level' => $resLevel,
                                    'Fic' => $resFic,
                                    "Icon" => $resIcon,
                                    "Cat" => $resCat,
                                    "Formato" => $resFormato,
                                    "Prof" => $resProf,
                                    "Info" => $resInfo,
                                    "Down" => $resDown,
                                    "FicD" => $resFicD,
                                    "Guia" => $resGuia,
                                    "Vol" => $resVol,
                                    "IdFavorito" => $resIdFavorito,
                                    "Activo" => $resActivo,
                                    "TempoGasto" => $resTempoGasto,
                                    "NumSessoes" => $resNumSessoes,
                                    "LastDate" => $resLastDate,
                                    "Score" => $resScore,
                                    "Progresso" => $resProgresso,
                                    'Title' => $resTitle,
                                    'isRecurso' => '1',
                                    'colorIcon' => '#FF2200',
                                    'tipoRecurso' => 'tipo_recurso',
                                    'UniqueKey' => $UniqueKey++,
                                    'children_items' => null );
                                    continue;

                        }

                    }else{
                        if($row['IDRECURSO']!=""){
                            $resId = $row['IDRECURSO'];
                            $resLevel = '4';
                            $resFic = ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PUBSEC) ? $row['FICSRC'] . "$" . $row['FICVOL'] : ((($row['IDCATEGORIA']==$BD->ID_CATEGORIA_LINKS) || ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PAGINAS)) ? $row['FICSRC'] : $row['FICHEIRO']);
                            $resIcon = $row['ICON'];
                            $resCat = $row['IDCATEGORIA'];
                            $resFormato =  $row['IDFORMATO'];
                            $resProf = (($row['IDDESTINATARIO']==3) || ($row['IDDESTINATARIO']==4)) ?  1 : 0;
                            $resInfo = $row['INFORMACAO'];
                            $resDown = $row['GRAVACAO'];
                            $resFicD = $row['FICDOWNLOAD'];
                            $resGuia = $row['GUIA'];
                            $resVol = $row['VOLUME'];
                            $resIdFavorito = $row['IDFAVORITO'];
                            $resActivo = $row['MACTIVO'];
                            $resTempoGasto = $row['TEMPOGASTO'];
                            $resNumSessoes = $row['NUMSESSOES'];
                            $resLastDate = $row['LASTDATE'];
                            $resScore = $row['SCORE'];
                            $resProgresso = $row['PROGRESSO'];
                            $resTitle = utf8_encode($row['RECURSO']);
                            $resIsRecurso = '1';

                            $numTemas = count($respArray['items'])-1;
                            $numSubTemas = count($respArray['items'][$numTemas]['children_items'])-1;
                            $numTopicos = count($respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'])-1;

                            $respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][$numTopicos]['children_items'][] = array (
                                    'Id' => $resId, 
                                    'Level' => $resLevel,
                                    'Fic' => $resFic,
                                    "Icon" => $resIcon,
                                    "Cat" => $resCat,
                                    "Formato" => $resFormato,
                                    "Prof" => $resProf,
                                    "Info" => $resInfo,
                                    "Down" => $resDown,
                                    "FicD" => $resFicD,
                                    "Guia" => $resGuia,
                                    "Vol" => $resVol,
                                    "IdFavorito" => $resIdFavorito,
                                    "Activo" => $resActivo,
                                    "TempoGasto" => $resTempoGasto,
                                    "NumSessoes" => $resNumSessoes,
                                    "LastDate" => $resLastDate,
                                    "Score" => $resScore,
                                    "Progresso" => $resProgresso,
                                    'Title' => $resTitle,
                                    'isRecurso' => '1',
                                    'colorIcon' => '#FF2200',
                                    'tipoRecurso' => 'tipo_recurso',
                                    'UniqueKey' => $UniqueKey++,
                                    'children_items' => null );
                                    continue;
                        }
                    }

                }else{
                    if($row['IDRECURSO']!="" && $row['IDSUBTEMA']!=""){
                        $resId = $row['IDRECURSO'];
                        $resLevel = '3';
                        $resFic = ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PUBSEC) ? $row['FICSRC'] . "$" . $row['FICVOL'] : ((($row['IDCATEGORIA']==$BD->ID_CATEGORIA_LINKS) || ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PAGINAS)) ? $row['FICSRC'] : $row['FICHEIRO']);
                        $resIcon = $row['ICON'];
                        $resCat = $row['IDCATEGORIA'];
                        $resFormato =  $row['IDFORMATO'];
                        $resProf = (($row['IDDESTINATARIO']==3) || ($row['IDDESTINATARIO']==4)) ?  1 : 0;
                        $resInfo = $row['INFORMACAO'];
                        $resDown = $row['GRAVACAO'];
                        $resFicD = $row['FICDOWNLOAD'];
                        $resGuia = $row['GUIA'];
                        $resVol = $row['VOLUME'];
                        $resIdFavorito = $row['IDFAVORITO'];
                        $resActivo = $row['MACTIVO'];
                        $resTempoGasto = $row['TEMPOGASTO'];
                        $resNumSessoes = $row['NUMSESSOES'];
                        $resLastDate = $row['LASTDATE'];
                        $resScore = $row['SCORE'];
                        $resProgresso = $row['PROGRESSO'];
                        $resTitle = utf8_encode($row['RECURSO']);
                        $resIsRecurso = '1';

                        $numTemas = count($respArray['items'])-1;
                        $numSubTemas = count($respArray['items'][$numTemas]['children_items'])-1;

                        $respArray['items'][$numTemas]['children_items'][$numSubTemas]['children_items'][] = array (
                                'Id' => $resId, 
                                'Level' => $resLevel,
                                'Fic' => $resFic,
                                "Icon" => $resIcon,
                                "Cat" => $resCat,
                                "Formato" => $resFormato,
                                "Prof" => $resProf,
                                "Info" => $resInfo,
                                "Down" => $resDown,
                                "FicD" => $resFicD,
                                "Guia" => $resGuia,
                                "Vol" => $resVol,
                                "IdFavorito" => $resIdFavorito,
                                "Activo" => $resActivo,
                                "TempoGasto" => $resTempoGasto,
                                "NumSessoes" => $resNumSessoes,
                                "LastDate" => $resLastDate,
                                "Score" => $resScore,
                                "Progresso" => $resProgresso,
                                'Title' => $resTitle,
                                'isRecurso' => '1',
                                'colorIcon' => '#FF2200',
                                'tipoRecurso' => 'tipo_recurso',
                                'UniqueKey' => $UniqueKey++,
                                'children_items' => null );
                                continue;
                    }
                }

            }else{

                if($row['IDRECURSO']!=""){
                    $resId = $row['IDRECURSO'];
                    $resLevel = '2';
                    $resFic = ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PUBSEC) ? $row['FICSRC'] . "$" . $row['FICVOL'] : ((($row['IDCATEGORIA']==$BD->ID_CATEGORIA_LINKS) || ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PAGINAS)) ? $row['FICSRC'] : $row['FICHEIRO']);
                    $resIcon = $row['ICON'];
                    $resCat = $row['IDCATEGORIA'];
                    $resFormato =  $row['IDFORMATO'];
                    $resProf = (($row['IDDESTINATARIO']==3) || ($row['IDDESTINATARIO']==4)) ?  1 : 0;
                    $resInfo = $row['INFORMACAO'];
                    $resDown = $row['GRAVACAO'];
                    $resFicD = $row['FICDOWNLOAD'];
                    $resGuia = $row['GUIA'];
                    $resVol = $row['VOLUME'];
                    $resIdFavorito = $row['IDFAVORITO'];
                    $resActivo = $row['MACTIVO'];
                    $resTempoGasto = $row['TEMPOGASTO'];
                    $resNumSessoes = $row['NUMSESSOES'];
                    $resLastDate = $row['LASTDATE'];
                    $resScore = $row['SCORE'];
                    $resProgresso = $row['PROGRESSO'];
                    $resTitle = utf8_encode($row['RECURSO']);
                    $resIsRecurso = '1';

                    $numTemas = count($respArray['items'])-1;

                    $respArray['items'][$numTemas]['children_items'][] = array (
                        'Id' => $resId, 
                        'Level' => $resLevel,
                        'Fic' => $resFic,
                        "Icon" => $resIcon,
                        "Cat" => $resCat,
                        "Formato" => $resFormato,
                        "Prof" => $resProf,
                        "Info" => $resInfo,
                        "Down" => $resDown,
                        "FicD" => $resFicD,
                        "Guia" => $resGuia,
                        "Vol" => $resVol,
                        "IdFavorito" => $resIdFavorito,
                        "Activo" => $resActivo,
                        "TempoGasto" => $resTempoGasto,
                        "NumSessoes" => $resNumSessoes,
                        "LastDate" => $resLastDate,
                        "Score" => $resScore,
                        "Progresso" => $resProgresso,
                        'Title' => $resTitle,
                        'isRecurso' => '1',
                        'colorIcon' => '#FF2200',
                        'tipoRecurso' => 'tipo_recurso',
                        'UniqueKey' => $UniqueKey++,
                        'children_items' => null );
                        continue;
                } 

            }

        }else{
            if($row['IDRECURSO']!=""){
                $resId = $row['IDRECURSO'];
                $resLevel = '1';
                $resFic = ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PUBSEC) ? $row['FICSRC'] . "$" . $row['FICVOL'] : ((($row['IDCATEGORIA']==$BD->ID_CATEGORIA_LINKS) || ($row['IDCATEGORIA']==$BD->ID_CATEGORIA_PAGINAS)) ? $row['FICSRC'] : $row['FICHEIRO']);
                $resIcon = $row['ICON'];
                $resCat = $row['IDCATEGORIA'];
                $resFormato =  $row['IDFORMATO'];
                $resProf = (($row['IDDESTINATARIO']==3) || ($row['IDDESTINATARIO']==4)) ?  1 : 0;
                $resInfo = $row['INFORMACAO'];
                $resDown = $row['GRAVACAO'];
                $resFicD = $row['FICDOWNLOAD'];
                $resGuia = $row['GUIA'];
                $resVol = $row['VOLUME'];
                $resIdFavorito = $row['IDFAVORITO'];
                $resActivo = $row['MACTIVO'];
                $resTempoGasto = $row['TEMPOGASTO'];
                $resNumSessoes = $row['NUMSESSOES'];
                $resLastDate = $row['LASTDATE'];
                $resScore = $row['SCORE'];
                $resProgresso = $row['PROGRESSO'];
                $resTitle = utf8_encode($row['RECURSO']);
                $resIsRecurso = '1';

                $respArray['data']['items'][] = array (
                        "Id" => $resId,
                        'Level' => $resLevel,
                        "Fic" => $resFic,
                        "Icon" => $resIcon,
                        "Cat" => $resCat,
                        "Formato" => $resFormato,
                        "Prof" => $resProf,
                        "Info" => $resInfo,
                        "Down" => $resDown,
                        "FicD" => $resFicD,
                        "Guia" => $resGuia,
                        "Vol" => $resVol,
                        "IdFavorito" => $resIdFavorito,
                        "Activo" => $resActivo,
                        "TempoGasto" => $resTempoGasto,
                        "NumSessoes" => $resNumSessoes,
                        "LastDate" => $resLastDate,
                        "Score" => $resScore,
                        "Progresso" => $resProgresso,
                        'Title' => $resTitle,
                        'isRecurso' => '1',
                        'colorIcon' => '#FF2200',
                        'tipoRecurso' => 'tipo_recurso',
                        'UniqueKey' => $UniqueKey++,
                        'children_items' => null );
                        continue;

            }
        }
    }

    mysql_close($link);

    echo json_encode($respArray) ;
} 
```

谢谢

# c# - 快速设置 DataGridView 行高

> ID：11054683
> 
> 赞同：4
> 
> 时间：2012-06-15T16:25:29.817
> 
> 标签：c#, winforms, datagridview

我有一个虚拟数据网格视图，我想为其设置不同的行高。我希望找到一种方法来一次设置所有行高，而不是一次遍历每个行高。

这是我尝试设置高度的方法，但性能非常糟糕，每 1,000 行大约 1 秒。对我来说，平均行数约为 20k-30k 行，所以这是不可接受的。

```
public void PopulateData()
    {
        this.SuspendLayout();

        this.RowCount = Data.RowCount;

        for (int i = 0; i < Data.RowCount; i++)
        {
            this.Rows[i].Height = Data.RowHeights[i];
        }

        this.ResumeLayout();
    } 
```

我也确保先关闭自动调整大小，但性能仍然很差。

```
this.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;
        this.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None; 
```

有什么方法可以传入行高数组或防止`OnRowHeightChanged`在调整行大小时被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:47:14.783

显然，如果您独立于 datagridview 创建行，则性能阻碍功能不适用。

诀窍是创建一个行数组，调整它们的大小，然后将行的范围添加到 datagridview 中：

```
public void PopulateData()
    {
        this.SuspendLayout();

        DataGridViewRow[] rows = new DataGridViewRow[Data.RowCount];
        for (int i = 0; i < rows.Length; i++)
        {
            DataGridViewRow row = new DataGridViewRow();
            row.Height = Data.RowHeights[i];
            rows[i] = row;
        }
        this.Rows.AddRange(rows);

        this.ResumeLayout();
    } 
```

对于 15,000 行，这只需 150 毫秒，而无需创建单独的数组则需要 15 秒，快 100 倍！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:29:59.773

试试这个而不是你的代码，看看你是否有任何性能提升。通常使用虚拟网格，这可以更快地工作 -

添加处理程序`DataGridView.RowPrePaint`：

```
dataGridView1.RowPrePaint += new DataGridViewRowPrePaintEventHandler(dataGridView1_RowPrePaint);

private void dataGridView1_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
{
    dataGridView1.AutoResizeRow(e.RowIndex);
} 
```

# iphone - 从 ios 的视图中计算和删除子视图

> ID：11054686
> 
> 赞同：0
> 
> 时间：2012-06-15T16:25:39.830
> 
> 标签：iphone, ios5, uiview

这是我创建子视图并将其添加到视图中的方式。

我想知道为什么计数总是返回 0，而它应该返回“数百”。我做错了什么，谢谢！

我添加了更多代码，清楚地显示了我的问题。我复制/粘贴了我最初的问题所涉及的所有功能。

```
 - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];

        [self.contenedor addSubview:vistaPanelBotones];
        [self crearBotones];
    }

    - (void) crearBotones {
    UIColor *colores[] = {
        [UIColor blueColor],
        [UIColor brownColor],
        [UIColor redColor],
        [UIColor orangeColor],
        [UIColor greenColor],     
        [UIColor yellowColor],
        [UIColor purpleColor],
        [UIColor blackColor],
        [UIColor whiteColor],
        [UIColor darkGrayColor],
        [UIColor magentaColor],
        [UIColor cyanColor],
    };

    int indice = 0;
    for (int col = 0; col < self.vistaPanelBotones.frame.size.width ; col=col+20) {
        for (int fila = 0; fila < self.vistaPanelBotones.frame.size.height-20 ; fila = fila+20) {

            CGRect frame = CGRectMake(col, fila, 20, 20);

            Boton *boton = [Boton new];
            boton.frame = frame;
            boton.layer.backgroundColor = colores[(fila + col) % 7].CGColor;
            boton.layer.cornerRadius = 0.25;
            boton.layer.borderWidth = 0.25;
            boton.layer.borderColor = [UIColor whiteColor].CGColor;
            boton.layer.delegate = self;
            [self.vistaPanelBotones addSubview:boton];
            [boton setNeedsDisplay];    
        }
        indice++;
    }   
    NSLog(@"Vista Botones SubViews:%i",[[self.vistaPanelBotones subviews] count]); 

}

- (IBAction)reiniciar:(id)sender {

    if (self.vistaPanelBotones == nil){
        NSLog(@"no existe la vista"); 
    }
    NSUInteger count = self.vistaPanelBotones.subviews.count;
    NSLog(@"Vista SubViews: %i",count); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:33:35.857

以下是我的一些想法：

1.  我会检查 self.vistaPanelBotones 是否为非零，以防万一（如果它是零，您将不会在该代码中收到任何错误，但也没有子视图）。
2.  可能在您拥有有效框架之前执行此操作（IIRC，viewWillAppear 是最早的具有有效几何的回调）
3.  我很确定如果 boton 为 nil，在添加为子视图时会出现异常，但这是另一个值得用于调试的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:34:10.063

使用 [[self.vistaPanelBotones subviews] count] 来计算子视图的数量，但是有一种优雅的方法可以从 Objective-C 中的视图中删除所有子视图。试试这个：

```
 [[self.vistaPanelBotones subviews] makeObjectsPerformSelector:@selector(removeFromSuperView]; 
```

# c++ - 我的汇编代码有什么问题

> ID：11054688
> 
> 赞同：5
> 
> 时间：2012-06-15T16:25:53.343
> 
> 标签：c++, assembly, x86, dos, x86-16

所以我正在用 C++ 为 MS-DOS 编写一个游戏，并且我包括一些内联汇编来提高速度。这个特殊的代码块会在视频内存（0A000h）中画一个星号。我的代码的问题是它只以 dh 设置的任何颜色绘制一个像素。据我所知 mov dx, 00007h 相当于将 dh 设置为 0 将 dl 设置为 7。有什么问题？

等效的 C/C++ 代码（或至少我的意图）在每一行旁边注释。我的编译器是 Turbo C++ 3.0。我试图只使用 8086/8088 指令。

我也知道 MS-DOS 有多老，所以不要告诉我为更新的编译器/操作系统编写代码。为dos编写代码是我的一种爱好。

```
pixelOffset = x + (y << 6) +  (y << 8);

_asm {
    mov  ax, WORD PTR pixelOffset
    mov  di, ax
    mov  ax, 0A000h         ;pointer to the video memory
    mov  es, ax
    mov  dx, 00007h         ;indexed color 00 and 07
    mov  cx, 0000Fh         ;indexed color white 0F
    add  ax, 2              ;pixelOffset += 2;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 319            ;pixelOffset += 319;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dl        ;videomem[pixelOffset] = LIGHT_GRAY;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 317            ;pixelOffset += 317;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dl        ;videomem[pixelOffset] = LIGHT_GRAY;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], cx        ;videomem[pixelOffset] = WHITE;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dl        ;videomem[pixelOffset] = LIGHT_GRAY;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 317            ;pixelOffset += 317;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dl        ;videomem[pixelOffset] = LIGHT_GRAY;
    add  ax, 1              ;pixelOffset += 1;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
    add  ax, 319            ;pixelOffset += 319;
    mov  es:[di], dh        ;videomem[pixelOffset] = BLACK;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:31:50.820

我认为您在更新 ax 后忘记更新 di

```
add ax,1
mov di,ax ;don't forget this line
mov es:[di],dl 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:29:17.797

看起来你从来没有增加“di”，是吗？也许您的意思是“movsb”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T07:32:25.143

lea 指令也存在于 16 位中：

```
lea di,[di+1] ; substitute for "inc di" and/or "add di,1" , if we do not need a flag 
```

短剑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T07:47:00.740

无需使用`ax`-- first 来增加基数；还有只有位移的寻址模式（也被认为是绝对地址）

```
mov  es:[1001], dh   
mov  es:[1002], dl 
mov  es:[1535], cl 
```

为了使它更有用——您可以将它与偏移一起使用，例如。以你的星星为中心：

```
mov  es:[di - WIDTH], ...   ;; pixel / character above the current cursor
mov  es:[di + WIDTH], ...   ;; pixel / char below
mov  es:[di + 1], ...       ;; pixel right to the origin etc. 
```

使用段覆盖前缀`es:`的成本很高。相反，我建议使用

```
mov  ax, 0a000h
push ds
mov  ds, ax
//
mov  [di + offset], cl      ;; this pays off when writing several pixels
// 
pop ds                ;; restore DS after you have copied your stuff 
```

# arrays - 图 api 数组评论和更新

> ID：11054689
> 
> 赞同：0
> 
> 时间：2012-06-15T16:25:56.840
> 
> 标签：arrays, facebook-graph-api

我想知道如何使用以下数组显示评论故事标签....

```
{  "data": [    {     
 "id": "1364392319_4278554326462",       
"from": {       
"name": "Dave Morin",        
"id": "1364392319"      },       
"story": "Dave Morin was tagged in Shae Rachael Garton's album Mobile Uploads.",      
"story_tags": {       
"0": [          {            
"id": 1364392319,             
"name": "Dave Morin",            
"offset": 0,             
"length": 10,             
"type": "user"          }        ],         
"25": [          {            
"id": 100000204772261,             
"name": "Shae Rachael Garton",            
"offset": 25,            
"length": 19,             "type": "user"          }        ]      }, 
```

显然它的布局更好，但那是我能抓住的最好的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:41:01.503

我不完全理解你的问题，但听起来你在问如何最好地使用`story_tags`参数中的信息来重新创建 Facebook 在 Facebook.com 上显示此类帖子时突出显示用户名的方式？

如果您想要特定的代码示例，这将有助于了解您正在使用什么代码以及问题是什么，因为看起来您在那里拥有所需的数据，但是：

*   对于`story_tags`数组中的每个条目：
    *   `id`是此标签链接到的用户或页面 ID
    *   `name`是该对象的名称
    *   `offset`是原始消息中应该突出显示/链接的第一个字符（即在这种情况下，原始消息是`story`在下一级输出`）
    *   `length`是要突出显示/链接的字符数
    *   `type`是标签中链接的对象类型

所以对于那里的例子：

Dave Morin 被标记在 Shae Rachael Garton 的专辑 Mobile Uploads 中。

在偏移量 0 处标记 10 个字符，在偏移量 25 处标记 19 个字符会像这样突出显示它：

**Dave Morin**被标记在**Shae Rachael Garton**的专辑 Mobile Uploads 中。

第一个链接链接到 Dave 的个人资料，第二个链接链接到 Shae 的个人资料

# vim - GNU Screen 和 vim - 通过 ssh 从不同的主机连接，某些按钮（例如 , ^[ ) 不能正常工作

> ID：11054690
> 
> 赞同：1
> 
> 时间：2012-06-15T16:26:03.467
> 
> 标签：vim, ssh, cygwin, gnu-screen

两个客户端都是使用 cygwin 连接到 Ubuntu 机器的 Windows 7。

从 ClientA 我通过 ssh 连接到 Ubuntu 机器，启动屏幕会话，然后打开 vim。然后我键入`:E`打开 netrw 目录列表。按`<ENTER>`目录导航，世界上一切都很好。我断开与 Screen 会话的连接。

从 ClientB，我通过 ssh 连接并恢复屏幕会话，vim 已经打开。我按下`<ENTER>`一个目录，而不是打开目录，而是将光标向下移动一行。好像我按下了`j`或`<DOWN>`。按下`^M`做同样的事情。没有一个目录可以导航到。另外，如果我打开了一个文件并且我处于插入模式，我必须按两次退出键才能返回正常模式。

仍然在 CLientB 上，我退出了 vim `:q`（是的，输入`:`命令时输入有效）。然后我重新打开 vim 并再次使用 netrw `:E`。现在一切都按照它应该的方式工作：按下`<ENTER>`导航目录，当我编辑文件时，我只需要按下`^[`或转义一次就可以工作。

如果我从 ClientB 断开并再次与 ClientA 连接，那么 vim 将无法再次正常工作，直到我退出 vim 并重新启动它。

我尝试输入`:set`以查看所有设置的选项，但是当从 ClientA 或 ClientB 连接时启动 vim 时，这些设置之间没有区别。

发生了什么事，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T14:43:33.560

在 cygwin 中，我需要转到选项 > 终端并确保两个客户端都设置为相同的类型（例如 xterm-256color）。

不同的终端类型对键使用不同的转义序列，并且不匹配导致了问题。

# sql-server - MS SQL 查询以显示最大重复列的 id

> ID：11054691
> 
> 赞同：1
> 
> 时间：2012-06-15T16:26:05.340
> 
> 标签：sql-server, sql-server-2012

我有一张桌子

```
tbl疾病追踪

TrackID 疾病 ID 邮政编码
1 3 111
2 3 111
3 2 111
4 1 222
5 2 222
6 4 111
7 1 222
8 5 333
9 5 333
10 5 333

```

我想写一个查询来显示每个邮政编码的疾病ID和最大重复疾病ID的邮政编码，如下所示，

```
疾病 ID 邮政编码
3 111
1 222
5 333

```

请任何帮助将不胜感激。我尝试了一切，但找不到任何帮助..再次感谢您:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:45:54.403

```
select diseaseid, postalcode
from 
(
    select
        postalcode, 
        diseaseid,
        row_number() over (partition by postalcode order by count desc) as row
    from 
    (
        select postalcode, count(postalcode) as count, diseaseid
        from tblDiseaseTrack
        group by postalcode, diseaseid
    ) as T1
) as T2
where row = 1
order by postalcode 
```

这将返回您想要的内容：

```
DiseaseID  PostalCode 
3          111
1          222
5          333 
```

* * *

**编辑：**

与上面相同的查询，但使用 JOIN 从第二个表中获取城市名称：

```
select diseaseid, T2.postalcode, city
from 
(
    select
        postalcode, 
        diseaseid,
        row_number() over (partition by postalcode order by count desc) as row
    from 
    (
        select postalcode, count(postalcode) as count, diseaseid
        from @tblDiseaseTrack
        group by postalcode, diseaseid
    ) as T1
) as T2
inner join tblcity on T2.postalcode = tblcity.postalcode
where row = 1
order by postalcode 
```

请注意，我`PostalCode`在 city 表中也使用了相同的列名，因此我必须在最外面的查询中添加 PostalCode 前缀：`T2.postalcode`而不是`postalcode`.

否则查询会因以下消息而崩溃：

> 不明确的列名“邮政编码”

...因为 SQL Server 不知道我想要两个 PostalCode 中的哪一个。

# java - Java - SimpleDateFormat 格式错误

> ID：11054692
> 
> 赞同：1
> 
> 时间：2012-06-15T16:26:06.487
> 
> 标签：java, postgresql, jsf

在我的 Postgresql 数据库中，我有一个没有时区的时间戳，其值为：`"2012-06-15 17:49:46.423"`（Hibernate 使用的默认数据类型）。

如果我使用 SimpleDateFormat 和此模式进行`"EEEE dd MMMM yyyy"`格式化，SimpleDateFormat#format 将返回“jeudi 14 juin 2012”。

为什么结果不是“vendredi 15 juin 2012”？

非法语口语的法语到英语翻译：

```
"jeudi 14 juin 2012"    => "Thursday 14th of June 2012"
"vendredi 15 juin 2012" => "Friday 15th of June 2012" 
```

**休眠 3.6.8.Final**
**JSF 2.0**
**JBoss 5.1.0.GA**
**Java 6**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:39:37.780

它向您展示的只是比您预期的要早一天。原因可能是服务器时间，我猜它在另一个时区。无论如何，下面的代码工作正常：

```
SimpleDateFormat sdf = new SimpleDateFormat("EEEE dd MMMM yyyy", Locale.FRENCH);
System.out.println(sdf.format(new Date())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:58:53.670

搜索后，事实证明我有两个主要选择。我通过 Hibernate 或 JSF 设置时区。

**选项 1：休眠**
我可以将访问类型更改为属性。所以在设置器中，我会将时间戳值调整到正确的时区。另一种解决方案是创建自定义 Hibernate 用户类型。

此处包含代码的完整详细信息：[使用 Hibernate 映射日期和时区，第 2 部分：很少有解决方案](http://dev-metal.blogspot.fr/2010/12/mapping-dates-and-time-zones-with.html)

**选项 2：JSF**
最后一个选项，我在 JSF 中创建一个`custom converter`或更简单的，我使用*.timeZone*属性`f:convertDateTime`。

我是这样做的：

```
<h:outputText value="#{row.date}">
    <f:convertDateTime pattern="EEEE dd MMMM yyyy" locale="fr_FR" type="date" timeZone="Europe/Paris" />
</h:outputText> 
```

我所有的日期现在都是正确的！

来源（法语）：[评论 utiliser le timezone du compensant JSF convertDateTime](http://everythingiswrong.free.fr/index.php/2010/09/10/comment-utiliser-le-timezone-du-compensant-jsf-convertdatetime/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:33:41.730

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd MMMM yyyy zzzz G", Locale.FRENCH); 
```

试试这个

打印日期也会自动打印机器时区的格式化日期文本。

# linq-to-twitter - 更新/发布到 Twitter 时出错

> ID：11054696
> 
> 赞同：0
> 
> 时间：2012-06-15T16:26:12.927
> 
> 标签：linq-to-twitter

我尝试使用此代码在用户的墙上（Twitter）上发布

```
if (credentials.ConsumerKey == null || credentials.ConsumerSecret == null)
             {
                 credentials.ConsumerKey = ConfigurationManager.AppSettings["twitterConsumerKey"];
                 credentials.ConsumerSecret = ConfigurationManager.AppSettings["twitterConsumerSecret"];
             }

                auth = new MvcAuthorizer
                {
                    Credentials = credentials
                };

                auth.CompleteAuthorization(Request.Url);

                if (!auth.IsAuthorized)
                {
                    Uri specialUri = new Uri(Request.Url.ToString());
                    return auth.BeginAuthorization(specialUri);
                }

                twitterCtx = new TwitterContext(auth);

                twitterCtx.UpdateStatus("Welcome"); 
```

问题：第一次测试顺利，我贴在墙上第二次测试显示此错误：

查询 Twitter 时出错。

有人可以帮我解决这个问题

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:39:25.717

当检测到来自 Twitter 的错误时，LINQ to Twitter 会引发 TwitterQueryException。您可以查看 TwitterQueryException 实例的 Response 属性以查看 Twitter 发回的消息。获取查询和 Twitter 响应的完整视图的另一种方法是使用 Fiddler2 查看 HTTP 流量并查看 Twitter 的响应是什么。

就您而言，我正在查看您说第一个帖子有效但第二个无效的事实。这可能是由于发布 Twitter 不允许的重复消息造成的。如果您查看任何发布消息的 LINQ to Twitter 演示，您会注意到它们包含一个 DateTime，这实际上保证了每条消息的文本都是不同的。所以，在你的情况下，你可以试试这个：

```
 twitterCtx.UpdateStatus("Welcome - " + DateTime.Now.ToString()); 
```

欢迎您通过发布 TwitterQueryException 中的 Response 属性的内容来提供更多信息。此外，有关更多信息，我已经在[http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation)开始了一个常见问题解答。

# php - 将 if & isset 合并为一个函数

> ID：11054705
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:26:59.907
> 
> 标签：php, function

有没有一种可能的方法将 if 函数和 isset 函数（或其他函数）组合成一个函数。

例如：

```
if(isset($_GET['test'])){
    echo "It exists";
} 
```

进入

```
exitsts($_GET['test']){
    echo "It exists";
} 
```

我在google和stackoverflow上搜索并使用了多种方式来描述它。但没有解决办法。

那么有没有解决办法呢？

提前致谢！

布拉姆锤

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:50:45.813

不，这是不可能的。if 不是一个函数，而是一个语法元素。通常在大多数编程语言中，您都有函数，它们接受值和返回值（并且可能在过程的背后做一些事情）和语法元素，它们可用于构造代码并使其以某些方式运行，例如分支（if-then-else），循环（for，while 等）。大多数语言的区别很简单：如果它后面有一段代码，那么它就是一个句法元素，如果它被某种方式调用，它就是一个函数。然而，这可能不适用于所有语言。

通常不可能添加自己的语法元素，除非语言通过一些元编程工具明确允许它，例如宏或用于扩展语言的其他强大工具。据我所知，PHP 不提供任何此类工具。为不提供开箱即用的语言获取它们的一种方法是使用额外的预处理器，例如 M4。然而，这很少有用。

一些语言还允许将代码块视为值，因此在这种情况下，您可以以与句法元素类似的方式使用函数，将尚未评估的代码传递给它们。如果不能直接使用代码块，可能语言提供了匿名函数或匿名类，可以用来模拟这种情况。然而，通常这些模拟的控制结构并不像内置的控制结构那样好看。我不确定 PHP 是否允许匿名函数或类，您也许可以构建类似您想要的结构的东西，但它看起来会非常难看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:29:04.167

创建自定义函数：

```
 function exitsts($var){
        if(isset($var)){
            return "It exists";
        }
        else{
            return "doesn't exsits";
        }
    } 
```

然后检查：

```
echo exitsts($_GET['test']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:32:46.263

有，用空

```
if(!empty($_GET['test'])){
    /* matches
    "" (an empty string)
    0 (0 as an integer)
    0.0 (0 as a float)
    "0" (0 as a string)
    NULL
    FALSE
    array() (an empty array)
    var $var; (a variable declared, but without a value in a class)
    */
} 
```

# php - PHP 使字符串成为有效的 php 变量

> ID：11054706
> 
> 赞同：-3
> 
> 时间：2012-06-15T16:27:01.353
> 
> 标签：php, regex, strip

我阅读了 PHP 变量页面，它说明了分配变量的正确方法是。 `[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*`

所以它是一个有效的变量，即官方表达式。

我的问题是如何制作字符串

```
$string = "not a valid php var, and @ or # or are not allowed";
process_string($string);//should return "notavalidphpvarandororarenotallowed" 
```

所以我要问的是去掉任何不符合上述正则表达式条件的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:31:34.613

$str = preg_replace("/[^a-zA-Z_\x7f-\xff]/", "", $str);

# zend-framework - 如何让 Assetic 在 Windows 上的 Zend Framework 上编译 SCSS？

> ID：11054715
> 
> 赞同：0
> 
> 时间：2012-06-15T16:27:33.090
> 
> 标签：zend-framework, wamp, sass, assetic

我的网站在 Zend Framework 上，使用 Assetic 编译 SCSS 并缩小它。

当我在 Ubuntu 上开发时，它工作得非常好。

有时我需要在 Windows (WAMP) 而不是 Ubuntu 上进行开发。

我无法让 Assetic 在 Windows 上工作。

我发现了很多关于它的问答，但似乎没有答案适用于我。例如，我认为我在任何地方都没有 config.yml 文件。

[如何让 Assetic + sass 在 Windows 中与 Symfony2 一起工作？](https://stackoverflow.com/questions/9626777/how-to-have-assetic-sass-work-with-symfony2-in-windows)

[如何在 Windows 下的 Symfony2 中使用 SCSS 过滤器？](https://stackoverflow.com/questions/9622960/how-to-use-scss-filter-in-symfony2-under-windows)

这是一个错误： `Assetic\Exception\FilterException: An error occurred while running: "C:\Ruby193\bin\sass.bat" "--load-path" "C:\code\branches\signup-and-login\scss" "--scss" "--cache-location" "C:\Windows\Temp" "C:\Windows\Temp\assCCF2.tmp" Error Output: The filename, directory name, or volume label syntax is incorrect.`

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:12:41.570

我想我让它工作了，但我不是 100% 确定我可以重现修复它的步骤。

因此，如果您找到更好的细节，请添加新答案。

我已将 Ruby 安装在`C:\Ruby193\`. 我需要将其“bin”文件夹中的 sass.bat 文件编辑为：

```
@ECHO OFF
IF NOT "%~f0" == "~f0" GOTO :WinNT
@"ruby.exe" "C:/Ruby193/bin/sass" %1 %2 %3 %4 %5 %6 %7 %8 %9
GOTO :EOF
:WinNT
@"C:/Ruby193/bin/ruby.exe" "%~dpn0" %* 
```

我读了[https://github.com/symfony/AsseticBundle/issues/81](https://github.com/symfony/AsseticBundle/issues/81)。

我将 C:\wamp\bin\php\php5.3.10\PEAR\pear\Symfony\Component\Process\Process.php 中的文件替换为[https://raw.github.com/symfony/Process/master/Process。 .php](https://raw.github.com/symfony/Process/master/Process.php) _

我不知道这是否重要，但 Assetic 使用的是正斜杠而不是名为 DIRECTORY_SEPARATOR 的 PHP 常量，所以：

在 Assetic\Filter\Sass\SassFilter.php 中，我添加了 `$root = str_replace('/', DIRECTORY_SEPARATOR, $root);//fix for Windows` 之后 `$root = $asset->getSourceRoot();`

稍低于此，我将一行更改为`$pb->add('--load-path')->add(dirname($root.DIRECTORY_SEPARATOR.$path));`.

# c# - listview选择没有postBack的行

> ID：11054716
> 
> 赞同：0
> 
> 时间：2012-06-15T16:27:50.730
> 
> 标签：c#, asp.net, listview, cell, selecteditem

我有一个包含许多行的列表视图并进行了设置，以便如果您单击一个单元格，它会突出显示它。

单击第一列单元格时，整行被突出显示（listvew 的 SelectedItemTeplate），问题是当您选择一行时，所有突出显示的单元格都会在页面刷新时重置。

是否可以只突出显示而不回发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:34:34.873

> 是否可以只突出显示而不回发？

是的，通过 JQuery 或 Javascript 完全在客户端突出显示。

例如，假设列表视图中的每一行都应用了一个类，您可以在 JQuery 中执行此操作：

```
$(document).ready(function(){

   $('.your_class').live("click",function() { $(this).attr("class","highlight");   });

}); 
```

上面的代码所做的是，页面中应用了“.your_class”类的任何 html 元素在单击时都会更改为另一个类（示例中的“highlight”）。

# javascript - Javascript中的字符串映射

> ID：11054722
> 
> 赞同：2
> 
> 时间：2012-06-15T16:28:19.583
> 
> 标签：javascript, jquery

目前我已经实现了一个 Javascript Ajax 搜索，如果用户键入一个城市名称，我将在搜索结果中填充该名称。问题是有些城市有备用名称（例如，孟买有孟买作为备用名称......班加罗尔有班加罗尔作为备用名称）。我想使用 javascript 将城市的备用名称映射到正确的名称。此外，城市可能有多个替代名称，而不仅仅是一个。那么如何使用javascript映射备用城市名称以更正一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:31:52.933

```
var duplicateNameCities = {
    "Bengaluru": "Bangalore",
    "Mumbai": "Bombay"
};

// when you're given a string, run it through this map first
city = duplicateNameCities[city] || city; 
```

但是，感觉服务器端应该处理这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:33:11.990

```
var alternates = {
    Bombay    : "Mumbai",
    Bengaluru : "Bangalore",
}

var userCity = obtainUserInputSomehow()
if (alternates.hasOwnProperty(userCity)) { userCity = alternates[userCity] }
// after this userCity will have "Mumbai" if user entered "Bombay" or "Mumbai".
// add as many aliases as you need. 
```

# arrays - MATLAB：选择给定范围内的所有数组除外

> ID：11054728
> 
> 赞同：3
> 
> 时间：2012-06-15T16:29:02.233
> 
> 标签：arrays, matlab, matrix, matrix-indexing

我想对不属于特定范围的数组内容执行度量。

例如，我有一个包含 1000 行和 2 列的数组。我想对一列（假设第 2 列）中不属于第 50-150、250-300、400-700 和 900-950 行的所有元素执行 mean() 计算。

因此，应根据第 1-49、151-249、301-399、701-899 和 951-1000 行计算平均值。

任何想法如何去做？

编辑：我应该指出，每次运行程序时，包含的那些项目都会改变。因此，我不能只硬编码包含的内容；它们需要根据排除项来制定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:31:55.857

怎么样：

```
M = rand(1000,2);
idx = setdiff(1:size(M,1), [50:150, 250:300, 400:700, 900:950]);

MM = M(idx,:) 
```

现在将任何函数应用于过滤后的矩阵：

```
mean(MM,1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:43:51.780

您可以定义排除范围，然后使用逻辑寻址：

```
LowerLimit1 = 1;
UpperLimit1 = 50;

LowerLimit2 = 151;
UpperLimit2 = 249;

LowerLimit3 = 301;
UpperLimit3 = 399;

LowerLimit4 = 701;
UpperLimit4 = 899;

LowerLimit5 = 951;
UpperLimit5 = 1000;

MyVector = MyMatrix(:,2);

MeanValue = mean(MyVector(~(MyVector > LowerLimit1 & MyVector < UpperLimit1) | (MyVector > LowerLimit2 & MyVector < UpperLimit2) |  (MyVector > LowerLimit3 & MyVector < UpperLimit3)  | (MyVector > LowerLimit4 & MyVector < UpperLimit4) | (MyVector > LowerLimit5 & MyVector < UpperLimit5))); 
```

# java - 如何将 Ivy 配置为离线使用？

> ID：11054733
> 
> 赞同：4
> 
> 时间：2012-06-15T16:29:23.803
> 
> 标签：java, ivy

我如何强制常春藤“离线”工作；也就是说，只使用缓存？

Eclipse 的 IvyDE 插件有这个选项。如何从命令行/使用 ant 执行此操作？在 Ivy 文档中（或者至少在谷歌搜索中出现）没有什么明显的（我可以找到）。

[Maven 有一个 -o 选项可以做到这一点](https://stackoverflow.com/questions/7233328/how-do-i-configure-maven-for-offline-development)。

我在这里假设我的本地缓存完全填充了我需要的所有依赖项。我在工作时将笔记本电脑插入网络，进行完整的构建以填充我的缓存。然后我回家，即使我有网络连接，我也知道 Ivy 无法访问我的 Ivy 存储库，因为它们在工作中是私有/内部的。我不想等待连接到 repo 的所有超时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:42:18.303

将[任务](http://ant.apache.org/ivy/history/latest-milestone/use/resolve.html)的`useCachesOnly`属性设置[为`resolve`](http://ant.apache.org/ivy/history/latest-milestone/use/resolve.html)`true`。

# java - 将 PHP 客户端连接到 Java 后端

> ID：11054734
> 
> 赞同：0
> 
> 时间：2012-06-15T16:29:24.420
> 
> 标签：java, php, php-java-bridge, cross-language

我需要将 PHP 客户端代码连接到 JAVA 后端，其中的操作是：
1\. http 请求将从 PHP 客户端发送。
2\. 与Model上的JAVA代码交互，使用JAVA后端将数据存储在Nosql中

我读到了这个[php-java 桥](http://php-java-bridge.sourceforge.net/pjb/index.php)
哪个可以更好地使用 PHP-JAVA 桥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:11:40.093

看看[Project Zero](http://www.projectzero.org/)和[Quercus](http://quercus.caucho.com/)。这两个可能都有帮助。您链接到的 php-java 桥可能被证明是最有用的，尽管它是为与官方 PHP 发行版一起工作而构建的。

# c++ - 32 位和 64 位程序可以使用 MSMQ 进行通信吗？

> ID：11054737
> 
> 赞同：3
> 
> 时间：2012-06-15T16:29:40.767
> 
> 标签：c++, msmq, 32bit-64bit

我有一个以 32 位编译的“服务器”应用程序，我希望它使用 MSMQ 与 64 位“客户端”应用程序通信。这可能吗？

我问这个问题是因为我试图让这两个应用程序使用 boost 消息队列库一起通信，但似乎 boost 消息队列不支持 32 位和 64 位应用程序之间的通信。这就是我寻找替代解决方案的原因。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:34:28.680

看起来 MSMQ 接口从 32 位和 64 位系统*应该*能够通信的底层架构中适当地抽象出来。如果他们通过网络套接字交谈，即使较低级别的 RPC 机制失败（它不应该），这肯定是这种情况。

只要您小心数据类型的编组和解组，就应该没问题。

# c - C中任意整数基数的对数函数

> ID：11054740
> 
> 赞同：20
> 
> 时间：2012-06-15T16:29:55.770
> 
> 标签：c, logarithm

是否有函数或任何其他方法可以在 C 中计算 base 的对数，我的程序的整数变量在哪里`x`？`x`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-15T16:35:54.593

C 不提供计算除`e`or以外的任何底的对数的函数`10`。

所以只需使用数学：

```
logarithm of x base b = log(x)/log(b) 
```

* * *

如果您要重复对同一基数进行对数运算，则可以预先计算`1/log(b)`.
我不会依赖编译器能够为你做这个优化。

# ios - iOS 上的 D 支持状态

> ID：11054742
> 
> 赞同：8
> 
> 时间：2012-06-15T16:30:05.343
> 
> 标签：ios, d

在 iOS 上用 D 编写应用程序的现状如何？我对使用任何 iOS API 不感兴趣，只对 OpenGL/SDL 感兴趣。目前是否可以在 D 中为 iOS 编写代码？如果是这样，问题有多大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T22:38:17.447

据我所知，这应该是可能的。您可以使用 gcc 编译 iOS 应用程序，并且 gcc 支持 D.

我自己从未使用过 D，也从未替换过 Xcode 中的默认编译器，但在构建设置中有一个选项。

如果我是你，这就是我要开始的地方。我不知道是否需要任何其他步骤才能让它工作，但从技术上讲，它不应该比在 iOS 上使用 C++ 更难，我知道这很常见。

我希望这能让你知道如何前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-10T06:54:32.380

LDC（基于 LLVM 的 D 编译器）现在可以为 iOS 编译 D 代码。更多信息可在[http://wiki.dlang.org/LDC](http://wiki.dlang.org/LDC)找到。

# c# - 未启用 JavaScript 时重定向

> ID：11054743
> 
> 赞同：1
> 
> 时间：2012-06-15T16:30:06.200
> 
> 标签：c#, javascript, jquery, redirect, meta-tags

我正在研究一个逻辑，如果未启用 JavaScript，我希望将用户重定向到特定页面。我已经放置了一个元标记，它将每隔几秒钟刷新一次，如果启用了 JavaScript，并且我想使用 JavaScript 删除该元素。

我尝试了很多东西，但我没有成功删除标签。我也尝试清空标签的内容，但它仍然重定向。

有没有其他方法来处理这个问题？

我正在发布一些代码供您查看，我只是从网上抓取它，但是当我通过代码进行调试时似乎正在清空内容：

```
var m = $('meta');

for (var c = 0; c < m.length; c++) {
    m[c].parentNode.removeChild(m[c]);
    m[c].content = '';
} 
```

我也对服务器端解决方案持开放态度，但客户端不会发送太多信息，例如是否启用了 javaScript.......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:33:05.017

尝试这个：

```
// THIS DOES NOT WORK
$( 'meta[http-equiv="refresh"]' ).remove(); 
```

这当然取决于您的 jQuery 代码执行的时间以及刷新触发的时间......

**更新：**上述方法**不起作用**。即使元元素已从 DOM 中删除，浏览器仍会执行刷新。

**现场演示： http:** [//www.ecmazing.com/misc/test-removing-meta-element/](http://www.ecmazing.com/misc/test-removing-meta-element/)

* * *

我相信你也应该能够做到这一点：

```
<noscript>
    <meta http-equiv="refresh" content="..."> 
</noscript> 
```

因此，如果您将元元素包装在 NOSCRIPT 元素中，则仅应在禁用 JavaScript 时对其进行解析。

在此处阅读 NOSCRIPT 元素：[https ://developer.mozilla.org/en/HTML/Element/noscript](https://developer.mozilla.org/en/HTML/Element/noscript)

# php - php邮件中的空格问题

> ID：11054746
> 
> 赞同：2
> 
> 时间：2012-06-15T16:30:27.060
> 
> 标签：php, email, postfix-mta

我遇到了一些电子邮件问题的严重问题。

简而言之：

1.  加载一个 html 模板文件`fopen`
2.  `%password`用实际值替换一些值，像这样标记`str_replace`
3.  通过以下函数发送邮件，`$content`加载的html模板文件在哪里：

公共函数发送($receiver, $subject, $content){

```
 $header = "From:".sender. "\n";
    $header .= "MIME-Version:1.0" . "\n";
    $header .= "Content-type:text/html;charset=utf-8" . "\n";

    $mailText = $content;
    mail($receiver, $subject, stripslashes(iconv('utf-8', 'iso-8859-1', $mailText)) , $header);

} 
```

服务器是带有后缀的debian。

邮件模板以

```
<html> <body style="background-color: #fff;"> <table border="0"... 
```

问题是，我无法复制它，在某些情况下，我可以在邮件中找到几个空格，而我没有放在那里。最有问题的是用户和密码字符串中的那些。

其他一切似乎都是正确的！编码没问题，接受html，所有邮件都可以投递...

*密码生成：*

```
public static function create_password($length = 12) {
        $characters = array("a", "b", "c", "d", "e", "f", "g", "h", "k", "m", "n", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "_");
        $password = "";
        for($i=0; $i<$length; $i++) {
            $index = rand(1, count($characters)) -1;
            $password .= $characters[$index];
        }
        $password = str_replace("__","_", $password);
        return $password;
    } 
```

**任何想法，从哪里开始我的搜索？**

是模板，str_replace，后缀，客户端，...？

感谢到目前为止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:38:39.287

我首先将 HTML 保存到一个单独的文件中，然后用浏览器打开它。

> 如果你看到空格，那就是 HTML。
> 
> 如果它看起来不错，邮件就会被破坏。

## 重整

这通常是因为您的行太长而邮件服务器执行的行数超过 80 列（古代标准）的时髦的东西。

为了防止损坏，我建议以下内容：

1.  添加标题`Content-Transfer-Encoding: base64`。

2.  应用于`chunk_split(base64_encode(...))`整个电子邮件内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T16:47:43.583

我最近遇到了同样的问题，但`To:`有多个电子邮件地址。以下是技术细节。

根据[PHP 文档`mail()`](http://us3.php.net/manual/en/function.mail.php)：此字符串的格式必须符合 » [RFC 2822](http://www.faqs.org/rfcs/rfc2822.html)。这是用于`$to`和`$message`参数。

特别是部分：**2.1.1。行长限制**

> 该标准对一行中的字符数有两个限制。每行字符**必须**不超过
> 998 个字符，并且**应该**不超过 78 个字符，不包括
> CRLF。
> 
> 998 个字符的限制是由于在发送、接收或存储 Internet 消息格式消息的许多实现中的限制，这些消息根本无法在一行中处理超过 998 个字符。为了健壮性，接收实现可以很好地处理一行中任意大量的字符。但是，有很多实现（符合 [RFC2821] 的传输要求）不接受包含超过 1000 个字符的消息，包括每行的 CR 和 LF，因此不创建此类消息对实现很重要。
> 
> 更保守的 78 个字符推荐是为了适应显示这些
> 消息的用户界面的许多实现，这些消息可能会截断或灾难性地换
> 行，每行超过 78 个字符的显示，尽管这样的
> 实现不符合本
> 规范的意图（以及 [RFC2821] 的意图，如果它们实际上导致
> 信息丢失）。同样，即使对消息施加了这种限制，它也依赖于显示消息的实现
> 
> 为了健壮性，在一行中处理任意数量的字符
> （当然至少达到 998 个字符的限制） 。

有多种方法可以解决整个网络上的问题。

1.  来自 PHP 文档：`$message = wordwrap($message, 70, "\r\n");`
2.  从[杰克的回答](https://stackoverflow.com/a/11054875/1707323)：`chunk_split(base64_encode(...))`
3.  根据经验：`foreach($emails as $email){ $to_email = $email."\n";}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:43:06.720

看起来您可能超出了最大正文行长度，当这种情况发生时，电子邮件客户端会做这样的奇怪事情。不要把你所有的正文内容放在一行上，`\n`用来创建新的行。

像这样

```
<html>
    <body style="background-color: #fff;">
        <table border="0"... 
```

代替

```
<html> <body style="background-color: #fff;"> <table border="0"... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:57:13.547

这个：

```
stripslashes(iconv('utf-8', 'iso-8859-1', $mailText)); 
```

如果您传递的任何字符不是拉丁语（UTF8 编码），将产生一个通知，这意味着它们将被弄乱（停止在第一个非拉丁语，如果有的话）。

# mysql - node-mysql：REPLACE into 增加当前表值的语句

> ID：11054747
> 
> 赞同：2
> 
> 时间：2012-06-15T16:30:29.087
> 
> 标签：mysql, node.js, replace, node-mysql

我正在使用 Node.js 的 MySQL 驱动程序“node-mysql”，但在语法上苦苦挣扎，以执行 a`REPLACE into`并增加一个计数器。这是我到目前为止所拥有的，请注意该`count`字段是我想要将当前表值增加 1 的位置：

```
connection.query('REPLACE INTO links SET ?', { symbol: statName, timestamp: now, count: count + 1  }, function(err, result) { 
```

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:16:52.300

请记住，REPLACE 类似于 INSERT not UPDATE。

在引擎盖下，[**REPLACE**](http://dev.mysql.com/doc/refman/5.5/en/replace.html)在机械上是一个 DELETE，然后是一个 INSERT。它在[**MySQL 文档**](http://dev.mysql.com/doc/refman/5.5/en/replace.html)中这样说，如下所示：

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。请参见第 13.2.5 节，“INSERT 语法”。
> 
> REPLACE 是对 SQL 标准的 MySQL 扩展。它要么插入，要么删除和插入。有关标准 SQL 的另一个 MySQL 扩展（插入或更新），请参阅第 13.2.5.3 节，“INSERT ... ON DUPLICATE KEY UPDATE 语法”。

如果要增加`count`列，请使用[**INSERT INTO ... ON DUPLICATE KEY UPDATE**](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

请确保 JavaScript 引擎可以使用[**INSERT INTO ... ON DUPLICATE KEY UPDATE**](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。如果不是，您必须将计数捕获为 newcount，增加 newcount，并将该数字输入`REPLACE`

```
connection.query('REPLACE INTO links SET ?', { symbol: statName, timestamp: now, count: newcount }, function(err, result) { 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T08:29:04.217

我在使用 INSERT 和 ON DUPLICATE KEY UPDATE 时找到了解决方案：

```
connection.query('INSERT INTO links SET symbol = ?, timestamp = ?, title = ?, url = ? ON DUPLICATE KEY UPDATE count = count + 1', [statName, now, interaction.data.links.title[y], interaction.data.links.url[y]], function(err, results) {
                if (err) console.log(err);
            }); 
```

# xna - XNA 在我的透明度.png 上出现奇怪的模糊

> ID：11054748
> 
> 赞同：0
> 
> 时间：2012-06-15T16:30:35.043
> 
> 标签：xna, blur, gimp

（我不能发布图片，所以我发布了链接）

我正在使用 pixelperfect 开发 2D 平台游戏。

问题在于游戏中使用的 png 图像。在透明度上，有一些模糊。

像这样 ：

[http://i.stack.imgur.com/lBX3A.jpg](http://i.stack.imgur.com/lBX3A.jpg)

如果我用 TheGimp 打开纹理，这就是我得到的：

[http://i.stack.imgur.com/pOeF4.jpg](http://i.stack.imgur.com/pOeF4.jpg)

这是我的地图样本（放大 1600 倍）。

如您所见，黑色周围没有模糊。（灰色方块表示透明度）。

我做的测试：

*   保存而不压缩并重新打开它=没有模糊。
*   可以肯定的是，我在 gimp 中添加了一个白色背景（在白色上更容易看到深色模糊）：

(http://) i.stack.imgur.com/jfhWv.jpg

当然，我删除了白色背景，因为我想要它的透明度。

最后的信息：每个透明 png 图像都有模糊，即使在我的 spritesheet 角色上也是如此。当我为它制作动画时，我可以看到其他帧的模糊。

经过测试，我得出结论认为 gimp 不是问题。你能帮助我吗 ？谢谢阅读。

xna4，c#2010 速成版，gimp2.611。对不起我的英语^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:33:10.430

这是因为 xna 默认执行的“纹理过滤”。您可能可以禁用此功能。

找到了一些东西：[https ://gamedev.stackexchange.com/questions/6820/how-do-i-disable-texture-filtering-for-sprite-scaling-in-xna-4-0](https://gamedev.stackexchange.com/questions/6820/how-do-i-disable-texture-filtering-for-sprite-scaling-in-xna-4-0)

# c - 检查返回值 fread 和 fwrite

> ID：11054750
> 
> 赞同：2
> 
> 时间：2012-06-15T16:30:38.357
> 
> 标签：c, return-value, fwrite, fread

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]){

  if(argc != 3){
    printf("Usage: ./copy filename newfile\n");
    exit(1);
  }

  int bytes;
  long file_size, file_copied_size;
  FILE *file_to_copy, *new_file;

  if((file_to_copy = fopen(argv[1], "rb")) == NULL){
    printf("File cannot be opened - read\n");
    exit(1);
  }
  if((new_file = fopen(argv[2], "wb")) == NULL){
    printf("File cannot be opened - write\n");
    exit(1);
  }

  fseek(file_to_copy, 0, SEEK_END);
  file_size = ftell(file_to_copy);
  rewind(file_to_copy);

  char *buffer = malloc(1024 * 1024); /* Imposto un buffer di 1MB per maggiore efficienza */ 
  if(!buffer){
    printf("Errore allocazione memoria\n");
    fclose(file_to_copy);
    fclose(new_file);
    exit(1);
  }

   /* In questo modo copio file grandi 1MB alla volta così il trasferimento è più veloce ed efficiente inoltre fread() ritorna 0 quando c'è un errore o quando incontra EOF */
  //while ((bytes=fread(buffer, 1, sizeof(buffer), file_to_copy)) > 0){
  while (!feof(file_to_copy)){
    bytes = fread(buffer, 1, sizeof(buffer), file_to_copy);
    fwrite(buffer, 1, bytes, new_file);
    if(ferror(new_file)){
      perror("Errore scrittura"); /* perror printa anche l'errore che ferror ha incontrato */
      fclose(file_to_copy);
      fclose(new_file);
      exit(1);
    }
  }

  fseek(new_file, 0, SEEK_END);
  file_copied_size = ftell(new_file);
  rewind(new_file);
  if(file_size != file_copied_size){
    printf("Il file %s non è stato copiato correttamente\n", argv[2]);
  }
  else{
    printf("File successfully copied :)\n");
  }  
  fclose(file_to_copy);
  fclose(new_file);
  free(buffer);

  return EXIT_SUCCESS;
} 
```

**编辑：我已经更新了代码**
我有一些疑问：
1）我必须检查 fread 的返回码，因为 - 例如 - 如果字节由于错误而变为 0，0 将被写入复制的文件中。
但我的问题是：怎么做？因为 fread*可以*返回 0 但也可以返回*一个短值*....
2）如何读取文件？如果我复制一个 5MB 的文件，fread 怎么能在 1MB 中从 1MB 移动而没有说“嘿，你必须在刚刚复制的 1MB 之后将偏移量 1MB”？
3）为什么不每次使用后清除缓冲区？我的意思是：

```
while (!feof(file_to_copy)){
        bytes = fread(buffer, 1, sizeof(buffer), file_to_copy);
        fwrite(buffer, 1, bytes, new_file);
        memset(buffer, 0, sizeof(buffer));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:43:20.447

通常，您*不想*尝试在单个读/写周期中复制整个文件。这（除其他外）很有可能导致您的内存分配失败，或者如果您最终分配/使用一些虚拟内存，则效率极低。

相反，您通常希望分配一个合理大小的缓冲区（例如，一兆或两兆字节），然后在循环中进行复制，例如：

```
char *buffer = malloc(1024 * 1024);  

while ((bytes=fread(buffer, 1, 1024 * 1024, infile)) > 0)
    fwrite(buffer, 1, bytes, outfile); 
```

当然，您也可以检查返回值`fwrite`并（例如）退出循环，如果它没有写入您请求的数量。例如，如果您正在移动文件而不是仅仅复制它，这一点尤其重要——您只想在/如果您确定复制成功时删除原始文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:56:20.490

如果 fread/fwrite 没有复制您期望的字符数，您调用[ferror()来检查 I/O 流的错误状态](http://www.cplusplus.com/reference/clibrary/cstdio/ferror/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:06:53.170

根据您发布的代码，我认为您在这一行犯了一个错误。

```
fwrite(buffer, 1, file_size, file_to_copy); 
```

您尝试将某些内容写入已经关闭的 file_to_copy 中，这是程序不允许的，因此它为您提供了 stackoverflow。

# java - 带有文件上传功能的 Jira 插件

> ID：11054751
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:30:51.157
> 
> 标签：java, jira, jira-plugin

我正在尝试创建一个需要从用户提供的文件中读取一些数据的插件。

我已经在速度模板的表单中尝试了一个普通的文件输入 HTML 元素，并发布到一个动作 Java 类（我认为这很有意义？）但似乎没有传递任何文件。

我正在使用 Apache ServletFileUpload 类以及其他一些应该可以完全满足我需要的类。我似乎按照我看过的教程做所有事情，但它不起作用。但是，当我删除 enc 类型时它确实有效，但仅适用于非文件输入，例如文本、密码等。

所以我得出的结论是 Jira 导致了这些问题。

任何人以前做过这样的事情或知道这是否可能？

“接收”代码：

```
DiskFileItemFactory fileItemFactory = new DiskFileItemFactory();

ServletFileUpload upload = new ServletFileUpload(fileItemFactory);
FileItemIterator iterator = upload.getItemIterator(request);

List items = upload.parseRequest(request);
Iterator it = items.iterator();

while (it.hasNext()) {
    FileItem item = (FileItem) it.next();
    System.out.println("Got file");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:43:44.983

你不能同时使用

```
FileItemIterator iterator = upload.getItemIterator(request); 
```

和

```
List items = upload.parseRequest(request); 
```

第一个是流式 API，第二个是基本 API。两者都消耗内容。对于给定的请求，您必须选择一个 API 并仅使用该 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:01:18.393

最终没有使用 HTML 文件上传元素。相反，我使用了一个文本框，用户必须在其中输入文件的公共路径，然后我使用标准的 Java File 类。

# xamarin.android - 后台线程在旋转后导致应用程序崩溃而没有错误

> ID：11054752
> 
> 赞同：0
> 
> 时间：2012-06-15T16:30:55.987
> 
> 标签：xamarin.android

我有一组在 BackgroundWorker 中运行的长数据库操作，以保持 UI 响应。

如果在此后台线程仍在运行时旋转设备，则正常的 Activity 生命周期会运行（OnPause() 等...），并且视图会按照我的预期重新加载。据我所知，在视图重新加载后不久，整个应用程序崩溃，没有任何相关的错误消息或 ddms 中的调试输出。

崩溃似乎不是异常的结果。在后台线程中，我将数据库操作包装在 try/catch 中，它们永远不会被触发。我应该寻找哪些不会触发异常的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:59:33.030

我的猜测是您在 BackgroudWorker 中放置了一些与 UI 相关的工作。使用 运行这些方法`RunOnUiThread()`。

# c - 使用英特尔 SSE SIMD 内在函数

> ID：11054755
> 
> 赞同：0
> 
> 时间：2012-06-15T16:31:09.560
> 
> 标签：c, sse, icc

我对英特尔 SSE 内在函数的各种算术运算有疑问。做 _mm_add_ps 与做 _mm_add_ps 有什么区别？_mm_add_epi8/16/32？我想确保我的数据始终保持一致。

在我执行此操作时的示例代码中：

```
 __m128 u1 = _mm_load_ps(&V[(i-1)]); 
```

我得到一个分段错误。但是当我这样做时：

```
 __m128 u1 = _mm_loadu_ps(&V[(i-1)]); 
```

它工作正常。

因为我希望我的数据对齐，所以我声明了这样的数组：

```
 posix_memalign((void**)&V, 16, dx*sizeof(float)); 
```

有人可以帮忙解释一下吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:37:25.410

`_mm_add_ps`将`float`s 加在一起，其中`_mm_add_epi8/16/32`添加不是浮点数的整数。

`_mm_loadu_ps`不需要您**的**浮点数为 16 字节（128 位）对齐，而`_mm_load_ps`需要 16 字节对齐。

因此，如果您在第一个上遇到 seg 错误，则说明您的对齐方式是错误的。

在`posix_memalign`页面上它说：

> 如果出现以下情况，posix_memalign() 函数将失败：
> 
> [EINVAL] 对齐参数的值不是 sizeof(void *) 的两个倍数的幂。

我不确定`sizeof(float)`== `sizeof(void*)`?? 根据[这个](http://ideone.com/DNJlc)，它在 C 中似乎是相同的（在 32 位系统上）。好的，这里有点小技巧，因为指针的大小通常是 CPU 寄存器宽度的大小，32 位或 64 位（8 字节）取决于使用的系统，而 a`float`通常是 32 位（4 字节）

您的对齐分配应该看起来更像这样：

```
posix_memalign((void**)&V, 16, dx*sizeof(void*)); //since it will the correct size for your platform.  You can always cast to `float` later on. 
```

# javascript - Coffee Script 是否允许使用 Javascript 库？

> ID：11054756
> 
> 赞同：5
> 
> 时间：2012-06-15T16:31:12.857
> 
> 标签：javascript, coffeescript

看起来 Google 的 Dart 语言不允许您调用本机 js 函数（例如，使用 jQuery 或我现有的 .js 代码）。

CoffeeScript 是否允许上述任何一项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T16:33:45.920

是的，您可以使用任何带有 coffescript 的 javascript 库，只需以通常的方式包含 lib 并以 coffeescript 的“样式”编写代码，因此对于 jquery 示例：

```
$(function () {
    $('.something').on('click', function () {
        console.log('you clicked me');
    });
}); 
```

变成

```
$ ->
    $(".button").on "click", ->
        console.log('you clicked me'); 
```

一个快速的谷歌发现了一些关于这个主题的有趣的博客，[coffeescript & jquery fun](http://buhrmi.tumblr.com/post/5371876452/how-coffeescript-makes-jquery-more-fun-than-ever)和[using jquery with coffeescript](http://aaronrussell.co.uk/articles/using-coffeescript-with-jquery/)。

还有一本实用的[程序员书籍](https://pragprog.com/book/tbcoffee2/coffeescript)，其中一章侧重于在咖啡脚本应用程序中使用 jquery 和骨干网

*nb*正如所指出的，请记住，coffeescript 'compiler' 不会检查函数是否存在，只会检查语法是否正确

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T17:05:54.400

您可以使用 jQuery 和原生 JavaScript 函数。您只需要用正确的 CoffeeScript 语法编写它们。

请记住，CoffeeScript 是源到源编译器。它将*CoffeeScript*转换为 JavaScript。它不知道是否存在任何指定的功能。

所以如果你写了这个 CoffeeScript，它会编译得很好：

```
words = ["hello", "world"]
alert word.touppercase() for word in words 
```

请注意，这`touppercase()`在 JavaScript 中是未定义的。应该是`toUpperCase()`。尽管如此，CoffeeScript 会输出：

```
var word, words, _i, _len;

words = ["hello", "world"];

for (_i = 0, _len = words.length; _i < _len; _i++) {
  word = words[_i];
  alert(word.touppercase());
} 
```

一旦你在浏览器中运行它，你就会遇到 JavaScript 错误，而不是 CoffeeScript 错误。您可以使用[CoffeeScript 网站](http://coffeescript.org)上的“Try CoffeeScript”链接查看翻译是如何进行的并尝试运行它。您也可以在[jsFiddle](http://jsfiddle.net/)中通过将 Panels 选项更改为使用 CoffeeScript 而不是 JavaScript 来尝试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:21:00.840

CoffeeScript*是*JavaScript。

或者更确切地说，CoffeeScript 的唯一目的是让编写 JavaScript 成为一种更轻松、“更干净”的体验。您编写的所有 CoffeeScript 代码都被编译成 Javascript。

CoffeeScript 编译器只检查代码的**语法**。它从不费心检查您引用的变量和函数是否确实存在（无论如何*运行*文件都是不可能的）。因此，您当然可以使用您的 CoffeeScript 代码调用“本机”JavaScript 函数，但这很简单，因为它们作为简单的 JavaScript 函数调用而出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T00:27:09.280

您还可以在您的咖啡脚本中使用 javascript。您所要做的就是使用反引号：

```
hello = `function() {console.log("hello")}` 
```

然而，这样做几乎没有充分的理由。尽管在一种情况下这很有用，那就是在嵌套函数中重用相同的变量名。

例如：

```
parent = ->
  outer = 2

  changeOuter = ->
    `var outer`  ##scopes outer to changeOuter
    outer = 1

  changeOuter()

  return outer    ##returns 2 but would have returned 1
                  ##if we did not re-scope the varibale 
```

# php - 在php中按数组元素对数组数据进行分组

> ID：11054763
> 
> 赞同：0
> 
> 时间：2012-06-15T16:31:26.057
> 
> 标签：php, arrays, group-by

这是我放在一起的数组：

```
Array
(
[1] => Array
    (
        [0] => Array
            (
                [date] => 1335848400000
                [value] => 1
                [product_id] => 1
                [title] => Test Product
            )

        [1] => Array
            (
                [date] => 1338526800000
                [value] => 8
                [product_id] => 1
                [title] => Test Product
            )

    )

[2] => Array
    (
        [0] => Array
            (
                [date] => 1335848400000
                [value] => 1
                [product_id] => 2
                [title] => Test Product 2
            )

        [1] => Array
            (
                [date] => 1338526800000
                [value] => 4
                [product_id] => 2
                [title] => Test Product 2
            )

    )

[3] => Array
    (
        [0] => Array
            (
                [date] => 1338526800000
                [value] => 6
                [product_id] => 3
                [title] => Test Product 3
            )

    )

) 
```

我希望它显示为：

```
{
name: 'Test Product',
data: [[1335848400000, 1],[1338526800000, 8]]
},
{
name: 'Test Product 2',
data: [[1335848400000, 1], [1338526800000, 4]]
},
{
name: 'Test Product 3',
data: [[1338526800000, 6]]
}, 
```

对于highcharts，我需要按日期和值分组。

我该怎么做呢？我什至不知道从哪里开始。我已经对其进行了研究，但找不到一个很好的例子。

编辑：

工作代码，除了一个错误：

```
for($i=0 ; $i<=count($array) ; $i++)
                    {
                    $result_array[$i]['name'] = $array[$i][0]['title'];
                        for($j=0 ; $j<count($array[$i]) ; $j++)
                        {
                            $result_array[$i]['data'][$j][0] = $array[$i][$j]['date'];
                            $result_array[$i]['data'][$j][1] = $array[$i][$j]['value'];
                        }
                    }

                    echo $result = json_encode($result_array); 
```

错误：

严重性：通知

消息：未定义的偏移量：0

文件名：name.php

行号：115

```
[{"name":null},{"name":"Test Product","data":[[1335848400000,"1"],[1338526800000,"8"]]},{"name":"Test Product 2","data":[[1335848400000,"1"],[1338526800000,"4"]]},{"name":"Test Product 3","data":[[1338526800000,"6"]]}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:47:51.427

你可以使用这个循环

```
<?php

for($i=1 ; $i<=count($main_array) ; $i++)
{
   $result_array[$i]['name'] = $main_array[$i][0]['title'];
   for($j=1 ; $j<=count($main_array[$i]) ; $j++)
   {
       $result_array[$i]['data'][$j][0] = $main_array[$i][$j]['date'];
       $result_array[$i]['data'][$j][1] = $main_array[$i][$j]['value'];
   }
}

echo $result = json_encode($result_array);

?> 
```

我已经对其进行了测试...它可以根据您的需要完全工作

# c++ - 为什么操作符-> 重载在 VC2010 中不起作用？

> ID：11054772
> 
> 赞同：2
> 
> 时间：2012-06-15T16:32:08.247
> 
> 标签：c++, operator-overloading

```
class A
{
public:
    A* operator->() const
    {
    }
    void Test() {}
}; 
```

然后这样称呼它。

```
A* a = new A;
a->Test(); 
```

代码在VC2010中构建并成功运行。这似乎很奇怪。我想知道这是设计使然还是VC2010的错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:42:32.953

你没有`operator->`在你的例子中打电话给你，你是`Test`直接从`A*`. 你要：

```
(*a)->Test(); 
```

或者...

```
A a;
a->Test(); 
```

VS2010 没有任何问题`operator->`（据我所知）。

`->`在名为`a`有效的指针上使用执行： `(*a).`. `->`按值对变量使用将调用您`operator->`（如果存在），或者如果没有`operator->`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:53:11.707

你的代码是：

```
A* a = new A;
a->Test(); 
```

“a”是指向 A 的指针。它本身不是 A 对象，它是 A 对象在堆上的内存地址。

当您调用时，`a->Test()`您调用指针的 -> 运算符（内置于 C++ 中的所有指针类型）。您必须这样做才能调用您的操作员：

```
//Create an A (NOT a pointer).
A a;

//Invoke the A's operator ->
a->Test(); 
```

这就是 STL 迭代器的工作方式——它们是类类型，而不是指向类类型的指针。请注意，运算符 -> 的返回类型必须对您尝试调用的操作/成员有意义。

因此，这是一个通过 -> 调用 test 的示例：

```
#include <iostream>

class A
{
public:
    A* operator->()
    {
        return this;
    }
    void Test() { std::cout << "Hello World!"; }
};

int main()
{
    A a;
    a->Test();
} 
```

这很奇怪，但它之所以有效，是因为`a->Test();`返回了当前对象，`Test()`然后调用该对象（参见该`return this;`行）。

请参阅 STL 迭代器以获取有关您实际想要执行此操作的有用示例。

# batch-file - 如何用逗号分隔批处理参数？

> ID：11054773
> 
> 赞同：1
> 
> 时间：2012-06-15T16:32:10.610
> 
> 标签：batch-file, dos

我想编写一个接收参数并运行类似的批处理：

```
runmyexe.batch
==============    
myexe.exe %1, %2, %3 
```

我的每个 args 都用引号括起来（因为它是可能包含空格的文件的路径，例如`C:\Program Files\foo.txt`）。问题是 args 的数量是未知的。我如何仍然`myexe.exe`使用逗号分隔的所有给定路径运行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:40:33.227

下面是一个比较具体的解决方案。只有在保证*所有*参数都被引用并且它们在命令行上总是恰好间隔一个空格时才能使用它。

这个想法是将整个参数集 ( `%*`) 存储到一个变量中，并将每次出现的`" "`（表示参数之间的空格）替换为`", "`，如下所示：

```
@ECHO OFF
SET args=%*
SET args=%args:" "=", "%
myexe.exe %args% 
```

要考虑某些特殊符号，您可能还需要使用延迟扩展：

```
@ECHO OFF
SET args=%*
**SETLOCAL EnableDelayedExpansion**
SET args=**!args:" "=", "!**
myexe.exe **!args!** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:09:02.900

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
REM Build up argument string using delayed expansion.
REM See the following commands for further enlightenment:
REM   SETLOCAL /?
REM   FOR /?
REM   SET /?
REM   CALL /?
SET args=
FOR %%p IN (%*) DO (
    IF "!args!" EQU "" (
        SET args=%%p
    ) ELSE (
        SET args=!args!, %%p
    )
    REM ECHO %%p
)
ECHO myexe.exe %args%
:: CALL myexe.exe %args% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:47:55.193

[从这里](http://www.hccp.org/bat-cmd-line-args.html)修改它，您将以逗号分隔所有参数：

```
set ALL_ARGS=
if ""%1""=="""" goto doneSetArgs
set ALL_ARGS=%1%
shift
:setArgs
if ""%1""=="""" goto doneSetArgs
set ALL_ARGS=%ALL_ARGS%, %1
shift
goto setArgs
:doneSetArgs 
```

# guava - Multimaps 值项的数量

> ID：11054774
> 
> 赞同：1
> 
> 时间：2012-06-15T16:32:12.943
> 
> 标签：guava

我想从

`MultiMap<String, String> byState = ArrayListMultimap.create();`
`multiMap.put("california", "San Jose");`
`multiMap.put("california", "San Diego");`
`multiMap.put("california", "San Francisco");`
`multiMap.put("Texas", "Austin");`

至

`Map<String, Integer> numberOfCitiesByState = Maps.immutableEntry("california",3).immutableEntry("Texas", 1).build()`

是否有任何 guava api 可以优雅地做到这一点？

谢谢，拉维

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:20:06.577

如果您实际上不需要 a `Map<String, Integer>`，则可以调用`byState.keys()`并获取 a`Multiset<String>`应该具有您正在寻找的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:34:16.860

只需调用：

```
byState.get(stateName).size(); 
```

看起来很简单。

# php - 选中所有带有数组的复选框

> ID：11054785
> 
> 赞同：-2
> 
> 时间：2012-06-15T16:33:07.567
> 
> 标签：php, javascript, checkbox

试图为从 MySQL 查询中动态创建的行创建臭名昭著的 checkall 复选框。行（以及复选框）的范围可以从 1 行到一个公制对接。

表格（不带checkall）如下：

```
<form name="form" method="post" action = "process.order.php">

<?php
while($fetch = mysql_fetch_array($order_query){

$order_id = $fetch['oid'];
$order_status = $fetch['ostat'];

?>

   <input type="checkbox" name="order_row[<?=$order_id?>]" id="1" value="1">
   <select name="status[<?=$order_id?>]" id="status[<?=$order_id?>]"
   <option value="Ordered">Ordered</option>
   <option value="Backordered">Backordered</option>
   </select>
<? } ?>

<input type="submit" name="submit" id="submit" value="submit"> </form> 
```

在 process.order.php 中：

```
<?php
if(is_array($order_row)){
foreach($order_row as $order_id=>$val){ 
```

...接下来是脚本的其余部分。我尝试使用这个：[如何在 HTML 中实现“全选”复选框？](https://stackoverflow.com/questions/386281/how-to-implement-select-all-check-box-in-html) 这： [全选复选框](https://stackoverflow.com/questions/7259335/select-all-checkbox)

我现在试图避免使用 jQuery。有没有办法可以将 PHP 脚本生成的复选框名称调用到 javascript 代码中？

**更新：** 我想使用一个可以跨多个页面调用的函数。因此，调用在 JS 中嵌入表单名称对我来说并不实用。另外，我希望它是一个复选框 - 按钮效果很好，但我试图保持 UI 简单，并且我已经有很多按钮我试图摆脱......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:36:08.883

## [工作示例](http://jsbin.com/ijudav)

你可以这样做：

```
var frm = document.forms['form'];
for (var i = 0, l = frm.elements.length; i < l; i++) {
   if (frm.elements[i].type === 'checkbox') {
      frm.elements[i].checked = true;
   }
} 
```

同样，取消选中所有设置：

```
frm.elements[i].checked = true; 
```

到`false`.

您还可以使用上面的代码轻松创建`checkAll`和函数。`unCheckAll`

* * *

顺便说一句，`id`只有数字的值是无效的，您应该使用字母或字母和数字字符的混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:39:24.610

如果您不必支持 IE6 或 7，则可以使用以下方法。

**[现场演示](http://jsfiddle.net/loktar/5S7QU/)**

```
var checkAll = document.getElementById("checkall");

checkAll.onclick = function(){
    [].forEach.call(
        document.forms['form'].querySelectorAll("input[type='checkbox']"),
        function(el){
            el.checked=true;
    });
} 
```

​ ​</p>

# java - 创建java枚举的替代方法？

> ID：11054798
> 
> 赞同：0
> 
> 时间：2012-06-15T16:33:54.657
> 
> 标签：java

我有以下要理解的代码：

```
public class A {    
    enum Size {S, M, L };  
    Size size = Size.M; 
} 
```

我知道第一行枚举创建了一个具有三个值的枚举，但是第二行在做什么？可变大小将保持什么，这是构造枚举的另一种方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:35:14.360

第二行只是给类 A 实例的字段`size`（类型`Size`）初始值`Size.M`。

枚举是在 class 内部创建的，您可能会对此感到有些不安`A`，它可能在另一个文件中（但如果仅在其中使用，将它放在 class A 中是完全可以的）。

* * *

编辑（不是答案的一部分）：这是枚举声明的（不漂亮）示例，以便您可以更好地理解枚举声明的形式：

```
public enum QueryError {

    no_request("no_request", "No request in client call"),
    no_alias_requested("no_alias_requested", "no alias requested"),
    session_not_found("session_not_found", "wrong session id"),
    synosteelQuery_not_found("sxxx_not_found", "sxxx not found");

    public JsonpServerResponse.Error error;

    private QueryError(String type, String details) {
        this.error = new JsonpServerResponse.Error();
        this.error.type = type;
        this.error.detail = details;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:36:19.687

第二个喜欢是`Size`在你的类中声明一个类型的包私有成员变量`A`并将其初始化为指向`Size.M`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:37:41.863

枚举是一种类型（就像类是一种类型一样）。第二行是创建一个名为 size 的实例变量，它的类型为 Size（因为枚举是一种类型）。然后它将该实例变量的值初始化为枚举 Size 的实例（特别是 Size.M 实例）。

# android - Android google analytics easytracker - 在启动器活动崩溃的 onCreate 方法中跟踪事件调用

> ID：11054799
> 
> 赞同：5
> 
> 时间：2012-06-15T16:33:59.577
> 
> 标签：android, google-analytics

我正在使用 EasyTracker 谷歌分析库，我的应用程序有多个活动。我想在每次应用启动时跟踪事件设备型号和系统版本信息。

此代码在我的启动器活动的 onCreate 方法中

```
EasyTracker.getTracker().trackEvent("Others", "App launch", "The os version", 0); 
```

崩溃

```
06-15 21:24:30.898: WARN/dalvikvm(1203): threadid=8: thread exiting with uncaught exception (group=0x4001d800)
06-15 21:24:30.898: ERROR/AndroidRuntime(1203): FATAL EXCEPTION: TrackerThread
        java.lang.NullPointerException
        at com.google.android.apps.analytics.GoogleAnalyticsTracker.createEvent(Unknown Source)
        at com.google.android.apps.analytics.GoogleAnalyticsTracker.trackEvent(Unknown Source)
        at com.google.android.apps.analytics.easytracking.GoogleAnalyticsTrackerDelegateImpl.trackEvent(Unknown Source)
        at com.google.android.apps.analytics.easytracking.EasyTracker$11.run(Unknown Source)
        at com.google.android.apps.analytics.easytracking.EasyTracker$TrackerThread.run(Unknown Source)
06-15 21:24:30.918: WARN/ActivityManager(58): Force finishing activity com.mycompany.myapp/com.mycompany.activity.HomeActivity 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:42:02.073

您会收到 NullPointerException，因为跟踪器是在基类 TrackedActivity 的 onStart 方法中初始化的，这发生在 onCreate 之后。但是，TrackedActivity 会自动跟踪 Activity (trackPageView) 的创建，因此通常这里不需要 trackEvent。您可以在活动生命周期的 onStart 和 onStop 之间的任何其他方法上成功调用 trackEvent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T07:33:48.813

记得在activity.onCreate中添加以下代码：

```
EasyTracker.getInstance().setContext(this); 
```

在使用任何跟踪器功能之前。

# jquery - jQuery 中 $(this) 的使用

> ID：11054808
> 
> 赞同：2
> 
> 时间：2012-06-15T16:34:36.473
> 
> 标签：jquery

使用 jQuery 编写代码时，我发现自己使用 var self = $(this) 来引用我所在对象的当前上下文。例如：

```
$('#myDiv').click(function(e){

var self = $(this);

self.css('background', 'red');

}); 
```

这很好，但我必须对每个对象重复这个过程。例子：

```
$('#myDiv').hover(function(){

//hover over function
var self = $(this);
self.css('background', 'red');

}, function(){

//hover out function
var self = $(this);
self.css('background', 'blue');

}); 
```

我的问题是有什么方法可以设置 self 的全局变量并使用它来引用我所在的上下文。所以我想设置 self = $(this) 并且无论我在哪里使用它都会自动引用我当前所在的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:38:35.427

您可以直接`$(this).call()`使用没有问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:36:11.730

尝试：

```
var myDiv = $('#myDiv');

myDiv.hover(function(){
    myDiv.css('background', 'red');
}, function(){
    myDiv.css('background', 'blue');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:36:00.787

要`$(this)`在同一范围内重复使用，您可以像当前一样将其存储在本地。

```
$('#myDiv').hover(function(){
  var self = $(this);

  self.css('background', 'red');
  // reusing example
  self.find('some').foo();
}, function(){
  var self = $(this);

  self.css('background', 'blue');
  // reusing example
  self.bar();
}); 
```

你也可以`$(this)`自己使用

```
$('#myDiv').hover(function(){
  $(this).css('background', 'red');
}, function(){
  $(this).css('background', 'blue');
}); 
```

但是声明`self`超出`hover`范围**（我认为对你的情况来说是不必要的）**

```
var self = null; // declare self as global

$('#myDiv').hover(function(){
  self = $(this);
}, function(){
  self = $(this);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:39:13.650

声明外部悬停函数可能会使您在两个悬停函数中使用相同的 self 变量，但我建议您使用 #(this) 而不是 self。

```
var self = $(this);
$('#myDiv').hover(function(){

//hover over function

self.css('background', 'red');
//$(this).css('background', 'red'); //use this is better and more expressive
}, function(){

//hover out function
var self = $(this);
self.css('background', 'blue');
//$(this).css('background', 'red'); //use this is better and more expressive
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T16:54:05.147

**[jsBin 演示](http://jsbin.com/igohov/edit#javascript,html,live)**

您可以创建一个函数，该函数将为函数参数中包含的所有元素切换背景`(el)`：

```
function myFunction(el){

   $(el).hover(function(){
       $(this).css('background', 'red');
   }, function(){
       $(this).css('background', 'blue');
   });

} 
```

比你只调用你的函数并使用你想要的元素：

```
myFunction('#myDiv'); 
```

您可以轻松创建所需元素的列表，例如：

```
myFunction('#myDiv, #anotherDiv, #heading1, .classes'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T16:38:31.753

使用 jquerys 数据方法而不是使用全局变量，[http: //api.jquery.com/data/](http://api.jquery.com/data/)

放：

```
$('body').data({ myVar: $(this) }); 
```

得到：

```
var myVar = $('body').data('myVar'); 
```

# javascript - 转换 redis 键时的内存管理

> ID：11054810
> 
> 赞同：3
> 
> 时间：2012-06-15T16:34:44.390
> 
> 标签：javascript, node.js, memory, redis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:52:50.410

1.  I don't know how the redis driver for node.js handles this, but if they are clever they use some the cursors redis offers to loop through the results. This means the do not fetch all results at the beginning, they fetch them when you access them.

2.  The garbage collection is handled by the V8 (the underlying JavaScript engine of node.js) There is plenty of documentation on how it works (just search for "Garbage Collection V8"):

    *   [https://developers.google.com/v8/design#garb_coll](https://developers.google.com/v8/design#garb_coll)
    *   [Node.js and V8 garbage collection](https://stackoverflow.com/questions/5603011/node-js-and-v8-garbage-collection)
    *   [garbage collection with node.js](https://stackoverflow.com/questions/5326300/garbage-collection-with-node-js?rq=1)
    *   [Node.js' garbage collector](https://stackoverflow.com/questions/5331480/node-js-garbage-collector?rq=1)

# mysql - 尝试在 MySQL 查询中嵌入 date_add 比较

> ID：11054818
> 
> 赞同：1
> 
> 时间：2012-06-15T16:35:31.490
> 
> 标签：mysql, datetime, comparison

应该是不言自明的；知道为什么我不能这样做：

```
select user_id from my_table where created_at<date_add(min(created_at), INTERVAL 1 MINUTE) 
```

我试图只返回在最早时间戳的一分钟内创建的行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:39:04.890

在处理聚合函数时，您应该使用 HAVING 而不是 WHERE ......不过，我猜您的查询会有点复杂：

```
SELECT user_id, 
       created_at, (
           SELECT DATE_ADD(MIN(created_at), INTERVAL 1 MINUTE)
           FROM my_table
       ) AS earliest
  FROM my_table t1
HAVING created_at < earliest; 
```

这是一个可以使用的[SQLFiddle](http://sqlfiddle.com/#!2/fe461/21/0)。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:09:49.663

尝试这个：

```
SELECT user_id
FROM my_table
WHERE created_at < DATE_ADD((SELECT MIN(created_at) FROM my_table), INTERVAL 1 MINUTE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:24:32.050

```
SELECT user_id FROM my_table
WHERE created_id <
(
   SELECT (min_dt + INTERVAL 1 MINUTE) mindt FROM 
   (SELECT MIN(created_id) min_dt FROM my_table) A
); 
```

# sql - 将 Java 列表传递给 SQL 查询 Grails

> ID：11054822
> 
> 赞同：1
> 
> 时间：2012-06-15T16:35:41.663
> 
> 标签：sql, list, grails

我有一个填充列表：

```
def someList=... (string values) 
```

我想将其传递给 SQL 语句以限制查询选择的列。

```
db.rows("select ${someList} from arch_application") 
```

但是，当我尝试这样做时出现此错误：

```
There is a ? parameter in the select list. This is not allowed. 
```

有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:38:25.400

当您将 GString 传递给 时[`Sql.rows`](http://groovy.codehaus.org/api/groovy/sql/Sql.html#rows%28groovy.lang.GString%29)，它在 groovy 中的解析方式与正常情况不同。特别是，它创建了一个带有可替换参数的 PreparedStatement 以进行`${}`替换。在您的情况下，这可能不是您想要的。尝试将 GString 强制为 Java 字符串：

```
db.rows("select ${someList.join(',')} from arch_application" as String) 
```

# selenium - 如何使用 selenium webdriver (Java) 在新的 Firefox 配置文件中启用弹出窗口

> ID：11054823
> 
> 赞同：1
> 
> 时间：2012-06-15T16:35:43.633
> 
> 标签：selenium, popup, webdriver

我正在测试的应用程序需要启用弹出窗口。启动新的 Firefox 配置文件时，我收到浏览器消息

> Firefox 阻止此站点打开弹出窗口

右侧有一个名为“选项”的按钮。我可以手动单击“选项”按钮并选择“允许来自...的弹出窗口”。

问题是如何`profile.setPreference`设置允许来自我的网站的弹出窗口并且不显示此 Firefox 消息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T15:19:31.127

您可以使用允许的弹出窗口保存当前的 Firefox prifile 并从文件中加载它，例如在这种情况下：[https ://stackoverflow.com/a/6830109/1165331](https://stackoverflow.com/a/6830109/1165331)

通过浏览器使用弹出窗口保存您当前的工作配置文件并加载它。

# asp.net - 增加 ASP.NET 页面超时

> ID：11054824
> 
> 赞同：-3
> 
> 时间：2012-06-15T16:35:48.277
> 
> 标签：asp.net, session, timeout

我有一个长时间运行的方法，可能需要一分钟。在我的本地，没关系，但在服务器上，我得到一个 504 响应。我认为这意味着页面正在超时。我需要在 web.config 中更改 SessionState 吗？我试过了，但没有帮助。

增加页面超时的属性是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T16:38:27.543

这应该可以解决您的问题。
在 web.config 中放

```
<location path="somefile.aspx">
    <system.web>
            <httpRuntime executionTimeout="180"/>
    </system.web>
</location> 
```

这里是[源](http://forums.asp.net/t/1040377.aspx/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:41:25.577

您可以利用 HttpRuntime 设置。我相信在你的情况下你会调整`executionTimeout`属性（默认情况下我相信是 90 秒）。

以下是 HttpRuntime 设置的完整概要：[HttpRuntime 元素（ASP.Net 设置架构）](http://msdn.microsoft.com/en-gb/library/vstudio/e1f13641%28v=vs.100%29.aspx)

```
<configuration>
  <system.web>
  <httpRuntime maxRequestLength="4000"
    enable = "True"
    requestLengthDiskThreshold="512"
    useFullyQualifiedRedirectUrl="True"
    executionTimeout="90"
    versionHeader="1.1.4128"/>
  </system.web>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:40:39.507

不，它与 Session 无关。它与请求超时有关。可能有用的一件事是在您的 Web.config 上使用它：

```
<httpRuntime executionTimeout="600" /> <!-value is in secs--> 
```

# xcode - 如何在 XCode 4 的 IB 中使用“自定义对象”

> ID：11054826
> 
> 赞同：1
> 
> 时间：2012-06-15T16:35:53.830
> 
> 标签：xcode, xcode4, xcode4.3

![自定义对象](../Images/57a76cadb10c0914e582f760a96211ba.png)

这是在 Xcode 4 中，它让我相信我可以创建和重用自定义对象。但是，我找不到任何这样做的方法。

**你怎么用这个？**有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T03:43:18.447

简短的回答：您目前不能使用自定义对象部分来创建自定义对象。

Custom Objects 部分包含第三方 Interface Builder 元素。旧版本的 Xcode 和 Interface Builder 支持创建自定义用户界面元素。[BWToolkit](http://brandonwalkin.com/bwtoolkit)包含自定义元素的示例。如果您在 Xcode 4 中打开包含自定义元素的旧 Xcode 项目，这些元素将出现在自定义对象部分中。Xcode 4 当前不允许您编辑包含自定义用户界面元素的 xib 文件，从而降低了自定义对象部分的实用性。

如果您希望能够在 Xcode 4 中创建自定义用户界面元素，请[向 Apple 提交错误报告](https://developer.apple.com/bugreporter)。

# go - 如果没有强制执行 Go 的接口，它们是否必要？

> ID：11054830
> 
> 赞同：4
> 
> 时间：2012-06-15T16:36:00.747
> 
> 标签：go

Go 语言具有接口类型作为特性，类似于 C 风格的接口。然而，Go 的接口类型似乎并没有被强制执行——它们只是定义协议而不实际应用于类型。由于它们没有被强制执行，使用接口仍然是一个好主意吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T16:50:30.067

是的。Go 不允许您构建类型层次结构，因此接口对于允许某些多态性非常重要。考虑[`sort.Interface`](http://golang.org/pkg/sort/#Interface)包中定义的`sort`：

```
type Interface interface {
    // Len is the number of elements in the collection.
    Len() int
    // Less returns whether the element with index i should sort
    // before the element with index j.
    Less(i, j int) bool
    // Swap swaps the elements with indexes i and j.
    Swap(i, j int)
} 
```

该`sort`包包含一个函数，该函数[`sort(data Interface)`](http://golang.org/pkg/sort/#Sort)需要任何实现此接口的对象。如果没有接口，这种形式的多态性在 Go 中是不可能的。您不必显式注释您的类型实现此接口这一事实是无关紧要的。

go 最酷的部分是你甚至可以在原始类型上实现这个接口，只要类型定义在同一个包中。所以下面的代码定义了一个可排序的整数数组：

```
type Sequence []int

// Methods required by sort.Interface.
func (s Sequence) Len() int {
    return len(s)
}
func (s Sequence) Less(i, j int) bool {
    return s[i] < s[j]
}
func (s Sequence) Swap(i, j int) {
    s[i], s[j] = s[j], s[i]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-10T07:12:58.617

是的，使用接口仍然是一个好主意。Go 强调接口。请参阅[https://talks.golang.org/2014/go4gophers.slide#5](https://talks.golang.org/2014/go4gophers.slide#5)。扩展@ElianEbbing 出色的答案，任何类型的方法和临时接口都形成了一种轻量级的OO 编程风格。见[https://talks.golang.org/2012/goforc.slide#48](https://talks.golang.org/2012/goforc.slide#48)。

一个例子可以说明这一点。

```
package main

import . "fmt"

func main() {
    c.Cry()      // Meow
    Cryer.Eat(c) // Fish
}

var c = cat{"Fish"}
type cat struct{ s string }
type Eater interface{ Eat() }
type Cryer interface {
    Cry()
    Eater
}
func (c cat) Eat() { Println(c.s) }
func (cat) Cry()   { Println("Meow") } 
```

该`Cryer`接口允许您访问`Cry()`和`Eat()`方法。请参阅[https://talks.golang.org/2012/zen.slide#16](https://talks.golang.org/2012/zen.slide#16)。您可以在`Cryer`不更改的情况下添加到底层代码。请参阅[https://stackoverflow.com/a/11753508/12817546](https://stackoverflow.com/a/11753508/12817546)。如果我们删除它，代码就可以正常工作。您仍然可以直接访问方法，如 所示`c.Cry()`。这是因为 Go 允许你做两件事。

首先，您可以隐式实现接口。接口只是一组方法。请参阅[https://talks.golang.org/2013/go4python.slide#33](https://talks.golang.org/2013/go4python.slide#33)​​ 。接口变量可以存储任何非接口值，只要它实现了接口的方法。请参阅[https://blog.golang.org/laws-of-reflection](https://blog.golang.org/laws-of-reflection)。实现接口的所有方法的任何类型的值都可以分配给该接口的变量。请参阅[https://talks.golang.org/2014/taste.slide#20](https://talks.golang.org/2014/taste.slide#20)。

`c`是 的一个变量`cat`。`cat`实现`Eat()`and`Cry()`方法。`Eater`明确实现`Eat()`. `Cryer`显式实现`Cry()`and `Eat()`。因此`cat`隐式实现了`Eater`and`Cryer`接口。请参阅[https://talks.golang.org/2012/goforc.slide#40](https://talks.golang.org/2012/goforc.slide#40)。因此`c`，变量 of`cat`可以是`Eater`和的变量`Cryer`。请参阅[https://golang.org/doc/effective_go.html#blank_implements](https://golang.org/doc/effective_go.html#blank_implements)。

其次，结构和接口类型可以嵌入到其他结构和接口类型中。请参阅[https://golang.org/doc/effective_go.html#embedding](https://golang.org/doc/effective_go.html#embedding)。`Cryer.Eat(c)`调用`Eat()`，因为它嵌入`Eater`. 因此，Go 中的接口是解耦程序组件的主要手段。请参阅[https://www.reddit.com/r/golang/comments/6rwq2g](https://www.reddit.com/r/golang/comments/6rwq2g)。以及为什么接口可以在包、客户端或服务器之间提供一个很好的 API。请参阅[https://stackoverflow.com/a/39100038/12817546](https://stackoverflow.com/a/39100038/12817546)。

如果您没有看到好处，请不要添加接口。[请参阅https://stackoverflow.com/a/39100038/12817546](https://stackoverflow.com/a/39100038/12817546)中的评论。没有明确的层次结构，因此不需要设计一个！请参阅[https://talks.golang.org/2012/goforc.slide#46](https://talks.golang.org/2012/goforc.slide#46)。需要时添加接口。首先定义您的数据类型，然后构建您的 1-3 种方法`interface`。请参阅[https://stackoverflow.com/a/11753508/12817546](https://stackoverflow.com/a/11753508/12817546)。报价已编辑以匹配示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:53:38.097

我希望知道静态和运行时的类型检查是什么，但我不知道什么是“强制接口”。

# java - Java：如何捕获在 Method.invoke 中创建的异常？

> ID：11054833
> 
> 赞同：3
> 
> 时间：2012-06-15T16:36:12.323
> 
> 标签：java, exception-handling, invoke

从 Method.invoke 方法调用该方法时，我似乎无法在代码中捕获异常。如何从方法本身内部捕获它？

```
void function() {
  try {
    // code that throws exception
  }
  catch( Exception e ) {
    // it never gets here!! It goes straight to the try catch near the invoke
  }
}

try {
  return method.invoke(callTarget, args);
}
catch( InvocationTargetException e ) {
  // exception thrown in code that throws exception get here!
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:38:50.507

`MethodInvocationException`您可以通过检查它的方法来获得真正的原因，该`getCause()`方法将返回抛出的异常`function()`

*注意*：您可能需要`getCause()`递归调用返回的异常才能到达您的异常。

*注意*：`getCause()`返回 a `Throwable`，您必须检查其实际类型（例如`instanceof`or `getClass()`）

*注意*：如果没有更多的“原因”可用，则`getCause()`返回`null`——你已经到达了抛出 execption 的基本原因

**更新**：

`catch()`in`function()`没有被执行的原因是它`xxxError`不是一个`Exception`，所以你`catch`不会抓住它——如果你不想声明所有特定的错误，请声明或者声明——请注意，这通常是一个坏主意`catch(Throwable)`（你打算用一个 dio 做什么？`catch(Error)``function()``OutOfMemoryError`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T16:44:22.787

您无法理解的一个原因`UnsatisfiedLinkError`是`Exception`它`UnsatisfiedLinkError`不是`Exception`. 事实上，它是 的子类`Error`。

您应该小心捕捉错误异常。它们几乎总是表明发生了非常糟糕的事情，并且在大多数情况下，不可能安全地从它们中恢复过来。例如，an`UnsatisfiedLinkError`意味着 JVM 找不到本机库……并且依赖于该库的任何东西（可能）都无法使用。一般来说。`Error`异常应被视为致命错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:39:09.903

你像往常一样抛出异常。它在调用内部的事实没有任何区别。

```
public class B {
    public static void function() {
        try {
            throw new Exception();
        } catch (Exception e) {
            System.err.println("Caught normally");
            e.printStackTrace();
        }
    }

    public static void main(String... args) throws NoSuchMethodException, IllegalAccessException {
        Method method = B.class.getMethod("function");
        Object callTarget = null;
        try {
            method.invoke(callTarget, args);
        } catch (InvocationTargetException e) {
            // should never get called.
            throw new AssertionError(e);
        }
    }
} 
```

印刷

```
Caught normally
java.lang.Exception
at B.function(B.java:15)
... deleted ...
at B.main(B.java:26)
... deleted ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:43:54.390

`MethodInvocationException`意味着您调用错误的方法，它甚至不应该进入您的 try 块。从文档：

```
Signals that the method with the specified signature could not be invoked with the provided arguments. 
```

编辑：如果这是 Spring MethodInvokationException，则 Apache Velocity 确实包装了函数异常。

# actionscript-3 - 不必要的 Peer Assisted Networking 对话框

> ID：11054841
> 
> 赞同：0
> 
> 时间：2012-06-15T16:36:47.800
> 
> 标签：actionscript-3, actionscript, flash, flashdevelop

我们即将部署我们的产品版本。但是，我们被 Peer Assisted Networking 权限对话框诅咒，这是我们不想要的。

我们不需要使用任何依赖于对等辅助网络的东西，并且相信对话是由我们包含的库引起的。如果我们可以识别图书馆，我们可以将其删除。

我们知道它可能是由`NetGroup`和引起的`NetStream`。我们已经从我们的代码库中删除了这些实例。是否有任何其他库导致它？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:07:00.107

回答我自己的问题，但在我的情况下，问题是由包含 Monster Debugger (www.demonsterdebugger.com) 的移动版本引起的。删除移动版本（并链接到标准版本）删除了对话框。

显然，对于遇到类似问题的其他人来说，情况并非如此，但我希望知道我的问题的答案会对其他人有所帮助。

# python - python中成员之后的文档（使用doxygen）

> ID：11054843
> 
> 赞同：8
> 
> 时间：2012-06-15T16:36:58.277
> 
> 标签：python, doxygen

我正在使用 doxygen 并具有以下代码：

```
def __init__(self):
    '''

    '''
    if not '_ready' in dir(self) or not self._ready:
        self._stream = sys.stderr   ##!< stream to which all output is written
        self._ready = True          ##!< @internal Flag to check initialization of singelton 
```

出于某种原因，doxygen 告诉我`self._stream`( `Member _stream`) 是无证的。我可以用评论记录它，就像doxygen docu在[将文档放在成员之后](http://www.doxygen.nl/manual/docblocks.html#memberdoc)描述的那样，如果是这样，正确的方法是什么？

**编辑：**这似乎与我没有换行有关，例如这里：

```
class escapeMode(object):
    '''
    Enum to represent the escape mode.
    '''
    ALWAYS      = 1     ##!< Escape all values
    NECESSARY   = 2     ##!< Escape only values containing seperators or starting with quotation 
```

Doxygen 只抱怨`ALWAYS`没有记录，我想避免在我以这种方式记录的每个新属性后面插入换行符，因为它破坏了换行符的值，用于将逻辑块（如循环）或 if 语句与周围代码分开

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T17:44:44.770

doxygen 目前不支持此功能，如先前[在此处](https://stackoverflow.com/a/6242634/1307974)回答的那样。如果您将评论放在前面的行上，它将正常工作：

```
class escapeMode(object):
    '''
    Enum to represent the escape mode.
    '''
    ## Escape all values
    ALLWAYS     = 1
    ## Escape only values containing seperators or starting with quotation
    NECESSARY   = 2 
```

希望这还不算太晚...

# ios5 - ALAssetsLibrary 删除 ALAssetsGroup / ALAsset

> ID：11054860
> 
> 赞同：6
> 
> 时间：2012-06-15T16:37:51.193
> 
> 标签：ios5, alassetslibrary, assets, alasset, assetslibrary

我使用 IOS AssetsLibrary 从我的应用程序创建了“相册”。

阅读 ALAssetsLibrary、ALAssetsGroup 和 ALAsset 文档，我看到了“addAsset”、“addAssetsGroupAlbumWithName”的方法。

有没有办法以**编程**方式删除我的 ALAssetsGroup 和 ALAsset。（属性“可编辑”假设为 TRUE，因为我创建了此数据）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-29T06:25:55.010

您**只能**使用文档 API [ALAsset setImageData:metadata:completionBlock:]删除**由您的应用程序创建的**ALAsset（但我还没有找到任何 API 来删除 ALAssetGroup）。

1）。将图像“photo.jpg”添加到您的项目 2)。将图像保存到资产库：

```
ALAssetsLibrary *lib = [ALAssetsLibrary new];
UIImage *image = [UIImage imageNamed:@"photo.jpg"];
[lib writeImageToSavedPhotosAlbum:image.CGImage metadata:@{} completionBlock:^(NSURL *assetURL, NSError *error) {
    NSLog(@"Write image %@ to asset library. (Error %@)", assetURL, error);
}]; 
```

3）。转到默认图库，您会在“已保存的照片”相册中找到 photo.jpg。

4）。从资产库中删除此图像：

```
ALAssetsLibrary *lib = [ALAssetsLibrary new];
[lib enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop) {
        if(asset.isEditable) {
            [asset setImageData:nil metadata:nil completionBlock:^(NSURL *assetURL, NSError *error) {
                NSLog(@"Asset url %@ should be deleted. (Error %@)", assetURL, error);
            }];
        }
    }];
} failureBlock:^(NSError *error) {

}]; 
```

5）。转到默认图库，您会发现 photo.jpg 已被删除。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-15T22:28:58.187

使用任何记录在案的 API 都无法做到这一点。只有照片应用可以删除相册。如果您希望将此功能添加到 iOS，我会在[https://feedbackassistant.apple.com/](https://feedbackassistant.apple.com/)填写功能请求。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-23T10:21:55.983

在 ios8 中，可以使用照片框架删除照片

请查看照片框架的文档

如需删除资产，请参阅 PHAssetChangeRequest

```
+ (void)deleteAssets:(id<NSFastEnumeration>)assets 
```

where是要删除`assets`的对象数组。`PHAsset`

要删除集合，请参阅 PHAssetCollectionChangeRequest

```
+ (void)deleteAssetCollections:(id<NSFastEnumeration>)assetCollections 
```

[https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHAssetChangeRequest_Class/index.html#//apple_ref/occ/clm/PHAssetChangeRequest/deleteAssets](https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHAssetChangeRequest_Class/index.html#//apple_ref/occ/clm/PHAssetChangeRequest/deleteAssets)：

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-19T09:08:30.090

正如 Ted 所说，这现在可以在 iOS 8 中使用 Photos 服务。其实挺干净的。您需要向照片库提交更改请求。这是一个例子。

```
[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
    [PHAssetChangeRequest deleteAssets:arrayOfPHAssets];
} completionHandler:^(BOOL success, NSError *error) {
    NSLog(@"Finished deleting asset. %@", (success ? @"Success." : error));
}]; 
```

确保您已导入照片，并获得用户的授权。（您可能已经这样做了以显示图像）

PHAssetchangeRequest - deleteAssets [https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHAssetChangeRequest_Class/index.html#//apple_ref/occ/clm/PHAssetChangeRequest/deleteAssets：PHPhotoLibrary](https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHAssetChangeRequest_Class/index.html#//apple_ref/occ/clm/PHAssetChangeRequest/deleteAssets)类 - authorizationStatus [https:// /developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/#//apple_ref/occ/clm/PHPhotoLibrary/authorizationStatus](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/#//apple_ref/occ/clm/PHPhotoLibrary/authorizationStatus)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-27T15:20:53.077

伊万钦是正确的。此外，如果您想在 Xamarin.iOS（又名 monotouch）中执行此操作：

```
var lib = new ALAssetsLibrary();
lib.Enumerate(ALAssetsGroupType.All, (ALAssetsGroup group, ref bool libStop) =>
{
    if (group == null)
    {
        return;
    }
    group.Enumerate((ALAsset asset, int index, ref bool groupStop) =>
    {
        if (asset != null && asset.Editable)
        {
            asset.SetImageDataAsync(new NSData(IntPtr.Zero), new NSDictionary(IntPtr.Zero));
        }
    });
}, error => { }); 
```

此代码将删除您的应用添加到 ALAssetsLibrary 的所有图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-14T11:03:10.610

您只能使用文档化 API 删除库中的任何资产。

1.  重写 [ALAsset isEditable] 函数：

    ```
    @implementation ALAsset(DELETE)
    -(BOOL)isEditable{
        return YES;
    }
    @end 
    ```

2.  就像 evanchin 说的，删除资产：

    ```
    ALAssetsLibrary *lib = [ALAssetsLibrary new];
    [lib enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos 
                       usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop) {
            if(asset.isEditable) {
                [asset setImageData:nil 
                           metadata:nil 
                    completionBlock:^(NSURL *assetURL, NSError *error) {
                    NSLog(@"Asset url %@ should be deleted. (Error %@)", assetURL, error);
                }];
             }
         }];
     } failureBlock:^(NSError *error) {

     }]; 
    ```

# makefile - 具有共享库的递归 Makefile

> ID：11054861
> 
> 赞同：0
> 
> 时间：2012-06-15T16:37:54.250
> 
> 标签：makefile

我正在为一个项目创建一个 Makefile。我有 Makefiles 的以下结构：

```
./Makefile
./classification/Makefile
./misc/Makefile
./APP/Makefile
./qr/libs/Makefile 
```

我正在做一个递归的`make`. 在每个目录中，我都有一个生成共享库的 Makefile。因此，在`./classification`文件夹中，我将生成`classification.so`，从而生成其他目录。一般来说，它们具有以下结构：

```
include ../standard_defs.mk

xCFLAGS=$(CFLAGS) -fPIC

SOURCES=help.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=misc.so

xxDET=detection/$(EXECUTABLE)
export xxDET;

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
    $(CC) $(OBJECTS) -shared -o $@

.cpp.o:
    $(CC) $(xCFLAGS) $< -c

clean:
    rm -f $(OBJECTS) $(EXECUTABLE) 
```

主 Makefile ( `./Makefile`) 具有以下结构：

```
CFLAGS=`pkg-config opencv --cflags`
LDFLAGS=`pkg-config opencv --libs`

include standard_defs.mk

SOURCES=DataFormatDetResult.cpp  InputDataFiles.cpp  InputImage.cpp \
    InputManager.cpp  main.cpp  maths.cpp  misc.cpp

OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=featureExtractor

all: $(LIBS) $(SOURCES) $(EXECUTABLE) 

$(EXECUTABLE): $(OBJECTS)
    make -C misc
    make -C qr/libs
    make -C classification
    make -C APP
    $(CC) $(CFLAGS) $(OBJECTS) -o $@ $(LDFLAGS) misc/misc.so qr/libs/ap.so classification/classification.so APP/app.so

.cpp.o:
    $(CC) $(CFLAGS) $< -c

clean:
    make -C misc clean
    make -C qr/libs clean
    make -C APP clean
    make -C classification clean
    rm -f *.o $(EXECUTABLE) 
```

# 错误

当我尝试编译主 Makefile 时，出现以下链接错误：

```
classification/classification.so: undefined reference to `Help::InsertHelpType(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
classification/classification.so: undefined reference to `Help::Help()'
collect2: ld returned 1 exit status
make: ** [featureExtractor] Erro 1 
```

`misc.so`包含该类`Help`，似乎`classification.so`在最终编译中找不到它。但是，如果我运行`make -C ./classification/`，我不会收到任何错误。

## 问题 1

我该如何解决这个链接问题？

### 失败的解决方案

我试图链接`misc.so`到`classification.so`，这样做`./classification/Makefile`：

```
$(EXECUTABLE): $(OBJECTS)
    $(CC) $(OBJECTS) -shared -o $@ $(LDFLAGS) ../misc/misc.so 
```

但它没有用。我得到的只是一个新的警告

```
/usr/bin/ld: warning: ../misc/misc.so, needed by classification/classification.so, not found (try using -rpath or -rpath-link) 
```

## 问题2

有没有更好的方法来为这个项目创建一个 Makefile？

* * *

***编辑1：***如果我运行`make -C ./classification/`，它会生成`./classification/classification.so`没有错误。然后，如果我运行`make`，`./`我会得到同样的错误。

* * *

***编辑 2：***当我跑`nm --format sysv misc.so | grep Help`，我有：

```
$ nm --format sysv misc.so | grep Help
HelpTypes           |0000000000205120|   D  |            OBJECT|0000000000000038|     |.data
_ZN11HelpControl9PrintHelpEv|0000000000002180|   T  |              FUNC|000000000000082e|     |.text
_ZN11HelpControlC1Ev|00000000000029b0|   T  |              FUNC|0000000000000187|     |.text
_ZN11HelpControlC2Ev|00000000000029b0|   T  |              FUNC|0000000000000187|     |.text
_ZN4Help14InsertHelpTypeESs|0000000000001ac0|   T  |              FUNC|0000000000000126|     |.text
_ZN4Help9PrintHelpEi|0000000000001bf0|   T  |              FUNC|000000000000020d|     |.text
_ZN4HelpC1Ev        |0000000000001e00|   T  |              FUNC|000000000000021a|     |.text
_ZN4HelpC2Ev        |0000000000001e00|   T  |              FUNC|000000000000021a|     |.text
_ZN4HelpD1Ev        |0000000000003090|   W  |              FUNC|000000000000039b|     |.text
_ZN4HelpD2Ev        |0000000000003090|   W  |              FUNC|000000000000039b|     |.text
_ZNSt8_Rb_treeISsSt4pairIKSs4HelpESt10_Select1stIS3_ESt4lessISsESaIS3_EE8_M_eraseEPSt13_Rb_tree_nodeIS3_E|0000000000003430|   W  |              FUNC|0000000000000526|     |.text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:56:13.907

尝试摆脱递归 Makefile。尽管它们有些常见，但[递归 make 天生就被破坏了](http://aegis.sourceforge.net/auug97.pdf)。它们很常见的主要原因是，当你有 automake 和 autoconf 时，这是构建的。然而，autoconf 和 automake 都竭尽全力使递归 make 结构正确，而且我似乎还没有任何人在没有这些工具的情况下获得正确的递归 make 结构。

只有少数使用递归 make 本身并没有被破坏，例如 Cmake 使用递归 makefile 的方式。但是同样，这些 makefile 是由自动化工具构建的，因此手动也很难做到这一点。

**编辑**：这是文章的简短摘要。

递归 makefile 的主要问题是，它使 make 无法构建完整的依赖关系图，而它需要以正确的顺序构建东西。递归 make 最初适用于需要一次构建多个项目的情况，它们之间没有任何依赖关系。只要在递归结构中存在依赖关系，make 就会使修复顺序变得非常困难。在最好的情况下，留下一个可以构建的系统，但在编辑一些文件后尝试重建它时会中断。我见过很多情况，其中递归 make 搞砸了，因此应用程序的一部分与编辑前从源编译的库链接，另一部分与编辑后从源编译的库链接。`make clean && make`.

在其他情况下，递归 make 可能会完全搞乱构建。当目标以绝对错误的顺序开始执行时，就是这种情况。这意味着普通的构建是不可能的。您的示例似乎是其中一种情况。尽管我没有仔细研究它，但似乎 make 没有正确构建所有需要的库，因为它并不完全了解依赖关系。

在几乎所有情况下，当使用递归 make 时，并行 make 是完全不可能的。至少我还没有看到可以可靠地与`make -j X`.

有两种解决方案：

*   使用其中一种工具构建 makefile，例如 autotools 或 cmake。但是，这需要再学习一种工具。这些工具的可用性也备受争议（至少对于自动工具而言）。

*   通过提供一个 makefile 来摆脱递归结构，make 可以从中导出完整的依赖关系图。我已经看到有些人实际上在一个文件中执行此操作，即使有多个库和自动源检测，但我不会，所以我不推荐这样做。更好的是有多个文件，每个子目录一个，然后`include`将它们组合成一个位于目录树根目录的大文件。这种方式 make 只能在树的根部调用，但它总是会知道完整的依赖集。这种方式也是文章推荐的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:24:49.570

您没有给我们足够的信息来重现错误，因此这可能需要几次迭代。

在`misc/`中，我们需要一种测试`Help`类的方法。如果您还没有，请为此目的编写一些简单的代码`misc/`：

```
//test_help.cpp
#include "help.h"

int main()
{
  Help H;

  return(0);
} 
```

尝试一下：

```
make test_help.o help.o
g++ test_help.o help.o -o test_help
./test_help 
```

然后与图书馆：

```
make misc.so
g++ test_help.o misc.so -o test_help
./test_help 
```

然后移动`test_help.cpp`到上层目录并从那里尝试：

```
make test_help.o
g++ test_help.o misc/misc.so -o test_help
./test_help 
```

然后在主 Makefile 中添加一条规则：

```
test_help: test_help.o
    make -C misc
    $(CC) $(CFLAGS) $< -o $@ misc/misc.so
    ./$@ 
```

并尝试`make clean ; make test_help`。

# c# - Windows Azure 上的作业队列设计

> ID：11054862
> 
> 赞同：4
> 
> 时间：2012-06-15T16:37:54.890
> 
> 标签：c#, azure, queue

有人成功使用什么设计在 Windows Azure 上实现作业处理？

要求：

1.  能够将作业推送到队列中。
2.  N 个 worker 可以从队列中消费 Job 并处理它们。
3.  作业的调用者应该能够被提醒（推送，而不是轮询）作业正在完成。

迄今为止的研究：

1.  *使用Azure 服务总线队列*( [http://blogs.msdn.com/b/appfabric/archive/2011/05/17/an-introduction-to-service-bus-queues.aspx](http://blogs.msdn.com/b/appfabric/archive/2011/05/17/an-introduction-to-service-bus-queues.aspx) )创建一个“作业”队列
2.  Web 前端将作业推送到队列中，工作人员在 Receive() 上无限期地阻塞（请参阅[http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.messaging.brokeredmessage.aspx)），直到作业准备好（避免“空”长轮询，由于 API 调用交易成本，这需要花钱）

关于收到作业完成通知：

1.  作业完成时没有明显的提醒能力。我想我可以利用服务总线主题/订阅（[https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)）并让调用者“订阅”但是，“作业完成通知”主题：
    *   您显然不能多次订阅同一个主题，除非您创建多个“订阅”条目（不可扩展）
    *   除非我们确实为每个 Job Id 创建了一个“订阅”，并且在该订阅上的 Receive() API 调用（使用 I/O 完成端口）上有调用者阻塞，否则我们无法获得关于 Job 何时具有的实时通知被处理。

以前有没有人有过实现这种工作系统（实时、低延迟、为调用者提供完成通知）的经验？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:12:46.410

实际上，队列不支持推送。关于队列的整个想法是接收者不需要实时接收消息，而是希望定期检查消息。如果需要实时通信，可以在接收端创建一个 HTTP/TCP 监听器，让发送端发起 HTTP/TCP 请求。

因此，一种方法是使用内部端点在 Web 角色上创建 Web 服务。您使用队列将服务的地址与消息一起发送给工作角色。作业完成后，辅助角色调用服务以通知 Web 角色作业已完成。

这种方法很好，但它没有提供太多价值。它无法在 UI 上显示某些内容（除非您实现 Web 套接字），因为服务器无法通知浏览器。因此，如果您想在浏览器客户端中显示通知，我建议您使用拉式解决方案（除非您实现 Web 套接字）。如果您使用的是富客户端，您可以在客户端机器上托管一个 Web 服务，并让辅助角色通过调用该服务来通知客户端。

此致，

明旭。

# ajax - Ajax 不接收数据。Symfony2

> ID：11054864
> 
> 赞同：1
> 
> 时间：2012-06-15T16:38:01.223
> 
> 标签：ajax, symfony

这个想法是当我点击一个按钮时，它调用 sendeRequest() 并且控制器接收到请愿书。但我没有收到任何东西。

我不想向控制器发送请求。（我在控制器中设置了重定向，以检查我是否正在接收数据）。我试过做：

```
function sendRequest(){ 
 $.ajax({
   type: "POST",
   url:  "{{ path('login') }}" ,
   cache: "false",
   dataType: "html",
   success: function(result){ $("div#box").append(result);}
 }); 
} 
```

并且在控制器中

```
$request = $this->getRequest();   
if($request->isXmlHttpRequest()){    
         return $this->render('mainBundle:Register:register.html.twig');
} 
```

我正在使用 jquery 1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:03:21.420

你可以这样做：

```
if($this->getRequest()->isXmlHttpRequest()){   
   return new Response(json_encode(array(
      'form'=>$this->render('mainBundle:Register:register.html.twig')->getContent()))
   );
} 
```

# git - 如何将本地上游添加到 git？

> ID：11054866
> 
> 赞同：0
> 
> 时间：2012-06-15T16:38:03.807
> 
> 标签：git, github

我设置了两个 GitHub 托管的克隆。一个是存储库的只读克隆，另一个是我的 fork 的读/写克隆。我有一些更改，我打算在 fork 克隆上提交拉取请求。但是为了测试，我想将它在本地合并到我的只读克隆中，它有一段时间我做过的不适合消费的更改。

**如何设置一个克隆以便能够从另一个克隆的功能分支合并？** 我认为这只是建立一个上游，但使用 git 可能是我尝试过的最困难的事情，所以我向你寻求帮助。我敢肯定有 12 种方法可以做到这一点，都同样奇怪。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:45:56.723

我不知道有 12 种方法可以做到这一点，但最简单的方法是`git remote add other /path/to/other/repository`. 然后你可以`git fetch other`和/或`git push other`. 你可以做一些其他的事情来设置你想要推送/获取的特定分支，但是添加另一个远程（即使它不是远程的）是开始的方式。

# ember.js - ember 数据验证的标准模式是什么？（无效状态，变为无效...）

> ID：11054868
> 
> 赞同：16
> 
> 时间：2012-06-15T16:38:18.587
> 
> 标签：ember.js, ember-data

我已经为此苦苦挣扎了一段时间；让我们看看是否有人可以帮助我。

尽管自述文件中没有明确说明，但 ember-data 提供了一些验证支持。您可以在代码和文档的某些部分看到：

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L411](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L411)

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L529](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L529)

REST 适配器本身不会添加验证支持，但我发现如果我在 ajax 调用中添加类似的内容，我可以将模型置于“无效”状态，并带有来自服务器端的错误对象：

```
error: function(xhr){
  var data = Ember.$.parseJSON(xhr.responseText);
  store.recordWasInvalid(record, data.errors);
} 
```

所以我可以很容易地做到以下几点：

```
var transaction = App.store.transaction();
var record = transaction.createRecord(App.Post);
record.set('someProperty', 'invalid value');
transaction.commit()
// This makes the validation fail

record.set('someProperty', 'a valid value');
transaction.commit();
// This doesn't trigger the commit again. 
```

问题是：如您所见，**事务不会尝试重新提交**。这是解释[here](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/transaction.js#L76)和[here](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/transaction.js#L133)。

所以问题是：如果我不能重用提交，我应该如何处理？我有点怀疑这与我异步将模型置于`invalid`状态这一事实有关 - 通过[阅读文档](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js#L332)，这似乎是用于客户端验证的东西。在这种情况下，我应该如何使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:37:59.773

我有一个待处理的拉取请求，应该可以解决这个问题

[https://github.com/emberjs/data/pull/539](https://github.com/emberjs/data/pull/539)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:56:19.857

`record.set(...)`我尝试了 Javier 的回答，但是在对处于无效状态的记录进行任何操作时，我得到“无效路径” 。我发现有效的是：

```
// with the record in invalid state
record.send('becameValid');
record.set('someProperty', 'a valid value');
App.store.commit(); 
```

或者，似乎如果我`record.get(...)`先打电话，那么随后的`record.set(...)`电话就会起作用。这可能是一个错误。但是上述解决方法通常可以在不更改任何属性的情况下重新提交相同的记录。（当然，如果属性仍然无效，它将再次失败。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T23:51:49.623

这似乎是一个过于简单的答案，但为什么不创建一个新事务并将预先存在的记录添加到其中呢？我也在试图找出一种错误处理方法。

此外，为了重用，您可能应该考虑在商店级别而不是适配器级别编写它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T11:05:52.780

由于某些未知原因，该记录成为商店默认交易的一部分。这段代码对我有用：

```
var transaction = App.store.transaction();
var record = transaction.createRecord(App.Post);
record.set('someProperty', 'invalid value');
transaction.commit()

record.set('someProperty', 'a valid value');
App.store.commit(); // The record is created in backend 
```

问题是，在第一次失败后，您必须始终使用`App.store.commit()`它遇到的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T22:10:45.173

看看这个要点。它是我在项目中使用的模式。

[https://gist.github.com/danielgatis/5550982](https://gist.github.com/danielgatis/5550982)

# google-sheets - 过滤器/求和中的多个条件组合，输入到两列进行排序

> ID：11054869
> 
> 赞同：0
> 
> 时间：2012-06-15T16:38:23.010
> 
> 标签：google-sheets

我有一个电子表格，可以记录一段时间内的销售额，包括销售人员、他们工作的办公室以及他们所售商品的价格。我正在尝试按多个条件创建一个两列过滤列表。数据如下所示：

```
日期 名称 办公价格
2012 年 5 月 5 日乔 OW 220000
2012 年 6 月 1 日吉姆 SOL 100000
```

我想要做的是创建一个两列条目，对价格列求和，但使用前三个中的多个标准来做到这一点。例如，“每个人都叫 Jim，他在 5 月卖了东西”，然后我想按前三名对其进行排序。

使用以下项目：

```
=FILTER( C1:C ; D1:D="OW"; month(B1:B)=month("5/12/12")) 
```

和

```
=ARRAYFORMULA(frequency(MATCH(E1:E&counta(E1:E),UNIQUE(E1:E&counta(E1:E)),0), MATCH(UNIQUE(E1:E&counta(E1:E)),UNIQUE(E1:E&counta(E1:E)),0))) 
```

我可以过滤和统计，但我无法用价格列的总和来替换上面提到的频率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:25:06.130

您可以使用 SUMPRODUCT 组合一些东西，而不是使用 FILTER：

```
=arrayformula(sumproduct($E$2:$E$3*($C$2:$C$3=C2))) 
```

如果您将 E 列作为价格，C 列作为名称，这将创建一个新列，该列显示每个名称的总收入，位于该名称出现在数组中的每个实例旁边。您可以根据需要在 SUMPRODUCT 调用中应用更多条件。然后，您可以应用 UNIQUE 对结果表进行重复数据删除和排序以查看前 3 个表。

# xcode - iPad 设备方向 // 应用程序启动时的界面方向

> ID：11054877
> 
> 赞同：0
> 
> 时间：2012-06-15T16:38:44.733
> 
> 标签：xcode, ipad, orientation

我们有一个 iPad 应用程序。它支持所有的界面方向。

它工作得很好，但是在下载了 XCODE 的最后一个版本之后 - 当应用程序以 didFinishLaunchingWithOptions 启动时 - 或执行事件 applicationDidBecomeActive

尽管设备方向处于横向模式，但界面始终变为纵向模式。

它只是第一次发生，在那之后，当我们旋转设备或模拟器时，应用程序旋转成功。

我在网上搜索，找到了下一个解决方案： - 在 app-info.plist 上手动创建 UISupportedInterfaceOrientations~ipad 节点并包含四个支持的值。

```
<string>UIInterfaceOrientationLandscapeLeft</string>
<string>UIInterfaceOrientationPortraitUpsideDown</string>
<string>UIInterfaceOrientationPortrait</string>
<string>UIInterfaceOrientationLandscapeRight</string> 
```

但仍然不能正常工作...

有什么建议么？

谢谢，

伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:58:34.130

将此行添加到 AppDelegate

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:45:52.923

在 XCode 中，选择“导航器”面板中的“项目导航器”选项卡，然后单击列表最顶部的应用程序名称。在主编辑器区域中，您应该会在左侧看到一个目标列表，选择您的主要目标。在主编辑器的右侧，转到“摘要”，然后选择“支持的设备方向”。

注意：我使用的是 Xcode 4.3（至少在 4.2 中也是如此）。

# google-drive-api - 是否可以获取上传到 Google 驱动器的文件的永久 URL？

> ID：11054878
> 
> 赞同：28
> 
> 时间：2012-06-15T16:38:44.873
> 
> 标签：google-drive-api

我在 API 文档或其他地方找不到这个问题的答案。我在文档中看到说您可以获得文件的下载 URL，但它将其称为“短期 URL”。这意味着什么？

我需要上传图片并获取该图片的*永久*URL，该 URL 是可以嵌入到电子邮件或网络文档等中的直接 URL。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T23:32:34.333

Yes, you can get a permalink to any file hosted on Google Drive in a public folder. Just note the folderID: ![Google Drive folder ID](../Images/56b5728e320b527fe74d9ebf43d205e2.png) and paste it to the following URL: `http://googledrive.com/host/<folderID>/<filename>` or you can create a short custom alias using [G Drives](http://gdriv.es): `http://gdriv.es/<alias>/<filename>`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T17:37:22.390

[https://developers.google.com/drive/v2/reference/files#webContentLink](https://developers.google.com/drive/v2/reference/files#webContentLink)

downloadUrl 是短暂的，但 webContentLink 是一个永久链接。一个是 URL 而另一个是“链接”很奇怪，但我想这可能与 strong.xml 中的附加查询参数有关。也许这使它不仅仅是一个 URL？:)

该属性仅适用于公开可读的文件，因此您可能必须先使用 SDK/API 设置权限。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-21T04:42:58.070

如果有人遇到同样的问题并且不想使用上面已弃用的*Google Drive*解决方案，并且需要经常更改的具有*完全相同 url 的*文件，您可以使用**[Dropbox](https://www.dropbox.com/)**。脚步：

*   下载程序并共享文件夹（教程）
*   将文件复制到该文件夹​​中；等待与 Dropbox 同步
*   转到您的*dropbox.com*帐户
*   通过按钮分享您的文件，获得类似： [https ://www.dropbox.com/s/d28d8scvr3rfy48/foo.exe?dl=0](https://www.dropbox.com/s/d28d8scvr3rfy48/foo.exe?dl=0)
*   将其重命名为：
    https: **//dl.dropboxusercontent.com** /s/d28d8scvr3rfy48/foo.exe?dl=0

现在，您对所有**foo.exe**更改都有一个公开的、未更改的 url。尽情享受吧，不要在为您提供文件托管的网站上浪费时间，它们会更改相同文件的 URL。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-05-15T11:27:20.503

似乎如果您有文件 ID，您可以使用这样的 url 访问它：

```
https://drive.google.com/open?id=file-id-here 
```

如果文件是公开的，你会立即看到它，但如果不是，你会被要求登录

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-12T17:21:59.863

如果您在 GDrive 中公开共享文件，您可以使用以下链接直接下载文件：

[https://drive.google.com/uc?export=download&id=FILEID](https://drive.google.com/uc?export=download&id=FILEID)

当您想要更改文件（例如，对于版本控制的下载）并保持相同的下载链接时，就会出现问题。

您可以使用像 bitly.com 这样的 URL Shortener 并使用品牌 Bitlink 更改目标 URL，保留输入 URL。

我希望它有效，祝你好运！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-11T00:13:03.753

我不知道这种变化的频率，但我正在寻找一个动态解决方案，我不需要手动上传到另一个站点并且提供的解决方案不起作用。

这是对我有用的网址：

`https://lh3.google.com/u/0/d/<file_id>`

其中[file_id](https://developers.google.com/apps-script/reference/drive/file#getId())是使用谷歌应用脚​​本驱动 API 的 getId()。其次，文件必须像以前发布的那样公开共享

其次，我认为 lh3 是不同的 cdn，尽管我无法确认，因为 lh1/2 不起作用并且高于 3 的所有内容都重定向到 lh3

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-15T17:04:02.137

我不知道是否存在这种用于 google drive 的 API，但我认为您还应该看看 dropbox，它将满足您在问题中提到的所有要求。

还有一些非常酷的应用程序专门为 Dropbox 开发，例如[pancake.io](http://pancake.io)，它可以让您以 html 页面格式共享文本链接、html 文件。

+ 永久链接始终存在。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-29T00:06:27.167

您可以使用**gdriveurl.com**，它已更新，现在允许用户使用他们的 google drive 帐户登录并立即共享文件列表，获取每个文件的“**查看**”和“**下载**”短永久链接。

还有老办法（登录Google Drive，把所有东西都设置为“Public on web”，复制分享链接，转换成首页的gdriveurl.com textarea），不过就是浪费时间，你应该试试“ **MyDrive** ” “API。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-01-06T16:19:20.040

不确定此处生成的链接是否保证是永久的，但[Google Drive Direct Link Generator](https://sites.google.com/site/gdocs2direct/home)可以生成直接下载链接。

只需确保将文件的共享设置设置为`Anyone with the link`

# php - 重定向后查找url并获取网站的ip地址

> ID：11054880
> 
> 赞同：4
> 
> 时间：2012-06-15T16:38:55.253
> 
> 标签：php, url, ip-address, http-redirect

如果我有 ：

**domainA.com/out.php：**

```
<?php
  header('location: http://domainB.com/');
?> 
```

是否有可能获取 url :`domainB.com`和from ？`IP Address``domanA.com/out.php``domainC.com`

*我想要的是 ：*

**domainA.com/index.php**

```
<?php
   $data = getUrlandIp("domainA.com/out.php");
   echo $data[0];  # wanted output (URL) : domainB.com
   echo $data[1];  # wanted output (IP) : 133.133.133.133
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:54:22.510

如果您需要获取所有重定向，您可以这样做

```
function getRedirectsToUri($uri)
{
    $redirects = array();
    $http = stream_context_create();
    stream_context_set_params(
        $http,
        array(
            "notification" => function() use (&$redirects)
            {
                if (func_get_arg(0) === STREAM_NOTIFY_REDIRECTED) {
                    $redirects[] = func_get_arg(2);
                }
            }
        )
    );
    file_get_contents($uri, false, $http);
    return $redirects;
} 
```

这将返回一个包含所有重定向的数组，最后一个条目是最终目的地。

### 示例（[演示](http://codepad.viper-7.com/bf8HTj)）

```
print_r(getRedirectsToUri('http://bit.ly/VDcn')); 
```

### 输出

```
Array ( 
    [0] => http://example.com/ 
    [1] => http://www.iana.org/domains/example/ 
) 
```

您必须手动查找 IP（请参阅此处的其他答案），但请注意重定向目标不必是主机名。它也可以是一个IP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T16:45:41.783

使用[get_headers()](http://php.net/manual/en/function.get-headers.php)从 URL 获取 http 标头。

像这样的东西应该可以用来获取域名。

```
$headers = get_headers('http://domaina.com/out.php', 1);
echo $headers['Location']; 
```

要解析 IP 地址，请查看[gethostbyname()](http://php.net/manual/en/function.gethostbyname.php)函数。

```
echo gethostbyname($headers['Location']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T16:48:48.447

我不确定你的意思

> 来自 domainC.com？

但在 PHP 中，您可以调用`gethostbyname('domainB.com')`这将为您提供 domainB.com 的 IP`domainA.com/out.php`

# java - 没有 JDBC 类型的方言映射：-102

> ID：11054889
> 
> 赞同：1
> 
> 时间：2012-06-15T16:39:27.713
> 
> 标签：java, sql, oracle, hibernate

我有个问题。我的程序中的一些 sql 可以由用户编写。所以我不知道这个sql中有哪些表或哪些列。因此，我想检测 sql 中有哪些列名。但是，如果日期在 sql 中，我会得到 JDBC 类型的 No Dialect 映射：-102 错误。我怎么能处理呢？我在 java 中使用休眠 3.6 或 4.1.3。我的数据库是一个oracle数据库。方言是 org.hibernate.dialect.Oracle10gDialect。

我真的不知道sql中有什么。

这是我的代码：

```
SQLQuery q=session.createSQLQuery("SELECT * FROM tbl WHERE id = 2"); 
q.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE); 
List<Map<String,Object>> aliasToValueMapList=q.list();
for(Map<String,Object> map : aliasToValueMapList){
    System.out.println(map.keySet());
    break;
} 
```

我希望有人知道这个问题的解决方案。

格雷茨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:54:31.540

您的查询试图返回 JDBC ResultSetMetaData 正在报告 Hibernate 不知道如何读取的类型 (-102) 的列。您需要使用 org.hibernate.SQLQuery#addScalar 为查询注册该列的类型，否则您可能无法使用该转换器并实际定义整个结果集映射到您的实体 org.hibernate.SQLQuery#addRoot/org .hibernate.SQLQuery#addEntity。请参阅文档以了解使用情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:53:16.510

如果您使用 session.createQuery() 这将使用您的方言使用 Hibernate 查询语言与数据库对话。但是如果你使用 createSQLQuery() 你必须使用 PL/SQL 来与 oracle 对话。

# sql-server - 使用 LINQ 从表中获取最大值

> ID：11054891
> 
> 赞同：0
> 
> 时间：2012-06-15T16:39:34.153
> 
> 标签：sql-server, database, linq, sql-server-2008

我的数据库中有一个表。我想获取名为 NumOfView 的列的最大值。我使用了这段代码：

```
var advert=(from ad in storedb.Ads
             where ad.AdScope == "1" 
             select ad.NumOfView).Max(); 
```

它可以工作，但是当有两个或多个相同的最大值时它不起作用并且出现此消息：

> 序列包含多个元素

我现在该怎么办？您的回答将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:06:53.890

您可以尝试以下方法：

```
 var advert = storedb.ads
                    .Where(a => a.AdScope == "1")
                    .OrderByDescending(a => a.NumOfView)
                    .First(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T03:16:13.400

```
var advert = storedb.ads
                    .Where(a => a.AdScope == "1")
                    .Select(a => a.NumOfView)
                    .Max()
                    .first(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T02:59:35.830

请看一个例​​子：

```
private void button1_Click(object sender, EventArgs e)
{
    List<int> lista = new List<int>();
    lista.Add(1);
    lista.Add(2);
    lista.Add(2);
    lista.Add(3);
    lista.Add(3);
    var query = (from lt in lista
                 orderby lt descending
                 select lt).FirstOrDefault<int>();
    textBox1.Text = query.ToString();

} 
```

# javascript - 如何在 javascript 正则表达式匹配中忽略重音？

> ID：11054893
> 
> 赞同：21
> 
> 时间：2012-06-15T16:39:40.850
> 
> 标签：javascript, regex, special-characters, diacritics, non-ascii-characters

我需要为这样的正则表达式匹配一个像“César”这样的词`/^cesar/i`。

有没有像`/i`配置正则表达式这样它忽略尖锐重音的选项？或者唯一的解决方案是使用这样的正则表达式`/^césar/i`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:43:54.030

标准的 ecmascript 正则表达式还没有为 unicode 做好准备（请参阅[http://blog.stevenlevithan.com/archives/javascript-regex-and-unicode](http://blog.stevenlevithan.com/archives/javascript-regex-and-unicode)）。

所以你必须使用一个外部的正则表达式库。我过去使用过这个（带有 unicode 插件）：http: [//xregexp.com/](http://xregexp.com/)

在您的情况下，您可能必须将 char 转义`é`为`\u00E9`并定义包含 e、é、ê 等的范围。

编辑：我刚刚看到亚历克斯的评论：你会在范围内找到重音等效的 e。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-12T07:54:23.697

您可以先从字符串中删除重音符号并单独测试：

```
var someString = 'César';
var bare = removeDiacritics(someString);

if (/^cesar/i.test(bare)) {
    // fail
} 
```

有关的定义，请参阅[此答案](https://stackoverflow.com/a/5912746/1338292)`removeDiacritics()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-20T12:50:40.750

按照 Ja͢ck 的回答，这是一个实现，`applyDiacritics`因此您可以实际匹配字符串，而无需删除或替换任何内容。

请注意，这不适用于许多正则表达式......按原样：

```
var diacriticsApplyMap = {'default':[
    {'base':'A', 'letters':/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},
    {'base':'AA','letters':/[\uA732]/g},
    {'base':'AE','letters':/[\u00C6\u01FC\u01E2]/g},
    {'base':'AO','letters':/[\uA734]/g},
    {'base':'AU','letters':/[\uA736]/g},
    {'base':'AV','letters':/[\uA738\uA73A]/g},
    {'base':'AY','letters':/[\uA73C]/g},
    {'base':'B', 'letters':/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},
    {'base':'C', 'letters':/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},
    {'base':'D', 'letters':/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},
    {'base':'DZ','letters':/[\u01F1\u01C4]/g},
    {'base':'Dz','letters':/[\u01F2\u01C5]/g},
    {'base':'E', 'letters':/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},
    {'base':'F', 'letters':/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},
    {'base':'G', 'letters':/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},
    {'base':'H', 'letters':/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},
    {'base':'I', 'letters':/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},
    {'base':'J', 'letters':/[\u004A\u24BF\uFF2A\u0134\u0248]/g},
    {'base':'K', 'letters':/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},
    {'base':'L', 'letters':/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},
    {'base':'LJ','letters':/[\u01C7]/g},
    {'base':'Lj','letters':/[\u01C8]/g},
    {'base':'M', 'letters':/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},
    {'base':'N', 'letters':/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},
    {'base':'NJ','letters':/[\u01CA]/g},
    {'base':'Nj','letters':/[\u01CB]/g},
    {'base':'O', 'letters':/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},
    {'base':'OI','letters':/[\u01A2]/g},
    {'base':'OO','letters':/[\uA74E]/g},
    {'base':'OU','letters':/[\u0222]/g},
    {'base':'P', 'letters':/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},
    {'base':'Q', 'letters':/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},
    {'base':'R', 'letters':/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},
    {'base':'S', 'letters':/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},
    {'base':'T', 'letters':/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},
    {'base':'TZ','letters':/[\uA728]/g},
    {'base':'U', 'letters':/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},
    {'base':'V', 'letters':/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},
    {'base':'VY','letters':/[\uA760]/g},
    {'base':'W', 'letters':/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},
    {'base':'X', 'letters':/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},
    {'base':'Y', 'letters':/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},
    {'base':'Z', 'letters':/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},
    {'base':'a', 'letters':/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},
    {'base':'aa','letters':/[\uA733]/g},
    {'base':'ae','letters':/[\u00E6\u01FD\u01E3]/g},
    {'base':'ao','letters':/[\uA735]/g},
    {'base':'au','letters':/[\uA737]/g},
    {'base':'av','letters':/[\uA739\uA73B]/g},
    {'base':'ay','letters':/[\uA73D]/g},
    {'base':'b', 'letters':/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},
    {'base':'c', 'letters':/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},
    {'base':'d', 'letters':/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},
    {'base':'dz','letters':/[\u01F3\u01C6]/g},
    {'base':'e', 'letters':/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},
    {'base':'f', 'letters':/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},
    {'base':'g', 'letters':/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},
    {'base':'h', 'letters':/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},
    {'base':'hv','letters':/[\u0195]/g},
    {'base':'i', 'letters':/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},
    {'base':'j', 'letters':/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},
    {'base':'k', 'letters':/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},
    {'base':'l', 'letters':/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},
    {'base':'lj','letters':/[\u01C9]/g},
    {'base':'m', 'letters':/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},
    {'base':'n', 'letters':/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},
    {'base':'nj','letters':/[\u01CC]/g},
    {'base':'o', 'letters':/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},
    {'base':'oi','letters':/[\u01A3]/g},
    {'base':'ou','letters':/[\u0223]/g},
    {'base':'oo','letters':/[\uA74F]/g},
    {'base':'p','letters':/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},
    {'base':'q','letters':/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},
    {'base':'r','letters':/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},
    {'base':'s','letters':/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},
    {'base':'t','letters':/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},
    {'base':'tz','letters':/[\uA729]/g},
    {'base':'u','letters':/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},
    {'base':'v','letters':/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},
    {'base':'vy','letters':/[\uA761]/g},
    {'base':'w','letters':/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},
    {'base':'x','letters':/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},
    {'base':'y','letters':/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},
    {'base':'z','letters':/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}
]};

// prepare the map to basically replace every letter in a regexp string for a character class with all letters in this map. for instance, /ai/ would become *something like* /[aáäã][iíï]/ and so on
// this is however still breaking up with '[]' when they go in the highlights, since parentheses are not allowed inside
diacriticsApplyMap.regex = [];
for (var i = 0; i < diacriticsApplyMap.default.length; i++) {
  var item = diacriticsApplyMap.default[i];
  var base = '(?:' + item.base + '|' + item.letters.source + ')';
  diacriticsApplyMap.regex.push({
    'base': '$1' + base,
    'letters': new RegExp('([^\\[\\\\])'+ base +'|^'+ base, 'g')
  });
}

function applyDiacritics (str, which) {
  which = which || 'default';
  var changes = diacriticsApplyMap[which];
  for (var i = 0; i < changes.length; i++) {
    str = str.replace(changes[i].letters, changes[i].base);
  }
  return str;
}

// tests
console.log(applyDiacritics('Jáck'));
console.log(applyDiacritics('Jáck', 'regex'));
console.log('Ja͢ck'.match(new RegExp(applyDiacritics('Jáck', 'regex'), 'gi'))); // not in the map
console.log('Jäck'.match(applyDiacritics('Jáck', 'regex')));
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-13T16:50:48.247

一般来说，当您测试两种类型的相同正则表达式输入时，它可以在 Lodash 库的帮助下轻松完成 - 一种由 lodash **_deburr**函数去除毛刺，另一种是原始用户的输入。基于用户名输入表单的过滤示例（几乎没有 lodash _filter 函数的帮助）：

```
import _ from 'lodash'

const input = inputFromYourFormInput
const users = ['Jiřina Žlutá', 'Aleš Úzký'];
const regex = new RegExp(input, 'gi');

const filtered = _.filter(users, (u) => {
  const debured = _.deburr(u)
  if (u.name.match(regex) || debured.match(regex))
    return u
}) 
```

在这种情况下，无论您的输入是 Jirina Zluta 还是 Jiřina Žlutá _filter 函数都将返回新的过滤数组 [Jirina Žlutá]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-12T14:44:10.217

同时，如果 OP 的问题仍然只是识别/匹配整个单词，而不管重音、变音符号等，那么一种新的可能方法可以基于 JavaScript 的[`Intl`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)模块/API，而无需任何正则表达式的帮助。

文本的分词任务可以通过实例的[`segment`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter/segment#examples)方法来完成。[`Intl.Segmenter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter)

为了获得单词查询的所有匹配词，可以[`reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)得到结果段，其中收集缩减器函数将根据实例的方法[将](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)每个段的类似词的标记与查询进行比较。[`compare`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Collator/compare)[`Intl.Collator`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Collator)

```
function collectMatchingWordItemFromSegment(collector, segment, idx) {
  let { collator, wordQuery, wordCount = 0, result } = collector;

  const { segment: token, isWordLike } = segment;
  if (
    isWordLike &&
    (collator.compare(token, wordQuery) === 0)
  ) {
    ++wordCount;

    const { segment: match, index } = segment;

    result.push({
      match,
      index,
      wordCount,
      tokenCount: (idx + 1),
    });
  }
  return { collator, wordQuery, wordCount, result };
}
const sampleText = `Risus nonummy purus. César. Facilisis potenti
ultricies dis et in sagittis id nonummy Hac cubilia sapien, césar.
Habitant eleifend vulputate tristique phasellus consectetuer, cesar
erat sagittis hendrerit porttitor consectetuer posuere dui mus class
metus nunc litora Cesar.`;

const matchingWordItemList = Array
  .from(
    new Intl.Segmenter('en', { granularity: 'word' }).segment(sampleText)
  )
  .reduce(collectMatchingWordItemFromSegment, {

    collator: new Intl.Collator('en', { sensitivity: 'base' }),
    wordQuery: 'cesar',
    result: [],

  }).result;

console.log({
  sampleText,
  matchingWordItemList,
});
console.log({
  segmentArray: Array.from(
    new Intl.Segmenter('en', { granularity: 'word' }).segment(sampleText)
  )
});
```

```
.as-console-wrapper { min-height: 100%!important; top: 0; }
```

最近提出的关于***如何** **在给定文本中搜索和替换/保留单词**[“......不管现有的口音、变音符号等和大写/小写字符......”](https://stackoverflow.com/questions/71083430/how-to-find-match-words-regardless-of-existing-accents-diacritics-etc-and-upper)* **的类似问题，收到了基于上述内容的两个答案/解决方案显示的技术。**

# c++ - Windows 7 应用程序挂起

> ID：11054904
> 
> 赞同：1
> 
> 时间：2012-06-15T16:40:35.483
> 
> 标签：c++, windows, window, gdi+, gdi

我正在学习使用 GDI/GDI+ 开发 GUI，这在 Win XP 上一切都很棒，但在 Win 7 上，我的窗口在运行 10-20 秒后得到“AppHangb1”，我用鼠标点击它。我不明白这个问题。

这是我的 WndProc 代码：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {

    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_PAINT:

        hdc = BeginPaint(hWnd, &ps);

        // TODO: Add any drawing code here...

        MyOnPaint(hdc);

        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }

    DefWindowProc(hWnd, message, wParam, lParam);

    return 0;
} 
```

对于 Win 7，我必须为一些额外的消息添加处理或什么？

提前致谢。

# javascript - tr onmouse 事件

> ID：11054910
> 
> 赞同：2
> 
> 时间：2012-06-15T16:41:23.017
> 
> 标签：javascript, html, onmouseover, onmouseout

我希望能够将鼠标悬停在一行上并突出显示所有内容，但是由于某些单元格具有不同的背景，因此下面的代码存在问题。

```
 <tr style="" onmouseover="this.style.background='Red';" onmouseout="this.style.background='#595959'" > 
```

没关系，所有单元格都具有相同的背景，但是如果我单击一个单元格，它会突出显示它并`onmouseout="this.style.background='#595959'"`始终将其重置。

我怎样才能将其更改为：

```
onmouseout="this.style.background='currentCellBGColor" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:46:24.190

可以使用纯 CSS 解决方案来完成。无需 JavaScript

适用于 IE8+ 所有其他现代浏览器的纯 CSS 解决方案

```
tr:hover td { background-color:yellow }
td.selected { background-color: green; }
tr:hover td.selected { background-color: lime; } 
```

[小提琴](http://jsfiddle.net/Eytq8/)

如果你需要IE7，你需要在表格行中添加一个类onmosueover，并移除类onmouseout。

```
tr:hover td, tr.hover td { background-color:yellow }
td.selected { background-color: green; }
tr:hover td.selected, tr.hover td.selected { background-color: lime; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:47:46.163

即使我同意用 css hover 更好，我也喜欢回答这个问题，如何用 javascript 来做。

您可以将其保存在一个属性上并使用它来将其恢复为：

```
<script>
function setBackground(me, color)
{
   me.setAttribute("data-oldback", me.style.background);       
   me.style.background=color;
}

function restoreBackground(me)
{
    me.style.background = me.getAttribute("data-oldback");
}    
</script> 
```

和

```
 <tr onmouseover="setBackground(this, 'Red');" 
   onmouseout="restoreBackground(this);" 
     style="background:blue;" > 
```

和一个测试： http: [//jsfiddle.net/AdDgS/3/](http://jsfiddle.net/AdDgS/3/) 和这个[http://jsfiddle.net/AdDgS/4/](http://jsfiddle.net/AdDgS/4/)

# c# - C#重命名目录，如果目录已经存在则复制所有内容

> ID：11054913
> 
> 赞同：2
> 
> 时间：2012-06-15T16:41:30.473
> 
> 标签：c#

假设我有目录 1 和目录 2，每个目录中都可以有文件或子目录。到目前为止，如果我想将“目录 2”重命名为“目录 3”，我可以运行：

```
Directory.Move("path\Directory 2", "path\Directory 3"); 
```

这工作正常 - 重命名目录，该目录中的所有子目录和文件都可以使用新名称正常工作，无需处理副本。

但是，如果我尝试这样做：

```
Directory.Move("path\Directory 2", "path\Directory 1"); 
```

我收到一个错误，因为目录 1 已经存在。在这种情况下，如果不能将目录 2 重命名为目录 1，则目录 2 中的所有内容（文件和子目录）都应该移动到目录 1 中。最简单的方法是什么？我应该有一个 if 文件存在，一个 foreach 移动所有子目录，一个 foreach 移动所有文件？是否有更简单的方法来重载 .Move 函数以移动文件而不管存在错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:44:27.073

不，因为 MOVE 在文件系统级别上工作，有效地重命名文件夹，或将文件夹“指针”移动到另一个地方。前者是父目录相同的情况，后者是父目录不同的情况。

因此，在回答您的直接问题时，您必须 foreach 每个子目录，以防目标存在并且其中包含某些内容。如果没有，您可以随时擦除它并使用 MOVE-ing。

看这里：[Directory.Move 不起作用（文件已存在）](https://stackoverflow.com/questions/2553008/directory-move-doesnt-work-file-already-exist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:48:24.330

我会这样做：

```
if(Directory.Exists(destinationPath))
{
    Directory.Delete(destionatPath, true /* recusively nuke everything */ );
}

Directory.Move(sourcePath, destinationPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:49:40.210

您不能使用 Directory.Move 方法将文件移动到现有文件夹中。例如，在这种情况下，您必须使用文件级别的 foreach 循环手动移动文件。Directory.Move 仅在目标目录不退出时才有效。但是，您可以检查该目录是否已经存在或尝试它并处理 IOException 异常，以便仅在必要时执行 foreach。

# php - Facebook PHP SDK Graph API 发布到页面无法正常运行

> ID：11054915
> 
> 赞同：3
> 
> 时间：2012-06-15T16:41:38.287
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-page

我正在尝试向我的应用程序添加一项功能，该功能将向管理员用户的页面时间线发布状态，其详细信息与他们在 Facebook.com 上发布的信息相同。我关注的主要功能是链接共享和缩略图，例如当您将链接粘贴到您的状态时，它会自动检测缩略图，为您提供漂亮的链接、描述等。我孜孜不倦地阅读其他论坛和 Graph API 文档，我一直遇到问题，帖子显示为管理员用户，而不是页面。这是我的代码：

```
$facebook = new Facebook(array(
  'appId'  => $appID,
  'secret' => $appSecret,
));

$loginUrl = $facebook->getLoginUrl(array(
    "scope" => 'publish_stream, read_insights, manage_pages, photo_upload, video_upload, create_note, manage_notifications'
));

$access_token   = $facebook->getAccessToken();

$fbpost = array();

$fbpost['access_token'] = $access_token;
$fbpost['message']      = $message;
$fbpost['link']         = $link;
$fbpost['description']  = $description;
$fbpost['caption']      = $caption;
$fbpost['picture']      = $fbimg;

$status = $facebook->api('/'.$pageID.'/feed', 'POST', $fbpost);
var_dump($status); 
```

当我只发布 $fbpost['message'] 时，它会正确地将状态发布为页面，但是当我添加任何其他内容时，它会将帖子显示为经过身份验证的管理员用户而不是页面。非常令人沮丧。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:07:27.587

> 我一直在以管理员用户而不是页面显示帖子时遇到问题。

然后获取[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)，而不是管理员用户的用户访问令牌……</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T13:49:30.687

感谢 CBroe[在页面/应用访问令牌上提供 Facebook 文档的链接](https://developers.facebook.com/docs/authentication/pages/)。在检查完之后，我想出了这个 PHP（因为 PHP SDK 中没有很好的文档来获取页面访问令牌）：

```
$user_token     = $facebook->getAccessToken();
$accounts       = $facebook->api('/me/accounts?access_token='.$user_token);
$account_token  = 0;
foreach ($accounts['data'] as $account) {
    if ($account['id'] == $_SESSION['facebook']) {
        $account_token = $account['access_token'];
    }
}

if ($account_token) {
    /// your page token code
} else {
    echo 'You must be an admin on this page!';
} 
```

# facebook - Facebook API 批量请求很慢

> ID：11054917
> 
> 赞同：0
> 
> 时间：2012-06-15T16:41:46.153
> 
> 标签：facebook, facebook-graph-api

我正在编写一个网络应用程序，它允许用户从他们的 Facebook 个人资料以及他们的朋友（他们也已授权该应用程序）的个人资料中搜索数据。最初我循环访问朋友并进行单独的 API 调用以获取朋友数据，但这非常慢。所以我转而构建一组 API 请求并提交一个[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)。

批处理请求应该是我的问题的解决方案，但它仍然非常缓慢。我的页面加载时间约为 15 秒，我不知道为什么。文档声称批处理中的每个请求都是并行处理的，但看起来确实不是这样。我的每个批处理请求都需要一个唯一的访问令牌是否相关？文档并没有表明这是一个问题，但是文档并没有说很多东西......

这是我的一个批处理查询的示例：

```
[
{"method":"GET",
"relative_url":"\/#####\/friends?fields=name,first_name,last_name,id,work,education&access_token=#####"},
{"method":"GET",
"relative_url":"\/#####\/friends?fields=name,first_name,last_name,id,work,education&access_token=#####"},
{"method":"GET",
"relative_url":"\/#####\/friends?fields=name,first_name,last_name,id,work,education&access_token=#####"}
] 
```

只是为了给您一些上下文，该应用程序发出一个 API 请求来获取用户的朋友。然后它遍历这些结果并为每个朋友（已授权应用程序）构建一个批处理请求，并使用 PHP SDK 发送第二个 API 批处理请求（$json_batch 是一个批处理请求，如上所示）：

```
$rawdata = $facebook->api('?batch='.$json_batch, 'POST'); 
```

（如上例）。检查累积结果是否与用户的搜索查询匹配并回显给用户。任何想法为什么这需要 20 秒才能发生？

**更新：** 我添加了一些代码来跟踪脚本执行期间不同时间的时间......整个课程在 11-13 秒内运行。第一次 FB api 调用（对图表）需要 0.6 秒。第二批调用10-11秒！但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:33:55.797

我不确定为什么批处理请求需要这么长时间，但是要回答每个请求的访问令牌，没有必要这样做，除非您放置不同的令牌，如果您使用相同的令牌，那么您可以简单地（如文档）：

```
curl \
    -F 'access_token=…' \
    -F 'batch=[ \
            {"method": "GET", "relative_url": "me"}, \
            {"method": "GET", "relative_url": "me/friends?limit=50"} \
        ]'\
    https://graph.facebook.com 
```

但是，您可以使用[单个 FQL 查询](http://developers.facebook.com/tools/explorer?fql=SELECT%20uid,%20username,%20name,%20first_name,%20middle_name,%20last_name,%20work,%20education%20FROM%20%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29)获得相同的确切信息：

```
SELECT uid, username, name, first_name, middle_name, last_name, work, education 
FROM user 
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

这也消除了首先单独查询登录用户的朋友的需要，但是如果您确实有朋友 id 列表，您可以将它们放在`IN`子句中而不是内部查询中。
也许这个 fql 解决方案会更快地返回。

# arrays - OpenCL 全局数组

> ID：11054919
> 
> 赞同：0
> 
> 时间：2012-06-15T16:41:52.347
> 
> 标签：arrays, parallel-processing, opencl, global

我是 OpenCL 的新手，我遇到了问题。在我的程序中，我需要一个二维数组。我将一维数组复制到显卡。因为我不需要一维数组，所以我编写了一个方法来初始化所有需要的值。二维数组应该是 __global --- 我只对这个数组进行了读取操作。

这是我的代码

```
typedef struct{
    unsigned char r;
    unsigned char g;
    unsigned char b;
    unsigned char a;
} ColorRGBA;

__constant ColorRGBA array[4096];

__kernel void marchingCubes(__global unsigned char* output)
{
    // DO SOMETHING WITH array

}

__kernel void initValues(__global unsigned char* input){
    // FILL array MAKE 1-dimensional to 2-dimensional (4096,4)
    array = (ColorRGBA*) input;
} 
```

编译 OpenCL 程序时，出现以下错误：

```
:28:8: error: array type 'ColorRGBA __attribute__((address_space(2))) [4096]' is not assignable
        array = (ColorRGBA*) input; 
```

我怎样才能访问每个线程中的重塑数组？

谢谢格莱西恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:49:29.567

我不会打扰明确记录您的数据 - 只需将其作为一维缓冲区处理即可。您可以将`row_width`作为内核参数传递，然后使用 计算适当的索引`index = y * row_width + x`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:46:15.470

我不确定您的演员阵容，但您不能将指针分配给整个数组。你应该做这个：

```
for (int x = 0; x < size_of_input; ++x)
  {
    array[x].r = input[x];
    array[x].g = input[x];
    array[x].b = input[x];
    array[x].a = input[x];
  } 
```

您需要传入函数输入数组的大小。

这假设您的输入像素在整个数组中都按该顺序排列。RGBARGBARGBA等

# javascript - 设置嵌套对象值

> ID：11054922
> 
> 赞同：4
> 
> 时间：2012-06-15T16:42:14.017
> 
> 标签：javascript

我有以下对象：

```
var object = {
    "property1": "value1",
    "property2": "value2",
    "subobject": {
        "property1": "value1",
        "property2": "value2",
        "subobject": {
            "property1": "value1",
            "property2": "value2",
            "subobject": {...
            }
        }
    }
} 
```

我正在尝试设置嵌套子对象属性之一，但嵌套级别是动态的。

如何在不执行以下操作的情况下动态设置这些嵌套属性之一：`object.subobject.subobject = { ... }`？

**编辑：** 所以更具体地说，我正在尝试设置嵌套子对象之一，但我每次都不知道是哪一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-12T10:04:25.883

使用递归 - 重构（感谢 Rocket Hazmat）

这个功能对我有用！：

```
/**
 * @obj: the json object to change
 * @access: string dot separates route to value
 * @value: new valu
 */
function setValue(obj,access,value){
    if (typeof(access)=='string'){
        access = access.split('.');
    }
    if (access.length > 1){
        setValue(obj[access.shift()],access,value);
    }else{
        obj[access[0]] = value;
    }
} 
```

有一个对象：

```
var jsonObject = {
    'name' : 'pepe',
    'links' : 
        {
        'link1' : 'one',
        'link2' : 'two',
        'link3' : 
            {
            'link31' : '3url',
            'link32' : '3url',
            'link33' : '3url'
            }
        }
 } 
```

我们可以通过以下方式轻松更改值：

```
 setValue(jsonObject,'links.link3.link32','new value!!!'); 
```

谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T16:47:41.993

让我们使用递归！

```
function setNest(obj, level, val){
    if(level > 0){
        setNest(obj.subobject, level-1, val);
    }
    else{
        obj.subobject = val;
    }
} 
```

然后这样称呼它：

```
setNest(object, 2, {a: 12}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T15:14:31.587

您可以定义自己的 Object 方法；为了简洁起见，我也使用下划线：

```
var _ = require('underscore');

// a fast get method for object, by specifying an address with depth
Object.prototype.pick = function(addr) {
    if (!_.isArray(addr)) return this[addr]; // if isn't array, just get normally
    var tmpo = this;
    while (i = addr.shift())
        tmpo = tmpo[i];
    return tmpo;
};
// a fast set method for object, put value at obj[addr]
Object.prototype.put = function(addr, val) {
    if (!_.isArray(addr)) this[addr] = val; // if isn't array, just set normally
    this.pick(_.initial(addr))[_.last(addr)] = val;
}; 
```

示例用法：

```
var obj = { 
           'foo': {
                   'bar': 0 }}

obj.pick('foo'); // returns { bar: 0 }
obj.pick(['foo','bar']); // returns 0
obj.pick('foo.bar'.split('.')); // equivalent as above, returns 0
obj.put(['foo', 'bar'], -1) // obj becomes {'foo': {'bar': -1}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T00:34:39.980

您可以尝试使用[Immutable.js](https://facebook.github.io/immutable-js/docs/#/Map/setIn)，如下所示：

```
var immutableJsObject = Immutable.fromJS({
  inputs: {
    firstDepthNumberOne: {
      secondDepth: 'secondDepthValue'
    },
    firstDepthNumberTwo: 'hello'
  }
});

var newImmutableJsObject = immutableJsObject.setIn('inputs.firstDepthNumberOne.secondDepth'.split('.'), 'newValue');

newImmutableJsObject.toJS(); 
```

# c - Valgrind 缩进（及以下主要）

> ID：11054933
> 
> 赞同：0
> 
> 时间：2012-06-15T16:43:18.403
> 
> 标签：c, malloc, free, valgrind

这是一个项目的 valgrind 输出：

```
==2433== Invalid free() / delete / delete[] / realloc()
==2433==    at 0x402B06C: free (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2433==    by 0x43F345B: av_freep (mem.c:172)
==2433==    by 0x5A6F4D2: (below main) (libc-start.c:226)
==2433==  Address 0xb3fd830 is 48 bytes inside a block of size 111,634 alloc'd
==2433==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2433==    by 0x80BB6B5: _talloc_realloc (talloc.c:997) 
```

`Address`与以 开头的行相比，以 开头的行缩进一个空格`Invalid`。这是否意味着一个导致另一个？或者他们是分开的？

如果是分开的，`by 0x5A6F4D2: (below main) (libc-start.c:226)`从哪里来？我觉得`(below main)`这与它有关，但我在硬盘驱动器上的任何地方都找不到 libc-start.c。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:50:05.597

是的，它为您提供有关无效免费的更多详细信息。前四行描述了无效调用（在本例中为 free）和 free 时的调用堆栈。以下三行提供了额外的数据。在这种情况下，valgrind 识别出传递给的地址`free`包含在分配的区域内，并提供偏移量、块的大小和该分配的调用堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:49:44.287

根据[valgrind.org](http://valgrind.org/gallery/linux_mag.html)，层次结构应该是扁平的，如下所示：

```
==3016== Invalid write of size 1
==3016==    at 0x80484DA: main (in /jfs/article/sample2)
==3016==    by 0x40271507: __libc_start_main (../sysdeps/generic/libc-start.c:129)
==3016==    by 0x80483B1: free@@GLIBC_2.0 (in /jfs/article/sample2)
==3016==    Address 0x40CA0224 is 0 bytes after a block of size 512 alloc'd
==3016==    at 0x400483E4: malloc (vg_clientfuncs.c:100)
==3016==    by 0x80484AA: main (in /jfs/article/sample2)
==3016==    by 0x40271507: __libc_start_main (../sysdeps/generic/libc-start.c:129)
==3016==    by 0x80483B1: free@@GLIBC_2.0 (in /jfs/article/sample2) 
```

我会将`Address`您的输出中的缩进视为上述内容，因为它可能是特定于版本的更改，以使输出更具可读性。

# file - 如何删除文件？

> ID：11054935
> 
> 赞同：4
> 
> 时间：2012-06-15T16:43:23.440
> 
> 标签：file, delphi, delphi-xe2, delete-file

我需要从存储图片的文件夹中删除图片。例如，C:\Milk\Pictures 文件夹中的文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T17:22:37.093

使用 SysUtils 函数[DeleteFile](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.DeleteFile)：

```
if DeleteFile(FileName) then
  // File deleted; 
```

`SysUtils`通常默认包含在内。在 XE2 中，如果您必须添加它，您可能必须使用`System.SysUtils`新的命名空间规则。

# objective-c - 用于解除键盘的 ModalPresentationFormSheet 句柄

> ID：11054937
> 
> 赞同：0
> 
> 时间：2012-06-15T16:43:48.883
> 
> 标签：objective-c, ios5, uinavigationcontroller, uimodalpresentationstyle

全部，

我有一个 DetailViewController，它的类设置为 UIControl，并且有一个“backgroundTouched”IBAction 方法可以完美地处理这些背景触摸事件。当我将 DetailViewController 更改为模态显示时，在 FormSheet 中，我失去了检测背景触摸的能力，因此键盘不会在背景触摸时关闭。我认为原因是以前，DetailView 占据了整个屏幕，因此所有委托方法都被触发，但现在它以模态方式呈现，这些委托和 IBAction 方法不再能够通信。

我对问题的分析是否正确？如何让模态演示文稿报告事件？

谢谢

```
 //Give it a nav controller
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

/****************************************************
 *
 *  Use a modal form presentation for  form
 *  
 *
 ****************************************************/

    //Use a form sheet style for DetailView
    [navController setModalPresentationStyle:UIModalPresentationFormSheet];

    //flip-horizontal transition
    [navController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[self presentViewController:navController animated:YES completion:nil];

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:49:45.730

这可能与 Apple 在模态演示期间选择处理键盘关闭的方式有关（即，当它通常隐藏时基本上不隐藏它。基本原理是在模态上下文中它可能会经常上下移动）。请参阅[Modal Dialog Does Not Dismiss Keyboard](https://stackoverflow.com/questions/3019709/modal-dialog-does-not-dismiss-keyboard/)该问题的已接受答案有一个很好的解释，我的答案在使用导航控制器时提供了一个很好的通用解决方案。

# bash - 如何从 shell 脚本中获取倒数第二个参数？

> ID：11054939
> 
> 赞同：12
> 
> 时间：2012-06-15T16:43:53.593
> 
> 标签：bash, unix, arguments, sh

我想将倒数第二个项目提供给 shell 程序。目前我这样做：

```
file1_tmp="${@: -2}"
oldIFS=$IFS
IFS=" "
count=0
for value in $file1; do
  if [[ count -e 0 ]]; then
    file1=$value
  fi
    count=1
done
oldIFS=$IFS 
```

我确信有一种更简单的方法可以做到这一点。那么，如何以尽可能少的行从 shell 脚本输入中获取倒数第二个参数呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T16:51:18.730

```
set -- "first argument" "second argument" \
       "third argument" "fourth argument" \
       "fifth argument"
second_to_last="${@:(-2):1}"
echo "$second_to_last" 
```

请注意引用，它确保带有空格的参数粘在一起 - 您的原始解决方案没有这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T16:51:44.080

在 bash/ksh/zsh 你可以简单`${@: -2:1}`

```
$ set a b c d 
$ echo ${@: -1:1}
c 
```

在 POSIX sh 中，您可以使用`eval`：

```
$ set a b c d 
$ echo $(eval "echo \$$(($#-2))")
c 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T16:51:33.143

```
n=$(($#-1))
second_to_last=${!n}
echo "$second_to_last" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-14T20:48:43.990

所有 bash 版本都有一些选项：

```
$ set -- aa bb cc dd ee ff
$ echo "${@: -2:1}   ${@:(-2):1}   ${@:(~1):1}   ${@:~1:1}   ${@:$#-1:1}"
ee   ee   ee   ee   ee 
```

( `~`) 是按位否定运算符（在算术评估部分中搜索）。
这意味着*翻转所有位*。

甚至可以使用（整数）变量进行选择：

```
$ a=1  ; b=-a; echo "${@:b-1:1}   ${@:(b-1):1}   ${@:(~a):1}   ${@:~a:1}   ${@:$#-a:1}"
ee   ee   ee   ee   ee

$ a=2  ; b=-a; echo "${@:b-1:1}   ${@:(b-1):1}   ${@:(~a):1}   ${@:~a:1}   ${@:$#-a:1}"
dd   dd   dd   dd   dd 
```

对于非常旧的 shell，您必须使用 eval：

```
eval "printf \"%s\n\" \"\$$(($#-1))\"" 
```

# types - 深入研究类型系统和类型理论

> ID：11054943
> 
> 赞同：36
> 
> 时间：2012-06-15T16:44:03.407
> 
> 标签：types, programming-languages

我想了解类型背后的实际理论，而不是仅仅了解一些现有语言的最新实际变化（例如，不仅仅是 Haskell 或 Scala 的类型系统如何工作）。

获取此背景的最佳方法是什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-15T19:54:01.703

类型论是一个很大的领域。首先，术语“类型”在计算机科学中是一种用词不当，出于几个原因，尽管它们主要用于相同的基本概念。出于相同的原因，类型已经出现在许多环境中，如哲学、计算机科学和数学。数学中类型的起源来自于试图将集合论形式化并遇到一些细微的悖论，尽管类似的悖论也出现在计算机科学中。（例如，我喜欢指出 Girard 的悖论）。

您目前可能解释类型的方式是在整个 70 年代至 90 年代计算机中流行的一个想法：类型是一种轻量级的流不敏感分析，它允许我们对我们编写的程序做出简明的逻辑保证。类型可以用于此，但您实际上可以将它们一直用于编码高阶逻辑，其中*程序*是*证明*。到这里后，您可以进行证明，提取计算组件，并将其转换为计算“正确”结果的程序（关于您证明的定理）。

您可以从这里走几条路：

*   拿一本 Ben Pierce 的[Types and Programming Languages 给自己。](http://www.cis.upenn.edu/%7Ebcpierce/tapl/) 这是一本值得阅读*的*书，也是计算机科学领域最好的书之一。它涵盖了我们为什么需要类型的理论，以及我们如何使用它们来对我们的程序实施约束！
*   学习一种语言，您可以定期使用类型来强制执行有关程序语义的事情。特别是，您可以学习 OCaml、Haskell 或 Agda。Haskell 似乎是目前最好的选择，它有相当多的扩展使其非常有吸引力，并且是一个非常活跃的用户社区。事实上，在顶级会议上发布的结果在短短几年内就在社区中得到广泛使用是很常见的！
*   学习使用基于构造类型理论的定理证明器。在我看来，这是了解类型理论背后真正问题的唯一真正方法。有很多不错的选择，尽管 Coq 和 Isabelle 现在是真正的竞争者。Coq 有一个很大的优势：Ben Pierce 也有一本书涵盖了它！ [软件基础](http://www.cis.upenn.edu/%7Ebcpierce/sf/)深入地涵盖了编程语言的大量理论，你真的可以用它来*证明*事情。

您可能还想研究一些相关领域：

*   范畴论是这些东西的基础数学。例如，可以对这些语言中给出的（共）归纳数据类型进行分类解释。
*   逻辑。学习一点古老的传统逻辑会很有帮助，尽管我相信你需要的大部分内容都可以通过阅读 Ben Pierce 的 SF 书获得。但是，仍然有很多对旧系统的参考（连续微积分和自然演绎）。
*   了解*Haskell*社区！正如我所说，他们正在迅速行动，并提出有关计算机科学类型的深刻问题。
*   [Great Works in Programming Languages](http://www.cis.upenn.edu/%7Ebcpierce/courses/670Fall04/GreatWorksInPL.shtml)有很多很棒的文章！

除此之外，我还有一些很好的学习建议，但我肯定会从 Ben Pierce 的书开始（我从来没有真正进入过后续的书“类型和计算机科学的高级主题”，但这也可能很有趣给你）。特别是，我记得《自动推理手册》中有一篇关于高阶类型理论的精彩文章。

Ps，我确信这个问题的答案是具体的，“获得博士学位。在编程语言、哲学或逻辑方面......”;-)

# php - 正则表达式；停止包含符号的用户名？

> ID：11054944
> 
> 赞同：-3
> 
> 时间：2012-06-15T16:44:05.713
> 
> 标签：php, regex

我正在寻找 PHP 中的符号正则表达式，它将检查提交的用户名并在它们包含下划线以外的符号时拒绝它们？我希望它也支持数字。

我不知道从哪里开始......我试过在网上寻找，但没有成功。提前致谢。如果您能推动我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:46:33.793

```
/^\w+$/ 
```

在 PHP 中：

```
echo preg_match('/^\w+$/',$username); 
```

我鼓励你学习[正则表达式](http://www.regular-expressions.info/tutorial.html)。

**注意：**如果您不包括下划线，我建议[`ctype_alnum()`](http://www.php.net/manual/en/function.ctype-alnum.php)并避免使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:56:07.587

我会说：

```
preg_match('/^[\pL\pN_]+$/u', $string); 
```

在哪里：

```
\pL  stands for any letter
\pN  stands for any digit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:48:59.663

这是您正在寻找的正则表达式：

```
/[^A-Za-z0-9_]+$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:49:06.367

```
function validate($str){
   return preg_replace("/[^a-zA-Z0-9\_]/", "", $str);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T16:49:11.257

如果你只想接受字母数字，你可以使用这个 /^[A-z0-9_]+$/

利用：

```
$pattern_char = /^[A-z0-9_]+$/;

if(preg_match($pattern_char ,$_POST['newname'])
{
// do stuff
} 
```

希望有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T16:51:12.003

```
 ^[a-z0-9_]{3,20}$ 
```

这是我在java中做的方式，希望你不要介意数字，我也定义了一个长度，

# c - 并非所有内容都由内核模块正确发送给用户

> ID：11054952
> 
> 赞同：0
> 
> 时间：2012-06-15T16:44:37.307
> 
> 标签：c, kernel, kernel-module

我有这样的功能

```
static ssize_t read_mydevice(struct file *filp, char* buf, size_t count, loff_t* ppos) {

 char *text = "Device is empty\n";
    int len = strlen(text);

    if (*ppos != 0)
            return 0;

    if(count>bytesindev) count=bytesindev;
    if(bytesindev==0) {

        if (copy_to_user(buf, text, len))
                 return -EINVAL;
     } else {
        while(count>0) {
        if (copy_to_user(buf++, msg_Ptr, (unsigned long) 1)) {
                 return -EINVAL;
                } else {
                    strcpy(msg_Ptr, (msg_Ptr+1));
                    bytesindev-=1;
                    *(msg_Ptr+bytesindev) = '\0';
                }
                count-=1;
                printk(KERN_INFO "%d\n", count);
            }
            printk(KERN_INFO "%s\n", buf);
     }
    /*
     * Tell the user how much data we wrote.
     */
    *ppos = len;

    return len;

 } 
```

问题是用户没有得到完整的消息，它始终是它的前 13-16 个标志，一个循环被制作了很多次，它应该是。起初传递给 copy_to_user 的第三个参数是整个消息的长度，但这个解决方案也不能正常工作。有任何想法吗？这个函数应该给用户他需要的一部分缓冲区（首先写入缓冲区的字节数，有点像 FIFO）。数据必须早先发送到设备。这是编写函数：

```
static ssize_t
write_mydevice(struct file *filp, const char *buff, size_t len, loff_t * off)
{
if(bytesindev+len>limit) {
    if(limit-bytesindev<=0) {
        printk(KERN_ALERT "Device is full.\n");
            return -EINVAL;
    } else {
        printk(KERN_INFO "Device almost full.\n");
        strncat(msg_Ptr, buff, limit-bytesindev);
        bytesindev+=limit-bytesindev;
        return limit-bytesindev;
    }
} else {
    //printk(KERN_INFO "Device working\n");
    strncat(msg_Ptr, buff, len);
    bytesindev+=len;
    return len;
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:54:31.397

代码的意图对我来说并不完全清楚，但至少存在一个问题。strcpy 调用无效。不保证可以使用重叠缓冲区：

```
strcpy(msg_Ptr, (msg_Ptr+1)); 
```

它可能具有预期的结果，但它是未定义的行为。见[strcpy](http://linux.die.net/man/3/strcpy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:43:18.037

问题是 read 函数返回错误的值，它总是返回文本的长度，而不是发送消息的长度。

# fortran - fortran中的随机抽样

> ID：11054955
> 
> 赞同：0
> 
> 时间：2012-06-15T16:45:10.293
> 
> 标签：fortran

我有以下数据

```
X     Y    INFTIME
1     1     0
1     2     4
1     3     4
1     4     3
2     1     3
2     2     1
2     3     3
2     4     4
3     1     2
3     2     2
3     3     0
3     4     2
4     1     4
4     2     3
4     3     3
4     4     0 
```

X 和 Y 代表 4 x 4 方格中的 X 和 Y 分量。在这里，我想从被感染的人群中随机抽取 10% 的样本，即其 INFTIME 不为零。我对编码一无所知，因此无法启动它。任何建议和想法对我来说都会很棒。谢谢

编辑：

```
DO T = 1,10
   DO i = 1, 625

      IF(INFTIME(i)/=0 .AND. INFTIME(i) .LE. T)THEN
         CALL RANDOM_NUMBER(u(i))
         u(i) = 1+aint(u(i)*25)
          CALL RANDOM_NUMBER(v(i))
         v(i) = 1+aint(v(i)*25)
          CALL RANDOM_NUMBER(w(i))
         w(i) = 1+aint(w(i)*10)
      ENDIF
   ENDDO
ENDDO

do p = 1,625
  WRITE(*,*) u(p),v(p),w(p)
 enddo 
```

这是我尝试过的代码，但它只给出随机数，而不是与数据的连接。我使用了 25 x 25 网格的数据，即 625 个人和感染时间 1 到 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:25:30.587

按照 ja72 的说法。您有三个相同大小 (16) 的一维数组。您需要做的就是选择一个介于 1 和 16 之间的数字，检查 INFTIME 是否为零并根据需要接受该值，然后重复直到您采集了 10% 的样本（这将是 1.6 个值，所以我假设你只拿 2？或者你有比你提供的这个 4x4 更多的数据？）

**编辑**您需要在语句*之前调用随机数生成器：*`if`

```
 do t=1,10
      do i=1,625
          ind = 1+int(624*rand(seed))
          if(inftime(ind).neq.0 .and. inftime(ind).le.t) then
             stuff
          endif
       enddo
    enddo 
```

该调用将选择一个介于 1（何时）和 625（何时）`ind=1+int(625*rand(seed))`之间的随机整数。然后，如果满足声明，您就可以做您需要的事情。`rand(seed)=0``rand(seed)=1``if`

编辑：程序epimatrix

```
IMPLICIT NONE
INTEGER ::l, i,T,K
REAL, DIMENSION(1:625):: X,y,inftime
INTEGER::seed,my_cnt
INTEGER,DIMENSION(8) :: time1
CALL DATE_AND_TIME(values=time1)
seed = 1000*time1(7)+time1(8)
call srand(seed)

OPEN(10, FILE = 'epidemicSIR.txt', FORM = 'FORMATTED')
DO l = 1,625
   READ(10,*,END = 200) X(l), Y(l), INFTIME(l)
  ! WRITE(*,*) X(l),Y(l), INFTIME(l)
  ! if you know how it was formatted, you should use
  ! read(10,20) X(l), Y(l), INFTIME(l)
  ! where 20 is the format
ENDDO
200 CONTINUE
CLOSE(10)

DO T = 1,10
   my_cnt=0
   write(*,*) "T=",T
   DO while (my_cnt.le.63)
      K = 1+int(624*rand())
      IF(INFTIME(K)/=0 .AND. INFTIME(K) .LE. T)THEN
         write(*,*) X(k),Y(k),INFTIME(k)
         my_cnt=my_cnt+1
      ENDIF
   enddo
   write(*,*) " "
ENDDO

end program 
```

**编辑 2** 我调整了程序以解决一些问题。我已经尝试将我的编辑保持为小写，以便您可以看到不同之处。`do-while`循环允许代码继续运行，直到满足条件（这意味着*每个 T*`my_cnt.le.63`有 63 行 X、Y、inftime ）。我已经添加了一行来输出 T 和另一行来添加一个空格，以便在查看输出时数据可能更清晰。

 *这应该可以解决您遇到的所有问题。如果没有，我会继续检查这个页面。*

# c# - 试图运行我的代码隐藏编写的 javascript

> ID：11054960
> 
> 赞同：0
> 
> 时间：2012-06-15T16:45:54.177
> 
> 标签：c#, javascript, asp.net, code-behind

我正在尝试运行一些由我的代码隐藏文档创建的 javascript 代码。

```
<script type="text/javascript">

    function GetMap() {
        //some javascript
    }

    function AssetDescription(var1, var2, var3) {
        //some javascript using var1, var2, and var3
    }

    function test() {
        alert("test position 1");
        var onloadText = document.getElementById("points").value;
        alert(onloadText);
        eval(onloadText);
        alert("after eval");
    }
    window.onload = test;
</script>

<body runat="server">
<input type="hidden" id="points" runat="server" />
</body> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e) {
    points.Attributes.Add("value", Iterations());
}

public string Iterations() {
    string toReturn = "GetMap(); \n";
    //assetRow is an array of strings. The strings are in the format "var1, var2, var3"
    for (i=0; i<numberOfAssets; i++)
    {
        toReturn = toReturn + "AssetDescription("+assetRow[i]+"); \n";
    }
    return toReturn;
} 
```

希望我已经尽可能清楚地说明了这一切。这是我认为与我的问题相关的所有代码。我对其他设置方式持开放态度。

我尝试将 body.onload 元素设置为直接从代码隐藏中包含我的 javascript，但无济于事。我想直接在我的标签中添加这段代码，但我认为 ASPX 没有这种能力，所以这是我创建的解决方法。

这似乎是我发现的最有前途的方法。我搜索了这些论坛，你们中的大多数人都说 eval() 是个坏主意。不用说，它甚至没有工作。但如果有的话，我会喜欢一个更强大的替代方案。

`alert("after eval")`警报永远不会触发，但`alert("test position 1")`两者都会`alert(onloadText)`触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:56:38.383

您可以创建一个公共变量并将公共变量打印到页面上，而不是将其设置为和 html 元素并使用 eval 运行它。这意味着将打印变量的字符串内容，这将是要运行的 JavaScript。

所以前端

```
<script type="text/javascript">

    function GetMap() {
        //some javascript
    }

    function AssetDescription(var1, var2, var3) {
        //some javascript using var1, var2, and var3
    }

    function test() {
        alert("test position 1");
        <%= generatedScript %>
        alert("after eval");
    }
    window.onload = test;
</script>

<body runat="server">
<input type="text" id="points" runat="server" />
</body> 
```

代码背后

```
public string generatedScript = string.empty;

public string Iterations() {
    string generatedScript = "GetMap(); \n";
    //assetRow is an array of strings. The strings are in the format "var1, var2, var3"
    for (i=0; i<numberOfAssets; i++)
    {
        generatedScript = generatedScript + "AssetDescription("+assetRow[i]+"); \n";
    }
} 
```

应该没事！

# .net - 与旧的 CInt() VB 方法对应的 VB.NET 方法是什么？

> ID：11054965
> 
> 赞同：3
> 
> 时间：2012-06-15T16:46:17.160
> 
> 标签：.net, vb.net, methods, double, type-conversion

我不想在我的代码中使用旧的 Visual Basic 方法，而且我对与旧的 CInt() Visual Basic 方法相对应的最新 VB.NET 方法感到困惑。

例如，

```
Dim n1 as Double : n1 = CInt(2.1111111) 'Gets only 2 without rounding it
Dim n2 as Double : n2 = CInt(2.7777777) 'Get only 2 without rounding it 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T16:49:17.170

您也可以在 VB.NET 中使用[CInt](http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.100%29.aspx)。它是VB.NET 编译器支持的标准[类型转换函数。](http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.100%29.aspx)没有理由避免它。

但是，几乎每个类型转换操作都会*四舍五入*到最接近的整数（包括其他方法，例如[Convert.ToInt32](http://msdn.microsoft.com/en-us/library/ffdk7eyz)等），而不是截断。您可以使用[Int 或 Fix](http://msdn.microsoft.com/en-us/library/xh29swte%28v=vs.90%29.aspx)强制截断（它们对负数有不同的行为）。

请注意，如果您希望避免使用 VB.NET 特定的转换例程，则可以使用[Math.Truncate](http://msdn.microsoft.com/en-us/library/c2eabd70.aspx)和[Math.Floor来执行与 Int/Fix 相同的操作。](http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx)

* * *

附带说明 - [Visual Basic 6.0 中的 CInt](http://www.chennaiiq.com/developers/reference/visual_basic/functions/cint.asp)也执行了舍入。VB.NET 中的行为`CInt`与 Visual Basic 6.0 中的相同。

# python - 筛选 Excel 表格

> ID：11054971
> 
> 赞同：1
> 
> 时间：2012-06-15T16:46:34.567
> 
> 标签：python, excel, vba

我有 2 个 excel 文件：IDList.csv 和 Database.csv。IDList 包含我想从数据库中过滤掉的 300 个 ID 号的列表，其中包含 2000 个条目（在数据库中留下 1700 个条目）。

我尝试编写一个 for 循环（对于 IDList 中的每个 ID，在 Database.csv 中过滤掉该 ID），但是过滤器功能遇到了一些问题。我正在使用 Pyvot (http://packages.python.org/Pyvot/tutorial.html)。我收到语法错误...Python/Pyvot 不喜欢我的 xl.filter 语法，但我不知道如何更正语法。这就是文档所说的：

xl.tools.filter(func, range) 通过将 func 应用于给定范围来过滤行或列。func 为范围内的每个值调用。如果返回 False，则隐藏相应的行/列。否则，行/列是可见的。

range 必须是行向量或列向量。如果是行向量，则隐藏列，反之亦然。

请注意，要取消隐藏行/列，范围必须包括隐藏的单元格。例如，取消隐藏范围： xl.filter(lambda v: True, some_vector.including_hidden)

这是我的代码：

```
import xl 

IDList = xl.Workbook("IDList.xls").get("A1:A200").get() 

for i in range(1,301):
     xl.filter(!=IDList[i-1],"A1:A2000") 
```

如何使用 IDList.csv 中的条件过滤 Database.csv 中的列？尽管我更喜欢 Python，但我对 Python 或 Excel VBA 宏的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:35:03.127

```
import csv

with open("IDList.csv","rb") as inf:
    incsv = csv.reader(inf)
    not_wanted = set(row[0] for row in incsv)

with open("Database.csv","rb") as inf, open("FilteredDatabase.csv","wb") as outf:
    incsv = csv.reader(inf)
    outcsv = csv.writer(outf)
    outcsv.writerows(row for row in incsv if row[0] not in not_wanted) 
```

# python - Homebrew 使用 python 模块安装 libxml2

> ID：11054972
> 
> 赞同：11
> 
> 时间：2012-06-15T16:46:37.657
> 
> 标签：python, macos, libxml2, homebrew

早上好，

我正在尝试使用 python 模块安装 libxml2。我尝试了以下方法：

```
brew install --with-python libxml2                                                                  
==> Downloading ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz
Already downloaded: /Users/brandon/Library/Caches/Homebrew/libxml2-2.8.0.tar.gz
==> ./configure --prefix=/usr/local/Cellar/libxml2/2.8.0 --without-python 
```

正如你所看到的......即使使用 --with-python 标志，它仍然在没有 python 的情况下配置源！

在安装结束时，自制软件说：

```
Generally there are no consequences of this for you.
If you build your own software and it requires this formula, you'll need
to add its lib & include paths to your build variables:

    LDFLAGS  -L/usr/local/Cellar/libxml2/2.8.0/lib
    CPPFLAGS -I/usr/local/Cellar/libxml2/2.8.0/include 
```

当我尝试安装 gnome-doc-utils 包时：

```
Gnome-doc-utils requires libxml2 to be compiled
with the python modules enabled, to do so:
  $ brew install libxml2 --with-python 
```

所以很明显我又试了...

```
╰─ brew install libxml2 --with-python
Error: libxml2-2.8.0 already installed 
```

我对此还是新手......所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T22:17:12.873

首先，您无法安装 libxml2，因为您已经成功安装了它，因此您首先需要将其卸载。

`brew uninstall libxml2`

接下来，您将需要编辑 brew 公式——这很简单——

键入 `brew edit libxml2`并更改行

```
system "./configure", "--prefix=#{prefix}", "--without-python" 
```

对此：

```
system "./configure", "--prefix=#{prefix}", "--with-python" 
```

这并不能解决 brew 公式的问题，但它确实强制使用标志“--with-python”，因此下次键入`brew install libxml2`时将安装 python 库。

如果您需要重置公式（撤消更改），只需键入`brew update`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-30T02:35:14.747

这对我有用。如果之前已完成，请先取消链接/卸载：

```
brew unlink libxml2
brew unlink libxslt
brew uninstall libxml2
brew uninstall libxslt 
```

然后

```
brew install --framework python
brew install --with-python libxml2
brew install --with-python libxslt
brew link libxml2 --force
brew link libxslt --force 
```

瞧！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-02T02:03:34.437

有用的是在 brew 命令中使用 --with-python 安装 libxml2

```
brew install --with-python libxml2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-03T19:47:22.830

kylehunt 的回答让我解决了在升级到 macOS Catalina 后运行“brew upgrade”后如何开始出现的问题：

如果你碰巧看到类似

```
Error: libxml2: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/libxml2.rb:53: syntax error, unexpected <<
<<<<<<< Updated upstream
^~
/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/libxml2.rb:54: syntax error, unexpected ',', expecting end
...              "--with-history",
...                              ^
/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/libxml2.rb:55: syntax error, unexpected ',', expecting end
...            "--without-python",
...                              ^
/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/libxml2.rb:57: syntax error, unexpected ',', expecting end
...               "--with-python",
... 
```

这意味着你应该跑

```
brew edit libxml2 
```

修复配置文件，因为它可能在升级过程中被合并冲突破坏。在文件中查找 <<<<<。

# linux - JDBC 程序长时间运行性能问题

> ID：11054975
> 
> 赞同：2
> 
> 时间：2012-06-15T16:47:21.287
> 
> 标签：linux, performance, oracle, jdbc, java

我的程序在 Oracle 查询性能方面存在问题，我相信 SQL 的性能很好，因为它在 SQLPlus 中返回很快。

但是当我的程序运行了很长时间，比如 1 周时，SQL 查询（使用 JDBC）变得更慢（在我的日志中，查询时间比我最初启动程序时要长得多）。当我重新启动程序时，查询性能恢复正常。

我认为我使用preparedStatement的方式可能有问题，因为我使用的SQL不使用占位符“？” 一点也不。只是一个复杂的选择查询。

查询过程由 util 类完成。这是构建查询的相关代码：

```
public List<String[]> query(String sql, String[] args) {
    Connection conn = null;
    conn = openConnection();
    conn.setAutocommit(true);
    ....
    PreparedStatement preStatm = null;
    ResultSet rs = null;
    ....//set preparedstatment arg code 
    rs = preStatm.executeQuery();
      ....
    finally{
           //close rs
           //close prestatm
           //close connection
     }
 } 
```

就我而言，args 始终为空，因此它只是将查询 sql 传递给此查询方法。在程序长时间运行后，这种方式可能会减慢数据库查询的速度吗？或者我应该改用语句，或者只用“？”传递参数 在 SQL 中？如何找出问题的根本原因？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:28:09.447

可能是 jdbc 缓存中的问题... [oracle spec](http://docs.oracle.com/cd/B28359_01/java.111/b31224/concache.htm) 尝试将其关闭。或尝试重新启动驱动程序几次（每天一次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T21:39:17.197

您首先需要查看可以帮助您了解您花费最多时间的数据，在性能调整时猜测不是一种选择。

因此，我建议获取可靠的数据来确定存在问题的层（JAVA 或 DB）。

为此，我建议在问题最明显时查看 AWR 和 ASH 报告。还要收集 JVM 上的数据（您可以使用 JConsole 和/或 JVisualVM）。

第一次诊断不良性能时，我总是使用“使用”方法，即利用率、饱和度和错误。

所以首先，在日志中查找错误。

然后寻找任何变得饱和的资源（CPU、内存等...）

最后看看每个资源的利用率，拥有客户端服务器布局将使这更容易，如果不是这种情况，您将需要深入到进程级别以了解它的 Java 还是 DB。

一旦你收集了这些数据，你就可以相应地指导你的调整工作。采用这种方法只会浪费时间，有时甚至会掩盖问题或引发新问题。

您可以稍后带着这些数据回来，我们可以看看！

# c# - 什么会导致实体框架超时

> ID：11054976
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:47:24.810
> 
> 标签：c#, sql-server, entity-framework-4

我有其他查询使用相同的连接字符串；服务器正在返回这些调用的数据。

一些设置： Connection.ConnectionTimeout = 3600（在调试器中） DB 超时设置为 0

```
<add
   name="StuffEntities"
   connectionString="metadata=res://*/DataModel.Stuff.csdl|res://*/DataModel.Stuff.ssdl|res://*/DataModel.Stuff.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=10.0.1.Stuff;initial catalog=Stuff;persist security info=True;user id=Stuff;password=Stuff;multipleactiveresultsets=True;App=EntityFramework;Connect Timeout=3600&quot;"
   providerName="System.Data.EntityClient" /> 
```

外部异常

> {“执行命令定义时发生错误。有关详细信息，请参阅内部异常。”}

内部异常

> {“超时时间已过。在操作完成之前超时时间已过或服务器没有响应。”}错误代码：-2146232060

看起来它会在 30 秒内发生。

我不知道是什么覆盖了我的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:54:07.773

```
context.CommandTimeout = 3600; 
```

忘记换那个了。

傻我。

# jquery - 过滤数据后 Jquery Zebra 列表奇偶显示。

> ID：11054977
> 
> 赞同：0
> 
> 时间：2012-06-15T16:47:39.440
> 
> 标签：jquery, css, filter

过滤结果后显示“斑马”列表时出现问题。我有一个完美显示的斑马列表是代码：

```
$('ul li:odd').addClass('zebra_odd');
$('ul li:even').addClass('zebra_even'); 
```

当我过滤列出这样的输入时，问题就来了：

```
 $('input').keyup(function() {                   
    var textboxVal = $(this).val().toLowerCase();   
    $('ul li').each(function() {                    
    var listVal = $(this).text().toLowerCase();     
      if(listVal.indexOf(textboxVal) >= 0) {      
        $(this).show();                        
      } else {
        $(this).hide();                         
      } 
```

即在列表上我有这个值：`a1, b1, a2, b2, a3, b3.`列表显示斑马行上的值完美，但如果我过滤数据，即“a”，它会在白色背景中显示 a1、a2、a3，它保持旧的奇数，偶数价值观。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:07:33.400

您可以在过滤这样的元素后编写一个函数来更新`odd,even`类

```
function setOddEven() {
    $('li:visible:odd').removeClass('odd even').addClass('odd');
    $('li:visible:even').removeClass('odd even').addClass('even');
}
$(function() {
    setOddEven();
    $('input').keyup(function() {
        var textboxVal = $(this).val().toLowerCase();
        $('ul li').each(function() {
            $this = $(this); // cache the object for better performance
            var listVal = $this.text().toLowerCase();
            if (listVal.indexOf(textboxVal) >= 0) {
                $this.show();
            } else {
                $this.hide();
            }
        });
        setOddEven();
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/asnCv/2/)

不要忘记[`:visible`](http://api.jquery.com/visible-selector/)选择器，否则它将考虑隐藏元素，因此无法正常工作。

# wpf - 如何仅对 xamdatagrid 中的选定行启用摘要？

> ID：11054980
> 
> 赞同：0
> 
> 时间：2012-06-15T16:47:44.610
> 
> 标签：wpf, xaml, infragistics, xamdatagrid

我正在使用 infragistices 网格开发 wpf 应用程序。我搜索了 infragistics 论坛，谷歌搜索并没有找到任何东西，我确实发现 devExpress 网格确实支持[这一点](http://www.devexpress.com/Support/Center/p/Q93136.aspx)，但找不到类似的解决方案 infragistics 对应

我正在尝试查看是否有一种方法可以使摘要仅在用户选择行时才起作用？如果有人尝试过任何这样的条件汇总计算，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:52:23.787

如果您的网格在变量`dataGrid`中，则此 LINQ 应该可以工作

```
 /// <summary>
    /// Gets a readonly list of the filtered selected records.
    /// </summary>
    public IList<DataRecord> SelectedRecords
    {
        get
        {
            return dataGrid.Records.Cast<DataRecord>().Where(r => r.IsFilteredOut != true && r.IsSelected && !r.IsDeleted).ToList().AsReadOnly();
        }
    } 
```

# function - Clojure 首先和休息

> ID：11054988
> 
> 赞同：4
> 
> 时间：2012-06-15T16:48:15.607
> 
> 标签：function, clojure, symbols

为什么我会得到 2 个不同的值

```
(apply (first '(+ 1 2)) (rest '(+ 1 2)))
> 2 
```

和

```
(apply + '(1 2))
> 3 
```

什么时候

```
(first '(+ 1 2)) 
> + 
```

和

```
(rest '(+ 1 2))
> (1 2) 
```

我尝试减少并得到相同的值

```
(reduce (first '(+ 1 2)) (rest '(+ 1 2)))
> 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T17:23:41.377

你的问题是你试图调用符号`'+`而不是函数`+`。当你调用一个符号时，它会尝试在第一个参数中查找该符号（例如，如果它是`{'a 1 '+ 5 'b 2}`你会得到的`5`）。如果您传递第二个参数，则返回该值，而不是`nil`在第一个参数中找不到符号。因此，当您调用 时`('+ 1 2)`，它会尝试在 1 中查找`'+`并失败，因此返回 2。

`'(+ 1 2)`顺便说一句，这是使用和创建列表的区别`(list + 1 2)`。前者创建符号 +、1 和 2 的列表。因为 '1 和 1 相同，所以没关系。但是符号'+不是Var clojure.core/+，所以后者获取Var的值而前者只是获取符号。因此，如果您完成了`(list + 1 2)`，您的本可以按照书面方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:16:42.677

(first '(+ 1 2)) 是一个符号。

```
user=> (class (first '(+ 1 2)))
clojure.lang.Symbol
user=> (apply (symbol "+") [1 2])
2
user=> (apply (eval (symbol "+")) [1 2])
3
user=> (apply (eval (first '(+ 1 2))) (rest '(+ 1 2)))
3

user=> (class (first [+ 1 2]))
clojure.core$_PLUS_
user=> (apply (first [+ 1 2]) (rest '(+ 1 2)))
3 
```

# c# - 如何绑定到我的实体部分类中的自定义属性

> ID：11054996
> 
> 赞同：0
> 
> 时间：2012-06-15T16:48:59.393
> 
> 标签：c#, asp.net, data-binding, drop-down-menu, eval

我有一个带有`MailingState`属性的实体类。我想在另一个属性中对该值进行一些操作，所以我添加了：

```
public string MailingStateAbbreviation
{
    get { return getStateAbbreviation(MailingState); }
    set { MailingState = value; }
} 
```

但是，在 a`DetailsView` `EditItemTemplate`中，当我尝试提交编辑表单时，以下操作失败：

```
<asp:DropDownList ID="ddlMailingState" runat="server" DataSourceID="ddlAllStates"
        AppendDataBoundItems="True" DataTextField="StateAbbreviation"
        DataValueField="StateAbbreviation"
        SelectedValue='<%# Bind("MailingStateAbbreviation") %>'>
    <asp:ListItem Value="" Text="" />
</asp:DropDownList> 
```

我收到此错误：

> 在插入、更新或删除操作期间，在实体上找不到名为“MailingStateAbbreviation”的属性。检查以确保指定为绑定表达式的属性可用于数据源。

如果我更改`Bind`为`Eval`on `SelectedValue`，则表单提交正常，但`MailingState`属性未更新。如何将表单控件绑定到实体上的自定义属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:37:58.470

虽然我更喜欢不涉及处理事件的更具声明性的方法，但这很有效。我向 中添加了一个`OnItemUpdating`处理程序`DetailsView`，实现如下：

```
protected void dvOrg_ItemUpdating(object sender, DetailsViewUpdateEventArgs e)
{
    var view = (DetailsView)sender;
    var mailStateDdl = (DropDownList)view.FindControl("ddlMailingState");
    e.NewValues["MailingState"] = mailStateDdl.SelectedValue;
} 
```

在我的 .aspx 中，我有这个：

```
<asp:DropDownList ID="ddlMailingState" runat="server" DataSourceID="ddlAllStates"
        AppendDataBoundItems="True" DataTextField="StateAbbreviation"
        DataValueField="StateAbbreviation"
        SelectedValue='<%# Eval("MailingStateAbbreviation") %>'>
    <asp:ListItem Value="" Text="" />
</asp:DropDownList> 
```