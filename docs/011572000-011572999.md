# StackOverflow 问答 11572000-11572999

# c++ - 如何在 Windows 中使用 openssl 的静态库？

> ID：11572005
> 
> 赞同：1
> 
> 时间：2012-07-20T02:24:02.253
> 
> 标签：c++, windows, openssl

我有一个 openssl 静态库，有一个 bin 包含和 lib 文件夹。我是 Windows 和 C++ 编程的新手。我想问我应该如何链接这些文件并使用它们。比如包括。我使用 qt 作为我的 UI 引擎。我如何用它创建一个 ssl 套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:02:54.697

由于您使用的是 Qt，因此您可以使用 Qt 套接字。如果 Qt 使用 ssl 支持构建，您可以使用[QSslSocket](http://qt-project.org/doc/qt-5.0/qsslsocket.html)

要直接使用 openSSL，您需要为您的项目设置可见的 openSSL 包含和 lib 目录。

1.  使用动态链接的 openSSL 库。在这种情况下，您的二进制文件会在启动时尝试查找 openSSL dll，但无法加载 dll 应用程序失败。
2.  使用静态链接的 openSSL 库。您必须静态构建 openSSL（只有库没有 dll）。在这种情况下，您的二进制文件不需要任何 openSSL dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:11:12.433

使用静态库（使用头文件和链接到库）类似于在 Windows 中使用任何其他静态库。请在下面找到详细说明在应用程序中创建和使用静态库的过程的链接。您可能可以跳过创建部分并仅检查使用部分。

[在 Windows 中创建和使用静态库](http://msdn.microsoft.com/en-us/library/ms235627%28v=vs.80%29.aspx)

请注意，该链接是从 VS2005 的角度讲的。

对于 OpenSSL 编程示例，您可以参考以下内容：

[OpenSSL 编程入门 - I](http://www.linuxjournal.com/article/4822)
[OpenSSL 编程入门 - II](http://www.linuxjournal.com/article/5487)

# google-drive-api - 下载辅助域用户文档 Google Document List Api 2-Leged Oauth

> ID：11572006
> 
> 赞同：1
> 
> 时间：2012-07-20T02:24:16.607
> 
> 标签：google-drive-api, google-docs, google-docs-api

第一次发帖很抱歉有任何格式问题。

我正在尝试通过 oauth 下载辅助域用户的文档并收到 com.google.gdata.util.AuthenticationException: Unauthorized 错误。我可以使用与此类似的提要调用来拉取用户文档：

```
String docUrl = "https://docs.google.com/feeds/" + DOC_OWNER + "/private/full/" + DOC_ID + "?xoauth_requestor_id="+ PRIMARY_ADMIN_EMAIL
DocumentListEntry googleDoc = docServ.getEntry(new URL(docUrl), DocumentListEntry.class);
String exportUrl = ((MediaContent) googleDoc.getContent()).getUri().toString();
exportString = ((MediaContent) googleDoc.getContent()).getUri().split("&xoauth_requestor_id=")[0];
exportString + EXPORT_TYPE // add export type 
```

但是当尝试下载文档时，例如：

```
MediaContent mc = new MediaContent();
mc.setUri(exportUrl);
String mcUrl = mc.getUri() + "&xoauth_requestor_id=" + DOC_OWNER;
MediaSource ms = docServ.getMedia(mc); 
```

这会引发身份验证异常。我已尝试为主域管理员换出请求者 ID，但没有成功。我还尝试使用主域管理员的用户凭据，这会引发服务禁止异常。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:18:34.323

By default, the domain's OAuth key/secret don't have access to secondary domains. You need to manually enter the key (primary domain) and the Docs API scopes:

[https://docs.google.com/feeds/,https://docs.googleusercontent.com/,https://spreadsheets.google.com/feeds/](https://docs.google.com/feeds/,https://docs.googleusercontent.com/,https://spreadsheets.google.com/feeds/)

at:

[https://www.google.com/a/cpanel/YOUR-DOMAIN-HERE/ManageOauthClients](https://www.google.com/a/cpanel/YOUR-DOMAIN-HERE/ManageOauthClients)

for it to work with secondary domain accounts.

# ruby-on-rails - before_create 仍然保存

> ID：11572007
> 
> 赞同：3
> 
> 时间：2012-07-20T02:24:17.800
> 
> 标签：ruby-on-rails, self, update-attributes

在一切之前，我要感谢您的帮助

我有一个这样的模型：

```
 attr_protected nil
  belongs_to :product
  belongs_to :user
  before_create :add_ammount

  def carted_product_price(ammount, price)
    ammount * price
  end

  def add_ammount
    carted_product = CartedProduct.where(:product_id => self.product_id, :user_id => self.user_id)
    if carted_product
      carted_product.first.ammount += self.ammount
      carted_product.first.update_attributes(:ammount => carted_product.first.ammount)
    else
      self.save
    end
  end 
```

它将采购订单保存在名为 Carted_Products 的表中，该表连接到 belogings 中的用户和产品

问题是，当执行**之前创建**时，我希望它更新表中的记录，如果记录已经存在，则添加控制器传递的数量，如果不存在，则创建一个，就iv完成而言，它会更新数量，但仍然使用按顺序传递的参数创建一个新的，我希望它只更新，而不是在找到记录时执行这两个操作

谢谢你的耐心

编辑：

更新属性后尝试返回false，它取消过滤器，并且不创建或更新属性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T02:34:32.350

`false`在过滤器中返回`before_create`以防止对象形式被保存。`add_amount`不负责保存对象，也不应该自己调用`save`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T10:23:00.523

您不能在 before_create 过滤器中执行此操作。您需要`CartedProduct`在您正在调用的控制器中获取现有的`create`。

# dojo - dojo datagrid 只显示一行

> ID：11572008
> 
> 赞同：0
> 
> 时间：2012-07-20T02:24:25.920
> 
> 标签：dojo, dojox.grid.datagrid

当我使用 dojo 开发前端 UI 时，我遇到了一个令人头疼的问题。这个问题我google了很久。mailist 和 bugtracker 也是如此。

当我使用 TabContainer 打开一个页面并切换到一个选项卡时，选项卡中的 DataGrid 没有正确显示。现在我切换到另一个选项卡并再次切换回来，网格正确显示。我在声明性 dojo 中实现了这一点。只有一行javascript代码。

```
<script>
    function imgFormatter(s) {
        return '<img src="' + s + '"/>';
    }
</script> 
```

情况是这样的：打开页面 [http://i.stack.imgur.com/QGeid.png](http://i.stack.imgur.com/QGeid.png)

切换到另一个选项卡并再次返回 [http://i.stack.imgur.com/OWQxR.png](http://i.stack.imgur.com/OWQxR.png)

代码：

```
<div data-dojo-type="dijit.layout.TabContainer" data-dojo-props="region: 'center'">
    <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region: 'center'" title="tab1">
         tab1
    </div>
    <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region: 'center'" title="Hosts">
        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'center'">
            <div data-dojo-type="dojo.data.ItemFileReadStore" data-dojo-props="url: dojo.config.api2Path + '/GangliaHostMetric', urlPreventCache:true, clearOnClose:true" data-dojo-id="gangliaHostSummaryStore"></div>
            <table data-dojo-type="dojox.grid.DataGrid" data-dojo-props="region: 'center', query : {}, store:gangliaHostSummaryStore" data-dojo-id="gangliaHostSummaryGrid">
                <thead>
                    <tr>
                        <th field="hostname">hostname</th>
                        <th field="load_report" width="300" formatter="imgFormatter">Load</th>
                        <th field="mem_report" width="300" formatter="imgFormatter">Memory</th>
                        <th field="network_report" width="300" formatter="imgFormatter">Network</th>
                        <th field="cpu_report" width="300" formatter="imgFormatter">CPU</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:34:06.673

如果网格是选项卡中唯一显示的内容，那么您不需要所有这些 BorderContainers 和 ContentPanes，将网格作为 TabContainer 的 directChild。

否则，这是一个著名的问题，解决此问题的一种方法是在选项卡 onLoad 之后以编程方式创建网格。Tha 意味着基本上连接到选项卡 onLoad 事件，并在此处创建网格。修复它的另一种方法是使用 doLayout、isLayoutContainer，并同时指定父窗口小部件的大小。

有了所有这些，您应该找到一个合适的解决方案来解决您的问题。如果您需要更多指导，我建议您加入 irc freenode #dojo。在那里你可能会找到有人一步一步地指导你:)

# css - 使用背景图像覆盖 CSS 样式

> ID：11572010
> 
> 赞同：1
> 
> 时间：2012-07-20T02:24:54.483
> 
> 标签：css

同一页面上引用了两个 CSS 文件：一个 generic.css 文件和一个 custom.css 文件。通用文件中有默认样式，这些默认样式被相同元素的 custom.css 文件覆盖。这允许站点的用户自定义或“皮肤”他们的页面，而无需重新创建整个 generic.css 文件。只有少数样式会被覆盖。

我的问题如下：如果 generic.css 文件具有带有背景图像的元素的样式，并且在 custom.css 中使用不同的背景图像覆盖了相同的样式，那么浏览器是否下载了第一个图像？

另外，我想知道这是否是不好的做法 - 使用另一个自定义 CSS 文件自定义或“蒙皮”通用 CSS 文件以覆盖一些样式，包括指定不同的背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:18:29.663

虽然不完全确定，[但该站点对此](http://www.ravelrumba.com/blog/a-look-at-how-browsers-download-and-render-css-background-images/)进行了一些测试。该网站与您的问题相关的重要声明是：

> CSS 图像不是按照它们在 CSS 中出现的顺序而是按照它们在 HTML 中被调用的顺序启动的。我不确定下载开始的确切时间，但我的猜测是它发生在 CSS 规则匹配之后，当属性值分配给 DOM 元素时。

这至少暂时证实了几年前我在脑海中读到的内容，即从未显示过的背景图像（如 generic.css 图像被 custom.css 图像覆盖） ) 从未下载过。

进一步证实这一点的是典型的图像预加载器脚本，该脚本在精灵图像之前非常普遍（并且在某些用途中仍然存在）。它旨在下载将`:hover`在 css 中使用的图像，因为没有它，图像在第一次悬停之前不会加载，这会导致难看的延迟。因此，这也证明了除非实际显示（或预加载），否则背景图像本身永远不会加载。

我认为“蒙皮”通常不会有任何问题，除非您本质上是用 custom.css 覆盖了大部分或全部 generic.css，然后有人可能会争论，为什么要加载泛型。但正如你所说，通常只有几个样式被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:25:20.147

我想我的回答是**NO**和**NO BAD PRACTICE**。因为当css文件被浏览器可读/可执行时，浏览器会进行比较，找到css文件之间的相同值或差异，然后将它们组合起来。

简单的例子：

**css1.css**文件中有一行：

```
.test {display: block; width: 100%; height: 600px; background: #991100 url("image1.jpg") center top; border: 1px solid red;} 
```

然后**css2.css**还有一行：

```
.test {background: #991100 url("image2.jpg") no-repeat center center;} 
```

将由浏览器执行和运行的组合结果是：

```
.test {display: block; width: 100%; height: 600px; background: url("image2.jpg") no-repeat center center # 991100; border: 1px solid red} 
```

其中“背景：#991100 url("image1.jpg") center top;” 读取但未被浏览器调用/执行。

据我所知，文件**css1.css**的值由**css2.css**的值叠加。如果有**css3.css**文件怎么办？那么文件 css3.css 也会叠加在 css1.css 和 css2.css 的组合上。

希望能帮助到你。

# jquery - jQuery AJAX 发送数据但触发错误

> ID：11572012
> 
> 赞同：2
> 
> 时间：2012-07-20T02:25:29.287
> 
> 标签：jquery

我在处理来自 AJAX 的表单时遇到了一个奇怪的问题。

它按预期工作，但由于某种原因它会触发错误而不是成功。

这是代码：

```
$(".sendBtn").click(function(e) {

    campaigncode = "#####";
    senderemail = "test@email.com";
    subject = "Test";
    sendermessage = "Test";
    targetURL = "www.abc.com";

    email = $(".email").val();

    //Email Validation
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;  
    if( email ==""){//Empty Check
        alert('Please enter your email');
        e.preventDefault();
    } else {
        if(!emailReg.test( email )) {//Email validation
            alert('*Please enter valid email');
            e.preventDefault();
        } else {

    //Ajax Start
    $.ajax({
            url: "http://services.ninemsn.com.au/sendtofriend/sendtofriendService.aspx?showdefaultmessage=true",
            context: document.body,
            type: "POST",
            data: {campaigncode:campaigncode, recipientemail:email, senderemail:senderemail, subject:subject, sendermessage:sendermessage, targetURL:targetURL},
            dataType: "jsonp",
            success: function() {
                alert('Success');
            },
                        error: function() {
                                    alert('Error');
                              }

        });//Ajax End

        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:01:53.330

[从您的错误来看，这个问题](https://stackoverflow.com/questions/5095307/jquery-json-response-always-triggers-a-parseerror)和[那个问题](https://stackoverflow.com/questions/5359224/parsererror-after-jquery-ajax-request-with-jsonp-content-type)看起来很相似。“未调用 jQuery_172blah”错误指的是 jsonp 回调（未调用该回调，因为在其他地方解析失败）。我建议...

1.  尝试设置`crossDomain: true`，然后也设置`dataType:text`或`dataType:text json`。
2.  尝试`data`作为**字符串**而不是字典传递。
3.  尝试设置`jsonp:false`和`jsonpCallback`。请参阅有关这些的[文档](http://api.jquery.com/jQuery.ajax/)。

例如：

```
var jsonString = JSON.stringify({
    recipientemail: email
});
$.ajax({
    url: "http://services.ninemsn.com.au/sendtofriend/sendtofriendService.aspx?",
    crossDomain: true,
    dataType: 'text json',
    data: jsonString,
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T15:34:21.677

错误在服务器中，使用“response . AllowGet”发送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:40:55.087

JSONP 要求将响应包装在某种回调函数中。

尝试将响应记录到控制台以查看发回的内容

```
success: function(data) { console.log(data); } 
```

另外，尝试使用 $.parseJSON 将响应包装到一个对象中：

```
success: function(data) {
    var json = $.parseJSON(data);
} 
```

# assembly - WinASM 和 Zen of Assembly 的问题

> ID：11572021
> 
> 赞同：0
> 
> 时间：2012-07-20T02:26:31.240
> 
> 标签：assembly, x86

我有一本迈克尔·阿布拉什（Michael Abrash）写的名为《集结之禅》的书。据我所知，所有代码清单都在 x86 汇编中。我下载了 WinASM 和 MASM，所以我可以组装和链接这些列表。但是，这些列表不能开箱即用 - 事实上，我根本无法让它们工作。例如，这里是第一个清单的代码：

* * *

```
;
; *** Listing 2-1 ***
;
; The precision Zen timer (PZTIMER.ASM)
;
; Uses the 8253 timer to time the performance of code that takes
; less than about 54 milliseconds to execute, with a resolution
; of better than 10 microseconds.
;
; By Michael Abrash 4/26/89
;
; Externally callable routines:
;
;  ZTimerOn: Starts the Zen timer, with interrupts disabled.
;
;  ZTimerOff: Stops the Zen timer, saves the timer count,
;   times the overhead code, and restores interrupts to the
;   state they were in when ZTimerOn was called.
;
;  ZTimerReport: Prints the net time that passed between starting
;   and stopping the timer.
;
; Note: If longer than about 54 ms passes between ZTimerOn and
;   ZTimerOff calls, the timer turns over and the count is
;   inaccurate. When this happens, an error message is displayed
;   instead of a count. The long-period Zen timer should be used
;   in such cases.
;
; Note: Interrupts *MUST* be left off between calls to ZTimerOn
;   and ZTimerOff for accurate timing and for detection of
;   timer overflow.
;
; Note: These routines can introduce slight inaccuracies into the
;   system clock count for each code section timed even if
;   timer 0 doesn't overflow. If timer 0 does overflow, the
;   system clock can become slow by virtually any amount of
;   time, since the system clock can't advance while the
;   precison timer is timing. Consequently, it's a good idea
;   to reboot at the end of each timing session. (The
;   battery-backed clock, if any, is not affected by the Zen
;   timer.)
;
; All registers, and all flags except the interrupt flag, are
; preserved by all routines. Interrupts are enabled and then disabled
; by ZTimerOn, and are restored by ZTimerOff to the state they were
; in when ZTimerOn was called.
;

Code    segment word public 'CODE'
    assume  cs:Code, ds:nothing
    public  ZTimerOn, ZTimerOff, ZTimerReport

;
; Base address of the 8253 timer chip.
;
BASE_8253       equ 40h
;
; The address of the timer 0 count registers in the 8253.
;
TIMER_0_8253        equ BASE_8253 + 0
;
; The address of the mode register in the 8253.
;
MODE_8253       equ BASE_8253 + 3
;
; The address of Operation Command Word 3 in the 8259 Programmable
; Interrupt Controller (PIC) (write only, and writable only when
; bit 4 of the byte written to this address is 0 and bit 3 is 1).
;
OCW3            equ 20h
;
; The address of the Interrupt Request register in the 8259 PIC
; (read only, and readable only when bit 1 of OCW3 = 1 and bit 0
; of OCW3 = 0).
;
IRR         equ 20h
;
; Macro to emulate a POPF instruction in order to fix the bug in some
; 80286 chips which allows interrupts to occur during a POPF even when
; interrupts remain disabled.
;
MPOPF macro 
    local   p1, p2
    jmp short p2
p1: iret            ;jump to pushed address & pop flags
p2: push    cs      ;construct far return address to
    call    p1      ; the next instruction
    endm

;
; Macro to delay briefly to ensure that enough time has elapsed
; between successive I/O accesses so that the device being accessed
; can respond to both accesses even on a very fast PC.
;
DELAY   macro
    jmp $+2
    jmp $+2
    jmp $+2
    endm

OriginalFlags       db  ?   ;storage for upper byte of
                    ; FLAGS register when
                    ; ZTimerOn called
TimedCount      dw  ?   ;timer 0 count when the timer
                    ; is stopped
ReferenceCount      dw  ?   ;number of counts required to
                    ; execute timer overhead code
OverflowFlag        db  ?   ;used to indicate whether the
                    ; timer overflowed during the
                    ; timing interval
;
; String printed to report results.
;
OutputStr   label   byte
        db  0dh, 0ah, 'Timed count: ', 5 dup (?)
ASCIICountEnd   label   byte
        db  ' microseconds', 0dh, 0ah
        db  '$'
;
; String printed to report timer overflow.
;
OverflowStr label   byte
    db  0dh, 0ah
    db  '****************************************************'
    db  0dh, 0ah
    db  '* The timer overflowed, so the interval timed was  *'
    db  0dh, 0ah
    db  '* too long for the precision timer to measure.     *'
    db  0dh, 0ah
    db  '* Please perform the timing test again with the    *'
    db  0dh, 0ah
    db  '* long-period timer.                               *'
    db  0dh, 0ah
    db  '****************************************************'
    db  0dh, 0ah
    db  '$'

;********************************************************************
;* Routine called to start timing.                  *
;********************************************************************

ZTimerOn    proc    near

;
; Save the context of the program being timed.
;
    push    ax
    pushf
    pop ax          ;get flags so we can keep
                    ; interrupts off when leaving
                    ; this routine
    mov cs:[OriginalFlags],ah   ;remember the state of the
                    ; Interrupt flag
    and ah,0fdh         ;set pushed interrupt flag
                    ; to 0
    push    ax
;
; Turn on interrupts, so the timer interrupt can occur if it's
; pending.
;
    sti
;
; Set timer 0 of the 8253 to mode 2 (divide-by-N), to cause
; linear counting rather than count-by-two counting. Also
; leaves the 8253 waiting for the initial timer 0 count to
; be loaded.
;
    mov al,00110100b        ;mode 2
    out MODE_8253,al
;
; Set the timer count to 0, so we know we won't get another
; timer interrupt right away.
; Note: this introduces an inaccuracy of up to 54 ms in the system
; clock count each time it is executed.
;
    DELAY
    sub al,al
    out TIMER_0_8253,al     ;lsb
    DELAY
    out TIMER_0_8253,al     ;msb
;
; Wait before clearing interrupts to allow the interrupt generated
; when switching from mode 3 to mode 2 to be recognized. The delay
; must be at least 210 ns long to allow time for that interrupt to
; occur. Here, 10 jumps are used for the delay to ensure that the
; delay time will be more than long enough even on a very fast PC.
;
    rept 10
    jmp $+2
    endm
;
; Disable interrupts to get an accurate count.
;
    cli
;
; Set the timer count to 0 again to start the timing interval.
;
    mov al,00110100b        ;set up to load initial
    out MODE_8253,al        ; timer count
    DELAY
    sub al,al
    out TIMER_0_8253,al     ;load count lsb
    DELAY
    out TIMER_0_8253,al     ;load count msb
;
; Restore the context and return.
;
    MPOPF               ;keeps interrupts off
    pop ax
    ret

ZTimerOn    endp

;********************************************************************
;* Routine called to stop timing and get count.             *
;********************************************************************

ZTimerOff proc  near

;
; Save the context of the program being timed.
;
    push    ax
    push    cx
    pushf
;
; Latch the count.
;
    mov al,00000000b        ;latch timer 0
    out MODE_8253,al
;
; See if the timer has overflowed by checking the 8259 for a pending
; timer interrupt.
;
    mov al,00001010b        ;OCW3, set up to read
    out OCW3,al         ; Interrupt Request register
    DELAY
    in  al,IRR          ;read Interrupt Request
                    ; register
    and al,1            ;set AL to 1 if IRQ0 (the
                    ; timer interrupt) is pending
    mov cs:[OverflowFlag],al    ;store the timer overflow
                    ; status
;
; Allow interrupts to happen again.
;
    sti
;
; Read out the count we latched earlier.
;
    in  al,TIMER_0_8253     ;least significant byte
    DELAY
    mov ah,al
    in  al,TIMER_0_8253     ;most significant byte
    xchg    ah,al
    neg ax          ;convert from countdown
                    ; remaining to elapsed
                    ; count
    mov cs:[TimedCount],ax
; Time a zero-length code fragment, to get a reference for how
; much overhead this routine has. Time it 16 times and average it,
; for accuracy, rounding the result.
;
    mov cs:[ReferenceCount],0
    mov cx,16
    cli             ;interrupts off to allow a
                    ; precise reference count
RefLoop:
    call    ReferenceZTimerOn
    call    ReferenceZTimerOff
    loop    RefLoop
    sti
    add cs:[ReferenceCount],8   ;total + (0.5 * 16)
    mov cl,4
    shr cs:[ReferenceCount],cl  ;(total) / 16 + 0.5
;
; Restore original interrupt state.
;
    pop ax          ;retrieve flags when called
    mov ch,cs:[OriginalFlags]   ;get back the original upper
                    ; byte of the FLAGS register
    and ch,not 0fdh     ;only care about original
                    ; interrupt flag...
    and ah,0fdh         ;...keep all other flags in
                    ; their current condition
    or  ah,ch           ;make flags word with original
                    ; interrupt flag
    push    ax          ;prepare flags to be popped
;
; Restore the context of the program being timed and return to it.
;
    MPOPF               ;restore the flags with the
                    ; original interrupt state
    pop cx
    pop ax
    ret

ZTimerOff endp

;
; Called by ZTimerOff to start timer for overhead measurements.
;

ReferenceZTimerOn   proc    near
;
; Save the context of the program being timed.
;
    push    ax
    pushf       ;interrupts are already off
;
; Set timer 0 of the 8253 to mode 2 (divide-by-N), to cause
; linear counting rather than count-by-two counting.
;
    mov al,00110100b    ;set up to load
    out MODE_8253,al    ; initial timer count
    DELAY
;
; Set the timer count to 0.
;
    sub al,al
    out TIMER_0_8253,al ;load count lsb
    DELAY
    out TIMER_0_8253,al ;load count msb
;
; Restore the context of the program being timed and return to it.
;
    MPOPF
    pop ax
    ret

ReferenceZTimerOn   endp

;
; Called by ZTimerOff to stop timer and add result to ReferenceCount
; for overhead measurements.
;

ReferenceZTimerOff proc near
;
; Save the context of the program being timed.
;
    push    ax
    push    cx
    pushf
;
; Latch the count and read it.
;
    mov al,00000000b        ;latch timer 0
    out MODE_8253,al
    DELAY
    in  al,TIMER_0_8253     ;lsb
    DELAY
    mov ah,al
    in  al,TIMER_0_8253     ;msb
    xchg    ah,al
    neg ax          ;convert from countdown
                    ; remaining to amount
                    ; counted down
    add cs:[ReferenceCount],ax
;
; Restore the context of the program being timed and return to it.
;
    MPOPF
    pop cx
    pop ax
    ret

ReferenceZTimerOff endp

;********************************************************************
;* Routine called to report timing results.             *
;********************************************************************

ZTimerReport    proc    near

    pushf
    push    ax
    push    bx
    push    cx
    push    dx
    push    si
    push    ds
;
    push    cs  ;DOS functions require that DS point
    pop ds  ; to text to be displayed on the screen
    assume  ds:Code
;
; Check for timer 0 overflow.
;
    cmp [OverflowFlag],0
    jz  PrintGoodCount
    mov dx,offset OverflowStr
    mov ah,9
    int 21h
    jmp short EndZTimerReport
;
; Convert net count to decimal ASCII in microseconds.
;
PrintGoodCount:
    mov ax,[TimedCount]
    sub ax,[ReferenceCount]
    mov si,offset ASCIICountEnd - 1
;
; Convert count to microseconds by multiplying by .8381.
;
    mov dx,8381
    mul dx
    mov bx,10000
    div bx      ;* .8381 = * 8381 / 10000
;
; Convert time in microseconds to 5 decimal ASCII digits.
;
    mov bx,10
    mov cx,5
CTSLoop:
    sub dx,dx
    div bx
    add dl,'0'
    mov [si],dl
    dec si
    loop    CTSLoop
;
; Print the results.
;
    mov ah,9
    mov dx,offset OutputStr
    int 21h
;
EndZTimerReport:
    pop ds
    pop si
    pop dx
    pop cx
    pop bx
    pop ax
    MPOPF
    ret

ZTimerReport    endp

Code    ends
    end 
```

* * *

我将它保存为listing1.asm。当我在 WinASM 中创建一个新项目并选择 Standard EXE、Other EXE 或 Console Application 作为我的项目类型时，当我执行 Go All 时会得到以下输出（与单独组装和链接时相同）：

* * *

```
C:\masm32\bin\ML /c /coff /Cp /nologo /I"C:\masm32\include" "C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.asm"

 Assembling: C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.asm

C:\masm32\bin\Link @"C:\Users\Lincoln\Desktop\WinAsm\Projects\link.war"

Microsoft (R) Incremental Linker Version 5.12.8078
Copyright (C) Microsoft Corp 1992-1998\. All rights reserved.

/SUBSYSTEM:WINDOWS /RELEASE /VERSION:4.0 "/LIBPATH:C:\masm32\lib" "C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.obj" "/OUT:C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.exe" 
listing1.obj : fatal error LNK1190: invalid fixup found, type 0x0001

Make finished. 1 error(s) occured. 
```

* * *

当我将其组装并链接为 DOS 项目时，我得到以下输出：

* * *

```
C:\masm32\bin\ML /c /I"C:\masm32\include" "C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.asm"

Microsoft (R) Macro Assembler Version 6.14.8444
Copyright (C) Microsoft Corp 1981-1997\.  All rights reserved.

 Assembling: C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.asm

C:\masm32\bin\Link16 @"C:\Users\Lincoln\Desktop\WinAsm\Projects\link.war"

Microsoft (R) Segmented Executable Linker  Version 5.60.339 Dec  5 1994
Copyright (C) Microsoft Corp 1984-1993\.  All rights reserved.

Object Modules [.obj]: C:\Users\Lincoln\Desktop\WinAsm\Projects\listing1.objj
LINK : warning L4021: no stack segment
LINK : warning L4038: program has no starting address

Make finished. 2 error(s) occured. 
```

* * *

我不确定错误是什么意思，或者为什么会导致它。这本书，Zen of Assembly，已有 20 多年的历史，因此它的设计和编写是为了在稍微不同的处理器上运行，但我的印象是大多数处理器都是完全向后兼容的，所以我认为这不是问题。无论如何，有谁知道是什么导致了这些错误信息？显然，它们是链接器错误，它组装得很好，所以这让我觉得 MASM 附带的链接器不太对劲——我应该下载一个新的还是什么？

顺便说一句，我使用的是 32 位操作系统，而不是 64 位操作系统，并且我运行的是 Windows 7。如果您对我用来执行此操作的计算机有任何疑问，请随时提问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:35:18.133

问题是您的程序集文件不包含完整的程序，而仅包含旨在从您的主程序中调用的各个例程。您可以将此程序集文件编译为一个目标文件，然后将其链接到您的主程序。

链接器抱怨两件事：首先，您的程序没有声明堆栈段 - 请参阅[此处](http://oopweb.com/Assembly/Documents/ArtOfAssembly/Volume/Chapter_6/CH06-6.html)以获取显示如何执行此操作的随机示例（请参阅`segment para stack`指令）。其次，您的程序没有起始地址——您通常会使用`start:`标签来提供它。在 C 中与此近似的类比是没有`main()`函数。

我建议找到一个简单的程序模板来帮助您入门——“Zen”假设您已经了解 x86 汇编编程的基础知识。例如，[这里](http://snipd.net/assembler-simple-masm-program)是 16 位 DOS 的“Hello World”版本。

顺便说一句，您发布的例程仅在 16 位 MS-DOS 环境中的 PC 上运行时才有效，因为它们直接访问 8253 计时器芯片。

# c# - 如何通过网络从 C# ClickOnce 应用程序访问 sql server 2008 R2

> ID：11572023
> 
> 赞同：0
> 
> 时间：2012-07-20T02:26:44.030
> 
> 标签：c#, sql-server, networking, clickonce

我有一个在独立计算机上运行良好的 clickOnce C# 应用程序。我想通过网络使用该应用程序，但系统无法连接到 sql server (SQL SERVER 2008 R2) 并引发异常。我在 sql server 上创建了一个用户，并在应用程序的连接字符串上分配了它。但是，问题仍然存在。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:32:51.260

检查您的应用程序上的连接字符串

查看：

[SQL Server 2008 的连接字符串](http://www.connectionstrings.com/sql-server-2008)

将您的 SQL server 安全配置为 sql server 和 windows 身份验证模式。

确保其实例正在运行。

如果您的应用程序将在网络上使用，请创建 sql server 身份验证登录。

问候

# c++ - 如何使用菜单栏创建 ActiveX 控件？

> ID：11572025
> 
> 赞同：0
> 
> 时间：2012-07-20T02:26:47.340
> 
> 标签：c++, atl

有谁知道如何使用菜单栏和工具栏创建 activeX 控件？或者这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:09:26.040

ActiveX 控件通常是客户区控件，有窗口或无窗口。相反，菜单和工具栏由作为 ActiveX 控件容器的宿主应用程序拥有和管理。所以控件的范围只是客户区。

假设容器和控件都实现了围绕[`IOleInPlaceFrame::InsertMenus`](http://msdn.microsoft.com/en-us/library/ms683987%28v=vs.85%29)它的方法，则控件可以与应用程序共享菜单并在其上提供自己的条目。我不知道管理共享工具栏的这种标准约定。

在 MSDN 上的[帮助菜单合并](http://msdn.microsoft.com/en-us/library/bdteyst2%28v=vs.100%29.aspx)中阅读有关共享菜单的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:15:41.613

有可能做到这一点。但这并不总是一种受欢迎的方法，因为托管窗口必须为具有单个菜单的用户提供独特的体验。

[http://www.codeguru.com/cpp/com-tech/activex/controls/article.php/c5531/Menu-in-ActiveX-Controls.htm](http://www.codeguru.com/cpp/com-tech/activex/controls/article.php/c5531/Menu-in-ActiveX-Controls.htm)

# openerp - 保存到另一个表

> ID：11572030
> 
> 赞同：1
> 
> 时间：2012-07-20T02:27:30.013
> 
> 标签：openerp

o我从中选择相同的字段`mo.queue`，我想将其保存到`procurement.order`表格中

我的代码如下所示：

```
def action_ship_create(self, cr, uid, ids, id_queue, context=None):
    queue_obj = self.pool.get('mo.queue'). browse (cr, uid, id_queue, context=context)
    mo_name = queue_obj.name 
    query_param = (mo_name)
    cr.execute("select origin,create_date,product_uos_qty,product_qty,name,city from mo_queue",(query_param,))
    ads = cr.fetchone()
    name = ads and ads [0] or None
    print "======================"
    print name
    print "======================"

    val = { 'origin': name,
          } 
    print "======================"
    print val
    print "======================"  

    return {'value': val }  

    proc_id = self.pool.get('procurement.order').create(cr, uid, {
        'origin':origin,
    })
    proc_ids.append(proc_id) 
```

打印的结果是：

```
print name = SO013

print val = {'origin': u'SO013'} 
```

但是数据没有插入到`procurement.order`表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:56:28.790

您的代码我在 return 语句之后看起来像这样不执行任何操作在 return 之前放置 cdeo 并且您的代码需要大量调整，例如不要使用 SQL 注入，这不是一个好主意。

```
def action_ship_create(self, cr, uid, ids, id_queue, context=None):
        queue_obj = self.pool.get('mo.queue'). browse (cr, uid, id_queue, context=context)
        queue_model = self.poo.get(queue_obj.name)
        procurement_pool = self.pool.get('procurement.order')
        qsids = queue_model.search(cr, uid, )
        for record in queue_model.browse(cr, uid, qsids):
          if record.origin:
               #this will crate a new record the table procurement.order so 
               #field values may be not enough so you can update logic
               #and If you want to update record value you need a proc ids and you can do it.
               procurement_pool.create(cr, uid, {'origin':record.origin})
        return {'value': {'origin': record.origin}} 
```

希望这会帮助你让我知道我失踪了。

谢谢你

# php - 更新多条记录mysql

> ID：11572032
> 
> 赞同：0
> 
> 时间：2012-07-20T02:27:53.513
> 
> 标签：php, mysql

嗨，伙计们，我的代码如下。

我要做的是更新 mysql 中满足特定特定条件的所有值。现在，当我输入 mysql 查询时：

```
UPDATE `$DBNAME`.`video` SET `Secret_key` = '0' 
```

查询工作正常，但我似乎无法编写能够执行此操作的 php 代码。欢迎任何帮助

```
 <?php
    // Part 1 (works fine)
    include("/home3/kintest2/public_html/include/config.local.php");
    $connect= mysql_connect ($DBHOST,$DBUSER,$DBPASSWORD);
    $select= mysql_select_db($DBNAME, $connect);
    // End of Part 1

    // Part 2 (works fine)
    $test2= "SELECT * FROM `video`";
    $results= mysql_query($test2, $connect);
    $num_rows = mysql_num_rows($results);
    // End of part 2

    // Part 3 ( Not too sure about this part)
    for ($num_rows= $count; $count >= 0; $count--)
    {
    mysql_query("UPDATE `$DBNAME`.`video` SET `Secret_key` = '0'",$connect);
    }
    // End of part 3 ( Not too sure about this part)

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:41:34.843

对于初学者，我会将查询从循环中取出（并删除循环）。如果它仍然不起作用，请尝试对数据库名称进行硬编码。如果这不起作用，请确保`$connect`是您认为的那样。查找`mysql_query()`并确保您正确使用它。

如果您尝试以上所有方法，您会发现问题或至少找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:02:24.497

```
<?php
        // Part 1 (works fine)
        include("/home3/kintest2/public_html/include/config.local.php");
        $connect= mysql_connect ($DBHOST,$DBUSER,$DBPASSWORD);
        $select= mysql_select_db($DBNAME, $connect);
        // End of Part 1

        //no need of part 2 to update records in table
        //part 3 loop removed
        mysql_query("UPDATE `$DBNAME`.`video` SET `Secret_key` = '0' ",$connect);

?> 
```

试试这个。愿它能解决你的问题。

# arrays - 根据从另一个数组中的搜索查找数组中元素的索引

> ID：11572034
> 
> 赞同：26
> 
> 时间：2012-07-20T02:28:12.567
> 
> 标签：arrays, matlab, search, matrix, find

想象一下，我有两个数组：

```
a = [1, 2, 5, 7, 6, 9, 8, 3, 4, 7, 0];

b = [5, 9, 6]; 
```

我想在 a 中找到 b 值的索引（仅第一次命中），即：

```
c = [3, 6, 5]; 
```

有没有一种简单的 Matlab 原生方法可以做到这一点，而无需循环和搜索。

我尝试将 find() 用于：

```
find(a == b) 
```

如果您这样做，它将起作用：

```
for i = 1:length(b)
    index = find(a == b(i));
    c = [c, index(1)]
end 
```

但是，如果它比这更容易，那将是理想的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T06:59:11.693

您可以使用 arrayfun 轻松地将您的 for 循环压缩成一个简单的单行：

```
arrayfun(@(x) find(a == x,1,'first'), b ) 
```

另请参阅[Scenia](https://stackoverflow.com/a/21336707/1162609)对较新的 matlab 版本 (>R2012b) 的回答。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-24T15:43:58.677

这实际上是内置于[`ismember`](http://www.mathworks.de/de/help/matlab/ref/ismember.html). 你只需要设置正确的标志，然后它是一个单行，你不需要arrayfun。高于 R2012b 的版本默认使用此行为。

最初，[`ismember`](http://www.mathworks.de/de/help/matlab/ref/ismember.html)如果有多个，将返回最后一个出现，R2012a 标志使其返回第一个。

这是我的测试结果：

```
a = [1, 2, 5, 7, 6, 9, 8, 3, 4, 7, 0, 6];
b = [5, 9, 6];

[~,c] = ismember(b,a,'R2012a');
>> c
c =
     3     6     5 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T13:36:17.157

这是对[@Pursuit](https://stackoverflow.com/a/11572526/97160)建议的`ismember`方法的修复。这样，它可以处理多次出现的数字之一，并以正确的顺序返回结果：

```
[tf,loc] = ismember(a,b);
tf = find(tf);
[~,idx] = unique(loc(tf), 'first');
c = tf(idx); 
```

结果：

```
>> c
c =
     3     6     5 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-20T03:12:32.820

```
a = [1, 2, 5, 7, 6, 9, 8, 3, 4, 7, 0, 6];
b = [5, 9, 6];
[r c]=find(bsxfun(@eq,a,b')');
[~,ia,~]=unique(c,'first');
>> r(ia)

ans =

     3
     6
     5 
```

`6`注意：我在末尾添加了一个额外的内容，`a`以演示仅查找每个值的第一次出现。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-09T18:52:08.860

你可以试试这个：

```
[c,ind_a] = intersect(a,b) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T03:38:44.167

你试过`ismember`吗？

```
c_logical_mask = ismember(a, b); 
```

或者

```
c_indexes = find(ismember(a, b)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-01T15:24:04.030

```
a = [1, 2, 5, 7, 6, 9, 8, 3, 4, 7, 0];
b = [5, 9, 6];
c = dsearchn(a',b'); 
```

Matlab 要求 a 和 b 需要是列向量，因此是转置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-24T10:20:11.627

类似于[@tmpearce 的答案](https://stackoverflow.com/a/11572328/2586922)，但可能更快：

```
[valid, result] = max(bsxfun(@eq, a(:), b(:).')); %'// max finds first occurrence
result = result(valid); %// this is necessary in case some value of b is not in a 
```

# php - 检查是否在 PHP 中从 serialize() jquery 中单击了按钮

> ID：11572035
> 
> 赞同：1
> 
> 时间：2012-07-20T02:28:25.380
> 
> 标签：php, javascript, jquery

我正在构建一个表单，以允许某人通过 Web GUI 更改按钮的颜色，以在网页上使用。它设置为通过 ajax 和 jquery 提交更改，以便在用户单击保存提交按钮之前进行预览，这样他们就可以在保存更改之前确保他们喜欢这些更改。

我知道 .serialize() 不会发送按钮单击的值，甚至不会告诉您单击了按钮。我已经用谷歌搜索并搜索了 stackoverflow，但我无法让任何解决方案适用于我的设置。

**PHP 脚本如何判断是否单击了保存按钮？**

HTML：

```
<div id="preview"></div>

<form id="build_form" class="build_form" action="button_preview.php" method="post">
    <input name="color" type="radio" value="red" /> red
    <input name="color" type="radio" value="blue" /> blue
    <input name="save" type="submit" value="Save" class="button" />
</form> 
```

Javascript：

```
<script type="text/javascript">
$(document).ready(function() {
    $(function() {
        $(".build_form").change(function() {
            $("form").submit();
        });
    });

    $('#build_form').submit(function() {
        $.ajax({
            data: $(this).serialize(),
            type: $(this).attr('method'),
            url: $(this).attr('action'), 
            success: function(response) {
                $('#preview').html(response);
            }
        });
        return false;
    });
});
</script> 
```

PHP：

```
<?php
    print_r($_POST);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:41:11.287

调用`.submit()`表单然后处理提交事件以停止默认提交并执行 Ajax 调用似乎过于复杂，即使它会停止保存按钮的工作。为什么不直接在更改事件中执行 Ajax 预览部分并通过保存按钮（已经是提交按钮）让提交自然发生？完全删除提交处理程序。

```
$(function() {
    $("#build_form").change(function() {
        $.ajax({
            data: $(this).serialize(),
            type: $(this).attr('method'),
            url: $(this).attr('action'), 
            success: function(response) {
                $('#preview').html(response);
            }
        });
    });
}); 
```

单击 Save 按钮时，请求将包含一个`save`带有 value的参数`Save`，因此您可以在 PHP 中对此进行测试。当通过 Ajax 发出请求时，`save`不会提交参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:33:48.143

添加一个隐藏的输入，当您更改颜色值时会更新，这将具有`serialize()`能够

***编辑*** 我明白我没有解决您的问题，为什么不在`onclick`您的按钮上添加一个单击时调用该功能的按钮？

# c++ - 二叉搜索树中的插入错误

> ID：11572041
> 
> 赞同：1
> 
> 时间：2012-07-20T02:29:10.977
> 
> 标签：c++, recursion, binary-search-tree

```
void BST::insert(string word)
{
   insert(buildWord(word),root);
}
  //Above is the gateway insertion function that calls the function below
  //in order to build the Node, then passes the Node into the insert function
  //below that

Node* BST::buildWord(string word)
{
   Node* newWord = new Node;
   newWord->left = NULL;
   newWord->right = NULL;
   newWord->word = normalizeString(word);

   return newWord;
}
   //The normalizeString() returns a lowercase string, no problems there

void BST::insert(Node* newWord,Node* wordPntr)
{
  if(wordPntr == NULL)
  {
  cout << "wordPntr is NULL" << endl;
  wordPntr = newWord;
  cout << wordPntr->word << endl;
  }
  else if(newWord->word.compare(wordPntr->word) < 0)
  {
     cout << "word alphabetized before" << endl;
     insert(newWord,wordPntr->left);
  }
  else if(newWord->word.compare(wordPntr->word) > 0)
  {
     cout << "word alphabetized after" << endl;
     insert(newWord, wordPntr->right);
  }
  else
  {
     delete newWord;
  }
} 
```

所以我的问题是这样的：我在外部调用网关 insert()（数据流入也没有问题），每次它告诉我根或初始 Node* 为 NULL。但这应该只是在第一次插入之前的情况。每次调用该函数时，它都会将 newWord 粘贴在根部。澄清一下：这些函数是 BST 类的一部分，root 是 Node* 和 BST.h 的私有成员

这可能很明显，我只是盯着太久了。任何帮助，将不胜感激。此外，这是一个学校分配的项目。

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:32:00.087

赋值`wordPntr = newWord;`是`insert`函数本地的，在这种情况下它应该以某种方式设置树的根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:48:17.040

就像 user946850 说的，这个变量`wordPntr`是一个局部变量，如果你把它改成指向别的东西，它就不会反映在调用函数中。

有两种方法可以解决这个问题：

1.  旧的 C 方式，通过使用指向指针的指针：

    ```
    void BST::insert(Node *newWord, Node **wordPntr)
    {
        // ...
        *wordPntr = newWord;
        // ...
    } 
    ```

    你这样称呼它：

    ```
    some_object.insert(newWord, &rootPntr); 
    ```

2.  使用 C++ 参考：

    ```
    void BST::insert(Node *newWord, Node *&wordPntr)
    {
        // Nothing here or in the caller changes
        // ...
    } 
    ```

为了帮助您更好地理解这一点，我建议您阅读有关变量范围和生命周期的更多信息。

# java - 将数组列表添加到 Jlist

> ID：11572051
> 
> 赞同：2
> 
> 时间：2012-07-20T02:30:43.910
> 
> 标签：java, swing, user-interface, jlist, serversocket

我的方法接收数组列表中有一个数组列表，我想将它添加到 JList 中。我怎样才能做到这一点？

```
import java.awt.Dimension;
import java.awt.Scrollbar;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class GUI implements Runnable {

private Server server;
private JFrame frame = new JFrame();
private JTextField jtf = new JTextField();
private JList jl = new JList();
private JTextArea jl1 = new JTextArea();
private JScrollPane pane = new JScrollPane(jl);
private Socket socket;
private DataInputStream dis;
private ObjectInputStream ois = null;
private DataOutputStream dos;

public GUI() {

    socket = new Socket();
    InetSocketAddress ipPort = new InetSocketAddress("127.0.0.1", 4444);
    try {
        socket.connect(ipPort);
        dis = new DataInputStream(socket.getInputStream());
        dos = new DataOutputStream(socket.getOutputStream());
    } catch (Exception e) {
    }
    new Thread(this).start();

    frame.getContentPane().setLayout(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(50, 300, 420, 400);
    frame.setResizable(false);
    frame.setVisible(true);
    pane.add(jl);
    pane.add(jl1);
    jl1.setEditable(false);
    jtf.setBounds(50, 40, 150, 40);
    jl.setBounds(50, 90, 150, 200);
    jl1.setBounds(210, 90, 150, 200);

    jtf.addKeyListener(new KeyListener() {

        public void keyTyped(KeyEvent e) {
        }

        public void keyPressed(KeyEvent e) {
        }

        public void keyReleased(KeyEvent e) {
            if (dos != null) {
                if(jtf.getText().length() >0){
                try {
                    dos.writeUTF(jtf.getText());
                } catch (IOException ex) {
                    Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
                }
                }else{
                    jl1.setText("");
                }
            }

        }
    });
    frame.add(jtf);
    frame.add(jl);
    frame.add(jl1);

    frame.add(pane);
}

public void run() {
    String fromServer;
    try {
        while ((fromServer = dis.readUTF()) != null) {
            if (fromServer.equals("read")) {
                receiveArrayList();
            }
        }
    } catch (Exception e) {

    }
} 
```

这是我的方法，如您所见，我尝试使用 append 显然无法将 arraylist 添加到 JList

```
public void receiveArrayList() {

    try {
        jl1.setText("");
        ois = new ObjectInputStream(socket.getInputStream());
        @SuppressWarnings("unchecked")
        ArrayList<String> a = (ArrayList<String>) (ois.readObject());
        for (int i = 0; i < a.size(); i++) {
            jl.append(a.get(i) + " \n");
        }
        dis = new DataInputStream(socket.getInputStream());
    } catch (ClassNotFoundException ex) {
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println(ex);
    }
}

public static void main(String[] args) {
    GUI g = new GUI();

}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T02:38:39.463

最简单的是创建一个 DefaultListModel 对象，在 for 或 foreach 循环中遍历 ArrayList 并通过其`addElement(...)`方法将项目添加到模型中。然后将 JList 的模型设置为您的模型。

更多涉及但令人满意的是通过使用您的 ArrayList 作为模型的核心扩展 AbstractListModel 来创建您自己的 ListModel。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T02:43:46.793

您需要使用 JList 的[列表模型](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListModel.html)。最简单的解决方案是使用[DefaultListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html)，但您可以自己研究实现（基于[AbstractListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractListModel.html)）

如果您不想在收到数组列表时保留任何以前的内容，您可以执行以下操作：

```
public void receiveArrayList() {

    try {

        DefaultListModel model = new DefaultListModel();
        jl1.setText("");
        ois = new ObjectInputStream(socket.getInputStream());
        @SuppressWarnings("unchecked")
        ArrayList<String> a = (ArrayList<String>) (ois.readObject());
        for (int i = 0; i < a.size(); i++) {
            model.addElement(a.get(i)); // <-- Add item to model
        }
        dis = new DataInputStream(socket.getInputStream());

        jl.setModel(model); // <-- Set the model to make it visible

    } catch (ClassNotFoundException ex) {
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println(ex);
    }
} 
```

如果要保留之前的列表，则需要确保原始模型是（在此示例中）或与您正在使用`DefaultListModel`的兼容。`ListModel`

基本上，然后您要转换模型：

您可能想查看本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)以获取更多信息。DefaultListModel 模型 = jl.getModel();

显然，您不需要在最后重新应用它；）

# javascript - 快速 JavaScript 查找页面上的 URL 并将它们变成链接

> ID：11572053
> 
> 赞同：-1
> 
> 时间：2012-07-20T02:30:51.797
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何用链接替换纯 URL？](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)

所以我有一个包含一堆 URL 而没有链接的页面。该页面不断引入新信息，因此我无法自己添加标签。我在哪里可以找到一个快速、轻量级的 JavaScript 片段或 jQuery 插件来链接这些 URL？

转动`http://blahblah.com/`

进入`<a href="http://blahblah.com/">http://blahblah.com/</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:59:08.213

使用 JQuery：
假设您的链接在 p 中（为了提高性能，请使用最接近的选择器）

```
$(document).ready(function(){
    $('p').each(function(){
        var content = $(this).html();
        content = content.replace(/[^"=](http:\/\/\S*)/ig, '<a href="$1">$1</a>');
        $(this).html(content);
    });
});​ 
```

当然不是最优化的方式，并且正则表达式的格式不是很好，但至少它不会替换标签属性中的 URL（如图像 src）。

# php - 将数组传递给函数php

> ID：11572054
> 
> 赞同：-1
> 
> 时间：2012-07-20T02:31:22.713
> 
> 标签：php, arrays, forms, argument-passing

我正在使用 var_export 从 html 表单中获取信息。

```
$info = var_export($_POST);

echo '<pre>';
$info;
echo '</pre>'; 
```

当我打印出 $info 的内容时，这是输出：

数组（'name' => 'a', 'address' => 'b', 'city' => 'c', 'state' => 'd', 'zip' => '1', 'phone' => '2', '打开' => '3', '关闭' => '4', )

这是正确的，但是当我将该变量传递给函数时：

```
validate($info);
function validate($data){
    echo "Hello";
    echo '<pre>';
    $data;
    echo '</pre>';
} 
```

并尝试再次打印内容它不打印任何内容。我知道它正在进入函数，因为“Hello”被打印出来了。这里发生了什么？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:33:03.040

尝试这个：

```
function validate($data){
  echo "Hello";
  echo '<pre>';
  print_r($data);
  echo '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T02:33:29.870

```
$data; 
```

什么都不做。

尝试`print_r($data);`或为单个数组元素`echo $data['name'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T02:33:10.750

首先，只是将变量放在那里不会输出它（据我所知）。 `echo`它也不起作用，因为它只会输出 type `Array`。你会想要使用[`var_dump()`](http://php.net/manual/en/function.var-dump.php)或者[`print_r()`](http://php.net/manual/en/function.print-r.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T02:38:36.887

另一个解决方案：

```
validate($info);
function validate($data){
    echo "Hello";
    echo '<pre>';

    // Start capturing output
    ob_start();

    // var_dump() outputs the string.
    var_dump( $data );

    // print out everything captured since last call to ob_start()
    echo ob_get_clean();

    echo '</pre>';
} 
```

ob_start() 开始捕获任何输出。ob_get_clean() 将任何输出转储到字符串。这样做将准确打印出您在执行 var_dump($data) 时看到的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T02:41:56.783

`var_export`结合了将数组转换为字符串并打印数据的功能。您不能通过将变量放在脚本中来打印数据（或“回显”）它，就像您对您的`$info;`行所做的那样。

如果要按原样查看数组的内容，请`print_r($array)`按前面所述使用。如果要查看使用 创建的字符串`var_export()`，请使用`echo $data;`。

`print_r($data);`不会像你所说的那样工作，因为你的情况`$data`不是数组而是字符串。

这是我要做的：

```
function validate($data){
    echo "Hello!";
    echo "<pre>";
    print_r($data);
    echo "</pre>";
}

validate($_POST); // since you actually must call the function after it's been declared 
```

# iphone - touchesMoved 检测无法正常工作

> ID：11572057
> 
> 赞同：0
> 
> 时间：2012-07-20T02:31:45.710
> 
> 标签：iphone, objective-c, animation

在我的应用程序中，我使用 touchesMoved 方法来检测向左/向右滑动。当用户连续左右滑动时，图像动画会自动更新。我能够检测到滑动动作，但有时当我开始连续左右滑动时，屏幕不会检测到 touchmoved 事件。

在滑动区域中，我放置了一个隐藏按钮和几个用于动画的 ImageView。我想知道为什么会这样。请帮助我。

谢谢你。

代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesMoved:touches withEvent:event];

    UITouch *touch = [touches anyObject];   
    CGPoint newLocation = [touch locationInView:self.view];
    CGPoint oldLocation = [touch previousLocationInView:self.view];

    if(newLocation.x-oldLocation.x>0){
        swipe_direction = 1;
        //NSLog(@"left");
    }
    else{
        swipe_direction = 2;
        //NSLog(@"right");

    }

    if(swipe_direction == 1){
        //animate images
    }
    else if(swipe_direction == 2){
        //animate images
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:31:41.557

`touchesMoved`仅检测视图的空白部分。因此，它不会检测到您使用的对象。

在视图上放置一个 SwipeGestureRecognizer 并从那里使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:47:15.937

您是否考虑过使用 SwipeGestureRecognizer 而不是 touchesMoved？

检查[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)

# javascript - box2dweb 初学者：无法模拟通过单击画布添加的夹具

> ID：11572060
> 
> 赞同：2
> 
> 时间：2012-07-20T02:32:11.387
> 
> 标签：javascript, box2d

我刚开始玩box2dweb，现在遇到了一个让我难过的问题。

我有一个带有“地面”静态夹具的基本模拟和一些代码，允许我在单击它的位置向画布添加形状（现在只是圆形）。

我的代码可以根据需要向画布添加尽可能多的圆圈并将它们绘制在画布上。

然后我有一个按钮，通过进入步进循环开始模拟。我希望当我单击按钮时，圆圈会落到“地面”并最终停止，从而结束模拟。

问题是，一旦我开始模拟，下一帧就会完全移除场景中的所有固定装置。但是，如果我从场景中的一个圆圈开始（不是通过单击添加，而是通过创建世界和地面的初始化函数添加），然后我开始模拟，它会按预期运行：圆圈以某种速度下降并且停在“地面”上。

我正在使用相同的函数`addCircle()`在场景初始化或单击画布时添加圆圈，所以看起来该代码很好。

```
// this function is called by the canvas onclick
function addShape(e) {
    var shape = $('input:radio[name=shape]:checked').val();
    var offset = $("#c").offset();

    if (shape == "circle") {
        addCircle((e.pageX - offset.left) / SCALE,
                  (e.pageY - offset.top) / SCALE,
                  $("#dimen").val());
    }
    gWorld.DrawDebugData();
}

// same function is used by the above handler and also to set up a circle
// in the initial scene, however when added via click, the simulation
// breaks (all objects disappear in the next frame)
function addCircle(x, y, r) {
    var fixDef = new b2FixtureDef;
    fixDef.density = 1.0;
    fixDef.friction = 0.5;
    fixDef.restitution = 0.2;

    var bodyDef = new b2BodyDef;
    bodyDef.type = b2Body.b2_dynamicBody;
    bodyDef.position.x = x;
    bodyDef.position.y = y;

    fixDef.shape = new b2CircleShape(r);
    gWorld.CreateBody(bodyDef).CreateFixture(fixDef);
}

// called when a button to start the simulation is clicked
function startSimulation() {
    gWorld.SetGravity(new b2Vec2(0, parseInt($("#gravity").val())));
    gStopped = false;
    requestAnimFrame(update);
}

// this is the main step loop
function update() {
    if (!gStopped) {

    gWorld.Step(
           1 / 60   //frame-rate
        ,  10       //velocity iterations
        ,  10       //position iterations
    );

    gWorld.DrawDebugData();
    gWorld.ClearForces();

    var keepGoing = true;
    for (var b = gWorld.GetBodyList(); keepGoing && b; b = b.m_next) {
        if (! b.IsAwake()) {
            keepGoing = false;
        }
    }
    if (keepGoing) {
        requestAnimFrame(update);
    }
}

function init() {
    gWorld = new b2World(
        new b2Vec2(0, parseInt($("#gravity").val())),
        true);

    var fixDef = new b2FixtureDef;
    fixDef.density = 1.0;
    fixDef.friction = 0.5;
    fixDef.restitution = 0.2;

    //create ground
    var bodyDef = new b2BodyDef;
    bodyDef.type = b2Body.b2_staticBody;
    bodyDef.position.x = $("#c").width() / 2 / SCALE;
    bodyDef.position.y = $("#c").height() / SCALE;

    fixDef.shape = new b2PolygonShape;
    fixDef.shape.SetAsBox((600 / SCALE) / 2, (10/SCALE) / 2);
    gWorld.CreateBody(bodyDef).CreateFixture(fixDef);

    //setup debug draw
    var debugDraw = new b2DebugDraw();
    debugDraw.SetSprite(document.getElementById("c").getContext("2d"));
    debugDraw.SetDrawScale(SCALE);
    debugDraw.SetFillAlpha(0.3);
    debugDraw.SetLineThickness(1.0);
    debugDraw.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit);
    gWorld.SetDebugDraw(debugDraw);

    // this circle is simulated correctly
    addCircle(1,1,1);

    gWorld.DrawDebugData();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:44:33.860

我发现问题出在这样的行中：

```
$("#dimen").val() 
```

当我将其更改为以下内容时，模拟开始正常运行：

```
parseFloat($("#dimen").val()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:43:04.200

Box2DWeb 严重缺乏文档，一直让我头疼。想出了一些基本的工作流程，在这里[http://box2dinabox.blogspot.in/](http://box2dinabox.blogspot.in/)写了博客。希望你会发现它有用:)

# c# - NotSupportedException 在 LINQ 和 EntityFramework 中使用 ToList()

> ID：11572064
> 
> 赞同：4
> 
> 时间：2012-07-20T02:32:34.210
> 
> 标签：c#, .net, linq, entity-framework

我有一个看起来像这样的查询：

```
 var q = from x in db.Table1
                where x.Timestamp.CompareTo(fromDate) >= 0
                   && x.Timestamp.CompareTo(toDate) < 0
                select x;

    var q_list = q.ToList(); // this works fine
    var g = q.Where(z=> z.Table2.Equals(ns));  // ns is instance of Table2 not Table1
    var g_list = g.ToList(); // this throws exception 
```

例外：

**

```
System.NotSupportedException was unhandled
  Message=Unable to create a constant value of type ... 
```

我有很多这样的功能，我不想重复查询，我需要使用 Where，GroupBy ...etc 和其他功能。

完整的异常跟踪：

**

```
System.NotSupportedException was unhandled
  Message=Unable to create a constant value of type 'DataAccessLayer.Model.Table2\. Only primitive types ('such as Int32, String, and Guid') are supported in this context.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.EqualsTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
       at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
       at System.Data.Objects.ELinq.ExpressionConverter.Convert()
       at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
       at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) 
```

**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T02:46:42.717

问题是 EntityFramework 不理解非原始类型。你需要做的是：

```
var g = q.Where(z => z.field.Id.Equals(ns.Id)); 
```

请记住，如果您有自定义实现`Equals`，则无法将其转换为正确的 t-sql。如果您无论如何都想执行该实现，则需要在内存中执行它：

```
// note it's using q_list instead of q
var g = q_list.Where(z => z.field.Equals(ns)); 
```

# c# - 关于 C# 中的工具条状态

> ID：11572066
> 
> 赞同：0
> 
> 时间：2012-07-20T02:32:50.680
> 
> 标签：c#

我正在尝试在 2 秒内将工具条状态中的文本从一条消息更改为另一条消息。为什么我不能像下面那样做？

```
toolStripStatusLabel1.Text = "Cool";
Thread.Sleep(2000);
toolStripStatusLabel1.Text = "Status: IP Address update complete"; 
```

我试过了，但它只显示第二条消息。为什么它在 2 秒内不显示第一条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:50:12.333

```
Application.DoEvents() 
```

而不仅仅是睡觉。应用需要处理触发和等待的刷新/绘制/绘制事件。

# php - Zend Ajax 无法删除

> ID：11572077
> 
> 赞同：1
> 
> 时间：2012-07-20T02:34:17.720
> 
> 标签：php, javascript, jquery, ajax, zend-framework

我有一个名为`state`columns的表`state_id`，`state_name`. 目前我可以添加新状态并编辑它们，但我不能删除状态。我的代码可能有什么问题？

```
{title:"Actions",template:'<a class="left" onclick="javascript:openEditStatePopup(this);">Edit</a>' + 
    '<a class="right" onclick="javascript:deleteState(this);">Delete</a>'
    ,width:120,sortable:false} 
```

该片段是视图代码，当我单击链接时，它会执行以下 JavaScript：

```
function deleteState(element)
{
    var countryDetail = {};
    var GriddataItem = $("#state_grid").data("kendoGrid").dataItem($(element).closest("tr"));
    countryDetail.state_id =GriddataItem.state_id;
    countryDetail.state_name = GriddataItem.state_name;
    // alert(countryDetail.state_id);
    $.ajax({
        url:"<?= $this->baseUrl('admin/state/delete')?>",
        data: {state_id :  countryDetail.state_id},
        dataType: "json",
        type: "POST",
        success: function(){
            alert('success');
        },
        failure:function(){
            alert('not working');
        }
    });
} 
```

当我在通话`alert(countryDetail.state_id)`前回显`$.ajax`时，我可以获得正确的状态 ID。

我的删除控制器是：

```
public function deleteAction()
{

    $state = $this->_request->_getPost('state_id');
    $stateMapper = new Application_Model_Mapper_StateMapper();
    $stateMapper->delete($state);
} 
```

删除的模型映射器是：

```
public function delete(Application_Model_State $state)
{
    $data = $state->toArray();
    $adapter = $this->getDbTable()->getAdapter()->delete(array('state_id=?'=>$data['state_id']));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:52:05.427

在您的控制器操作中`deleteAction()`，您将获得 POST 参数 'state_id'

```
$state = $this->_request->_getPost('state_id');
$stateMapper = new Application_Model_Mapper_StateMapper();
$stateMapper->delete($state); 
```

`$state`你在`$stateMapper->delete($state);`函数中传递它

在您的模型类函数`public function delete(Application_Model_State $state)`定义中，您传递的不是状态模型对象和状态 ID，因此您应该将其更改为

```
public function delete($state_id)
{
    $adapter = $this->getDbTable()->getAdapter()->delete(array('state_id=?'=>$state_id));

} 
```

然后它应该工作......

另一件事我没见过

```
failure:function(){
      alert('not working');
} 
```

而是

```
error:function(){
    alert('not working');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:18:36.040

你好，你需要写`deleteAction`如下

```
public function deleteAction()
{

    $state = $this->_getParam('state_id');
    $stateMapper = new Application_Model_Mapper_StateMapper();
    $stateId = $stateMapper->delete($state);
    $this->_helper->json(array('success'=>1));
} 
```

# c# - 如何在 C# 中将主题应用于 WindowsForm？

> ID：11572078
> 
> 赞同：1
> 
> 时间：2012-07-20T02:34:26.677
> 
> 标签：c#, winforms, controls, themes, skin

这个问题在我脑海里已经太久了。这家伙如何制作一个没有“.dll”文件或类似文件的自定义边框和自定义控件的表单。它只是一个“.exe”。

**我的问题很简单：**如何对我的表单执行此操作？

![在此处输入图像描述](../Images/96e690a8faa994869b4370df0607e748.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:59:33.607

它只是一个 dll 的事实并不意味着它不依赖于第 3 方应用程序。开发人员可以将它们合并到 dll 中，您可以使用[ILMerge](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)检查是否有资源/组件合并到 dll 中，或者它是否是 WPF 应用程序，使用[其他方式](http://code.google.com/p/costura/)。

除了使用 3rd 方控件或使用 GDI+ 自定义绘制表单/控件之外，WinForm 控件中的皮肤/主题没有开箱即用的支持，操作系统支持的除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:49:31.273

不确定没有 dll 文件是什么意思，但我建议您查看在 Windows 窗体中绘制自定义边框

[http://customerborderform.codeplex.com/](http://customerborderform.codeplex.com/)

# css - CSS 类重复以增加特异性

> ID：11572081
> 
> 赞同：22
> 
> 时间：2012-07-20T02:34:44.760
> 
> 标签：css, css-selectors, css-specificity

根据 CSS 文档： [http ://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)

特异性由（除其他外）选择器中属性和伪类的数量定义。

所以，我的问题是，是否可以通过一遍又一遍地重复相同的类名来增加特异性？

例如：

将

```
.qtxt.qtxt.qtxt.qtxt.qtxt
{
} 
```

具有更高的特异性

```
.qtxt.lalgn
{
} 
```

或者

```
.lalgn .qtxt//(space added to create child selector)
{
} 
```

?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T14:11:25.433

是的，这是可能的，也是有意的。虽然 CSS2 规范中没有提到这一点，但[Selectors 3 规范](http://www.w3.org/TR/css3-selectors/#specificity)中明确提到了这一点：

> **注意：**同一简单选择器的重复出现*[原文如此]*是允许的，并且确实增加了特异性。

因此浏览器在遇到重复的简单选择器时*必须*增加特异性，只要选择器有效且适用。这不仅适用于重复的类，也适用于重复的 ID、属性和伪类。

给定您的代码，`.qtxt.qtxt.qtxt.qtxt.qtxt`将具有最高的特异性。其他两个选择器同样具体；组合器根本与特异性计算无关：

```
/* 5 classes -> specificity = 0-5-0 */
.qtxt.qtxt.qtxt.qtxt.qtxt

/* 2 classes -> specificity = 0-2-0 */
.qtxt.lalgn

/* 2 classes -> specificity = 0-2-0 */
.lalgn .qtxt 
```

此外，最后一个选择器中的空格是*后代*组合器；子组合器*是*`>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:26:00.120

`.qtxt.qtxt.qtxt`将具有最高的特异性...

[http://jsfiddle.net/nXBTp/1/](http://jsfiddle.net/nXBTp/1/)

但是，仅当您将类名重复次数多于任何其他选择器时，才会出现这种情况，例如：

[http://jsfiddle.net/nXBTp/2/](http://jsfiddle.net/nXBTp/2/)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-20T02:38:23.473

您不需要像这样破解特异性......如果您需要强制一个值，请使用`!important`.

# java - 直接 Java 和 Grails 之间的反射区别

> ID：11572084
> 
> 赞同：1
> 
> 时间：2012-07-20T02:34:55.100
> 
> 标签：java, grails, reflection, soap

我正在使用我公司内部开发的一组 API 与组织中的一些常见中心服务进行通信。API 可以通过运行时配置动态配置，以根据系统需要使用多种传输协议。

内部 API 的集合与 IBM WebService thinclient.jar 耦合，以配置和调用所有必要的 Web 服务。我让独立原型顺利运行，但需要将该功能集成到 Grails 中正在开发的其他几个服务中。

这就是事情分崩离析的地方。在我编写的代码中，我们只是调用一个工厂方法并使用它来获取客户端会话，然后继续执行我们的业务逻辑。简单的。使用调试器并深入研究 API`getClient()`调用，我可以看到它获得了通用传输配置，然后将其绑定到 SOAP 传输配置。从这里开始，路径会有所不同，无论是纯独立 Java 服务还是在 Grails 应用程序中运行的服务。

*   在纯 Java 独立版中，这将绑定到 `com.ibm.ws.webservice.engine.client.Service`调用 `initService()`方法并且事情按预期工作的地方。

*   在 Grails 应用程序中，包含相同的 Java 代码，在代码调用的相同位置， `com.springsource.loaded.ri.ReflectiveIntercepter`然后在 spring-loaded API 中反复多次后，它最终抛出 java.lang.reflect.InvocationTargetException。

有没有人有关于如何让 Grails 中的反射行为与直接 Java 中相同的任何提示或想法？

我已经尝试了很多变化来达到这一点，我已经接近了我的绳索的尽头。理想情况下，管理我们的业务逻辑的 Grails 服务和与这些内部系统对话的 Java 代码一起管理是最容易的，所以我更愿意让所有东西（Grails 和我的 Java 服务代码）一起工作。我曾短暂尝试为我的服务代码及其所有依赖项构建一个独立的 JAR，但在尝试在 Grails 中使用它时出现了链式依赖项冲突。我的最后一个选择是将我的 Java 服务与 Grails 服务中的业务逻辑分开，只从 Grails 服务调用 Java 服务。这不太理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:58:01.093

*当您偶然发现答案时，这很容易...... ;-)*

如果我在 IDEA 中将运行配置设置为使用`-noreloading`选项，Grails 服务将按预期运行。

```
grails -noreloading run-app 
```

这会阻止 Grails/IDEA 留在钩子中以动态重新加载类。

关于这是否是 Grails 或 SpringSource Loader 类中的错误有什么想法吗？

# javascript - Vimeo JavaScript API 将事件监听器添加到页面上的所有 iframe

> ID：11572086
> 
> 赞同：3
> 
> 时间：2012-07-20T02:35:14.457
> 
> 标签：javascript, jquery, events, vimeo, froogaloop

一直在玩弄 Vimeo 的 JavaScript API [Froogaloop](https://github.com/vimeo/player-api/tree/master/javascript)，并试图向当前正在播放的 Vimeo iFrame 添加一个类。使用 API 的事件似乎很简单，但我似乎无法理解它。这是我到目前为止所得到的：

下面的代码是[他们示例](http://developer.vimeo.com/player/js-api)的简化版本。虽然它没有在我的控制台中引起任何错误，但我没有得到任何日志（因此没有得到类）。我错过了什么吗？

谢谢你的帮助！

```
var iframe = $('article.video iframe')[0],
    player = $f(iframe);

player.addEvent('ready', function() {
    player.addEvent('play', on);
    player.addEvent('pause', off);
    player.addEvent('finish', off);
});

function on(id) {
    console.log('playing');
    player.addClass('playing');
}
function off(id) {
    console.log('not playing');
    player.removeClass('playing');
} 
```

更新

* * *

这个问题肯定与变量有关。`Player`告诉 Froogaloop 使用哪个 iframe，`iframe`识别哪个 html 对象。所以我想问题是我如何识别页面上的所有 iframe，然后在激活一个 iframe 时为 Froogaloop 提供适当的 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:17:49.600

是的，正如我所见，在 on() 和 off() 函数中，Froogaloop 通过参数为您提供 iframe 的 ID。因此，在这种情况下，您应该像这样添加和删除类：

```
$('#'+id).addClass('playing');

$('#'+id).removeClass('playing'); 
```

在您的 HTML 中，您应该为每个 iframe 标签提供一个 id="videoX"，并在 iframe 的 src 属性的 url 地址末尾添加 &player_id=videoX。

# javascript - JavaScript 对象检测

> ID：11572087
> 
> 赞同：1
> 
> 时间：2012-07-20T02:36:05.940
> 
> 标签：javascript, oop, prototype-programming, object-detection

我目前正在练习 javascript，目前在对象检测方面遇到了麻烦。我想创建一个对象并检测它是否存在。下面是我目前正在使用的一些示例代码。

下面的代码示例是我创建对象的方式。

```
var obj = obj || {}; 
```

我应该使用这个吗？

```
if (typeof obj !== "undefined") {
   // code
} 
```

或这个？

```
if (obj !== null) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:40:24.987

该值`undefined`意味着该变量尚未被赋值。该值`null`表示已为其分配了值`null`。运算符（`===`及其否定，`!==`）防止[类型强制](http://webreflection.blogspot.com/2010/10/javascript-coercion-demystified.html)。

哪个是对的？这完全取决于您要完成的工作。两者`undefined`和`null`都是“假”值，这意味着每个值都`false`在布尔上下文中计算（如`false`,`0`和空字符串）。

请注意，如果`obj`是`null`，`typeof obj`则*不是* `"undefined"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:40:53.577

通常的做法是使用：

```
var obj = obj || {}; 
```

当该代码运行时，您可以确定它`obj`已经被定义（因为`var`声明），尽管它可能没有被分配一个值。

如果 的值`obj`解析为“假”值，那么您将分配一个对新对象的引用。

可能的结果是：

1.  如果`obj`尚未分配值，则分配新的对象引用。

2.  如果`obj`之前已经分配了一个“假”值，它将被一个新的对象引用替换（这可能会与分配给它假值的任何代码混淆）。

3.  如果`obj`之前已经分配了一个“真实的”原始值，则以下属性分配`obj`将引发错误并且脚本执行将停止。

4.  如果`obj`已经是对 以外的对象的引用`null`，则随后的属性分配将指向该对象。根据对象的类型，事情可能没问题。或不。据推测，您无法控制的某些东西创建了该对象，因此可能会在您不知情的情况下修改或破坏它。你会怎么做？

一般来说，在 JavaScript 中不可能处理情况 2 和 3，或者不是您要处理的情况 4 `obj`。因此，请使用一个不太可能与任何其他名称发生冲突的名称，并希望您获得 #1 或 #4 并且一切顺利。

顺便说一句，在你之后添加的代码仍然可能（或多或少）导致#4，即使你在代码执行时有#1。

测试没有额外的好处，例如：

```
if (typeof obj == 'undefined') 
```

因为结果本质上是一样的。

# iphone - 核心数据问题 - 检查项目是否存在

> ID：11572096
> 
> 赞同：3
> 
> 时间：2012-07-20T02:37:30.540
> 
> 标签：iphone, objective-c, ios, cocoa, core-data

我正在处理来自 NSScreenCast 的代码示例，该示例处理导入到核心数据应用程序（[链接](https://github.com/nsscreencast/012-importing-into-core-data)）。我有大部分工作的例子。我可以按下刷新按钮，它解析 json 并将其导入数据库。但是，每次我按下刷新按钮时，它都会重新添加相同的数据。我已将其追溯到以下代码。

```
+ (Brewery *)breweryWithServerId:(NSInteger)serverId usingManagedObjectContext:(NSManagedObjectContext *)moc {
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:[Brewery entityName]];

[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"serverId = %d", serverId]];
[fetchRequest setFetchLimit:1];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:fetchRequest error:&error];
NSLog(@"results: %@", results);
if (error) {
    NSLog(@"ERROR: %@ %@", [error localizedDescription], [error userInfo]);
    exit(1);
}

if ([results count] == 0) {
    return nil;
}
NSLog(@"results objectAtIndex:0 = %@", [results objectAtIndex:0]);

return [results objectAtIndex:0];
} 
```

这种方法会发生什么是它尝试查看该项目是否已存在于数据库中。如果此调用返回 nil，则 MasterViewController 中的代码将其再次添加到数据库中。我已经进行了一些调试，并且 serverId 确实通过了。此外， fetchrequest 似乎是有效的（无法确定调试它）。如您所见，我为结果放置了一个 NSLog，但它返回一个空结果。因此，如果结果计数为 0，则返回 nil。因此我的问题。我没有看到这个问题可能成为问题的任何其他地方。有什么想法吗？

迈克·莱利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:57:02.653

我刚刚修改了你的方法，你可以试试：

```
+ (Brewery *)breweryWithServerId:(NSInteger)serverId usingManagedObjectContext:(NSManagedObjectContext *)moc {
  NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:[Brewery entityName]];
  [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"serverId == %d", serverId]];
  [fetchRequest setFetchLimit:1];

  NSError *error = nil;

  // if there's no object fetched, return nil
  if ([managedObjectContext countForFetchRequest:fetchRequest error:&error] == 0) {
    NSLog(@"!!!WARN: NO Object Matches.");
    return nil;
  }

  // fetch your object
  Brewery *result = [[moc executeFetchRequest:fetchRequest error:&error] lastObject];
  if (error != nil) {
    NSLog(@"ERROR: %@ %@", [error localizedDescription], [error userInfo]);
    return nil;
  }

  NSLog(@"results objectAtIndex:0 = %@", result);
  return result;
} 
```

注意：`-countForFetchRequest:error:`效率更高，因为它只“返回给定获取请求将返回的对象数量”。您可以使用此方法检查是否有匹配的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:44:29.060

您正在尝试将标量值 ( ) 与谓词中`NSInteger`的对象值 ( ) 进行比较。`NSNumber`

尝试：

```
[NSPredicate predicateWithFormat:@"serverId = %@", [NSNumber numberWithInteger:serverId]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:57:15.747

我认为你的谓词有问题。它应该是：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"serverId == %d", serverId]]; 
```

你错过了双等号....

发现没关系。您应该检查以确保您`moc`的不是零。你确定你正确地传递它吗？

# image - 图像缓存在浏览器中的工作原理

> ID：11572098
> 
> 赞同：1
> 
> 时间：2012-07-20T02:37:46.050
> 
> 标签：image, caching, seo

如何让浏览器缓存我的图像并在特定时间段后过期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:59:11.880

您可以使用多个 HTTP 标头来更改内容缓存策略。

这个：

```
Cache-control: no-cache 
```

指示浏览器根本不缓存内容。

这个：

```
Expires: Tue, 20 Mar 2024 02:00:00 GMT 
```

指示浏览器在给定时间之前使其缓存副本过期。

这个：

```
ETag: ab10be20 
```

指示浏览器将其视为`ab10be20`内容的散列，并且仅当后续请求时该值发生更改时，它才需要下载新内容。

请注意，所有这些都只是有效的建议，并且没有可能的方法来远程强制清除缓存。

# scheme - 列表长度比较

> ID：11572099
> 
> 赞同：2
> 
> 时间：2012-07-20T02:37:56.847
> 
> 标签：scheme

我想编写代码来比较两个列表的大小。我利用了长度并将其写下来。

```
(define (same-size-matrix? mtrx1 mtrx2)
   (equal? (length mtrx1) (length mtrx2))). 
```

我认为这对我有用，但我发现它只检查总长度，而不是子列表。例如，它在比较时返回 true。'((1 2 3 4) (4 5 6 6) (6 7 8 9)) 和 '(( 5 4) (3 2) (7 1))，但它应该返回 false，因为第一个有 4列表中的值和第二个只有两个，即使它们总体上具有相同的长度。我该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:01:59.827

是计划吗？

```
(define m1 `((1 2 3 4) (4 5 6 6 ) (6 7 8 9)))                                                                                                
(define m2 `((5 4) (3 2) (7 1)))                                                                                                            

(define (same-size-matrix? m1 m2) (equal? (map length m1) (map length m2)))                                                                  

(same-size-matrix? m1 m2) ; => #f
(same-size-matrix? m1 m1) ; => #t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:04:49.840

试试这个：

```
(define (same-size-matrix? mtrx1 mtrx2)
  (equal? (map length mtrx1) (map length mtrx2))) 
```

请注意，在您的解决方案中，您正在比较每个列表的总长度（矩阵中的行数），但忽略每个子列表的长度（矩阵中每一行的列数）。在我的灵魂中，首先我们计算每个子列表的长度，然后检查所有长度是否相等。例如，采用以下输入：

```
(define mtrx1 '((1 2 3 4) (4 5 6 6) (6 7 8 9)))
(define mtrx2 '((5 4) (3 2) (7 1)))
(same-size-matrix? mtrx1 mtrx2) 
```

首先`same-size-matrix?`计算这个表达式，它找到每个子列表的长度`mtrx1`。有必要检查所有长度，而不仅仅是第一个，以防我们处理锯齿状数组：

```
(map length mtrx1)
; evaluates to '(4 4 4) 
```

然后我们有这个表达式，它对 执行相同的操作`mtrx2`：

```
(map length mtrx2)
; evaluates to '(2 2 2) 
```

最后，我们比较两个长度列表（实际上是：每行的列数），返回预期的结果：

```
(equal? '(4 4 4) '(2 2 2))
> #f 
```

请注意，最后的比较还将检测列表是否具有不同的大小，以防矩阵具有不同的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:10:09.577

这里是一个简单的定义`same-size?`。

```
#lang racket

; A MATRIX is a list of ROWs.
; A ROW is a list of numbers.
; In a matrix all rows are of the same length.

(define (row-size list-of-rows)
  (length list-of-rows))

(define (column-size matrix)
  (define first-row (first matrix))
  (length first-row))

(define (same-size? matrix1 matrix2)
  (and (= (row-size matrix1) (row-size matrix2))
       (= (column-size matrix1) (column-size matrix2)))) 
```

作为奖励，这里有一个谓词，用于测试对象是否为矩阵。将其与数据定义进行比较。

```
(define (row? object)
  (and (list? object)
       (andmap number? object)))

(define (matrix? object)
  (and (list? object)
       (andmap row? object)
       (apply = (map row-size object)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:44:30.383

您需要澄清是否要检查 1）矩阵的确切形状或 2）整体“扁平”长度。

结果应该是什么`(same-size-matrix? '((1 2) (3 4) (5 6)) '((1 2 3) (4 5 6)))`？

```
1) => #f
2) => #t 
```

Óscar López 的答案是 1。

如果您的要求是 2，根据 Óscar 的回答：

```
(define (same-size-matrix? mtrx1 mtrx2)
  (equal? (apply + (map length mtrx1)) (apply + (map length mtrx2)))) 
```

# frontpage - 如何手动编辑 MS Frontpage 2003 站点参数

> ID：11572101
> 
> 赞同：0
> 
> 时间：2012-07-20T02:38:13.473
> 
> 标签：frontpage, frontpage-extensions

我正在从 Frontpage 2003 切换到 Expression Web 4，并且有很多我希望能够维护的站点参数（合并变量）。

EW 4 中似乎不支持该功能。我可以手动编辑它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:38:13.473

我找到了一个更优雅的解决方案。您可以手动编辑 FrontPage 站点参数。它们在一个文本文件中： **root\vti_pvt\service.cnf**

您可以添加其他变量并编辑那里的变量。文件结构中的格式相当清楚（例如：变量名：可以有空格的值

# kinect - 适用于 Xbox 360 和 Kinect SDK 1.5 的 Kinect

> ID：11572107
> 
> 赞同：6
> 
> 时间：2012-07-20T02:38:46.360
> 
> 标签：kinect

微软最近发布了 Kinect SDK 1.5 和一些非常简洁的相关功能，例如面部跟踪。

我有一个用于 XBox 360 和 Windows 7（驱动程序，Kinect studio）的 Kinect 传感器似乎无法识别该设备。

谁能告知这是“操作员错误”还是 SDK 1.5 确实不支持用于 XBox 传感器的 Kinect，而仅支持用于 Windows 的 Kinect（我有 USB 和电源适配器）。

谢谢你，埃德蒙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T18:59:07.377

正如 Chris Ortner 指出的，Kinect for Xbox 传感器**与**Windows 7 兼容，仅用于开发目的 - 您需要安装 SDK。

可能值得检查一下 SDK 是否已正确安装。

在设备管理器中，您应该查看它是否具有以下内容：

*   微软.Kinect
    *   Microsoft Kinect 音频阵列控制
    *   微软 Kinect 相机
    *   微软 Kinect 安全控制

和：

*   声音、视频和游戏控制器
    *   Kinect USB 音频

我已阅读建议您在安装 SDK 时不要连接传感器**。**msdn 文章[设置 kinect 传感器](http://msdn.microsoft.com/en-us/library/hh855356)也暗示了这一点。我也读过，虽然无法提供参考，但像 OpenNI 或 libfreenect 这样的东西可能会导致问题，应该在安装 SDK 之前卸载。该链接还提供了其他故障排除提示。

最后一件事要检查，确保您已插入[USB 2.0 或 USB 3.0 总线。](http://www.microsoft.com/en-us/kinectforwindows/develop/release-notes.aspx)这是硬件要求之一，我知道 KinectSensor 状态之一是[InsufficientBandwidth。](http://msdn.microsoft.com/en-us/library/microsoft.kinect.kinectstatus.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:14:52.527

SDK 支持 Kinect for Xbox360 作为开发设备，因此这可能是操作员或硬件错误。

但是请记住，必须安装 SDK 才能使 Xbox360 版本正常工作 -*不*支持在仅安装了驱动程序的机器上部署该设备。

# php - 在 MySQL 中实现 SQL INTERSECT 时嵌套级别太高

> ID：11572110
> 
> 赞同：3
> 
> 时间：2012-07-20T02:39:37.653
> 
> 标签：php, mysql, yii

我最后的作品之一是基于 Yii 的硬件目录。每个项目可以与很多组链接。

```
CREATE TABLE item_group (
id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
itemId INT(10) UNSIGNED NOT NULL,
groupId INT(10) UNSIGNED NOT NULL,
PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

只需要显示用户选择的所有 groupIds 的 itemIds。这是我的错误解决方案：

```
$groups = isset($_GET['groups']) ? array_merge(array_diff($_GET['groups'], array('0'=>'-')),array()) : array();
$sql = '';
$brackets = '';
$groupMaxKey = count($groups) - 1;
//some code here
for($i=0;$i<=$groupMaxKey;$i++){
    $sql .= "SELECT itemId FROM item_group WHERE groupId='".$groups[$i]."' ";
    if($i != $groupMaxKey){
        $sql .= "AND itemId IN (";
        $brackets .= ")";
    } else {
        $sql .= $brackets;
    }
} 
```

我发现嵌套的最大级别是 32。更多的组会出错。什么是最干净的解决方案？

在这里澄清一个查询示例：

```
SELECT itemId FROM item_group 
WHERE groupId='31' AND itemId IN (
    SELECT itemId FROM item_group 
    WHERE groupId='24' AND itemId IN (
        SELECT itemId FROM item_group 
        WHERE groupId='35'
    )
) 
```

//// 答案确实有效：

```
SELECT g1.itemId 
FROM ((((((((((((((((((((((((((((((((((((((( item_group g1 
INNER JOIN item_group g2 ON g1.itemId = g2.itemId)
INNER JOIN item_group g3 ON g1.itemId = g3.itemId)
INNER JOIN item_group g4 ON g1.itemId = g4.itemId)
INNER JOIN item_group g5 ON g1.itemId = g5.itemId)
INNER JOIN item_group g6 ON g1.itemId = g6.itemId)
INNER JOIN item_group g7 ON g1.itemId = g7.itemId)
INNER JOIN item_group g8 ON g1.itemId = g8.itemId)
INNER JOIN item_group g9 ON g1.itemId = g9.itemId)
INNER JOIN item_group g10 ON g1.itemId = g10.itemId)
INNER JOIN item_group g11 ON g1.itemId = g11.itemId)
INNER JOIN item_group g12 ON g1.itemId = g12.itemId)
INNER JOIN item_group g13 ON g1.itemId = g13.itemId)
INNER JOIN item_group g14 ON g1.itemId = g14.itemId)
INNER JOIN item_group g15 ON g1.itemId = g15.itemId)
INNER JOIN item_group g16 ON g1.itemId = g16.itemId)
INNER JOIN item_group g17 ON g1.itemId = g17.itemId)
INNER JOIN item_group g18 ON g1.itemId = g18.itemId)
INNER JOIN item_group g19 ON g1.itemId = g19.itemId)
INNER JOIN item_group g20 ON g1.itemId = g20.itemId)
INNER JOIN item_group g21 ON g1.itemId = g21.itemId)
INNER JOIN item_group g22 ON g1.itemId = g22.itemId)
INNER JOIN item_group g23 ON g1.itemId = g23.itemId)
INNER JOIN item_group g24 ON g1.itemId = g24.itemId)
INNER JOIN item_group g25 ON g1.itemId = g25.itemId)
INNER JOIN item_group g26 ON g1.itemId = g26.itemId)
INNER JOIN item_group g27 ON g1.itemId = g27.itemId)
INNER JOIN item_group g28 ON g1.itemId = g28.itemId)
INNER JOIN item_group g29 ON g1.itemId = g29.itemId)
INNER JOIN item_group g30 ON g1.itemId = g30.itemId)
INNER JOIN item_group g31 ON g1.itemId = g31.itemId)
INNER JOIN item_group g32 ON g1.itemId = g32.itemId)
INNER JOIN item_group g33 ON g1.itemId = g33.itemId)
INNER JOIN item_group g34 ON g1.itemId = g34.itemId)
INNER JOIN item_group g35 ON g1.itemId = g35.itemId)
INNER JOIN item_group g36 ON g1.itemId = g36.itemId)
INNER JOIN item_group g37 ON g1.itemId = g37.itemId)
INNER JOIN item_group g38 ON g1.itemId = g38.itemId)
INNER JOIN item_group g39 ON g1.itemId = g39.itemId)
INNER JOIN item_group g40 ON g1.itemId = g40.itemId)
WHERE g1.groupId='1' AND g2.groupId='2' AND g3.groupId='3' AND g4.groupId='4' AND g5.groupId='5' AND g6.groupId='6' AND g7.groupId='7' AND g8.groupId='8' AND g9.groupId='9' AND g10.groupId='10' AND g11.groupId='11' AND g12.groupId='12' AND g13.groupId='13' AND g14.groupId='14' AND g15.groupId='15' AND g16.groupId='16' AND g17.groupId='17' AND g18.groupId='18' AND g19.groupId='19' AND g20.groupId='20' AND g21.groupId='21' AND g22.groupId='22' AND g23.groupId='23' AND g24.groupId='24' AND g25.groupId='25' AND g26.groupId='26' AND g27.groupId='27' AND g28.groupId='28' AND g29.groupId='29' AND g30.groupId='30' AND g31.groupId='31' AND g32.groupId='32' AND g33.groupId='33' AND g34.groupId='34' AND g35.groupId='35' AND g36.groupId='36' AND g37.groupId='37' AND g38.groupId='38' AND g39.groupId='39' AND g40.groupId='40' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:29:35.043

您可以通过使用 INNER JOIN 来实现这一点。没有理由嵌套这些语句。

您的示例案例的正确查询的任何示例都是：

```
SELECT g1.itemId 
FROM (( item_group g1 
        INNER JOIN item_group g2 ON g1.itemId = g2.itemId)
        INNER JOIN item_group g3 ON g1.itemId = g3.itemId) 
WHERE g1.groupId='31' AND g2.groupId='24' AND g3.groupId='35' 
```

我已经在一个包含三列的简单表上对此进行了测试`(id, itemId, groupId)`，它可以工作。将这种语句放在循环中很容易，并且连接数没有最大值。

为了使这个运行更快，您应该索引表`itemId`中的列`item_group`。

您可以使用以下 SQL 语句执行此操作：

```
ALTER TABLE item_group ADD INDEX ( itemId ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:20:29.397

如果我正确理解了这个问题，您似乎正在尝试在不同组中找到 itemIds 的交集？

我们可以做的是计算我们正在查看的组中的所有 itemId...

```
SELECT itemId, COUNT(groupId) as CNT
FROM item_group
WHERE groupId IN (*GROUP_IDS*)
GROUP BY itemId 
```

现在，只要一个项目不能在同一个组中两次，我们就可以从这个查询中拉出那些 CNT 等于我们正在查看的组数的行......

```
SELECT * FROM (
    SELECT itemId, COUNT(groupId) as CNT
    FROM item_group
    WHERE groupId IN (*GROUP_IDS*)
    GROUP BY itemId
) as TMP WHERE CNT = *NUMBER_OF_GROUP_IDS* 
```

那应该这样做。

# ios - 为 iOS 视网膜显示器优化 Flash AIR 的编程技巧？

> ID：11572116
> 
> 赞同：5
> 
> 时间：2012-07-20T02:40:18.993
> 
> 标签：ios, actionscript-3, flash, air, retina-display

有什么办法可以针对即将到来的视网膜显示器浪潮优化现有的 SWF？或者，在创建新的 SWF 时是否需要为视网膜显示做准备？从我所见所闻，SWF 看起来很差。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T03:41:11.413

通常，您希望尽可能避免使用位图图形。如果您只使用矢量和字体，这些可以毫无问题地放大。避免杀死 CPU 的技巧是`cacheAsBitmap`在可行的情况下使用，例如，当对象不经常更改时。然后您获得矢量 grx 的分辨率优势，并在初始渲染后获得位图 grx 的速度。

另一个开始研究的工具是使用 Stage3D。这一层位于 Air 程序的后面，作为一个强大的背景。真正的优势在于它使用 GPU 而不是 CPU，这意味着您有两个处理器来踢出 grx。如果您开发或使用一致的前台和后台系统，这可以提高您的 grx 性能。Starling 2D 是一种似乎几乎准备就绪的工具。这应该有助于缩短 Stage3D 的许多困难领域。我还没有使用 Stage3D，所以很多都是推测性的。当更有经验时，我会编辑我的答案。

## 编辑

@TianzhenLin 的回复有一些不错的提示。它提醒我`CacheAsBitmapMatrix`应该用于将要旋转、缩放等但不会在结构上改变的对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T04:05:30.233

Flex 4.6 支持[MultiDPIBitmapSource](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/utils/MultiDPIBitmapSource.html)，这将提供一种方法来提供针对不同屏幕密度优化的位图。[您可以通过此链接](http://www.adobe.com/devnet/flex/articles/mobile-skinning-part2.html)阅读深入讨论。

一般来说，如果您的位图用作图标、徽标显示，其中动画或转换仅限于移动、平移和剪切，并且您的位图没有缩放，您将获得最佳的显示效果和下降性能。与这种用法的位图相比，矢量资源的性能更难预测。

但是，位图并不是所有解决方案的灵丹妙药。一旦涉及任何旋转、扭曲或缩放（放大和缩小），它们就会对性能产生不利影响，这是因为系统必须进行更多计算才能重新定位每个像素，这与矢量相比涉及更多.

Stage3D 也值得研究，但如果您主要使用 2D，明智地选择 MultiDPIBitmapSource 和矢量图形可能是一个更简单的解决方案。

# python - 如何将几个 MySQLdb fetch_all() 调用的输出合并到一个列表中？

> ID：11572121
> 
> 赞同：0
> 
> 时间：2012-07-20T02:41:14.750
> 
> 标签：python

我有一个循环处理 MySQLdb 查询的输出：

```
for item in getItems()
    . . . 
```

其中 getResults() 返回 cursor.fetchall() 的输出。

如何修改 getItems() 以便它结合几个不同查询的 fetchall() 返回？也就是说，一旦第一个查询的结果用完，我希望循环开始处理第二个查询的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:01:44.557

我不知道您如何进行查询的详细信息，但是这样的事情应该可以工作：

```
[item for query in queries for item in execute(query)] 
```

`execute`假设返回哪里`cursor.fetchall()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:10:44.083

如果两个查询具有相似的列结构，您可以考虑使用 MySQL 使用 UNION 关键字组合两个 SQL 查询。

```
SELECT a, b, c
FROM table_x
UNION
SELECT d,e,f
FROM table_y 
```

否则，将 getItems 定义为生成器可能会更容易。

```
def getItems():
    cursor.execute(query1)
    for row in cursor.fetchall():
        yield row
    cursor.execute(query2)
    for row in cursor.fetchall():
        yield row

gen = getItems()

for item in gen:
    ... 
```

# c# - BitConverter.ToInt32 转换 2 个字节

> ID：11572125
> 
> 赞同：2
> 
> 时间：2012-07-20T02:42:18.573
> 
> 标签：c#, .net

我正在使用 BitConverter.ToInt32 将 Byte 数组转换为 int。

我只有两个字节[0][26]，但是函数需要4个字节，所以我必须在现有字节的前面添加两个0字节。

什么方法最快。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:44:34.470

你可能应该这样做`(int)BitConverter.ToInt16(..)`。 `ToInt16`将两个字节读入一个`short`. 然后，您只需将其转换为`int`带有演员表的 a 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T02:44:44.733

您应该调用 `BitConverter.ToInt16，它只读取两个字节。

`short`可以隐式转换为`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T02:43:24.217

`Array.Copy`. 这是一些代码：

```
byte[] arr = new byte[] { 0x12, 0x34 };
byte[] done = new byte[4];
Array.Copy(arr, 0, done, 2, 2); // http://msdn.microsoft.com/en-us/library/z50k9bft.aspx
int myInt = BitConverter.ToInt32(done); // 0x00000026 
```

但是，调用 `BitConverter.ToInt16(byte[]) 似乎是一个更好的主意，然后将其保存到一个 int 中：

```
int myInt = BitConverter.ToInt16(...); 
```

但是请记住字节顺序。在小端机器上，`{ 0x00 0x02 }`实际上是 512，而不是 2（`0x0002`仍然是 2，不管字节顺序）。

# click - 在单击链接时将透明的 .png 淡入淡出

> ID：11572128
> 
> 赞同：0
> 
> 时间：2012-07-20T02:42:37.980
> 
> 标签：click, png, transparent, fade

我正在创建一个 650 X 610 像素的历史铁路地图，并想从一张空白地图开始，然后淡入仅包含铁路片段的透明 .png 图层，一个在另一个之上，建立一个图像整个网络。

将有一个网络扩展日期列表，以单击并显示该行。使用实体图像很容易完成，但速度很慢，有 31 个图像。

我在任何地方都找不到关于此的任何论坛查询。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:22:43.507

试试这个简单的例子（在 Opera 10 和 Firefox 2 中测试）。每个图像必须具有相同的尺寸。这意味着每一层都放置在相同的位置。

你应该改变的是：

*   `width`块内的所有`height`值（以像素为单位）`<style>`以匹配您的完整地图。

*   该`layerdata`数组包含每个图层的日期选择文本 ( `date`) 和图像的 URL ( `url`) 的对象。

*   `animdelay`. 每个不透明度级别的淡入/淡出延迟以毫秒（¹ / [1000秒）为单位。]默认值为 100 毫秒。总共有 10 个不透明度级别。减少延迟以加快动画速度。

`sample.html`：

```
<html>
  <头部>
    <风格>
      #日期标签{显示：块；}
      #frame { 边框：1px 纯黑色；宽度：500 像素；高度：500 像素；}
      。层 {
        “程序：DXImageTransform.Microsoft.Alpha（不透明度=0）”；
        过滤器：阿尔法（不透明度= 0）；
        不透明度：0；位置：绝对；宽度：500 像素；高度：500 像素；
      }
    </style>
  </head>
  <正文>
    日期：
    <div id="日期">
    </div>
    <div id="帧">
    </div>
    <脚本>
      //获取 Internet Explorer 的元素不透明度
      function getOpacityIE(ele) { //返回级别：0-100
        返回 ele.filters[0].opacity;
      }
      //为 Internet Explorer 设置元素不透明度
      function setOpacityIE(ele,level) { //level: 0-100
        ele.filters[0].opacity=level;
      }
      //获取网页标准浏览器的元素不透明度
      function getOpacityStd(ele) { //返回级别：0-100
        返回 (ele.style.opacity!=''?ele.style.opacity*100:0);
      }
      //为网络标准浏览器设置元素不透明度
      function setOpacityStd(ele,level) { //level: 0-100
        ele.style.opacity=(level/100).toFixed(1);
      }
      //根据目标日期索引淡入/淡出每一层
      函数动画（）{
        变量完成=真；
        for (var i=0; i<layers.length; i++) {
          变量调整=i<=dateidx?10:-10;
          var level=getOpacity(layers[i]);
          如果（（（调整>0）&&（级别<100））||（（调整<0）&&（级别>0）））{
           设置不透明度（层[i]，级别+调整）；
           完成=假；
          }
        }
        if (!done) animtimer=window.setTimeout(animate,animdelay);
      }
      //设置/更新图层索引以显示/隐藏和动画它
      功能设置日期（ele）{
        window.clearTimeout(animtimer);
        dateidx=ele.attributes['index'].value*1;
        动画（）；
      }
      //添加日期选择，在任何现有的下方
      函数添加选择（idx，日期）{
        var a=document.createElement('LABEL');
        a.htmlFor='日期'+idx;
        a.innerHTML='<input id="date'+idx+'" index="'+idx+'" name="date" type="radio" onclick="setdate(this)" /> '+date;
        日期.appendChild(a);
      }
      //将图层（图像）添加到框架中，在任何现有的顶部
      函数 addlayer(idx,url) {
        var a=document.createElement('IMG');
        a.className='层';
        a.src=url;
        层.push(a);
        frame.appendChild(a);
      }
      //layerdata：从下到上
      变层数据= [
        {日期：'2000-01-01'，网址：'image1.png'}，
        {日期：'2000-01-08'，网址：'image2.png'}，
        {日期：'2000-01-15'，网址：'image3.png'}，
        {日期：'2000-01-22'，网址：'image4.png'}
      ];
      //每个不透明度级别以 1/1000 秒为单位的动画延迟
      变量动画延迟=100；
      //运行时变量
      var dateidx=-1;
      变层=[];
      变量动画定时器=0；
      if (typeof(frame.style.opacity)!='undefined') {
        var getOpacity=getOpacityStd;
        var setOpacity=setOpacityStd;
      } 别的 {
        var getOpacity=getOpacityIE;
        var setOpacity=setOpacityIE;
      }
      //生成日期选择和图层
      for (var i=0; i<layerdata.length; i++) {
        添加选择（i，layerdata[i].date）；
        addlayer(i,layerdata[i].url);
      }
    </脚本>
  </正文>
</html>

```

# animation - 在 UITabBarController 中切换选项卡/视图控制器时的自定义动画

> ID：11572135
> 
> 赞同：2
> 
> 时间：2012-07-20T02:43:39.600
> 
> 标签：animation, uinavigationcontroller, uitabbarcontroller

我想制作一个类似于导航控制器的弹出和推送动画的 UITabBarController 选项卡切换动画。

这意味着如果我选择当前选项卡左侧的选项卡，新视图控制器的视图从左侧移入屏幕，旧/当前视图控制器的视图向右移出屏幕（类似于弹出）。

我目前只能做到这一点，但我不知道如何实现滑入/滑出效果。

谢谢！

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController:

    UIView *fromView = tabBarController.selectedViewController.view;
    NSInteger fromIndex = tabBarController.selectedIndex;
    UIView * toView = [viewController view];
    NSInteger toIndex = [[tabBarController viewControllers] indexOfObject:viewController];

    [UIView transitionFromView:fromView
                        toView:toView
                      duration:0.3
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    completion:^(BOOL finished) {
                        if (finished) {
                            tabBarController.selectedIndex = toIndex;
                        }
                    }];
} 
```

# c# - ComboBox 充满了项目，但没有显示可供选择

> ID：11572138
> 
> 赞同：1
> 
> 时间：2012-07-20T02:44:07.807
> 
> 标签：c#, winforms

我要做的是将 DataGridView 绑定到我的模型，并在每行中有两个具有不同值的无界列；这些列包含组合框。

这是一种工作：有界值正确显示，并且 ComboBoxes 填充了项目和 item.ToString() 给出了我怀疑在 ComboBoxes 中显示的值以供选择......但它们没有显示。我怀疑我错误地使用了 DisplayMember，但我不明白为什么......

这就是我填充每个 ComboBox 的方式：

```
DataGridViewComboBoxCell theCell = (DataGridViewComboBoxCell)dataGridView1.Rows[tableRow.Index].Cells["SendSets"];
BindingSource theSource = new BindingSource(customerRow, "SendSets");
theCell.ValueMember = "Value";
theCell.DisplayMember = "Text";
theCell.DataSource = theSource; 
```

同样的问题是当我使用简单的 BindingList 时。填充组合框的类：

```
public class ComboBoxItem
{
    public String Text { get; set; }
    public object Value { get; set; }

    public ComboBoxItem(String text, object value)
    {
        this.Text = text;
        this.Value = value;
    }

    public override string ToString()
    {
        return Text;
    }
} 
```

[编辑] 的输出

```
private void Customers_Load(object sender, EventArgs e)
    {
        RefreshTable();
        foreach (DataGridViewRow tableRow in dataGridView1.Rows)
        {
            DataGridViewComboBoxCell theCell = (DataGridViewComboBoxCell)tableRow.Cells["SendSets"];
            Debug.Write(theCell.Items.Count);
        }
        foreach (DataGridViewRow tableRow in dataGridView1.Rows)
        {
            DataGridViewComboBoxCell theCell = (DataGridViewComboBoxCell)tableRow.Cells["ReceivedSets"];
            Debug.Write(theCell.Items.Count);
        }
    } 
```

是

> 200100

所以我应该有一个带有两个选项的 ComboBox 和一个带有一个选项的 ComboBox。[/编辑]

整个人口过程是这样的：

```
public void RefreshTable()
    {
        trader trader = EntityManager.GetTraderById(parent.GetTrader().id);

        BindingList<Row> rows = new BindingList<Row>();
        foreach (customer customer in trader.customers.OrderBy(c => c.id))
        {
            rows.Add(new Row(customer));
        }

        dataGridView1.AutoGenerateColumns = false;

        dataGridView1.DataSource = rows;

        foreach (DataGridViewRow tableRow in dataGridView1.Rows)
        {
            customer customer = EntityManager.GetCustomerByCompanyName((String)tableRow.Cells["companyDataGridViewTextBoxColumn"].Value);
            Row customerRow = rows.Single(r => r.GetCustomerId().Equals(customer.id));
            if (customerRow.SendSets.Count > 0)
            {
                DataGridViewComboBoxCell theCell = (DataGridViewComboBoxCell)dataGridView1.Rows[tableRow.Index].Cells["SendSets"];
                BindingSource theSource = new BindingSource(customerRow, "SendSets");
                theCell.ValueMember = "Value";
                theCell.DisplayMember = "Text";
                theCell.DataSource = theSource;
            }
            if (customerRow.ReceivedSets.Count > 0)
            {
                DataGridViewComboBoxCell theCell = (DataGridViewComboBoxCell)dataGridView1.Rows[tableRow.Index].Cells["ReceivedSets"];
                BindingSource theSource = new BindingSource(customerRow, "ReceivedSets");
                theCell.DataSource = theSource;
                theCell.ValueMember = "Value";
                theCell.DisplayMember = "Text";
            }
        }
    } 
```

填充 DataGrid 的类：

```
public class Row
{
    private customer customer;

    public String Town { get { return customer.town; } set { customer.town = value; } }
    public String Names 
    {
        get
        {
            return customer.last_name + ", " + customer.first_name;
        }

        set
        {
            string s = value;
            int a = s.LastIndexOf(',');
            int b = s.LastIndexOf(' ');
            string l = a < 0 ? s : s.Substring(0, a),
                r = a < 0 ? "" : s.Substring(b + 1);
            customer.last_name = l;
            customer.first_name = r;
        }
    }
    public String Company { get { return customer.company_name; } set { customer.company_name = value; } }
    public String EMail { get { return customer.e_mail; } set { customer.e_mail = value; } }
    public BindingList<ComboBoxItem> SendSets { get; set; }
    public BindingList<ComboBoxItem> ReceivedSets { get; set; }

    public int GetCustomerId()
    {
        return customer.id;
    }

    public Row(customer customer)
    {
        this.customer = customer;
        this.Town = customer.town;
        this.Names = customer.last_name + ", " + customer.first_name;
        this.Company = customer.company_name;

        IEnumerable<customers_question_set> sendQuestionSets = customer.customers_question_sets.Where<customers_question_set>(
            x => x.send != null);
        BindingList<ComboBoxItem> toSendSets = new BindingList<ComboBoxItem>();
        foreach (customers_question_set customerQuestionSet in sendQuestionSets)
        {
            toSendSets.Add(new ComboBoxItem(customerQuestionSet.send.ToString() + " (" + customerQuestionSet.question_set.name + ")", customerQuestionSet));
        }
        this.SendSets = toSendSets;

        IEnumerable<customers_question_set> receivedQuestionSets = customer.customers_question_sets.Where<customers_question_set>(
            x => x.received != null);
        BindingList<ComboBoxItem> toReceivedSets = new BindingList<ComboBoxItem>();
        foreach (customers_question_set customerQuestionSet in receivedQuestionSets)
        {
            toReceivedSets.Add(new ComboBoxItem(customerQuestionSet.send.ToString() + " (" + customerQuestionSet.question_set.name + ")", customerQuestionSet));
        }
        this.ReceivedSets = toReceivedSets;

        this.EMail = customer.e_mail;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:48:48.687

如果我正确理解了您的代码，那么您正在尝试为每一行使用不同的数据源，这是数据网格视图中组合框列的非标准用法。试试这个示例：

公共类 Form1 : Form { public Form1() { var grid = new DataGridView { Dock = DockStyle.Fill, AutoGenerateColumns = false };

```
 var column = new DataGridViewComboBoxColumn();
        column.DataPropertyName = "Selected";
        column.DisplayMember = "Text";
        column.ValueMember = "Value";
        grid.Columns.Add(column);
        grid.DataSource = new[]
        {
            new Item
            {
                Selected = 1 ,
                Elements = new[]
                {
                    new Element { Text = "first", Value = 1 },
                    new Element { Text = "third", Value = 3 }
                }
            },
            new Item
            {
                Selected = 5 ,
                Elements = new[]
                {
                    new Element { Text = "second", Value = 2 },
                    new Element { Text = "fifth", Value = 5 },
                    new Element { Text = "sixth", Value = 6 }
                }
            }
        };
        Controls.Add(grid);
        grid.RowsAdded += new DataGridViewRowsAddedEventHandler(grid_RowsAdded);
    }

    private void grid_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        var grid = (DataGridView)sender;
        for (int i = 0; i < e.RowCount; i++)
        {
            var item = (Item)grid.Rows[e.RowIndex + i].DataBoundItem;

            var cell = (DataGridViewComboBoxCell)grid.Rows[e.RowIndex + i].Cells[0];

            cell.DataSource = item.Elements;
            Debug.WriteLine(cell.Items.Count);
        }
    }
}

internal class Item
{
    public int Selected { get; set; }

    public IEnumerable<Element> Elements { get; set; }
}

internal class Element
{
    public string Text { get; set; }

    public int Value { get; set; }
} 
```

但我不太确定你`Selected`在行类中的属性是什么。您当然知道此列的目的是选择许多可用项目之一，而不是显示项目列表。

# asp.net - ssrs 表头和报表查看器控件

> ID：11572143
> 
> 赞同：0
> 
> 时间：2012-07-20T02:45:24.250
> 
> 标签：asp.net, ssrs-2008, reportviewer2008

> 我使用reportviewer从asp.net调用了ssrs报告。从 asp.net 查看报告时，表头重复两次，并与 asp.net 的 reportviewer 控件（带有分页和导出按钮的控件）重叠。我试过给一些空间、填充和边距，但无法修复它。从 ssrs 报告管理器查看时，标题很好。我在 rdl 中使用了 3-4 个表，每个表都显示为页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:11:41.557

我找到了答案。ie 8中不支持冻结行标题。将行的Fixeddata属性更改为false解决了问题

# php - PHP：回显输入字段的值

> ID：11572144
> 
> 赞同：1
> 
> 时间：2012-07-20T02:45:34.217
> 
> 标签：php

我在 Ajax/JS 函数的帮助下获取了几个输入字段的值。问题是文本框的值没有被回显。我检查了萤火虫工具，它显示帖子已执行但有一个空白值。为什么 JS 函数提交时 PHP 没有回显该值？

[例子](http://webprolearner2346.zxq.net/TabsNextPrev/index.php)

**JS**

```
<script>
$(document).ready(function() { 
    var timer = null;  
    var dataString;    
    function submitForm(){ 
        $.ajax({ type: "POST", 
            url: "index.php", 
            dataType: 'json', 
            success: function(result){ 
            $('#special').html('<p>' +  $('#resultval', result).html() + '</p>');} 
        }); 
        return false; 
    } 
    $('#contact_form').on('keyup', function() { 
        clearTimeout(timer); 
        timer = setTimeout(submitForm, 2000); 
    }); 
});  
</script> 
```

**HTML**

```
<form action="" method="post" enctype="multipart/form-data" id="contact_form" name="form4"> 
 <div class="row">  
  <div class="label">Contact Name *</div> <!-- end .label --> 
    <div class="input"> 
      <input type="text" id="contact_name" class="detail" name="contact_name" value="<?php echo isset($_POST['contact_name'])? $_POST['contact_name'] : ''; ?>" />  
      <div id="special"><span id="resultval"><? echo $_POST['contact_name'];  ?></span></div> 
    </div><!-- end .input--> 
 </div><!-- end .row --> 
 <div class="row">  
  <div class="label">Email Address *</div> <!-- end .label --> 
   <div class="input"> 
    <input type="text" id="email" class="detail" name="email" value="<?php echo isset($_POST['email'])? $_POST['email'] : ''; ?>" />  
    <div id="special"><span id="resultval"><? echo $_POST['email'];  ?></span></div> 
   </div><!-- end .input--> 
 </div><!-- end .row --> 
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:05:50.967

朋友先了解一下 Javascript 的行为。 **当您发布表单时，它会成为对服务器的一个请求**。同时，**当您向服务器发送 ajax 时，它会成为对服务器的另一个单独请求**

所以你应该要么做表单发布，要么做ajax。

当您在这里使用 ajax 时，在 ajax 请求中，您必须在 data 参数中单独传递数据

```
<script type="text/javascript">
$(document).ready(function() { 
    var timer = null;  
    var dataString;    
    function submitForm(){ 
        $.ajax({ type: "POST", 
            url: "index.php", 
            dataType: 'json', 
            data: $('#contact_form').serialize(), // check this line
            success: function(result){ 
            $('#special').html('<p>' +  $('#resultval', result).html() + '</p>');} 
        }); 
        return false; 
    } 
    $('#contact_form').on('keyup', function() { 
        clearTimeout(timer); 
        timer = setTimeout(submitForm, 2000); 
    }); 
});  
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:51:09.873

您可能需要[`.serialize()`](http://api.jquery.com/serialize/)在表格上使用

# c++ - OSX Lion 上的 makefile 中的 GLFW 链接问题

> ID：11572147
> 
> 赞同：9
> 
> 时间：2012-07-20T02:46:35.820
> 
> 标签：c++, macos, opengl, makefile, glfw

[在 OSX 中链接 GLFW 的问题](https://stackoverflow.com/questions/8637797/problems-linking-against-glfw-in-osx)

我已经读过这篇文章，但这对我来说似乎是一个不同的问题。

在 makefile 中运行的命令是，

```
 g++ -o main main.cpp -lglfw -framework Cocoa -framework OpenGL 
```

我在运行 makefile 时收到的错误是，

```
Undefined symbols for architecture x86_64:
  "_IOMasterPort", referenced from:
      __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
  "_IOServiceMatching", referenced from:
      __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
  "_IOServiceGetMatchingServices", referenced from:
      __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
  "_IOIteratorNext", referenced from:
  __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
  "_IORegistryEntryCreateCFProperties", referenced from:
      __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
  "_IOCreatePlugInInterfaceForService", referenced from:
      __glfwInitJoysticks in libglfw.a(cocoa_joystick.o)
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T03:13:48.497

添加`-framework IOKit`到 g++ 选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-17T11:27:23.020

感谢@Mārtiņš Možeiko，我解决了部分问题，但对我来说仍然很少有错误消息：

```
Undefined symbols for architecture x86_64:
  "_CVDisplayLinkCreateWithCGDisplay", referenced from:
      __glfwSetVideoMode in libglfw3.a(cocoa_monitor.m.o)
      __glfwPlatformGetVideoMode in libglfw3.a(cocoa_monitor.m.o)
      __glfwPlatformGetVideoModes in libglfw3.a(cocoa_monitor.m.o)
  "_CVDisplayLinkGetNominalOutputVideoRefreshPeriod", referenced from:
      _vidmodeFromCGDisplayMode in libglfw3.a(cocoa_monitor.m.o)
  "_CVDisplayLinkRelease", referenced from:
      __glfwSetVideoMode in libglfw3.a(cocoa_monitor.m.o)
      __glfwPlatformGetVideoMode in libglfw3.a(cocoa_monitor.m.o)
      __glfwPlatformGetVideoModes in libglfw3.a(cocoa_monitor.m.o)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[1]: *** [scop] Error 1
make: *** [scop] Error 2 
```

为了解决这个问题，我还需要添加 CoreVideo 框架。

```
-framework Cocoa -framework IOKit -framework CoreVideo -framework OpenGL 
```

# ruby-on-rails - 在 Rails 中允许“坏”网址

> ID：11572152
> 
> 赞同：0
> 
> 时间：2012-07-20T02:47:35.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, net-http

我有一个简单的脚本来检查错误的 url：

```
def self.check_prod_links
  require 'net/http'
  results = []
  Product.find_each(:conditions =>{:published => 1}) do |product|
    url = product.url 
    id = product.id
    uri = URI(url)
    begin
      response = Net::HTTP.get_response(uri)
    rescue
      begin
        http = Net::HTTP.new(uri.host, uri.port)
        http.use_ssl = true
        http.verify_mode = OpenSSL::SSL::VERIFY_NONE
        request = Net::HTTP::Get.new(uri.request_uri)
        response = http.request(request)
      rescue
        begin
          response = Net::HTTP.get_response("http://" + uri)  
        rescue => e
          p "Problem getting url: #{url} Error Message: #{e.message}"
        end
      end
    end
    p "Checking URL = #{url}. ID = #{id}. Response Code = #{response.code}" 
    unless response.code.to_i == 200
      product.update_attribute(:published, 0) 
      results << product
    end
  end
  return results
end 
```

我怎样才能允许格式不正确的网址，例如：hkbfksrhf.google.com 以不使脚本崩溃并出现以下错误：

> getaddrinfo：提供节点名或服务名，或未知

我只想让任务运行到最后，并打印任何/所有不是 200 和 301 http 响应的错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:46:48.777

open-uri 是一种选择吗？它在遇到 404 或 500（或其他 HTTP 异常）时抛出异常，除了 SocketErrors，它允许您稍微清理一下代码

```
def self.check_prod_links                                            
  require 'open-uri'                                                 
  results = []                                                       

  Product.where(:published => 1).each do |product|                   
    url = product.url                                               
    id = product.id                                                  
    failed = true                                                    

    begin                                                            
      open URI(url)                                                  
      failed = false                                                 
    rescue OpenURI::HTTPError => e                                   
      error_message = e.message                                      
      response_message = "Response Code = #{e.io.status[0]}"         
    rescue SocketError => e                                          
      error_message = e.message                                      
      response_message = "Host unreachable"                          
    rescue => e                                                      
      error_message = e.message                                      
      response_message = "Unknown error"                             
    end                                                              

    if failed                                                        
      Rails.logger.error "Problem getting url: #{url} Error Message: #{error_message}"
      Rails.logger.error "Checking URL = #{url}. ID = #{id}. #{response_message}".    

      product.update_attribute(:published, 0).                       
      results << product                                             
    end                                                              
  end                                                                

  results                                                          
end 
```

# image - 使用 Opencv C++ 在图像上跨步

> ID：11572156
> 
> 赞同：2
> 
> 时间：2012-07-20T02:48:04.580
> 
> 标签：image, visual-c++, opencv, stride

我在 Windows 上并在 C++ 上使用 opencv 2.4.2。我读取图像`imread`并将其放入 Mat 对象中。之后，我使用`ptr`Mat 类的函数获得原始数据的指针。我想知道`imread`当图像包含步幅时如何工作。Mat 的数据是否有步幅或只有像素的数据？

附加信息：我需要原始数据，因为我使用的是用数组编写的代码，我不想为 Mat 类更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:55:23.013

跨度是 cv::Mat 中的每一行新像素都不会在最后一行结束后开始。这是因为如果内存从 4 字节的倍数开始，它会更快 - 所以只有在一行中的字节数（像素数 * 颜色数）不是 4 的倍数时才重要。

如果没有步幅，您可以检查 .isContinuous() 将返回 true

访问图像最安全的方法是遍历所有行并使用 .ptr(row) 获取指向行开头的指针，然后对该行进行任何处理。

如果您需要将 opencv 与其他库混合使用，您可以创建一个 cv::mat 它将使用您自己的内存来存储数据，您可以告诉 opencv 在这方面没有进展

有关详细信息，请参阅[https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html](https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html)

# syslog - Monit 无法在启动程序中执行完整的命令

> ID：11572157
> 
> 赞同：2
> 
> 时间：2012-07-20T02:48:17.087
> 
> 标签：syslog, monit

我在 Mac 10.7.4 机器上使用 monit 5.4。当我尝试执行示例配置时

```
check process syslogd with pidfile /var/run/syslogd.pid
   start program = "/etc/init.d/sysklogd start"
   stop program = "/etc/init.d/sysklogd stop"
   if 5 restarts within 5 cycles then timeout 
```

从[monit wiki 页面](http://mmonit.com/wiki/Monit/ConfigurationExamples#syslogd)，我收到以下错误。

```
'syslogd' process is not running
'syslogd' trying to restart
'syslogd' start: /etc/init.d/sysklogd
'syslogd' failed to start 
```

Monit 不采用 monitrc 文件的“启动程序”中给出的完整命令。它只需要命令中的第一个单词并尝试执行它并失败。这是一个已知的问题？如果是，是否有解决方法？如果没有，我在这里缺少什么以及如何使它工作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T22:39:07.263

试试这个（来自[http://mmoni.com/wiki/Monit/FAQ#execution](http://mmonit.com/wiki/Monit/FAQ#execution)）

```
start program = "/bin/bash -c '/etc/init.d/blah start'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:53:44.077

`/etc/init.d/sysklogd`真的存在吗？

在 10.8 上，我`/etc/init.d/syslog`手动运行`/etc/init.d/syslog restart`正常。

# sqlite - 从 SQLite 表中选择一个随机行在哪里？

> ID：11572161
> 
> 赞同：0
> 
> 时间：2012-07-20T02:49:08.727
> 
> 标签：sqlite

我有一张这样的桌子：

```
CREATE TABLE records (_id INTEGER PRIMARY KEY,
                    question TEXT, answer TEXT, category INTEGER) 
```

给出一个特定的类别值（比如说 2），我想从该类别中选择一个随机行。这就是我想象的解决方案：

```
Select   question, answer, category //I think there is something missing
From     records
Where    category=2 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:58:47.230

你可以这样：

```
SELECT question, answer, category
FROM records
WHERE category=2 ORDER BY RANDOM() LIMIT 1; 
```

# mingw32 - 使用 MinGW 编译显示 OpenCV 图像

> ID：11572162
> 
> 赞同：0
> 
> 时间：2012-07-20T02:49:26.363
> 
> 标签：mingw32

> **可能重复：**
> [Windows 7 上的 OpenCV 2.4 和 MinGW 入门](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)

我在 Windows 7 中安装了 MinGW 编译器和 OpenCV2.4.0。我写了一些 C++ 代码，编译并运行它，但它无法显示图像：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
using namespace cv; 
using namespace std;
{
Mat im = imread("baboon.jpg
if (im.empty()) {
      cout << "Cannot open image!" << endl;
      return -1;
}
imshow("image", im);
waitKey(0);
return 0;
} 
```

编译后一切正常。运行的那一刻`loadimg.exe`，弹出一个黑色的对话框，但不显示图像，然后`loadimg.exe`停止工作。我知道这是MinGW的问题。我用 gcc -v 检查了我的 GCC，版本是 4.6.2。我可以编译其他 c++ 源并运行它 好的，所以我不知道发生了什么以及如何修复它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T16:10:06.080

===================

# 如何为 OpenCV 设置代码块

## MinGW 和代码块

在本教程中，我将在 Windows 7 操作系统上使用带有 GNU 编译器的 OpenCV v2.4.2 和 Code Blocks v10.05。使用 OpenCV v2.4.2？然后你可以查看这篇文章“在代码块中设置 OpenCV 2.4.2”

要使用代码块处理 OpenCV，您只需要添加一些库。以下是我遵循的一些简单步骤。

1.首先我假设你已经下载了 OpenCV 包并安装在你的系统中。（不完全安装，直接解压） [http://sourceforge.net/projects/opencvlibrary/files/opencv-win/](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/)，你最好选择v2.4.2

2.确保设置了环境变量PATH。这可以在安装过程本身期间完成。它会提示你这个问题。如果你错过了，那么你必须手动添加它。

3.考虑到你的C盘已经安装了OpenCV，我继续这个方法。打开代码块。转到菜单设置>编译器和调试器>搜索目录。那里去添加并添加目录C:\OpenCV\include\opencv

4.在Linker选项卡中添加目录C:\OpenCV\build\x86\mingw\lib，然后点击Linker Settings。从 C:\OpenCV\build\x86\mingw\lib 添加所有 .lib 文件

5.就是这样！！现在您已准备好运行您的第一个 OpenCV 程序。我测试了一个示例程序 demhist.c

# python - 为什么“else”子句的目的是在“for”或“while”循环之后？

> ID：11572164
> 
> 赞同：14
> 
> 时间：2012-07-20T02:49:30.663
> 
> 标签：python, python-3.x

我是 Python 初学者。我发现`else`in `for`- `else`and `while`-`else`是完全没有必要的。因为`for`and`while`最终会运行到`else`，我们可以使用通常的行来代替。

例如：

```
for i in range(1, 5):
    print i
else:
    print 'over' 
```

和

```
for i in range(1, 5):
    print i
print 'over' 
```

是相同的。

那么为什么 Python 有`else`in `for`-`else`和`while`-`else`呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T02:50:57.163

你对 for/else 的语义是错误的。else 子句仅在循环完成时运行，例如，如果没有遇到 break 语句。

典型的 for/else 循环如下所示：

```
for x in seq:
    if cond(x):
        break
else:
    print "Didn't find an x I liked!" 
```

将“else”想象成与循环体中的所有“if”配对。您的样本是相同的，但混合了“break”语句，它们不是。

相同想法的更长描述：http: [//nedbatchelder.com/blog/201110/forelse.html](http://nedbatchelder.com/blog/201110/forelse.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-13T13:54:03.277

该`for ... else`语句用于实现搜索循环。

特别是，它处理搜索循环找不到任何东西的情况。

```
for z in xrange(10):
    if z == 5:
        # We found what we are looking for
        print "we found 5"
        break # The else statement will not execute because of the break
else:

    # We failed to find what we were looking for
    print "we failed to find 5"
    z = None

print 'z = ', z 
```

输出：

```
we found 5
z =  5 
```

该搜索与

```
z = None
for z in xrange(10):
    if 5 == z:
        # We found what we are looking for
        break

if z == None:
    print "we failed to find 5"
else:
    print "we found 5"

print 'z = ', z 
```

请记住，如果搜索列表为空（即） ，`for`则不会初始化 z 。`[]`这就是为什么我们必须确保在搜索后使用 z 时定义它。以下将引发异常，因为`z`在我们尝试打印时未定义。

```
for z in []:
    if 5 == z:
        break

print "z = ",z 
```

输出

```
 print "z = ",z
NameError: name 'z' is not defined 
```

总之，只要循环自然终止，该`else`子句就会执行。如果循环中`for`发生中断或异常，则语句将不会执行。`for``else`

# .net - 如何在 .net 的 UNC 路径中创建空文件夹？

> ID：11572166
> 
> 赞同：0
> 
> 时间：2012-07-20T02:49:51.980
> 
> 标签：.net

我想在 UNC 路径中创建一个空文件夹，并将所有文件从本地磁盘复制到该特定的空文件夹。我试过`WDEngine.UploadFile`了，但它似乎只适用于本地磁盘。`File.copy`可以很好地复制所有文件，但唯一的问题在于如何在 UNC 路径中创建一个空文件夹，以便粘贴从本地磁盘复制的所有文件。

感谢您的回复，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T02:53:20.240

你正在寻找`Directory.CreateDirectory`方法。

# mysql - MySQL：插入 .... 重复键更新：受影响的行 == 3？

> ID：11572180
> 
> 赞同：2
> 
> 时间：2012-07-20T02:53:03.790
> 
> 标签：mysql, insert-update, connector-j

MySQL 文档指出，当使用 INSERT ... ON DUPLICATE KEY UPDATE 时，affected-rows 值将在插入记录时为 1，如果更新现有记录则为 2。

更新记录时，我们得到的受影响行值为 3，尽管我仅在使用 Java 中的 Connector-J 通过 MySQL 调用执行更新时才看到这一点；当我从 MySQL Workbench 调用存储过程时，我得到了 2 行更新的预期结果。

有谁知道这可能意味着什么？这可能是连接器-J 异常吗？我倾向于只使用它，但没有合理的解释，我担心我的数据完整性（毕竟，这是检查受影响行值的原因之一）。

MySQL服务器版本：5.1.57；连接器-J 版本：5.1.7 (Java 1.6)

**其他详细信息：** 这是正在修改的表：

```
CREATE TABLE `UserContactProperty` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `UserContactId` int(11) NOT NULL,
  `Property` varchar(45) NOT NULL,
  `Value` tinytext,
  `Date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `Contact-Property` (`UserContactId`,`Property`),
  KEY `FK_UserContact` (`UserContactId`),
  CONSTRAINT `FK_UserContact` FOREIGN KEY (`UserContactId`) REFERENCES `UserContact` (`id`) ON   DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=28685 DEFAULT CHARSET=latin1 
```

执行插入/更新的存储过程如下：

```
CREATE PROCEDURE `setUserContactProperty`(
    UID VARCHAR(50),
    CID INT,
    Prop VARCHAR(45),
    Val TINYTEXT
)
BEGIN
    INSERT INTO UserContactProperty ( UserContactId, Property, Value )
        VALUES ( CID, Prop, Val )
        ON DUPLICATE KEY UPDATE Value = Val, Date = CURRENT_TIMESTAMP;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:01:48.740

这似乎是一个错误。请检查以下链接：

[http://bugs.mysql.com/bug.php?id=46675](http://bugs.mysql.com/bug.php?id=46675)

正如那里报告的那样，该错误与另一个错误有关，其中生成的密钥列表错误并且计数也错误。（第二个错误来自这里[http://slava-technical.blogspot.co.il/2011/05/mysql-on-duplicate-key-update-breaks.html](http://slava-technical.blogspot.co.il/2011/05/mysql-on-duplicate-key-update-breaks.html)）

我认为您需要找到解决方法。可能通过在插入之前查询数据库以查看具有此键的行是否存在。或插入并捕获重复键异常，然后在这种情况下进行更新。

# c++ - 非（~）与否定（！）

> ID：11572181
> 
> 赞同：28
> 
> 时间：2012-07-20T02:53:06.793
> 
> 标签：c++, c, bitwise-operators, logical-operators

```
#include <iostream>

using namespace std;
int main(int argc, char *argv[]) 
{
   int i=-5;
   while(~(i))
   {
      cout<<i;
      ++i;
   }

 } 
```

输出为 -5、-4、-3、-2。它不应该将值打印到-1吗？为什么只打印到-2。请解释一下'not'和'negation'运算符之间的区别。当我编写程序时，它们是错误的来源。

```
while(i) 
```

我知道除了 0 之外的正负 i 的循环条件都是正确的。

```
while(!i) vs while(~i) 
```

对于 'i' 的什么值，上述两个循环被执行？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-20T02:54:42.707

当`i`到达 时，`-1`值为，或，所以循环停止执行。操作员工作是因为它做了完全不同的事情；它导致值和所有其他值。是按位否定。`~i``~-1``0``while``!``1``0``0``~`

更详细一点：

*   `~`获取数字中的每一位并切换它。因此，例如，10010 [2]将变为 01101 [2]
*   `-1`当二进制补码有符号整数时，都是二进制的。
*   `~0b…11111111`是`0`。

然而：

*   `!0`是`1`，`!anythingElse`是`0`
*   `-1`不是`0`
*   `!-1`还是`0`

如果你真的想循环包括`i == -1`，只需使用`while (i)`而不是`while (~i)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T02:58:20.413

你是正确`i == -1`的退出条件：你的循环相当于

```
int i=-5;
while(i != -1)
{
    cout<<i;
    ++i;
}
// i == -1 immediately after the loop 
```

以这种方式编写时，应该清楚为什么`-1`不打印该值首先打印，然后才递增，这就是`-2`您打印的最后一个值的原因。

`!`另一方面，运算符只有在给定零时才会产生`1`。这就是为什么在循环条件中使用运算符`-1`时会打印循环的原因`!`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T03:22:54.870

'~' 是运算符：~x = -x-1，当 i = -1 时，~i = 0。如果你想知道 ~i 的值，你可以打印出来：

```
#include <iostream>

using namespace std;
int main(int argc, char *argv[]) 
{
   int i=-5;
   for (int i = -5; i <= 3; i++)
   {
    cout<<i<<"  "<<(~i)<<endl;
   }
 } 
```

然后你会发现： -5 4 -4 3 -3 2 -2 1 -1 0 0 -1 1 -2 2 -3 3 -4

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-06T21:58:33.550

`!`是真/假逻辑翻转

`!`意味着`any nonzero becomes 0`, 和`0 becomes 1`

例如1。`!0b1010 -> 0b0000`

例2。`!0b0000 -> 0b0001`

例 3。`!0b1111 -> 0b0000`

概括地说，`out = in?0:1`

尽管...

`~`有点翻转

`~`方法`flip each and every bit`

例如1。`~0b1010 -> 0b0101`

例2。`~0b0000 -> 0b1111`

例 3。`~0b1111 -> 0b0000`

概括地说，`out = in^0b1111`

# php - 使用正则表达式删除空段落标签 （“空间”上的标准 str_replace 不起作用）

> ID：11572183
> 
> 赞同：1
> 
> 时间：2012-07-20T02:53:10.913
> 
> 标签：php, regex, tinymce

当您按两次 Enter 时，TinyMCE 会创建空段落标签。喜欢：

```
<p> </p> 
```

哪个是 `<p>SPACE</p>`

在 FireBug 中，它将此空间称为 a `"&nbsp;"`，但 html 代码/数据库后端仅显示一个空间。当我这样做时`"str_replace('<p> </p>'....."`，它没有找到块......基本上我认为“空间”在某种程度上不是标准空间和某种编码空间。有没有我可以运行的正则表达式来删除这个标签？我已经坚持了几个小时......甚至类似的东西

`regex('<p>LESS THAN THREE CHARS</p>'...)`

可能会工作

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T03:00:20.503

我会使用：

```
$str = preg_replace('~<p>\s*<\/p>~i','',$str); 
```

where`\s`表示任何类型的空白（制表符、空格等），并`*`表示此（空格）出现 0 次或多次。所以`<p></p>`, `<p> </p>`,`<p>{multiple spaces here}</p>`都将被一个空字符串替换。附加`i`标志用于不区分大小写，以防万一`<p>`'s 可能改为`<P>`'s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:30:45.617

```
$text = preg_replace('#<p>&nbsp;</p>#i','<p></p>', $text); 
```

为我工作，因为变量包含实际字符串`"&nbsp;"`而不是不间断空格 unicode 字符。因此，既不`#<p>.</p>#i`工作也不从字符映射复制不间断空格字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T14:21:56.847

没有一个给定的答案对我有用，但这就是：

```
$str = str_replace('&lt;p&gt;&nbsp;&lt;/p&gt;', '', $str); 
```

绝对不是最正确的做事方式。但是，如果您正在使用（反对）TinyMCE，特别是在 SuiteCRM 内部，这应该会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-01T14:04:43.927

如果`<p>`tag 有任何内联属性，例如 `<p style="font-weight:bold">`.

这是一个正则表达式来捕捉它：

```
#<p[^>]*>(\s|&nbsp;|</?\s?br\s?/?>)*</?p># 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T02:59:09.737

尝试这个

```
$string="a bunch of text with <p> </p> in it";

$string=str_replace("/<p> <\/p>/","",$string); 
```

请注意几件事：要匹配的字符串之前和之后的正斜杠，以及第二个段落标记中正斜杠之前的转义反斜杠。

# html - 如何在渲染视图文件中“输出”/“再现”“空白行”（存储在数据库中）？

> ID：11572184
> 
> 赞同：0
> 
> 时间：2012-07-20T02:53:12.050
> 
> 标签：html, ruby-on-rails, ruby, database, text

我正在使用 Ruby on Rails 3.2.2，我想知道如何在渲染视图文件中“输出”/“再现”“空白行”（存储在数据库列 Type TEXT 中）。也就是说，在我的数据库列 Type TEXT 中，我存储了以下数据（*注意*：空行实际上是数据中存在的行）：

```
Line 1
Line 2

Line 3

Line 4
... 
```

*为了使输出的文本*（在前端内容中）*根据存储在数据库中的数据**“跟随”/“反映”* “*空格*”（对于上述情况），例如，我想输出一些 HTML 代码如下所示：

 *```
Line 1<br/>
Line 2<br/><br/>
Line 3<br/><br/><br/>
Line 4
... 
```

...或其他使我想完成的事情。

换句话说，**我需要尽可能多地输出原始数据库数据的格式，就像 HTML 代码一样**。如何以*正确*且不*危险*的方式（例如，可能存在与跨站点请求伪造 - CSRF 相关的问题）方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:08:53.480

如果您不需要换行符以外的任何格式，那么您可以使用[`<pre>`](http://www.w3.org/TR/html-markup/pre.html)：

```
<pre><%= your_text %></pre> 
```

将`<%= %>`负责对所有内容进行 HTML 编码，`<pre>`并将负责格式化您的换行符。*

# javascript - 解决 JavaScript 范围问题的替代方法

> ID：11572187
> 
> 赞同：1
> 
> 时间：2012-07-20T02:53:57.480
> 
> 标签：javascript, scope

到目前为止，我一直在使用自执行匿名函数以避免出现变量命名问题：

```
(function () {
    var a, b, c;
    a = 5;
    b = 10;
    c = 15;
    console.log('No problema!');
]()); 
```

我也知道使用 onload 函数也是一种替代方法：

```
window.onload = function () {
    var a;
    a = 25;
    console.log('Yay!!!');
} 
```

但我真的不喜欢我的代码完全被困在一个函数中 - 有没有一种方法可以让我使用 JavaScript 对象来帮助我避免使用自执行函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:01:01.747

在当今的大多数浏览器中，函数只是*封装*单元。如果要为变量创建作用域，请将其设置为函数的局部变量。

但是今天有许多服务器端 JavaScript 安装，存在模块，许多基于[require.js](http://requirejs.org/)。如果您使用 Nodejs 编写应用程序，您将已经熟悉它。

不过，下一版本的 JavaScript 即将推出。命名为 ES6、ES.next、Harmony 或 JavaScript.next，这个新的 JavaScript 将包含用于隐藏信息的模块以及块作用域。许多浏览器现在开始实现该语言的功能。您可以在[http://repl.it](http://repl.it)等地方进行试验。您可以使用 Google 的[Traceur 编译器](http://code.google.com/p/traceur-compiler/)将包含许多 ES6 提案的语言编译成当今的 JavaScript。

TL；DR：现在：坚持浏览器中的功能。或者将 require.js 用于您的服务器端应用程序。坚持下去，因为 ES6 即将到来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:01:18.017

```
var MyObject = (function() {
    var _variableHidden = 1;

    return {
        variableVisible: 2
    };
})();

MyObject.variableVisible //= 2
MyObject._variableHidden //= undefined 
```

这被称为“Reavealing Module Pattern”。它允许您使用作用域来隐藏变量，同时仍然通过将属性和方法附加到返回的对象来使它们可用。您可以在此处阅读有关此模式和其他模式的更多信息：http: [//addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)

虽然这种方法不会删除“自动执行”功能，但它确实允许您在保持范围和变量隐藏的好处的同时使事物对外部范围可用。

我还应该注意，它们不是自动执行的函数。他们不执行自己。我们实际上是为他们这样做的:)。只是我的小毛病，哈哈。

# java - JSF - 单击元素时调用 bean 方法

> ID：11572188
> 
> 赞同：0
> 
> 时间：2012-07-20T02:53:57.340
> 
> 标签：java, javascript, jsf, fancybox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:34:23.050

如果您使用 JSF 2.0，f:ajax 标签可能会解决您的问题。这是 f:ajax 标记的示例用法，

```
 <h:commandLink value="#{..}">
        <f:ajax execute="name" render="output" />
    </h:commandLink>
    <h:inputTextarea id="output" value="#{..}" /> 
```

**execute** =”name” - 表示 ID 为“name”的表单组件将被发送到服务器进行处理。对于多个组件，只需在其间用空格分隔即可，例如 execute=”name anotherId anotherxxId”。在这种情况下，它将提交文本框值。

**render** =”output” – 在 Ajax 请求之后，它将刷新 id 为“output”的组件。在这种情况下，Ajax 请求完成后，它会刷新 h:inputTextarea 组件。

# moodle - Moodle：自动化用户/课程创建和注册

> ID：11572189
> 
> 赞同：0
> 
> 时间：2012-07-20T02:53:58.627
> 
> 标签：moodle

我查看了有关[注册](http://docs.moodle.org/23/en/Enrolments)的文档，但所有注册方法似乎都涉及与 GUI 的一些交互。

有没有办法编写注册脚本？就像是：

```
./moodle_do_enrolments imsdata.xml 
```

甚至是一些我可以从外部程序调用的 Web 服务调用？

我希望能够以自动化的方式执行以下操作：

```
1) Add a user.
2) Create a course with specified title etc.
3) Enrol that user in that course. 
```

当然，在某些时候，我会将它与我们的用户系统和其他管理系统联系起来，但目前，我只是在尝试进行概念验证。

哪里有一些解释自动注册过程的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T20:39:04.417

您可以尝试创建自己的 PHP 脚本：解析 XML 文件并使用内部 moodle 函数来解决问题。

**解决这些问题的基本思路**

1）添加用户：

在 user/lib.php 中有一个方法：user_create_user($user)。只需包含该 lib.php 并找出用户对象中需要哪些信息。

2) 创建课程

course/lib.php 中有一个方法：create_course($data, $editoroptions)。只需包含该 lib.php 并找出数据数组中需要哪些信息。

3) 注册用户

我创建了以下方法来为我完成这项工作。

```
// enroll student to course (roleid = 5 is student role)
function enroll_to_course($courseid, $userid, $roleid=5, $extendbase=3, $extendperiod=0)  {
    global $DB;

    $instance = $DB->get_record('enrol', array('courseid'=>$courseid, 'enrol'=>'manual'), '*', MUST_EXIST);
    $course = $DB->get_record('course', array('id'=>$instance->courseid), '*', MUST_EXIST);
    $today = time();
    $today = make_timestamp(date('Y', $today), date('m', $today), date('d', $today), 0, 0, 0);

    if(!$enrol_manual = enrol_get_plugin('manual')) { throw new coding_exception('Can not instantiate enrol_manual'); }
    switch($extendbase) {
        case 2:
            $timestart = $course->startdate;
            break;
        case 3:
        default:
            $timestart = $today;
            break;
    }  
    if ($extendperiod <= 0) { $timeend = 0; }   // extendperiod are seconds
    else { $timeend = $timestart + $extendperiod; }
    $enrolled = $enrol_manual->enrol_user($instance, $userid, $roleid, $timestart, $timeend);
    add_to_log($course->id, 'course', 'enrol', '../enrol/users.php?id='.$course->id, $course->id);

    return $enrolled;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:52:06.617

不需要使用 GUI，您可以创建一个注册/身份验证插件来实现此目的或使用内置插件之一。我对 ims 注册插件不太熟悉，但标准的 ldap/数据库插件具有可用于自动执行此同步过程的脚本。

参见例如：enrol/database/cli/sync.php

# tridion - 我是否需要对传递给 Tridion 代理的 SQL 转义参数进行转义？

> ID：11572193
> 
> 赞同：0
> 
> 时间：2012-07-20T02:55:22.103
> 
> 标签：tridion

我通过查询 API 向 Tridion 代理数据库传递了一个 SQL“类似”查询：

```
var mkc = new CustomMetaKeyCriteria("Text");
var mvc = new CustomMetaValueCriteria(mkc, "%" + query + "%", Criteria.Like);
query.Criteria = mvc;
var results = query.ExecuteQuery(); 
```

`query`变量是用户直接传入的东西。

我是否需要尝试 SQL 转义该参数，还是 Tridion 会通过参数化（或其他方式）来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:51:06.520

SDL 产品***通常***以结构化方式将其参数传递给数据库，因此无需字符串连接。这意味着您***不必***逃避标准。

你试过了吗？它有效吗？

# ruby-on-rails - 将 build 与使用 :class_name 的 belongs_to 一起使用

> ID：11572196
> 
> 赞同：0
> 
> 时间：2012-07-20T02:55:47.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

大家好，我在使用时遇到问题`build`

```
Bag
 belongs_to :creator, :class_name => "User"
 has_many :users, :through => :assignments

User
 has_many :bags, :through => :assignments

Assignment
 attr_accessible :bag_id, :user_id
 belongs_to :bag
 belongs_to :user 
```

我只是想创建一个`Bag`正确用于`current_user's id`设置外键的。但不断发生的是

Rails 会正确创建`Bag`，但不是将 Bag.creator_id 设置为 current_user.id，而是同时使用和`inserts`的条目。有人可以帮我吗？我无计可施。`Assignments``bag's id``current_user's id`

```
current_user.bags.build type: "Prada", price: 50
current_user.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:05:10.013

似乎`User`只知道包包，`assignments`这就是它使用它的原因。`creator`如果您想跳过 rel 表，您真正需要的是包的等价物，例如：

```
User
 has_many :bags, :through => :assignments
 has_many :creations, :class_name => 'Bag'

bag = current_user.creations.build type: "Prada", price: 50
bag.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:41:31.743

我认为你的模型应该是这样的

```
Bag
 belongs_to :creator, :class_name => "User"
 has_many :assignments
 has_many :users, :through => :assignments

User
 has_many :assignments
 has_many :bags, :through => :assignments

Assignment
 belongs_to :bag
 belongs_to :user
 attr_accessible :bag_id, :user_id 
```

尝试

```
bag = current_user.bags.build type: "Prada", price: 50
bag.save 
```

或者

```
current_user.bags.create type: "Prada", price: 50 
```

# grails - Grails JQGrid 4.0

> ID：11572198
> 
> 赞同：0
> 
> 时间：2012-07-20T02:56:30.630
> 
> 标签：grails, jqgrid, grails-plugin

这个问题还涉及我[关于](https://stackoverflow.com/questions/11553615/grails-jqgrid-multiple-grouping)`<jqgrid:grid>`使用标签在 JQGrid 内进行多重分组的问题。但正如我后来在 JQGrid 的更新日志中发现[的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:change#jqgrid_4.4.0_changes_and_fixes)那样，JQGrid 3.8.0 版的分组功能可能存在问题。我尝试使用此处介绍的 JQGrid 的脚本格式

所以理论上，我会下载 JQGrid 4.0 并在相关项目中使用它。问题是如何将下载的 JQGrid 4.0 文件用于我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:54:05.850

如果你找不到使用你需要的 jqGrid 版本的 Grails 插件，你可以去[下载 jqGrid](http://www.trirand.com/blog/?page_id=6)的更直接的路线。

只需将 js 文件放在 grails 项目的 webapps/js 文件夹中，然后将源代码包含在您需要的任何 gsp 页面上。您不会从 Grails 插件中获得任何易用性，但如果您绝对需要最新版本的 jqGrid 而无需等待 Grails 插件更新，那么就可以了。

# mysql - MySQL默认噪声词列表？

> ID：11572200
> 
> 赞同：1
> 
> 时间：2012-07-20T02:56:52.600
> 
> 标签：mysql

我有一个使用全文索引的数据库，想知道是否有人知道 match against 语句是否忽略了默认单词列表。另外，关于这个话题，有没有办法在索引上设置一个被忽略的单词列表？

噪音词是指在布尔模式下被 ~ 运算符忽略的词。

# regex - R Regex / gsub：如何折叠字符串中的空格

> ID：11572202
> 
> 赞同：6
> 
> 时间：2012-07-20T02:56:54.510
> 
> 标签：regex, perl, r, gsub

我有一个从手写文档中扫描的句子向量。在此过程中存在一些间距问题，例如：

```
 The d og is br own. 
```

我很好奇是否有一种方法可以通用地采用任何带有`'_x_'`或空格字符空间的模式并像这样折叠第二个空格：

```
The d og is br own.  --> The dog is br own. 
```

我只担心空格之间的单个字符（`'_x_'`NOT `'_xx_'`）。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:02:19.100

也许

```
> x<-"The d og is br own."
> gsub(" (.) "," \\1",x)
[1] "The dog is br own." 
```

或者

```
gsub(" ([[:alnum:]]) "," \\1",x) 
```

`(.)`匹配任何内容`([[:alnum:]])`仅匹配字母数字字符。

# json - 带有 JSON.Net 的 WCF RESTful Web 服务：避免双重序列化

> ID：11572203
> 
> 赞同：4
> 
> 时间：2012-07-20T02:57:00.593
> 
> 标签：json, wcf, rest

好久不见，第一次发帖。几天来我一直在努力解决这个问题，并希望得到任何提示。我在下面分解这个问题。

**我想要实现的目标：**
我想设置一个 JSON WCF Web 服务，但我想使用 JSON.net 序列化程序而不是 WCF 附带的序列化程序。为什么？因为我发现使用 WCF 附带的序列化会使集合膨胀（我将在下面展示我的意思的示例）。该服务的最终消费者将是一个 JavaScript 客户端，所以我不想让客户端在浏览 JSON 时做额外的麻烦。

我想出了一个我想要的简单示例，并着手尝试使其在 C# 中工作。我必须承认很长一段时间没有使用过 .NET，这可能是我速度慢的原因。无论如何，我有耐心的库存等等。

所以，我想要一个接受用户名并返回包含用户信息的 JSON 对象的服务。我设想该服务被称为这样的：

```
http://someHostName/whoareyou?username=paul 
```

并让服务响应：

```
{
    "errorCode": 0,
    "payLoad"  :  {
        "userFullName": "Paul The Octopus",
        "userLevel"        : "Administrator"
    }
} 
```

我可以轻松地在 JavaScript 或 PHP 中使用上述响应的 JSON 对象，并且对自己感觉非常好。

经过一番谷歌搜索后，我发现一些帖子表明在 .NET Framework 4 中使用 WCF 很容易做到这一点。不久前，我在课程中对 WCF 做了一些摆弄，但早就忘记了其中的 99%，所以我找到并关注了这篇文章以适应我的目标： http: [//www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide#](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide#)

**尝试 1：**
按照上面的帖子，我能够设置一个 WCF 服务（代码如下），它可以满足我的需求，但生成的 JSON 输出有点臃肿，如下所示。

*RestServiceImpl.svc.cs 文件*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using Newtonsoft.Json;
using System.Collections.Specialized;
//Based on this psot: http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide

namespace RestService
{
    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestService Members

        public WhoAreYouResponse whoareyou(string username)
        {
            var payLoad = new Dictionary<string, string>
            {
                {"userFullName", "Paul The Octopus"},
                {"userLevel", "Administrator"}
            };

            WhoAreYouResponse whoAreYouResponse = new WhoAreYouResponse
            {
                errorCode = 0,
                payLoad   = payLoad
            };

            return whoAreYouResponse;
        }

        #endregion
    }

    //Helper bits to be used in service implementation
    public class WhoAreYouResponse
    {
        public int errorCode { get; set; }
        public Dictionary<string,string> payLoad { get; set; }
    }
} 
```

*IRestServiceImpl.cs 文件*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace RestService
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET", 
            ResponseFormat = WebMessageFormat.Json, 
            BodyStyle = WebMessageBodyStyle.Bare, 
            UriTemplate = "json/whoareyou?username={username}")]
        WhoAreYouResponse whoareyou(string username);
    }
} 
```

*Web.config 文件*

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehavior">
        <endpoint address="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

*通过这样的浏览器调用服务的结果`http://192.168.0.84/TestRestService/RestServiceImpl.svc/json/whoareyou?username=paul*`

```
{
    "errorCode":0,
    "payLoad"   : [
        {"Key":"userFullName", "Value":"Paul The Octopus"},
        {"Key":"userLevel","Value":"Administrator"}
    ]
} 
```

JSON 响应中的汤中的头发是 Dictionary 对象在 JSON 响应中映射到“payLoad”的方式。它是一个对象数组，而我期待一个 JSON 对象没有这个“键”、“值”业务。不完全是我想要的。关闭，但在客户端处理起来非常挑剔。没有人喜欢臃肿和不必要的工作，所以对此表示赞同。

为解决方案做更多的拖钓我读了一些 SO 帖子，表明这里发生的事情是该服务正在使用内置的序列化程序，并且不会以任何其他方式序列化“字典”。需要一些额外的工作才能以我期望的格式获得它。所以，我想，使用另一个序列化程序怎么样？按照这个想法，我在这里发现了这个坏男孩：http: [//james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

这导致了我在下面的第二次尝试。

**尝试 2：**
下载 JSON.NET 序列化程序并将其导入我的小项目中，我将以下文件更改为如下所示（将*whoareyou*方法的返回类型更改为*string*）：

*RestServiceImpl.svc.cs*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using Newtonsoft.Json;
using System.Collections.Specialized;
//Based on this psot: http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide

namespace RestService
{
    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestService Members

        public string whoareyou(string username)
        {
            var payLoad = new Dictionary<string, string>
            {
                {"userFullName", "Paul The Octopus"},
                {"userLevel", "Administrator"}
            };

            WhoAreYouResponse whoAreYouResponse = new WhoAreYouResponse
            {
                errorCode = 0,
                payLoad   = payLoad
            };

            return JsonConvert.SerializeObject(whoAreYouResponse);
        }

        #endregion
    }

    //Helper bits to be used in service implementation
    public class WhoAreYouResponse
    {
        public int errorCode { get; set; }
        public Dictionary<string,string> payLoad { get; set; }
    }
} 
```

*IRestServiceImpl.cs*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace RestService
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET", 
            ResponseFormat = WebMessageFormat.Json, 
            BodyStyle = WebMessageBodyStyle.Bare, 
            UriTemplate = "json/whoareyou?username={username}")]
        string whoareyou(string username);
    }
} 
```

当服务被调用时，我得到这个响应：

```
"{
\"errorCode\":0,
\"payLoad\":{
    \"userFullName\":\"Paul The Octopus\",
    \"userLevel\":\"Administrator\"}
}" 
```

优胜者！这就是我想要和期待的……但是。把卡车倒过来。整个 JSON 对象用双引号括起来！？嗯。这是一个包含 JSON 对象的字符串。我把头发从汤里拿出来，现在一只苍蝇飞了进去！

经过片刻的挠头后，很明显（我认为）正在发生的事情是 JSON.NET 序列化程序像一个魅力一样工作，在字符串中吐出一个 JSON 对象，但随后将其放入 WCF 序列化程序并本质上是字符串化的. 所以我在返回中看到的是一个 JSON 字符串。很近！事实上，我的方法*whoareyou*说它返回一个字符串，这几乎是我的错。

所以，我的问题是，如何让这个问题孩子停止这种双序列化业务？我找不到我的*whoareyou*方法的返回类型类似于 JSON 对象。有没有办法告诉 WCF 使用 JSON.NET 序列化程序，或者一些这样的解决方案？

非常感谢指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T07:24:02.783

据我了解，您正在从头开始创建服务，并且对如何实现 REST 服务没有任何限制。那我建议你使用 ASP.NET WebApi

[http://www.asp.net/web-api](http://www.asp.net/web-api)

不要使用传统的 Web 服务技术，因为在较新的版本中，已经为您完成了许多样板代码。

使用 web api，您可以轻松替换或添加任何序列化程序/格式化程序。如何做到这一点在以下文章中描述：

[http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

我遇到了您描述的序列化问题，并用这种方法解决了这些问题。根据我对旧 Web 服务技术（WCF 3.5 Rest Starter Kit、Wcf 4 REST）的经验，它可以以更难的方式完成。

# ruby-on-rails - 属性无法通过 Rspec 访问

> ID：11572205
> 
> 赞同：0
> 
> 时间：2012-07-20T02:57:43.670
> 
> 标签：ruby-on-rails, rspec

楷模：

```
class User < ActiveRecord:Base
    has_many :roles
    has_many :networks, :through => :roles
end

class Network < ActiveRecord:Base
    has_many :roles
    has_many :network, :through => :roles
end

class Role < ActiveRecord:Base
    attr_accesible :user_id, :network_id, :position

    belongs_to :user
    belongs_to :network
end 
```

角色的默认值为“成员”

在控制台中，我可以输入：

```
> @role = Role.find(1)
> @role.position
=> "member" 
```

但在我的 Rspec 测试中，我使用 FactoryGirl 创建用户、网络和角色。而且我有测试`@role.should respond_to(:position)`，我也尝试过分配它`@role.position = "admin"`。无论如何，我都会收到如下错误：

```
Failure/Error: @role.should respond_to(:position)
  expected [#<Role id:1, user_id: 1, position: "member", created_at...updated_at...>] to respond to :position 
```

我错过了一些非常基本的东西吗？

编辑：

工厂.rb

```
FactoryGirl.define do
  factory :user do
    name               "Example User"
    sequence(:email)   {|n| "email#{n}@program.com"}
  end

  factory :network do
    sequence(:name)      {|n| "Example Network #{n}"}
    location              "Anywhere, USA"
    description           "Lorem Ipsum"
  end

  factory :role do
    association :user
    association :network
    position              "member"
  end

end 
```

network_controller_spec

```
...
before(:each) do
  @user = test_sign_in(FactoryGirl.create(:user)
  @network = FactoryGirl.create(:network)
  @role = FactoryGirl.create(:role, :user_id => @user.id, :network_id = @network.id)
  #I have also tried without using (_id) I have tried not setting the position in the factories as well.
end

it "should respond to position" do
  get :show, :id => @network
  # This may not be the best or even correct way to find this. But there should only be one, and this method works in the console.
  @role = Role.where(:user_id => @user.id, :network_id => @network.id)
  @role.should respond_to(:position)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:56:28.557

Jesse 在他的评论中是正确的，希望他能回来写下它作为答案，与此同时，代码应该是：

```
@role = Role.where(:user_id => @user.id, :network_id => @network.id).first 
```

或者

```
@role = Role.find_by_user_id_and_network_id(@user.id, @network.id) 
```

顺便说一句，在网络控制器规范中测试角色类似乎有点奇怪（除非这只是一个探索性测试，以找出为什么事情没有按预期工作）。

# r - R：如果一个函数没有被测试，抛出错误？

> ID：11572207
> 
> 赞同：3
> 
> 时间：2012-07-20T02:58:11.223
> 
> 标签：r, unit-testing, testing

我想为我的同事提供额外的提醒/激励，让他们为他们为我开发的包做出贡献的新功能编写测试。

我不确定这是否是一个好主意，或者是否有更好的方法，但我想知道是否有办法使用文件的自动化测试`/tests`并`/inst/tests`鼓励开发人员为新功能编写测试。

例如，如果包中有没有相关测试的函数，是否有一个测试会在检查、构建或测试包时抛出错误？

我承认这有很多潜在的问题。很难确定测试是否有任何好处，而且测试一个微不足道的函数可能是浪费时间。但它仍然可以提醒人们应该编写测试，也许它可以强制执行一两个非常基本的规则。

如果有一个没有测试的函数，我是否可以编写一个测试来阻止包编译？我正在使用[`testthat`](https://github.com/hadley/test_that/)R 中的包。

它不需要非常健壮，但按名称排除函数的能力会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:07:29.560

听起来您正在寻找“代码覆盖率”功能。这里的第一步是弄清楚哪些代码被测试覆盖，哪些没有。查看[RUnit Vignette](http://cran.r-project.org/web/packages/RUnit/vignettes/RUnit.pdf)的第 2.2 节以获取有关如何执行此操作的信息。

您可能最终不得不修改该`inspect`函数以引发警报或处理这样的自定义事件，但我认为它们已经实现了您尝试执行的大部分操作。

# linux - 您是否需要某个 shell 程序来进行代理转发？

> ID：11572209
> 
> 赞同：0
> 
> 时间：2012-07-20T02:58:11.773
> 
> 标签：linux, ssh, socks, xubuntu

我正在尝试为我的工作设置安全代理。[这篇文章](http://embraceubuntu.com/2006/12/08/ssh-tunnel-socks-proxy-forwarding-secure-browsing/) ^([perm 链接](http://web.archive.org/web/20110724012820/http://embraceubuntu.com/2006/12/08/ssh-tunnel-socks-proxy-forwarding-secure-browsing/))建议我应该使用 SSH 隧道 + SOCKS 代理转发。我是否需要访问服务器上的*特定*shell 程序，或者任何 shell 程序都可以？我有`bash`,`tcsh`和`zsh`可用的。

[问题的长版本在这里。](https://askubuntu.com/revisions/323fd35d-238b-411e-be00-f9dfc7d01539/view-source)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:11:39.553

您`ssh -D 9999 username@ip-address-of-ssh-server`在本地计算机上运行。除了要登录的 shell 之外，您在远程端不需要任何其他东西。所以`bash`, `tcsh`, or`zsh`很好。

一旦你运行你的`ssh -D`命令，它看起来就像你已经 ssh'ed 到没有`-D 9999`标志的“ip-address-of-ssh-server”。您将在 shell 中，您将在远程计算机上看到命令提示符。你可以不管它。您只需要设置您的浏览器以在 localhost:9999 使用 SOCKS 代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:14:13.567

使用`bash`是因为它的流行/无处不在。您将找到的大多数示例都将使用此语法。

但是`ssh`的功能集与使用的外壳无关。

# java - Roller 中的会话安全违规

> ID：11572210
> 
> 赞同：0
> 
> 时间：2012-07-20T02:58:16.780
> 
> 标签：java, multithreading, session, concurrency, atomic

[RollerSession](http://www.java2s.com/Open-Source/Java/Blogger-System/apache-roller-4.0.1/org/apache/roller/weblogger/ui/core/RollerSession.java.htm)有以下代码：

```
public static RollerSession getRollerSession(HttpServletRequest request) {
    RollerSession rollerSession = null;
    HttpSession session = request.getSession(false);
    if (session != null) {
        rollerSession = (RollerSession)session.getAttribute(ROLLER_SESSION);
        if (rollerSession == null) {
            // HttpSession with no RollerSession?
            // Must be a session that was de-serialized from a previous run.
            rollerSession = new RollerSession();
            session.setAttribute(ROLLER_SESSION, rollerSession);
        }
      .... 
```

我是并发问题的新手。这里似乎存在原子性违规，两个不同的线程可能同时更新 setAttribute。是对的吗？鉴于会话是从请求中获取的，会话是否可以由两个线程共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:09:38.150

是的，你是对的，还有一个能见度问题！根据[IBM 的帖子](http://www.ibm.com/developerworks/library/j-jtp09238/index.html)和[Java Ranch](http://www.coderanch.com/t/361845/Servlets/java/HttpSession-not-thread-safe)，get/set 操作**不是**线程安全的。因此，如果您不希望应用程序中出现任何竞争条件，则应该同步，但要小心放置同步的位置。

***解释***

多个执行请求线程的 servlet 可以同时对同一个会话对象进行主动访问。容器必须确保以线程安全的方式执行表示会话属性的内部数据结构的操作。开发人员负责对属性对象本身进行线程安全访问。这将保护 HttpSession 对象内的属性集合免受并发访问，从而消除应用程序导致该集合损坏的机会。

这是安全的：

```
// guaranteed by the spec to be safe
request.getSession().setAttribute("foo", 1); 
```

这是**不安全**的：

```
HttpSession session = request.getSession();
Integer n = (Integer) session.getAttribute("foo");
// not thread safe
// another thread might be have got stale value between get and set
session.setAttribute("foo", (n == null) ? 1 : n + 1); 
```

*——[麦克道威尔的回答](https://stackoverflow.com/users/304/mcdowell)*

# perl - 我是否缺少任何模块来帮助我编写更好的代码？

> ID：11572213
> 
> 赞同：8
> 
> 时间：2012-07-20T02:58:22.237
> 
> 标签：perl, code-analysis

我正在使用以下命令来测试我的 perl 代码：

perl -MB::Lint::StrictOO -MO=Lint,all,oo -M-circular::require -M-indirect -Mwarnings::method -Mwarnings::unused -c $file

在 perl 版本低于 5.10 的系统上，我也在使用 uninit。

我也在使用 Perl::Critic 和 Perl::Tidy，并根据自己的喜好设置了适当的 rc 文件。

这些模块在帮助我改掉第一次学习 perl 时养成的一些坏习惯方面做得很好。

当我搞砸时，是否还有更多的模块或编译指示可以让我重回正轨？

使用测试，以及 Test::* 系列模块和一些好书已经被指出。这些新信息使我重新考虑了一些关于测试和代码技能构建之间关系的假设。这些都受到赞赏，并且已经被研究并投入使用。

在我看来，这是一个整体的两个独立部分。'perl -c'、Perl::Critic 和 Perl::Tidy 在编写代码的过程中和执行代码之前都有帮助。Devel::Cover、Devel::NYTProf 和测试发生在代码执行期间和之后。

良好的开发需要一个迭代过程，因此将运行测试，并且一遍又一遍地开发代码，但我们仍然有这种分离。

在我看来，答案的重点是代码的“执行期间和执行后”。再次，非常感谢。我可以假设我已经很好地完成了“写作和预执行”部分吗？至少，就编译指示、模块和实用程序而言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:49:41.847

我有点担心您使用的是 Perl 5.9。有两个原因。

首先它有点旧。5.9.0 于 2003 年发布，5.9.5（5.9.x 系列的最后一个版本）于 2007 年发布。从那时起，Perl 出现了几个高质量的版本。

其次（也是最重要的），5.9 是 Perl 的不稳定开发版本。5.9 基本上是最终导致 Perl 5.10.0 的一系列实验。使用它的唯一原因是测试 5.10 将是 Perl 的稳定版本。现在根本没有人应该使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:54:35.377

您似乎没有在测试您的代码，只是检查它是否可以编译。我建议你看一下 Test::More （这使得编写实际测试变得又好又容易）、 Test::Class （这使得处理非常大的测试套件更容易）和 Devel::Cover （看看你的代码的哪些位被你的测试覆盖，而哪些不是）。

# java - Java Mac Xboot 类路径

> ID：11572217
> 
> 赞同：0
> 
> 时间：2012-07-20T02:58:31.127
> 
> 标签：java, macos

在我去的任何教程中，例如[this](http://blogs.sourceallies.com/2010/02/replacing-and-patching-java-application-and-core-classes/)，使用 Xbootclasspath 它是：

```
java -Xbootclasspath/p:/path/to/class:/path/to/rt.jar class 
```

问题是 Mac Java 没有 rt.jar。我尝试使用 classes.jar 执行此操作，但没有成功。有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:42:51.153

问题是 classes.jar 的路径使用了符号链接文件夹。我改用了实际的文件夹，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T05:42:10.637

在 mac (homebrew) 上使用最新的 oracle java 时，会出现 rt.jar 文件。

爪哇版：

```
java version "1.8.0_92"
Java(TM) SE Runtime Environment (build 1.8.0_92-b14)
Java HotSpot(TM) 64-Bit Server VM (build 25.92-b14, mixed mode) 
```

# c# - 顶点属性缓冲区绑定到错误的属性

> ID：11572218
> 
> 赞同：1
> 
> 时间：2012-07-20T02:58:34.900
> 
> 标签：c#, opengl, glsl, opentk

当我将缓冲区绑定到着色器的属性时，它们似乎被翻转了。

所以，我有一个顶点着色器：

> ```
> precision highp float;
> 
> uniform mat4 projection_matrix;
> uniform mat4 modelview_matrix;
> 
> in vec3 in_position;
> in vec3 in_color;
> 
> out vec3 ex_Color;
> 
> void main(void)
> { 
>   gl_Position = projection_matrix * modelview_matrix * vec4(in_position, 1);
>   ex_Color = in_color;
> } 
> ```

和片段着色器

> ```
> precision highp float;
> 
> in vec3 ex_Color;
> 
> out vec4 out_frag_color;
> 
> void main(void)
> {
>   out_frag_color = vec4(ex_Color, 1.0);
> } 
> ```

没什么太复杂的。有两个输入：一个用于顶点位置，一个用于颜色。（作为新手，我还不想处理纹理或光线。）

现在，在我的客户端代码中，我将数据放入两个向量数组，positionVboData 和 colorVboData，然后创建 VBO...

> ```
> GL.GenBuffers(1, out positionVboHandle);
> GL.BindBuffer(BufferTarget.ArrayBuffer, positionVboHandle);
> GL.BufferData<Vector3>(BufferTarget.ArrayBuffer,
>                        new IntPtr(positionVboData.Length * Vector3.SizeInBytes),
>                        positionVboData, BufferUsageHint.StaticDraw);
> 
> GL.GenBuffers(1, out colorVboHandle);
> GL.BindBuffer(BufferTarget.ArrayBuffer, colorVboHandle);
> GL.BufferData<Vector3>(BufferTarget.ArrayBuffer,
>                 new IntPtr(colorVboData.Length * Vector3.SizeInBytes),
>                 colorVboData, BufferUsageHint.StaticDraw); 
> ```

然后，我**希望**以下代码能够将 vbos 绑定到着色器的属性：

> ```
>  GL.EnableVertexAttribArray(0);
>     GL.BindBuffer(BufferTarget.ArrayBuffer, positionVboHandle);
>     GL.VertexAttribPointer(0, 3, VertexAttribPointerType.Float, true, Vector3.SizeInBytes, 0);
>     GL.BindAttribLocation(shaderProgramHandle, 0, "in_position");
> 
>     GL.EnableVertexAttribArray(1);
>     GL.BindBuffer(BufferTarget.ArrayBuffer, colorVboHandle);
>     GL.VertexAttribPointer(1, 3, VertexAttribPointerType.Float, true, Vector3.SizeInBytes, 0);
>     GL.BindAttribLocation(shaderProgramHandle, 1, "in_color"); 
> ```

但是，实际上我必须在最后一个代码示例中交换 positionVboHandle 和 colorVboHandle ，然后它才能完美运行。但这对我来说似乎倒退了。我错过了什么？

* * *

更新

奇怪的事情正在发生。如果我将顶点着色器更改为：

> ```
> precision highp float;
> 
> uniform mat4 projection_matrix;
> uniform mat4 modelview_matrix;
> 
> in vec3 in_position;
> in vec3 in_color;
> 
> out vec3 ex_Color;
> 
> void main(void)
> {
>   gl_Position = projection_matrix * modelview_matrix * vec4(in_position, 1);
>   //ex_Color = in_color;
>   ex_Color = vec3(1.0, 1.0, 1.0);
> }" 
> ```

并且不进行任何其他更改（除了建议在所有设置后移动程序链接的修复，它将正确的属性，顶点位置加载到 in_position 而不是 in_color 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:12:43.193

[GL.BindAttribLocation](http://www.opengl.org/wiki/GLAPI/glBindAttribLocation)必须在 GL.LinkProgram 之前执行。你在这个代码片段之后调用 GL.LinkProgram 吗？

编辑：回答您的更新 - 因为您不使用 in_color，所以 OpenGL 会简单地忽略此输入。并且您的顶点着色器仅将 in_position 作为输入。很可能它将它绑定在位置 0。这就是您的代码有效的原因。您应该在链接程序之前绑定位置，如上面链接中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:09:18.593

因此，在 Mārtiņš Možeiko 的帮助下，我能够弄清楚这一点。我在 LinkProgram 之前正确调用了 BindAttribLocation。但是，在绑定任何属性位置之前，我没有调用 GL.CreateProgram() 。

# c++ - 自定义字符串文字

> ID：11572219
> 
> 赞同：2
> 
> 时间：2012-07-20T02:58:35.687
> 
> 标签：c++, objective-c, cstring, string-literals, wchar

出于好奇，我想知道不同的文件如何能够分配某些符号以将它们的常规 c 字符串文字更改为其他文字。

例如...

在 Objective-C 中，NSString 字面量可以写成`@"..."`

在 C++ 中（我认为），C++ 字符串字面量是这样写的`S"..."`

在 wchar 库中， wchar_t 文字是 writtel`L"..."`

谁能告诉我如何做一个字符串，如 MyClass 文字`#"..."`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:13:36.370

你只能使用这样的东西。

```
#include <iostream>
#include <string>

struct MyClass
{
public:
   MyClass(const char* a, size_t sz):
   s(a, sz)
   {
   }
   std::string get() const { return s; }
private:
   std::string s;
};

MyClass operator "" _M(const char* arr, size_t size) { return MyClass(arr, size); }

int main()
{
   MyClass c = "hello"_M;
   std::cout << c.get() << std::endl;
} 
```

C++11 允许用户定义的文字。[http://liveworkspace.org/code/cfff55e34d3b707e1bf0cb714e8e8f29](http://liveworkspace.org/code/cfff55e34d3b707e1bf0cb714e8e8f29)
但是没有能力定义前缀文字。

# objective-c - Objective c iphone音乐播放器崩溃

> ID：11572223
> 
> 赞同：1
> 
> 时间：2012-07-20T02:58:53.217
> 
> 标签：objective-c, ios, jailbreak, mpmusicplayercontroller

我正在创建一个非应用商店越狱调整，我遇到了一个导致我的应用崩溃的问题。

我在用`musicPlayer = [MPMusicPlayerController iPodMusicPlayer];`

音乐播放器功能齐全，播放/暂停，下一个，上一个。它显示歌曲的标题、艺术家、艺术品和所有内容。

问题似乎是音乐播放器的加载和卸载。

例如，如果我正在运行应用程序，并且我关闭了 iphone 的音乐应用程序，这将导致我的应用程序崩溃。另外，如果我在没有在后台运行音乐应用程序的情况下加载应用程序，它也会崩溃。

只要音乐应用程序在后台运行，我的应用程序就不会崩溃。谁能帮我这个？

有什么要设置为零吗？或者我该如何释放它们？他们应该是综合/财产吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:17:13.323

我的调整也遇到了这个问题，我想不出办法来解决它。我最终使用了 AVPlayer 方法，它似乎对我很有效。当然，我只需要播放一首歌，所以如果你需要播放某种播放列表，那你就不走运了。

我在 mediapickerclass 中像下面这样使用它：

```
NSURL *url = [[mediaItemCollection.items objectAtIndex: 0] valueForProperty:MPMediaItemPropertyAssetURL]
AVPlayerItem *playerItem = [[AVPlayerItem alloc] initWithURL:url];
AVPlayer *player = [[AVPlayer alloc] initWithPlayerItem:playerItem];
[player play]; 
```

如果您需要从其他地方引用它，您只需将 url 写入 .plist

# asp.net - BC30203：标识符预期 VS2010 和 2012

> ID：11572225
> 
> 赞同：0
> 
> 时间：2012-07-20T02:59:08.697
> 
> 标签：asp.net, visual-studio-2010, exception, asp.net-mvc-4, partial-views

我的`BC30203: Identifier expected`ASP.NET MVC 4 项目出现错误。我对为什么会发生这种情况一无所知，我感到非常沮丧。我不知道错误在哪里（除了班级）。

我什至好几天都没有碰过这个页面（上次它正在工作），现在我得到了错误。清除临时文件，.NET Framework 临时文件也无济于事，重新启动，重新安装 VS。我什至没有运气从 2010 切换到 2012RC。我完全不知所措。

我已经删除了越来越多的代码，而且每当我声明一个变量时似乎都会发生这种情况。这不是我的模型或其他任何东西，因为它们 100% 有效，只是不在这一页中。

以下是部分视图的代码：

```
@ModelType Frontend.Models.Collection 

@Code
    ViewData("Title") = "GetFilters"
End Code

@AddSeparator("Options")
@Options

@Helper Options()   

    Dim less As String=String.Empty
    @<div class="ui-splitbutton filter">
        <a class="@less" href="#" title="Show only basic filters" rel="nofollow">Show less</a>
        <a class="" href="#" title="Show all available filters" rel="nofollow">Show more</a> 
    </div>

    @<div>
        <a class="button clear_filters filter" href="#" title="Remove all applied filters" rel="nofollow">Clear filters</a>
     </div>

End Helper

@Helper AddSeparator(text As String)                                               
    @<div class="separator">
        <span>@text</span>
    </div>
End Helper 
```

这是我呈现页面的方式：

```
@Code
    Html.RenderPartial("_PartialFilters", Model)
End code 
```

这是一个例外：

```
System.Web.HttpCompileException was unhandled by user code
  ErrorCode=-2147467259
  HResult=-2147467259
  Message=C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\3a7646ef\5efed268\App_Web__partialfilters.vbhtml.34d3db15.w7n2unx9.0.vb(60): error BC30203: Identifier expected.
  Source=System.Web
  SourceCode=#ExternalChecksum("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml","{ff1816ec-aa5e-4d10-87f7-6f4963833460}","EE63B19A6BCF554D9625D51B8F673B27C85CCC09")
'------------------------------------------------------------------------------
' <auto-generated>
'     This code was generated by a tool.
'     Runtime Version:4.0.30319.17626
'
'     Changes to this file may cause incorrect behavior and will be lost if
'     the code is regenerated.
' </auto-generated>
'------------------------------------------------------------------------------

Option Strict Off
Option Explicit On

Imports System
Imports System.Collections.Generic
Imports System.IO
Imports System.Linq
Imports System.Net
Imports System.Web
Imports System.Web.Helpers
Imports System.Web.Mvc
Imports System.Web.Mvc.Ajax
Imports System.Web.Mvc.Html
Imports System.Web.Routing
Imports System.Web.Security
Imports System.Web.UI
Imports System.Web.WebPages

Namespace ASP

    Public Class _Page_Views_Browse__PartialFilters_vbhtml
        Inherits System.Web.Mvc.WebViewPage(Of Frontend.Models.Collection)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 10)
Public Function Options() As System.Web.WebPages.HelperResult

#End ExternalSource
Return New System.Web.WebPages.HelperResult(Sub (__razor_helper_writer)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 10)

    Dim less As String=String.Empty

#End ExternalSource
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 202, 4, true)
WriteLiteralTo(__razor_helper_writer, "    ")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 202, 4, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 207, 4, true)
WriteLiteralTo(__razor_helper_writer, "<div")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 207, 4, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 211, 30, true)
WriteLiteralTo(__razor_helper_writer, " class=""ui-splitbutton filter""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 211, 30, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 241, 13, true)
WriteLiteralTo(__razor_helper_writer, ">"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"        <a")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 241, 13, true)
WriteAttributeTo(__razor_helper_writer, "class", Tuple.Create(" class=""", 254), Tuple.Create("""", 267) _, Tuple.Create(Tuple.Create("", 262), Tuple.Create(Of System.Object, System.Int32)(less _, 262), False) _)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 268, 9, true)
WriteLiteralTo(__razor_helper_writer, " href=""#""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 268, 9, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 277, 32, true)
WriteLiteralTo(__razor_helper_writer, " title=""Show only basic filters""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 277, 32, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 309, 15, true)
WriteLiteralTo(__razor_helper_writer, " rel=""nofollow""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 309, 15, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 324, 26, true)
WriteLiteralTo(__razor_helper_writer, ">Show less</a>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"        <a")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 324, 26, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 350, 9, true)
WriteLiteralTo(__razor_helper_writer, " class=""""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 350, 9, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 359, 9, true)
WriteLiteralTo(__razor_helper_writer, " href=""#""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 359, 9, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 368, 35, true)
WriteLiteralTo(__razor_helper_writer, " title=""Show all available filters""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 368, 35, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 403, 15, true)
WriteLiteralTo(__razor_helper_writer, " rel=""nofollow""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 403, 15, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 418, 29, true)
WriteLiteralTo(__razor_helper_writer, ">Show more</a> "&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"    </div>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 418, 29, true)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 17)

#End ExternalSource
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 449, 4, true)
WriteLiteralTo(__razor_helper_writer, "    ")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 449, 4, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 454, 17, true)
WriteLiteralTo(__razor_helper_writer, "<div>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"        <a")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 454, 17, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 471, 36, true)
WriteLiteralTo(__razor_helper_writer, " class=""button clear_filters filter""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 471, 36, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 507, 9, true)
WriteLiteralTo(__razor_helper_writer, " href=""#""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 507, 9, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 516, 35, true)
WriteLiteralTo(__razor_helper_writer, " title=""Remove all applied filters""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 516, 35, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 551, 15, true)
WriteLiteralTo(__razor_helper_writer, " rel=""nofollow""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 551, 15, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 566, 33, true)
WriteLiteralTo(__razor_helper_writer, ">Clear filters</a>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"     </div>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 566, 33, true)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 21)

#End ExternalSource
End Sub)
End Function

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 24)
Public Function AddSeparator(text As String) As System.Web.WebPages.HelperResult

#End ExternalSource
Return New System.Web.WebPages.HelperResult(Sub (__razor_helper_writer)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 24)

#End ExternalSource
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 727, 4, true)
WriteLiteralTo(__razor_helper_writer, "    ")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 727, 4, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 732, 4, true)
WriteLiteralTo(__razor_helper_writer, "<div")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 732, 4, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 736, 18, true)
WriteLiteralTo(__razor_helper_writer, " class=""separator""")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 736, 18, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 754, 17, true)
WriteLiteralTo(__razor_helper_writer, ">"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"        <span>")
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 754, 17, true)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 772, 4, false)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 26)
WriteTo(__razor_helper_writer, text)

#End ExternalSource
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 772, 4, false)
BeginContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 776, 21, true)
WriteLiteralTo(__razor_helper_writer, "</span>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&"    </div>"&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))
EndContext(__razor_helper_writer, "~/Views/Browse/_PartialFilters.vbhtml", 776, 21, true)

#ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml", 28)

#End ExternalSource
End Sub)
End Function

        Public Sub New()
            MyBase.New
        End Sub

        Protected ReadOnly Property ApplicationInstance() As ASP.global_asax
            Get
                Return CType(Context.ApplicationInstance,ASP.global_asax)
            End Get
        End Property

        Public Overrides Sub Execute()
BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 40, 2, true)

WriteLiteral(""&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))

EndContext("~/Views/Browse/_PartialFilters.vbhtml", 40, 2, true)

            #ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml",3)

    ViewData("Title") = "GetFilters"

            #End ExternalSource
BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 95, 4, true)

WriteLiteral(""&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))

EndContext("~/Views/Browse/_PartialFilters.vbhtml", 95, 4, true)

BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 100, 23, false)

            #ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml",7)
Write(AddSeparator("Options"))

            #End ExternalSource
EndContext("~/Views/Browse/_PartialFilters.vbhtml", 100, 23, false)

BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 123, 2, true)

WriteLiteral(""&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))

EndContext("~/Views/Browse/_PartialFilters.vbhtml", 123, 2, true)

BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 126, 7, false)

            #ExternalSource("C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\_PartialFilters.vbhtml",8)
Write(Options)

            #End ExternalSource
EndContext("~/Views/Browse/_PartialFilters.vbhtml", 126, 7, false)

BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 133, 4, true)

WriteLiteral(""&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))

EndContext("~/Views/Browse/_PartialFilters.vbhtml", 133, 4, true)

BeginContext("~/Views/Browse/_PartialFilters.vbhtml", 638, 4, true)

WriteLiteral(""&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10)&Global.Microsoft.VisualBasic.ChrW(13)&Global.Microsoft.VisualBasic.ChrW(10))

EndContext("~/Views/Browse/_PartialFilters.vbhtml", 638, 4, true)

        End Sub
    End Class
End Namespace

  WebEventCode=0
  StackTrace:
       at System.Web.Compilation.AssemblyBuilder.Compile()
       at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
       at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
       at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
       at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
       at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
       at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
       at System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
       at System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
       at System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
       at System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
       at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
       at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
       at System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
       at System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode)
       at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
       at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
       at System.Web.Mvc.VirtualPathProviderViewEngine.FindPartialView(ControllerContext controllerContext, String partialViewName, Boolean useCache)
       at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClass8.<FindPartialView>b__7(IViewEngine e)
       at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
       at System.Web.Mvc.ViewEngineCollection.Find(Func`2 cacheLocator, Func`2 locator)
       at System.Web.Mvc.ViewEngineCollection.FindPartialView(ControllerContext controllerContext, String partialViewName)
       at System.Web.Mvc.HtmlHelper.FindPartialView(ViewContext viewContext, String partialViewName, ViewEngineCollection viewEngineCollection)
       at System.Web.Mvc.HtmlHelper.RenderPartialInternal(String partialViewName, ViewDataDictionary viewData, Object model, TextWriter writer, ViewEngineCollection viewEngineCollection)
       at System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(HtmlHelper htmlHelper, String partialViewName, Object model)
       at ASP._Page_Views_Browse_Index_vbhtml.Execute() in C:\Users\Amy Pond\Documents\ilovetv\Code\Store\Frontend\Views\Browse\Index.vbhtml:line 16
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
       at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
       at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
       at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:44:06.483

当我有一个没有此行的简单页面时，我遇到了同样的问题，因为我不想要站点管理员。当我把它放进去时，它是好的。

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:07:56.460

对于发生这种情况且无法解决的其他任何人...

对我来说，在部分页面中，我创建了很多下拉菜单和其他控件。我为此制作了一个助手，并将大部分代码移至 @Function 助手并使用 TagBuilder。

我不认为这是一个便宜的解决方法 - 太多了。我仍然不知道根本原因。

# ios - 如何将此 C 库添加到我的 iOS Xcode 4 项目中？

> ID：11572228
> 
> 赞同：0
> 
> 时间：2012-07-20T02:59:11.880
> 
> 标签：ios, c, xcode, static-libraries

我正在尝试将 openjpeg 库添加到我的 XCode 4 项目中，以便我可以将 iPhone 相机拍摄的图像压缩为 jpeg2000。

我在 OS/X 上使用 Cmake 构建了静态库 (libopenjpeg.a)。（我猜这可能是第一个错误，它需要由 XCode 构建，因此它是为 iPhone 架构而不是 OS X 构建的）。

我在**链接二进制文件中**添加了我的目标库中的库。

该项目成功构建，但我似乎无法将库中的任何头文件导入到我的任何 Objective-C 类中。我尝试手动将包含 libopenjpeg 头文件的文件夹添加到用户头搜索路径，但这似乎没有做任何事情。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:25:19.067

对于最简单的解决方案

将头文件导入您的项目源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:34:20.393

您仍然可以使用 CMake 在命令行上构建它，您只需修改 CMakeLists.txt 文件，以便在编译时传递正确的标志。

然而，正如 Gavin 所说，将头文件和源文件从库中拖到 Xcode 项目中并放弃构建静态库可能更简单。

# javascript - 引用 javascript 对象中的另一个字段

> ID：11572232
> 
> 赞同：13
> 
> 时间：2012-07-20T02:59:35.327
> 
> 标签：javascript

我在 javascript 中有一个对象：

```
admins: {
    articles: {
        path: '/admins/articles',
        template: '/views/admins/articles.html',
        link: function() {
            return path;  // !!! how to reference the 'path'?
        }
    }
} 
```

我有很多这样的对象，每个对象都有一个`path`字段和一个`link`函数。我想使用 中的字段`path`，`link`但我不能只使用`path`.

我应该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T03:23:00.970

您可以使用`this`来引用对象。标准的`object.method()`“点”语法将设置`this`为`object`within `method`：

```
var someObj = {
    admins: {
        articles: {
            path: '/admins/articles',
            template: '/views/admins/articles.html',
            link: function() {
                return this.path; // !!! how to reference the 'path'?
            }
        }
    }
};

var returnedPath = someObj.admins.articles.link(); 
```

演示：http: [//jsfiddle.net/2Pt7n/](http://jsfiddle.net/2Pt7n/)

（还有其他方法可以调用一个`this`不会设置为适当对象的函数，但我希望它们在这里不适用——你并没有真正说出你是如何使用对象或调用函数的，但是如果不是我展示的方式那么请更新你的问题，我会相应地更新我的答案。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-03T05:27:10.837

我只是指出你不想在这里使用 ES6 胖箭头，因为在这种情况下不会有**this**指针：

```
var someObj = {
    admins: {
        articles: {
            path: '/admins/articles',
            template: '/views/admins/articles.html',
            link: () => {
                return this.path; // 'this' is undefined
            }
        }
    }
}; 
```

> someObj.admins.articles.link() === 未定义

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T03:02:28.953

您展示的不是 JSON。它是一个 Javascript 对象，与 JSON 不同。JSON 是一种严格定义的数据序列化格式，它是 Javascript 对象文字的子集。

如您所愿，Javascript 没有提供用于在对象文字中引用对等属性的语法。命名它们是一种想法，但它无济于事，因为在定义文字时名称将不存在，因此您无法在文字本身中使用该名称。

另外，请注意您定义的语法使对象不平衡：您可以访问 path as `obj.admins.articles.path`，但 link 是您必须调用的函数：`obj.admins.articles.link()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T03:12:15.110

我不会谈论这不是 JSON（其他人很好地涵盖了它）。

你可以这样做来获取路径：

```
return admins.articles.path; 
```

这是一个显示它工作的小提琴：http: [//jsfiddle.net/UwbLt/](http://jsfiddle.net/UwbLt/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T03:30:38.147

我正在阅读答案，甚至理解一些用户的观点（JSON 应该仅用于数据）并同意这是正确的，我刚刚创建了一个概念证明示例。看一看。

```
// just a regular object
var obj = {
    a: "aaa",
    b: "bbb",
    c: function() {
        return this.a;
    }
};

console.log( obj.c() ); // prints "aaa"

// isn't it json just because it has a function? ExtJS will treat it like JSON, but jQuery not
var json = "{" +
    "\"a\": \"aaa\", " +
    "\"b\": \"bbb\", " +
    "\"c\": function() {" +
    "    return this.a;" +
    "}" +
"}";

// ok, the "json" above
console.log( json );

//var jsonObj = $.parseJSON( json ); // does not work
//var jsonObj = eval( json ); // does not work too
var jsonObj = Ext.decode( json ); // it works! shortcut for Ext.JSON.decode

console.log( jsonObj.c() );       // prints "aaa" 
```

nnnnnn 发布的内容几乎相同，但我想我也会发布它，只是为了补充答案。jsFiddle：http: [//jsfiddle.net/davidbuzatto/rhKAM/](http://jsfiddle.net/davidbuzatto/rhKAM/)

所以我认为，即使与 JSON 的定义相矛盾，JSON 也可能具有（或应该具有？）使用常规对象初始化器 sintax 创建的对象的相同特征，因为它的名称是**JavaScript**对象表示法，而不是“轻量级”对象表示法. 我知道，我知道，反序列化器将无法根据目标语言反序列化函数，但为什么 ExtJS 支持这种“行为”？可以在这里找到一个很好的讨论：[在 JSON 结果中定义函数是否有效？](https://stackoverflow.com/questions/2001449/is-it-valid-to-define-functions-in-json-results)

只是为了澄清。我在我的 JSON 中不使用（我也不会使用）函数。

# ruby - 使用 ruby 对多维数组进行排序

> ID：11572233
> 
> 赞同：0
> 
> 时间：2012-07-20T02:59:48.453
> 
> 标签：ruby, sorting, hash

我在 ruby​​ 中对多维数组进行排序时遇到问题，找不到任何与我的问题类似的问题。我有一个数组/哈希还是两者都有？（对不起，我来自 ac/php/java 背景，这是我第一次使用 Ruby）

```
user['shapeshifter'] = {age => '25', country => 'Australia'}
user['user2'] = {age => '29', country => 'Australia'}
user['user3'] = {age => '21', country => 'Russia'} 
```

我想根据年龄对用户数组进行排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:22:44.607

您需要一个哈希哈希，以及用于排序哈希的 ruby​​ 1.9.2，IIRC。这在[按键排序散列，在 Ruby 中返回散列中进行了介绍](https://stackoverflow.com/questions/4339553/sort-hash-by-key-return-hash-in-ruby)

假设您的测试用例已修复，因此它是有效的：

```
user = {}
user['shapeshifter'] = {:age => 25, :country => 'Australia'}
user['user2'] = {:age => 29, :country => 'Australia'}
user['user3'] = {:age => 21, :country => 'Russia'} 
```

只需要：

```
user.sort_by {|key,value| value[:age]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:48:55.520

目前 ruby​​ 1.9 已经排序哈希但仍然不存在重新排序功能。

您可以尝试对数组对进行排序，然后创建一个新的哈希。像这样

```
user = {}
user['shapeshifter'] = {:age => '25', :country => 'Australia'}
user['user2'] = {:age => '29', :country => 'Australia'}
user['user3'] = {:age => '21', :country => 'Russia'}

result1 = user.sort { |user1, user2|
  user1[1][:key] <=> user2[1][:key] # user1,2 = [key, value] from hash
}
puts Hash[result1].inspect

or this

result2 = user.sort_by { |user_key, user_val|
  user_val[:key]
}
puts Hash[result2].inspect 
```

# solr - 使用 SolrNet 为带有附加搜索字段的 PDF 文档编制索引？

> ID：11572236
> 
> 赞同：0
> 
> 时间：2012-07-20T03:00:04.607
> 
> 标签：solr, solrnet

我发现[这篇文章](https://stackoverflow.com/questions/8935060/index-pdf-documents-in-solr-from-c-sharp-client)在索引文档时很有用，但是，我怎样才能附加其他字段，以便我可以传入我们数据库中文档的 ID 以用于显示搜索结果？我认为通过使用 Fields (Of the ExtractParameters 类) 属性，我可以用文档索引其他数据，但这似乎不起作用，或者这不是它的功能。

示例代码：

```
var solr = ObjectLocator.Instance.Resolve<ISolrOperations<IndexDocument>>();
            var guid = Guid.NewGuid().ToString();
            using (var fileStream = System.IO.File.OpenRead(Server.MapPath("~/files/") + "greenroof.pdf"))
            {

                var response =
                    solr.Extract(
                        new ExtractParameters(fileStream, "greenRoof1234")
                        {
                            ExtractFormat = ExtractFormat.Text,
                            ExtractOnly = false,
                            Fields = new[] { new ExtractField("field1", "value1"), new ExtractField("field2", "value2") }

                        });
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:42:23.333

@aitchnyu 是正确的，通过该`literal.field=value`方法传递值是正确的方法。

但是，根据[SolrNet Google Group中有关](https://groups.google.com/forum/?fromgroups#!forum/solrnet)[ExtractingRequestHandler 支持](https://groups.google.com/forum/?fromgroups#!topic/solrnet/i6vyLIPlmqE)的这篇文章，ExtractParameters.Fields 存在一个错误，无法正常工作。这已在 SolrNet 的 0.4.0.X 版本中得到修复。请确保您使用的是最新版本的 SolrNet 之一。您可以通过以下方式之一获得：

*   [项目网站下载](http://code.google.com/p/solrnet/downloads/list)
*   [NuGet 预发布包](http://nuget.org/packages/SolrNet/0.4.0-beta2)

此外，该讨论还提供了一些在 SolrNet 中使用 ExtractingRequestHandler 的好示例，以及在您无法升级到较新版本的 SolrNet 时添加其他字段值的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:46:07.880

这已经足够了：[http](http://wiki.apache.org/solr/ExtractingRequestHandler#Literals) ://wiki.apache.org/solr/ExtractingRequestHandler#Literals 。

一般使用`literal.field=value`一会儿上传。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:21:10.907

结果证明这不是 SOLRNet 的问题，而是我对 SOLR 的了解。我需要在我的架构中指定字段。在我将字段添加到我的架构后，它们在我的 SOLR 查询中可见。

# php - Facebook 应用程序未正确发布到时间线

> ID：11572237
> 
> 赞同：1
> 
> 时间：2012-07-20T03:00:13.373
> 
> 标签：php, facebook-graph-api

我们正在编写一个 facebook 应用程序，当人们参加比赛时，它会在人们的墙上创建一个帖子。我们在创建帖子的内容时遇到问题。

状态消息和链接按预期运行，但是图片、名称、标题和描述是从帖子链接到的页面中获取的。

这是我们用来发布到人们的墙的代码：

```
$facebook->api("/me/feed", "post", array(
    message => "I've just chosen my kangaroo to win a ticket to the Caravan, Camping and Off-Road Sale at the Adelaide Showgrounds (August 2-5). Be quick, there are only 1000 tickets up for grabs! Just click the link below.",
  picture => "http://gmbo.com.au/hosted/cca/pak/app-icon.png",
   link => "http://www.facebook.com/pages/WEIM-Sandbox-2/241942125896015?sk=app_416990981685156",
    name => "CLICK HERE",
    caption => "If you love caravans, camping or outdoor recreation - you'll love this Show.",
    description => "If you love caravans, camping or outdoor recreation - you'll love this Show." 
```

任何帮助将不胜感激，这个 Facebook API 的东西可能非常令人沮丧。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:02:39.613

您缺少`' '`每个属性。此外，您忘记关闭括号。

```
$facebook->api("/me/feed", "post", array(
    'message' => "I've just chosen my kangaroo to win a ticket to the Caravan, Camping and Off-Road Sale at the Adelaide Showgrounds (August 2-5). Be quick, there are only 1000 tickets up for grabs! Just click the link below.",
    'picture' => "http://gmbo.com.au/hosted/cca/pak/app-icon.png",
    'link' => "http://www.facebook.com/pages/WEIM-Sandbox-2/241942125896015?sk=app_416990981685156",
    'name' => "CLICK HERE",
    'caption' => "If you love caravans, camping or outdoor recreation - you'll love this Show.",
    'description' => "If you love caravans, camping or outdoor recreation - you'll love this Show."
)); 
```

如果它仍然不起作用，请检查您是否`publish_stream`在 fbmain.php 中获得了许可。

您可以参考[PHP SDK 和 JavaScript SDK Feed Dialog](https://stackoverflow.com/questions/10649256/suggest-page-to-friends-using-php-sdk/10869074#10869074)获取更多示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T04:49:49.867

这段代码没有任何问题。你不需要引号。

这是一个 Facebook API 错误。我们尝试了您提到的内容，但有一个已知的错误。我们试图做的事情过于雄心勃勃，以至于可怜的小 Facebook 无法包裹它的小脑袋。

# php - 如何将 CodeIgniter 会话中的模型对象从控制器传递到控制器？

> ID：11572240
> 
> 赞同：0
> 
> 时间：2012-07-20T03:00:27.260
> 
> 标签：php, model-view-controller, codeigniter, codeigniter-2, codeigniter-datamapper

我对 CI 相当陌生，我正在使用它完成一个项目。

我正在使用 CI 2.1.2 DataMapper 1.8.2.1。

我正在尝试将登录表单发布到[http://www.example.com/userauthcontroller/login](http://www.example.com/userauthcontroller/login) 我能够点击该功能并按应有的方式进行身份验证。主要是使用DataMapper的例子和代码。

用户验证控制器.php：

```
public function login(){
    $params = $this->input->post();
    $url = $params['url'];
    $loginId = $params['loginid'];
    $password = $params['loginpass'];
    $u = new User();
    $u->username = $loginId;
    $u->pass_word =$password;
    if($u->login()){
        $confirmedUser = $u->get_where(array('id' => $u->id));
        $CI =& get_instance();
        $CI->session->set_userdata(array('currentuser' => $confirmedUser));
        //print_r($CI->session->userdata('currentuser'); // works
        //die();
        //tried this too
        //$this->session->set_userdata(array('currentuser' => $confirmedUser));
        redirect($url);
    }else{
        echo '<p>' . $u->error->login . '</p>';
    }
} 
```

当我重定向到欢迎控制器时，我在会话中找不到当前用户。

欢迎.php：

```
function index(){
    $data['site_title'] = "My Site Title";
    $data['view_file'] = "layout_views/home_view";

    $CI =& get_instance();
    $user = $CI->session->userdata('currentuser');

    $data['currentuser'] = $user;
    print_r($user);
    print("<BR/>");
    print_r($data);
    die();
    //If I let this continue into my view $currentuser is not available.
    $this->load->view('index_view', $data);
} 
```

home_view.php：

```
<p><? echo $currentuser ?></p> <!-- this does not print -->
<p><? echo $site_title ?></p>  <!-- this prints --> 
```

application/config/autoload.php：（我知道的相关条目）

```
$autoload['libraries'] = array('database', 'datamapper', 'session');
$autoload['packages'] = array(APPPATH.'third_party/datamapper'); 
```

我对此进行了一些搜索……我什至检查了拼写错误。

任何建议，将不胜感激。

如果需要更多信息，我会经常回来查看。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:17:15.193

感谢Yan，它让我朝着正确的方向前进。我不知道这是否是最好的方法，但它正在工作。

userauthcontroller.php：

```
public function login(){
    $params = $this->input->post();
    $url = $params['url'];
    $loginId = $params['loginid'];
    $password = $params['loginpass'];
    $u = new User();
    $u->username = $loginId;
    $u->pass_word =$password;
    if($u->login()){
        $confirmedUser = new User(array('id' => $u->id));
        $CI =& get_instance();
        $CI->session->set_userdata(array('currentuser_id' => $u->id));
        $CI->session->set_userdata(array('currentuser' => $confirmedUser));
        redirect($url);
    }else{
        echo '<p>' . $u->error->login . '</p>';
    }
} 
```

欢迎.php：

```
 function index(){
    $data['site_title'] = "PrimitiveSurvival.com";
    $data['view_file'] = "layout_views/home_view";
    $CI =& get_instance();
    $u = new User($CI->session->userdata('currentuser_id'));
    if($u->id != null){
        $u->group->get_iterated();
        $data['currentuser'] = $u;
    }else{
        $data['currentuser'] = "";
    }
    $this->load->view('index_view', $data);
} 
```

home_view.php：

```
 <?php
  if($currentuser != ""){
     print($currentuser->username);
  }else{
     print("User not logged in.");
  } 
```

如果有更好的方法或我遗漏的东西，请务必改进此答案。?>

# android - android:layout_weight 与垂直线性布局

> ID：11572241
> 
> 赞同：0
> 
> 时间：2012-07-20T03:00:33.923
> 
> 标签：android, xml, layout

我正在尝试创建一个 android 布局，例如：

[####EditText###][按钮]

[＃＃＃＃列表显示＃＃＃＃＃]

为此，我正在使用重量，但以下 xml 给了我一些非常奇怪的东西：

[editText][按钮][ListView]

有人知道为什么吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background"
    android:weightSum="10"
     >

    <EditText android:id="@+id/nova_lista"
        android:inputType="text"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="9"
        android:hint="@string/new_list_hint">

    </EditText>

    <Button android:id="@+id/nova_lista_botao"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:text="@string/new_list"/>

    <ListView
        android:id="@+id/list_of_lists"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T03:09:12.207

您正在使用`android:orientation="vertical"`

并且您指定`android:layout_width`等于`0dp`。

如果您在 LinearLayout中使用，对于垂直`layout layout_height`应该是`0 dp`，对于`Horizontal`布局`layout_width`应该是 0 dp 。`weight`

放在单独的`EditText`布局中。使用下面的代码`Button``Horizontal`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background"
     >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="10"
     >

    <EditText android:id="@+id/nova_lista"
        android:inputType="text"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="9"
        android:hint="@string/new_list_hint">

    </EditText>

    <Button android:id="@+id/nova_lista_botao"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:text="@string/new_list"/>
</LinearLayout>
    <ListView
        android:id="@+id/list_of_lists"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:17:50.150

也许这就是你正在寻找的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#ffffff" >    

    <EditText 
        android:id="@+id/nova_lista"       
        android:layout_height="wrap_content"
        android:layout_width="fill_parent" 
        android:layout_toLeftOf="@id/nova_lista_botao"
        android:inputType="text"       
        android:hint="something">

    </EditText>

    <Button 
        android:id="@+id/nova_lista_botao"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Hello"/>

    <ListView
        android:id="@+id/list_of_lists"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/nova_lista" >
    </ListView>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/873f2092f093e6042a96c0583ed4e64d.png)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:22:57.620

1.设置你的主要布局是RelativeLayout

2.创建LinearLayout并将EditText和Button移动到LinerLayout

3.设置LinerLayout为“@+id/top_layout”，设置listview为

> android:layout_below="@+id/top_layout"

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="@drawable/background"
   android:weightSum="10" >

    <LinearLayout
       android:id="@+id/top_layout"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal" >

        <EditText
           android:id="@+id/nova_lista"
           android:layout_width="0dp"
           android:layout_height="wrap_content"
           android:layout_weight="9"
           android:hint="@string/new_list_hint"
           android:inputType="text" >
        </EditText>

        <Button
        android:id="@+id/nova_lista_botao"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/new_list" />

    </LinearLayout>

    <ListView
       android:id="@+id/list_of_lists"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_below="@+id/top_layout" >
    </ListView>

</RelativeLayout> 
```

# javascript - 在 jquery 中创建一个元素

> ID：11572250
> 
> 赞同：2
> 
> 时间：2012-07-20T03:01:34.157
> 
> 标签：javascript, jquery, css, dom

所以，我知道如何以各种方式在 jQuery 中创建元素。但在今天之前我从未遇到过这个：

```
 var myspacer = $('<div />', {
        "id": "nav-spacer",
        "height": mynav.outerHeight()
    }); 
```

稍后在代码中，使用 jQuery 的 .before() 方法将此变量添加到 DOM。有人可以解释这里发生了什么吗？正在创建什么样的对象？jQuery 是如何知道如何将其转换为 HTML 元素的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:10:11.573

这就是[函数](http://api.jquery.com/jquery/)`$( html, props )`的语法——在[API 文档](http://api.jquery.com/jquery/)中解释得很清楚：[`jQuery()`](http://api.jquery.com/jquery/)

> `html`定义单个、独立的 HTML 元素（例如`<div/>`或`<div></div>`）的字符串。
> 
> `props`用于调用新创建元素的属性、事件和方法的映射。

如果函数确定第一个参数是一个看起来像 html 片段的字符串，它会从该片段创建一个新元素（或多个元素）。如果您在第二个参数中传递映射，它将在新创建的元素上创建指定的属性。

新元素不会自动添加到文档中，但您似乎已经看到了，因为您提到了添加它*的*`.before()`代码。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:06:10.720

根据 jQuery`$( html, properties)`语法，上面的代码创建了一个`div`with`id="nav-spacer"`和`height`提供的`mynav.outerHeight()`方法，没有任何内容作为 jQuery 对象，但没有添加到 DOM。

其中`$( html, properties)`，`html`是字符串，`properties`是属性/事件等的集合。

另一种方法可能是：

```
var myspacer = $('<div id="nav-spacer" height="'+ mynav.outerHeight() +'"></div>'); 
```

但是您的那个更具可读性和效率。

在作为参数传递的选择器之前将using**[`.before()`](http://api.jquery.com/before)**方法添加到 DOM。例子：`myspacer``.before()`

```
myspacer.before('div.hello'); 
```

将在with`myspacer`之前添加：`div``class=hello`

```
<div id="nav-spacer" height="some_value"></div>
<div class="hello"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T03:05:59.397

如果你传入 HTML，jQuery 会创建一个新元素，`$('<div/>')`因为它很聪明。:P 它识别出字符串是 HTML（而不是选择器）并区别对待。请参阅[文档](http://api.jquery.com/jQuery/#jQuery2)。

新元素已创建但*不会*添加到 DOM，直到您自己添加它，例如。与`appendTo()`.

来自[文档](http://api.jquery.com/jQuery/#jQuery2)：*“为确保跨平台兼容性，片段必须格式正确。可以包含其他元素的标签应与结束标签配对。”*

**编辑：**我的立场是正确的，你*可以*`$('<div/>')` *在没有*明确的结束标签的情况下编写。只要 HTML 不包含嵌套元素（当然），它就可以工作。请参阅文档中的其他示例：

```
// With nested elements and closing tags - HTML must be well formed
$("<div><p>Hello</p></div>").appendTo("body");

// Without closing tag - HTML is still well formed
$("<div/>", {
  "class": "test",
  text: "Click me!",
  click: function(){
    $(this).toggleClass("test");
  }
}).appendTo("body"); 
```

类似的问题：

*   [jQuery document.createElement 等效？](https://stackoverflow.com/questions/268490/jquery-document-createelement-equivalent)
*   [在 jQuery 中创建一个 div 元素](https://stackoverflow.com/questions/867916/creating-a-div-element-in-jquery)
*   [使用 jQuery 创建 HTML 元素的最有效方法是什么？](https://stackoverflow.com/questions/327047/what-is-the-most-efficient-way-to-create-html-elements-using-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T03:08:24.147

[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

这应该给你你正在寻找的解释=D。

总而言之，它是一种快速的 JQuery on-the-fly 元素创建方法。*

# android - Android：文件资源管理器不显示任何内容

> ID：11572255
> 
> 赞同：3
> 
> 时间：2012-07-20T03:02:15.980
> 
> 标签：android

当我的 android 模拟器运行时，我可以使用`LogCat`查看日志，但是当我转到 时`File Explorer`，我什么也看不到。（只是空白页）。谁知道这个错误，请给我一些帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:18:52.803

尝试转到“设备”窗口，然后选择设备/模拟器。如果这不起作用，请尝试重新启动 adb 服务器。

选择/突出显示设备，然后再次转到文件资源管理器。

# .net - 将 protobuf-net 添加到我的 WCF Rest 服务

> ID：11572263
> 
> 赞同：5
> 
> 时间：2012-07-20T03:03:10.023
> 
> 标签：.net, wcf, rest, protocol-buffers, protobuf-net

是否有任何规范的直接方法可以在 .NET 4 WCF 上启用 protobuf-net 序列化？我试图将代码简化到可以轻松构建的程度：

这是我的服务代码：

```
[ServiceContract]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MobileServiceV2
{
    [WebGet(UriTemplate = "/some-data")]
    [Description("returns test data")]
    public MyResponse GetSomeData()
    {
        return new MyResponse { SomeData = "Test string here" };
    }
}

[DataContract]
public class MyResponse
{
    [DataMember(Order = 1)] 
    public string SomeData { get; set; }
} 
```

我正在`Application_OnStart`（Global.asax）中激活此服务路线，如下所示：

```
RouteTable.Routes.Add(new ServiceRoute("mobile", new MyServiceHostFactory(), typeof(MobileServiceV2))); 
```

我曾经使用`MyServiceHostFactory`MEF 管理服务，但这无关紧要。

我的服务配置都是默认的，Web.Config 中唯一的附加内容在这里：

```
<system.serviceModel>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint helpEnabled="true" maxReceivedMessageSize="5242880" defaultOutgoingResponseFormat="Json" automaticFormatSelectionEnabled="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </standardEndpoint>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

好的，服务活着并且正在运行。有移动/帮助，我可以在移动/某些数据上发出 GET 并获得 XML 和 JSON 的响应

application/xml 返回 XML，application/json 返回 JSON

我需要做什么才能让客户端设置 application/x-protobufs 并使用 protobuf-net 对其响应进行编码？

我读了一整天，越来越困惑……

这是我到目前为止发现的，似乎没有什么可以直接解决：

1.  [http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/)

2.  [http://weblogs.thinktecture.com/cweyer/2010/12/using-jsonnet-as-a-default-serializer-in-wcf-httpwebrest-vnext.html](http://weblogs.thinktecture.com/cweyer/2010/12/using-jsonnet-as-a-default-serializer-in-wcf-httpwebrest-vnext.html)

第二个链接是我需要的，但它对我不起作用。不知道为什么，但我无法弄清楚哪个命名空间`MediaTypeProcessor`存在于 .NET4 中并且无法使其工作？

关于通过 web.config 配置 protobuf-net 的各种分散信息给了我不同的错误，我只是不确定我是否需要这样做。我宁愿有纯代码的解决方案。

编辑：

根据我的研究 - 我的不好，`MediaFormatter`似乎不在当前版本的 WCF 中。我想知道为所有 protobuf 客户端创建单独的 URL 是否最好？这样我就可以接收 Stream 并返回 Stream。手动处理所有序列化逻辑。更多的工作，但我将更好地控制实际数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:41:51.507

首先要做的是通过 NuGet 添加`Microsoft.AspNet.WebApi`("Microsoft ASP.NET Web API Core Libraries (RC)") 和`Microsoft.AspNet.WebApi.Client`("Microsoft ASP.NET Web API Client Libraries (RC)")。

这看起来像是最有希望的演练：[http ://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-5.html](http://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-5.html)

`MediaTypeFormatter`在`System.Net.Http.Formatting`

*我现在*没有时间尝试让它工作，但您可以通过以下**方式**添加格式化程序：

```
GlobalConfiguration.Configuration.Formatters.Add(
    new ProtobufMediaTypeFormatter(RuntimeTypeModel.Default)); 
```

通过一个完全未经测试的示例**实现**，例如：

```
public class ProtobufMediaTypeFormatter : MediaTypeFormatter
{
    private readonly TypeModel model;
    public override bool CanReadType(Type type)
    {
        return model.IsDefined(type);
    }
    public override bool CanWriteType(Type type)
    {
        return model.IsDefined(type);
    }
    public ProtobufMediaTypeFormatter() : this(null) {}
    public ProtobufMediaTypeFormatter(TypeModel model) : base()
    {
        this.model = model ?? RuntimeTypeModel.Default;
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/protobuf"));
    }
    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, System.IO.Stream stream, HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
    {
        // write as sync for now
        var taskSource = new TaskCompletionSource<object>();
        try
        {
            taskSource.SetResult(model.Deserialize(stream, null, type));
        } catch (Exception ex)
        {
            taskSource.SetException(ex);
        }
        return taskSource.Task;
    }
    public override System.Threading.Tasks.Task WriteToStreamAsync(Type type, object value, System.IO.Stream stream, HttpContentHeaders contentHeaders, System.Net.TransportContext transportContext)
    {
        // write as sync for now
        var taskSource = new TaskCompletionSource<object>();
        try
        {
            model.Serialize(stream, value);
            taskSource.SetResult(null);
        }
        catch (Exception ex)
        {
            taskSource.SetException(ex);
        }
        return taskSource.Task;
    }
} 
```

我对 Web API 几乎一无所知，所以如果你设法让它为你工作，请告诉我。我很乐意将支持的包装器添加为可下载的二进制文件，但在它工作之前我不能这样做；p

# date - 批处理文件将日期替换为昨天的日期

> ID：11572264
> 
> 赞同：0
> 
> 时间：2012-07-20T03:03:20.783
> 
> 标签：date, batch-file

我正在编写一个脚本，该脚本检测原始文件中奇怪的日期格式并将其替换为昨天的日期。这里假设昨天的原始数据是 2012-07-19

输入.txt

```
AAAAAAAA    0001-01-01-00.00.00.000000  Change Password RSO part
BBBBBBBB    0001-01-01-00.00.00.000000  Change Password RSO part
CCCCCCC     0001-01-01-00.00.00.000000  Set Nbr try of password
DDDDDDD     2012-07-19-09.44.25.634000  Change Password 
```

输出.txt

```
AAAAAAAA    2012-07-19-00.00.00.000000  Change Password RSO part
BBBBBBBB    2012-07-19-00.00.00.000000  Change Password RSO part
CCCCCCC     2012-07-19-00.00.00.000000  Set Nbr try of password
DDDDDDD     2012-07-19-09.44.25.634000  Change Password 
```

我是dos批处理文件的新手。但是，提出一个基本策略，我将首先遍历每一行以检测这种情况（0001-01-01）**实际上只有这种情况** 我然后将日期替换为昨天。

我尝试编写代码如下

```
REM Code to Find YEsterday's date
set yyyy=

set $tok=1-3
for /f "tokens=1 delims=.:/-, " %%u in ('date /t') do set $d1=%%u
if "%$d1:~0,1%" GTR "9" set $tok=2-4
for /f "tokens=%$tok% delims=.:/-, " %%u in ('date /t') do (
for /f "skip=1 tokens=2-4 delims=/-,()." %%x in ('echo.^|date') do (
set %%x=%%u
set %%y=%%v
set %%z=%%w
set $d1=
set $tok=))

if "%yyyy%"=="" set yyyy=%yy%
if /I %yyyy% LSS 100 set /A yyyy=2000 + 1%yyyy% - 100

set CurDate=%mm%/%dd%/%yyyy%
set dayCnt=%1

if "%dayCnt%"=="" set dayCnt=1

REM Substract your days here
set /A dd=1%dd% - 100 - %dayCnt%
set /A mm=1%mm% - 100

:CHKDAY
if /I %dd% GTR 0 goto DONE
set /A mm=%mm% - 1
if /I %mm% GTR 0 goto ADJUSTDAY
set /A mm=12
set /A yyyy=%yyyy% - 1

:ADJUSTDAY
if %mm%==1 goto SET31
if %mm%==2 goto LEAPCHK
if %mm%==3 goto SET31
if %mm%==4 goto SET30
if %mm%==5 goto SET31
if %mm%==6 goto SET30
if %mm%==7 goto SET31
if %mm%==8 goto SET31
if %mm%==9 goto SET30
if %mm%==10 goto SET31
if %mm%==11 goto SET30
REM ** Month 12 falls through

:SET31
set /A dd=31 + %dd%
goto CHKDAY

:SET30
set /A dd=30 + %dd%
goto CHKDAY

:LEAPCHK
set /A tt=%yyyy% %% 4
if not %tt%==0 goto SET28
set /A tt=%yyyy% %% 100
if not %tt%==0 goto SET29
set /A tt=%yyyy% %% 400
if %tt%==0 goto SET29

:SET28
set /A dd=28 + %dd%
goto CHKDAY

:SET29
set /A dd=29 + %dd%
goto CHKDAY

    call :process <..\input.txt>> ..\output.txt

    :process 
     set line= 
     if "!line:~12,22!" neq "0001-01-01" goto process
    ## for /F between line:~12,22 do ( 
    ------------------------------------------------
    this part onward i not very sure already.
    intend to do a for loop each line replace "0001-01-01" to %yyyy%-%mm%-%dd% 

) 
```

任何人有想法请帮忙！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:49:49.663

阅读`HELP FOR`和`HELP SET`; 然后试试这个代码让你开始......

```
@echo off
setlocal enabledelayedexpansion
set newdate=9999-99-99
for /f "tokens=*" %%a in (input.txt) do (
  set line=%%a
  set onlydate=!line:~12,10!
  if !onlydate!==0001-01-01 (
    echo !line:0001-01-01=%newdate%!
  ) else (
    echo !line!
  )
)
endlocal 
```

`FOR`迭代`input.txt`. _ 然后，对于每一行，它在位置 12 处提取日期子字符串，并检查日期是否为 0001-01-01，在这种情况下，它用`newdate`变量的内容替换它。

# ios - iOS - 将“对象”添加到现有应用程序（越狱）

> ID：11572265
> 
> 赞同：21
> 
> 时间：2012-07-20T03:03:31.063
> 
> 标签：ios, jailbreak, tweak, tampering

如何将“对象”添加到现有应用程序？

例如，[EasyRefresh for Chrome](https://web.archive.org/web/20160724061611/http://modmyi.com:80/content/8131-easily-refresh-pages-google-chrome-easyrefresh-chrome.html)调整可以在 iOS Chrome 应用程序中启用一个新按钮，就像许多其他调整一样。

例如，我如何添加一个简单`UIButton`的 Twitter 应用程序？

是否有任何[GitHub](https://github.com/)项目可以帮助我理解它是如何完成的？

* * *

[![图片](../Images/b6e97abd8064714d02a0cbd798c26856.png)](https://i.stack.imgur.com/YLdlJ.png)

图片来源：[ModMyI](https://web.archive.org/web/20160724061611/http://modmyi.com:80/content/8131-easily-refresh-pages-google-chrome-easyrefresh-chrome.html)

* * *

谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-22T17:47:38.073

这个技巧涉及一些（非常基本的）逆向工程，由几个步骤组成；我会尽可能清楚地解释它们。

**步骤 0：**如果应用程序是从 AppStore 下载的，则它是加密的。您必须使用通常用于破解应用程序的脚本/应用程序之一对其进行解密；一个命令行脚本是 poedCrack.sh（谷歌它，你会在其中一个粘贴站点上快速找到它），一个 GUI 应用程序是 Crakculous（它在 Cydia 中可用）。请注意，轻松（自动）解密需要其中之一——手动解密方法过于复杂，无法放入 StackOverflow 答案，这就是我建议使用这些工具的原因。）但是，我绝不鼓励你来破解应用程序！（基本上，我要求您不要将这些工具用于其原始目的:) 如果您想查看手动解密过程，请[前往此处。](http://tungchingkai.blogspot.hu/2009/02/how-to-decrypt-iphone-ipa-file.html)

**第一步：**您需要执行应用程序使用/创建的类。为此，您需要 class-dump 或 class-dump-z 实用程序。此命令行应用程序反转应用程序的二进制可执行文件，并为应用程序使用和内部拥有的所有 Objective-C 类生成接口声明。您可以在这里找到更高级和首选的变体 class-dump-z [。](http://code.google.com/p/networkpx/wiki/class_dump_z)

**第二步：**在你有了类声明之后，你必须猜测哪个类在什么时候做什么（是的，有点混乱）。例如，在通过 class-dump-z 从上述应用程序 Google Chrome 生成的文件之一中，您可能会发现类似的内容：

```
@interface ChromeUrlToolbar: UIToolbar {
    UISearchBar *urlBar;
}

- (id)initWithFrame:(CGRect)frame;
- (void)loadURL:(NSURL *)url;

@end 
```

嗯，这听起来不错，不是吗？您可以看到它的实现有一个 initWithFrame: 方法（作为所有 UIView 子类）——为什么不尝试修改它呢？

**第三步：**对于这个修改，你需要[MobileSubstrate](http://iphonedevwiki.net/index.php/MobileSubstrate)。MobileSubstrate 是由 Cydia 的创建者 Saurik 创建的开发人员库，旨在使代码注入应用程序变得容易。你可以在网上找到一些非常好的教程，包括[这个](http://www.ifans.com/forums/threads/tutorial-hooking-springboard.103558/)。所以，你有一个类，你想“挂钩”它——所以你写了一些这样的代码：

```
static IMP __original_init; // A

id __modified_init(id __self, SEL __cmd, CGRect frame) // B
{
    __self = __original_init(__self, __cmd, frame); // C

    // D
    UIButton *newButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [newButton setTitle:@"Chrome Pwned"];
    newButton.frame = CGRectMake(0, 0, 100, 40);
    [__self addSubview:newButton];

    return __self;
}

// E
__attribute__((constructor))
void init()
{
    Class clazz = objc_getClass("ChromeUrlToolbar"); // F
    MSHookMessageEx(clazz, @selector(initWithFrame:), __modified_init, &__original_init); // G
} 
```

**解释：**让我们从头开始。函数( `init`E) 被声明`__attribute__((constructor))`。这意味着当我们将使用此代码创建的库将加载到 Chrome 中时，它会自动调用。这正是我们想要的，因为我们想在启动应用程序之前改变它的行为。

在标记的行上`// F`，我们捕获了我们想要修改的类对象本身。Objective-C 是一种高度动态的语言；这意味着我们可以在运行时获取和修改有关类和对象的信息。在标记的行上`// G`，我们使用了 MobileSubstrate API 中最重要的函数：MSHookMes​​sageEx。要了解它的工作原理（而不是它的作用），您必须了解以下内容： Objective-C 本身是作为一个普通的 C 库实现的——语言本身，在底层，只是简单的 C。所以每条消息都在 Obejctive 中发送-C 实际上是一个 C 函数调用。这些 C 函数有两个特殊参数：`self`和`cmd`-- 前者是指向正在发送消息的对象的指针，后者是选择器（一个特殊的、唯一的指针，指向正在发送的消息的名称）。所以 MSHookMes​​sageEx 所做的是它接受一个类和一个选择器，找到对应于它们的函数的实现，并将该函数与它的第三个参数本身提供的函数交换（`__modified_init`在这种情况下）。为了不丢失数据，它还在其第 4 个参数中返回该函数（此处为`__original_init`）。

那么，现在Chrome URL工具栏的初始化被重定向到了我们的函数中，接下来要做什么呢？好吧，没什么特别的：首先我们只是调用原始初始化函数（注意前两个特殊参数，__self 和 __cmd！），它像正常一样创建工具栏（这行代码用 表示`// C`）。然后，我们进行实际的修改：在 section 中`// D`，我们创建一个 UIButton，设置它的标题和位置，并作为子视图添加到我们新创建的工具栏。然后，知道这是一个初始化函数，我们返回原始实例以及注入其中的按钮代码。

好吧，这基本上就是您需要了解的内容；如果您对 Objective-C 的工作原理以及如何创建酷炫的 iOS 调整感兴趣，我建议您阅读 Apple[关于该主题的官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)，您可以浏览[我的一些开源 Cydia 调整。](http://github.com/H2CO3)也是。

我希望这能帮到您！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T18:03:58.567

为此，您需要了解 Objective-C 运行时的工作原理。尤其是消息传递系统（即调用方法）。特别是，调用的方法是在运行时确定的，而不是在编译时确定的其他语言。这允许对特定方法进行全局更改，也就是*方法调配*。

使用[Mobile Substrate 库](http://iphonedevwiki.net/index.php/MobileSubstrate)，您将可以用自己的方法替换任何方法实现，甚至可以调用原始实现。当然，您需要知道方法的名称和它所接受的参数，以及它所属的类。

因此，例如要修改 SpringBoard，您必须知道包含哪个类和哪个方法。您必须使用[`class-dump`](http://www.codethecode.com/projects/class-dump/)or[`class-dump-z`](http://code.google.com/p/networkpx/downloads/detail?name=class-dump-z)实用程序来为您执行此操作（`class-dump-z`更新并更多地用于 iOS 开发，`class-dump`更通用并与较旧的二进制文件以及 64 位兼容）。

因此，要对 SpringBoard 进行类转储，您需要输入 Terminal.app

```
class-dump -H /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/System/Library/CoreServices/SpringBoard.app/SpringBoard -o ~/Desktop/SpringBoard 
```

对于 class-dump-z，该`-p`选项将生成`@property`而不是 getters/setters，这更清楚，所以你可能会输入

```
class-dump-z -p -H /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/System/Library/CoreServices/SpringBoard.app/SpringBoard -o ~/Desktop/SpringBoard 
```

该行将在您的桌面上创建一个文件夹，其中包含 SpringBoard 的所有类定义。当然，您可能需要将路径更改为适合您系统的路径（关于这一点，对于最新版本的 Xcode，Developer 文件夹**位于**Xcode 中，因此您需要类似

```
/Applications/Xcode/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/CoreServices/SpringBoard.app/SpringBoard 
```

您还[可以在 Internet 上找到](https://github.com/kennytm/iphone-private-frameworks)为大多数现有框架为您执行此操作的人员，如果您确保他们的版本适合您的系统，**这将非常方便。**

现在，对于 AppStore 应用程序，您首先需要对它们进行解密，因为它们受到保护。您可能需要自己查找名称和链接，因为这可能违反 Stack Overflow 的 ToS，尽管使用`gdb`可以达到该目的。

为了简化工作，已经创建了一些工具，例如[Logos](http://iphonedevwiki.net/index.php/Logos)（您可能还需要查看[Theos ）来减少所需的样板代码。](https://github.com/rpetrich/theos)还有一个（相当老的）[xcode 模板和用于 mobilesubstrate 的教程，](http://modmyi.com/forums/iphone-ipod-touch-sdk-development-discussion/728944-tutorial-how-compile-mobile-substrate-extension-xcode.html)它提供了很好的帮助。

Logos 可以很容易地`method`从类中挂钩方法`classname`：

```
%hook classname //declares the class from your application you're going to override

-(void)method {

    dosomethingnew(); //put all your new code for the method here
    return %orig;     //this calls the original definition of the method
}
%end //end hooking classname 
```

有关系统中框架的列表以及它们的用途，请参见[此处](http://theiphonewiki.com/wiki/index.php?title=/System/Library/Frameworks)

最后一件事：开源的流行调整列表（尽可能链接到 GitHub）：

*   [铬定制器](https://github.com/rpetrich/ChromeCustomizer)
*   [移动通知程序](https://github.com/peterhajas/MobileNotifier)
*   [UISettings](https://github.com/jimmy54/UISettings)（iOS 5 版本也在这里，但似乎被拉了？）
*   [尖塔](https://github.com/chpwn/Spire)
*   [图标重命名器](https://github.com/Zimm/IconRenamer)
*   [最大化器](https://github.com/chpwn/Maximizer)
*   [图标旋转器](https://github.com/rpetrich/IconRotator)
*   [快速回复](https://github.com/rpetrich/QuickReply)
*   [冬季板](http://gitweb.saurik.com/winterboard.git)
*   [文西](http://gitweb.saurik.com/veency.git)

[一些小调整](https://github.com/chpwn/tweaks)

最后，看看[WeekTweak](https://github.com/tweakweek)，他们每周都会发布**开源**调整，因此您可以通过查看其他人的源代码来学习并尝试和做自己的事情。IRC (irc.saurik.com) 上的#theos chan 也会提供帮助，如果您提出要求的话。

# java - 为什么传递一个返回变量但也有println的参数也会传递println？

> ID：11572271
> 
> 赞同：2
> 
> 时间：2012-07-20T03:04:31.547
> 
> 标签：java, parameters

运行这个 java 程序时，我希望输出只是第一个 println，因为其他方法，quaffle 和 snitch 只返回整数。但是，该程序的输出还包括 quaffle 和 snitch 方法的 println。我希望 println 在后一种方法中没有用，因为它们没有被返回。发生了什么？

**输出：**

告密者： x = 4004，y = 1001
鬼飞球：x = 2003，y = 1，z = 1001
游走球：x = 1001，y = 2001，z = 2003

**该程序：**

```
import acm.program.*; 
public class Hogwarts extends ConsoleProgram { 
 public void run() { 
  bludger(2001); 
 } 

 private void bludger(int y) { 
  int x = y / 1000; 
  int z = (x + y); 
  x = quaffle(z, y); 
  println("bludger: x = " + x + ", y = " + y + ", z = " + z); 
 } 

 private int quaffle(int x, int y) { 
  int z = snitch(x + y, y); 
  y /= z; 
  println("quaffle: x = " + x + ", y = " + y + ", z = " + z); 
  return z; 
 } 

 private int snitch(int x, int y) { 
  y = x / (x % 10); 
  println("snitch: x = " + x + ", y = " + y); 
  return y; 
 } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:07:03.600

`println`调用时写入一行输出。你不需要对它返回的值做任何事情。由于您调用`println`了 3 次，因此您将获得三行输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:09:44.940

我认为您对 return 语句的含义有误解。

'return' 将指定的值返回到调用函数的位置。该函数可以自由地执行任何其他操作，将内容打印到终端，创建和删除文件或执行任何其他操作 - 这些操作不会因为它们没有从函数“返回”而“撤消”。

这称为[函数的副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:20:21.707

不，`println`这里不返回。

此 println 为以下执行流程执行。

```
call bludger
 -> call quaffle
    -> call snitch
       -> print "snitch" // snitch is printed first
    -> print "quaffle"   // later quaffle
 -> print "bludger"      // and now bludger 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T03:22:10.940

`println()`与回报无关。当`println()`被调用时，它立即写入输出，然后调用 return。所以即使函数被返回，`println()`也已经被执行了。

# http - URL中的UTF8组件，它应该区分大小写吗？

> ID：11572273
> 
> 赞同：3
> 
> 时间：2012-07-20T03:04:56.330
> 
> 标签：http, url, url-rewriting, googlebot

我理解 URL 应该区分大小写，例如

```
http://www.example.com/test.php

http://www.example.com/TEST.php 
```

应该是两件事。

但是 UTF-8 是否也应该区分大小写，例如？

```
http://zh.wikipedia.org/wiki/%E8%A7%82%E6%B5%8B%E5%A4%A9%E6%96%87%E5%AD%A6 
```

对比

```
http://zh.wikipedia.org/wiki/%e8%a7%82%e6%b5%8b%e5%a4%a9%e6%96%87%e5%ad%a6 
```

他们应该平等吗？

我问的原因是：Googlebot 继续使用大写的 URL，尽管我的网站都使用小写的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:13:30.163

我不能以 100% 的权威谈论这个问题，但如果你停下来考虑如何将 URL 存储在搜索索引、URL 表或谷歌使用的任何无数数据存储中，我不能想象一下，这些 URL 不会以某种方式标准化。

任何类型的规范化都应该将 URL 解码为字符串，因此应该没有区别。如果 Google 使用 % 编码存储 URL，我会感到惊讶。他们可以以 UTF-8 存储文本；百分号的存在是为了让人类可以看到事物。

我猜，谷歌“使用”大写变体只是为了显示和报告目的。我认为根本不存储 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:01:31.187

由于它们应该是十六进制字符对，编码字符的小写和大写变体应该被认为是等效的（例如，0xab 和 0xAB 是相同的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:13:42.127

对于 Googlebot，很难预测它从哪里获取信息。即使您只用小写链接到它并且它在您的 XML 站点地图中以小写形式出现，也可能会有人以大写形式链接到您的站点。

您是正确的，Google 将 URL 视为区分大小写。这就是他们支持[rel=canonical 规范](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)的原因。如果您正确使用 rel=canonical 规范，我不会担心 Googlebot 正在访问全部大写的 URL。当他们处理页面以进行索引时，它将所有页面“值”合并到规范 URL。

如果您想更加明确，您可以 301 将所有大写请求重定向到小写版本。所以 Googlebot 会跟着 301s 到小写版本。

另请注意，即使您有 301 和 rel=canonical ...您也会看到 Googlebot 将继续抓取全部大写的网址。即使这些 URL 是 404 或 410，也会发生这种情况。基本上，Googlebot 永远不会忘记一个 URL，并且它会不时尝试它知道曾经存在过的旧 URL，或者仍然有指向它的链接......即使他们'再岁，早已不复存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:32:40.347

url 的百分比编码部分应规范化为相同的 url。这个维基百科页面应该给你所有的答案；）

[http://en.wikipedia.org/wiki/URL_normalization](http://en.wikipedia.org/wiki/URL_normalization)

# html - CSS3根据屏幕大小/显示重新调整页面大小

> ID：11572274
> 
> 赞同：0
> 
> 时间：2012-07-20T03:04:57.027
> 
> 标签：html, css

如何让我的页面对齐以适应任何屏幕尺寸，例如，查看此链接以更好地理解[https://dl.dropbox.com/u/8542058/Photo%20Jul%2012%2C %209%2056%2026.png](https://dl.dropbox.com/u/8542058/Photo%20Jul%2012%2C%209%2056%2026.png) 如果你注意到，在上面的链接中，一旦屏幕被调整，屏幕上的图像就会自我调整并相应地形成屏幕的形状。现在我想对我的页面做同样的事情，我的演示页面可以在[http://jsfiddle.net/529Lk/show/](http://jsfiddle.net/529Lk/show/)上找到，代码是[http://jsfiddle.net/529Lk/](http://jsfiddle.net/529Lk/)。谢谢

为了方便查看我的代码仍然在这里：

CSS3：

```
body{
font-family: Arial, "MS Trebuchet", sans-serif;
color:#000;
background:#088A08;
font-weight: bold;
margin:auto;           
}
/* SLIDE Start */

input[id=slideThree] {
visibility: hidden;
}

/* SLIDE THREE */
.slideThree {
width: 120px;
height: 45px;
background: #0101DF;

-webkit-border-radius: 30px;
-moz-border-radius: 30px;
border-radius: 30px;
position: relative;

-webkit-box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
-moz-box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
    position:relative; left:450px;
}

.slideThree:after {
content: 'OFF';
font: 19px/26px Arial, sans-serif;
color: #fff;
position: absolute;
right: 10px;
z-index: 0;
font-weight: bold;
text-shadow: 1px 1px 0px rgba(255,255,255,.15);
}

 .slideThree:before {
content: 'ON';
font: 19px/26px Arial, sans-serif;
color: #fff;
position: absolute;
left: 10px;
z-index: 0;
font-weight: bold;
}

.slideThree label {
display: block;
width: 50px;
height: 40px;

-webkit-border-radius: 50px;
-moz-border-radius: 50px;
border-radius: 50px;

-webkit-transition: all .4s ease;
-moz-transition: all .4s ease;
-o-transition: all .4s ease;
-ms-transition: all .4s ease;
transition: all .10s ease;
cursor: pointer;
position: absolute;
top: 3px;
left: 3px;
z-index: 1;

-webkit-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
-moz-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
background: #fcfff4;
background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -moz-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -o-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -ms-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4',   endColorstr='#b3bead',GradientType=0 );
}

.slideThree input[type=checkbox]:checked + label {
left: 68px;
}

.back { width:598; height:95px;  background:url('http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/btn_push01c2x.png') no-repeat;      } 
```

HTML：

```
<div class="back" id="toggle"><br/>
<label for="enjoy_web"></label>
<div class="slideThree">
<input type="checkbox" value="None" id="slideThree" name="check" />
<label for="slideThree"></label>
</div>
</div>

<br/><br/><br/>

<img src="http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/btn_push01a2x.png"/>​ 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:16:00.977

如果你的意思是如果我缩小浏览器，它仍然适合吗？这就是你所说的流体宽度样式。这可以通过使用宽度百分比来完成。

另一方面，如果您想根据屏幕分辨率对页面应用单独的样式，则可以使用媒体查询：[http ://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

# android - 如何使用 Android Monkey 工具生成缩放/捏合手势？

> ID：11572286
> 
> 赞同：1
> 
> 时间：2012-07-20T03:07:01.017
> 
> 标签：android, monkey

我试图使用 android 的猴子生成缩放/捏合手势，我尝试使用 Android API MotionEvent，但发现很难实现缩放/捏合事件。

你能帮我告诉我正确的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-22T06:50:55.167

使用“--pct-pinchzoom”设置缩放/捏合事件的百分比。

例子：

```
adb monkey -p $package_name --pct-pinchzoom 100 1000 
```

即使通过猴子帮助信息也没有显示有关此选项的信息，但实际上，您可以在猴子源代码中找到“--pct-pinchzoom”： [https ://github.com/android/platform_development/blob/master/cmds /monkey/src/com/android/commands/monkey/Monkey.java#L789](https://github.com/android/platform_development/blob/master/cmds/monkey/src/com/android/commands/monkey/Monkey.java#L789)

# c# - ListView 添加带有子项的项目

> ID：11572288
> 
> 赞同：0
> 
> 时间：2012-07-20T03:07:10.030
> 
> 标签：c#, listview

我正在尝试逐行读取文件，它工作得很好，但我想将我得到的结果分开到列表视图中的子项中。

我还在文件夹中搜索所有 .jar 文件，以便可以将它们用作名称（第一列）。第二栏需要有“版本”，第三栏需要“作者”，第四栏需要“描述”。

这是我从 jar 文件中收到的文本文件之一：

```
name: AFK  
main: com.github.alesvojta.AFK.AFK  
version: 2.0.5  
author: Ales Vojta / schneckk  
description: Provides AFK messages  
website: http://dev.bukkit.org/server-mods/afk/  

commands:  
    afk:  
        description: Provides AFK message when player types /afk.  
        usage: /<command> 
```

这是我现在的代码：

```
private List<string> GetInstalledPlugins()
    {
        List<string> list = new List<string>();
        lvInstalledPlugins.Items.Clear();
        if (!Directory.Exists(Environment.CurrentDirectory + "\\plugins"))
        {
            Directory.CreateDirectory(Environment.CurrentDirectory + "\\plugins");
            DirectoryInfo di = new DirectoryInfo(Environment.CurrentDirectory + "\\plugins");
            FileInfo[] fileInfo = di.GetFiles("*.jar");
            foreach (var info in fileInfo)
            {
                //lvInstalledPlugins.Items.Add(info.Name);
                list.Add(info.Name);
            }
        }
        else
        {
            DirectoryInfo di = new DirectoryInfo(Environment.CurrentDirectory + "\\plugins");
            FileInfo[] fileInfo = di.GetFiles("*.jar");
            foreach (var info in fileInfo)
            {
                //lvInstalledPlugins.Items.Add(info.Name);
                list.Add(info.Name);
            }
        }
        return list;
    }

private void test(IEnumerable<string> list)
    {
        List<ListViewItem> PluginList = new List<ListViewItem>();
        var items = new string[4];
        try
        {
            foreach (var ListItem in list)
            {
                Console.WriteLine(ListItem);
                var name = Environment.CurrentDirectory + "\\plugins\\" + ListItem;
                var zip = new ZipInputStream(File.OpenRead(name));
                var filestream = new FileStream(name, FileMode.Open, FileAccess.Read);
                var zipfile = new ZipFile(filestream);
                ZipEntry item;
                while ((item = zip.GetNextEntry()) != null)
                {
                    if (item.Name == "plugin.yml")
                    {
                        using (var s = new StreamReader(zipfile.GetInputStream(item)))
                        {
                            string line;
                            while ((line = s.ReadLine()) != null)
                            {
                                if (line.Contains("name"))
                                {
                                    items[0] = line;
                                }
                                if (line.Contains("version"))
                                {
                                    items[1] = line;
                                }
                                if (line.Contains("author"))
                                {
                                    items[2] = line;
                                }
                                if (line.Contains("description"))
                                {
                                    items[3] = line;
                                }
                                try
                                {
                                    var lvitem = new ListViewItem(items);
                                    lvitem.Name = items[0];
                                    lvitem.Text = items[0];
                                    lvitem.SubItems.Add(items[1]);
                                    lvitem.SubItems.Add(items[2]);
                                    lvitem.SubItems.Add(items[3]);
                                    PluginList.Add(lvitem);
                                }
                                catch (Exception)
                                {

                                }
                            }
                            lvInstalledPlugins.Items.AddRange(PluginList.ToArray());
                        }
                    }
                }
            } 
```

这似乎不起作用：/，有什么想法吗？我一整天都在为此工作，但似乎无法让它工作:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:18:09.350

不完全确定您的问题，但按照标题，以下问题的答案可能会提供一些帮助。

[C# listView，如何将项目添加到第 2、3 和 4 列等？](https://stackoverflow.com/questions/473148/c-sharp-listview-how-do-i-add-items-to-columns-2-3-and-4-etc/473209#473209)

# objective-c - UIToolbar中的完成按钮不起作用

> ID：11572292
> 
> 赞同：1
> 
> 时间：2012-07-20T03:07:54.590
> 
> 标签：objective-c, ios

因此，我正在创建一个 UIToolbar 以位于 UIKeyboard 之上，并且完成按钮可以完美运行，直到我调用一个方法来重新加载我的 UITableView。然后除了完成按钮的回调函数（即完成：）之外，一切仍然有效。有人知道为什么会这样吗？我正在使用以下代码使用工具栏创建自定义 UITableView 子类...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section != 1){
        if (indexPath.row != 2){
            static NSString *CellIdentifier = @"EditableCell";

            EditableCell *editableCell = (EditableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

            if (editableCell == nil) {

                editableCell = [[EditableCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier];
            }

 [_myTextField setPlaceholder:@"$0.00"];
          [_myTextField setKeyboardType:UIKeyboardTypeDecimalPad];

        UIToolbar *toolbar = [[UIToolbar alloc] init];
        [toolbar setBarStyle:UIBarStyleBlackTranslucent];
        [toolbar sizeToFit];

        UIBarButtonItem *doneButton =[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(resignKeyboard)];

        doneButton.title = @"Done";

        NSArray *itemsArray = [NSArray arrayWithObjects:doneButton, nil];

        [toolbar setItems:itemsArray];

        [_myTextField setInputAccessoryView:toolbar];
    }

    [_myTextField setReturnKeyType:UIReturnKeyNext];

}
else if (indexPath.section == 1){
    [_myTextField setPlaceholder:@"Describe this food..."];
    [_myTextField setReturnKeyType:UIReturnKeyDone];
}
_myTextField.delegate = self;

return editableCell;
}

 -(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if([text isEqualToString:@"\n"])
        [textView resignFirstResponder];
    else{

        NSMutableString *textFieldString = [[NSMutableString alloc] initWithString:textView.text];
        [textFieldString replaceCharactersInRange:range withString:text];

        _textViewString = @"";
        _textViewString = textFieldString;

        _foodDescription = textFieldString;

        [self.tableView beginUpdates];
        [self.tableView endUpdates];
    }

    return YES;
} 
```

# ruby-on-rails - 协会 Ruby on Rails

> ID：11572293
> 
> 赞同：0
> 
> 时间：2012-07-20T03:07:58.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试一个应该有效的简单关联。我遵循了[http://ruby.railstutorial.org/chapters/](http://ruby.railstutorial.org/chapters/)和第 10 章的教程

这里是我写下的

型号/客户

```
class Customer < ActiveRecord::Base

    has_many :posts, dependent: :destroy

  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password 
```

模型/帖子

```
class Post < ActiveRecord::Base

    belongs_to :customer
    attr_accessible :description, :post_finish_at, :post_how, :post_location 
```

控制器/客户

```
class CustomersController < ApplicationController

  before_filter :signed_in_customer, only: [:edit, :update]
  before_filter :correct_customer,   only: [:edit, :update]

  def index
    @customers = Customer.all
  end

  def show
    @customer = Customer.find(params[:id])
    @posts = @customer.posts
  end  ... 
```

控制器/帖子——应该无关紧要，因为我正在做一个部分类 PostsController < ApplicationController

```
 # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])
        respond_to do |format|
            format.html # show.html.erb
            format.json { render json: @post }
        end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end

end 
```

查看/客户/show.html.erb

```
<div class="posts">
    <%= render 'posts/post'%>
</div> 
```

查看/发布/_post.html.erb

```
<li>
    <%= @posts.each do |post| %>
        <%= post.title %>
    <% end %>
</li> 
```

这里的输出是什么样的

*   []

为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:33:46.253

看起来客户没有帖子关联，而只有事件关联。我会从那里开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:45:34.397

在我看来，你有几件事错了。首先，部分 (view/post/_post.html.erb) 应该呈现单个帖子，而不是它们的整个集合。第二个问题是你没有向部分传递任何东西。

渲染集合有一个方便的简写，如果你只是渲染集合，它会自动寻找具有相同名称的部分，并为集合中的每个模型渲染它。

请参阅： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

所以我认为这应该做你想要的（我添加了`<ul></ul>`标签以使其成为无序列表）：

查看/客户/show.html.erb

```
<div class="posts">
  <ul>
  <%= render @posts %>
  </ul>
</div> 
```

查看/发布/_post.html.erb

```
<li>
  <%= post.title %>
</li> 
```

# android - Google TV 模拟器无法启动

> ID：11572296
> 
> 赞同：0
> 
> 时间：2012-07-20T03:08:40.250
> 
> 标签：android, android-emulator, google-tv

我遵循了这个[Google TV Emulation guide](https://developers.google.com/tv/android/docs/gtv_emulator)，它讲述了如何设置我的模拟器环境。虽然当我启动由 AVD 管理器创建的 AVD 时，模拟器启动但没有出现徽标并且出现黑屏。我的一个 CPU 内核总是 100%；KVM 已启用。-verbose 选项日志以下列行结尾：

```
emulator: control console listening on port 5554, ADB on port 5555
emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: /media/Mywork/tools/sdk/android-sdk-linux/tools/ddms
emulator: ping command: /media/Mywork/tools/sdk/android-sdk-linux/tools/ddms 
```

我的主机环境是：Intel i7，Ubuntu 10.04 64-bit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:45:31.057

您可以发布您的 AVD 的设置吗？

编辑：另外，您是否尝试过将应用程序推送到模拟器中？你能包括你用来启动模拟器的步骤吗？你apt-get安装kvm了吗？

# asp.net-mvc-3 - 如何在仍然知道用户是否已通过身份验证的情况下将帐户信息获取到部分视图中？

> ID：11572298
> 
> 赞同：0
> 
> 时间：2012-07-20T03:08:44.773
> 
> 标签：asp.net-mvc-3, controller, partial-views

我只想在用户登录时显示某个部分。我将此设置为部分视图。

```
@Html.Partial("ListPartial") 
```

这部分我可以通过将所有内容包装在部分视图中来完成，如下所示：

```
@if (User.Identity.IsAuthenticated) { 
    <h1>Stuff I want to show<h1>
} 
```

当用户登录时，UserController 中的代码如下所示：

```
return this.RedirectToAction<HomeController>(controller => controller.Index(uiUser)); 
```

所以，我想要“我想展示的东西”是一些用户帐户。此用户帐户信息在 AccountController 中访问，如下所示：

```
[HttpGet]
public ViewResult Accounts(Int64 userId)
{
    var serviceAccounts = _accountManager.GetAccounts(userId);
    var accounts = Mapper.Map<IEnumerable<ServiceModels.Account>,List<Models.AccountModel>>(serviceAccounts);
    return View(accounts);
} 
```

如何在仍然知道用户是否已通过身份验证的情况下将帐户信息获取到部分视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:51:46.727

如果它们经过身份验证，则从您的局部调用 HtmlAction 并将其传递给您需要的参数（或者我错过了为什么您不能使用它？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:01:47.767

只需使您的局部视图强类型化

```
@model Namespace.AccountModel 
```

并将帐户模型传递到您的局部视图中：

```
@Html.Partial("ListPartial", Model) 
```

# php - Zend 模型声明与抽象不兼容

> ID：11572299
> 
> 赞同：0
> 
> 时间：2012-07-20T03:08:45.970
> 
> 标签：php, zend-framework

即使我的系统仍然正常运行，我的错误日志也突然充满了如下错误：

```
2012-07-20T02:53:25+00:00 WARN (4): [2048] Declaration of User_Model_User::getParent() should be compatible with Core_Model_Item_Abstract::getParent($recurseType = NULL) ([…]/application/modules/User/Model/User.php) [20]
Error Code: 1b29e1
Stack trace:
#0 […]/application/libraries/Engine/Loader.php(103): include_once('/dana/data/www.altandetlige.dk/d...')
#1 (unknown file)(0): Engine_Loader::autoload('User_Model_User')
#2 (unknown file)(0): spl_autoload_call('User_Model_User')
#3 […]/application/libraries/Zend/Db/Table/Rowset/Abstract.php(114): class_exists('User_Model_User')
#4 […]/application/libraries/Zend/Db/Table/Abstract.php(1340): Zend_Db_Table_Rowset_Abstract->__construct(Array)
#5 […]/application/libraries/Zend/Db/Table/Abstract.php(1290): Zend_Db_Table_Abstract->fetchAll('((`engine4_users`.`user_id` = 1)...')
#6 […]/application/modules/User/Api/Core.php(334): Zend_Db_Table_Abstract->find(1)
#7 […]/application/modules/User/Api/Core.php(167): User_Api_Core->_getUser(1)
#8 […]/application/modules/User/Bootstrap.php(34): User_Api_Core->getViewer()
#9 […]/application/modules/Core/Bootstrap.php(783): User_Bootstrap->__construct(Core_Bootstrap)
#10 […]/application/libraries/Engine/Application/Bootstrap/Abstract.php(256): Core_Bootstrap->_initModules()
#11 […]/application/libraries/Engine/Application/Bootstrap/Abstract.php(207): Engine_Application_Bootstrap_Abstract->_executeResource('modules')
#12 […]/application/libraries/Engine/Application/Bootstrap/Abstract.php(150): Engine_Application_Bootstrap_Abstract->_bootstrap()
#13 […]/application/libraries/Engine/Application.php(149): Engine_Application_Bootstrap_Abstract->bootstrap()
#14 […]/application/index.php(193): Engine_Application->bootstrap()
#15 […]/index.php(24): include('/dana/data/www.altandetlige.dk/d...')
#16 {main} 
```

所有使用 Core_Model_Item_Abstract 的模型都会产生完全相同的错误。

奇怪的是，该错误仅显示在生产服务器（运行 PHP 5.4.3）上，而不显示在开发设置上（运行 PHP 5.2.11）。

从错误中可以清楚地看出 Core_Model_Item_Abstract 似乎没有获得预期的参数，但没有对 Core_Model_Item_Abstract 进行任何更改，如果是这种情况，它将在生产和开发中正确显示。

**[编辑]**

中的父类`Core_Model_Item_Abstract`看起来像这样。对我来说，代码似乎已经考虑了`$recurseType`未设置的内容：

```
public function getParent($recurseType = null) {
    if( empty($recurseType) ) $recurseType = null; // Parent and owner are same
    if( !empty($this->_parent_is_owner) ) { 
        return $this->getOwner($recurseType); 
    }
} 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:31:18.423

改变

```
class User_Model_User {
    function getParent() {
    ... 
```

到

```
class User_Model_User {
    function getParent($recurseType = NULL) {
    ... 
```

问题应该消失了。此更改不会破坏任何内容，但只会使您的日志安静下来。

或者你可以这样做：

```
abstract class Core_Model_Item_Abstract 
{
  public function getParent(/*$recurseType = NULL*/)
  {
      $recurseType = NULL; # forcing to null as no one is passing this parameter
      ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:46:39.337

如果您想避免更改所有子类，则可以在您的父类中执行此操作。

```
abstract class Core_Model_Item_Abstract 
{
  public function getParent()
  {

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T18:46:29.477

在 PHP5.4 中，如果子类覆盖父类的方法并且具有与父类不同的签名，则会发生这种情况。

如果您禁用显示 E_STRICT 的错误，它将得到解决。

# jquery - 淘汰赛绑定拖拽失败

> ID：11572303
> 
> 赞同：0
> 
> 时间：2012-07-20T03:09:03.260
> 
> 标签：jquery, data-binding, drag-and-drop, knockout.js

请看看为什么我不能绑定拖放功能。请参阅[我的代码here](http://jsfiddle.net/SimonYong/kV6nG/1/) 我已经放置了一些控制台日志来跟踪流程，并且由于'drag init'和'drop init'根本没有打印，它似乎没有执行绑定事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:49:31.640

您需要在调用之前定义您的`drag`和绑定的处理程序。如果 Knockout 遇到不存在的绑定（在您的情况下它们还不存在），那么它会忽略它们。`drop``ko.applyBindings`

# node.js - 是什么破坏了进程内存？

> ID：11572304
> 
> 赞同：1
> 
> 时间：2012-07-20T03:09:08.987
> 
> 标签：node.js, memory, process, heroku

```
2012-07-20T03:04:50+00:00 heroku[web.1]: Process running mem=546M(106.8%)
2012-07-20T03:04:50+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:05:11+00:00 heroku[web.1]: Process running mem=583M(113.9%)
2012-07-20T03:05:11+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:05:30+00:00 heroku[web.1]: Process running mem=611M(119.4%)
2012-07-20T03:05:30+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:05:50+00:00 heroku[web.1]: Process running mem=611M(119.4%)
2012-07-20T03:05:50+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:06:10+00:00 heroku[web.1]: Process running mem=605M(118.3%)
2012-07-20T03:06:10+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:06:30+00:00 heroku[web.1]: Process running mem=689M(134.6%)
2012-07-20T03:06:30+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:06:37+00:00 heroku[router]: Error H12 (Request timeout) -> POST vivid-night-1834.herokuapp.com/ dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-07-20T03:06:51+00:00 heroku[web.1]: Process running mem=909M(177.7%)
2012-07-20T03:06:51+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2012-07-20T03:07:10+00:00 heroku[web.1]: Process running mem=909M(177.7%) 
```

查看进程内存不足的速度。我运行了 heroku restart ，它仍然在一秒钟后发生。

我有一个 node.js 应用程序，过去几天我一直在毫无困难地工作。它进行了一些 mongodb 调用，一些 redis 调用，但 redis 和 mongo 中的数据总量可能低于 50kb。

我如何追踪问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:28:51.923

看看你在它工作时和现在之间所做的改变，也许？

没有看到代码，很难说问题可能是什么，除了你显然在做一些事情来一遍又一遍地分配内存，所以这要么是一个循环，要么是一个没有正确退出的递归函数调用健康）状况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-12T11:19:17.887

即使这是您的循环，但内存配额超出是大多数开发人员在使用 heroku 时面临的常见问题。它与 Node 的垃圾收集器有关。我把我的答案放在这里是为了帮助那些可能一直在寻找同样问题的人。

> Node (V8) 使用懒惰和贪婪的垃圾收集器。由于其默认限制约为 1.5 GB，它有时会等到绝对需要时才回收未使用的内存。如果您的内存使用量在增加，则可能不是泄漏——而是节点通常的惰性行为。为了更好地控制你的应用程序的垃圾收集器，你可以在你的`Procfile`:
> 
> 如果您的应用程序在可用内存不足 1.5 GB 的环境中运行，这一点尤其重要。例如，如果您想将节点定制为 512 MB 容器，请尝试：

```
web: node --optimize_for_size --max_old_space_size=460 --gc_interval=100 server.js 
```

取自这里[https://blog.heroku.com/node-habits-2016](https://blog.heroku.com/node-habits-2016)

# assembly - NASM 错误解析，预期指令

> ID：11572307
> 
> 赞同：2
> 
> 时间：2012-07-20T03:09:29.613
> 
> 标签：assembly, x86, nasm

[我在这里](https://stackoverflow.com/questions/11572021/problems-with-winasm-and-zen-of-assembly)问了一个类似的问题，但我改变了汇编程序，问题几乎完全改变了，所以为了避免问题混乱，我发布了一个全新的问题。无论如何，长话短说，我在 Windows 7 上，我刚刚安装了 NASM，我正在尝试从 Michael Abrash 的名为 Zen of Assembly 的书中汇编代码列表。这是清单的代码：

```
;
; *** Listing 2-1 ***
;
; The precision Zen timer (PZTIMER.ASM)
;
; Uses the 8253 timer to time the performance of code that takes
; less than about 54 milliseconds to execute, with a resolution
; of better than 10 microseconds.
;
; By Michael Abrash 4/26/89
;
; Externally callable routines:
;
;  ZTimerOn: Starts the Zen timer, with interrupts disabled.
;
;  ZTimerOff: Stops the Zen timer, saves the timer count,
;   times the overhead code, and restores interrupts to the
;   state they were in when ZTimerOn was called.
;
;  ZTimerReport: Prints the net time that passed between starting
;   and stopping the timer.
;
; Note: If longer than about 54 ms passes between ZTimerOn and
;   ZTimerOff calls, the timer turns over and the count is
;   inaccurate. When this happens, an error message is displayed
;   instead of a count. The long-period Zen timer should be used
;   in such cases.
;
; Note: Interrupts *MUST* be left off between calls to ZTimerOn
;   and ZTimerOff for accurate timing and for detection of
;   timer overflow.
;
; Note: These routines can introduce slight inaccuracies into the
;   system clock count for each code section timed even if
;   timer 0 doesn't overflow. If timer 0 does overflow, the
;   system clock can become slow by virtually any amount of
;   time, since the system clock can't advance while the
;   precison timer is timing. Consequently, it's a good idea
;   to reboot at the end of each timing session. (The
;   battery-backed clock, if any, is not affected by the Zen
;   timer.)
;
; All registers, and all flags except the interrupt flag, are
; preserved by all routines. Interrupts are enabled and then disabled
; by ZTimerOn, and are restored by ZTimerOff to the state they were
; in when ZTimerOn was called.
;

Code    segment word public 'CODE'
    assume  cs:Code, ds:nothing
    public  ZTimerOn, ZTimerOff, ZTimerReport

;
; Base address of the 8253 timer chip.
;
BASE_8253       equ 40h
;
; The address of the timer 0 count registers in the 8253.
;
TIMER_0_8253        equ BASE_8253 + 0
;
; The address of the mode register in the 8253.
;
MODE_8253       equ BASE_8253 + 3
;
; The address of Operation Command Word 3 in the 8259 Programmable
; Interrupt Controller (PIC) (write only, and writable only when
; bit 4 of the byte written to this address is 0 and bit 3 is 1).
;
OCW3            equ 20h
;
; The address of the Interrupt Request register in the 8259 PIC
; (read only, and readable only when bit 1 of OCW3 = 1 and bit 0
; of OCW3 = 0).
;
IRR         equ 20h
;
; Macro to emulate a POPF instruction in order to fix the bug in some
; 80286 chips which allows interrupts to occur during a POPF even when
; interrupts remain disabled.
;
MPOPF macro 
    local   p1, p2
    jmp short p2
p1: iret            ;jump to pushed address & pop flags
p2: push    cs      ;construct far return address to
    call    p1      ; the next instruction
    endm

;
; Macro to delay briefly to ensure that enough time has elapsed
; between successive I/O accesses so that the device being accessed
; can respond to both accesses even on a very fast PC.
;
DELAY   macro
    jmp $+2
    jmp $+2
    jmp $+2
    endm

OriginalFlags       db  ?   ;storage for upper byte of
                    ; FLAGS register when
                    ; ZTimerOn called
TimedCount      dw  ?   ;timer 0 count when the timer
                    ; is stopped
ReferenceCount      dw  ?   ;number of counts required to
                    ; execute timer overhead code
OverflowFlag        db  ?   ;used to indicate whether the
                    ; timer overflowed during the
                    ; timing interval
;
; String printed to report results.
;
OutputStr   label   byte
        db  0dh, 0ah, 'Timed count: ', 5 dup (?)
ASCIICountEnd   label   byte
        db  ' microseconds', 0dh, 0ah
        db  '$'
;
; String printed to report timer overflow.
;
OverflowStr label   byte
    db  0dh, 0ah
    db  '****************************************************'
    db  0dh, 0ah
    db  '* The timer overflowed, so the interval timed was  *'
    db  0dh, 0ah
    db  '* too long for the precision timer to measure.     *'
    db  0dh, 0ah
    db  '* Please perform the timing test again with the    *'
    db  0dh, 0ah
    db  '* long-period timer.                               *'
    db  0dh, 0ah
    db  '****************************************************'
    db  0dh, 0ah
    db  '$'

;********************************************************************
;* Routine called to start timing.                  *
;********************************************************************

ZTimerOn    proc    near

;
; Save the context of the program being timed.
;
    push    ax
    pushf
    pop ax          ;get flags so we can keep
                    ; interrupts off when leaving
                    ; this routine
    mov cs:[OriginalFlags],ah   ;remember the state of the
                    ; Interrupt flag
    and ah,0fdh         ;set pushed interrupt flag
                    ; to 0
    push    ax
;
; Turn on interrupts, so the timer interrupt can occur if it's
; pending.
;
    sti
;
; Set timer 0 of the 8253 to mode 2 (divide-by-N), to cause
; linear counting rather than count-by-two counting. Also
; leaves the 8253 waiting for the initial timer 0 count to
; be loaded.
;
    mov al,00110100b        ;mode 2
    out MODE_8253,al
;
; Set the timer count to 0, so we know we won't get another
; timer interrupt right away.
; Note: this introduces an inaccuracy of up to 54 ms in the system
; clock count each time it is executed.
;
    DELAY
    sub al,al
    out TIMER_0_8253,al     ;lsb
    DELAY
    out TIMER_0_8253,al     ;msb
;
; Wait before clearing interrupts to allow the interrupt generated
; when switching from mode 3 to mode 2 to be recognized. The delay
; must be at least 210 ns long to allow time for that interrupt to
; occur. Here, 10 jumps are used for the delay to ensure that the
; delay time will be more than long enough even on a very fast PC.
;
    rept 10
    jmp $+2
    endm
;
; Disable interrupts to get an accurate count.
;
    cli
;
; Set the timer count to 0 again to start the timing interval.
;
    mov al,00110100b        ;set up to load initial
    out MODE_8253,al        ; timer count
    DELAY
    sub al,al
    out TIMER_0_8253,al     ;load count lsb
    DELAY
    out TIMER_0_8253,al     ;load count msb
;
; Restore the context and return.
;
    MPOPF               ;keeps interrupts off
    pop ax
    ret

ZTimerOn    endp

;********************************************************************
;* Routine called to stop timing and get count.             *
;********************************************************************

ZTimerOff proc  near

;
; Save the context of the program being timed.
;
    push    ax
    push    cx
    pushf
;
; Latch the count.
;
    mov al,00000000b        ;latch timer 0
    out MODE_8253,al
;
; See if the timer has overflowed by checking the 8259 for a pending
; timer interrupt.
;
    mov al,00001010b        ;OCW3, set up to read
    out OCW3,al         ; Interrupt Request register
    DELAY
    in  al,IRR          ;read Interrupt Request
                    ; register
    and al,1            ;set AL to 1 if IRQ0 (the
                    ; timer interrupt) is pending
    mov cs:[OverflowFlag],al    ;store the timer overflow
                    ; status
;
; Allow interrupts to happen again.
;
    sti
;
; Read out the count we latched earlier.
;
    in  al,TIMER_0_8253     ;least significant byte
    DELAY
    mov ah,al
    in  al,TIMER_0_8253     ;most significant byte
    xchg    ah,al
    neg ax          ;convert from countdown
                    ; remaining to elapsed
                    ; count
    mov cs:[TimedCount],ax
; Time a zero-length code fragment, to get a reference for how
; much overhead this routine has. Time it 16 times and average it,
; for accuracy, rounding the result.
;
    mov cs:[ReferenceCount],0
    mov cx,16
    cli             ;interrupts off to allow a
                    ; precise reference count
RefLoop:
    call    ReferenceZTimerOn
    call    ReferenceZTimerOff
    loop    RefLoop
    sti
    add cs:[ReferenceCount],8   ;total + (0.5 * 16)
    mov cl,4
    shr cs:[ReferenceCount],cl  ;(total) / 16 + 0.5
;
; Restore original interrupt state.
;
    pop ax          ;retrieve flags when called
    mov ch,cs:[OriginalFlags]   ;get back the original upper
                    ; byte of the FLAGS register
    and ch,not 0fdh     ;only care about original
                    ; interrupt flag...
    and ah,0fdh         ;...keep all other flags in
                    ; their current condition
    or  ah,ch           ;make flags word with original
                    ; interrupt flag
    push    ax          ;prepare flags to be popped
;
; Restore the context of the program being timed and return to it.
;
    MPOPF               ;restore the flags with the
                    ; original interrupt state
    pop cx
    pop ax
    ret

ZTimerOff endp

;
; Called by ZTimerOff to start timer for overhead measurements.
;

ReferenceZTimerOn   proc    near
;
; Save the context of the program being timed.
;
    push    ax
    pushf       ;interrupts are already off
;
; Set timer 0 of the 8253 to mode 2 (divide-by-N), to cause
; linear counting rather than count-by-two counting.
;
    mov al,00110100b    ;set up to load
    out MODE_8253,al    ; initial timer count
    DELAY
;
; Set the timer count to 0.
;
    sub al,al
    out TIMER_0_8253,al ;load count lsb
    DELAY
    out TIMER_0_8253,al ;load count msb
;
; Restore the context of the program being timed and return to it.
;
    MPOPF
    pop ax
    ret

ReferenceZTimerOn   endp

;
; Called by ZTimerOff to stop timer and add result to ReferenceCount
; for overhead measurements.
;

ReferenceZTimerOff proc near
;
; Save the context of the program being timed.
;
    push    ax
    push    cx
    pushf
;
; Latch the count and read it.
;
    mov al,00000000b        ;latch timer 0
    out MODE_8253,al
    DELAY
    in  al,TIMER_0_8253     ;lsb
    DELAY
    mov ah,al
    in  al,TIMER_0_8253     ;msb
    xchg    ah,al
    neg ax          ;convert from countdown
                    ; remaining to amount
                    ; counted down
    add cs:[ReferenceCount],ax
;
; Restore the context of the program being timed and return to it.
;
    MPOPF
    pop cx
    pop ax
    ret

ReferenceZTimerOff endp

;********************************************************************
;* Routine called to report timing results.             *
;********************************************************************

ZTimerReport    proc    near

    pushf
    push    ax
    push    bx
    push    cx
    push    dx
    push    si
    push    ds
;
    push    cs  ;DOS functions require that DS point
    pop ds  ; to text to be displayed on the screen
    assume  ds:Code
;
; Check for timer 0 overflow.
;
    cmp [OverflowFlag],0
    jz  PrintGoodCount
    mov dx,offset OverflowStr
    mov ah,9
    int 21h
    jmp short EndZTimerReport
;
; Convert net count to decimal ASCII in microseconds.
;
PrintGoodCount:
    mov ax,[TimedCount]
    sub ax,[ReferenceCount]
    mov si,offset ASCIICountEnd - 1
;
; Convert count to microseconds by multiplying by .8381.
;
    mov dx,8381
    mul dx
    mov bx,10000
    div bx      ;* .8381 = * 8381 / 10000
;
; Convert time in microseconds to 5 decimal ASCII digits.
;
    mov bx,10
    mov cx,5
CTSLoop:
    sub dx,dx
    div bx
    add dl,'0'
    mov [si],dl
    dec si
    loop    CTSLoop
;
; Print the results.
;
    mov ah,9
    mov dx,offset OutputStr
    int 21h
;
EndZTimerReport:
    pop ds
    pop si
    pop dx
    pop cx
    pop bx
    pop ax
    MPOPF
    ret

ZTimerReport    endp

Code    ends
    end 
```

我将 nasm.exe 添加到我的路径中，将此文件保存为 Listing1.asm，并尝试使用以下 CMD 命令来组装它：

```
nasm -f win32 listing1.asm 
```

但是，它没有组装，而是给了我以下错误：

```
listing1.asm:50: error: parser: instruction expected
listing1.asm:51: error: parser: instruction expected
listing1.asm:82: error: parser: instruction expected
listing1.asm:83: error: parser: instruction expected
listing1.asm:95: error: parser: instruction expected
listing1.asm:99: error: symbol `endm' redefined
listing1.asm:114: error: parser: instruction expected
listing1.asm:115: error: comma expected after operand 4
listing1.asm:116: error: parser: instruction expected
listing1.asm:122: error: parser: instruction expected
listing1.asm:142: error: parser: instruction expected
listing1.asm:176: error: symbol `DELAY' redefined
listing1.asm:179: error: symbol `DELAY' redefined
listing1.asm:188: error: parser: instruction expected
listing1.asm:190: error: symbol `endm' redefined
listing1.asm:200: error: symbol `DELAY' redefined
listing1.asm:203: error: symbol `DELAY' redefined
listing1.asm:208: error: symbol `MPOPF' redefined
listing1.asm:212: error: symbol `ZTimerOn' redefined
listing1.asm:212: error: parser: instruction expected
listing1.asm:218: error: parser: instruction expected
listing1.asm:237: error: symbol `DELAY' redefined
listing1.asm:252: error: symbol `DELAY' redefined
listing1.asm:282: error: comma, colon or end of line expected
listing1.asm:292: error: symbol `MPOPF' redefined
listing1.asm:298: error: symbol `ZTimerOff' redefined
listing1.asm:298: error: parser: instruction expected
listing1.asm:304: error: parser: instruction expected
listing1.asm:316: error: symbol `DELAY' redefined
listing1.asm:322: error: symbol `DELAY' redefined
listing1.asm:327: error: symbol `MPOPF' redefined
listing1.asm:331: error: symbol `ReferenceZTimerOn' redefined
listing1.asm:331: error: parser: instruction expected
listing1.asm:338: error: parser: instruction expected
listing1.asm:350: error: symbol `DELAY' redefined
listing1.asm:352: error: symbol `DELAY' redefined
listing1.asm:363: error: symbol `MPOPF' redefined
listing1.asm:368: error: symbol `ReferenceZTimerOff' redefined
listing1.asm:368: error: parser: instruction expected
listing1.asm:374: error: parser: instruction expected
listing1.asm:386: error: symbol `assume' redefined
listing1.asm:386: error: parser: instruction expected
listing1.asm:392: error: comma, colon or end of line expected
listing1.asm:402: error: comma, colon or end of line expected
listing1.asm:426: error: comma, colon or end of line expected
listing1.asm:436: error: symbol `MPOPF' redefined
listing1.asm:439: error: symbol `ZTimerReport' redefined
listing1.asm:439: error: parser: instruction expected
listing1.asm:441: error: symbol `Code' redefined
listing1.asm:441: error: parser: instruction expected 
```

不知道我应该在这里做什么；我试过用谷歌搜索一下，但没有想到任何东西。有人认识这些错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:21:36.573

该汇编语言是 MASM，而不是 NASM。

首先，NASM 段的定义不同。

代替

```
Code    segment word public 'CODE' 
```

我们写

```
.section text 
```

还有那个“ASSUME”宣言……你一定有一本古书。那是旧的，旧的 MASM 代码。让我想起了 1980 年代初的回忆！

NASM 和 MASM 之间有很多不同之处，并且您的代码需要大量工作才能移植。如果您想将该 MASM 代码移植到 NASM，请参阅[MASM/NASM 差异](https://stackoverflow.com/questions/2035747/masm-nasm-differences)或 NASM 文档或谷歌“NASM vs MASM”

TL；DR：您正在编写 MASM 代码，而不是 NASM。

# perl - 在 perl 中将制表符分隔的文件读入哈希并搜索

> ID：11572316
> 
> 赞同：2
> 
> 时间：2012-07-20T03:10:50.000
> 
> 标签：perl, search, hash

我有一个制表符分隔文件（inpFile.txt）作为

```
field1  field2
aaa1  aaa2
aaa1  bbb2
aaa1  ccc2 
ccc1  ddd2
eee2  aaa2 
```

我想阅读它并将其存储到哈希（ hashname ）

一旦我的哈希准备好了，我想搜索是否找到 ($key, $value) 对。例如，如果 (eee2, aaa2) 是否找到？

我是 Perl 的初学者，但我知道它可以在 Perl 中有效地完成并且很容易。

我写了以下代码。你能进一步扩展它吗？

谢谢

```
#!/usr/local/bin/perl

open (LIST1, "/inpFile.txt") || die "File not found\n";
     while (<LIST1>) {
          ($tmpvar1, $tmpvar2) = split(/\t/, $_);
          $hashname{$tmpvar1} = $tmpvar2;
     }
close(LIST1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:35:57.137

由于您的数据包含具有多个值的键，并且假设您的数据文件中确实是这种情况，您可以创建一个数组哈希 (HoA)，其中一个键与一个数组相关联：

```
use Modern::Perl;

my %hashname;

while (<DATA>) {
    my ( $key, $value ) = split;
    push @{ $hashname{$key} }, $value;
}

my $searchKey = 'aaa1';
my $searchVal = 'ccc2';

if ( defined $hashname{$searchKey}
    and $searchVal ~~ @{ $hashname{$searchKey} } )
{
    say "key: $searchKey with val: $searchVal found.";
}
else {
    say "key: $searchKey with val: $searchVal not found.";
}

__DATA__
aaa1  aaa2
aaa1  bbb2
aaa1  ccc2 
ccc1  ddd2
eee2  aaa2 
```

搜索“键/值”对的方法是首先查看键是否存在，然后使用智能匹配运算符查看值是否存在于与键关联的数组中。

输出：

```
key: aaa1 with val: ccc2 found. 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:10:33.093

首先，我将您的问题解释为特定于 Keys/Values **pair**上的欺骗。这有点尴尬——正常的问题只是测试键，但我们可以通过将键和值都作为生成新键的函数的输入来进行键值对。

如果您只是使用制表符分隔的 CSV，请使用[Text::CSV](https://metacpan.org/module/Text%3a%3aCSV)并确保它正确完成，并且涵盖了最复杂的情​​况！安装[Text::CSV_XS](https://metacpan.org/module/Text%3a%3aCSV_XS)使其也非常快。

```
use strict;
use warnings;
use Data::Dumper;
use Text::CSV;
use IO::Handle;

my $csv = Text::CSV->new({sep_char=>"\t"});
my $fh = IO::Handle->new_from_fd( *DATA, 'r' );

while ( not $fh->eof ) {
  my $row = $csv->getline( $fh );
  warn Dumper $row;
}

__DATA__
aa1 aaa2
aaa1  bbb2
aaa1  ccc2 
ccc1  ddd2
eee2  aaa2 
```

在你理解了这一点之后，剩下的练习也很简单。我使用了一个非常简单的算法，它将键和值连接起来，并以此为哈希索引。这消除了狡猾的碰撞尝试，但对于您的任务可能不是必需的。随意问的问题。

```
use feature ':5.10';
use strict;
use warnings;
use Data::Dumper;
use Text::CSV;
use IO::Handle;
use Digest::SHA qw(sha1_hex);

my $csv = Text::CSV->new({sep_char=>"\t"});
my $fh = IO::Handle->new_from_fd( *DATA, 'r' );

my ( %kv, %sha1_kv );
while ( not $fh->eof ) {
  my $row = $csv->getline( $fh );
  my ($k, $v) = @$row;

  my $sha1 = sha1_hex($k) . sha1_hex($v);

  if ( exists $sha1_kv{ $sha1 } ) {
    say "We have a hit (key/value dupe) for $sha1 [key: $k]";
  }
  else {
    $kv{ $k } = $v;
    $sha1_kv{ $sha1 } = $v;
  }

  warn Dumper $row;
}

__DATA__
aa1 aaa2
aa1 aaa2
aaa1  bbb2
aaa1  ccc2 
ccc1  ddd2
eee2  aaa2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:46:45.413

您的输入文件将只产生三个元素哈希，因为键是重复的。在现实生活中，您必须处理这种情况，但是在这种情况下，我更改了您的输入文件：

```
aaa1    aaa2
bbb1    bbb2
ccc1    ccc2
ccc1    ddd2
eee2    aaa2 
```

这是对您的代码的一些增强：

```
#!/usr/local/bin/perl

#always use strict and warnings
use strict;
use warnings;
use Data::Dumper;

hash_test();
#Try to put your code in separate subs if possible 
sub hash_test {
   my %hashname = ();
   read_into_hash( \%hashname );
   print Dumper( \%hashname );    # Test your hash
   search_hash( \%hashname, "eee2", "aaa2" );
}

sub read_into_hash {

   #Always declare variables
   my $list1;
   my $tmpvar1;
   my $tmpvar2;
   my $hash_ref = shift;
   my $lineno = 0;
   open( $list1, "<", "/inpFile.txt" ) or die "File not found\n";
   while (<$list1>) {
       $lineno++;
       chomp;    #delete new line character
       ( $tmpvar1, $tmpvar2 ) = split( /\t/, $_ );
       if (defined $hash_ref->{$tmpvar1})
       {
         # adding lineno from file to avoid overwriting. I use '~' just in case
         # if your keys could include such character, use something else
         $tmpvar1 .= "~" . $lineno;
       }
       $hash_ref->{$tmpvar1} = $tmpvar2;

   }

   close($list1);
}

sub search_hash {
   my $hash_ref = shift;
   my $key      = shift;
   my $value    = shift;

   if (defined $hash_ref->{$key} && $hash_ref->{$key} =~ /^$value(\~\d+)*$/)
   {
           print "Found.\n";
       }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T03:46:57.147

首先，当您遇到 Perl 时，请使用 pragma `use strict;`。

我注意到您的文件包含

```
aaa1  aaa2
aaa1  bbb2 
```

在处理我们的文件时，hash 将只存储一个 key `'aaa1' => 'bbb2'`，因为 Perl 在 hash 中有唯一的 key。

```
use strict;

open my $fh, '<', '/input_file.txt' 
    or die "Cant open file $!";

LINE:
while (my $line = <$fh>) {
    my ($key, $value) = split /\t/, $line;
    next LINE if not $key;

    $hash{$key} = $value;
}

my $search_key   = 'eee2';
my $search_value = 'aaa2';

if ($hash{$search_key} eq $search_value) {

   print "Found key: $search_key and value: $search_value in hash /n";
}

close $fh; 
```

# oop - 在 Fortran 中使用多态数据类型的文件 IO

> ID：11572318
> 
> 赞同：4
> 
> 时间：2012-07-20T03:11:05.770
> 
> 标签：oop, polymorphism, fortran, fortran2003

我正在编写一个库，用于将多种类型的几何（球体、平面、NURBS 曲面、stl 文件...）导入到科学的 Fortran 代码中。这种问题似乎是为 OOP 量身定做的，因为定义 a`type :: geom`和 then`type,extends(geom) :: analytic`等很简单。我遇到问题的部分是文件 IO。

在这一点上，我的解决方案是编写定义形状的参数，包括一些告诉我它是哪种形状的标志。阅读时，我实例化了一个`class(geom) :: object`, （因为我事先不知道它将是哪个子类型）但是我该如何阅读它呢？

我无法访问该子类型的任何特定组件。我读到向下转换是*禁止*的，此外，新的`allocate(subtype :: class)`似乎不起作用。新的`READ(FORMATTED)`似乎没有由 ifort 或 gfortran 实现。IE

```
module geom_mod
  type :: geom
  end type
  type,extends(geom) :: sphere
    integer :: type
    real(8) :: center(3),radius
   contains
    generic :: READ(FORMATTED)=> read_sphere ! not implemented anywhere
  end type
contains
  subroutine read_geom(object)
    class(geom),intent(out),pointer :: object     
    integer :: type

    read(10,*) object%type   ! can't access the subtype data yet

    read(10,*) type
    backspace(10)
    if(type==1) then
      allocate(sphere :: object)! downcast?
      read(10,*) object         ! doesn't work
    end if 

  end read_geom
end module 
```

我对这一切都错了吗？我可以使用多态性以外的东西来破解它，但这似乎在其他任何地方都更干净。协助将不胜感激。

编辑：使用 IanH 模块的示例程序

```
program test
  use geom_mod
  implicit none
  class(geom),allocatable :: object

  open(10)
  write(10,*) '1'
  write(10,*) sphere(center=0,radius=1)
  rewind(10)

  call read(object) ! works !
end program test 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:50:22.730

当前的 gfortran 和 ifort 没有实现定义的输入/输出。我没有看到任何证据表明这种情况会在不久的将来发生变化。但是，除了允许一些语法快捷方式之外，该功能实际上并不能为您节省很多工作。

这种情况的一种方法是调用 geom 扩展的“工厂”，它使用文件中的数据将参数分配给正确的类型，然后移交给读取类型特定数据的类型绑定过程。例如：

```
module geom_mod
  implicit none
  integer, parameter :: dp = kind(1.0d0)
  type, abstract :: geom
  contains
    procedure(read_geom), deferred :: read
  end type geom

  abstract interface
    subroutine read_geom(object)
      import :: geom
      implicit none
      class(geom), intent(out) :: object
    end subroutine read_geom
  end interface

  type, extends(geom) :: sphere
    real(dp) :: center(3), radius
  contains
   procedure :: read => read_sphere
  end type sphere
contains
  subroutine read(object)
    class(geom), intent(out), allocatable :: object
    integer :: type
    read (10, *) type
    ! Create (and set the dynamic type of object) based on type.
    select case (type)
    case (1)     ; allocate(sphere :: object)
    case default ; stop 'Unsupported type index'
    end select
    call object%read
  end subroutine read

  subroutine read_sphere(object)
    class(sphere), intent(out) :: object
    read (10, *) object%center, object%radius
  end subroutine read_sphere
end module geom_mod 
```

当前的 ifort (12.1.5) 存在可能需要变通方法的意图（出）多态参数问题，但一般方法保持不变。

（请注意，子例程读取不是类型绑定子例程 - 要读取通用 geom 对象，请使用传统子例程引用样式中的“调用读取（对象）”。）

# apache - 我的 WAMP 服务器只能处理来自 localhost 的请求

> ID：11572319
> 
> 赞同：1
> 
> 时间：2012-07-20T03:11:15.527
> 
> 标签：apache, webserver, wamp

我的 WAMP 服务器安装在虚拟机中，我开发了一个简单的 PHP 文件和一个 android 文件。android 文件应该是正确的并且能够发出 HTML 请求，但是服务器端 PHP 程序从不响应请求。因此，我在服务器中创建了一个简单的站点并尝试在另一个桌面上浏览它，但没有成功。所以这似乎是WAMP服务器的配置造成的，我自己只是一个初学者，所以我选择WAMP服务器，它可以让我几乎什么都不做。我现在不知道如何解决这个问题，我已经尝试更改 httpd.conf 文件中的所有津贴，但它仍然不起作用。

# asp.net - 如何在 .Net 中删除 HTTPS 到 HTTP 安全警报消息

> ID：11572320
> 
> 赞同：0
> 
> 时间：2012-07-20T03:11:22.367
> 
> 标签：asp.net

如何禁用或阻止该安全警报，以便当任何用户访问我的安全页面时，他将不会收到安全警报对话框。任何帮助将不胜感激，并提前感谢您。

谢谢纳伦德拉·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:27:54.307

据我所知，页面的安全性是在浏览器级别识别的，并且引发安全警报的是浏览器。您是否正在将 .NET 代码从 https 页面重定向到 http 页面？如果是这样，则原因是浏览器检测到未经用户同意从安全页面转移到不安全页面，从而导致警告。

我不确定您的情况，但解决此问题的一种方法是让用户单击一个指向 http 页面的 html 链接。这将起作用的原因是浏览器将其识别为用户的选择，而不是幕后重定向。

# iphone - “Drink Mixer”示例 Head First iPhone & iPad 开发

> ID：11572327
> 
> 赞同：0
> 
> 时间：2012-07-20T03:12:26.907
> 
> 标签：iphone, objective-c, xcode

我对 Objective-C 有点陌生，所以我一直在学习 Head First iPhone 和 iPad 开发这本书。在本书的第 4-5 章中，您假设为调酒师设计一个应用程序，它基本上是一个包含详细信息列表的饮料列表的表格视图（假设选择了饮料的成分和说明）。数据来自两个属性列表，一个是包含饮料名称的字符串列表，另一个是包含饮料名称、方向和成分的字典。

我已按照教程进行操作，但应用程序崩溃了，重新检查后仍然崩溃。我正在使用 4.0.1 和 MAC OS X 10.6.8 的 Xcode 版本。

这是一个例外，我希望你们可以看看这个简单的应用程序发生了什么。

```
2012-07-19 21:43:39.757 DrinkMixer[846:207] -[NSCFString objectForKey:]: unrecognized selector sent to instance 0x4b31220

2012-07-19 21:43:39.761 DrinkMixer[846:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSCFString objectForKey:]: unrecognized selector sent to instance 0x4b31220'

    *** Call stack at first throw:

    (

    0   CoreFoundation                      0x00dc25a9 __exceptionPreprocess + 185

    1   libobjc.A.dylib                     0x00f16313 objc_exception_throw + 44

    2   CoreFoundation                      0x00dc40bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187

    3   CoreFoundation                      0x00d33966 ___forwarding___ + 966

    4   CoreFoundation                      0x00d33522 _CF_forwarding_prep_0 + 50

    5   DrinkMixer                          0x00002495 -[RootViewController tableView:cellForRowAtIndexPath:] + 325

    6   UIKit                               0x00089b98 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 634

    7   UIKit                               0x0007f4cc -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 75

    8   UIKit                               0x000948cc -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1561

    9   UIKit                               0x0008c90c -[UITableView layoutSubviews] + 242

    10  QuartzCore                          0x016aca5a -[CALayer layoutSublayers] + 181

    11  QuartzCore                          0x016aeddc CALayerLayoutIfNeeded + 220

    12  QuartzCore                          0x016540b4 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 310

    13  QuartzCore                          0x01655294 _ZN2CA11Transaction6commitEv + 292

    14  UIKit                               0x000169c9 -[UIApplication _reportAppLaunchFinished] + 39

    15  UIKit                               0x00016e83 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 690

    16  UIKit                               0x00021617 -[UIApplication handleEvent:withNewEvent:] + 1533

    17  UIKit                               0x00019abf -[UIApplication sendEvent:] + 71

    18  UIKit                               0x0001ef2e _UIApplicationHandleEvent + 7576

    19  GraphicsServices                    0x00ffb992 PurpleEventCallback + 1550

    20  CoreFoundation                      0x00da3944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52

    21  CoreFoundation                      0x00d03cf7 __CFRunLoopDoSource1 + 215

    22  CoreFoundation                      0x00d00f83 __CFRunLoopRun + 979

    23  CoreFoundation                      0x00d00840 CFRunLoopRunSpecific + 208

    24  CoreFoundation                      0x00d00761 CFRunLoopRunInMode + 97

    25  UIKit                               0x000167d2 -[UIApplication _run] + 623

    26  UIKit                               0x00022c93 UIApplicationMain + 1160

    27  DrinkMixer                          0x00001c89 main + 121

    28  DrinkMixer                          0x00001c05 start + 53

    )

    terminate called after throwing an instance of 'NSException'

    sharedlibrary apply-load-rules all

    (gdb) 
```

这正是应用程序崩溃的时间，在**objectForKey:@"name"**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }

    cell.textLabel.text = [[self.drinks objectAtIndex:indexPath.row] objectForKey:@"name"];

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:35:50.737

错误第一行的线索是您已经将与 indexPath.row 对应的索引处的 self.drinks 的内容初始化为 NSString。当 objectAtIndex: 被检索到时，它会被传递消息 objectForKey: ，就好像它是一个 NSArray 一样。

查看初始化 self.drinks 的代码，并确保已将其设为包含适当内容的适当数组。在您的情况下，它将是一个 NSDictionary* 数组，以便 objectForKey: 起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:07:54.320

调试你的代码并检查drinks 是一个NSDictionary 数组。

# image-processing - 如何使用 OpenCV 操作像矩阵这样的图像？

> ID：11572330
> 
> 赞同：2
> 
> 时间：2012-07-20T03:12:45.050
> 
> 标签：image-processing, opencv

我需要开发一种方法来找到红线和图像底部的距离。我已经使用一些示例隔离了 hsv 中的红线...我知道如何使用 MatLab 执行此操作，但现在我必须使用 opencv ：s 有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:49:10.523

您可以通过以下方式访问图像的每个像素值。

```
IplImage* img=cvLoadImage("your_image.jpg");
int pixelVal;
for(int x=0;x<img->height;x++){
for(int y=0;y<img->width;y++){
    pixelVal=((uchar*)(img->imageData + img->widthStep*x))[y];
}
} 
```

在这里，

> img->imageData 返回一个指向图像起始内存位置的指针
> 
> img->widthStep 是图像行中的字节数

我们访问每个像素值并使用 unsigned char 指针进行转换以获取 int 值。

# ios - 在 iOS 中调用外部类

> ID：11572331
> 
> 赞同：0
> 
> 时间：2012-07-20T03:12:56.347
> 
> 标签：ios, xcode, uiview, linker-errors

我有这个添加到我的项目工作区的按钮类。我有

```
 linker error ( Apple Mach-o Linker Error) 
```

然后我又打开了一个新项目并添加了这个类。在我的 ViewController.h

```
 #import <UIKit/UIKit.h> 
    #import <UIView+Glow.h>  

    @interface ViewController:UIViewController
    @property(non atomic,strong) IBOutlet UIView *testView;
    end 
```

在我的 ViewController.m

添加的是屏幕截图

```
 #importViewController.h
    -(void) viewDidLoad{
     [super viewDidLoad];
     [testView startGlowing]
    } 
```

我有

```
 *unrecognized selector sent to instance error 
```

这是我建议你使用[秘密实验室制作的 UIView 的 Glow Category](https://github.com/thesecretlab/UIView-Glow)的课程。

关于如何调用这个类的任何建议？

附件是问题的截图 ![UIView+Glow 实现文件](../Images/806f6fb58291149e25c1f6bbc1e5abe2.png)

![导入我的视图控制器实现文件](../Images/7a8c8b594f1fbe8e3dd27d2dbf82c425.png) ![错误信息](../Images/4b8e24c5b3273a96284eb1d50e5c90ec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:17:29.620

确保在要使用发光方法的实现文件的顶部使用以下行：

```
#import "UIView+Glow.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:33:03.490

如果你已经复制`UIView+Glow.h`到你的项目中，你应该使用它来导入它：

```
#import "UIView+Glow.h" 
```

您不应使用尖括号 ( `<UIView+Glow.h>`) 来导入属于项目一部分的标头。

如果您还没有复制`UIView+Glow.m`到您的项目中，则需要这样做。

如果您已复制`UIView+Glow.m`到项目中，则需要确保它包含在目标的“编译源”构建阶段。

最简单的检查方法是`UIView+Glow.m`在主编辑器中打开。然后选择 View > Utilities > Show File Inspector 菜单项。查看 File Inspector（在 Xcode 窗口的右侧）。确保它显示`UIView+Game.m`. 然后查看“目标会员”部分。确保选中目标旁边的复选框。

### 更新

最终屏幕截图中的三个链接器错误发生是因为您尚未将`QuartzCore`框架添加到项目中。这是包含核心动画类的框架。

如果您不知道如何在项目中添加框架，请查看[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4).

# php - prepare() 未定义

> ID：11572342
> 
> 赞同：0
> 
> 时间：2012-07-20T03:14:26.643
> 
> 标签：php, oop, pdo

在过去的两天里，我一直在做一个项目，无论我尝试什么，我都会遇到某种错误，或者某些东西不起作用。在这一点上，我被告知我正在调用一个未定义的方法，upload:prepare()，这是真的，因为该类被称为上传，并且语句是 $this->prepare()....等等.

我很沮丧，无论我做什么，我都无法弄清楚这一点。

**类.php**

```
<?php
require('config.php');
error_reporting(E_ALL);
/*
 * Classes required by the script
 * 
 */

class database extends PDO
{
    public $conURL;

    public function __construct($config) {
        $conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db'];
        try {
         parent::__construct($conURL, $config['user'], $config['pass']);
        } catch (PDOException $e) {
            $e->getMessage();
        }
    }       
}

class upload
{
    public $_FILES;

    public function uploadFile() {
        if ($_FILES['file']['size'] >= 2000000) {
           echo "File is too large!";
        }
        elseif (isset($_FILES['file'])) {
           $stmt = $this->prepare("INSERT INTO upload (name, type, size, content) VALUES (?, ?, ?, ?)");
           $stmt->execute(array($_FILES['file']['name'], $_FILES['file']['type'], $_FILES['file']['size'], $_FILES['file']['file']));
        }
    }
} 
```

**配置文件**

```
<?php
$config = array(
        'host' => 'localhost', // db host
        'user' => 'root', // db user
        'pass' => 'mypassword', //db pass
        'db' => 'files' // db name
); 
```

**上传.php**

```
<?php
error_reporting(E_ALL);
require('config.php');
require('classes.php');

$dbh = new database($config);
$upload = new upload();
$upload->uploadFile(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:19:25.657

您正在尝试调用`prepare`,`upload`而不是`database`. 试试这个：

```
class upload
{
    public $_FILES;

    public function uploadFile($config) {
        $db = new database($config);
        if ($_FILES['file']['size'] >= 2000000) {
           echo "File is too large!";
        }
        elseif (isset($_FILES['file'])) {
           $stmt = $db->prepare("INSERT INTO upload (name, type, size, content) VALUES (?, ?, ?, ?)");
           $stmt->execute(array($_FILES['file']['name'], $_FILES['file']['type'], $_FILES['file']['size'], $_FILES['file']['file']));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:20:37.400

我想你的意思是使用`database->prepare`而不是`this->prepare`？

您需要让您的上传类成为数据库实例（或动态创建它）。

# jquery - 如何在另一种方法中使用 jQuery 插件初始化选项？

> ID：11572343
> 
> 赞同：1
> 
> 时间：2012-07-20T03:14:35.530
> 
> 标签：jquery, plugins

假设这是插件的初始化：

```
 $(document).ready(function() {
            $("#tree").fname({
                animSpeed: 0
            });
        }); 
```

现在，我想调用另一个方法并仍然保留该 animSpeed 值：

```
$('#tree').fname('expand'); 
```

但是，在我当前的代码中，animSpeed 值丢失了，而在 expand 方法调用中使用了默认值（它在 init 中工作）。我怎么能改变这个？

当前代码：

```
;(function($){

    $.fn.fname = function(method) {

        var defaults = {
            animSpeed           : 'fast'
        };
        var option = {};

        var methods = {

            init: function(options) {

                option = $.extend(defaults, options);

                return this.each(function() {
                    code...
                });
            },

            expand: function() {
                return this.each(function() {
                    $(this).children('li').slideDown(option.animSpeed);
                });
            }
        };
    };
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:20:12.110

您应该将原始选项存储在[`data`](http://api.jquery.com/data/)被调用的元素中：

```
return this.each(function() {
    $(this).data('fname-options', options);
    // Code...
}); 
```

以便您以后可以通过其他方法访问它：

```
expand: function() {
    return this.each(function() {
        var $this = $(this),
            options = $this.data('fname-options');

        $this.children('li').slideDown(options.animSpeed);
    });
} 
```

# apache - 所有虚拟主机都进入第一个条目

> ID：11572344
> 
> 赞同：0
> 
> 时间：2012-07-20T03:14:39.930
> 
> 标签：apache, virtualhost

我的虚拟主机配置中有一些看起来完全一样的域：

```
<VirtualHost *:80>
     ServerAdmin myemail@gmail.com
     ServerName www.adamzwakk.com
     ServerAlias www.adamzwakk.com
     DocumentRoot /srv/www/adamzwakk
</VirtualHost> 
```

此条目之后的每个站点都指向此条目（第一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:48:26.717

修复它，我将文档路径放在引号中并修复它。

# iphone - 制作 iAD 委托

> ID：11572345
> 
> 赞同：0
> 
> 时间：2012-07-20T03:14:43.297
> 
> 标签：iphone, ios, xcode

我想添加

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

但它不会让我，我不知道在这里放什么，使它成为 iAD 代表：

```
@interface MyAppDelegate : UIResponder <UIApplicationDelegate, HERE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:20:35.890

发现我需要包括：

```
 #import <iAd/ADBannerView.h> 
```

并将其用于此处：

```
ADBannerViewDelegate 
```

# cordova - PhoneGap 到底是用来做什么的？

> ID：11572346
> 
> 赞同：3
> 
> 时间：2012-07-20T03:14:47.650
> 
> 标签：cordova, hybrid

我有几年开发原生 Android 应用程序的经验，并且对制作这些应用程序的 HTML5/CSS3/JS 版本感到好奇，因此我也可以将它们发布到 iOS 上。

我开始阅读一些关于 PhoneGap 的文章，但据我所知，这只是硬件/操作系统功能（相机、GPS、联系人）和我的 HTML/CSS/JS 应用程序之间的接口。这个对吗？

我要移植的第一个应用程序不使用此处列出的任何项目：http: [//docs.phonegap.com/en/1.9.0/index.html](http://docs.phonegap.com/en/1.9.0/index.html) 我只需要按钮和表单元素。这是否意味着PhoneGap 真的不是我想要的，应该只使用计划jQuery 移动？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:28:10.340

你很准。电话差距是为了弥合硬件和您的网络应用程序之间的差距。

如果您不使用列出的任何硬件项目，则无需使用 PhoneGap。

Jquery Mobile 将是一个不错的选择。

附带说明 - 很快，PhoneGap 也不再需要了！使用 HTML5，您应该能够直接访问大部分硬件。但是，浏览器仍然限于不支持此功能。（Chrome 可以，最新的FF nightly builds，Opera Developer builds 可以访问Camera/microphone）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T05:09:58.613

Phonegap 是一个工具，它为您提供开发应用程序的环境。Phonegap 是一个开源的移动开发框架。它允许您使用 HTML5、CSS3 和 JavaScript 等标准 Web 技术进行跨平台开发，避免了每个移动平台的原生开发语言。应用程序在针对每个平台的包装器内执行，并依靠符合标准的 API 绑定来访问每个设备的传感器、数据和网络状态。

# python - 无法用 python 读取这个 xml？

> ID：11572352
> 
> 赞同：0
> 
> 时间：2012-07-20T03:15:18.217
> 
> 标签：python, xhtml

我对 xhtml 几乎一无所知。而且我必须编写一个 python 脚本来编辑一个表。但是由于某种原因，我必须编辑的 wiki 页面没有被任何 python xml 解析器读取，而且我不知道发生了什么。这是 wiki 的示例页面。谁能告诉我这到底是怎么回事？

```
<h2>test</h2><p>&nbsp;</p><p><strong>I am a test</strong></p><p>&nbsp;</p><p>Now I need a table</p><table>
<tbody>
<tr>
    <th>name</th>
    <th>column</th>
</tr>
<tr>
    <td>data1</td>
    <td><p>data2</p></td>
</tr>
</tbody>
</table><p>&nbsp;</p><p>&nbsp;</p> 
```

这是我一直在尝试阅读的一些代码。我经历了几次迭代和不同的 xml 解析器、pulldom、xml.dom、ElementTree、minidom 等。它们都给出了相同的异常：

```
from xml.etree import ElementTree as ET
def main( argv ):
    fileName = "/home/robbnic/Source/scripts/Gesture Service Dashboard.txt"
    text = readFromFile(fileName)
    try:
        for event, elem in ET.iterparse(fileName):
            if elem.tag == "table":
                print "Hot damn!"
                elem.clear()
    except ET.ParseError as pe:
         print pe.message
         print pe.msg
         print pe.args
         print pe.filename
    except:
         print "Unexpected error:", sys.exc_info()[0]
         raise 
```

我不断收到的异常错误是未绑定前缀，但我对 xml（或本例中的 xhtml）知之甚少，以至于我不知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:23:35.620

您缺少一个根标签。您不能像您的那样有多个根（即`h2`、`p`s `table`、 等）。

# android - AdMob 广告在 ListView 中需要两次点击才能激活？

> ID：11572354
> 
> 赞同：1
> 
> 时间：2012-07-20T03:15:36.577
> 
> 标签：android, admob

我在我的应用程序中放置了 admob 广告。它们在 ListView 中显示为页脚视图。奇怪的是，广告没有响应第一次点击。我需要再次单击它才能响应。此后，它会正常响应所有后续点击。

我没有为持有它的视图分配点击监听器。我也没有分配给列表视图的 OnItemClickListener。这就是我将 admob 视图注入到其中的视图（并且这个膨胀的视图被添加为 ListView 页脚）。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:padding="5dp" >

  <!-- I add the Ad to this inner layout at runtime. -->
  <LinearLayout
    android:id="@+id/body"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
    android:padding="5dp">
  </LinearLayout>

</LinearLayout>

...
View parent = inflateContainerFromXml(R.layout.foo);
parent.addView(makeAdMobView());
ListView lv = ...;
lv.addFooterView(parent); 
```

我意识到上面的嵌套布局看起来有点奇怪，但这是因为我想要实现的视觉风格。

知道是什么原因造成的吗？我认为 admob 视图创建代码应该没问题，因为我在应用程序的其他地方以纯线性布局使用它，并且点击处理在那里表现正常。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T15:56:49.957

我有同样的问题; 通过添加解决

`android:descendantFocusability="blocksDescendants"`

在列表视图项的根布局中

# java - 如何找出在项目中调用 System.getProperty() 方法的位置？

> ID：11572358
> 
> 赞同：2
> 
> 时间：2012-07-20T03:16:00.683
> 
> 标签：java, swing, jakarta-ee

我无法控制在项目中调用 System.getProperty 的位置。每当 System.getProperty("SomeProperty"); 时，我想在控制台中记录一些信息。叫做。

如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:30:25.503

您想使用[AspectJ](http://www.eclipse.org/aspectj/)及其`pointcut`. 看看[这里](http://www.eclipse.org/aspectj/doc/released/adk15notebook/ataspectj-pcadvice.html#pointcuts)了解更多。

这是一个改编自上述教程的示例。

```
 @Aspect
 public class Foo {

   @Pointcut("call(* java.lang.System.getProperty(..))")
   void anyUtilityCall() {
       // do whatever you need
   }

 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:24:43.217

您可以尝试创建一个[`java.lang.SecurityManager`](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html)引发异常或在方法中打印一些内容的[`checkPropertyAccess(String)`方法](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html#checkPropertyAccess%28java.lang.String%29)。当某些东西访问系统属性时，它会被调用。

有关安全管理器的更多信息：

[http://docs.oracle.com/javase/tutorial/essential/environment/security.html](http://docs.oracle.com/javase/tutorial/essential/environment/security.html)
[http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed2.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed2.html)

# ubuntu - “目标”服务器上不同帐户下的 Mercurial “拉”？

> ID：11572359
> 
> 赞同：0
> 
> 时间：2012-07-20T03:16:20.743
> 
> 标签：ubuntu, mercurial, pull

我已经在实时服务器上安装了 Mercurial，这样我就可以轻松地“拉动”更改以进行部署。

它是为我的帐户设置的，例如，每当我拉取时它总是要求我输入密码。

但是，现在我想将访问权限移交给其他人。我如何将其“切换”到另一个帐户，所以它会询问他们的密码？

这是一个Ubuntu系统。

谢谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:33:10.853

您使用的是 http 还是 ssh URL？Mercurial 不会在正常使用中存储用户名，因此我希望它在任何一种情况下都会询问您的用户名和密码。如果您确实在 http 或 ssh URL 中有用户名，您将在运行时看到它，`hg paths`并且可以在存储库的`.hg/hgrc`文件`[paths]`部分中对其进行编辑。

# c# - LINQ 查询：获取所有字段，包括外键

> ID：11572360
> 
> 赞同：0
> 
> 时间：2012-07-20T03:16:30.430
> 
> 标签：c#, .net, linq, entity-framework

我有以下查询来获取包含日期的结果：

```
var q = from x in db.TableX
                    where x.Timestamp.CompareTo(fromDate) >= 0
                       && x.Timestamp.CompareTo(toDate) <= 0
                    select x; 
```

我的 TableX 有多个外键。但是，当我调试时，我只看到其中一个被提取，而所有其他键都为空，即使我在数据库中正确地看到它们不为空并且通过 ID 连接到它们的外部表。

```
 public class TableX
    {        
        public int Id { get; set; }
        public string str1{ get; set; } 
        public Table2 t1{ get; set; }
        public Table3 t2{ get; set; }
        public Table4 t3{ get; set; }
        public Table5 t4{ get; set; }
        public Tablet5 t5{ get; set; } 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:39:57.397

假设您正在使用延迟加载，您需要将导航属性定义为虚拟，并且您需要启用代理创建，以便 EF 可以围绕您的类创建代理并在需要时覆盖这些属性以加载。

```
public class TableX
    {        
        public  int Id { get; set; }
        public string str1{ get; set; } 
        public virtual Table2 t1{ get; set; }
        public virtual Table3 t2{ get; set; }
        public virtual  Table4 t3{ get; set; }
        public virtual Table5 t4{ get; set; }
        public virtual Tablet5 t5{ get; set; } 
     } 
```

# collabnet - 无法在我的 Windows 上安装 CollabNet 6.1.1 TeamForge 32 位

> ID：11572362
> 
> 赞同：2
> 
> 时间：2012-07-20T03:16:46.640
> 
> 标签：collabnet

我已经从 32 位的 windows 安装程序下载了最新版本 6.1.1。我的安装有问题。安装程序检查软件要求已完成。在它安装的 4 个程序中，即 msys、java、postgre 和 CsvnEdge，csvnEdge 被标记为未安装。系统很难，我可以看到它已安装。如果我取消设置并重新开始，它会再次找不到 CsvnEdge。

问候阿努杰 ![在此处输入图像描述](../Images/f756c2a923568d0633648575a0a21115.png)

# iphone - 带有 UIAlertView 的 UITableView

> ID：11572364
> 
> 赞同：-1
> 
> 时间：2012-07-20T03:17:14.547
> 
> 标签：iphone, objective-c, xcode4

我有一个表格视图，我希望您按某个单元格出现警报视图，其中包含每个单元格的个性化数据。这是代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *message=[NSString stringWithFormat:@"%@", [tableViewData objectAtIndex:indexPath.row]];

if (message == @"Juan") {

UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Alerta" message:@"Ciudad de México" delegate:self cancelButtonTitle:@"Cerrar" otherButtonTitles:nil];

[alert show];

}

} 
```

你看看我是否按下显示 Juan 的单元格看到 UIAlertView 并且如果我按下另一个单元格出现 Pedro UIAlertView 并且如果每个单元格但按下单元格没有出现在 alertview 我错了我希望我能提供帮助并且找不到解决方案从和通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:07:13.903

你不能用 == 测试字符串是否相等，所以你的测试`message == @"Juan"`总是会失败。改为使用`[message isEqualToString:@"Juan"]`。

# c++ - 在 Eclipse 中使用 -mfloat-abi=hard

> ID：11572368
> 
> 赞同：0
> 
> 时间：2012-07-20T03:17:56.603
> 
> 标签：c++, c, cross-compiling

我正在尝试使用 arm gcc 编译器在 Eclipse 中进行交叉编译。我去 projrct ，属性并设置 c/c++ 编译选项并将标志设置为 -mfloat-abi=hard。它在构建时抛出以下异常：

```
**** Build of configuration Debug for project HelloWorld ****

make all 
Building file: ../src/HelloWorld.c
Invoking: GCC C Compiler
arm-linux-gnueabi-gcc -I/usr/arm-linux-gnueabi/include -O0 -g3 -Wall -mfloat-abi=hard -c -fmessage-length=0 -MMD -MP -MF"src/HelloWorld.d" -MT"src/HelloWorld.d" -o "src/HelloWorld.o" "../src/HelloWorld.c"
Finished building: ../src/HelloWorld.c

Building target: HelloWorld
Invoking: GCC C Linker
arm-linux-gnueabi-gcc -L/usr/arm-linux-gnueabi/lib -mfloat-abi=hard -o "HelloWorld"  ./src/HelloWorld.o   
/usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld: error: ./src/HelloWorld.o uses VFP register arguments, HelloWorld does not
/usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld: failed to merge target specific data of file ./src/HelloWorld.o
collect2: ld returned 1 exit status
make: *** [HelloWorld] Error 1

**** Build Finished **** 
```

没有那个标志，它构建得很好。但我需要将其设置为在 beaglebone 上运行。任何想法我做错了什么？

使用 -print-multi-lib 后的输出

```
**** Build of configuration Debug for project HelloWorld ****

make all 
Building file: ../src/HelloWorld.c
Invoking: GCC C Compiler
arm-linux-gnueabi-gcc -I/usr/arm-linux-gnueabi/include -O0 -g3 -Wall -mfloat-abi=hard -c -fmessage-length=0  -print-multi-lib -MMD -MP -MF"src/HelloWorld.d" -MT"src/HelloWorld.d" -o "src/HelloWorld.o" "../src/HelloWorld.c"
arm-linux-gnueabi-gcc: error: ./src/HelloWorld.o: No such file or directory
.;
arm-linux-gnueabi-gcc: fatal error: no input files
compilation terminated.
make: *** [HelloWorld] Error 4
.;@mfloat-abi=softfp
hf;@mfloat-abi=hard
Finished building: ../src/HelloWorld.c

Building target: HelloWorld
Invoking: GCC C Linker
arm-linux-gnueabi-gcc -L/usr/arm-linux-gnueabi/lib -mfloat-abi=hard -o "HelloWorld"  ./src/HelloWorld.o   

**** Build Finished **** 
```

# java - 在 Haxe 中检测目标语言

> ID：11572369
> 
> 赞同：2
> 
> 时间：2012-07-20T03:18:05.903
> 
> 标签：java, javascript, c++, haxe

我想检测 Haxe 中的目标语言，以便我可以根据 Haxe 编译成的语言来更改函数的行为。

类似 Haxe 的伪代码示例：

```
class Test() {
static function printStuff(toPrint) {
    if (the target language is Java) {
        System.out.println(toPrint);
    } else if (the target language is C++) {
        cout << toPrint;
    } else if (the target language is JavaScript) {
        alert(toPrint);
    }

}
} 
```

目前是否有可能在 Haxe 中实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T03:54:48.417

您可以使用[条件编译](http://haxe.org/ref/conditionals)和[Haxe Magic](http://haxe.org/doc/advanced/magic)来实现这一点。例如：

```
#if java
    untyped __java__("java.lang.System.out.println(toPrint);");
#elseif js
    untyped __js__("alert(toPrint);");
#elseif ...
    ...
#end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T10:05:43.687

甚至只是使用跟踪。

```
class Test()
{
   static function main()
   {
       #if java
           var language = 'java';
        #elseif js
            var language = 'js';
        #elseif cs
            var language = 'csharp';
        #elseif php
            var language = 'PHP'
        #elseif (flash||flash8)
            var language = 'flash';
        #elseif cpp
            var language = 'c++';
        #elseif neko
            var language = 'neko';
        #elseif tamarin
            var language = 'tamarin';
        #end
        trace( language );
    }   
} 
```

但应该注意的是，用于编译它的 hxml 需要在理论上指定每个目标，这将是通用的......

```
-java java
-main Test
--next
-js test.js
-main Test
--next
-cs cs
-main Test
--next
-php www
-main Test
--next
-swf test8.swf
-swf-version 8
-main Test
--next
-swf test.swf
-swf-version 9
-main Test
--next
-neko neko
--main Test 
```

但在实践中，您可能希望添加其他编译器标志，甚至使用 -cmd 来实际运行示例。

从一系列目标开始...

'http://haxe.org/doc/start/

条件编译

'http://haxe.org/ref/conditionals

编译器标志和选项，虽然我可能错过了一个链接。

'http://haxe.org/manual/tips_and_tricks 'http://haxe.org/doc/compiler

然后瞄准魔法

'http://haxe.org/doc/advanced/magic

对于每个目标，您可以使用通用 haxe api 以及以目标命名的目标特定库

'http://haxe.org/api

我对 Stackoverflow 的第一次回复很抱歉，如果它有点冗长:) 也是我无法发布正确链接的原因（仅限于两个）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T07:33:57.980

抱歉，您为什么显示未键入的方式？

您可以拥有完全键入和自动完成的代码

```
class Test() {
    static function printStuff(toPrint) {
        #if java
            java.lang.System.out.println(toPrint);
        #elseif js
            js.Lib.alert(toPrint);
        #elseif cpp
            cpp.Lib.print(toPrint);
        #end
    }
} 
```

# ios - 修改 UISearchBar 取消按钮字体文本颜色和样式

> ID：11572372
> 
> 赞同：21
> 
> 时间：2012-07-20T03:18:30.227
> 
> 标签：ios, uisearchbar

有没有办法在不继承搜索栏的情况下更改 UISearchBar 取消按钮的文本字体和颜色？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-20T04:21:56.737

`UIBarButtonItem`您可以通过更改when 包含在 中的外观来更改取消按钮样式`UISearchBar`。

例如，

```
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                      [UIColor blueColor], 
                                                      UITextAttributeTextColor, 
                                                      [UIColor darkGrayColor], 
                                                      UITextAttributeTextShadowColor, 
                                                      [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], 
                                                      UITextAttributeTextShadowOffset,
                                                      nil] 
                                            forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-12-08T14:54:35.047

## 斯威夫特 3

```
let attributes = [
    NSForegroundColorAttributeName : UIColor.white,
    NSFontAttributeName : UIFont.systemFont(ofSize: 17)
]
UIBarButtonItem.appearance(whenContainedInInstancesOf: [UISearchBar.self]).setTitleTextAttributes(attributes, for: .normal) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-01-18T20:04:00.773

**斯威夫特 5**

```
let attributes:[NSAttributedString.Key: Any] = [
    .foregroundColor: UIColor.black,
    .font: UIFont.systemFont(ofSize: 17)
]
UIBarButtonItem.appearance(whenContainedInInstancesOf: [UISearchBar.self]).setTitleTextAttributes(attributes, for: .normal) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-06-21T23:33:13.453

如果您只想修改**取消**按钮，您可以通过以下方式进行：

```
if let cancelButton = searchBar.valueForKey("cancelButton") as? UIButton {
    cancelButton.setTitle(<your_string>, forState: <UIControlState>)
    cancelButton.setTitleColor(<your_uicolor>, forState: <UIControlState>)
    cancelButton.setAttributedTitle(<your_nsattributedstring>, forState: <UIControlState>)
} 
```

`searchBar`你的`UISearchBar`对象在哪里。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-23T03:10:32.553

根据 htinlinn 的回答，这是我在`viewDidLoad`使用 iOS 7 中的搜索栏的视图控制器方法中使用的：

```
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]
                     setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor], NSForegroundColorAttributeName, nil] 
                                   forState:UIControlStateNormal]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-11T14:49:41.773

@htinlinn 答案的简化 Swift 版本：

```
let attributes = [
    NSForegroundColorAttributeName : UIColor.textBlueColor,
    NSFontAttributeName : UIFont.systemFontOfSize(13)
]
UIBarButtonItem.appearanceWhenContainedInInstancesOfClasses([UISearchBar.self]).setTitleTextAttributes(attributes, forState: .Normal) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T04:11:09.830

要修改搜索栏取消按钮，您需要使用 Button 对象并将该按钮的引用更改为您的自定义按钮。

> ```
> UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(50,20,300,30)];
> searchBar.delegate = self;
> searchBar.barStyle = UIBarStyleDefault;
> searchBar.showsCancelButton = YES;
> UIButton *cancelButton;
> for (id button in searchBar.subviews)
> {
>     if ([button isKindOfClass:[UIButton class]])
>    {
>         cancelButton=(UIButton*)button;
>         break;
>    }
> } 
> ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-20T04:15:30.320

可以使用 searchBar 的 tint 属性来改变 searchBar 的颜色，取消按钮的颜色会根据 UISearchBar 的颜色而改变。我无法手动编辑。但是您始终可以在界面构建器中对其进行自定义，这将隐藏本机取消按钮。并且用户将使用您的自定义按钮作为 searchBar 的取消按钮。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-25T13:10:19.850

iOS 9.0 之后的 Swift 解决方案（通过修改 htinlinn 的答案）：

```
if #available(iOS 9.0, *) {
    UIBarButtonItem.appearanceWhenContainedInInstancesOfClasses([UISearchBar.classForCoder()])
        .setTitleTextAttributes([
            NSFontAttributeName: UIFont.systemFontOfSize(12),
            NSForegroundColorAttributeName: UIColor.blueColor(),
            NSShadowAttributeName: NSShadow(color: UIColor.redColor(), offset: CGSizeMake(0, -1), blurRadius: 2)
            ],
            forState: UIControlState.Normal)
} else {
    // Link to Objective-C Method
} 
```

而当前的 Objective-C 方法（`UITextAttributeTextColor`自 iOS 7.0 起已弃用）：

```
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]
 setTitleTextAttributes:@{
                          NSForegroundColorAttributeName: [UIColor blueColor],
                          NSFontAttributeName: [UIFont systemFontOfSize:12]}
 forState:UIControlStateNormal]; 
```

上面代码中使用的我的小影子扩展：

```
extension NSShadow {
    convenience init(color: AnyObject!, offset: CGSize, blurRadius: CGFloat) {
        self.init()
        self.shadowColor = color
        self.shadowOffset = offset
        self.shadowBlurRadius = blurRadius
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-11-26T10:43:41.627

[这里](https://stackoverflow.com/a/33936413/2099097)有一个更好的解决方案

```
UIButton *cancelButton = [searchBar valueForKey:@"_cancelButton"];
[cancelButton setTitleColor:[UIColor yourColor] forState:UIControlStateNormal];
[cancelButton setTitle:@"Your Text" forState:UIControlStateNormal]; 
```

同样，您可以更改按钮的其他样式和文本属性。

对于 iOS 13。*（@AnujAroshA 在评论中回答）

```
UIButton *cancelButton = [searchBar valueForKey:@"cancelButton"]; 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-12-28T04:35:35.327

试试这个：

```
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil] setTitleTextAttributes:@{NSFontAttributeName:[UIFont fontWithName:@"SourceSansPro-Regular" size:14]} forState:UIControlStateNormal]; 
```

# http-status-codes - 伪造 404、500 和

> ID：11572373
> 
> 赞同：0
> 
> 时间：2012-07-20T03:18:37.383
> 
> 标签：http-status-codes

我正在创建一个模拟游戏（网络服务），并且需要伪造那些错误页面。据我所知，并且可以看到，没有办法伪造 404 或 500 等。这是对的吗？我们能够以编程方式做到这一点吗？

我知道我可以制作一个 404 页面并重定向到它……但我正试图让它更真实一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:21:27.103

将 404 或 500 状态代码返回到浏览器（请参阅您的编程语言/框架的文档以了解如何）将发送一个*真实*的而不是假的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:24:30.880

复制您的服务器针对这些特定错误发送的任何页面（或者如果您已明确指定它们，则只需读取现有文件）并将其写出来，然后连同它一起发送正确的状态代码。例如，在 PHP 中：

```
header("HTTP/1.1 500 Internal Server Error"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T14:55:46.167

以下是我使用 PHP 的方法：

```
<?php
    header('HTTP/ 404'); //So that the browser thinks it's a legitimate 404 error.
    @readfile($_SERVER['DOCUMENT_ROOT'] . '/404.html') or die('404 Not Found'); //Replace "/404.html" with your 404 page.
?> 
```

# c++ - VC 2010 可执行文件未在其他计算机上运行 - 无错误

> ID：11572376
> 
> 赞同：0
> 
> 时间：2012-07-20T03:19:07.717
> 
> 标签：c++, visual-studio-2010, visual-c++, windows-7, cocos2d-x

我在用 VC++ 制作游戏时遇到了一件奇怪的事情。我在 Windows 7 中使用 Cocos2d-x 平台和 VC++ 2010，它在我的机器上运行良好。但是，我有另一台计算机是 Windows XP。我目前正在使用 /MT，因此运行时库没有问题，但该程序无法在 Windows XP 中运行，甚至不会产生错误。我曾在另一台计算机上尝试使用 2010 C++ redist，无论有没有都无法使用。控制台中没有任何内容，也没有错误日志。DependencyWalker 中没有什么奇怪的地方，只是缺少 Internet Explorer 框架的东西。什么会导致 Windows XP 上的程序立即执行并关闭而不会留下错误？

有人有什么想法吗？我正在使用游戏框架的动态链接库，这可能是个问题吗？此外，即使我静态链接，我的可执行文件也只有大约 140 KB。有什么事吗？

谢谢你的帮助。

编辑：我之前遇到过的 CRT 也有一个有趣的问题。当我在 Windows 7 上以权限级别“asInvoker”运行程序时，出现“CRT 未初始化”错误。一旦我将它设置为“highestAllowed”，它就开始工作了，但我想知道它是否与 CRT 有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:30:48.980

好的，我找到了问题所在。事实证明，我的另一台计算机有一个集成的英特尔显卡，它不支持框架使用的图形渲染器（OpenGL ES 2.0）。这就是为什么它最终崩溃而没有输出任何错误的原因。

感谢任何帮助过的人。

# iframe - ModX - 嵌入式 iframe 消失

> ID：11572380
> 
> 赞同：0
> 
> 时间：2012-07-20T03:20:07.057
> 
> 标签：iframe, embed, modx, modx-evolution

我在 ModX 的页面上嵌入了一个 YouTube 视频。要放置它，在页面上我关闭 TinyMCE 以显示 HTML 代码，然后将 iframe 粘贴进去。这工作正常，但是当我返回以 HTML 模式编辑其他内容时，iframe 代码消失了。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:37:59.110

TinyMce 正在为您编码您的 youtube 代码中的一些字符……老实说，它认为这很有帮助；）。您有 3 个选项：

1.  参考 tinymce 文档，有一些选项可以告诉它不编码哪些字符。[对不起，不记得他们是什么]

2.  在您尝试包含视频的特定资源上关闭“富文本”。

3.  将您的视频代码放在一个块中并在您的资源中引用该块而不是实际代码。[可能是你最好的选择]

# android - 将图像保存到 sqlite 数据库有什么问题？

> ID：11572390
> 
> 赞同：1
> 
> 时间：2012-07-20T03:20:47.710
> 
> 标签：android

我想将图像作为 blob 类型写入数据库。但是当我从数据库加载这个图像时，它与源图像不同。我将源图像写入数据库如下：

```
 ByteArrayOutputStream bs = new ByteArrayOutputStream();
Bitmap medBmp = BitmapFactory.decodeStream(this.getResources().openRawResource(R.drawable.source_image));
            medBmp.compress(Bitmap.CompressFormat.JPEG, 100, bs);
            initialValues.put(IMAGE_COL,bs.toByteArray()); 
```

这是图片

源图像： ![在此处输入图像描述](../Images/69196fdce75a04982f712348140a349d.png)

图片是从数据库中加载的 ![在此处输入图像描述](../Images/5917986edff198e3cb4f4fc4b449995a.png)

源图像的背景是透明的，但是从数据库加载的图像具有黑色背景。为什么它们不同？我的代码有什么问题？

请帮帮我，非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T03:23:38.183

您将图像保存为 JPEG，而 JPEG 不支持透明度。所以，你会得到那个黑色的背景。尝试使用 PNG 格式。

# asp.net-mvc-3 - MVC html.dropdownlistfor 不更新模型字段

> ID：11572392
> 
> 赞同：0
> 
> 时间：2012-07-20T03:21:13.577
> 
> 标签：asp.net-mvc-3

我在网上搜索，我认为我的代码应该是正确的，但是当您提交模型字段时始终为 0。模型：

```
 public class ProductsModel
    {
        public List<Products> ProductCommission;
        public List<ProductGroupType> ProductGroupType;
        public  CommissionType CommissionType;
        public int FilterProductGroupTypeId;
        public string Status;

    } 
```

看法：

```
 @Html.DropDownListFor(m => Model.FilterProductGroupTypeId, new SelectList(Model.ProductGroupType, "ID", "Description"), "All")
    @Html.HiddenFor(m => Model.FilterProductGroupTypeId);
      @*  @Html.ActionLink("Filter", "FilterProductTypes", "Products", new { filterid = Model.FilterProductGroupTypeId });*@
 <a href="@Url.Action("FilterProductTypes", "Products", new { filterid  = Model.FilterProductGroupTypeId})">Filter</a> 
```

控制器：

```
 public ViewResult FilterProductTypes(int filterid)
        {
...
} 
```

下拉列表显示正确，但无论我选择什么，它都会向控制器发送 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:28:25.253

尝试：

```
@Html.DropDownListFor(m => m.FilterProductGroupTypeId ..etc) 
```

而且您不需要`Html.HiddenFor`.. 只需确保所有内容都包含在一个`<form>`元素中，并且当您提交时，所有值都应绑定到您的模型（只要您`[HttpPost]`在接收操作上有属性

# events - Flexicious DataGrid FlexDataGirdEvent.EDIT_END 特例

> ID：11572393
> 
> 赞同：1
> 
> 时间：2012-07-20T03:21:23.373
> 
> 标签：events, itemrenderer, flex-datagrid, flexicious

我设置了 Flexicious DataGrid，并且在某个列上设置了 ItemRenderer。现在，当我编辑一个可编辑单元格，然后停止编辑它时，DataGrid 会触发一个 FlexDataGrid.EDIT_ITEM_END 事件（或类似事件）。当它被触发时，我想做一个特定的动作。这很简单。不过，问题是我有一个特殊情况：

如果用户正在编辑一个可编辑的单元格然后点击离开它（这会导致 FlexDataGrid.EDIT_ITEM_END 触发），但他碰巧点击了列上设置的 ItemRenderer 内的一个按钮，那么在这种情况下我不会想做动作。不过，我不知道如何使活动像这样进行。

基本上我正在寻找一个事件是 FlexDataGrid.EDIT_ITEM_END_AND_CLICKED_ON_ANYTHING_OTHER_THAN_THAT_BUTTON，我想触发它​​而不是 FlexDataGrid.EDIT_ITEM_END。但是，唉，我检查了文档并且该事件不存在=-(。

我能做些什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:46:57.913

您是否尝试过 ITEM_EDIT_CANCEL？这有一个 triggerEvent ，它应该有一个 target 属性，应该告诉你点击发生在哪个显示对象上。

# ruby-on-rails - 如何将erb转换为html？

> ID：11572396
> 
> 赞同：3
> 
> 时间：2012-07-20T03:21:43.950
> 
> 标签：ruby-on-rails, erb, templating

想象一下，在我拥有的 Rails 中`@template`，这是`ActionTemplate::View`.

问题是：如何将`@template`其@template.source转换`<%= "hello from erb" %>`为`hello from erb`？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:34:47.320

试试这个...

```
ERB.new(@template.source).result 
```

[ERB#新](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html#method-c-new)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T03:42:26.337

嗯......`ActionView::Template.new`真的不推荐在 Rails 之外乱搞。你需要预先设置大量的东西（[初始化](https://github.com/rails/rails/blob/565c1b0a0772ac6cf91c77e9285806f7b028614c/actionpack/lib/action_view/template.rb#L142)和[渲染](https://github.com/rails/rails/blob/565c1b0a0772ac6cf91c77e9285806f7b028614c/actionpack/lib/action_view/template.rb#L142)）

如果您确实只想使用[ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)，请使用此示例

```
require 'erb'

x = 42
template = ERB.new <<-EOF
  The value of x is: <%= x %>
EOF
puts template.result(binding) 
```

而且，您可以使用 Kyle 的答案从您的模板转到 ERB。

# java - Java SWT 浏览器滚动到页面底部

> ID：11572402
> 
> 赞同：1
> 
> 时间：2012-07-20T03:22:14.593
> 
> 标签：java, swt

我有一个浏览器，我正在以类似于以下方式向其中添加内容：

```
browser.setText(browser.getText() + newText()); 
```

然后，当 html 太多而无法容纳在视图中时，我希望浏览器向下滚动，因此在每次调用后`setText()`我也会这样做（正如网络上其他地方对这个问题的回答所建议的那样）：

```
browser.execute("window.scrollTo(0, document.body.scrollHeight)"); 
```

但是，这不起作用！我也尝试过使用锚点滚动到，但这也不起作用。

如何实现？相反，我的方法中的问题在哪里（这似乎对其他人有用）？

谢谢

编辑：这是我的实际代码：

```
protected void createContents() {
    shell = new Shell();
    shell.setSize(450, 300);
    shell.setText("SWT Application");

    final Browser browser = new Browser(shell, SWT.NONE);
    browser.setBounds(10, 10, 430, 220);

    Button btnNewButton = new Button(shell, SWT.NONE);
    btnNewButton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseUp(MouseEvent e) {
            browser.setText(browser.getText() + "<p>weeee!!!</p>");
            browser.execute("window.scrollTo(0, document.body.scrollHeight)");
        }
    });
    btnNewButton.setBounds(10, 236, 430, 32);
    btnNewButton.setText("New Button");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:02:46.487

好吧，我想出了*一个*方法来做到这一点。它与我上面的方法非常相似，只是代替

```
browser.setText(browser.getText() + "<p>weee!!</p>"); 
```

我用了

```
String stringToAdd = "wee";
browser.execute(String.format("document.write('%s')", stringToAdd
                .replace("\\", "\\\\")
                .replace("'", "\\'")
                .replace("\"", "\\\""))); 
```

仍然不确定我最初的方法有什么问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:19:20.173

我在我的一个项目中做了类似的事情，但是我没有使用“document.write('%s')”，而是使用了“document.body.insertAdjacentHTML('beforeEnd', '%s')”。这样做会在 HTML 的 body 块中添加 HTML 代码，在所有其他 HTML 之后，但在结束 body 标记之前。

# linux - 使用 dot 运行 shell 脚本 为什么 "echo $0" 打印 -bash

> ID：11572403
> 
> 赞同：0
> 
> 时间：2012-07-20T03:22:33.437
> 
> 标签：linux, bash, shell

使用 dot 运行 shell 脚本 为什么 "echo $0" 打印 -bash

假设我下面有一段代码

```
#!/usr/bin/env bash
echo $0 
```

我使用点 (.) 执行

```
. ./script.sh 
```

输出：

```
-bash 
```

然而，

如果我没有点跑

输出是路径名与我预期的脚本名相结合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:24:50.097

Sourcing 一个脚本在现有的解释器中运行它，而不是在`exec`一个新的解释器中运行，这意味着它`$0`没有正常初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:42:30.593

`.`是 的别名`source`：

不要使用此命令运行脚本，它是为导入源文件而创建的。
你可以在这里看到：[Advanced Bash scripting guide](http://tldp.org/LDP/abs/html/internal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:34:05.540

当您使用 运行脚本时`.`，本质上就好像您直接在 shell 命令行上键入脚本的内容一样。因此`echo "$0"`，如果您只是键入它，它将准确地输出它会输出的内容。

像这样的特殊变量`$0`只有在你启动一个新的 shell 时才会被初始化，这`.`不会，否则它不会很有用。

但是，如果您使用的是 bash 版本 3 或更高版本，您总是可以找出当前正在执行的文件，因此：

```
echo "$BASH_SOURCE" 
```

无论如何调用文件，它都有效。

# c# - WPF 应用程序中的 SendKeys.Send 方法

> ID：11572411
> 
> 赞同：21
> 
> 时间：2012-07-20T03:23:15.650
> 
> 标签：c#, .net, wpf

我正在尝试发送 Keystroke(Ctrl+T) 以进行浏览器控制。但是，`SendKeys.Send()`在 WPF 应用程序中显示错误？？我的问题是

1) 我可以在 WPF 应用程序中使用这种方法吗？

2）是否有任何替代方法来发送自动击键。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T03:43:55.303

SendKeys 是 System.Windows.Forms 命名空间的一部分，Wpf 中没有等效的方法。您不能将 SendKeys.Send 与 WPF 一起使用，但如果将 System.Windows.Forms 添加到项目引用中，则可以使用[SendKeys.SendWait方法。](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)您唯一的其他选择是 PInvoke [SendInput](http://www.pinvoke.net/default.aspx/user32.SendInput)。

请注意，这两种方法都将数据发送到当前活动的窗口。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-01-12T11:47:04.870

我发现一篇[博客文章](http://michlg.wordpress.com/2013/02/05/wpf-send-keys/)描述了[InputManager](http://msdn.microsoft.com/en-us/library/system.windows.input.inputmanager(v=vs.110).aspx)的使用。它允许您在 WPF 中模拟键盘事件。

```
/// <summary>
///   Sends the specified key.
/// </summary>
/// <param name="key">The key.</param>
public static void Send(Key key)
{
  if (Keyboard.PrimaryDevice != null)
  {
    if (Keyboard.PrimaryDevice.ActiveSource != null)
    {
      var e = new KeyEventArgs(Keyboard.PrimaryDevice, Keyboard.PrimaryDevice.ActiveSource, 0, key) 
      {
          RoutedEvent = Keyboard.KeyDownEvent
      };
      InputManager.Current.ProcessInput(e);

      // Note: Based on your requirements you may also need to fire events for:
      // RoutedEvent = Keyboard.PreviewKeyDownEvent
      // RoutedEvent = Keyboard.KeyUpEvent
      // RoutedEvent = Keyboard.PreviewKeyUpEvent
    }
  }
} 
```

# c++ - 是否保证每个迭代器只调用一次 remove_if 谓词？

> ID：11572414
> 
> 赞同：2
> 
> 时间：2012-07-20T03:23:38.137
> 
> 标签：c++, stl, iterator, deque, remove-if

我一直在阅读最新的 C++ 规范，但我无法弄清楚是否`remove_if`可以为同一个元素多次调用。特别是，我正在考虑在迭代器上`std::remove_if`被调用。`deque`据我所知，如果它所做的只是从第一个参数开始并迭代到第二个，那么没有*理由*多次调用它。

我正在处理的代码使用手动引用计数，因此，如果`remove_if`谓词返回 true，它将递减并删除底层对象引用。明显的问题是，这只`remove_if`在每个元素只调用一次谓词时才有效，否则后续调用将访问已删除的对象。有些东西告诉我，这并不能保证没问题，并且会出现一个点，即同一个元素将被传递给`remove_if`谓词两次以进行一次`remove_if`调用。

如果您有某种实现迭代器的疯狂数据结构，并说，为每个迭代器增量随机选择一个条目，直到它（随机）到达结束迭代器，我可以看到这将如何失败。但是对于简单的、标准化的结构，比如`deque`,`vector`和`list`，单个元素可以多次传递给谓词吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:31:31.447

根据标准§23.3.4.6/14[的草案：](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

```
复杂性：精确距离（开始（），结束（））应用程序
的相应谓词。

```

如果参考有点偏离，请原谅我；这实际上是我第一次正式引用它。我希望这是您正在寻找的信息。

# php - PHP 和 MySQL：找出导致 CPU 负载过重的文件或查询

> ID：11572416
> 
> 赞同：2
> 
> 时间：2012-07-20T03:23:42.063
> 
> 标签：php, mysql, apache

这是我的最高输出：

> 6747 example.com 15 0 241m 19m 8188 R **29.9[CPU]** **0.2[RAM]** 3:24.89 **php**
> 
> 31798 mysql 15 0 1952m 422m 5384 S **12.0[CPU]** **5.3[RAM]** 9:00.27 **mysqld**

查看 PHP 的 CPU 使用率。我不知道是哪个文件导致了这个负载。树下是否有显示哪个文件正在使用 CPU 的模块？我的意思是这样的：

> 6747 example.com 15 0 241m 19m 8188 R 29.9[CPU] 0.2[RAM] 3:24.89 php
> 
> ```
>  5.49%                          index.php
>                     15.39%                         videos.php
>                         x%                              y.php 
> ```
> 
> 31798 mysql 15 0 1952m 422m 5384 S 12.0[CPU] 5.3[RAM] 9:00.27 mysqld

我也想为 mysql 做同样的事情。我现在想知道现在正在执行哪个查询以及需要多长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:44:09.780

最简单的选项（不是说最准确，而是最简单的）将是：

*   对于 PHP，如果您想将一个 PHP 文件与另一个文件进行比较，假设耗时最长的进程使用最多的 CPU。使用网络分析器（Chrome 和 IE 或 Firebug 内置）找出哪个进程耗时最长。如果做不到这一点，用户 fiddler（在 Windows 上）或 Charles（Mac）。删除数据响应时间并平均剩余的时间 = 生成响应的时间大约 = CPU 使用率。请注意，这将包括外部调用、memcached 调用、mySQL 调用等。

*   对于mySQL，慢查询日志是无价的。（需要在 my.cnf 中配置并重新启动服务器 - 但它应该被认为是强制性的。）

*   对于更多诊断，Xdebug（由 Xesued 建议）将帮助您分析脚本的各个部分（以及调试）。但是，不建议用于生产，因为它会进一步减慢您的速度。

*   另一种粗略的方法是“回显 microtime(true);” 在脚本的各个位置，或将该信息泵入日志文件。（在脚本开始时打开日志文件，并在各个点记录微时间 - 寻找大的差距。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:35:25.807

我不知道如何在运行时确定 PHP 脚本加载。（不确定它是否可能）。但是，使用 Xdebug 的分析器可以帮助您确定脚本慢的地方。

[Xdebug 探查器](http://www.xdebug.org/docs/profiler)

它是一个很棒的工具，可以帮助您捕捉 90+% 的减速。

至于 MySQL：这是一个相关的问题：[how-to-analyze-query-cpu-time](https://stackoverflow.com/questions/2280984/how-to-analyze-query-cpu-time)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:43:12.560

我认为没有任何直接可用的东西，但假设每个脚本都作为一个单独的进程运行（类似于在 CLI 上单独调用的东西），您可以使用[`getmypid()`](http://php.net/manual/en/function.getmypid.php)然后将其与您的 CPU 负载日志相关联。

# python - 在 Python 中从 XML 字符串/文件创建元组

> ID：11572417
> 
> 赞同：1
> 
> 时间：2012-07-20T03:23:46.937
> 
> 标签：python, xml, xml-parsing

我决定最好有一种方法可以从`XML`字符串中创建字典。

```
import xml.etree.ElementTree as ET

response = '<some><generic><xml></xml></generic></some>'
targetTree = ET.fromstring(response)

# Do something cool here

for key in my_cool_dict:
    print '{0} = {1}'.format(key, my_cool_dict[key]) 
```

我找到了迭代元素的好方法：

```
for elem in targetTree.findall('some'):
    for child in elem.getchildren():
        print i.text 
```

这类事情需要我知道`XML`标签。如果我不知道我收到了什么怎么办？如何创建标签名称和标签之间的值`my_cool_dict`？`key``value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:07:15.600

如果它是平的（也就是说，字典不会包含其他字典），那么这应该可以工作：

```
my_cool_dict = {}
for element in some_parent_element:
    my_cool_dict[element.tag] = element.text 
```

例如，如果 `some_parent_element`表示此元素：

```
<question>
    <title>How do I make a `dict` from XML in Python?</title>
    <tags>python xml</tags>
    <body>Lorem ipsum dolor sit amet.</body>
</question> 
```

然后运行您的代码：

```
for key in my_cool_dict:
    print '{0} = {1}'.format(key, my_cool_dict[key]) 
```

你会得到这个：

```
body = Lorem ipsum dolor sit amet.
tags = python xml
title = How do I make a `dict` from XML in Python? 
```

# google-maps - 融合表 - 缩放到区域边界

> ID：11572421
> 
> 赞同：0
> 
> 时间：2012-07-20T03:24:31.920
> 
> 标签：google-maps, google-fusion-tables

我正在创建一个多区域和地区地图，您可以在这里看到：http: [//vciregionmap.com/new/](http://vciregionmap.com/new/)

它在新版本中使用了这个 Fusion Table： [https ://www.google.com/fusiontables/DataSource?snapid=S587803AEqk](https://www.google.com/fusiontables/DataSource?snapid=S587803AEqk)

它工作得很好，它唯一没有做的事情，并且在旧版本中曾经做过 - 代码在那里，但大约 8 个月前停止工作。

我需要图例缩放到您选择的区域和地区的范围。

我不确定如何在单击图例时放大地图 - 我想我可能无需绘制区域和地区的边界就可以做到，但确实需要缩放（如您所见）。

这是我遇到的问题。. 地图视图 1 - 显示所有 5 个区域以及区域边界的轮廓。地图视图 2- 放大区域并显示每个区的边界。地图视图 3 - 放大区域边界，仅显示该区域的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:42:24.003

您的查询只是“选择”一列（纬度），但回调例程需要 2：

```
 parseFloat(response.getDataTable().getValue(i, 0)),
      parseFloat(response.getDataTable().getValue(i, 1))); 
```

这就是为什么您会收到此 javascript 错误：

```
Uncaught Error: Invalid column index 1\. Should be an integer in the range [0-0]. 
```

[6 个月前 fusion tables 用户组中的](https://groups.google.com/group/fusion-tables-users-group/browse_frm/thread/2926bf052aa5f237/f76732392cd86351?lnk=gst&q=gviz+query+fusiontableslayer+geocodezip#f76732392cd86351)这个帖子解释了这个问题并包含了修复（[这篇文章](https://groups.google.com/group/fusion-tables-users-group/msg/f76732392cd86351)）。

[我认为这就是你想要做的](http://www.geocodezip.com/vciregionmap_com_new_20120724a.html)

# sql - 一个 Access SQL 查询中的两个右连接

> ID：11572426
> 
> 赞同：2
> 
> 时间：2012-07-20T03:24:59.230
> 
> 标签：sql, ms-access, ms-access-2007

在我的 Ms Access 中，我想从两个不同的表中插入数据，所以我这样编写 sql：

```
SELECT B.*, C.* INTO Table2 FROM Table1 AS A 
RIGHT JOIN ABC AS B ON A.HKID=B.HKID 
RIGHT JOIN DEF AS C ON A.HKID=C.HKID 
WHERE A.HKID Is Null and b.organization not like '*xxx*' and b.adj = 1 and c.[Status] = 'Suspend';" 
```

但是运行sql时出现错误消息，它说语法错误。

我可以这样写sql吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:13:30.463

当您有多个 时`JOIN`，Access 的数据库引擎需要使用括号。

```
SELECT B.*, C.* INTO Table2
FROM
    (Table1 AS A RIGHT JOIN ABC AS B ON A.HKID = B.HKID)
    RIGHT JOIN DEF AS C ON B.HKID = C.HKID
WHERE
        A.HKID Is Null
    AND B.organization Not Like '*xxx*'
    AND B.adj=1
    AND C.Status='Suspend'; 
```

注意我用...

```
RIGHT JOIN DEF AS C ON B.HKID = C.HKID 
```

而不是你拥有它的方式......

```
RIGHT JOIN DEF AS C ON A.HKID=C.HKID 
```

我必须进行更改，因为当我尝试访问时，Access 抱怨“不支持加入”`ON A.HKID=C.HKID` 如果这不令人满意，您将需要重新开始；我想我会以相反的顺序使用表格来解决这个问题并使用`LEFT JOIN`.

此外，您创建的表 ( `Table2`) 将包含名为`B_HKID`and的字段`C_HKID`，它们来自`B.HKID`and `C.HKID`。您将看到与这两个表共有的任何其他字段名称相同的模式。如果这是不可接受的，您可以单独列出字段并在需要时分配别名。

如果您安装了 Access，您应该在查询设计器中构建此查询，因为它将确保您正确设置连接以保持数据库引擎的运行。

`Like`如果您没有安装 Access，并且您从 ADO 连接运行此查询，请将字符串模式中的通配符从 更改`*`为`%`。

```
AND B.organization Not Like '%xxx%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:57:14.123

该代码不正确

```
INSERT INTO TABLE2
SELECT B.*, C.* FROM TABLEA AS A
 RIGHT JOIN ABC AS B ON A.HKID=B.HKID
 RIGHT JOIN DEF AS C ON A.HKID=C.HKID
WHERE A.HKID IS NULL and B.ORGANIZATION NOT LIKE '*xxx*' AND B.ADJ = 1 AND C.[STATUS] = 'SUSPEND'; 
```

希望您了解正确的连接。您所说的是从 C 和 B 返回所有记录，无论它是否与 A 匹配。但我想您的 where 将其缩减为仅在与 A 不匹配时返回 C 和 B。

[http://msdn.microsoft.com/en-us/library/bb208861(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb208861(v=office.12).aspx)

您不必在插入中指定列，因为 select 将为您执行此操作：

“您还可以使用 INSERT INTO 通过使用 SELECT ... FROM 子句从另一个表或查询中追加一组记录，如多记录追加查询语法中所示。在这种情况下，SELECT 子句指定要追加到的字段指定的目标表。”

编辑：我相信下面的代码也是如此，但没有 A.HKID IS NULL，也可能会提高性能：

```
INSERT INTO TABLE2
SELECT B.*, C.* FROM TABLEA AS A
 INNER JOIN ABC AS B ON A.HKID<>B.HKID
 INNER JOIN DEF AS C ON A.HKID<>C.HKID
WHERE B.ORGANIZATION NOT LIKE '*xxx*' AND B.ADJ = 1 AND C.[STATUS] = 'SUSPEND'; 
```

# ruby - Heroku Aspen 上的“错误：无法构建 gem 原生扩展”

> ID：11572427
> 
> 赞同：1
> 
> 时间：2012-07-20T03:25:05.680
> 
> 标签：ruby, heroku, gem

我正在尝试将一个旧的 Ruby 项目从一个 Heroku 应用程序克隆到另一个应用程序，但我无法让它运行。

我已经使用 aspen-mri-1.8.6 堆栈设置了一个新应用程序。

但是当我向上推送代码（直接从正在运行的应用程序克隆）时，我收到以下错误：

```
Counting objects: 465, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (214/214), done.
Writing objects: 100% (465/465), 192.12 KiB | 95 KiB/s, done.
Total 465 (delta 239), reused 440 (delta 230)

-----> Heroku receiving push
-----> Ruby/Rack app detected

-----> Installing gem patron from http://rubygems.org
       Building native extensions.  This could take a while...
       ERROR:  Error installing patron:
        ERROR: Failed to build gem native extension.

       /usr/local/bin/ruby extconf.rb
       checking for curl-config... no
       checking for main() in -lcurl... no
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.

       Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/local/bin/ruby
        --with-curl-dir
        --without-curl-dir
        --with-curl-include
        --without-curl-include=${curl-dir}/include
        --with-curl-lib
        --without-curl-lib=${curl-dir}/lib
        --with-curllib
        --without-curllib
       extconf.rb:34:   Can't find libcurl or curl/curl.h (RuntimeError)

         Try passing --with-curl-dir or --with-curl-lib and --with-curl-include
         options to extconf.

       Gem files will remain installed in /app/tmp/repo.git/gems_build/gems/patron-0.4.18 for inspection.
       Results logged to /app/tmp/repo.git/gems_build/gems/patron-0.4.18/ext/patron/gem_make.out
 !     Heroku push rejected, failed to install gem

To git@heroku.com:thumbify.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:thumbify.git' 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-27T13:57:37.607

> sudo apt-get install libcurl3-dev

* * *

libcurl 是一个易于使用的客户端 URL 传输库，它是 mri ruby​​ 所需的库之一

# javascript - 如何使用基于列索引的 javascript 对 html 表进行排序

> ID：11572431
> 
> 赞同：3
> 
> 时间：2012-07-20T03:25:25.500
> 
> 标签：javascript, jquery, asp.net, html

我正在使用具有结构的表

```
<table cellspacing="0" cellpadding="3" rules="cols" border="1" id="ctl00_Content_GrdCustomer" style="color:Black;border-color:#999999;width:640px;border-collapse:collapse;">
    <tr style="color:White;background-color:Black;font-weight:bold;">
        <th scope="col">Something</th>
        <th scope="col">Client Name</th>
        <th scope="col">Address</th>
        <th scope="col">Place</th>
        <th scope="col">City</th>
        <th scope="col">Country</th>
    </tr>
    <tr class="home-history-grid-row customerData">
        <td align="center" style="width:50px;"><!--Checkbox Goes Here--></td>
        <td align="center">Raju Varghese</td>
        <td align="center">&nbsp;</td>
        <td align="center">&nbsp;</td>
        <td align="center">&nbsp;</td>
        <td align="center">Country4</td>
    </tr>
    <tr class="home-history-grid-row customerData">
        <td align="center" style="width:50px;"><!--Checkbox Goes Here--></td>
        <td align="center">Joseph K. J</td>
        <td align="center">&nbsp;</td>
        <td align="center">&nbsp;</td>
        <td align="center">&nbsp;</td>
        <td align="center">Country4</td>
    </tr>
</table> 
```

我需要根据标题为“客户名称”的“th”对表格进行排序。浏览了这么多链接，所有链接都根据标题点击进行排序，我不太了解 javascript。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:51:11.010

如果您不太了解javascript，那么我推荐tablesorter：

[tablesorter.com](http://tablesorter.com/docs/)

确保包含 jQuery，然后包含 tablesorter JS 和 CSS 文件。您还需要将头部包裹在标签中，将主体包裹在标签中。网站上的文档包含您需要的所有信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:48:58.093

我不确定您的确切情况是什么，因为您的帖子缺乏细节，但我认为您可能会发现另一种更易于管理的方法。

如果可以，您应该在 JavaScript 中创建一个二维数组，`[6][n]`其中包含您计划在表中存储的条目数。创建数组后，将所有数据硬编码到数组中。一旦您在数组中获得数据，您要做的就是对相应的行进行排序，然后使用 for 循环填充一个 html 表。

这种方法会减少很多麻烦，因为您不必担心从 HTML 页面加载数据，然后用新生成的表格替换整个表格，就像您当前的方法需要的那样。

如果您有任何问题或需要在下面进一步澄清评论。

干杯和快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:35:09.807

听起来您只想根据特定列对表格进行排序，而无需用户单击以启动它。

您可以使用 DataTables 执行此操作。当你初始化数据表时，你可以指定它应该在哪一列上排序：

```
$(document).ready(function() {
oTable = $('#ctl00_Content_GrdCustomer').dataTable( {
    "aaSorting": [[ 1, "asc" ]]
} ); 
```

});

该 API 还包括函数 fnSort，您可以在初始化后使用该函数对其进行重新排序，您只需要执行如下调用即可随时对其进行重新排序：

```
 // Sort immediately with columns 0 and 1
 oTable.fnSort( [ [0,'asc'], [1,'asc'] ] ); 
```

# android - Android长时间运行的活动/服务

> ID：11572433
> 
> 赞同：0
> 
> 时间：2012-07-20T03:25:50.523
> 
> 标签：android, android-intent

我已经构建了一个应用程序，它使用磁场传感器充当磁簧开关来运行活动中的某些方法。这运行 24/7，并且人们无法访问手机，因此无需担心用户关闭应用程序。但是，应用程序在长时间等待后崩溃；而且我不确定我是否采取了正确的方法：基于活动或基于服务。

我对服务的理解是它们对后台活动有好处，但由于我的活动一直在运行，我觉得这不是正确的方法。

同样，由于我的活动在后台运行，并且由于它不断读取磁场并在需要时创建本地广播意图，这可能会导致各种广播接收器出现一些问题（也就是说，如果它们不是在 onResume 期间创建的，并且未注册在 onPause 期间）。

正如我在第一段中提到的，我想知道哪种方法是运行磁场传感器以触发本地广播意图的首选方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:32:29.567

应该没问题。如果它崩溃了，日志是什么？

好吧，您仍然可以拥有一项长期运行的服务，该服务会为您的活动发送我们的消息。（更好的方法）在您的活动中使用传感器代码有什么意义？我了解您的活动永远不会暂停，但您仍然应该有一项服务可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T17:29:04.157

我意识到这是一篇旧帖子，但我从经验中了解到，Android 保留随时终止后台活动的权利（参考：[onDestroy()](https://developer.android.com/reference/android/app/Activity.html#onDestroy() "onDestroy()")文档）。如果你是“前台服务”——这意味着你在通知栏中有一个图标——你会更好地坚持：[前台服务](https://developer.android.com/guide/components/services.html#Foreground)。对于这类应用程序来说，这是一个非常重要的概念。

# eclipse - Eclipse SWT CompositeScroll 始终显示垂直条

> ID：11572438
> 
> 赞同：0
> 
> 时间：2012-07-20T03:26:40.223
> 
> 标签：eclipse, swt

即使没有可滚动的内容，是否可以始终显示 VerticalBar？

```
ScrolledComposite sc = new ScrolledComposite(main, SWT.BORDER_SOLID| SWT.V_SCROLL); 
```

这行代码并不总是打开滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:17:02.403

对于 ScrolledComposite，我认为您不能这样做，至少如果您想正常使用 H 滚动功能。您可以调用`ScrolledComposite.setAlwaysShowScrollbars()`true，但它会一直显示两个启用的滚动条。（通过在选项中设置 SWT.H_SCROLL 或 SWT.V_SCROLL 来启用它们）。如果您不想要水平滚动，那么这将满足您的需求。

# android - 格式编辑文本为美国电话号码 1(xxx)-xxxx 你在 android 中输入？

> ID：11572440
> 
> 赞同：1
> 
> 时间：2012-07-20T03:26:49.767
> 
> 标签：android, formatting, android-edittext, phone-number, textwatcher

我一直在尝试找到将电话号码格式化为用户类型的简单解决方案。我不想使用任何库进行格式化。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:43:17.960

似乎您需要将 TextChangedListener 添加到您的编辑中并在那里准备处理。这是在开头插入 +7 的小例子（实际上，对于 - 在中间逻辑保持不变，只需要另一个字符串操作）：

```
/** Helper to control input phone number */
static class PrefixEntryWatcher implements TextWatcher {
    /** flag to avoid re-enter in {@link PhoneEntryWatcher#afterTextChanged(Editable)}*/
    private boolean isInAfterTextChanged = false;
    /** Prefix to insert */
    private final String prefix;
    /** Prefix to insert length */
    private final int prefixLength;
    /** Weak reference to parent text edit */
    private final WeakReference<EditText> parentEdit;

    /**
     * Default constructor
     *
     * @param prefix to be used for prefix
     */
    PrefixEntryWatcher(final String prefix, final EditText parentEdit) {
        this.prefix = prefix;
        this.prefixLength = (prefix == null ? 0 : prefix.length());
        this.parentEdit = new WeakReference<EditText>(parentEdit);
    }

    @Override
    public synchronized void afterTextChanged(final Editable text) {
       if (!this.isInAfterTextChanged) {
           this.isInAfterTextChanged = true;

           if (text.length() <= this.prefixLength) {
               text.clear();
               text.insert(0, this.prefix);

               final EditText parent = this.parentEdit.get();

               if (null != parent) {
                   parent.setSelection(this.prefixLength);
               }
           }
           else {
               if (!this.prefix.equals(text
                       .subSequence(0, this.prefixLength).toString())) {
                   text.clear();
                   text.insert(0, this.prefix);
               }

               final String withoutSpaces
                   = text.toString().replaceAll(" ", "");

               text.clear();
               text.insert(0, withoutSpaces);
           }

           // now delete all spaces
           this.isInAfterTextChanged = false;
       }
    }

    @Override
    public void beforeTextChanged(final CharSequence s,
            final int start,
            final int count,
            final int after) {
        // nothing to do here
    }

    @Override
    public void onTextChanged(final CharSequence s,
            final int start,
            final int before,
            final int count) {
        // nothing to do here
    }
} 
```

它的代码和逻辑并不多，因此这种类型的 EditText 处理似乎不需要第三方库。

# solrj - 热门获取所有索引字段名称 EmbeddedSolrServer？

> ID：11572441
> 
> 赞同：0
> 
> 时间：2012-07-20T03:26:51.757
> 
> 标签：solrj

我想获取索引文件中的所有动态字段名称。有没有办法使用 solr java api 做到这一点？

谢谢， 拉蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:02:08.910

最后，我发现使用 solrj api，`searcher.getReader().getFieldNames()`会返回所有的索引字段。

# java - 使用 Java 在 Amazon S3 中下载存储桶的密钥

> ID：11572451
> 
> 赞同：0
> 
> 时间：2012-07-20T03:27:43.153
> 
> 标签：java, amazon-s3, amazon

```
public class downloads3 {
    private static String bucketName = "s3-upload-sdk-sample-akiaj6ufcgzvw7yukypa";
    **private static String key        = "__________________________________";**

    public static void main(String[] args) throws IOException {
        AmazonS3 s3Client = new AmazonS3Client(new PropertiesCredentials(
                downloads3.class.getResourceAsStream(
                        "AwsCredentials.properties")));
        try {
            System.out.println("Downloading an object");
            S3Object s3object = s3Client.getObject(new GetObjectRequest(
                    bucketName, key));
            System.out.println("Content-Type: "  + 
                    s3object.getObjectMetadata().getContentType());
            displayTextInputStream(s3object.getObjectContent());

           // Get a range of bytes from an object.

            GetObjectRequest rangeObjectRequest = new GetObjectRequest(
                    bucketName, key);
            rangeObjectRequest.setRange(0, 10);
            S3Object objectPortion = s3Client.getObject(rangeObjectRequest);

            System.out.println("Printing bytes retrieved.");
            displayTextInputStream(objectPortion.getObjectContent());

        } catch (AmazonServiceException ase) {
            System.out.println("Caught an AmazonServiceException, which" +
                    " means your request made it " +
                    "to Amazon S3, but was rejected with an error response" +
                    " for some reason.");
            System.out.println("Error Message:    " + ase.getMessage());
            System.out.println("HTTP Status Code: " + ase.getStatusCode());
            System.out.println("AWS Error Code:   " + ase.getErrorCode());
            System.out.println("Error Type:       " + ase.getErrorType());
            System.out.println("Request ID:       " + ase.getRequestId());
        } catch (AmazonClientException ace) {
            System.out.println("Caught an AmazonClientException, which means"+
                    " the client encountered " +
                    "an internal error while trying to " +
                    "communicate with S3, " +
                    "such as not being able to access the network.");
            System.out.println("Error Message: " + ace.getMessage());
        }
    }

    private static void displayTextInputStream(InputStream input)
    throws IOException {
        // Read one text line at a time and display.
        BufferedReader reader = new BufferedReader(new 
                InputStreamReader(input));
        while (true) {
            String line = reader.readLine();
            if (line == null) break;

            System.out.println("    " + line);
        }
        System.out.println();
    }
} 
```

我正在尝试使用 Java 从 Amazon S3 存储桶下载对象。但它似乎不起作用，并不断给我下面显示的错误。要输入的正确键是什么？访问密钥还是密钥？

```
Downloading an object
Caught an AmazonServiceException, which means your request made it to Amazon S3, but was rejected with an error response for some reason.
Error Message:    The specified key does not exist.
HTTP Status Code: 404
AWS Error Code:   NoSuchKey
Error Type:       Client
Request ID:       F9548FC068DB1646 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T22:18:56.293

正如其他人指出的那样，**密钥**是存储在 S3 上的对象（文件/文件夹等）的**唯一标识符**。

有关命名法和概念设计的更多信息，请参阅[http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#CoreConcepts](http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#CoreConcepts)。

**注意：**如果您尝试上传文件然后立即执行 getObjectRequest，有时（大多数情况下）会有延迟并会导致 404 NoSuchKey，因此您需要在设计中考虑这种情况。

“密钥”**不是**用于请求的凭据。如果是这种情况，您将获得***401 Unauthorized 。***404 表示已设置正确的身份验证凭证。

可以将密钥视为文件名（或文件夹名）。这可以是任意值，但大多数人更喜欢使用正斜杠来模拟文件系统结构（甚至 Amazon S3 控制台也这样做，并具有创建文件夹按钮等）

如果您有权访问控制台，请浏览您的存储桶并确保所有键前缀或“父目录”都存在，包括存储桶或“根文件夹”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:10:58.870

确保您在代码中使用的密钥与存储桶中的密钥相同。请记住，Amazon S3 密钥不区分大小写，这意味着您的密钥名称可能有一些不同的大小写，例如大写或小写。

检查并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T07:55:22.667

Amazon S3 存储桶中的“Key”是您要下载的文件名。

在你的情况下：

```
private static String key        = "__________________________________"; //will be file name/ file path to that file in Amazon Bucket. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T09:50:10.083

我有一个类似的问题。我的访问密钥、秘密、存储桶、端点和路径是正确的。

事实证明，对我来说问题是我在 S3 中指向的文件不存在，因此出现 404 错误。

# wordpress - 在 Wordpress 中启用前端评论编辑

> ID：11572456
> 
> 赞同：0
> 
> 时间：2012-07-20T03:28:15.643
> 
> 标签：wordpress

我正在处理一个非常规的 Wordpress 用例。

我创建了一个仅供注册用户使用的网站，在他们向帖子提交评论后，提交新评论的表单就会消失。它被一个显示他们评论内容的文本区域所取代（​​并且只有他们的评论 - 而不是其他人的评论）。

我无法弄清楚如何实际允许用户使用 textarea 字段编辑他们的评论。我花了几个小时搜索 Google、Wordpress 文档和 Stack Exchange，但运气不佳。

这是我最近的一次……

```
<form name="post" action="<?php echo get_option('siteurl'); ?>/wp-admin/comment.php?action=editcomment&c=<?php comment_ID() ?>" method="post" id="post">
    <textarea><?php comment_text() ?></textarea>
    <input class="btn" type="submit" name="submit" value="Update" />
</form> 
```

不幸的是，这只会将您重定向到后端编辑器以获取评论。我想完全在前端处理更新。

有人对从哪里开始有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:17:43.990

请查看这个已经创建的插件，因此在发表评论后，用户将能够在有限的时间内对其进行编辑。

现在不需要创建新东西，先尝试搜索插件 :) 。

插件链接 - [http://wordpress.org/extend/plugins/wp-ajax-edit-comments/](http://wordpress.org/extend/plugins/wp-ajax-edit-comments/)。

如果您正在创建新主题，则必须创建新功能，在按下编辑按钮后显示评论表单，并将所有当前评论值插入其中。

这个功能应该很有用 - [http://codex.wordpress.org/Function_Reference/edit_comment_link](http://codex.wordpress.org/Function_Reference/edit_comment_link)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T20:00:23.247

Check out this function [wp_update_comment](http://codex.wordpress.org/Function_Reference/wp_update_comment) you can start from that. I already did something like this on that past. The function is pretty self explanatory.

# iphone - 如何更改 UITableViewCell 选定视图的颜色？

> ID：11572458
> 
> 赞同：0
> 
> 时间：2012-07-20T03:28:46.753
> 
> 标签：iphone, ios, uitableview

选择单元格时如何更改灰色？

![在此处输入图像描述](../Images/87e1d3bcc9f02d0687e9cc39cc813959.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:32:59.850

当用户单击选定行时

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath    
{
     UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
     cell.contentView.backgroundColor = [UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T03:40:54.713

在自定义表格视图单元格（UITableViewCell 的子类）中将 's 颜色设置`selectedBackgroundView`为您想要的颜色：

```
UIView * selectedBackgroundView = [[UIView alloc] initWithFrame:self.frame];
[selectedBackgroundView setBackgroundColor:[UIColor redColor]]; // set color here
[self setSelectedBackgroundView:selectedBackgroundView];
[selectedBackgroundView release]; 
```

或者您可以在`-tableView:cellForRowAtIndexPath:`方法中配置它：

```
//...
[cell setSelectedBackgroundView:selectedBackgroundView];
//... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T03:36:53.477

如何在委托方法中更改背景颜色：

```
-（void)tableView:(UITableView *)tableView didSelectedRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T03:52:22.490

感谢@Kjuly 和@Selkie 的回答。我让它对你们俩都有效。

1.  首先设置`selectedBackgroundView`的背景颜色。
2.  改变`cell.textLabel.backgroundColor`和`cell.contentView.backgroundColor`在`didSelectedRowAtIndexPath`。

再次感谢你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T05:29:55.837

试试这个 ：

```
cell.selectionStyle = UITableViewCellSelectionStyleBlue; 
```

# c# - 获取倒数第二个键值.net C#

> ID：11572460
> 
> 赞同：1
> 
> 时间：2012-07-20T03:29:04.303
> 
> 标签：c#, .net

我需要能够从字符串中取出一个值。

基本上我总是有类似的东西：

"1_1,5,8215,886,1142,1,7,64"

我需要知道倒数第二个数字是什么，即 7。请注意，7 可以是 1 个或多个数字....

提前致谢！

C#，.net 3.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:34:06.233

```
string numbers = "1_1,5,8215,886,1142,1,7,64";
string[] items = numbers.Split(',');
string item = items[items.Length - 2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:36:33.903

```
string s = "1_1,5,8215,886,1142,1,7,64";
string[] arr = s.Split(',');

int myValue = Convert.ToInt32(arr[arr.Count - 2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:02:57.707

```
var shortenedString =s.Substring(0,s.LastIndexOf(','));
var intString = shortenedString.Substring(shortenedString.LastIndexIf(',', shortenedString.Length)); 
var number = Convert.ToInt32(intString); 
```

可以轻松更新以找到任何所需的数字，而无需拆分字符串。应该比拆分更有效率

# jquery - 帖子上的 Jquery 单选按钮

> ID：11572464
> 
> 赞同：2
> 
> 时间：2012-07-20T03:29:45.393
> 
> 标签：jquery, radio-button

嗨，我有一个表格，数据发布了一些奇怪的东西......

HTML：

```
<form>
   <input type="radio" name="datatype" value="1"/> <label>Datatype 1</label>
   <input type="radio" name="datatype" value="2"/> <label>Datatype 2</label>
   <button type="submit">Submit</button>
</form> 
```

表格 1：

```
$('form').submit(function(){
    var dt = $(this).serializeArray();
    $.ajax({
        url: 'post.php',
        data: dt,
        ..................
    })
}) 
```

表格 2：

```
 $('form').submit(function(){
    var opt = $(['input[name=datatype]').val();
    var dt = [{name:'dtype',value: opt }];

    $.ajax({
        url: 'post.php',
        data: dt,
        ..................
    })
}) 
```

在 FORM 1 数据类型中正确发布正确的值 1 或 2。在这部分中，我使用的是序列化数组。现在奇怪的是，如果您选择数据类型 2，它总是在 FORM 2 上发布值 1。出于某种原因，我需要使用 FORM 2...如果有人能提供帮助，我很高兴。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:31:00.930

你应该试试这个：

```
$('form').submit(function(){
    var opt = $('input[name=datatype]:checked').val();
    var dt = [{name:'dtype',value: opt }];

    $.ajax({
        url: 'post.php',
        data: dt,
        ..................
    })
}) 
```

* * *

### 为什么你的 FORM2 代码总是得到`1`

默认情况下，它根据 DOM 中的顺序获取值。与首先出现一样`radio`，`value="1"`因此它选择值`1`，尽管您选择了`radio`with `value="2"`。

* * *

### 更正您的代码

你的`$(['input[name=datatype]').val();`说法是错误的。它应该

`$('input[name=datatype]:checked').val();`这将获得选中`radio`按钮的值。

您的选择器也可能是：

```
$(':radio:checked[name=datatype]').val() 
```

## **[工作样本](http://jsfiddle.net/7DXeS/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:39:44.093

首先，方括号开头给出的错误是无处关闭的。

对于您的问题，那是因为 DOM 按名称顺序选择元素。由于值 1 首先出现，因此它被选中。因此，您必须添加一个过滤器以选择已选中的过滤器。

所以，更换，

```
 var opt = $(['input[name=datatype]').val(); 
```

和

```
 var opt = $('input[name=datatype]:checked').val(); 
```

# c - 如何解决错误 C2059：语法错误：Visual C++ 2010 Express 中的“__asm”

> ID：11572465
> 
> 赞同：0
> 
> 时间：2012-07-20T03:30:21.190
> 
> 标签：c, assembly, visual-c++-2010-express

包含内联 asm 代码的文件格式为 xyz.c，我使用的是 Visual C++ 2010 Express IDE。我收到标题中提到的错误。任何帮助表示赞赏！谢谢！

我的代码大致是这样的。

```
#include "xyz.h"

/*
; Multi-line comments
;
*/

__asm{
    Assembly code
}
 /*
; Multi-line comments
;
*/
.
.
.

__asm{
    Assembly code
}
 /*
; Multi-line comments
;
*/

__asm{
    Assembly code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:43:23.977

您不能将 asm 代码（或任何其他代码）直接放入全局范围。你必须把它放在一个函数中。

```
void f()
{
    __asm {
        Some code
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T15:57:53.680

这个例子对我有用：

```
#include <windows.h>
#include <iostream>

using namespace std;

int Add(int x, int y){
    asm(
          "addl %1, %0"
          : "=r"(x)
          : "m"(y), "0"(x)
    );
return x;
}

int main ()
{
    int x,y;

    cout<<"Enter first number\n";
    cin>>x; //enter first number
    cout<<"Enter second number\n";
    cin>>y; //enter second number

    cout<<Add(x,y)<<endl;

return 0; 
```

}

您可以看到不同的语法。但是 asm{} 或 __asm__{} 或任何带有 {} 的东西都不适用于 minGW，显然只能用于 Visual Studio。

# android - Android 2.3 SipDemo 注册失败

> ID：11572474
> 
> 赞同：0
> 
> 时间：2012-07-20T03:31:44.877
> 
> 标签：android, registration, sip, voip

我已尝试将 SipDemo 作为开发软件电话的起点，但尚未修改代码。我在 SipDemo 上输入的 sip 凭据正在其他软电话上工作，并仔细检查了它们是否正确。返回的错误代码为-4（无数据连接）。我正在使用带有 android 2.3 的 HTC wildfire S 作为我的测试手机。

当我四处搜索时，我发现有人遇到了同样的问题，他的解决方案是硬编码 tcp，因为手机无法使用 udp，因此显示“注册失败”消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:58:06.777

如果设备本身不支持 udp，那么除了对 IP 进行硬编码之外，你什么也做不了。已知某些 HTC 设备会出现故障。

[http://code.google.com/p/android/issues/detail?id=8407](http://code.google.com/p/android/issues/detail?id=8407)

# javascript - 检测 ajax 请求上的跨域重定向

> ID：11572477
> 
> 赞同：5
> 
> 时间：2012-07-20T03:32:21.143
> 
> 标签：javascript, ajax, jquery

我们将身份验证委托给另一个域（Window Identification 框架，联合身份验证设置）。现在，如果会话在 ajax 请求之前超时，服务器会将请求重定向到身份验证服务器。由于变成跨域调用，ajax请求被浏览器取消。有没有办法可以在 jquery/javascript 中检测到这一点？

我检查了在这种情况下设置为 0 的 xhr 对象的状态属性，但它是否是取消请求的良好指标？（我正在使用 jquery $.ajax 发出 ajax 请求）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T20:41:21.437

我也一直在研究这个问题，并且发现很少有证据表明你想要检测的东西是*完全*可以检测到的。但是，我找到了一种方法来检测它*可能*发生了。

以下是您的活动所发生的情况：

1.  JavaScript 代码启动请求。
2.  浏览器向服务器发出请求。
3.  服务器以重定向回答。
4.  浏览器确定新位置是​​不同的域。
5.  浏览器取消请求（以确保您的安全）。
6.  浏览器报告（不完全真实）该请求从未发送过。

在您的错误回调中，检查您的`XMLHttpRequest`对象的`readyState`字段。如果为 0（“UNSENT”），则表示您的 AJAX 请求从未发送过。

当然，*为什么*不发送它可能并不总是完全清楚。例如，用户可能只是简单地拔掉了他的网络电缆。但是，如果您愿意假设网络运行良好，那么当您看到 时，也可以合理地假设`readyState == 0`由于跨域问题而未发送请求。这意味着重定向发生了。

如果您正在使用 jQuery，那么您可以`jqXHR.readyState`改为检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:43:42.500

您可以查看此页面：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果请求失败，您可以在其中捕获一个错误参数。

**错误（jqXHR，textStatus，errorThrown）**

希望这会有所帮助。

# php - 未定义的索引和未定义的变量，但两者都已定义！（我认为....）

> ID：11572480
> 
> 赞同：2
> 
> 时间：2012-07-20T03:32:54.917
> 
> 标签：php, html, oop, pdo

我正在使用下面的 HTML 表单将文件传递给 PHP 进行处理。但是 PHP 说索引是未定义的。

同样，我在 config.php 中定义的变量显示为未定义。

我在这里想念什么？

**类.php**

```
<?php
require('config.php');
error_reporting(E_ALL);
/*
 * Classes required by the script
 * 
 */

class database extends PDO
{
    public $conURL;

    public function __construct($config) {
        $conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db'];
        try {
         parent::__construct($conURL, $config['user'], $config['pass']);
        } catch (PDOException $e) {
            $e->getMessage();
        }
    }       
}

class upload
{
    public $_FILES;

    public function uploadFile() {
        if ($_FILES['file']['size'] >= 2000000) {
           echo "File is too large!";
        }
        elseif (isset($_FILES['file'])) {
           $stmt = $this->prepare("INSERT INTO upload (name, type, size, content) VALUES (?, ?, ?, ?)");
           $stmt->execute(array($_FILES['file']['name'], $_FILES['file']['type'], $_FILES['file']['size'], $_FILES['file']['file']));
        }
    }
} 
```

**配置文件**

```
<?php
$config = array(
        'host' => 'localhost', // db host
        'user' => 'root', // db user
        'pass' => 'mypassword', //db pass
        'db' => 'files' // db name
); 
```

**上传.php**

```
<?php
error_reporting(E_ALL);
require('config.php');
require('classes.php');

$dbh = new database($config);
$upload = new upload();
$upload->uploadFile(); 
```

**HTML 表单**

```
<form name="uploaddb" action="upload.php" method="post" enctype="multipart/form-data">
<input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
<input type="file" name="file" />
<br/>
<input type="submit" name="submit" value="Upload!" />
</form> 
```

供参考，以下是错误：

> 注意：未定义的变量：第 28 行 /Applications/MAMP/htdocs/files/classes.php 中的配置
> 
> 注意：未定义的索引：第 34 行 /Applications/MAMP/htdocs/files/classes.php 中的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:41:02.873

我非常希望你实际上并没有处理这个：`<input type="hidden" name="MAX_FILE_SIZE" value="2000000" />`

另外，使用`global $config;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:50:50.633

我没有测试它，但这是我认为是错误的：

1.  不需要`config.php`类文件。您已经传递`$config`给`database`构造函数。
2.  不要`$_FILES`在你的类上声明，它是一个随处可用的超全局。

我还建议您将班级名称大写。

**更新**

抱歉，我现在不能把它们全部放在一起。这是我看到的更多问题：

1.  没有`file`钥匙`$_FILES['file']`。不确定您要查找的密钥。
2.  您不能`upload`像现在一样在类上使用 db 方法。不会`$this->prepare`导致错误吗？该类不扩展`PDO`。也许你应该在 db 类中有上传方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:25:35.330

```
public function __construct() {
    global $config;
    // Rest of the code here.
} 
```

不完全是一个很好的方法，但它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T05:12:34.260

您在 classes.php 文件中再次包含 config.php

第二件事是执行的最后一个参数，文件内容存储在 $_FILES 中没有文件索引

```
 $_FILE['file']['tmp_name']

 $stmt->execute(array($_FILES['file']['name']
 , $_FILES['file']['type'], $_FILES['file']['size'], $_FILES['file']['tmp_name'])); 
```

不要将文件存储在数据库中并且过大。

# objective-c - NSManagedObject 的 willSave 没有被无效对象调用

> ID：11572483
> 
> 赞同：4
> 
> 时间：2012-07-20T03:33:12.817
> 
> 标签：objective-c, ios, core-data, iphonecoredatarecipes

我有一个带有`updatedOn`属性的 NSManagedObject 类。我希望实现逻辑以在类的`willSave`方法中设置其值。当我尝试这样做时，我发现 willSave 从未在我的此类实例上被调用。

经过一番调查，我确定`willSave`没有为新创建的实例调用该方法，其中`updatedOn`没有初始化为任何值。因为这个属性没有被设置为可选的，所以验证失败，显然`willSave`只有当实例有效时才会调用该方法。

我的问题是：做这种事情有最佳实践吗？我是否需要将`updatedOn`属性设为可选才能解决此问题？或者我应该实现`awakeFromInsert`我的类的方法以在那里设置一个初始值，然后在`willSave`最终调用该方法时覆盖该值？还是有一些更简单的方法更有意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:46:13.910

该`willSave`文档提到了使用时间戳的方法，尽管提到了更改属性值和递归的一些复杂性，但它并没有特别警告这种使用。所以我想，基于这个事实，它可以被认为是放置这个功能的合理地方。

但是，文档确实提到了使用 `NSManagedObjectContextWillSaveNotification`来计算公共时间戳，因此也许这将是这项工作的替代位置。这将需要手动检查`insertedObjects`和`updatedObjects`集合`managedObjectContext`以定位需要时间戳的对象，但基于一些快速测试，它似乎在验证步骤之前被调用，因此您将有机会在此处设置所需的属性。

如果您选择坚持，`willSave`那么我想您有 3 个选择。

*   模型中具有指定默认值的必需属性。
*   在 awakeFromInsert 或其他合适的点上设置属性的必需属性。
*   可选属性。

我认为任何选项都是合理的选择，但我认为如果是我，我可能会选择，`NSManagedObjectContextWillSaveNotification`因为在 willSave 中设置属性值的复杂性。

# android - Android 模拟器不在视野范围内，我该如何移动它？

> ID：11572485
> 
> 赞同：71
> 
> 时间：2012-07-20T03:33:27.197
> 
> 标签：android, android-emulator

我在笔记本电脑上使用了一个额外的显示器，并将 Android 模拟器移到了那里。即使不再连接显示器，它似乎也能记住位置。

有没有办法重置窗口的位置，使其再次可见？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2015-03-29T08:46:51.507

您可以使用此方法在 windows 环境中移动任何不在屏幕上的窗口。

*   首先通过 Alt-Tab 或单击选择窗口
*   同时按 Alt 和 Space 键
*   按“M”或用鼠标选择它使用箭头键移动窗口
*   按 Enter 退出

这比编辑任何文件要容易得多。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-06-11T10:01:59.303

更准确地来自您的主目录

（在 Linux 上：`$HOME/` 在 Windows上`C:\Users\<your user>`：）进入

```
.android/avd/<image name> 
```

打开文件***emulator-user.ini***并将 window.x 和 window.y 设置为 0。

```
window.x = 0
window.y = 0 
```

如果您在 Linux 上看不到隐藏目录，请`.android`按`Ctrl+H`并从 Windows 中选择 View>Options>View (Tab) 并选择*“Show hidden files”*

* * *

***编辑：***

如果文件 emulator-user.ini 不存在，请关闭模拟器窗口，然后再次检查 avd 目录。这是因为 emulator-user.ini 是在第一次运行模拟器后生成的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-20T03:39:08.770

很容易。我打开了 avd 位置，文件 emulator-user.ini 包含该位置并且可以更改。

也许其他人需要它。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-08-14T19:45:18.447

Alt+Space 然后使用箭头键

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-29T07:51:04.873

首先转到您的**AVD MANAGER 部分**并单击它，然后

[![在此处输入图像描述](../Images/957d50a8c32763ce9f854ac455723cd9.png)](https://i.stack.imgur.com/MY5fh.png)

1.  右键单击您的虚拟手机并查看**“在磁盘上显示”**并单击它

2.  然后你会看到你的 AVD 驱动器并看到`emulator-user.ini`& 然后`open`它。

3.  设定值**`window.x = 0 window.y = 0`**

4.  **关闭并重新启动您的项目和 AVD 也**。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-28T14:41:37.437

Alt + Space 工作得很好。emulator-user.ini 答案对我不起作用。

谢谢。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-23T08:35:33.257

对于 Windows 10 用户，只需按

```
ctrl + alt + up_arrow_key 
```

边注：

```
ctrl + alt + left_arrow_key
ctrl + alt + right_arrow_key
ctrl + alt + down_arrow_key 
```

这将旋转你的屏幕

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-06T05:37:27.803

> 对于 Windows 操作系统控制面板 -> 程序 -> 打开或关闭窗口功能 -> 检查 Telnet 客户端和 Telnet 服务器选项 -> 确定

现在以管理员身份打开您的 cmd 使用 cd\ 进入您的“c”驱动器路径

> C:\用户\Harin>cd\
> 
> C:\telnet 本地主机 5554

现在它打开了新窗口写

> 窗口比例 0.3

这里 5554 是您的模拟器屏幕编号，0.3 是您的屏幕尺寸，您可以根据需要更改，例如 0.2 或 0.4 等

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-25T22:21:13.920

如果您看到它旁边的工具栏但没有看到模拟器，请单击缩放按钮，它将出现。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-08T00:14:57.673

在我的情况下，与移动模拟器窗口相关的答案都不起作用。

为了使它与“比例和布局”不是 100% 一起工作（就像我的情况一样），我必须这样[做](https://stackoverflow.com/a/58380843/2469583)

也这样做了（不确定是否有必要，但以防有人需要）：

我必须右键单击桌面，然后“显示属性”，然后“高级缩放设置”，然后将缩放设置为 100%（我将其设置为 250%），然后打开模拟器并将其调整为尽可能小并放它在我屏幕的左上角。然后“关闭自定义缩放并退出”，然后我可以看到并调整我的模拟器窗口。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-30T20:09:23.817

如果您使用的是 Mac，并且无法通过正常拖动模拟器来移动模拟器，请执行此操作。

1.  `control`使用+显示任务控制`arrow up`。
2.  将模拟器移动到新窗口/监视器。
3.  点击模拟器或`control`+`arrow down`

完毕！

# http - 从 Flask 中的 POST 请求中获取原始数据

> ID：11572488
> 
> 赞同：6
> 
> 时间：2012-07-20T03:33:45.673
> 
> 标签：http, post, request, flask

如何从 Flask 中的 POST 请求中获取原始数据？

我正在从 web.py 转移到 Flask 并且有一些生产中的客户端不幸地使用 content-type header `application/x-www-form-urlencoded`，因此更改请求的标头值不是一种选择（除非它在服务器上被覆盖）。

我不能使用：

```
data = request.form.keys()[0] 
```

因为偶尔该`'&'`字符会出现在我的数据中并尝试循环通过 form.keys 添加`'&'`似乎由于某种原因损坏了数据。

我目前正在使用[这篇文章](https://stackoverflow.com/questions/10999990/python-flask-how-to-get-whole-raw-post-body)中提出的解决方案，但我不太确定这是否有任何性能问题。

我正在寻找以下三件事之一：

1.  确认该`WGSICopyBody`方法不会有任何不利的性能问题
2.  `data = request.form.keys()[0]`能够通过遍历键并正确恢复`'&'`数据来使此 ( ) 方法工作
3.  问题的另一种解决方案，可能是通过子类化`Request`类？

# sql-server-2008 - 这个插入语句可以插入重复项吗？

> ID：11572493
> 
> 赞同：0
> 
> 时间：2012-07-20T03:34:11.943
> 
> 标签：sql-server-2008, duplicates

```
insert items (ean)
select ean
from books
where ean not in (select ean from mrs..items) 
```

假设书中有重复。sql会先确定要插入哪些记录，然后再继续插入重复；还是会通过检查来防止自己插入重复项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:37:20.767

这应该工作

```
insert into items (ean) 
select Distinct ean 
from books 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:37:27.657

它会创建重复项，但您可以通过在 select 上指定 distinct 来防止这种情况发生，如下所示。

```
insert into items (ean)
select distinct ean
from books
where ean not in (select ean from mrs..items) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:02:05.933

你可以试试下面的代码

```
insert into items (ean) 
select TOP 1 WITH TIES ean 
from books 
where ean not in (select ean from mrs..items) 
ORDER BY ROW_NUMBER() OVER(PARTITION BY ean ORDER BY <criteria>) 
```

您只需要指定条件，即应如何选择重复记录中的一条记录进行插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:56:36.590

我在以前的答案中错过的是 group by 的原因。

是的，您的语句可以防止重复，但前提是您尝试插入的选择中没有重复。插入是原子的，因此检查不在 (...) 中只执行一次。

在集合中而不是在记录中思考。然后你可以不用'我已经测试过它并且它有效......'评论。

# javascript - 如何使用 Javascript 逐行获取 div 内容？

> ID：11572506
> 
> 赞同：2
> 
> 时间：2012-07-20T03:36:01.063
> 
> 标签：javascript, html

我需要`<div>`逐行处理内容。一个*缩短*的部分看起来像这样：

```
<div id='aoeu'>
    Ammonium NH%4^+ <br />
    Copper(I) Cu^+ <br />
    Gold(I) Au^+ <br />
    Rubidium Rb^+ <br />
    Acetone CH%3COCH%3 <br />
    Glycerin C%3H%5(OH)%3 <br />
</div> 
```

我需要使用 Javascript 单独处理每一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:43:10.157

假设“行”由换行符分隔，您可以执行以下操作：

```
​var el = document.get​ElementById("aoeu"),
    content = el.innerHTML.replace(/  |^\s+|\s+$/g,""),
    lines = content.split("\n"); 
```

即，获取`innerHTML`元素的 ，删除前导和尾随空格，然后在换行符处拆分。

演示：http: [//jsfiddle.net/RG2WT/](http://jsfiddle.net/RG2WT/)

编辑：现在您已经添加了`<br>`元素（尽管我会删除尾随的元素）：

```
var el = document.getElementById("aoeu"),
    content = el.innerHTML.replace(/^\s+|\s*(<br *\/?>)?\s*$/g,""),
    lines = content.split(/\s*<br ?\/?>\s*/); 
```

也就是说，获取`innerHTML`，删除前导和尾随空格以及任何尾随`<br>`元素，然后拆分每个剩余`<br>`元素以及它周围的空格。

演示：http: [//jsfiddle.net/RG2WT/3/](http://jsfiddle.net/RG2WT/3/)

无论哪种方式`lines`都将是一个数组，每个元素都是您的行之一。无论哪种方式，我都会删除前导和尾随空格，例如，第一项将`"Ammonium NH%4^+"`不是`" Ammonium NH%4^+ "`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:41:25.463

我将首先获取 innerHTML 并分配给一个 var。获取 var 并在 br 上拆分以获得一个数组，您可以使用它来做任何您需要的事情。

```
var contents = document.getElementById("aoeu").innerHTML;
var lines = contents.split("<br />");
// Do whatever you want with lines 
```

# ruby-on-rails - 在模型关联中，parent.childs.build 与 parent.build_child 之间有什么区别吗？

> ID：11572507
> 
> 赞同：0
> 
> 时间：2012-07-20T03:36:11.877
> 
> 标签：ruby-on-rails, associations

就使用而言，我已经使用过`parent.childs.build`并且`parent.build_child`可以互换。可以互换使用这两种方法吗？

如果这两种方法有区别，每种方法分别用在什么情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:44:45.993

通常，`build_child`用于一种`has_one`情况，并`children.build`用于`has_many`.

不过这里并没有真正的区别——他们每个人都会构建一个新对象（但不保存它），并将新对象的 parent_id 设置为父对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:45:54.103

据我所知，它们指的是相同的方法。为了方便起见，Rails 只是将它放在两个位置。

# wix - 使用刻录/WiX 3.6 时如何进行重大升级

> ID：11572508
> 
> 赞同：15
> 
> 时间：2012-07-20T03:36:30.690
> 
> 标签：wix, wix3.6

我有一个这样的 MSI 设置：

```
<Product Id="*" ... UpgradeCode="4207FF3B-5E0D-4311-9DFC-B41AA8DE2965" />
    <MajorUpgrade DowngradeErrorMessage="Can't downgrade" /> 
```

它按预期工作：

1.  安装产品
2.  重新编译（有效生成新的Id）
3.  启动新的 msi 文件会显示更改视图，我可以修复或卸载产品。

好的。但随之而来的是燃烧。

我已经创建了最简单的捆绑包。我使用标准的引导程序并只添加一个 MsiPackage：

```
<MsiPackage SourceFile="$(var.Setup.TargetPath)" /> 
```

问题是每次重新编译后，**我都可以在已经安装的产品旁边再次安装该产品**，而无需更改任何东西！这会导致重复的 ARP 条目！

如果我不重新编译并运行捆绑 exe 文件两次，我将按预期获得修改设置屏幕。我可以做些什么来获得与仅使用 MSI 时相同的刻录行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T05:38:59.473

增加捆绑包版本号，Burn 将升级以前的版本并将其删除。

# android - Android - 无法在物理设备上安装 apk 但在模拟器上成功

> ID：11572513
> 
> 赞同：0
> 
> 时间：2012-07-20T03:37:11.827
> 
> 标签：android, eclipse, android-install-apk

我已尝试多次使用 eclipse 在物理设备上安装 apk，但我一直收到此错误

```
[2012-07-20 11:26:23 - SRD-Android] Failed to install SRD-Android.apk on device '1000fa6e2581!
[2012-07-20 11:26:23 - SRD-Android] (null)
[2012-07-20 11:26:23 - SRD-Android] Launch canceled! 
```

它在模拟器上工作得很好。这是因为 android 应用程序是针对 Google API [Android 2.2] 构建的吗？但物理设备本身也是 Android 2.2。

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.srd.application"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"></uses-permission>

   <application
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light"
 >
     <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".LoginActivity" >
    </activity>
    <activity android:name=".UserHome">
                           <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
    <activity android:name=".ElderHome"></activity>
    <activity android:name=".AddEventRel"></activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:28:04.587

在 Manifest.xml 中添加以下内容

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

然后..它运作良好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:41:43.667

尝试禁用调试器（设置 > 应用程序 > 开发 > USB 调试），然后重新启用它，看看是否有帮助。

# html - 使用 Rails 设置 HTML 元素的类？

> ID：11572514
> 
> 赞同：1
> 
> 时间：2012-07-20T03:37:11.627
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap, navbar

我有一个安装了 Twitter Bootstrap 的 Rails 应用程序。Bootstrap 将每个导航栏链接封装在一个 HTML 列表元素中，如下所示：

```
<ul class="nav">
    <li><a href="#home">Home</a></li>
    <li><a href="#products">Products</a></li>
    <li><a href="#settings">Settings</a></li>
</ul> 
```

当链接是当前页面时，Bootstrap 允许您通过将列表元素的类（而不是链接本身）设置为“活动”来突出显示它，如下所示：

```
 <li class="active"><a href="#products">Products</a></li> 
```

我的问题是：**如何使用 Rails 以编程方式将列表元素的类设置为“活动”（如果它是当前页面）？**

我知道如何为链接完成。例子：

```
<%= link_to "Products", products_path, :class => "active" if current_page?(:controller => "products") %> 
```

但我不知道如何为父列表元素完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:41:25.897

使用[`content_tag`助手](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)：

```
<%= content_tag :li, :class => 'active' do %>
  List item contents
<% end %> 
```

# php - PHP - 调整图像大小

> ID：11572520
> 
> 赞同：-1
> 
> 时间：2012-07-20T03:38:10.987
> 
> 标签：php, image, image-processing

所述代码是从 URL 复制图像，请让我知道如何将图像重新调整为 250x250。

所需尺寸：

宽度=250 高度=250

```
<?php
file_put_contents('tmp.jpg', file_get_contents('http://static.adzerk.net/Advertisers/3603.jpg'));
?> 
```

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:44:15.023

一个教程，了解如何使用类来调整大小、缩放和保存图像...@ [http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

# c# - 无法创建具有类型的抽象类或接口接口的实例

> ID：11572521
> 
> 赞同：0
> 
> 时间：2012-07-20T03:38:23.557
> 
> 标签：c#, interface

我知道这个错误是什么，我的问题略有不同。

这是这些大脑褪色的时刻之一。

我一直在阅读这篇关于存储库和工作单元模式的有趣文章：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

我正在玩这个代码，现在我正在尝试调整它，以便我可以将 IoC 与 DI 一起使用。

现在，这就是我刚刚打到精神空白的地方。

我正在更改我的所有类以使用接口等。因此，鉴于此代码片段：

```
public class UnitOfWork : IDisposable
    {
        private SchoolContext context = new SchoolContext();
        private GenericRepository<Department> departmentRepository;
        private GenericRepository<Course> courseRepository;

        public GenericRepository<Department> DepartmentRepository
        {
            get
            {

                if (this.departmentRepository == null)
                {
                    this.departmentRepository = new GenericRepository<Department>(context);
                }
                return departmentRepository;
            }
        }
    }
} 
```

如何编辑此行：

```
this.departmentRepository = new GenericRepository<Department>(context); 
```

所以我不必引用实际的类，这样我就可以确保它被解耦并避免产生语法错误：

```
Cannot create an instance of the abstract class or interface interface with type 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:43:57.390

简而言之，您应该将该字段声明为接口类型。该接口的名称可能类似于`IGenericRepository<T>`. 然后该类`GenericRepository<T>`应该实现该接口。然后你用你的 IoC 框架注册这个类，它基本上告诉框架，“当我请求这个接口的一个实例时，给我一个那个类的实例”。然后你做这样的事情：

```
this.departmentRepository = InversionOfControl.Resolve<IGenericRepository<Department>>(); 
```

（resolve 方法有一个类似的签名`public T Resolve<T>()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:48:31.110

[http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle](http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle)

似乎 GenericRepository 是无法实例化的抽象类。

[http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx)

您需要 GenericRepository 的派生类，即

```
DepartmentRepository : GenericRepository<Department> 
```

# php - 如何限制从while循环中获取

> ID：11572524
> 
> 赞同：-3
> 
> 时间：2012-07-20T03:38:39.380
> 
> 标签：php, mysql, database

数据库mysql中的示例表，

```
id alphabet
1  A
2  B
3  C
4  D 
```

我的项目要求我从数据库中获取 26 个数组。有没有办法将我的输出限制为1而不限制它，因为我想显示例如：A，然后按下一个按钮，如果它符合要求，它将显示B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:47:19.847

PHP 在服务器上运行，它不能直接响应用户点击。每次用户单击页面链接时，脚本都会重新开始。

脚本第一次运行时，您可以运行查询并将所有结果保存在会话变量中（`array_data`在下面的示例中调用）。然后，您可以使用一个参数将按钮链接到脚本，该参数告诉它要显示哪个行号。就像是：

```
if(!isset($_SESSION['array_data'])) {
  $_SESSION['array_data'] = array();
  <execute query>
  while ($row = <fetch row>) $_SESSION['array_data'][] = $row;
}
$cur_row = isset($_REQUEST['rowid']) ? $_REQUEST['rowid'] : 0;
printf("Data is: %s<BR/>", htmlentities($_SESSION['array_data'][$cur_row]));
printf("<A HREF='scriptname.php?rowid=%d'>Next row</A>", $cur_row+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:59:29.143

我带着你的问题在这里暗中拍摄。使用 LIMIT 和 OFFSET 可以帮助您检索单行。

```
SELECT id, alphabet FROM table LIMIT 1 OFFSET 0 
```

LIMIT 1 将始终为您提供一条记录。OFFSET 表示要跳过多少行。

[限制和偏移](http://www.postgresql.org/docs/9.2/static/queries-limit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:42:41.513

您可以`LIMIT`在 SQL 中使用来限制获得的结果数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T06:28:05.790

或者您可以简单地使用 FOR(){} 循环。前任：

```
for($i; $i < 1; $i++){

$DoSql = mysql_query("SELECT * FROM <database> ORDER BY ABS(<datarow>) asc");
$FetchSql = mysql_fetch_array($DoSql);

---Your code goes Here---

} 
```

# png - Compressonator 使用 alpha 通道将 dds 转换为 png

> ID：11572530
> 
> 赞同：0
> 
> 时间：2012-07-20T03:39:09.970
> 
> 标签：png, alpha, directdraw, dds-format

使用 alpha 通道将 dds 转换为 png 的命令是什么？

如果我使用这个命令：

```
TheCompressonator.exe -convert -r .\dds .\out -format .png 
```

那么输出 png 不使用 alpha 通道。如果我打开`TheCompressonator.exe`，选择Edit-->create alpha channel，然后选择file to save original to png，png文件包含alpha通道，但是我有很多dds文件需要转换。

# c# - 我可以让我的类在运行时从另一个类继承吗？

> ID：11572531
> 
> 赞同：4
> 
> 时间：2012-07-20T03:39:38.053
> 
> 标签：c#, inheritance, azure-table-storage

我有一个类（人），它是我的 MVVM 应用程序中的模型。我想将此类保存到 Azure 表存储。若要保存到 Azure 表存储，您需要从名为 TableServiceEntity 的类派生。我宁愿不要用用于存储的属性来混淆我的好类（考虑分离关注点似乎是个好主意）。

我可以以某种方式让我的类在运行时从 TableServiceEntity 派生，在接收对象作为参数并将其保存到存储的方法中吗？这将使我的班级保持清洁存储属性，但仍然让我将其保存到表存储。

谢谢！安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:44:05.740

您不能在运行时更改继承。

您可以做的是使用诸如[AutoMapper](http://automapper.codeplex.com/)之类的工具从您的域对象映射到从 TableServiceEntity 派生的数据存储对象。

Entity Framework Code First 或 NHibernate 等 O/R 映射器的好处之一是它们不会强迫您从特殊的基类派生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:43:13.400

不幸的是，不：C# 中的继承是一个编译时概念，因此您的对象必须在编译时从其基类继承。

至于“使用存储属性使代码混乱”，部分类可以提供很大帮助：将与存储相关的属性放在单独的文件中，您的代码将再次看起来很干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T03:43:50.530

听起来只创建一个`PersonTableServiceEntity`类和一个静态方法来在您的`Person`实体和实体之间进行转换会更简单`PersonTableServiceEntity`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T03:44:45.990

简短的回答——不。这一切都是在 C# 的编译时完成的。对不起

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T03:50:33.507

完全不知道这是否可能，但我觉得这不太可能。只需创建一个 PersonStorage 类以使用单个 Person 实例继承 TableServiceEntity 吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T03:55:42.770

您可以使用 DynamicObject 或[Castle Proxy](http://docs.castleproject.org/Default.aspx?Page=DynamicProxy&NS=Tools&AspxAutoDetectCookieSupport=1)模拟类似的东西。您可以使用其中一种技术创建一个 AzureEntity，并生成一个与 Person 具有所有相同属性但它继承自 TableServiceEntity 的对象，而不是将 Person 保存到 azure。

TableServiceEntity 的事情，只是为了便于使用......你可以得到存储客户端库源代码（据我所知，它是在 git hub 或 codeplex 周围的某个地方发布的），并修改它以使其工作而不使用TableServiceEntity 的事情。

**更新评论：** 在您的情况下，您可以同时使用...不同之处在于，在 expando 对象中，您通过扩展定义对象，而动态对象由理解定义。动态对象更强大（也更复杂），但在这种情况下您不需要任何这些。顺便说一句：Castle Proxy 与动态对象方法非常相似，但它在运行时会生成大量代码，因此它可能会获得比动态对象或 expando 对象更好的性能。

**进一步更新：** 您可以让 expando 对象实现这样的[接口](http://weblogs.asp.net/britchie/archive/2010/08/03/dynamicduck-duck-typing-in-a-dynamic-world.aspx)。

# html - 如何验证 Selenium IDE 中的属性中是否存在特定文本

> ID：11572547
> 
> 赞同：10
> 
> 时间：2012-07-20T03:41:59.110
> 
> 标签：html, testing, selenium

我想验证 href 属性中的 URL 是否包含某些文本。例如，如果 URL 包含“foo”，则测试应该继续。如果它不包含“foo”，则测试应该停止。我不清楚我是否应该使用 assertAttribute 或 assertText 或其他东西。我也有点不清楚确切的语法是什么。

```
<a href="www.example.com/foo">Link 1</a>
<a href="www.example.com/questions">Link 2</a> 
```

对此的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T10:51:13.767

您可以使用或[`assertElementPresent`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeElementPresent)，这取决于您的确切用法。[`assertText`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeText)[`assertAttribute`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeAttribute)

如果你想断言`<a href="www.example.com/foo">`页面某处有一个元素：

```
assertElementPresent | css=a[href*=foo] 
```

如果要断言`<a href="www.example.com/foo">`元素的链接文本是`Link 1`：

```
assertText | css=a[href*=foo] | Link 1 
```

如果您想断言带有链接文本“Link 1”的元素包含`foo`在其`href`：

```
assertAttribute | link=Link 1@href | *foo* 
```

欢迎任何问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:09:10.503

我不确定 selenium IDE，但您可以查看以下代码

```
String url = selenium.getEval("this.browserbot.findElement('link=Link 1').href");
if (url .indexOf("foo") != -1) {
 System.out.println("Text Present!");
 }
 else {
 System.out.println("Text Not Present");
 } 
```

# linux - 当我在启用 ufw 时阻止特定用户使用 iptables 访问 Internet 时出现问题

> ID：11572549
> 
> 赞同：1
> 
> 时间：2012-07-20T03:42:11.063
> 
> 标签：linux, ubuntu, firewall, iptables

我已经启用 ufw 拒绝一些正在运行的流量，只允许打开端口 80,22。

此外，今天我需要使用 iptables 规则阻止特定用户访问 Internet，如下所示：

```
$ iptables -A OUTPUT -m owner --uid-owner winguse -j REJECT 
```

但它不起作用！

如果我禁用 ufw，并执行相同的操作，它确实有效。如果我启用 ufw，它就不会再工作了。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:11:39.910

在询问了 ufw 手册的作者 Jamie Strandboge 之后，我找到了答案。

只需编辑/etc/ufw/before.rules，在“#End required lines”之后添加以下行：

```
-A ufw-before-output -m owner --uid-owner winguse -j REJECT --reject-with icmp-port-unreachable 
```

然后，使用重新加载防火墙

```
$ sudo ufw reload 
```

规则将生效。

# sql-server - 按促销状态排序（ startDate 我有一个如下表： ID Title StartDate EndDate 1 PromoA 2012-06-01 2012-08-01 2 PromoB 2011-01-01 2011-02-01 3 PromoC 2012-09-01 2012-10-01 4 Pr 问问题 问问题 2012-07-20T03:42:46.457 157 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个如下表： ID Title StartDate EndDate 1 PromoA 2012-06-01 2012-08-01 2 PromoB 2011-01-01 2011-02-01 3 PromoC 2012-09-01 2012-10-01 4 PromoD 2012-07-01 2012-09-01 因此，有 4 个带有状态的促销：1-OnGoing; 2-OutOfDate; 3-Waiting; 4-OnGoing 如何按状态对它们进行排序？ 您可以使用 CASE 语句对每一行进行分类，如下所示（请注意，这假定StartDate <= EndDate对于所有行： ;WITH cte AS ( SELECT ID, Title, StartDate, EndDate, CASE WHEN (EndDate < CURRENT_TIMESTAMP) THEN 'OutOfDate' WHEN (StartDate > CURRENT_TIMESTAMP) THEN 'Waiting' ELSE 'Ongoing' END AS [Status] FROM Promotion ) SELECT ID, Title, StartDate, EndDate FROM cte ORDER BY [Status] sql-server 4 2 回答 2 This answer is useful 2 DECLARE @Table TABLE ( id int, status varchar(20) ) insert @table SELECT id, CASE WHEN (EndDate < getdate()) THEN 'OutOfDate' WHEN (StartDate > getdate()) THEN 'Waiting' ELSE 'Ongoing' END AS Status FROM Promotion SELECT * FROM Promotion p inner join @Table t on t.id = p.id ORDER BY Status 于 2012-07-20T06:29:56.050 回答 This answer is useful 1 您可以使用 CASE 语句对每一行进行分类，如下所示（请注意，这假定StartDate <= EndDate对于所有行： ;WITH cte AS ( SELECT ID, Title, StartDate, EndDate, CASE WHEN (EndDate < CURRENT_TIMESTAMP) THEN 'OutOfDate' WHEN (StartDate > CURRENT_TIMESTAMP) THEN 'Waiting' ELSE 'Ongoing' END AS [Status] FROM Promotion ) SELECT ID, Title, StartDate, EndDate FROM cte ORDER BY [Status] 于 2012-07-20T05:06:59.600 回答 Related 4 c# - how to add sqldatasource to gridview which is having data without override? 3 javascript - 未捕获的类型错误：无法读取未定义的属性“名称” 1 varnish - Varnish 阻止外部源的 esi 访问 0 facebook - Facebook 测试用户 API：禁用安全浏览 2 .net - 独立连续执行多个函数c# 1 ssl - 智能卡如何用于客户端证书身份验证？ 2 extjs - How to insert a toolbar to the panel that I have been created? Extjs 2 javascript - Modifying query string before submitting the form 1 rest - struts2-rest plugin..making both struts actions + rest actions work together but. giving java.lang.reflect.InvocationTargetException 2 meteor - Meteor template.rendered and this.data access Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11572555
> 
> 赞同：1
> 
> 时间：
> 
> 标签：sql-server

我有一个如下表：

```
ID    Title    StartDate    EndDate
1     PromoA   2012-06-01   2012-08-01
2     PromoB   2011-01-01   2011-02-01
3     PromoC   2012-09-01   2012-10-01
4     PromoD   2012-07-01   2012-09-01 
```

因此，有 4 个带有状态的促销：`1-OnGoing; 2-OutOfDate; 3-Waiting; 4-OnGoing`

如何按状态对它们进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:29:56.050

```
DECLARE @Table TABLE     
(    
     id int,  
     status varchar(20)  
)   

insert @table  
    SELECT  id,  
        CASE WHEN (EndDate < getdate()) THEN 'OutOfDate'  
             WHEN (StartDate > getdate()) THEN 'Waiting'  
             ELSE 'Ongoing'  
        END AS Status  
    FROM Promotion

SELECT *  
FROM Promotion p  
inner join @Table t on t.id = p.id  
ORDER BY Status 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:06:59.600

您可以使用 CASE 语句对每一行进行分类，如下所示（请注意，这假定`StartDate <= EndDate`对于所有行：

```
;WITH cte AS
(
    SELECT ID, Title, StartDate, EndDate, 
        CASE WHEN (EndDate < CURRENT_TIMESTAMP) THEN 'OutOfDate' 
             WHEN (StartDate > CURRENT_TIMESTAMP) THEN 'Waiting' 
             ELSE 'Ongoing'
        END AS [Status]
    FROM Promotion
)
SELECT ID, Title, StartDate, EndDate
FROM cte
ORDER BY [Status] 
```

# c# - 正确使用 Task.Delay 来延迟按键

> ID：11572559
> 
> 赞同：0
> 
> 时间：2012-07-20T03:43:10.500
> 
> 标签：c#, .net, asynchronous, delay, task

下面的代码适用于我正在做的事情，但是我很好奇我对 Task.Delay() 的使用是否不是最佳实践。我需要延迟以确保 GameHandler 有足够的时间来处理我的按键操作。但是，我想知道是否有更好的方法来做这样的事情。

```
async public Task<bool> CloseMenusAsync(CancellationToken token)
            {
                while (GameHandler.Menu.IsOpen && !token.IsCancellationRequested)
                {
                    if (GameHandler.Menu.IsOpen && GameHandler.Menu.DialogText.Question == "Open")
                    {
                        GameHandler.SendKeyPress(KeyCode.DownArrow);
                        await Task.Delay(150);
                        GameHandler.SendKeyPress(KeyCode.EnterKey);
                        await Task.Delay(150);
                    }
                    if (GameHandler.Menu.IsOpen && GameHandler.Menu.Selection == "Trade")
                    {
                        GameHandler.SendKeyPress(KeyCode.EscapeKey);
                        await Task.Delay(150);
                        GameHandler.SendKeyPress(KeyCode.EnterKey);
                        await Task.Delay(150);
                    }
                    GameHandler.SendKeyPress(KeyCode.EscapeKey);
                    await Task.Delay(150);
                }

                return !GameHandler.Menu.IsOpen;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:55:40.153

Since you're on the sending side, it's fine.

The other option is to use [Rx](http://msdn.microsoft.com/en-us/data/gg577609.aspx), which has a higher learning curve.

# version-control - Mercurial 在 Cygwin 上找不到用户名配置

> ID：11572565
> 
> 赞同：0
> 
> 时间：2012-07-20T03:43:45.117
> 
> 标签：version-control, windows-7, mercurial, cygwin

`abort: no username supplied (see "hg help config")`尝试`hg commit`在 Cygwin上使用时出现错误。我已经在我的 /users/username 目录中正确设置了 Mercurial.ini 文件（我在 Windows 7 上）。

使用`hg showconfig --debug`返回以下内容：

```
read config from: /usr/etc/mercurial/hgrc
read config from: /etc/mercurial/hgrc
read config from: /home/Mark/.hgrc 
```

因此，我假设因为我使用的是 Cygwin，它正在检查 Mercurial 配置文件，就好像我使用的是 Linux 一样。有没有其他人在使用 Mercurial 和 Cygwin 时遇到过这个问题？

如何让 Mercurial 签入配置文件的正确文件夹（再次在 Windows 7 上使用 Cygwin）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:47:55.710

作为一种解决方法，您可以将 HGUSER 环境变量设置为您想要的用户名。

但更好的解决方案是在`%include`Hg 正在读取的 hgrc 文件之一中添加一行，以强制它包含您创建的文件 - 例如：

```
%include /users/username/.hgrc 
```

你甚至可以让 Cygwin 使用 $USER 或类似的东西，以避免硬编码的用户名。

有关更多信息，请参见[hgrc 手册页](http://www.selenic.com/mercurial/hgrc.5.html)。

# jquery - 用于动态 id 的 JQuery 选择器

> ID：11572569
> 
> 赞同：6
> 
> 时间：2012-07-20T03:43:53.947
> 
> 标签：jquery

我正在尝试更改 Jquery 中的图像源

```
<a href="" class="wanted" id="'.$status_id[$num].'"><img src="/images/wanted.png"> 
```

通过一个 JQuery 选择器：

```
$(".wanted "+ id).attr("src", '/images/wanted_.png'); 
```

where`id`在 javascript 中定义为 php 变量`$status_id[$num]`。我第一次尝试使用`$(this)`无济于事。任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T04:28:34.290

当您访问时`$(".wanted"+id)`，您实际上是在尝试访问类名 = Want+id 的元素。这是因为“。” 在“想要”之前。此外，您似乎正在`<a>`直接访问标签并设置它的`src`属性。您需要访问`<img>`标签。您可以尝试的是：

```
var x=document.getElementById(id);
$(x).find("img")[0].setAttribute("src","/images/wanted_.png"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T03:51:13.707

HTML 元素的 ID 在整个页面中应该是唯一的。

你可以试试

```
//I assume id variable is already assigned the id of the element e.g var id = "<?php echo $status_id[$num] ?>";

$("#"+ id).attr("src", '/images/wanted_.png'); 
```

如果您真的想选择一个具有给定 id 和所需类的元素，请尝试以下操作：

```
$("#"+ id + ".wanted ").attr("src", '/images/wanted_.png'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:50:45.610

在创建 JS 时您可以访问该 ID，或者您没有。如果你不这样做，那么你将不得不找到另一种方法来定位该项目，例如：`$('.wanted')`

如果你这样做，那么把它放在：`$('#<?php echo $status_id[$num]; ?>')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T04:30:28.243

给它另一个类`imgToChange`，然后使用`$(".imgToChange")`

# android - 错误：停止 ADB 服务器失败（代码 -1）{安装 API - Android SDK}

> ID：11572577
> 
> 赞同：14
> 
> 时间：2012-07-20T03:44:35.430
> 
> 标签：android, sdk

我正在最近安装的 Android SDK 上下载和安装最新的 Android API 和系统映像。

在下载 API 时，我在安装过程中很快遇到了一个错误。

```
Parse XML:    https://dl-ssl.google.com/android/repository/sys-img.xml
  Found Intel x86 Atom System Image, Android API 15, revision 1
Done loading packages.
Preparing to install archives
Downloading Android SDK Platform-tools, revision 13
Installing Android SDK Platform-tools, revision 13
Stopping ADB server failed (code -1).
Installed Android SDK Platform-tools, revision 13 
```

错误是这个：

**停止 ADB 服务器失败（代码 -1）。**

我很好奇，这会影响安装的结果吗？它说它安装了，它继续到下一个 API，所以这有影响吗？

我认为发生这种情况是因为我现在正在通过 Tethered Android 移动设备下载 API，这确实依赖于 ADB 来连接到计算机。因此，如果要停止，它将取消下载，无论如何都无法进行安装。

所以真的，主要问题是这是否会影响安装，在安装和下载 API 时无法停止 ADB。

如果这会影响安装，我难道不能按照每个 API 列出的链接手动下载并手动安装吗？考虑到我在移动设备上，我将每一点都视为黄金。尽管我有一个无限数据计划，但我不想成为被限制在前 5% 的人之一，这实际上发生在我的旧 AT&T 计划中。

因此，任何能够做到这一点的方式，并且在不停止亚行的情况下做到这一点，都会很棒。只是需要你的想法伙计们。

谢谢你的时间，我很感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-26T14:33:39.500

根据[http://sitepoint.com/beginning-android-install-an-android-platform](http://sitepoint.com/beginning-android-install-an-android-platform)，出现该错误消息“因为此时 ADB 服务器未运行”。这意味着您可以放心地忽略它：ADB 服务器不需要运行；*如果它正在*运行，安装过程只是试图停止它。

在我看来，开发团队真的应该让你知道这个错误**并不**代表问题，而不是像他们现在那样（截至 2014 年 12 月）用红色突出显示它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T04:01:23.683

AFAIK，安装所有软件包后，下载管理器重新启动 ADB 服务。在您的情况下，下载管理器似乎无法停止 adb 服务。如果我要验证安装，

1.  我将再次开始安装，这一次我可能会看到很多软件包已经安装。如果缺少某些东西，我将有机会安装它。

2.  您始终可以手动重新启动 adb 服务，以查看它是否重新启动干净而没有任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-06T19:52:21.283

我也在进行网络共享，无法在 Android Studio 中启动 adb。由于它已经开始进行网络共享，Android Studio 重新启动它似乎是一个冲突。

# css - 为什么无法正确查看此图像 背景？

> ID：11572580
> 
> 赞同：0
> 
> 时间：2012-07-20T03:44:41.413
> 
> 标签：css

[我想要达到的目标。](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/navbarw.png "我想要达到的目标")

白色背景图像无法正确插入`ul`导航栏。插入后看不到白色背景的投影和内发光效果。

[插入后看到的内容。（jpg背景图片）](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/wis1.png)

[插入后看到的内容。（png背景图片）](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/pngqqq.png)

下面是 HTML 和 CSS。

```
<html>
    <head>
        <meta charset="UTF-8"/>
        <title> Foodstant Delivery </title>
        <link rel="stylesheet" type="text/css" media="screen" href="stylo.css" />
        <link rel="shortcut icon" href="images/favicon.ico" />
    </head>

<body>
    <div id="container">

    <div id="navbar">
            <ul>
                <li class="OP"><a  href="Orders.html">Your Order</a></li>
                <li class="MP"><a  href="Menu.html">Menu</a></li>
                <li class="CUP"><a  href="ContactUs.html">Contact Us</a></li>
                <li class="JP"><a  href="Jobs.html" target="_blank">Jobs</a></li>
                <li class="TCP"><a  href="TC.html">Terms & Conditions</a></li>
            </ul>   
        </div>
    </div>

</body> 

</html> 
```

CSS：

```
* {
    margin: 0;
    padding:0;
}

#navbar {
    background:url('images/navbarbg1.jpg');
    position: absolute;
    top: 300px;
    left: 150px;
    font-size: 26px;
}

#navbar ul li {     
        float:left;
        padding:0 60px 0 0; 
        list-style-type:disc;
        }

#navbar ul li.OP {
        list-style-image:url('images/order.png');
}   

#navbar ul li.MP {
        list-style-image:url('images/menulogo2.png');
}

#navbar ul li.CUP {
        list-style-image:url('images/contact.png');
}

#navbar ul li.JP {
        list-style-image:url('images/Pen.png');
}

#navbar ul li.TCP {
        list-style-image:url('images/pin.png');
} 
```

更新：我设法让它在某种程度上工作，但在神秘的情况下。尺寸有点偏，并且不包括第一个图标。 [图片](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/a111.png)

```
#navbar {
    background:url('images/navbarw1.png');
    position: absolute;
    top: 300px;
    left: 150px;

    background-position: 50% 50%;
    font-size: 26px;
    font-family: 'Conv_LITHOSPRO-REGULAR';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:56:02.040

尝试将ul溢出设置为隐藏

```
ul{
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:04:36.113

“#navbar”没有设置任何尺寸，它包含一个`ul`包含浮动元素的元素，这些元素可能不是“包含”的，这可能意味着“#navbar”没有出现。由于您使用的背景在高度维度中不重复，因此建议无论如何设置该维度。

编辑：我也同意 pcridesagain （但可能不完全是），原因[是](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/a111.png)您仍在使用 li 作为列表项。使它们“显示：块；”，将图像显示为位于左侧和中心（垂直）的背景（非重复）图像，为 lis 和左侧填充提供足够的行高，这也是我经常使用的。同样通过这种安排，您可以更准确地定位背景，而您不使用列表项图像。但是我可以理解为什么您可能希望将它们用作列表项图像，因为有时这样做可能会有点痛苦*，因为*您拥有所有的保真度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T05:49:38.550

有两件事要尝试，而不是选择带有背景图像的 div #navbar，而是选择`ul`带有`#navbar ul{...}`. 它不覆盖第一个图标的原因是因为您需要将 设置`list-style-type`为`none`. 去掉`list-style-type`并使用`backgroundiimage`+`padding-left`来`li`创建图标。

# function - 如何将 Derby 数据库与使用 Join 和聚合函数一起使用？

> ID：11572583
> 
> 赞同：3
> 
> 时间：2012-07-20T03:44:59.283
> 
> 标签：function, join, aggregate, derby

我的数据库中有两个表如下：

```
CUSTOMER (
  ID integer Generated Always As Identity,
  FIRSTNAME varchar(32) not null,
  LASTNAME varchar(32) not null,
  PHONENUMBER varchar(11) not null,
  ADDRESS varchar(225),
primary key (id)
); 
```

和

```
APP.ORDERS (
  ID integer not null default AUTOINCREMENT: start 1 increment 1,
  CUSTOMER_ID integer References Customer(ID) ,
  EMPLOYEEID integer References Employee(ID),
  DATEOFDELIVERY date,
  primary key (id),
); 
```

当我尝试加入这两个表时，如下所示，一切都很好：

```
 SELECT CUSTOMER_ID,firstname,LASTNAME,Address,phoneNumber From APP.Customer 
 INNER JOIN APP.Orders ON customer.ID = customer_ID 
 WHERE ORDERS.dateOfDelivery Between '2012-09-01' AND '2012-11-11' 
```

但是当我使用如下聚合函数时，它给了我错误：

```
SELECT Count(CUSTOMER_ID),firstname,LASTNAME,Address,phoneNumber 
From APP.Customer                         
INNER JOIN APP.Orders ON customer.ID = customer_ID 
WHERE ORDERS.dateOfDelivery Between '2012-09-01' AND '2012-11-11' ; 
```

错误：

```
[2012-07-20 08:07:04] [42Y35][30000] Column reference 'FIRSTNAME' is invalid. When the SELECT list contains at least one aggregate then all entries must be valid aggregate expressions. 
```

我尝试将上面的最后一个代码更改为 Orders.Count(CUSTOMR_ID) 以告诉数据库正确的表，但它给我的错误是没有名称为 Orders 的模式，所以我将其更改为 APP.Orders.Count(CUSTOMER_ID) 但它永远解决不了问题。错误 ：`Schema 'ORDERS' does not exist`

更新问题：

我想出那个非常简单的查询：

```
SELECT COUNT(*),ID FROM Orders 
```

将导致此错误：

```
[2012-07-20 09:01:50] [42Y35][30000] Column reference 'ID' is invalid. When the SELECT list contains at least one aggregate then all entries must be valid aggregate expressions. 
```

所以这意味着不可能同时拥有聚合函数和简单的列名，但我想知道如何用任何等效的查询提供预期的输出？**任何的想法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:29:31.447

GROUP BY 是正确的方法。您需要按所有非聚合列进行分组，如下所示：

```
SELECT Count(CUSTOMER_ID),firstname,LASTNAME,Address,phoneNumber 
From APP.Customer                         
INNER JOIN APP.Orders ON customer.ID = customer_ID 
WHERE ORDERS.dateOfDelivery Between '2012-09-01' AND '2012-11-11' 
group by firstname,lastname,address,phonenumber; 
```

可以这样想：你想收集一个特定客户的所有订单（这就是 GROUP BY 所做的），然后你想计算所有这些订单（这就是 COUNT() 函数所做的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T03:56:03.730

试试这个

```
SELECT CUSTOMER_ID,Count(CUSTOMER_ID),firstname,LASTNAME,Address,phoneNumber 
From APP.Customer                         
INNER JOIN APP.Orders ON customer.ID = customer_ID 
WHERE ORDERS.dateOfDelivery Between '2012-09-01' AND '2012-11-11' 
GROUP BY CUSTOMER_ID,firstname,LASTNAME,Address,phoneNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:34:26.090

derby 数据库中的等效查询如下：

```
SELECT customer.firstName As FirstName ,
       customer.lastName AS LastName,
       customer.phoneNumber AS Telephone,
       customer.address AS Address, 
       (SELECT COUNT(OrderID) FROM Orders)  
  FROM Customer join Orders On orders.customer_ID = customer.id WHERE orders.dateOfDelivery Between '2012-09-01' And '2012-11-11' 
```

事实是这个数据库不能像其他数据库那样实现同时包含聚合函数和列名的查询。我提到的等效查询将给出相同的输出，但根据[http://old.nabble.com/Nested-query-in-conjunction-with-ordering---unreasonably-slow-td15259785.html](http://old.nabble.com/Nested-query-in-conjunction-with-ordering---unreasonably-slow-td15259785.html)它的性能不是好。Bryan Pendleton 提到的查询也与此查询等效。

# java - tortoise SVN - 从 SVN 存储库获取项目并从本地签入

> ID：11572586
> 
> 赞同：3
> 
> 时间：2012-07-20T03:45:21.547
> 
> 标签：java, svn, tortoisesvn

我想从 SVN 存储库的主干中获取项目。完成后，我在本地所做的任何更改都应该更新到 SVN。我该怎么做？

我在乌龟SVN中尝试了以下内容：

```
1\. created a project folder.
2\. right click and gave export option and the link for SVN repository. then ok
3\. got all files to the local file system. 
```

它运作良好。但是当我右键单击我的项目文件夹时，我没有在所有文件夹中看到绿色勾号，或者我没有看到 SVN 更新或提交选项。为什么会这样？我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T04:00:55.103

1.  在本地系统中创建一个文件夹。
2.  右键单击并选择 SVN 签出。
3.  选择您要获取的 SVN 存储库。
4.  完成编辑后，右键单击并选择 SVN 提交。

# java - 加速 Apache Commons FTPClient 传输

> ID：11572588
> 
> 赞同：12
> 
> 时间：2012-07-20T03:45:36.177
> 
> 标签：java, ftp, apache-commons

我正在使用 Apache Commons FTPClient 上传大文件，但传输速度只是通过 FTP 使用 WinSCP 传输速度的一小部分。如何加快传输速度？

```
 public boolean upload(String host, String user, String password, String directory, 
        String sourcePath, String filename) throws IOException{

    FTPClient client = new FTPClient();
    FileInputStream fis = null;

    try {
        client.connect(host);
        client.login(user, password);
        client.setControlKeepAliveTimeout(500);

        logger.info("Uploading " + sourcePath);
        fis = new FileInputStream(sourcePath);        

        //
        // Store file to server
        //
        client.changeWorkingDirectory(directory);
        client.setFileType(FTP.BINARY_FILE_TYPE);
        client.storeFile(filename, fis);
        client.logout();
        return true;
    } catch (IOException e) {
        logger.error( "Error uploading " + filename, e );
        throw e;
    } finally {
        try {
            if (fis != null) {
                fis.close();
            }
            client.disconnect();

        } catch (IOException e) {
            logger.error("Error!", e);
        }
    }         
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-02T11:07:55.790

增加缓冲区大小：

```
client.setBufferSize(1024000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:21:53.233

使用 outputStream 方法，并使用缓冲区传输。

```
InputStream inputStream = new FileInputStream(myFile);
OutputStream outputStream = ftpclient.storeFileStream(remoteFile);

byte[] bytesIn = new byte[4096];
int read = 0;

while((read = inputStream.read(bytesIn)) != -1) {
    outputStream.write(bytesIn, 0, read);
}

inputStream.close();
outputStream.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T02:50:58.347

有一个已知的 Java 1.7 和 Commons Net 3.2 发布，错误是[https://issues.apache.org/jira/browse/NET-493](https://issues.apache.org/jira/browse/NET-493)

如果运行这些版本，我建议首先升级到 Commons Net 3.3。显然 3.4 也修复了更多的性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T17:53:55.957

最好使用 ftp.setbuffersize(0); 如果您使用 0 作为您的 buffersize ，它将作为无限的缓冲区大小。显然你的交易会得到加速......我亲身经历过......一切顺利...... :)

# android - Android：main.xml 文件中以编程方式定义的视图？

> ID：11572590
> 
> 赞同：0
> 
> 时间：2012-07-20T03:46:04.330
> 
> 标签：android

我对 android 编程还是比较陌生，所以请解释一下可能看起来很明显的事情。

我以编程方式定义了一个自定义视图：

```
class RenderView extends View{ 
```

我希望这个视图与一些 TextViews 等配合得很好，所以我想将我的 RenderView 包含在 main.xml 文件中。如何让 main.xml 文件识别我的自定义视图？

此外，如果我的 RenderView 的构造函数有参数，那将如何工作？我假设我不能直接从 main.xml 文件传递​​参数，但是如何让 main.xml 文件识别我以编程方式创建的视图？

在此先感谢，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:50:25.563

这与其他视图相同。您可以使用图形布局，从显示所有小部件的托盘的“自定义视图”选项卡中拖放自定义视图。

您需要添加的 XML 看起来像这样。

```
<com.package.RenderView andrdoi:layout_width="wrap_content" .....>
 </com.package.RenderView>

```

要传递自定义参数，您需要先创建它们。这是解释更多关于它的链接。

[http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/](http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/)

# java - 如何使用 Firebug 扩展来提醒我网站向我的 Web 浏览器发送 ajax 调用

> ID：11572591
> 
> 赞同：0
> 
> 时间：2012-07-20T03:46:04.017
> 
> 标签：java, html, ajax, firefox, firebug

我正在尝试购买网站上缺货的商品。我不想经常检查页面的更新，我被告知萤火虫会为我监控这个。我知道该网站使用 Ajax 消息来更新他们当前的库存。我发现 Html 行发生了变化，但这就是我的 Web 开发知识的范围。

有了我已经知道的有关网页的信息，我如何让 Firebug 提醒我更改？

我非常感谢您的帮助，我尝试四处搜索，但似乎找不到适合我情况的答案。

# bash - 使用 .bashrc 之类的内容添加到任何 UNIX 系统上的 PATH

> ID：11572592
> 
> 赞同：1
> 
> 时间：2012-07-20T03:46:22.617
> 
> 标签：bash, shell, unix, path, zsh

我希望我的应用程序以`bin`一种适用于所有 UNIX 的所有 shell（实际上是多个 shell）的方式将它自己的目录添加到路径中。这可能吗？

具体来说，目标是添加`~/.myapp/bin/`用户路径的一部分。

简单地附加`export PATH=~/.myapp/bin:$PATH`到是`.bashrc`行不通的——zsh 用户等呢？此外，我不确定这在所有支持 shell 的平台上是否可靠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:59:22.590

我怀疑你问的是不可能的。没有一个所有炮弹都尊重的中心位置。许多 Bourne 风格的 shell（bash、zsh）可能会或可能不会`~/.profile`根据其默认配置读取，但 csh 和 tcsh 读取的文件集完全不同，并且不要使用与 bash 相同的命令来设置变量，例如`PATH`.

许多应用程序使用的另一种策略是将自己安装在**/usr/local/ *appname* /**或**/opt/ *appname* /**之类的位置，然后在`/usr/local/bin/`. 例如，在我的 FreeBSD 系统上：

```
> cd /usr/local/bin ; ls -l drush mailq perl5
lrwxr-xr-x  1 root  wheel  14 Apr 29 12:22 drush -> ../drush/drush
lrwxr-xr-x  1 root  wheel  32 Apr 28 15:28 mailq -> ../../../usr/local/sbin/sendmail
lrwxr-xr-x  1 root  wheel  25 Apr 17 01:17 perl5 -> /usr/local/bin/perl5.12.4 
```

您可以做的任何事情来利用现有配置而不是需要定制的东西将减少失败的可能性。

此外，对于大多数平台，有一种“公认”的处理方式。如果您将软件安装到 FreeBSD 中，则应该*通过*FreeBSD“ports”系统来完成，该系统对文件的存放位置有自己的规则。MacPorts、Fink、Emerge 等也是如此。在你做一些在他们的各种用户社区中踩到脚趾的事情之前，请先阅读你的目标平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T03:51:48.163

老实说，我会避免这样做。放入一个符号链接或一个 exec 脚本，`~/bin`并通知用户`$PATH`如果它还没有，他们必须添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:35:34.350

在我的系统上 bash 和 zsh source `/etc/profile.env`，它是由目录`env-update`内容生成的文件`/etc/env.d`。但是像`~/smth`这里添加路径可能不是一个好主意，这也是特定于发行版的（shell 使用它的唯一原因是代码

```
if [ -e /etc/profile.env ] ; then
    . /etc/profile.env
fi 
```

和`/etc/profile`) `/etc/zsh/zprofile`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T03:59:48.130

在 Bash 中，该变量`$PATH`为您提供所有由 .分隔的`bin`和文件夹。`sbin``:`

稍加替换，您就可以获得它们的列表。以雪豹为例：

```
$ echo ${PATH//:/ }
/opt/local/bin /opt/local/sbin /sw/bin /sw/sbin /usr/bin /bin /usr/sbin /sbin /usr/local/bin /usr/local/git/bin /usr/X11/bin /usr/X11R6/bin 
```

# apache - 将 mod_rewrite Apache 转换为 Nginx？

> ID：11572606
> 
> 赞同：1
> 
> 时间：2012-07-20T03:49:21.947
> 
> 标签：apache, mod-rewrite, nginx

我是互联网编程的新手。我想将 Apache 切换到 Nginx Web 服务器，但 Nginx 模式重写仍然存在问题。

我的网站位置`/home/user/public_html/read/`和我以前的`.htaccess`文件`/home/user/public_html/read/.htaccess`是这样的：

```
Options +FollowSymlinks

RewriteEngine on

RewriteRule ^mangas/([^/]+)/([^/]+)/$ - [F,L] 
RewriteRule ^mangas/([^/]+)/$ - [F,L] 
RewriteRule ^mangas(/?)$ - [F,L]

RewriteRule ^([^/.]+)/([^/.]+)/([0-9]+)(/?)$ index.php?manga=$1&chapter=$2&page=$3 [L] 
RewriteRule ^([^/.]+)/([^/.]+)(/?)$ index.php?manga=$1&chapter=$2 [L] 
RewriteRule ^([^/.]+)(/?)$ index.php?manga=$1 [L] 
```

如何将此 mod_rewrite 转换为 nginx？（我很抱歉，因为我的英语拼写不完美）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:05:12.903

在你的试试这些`server{}`：

```
location ~ ^/mangas/([^/]+)/([^/]+)/$ {
   return 403; 
} 
location ~ ^/mangas/([^/]+)/$ { 
   return 403; 
} 
location ~ ^/mangas(/?)$ { 
   return 403; 
}

location / { 
   rewrite ^/([^/.]+)/([^/.]+)/([0-9]+)(/?)$ /index.php?manga=$1&chapter=$2&page=$3 break; 
   rewrite ^/([^/.]+)/([^/.]+)(/?)$ /index.php?manga=$1&chapter=$2 break; 
   rewrite ^/([^/.]+)(/?)$ /index.php?manga=$1 break; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:25:02.047

O certo seria：

```
location ~ ^/mangas/([^/]+)/([^/]+)/$ {
   return 403;
}

location ~ ^/mangas/([^/]+)/$ {
   return 403;
}
location ~ ^/mangas(/?)$ {
   return 403;
}
location / {
   rewrite ^/([^/.]+)/([^/.]+)/([0-9]+)(/?)$ /index.php?manga=$1&chapter=$2&page=$3 last;
   rewrite ^/([^/.]+)/([^/.]+)(/?)$ /index.php?manga=$1&chapter=$2 last;
   rewrite ^/([^/.]+)(/?)$ /index.php?manga=$1 last;
} 
```

Não sei porquê, mas, alterando de break para last funciona。

# cuda - CUDA 加法与移位指令性能

> ID：11572607
> 
> 赞同：1
> 
> 时间：2012-07-20T03:49:23.910
> 
> 标签：cuda, gpu, throughput, machine-instruction

我正在尝试了解我正在研究的大型 CUDA 内核的指令吞吐量。我写了两个小程序来比较加法和移位指令的吞吐量。根据CUDA C Programming Guide，移位指令的吞吐量是加法指令的一半。但是，当我在 Tesla M2070 上测量跟随两个程序的时间时，时间是完全相同的。有人可以解释为什么会这样吗？

加法程序：

```
#include <limits.h>
#include <stdio.h>
#include <fstream>
#include <iostream>
#include <cstdlib>
#include <stdint.h>

using namespace std;

__global__ void testAdd(int numIterations, uint1* result){
  int total = 1;
  for(int i=0; i< numIterations;i ++){
    total = total+i;
  }
  result[0] = make_uint1(total);
}

int main(){
  uint1* result;
  cudaMalloc((void**)(&(result)), sizeof(uint1));
  float totalElapsedTime = 0;
  int i;

  for(i = 0; i < 10; i++){
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);
    testAdd<<<1,1>>>(100000, result);
    cudaError_t e50 = cudaGetLastError();
    if(e50 == cudaSuccess){
      cudaEventRecord(stop, 0);
      cudaEventSynchronize(stop);
      float elapsedTime;
      cudaEventElapsedTime(&elapsedTime, start, stop);
      totalElapsedTime += elapsedTime;;
      //cout << "Elapsed Time:" << elapsedTime << endl;                                                                                                                              

    }else{
      cout << "Error launching kernel: " << e50 << endl;
    }
    cudaEventDestroy(start);
    cudaEventDestroy(stop);
  }
  cout << "Elapsed Time: " << totalElapsedTime/i << endl;
  cudaFree(result);
} 
```

换班程序：

```
#include <limits.h>
#include <stdio.h>
#include <fstream>
#include <iostream>
#include <cstdlib>
#include <stdint.h>

using namespace std;

__global__ void testShift(int numIterations, uint1* result){
  int total = 1;
  for(int i=0; i< numIterations;i ++){
    total = total<<i;
  }
  result[0] = make_uint1(total);
}

int main(){
  uint1* result;
  cudaMalloc((void**)(&(result)), sizeof(uint1));
  float totalElapsedTime = 0;
  int i;

  for(i = 0; i < 10; i++){
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);
    testShift<<<1,1>>>(100000, result);
    cudaError_t e50 = cudaGetLastError();
    if(e50 == cudaSuccess){
      cudaEventRecord(stop, 0);
      cudaEventSynchronize(stop);
      float elapsedTime;
      cudaEventElapsedTime(&elapsedTime, start, stop);
      totalElapsedTime += elapsedTime;;
      //cout << "Elapsed Time:" << elapsedTime << endl;                                                                                                                              

    }else{
      cout << "Error launching kernel: " << e50 << endl;
    }
    cudaEventDestroy(start);
    cudaEventDestroy(stop);
  }
  cout << "Elapsed Time: " << totalElapsedTime/i << endl;
  cudaFree(result);
} 
```

编辑：添加 ptx 代码添加和移位程序。如您所见，唯一的区别在于第 78 行，即添加指令与 shl 指令。

添加 PTX 代码：

```
 .entry _Z7testAddiP5uint1 (
                .param .s32 __cudaparm__Z7testAddiP5uint1_numIterations,
                .param .u64 __cudaparm__Z7testAddiP5uint1_result)
        {
        .reg .u32 %r<8>;
        .reg .u64 %rd<3>;
        .reg .pred %p<4>;
        .loc    16      10      0
 //   6  #include <stdint.h>
 //   7
 //   8  using namespace std;
 //   9
 //  10  __global__ void testAdd(int numIterations, uint1* result){
$LDWbegin__Z7testAddiP5uint1:
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        mov.u32         %r2, 0;
        setp.le.s32     %p1, %r1, %r2;
        @%p1 bra        $Lt_0_2306;
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        mov.s32         %r3, %r1;
        mov.s32         %r4, 0;
        mov.s32         %r5, 1;
        mov.s32         %r6, %r3;
$Lt_0_1794:
 //<loop> Loop body line 10, nesting depth: 1, estimated iterations: unknown
        .loc    16      13      0
 //  11    int total = 1;
 //  12    for(int i=0; i< numIterations;i ++){
 //  13      total = total+i;
        add.s32         %r5, %r4, %r5;
        add.s32         %r4, %r4, 1;
        .loc    16      10      0
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        .loc    16      13      0
        setp.ne.s32     %p2, %r1, %r4;
//   6  #include <stdint.h>
 //   7
 //   8  using namespace std;
 //   9
 //  10  __global__ void testAdd(int numIterations, uint1* result){
$LDWbegin__Z7testAddiP5uint1:
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        mov.u32         %r2, 0;
        setp.le.s32     %p1, %r1, %r2;
        @%p1 bra        $Lt_0_2306;
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        mov.s32         %r3, %r1;
        mov.s32         %r4, 0;
        mov.s32         %r5, 1;
        mov.s32         %r6, %r3;
$Lt_0_1794:
 //<loop> Loop body line 10, nesting depth: 1, estimated iterations: unknown
        .loc    16      13      0
 //  11    int total = 1;
 //  12    for(int i=0; i< numIterations;i ++){
 //  13      total = total+i;
        add.s32         %r5, %r4, %r5;
        add.s32         %r4, %r4, 1;
        .loc    16      10      0
        ld.param.s32    %r1, [__cudaparm__Z7testAddiP5uint1_numIterations];
        .loc    16      13      0
        setp.ne.s32     %p2, %r1, %r4;
        @%p2 bra        $Lt_0_1794;
        bra.uni         $Lt_0_1282;
$Lt_0_2306:
        mov.s32         %r5, 1;
$Lt_0_1282:
        .loc    16      15      0
 //  14    }
 //  15    result[0] = make_uint1(total);
        ld.param.u64    %rd1, [__cudaparm__Z7testAddiP5uint1_result];
        st.global.u32   [%rd1+0], %r5;
        .loc    16      16      0
 //  16  }
        exit;
$LDWend__Z7testAddiP5uint1:
        } // _Z7testAddiP5uint1 
```

换档 PTX 代码：

```
 .entry _Z9testShiftiP5uint1 (
                .param .s32 __cudaparm__Z9testShiftiP5uint1_numIterations,
                .param .u64 __cudaparm__Z9testShiftiP5uint1_result)
        {
        .reg .u32 %r<8>;
        .reg .u64 %rd<3>;
        .reg .pred %p<4>;
        .loc    16      10      0
 //   6  #include <stdint.h>
 //   7
 //   8  using namespace std;
 //   9
 //  10  __global__ void testShift(int numIterations, uint1* result){
$LDWbegin__Z9testShiftiP5uint1:
        ld.param.s32    %r1, [__cudaparm__Z9testShiftiP5uint1_numIterations];
        mov.u32         %r2, 0;
        setp.le.s32     %p1, %r1, %r2;
        @%p1 bra        $Lt_0_2306;
        ld.param.s32    %r1, [__cudaparm__Z9testShiftiP5uint1_numIterations];
        mov.s32         %r3, %r1;
        mov.s32         %r4, 0;
        mov.s32         %r5, 1;
    mov.s32         %r6, %r3;
$Lt_0_1794:
 //<loop> Loop body line 10, nesting depth: 1, estimated iterations: unknown
        .loc    16      13      0
 //  11    int total = 1;
 //  12    for(int i=0; i< numIterations;i ++){
 //  13      total = total<<i;
        shl.b32         %r5, %r5, %r4;
        add.s32         %r4, %r4, 1;
        .loc    16      10      0
        .reg .u64 %rd<3>;
        .reg .pred %p<4>;
        .loc    16      10      0
 //   6  #include <stdint.h>
 //   7
 //   8  using namespace std;
 //   9
 //  10  __global__ void testShift(int numIterations, uint1* result){
$LDWbegin__Z9testShiftiP5uint1:
        ld.param.s32    %r1, [__cudaparm__Z9testShiftiP5uint1_numIterations];
        mov.u32         %r2, 0;
        setp.le.s32     %p1, %r1, %r2;
        @%p1 bra        $Lt_0_2306;
        ld.param.s32    %r1, [__cudaparm__Z9testShiftiP5uint1_numIterations];
        mov.s32         %r3, %r1;
        mov.s32         %r4, 0;
        mov.s32         %r5, 1;
    mov.s32         %r6, %r3;
$Lt_0_1794:
 //<loop> Loop body line 10, nesting depth: 1, estimated iterations: unknown
        .loc    16      13      0
 //  11    int total = 1;
 //  12    for(int i=0; i< numIterations;i ++){
 //  13      total = total<<i;
        shl.b32         %r5, %r5, %r4;
        add.s32         %r4, %r4, 1;
        .loc    16      10      0
        ld.param.s32    %r1, [__cudaparm__Z9testShiftiP5uint1_numIterations];
        .loc    16      13      0
        setp.ne.s32     %p2, %r1, %r4;
        @%p2 bra        $Lt_0_1794;
        bra.uni         $Lt_0_1282;
$Lt_0_2306:
        mov.s32         %r5, 1;
$Lt_0_1282:
        .loc    16      15      0
 //  14    }
 //  15    result[0] = make_uint1(total);
        ld.param.u64    %rd1, [__cudaparm__Z9testShiftiP5uint1_result];
        st.global.u32   [%rd1+0], %r5;
        .loc    16      16      0
 //  16  }
        exit;
$LDWend__Z9testShiftiP5uint1:
        } // _Z9testShiftiP5uint1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:16:19.127

@gmemon：如果您想检查 GPU 汇编代码，PTX 在这里用处不大，因为它是中间语言。

要获取实际的汇编代码，您可以执行以下操作：

1.  使用 NVCC -keep 选项编译你的程序
2.  在 CUBIN 文件上使用 cuobjdump --dump-sass 进行反汇编

CUBIN 文件通常称为 foo.sm_20.cubin 或 foo.sm_30.cubin，具体取决于您的架构。

例如，开普勒反汇编如下所示：

```
 /*7458*/     /*0x001b9e85c0000000*/     LDL.CS R46, [R1];
    /*7460*/     /*0x101ade85c0000000*/     LDL.CS R43, [R1+0x4];
    /*7468*/     /*0xf2655c85c8000063*/     STL [R38+0x18fc], R21;
    /*7470*/     /*0x3ee35c036800c000*/     LOP.AND R13, R46, 0xf;
    /*7478*/     /*0x400000076000000c*/     SSY 0x7790;
    /*7488*/     /*0xfcdfdd0348010000*/     IADD RZ.CC, R13, -RZ;
    /*7490*/     /*0xfff1dc63190e0000*/     ISETP.EQ.X.AND P0, pt, RZ, RZ, pt;
    /*7498*/     /*0x800001e74000000b*/     @P0 BRA 0x7780;
    /*74a0*/     /*0xfc001de428000000*/     MOV R0, RZ;
    /*74a8*/     /*0x04039de218000000*/     MOV32I R14, 0x1;
    /*74b0*/     /*0x0403dde218000000*/     MOV32I R15, 0x1;
    /*74b8*/     /*0x626fdca5c8000064*/     STL.64 [R38+0x1918], RZ; 
```

指令语义可以在 cuobjdump 工具的手册中找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:08:41.910

我建议查看 PTX 代码中的指令数量 - 您可以为您的两个示例发布 PTX 代码吗？这应该提供有关性能的线索。

顺便说一句，我不确定您是否可以仅使用一个线程可靠地测试性能。

# javascript - 用户向下滚动时如何固定位置

> ID：11572609
> 
> 赞同：-2
> 
> 时间：2012-07-20T03:49:48.567
> 
> 标签：javascript, html, css

所以我在身体的其余部分有一个水平菜单。
我想让这个菜单浮动，位置：当我向下滚动页面时固定
这是怎么回事？:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:10:50.083

```
<div id="bar">I am a navigation bar.</div> 
```

```
div#bar{
    height: 50px;
    position: fixed;
    bottom: 0px;
    background: green;
} 
```

在这里，水平条将粘在底部。

# php - 从codeigniter中的主域和子域获取base_url

> ID：11572612
> 
> 赞同：0
> 
> 时间：2012-07-20T03:50:08.667
> 
> 标签：php, codeigniter, url

我的项目有两个申请

1.  网站
2.  api.site.com

这是我的配置

```
$config['base_url'] = 'http://' . $_SERVER['HTTP_HOST'] . '/'; 
```

* * *

如果我运行**site.com**，如何获取 api.site.com 的 base_url 或**site_url**？

如果我运行**api.site.com**，如何获取**site.com**的 base_url 或 site_url ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T13:52:26.560

如果您对 base_url 使用以下代码，那么您无需更改任何内容，您可以在任何服务器以及任何域子域 IP 地址中使用它

```
$config['base_url'] = (isset($_SERVER['HTTPS']) ? "https://" : "http://") . 
  $_SERVER['HTTP_HOST'] . preg_replace('@/+$@', '', dirname($_SERVER['SCRIPT_NAME'])) . '/'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:24:50.353

我希望 site.com 和 api.site.com 会有不同的内容。最好在每个根目录下有两个应用程序文件夹和两个不同的 index.php 文件。您可以通过更新 index.php 文件中的系统路径来共享相同的系统文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T05:21:21.960

没有这样的功能可以以您的方式检索 URL。您需要手动完成。创建一个名为`base_helper.php`inside`helpers`目录的助手并编写此代码。

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

if (!function_exists('url')) {

    function url($param = TRUE)
    {
        if ($param) {
            return 'http://site.com/';
        }
        return 'http://api.site.com/';
    }

} 
```

你可以在你想要的控制器/视图中调用这个助手。使用`true`和`false`参数获取主域或子域。

```
$this->load->helper('base');
echo url();
echo "\n";
echo url(false); 
```

印刷

```
http://site.com/
http://api.site.com/ 
```

希望这对您有所帮助。谢谢！！

# c# - C# 中的剪贴板数据源

> ID：11572613
> 
> 赞同：0
> 
> 时间：2012-07-20T03:50:17.123
> 
> 标签：c#, winforms, clipboard

我一直在搜索和搜索并搜索一些允许我这样做的代码，但我什么也没得到。假设我复制了一个文件或图像文件。它在我的剪贴板上。如何获取我复制的文件或图像文件的名称？我已经知道复制的文本或图像，但我需要文件名。例如：图像.png

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:55:40.207

您在寻找这种方法吗？

```
Clipboard.GetFileDropList() 
```

编辑：

```
StringCollection fileNameCollection = Clipboard.GetFileDropList();
            string copiedFilePath = (fileNameCollection != null && fileNameCollection.Count > 0) ? fileNameCollection[0] : null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:56:12.893

试试这个 ：

```
public System.Drawing.Image SwapClipboardImage(
System.Drawing.Image replacementImage)
{
System.Drawing.Image returnImage = null;
if (Clipboard.ContainsImage())
{
    returnImage = Clipboard.GetImage();
    Clipboard.SetImage(replacementImage);
}
return returnImage;
} 
```

从这里[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.clipboard.getimage.aspx)

# vba - VBA中的链式赋值

> ID：11572620
> 
> 赞同：4
> 
> 时间：2012-07-20T03:50:41.893
> 
> 标签：vba, vb6, excel, programming-languages

像 C/CPP/CSharp/JScript 一样，我们如何在 VBA 中进行链式赋值？换句话说，VBA 是否具有赋值运算符的右结合性？

例如在 C-sharp 和 JavaScript 中，我们可以使用：

```
var alpha, bravo, charlie;
alpha = bravo = charlie = "hello"; 
```

现在在 VBA 中编写这个表达式必须：

```
Dim alpha, bravo, charlie
alpha = "hello"
bravo = "hello"
charlie = "hello" 
```

但我们不能使用：

```
Dim alpha, bravo, charlie
alpha = bravo = charlie = "hello" 
```

VBA 不允许折叠表达式。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T04:20:23.053

不，VBA 没有赋值运算符的右结合性。但是，VBA 确实具有其他逻辑运算符的右关联性或链接操作。考虑以下表达式：

```
alpha = 3
bravo = 5
charlie = 4

alpha = bravo < charlie

MsgBox(alpha) 'would display false

alpha = 3
bravo = 5
charlie = 4

alpha = bravo > charlie < alpha

MsgBox(alpha) 'would display ture .. because (bravo > charlie) is true 
                                      'and true (or 1) less than alpha 
```

但是，VBA 解释器优先于比较运算符而不是赋值运算符，两者都由`=`. 以机智，

```
alpha = bravo = "hello"
MsgBox(alpha) 'would display false, because bravo <> "hello" 
```

因此，您需要显式地使用多个语句进行赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T13:49:57.227

而不是下面的分配功能，我会使用

```
Public Sub Assign(ParamArray varsAndValue() As Variant)
    Dim idx As Long
    Dim value As Variant

    If UBound(varsAndValue) < 1 Then
        Err.Raise 999, "Invalid call to «Assign»: Last argument should be the value to set, first upto one but last should be the variables"
    ElseIf UBound(varsAndValue) < 2 Then
        Err.Raise 999, "Why don't you use a normal assignment when you only need to assign one variable?"
    Else
        value = varsAndValue(UBound(varsAndValue))
        For idx = 0 To UBound(varsAndValue) - 1
            varsAndValue(idx) = value
        Next idx
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:13:10.770

不是你想做的。[这个问题](https://stackoverflow.com/questions/2312151/multiassignment-in-vb-like-in-c-style-languages)表明 VB.net 中也不存在该功能。

正如所写，VBA 使用最左边的 = 符号将值分配给 alpha 和*所有*其他值以进行比较。

一次分配多个变量的唯一选择是使用数组。

这些例子来自[这里](http://www.mrexcel.com/forum/showthread.php?18225-Initializing-Arrays-with-a-single-statement)

```
Dim myarray As Variant

myarray = Array("Cat", "Dog", "Rabbit") 
```

或者

```
Dim MyStringArr() As String
MyStringArr = Split("Text1,Text2,Text3", ",") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:34:03.987

你总是可以用这样的函数来做到这一点：

```
Private Function assign(var As Variant, value As Variant) As Variant
    var = value
    assign = value
End Function

Private Sub Form_Load()
    Dim alpha, bravo, charlie
    Call assign(alpha, assign(bravo, assign(charlie, "hello")))
    Debug.Print alpha, bravo, charlie
End Sub 
```

...但它很快变得丑陋。

# c# - 编组一个双字符指针返回值

> ID：11572631
> 
> 赞同：1
> 
> 时间：2012-07-20T03:52:10.833
> 
> 标签：c#, c, interop

我正在使用的 AC 库有一个函数，它返回一个指向 char 指针数组的指针：

```
extern char** getIds(); 
```

使用示例：

```
char **list, **list_save;
list_save = list = getIds();
while (list && *list)
{
    printf("Id: %s\n", *list);
    list++;
}
freeIds(list_save); 
```

Where`freeIds`也来自 C 库，并释放`getIds`.

他们也提供了一个 .Net Interop 程序集，但它不导入该`getIds`功能。我可以访问互操作程序集源代码。

我的程序是用 C# 编写的，所以我想知道是否可以向互操作程序集添加导入，它应该是什么样子，以及我的 C# 代码必须是什么样子才能调用该函数。

我对 dll 导入的猜测是：

```
[DllImport("foo.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]
public static extern IntPtr getIds(); 
```

但我无法让 C# 调用它，因此我不知道 dll 导入是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:58:17.333

看看[Marshaling char**](http://www.mono-project.com/Interop_with_Native_Libraries#Marshaling_char.2A.2A)。您的 dllimport 应该可以工作。

# javascript - 如何使用 javascript 或 Jquery 更改屏幕方向？

> ID：11572632
> 
> 赞同：2
> 
> 时间：2012-07-20T03:52:15.470
> 
> 标签：javascript, jquery, cordova

我正在为 Android 和 iphone 开发一个使用 Phonegap 的应用程序。当我从一个页面导航到另一个页面时，我需要更改屏幕方向。谁能告诉它如何通过 java script 或 jquery 来完成？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:56:07.973

你可以试试这个：

```
$(window).resize(function() {
    var height = $(window).height();
    var width = $(window).width();

    if (width > height) {
        // Landscape
        $("#mode").text("LANDSCAPE");
    } else {
        // Portrait
        $("#mode").text("PORTRAIT");
    }

}); 
```

另一个`window.orientation`返回`0`的id`90`或`-90`where：

*   `0`代表：人像模式

*   `90`代表：横向模式，屏幕向左转

*   `-90`代表：横向模式，屏幕向右转

    ```
     window.onorientationchange = function() 
    {
    var orientation = window.orientation;
    switch(orientation) {
        case 0:
            //Top side up.
            break; 

        case -90:
            //Left side up (turned 90 degrees to the right)
            break;

        case 90: 
            //Right side up (turned 90 degrees to the left)
            break;
      }
    } 
    ```

你还可以看到

[使用 JavaScript 在浏览器中检测 Android 手机的旋转以](https://stackoverflow.com/questions/1649086/detect-rotation-of-android-phone-in-the-browser-with-javascript)获取信息。

# c# - Parallel.For... 的 5 倍性能在双核上？

> ID：11572635
> 
> 赞同：7
> 
> 时间：2012-07-20T03:52:50.277
> 
> 标签：c#, multithreading, optimization, task-parallel-library

当我遇到一个有趣的结果时，我正在做一些有趣的实验计算：

```
Completed 1024x1024 pixels with 700 points in...
For Loop (Inline): 19636ms
For Loop: 12612ms
Parallel.For Loop: 3835ms 
```

这不是我所期望的。

系统：Windows 7 64、i3 2120【双核、4线程】、Visual Studio 2010。

构建：优化开启，发布模式 [无调试器]，32 位。

其次是令人失望的 64 位性能。虽然它在比率方面更符合我的预期，但它通过全面减慢来实现这一点。

```
Completed 1024x1024 pixels with 700 points in...
For Loop (Inline): 23409ms
For Loop: 24373ms
Parallel.For Loop: 6839ms 
```

计算很简单：对于索引 x 和 y，找到最接近的 Vector3 并将其存储在二维数组中。

如果你敢的话，这个问题是试图解释为什么内联 for 循环如此缓慢。解释 64 位版本缺乏性能的奖励积分。

```
using System;
using System.Diagnostics;
using System.Threading.Tasks;

namespace TextureFromPoints
{
    class Program
    {
        const int numPoints = 700;
        const int textureSize = 1024;

        static Random rnd = new Random();

        static void Main(string[] args)
        {
            while (true)
            {
                Console.WriteLine("Starting");
                Console.WriteLine();

                var pointCloud = new Vector3[numPoints];

                for (int i = 0; i < numPoints; i++)
                    pointCloud[i] = new Vector3(textureSize);

                var result1 = new Vector3[textureSize, textureSize];
                var result2 = new Vector3[textureSize, textureSize];
                var result3 = new Vector3[textureSize, textureSize];

                var sw1 = Stopwatch.StartNew();
                for (int x = 0; x < textureSize; x++)
                    for (int y = 0; y < textureSize; y++)
                    {
                        var targetPos = new Vector3(x, y, 0);
                        var nearestV3 = pointCloud[0];
                        var nearestV3Distance = nearestV3.DistanceToPoint(targetPos);

                        for (int i = 1; i < numPoints; i++)
                        {
                            var currentV3 = pointCloud[i];
                            var currentV3Distance = currentV3.DistanceToPoint(targetPos);
                            if (currentV3Distance < nearestV3Distance)
                            {
                                nearestV3 = currentV3;
                                nearestV3Distance = currentV3Distance;
                            }
                        }
                        result1[x, y] = nearestV3;
                    }
                sw1.Stop();

                var sw2 = Stopwatch.StartNew();
                for (int x = 0; x < textureSize; x++)
                    for (int y = 0; y < textureSize; y++)
                        Computation(pointCloud, result2, x, y);
                sw2.Stop();

                var sw3 = Stopwatch.StartNew();

                Parallel.For(0, textureSize, x =>
                {
                    for (int y = 0; y < textureSize; y++)
                        Computation(pointCloud, result3, x, y);
                });
                sw3.Stop();

                Console.WriteLine("Completed {0}x{0} pixels with {1} points in...", textureSize, numPoints);
                Console.WriteLine("{0}: {1}ms", "For Loop (Inline)", sw1.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "For Loop", sw2.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "Parallel.For Loop", sw3.ElapsedMilliseconds);
                Console.WriteLine();
                Console.Write("Verifying Data: ");
                Console.WriteLine(CheckResults(result1, result2) && CheckResults(result1, result3) ? "Valid" : "Error");
                Console.WriteLine(); Console.WriteLine();
                Console.ReadLine();
            }
        }

        private static bool CheckResults(Vector3[,] lhs, Vector3[,] rhs)
        {
            for (int x = 0; x < textureSize; x++)
                for (int y = 0; y < textureSize; y++)
                    if (!lhs[x, y].Equals(rhs[x, y]))
                        return false;
            return true;
        }

        private static void Computation(Vector3[] pointCloud, Vector3[,] result, int x, int y)
        {
            var targetPos = new Vector3(x, y, 0);
            var nearestV3 = pointCloud[0];
            var nearestV3Distance = nearestV3.DistanceToPoint(targetPos);

            for (int i = 1; i < numPoints; i++)
            {
                var currentV3 = pointCloud[i];
                var currentV3Distance = currentV3.DistanceToPoint(targetPos);
                if (currentV3Distance < nearestV3Distance)
                {
                    nearestV3 = currentV3;
                    nearestV3Distance = currentV3Distance;
                }
            }
            result[x, y] = nearestV3;
        }

        struct Vector3
        {
            public float x;
            public float y;
            public float z;

            public Vector3(float x, float y, float z)
            {
                this.x = x;
                this.y = y;
                this.z = z;
            }
            public Vector3(float randomDistance)
            {
                this.x = (float)rnd.NextDouble() * randomDistance;
                this.y = (float)rnd.NextDouble() * randomDistance;
                this.z = (float)rnd.NextDouble() * randomDistance;
            }

            public static Vector3 operator -(Vector3 a, Vector3 b)
            {
                return new Vector3(a.x - b.x, a.y - b.y, a.z - b.z);
            }

            public float sqrMagnitude()
            {
                return x * x + y * y + z * z;
            }

            public float DistanceToPoint(Vector3 point)
            {
                return (this - point).sqrMagnitude();
            }
        }
    }
} 
```

更新：感谢**Drew Marsh**的努力，我们现在有了这个超级优化的版本，它内联了所有 V3 操作。

```
using System;
using System.Diagnostics;
using System.Threading.Tasks;

namespace TextureFromPoints
{
    class RevisedProgram
    {
        const int numPoints = 700;
        const int textureSize = 1024;

        static Random rnd = new Random();

        static void Main(string[] args)
        {
            while (true)
            {
                Console.WriteLine("Starting REVISED");
                Console.WriteLine();

                var pointCloud = new Vector3[numPoints];

                for (int i = 0; i < numPoints; i++)
                    pointCloud[i] = new Vector3(textureSize);

                var result1 = new Vector3[textureSize, textureSize];
                var result2 = new Vector3[textureSize, textureSize];
                var result3 = new Vector3[textureSize, textureSize];

                var sw1 = Inline(pointCloud, result1);

                var sw2 = NotInline(pointCloud, result2);

                var sw3 = Parallelized(pointCloud, result3);

                Console.WriteLine("Completed {0}x{0} pixels with {1} points in...", textureSize, numPoints);
                Console.WriteLine("{0}: {1}ms", "For Loop (Inline)", sw1.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "For Loop", sw2.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "Parallel.For Loop", sw3.ElapsedMilliseconds);
                Console.WriteLine();
                Console.Write("Verifying Data: ");
                Console.WriteLine(CheckResults(result1, result2) && CheckResults(result1, result3) ? "Valid" : "Error");
                Console.WriteLine();
                Console.WriteLine();
                Console.ReadLine();
            }
        }

        private static Stopwatch Parallelized(Vector3[] pointCloud, Vector3[,] result3)
        {
            var sw3 = Stopwatch.StartNew();

            Parallel.For(0, textureSize, x =>
            {
                for (int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result3, x, y);
            });
            sw3.Stop();
            return sw3;
        }

        private static Stopwatch NotInline(Vector3[] pointCloud, Vector3[,] result2)
        {
            var sw2 = Stopwatch.StartNew();
            for (int x = 0; x < textureSize; x++)
                for (int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result2, x, y);
            sw2.Stop();
            return sw2;
        }

        private static Stopwatch Inline(Vector3[] pointCloud, Vector3[,] result1)
        {
            var sw1 = Stopwatch.StartNew();
            for (int x = 0; x < textureSize; x++)
                for (int y = 0; y < textureSize; y++)
                {
                    var targetPos = new Vector3(x, y, 0);
                    var nearestV3 = pointCloud[0];
                    Vector3 temp1 = new Vector3(nearestV3.x - targetPos.x, nearestV3.y - targetPos.y, nearestV3.z - targetPos.z);
                    var nearestV3Distance = temp1.x * temp1.x + temp1.y * temp1.y + temp1.z * temp1.z;

                    for (int i = 1; i < numPoints; i++)
                    {
                        var currentV3 = pointCloud[i];
                        Vector3 temp2 = new Vector3(currentV3.x - targetPos.x, currentV3.y - targetPos.y, currentV3.z - targetPos.z);
                        var currentV3Distance = temp2.x * temp2.x + temp2.y * temp2.y + temp2.z * temp2.z;
                        if (currentV3Distance < nearestV3Distance)
                        {
                            nearestV3 = currentV3;
                            nearestV3Distance = currentV3Distance;
                        }
                    }
                    result1[x, y] = nearestV3;
                }
            sw1.Stop();
            return sw1;
        }

        private static bool CheckResults(Vector3[,] lhs, Vector3[,] rhs)
        {
            for (int x = 0; x < textureSize; x++)
                for (int y = 0; y < textureSize; y++)
                    if (!lhs[x, y].Equals(rhs[x, y]))
                        return false;
            return true;
        }

        private static void Computation(Vector3[] pointCloud, Vector3[,] result, int x, int y)
        {
            var targetPos = new Vector3(x, y, 0);
            var nearestV3 = pointCloud[0];
            Vector3 temp1 = new Vector3(nearestV3.x - targetPos.x, nearestV3.y - targetPos.y, nearestV3.z - targetPos.z);

            var nearestV3Distance = temp1.x * temp1.x + temp1.y * temp1.y + temp1.z * temp1.z;

            for (int i = 1; i < numPoints; i++)
            {
                var currentV3 = pointCloud[i];
                Vector3 temp2 = new Vector3(currentV3.x - targetPos.x, currentV3.y - targetPos.y, currentV3.z - targetPos.z);
                var currentV3Distance = temp2.x * temp2.x + temp2.y * temp2.y + temp2.z * temp2.z;
                if (currentV3Distance < nearestV3Distance)
                {
                    nearestV3 = currentV3;
                    nearestV3Distance = currentV3Distance;
                }
            }
            result[x, y] = nearestV3;
        }

        struct Vector3
        {
            public float x;
            public float y;
            public float z;

            public Vector3(float x, float y, float z)
            {
                this.x = x;
                this.y = y;
                this.z = z;
            }
            public Vector3(float randomDistance)
            {
                this.x = (float)rnd.NextDouble() * randomDistance;
                this.y = (float)rnd.NextDouble() * randomDistance;
                this.z = (float)rnd.NextDouble() * randomDistance;
            }
        }
    }
} 
```

它给出了以下结果：

x86

```
Completed 1024x1024 pixels with 700 points in...
For Loop (Inline): 3820ms
For Loop: 3962ms
Parallel.For Loop: 1681ms 
```

x64

```
Completed 1024x1024 pixels with 700 points in...
For Loop (Inline): 10978ms
For Loop: 10924ms
Parallel.For Loop: 3073ms 
```

所以好消息是我们可以大大提高这段代码的性能——并且让单线程版本的运行速度与它的并行表亲保持一致。

坏消息是这意味着完全放弃 x64 并手动内联所有数学。

在这个阶段，我对编译器的性能感到非常失望——我希望它们会好得多。

**结论**

这是令人沮丧和悲伤的......虽然我们真的不知道为什么我们可以对它是由愚蠢的编译器引起的做出有根据的猜测。只需将编译器从 x64 更改为 x86 并进行一些手动内联，24 秒到 3.8 秒并不是我所期望的。然而，我已经完成了我正在编写的概念证明，并且由于一个简单的空间散列，我可以在 0.7 秒内计算一个 1024 x 1024 的图像，其中包含 70,000 个“点”——比我原来的 x64 场景快约 340000%，并且没有螺纹或内衬。因此，我已经接受了一个答案——迫切需要已经消失了，尽管我仍在研究这个问题。

该代码可[在此处](http://pastebin.com/dACaZ8dE)和[此处](http://pastebin.com/KWkfDmVT)获得- 它会生成一个很好的 Voronoi 图作为副作用：P

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T05:27:40.863

**来自 8 核 i7、Win7、x64 的所有数据**

令人惊讶的是，您肯定会获得 5 倍。正如你所写的，这个测试的一个问题是你把所有三种方法都放在你的 Main 方法中，这迫使编译器必须创建 gobblygook 并保持同步以满足 in 中使用的闭包的`Parallel.For`需求内联方法的方式。如果您按以下方式分解工作，您将看到所有三种实现的性能明显更快......至少对于 x86：

**x86 之前：**

```
For Loop (Inline): 24313ms 
For Loop: 25236ms 
Parallel.For Loop: 3840ms 
```

**x86 之后：**

```
For Loop (Inline): 13007ms
For Loop: 13013ms
Parallel.For Loop: 2208ms 
```

因此，查看我的 x86 Parallel.For 结果，您会看到它的扩展速度约为 5.9 倍，并且每个版本在隔离时都快得多。

接下来，有趣的是，在进行同样的更改之后，x64 绝对没有任何收益。事实上，在 3 次测试中的 2 次测试中，每次运行的结果都略高一点。

**x64 之前**

```
For Loop (Inline): 24222ms
For Loop: 25197ms
Parallel.For Loop: 3810ms 
```

**x64 之后**

```
For Loop (Inline): 25302ms
For Loop: 25209ms
Parallel.For Loop: 3821ms 
```

我没有直接的答案为什么 x64 会如此糟糕，除了人们一直想出这样的代码，这使得 x64 JIT 看起来很糟糕，所以也许其他人可以插话。

也就是说，在这样的实现中，您可能还需要考虑另一件事：缓存行失效。[这里有一篇很棒的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc872851.aspx)由@StephenToub 撰写，解释了这一切。TL;DR; 就是这样，因为您的所有数据都存储在一个数组中并且存在差异。具有不同本地 (L2) 缓存的内核将修改该阵列的部分内容，以便将数据与与其重叠的其他内核同步。如果部分差异。正在处理的内核太靠近了，您最终会得到很多这样的同步，这会影响您的并行收益。这篇文章展示了一种技术，您实际上在工作数组中分配了足够的额外空间，足以分隔包含您将要处理的数据的实际部分，这样当这些核心处理数据时，它们不必使另一个无效核心。for 循环，而不是更接近 8 倍。我敢打赌，如果您努力解决任何缓存行失效问题，您可以再从中挤出 10% 以上。请记住，在设置和协调并行工作时总会有一些开销，因此您永远不会得到 100% 的完美。

这是您的程序的修订版本，每种方法都分解为单独的方法：

```
using System;
using System.Diagnostics;
using System.Threading.Tasks;

namespace TextureFromPoints
{
    class RevisedProgram
    {
        const int numPoints = 700;
        const int textureSize = 1024;

        static Random rnd = new Random();

        static void Main(string[] args)
        {
            while(true)
            {
                Console.WriteLine("Starting REVISED");
                Console.WriteLine();

                var pointCloud = new Vector3[numPoints];

                for(int i = 0; i < numPoints; i++)
                    pointCloud[i] = new Vector3(textureSize);

                var result1 = new Vector3[textureSize, textureSize];
                var result2 = new Vector3[textureSize, textureSize];
                var result3 = new Vector3[textureSize, textureSize];

                var sw1 = Inline(pointCloud, result1);

                var sw2 = NotInline(pointCloud, result2);

                var sw3 = Parallelized(pointCloud, result3);

                Console.WriteLine("Completed {0}x{0} pixels with {1} points in...", textureSize, numPoints);
                Console.WriteLine("{0}: {1}ms", "For Loop (Inline)", sw1.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "For Loop", sw2.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "Parallel.For Loop", sw3.ElapsedMilliseconds);
                Console.WriteLine();
                Console.Write("Verifying Data: ");
                Console.WriteLine(CheckResults(result1, result2) && CheckResults(result1, result3) ? "Valid" : "Error");
                Console.WriteLine();
                Console.WriteLine();
                Console.ReadLine();
            }
        }

        private static Stopwatch Parallelized(Vector3[] pointCloud, Vector3[,] result3)
        {
            var sw3 = Stopwatch.StartNew();

            Parallel.For(0, textureSize, x =>
            {
                for(int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result3, x, y);
            });
            sw3.Stop();
            return sw3;
        }

        private static Stopwatch NotInline(Vector3[] pointCloud, Vector3[,] result2)
        {
            var sw2 = Stopwatch.StartNew();
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result2, x, y);
            sw2.Stop();
            return sw2;
        }

        private static Stopwatch Inline(Vector3[] pointCloud, Vector3[,] result1)
        {
            var sw1 = Stopwatch.StartNew();
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                {
                    var targetPos = new Vector3(x, y, 0);
                    var nearestV3 = pointCloud[0];
                    var nearestV3Distance = nearestV3.DistanceToPoint(targetPos);

                    for(int i = 1; i < numPoints; i++)
                    {
                        var currentV3 = pointCloud[i];
                        var currentV3Distance = currentV3.DistanceToPoint(targetPos);
                        if(currentV3Distance < nearestV3Distance)
                        {
                            nearestV3 = currentV3;
                            nearestV3Distance = currentV3Distance;
                        }
                    }
                    result1[x, y] = nearestV3;
                }
            sw1.Stop();
            return sw1;
        }

        private static bool CheckResults(Vector3[,] lhs, Vector3[,] rhs)
        {
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                    if(!lhs[x, y].Equals(rhs[x, y]))
                        return false;
            return true;
        }

        private static void Computation(Vector3[] pointCloud, Vector3[,] result, int x, int y)
        {
            var targetPos = new Vector3(x, y, 0);
            var nearestV3 = pointCloud[0];
            var nearestV3Distance = nearestV3.DistanceToPoint(targetPos);

            for(int i = 1; i < numPoints; i++)
            {
                var currentV3 = pointCloud[i];
                var currentV3Distance = currentV3.DistanceToPoint(targetPos);
                if(currentV3Distance < nearestV3Distance)
                {
                    nearestV3 = currentV3;
                    nearestV3Distance = currentV3Distance;
                }
            }
            result[x, y] = nearestV3;
        }

        struct Vector3
        {
            public float x;
            public float y;
            public float z;

            public Vector3(float x, float y, float z)
            {
                this.x = x;
                this.y = y;
                this.z = z;
            }
            public Vector3(float randomDistance)
            {
                this.x = (float)rnd.NextDouble() * randomDistance;
                this.y = (float)rnd.NextDouble() * randomDistance;
                this.z = (float)rnd.NextDouble() * randomDistance;
            }

            public static Vector3 operator -(Vector3 a, Vector3 b)
            {
                return new Vector3(a.x - b.x, a.y - b.y, a.z - b.z);
            }

            public float sqrMagnitude()
            {
                return x * x + y * y + z * z;
            }

            public float DistanceToPoint(Vector3 point)
            {
                return (this - point).sqrMagnitude();
            }
        }
    }
} 
```

## 更新：

根据冯元指出的 x64 JIT 未内联的方法，您可以更改程序以内联计算，并从 x64 版本中获得比 x86 版本更好的性能。这显然很糟糕，但这是我以前见过 x64 JIT 破坏的那种东西。这是新的数字：

**内联 x64 后：**

```
For Loop (Inline): 19032ms
For Loop: 19209ms
Parallel.For Loop: 3015ms 
```

代码的内联版本：

```
using System;
using System.Diagnostics;
using System.Threading.Tasks;

namespace TextureFromPoints
{
    class RevisedProgram
    {
        const int numPoints = 700;
        const int textureSize = 1024;

        static Random rnd = new Random();

        static void Main(string[] args)
        {
            while(true)
            {
                Console.WriteLine("Starting REVISED");
                Console.WriteLine();

                var pointCloud = new Vector3[numPoints];

                for(int i = 0; i < numPoints; i++)
                    pointCloud[i] = new Vector3(textureSize);

                var result1 = new Vector3[textureSize, textureSize];
                var result2 = new Vector3[textureSize, textureSize];
                var result3 = new Vector3[textureSize, textureSize];

                var sw1 = Inline(pointCloud, result1);

                var sw2 = NotInline(pointCloud, result2);

                var sw3 = Parallelized(pointCloud, result3);

                Console.WriteLine("Completed {0}x{0} pixels with {1} points in...", textureSize, numPoints);
                Console.WriteLine("{0}: {1}ms", "For Loop (Inline)", sw1.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "For Loop", sw2.ElapsedMilliseconds);
                Console.WriteLine("{0}: {1}ms", "Parallel.For Loop", sw3.ElapsedMilliseconds);
                Console.WriteLine();
                Console.Write("Verifying Data: ");
                Console.WriteLine(CheckResults(result1, result2) && CheckResults(result1, result3) ? "Valid" : "Error");
                Console.WriteLine();
                Console.WriteLine();
                Console.ReadLine();
            }
        }

        private static Stopwatch Parallelized(Vector3[] pointCloud, Vector3[,] result3)
        {
            var sw3 = Stopwatch.StartNew();

            Parallel.For(0, textureSize, x =>
            {
                for(int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result3, x, y);
            });
            sw3.Stop();
            return sw3;
        }

        private static Stopwatch NotInline(Vector3[] pointCloud, Vector3[,] result2)
        {
            var sw2 = Stopwatch.StartNew();
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                    Computation(pointCloud, result2, x, y);
            sw2.Stop();
            return sw2;
        }

        private static Stopwatch Inline(Vector3[] pointCloud, Vector3[,] result1)
        {
            var sw1 = Stopwatch.StartNew();
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                {
                    var targetPos = new Vector3(x, y, 0);
                    var nearestV3 = pointCloud[0];
                    Vector3 temp1 = nearestV3 - targetPos;
                    var nearestV3Distance = temp1.x * temp1.x + temp1.y * temp1.y + temp1.z * temp1.z;

                    for(int i = 1; i < numPoints; i++)
                    {
                        var currentV3 = pointCloud[i];
                        Vector3 temp2 = currentV3 - targetPos;
                        var currentV3Distance = temp2.x * temp2.x + temp2.y * temp2.y + temp2.z * temp2.z;
                        if(currentV3Distance < nearestV3Distance)
                        {
                            nearestV3 = currentV3;
                            nearestV3Distance = currentV3Distance;
                        }
                    }
                    result1[x, y] = nearestV3;
                }
            sw1.Stop();
            return sw1;
        }

        private static bool CheckResults(Vector3[,] lhs, Vector3[,] rhs)
        {
            for(int x = 0; x < textureSize; x++)
                for(int y = 0; y < textureSize; y++)
                    if(!lhs[x, y].Equals(rhs[x, y]))
                        return false;
            return true;
        }

        private static void Computation(Vector3[] pointCloud, Vector3[,] result, int x, int y)
        {
            var targetPos = new Vector3(x, y, 0);
            var nearestV3 = pointCloud[0];
            Vector3 temp1 = nearestV3 - targetPos;
            var nearestV3Distance = temp1.x * temp1.x + temp1.y * temp1.y + temp1.z * temp1.z;

            for(int i = 1; i < numPoints; i++)
            {
                var currentV3 = pointCloud[i];
                Vector3 temp2 = currentV3 - targetPos;
                var currentV3Distance = temp2.x * temp2.x + temp2.y * temp2.y + temp2.z * temp2.z;
                if(currentV3Distance < nearestV3Distance)
                {
                    nearestV3 = currentV3;
                    nearestV3Distance = currentV3Distance;
                }
            }
            result[x, y] = nearestV3;
        }

        private static float DistanceToPoint(Vector3 vector, Vector3 point)
        {
            Vector3 final = vector - point;

            return final.x * final.x + final.y * final.y + final.z * final.z;
        }

        struct Vector3
        {
            public float x;
            public float y;
            public float z;

            public Vector3(float x, float y, float z)
            {
                this.x = x;
                this.y = y;
                this.z = z;
            }
            public Vector3(float randomDistance)
            {
                this.x = (float)rnd.NextDouble() * randomDistance;
                this.y = (float)rnd.NextDouble() * randomDistance;
                this.z = (float)rnd.NextDouble() * randomDistance;
            }

            public static Vector3 operator -(Vector3 a, Vector3 b)
            {
                return new Vector3(a.x - b.x, a.y - b.y, a.z - b.z);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T05:31:27.967

在 64 位系统上，该结构仍然是 12 个字节。

由于 DistanceToPoint 没有内联，64 位速度较慢

```
 2     0 [  0] TextureFromPoints.Program+Vector3.DistanceToPoint(Vector3)
23     0 [  0] Texture!TextureFromPoints.Program+Vector3.DistanceToPoint(Vector3)
22     0 [  1]   Texture!TextureFromPoints.Program+Vector3.op_Subtraction(Vector3, Vector3)
30    22 [  0] Texture!TextureFromPoints.Program+Vector3.DistanceToPoint(Vector3)
10     0 [  1]   Texture!TextureFromPoints.Program+Vector3.sqrMagnitude()
33    32 [  0] Texture!TextureFromPoints.Program+Vector3.DistanceToPoint(Vector3) 
```

在 32 位系统上，只有 sqrtMagnitude 是一个函数调用，DistanceToPoint 和 op_Subtraction 是内联的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T04:34:14.917

~~我怀疑 64 位性能与对齐有关。你的 Vector3 是一个 12 字节的结构；这些将在 32 位环境中占用 12 个字节，但在 64 位环境中它们将被填充到 16 个字节。如果这意味着您的阵列要大 33%，那么您可以预期多出 33% 的缓存未命中。~~

我的怀疑完全不正确。在上面睡觉后，我尝试了以下方法：

```
class Program
{
    private struct V3
    {
        public float x;
        public float y;
        public float z;
    }

    private static unsafe long GetDistance()
    {
        var array = new V3[2];
        fixed (V3* pointerOne = &array[0])
        fixed (V3* pointerTwo = &array[1])
            return ((byte*)pointerTwo - (byte*)pointerOne);
    }

    unsafe static void Main()
    {
        Console.WriteLine(GetDistance());
        Console.WriteLine(sizeof(IntPtr));
    }
} 
```

输出，32 位系统：

```
12
4 
```

输出，64位系统：

```
12
8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T10:41:57.067

我知道要做什么！用 F# 写！

```
Completed 1024x1024 pixels with 700 points in...
Sync: 4393ms
Parallel: 2409ms 
```

它更快，更小......对于我在几个小时内擦掉的东西来说还不错，几乎没有语言知识。

```
module Program

open System
open System.IO
open System.Linq
open System.Threading.Tasks

let main() = 
    let numPoints = 700
    let textureSize = 1024
    let rnd = new Random()

    let randomPos() = (single (rnd.NextDouble()*(double textureSize)))
    let pointCloud = Array.init numPoints (fun _ -> (randomPos(), randomPos()))

    let distanceToPoint(sourceX :int ,sourceY : int, point ) = 
        let x = (single sourceX) - fst point
        let y = (single sourceY) - snd point
        x*x + y*y

    let syncCalc() =
        let resultData = Array2D.zeroCreate<single*single>  textureSize textureSize
        for x in 0..(textureSize-1) do
          for y in 0..(textureSize-1) do
             let mutable closestPoint = pointCloud.[0]
             let mutable closestDistance = distanceToPoint(x,y, closestPoint)
             for p in 1..(numPoints-1) do
                 let point = pointCloud.[p]
                 let distance = distanceToPoint(x,y, closestPoint)
                 if (distance < closestDistance) then
                    closestPoint <- point
                    closestDistance <- distance
             resultData.[x,y] <- closestPoint

    (*let asyncCalc() =
        let resultData = Array2D.zeroCreate<single*single>  textureSize textureSize
        let z = 
            Async.Parallel [ 
                for x in 0..(textureSize-1) -> async { 
                     for y in 0..(textureSize-1) do
                         let closestPoint = ref pointCloud.[0]
                         let closestDistance = ref (distanceToPoint(x,y, !closestPoint))
                         for p in 1..(numPoints-1) do
                             let point = pointCloud.[p]
                             let distance = distanceToPoint(x,y, !closestPoint)
                             if (distance < !closestDistance) then
                                closestPoint := point
                                closestDistance := distance
                         resultData.[x,y] <- !closestPoint
            } ]   |>Async.RunSynchronously 
        resultData*)

    let parallelCalc() =
        let resultData = Array2D.zeroCreate<single*single>  textureSize textureSize
        let z = 
            Parallel.For (0, textureSize,  fun x ->
                     for y in 0..(textureSize-1) do
                         let closestPoint = ref pointCloud.[0]
                         let closestDistance = ref (distanceToPoint(x,y, !closestPoint))
                         for p in 1..(numPoints-1) do
                             let point = pointCloud.[p]
                             let distance = distanceToPoint(x,y, !closestPoint)
                             if (distance < !closestDistance) then
                                closestPoint := point
                                closestDistance := distance
                         resultData.[x,y] <- !closestPoint)
        resultData

    //4.2s
    let sw1 = System.Diagnostics.Stopwatch.StartNew();
    let r1 = syncCalc() 
    sw1.Stop()

    //Slow!
    //let sw2 = System.Diagnostics.Stopwatch.StartNew();
    //let r2 = asyncCalc()      
    //sw2.Stop()

    //2.25s
    let sw3 = System.Diagnostics.Stopwatch.StartNew();
    let r3 = parallelCalc() 
    sw3.Stop()

    Console.WriteLine("Completed {0}x{0} pixels with {1} points in...", textureSize, numPoints)
    Console.WriteLine("Sync: {0}ms", sw1.ElapsedMilliseconds)
    //Console.WriteLine("ASync: {0}ms", sw2.ElapsedMilliseconds)
    Console.WriteLine("Parallel: {0}ms", sw3.ElapsedMilliseconds)
    Console.ReadLine() |> ignore

while true do main() 
```

# wpf - 在 WPF 中为 FontDialog 设置值

> ID：11572636
> 
> 赞同：1
> 
> 时间：2012-07-20T03:52:54.277
> 
> 标签：wpf, fonts, edit

我正在处理带有文本的 WPF。现在我想使用 FontDialog 编辑文本，但我无法将当前的文本样式设置为 FontDialog，因此每次调用 FontDialog 时文本的样式都会改变。你们能帮帮我吗？

这是我的代码：

```
System.Windows.Forms.FontDialog fontDialog = new System.Windows.Forms.FontDialog();
        if (fontDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            this.textAnnotation.Font.Size = fontDialog.Font.Size;
            this.textAnnotation.Font.Name = fontDialog.Font.Name;
            this.textAnnotation.Font.Underline = fontDialog.Font.Underline;
            this.textAnnotation.Font.Strikeout = fontDialog.Font.Strikeout;
            this.textAnnotation.Font.Bold = fontDialog.Font.Bold;
            this.textAnnotation.Font.Italic = fontDialog.Font.Italic;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:29:47.153

WPF 中的 Font 对象与 FontDialog 返回的 Windows 窗体中的 Font 对象不同。

1.  Fontsize 不会出错，但 WPF 字体大小与 WinForms 不同。
2.  您将需要使用[FontFamilyConverter](http://msdn.microsoft.com/en-us/library/system.windows.media.fontfamilyconverter.aspx)来设置字体名称。
3.  下划线和删除线是 WPF 中的 TextDecorations
4.  对于字体样式和字体粗细属性，您可以使用条件逻辑来设置属性。

您最好使用 Wpf 原生的东西，因为 Font 对象是不同的。Wpf Text 博客上有一个[示例字体选择器。](http://blogs.msdn.com/b/text/archive/2006/11/01/sample-font-chooser.aspx)我建议调查一下。

像这样的东西：

```
System.Windows.Forms.FontDialog fontDialog = new System.Windows.Forms.FontDialog();
if (fontDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    FontFamilyConverter ffc = new FontFamilyConverter();

    this.textAnnotation.FontSize = fontDialog.Font.Size;
    this.textAnnotation.FontFamily =(FontFamily)ffc.ConvertFromString(fontDialog.Font.Name);

    if (fontDialog.Font.Bold)
        textAnnotation.FontWeight = FontWeights.Bold;
    else
        textAnnotation.FontWeight = FontWeights.Normal;

    if (fontDialog.Font.Italic)
        textAnnotation.FontStyle = FontStyles.Italic;
    else
        textAnnotation.FontStyle = FontStyles.Normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T19:42:15.047

您可以创建一个新的 Font 对象，将您当前的文本样式作为参数传递。这是你可以做到的：

```
 var fontDialog = new FontDialog();
        fontDialog.Font = new Font(textInfo.FontFamily, textInfo.FontSize);

        if (fontDialog.ShowDialog() == DialogResult.OK)
        {
            var selectedFont = fontDialog.Font;
            textInfo.FontSize = selectedFont.Size;
            textInfo.FontFamily = selectedFont.FontFamily.Name;
            textInfo.FontWeight = selectedFont.Bold ? "Bold" : "Regular";
            textInfo.FontStyle = selectedFont.Italic ? "Italic" : "Normal";            
        } 
```

# html - 如何让加号在 IE 中正确显示？

> ID：11572637
> 
> 赞同：1
> 
> 时间：2012-07-20T03:53:30.197
> 
> 标签：html, internet-explorer

我正在开发一个需要显示`+`（加号）符号的网站。在所有其他浏览器上，编码`&plus;`似乎显示正常。

如何让加号在 IE 中正确显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T04:19:12.647

看看[这个网站](http://www.ascii.cl/htmlcodes.htm "本站")。它有一个很好的 HTML 代码列表

`&#43;`应该做的伎俩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T04:38:06.927

键入字符“+”。参考文献中没有魔法`&plus;`，它只是代表常见的“+”字符，相当没有意义。它属于添加的大集合“<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/named-character-references.html#named-character-references” HTML5 草稿中的 rel="nofollow">命名字符引用；大约一年前，草案的这一部分完全没有实现，所以它只被相当新的浏览器版本支持。它可能只是为了 MathML 兼容性而添加的。

“命名字符引用”是根据 Unicode 字符数定义的，因此您始终可以使用类似`&#x2b;`或`&#43;`代替它们的引用（尽管对于此字符，除了字符本身不需要使用任何东西）。

对于无法在大多数键盘上直接键入的字符，这与 无法比较`&times;`，后者是标准的、普遍支持的参考。（但总有一些方法可以直接输入“×”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T03:57:23.773

值得一提的是，现在似乎有一个优秀的 HTML5 文档详细说明了所有这些字符实体，位于[http://dev.w3.org/html5/html-author/charref](http://dev.w3.org/html5/html-author/charref)。

然而，特别是关于`&plus;`，使用命名实体并没有多大意义，因为它已经是标准 7 位 ASCII 的一部分（是`&#x0002B;`和`&#43;`），因此无论编码如何，字符都是相同的——无论是在 DOS、Windows、Unix 还是 UTF-8 中，因此在前面使用除直加号之外的任何东西通常没有多大意义（对于其他东西来说不是这样`&mdash;`，它至少需要一个 8 -bit 编码，因此表示为纯文本不太安全，具体取决于环境）。

# delphi - 如何使用 Windows API 枚举所有已安装的 USB 调制解调器

> ID：11572638
> 
> 赞同：3
> 
> 时间：2012-07-20T03:53:54.793
> 
> 标签：delphi, windows-7, usb, 32-bit, modem

我买了一个**中兴 MF190** USB 调制解调器并开始使用它。

到目前为止，我已经设法使用*TurboPowers的免费***AsyncPro**组件以编程方式将短信发送到另一台移动设备。

 *我想知道是否有一种方法可以检索**所有已安装调制解调器的列表**以及它们连接的串行 COM 端口（希望具有其他有价值的功能）。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T04:25:45.020

要列出已安装的调制解调器，您可以使用[`Win32_POTSModem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394360%28v=vs.85%29.aspx)WMI 类

检查此示例代码。

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

procedure  GetWin32_POTSModemInfo;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM Win32_POTSModem','WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    Writeln(Format('AttachedTo      %s',[String(FWbemObject.AttachedTo)]));// String
    Writeln(Format('DeviceID        %s',[String(FWbemObject.DeviceID)]));// String
    Writeln(Format('Model           %s',[String(FWbemObject.Model)]));// String
    Writeln(Format('Name            %s',[String(FWbemObject.Name)]));// String
    Writeln(Format('PortSubClass    %s',[String(FWbemObject.PortSubClass)]));// String
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetWin32_POTSModemInfo;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode])); 
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;      
end. 
```*

# javascript - 了解基本的 jQuery 结构

> ID：11572640
> 
> 赞同：2
> 
> 时间：2012-07-20T03:54:13.950
> 
> 标签：javascript, jquery, jquery-plugins

我正在学习 jQuery，并试图理解以下代码结构。

```
if(jQuery) (function($){
    $.extend($.fn, {
        MyPlugin: function(a, b) {
        ....        
        }
    });
})(jQuery); 
```

据我所知，这首先检查 jQuery 对象是否存在。如果是，它定义一个内联函数，该函数使用'fn' 属性扩展jQuery 对象。

我已经在其他几个地方看到过这个问题，[例如在这里](https://stackoverflow.com/questions/6576498/understanding-jquery-plugin-development-pattern)，但我不理解的点还没有得到解决。我在哪里感到困惑......

- 为什么将特殊的 jquery "$" 对象传递给初始函数？

- 为什么内联函数传递了 jQuery 对象（在最后一行）？即：（函数（$）{...}）（jQuery）；

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:58:41.050

# 简单解释

它只是创建一个闭包，您可以在其中引用`jQuery`with `$`，即使它处于[noConflict 模式](http://api.jquery.com/jQuery.noConflict/)。

在 jSang 的回答 (+1) 的[插件创作](http://docs.jquery.com/Plugins/Authoring)中也有解释。

从技术上讲，它只是定义了一个匿名函数，该函数接受一个被调用的参数`$`并立即将其`jQuery`作为唯一参数传递，因此`$`用作`jQuery`此函数范围内的别名 - 请注意，`$`在此闭包内无法访问全局范围内的 。

这意味着，如果您`$`在全局范围内使用 Prototype，您将无法`$`在闭包内访问 Prototype using，因为`$`引用 jQuery 的本地范围优先。

当然，如果你需要在你的闭包中使用另一个库的方法，你可以使用 2 个参数来定义它：并假设另一个库正在使用命名空间来`(function($j, $p) {`调用它。或者更简单地说，将闭包的局部作用域 var 别名为与其他库的全局作用域 var: 不同的别名，这意味着全局仍然可以在函数作用域内访问。请注意，后一种效果可能是不可取的，因为除非您在文档中明确写入，否则您无法完全确定用户分配的内容。我猜需要多个库的插件有点离题，所以让我们把它留在那里。`(jQuery, $)``$``(function($j) {``$``$`

* * *

# 稍微详细一点

[noConflict 文档](http://api.jquery.com/jQuery.noConflict/)页面中的一个实际关闭示例：

```
jQuery.noConflict();
(function($) { 
  $(function() {
    // more code using $ as alias to jQuery
  });
})(jQuery); 
```

该闭包在其范围内具有别名`jQuery`，例如，如果*您的用户*拥有 Prototype 或其他使用全局命名空间的库`$`，则非常有用。这使您的插件更加坚固且不易出错。*`$`*

 ****无论 jQuery 是否控制 $ 变量，都可以使用闭包，因此它是插件创作的理想选择。***

想象一下，如果您的一位最终用户在 noConflict 模式下使用 jQuery 并使用`$`命名空间进行原型制作，并且您的插件尝试`$`使用 jQuery 方法进行扩展？混沌与小马！

当然，您可以跳过闭包并将所有内容替换`$`为`jQuery`，但这会使您的代码更长，并且对许多开发人员来说可读性更低。

另外，[JavaScript 闭包是如何工作的？](https://stackoverflow.com/q/111102/1331430)如果您在理解闭包时遇到困难，会有很多有用的答案，即使这个问题不需要对闭包有太多深入的了解。`:)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T04:01:36.180

我会尽力回答这些问题。我在 iPad 上，所以如果我遗漏了一些技术细节，请耐心等待。这些点有点简化，但它们有助于描述正在发生的事情:)

*   $ 被传入是因为 $ 可能被覆盖以表示其他含义。jQuery 也可以处于 noCinflict 模式。
*   (jQuery) 正在做的是立即调用已定义的内联函数。这被称为自执行功能。虽然不正确（它不会自行执行，但我们会这样做），但这就是它的名称。它将 jQuery 传递给函数，所以我们有 $ 的值。正如在另一个答案中提到的，这会创建一个闭包。我建议谷歌搜索“JavaScript 闭包”。你会发现一些非常有价值的信息:)

希望有帮助:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T04:26:58.980

您正在寻找的是使用新插件“您正在扩展**$.fn**的部分”扩展 jQuery 。它被包裹在一个闭包块中。

```
(function($){
//do sth
})(jQuery); 
```

上面的代码是你必须考虑的部分。要描述它，请参见下面的示例：

**1\. 声明一个函数并调用它**

```
var fn = function(b){ /*do sth like alert(b)*/ };
fn('hiiii'); 
```

**2\. 更短的语法是**

```
(function(b){ /*do sth like alert(b)*/ })('hiiii'); 
```

现在，如果你用**$替换****b**并用**jQuery**传递参数**'hiiii'** ，你最终会得到：

 ******```
(function($){ /*do sth with $*/ })(jQuery); 
```

正如您在第一个示例中看到的那样，**b**是方法参数，而**“hiiii”**是在调用时传递的参数。与上面相同，**$**是方法参数，**jQuery**是调用时传递的参数。

原因是为了避免与其他库发生冲突，因为 $ 已在几乎所有 JS 库中广泛使用。所以你可以在其他库中使用 jQuery。

如果您想了解更多关于如何开发插件的信息，请查看[这篇文章](http://www.tectual.com.au/posts/3/How-To-Make-jQuery-Plugin-jQuery-Plugin-Hello-World-.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T03:56:29.487

这将回答您的问题： [http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)*******

# objective-c - 为我的窗口添加 rootController 和 mainView 时不起作用

> ID：11572643
> 
> 赞同：0
> 
> 时间：2012-07-20T03:54:43.417
> 
> 标签：objective-c, ios

在 self.window 上添加视图和控制器时我遇到了一些问题。这是代码。我的 BookListViewController 类拥有一个名为 BookListView 的视图对象。问题出现在`makeKeyAndVisible`方法上。谢谢。

```
self.bookListViewController = [[bookListViewController alloc] init];
CGRect applicationRect = [[UIScreen mainScreen] applicationFrame];
self.bookListViewController.bookListView = [[[BookListView alloc] initWithFrame:applicationBound] autorelease];
self.window.rootController = self.bookListViewController;
[self.window addSubview:self.bookListViewController.bookListView];
[self.window makeKeyAndVisible]; 
```

# c# - XNA，创建一个带有纹理的 blob'ish 圆圈？

> ID：11572646
> 
> 赞同：-1
> 
> 时间：2012-07-20T03:54:50.537
> 
> 标签：c#, xna, farseer

几天前，我开始尝试使用 Farseer，在我看来，这是一个简单而出色的引擎。

但是，现在我想为我的一个 2D 游戏创建一个像 Circle 这样的 blob，但我似乎不知道如何去做以及如何使用纹理。

我所说的 blob 是指我们可以挤压的网球或压力球。

有人能指出我正确的方向吗？对不起，我没有尝试过任何东西，我绝对不知道从哪里开始。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:52:10.540

查看：[http](http://box2d.org/manual.html) ://box2d.org/manual.html ：与 Farseer 完全一样，他们在文档中推荐它。

我以前从未使用过这个引擎，但我想你需要结合关节、骨骼等来创建一个圆圈。

# php - 在 symfony2 中限制每秒 swiftmailer 电子邮件

> ID：11572649
> 
> 赞同：3
> 
> 时间：2012-07-20T03:55:28.150
> 
> 标签：php, symfony, amazon-web-services, swiftmailer, amazon-ses

我正在设置 SES 以使用 SMTP2。SES 帐户的限制之一（至少默认情况下）是每秒 5 封电子邮件的限制。

我想设置一个假脱机程序，如[本文所述](http://symfony.com/doc/current/cookbook/email/spool.html)。我可以使用 cron 每分钟触发一次，这对我来说很好。不过，我担心的是，大量电子邮件将在此假脱机程序中排队，而我的服务器将尝试一次将它们全部发送。

本文列出了一种限制每次执行发送的电子邮件总数的方法，以及限制执行时间的方法。但这都不适合我的用例：限制每秒发送的电子邮件。

有没有办法限制从后台处理程序发送电子邮件的速率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T04:04:25.740

# 更好的解决方案

使用 Throttler 插件 /fairly/ 很简单。

我将使用 YML，因为这对我来说更理智：

您必须定义一组自定义服务。可能有一个/稍微/更好的方法来做到这一点，但它应该可以工作。

首先，定义你的节流器服务：

```
services:
  my.throttler:
    class: Swift_Plugins_ThrottlerPlugin
    arguments: [300, 2] 
```

现在定义您自己的邮件程序实例：

```
services:
  my.mailer:
    class: Swift_Mailer
    arguments: [@swiftmailer.transport]
    calls:
      - [ registerPlugin, [ @my.throttler ] ] 
```

这应该设置您使用服务 my.mailer 以 5/秒的速度发送受限制的电子邮件。

## 原始答案

您将不得不扩展默认队列处理程序以使其在更高级的分辨率下工作。

Swift_Transport_SpoolTransport 是您要开始查看的地方。

另一种选择是构建一个命令来运行一个守护进程服务，该服务使用参数--time-limit=1 --message-limit=5 运行默认假脱机。每次失败时都会重新运行。

扩展 SpoolTransport 显然是更明智的选择，尽管第二个分辨率通常会更密集地跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-16T12:26:03.870

现在，您可以将配置 antiflood 与 swiftmailer 一起使用（参见[http://symfony.com/doc/current/reference/configuration/swiftmailer.html#antiflood](http://symfony.com/doc/current/reference/configuration/swiftmailer.html#antiflood)）

**例子**

```
swiftmailer:
    transport: "%mailer_transport%"
    host:      "%mailer_host%"
    username:  "%mailer_user%"
    password:  "%mailer_password%"
    spool:
        type: file
        path: '%kernel.root_dir%/spool'
    antiflood:
        threshold:            1
        sleep:                1 
```

这将每秒发送 1 封电子邮件

# java - “这是1/20点。”是什么意思？

> ID：11572661
> 
> 赞同：-5
> 
> 时间：2012-07-20T03:56:53.810
> 
> 标签：java, jakarta-ee, apache-poi, units-of-measurement

这是在apache POI导出Excel文档中，我不知道这句话的意思是“这是在1/20点。”；谁能帮我！我知道这句话中的“1/20th”是长度单位，但我不知道转换这个单位；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T03:59:58.350

引用另一个[答案](https://graphicdesign.stackexchange.com/a/207)：

> 在应用中，1pt 正好等于 1/72 英寸；在传统印刷中，从技术上讲，72pt 是 0.996264 英寸，尽管我认为你会因为四舍五入而被原谅！
> 
> 多少像素 = 1pt 取决于图像的分辨率。如果您的图像是 72ppi（每英寸像素），那么一个点将正好等于一个像素。

# c# - 如何在回调中解析来自 WebRequest 的参数

> ID：11572663
> 
> 赞同：0
> 
> 时间：2012-07-20T03:56:56.760
> 
> 标签：c#, asp.net-mvc

好的，我正在与第三方 Web API 合作，该 API 使用 Web 挂钩在“发生某事”时进行通信。当他们“发生某事”时，他们会向我的回调 URL 发送一个 POST 请求。

我的问题是，一旦我抓住了那个 POST，如何从中提取参数？

我正在尝试构建一个集成测试场景，在其中调用我自己的回调 URL 并附加参数，这样我就不必经历“我怎样才能让他们的回调击中我的开发机器”例程！

这是我试图模拟的方式，但不确定这是对我的回调 URL 的调用可能是什么样子的真实表示：

```
[Test]
public void {
const string localCallbackUrl = "http://localhost/callback/callbackaction";
HttpWebRequest request = WebRequest.Create(localCallbackUrl) as HttpWebRequest;
request.Method = "POST";
request.ContentType = "application/x-www.form-urlencoded";
request.Accept = "application/json";

string parameters = string.Format("param1={0}&param2={1}, "foo", "bar");
byte[] byteArray = Encoding.UTF8.GetBytes(parameters);
request.ContentLength = byteArray.Length;
Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();

var response = request.GetResponse();
} 
```

对“GetResponse()”的调用正在访问我的回调 URL，但我找不到参数在请求对象上的位置。

注意：我构建请求的方式与构建它以调用 API 的方式相同，但不能 100% 确定这是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:47:51.603

只需使用默认模型绑定器来解析参数并将它们作为查询字符串参数传递：

```
[HttpPost]
public ActionResult CallbackAction(string param1, string param2)
{
    ...
} 
```

或者如果您有很多使用包含它们作为属性的视图模型：

```
[HttpPost]
public ActionResult CallbackAction(MyViewModel model)
{
    ...
} 
```

参数的名称必须与 POST 请求正文中发送的名称相匹配（根据您的示例`param1`和`param2`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:38:40.103

通过一点挖掘（睡眠后），我在这里找到了我的问题的答案：[如何使用 HttpWebRequest 将数据发布到 MVC 控制器？](https://stackoverflow.com/questions/6270805/how-do-i-post-data-to-mvc-controller-using-httpwebrequest?rq=1)

显然问题是我如何构建请求。

抱歉，如果有人在回答上浪费了太多时间。

谢谢

# nservicebus - 如何在自己的进程中使用 NServiceBus？

> ID：11572665
> 
> 赞同：0
> 
> 时间：2012-07-20T03:57:08.147
> 
> 标签：nservicebus

我正在尝试在我自己的控制台应用程序中使用 NServiceBus。我遵循了[http://docs.particular.net/nservicebus/hosting/上的文档](http://docs.particular.net/nservicebus/hosting/)

这给我留下了一个由于错误“找不到类型或命名空间名称'NServiceBus'”而无法构建的项目。

然而，这些类型被发现并且是​​完全可浏览的并且具有功能智能。

NServiceBus 文档中缺少哪一部分以允许编译示例？

（我可以发布代码，但关键是文档页面已被遵循但可能不完整。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:09:50.763

修正：我在其他帖子中看到了这个问题，但没有将它与我得到的缺少参考错误联系起来。

NServiceBus 需要完整的 .Net 配置文件，而不是客户端配置文件。

谢谢你的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:52:04.647

在您自己的控制台应用程序中使用 NServiceBus 应该相对简单。查看下载中的一些示例以了解如何执行此操作。以下是 sendonly 示例中的示例：

```
 public class Program
{
    static void Main()
    {
        var bus = Configure.With()
            .UnityBuilder()
            .XmlSerializer()
            .MsmqTransport()
            .UnicastBus()
            .SendOnly();

        bus.Send("SendOnlyDestination@someserver",new TestMessage());

        Console.WriteLine("Message sent to remote endpoint, you can verify this by looking at the outgoing queues in you msmq MMC-snapin"); 
        Console.WriteLine("Press any key to exit");

        Console.ReadKey();
    }
} 
```

# c++ - 使用 vector::push_back 移动

> ID：11572669
> 
> 赞同：54
> 
> 时间：2012-07-20T03:57:34.323
> 
> 标签：c++, c++11

假设我有以下代码：

```
#include <vector>
struct A {
    int a;
    int x;
};
int main() {
    using namespace std;
    A a1;
    A a2;
    vector<A> va;
    va.push_back(a1);
    va.push_back(move(a2));
} 
```

我知道 std::vector 的元素是连续存储的，这与 std::list 不同。上面的代码`a2`被移动了，但真的没有复制`a2`到向量`va`吗？`va.push_back(a2);`和 和有什么不一样`va.push_back(move(a2));`？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-20T04:03:11.263

在您的情况下，没有有效的区别，因为您使用的是编译器提供的复制构造函数。使用可移动构造的对象时，您会看到明显的性能差异，并且需要花费大量精力来复制。在这种情况下， using`push_back(x)`将创建对象的副本，同时`push_back(move(x))`会告诉`push_back()`它可能“窃取” 的内容`x`，从而`x`处于不可用和未定义的状态。

考虑如果您有一个列表向量 ( `std::vector<std::list<int> >`)，并且您想要推送一个包含 100,000 个元素的列表。如果没有`move()`，则将复制整个列表结构和所有 100,000 个元素。使用`move()`，一些指针和其他少量数据会被打乱，仅此而已。这将更快，并且需要更少的整体内存消耗。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-20T03:59:36.927

当你使用`va.push_back(a2)`版本`vector<T>::push_back(const T&)`时会被调用，当你使用`va.push_back(move(a2))`版本时`vector<T>::push_back(T&&)`会被调用......

但是在您的情况下，性能没有区别，因为

> 15 非联合类 X 的隐式定义的复制/移动构造函数执行其基类和成员的成员复制/移动。

第 12.8 段 n3337 草案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T17:10:01.897

我想指出其他答案没有提到的东西；是这`?.push_back(move(?))`将比`?.push_back(?)`你的情况慢（当你有微不足道的可复制对象时），因为移动构造函数需要归零\设置移动的对象，这实际上是你正在编写\复制两个对象。

# macos - 在 OS X 中计算磁盘速度

> ID：11572674
> 
> 赞同：2
> 
> 时间：2012-07-20T03:58:21.187
> 
> 标签：macos, cocoa, disk

是否有任何可可 API 或开源库使我能够检查 OS X 中的磁盘读/写速度？

类似于[这个应用程序](http://itunes.apple.com/au/app/blackmagic-disk-speed-test/id425264550?mt=12)（在 Mac App Store 中）使用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:20:16.870

据我所知，该应用程序写入和读取已知数量的数据（用户从 1、2、3、4 和 5 GB 中选择）并计算所需时间。

我想“实时”读/写时间基于运行平均值：“在最后 5 秒内，我写了 XXX MB”。

我不知道有一个 API 可以自己实现这样的事情，但你可以很容易地做到这一点：生成已知数量的垃圾（例如 500MB 的随机数），将其写入临时文件夹，计时，进行计算，然后清理写入的数据。

# mysql - 无法使用 brew install mysql 安装 MYSQL

> ID：11572675
> 
> 赞同：0
> 
> 时间：2012-07-20T03:58:25.733
> 
> 标签：mysql, ruby

我在使用自制软件安装 MYSQL 时遇到问题

我的系统信息如下。全新安装

MAC OSX 10.7.4 红宝石 1.9.3-p125 XCODE 4.3.3

当我发出命令 > brew install mysql 我收到以下错误

> DBSVR1:~ icareadmin$ brew install mysql ==> 安装 mysql 依赖项：cmake ==> 正在下载 /downloads/project/machomebrew/Bottles/cmake-2.8.8.l
> 
> ################################################# ################ 100.0%
> 
> ==> 倾倒 cmake-2.8.8.lion.bottle.2.tar.gz /usr/local/Library/Homebrew/download_strategy.rb:118：警告：在另一个 chdir 块 /usr/local/Cellar/cmake 期间冲突 chdir /2.8.8: 653 个文件，30M ==> 安装 mysql 依赖项：readline ==> 下载 ftpmirror/readline/readline-6.2.tar.gz 0.0% curl: (52) 来自服务器的空回复尝试镜像... = => 下载 ftp/gnu/readline/readline-6.2.tar.gz
> 
> ################################################# ################ 100.0%
> 
> ==> 下载补丁 0.0% curl：（52）来自服务器的空回复 0.0% curl：（52）来自服务器的空回复 0.0% curl：（52）来自服务器的空回复 0.0% curl：（52）来自服务器的空回复错误: 执行失败：/usr/bin/curl -qf#LA Homebrew\ 0.9.2\ (Ruby\ 1.8.7-357;\ Mac\ OS\ X\ 10.7.4) ftpmirror/readline/readline-6.2-patches /readline62-001 -o 000-homebrew.diff ftpmirror.gnu.org/readline/readline-6.2-patches/readline62-002 -o 001-homebrew.diff ftpmirror.gnu.org/readline/readline-6.2-patches/readline62 -003 -o 002-自制。差异 ftpmirror.gnu.org/readline/readline-6.2-patches/readline62-004 -o 003-homebrew.diff

注意：我省略了错误中的所有超链接，因为我是这里的新用户，我不能发布多个超链接。

如您所见，我得到了类似的东西

curl：（52）来自服务器的空回复

当 brew 试图从 ftpmirror 下载 readline-6.2.tar.gz 时。

我是否可以手动下载这些补丁并在我再次安装时让 brew 识别它？如果是，我应该把所有这些文件放在哪里？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:47:42.150

随着我对该问题的进一步阅读，发现这不是 mysql 问题。它位于从 ftp.gnu.org 安装/下载部分 readline 的某处

通过使用工作链接更改 /usr/local/Library/Formula/ 下的 readline 公式中的链接找到了自己的解决方案（无法发布链接，我是新手）。[找到解决方案后，此解决方法已在此链接](https://github.com/mxcl/homebrew/issues/13459)上备份。据我所知，这仍然是 readline brew 上的一个痛苦问题。

HTH。

# c++ - 除了 setter 和 getter 之外的任何其他方法可以执行相同的功能但更好吗？

> ID：11572676
> 
> 赞同：-1
> 
> 时间：2012-07-20T03:58:31.797
> 
> 标签：c++

```
 class MathOperations{
 public:
 void Message();
 void setSum(int);
 void setSuB(int);
 void setMul(int);
 void setDiv(int);
 void setSqrt(int);
 int getSum();
 int getSub();
 int getMul();
 int getDiv();
 int getSqrt();
private:
int sum, subtract, multiply, divide, sqrt; 
```

有没有更好的方法在课堂上使用 setter 和 getter ？？？如果有请给我一些例子。我只是想多学习一点关于类的知识，所以即使我只是一个初学者，我也试图实现我的知识。我在一本书中读到，使用静态方法和使用关键字 this 更好，但不确定它是如何工作的..任何简单的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:06:03.710

如果这个类只是一堆简单的`setters/getters`我会考虑用公共变量制作一个`struct`（它们几乎与类相同，但在公共变量的情况下我更喜欢命名它`struct`）。但无论如何，如果你的方法是那个简单的编译器可能会`inline`。

还`don't optimize the code until you found a bottleneck`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:06:53.740

```
class MathOperations{
    public:
    void Message();
    void setA(int);
    void setB(int);
    int getA();
    ing getB();
    int getSum();
    int getSub();
    int getMul();
    double getDiv();
    double getSqrt();
    private:
    int a, b; 
```

您不想存储 sum、sub、mul 和 divide 的值，而是要设置 A 和 B，然后计算答案。此外，除非您预期截断，否则除法应返回双精度或浮点数。我的意思是如果你有 getDiv() 返回一个 int 并且 a=1 和 b=2 它将返回 0（1/2 = 0.5 截断为 0），如果你正在寻找一个很好的浮点答案你应该使用双精度或浮点数。

下面是 getDiv() 的示例实现：

```
double MathOperations::getDiv() {
    double tempa = (double)this->a;
    double tempb = (double)this->b;
    return tempa/tempb;
} 
```

就优化当前示例而言，如果您正在执行以下操作：

```
class foo {
    public:
    void setA(int);
    void setB(int);
    int getA();
    int getB();

    private:
    int A,B;
} 
```

您获得的唯一真正开销（假设编译器未优化此代码）是您在获取或设置变量时向堆栈添加函数调用，并在完成时将其弹出并制作要返回的变量副本。这在现代计算机上可以忽略不计。

**编辑：**`double tempa = (double)this->a`这行代码中有很多内容，让我分解并解释一下。

1.  `this->a`指的是类 a 的本地成员，它是一个整数。在此处阅读有关课程的更多信息：[http ://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)
2.  `(double)this->a`对于我们要进行的数学运算，我们希望`this->a`是双精度数，以便在进行除法时得到一个不错的数字，例如 3.141519。为此，我们`cast`将其转换为双精度数，基本上是告诉编译器在将整数存储到 tempa 之前将其转换为内存中的双精度数。在此处阅读有关数据类型的更多信息：[http](http://www.cplusplus.com/doc/tutorial/variables/) ://www.cplusplus.com/doc/tutorial/variables/ 在此处阅读有关类型转换的更多信息：[http ://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)
3.  `double tempa =`在这里，我们将新的 double 值从 2\. 分配给可用于除法的临时值 tempa。

如果您觉得 cplusplus.com 的教程有点难以理解，您可以在[http://www.cprogramming.com/tutorial/c++-tutorial.html](http://www.cprogramming.com/tutorial/c++-tutorial.html)尝试一下，这会更容易阅读。

# types - 在 python 2.7 中使用 try/except 处理异常

> ID：11572677
> 
> 赞同：0
> 
> 时间：2012-07-20T03:58:38.677
> 
> 标签：types, input, error-handling, python-2.7, try-except

我正在尝试异常处理/错误捕获，想知道为什么下面的代码不起作用。我正在使用python 2.7。我了解 和 之间的区别`input()`并`raw_input()`了解在 Python 3.0`raw_input()`中已重命名为。`input()`如果我输入一个整数，那么代码会一直循环，直到我输入一个字符串。输入字符串时，我收到以下错误消息。有没有办法解决这个问题，或者这只是那些 python 怪癖之一？

```
 File "<some_directory_path_goes_here>", line 30, in <module>
    enterAge = input('Enter your age as an integer: ')
  File "<string>", line 1, in <module>
NameError: name '<user_entered_string_goes_here>' is not defined 
```

在 python 2.7 中，在我看来代码应该仍然可以工作。

```
from types import IntType
age = 0
while True:
    enterAge = input('Enter your age as an integer: ')
    try:
        if type(enterAge) is IntType:
            num = enterAge
            age = age + num
            print str(age) + ' is old!'

    except TypeError:
        print 'You did\'t enter an integer'
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:10:13.040

`try`背后的想法`except`是您没有事先检查所有必要条件。在你的情况下，你不需要检查里面的类型`try`。由于该`if`声明，异常不会在应该引发的时候引发。

此外，您绝对应该`raw_input()`在 Python 2 上使用并记住它*总是*返回一个`str`. 可能不同的是`int(enterAge)`：

```
In [1]: int('4')
Out[1]: 4

In [2]: int('4f')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/home/lev/<ipython-input-2-523c771e7a8e> in <module>()
----> 1 int('4f')

ValueError: invalid literal for int() with base 10: '4f' 
```

这是您需要在`try`块中尝试并捕获`ValueError`.

编辑：显然我需要澄清一下答案，所以我将展示我认为代码的外观：

```
age = 0
while True:
    enterAge = raw_input('Enter your age as an integer: ')
    try:
        age += int(enterAge)
        print age, 'is old!'

    except ValueError:
        print "You didn't enter an integer"
        break 
```

# iphone - 如何限制我的 iAd 加载？

> ID：11572681
> 
> 赞同：2
> 
> 时间：2012-07-20T03:59:17.493
> 
> 标签：iphone, ios, iad

我不断收到此错误：

> 错误域 = ADErrorDomain 代码 = 2“操作无法完成。加载节流” UserInfo = 0x6a6bf50 {ADInternalErrorCode = 2，NSLocalizedFailureReason =加载节流}

如何限制我的负载？我正在制作的应用程序相对较小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:36:35.040

这是针对仍在开发中的应用程序吗？Apple 故意向您发送错误以确保您正确处理它们 - 限制加载是这些错误之一。如果你有时得到内容，有时没有，那是正常的。

# hadoop - 从 Hadoop 中的静态 Map 类中调用非静态方法

> ID：11572685
> 
> 赞同：0
> 
> 时间：2012-07-20T03:59:44.323
> 
> 标签：hadoop, distributed-caching, static-classes, non-static

[Yavcular 在 Hadoop 中使用 DistributedCache](http://yaseminavcular.blogspot.kr/2010/11/using-distributed-cache-in-hadoop.html)

在上面的链接中，以一种易于理解的方式描述了如何在 Hadoop 中使用 DistributedCache。但问题是，当我编译代码时，出现以下错误：

```
non-static method loadIdUrlMapping(org.apache.hadoop.mapreduce.Mapper.Context) cannot be referenced from a static context
        loadIdUrlMapping(context); 
```

解决方法是什么？我无法将 Mapper 类更改为非静态，当我将`loadIdUrlMapping`方法签名更改为静态时，我无法访问`idmap`HashSet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:37:30.633

您需要发布您的代码版本以确定，但我想您有一个名为 cacheItemset 的方法，它被定义为静态范围：

```
public static void cacheItemset(Context) {
    loadIdUrlMapping(context);
} 
```

loadUrlMapping 未定义为静态方法，因此您会收到编译错误。

如果您的`ReplacementMapper`类版本在它自己的类文件中，那么您不需要在类声明中使用 static 关键字（仅当 ReplacementMapper 类是另一个类的内部类时才需要）。

# android - 意图过滤器未按预期工作

> ID：11572690
> 
> 赞同：0
> 
> 时间：2012-07-20T04:00:10.787
> 
> 标签：android, android-intent

嗨，我创建了一个 android 项目，我在其中进行了主要活动

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String ss="https://accounts.google.com/o/oauth2/auth?client_id=anonymous&redirect_uri=https://cloudspokeproject.appspot.com/oauth2callback&response_type=code&scope=https://www.googleapis.com/auth/apps.groups.settings  https://apps-apis.google.com/a/feeds/groups/";

            Uri url=Uri.parse(ss);
            Intent in=new Intent(Intent.ACTION_VIEW,url);
            startActivity(in);

    } 
```

然后用代码创建了一个响应活动

```
public class Response extends Activity {

@Override
    public void onCreate(Bundle bundle){
        super.onCreate(bundle);
        TextView text=new TextView(this);
    Uri uri=this.getIntent().getData();
    String code=uri.getQueryParameter("code");
    URL url;
    try {
        url = new URL("https://accounts.google.com/o/oauth2/token");

         String param="code="+code+"&client_id=anonymous&client_secret=anonymous&redirect_uri=https://cloudspokeproject.appspot.com/oauth2callback&grant_type=authorization_code";

         HttpURLConnection connection = 
    (HttpURLConnection)url.openConnection(); 
         connection.setDoOutput(true); 
         connection.setRequestMethod("POST"); 
         connection.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
         connection.getOutputStream().write( param.getBytes() ); 
      InputStream str= connection.getInputStream();
      BufferedReader reader=new BufferedReader(new InputStreamReader(str));
    String l="";
    String l1="";
    while((l=reader.readLine())!=null){
        l1+=l;
    }
        text.setText(l1);
        setContentView(text);

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    }} 
```

这是我的清单文件代码

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
 <activity
     android:name=".Response"
     android:label="Hello World"
     android:exported="false">
     <intent-filter>
          <action android:name="android.intent.action.VIEW"/> 
          <category android:name="android.intent.category.BROWSABLE"/> 
          <category android:name="android.intent.category.DEFAULT"/> 
          <data android:host="cloudspokeproject.appspot.com/oauth2callback" android:scheme="https"/> 
          </intent-filter>
 </activity>

</application> 
```

我正在尝试为应用程序实施谷歌身份验证，主要活动正在打开谷歌登录名，登录后它被重定向到 clouspokeproject.appspot.com/oauth2callback 但是当我在menifest .when url cloudspokeproject 的响应活动中放置了一个意图过滤器。 apspot.com/oauth2callback 在浏览器中被调用然后android应该将它重定向到活动响应。我成功地为twitter和其他几个api实现了oauth但是这次它没有重定向到响应活动任何人都可以告诉我哪里错了。我知道错误很小，请指出我，以便我纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:04:58.493

您正在触发打开浏览器的意图，而不是调用您的响应活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:09:12.623

嗨，回到我的活动意图过滤器应该是这样的

```
<intent-filter>
          <action android:name="android.intent.action.VIEW"/> 
          <category android:name="android.intent.category.BROWSABLE"/> 
          <category android:name="android.intent.category.DEFAULT"/> 
          <data android:host="cloudspokeproject.appspot.com" android:scheme="https"/> 
          </intent-filter> 
```

我必须删除主机属性中的 /oauth2callback，因为它是一个非常罕见的 url，并且在项目中只使用过一次，所以它现在对我来说工作正常。

# python - 按顺序压缩范围

> ID：11572693
> 
> 赞同：1
> 
> 时间：2012-07-20T04:00:38.490
> 
> 标签：python

假设我有这个列表：

```
a = [('student', '100'), ('student', '101'),
     ('student', '102'), ('student', '103'),
     ('student', '104'), ('student', '105'),
     ('student', '106'), ('student', '120'),
     ('student', '121'), ('student', '122'),
     ('student', '123'), ('student', '124'),
     ('teacher', '21'), ( 'teacher', '22'),
     ('teacher', '23'), ('teacher', '24'),
     ('teacher', '25'), ('teacher', '26'),
     ('teacher', '27'), ('teacher', '51'),
     ('teacher', '52'), ('teacher', '53'),
     ('teacher', '60'), ('Zstudent', '55'),
     ('Zstudent', '56'), ('Zstudent', '57'),
     ('Mstudent', '30'), ('Mstudent', '31')] 
```

我怎样才能输出：

```
student 100-106 120-124
teacher 22-27 51-53 60
Zstudent 55-57
Mstudent 30-31 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T04:20:27.593

你可以做：

```
>>> [(i, [int(x[1]) for x in j]) for i,j in 
          itertools.groupby(a, key=operator.itemgetter(0))]
[('student', [100, 101, 102, 103, 104, 105, 106, 120, 121, 122, 123, 124]),
 ('teacher', [21, 22, 23, 24, 25, 26, 27, 51, 52, 53, 60]),
 ('Zstudent', [55, 56, 57]),
 ('Mstudent', [30, 31])] 
```

因此您可以使用结果列表并使用[此配方](http://code.activestate.com/recipes/496682-make-ranges-of-contiguous-numbers-from-a-list-of-i/)或@gnibbler 提供的[漂亮代码创建范围。](https://stackoverflow.com/questions/3429510/pythonic-way-to-convert-a-list-of-integers-into-a-string-of-comma-separated-rang/3430231#3430231)

如果数据未排序，您可以使用基于 dict 的解决方案（或[defauldict](http://docs.python.org/library/collections.html#collections.defaultdict)）：

```
>>> d = {}
>>> for k,v in a:
    d.setdefault(k, []).append(int(v)) 
```

您只会丢失名称的顺序。

# php - 如何从 PHP 调用网站服务？

> ID：11572696
> 
> 赞同：0
> 
> 时间：2012-07-20T04:00:54.513
> 
> 标签：php, web-services, callback, file-get-contents, http-get

我的问题如下，我的服务器上有一个 EmailReports.php，我用它来发送像 EmailReports.php?who=some@gmail.com&what=123456.pdf 这样的邮件

我不能修改 EmailReports.php，因为它属于一个不同的项目，它会立即发送一封电子邮件，并已得到 QA 团队和所有这些东西的批准。

现在，在不同的 LookReports.php 上，我需要提供“将我查看的报告发送给我”之类的服务，只需调用 EmailReports.php 就可以轻松地手动执行，问题是，我如何通过 PHP 代码来完成？所以它会自动调用另一个 PHP。

我试过没有成功：

```
$stuff = http_get("http://...<the url here>"); 
```

和

```
$stuff =  file_get_contents("http://...<the url here>"); 
```

我正在考虑导入 EmailReports.php 但似乎不对，因为没有功能，它会自动发送一封电子邮件。

或者我可以复制 EmailReports.php 代码，但这违反了 QA 政策，因为需要额外的测试。

你能指导我一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T04:05:39.630

您可以使用[Curl](http://php.net/manual/en/book.curl.php)请求从任何网站检索信息 (xml/html/json/etc)。

**什么是卷曲？（简短回答）**

> PHP 有一个非常强大的调用库，专门设计用于安全地从远程站点获取数据。它被称为卷曲。

来源：[PHP、CURL 和你！](http://blog.unitedheroes.net/curl/)

**PHP 中的 Curl 函数示例**

```
/* gets the data from a URL */
function get_data($url)
{
 if(function_exists('curl_init')){
 $ch = curl_init();
 $timeout = 5;
 curl_setopt($ch,CURLOPT_URL,$url);
 curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
 curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
 $data = curl_exec($ch);
 curl_close($ch);
 return $data;
 } else 'curl is not available, please install';
 } 
```

来源：[使用 PHP cURL 下载 URL 的内容](http://davidwalsh.name/download-urls-content-php-curl)

> 或者，您可以做您目前正在做的事情，`file_get_contents`但许多主机不允许这样做。（沃尔什，2007）

**用法**

```
<?php
$mydata = get_data('http://www.google.co.nz');
echo '<pre>';
print_r($mydata); //display the contents in $mydata as preformatted text
echo '</pre>';
?> 
```

尝试使用其他网站对其进行测试，因为在执行 curl 后，通常`google`会返回 a `404 request`（这是意料之中的）。

# java - 在运行时切换片段

> ID：11572704
> 
> 赞同：1
> 
> 时间：2012-07-20T04:02:06.303
> 
> 标签：java, android, android-fragments

我发现这篇文章最有帮助/没有帮助：[在单个活动中的片段之间切换](https://stackoverflow.com/questions/11217551/switching-between-fragments-in-a-single-activity)

我不确定我们是否有同样的问题，这就是为什么我无论如何都要发布我的代码，看看我是否也会以错误的方式解决这个问题。上述解决方案似乎使用一种我认为不需要片段的方法来解决问题。仍然很新，很可能我的逻辑是错误的。无论如何，这是我的问题：

我有一个屏幕出现，它给你两个选择，蓝色药丸或红色药丸（这两个按钮包含在一个片段中）。如果您选择红色药丸，则新片段将现有片段替换为文本“你留在仙境...”，或者如果选择蓝色药丸，则片段将现有片段替换为文本“故事结束...”。

*这只是我现在用来自学片段的例子。*

我有**1 个活动**和**1 个布局**和**3 个片段**。

我的活动：

```
package com.example.learn.fragments;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /* Add a class to handle fragment */
    public static class SSFFragment extends Fragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            View v = inflater.inflate(R.layout.choose_pill_frag, container,
                    false);
            return v;
        }
    }

    public void red(View view) {
        // Change fragment code here?
    }

    public void blue(View view) {
        // Change fragment code here?
    }

} 
```

我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/frag"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.learn.fragments.MainActivity$SSFFragment" />

</RelativeLayout> 
```

起始片段：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:onClick="blue"
        android:src="@drawable/blue" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:onClick="red"
        android:src="@drawable/red" />

</RelativeLayout> 
```

蓝色药丸碎片：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="The story ends, you wake up in your bed and believe whatever you want to believe."
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

红色药丸碎片：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="You stay in Wonderland and I show you how deep the rabbit-hole goes."
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

## 问题

**1：**我应该这样做吗？

**2：**完成此操作的适当代码是什么？片段交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:05:22.117

> 上述解决方案似乎使用一种我认为不需要片段的方法来解决问题。

我相信您发布的链接并没有完全避免碎片。片段可以在 xml 文件中指定（在这种情况下它们是永久的）或在使用 FragmentTransactions 的代码中指定（在这种情况下，您可以添加、删除它们）。

```
public void red(View view) {
    // Change fragment code here?
}

public void blue(View view) {
    // Change fragment code here?
} 
```

我认为您希望此处的 onClickListeners 链接到您的图像按钮。在它们内部，您将调用[FragmentTransaction](http://developer.android.com/guide/components/fragments.html#Transactions)添加/删除/交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:07:12.997

看看这个。

我似乎错误地处理了片段。

[替换片段不起作用/我是否以正确的方式执行此操作？](https://stackoverflow.com/questions/11620855/replacing-fragments-isnt-working-am-i-executing-this-the-proper-way)

# fullcalendar - FullCalendar 月查看事件而不调整日历的单元格大小

> ID：11572706
> 
> 赞同：0
> 
> 时间：2012-07-20T04:02:11.343
> 
> 标签：fullcalendar

FullCalendar 周视图显示事件的方式与月视图事件不同。在不调整日历单元格大小的情况下显示重叠事件。他们有什么方法可以将此应用于月视图事件吗？

我想在不调整月视图中日历单元格大小的情况下显示我的事件。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T15:45:28.393

FullCalendar v2.1.0-beta2`eventLimit`为月视图引入了一个解决此问题的选项。

有关通过解决此问题引入的新选项的粗略文档，[请](https://code.google.com/p/fullcalendar/issues/detail?id=304)参阅[https://github.com/arshaw/fullcalendar/releases/tag/v2.1.0-beta2：https://code.google.com/p/fullcalendar/issues](https://github.com/arshaw/fullcalendar/releases/tag/v2.1.0-beta2) [/detail?id=304](https://code.google.com/p/fullcalendar/issues/detail?id=304)（如 SaschaM78 之前所述）。

我在[http://jsfiddle.net/wijgerden/nv4qkLgt/](http://jsfiddle.net/wijgerden/nv4qkLgt/)准备了一个 JSFiddle，其中包含原始屏幕截图中显示的示例事件。加上 2014 年 2 月 5 日的一些额外事件，以显示以下效果`eventLimit: 5`：5 个事件`m1`...`m5`一次全部可见，而名为`n1`...的 6 个事件`n6`仅部分显示。当您单击“+2 more”链接时，它们都会显示出来。在这种情况下，它们是全天事件，但这也适用于定时事件以及全天和定时事件的组合。

# php - MySQL PHP 更改表，将所有 MEDIUMINT 更改为 INT

> ID：11572709
> 
> 赞同：1
> 
> 时间：2012-07-20T04:02:28.893
> 
> 标签：php, mysql, database

过去，我使用 PHP 脚本来更改所有字段的语言，但我找不到将所有 UNSIGNED MEDIUMINT 切换为 UNSIGNED INT 的任何东西。这可能吗？我应该手动切换它们吗？:o

原来mediumint太小了......所以我必须改变很多领域/：

编辑：感谢您的输入，现在我知道没有简单的自动化方法可以手动完成。如果有自动化的方式，我只是不想浪费时间手动更改 100 多个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:07:07.360

MySQL 没有自动方式来表示“获取所有类型 X 的列并将它们更改为类型 Y”。您可以查询`information_schema`数据库以确定需要更改哪些列，然后您可以`ALTER TABLE`根据该信息构建查询。

具体来说，看一下`information_schema.columns`表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-10T17:16:19.927

您可以使用以下查询来查找`mediumint`特定数据库中的所有列（具有各自的表名），然后迭代结果以生成并`ALTER`以您选择的编程语言执行查询。

```
SELECT 
    table_name, column_name, numeric_precision, column_type
FROM
    information_schema.columns
WHERE
    TABLE_SCHEMA = 'DATABASE_NAME'
        AND data_type = 'mediumint'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:11:39.733

必须在 SQL 中完成，所以如果在你的情况下编写一个脚本来做这件事是有意义的，那就去做吧，但很可能你会想要手动做。

由于您要从描述性较差的数据类型转换为更具描述性的数据类型，所以应该没问题。

使用[ALTER TABLE](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)语法应该可以工作：

```
ALTER TABLE table_name MODIFY column_name INT UNSIGNED 
```

# objective-c - 释放块内的对象

> ID：11572717
> 
> 赞同：1
> 
> 时间：2012-07-20T04:03:09.537
> 
> 标签：objective-c, cocoa, objective-c-blocks

这是关于`__block`用于释放块内的对象；

```
NSString *str = [SomeObject methodName]; // returned object is autoreleased
[str retain];   //retaining the object since its auto released 
```

现在我将`str`在一个块内使用这个对象。在块内我将释放这个对象。我是否需要在前面加上 like `__block NSString *str = ..`，因为我在块内释放它？从规则中我了解到，如果我们想修改块内的对象，我们需要在前面加上`__block`. 但这条规则是否也适用于发布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:04:49.547

要修改的*变量*`__block`需要编号。释放一个对象并不意味着修改一个变量。相反，它意味着向相关对象发送消息。与任何其他消息一样，即使没有限定符，也没有理由不能发送到块内的对象实例。*`release``release``__block`*

 *您应该知道，对于非`__block`限定对象变量，该块将保留该对象。因此，虽然您`release`在块内的显式可能会平衡`retain`外部/在调用块之前，但该对象实际上不会被释放（至少）直到块本身被释放，即使没有其他对象保留它。*

# java - MP3 文件通过 USB 传输到 android

> ID：11572719
> 
> 赞同：0
> 
> 时间：2012-07-20T04:03:29.127
> 
> 标签：java, android, file-transfer

我使用 java 创建了一个 PC 应用程序，我在其中操作 MP3 文件。我现在想通过我的应用程序中的 USB 将这些文件传输到 Android 手机中。

如果有人可以给我写一些关键字，我将非常感激，这样我就可以开始研究了。

到目前为止 - 我遇到了“adb push” - 以及一些无线和蓝牙（与我无关，因为我正在研究 USB） - 我观看了一些 youtube 视频，介绍了它是如何像外部存储器一样手动完成的，你复制并粘贴我认为将音乐文件夹放入android存储卡中。

所以我只是在寻找关键的 API 或其他东西来开始阅读。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:17:02.550

没有`pc - phone`通过 USB 进行通信的 API，您最好的选择是 adb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:21:28.640

我的 Android 配置为像任何其他可移动媒体一样自动挂载。对我来说，放音乐只是在 Linux 上一个简单的*cp命令。*

# ant - IVY 错误：找不到 ivy.xml 文件

> ID：11572720
> 
> 赞同：1
> 
> 时间：2012-07-20T04:03:42.497
> 
> 标签：ant, ivy

我有以下 ant 和 ivy 文件来设置我的项目。我希望常春藤解析文件`D:/workspace/lib/apache/log4j/1.2.16/ivy.xml`以检索 log4j.jar。

但常春藤解析文件`D:/workspace/BuildStudy/ivy.xml`。而我没有`D:/workspace/BuildStudy/ivy.xml file`。有人知道我的 ant 和 ivy 设置文件有什么问题吗？谢谢。

build.xml 文件包含：

```
<project name="BuildStudy" default="main" xmlns:ivy="antlib:org.apache.ivy.ant">    
    <target name="resolve" description="--> retrieve dependencies with ivy">        
      <ivy:retrieve/>
    </target>
</project> 
```

ivysetting.xml 文件包含：

```
<ivysettings>
    <properties file="D:/workspace/BuildStudy/ivysettings-file.properties" />
    <caches  defaultCacheDir="${cache.dir}" />
    <property name="base.dir" value="D:/workspace/lib"/>
    <settings defaultResolver="CRMlocal"/>
    <resolvers>
        <filesystem name="CRMlocal">
            <ivy pattern="${base.dir}/[organisation]/[module]/[revision]/ivy.xml"/>
            <artifact pattern="${base.dir}/[organisation]/[module]/[revision]/[artifact].[ext]"/>
            <artifact pattern="${base.dir}/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"/>
        </filesystem>
    </resolvers>
</ivysettings> 
```

ivysettings-file.properties 文件包含：cache.dir=D:/workspace/BuildStudy/.ivy_cache

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T01:28:27.900

将以下属性添加到您的 build.xml：

```
 <property name="ivy.dep.file" value="PATH TO ivy.xml" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:11:00.300

[ivy.xml](https://ant.apache.org/ivy/history/latest-milestone/ivyfile.html)文件描述了一个工件及其依赖项。

常春藤文件通常在两个位置使用/存在：

1.  一个存储库（它描述了例如 log4j 工件）
2.  一个项目（它描述您的项目并将 ivy.xml 列为依赖项）

您已经迈出了第一步并创建了一个本地存储库，您可以使用文件系统解析器来[解析](https://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)它。

现在您需要为您的项目声明一个 ivy.xml，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:noNamespaceSchemaLocation=
                   "http://ant.apache.org/ivy/schemas/ivy.xsd">
<info organisation="myorg" module="BuildStudy"/>
<configurations>
    <conf name="compile" visibility="public" />
</configurations>
<publications>
   <artifact name="BuildStudy" type="jar"  conf="compile" ext="jar"/>
</publications>
<dependencies>>
    <dependency org="log4j" name="log4j" rev="1.2.14" conf="compile->*"/>
</ivy-module> 
```

这将使用以下详细信息描述您的项目：

*   这个项目将构建并提供一个工件 BuildStudy.jar
*   这个项目需要log4j编译

# php - Joomla 2.5 上的自定义按钮

> ID：11572722
> 
> 赞同：1
> 
> 时间：2012-07-20T04:03:44.883
> 
> 标签：php, joomla, joomla2.5

我在`view.html.php`组件的 VIEW 文件中添加了自定义按钮：

```
JToolBarHelper::custom('addtrack', 'addtrack.png', 'addtrack_f2.png','Add Track', false);
JToolBarHelper::custom('edittrack', 'edittrack.png', 'edittrack_f2.png','Edit Track', false);

JToolBarHelper::custom('updatetrack', 'updatetrack.png', 'updatetrack_f2.png','Save Track', false); 
```

但我不知道从哪里可以使用此按钮，我的意思是我想打开我在同一视图下创建的相应页面。

```
"track_addtrack.php" 
```

或者我可以使用此按钮完成部分工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:13:23.540

这些按钮将执行一项任务，因此您必须在控制器中实现它。

因此，在 /controllers/{view_name}.php 中，您需要添加与按钮中给出的自定义名称相匹配的函数。

例子

```
class YourcomponentControllerYourview extends JController {

    public function addtrack() {

        //Put code you want to execute here 
        //You could forexample require_once(JPATH_COMPONENT_SITE.'/views/yourview/track_addtrack.php');

    }
} 
```

# cordova - PhoneGap 是否适用于所有版本的 Android 和 iOS？

> ID：11572724
> 
> 赞同：1
> 
> 时间：2012-07-20T04:04:03.140
> 
> 标签：cordova

PhoneGap 是否适用于所有版本的 Android 和 iOS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:50:52.140

我认为 Phonegap 网站上的这份文件提供了一个好主意。

[http://phonegap.com/about/feature](http://phonegap.com/about/feature)

除此之外。查看 API（例如[http://docs.phonegap.com/en/1.9.0/cordova_accelerometer_accelerometer.md.html#Accelerometer](http://docs.phonegap.com/en/1.9.0/cordova_accelerometer_accelerometer.md.html#Accelerometer)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T11:45:52.340

1) Android 2.1 - API 级别 7

2) 黑莓 OS5 - 但浏览器很烂，所以 OS6 更真实

3) iOS 目前是 3.X，但是当我们在 7 月发布 PhoneGap 2.0 时，iOS 版本将达到
4.2。因为超过 90% 的用户使用的是 iOS 5.X，所以这没什么大不了的。

这些都是Android、IOS、BlackBerry-的最低版本。

# java - Java AWT 线程

> ID：11572726
> 
> 赞同：4
> 
> 时间：2012-07-20T04:04:14.197
> 
> 标签：java, multithreading, swing, awt, jlist

我在使用 netbeans Swing GUI 时遇到线程问题。这是我第一次真正尝试使用 Java 的文件系统通知程序为备份程序开发 GUI。我有两个文件`SyncUI.java`和`Sync.java`.

我几乎想要发生的是您在`jTextField1`文本字段中输入一个目录路径，该路径创建一个同步线程，该线程创建一个新的同步对象，然后调用`processEvents`该对象。当该目录中的文件发生更改时，我想将有关更改的文本添加到列表中。

在其当前状态下，UI 不再没有响应，但是`processEvents`没有在我的列表中添加任何内容。知道问题是什么吗？此外，由于我刚刚开始使用 java，因此欢迎任何建设性的批评。

## SyncUI.java：

```
package sync;
import java.io.IOException;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import javax.swing.JList;
import javax.swing.SwingUtilities;

public class SyncUI extends javax.swing.JFrame {

    public SyncUI() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {
        jButton1 = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        list1 = new java.awt.List();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("Start");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        list1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                list1ActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
        .addContainerGap()
        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(list1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .add(layout.createSequentialGroup()
        .add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 329, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
        .add(jButton1)
        .add(0, 0, Short.MAX_VALUE)))
        .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
        .addContainerGap()
        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
        .add(jButton1)
        .add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
        .add(list1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 229, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
        .addContainerGap(25, Short.MAX_VALUE))
    );

        pack();
    }// </editor-fold>                        

private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
    jButton1.doClick();
}                                           

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {  
        //I tried to use invokeLater, this solved the problem of the UI nonresponse issue                                       
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
                //Creates a path dir that my Sync constructor needs to start file   notification watcher on that directory
                Path dir = Paths.get(jTextField1.getText());
                try
                {
                    //Creates a new sync object passing it the directory and the list in my GUI
                    Sync sync = new Sync(dir, list1);
                    try
                    {
                        sync.processEvents();
                    }
                    catch (InterruptedException ex)
                    {
                        Logger.getLogger(SyncUI.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
                catch (IOException ex)
                {
                    Logger.getLogger(SyncUI.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

        });
}                                        

private void list1ActionPerformed(java.awt.event.ActionEvent evt) {                                      
    // TODO add your handling code here:
}                                     

public static void main(String args[]) throws IOException
{
    java.awt.EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            SyncUI s = new SyncUI();
            s.setVisible(true);               
        }
    });     
}

// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JTextField jTextField1;
private java.awt.List list1;
// End of variables declaration                   
} 
```

## 同步.java：

```
package sync;

import static java.nio.file.StandardWatchEventKinds.*;
import java.nio.file.attribute.*;
import java.io.*;
import java.nio.file.*;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.SwingUtilities;

public class Sync
{
    private final WatchService ws;
    private final Map<WatchKey,Path> keys;
    public java.awt.List list;

    public Sync(Path dir, java.awt.List list) throws IOException, InterruptedException
    {
        this.ws = FileSystems.getDefault().newWatchService();
        this.keys = new HashMap<WatchKey,Path>();
        this.list = list;
        recSet(dir);
        //this.processEvents();
    }

    private void register(Path dir) throws IOException
    {
        WatchKey key = dir.register(ws, ENTRY_CREATE, ENTRY_DELETE, ENTRY_MODIFY);
        keys.put(key, dir);
    }

    private void recSet(Path start) throws IOException
    {
        Files.walkFileTree(start, new SimpleFileVisitor<Path>()
        {     
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException
            {
                if(!Files.isHidden(dir))
                {
                    register(dir);
                    System.out.println(dir);
                }
            return FileVisitResult.CONTINUE;
            }
        });
    }

    void processEvents() throws IOException, InterruptedException
    {
        System.out.println("Entered processEvents");
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
                System.out.println("Entered run");
                list.add("test2");
                list.repaint();
                while(true)
                { 
                    WatchKey key;           
                    try
                    {
                        key = ws.take();
                    }
                    catch (InterruptedException x)
                    {
                        return;
                    }

                    Path dir = keys.get(key);
                    if (dir == null)
                    {
                        System.err.println("WatchKey not recognized");
                        continue;
                    }

                    for (WatchEvent<?> event: key.pollEvents())
                    {
                        WatchEvent.Kind<?> kind = event.kind();
                        WatchEvent<Path> ev = (WatchEvent<Path>)event;
                        Path filename = ev.context();
                        String name = dir.resolve(filename).toString();             

                        if (kind == OVERFLOW)
                            continue;               

                        if(kind == ENTRY_CREATE)
                        {
                            System.out.print("Entry Created: ");
                            File f = new File(name);

                            if(f.isDirectory())
                                try {
                                    register(dir.resolve(filename));
                                } catch (IOException ex) {
                                    Logger.getLogger(Sync.class.getName()).log(Level.SEVERE, null, ex);
                                }

                            System.out.println(name);
                            list.add(name);     
                        }
                        else if(kind == ENTRY_DELETE)
                        {
                            System.out.print("Entry Deleted: ");
                            System.out.println(name);                          
                        }
                        else if(kind == ENTRY_MODIFY)
                        {
                            File f = new File(name);
                            if(!f.isDirectory())
                        {
                            System.out.print("Entry Modify: ");
                            System.out.println(name);
                        }
                    }

                    boolean valid = key.reset();

                    if (!valid)
                        break;
                    }
                }
            }
        });       
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T04:31:39.263

Swing 不是线程安全的，因此，如果您尝试在同一线程中更新 UI，您将遇到“应用程序冻结”行为。为了解决这个问题，您需要将更新 UI 的过程委托给另一个线程。这是使用 SwingUtilities.invokeLater（Java 5 和更早版本）方法和/或 SwingWorker 类（自 Java 6 起）完成的。

一些链接：

*   [http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)
*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)
*   [http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)
*   [http://forum.codecall.net/topic/56804-swing-thread-safety-how-to-properly-modify-components/](http://forum.codecall.net/topic/56804-swing-thread-safety-how-to-properly-modify-components/)

谷歌搜索： [https ://www.google.com.br/search?q=swing+thread+safe](https://www.google.com.br/search?q=swing+thread+safe)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T04:54:22.103

支持大卫布扎托：

不，我想你错过了理解什么`InvokeLater`。 `InvokeLater`确保 runnable 在`ETD`. 所以基本上，据我所知，您已经将长时间运行的事件阻止代码放回`ETD`. 仅`InvokeLater`在您想要更新 UI、使用 Threads 或`SwingWorker`您想要实际进行处理时使用

```
void processEvents() throws IOException, InterruptedException
    {
        System.out.println("Entered processEvents");

        // PLEASE ETD, PUT THIS AT THE END OF THE QUEUE AND EXECUTE
        // SO I RUN WITHIN YOUR CONTEXT
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {

                // NOW RUNNING BACK ON THE ETD
                System.out.println("Entered run");
                list.add("test2");
                list.repaint();

                // NOW BLOCK THE ETD, SO NO MORE REPAINTS OR UPDATES WILL EVER
                // OCCUR
                while(true)
                { 
                    WatchKey key;           
                    try
                    {
                        key = ws.take();
                    }
                    catch (InterruptedException x)
                    {
                        return;
                    } 
```

对不起帽子，但我希望评论脱颖而出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T05:03:56.343

**1.** Swing**不是**线程安全的，但有些方法`repaint(), setText()`是**Tread Safe**。

**2.** Swing 中的**main()**方法**寿命不长**。它在 Event Dispactcher Thread 中安排 GUI 的构建，然后退出。现在**由 EDT 负责处理 GUI。**

**3.**你必须让你的**非 UI 工作在你的非 UI 线程上，脱离 GUI 线程**，即 EDT。

**4.**你的`main()`方法应该只做使 JFrame 可见的工作，使用`EventQueue.invokeLater.`

**例如：**

```
 public static void main(String[] args){

       EventQueue.invokeLater(new Runnable(){

       public void run(){

       myFrame.setVisible(true);
     }
  }
} 
```

**5 SwingWorker是Java提供的，**用于在GUI线程上同步非UI线程的工作输出。

# java - 打个盹：在 Android 活动中使用线程和“等待”/睡眠

> ID：11572727
> 
> 赞同：1
> 
> 时间：2012-07-20T04:04:18.970
> 
> 标签：java, android

好的，我正在制作一个基本的应用程序，其中有一张马铃薯的图片，它会通过应用程序编辑元素的填充来增长和缩小。我对线程真的很陌生，我肯定在睡眠/等待方面做错了什么。

这是我的代码；这是相对不言自明的：

```
package com.Potato.growingpotato;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;
import android.view.View;
import android.widget.ImageView;

public class GrowScreen extends Activity {

    private Thread thread;
    private Handler handler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_grow_screen);
        thread = new Thread() {
            public void run() {
                growPotato();
                handler.postDelayed(this, 1000);
            }
        };
        thread.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_grow_screen, menu);
        return true;
    }

    @Override
    public void onResume(){
        super.onResume();
        handler.removeCallbacks(thread);
        handler.postDelayed(thread, 0);
    }

    public void HarvestPotato(View view) {
        ImageView ThePicture = (ImageView) findViewById(R.id.imageView);
        ThePicture.setPadding(150,150,150,150);
        thread.start();
    }

    public void NapTime(int Time) { //Try to make the application sleep for 'Time'
          try {
              Thread.sleep(Time);
            } catch (Exception e) {
              e.getLocalizedMessage();
            }
    }

    public void growPotato() { //Fancy Padding manipulation 
        long base = System.currentTimeMillis();
        long WorkingNum = 0;
        ImageView PotatoPicture = (ImageView) findViewById(R.id.imageView);
         do {
            NapTime(100);
            WorkingNum = 150 - ((System.currentTimeMillis() - base)/100);
            PotatoPicture.setPadding((int)WorkingNum, (int)WorkingNum, (int)WorkingNum, (int)WorkingNum);
        } while(WorkingNum > 5 );

    }

    @Override
    protected void onPause() {
        super.onPause(); 
        handler.removeCallbacks(thread);
    }
} 
```

应用程序启动后冻结，它是一个白屏。最终，图片以全尺寸弹出，按钮也弹出；按下按钮时，它会完全冻结

# android - android活动的onCreate上的奇怪2 NullPointerException

> ID：11572730
> 
> 赞同：0
> 
> 时间：2012-07-20T04:04:27.443
> 
> 标签：android

请帮忙，我已经深入研究了 onSaveInstanceState 和 onConfigChange 的东西，但无法获得图片。

我通过 Google Play 发布的应用程序报告了异常，但我无法在我的开发环境中重现它。经过跟踪，我发现PreviewActivity的onCreate方法中发生了2个NullPointerException：

**问题一：**

（一个）。PreviewActivity 的 onCreate 方法中的代码：

```
public void onCreate(Bundle savedInstanceState) {
   setContentView(R.layout.logo_preview_layout);
   ...

   mBtnCheckGuess = (Button)findViewById(R.id.btn_check_guess);  
   mVgGuessPanel = (View)findViewById(R.id.layout_guess); // the exception line!

   ...

} 
```

(b)。布局 xml 中的代码（只是其中的一部分）

```
<ScrollView 
    android:gravity="center_horizontal" 
    android:orientation="vertical" 
    android:id="@+id/main_layout" 
    android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:layout_marginTop="25.0dip" android:layout_marginBottom="10.0dip">
    <LinearLayout 
        android:orientation="vertical" 
        android:layout_width="fill_parent" android:layout_height="wrap_content">            
        <RelativeLayout
            android:id="@+id/layout_guess"
            android:layout_gravity="center_horizontal" 
            android:layout_width="fill_parent" android:layout_height="wrap_content" 
            android:layout_marginTop="0.0dip" android:layout_marginBottom="0.0dip" 
            android:visibility="visible"> 
```

我完全确定在这个布局 xml 文件中没有其他 @id/layout_guess 。

（C）。AndroidManifest.xml 中的代码

```
 <activity
        android:name=".PreviewActivity" 
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
        android:screenOrientation="portrait">
    </activity> 
```

对于这个问题，我有几十个 NullPointerException，但是在我在 AndroidManifest 中删除了这一行之后：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

这两天我没有遇到新版本应用程序的相同问题。我完全不知道为什么...

**问题2：** 背景，我想在A启动B时将一个对象从Activity A传递给Activity B，我使用Android的Application对象将该对象包含在其实例变量中。

(a) MyApplication 的代码：

```
public class MyApplication extends Application{
Logo mSelectedLogo;

@Override
public void onCreate(){
}

public void setSelectedLogo(Logo logo){
    mSelectedLogo = logo;
}
public Logo getSelectedLogo(){
    return this.mSelectedLogo;
}
} 
```

(b) 活动 A 部分代码

```
mApplication.setSelectedLogo(logo);
            Intent intent = new Intent(this, ActivityB.class);
            LogoListActivity.this.startActivityForResult(intent, REQUEST_GUESS); 
```

(c) 活动 B 代码

```
public void onCreate(Bundle savedInstanceState) {
    ...
    MyApplication mApplication = (MyApplication)this.getApplication();
    mSelectedLogo = mApplication.getSelectedLogo();
    ALog.d(TAG, "correct logo name: " + mSelectedLogo.mName + ", id: " + mSelectedLogo.mId); // NullPointerException line, obviously mApplication.getSelectedLogo() returns NULL
    ...
} 
```

为什么它会是NULL真的很奇怪。除非 MyApplication 对象已被销毁。

错误日志在这里：

`java.lang.RuntimeException: Unable to start activity ComponentInfo{com.codefes.quiz/com.codefes.quiz.PreviewActivity}: java.lang.NullPointerException at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) at android.app.ActivityThread.access$1500(ActivityThread.java:117) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loop(Looper.java:123) at android.app.ActivityThread.main(ActivityThread.java:3687) at java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:507) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) at dalvik.system.NativeStart.main(Native Method) Caused by: java.lang.NullPointerException at com.codefes.quiz.PreviewActivity.onCreate(Unknown Source) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) ... 11 more`

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:42:11.290

假设您有一个放置在 layout-potrait 中的布局文件。如果用户切换到横向（如果您的活动未标记为仅限 potrait），则不会设置任何布局。

因此，当设备或您的应用程序处于低阶状态时，不会使用高阶资源（或在某些情况下只是不同阶）。

由于您已经放入了很多 configChange 字符串，请检查您是否有适合所有场景的布局。

# ember.js - Ember 数据嵌套资源 URL

> ID：11572735
> 
> 赞同：5
> 
> 时间：2012-07-20T04:04:57.363
> 
> 标签：ember.js, ember-data

假设我有一个具有以下布局的 Rails 应用程序（从我的实际项目中简化了一点）：

```
User
    has many Notes

Category
    has many Notes

Note
    belongs to User
    belongs to Category 
```

笔记可以在以下位置获得：

```
/users/:user_id/notes.json
/categories/:category_id/notes.json 
```

但不是：

```
/notes.json 
```

整个系统中的注释太多，无法在一个请求中发送 - 唯一可行的方法是仅发送必要的注释（即属于用户或用户试图查看的类别的注释）。

使用 Ember Data 实现这一点的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T05:52:31.963

我会说简单：

**余烬模型**

```
App.User = DS.Model.extend({
  name: DS.attr('string'),
  notes: DS.hasMany('App.Note')
});

App.Category = DS.Model.extend({
  name: DS.attr('string'),
  notes: DS.hasMany('App.Note')
});

App.Note = DS.Model.extend({
  text: DS.attr('string'),
  user: DS.belongsTo('App.User'),
  category: DS.belongsTo('App.Category'),
}); 
```

**导轨控制器**

```
class UsersController < ApplicationController
  def index
    render json: current_user.users.all, status: :ok
  end

  def show
    render json: current_user.users.find(params[:id]), status: :ok
  end
end

class CategoriesController < ApplicationController
  def index
    render json: current_user.categories.all, status: :ok
  end

  def show
    render json: current_user.categories.find(params[:id]), status: :ok
  end
end

class NotesController < ApplicationController
  def index
    render json: current_user.categories.notes.all, status: :ok
    # or
    #render json: current_user.users.notes.all, status: :ok
  end

  def show
    render json: current_user.categories.notes.find(params[:id]), status: :ok
    # or
    #render json: current_user.users.notes.find(params[:id]), status: :ok
  end
end 
```

*请注意：这些控制器是简化版本（索引可能会根据请求的 id 进行过滤，...）。*您可以查看[How to get parentRecord id with ember data](https://stackoverflow.com/questions/10385430/how-to-get-parentrecord-id-with-ember-data/11543159#11543159)以进行进一步讨论。

**活动模型序列化器**

```
class ApplicationSerializer < ActiveModel::Serializer
  embed :ids, include: true
end

class UserSerializer < ApplicationSerializer
  attributes :id, :name
  has_many :notes
end

class CategorySerializer < ApplicationSerializer
  attributes :id, :name
  has_many :notes
end

class NoteSerializer < ApplicationSerializer
  attributes :id, :text, :user_id, :category_id
end 
```

`include`我们在此处包含侧载数据，但您可以通过将参数设置为`false`in来避免它`ApplicationSerializer`。

* * *

ember-data 将接收并缓存用户、类别和注释，并根据需要请求丢失的项目。

# objective-c - 为什么，当我 initWithObjects 一个 NSArray 时，它最终是空的？

> ID：11572738
> 
> 赞同：-2
> 
> 时间：2012-07-20T04:05:27.860
> 
> 标签：objective-c, ios5, nsarray

我是一个新手，所以如果结果是愚蠢的，我不会感到惊讶，但我正用头撞墙试图弄清楚为什么 NSArray haikuArray，在我尝试 initWithObjects 之后，从不包含任何对象。有什么想法吗？

Gay_HaikuViewController.h 文件：

```
#import <UIKit/UIKit.h>
#import "Array Setup.h"

@interface Gay_HaikuViewController : UIViewController
{
Array_Setup *gayHaikuSetup;
Array_Setup *userHaikuSetup;
NSMutableArray *allHaiku;
IBOutlet UITextView *haikuText;
}

@property (nonatomic,retain) Array_Setup *gayHaikuSetup;
@property (nonatomic,retain) Array_Setup *userHaikuSetup;
@property (nonatomic,retain) NSMutableArray *allHaiku;
@property (nonatomic,retain) IBOutlet UITextView *haikuText;
-(IBAction)nextHaiku:(id)sender; 
```

Gay_HaikuViewController.m 文件中的相关方法：

```
#import "Gay_HaikuViewController.h"
#import "Array Setup.h"

@interface Gay_HaikuViewController ()

@end

@implementation Gay_HaikuViewController

@synthesize gayHaikuSetup,userHaikuSetup,allHaiku,haikuText;

- (void)viewDidLoad
{
[super viewDidLoad];

NSArray *haikuArray = [gayHaikuSetup arrayOfGayHaiku];
haikuArray = [gayHaikuSetup readFromGayArray];
//This next line is how I know there are no objects in haikuArray.
NSLog(@"%d",[haikuArray count]);
NSMutableArray *userArray = [userHaikuSetup arrayOfUserHaiku];
userArray = [userHaikuSetup readFromUserArray];
allHaiku = [[NSMutableArray alloc] init];
for (int i=0; i<[haikuArray count]; i++)
    [allHaiku addObject:[haikuArray objectAtIndex:i]];
for (int i=0; i<[userArray count]; i++)
    [allHaiku addObject:[userArray objectAtIndex:i]];
} 
```

Array_Setup.h 文件：

```
#import <Foundation/Foundation.h>

@interface Array_Setup : NSObject
{
NSMutableArray *arrayOfUserHaiku;
NSArray *arrayOfGayHaiku;
}

@property (nonatomic,strong) NSMutableArray *arrayOfUserHaiku;
@property (nonatomic,strong) NSArray *arrayOfGayHaiku;

-(NSArray *)readFromGayArray;
-(NSMutableArray *)readFromUserArray;
-(NSMutableArray *)writeToUserArray;
-(void)addHaikuToArray;

@end 
```

以及 Array_Setup.m 文件中的相关方法：

```
#import "Array Setup.h"

@implementation Array_Setup

@synthesize arrayOfGayHaiku,arrayOfUserHaiku;

-(NSMutableArray *)readFromUserArray
{
arrayOfUserHaiku = [NSMutableArray alloc];
[arrayOfUserHaiku initWithContentsOfFile:@"/tmp/cool.txt"];
NSError *error = nil;
if (!arrayOfUserHaiku)
{
    NSLog(@"Read failed: %@.",[error localizedDescription]);
}
else 
{
    NSLog(@"cool.txt looks like this: %@.",arrayOfUserHaiku);
}
return arrayOfUserHaiku;
}

-(NSArray *)readFromGayArray
{
NSArray *array = [NSArray alloc];
[array initWithObjects:@"Lorem", @"ipsum", nil]; 

return array;
}

@end 
```

提前感谢您的帮助，伙计们和女孩们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:07:45.473

`initWithObjects`返回一个值，但您没有设置`array`为返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:29:55.090

此代码中的严重问题：

```
arrayOfUserHaiku = [NSMutableArray alloc];
[arrayOfUserHaiku initWithContentsOfFile:@"/tmp/cool.txt"];
NSError *error = nil;
if (!arrayOfUserHaiku)
{
    NSLog(@"Read failed: %@.",[error localizedDescription]);
}
else 
{
    NSLog(@"cool.txt looks like this: %@.",arrayOfUserHaiku);
}
return arrayOfUserHaiku;
} 
```

1.  永远不要拆分`alloc`和`init`。 `init`方法有时（通常实际上）不会返回返回的相同对象`alloc`。即应该是：

    arrayOfUserHaiku = [[NSMutableArray alloc] initWithContentsOfFile:@"/tmp/cool.txt"];

2.  `error`永远不会被该代码中的任何内容设置；它不是全球性的。

3.  该方法应该返回一个自动释放的数组（假设非 ARC）。

4.  您应该避免在代码中使用大量静态字符串。将它们作为可以轻松本地化的 plist 或文本文件放入应用程序包装器中。

（并且，正如评论者所建议的那样，不要将您的应用程序的内容放入问题中——有些人可能会觉得它令人反感）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T07:21:30.863

Array_Setup.m 文件：

```
 #import "Array_Setup.h"

@implementation Array_Setup

@synthesize arrayOfGayHaiku,arrayOfUserHaiku;

-(NSMutableArray *)readFromUserArray
{
    arrayOfUserHaiku = [[NSMutableArray alloc] initWithContentsOfFile:@"/tmp/cool.txt"];
 //   [arrayOfUserHaiku initWithContentsOfFile:@"/tmp/cool.txt"];
    NSError *error = nil;
    if (!arrayOfUserHaiku)
    {
        NSLog(@"Read failed: %@.",[error localizedDescription]);
    }
    else 
    {
        NSLog(@"cool.txt looks like this: %@.",arrayOfUserHaiku);
    }
    return arrayOfUserHaiku;
}

-(NSArray *)readFromGayArray
{
    NSArray *array = [NSArray arrayWithObjects:@"I don't understand.\nYou love it when I do that--\nWait, no.  That's Stephen.",

     @"Frantically hiding\nPorno and Mapplethorpe prints--\nMom is on her way.",

     @"Remember when I\nSaid I disliked oral sex?\nI meant just with you.",

     @"You were perfection.\nThen you misspelled 'embarrassed.'\nDon't call me again.",

     //Am omitting a bunch of these to make my Stack Overflow question shorter.

     @"I know you think I\nLike it when you slap my ass.\nYou are mistaken.",

     @"Flailing to the beat--\nCould I possibly look half\nAs dumb as I feel?",

     @"Last night, you looked hot.\nToday, you want to discuss\nThe whole foods movement.", nil]; 

    return array;
}

@end 
```

Gay_HaikuViewController.m 文件：

```
userHaikuSetup= [[Array_Setup alloc] init];

gayHaikuSetup= [[Array_Setup alloc] init]; // [gayHaikuSetup arrayOfGayHaiku];

NSArray * haikuArray = [NSArray arrayWithArray: [gayHaikuSetup readFromGayArray]];
//This next line I added to find out whether the array had any objects--I always get 0.
NSLog(@"%lu",[haikuArray count]);

NSMutableArray *userArray = [userHaikuSetup readFromUserArray];
allHaiku = [[NSMutableArray alloc] init];
for (int i=0; i<[haikuArray count]; i++)
    [allHaiku addObject:[haikuArray objectAtIndex:i]];
for (int i=0; i<[userArray count]; i++)
    [allHaiku addObject:[userArray objectAtIndex:i]];

NSLog(@"%lu",[allHaiku count]); 
```

这可以运行；你应该看一些objective-c程序语法书。

# jquery - jQuery 防止单选按钮被点击

> ID：11572743
> 
> 赞同：2
> 
> 时间：2012-07-20T04:05:49.187
> 
> 标签：jquery

全部，当单击单选按钮以查看所选组中是否至少有一个条目时，我需要运行以下代码。

```
jQuery("input[type=radio]").click(function(event){
    alert('it is clicked');
    var num_questions = jQuery("#num_questions").val();
    var new_questions = parseInt(num_questions) + 1;
    for(var i=1; i<new_questions; i++){
        var radios = jQuery("input[type=radio]");
        var group  = radios.filter('[name=rating_value_'+i+']');
        if(group.filter(":checked").length==0){
            var answers_to_questions = "false";
            return false;
        }else{
            var answers_to_questions = "true";
            jQuery("#no_answers").html('');
        }
        //alert((group.filter(":checked").length)?"checked":"not checked");
    }
}); 
```

我收到了警报，所以我知道它已经到了，但是，单选按钮没有被选中。但是，当我删除此代码时，它可以正常工作。任何想法为什么这会导致这种情况发生？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:14:49.987

从事件处理程序返回`false`可防止发生该事件的默认操作。在单击单选按钮的情况下，默认操作是选择该单选按钮（并取消选择其组中先前选择的单选按钮）。

> *“当单击单选按钮以查看所选组中是否至少有一个条目时”*

我不明白你想在这里实现什么。“至少一个”没有意义，因为在给定组中最多只能检查一个收音机。仅当最初未选中任何电台时，才会发生组中少于一个的情况，因为用户无法取消选中给定组中的所有无线电。

话虽如此，在一般意义上，您的代码可以简化：

```
jQuery("input[type=radio]").click(function(event){
    var num_questions = jQuery("#num_questions").val(),
        new_questions = parseInt(num_questions, 10) + 1,
        radios = jQuery("input[type=radio]"),
        all_answered = true;
    for(var i=1; i<new_questions; i++){
        if(radios.filter('[name=rating_value_'+i+']:checked').length===0){
            all_answered = false;
            break;
            // return false;   <------ don't return false or it cancels the click
        }
    }
    if (!all_answered) {
        // a group was found that didn't have an answer selected
        // so do something
    } else
        jQuery("#no_answers").html('');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:24:13.177

尝试以下操作：

```
$("input[type=radio]").click(function(event){
    var num_questions = parseInt($("#num_questions").val(), 10) + 1;
    var unselected = 0;
    for(var i = 1; i < new_questions; i++) {
        if ($('input[name=rating_value_'+i+']:checked').length == 0 ) {
             unselected++
        }
    }
    $("#no_answers").html('there are ' + unselected + ' radio groups');
}); 
```

# java - Java 端口转发

> ID：11572746
> 
> 赞同：1
> 
> 时间：2012-07-20T04:06:05.963
> 
> 标签：java, sockets, portforwarding

我正在尝试设计一个非常简单的远程端口转发 Java 程序。当这个程序完成并且我在终端 ( `java PortForward 1234 google.com 80`) 中运行它时，程序应该监听 1234 上的连接并将流量转发到远程主机 google.com 上的 80。然后我应该能够将我`localhost:1234`的浏览器指向并且浏览器应该会显示谷歌的页面。

```
import java.io.*;
import java.net.*;

public class PortForward{
    public static void main(String argv[]) throws Exception{

        int portNum = Integer.parseInt(argv[0]);
        String hostName = argv[1];
        int hostportNum = Integer.parseInt(argv[2]);

        ServerSocket welcomeSocket = new ServerSocket(locportNum);  

        while(true){
            Socket conSocket = welcomeSocket.accept();

            BufferedReader inFromBrowser = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));

            DataOutputStream outToBrowser = new DataOutputStream(connectionSocket.getOutputStream());

            conSocket.close();
        }    
    }
} 
```

我的下一步应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:00:33.870

您正在编写 HTTP 代理。您不需要，已经有很多免费可用的，例如 Apache Squid。但是，如果您必须继续，当您接受一个套接字时，您需要启动一个线程来处理它。线程做的第一件事是从套接字读取 HTTP CONNECT 命令并获取目标 IP 地址。然后，它应该打开一个指向该地址的套接字，并在必要时向接受的套接字发送失败回复，否则它需要再启动两个线程，然后自行退出。这两个线程都做同样的事情：从一个套接字读取并写入另一个套接字。其中一个从接受的套接字读取并写入目标套接字；另一个则相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T00:38:04.140

很抱歉发布一个旧问题。但由于尚未得到答复，因此我无耻地向您推荐我的博客文章。您将找到完全符合您要求的源代码（或二进制 jar 文件）。

[http://kennethxu.blogspot.com/2006/04/java-based-tcpip-port-forwarding.html](http://kennethxu.blogspot.com/2006/04/java-based-tcpip-port-forwarding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:11:52.557

> 我一直在拼命地搜索和搜索，搜索和搜索关于下一步做什么的任何可能的提示，但我找不到任何有用的东西。请帮忙。我的下一步应该是什么？

您的下一步是打开一个到`hostName`和端口的套接字`hostportNum`。然后，您可能想要创建一些阅读`inFromHost`器`outToHost`/流。然后，您可能想要创建一个线程来从浏览器读取并写入主机，以及另一个线程从主机读取并写入浏览器。

# actionscript-3 - 我需要一种方法来启动我的 .swf 文件并让它始终作为 Windows 7 的底部窗口

> ID：11572749
> 
> 赞同：1
> 
> 时间：2012-07-20T04:07:06.003
> 
> 标签：actionscript-3, windows-7, flash

我正在尝试制作一个 swf 文件，作为我电脑的墙纸。现在我有两个我无法解决的问题。

1.  该窗口需要始终位于我的桌面底部，在rocketDock 和任务栏下方。

2.  我想禁用 swf 最小化，因为我经常使用 Windows 键 + M 快捷方式访问我的桌面。

我知道必须有一个 AS3 命令可以将窗口设置为始终位于底部。我可以更改有关 Windows 中 swf 文件的那个或某种属性。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:19:59.017

我认为您不太可能使用 AS3 来做到这一点，它不太适合创建与特定操作系统紧密集成的桌面应用程序，而是更多地作为编写可在任何系统上运行的代码的一种手段。我的猜测是使用 C# 和 WPF 而不是 Flex 来实现这一点你会更幸运。就键盘快捷键而言，您通常可以停止传播事件以阻止 Flex/Flash 执行其默认行为，但是在这种情况下，您正试图阻止全局热键，所以我怀疑这是否可以通过任何 AS3 代码实现方式（您可能能够听到最小化然后重新最大化但不能将窗口放在图标后面，我不知道这很重要）。

对于 AS3 中的相关内容，您可能想查看 NativeWindow 和相关类，但我在快速浏览时没有遇到任何事情，也从未听说过 AS3 中的此类内容：http: [//help.adobe.com/ en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindowInitOptions.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindowInitOptions.html)

# javascript - 如何简化 Javascript 动态 ID？

> ID：11572753
> 
> 赞同：0
> 
> 时间：2012-07-20T04:07:34.353
> 
> 标签：javascript

我是 JS 新手，我正在运行 CMS，我有一个动态 ID，我担心的是，我会通过添加 ID 数组来简化 ID 以减少 JS 代码。

你们能帮我如何简化这段代码吗

```
$x1(document).ready(function () {

    //
    // Id1 = #options_1_text
    // Id2 = #option_2_text
    // Id3 = #option_3_text
    // Id(n) = so on..

    $x1("#options_1_text").miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    });

    $x1("#options_2_text").miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    });

    $x1("#options_3_text").miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    });

    // so on..

}); 
```

非常感谢您的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:14:38.257

试试这个：

```
$x1(document).ready(function () {
    var ids = [
        "#options_1_text",
        "#options_2_text",
        "#options_3_text",
        "#options_4_text",
        .
        .
        .
        .
        ."#options_n_text",
    ];
    $x1.each(ids, function(i, el){
        $x1(el).miniColors({
            letterCase: 'uppercase',
            change: function (hex, rgb) {
                    logData('change', hex, rgb);
            }
        });

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:11:12.193

如果代码对所有元素的作用确实相同：

```
 for (var i=1; i<4; i++) {
    $x1("#options_"+i+"_text").miniColors({
                letterCase: 'uppercase',
                change: function(hex, rgb) {
                    logData('change', hex, rgb);
                }
            });
 } 
```

如果 id 不是这样的简单序列

```
 var ids = [ 'id1', 'another_id', 'one_more' ]; 
```

然后[遍历该数组](https://stackoverflow.com/questions/3010840/loop-through-array-in-javascript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:14:18.253

```
 var str='',n=4;
for (var i=1; i<n; i++) {
    str+=",#options_"+i+"_text";
                         }
 str[0]='';

$x1(str).miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T04:17:47.210

这里最简单的方法是为每个项目添加一个公共类，让 jQuery 为您完成所有工作，这样您就可以这样做：

```
$x1(document).ready(function () {

    $x1(".options_text").miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    });

}); 
```

如果不能修改 HTML，并且可以假设项目从 1 开始按顺序编号，则可以动态查找现有元素：

```
$x1(document).ready(function () {
    var i = 1, elem;
    while (elem = document.getElementById("options_" + i + "_text")) {
        $x1(elem).miniColors({
             letterCase: 'uppercase',
             change: function (hex, rgb) {
                 logData('change', hex, rgb);
             }
        });
        i++;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T04:18:11.907

如果它是一个简单的模式并且你不知道元素的数量 n 你可以这样做：

```
var n = 1;
while($('#options_'+n+'_text').length > 0)
{
    $x1('#options_'+n+'_text').miniColors({
        letterCase: 'uppercase',
        change: function (hex, rgb) {
            logData('change', hex, rgb);
        }
    });
    n++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T00:26:25.323

好吧，这里有一个结构：

```
$x1(document)
.ready(function () {
$x1("#options_1_text")
    .miniColors({
    letterCase: "uppercase",
    change: function (a, b) {
        logData("change", a, b)
    }
}), $x1("#options_2_text")
    .miniColors({
    letterCase: "uppercase",
    change: function (a, b) {
        logData("change", a, b)
    }
}), $x1("#options_3_text")
    .miniColors({
    letterCase: "uppercase",
    change: function (a, b) {
        logData("change", a, b)
    }
})
}) 
```

# c# - 如何在 Web 服务上调用 WebReqeuest.Create

> ID：11572755
> 
> 赞同：0
> 
> 时间：2012-07-20T04:07:47.603
> 
> 标签：c#, web-services, webrequest

大家好，我有这个代码要创建为 Web 服务，问题出在 WebRequest.Create，似乎 Web 服务没有创建方法，我能做些什么作为解决方法？谢谢。这是我的整个代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

using System.Net;
using System.IO;
using System.Net.NetworkInformation;
using System.Text;

namespace ApplicationMonitoring.Service
{
    /// <summary>
    /// Summary description for WebRequest
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class WebRequest : System.Web.Services.WebService 
    {

    [WebMethod]
    public string WebReq(string url,int timeout)
    {
        try
        {
            HttpWebRequest request = (HttpWebRequest)
            WebRequest.Create(url);
            request.Proxy = new System.Net.WebProxy("10.80.50.60:8080", true);
            request.Timeout = timeout;
            //request.Proxy.Credentials = CredentialCache.DefaultCredentials;
            // execute the request
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            response.StatusCode.ToString();

        }
        catch (WebException ex)
        {
            Response.Write(((HttpWebResponse)ex.Response).StatusCode);

        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:30:34.200

在您的代码`HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);`中创建一个 webService。

你可以参考这个链接[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

下面是创建 webRequest 实例的代码。

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
      public static void Main ()
      {
        // Create a request for the URL.        
        WebRequest request = WebRequest.Create ("http://www.contoso.com/default.html");
        // If required by the server, set the credentials.
        request.Credentials = CredentialCache.DefaultCredentials;
        // Get the response.
        HttpWebResponse response = (HttpWebResponse)request.GetResponse ();
        // Display the status.
        Console.WriteLine (response.StatusDescription);
        // Get the stream containing content returned by the server.
        Stream dataStream = response.GetResponseStream ();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader (dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd ();
        // Display the content.
        Console.WriteLine (responseFromServer);
        // Cleanup the streams and the response.
        reader.Close ();
        dataStream.Close ();
        response.Close ();
       }
     }
   } 
```

现在要创建一个 webService 请求，您只需使用

`HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);` 确保您已包含所需的头文件。

# video - 如何从 UIImagePickerController 中选择视频并播放？

> ID：11572757
> 
> 赞同：1
> 
> 时间：2012-07-20T04:08:13.937
> 
> 标签：video, uiimagepickercontroller, mpmovieplayercontroller

目前我使用下面的代码来获取 NSURL。但是在我得到 NSURL 之后我怎么玩呢？

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
        {
            NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
            if ([mediaType isEqualToString:@"public.image"]){
                // UIImage *selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
                UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
                NSLog(@"found an image");
            }
            else if ([mediaType isEqualToString:@"public.movie"]){
                NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
                NSLog([videoURL absoluteString]);
                NSLog(@"found a video");    
            }
            [picker dismissModalViewControllerAnimated:YES];
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:59:27.433

```
- (void)selectVideoFromLibrary
{
   UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeMovie,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
     NSURL *movieURL = (NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];
     MPMoviePlayerController *movieplayer =[[MPMoviePlayerController alloc] initWithContentURL: url];    
    [[movieplayer view] setFrame: [self.view bounds]];  
    [self.view addSubview: [movieplayer view]];
    [movieplayer play];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:31:42.753

url 是您的视频网址

```
MPMoviePlayerController *plyr =[[MPMoviePlayerController alloc] initWithContentURL: url];    
[[plyr view] setFrame: [self.view bounds]];  
[self.view addSubview: [plyr view]];
[plyr play]; 
```

# c - 打印此浮点格式

> ID：11572758
> 
> 赞同：1
> 
> 时间：2012-07-20T04:08:18.250
> 
> 标签：c, printing, floating-point, formatting

![所需格式](../Images/acfd413db2968dcec524418144e13480.png)

观察上图，剩余贷款金额以一种非常独特的方式显示。它基本上是一个浮点值。当它没有浮点精度时，它显示为`$3000`当小数部分有 4 位时显示 2 个浮点。但是当小数部分只有 3 位时，3 位精度用于浮点。这是否可以仅使用格式说明符来显示？我尝试了很多组合，`%X.Yf`但没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:02:21.753

虽然我同意将浮点用于货币并不是最好的解决方案，但要获得所需的精度（始终在点后两位数），您可以使用`"%.02f"`.

例子：

```
#include <stdio.h>

int main()
{
    printf(".0123456789 = %.02f\n", .0123456789);
    printf("0.123456789 = %.02f\n", 0.123456789);
    printf("01.23456789 = %.02f\n", 01.23456789);
    printf("012.3456789 = %.02f\n", 012.3456789);
    printf("0123.456789 = %.02f\n", 0123.456789);
    printf("01234.56789 = %.02f\n", 01234.56789);
    printf("012345.6789 = %.02f\n", 012345.6789);
    printf("0123456.789 = %.02f\n", 0123456.789);
    printf("01234567.89 = %.02f\n", 01234567.89);
    printf("012345678.9 = %.02f\n", 012345678.9);
    printf("0123456789\. = %.02f\n", 0123456789.);
    return 0;
} 
```

输出是：

```
.0123456789 = 0.01
0.123456789 = 0.12
01.23456789 = 1.23
012.3456789 = 12.35
0123.456789 = 123.46
01234.56789 = 1234.57
012345.6789 = 12345.68
0123456.789 = 123456.79
01234567.89 = 1234567.89
012345678.9 = 12345678.90
0123456789\. = 123456789.00

```

**编辑：**要具有可调节的精度，您可以使用`"%*f"`：

```
printf("123.456789 = %.*f\n", 3, 123.456789); 
```

上面的行将打印

```
123.457

```

# ajax - JSF 2 - commandButton 在渲染后不执行操作

> ID：11572759
> 
> 赞同：0
> 
> 时间：2012-07-20T04:08:19.593
> 
> 标签：ajax, jsf-2, primefaces, cdi

嘿，我整天都在苦苦挣扎，但我还找不到答案。所以我的问题是我的 xhtml 页面中有 2 个表单，第一个显示填充了来自我的数据库的数据的 primefaces 数据表，第二个填充了来自所选用户的数据以进行编辑。问题是，第二种形式有 2 个命令按钮，但是在我渲染它（通过 ajax 调用）之后，按钮似乎没有调用 action 属性中的方法。

这是我的代码，可以让一切更清楚。

这是我在 xhtml 页面中的第一个表单

```
<h:form id="form" style="width:710px;">
    <p:dataTable id="dataTable" var="supervisor" value="#{tablaBean.modeloUsuario}"  
                             paginator="true" rows="15" paginatorPosition="bottom" selection="#{tablaBean.usuarioSel}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}"
                             rendered="#{tablaBean.showAll}">  
                    <f:facet name="header">  
                        <h:outputText value="Supervisores" />
                    </f:facet>  
                    <p:column  selectionMode="single" style="width:18px" />
                    <p:column headerText="Id" filterBy="#{supervisor.idUsuario}" filterStyle="width:35px;">  
                        <h:outputText value="#{supervisor.idUsuario}" />  
                    </p:column>   
                    <p:column headerText="Nombre" filterBy="#{supervisor.nombre}" id="nombreh">  
                        <h:outputText value="#{supervisor.nombre}" />  
                    </p:column>   
                    <p:column headerText="Ap. Paterno" filterBy="#{supervisor.apaterno}" id="apat">  
                        <h:outputText value="#{supervisor.apaterno}" />  
                    </p:column>   
                    <p:column headerText="Ap. Materno" filterBy="#{supervisor.amaterno}" id="amat">  
                        <h:outputText value="#{supervisor.amaterno}" />  
                    </p:column>   
                    <p:column headerText="Usuario" filterBy="#{supervisor.nombreUsuario}" id="user">  
                        <h:outputText value="#{supervisor.nombreUsuario}" />  
                    </p:column>    
                    <p:column headerText="Depto." filterBy="#{supervisor.departamento.nombre}" id="deptoh">  
                        <h:outputText value="#{supervisor.departamento.nombre}" />  
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton id="ver" value="Ver" icon="ui-icon-search" update=":form:userData" oncomplete="user.show()" />
                        <p:commandButton id="editar" value="Editar" icon="ui-icon-pencil" update=":form,:formEdit" action="#{tablaBean.edit()}" />
                    </f:facet>
                </p:dataTable>
            </h:form> 
```

这是我的第二种形式的代码

```
<h:form id="formEdit">
<p:growl />
<p:fieldset legend="Editar Usuario" style="margin: auto;" rendered="#{!tablaBean.showAll}">
    <h:panelGrid columns="3">
        <h:outputText value="Id" />
        <h:outputText value="#{tablaBean.usuarioSel.idUsuario}" id="id" />
        <p:message for="id" />
        <p:outputLabel for="nombre" value="Nombre" />
        <p:inplace>
            <p:inputText value="#{tablaBean.usuarioSel.nombre}" id="nombre" required="true" />
        </p:inplace>
        <p:message for="nombre" />
        <p:outputLabel for="appat" value="Apellido Paterno" />
        <p:inplace>
            <p:inputText value="#{tablaBean.usuarioSel.apaterno}" id="appat" required="true"/> 
        </p:inplace>
        <p:message for="appat" />
        <p:outputLabel for="apmat" value="Apellido Materno" />
        <p:inplace>
            <p:inputText value="#{tablaBean.usuarioSel.amaterno}" id="apmat" required="true"/> 
        </p:inplace>
        <p:message for="apmat" />
        <p:outputLabel for="usuario" value="Usuario" />
        <p:inplace>
            <p:inputText value="#{tablaBean.usuarioSel.nombreUsuario}" id="usuario" required="true"> 
                <f:ajax render="msgUsuario" event="blur" />
                <f:validator binding="#{userNameValidator}" />
            </p:inputText>
        </p:inplace>
        <p:message for="usuario" id="msgUsuario" />
        <p:outputLabel for="depto" value="Departamento" />
        <p:inplace>
            <p:inputText value="#{tablaBean.usuarioSel.departamento.nombre}" id="depto" required="true" /> 
        </p:inplace>
        <p:message for="depto" />
    </h:panelGrid>
    <p:commandButton value="Guardar" icon="ui-icon-disk" action="#{tablaBean.editarUsuario()}" />
    <p:commandButton id="editar" value="Cancelar" update=":form,:formEdit" icon="ui-icon-pencil" action="#{tablaBean.edit()}" />
</p:fieldset> 
```

因此，当我调用方法“edit()”时，我会更改 showAll 变量的值，使其呈现第二种形式并“隐藏”第一种形式。问题是在我这样做之后，第二种形式的命令按钮什么也不做。（甚至不要输入方法）

这是我的豆子

```
 @Named(value = "tablaBean")
    @ConversationScoped

public class TablaBean implements Serializable {

    @Inject
    private UsuariosDao usuario;
    @Inject
    private Usuarios usuarioSel;
    @Inject
    private Conversation conversation;
    private UserDataModel modeloUsuario;
    private boolean showAll;

    /**
     * Creates a new instance of TablaBean
     */
    public TablaBean() {
    }

    @PostConstruct
    public void init() {
        start();
        modeloUsuario = new UserDataModel(usuario.findSupers());
        showAll = true;
    }

    public void start(){
        conversation.begin();
    }

    public void end(){
        conversation.end();
    }

    public Usuarios getUsuarioSel() {
        return usuarioSel;
    }

    public void setUsuarioSel(Usuarios usuarioSel) {
        this.usuarioSel = usuarioSel;
    }

    public UserDataModel getModeloUsuario() {
        return modeloUsuario;
    }

    public boolean isShowAll() {
        return showAll;
    }

    public void setShowAll(boolean showAll) {
        this.showAll = showAll;
    }

    public UsuariosDao getUsuario() {
        return usuario;
    }

    public void setUsuario(UsuariosDao usuario) {
        this.usuario = usuario;
    }

    public String edit() {
        System.out.println("holis");
        showAll = !showAll;
        return "";
    }

    public String editarUsuario(){
        System.out.println("hola");
        end();
        return "";
    }
} 
```

任何关于我可能做错的建议表示赞赏，在此先感谢。

## 编辑

我做了更多的调试，我发现每次我点击第一种形式的编辑按钮时都会调用我的托管 bean，所以我猜问题是我的对话 bean。

## 编辑 2

我将支持 bean 的范围更改为 Application，现在点击编辑按钮时它没有被调用，但命令按钮仍然不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:34:40.160

不确定您使用的是哪个版本的 PrimeFaces。我已经看到在以前的版本中使用 PrimeFaces ajax 正确传播 CDI 对话的问题。还看到了以前版本的 Mojarra 的问题。似乎这可能是相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:56:57.880

发现我的错误，这是错误的`<f:validator binding="#{userNameValidator}" />`，在验证器中有一些 NullPointerException 错误（我已经修复了）但是是的......我现在觉得很愚蠢！xD，我必须将 commandButton 设置为无 ajax 才能真正看到错误，因为它没有显示在服务器日志中。无论如何，感谢您的回答。

# coldfusion - cfinclude 一个 .cfm 的函数到 CFC 中，贵吗？

> ID：11572765
> 
> 赞同：3
> 
> 时间：2012-07-20T04:09:05.560
> 
> 标签：coldfusion, cfc

任何人都知道将`cfinclude`许多功能的 .cfm 放入 CFC 会有多昂贵？

```
<cfcomponent>
  <cfinclude template="functions.cfm"> 
```

或者如果我将函数直接附加到对象的`This`范围内会更快吗？（func1、func2 将是单例工厂对象的函数）。

```
<cffunction name="createX">
  <cfset x = new X()>
  <cfset x.func1 = func1>
  <cfset x.func2 = func2> 
```

哪一个在性能和内存使用方面更有效？

实际上，cfinclude 的效率如何？代码会在每个包含上编译吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T08:05:22.147

适用于 StackOverflow 的短响应：

您需要记住，执行的不是 CFML，因此出于性能考虑，更重要的是要查看 ColdFusion 实际执行的内容，即编译后的类文件。并且在编译 CFC 时，CF 为 CFC 本身创建一个类，并为 CFC 中的每个方法创建一个类。无论方法是内联的还是单独包含的，这都是相同的。类的内容略有不同，但就性能而言，意义不大。

不过，还有其他考虑因素，这有利于 - IMO - 只是将这些方法放入 CFC。

更长的答案：我在我的博客上发布了一个更大的分析（这偏离了你的问题的主题，所以不完全适合这里），在[这里](http://adamcameroncoldfusion.blogspot.co.uk/2012/07/which-is-better-having-your-methods.html)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:43:33.757

您可以将您的 functions.cfm 内容放入 functions.cfc 中，然后在 Application 范围内使用它。

然后在你的 CFC 中你可以打电话`#application.functions.someMethod()#`

或者，也许您的 CFC 可以“扩展”新的 functions.cfc 并使用超级方式使用其方法，例如：`#super.someMethod()#`

我不能给你太多关于性能的信息，但尽可能缓存总是最好的。我还强烈建议不要将 a`<cfinclude template="functions.cfm">`添加到您的组件中……即使它看起来有效，这也是一种不好的做法，并且可能会带来更多问题。

# python - 如何从 Heroku/Cedar 的 virtualenv 中清除陈旧的 pypi 包？

> ID：11572769
> 
> 赞同：4
> 
> 时间：2012-07-20T04:09:16.613
> 
> 标签：python, heroku, virtualenv, pypi, cedar

我正在我的`flask-oauth`应用程序的 src/lib 中构建自己的，并将其添加到 Web 应用程序的路径中：`sys.path.insert(0, os.getcwd() + '/src/lib/flask-oauth')` 我必须这样做，因为 pypi 包不支持谷歌需要的 access_token_params。

`flask-oauth`目前没有出现`requirements.txt`，但过去出现过。结果，它保留在我的 heroku 应用程序的 vitualenv 中，我无法摆脱它。我的应用程序在本地工作，但在 heroku 上它死于：

```
TypeError: __init__() got an unexpected keyword argument 'access_token_params' 
```

`requirements.txt`我已经尝试在我的文件中列出最新的 github 版本的 flask-oauth，如下所示： `git+git://github.com/mitsuhiko/flask-oauth.git`，并且包确实安装了。但是，应用程序仍然从中加载陈旧版本，`/app/.heroku/venv/lib/python2.7/site-packages/flaskext/oauth.py`并且应用程序仍然死机。

我的 requirements.txt 中有这个：

```
-e git://github.com/mitsuhiko/flask-oauth.git@80167c44abc3df37e43a45474d19452065430464#egg=Flask_OAuth-dev 
```

并且正确的、最新的 github 版本的 flask-oauth 现在可以在本地安装并且可以工作。但我仍然无法让 heroku 在应用程序中确认或使用该包。它使用他们的旧版本`/app/.heroku/venv/lib/python2.7/site-packages/flaskext/oauth.py`

我怎样才能清除这个陈旧包的heroku的virtualenv？我怎样才能让它使用 github 版本而不是它的缓存包？

注意：我创建了一个名为 mythin-dev 的新应用程序，它会读取我的 requirements.txt 并从以下位置安装正确版本的 flask-oauth

```
-e git://github.com/mitsuhiko/flask-oauth.git@80167c44abc3df37e43a45474d19452065430464#egg=Flask_OAuth 
```

所以看来问题肯定是我的heroku virtualenv中的缓存包。帮助，在解决此问题之前，我的应用程序将无法在 heroku 上运行:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:16:46.117

安装这个（[https://github.com/lstoll/heroku-repo](https://github.com/lstoll/heroku-repo)）插件并运行`heroku repo:purge_cache -a appname`。

# file - 根据特定位置字符对文件中的行进行排序

> ID：11572770
> 
> 赞同：1
> 
> 时间：2012-07-20T04:09:22.127
> 
> 标签：file, shell, unix, sorting, solaris

我想根据 .txt 文件中的特定字符对文件进行排序。

**这是给我的文件：**

```
12345678901234567890123456789012345
header     1stfoo   DDMMYYYY 2ndfoo
sltele     Hoodie   24051988 d12Hdq
sltele     Hoodie   07051987 d30Hdq
sltele     Hoodie   07082011 d08Hdq
sltele     Hoodie   09081961 d04Hdq
sltele     Hoodie   20041962 d14Hdq
sltele     Hoodie   20032000 d01Hdq
sltele     Hoodie   13062002 d05Hdq 
```

如您所见，有一列包含 DDMMYYY 格式的日期。如果我对它进行排序， `sort -n -k 3,3 thisfile.txt > sortedfile.txt`我得到了这个结果：

```
sltele     Hoodie   07051987 d30Hdq
sltele     Hoodie   07082011 d08Hdq
sltele     Hoodie   09081961 d04Hdq
sltele     Hoodie   13062002 d05Hdq
sltele     Hoodie   20032000 d01Hdq
sltele     Hoodie   20041962 d14Hdq
sltele     Hoodie   24051988 d12Hdq 
```

但是，我想要这样的结果：

```
sltele     Hoodie   09081961 d04Hdq
sltele     Hoodie   20041962 d14Hdq
sltele     Hoodie   07051987 d30Hdq
sltele     Hoodie   24051988 d12Hdq
sltele     Hoodie   20032000 d01Hdq
sltele     Hoodie   13062002 d05Hdq
sltele     Hoodie   07082011 d08Hdq 
```

作为基于 DDMMYYYY 日期格式的有效 sortedfile.txt。

有人可以帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:42:22.600

您可以使用 sort 命令，指定多个键和键开始结束位置：

```
sort -n -k 3.8,3.12 -k 3.6,3.7 -k 3.4,3.5 < input_file 
```

输出：

```
sltele     Hoodie   09081961 d04Hdq
sltele     Hoodie   07051987 d30Hdq
sltele     Hoodie   24051988 d12Hdq
sltele     Hoodie   20032000 d01Hdq
sltele     Hoodie   20042000 d14Hdq
sltele     Hoodie   13062002 d05Hdq
sltele     Hoodie   07082011 d08Hdq 
```

从排序手册页：

> KEYDEF 是 F[.C][OPTS][,F[.C][OPTS]] 表示开始和停止位置，其中 F 是字段编号，C 是字段中的字符位置；两者都是原点 1 ...字段中的字符从前一个空格的开头开始计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T17:33:05.777

接受的答案实际上并没有回答对特定范围的绝对字符位置进行排序的问题，从行首开始计数（即位置 1，按 计数`sort`）。

重要的是要记住，对于`sort`，字段编号是指由*字段分隔符分隔*`-t`的文本部分，除非使用/`--field-separator=SEP`选项进行更改，否则这是一个非空白到空白的过渡。对从行首开始计数的绝对字符位置范围进行排序的正确方法是从字段号 1 开始计数字符，如下所示：

```
sort -k 1.STARTPOS,1.ENDPOS 
```

`1.ENDPOS`如果您希望排序键延伸到行尾，您可以省略。

将字段编号与绝对字符位置混淆可能会导致令人惊讶（并且通常非常令人沮丧）的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:24:16.020

我知道有更好的方法可以做到这一点，但这是我过去所做的，很少需要对文件进行排序。

```
sed -e 's/\([0-9]\{2\}\)\([0-9]\{2\}\)\([0-9]\{4\}\)/\3\2\1/g' thisfile.txt | \
   sort -n -k 3,3 | \
   sed -e 's/\([0-9]\{4\}\)\([0-9]\{2\}\)\([0-9]\{2\}\)/\3\2\1/g' > sortedfile.txt 
```

# c++ - Qt：在窗口中强制菜单栏？

> ID：11572777
> 
> 赞同：2
> 
> 时间：2012-07-20T04:10:43.913
> 
> 标签：c++, macos, qt, menubar

我想知道是否可以强制菜单栏在 Qt 的窗口中。我没有 Mac，我在我的 Ubuntu 上卸载了一些东西以强制 Unity 不使用“全局”菜单栏。

我目前正在使用 Qt 4.8 制作一个科学应用程序（一旦发布，我将切换到 5.0）（只有 C++/没有 QML）并且我有很多菜单和子菜单，所以如果全部使用会更好菜单在窗口中。有没有办法停用“全局”菜单栏？也许有`setNativeMenuBar(false)`，但我没有 Mac 来测试它。

# linux - wget 使用环境变量

> ID：11572779
> 
> 赞同：0
> 
> 时间：2012-07-20T04:10:49.743
> 
> 标签：linux, bash, wget

我需要对一个文件 url 与一个名为 Initial 的变量连接起来的 wget

但如果我这样做，

```
Initial="something"

wget www.google.ca/${Initial} 
```

输出：

```
www.google.ca/$%7BInitial%7D 
```

我想获得所需的输出：

```
www.google.ca/something 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T14:11:48.293

我尝试了您粘贴的代码，它可以工作：

```
Initial="something"
wget www.google.com/${Initial} 
```

输出是：

```
www.google.com/something 
```

您也可以尝试使用：

```
Initial="something"
GoogleLink="www.google.com/"$Initial
wget $GoogleLink 
```

并且输出是相同的。

如果您复制/粘贴了脚本代码，则可能添加了一些额外的字符。这取决于您使用的编辑器。我建议您在一个新的干净文件中重新编写脚本。

**编辑**：[根据 tvm](https://stackoverflow.com/users/1454443/tvm)的建议，为了避免空格问题，请尝试：

```
wget "$GoogleLink" 
```

# java - 在 Java GUI 中动态更新文本文件

> ID：11572784
> 
> 赞同：2
> 
> 时间：2012-07-20T04:11:12.293
> 
> 标签：java

我创建了 JAVA GUI，它将从其他客户端接收文本文件（.txt）并附加到 Java Netbeans GUI 中的文本区域（通过使用 TextRecv.append）但是它不读取已经从其他客户端发送的文件，我尝试将 readfile 方法放在按钮执行中，但是它只在我按下按钮时读取，但这不是我想要的结果，我的目标是让这个 GUI 动态接收文件，读取并自动附加到我的文本区域

我的情况是我有 2 台机器，然后我通过在 Java 中执行 dtncpd 发送文件，这是我如何通过 2 台机器发送文件的过程，但是在两台机器中，文本文件已经出现在目标中，但它没有附加到 textarea

我就是这样发送的

```
 private void DTNSendActionPerformed(java.awt.event.ActionEvent evt) {                                        
    // TODO add your handling code here:
    String text = "";
    String name = usernameField.getText();
    text = name.toString()+ ":"+ TextInput.getText().toString();

    try{
        FileWriter fstream = new FileWriter("msg.txt");
        BufferedWriter out = new BufferedWriter(fstream);
        out.write(text);
        out.close();
    }catch(IOException e)
    {
        e.printStackTrace();
    }
    TextInput.setText("");

    try{ //Show what sender type
        BufferedReader ins = new BufferedReader(new FileReader("msg.txt"));
        String Stream;
        while((Stream = ins.readLine())!=null)
        {
            TextRecv.append(Stream+"\n");
        }
    }catch(IOException e){ e.printStackTrace();}

    String sendcmd = "dtncp NetBeansProjects/DTNChat/msg.txt dtn://abc.dtn";
    Runtime runtime1 = Runtime.getRuntime();
    try{
        Process process1 =runtime1.exec(sendcmd);
    }catch(IOException e)
    {
        e.printStackTrace();
    } 
```

问题是Java Gui如何在不使用任何按钮的情况下自动读取接收并附加到文本区域的文件

有什么建议吗？？谢谢你的每一个建议

**已编辑** 我正在这样编码，但它没有附加在我的 TextArea 上

```
 SwingWorker worker = new SwingWorker<Void,String>(){
    protected Void doInBackground(){
        File file = new File("/home/XXX/Desktop/incoming/ABC.dtn/msg.txt");
        boolean exists = file.exists();
        while(exists)
        {
            try{
                FileReader read = new FileReader("/home/XXX/Desktop/incoming/ABC.dtn/msg.txt");
                BufferedReader in = new BufferedReader(read);
                String show;
                while((show=in.readLine())!=null)
                {
                    TextRecv.append(show);
                }
            }catch(IOException e){}
        }
        return null;
    }
};

    public void actionPerformed(ActionEvent ae){
        worker.execute();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:53:54.277

**1.**我假设如果涉及2台机器，那么您必须在双方都进行发送和接收。

**2.**所以你需要保留一个**单独的线程**，它将**在你的 EDT（事件调度程序线程）之外运行，这是你的 GUI 线程**。

**3.**您可以让这个**线程继续检查**您要删除文件的特​​定文件夹中的文件数，并保留一个**Count 变量来保持计数**。并将**文件名存储在 ArrayList**中。

**4.**当一个**新文件到达时**，**Count 将加一**，然后检查是否有任何具有这个新到达文件名的文件已经在您的 ArrayList 中，如果没有将此文件内容附加到您的 JTextArea。

**5.**保留一个单独的线程来执行上述操作，不在 EDT 上，否则您的 GUI 将无响应。

//////////////////////////// **已编辑：** ///////////// ///////////////////

**6.**`main()` Swing中 的方法**不长命**。它在 Event Dispactcher Thread 中安排 GUI 的构建，然后退出。**现在由 EDT 负责处理 GUI。**

**7.**您的**main() 方法应该只使用 EventQueue.invokeLater 来完成使 JFrame 可见的工作。**

**例如：**

```
 public static void main(String[] args){

       EventQueue.invokeLater(new Runnable(){

       public void run(){

       myFrame.setVisible(true);
     }
  }
} 
```

**8.SwingWorker是Java提供的，用于**在GUI线程上同步Non-UI线程的工作输出。

**//////////////////已编辑//////////////////////**

**9.**可以**通过扩展线程类或实现 Runnable 来创建线程**。我在这里展示了 Runnable 的例子。

**将这两个类放在同一个文件中。**

**实现 Runnable 的类**

```
class MyTest implements Runnable{

public void run(){

   go();
}

public void go(){

  for (int i=0 ; i<10 ; i++){

           System.out.println("Hello i am work nos "+i);
    }

 }
} 
```

**包含 main() 方法的类**

```
public class TestMain{

  public static void main(String[] args){

          Thread t = new Thread(new MyTest());
          t.start();
   }
} 
```

**10.** 你也可以使用 Anonymous Inner 类，它实现了 Runnable。

**具有 Anonymouse 内部类和 main() 方法的类**

```
 public class TestMain{

    public void go(){

           for(int i=0 ; i<10 ; i++){

             System.out.println("Hello i am work nos "+i);
           }

   }

      public static void main(String[] args){

              Thread t = new Thread(new Runnable(){

              public void run(){

                new TestMain().go();

           }

   });
              t.start();
       }
    } 
```

# java - java中的这个文件是什么？core.26416，堆转储还是线程转储？

> ID：11572785
> 
> 赞同：0
> 
> 时间：2012-07-20T04:11:17.140
> 
> 标签：java, heap-memory, coredump, heap-dump, thread-dump

core.26416，这个文件在java中是什么？哪个工具可以分析它？java 线程转储、堆转储和核心的扩展是什么？线程转储/堆转储和核心转储有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:30:41.933

我不知道 core.26416 文件到底是什么，但线程转储基本上有助于跟踪每个线程的活动。每个线程在特定时间点执行的作业/任务是什么，我们可以通过线程转储获得。

在控制台中创建线程转储 按键盘上的 Ctrl+Pause Break。

为无限循环创建一个 java 程序，在运行时从键盘上按 Ctrl+Pause Break 键，并在控制台上看到全线程转储（现在将其写入文件）。

程序：-xLoop.java

> 公共类 xLoop{ 公共静态 void main(String str[]){ boolean x=true; while(x){ System.out.println("Hello Manoj"); } } }

**堆转储**

但是，堆转储用于查找内存泄漏。线程转储可能不会给出 100% 的结果来查找内存泄漏，因此您可以使用堆转储来实现这一点。堆转储对于堆大小、perm 大小和其他一些设置是必不可少的。

有很多工具，比如**jhat**是一个堆分析工具，或者你可以使用**[visualgc](http://java.sun.com/performance/jvmstat/)，[jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)**是非常流行的堆转储工具。

# xcode - 不允许对网络线程进行多个锁定！请提交一个错误。现在崩溃

> ID：11572789
> 
> 赞同：1
> 
> 时间：2012-07-20T04:11:53.630
> 
> 标签：xcode, ipad, locks

我在 Xcode 的输出窗口中收到以下错误：

```
bool _WebTryThreadLock(bool), 0x9644290: Multiple locks on web thread not allowed! Please file a bug. Crashing now...
1   _ZL14WebRunLoopLockP19__CFRunLoopObservermPv
2   __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__
3   __CFRunLoopDoObservers
4   __CFRunLoopRun
5   CFRunLoopRunSpecific
6   CFRunLoopRunInMode
7   _ZL12RunWebThreadPv
8   _pthread_start
9   thread_start* 
```

我发现了以下帖子：[网络线程上的多个锁不允许！请提交一个错误。现在崩溃](https://stackoverflow.com/questions/8037407/multiple-locks-on-web-thread-not-allowed-please-file-a-bug-crashing-now)和[iPhone - UIWebView 多个锁](https://stackoverflow.com/questions/3735414/iphone-uiwebview-multiple-locks)

但是，我不太确定问题是否与模拟器有关，因为我使用的是 iPad 5.1 模拟器，而且我已经在 iPad 设备上进行了测试，但它也在设备上崩溃了？

我已经弄清楚如果我注释掉重新加载 UITableView 实例的行，问题就不会发生，但是我需要这行代码，因为它刷新了我显示的列表。

```
//[listingTable reloadData]; 
```

任何有关此问题的想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:40:05.720

我不得不重新创建一个对象的方式，该对象被添加到 UITableView 中使用的 NSArray 中，从而阻止了此错误的发生。

# c# - 在调制解调器启动时执行 AT 命令的问题

> ID：11572790
> 
> 赞同：3
> 
> 时间：2012-07-20T04:12:03.707
> 
> 标签：c#, modem, at-command

我正在开发一个应用程序，它将读取和写入数据到 gsm 调制解调器。当我关闭调制解调器并再次打开时，在启动时我需要发送一个 AT 命令，以便调制解调器自动设置为端口的设置。当我在超级终端中发出此命令时，它不会显示，但命令会发送到调制解调器。并且调制解调器将自己设置为我为超级终端端口设置提供的设置。从那时起，我可以发送其余的命令。但在我的应用程序中，我无法发送第一个 AT 命令，因此我通过超级终端手动执行此操作。为什么这没有通过我的应用程序发生？我也尝试使用按钮单击发送此命令，但仍未在端口上执行。

```
 port.Open();
        port.DtrEnable = true;
        port.RtsEnable = true;

        if (port != null)
        {
            btn_connect.Enabled = false;
            btn_disconnect.Enabled = true;
            port.WriteLine("AT");

            port.WriteLine("AT+CLIP=1");

            port.WriteLine("AT+CMGF=1");

            con_status.Text = "Connected at " + cboPortName.Text;
        } 
```

我在我的应用程序中提供的端口设置是：

```
 port.PortName = cboPortName.Text;
            port.BaudRate = Convert.ToInt32(this.cboBaudRate.Text); //9600
            port.DataBits = Convert.ToInt32(this.cboDataBits.Text); //8
            port.ReadTimeout = Convert.ToInt32(this.txtReadTimeOut.Text); //300
            port.WriteTimeout = Convert.ToInt32(this.txtWriteTimeOut.Text); //300
            port.StopBits = StopBits.One; //1
            port.Parity = Parity.None; // None
            port.Encoding = Encoding.GetEncoding("iso-8859-1"); 
            port.Open();
            port.DtrEnable = true;
            port.RtsEnable = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:43:05.050

需要检查 2 件事，波特率和回声。

SerialPort 类默认使用 9600。

通常调制解调器处于 AutoBaud 模式，当向其发送“AT”命令时，它会根据 COM 端口链路的波特率自行调整。这不太可能，但是您的调制解调器可能以固定的 BaudRate 运行并且不会调整...因此检查您在 HyperTerminal 中使用的 BaudRate 并使用相同的 BaudRate。

回显 - 看到命令已发送（并且您的调制解调器正在响应），我相信您需要在调制解调器中打开回显，即您发送到调制解调器并且它接收到的任何字符都将被发送/回显给您。

（您也可以在超级终端中打开本地回显……但您不希望这样做……您想真正知道调制解调器看到了您的角色）

**如果您无法让调制解调器回显您发送的内容，那么您配置串行端口链接的方式有问题（即使用错误的流量控制握手/奇偶校验等，或者没有提高流量控制状态行）。**

假设您的调制解调器配置为使用 RTS/CTS 流量控制，您是否尝试过：

`port.Handshake = HandShake.RequestToSend`? （即硬件控制线路流控制）。

因此，看起来可能是该调制解调器的 eeprom 默认设置是不回显（即有人更改了回显并执行了 &W0），或者超级终端已配置为在调制解调器打开端口时将其关闭即它有一个 AT“初始化字符串”！）。您应该检查该端口的初始化字符串是什么，并在使用 SerialPort 类时复制/使用它。

另一个最佳实践是在发出下一个 AT 命令之前等待响应代码 - 延迟是一种方法，但不是最佳实践，因为某些命令可能需要不同的时间来执行……而某些调制解调器则不需要就像在“忙”时接收另一个命令一样。

第一次尝试这个命令：

*   AT&FE1（重置为出厂设置并打开回显）

    （请注意，如果您刚刚打开调制解调器，则不需要 &F，因为无论如何它应该处于出厂设置......但这样做没有害处。E1 转回声）。

*   等待 OK 响应代码

    如果使用超级终端，那么如果您正在输入命令（或者如果使用脚本发送命令，则让您的脚本等待），或者如果发送 AT 命令，您只需在视觉上等待响应代码返回在代码中，您的代码需要捕获响应并采取相应措施。

*   发出下一条命令（例如您的 AT+CLIP=1）

*   等待 OK、ERROR 或特定于命令的响应代码。

    注意：即使使用相同的命令，不同的调制解调器也可能使用不同的响应代码。

*   发出下一个命令等

以下是一些可能会派上用场的链接供参考，即显示风格或 AT 命令，以及一些超级终端参考：

*   [http://www.hilgraeve.com/manuals/](http://www.hilgraeve.com/manuals/)
*   [http://www.stanmex.com/documents/fm_software_docs/HowToConfigureGSMModemUsingHyperTerminal.pdf](http://www.stanmex.com/documents/fm_software_docs/HowToConfigureGSMModemUsingHyperTerminal.pdf)
*   [http://www.computerhope.com/atcom.htm](http://www.computerhope.com/atcom.htm)
*   [http://www.howtofixcomputers.com/bb/ftopic78209.html](http://www.howtofixcomputers.com/bb/ftopic78209.html)
*   [http://www.multitech.net/developer/wp-content/uploads/2010/10/S000463C.pdf](http://www.multitech.net/developer/wp-content/uploads/2010/10/S000463C.pdf)
*   [http://en.wikipedia.org/wiki/Motorola_phone_AT_commands](http://en.wikipedia.org/wiki/Motorola_phone_AT_commands)
*   [http://www.dataip.co.uk/Reference/ATCommands.php](http://www.dataip.co.uk/Reference/ATCommands.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:52:03.747

问题已经解决了。将来可能会帮助某人，这就是我所做的。

我在建立连接时将这两行设置添加到我的端口，这是我之前给出的。

```
 port.DiscardOutBuffer(); 
            port.DiscardInBuffer(); 
```

但我不知道为什么添加这些设置会产生影响并解决了我的问题，但它确实有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T05:07:38.040

为什么你需要命令之间的时间间隔......很久以前我致力于将AT命令传递给调制解调器，我记得连续传递诸如“AT + FCLASS = 8”“ATS0 = 1”“AT + VTX”这样的命令而没有任何延迟在这两者之间，你确定这个延迟的事情吗？

也只是

```
 port.WriteLine("AT+CLIP=1"); 
```

虽然我不确定并且我现在没有调制解调器可以尝试但我认为我们曾经在 AT 命令之后也传递了一个 ENTER 键所以命令应该是

```
 port.WriteLine("AT+CLIP=1" + System.Convert.ToChar(13).ToString()); 
```

看看改变这个是否有帮助......

# javascript - Joomla 2.5 动态上传文件

> ID：11572792
> 
> 赞同：0
> 
> 时间：2012-07-20T04:12:17.200
> 
> 标签：javascript, forms, joomla2.5

我正在将 Joomla 1.5 组件转换为 J2.5 我动态上传文件。一个 iframe 填充了一个表单来执行此操作，iframe 有一个内部 iframe 来设置表单的目标。收到 JSON 答案后，我使用`onload`内部 iframe 的一个函数来擦除 iframe 并显示上传的图像（使用父页面的元素）。在 J1.5 上一切正常，但在 J2.5 上我收到一个`joomla.json`要下载的文件，并且似乎表单没有使用目标。

在外部 iframe 上显示表单的功能是：

```
function showUploadImage(evt) {

    if (!document.getElementById("uploadIFrame")) {

        return false;

    }

    var frame = document.getElementById("uploadIFrame");

    var doc = frame.contentDocument;

    var page;

    page = "\

            <html> \

                <head> \

                    <link rel='stylesheet' href='<?php echo JRoute::_(JURI::base().'/components/com_tutorial/css/base.css',false); ?>' type='text/css' /> \

                    <link rel='stylesheet' href='<?php echo JRoute::_(JURI::base().'components/com_tutorial/css/upframe.css',false); ?>' type='text/css' /> \
                </head> \

                <body>";

    page += ' \

            <div id="waitimage"></div> \

            <form id="fileUploadForm" method="post" enctype="multipart/form-data" action="<?php echo JRoute::_('index.php?option=com_tutorial&view=edittutorial&task=savetutimage&tmpl=json&format=json&tutId='.$this->tutId); ?>" target="uploadTarget"> \

                <label class="title" for="images"><?php echo JText::_("UPLOAD IMAGE"); ?></label> \

                <div class="separator25"></div> \

                <div id="pageimages"> \

                    <div id="newimgfields"> \

                        <div class="controw"> \

                            <label class="title" for="image"><?php echo JText::_('SELECT_FILE'); ?></label><input size="35" id="image" type="file" name="image" /> \

                        </div> \

                        <div class="controw"> \

                            <input type="submit" onclick="document.getElementById(\'waitimage\').innerHTML=\'<div class = &quot;mooloader&quot;></div>\';" value="<?php echo JText::_('UPLOAD_IMAGE'); ?>" /> \

                        </div> \

                    </div> \

                </div> \

            </form> \

            <iframe id="uploadTarget" name="uploadTarget" src=""  style="width:0;height:0;border:0px solid #fff;"></iframe> \

            ';

    page += "</body></html>";

    // now write out the new contents

    if (doc == undefined || doc == null)

        doc = frame.contentWindow.document;

    doc.open();

    doc.write(page);

    doc.close();
    doc.getElementById("uploadTarget").onload = uploadDone;

} 
```

在“onload”上执行的函数是：

```
function uploadDone() {

    var frame = document.getElementById("uploadIFrame");

    var doc = frame.contentDocument;

    var innerFrame = doc.getElementById("uploadTarget");

    var ret = innerFrame.contentDocument.getElementsByTagName("body")[0].innerHTML;

    var data = eval("(" + JSON.decode(ret) + ")"); 

    //var data = eval("("+ret+")"); 

    if (data=="0"){

        alert("<?php echo JText::_('ERROR_SAVE_IMAGE'); ?>");

    }

    else if (data=="") {

    }

    else {

        var upImage = new Element('img',{

            'class':'tutmainthumb',

            'id':'tutThumb',

            'src':'components/com_tutorial/helpers/image.php?img='+data

        });

        upImage.inject('tutImage','top');

        $('uploadIFrame').dispose();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:18:51.190

我重新提出这个问题：[Joomla 2.5 ajax 文件上传](https://stackoverflow.com/questions/11769265/joomla-2-5-ajax-file-upload/) 转到该页面以检查解决方案。

# mysql - 将 CSV 导入 MySQL 并转换日期

> ID：11572797
> 
> 赞同：0
> 
> 时间：2012-07-20T04:13:14.290
> 
> 标签：mysql, csv

我知道以前有人问过这个问题，但由于某种原因，我的运气仍然为零。我正在尝试导入 CSV 文件并将日期字段转换为正确的 mysql 格式 (YYYY-MM-DD)。我应该注意到 csv 中的一些记录有一个空值，''，作为日期值。不确定这是否意味着什么。我还应该提到，我已经在这张表中记录了。它不是空的。我尝试运行它但没有运气

```
load data local infile '/Users/Path/To/CSV/file.csv' 
into table donor fields terminated by ',' 
lines terminated by '\n' (@date,INSTRUCTIONS)
set date = STR_TO_DATE(@date, '%Y-%m-%d') 
```

我正在为所有这些返回 NULL。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:21:39.357

如果您只执行此操作一次，并且表开始时为空，您可以运行导入但首先更改您的表，以便日期列的类型为 VARCHAR。然后运行`UPDATE table SET date = str_to_date( date, '%m/%d/%Y')`，并将列转换回 DATETIME 或 DATE。

您也可以添加格式为 DATE 的第二个日期列，以 VARCHAR 格式导入到第一个日期列中，然后运行`UPDATE table SET date2 = str_to_date( date1, '%m/%d/%Y')`然后 DROP varchar 列。

需要注意的是，第二个参数`STR_TO_DATE()`是输入的格式，而不是结果格式。因此，在您的第二个参数中，您指示 MySQL CSV 中的日期格式为 Ymd。如果它实际上是 m/d/Y，你应该使用 `STR_TO_DATE(@date_date, '%m/%d/%Y)'。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:46:47.617

这可能是正确的——

```
LOAD DATA LOCAL INFILE '/Users/Path/To/CSV/file.csv'  
INTO TABLE tbl1 FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
(@date,INSTRUCTIONS)
SET date = STR_TO_DATE(@date,'%Y/%m/%d); 
```

你为什么`@date_date`取而代之`@date`？我认为您得到了这个，因为这被视为不完整的值，因此`NULL`被返回。请参阅 MySQL[文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)。

# asp.net - EF首先使用具有一对多关系的代码创建重复的外键

> ID：11572801
> 
> 赞同：5
> 
> 时间：2012-07-20T04:13:54.390
> 
> 标签：asp.net, asp.net-mvc, entity-framework, ef-code-first

我将以下类用于一对多关系：

```
public class Supplier
{
    public Supplier()
    {
        SupplierId = Guid.NewGuid();
    }

    public Guid SupplierId { get; set; }
    [Required]
    public string Name { get; set; }

    [Required]
    public virtual Address Address { get; set; }

    public virtual ICollection<Contact> Contacts { get; set; }
}

public class Contact
{
    public Contact()
    {
        ContactId = Guid.NewGuid();
    }

    public Guid ContactId { get; set; }

    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }

    [Required]
    public Guid SupplierId { get; set; }
    [ForeignKey("SupplierId")]
    public virtual Supplier Supplier { get; set; }
} 
```

我正在使用 ASP.NET MVC 4，在创建新联系人时，SupplierId 在查询字符串中传递并作为隐藏字段添加到联系人创建表单中：

```
@Html.HiddenFor(model => model.SupplierId) 
```

这将成功创建联系人并使用查询字符串中的 Guid 填充联系人的 SupplierId 字段。但是，问题在于 Contacts 表有另一个名为 Supplier_SupplierId 的虚拟供应商关系字段，该字段为 NULL。我不确定我是否理解为什么会在 Contacts 表上创建 Supplier_SupplierId，因为 SupplierId 应该用作外键，而这只是多余的。如果我尝试访问已成功添加联系人的供应商的联系人集合，则该集合返回为空，因为 Contact.Supplier_SupplierId 为 NULL。但是，如果我将 SupplierId 列中的值复制到 Contact 记录的 Supplier_SupplierId 列中，Supplier.Contacts 将带回 Contact。

这是我的联系人表最终的样子：

```
CREATE TABLE [dbo].[Contacts] (
    [ContactId]           UNIQUEIDENTIFIER NOT NULL,
    [FirstName]           NVARCHAR (MAX)   NOT NULL,
    [LastName]            NVARCHAR (MAX)   NOT NULL,
    [Supplier_SupplierId] UNIQUEIDENTIFIER NULL,
    CONSTRAINT [PK_dbo.Contacts] PRIMARY KEY CLUSTERED ([ContactId] ASC),
    CONSTRAINT [FK_dbo.Contacts_dbo.Suppliers_SupplierId] FOREIGN KEY ([SupplierId]) REFERENCES [dbo].[Suppliers] ([SupplierId]),
    CONSTRAINT [FK_dbo.Contacts_dbo.Suppliers_Supplier_SupplierId] FOREIGN KEY ([Supplier_SupplierId]) REFERENCES [dbo].[Suppliers] ([SupplierId])
); 
```

有谁知道为什么在联系人中创建了供应商的 2 个外键？如何更改它以使供应商的唯一外键是 SupplierId？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:27:51.507

此映射是错误的（我指的是您在问题下方的评论）：

```
modelBuilder.Entity<Contact>()
    .HasRequired(r => r.Supplier)
    .WithMany()
    .HasForeignKey(f => f.SupplierId)
    .WillCascadeOnDelete(false); 
```

你需要：

```
modelBuilder.Entity<Contact>()
    .HasRequired(r => r.Supplier)
    .WithMany(s => s.Contacts)
    .HasForeignKey(f => f.SupplierId)
    .WillCascadeOnDelete(false); 
```

否则，EF 将认为`Supplier.Contacts`属于另一个和第二个一对多关系的导航属性`Supplier`-`Contact`并引入了第二个外键。

# node.js - `//= require` 在连接资产中不起作用

> ID：11572805
> 
> 赞同：1
> 
> 时间：2012-07-20T04:14:22.797
> 
> 标签：node.js, express, connect

我在以开发模式运行的 express.js 应用程序上使用[连接资产。](https://github.com/TrevorBurnham/connect-assets)

*   我有`app.use(require('connect-assets')())`里面`app.config()`
*   我有`main.js`并且`util.js`在`<PROJECT-ROOT>/assets/js`文件夹中
*   在`main.js`中，只有一行：`//= require ./util`
*   在模板中，有`!= js('main')`

所以，他生成的 html 包括`<script src='/js/util.js'></script><script src='/js/main.js'></script>`. 但是，请求`/js/main.js`成功而没有错误但请求`/js/util.js`失败。

我错过了什么吗？

# ruby - CloudFoundry 需要哪个版本的 ruby ？

> ID：11572813
> 
> 赞同：0
> 
> 时间：2012-07-20T04:15:03.423
> 
> 标签：ruby, cloud-foundry, vmc

当我尝试通过 vmc 工具管理我的 mysql 服务时。我收到如下错误：

```
$ vmc tunnel cucgp --port 9999 mysql
Getting tunnel connection info: OK

Service connection info: 
  username : uxpHWCAlOdElr
  password : pIw5h2MKQjDOI
  name     : d4bbe4b16b3904c41bd5ff42c1df92b7a

Starting tunnel to cucgp on port 9999.
Launching 'mysql --protocol=TCP --host=localhost --port=9999 --user=uxpHWCAlOdElr --password=pIw5h2MKQjDOI d4bbe4b16b3904c41bd5ff42c1df92b7a'

terminate called after throwing an instance of 'std::runtime_error'
  what():  Encryption not available on this event-machine
已放弃
ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0

$ ruby -v
ruby 1.8.7 (2010-01-10 patchlevel 249) [i486-linux]
$ vmc -v
vmc 0.3.18 
```

我的 ruby​​ 版本有问题吗？我只是用 ubuntu 源代码中的 apt 安装它。最后，我为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:14:43.500

我们建议您至少使用 1.9.2 版或 Ruby，安装它的最简单方法是使用 RVM - [https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)，在继续之前仔细扫描此站点

要安装它，只需在终端窗口中运行以下命令；

```
$ curl -L https://get.rvm.io | bash -s stable --ruby 
```

RVM 允许您管理 ruby​​ 的多个版本，它还将为该版本安装的任何 gem 存储在您的用户主路径中，这意味着您可以安装 gem 而无需使用 sudo！

安装 RVM 后，我会继续安装 Ruby 1.9.3 版；

```
$ rvm install 1.9.3 
```

然后告诉RVM默认使用这个版本

```
$ rvm use 1.9.3 --default 
```

完成此操作后，您需要重新安装之前为 1.8.7 安装的所有 gem，因此请重新安装 vmc 和 caldecott

```
$ gem install vmc
$ gem install caldecott 
```

# c++ - “动态分配的内存模拟多维数组”的正确术语？

> ID：11572822
> 
> 赞同：3
> 
> 时间：2012-07-20T04:16:35.463
> 
> 标签：c++, c, arrays, terminology

前段时间我问了一个[问题](https://stackoverflow.com/q/10984551/912144)，我被告知（在提交中）使用术语“多维数组”来表示这样的构造：

```
int **a; 
```

像这样初始化：

```
a = malloc(n * sizeof(*a));
for (i = 0; i < n; ++ i)
    a[i] = malloc(m * sizeof(*a[i])); 
```

具有误导性，并且这“只是一个多维数组的模拟”。不是以英语为母语的人，我很难弄清楚什么是正确的术语。不幸的是，抱怨术语的人自己也无济于事。

果然，“多维数组的仿真”这个词太长了，无法在文本/对话中实际使用。

总结一下：

*   上述构造的正确术语是什么（特别是在 C 中，如果有区别的话）？

附带问题：

*   这个术语语言不可知论吗？如果不是，例如在 C++ 中如何调用它？

注意：如果您的答案与参考相关，我会很高兴。
**编辑**：我理解这个构造和`int a[n][m];`. 那不是问题。

### 更新

分配的内存不一定是规则的。这种结构更精确：

```
a = malloc(n * sizeof(*a));
for (i = 0; i < n; ++ i)
  if (needed[i])
    a[i] = malloc(m[i] * sizeof(*a[i]));
  else
    a[i] = NULL; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T04:18:26.960

我一直听说这些被称为“锯齿状数组”——即使每个子数组的长度相同，它们*也*可以具有不同的长度，因此称为“锯齿状”。（在真正的多维数组中，每个维度都有固定的大小，在这种情况下，只有第一个维度是真正固定的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:35:28.850

它是“（指向）数组的数组”，该术语在多种语言中都可以理解，并且适用于元素数组的长度是否相等（方形 AoA）或不相等（锯齿状 AoA）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T05:42:32.653

“嵌套数组”或“数组数组 [of ...]”。

虽然我不认为它支持不同的维度，但 Boost 在这个模糊的空间中提供了一个产品 - [http://www.boost.org/libs/multi_array/doc/user.html](http://www.boost.org/libs/multi_array/doc/user.html) - 设计决策和界面甚至可能值得考虑如果你正在实施一些新的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T04:55:20.910

我会将构造称为“模拟多维数组”，就像它们在[c-faq](http://www.eskimo.com/~scs/cclass/int/sx9b.html)中所做的那样。如果您认为该术语太长，您可以说“模拟二维数组”等。但是，`int **a;`永远不要将其称为多维数组，因为它的类型是指向`int`. 我认为区别在于指针可用于构造数组，但它们将始终保留为指针。另外，应该知道指针数组`int *a[10];`（

# objective-c - UIScrollView 切断标签

> ID：11572826
> 
> 赞同：1
> 
> 时间：2012-07-20T04:16:58.860
> 
> 标签：objective-c

我有`UIScrollView`很多`labels`嵌入其中。但是，如果底部`labels`的 ' 文本比平时长，则文本被截断，即`UIScrollView`不会让我滚动...

我该如何解决？

编辑：对，对不起...

标签是使用以下程序以编程方式创建的：

```
UILabel *parametersLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,previousLabelFrameOriginY + previousLabelFrameSizeHeight + 10,self.view.frame.size.width - 10,20)];
parametersLabel.text = self.parameters;
parametersLabel.backgroundColor = [UIColor clearColor];
[parametersLabel setFont:[UIFont fontWithName:@"HoeflerText-Regular" size:16]];
parametersLabel.numberOfLines = 0;
[parametersLabel sizeToFit];
[self.scrollView addSubview:parametersLabel]; 
```

我没有对 UIScrollView 进行编程——它具有 Storyboard 分配给它的默认设置。

![底部的文字被截断，我无法滚动它。](../Images/13b38025ebd95a29fda21fe025162b97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:45:11.743

尝试`contentSize`根据标签的高度和位置更改滚动视图。

例如：

```
CGFloat scrollHeight = 0.0f;
for (UIView* view in scrollView.subviews)
{
   scrollHeight += view.frame.size.height;
}

[scrollView setContentSize:(CGSizeMake(320, scrollHeight))]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:45:21.070

您需要设置`contentSize`滚动视图的属性。如果你只是想让它`contentSize`足够大以包含滚动视图的所有子视图，试试这个：

```
CGSize size = CGSizeZero;
for (UIView *view in self.scrollView.subviews) {
    CGRect frame = view.frame;
    size.width = MAX(size.width, CGRectGetMaxX(frame));
    size.height = MAX(size.height, CGRectGetMaxY(frame));
}
self.scrollView.contentSize = size; 
```

# objective-c - NSURLConnectionDelegate 静态类包装器不调用函数调用 (ARC)

> ID：11572831
> 
> 赞同：1
> 
> 时间：2012-07-20T04:17:24.690
> 
> 标签：objective-c, ios, cocoa-touch, ios5, automatic-ref-counting

我正在尝试为我的 iOS 应用程序组合一个静态类，该类将封装我的 HTTP 通信逻辑。我知道如何通过`+`符号在 Objective-C 中创建静态方法，但我希望我的类能够接受一个块并在它的任务完成时调用它。到目前为止我得到的类编译得很好，但是当我调用它的函数时，它只会到达某个点并且失败。这是我当前的代码：

```
#import <UIKit/UIKit.h>

#pragma mark - Globals
#import "Globals.h"

@interface HTTPRequest : NSObject <NSURLConnectionDelegate>
+ (void)GET:(NSMutableURLRequest *)request completionBlock:(void (^)(void))block;
+ (void)POST:(NSMutableURLRequest *)request andBody:(NSString *)requestString completionBlock:(void (^)(void))block;
@end

#import "HTTPRequest.h"

@interface HTTPRequest () {
    NSInteger statusCode;
}
@end

static void (^completionBlock)(void);

@implementation HTTPRequest
+ (void)GET:(NSMutableURLRequest *)request completionBlock:(void (^)(void))block {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    [request setHTTPMethod:@"GET"];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                  delegate:self];

    if (connection) {
        responseData = [[NSMutableData alloc] init];
    } else {
        NSLog(@"NSURLConnection INSTANCE FAILED");
    };

    completionBlock = block;
}

+ (void)POST:(NSMutableURLRequest *)request andBody:(NSString *)requestString completionBlock:(void (^)(void))block {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    NSData *requestData = [NSData dataWithBytes:[requestString UTF8String]
                                         length:[requestString length]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
    [request setHTTPBody:requestData];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                  delegate:self];

    if (connection) {
        responseData = [[NSMutableData alloc] init];
    } else {
        NSLog(@"NSURLConnection INSTANCE FAILED");
    };

    completionBlock = block;
}

#pragma mark - NSURLConnectionDelegate Methods
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];

    statusCode = [((NSHTTPURLResponse *)response) statusCode];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"CONNECTION ERROR: %@ %@", [error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"RESPONSE STRING: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    if (statusCode == 200) {
        completionBlock();
    } else {
        NSLog(@"RESPONSE ERROR: %i", statusCode);
    };
}
@end 
```

我知道 GET 和 POST 函数被调用并且它们创建了`NSURLConnection`对象。此后，没有任何`NSURLConnectionDelegate`函数被调用。

任何人都可以发现这个问题，或者，如果我完全错了，请告诉我。提前致谢！

**更新**

我应该指出，该应用程序是基于 ARC 的。我在这里阅读了有关`NSURLConnectionDelegate`未调用函数的其他问题，但其中大多数似乎是因为开发人员将对象设置为`autorelease`. 由于我无法控制它，我假设它不应该是一个问题。

**更新 2（重写？）**

我做了一些更改，从静态函数中创建了一个类的实例并使用它的实例函数。现在`NSURLConnectionDelegate`函数被调用了，我知道我的`onSuccessBlock`块也被调用了，所以整个类一直在执行。坦率地说，我不确定这是否是合法代码，但编译器没有抱怨，我看到了我期待的日志消息，所以我会继续使用它。这是当前的实现：

```
#import <UIKit/UIKit.h>

@interface HTTPRequest : NSObject <NSURLConnectionDelegate>
+ (void)requestAsGET:(NSMutableURLRequest *)request onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock;
- (void)requestAsGET:(NSMutableURLRequest *)request onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock;
+ (void)requestAsPOST:(NSMutableURLRequest *)request body:(NSString *)body onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock;
- (void)requestAsPOST:(NSMutableURLRequest *)request body:(NSString *)body onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock;
@end

#import "HTTPRequest.h"

@interface HTTPRequest () {
    NSMutableData *responseData;
    NSInteger statusCode;

    void (^onSuccessBlock)(void);
    void (^onFailBlock)(void);
}
@end

@implementation HTTPRequest
- (id)init {
    self = [super init];

    if (self) {
    };

    return self;
}

+ (void)requestAsGET:(NSMutableURLRequest *)request onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock {
    [[[HTTPRequest alloc] init] requestAsGET:request
                                   onSuccess:successBlock
                                      onFail:failBlock];
}

- (void)requestAsGET:(NSMutableURLRequest *)request onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    [request setHTTPMethod:@"GET"];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                  delegate:self];

    if (connection) {
        onSuccessBlock = successBlock;
        onFailBlock = failBlock;
    } else {
        NSLog(@"NSURLConnection INSTANCE FAILED");
    };
}

+ (void)requestAsPOST:(NSMutableURLRequest *)request body:(NSString *)body onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock {
    [[[HTTPRequest alloc] init] requestAsPOST:request
                                         body:body
                                    onSuccess:successBlock
                                       onFail:failBlock];
}

- (void)requestAsPOST:(NSMutableURLRequest *)request body:(NSString *)body onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    NSData *requestData = [NSData dataWithBytes:[body UTF8String]
                                         length:[body length]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
    [request setHTTPBody:requestData];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                  delegate:self];

    if (connection) {
        onSuccessBlock = successBlock;
        onFailBlock = failBlock;
    } else {
        NSLog(@"NSURLConnection INSTANCE FAILED");
    };
}

#pragma mark - NSURLConnectionDelegate Methods
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];

    statusCode = [((NSHTTPURLResponse *)response) statusCode];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"CONNECTION ERROR: %@ %@", [error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"RESPONSE STRING: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    if (statusCode == 200) {
        //  Pass responseData into the block... How?

        onSuccessBlock();
    } else {
        //  Pass statusCode into the block?

        onFailBlock();
    };
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:05:03.660

我会使用单例模式而不是静态类。这样您就不必担心另一个请求会覆盖前一个请求的数据。

**以您的 NSMutableData responseData**为例。您将需要一个实例变量来在连接生命周期中跟踪该数据。我没有看到一个，但如果你有一个，你需要确保没有其他连接可以更新它。这意味着您不能将其设为可能是您最初反应的静态变量。

无论哪种方式，您都应该将**responseData**变量放入字典中，并以 NSUrlConnection 作为键。这样，在每个委托方法实现中，您都可以从连接中查找数据并执行您需要的任何操作。

因此，在这种情况下，您可以执行以下操作：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                              delegate:self];

if (connection) {
    responseData = [[NSMutableData alloc] init];

    // So this would be a NSMutableDictionary you would store your connection in 
    [requests setValue:responseData forKey:connection];

} else {
    NSLog(@"NSURLConnection INSTANCE FAILED");
}; 
```

然后你可以在你的委托方法中做到这一点

```
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
NSMutableData *responseData = [requests valueForKey:connection];

[responseData appendData:data];
} 
```

对于我个人的实现，我选择使用**CFMutableDictionaryRef**而不是 NSMutableDictionary，因为我相信 NSMutableDictionary 不会保留添加到其中的对象。我的代码是在 ARC 之前编写的，因此您可能不必担心。如果您尝试此方法并开始获取 EXC_BAD_ACCESS 或遇到内存问题，请使用 CFMutableDictionaryRef。

希望这能让你朝着正确的方向前进。你的头绝对是在正确的地方:)

**基于重写**

因此，让我尝试根据您的重写更好地解释我上面提到的内容：

```
- (void)requestAsGET:(NSMutableURLRequest *)request onSuccess:(void (^)(void))successBlock onFail:(void (^)(void))failBlock {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    [request setHTTPMethod:@"GET"];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                              delegate:self];

    if (connection) {

       /** This is your problem. You are trying to save data to some instance variables
           but there's a data integrity issue here.  If you fire off two requests, the 
           second request will overwrite these two values which would, at the time, contain
           information from the first request */

        onSuccessBlock = successBlock;
        onFailBlock = failBlock;

    } else {
        NSLog(@"NSURLConnection INSTANCE FAILED");
    };
} 
```

所以你在第一步就有一个设计问题，在你解决这个问题之前，从那里发生的事情真的无关紧要。我的建议是使用当前的 NSURLConnection 作为键将您的 ** HTTPRequest** 值对象保存到字典中。这样，在每个委托方法上，您都可以查找特定于该连接的数据并对其进行修改，而不必担心其他请求会影响您的数据。

像这样的东西：

```
if (connection) {

    // Store the data in an object... call it whatever you want
    SomeObject *someObject = [[SomeObject all] init];
    someObject.responseData = [[NSMutableData alloc] init];
    someObject.onSuccessBlock = successBlock;
    someObject.onFailBlock = failBlock;

    /** Have an NSMutableDictionary that stores all the value objects
        under the corresponding connection since ALL NSURLConnectionDelegate
        methods include a reference to the NSURLConnection for the request */
    [requests setValue:someObject forKey:connection];

} else {
    NSLog(@"NSURLConnection INSTANCE FAILED");
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:25:47.153

您应该从简单的 NSURLConnection 包装器（例如[https://github.com/nst/STHTTPRequest](https://github.com/nst/STHTTPRequest) ）中获得灵感。

此外，您可以在 ARC 项目中使用非 ARC 代码。为此，您可以告诉编译器不要基于文件使用 ARC [Disable Automatic Reference Counting for Some Files](https://stackoverflow.com/questions/6448874/disable-automatic-reference-counting-for-some-files)。

# javascript - 获取跨域内容的数据 URI？

> ID：11572832
> 
> 赞同：0
> 
> 时间：2012-07-20T04:17:34.820
> 
> 标签：javascript, node.js, canvas, cross-domain, data-uri

出于所有意图和目的，假设我有一个带有输入字段的网页，用户可以在其中输入图像 URL，单击按钮，并在其 URL 的另一端获得资源的数据 URI（例如，Google 徽标）。

通过阅读，我了解到您可以像这样获取图像的数据 URI：

```
function imageToDataURI(src,callback)
{
    var canvas = document.createElement('canvas'),
        img    = document.createElement('img');

    img.onload = 
        function()
        {
            canvas.width  = img.width;
            canvas.height = img.height;
            canvas.getContext('2d').drawImage(img, 0, 0);
            callback(canvas.toDataURL());
        };
    img.src = src;
} 
```

但是，很多人（包括我自己）都收到“SECURITY_ERR: DOM Exception 18”，因为画布元素在绘制跨域图像时会受到污染，并且受污染的画布会在 canvas.toDataURL() 上返回上述错误（请参阅[为什么canvas.toDataURL() 抛出安全异常？](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception)）。我的问题是：我真的需要支持跨域网址！

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:17:34.820

[我在这里](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)读到了一堆获取跨域数据的可用选项。几乎有3类解决方案：

1.  那些在您的网页中造成巨大安全漏洞的人
2.  那些不需要但需要控制跨域服务器的
3.  那些需要您将自己的服务器变成代理的

如果你买不起 #1，不在 #2 中，并且有一个 node.js 服务器供你使用，那么这里有一个超级简单的即插即用 node.js 模块，它可以完成 #3。

```
/* return a datauri encoding of the resource at the given url */
exports.dataurize = 
    function(url,callback)
    {
        var request = 
            require('http').request(
                {'host':url.host || 'localhost', 
                 'port':url.port || 80, 
                 'path':url.path || '/'},
                function(resp)
                {
                    var data = '';
                    resp.setEncoding('binary');
                    resp.on('data', function(chunk) {data += chunk;});
                    resp.on('end',
                        function()
                        {
                            if( resp.statusCode == 200 )
                                callback(
                                    undefined,
                                    'data:'+resp.headers['content-type']+';base64,'+
                                       new Buffer(data,'binary').toString('base64'));
                            else
                                callback({'statusCode':resp.statusCode, 'reason':data});
                        });
                });
        request.on('error',
            function(err)
            {
                callback({'statusCode':0, 'reason':err});
            });

        request.end();
    }; 
```

将它集成到您​​的后端，您就可以免费使用#3。回到原来的问题，imageToDataURI() 现在用一个 url 查询你的 node.js 后端，你的后端用结果来响应

```
require('./dataurize').dataurize(...) 
```

即，使用所需的dataURI。

# c# - Linq to SQL 使用全局数据上下文来跟踪用户更改？

> ID：11572834
> 
> 赞同：1
> 
> 时间：2012-07-20T04:17:39.900
> 
> 标签：c#, sql, linq, global, datacontext

我遇到了设计困境，我不确定如何解决这个问题，因为我是整个 Linq 场景的新手。我正计划使用 datagridview 创建一个 winforms 应用程序来显示我的数据库中的一些数据。用户可以执行按钮和其他操作来与数据交互并更改数据。但我不知道如何解决这个问题，要么在我的表单中有一个全局数据上下文来跟踪更改，然后使用 .SubmitChanges() 提交并让 linq 在幕后做所有事情，或者对于每个按钮事件，我创建了一个新的数据上下文，但是因为 linq 无法再跟踪我的更改，所以我创建了某种自定义数据结构来跟踪用户更改，然后更新数据库。

不管我怎么想，听起来拥有一个全局数据上下文会更容易（编码方面），但我读到我可能会遇到问题？

将有多个用户同时使用该应用程序连接到中央数据库。我愿意接受任何建议，只是不确定这样做的正确方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:07:45.097

在我的 ASP.NET 应用程序中，我们为每个请求保留一个全局上下文，因此表单的全局上下文的想法还不错。尤其是在保存相互关联的数据时，从多个上下文查询的数据，当你试图相互关联时，会导致错误。因此，从这个角度来看，全球背景是有益的。特别是因为 windows 窗体可以保留绑定到它的对象（不像 ASP，因为它是无状态的），这些更改将更好地同步。

您必须记住的唯一缺点是，如果您正在加载大量数据，全局上下文，如果您正在跟踪实体更改，将所有这些对象保留在内存中，并且上下文可能会增长到可能影响的程度表现...

HTH。

# magento - Magento：脚本在某行代码后死亡

> ID：11572838
> 
> 赞同：1
> 
> 时间：2012-07-20T04:18:20.810
> 
> 标签：magento

我有这个产品叫“无尽的爱”。这是网址。[http://www.eternalflowersmm.com/floral/flower-boxes/endless-love](http://www.eternalflowersmm.com/floral/flower-boxes/endless-love)

问题：加载缩略图时，脚本死机。如果您查看源代码，您会看到脚本以这样的方式结束。

```
<a rel="lightbox[em_lightbox]" href=" 
```

这是 media.phtml 的断裂。

```
<?php   foreach ($this->getGalleryImages() as $_image): ?>

            <!-- Debug -->
            <p>
                <pre>
                    <?php 
                        print_r($_image); 
                        echo $_image->getFile();
                        echo '<hr>';
                    ?>      

    </pre>
                </p>
                <!-- \Debug -->

            <a rel="lightbox[em_lightbox]"  
                    href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()); ?>"
    //              ^--- SCRIPT DIES AT THIS POINT
                    title="<?php echo $this->htmlEscape($_image->getLabel()) ?>">

                    <img src="<?php echo $this->h

elper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->keepAspectRatio(TRUE)->keepFrame(true)->resize(50,50); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />

                </a>
        </li>
    <?php $i++; endforeach; ?> 
```

脚本在这一点上死了。

```
$this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()); 
```

以这种方式查询主图片并且可以正常工作。

```
<a rel="lightbox[em_lightbox]"  href="<?php echo $this->helper('catalog/image')->init($_product, 'image'); ?>"  title="<?php echo $this->htmlEscape($this->getImageLabel())?>"> 
```

这是该产品的管理员视图的屏幕截图。[http://screencast.com/t/KVgvuvmE9a](http://screencast.com/t/KVgvuvmE9a) 这些是两个图像的 URL，它们是可访问的。

[http://www.eternalflowersmm.com/media/catalog/product/0/1/01218-600-1.jpg](http://www.eternalflowersmm.com/media/catalog/product/0/1/01218-600-1.jpg) http://www.eternalflowersmm.com/media/catalog/product/0/1/01218-600 -2_1.jpg

我已经尝试在 index.php 上将开发模式设置为 true 和 show_erros 1。没有显示错误。检查了errors.log 和system.log。什么都没有。

请帮助。

# jsf-2 - 在面板完成渲染之前，如何防止 JSF 中的表单提交？

> ID：11572840
> 
> 赞同：0
> 
> 时间：2012-07-20T04:18:27.280
> 
> 标签：jsf-2

在我的应用程序中，我有一个 SelecOneMenu，它显示了一些如下所示的项目。

```
<h:selectOneMenu id="cmbInput" value="#{myBean.val}" required="true" requiredMessage="Some Message">
            <f:selectItem itemLabel="Please select" noSelectionOption="true" />
            <f:selectItems value="#{myBean.items}" />
            <f:ajax event="valueChange" render="myPanel"/>
            <f:ajax listener="#{myBean.myListener}"/>            
</h:selectOneMenu> 
```

基本上，每当用户选择一个项目时，它都会在下面呈现一个面板，该面板有一些输入字段，如下所示..

```
<h:panelGroup id="myPanel" rendered="#{myBean.someFlag}">
   <h:inputText id="input1" value="#{myBean.someVal}" required="true">
</h:panelGroup> 
```

并且有一个“下一步”按钮将用户带到下一页。

我面临的问题是，每当用户从下拉列表中选择某些内容并在面板呈现之前单击下一个按钮时，它都会将他带到下一页。但我想阻止它，因为该面板包含需要输入的字段，所以我想在这种情况下单击下一步时抛出验证错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:05:58.633

你能做的几件事是

1.  显示正在加载... 图像，以便用户知道正在发生的事情。
2.  您可以使用 jQuery Block Ui 插件和 Loading... 图像。
3.  我怀疑 Javascript 验证会起作用，因为 html 元素在选择后不会立即出现，直到视图更新，并且在此窗口中用户可以单击下一步，您可以检查 html 元素的存在和您的 js 验证，或者您可以有服务器端验证。

希望这可以帮助.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:46:13.370

[JQuery Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)将是您的最佳选择。

# c - 是否有必要尝试连接到 getaddrinfo() 返回的所有地址？

> ID：11572843
> 
> 赞同：10
> 
> 时间：2012-07-20T04:18:35.537
> 
> 标签：c, sockets, network-programming, getaddrinfo

[Beej 的简单客户端](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#simpleclient)示例代码遍历从 getaddrinfo() 返回的所有 IP 地址，直到它可以连接到第一个。请参阅下面的代码。

这总是必要的，还是可以假设我们只需要尝试连接到 getaddrinfo() 返回的第一个地址？

```
memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;

if ((rv = getaddrinfo(argv[1], PORT, &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    return 1;
}

// ------------------------------------------------------------
// loop through all the results and connect to the first we can
for(p = servinfo; p != NULL; p = p->ai_next) {
    if ((sockfd = socket(p->ai_family, p->ai_socktype,
            p->ai_protocol)) == -1) {
        perror("client: socket");
        continue;
    }

    if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
        close(sockfd);
        perror("client: connect");
        continue;
    }

    break;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T06:14:16.753

是的，您应该遍历所有地址 - 特别是，考虑目标主机启用了 IPv6 地址但您的本地主机没有启用的情况。 `getaddrinfo()`将返回`AF_INET6`家庭地址，但`socket()`or`connect()`调用将失败。

您的主机也有可能支持多种协议实现`SOCK_STREAM`（例如，除了 TCP 之外的 SCTP）而目标主机不支持 - 因为您尚未设置`ai_protocol`提示结构的成员，所以`SOCK_STREAM`将返回代表所有支持套接字的协议的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:31:23.343

除了上面给出的其他答案之外，考虑对于大型网站等的常见情况，出于冗余目的，可能会发布多个 A 记录。如果`connect()`第一个地址失败，您也想尝试其他地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T05:54:06.237

让我们这样看tit ...您要连接的服务器主机可能有多个与之关联的地址，但实际的服务器程序只侦听其中一个地址。如果您的客户端不知道服务器程序正在侦听的确切地址，您必须尝试主机拥有的所有地址，直到找到正确的地址并可以连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T06:16:34.993

是的，您应该遍历所有这些地址——不能保证地址中的第一个（或您选择的任何内容）实际上是有效的。这就是为什么在教程中这样做的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T04:27:51.633

假设你是新的套接字，在这一点上。是的，这很重要，因为在使用 getaddrinfo 之后，您可以检索地址信息以进行进一步验证。

# matlab - 香农通道容量和熵的实现问题

> ID：11572844
> 
> 赞同：2
> 
> 时间：2012-07-20T04:18:50.120
> 
> 标签：matlab, entropy, information-theory

将相空间划分为多个`Alpha`分区后，旨在找出该分区的好坏程度。从这个角度来看，我们需要找出源熵。现在，我用谷歌搜索了很多，但找不到源熵是什么。谁能解释一下：

*   香农熵与源熵有何不同，源熵如何实现？

*   如何计算通道容量？下面是计算数据 x 的香农熵的代码。如果修改以下代码以计算通道容量，我将有义务。

```
x = x(1:end);
    if nargin == 1        
        p = freq(double(x));
    else
        if numel(x) ~= numel(y)
            e = -1;
            warning('Sizes of vector do not match.');
            return;
        end
        y = y(1:end);
        p = joint_freq(double(x), double(y));
    end

    % Compute Shannon entropy
    xlogy(repmat(256, [length(p) 1]), p);
    e = -sum(p .* xlogy(repmat(256, [length(p) 1]), p)); 
```

*   用较少的技术术语来说，Kolgomorov 熵和香农熵有什么区别？理解 Kolgomorov 复杂度返回的复杂度数的重要性/含义令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:19:56.873

首先解决您的最后一个问题，Kolmogorov 熵是系统可以采取的可能轨迹的熵，即它是系统可能演化的“随机性”的度量。另一方面，香农熵是系统状态随机性的度量。`x`从您正在比较的事实`y`，而不是 的多个轨迹`x`到 的多个轨迹`y`，看起来您应该计算香农熵。

通常我们想要计算一种叫做互信息的东西，它是衡量我们的信号的熵或“随机性”在我们以其他信号为条件时减少了多少的量度。对于上面的代码，您正在尝试测量 中有多少熵`x`，或者`x`给定中有多少熵`y`。`x`这两个值之间的区别在于我们通过了解发现了多少`y`。我们将这种不同称为互信息，或者，如果我们首先除以您正在查看的系列的时间长度，则称为通道容量。（源熵只是 的熵`y`，假设`y`是你的“源”）。

您的代码存在一些问题，如果不知道`joint_freq`. 要计算`x`给定的熵，`y`您应该采用联合概率分布的 2D 矩阵，计算当前`x`方向上的熵之和，然后还要沿剩余维度取平均值。

# c++ - 为什么使用 _ITERATOR_DEBUG_LEVEL=0 销毁向量时，Visual C++ 2010 仍然调用 Orphan_all？

> ID：11572845
> 
> 赞同：1
> 
> 时间：2012-07-20T04:19:06.940
> 
> 标签：c++, visual-studio, compiler-construction, release

Visual C++ 新手在这里。（我在很久以前就开始使用 Visual C++ 6，从那时起偶尔使用 IDE，但仍然觉得不舒服。给我一个好的旧命令行并离开我的草坪，这就是我的态度。）

我正在帮助一个使用 Visual C++ 2010 构建的应用程序（它是一个包含 20 个子项目的解决方案文件），并注意到一些奇怪的事情：即使 _ITERATOR_DEBUG_LEVEL 和 _SECURE_SCL 在项目的属性中都定义为零，为其中一个添加 /FAs .cpp 文件仍然显示对检查过的迭代器的调用，例如

```
 call    DWORD PTR __imp_?_Orphan_all@_Container_base0@std@@QAEXXZ 
```

我已经验证（使用 printf）这两个定义都为零。此外，这些调用似乎非常脆弱。如果我从所涉及的函数中删除看似微不足道的代码量，对 Orphan_all 的调用就会消失。

那么：为什么在使用 _ITERATOR_DEBUG_LEVEL=0 销毁向量时，Visual C++ 2010 仍然调用 Orphan_all ？（另外，我也听说windows sdk v7.1和一些游戏中的cl.exe本身似乎都从msvcp100.dll导入_Orphan_all@_Container_base0@std@@QAEXXZ，这对于发布的产品来说似乎很奇怪。msvcp100应该怎么做？ .dll 的 _Orphan_all@_Container_base0@std@@QAEXXZ 可以做——它是无操作的，还是它实际上做的事情，比如 msvcp100d.dll 中的那个？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:24:38.190

**编辑。**

因此，由于 _Vector_val 继承自 _Container_base

```
#if _ITERATOR_DEBUG_LEVEL == 0
typedef _Container_base0 _Container_base;
typedef _Iterator_base0 _Iterator_base;

 #else /* _ITERATOR_DEBUG_LEVEL == 0 */
typedef _Container_base12 _Container_base;
typedef _Iterator_base12 _Iterator_base;
 #endif /* _ITERATOR_DEBUG_LEVEL == 0 */ 
```

其中 _Container_base0 是

```
 // CLASSES _Container_base*, _Iterator_base*
struct _CRTIMP2_PURE _Container_base0
    {   // base of all containers
    void _Orphan_all()
        {   // orphan all iterators
        }

    void _Swap_all(_Container_base0&)
        {   // swap all iterators
        }
    }; 
```

当 _ITERATOR_DEBUG_LEVEL 为 0 时，您使用空的 _Orphan_all。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:24:20.137

很可能该函数是通过 SFINAE 选择的（而不是库中的*#ifdef* -ed），在这种情况下可能有一个空`_Orphan_all`函数。如果您在调试模式下编译，该功能仍然存在，一旦您启动优化器，它应该能够删除调用。

请注意，我没有 Windows 框来检查 Visual Studio 中标准库的实现是什么样的，所以这只是看着我的水晶球的随机猜测。

# performance - doSNOW/foreach 性能问题

> ID：11572849
> 
> 赞同：1
> 
> 时间：2012-07-20T04:19:36.173
> 
> 标签：performance, r, parallel-processing

我有一个循环，它正在加载大约 5MB 大小的文件，而不是在它们上运行一些计算。我需要加载 500-1000 个。对于 foreach 来说，这似乎是一项轻松的工作。

我正在这样做，但 doSNOW 的表现似乎很可怕。

我找到了这篇文章，这个家伙似乎也遇到了同样的问题：

[http://statsadventure.blogspot.com/2012/06/performance-with-foreach-dosnow-and.html](http://statsadventure.blogspot.com/2012/06/performance-with-foreach-dosnow-and.html)

所以有几个问题。

1.  有没有 doSnow 的替代品？我意识到有 doMC，但我正在运行 Windows。
2.  linux上的doMC比doSNOW快得多吗？
3.  无论如何，是否可以从工人那里输出到屏幕，这样我至少可以了解我的工作进展如何。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:39:21.590

多个线程试图访问硬盘上的不同文件会导致性能非常差。

但是，如果有足够的时间进行计算，负载平衡并行化仍可能带来改进：节点将不同步，因此硬盘请求将一个接一个地出现，而不是同时出现。

这是一个简单的`snow::clusterApply`vs 负载平衡的例子`snow::clusterApplyLB`。我使用雪而不是并行，因为它提供了时间和绘图：

```
library (snow)
system(sprintf('taskset -p 0xffffffff %d', Sys.getpid()))
cl <- makeSOCKcluster (rep ("localhost", 2))

times <- sample (1:6) / 4
times
## [1] 1.50 0.25 0.75 1.00 0.50 1.25

t <- snow.time (l <- clusterApply (cl, times, function (x) Sys.sleep (x)))
plot (t, main = "\n\nclusterApply") 
for (i in 1 : 2)
  points (t$data[[i]][,"send_start"], rep (i, 3), pch = 20, cex = 2) 
```

![集群应用](../Images/c8dc495465116c23d157c89c3f44c73c.png)

```
tlb <- snow.time (l <- clusterApplyLB (cl, times, function (x) Sys.sleep (x)))
plot (tlb, main = "\n\nclusterApplyLB")
for (i in 1 : 2)
  points (tlb$data[[i]][,"send_start"], rep (i, 3), pch = 20, cex = 2) 
```

![clusterApplyLB](../Images/570764dea897c1b728d46a7477ecec67.png)

黑点标志着新函数调用的开始。如果函数从加载文件开始，所有节点总是会尝试同时访问硬盘，`clusterApply`因为集群在处理新一轮任务之前会等待所有节点返回结果。使用`clusterApplyLB`，下一个任务在节点返回结果后立即分发。即使任务花费基本相同的时间，它们也会很快失去同步，并且文件加载不会完全在同一时间。

（不过，我不知道这是否是实际问题）

# php - android 用户请求好友列表得到一个空值

> ID：11572851
> 
> 赞同：0
> 
> 时间：2012-07-20T04:19:44.110
> 
> 标签：php, android

运行此代码时出现空点异常。

我试图做的是...从应用程序获取用户邮件到字符串 uemail 并尝试获取与 uemail 成为朋友的朋友。

活动

```
public class MainActivity extends Activity {
    protected static final String TAG_Name = null;
    int a;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        a = 2;
        Button ref = (Button)findViewById(R.id.button1);

        ref.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                InputStream is = null;
                String result = "";

                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                String uemail = String.valueOf(a);
                nameValuePairs.add(new BasicNameValuePair("place_id", uemail));
                try {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost(
                            "http://www.hopscriber.com/test.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();
                } catch (Exception e) {
                    Log.e("log_tag", "Error in http connection" + e.toString());
                }
                // convert response to stringtry
                try {
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();

                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("log_tag", "Error converting result " + e.toString());
                }
                try {
                    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

                    JSONArray jsonArray = new JSONArray(result);

                    if (jsonArray != null) {
                        for (int i = 0; i < jsonArray.length(); i++) {
                            JSONObject object = (JSONObject) jsonArray.get(i);

                            HashMap<String, String> map = new HashMap<String, String>();

                            map.put(TAG_Name, object.getString("place_id"));

                            contactList.add(map);

                        }
                    }
                    TextView z = (TextView)findViewById(R.id.textView1);

                    z.setText(TAG_Name);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }); 
```

php

```
<?php
include "db_config.php";

$q=mysql_query("SELECT 'name' FROM places WHERE place_id='".$_REQUEST['place_id']."'");

while($e=mysql_fetch_assoc($q))
        $output[]=$e;

print(json_encode($output));

mysql_close();
?> 
```

我似乎找不到答案....请帮帮我..它老虎空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:37:55.320

> 在 hopscriber.com.Menu.tryme(Menu.java:224)

检查`tryme`文件`Menu.java`第 224 行中的方法。那里发生空指针异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:55:10.027

我注意到该`mysql_query`行存在问题，并且在子句中`" WHERE uname='".$_REQUEST['uemail']."'");`未正确转义以下内容。`WHERE`

正确的 PHP 如下。

```
 <?php
 $sql=mysql_query("SELECT`uname`,`place`,`time` FROM `check_in` 
 WHERE uname='".$_REQUEST['uemail']."'");
 while($row=mysql_fetch_assoc($sql)) $output[]=$row;
 print(json_encode($output));
 mysql_close();
 ?> 
```

只要您从不调用，您的 java 看起来就很好`tryme()`（比如在没有事先定义的 main 方法`userName`中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T04:36:06.597

警告

```
uname='".$_REQUEST['uemail']."'" 
```

是一个海量的 SQL 注入攻击漏洞。请使用正确的变量转义。

现在，我们在哪里？

在 PHP 方面，您有一个 " 之后`check_in`出现语法错误。您将没有 JSON 数组。

没有更多代码或日志，无法确定 NULL 指针异常在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T04:32:30.490

这条线有问题...

```
 private void tryme() {
    // TODO Auto-generated method stub

    InputStream is = null;
    String result = "";
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    String uemail = String.valueOf(usernameName);  
    // here the uemail is getting null 
```

`uemail`is的值，`NUll`因此发生空指针异常。

# php - 如何在 Agile Toolkit 中添加从另一个模型表计算的字段？

> ID：11572856
> 
> 赞同：1
> 
> 时间：2012-07-20T04:20:48.020
> 
> 标签：php, user-interface, frameworks, atk4

atk4.2.1

我有两个模型发票和付款，我想在发票中添加一个字段（表达式），我可以计算已经支付的金额（它可以有几个部分付款），我添加了一个连接和一个表达式，他们没有工作，写那个表达式的正确方法是什么？

```
class Model_Invoice extends Model_Table {
    public $table='invoice';
    function init(){
        parent::init();

        $this->hasOne('Customer');
        $this->hasOne('Plan');
        $this->addField('date')->type('date');
        $this->addField('amount')->type('money');
        $this->addField('cancelled')->type('boolean')->defaultValue(false);

        $this->join('payment','id');
        $this->addExpression('amountPaid')->set('sum(payment.amount)')
       //*****above expression is not working*********//
    }
} 
```

.

```
class Model_Payment extends Model_Table {
    public $table='payment';
    function init(){
        parent::init();

        $this->hasOne('Invoice');
        $this->addField('date')->type('date');
        $this->addField('concept');
        $this->addField('amount')->type('money');
    }
} 
```

我可能会这样表达：

```
$this->addExpression('amountPaid')->set('(SELECT sum(amount) FROM payment where invoice_id=**CURRENT ID**)'); 
```

但是我如何获得模型中的**当前 ID**？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:22:56.907

Got it! It was somehow documented here: [http://agiletoolkit.org/learn/understand/model/intro](http://agiletoolkit.org/learn/understand/model/intro)

This is the right way to do it: Inside Model_Invoice:

```
 $this->hasMany('Payment');
    $this->addExpression('amountPaid')->set($this->refSQL('Payment')->sum('amount')); 
```

Now I really understood what's the porpuse of hasMany()

# ruby-on-rails - 设计：如何手动设置 remember_user_token cookie？

> ID：11572858
> 
> 赞同：3
> 
> 时间：2012-07-20T04:21:01.507
> 
> 标签：ruby-on-rails, cookies, devise, session-cookies

我在 rails 3.0.0 应用程序中使用 devise 1.1.RC0 进行用户身份验证。

由于这个版本的设计存在问题，而且我们的登录过程发生在（安全）子域上，当用户登录时，`remember_user_token`cookie 没有设置。这只发生在涉及子域的生产环境中：应用程序将`remember_user_token`在本地测试时正确设置 cookie。

为了解决这个问题，我调整了我的`user_sessions#create`操作以`remember_user_token`手动设置：

```
 def create
    user = User.where("lower(email) = ?", params[:user][:email].downcase).first
    if user and user.valid_password?(params[:user][:password])
      sign_in(:user, user)
      current_user.remember_me = true if params[:user][:remember_me]

      #ensure remember_user_token is set
      if Rails.env.production?
        cookies.signed["remember_user_token"] = {
          :value => user.class.serialize_into_cookie(user),
          :expires => 3.months.from_now,
          :domain => ".app_name.com",
        }
      end

    else
      flash[:error] = "Login incorrect"
      render :action => 'new'
    end
  end 
```

这确实`remember_user_token`在生产中设置了 cookie。从那里，如果我使用浏览器工具删除会话 cookie，然后刷新页面，会话 cookie 会弹回并保持登录状态——我认为这是`remember_user_token`cookie 负责的。

但是，如果我在登录时关闭浏览器并重新启动计算机，当我重新打开计算机并转到我的应用程序的 URL 时，我将不再登录。

**设置此`remember_user_token`cookie 的正确方法是什么？**我错过了什么？我会很感激任何帮助。

这是我的`session_store`初始化程序：

```
if Rails.env.production?
  AppName::Application.config.session_store :cookie_store, :key => '_app_name_session', :domain => '.appname.com'
else
  AppName::Application.config.session_store :cookie_store, :key => '_app_name_session'
end 
```

`User`这是我的模型中的相关代码：

```
 devise :database_authenticatable, :registerable, 
         :recoverable, :rememberable, :trackable, :validatable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:06:57.350

在将用户传递给 serialize_into_cookie 之前需要重新加载用户：

```
 sign_in(:user, user)
  current_user.remember_me!

  #ensure remember_user_token is set
  if Rails.env.production?
    cookies.signed["remember_user_token"] = {
      :value => user.class.serialize_into_cookie(user.reload),
      :expires => 3.months.from_now,
      :domain => ".app_name.com",
    }
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-04T22:50:56.970

## 简单的方法

```
@user.remember_me = true
sign_in(@user) 
```

* * *

*^(资料来源：[在 Devise 中为用户手动登录时，如何将 remember_me 设置为 yes？](https://stackoverflow.com/a/18434995/1533054))*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T16:16:06.127

这是我最终得到的实际代码：

```
def set_current_user(user, remember_me: false)
  sign_out(:user)
  sign_in(:user, user)

  if remember_me
    user.remember_me!
    cookies.signed[:remember_user_token] = {
      value: user.class.serialize_into_cookie(user.reload),
      expires: user.class.remember_for.from_now
    }
  end
end 
```

# firefox - 移动浏览器将在何时以及何时支持 getUserMedia？

> ID：11572859
> 
> 赞同：3
> 
> 时间：2012-07-20T04:21:05.240
> 
> 标签：firefox, google-chrome, mobile, html5-video, webrtc

我已经使用“前沿”HTML5/WebRTC API 编写了一个网络应用程序（参见下面的代码）。这适用于 Chrome v20（启用了 MediaStream 标志）和最新的 FF Nightly build 17.0a1（创建了“media.navigator.enabled”首选项并将其设置为 true）。我还没有让它在 Opera 上运行。

但是，我的问题是，这将适用于这些浏览器的未来移动版本吗？如果是这样，什么时候？

```
if(navigator.webkitGetUserMedia){   
   //For WebKit (Chrome/ Safari)
   navigator.webkitGetUserMedia({video: true, audio: false}, function(localMediaStream)      {
          $("#video").attr("src",window.webkitURL.createObjectURL(localMediaStream)); 
    }, function(e) {
      console.log(e);
    });
}else if(navigator.mozGetUserMedia){
  //For Firefox
  navigator.mozGetUserMedia({video: true}, function(localMediaStream) {
  var video = document.querySelector('video');  
  video.src = localMediaStream;
  video.play();
    },  function(e) {
      console.log(e);
    });
}else if(navigator.getUserMedia){
    //For Opera
    navigator.getUserMedia({audio: false, video: true}, function(localMediaStream) {
    $("#video").attr("src", localMediaStream);                                  
    },  function(e) {
      console.log(e);
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:38:11.050

目前[Opera Mobile 12.0 仅支持 getUserMedia API](http://caniuse.com/stream) - 但是我预计其他移动客户端将在 2013 年初开始支持它。

**于 2014 年 5 月 21 日星期三凌晨 3:57 更新（UTC）**

现在，**所有主要的三个浏览器**都在 android 上**支持 WebRTC** ( *getUserMedia + PeerConnection + RTCDataChannel* )：

1.  [Firefox](https://play.google.com/store/apps/details?id=org.mozilla.firefox) -*它是一个 Google App Store 链接*
2.  [Chrome](https://play.google.com/store/apps/details?id=com.chrome.beta&hl=en) -*它是一个 Google App Store 链接*
3.  [Opera](https://play.google.com/store/apps/details?id=com.opera.browser) -*它是一个 Google App Store 链接*

您可以使用[cross-walk 项目](https://crosswalk-project.org/)并将您的 HTML 编译成跨平台的 apk 文件，它会工作！它支持所有 WebRTC 功能，即*getUserMedia + PeerConnection + RTCDataChannel*。

# c# - 解析 XML 属性的最佳方法

> ID：11572869
> 
> 赞同：0
> 
> 时间：2012-07-20T04:22:40.957
> 
> 标签：c#, .net, xml, winforms

我有以下需要解析的 XML 文档：

```
...
<tx size_total="143">
  <type size="1" start_key="02">STX</type>
  <type size="3">Type</type>
  <type size="3" decimal="true">Serial</type>
  <type size="3" key="23 64 31">Function_Code</type>
  <type size="2" decimal="true">LIU</type>
  <type size="1">Status</type>
  <type size="2" repeat="64" binary ="true" binary_discard="2">Value</type>
  <type size="1">ETX</type>
  <type size="1">LRC</type>
... 
```

我编写了以下代码进行解析：

```
XmlNodeList typeNodeList = txNode.SelectNodes(TYPE_NODE);
CommRuleContainer rc = new CommRuleContainer(funcNode.Attributes.GetNamedItem("name").Value,
                        txNode.Attributes.GetNamedItem("size_total").Value, funcNode.Attributes.GetNamedItem("id").Value);
foreach (XmlNode tNode in typeNodeList)
{
    int size = Convert.ToInt32(tNode.Attributes.GetNamedItem("size").Value);
    int repeat = Convert.ToInt32(tNode.Attributes.GetNamedItem("repeat").Value);
    int binary_discard = Convert.ToInt32(tNode.Attributes.GetNamedItem("binary_discard").Value);
    string start_key = tNode.Attributes.GetNamedItem("start_key").Value;
    string key = tNode.Attributes.GetNamedItem("key").Value;
    bool convert_decimal = false, convert_binary = false;
    if (tNode.Attributes.GetNamedItem("decimal").Value == "true")
                                convert_decimal = true;
    if (tNode.Attributes.GetNamedItem("binary").Value == "true")
                                convert_binary = true;
    rc.AddTypeDefinition(tNode.Value, size, repeat, binary_discard, convert_decimal, convert_binary);
} 
```

如果我尝试获取不存在的 certian 属性的值，则代码将引发 nullreferenceexception（IE： tNode.Attribute.GetNamedItem("repeat").value 在所有没有重复属性的节点上都失败）。有什么方法可以验证某个属性是否存在？

上面的代码也根本不干净。组织上述代码的最佳方法是什么？

编辑：我知道您可以在从属性中获取值之前单独检查属性是否为空的方法，但这会使代码看起来很脏，因为我需要编写很多 ifs（或嵌套 ifs）

```
if (tNode.Attributes.GetNamedItem("decimal") != null)
   if (tNode.Attributes.GetNamedItem("decimal").Value == "true")
       convert_decimal = true; 
```

如果我必须编写更多属性，从长远来看，这将成为问题。我想知道更多有组织的方法（也许可以枚举 XML 属性？我不知道。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:28:33.733

```
if(null != tNode.Attributes.GetNamedItem("repeat"))
   repeat = Convert.ToInt32(tNode.Attributes.GetNamedItem("repeat").Value); 
```

**更新**

既然您知道不要获得空引用，

最好的解决方案是编写一个类，您可以使用`XmlSerializer`.

这篇关于[自定义序列化](http://csharp-slackers.blogspot.in/2008/09/use-xml-serialization-with-custom_20.html)的文章将帮助您入门。

> 要使用 XML 序列化，您必须首先使用指示所需 XML 映射的属性标记数据对象。这些属性位于 System.Xml.Serialization 命名空间中，包括以下内容：
> 
> XmlRoot 指定 XML 文件的根元素的名称。默认情况下，XmlSerializer 将使用类的名称。该属性可以应用于类声明。

*   XmlElement 指示要用于属性或公共变量的元素名称。默认情况下，XmlSerializer 将使用属性或公共变量的名称。
*   XmlAttribute 指示属性或公共变量应序列化为属性，而不是元素，并指定属性名称。
*   XmlEnum 配置序列化枚举值时应使用的文本。如果不使用 XmlEnum，将使用枚举常量的名称。
*   XmlIgnore 指示不应序列化属性或公共变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T05:03:20.773

同意@nunespascal，这是我已经为您准备的代码.. 他回答得比我快.. 哈哈：

```
static void Main(string[] args)
        {
            var serialized = @"
<tx size_total=""143""> 
  <type size=""1"" start_key=""02"">STX</type> 
  <type size=""3"">Type</type> 
  <type size=""3"" decimal=""true"">Serial</type> 
  <type size=""3"" key=""23 64 31"">Function_Code</type> 
  <type size=""2"" decimal=""true"">LIU</type> 
  <type size=""1"">Status</type> 
  <type size=""2"" repeat=""64"" binary =""true"" binary_discard=""2"">Value</type> 
  <type size=""1"">ETX</type> 
  <type size=""1"">LRC</type></tx>";
            var deserialized = serialized.XmlDeserialize<Tx>();
        }
    }

    [XmlRoot("tx")]
    public class Tx
    {
        [XmlAttribute("size_total")]
        public int TotalSize { get; set; }

        [XmlElement("type")]
        public List<TxType> Types { get; set; }

        public Tx()
        {
            Types = new List<TxType>();
        }
    }

    public class TxType
    {
        [XmlAttribute("size")]
        public string Size { get; set; }

        [XmlAttribute("decimal")]
        public bool IsDecimal { get; set; }

        [XmlAttribute("binary")]
        public bool IsBinary { get; set; }

        [XmlAttribute("start_key")]
        public string StartKey { get; set; }

        [XmlAttribute("key")]
        public string Key { get; set; }

        [XmlAttribute("repeat")]
        public int Repeat { get; set; }

        [XmlAttribute("binary_discard")]
        public int BinaryDiscard { get; set; }

        [XmlText]
        public string Value { get; set; }
    } 
```

这是我的反序列化助手类：

```
public static class StringExtensions
    {
        /// <summary>
        /// Deserializes the XML data contained by the specified System.String
        /// </summary>
        /// <typeparam name="T">The type of System.Object to be deserialized</typeparam>
        /// <param name="s">The System.String containing XML data</param>
        /// <returns>The System.Object being deserialized.</returns>
        public static T XmlDeserialize<T>(this string s)
        {
            var locker = new object();
            var stringReader = new StringReader(s);
            var reader = new XmlTextReader(stringReader);
            try
            {
                var xmlSerializer = new XmlSerializer(typeof(T));
                lock (locker)
                {
                    var item = (T)xmlSerializer.Deserialize(reader);
                    reader.Close();
                    return item;
                }
            }
            catch
            {
                return default(T);
            }
            finally
            {
                reader.Close();
            }
        }
    } 
```

这应该让你有一个好的开始。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T04:57:18.533

好吧，这是一个完全未经测试的混搭功能，YMMV。

```
static class XmlNodeExtensions {
    public static T GetAttrValue(this XmlNode node, string attrName) {
        return GetAttrValue(node, attrName, default(T));
    }
    public static T GetAttrValue(this XmlNode node, string attrName, T defaultValue) {
        var attr = node.Attributes.GetNamedItem(attrName);
        if (attr != null) {
            var value = attr.Value; 
            var tT = typeof(T);       // target Type
            if (tT.IsAssignableFrom(typeof(string)))
            {
                return (T)value;
            } else
            {
                var converter = TypeDescriptor.GetConverter(tT);
                if (converter.CanConvertFrom(typeof(string)))
                {
                    return (T)converter.ConvertFrom(value);
                } else
                {
                    throw new InvalidOperationException("No conversion possible");
                }
            }
        } else {
            return defaultValue;
        }
    }
} 
```

.. 然后 ..

```
var id = node.GetAttrValue<int>("size");
var name = node.GetAttrValue("name", "no name!");
var titleOrNull = node.GetAttrValue<string>("title"); 
```

.. 或者其他的东西。

# asp-classic - 如何从其他网站检索信息？

> ID：11572872
> 
> 赞同：0
> 
> 时间：2012-07-20T04:23:06.643
> 
> 标签：asp-classic

我正在尝试从其他网站检索一些信息到我的网站（合法）...我是 ASP Classic 和 XML DOM 的新手。我知道 XML DOM，但没有足够的知识来使用它。我正在使用下面的代码从其他网站获取页面，并且工作正常

```
Dim xml
set xml = Server.CreateObject("Microsoft.XMLHTTP")
xml.Open "GET", "http://www.midwayusa.com/Product/"&sCode  , false
xml.Send
Dim strRetrive
strRetrive=xml.responseText 
```

现在，问题是获取此页面的产品状态。我看过这个页面的源代码，它如下：

```
 <div id="status_block">
            <span id="persistentStatus">Status:</span>
                <link itemprop="availability" href="http://schema.org/InStock" />
            <div id="productStatus">
                Available
                <a class="helpicon mimo" title="Available" href="/Content/htm/Legacy/product_status.htm#200">
                </a>
            </div>
   ..... 
```

我想从 DIV id = productStatus 中获取价值。据我所知，我可以使用 XPath Query 或其他工具吗？如果是这样，你能给我更多关于这方面的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:16:05.633

XMLHTTP 将为您提供全文。这就是它的工作方式。通常，如果您可以控制您请求的站点，那么您可以确保服务器返回的内容最少。它在使用 XMLHTTP 请求 JSON 或稍后可以重用的 XML 数据时很有用。

如果您正在进行抓取，请从您对零控制的站点进行。然后你会被 HTML 作为返回的响应卡住。您需要做的是使用 vbscripts 字符串函数（例如 replace 和 split）来删除 div id="productStatus" 之前的所有文本，如果您知道没有更多嵌套的 div，那么您可以删除 /div> 之后的所有内容结束标记。这让你的字符串中只有那个 div 。

每种情况都不同，但要习惯使用字符串函数来清理数据并将其修剪为对您有用的内容。

# ios - 有什么方法可以自定义 iOS SDK 3.0b 中的 FBFriendPickerViewController 吗？

> ID：11572878
> 
> 赞同：1
> 
> 时间：2012-07-20T04:24:12.853
> 
> 标签：ios, facebook-ios-sdk

例如，如果我想在 FBFriendPickerViewController 的 tableview 上添加一个搜索栏，我应该在编程代码中添加什么？

```
self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0,self.friendPickerController.tableView.frame.size.width, 0)];
self.friendPickerController.tableView.tableHeaderView = self.searchBar;
[self.searchBar sizeToFit]; 
```

尝试并不成功。FBFriendPickerViewController 是一种相当方便的方式，但是....没有搜索栏就不可能以有效的方式找到朋友.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T23:27:31.173

从[这里](https://developers.facebook.com/docs/howtos/add-search-to-friend-picker-using-ios-sdk/)的 Facebook 开发人员文档：

> 自定义好友选择器
> 
> 默认好友选择器显示方式如下：
> 
> *   完成按钮可见
> *   取消按钮可见
> *   显示好友头像
> *   好友按名字排序
> *   朋友的名字以名字在前显示
> 
> 您可以通过配置 FBFriendPickerViewController 的相关属性来自定义这些默认显示功能：
> 
> ```
> // Initialize the friend picker
> FBFriendPickerViewController *friendPickerController = 
>     [[FBFriendPickerViewController alloc] init];
> 
> // Allow the selection of only one friend
> friendPickerController.allowsMultipleSelection = NO;
> 
> // Hide the friend profile pictures
> friendPickerController.itemPicturesEnabled = NO;
> 
> // Configure how friends are sorted in the display.
> // Sort friends by their last names.
> friendPickerController.sortOrdering = FBFriendSortByLastName;
> 
> // Configure how each friend's name is displayed.
> // Display the last name first.
> friendPickerController.displayOrdering = FBFriendDisplayByLastName;
> 
> // Hide the done button
> friendPickerController.doneButton = nil;
> ...
> 
> // Hide the cancel button
> friendPickerController.cancelButton = nil; 
> ```
> 
> 您还可以显示登录者的朋友的朋友列表：
> 
> ```
> // Initialize the friend picker
> FBFriendPickerViewController *friendPickerController = 
>     [[FBFriendPickerViewController alloc] init];
> // Get friend's list from one of user's friends.
> // Hard-coded for now.
> friendPickerController.userID = @"100003086810435";
> ... 
> ```
> 
> 注意：如果该朋友已关闭所有 Facebook 应用程序，则该朋友的朋友列表可能不会显示。
> 
> 如果您需要进一步的自定义，例如更改好友选择器颜色或向显示添加更多好友信息，请考虑构建您自己的选择器。

# python - 是否有任何 python 模块可以接受文本并向其添加 python 语法突出显示？

> ID：11572881
> 
> 赞同：1
> 
> 时间：2012-07-20T04:24:27.857
> 
> 标签：python, google-app-engine, syntax-highlighting

是否有任何我可以与谷歌应用引擎一起使用的 python 模块，这些模块采用这样的代码字符串：

```
 <pre>
    a = 1
    while a < 10:
        print a
        a += 1
    </pre> 
```

然后像基本的 python 编辑器一样为文本着色（或像堆栈溢出）？

这将突出显示 pre 标签内的内容并在线显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:26:36.683

您正在寻找[Pygments](http://pygments.org/)。

> [Pygments] 是一个通用的语法高亮工具，用于各种软件，例如论坛系统、wiki 或其他需要美化源代码的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:42:54.567

看看 pygments [http://pygments.org/](http://pygments.org/)

# python - 烧瓶入门

> ID：11572884
> 
> 赞同：0
> 
> 时间：2012-07-20T04:25:04.253
> 
> 标签：python, flask

我从烧瓶开始，想看看社区有多活跃。但是我找不到烧瓶的任何谷歌组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:23:57.043

不，没有谷歌群组。他们还使用了其他几个渠道，您可以在这里找到它们：http: [//flask.pocoo.org/community/](http://flask.pocoo.org/community/)

# node.js - 将节点放在heroku上-入门

> ID：11572885
> 
> 赞同：0
> 
> 时间：2012-07-20T04:25:31.383
> 
> 标签：node.js, heroku

我是 Node 和 Heroku 的初学者。

正在浏览此链接 **https://devcenter.heroku.com/articles/nodejs**，其中有一个“**使用 NPM 声明依赖关系**”部分。

```
{
  "name": "node-example",
  "version": "0.0.1",
  "dependencies": {
    "express": "2.5.x"
  },
  "engines": {
    "node": "0.8.x"
  }
} 
```

从本节中我无法理解的是我将 package.json 文件保存在哪里。还有我如何在本地安装依赖项

谢谢阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:33:31.187

将 package.json 保存在与源代码相同的目录中（无论如何，对于初学者来说）。使用 npm 安装依赖项（例如，“npm install express@2.5.x”）。安装[Heroku toolbelt](https://toolbelt.heroku.com/)后，您可以使用“foreman start”在本地运行服务器，它的运行方式与在 Heroku 上远程运行的方式相同。

# iphone - UIViewController 中的帧大小问题

> ID：11572887
> 
> 赞同：0
> 
> 时间：2012-07-20T04:25:35.643
> 
> 标签：iphone, objective-c, ios, ipad

所以我想添加一个宽度为 450 和屏幕高度的 UIViewController，所以如果它是纵向的，那么高度是 1024，如果是横向，那么高度是 768。这个视图控制器，称为 ProfileViewController 有一个设置为 450 和1024\. 自动调整大小设置为具有灵活高度。

```
 profViewController = [[ProfileViewController alloc] initWithNibName:@"ProfileViewController" bundle:nil];
            self.profileViewController_ = profViewController;
            [profViewController release]; 
```

因此，在 ProfileViewController 中，我还初始化了另一个名为 FeedsViewController 的视图控制器。现在的问题是，在 profViewController viewDidLoad 中，无论方向如何，高度总是设置为 1024。我怎样才能让它适应我的方向？我已经尝试设置 profViewController 的边界，但是这个更改会在 viewDidLoad 之后反映出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:35:09.083

要找到高度和宽度，试试这个

> ```
> CGRect screenRect = [[UIScreen mainScreen] bounds];
> CGFloat screenWidth = screenRect.size.width;
> CGFloat screenHeight = screenRect.size.height; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T05:24:11.893

覆盖 profViewController 的以下方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown){
    self.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, 450, 1024);

}
else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeRight || toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft){
    self.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, 450, 768);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:02:47.867

如果您以与在 NIB 中`FeedsViewController`设置视图框架相同的方式设置视图框架，则应该会自动正确调整大小。`ProfileViewController`也就是说，你给它一个你想要的相对于外部视图的初始大小，然后让系统的自动调整大小行为从那里获取东西。

在里面尝试这样`ProfileViewController`的事情`viewDidLoad`：

```
// create and init self.feedsViewController
// ...

CGRect b = self.view.bounds;
self.feedsViewController.view.frame = CGRectMake((b.size.width - 450) / 2, 0, 450, b.size.height);
self.feedsViewController.view.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T07:46:13.780

如果你想改变你的 tableview 框架，你应该在`viewDidAppear:`而不是`viewDidLoad:`.

# jquery - 从其他 focusout() 事件触发 focusout() 事件

> ID：11572889
> 
> 赞同：0
> 
> 时间：2012-07-20T04:25:50.307
> 
> 标签：jquery

我在 jquery 中使用焦点事件进行一次验证。喜欢

`$("#A").focusout(function ()` 这里'A'是文本框的ID

该函数包含一组语句。我需要为另一个文本框的焦点输出函数调用相同的函数。我怎么能这样触发？请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:20:52.903

这应该可以帮助您：

```
$("#myTextBox").trigger("focusout"); 
```

# jquery - jquery表单：选择菜单无法显示所选选项

> ID：11572892
> 
> 赞同：0
> 
> 时间：2012-07-20T04:26:11.117
> 
> 标签：jquery, forms

我正在开发一个用于将数据提交到数据库的 jQuery 表单。该表单也是可编辑的，我无法在编辑时从数据库中检索选项的选定值。

换句话说，我无法从数据库中读取所选选项并在显示表单时将其标记为选中。

ve_type 是提交表单时存储所选值的变量。ve_type 是从数据库中读取时选择的值所在的变量。

此逻辑适用于输入类型文本，但选择菜单失败。

任何帮助深表感谢。

```
<label for="vetype" class = "select"><strong>Vehicle Type:</strong></label>
<select name="vetype" id="vetype" value="$ve_type" />");
<option value="car">Car</option>
<option value="van">Van</option>
<option value="truck">Truck</option></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:53:31.547

在我看来，选择没有属性值，您应该尝试在选项上添加选择的属性：

`$("#vetype option[value='yourSelectedValue']").attr('selected','selected');`

# java - 布局中的内存分配

> ID：11572896
> 
> 赞同：4
> 
> 时间：2012-07-20T04:26:37.800
> 
> 标签：java, android, memory-management

在我的项目中，我有一个由单个 XML 布局（由 setContentView 启用）组成的简单活动。该项目还有其他活动。

布局基本上由两个 .jpg 图像组成。第一个大小为 25kB，大小为 400x153 像素。第二个有 4kB 并且是 150x50 像素。

尽管有这个非常简单的上下文，DDMS 告诉我我有 13MB 分配给我的程序，我认为这是巨大的，因为我只加载了两个小图像，并且某些设备的每个程序的最大堆大小为 16MB。

在这种布局中堆这么大是正常的吗？

**编辑**：HProf转储：

> 问题嫌疑人1：“”加载的类“android.content.res.Resources”占用9429232（70.39%）字节。内存在“”加载的“java.lang.Object[]”的一个实例中累积。
> 
> 问题嫌疑人2：“android.graphics.Bitmap”的3个实例，由“”加载，占用2147960（16.03%）字节。

```
Biggest instances:
•android.graphics.Bitmap @ 0x41407b98 - 1,048,648 (7.83%) bytes. 
•android.graphics.Bitmap @ 0x4169e6a0 - 979,256 (7.31%) bytes. 
```

我真的无法解释这一点。但似乎我的其他资源正在预先加载？（在我进入他们各自的活动之前？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:31:31.550

如果你说这就是你的程序试图做的所有事情，那很正常。位图确实会占用大量内存。尝试优化您的图像，这肯定会帮助您减少应用程序的内存占用。在创建背景时考虑 9-patch 图像。

# jquery - 自动完成 Jquery 远程数据不像本地数组那样自动过滤

> ID：11572899
> 
> 赞同：0
> 
> 时间：2012-07-20T04:26:42.563
> 
> 标签：jquery, filter, autocomplete, asp-classic

在两种情况下，我从 Jquery 的简单自动完成开始：本地数组和来自其他页面的远程源数据。我确信两者的数据相同，但自动完成的工作方式不同。请参阅下面的代码：

***1.带本地数组***

**Javascript代码**

```
$(document).ready(function() {
        $("#txtArr").autocomplete({
        source: programmingLang,
        change:function(event, ui){
            if (ui.item==null)
                $('#txtArr').val(-1);
        }
        })
}) 
```

**编程语言数组：**

```
var programmingLang = [{ "value": "ActionScript", "id": 31 }, { "value": "AppleScript", "id": 2 }, { "value": "JavaScript", "id": 3 }, { "value": "Haskell", "id": 33 }, { "value": "Architects", "id": 27 }, { "value": "Scheme", "id": 1 }, { "value": "PHP", "id": 29 }, { "value": "Marketing", "id": 25 }, { "value": "Perl", "id": 15 }, { "value": "Training", "id": 32}]; 
```

从浏览器中，我输入了 p，...，列表中显示的包含“p”的项目 - 完美:)

***2.通过源数据远程***

**Javascript代码**

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#txtArr").autocomplete({
        source: "script.asp",
        change:function(event, ui){
            if (ui.item==null)
                $('#txtArr').val(-1);
        }
        })
}) 
```

**脚本.asp**

```
<%    
Response.ContentType = "application/json; charset=utf-8"    
Response.Write("[{ ""value"": ""ActionScript"", ""id"": 31 }, { ""value"": ""AppleScript"", ""id"": 2 }, { ""value"": ""JavaScript"", ""id"": 3 }, { ""value"": ""Haskell"", ""id"": 33 }, { ""value"": ""Architects"", ""id"": 27 }, { ""value"": ""Scheme"", ""id"": 1 }, { ""value"": ""PHP"", ""id"": 29 }, { ""value"": ""Marketing"", ""id"": 25 }, { ""value"": ""Perl"", ""id"": 15 }, { ""value"": ""Training"", ""id"": 32}]")
%> 
```

从浏览器：键入 p ... 列出数组中的所有项目 :(

如何修复它们与本地数组的工作方式相同？

非常感谢。

* * *

现在可以了。我修改**script.asp**类似于**elliottjmills的建议**

```
 <%    
Response.ContentType = "application/json; charset=utf-8"
strSql="SELECT * FROM HR_Employee WHERE **Fullname like '%" & request.QueryString("term")** & "%'"   

strconn="PROVIDER=SQLOLEDB;DATA SOURCE=...;DATABASE=...;USER ID=...;PASSWORD=...;"  

set conTem=Server.CreateObject("ADODB.Connection")
conTem.Open(strconn)

Set rsElementTem = Server.CreateObject("ADODB.Recordset")
rsElementTem.Open strSql,conTem,3,3
strArr=""
if not rsElementTem.EOF then
    rsElementTem.MoveFirst
    'rsElementTem.Filter="Fullname like '*" & **request.QueryString("term")** & "*'"

    do while not rsElementTem.EOF
        if strArr<>"" then strArr=strArr & ","
        strArr=strArr & "{"&_
                        """value"":""" & rsElementTem("Fullname") & """, ""id"":" & rsElementTem("PersonID") & "}" 

        rsElementTem.MoveNext
    loop
end if

Response.Write "[" & strArr & "]" 
```

%>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:14:52.303

这应该做一些类似于你所追求的事情：

**脚本.asp：**

```
<%
Response.ContentType = "application/json; charset=utf-8"

Dim value(6)
Dim id(6)

value(0) = "dog"
id(0) = 1
value(1) = "cat"
id(1) = 20
value(2) = "pig"
id(2) = 31
value(3) = "monkey"
id(3) = 25
value(4) = "camel"
id(4) = 16
value(5) = "carrot"
id(5) = 28
value(6) = "donkey"
id(6) = 9

Dim jsonString
jsonString = "["

For i = 0 to Ubound(value)
    If(left(value(i), Len(Request.Querystring("term"))) = Request.Querystring("term")) Then
    jsonString = jsonString & " { ""value"": """ & value(i) & """, ""id"": " & id(i) & " },"
    End If
Next

jsonString = Left(jsonString, Len(jsonString)-1) & " ]"
Response.Write jsonString
%> 
```

这会将`term`查询字符串中的参数与数组中每个元素的开始字符进行比较。

对于每个匹配，它会将值添加到序列化格式的字符串中。

最后它会用函数去掉结尾的逗号`Len`，关闭方括号并输出字符串的内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:43:36.390

您应该从服务器端带来排序列表

# android - 使用 zxing 从 sd 卡扫描 QR 码在 Android 中不起作用

> ID：11572901
> 
> 赞同：1
> 
> 时间：2012-07-20T04:26:51.570
> 
> 标签：android, qr-code, zxing

```
 String imageInSD = Environment.getExternalStorageDirectory().getAbsolutePath()+"temp.jpg";
    Bitmap photoTmp = BitmapFactory.decodeFile(imageInSD);
    LuminanceSource source = new RGBLuminanceSource(photoTmp);
    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
    Reader reader = new MultiFormatReader();
    Result result = reader.decode(bitmap); 
```

这是我的代码..但它不是扫描图像..但是当我捕获相同的图像并扫描它时......

# javascript - 内联（非内联块）行为元素的最小宽度

> ID：11572905
> 
> 赞同：1
> 
> 时间：2012-07-20T04:26:59.810
> 
> 标签：javascript, jquery, html, css

我想在 contenteditable div 上设置最小宽度，旁边还有一些其他元素，这些元素必须与 div 保持一致。

我见过的每个解决方案都使用内联块，但我不能使用内联块行为。当 inline-block 开始换行时，它仍然表现得像块元素，我需要 div 表现得像一个内联元素。我想这个解决方案需要的不仅仅是 CSS，但是当 div 的文本发生变化时设置任何事件似乎非常困难。欢迎使用涉及 javascript 和/或 jQuery 的解决方案。

编辑：这是我正在尝试做的简化版本。如果用户输入的文本多于页面宽度，则内联块和块之间的行为会有所不同，这就是我所关心的。

```
<style type="text/css">
label {
    width: 40px;
    height: 40px;
}
#container {
    font-size: 32px;
}
#content {
    display: inline;
    min-height: 37px; /* doesn't work on inline elements */
    min-width: 80px; /* also doesn't work on inline elements */
}
</style>

<div id="container">
    <input type="radio" />
    <label>
        <span></span>
    </label>
    <span>(A)</span>
    <div id="content" contenteditable="true" unselectable="off">test</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:28:58.897

现在习惯了`floating`

像这样

```
a{
background:green;
  min-height:200px;
  float:left;
} 
```

现场演示[http://tinkerbin.com/3Ho3Af9c](http://tinkerbin.com/3Ho3Af9c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:09:28.907

好的，这是我想出的答案（在 jQuery 中）。谁能给我一些建议，让我忽略其中一些可能不会改变 div 内容或在 div 周围放置边框的事件？（我也关心剪切/粘贴）。

```
$('#content').bind('blur focus load resize scroll click dblclick ' +
        'mousedown mouseup mousemove change ' +
        'select keydown keypress keyup', function () {
    if($(this).width() <= 80) {
        $(this).css("display", "inline-block");
    }
    else {
        $(this).css("display", "inline");
    }
}) 
```

# html - Chrome 当前版本中的行高错误？

> ID：11572907
> 
> 赞同：1
> 
> 时间：2012-07-20T04:27:21.710
> 
> 标签：html

我已经用静态 html、css 制作了我的网站，它工作正常。我已经在 Ie7、firefox 和 chrome 中测试过了，一切都很好。

有时文本与其他 div 重叠。我不知道这是做什么的。如果我刷新它的工作，但有时它会发生

![在此处输入图像描述](../Images/2f3824bb2956d64e050b02a9040cb548.png)

这是 Chrome 中的错误还是我在代码中做错了什么。我只是偶尔发现它并感到惊讶，因为它只是 html 文件。

这是代码

```
<div class="slider-wrapper theme-default">
                        <div id="slider" class="nivoSlider">
                            <img alt="" data-thumb="img/ban1.png" src="img/ban1.png" />
                            <a href="http://dev7studios.com">
                                <img alt="" data-thumb="img/ban1.png" src="img/ban1.png" /></a>
                            <img alt="" data-thumb="img/ban1.png" src="img/ban1.png" />
                            <img alt="" data-thumb="img/ban1.png" src="img/ban1.png" />
                        </div>
                        <div id="htmlcaption" class="nivo-html-caption">
                        </div>
                    </div>
                    <div class="news-wrap">
                        <strong>Latest News: </strong>06/01/10 | A guide to maximizing your investment
                    </div>
                    <div class="vert-list">
                        <ul>
                            <li>
                            <div class="left-part">
                                <div class="head-txt">
                                    <img src="img/li1-h.png" alt=""/>
                                </div>
                                <div class="txt">
                                error sit voluptatem accusantium doloremque laudantium,
                                </div>
                                <div class="lm">
                                <img src="img/lm1.png" alt=""/>
                                </div>
                            </div>
                            <div class="right-part">
                                <img src="img/li-i1.png" alt=""/>
                            </div>
                            </li>
                            <li class="mid">
                            <div class="left-part">
                                <div class="head-txt">
                                    <img src="img/li2-h.png" alt=""/>
                                </div>
                                <div class="txt">
                                error sit voluptatem accusantium doloremque laudantium,
                                </div>
                                <div class="lm">
                                <img src="img/lm2.png" alt=""/>
                                </div>
                            </div>
                            <div class="right-part">
                                <img src="img/li-i2.png" alt=""/>
                            </div>
                            </li>
                            <li>
                            <div class="left-part">
                                <div class="head-txt">
                                    <img src="img/li3-h.png" alt=""/>
                                </div>
                                <div class="txt">
                                error sit voluptatem accusantium doloremque laudantium,
                                </div>
                                <div class="lm">
                                <img src="img/lm3.png" alt=""/>
                                </div>
                            </div>
                            <div class="right-part">
                                <img src="img/li-i3.png" alt=""/>
                            </div>
                            </li>
                        </ul>
                    </div> 
```

这是风格

```
 .slider-wrapper {
        float: left;
        margin-top: -2px;
        position: relative;
    }

        .news-wrap {
            background: url('img/news.png') no-repeat;
            height: 22px;
            width: 100%;
            margin-top: 330px;
            padding-left: 19px;
            padding-top: 8px;
        }

        .news-wrap strong {
            font-weight: bold;
        }

        .vert-list {
            margin-top: 12px;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:30:39.460

在我看来，这像是`float`样式规则而不是`line-height`. 如果一个元素只包含浮动元素，那么它的高度为 0，并且对周围环境没有影响，并且它的所有内容都将浮动在它后面的元素之上。

提供您正在使用的代码或其中的一个片段会很有帮助。

# android - 如何在webview中打开一个URL而不提示在Android Honeycomb中选择浏览器

> ID：11572914
> 
> 赞同：1
> 
> 时间：2012-07-20T04:28:47.693
> 
> 标签：android, android-3.0-honeycomb

谁能告诉我如何在默认 webview 中打开 URL。我正在使用下面的代码，但它不起作用。它仍在提示选择意图。此代码在我的三星 S2 智能手机中运行良好。但不是在 Galaxy 平板电脑中。

```
browser.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                //check for key strings in URL to determine next action.
                int useNativeIntent = 0;
                int bolDone = 0;

                //allow loading of this URL
                if(useNativeIntent == 0){
                    showProgress("Loading..","This may take a moment if you have a slow internet connection.");
                    loadBrowser(url);
                }

                return true;

            }

//loadBrowser
public void loadBrowser(String theUrl){
    if(browser != null){
        try{
            browser.loadUrl(theUrl);
        }catch(Exception je){
            hideProgress();
            showAlert("Error Loading?","There was a problem loading some data. Please check your internet connection then try again.");
        }               
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:33:05.920

您不能直接，除非您知道要触发的浏览器应用程序的活动名称，否则这不是一个好主意。

将选项留给用户，或者您可以在应用程序中实现自己的浏览器（如模块），并将用户直接带到您应用程序的浏览器。

# sql-server-2008 - SQL Server：具有大量数据记录的优化表设计建议

> ID：11572918
> 
> 赞同：0
> 
> 时间：2012-07-20T04:28:59.573
> 
> 标签：sql-server-2008

不知何故，我的数据库在写入时太慢了。

目前我使用了 319MB，其中有 2,127,227 行。最初几天，我的计算机每秒能够插入几千行，现在我要花很长时间才能插入 1000 行。现在插入 1000 行（每行 0.165）需要 165 秒。我需要能够每分钟插入 10,000 个（每行 0.006 个）

请在下面查看我的表设计和服务器规格，如果您能帮助我优化它，请告诉我。谢谢你。

```
Current usage report
Records 2,127,227
Reserveed KB 323,088
Data(KB) 177,088 
```

我的表设计是这样的，我做了索引`[LoginID] ASC,[ProductID] ASC, [ProductModifiedDate]`

```
CREATE TABLE [dbo].[ProductTable](
    [ID] [uniqueidentifier] NOT NULL,
    [LoginID] [int] NULL,
    [ProductID] [int] NULL,
    [ProductPrice] [decimal](18, 4) NULL,
    [ProductModifiedDate] [datetime] NULL,
    [ProductCreatedDate] [datetime] NULL,
 CONSTRAINT [PK_ProductTable] PRIMARY KEY CLUSTERED 
([ID] ASC)

CREATE NONCLUSTERED INDEX [IX_ProductTable] ON [dbo].[ProductTable] 
(
    [LoginID] ASC,
    [ProductID] ASC,
    [ProductModifiedDate] ASC
) 
```

我的insert语句只是一个普通的简单sql语句，没有什么特别之处。

我的硬件：

我有一个 2 Quad 2.83 Ghz 和 16GB DDR3 RAM 和 SQL Server 2008 R2 express 版本。插入这些行时，CPU 以 25% 的容量运行。

请让我知道如何优化此表。我真的需要能够搜索所有这些列，所以我认为索引这些列非常重要，我必须将行保留长达 30 天。

我以为 SQL Server Express 版本可以支持 10GB 的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:35:52.060

添加新记录时，如何生成 UUID？

使用真正随机的 UUID 会导致*非常糟糕的*索引碎片。当它是聚集索引时，这会*更加痛苦，因为数据（行）布局本身会受到影响。*

参见[NEWID 与 NEWSEQUENTIALID](http://www.codeproject.com/Articles/32597/Performance-Comparison-Identity-x-NewId-x-NewSeque)

> 最引人注目的是 NEWID 系统函数所需的写入次数。这与 69% 的平均页面密度相结合，证明了由叶级插入的随机分布引起的页面分裂。一旦页面填满，就需要将其分成两页，每页 50% 以完成插入。页面拆分不仅导致页面密度不佳，而且还严重分割了数据页面（*下一个数据页面有 99% 的可能性不在当前数据页面旁边*）。

这仅适用于 50k 条记录 :-) 上面的链接还提供了一个 TSQL 片段来显示表统计信息。

同样，检查辅助索引（并在需要时重建）。

# iphone - 如何一张一张画出MKOverlays？

> ID：11572923
> 
> 赞同：0
> 
> 时间：2012-07-20T04:30:30.643
> 
> 标签：iphone, mkmapview

我正在使用 MKMapView MKPolyline 在地图上绘制叠加层。假设我有 4 个点（a、b、c、d）。我正在尝试显示 ab、bc、cd 之间的叠加层。我正在尝试逐步显示这些叠加层，这意味着我想先显示 ab 叠加层，然后显示 bc 叠加层，最后显示 cd 叠加层。但是这些所有的叠加层都是单次绘制的。我将如何防止这种情况，以便我可以一一显示这些叠加层？

**编辑：**

我要添加的另一个功能：我添加了两个按钮“**开始**”和“**暂停**”。当我点击开始按钮时，它开始绘图，当我点击暂停按钮时，它应该在我们点击暂停按钮的某个点暂停。我们可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:26:10.163

你可以做的是在你的视图控制器中，实现`MKMapViewDelegate`协议，当你的叠加层被添加时，它会给你回调。您可以实现一种仅绘制一条线段（两个点）的方法，并在每次收到添加了另一条线叠加的通知时触发该方法。

在视图控制器中声明一些实例变量：

```
@interface ViewController : UIViewController<MKMapViewDelegate> {
@private
    MKMapView* mapView;
    CLLocationCoordinate2D coordinates[4];
    int lineNumber;
    BOOL isPaused;
}
@property (strong, nonatomic) IBOutlet MKMapView *mapView; 
```

然后在您的视图控制器 .m 文件中：

```
- (void)addNextLine {    
    if (!isPaused) {  
    // move to the next line
        lineNumber++;

        MKPolyline* line = [MKPolyline polylineWithCoordinates: &coordinates[lineNumber - 1]
                                                     count: 2];
        [self.mapView addOverlay: line];
    }
}

- (void)drawPolylines {
    isPaused = NO;

    // initialize the list of coordinates for the line segments
    coordinates[0] = CLLocationCoordinate2DMake(47.8, -122.0);
    coordinates[1] = CLLocationCoordinate2DMake(47.9, -122.0);
    coordinates[2] = CLLocationCoordinate2DMake(47.9, -122.1);
    coordinates[3] = CLLocationCoordinate2DMake(48.0, -122.1);
    lineNumber = 0;

    self.mapView.region = MKCoordinateRegionMake(coordinates[0], MKCoordinateSpanMake(0.2, 0.2));

    // start adding lines one at a time
    [self addNextLine];
}

// MKMapViewDelegate callback when an overlay has been added
- (void)mapView:(MKMapView *)theMap didAddOverlayViews:(NSArray *)overlayViews {
    if (lineNumber < 3) {
        // schedule the next line segment to be drawn after a 2 second delay:
        [self performSelector: @selector(addNextLine) withObject:nil afterDelay: 2.0f];
    }
}

// MKMapViewDelegate callback when an overlay's view needs to be generated
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id < MKOverlay >)overlay {
    if ([[overlay class] isSubclassOfClass: [MKPolyline class]]) {
        MKPolylineView* view = [[MKPolylineView alloc] initWithPolyline: overlay];
        view.strokeColor = [UIColor redColor];
        view.lineWidth = 2;
        view.fillColor = [UIColor redColor];
        return view;
    }
    return nil;
} 
```

您可以通过调用来触发整个过程：

```
[self drawPolylines]; 
```

在我的代码中，添加的每一行之间有 2 秒的延迟。如果您愿意，可以删除/更改它。

* * *

**编辑：**为了使用按钮开始和暂停该过程，请将您`UIButton`的 s 连接到这些操作：

```
-(IBAction)onStart: (id)sender {
    if (isPaused) {
        isPaused = NO;
        [self addNextLine];
    } else {
        [self drawPolylines];
    }
}

-(IBAction)onPause: (id)sender {
    isPaused = YES;
} 
```

# html - Z-Index 不工作：位置已设置

> ID：11572931
> 
> 赞同：0
> 
> 时间：2012-07-20T04:31:37.053
> 
> 标签：html, css, position, z-index

我正在尝试将标头置于 DOM 中的所有内容之上。这不是爱它：

图 1 *（左容器阴影打开）*

![在此处输入图像描述](../Images/81732703adb0987ddfc69bb9d219c6e1.png)

图 2 *（左容器阴影关闭，标题阴影打开）*

![图 2](../Images/94223a622a4981540928ae7c33b9ec99.png)

“快速选择”上方的阴影应位于标题下方。换句话说，它不应该在那里！！我*几乎*尝试了一切。我还没有尝试为每个部分和 div 设置索引。我的页脚实际上高于一切，但我猜是因为它位于 DOM 的末尾。我也尝试将我的标题移到那里，但它没有用。我什至尝试将其更改为 DIV 并移动它。没什么...这是货物：

**更新 2012.20.07 上午 12:56**

好的，所以这真的很奇怪。事实证明，标题确实位于图像上的菜单上方。如果我关闭“快速选择”容器上的阴影并向标题添加阴影，则表明标题在前面。参见图 2。我不确定它是否相关，但“快速选择”菜单的部分包含一个 JQuery 手风琴。

**HTML**

```
<header id="mainHeader">
<h3>Angiograph: Head &amp; Neck</h3>
<p><i>Ag-01 through Ag-14</i></p>
</header>
<section id="mainSection">
    <img id="theImage" src="images/mods/angiograph/head/Ag1.jpg" title="Ag-01"    alt="Ag-01">
<div id="leftMenu">
    <div id="addHolder">
<!-- Quick Pick Section -->
        <h3 class="topHeader"><a href="#">Quick Pick</a></h3>
        <div id="quickPick">
            <ul id="thumbList">
            </ul>
        </div>

....... 
```

**CSS**

```
#mainHeader{
position: absolute;
left: 0;
top: 0;
height: 10%;
width: 100%;
z-index: 3;

-webkit-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
-moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
}

#mainSection{
position: absolute;
left: 0;
top: 10%;
height: 85%;
width: 100%;
background-color: #464040;
z-index: 1;
}

#mainSection #leftMenu {
position: absolute;
width: 15%;
height: 100%;
left:0;
background-color: #141111;
z-index: 2;

-webkit-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
-moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:34:49.313

送给 `top` `0`

```
#mainSection #leftMenu{
top:0;
} 
```

检查到这个

现场演示[http://tinkerbin.com/MPLvxOP0](http://tinkerbin.com/MPLvxOP0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:42:54.433

希望[这](http://tinkerbin.com/NrIkHGOw) 可能是你想要的。如果没有，那么回复

# c++ - 如何在 Emacs 中终止正在运行的进程

> ID：11572934
> 
> 赞同：3
> 
> 时间：2012-07-20T04:31:53.343
> 
> 标签：c++, emacs, process

当我编译c++文件时，emacs显示：</p>

> 一个编译进程正在运行；杀死它？（y 或 n）。

但是`y`没有效果。如何杀死 Emacs 中的活动进程？*进程列表*中有许多正在运行的进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T05:42:02.607

不确定是否有更简单的交互式解决方案 - 但使用一些 elisp，您可以通过以下方式获取进程信息的缓冲区：

`(list-processes)`

如果您想要一个通用的杀死所有正在运行的进程，一个简单的例子是：

`(mapcar 'delete-process (process-list))`

（请注意，我们在`process-list`这里使用了 of）。

如果要按列表进程缓冲区中显示的名称删除特定进程：

`(delete-process (get-process "name of proc"))`

这里有一个简单的方法可以让这个交互：（如果你不使用 IDO，替换`ido-completing-read`为`completing-read`或类似的）

```
(defun delete-process-interactive ()
  (interactive)
  (let ((pname (ido-completing-read "Process Name: " 
                    (mapcar 'process-name (process-list)))))

    (delete-process (get-process pname)))) 
```

然后运行或键绑定`delete-process-interactive`以整理您的杂散进程。

虽然这是一个解决方案，但您可能需要进一步调查导致此行为的原因。如需其他人的帮助，您将需要提供更多信息。

# css - 将元素定位到特定的容器 CSS

> ID：11572935
> 
> 赞同：-1
> 
> 时间：2012-07-20T04:32:03.093
> 
> 标签：css

![](../Images/632406da8211f15b9cf327346328c4f7.png)

我有 3 个容器。

**黄色框**是标准 HTML

**棕色框**是 HTML 中的一个容器

**红框**是另一个容器，出现在 HTML的最底部。

我无法更改*任何*HTML，因为它是通过 PHP 的`readfile`. 但是，我可以将 CSS 添加到黄色框中。

我想将红色盒子放置在棕色盒子内，如下所示。

![](../Images/c4f547ae8f2aab4f232e3e44321bb53d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:36:48.380

你试过`position: absolute`红盒子吗？

就像是：

```
#red-box {
    position: absolute;
    top: 100px;
    left: 60px;
    width: 200px;
    height: 80px;
} 
```

（数字需要调整......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T05:02:40.883

像这样

**HTML**

```
<div class="yellow">

  <div class="brown"></div>

  <div class="red"></div>

</div> 
```

**CSS**

```
.yellow{
background:yellow;
  width:300px;
  height:300px;
  margin-top:100px;
  overflow:hidden;
position:relative;
}

.brown{
background:pink;
  width:200px;
  height:200px;
  margin:0 auto;
  margin-top:50px;
}
.red{
background:red;
  width:180px;
  height:180px;
  position:absolute;
  top:50%;
  left:50%;
  margin-top:-90px;
  margin-left:-90px;

} 
```

现场演示[http://tinkerbin.com/zdaCyo5l](http://tinkerbin.com/zdaCyo5l)

# vba - 为什么在这种情况下 1 =1 不成立？

> ID：11572943
> 
> 赞同：3
> 
> 时间：2012-07-20T04:33:14.420
> 
> 标签：vba

就我而言，这没有任何价值。我在研究一个问题时发现了这一点。

在 VBA 中：

鉴于以下情况：`Dim a As Boolean, b As Boolean, c As Boolean`

代码`a = b = c = 1 = 1` 将 a 赋值为 False。

但`a = b = c = true`将 a 赋值为 true。

谁能解释为什么会这样？显然`1 = 1`评估为真。

作为旁注，`a = 1 = 1`将 a 分配给 true 。使用变体而不是布尔值的行为也是相同的。

我再次知道这没有实际目的，我只是好奇是否有人可以解释这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T05:14:15.663

表达式从左到右求值，因为所有运算符的优先级相同。

```
a = b = c = 1 = 1 
```

b = c 返回真。

True = 1 返回 False，因为 True 在比较之前转换为 -1。

False = 1 返回 False

```
a = b = c = true 
```

b = c 返回真

True = true 返回 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:47:26.063

我认为在这种情况下，它是从左到右进行比较，而不是像人们想象的那样进行分配。

如果你将 b 和 c 初始化为 true

```
b = True
c = True 
```

并检查 a 的值

```
a = c = 1 = 1 
```

你仍然会发现它是错误的

所以仔细想想，似乎

```
a = b = c = 1 = 1 
```

是有效的

```
a = (((b = c) = 1) = 1) 
```

另外，即使您将括号更改为

```
a = (b = (c = (1 = 1))) 
```

它仍然是错误的。

鉴于 b 和 c 未初始化（假），您将 a 变为真的唯一方法是将语句更改为

```
a = (b = c) = (1 = 1) 
```

# c# - 如何在 ASP.NET 中添加用户之前验证用户条目 - CreateUserWizard

> ID：11572944
> 
> 赞同：0
> 
> 时间：2012-07-20T04:33:19.583
> 
> 标签：c#, asp.net, vb.net

我认为问题说明了一切，使用 Register.aspx 中的默认模板，我已经使用 Captcha 控件自定义了 CreateUserWizard，在添加用户之前我还需要检查一些业务逻辑，我尝试了以下方式但它没有'不起作用，即使 e.Cancel 为 True，用户仍会被添加

```
 Protected Sub CreateUserWizard1_CreatingUser(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.LoginCancelEventArgs) Handles CreateUserWizard1.CreatingUser
    Dim Captcha As RecaptchaControl = CType(CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("recaptcha1"), RecaptchaControl)
    If Not (Captcha.IsValid and ValidateUserEntries) Then
        e.Cancel = True
    End If
   End Sub 
```

任何建议，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:41:54.480

ASP.Net 包含几个用于此目的的内置验证器控件：

*   [比较验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)。用于比较两个值，通常是两个控件，例如密码和确认密码。它还可以用于确保 a 的值`TextBox`是某种类型（int、date、bool...）

*   [自定义验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。用于编写您的自定义逻辑。它包含一个要在服务器上执行的事件（在服务器上验证时），您可以指定一个 JavaScript 函数来在客户端上验证

*   [范围验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.rangevalidator.aspx)。用于验证值是否在特定范围内

*   [正则表达式验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)。用于根据正则表达式验证值

*   [要求字段验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)。表示需要控件

添加验证器以满足您的要求后，您将自动获得 JavaScript 支持和服务器端支持。

为了验证页面，您可以像这样调用验证：

```
protected void CreateUserWizard1_CreatingUser(object sender, LoginCancelEventArgs e)
{
   // optionally specify the ValidatinGroup used. this.Validate("validation group"); 
   this.Validate();
   if(!this.IsValid)
   {
       e.Cancel = true;
       return;
   }
   // execute your code
   // call here your domain logic to execute changes
   // remember to apply domain rules in your domain before executing the current changes
} 
```

这些控件用于验证**用户输入**，保证输入**是有效**的，但是您可能需要应用域验证以保证您可以使用当前用户输入针对**域的当前状态**安全地执行更改，这个验证应该是在您的域对象或域命令中执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:20:56.187

正如@Jupaol 在问题评论中所说，`e.Cancel = True`实际上可以阻止创建新用户，但原因是 `Captcha.IsValid`它总是返回 true！，经过一番搜索后，我通过获取[新的 api 密钥让它工作](https://www.google.com/recaptcha/admin/create)

# javascript - 如何防止用户创建重复 ID？

> ID：11572946
> 
> 赞同：0
> 
> 时间：2012-07-20T04:33:35.633
> 
> 标签：javascript, jsp

在我的 Web 应用程序中，我有一个简单的员工表单。每个员工都有一个与之关联的唯一 ID。

当新员工添加到系统中时，会为其分配一个唯一 ID。此 id 可以手动分配，也可以由系统生成。

我们有一个表，其中有一个列，其中存储了一个数字。它增加 1。

因此，如果我们有一个值为 10 的表。系统将自动为下一个员工生成一个 E0011 的 ID。

并且表中的值更新为 11。

我们在“id”文本字段附近有一个按钮。如果用户单击此按钮，则会在 id 字段中创建并填充新的系统生成的 id。

现在，问题是用户可以多次单击此字段并生成下一个 id，因此前一个 id 会丢失或消耗。

如何防止用户创建多个 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:35:46.863

将设置添加到按钮的代码中，以便在按下按钮后，它会变为非活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:35:56.460

很简单，*不允许手动生成 ID*。首先，您有一个自动 ID 生成器 - 为什么要手动使用它？

让系统在他的记录输入系统时生成ID（类似于MySQL中的自增）。这样，系统会控制 ID（1 个人 = 1 id），因此没有问题。

* * *

如果您真的想通过困难的路线并手动生成 ID，那么请使用 ID 检查器。这会在使用该 ID 插入记录之前查询数据库中手动输入的 ID。如果 ID 已在系统中，则插入失败。如果尚未使用，则继续插入记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:39:47.877

取决于您的要求 - 但如果您确实想将控制权交给“用户”，那么您可以使用 Session 对象来保留他的“新生成的”ID，如果该 ID 存在，则“禁用按钮”。

# algorithm - 具有多种尺寸的容器的 2D 容器包装

> ID：11572949
> 
> 赞同：2
> 
> 时间：2012-07-20T04:34:27.033
> 
> 标签：algorithm, np-complete

假设我们有多个由 Length x Width 定义的箱尺寸，这些可以称为“原材料”尺寸。

我需要从该原材料中切出一定数量的表格（矩形，断头台形式），以最大限度地减少原材料的数量。

由于垃圾箱的大小不同，它们应该以某种方式考虑或优先考虑以反映它们的价值 - 所以更大的垃圾箱显然“更贵”。

我知道这是一个 NP 完全问题，我不希望在多项式时间内出现确定性算法。

我需要一个解决问题的算法。

任何的意见都将会有帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:21:47.247

嗯，基础是：你首先需要定义一个好的函数。只有在那之后，你的问题才能被认为是明确的。让我们将材料板上的任何矩形布局称为“排列”。goodnes 函数应该从 Arrangements 域映射到实数域，比方说越大越好。该函数应随着给定布置中“浪费”的材料量而减小，并随着布置所满足的矩形的数量和值而增加。我再说一遍，你是必须定义善良函数的人，即材料的相对价值和各个矩形的价值，正如你所说，这符合“越大越好”的说法。你必须量化它。

一旦你这样做了，大量的算法就会为你打开，第一个是随机算法：你在你的材料片上随机分布一个不重叠的排列或矩形，评估它的好坏并将它存储在内存中。在你这样做足够多次之后，你会选择最好的一个。该算法的改进是尝试选择已经很好的排列并稍微“轻推”矩形以获得更多小矩形的空间。这就是 Dylan 使用模拟退火的意思。顺便说一句。不要阅读关于模拟退火的维基百科页面，它只会让你头疼。

* * *

回复评论：

尼克，很明显，你必须从一开始就使用各种垃圾箱。假设您定义了起始材料表（作为位图或通过矢量）。您将执行以下操作： 1\. 随机选取一个点 2\. 随机选取一个矩形类型 3\. 随机选取旋转 4\. 如果矩形不适合，请返回点 1。 5\. 如果矩形适合，放置它在材料表上并尝试通过相同的方法放置第二个矩形。6、然后是第三、第四等，直到遇到太多失败，得出死胡同。7\. 计算结果排列的好坏 8\. 继续下一个排列

现在我突然想到，也许您的切割机只允许一个方向（2 轴没有工具旋转），因此不必考虑矩形的旋转。在这种情况下，您不仅会在任何地方随机选择该点，还会在材料片的一侧或已经在片材上的另一个矩形的一侧选择该点，然后将下一个矩形放置到该点，使其具有相邻的边纸张的一侧或另一个矩形。在这种情况下（无旋转），您可以随机选择一个方向并沿所选方向移动新矩形，直到它碰到任何垂直的墙壁。这样，您将节省计算工作并从一开始就创建更好的安排。最后一步仍然是计算优度函数并选择最好的。

# asp.net - 查询数据库 MVC 4

> ID：11572953
> 
> 赞同：0
> 
> 时间：2012-07-20T04:34:52.153
> 
> 标签：asp.net, mysql, sql, asp.net-mvc, asp.net-mvc-3

我正在从示例应用程序 MVC Music Store 学习 MVC。它有两个数据库表，一个称为“Order”，另一个称为“OrderDetails”。如果下订单并且客户选择了多个商品，则在结账后，购买的每件商品都会在 OrderDetails 数据库中创建一个新行，并且 OrderDetailsID 将增加。

OrderDetail 数据库如下所示：

```
http://imagebin.org/221494 
```

我想编写一个控制器，它只会传递所有具有相同特定 OrderId 的行。例如，在该数据库中有 3 行，每行具有相同的 OrderId '3'。

我怎样才能做到这一点并将其传递给剃刀视图？我试过了：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcMusicStore.Models;

namespace Test.Controllers
{
public class OrderDetailsController : Controller
{
    private MusicStoreEntities db = new MusicStoreEntities();

          //
    // GET: /OrderDetails/Details/5

    public ActionResult Details(int id = 0)
    {
        OrderDetail orderdetail = db.OrderDetails.Find(id);
        if (orderdetail == null)
        {
            return HttpNotFound();
        }
        return View(orderdetail);
    } 
```

这将基于 OrderDetailsId 返回一个结果，而不是多个结果都具有相同的 OrderId。我应该能够访问.....：11091/orderdetails/Details/3，看到的不是一个结果，而是三个不同专辑及其价格的列表。

有没有一种简单的方法可以做到这一点？谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:48:52.097

我猜您希望 LINQ 查询执行此操作。

**原始答案（只是 OrderItems）**

以下内容就足够了，但请注意，您需要将剃刀视图模型类型从 更改`OrderDetail`为`IList<OrderDetail>`。

```
public ActionResult Details(int id = 0)
{
    var orderdetails = db.OrderDetails.Where(od => od.OrderId == id).ToList();
    if ((orderdetails == null) || (!orderdetails.Any()))
    {
        return HttpNotFound();
    }
    return View(orderdetails);
} 
```

**编辑**

因为您现在将集合传递给视图，所以您需要遍历项目以呈现它。也就是说，实际上可能不只获取`OrderDetails`for an `Order`，而是获取 the`Order`和`.Include()`所有关联的`OrderDetails`，然后将图形传递给视图。我假设您已经在 Entity Framework`Order`之间建立了关系。`OrderDetails`

**控制器**

```
public ActionResult Details(int id = 0)
{
    var orderWithDetails = db.Orders
                             .Include(o => o.OrderDetails)
                             .FirstOrDefault(o => o.OrderId == id);
    if (orderWithDetails == null)
    {
        return HttpNotFound();
    }
    return View(orderWithDetails);
} 
```

**查看** （`Order`使用`OrderDetails`已经预先加载的）

```
@model MvcMusicStore.Models.Order 
```

... 在此处显示订单级别字段

```
<div class="display-label">
   @Html.DisplayNameFor(model => model.Username)
</div>
<div class="display-field">
  @Html.DisplayFor(model => model.Username)
</div> 
```

... 在此处显示 OrderDetail 级别的字段，例如在表格或网格中

```
@foreach (var orderItem in model.OrderDetails) {

  <div class="display-label">
       @Html.DisplayNameFor(orderItem => orderItem.OrderItemField1)
  </div>
  <div class="display-field">
      @Html.DisplayFor(orderItem => orderItem.OrderItemField1)
  </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:38:22.090

就 SQL 而言，这将是（我发明了字段名称）

```
select orderdetails.title, orderdetails.quant
from orderdetails inner join orders
on orderdetails.ord = orders.ord
where orders.ordname = :p1 
```

P1 是一个接受订单名称/编号的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:00:44.480

> 公共 ActionResult 详细信息（int id = 0）
> 
> ```
> {
>     OrderDetail orderdetail = db.OrderDetails.Where(o => o.Id == id).ToList();
>     if (orderdetail == null)
>     {
>         return HttpNotFound();
>     }
>     return View(orderdetail);
> } 
> ```

在你看来...

取决于您的实体。您的视图将使用 @model 列表

然后遍历列表：

> @foreach(模型中的变量 i) { Html.DisplayFor(x => i.Name) }

或者只是 YourProject.Model.xxx

> @foreach（Model.YourList 中的变量 i）{ Html.DisplayFor(x => i.Name) }

# node.js - 在猫鼬中查询这个的最佳方法是什么？

> ID：11572963
> 
> 赞同：0
> 
> 时间：2012-07-20T04:36:23.230
> 
> 标签：node.js, mongoose

我有 2 个模型用户和 user_verifications。用户有用户名和电子邮件，user_verification 也是如此。

在向用户插入数据之前，我先在 user_verification 中插入数据。所以，我想知道用户名或电子邮件是否已经注册。

我就是这样做的。

```
User.count({email: email}, function(err, count) {
   if (count > 0) return false;
   else User.count({username: username}, function(err, count) {
       if (count > 0) return false;
     else UserVerification.count({email: email}, function(err, count) {
        if (count > 0) return false;
        else UserVerification.count({username: username}, function(err, count) {
            if (count > 0) return false;
            return true;
        });
     });
  });
}); 
```

但这有点烦人，因为我必须一遍又一遍地做同样的事情。有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:49:44.437

可能有帮助的一件事是使用 $or 查询，这样您就不必对同一个集合进行两个单独的查询。

```
User.count({ $or : [ { email : email } , { username : username } ] }, 
    function () {...} ); 
```

您可能还想使用异步库（例如`async`），以便可以并行进行这些调用，因为它们不相互依赖。

```
async.parallel({
   user:  function(cb) { 
       User.count({$or : [ {email:email}, {username:username}]}, cb);
   },

   verification: function(cb) {
       UserVerification.count({$or : [{email:email}, {username:username}]}, cb);
   }
},
function (err, results) {
   return !(results.user > 0 || results.verification > 0)
}; 
```

# javascript - Javascript全局变量存储在什么对象中？

> ID：11572966
> 
> 赞同：19
> 
> 时间：2012-07-20T04:36:48.350
> 
> 标签：javascript, object, global-variables

全局变量是否存储在特定对象中？例如：

```
var test="stuff";
console.log(window.test);
console.log(document.test);
console.log(this.test); 
```

所有这三个测试的结果都是`undefined`，那么是否有一个包含这些变量的对象？

我觉得好像这是我应该已经知道的愚蠢的事情，但我什至似乎无法在网上找到答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T04:52:01.490

这是一个迟到但技术性的答案。

你问

> 全局变量是否存储在特定对象中？

答案是肯定的；它们存储在正式称为*全局对象*的东西中。[这个对象在官方 ECMAScript 5 Specification](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)的第 15.1 节中有描述。

全局对象不需要有名称；但是您可以简单地使用它们的名称来引用它的属性，例如`String`, `isNaN`, 。`Date`除了 ECMAScript 规范要求的属性之外，您的 JavaScript 宿主环境还将在全局对象中放置其他属性，例如`alert`或`console`。在浏览器中，我可以编写脚本

```
alert("Hello world"); 
```

因为`alert`是全局对象的属性。

请注意，根本不必有一种方法可以访问这个全局对象，信不信由你。然而，很酷的是，许多宿主环境会在全局对象中放置一个属性，其值*是对全局对象本身的引用*。在大多数 Web 浏览器中，此属性称为`window`. 所以我们可以写：

```
alert("Hello");
window.alert("Hello");
window.window.alert("Hello");
window.window.window.window.window.alert("Hello"); 
```

你也可以说：

```
var x = 5;
alert(this.x); 
```

并得到`5`警报。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T04:40:47.923

我想你会在大多数浏览器上找到，它们*存储*在`window`.

牵强的心理调试尝试：你在 jsFiddle 中测试过吗？或者也许在 Firebug 中？如果是这样，您可能会看到`undefined`所有这三个，因为在这种情况下~~，代码是在一个框架中执行的；所以它有一个不同的`window`对象（我认为）~~代码实际上是被包装的：

```
window.addEvent('load', function() {
  var test="stuff";
  console.log(window.test);
  console.log(document.test);
  console.log(this.test);
}); 
```

您可以从 jsFiddle 的上述代码段中看到它`test`不是*全局*变量，这解释了为什么它没有附加到`window`.

我不是专家，但从我在 Chrome、Firefox、Safari 和 Opera 中的判断来看，这个答案似乎是准确的。为了验证，我创建了一个包含以下内容的 HTML 文件并将其加载到每个浏览器中：

```
<script type="text/javascript">
  var test = "stuff";
  alert(window.test);
</script> 
```

果然，每次都是“东西”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T04:44:09.763

“真”全局变量没有“var”关键字。尝试这个：

```
test="stuff";
console.log(window.test);
console.log(document.test);
console.log(this.test); 
```

有了这个，所有范围都会看到它。带有 var 关键字的变量在它们声明的范围内是本地的。

只有当您像 Dan 所说的那样在窗口范围内声明变量时，变量才会是“窗口的全局”（窗口对象的属性），这使得它对于通常使用窗口作为全局范围的浏览器来说是全局的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T04:46:55.750

全局变量存储在全局`window`变量中。如果您只是在任何东西（如函数）之外声明它，则以下代码有效：

```
var test="stuff";
console.log(window.test); 
```

类似的证明是`window.location.href`相同的`location.href`

但是，问题可能在于声明变量的位置。例如，如果你在函数中声明了这个变量，它只会存在于函数中，而不是全局存在的：

```
function foo(){

    //declaring inside function
    var test="stuff";

    //undefined, since the variable exists in the function only
    console.log(window.test);  

    //undefined, document refers to the document
    //which is the top DOM object, not the global window
    console.log(document.test); 

    //depends on what "this" refers to, especially 
    //when using call() or apply() to call the function
    //For normal function calls, usually it points to window as well
    console.log(this.test);  

    //none of the above refer to "test" that contains "stuff"
    //because you are looking in the wrong place   

} 
```

# ruby-on-rails-3.1 - 在没有关联的情况下在另一个模型中获取一个模型的数据

> ID：11572967
> 
> 赞同：0
> 
> 时间：2012-07-20T04:37:02.633
> 
> 标签：ruby-on-rails-3.1

我有两个模型并且不使用关联我想在下拉列表的另一个视图中获取一个模型的所有数据。我怎么能？喜欢，

我有管理员控制器/模型和服务控制器/模型，现在我想在下拉列表的服务视图部分中获取管理员的所有数据...不使用关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:20:07.603

我得到了解决方案：

```
<%=f.collection_select :activ,Admin.all,:facility,:facility %> 
```

在哪里：

1.  `:activ`: 在这里我们要保存我们的数据。
2.  `Admin.all`：从这里我们想要获取所有数据
3.  `:facility`：我们要保存/调用哪个部分

# asp.net - IIS7 - Web 服务和 Web 应用程序在默认网站下共存？

> ID：11572969
> 
> 赞同：1
> 
> 时间：2012-07-20T04:37:17.677
> 
> 标签：asp.net, iis-7, windows-server-2008

我对 IIS 管理的大多数方面都是新手。我的要求是输入浏览器时`www.mysite.com`要解析的 URL。`www.mysite.com/myapp`但是，`myapp`（不是真实姓名）与包含使用端口 80 的一些 Web 服务（见屏幕截图中的红色框）的另一个目录一起位于默认网站（见绿色框）中。此外，`www.mysite.com`必须在 SSL 下运行。

这是当前设置的截图。我有点掩盖了真实的名字。

![在此处输入图像描述](../Images/795e53883424a0ba7b57de0e71b3d7cc.png)

我需要`www.mysite.com`解决绿色框中的应用程序（调用它`mysite.com/myapp`），但我不知道如何：

1）一般情况下进行设置。

2）在不影响红框中的服务的情况下进行设置。

我已经阅读了一些主机头和 ARR，但我仍然不清楚如何解决这个问题。

谢谢。

**编辑：**添加屏幕截图和详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:51:45.040

老实说，我发现的最快/最简单的方法是制作 default.htm 文件，将其放在 wwwroot 文件夹中，然后让 html 文件重定向到您想要的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:47:22.087

我尝试使用 IIS [URL Rewrite](http://learn.iis.net/page.aspx/734/url-rewrite-module/)模块来查找**仅**用于的请求，`www.mysite.com`然后将它们重定向到`www.mysite.com/myapp`，这似乎有效。

我看到我的自签名证书出现的证书错误是标准的，直到我将它添加到浏览器的受信任的根证书颁发机构。

我会赞成对我的问题的第一个回复（和第一个评论）。感谢您投稿。

# javascript - 将光标保持在文本区域并每次单击添加每个内容

> ID：11572974
> 
> 赞同：0
> 
> 时间：2012-07-20T04:37:59.063
> 
> 标签：javascript, textarea

我的js：http: [//jsfiddle.net/creepyzero/4jQ4x/](http://jsfiddle.net/creepyzero/4jQ4x/)

单击 test/test 2 时，如何将光标保持在文本区域中？

每次单击 test/test 2 时如何添加 a 和 b ？a 和 b 必须在同一个 onclick 中添加。

例子：

*   我点击测试，textarea的内容是1
*   然后我点击测试 2，textarea 的内容是 13
*   然后我点击测试，textarea 是 132 谢谢你的帮助 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:03:44.050

如果我理解这两个问题，那么对您的小提琴的这种修改应该或多或少地满足您的要求：

[http://jsfiddle.net/trott/4jQ4x/25/](http://jsfiddle.net/trott/4jQ4x/25/)

JS：

```
var testContents = ['1','2'];
var test2Contents = ['3','4']

function add(contentsArray) {
        var x = document.getElementById('test');
        var addValue = contentsArray.shift();
        if (typeof addValue !== "undefined") {
            x.value += addValue;
        }

        x.focus();    
} 
```

HTML：

```
<textarea name="note" id="test"></textarea>
<a href="#" onclick="add(testContents);">Test</a>
<a href="#" onclick="add(test2Contents);">Test 2</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:47:24.020

无法理解您的第二个问题，但对于第一个问题，您可以使用 focus() 方法。喜欢

```
x.focus(); 
```

# jquery - jquery可在IE9上进行样式崩溃排序

> ID：11572978
> 
> 赞同：0
> 
> 时间：2012-07-20T04:38:25.413
> 
> 标签：jquery, jquery-ui-sortable

我已经订购了 jquery 可排序的列出的图片。当我将第一张图片移动到第二张位置时，它要么 1\. 崩溃 2\. 第 2 张图片消失，我需要全选以重新绘制这些图片。

[http://jsbin.com/alekom/edit#javascript,html](http://jsbin.com/alekom/edit#javascript,html)

我如何修复上面的1和2？

请注意，这只发生在 float: left 样式和 IE9 上。要重现这一点，您可能需要多次将第一项移动到第二项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:00:45.060

是的，我相信这是 jQuery UI 中的一个错误。因为您将“CSS”设置为 float:left，所以 UI 难以重新定位“可排序”项目并导致 IE9 崩溃。很酷。

# javascript - 如何在 Windows 8 Metro 应用程序开发中将单词转换为音频？

> ID：11572979
> 
> 赞同：0
> 
> 时间：2012-07-20T04:38:32.450
> 
> 标签：javascript, windows-8, microsoft-metro, windows-runtime

我正在开发一个 Windows 8 Metro 应用程序（针对儿童），我需要发音用户输入的英文单词。是否有任何 API ？我为此使用 HTML5 和 javascript。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:40:20.747

没有为 Metro 应用程序提供 (TTS) Text-to-Speech API。您需要为此实现基于云的 API。试试[speak.js](http://nikos-web-development.netai.net/blog/text-to-speech-in-html5-and-javascript/)，它是[eSpeak](http://espeak.sourceforge.net/)的 JavaScript 端口。

# bnf - 如何 | 影响 BNF 语法？

> ID：11572980
> 
> 赞同：3
> 
> 时间：2012-07-20T04:38:34.023
> 
> 标签：bnf

我正在做一个需要我解析 BNF 语法的学校项目。对于管道字符（|）（我认为它的意思是“或”）在规则中扮演的角色，我有点困惑。

例如，如果我有以下内容：

```
<a> ::= b c d | e f g 
```

哪个终端是 | 应用于？使用括号进行分组，这将描述如何应用“或”？

> **(bcd)** | **（电子表格）**
> 
> (bc) **(d)** | **(e)** (fg)

是| 应用于整组终端，或者只是 |? 旁边的两个终端。

如果我有这样的设置怎么办：

```
<a> ::= b | <c> <d>
<b> ::= e | f
<c> ::= g | h 
```

如果`<c>`并且`<d>`提到非终端，它仍然是真的吗？到什么| 在这种情况下适用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T04:42:56.597

一般来说，

```
rule := a b c | d e f 
```

被分组为

```
rule := (a b c) | (d e f) 
```

无论您将它们应用于终端还是非终端，这都不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:47:01.573

见[http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)

您可以查看 | 作为最低优先级运算符。

# c# - 如何在不包装元素的情况下对多态数组进行 XML 序列化

> ID：11572981
> 
> 赞同：7
> 
> 时间：2012-07-20T04:38:43.773
> 
> 标签：c#, .net, xml, xml-serialization

想将我的数据序列化为：

```
<?xml version="1.0" encoding="ibm850"?>
<Batch Name="Test batch">
   <ExecuteCommand Command="..." />
   <WaitCommand Seconds="5" />
</Batch> 
```

但相反，我得到了这个（注意包装命令元素）

```
<?xml version="1.0" encoding="ibm850"?>
<Batch Name="Test batch">
  <Commands><!-- I want to get rid of thiw wrapper Commands element and just  -->
    <ExecuteCommand Command="..." />
    <WaitCommand Seconds="5" />
  </Commands>
</Batch> 
```

这是用于生成此的示例代码：

```
public class BaseCommand //base class
{
    [XmlAttribute]
    public string Result { get; set; }
}

public class ExecuteCommand : BaseCommand
{
    [XmlAttribute]
    public string Command { get; set; }
}

public class WaitCommand : BaseCommand
{
    [XmlAttribute]
    public int Seconds { get; set; }
}

public class Batch
{
    [XmlAttribute]
    public string Name { get; set; }

    private List<BaseCommand> _commands = new List<BaseCommand>();
    [XmlArrayItem(typeof(ExecuteCommand))]
    [XmlArrayItem(typeof(WaitCommand))]
    public List<BaseCommand> Commands
    {
        get
        {
            return _commands;
        }
        set
        {
            _commands = value;
        }
    }

    public static void Main()
    {
        XmlSerializer serializer = new XmlSerializer(typeof(Batch));

        Batch b = new Batch();
        b.Name = "Test batch";
        b.Commands.Add(new ExecuteCommand() { Command = "..." });
        b.Commands.Add(new WaitCommand() { Seconds = 5 });

        serializer.Serialize(Console.Out, b);
        Console.Read();
    }
} 
```

我搜索并阅读了有关该主题的大量文章。它们似乎都为使用单一类类型（不使用继承）序列化集合提供了解决方案。我使用继承，似乎没有任何效果。不幸的是，由于遗留支持，我必须输出精确的 XML 文档

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T01:10:02.573

这是很久以前的事了，但我最终自己想通了。

解决方案是将每个支持的派生类型的 [XmlElement] 属性添加到集合属性

```
private List<BaseCommand> _commands = new List<BaseCommand>();
[XmlElement(typeof(ExecuteCommand))]
[XmlElement(typeof(WaitCommand))]
public List<BaseCommand> Commands
{
    get
    {
        return _commands;
    }
    set
    {
        _commands = value;
    }
} 
```

# java - Android GCM 注册失败。为什么？

> ID：11572982
> 
> 赞同：2
> 
> 时间：2012-07-20T04:38:49.723
> 
> 标签：java, android, push-notification, google-cloud-messaging

我试图使用 GCM 在我的应用程序中进行推送通知。我打电话给`GCMRegistrar.register(this, SENDER_ID)`，但我得到了一个错误。

我的清单文件：

```
 <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
            <category android:name="com.salamworld"/>
        </intent-filter>
    </receiver>
    <service android:name=".GCMIntentService"/>
</application>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
<uses-permission android:name="android.permission.GET_ACCOUNTS"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<permission android:name="my.package.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
<uses-permission android:name="my.package.permission.C2D_MESSAGE"/>
<uses-sdk android:minSdkVersion="8"/> 
```

这是错误：

> DEBUG/GCMBaseIntentService(423)：注册错误：ACCOUNT_MISSING

我的 GCMIntentService 类：

```
public class GCMIntentService extends GCMBaseIntentService{

    public GCMIntentService() {
        super();
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
    }

    @Override
    protected void onError(Context context, String errorId) {
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.d("@R@", registrationId);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T04:43:07.937

如果您的设备中没有 Google 帐户，则会出现此例外情况，

> [ACCOUNT_MISSING](http://developer.android.com/guide/google/gcm/gcm.html) - 手机上没有 Google 帐户。Android 应用程序应要求用户打开帐户管理器并添加一个 Google 帐户。固定在设备端。

# ruby-on-rails - simple_form：指定文本字段的 id

> ID：11572989
> 
> 赞同：4
> 
> 时间：2012-07-20T04:40:37.800
> 
> 标签：ruby-on-rails, simple-form

我在下面有简单的 simple_form。我正在尝试将输入字段的 ID 设为“my-id”，但下面的解决方案不起作用（id 为“comment_body”）。如何为该输入字段指定 id？

```
= simple_form_for(@comment) do |f|
    = f.input :body, as: :string, html: {id: "my-id"}
    = f.button :submit 
```

我也试过

```
 = f.input :body, as: :string, id: "my-id" 
```

无济于事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T04:44:29.703

`:input_html`工作，不是`:html`。

```
 = f.input :body, as: :string, input_html: {id: "my-id"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T01:06:04.593

自从第一次回答这个问题以来，将 ID 添加到 simpleform 输入字段的方式已经改变。

最新的语法（版本 3.2.0）将是 op 尝试的：

```
 = f.input :body, as: :string, id: "my-id" 
```

我想我会为这个问题添加一个更新，因为它在搜索“simpleform id”时接近谷歌的顶部。

# mysql - SQL - 从电影数据库请求获取所有电影及其详细信息

> ID：11572993
> 
> 赞同：0
> 
> 时间：2012-07-20T04:41:10.330
> 
> 标签：mysql, sql

我发现了类似的问题，但最后却大不相同，没有一个回答我的问题。

我使用 mySQL

我有一个表 movie_artist_role 喜欢 3 个表电影、艺术家和角色，其中包含 3 个键

```
mo_id
ar_id
ro_id. 
```

表电影包含

```
mo_id
mo_title 
```

表艺术家包含

```
ar_id
ar_name 
```

表角色包含

```
ro_id
ro_name (actor or producer for instance) 
```

我想显示电影列表，以及每部电影的演员和导演

获得它的最有效方法是什么？是否有可能在一个具有多个左连接的唯一查询中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:49:40.183

左连接应该可以正常工作。

```
SELECT m.mo_title AS movie_title, 
       (SELECT group_concat(aIn.ar_name)
        FROM movie_artist_role AS marIn
            LEFT JOIN role AS rIn ON rIn.ro_id = marIn.ro_id
            LEFT JOIN artist AS aIn ON aIn.ar_id = marIn.ao_id
        WHERE rIn.ro_name = 'producer'
            AND marIn.mo_id = m.id ) AS producers,

       (SELECT group_concat(aIn.ar_name)
        FROM movie_artist_role AS marIn
            LEFT JOIN role AS rIn ON rIn.ro_id = marIn.ro_id
            LEFT JOIN artist AS aIn ON aIn.ar_id = marIn.ao_id
        WHERE rIn.ro_name = 'actor'
            AND marIn.mo_id = m.id ) AS actors
FROM movie AS m 
```

这是未经测试的，但应该返回如下行：

```
movie_title       |      producers       |     actors
-----------------------------------------------------------
Star Treck          JJ Abrams               Chris Pine, Simon Pegg, Zachery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:48:43.030

```
select movie.mo_title, artist.ar_name, role.ro_name
from movie_artist_role 
left join movie on movie.mo_id = movie_artist_role.mo_id
left join artist on artist.ar_id = movie_artist_role.ar_id
left join role on role.ro_id = movie_artist_role.ro_id
order by movie.mo_tile, artist.ar_name 
```

我有一个类似的电影数据库！我认为你定义的“角色”表是不必要的——我有一个单独的“导演”表，它直接链接到“电影”表：同一部电影很少有两个导演，当有（如科恩兄弟），他们往往经常一起工作，所以他们可以算是一个导演。

使用左连接而不是内连接可以显示没有导演或演员链接的电影。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:49:09.763

连接之间的多个`inner join`（将从所有 3 个表中提取所有内容）`foreign keys`将显示每个电影、演员和导演的信息列表。

```
SELECT * FROM movie_artist_role mar
INNER JOIN movie m ON mar.mo_id = m.mo_id
INNER JOIN artists a ON mar.ar_id = a.ar_id
INNER JOIN role r ON mar.ro_id = r.ro_id
ORDER BY m.mo_title, r.role_name 
```

使用`WHERE`从句可以为您提供有关该电影或演员的详细信息。例如..

```
SELECT * FROM movie_artist_role mar
INNER JOIN movie m ON mar.mo_id = m.mo_id
INNER JOIN artists a ON mar.ar_id = a.ar_id
INNER JOIN role r ON mar.ro_id = r.ro_id
WHERE a.ar_name = 'Jack Black' ORDER BY m.mo_title, r.role_name 
```

如果您只想要特定表中的特定数据，`film`那么说......它几乎是上面所做的，但相反。

```
SELECT * FROM movie m
INNER JOIN movie_artist_role mar ON mar.mo_id = m.mo_id
INNER JOIN artists a ON mar.ar_id = a.ar_id
INNER JOIN role r ON mar.ro_id = r.ro_id
ORDER BY m.mo_title, r.role_name 
```

或`artists`...

```
SELECT * FROM artists a
INNER JOIN movie_artist_role mar ON mar.ar_id = a.ar_id
INNER JOIN movie m ON mar.mo_id = m.mo_id
INNER JOIN role r ON mar.ro_id = r.ro_id
ORDER BY m.mo_title, r.role_name 
```

等等等等

# git - 当我完全重新制作整个项目时，如何完全重置 GIT 存储库？

> ID：11572994
> 
> 赞同：2
> 
> 时间：2012-07-20T04:41:11.483
> 
> 标签：git, bitbucket

我正在为一家公司做一个项目，好吧，我被请来修复一个项目，结果只是彻底改造了所有东西。这是唯一的方法，它是一个游戏，大部分代码是用引擎的第一个版本编写的，不适合最新版本的引擎。所以我已经完全重新制作了它，但是当我删除所有内容并粘贴新源时，它不会让我只推送更改。

我也不是存储库的主要所有者，它是公司的主要人员，他的 bitbucket 帐户中有它。我确实有读/写权限。我会请他为我做一些事情，但尽管他是主要人物，但他只是主要艺术家，而不是超级技术。因此，我希望能够自己完成这一切，而不必引导他完成。

我只想完全清除一个项目并粘贴新的源代码并将其发送进来，并用它来代替主存储库中的旧代码。有没有办法用 git 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T05:26:24.843

这似乎相当激烈。但...

你需要一些类似的东西（这没有经过测试——它旨在给你你需要的东西的味道）。我对你的环境做了很多假设

```
# get the current stuff
git pull origin master

# label the location you are about to nuke.  Pick a name that suites you.
# while this is not strictly necessary, I'd highly recommend it
git checkout master
git branch release_0.9
git push origin release_0.9

# change to a new branch
git checkout -b release_1.0

# remove all the old files
ls | xargs rm -rf

# copy in your files here

# add all the new files
git add -A

# commit and push your branch
git commit
git push origin release_1.0

# update master
git push . HEAD:master

# push the new version of master
git push origin master 
```

请不要盲目执行这些命令。首先了解并测试它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T21:47:56.730

保持原样不变，将其分支为您自己的 GitHub 目录，然后对其进行更改。最好将修订分解为更小的阶段……首先尽可能多地将较新的开发改造到遗留代码中，然后更改核心基础架构并在之后进行任何您无法事先进行的剩余更改. 但即使这样也应该分阶段进行，根据需要在第一阶段使用存根，以便在基础设施更改后添加新材料。

然后差异将更加清晰地分层，并且您将呈现每个阶段（包括原始阶段）作为回归测试的基准......这应该是每一步过程的重要组成部分。

永远不要抛弃旧的，要善于在 4 维而不是 3 维中思考。项目不是当今世界的 3 维快照，而是包含其在时空中的整个范围的 4 维链 - 即它的整个历史。历史与快照一样重要，甚至更多。将来，您或其他人可能最终会发现原始做事方式的某些部分更好，需要回溯或重新整合，甚至单独分支。存档是为了存储历史（即时空中的 4 维物体），而不是现在的事物。这种思维模式……尤其是在那些还太年轻而无法在这个世界上待得足够长而无法更好地了解的人中……被困在扁平的 3-D 当下世界中是一种时间形式近视被称为存在主义；

# jquery - 如何将按钮放在溢出隐藏div的末尾？

> ID：11572999
> 
> 赞同：0
> 
> 时间：2012-07-20T04:42:14.770
> 
> 标签：jquery, css, html, overflow

HTML：

```
<div id="content">
content ,content,content ,content...
<input type="button" value="see more">
</div>

css

#content
{
        width:500px;
    height:400px;/* actual height 1000px */
    float:left;
    color:grey;
    text-align:justify;
    text-indent:1em;
    border:1px solid black;
    padding:10px;
        overflow:hidden;
} 
```

使用 jquery 单击按钮，div 将扩展到 1000px。但我的问题是，通过设置`overflow:hidden`，按钮不可见。我希望按钮显示在 div 的末尾。在点击之前和点击之后，我想在 div 的末尾显示按钮。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:43:48.870

```
#content{
    position: relative; 
}
input[type='button']{
    position: absolute;
    bottom: 0;
} 
```

绝对定位元素相对于最近的“非静态”定位父元素定位。这就是为什么我们需要先设置`#content`为`relative`。

**演示：http:** [//jsfiddle.net/RFFwy/](http://jsfiddle.net/RFFwy/)