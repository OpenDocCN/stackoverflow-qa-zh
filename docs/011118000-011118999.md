# StackOverflow 问答 11118000-11118999

# groovy - Actors主体中“loop()”方法的意义是什么 - GPars

> ID：11118000
> 
> 赞同：2
> 
> 时间：2012-06-20T10:52:55.973
> 
> 标签：groovy, actor, gpars

在 Actors 主体中，我们需要在 loop() 方法中编写 react() 方法。我想知道这个循环方法与“for”或“while”循环有何不同？

GPars 文档说“loop() 与嵌套的 react() 块合作，并将确保在后续消息检索中循环。” 我不完全理解这一点。根据我的理解，无论我们为循环方法提供什么闭包，都会一次又一次地执行无数次。那么与嵌套的 react() 块协调有什么意义呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:35:07.803

[我相信去年](http://www.drdobbs.com/parallel/229402193)的这篇 DrDobbs 文章中有一个很好的解释（第 1 页底部和第 2 页开头）

你基本上可以做这种事情来模拟延续（从第1页的底部）：

```
def actor = actor {
    loop {
        log 'Waiting for a gift'
        react {gift ->
            if (myWife.likes gift) reply 'Thank you!'
            else {
                reply 'Try again, please'
                react {anotherGift ->
                    if (myChildren.like gift) reply 'Thank you!'
                }
            }
        }
    }
} 
```

以一种允许 Actor 与当前线程分离的方式（在该文章的第 2 页开头描述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T12:49:20.590

蒂姆所说的一个小补充——for（或while）循环在actor的体内不会像预期的那样工作，因为他们不知道react的延续。简而言之，loop() 是在actor 主体中对后续消息检索（反应）进行迭代的唯一方法。

# perl - Perl 中对象构造函数中命名参数的习语

> ID：11118005
> 
> 赞同：1
> 
> 时间：2012-06-20T10:53:09.807
> 
> 标签：perl, oop, parameters, idioms

在 Perl 中，如果我想在对象构造函数中使用命名参数，如果我希望进行一些验证，我的代码似乎有点笨拙。

```
sub new {

   my $class = shift;
   my $self = {};

   my %args = @_;
   foreach my $argname (keys %args) {
     if    ($argname eq 'FOO') { $self->{$argname} = $args{$argname}; }
     elsif ($argname eq 'BAR') { $self->{$argname} = $args{$argname}; }
     elsif ($argname eq 'BAZ') { $self->{$argname} = $args{$argname}; }
     …
     else                      { die "illegal argument $argname\n"; }
   }

   bless $self;
   return $self;
} 
```

首先，使用临时哈希 ( ) 似乎有点笨拙`%args`。其次，整个`if`链条看起来冗长乏味。

后者可以简化为

```
 if ('-FOO-BAR-BAZ-'=~m/-$argname-/) { $self->{$argname} = $args{$argname} }
  else { die "..."; } 
```

但我想这可以改进。

如果我需要检查值，`if … elsif`链是否仍然需要？

我搜索了一下，但找不到更好的成语。有没有（除了使用某种 Perl OO 框架）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T11:53:10.770

我发现自己不断地编写不必要的代码来检查给定的参数。但后来我发现了[Params::Validate](https://metacpan.org/module/Params%3a%3aValidate)。它易于使用，如果验证失败，它会提供非常清晰且用户友好的错误消息。涵盖所有可能的参数组合及其错误消息是一项乏味的任务。我更喜欢这种方式：

```
use Params::Validate qw/:all/;
sub new {
    my $pkg = shift;
    validate(
        @_, {
            foo => { type => SCALAR | ARRAYREF },
            bar => { type => SCALAR, optional => 1},
            baz => { type => ARRAYREF, default => ['value'] },
            quux => { isa => 'CGI' }
        }
    );

    return bless { @_ }, $pkg;
} 
```

后来这段代码

```
MyApp::Something->new(
    foo => 123,
    bbr => 'typo',
    quux => CGI->new()
); 
```

变成：

```
The following parameter was passed in the call to MyApp::Something::new but was not listed in the validation options: bbr
 at test.pl line 14.
    MyApp::Something::new(undef, 'foo', 123, 'bbr', 'typo', 'quux', 'CGI=HASH(0x7fd4fa1857e0)') called at test.pl line 27 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:15:33.063

您可以使用[智能匹配](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)

```
my @validkeys = qw(FOO BAR BAZ);
if ($argname ~~ @validkeys) {     # smart matching
    $self->{$argname} = $args{$argname};
} else { die ... } 
```

如果您不喜欢智能匹配运算符的晦涩难懂，您可以一起使用正则表达式

```
my $rx = '^' . join("|", @validkeys) . '$';
if ($argname =~ /$rx/) { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:59:57.983

警告！未经测试的代码。

检查有效的密钥。

```
die "invalid args" if grep { ! /^FOO|BAR|BAZ$/ } keys %args; 
```

存储`%args`。

```
$self->{$_} = $args{$_} foreach(keys %args); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:00:14.393

为了验证，您可以定义所有合法参数的哈希，然后只需测试，如果键在其中

例如：

```
my %legal = ('FOO' => 1, 'BAR' => 1, 'BAZ' => 1);
my %args = @_;
foreach my $argname (keys %args) {
    if(exists $legal{$argname}) { $self->{$argname} = $args{$argname}; }
    else { die "illegal argument $argname\n"; }
} 
```

关于笨拙：这就是在 perl 中做到这一点它可以有效地使用散列并且散列文字是可读的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T15:49:46.670

为了完整起见，我添加了这个答案（对我自己的问题）来描述我实际要做的事情，它基于几个答案中的元素。

```
sub new {
  my $package = shift;

  # 1\. validate argument names
  my %args = @_;
  my $valid = '^FOO|BAR|BAZ$';
  for (keys %args) { die "invalid arg $_\n" unless /$valid/; }

  # 2\. construct instance from arguments
  return bless { @_ };
} 
```

尽管我还没有使用 Params::Validate，但我已经接受了[Sebastian 的回答。](https://stackoverflow.com/a/11118950/477035)

笔记：

*   我正在部署到具有 Perl 5.8（真的）但没有 Params::Validate 的服务器。我有理由不推动升级到 5.10.x 等。

*   对于我的具体情况，上述内容在简洁性和可读性之间取得了很好的平衡。我可以稍后添加更多验证而无需太多重构。

*   这弥补了用于设置参数的 getter/setter 或访问器样式方法的优点之一（编译器捕获参数名称中的拼写错误，因为它是方法名称），同时更简洁。

对于其他人，上述内容将不适用，因此我接受了塞巴斯蒂安的回答，我认为这是最好的回答（YMMV）。

# macros - SAS 宏 - 将多个表合并为一个，由另一个表控制

> ID：11118009
> 
> 赞同：1
> 
> 时间：2012-06-20T10:53:33.380
> 
> 标签：macros, sas, sas-macro

我来晚了一个项目，想编写一个宏来规范化一些数据以导出到 SQL Server。

有两个控制表...
- 表 1`(customers)`包含客户唯一标识符列表
- 表 2`(hierarchy)`包含表名称列表

然后`n`还有其他表格。`(hierarchy)` *（在 SourceTableName 字段*中命名）中的每条记录一个。形式为...
- CustomerURN, Value1, Value2

我想将所有这些表组合成一个表 ( `sample_results`)，其形式为...
- SourceTableName、CustomerURN、Value1、Value2

但是，应该复制的唯一记录应该是`(customers)`表中存在的 CustomerURN。

我可以使用硬编码格式执行此操作`proc sql`，例如...

```
proc sql;
insert into
  SAMPLE_RESULTS
select
  'TABLE1',
  data.*
from 
  Table1    data
INNER JOIN
  customers
    ON data.CustomerURN = customers.CustomerURN

<repeat for every table> 
```

但是每周都会将新记录添加到`hierarchy`表中。

有没有办法编写一个从`hierarchy`表中获取表名的循环，然后调用将`proc sql`数据复制到`sample_results`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:22:34.307

您可以将所有层次结构表连接在一起，并执行单个 SQL 连接

```
proc sql ;
  drop table all_hier_tables ;
quit ;

    %MACRO FLAG_APPEND(DSN) ;
      /* Create new var with tablename */
      data &DSN._b ;
        length SourceTableName $32\. ;
        SourceTableName = "&DSN" ;
        set &DSN ;
      run ;

      /* Append to master */
      proc append data=&DSN._b base=all_hier_tables force ; 
      run ;
    %MEND ;

    /* Append all hierarchy tables together */
    data _null_ ;
      set hierarchy ;
      code = cats('%FLAG_APPEND(' , SourceTableName , ');') ;
      call execute(code); /* run the macro */
    run ;

    /* Now merge in... */
    proc sql;
    insert into
      SAMPLE_RESULTS
    select
      data.*
    from 
      all_hier_tables data
    INNER JOIN
      customers
        ON data.CustomerURN = customers.CustomerURN
quit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:59:54.680

另一种方法是创建一个视图，以便它始终反映元数据表中的最新数据。调用执行函数用于从层次数据集中读取表名。这是一个示例，您应该可以对其进行修改以适合您的数据，最后一段代码与您相关。

```
data class1 class2 class3;
set sashelp.class;
run;

data hierarchy;
input table_name $;
cards;
class1
class2
class3
;
run;

data ages;
input age;
cards;
11
13
15
;
run;

data _null_;
set hierarchy end=last;
if _n_=1 then call execute('proc sql; create view sample_results_view as ' );
if not last then call execute('select * from '||trim(table_name)||' where age in (select age from ages) union all ');
if last then call execute('select * from '||trim(table_name)||' where age in (select age from ages); quit;');
run; 
```

# security - 使用 Symfony 2.1-dev 进行身份验证（错误的凭据）

> ID：11118013
> 
> 赞同：0
> 
> 时间：2012-06-20T10:53:50.963
> 
> 标签：security, authentication, symfony-2.1

我正在使用 Symfony 2.1-dev 并且在使用表单对用户进行身份验证时遇到问题。

[首先我的代码](https://gist.github.com/2959325)

问题：
身份验证时出现“错误凭据”错误。
我将一些日志记录到实体中，并且由于未显示记录的字符串，我认为该实体没有被使用。
无论如何，日志显示正在对正确的表进行查询。

我能错过什么？

提前感谢您的帮助

**编辑：**

我现在设法发现问题出在密码上。
出于某种原因，似乎在对来自灯具的密码进行编码时，这些密码被缩短为 60 个字符，而在验证结果字符串的长度时，则为 88 个字符。
为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:46:20.897

最后它奏效了。我更新了密码字段的长度。起初它不起作用，但突然间它起作用了。一定是有缓存的东西。

我学到的东西，也许对其他读者有好处：

*   实体的 __construct 方法没有被执行。我想这个类正在被子类化。因此，登录构造函数什么都不做。
*   照顾缓存...我之前尝试过最终的解决方案，但由于它不起作用，我寻找其他问题并花了一整天的时间。
*   这类问题可以帮助您深入了解 Symfony 的内部结构 :-)

# c - 如何编写一个独立运行两个任务的程序？

> ID：11118015
> 
> 赞同：1
> 
> 时间：2012-06-20T10:53:55.830
> 
> 标签：c

我想编写一个程序，让用户在特定时间段内猜测一个数字。如果他未能在时间段内猜出正确的数字，则会发生超时，游戏将从第一个开始。

喜欢

```
main() {
    int i, timer;
    while(1) {
        /* How to run the timer independently and it will signal that time out !!!*/
        for(i = 0; i <= 10; i++) {
            printf("\n Guess the value of i : ");
            scanf("%d", &j);
            if(i != j) {
                printf("Bad Luck wrong Guess ");
            }
            else
                printf("Great, You guessed correctly \n");
        }
    }
} 
```

在这个程序中，我只是不知道在哪里运行计时器以及如何运行？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:34:25.600

您的基本问题似乎是 scanf() 在用户按下 Enter 之前不会返回。因此，即使计时器已过期，在用户按下 Enter 之前也不会发生任何事情。

在标准 ANSI C 中，对此没有真正的解决方案。您将需要使用特定于平台的功能。

Windows 上的一种可能性是将 conio.h 头文件与[_kbhit()](http://msdn.microsoft.com/en-us/library/58w7c94c.aspx)之类的函数一起使用。这使您可以在尝试读取之前测试是否按下了某个键，因此如果没有按下任何键，您可以继续检查计时器。如果某个键被按下，您可以使用 getc() 读取它，而不必担心 getc() 会坐在那里等待用户按下某个键。继续将读取的键添加到字符数组，直到您读取 '\n' 字符。然后使用 sscanf() 将字符串转换为数字。

对于计时器本身，您可以只检查 time() 函数的返回值。

这不是解决问题的最有效方法，因为当您编写代码时，您会发现程序正在一次又一次地循环测试 _kbhit()。

在 Windows 上更有效的解决方案是使用重叠 I/O，但这可能超出了您当前尝试的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:07:16.883

您可以使用该信号进行倒计时并触发相应的动作。

```
signal(SIGALRM,countdown);
setitimer(ITIMER_REAL,&new_timeset,NULL); 
```

倒计时是您要执行的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:07:36.807

如果超过时间限制，如何使用`gettimeofday()`和检查每次之前的时间，您可以打破循环并显示消息。`scanf`

# listview - 列表视图css不呈现jquery mobile

> ID：11118017
> 
> 赞同：2
> 
> 时间：2012-06-20T10:53:59.357
> 
> 标签：listview, jquery-mobile, cordova, backbone.js

我正在使用jquery mobile、phone gap 和backbone.js 制作一个应用程序。在此我动态创建页面并将其附加到 html 页面的正文元素。我还在为特定页面动态创建列表视图。然而，列表视图只显示 li 标签的普通链接。我的视图的代码如下

```
directory.views.UserListPage = Backbone.View.extend({

 initialize: function() {
    this.template = _.template(directory.utils.templateLoader.get('user-list-page'));
},

 events:{ "click .add-button": "addButton_clicked"
},
render: function(eventName) {
    $(this.el).html(this.template(this.model.toJSON()));
    this.listView = new directory.views.UserListView({el: $('ul', this.el),model: this.model});
    this.listView.render();

    $content = $(this.el).children(":jqmData(role=content)");
  $(this.el).appendTo($("body")).page();

    $content.find(":jqmData(role=listview)" ).listview();
    return this;
},

addButton_clicked: function(event) {
console.log("clicked");
    event.preventDefault();
   directory.app.navigate("addUser", {trigger: true});
}});

directory.views.UserListView = Backbone.View.extend({

initialize: function() {
    this.model.bind("reset", this.render, this);
},

render: function(eventName) {
    $(this.el).empty();
    _.each(this.model.models, function(user) {
        $(this.el).append(new directory.views.UserListItemView({model: user}).render().el);
    }, this);
    return this;
}});

directory.views.UserListItemView = Backbone.View.extend({

tagName: "li",

events:
{
"click" : "borrowHistory"
}
,
initialize: function() {
    this.template = _.template(directory.utils.templateLoader.get('user-list-item'));
},

render: function(eventName) {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
} ,
borrowHistory: function(event) {

    var children = $(event.currentTarget).children();
    var attribute = children[0].dataset.id;
   var url = "#/rs/" + attribute +  "/borrowHistory";

   directory.app.navigate(url, {trigger: true});
   return false;
}}); 
```

我的模板看起来像这样

```
<div data-role="header" data-theme="e">
    <a href="#addUser" data-role="button" data-icon="plus" >Add</a>
    <h1>Borrow Mate</h1>

  </div>
  <div id="listUser" data-role="content"  >
  <div id="listcontent">
     <ul  id="userList" data-role="listview" data-inset="true" data-theme="e" data-divider-theme="e" data-count-theme="e"> </ul>
    </div>
  </div> 
```

用户列表项

```
<div class="userListItem" data-id = "<%= id %>" >
    <b><%= Name %></b>
    <span class="ui-li-count"><%= Credits %></span>
</div> 
```

![添加了我的输出的屏幕截图](../Images/7025efa312ed9d256cabfe23d2e4047d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:20:35.670

您需要刷新列表视图

*   [http://jquerymobile.com/demos/1.1.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-methods.html)

因此，在您附加需要刷新的列表项之后，就像这样

```
$('#userList').listview('refresh'); 
```

使用您提供的模板的 id 属性

```
<ul id="userList" data-role="listview" data-inset="true" data-theme="e" data-divider-theme="e" data-count-theme="e">
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T11:48:54.920

如果样式不适用于特别 li 元素。检查与 li 关联的类。让它太刷新。

以以下格式签出

$(#userList .userListItem).listview("刷新");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T10:19:50.943

您需要确保在“导航”到您的页面之前调用了 render()。

这样，jQuery Mobile 就有时间在内容显示之前对其进行标记。

我通过使用 pub/sub 委托渲染和导航事件解决了这个问题，因此它们在正确的时间（数据到达后）被调用，这消除了您面临的竞争条件问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:48:15.440

您可能需要在 pageshow 事件中调用 listview 上的 refresh 方法，或者如果这是第一次创建它，则可能需要调用 create 方法。

例如

```
$(document).delegate('#yourPage', 'pageshow', function (event, ui) {
        $('#userList').listview('refresh');
          //or surround in a try catch block
       /* try {
           $('#userList').listview();
          } catch {
           $('#userList').listview('refresh');
         }*/
    }); 
```

# asp.net - 用于开发新windows azure管理门户的框架？

> ID：11118022
> 
> 赞同：11
> 
> 时间：2012-06-20T10:54:17.093
> 
> 标签：asp.net, frameworks, azure, microsoft-metro

有谁知道微软使用什么框架在 Windows azure 上开发类似地铁的 web 管理门户。如果是这样的话。开发人员可以使用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:54:17.313

我[提出了同样的问题](https://stackoverflow.com/questions/14713118/library-for-developing-azure-web-interface-style-web-sites)，并因此受到了很多人的讨厌。获胜的答案是[Metro UI Pack](http://metroui.org.ua/)。它完成了他们在 Azure 中所做的很多事情，但您必须自己实现其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:05:17.047

CSS 可能是自定义的，但门户网站为 javascript 部分使用了一些开源库：

*   jQuery-1.7.1
*   jQuery-ui
*   jsObservable
*   渲染
*   JsViews
*   jquery.event.drag

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-07T07:06:10.767

你可以看看这个codepen：[https ://codepen.io/utillity/project/editor/ArjgLa](https://codepen.io/utillity/project/editor/ArjgLa)

```
It's basically a cascade of flexboxes. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-24T09:34:13.943

淘汰赛

需要 Js

打字稿

较少的

ASP.NET

D3 Js Web 套接字

更多信息的一些链接 [Steve Sanderson - 使用 Knockout.js 构建大型单页应用程序](https://vimeo.com/97519516)

[在新的 Azure 门户的引擎盖下](https://jbeckwith.com/2014/09/20/how-the-azure-portal-works/)

[从头开始：构建 Microsoft Azure 预览门户](https://channel9.msdn.com/Shows/Web+Camps+TV/From-the-ground-up-on-the-Microsoft-Azure-Preview-Portal/player?h=540&w=960)

[用于开发新windows azure管理门户的框架？](https://stackoverflow.com/questions/11118022/framework-used-to-develop-the-new-windows-azure-management-portal)

信用[度](https://www.quora.com/What-are-the-tools-Microsoft-used-to-build-the-new-Azure-portal)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T09:30:38.920

微软可能没有使用这个框架，但你可以试试[jq-metro](http://www.jqmetro.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-21T00:27:00.410

如果您正在寻找 Metro 的角度组件库，它就在[这里](https://morrisjdev.github.io/ng-metro4/#/)

# date - 如何在 Spring 3 MVC 中允许空日期

> ID：11118023
> 
> 赞同：0
> 
> 时间：2012-06-20T10:54:17.950
> 
> 标签：date, spring-mvc, formatter

我为日期绑定定义了一个全局格式化程序：

```
<annotation-driven conversion-service="conversionService" />

<beans:bean id="conversionService"
    class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <beans:property name="converters">
        <beans:list>
        ...
        </beans:list>
    </beans:property>
    <beans:property name="formatters">
        <beans:set>
            <beans:bean id="dateFormatter"
                class="org.springframework.format.datetime.DateFormatter">
                <beans:constructor-arg><beans:value>dd/MM/yyyy</beans:value></beans:constructor-arg>
            </beans:bean>
        </beans:set>
    </beans:property>
</beans:bean> 
```

这工作正常，但现在我还需要一个特定的日期字段可以留空。如何配置格式化程序（或此字段）以接受空值？

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:21:49.363

您可以通过为 DateFormatter设置**lenient** in **false来做到这一点**

```
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="formatters">
        <set>
            <bean class="org.springframework.format.datetime.DateFormatter">
                <constructor-arg>
                    <value>dd/MM/yyyy</value>
                </constructor-arg>
                <property name="lenient" value="false"/>
            </bean>
        </set>
    </property>
</bean> 
```

# grid - 多选网格不起作用

> ID：11118024
> 
> 赞同：1
> 
> 时间：2012-06-20T10:54:19.187
> 
> 标签：grid, extjs4, multi-select

我在 ExtJS 4 中有一个网格面板，具有以下功能：

```
extend : 'Ext.grid.Panel',
multiSelect: true,
alias : 'widget.negativeMoviesView',
frame : true,
autoScroll : true,
height: 690,
renderTo: Ext.getBody(),
store : 'NegativeMovieStore',
columns : [{
            header : 'Name',
            dataIndex : 'name',
            flex : 1
}] 
```

multiSelect 设置为 true，如果我在 firebug 中检查它实际上是 true 并且 selectionMode 是 MULTI，但是它只允许我一次选择一行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:40:20.880

正如沙指出的那样。multiSelect 选项仅通过使用 Shift 或 Ctrl 键来选择一个批次或以与本机应用程序允许的相同方式添加到选择中来使网格具有多个选择。

如果您正在寻找单击以从选择中添加/删除，您可以使用 simpleSelect 或 selModel 属性来实现这一点。

这将允许单击以从选择中添加/删除

```
simpleSelect: true 
```

这将呈现一个额外的列，让您检查要选择的行。

```
selModel: Ext.create('Ext.selection.CheckboxModel') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:51:33.883

[ExtJs 4.0 演示](http://ext4all.com/post/extjs-4-0-7-grid-multiselect)

[ExtJs 4.1 演示](http://ext4all.com/post/extjs-4-1-1-grid-multiselect)

# asp.net-mvc - ASP.net mvc - 使用 php web 服务

> ID：11118029
> 
> 赞同：1
> 
> 时间：2012-06-20T10:54:34.130
> 
> 标签：asp.net-mvc, web-services, soap

我正在尝试从我的 ASP.net MVC 3 项目中使用 PHP Web 服务，我添加了一个服务引用，构建正常，但是使用它时出错：

> 内容类型 text/xml；响应消息的 charset=ISO-8859-1 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法

我猜它必须与内容类型格式绑定有关，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:26:09.590

解决方案 -> 将 WebService 导入为“添加 Web 引用”而不是“添加服务引用”，VS 会自动完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:31:39.610

我相信这个问题已经得到解答，我相信同样的概念适用于任何类型的 Web 服务：[WCF 异常：文本消息编码和 ISO-8859-1 编码](https://stackoverflow.com/questions/4123584/wcf-exception-text-message-encoding-and-iso-8859-1-encoding)

# .net - 描述向 SaaS 模型的过渡

> ID：11118030
> 
> 赞同：8
> 
> 时间：2012-06-20T10:54:37.100
> 
> 标签：.net, architecture, cloud, saas

从独立解决方案到[软件即服务](http://en.wikipedia.org/wiki/Software_as_a_service)的有机增长过程是什么？清楚地

> 可扩展性不是在开发结束时添加的“功能”。[^](https://twitter.com/ajbaird)

所以我对所需的高级代码和架构更改感兴趣。

*   是否会选择现有平台并将其过度规范化？

*   是否从简单的云架构重新开始，然后迁移遗留功能？

*   积极的技术升级（即 Web 表单 > MVC）是否适合该流程？

## 更新：

我被要求对当前的项目架构进行一些澄清。无需过多详细介绍，请考虑一个插入到业务逻辑层并与多个第三方供应商集成的 .NET Webforms 应用程序。每当需要新的平台实例时*（我这里没有术语，我的意思是当新客户端需要业务逻辑调整、与不同的第三方提供商集成、热门的新品牌等时）*，现有代码被分支并且新环境是设置。任何更改实际上都是非常低级的，无论它们是否直接发生在 aspx 文件、组件代码或数据库配置中。

这种情况似乎非常适合实施“适当的” SaaS 模型，但我在为迁移过程做出建设性贡献时遇到了困难。重新表述最初提出的问题，这将是一个有效的策略：

*   过度规范现有平台并使一切可配置，有效地暂停这种*模拟的可扩展性*，并且在重构架构之前不会引入新客户端。这个恕我直言的缺点是继续依赖不是为可扩展性而构建的代码和结构（详情如下）。

*   从头开始使用被认为（主观上）为未来解决方案提供*的最佳架构，然后根据需要迁移遗留功能。*这允许几乎任何所需的技术升级，但在完成之前缺乏可见性，并且作为一种激进的变化，管理层将被视为固有的高风险。

我个人倾向于第二种选择，因为存在大量遗留代码并且缺乏足够的数据库规范化。同时，现有解决方案成熟且功能强大（*如果没有损坏，请不要修复它*），并且除了我上面列出的两种方法之外，可能还有更多的扩展方法。

如果上面的上下文允许针对特定场景的建议，我会接受的。但是，我仍然对适用于更广泛受众的更一般的注意事项和建议持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:17:44.027

# 非常简短的回答

关键是*架构*。方法就是*分而治*之。方法是*放松*。

# 更长一点的答案

## 建筑学

建筑物最重要的组成部分是它的架构。空间由墙壁和地板、窗户和天花板（即建筑本身的元素）塑造的方式。建筑师的目的不是设计墙壁。他将它们设计为实际工作的次要部分：设计由墙壁塑造的空间。我们建造建筑物不是为了有墙，我们建造它们是为了在里面有空间。

我们首先设计功能，这是我们想要从软件中获得的功能。然后我们详细介绍如何使它成为可能，即构建产品。我们使用的技术不是主要的东西，它们是墙壁，我们真正想要的是空间本身。

充分了解我们想要从我们正在构建的软件中得到什么后，工程就变得更加容易且几乎是自动化的过程。技术难题开始出现在易于理解的定义中，幸运的是，有明显的解决方案。

## 分而治之

良好架构的一个非常重要的衡量标准是它使解决方案的组件清晰定义。当我们可以分别看到大图的这些组成部分时，我们可以将工作分成单独的部分。然后我们可以构建单独的东西来一起工作。

## 放松

也许这个标题听起来像是我想给文字带来一些幽默；但不，请不要误会我的意思。如果你有一个好的架构，你可以放松，你的 Web 服务器、数据库服务器、工程师、客户、用户和世界其他地方也可以。如果不是这种情况，则意味着您应该重新开始构建您的架构。

## 嗯？

嘿，我到底在说什么？*它有一些段落和三个标题，除了软件*之外，我没有使用任何软件术语。这种抽象的喋喋不休是为那些整天无所事事，懒洋洋地四处走动，说话，说话，说话的人准备的……我们是软件人，我们没有时间做这些。嘿，我，哈桑，别说了……！

好的，我会试试的；但首先，让我们放松一下……然后我们可以看一些真实的例子。

# 例子

假设我们正在为专业人士和个人开发网络发布服务。每个客户都有自己的网站，在我们的系统上运行。这些网站可以是访问量很少的普通个人网站，或者如果我们的业务幸运的话，我们的其他一些客户可以是像纽约时报这样的大型出版物。

我们需要解决两种可扩展性问题：随着我们开始拥有越来越多的客户、运行越来越多的网站而扩展我们的业务和系统。与第二个相比，这是一个非常简单的问题，它正在扩展单个网站，因为它获得越来越多的访问者，越来越多的数据，越来越多的应用程序在这些数据上运行。

我们可以将“如何扩展”的问题改写为“如何划分”，以更清楚地看到解决方案。如果我们可以将某些东西分成小块，我们可以通过添加更多资源来做这些小块，横向增长。

我们将拥有可以处理这些数据的数据和应用程序。假设我们有一台数据库服务器和一台 Web 服务器，并尝试使其具有可扩展性。

考虑我们将为我们的服务运行的网络服务器；如果我们不在这些机器上保留数据，它们将变成通用的、平等的组件、数据后端的小客户端，将这些数据连接到世界其他地方。通过保持我们的网络服务器轻便、愚蠢、空旷，我们可以轻松地让其中的许多服务器处理越来越多的请求。

好吧，将 Web 服务器变成愚蠢的代理并不是最聪明的主意。我们需要做一些事情，运行应用程序。而且，因为在我们的架构中，Web 服务器是最容易繁殖的，所以我们希望在这些 Web 服务器上做尽可能多的事情。我们将在下面的“更智能的划分”标题下继续解决这个难题。在此之前，让我们看看我们目前有什么样的架构以及它的可扩展性。

我们使用负载均衡器使许多 Web 服务器并行运行，并使用 DNS（甚至在请求到达我们的系统之前）将许多网站分成多个负载均衡器。例如，a.com、b.com、c.com 到负载均衡器 1，a-very-big-website.com 到负载均衡器 2，... 每组一个负载均衡器、一组 Web 服务器和一个数据库服务器在我们的系统中创建了一个单独的*宇宙*。现在我们可以拥有数以百万计的网站，并通过无限制地添加更多这些独立的宇宙来扩展我们的系统。我们可以为营销部门提供的尽可能多的网站服务于尽可能多的客户。我们的第一个问题已经解决了。运行大型大型网站怎么样？

## 更智能地划分

当然，我们不能像处理单独的网站那样将单个网站划分为单独的宇宙；但这并不意味着我们不能分割任何东西。我们将继续分而治之。为此，我们需要仔细研究我们解决的问题。

什么是网站？网页，支持内容，如`css`和`js`文件，多媒体内容，如图像和视频文件，以及数据，大量数据。多亏了 CDN 和云计算系统提供的出色存储服务，静态文件不再是我们问题的重要组成部分......

我们真正做的是渲染网页。上面，我们认为我们的 Web 服务器是我们数据库后端的非常轻量级的通用接口。我们还没有解决如何在我们的宇宙中运行应用程序。现在是时候这样做了。

对我们系统的每个请求都将到达一个站点，并由为该站点运行的应用程序处理。我们的网络服务器要做的第一件事就是决定请求属于哪个站点。在我们的数据库服务器上，我们保留了一个将主机名与站点匹配的表。对于我们拥有的每个新客户网站，我们都会在此表中添加一个或多个域以匹配该站点。对于我们的网络服务器的每个请求，我们将查询数据库服务器并决定加载哪个站点。好的？

不，不好。太糟糕了。为什么？

### 大数字，小数字

我们的网站数量很少；但是请求数量很大。与其他类型的数据（如博客网站上的评论）相比，Universe 上的网站数量的变化频率要低得多。在已建立的 Universe 中，此表可能每天更新几次。整天为每个请求一次又一次地查询这样一个很小的（几千条记录，很小！）数据库并不聪明。明智的做法是将此表的副本保存在 Web 服务器上，并仅在更新时更新。我们如何知道站点列表何时更新？我们可以保留一个带有数字的行作为我们的表格版本号。随着每次更新，我们可以增加这个数字。或者我们可以保留上次更新的时间戳。Web 服务器可以检查数据库服务器中的这个数字，并将它与它们的本地内存版本进行比较。如果表较新，我们再次拉取数据，覆盖本地内存中的副本。这样，我们将把数千个查询减少到很小的数量。大数，小数……

在这一点上，我们在建筑物上使用的材料开始变得重要。哪种语言，什么样的平台和数据库系统等等。现在，它们很重要，因为它们可以使我们的架构更好或更差地工作。例如，对于表的更新，我们的数据库服务器可以有一种机制来通知 Web 服务器有关更新。这样一来，我们就更进一步，彻底去除了对域站点表的不必要查询。所以，如果我们选择的系统提供了这样的机制，这意味着这些系统是我们架构的不错选择。

当我们很好地了解我们想要从我们的软件中得到什么时，以一种智能的方式划分事物就会自动发生。扩展数据库服务器非常困难。因为我们需要数据在一起。通过增加 Web 服务器的数量，我们可以无限制地横向扩展；但对于数据库服务器，这不适用。数据库服务器必须保持对数据的访问，并且机器具有我们无法以有效方式扩展的限制。

每个数据库系统都提供了分片或无共享架构等扩展方式。有时您必须使用这些；但正如我在论坛、博客和其他人们分享经验的地方看到的那样，恕我直言，人们使用这些内容过于激进和错误。他们让他们的数据库变得越来越大，然后“嘿，是时候扩展了，让我们添加一些分片吧。” 所有这些应用程序中的 99% 都是盲目运行的。人们将他们的问题抛给软件，并期望它们能像魔术一样得到解决。不幸的是，他们很快意识到没有魔法。

我们应该通过观​​察我们的数字来避免盲目运行解决方案：大数字，小数字。此外，通过了解我们系统的内部工作原理并通过架构解决问题，而不是大量使用材料。

这是一个架构解决方案：[Architected Solution](http://benjaminwey2000.files.wordpress.com/2008/01/calatravas-alamillo-bridge-valencia.jpg) (by [Calatrava](http://en.wikipedia.org/wiki/Santiago_Calatrava) )。

以下是其他依赖于材料而不是良好架构的解决方案：[[盲运行解决方案 1](http://image.tradevv.com/2010/07/08/nanrenmao_1425380_600/steel-bailey-bridge.jpg) ]、[[盲运行解决方案 2](http://pacemen.com/wp-content/uploads/2011/09/heavy-weight-steel-bridge-490x361.jpg) ]

自己判断差异。

我们如何扩展数据库服务器？我们可以重新考虑我们的数据，而不是盲目地在中间划分表格。我们可以将用户帐户信息与站点模板分开吗？当然，为什么不？我们可以为旧数据和新数据保留不同的数据库服务器吗？有点困难，特别是考虑到搜索设施；但为什么不呢？

明智地划分，而不是盲目地划分！我接受有些时候你不能再分割它了；但是来吧，我们中有多少人在为 Google 或 Facebook 工作？

-- 嘿，伙计，我们有一个非常大的数据集，当我们运行时......

——嘘。首先，返回并检查您的数据集。它真的必须是*一个大数据集*吗？

大多数时候，不，它没有。我们只是不想承认...

## 如何迁移

从头开始重建一切需要许多企业无法承受的时间。更好的方法是在不重写每个组件的情况下构建我们当前的系统；而是将它们分离并重新定义为组件。这主要是分析，然后是很少的变化。系统上的每个函数调用都可以很容易地成为一个分割点。我们可以将系统从这一点分割成两部分。

只需几个小时对当前系统进行愉快的观察，就会向您展示如何划分这些部分的许多想法。一旦你把它们分开，就很容易重新设计所有东西，然后一块一块地重新构建你的新系统。如果我有一栋楼，并且我需要在同一块土地上建造一座更大的楼，那么在不搬迁所有已经居住在那里的人的情况下建造新楼是一项非常困难的工作；但并非不可能。当涉及到软件而不是建筑物时，这要容易得多。所以？

### 放松

它是软件。它很软。您可以复制数据，对其进行测试，删除所有内容，再复制一百万次。一旦你的架构设计得很好，你的错误永远不会导致灾难性事件。把一张6人的餐桌变成60人的餐桌是非常困难的；但是软件就是……*软件*，我们可以*很容易地*做这样的事情。*放松。*

*——上面的问题涉及到这样一个领域，仅仅用几段话是不可能涵盖的。基于问题的这一部分：“但是，我仍然对适合更广泛受众的更一般的注意事项和指针持开放态度。” 我试图以一般形式提及事物而不深入细节。尽管我试图给出一些我的原则实际应用的小例子，但我知道我在这篇短文中留下了许多未解决的问题。我感谢评论中的任何批评和问题。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T20:43:31.473

```
I'm interested in high level code and architecture changes required. 
```

不幸的是，对于应该如何改变架构没有“正确”的答案。解决方案取决于您当前的架构是什么样的，以及您作为开发人员的能力和偏好。一些独立系统可能已经拥有一个相对可扩展的平台，而其他系统可能需要在开始获得牵引力时进行改进，而其他系统可能需要从头开始，因为它们的代码库无法使用。

坚实的代码库非常重要。如果没有高效且干净的代码库，您的架构就不可能实现理想的扩展。很多公司都犯了一个错误，就是为了解决短期问题而用创可贴来解决短期问题——但从长远来看，这永远不会奏效。当某些东西不能正常工作时，花时间以最合乎逻辑的方式修复它——即使这意味着调整您平台中的其他代码。

可以做的最好的事情是为您提供有关构建可扩展系统的一般建议，即使用缓存，将系统设计为水平扩展，优化数据库，确保在适当的地方使用数据库索引。一些最佳实践依赖于架构，但几乎每个可扩展平台都需要遵循一些一般原则*。*为了深入了解良好的可扩展性技术和设计模式，我会查看[可扩展性规则：网站扩展的 50 条原则](https://rads.stackoverflow.com/amzn/click/com/0321753887)。

至于选择平台，这完全取决于您和您作为开发人员的偏好。你喜欢用什么编码？C#、红宝石、PHP？使用您的团队同意的语言和平台。我更喜欢 Ruby on Rails 并且我喜欢 MVC 设计模式，但这并不意味着它是最适合您的解决方案。选择对您最有意义的东西，并与之合作开发可扩展的系统。

过去，当我在需要高可扩展性的系统上工作时，经常会发现需要从头开始。不幸的是，并不是每个人都有远见了解他们需要的所有最佳实践和功能，而且这通常会导致数据库和平台设计不太理想。开发系统的过程可以深入了解真正需要什么以及该系统的最佳方法是什么。因此，过去有几次，我已经完成了一个产品并意识到需要一个新的代码库，所以我重新开始并迁移我认为适合新设计的任何遗留代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T00:07:07.083

我的情况有些不同，但可以是从桌面直接过渡到 saas 的一种模型。我的公司做媒体监控。最近，我们发现媒体不再是电视和广播，并开始从“网络”中捕获所有可能的流。为了向我们的客户提供解决方案——他们需要档案而不是记录者——我们只是在我们的服务器上为他们提供托管解决方案。

这使我们能够将所有内容集中在一个屋檐下，并直接在“云总部”中维护代码库。

还有更多内容，但我不会让读者感到厌烦，只是指出我们并没有强迫自己这样做——这真的是有机的，完全正常的。

我们解决方案的架构遵循一个大前提：从网络到存储再到 CPU，添加到系统中的每个硬件节点都将得到充分利用。每个软件都被编写为单独运行的“任务服务器”<->“代理”。因此，您始终可以购买更多机器并在那个时间点运行您需要的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T23:22:34.570

阅读以下内容： [http ://static.usenix.org/event/lisa07/tech/full_papers/hamilton/hamilton_html/index.html](http://static.usenix.org/event/lisa07/tech/full_papers/hamilton/hamilton_html/index.html)

这很好地概述了构建可扩展系统。从硬件/软件的角度和每个服务器的人类扩展工程师的角度来看。

[《精益创业》（Eric Ries）](http://amzn.to/MJM0oG)这本书（或 kindle 书）也有一些很好的指导。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T21:03:47.333

这些过程基本上是创建一个客户端/服务器接口（基于 Web 的 SAAS 案例中的 http），用于与您的数据交互......

如果您可以直接访问服务器中的数据，则可以将全部或大部分软件解决方案迁移到基于 Web 的平台，如 asp.net、php、ruby+rails、python+django 或其他。在此替代方案中，您可以通过多种方式传递数据：JSON、oData、文本、嵌入代码（对象或数组）等。有非常聪明的解决方案可以克服这些问题。通常涉及 AJAX 和无处不在的 XMLHTTPRequest。

如果您甚至没有尝试使用的软件的代码的极端情况，请想象一些只有可执行文件的 COBOL 或类似解决方案......即使在这种极端情况下，您也可以创建一个从您的程序的屏幕（自动它可以做到），将该数据传递到您的 Web 界面，该界面将在客户端端点显示它，从您的 Web 程序取回结果并将其注入可执行界面（再次自动或其他一些宏控制库）。

您不需要 MVC/MVVC/RAILS/DJANGO 或其他，但如果您在将操作与数据分离和控制 Web 程序流方面没有一定程度的经验，它们可以让您的生活更轻松。

# spring-mvc - Spring MVC 和 JFreeChart（在视图中显示图表）

> ID：11118038
> 
> 赞同：0
> 
> 时间：2012-06-20T10:55:16.790
> 
> 标签：spring-mvc, jfreechart

在我的 Spring web MVC 应用程序中，我计划在我的 jsp 视图上显示一些 JFree 图表，我不知道该怎么做，因为我的第一个想法对我不起作用，生成图像，然后检索它从文件夹中。

现在我想，控制器是否能够直接重新运行图像？假设这是我的服务接口：

```
public interface ReportingService {
    Image getChart() ;
} 
```

我可以做这样的事情吗？如何从我的 jsp 调用这个图像？

```
@Controller
public class ReportingController {
    @Autowired
    private ReportingService reportingService ;

    @RequestMapping("/reports")
    public Image handleReports(){
         return reportingService.getChart() ;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:20:06.600

你可以试试这个

```
@RequestMapping("/reports")    
public void handleReports(HttpServletResponse response){    
    response.setContentType("image/jpeg");    
    OutputStream out = response.getOutputStream();   
    writeChartAsJPEG(out , reportingService.getChart() , 400, 400);    
} 
```

现在，在你的 jsp 页面中形成`<img src="/reports" />`

它将动态创建和呈现图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:08:13.097

我在我的项目中广泛使用了 Jfreechart。我使用 CEWOLF 框架将它们放入 JSP 中。 [http://cewolf.sourceforge.net/new/index.html](http://cewolf.sourceforge.net/new/index.html)这是一个开源框架，它提供直接的 JSP 标签来将图表放入页面

如果你有很多图表可以使用，那么使用这个框架是值得的。
对于您的查询，据我所知，您所指的图像必须是 JFreechart 图像，而不是 Java 小程序图像。您必须使用字节流转换对其进行转换。

# php - 查询 MongoDB 集合中所有不同字段的列表

> ID：11118039
> 
> 赞同：1
> 
> 时间：2012-06-20T10:55:34.390
> 
> 标签：php, mongodb, nosql

我有一个存储所有表单数据的集合，每个表单具有不同的结构，但有些表单具有重叠的字段名称。我喜欢 mongo，因为它在这里证明了它的易用性，它允许我根据一些小的共同因素对完全不同的数据进行排序和汇总。

现在，对于 UI，我需要数据库中所有可能字段的列表，以便用户可以选择要查看的字段。除了索引，我似乎找不到任何 mongo 来返回字段列表。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:01:02.000

没有提供此信息的本机 MongoDB 功能。MongoDB 是完全无模式的，因此您必须执行完整的数据库遍历来编译所有唯一字段名称的列表。

唯一可能的解决方法是使用`{field: <field name>, value: <field value>}`对存储所有字段并在“字段”上运行不同的操作，或者在数据库中单独维护唯一字段名称的列表。两者都有明显的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T10:21:00.573

试试这个：

```
 db.collection_keys.distinct("_id") 
```

# xcode - 绑定到用户默认值中数组的@count

> ID：11118046
> 
> 赞同：3
> 
> 时间：2012-06-20T10:56:22.097
> 
> 标签：xcode, cocoa, cocoa-bindings

是否可以将控件绑定到存储在用户默认值中的数组的集合属性？

我试图（在 Xcode 4.3 的界面生成器中）将最大值绑定到数组计数，如下所示：

**最大值（共享用户默认值 Controller.values.MYArrayName.@count）**
**绑定到：**共享用户默认值控制器
**控制器键：**值
**模型键路径：** MYArrayName.@count

不幸的是，这根本没有效果（甚至没有任何错误）。

我可以将 Max Value 绑定到视图控制器中的 ivar，然后将其绑定到用户默认值。例如

```
NSUInteger maxVal
...

NSUserDefaults* stdUD=[NSUserDefaults standardUserDefaults];
[self bind:@"maxVal" toObject:stdUD withKeyPath:@"MYArrayName.@count" options:nil]; 
```

然后：

**最大值（文件的所有者.maxVal）**
**绑定到：**文件所有者
**控制器密钥：**
**模型密钥路径：** maxVal

但我本来希望不用额外的步骤来做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:35:36.907

您可以将 standardUserDefaults 与 Interface Builder 一起使用，有 2 个选项：

## 第一个选项

在 Interface Builder 中，将 User Defaults Controller 拖入 Objects。

然后，拖入一个 NSArrayController，并将其命名为“ArrayFromDefaultsController”（为了清楚起见）。确保它的模式是类，类名是 NSArray（或 NSMutableArray）。

在绑定选项卡的内容数组下：

**绑定**：用户默认控制器

**控制器键**：值

**模型密钥路径**：<#your Key#>

转到您的字段，并绑定它的最大值：

**绑定**：ArrayFromDefaultsController

**控制器键**：排列对象

**模型键路径**：@count

这只是创建了一个数组控制器，该控制器绑定了用户默认值中的数组，并且该字段绑定到该数组控制器的排列对象的计数值。

## 第二种选择

创建一个 NSValueTransformer 子类（例如 ArrayCountValueTransformer），并在类中放入：

```
+(Class)transformedValueClass {
    return [NSNumber class];
}

- (id)transformedValue:(id)value {
    if (value == nil) {
        return nil;
    } else {
        return [NSNumber numberWithInteger:[value count]];
    } 
} 
```

这将自动将您的用户默认数组的计数转换为模型键路径中可识别的值。

将用户默认控制器拖入对象列表中。然后，在要绑定的字段中（在最大值上）：

**绑定**：用户默认控制器

**控制器键**：值

**模型密钥路径**：<#your key#>（无@count）

**值转换**器：ArrayCountValueTransformer

# iphone - 在 iOS5 中播放 wav 文件

> ID：11118048
> 
> 赞同：0
> 
> 时间：2012-06-20T10:56:24.633
> 
> 标签：iphone, objective-c, cocoa-touch, avaudioplayer

我最近遇到了一些关于 wav 文件无法播放的问题，我使用的是我两年前编写的代码（针对 ARC 进行了调整），我只是好奇我这样做是否是最好的方式，因为从那时起 iOS 已经发生了很大变化?

```
@interface ViewController ()
@property (nonatomic, strong) AVAudioPlayer *buttonAudioPlayer;
@end

@implementation ViewController
@synthesize buttonAudioPlayer;

- (void)viewDidLoad {
    [super viewDidLoad];

    NSBundle *bundle = [NSBundle mainBundle];
    NSError *error = nil;

    NSURL *soundURL = [NSURL fileURLWithPath:[bundle pathForResource:@"buttonClick_002" ofType:@"wav"]];
    [self setButtonAudioPlayer:[[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error]];
    [buttonAudioPlayer prepareToPlay];
}

- (IBAction)buttonPressed {
    NSLog(@"Button Pressed ...");
    [[self buttonAudioPlayer] play];
} 
```

# sql - 要解决的 Unpivot 数据场景？

> ID：11118049
> 
> 赞同：1
> 
> 时间：2012-06-20T10:56:27.500
> 
> 标签：sql, sql-server, unpivot

所以我有一张这样的桌子

表格1

```
 Quote Ref | Product A |  Product B  | Product C | Product D
-----------+-----------+-------------+-----------+-----------     
    12     |   222333  |  4748847478 |     0     |     0 
```

我需要使用下表找出它`Business Group`属于哪个。

我对等于零的产品字段不感兴趣，因为报价中没有这些产品，因此没有要映射的业务组。对于此报价，产品 A 和 B 列具有非零值，可以映射到业务组。（ 关键 ）

表 2

```
Product Line |   Business Group 
Product A    |   Manfacturing 
Product B    | Tech Net 
```

因此，我查看`UNPIVOT`了表 1 中的数据。

```
SELECT [QUOTE Ref], [Product Line], [Value]

FROM 
   (SELECT [QUOTE Ref], [Product A], [Product B], [Product C], [Product D]

FROM [Table1]) p
UNPIVOT
   ([Value] FOR [Product Line] 
   IN ([Product A], [Product B], [Product C], [Product D] )
)AS unpvt; 
```

表 1 的数据现在像这样

```
 Quote Ref | Product Line |   Value
-----------+--------------+------------
    12     |  Product A   |   222333
    12     |  Product B   | 4748847478
    12     |  Product C   |     0 
    12     |  Product D   |     0 
```

问题是 40 k 行现在变成了 470 万行。

现在我知道我不需要未透视表中 Product Line 的值等于零的行。如何在 unpivot 查询中删除这些条目，或者在启动 UNPIVOT 之前我可以对基表做些什么？我的数据库足够大，可以处理数据库中大约 20 个类似的表和 60 额外的百万行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:08:00.727

您应该添加删除`value = 0`最终结果集中的条目的条件。您无法在生成数据的 SELECT 查询中执行此操作，因此请将您当前的结果集作为子查询括起来，如下所示：

```
;WITH Data AS
(
    SELECT [QUOTE Ref], [Product Line], [Value]
    FROM 
    (
        SELECT [QUOTE Ref], [Product A], [Product B], [Product C], [Product D]
        FROM [Table1]
    ) p
    UNPIVOT
       ([Value] FOR [Product Line] 
       IN ([Product A], [Product B], [Product C], [Product D] )
    )AS unpvt
 )
SELECT * 
FROM DATA 
WHERE Value <> 0; 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/73470)

# php - PHP Oracle 10g 获取速度非常慢

> ID：11118050
> 
> 赞同：3
> 
> 时间：2012-06-20T10:56:29.713
> 
> 标签：php, performance, oracle, oracle10g, oci8

我不习惯使用 Oracle，所以我可能不会很好地提出我的问题。

`SELECT`我从具有 PHP 5.3（PECL Oci8 1.4.6，客户端 11.2.0.3.0）的 Linux Apache 服务器到 Oracle 服务器（10g Enterprise Edition Release 10.2.0.1.0）执行非常简单的查询，我不是管理员的。

`oci_parse`and`oci_execute`花费不到一毫秒，但是我在这之后做的s`oci_fetch_array`真的很慢（有时超过一秒）。

起初，我尝试更改`SELECT *`by `SELECT [all the columns I need]`，但它仍然很慢。

我应该看什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:51:30.860

尝试这个：

```
oci_set_prefetch($statement_id, 1000); 
```

...或增加您`oci8.default_prefetch`在 php.ini 中的价值。

# qt - 什么是 arm-linux-gcc 以及如何在 ubuntu 中安装它

> ID：11118051
> 
> 赞同：7
> 
> 时间：2012-06-20T10:56:35.717
> 
> 标签：qt, compilation, embedded, arm

在编译 qt 时，我发现有一个名为 arm-linux-gcc 的 qws 目标。我环顾四周，但无法弄清楚如何以及在哪里找到它。我尝试安装并且 apt-cache 给了我以下输出。

```
apt-cache search armel
asterisk-prompt-fr-armelle - French voice prompts for Asterisk by Armelle Desjardins
rootstock - shellscript to create armel rootfs tarballs using a VM
rootstock-gtk - graphical frontend to the rootstock rootfs builder tool
icedtea-6-jre-cacao - Alternative JVM for OpenJDK, using Cacao
installation-guide-armel - Ubuntu installation guide for armel
jasper - Configure a preinstalled ext2/3 system image
cpp-4.3-arm-linux-gnueabi - The GNU C preprocessor
cpp-4.4-arm-linux-gnueabi - The GNU C preprocessor
g++-4.3-arm-linux-gnueabi - The GNU C++ compiler
g++-4.4-arm-linux-gnueabi - The GNU C++ compiler
gcc-4.3-arm-linux-gnueabi - The GNU C compiler
gcc-4.4-arm-linux-gnueabi - The GNU C compiler
gcc-4.4-base-armel-cross - The GNU Compiler Collection (base package) (for cross-   compiling)
libc-bin-armel-cross - Embedded GNU C Library: Binaries (for cross-compiling)
libc-dev-bin-armel-cross - Embedded GNU C Library: Development binaries (for cross- compiling)
libc6-armel-cross - Embedded GNU C Library: Shared libraries (for cross-compiling)
libc6-dev-armel-cross - Embedded GNU C Library: Development Libraries and Header Files (for cross-compiling)
libgcc1-armel-cross - GCC support library (for cross-compiling)
libgcc1-dbg-armel-cross - GCC support library (debug symbols)
libgfortran3-armel-cross - Runtime library for GNU Fortran applications
libgfortran3-dbg-armel-cross - Runtime library for GNU Fortran applications (debug  symbols)
libgmp3-dev-armel-cross - Multiprecision arithmetic library developers tools (for cross-compiling)
libgmp3c2-armel-cross - Multiprecision arithmetic library (for cross-compiling)
libgmpxx4ldbl-armel-cross - Multiprecision arithmetic library (C++ bindings) (for cross-compiling)
libgomp1-armel-cross - GCC OpenMP (GOMP) support library
libgomp1-dbg-armel-cross - GCC OpenMP (GOMP) support library (debug symbols)
libmpfr-dev-armel-cross - multiple precision floating-point computation developers   tools (for cross-compiling)
libmpfr4-armel-cross - multiple precision floating-point computation (for cross-compiling)
libmudflap0-4.4-dev-armel-cross - GCC mudflap support libraries (development files)
libmudflap0-armel-cross - GCC mudflap shared support libraries
libmudflap0-dbg-armel-cross - GCC mudflap shared support libraries (debug symbols)
libobjc2-dbg-armel-cross - Runtime library for GNU Objective-C applications (debug symbols)
libstdc++6-4.3-dbg-armel-cross - The GNU Standard C++ Library v3 (debugging files)
libstdc++6-4.3-dev-armel-cross - The GNU Standard C++ Library v3 (development files)
libstdc++6-4.3-pic-armel-cross - The GNU Standard C++ Library v3 (shared library subset kit)
libstdc++6-4.4-dbg-armel-cross - The GNU Standard C++ Library v3 (debugging files)
libstdc++6-4.4-dev-armel-cross - The GNU Standard C++ Library v3 (development files)
libstdc++6-4.4-pic-armel-cross - The GNU Standard C++ Library v3 (shared library subset kit)
libstdc++6-armel-cross - The GNU Standard C++ Library v3 (for cross-compiling)
linux-libc-dev-armel-cross - Linux support headers for userspace development (for cross-compiling)
tzdata-armel-cross - time zone and daylight-saving time data (for cross-compiling)
zlib1g-armel-cross - compression library - runtime (for cross-compiling)
zlib1g-dev-armel-cross - compression library - development (for cross-compiling)
cpp-4.1-arm-linux-gnueabi - The GNU C preprocessor
cpp-4.2-arm-linux-gnueabi - The GNU C preprocessor
g++-4.1-arm-linux-gnueabi - The GNU C++ compiler
g++-4.2-arm-linux-gnueabi - The GNU C++ compiler
gcc-4.1-arm-linux-gnueabi - The GNU C compiler
gcc-4.2-arm-linux-gnueabi - The GNU C compiler
libmpfr1ldbl-armel-cross - multiple precision floating-point computation (for cross- compiling)
libobjc2-armel-cross - Runtime library for GNU Objective-C applications
libstdc++6-4.1-dbg-armel-cross - The GNU Standard C++ Library v3 (debugging files)
libstdc++6-4.1-dev-armel-cross - The GNU Standard C++ Library v3 (development files)
libstdc++6-4.1-pic-armel-cross - The GNU Standard C++ Library v3 (shared library subset kit)
libstdc++6-4.2-dbg-armel-cross - The GNU Standard C++ Library v3 (debugging files)
libstdc++6-4.2-dev-armel-cross - The GNU Standard C++ Library v3 (development files)
libstdc++6-4.2-pic-armel-cross - The GNU Standard C++ Library v3 (shared library subset kit) 
```

我认为这有我系统的 arm 编译器。有人可以帮助弄清楚安装“arm-linux-gcc”吗

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T16:24:57.723

您缺少带有 arm 目标集的 gcc 编译器。这已经在 ubuntu 存档中预打包了很长一段时间，因此您不需要从源代码构建它。

`sudo apt-get install gcc-arm-linux-gnueabi`安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-28T06:01:53.903

在尝试交叉编译时偶然发现了这一点。安装 gcc-arm-linux-gnueabi 后，make 根本认不出来。所以你可能还需要给出**另一个**提示。像这样称呼它

```
make CROSS_COMPILE=gcc-arm-linux-gnueabi- 
```

对我有用。

# windows-phone-7 - 在 Windows Phone 中从 CSV 文件导入/导出数据库（表格）内容

> ID：11118053
> 
> 赞同：1
> 
> 时间：2012-06-20T10:56:41.023
> 
> 标签：windows-phone-7, csv

我有一个带有不同表（客户、供应商等）的 SQL CE 数据库。我想将文本数据导出/导入到/从这些表到/从 CSV 文件。

我怎样才能做到这一点？

# constructor - 没有实现良好风格的构造函数声明以避免实例化？

> ID：11118054
> 
> 赞同：1
> 
> 时间：2012-06-20T10:56:50.320
> 
> 标签：constructor, implementation, instantiation

工作中的一所大学创建了一个只有静态方法的类。因为他想避免实例化，所以他添加了一个（私有）构造函数。到目前为止很好。但是构造函数只是声明的，没有实现。因此，您在使用一次时会得到一个“未定义的引用”。

恕我直言，使构造函数私有化就足够了-没有实现的声明很丑陋。您对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:09:16.813

我看到了你的担心。

事实上，将复制构造函数设为私有然后不实现它是一种常见的做法，在某些情况下肯定是必要的。这导致了一个著名的 C++ 习语的定义，即[不可复制的 Mixin](http://en.wikibooks.org/wiki/More_C++_Idioms/Non-copyable_Mixin)，以赋予它更多的“可见性”。但即使不使用不可复制的 mixin 并且在本地应用解决方案，它也是 IMO 完全可以接受的（因为它是一个已知的习语）。

在您的具体情况下，因为据我了解，我们不是在谈论复制构造函数，而是任何构造函数（该类只是一些静态方法的容器，您不希望它被初始化），我认为使用命名空间并声明您的其中的功能将是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:58:48.750

实际上实例化这样的对象不会造成任何伤害——程序行为不会改变。如果您仍然想禁止实例化，那么是的，您最好不要实现构造函数。如果你有一个空的构造函数，它可能会从类的朋友和类的成员函数中调用。有关详细信息，请参阅[此问题](https://stackoverflow.com/q/5702100/57428)。

# android - Android - 将图像上传到服务器

> ID：11118055
> 
> 赞同：0
> 
> 时间：2012-06-20T10:56:54.020
> 
> 标签：android, image, upload

我知道有很多东西要找，但我似乎仍然无法解决我的问题。这是我必须从 imageview 上传图像的代码。imageview 有 mImageUri，这是来自我在这个应用程序中使用的 Aviary 编辑器。

```
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

@SuppressWarnings("deprecation")
private void doFileUpload(){
    String selectedPath = "";
    selectedPath = getPath(mImageUri);
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null;
    String lineEnd = "rn";
    String twoHyphens = "--";
    String boundary =  "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;
    String responseFromServer = "";
    String urlString = "http://cliniclowns.boxhost.me/upload.php";
    try
    {
     //------------------ CLIENT REQUEST
    FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
     // open a URL connection to the Servlet
     URL url = new URL(urlString);
     // Open a HTTP connection to the URL
     conn = (HttpURLConnection) url.openConnection();
     // Allow Inputs
     conn.setDoInput(true);
     // Allow Outputs
     conn.setDoOutput(true);
     // Don't use a cached copy.
     conn.setUseCaches(false);
     // Use a post method.
     conn.setRequestMethod("POST");
     conn.setRequestProperty("Connection", "Keep-Alive");
     conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
     dos = new DataOutputStream( conn.getOutputStream() );
     dos.writeBytes(twoHyphens + boundary + lineEnd);
     dos.writeBytes("Content-Disposition: form-data; name:\"uploadedfile\";filename=\"" + selectedPath + "\"" + lineEnd);
     dos.writeBytes(lineEnd);
     // create a buffer of maximum size
     bytesAvailable = fileInputStream.available();
     bufferSize = Math.min(bytesAvailable, maxBufferSize);
     buffer = new byte[bufferSize];
     // read file and write it into form...
     bytesRead = fileInputStream.read(buffer, 0, bufferSize);
     while (bytesRead > 0)
     {
      dos.write(buffer, 0, bufferSize);
      bytesAvailable = fileInputStream.available();
      bufferSize = Math.min(bytesAvailable, maxBufferSize);
      bytesRead = fileInputStream.read(buffer, 0, bufferSize);
     }
     // send multipart form data necesssary after file data...
     dos.writeBytes(lineEnd);
     dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
     // close streams
     Log.e("Debug","File is written");
     fileInputStream.close();
     dos.flush();
     dos.close();
    }
    catch (MalformedURLException ex)
    {
         Log.e("Debug", "error: " + ex.getMessage(), ex);
    }
    catch (IOException ioe)
    {
         Log.e("Debug", "error: " + ioe.getMessage(), ioe);
    }
    //------------------ read the SERVER RESPONSE
    try {
          inStream = new DataInputStream ( conn.getInputStream() );
          String str;

          while (( str = inStream.readLine()) != null)
          {
               Log.e("Debug","Server Response "+str);
          }
          inStream.close();

    }
    catch (IOException ioex){
         Log.e("Debug", "error: " + ioex.getMessage(), ioex);
    }
  } 
```

有时我得到一个 NullPointerException 有时我的应用程序只是冻结和崩溃。任何有解决方案？

编辑

日志输出：

```
06-20 13:22:52.724: I/feather-launcher(21073): onCreate
06-20 13:22:52.785: D/dalvikvm(21073): GC_CONCURRENT freed 26K, 46% free 2938K/5379K,     external 5132K/5599K, paused 2ms+2ms
06-20 13:22:52.804: D/feather-launcher(21073): Pictures folder: /mnt/sdcard/Pictures
06-20 13:22:52.804: I/feather-launcher(21073): onResume
06-20 13:22:52.934: I/feather-launcher(21073): onCreate
06-20 13:22:52.954: D/feather-launcher(21073): Pictures folder: /mnt/sdcard/Pictures
06-20 13:22:52.954: I/feather-launcher(21073): onResume
06-20 13:22:52.954: D/PhoneWindow(21073): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@2b0018e0 has no id.
06-20 13:22:53.395: I/feather-launcher(21073): onResume
06-20 13:22:56.465: D/feather-launcher(21073): pickRandomImage. total images: 265, position: 60
06-20 13:22:56.465: D/feather-launcher(21073): /mnt/sdcard/DCIM/100ANDRO/DSC_0054.JPG
06-20 13:22:56.465: D/feather-launcher(21073): image uri: /mnt/sdcard/DCIM/100ANDRO/DSC_0054.JPG
06-20 13:22:56.555: D/feather-launcher(21073): width: 400
06-20 13:22:56.669: D/dalvikvm(21073): GC_CONCURRENT freed 147K, 46% free 3087K/5639K, external 5936K/7413K, paused 2ms+2ms
06-20 13:22:56.804: D/feather-launcher(21073): image size: 320x180
06-20 13:22:58.394: D/AndroidRuntime(21073): Shutting down VM
06-20 13:22:58.394: W/dalvikvm(21073): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
06-20 13:22:58.405: E/AndroidRuntime(21073): FATAL EXCEPTION: main
06-20 13:22:58.405: E/AndroidRuntime(21073): java.lang.NullPointerException
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.project4.LaatsteTabActivity.getPath(LaatsteTabActivity.java:254)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.project4.LaatsteTabActivity.doFileUpload(LaatsteTabActivity.java:262)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.project4.LaatsteTabActivity.access$5(LaatsteTabActivity.java:260)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.project4.LaatsteTabActivity$4.onClick(LaatsteTabActivity.java:128)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.view.View.performClick(View.java:2552)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.view.View$PerformClick.run(View.java:9229)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.os.Handler.handleCallback(Handler.java:587)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.os.Looper.loop(Looper.java:130)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at android.app.ActivityThread.main(ActivityThread.java:3701)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at java.lang.reflect.Method.invokeNative(Native Method)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at java.lang.reflect.Method.invoke(Method.java:507)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
06-20 13:22:58.405: E/AndroidRuntime(21073):    at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 同时从 LINQ 和 SSMS 打开 SQL Server 数据库

> ID：11118059
> 
> 赞同：0
> 
> 时间：2012-06-20T10:57:04.567
> 
> 标签：c#, .net, visual-studio-2010, sql-server-2008, linq-to-sql

我的本地机器上有一个数据库。我有一个 C# 应用程序，它使用 LINQ to SQL 将记录插入到这个数据库中。我使用 SSMS（SQL Server Management Studio）打开了数据库（并在查询窗口中选择了记录）。现在，如果我尝试运行 C# 应用程序，我会收到以下错误：

```
“Cannot open user default database. Login failed. Login failed for user DFGV\G16570'.” 
```

当我重新启动系统时，此错误消失。

注意：我使用的是 Integrated Security=True

注意：SQL Server 使用“LocalSystem”帐户运行

LINQ 中的连接字符串：

```
 Data Source=.; AttachDbFilename=C:\DevTEST\Databases\LibraryReservationSystem.mdf;
 Integrated Security=True; Connect Timeout=30;User Instance=True 
```

注意：“用户实例”关键字

以下是我的 LINQ 查询：

```
public virtual void InsertOnSubmit(T entity)
    {
        GetTable().InsertOnSubmit(entity);
        Context.SubmitChanges();
    } 
```

当我通过 SSMS 连接到数据库时，我应该怎么做才能使 LINQ 工作？

**编辑**

根据响应，我更改了代码，如下所示。

```
 string connectionstring = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";

        using (var context = new RepositoryLayer.LibraryManagementClassesDataContext(connectionstring)) 
        {

            RepositoryLayer.Repository<RepositoryLayer.Account> selectedRepository = new RepositoryLayer.Repository<RepositoryLayer.Account>();
            selectedRepository.Context = context;
            AccountBusiness accountBl = new AccountBusiness(selectedRepository);

            //List<RepositoryLayer.Account> accountList = accountBl.GetAllAccounts();
            accountBl.InsertAccounts();
        } 
```

注意：确保“用户实例”关键字未设置为 TRUE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:14:11.367

您正在使用[AttachDbFilename](http://msdn.microsoft.com/en-us/library/ms247257.aspx)选项打开数据库，这意味着数据库作为用户实例打开，只能由打开它的进程标识访问。

如果要从多个进程访问数据库，请将其附加到适当的 SQL Server 实例，然后通过 InitialCatalog 属性中的数据库名称连接到它。不要使用 AttachDbFileName 和 UserInstance。

这在[将 SQL Server Express 与 ASP.NET 结合使用中进行了描述](http://msdn.microsoft.com/en-us/library/ms247257.aspx)

# geolocation - 打开 StreetMap 反向地理编码

> ID：11118061
> 
> 赞同：9
> 
> 时间：2012-06-20T10:57:06.140
> 
> 标签：geolocation, openstreetmap

有谁知道任何允许对 Open StreetMap 数据进行反向地理编码查找的开源项目？

我不想使用现有的托管网络服务，例如[Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim)，因为我的数据集很大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:10:17.573

您可以自己安装[Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)，它可以很好地进行[反向地理编码。](http://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding_.2F_Address_lookup)还有一个由[MapQuest](http://open.mapquestapi.com/nominatim/)托管的 Nomiatim 实例，其使用政策不那么严格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:18:41.973

还有使用[openstreetmap](http://www.gisgraphy.com)数据和地名的Gisgraphy。它有 5 个网络服务（地理编码、反向地理编码、全文搜索、附近查找、地址解析器），所有这些都可以离线完成。[它是免费的、开源的，并且在services.gisgraphy.com](http://services.gisgraphy.com)上提供了演示

# ruby-on-rails-3 - Rails 3：确保从视图中调用控制器方法

> ID：11118063
> 
> 赞同：1
> 
> 时间：2012-06-20T10:57:11.653
> 
> 标签：ruby-on-rails-3, model-view-controller

导轨 3.2.6。我有以下控制器视图组合（简化，实际上分配是一些模型调用的结果）：

`ApplicationController`：

```
def set_menu_vars
  @var1 = 1
  @var2 = 2
end 
```

`SomeController < ApplicationController`：

```
def some_action
  set_menu_vars
end 
```

相应的（部分，共享）视图（haml）：

```
- if @var1 > 0
  %p= @var1 
```

到目前为止一切顺利，直到我忘记了要调用的某些操作`set_menu_vars`-现在我得到了一个例外`undefined method '>' for nil:NilClass`。这是完全可以理解的，我想确保如果使用该局部视图，`set_menu_vars`它会被自动调用。

所以我尝试将视图修改为

```
- @controller.set_menu_vars
... 
```

（谷歌搜索）但得到类似的异常说`@controller`是`nil`. 好吧，这些答案似乎适用于 Rails 2，看到 . 我试图改变为

```
- controller.set_menu_vars
... 
```

现在`set_menu_vars`调用成功，但`@var1`仍在`nil`视图中。

所以问题是：完成任务的正确方法是什么？在控制器中为这些变量中的每一个提供一个方法（寻找实例变量以最多调用一次模型）？还是其他方式？

*UPD*：有问题的部分视图与控制器及其操作没有直接关系。这在逻辑上是布局的一部分（仪表板显示可能需要注意的任务组的链接）。因此，在大约一半的控制器操作中忘记调用`set_menu_vars`多个分支是很自然的。`if`另一方面，`set_menu_vars`对数据库进行一些不那么短的查询，因此我希望仅在需要时才调用它（也就是说，如果确实呈现了相关视图）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:02:40.233

它不是“铁路方式”。

控制器从模型中调用方法。

模型（文章.rb）：

```
def do_something
 code
end 
```

控制器（articles_controller.rb）：

```
def index
 @article = Article.do_something
end 
```

查看（文章/index.html.erb）

```
<%= @article %> 
```

对不起，如果我误解了你的问题。

# iphone - 用于应用内购买的恢复按钮恢复所有交易

> ID：11118064
> 
> 赞同：1
> 
> 时间：2012-06-20T10:57:11.957
> 
> 标签：iphone, objective-c, xcode, in-app-purchase

我将我的游戏上传到 iTunes 商店。但苹果拒绝它，因为没有恢复按钮。所以我添加了恢复按钮来恢复交易。我的游戏有 4 个应用内购买。我购买了 2 个应用内购买并从设备上卸载了我的游戏。之后我再次安装游戏并按下恢复按钮。但它恢复了所有四个交易。我做错了什么？我在单击的恢复按钮中添加了以下代码

```
-(void)restore_clicked
{
   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:15:40.660

恢复功能可以恢复您的应用程序中曾经通过您的 Apple 帐户进行的所有交易。如果您之前在测试应用时购买了另外两次，那么它们都将被恢复，而不仅仅是您上次安装时购买的最后两次。

这样做的原因是，如果用户决定购买新 iPhone，或者在他的 iPad 和 iPhone 上运行您的游戏，他会希望在他的所有设备上访问他的应用内购买。使用相同 Apple 帐户登录的用户可以通过这种方式恢复之前购买的应用内内容。

顺便说一句，我认为您可以自动执行此操作，而无需按钮？即应用程序启动时自动恢复以前的购买。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:54:23.900

不要在应用启动时自动恢复应用内购买，因为它会要求他们登录 iTunes 商店。如果他们每次都需要这样做，那将变得非常烦人。

# wpf - RibbonApplicationMenuItem SubMenu 的第一项默认未选中

> ID：11118065
> 
> 赞同：0
> 
> 时间：2012-06-20T10:57:12.440
> 
> 标签：wpf, wpf-controls, menuitem, ribbon-control

我在我的应用程序中使用 Microsoft 的功能区控件。

我有一个带有相同类型子项的 RibbonApplicationMenuItem。功能区菜单的默认行为是，每当使用键盘打开子菜单时，默认情况下会选择（并突出显示）第一项。

我有两个带有子项的菜单项，如下面的代码所示。第一个菜单正确打开并突出显示第一项。但是第二个菜单在打开时不会突出显示第一个项目。唯一的区别是在第二个菜单中，我的第一项被禁用（IsEnabled=false）。所以我希望下一项（第二项）应该突出显示。但是不是:(。有人知道如何解决这个问题吗？

此外，最糟糕的是，我无法像使用第一个菜单那样使用向上/向下箭头键导航第二个菜单的子菜单。这很奇怪，在我看来就像 MS 实现中的一个错误。有没有人有任何想法！？

（这里的功能区是 Microsoft.Windows.Controls.Ribbon）

```
 <ribbon:RibbonApplicationMenuItem Header="Options Group 1">
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption1}" Header="Option 1" />
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption2}" Header="Option 2"/>
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption3}" Header="Option 3"/>
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption4}" Header="Option 4"/>
       </ribbon:RibbonApplicationMenuItem>

       <ribbon:RibbonApplicationMenuItem Header="Options Group 2">
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption5}" Header="Option 5" IsEnabled="False"/>
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption6}" Header="Option 6"/>
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption7}" Header="Option 7"/>
                        <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption8}" Header="Option 8"/>
       </ribbon:RibbonApplicationMenuItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:31:15.943

似乎我能做的最好的事情是将禁用的菜单项移动到第一个启用的菜单项下方。像这样：

```
 <ribbon:RibbonApplicationMenuItem Header="Options Group 2">
                    <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption6}" Header="Option 6"/>
                    <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption5}" Header="Option 5" IsEnabled="False"/>
                    <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption7}" Header="Option 7"/>
                    <ribbon:RibbonApplicationMenuItem Command="{x:Static viewmodel:commands.ExecuteOption8}" Header="Option 8"/>
   </ribbon:RibbonApplicationMenuItem> 
```

它以这种方式工作，尽管我知道这不是最好的方法。我认为这个问题没有其他解决方案。

# javascript - 如何在javascript中加载本地网页

> ID：11118066
> 
> 赞同：3
> 
> 时间：2012-06-20T10:57:13.177
> 
> 标签：javascript

我正在尝试加载执行的本地网页：

```
var html = document.open('google.html');
document.documentElement.innerHTML = html; 
```

它加载页面，但格式不正确，图像不会显示。我怎样才能加载全部内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:00:15.283

这很可能是因为允许外部资源（图像、样式表、js 文件等）具有相对 url。任何相对 url 都需要完全限定页面才能正确加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:02:45.393

If you want to replace the content of the page by another one, simply do

```
document.location.href="http://google.com"; 
```

If you want to open a local page named `google.html` do

```
document.location.href=document.location.href.splitOnLast('/')[0]+"/google.html"; 
```

This will ensure that linked resources can be loaded as the relative paths will be accorded to the location of the page. Don't change the content yourself.

# algorithm - Jqplot - 用于计算刻度的算法

> ID：11118069
> 
> 赞同：1
> 
> 时间：2012-06-20T10:57:21.303
> 
> 标签：algorithm, jqplot

我可以知道 jqplot 使用什么算法来计算刻度值吗？似乎只使用最大和最小数据值作为输入来计算刻度？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:19:57.897

如[文档中所述](http://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.Properties)，您可以通过多种方式自定义轴。

一个。要更改轴范围和填充，您可以使用以下选项：

*   `autoscale`：将此设置为`false`关闭自动缩放
*   `min`/ `max`：设置最小/最大轴值
*   `pad`// : 定义围绕最小值`padMin`/`padMax`最大值的填充
*   `numberTicks`: 要显示的刻度数
*   `tickInterval`: 两个刻度之间的间隔（与 互斥`numberTicks`）

湾。或者，您可以根据需要指定自定义的精确刻度位置：

*   `ticks``[value, label]`: 值数组或对数组

# java - 使用 Eclipse / Maven 构建 Hadoop - 缺少工件 jdk.tools:jdk.tools:jar:1.6

> ID：11118070
> 
> 赞同：75
> 
> 时间：2012-06-20T10:57:31.227
> 
> 标签：java, maven, maven-2, hadoop, cloudera

我正在尝试在 eclipse 3.81 的 m2e 插件的 maven 项目中[从 cdh4 maven repo导入 cloudera 的](https://ccp.cloudera.com/display/CDH4DOC/Using+the+CDH4+Maven+Repository)**org.apache.hadoop:hadoop-client:2.0.0-cdh4.0.0** ，在 win7 上使用 oracle 的 jdk 1.7.0_05

```
<dependency>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-client</artifactId>
    <version>2.0.0-cdh4.0.0</version>
</dependency> 
```

但是，我收到以下错误：

```
The container 'Maven Dependencies' references non existing library 'C:\Users\MyUserId\.m2\repository\jdk\tools\jdk.tools\1.6\jdk.tools-1.6.jar' 
```

更具体地说，maven 指出缺少以下工件

```
Missing artifact jdk.tools:jdk.tools:jar:1.6 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2014-04-17T09:35:02.193

问题出在 Eclipse Maven 支持中，相关问题在[这里](https://stackoverflow.com/questions/13288735/maven-not-picking-java-home-correctly/23129154)。

在 Eclipse 下，该`java.home`变量设置为用于启动 Eclipse 的 JRE，而不是构建 JRE。来自的默认系统 JRE`C:\Program Files`不包括 JDK，因此`tools.jar`找不到。

要解决此问题，您需要使用 JDK 中的 JRE 启动 Eclipse，方法是在`eclipse.ini`（*之前* `-vmargs`！）中添加如下内容：

```
-vm
C:/<your_path_to_jdk170>/jre/bin/server/jvm.dll 
```

然后刷新 Maven 依赖项（Alt-F5）（仅刷新项目是不够的）。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-06-20T11:01:33.267

`jdk.tools:jdk.tools`（或`com.sun:tools`，或任何您命名的名称）是随 JDK 一起分发的 JAR 文件。通常你将它添加到这样的 maven 项目中：

```
<dependency>
    <groupId>jdk.tools</groupId>
    <artifactId>jdk.tools</artifactId>
    <scope>system</scope>
    <systemPath>${java.home}/../lib/tools.jar</systemPath>
</dependency> 
```

请参阅[Maven 常见问题解答添加依赖项`tools.jar`](http://maven.apache.org/general.html#tools-jar-dependency)

或者，您可以使用以下命令手动安装`tools.jar`在本地存储库中：

```
mvn install:install-file -DgroupId=jdk.tools -DartifactId=jdk.tools -Dpackaging=jar -Dversion=1.6 -Dfile=tools.jar -DgeneratePom=true 
```

然后像 Cloudera 一样引用它，使用：

```
<dependency>
    <groupId>jdk.tools</groupId>
    <artifactId>jdk.tools</artifactId>
    <version>1.6</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-06-20T11:14:07.117

感谢npe，添加

```
<dependency>
    <groupId>jdk.tools</groupId>
    <artifactId>jdk.tools</artifactId>
    <version>1.7.0_05</version>
    <scope>system</scope>
    <systemPath>${JAVA_HOME}/lib/tools.jar</systemPath>
</dependency> 
```

pom.xml 做到了。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-09-09T18:32:20.937

如果您可以在没有 tools.jar 的情况下生存并且它仅作为链式依赖项包含，您可以将其从有问题的项目中排除：

```
<dependency>
    <groupId>org.apache.ambari</groupId>
    <artifactId>ambari-metrics-common</artifactId>
    <version>2.1.0.0</version>
    <exclusions>
        <exclusion>
            <artifactId>jdk.tools</artifactId>
            <groupId>jdk.tools</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-22T17:37:14.547

这对我有用：

```
 <dependency>
        <groupId>jdk.tools</groupId>
        <artifactId>jdk.tools</artifactId>
        <version>1.7.0_05</version>
        <scope>system</scope>
        <systemPath>${JAVA_HOME}/lib/tools.jar</systemPath>
    </dependency> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-26T22:44:00.880

我在我的 MR 项目中使用下面。

```
<exclusions>
                <exclusion>
                    <artifactId>jdk.tools</artifactId>
                    <groupId>jdk.tools</groupId>
                </exclusion>
</exclusions> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-12T15:18:07.137

也许系统安装 jdk 包，但也许是一些开发工具或插件。

我在 opensuse env 下发现了这个问题。我安装了 java-1_6_0-openjdk-devel

问题消失了。。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-21T03:18:07.567

我也遇到了这个问题，因为我只安装了**JRE**而不是**JDK**。**因此，我无法为jdk.tools**添加依赖项，因为我的*${JAVA_HOME}/lib/*目录中不存在*tools.jar 。*

 *现在我下载并安装了[JDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html) 来修复它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-23T08:38:48.747

在 Eclipse 中更改已安装的 JRE 集。Window > Preferences > Java > Installed JREs，将 jre 的位置更改为 %JAVA_HOME%/jre，但不是 C:\Program Files\Java\jre7

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-09T07:49:18.747

如果 jdk.tools 存在于 .m2 存储库中。你仍然得到如下错误：

缺少工件：jdk.tools.....c:.../jre/..

在buildpath->configure build path-->Libraries。只需将JRE系统库从JRE改为JDK即可。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-18T10:21:38.850

尝试 ：

**mvn install:install-file -DgroupId=jdk.tools -DartifactId=jdk.tools -Dversion=1.6 -Dpackaging=jar -Dfile="C:\Program Files\Java\jdk\lib\tools.jar"**

还检查： [http ://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2015-07-20T12:34:46.893

好的，如果您使用的是 Windows 操作系统

1.  转到 C:\Program Files\Java\jdk1.8.0_40\lib （你的 jdk 版本可能不同）

2.  确保 tools.jar 存在（否则下载它）

3.  复制此路径“C:\Program Files\Java\jdk1.8.0_40”

4.  在 pom.xml 中

    ```
    <dependency>
    <groupId>jdk.tools</groupId>
    <artifactId>jdk.tools</artifactId>
    <version>1.8.0_40</version>
    <scope>system</scope>
    <systemPath>C:/Program Files/Java/jdk1.8.0_40/lib/tools.jar</systemPath>
    </dependency> 
    ```

5.  重建并运行！答对了！*

# javascript - 为什么我无法检测到 CRM2011 中不存在 Xrm 对象/函数

> ID：11118074
> 
> 赞同：1
> 
> 时间：2012-06-20T10:57:43.657
> 
> 标签：javascript, dynamics-crm-2011

我有一些 javascript，我想在 MS Dynamics CRM 2011 中附加到表单和 HTML Web 资源。它需要 Xrm 对象，它可以在表单上下文中直接使用，也可以通过 window.top.Xrm 在HTML 网络资源。

我想我会写一个快速函数来检查是否定义了 Xrm，让我可以确定我是在表单中还是在 HTML Web 资源中运行。作为一个起点，因为我真的是 javascript 的新手，所以我编写了这段代码来检查 Xrm 是否存在并显示一条消息。

```
alert('Running'); 
if(Xrm) { alert('Yup'); } else { alert('Nope'); }
alert('Done'); 
```

但是，这不起作用，我不明白为什么。当它在表单事件（例如表单加载）中运行时，Xrm 存在并且我看到警报“正在运行”、“是的”和“完成”。但是，当在 Xrm 不直接可用的 HTML Web 资源中运行时，我看到“正在运行”警报，但 javascript 只是在下一行停止。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:04:27.697

当`Xrm`未定义时，您的代码将引发异常`ReferenceError: Xrm is not defined`并停止执行其余的 Javascript。要检查变量是否存在，您应该使用：

```
if (typeof Xrm !== 'undefined') { alert('Yup'); } else { alert('Nope'); } 
```

# selenium - 当浏览器忙于执行一些长时间运行的 JavaScript 时，WebDriver API 的阻塞行为

> ID：11118077
> 
> 赞同：5
> 
> 时间：2012-06-20T10:58:03.753
> 
> 标签：selenium, automation, webdriver, selenium-webdriver, browser-automation

我在文档的某处读到 WebDriver API 是非阻塞的（除了一些像 driver.get 的）。因此，执行 WebElement click() 或 isDisplayed() 通常应该是异步的（当然，假设启用了本机事件）。

我有一个简单的 HTML 页面，它执行一个长操作（基本上是一个长循环）。当 JS 执行时，浏览器没有响应，这是预期的。但我也注意到，只要浏览器忙于执行脚本，WebDriver API 就像 click()/isDisplayed()/executeScript() 块一样。

由于 WebDriver 为点击发出原生事件，而不是合成的 JS 事件，我很困惑为什么 API 会阻塞。虽然目前这种行为并没有困扰我，但我想知道在对无响应的页面运行测试时是否可以依赖这种阻塞性质？我确实在我的测试中使用了条件等待，但想了解幕后发生了什么以及这是否是特定于浏览器/操作系统的？

我在 Windows 7 上使用 InternetExplorerDriver (IE9) 和 ChromeDriver (Chrome 19) 在 Selenium 2.20.0 中看到了这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T16:10:18.517

实际上，对于 Selenium 库的许多用户来说，使用阻塞与非阻塞 API 是一个争论点。图书馆在很多地方都会尝试“最佳猜测”来阻止，即使是在元素点击时，但不能保证。开发人员社区已经[详细讨论了](https://groups.google.com/forum/?fromgroups#!topic/selenium-developers/WuqiU7cKOTk)阻塞和非阻塞之间的这种紧张关系，并反映在[其中一个常见问题解答中](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_WebDriver_fails_to_find_elements_/_Does_not_block_on_page_loa)在项目维基中。在 IE 的情况下，驱动程序确实会尝试阻止元素点击，并且它是否成功阻止是一个竞争条件。在您的特定页面的情况下，IE 驱动程序（显然是 Chrome）正在“赢得”那场比赛，直到操作完成为止。但是，在其他情况下，驱动程序也很容易输掉比赛，因此最好在继续代码中的下一步之前使用显式等待其他页面更改。

如果将来成为问题，您可以通过设置[页面加载超时](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)来更早地进入下一条语句来缓解这种情况。这种方法的一个小挑战是目前并非所有浏览器都可以实现超时（IE 可以，我不知道 Chrome）。

# c# - 是否可以通过反射获取局部变量？

> ID：11118084
> 
> 赞同：2
> 
> 时间：2012-06-20T10:58:30.930
> 
> 标签：c#, c#-4.0

我有一个至少有 50 个局部变量的方法。我需要从字符串值中选择一个变量。是否可以使用 C# 反射访问局部变量？

**编辑：**

```
void A()
{
    var a1 = List<MyClass>();
    var a2 = List<MyClass>();
    var a3 = List<MyClass>();
    var a4 = List<MyClass>();
    var a5 = List<MyClass>();
    ........................
    ........................
    ........................
    // I have a string value found at runtime. The possible values of it are a1,a2,a3,a4,a5,.... I need to select one
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T11:03:50.057

真正的答案，没有。

**编辑 OP 后**：确定没有。名称在编译时被“丢弃”

不过，您可以查看 IL 说明（Method.Body）。

使用 Cecil Decompiler 来“猜测”什么是变量（虽然没有名字）。但是，通常很难区分（重用）临时变量和变量，并且所有语法糖都丢失了

另外：像其他评论所说的那样修复你的代码:)

# spring - 引起：org.springframework.context.NoSuchMessageException：代码下找不到消息

> ID：11118090
> 
> 赞同：7
> 
> 时间：2012-06-20T10:58:58.937
> 
> 标签：spring, internationalization

试图让 Spring 国际化工作。我使用了 classpath:messages basename，为语言创建了 .properties 文件。它们被正确复制到 web-inf 文件夹，并且代码存在于属性文件中......

这是显示一切的ide，请帮助我。我已经从另一个我已经完成的项目中复制了设置，效果很好。我曾尝试创建大量不同的消息文件，但它没有提取任何东西……图片显示了 web.xml、spring-servlet.xml 和目录结构。

![这显示了一切，我看不到我错过了什么](../Images/d9f3575d3e47cd418848155f827ae0b6.png)

**编辑** 如果我将bean定义添加到applicationContext而不是spring-servlet它可以工作..？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T11:16:05.620

我会去尝试：

如果文件位于`WEB-INF/classes`目录下，请尝试：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="WEB-INF/classes/messages" />
</bean> 
```

并且文件的名称应该是：

*   消息属性
*   messages_en.properties
*   messages_en_GB.properties

**编辑**- 最后尝试！

这种编写配置的方式怎么样，在你最后一次评论之后，我在这里闻到了一些味道：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean>
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="defaultLocale" value="en" />
</bean>

<mvc:interceptors>
    <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>
</mvc:interceptors> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:05:38.373

将您的消息属性文件保存在类路径（WEB-INF/classes）之外，并如下定义 bean

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="/WEB-INF/messages"/>
<property name="cacheSeconds" value="1"/> 
```

根据文档 ReloadableResourceBundleMessageSource 为您提供了即时更改 spring 通过 cachSeconds 获取的消息的好处。此类与 ResourceBundleMessageSource 的区别仅在于指定资源位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T14:02:52.880

所有配置细节都是正确的，但是做一件事，在子配置文件中配置属性文件，这意味着您的 spring-servlet.xml 将所有属性配置到 applicationContext.xml 中，这意味着父配置文件最大可以工作。试试看，去掉spring-servlet.xml中属性细节的配置............

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-21T15:43:17.907

尽管对许多人来说这听起来很愚蠢，但我的代码所犯的错误是我们编写了自己的 MessageSource。这是调用 Spring 的 MessageSource。

但在代码中它就像 (MessageSource(MessageSource))。因此，我们正在查找而不是查找。

删除了额外的调用，它现在可以工作了。

# josso - 使用 JOSSO 配置简单的 Web 应用程序

> ID：11118097
> 
> 赞同：1
> 
> 时间：2012-06-20T10:59:12.943
> 
> 标签：josso

我是 JOSSO 的新手，想在我的简单 Web 应用程序（JSP/Servlet）上实现单点登录。我已经按照链接下给出的步骤成功安装了 JOSSO - [http://www.josso.org/confluence/display/JOSSO1/Quick+Start#QuickStart-Prerequisites 。](http://www.josso.org/confluence/display/JOSSO1/Quick+Start#QuickStart-Prerequisites)运行链接 http://localhost:8080/partnerapp . 我确实得到了登录屏幕，但上面的链接中提到了与 wat 不同的登录屏幕。我没有得到用户名和密码的字段，而是“你是匿名用户”的消息。带有登录按钮。

谁能帮我设置 JOSSO（如果缺少任何东西）并配置我的 Web 应用程序。请因为我是 JOSSO 的新手。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:12:29.337

匿名用户页面显示您已正确设置。现在尝试创建一个简单的 helloworld 应用程序并尝试使其成为合作伙伴应用程序。尝试运行它。

按照这些链接中的说明进行操作： [使用 Josso 设置 Java 应用程序](http://www.josso.org/confluence/display/JOSSO1/Jossify+your+JEE+Application)

[为 Josso 设置 Tomcat](http://www.josso.org/confluence/display/JOSSO1/Jossify+your+Application+for+Tomcat+-+Quick+Start)

# iphone - 动态更改 NSURL 的 url

> ID：11118099
> 
> 赞同：0
> 
> 时间：2012-06-20T10:59:20.950
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的视图控制器中有一个`NSURL`成员。根据用户输入，比如用户按下了哪个按钮，我必须动态获取 url 字符串并创建一个`NSURL`对象。

目前每次我创建一个`NSURL`对象。我知道这是内存泄漏。有什么方法可以更改`NSRUL`成员的 url 字符串值而不删除其内存？

`NSURL`由于项目正在进行，我无法释放成员`@autoreleasepool`。

* * *

代码片段：

```
@interface myViewController : UIViewController <MyWebViewDelegate>
{
     NSURL* NavigationURL;

         ...
}

@implementation myViewController

...

-(IBAction) LoadURL
{
    if (self.NavigationURL)
    {
        NSURLRequest *Request = [NSURLRequest requestWithURL:NavigationURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
        [WebView loadRequest:Request];
    }
}

- (IBAction)onHomeClick:(UIButton *)sender 
{ 
    switch (sender.tag) 
    {
        case 101: 
            {
                self.NavigationURL = [[NSURL alloc] initWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/CommAndCoord.pdf"];        
                [self LoadURL];
            }
            break;

        case 102: 
            {
                [self stopResourcesIfAlreadyLoading];

                self.NavigationURL = [[NSURL alloc] initWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/PartCulture.pdf"];        

                [self LoadURL];
            }
            break;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:02:09.307

如果`self.NavigationURL`是`retain`（或者如果您正在使用 ARC `strong`）属性，那么按照您的方式行事就没有问题。实际上，分配给该属性将自动为您处理内存管理，并且您不会有内存泄漏。

但是，如果您不使用 ARC 并且您的属性是一个`retain`，那么您必须注意不要让您的对象成为`autoreleased`一个：

```
self.NavigationURL = [[[NSURL alloc] initWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/CommAndCoord.pdf"] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:03:48.060

您可以使用 [NSUrl URLWithString:] 方法而不是每次都分配它。

像这样

```
self.NavigationURL = [NSURL URLWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/PartCulture.pdf"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:08:17.873

用这个：

```
 -(void)LoadURL:(NSURL *)url
{
if (urlL)
{
    NSURLRequest *Request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    [WebView loadRequest:Request];
}
}

- (IBAction)onHomeClick:(UIButton *)sender 
{
switch (sender.tag) 
{
    case 101: 
        {
            self.NavigationURL = [NSURL URLWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/CommAndCoord.pdf"];        
            [self LoadURL:self.NavigationURL];
        }
        break;

    case 102: 
        {
            [self stopResourcesIfAlreadyLoading];

            self.NavigationURL = [NSURL URLWithString:@"https://zzzqmsdb.xxxxyyyy.com/sites/pex/iPadFiles/PartCulture.pdf"];        

            [self LoadURL:self.NavigationURL];
        }
        break;
 } 
```

# axapta - 在 Dynamics AX 2012 中获取客户或潜在客户

> ID：11118100
> 
> 赞同：1
> 
> 时间：2012-06-20T10:59:20.917
> 
> 标签：axapta, x++, dynamics-ax-2012

我正在尝试使用 X++ 获取客户或潜在客户并将其用于查找。中有一个方法`DirPartyTable`可以返回我想要的。

```
DirPartyTable::isCustomerOrRelation

while select * from dirPartyTable
{
       if(DirPartyTable::isCustomerOrRelation(dirPartyTable.RecId))
       {

                //Get the Name
                //info(dirPartyTable.Name);
       }
} 
```

但是当我建立一个查询查询时，我试图以某种方式传递`DirPartyTable::isCustomerOrRelation(dirPartyTable.RecId)`查询`addRange`。有没有办法做到这一点还是不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:22:50.177

如果您转到`isCustomerOrRelation`(and `isCustomer`and `isRelation`) 的来源，您会发现，如果当前公司中存在客户或潜在客户，该方法将返回 true。

您的`while select`，虽然正确，但效率低下，因为它可能必须扫描一百万方来选择您当前公司中存在的一千个客户或潜在客户。

一个更有效但语法非法的`while select`方法是：

```
while select * from dirPartyTable
   exists join custTable
   where custTable.Party == dirPartyTable.RecId
   union 
   select * from dirPartyTable
   exists join smmBusRelTable
   where smmBusRelTable.Party == dirPartyTable.RecId;
{
     info(dirPartyTable.Name);
} 
```

虽然在 X++ 中是非法的，但可以使用查询和视图。

1.  进行两个查询（自己翻译成适当的属性）：

2.  查询1：

    ```
    select * from dirPartyTable
        exists join custTable
        where custTable.Party == dirPartyTable.RecId 
    ```

3.  查询2：

    ```
    select * from dirPartyTable
        exists join smmBusRelTable
        where smmBusRelTable.Party == dirPartyTable.RecId; 
    ```

4.  根据查询创建两个视图（View1 和 View2）。

5.  进行联合查询（Query3），查看如何在[联合查询中合并数据源](http://msdn.microsoft.com/en-us/library/cc605991.aspx)，记得指定`UnionType`（`Union`或`UnianAll`）。

6.  基于 Query3 创建视图，了解如何[基于 Query 创建视图](http://msdn.microsoft.com/en-us/library/aa558501.aspx)。

结果，使用 X++ 选择所有记录：

```
while select * from dirPartyCustOrRelationTable
{
     info(dirPartyCustOrRelationTable.Name);
} 
```

或者您可以直接使用 Query3 来检索记录。

# c# - 棱镜模块中的共享装配

> ID：11118103
> 
> 赞同：0
> 
> 时间：2012-06-20T10:59:31.740
> 
> 标签：c#, silverlight, prism, enterprise-library

**我使用Prism**编写了一个项目。我有两个模块，这个模块有共享程序集。例如，a.dll 由 moduleA 和 ModuleB 引用，因此 a.dll 存在于 ModuleA.xap 和 ModuleB.xap 中，并放大 xap 文件，并且可能会为每个模块再次加载。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:01:20.947

Add this assembly to `Shell` project and set `Copy Local = False` to it in the modules. In this case assembly will be included just in `Shell.xap` file.

# ember.js - Ember 数据填充记录

> ID：11118104
> 
> 赞同：2
> 
> 时间：2012-06-20T10:59:41.213
> 
> 标签：ember.js, ember-data

需要帮助让 Ember-Data 与 Zend Rest 一起工作。

一开始，我对 Zend Framework 很熟悉，所以 Rest Adapter 很容易设置。telnet 的请求表明它可以工作，并且响应也具有格式良好的 HTTP 代码。

Ember Data 的设置稍微复杂一些。我用 Ubuntu 安装了一个虚拟机，安装了 Ruby 1.9.3，`git clone`编辑了 ember-data 存储库并用 rake 生成了 JS 文件。我还安装了捆绑器来解决所有依赖项。似乎工作没有错误。这对我来说是第一次。我对红宝石不熟悉。

不幸的是，它似乎不起作用。在我的测试应用程序中，我用 firebug 看到了其余请求。反应看起来也不错。但是对象仍然是空的。

响应：

```
[{"id":"1","user":"testuser","password":"123","mail":"my@me.com","role":"GUEST","active":"1","hash":null,"last_login":null}] 
```

响应标头：

```
Cache-Control       no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection          Keep-Alive
Content-Encoding    gzip
Content-Length      121
Content-Type        application/json; charset=utf-8
Date                Wed, 20 Jun 2012 10:49:38 GMT
Expires             Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive          timeout=15, max=99
Pragma              no-cache
Server              Apache
Vary                Accept-Encoding
X-Powered-By        PHP/5.3.13
X-UA-Compatible     IE=Edge,chrome=1 
```

我的应用程序：

```
 // my script
    App = Em.Application.create();

    App.store = DS.Store.create({
      revision: 4,
      adapter: DS.RESTAdapter.create({ bulkCommit: false, namespace: 'rest' })
    });

    App.User = DS.Model.extend({
        id: DS.attr('number'),
        user: DS.attr('string'),
        password: DS.attr('string'),
        mail: DS.attr('string'),
        role: DS.attr('string'),
        active: DS.attr('number'),
        hash: DS.attr('string'),
        last_login: DS.attr('date')
    });

    App.postsController = Em.ArrayController.create({
        content: App.store.findAll(App.User)
    });

    // my html page
    <script type="text/x-handlebars">
        {{#each App.postsController}}
           <li>{{user}}</li>
        {{/each}}
    </script> 
```

我究竟做错了什么？我不确定我的 ember-data.js 是否正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T14:24:34.013

[https://github.com/emberjs/data/issues/132](https://github.com/emberjs/data/issues/132)

DS.RESTAdapter 需要一个根元素。如：

```
{
  users: [{
    "id":"1",
    "user":"test user",
    "password":"123",
    "mail":"my@me.com",
    "role":"GUEST",
    "active":"1",
    "hash":null,
    "last_login":null
  }]
} 
```

这是因为 DS.RESTAdapter 支持侧加载。不幸的是，它是不可配置的。解决此要求的唯一方法是推出您自己的适配器。

# jquery - jQuery - 使用 overflow-y 滚动 div：滚动；

> ID：11118105
> 
> 赞同：3
> 
> 时间：2012-06-20T10:59:49.027
> 
> 标签：jquery, css, usability

我有一个包含消息列表的 div（它是一个聊天室应用程序）。由于每条消息都添加到列表底部，我*想*我希望 div 滚动到页面底部。这是有道理的，对吧？所以 - 问题 #1：如何让 div 滚动到底部？

现在，下一个问题是关于可用性的。如果用户向上滚动阅读之前发布的内容怎么办？然后突然有人发了一条新消息？这意味着 jQuery 将再次向下滚动。这对用户来说可能非常烦人。有什么好的方法来处理这个？如果在添加新消息之前滚动条已经一直向下滚动，它是否应该只向下滚动？如果是这样，如何在 jQuery 中做到这一点？还是有更实用的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-13T11:40:56.403

// this is 将滚动到末尾，在 append 之后

```
$("#mydiv").append("My data");
var newmsg_top = parseInt($('#mydiv')[0].scrollHeight );
$('#mydiv').scrollTop(newmsg_top); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:05:00.573

您可以通过获取滚动条的位置，`window.pageYOffset`然后使用`window.scrollTo(0, y)`它滚动到某个位置。

或者您甚至可以`$('#mydiv').scrollTop(newmsg_top)`在 jquery 中使用向下滚动到新消息。

在哪里`var newmsg_top = parseInt($('#mydiv li:last').offset().top);`

这`#mydiv`是包含所有消息的 div。
所以`#mydiv li:last`指向最后一条消息。
`offset()`返回元素相对于文档的当前位置，您可以通过`.top`

如果你想要相对于父母的相对位置，你可以选择`position()`

**编辑：** ***有一个 jsfiddle 在[这里](http://jsfiddle.net/sunu0000/K32uD/4/)工作。请看一下。*** 注意：只有在查看最后一个元素时才下线。（用于解决您的可用性问题）

# java - JBoss Netty 和 UDP：多线程？

> ID：11118106
> 
> 赞同：1
> 
> 时间：2012-06-20T10:59:51.887
> 
> 标签：java, multithreading, udp, netty

我使用 Netty 编写了一个简单的 UDP 服务器。服务器侦听某个接口上的一个端口。

```
ChannelFactory factory =
            new NioDatagramChannelFactory(
                    Executors.newCachedThreadPool());

ConnectionlessBootstrap bootstrap = new ConnectionlessBootstrap(factory);

bootstrap.getPipeline().addLast("MyHandler", new TestHandler());

bootstrap.bind(new InetSocketAddress(InetAddress.getByName("192.168.1.100"), 8080)); 
```

我使用一个向服务器发送大量 UDP 数据报的客户端。当我使用 VisualVM 分析我的应用程序时，我看到只有一个线程（名为 New I/O worker #1）处理传入的消息。是否符合预期？

如果是，单个线程如何处理大量传入消息？我已经编写了一个带有 Spring 集成的应用程序，它在端口上侦听 UDP 数据报（使用 UDP 入站通道适配器），并且有一个线程在端口上侦听，但该线程将传入消息传递给其他线程进行处理一个水池。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:25:30.463

我建议您将 Reactor 模式与 java.nio 一起使用 - 看看[这个](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFIQFjAB&url=http://www.java.net/pub/a/today/2007/02/13/architecture-of-highly-scalable-nio-server.html&ei=-7LhT4OwFYiw0QW7iqmoAw&usg=AFQjCNHNGHp_LQGeKt7-1J5zc2PVGSwy0Q)-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:08:29.103

你的机器上有多少个内核？

如果您的处理程序管道不进行任何阻塞或任何冗长的处理，则很可能 I/O 处理将始终比网络快很多，即 IO 线程将空闲并等待相当大一部分工作它的时间。无需从池中分配另一个线程。

另一方面，如果您的处理程序涉及冗长的处理或阻塞调用，例如数据库或文件访问，那么您应该将处理交给 ExecutionHandler，它将处理从 IO 工作池转移到另一个线程池。

# javascript - 将字典对象从控制器传递到 Javascript

> ID：11118107
> 
> 赞同：2
> 
> 时间：2012-06-20T10:59:52.647
> 
> 标签：javascript, asp.net-mvc-3, controller

我在将字典对象从控制器传递到视图中的 javascript 时遇到了一些麻烦。我正在使用 ASP .Net MVC3，我正在尝试使用数据库中的数据制作一些图表/图形，我找到了 HighCharts javascript，我正在尝试使用它。这是示例：

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: 'Stacked column chart'
        },
        xAxis: {
            categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Total fruit consumption'
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +' ('+ Math.round(this.percentage) +'%)';
            }
        },
        plotOptions: {
            column: {
                stacking: 'percent'
            }
        },
            series: [{
            name: 'John',
            data: [5, 3, 4, 7, 2]
        }, {
            name: 'Jane',
            data: [2, 2, 3, 2, 1]
        }, {
            name: 'Joe',
            data: [3, 4, 4, 2, 5]
        }]
    });
});

}); 
```

我想用字典填充系列变量，这是我使用的方法：

```
 public ActionResult GetSeries()
    {
        var series= new Dictionary<string, int[]> {
            { "pa", new int[]{1,2,3,4,5} },
            { "papa", new int[]{1,2,3,4,5} },
            { "papapa", new int[]{1,2,3,4,5} },
        };

        return Json(series, JsonRequestBehavior.AllowGet);
    } 
```

但它返回类似：
{"pa":[1,2,3,4,5],"papa":[1,2,3,4,5],"papapa":[1,2,3, 4,5]}

所以它与javascript中的语法不同，每个字段之前都有名称和数据

顺便说一句，我用它来填充数据

```
$.getJSON('@Url.Action("GetSeries)', function(series) {
...
series: series
...
}); 
```

最好的问候， Hélder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:06:23.437

它返回的是关联数组在 JavaScript 中的外观。根据上面示例中的 JavaScript，您真正想要的是一个数组或对象列表：

```
 var series= new[] {
        new { name="pa", data=new int[]{1,2,3,4,5} },
        new { name="papa", data=new int[]{1,2,3,4,5} },
        new { name="papapa", data=new int[]{1,2,3,4,5} },
    };

    return Json(series, JsonRequestBehavior.AllowGet); 
```

我会创建一些视图模型（这只是一个包含所有数据的类的花哨名称，采用适当的格式和结构，需要在视图中显示），并将其作为 JSON 消息返回。

```
public class SeriesViewModel
{
   public string name { get; set; }
   public int[] data { get; set; }
}

public class GetSeriesViewModel
{
   public string[] categories { get; set; }
   public SeriesViewModel[] series { get; set; }   
} 
```

只需添加您需要作为 JSON 发送的任何属性。您将在操作中使用自己的逻辑填充它们：

```
public ActionResult GetSeries(string category)
{
    // look up your category and series information

    var model = new GetSeriesViewModel
        {
             categories = new[] { "category 1", "category 2" /* etc. */ }, // you can create this list from your code above
              series = new[] { new SeriesViewModel { name="pa", data=new int[] { 1, 2, 3, 4, 5 } } }// etc.... again, you can create these objects in your code above */
        };

     return Json(model, JsonRequestBehavior.AllowGet)
} 
```

# objective-c - 如何将NSString转换为对象C中的char []数组

> ID：11118112
> 
> 赞同：1
> 
> 时间：2012-06-20T11:00:06.440
> 
> 标签：objective-c, c, nsstring, char

我有一个很长的字符串，但想将其转换为 char 数组，`unsigned char[4]`例如：

```
NSString *str = "Thisisaverylongstringofstringsjoinedtogether";
unsigned char c[4] = str; 
```

我希望有人明白我想要什么并帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:05:40.273

您可以使用 [str cString] 来获取与字符串相同长度的字符数组。

如果您只希望前 4 个字符在 [str substringWithRange:4] 之前或之后创建一个子字符串，您只需 memcpy 完整字符数组的一部分。

# c++ - 在文件处理c ++中读取错误

> ID：11118115
> 
> 赞同：0
> 
> 时间：2012-06-20T11:00:17.093
> 
> 标签：c++

我正在制作一棵霍夫曼树，我已经完成了我的工作。但是当我读取一个字符时出现了一个问题，它在第一部分读取为零而不是空格“”。

这是代码。该错误发生在 `decode`文件处理期间的函数中。

```
void huffmantree<h>::decode(){
    CString *st;
hscll<h> * temp=new hscll<h> ();
int h;
    ifstream myfile;
  myfile.open ("z://aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae.txt");
  myfile >>h;
  cout<<h;

  for(int i=0;i<h;i++)
  {char  temp9[100];
  char l;

  myfile >>l; 
  temp->insert(l);
     // myfile >> l ;

      myfile >> temp9;
      temp->atindex(i)->symboc.symbol=l;
      temp->atindex(i)->code->setString(temp9);
      //myfile >> '\n';
  }
  _getch();

    //CString u;
    //char k;
    //int p=0;
    //for(int i=0;i<st->m_length;i++)
    //{
    //  for(int j=0;j<8;j++)
    //  {
    //      
    //      char a;
    //      a=st->charAt(i);
    //      int temp=1;
    //      if(j==0)
    //          temp=1;
    //      if(a!='0')
    //      {
    //          for(int y=0;y<j;y++)
    //              {
    //                      temp*=2;
    //              }
    //          p+=temp;
    //      }
    //      else 
    //      {
    //      p+=0;
    //      
    //      }

    //      i++;
    //      cout<<a;
    //  }
    //  k=p;
    //  char t=7;
    //  //cout<<"      "<<t<<"    "<<p<<endl;
    //  myfile << k;
    //  p=0;
    //  u.addcharbychar(k);
    //}
    ////cout<<endl<<endl<<endl<<endl<<endl<<endl<<endl<<u.getString();
    ////cout<<endl<<endl<<endl<<"the length is =="<<u.m_length<<endl;
  myfile.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:06:56.370

如果`>>`用于输入，则会跳过前导空格。如果您正在读取二进制数据，则需要以二进制模式 ( `myfile.open( name, std::ios::in | std::ios::binary`) 打开文件并使用非格式化输入函数，例如`istream::get()`. （并且在编写时，您还需要编写二进制文件。）

# node.js - 在没有自动日志的情况下运行 node.js

> ID：11118116
> 
> 赞同：9
> 
> 时间：2012-06-20T11:00:17.823
> 
> 标签：node.js, express

我想在回答请求时运行我的 node.js 应用程序，而不需要它在终端中打印的自动日志（例如`127.0.0.1 - - [Wed, 20 Jun 2012 09:55:49 GMT] "GET /url HTTP/1.1" 200 1559 "http://localhost:3020/url" ...`）。此外，如果可能的话，我希望我的日志`console.log()`仍然可见。

有谁知道如何做到这一点？我在 Node 上运行 express.js。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T11:28:21.320

就像布兰登说的那样，我认为您在代码中的某处使用了[记录器](http://www.senchalabs.org/connect/logger.html) [中间件。](https://github.com/senchalabs/connect#middleware)您应该禁用该部分，尤其是在[生产模式下](http://expressjs.com/guide.html#configuration)。使用这样的东西：

```
app.configure(function(){
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(app.router);
});

app.configure('development', function(){
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  var oneYear = 31557600000;
  app.use(express.static(__dirname + '/public', { maxAge: oneYear }));
  app.use(express.errorHandler());
}); 
```

# jquery - 使用 PagedList.MVC 或类似方法在 ASP.NET MVC 中仅 Ajax 分页

> ID：11118119
> 
> 赞同：-2
> 
> 时间：2012-06-20T11:00:25.653
> 
> 标签：jquery, ajax, asp.net-mvc, pagination

我使用 troygoode 的 PagedList 在我的 ASP.NET MVC 应用程序[http://nuget.org/packages/PagedList.Mvc中输出分页链接](http://nuget.org/packages/PagedList.Mvc)

我在控制器中创建分页列表，然后将其传递给视图，该视图使用 @Html.PagedlistPager 为分页链接生成 html。这会生成一堆链接，例如 /Store?search=bla&page=1、/Store?search=bla&page=2 等。

在可能的情况下，应该将 javascript 代码与 html 分开，这是非常一致的，因此我将点击处理程序添加到单独的 javascript 文件中的所有分页链接。当然，在这些点击处理程序中，我执行了一个 ajax 请求来获取页面 X，该页面在服务器端呈现，然后转储到客户端页面上的 div 中——包括新的分页链接。

由于我为每个请求生成新的分页链接，因此每次完成新搜索或更改页面时，我都会添加这些点击处理程序。我从 ajax 的 OnSuccess 事件处理程序中执行此操作。

这很好用。即使禁用了javascript，用户也可以浏览页面，因为它会退回到常规href。优雅的退化是最好的。

但是，我的应用程序有一个不同的部分，用户在记录作业时需要选择一个商店，而且它只是严格的 ajax。在这种情况下，我希望分页链接的 href 为“javascript:void(0);”。问题是，当为这些链接添加点击处理程序时，我现在无法知道 ajax 调用应该发布到哪个 url。

我想我可以只使用链接的文本值——“1”、“2”、“3”等。但是“下一个”和“上一个”链接呢？另外，这样做感觉不对。

理想情况下，PagedList.MVC 可以选择在每个页面链接中放置 data-page="X" 属性，然后我可以在我的点击处理程序中使用它，但事实上这样一个选项在如此流行的.net 扩展让我相信我提出的解决方案不是理想或首选的解决方案。

我的方法合乎逻辑吗？或者有没有更好的方法来做到这一点。我是否需要编写自己的帮助程序来代替 PageList.MVC 的标准帮助程序？我只需要一个以前做过这个并且对他们的方法有信心的人的指导。

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:03:39.017

看看我刚刚推入的对不显眼的 AJAX 的支持：

[https://github.com/TroyGoode/PagedList/issues/26#issuecomment-6471793](https://github.com/TroyGoode/PagedList/issues/26#issuecomment-6471793)

# android - GridView 模拟 onClick 议程

> ID：11118120
> 
> 赞同：0
> 
> 时间：2012-06-20T11:00:27.420
> 
> 标签：android, gridview, calendar, onclick

在我的应用程序中，我有一个从 GridView 构建的议程。我想在 GridView 上的特定位置执行模拟 onClick（当然是当天），但我找不到解决问题的方法。

目标构建是 2.2 任何处理我的问题的建议都会很棒。

编辑：我的意思是 onItemClick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:40:44.750

这可以`t be done, cause of Google`是 Android 设计。

# bash - 如何从 Bash shell 运行 Logparser

> ID：11118122
> 
> 赞同：1
> 
> 时间：2012-06-20T11:00:34.690
> 
> 标签：bash, sh, logparser

我在 Windows 机器上我打开一个 git bash shell 并运行

`logparser "select date from testFile.log" -i:IISW3C -o:CSV`

这行得通。

但是如果我创建一个 .sh 文件

```
cmd_to_run='logparser "select date from testFile.log" -i:IISW3C -o:CSV'
$cmd_to_run 
```

这不起作用，我得到 logparser 错误：

`Error: detected extra argument ""select" after query`

我只需要通过 .sh 脚本运行 logparser。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:04:42.513

首先，你为什么不直接运行它呢？

转义查询中的空格，因为 bash 会扩展它，并且您会获得 logparser 的位置参数而不是保留的字符串。如果这不起作用，请尝试`eval`.

为了说明，这里有一个与 wc 类似的例子：

```
$ wc -w <<< "select date from testFile.log"
4
$ cmd_to_run='wc -w <<< "select date from testFile.log"'
$ $cmd_to_run
wc: <<<: No such file or directory
wc: "select: No such file or directory
wc: date: No such file or directory
wc: from: No such file or directory
wc: testFile.log": No such file or directory
0 total
$ eval $cmd_to_run # quote as appropriate
4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-05T20:13:17.440

事实上，我多年来一直在这样做。它使查询的可读性比从 cmd 提示符运行要好得多。这是我在 Cygwin Bash 中运行的示例 shell 脚本。

**dumpBiz_All_aspx.sh**：

```
#! /usr/bin/bash
# cd /cygdrive/c/apps/jsd/log_analysis
# . ./dumpBiz_All_aspx.sh
REPORT_NAME=all_aspx
ROOTDIR=D:\\_other\\access_log_analysis
LOGDIR=${ROOTDIR}\\new_server
LOGDATE=21*
SITE=mysite
DATE=`date +%y%m%d.%H%M%S`
OUTPUT_FILE=C:\\apps\\jsd\\log_analysis\\reports\\${SITE}_${REPORT_NAME}_${DATE}.csv

SQL=$(cat <<-EOF
 SELECT To_Lowercase(cs-uri-stem) as Res, cs-method as Method, COUNT(*) as Hits 
 INTO ${OUTPUT_FILE}
 FROM ${LOGDIR}\\u_ex${LOGDATE}.log
 WHERE Res LIKE '%.aspx'
    AND sc-status = 200
    AND cs-host > ''
    AND cs-host NOT LIKE '192%'
    AND Res LIKE '/${SITE}/%'
 GROUP BY Res, cs-method
 ORDER BY Hits DESC
EOF
)

echo SQL = $SQL
echo

cat << EOF | sh
 LogParser -i:IISW3C "${SQL}" -o:CSV
EOF

echo Launching $OUTPUT_FILE ...

cmd.exe /c start ${OUTPUT_FILE} 
```

输出：

```
SQL = SELECT To_Lowercase(cs-uri-stem) as Res, cs-method as Method, COUNT(*) as Hits INTO C:\apps\jsd\log_analysis\reports\mysite_all_aspx_211005.155939.csv FROM D:\_other\access_log_analysis\new_server\u_ex21*.log WHERE Res LIKE '%.aspx' AND sc-status = 200 AND cs-host > '' AND cs-host NOT LIKE '192%' AND Res LIKE '/backoffice/%' GROUP BY Res, cs-method ORDER BY Hits DESC

Statistics:
-----------
Elements processed: 55780063
Elements output:    167
Execution time:     240.30 seconds (00:04:0.30)

Launching report: mysite_all_aspx_20211005.155442.csv ... 
```

这会生成一个文件`mysite_all_aspx_20211005.155442.csv`，并在默认的 csv 阅读器（如 Excel）中打开。

# javascript - Manually applying rotations and translations to Matrix4 in THREE.JS

> ID：11118126
> 
> 赞同：4
> 
> 时间：2012-06-20T11:00:44.577
> 
> 标签：javascript, matrix, three.js

I am trying to understand the co-ordinate spaces of three.js, I understand that there is object.matrix and object.matrixWorld.

After stumbling upon this blog post [Matrix Basics. How to step away from storing an orientation as ’3 angles’</a>, I decided to try to learn how to manipulate properties of the Matrix4 manually thus avoiding using Euler rotations.](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/)

 [All I am trying to do is translate my cube away from the origin 0,0,0 then rotate it in world space. The result in my mind would be that the cube translates on y axis first, then the rotate would bring it in a large arc back to the plane, but what actually happens is it just goes back to the origin ignoring the translation.

I have been doing a lot of reading about vectors and matrices and I'm confident I understand the theory behind them enough now. What I don't really get is how three.js handles the matrixWorld and matrix. I've attempted both!](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/) 

[Here is a fiddle to demonstrate:](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/) [http://jsfiddle.net/SCXNQ/151/](http://jsfiddle.net/SCXNQ/151/)

Just look in the render() function to see what I'm trying to do!

**EDIT - [solved] UPDATED JS FIDDLE OF WORKING VERSION 14/09/12**

With the help of the answer below, I thought I would post my updated fiddle demonstrating what I wanted to achieve - [http://jsfiddle.net/SCXNQ/363/](http://jsfiddle.net/SCXNQ/363/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:27:49.123

看看[这个](http://jsfiddle.net/phenomnomnominal/SCXNQ/152/)，这就是我认为你想要的。

编辑：哎呀，矩阵顺序错了（你需要牢牢掌握的另一件事）->也试试[这个](http://jsfiddle.net/phenomnomnominal/SCXNQ/153/)。

# php - PHP preg regular expression pattern

> ID：11118132
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:01:07.043
> 
> 标签：php, regex, preg-replace

1.  What does this pattern `'/\\\(?!&amp;#|\?#)/'` match in PHP preg_replace function?
2.  Is this pattern valid?
3.  Why there are 3 backslashes in a row `\\\`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:12:09.753

1.  该模式检查*没有*后跟`&amp;#`or的文字反斜杠`?#`。
2.  是的。
3.  因为它是作为 PHP 字符串文字编写的。`'\\'`字符串文字中的（转义转义字符）解析为实际的 string `'\'`，因此实际的正则表达式是`/\\(?!&amp;#|\?#)/`. 反斜杠在正则表达式中转义，因此它不会转义`(`. 所以寻找的实际模式是`\&amp;#`or `\?#`。

# ios - How do I solve a 'NSUnknownKeyException' ... setValue:forUndefinedKey:]: ...not key value coding compliant

> ID：11118135
> 
> 赞同：35
> 
> 时间：2012-06-20T11:01:11.493
> 
> 标签：ios, xcode, debugging, compiler-errors

Alright, I'll try and make this brief as possible. I wanted to a UIToolbar above my keyboard, and it took me a while to figure it out, and I eventually did, but when I tried adding function to the buttons *previous* *next* and *done* my program would soon not compile.

The entire error message can be seen here:

> 2012-06-20 05:36:55.276 KegCop[79460:fb03] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[ setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key done.'
> 
> *** First throw call stack: (0x134a022 0x1733cd6 0x1349ee1 0xd31022 0xca2f6b 0xca2edb 0xcbdd50 0x5a571a 0x134bdea 0x12b57f1 0x5a426e 0x7adeef 0x7ae03e 0x382d7a 0x382ff8 0x38217f 0x391183 0x391c38 0x385634 0x1f84ef5 0x131e195 0x1282ff2 0x12818da 0x1280d84 0x1280c9b 0x381c65 0x383626 0x2a8d 0x29f5 0x1) terminate called throwing an exception(lldb)

@Abizern suggested I should read the [Apple Doc on Key value coding guide](https://developer.apple.com/library/ios/#documentation/general/conceptual/devpedia-cocoacore/KeyValueCoding.html#//apple_ref/doc/uid/TP40008195-CH25-SW1). Anyways it's super late, or super early however you look at it. The updated project can be found here: [https://github.com/ipatch/KegCop](https://github.com/ipatch/KegCop)

Just download the zip, and try and build and you will see what I am talking about. The error probably lies somewhere in the *ViewControllerWelcome.m* file.

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-20T11:15:46.973

在您的故事板或 xib（无论您使用哪个）中查找该`ViewControllerWelcome`对象。此错误的最可能来源是与`done`该类的代码中不存在的被调用的操作或出口有连接。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-17T17:17:11.880

最简单的检查方法是在情节提要视图中按住 Ctrl 键并单击控制器，然后在生成的弹出窗口中查找旁边有黄色警告标记的内容。只需按插座名称旁边的 (x) 即可将其删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-18T14:26:10.313

如果您使用的是故事板，那么只需单击每个 ViewController 并选择它们的连接检查器。检查是否存在任何感叹号（对于丢失的连接）。

正确删除它们。然后再次运行您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T07:18:15.547

我遇到了同样的问题，我使用 xib 作为视图控制器，但后来我删除了它。但是在代码中，连接仍然从已删除的 xib 中获取连接。所以走一走的方法是为viewcontroller创建一个新的xib。然后问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T23:28:45.890

在我的情况下，它是 xcode 上的一些奇怪的缓存，即使所有删除的对 IBOutlets 的引用仍然使它崩溃。IBOutlets 指向我的文件的旧版本，因此甚至没有删除和添加文件或从我的笔尖中删除所有引用出口......

`SOLUTION:` **关闭 xcode**成功了，**清理/深度清理项目**也可能有所帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-05-13T20:03:36.950

对于我的情况，我`-all_load`在“其他链接器标志”中添加了以防止 Xcode 剥离我的库二进制代码。

# php - text size increasing in foreach loop in IE7

> ID：11118137
> 
> 赞同：1
> 
> 时间：2012-06-20T11:01:22.320
> 
> 标签：php, css, foreach, internet-explorer-7, text-size

I created a php file that parses a .txt file to display real estate ads.

I used a foreach loop for the arrays and everything works well except in IE7\. The text size increases after each array in IE7\. This is all within in a joomla article and the appropriate php file is included using the Sourcerer plugin.

I changed the font-size from % to em in the appropriate css files, but that did not work. I tried to use zoom:1 in the divs but I already have a position:absolute within the containg div and that did not work either.

The foreach loop:

```
foreach($results as $book){
echo '<div id="annonces">';
echo '<div id = "annoncetext">';
echo '<p class="annonces_title"> ' . $book[2]. '</p>';
echo '<p class="annonces_ref">' . $book[3]. ' m<sup>2</sup> - ' . $book[4] . ' pièces - ' . $book[5] . ' chambres<br>';
echo '<p class="annonces_prix">Prix : '  . $book[6]. ' €&lt;br></p>';
echo '<p class="annonces_description">' .  $book[8]. '<br><br>';
'</div></div>'; 
```

And some of the relevant css:

```
p.annonces_title{ 
    font-size: 1.75em;
    font-weight:normal;
    line-height:28px;
    padding: 5px 10px 1px 0px;
    margin: 0px 4px 13px 0;
    letter-spacing:0px;
    text-transform: uppercase;
    color:#fff;
}
p.annonces_prix{ 
    font-size:1.3em;
    line-height:18px;
    padding:8px 0 4px 0;
    margin-bottom:8px;
    color:#fff;
    font-weight:normal;
    text-transform:none;
}

#annonces {
    margin-left:0;
    margin-top:30px;
    width:1080px;
    font-size-adjust:none;
    min-height:500px;
    position:relative;
    background-image:url(filet-annonces.jpg);
    background-position:bottom;
    background-repeat:no-repeat;
}

#annoncetext {
    position:absolute;
    top:0;
    width:340px;    
} 
```

To finish, not only do the text-size increase with each new ad, but the footer, which is not in the loop is also enlarged. Here is a link to the page. [http://www.lagrandiere-immobilier.fr/espace-location/nos-offres-de-location](http://www.lagrandiere-immobilier.fr/espace-location/nos-offres-de-location) The phenomena can be observed in Adobe BrowserLab.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:02:19.220

您在行尾缺少结束`</p>`标签

```
echo '<p class="annonces_ref">' . $book[3]. ' m<sup>2</sup> - ' . $book[4] . ' pièces - ' . $book[5] . ' chambres<br>'; 
```

还有这里：

```
echo '<p class="annonces_description">' .  $book[8]. '<br><br>'; 
```

因此，您的 HTML 可能无法正确呈现。

另外，在循环中不应该使用 ID，因为 ID 属性应该是唯一的，所以我建议将其更改为类属性，或者通过添加 ID 后缀使其唯一。

# javascript - can i get the html of the url by xmlhttprequest at clientside using javascript?

> ID：11118141
> 
> 赞同：0
> 
> 时间：2012-06-20T11:01:36.123
> 
> 标签：javascript

I need to retreive the page source of the url using XMLhttpRequest in javascript.I tried it but i'm not getting any response. Following is my code and i'm getting blank response.text

```
function pagesource(url) {
    var request = makeHttpObject();
    request.open("GET", url, true);
    request.send(null);
    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            if (request.status == 200) {
                alert(request.responseText);
            }
        }

    };   
}

function makeHttpObject() {
    try { return new XMLHttpRequest(); }
    catch (error) { }
    try { return new ActiveXObject("Msxml2.XMLHTTP"); }
    catch (error) { }
    try { return new ActiveXObject("Microsoft.XMLHTTP"); }
    catch (error) { }
    throw new Error("Could not create HTTP request object.");
} 
```

# javascript - jquery if 语句并删除 iframe

> ID：11118148
> 
> 赞同：1
> 
> 时间：2012-06-20T11:02:03.923
> 
> 标签：javascript, jquery

我如何在 jquery 中编写 if 语句：

如果用户单击图像`div#ProductImages > img`然后隐藏/删除 iframe？

这就是我所拥有的：（我的代码会将 youtube 视频附加到页面上的 div 位置）

一旦用户再次开始单击图像，我需要删除 iframe。

```
var $video=$('div.icon iframe');
var $productImage=$('.product-image');
var $icon=$('.icon');
$icon.on('click',function()
{
    $('.product-image').append($video);
}); 
```

**编辑：对不起，我的意思是删除** [http://jsfiddle.net/t7qMF/1/](http://jsfiddle.net/t7qMF/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:05:30.363

隐藏：

```
$('#my-iframe').hide(); 
```

去除：

```
$('#my-iframe').remove(); 
```

从您的示例中不清楚您要在哪里放置什么逻辑。

但是你需要某种点击监听器。

```
$('#my-image').click(function() {
    // hide or remove iframe
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:08:32.640

附加 $video 并切换可见性

```
var $video=$('div.icon iframe');
var $productImage=$('.product-image');
var $icon=$('.icon');
$('.product-image').append($video);
$icon.on('click',function()
{
    $video.toggle();
}); 
```

​我希望我正确地理解了你

# python - python twython推文提取

> ID：11118152
> 
> 赞同：0
> 
> 时间：2012-06-20T11:02:14.503
> 
> 标签：python, dictionary

我正在使用 twython 连接到 Twitter API 并检索查询。这是我得到的一个例子：

```
---START----

{u'next_page': u'?page=2&max_id=215397707'
....
: 215397707794219008L, u'page': 1}

----END---- 
```

我感兴趣的是这样开始的实际推文：

```
u'text': u'@ilariargn devi fare un corso sul respiro! Sarebbero 7686879 euro, ci vieni? #perderetempo', u'from_user_name': 
```

所以“u'text'：u'”和“u'from_user_name'”之间的所有内容。我试图首先使用键和值来获取这些信息，因为它是一个字典。不工作。然后我尝试将字典转换为列表并使用字符串搜索来获取位置。也不行。我如何获得这些信息？

我尝试了建议的解决方案并收到以下消息：

```
tweet = json.loads(results)[u'text']
File "C:\Python27\lib\json\__init__.py", line 326, in loads
return _default_decoder.decode(s)
File "C:\Python27\lib\json\decoder.py", line 366, in decode
obj, end = self.raw_decode(s, idx=_w(s, 0).end())
TypeError: expected string or buffer 
```

而对于第二个解决方案 - 如果我写 [t'text] 我得到一个语法错误：

```
tweet = results[u'text']
KeyError: u'text' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:06:44.140

行。经过一些试验，我找到了以下访问实际推文的解决方案：

```
counter = 1
for key, value in results.iteritems():
    if key == "results":
        svalue = str(value)
        while counter != -1:
            tweetposstart = svalue.find("u'text'",counter)
            tweetposend = svalue.find("u'from_user_name'",counter)
            if tweetposstart != -1:
                tweet = svalue[tweetposstart:tweetposend]
                print tweet
                counter = counter + tweetposstart
            else:
                counter = tweetposstart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:44:06.830

你得到的是一个 json 对象：

```
import json
tweet = json.loads(whatyouget)[u'text'] 
```

或者，如果你得到已经解析的 dic，那么：

```
tweet = whatyouget[t'text'] 
```

# java - 使用 NetBeans 的两个 JPA 持久性单元的表名相同

> ID：11118153
> 
> 赞同：0
> 
> 时间：2012-06-20T11:02:26.530
> 
> 标签：java, jpa, persistence

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="first" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>database.first.entity.Grupe</class>
        <properties>
             <property name="javax.persistence.jdbc.url" value="jdbc:mysql://*****/first"/>
             <property name="javax.persistence.jdbc.password" value="*****"/>
             <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
             <property name="javax.persistence.jdbc.user" value="*****"/>
        </properties>
    </persistence-unit>
    <persistence-unit name="second" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>database.second.entity.Darbuotojas</class>
        <class>database.second.entity.Grupe</class>
        <properties>
              <property name="javax.persistence.jdbc.url" value="jdbc:mysql://*******/second"/>
              <property name="javax.persistence.jdbc.password" value="*****"/>
              <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
              <property name="javax.persistence.jdbc.user" value="*****"/>
        </properties>
    </persistence-unit>
</persistence> 
```

如您所见，每个持久性单元中都有一个**Grupe**类。但是当我尝试创建两个`@Entity`具有相同**Grupe**名称的类时（但在不同的包中，因此这应该不是问题）NetBeans 给了我错误：

```
Duplicated entity name. Class database.first.entity.Grupe is using the same name. 
```

是否有任何注释可以解决这个问题，因为我不想创建具有不同类名的类，如**GrupeFirst**和**GrupeSecond**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:55:45.150

如果它们在不同的持久性单元中应该没问题。

尝试设置为 true，它可能会找到这两个类，因为它们在同一个 jar 文件中。

除了重命名类，您还可以将 @Entity 上的名称设置为不同的名称。

# python - Python - 从列表中连续合并列表

> ID：11118155
> 
> 赞同：1
> 
> 时间：2012-06-20T11:02:32.273
> 
> 标签：python, list

我想将`dataset`行由不同列表组成的列表转换为`newDataset`列表，其中每一行由一个列表组成，该列表由列表的不同列表的每个元素组成`dataset`。

```
dataset = [
[[2,3,1],[1,2,9],[1,3,8]],
[[1,4,1],[1,2,10],[9,3,1]],
[[1,4,0],[1,4,9],[2,5,8]],
]

newDataset = [
[2, 3, 1, 1, 2, 9, 1, 3, 8],
[1, 4, 1, 1, 2, 10, 9, 3, 1],
[1, 4, 0, 1, 4, 9, 2, 5, 8]
] 
```

我想出了以下代码行：

```
from itertools import chain
newDataset = [list(chain(*x)) for x in dataset] 
```

但是，我想有一个更蟒蛇的方式？

另一个相关问题：我如何生成`newDataset2`，其中每一行由行的不同列表的第一个元素组成？

```
newDataset2 = [
[2,1,1],
[1,1,9],
[1,1,2],
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:07:20.837

```
itertools.chain(*x) 
```

更好地表示为

```
itertools.chain.from_iterable(x) 
```

但其他方面都很好。

还，

```
>>> [[x[0] for x in y] for y in dataset]
[[2, 1, 1], [1, 1, 9], [1, 1, 2]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:09:09.323

```
import numpy as np
np.array(dataset).reshape(3,9) 
```

返回

```
array([[ 2,  3,  1,  1,  2,  9,  1,  3,  8],
       [ 1,  4,  1,  1,  2, 10,  9,  3,  1],
       [ 1,  4,  0,  1,  4,  9,  2,  5,  8]]) 
```

第二个：

```
np.array(dataset)[:,:,0] 
```

返回

```
array([[2, 1, 1],
       [1, 1, 9],
       [1, 1, 2]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:08:10.223

```
dataset = [
[[2,3,1],[1,2,9],[1,3,8]],
[[1,4,1],[1,2,10],[9,3,1]],
[[1,4,0],[1,4,9],[2,5,8]],
]

print [[cell[0] for cell in row] for row in dataset] 
```

# sql - 适用于单个 ID 的 SQL 语句 - 如何使其遍历所有 ID？

> ID：11118160
> 
> 赞同：0
> 
> 时间：2012-06-20T11:03:14.483
> 
> 标签：sql, sql-server, sql-server-2008, select, stored-procedures

我目前有两个 SQL 命令。

一个从表中检索唯一 ID 的列表。

另一个迭代这些 ID 调用相同的存储过程，此时它只是一个插入语句。

因此，举个例子（使用假名），目前我正在打电话：

```
SELECT DISTINCT ID FROM TableOfIDs; 
```

并将返回值存储在 List 中，然后调用以下存储过程。

```
INSERT INTO Table ([Date], [Number], [ID]) VALUES( @CurrDate,
                                                   (SELECT SUM(Number2) 
                                                    FROM Table2 
                          WHERE RowID = @ID
                          AND CurrDate = (SELECT MAX(CurrDate) 
                                    FROM Table2
                                    WHERE RowID = @ID))
                    ,@ID) 
```

所以一个简化的表格看起来像这样：

```
Table
Date | Number | ID (FK)

Table2
CurrDate | RowID(FK) | Number2 
```

这两个 ID 都是 TableOfIDs 表的外键。

我怎样才能做到这一点，以便所有这些都在一个查询或一个存储过程中运行，而不是在一个查询中检索所有 ID，并在它们上迭代，每晚调用约 400 个存储过程？:)

非常感谢; 如果需要更多详细信息，请询问，我将填补空白。

它们都是同一张表的外键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:18:35.720

```
INSERT  INTO TABLE
        ( [Date]
        , [Number]
        , [ID]
        )
        SELECT  @CurrDate
              , SUM(Number2)
              , ID
        FROM    TABLE2
                JOIN ( SELECT   ID
                              , MAX(CurrDate) AS MaxDate
                       FROM     Table2
                       GROUP BY ID
                     ) x ON Table2.ID = x.ID
                            AND Table2.CurrDate = x.MaxDate
        GROUP BY Table2.ID 
```

# regex - perl regex parenthesis matching

> ID：11118162
> 
> 赞同：3
> 
> 时间：2012-06-20T11:03:19.200
> 
> 标签：regex, perl, replace

I have a variable `$next` which contains strings that might contain parenthesis e.g `trna(tgc)` I want to make this matching statement `if ($data[$i][2]=~/$next/){ ..}` and it always return false even if it's true in reality. I tried this `if ($data[$i][2]=~/trnA\(tgc\)/){ ..}`and it works. my question is : how to insert the '\' in front of each parenthesis into the variable `$next`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T11:08:13.687

您需要引用元字符。

尝试这个。

```
print "match" if( $var1 =~ /\Q$var2\E/ ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:07:54.937

我想你想要[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)：

```
$next = "trna(tgc)";
$search = quotemeta($next);
if ($data[$i][2]=~/$search/){ 
    //..
} 
```

# css - CSS lining up icons issue

> ID：11118163
> 
> 赞同：0
> 
> 时间：2012-06-20T11:03:24.593
> 
> 标签：css, icons, font-face

I'm trying to line up some social icons (in @font-face format which why they only appear as letters) beside the Connect h3 in the yellow box but I'm stuggling. Any help would be great.

[JsFiddle](http://jsfiddle.net/tobeeornot/qpdsZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:06:43.157

嘿，现在以前是这样**显示的** `**inline-block**`

```
 .footer-content p,  .social-media{
    display:inline-block;
    vertical-align: xxxxx;// top, middle, bottom --- as like requirement 
    } 
```

现场演示[http://jsfiddle.net/qpdsZ/1/](http://jsfiddle.net/qpdsZ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:21:28.203

检查一下，您必须调整字体大小以及`display:inline-block`. 这是[小提琴](http://jsfiddle.net/meetsubhajit/qpdsZ/2/)

# php - Using php and mongodb, how do you remove a document by type

> ID：11118164
> 
> 赞同：1
> 
> 时间：2012-06-20T11:03:24.910
> 
> 标签：php, mongodb

I have read the documentation and searched all over but I can't find how to do it. If I have a document inside a collection and the document is an empty array I can remove it like this:

```
db.data.remove(array('document'=>array())) 
```

or like this:

```
db.data.remove(array('document'=>[])) 
```

But if the array is not empty it doesn't work, so I tried like this:

```
db.data.remove(array('document'=>array('$type'=>4))) 
```

Am I doing it wrong? Is there any way to do this? Removing the document on another criteria isn't useful for me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:12:04.747

**编辑：** 最后我发现你的问题是什么。

```
// test document
{ "_id" : ObjectId("4fe1af4dd404b1863ff20aac"), "document" : [ 1 ] } 
```

运算符查看数组内部，而`$type`不是数组本身，因此以下 find 不返回任何内容：

```
db.test.find({document : { $type : 4  } }) 
```

现在在我的测试用例中，该文档包含一个双精度，以下查找返回该文档：

```
db.test.find({document : { $type : 1  } })
{ "_id" : ObjectId("4fe1af4dd404b1863ff20aac"), "document" : [ 1 ] } 
```

另请参阅有关此主题的错误报告： [https ://jira.mongodb.org/browse/SERVER-1475](https://jira.mongodb.org/browse/SERVER-1475)

# intellij-idea - 如何解决 IntelliJ IDEA 11.1.2 上 JetGradle 中的冲突？

> ID：11118166
> 
> 赞同：5
> 
> 时间：2012-06-20T11:03:33.223
> 
> 标签：intellij-idea, gradle

我是 Gradle 集成 JetGradle 的新手`IntelliJ IDEA 11.1.2`，目前我遇到了与编译时依赖项的冲突。

目前我不知道如何解决这个冲突，因为 IDEA 没有提供比这个小截图更多的信息。您是否遇到过类似的问题并且能够解决它？任何提示表示赞赏。

![冲突](../Images/0b14ed54047ad98f37d2e960b7208089.png)

更新：我发现 IntelliJ IDEA 无法`joda-time-2.1.jar`将`joda-time-2.1 library` ![无罐](../Images/47a8d35ecdcd71533fdccb9d6bb6b6cd.png).

如果我随后手动添加 JAR，则冲突已成功解决。IntelliJ 有没有办法告诉我为什么它不添加 JAR？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:21:00.540

是的，问题是该库是在 gradle 或 IDE 中定义的，但 jar 未在 IDE 端附加到它。

AFAI 在 IDE 端没有 GUI 可以帮助解决这种情况。请在跟踪器上创建专用功能请求。

丹尼斯

# weka - Weka 属性预测值

> ID：11118167
> 
> 赞同：1
> 
> 时间：2012-06-20T11:03:38.040
> 
> 标签：weka

我有一个关于找到某些属性的预测值的问题。在我的问题中，建议我将属性转换为二进制类，然后应用“决策树桩”来找出每个属性的预测值。我该怎么做呢？

我检查了这个[问题](https://stackoverflow.com/questions/2927269/filtering-attributes-with-weka)但这并不是我的意思。

在此先感谢，绳索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:02:34.210

`Select Attributes`您可以使用Weka's 中选项卡下的方法找到最具预测性的属性`Explorer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T19:38:42.277

是的，Weka 中的 Select Attributes 选项卡会分析您的属性，并对哪些属性提供最多的信息增益进行排名。在 Attribute Evaluator 下，选择 InfoGainAttributeEval 并选择 Ranker 作为搜索方法。根据我的经验，它运作良好。

# java - Java HashMap 内容似乎在不改变的情况下改变

> ID：11118168
> 
> 赞同：1
> 
> 时间：2012-06-20T11:03:39.787
> 
> 标签：java, hashmap

我有一个关于 Java 中的 HashMap 的问题。为了详细解释这个问题，我将首先发布一些您可以参考的代码。

```
public void BLASTroute(String args[]) throws IOException, InterruptedException{
            ...
            correctMapping CM = new correctMapping();
            CM.correctMapping(RB.BLASTresults, exists);
            CalculateNewConsensusSequence CNCS = 
                new CalculateNewConsensusSequence();
            char[] consensus = CNCS.calculateNewConsensusSequence(
                CM.newSeq, CM.remindGaps, EMBLreaderReference.sequence, exists);

            HashMap<Integer, ArrayList<String>> gapsFused = 
                new HashMap<Integer, ArrayList<String>>();
            for (Integer i : CM.remindGaps.keySet()) {
                ArrayList<String> newList = CM.remindGaps.get(i);
                gapsFused.put(i, newList);
            }

            GenerateGeneLists GGL = new GenerateGeneLists(
                EMBLreaderReference, CM.newSeq, gapsFused, exists, 
                GQList, allMappedPositions);
            System.out.println(CM.remindGaps.hashCode());
            gapsFused=GGL.generateGeneListSNP(gapsFused);
            System.out.println(CM.remindGaps.hashCode());
            System.out.println(gapsFused.hashCode());
            GGL.generateGeneListFrameShift(gapsFused);

        } 
```

发生以下情况：

在我的课堂上正确映射，我填充了一个名为remindGaps 的全局变量。我稍后在某些功能中使用它，但没有任何反应/一切都按预期工作。

然后，我制作了一个名为 gapsFused 的 HashMap 的副本（我不知道这是否与我的问题有关）。

现在到了有趣的部分：在GenerateGeneLists 类中，我不使用remindGaps HashMap。

但是，函数 generateGeneListSNP 执行后，remindGaps 发生了变化！我也会为您发布代码，以便您可以更好地帮助我：

```
public GenerateGeneLists(EMBL_reader EMBLreaderReference,
           HashMap<String,ArrayList<String>> newSeq,
           HashMap<Integer,ArrayList<String>> gapsFused, File exists,
           ArrayList<GeneQualifier> GQlist, 
           HashMap<Integer,Integer> allMappedPositions) 
throws InterruptedException{
     this.EMBLreaderReference=EMBLreaderReference;
     this.newSeq=newSeq;
     //this.gapsFused=gapsFused;
     this.exists=exists;
     this.GQlist=GQlist;
     this.allMappedPositions=allMappedPositions;
     for (GeneQualifier GQ : this.GQlist){
        startlist.add(GQ.start);
        stoplist.add(GQ.stop);
        startMap.put(GQ.start,GQ);
    }
}

public HashMap<Integer,ArrayList<String>> generateGeneListSNP(
           HashMap<Integer,ArrayList<String>> gapsFused) 
throws IOException{
    File GQSNP = new File (exists+"/GQsnp.txt");
    BufferedWriter SNP = new BufferedWriter(new FileWriter(GQSNP));
    SNP.write("#Gene_start\tGene_stop\tlocus_tag\tproduct" + 
              "\tputative_SNP_positions(putative_changes)\n");
    HashMap<GeneQualifier,ArrayList<Integer>> GQreminder = 
        new HashMap<GeneQualifier,ArrayList<Integer>>();
    for (String s : newSeq.keySet()){
        ArrayList<String> blub = newSeq.get(s);
        char[] qrySeq = blub.get(0).toCharArray();
        char[] refSeq = blub.get(1).toCharArray();
        int start = Integer.valueOf(blub.get(2));
        int stop = Integer.valueOf(blub.get(3));
        for (int i=0;i<refSeq.length;i++){
            if (qrySeq[i]!=refSeq[i]&&qrySeq[i]!='-'&&qrySeq[i]!='.'){
                if (mismatchList.containsKey(start+i)){
                    ArrayList<Character> blah = mismatchList.get(start+i);
                    blah.add(qrySeq[i]);
                    mismatchList.put(start+i, blah);
                }
                else {
                    ArrayList<Character> blah = new ArrayList<Character>();
                    blah.add(qrySeq[i]);
                    mismatchList.put(start+i,blah);
                }
            }
            else if (qrySeq[i]!=refSeq[i]&&(qrySeq[i]=='-'||qrySeq[i]=='.')){
                if (!gapsFused.containsKey(start+i)){
                    ArrayList<String> qwer = new ArrayList<String>();
                    qwer.add(String.valueOf(qrySeq[i]));
                    gapsFused.put(start+i,qwer);
                }
                else {
                    ArrayList<String> qwer = gapsFused.get(start+i);
                    qwer.add(String.valueOf(qrySeq[i]));
                    gapsFused.put(start+i,qwer);
                }
                if (!deletionPositionsAndCount.containsKey((start+i))){
                    int count = 1;
                    deletionPositionsAndCount.put(start+i, count);
                }
                else {
                    int count = deletionPositionsAndCount.get(start+i);
                    count = count+1;
                    deletionPositionsAndCount.put(start+i, count);
                }
            }
        }
    }
    for (Integer a : mismatchList.keySet()){
        for (int i=0;i<startlist.size();i++){
            int start = startlist.get(i);
            int stop = stoplist.get(i);
            if (a>=start && a<=stop){
                GeneQualifier GQ = startMap.get(start);
                if (!GQreminder.containsKey(GQ)){
                    ArrayList save = new ArrayList<Integer>();
                    save.add(a);
                    GQreminder.put(GQ,save);
                }
                else {
                    ArrayList save = GQreminder.get(GQ);
                    save.add(a);
                    GQreminder.put(GQ,save);
                }
                break;
            }
        }
    }
    for (GeneQualifier GQ : GQreminder.keySet()) {
        ArrayList<Integer> save = GQreminder.get(GQ);
        int start = GQ.start;
        int stop = GQ.stop;
        String locus_tag = 
            GQ.geneFeatures.get("locus_tag").get(0).replace("\n", "");
        String product = 
            GQ.geneFeatures.get("product").get(0).replace("\n", "");
        SNP.write(start + "\t" + stop + "\t" + locus_tag + 
                  "\t" + product + "\t");
        boolean end = false;
        for (int i = 0; i < save.size(); i++) {
            if (i==save.size()-1) end=true;

            int posi = save.get(i);
            SNP.write(posi + "(");
            ArrayList<Character> mismatches = mismatchList.get(posi);
            for (int j = 0; j < mismatches.size(); j++) {
                char snipp = mismatches.get(j);
                if (j == mismatches.size() - 1) {
                    SNP.write(snipp + ")");
                } else {
                    SNP.write(snipp + ",");
                }
            }
            if (end == false){
                SNP.write(",");
            }
        }
        SNP.write("\n");
    }
    SNP.close();
    return gapsFused;
} 
```

如您所见，在这个类中没有使用remindGaps，但它仍然会发生变化。你知道为什么会这样吗？

我测试的是，如果我手动更改 gapsFused （第一个 HashMap 的副本），remindGaps 是否会发生变化。事实并非如此，所以我不认为复制过程出错（例如只指向另一个 HashMap 或引用它）。

为了解决这个问题，我非常感谢您的想法和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:16:38.130

您必须记住，在 Java 中，所有对象都作为引用传递。所以，当你这样做时：

```
ArrayList<String> newList = CM.remindGaps.get(i); 
```

您基本上将 newList 指向与remindGaps 地图中包含的相同列表。现在，即使您使用 gapsFused，对其值的任何更改都会影响内存中相同的底层列表——remindGaps 和 gapsFused 都指向该列表。

将您的复制代码更改为以下内容，看看它是否有所不同：

```
ArrayList<String> newList = new ArrayList<String>(CM.remindGaps.get(i)); 
```

通过这样做，您将创建一个 newList 将指向的新列表，因此将封装更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:17:50.477

您的代码非常长且难以阅读（主要是因为它不遵守 Java 命名约定），但我的猜测是您的问题来自于您的地图副本只是将 ArrayList 引用从一个地图复制到另一个地图：

```
HashMap<Integer, ArrayList<String>> gapsFused = new HashMap<Integer, ArrayList<String>>();
for (Integer i : CM.remindGaps.keySet()) {
    ArrayList<String> newList = CM.remindGaps.get(i);
    gapsFused.put(i, newList);
} 
```

在上面的代码中，您没有创建任何新列表。您只需将相同的列表存储在另一个地图中。如果你需要一个新列表，代码应该是：

```
Map<Integer, List<String>> gapsFused = new HashMap<Integer, List<String>>();
for (Integer i : CM.remindGaps.keySet()) {
    List<String> newList = new ArrayList<STring>(CM.remindGaps.get(i));
    gapsFused.put(i, newList);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:18:21.813

在不分析所有代码的情况下：

```
HashMap<Integer, ArrayList<String>> gapsFused = new HashMap<Integer, ArrayList<String>>();
for (Integer i : CM.remindGaps.keySet()) {
    ArrayList<String> newList = CM.remindGaps.get(i);
    gapsFused.put(i, newList);
} 
```

在此代码之后 gapFused 将包含作为remindGaps 条目副本的条目，因此这些条目将引用相同的对象（键和值）。因此，如果您在一个 Map 中添加或删除条目，它将对另一个 Map 没有影响，但如果您更改通过一个 Map 访问它的值，您将看到更改也通过另一个 Map 访问它（例如 remingGaps.get(1 ).add("你好"))。

您的代码中使用的名称“newList”令人困惑，因为它不是一个新列表，只是对现有列表的引用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:18:52.433

由于 the 的值`Map`是 an`ArrayList`并且您只是在做一个浅拷贝（意味着 new`Map`具有与第一个相同的引用`Lists`）`Map`并且对第二个映射中列表的更改将反映在第一个映射中。为避免这种情况，您需要在创建新的`Map`.

# javascript - 节点和懒惰：我怎么知道它什么时候完成？

> ID：11118169
> 
> 赞同：4
> 
> 时间：2012-06-20T11:03:41.790
> 
> 标签：javascript, node.js, iasyncresult

我需要逐行读取文件，并相应地更改变量。我通常会用 PHP 编写这个......但我决定接受挑战。

我写：

```
fs = require('fs');
Lazy = require('lazy');
path = require('path');

files = fs.readdirSync('.');
var software = {};

files.forEach( function(fileName){

  var m; 
  if( m = fileName.match(/^(.*)\.txt$/) ){
    name = m[1];

    console.log("Processing file: " + fileName);
    software[name] = {};
    console.log("Software 1: %j",software);

    var section = 'unset';
    new Lazy(fs.createReadStream(fileName)).lines.forEach(
      function(line){
        var m;
        line = line + '';
        if( m = line.match(/^([a-zA-Z_]*):$/)){
          section = m[1];
          software[name][section] = '';
          console.log("Switching to section " + m[1]);
          console.log("Software 2: %j",software);
        } else if (line == '.'){
          section = 'unset'
        } else if (line == ''){
          section = 'unset'
        } else { 
          console.log("LINE: " + line) ;
          software[name][section] = software[name][section] + line + "\n";
          console.log("Software 3: %j",software);
        }
      }

    );   
  }

});

console.log("Software 4: %j",software); 
```

除了代码非常丑陋且未优化之外，我遇到了问题，因为当最后一行打印时，“软件”变量尚未填充！我猜 Lazy 是异步的。所以，它基本上可以工作，但“在以后的某个时候”。这很好，但是......当填充软件变量的重要循环实际上完成时，我在哪里编写代码？！？

根据要求：要玩的数据！

只需创建“something.txt”并编写：

```
name:
Name 1
.

Option 1:
Value 1
.

Option 2:
Value 2
.

Option 3:
Multi
Line
Value
.

Another_section:
Again
. 
```

默克。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T11:30:19.027

库返回的 Lazy 实例是[EventEmitters](http://nodejs.org/docs/latest/api/events.html#events_class_events_eventemitter)，它会`pipe`在“一组”操作完成时发出调用的事件：

```
new Lazy(
  ...
).on('pipe', function() {
  // all done
}); 
```

修改代码以使用此事件会导致（唯一的更改在底部附近）：

```
fs = require('fs');
Lazy = require('lazy');
path = require('path');

files = fs.readdirSync('.');
var software = {};

files.forEach( function(fileName){

  var m;
  if( m = fileName.match(/^(.*)\.txt$/) ){
    name = m[1];

    console.log("Processing file: " + fileName);
    software[name] = {};
    console.log("Software 1: %j",software);

    var section = 'unset';
    new Lazy(fs.createReadStream(fileName)).lines.forEach(
      function(line){
        var m;
        line = line + '';
        if( m = line.match(/^([a-zA-Z_]*):$/)){
          section = m[1];
          software[name][section] = '';
          console.log("Switching to section " + m[1]);
          console.log("Software 2: %j",software);
        } else if (line == '.'){
          section = 'unset'
        } else if (line == ''){
          section = 'unset'
        } else {
          console.log("LINE: " + line) ;
          software[name][section] = software[name][section] + line + "\n";
          console.log("Software 3: %j",software);
        }
      }

    ).on('pipe', function() {
      console.log("Software 4: %j",software);
    });
  }

}); 
```

[编辑]要回答您有关我如何找到此信息的问题：

我确实检查了[项目的源文件](https://github.com/pkrumins/node-lazy/blob/83afb5e6ab991237fe1a0ee4f0b2ac2961eb5cdf/lazy.js)；我知道图书馆有一种`sum`方法可以链接到 Lazy 的实例，以便在最后总结所有内容；该[方法](https://github.com/pkrumins/node-lazy/blob/83afb5e6ab991237fe1a0ee4f0b2ac2961eb5cdf/lazy.js#L134-136)调用`foldr`的[代码，该方法的代码](https://github.com/pkrumins/node-lazy/blob/83afb5e6ab991237fe1a0ee4f0b2ac2961eb5cdf/lazy.js#L123-132)侦听一个被调用的事件，[在第 22 行](https://github.com/pkrumins/node-lazy/blob/83afb5e6ab991237fe1a0ee4f0b2ac2961eb5cdf/lazy.js#L22)`pipeName`默认为.`pipe`

# in-app-purchase - 应用内购买状态

> ID：11118171
> 
> 赞同：1
> 
> 时间：2012-06-20T11:03:48.307
> 
> 标签：in-app-purchase

我有个问题。我有一些应用内购买产品，都是消耗品。苹果拒绝了该应用程序，因为其中一些产品应该是非续订订阅产品。所以我创建了一个新产品作为非续订订阅，该产品的状态是“准备提交”，所以一切正常，但是我的 3 个产品必须是消耗品，当苹果拒绝该产品的状态是“开发者需要” Action”，但是当我更改了一些语言和价格时，状态变为“Waiting for Review”。现在，当我想上传新的二进制文件时，我只能选择订阅产品，列表中没有我的消耗品。当我仅选择订阅产品并上传二进制文件时，Apple 是否还会检查我的消耗品，当 Apple 接受该应用程序时它们是否可用？

问候

# vb.net - 无限的 For 循环

> ID：11118177
> 
> 赞同：7
> 
> 时间：2012-06-20T11:04:07.123
> 
> 标签：vb.net, loops

我想运行这样的东西：

```
For a = 0 To 4
   For b = a To 4
      For c = b To 4
        Console.WriteLine(a & b & c)
      Next
   Next
Next 
```

但我需要彼此创建 n 个循环。所以我创建了这个方法：

```
'iFrom = 0; iTo = 4; Depth = 3(loop count);
Private Sub Iterate(ByVal iFrom As Integer, ByVal iTo As Integer, ByVal Depth As Integer)
    For i = iFrom To iTo
       If Depth - 1 > 0 Then Iterate(iFrom, iTo, Depth - 1)

       'Do stuff here
    Next
End Sub 
```

从更高级别检索“i”值的最佳方法是什么？我应该将它们存储在数组中吗？还是有完全不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:12:34.260

您可以添加一个数组或类似结构作为参数，`Iterate()`并为每次调用`Iterate()`添加当前值`i`到数组中。

因此，您可以知道循环的深度和“父”循环的当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:59:42.473

在玩了这个方法之后，我终于找到了解决方案。这里是：

```
Private Sub Iterate(ByVal iFrom As Integer, ByVal iTo As Integer, ByVal Depth As Integer, ByVal iValues As Integer())
    For i = iFrom To iTo
        iValues(Depth - 1) = i
        If Depth - 1 > 0 Then
            Iterate(i, iTo, Depth - 1, iValues)
        Else                
            'Do stuff, in this case print the current iValues
            Console.WriteLine(String.Join("", iValues.Select(Function(x) x.ToString).ToArray))                
        End If
    Next
    Console.WriteLine()
End Sub

'Usage:
Dim iValueArray(Depth) As Integer
Iterate(0, 1, 2, iValueArray) 
```

# django - Django，在模型外键中按组过滤用户

> ID：11118179
> 
> 赞同：7
> 
> 时间：2012-06-20T11:04:15.627
> 
> 标签：django, admin, models

我有一个博客帖子模型，其中帖子的所有者是用户的外键。使用该模型，任何用户都可以拥有一篇博文。我想对其进行更改，以便只有某个组中的用户（我们称之为“博主”）才能拥有博客文章对象。理想情况下，它也应该出现在管理员中，我的意思是现在在博客文章管理员中，“所有者”菜单列出了所有用户，它应该只列出“博客”组中的用户。我如何用 Django 1.3 做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T11:29:40.893

`limit_choices_to`在 ForeignKey 定义中使用参数，如下所示：

```
author = models.ForeignKey("auth.User", limit_choices_to={'groups__name': "bloggers"}) 
```

# php - 使用 uasort 对数组中的元素进行排序

> ID：11118180
> 
> 赞同：0
> 
> 时间：2012-06-20T11:04:26.823
> 
> 标签：php, arrays, multidimensional-array

我有以下数组

```
$array = array(
        'note' => array('test', 'test1', 'test2', 'test3', 'test4'),
        'year' => array('2011','2010', '2012', '2009', '2010'),
        'type' => array('journal', 'conference', 'conference', 'conference','conference'),
    ); 
```

我想使用`uasort()`和数组对元素进行排序`year`。

我做了：

```
function cmp($a, $b) {
   if($a['year'] == $b['year']) return 0;
   return ($a['year'] < $b['year']) ? -1 : 1;
} 

uasort($array,'cmp');

print_r($array); 
```

但输出不正确：

```
Array
(
[type] => Array
    (
        [0] => journal
        [1] => conference
        [2] => conference
        [3] => conference
        [4] => conference
    )

[year] => Array
    (
        [0] => 2011
        [1] => 2010
        [2] => 2012
        [3] => 2009
        [4] => 2010
    )

[note] => Array
    (
        [0] => test
        [1] => test1
        [2] => test2
        [3] => test3
        [4] => test4
    )

) 
```

期望的输出：

```
Array
(
[type] => Array
    (
        [0] => conference
        [1] => journal
        [2] => conference
        [3] => conference
        [4] => conference
    )

[year] => Array
    (
        [0] => 2012
        [1] => 2011
        [2] => 2010
        [3] => 2010
        [4] => 2009
    )

[note] => Array
    (
        [0] => test2
        [1] => test
        [2] => test1
        [3] => test4
        [4] => test3
    )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:17:50.343

您的输入似乎错误。尝试这样的事情：

```
$array = array(
    array(
        'note' => 'test',
        'year' => 2011,
        'type' => 'journal',
    ),
    array(
        'note' => 'test1',
        'year' => 2010,
        'type' => 'conference',
    ),
    ...
); 
```

在您的示例中，比较函数将“note”数组与“year”和“type”数组进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:18:38.243

你需要[`array_multisort`](http://php.net/array_multisort)，而不是`uasort`

[如果输入采用Ronald](https://stackoverflow.com/a/11118361/620813)提到的形式，您的方法将起作用。

# weblogic - 无法加载驱动程序类：com.microsoft.sqlserver.jdbc.SQLServerDriver

> ID：11118183
> 
> 赞同：1
> 
> 时间：2012-06-20T11:04:40.070
> 
> 标签：weblogic, jdeveloper, oracle-adf

当我使用数据库向导对其进行测试时，我获得了成功。但是当我运行我的 jsf/adf 应用程序时出现以下错误::

```
 C:\Users\dev4\AppData\Roaming\JDeveloper\system11.1.1.3.37.56.60\o.j2ee\drs\sqlConnTestApp\ViewController_sqlWebApp.war
[12:55:18 PM] Wrote Enterprise Application Module to C:\Users\dev4\AppData\Roaming\JDeveloper\system11.1.1.3.37.56.60\o.j2ee\drs\sqlConnTestApp
[12:55:18 PM] Deploying Application...
<Jul 10, 2012 12:55:19 PM IST> <Warning> <J2EE> <BEA-160195> <The application version lifecycle event listener oracle.security.jps.wls.listeners.JpsAppVersionLifecycleListener is ignored because the application sqlConnTestApp is not versioned.> 
    <Jul 10, 2012 12:55:20 PM IST> <Error> <Deployer> <BEA-149265> <Failure occurred in the execution of deployment request with ID '1341905118356' for task '4'. Error is: 'weblogic.application.ModuleException: '
    weblogic.application.ModuleException: 
        at weblogic.jdbc.module.JDBCModule.prepare(JDBCModule.java:290)
        at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
        at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:507)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:41)
        at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:149)
        Truncated. see log file for complete stacktrace

    Caused By: weblogic.common.resourcepool.ResourceSystemException: Cannot load driver class: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at weblogic.jdbc.common.internal.JDBCUtil.parseException(JDBCUtil.java:301)
        at weblogic.jdbc.common.internal.ConnectionEnvFactory.loadDriver(ConnectionEnvFactory.java:75)
        at weblogic.jdbc.common.internal.ConnectionEnvFactory.<init>(ConnectionEnvFactory.java:131)
        at weblogic.jdbc.common.internal.ConnectionPool.initPooledResourceFactory(ConnectionPool.java:686)
        at weblogic.common.resourcepool.ResourcePoolImpl.start(ResourcePoolImpl.java:230)
        Truncated. see log file for complete stacktrace
    > 
    <Jul 10, 2012 12:55:20 PM IST> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application 'sqlConnTestApp'.> 
    <Jul 10, 2012 12:55:20 PM IST> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
    weblogic.application.ModuleException: 
        at weblogic.jdbc.module.JDBCModule.prepare(JDBCModule.java:290)
        at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
        at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:507)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:41)
        at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:149)
        Truncated. see log file for complete stacktrace

    Caused By: weblogic.common.resourcepool.ResourceSystemException: Cannot load driver class: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at weblogic.jdbc.common.internal.JDBCUtil.parseException(JDBCUtil.java:301)
        at weblogic.jdbc.common.internal.ConnectionEnvFactory.loadDriver(ConnectionEnvFactory.java:75)
        at weblogic.jdbc.common.internal.ConnectionEnvFactory.<init>(ConnectionEnvFactory.java:131)
        at weblogic.jdbc.common.internal.ConnectionPool.initPooledResourceFactory(ConnectionPool.java:686)
        at weblogic.common.resourcepool.ResourcePoolImpl.start(ResourcePoolImpl.java:230)
        Truncated. see log file for complete stacktrace
    > 
    [12:55:21 PM] ####  Deployment incomplete.  ####
    [12:55:21 PM] Remote deployment failed (oracle.jdevimpl.deploy.common.Jsr88RemoteDeployer)
    #### Cannot run application sqlConnTestApp due to error deploying to IntegratedWebLogicServer.
    [Application sqlConnTestApp stopped and undeployed from Server Instance IntegratedWebLogicServer] 
```

即使我在类路径中添加了 jar 文件。我使用的是 sqljdbc4.jar 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:25:06.760

如果在 IDE 中运行，请将`slqjdbc4.jar`或`sqljdbc.jar`库文件放在安装路径中 DefaultDomain 下的*lib 文件夹中。*-`IntegratedWLS`
`C:\Documents and Settings\user\Application Data\JDeveloper\system11.1.1.3.37.56.60\DefaultDomain\lib`

## 或者

`C:\Users\user\AppData\Roaming\JDeveloper\system11.1.1.3.37.56.60\DefaultDomain\lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T19:52:11.703

以前的答案对我来说效果很好，我正在使用带有集成 weblogic 的 Jdeveloper 12c，在我的情况下，我使用了 sqljdbc4 jar 文件，因为它提供了对 java 7 的支持：

" 如果在 IDE 中运行，请将 slqjdbc4.jar 或 sqljdbc.jar 库文件放在 IntegratedWLS 安装路径中 DefaultDomain 下的 lib 文件夹中。

```
C:\Documents and Settings\user\Application Data\JDeveloper\system11.1.1.3.37.56.60\DefaultDomain\lib - 
```

或者

```
C:\Users\user\AppData\Roaming\JDeveloper\system11.1.1.3.37.56.60\DefaultDomain\lib
". 
```

评论以防万一有人面临同样的问题。

# c++ - OpenGL中天空盒的程序/动态着色

> ID：11118186
> 
> 赞同：5
> 
> 时间：2012-06-20T11:04:46.917
> 
> 标签：c++, opengl, textures, texture-mapping

我一直在开发一个需要渲染程序天空的应用程序，我的意思是*天空*有一个昼夜循环，它根据模拟中的时间而变化。

我在过去的某个地方看到过一种方法，他们有这样的*颜色*图： ![在此处输入图像描述](../Images/826a31a9bbe8e672ef67ced94eabaf17.png)![在此处输入图像描述](../Images/ac88958fd5fbd0a1a877f57bcfa808e2.png)

现在取决于一些变量，例如时间，代码以某种方式扫描图像并使用一系列颜色作为天空的纹理。同样在*日出/日落*期间，代码将扫描为右侧的黄色、橙色、红色。

我不确定这叫什么，但我认为这就是我所追求的。如果有人能向我展示或指出将这种技术与 opengl 和 C++ 一起使用的示例，我会很高兴。

在旁注中，我的*天空盒*不是你的平均形状，它更像是一个*天空直角*，如下所示 ![在此处输入图像描述](../Images/443a13a604c8680990790af156979e4e.png)

*如您所见，天空直角*没有*顶部*，只有您看到的两个蓝色边会渲染天空（黑色是 BG）。我想知道是否有任何方法可以在这两个平原上渲染程序/动态夜空（它们之间的接缝也不明显）并且作为一个附带问题也有它，所以平原的顶部会淡出不管是*白天*还是*黑夜*

 ***非常感谢任何关于如何*扫描颜色图然后将其设置为 OpenGL/C++ 中的纹理的解释/示例。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:58:33.063

在此 url [http://golabistudio.com/siamak/portfolio.html](http://golabistudio.com/siamak/portfolio.html)下载最后一个项目（*特殊效果*） 。 c++ 源不可用，但着色器源在那里。 您需要做的是将 2 个纹理传递给您的着色器（在渲染平面时）。第一个纹理是您的标准天空盒纹理。第二个纹理是你的日/夜循环纹理。在最简单的情况下，它可以是高度为 1 的宽渐变纹理，从蓝色到深色。通过将第二个纹理传递给着色器，您可以在 x=time 的位置从中提取一个像素，并将颜色添加到您的漫反射纹理（第一个纹理）。

下一步是看日出。同样，这样做最简单，您必须创建一个宽度为 2 的纹理，一侧是水平日出像素，另一侧是夜间渐变：（宽度放大） [http://i.imgur.com/Rl8XJ.png](http://i.imgur.com/Rl8XJ.png)

现在有了漫反射纹理（第一个天空盒纹理）的传入 uv 坐标，您可以执行以下操作

```
 float2 uvpos;
  uvpos.y = IN.uv.y;//the position same as skybox texture
  uvpos.x = 0;//a sample from first horizontal pixel
  float4 colour1 = tex2D( gradientTexture, uvpos);
  uvpos.x = 0.5;//a sample from second horizontal pixel
  float4 colour2 = tex2D( gradientTexture, uvpos);

  float4 skycolor = lerp(colour1 , colour2, (your day time));
  skycolor.xyz += tex2D(skyTexture, IN.uv).xyz; 
```

这是非常简单的实现，但我认为应该能让你继续前进。***

# android - 如何在android中为已经创建的应用程序创建一个小部件

> ID：11118190
> 
> 赞同：0
> 
> 时间：2012-06-20T11:05:04.797
> 
> 标签：android, eclipse, android-intent, widget

如何在与应用程序相同的程序中创建小部件？
就像如何为具有相同功能的应用程序创建一个小部件？

这是活动文件：

```
 public class SmsActivity extends Activity {
    Button b1;
    EditText a;
    String b;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    a=(EditText)findViewById(R.id.e2);
    a.addTextChangedListener(new TextWatcher(){
@Override
public void afterTextChanged(Editable s) {
// TODO Auto-generated method stub
b=a.getText().toString();
}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,int after) {
// TODO Auto-generated method stub
}
    @Override
    public void onTextChanged(CharSequence s, int start, int before,int count) {
// TODO Auto-generated method stub  
}
    });
    b1= (Button) findViewById(R.id.b1);
    b1.setOnClickListener(new OnClickListener() {
    @Override
public void onClick(View v) {
// TODO Auto-generated method stub
try {
Intent sendIntent = new Intent();
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_TEXT, b);                 
sendIntent.setType("text/plain");
    startActivity(sendIntent);
} 
    catch (Exception e) {
Toast.makeText(getApplicationContext(),
"SMS failed, please try again later!",
     Toast.LENGTH_LONG).show();
e.printStackTrace();
}
    }
    });
}
    } 
```

我不想通过小部件进行更新。我只是希望小部件与应用程序完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:11:39.833

您不能使用小部件进行输入，因此您不能拥有 EditText 字段。小部件仅用于输出。

# php - 如何限制对文件的访问，以便只有所有者可以访问？

> ID：11118193
> 
> 赞同：0
> 
> 时间：2012-06-20T11:05:16.857
> 
> 标签：php, security, file-upload

我正在寻找与此类似的问题的答案：[保护用户的文件被访问，以便只有所有者可以访问？](https://stackoverflow.com/q/6642473/483204)

> 我正在用 php 编写一个 Web 应用程序，用户可以在其中上传自己的文件或图像，但我怎样才能保护这些文件不被所有者以外的其他人访问。

并且这个问题被接受的解决方案是好的，所以我将通过一个特殊的脚本“代理”文件请求，该脚本将检查是否允许用户使用这个文件。

但我想在不查询数据库的情况下做到这一点。所以，我想，应该可以通过文件的位置或名称来检测用户是否可以访问文件。

由于特定位置，我无法将所有用户文件放入名称中包含用户 ID 的文件夹中，所以我考虑文件名，*其中部分名称将包含用户 ID*。所以文件名可以是这样的：

**1** _pic.jpg、**2** _pic.png、**1** _pic.gif 等，其中名称开头的数字 = 用户 ID

然后我将能够轻松地解析文件名，并将那里的用户 ID 与会话中的用户 ID 进行比较，并以这种方式检查用户是否是文件的所有者。

您如何看待这种方法，它有什么缺点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:57:29.637

只要您只需要检查尝试访问该文件的用户是否是最初上传该文件的用户，您的方法就可以了。确保无法通过文档根目录**访问**该目录，以便在您的脚本或 .htaccess 文件失败时文件仍然安全。还要确保不同用户的文件名不会发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:56:42.357

我无法想象这个函数会给数据库增加那么多负载。但是，如果这是一个问题，那么创建一个可以访问数据库的安全登录系统。每个会话只需要执行一次，因此服务器负载并不大。用户登录后，在会话变量中设置一个值，从那时起可以使用该值，告诉脚本用户可以访问文件。

# iphone - 如何从 iphone photoLibrary 获取照片总数。？

> ID：11118196
> 
> 赞同：0
> 
> 时间：2012-06-20T11:05:32.130
> 
> 标签：iphone, ios, photolibrary

我想计算照片库中的照片数量。目前，我能够从 photoLibrary 中获取照片并逐个添加到 myApp 的 Document 目录中。但我想要的是，一次将所有照片从 photoLibrary 保存到 myApp 的 Document 目录中。这就是为什么我需要 photoLibrary 中的照片计数。我使用 UIImagePickerControllerSourceTypePhotoLibrary 从 iPhone photoLibrary 中检索照片。

任何帮助将不胜感激..

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:34:00.397

为此使用 ALAssetsLibrary：

```
 int imgCount = 0;
 self.assetsLibrary = [[ALAssetsLibrary alloc] init];
 dispatch_queue_t dispatchQueue =  dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
 dispatch_async(dispatchQueue, ^(void) {
 [self.assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
 [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index,
  __block BOOL foundThePhoto = NO;
 if (foundThePhoto){ *stop = YES;
 }
 BOOL *stop) {
 /* Get the asset type */ 
 NSString *assetType = [result valueForProperty:ALAssetPropertyType];
 if ([assetType isEqualToString:ALAssetTypePhoto]){ NSLog(@"This is a photo asset");
 foundThePhoto = YES; *stop = YES;
 /* Get the asset's representation object */ 
 ALAssetRepresentation *assetRepresentation = [result defaultRepresentation];
 /* We need the scale and orientation to be able to construct a properly oriented and scaled UIImage out of the representation object */
 CGFloat imageScale = [assetRepresentation scale];
 UIImageOrientation imageOrientation = (UIImageOrientation)[assetRepresentation orientation];
 dispatch_async(dispatch_get_main_queue(), ^(void) {
 CGImageRef imageReference = [assetRepresentation fullResolutionImage];
 /* Construct the image now */ 
 UIImage    *image = [[UIImage alloc]   initWithCGImage:imageReference
 scale:imageScale orientation:imageOrientation];
 //Write image to doument directory 
 imgCount ++;
 }
 });
 } failureBlock:^(NSError *error) {
 } }];
 NSLog(@"Failed to enumerate the asset groups."); }];
 })

 NSLog(@"Total Image Count %d",imgCount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T07:13:07.723

下面的代码块计算所有视频和照片：

```
__block int videoCount = 0;
__block int photoCount = 0;
ALAssetsLibrary *assetLibrary = [[ALAssetsLibrary alloc]init];
[assetLibrary
 enumerateGroupsWithTypes:ALAssetsGroupAll
 usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
     if (group == nil) {
         // enumeration complete
         return;
     }
     int total = group.numberOfAssets;
     [group setAssetsFilter:[ALAssetsFilter allVideos]];
     int groupVideoCount = group.numberOfAssets;
     videoCount += groupVideoCount;
     photoCount += total - groupVideoCount;
 }
 failureBlock:^(NSError *error) {
     // Handle error
 }]; 
```

# linux - 在 makefile 中，将虚假目标声明为通配符

> ID：11118197
> 
> 赞同：1
> 
> 时间：2012-06-20T11:05:37.227
> 
> 标签：linux, makefile, wildcard

我想将我的通配符目标声明为假，但假不支持通配符：

我的生成文件：

```
%.config:
        gcc <<compile>> 
```

我希望用户能够使用我的 makefile 来编译项目，使用特定的配置文件：

```
make something.config
make something_else.config 
```

显然，我需要我的目标是假的，因为目标文件存在，但只需写：

```
.PHONY: %.config 
```

不起作用。我在[这里](http://makepp.sourceforge.net/1.19/makepp_tutorial.html)看到 makeapp 支持另一种语法，这将有所帮助：

```
$(phony %.config): ... 
```

但我只能使用make，不能使用makeapp。

有没有办法用make来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:31:37.250

这些是相互矛盾的目标。虚假目标是与真实文件不对应的目标。在您的情况下，该文件存在，但它并不是真正的目标。

我建议不要使用配置文件的名称作为目标。相反，构建一个基于以下之一的系统：

```
make something_else
make CONFIG=something_else.config 
```

# javascript - 为什么影子在错误的地方？(三.js)

> ID：11118199
> 
> 赞同：7
> 
> 时间：2012-06-20T11:05:39.387
> 
> 标签：javascript, three.js

我有一个绿色的飞机，上面有一个红色的立方体。光是定向光。

![阴影](../Images/ddfe5e15f30a5d7ffa7ebe8b6d188efd.png)

为什么影子在错误的地方？代码：http: [//jsfiddle.net/pD8dn/](http://jsfiddle.net/pD8dn/)

* * *

编辑：

如果我更改，`light.shadowBias`那么平面上的阴影是正确的，但立方体上的阴影不正确：

![阴影](../Images/495439da6a86a369424f28754e876f85.png)

[http://jsfiddle.net/pD8dn/4/](http://jsfiddle.net/pD8dn/4/)

提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T15:31:14.617

这是阴影贴图最常见的人工制品之一，它被称为“Peter Panning”。

一种解决方法是为深度测试添加一些小偏差：

```
light.shadowBias = 0.001; 
```

需要针对每个场景调整偏差的确切值（不幸的是，有时您无法摆脱所有地方的所有伪影，调整阴影贴图更像是艺术而不是科学）。

这适用于您的示例：

[http://jsfiddle.net/pD8dn/2/](http://jsfiddle.net/pD8dn/2/)

# php - Twitter oAuth - 请求令牌

> ID：11118203
> 
> 赞同：3
> 
> 时间：2012-06-20T11:06:11.330
> 
> 标签：php, wordpress, twitter, oauth, twitter-oauth

我正在使用[http://wordpress.org/extend/plugins/simple-twitter-connect/](http://wordpress.org/extend/plugins/simple-twitter-connect/)在 wordpress 博客上使用 twitter。但我对请求令牌有疑问。

这是我的代码：

```
$to = new TwitterOAuth($options['consumer_key'], $options['consumer_secret']);
$tok = $to->getRequestToken();

function getRequestToken() {
    $r = $this->oAuthRequest($this->requestTokenURL());
    $token = $this->oAuthParseResponse($r);
    $this->token = new OAuthConsumer($token['oauth_token'], $token['oauth_token_secret']);
    return $token;
} 
```

但是在点击登录按钮后，Twitter 会返回：

'哇！此页面没有请求令牌。这是我们要求使用您的 Twitter 帐户的应用程序所需的特殊密钥。

网址是[https://twitter.com/oauth/authenticate?oauth_token=](https://twitter.com/oauth/authenticate?oauth_token=)

据推测，缺失值是问题所在。

我希望然后允许登录用户从该站点发推文，但我什至还没有解决上述问题。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T23:33:39.427

您是否尝试过登录 Twitters 开发者网站 ( [https://dev.twitter.com/](https://dev.twitter.com/) ) 来获取您的访问令牌？如果没有，您需要创建一个允许从您的站点访问 twiiter 的应用程序。开发人员网站上的指示很容易遵循。

# intellij-idea - 如何在 IntelliJ 中删除代码格式中不必要的空白行？

> ID：11118204
> 
> 赞同：77
> 
> 时间：2012-06-20T11:06:12.957
> 
> 标签：intellij-idea, phpstorm, webstorm, jetbrains-ide, goland

是否可以使用 Intellij IDEA 中的代码格式删除空/空白行？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-06-20T11:28:17.890

是的。`CTRL`可以在设置菜单 ( ++ `ATL`)中配置空行数`S`：`File -> Settings -> Editor -> Code Style -> Java(or Scala or whatever your language is) -> Blank Lines`

![空行配置](../Images/964fd8d9b7d00ae9ac9562f3cba59984.png)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-11-11T08:33:40.990

*   文件 >> 设置 >> 编辑器 >> 代码样式 java >> 空行选项卡

*   您应该在代码标签中更改为0（如图），当按下格式快捷键时，它将删除所有不必要的空白行：**ctrl + alt + L**

[![在此处输入图像描述](../Images/e68310f9e2da323e60e28af7c434abd6.png)](https://i.stack.imgur.com/6MxWn.png)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-04-03T12:14:09.317

您也可以使用正则表达式选项查找和替换`^(?:[\t ]*(?:\r?\n|\r))+`。它搜索文件中的所有空行。您只需将其替换为空

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-08-03T05:34:14.397

我使用正则表达式从代码中删除多余的空行。这是说明

*   打开**查找和替换**对话框。使用快捷键`CTRL`++ 。`SHIFT``R`
*   在搜索框中输入`^(?:[\t ]*(?:\r?\n|\r)){2,}`。这将搜索两个或更多空行。
*   在替换框类型中`\n`。这将替换为一个空行。

[![在此处输入图像描述](../Images/11f7719ae847c310dfcd1f275b5b3e53.png)](https://i.stack.imgur.com/EIfyG.png)

*   打开**重新格式化代码**对话框，然后单击**运行**。使用快捷键`CTRL`++ 。`ALT``L`

这适用于所有 JetBrains IDE。使用屏幕截图作为参考。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-08-27T08:59:05.127

以防万一它帮助某人使用较新版本的 Intellij，在 Intellij IDEA 2016.2.4 中它是`File -> Other Settings -> Default Settings -> Editor -> Code Style -> Java(or Scala or whatever your language is) -> Blank Lines`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-14T18:49:06.083

对于那些试图删除文件末尾的空白行的人，这已成为[2020 年 8 月](https://youtrack.jetbrains.com/issue/IDEA-119281#focus=Comments-27-4326233.0-0)的一项功能。

配置此操作的正确位置是在设置|编辑|常规|保存时。勾选“删除尾随空行”

# ruby-on-rails - 如何使用 RSpec 测试 ajax POST 请求？

> ID：11118205
> 
> 赞同：19
> 
> 时间：2012-06-20T11:06:16.637
> 
> 标签：ruby-on-rails, rspec, xmlhttprequest

我只想在控制器规范上测试 ajax 请求。产品代码如下。我正在使用设计进行身份验证。

```
class NotesController < ApplicationController
  def create
    if request.xhr?
      @note = Note.new(params[:note])
      if @note.save
        render json: { notice: "success" }
      end
    end
  end
end 
```

规格如下。

```
describe NotesController do
  before do
    user = FactoryGirl.create(:user)
    user.confirm!
    sign_in user
  end

  it "has a 200 status code" do
    xhr :post, :create, note: { title: "foo", body: "bar" }, format: :json
    response.code.should == "200"
  end
end 
```

我希望响应代码是 200，但它返回 401。我想这一定是因为 rspec 抛出的请求缺少authenticity_token 或其他东西。我该如何存根？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-21T09:30:20.187

回答我自己的问题。我发现那`format: :json`是错误的。只需将其删除即可。就像下面这样：

```
it "has a 200 status code" do
  xhr :post, :create, note: { title: "foo", body: "bar" }
  response.code.should == "200"
end 
```

我很抱歉所有的大惊小怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:15:50.133

我将 format: :json 移动到 params hash 中，它工作正常，用 json 响应。

```
describe NotesController do
  before do
    user = FactoryGirl.create(:user)
    user.confirm!
    sign_in user
  end

  it "has a 200 status code" do
   xhr :post, :create, { note: { title: "foo", body: "bar" }, format: :json } 
   response.code.should == "200"
  end
end 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-20T11:41:01.630

您可能遇到过 CSRF 错误，请尝试禁用 ajax 调用的 CSRF 验证，例如

```
# In your application_controller.rb
def verified_request?
  if request.xhr?
    true
  else
    super()
  end
end 
```

# c# - 同步单个 IMAP 文件夹

> ID：11118209
> 
> 赞同：1
> 
> 时间：2012-06-20T11:06:36.323
> 
> 标签：c#, interop, outlook

我正在尝试编写一个应用程序，该应用程序向用户提供来自共享 IMAP 文件夹树中选定文件夹的邮件头列表。该应用程序的用户使用 Outlook 2007 或 2010，并将共享 IMAP 文件夹树映射到他们的帐户。

我可以使用 Outlook 互操作*访问*文件夹并遍历邮件项目，如下所示：

```
Outlook.Application outlook = new Outlook.Application();
Outlook._NameSpace ns = outlook.GetNamespace("MAPI");
Outlook.Folder folder = MyFolderFinder(...);

foreach (var item in folder.Items)
{
    if (item is Outlook.MailItem)
    {
        Outlook.MailItem mailItem = item as Outlook.MailItem;
        // do something with mailItem
    }

} 
```

不幸的是，这种方法似乎无法同步文件夹，因此除非用户使用 Outlook 手动“更新文件夹”，否则他们可能会看到一个陈旧的列表。

有没有办法使用 Outlook 互操作以编程方式同步单个 IMAP 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:13:00.173

使用新的邮件接收事件，我认为你可以做到这一点。

```
private void ThisApplication_Startup(object sender, System.EventArgs e)
{
    this.NewMail += new Microsoft.Office.Interop.
        Outlook.ApplicationEvents_11_NewMailEventHandler(
        ThisApplication_NewMail);
}

void ThisApplication_NewMail()
{
} 
```

**参考： http:** [//msdn.microsoft.com/en-us/library/ms268998 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms268998%28v=vs.80%29.aspx)

# c# - 使用 C# 访问命令行

> ID：11118210
> 
> 赞同：1
> 
> 时间：2012-06-20T11:06:42.863
> 
> 标签：c#, command-line

我需要从 C# 应用程序中访问命令行。如果我使用“args”参数，我找不到检测不匹配双引号的方法。

我目前正在处理的应用程序有一个选项来加密您通过命令行传递给它的字符串。

例如。

```
program.exe -encrypt somestring 
```

结果是：

```
EZs/6rWxvJ82+VE8unJ0Xw== 
```

现在，如果用户输入：

```
program.exe -encrypt somestring extra characters 
```

它忽略“somestring”之后的所有内容（您仍然可以通过“args”参数访问其余值）。

您可以使用双引号轻松解决此问题：

```
program.exe -encrypt "somestring extra characters" 
```

当然，如果你想使用嵌入式引号，你可以用“\”转义它们：

```
program.exe -encrypt "somestring \"extra\" characters" 
```

当用户输入如下内容时会出现问题：

```
program.exe -encrypt "somestring extra characters 
```

或者：

```
program.exe -encrypt somestring ex"tra characters 
```

该程序将完全忽略双引号，这不是用户所期望的。我想检测这样的情况并通知用户不匹配/未转义的引号，否则他们最终可能会得到错误字符串的加密版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T11:15:04.453

这就是命令行将参数传递给 C# 程序的方式。你无法改变这一点。但是，您可以访问整个命令参数字符串并自己执行验证。

[MSDN：Environment.CommandLine 属性](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:10:07.963

只需手动执行：检查参数后是否只有一个参数`-encrypt`，如果没有，则下一个参数以双引号开头，最后一个参数以双引号结尾。如果这些都没有发生，则会向用户抛出自定义错误。

当之后的下一个参数`-encrypt`以双引号开头并且最后一个参数以双引号结尾时，您自己使用`Array.Copy`或类似的东西构建字符串。

# api - 扩展 Magento REST API

> ID：11118212
> 
> 赞同：3
> 
> 时间：2012-06-20T11:06:44.480
> 
> 标签：api, rest, magento, extend

我在互联网上找不到任何东西，所以我希望这里有人能回答我的问题。

是否可以为 Magento 扩展 REST API，如果可以，是否有人提供有关如何执行此操作的示例或指南？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:52:59.130

Magento REST Api 确实可以扩展。我的网站上有一篇博客文章展示了如何开始执行此操作[http://web.archive.org/web/20130512072025/http://magepim.com/news/Extending-the-Magento-REST-API -part-1_13](http://web.archive.org/web/20130512072025/http://magepim.com/news/Extending-the-Magento-REST-API-part-1_13)

它仅涵盖基本设置，但希望它能给您一个起点。

# java - 仅接受来自我的应用程序的连接

> ID：11118214
> 
> 赞同：1
> 
> 时间：2012-06-20T11:06:48.853
> 
> 标签：java, sockets

我正在开发一个 java 项目，我们有一个服务器和一个客户端应用程序。服务器接受连接并通过套接字编程将请求的数据发送给客户端。

一切正常，但是当上传并在服务器上工作时，我会从未知 ip 获得连接。并且此应用程序将在许多国家/地区使用，因此不会将特定 IP 列入白名单。

有没有办法禁止/拒绝这些 ip，以便服务器使用套接字只接受来自我的应用程序的连接。请求连接到服务器时是否可以发送自定义数据，以便它告诉服务器只接受这些连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:22:17.817

[您描述的选择性接受属于身份验证和授权](https://en.wikipedia.org/wiki/Authentication)的范围。您需要将客户端连接到：

1.  向您表明自己的身份，以便您确定是否允许他们访问服务器。这可以通过多种方式实现，例如 IP 或 MAC 地址白名单、[客户端证书](https://stackoverflow.com/questions/4421536/java-ssl-clientside-authentication-with-self-signed-certificates)、[基本/摘要式身份验证](https://en.wikipedia.org/wiki/Basic_access_authentication)或其他一些自定义身份验证方案。
2.  一旦允许访问，您可以通过授权规则进一步缩小连接客户端可以在系统中执行的操作。

我建议你看看像[Apache Shiro](http://shiro.apache.org/)这样的库，它会为你做一些繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:09:16.773

接受入站连接后，您可以`Socket.getInetAddress()`在返回的 Socket 上使用来检索并随后验证 IP。

如果 IP 不被允许，则使用`Socket.close()`关闭不需要的连接。

**编辑：**
验证当然可以基于 IP 以外的东西。连接打开后，您可以使用其流传输任意数据以识别客户端，例如在身份验证失败后关闭连接。

但是，这样做您应该考虑有人能够拦截您的通信的可能性。换句话说，使用安全连接是有意义的。

我不知道在打开（接受）连接之前可以在 Java 中对客户端进行身份验证的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:22:41.070

如果你的服务器和客户端应该被验证，你也应该考虑使用证书。

以下是更多信息：

*   [java类](http://docs.oracle.com/javase/6/docs/api/javax/security/cert/Certificate.html)
*   [另一个问题](https://stackoverflow.com/questions/3392216/java-sending-certificate-through-socket)

# entity-framework - 在 EntityFramework (EF) 中，如何仅从导航属性绑定 ID？

> ID：11118215
> 
> 赞同：0
> 
> 时间：2012-06-20T11:06:48.857
> 
> 标签：entity-framework

让我们举一个简单的例子。假设我有以下内容：

```
public class Category
{
   public int CategoryID {get;set;}
}

public class Product
{
   public int ProductID {get;set;}
   public int CategoryID {get;set;}
   public Category Category {get;set;}
} 
```

英孚

```
modelBuilder.Entity<Product>().HasRequired(req=>req.Category).WithMany().Map(m=>m.MapKey("CategoryID")); 
```

我是否必须始终“包含”类别才能将 CategoryID 分配给我的产品？它生成的没有.Include 的SQL（例如db.Products.All()）实际上将返回CategoryID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:24:58.860

您需要 .Include 来填充类别导航属性（否则它将为空）。CategoryID 属性将始终被填充

# eclipse - Eclipse QVT 操作编辑器中没有内容辅助

> ID：11118219
> 
> 赞同：0
> 
> 时间：2012-06-20T11:07:02.690
> 
> 标签：eclipse, emf, qvt

我正在编写一个 QVT 模型来模拟从 ecore 到 DDS 模型的转换。我有 Ecpise 3.7.2 和最后一个 QVT Operational 插件 3.1.0v2。问题是内容辅助没有向我显示元模型实体的属性。例如，在这个虚拟示例中，我没有关于 self.name 的建议：

```
modeltype OPENDDS uses 'http://www.opendds.org/modeling/schemas/OpenDDS/1.0';
modeltype ECORE uses 'http://www.eclipse.org/emf/2002/Ecore';

transformation Ecore2DDS(in inModel : ECORE, out outModel : OPENDDS) {
    main() {
        inModel.rootObjects()[EPackage]->map ePackage2Model();
    }     

    mapping EPackage::ePackage2Model() : DcpsLib{
        name := self.name; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:11:28.307

转换声明中有错误。main 和 mappings 不能在转换体内！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T10:56:29.677

转换、模型类型定义和 main 是 qvt 中的主要概念。您的转换从 main 方法开始，调用第一个映射。您的问题是因为您尝试在转换规范中添加主要方法和映射声明。

# c++ - 为什么联合不允许其元素具有用户定义的构造函数？

> ID：11118220
> 
> 赞同：2
> 
> 时间：2012-06-20T11:07:03.513
> 
> 标签：c++, visual-c++, unions, c++03

当第一个结构有构造函数时，如何使第二个结构工作？我得到错误：

```
error C2620: member 'test::teststruct::pos' of union 'test::teststruct::<unnamed-tag>' has user-defined constructor or non-trivial default constructor 
```

编码：

```
struct xyz {
    Uint8 x, y, z, w;
    xyz(Uint8 x, Uint8 y, Uint8 z) : x(x), y(y), z(z) {}
};
struct teststruct {
    union {
        Uint32 value;
        xyz pos; // error at this line.
    };
}; 
```

我可以使用一个函数来初始化 xyz 结构，但它不会慢很多吗？更不用说：我有大量的结构，我需要创建自己的函数，其前缀为 init_xyz() 等，这并不好。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T11:15:08.973

可能是为了避免这种情况：

```
struct A {
    Uint8 a;
    A() : a(111) {}
};

struct B {
    Uint8 b;
    B() : b(2222) {}
};

struct teststruct {
    union {
        A aValue;
        B bValue;
    };
}; 
```

应该发生什么，A 和 B 构造函数都将尝试以不同的方式初始化相同的内存。与其有一些规则说哪个会赢，不如说不允许用户定义的构造函数可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:36:40.713

来自 C++03，9.5 联合，第 162 页

联合可以具有成员函数（包括构造函数和析构函数），但不能具有虚拟 (10.3) 函数。联合不应有基类。联合不应用作基类。具有非平凡构造函数 (12.1)、非平凡复制构造函数 (12.8)、非平凡析构函数 (12.4) 或非平凡的类的对象复制赋值运算符（13.5.3、12.8）不能是联合的成员，也不能是此类对象的数组

# mod-rewrite - Apache - 无循环重写 url

> ID：11118221
> 
> 赞同：1
> 
> 时间：2012-06-20T11:07:05.950
> 
> 标签：mod-rewrite, url-rewriting, apache2

好吧，我再说一遍标题中所说的话，我找不到一种方法来重写我所有的网址而不会出现循环。我尝试了很多选项，但找不到一种避免重定向循环的方法：

```
RewriteRule ^/(.+)  http://example.com/example/index.php$1  [R,L]                                                                                                                         
RewriteRule ^/?(.*) /var/www/example/index.php$1 [R]                                                                                                                              
RewriteRule ^/(.*)$ %{DOCUMENT_ROOT}/example/index.php$1 [R]  
RewriteRule ^$ /example/ [L] 
```

下面是我的目录 apache-conf

```
<Directory /var/www/example>
  Options FollowSymLinks
  DirectoryIndex index.php
  Order allow,deny
  Allow from all
</Directory> 
```

我理解为什么它会循环，尽管我无法想象（要么找到！）做我想做的事的好规则。

**编辑**

基本上，我将 OVH 托管的 example.fr 重定向到 IP 虚拟机。这会涉及我的问题吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:12:43.250

```
 RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/example/
  RewriteRule (.*) /example/index.php/$1 [L,R] 
```

这会将 /example/ 之外的任何内容重定向到 /example/index.php，最后添加原始路径

编辑：因此，如果您希望将所有内容重定向到，则需要在项目名称和项目名称`/project_name/index.php`中交换单词“ *example* ” ...`RewriteCond``RewriteRule`

PS：`RewriteCond`需要这里的行来确保重写不会循环（因此，`/example/contact`当您尝试此操作时，url 会保留）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:15:42.403

此规则不应导致循环

```
RewriteRule ^/(.+)  http://example.com/example/index.php$1  [R,L] 
```

这条规则根本不会做任何事情

```
RewriteRule ^/?(.*) /var/www/example/index.php$1 [R] 
```

对于此规则，您应该添加 RewriteCond

```
RewriteCond %{REQUEST_URI} !^/example/
RewriteRule ^/(.*)$ %{DOCUMENT_ROOT}/example/index.php$1 [R] 
```

这可以

```
RewriteRule ^$ /example/ [L] 
```

# image - iText - 使用块添加外部图像

> ID：11118224
> 
> 赞同：6
> 
> 时间：2012-06-20T11:07:22.347
> 
> 标签：image, pdf, itext, paragraph

我是 iText 的新手，遇到了一个关于在段落中添加外部图像的真正有趣的案例。事情是这样的：

```
Document document = new Document();  
PdfWriter.getInstance(document, new FileOutputStream("out2.pdf"));  
document.open();  
Paragraph p = new Paragraph();  
Image img = Image.getInstance("blablabla.jpg");  
img.setAlignment(Image.LEFT| Image.TEXTWRAP);  
// Notice the image added to the Paragraph through a Chunk
p.add(new Chunk(img2, 0, 0, true));  
document.add(p);  
Paragraph p2 = new Paragraph("Hello Worlddd!");  
document.add(p2); 
```

给我图片和“Hello Worlddd！” 下面的字符串。然而，

```
Document document = new Document();  
PdfWriter.getInstance(document, new FileOutputStream("out2.pdf"));  
document.open();  
Paragraph p = new Paragraph();  
Image img = Image.getInstance("blablabla.jpg");  
img.setAlignment(Image.LEFT| Image.TEXTWRAP);  
// Notice the image added directly to the Paragraph
p.add(img);
document.add(p);  
Paragraph p2 = new Paragraph("Hello Worlddd!");  
document.add(p2); 
```

给我图片和字符串“Hello worlddd！” 位于图片的右侧和上方的一行。

这种差异背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T06:29:58.630

您描述的行为是因为在第二个代码片段中 Paragraph**没有调整其前导**，而是调整其宽度。如果在第二个片段中添加该行

```
p.add("Hello world 1") 
```

就在之前

```
p.add(img) 
```

你会在左边看到字符串“Hello world 1”，在字符串“Hello Worlddd!”上方一点。如果您输出 p (System.out.println(p.getLeading()) 的前导，您可以看到它是一个较小的数字（通常为 16），而不是图像的高度。

在第一个示例中，您使用带有 4 个参数的块构造函数

```
new Chunk(img, 0, 0, true) 
```

最后（真实）说调整前导，所以它按您的预期打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:41:20.733

如果直接添加图像，则会考虑其对齐属性（使用 setAlignment() 设置）。所以图像在左边（Image.LEFT），文本环绕（Image.TEXTWRAP）。

如果您将图像包装在一个块中，它的处理方式就好像它是一块文本一样。因此，特定于图像的对齐属性会丢失。这导致文本位于图像下方。

如果您尝试 Image.RIGHT，这将变得更加明显。第一个示例中没有任何变化：图像仍然在左侧。在第二个示例中，图像向右对齐，文本在其左侧环绕。

# asp.net-mvc - 从 ASP.NET MVC 返回包含 javascript 函数的 JSON

> ID：11118225
> 
> 赞同：4
> 
> 时间：2012-06-20T11:07:25.687
> 
> 标签：asp.net-mvc, json

我有一个类似 JSON 的数据结构（我不想更改），它当前是由一个`.aspx`吐出 javascript 的文件生成的。看起来 .NET 午餐吃了 jQuery，然后吐了……

我想将整个事情重写为返回 a 的 MVC 控制器操作`JsonResult`，基本上是通过构建一个匿名对象并将其传递给`return Json(data)`.

但是，当我要构建的 JSON 对象上的某些属性实际上是 JavaScript 函数时，我无法弄清楚如何构建 C# 对象。我怎么做？

例子：

我想创建以下类似 JSON 的对象：

```
{
    id: 55, 
    name: 'john smith', 
    age: 32,
    dostuff: aPredefinedFunctionHandle,
    isOlderThan: function(other) { return age > other.age } 
} 
```

您会看到，我希望能够为我在其他地方（`.js`通常在文件中）定义的 JavaScript 函数指定两个函数句柄，并且我想定义新的内联函数。

我知道如何在 C# 中构建该对象的一部分：

```
var data = new { id = 55, name = "john smith", age = 32 };
return Json(data); 
```

有什么好方法可以做剩下的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:08:04.937

**.NET 中没有映射到 javascript 函数的内置类型。**因此，您可能必须创建一个表示函数的自定义类型，并且您必须自己进行序列化。

像这样的东西。。

```
public class JsFunction
{
   public string FunctionString{get; set;}
}

new
{
    id = 55, 
    name = 'john smith', 
    age = 32,
    dostuff = new JsFunction{ FunctionString = "aPredefinedFunctionHandle" },
    isOlderThan = new JsFunction{ FunctionString = "function(other) { return age > 
                    other.age" } 
} 
```

在序列化时，您可能必须检查值的类型并将其`FunctionString`直接写入响应中而无需双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:18:16.867

JSON 明确排除了函数，因为它并不意味着仅是 JavaScript 数据结构（尽管名称中有 JS）。所以我们不应该在 JSON 中包含函数名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:39:00.057

JSON 不包括函数。听起来您想将数据封装到一个类中。像下面这样的东西怎么样：

```
function Person(data) {
   this.id = data.id;
   this.name = data.name;
   this.age = data.age;
   this.isOlderThan = function(other) { return this.age > other.age };

} 
```

# java - 如何从java中的静态初始化块返回

> ID：11118226
> 
> 赞同：8
> 
> 时间：2012-06-20T11:07:25.997
> 
> 标签：java, static, initialization

我想从静态块返回。

看起来 return 和 break 语句不起作用。有没有其他选择。

我知道不好的解决方法可能是创建一个标志并检查标志是否继续。

我了解初始化块不是用于进行计算，而只是用于类加载期间的基本初始化。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T11:11:22.037

将代码委托给私有静态方法：

```
static {
    initialize();
}

private static void initialize() {
    foo();
    if (someCondition) {
        return;
    }
    bar();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T11:09:46.383

而不是`return`只使用将条件代码包装在`if`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T14:03:56.567

静态初始化器没有复杂的业务，所以这可能是个坏主意（即使您不购买 SESE）。

实现回报的最小方法是使用标记中断。

```
static {
    init: {
        ...
           break init;
    }
} 
```

它们非常罕见，通常出现在嵌套`for`循环中。这种新颖性可能会让读者知道正在发生一些有点狡猾的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:12:01.500

您不能从静态初始化程序块返回。无处可归。但这不应该是必要的。您应该能够将代码重组为“单入口，单出口”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:13:18.163

您不能从静态块返回，但最好使用其他一些函数来执行您的逻辑并返回到块。

# java - Maven 错误：无法找到或加载主类 org.codehaus.plexus.classworlds.launcher.Launcher

> ID：11118237
> 
> 赞同：142
> 
> 时间：2012-06-20T11:08:26.933
> 
> 标签：java, windows, maven

我`maven-3.0.4`在*Windows 7*上安装了最新的：
安装详细信息如下：
安装路径：

```
C:\apache-maven-3.0.4 
```

环境变量是：

```
M2_HOME C:\apache-maven-3.0.4\apache-maven\src  
JAVA_HOME C:\Program Files\Java\jdk-1.7.0_04 
```

添加的路径变量是：

```
%M2_HOME%\bin;%JAVA_HOME%\bin; 
```

在命令窗口中它显示如下：

```
C:\>java -version  
java version "1.7.0_04"  
Java(TM) SE Runtime Environment (build 1.7.0_04-b22)  
Java HotSpot(TM) Client VM (build 23.0-b21, mixed mode, sharing)  
C:\>mvn -version  
Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher 
```

这是我PC上安装的唯一maven版本，许多博客上提到的删除以前的`M2_HOME`环境变量的解决方案无效。

我已阅读并尝试了博客中提供的所有解决方案，例如：

*   [甲骨文博客](https://blogs.oracle.com/sreekanth/entry/java_lang_noclassdeffounderror_org_codehaus)，
*   [堆栈溢出问题](https://stackoverflow.com/questions/8139115/new-maven-install-mvn-version-java-lang-classnotfoundexception)，
*   [另一个堆栈问题](https://stackoverflow.com/questions/6305795/problems-setting-up-maven)，
*   [一些博客](http://www.permeance.com.au/web/terry.mueller/home/-/blogs/maven2-reports-java-lang-noclassdeffounderror:-org-codehaus-classworlds-launcher)，

但仍然无法得到它。我可能在这整件事中缺少什么？提前致谢。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2014-03-10T20:19:26.330

我也遇到了这个问题，找到[**了这篇**](http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main-class)文章。对于 Maven3，将我的环境变量名称从 M2_HOME 更改为 M3_HOME 就可以了。我在运行 OSX 10.9 和 JDK 1.7 的 Mac 上。希望这可以帮助。

注意：如果已设置，请删除 M2_HOME。例如：`unset M2_HOME`

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-09-26T09:15:56.453

即使问题已得到解答，我想补充一点，如果您遇到上述错误，请确保您已下载**二进制文件**。

仅当您是高级用户并且知道如何处理它时，才应下载源文件。

我有相当一部分人下载了错误的文件，老年人和青少年

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-11-13T18:08:40.157

我遇到了同样的问题，并且能够通过仔细重做环境变量来解决它：

*   M2_HOME
*   M2
*   JAVA_HOME

此外，我将它们全部**设为系统**变量，而不是像 Maven 指令中所说的用户变量。当你

```
echo %Path% 
```

确保您可以看到完全扩展的 %M2% 和 %JAVA_HOME% 变量，即：

```
C:\Users\afairchild>echo %Path%
C:\Program Files\Apache Software Foundation\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0_09\bin; [etc] 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2013-03-06T00:40:15.420

尽管安装是由 apt-get 完成的，但在两个不同的 Ubuntu 12.04 安装中出现了这个问题。问题是 M2_HOME。

固定：

```
export M2_HOME=/usr/share/maven 
```

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2017-12-25T14:33:23.697

我相信这个错误是由于从 Maven 站点下载 SRC 而不是 BINARY 引起的。请确保下载二进制 zip。

因为下面的路径，只有在下载 SRC 时才会得到：

> M2_HOME C:\apache-maven-3.0.4\apache-maven\src

[![在此处输入图像描述](../Images/1e496dd3138f56c3f9e379cddcbd60b1.png)](https://i.stack.imgur.com/AJaKj.jpg)

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2013-03-27T16:19:12.863

听起来您根据路径信息安装（提取）源文件而不是二进制文件。尝试安装二进制文件并遵循其他海报的答案。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-08-09T20:36:34.083

好吧，我遇到了这个问题，在看到这篇文章，特别是 khmarbaise 的回答后，我注意到这`M2_HOME`是

```
D:\workspace\apache-maven-3.1.0-bin\apache-maven-3.1.0\bin 
```

然后我把它改成

```
D:\workspace\apache-maven-3.1.0-bin\apache-maven-3.1.0 
```

我想提一下我使用的是 Windows 7 (x64)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-02-16T04:11:53.950

更高版本的 Maven 的解决方案是直截了当的。我在 OS X ElCap、10.11.6 上并升级到 Maven 3.3.9。我对错误“”有同样的问题`Could not find ...org.codehaus.plexus...`。[此处](http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main)提供的链接在 McKamey 的评论中提供了解决方案 - 只需删除 M2_HOME ( `unset M2_HOME`)。一旦我尝试过，一切都按预期工作。

这可以通过访问`Maven install page`：“将创建的目录 apache-maven-3.3.9 的 bin 目录添加到 PATH 环境变量”来确认——根本没有提到 M2_HOME 或 M3_HOME。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-07-16T18:22:51.810

对于大多数 Maven 设置问题，例如“无法找到或加载主类...”，请从以下步骤开始，看看是否可以解决：

*   确保您解压缩了正确的存档（BINARY 存档而不是 SOURCE 存档）
*   删除所有与 Maven 相关的用户和系统变量（例如 M2_HOME、M2_OPTS 等）
*   确保已设置 JAVA_HOME 系统变量（例如“C:\Program Files\Java\jdk1.8.0_172”）
*   确保将 java bin 位置添加到“路径”系统变量中（例如“%JAVA_HOME%\bin”）
*   确保将 maven bin 位置添加到“路径”系统变量中（例如“C:\MyInstalls\apache-maven-3.5.4\bin”）

然后...

*   验证 java 是否设置（在命令提示符处：java -version）
*   验证 maven 是否已设置（在命令提示符处：mvn --version）

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-06-20T11:12:57.710

您应该将 M2_HOME 的位置更改为以下内容：

```
set M2_HOME=C:\apache-maven-3.0.4\apache-maven 
```

此外，JDK 的安装看起来更像是 JRE 而不是 JDK。对于 Maven，您需要 JDK 而不是 JRE。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-05-15T18:49:47.573

我在我的 mac OSX 上遇到了类似的问题。经过一系列的反复试验，我终于解决了它。

我的`~/.bash_profile`看起来像这样

```
export M2_HOME=/Users/xyz/maven-3.x/bin
export PATH=$PATH:$M2_HOME 
```

当我尝试`echo M2_HOME`从终端尝试时，它向我显示了正确的路径，但是当我尝试触发任何 maven 命令时`mvn clean`，`mvn install`它总是会出现同样的问题

> 无法找到或加载主类 org.codehaus.plexus.classworlds.launcher.Launcher

我通过将我更改`M2_HOME`为此解决了这个问题

```
export M2_HOME=/Users/xyz/maven-3.x
export PATH=$PATH:$M2_HOME/bin 
```

瞧！它开始工作了！只需将位置`/bin`从 M2_HOME 移动到前面`PATH`

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-08-14T23:12:35.873

打开一个新终端并执行以下操作

```
M2_HOME=/Users/macbook/apache-maven-3.6.1 //Set where maven is
M2=$M2_HOME/bin                          //Set home as bin
export PATH=$M2:$PATH                   //Place the new path 
```

然后输入

```
mvn -version 
```

您可以将其设置`./bash_profile`为每次运行终端时自动执行此操作

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-08-01T10:42:37.087

安装二进制版本的 Maven 修复了问题

apache-maven-3.6.1-bin.zip

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-08-03T09:20:12.500

只需确保您已下载二进制 zip 存档 (apache-maven-3.5.0-bin.zip) 而不是源 zip 存档。然后将创建的目录apache-maven-3.5.0的bin目录添加到PATH环境变量中。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-03-07T06:20:41.680

我遇到过同样的问题。我有 Windows xp 框，当我`mvn -version`在命令行提示符下键入时，我收到了可怕的错误消息

```
"Exception in thread "main" java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/launcher/Launcher" 
```

我确认我的`M2_HOME`变量设置为 Maven 安装在 pc 上的路径，并且`echo %path%`确认 Maven 在我的路径中。

当我偶然发现我的解决方案时，我一直在寻找解决方案几个小时（我说我的解决方案是因为我知道这可能不是每个遇到相同错误的人的解决方案）。

`M2_HOME`我复制了分配给我的变量的路径。我打开一个 cmd 窗口并输入 cd 并粘贴我从`M2_HOME`变量中获得的路径。那时我知道路径是正确的，因为路径显示在窗口中。此时我输入了 dir 命令，令我惊讶的是，我得到了错误 File Not Found。

我通过资源管理器去了那条路径，果然有文件存在。我注意到这些文件夹已淡出，但我可以访问它们并查看每个文件夹中的文件（我在我的电脑上有管理员权限）。我查看了 Maven 父文件夹的属性，发现隐藏框被选中。我删除了检查并成功应用并再次尝试了我的 dir 命令。

接下来我`mvn –version`再次尝试了该命令，但这次我得到了预期的结果。

```
C:\>mvn -version
Apache Maven 3.0.3 (r1075438; 2011-02-28 11:31:09-0600)
Maven home: C:\Program Files\apache-maven-3.0.3
Java version: 1.5.0_16, vendor: Sun Microsystems Inc.
Java home: C:\Java\jdk1.5.0_16\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows xp", version: "5.1", arch: "x86", family: "windows" 
```

最后，我创建了一个 jar 和 war 文件，我的 Web 应用程序在本地 Tomcat 上成功运行。

我希望这对你们中的一些人有所帮助。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-06-20T12:43:09.350

除了@khmarbaise 指出的内容外，我认为您输入了错误的 JAVA_HOME。如果您已经安装在默认位置，那么 jdk 和 1.7.0_04 之间应该没有“-”（连字符）。所以它会是

```
JAVA_HOME C:\Program Files\Java\jdk1.7.0_04 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-03-03T09:07:43.010

我发现我的centOS中的这个问题是由“Oracle Java is replace by gcj”引起的，将默认java更改为“Oracle Java”后，问题得到解决。

```
alternatives --config java

There are 2 programs which provide 'java'.

  Selection    Command
-----------------------------------------------
*  1           /usr/lib/jvm/jre-1.5.0-gcj/bin/java
 + 2           /usr/java/jdk1.7.0_67/bin/java 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-12-17T19:18:07.657

对于可能遇到此问题的其他人，不要忘记检查 ~/.mavenrc 的 M2_HOME 或 JAVA_HOME 设置。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-12-02T12:27:42.223

尝试下载二进制 zip（例如 Maven 3.0.5 (Binary zip)）而不是官方 maven 站点中的完整源代码。还要确保命令行能够识别 java 和 javac 命令。我注意到 Maven Source zip 没有在 lib 文件夹中包含任何库，但是 Binary zip 有它们 + 在引导文件夹中它有 plexus-classworlds-2.4.jar。也许问题在于没有这些库。无论如何它对我有帮助，所以我的 M2_HOME 是：C:\Program Files\Java\apache-maven-3.0.5，在 PATH 我放：C:\Program Files\Java\apache-maven-3.0.5\bin。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-01-17T09:44:18.030

我也面临类似的问题。但就我而言，我在路径变量中使用了 apache-maven-3.3.3-src 文件夹。后来我更正了文件夹 apache-maven-3.3.3-bin 的正确路径。这解决了这个问题。我不是说这里报告的错误相同，但这样你也可以得到这个错误并纠正它。这就是我在这里想说的。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-08-20T06:34:03.710

看起来你已经安装了源文件（因为`src`只有源文件，我们不需要它）。尝试从 [那里安装](https://maven.apache.org/download.cgi)**二进制文件**。[然后按照那里](http://www.mkyong.com/maven/how-to-install-maven-in-windows/)的描述设置环境变量 。这对我有用。我相信它也对你有用。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-11-06T03:42:01.537

我认为你下载了错误的版本。我刚刚遇到这个问题，搜索和搜索后没有任何方法工作。最后发现我下载的maven是[Source zip archive](http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/source/apache-maven-3.3.3-src.zip)。在我更改为[Binary zip archive](http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.zip)后，一切都会好起来的。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-07-06T08:58:28.443

`bin`如果您将 ONLY目录复制到安装目录，即使环境变量设置正确，也可能出现完全相同的错误。它可以`which`很好地工作，新手会卡住。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-03-11T07:47:54.867

这对我有用：

1.  删除环境变量中的所有 Mavin 引用
2.  从 mavin下载**二进制文件**
3.  将其解压缩到您想要的位置，例如：C:\apache-maven-3.6.0
4.  转到环境变量并添加到**系统**变量路径“C:\apache-maven-3.6.0\bin”
5.  以管理员身份启动命令提示符
6.  检查版本： mvn -v

命令结果：

Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T20:41:47+02:00) Maven 主页：C:\apache-maven-3.6.0\bin..

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-01-20T17:08:59.757

在可能有用但可能过于症状的答案旁边，这里有一个试图帮助找出问题原因的答案。

Maven 是一个命令行 java 工具。这意味着，它不是独立的二进制文件，它是 java`.jar`的集合，由 jvm 解释（`java.exe`在 windows 上，`java`在 linux 上）。

该`mvn`命令是一个脚本。在 windows 上，它是一个名为的脚本`mvn.cmd`，而在 linux 上，它是一个 shell 脚本。因此，如果你写: `mvn install`，会发生什么：

1.  为实际调用脚本调用命令解释器（`/bin/sh`或）`cmd.exe`
2.  此脚本设置所需的环境变量
3.  最后，它使用包含 maven 功能的所需类路径调用 java 解释器。

问题在于（2）。幸运的是，这个脚本很简单，非常简单。对于 java 程序员来说，调试大约 20 行的脚本应该不是什么大麻烦，即使它有点陌生。

在 linux 上，您可以调试 shellscripts，将`-x`标志提供给您的 shell 解释器（很可能是`bash`）。在 Windows 上，您必须找到其他方法来调试`cmd.exe`脚本。所以，代替`mvn install`，给出命令`bash -x mvn install`。

结果如下：

```
+ '[' -z '' ']'
+ '[' -f /etc/mavenrc ']'
+ '[' -f /home/picsa/.mavenrc ']'
+ cygwin=true
+ darwin=false 
```

……没那么多东西……

```
+ MAVEN_PROJECTBASEDIR='C:\peter\bin'
+ export MAVEN_PROJECTBASEDIR
+ MAVEN_CMD_LINE_ARGS=' '
+ export MAVEN_CMD_LINE_ARGS
+ exec '/cygdrive/c/Program Files/Java/jdk1.8.0_66/bin/java' -classpath 'C:\peter/boot/plexus-classworlds-*.jar' '-Dclassworlds.conf=C:\peter/bin/m2.conf' '-Dmaven.home=C:\peter' '-Dmaven.multiModuleProjectDirectory=C:\peter\bin' org.codehaus.plexus.classworlds.launcher.Launcher
Fehler: Hauptklasse org.codehaus.plexus.classworlds.launcher.Launcher konnte nicht gefunden oder geladen werden 
```

最后，您可以轻松测试哪个环境变量坏了，并且您可以非常轻松地修复您的脚本（或根据需要设置它）。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-11-19T15:55:20.903

我在 Ubuntu 上的 OpenJDK 11 上使用 Maven 3.5.4 时遇到了这个问题。Ubuntu 上的 OpenJDK 11 实际上仍然是 JDK10：

```
$ ls -al /etc/alternatives/java
lrwxrwxrwx 1 root root 43 Aug 24 04:54 /etc/alternatives/java -> /usr/lib/jvm/java-11-openjdk-amd64/bin/java
$ java --version
openjdk 10.0.2 2018-07-17
OpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3)
OpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3, mixed mode) 
```

我从 Oracle 将 OpenJDK 安装到 /opt/jdk-11.0.1 并像这样运行 Maven：

```
JAVA_HOME=/opt/jdk-11.0.1 mvn 
```

它现在就像一个魅力。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-04-02T05:39:45.273

我的系统（Mac）中也遇到了以下错误

**错误：无法找到或加载主类 org.codehaus.plexus.classworlds.launcher.Launcher**

在做了一些随机浏览后，我发现了链接“ [http://maven.apache.org/install.html](http://maven.apache.org/install.html) ”，上面写着“JAVA_HOME”应该设置为“/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/内容/主页/jre”。

当我在“.bash_profile”中更改“JAVA_HOME”时，“mvn”命令开始工作，但“javac -version”命令停止工作。

当我输入“javac -version”命令时，出现以下错误

**无法在“/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/javac”中找到可执行文件 (-1)**

因此，我在“.bash_profile”中将“JAVA_HOME”回滚到“/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home”，并在“mvn”脚本的顶部添加了以下行

**导出 JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre**

现在“mvn”和“javac”命令都可以正常工作，但是仔细观察mvn脚本后，我无法区分以下命令

**/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java** -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6.0 。jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1 - Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native -Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/ bin org.codehaus.plexus.classworlds.launcher.Launcher

**/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/java** -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6 。0.jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6。 1 -Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native-Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6。 1/bin org.codehaus.plexus.classworlds.launcher.Launcher

在上面的第一个命令导致以下错误

**错误：无法找到或加载主类 org.codehaus.plexus.classworlds.launcher.Launcher**

而第二个命令工作正常。请注意，上述两个路径都有“java”命令，一个来自“jre”，另一个来自“jdk”

其他全局变量如下“.bash_profile”

导出 M2_HOME=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1

导出 PATH=$PATH:$M2_HOME/bin

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-11-26T09:42:09.500

我对surefire插件本身有疑问。回到 2.6 版对我有用。版本 2.18/20/22.1 给了我错误。现在我尝试了surefire插件的3.0.0-M1版本，它可以工作。

所以版本 2.6 和 3.0.0 之间的surefire plgin 有问题。我假设有一些硬编码的默认值不应该。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-12-03T19:31:20.040

对我来说，这听起来很有趣，它有助于重新启动`eclipse`......

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2013-09-22T10:43:22.617

这是设置 Maven 时的常见问题。您需要做的就是以下内容：-

1.  M2_HOME :- D:\apache-maven-2.0.11
2.  M2 :- D:\apache-maven-2.0.11\bin
3.  路径：- 附加 ;%M2%

M2_HOME & M2 :- 需要声明为系统变量而不是 USER / ADMIN 变量。

路径：- 这可以是系统变量或 USER / ADMIN 变量 [PATH]。最好是系统变量。

一旦你仔细设置了这 3 个变量，你就可以验证 Maven 的安装，如下所示。

在 CMD 提示符下：-

* * *

C:\Documents and Settings\ADMIN>mvn --version

* * *

输出 ：-

* * *

Apache Maven 2.0.11 (r909250; 2010-02-12 11:25:50+0530) Java 版本：1.6.0_22 Java 主页：C:\Program Files\Java\jdk1.6.0_22\jre 默认语言环境：en_US，平台编码：Cp1252 操作系统名称：“windows xp” 版本：“5.1” 架构：“x86” 系列：“windows”

谢谢。

# iphone - 在装有 iOS 4.2.1 的第二代 iPod Touch 上从 Xcode 4.3.3 运行 iOS-App

> ID：11118241
> 
> 赞同：0
> 
> 时间：2012-06-20T11:08:32.613
> 
> 标签：iphone, xcode, ios4, ipod-touch

我正在尝试在 arm6 iDevice 上运行应用程序，但在方案中看不到或运行它。

[![在此处输入图像描述](../Images/0e7f8b89be6a10010bde28e9cbbe2dcf.png)](https://i.stack.imgur.com/x9wn8.png)

[我认为这与使用 Xcode 4.3.1 和 IOS 无法在 iPhone 4.2.1 上运行应用程序](https://stackoverflow.com/questions/9823142/cant-run-app-on-iphone-4-2-1-with-xcode-4-3-1-and-ios)中的问题几乎相同，但这个答案对我不起作用。

# java-me - 使用命令返回 j2me 中的上一页

> ID：11118246
> 
> 赞同：1
> 
> 时间：2012-06-20T11:09:24.627
> 
> 标签：java-me, lwuit, j2mepolish

在我的项目中，我将打开一个，`List`然后单击该项目的`List`新项目，然后单击 go to next 另一个`Form`项目。`List``Form`

这些`Forms`并没有什么不同`Forms`，它们是一个单一的`Form`，但它们被添加到一个中`Container`，并且作为单击`List`项目它是可视化的。问题是我`Button`对每个都有一个支持，`Container`但是当我需要返回上一页时，我必须一直编码。

我需要一个解决方案，这样只有一个返回`Command`，通过单击它应该转到当前页面的上一页。只需要一个`Command`，通过单击它可以转到其上一页。

我知道如何`COMMAND.BACK`在 lcdui 中对此进行编码，但需要 LWUIT 的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:38:18.330

我不会用 a`Button`来做这些事情。我的建议是，使用 a`Command`并实现一个开关或一些 if else 来设置不同的后退功能。所以：

```
int pressed = 0;
Command c = new Command("Back"){

        public void actionPerformed(ActionEvent evt) {
            super.actionPerformed(evt);
            switch(pressed){
              case 0:
                //Functionality for first case
              case 1:
                //Functionality for second case
              case 2:
                //Functionality for third case
            }

        }
    };
form.addCommmand(c); 
```

每次按下`Container`. 并在必要时重置它。

# c# - asp.net 的 Maker-Checker 功能

> ID：11118249
> 
> 赞同：1
> 
> 时间：2012-06-20T11:09:37.447
> 
> 标签：c#, asp.net, .net

我正在创建一个制造商检查器功能，制造商创建一个记录并由检查器审查。在检查员批准之前不会创建记录。如果检查器拒绝它，那么它应该被回滚。

我知道的想法是创建一个临时记录表，该表将保存要创建的记录，直到检查员批准为止。但是此方法将创建 2X 数量的表以涵盖所有功能。

实现这一目标的最佳实践是什么？是否可以使用 Windows 工作流程来完成。(世界自然基金会)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:13:28.070

只需在您的数据库中添加几列。

*   状态：记录的当前状态（等待批准、已批准、已拒绝等）
*   制造商：用户名或 id
*   检查器：用户名或 id
*   检查员批准/拒绝时间

或者，如果您有很多这样的表需要制作者/检查者工作流程，您可以添加另一个表并将所有其他记录引用到该表。

Windows 工作流基础也可以为您工作，但我个人觉得很难使用

如果您想要对记录进行修订，您还需要更多列。如修订号和 IsLastRevision。

我不知道您使用什么来访问数据库和修改记录。如果您使用的是 OR/M，您可能会覆盖 Update 并对所有 saves 进行修订。例如

```
void Update(Entity e )
{
 Entity n = new Entity();
  // Create a copy of e ( With AutoMapper for example or manually )
 e.Current = true;
 e.RevisionNumber += 1;
 Update(e);
 Insert(n);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:18:27.893

在这种情况下，您将有两个选择：

创建两张相同的表格，一张用于批准的数据，一张用于请求的数据。

或者

您可以使用 TypeID（请求/批准）为用户创建两行。在这种情况下，用户将创建一个 typeID = requested 的请求，当批准者批准该请求时，您只需用新的记录覆盖当前批准的记录，否则只需将请求的行标记为拒绝状态。

# php - 使用 jquery 通过 ajax 传递文本区域值

> ID：11118251
> 
> 赞同：0
> 
> 时间：2012-06-20T11:09:42.470
> 
> 标签：php, jquery, ajax

我正在尝试通过 ajax 将两个值传递给 php 文件

我的代码是这样的

**PHP**：

```
<?php 
$name="Name with spaces";
?> 
```

**JS**：

```
var yourMessage = $("input#message").val();   
$.ajax({
    type: "POST",
    url: "send_message.php",
    data: "yourName="+ <?=$name?> +"&yourMessage="+ yourMessage,
    success: function(html){........ 
```

它工作正常，但

我遇到了两个问题。

1.  名称在 php 变量中并且它有空格，它会给出空格错误，但我需要在**send_message.php上使用带有空格的相同名称**

2.  yourMessage 正在从中获取价值`<textarea>`，如果有任何返回键，我还需要传递**send_message.php**。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:13:39.103

更换

```
data: "yourName="+ <?=$name?> +"&yourMessage="+ yourMessage, 
```

和

```
data: {"yourName":"<?=$name?>","yourMessage":yourMessage}, 
```

可能会解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T11:20:09.183

我认为最好的方法是序列化数据。它减少了许多问题。试试这个

```
<?php 
$name=serialize('Name with spaces');
?> 

$.ajax({
type: "POST",
url: "send_message.php",
data: 'yourName='+ <?php echo $name?> +'&yourMessage='+ yourMessage, 
```

呼应名字。我想这会对你有所帮助。

# .net - .net 中 RsaEncryptionCookieTransform 类背后的强度和算法

> ID：11118253
> 
> 赞同：1
> 
> 时间：2012-06-20T11:09:59.090
> 
> 标签：.net

任何人都可以让我知道`RsaEncryptionCookieTransform`.net中类使用的强度和算法的详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:57:00.467

只需检查 MS 文档，它是 AES256：

[http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.rsaencryptioncookietransform.aspx](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.rsaencryptioncookietransform.aspx)

# python - 在python中将特殊字符转换为原始形式

> ID：11118254
> 
> 赞同：1
> 
> 时间：2012-06-20T11:10:00.380
> 
> 标签：python, string

假设我有一个字符串，例如：

```
>>>  stri = "日本"
>>>  res = stri
>>>  res
'\xe6\x97\xa5\xe6\x9c\xac' 
```

现在我想将结果转换`res`回`"日本"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:12:46.870

（假设您在 UTF-8 控制台上使用 Python 2.x）：

没有任何东西被转换，也没有必要把任何东西转换回来；你看到的是字符串的内部表示。试试看`print`。

```
>>>  stri = "日本"
>>>  stri
'\xe6\x97\xa5\xe6\x9c\xac'
>>> print(stri)
日本 
```

澄清：

如果您在控制台中输入 Python 变量的名称，控制台将打印该`repr`变量的名称。如果您想以人类可读的形式打印变量，请`print`改用。变量的存储方式没有区别，因此无需转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:24:20.213

这是预期的行为 - 控制台不会在 unicode 中打印变量。如果你真的把它打印出来，你会看到正确的字符仍然存在。控制台在打印出来之前自动对每个变量使用 repr。您可以通过执行 print(repr...)) 来验证自己，如下例所示：

```
>>> stri = "日本"
>>> stri
'\xe6\x97\xa5\xe6\x9c\xac'
>>> print stri
日本
>>> print repr(stri)
'\xe6\x97\xa5\xe6\x9c\xac'
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:26:09.973

就像蒂姆说的，角色还没有被转换。

[这篇文章](http://pythoncentral.org/encoding-and-decoding-strings-in-python-2-x/)应该可以帮助您了解正在发生的事情

# c# - 包含数学表达式的 XPath

> ID：11118255
> 
> 赞同：1
> 
> 时间：2012-06-20T11:10:01.673
> 
> 标签：c#, xpath, linq-to-xml

以下行：

```
string cellData = d.XPathSelectElement(cellSelector).Value; 
```

引发异常，说明“XPath 表达式评估为意外类型 System.Double。”

CellSelector 包含：“./Units * ./product/Cost”

XElement d 中的数据是：

```
<LineItem>
  <product>
    <ProductId>22</ProductId>
    <ProductName>Car Cleaning</ProductName>
    <Cost>26.02</Cost>
  </product>
  <Units>2</Units>
</LineItem> 
```

在此示例中，我需要该行的输出为“52.04”，更理想的是，我希望它为“£52.04”。

XPathExpression 必须是什么样子才能实现这一点？

我尝试将表达式更改为“String(./Units * ./product/Cost)”，但这会生成异常“XPath 表达式评估为意外类型 System.String”。我希望能奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:12:51.430

**[`XPathSelectElement(expr)`](http://msdn.microsoft.com/en-us/library/bb351355.aspx)期望 XPath 表达式的求值结果`expr`是一个元素**（如方法名称所示）。

**在您的情况下，您需要使用另一种方法，该方法允许*任何*XPath 表达式**（不仅是选择元素的表达式）作为参数。

**[`XPathEvaluate()`](http://msdn.microsoft.com/en-us/library/bb341675.aspx)**就是这样一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:34:58.057

[`XPathEvaluate`](http://msdn.microsoft.com/en-us/library/bb341675)似乎是你想要的：

```
var cellData = xml.XPathEvaluate("./Units * ./product/Cost");
cellData = string.Format("£ {0}", cellData);
// result: cellData == "£ 52,04" 
```

# asp.net - 在每个请求上检查 Request.ServerVariables["HTTP_REFERER"]

> ID：11118257
> 
> 赞同：1
> 
> 时间：2012-06-20T11:10:04.560
> 
> 标签：asp.net

我正在使用此代码来检查请求是否来自页面，如果不是则重定向到某个地方。

```
string referer = Request.ServerVariables["HTTP_REFERER"];
            if (string.IsNullOrEmpty(referer))
            {
                Response.Redirect("/UnauthorizedAccess.aspx");
            } 
```

它正在工作，我不知道它是否是完美的解决方案。但是我正在检查我的一个页面的加载事件。我怎样才能让它检查每个请求。我应该为我的所有页面检查这个。还有这是一个很好的方法。任何人都可以指出正确的方向。欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:14:40.483

如果您有希望在一堆页面的 OnLoad 上运行的逻辑。您可能应该创建一个`BasePage`派生自`Page`并具有内部逻辑的逻辑。然后，您想要该逻辑的所有页面都可以从而`BasePage`不是常规的`Page`.

另一种方法是使用[母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)

**注意：**阅读 OP 后的附加评论。使用母版页时要注意的一件事是，母版页的 Page_Load 事件发生在内容页的 Page_Load 事件之后。换句话说，生命周期是这样的：

母版页**初始化**事件

内容页面**初始化**事件

内容页面**加载**事件

母版页**加载**事件

如果您的 response.redirect 将用户移动到具有相同母版页（以及相同的“验证”检查）的另一个页面，您可能会发现自己陷入了无限循环:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:18:32.277

如果您有很多页面，使用这些通用代码，那么一种可能的解决方案是创建您自己的`MyPage`类作为标准类的子`Page`类。在你的`MyPage`你可以使用类似的东西：

```
Page_Load(object sender, EventArgs e)
{
string referer = Request.ServerVariables["HTTP_REFERER"];
            if (string.IsNullOrEmpty(referer))
            {
                Response.Redirect("/UnauthorizedAccess.aspx");
            }
base.Page_Load(sender, e);
} 
```

然后，您的任何页面都可以从这个自己的`MyPage`类而不是 .NET 的标准类继承。

通过这种方式，公共代码驻留在一个地方。如果有任何更改，您必须仅在此处进行修改。

或者另一种可能性，您可以考虑使用母版页。

# jquery - IE9 中的 jQueryUI datepicker 中是否存在某种错误？

> ID：11118260
> 
> 赞同：2
> 
> 时间：2012-06-20T11:10:37.227
> 
> 标签：jquery, jquery-ui, internet-explorer-9

```
 <link rel="Stylesheet" type="text/css" href="jquery-ui-1.8.21.custom/css/ui-lightness/jquery-ui-1.8.21.custom.css" />
    <script type="text/javascript" src="jquery-ui-1.8.21.custom/js/jquery-1.7.2.min.js" ></script>
    <script type="text/javascript" src="jquery-ui-1.8.21.custom/js/jquery-ui-1.8.21.custom.min.js" ></script>
    <script type="text/javascript">
        $(function () {
            $("#txtdate").datepicker(); 
        }); 
    </script> 
```

在 FF 中工作正常，但在 Windows Server 2008 R2 上的 IE9 上显示日期选择器，但我无法在输入文本框中选择和输入日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:12:33.820

I had this too. The problem is a result of IE Enhanced Security Configuration. You can turn it off by following these directions: [http://4sysops.com/archives/how-to-disable-internet-explorer-enhanced-security-configuration-ie-esc-in-windows-server-2008/](http://4sysops.com/archives/how-to-disable-internet-explorer-enhanced-security-configuration-ie-esc-in-windows-server-2008/)

Just keep in mind that you are taking a calculated risk by turning it off.

# java - 与 Joda-Time 一起倒计时圣诞节

> ID：11118262
> 
> 赞同：5
> 
> 时间：2012-06-20T11:11:11.720
> 
> 标签：java, datetime, time, jodatime, countdown

我正在尝试实施[Joda-Time](http://www.joda.org/joda-time/)来倒计时圣诞节，但到目前为止我很震惊。我尝试了 java.util.Date 并且大多数 StackOverflow 问题和答案都建议使用 Joda-Time。但我无法让它工作。有些代码给出了不同的答案。

这是我尝试过的一些代码，

```
DateTime now = new DateTime();
DateTime christmas = new DateTime(2012, 12, 25, 8, 0, 0, 0);
Days daysToChristmas = Days.daysBetween(today, christmas); 
System.out.println(daysToChristmas.toString()); 
```

这将打印**P187D**作为答案。

```
DateTime start = new DateTime(DateTime.now());
DateTime end = new DateTime(2012, 12, 25, 0, 0, 0 ,0);
Interval interval = new Interval(start, end);
Period period = interval.toPeriod();
System.out.println("Seconds " + period.getSeconds());
System.out.println("Minutes " + period.getMinutes());
System.out.println("Hours " + period.getHours());
System.out.println("Days " + period.getDays()); 
```

这将打印以下结果，

```
Seconds 36
Minutes 21
Hours 7
Days 4 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T11:22:14.523

您应该使用 a`Period`来确定所涉及的月数/天数/等：

```
Period period = new Period(start, end); 
```

将 an 转换`Interval`为句点也可以，但是无参数重载包括*所有*句点单位 - 而且您没有打印出月份。

现在，如果您*只*想要天、小时、分钟、秒，那么您需要创建一个适当的`PeriodType`，例如

```
PeriodType periodType = PeriodType.dayTime().withMillisRemoved();
Period period = new Period(start, end, periodType); 
```

然后你可以要求那些单独的领域，一切都应该很好。

（您实际上可以使用 just `dayTime()`，因为millis 不会干扰其他任何事情。）

因此，您可以像上面那样直接从`start`and构建您的期间`end`，或者如果您想保留`Interval`，您可以使用：

```
Period period = interval.toPeriod(periodType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:19:43.577

第一个代码以[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Durations)格式打印**P187D 。**

第二个代码仅打印 4 天，因为您缺少月份 ( `period.getMonths()`)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T11:42:45.433

您可以使用此代码。

```
DateTime dt1 = new DateTime();
DateTime dt2 = new DateTime(2012, 12, 25, 0, 0, 0, 0);
int seconds=Seconds.secondsBetween(dt1, dt2).getSeconds();

int noOfDays=seconds/(24*60*60);
int noOfHours=(seconds%(24*60*60))/(60*60);
int noOfMinutes=((seconds%(24*60*60))%(60*60))/60;
int noSec=((seconds%(24*60*60))%(60*60))%60;

System.out.println("Time Left For christmas");
System.out.println("Days Left="+noOfDays+" Hours="+noOfHours+" Minutes="+noOfMinutes+" Seconds="+noSec); 
```

# javascript - 需要特定类型的函数作为参数的javascript jquery函数？

> ID：11118275
> 
> 赞同：1
> 
> 时间：2012-06-20T11:12:18.677
> 
> 标签：javascript, jquery

在我运行时在 jquery 中：

```
$('li').each(some-function(i){}); 
```

IDE 似乎知道 some-function 需要一个索引。

它让我相信我可以在 javascript/jquery 中创建一个函数，该函数需要一个函数作为它的参数之一，它需要某些参数。（我是 JavaScript 新手）

我知道如何用c语言做到这一点。

我正在寻找这样的东西：

```
void somefuncA ( void (*funcB)(int) ){
    //do stuff with funcB
    (*funcB)(5);
} 
```

所以函数'somefuncA'期望得到一个函数funcB，它获取一个整数作为参数，然后做一些事情。

希望这是有道理的.. 谢谢 ps 我知道 JavaScript 是弱类型，但我也注意到它`.each()`需要一个函数作为参数，而不仅仅是任何函数，而是一个以 int 作为参数的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:31:47.637

> 它让我相信我可以在 javascript/jquery 中创建一个函数，该函数需要一个函数作为它的参数之一，它需要某些参数。

您可能在这里谈论代表。[函数是 JavaScript 中的一等对象](https://stackoverflow.com/a/705184/205859)。他们没有像其他一些语言那样定义类型安全的指针。一个函数可以定义任意数量的参数，但您甚至不必传递一个参数。跳过的参数将是未定义的。他们也没有定义任何返回类型。函数可能返回值，也可能不返回值。

您的 IDE 足够聪明，可以找到函数调用并提示您提供了哪些参数。您可以在函数中自由使用或跳过这些参数。

```
$('li').each(function(){
   // do something
}); 
```

在这里，您创建一个不带任何参数的匿名函数。jQuery 将在内部传递索引或其他一些参数，但不会产生任何错误。您还可以创建一个使用 jQuery 提供的 index 参数的函数。

```
$('li').each(function(index){
   // do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:17:39.147

你要问的是这样的吗？

```
function somefuncA ( funct, parameters ){
    //do stuff with funcB
    alert(funct(parameters));
} 
```

这主要用于javascript中的回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:25:11.347

```
function ​myFunc​(fn, param)
{
    if (typeof fn != "function") {
        throw new TypeError();
    }
    fn.call(this, param);
} 
```

使用两个参数调用`myFucn`，第一个参数是函数，第二个参数是它的参数'Hello'

```
myFunc(function(m){
    alert(m);
}, 'Hello!');​ 
```

[**演示。**](http://jsfiddle.net/heera/qzL2s/)

# android - Android 连接到无效的 Web 服务使应用程序挂起

> ID：11118276
> 
> 赞同：0
> 
> 时间：2012-06-20T11:12:20.067
> 
> 标签：android, web-services, freeze

我的应用程序使用 ksoap2 连接到 Web 服务。该应用程序使用户能够更改提供 Web 服务的服务器的 IP 地址/URL（在设置中）。

问题是当用户将IP地址/URL更改为无效位置时，应用程序长时间挂起，LogCat显示应用程序无法连接到提供的Socket描述。

我该如何解决 ？如果找不到 Web 服务，如何停止应用程序挂起？

如果找不到 Web 服务，我希望应用程序 UI 保持原样。有什么办法可以避免应用程序挂起？

这是我的代码。请提出任何避免应用程序挂起的方法。

```
 private void getControlFromServer()  {
    // TODO Auto-generated method stub

    SoapObject request = new SoapObject(NAMESPACE, METHOD_GET_CONTROL);
    SoapSerializationEnvelope envelope = 
        new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

     try {
             androidHttpTransport.call(SOAP_ACTION_GET_CONTROL, envelope);

            SoapObject result=(SoapObject)envelope.getResponse(); //To get the data.

            tvTemp.setText("Received :" + result.getProperty(0).toString()+ " : " + result.getProperty(1).toString() +  " : " + result.getProperty(2).toString() +  " : " + result.getProperty(3).toString() +  " : " + result.getProperty(4).toString() +  " : " + result.getProperty(5).toString() +  " : " + result.getProperty(6).toString());

     } catch (Exception e) {

            tvTemp.setText("Error");
            e.printStackTrace();

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:18:15.740

将**ConnectionTimeOut**设置为您的`HttpTransportSE`对象..

使用最新 使用[ksoap2 API 版本 2.5.7](http://code.google.com/p/ksoap2-android/wiki/HowToUse?tm=2)或更高版本，

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport;
SoapObject response = null;

try {
        androidHttpTransport = new HttpTransportSE(URL,6000); // Tried Setting the Timeout to 1 Minute
        androidHttpTransport.debug = true;
        androidHttpTransport.call(SOAP_ACTION,envelope);
        response = (SoapObject)envelope.bodyIn;
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } 
```

# tfs - 列出用户在过去几天内签入 TFS 的所有文件

> ID：11118277
> 
> 赞同：10
> 
> 时间：2012-06-20T11:12:22.187
> 
> 标签：tfs

我们有很多项目，每个项目里面都有几个文件。可以从主解决方案根目录、项目级别和个人级别签入文件。

有没有办法找到过去几天特定用户签入的所有文件，适用于所有级别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:36:36.660

I think it's not possible to drill down to the files of each changeset of a user within a given timeframe by using the standard reporting facilities of TFS.

The following uses the TFS-SDK & should accomplish the task:

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace GetCheckedInFiles
{
    class Program
    {
        static void Main()
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://tfsURI"));

            var versionControl = teamProjectCollection.GetService<VersionControlServer>();

            //enforcing 3 days as "past few days":
            var deltaInDays = new TimeSpan(3, 0, 0, 0);
            DateTime date = DateTime.Now - deltaInDays;

            VersionSpec versionFrom = GetDateVSpec(date);
            VersionSpec versionTo = GetDateVSpec(DateTime.Now);

            IEnumerable results = versionControl.QueryHistory("$/", VersionSpec.Latest, 0, RecursionType.Full, "User" , versionFrom, versionTo, int.MaxValue, true, true);
            List<Changeset> changesets = results.Cast<Changeset>().ToList();

            if (0 < changesets.Count)
            {
                foreach (Changeset changeset in changesets)
                {
                    Change[] changes = changeset.Changes;
                    Console.WriteLine("Files contained in "+changeset.ChangesetId+" at "+changeset.CreationDate+" with comment "+changeset.Comment);

                    foreach (Change change in changes)
                    {
                        string serverItem = change.Item.ServerItem;
                        Console.WriteLine(serverItem + "   "+change.ChangeType);
                    }
                    Console.WriteLine();
                }
            }

        }

        private static VersionSpec GetDateVSpec(DateTime date)
        {
            string dateSpec = string.Format("D{0:yyy}-{0:MM}-{0:dd}T{0:HH}:{0:mm}", date);
            return VersionSpec.ParseSingleSpec(dateSpec, "");
        }
    }
} 
```

The `GetDateVSpec` was copied from [this](https://stackoverflow.com/a/4992624/728929) post by Robaticus

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T00:45:59.083

如果您安装了 TFS 电动工具，则可以从 Visual Studio 命令提示符使用命令“tfpt searchcs”。这将允许您搜索由特定用户签入的所有更改集，并与其他一些过滤器一起设置开始和结束日期。这可能会满足您的需求

# iphone - FBDialog.bundle 没有这样的文件或目录 (ShareKit 2.0)

> ID：11118278
> 
> 赞同：1
> 
> 时间：2012-06-20T11:12:28.757
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我在我的应用程序中使用*Sharekit 2.0*，但是当我构建应用程序时出现此错误。我没有得到他们所说的我尽力从不同的问题中解决这个问题，但无法解决。

> *错误：/Users/shaheen.r/Downloads/ShareKit-ShareKit-bd8932b 3/Classes/ShareKit/Sharers/Services/Facebook/../../../../../Submodules/facebook-ios-sdk /src/FBDialog.bundle：没有这样的文件或目录*

旧版本的*Sharekit*也会产生错误并且无法正常工作。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:12:41.467

@Shaheen Rehman 好的，我了解您的问题，我有一个共享工具包示例代码，在带有 ios 5.1 的 xcode 4.3.3 中没有错误。如果需要，可以从[这里](http://dropbox.com/s/2y3lg79fjoihsrq/ShareKit.zip)下载。如果你有任何疑问再问我

# iphone - 来自 webview cookie 的 IOS 网站标题

> ID：11118280
> 
> 赞同：0
> 
> 时间：2012-06-20T11:12:37.973
> 
> 标签：iphone, ios, cookies, webview

我想从我的应用程序的 webview cookie 中检索网站标题。

我在用：

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies]) {
    NSLog(@"%@",cookie.properties   );

} 
```

我只在字典中获取以下字段：

2012-06-20 16:29:23.763 [4936:207] {
创建 = 361882697;
域 = "www.google.com";
过期 = "2012-07-20 10:58:17 +0000";
名称 = MRES；
路径 = "/搜索";
值 = "8ec208dd70991ccb:8a123708ae27c59e:b934e635fe6c1e21";
}

我如何保存/检索网站标题例如：标题谷歌，网址：www.google.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:36:04.780

页面在 UIWebView 中加载完成后，可以在 webview 上执行 javascript 来获取标题，然后可以将其保存在本地存储中或您要保存的方式中。

使用 UIWebView 实例方法`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`

要获取标题，请使用 javascript：`document.title`

# batch-file - Windows-Batch 高级文本查找功能

> ID：11118284
> 
> 赞同：0
> 
> 时间：2012-06-20T11:12:50.770
> 
> 标签：batch-file, find, patch

好的，我正在编写一个脚本，该脚本从多个文本文件中提取值，但似乎找不到将文件组合成单个文本文件的好方法。

```
FOR /f "tokens=%toknum% delims=:" %%G in ('"find /v /c "" "%~dp0\!systype!Win7Updates.txt""') do set maxcnt=%%G 
```

在文本文件中：

```
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart 
```

我试图弄清楚如何在文件中创建一个区域，以便将这些东西分开。我想尝试找到标题，转到标题，然后将加载它下面的所有内容。

我正在尝试做的事情的例子。（也尝试在 CSV 文件中执行此操作）所以我希望脚本找到 windows vista 补丁区域并仅加载该区域下方的那些。有谁知道这是否可能？

```
:Windows 7 Patches
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart

:Windows Vista Patches
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart
KB978601,2010\MS10-019\WinSec-MS10-019-011-P57297-Windows6.1-KB978601-x86.msu,/quiet /norestart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:15:06.923

您的陈述“将加载它下面的所有内容”不清楚。我假设您的意思是标题下方的所有内容，直到下一个标题。我真的不知道您所说的“已加载”是什么意思-也许将这些行附加到另一个文件中？对于这个解决方案，我将简单地回显这些线条。

您的测试用例非常蹩脚 - 部分内容相同，因此很难判断代码是否正常工作。这是一个更有趣的测试用例，应该更容易解释。我添加了一些`!`字符来说明使用 FOR 循环时延迟扩展的问题。

**测试.txt**

```
:Windows 7 patches
Windows 7 line 1!
Windows 7 line 2!
Windows 7 line 3!

:Windows Vista patches
Windows Vista line 1!
Windows Vista line 2!
Windows Vista line 3!

:Windows XP patches
Windows XP line 1!
Windows XP line 2!
Windows XP line 3! 
```

这是一个批处理脚本，它只回显 Vista 补丁部分。它在循环内打开和关闭延迟扩展以保护`!`. 如果打开延迟扩展，%%A 的扩展将无法正常工作。

```
@echo off
setlocal disableDelayedExpansion
for /f "delims=:" %%N in ('findstr /n /c:":Windows Vista patches" test.txt') do set skip=%%N
for /f "skip=%skip% delims=" %%A in (test.txt) do (
  set ln=%%A
  setlocal enableDelayedExpansion
  if "!ln:~0,1!"==":" (endlocal & goto :break)
  endlocal
  echo %%A
)
:break 
```

上述解决方案将删除任何空白行。如果需要，有一些技巧可以保留空白行。`;`由于默认的 FOR /F "EOL" 选项，它还将删除任何以开头的行。如果需要，还有一些技巧可以解决这个问题。

# blackberry - 黑莓中的 USSD 响应

> ID：11118286
> 
> 赞同：1
> 
> 时间：2012-06-20T11:12:55.230
> 
> 标签：blackberry, ussd

我正在开发一个 SMS 应用程序，在该应用程序中，当我在调试模式下从设备发送短信时，我会通过设备上的 USSD 收到我已扣除余额的通知。该 USSD 消息打印在我的控制台窗口上。我可以在控制台上看到这些 USSD 消息，但无法获取它们作为控制响应。在控制台上是这样显示的。 **电话 USSD 数据：**

请建议我如何获得 USSD 响应，因为它打印在我的控制台上，而不是必须有一种方法来获得该响应。

# nhibernate - NHibernate - 同一实体中具有相同类型的两个列表

> ID：11118289
> 
> 赞同：1
> 
> 时间：2012-06-20T11:13:02.487
> 
> 标签：nhibernate

我有这个类，我想映射：

```
public class Contract
{
        public virtual IList<Right> RightsSystem1 { get; set; }
        public virtual IList<Right> RightsSystem2 { get; set; }
} 
```

带映射：

```
HasManyToMany(c => c.RightsSystem1).Not.LazyLoad();
HasManyToMany(c => c.RightsSystem2).Not.LazyLoad(); 
```

其中 Right 是另一个映射类，它表示两个不同系统具有的某些权限（它可以像“ *GetPartStockQuantity* ”或“ *GetOrderStatus* ”）。

我遇到的问题是，当我向两个列表中的每一个添加一个权限，然后使用 NHibernate 获取它们时，两个列表都有两个项目（这是我单独添加的两个项目）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:43:24.913

manytomany 默认使用相同的表名和列名。您需要明确指定它们：

```
HasManyToMany(c => c.RightsSystem1).Table("FooRights").Not.LazyLoad();
HasManyToMany(c => c.RightsSystem2).Table("BarRights").Not.LazyLoad();

//or
HasManyToMany(c => c.RightsSystem1).ChildKeyColumn("FooRight_id").Not.LazyLoad();
HasManyToMany(c => c.RightsSystem2).ChildKeyColumn("BarRight_id").Not.LazyLoad(); 
```

# .net - 调试和更改执行步骤时的引发事件

> ID：11118293
> 
> 赞同：0
> 
> 时间：2012-06-20T11:13:21.147
> 
> 标签：.net, vb.net, events

我的应用程序中有此代码

```
If _oCurrentCall.CustomData.Length > 0 AndAlso UsageType = UsageTypeEnum.Vanlig Then
  RaiseEvent NewIncomingCallWithCustomData(_oCurrentCall)
ElseIf UsageType = UsageTypeEnum.Sentralbord Then
  RaiseEvent NewIncomingCall(_oCurrentCall, Queues)
End If 
```

如果不调试，事件就会很好地引发并正常工作。但是，当调试并尝试更改执行步骤时，例如将执行步骤拖到另一个条件块中的 raiseevent，该事件不会触发。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:58:27.813

我复制。可以说，这是调试器中的一个错误，在我看来很难修复。将代码从 vb.net 反编译为 C# 时更容易看到。此示例代码：

```
Class Test
    Public Event Foo As EventHandler
    Public Event Bar As EventHandler

    Public Sub Run(ByVal arg As Integer)
        If arg = 0 Then
            RaiseEvent Foo(Me, EventArgs.Empty)
        Else
            RaiseEvent Bar(Me, EventArgs.Empty)
        End If
    End Sub
End Class 
```

被翻译成这个等效的 C# 代码：

```
public void Run(int arg)
{
    EventHandler VB$t_ref$S0;
    if (arg == 0)
    {
        VB$t_ref$S0 = this.FooEvent;
        if (VB$t_ref$S0 != null)
        {
            VB$t_ref$S0(this, EventArgs.Empty);
        }
    }
    else
    {
        VB$t_ref$S0 = this.BarEvent;
        if (VB$t_ref$S0 != null)              // <=== HERE!!!
        {
            VB$t_ref$S0(this, EventArgs.Empty);
        }
    }
} 
```

当您使用 Set Next Statement 调试器命令将执行点设置到第二个 RaiseEvent 语句时，调试器会将执行点移动到上面代码片段中标记为 HERE 的语句。绕过临时变量的初始化。仍然为空，因此不会引发该事件。使用该命令后，您可以通过使用 Debug + Windows + Disassembly 查看机器代码来观察这种情况。

否则，这与任何 C# 程序员都非常熟悉的事件引发代码完全相同，他们没有引发事件访问器，因此必须编写以下代码：

```
var temp = Bar;
if (temp != null) {
    Bar(this, EventArgs.Empty);
} 
```

好吧，调试器搞砸了，很容易看出它是如何发生的。以及它是如何一直未被发现（或被忽略）的。变通办法很难找到，在 RaiseEvent 语句之前的语句会起作用，但非常不切实际。修改变量以使 If 语句执行所需的事件是可能的。

我在 connect.microsoft.com 上报告了这个问题，反馈文章[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/750080/using-debuggers-set-next-statement-command-prevents-event-getting-raised-vb-net)。不要期待奇迹。

# python - 如何修改这个python for循环？

> ID：11118295
> 
> 赞同：2
> 
> 时间：2012-06-20T11:13:24.137
> 
> 标签：python, loops, for-loop

我在 python 中的 for 循环中有奇怪的行为。问题不完全是这个问题，但非常类似于：

```
a = []
b = [1,2,3,4]
for i in xrange (0,10):
     a.append(b)
     b[3] += 1 
```

结果是：

```
a = [[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14],[1,2,3,14]] 
```

我期待的结果是

```
a =  [[1,2,3,4],[1,2,3,5],[1,2,3,6],[1,2,3,7],.....,[1,2,3,14]] 
```

我不知道为什么在每次迭代中，b[3] 被添加到 14，然后列表 [1,2,3,14] 被添加到 a。我认为 b[3] 在每次迭代时应该只增加 1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T11:17:53.323

您的问题是每次迭代都会附加对同一数组的引用，并不断更改它。

最简单的解决方法是将附加更改为

```
 a.append(list(b)) 
```

这将使每次迭代都将（浅）副本附加到目标数组，而不是引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:18:52.620

`b`通过引用访问，因此当您修改它时，它会影响您一遍又一遍地`b[3]`附加到它的每个引用 。`a`要解决此问题，您只需`b`每次创建一个新副本：

```
a = []
b = [1,2,3,4]
for i in xrange (0,10):
     a.append(b[:])
     b[3] += 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T11:33:25.077

你可以使用`deepcopy`：

```
from copy import deepcopy
a = []
b = [1,2,3,4]
for i in xrange (0,10):
     a.append(deepcopy(b))
     b[3] += 1 
```

# iphone - 基于 Core Data 的 iPhone 应用更新

> ID：11118299
> 
> 赞同：0
> 
> 时间：2012-06-20T11:13:52.943
> 
> 标签：iphone, core-data

我使用 Core Data 模型中可用的数据开发了一个 iPhone 应用程序。我在 iPhone 中成功获取了该数据，但是当我在数据模型中执行任何更新（如添加实体）时，更新不会反映在 iPhone 应用程序中，我可以知道原因吗？

如果有人对此有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:22:36.067

没有代码和细节很难理解发生了什么。此外，你是什么意思

> 我可以知道这是什么原因吗

?

您是否尝试过保存您正在处理的上下文？

```
[context save:&error]; 
```

希望有帮助。

# php - 将 nofollow 添加到链接

> ID：11118301
> 
> 赞同：0
> 
> 时间：2012-06-20T11:14:04.067
> 
> 标签：php, wordpress

所以我尝试编写函数，将 nofollow 添加到 wordpress 中具有不同域的链接。

问题出在**else**因为它不起作用...

```
if(strpos($link, $domain) !== FALSE){
    return $link.'good';
}
else{
    return $link.'bad'; 
} 
```

过滤器只返回**好的**链接，如果链接**不好**，过滤器只返回链接...

**编辑：**

例子：

```
$domain = 'somedomain.com';

if(strpos($link, $domain) !== FALSE){
    return $link.'good';
}
else{
    return $link.'bad'; 
} 
```

它在检查不同的链接时返回：

```
<a href="http://lol.com"  target="_blank">LOL1</a>
<br/>
<a href="http://somedomain.com" target="_blank">LOL2</a>
good 
```

如您所见，它应该返回带有**坏的****lol**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:44:19.693

我认为 $link 的价值不是你所期望的。如果值

```
if(strpos($link, $domain) !== FALSE) 
```

不等于false，会返回匹配字符串的位置。

检查 $link 和此函数的值以查看已匹配的内容。您可能错误地传递了多个锚标记？**

# java - java开发之Smalltalk列类浏览器

> ID：11118312
> 
> 赞同：4
> 
> 时间：2012-06-20T11:14:59.267
> 
> 标签：java, eclipse, plugins, browser, smalltalk

我想在 Eclipse 上使用与 Smalltalk 相同的“五面板”类浏览器在 Java 中进行开发。是否有一个 Eclipse 插件可以做到这一点？我找不到它。

第一列包名称、第二列类名称、第三列方法名称以及最后一个用于编辑方法的底部面板。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:36:49.213

不需要插件：选择“Window”>“Open perspective...”>“Java Browsing”，您将获得与原始 Smalltalk 浏览器非常相似的内容。这种浏览视角的相似性可能源于 Eclipse IDE 的起源：IBM Visual Age for Java/Smalltalk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:17:40.533

您可以将“java 浏览”类别的“包”、“类型”和“成员”视图排列为具有相同的布局。

主要区别在于，您可以使用滚动条查看其他成员，而无需单击“成员”视图（我不确定它在 Smalltalk V 或 80 中做了什么……就是这样老的...）。

我有一个非常相似的布局，因为我将视图“项目”、“包”和“类型”放在屏幕左侧（在我的小屏幕上没有“成员”的位置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:01:52.710

这是西班牙语，但它可能会有所帮助： http: [//nicopaez.wordpress.com/2011/06/07/smalltalkizando-eclipse/](http://nicopaez.wordpress.com/2011/06/07/smalltalkizando-eclipse/)

# ios - 同一 UIImage 上的多个手势识别器

> ID：11118314
> 
> 赞同：1
> 
> 时间：2012-06-20T11:15:03.607
> 
> 标签：ios, uigesturerecognizer

我正在尝试向拉出 subVIew 的 uiimage 添加 2 个手势。一种手势是滑动打开/关闭。另一种是长按在特定高度打开。

```
longPress.minimumPressDuration = 1;
[imageNavigationSlider addGestureRecognizer:longPress];

UILongPressGestureRecognizer *longPressWall = [[[UILongPressGestureRecognizer alloc]
                                            initWithTarget:self     action:@selector(handleLongPressWall:)] autorelease];
longPressWall.minimumPressDuration = 1;
PullMeImage.userInteractionEnabled=YES;
[PullMeImage addGestureRecognizer:longPressWall];

UISwipeGestureRecognizer *swipe = [[[UISwipeGestureRecognizer alloc] initWithTarget:self     action:@selector(swipe:)] autorelease];
swipe.direction = UISwipeGestureRecognizerDirectionLeft |     UISwipeGestureRecognizerDirectionRight;
[PullMeImage addGestureRecognizer:swipe];
[swipe setDelegate:self]; 
```

长按手势被正确识别，但滑动不是。

我也尝试过使用：

```
 -(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
  return YES;
} 
```

但没有成功。任何帮助将不胜感激。

谢谢

# iphone - 如何识别/检测 iOS 中的字符

> ID：11118316
> 
> 赞同：2
> 
> 时间：2012-06-20T11:15:05.993
> 
> 标签：iphone, objective-c, ios, gesture-recognition

> **可能重复：**
> [是否有任何可用于 iPhone 的手写识别库？](https://stackoverflow.com/questions/3607827/are-there-any-handwriting-recognition-libraries-available-for-the-iphone)

我已经搜索了很多字符识别。我的问题是：我需要在 iPhone 应用程序的手指移动中检测“A”、“Q”、“E”、“H”等字符。请有人指导我实现这一目标。或者我必须为此使用不同的机制。

# asp.net - 如何检查用户名是否存在

> ID：11118319
> 
> 赞同：3
> 
> 时间：2012-06-20T11:15:13.403
> 
> 标签：asp.net, sql, stored-procedures

如果用户名存在，如何返回 1，否则返回 0？这是我尝试过的。

```
IF EXISTS (SELECT * FROM [User] WHERE UserName = @UserName and EmailID=@EmailID) 
    begin
      return 1;
    end
     else
      begin
    declare @CreatedOn datetime
    select @CreatedOn = getdate()
    insert into [User](UserName,Password,EmailID,ContactNo,CreatedOn) values(@UserName,@Password,@EmailID,@ContactNo,@CreatedOn) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:31:16.670

```
CREATE PROCEDURE CheckUserExists
AS
    @UserName NVARCHAR(MAX),
    @Email NVARCHAR(MAX)
BEGIN    
    IF EXISTS (SELECT 1 FROM [User] WHERE UserName = @UserName OR EmailID=@EmailID) 
    BEGIN
        RETURN 1
    END
    ELSE BEGIN
        RETURN 0    
    END
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:21:06.613

也许你可以试试这个查询：

```
Select count(*) from [user] where  UserName = @UserName and EmailID=@EmailID 
```

如果用户名存在 count(*) 将大于 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:32:04.157

尝试这个：

```
IF EXISTS (SELECT 1 FROM [User] WHERE UserName = @UserName and EmailID=@EmailID) 
    begin
      return 1;
    end
     else
       return 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:40:06.667

```
/* Execute the SP As*/
DECLARE @return_value int
EXEC    @return_value = [dbo].[CheckUserExists]
Select @return_value

/*STORED PROCEDURE*/
CREATE PROCEDURE CheckUserExists
AS
    @UserName NVARCHAR(MAX),
    @Password NVARCHAR(MAX)
    @EmailID NVARCHAR(MAX),
    @ContactNo NVARCHAR(MAX)
BEGIN

IF EXISTS (SELECT 1 FROM [User] WHERE UserName = @UserName and EmailID=@EmailID) 
    BEGIN
      RETURN 1;
    END
     ELSE
      BEGIN
        DECLARE @CreatedOn DATETIME
        SELECT @CreatedOn = GETDATE()
        INSERT INTO [User](UserName,Password,EmailID,ContactNo,CreatedOn) 
        VALUES(@UserName,@Password,@EmailID,@ContactNo,@CreatedOn)
        RETURN 0;
END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:24:28.057

我在这里看到了一个更大的问题。你说你想知道用户是否存在。但是查询显示了一个副作用，如果用户不存在，您将在同一个调用中创建用户。这些应该是单独的 sqlcommands。一个用于查询/读取，另一个用于命令/插入。

确定用户是否存在一个简单的`select 1 from [users] where [username] = @user`就足够了。如果返回任何 (1?) 行，则用户存在，否则用户不存在。

然后您可以发出命令来创建用户

```
insert into [User](UserName,Password,EmailID,ContactNo,CreatedOn) values(@UserName,@Password,@EmailID,@ContactNo,getdate()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T13:25:00.203

创建过程 CheckUserExists AS @UserName NVARCHAR(MAX), @Email NVARCHAR(MAX) BEGIN
declare @usercount int

```
Select @usercount = count(UserName) from [user] where  UserName = @UserName and EmailID=@EmailID

IF (@usercount = 1) 
BEGIN
    RETURN 1
END
ELSE BEGIN
    RETURN 0    
END 
```

结尾

# javascript - 将编辑的 SVG 文件另存为新文件或数据库

> ID：11118320
> 
> 赞同：1
> 
> 时间：2012-06-20T11:15:20.410
> 
> 标签：javascript, jquery, svg, savefiledialog

我不需要经常提问，但这次谷歌让我失望了

所以我有一个使用 Javascript 来编辑外部 SVG 文件的网站，如下所示：

```
<embed id="svgFile" src="svgFile.svg" type="image/svg+xml" /> 
```

我有一个带有输入的表单，可以使用 Javascript 和 Jquery 动态编辑 SVG，如下所示：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="JavascriptFile.js"></script>

....HTML....

<input id="txt1" name="text_one" maxlength="16" type="text" class="text" placeholder="Line one" onkeyup="update(1)" /> 
```

javascript是这样的：

```
function update(n) {var txtID = n;
var txt = document.getElementById("txt" + txtID).value;
var svgTXT = document.getElementById("svgFile").getSVGDocument().getElementById("txt" + txtID);
svgTXT.textContent = txt;
} 
```

现在这一切正常，页面上的“图像”/SVG 更新但现在我需要保存这个更新的图像。
新 我不确切知道我们需要什么文件格式，但将信息保存到 php/MySQL DB 和 PDF 是最低要求。PDF 是供用户保存和打印的……他们想做什么，而 DB 是用于在线保存。

我也将 JQuery 链接到该站点，但我发现 Javascript 更自然地编写代码，以太方式我需要某种解决方案/示例/插件。谁能帮忙！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T15:51:25.767

我通过在 php 和 mySQL 数据库中使用以下代码段来实现这一点： 首先，记住 svg 基本上存储在文本中，就像 HTML 一样。svg 标签，无论是不同的标签，都与 HTML 标签非常相似。

存入数据库。您必须在实际的 mySQL Insertcall 中使用以下代码段。我发现如果你先对变量执行此操作，然后将变量放入插入调用中，它将不起作用。该函数必须在 mySQL 语句中。
`mysql_real_escape_string($myValue)`

检索到文本框中的值。假设您的值已经从数据库中检索出来，并且现在位于名为 theValues 的数组中。基本上我正在删除任何反斜杠，但在此之前我要确保它可以使用 htmlentities 正确显示。因为你在 svg 中没有反斜杠，我知道它修复了服务器用 \" 替换引号的地方。如果你在 svg 中遇到一些反斜杠，你只需要在你的替换函数中更聪明一点。
`$myValue= str_replace("\\", "", htmlentities($theValues->myValue)); echo $myValue;`

回显到页面的原因与上述相同，但 htmlentities 功能使其仅显示 svg 的文本，而不是处理 svg 并显示您的图片。这只需要在文本已存储在数据库中后显示 svg 但它不会损害您的显示如果它不是第一个数据，只是一个不必要的函数调用。
`str_replace("\\", "",$myValue)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:54:56.910

## 另存为 SVG

用于[`XMLSerializer`](https://developer.mozilla.org/en/XMLSerializer)获取 SVG 的源 XML 表示，并将其发布回您的服务器（如果您愿意，可以使用 AJAX）。

## 另存为 PNG

用于为 SVG`XMLSerializer`创建[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，并将其用作`<img>`元素的源。将此图像绘制到 HTML5 画布，然后用于[`toDataURL()`](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)将内容转换为 base64 编码的 PNG 数据 URI，然后您可以将其发布到您的服务器并保存为文件。

警告：当前版本的 Chrome 和 Firefox 的半新版本（但不是最新版本）目前在安全性上“强调”并在您绘制任何 SVG 时污染画布，从而阻止您获取数据 URI。

*注意：以上两个答案都需要IE9+；但是，对于 SVG 也是如此。*

# iis - IIS 在 Windows7 上部署

> ID：11118322
> 
> 赞同：0
> 
> 时间：2012-06-20T11:15:23.543
> 
> 标签：iis

在尝试在我的 IIS7 上本地部署 ASP.NET MVC3 时，我遇到了这个异常：登录失败。用户 'AUTORITE NT\IUSR' 登录失败。

我在这个站点使用匿名身份验证，因为我在我的 PC 上安装的 IIS 上找不到 Windows 集成身份验证。

有任何想法吗...：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:19:25.880

将运行站点的应用程序池的身份更改为*管理员*组的用户。

# java - 如何保存完整的网页

> ID：11118323
> 
> 赞同：4
> 
> 时间：2012-06-20T11:15:24.133
> 
> 标签：java, selenium, webdriver

有没有办法使用 WebDriver 保存完整的网页？

目前我做 getPageSource() 然后将所有内容放入 html 本地文件中，但保存的页面形状不好（奇怪的字符，没有图像，所有元素都向下偏移）

请参阅下面我使用的代码：

```
 @Test
   public void testSomeThing(){
     FirefoxDriver driver = new FirefoxDriver();
     driver.get("http://google.com");
     String pageSource = driver.getPageSource();
     writeInFile(System.getProperty("user.dir")+"/target/logs/testPage.html", pageSource);
   }

   public static void writeInFile(String sFileName, String sTextToWrite){
         FileWriter outFile;
         General.sendComments("Write to file: " + sFileName);
         try {
                outFile = new FileWriter(sFileName);
                PrintWriter out = new PrintWriter(outFile);
                out.print(sTextToWrite);
                out.close();
         } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
         }
   } 
```

有人可以建议我使用 WebDriver 在 Firefox 中保存完整网页的方式吗？例如自动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:38:11.397

奇怪的字符可能与写入文件的编码有关。

其他问题可能与您正在加载一个静态 html 文件有关，该文件的相对 url 不再指向任何东西。任何 javascript、css 和图像文件都将丢失。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-21T09:58:27.147

[Savw 网页到文件](http://www.java2s.com/Tutorial/Java/0320__Network/SaveWebpagetoafile.htm) 试试看。但我没有检查这个

# android - documentBuilder.parse 在 android 4.0.3 下失败

> ID：11118337
> 
> 赞同：0
> 
> 时间：2012-06-20T11:16:24.657
> 
> 标签：android

我的应用程序 documentBuilder.parse(inputStream) 在 Android 4.0.3 中引发以下错误。

```
"SAXException : Unexpected token (position:TEXT ?xml version='1....@1:38 in java.io.InputStreamReader@419ae708)" 
```

相同的代码适用于所有旧版本的 android。

以下是我的输入流的初始部分。

```
?xml version='1.0' encoding='UTF-8'?> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:41:15.113

缺少最初的小于号。显然旧版本的 android 允许这种不正确的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:20:47.627

我认为您需要 documentBuilder 的 inputSource：

```
Document doc = null;
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

DocumentBuilder db = dbf.newDocumentBuilder();

InputSource is = new InputSource();
is.setCharacterStream(new StringReader(xml)); //where xml is you xml file
doc = db.parse(is); 
```

希望这可以帮助。

# c# - 如何在我的 Linq 语句中修复此“已经是与此命令关联的打开的 DataReader，必须先关闭”？

> ID：11118341
> 
> 赞同：0
> 
> 时间：2012-06-20T11:16:50.717
> 
> 标签：c#, linq, entity-framework-4

> **可能重复：**
> [实体框架：已经有一个打开的 DataReader 与此命令关联](https://stackoverflow.com/questions/4867602/entity-framework-there-is-already-an-open-datareader-associated-with-this-comma)

我有这些课程：

```
 public class VwSelectBrochures
{
    public List<SelectBrochure> SelectBrochures { get; set; }
}

   public class SelectBrochure
{
    public int BrochureId { get; set; }
    public string UrlImage { get; set; }
    public string Description { get; set; }
    public string Cat1Description { get; set; }
    public string Cat2Description { get; set; }
    public string Cat3Description { get; set; }
    public List<LangSelection> Languages { get; set; }
}

public class LangSelection
{
    public int Id { get; set; }
    public string Description { get; set; }
    public bool Vink { get; set; }
} 
```

这行代码：

```
var dbmodel2 =
from x in
    brochures.AsEnumerable().Select(
        x => new SelectBrochure {BrochureId = x.Id, Description = x.Description, UrlImage = x.UrlImage,
        Languages = new List<LangSelection>(from y in x.BrochureLanguages select new LangSelection(){Description = y.Language.Description, Id = y.Language.Id})})
select x; 
```

Brochures 和 BrochureLanguages 是我的数据库模型。

我知道我收到了错误，因为我无法执行“来自 x.BrochureLanguages 中的 y”，但我不知道如何解决这个问题。

我真正想要的是将所有小册子放入 VwSelectBrochures 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:29:58.183

推荐架构修复的信息太少，但解决方法是在连接字符串中启用[MARS 。](http://msdn.microsoft.com/en-us/library/h32h3abf%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:35:49.507

最简单的方法是先将整体`brochures`带入内存（使用`ToList()`）：

```
var dbmodel2 =
from x in
    brochures.ToList().Select(
        x => new SelectBrochure {BrochureId = x.Id, Description = x.Description, UrlImage = x.UrlImage,
        Languages = new List<LangSelection>(from y in x.BrochureLanguages select new LangSelection(){Description = y.Language.Description, Id = y.Language.Id})})
select x; 
```

这样在运行时`from y in ...`没有其他 DataReader 打开。我认为还有另一种选择使用`join`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:53:17.650

我对查询表达式有点不确定，个人更喜欢使用底层扩展方法来获取结果。所以很抱歉这个答案不是查询表达式格式，但你能试试吗？

```
 var dbmodel2 = brochures.AsEnumerable().Select(x => new SelectBrochure {
        BrochureId = x.Id, 
        Description = x.Description, 
        UrlImage = x.UrlImage,
        Languages = x.BrochureLanguages.Select(y => new LangSelection() {
            Description = y.Language.Description, 
            Id = y.Language.Id
        })
    }).ToList(); // this executes the whole query 
```

同样，对于查询表达式格式不是 100% 确定，我觉得外部的“从 x in ... select x”是多余的，并想知道这是否可能导致错误。

# java - JPA 从“drop-and-create-table”切换到“none”会导致大量错误

> ID：11118342
> 
> 赞同：0
> 
> 时间：2012-06-20T11:16:57.823
> 
> 标签：java, exception, jpa, persistence

我和我的团队目前正在使用 Hibernate-Validation 和 JPA 进行项目。

问题：我们决定在开发阶段使用“drop-and-create-table”。一切正常，随着一切的实施​​，我们将生成模式更改为“无”（运行稳定的数据库）。

它之前在做什么：我们删除表，从具有特定属性的实体创建表，并用一些数据集填充表。

它现在在做什么：我们处理现有的、以前工作的表（已经填充了一些数据）；但现在似乎缺少一些关系。

现在我们在运行时遇到了一些异常，我们找不到它们。似乎，一些属性关系被删除了，因为之前没有抛出异常（例如 NullPointerExceptions）。

除了生成模式，我们还需要在persistence.xml 中更改什么吗？

这是persistance.xml的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="ticketline" transaction-type="RESOURCE_LOCAL">

        <class>at.ticketline.entity.Veranstaltung</class>
        <class>at.ticketline.entity.Saal</class>
        <class>at.ticketline.entity.Reihe</class>
        <class>at.ticketline.entity.Platz</class>
        <class>at.ticketline.entity.Person</class>
        <class>at.ticketline.entity.Ort</class>
        <class>at.ticketline.entity.News</class>
        <class>at.ticketline.entity.Kunde</class>
        <class>at.ticketline.entity.Kuenstler</class>
        <class>at.ticketline.entity.Kategorie</class>
        <class>at.ticketline.entity.Bestellung</class>
        <class>at.ticketline.entity.BestellPosition</class>
        <class>at.ticketline.entity.BaseEntity</class>
        <class>at.ticketline.entity.Auffuehrung</class>
        <class>at.ticketline.entity.Artikel</class>
        <class>at.ticketline.entity.Adresse</class>
        <class>at.ticketline.entity.Benutzer</class>
        <class>at.ticketline.entity.Ticket</class>
        <class>at.ticketline.entity.compositekeys.PlatzPK</class>
        <class>at.ticketline.entity.compositekeys.ReihePK</class>
        <class>at.ticketline.entity.compositekeys.SaalPK</class>
        <class>at.ticketline.entity.compositekeys.AuffuehrungPK</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:hsql://localhost/ticketline" />
            <property name="javax.persistence.jdbc.user" value="sa" />
            <property name="javax.persistence.jdbc.password" value="" />
            <property name="eclipselink.ddl-generation" value="none" />              
        </properties>
    </persistence-unit>
</persistence> 
```

堆栈跟踪：

```
!STACK 0
java.lang.NullPointerException
    at at.ticketline.kassa.ui.editor.TicketSuchergebnisEditor$11.getText(TicketSuchergebnisEditor.java:253)
    at org.eclipse.jface.viewers.ColumnLabelProvider.update(ColumnLabelProvider.java:36)
    at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152)
    at org.eclipse.jface.viewers.AbstractTableViewer.doUpdateItem(AbstractTableViewer.java:399)
    at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:485)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2167)
    at org.eclipse.jface.viewers.AbstractTableViewer.createItem(AbstractTableViewer.java:277)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefreshAll(AbstractTableViewer.java:757)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:649)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:636)
    at org.eclipse.jface.viewers.AbstractTableViewer$2.run(AbstractTableViewer.java:592)
    at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443)
    at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404)
    at org.eclipse.jface.viewers.AbstractTableViewer.inputChanged(AbstractTableViewer.java:590)
    at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280)
    at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690)
    at at.ticketline.kassa.ui.editor.TicketSuchergebnisEditor.createPartControl(TicketSuchergebnisEditor.java:67)
    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313)
    at org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180)
    at org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270)
    at org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)
    at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473)
    at org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1245)
    at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1198)
    at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1597)
    at org.eclipse.ui.internal.PartStack.add(PartStack.java:493)
    at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:103)
    at org.eclipse.ui.internal.PartStack.add(PartStack.java:479)
    at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:112)
    at org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:63)
    at org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper.java:225)
    at org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:213)
    at org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:808)
    at org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:707)
    at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:666)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2942)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
    at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2756)
    at at.ticketline.kassa.ui.command.TicketSucheResultsCommandHandler.execute(TicketSucheResultsCommandHandler.java:28)
    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
    at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
    at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:178)
    at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:247)
    at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:247)
    at at.ticketline.kassa.ui.view.TicketSucheView.openEditor(TicketSucheView.java:246)
    at at.ticketline.kassa.ui.view.TicketSucheView$1.widgetSelected(TicketSucheView.java:194)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at at.ticketline.kassa.TicketlineApplication.start(TicketlineApplication.java:21)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:52:04.683

我的猜测是您的数据库缺少一些数据。

当您在内存中运行填充时，您正在填充共享缓存和数据库。但是，您很可能无法正确构建对象。

也许您在内存中设置了瞬态字段，但是当您从数据库中读取时，这些瞬态字段为空。

也许您有双向关系并且没有设置关系的双方，因此没有正确填充数据库。

也许你没有正确映射一些属性，所以数据库中的数据不正确。

我的猜测是，如果你禁用了共享缓存，你也会遇到同样的错误。

# php - 从自己的 iframe 页面关闭花式框

> ID：11118344
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:02.533
> 
> 标签：php, jquery, ajax, fancybox

我用下面的代码打开了花哨的盒子

```
 $("#tip5").fancybox({
            'width': 400,
            'height': 370,
            'enableEscapeButton' : false,
            'overlayShow' : true,
            'overlayOpacity' : 0,
            'hideOnOverlayClick' : false,
            'type': 'iframe',
            'href': "abc.php?id=20"
        }); 
```

**abc.php**在花哨的盒子中打开并且工作正常。

但我想 在特定时间后从**abc.php关闭这个花式框，我在****abc.php中编写了以下代码**

```
$(document).ready(function(e){                            
 setTimeout(function() {
                $.fancybox.close();
                }, 3000);
    }); 
```

我也试过

```
$.fn.fancybox.close() 
```

它没有关闭，但我收到以下错误

```
$.fancybox is undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:42:38.443

这应该可以解决问题：

```
parent.jQuery.fancybox.close(); 
```

查看[此页面](http://fancybox.net/#various5)并单击链接“Iframe（75% 宽度和高度）”

# jquery - 触发jquery表单提交脚本

> ID：11118345
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:02.730
> 
> 标签：jquery, forms, submit

我有一个在用户单击表单提交按钮时运行的验证脚本。

我想将变量传递给这个表单并通过注入一段代码来自动执行验证脚本。

我试过这个：

```
 $('#theform').submit(); 
```

但它绕过了用户手动单击按钮时会发生的验证。

有没有办法模拟用户“点击”并执行表单提交触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:29:21.087

尝试这个：

```
$("#theform").submit(function() {
    // If the validation function returns true, then submit
    if(my_validation_function())
        return true;
    // If the validation function returns flase, don't submit
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:31:28.230

固定，通过放置在这个里面

```
 jQuery(document).ready(function($) {
  // Code using $ as usual goes here.  
 }); 
```

# java - 根据字段值更改 JasperReports 中的背景颜色

> ID：11118347
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:08.820
> 
> 标签：java, jasper-reports

> **可能重复：**
> [根据 JasperReports 中的条件更改文本字段数据颜色（前景色）](https://stackoverflow.com/questions/8754448/change-text-field-data-color-foreground-color-based-on-condition-in-jasperrepo)

我可以根据存储在字段中的颜色值更改*JasperReports中元素的背景颜色吗？*

# android - 如何在 android/eclipse 上的 tabhost 中使用共享首选项

> ID：11118349
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:10.597
> 
> 标签：android, eclipse, sharedpreferences, android-tabhost

任何人都可以给我下面的模拟器图像需要的java代码吗？

![在此处输入图像描述](../Images/a63aa42818231e7ce8cb8f119132f8b7.png)

上面的仿真器图像只是从用户那里获取输入并在同一页面的编辑文本中显示答案。但是我需要在 Tabhost 上显示该答案（希望在下一页上），如下图所示。

![在此处输入图像描述](../Images/977f0bc95dce6a6bf58ca235dad1e12a.png)

非常感谢！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:40:05.127

将第一个数据`Activity`放在`Intent`您用来启动`TabActivity`. 这是非常基础的`Android`东西，所以请先看一些教程：[Android Intents](http://www.vogella.com/articles/AndroidIntent/article.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:57:47.640

你如何启动下一个 TabActivity？

当您创建*Intent*以启动*YourTabActivity*时，您可以将**答案**放在此*Intent*中，例如：

```
final Intent intent = new Intent(getBaseContext(), YourTabActivity.class);
intent.putExtra("answer", answer);
startActivity(intent); 
```

在**onCreate(Bundle savedInstanceState)方法中的***FirstActivity*中，您可以获得答案，例如：

 **```
final double answer = getParent().getIntent().getDoubleExtra("answer", 0); 
```

或者，如果您的**答案**为*String*：

```
final double answer = getParent().getIntent().getStringExtra("answer"); 
```

得到**答案**后，您可以将其插入该活动布局的任何位置。

要在 Atstivites 之间发送原始数据和可序列化数据，请使用[Intent.putExtra()](http://developer.android.com/reference/android/content/Intent.html)**

# java - 如何通过按外来对象字段的值进行选择来构建查询

> ID：11118350
> 
> 赞同：5
> 
> 时间：2012-06-20T11:17:13.873
> 
> 标签：java, android, ormlite, query-builder

使用外来对象字段的值进行查询的最佳方法是什么？

假设我有这三个类。

描述单位数量的 UnitResult 类：

```
@DatabaseTable
public class UnitResult {
    public static final String ID_FIELD_NAME = "id";
    public static final String UNIT_COLUMN_NAME = "unit";
    public static final String RESULT_COLUMN_NAME = "result";

    @DatabaseField(generatedId = true, columnName = ID_FIELD_NAME)
    public Integer id;

    @DatabaseField(foreign = true, canBeNull = false, columnName = UNIT_COLUMN_NAME)
    public Unit unit;

    @DatabaseField(canBeNull = true, columnName = RESULT_COLUMN_NAME)
    public Integer result = null;
} 
```

描述市场中某些单位的单位类别（例如果汁、零食等）：

```
@DatabaseTable
public class Unit {
    public static final String ID_FIELD_NAME = "id";
    public static final String TYPE_FIELD_NAME = "type";

    @DatabaseField(id = true, columnName = ID_FIELD_NAME)
    public int id;

    @DatabaseField(canBeNull = false, columnName = TYPE_FIELD_NAME)
    public UnitType type;
} 
```

以及 Unit 类型的枚举：

```
public enum UnitType {
    JUICES,
    DRINKS,
    SNACKS,
    NPD;
} 
```

那么如何查询所有类型在`UnitResult`哪里？`Unit``UnitType.JUICES`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T17:09:07.757

> 那么如何查询 Unit 类型为 UnitType.JUICES 的所有 UnitResult？

在[ORMLite](http://ormlite.com/)中执行此操作的方法是将[`Where.in(...) 与子查询一起使用](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html#in%28java.lang.String,%20com.j256.ormlite.stmt.QueryBuilder%29)：

```
// setup our sub-query on the Unit table first
QueryBuilder<Unit,Integer> uQb = unitDao.queryBuilder();
uQb.where().eq(Unit.TYPE_FIELD_NAME, UnitType.JUICES);
// outer query on UnitResult table
QueryBuilder<UnitResult,Integer> urQb = unitResultDao.queryBuilder();
// in using the sub-query
urQb.where().in(UnitResult.UNIT_COLUMN_NAME, uQb);
List<UnitResult> results = urQb.query(); 
```

# ruby - net ldap - 编码::UndefinedConversionError

> ID：11118353
> 
> 赞同：4
> 
> 时间：2012-06-20T11:17:20.133
> 
> 标签：ruby, ruby-on-rails-3.1, netldap

伙计们！我收到以下错误消息，我不知道该怎么做。这是一个已知的 net-ldap 错误吗？我尝试更新我的 gem，我已经在互联网上寻找更多信息。第一部分没问题，我从我的 ldap 数据库中获取了我的数据，但最后发生了这个错误。

> > /usr/local/lib/ruby/gems/1.9.1/gems/net-ldap-0.3.1/lib/net/ber/core_ext/string.rb:23:in `encode': "\x8E" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError) from /usr/local/lib/ruby/gems/1.9.1/gems/net-ldap-0.3.1/lib/net/ber/core_ext/string.rb:23:in` raw_utf8_encoded' 来自 /usr/local/lib/ ruby/gems/1.9.1/gems/net-ldap-0.3.1/lib/net/ber/core_ext/string.rb:15:in `to_ber' from /usr/local/lib/ruby/gems/1.9.1/gems/net-ldap-0.3.1/lib/net/ldap.rb:1396:in` block in search' 来自 /usr/local/lib/ruby/gems/1.9 .1/gems/net-ldap-0.3.1/lib/net/ldap.rb:1367:in `loop' from /usr/local/lib/ruby/gems/1.9.1/gems/net-ldap-0.3.1/lib/net/ldap.rb:1367:in` search' 来自 /usr/local/lib/ruby/gems/1.9.1/gems/net-ldap-0.3。 1/lib/net/ldap.rb:637:在“搜索”中

这里是我的代码：

```
require 'rubygems'
require 'net/ldap'

ldap = Net::LDAP.new
ldap.host = 'xxxxxx'
ldap.authenticate "cn=admin, dc=xxxx, dc=xxxxx, dc=de", "xxxxx!"
#puts ldap.bind
if ldap.bind
  # authentication succeeded
else
  # authentication failed
 # p ldap.get_operation_result
end

filter = Net::LDAP::Filter.eq("uid", "*")
treebase = "xxxxx, dc=xxxxxx, dc=de"

ldap.search(:base => treebase, :filter => filter) do |entry|
  puts "DN: #{entry.dn}"
  entry.each do |attribute, values|
    puts "   #{attribute}:"
    values.each do |value|
      puts "      --->#{value}"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T19:02:40.160

net-ldap [1],[2],[3],[4] 的 v0.3.1 中有很多编码问题。已经合并了几个补丁，但遗憾的是，这个伟大的项目似乎被半放弃了，并且没有将更改推送到 ruby​​gems。直接从 github 使用它对我来说效果很好，如果你使用的是 bundler，在你的 Gemfile 中粘贴这样的东西很容易：

```
gem "net-ldap", :git => "git://github.com/ruby-ldap/ruby-net-ldap.git", :ref => '8a182675f4' 
```

1 - [https://github.com/ruby-ldap/ruby-net-ldap/pull/41](https://github.com/ruby-ldap/ruby-net-ldap/pull/41)
2 - [https://github.com/ruby-ldap/ruby-net-ldap/pull/44](https://github.com/ruby-ldap/ruby-net-ldap/pull/44)
3 - [https： //github.com/ruby-ldap/ruby-net-ldap/pull/64](https://github.com/ruby-ldap/ruby-net-ldap/pull/64)
4 - [https://github.com/ruby-ldap/ruby-net-ldap/pull/55](https://github.com/ruby-ldap/ruby-net-ldap/pull/55)

# css - 容器重新调整大小到窗口

> ID：11118354
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:29.117
> 
> 标签：css

如何制作一个 100% 的浏览器窗口高度减去顶部和底部的 20 像素的容器 div？这样顶部/底部始终有 20 的边距，并且永远不需要滚动条。在 CSS 中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:23:49.993

您可以将 div 设置为 position: absolute，然后将 top 和 bottom 设置为 20px。看到这个小提琴：http: [//jsfiddle.net/b3kW3/](http://jsfiddle.net/b3kW3/)

# jquery - jQuery同时缩放和淡入淡出

> ID：11118358
> 
> 赞同：7
> 
> 时间：2012-06-20T11:17:39.350
> 
> 标签：jquery, scale, fade

所以我可以制作一个 div 从它的中心枢轴很好地缩放：http: [//jsfiddle.net/uTDay/](http://jsfiddle.net/uTDay/)

但是，当我在 div 中添加内容时，过渡开始发生变化：http: [//jsfiddle.net/uTDay/1/](http://jsfiddle.net/uTDay/1/)

请注意，它不再从中心收缩。

我还尝试让它随着`.fadeOut()`/ `.fadeTo()`/开始收缩而淡出，`.animate()`但无法让它工作。

基本上，当您单击过滤器选项时，我想在此处实现这种效果-它`shrink/grow`从中心枢轴同时开始的方式：http `fade in/out`: [//isotope.metafizzy.co/demos/filtering.html](http://isotope.metafizzy.co/demos/filtering.html)

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T11:30:11.693

# CSS3 方法

Isotope 使用 CSS 变换来缩放元素，这就是为什么所有内容都随之缩放的原因。如果您只是更改框（容器）大小，则包含的节点不受影响（文本具有相同的字体大小等）

使用 CSS 转换或更改内容的大小以及容器元素（如其他答案所建议的那样）。

## 小提琴

[http://jsfiddle.net/UFQW9/](http://jsfiddle.net/UFQW9/)

## 相关代码

**Javascript**

```
$(".btn a").click(function () {
    $('.box').addClass('hidden');
}); 
```

**CSS**

```
.box {
    display: block;
    height: auto;
    width:402px;
    /*height:200px;*/
    background-color: red;
    padding: 20px;

     -webkit-transition: all 1000ms linear;
    -moz-transition: all 1000ms linear;
    -ms-transition: all 1000ms linear;
    -o-transition: all 1000ms linear;
    transition: all 1000ms linear;
}
.box.hidden {
    -moz-opacity: 0;
    opacity: 0;
    -moz-transform: scale(0.01);
    -webkit-transform: scale(0.01);
    -o-transform: scale(0.01);
    -ms-transform: scale(0.01);
    transform: scale(0.01);
}

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:32:13.043

同时淡化和缩放。这可以重构一下，但这就是想法：

```
$(".btn a").click(function () {
    var boxleft = $('.box').outerWidth()/2;
    var boxtop  = $('.box').outerHeight()/2;
    var imgleft = $('.box img').outerWidth()/2;
    var imgtop  = $('.box img').outerHeight()/2;
    $('.box').animate({
        'opacity' : 0,
        'width': 0, 
        'height': 0,
        'left': boxleft + 'px',
        'top': boxtop + 'px'
    });
    $('.box img').animate({
        'opacity' : 0,
        'width': 0, 
        'height': 0,
        'left': imgleft + 'px',
        'top': imgtop + 'px'
    });
}); 
```

​</p>

CSS（添加`position: relative`）：

```
.box {
    display: block;
    width:200px;
    height:200px;
    background-color: red;
    position: relative;
} 
```

演示：http: [//jsfiddle.net/uTDay/12/](http://jsfiddle.net/uTDay/12/)

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:44:08.600

我花时间在这个上：

**所有**的盒子都隐藏起来，并根据每个元素的属性缩放到它们的相对高度。

[http://jsfiddle.net/uTDay/11/](http://jsfiddle.net/uTDay/11/)

代码，使用函数变量进行 DRY。

```
var hide_those_boxes = function () {
    $('.box , .box img').each(function(ix, obj) {
            $(obj).animate({
                opacity : 0, 
                left: '+='+$(obj).width()/4, 
                top: '+='+$(obj).height()/4,
                height:0, 
                width:0
            }, 
            3000, 
            function() { $(obj).hide(); }
        );
    });
}

$(".btn a").click(hide_those_boxes); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:33:03.767

DEMO= [http://jsfiddle.net/uTDay/8/](http://jsfiddle.net/uTDay/8/) 不同的方式：

```
$(".btn a").click(function () {
    $('.box').animate({'opacity':0,'width':0,'height':0},1000);
    $('.box img').animate({'width':0,'height':0},1000);
}); 
```

​ ​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:28:23.890

这个效果更好:)

```
$(".btn a").click(function () {
   $('.box').hide("scale", {}, 500).animate({'opacity' : 0});
   $('.box img').hide("scale", {}, 500).animate({'opacity' : 0});
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T11:25:01.877

盒子仍然在做你期望的效果，你需要做的是对你盒子里的 img 应用类似的效果

# model-view-controller - codeigniter mvc,模型分离

> ID：11118360
> 
> 赞同：0
> 
> 时间：2012-06-20T11:17:43.307
> 
> 标签：model-view-controller, codeigniter, model

这是我在 codeigniter MVC 中的问题。

假设我有 3 个模型：（用户、电子邮件、付款）。当有人以某种方式付款时，控制器调用某种付款模型方法，该方法也可以从其他控制器调用。

那个方法，做一些数据库插入和更新，最后，它想向用户发送一封电子邮件，它已经有用户ID，但它需要用户名，电子邮件，这应该从用户表中获取，然后发送电子邮件。

我不喜欢付款模型可以访问用户表，我想从用户模型获取信息并使用电子邮件模型发送电子邮件。

通常我从控制器调用那些，我的意思是首先调用支付模型并获取结果并从用户模型获取用户信息，然后使用电子邮件模型，所有这些都在控制器中。

但是因为我需要在一些控制器中运行该模型的方法，所以我必须重复这些行，这不是我观点的正确方面。

问题：我应该在模型中调用其他模型还是在模型中使用其他模型表（在此选项中，如果我想重用该模型，如果其他表更改不正确，我应该更改它），还是有其他方法？

主要问题不完全是那一个它只是情况的例子。我还定义了一些函数来做这些事情并从控制器调用，但这也不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:32:06.403

全部放入图书馆。

因此，您的控制器调用库进行“付款”，并传递一些详细信息。然后，您的图书馆会执行您上面描述的所有功能 - 即调用支付模型、发送电子邮件等。

[您可以在此处了解有关 codeigniter 库的更多信息](http://codeigniter.com/user_guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:49:15.943

这是一个很好的解决方案。在 application/core 中定义 My_model.php。

```
Class My_model extends CI_Model{

    function __construct()
    {
        parent::__construct();
    }

    function get($where , $table){
        $query = $this->db->get_where($table, $where);
        return $query->result();
    }
} 
```

现在你的模型应该扩展 My_model 而不是 CI_Model。现在你可以这样称呼它。假设在您的控制器中您已经加载了电子邮件模型并且您想要访问用户模型。

```
 $where = array('user_id', $id); 
 $table = 'user';
 $this->email->get($table, $where); 
```

有关更多信息，请阅读本书
[http://codeigniter.com/forums/viewthread/211821/](http://codeigniter.com/forums/viewthread/211821/)

# asp.net - 如何在 asp.net razor 视图中显示自定义错误

> ID：11118367
> 
> 赞同：0
> 
> 时间：2012-06-20T11:18:26.807
> 
> 标签：asp.net, razor, webmatrix

如果数据库中不存在 UserId，我想显示“未找到配置文件”消息。我该如何实现它。下面的代码不起作用。

```
 UserId = Request.QueryString["UserId"];
           var db = Database.Open("mystring");
           var selectCommand = "SELECT * FROM UserProfile WHERE UserId = @0";
           var row = db.QuerySingle(selectCommand, UserId);

             if (row != null)
            {
                Email = row.Email;
                fullname = row.fullname;
                about = row.about;
             }else{
                 ModelState.AddFormError("No Profile Found.");

             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:24:59.953

试试这样：

```
@{
    var userId = Request.QueryString["UserId"];
    var db = Database.Open("mystring");
    var selectCommand = "SELECT * FROM UserProfile WHERE UserId = @0";
    var row = db.QuerySingle(selectCommand, UserId);
}

@if (row != null) {
    <div>
        Email: @row.Email
    </div>
    <div>
        Fullname: @row.fullname
    </div>
    <div>
        About: @row.about
    </div>
} else {
    <div>No Profile Found.</div>
} 
```

# c# - 如何明确定义匿名方法符合什么签名？

> ID：11118370
> 
> 赞同：1
> 
> 时间：2012-06-20T11:18:31.377
> 
> 标签：c#, c#-4.0, lambda, anonymous-methods

我声明了两种方法

```
public void MethodA(object o, Action<string> action) { }
public void MethodA(object o, Action<CustomType> action) { } 
```

如何使用匿名方法调用这些函数？我知道我可以传递一个指向方法的指针，但我有兴趣使用匿名方法来做这件事吗？目前我收到错误“......之间的雄心勃勃的电话”

```
MethodA(this, c => { }); // how to explicitly say that C is of type CustomType? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:19:42.397

```
MethodA(this, (CustomType c) => { }); 
```

或者，如果您想将委托类型明确声明为`Action<CustomType>`：

```
MethodA(this, (Action<CustomType>)(c => { })); 
```

# c# - Label1.text 不点击更新值

> ID：11118372
> 
> 赞同：0
> 
> 时间：2012-06-20T11:18:32.947
> 
> 标签：c#

我正在使用标签来告诉用户他是否已登录网站。所以我所做的是添加了一个标签并使用了 if/else 语句。但问题是。我希望 1 个链接标签有两个文本值

> “登录” && “退出。”

所以这就是问题所在。我有代码，但我必须在更新标签值之前单击标签：

```
private void label1_Click(object sender, EventArgs e)
{
    if (1 == 2)
    {
        label1.Text = "Logged out";
    }
    else
    {
        label1.Text = "Logged in";
    }

} 
```

我找不到另一个可以放置代码的地方，所以我不必单击它。另外，忽略 if(1==2) 我刚刚为调试所做的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:22:28.733

您需要将它放在 Page_Load 事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:28:28.070

您是否使用 Visual Studio + ASP 创建您的网站。

```
<asp:LoginStatus ID="LoginStatus1" runat="server" /> 
```

然后工具箱中有一个工具。

或者您可以将其添加到页面加载中。

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
     //Code
    }
} 
```

# c# - 对 ElementName 使用绑定

> ID：11118380
> 
> 赞同：1
> 
> 时间：2012-06-20T11:18:52.100
> 
> 标签：c#, binding, xmltable

我无法找到解决此问题的方法：

我正在使用 ItemControls 创建自己的表。要调整列的大小，我想将一个单元格的 Width 属性绑定到列的相应 ActualWidth 属性。

我尝试了以下方法，但它不起作用：

```
<StackPanel Orientation="Vertical">

    <Border BorderBrush="Black" BorderThickness="1">
        <ItemsControl ItemsSource="{Binding Data.Columns}" Margin="26,1,1,1">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <!-- here i set the name of the column (Code) -->
                    <Border BorderBrush="Black" BorderThickness="1,0,0,0" Width="100" x:Name="{Binding Code}">
                        <TextBlock Text="{Binding Header}" />
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Border>

    <ItemsControl ItemsSource="{Binding Data.Rows}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border BorderBrush="Black" BorderThickness="1,0,1,1">

                    <StackPanel Orientation="Horizontal" Margin="1">

                        <Grid Width="25">
                            <General:SeverityIconControl Severity="{Binding Severity}" />
                        </Grid>

                        <ItemsControl ItemsSource="{Binding Values}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <!-- and here i'd like to bind to the ActualWidth of the corresponding column (Code)
                                    but it is not working because ElementName={Binding LocalCode} does not work -->
                                    <Border BorderBrush="Black" BorderThickness="1,0,0,0" Width="{Binding ActualWidth, ElementName={Binding LocalCode}}">
                                        <TextBlock Text="{Binding Value}" />
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

有没有办法在不更改数据源的情况下解决这个问题（不幸的是无法编辑数据源）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:29:58.693

您无法绑定（[此处](http://msdn.microsoft.com/en-us/library/ms752290.aspx)`x:Name`有更多信息），因为只有在您调用构造函数时才会读取它。`InitializeComponent()`

最简单的方法是`DesiredWidth`向您的对象添加一列`Data`，并将两个宽度都绑定到该列（默认值为 100）。

# iphone - 带有 UIImage 的 UIView drawInRect 导致黑色背景

> ID：11118383
> 
> 赞同：3
> 
> 时间：2012-06-20T11:18:58.697
> 
> 标签：iphone, objective-c, ios, uiview, uiimage

我有以下代码：

```
@implementation MyImageView
@synthesize image; //image is a UIImage
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

}
return self;
}
-(void) removeFromSuperview
{
self.image = nil;
[super removeFromSuperview];
}

- (void)drawRect:(CGRect)rect
{
// Drawing code
if (self.image)
{

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextClearRect(context, rect);
    //the below 2 lines is to prove that the alpha channel of my UIImage is indeed drawn
    //CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);
    //CGContextFillRect(context, rect);
    CGContextDrawImage(context, self.bounds, self.image.CGImage);

}
}
@end 
```

当我运行代码时，我意识到我的视图的背景是黑色的。为了测试我的 UIImage 是否有问题，我使用了 CGContextClearRect(context, rect) 之后注释的 2 行。确实画了一个白色的背景。无论如何我可以删除黑色背景吗？当我初始化 MyImageView 时，我已经将 backgroundColor 设置为 [UIColor clearColor]。

非常感谢任何建议。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:34:42.817

将背景颜色设置为`[UIColor clearColor]`应该可以。还设置`self.opaque = NO`为启用透明度。

您还应该检查是否调用了正确的初始化程序。例如，如果视图是 XIB 文件的一部分，您需要实现`initWithCoder:`以及`initWithFrame:`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-17T16:36:03.863

我有同样的问题 - 这对我有用（Swift 示例）

```
 var backgroundImage = UIImage() //background image - size = 100x100
    var frontImage = UIImage()  //smaller image to be drawn in the middle

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(100, 100), false, 0.0) //false here indicates transparent

    var context = UIGraphicsGetCurrentContext()!

    UIGraphicsPushContext(context)

    backgroundImage.drawInRect(CGRectMake(0, 0, 100, 100))
    frontImage.drawInRect(CGRectMake((100 - frontImage.size.width) / 2, (diameter - frontImage.size.height) / 2, frontImage.size.width, frontImage.size.height))

    UIGraphicsPopContext()

    var outputImage = UIGraphicsGetImageFromCurrentImageContext()

    UIGraphicsEndImageContext() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:23:38.563

无论如何，您的 CGContext 都会颠倒过来，所以只需走简单的路线并使用

```
[self.image drawInRect:CGRectMake(rect)]; 
```

反而。

# r - 循环以在与模式匹配的特定列上跨行执行计算（在数据框中）？

> ID：11118384
> 
> 赞同：0
> 
> 时间：2012-06-20T11:18:59.927
> 
> 标签：r, for-loop, pattern-matching, aggregate, reshape

我有一个带有一些布尔值（1/0）的数据框，如下所示（对不起，我无法弄清楚如何将它变成智能表）

```
 Flag1.Sam Flag2.Sam Flag3.Sam Flag1.Ted Flag2.Ted Flag3.Ted
probe1         0         1         0         1         0         0
probe2         0         0         0         0         0         0
probe3         1         0         0         0         0         0
probe4         0         0         0         0         0         0
probe5         1         1         0         1         0         0 
```

我有 64 个样本（Sam/Ted....等），它们位于名为 files 的列表中，即；

```
files <- c("Sam", "Ted", "Ann", ....) 
```

我想创建一个列，对每个样本的标志值求和，以创建以下内容：

```
 Sam Ted 
probe1.flagsum   1   1
probe2.flagsum   0   0 
probe3.flagsum   1   0 
probe4.flagsum   0   0
probe5.flagsum   2   1 
```

我对 R 相当陌生，试图在需要了解的基础上学习，但我尝试了以下方法：

```
for(i in files) {
    FLAGS$i <- cbind(sapply(i, function(y) { 
        #greping columns to filter for one sample
        filter1 <- grep(names(filters), pattern=y)
        #print out the summed values for those columns  
        FLAGS$y <-rowSums(filters[,(filter1)])
    }
} 
```

上面的代码不起作用，我对如何前进有点迷茫。

任何人都可以帮助我解决这个问题或指出我要使用的命令/工具的正确方向。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:36:18.683

如果`filters`是你的输入矩阵和`FLAGS`你想要的输出矩阵，那么我会（天真地）做这样的事情：

```
FLAGS <- matrix(0,nrow=nrow(filters),ncol=length(files))
for(i in 1:length(files)){
    grep(files[i],colnames(filters)) -> index
    FLAGS[,i] <- rowSums(filters[,index])
    }
colnames(FLAGS) <- files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:36:48.040

假设您的矩阵称为输入

```
input <- matrix(rbinom(30, 1, 0.5), ncol = 6)
colnames(input) <- c("F1.S", "F2.S", "F3.S", "F1.T", "F2.T", "F3.T")
rownames(input) <- paste("probe", 1:5, sep = "")
input <- as.data.frame(input)

library(reshape)
input$probe <- rownames(input)
Molten <- melt(input, id.vars = "probe")
Molten$ID <- gsub("^.*\\.", "", levels(Molten$variable))[Molten$variable]
cast(probe ~ ID, data = Molten, fun = "sum") 
```

使用来自 mrdwab 的 dat 框架进行更新

```
dat = read.table(header=TRUE, text="Flag1.Sam Flag2.Sam   Flag3.Sam   Flag1.Ted   Flag2.Ted   Flag3.Ted
probe1 0   1   0   1   0   0
probe2 0   0   0   0   0   0
probe3 1   0   0   0   0   0
probe4 0   0   0   0   0   0
probe5 1   1   0   1   0   0")

library(reshape)
dat$probe <- rownames(dat)
Molten <- melt(dat, id.vars = "probe")
Molten$ID <- gsub("^.*\\.", "", levels(Molten$variable))[Molten$variable]
cast(probe ~ ID, data = Molten, fun = "sum") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:18:42.343

这在基础 R 中很容易实现`reshape`，尽管使用`reshape`or`reshape2`包可能更直观。

这是base R中的一个解决方案：

```
# Here's your data in its current form
dat = read.table(header=TRUE, text="Flag1.Sam Flag2.Sam   Flag3.Sam   Flag1.Ted   Flag2.Ted   Flag3.Ted
probe1 0   1   0   1   0   0
probe2 0   0   0   0   0   0
probe3 1   0   0   0   0   0
probe4 0   0   0   0   0   0
probe5 1   1   0   1   0   0")
# Generate an ID row
dat$id = row.names(dat)
# Reshape wide to long
r.dat = reshape(dat, direction="long", 
                timevar="probe", 
                varying=1:6, sep=".")
# Calculate row sums
r.dat$sum = rowSums(r.dat[3:5])
# Reshape back to wide format, dropping what you're not interested in
reshape(r.dat, direction="wide", 
        idvar="id", timevar="probe", 
        drop=3:5)
##                id sum.Sam sum.Ted
## probe1.Sam probe1       1       1
## probe2.Sam probe2       0       0
## probe3.Sam probe3       1       0
## probe4.Sam probe4       0       0
## probe5.Sam probe5       2       1 
```

## 不止一种给猫剥皮的方法

你也可以创建一个像这样的函数：

```
myFun = function(data, varnames) {
  temp = vector("list", length(varnames))
  for (i in 1:length(varnames)) {
    temp[[i]] = colSums(t(dat[grep(varnames[i], names(data))]))
    names(temp)[[i]] = varnames[i]
  }
  data.frame(temp)
} 
```

然后，利用您拥有的名称向量：

```
files = c("Sam", "Ted")
myFun(dat, files)
##        Sam Ted
## probe1   1   1
## probe2   0   0
## probe3   1   0
## probe4   0   0
## probe5   2   1 
```

享受！

# css - 多个 CSS @media 条件似乎不起作用

> ID：11118385
> 
> 赞同：5
> 
> 时间：2012-06-20T11:19:02.167
> 
> 标签：css

我正在尝试针对不同的屏幕分辨率修改 CSS 中的几个类，我的目标是：

*   默认应用 CSS 为 1200+ 宽度，
*   嵌入在 css 中的媒体查询，用于 601 到 1199 像素之间的分辨率，//这不起作用
*   嵌入在 css 中的媒体查询，分辨率为 600 像素及以下

例如，当我使用单一宽度条件时，`@media screen and (max-width: 600px) {`css 将按应有的方式应用。

但是，当我尝试`@media screen and (max-width: 1199 px) and (min-width: 601){`这种风格时，它永远不会被应用..

我已经尝试交换这些条件的顺序，并且只是`@media screen and (max-width: 1199 px)`基于 600px 规则将在之后覆盖它，但由于某种原因它似乎不起作用。为了清楚起见，当我将屏幕缩小到小于 600 像素时，我要么得到默认样式，要么得到“最大宽度：600 像素”样式，我似乎无法获得适用于中间地带的样式。

我的 CSS 中有什么明显的错误吗？/建议？将不胜感激！

我将我的 html 和 css 塞进了一个 jsfiddle，供任何想亲自查看[http://jsfiddle.net/X6cZ7/3/](http://jsfiddle.net/X6cZ7/3/)的人使用（在您拖动网站视图时观察导航栏 li 项，它们在 < 600px，但在 <1199 时也应该看起来是红色的（用于测试），但他们没有）只在 Chrome 上测试，以防万一。

CSS（底部的相关@media 内容..）：

```
* {margin: 0; padding:0;}
body
{
font: normal 100% 'Poiret One', 'Trebuchet MS', sans-serif;
color: Grey;
background-image: url('Images/background_gradient.png');
background-repeat:repeat-x;
background-color: #d4ffaa;
margin: 0 auto;
height: auto;
max-width: 90%; 
}

h2
{ 
margin: 0.6em 0;
color: Grey;
border-bottom: 2px solid #d4ffaa; 
font: normal 2em 'Poiret One', 'Trebuchet MS', sans-serif;
}

#central_container
{
width: 100%;
margin: 0 auto;
height: 100%;
float: left;
}
#leftside_container
{
float: left;
width: 67.1%; 
clear: left;
}
    #header_container
    {
    width: 100%;
    max-height: 300px;
    height: 15em;
    }
        #header_title
        {
        width: 100%;
        height: 80%;
        }
            #header_title h1{ font-size: 4em; color: Ivory;}

        #navbar_container
        {
        width: 100%;
        height: 20%;
        }
            .navbar_links ul{ list-style-type: none; }
            .navbar_links li 
            { 
            display: inline;
            size: 4em;
            }
            .navbar_links a:link, a:visited 
            {
            font-size: 1.5em;
            text-align: center;
            text-decoration:none;
            padding: 0.1em 0.4em;
            color: Ivory;
            border-left:10px solid transparent;
            border-right:10px solid transparent;
            border-bottom: 10px solid Ivory;
            }
            .navbar_links a:hover, a:active 
            {
            color: Grey;
            border-bottom: 10px solid #d4ffaa;
            }

        #currentpage_container
        {
        background-color: Ivory;
        width: 100%;
        height: 20%;
        }
            #currentpage_content
            {
            font-family: 'Trebuchet Ms';
            padding: 1em 3em;
            }
            #currentpage_content p { padding: 0.8em;}

#rightside_container
{
float: right;
width: 33%;
}
    #register_container
    {
    width: 100%;
    max-height: 300px;
    height: 15em;
    }
        .bubble{
        background-color: Ivory;
        border-radius: 15px;
        -moz-border-radius: 15px;
        display: inline-block;
        position: relative;
        height: 80%;
        width: 100%;
        margin: 1em 0;
        }
        .bubble p 
        {
        padding: 1em;
        white-space: preline;
        font-weight: bold; 
        }
        .bubble::after { /*arrow*/
        border-top: 30px solid transparent;
        border-bottom: 30px solid transparent; 
        border-right: 30px solid Ivory; 
        content: '';
        position: absolute;
        left: -30px;
        top: 50%;
        }

    #contact_container
    {
    background-color: Ivory;
    width: 100%;
    }
    #contacts_content{ padding: 1em 3em; }
        #contacts_content .text
        {
        font: normal 0.9em 'Trebuchet Ms';
        padding: 0.8em 0;
        }
        .contactNum, .contactEmail { font-size:1.5em; }
        .contactNum::before { content:url(Images/phone_icon.gif);}
        .contactEmail::before { content:url(Images/email_icon.gif);}

    #logos_content
    {
    padding: 0.5em 3em;
    height: 150px;
    }
        .logo
        {
        display: none;
        max-width: 40%;
        position:relative;
        max-height: 40%;
        }
        .logo2
        {
        display: none;
        max-width: 40%;
        position:relative;
        max-height: 40%;
        right: -50%;
        }
    #social_content
    {
    padding: 1em 3em;
    }

/* SMALLER RESOLUTION CHANGES */

@media screen and (max-width: 1199 px) and (min-width: 601){
    .navbar_links ul{ list-style-type: none; }
    .navbar_links li 
    { 
    display: inline;
    background: Ivory;
    }
    .navbar_links a:link, a:visited 
    {
    font-size: 1.5em;
    padding: 0.1em 0.4em;
    color: red;
    border-left:3px solid transparent;
    border-right:3px solid transparent;
    border-bottom: 3px solid #d4ffaa;
    }
    .navbar_links a:hover, a:active 
    {
    color: Grey;
    border-bottom: 3px solid Grey;
    }
}
@media screen and (max-width: 600px) {
    #central_container,
    #leftside_container,
    #rightside_container,
    #header_container,
    #header_title,
    #navbar_container,
    #currentpage_container
    {
    float: none;
    width: auto;
    height: auto;
    }

    #header_title h1{ font-size: 3em; color: Ivory;}

    .navbar_links ul{ list-style-type: none; margin-bottom:1em;}
    .navbar_links li 
    { 
    display: inline;
    }
    .navbar_links a:link, a:visited 
    {
    padding: 0;
    border-left: 2px solid transparent;
    border-right: 2px solid transparent;
    border-bottom: 2px solid Ivory;
    }
    .navbar_links a:hover, a:active 
    {
    border-bottom: 2px solid #d4ffaa;
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T11:25:03.927

在您的 css 中有一些输入错误，因此它不起作用，请检查下面

## 不正确

```
@media screen and (max-width: 1199 px) and (min-width: 601){

} 
```

## 正确一个

```
@media screen and (min-width: 601px) and (max-width: 1199px){

} 
```

**编辑：**

值和单位之间不应该有任何空格，即`1199 px`应该是错误的`1199px`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:34:03.563

哟忘了把“px”放在最大宽度：1199。我认为这是造成问题。

无论如何，您应该首先为移动设备编码并继续为更大的分辨率编码。

你的小提琴：http: [//jsfiddle.net/X6cZ7/4/](http://jsfiddle.net/X6cZ7/4/)

# javascript - 使用 Google Maps API 侦听器时检索 JavaScript 的 eventObject

> ID：11118386
> 
> 赞同：1
> 
> 时间：2012-06-20T11:19:02.510
> 
> 标签：javascript, internet-explorer, google-maps, firefox, google-maps-api-3

在谷歌地图 API V3 中，如果用户控制点击地图，我想在地图上添加一个标记。为此，我在地图中添加了一个侦听器，如下所示 -

```
google.maps.event.addListener(map, 'click', function(e){
if (event.ctrlKey)
    add_marker(e.position);
}); 
```

由侦听器传递的*e*参数包含一些数据，但主要是关于单击的位置，而我希望能够询问在用户单击地图期间是否按下了控制按钮。

我发现 chrome 有一个对象*event*，它是默认的 Javascript 的 eventObject，其中包含我需要的数据（ctrlKey），这确实适用于 chrome。

但是，当我在 FF 中尝试相同的代码时，它找不到名为“事件”的对象，我也找不到检索它的方法。

感谢您帮助我找到适用于 IE 的解决方案。

谢谢，丹克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:49:44.230

API 没有说明访问 DOM-event-object 的任何内容。

传递给回调函数的参数当前包含一个**`b`**引用事件对象的属性，因此您可以使用**`e.b.ctrlKey`**

但由于这没有记录，它不可靠，明天可能会改变。

**另一种选择：**
您可以在不使用 API 方法的情况下观察包含地图的 div 的事件：

```
map.getDiv().onclick=function(e)
{
  e=window.event||e;
  if (e.ctrlKey)
  {
    //do something
  }
} 
```

# android - 如何在点击活动时将活动显示为全屏，反之亦然？

> ID：11118387
> 
> 赞同：0
> 
> 时间：2012-06-20T11:19:14.097
> 
> 标签：android, android-webview, fullscreen, android-tabhost, android-tabactivity

在我的应用程序中，我正在使用 Tabhost 并且我已将 webview 放置在选项卡主机中以显示内容。当用户点击屏幕时，内容应以全屏显示，反之亦然，但这不会发生。如何实现这一点？请建议我一些想法！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:37:40.600

利用

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(intent); 
```

这个代码在你的事件监听器上。

# hibernate - Hibernate：Hibernate 中的一对多映射

> ID：11118388
> 
> 赞同：0
> 
> 时间：2012-06-20T11:19:22.043
> 
> 标签：hibernate

我正在尝试在 Hibernate 中学习一对多映射。

下面是我的两个java类Shelf.java

```
 public class Shelf {
    private Integer id;
    private String code;
    private Set<Book> books = new HashSet<Book>();

//setter - getter methods

}

Book.java

    public class Book {
    private String name;
    private Integer id;
    private Shelf shelf;

//setter - getter methods
} 
```

我对上述代码有以下疑问

1.  应该把书架当作主表，把书当作子表？？（因为 Shelf.java 包含很多 Object Book 的 Objects ?? 或者没有任何这样的经验法则来决定哪个是 Master 和 Child Table ）

2.

```
 <many-to-one name="shelf" class="Shelf" >
            <column name="SHELF_ID" not-null="true"></column>
        </many-to-one> 
```

在 Book.hbm.xml 文件中的 hbm 映射文件中，我们有

为什么这里是多对一标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:11:34.557

[1] 在这样的 1-N 关系中，您可以配置的应该是所有者方。所有者方负责管理关系，设置另一方是程序员的责任，因此对象图将保持一致。（如果您忘记这样做，Hibernate 将保存关系，但是您的对象图将暂时不一致）。

在这种情况下，拥有方可以是 Shelf 或 Book。除非您有其他选择的理由，否则选择 Shelf 作为所有者更合乎逻辑，这将使您以后在处理分离实体时更轻松。

[2] 在 Book 方面，您需要一个多对一关系，在 Shelf 方面，您需要一个一对多关系，请参见下面的映射。您需要这两者的原因是让 Hibernate 知道关系的两端应该连接以形成一个关系，而不应该作为单独的（单边）关系处理。

在 .hbm 文件中，您可以：

```
<class name="com.company.Shelf" table="SHELF">
        <id name="id" type="integer" column="ID">
            <generator class="increment" />
        </id>
        <property name="code" type="string" not-null="true" length="100" column="CODE" />
        <set name="books" table="BOOKS" cascade="all">
            <key column="SHELF_ID" />
            <one-to-many class="com.company.Book" />
        </set>
</class>

<class name="com.company.Book" table="BOOK">
        <id name="id" type="int" column="id">
            <generator class="increment" />
        </id>
        <property name="name" type="java.lang.String" column="name" length="255" />
        <many-to-one name="shelf" class="com.company.shelf" column="SHELF_ID" />
</class> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:20:44.773

1.  最好把它称为`parent-child relation`then`master-child relation`

2.  *hibernate 中的关系是单向的。* 这意味着当您`one-to-many relation`在 Shelf 中创建时，`many-to-one`关系不会在 Book 类中自动创建。`many-to-one`如果需要，您需要为 Book显式创建关系。

# windows-phone-7 - 从 ListPicker 获取自定义数据

> ID：11118390
> 
> 赞同：0
> 
> 时间：2012-06-20T11:19:35.380
> 
> 标签：windows-phone-7, listpicker

我的应用程序中有一个 ListPicker，其定义如下：

```
<DataTemplate x:Name="PickerItemTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding code}" Margin="12 0 0 0" Visibility="Collapsed"/>
                <TextBlock Text="{Binding name}" Margin="12 0 0 0"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Name="PickerFullModeItemTemplate">
            <StackPanel Orientation="Horizontal" Margin="16 21 0 20">
                <TextBlock Text="{Binding name}" Margin="16 0 0 0"
FontSize="43" FontFamily="{StaticResource PhoneFontFamilyLight}"/>
            </StackPanel>
        </DataTemplate>

<toolkit:ListPicker x:Name="_1stLanguageListPicker"
                    ItemTemplate="{StaticResource PickerItemTemplate}"
                    FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}" 
                    Header="1st Specie Name Language"
                    FullModeHeader="1st Specie Name Language"
                    CacheMode="BitmapCache"/> 
```

如您所见，我只向用户显示全名，隐藏代码。但作为一名程序员，我想使用代号。

如何获得这个名字？

我试过这样

```
if (_1stLanguageListPicker.SelectedIndex == 0)
{
    firstlang = "GB" 
} 
```

但不起作用（一些布尔到 int 的问题，正常 = 也不起作用），这对于许多项目列表来说是一个不好的方法，因为您必须放置许多 IF 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:06:23.730

我的理解是，你的问题是在后面的代码中获取代码TextBlock的数据。

首先给你的 TextBlock 起个名字

```
<TextBlock x:Name="codeTextBlock" Text="{Binding code}" /> 
```

然后使用以下代码访问“代码”

```
if (listPicker.SelectedIndex > -1)
        {
            var item = listPicker.ItemContainerGenerator.ContainerFromIndex(listPicker.SelectedIndex);
            SearchVisualTree(item);
        } 
```

在这里，SearchVisualTree() 是：

```
 private void SearchVisualTree(DependencyObject targetElement)
    {
        var count = VisualTreeHelper.GetChildrenCount(targetElement);
        if (count == 0)
            return;

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(targetElement, i);
            if (child is TextBlock)
            {
                TextBlock targetItem = (TextBlock)child;

                if (targetItem.Name == "codeTextBlock")
                {
                    var code = targetItem.Text;
                    return;
                }
            }
            else
            {
                SearchVisualTree(child);
            }
        }
    } 
```

这里一个可能的问题是（您面临的），我们无法在加载 ListPicker 之前访问 DataTemplate。在其他工作中，在为 ListPicker 生成 DataTemplate 之前。所以上面代码的放置非常重要。

希望这可以帮助

# jquery - Jquery 生成的 iframe - 没有点击的引用

> ID：11118391
> 
> 赞同：0
> 
> 时间：2012-06-20T11:19:41.587
> 
> 标签：jquery, iframe, opera, referer

这是在站点上生成 iframe 的示例代码

```
<script type="text/javascript">
    var config = {'pid'   : '2287534092a5acc28854b424e8b77d14'};
    window.onload = function(){var code = document.createElement('script'); code.type = 'text/javascript'; code.async = true; code.src = 'http://site.com/testscript.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(code, s);};
</script>
<div name="site[]" mob_width="100%" mob_height="28" mob_bgcolor="orange" mob_linkcolor="green"></div> 
```

示例站点是 donmob.com - 如果您在页脚看到一个绿色图形横幅 - 此横幅显示在 iframe 中 - 所以当我们点击横幅时，我们必须像引用者一样获取 iframe 的 url 地址。问题是 Opera Mini 没有为来自 iframe 的点击发送引荐来源网址 - 请帮助获取此浏览器的引荐来源网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:27:58.223

Opera Mini 通常是发送 HTTP Referer。您能否使用[Opera 的回声系统进行](http://echo.opera.com/)测试，并使用您获得的原始日志更新问题。

# wpf - 多重绑定

> ID：11118401
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:22.650
> 
> 标签：wpf, caliburn.micro

在我的 WPF Caliburn.Micro 应用程序中，我有一个数据网格和一个带有相应 ModelView bool 属性的复选框。我需要将复选框绑定到数据网格的 OneWay 字段之一（这很容易）。但我也想将同一个复选框绑定到属性 OneWayToSource。你能告诉我我该怎么做吗？我看不出多重绑定在这里有什么帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:23:49.540

我不知道这是每行的`DataGrid`复选框，还是具有特定 id 或索引的行的复选框。无论哪种方式，您都可以使用`TwoWay`绑定，如果您的视图模型属性具有 getter 和 setter，这将是默认值。

您的视图模型属性应指向`DataGrid`绑定到的记录的实例。

例如

**查看模型**

```
public ObservableCollection<Item> MyGridItems { get; set; }

public MyViewModel()
{
   this.MyGridItems = ...
   this.MySpecialItem = this.MyGridItems[0];
}

public Item MySpecialItem 
{
   get { return this.mySpecialItem; }
   set { this.mySpecialItem = value; // notify of property change here }
} 
```

**看法**

```
<CheckBox IsChecked="{Binding MySpecialItem.MyBooleanProperty}" /> 
```

# ios - 为 POST 请求连接 JSON 字符串

> ID：11118403
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:31.163
> 
> 标签：ios, database, json, asihttprequest, concatenation

我正在尝试通过 JSON 发送数据，将包含许多表的大型数据库提交给 Web 服务。提取数据并将其转换为 JSON 字符串工作正常，但到目前为止，我只实现了一次发送一个表，每个表都有自己的 ASIHTTPRequest。我的问题是连接从每个表生成的所有 JSON 字符串是否是一个好主意，或者我是否应该先将这些表组合成抽象数据形式，然后再将它们全部转换为 JSON？

或者，如果有任何其他建议也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:24:36.403

这完全取决于您的需求。如果表不相关，则多个请求可能更合适，因为如果一个请求失败（超时或连接丢失），它不会影响任何其他请求。但是，如果您有相互关联的表，最好一次性发送所有数据，以便所有数据全部传输或不传输，这样您就不会导致关联中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:22:22.727

我认为您提出的两种选择中的任何一种都没有问题

但我建议在转换之前连接数据库中的表，这样你就不用处理字符串连接和其他形式的进程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:28:05.293

您不能只是“连接”JSON 字符串。结果将不是合法的 JSON。你需要以某种方式“拼接”它们。

而且，当然，另一端的服务器必须能够解析生成的 JSON——它可能一次只需要一个表，例如。

# android - expandablelistview 的背景

> ID：11118404
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:37.117
> 
> 标签：android, expandablelistview

如果我有一个具有自定义布局（group.xml 和 child.xml）的可扩展列表视图，那么有任何方法可以为所有行设置 9.png 背景（组 + 子项？如果是展开，则只有在折叠时才行）。

例如我有4组

```
1row collapsed with background
2row collapsed with backgound
3row expand
  group   <---- I want to use 1 background for group.xml and child.xml, this is it, the group background expands to be background for child too
  child
5row collapsed with backgruond 
```

**或者，当我使用 expandablelistview 并定义一个 row.xml 背景时，当我展开一个 groupo 时，背景也会对孩子产生影响？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:05:57.507

恐怕这是不可能的。由于您在 ExpandableList 中引用两个不同的资源文件，因此您不能将它们分组为单个视图。在这种情况下，您可以将 9 补丁设置为您可能不需要的总可扩展列表视图。所以这里是关于方法的回合。

1）您可以拥有三组图像。一旦完全关闭图像。第二张图片看起来像第一张图片的上半部分，第三张图片看起来像第一张图片的下半部分。

2) 将 GroupExapnded() 上的侦听器添加到您的 ExpandableListView。现在这将返回视图的位置、视图状态的布尔标志（无论是展开还是折叠）以及该视图的对象。

3）现在基于布尔标志，您必须使用图像作为背景。

会有两种情况，

1）对于展开状态，您必须将第二张图像应用于组，将第三张图像应用于孩子。

2）如果组被折叠，您必须将第一张图像作为背景应用到组视图。

这是我自己知道的最丑陋的方式。如果你能得到任何更好的解决方案，请告诉我。

# visual-studio - Microsoft Report Viewer 无法正确显示 R2 功能

> ID：11118405
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:40.000
> 
> 标签：visual-studio, sql-server-2008, ssrs-2008, reporting

我们有 SQL Server 2008 R2 和 Visual Studio 2008。我使用报表查看器在 Web 应用程序中显示报表，但所有 R2 功能都没有正确呈现（特别是使用的趋势图像）。

我试图找到根本原因： 1\. 导出功能正在显示图像，但在 webbrowser 中不可见。2\. 我尝试使用 iFrame，但得到了类似的结果。

问：如何修复呈现但未显示的 html 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:42:36.007

为了解决上述问题，我必须安装更新版本的 Microsoft.ReportViewer.WebForms (v10.0.0.0)。

这是微软在visual studio 2010 SP1 中提供的补丁。

请找到以下链接：

[http://blogs.msdn.com/b/brianhartman/archive/2011/03/31/visual-studio-2010-sp1.aspx](http://blogs.msdn.com/b/brianhartman/archive/2011/03/31/visual-studio-2010-sp1.aspx)

令人惊讶的是它解决了我所有的问题:)

# python - django - 获取 url 参数

> ID：11118407
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:47.517
> 
> 标签：python, django

我有这个 url 参数：

```
http://127.0.0.1:8000/information/vimeo/?oauth_token=xxxxxxxxxxxxxxxxxxxxxxxx&oauth_verifier=xxxxxxxxxxxxxxxxxxxxxx 
```

如何获取`oauth_verifier`url 中的值。

这段代码有效吗？

```
oauth_verifier = request.GET.get('oauth_verifier') 
```

还是我必须在 urls.py 中提及 reg exp？

对于这种类型的问题，我很抱歉。我的编码很长，我不知道如何在 shell 中检查这个特定的代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:27:07.280

如果您在 urlConf 中提到这一点，您将把它作为您的视图的参数。如果没有，您将不得不使用您在问题中编写的代码。这取决于您，但请记住使用 urlConf 的目的是提高 url 的可读性。

# ruby - Nokogiri (Ruby)：提取每个节点内特定属性的标签内容

> ID：11118411
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:54.930
> 
> 标签：ruby, xml, nokogiri

我有一个具有以下结构的 XML

```
<Root>
   <Batch name="value">
      <Document id="ID1">
         <Tags>
            <Tag id="ID11" name="name11">Contents</Tag>
            <Tag id="ID12" name="name12">Contents</Tag>
         </Tags>
      </Document>

      <Document id="ID2">
         <Tags>
            <Tag id="ID21" name="name21">Contents</Tag>
            <Tag id="ID22" name="name22">Contents</Tag>
         </Tags>
      </Document>
   </Batch>
</Root> 
```

我想使用以下内容提取每个 Document 节点的特定标签的内容：

```
xml.xpath('//Document/Tags').each do |node|
   puts xml.xpath('//Root/Batch/Document/Tags/Tag[@id="ID11"]').text
end 
```

预计会为每 2 个节点提取 id = "ID11" 的标签内容，但什么也不检索。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:07:57.367

您在 xpath 中有一个小错误，您使用的是 /Documents/Document 而您粘贴的 XML 有点不同。

这应该有效：

```
//Root/Batch/Document/Tags/Tag[@id="ID11"] 
```

我最喜欢的方法是使用 #css 方法，如下所示：

```
xml.css('Tag[@id="ID11"]').each do |node|
  puts node.text
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:02:14.583

似乎使用的 xpath 是错误的。

```
'//Root/Batch/Documents/Document/Tags/Tag[@id="ID11"]'
shoud be
'//Root/Batch/Document/Tags/Tag[@id="ID11"]' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:03:26.643

我设法让它使用以下代码：

```
xml.xpath('//Document/Tags').each do |node|
   node.xpath("Tag[@id='ID11']").text
end 
```

# entity-framework - EF 4.3 中的持久更改 - 更改跟踪问题

> ID：11118412
> 
> 赞同：0
> 
> 时间：2012-06-20T11:20:58.470
> 
> 标签：entity-framework, entity-framework-4.3

我有一个类 ReportConfigurationManager 管理针对 UserReport 实体的 CRUD 操作。感兴趣的两个操作是“Get”和“SaveUpdate”。在这两种情况下，我都将操作包装在 using 语句中，以便在查询结束时处理 DbContext。

现在这些方法最终将成为 WCF 服务的一部分，但它们也可以在服务内部调用。我目前的困难在于获得一组直接调用 ReportConfigurationManager 的单元测试。

我可以创建一个新的 UserReport 并保存它（这花了我一段时间来解决，因为该实体有几个已经存在于数据库中的嵌套对象 - 我需要在调用 Add 之前将每个对象依次“附加”到上下文中UserReport 以使其正确保存。

我现在的问题是更新。

尽管有

```
 context.Configuration.ProxyCreationEnabled = false;
    context.Configuration.AutoDetectChangesEnabled = false; 
```

在使用 ReportConfigurationManager 的所有方法上，当我附加 UserReport 时，它以经典的“ObjectStateManager 中已经存在具有相同键的对象”失败（我认为禁用更改跟踪是为了处理这个问题？）。

所以现在我已经切换到使用我在[这里找到的以下代码](https://stackoverflow.com/questions/6033638/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-the-object)

```
 public UserReport SaveUpdateUserReport(UserReport userReport)
    {
        using (var context = new ReportDataEF())
        {
            context.Configuration.ProxyCreationEnabled = false;
            context.Configuration.AutoDetectChangesEnabled = false;
            if (userReport.Id > 0)
            {
                {
                    UserReport oldReport = context.UserReports.Where(ur => ur.Id == userReport.Id).FirstOrDefault();
                    context.Entry(oldReport).CurrentValues.SetValues(userReport);
                }                  
            }
            else
            {
                //Need to attach everything to prevent EF trying to create duplicates in the database
                context.ReportTopTypes.Attach(userReport.ReportTopType);
                context.ReportWindows.Attach(userReport.ReportWindow);
                context.ReportSortOptions.Attach(userReport.ReportSortOption);

                foreach (var col in userReport.ReportColumnGroups)
                {
                    context.ReportColumnGroups.Attach(col);
                }

                context.ReportTemplates.Attach(userReport.ReportTemplate);

                //just add the new data
                context.UserReports.Add(userReport);
            }

            context.SaveChanges();
        }

        return userReport;
    } 
```

我担心我的代码看起来很费力——我需要先获取旧对象的副本，然后才能保存更新的副本？我也不相信我的保存新逻辑。

那么这种方法是否正确，或者是否有更好的方法来编写上述内容？

其他事情的进一步细节：

因为我将通过 WCF 发送对象图。我已经实现了急切加载：

```
 public static DbQuery<ReportTemplate> IncludeAll(this DbQuery<ReportTemplate> self)
    {
        return self
            .Include("ReportColumnGroups.ReportColumns.ReportColumnType")
            .Include("ReportColumnGroups.ReportColumnType")
            .Include("ReportSortOptions.ReportSortColumns.ReportColumn.ReportColumnType")
            .Include("ReportSortOptions.ReportSortColumns.ReportSortType");
    }

    public static DbQuery<UserReport> IncludeAll(this DbQuery<UserReport> self)
    {
        return self
            .Include("ReportTemplate")
            .Include("ReportTopType")
            .Include("ReportWindow")
            .Include("ReportSortOption.ReportSortColumns.ReportColumn.ReportColumnType")
            .Include("ReportSortOption.ReportSortColumns.ReportSortType")
            .Include("ReportColumnGroups.ReportColumns.ReportColumnType")
            .Include("ReportColumnGroups.ReportColumnType");

    }

    public static DbQuery<ReportSortOption> IncludeAll(this DbQuery<ReportSortOption> self)
    {
        return self
            .Include("ReportSortColumns.ReportColumn.ReportColumnType")
            .Include("ReportSortColumns.ReportSortType");
    }

    public static DbQuery<ReportColumnGroup> IncludeAll(this DbQuery<ReportColumnGroup> self)
    {
        return self
            .Include("ReportColumn.ReportColumnType")
            .Include("ReportColumnType");
    }

    public static DbQuery<ReportColumn> IncludeAll(this DbQuery<ReportColumn> self)
    {
        return self
            .Include("ReportColumnType");
    }

    public static DbQuery<ReportSortColumn> IncludeAll(this DbQuery<ReportSortColumn> self)
    {
        return self
            .Include("ReportColumn.ReportColumnType")
            .Include("ReportSortType");
    } 
```

我有一组静态的缓存数据，如下所示：

```
using (var context = new ReportDataEF())
        {
            context.Configuration.ProxyCreationEnabled = false;
            context.Configuration.AutoDetectChangesEnabled = false;
            reportConfigurationData = new ReportingMetaData()
                                          {
                                              WatchTypes = context.WatchTypes.ToList(),
                                              ReportTemplates = context.ReportTemplates.IncludeAll().ToList(),
                                              ReportTopTypes = context.ReportTopTypes.ToList(),
                                              ReportWindows = context.ReportWindows.ToList(),
                                              ReportSortOptions =
                                                  context.ReportSortOptions.IncludeAll().ToList()
                                          };
        } 
```

我检索 UserReports 如下：

```
public UserReport GetUserReport(int userReportId)
    {
        using (var context = new ReportDataEF())
        {
            context.Configuration.ProxyCreationEnabled = false;
            context.Configuration.AutoDetectChangesEnabled = false;
            var visibleReports =
                context.UserReports.IncludeAll().Where(ur => ur.Id == userReportId).FirstOrDefault();
            return visibleReports;
        }
    } 
```

我关心的测试从数据库中获取现有的 UserReport，使用静态数据类中的对象更新其 ReportTemplate 和 ReportColumnGroups 属性，然后尝试保存更新的 UserReport。

使用 Ladislav 的答案中的代码，当我尝试附加 UserReport 时，这会失败，大概是因为我附加到它的对象之一已经存在于数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:11:28.503

是的，还有另一种方法。首先认为您应该知道的是，EF 不支持部分附加的对象图，因此两者都`Attach`具有`Add`附加或添加图中尚未被上下文跟踪的所有实体的副作用。这将大大简化您的插入代码。

```
public UserReport SaveUpdateUserReport(UserReport userReport)
{
    using (var context = new ReportDataEF())
    {
        context.Configuration.ProxyCreationEnabled = false;
        context.Configuration.AutoDetectChangesEnabled = false;

        // Now all entities in the graph are attached in unchanged state
        context.ReportTopTypes.Attach(userReport);

        if (userReport.Id > 0 && 
            context.UserReports.Any(ur => ur.Id == userReport.Id))
        {
            context.Entry(userReport).State = EntityState.Modified;
        }
        else
        {
            context.Entry(userReport).State = EntityState.Added;
        }

        context.SaveChanges();
    }

    return userReport;
} 
```

这相当于您的原始代码。您不会再次加载用户报告 - 您只需检查它在数据库中的存在。这段代码有很多问题 - 例如，如果您更改了任何其他相关对象，它将不会被持久化到数据库，因为当前它的状态是`Unchanged`. 如果您需要更改关系，情况可能会更加复杂。

# sql - Rails STI 与子类的关联

> ID：11118413
> 
> 赞同：7
> 
> 时间：2012-06-20T11:21:05.817
> 
> 标签：sql, ruby-on-rails, activerecord, sti

在使用 STI 时，从与 rails 3 的 has_many 关联中获取集合时，我遇到了一些奇怪的行为。我有：

```
class Branch < ActiveRecord::Base
   has_many :employees, class_name: 'User::Employee'
   has_many :admins, class_name: 'User::BranchAdmin'
end

class User < ActiveRecord::Base
end

class User::Employee < User
  belongs_to :branch
end

class User::BranchAdmin < User::Employee
end 
```

期望的行为是`branch.employees`返回所有员工，包括分支管理员。分支管理员似乎仅在被 访问时才在此集合下“加载” `branch.admins`，这是控制台的输出：

```
Branch.first.employees.count
=> 2

Branch.first.admins.count
=> 1

Branch.first.employees.count
=> 3 
```

这可以在生成的 SQL 中看到，第一次：

```
SELECT COUNT(*) FROM "users" WHERE "users"."type" IN ('User::Employee') AND "users"."branch_id" = 1 
```

第二次：

```
SELECT COUNT(*) FROM "users" WHERE "users"."type" IN ('User::Employee', 'User::BranchAdmin') AND "users"."branch_id" = 1 
```

我可以通过指定来解决这个问题：

```
class Branch < ActiveRecord::Base
   has_many :employees, class_name: 'User'
   has_many :admins, class_name: 'User::BranchAdmin'
end 
```

因为它们都是从它们的 branch_id 中找到的，但是如果我想这样做，这会在控制器中产生问题，`branch.employees.build`那么该类将默认为`User`，我必须在某处修改类型列。我现在已经解决了这个问题：

```
 has_many :employees, class_name: 'User::Employee', 
    finder_sql: Proc.new{
      %Q(SELECT users.* FROM users WHERE users.type IN          ('User::Employee','User::BranchAdmin') AND users.branch_id = #{id})
    },
    counter_sql: Proc.new{
      %Q(SELECT COUNT(*) FROM "users" WHERE "users"."type" IN ('User::Employee', 'User::BranchAdmin') AND "users"."branch_id" = #{id})
    } 
```

但如果可能的话，我真的很想避免这种情况。任何人，任何想法？

编辑：

finder_sql 和 counter_sql 并没有真正为我解决这个问题，因为似乎父关联不使用它，所以`organisation.employees`这`has_many :employees, through: :branches`将再次只包括`User::Employee`选择中的类。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T13:50:28.287

基本上，问题只存在于根据需要加载类的开发环境中。（在生产中，类被加载并保持可用。）

问题的出现是由于解释器还没有看到您第一次运行, etc. 调用时`Admins`的一种类型。`Employee``Employee.find`

（请注意，它稍后会使用`IN ('User::Employee', 'User::BranchAdmin')`）

每次使用深度超过一层的模型类时都会发生这种情况，但仅限于开发模式。

子类总是自动加载其父层次结构。基类不会自动加载其子层次结构。

黑客修复：

您可以通过明确要求基类 rb 文件中的所有子类来强制在开发模式下执行正确的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T22:04:21.667

你可以使用[:conditions](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)吗？

```
class Branch < ActiveRecord::Base
   has_many :employees, class_name: 'User::Employee', :conditions => {:type => "User::Employee"}
   has_many :admins, class_name: 'User::BranchAdmin', :conditions => {:type => "User::BranchAdmin"}
end 
```

这将是我的首选方法。另一种方法可能是为多态模型添加默认范围。

```
class User::BranchAdmin < User::Employee
  default_scope where("type = ?", name)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T17:31:17.713

确实，这是 gem 早期的计划，但很快就被放弃了（在 2019 年，在 Rails 6 发布之前）。预加载已被弃用很长时间，并已在即将发布的 Zeitwerk 2.5 中删除。

在 Rails 应用程序中，您可以这样做：

```
# config/initializers/preload_vehicle_sti.rb
Rails.application.config.to_prepare do
  Car
  Motorbike
  Truck
end 
```

也就是说，您只需使用`to_prepare`块中的常量来“预加载”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T15:55:17.060

Rails 6 中继续存在类似的问题。

此链接概述了[问题和解决方法](https://weblog.rubyonrails.org/2019/2/22/zeitwerk-integration-in-rails-6-beta-2/#stis)。它包含以下解释和代码片段：

> Active Record 需要完全加载 STI 层次结构才能生成正确的 SQL。Zeitwerk 中的预加载是为此用例设计的：
> 
> 通过预加载树的叶子，自动加载将在超类之后向上处理整个层次结构。
> 
> 这些文件将在启动时和每次重新加载时预加载。

```
# config/initializers/preload_vehicle_sti.rb

autoloader = Rails.autoloaders.main
sti_leaves = %w(car motorbike truck)

sti_leaves.each do |leaf|
  autoloader.preload("#{Rails.root}/app/models/#{leaf}.rb")
end 
```

您可能需要 a`spring stop`才能进行配置更改。

# c# - 当 Publish(params T[] messages) 包含多条消息时，ExpectPublish 失败

> ID：11118415
> 
> 赞同：4
> 
> 时间：2012-06-20T11:21:07.250
> 
> 标签：c#, testing, nunit, rhino-mocks, nservicebus

我正在尝试测试以下发布代码（为示例目的调整了类和属性）：

```
public void PublishMessages(List<SomeDummyClass> shareRegistrationResult)
{    
    var failedMessages = shareRegistrationResult
                                .Where(c => !c.WasRegistered)
                                .Select(c => CreateNotRegisteredMessageInstance(c.String1, c.String2)).ToArray();
    _bus.Publish(failedMessages);
}

private IMyMessage CreateNotRegisteredMessageInstance(string string1, string string2)
{
    return _bus.CreateInstance<IMyMessage>(message =>
                                    {
                                        message.String1 = string1;
                                        message.String2 = string2;
                                    });
} 
```

测试代码（更改为匹配虚拟消息）

```
NServiceBus.Testing.Test.Handler(bus => new Publisher()
     .ExpectPublish<IMyMessage>(message => message.String1 == "Hello" && message.String2 == "World")
     .ExpectPublish<IMyMessage>(message => message.String1 == "Foo" && message.String2 == "Bar"); 
```

如果数组只包含一条消息，这工作得很好`failedMessages`，但当数组包含多条消息时失败并出现以下错误：

```
Rhino.Mocks.Exceptions.ExpectationViolationException : IBus.Publish(callback method: <>c__DisplayClass1c`1.<ExpectPublish>b__1b); Expected #1, Actual #0.
IBus.Publish(callback method: <>c__DisplayClass1c`1.<ExpectPublish>b__1b); Expected #1, Actual #0. 
```

在一个发布中测试多条消息时如何使用 ExpectPublish 测试（或其他）的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:07:35.997

这是一个错误 - [https://github.com/NServiceBus/NServiceBus/issues/489](https://github.com/NServiceBus/NServiceBus/issues/489)

# html - html正确链接路径到标签内的另一个目录

> ID：11118416
> 
> 赞同：1
> 
> 时间：2012-06-20T11:21:11.500
> 
> 标签：html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:28:38.170

之一：

*   `../`
*   `/category`
*   `//domain.com/category`
*   `http://domain.com/category`

你不应该使用`/../category`“从顶部开始，然后上升一个级别，等待没有级别......然后忽略那一点，然后进入类别”的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:28:27.483

您可以使用“/category”，域将自动添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:28:40.653

```
<a href="../../category">Link</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:38:09.963

您可以使用如下绝对路径：

```
<a href="/category/">link</a> 
```

# php - javascript日期显示

> ID：11118417
> 
> 赞同：0
> 
> 时间：2012-06-20T11:21:14.770
> 
> 标签：php, javascript, jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:06:44.177

我的建议是将 EventListener 添加到字段 frdt1 (onChange) 或日历 1 (onClick) 中的所有日期选择器中。然后，此侦听器应执行您定义的函数，该函数相应地设置 frdt2 的值。这并不难，因为 JS 日期函数可以识别大量的日期格式。

[可选] 您还应该在事件侦听器函数中获取/设置一个全局变量，这样一旦用户手动设置它就不会修改 frdt2。这将需要日历 2 (onClick) 中所有选择器上的事件侦听器。

有关事件侦听器的更多信息：[https ://developer.mozilla.org/en/DOM/element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)

有关 Javascript 日期功能的更多信息：http: [//www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

# javascript - 使用 cakephp 中的 js 助手将事件附加到一组需要唯一属性值的元素

> ID：11118418
> 
> 赞同：1
> 
> 时间：2012-06-20T11:21:26.473
> 
> 标签：javascript, cakephp

与 css 类 .addtobasket 的每个链接都需要执行特定的 ajax 调用。它调用的操作是“addTobasket”，它需要提供其 data-productid 属性，但我不知道在此设置中是否可行。

这是我到目前为止所拥有的：

```
$this->Js->get('.addtobasket');
$this->Js->事件(
    '点击'，
    $this->Js->请求(
        资源::url('Product::addToBasket', $product['Product']['id']),
        数组（'async' => true, 'update' => '#content'）
    )
);

```

但正如你所看到的，`$product['Product']['id']`需要用类似的东西替换`$(this).attr('data-productid')`

这可能吗，还是我应该遍历产品？

# java - 如何从java运行和控制一个excel实例

> ID：11118420
> 
> 赞同：3
> 
> 时间：2012-06-20T11:21:27.613
> 
> 标签：java, excel, com

我的 java 应用程序有一个按钮，单击该按钮应打开用户选择的 Excel 文件。在这个文件上，用户必须选择一个图表。最后，他们应该单击一个按钮，该按钮触发一个进程（宏，java 方法？），该进程将图表的大小更改为从 java 应用程序的对象等读取的值。

在互联网上搜索时，我发现了诸如[JACOB](http://danadler.com/jacob/)之类的 Java 的 COM 桥接之类的东西，但这似乎只在 windows32 上运行；有什么可以跨平台工作的吗？

如果有人可以帮助我找到一个好的方法、合适的库或任何其他有用的提示，我会非常高兴，因为我现在有点困惑，根本不知道如何开始；）

非常感谢您，祝您有愉快的一天！

埃达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:25:52.333

查看[http://j-interop.org/](http://j-interop.org/)。这可用于以独立于平台的方式调用 dcom 应用程序。

# android - 打开用于驾驶方向的内置地图意图

> ID：11118422
> 
> 赞同：2
> 
> 时间：2012-06-20T11:21:29.853
> 
> 标签：android, google-maps

我想打开一个`inbuilt google map intent`显示两个地方之间的路线而不打开一个`complete action dialog, which asked for Browser and Map`。

我试过这个。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?saddr="+PreferenceData.getLatitude(HotelInfomation.this)+","+PreferenceData.getLongitude(HotelInfomation.this)+"&daddr="+latitude+","+longitude));
startActivity(intent); 
```

但它会打开一个对话框，询问 Complete Action Using Browser 或 map 。我不想要那个 Dialog 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:26:44.177

```
without open a complete action dialog, which asked for Browser and Map 
```

在这种情况下，您需要告诉 android 您要使用哪个应用程序来显示地图。

干得好

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr="+PreferenceData.getLatitude(HotelInfomation.this)+","+PreferenceData.getLongitude(HotelInfomation.this)+"&daddr="+latitude+","+longitude));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:32:01.287

```
 Intent intent = new Intent(
                            android.content.Intent.ACTION_VIEW,
                            Uri.parse("http://maps.google.com/maps?saddr="
                                    + Data.map_latitude + ","
                                    + Data.map_longitude + "+&daddr="
                                    + Data.infoLatitude + ","
                                    + Data.infoLogitute + "")); 
```

# iphone - 如何防止 UITableViewCell 被移出它自己的部分？

> ID：11118423
> 
> 赞同：5
> 
> 时间：2012-06-20T11:21:38.250
> 
> 标签：iphone, objective-c, ios, uitableview

我的`UITableView`有 3 个部分。只有第 2 部分中的单元格是可移动的：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    BOOL canMove = NO;
    if (indexPath.section == 1) {
        canMove = YES;
    }
    return canMove;
} 
```

但是，`B`第 2 节（最初包含`A``B``C`单元格）中的单元格 ( ) 可以移动到第 1 节（最初仅包含`T`单元格）：

　 ![在此处输入图像描述](../Images/f212703514eb1609543ee331ed9b1140.png)

如何确保单元格*在*其自己的部分内移动？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T11:35:48.463

我认为这将解决您的问题

```
- (NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath
{
    if( sourceIndexPath.section != proposedDestinationIndexPath.section )
        return sourceIndexPath;
    else
        return proposedDestinationIndexPath;
} 
```

来自 Apple[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

> 此方法允许在特定行在表视图中上下移动时自定义目标行。当拖动的行悬停在另一行上时，目标行向下滑动以在视觉上为重定位腾出空间；这是由proposedDestinationIndexPath 标识的位置。

# php - 用于 PHP 的 vCloud Director sdk

> ID：11118427
> 
> 赞同：1
> 
> 时间：2012-06-20T11:21:51.103
> 
> 标签：php, api, sdk, cloud, vmware

是否有人设法启动 vApp 模板，然后使用 PHP SDK 通过 vCloud Director API 将 IP 和计算机名称分配给关联的 VM？

我已经能够启动 vApp 模板并使 VM 运行。但总是收到系统警报，提示由于缺少重新配置令牌，来宾自定义失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:02:22.287

该问题与 vCloud Director 要求所有网络配置参数（例如 IP 范围）自行管理这一事实有关。您无法分配 vCloud Director 未知的 IP。

通过在 vCloud Director 中创建已知 IP 范围解决了该问题。

# php - PHP从父类CLOSED访问变量

> ID：11118433
> 
> 赞同：0
> 
> 时间：2012-06-20T11:22:22.523
> 
> 标签：php, oop, class

**我见过一些标题非常相似的问题，但它们与我的具体问题无关。**

基本上，我想在扩展核心的类中从我的核心类访问变量，但与其他示例相比，事情似乎相当复杂。我正在使用 MVC 框架。我已经简化了下面的代码以删除任何不相关的内容。

索引.php

```
// Load the core
include_once('core.php');
$core = new Core($uri, $curpath);
$core->loadController('property'); 
```

核心.php

```
class Core
{
    public $uri;
    public $curpath;

    function __construct($uri, $curpath)
    {       
        $this->uri = $uri;
        $this->curpath = $curpath;
    }

    // Load the controller based on the URL
    function loadController($name)
    {       
        //Instantiate the controller
        require_once('controller/'.$name.'.php');
        $controller = new $name();
    }

} 
```

属性.php

```
class Property extends Core
{
    function __construct()
    {
        print $this->curpath;
    }   
} 
```

打印 $this->curpath 什么都不返回。变量已设置，但为空。如果我在 core.php 中打印 $this->curpath ，它会打印得很好。

我怎样才能访问这个变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:50:11.190

**你做错了^(tm)**

1.  您应该使用自动加载器，而不是手动将文件包含在每个类中。您应该了解[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php)and 和[namespaces](http://php.net/manual/en/language.namespaces.php)，以及如何利用它们。

2.  不要在`__construct()`方法中生成输出。这是一个非常糟糕的做法

3.  变量仍然存在。那不是问题。在 PHP 中，当你扩展一个**类**时，它**不会继承构造函数**。

4.  你不明白继承是如何工作的。当您在扩展类的实例上调用方法时**，在调用扩展类的方法之前，它不会执行父类的方法**。它们被覆盖，而不是堆叠。

5.  不应公开对象变量。你正在打破封装。而是将它们定义为`public`您应该使用`protected`的 .

6.  您应该扩展它们的类，它们是不同类型的相同通用事物。`extends`PHP 中的意思是**is-a**。这意味着，当你写 时`class Oak extends Tree`，你的意思是所有的橡树都是树。同样的规则意味着，在您的理解中，所有`Property`实例都只是实例的一个特例`Core`。他们显然不是。

    在 OOP 中，我们有原则。其中之一是[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)（更简短的[解释](http://www.globalnerdy.com/wordpress/wp-content/uploads/2009/07/liskov_substitution_principle_small.jpg)）。这就是你的班级违反的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:09:43.347

我认为问题在于：

如果您考虑像这样的简单继承：

```
class Dog{
    public $color;

    public function __construct($color){
        $this->color = $color;
    }
}

class TrainedDog extends Dog{
    public $tricks;

    public function __construct($color, $tricks){
        $this->tricks = $tricks;

        parent::__construct($color);
    }
}

//Create Dog:
$alfred = new Dog('brown');

//Create TrainedDog
$lassie = new TrainedDog('golden',array('fetch')); 
```

在这个例子中，$alfred 是一只棕色的狗，而 $lassie 是一只金色的狗。这两个实例彼此分开，唯一的共同点是它们都有一个名为 $color 的属性。

例如，如果您想要一个在所有 Dogs 中都可用的变量，则需要一个类变量：

```
class Dog{
    public $color;

    public static $numberOfLegs; //Class variable available in every instance of Dog.

    public function __construct($color, $numberOfLegs){
        $this->color = $color;
        self::$numberOfLegs = $numberOfLegs;
    }
}

class TrainedDog extends Dog{
    public $tricks;

    public function __construct($color, $tricks){
        $this->tricks = $tricks;

        parent::__construct($color);

        echo parent::$numberOfLegs;
    }
} 
```

不过，这在很多情况下没有多大意义，因为如果您有两个父类实例（在您的情况下是 Core），它们也共享类变量。

除非您可以确保 Core 只实例化一次，否则这种方法将不起作用。如果它只存在一次，您也可以使用常量变量来存储 2 个属性。

如果存在多个 Core 实例/对象，我建议使用组合（如 Alvin Wong 所建议）。

```
class Core{
      //Just as you programmed it.
}

class Property{
      private $core;

      public function __construct($core){
          $this->core = $core;

          echo $core->curPath;
      }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T11:41:12.080

试试这个

```
include_once('core.php');
$core = new Core('test', 'path');
$core->loadController('property');

class Property extends Core
{
 function __construct($date)
{
    print $date->curpath;
}   
}

class Core
{
public $uri;
public $curpath;

function __construct($uri, $curpath)
{       
    $this->uri = $uri;
    $this->curpath = $curpath;
}

// Load the controller based on the URL
function loadController($name)
{       
    //Instantiate the controller
    require_once($name.'.php');
    $controller = new $name($this);
}

} 
```

# javascript - 通过 AJAX 插入内容后如何获取元素的高度？

> ID：11118435
> 
> 赞同：5
> 
> 时间：2012-06-20T11:22:25.177
> 
> 标签：javascript, jquery, css, ajax, height

我有一个 Jquery Mobile 页面，我通过 AJAX 将表单加载到其中。我正在使用插件设置页面尺寸，该插件在 Ajax 运行并更新布局后计算尺寸（至少以下控制台随后出现）。

我需要获取接收内容的元素的高度，但无论我尝试什么，我都会变得很垃圾（~ 169px 而不是一些 1200px）

这是我的代码：

```
(inside plugin)
some: function(){

    var self = this,
    o = self.options,
    wrap = $('div:jqmData(wrapper="true").ui-page-active').last(),
    // elements
    panels = wrap.find('.ui-panel.ui-panel-active').filter(':not(.ui-popover)'),
    pages = panels.find('.ui-page'),
    contents = pages.find('.ui-content');

    // maxHeight contents
    for ( var i = 0; i < contents.length; i++){         
        ct = contents.eq(i);

        console.log( ct );
        console.log( ct.css("height") )
        console.log( ct.height() );
        console.log( ct.outerHeight() );    
    // max
    if ( ct.css("height") > parseFloat( o._iPadFixHeight ) ){
        o._iPadFixHeight = parseFloat( ct.css("height") ) + parseFloat( ct.css('padding-top')) +  parseFloat( ct.css('padding-bottom')) ;
        };
    }
     ... 
```

如果我没有使用任何 AJAX，这可以正常工作。如果我通过 AJAX 动态添加内容，则控制台都会在 AJAX 之后触发，但仍然只返回错误值。

**问题**：
如何在 AJAX 更新后可靠地获取内容元素高度？我尝试在 Ajax 之后设置 10 秒超时，以等待一切就绪。没有区别，10 秒后内容元素的高度仍然不正确。

感谢帮助！

**编辑**：
虽然控制台在 AJAX 加载后记录，但我认为该函数之前已触发，因此它是根据前 AJAX 尺寸计算的。我正在考虑重新使用这个：

```
$(window).on('dimensionchange', function(){             
    self.ome();
    }) 
```

并触发

$(window).trigger('dimensionchange')

在我的 AJAX 成功处理程序中。不完美，但我想这会做。

**EDIT2：**
让它工作。@HolgerDSchauf 是正确的。在我第一次运行函数时，我设置了错误值，然后在 AJAX 进入后，仍然设置了错误值。我现在像这样修复它：

阿贾克斯成功：

```
...
// cleanup dimensions
$(window).trigger( 'dimensionclear');
...
window.setTimeout(function() {
   target.removeClass('.fade.in');
   // recalculate
   $(window).trigger('dimensionchange');    
   },250); 
```

在我的插件中：

```
$(window).on('dimensionchange', function(){ 
     self.ome();
     });
$(window).on('dimensionclear', function(){
     self.ome("clear");
     }); 
```

在 OME 功能中：

```
// cleanup
if ( from == "clear") {
   contents.css({'height':'', 'max-height':''})
   return;
   } 
```

奇迹般有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:33:26.607

我使用这个函数来保持我所有的 div 的更新大小。使用类似的东西，但不要忘记在文档准备好时调用它。

```
function framing() {
    /*
        Pre         : ready.js, self
        Post            : design.js->framing
        Author          : Enes Ü.
        Date            : 15:30, 05 May 12
        Summary         : framing the page widthly/heightly
        Bugs/TODOs              : Frame heights are anormal and will be fixed. Prior=5
    */

    $("#right_menu").width($("#main").width()-$("#left_menu").width());
    $("#left_menu").height(getWinHeight());
    $("#top_menu").width($("#main").width()-$("#left_menu").width());
    $("#right_menu").height(getWinHeight()-$("#top_menu").height());
    $("#map_container").height(getWinHeight());
    /* 
     ******* lots of lines like above...
     */

    setTimeout(framing,100);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:26:03.100

您使用带有“wrap, panel, ct”的缓存元素刷新此缓存变量或立即使用它

# windows - 为什么我们需要在 ShowWindow 之后调用 UpdateWindow？

> ID：11118443
> 
> 赞同：13
> 
> 时间：2012-06-20T11:22:46.653
> 
> 标签：windows, winapi

```
ShowWindow(g_hWnd, 1);
UpdateWindow(g_hWnd); 
```

我想知道为什么我们需要调用`UpdateWindow`以下`ShowWindow`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:33:15.190

这是完全没有必要的，没有它，你的窗户会很好地涂漆。

如果您的程序在创建窗口之后但在进入消息循环之前执行大量操作，您会从中看到一点点好处。用户有东西要看。闪屏是更典型的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T11:25:11.647

`ShowWindow`不重绘窗口。调用`UpdateWindow`将`WM_PAINT`消息发送到窗口并重新绘制它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T08:33:35.370

通常，系统`WM_PAINT`仅在消息队列为空时发送。在正常情况下，这已经足够了，它实际上优化了很多不必要的重绘。队列中的消息通常会改变应用程序状态，这通常会导致窗口的一部分无效，从而导致另一次绘画（因此用户看到新的应用程序状态）。因此，重绘只是在处理完所有此类消息并且系统认为新窗口内容将有效一段时间后才发生（直到另一条消息进入队列）。

但是，如果您需要`WM_PAINT`立即强制并绕过上述逻辑，您可以`WM_PAINT`通过调用强制发送（如果存在无效区域）`UpdateWindow()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-01T03:47:32.943

ShowWindow 会导致 WM_PAINT 消息，而任何使先前隐藏的窗口部分可见的消息。UpdateWindow 会立即传递任何未完成的绘制消息，等待绘制处理完成直到返回。如果没有对 UpdateWindow 的调用，则在您的程序进入消息循环之前不会收到消息。这避免了响应用户的任何可能的延迟。

# iphone - Xcode 显示未知字符

> ID：11118445
> 
> 赞同：0
> 
> 时间：2012-06-20T11:23:33.767
> 
> 标签：iphone, crash

请任何人帮我解决这个问题，

当我重新启动我的电脑时，我的 xcode 项目显示了这个字符，欢迎任何解决方案。

![在此处输入图像描述](../Images/134c018d1a0a2c097a1c59cb108e8c30.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:26:55.550

您似乎将字符的编码更改为未知编码

为了解决它，

*   确保 class.m 文件以 UTF-8 格式保存，要将其保存为 utf-8，请使用任何编辑器（例如 textedit）打开它并将其保存为 UTF-8 格式

*   确保 xcode 中的编码设置为 UTF-8，转到首选项->文本编辑 ![在此处输入图像描述](../Images/c2dd60945016c739306341bae99b79f9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:29:35.157

可能是您的项目与 svn 或其他安全服务器连接，不幸的是您的 svn 停止工作，当时您将数据保存在 svn 上，这就是发生这种情况的原因。现在没有办法恢复这些数据，但肯定你在保存数据或备份之前得到它。

# tsql - linq to sql 将日期合并到组中

> ID：11118446
> 
> 赞同：0
> 
> 时间：2012-06-20T11:23:38.140
> 
> 标签：tsql, sql-server-2005, linq-to-sql

我有一个简单的 sql 查询，如下所示：

```
SELECT dt AS 'startDate'
 , dt AS 'endDate'
FROM
    WorkCalendar
WHERE
     dt BETWEEN dateadd(yy, datediff(yy, 0, getdate()), 0) AND dateadd(MILLISECOND, -3, dateadd(YEAR, datediff(YEAR, 0, getdate()) + 1, 0))
     AND isWorkDay = 0 
```

这将返回我的表中的所有日期，其中包含当年的无工作天数。

这是示例输出：

```
startDate               endDate
2012-01-01 00:00:00     2012-01-01 00:00:00
2012-01-06 00:00:00     2012-01-06 00:00:00
2012-01-07 00:00:00     2012-01-07 00:00:00
2012-01-08 00:00:00     2012-01-08 00:00:00
2012-01-14 00:00:00     2012-01-14 00:00:00
2012-01-15 00:00:00     2012-01-15 00:00:00
2012-01-21 00:00:00     2012-01-21 00:00:00
2012-01-22 00:00:00     2012-01-22 00:00:00 
```

我想做的是像这样对近日期进行分组：

```
startDate               endDate
2012-01-01 00:00:00     2012-01-01 00:00:00
2012-01-06 00:00:00     2012-01-08 00:00:00
2012-01-14 00:00:00     2012-01-15 00:00:00
2012-01-21 00:00:00     2012-01-22 00:00:00 
```

如果我有 2 天或更多天是一个接一个的，我想把他们加入小组。

我希望使用 linq to sql 来完成这项工作，因为我在 web 服务中使用它会更简单，但简单的 sql 就可以了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:58:50.980

得到这样的东西：

```
WITH d (d1) 
 AS (SELECT dt 
     FROM   workcalendar 
     WHERE  dt BETWEEN Dateadd(yy, Datediff(yy, 0, Getdate()), 0) AND 
                               Dateadd(millisecond, -3, 
                               Dateadd(year, Datediff(year, 
                                             0, 
                                             Getdate()) + 1 
                               , 0)) 
            AND isworkday = 0) 
SELECT Z1.d1 AS startDate, 
   Z2.d1 AS endDate 
FROM   (SELECT Row_number() 
             OVER ( 
               ORDER BY A.d1) AS 'ID', 
           A.d1 
    FROM   d AS A 
    WHERE  NOT EXISTS (SELECT * 
                       FROM   d AS C 
                       WHERE  A.d1 = Dateadd(d, 1, C.d1))) AS Z1, 
   (SELECT Row_number() 
             OVER ( 
               ORDER BY A.d1) AS 'ID', 
           A.d1 
    FROM   d AS A 
    WHERE  NOT EXISTS (SELECT * 
                       FROM   d AS C 
                       WHERE  A.d1 = Dateadd(d, -1, C.d1))) AS Z2 
WHERE  Z1.id = Z2.id 
```

但是欢迎任何评论和优化:)

# c - OpenSSL ASN.1 编程教程

> ID：11118454
> 
> 赞同：11
> 
> 时间：2012-06-20T11:24:11.753
> 
> 标签：c, openssl, asn.1

我正在寻找有关使用 OpenSSL 库进行 ASN.1 DER 编码的任何 C/C++ 教程、示例代码或文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:08:32.223

好吧，正如您在 openssl 网站上看到的那样，没有 ASN.1 函数的官方文档。

但是你总是可以[下载 openssl 源代码](http://openssl.org/source/)。解压后，您可以在 doc/crypto 目录文档中看到 ASN.1。

```
# ~/tmp/openssl-1.0.1c/doc/crypto> ls -1 | grep -i asn
ASN1_generate_nconf.pod
ASN1_OBJECT_new.pod
ASN1_STRING_length.pod
ASN1_STRING_new.pod
ASN1_STRING_print_ex.pod
d2i_ASN1_OBJECT.pod 
```

这些文件是[普通的旧文档](http://en.wikipedia.org/wiki/Plain_Old_Documentation)，我相信可以将其转换为 HTML/PDF。它包含你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-09T21:29:08.137

```
#include <openssl/asn1.h>
#include <cstdio>
#include <cstring>

void xprint(void *data, int len) {
  unsigned char *ptr = reinterpret_cast<unsigned char*>(data);
  for (int i = 0; i < len; i++) {
    printf("%x ", *ptr);
    ptr += 1;
  }
  printf("\n");
}

void str_test() {
  ASN1_STRING asn1str;
  const char *s = "stackoverflow save the world!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
  ASN1_STRING_set(&asn1str, s, strlen(s) + 1);
  const char *value = reinterpret_cast<char*>(ASN1_STRING_data(&asn1str));
  printf("The value is %s, strlen: %zu\n", value, strlen(value));
  unsigned char *ptr = new unsigned char[1024];
  int ret = M_i2d_ASN1_OCTET_STRING(&asn1str, &ptr);
  // int ret = i2d_ASN1_bytes(&asn1str, &ptr, V_ASN1_OCTET_STRING, V_ASN1_UNIVERSAL);
  printf("return: %d\n", ret);
  xprint(ptr - ret, ret);
}

int main(int argc, char** argv) {
  str_test();
  return 0;
} 
```

希望这会为您节省一些时间和努力。

[http://www.umich.edu/~x509/ssleay/asn1_convert.html](http://www.umich.edu/~x509/ssleay/asn1_convert.html)这个链接真的很有帮助。

# java - Tomcat5.5如何上传文件？

> ID：11118456
> 
> 赞同：2
> 
> 时间：2012-06-20T11:24:15.723
> 
> 标签：java, tomcat5.5

我想在 tomcat 5.5 中执行以下操作

```
1\. upload a excel file
2\. process the file based on some crieteria
3\. show the result 
```

我能够从 2 到 3 完成所有操作，但无法在 tomcat 5.5 中上传文件，也找不到示例。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:30:01.350

也许你可以试试[Apache commons fileUpload](http://commons.apache.org/fileupload/)

[你可以在这里](http://commons.apache.org/fileupload/using.html)得到一个样本

可以在[这里](http://www.kodejava.org/browse/55.html)找到没有太多概念和说明的更多动手操作。

在您的 Servlet 上，您将只使用以下内容：

* * *

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);

if (isMultipart) {
    FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);

    try {
        List items = upload.parseRequest(request);
        Iterator iterator = items.iterator();
        while (iterator.hasNext()) {
            FileItem item = (FileItem) iterator.next();

            if (!item.isFormField()) {
                String fileName = item.getName();

                String root = getServletContext().getRealPath("/");
                File path = new File(root + "/uploads");
                if (!path.exists()) {
                    boolean status = path.mkdirs();
                }

                File uploadedFile = new File(path + "/" + fileName);
                System.out.println(uploadedFile.getAbsolutePath());
                item.write(uploadedFile);
            }
        }
    } catch (FileUploadException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:32:12.887

Apache 提供了一个用于上传文件的 API。你可以试试这个。

[http://commons.apache.org/fileupload/using.html](http://commons.apache.org/fileupload/using.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:32:58.387

使用 Apache 的 Commons FileUpload 和 HttpClient。

这里有一些链接可以帮助你。

*   [http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload](http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload)
*   [http://evgenyg.wordpress.com/2010/05/01/uploading-files-multipart-post-apache](http://evgenyg.wordpress.com/2010/05/01/uploading-files-multipart-post-apache)
*   [https://stackoverflow.com/a/2424824/1438132](https://stackoverflow.com/a/2424824/1438132)

# iphone - 如何删除最后一个空格后的文本？

> ID：11118461
> 
> 赞同：0
> 
> 时间：2012-06-20T11:24:29.990
> 
> 标签：iphone, nsstring

我有像“我的名字是”这样的 NSString。我想在最后一个空格后删除文本。表示我要删除的最后一个空格之后的任何文本。答案将是我的名字。如果有人知道该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T11:30:08.713

要从您的字符串中获取我的名字，请使用以下命令

```
NSString *str = @"My name is";
NSRange range = [str rangeOfString:@" " options:NSBackwardsSearch];
NSString *str2 = [str substringToIndex:range.location]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:09:57.067

```
NSString *str = @"My Name is";    
NSArray *ary = [[NSArray alloc]init];    
ary = [str componentsSeparatedByString:@" "];
str = [ary objectAtIndex:0];
str= [str stringByAppendingFormat:@" %@",[ary objectAtIndex:1]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:27:27.790

最简单的方法是使用“ `NSMutableString`”而不是“ `NSString`”，然后您可以执行[“ `deleteCharactersInRange:`”方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableString/deleteCharactersInRange%3a)，其中“range”参数是您要删除的字符范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:28:06.763

使用此代码例如

```
 NSString *foo = @" untrimmed string  ";
  NSString *trimmed = [foo stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:29:14.893

这将起作用，尽管不是最好的方法

```
NSString *myName = [[NSString alloc] initWithString:@"My Name is."];
NSArray *splitComponents = [myName componentsSeparatedByString:@" "];
myName = [myName stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@" %@",[splitComponents lastObject]] withString:@""]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T11:29:28.917

你可以使用这个：

```
NSArray *arr = [yourString componentsSeparatedByString:@" "]; 
```

然后省略最后一个对象并创建新字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T11:42:21.127

```
NSString * str=@"My name is";
     NSArray *parameters = [str componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@" "]];
    NSLog(@"%@",[parameters description]);

    NSRange rangeOfDash = [ str rangeOfString:[parameters lastObject]];
    NSString * output = (rangeOfDash.location != NSNotFound) ? [str substringToIndex:rangeOfDash.location-1] : nil;

     NSLog(@"answer%@",output); 
```

# wxpython - 如何为 wxPython 网格中的每一行绘制不同的边框？

> ID：11118465
> 
> 赞同：2
> 
> 时间：2012-06-20T11:24:51.883
> 
> 标签：wxpython

我想根据相应行中的数据为 wxPython 网格中的每一行绘制不同的边框（例如粗线或虚线）。我怎样才能达到这个结果？

我正在使用 python 2.6，我需要一些指针和/或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:27:57.720

看看 wxPython 演示。我认为您会发现最有帮助的演示如下：

*   wx.Grid 显示编辑器和渲染器
*   来自 wx.lib.mixins.gridlabelrenderer 的 GridLabelRenderer

这些可能会让你开始。当您遇到困难时，请在 wxPython 邮件列表中询问。他们将能够帮助你。

# python - 从电话号码字符串中删除不需要的字符

> ID：11118473
> 
> 赞同：5
> 
> 时间：2012-06-20T11:25:27.180
> 
> 标签：python, regex

我的目标是使用正则表达式代码来获取电话号码并删除不需要的字符。

```
import re
strs = 'dsds +48 124 cat cat cat245 81243!!'
match = re.search(r'.[ 0-9\+\-\.\_]+', strs)

if match:                      
    print 'found', match.group() ## 'found word:cat'
else:
    print 'did not find' 
```

它只返回：

```
+48 124 
```

我怎样才能返回整个号码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T11:28:53.360

你想使用[`sub()`](http://docs.python.org/library/re.html#re.sub)，而不是`search()`：

```
>>> strs = 'dsds +48 124 cat cat cat245 81243!!'
>>> re.sub(r"[^0-9+._ -]+", "", strs)
' +48 124   245 81243' 
```

`[^0-9+._ -]`是一个[否定字符类](http://www.regular-expressions.info/charclass.html)。这里`^`很重要——这个表达式的意思是：“匹配一个既不是数字也不是加号、点、下划线、空格或破折号的字符”。

告诉正则表达式引擎匹配前面标记的`+`一个或多个实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:48:27.753

问题`re.sub()`是您在最终电话号码字符串中获得了额外的空格。非正则表达式方式，返回正确的电话号码（不带空格）：

```
>>> strs = 'dsds +48 124 cat cat cat245 81243!!'
>>> ''.join(x for x in strs if x.isdigit() or x == '+')
'+4812424581243' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T04:21:57.400

这是我用来用单个连字符替换所有非数字的方法，它似乎对我有用：

```
# convert sequences of non-digits to a single hyphen
fixed_phone = re.sub("[^\d]+","-",raw_phone) 
```

# ruby - 无法让 opt_expand 从 Ruby 工作（使用与 curl 相同的代码）

> ID：11118474
> 
> 赞同：0
> 
> 时间：2012-06-20T11:25:28.103
> 
> 标签：ruby, api, curl, asana

我编写了一个简短的 Ruby 脚本，它可以很好地将 ASANA 任务导出到 csv 中，但是它需要一段时间才能运行，因为我必须为每个项目中的每个任务执行 GET。我找到了一种使用 opt_expand 一次获取每个项目的所有任务数据的方法，然后将其编号为“获取”的一部分。然而，在 curl 中工作的 opt_expand 代码在 Ruby 中不起作用，它只是忽略了 expand 命令。

任何帮助将不胜感激，

正常卷曲代码[snippet1]：

```
curl -u <token>: https://app.asana.com/api/1.0/projects/<project_id>/tasks 
```

工作 opt_expand curl 代码[snippet2]：

```
curl -u <token>: https://app.asana.com/api/1.0/projects/<project_id>/tasks?opt_expand=. 
```

普通 Ruby 代码[snippet3]：

```
uri = URI.parse("https://app.asana.com/api/1.0/projects/<project_id>")

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
... 
```

尽管使用 opt_expand，但返回与片段 3 相同的损坏的 Ruby 代码

```
uri = URI.parse"(https://app.asana.com/api/1.0/projects/<project_id>/tasks?opt_expand=.
")

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:39:36.503

就像格雷格说的那样，你没有将参数传递给服务器。Ruby URI 解析不接受参数。尝试这样的事情：

```
params = { :opt_expand => 'your opt here' }
uri = URI.parse("https://app.asana.com/api/1.0/projects/<project_id>/tasks")
http = Net::HTTP.new(uri.host, uri.port)
...
uri_with_params = "#{uri.path}?".concat(params.collect { |k,v| "#{k}=#{CGI::escape(v.to_s)}" }.join('&')) if not params.nil?
req = Net::HTTP::Get.new(uri_with_params, header)
req.basic_auth(key, password)
res = http.start { |http| http.request(req) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:48:47.323

如果没有看到您收到的错误消息（或服务器返回消息），这有点难以回答。

但是，请记住，Net::HTTP 是低级的，用于这样一个简单的任务可能有点矫枉过正。您是否考虑过使用其他更容易使用的库（即：[rest-client或 Faraday）。](https://github.com/archiloque/rest-client)例如：

```
require 'rest_client'

response = RestClient.get "https://app.asana.com/api/1.0/projects/<project_id>"
if response.code == 200
  # process answer
end 
```

# jquery - jquery live('submit') 和在 rails 中提交的区别

> ID：11118477
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:25:33.957
> 
> 标签：jquery, ajax, ruby-on-rails-3

我有两段非常相似的代码，一段有效，另一段无效：这个有效：

```
$(document).ready(function() {
  return $("form#myform").live("submit", function() {
    var valuesToSubmit;
    valuesToSubmit = $(this).serialize();
    $.ajax({
      url: $(this).attr("action"),
      data: valuesToSubmit,
      dataType: "JSON",
      success: function(json) {
        return $("#form-container").html(json["text"]);
      },
      error: function(json, xy, mycode) {
        var msg, response;
        response = $.parseJSON(json.responseText);
        msg = response.text;
        return alert(msg);
      }
    });
    return false;
  });
}); 
```

而这不是：

```
$(document).ready(function() {
  return $("form#myform").submit(function() {
   //same stuff as before        

  });
}); 
```

现在 rails 控制器只用 json 响应，没有 html 响应。我在两者中看到的区别是，两者都可以很好地提交给控制器，但在第一种情况下，请求应该是 json，响应是 json，所以它工作正常。但在第二种情况下，即使我指定'dataType：“JSON”'，请求也是html类型，响应是html，我被重定向到表单操作页面，当我按下后退按钮导航到相同页面，我已注销。所以我想知道为什么导航到后台也会让我退出。

那么 $(somthing).submit(function(){}); 有什么区别？和 $(somthing).live('submit', function(){})。他们都发布到操作中，但是一个正在创建一个 html 请求，而另一个正在创建一个 json 请求，一个实际上将我从应用程序中注销，而 otehr 没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:31:39.613

`.submit`调用`.bind`元素本身，同时`.live`将事件侦听器附加到文档并等待它冒泡。实际上，如果您删除该元素并创建一个新的相同元素，则添加的侦听器`bind`将被删除，而添加的侦听器`.live`则不会。

我们无法用您提供给我们的大量信息来回答这个问题。尝试登录`valuesToSubmit`到控制台并查看是否存在任何差异（如果存在差异并且您不知道它为什么会影响任何东西，请发回此处，我们可以提供帮助）。

`.live`并且`.bind`在 1.7 版中都已弃用，您应该考虑升级并查看会发生什么。也不需要返回值。您需要以下代码：

```
$(document).ready(function() {
  $(document).on('submit', 'form#myform', function() {
   //same stuff as before        

  });
}); 
```

# session - 每个应用程序有多个连接

> ID：11118482
> 
> 赞同：0
> 
> 时间：2012-06-20T11:26:05.257
> 
> 标签：session, architecture, connection, wan

标题：跨多个连接/会话向服务器发送/接收数据是否存在问题？

背景：我看到从东海岸到西海岸运行应用程序的问题之一是最大吞吐量急剧下降。在办公室，我可以使用约 90% 的线路来移动数据；在 10M 的海岸到海岸连接/会话中，由于丢失和延迟，我只能达到 ~1.65 Mbps。如果应用程序是为跨多个连接/会话并行传输而设计的，那将是另一回事。我可以达到 nx 1.65，其中“n”是连接数。但很多时候，我看到的应用程序似乎只使用一个连接。

所以我想知道，为什么更多的应用程序不能在多个连接上运行？这是不好的做法吗？难以实施？资源密集型？等等等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:32:45.167

这就是互联网的工作原理——大多数公司不能有多个专用路由到每个客户端，并且必须依赖共享基础设施来传递网络数据包。请注意，每个数据包可能会在目的地之间选择随机路由，因此您在一般互联网中已经拥有“多个连接”。

如果您有足够的资源，您可以铺设自己的网络，通过多个专用连接将每个客户连接起来。在大多数情况下，成本通常令人望而却步，这种方法很可能用于数据中心到数据中心的通信，在这种通信中，足够的流量可以证明专用路线的成本（仍然可能是租用的，而不是公司自己铺设的）或与证券交易所的链接.

# python - Python 列表作为变量名

> ID：11118486
> 
> 赞同：8
> 
> 时间：2012-06-20T11:26:23.567
> 
> 标签：python, arrays, list, variables, multidimensional-array

我一直在玩 Python，我有这个需要制定的列表。基本上我在多维数组中输入一个游戏列表，然后对于每个游戏，它将根据第一个条目生成 3 个变量。

制作的数组：

```
Applist = [
['Apple', 'red', 'circle'],
['Banana', 'yellow', 'abnormal'],
['Pear', 'green', 'abnormal']
] 
```

For 循环为每个水果分配名称、颜色和形状。

```
for i in Applist:
    i[0] + "_n" = i[0]
    i[0] + "_c" = i[1]
    i[0] + "_s" = i[2] 
```

但是，在执行此操作时，我收到无法分配给操作员的消息。我该如何对抗这个？

预期的结果是：

```
Apple_n == "Apple"
Apple_c == "red"
Apple_s == "circle" 
```

等每个水果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T11:31:01.350

这是一个坏主意。您不应该动态创建变量名称，而是使用字典：

```
variables = {}
for name, colour, shape in Applist:
    variables[name + "_n"] = name
    variables[name + "_c"] = colour
    variables[name + "_s"] = shape 
```

现在以`variables["Apple_n"]`等方式访问它们。

不过，您真正想要的也许是 dicts 的 dict：

```
variables = {}
for name, colour, shape in Applist:
    variables[name] = {"name": name, "colour": colour, "shape": shape}

print "Apple shape: " + variables["Apple"]["shape"] 
```

或者，也许更好，一个[`namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple)：

```
from collections import namedtuple

variables = {}
Fruit = namedtuple("Fruit", ["name", "colour", "shape"])
for args in Applist:
    fruit = Fruit(*args)
    variables[fruit.name] = fruit

print "Apple shape: " + variables["Apple"].shape 
```

`Fruit`如果您使用`namedtuple`虽然（即没有设置`variables["Apple"].colour`为），则无法更改每个变量的变量`"green"`，因此根据预期用途，它可能不是一个好的解决方案。如果您喜欢该`namedtuple`解决方案但想更改变量，则可以将其改为一个成熟的`Fruit`类，它可以用作`namedtuple` `Fruit`上述代码中的替代品。

```
class Fruit(object):
    def __init__(self, name, colour, shape):
        self.name = name
        self.colour = colour
        self.shape = shape 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:32:17.433

使用字典最容易做到这一点：

```
app_list = [
    ['Apple', 'red', 'circle'],
    ['Banana', 'yellow', 'abnormal'],
    ['Pear', 'green', 'abnormal']
]
app_keys = {}

for sub_list in app_list:
    app_keys["%s_n" % sub_list[0]] = sub_list[0]
    app_keys["%s_c" % sub_list[0]] = sub_list[1]
    app_keys["%s_s" % sub_list[0]] = sub_list[2] 
```

# operating-system - 我可以在 FreeRTOS 上下文切换期间保存 MSP430 CRC 寄存器吗？

> ID：11118487
> 
> 赞同：2
> 
> 时间：2012-06-20T11:26:25.310
> 
> 标签：operating-system, crc, msp430, context-switch, freertos

我在中等数据模型中使用带有 FreeRTOS 7 的 MSP430F5418。

我想在 FreeRTOS 上下文切换上保存 MSP CRC 寄存器。我像这样编辑了porttext.s43。

在保存上下文宏中，将 15 个寄存器压入堆栈后，我压入 CRC 寄存器。（CRCDI是要保存的MSP寄存器）

```
mov.w CRCD1, r15 
pushx.a r15 
```

在恢复上下文宏中，我在弹出 15 个寄存器之前弹出了 CRC。

```
popx.a r15
mov.w r15, CRCDI 
```

它应该可以工作，但事实并非如此。程序控制将不知道位置。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:46:37.553

我不知道为什么人们会在免费和活跃的 FreeRTOS 支持请求论坛以外的论坛上询问 FreeRTOS 支持问题。不过这让我的生活很艰难。

我在这里回答了你的问题： [https ://sourceforge.net/projects/freertos/forums/forum/382005/topic/5367023](https://sourceforge.net/projects/freertos/forums/forum/382005/topic/5367023)

# jquery - 使用 css 的样式选择选项

> ID：11118491
> 
> 赞同：3
> 
> 时间：2012-06-20T11:26:42.600
> 
> 标签：jquery, html, css

我正在尝试使用 CSS 设置选择选项列表的样式。我想要在列表的时间之间有更多的填充，因为它们似乎被压在一起了。我尝试向选项元素添加填充，但这似乎不起作用。有任何想法吗？

这是我的代码

**HTML**

```
<select name="secondSelect[]" id='second' multiple='multiple' size='8' >
   <option value="1" style="padding: 10px;">Option a 1</option>
   <option value="2" SELECTED >Option b 2(sel)</option>
   <option value="3">Option c 3</option>
   <option value="4" SELECTED >Option d 4 (sel)</option>
   <option value="5">Option e 5</option>
   <option value="6">Option f 6</option>
   <option value="7">Option g 7</option>
   <option value="8">Option h 8</option>
   <option value="9">Option i 9</option>
   <option value="10" SELECTED >Option l 10 (sel)</option>
</select>​ 
```

**CSS**

```
.ms2side__div select {
    width: 220px;
    float: left;
    border: 1px solid #BFBFBF;
    background: white;
    font-size: 12px;
    color: #9D9D9D;
    font-family: Arial, Helvetica, sans-serif; 
    padding: 10px;
    line-height: 25px;
}​ 
```

[http://jsfiddle.net/noscirre/GUdhc/](http://jsfiddle.net/noscirre/GUdhc/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:32:10.197

你可以试试`<optgroup>`标签：

```
<optgroup>
        <option value="1">Option a 1</option> 
</optgroup>

optgroup {
   padding: 5px 0px
} 
```

[http://jsfiddle.net/GUdhc/5/](http://jsfiddle.net/GUdhc/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:31:03.567

尝试在选项本身而不是选择上设置样式，并专注于选项的填充和行高。顺便说一句，您的选择器 '.ms2side__div' 不正确。选择有一个 ID，所以使用 'select#second' 或只是 '#second'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:43:00.580

如果我是正确的，Firefox 是唯一支持填充、高度、边距或任何其他类型的选项元素大小修改的浏览器。（至少 Chrome 不允许任何形式的大小更改，并且您不能忽略 Chrome 用户）所以上面提到的解决方案主要适用于 Firefox，也可能适用于其他一些浏览器。

所以你的选择是滚动你自己的或使用更可修改的 javascript 元素库，如 jquery-ui 或 twitter bootstrap。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:44:48.897

我在那里更改了您的代码示例中的一些内容。但在我看来，你会得到的最好的结果是所选元素的颜色变化：

[http://jsfiddle.net/GUdhc/25/](http://jsfiddle.net/GUdhc/25/)

如果您然后单击框中的某些内容，您将看到“选定”的内容为红色字体。您不能以这种方式更改填充、边距或其他内容。

You may need to use javascript "OnChange" to do this but that's beyond me.

# c++ - 从 IIS 7.5 Web 应用程序调用 Win32 CreateEvent() 失败

> ID：11118493
> 
> 赞同：1
> 
> 时间：2012-06-20T11:26:52.910
> 
> 标签：c++, winapi, interop, zeromq

我正在使用由 C# 包装器 ( clrzmq ) 调用[的本机库 ( libzmq](https://github.com/zeromq/clrzmq) [)](https://github.com/zeromq/libzmq)。IIS Web 应用程序（IIS 7.5、Windows Server 2008 R2、ASP.NET MVC 3）正在使用它。

本机库调用[CreateEvent()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)，但在使用 ApplicationPoolIdentity 运行 Web 应用程序时失败。如果我使用 LocalSystem 帐户，它会起作用，但我宁愿不这样做。

我已经尝试过使用和不使用事件名称的“Global\”前缀。

**有没有办法给 ApplicationPoolIdentity 所需的权限？**

相关的代码片段如下：

```
//  Make the following critical section accessible to everyone.
SECURITY_ATTRIBUTES sa = {0};
sa.nLength = sizeof (sa);
sa.bInheritHandle = FALSE;
SECURITY_DESCRIPTOR sd;
BOOL ok = InitializeSecurityDescriptor (&sd, SECURITY_DESCRIPTOR_REVISION);
win_assert (ok);
ok = SetSecurityDescriptorDacl(&sd, TRUE, (PACL) NULL, FALSE);
win_assert (ok);
sa.lpSecurityDescriptor = &sd;

//  This function has to be in a system-wide critical section so that
//  two instances of the library don't accidentally create signaler
//  crossing the process boundary.
HANDLE sync = CreateEvent (&sa, FALSE, TRUE,
    "Global\\zmq-signaler-port-sync");
win_assert (sync != NULL); 
```

它在最后一行失败，因为同步为空。

以供参考：

```
// Provides convenient way to check GetLastError-style errors on Windows.
#define win_assert(x) \
    do {\
        if (unlikely (!(x))) {\
            char errstr [256];\
            zmq::win_error (errstr, 256);\
            fprintf (stderr, "Assertion failed: %s (%s:%d)\n", errstr, \
                __FILE__, __LINE__);\
            zmq::zmq_abort (errstr);\
        }\
    } while (false)

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:47:17.457

现在已经讨论并修复了这个问题：

*   [https://github.com/zeromq/clrzmq/issues/81](https://github.com/zeromq/clrzmq/issues/81)
*   [https://zeromq.jira.com/browse/LIBZMQ-335](https://zeromq.jira.com/browse/LIBZMQ-335)

# wpf - 使用鼠标光标在 Windows 8 中选择 WPF 组合框

> ID：11118498
> 
> 赞同：1
> 
> 时间：2012-06-20T11:27:10.760
> 
> 标签：wpf, combobox, windows-8

我有一个带有常规组合框的 wpf 应用程序。在 Windows 8 RP 中测试此应用程序时，组合框的行为有点奇怪。

要选择一个项目，我必须将鼠标光标移动到该项目上的文本上，否则控件将不会用悬停样式标记它，并且如果我单击它不会将其注册为对该项目的有效单击。组合框将关闭并选择最后一个被选中的组合框。

组合框项目上的整行应该是可选择的，而不仅仅是文本区域。我没有在组合框上做任何样式或模板。只需将其绑定到数据源。

任何人以前见过这种行为并知道该怎么做？

它仅在 Windows 8 中，在 Windows 7 中正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:59:33.170

**编辑：这个错误实际上是由微软在 Windows 8 和 RTM 的最后一个 Release Preview 版本之间修复的。我不敢相信！！！**

——原答案：

我在 Windows 8 RP 上遇到了同样的问题。在它被修复或有更好的解决方法之前，我打算通过在检测到 Windows 8 时在应用程序启动时执行以下命令来强制 Aero 主题：

```
Uri uri = new Uri("PresentationFramework.Aero;V4.0.0.0;31bf3856ad364e35;component\\themes/aero.normalcolor.xaml", UriKind.Relative);
Resources.MergedDictionaries.Insert(0, Application.LoadComponent(uri) as ResourceDictionary); 
```

我不确定这是多么正确/好，但它让我回到了工作组合框，并且似乎已经否定了除按钮和文本框之外的所有控件中存在的弱 Metro 样式，出于某种原因。

我在此处使用 Insert 而不是 Add 来保留我对各种控件的自定义样式。

# visual-studio - VS 11 Ultimate 版本发布了吗？

> ID：11118503
> 
> 赞同：-4
> 
> 时间：2012-06-20T11:27:29.697
> 
> 标签：visual-studio

微软VS最新版本是什么，是发布了VS 11终极版还是只发布了beta版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:30:02.287

Vs 11 已重命名为 vs 2012，目前作为候选版本发布。我预计到秋天会有最终版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:36:28.743

Visual Studio 2012 Beta 于 2012 年 2 月 1 日发布，可从[产品主页](http://www.microsoft.com/visualstudio/11/en-us)下载。发布候选版于 2012 年 5 月 31 日发布。

# firefox - 当 Cucumber 通过 Autotest 运行时使用 Capybara-webkit（而不是 Selenium）？

> ID：11118507
> 
> 赞同：4
> 
> 时间：2012-06-20T11:27:51.397
> 
> 标签：firefox, selenium, cucumber, capybara, autotest

在手动运行 Cucumber 测试时，我通常使用 Selenium 和 Firefox。但是当我运行 Autotest 时，我希望它们使用 Capybara-webkit 运行，否则 Firefox 总是跳到前台，这很烦人。

那么如何实现呢？我想我必须设置

```
Capybara.javascript_driver = :webkit 
```

在 env.rb 文件中取决于测试是否由 Autotest 运行，但如何区分？

另一种选择是告诉 Firefox 在后台启动，但是如何实现呢？

这里有一些可能的解决方法：使用 chrome！这似乎是在后台启动的，因此不会中断您的工作流程。请参阅[http://collectiveidea.com/blog/archives/2011/09/27/use-chrome-with-cucumber-capybara/](http://collectiveidea.com/blog/archives/2011/09/27/use-chrome-with-cucumber-capybara/)。

非常感谢！乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T17:06:24.167

如果您将它作为 Rails 项目的一部分运行，我建议您创建一个新的测试组，一个用于在本地运行（即`:test`），一个用于运行 Autotest（即`:autotest`）。

在您的 env.rb 文件中，您可以执行以下操作：

```
if Rails.env.autotest?
  Capybara.javascript_driver = :webkit
else
  Capybara.javascript_driver = :selenium
end 
```

假设您正在运行 Rails 3。如果您尚未运行 Rails 3，我认为您可以使用它`RAILS_ENV`来获取当前环境名称。

一旦设置好，只需更改 Autotest 以使用`:autotest`环境。

# design-patterns - 2 个 Web 开发人员的工作模式

> ID：11118509
> 
> 赞同：0
> 
> 时间：2012-06-20T11:27:54.673
> 
> 标签：design-patterns

对于同时从事同一个项目的 2 个 Web 开发人员来说，最好的工作模式是什么。目前我正在与我的共同开发人员一起工作，我们有一个 Web 服务器，我们的两个 IDE 都只是上传我们的更改，如果他在我之前进行了更改，IDE 只会警告我并合并那些冲突的文件。我知道有版本控制系统，但我无法掌握从哪里开始使用它们以及如何根据组织模式的需要进行设置。主要的是，当我们一起编码时，我们需要对正在编辑的文件进行快速更新，这不像我们一整天都在做单独的部分，最后我们合并它们，它的小部分不断更新。

你对好人有什么建议？

PS 我们使用 JetBrains 的 PHPStorm 作为我们的 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:56:27.407

> 版本控制从哪里开始

您可以使用开源代码控制，例如`git`或`svn`. `git`这几天很流行。这是设置链接[http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup](http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup)

> 当我们一起编码时，我们需要对正在编辑的文件进行快速更新

据我所知，没有版本控制软件`pushes`可以更改您的工作区。`pull`如果您想要更新副本，您将不得不经常使用它们。因此，对于您的情况，由于你们俩都需要经常共享更改，因此一旦完成就推动每个小的模块化更改。如果您正在使用`git`，您每次都将被迫首先提取最新更改，因此每次您提交时都会自动获得文件的最新副本 注意：确保您提交模块化更改，以便恢复变得容易。

# javascript - 使用 Javascript 和 Regex 替换 HTML 字符

> ID：11118515
> 
> 赞同：3
> 
> 时间：2012-06-20T11:28:10.023
> 
> 标签：javascript, html, regex, escaping

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:34:08.247

而不是特定实体的代码，一个替换原始 7 位 ASCII 范围之外的*任何内容的代码怎么样：*

```
str = str.replace(/[^\011\012\015\040-\177]/g, function(x) {
    return '&#' + x.charCodeAt(0) + ';'
}) 
```

（正则表达式匹配任何不是空格或“普通”ASCII 字符的内容）

或者，编写您的地图，以便*键*是您要替换的字符，值是实体：

```
var map = { '£' : '&pound;' }

str = str.replace(/./g, function(x) {
    return (x in map) ? map[x] : x;
}); 
```

请注意，这两个版本都只调用*一次*正则表达式，而不是为集合中的每个可能实体调用一次。这应该使代码比基于循环的方法快一些。

# ruby-on-rails - 是否可以在会话中结转数据？

> ID：11118517
> 
> 赞同：1
> 
> 时间：2012-06-20T11:28:16.123
> 
> 标签：ruby-on-rails, session, devise

假设我没有登录，服务器在会话中存储了一些东西，比如

`session[:color] = blue`

登录后是否可以保留用户的设置？似乎在我登录后我得到了一个新的会话 ID，并且设置丢失了。

我正在使用 Rails 3.2.5 和 Devise 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:32:57.303

我们使用了一个cookie，它解决了这个问题。

# c# - 以编程方式通过路由/模型绑定传递 URL

> ID：11118532
> 
> 赞同：2
> 
> 时间：2012-06-20T11:28:45.267
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个 MVC 应用程序，其路由非常复杂（50 多个路由），其中许多路由约束不同。

例如：

```
/{optional section}/{optional section}/{optional section}/{optional section}/?p1=&p2=.... 
```

然后由一个复杂的自定义模型绑定器获取，然后将路由数据转换为一个复杂的对象，其中包含大约 50 个字段和复杂的子对象。

有什么方法可以以编程方式将 URL 传递到 MVC 路由系统，让它吐出一个模型绑定对象（就像通过 HTTP 传递时的标准操作方法一样）？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:47:57.787

RouteDebugger 文件之一的源代码在[这里](https://github.com/Haacked/RouteMagic/blob/master/src/RouteDebug/DebugHttpHandler.cs)。在其中，您可以找到检索路由列表、迭代它们并找出与给定 url 匹配的方法。您应该能够使用此示例来解决至少部分问题：确定要使用的路由定义。您可能还能够找出路由系统使用的类，这可能为您提供一种进行模型绑定的方法。

# mysql - mysqld 上的平均负载为 65，cpu 为 100%

> ID：11118533
> 
> 赞同：0
> 
> 时间：2012-06-20T11:28:47.607
> 
> 标签：mysql

平均负载很大，但所有选择都会立即处理，并且很快就会提交更新。我没有看到有关表或选择的索引的任何问题。但我怀疑必须为以下状态做些什么。任何建议都会有很大帮助。今天早上，我们从 5.0 迁移到 5.5.25，启用了行 bin 日志。现在性能很糟糕。请建议在哪里微调..

```
mysql> SHOW status LIKE 'qcache%'; 
+-------------------------+------------+ 
| Variable_name | Value | 
+-------------------------+------------+ 
| Qcache_free_blocks | 1 | 
| Qcache_free_memory | 1070253896 | 
| Qcache_hits | 42362 | 
| Qcache_inserts | 1275394 | 
| Qcache_lowmem_prunes | 0 | 
| Qcache_not_cached | 1433302 | 
| Qcache_queries_in_cache | 2805 | 
| Qcache_total_blocks | 5618 | 
+-------------------------+------------+ 
8 rows in set (0.10 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:33:30.273

首先记录您的查询及其执行时间，以尝试找出最严重的违规者。

还要尝试找出负载的来源，以便您可以专注于瓶颈。开始可以是定期安装`sysstat`和运行`sar`以收集有关内存使用、I/O 等的信息。

向[Serverfault](https://serverfault.com/)寻求最佳配置 MySQL 的帮助。

# mysql - MySql sql递归循环

> ID：11118537
> 
> 赞同：2
> 
> 时间：2012-06-20T11:28:50.293
> 
> 标签：mysql, sql, loops, recursion

我正在从页面列表构建导航菜单。表格是这样的：

```
Table name: pages

id | type | parent | name
-------------------------------
1,    1,     null,   root1
2,    1,     null,   root2
3,    2,     2,      home
4,    2,     3,      child
5,    2,     4,      sub_child
6,    3,     5,      sub_sub_child

type:
1 = root page / site
2 = page
3 = ... 
```

我的问题是，从任何页面，我都必须找到根页面。我有一个列**父级**，它引用父级页面，根页面除外。

我可以在表中有多个根页面，但每个页面只有一个父页面。

有人可以帮我写一个递归查询吗？

我正在尝试使用此查询，但它不起作用：

```
with recursive pages (id, parent) as 
(
    select pages.id, 
    pages.parent, 
    from pages
    where pages.id = 4

union all
    select pages.id, 
    pages.parent,
    from pages
    inner join pages p on p.id = pages.parent
)
select id
from pages; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:58:12.600

正如其他海报所评论的那样，MySQL 似乎不支持这一点。[您可以使用嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)重构您的表，从而摆脱对分层查询的需求。

**例子**

而不是列，`parent`您有`leftid`和。`rightid``is_root`

```
id | type | leftid | rightid | is_root |  name
------------------------------------------------
1,    1,     1,      2         1          root1
2,    1,     3,      12        1          root2
3,    2,     4,      11        0          home
4,    2,     5,      10        0          child
5,    2,     6,      9         0          sub_child
6,    3,     7,      8         0          sub_sub_child 
```

然后要查找任何给定记录的父项，您只需找到`leftid`小于和`rightid`大于该记录的记录。使用该`is_root`列获取最终的根记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:12:43.390

我在数据库中处理树状结构数据的方法是向表中添加一列`FullID`以避免复杂的（可能是递归的）SQL/存储过程。

```
FullID     id  parent   name
-----------------------------
1          1   null     root1
2          2   null     root2
2.3        3   2        home
2.3.4      4   3        child
2.3.4.5    5   4        sub_child
2.3.4.5.6  6   5        sub_sub_child 
```

`FullID`因此，要查找根页面 id，只需通过 SQL 或您的应用程序语言提取第一部分。

如果使用 SQL，则可以使用以下 SQL 获取 root id。

```
-- MySQL dialect
select substring_index(FullID,'.',1) as RootID from table;

-- SQL Server dialect
select case charindex('.', FullID) when 0 then FullID else substring(FullID, 1, charindex('.', FullID)-1) end as RootID from table 
```

**删除节点及其子节点**

```
DELETE table WHERE id=<CURRENT_NODE_ID> OR FullID LIKE '<CURREN_NODE_FULLID>.%' 
```

**移动节点及其子节点**

```
-- change the parent of current node:
UPDATE table
SET parent=<NEW_PARENT_ID>
WHERE id=<CURRENT_NODE_ID>

-- update it's FullID and all children's FullID:
UPDATE table
SET FullID=REPLACE(FullID,<CURRENT_NODE_PARENT_FULLID>, <NEW_PARENT_FULLID>)
WHERE (id=<CURRENT_NODE_ID> OR FullID LIKE '<CURRENT_NODE_FULLID>.%') 
```

**笔记**

此技巧仅适用于有限的树级别情况，或者`FullID`如果树级别太深则无法容纳长内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:53:47.550

您使用的`WITH RECURSIVE`子句适用于 PostgreSQL 数据库，不适用于 MySQL。Oracle 拥有它`CONNECT BY ... START WITH ...`，而且似乎在每个数据库中递归查询的执行方式都不同。

然而，MySQL 不支持递归/分层查询。您需要在程序上循环遍历行以查找到根的父级。

了解如何[在 MySQL 中模拟](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)[分层查询（如 Oracle 的`CONNECT BY`](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)） 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:09:18.810

我想我会对我的数据库进行一些修改。谈完之后，我可以删除列**类型**并添加一些表格来对不同的页面进行分类。所以结构发生了变化。我想我会使用一个 php 循环。它不漂亮，但它有效，而且不会太慢......永远不会有 200 个孩子比别人低......但我记住了`START WITH`。

谢谢你们

# antlr - ANTLR：代币组合

> ID：11118539
> 
> 赞同：1
> 
> 时间：2012-06-20T11:28:56.467
> 
> 标签：antlr

我有一个问题，我现在正在搜索大约一个小时。给定的 ANTLR 词法分析器规则由 2 个（或更多）子规则组成。Lexer 现在生成单独的 AST 节点。

例子：

```
[...]
variable: '$' CamelCaseIdentifier;
CamelCaseIdentifier: ('a'..'z') Identifier*;
Identifier: ('a'..'z' | 'A' .. 'Z' | '0'..'9')+;
[...] 
```

给定输入`[...]$a[...]`的结果是`..., $, a, ...`

我正在寻找一种方法来告诉词法分析器，这些规则不应分开：`..., $a, ...`

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:22:54.813

解析器规则以小写字母开头，词法分析器规则以大写字母开头。当您作为 AST 输出时，解析器规则中的每个单独的标记都将成为一个单独的节点，因此您需要将该`variable`规则设为词法分析器规则而不是解析器规则：

```
Variable            : '$' CamelCaseIdentifier;
CamelCaseIdentifier : ('a'..'z') Identifier*;
Identifier          : ('a'..'z' | 'A' .. 'Z' | '0'..'9')+; 
```

但如果你这样做，输入`123456`将被标记为`Identifier`，这可能不是你想要的。此外，该`Identifier`规则最好命名为`AlphaNum`。如果你为它制定一个片段规则，你确保词法分析器永远不会`AlphaNum`在自己身上产生任何标记，而只会将`AlphaNum`'s 用于其他词法分析器规则（如你的`CamelCaseIdentifier`规则）。如果您还想要与 匹配的规则`Identifier`，请执行以下操作：

```
Variable            : '$' (CamelCaseIdentifier | Identifier);
CamelCaseIdentifier : 'a'..'z' AlphaNum*;
Identifier          : 'A'..'Z' AlphaNum*;

// a fragment rule can't be used inside parser rules, only in lexer rules
fragment AlphaNum   : 'a'..'z' | 'A' .. 'Z' | '0'..'9'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:59:43.147

也许尝试将所有规则名称大写？

编辑：以示例

```
grammar Dummy;

prog : VARIABLE*;

VARIABLE: '$' CAMELCASEIDENTIFIER;
CAMELCASEIDENTIFIER: ('a'..'z') IDENTIFIER*;
IDENTIFIER: ('a'..'z' | 'A' .. 'Z' | '0'..'9')+;

WS: (' ' | '\t' | '\n' | '\r' | '\f')+ {$channel = HIDDEN; }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-30T00:57:32.473

我是编译器和 Antlr 的初学者，但根据我有限的理解，大写（词法分析器）规则仅适用于正则表达式。小写（解析器）规则也可以兼作词法分析器规则（参见 [1]）。所以变量是大写还是小写都没有关系，对吧？

无论如何，我可能是错的，但这样做会不会更简单：

```
[...]
variable: '$' ('a'..'z' | 'A' .. 'Z') ALPHANUM*;
ALPHANUM: ('a'..'z' | 'A' .. 'Z' | '0'..'9');
[...] 
```

?

如果你打算重用 ('a'..'z' | 'A' .. 'Z')，那么你应该这样做：

```
[...]
variable: '$' ALPHA ALPHANUM*;
fragment ALPHA: ('a'..'z' | 'A' .. 'Z')
ALPHANUM: (ALPHA | '0'..'9');
[...] 
```

抱歉，如果这完全偏离基础，我仍在学习。

[1] [https://theantlrguy.atlassian.net/wiki/spaces/ANTLR3/pages/2687210/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required](https://theantlrguy.atlassian.net/wiki/spaces/ANTLR3/pages/2687210/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required)

# asp.net-mvc-4 - MVC WebAPI。想根据当前的格式化程序获取 HttpResponseMessage 的格式

> ID：11118547
> 
> 赞同：2
> 
> 时间：2012-06-20T11:29:23.920
> 
> 标签：asp.net-mvc-4, asp.net-web-api

下面是我的 MVC Web Api RC 的 Get 方法。

```
public Employee Get(int id)
{
     Employee emp= null;

     //try getting the Employee with given id, if not found, gracefully return error message with notfound status
     if (!_repository.TryGet(id, out emp))
         throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound)
         {
             Content = new StringContent("Sorry! no Employee found with id " + id),
             ReasonPhrase = "Error"
         });

      return emp;
} 
```

这里的问题是，每当抛出错误“对不起！没有找到带有 id 的员工”时，它只是平面文本格式。但是我想根据我当前的格式化程序设置格式。默认情况下，我在 global.asax 中设置了 XML 格式化程序。所以错误应该以 XML 格式显示。就像是 ：

```
<error>
  <error>Sorry! no Employee found with id </error>
</error> 
```

对于 Json 格式化程序也是如此。它应该是 ：

```
[{"errror","Sorry! no Employee found with id"}] 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T11:42:58.353

您正在返回一个`StringContent`. 这意味着内容将按原样返回，并由您自行格式化。

我个人会定义一个模型：

```
public class Error
{
    public string Message { get; set; }
} 
```

进而：

```
if (!_repository.TryGet(id, out emp))
{
    var response = Request.CreateResponse(
        HttpStatusCode.NotFound,
        new Error { Message = "Sorry! no Employee found with id " + id }
    );
    throw new HttpResponseException(response);
} 
```

启用 XML Accept 的客户端会看到：

```
<Error xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/AppName.Models">
    <Message>Sorry! no Employee found with id 78</Message>
</Error> 
```

启用 JSON Accept 的客户端会看到：

```
{"Message":"Sorry! no Employee found with id 78"} 
```

# regex - 重新格式化日期

> ID：11118549
> 
> 赞同：0
> 
> 时间：2012-06-20T11:29:28.433
> 
> 标签：regex

我正在使用 notepad++ 进行一些日期转换，但遇到了问题。

我可以将 dd/mm/yyyy 格式的日期转换为 yyyy-mm-dd

但是，某些日期的格式为 d/m/yyyy，因为日期或月份只有 1 位数字，然后我的正则表达式失败。

如何将它们全部格式化为读取 dd/mm/yyyy？

我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:36:35.903

```
([0-9]{1,2})/([0-9]{1,2})/([0-9]{4}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:35:17.827

不知道正则表达式的记事本+版本，但也许这会起作用：

```
(\d+)/(\d+)/(\d\d\d\d) 
```

`\d`是数字，可以替换为`[0-9]`

`+`表示一个或多个，并且可以替换为`{1,2}`which 表示出现一两次

如果您想替换添加前导零的日期或月份，那么您应该使用简单的程序来完成。在编辑器中，您必须分 3 步完成：

1.  `dd/mm/yyyy`像你已经做的那样替换
2.  替换`d/mm/yyyy` `[^0-9]([0-9])/([0-9]){2}/([0-9]){4}`->`\3-\2-0\1`
3.  替换`dd/m/yyyy` `([0-9]){2}/([0-9])/([0-9]){4}`->`\3-0\2-\1`

# python - sys.stdin 的样机？

> ID：11118551
> 
> 赞同：2
> 
> 时间：2012-06-20T11:29:31.913
> 
> 标签：python, unit-testing, stdin, mockups

假设，你想`unittest`为这样的函数写 s：

```
def test_me(instream):
    out = ""
    for line in instream:
       out += foo(line)
    return out 
```

通常这样使用：

```
test_me(sys.stdin) 
```

现在，在您`unittest`的 s 中，您不想使用`sys.stdin`模仿`sys.stdin`s 行为的对象，并且该对象应该由您完全控制。这样，您可以按原样测试该功能，并且可以插入您喜欢的任何假输入。你需要创建什么样的对象来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:35:32.987

在这种情况下，`instream`参数用作生成器；实现一个生成器就可以了。可能只提供一个带有行列表的函数就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:40:25.610

尝试[`StringIO`](http://docs.python.org/library/stringio.html)和/或[`cStringIO`](http://docs.python.org/library/stringio.html#module-cStringIO)模块。

# javascript - javascript上的上一个和下一个按钮

> ID：11118552
> 
> 赞同：-3
> 
> 时间：2012-06-20T11:29:33.490
> 
> 标签：javascript, jquery, html, css

我有一个用于画廊的 javascript，效果很好。当我单击一张图片时，它会淡入并显示我选择的图片，但它没有 NEXT 和 PREVIUS 按钮。我必须关闭那张照片并打开另一张。如何添加下一个和上一个按钮？THNX

这是js代码（thickbox.js）：

```
/*
 * Thickbox 3.1 - One Box To Rule Them All.
 * By Cody Lindley (http://www.codylindley.com)
 * Copyright (c) 2007 cody lindley
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*/

var tb_pathToImage = "images/loadingAnimation.gif";

/*!!!!!!!!!!!!!!!!! edit below this line at your own risk !!!!!!!!!!!!!!!!!!!!!!!*/

//on page load call tb_init
$(document).ready(function(){   
    tb_init('a.thickbox, area.thickbox, input.thickbox');//pass where to apply thickbox
    imgLoader = new Image();// preload image
    imgLoader.src = tb_pathToImage;
});

//add thickbox to href & area elements that have a class of .thickbox
function tb_init(domChunk){
    $(domChunk).click(function(){
    var t = this.title || this.name || null;
    var a = this.href || this.alt;
    var g = this.rel || false;
    tb_show(t,a,g);
    this.blur();
    return false;
    });
}

function tb_show(caption, url, imageGroup) {//function called when the user clicks on a thickbox link

    try {
        if (typeof document.body.style.maxHeight === "undefined") {//if IE 6
            $("body","html").css({height: "100%", width: "100%"});
            $("html").css("overflow","hidden");
            if (document.getElementById("TB_HideSelect") === null) {//iframe to hide select elements in ie6
                $("body").append("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>");
                $("#TB_overlay").click(tb_remove);
            }
        }else{//all others
            if(document.getElementById("TB_overlay") === null){
                $("body").append("<div id='TB_overlay'></div><div id='TB_window'></div>");
                $("#TB_overlay").click(tb_remove);
            }
        }

        if(tb_detectMacXFF()){
            $("#TB_overlay").addClass("TB_overlayMacFFBGHack");//use png overlay so hide flash
        }else{
            $("#TB_overlay").addClass("TB_overlayBG");//use background and opacity
        }

        if(caption===null){caption="";}
        $("body").append("<div id='TB_load'><img src='"+imgLoader.src+"' /></div>");//add loader to the page
        $('#TB_load').show();//show loader

        var baseURL;
       if(url.indexOf("?")!==-1){ //ff there is a query string involved
            baseURL = url.substr(0, url.indexOf("?"));
       }else{ 
            baseURL = url;
       }

       var urlString = /\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/;
       var urlType = baseURL.toLowerCase().match(urlString);

        if(urlType == '.jpg' || urlType == '.jpeg' || urlType == '.png' || urlType == '.gif' || urlType == '.bmp'){//code to show images

            TB_PrevCaption = "";
            TB_PrevURL = "";
            TB_PrevHTML = "";
            TB_NextCaption = "";
            TB_NextURL = "";
            TB_NextHTML = "";
            TB_imageCount = "";
            TB_FoundURL = false;
            if(imageGroup){
                TB_TempArray = $("a[@rel="+imageGroup+"]").get();
                for (TB_Counter = 0; ((TB_Counter < TB_TempArray.length) && (TB_NextHTML === "")); TB_Counter++) {
                    var urlTypeTemp = TB_TempArray[TB_Counter].href.toLowerCase().match(urlString);
                        if (!(TB_TempArray[TB_Counter].href == url)) {                      
                            if (TB_FoundURL) {
                                TB_NextCaption = TB_TempArray[TB_Counter].title;
                                TB_NextURL = TB_TempArray[TB_Counter].href;
                                TB_NextHTML = "<span id='TB_next'>&nbsp;&nbsp;<a href='#'>Next &gt;</a></span>";
                            } else {
                                TB_PrevCaption = TB_TempArray[TB_Counter].title;
                                TB_PrevURL = TB_TempArray[TB_Counter].href;
                                TB_PrevHTML = "<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>&lt; Prev</a></span>";
                            }
                        } else {
                            TB_FoundURL = true;
                            TB_imageCount = "Image " + (TB_Counter + 1) +" of "+ (TB_TempArray.length);                                         
                        }
                }
            }

            imgPreloader = new Image();
            imgPreloader.onload = function(){       
            imgPreloader.onload = null;

            // Resizing large images - orginal by Christian Montoya edited by me.
            var pagesize = tb_getPageSize();
            var x = pagesize[0] - 150;
            var y = pagesize[1] - 150;
            var imageWidth = imgPreloader.width;
            var imageHeight = imgPreloader.height;
            if (imageWidth > x) {
                imageHeight = imageHeight * (x / imageWidth); 
                imageWidth = x; 
                if (imageHeight > y) { 
                    imageWidth = imageWidth * (y / imageHeight); 
                    imageHeight = y; 
                }
            } else if (imageHeight > y) { 
                imageWidth = imageWidth * (y / imageHeight); 
                imageHeight = y; 
                if (imageWidth > x) { 
                    imageHeight = imageHeight * (x / imageWidth); 
                    imageWidth = x;
                }
            }
            // End Resizing

            TB_WIDTH = imageWidth + 30;
            TB_HEIGHT = imageHeight + 60;
            $("#TB_window").append("<a href='' id='TB_ImageOff' title='Close'><img id='TB_Image' src='"+url+"' width='"+imageWidth+"' height='"+imageHeight+"' alt='"+caption+"'/></a>" + "<div id='TB_caption'>"+caption+"<div id='TB_secondLine'>" + TB_imageCount + TB_PrevHTML + TB_NextHTML + "</div></div><div id='TB_closeWindow'><a href='#' id='TB_closeWindowButton' title='Close'>close</a> or Esc Key</div>");      

            $("#TB_closeWindowButton").click(tb_remove);

            if (!(TB_PrevHTML === "")) {
                function goPrev(){
                    if($(document).unbind("click",goPrev)){$(document).unbind("click",goPrev);}
                    $("#TB_window").remove();
                    $("body").append("<div id='TB_window'></div>");
                    tb_show(TB_PrevCaption, TB_PrevURL, imageGroup);
                    return false;   
                }
                $("#TB_prev").click(goPrev);
            }

            if (!(TB_NextHTML === "")) {        
                function goNext(){
                    $("#TB_window").remove();
                    $("body").append("<div id='TB_window'></div>");
                    tb_show(TB_NextCaption, TB_NextURL, imageGroup);                
                    return false;   
                }
                $("#TB_next").click(goNext);

            }

            document.onkeydown = function(e){   
                if (e == null) { // ie
                    keycode = event.keyCode;
                } else { // mozilla
                    keycode = e.which;
                }
                if(keycode == 27){ // close
                    tb_remove();
                } else if(keycode == 190){ // display previous image
                    if(!(TB_NextHTML == "")){
                        document.onkeydown = "";
                        goNext();
                    }
                } else if(keycode == 188){ // display next image
                    if(!(TB_PrevHTML == "")){
                        document.onkeydown = "";
                        goPrev();
                    }
                }   
            };

            tb_position();
            $("#TB_load").remove();
            $("#TB_ImageOff").click(tb_remove);
            $("#TB_window").css({display:"block"}); //for safari using css instead of show
            };

            imgPreloader.src = url;
        }else{//code to show html

            var queryString = url.replace(/^[^\?]+\??/,'');
            var params = tb_parseQuery( queryString );

            TB_WIDTH = (params['width']*1) + 30 || 630; //defaults to 630 if no paramaters were added to URL
            TB_HEIGHT = (params['height']*1) + 40 || 440; //defaults to 440 if no paramaters were added to URL
            ajaxContentW = TB_WIDTH - 30;
            ajaxContentH = TB_HEIGHT - 45;

            if(url.indexOf('TB_iframe') != -1){// either iframe or ajax window      
                    urlNoQuery = url.split('TB_');
                    $("#TB_iframeContent").remove();
                    if(params['modal'] != "true"){//iframe no modal
                        $("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' title='Close'>close</a> or Esc Key</div></div><iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW + 29)+"px;height:"+(ajaxContentH + 17)+"px;' > </iframe>");
                    }else{//iframe modal
                    $("#TB_overlay").unbind();
                        $("#TB_window").append("<iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW + 29)+"px;height:"+(ajaxContentH + 17)+"px;'> </iframe>");
                    }
            }else{// not an iframe, ajax
                    if($("#TB_window").css("display") != "block"){
                        if(params['modal'] != "true"){//ajax no modal
                        $("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'>close</a> or Esc Key</div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>");
                        }else{//ajax modal
                        $("#TB_overlay").unbind();
                        $("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>"); 
                        }
                    }else{//this means the window is already up, we are just loading new content via ajax
                        $("#TB_ajaxContent")[0].style.width = ajaxContentW +"px";
                        $("#TB_ajaxContent")[0].style.height = ajaxContentH +"px";
                        $("#TB_ajaxContent")[0].scrollTop = 0;
                        $("#TB_ajaxWindowTitle").html(caption);
                    }
            }

            $("#TB_closeWindowButton").click(tb_remove);

                if(url.indexOf('TB_inline') != -1){ 
                    $("#TB_ajaxContent").append($('#' + params['inlineId']).children());
                    $("#TB_window").unload(function () {
                        $('#' + params['inlineId']).append( $("#TB_ajaxContent").children() ); // move elements back when you're finished
                    });
                    tb_position();
                    $("#TB_load").remove();
                    $("#TB_window").css({display:"block"}); 
                }else if(url.indexOf('TB_iframe') != -1){
                    tb_position();
                    if($.browser.safari){//safari needs help because it will not fire iframe onload
                        $("#TB_load").remove();
                        $("#TB_window").css({display:"block"});
                    }
                }else{
                    $("#TB_ajaxContent").load(url += "&random=" + (new Date().getTime()),function(){//to do a post change this load method
                        tb_position();
                        $("#TB_load").remove();
                        tb_init("#TB_ajaxContent a.thickbox");
                        $("#TB_window").css({display:"block"});
                    });
                }

        }

        if(!params['modal']){
            document.onkeyup = function(e){     
                if (e == null) { // ie
                    keycode = event.keyCode;
                } else { // mozilla
                    keycode = e.which;
                }
                if(keycode == 27){ // close
                    tb_remove();
                }   
            };
        }

    } catch(e) {
        //nothing here
    }
}

//helper functions below
function tb_showIframe(){
    $("#TB_load").remove();
    $("#TB_window").css({display:"block"});
}

function tb_remove() {
    $("#TB_imageOff").unbind("click");
    $("#TB_closeWindowButton").unbind("click");
    $("#TB_window").fadeOut("fast",function(){$('#TB_window,#TB_overlay,#TB_HideSelect').trigger("unload").unbind().remove();});
    $("#TB_load").remove();
    if (typeof document.body.style.maxHeight == "undefined") {//if IE 6
        $("body","html").css({height: "auto", width: "auto"});
        $("html").css("overflow","");
    }
    document.onkeydown = "";
    document.onkeyup = "";
    return false;
}

function tb_position() {
$("#TB_window").css({marginLeft: '-' + parseInt((TB_WIDTH / 2),10) + 'px', width: TB_WIDTH + 'px'});
    if ( !(jQuery.browser.msie && jQuery.browser.version < 7)) { // take away IE6
        $("#TB_window").css({marginTop: '-' + parseInt((TB_HEIGHT / 2),10) + 'px'});
    }
}

function tb_parseQuery ( query ) {
   var Params = {};
   if ( ! query ) {return Params;}// return empty object
   var Pairs = query.split(/[;&]/);
   for ( var i = 0; i < Pairs.length; i++ ) {
      var KeyVal = Pairs[i].split('=');
      if ( ! KeyVal || KeyVal.length != 2 ) {continue;}
      var key = unescape( KeyVal[0] );
      var val = unescape( KeyVal[1] );
      val = val.replace(/\+/g, ' ');
      Params[key] = val;
   }
   return Params;
}

function tb_getPageSize(){
    var de = document.documentElement;
    var w = window.innerWidth || self.innerWidth || (de&&de.clientWidth) || document.body.clientWidth;
    var h = window.innerHeight || self.innerHeight || (de&&de.clientHeight) || document.body.clientHeight;
    arrayPageSize = [w,h];
    return arrayPageSize;
}

function tb_detectMacXFF() {
  var userAgent = navigator.userAgent.toLowerCase();
  if (userAgent.indexOf('mac') != -1 && userAgent.indexOf('firefox')!=-1) {
    return true;
  }
} 
```

`

这是HTML：`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>STUDIOCLICK - PORTFOLIO</title>
<!-- CSS Files -->
<link href="css/reset.css" rel="stylesheet" type="text/css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/thickbox.css" type="text/css" media="screen" />
<link rel="stylesheet" type="text/css" href="css/superfish.css" media="screen" />
<style type="text/css">
.sf-sub-indicator {
    behavior: url(css/iepngfix.htc)
}
;
</style>
<!-- End of CSS Files -->
<!-- Javascript Files -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="javascript/thickbox.js"></script>
<script type="text/javascript" src="javascript/superfish.js"></script>
<script type="text/javascript" src="javascript/dd.min.js"></script>
<script type="text/javascript">
//<![CDATA[

        // initialise plugins
        $(document).ready(function() { 

            if ($('#slider').length == 1)
            {
                $('#slider').cycle({
                        fx: 'fade',
                        speed: 2000,
                        timeout: 4000
                });
            }

            var ie6 = $.browser.msie && /MSIE 6.0/.test(navigator.userAgent);

            if (!ie6)
            {
                $('ul.sf-menu').superfish({ 
                    delay:       1000,                            // one second delay on mouseout 
                    animation:   {opacity:'show',height:'show'},  // fade-in and slide-down animation 
                    speed:       'normal'                         // faster animation speed 
                });             
            }
            else
            {
                DD_belatedPNG.fix('#topbar, img, a, .commentbubble, .infobubble, .view-all, #category-picture1, #category-picture2, #category-picture3, #footer');
            }
    }); 
//]]>

        </script>
<!-- End of Javascript Files -->
</head>
<body>
<!-- Wrapper -->
<div id="wrapper">
    <!-- Top bar -->
    <div id="topbar">
        <!-- Logo -->
        <img class="logo" src="images/logo.png" alt="logo" />
        <!-- Menu -->
        <div id="secnav">
            <ul>
                <li> <a href="#">SIGN UP</a> </li>
                <li class="noimg"> <a href="#">LOGIN</a> </li>
            </ul>
        </div>
        <div class="menu">
            <ul class="sf-menu">
                <li> <a href="index.html">HOME</a></li>
                <li> <a href="about.html">ABOUT</a>
                    <ul>
                        <li class="first"><a href="about.html">TEAM</a></li>
                        <li><a href="about.html">PHILOSOPHY</a></li>
                        <li><a href="about.html">COMPANY</a></li>
                        <li class="last"><a href="about.html">PRODUCTS</a>
                            <ul>
                                <li class="first"><a href="about.html">PRODUCT ONE</a></li>
                                <li><a href="about.html">PRODUCT TWO</a></li>
                                <li class="last"><a href="about.html">PRODUCT THREE</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li> <a class="on" href="portfolio.html">PORTFOLIO</a>
                    <ul>
                        <li><a href="portfolio.html">WEBDESIGN</a></li>
                        <li><a href="portfolio.html">PHOTOS</a>
                            <ul>
                                <li class="first"><a href="portfolio.html">NATURE</a></li>
                                <li><a href="portfolio.html">ANIMALS</a></li>
                                <li class="last"><a href="portfolio.html">CITIES</a>
                                    <ul>
                                        <li class="first"><a href="portfolio.html">NEW YORK</a></li>
                                        <li><a href="portfolio.html">MONTREAL</a></li>
                                        <li class="last"><a href="portfolio.html">LAS VEGAS</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="last"><a href="portfolio.html">ARTS</a></li>
                    </ul>
                </li>
                <li> <a href="blog.html">BLOG</a>
                    <ul>
                        <li class="first"><a href="blog.html">CATEGORY ONE</a></li>
                        <li><a href="blog.html">CATEGORY TWO</a></li>
                        <li class="last"><a href="blog.html">CATEGORY THREE</a></li>
                    </ul>
                </li>
                <li> <a href="contact.html">CONTACT</a> </li>
            </ul>
        </div>
        <!-- End of Menu -->
    </div>
    <!-- End of Topbar -->
    <!-- Introtext -->
    <div id="introtext">
        <!-- Subcategory-->
        <div class="subcategory">
            <h1>CATEGORY +</h1>
            <ul>
                <li><a href="#">NATURE</a></li>
                <li><a href="#">CITY</a></li>
                <li><a href="#">ANIMAL</a></li>
                <li><a href="#">ABSTRACT</a></li>
            </ul>
        </div>
        <!-- End of subcategory-->
        <h1>PORTFOLIO  +</h1>
        <p>Praesent id dolor et dolor viverra sagittis. Integer scelerisque quam nec est congue tempor eu ut metus. Etiam fringilla aliquam nulla eu bibendum. Ut cursus, ligula vel mollis hendrerit, est enim posuere velit, ultricies pretium tortor massa ut ipsum. Aenean a aliquet arcu.</p>
        <div class="clear"></div>
    </div>
    <!-- End of introtext -->
    <!-- Content -->
    <div class="portfolioitem">
        <ul>
            <li><a class="thickbox" href="images/photo9big.jpg"><img src="images/photo9.png" alt="photo"/></a></li>
            <li><a class="thickbox" href="images/photo1big.jpg"><img src="images/photo1.png" alt="photo"/></a></li>
            <li class="last"><a class="thickbox"  href="images/photo3big.jpg" ><img src="images/photo3.png" alt="photo" /></a></li>
            <li><a class="thickbox" href="images/photo6big.jpg"><img src="images/photo6.png" alt="photo"/></a></li>
            <li><a class="thickbox" href="images/photo5big.jpg"><img src="images/photo5.png" alt="photo"/></a></li>
            <li class="last"><a class="thickbox" href="images/photo4big.jpg" ><img class="right" src="images/photo4.png" alt="photo"  /></a></li>
            <li><a class="thickbox" href="images/photo7big.jpg"><img src="images/photo7.png" alt="photo"/></a></li>
            <li><a class="thickbox" href="images/photo2big.jpg" ><img class="right" src="images/photo2.png" alt="photo"  /></a></li>
            <li class="last"><a class="thickbox" href="images/photo1big.jpg"><img src="images/photo1.png" alt="photo"/></a></li>
        </ul>
    </div>
    <div id="portfolionav">
        <ul>
            <li class="on"><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li class="next"><a href="#">NEXT</a></li>
        </ul>
    </div>
    <!-- End of content-->
    <div class="clear"></div>
    <!-- Footer-->

    <!-- End of footer-->
</div>
<!-- End of wrapper -->
</body>
</html>
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:34:57.093

在 jQuery 插件页面查看第二个演示：

[http://jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)

在这里，您将在底部看到下一个和上一个按钮。

祝你好运！

* * *

顺便说一句（2009年的某个地方！！）

> 虽然Thickbox 有它的日子，但它不再维护，所以我们建议您使用一些替代品

# c# - Linq Expression - 如何使用 Expression.And 正确初始化？

> ID：11118562
> 
> 赞同：5
> 
> 时间：2012-06-20T11:30:10.637
> 
> 标签：c#, linq, dynamic

我正忙于在 IQueryable Linq 对象上编写动态 AND 过滤器，到目前为止，这是我的代码，它可以工作：

```
public static IQueryable<T> FilterHeaders<T>(this IQueryable<T> records, IEnumerable<ListHeader> headers)
{
    // Build linq expression to filter queryable
    if (headers != null)
    {
        var param = Expression.Parameter(typeof(T), "x");
        var body = Expression.And(Expression.Constant(true), Expression.Constant(true));

        foreach (var header in headers)
        {
            if (header.Filter != null && !String.IsNullOrWhiteSpace(header.Filter.Value))
            {
                var property = Expression.PropertyOrField(param, header.HeaderType.ToString());
                var value = Expression.Constant(header.Filter.Value.Trim(), typeof(string));
                body = Expression.AndAlso(body, Expression.Call(property, "Contains", null, value));
            }
        }
        var lambda = Expression.Lambda<Func<T, bool>>(body, param);
        return records.Where(lambda);
    }
    return records;
} 
```

我已经用`Expression.And(Expression.Constant(true), Expression.Constant(true))`. 在我看来，应该有更好的方法......

如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T11:33:40.213

你不能这样做：

```
var body = Expression.Constant(true); 
```

请注意，尽管名称令人困惑，但您不必[`AndAlso`](http://msdn.microsoft.com/en-us/library/bb353520.aspx)只使用 after 。[`And`](http://msdn.microsoft.com/en-us/library/bb301748.aspx)它们之间的区别很像和之间的区别`&`-`&&`是`AndAlso`逻辑与运算符，并且`And`是按位运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:50:01.503

代替

```
Expression.And(Expression.Constant(true), Expression.Constant(true)); 
```

和

```
Expression.Constant(true); 
```

# ruby-on-rails - 如何使用 MongoDB 查询今天创建的文档？

> ID：11118565
> 
> 赞同：3
> 
> 时间：2012-06-20T11:30:15.610
> 
> 标签：ruby-on-rails, mongoid

我将 Mongoid 用于我的简单 Rails 3.x 应用程序。我有这个模型：

```
class Report

  include Mongoid::Document
  include Mongoid::Timestamps

end 
```

我想使用我当前的时区（+08:00）获取今天创建的所有报告。我尝试使用这个片段：

```
Report.where(:created_at => DateTime.now.at_beginning_of_day.utc..Time.now.utc).to_a 
```

但是，当我触发时：

```
DateTime.now.at_beginning_of_day.utc 
```

它获取昨天的日期，时区为 +00:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:53:26.897

您可能应该打电话`Report.where(:created_at.gt => ...`来获取从一天开始以来创建的所有报告。

# sql - 使用主键更改列数据类型

> ID：11118568
> 
> 赞同：9
> 
> 时间：2012-06-20T11:30:32.177
> 
> 标签：sql, sql-server-2008, primary-key

我在 80 多个不同的表中有一个 ReferenceID varchar(6) 列。在分配 ID 的政府组织实施更改之后，我需要将其扩展到整个 db 中的 varchar(8)。

我希望声明一个游标来获取表名，如下所示：

```
DECLARE @TableName AS VARCHAR(200)
DECLARE TableCursor CURSOR LOCAL READ_ONLY FOR
SELECT t.name AS TableName
    FROM sys.columns c
        JOIN sys.tables t ON c.object_id = t.object_id
    WHERE c.name = 'ReferenceID'

OPEN TableCursor
    FETCH NEXT FROM TableCursor 
    INTO @TableName 
```

然后编辑类型如下：

```
ALTER TABLE @TableName ALTER COLUMN ReferenceID VARCHAR(8) 
```

这会失败，因为该列是某些表中主键的一部分（并且 PK 中包含的列因表而异）。

我真的不想为每个表手动删除和重新创建每个 PK。

在光标内，有没有办法在更改数据类型之前禁用 PK，然后重新启用它，或者在更改数据类型的任一侧删除并重新创建 PK，记住 PK 将取决于我们使用哪个表'目前在看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T15:23:44.377

您需要`NOT NULL`在 an 中明确指定，`ALTER TABLE ... ALTER COLUMN`否则默认为 allowed `NULL`。这在 PK 列中是不允许的。

以下工作正常。

```
CREATE TABLE p
(
ReferenceID VARCHAR(6) NOT NULL PRIMARY KEY
)

INSERT INTO p VALUES ('AAAAAA')

ALTER TABLE p ALTER COLUMN ReferenceID VARCHAR(8) NOT NULL 
```

当`NOT NULL`省略时，它会给出以下错误

```
Msg 5074, Level 16, State 1, Line 1
The object 'PK__p__E1A99A792180FB33' is dependent on column 'ReferenceID'.
Msg 4922, Level 16, State 9, Line 1
ALTER TABLE ALTER COLUMN ReferenceID failed because one or more objects access this column. 
```

在您的编程方法中需要考虑的几件事是，您*需要*暂时删除引用`ReferenceID`列的任何外键，并确保不包含当前*可以为*空的`NOT NULL`for (Non PK)`ReferenceID`列。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:39:31.070

**编辑**如果您有一个混乱的数据库，其中混合了 varchar(6) 和 char(6) 列，该数据库是由 10 年以上的开发引起的（政府政策发生了足够的变化以导致任何“良好的数据库设计”尝试最终崩溃。） **结束编辑**

对于那些说我必须放弃并重新创建 PK 的人，你是对的。索引和外键也需要删除和重新创建。

幸运的是，索引和 FK 的数量是可控的，所以我将它们作为“异常”处理，并在脚本开头一次一个地删除它们，然后在结尾处一次一个地重新添加它们脚本（参见下面 /* */ 中的两个部分）。

然后，SQL 脚本的主体将有关 FK 的完整详细信息提示到临时表中，然后遍历每个表名，删除 FK，更改数据类型，重新添加 FK。

组装的 SQL 字符串在下面的脚本中打印。如果您打算重复使用它（不提供任何保证等，等等等等），请将这些注释掉，以减少 50% 的执行时间。

```
SET NOCOUNT ON

/* Handle exceptional tables here
 * Remove indexes and foreign keys
 * --Lots of "IF EXISTS ... ALTER TABLE <name> DROP CONSTRAINT <constraint name>, etc.
 */

--Declare variables
DECLARE @SQL                    VARCHAR(8000)
DECLARE @TableName              VARCHAR(512)
DECLARE @ConstraintName         VARCHAR(512)
DECLARE @tColumn                VARCHAR(512)
DECLARE @Columns                VARCHAR(8000)
DECLARE @IsDescending           BIT

--Set up temporary table
SELECT
    tbl.[schema_id],
    tbl.name AS TableName,
    i.NAME AS IndexName,
    i.type_desc,
    c.[column],
    c.key_ordinal,
    c.is_desc,
    i.[object_id],
    s.no_recompute,
    i.[ignore_dup_key],
    i.[allow_row_locks],
    i.[allow_page_locks],
    i.[fill_factor],
    dsi.type,
    dsi.name AS DataSpaceName
INTO #PKBackup
FROM 
    sys.tables AS tbl
    INNER JOIN sys.indexes AS i
        ON (
            i.index_id > 0
            AND i.is_hypothetical = 0
        )
        AND ( i.[object_id] = tbl.[object_id] )
    INNER JOIN (
        SELECT
            ic.[object_id] ,
            c.[name] [column] ,
            ic.is_descending_key [is_desc],
            ic.key_ordinal
        FROM
            sys.index_columns ic
            INNER JOIN
                sys.indexes i
                ON
                i.[object_id] = ic.[object_id]
                AND
                i.index_id = 1
                AND
                ic.index_id = 1
            INNER JOIN
                sys.tables t
                ON
                t.[object_id] = ic.[object_id]
            INNER JOIN
                sys.columns c
                ON
                c.[object_id] = t.[object_id]
                AND
                c.column_id = ic.column_id
        ) AS c
        ON c.[object_id] = i.[object_id]
    LEFT OUTER JOIN
        sys.key_constraints AS k
        ON
        k.parent_object_id = i.[object_id]
        AND
        k.unique_index_id = i.index_id
    LEFT OUTER JOIN
        sys.data_spaces AS dsi
        ON
        dsi.data_space_id = i.data_space_id
    LEFT OUTER JOIN
        sys.xml_indexes AS xi
        ON
        xi.[object_id] = i.[object_id]
        AND
        xi.index_id = i.index_id
    LEFT OUTER JOIN
        sys.stats AS s
        ON
        s.stats_id = i.index_id
        AND
        s.[object_id] = i.[object_id]
WHERE
    k.TYPE = 'PK'

DECLARE TableCursor CURSOR LOCAL READ_ONLY FOR
    SELECT t.name AS TableName
    FROM sys.columns c
        JOIN sys.tables t ON c.object_id = t.object_id
    WHERE
        c.name = 'ReferenceID'

OPEN TableCursor
    FETCH NEXT FROM TableCursor 
    INTO @TableName

WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT('--Updating ' + @TableName + '...')

    SELECT @ConstraintName = PK.CONSTRAINT_NAME
    FROM
        INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
    WHERE
        PK.TABLE_NAME = @TableName
        AND
        PK.CONSTRAINT_TYPE = 'PRIMARY KEY'

--drop the constraint
    --Some tables don't have a PK defined, only do the next bit if they do
    IF (SELECT COUNT(*) FROM #PKBackup PK WHERE PK.TableName = @TableName) > 0
    BEGIN
        SET @SQL = 'ALTER TABLE @TableName DROP CONSTRAINT @ConstraintName'
        SET @SQL = REPLACE(@SQL, '@TableName', @TableName)
        SET @SQL = REPLACE(@SQL, '@ConstraintName', @ConstraintName)
        PRINT @SQL
        EXEC (@SQL)
    END
--This is where we actually change the datatype of the column
    SET @SQL = 'ALTER TABLE @TableName ALTER COLUMN ReferenceID VARCHAR(8)' + (SELECT CASE WHEN C.Is_Nullable = 'NO' THEN ' NOT NULL' ELSE '' END
        FROM INFORMATION_SCHEMA.COLUMNS C
        WHERE C.TABLE_NAME = @TableName AND C.COLUMN_NAME = 'ReferenceID')
    SET @SQL = REPLACE(@SQL, '@TableName', @TableName)

    PRINT(@SQL)
    EXEC(@SQL)

--Recreate the constraint
    --Some tables don't have a PK defined, only do the next bit if they do
    IF (SELECT COUNT(*) FROM #PKBackup PK WHERE PK.TableName = @TableName) > 0
    BEGIN
    --First set up @SQL template
    SELECT @SQL =   'ALTER TABLE [' + SCHEMA_NAME(PK.schema_id) + '].[' + PK.TableName
                    + '] ADD CONSTRAINT [' + PK.IndexName
                    + '] PRIMARY KEY ' + Type_desc + ' ( @Columns ) WITH '
                    + '( PAD_INDEX = ' + CASE   WHEN CAST(INDEXPROPERTY(pk.[object_id], PK.IndexName, N'IsPadIndex') AS BIT) = 0 THEN 'OFF'
                                                ELSE 'ON'
                                            END + ', '
                    + 'STATISTICS_NORECOMPUTE = ' + CASE    WHEN pk.no_recompute = 0 THEN 'OFF'
                                                            ELSE 'ON'
                                                        END
                    + ', SORT_IN_TEMPDB = OFF, '
                    + 'IGNORE_DUP_KEY = ' + CASE    WHEN pk.[ignore_dup_key] = 0 THEN 'OFF'
                                                    ELSE 'ON'
                                                END + ', '
                    + 'ONLINE = OFF, '
                    + 'ALLOW_ROW_LOCKS = ' + CASE   WHEN pk.allow_row_locks = 0 THEN 'OFF'
                                                    ELSE 'ON'
                                                END + ', '
                    + 'ALLOW_PAGE_LOCKS = ' + CASE  WHEN pk.allow_page_locks = 0 THEN 'OFF'
                                                    ELSE 'ON'
                                                END + ', '
                    + 'FILLFACTOR = ' + CASE    WHEN pk.[fill_factor] = 0 THEN '100'
                                                ELSE CONVERT(NVARCHAR, pk.[fill_factor])
                                            END + ' '
                    + ') ON [' + CASE   WHEN 'FG' = pk.[type] THEN pk.DataSpaceName
                                        ELSE N''
                                    END + ']'
    FROM
    #PKBackup PK WHERE PK.TableName = @TableName

    SET @SQL = REPLACE(@SQL, '@TableName', @TableName)
    SET @SQL = REPLACE(@SQL, '@ConstraintName', @ConstraintName)

    --Second, build up @Columns
    SET @Columns = ' '
    DECLARE ColumnCursor CURSOR LOCAL READ_ONLY FOR
        SELECT pk.[column], PK.is_desc
            FROM #PKBackup PK 
            WHERE PK.TableName = @TableName
            ORDER BY PK.key_ordinal ASC

    OPEN ColumnCursor
        FETCH NEXT FROM ColumnCursor 
        INTO @tColumn, @IsDescending

    WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @Columns = @Columns + @tColumn + CASE WHEN @IsDescending = 1 THEN ' DESC, ' ELSE ' ASC, ' END

        --Get the next TableName
        FETCH NEXT FROM ColumnCursor 
        INTO @tColumn, @IsDescending
    END

    --Tidy up
    CLOSE ColumnCursor
    DEALLOCATE ColumnCursor

    --Delete the last comma
    SET @Columns = LEFT(@Columns, LEN(@Columns) - 1)
    END
--Recreate the constraint
    SET @SQL = REPLACE(@SQL, '@Columns', @Columns)
    PRINT @SQL
    EXEC (@SQL)

    PRINT('--Done
    ')

    SET @SQL = ''

--Get the next TableName
    FETCH NEXT FROM TableCursor 
    INTO @TableName
END

--Tidy up
CLOSE TableCursor
DEALLOCATE TableCursor

DROP TABLE #PKBackup

/* Handle exceptional tables here
 * Replace indexes and foreign keys that were removed at the start
 */

SET NOCOUNT OFF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:43:40.533

您需要将`ALTER`语句作为动态 SQL 执行：将语句构建为 SQL 字符串并将其传递给`sp_executesql`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T04:11:28.353

从我 30 多年的数据库经验来看，一个不变的问题是，随着数据需求的变化，您正在使用的任何数据库的结构都需要不断变化。此外，在很多情况下，自动递增主键并不是最合适的，特别是当使用数据库的程序是不再可用。数据库管理的一大缺陷是当程序死亡时数据库通常是不可穿透的——这与长期数据管理的原则完全背道而驰。

因此，无法轻松更改主键字段的大小不是因为数据库设计不佳，而是因为处理数据库的 DBMS 和 SQL 工具严重不足，显然是程序员从理论上而不是实际理解的情况下设计的现实世界的。此类编程缺陷的其他示例是从 0 而不是 1 开始的数组索引（由于必须加或减 1 才能从索引切换到计数而产生的错误数量很多），数字变量无法本地处理空值等. 我期待有一天，数据库结构的修改被视为主流的必要性，而不是源于所谓的糟糕的数据库设计。*

# java - 如何在应用程序中始终保持框架在顶部，但在使用 Java 中的其他应用程序时将其置于后台？

> ID：11118569
> 
> 赞同：9
> 
> 时间：2012-06-20T11:30:34.527
> 
> 标签：java, swing, jframe, hide, always-on-top

我的 Java 应用程序有多个框架。其中一些被设置为始终处于领先地位。但是，当用户打开另一个程序（比如说一个网络浏览器）时，我希望永远在顶部的框架移动到后台，让其他应用程序完全显示在屏幕上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:00:30.283

**创建您自己的窗口管理器。**

创建一个实现`WindowListener`、`WindowStateListener`和的自定义窗口管理器`WindowFocusListener`。使用此管理器注册所有新框架，并在用户与框架交互时使用它将始终在顶部的框架带回前面。

听起来您的应用程序正在使用一些非常自定义的帧管理代码。我的猜测是，随着您继续开发应用程序，此窗口管理器将具有更多功能来管理用户界面。这不仅会为您提供解决问题的设计，还会为对此行为的任何更改或增强奠定基础。

但请记住，Java 无法控制操作系统对其他应用程序的操作。它甚至不能可靠地将框架置于所有操作系统中其他应用程序之上的前台。您将需要使用您将支持的操作系统来编写此窗口管理器，从而为您提供所需的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:07:05.890

> 我的 Java 应用程序有多个框架。其中一些被设置为始终处于领先地位。

不要那样做，使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)代替，如果你真的需要 end_user 操作然后使用

*   [选项窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

*   模态[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)（或`ModalityType`使用`AplicationModal`）

*   re_use [JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html) (getContentPane.removeAll()) 以供下次使用

> 但是，当用户打开另一个程序（比如说一个网络浏览器）时，我希望永远在顶部的框架移动到后台，让其他应用程序完全显示在屏幕上。

这对最终用户来说可能很烦人，请改用[FullScreen](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)

注意最重要的休息是在评论中`@Andrew Thompson`

# c# - 从隔离存储中保存和检索图像时出错

> ID：11118570
> 
> 赞同：0
> 
> 时间：2012-06-20T11:30:35.293
> 
> 标签：c#, visual-studio-2010, windows-phone-7, url, isolatedstorage

我正在尝试从 URL 获取图像并将其保存到隔离存储中，而不是从隔离存储中获取它并在我的 WP-7 应用程序中显示它。

这是相关的代码：

```
public void GetImages()
{
    string uri = "http://sherutnetphpapi.cloudapp.net/mini_logos/" + path;
    WebClient m_webClient = new WebClient();
    imageUri = new Uri(uri);

    m_webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_ImageOpenReadCompleted);
    m_webClient.OpenReadAsync(imageUri);
}

void webClient_ImageOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{

    Stream stream = e.Result;
    using (IsolatedStorageFile myIsf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        IsolatedStorageFileStream fileStream = myIsf.CreateFile(path);
        StreamResourceInfo sri = null;
        sri = Application.GetResourceStream(imageUri);

        BitmapImage bitmap = new BitmapImage();
        bitmap.SetSource(sri.Stream);
        WriteableBitmap wb = new WriteableBitmap(bitmap);

        // Encode WriteableBitmap object to a JPEG stream.

        System.Windows.Media.Imaging.Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
        fileStream.Close();
    }
} 
```

问题出在这一行：`sri = Application.GetResourceStream(imageUri);` 我在此方法上遇到异常`GetResourceStream()` **预期的相对 Uri，发现是绝对的。**

我不明白用什么方法代替`imageUri`.

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:39:52.233

我想这可能是你需要的。

```
public void GetImages()   
{   
    string uri = "http://sherutnetphpapi.cloudapp.net/mini_logos/" + path;      
    WebClient m_webClient = new WebClient();   
    imageUri = new Uri(uri);   
    m_webClient.OpenReadAsync(imageUri);  
    m_webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_ImageOpenReadCompleted);   
    m_webClient.AllowReadStreamBuffering = true;  

} 

void webClient_ImageOpenReadCompleted(object sender, OpenReadCompletedEventArgs e) 
{        
    var isolatedfile = IsolatedStorageFile.GetUserStoreForApplication(); 
    using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream(path, System.IO.FileMode.Create, isolatedfile)) 
    { 
        byte[] buffer = new byte[e.Result.Length]; 
        while (e.Result.Read(buffer, 0, buffer.Length) > 0) 
        { 
            stream.Write(buffer, 0, buffer.Length); 
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:47:51.457

这`path`包含什么，因为如果它包含相对 url，`/`则从路径中删除。因为你已经`/`在 uri 结尾了。

# maven - maven 依赖项应该从本地存储库中选择 jar

> ID：11118571
> 
> 赞同：1
> 
> 时间：2012-06-20T11:30:35.143
> 
> 标签：maven

我的 MAVEN 版本需要从本地存储库中选择一个 jar。这个 jar（在上下文中）也可以在我的中央存储库中找到。

有人可以建议在 pom.xml 中必须做什么吗？感谢快速帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:57:49.387

希望您有充分的理由这样做，因为这不是正常情况。

您可以使用不同的`groupId`和/或`artifactId`区分您的罐子和罐子`central`。或者，您可以安装`local jar`a`classifier`以将其与`central`jar 区分开来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:41:44.983

将您依赖的版本重命名为不同于中央存储库中的版本。将该版本放在您的本地存储库中。

# php - 本地 XML 文件还是外部 MySQL 数据库？

> ID：11118579
> 
> 赞同：1
> 
> 时间：2012-06-20T11:30:58.807
> 
> 标签：php, mysql, xml, database, xslt

我正在开发一个客户的 PHP 网站，该网站由构建该网站的原始公司托管。网站上有一个部分，用户单击列表中的国家/地区名称，参数发布在 URL 中，使用这些参数查询数据库，该国家/地区的假期套餐显示在页面上。所有标准的东西。

现在，由于托管该网站的公司不会让我直接访问数据库（可以理解，我可以是任何人），但想向我的客户收取相当高的费用来添加几个更新，我正试图来提供替代解决方案。这些是：

1) 在我自己的虚拟主机上创建一个 MySql 数据库并从外部访问它 2) 创建一个 XML 文件并改为使用 PHP 和 XSLT 进行查询。

澄清一下，我会自己手动更新数据，我的客户永远不会超过 30 包，所以它是相当可持续的。

所以我的问题是我应该选择哪个？我担心远程访问 MySQL 数据库的速度和安全性（我什至不确定我可以用我的网络主机做到这一点），但是本地 XML 文件会不安全吗？

提前致谢！

宝石

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:35:47.000

托管公司应授予客户访问权限 - 他们拥有访问和修改其数据的所有权利。Normaly 主机通过 phpMyAdmin 访问数据库。

否则，如果您将 XML 文件放入不公开可用的文件夹中，那么您的脚本可以访问它并且它不应该有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:41:39.913

我同意 Riho 关于主持人的看法。

否则，我还建议使用 XML 文件，因为一旦加载，它就会被文件系统缓存，并且访问几乎不会使用任何资源。另一方面，PHP 每次运行脚本时打开一个远程数据库连接（我不建议在本地服务器上使用 mysql_pconnect，更不用说在远程连接上）只是从数据库中读取 30 行会产生更多的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:42:25.887

我将 XML+XSLT 用于小型站点（有些不是那么小），它适用于高达 2MB 的文件，根据我的经验，10Mb xml 文件有时会延迟并且无法加载（超时）。

大多数小型网站需要大约 100kb 到 300kb 的文件。

当然，这些值可能会随着服务器的力量而有所不同，我使用的是 2Gb 3.0Ghz 双核，有 30 个站点，不是所有站点都很小，有些使用带有 50000 和 100000 条记录的表的 SQL。

2Gb xml 数据在每月 50000 次访问中表现良好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:36:16.623

如果您采取预防措施，这两种方法都可能是安全的。

您需要任何其他数据，还是只需要国家代码？我会说，如果它只有 30 个国家代码，并且它们没有太大变化，那么 XML 就可以了，但是如果有更多数据，请使用 SQL（这意味着您也可以让其他人更改它）。显然检查你是否可以拥有一个数据库，好像你不能它是一个有争议的问题！

# qt - 在 QT 中编写二进制文件并在 matlab 中读取

> ID：11118580
> 
> 赞同：0
> 
> 时间：2012-06-20T11:30:59.777
> 
> 标签：qt, matlab, file-io, binary, binaryfiles

尝试做最简单的事情。在 QT 中以二进制模式（无符号 16）写入一个数字并在 matlab 中读取文件。我使用追加模式，因为我将来会在文件中添加数字但似乎无法做到这一点。

这是QT代码：

```
QFile f("C:\\temp.dat");
f.open(QIODevice::WriteOnly | QIODevice::Append)
QDataStream out(&f);
out<<quint16(270);
f.close(); 
```

这是 Matlab 代码：

```
fid = fopen('C:\\temp.dat');
F_nums = fread(fid,1,'*uint16');
fclose(fid); 
```

看起来很简单，但它读错了数字......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:49:13.947

问题非常简单：您正在编写大端数据（首先是 MSB），但默认情况下，Matlab 需要小端数据。修复很简单：

```
QFile f("C:\\temp.dat");
f.open(QIODevice::WriteOnly | QIODevice::Append)
QDataStream out(&f);
out.setByteOrder(QDataStream::LittleEndian); // *** set little endian byte order
out<<quint16(270);
f.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:24:28.253

`QDataStream`并不是真的要创建可跨不同应用程序移植的流。（它意味着可以跨不同的操作系统和 Qt 版本移植，但总是被 Qt 使用。）格式不能保证是稳定的，所以它今天可以工作，但明天就会坏掉。从文档：

> QDataStream 的二进制格式自 Qt 1.0 以来一直在发展，并且可能会继续发展以反映 Qt 中所做的更改。在输入或输出复杂类型时，确保读取和写入使用相同版本的流（version()）非常重要。

如果要共享数据，请使用用于共享的输出格式，例如 XML、Json，或者在这种简单的情况下，只需将数字作为 ANSI 字符串写入文本文件即可。只需替换`QTextStream`.`QDataStream`

# android - 按字母顺序对按钮进行排序

> ID：11118581
> 
> 赞同：0
> 
> 时间：2012-06-20T11:31:00.747
> 
> 标签：android, sorting, button

我在 LinearLayout 中垂直创建了 5 个按钮。他们的名字来自 3 种不同语言的字符串资源。因此，按钮并不总是按正确的字母顺序排列。所以这是我的问题。我该怎么做才能使按钮在所有 3 种语言中按字母顺序排序？

```
Language 1:
String 1 = a,
String 2 = b,
String 3 = d,
String 4 = e,
String 5 = c,

Language 2: 
String 1 = c,
String 2 = e,
String 3 = a,
String 4 = b,
String 5 = d,

Language 3: 
String 1 = d,
String 2 = c,
String 3 = a,
String 4 = b,
String 5 = e, 
```

这是我的代码：

```
 Button btn1 = new Button(this); 
    btn1.setText(R.string.String1); 
    layout.addView(btn1);

    Button btn2 = new Button(this); 
    btn2.setText(R.string.String2); 
    layout.addView(btn2);

    Button btn3 = new Button(this); 
    btn3.setText(R.string.String3); 
    layout.addView(btn3);

    Button btn4 = new Button(this); 
    btn4.setText(R.string.String4); 
    layout.addView(btn4);

    Button btn5 = new Button(this); 
    btn5.setText(R.string.String5); 
    layout.addView(btn5); 
```

真诚的约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:36:46.187

您可以将按钮放在 TreeMap （这是一个排序的地图）中：

```
Map<String, Button> map = new TreeMap<String, Button>();

Button btn1 = new Button(this); 
btn1.setText(R.string.String1); 
map.put(R.string.String1, btn1);

Button btn2 = new Button(this); 
btn2.setText(R.string.String2); 
map.put(R.string.String2, btn2);

Button btn3 = new Button(this); 
btn3.setText(R.string.String3); 
map.put(R.string.String3, btn3);

Button btn4 = new Button(this); 
btn4.setText(R.string.String4); 
map.put(R.string.String4, btn4);

Button btn5 = new Button(this); 
btn5.setText(R.string.String5); 
map.put(R.string.String5, btn5);

for (Button b : map.values()) {
    layout.addView(b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T00:47:17.813

```
ArrayList<String> strings = new ArrayList<String>();
strings.add(getString(R.string.String1));
strings.add(getString(R.string.String2));
strings.add(getString(R.string.String3));
strings.add(getString(R.string.String4));
strings.add(getString(R.string.String5));

for (String str : Collections.sort(strings)) {
    Button b = new Button(this);
    b.setText(str);
    layout.addView(b);
} 
```

`TreeMap`是一个不错的选择，但对我来说似乎太过分了，除非您出于某种原因需要在代码中以特定顺序专门跟踪每个按钮/字符串组合。

# mysql - 如何使用 Mysql 更新除特定列中的所有条目之外的所有条目

> ID：11118591
> 
> 赞同：3
> 
> 时间：2012-06-20T11:31:33.220
> 
> 标签：mysql

我有一张桌子，这张桌子包含多列。我想知道如何更新除特定列中的条目之外的所有条目。我不想使用多个更新查询。

如果您对此有任何想法，请与我分享。非常感谢您的帮助。

**表结构**

![在此处输入图像描述](../Images/9b02fa024eed29db3901c4401afca0d8.png)

**查询**（我自己尝试过，但我对此也很困惑）

```
UPDATE `table` SET STATUS = 0;
UPDATE `table` SET STATUS = 1 WHERE id = 4; 
```

**我的问题是**如何将这些查询组合在一个查询中

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T11:36:13.923

要更新除一个以外的所有行：

```
UPDATE `table` SET STATUS = 0 WHERE id <> 4; 
```

如果您需要明确设置 where 行的状态`id = 1`，我建议您在第二个单独的查询中进行。

如果您*真的*想在一个查询中执行此操作：

```
UPDATE `table` SET STATUS = IF(id = 4, 1, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:36:01.960

你可以这样做：

```
UPDATE table SET STATUS = (id = 4); 
```

请注意，您可以使用任何布尔条件：

```
UPDATE table SET STATUS = (id IN (4, 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:11:42.443

```
UPDATE table 
LEFT JOIN (SELECT 4 AS 'id', 1 AS 'status') AS tmp USING(id)
SET table.status = COALESCE(tmp.status, 0) 
```

# java - Eclipse 插件的国际化

> ID：11118592
> 
> 赞同：0
> 
> 时间：2012-06-20T11:31:33.490
> 
> 标签：java, eclipse, plugins, internationalization, rcp

我对国际化（I18n）有疑问。

我几乎遵循了我能找到的所有教程，我创建了一个 message.java 文件、message_en.properties 和 message_de.properties，但问题是我不知道在我的主类中写什么来调用 budles。

我的意思是当我点击一个按钮时，我的插件语言应该从英语变为德语。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:33:04.487

您不能有一个立即更改语言的按钮，插件需要重新启动才能重新加载捆绑包。

以编程方式更改语言环境并不容易。最简单的方法似乎是更改`yourproduct.ini`文件（或`config.ini`在您的插件中）以更改语言。例如 ：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.1.R36x_v20100810
-nl
it
-vmargs
-Xmx1024m
-Xms412M 
```

重要的配置是`-nl it`（这里是意大利语）。当然，之后您需要重新启动 Eclipse/您的产品。

这是我所知道的关于 RCP 应用程序中 i18n 的最完整教程：[http ://www.vogella.com/articles/EclipseInternationalization/article.html#i18n_osgi](http://www.vogella.com/articles/EclipseInternationalization/article.html#i18n_osgi)

# php - PHP OOP 中的属性与属性数组

> ID：11118596
> 
> 赞同：2
> 
> 时间：2012-06-20T11:31:49.417
> 
> 标签：php, model-view-controller, oop, class

我想知道哪种方式更好。在控制器类中使用私有属性，或仅使用一个私有属性作为属性数组。

代替：

```
class User{

    private $id;
    private $firstName;
    private $surname;
    private $age;
    private $gender;
    private $city;
    ...
    ...
}

class User{

    private $data;
} 
```

然后能够做这样的事情：

```
function __construct(){
     //this would contain id, firstName, username, age, gender...
    $data = $model->getData();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:23:26.397

使用数组在类上编写代码时，您将失去任何**自动完成工具。**您将失去检测属性**语法错误的能力。**事实上，你会让你的代码更混乱，更少描述性。

对于将与多个开发人员共享的东西，或者在您编写它几个月或几年后与您自己共享的东西，使用对象通常是一件好事，可以提供更好的可维护性。在我看来，您应该保留属性。一个更令人困惑的代码可能会被“优化”，或者更短的阅读，但如果你想要，只需编写汇编代码。如果您想制作目标代码，请以**干净**的方式进行，您总会发现它可以挽救您未来的生活。

您的问题是，您可能认为在对象属性和模型层列之间保持干净的映射真的很痛苦。但无论您尝试什么，这是您在所有应用程序中始终必须编写的最少代码，如果未在此处完成，您在使用对象时仍需了解这些属性。很有可能这是一种[失败模式](http://thedailywtf.com/Articles/Patterns-of-Failure.aspx)：

> 我们大多数开发人员都信奉“不要重复自己/重复是邪恶的”原则，并且我们尽可能将其应用于我们创建的软件。但是我们可以犯的最致命的陷阱之一就是挥舞抽象的魔杖太快太宽泛，我们经常忘记不必要的重复的后果远小于不必要的合并的后果。

通过您的 DataModel 加载示例，我可以看到例如两个潜在的未来问题：

*   让我们想象一下，将来您将拥有一个二进制属性，并且该属性需要**延迟加载**，无论您做什么，您肯定会以围绕 __construct 的肮脏解决方案结束。
*   您现在正在构建您的类对象的一些实例，您需要为这些对象的数据提供一些不是来自模型的数据（可能是一种缓存），并且您有数千个这些对象。但是每次你构造这样的对象时，所有的属性都是从模型中填充的。

事实上，如果你想做一些基于对象相关模型来填充对象属性的东西，你真的应该认为它是一个更通用的东西，可能意味着其他对象、接口、工厂、几种方法。至少不在构造中。

对数组使用数组，对属性使用属性，让 PHP 引擎优化属性管理，我相信代码优化器使用属性会比使用字符串索引的数组做出更好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:47:36.307

如果您有许多属性，请使用数组。这样你就可以使用魔法方法的力量，比如：

```
public function __set($name, $value)
    {
        echo "Setting '$name' to '$value'\n";
        $this->data[$name] = $value;
    } 
```

参考：[http ://www.php.net/manual/en/language.oop5.overloading.php#object.set](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:44:28.120

取决于您真正需要对它们做什么，但通常数组可以更轻松地进行操作。

PS：它们被称为属性，而不是属性。

# java - 使用带有通用方法签名的 Mockito (java, eclipse) v1.9

> ID：11118598
> 
> 赞同：0
> 
> 时间：2012-06-20T11:31:56.747
> 
> 标签：java, generics, mocking, mockito

我已经在 stackoverlow 上找不到答案了。这是我可以归结为最简单的例子。

我有一个要模拟的类，它会调用这个类

`public class GetCustomerForUser extends PropertyAction<Customer> ....`

财产行动：

`public abstract class PropertyAction<R> extends AbstractProcessAction<R> implements ValuedAction<R, R> {`

真正的调用代码是这样的

`Customer self = dispatcher.invokeTransactionless(actor, new GetCustomerForUser());` **调度程序是 ActionDispatcher 类型**

在调用模拟

```
 protected void applyWhenClauses(ActionDispatcher dispatcher, Actor actor) throws ProcessException {
        when(dispatcher.invokeTransactionless(actor, (ProcessAction<Customer>) anyObject())).thenReturn(null);
        .... 
```

**调度程序的类型为 ActionDispatcherMock**

当我运行测试时，我得到

```
 org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
     Invalid use of argument matchers!
     2 matchers expected, 1 recorded.
     This exception may occur if matchers are combined with raw values:
         //incorrect:
         someMethod(anyObject(), "raw String");
     When using matchers, all arguments have to be provided by matchers.
     For example:
         //correct:
         someMethod(anyObject(), eq("String by matcher"));

     For more info see javadoc for Matchers class.

     at com.prolog.test.mock.ActionDispatcherMock2.applyWhenClauses  
           (ActionDispatcherMock2.java:18)
        at com.prolog.test.mock.ActionDispatcherMock.createMockInstance
           (ActionDispatcherMock.java:84)
at com.prolog.test.mock.ActionDispatcherMock.createMockInstance
           (ActionDispatcherMock.java:1)
at com.prolog.test.mockFactory.AbstractPrologInstanceMock.createInstanceMock
           (AbstractPrologInstanceMock.java:11) 
```

我打算为调度程序可以调用的每个类设置一个 when 。

有人对我在这里做错了什么有智慧的话吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:42:35.373

错误消息指出了问题所在：如果您正在使用任何...`any`您就不能有一个不`any`匹配器：

> ```
>  This exception may occur if matchers are combined with raw values:
>      //incorrect:
>      someMethod(anyObject(), "raw String");
>  When using matchers, all arguments have to be provided by matchers.
>  For example:
>      //correct:
>      someMethod(anyObject(), eq("String by matcher")); 
> ```

看看你是如何做它说你不能做的？以及如何纠正它？

# php - 如何使用“php -f filename.php email@nowhere.com”测试从 Android 应用程序传递电子邮件的 php 脚本

> ID：11118601
> 
> 赞同：-2
> 
> 时间：2012-06-20T11:32:04.837
> 
> 标签：php, android, testing, json

如何检查 php 脚本是否有效？我正在使用`php -f filename.php email@address.com`，但出现错误。php 脚本旨在与 Android 应用程序一起使用，以检索电子邮件与发布的电子邮件地址匹配的数据。这是php代码：

```
<?php
$con = mysql_connect("localhost","username","password");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("db_name", $con);
$email= mysql_real_escape_string($_POST['email']);
$result=mysql_query("SELECT * FROM `TableName` WHERE email='$email' ");

if($result){ 
  $num_rows = mysql_num_rows($result);
  print(json_encode($num_rows));
}

  mysql_close($con);
?> 
```

还是我无法从命令行测试此脚本，而应该使用 html 文件？

现在，例如，如果我替换行：`$email= "myaddress@nd.edu";`然后键入`php -f getdbstats.php`我得到正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:54:04.103

命令行*php*有点不同。它不使用 POST 或 GET 全局数组来存储命令行参数。您必须使用名为 $argv 的全局变量，该变量由命令行中的参数填充。因此，在您的代码中，电子邮件地址存储在数组的 $argv[1] 元素中。$argv[0] 是脚本的名称。在这里阅读更多：http: [//php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:50:47.567

它在编辑后工作，因为脚本不再需要 POST。为什么将它作为命令行脚本运行很重要......打败了我。如果您只想测试脚本是否有效，您可以编写一个带有一个文本字段和一个提交按钮的简单表单，以查看输入是否正确接收。

如果由于某种原因您仍打算在命令行上运行它，[请查看此 SO 帖子](https://stackoverflow.com/questions/5655284/how-to-pass-parameters-from-command-line-to-post-in-php-script)

# javascript - 使用 ajax 动态加载的 div 内容具有指向不同文件的更多链接。如何在同一个div中加载这些链接的内容

> ID：11118610
> 
> 赞同：0
> 
> 时间：2012-06-20T11:32:23.973
> 
> 标签：javascript, ajax, html, dynamic, loading

问题陈述：我有一个带有标题、左面板和内容 div 的页面 (main.jsp)。当我单击左侧面板中的任何链接时，我使用 javascript ajax 调用来加载 div 中的内容。到目前为止，一切都很好。现在这个新加载的内容实际上是输入表单的三个页面之一。所以这个 form1 有一个提交按钮，它将数据发布到一个 servlet，该 servlet 又将一个 jsp 作为视图转发。这种观点不过是三中之二。

现在我希望这个 form2 也加载到同一个 div 中。截至目前，当我单击下一步时，form2 会打开一个新页面，而不是在父页面的 div 中打开。

我不想使用框架。我如何实现这一目标？有没有办法从 form1、2、3 等调用 main.jsp 中的 ajax 函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:33:29.910

您可以使用jquery加载功能

```
$("#your_content_div_id").load("external_file.jsp"); 
```

# php - 使用 Sencha Touch 2 Ajax 请求从 PHP 代码中获取字符串结果

> ID：11118611
> 
> 赞同：1
> 
> 时间：2012-06-20T11:32:28.090
> 
> 标签：php, javascript, sencha-touch

我正在编写一个移动应用程序，并希望通过 Sencha touch 2 使用 PHP 和 Ajax 获取用户的 IP 地址。

目前 Ajax 请求返回成功，但 responseText 是 php 文件中的所有代码。

这是我在一个名为 action.php 的文件中的 php 代码：

```
<?php
function getIPAddress()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))  
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

?> 
```

这是我的ajax请求：

```
Ext.Ajax.request({
        url : 'action.php?',
        success : function(response, options) {
            console.log('success ' + response.responseText);
        },
        failure : function(response, options) {
            console.log('failure ' + response);
        }
    }); 
```

控制台打印出“成功”以及 php 文件中的确切文本。如何从 php 文件中获取 IP 地址？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:19:47.617

您需要调用该函数并回显结果，以便在 AJAX 请求中返回它。

```
<?php
function getIPAddress()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))  
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}
echo getIPAddress();
?> 
```

# php - 动态列表 - 自动添加号码

> ID：11118616
> 
> 赞同：0
> 
> 时间：2012-06-20T11:32:58.257
> 
> 标签：php

我有一个数据库，我在其中手动添加数据。一些领域是：

```
ID AA Name Percentage(will be changing once a week)

1   2\.  Me     10%

2   1\.  You    40% 
```

当我用我的动态列表调用数据库时，我会得到所有按百分比排序的名称。为了得到这个结果，我需要它的 AA 列：

```
1\. You  40%
2\. Me   10% 
```

很容易手动使用 AA 列（因为我的条目不超过 10-15）并将其与百分比匹配，因此我得到了我需要的正确显示。

但是，如果我的条目变为例如 30，则很难始终更改 AA 列以与百分比一匹配。

那么我可以对我的 dynamic_list.php 做任何修改，以便我得到 1\. 2\. 自动生成吗？这是我的dynamic_list.php：

```
$sql = mysql_query("SELECT * FROM clients WHERE Category='Deksioseis' ORDER BY percentage DESC");
$productCount = mysql_num_rows($sql);
// count the output amount
if ($productCount > 0) {
        $i=0;
            $dynamicListDeks = '<table id="pl_list" class="list">';
            while($row = mysql_fetch_array($sql)){
                $id = $row["ID"];
                $aa = $row["AA"];
                $client_name = $row["Client_Name"];
                $short_name = $row["Short_Name"];
                $details = $row["Details"];
                $percent = $row["Percentage"];
        $dynamicListDeks .= ($i==0) ? '<tr>':'';
        $dynamicListDeks .= '<td class="lst_aa">
                        ' . $aa . '
                     </td>
                                     <td class="lst_l">
                        <img src="../rooms/' . $short_name  . '.png" alt="' . $client_name . '" />
                     </td>
                     <td class="lst_nam">
                        <a id="' . $short_name . '" name="' . $short_name . '" class="room">' . $client_name . '</a>
                                     </td>
                     <td class="lst_det">
                    ' . $details . '
                     </td>
                         <td class="lst_per">
                    ' . $percent . '%
                    <br />
                     </td>';
        $dynamicListDeks .= ($i==1) ? '</tr>':'';
        $i++;
        ($i==2) ? $i=0:'';
        }
        $dynamicListDeks .='</table>';
        } else {
            $dynamicListDeks = "";
            }
        mysql_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:51:51.637

在 PHP 代码中保留一个计数器，每次循环运行都会递增：

```
$aa = 0;
while($row = mysql_fetch_array($sql)){
  $id = $row["ID"];
  $aa++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:50:42.807

您可以添加变量，而不是将 AA 保存在数据库中，该变量将保留 AA 的值，您可以稍后显示。

```
 $sql = mysql_query("SELECT * FROM clients WHERE Category='Deksioseis' ORDER BY percentage DESC");
        $productCount = mysql_num_rows($sql);
        // count the output amount
        if ($productCount > 0) {
        $i=0;
        $aa=0;

        $dynamicListDeks = '<table id="pl_list" class="list">';
        while($row = mysql_fetch_array($sql)){
            $id = $row["ID"];
            $aa++;
            $client_name = $row["Client_Name"];
            $short_name = $row["Short_Name"];
            $details = $row["Details"];
            $percent = $row["Percentage"];
    $dynamicListDeks .= ($i==0) ? '<tr>':'';
    $dynamicListDeks .= '<td class="lst_aa">
                    ' . $aa . '
                 </td>
                                 <td class="lst_l">
                    <img src="../rooms/' . $short_name  . '.png" alt="' . $client_name . '" />
                 </td>
                 <td class="lst_nam">
                    <a id="' . $short_name . '" name="' . $short_name . '" class="room">' . $client_name . '</a>
                                 </td>
                 <td class="lst_det">
                ' . $details . '
                 </td>
                     <td class="lst_per">
                ' . $percent . '%
                <br />
                 </td>';
    $dynamicListDeks .= ($i==1) ? '</tr>':'';
    $i++;
    ($i==2) ? $i=0:'';
    }
    $dynamicListDeks .='</table>';
    } else {
        $dynamicListDeks = "";
        }
    mysql_close(); 
```

# grails - 命名查询错误 grails

> ID：11118623
> 
> 赞同：1
> 
> 时间：2012-06-20T11:33:22.517
> 
> 标签：grails, dynamic-queries

我有一个域类`DefectData`如下

```
class DefectData {
String taskId
String defectId
String defectSummary
String severity
String phaseDetected
String rejected
String loggedBy
String howFound
Date dateFound 
String defectType
String defectCause
ProgressData progressData
def DefectData(){}

static constraints = {
    id generator:"assigned",name:"defectId"

}
static belongsTo=[taskId:ProgressData]
static namedQueries={
    getDefectDataByYearMonth{int month,int year ->
    def plannedDate=Date.parse("mm-yy","${month} - ${year}")
    }
}
} 
```

我正在尝试这种查询，这将使我能够获得在“测试”阶段检测到的缺陷的计数。

```
 def testingDefects(int month,int year){
          countTestingDefects=DefectData.getDefectDataByYearMonth(month,year).findAllWhere(phaseDetected:"Testing").count()
    println countTestingDefects
} 
```

虽然，我收到此错误，但日期无法解析

```
testingDefects(03,2012) 
```

无法解析的日期“3-12”。我只想根据月份和年份列出记录。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:30:27.870

扔掉你的空间

```
def (month,year) = [2,2012]
Date.parse("mm-yy","${month}-${year}") 
```

为我工作

如果您需要更多控制和简化日期解析，请尝试  [Joda-Time](http://joda-time.sourceforge.net/)

# php - 将参数传递给php以获取特定信息

> ID：11118624
> 
> 赞同：1
> 
> 时间：2012-06-20T11:33:24.307
> 
> 标签：php, mysql

我有这个快速的问题。

我在这里有这段代码，它允许我提取用户名和照片，当点击名称时，它会将我带到这个 hostess.php 文件，好吧，我需要将 id 变量传递给 hostess.php 并保存它，以便仅获取该 ID 的信息..

这是代码：

```
while ($row = mysql_fetch_array($query)) { 
echo "<div id='photo'>"; 
echo "<div id='picture'>"; 
 echo "<td> <img src=foto/photo1/".$row['photo'] . "></td>";
 echo "</div>"; 
 echo "<div id='text'>"; 
 echo '<td><a href="hostess.php">'. $row['first_name_en']."&nbsp;". $row['family_name_en']."</a></td>";
echo "</div>"; 
echo "</div>"; 
} 
```

我怎样才能得到 id 然后我怎样才能将它保存到 $id 变量谢谢

表结构是这样的：表名叫做hostess，我需要从hostess那里检索的字段是[id]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:36:41.980

换行：

```
echo '<td><a href="hostess.php">'. $row['first_name_en'] . 
     "&nbsp;". $row['family_name_en']."</a></td>"; 
```

对此：

```
echo '<td><a href="hostess.php?id={$row[id]}">'. $row['first_name_en'] . 
     "&nbsp;". $row['family_name_en']."</a></td>"; 
```

在 中`hostess.php`，使用它来提取值：

```
$id = $_GET['id']; 
```

## 编辑

这是将变量传递为的另一种方法`POST`。同样，将上述行更改为：

```
echo '<td><form method="POST" action="hostess.php">' . "<input type='hidden' 
     name='id' value='{$row[id]}' />" . "<input type='submit' value='" . 
     $row['first_name_en'] . "&nbsp;" . $row['family_name_en'] . 
     " /></form></td>"; 
```

您也可以使用`CSS`将该按钮设置为简单文本的样式。并且可以`hostess.php`按如下方式检索该值：

```
$id = $_POST['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:40:25.653

在您的代码中添加/更改它：

```
$personID = $row['id']; #or whatever the field name is
echo '<td><a href="hostess.php?personID='.$personID.'">'. $row['first_name_en']."&nbsp;". $row['family_name_en']."</a></td>"; 
```

添加 "?personID='.$personID 将在 GET 语句或 URL 中发送值。

在接收页面上以这种方式获取值：

```
$personID = $_GET['personID']+0; #add zero to force a numeric value--be sure to scrub your data!
#be sure to do other validation if needed! 
```

# android - Android 中的加密服务提供商

> ID：11118632
> 
> 赞同：1
> 
> 时间：2012-06-20T11:33:40.400
> 
> 标签：android, x509certificate, rsacryptoserviceprovider

我需要在运行 android 4.0.3 的平板电脑上安装更多证书，并由不同的用户使用。每个用户都需要访问一个要求证书进行身份验证的网络。我想保护每个证书的私钥，例如在带有 CSP 或其他一些的 Windows 中，每个用户都需要输入 PIN 或密码才能访问正确证书的私钥。有可能做，如果是的话怎么做。谢谢皮尔卡洛

# sql-server-2008 - SignalR 数据库示例

> ID：11118634
> 
> 赞同：2
> 
> 时间：2012-06-20T11:33:49.930
> 
> 标签：sql-server-2008, signalr

我目前正试图了解 SignalR 。我已经完成了一些教程，观看了视频并阅读了小型 wiki。

为了我的目的，我试图让我的头脑得到一个 SQL 存储过程来向集线器上所有连接的客户端发送消息。如果没有连接客户端，显然不需要发送，但是例如他们拥有的聊天示例，我如何能够通过 SQL 向客户端发送消息？

试图以触发网页更新并停止的 SQL 触发器为基础。

欢迎任何教程或建议。

谢谢

# jquery - 使用 jquery validate 验证月/年

> ID：11118635
> 
> 赞同：2
> 
> 时间：2012-06-20T11:33:59.447
> 
> 标签：jquery, validation, jquery-validate

我正在尝试使用 jQuery 验证链接两个表单字段。用户最多只能输入 5 年，但这分布在两个输入中，月和年。

我已经制定了以下我认为应该如何组合在一起的方法：

```
$('#leform')validate({
debug: true,
rules: {
    years : {
        required : {
            depends: function(element) {
                  var x = ($('#years').val() == 5) && ($('#months').val() == 0),
                      y = ($('#years').val() < 5),
                      z = (x || y);
                       return z;

                },
        number : true,
        max : 5,
        min : 0

        },
        months : {
            required : true,
            number : true,
            min: 0,  
            max: 11 
        }
 }
}); 
```

用户可以输入，3 年 6 个月，没问题，但问题出在用户输入 5 年，4 个月时，我无法触发验证。有任何想法吗？

-------- 编辑/解决方案 ---------

对不起，我是一个相当新的用户（长期潜伏者）所以不得不编辑问题来发布答案

好的，事实证明我误解了规范，看起来“必需”是布尔值的真假。

我使用以下内容扩展了验证：

```
jQuery.validator.addMethod("yearCount", function(value, element) {
   var x = ($('#years').val() == 5) && ($('#months').val() == 0),
   y = ($('#years').val() < 5),
   z = (x || y);
   return z;
}, "blah blah blah"); 
```

并更新规则如下：

```
required : true,
max : 5,
min : 0,
yearCount : true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:48:20.563

*我认为您可以对两个*控件的`depends:`属性使用以下函数：

 *```
function (){
    return $('#years').val() * 12 + $('#months').val() * 1 <= 60;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:59:28.640

这可能会有所帮助：

```
$('#leform').validate({
  debug: true,
  rules: {
    years : {
      required : {
        depends: function(element) {
          return (($(element).val() == 5 && $('#months').val() == 0) || ($(element).val() < 5));
        },
        number : true,
        max : 5,
        min : 0

      },
      months : {
        required : true,
        number : true,
        min: 0,  
        max: 11 
      }
    }
  }
}); 
```*

# nsurl - 从 mainBundle pathForResource 创建 URL 找不到文件

> ID：11118637
> 
> 赞同：2
> 
> 时间：2012-06-20T11:34:00.237
> 
> 标签：nsurl, mainbundle

我正在尝试创建一个 NSURL，其中包含指向我项目中音频文件的链接。我已经复制了音频文件（.m4a 文件），我正在使用这一行来用其中之一填充 NSURL：

```
NSURL *fileToBePlayed = [[NSURL alloc] initWithString:[NSString stringWithString:[[NSBundle mainBundle] pathForResource:@"A3" ofType:@"m4a" inDirectory:@"Sounds"]]]; 
```

我在这条线上遇到了以下崩溃：

```
2012-06-20 12:32:05.307 TestPlayer[29184:10703] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSPlaceholderString initWithString:]: nil argument' 
```

我不确定这到底`nil argument`是怎么回事。该文件肯定在那里，在正确的位置，已被复制到项目中，等等。我看不出它找不到文件的任何原因。如果我将文件名更改为某个不存在的虚构文件，我会遇到同样的崩溃，所以大概它出于某种原因看不到该文件。有任何想法吗？

如果我将它分成单独的行，这里的前两行很好，第三行崩溃，即 NSURL 行：

```
NSString *testString = [[NSString alloc] init];
testString = [[NSBundle mainBundle] pathForResource:@"A3" ofType:@"m4a"];
NSURL *fileToBePlayed = [[NSURL alloc] initWithString:testString]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:14:52.153

事实证明，由于某种原因，这些文件尚未添加到目标中。谢谢你，Xcode。

# python - python中类向量计算的并行乘法

> ID：11118641
> 
> 赞同：5
> 
> 时间：2012-06-20T11:34:05.550
> 
> 标签：python, multithreading, vector

我有一大段代码，比如

```
for i in range(0, len(a))
    b[i] = func(a[i]) 
```

其中 a 和 b 是长度相同的数组，a 是给定的（并且很大），func 是一些具有很多局部变量但不使用任何全局变量的函数。

我想将 func 的计算分布在多个 CPU 上。大概我需要使用多处理模块，但我还没有找到任何相关的例子。你能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:53:37.807

[`multiprocessing`请参阅文档](http://docs.python.org/library/multiprocessing.html)中的第一个代码示例：

```
from multiprocessing import Pool

# you could define `func`, `a` here

if __name__=="__main__":
    p = Pool() # use all available CPU cores
    b = p.map(func, a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:55:28.093

使用进程池。您可以在我的 github 中查看完整示例：[https ://github.com/mariazverina/codejam/blob/master/src/main.py](https://github.com/mariazverina/codejam/blob/master/src/main.py)

```
from multiprocessing import Pool

p = Pool(4)  # set to number of cores
b = p.map(func, a) 
```

# java - 在java中将日期解析为特定格式

> ID：11118643
> 
> 赞同：0
> 
> 时间：2012-06-20T11:34:11.523
> 
> 标签：java, parsing, date

> **可能重复：**
> [用 Java 解析日期？](https://stackoverflow.com/questions/1725578/parsing-a-date-in-java)
> [Java 字符串到日期的转换](https://stackoverflow.com/questions/4216745/java-string-to-date-conversion)

我如何解析默认返回此格式的 Date 对象：

```
Nov 22, 1963 00:00:00 PM 
```

到这种格式：

```
Fri Nov 22 1963 00:00:00 GMT-0600 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:36:54.720

使用 SimpleDateFormat ( [http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html) ) 类解析原始字符串，然后使用 SimpleDateFormat 类的新格式对其进行格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:50:30.187

```
SimpleDateFormat sdfDestination = new SimpleDateFormat("E MMM-dd-yyyy hh:mm:ss");
sdfDestination .setTimeZone(TimeZone.getTimeZone("GMT-6").getID());
String strDate = sdfDestination.format(oldDateObject); //pass here your old date object 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:06:48.790

您提出问题的方式表明您混淆了许多事情。

首先，您不会“解析 Date 对象”。您可以将包含日期（作为文本）的字符串转换为`Date`对象。这就是所谓的**解析**。所以，你解析一个**字符串**，结果是一个`Date`对象——你不“解析一个 Date 对象”。

相反（将`Date`对象转换为字符串）称为**格式化**。

`Date`对象本身没有格式。就像数字只是一个数字（它没有固有的格式）一样，a`Date`只是一个日期。当您`toString()`（显式或隐式）调用`Date`对象时，日期将使用某种默认格式打印，例如`Nov 22, 1963 00:00:00 PM`. 但格式不是`Date`对象本身的属性。

要`Date`以特定格式显示 a，您可以使用`DateFormat`对象将日期格式化为可以打印的字符串。`DateFormat`您在对象中指定确切的格式。例如：

```
Date date = new Date();

DateFormat df = new SimpleDateFormat("EEE MMM dd yyyy HH:mm:ss Z");
String text = df.format(date);
System.out.println(text); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:44:42.093

首先，您需要有一个可以使用的[`Date`](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)对象，这是与此步骤相关的[答案。](https://stackoverflow.com/a/4216767/803285)`String`[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

其次，您必须以相应的文本格式取回它`Date`，再次`SimpleDateFormat`用作：

```
Format formatter = new new SimpleDateFormat("your format here");
String dateString = formatter.format(date); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T11:41:33.380

[FastDateFormat](http://commons.apache.org/lang/api/org/apache/commons/lang3/time/FastDateFormat.html)是（来自他们的 api），“SimpleDateFormat 的快速且线程安全的版本”。 [这](http://eyalsch.wordpress.com/2009/05/29/sdf/)是一篇解释它的文章

# c - 在 c 中获取进程 Cpu 使用情况

> ID：11118647
> 
> 赞同：2
> 
> 时间：2012-06-20T11:34:30.697
> 
> 标签：c, windows

如何在 c 中获取进程 Cpu 使用情况？

我需要 evrey 进程和线程的 Cpu 使用情况。

请给我一个例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:43:31.190

在纯 C 中，这是不可能的，但由于问题也被标记为“Windows”：

CPU 使用率是 CPU 时间除以实际时间。[GetThreadTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683237%28v=vs.85%29.aspx)和[GetProcessTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223%28v=vs.85%29.aspx)函数为您提供了这些信息（在性能计数器等其他功能中，Joachim Pileborg 上面提到过，但我认为这个可能更容易）。

您可能还想首先使用[CreateToolhelp32Snapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686832%28v=vs.85%29.aspx)来了解存在哪些进程和线程。您需要将线程/进程 ID 转换为句柄，但我想这不会是一个大障碍（即`OpenProcess`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T11:46:41.440

在 C 中，可以使用[性能计数器确定](http://en.literateprograms.org/CPU_usage_using_performance_counters_%28C,_Windows_2000%29)**总 CPU 使用率**（示例代码中有一个小错字：必须更改为）。`sleep``Sleep`

在 C++、C#、Delphi 等中，我建议使用[WMI](https://stackoverflow.com/questions/9777661/returning-cpu-usage-in-wmi-using-c-sharp)。

**== 编辑 ==**

我找到了一种获取**每个进程 CPU 使用率的方法**。例如，为了获取 Microsoft Outlook 的 CPU 负载，将上例中的计数器路径更改为：

```
PdhAddCounter(query, TEXT("\\Process(OUTLOOK)\\% Processor Time"), 0, &counter); 
```

如果您有多个运行相同可执行文件的实例，则可以使用[索引](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373193%28v=vs.85%29.aspx)。[这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372151%28v=vs.85%29.aspx)也非常有用。

# jquery - Jquery 哈希标签链接到 Tabs 问题

> ID：11118648
> 
> 赞同：0
> 
> 时间：2012-06-20T11:34:40.053
> 
> 标签：jquery, html

我的内容框位于页面中间。当我点击标签时，页面滚动到中间（标签内容框所在的位置）。

这是由于哈希标签链接。
如何在页面不滚动到中间的情况下打开选项卡？

```
<ul class="tabs">
    <li><a href="#movies" class="defaulttab" rel="movies">movies</a></li>
    <li><a href="#comments" rel="comments">Comments</a></li>
</ul>

<div class="contentbox">
    <div class="tab-content" id="movies">
        content 1
    </div>
    <div class="tab-content" id="comments">
        Tab #2 content
    </div> 
```

**jQuery**

```
$(document).ready(function() {
    $('.tabs a').click(function() {
        switch_tabs($(this));
    });
    switch_tabs($('.defaulttab'));
});

function switch_tabs(obj) {
    $('.tab-content').hide();
    $('.tabs a').removeClass("selected");
    var id = obj.attr("rel");
    $('#' + id).show();
    obj.addClass("selected");
}

$(function() {
    var hash = window.location.href.split('#').pop();
    var allowed = ['movies', 'comments'];
    if (allowed.indexOf(hash) == -1) hash = allowed[0];
    switch_tabs($('a[href=#' + hash + ']'));
}); 
```

[http://jsfiddle.net/d6bts/3/](http://jsfiddle.net/d6bts/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:37:12.750

[`ev.preventDefault`](http://api.jquery.com/event.preventDefault/)首先将`ev`参数添加到`click`函数中，然后按如下方式调用它来使用：

```
$('.tabs a').click(function (ev) {
    ev.preventDefault();

    var $this = $(this);
    $('.tabs a').removeClass("selected");
    $this.addClass('selected');
    switch_tabs($this.attr('href'));
    return false;
}); 
```

# drupal - 如何在 drupal 中渲染 youtube 视频

> ID：11118650
> 
> 赞同：1
> 
> 时间：2012-06-20T11:34:44.437
> 
> 标签：drupal, youtube, drupal-7

如何在 Drupal 中渲染 YouTube 源？包含信息的字段包含以下内容：

```
 [fid] => 59
                            [display] => 1
                            [description] => 
                            [uid] => 1
                            [filename] => Retarded running giraffe
                            [uri] => youtube://v/Cn59jVAHLTs
                            [filemime] => video/youtube
                            [filesize] => 0
                            [status] => 1
                            [timestamp] => 1340129371
                            [type] => video
                            [rdf_mapping] => Array 
```

有没有办法将此信息呈现给 YouTube 视频嵌入代码？像这样的东西：

```
drupal_render_youtube('youtube://v/Cn59jVAHLTs'); 
```

是否有任何解决方案可以解决这个问题而无需自己编写孔嵌入代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T11:45:39.850

这些将有助于...

[如何在 Drupal 7 的模板中渲染 Youtube 缩略图](https://stackoverflow.com/questions/8197184/how-to-render-a-youtube-thumbnail-in-a-template-in-drupal-7)

[http://drupal.org/project/mediaelement](http://drupal.org/project/mediaelement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:39:54.520

或者是这样的：

```
<?php print render($variables['content']['field_url']['#object']->content['field_video']);?> 
```

# java - 选择子句复杂的正则表达式模式

> ID：11118655
> 
> 赞同：0
> 
> 时间：2012-06-20T11:34:59.460
> 
> 标签：java, sql, regex

我正在为我的硕士论文开发一些应用程序，在此过程中我必须构建一个 SQL 解析器。为此，我决定加大正则表达式的力度，因为这似乎是当时最好的方式。

问题是我的正则表达式有一些小问题。

考虑一些查询示例，例如：

```
select 
    RIC 
from 
    (select 
         s.RIC, m.NAME 
     from 
         Stock s, Market m 
     where 
         s.LISTED_ON_EXCHANGE = m.RIC) t 
where 
    RIC > 'G';

select * 
from Stock 
order by COMPANY 
LIMIT 0,2;

select 1+2;

select now();

select 
    s.RIC, m.NAME 
from 
    Stock s 
INNER JOIN  
    Market ON m I s.LISTED_ON_EXCHANGE = m.RIC;

select * 
from Stock 
order by COMPANY;

select * 
from Stock 
where RIC in ('GS.N' , 'INFY.BO');

select * 
from Stock 
where RIC LIKE 'V%';

select * 
from Stock 
where RIC BETWEEN 'G' AND 'I';

select count(*) 
from STOCK 
where LISTED_ON_EXCHANGE IS NOT NULL;

select na_me as n, price as p 
from bla, blabla, blalalaa; 
```

并给出以下两个正则表达式：

```
SELECT_FIELDS_PATTERN = "(?<=[SELECT]) [\\d\\w',.*() ]+ (?=FROM)"; 
```

这应该匹配选择字段。

和：

```
SELECT_FROM_PATTERN = "(?<=[FROM]) [\\w, ]+ (?(?=(?:WHERE|INNER|ORDER)))"; 
```

这应该匹配 FROM 子句，不包括任何条件或排序等。

所有查询除了

```
select 1+2;
select now(); 
```

应该是有效的。那是因为我只想为我解析包含相关信息的选择查询。

问题是我创建的两个正则表达式不会验证例如最后一个查询：

```
select na_me as n, price as p from bla, blabla, blalalaa; 
```

所以我需要一些帮助来改进我对选择查询的正则表达式，甚至可能合并两个正则表达式？

第一个查询的正确输出示例：

```
select RIC from (select s.RIC, m.NAME from Stock s, Market m where s.LISTED_ON_EXCHANGE=m.RIC) t where RIC > 'G'; 
```

输出应该是：

> RIC

对于第一部分和

> （选择 s.RIC, m.NAME from Stock s, Market m where s.LISTED_ON_EXCHANGE=m.RIC） t

第二部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:43:26.977

*   字符类不是组——删除关键字周围的`[`& 。`]`
*   不要使用无用的环视，在某些情况下会导致问题。
*   您可能希望使用`\b`around 关键字，以便`SELECT`在`FOOSELECT`.
*   可以`(?i)`用来使表达式不区分大小写。

你可以使用类似的东西：

```
(?i)\bSELECT\b\s+(.+)\s+\bFROM\b\s+([\w\s,]+?)(?:\s+\b(?:WHERE|INNER|ORDER)\b|;?$) 
```

在第一和第二捕获组中捕获感兴趣的部分。

请注意，这不适用于字符串，在其他情况下，SQL 也是递归的，这很难用 Java 正则表达式解析。如果您想正确解析 SQL，我建议您使用正确的解析器。（您可以自己编写一个简单的方法，使用正则表达式进行词法分析生成令牌，使用 Java 解析令牌并构建解析树。）

# php - Django admin 喜欢 PHP 中的功能

> ID：11118656
> 
> 赞同：0
> 
> 时间：2012-06-20T11:35:07.933
> 
> 标签：php, cakephp, django-admin

我是一个经验丰富的 Django 用户，没有它的管理模块就活不下去。PHP中是否有任何等价物，最好但不限于使用CakePHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:41:07.747

Yii 框架

[http://www.yiiframework.com/](http://www.yiiframework.com/)

[这是一个导览，您可以了解它的 Gii 功能是如何工作的。](http://www.yiiframework.com/tour/)Gii 是一个生成文件的 Web 界面，无需命令行。

# objective-c - arc4random 使用来自 textField 的输入

> ID：11118657
> 
> 赞同：1
> 
> 时间：2012-06-20T11:35:12.080
> 
> 标签：objective-c, xcode

我正在尝试使用 arc4random，但它导致我的应用程序崩溃。在我看来，我有一个文本字段，用户将输入一个数字，当点击按钮时，这个数字用于范围，我使用的代码如下：

```
int myInt1 = [textfield.text intValue];
int fromNumber = 1;

int rnumber = (arc4random() % (myInt1 - fromNumber)) + fromNumber;
number1.text = [[NSString alloc] initWithFormat:@"%i",rnumber]; 
```

例如，如果我使用 50 而不是 myInt1 它将起作用，但我需要用户输入。任何帮助是极大的赞赏。

我注意到当文本字段中有一个图形时它会起作用，当它留空并且选择按钮然后应用程序崩溃时。在控制台中显示“响应 SpringBoard 的终止而终止”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:13:50.707

如果变量 50 有效，那么您的文本字段的文本显然有问题。您的文本字段很可能为零。尝试检查您的代码，看看是否有任何东西影响您的应用程序变为 nil。

我会告诉你这个，以防下次发生类似的事情。例如，您应该始终尝试调试您的代码，而不是用最少的代码直接将其发布到堆栈溢出，而是尝试自己找出问题！

例如，一种方法可以确定您的问题出了什么问题，我建议您现在尝试并将结果反馈给我，即检查文本字段是否非零，如下所示：

```
if (textfield) {

 NSLog (@"Text field is not nil! GOOD!");

 } 
```

如果在您的控制台中调用日志，您就知道您的问题是文本字段为 nil。

# quartz-scheduler - Quartz调度程序：JOB执行了不止一次

> ID：11118668
> 
> 赞同：3
> 
> 时间：2012-06-20T11:35:59.443
> 
> 标签：quartz-scheduler

我正在使用石英调度程序来安排我的工作。我用过 CronTrigger。但问题是触发器被再次触发一次。这是我设置 cron 调度程序的代码..

```
SchedulerFactory schFactory = new StdSchedulerFactory();
        Scheduler sched = null;
        CronTrigger cronTrigger = null;
        try {
            sched = schFactory.getScheduler();
            JobDetail jobDetail = new JobDetail("job1", "group1",SchedulerPBGC.class);

            String cronTimerStr = "* 16 15 * * ? *";

            LOG.warn("CRON TRIGGER FORMAT  FOR PROCESSING PB GC DATA:"+cronTimerStr);

            cronTrigger = new CronTrigger("SchedTrigger", "Group1", cronTimerStr);

            sched.scheduleJob(jobDetail, cronTrigger);          
            sched.start();

            LOG.warn("SCHEDULER REGISTERED FOR PROCESSING PB GC DATA :  TIME :"+cronTimerStr);          

        } catch (SchedulerException se) {
            LOG.error("SchedulerException Message::"+se.getLocalizedMessage());     
        } 
```

在这里，我的调度程序执行了 10 次作业......在这里你可以看到日志......

```
2012-06-20 15:16:50,001 DefaultQuartzScheduler_Worker-1 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:50,001 DefaultQuartzScheduler_Worker-1 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:50,001 DefaultQuartzScheduler_Worker-1 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:51,001 DefaultQuartzScheduler_Worker-2 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:51,001 DefaultQuartzScheduler_Worker-2 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:51,001 DefaultQuartzScheduler_Worker-2 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:52,001 DefaultQuartzScheduler_Worker-3 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:52,001 DefaultQuartzScheduler_Worker-3 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:52,001 DefaultQuartzScheduler_Worker-3 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:53,001 DefaultQuartzScheduler_Worker-4 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:53,001 DefaultQuartzScheduler_Worker-4 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:53,001 DefaultQuartzScheduler_Worker-4 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:54,001 DefaultQuartzScheduler_Worker-5 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:54,001 DefaultQuartzScheduler_Worker-5 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:54,001 DefaultQuartzScheduler_Worker-5 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:55,001 DefaultQuartzScheduler_Worker-6 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:55,001 DefaultQuartzScheduler_Worker-6 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:55,001 DefaultQuartzScheduler_Worker-6 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:56,001 DefaultQuartzScheduler_Worker-7 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:56,001 DefaultQuartzScheduler_Worker-7 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:56,001 DefaultQuartzScheduler_Worker-7 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:57,001 DefaultQuartzScheduler_Worker-8 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:57,001 DefaultQuartzScheduler_Worker-8 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:57,001 DefaultQuartzScheduler_Worker-8 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:58,001 DefaultQuartzScheduler_Worker-9 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:58,001 DefaultQuartzScheduler_Worker-9 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:58,001 DefaultQuartzScheduler_Worker-9 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-----------------------
2012-06-20 15:16:59,001 DefaultQuartzScheduler_Worker-10 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION STARTED-----------------------
2012-06-20 15:16:59,001 DefaultQuartzScheduler_Worker-10 WARN  test.SchedulerPBGC - The value of NO_OF_BEFORE_DAY_TO_RUN must be less then zero ..to start the scheduler
2012-06-20 15:16:59,001 DefaultQuartzScheduler_Worker-10 WARN  test.SchedulerPBGC - ----------PB GC SCHEDULER EXECUTION COMPLETED-------------------- 
```

如何将 CronTimer 迭代器设置为 1 ？或者我怎样才能停止调度程序多次执行作业。

有什么建议吗？谢谢，Gunjan Shah。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:34:37.000

我得到了解决方案..

我使用的 cron 语法是： String cronTimerStr = "* 16 15 * * ? *";

在 15:16 时间，Quartz 将每秒初始化所有可能的工作人员。因此，假设在一分钟内（@ 16 分钟和 60 秒），它将初始化最多 60 个线程。

我将第二个参数设置为零。所以新的语法是“0 16 15 * * ? *”。

现在它工作正常。

谢谢，Gunjan Shah。

# php - 在 PHP 中的 div/iframe 中打开 HTML 文件

> ID：11118669
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:36:01.683
> 
> 标签：php, javascript, iframe, onclick, quotations

我有我正在处理的这段代码：

```
 while (false !== ($entry = readdir($handle))) {
                if ($entry != "." && $entry != "..") {
                    if (strpos($entry, '.htm',1)) {
                        echo '<a href="files\\'.$entry.'">', substr($entry, 0, strrpos($entry, '.')), '</a> <br />';
                    }
                }
            } 
```

这会打印列出带有链接的文件名（.html）的 html。现在，我需要列出的 .html 文件在 div 中打开，而不是在新页面中打开。所以我发现了这个：

```
<a href="#Password Reset"  onclick="document.getElementById('main-text').innerHTML = '<iframe  src=\'files\\IM.htm\' width=\'100%\' height=\'100%\'></iframe>'">Password Reset</a> 
```

这工作得很好，正是我所需要的。在 iframe/div 而不是新页面中打开 .html 文件。**问题**是，当我尝试用 PHP 回应这个时，我认为引号都乱了，而且它不会停止给我错误。这就是我设法用它做的事情：

```
echo "<a href=\"#'.$entry.'\"  onclick="document.getElementById('main-text').innerHTML = '<iframe  src=\'files\\'.$entry.'\'></iframe>'">", substr($entry, 0, strrpos($entry, '.')), "</a>"; 
```

有可能让它工作吗？对不起，我对 PHP 不是很有经验，我也检查了类似的帖子，但没有发现任何可以帮助我的东西。请随时更正代码的任何部分，包括原始工作 PHP 代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:06:32.207

像这样的东西：

```
echo '<a href="#'.$entry.'" onclick="document.getElementById(\'main-text\').innerHTML = \'<iframe  src=\'files/'.$entry.'\'></iframe>\'">'. substr($entry, 0, strpos($entry, '.')) .'</a>'; 
```

在 PHP 中，字符串连接是用 . 代替 ，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:07:06.697

```
 echo "<a href=\"#".$entry."\"  onclick=\"document.getElementById('main-text').innerHTML = <iframe  src=files".$entry."></iframe>;\">". substr($entry, 0, strrpos($entry, '.')) . "</a>"; 
```

试试看。

# shell - 你如何通过管道将 s3cmd get 的结果传递给 var？

> ID：11118671
> 
> 赞同：1
> 
> 时间：2012-06-20T11:36:03.267
> 
> 标签：shell, amazon-s3, amazon-web-services, s3cmd

我需要从 S3 获取图像，在 ec2 上对其进行处理，然后将其保存到 S3 上的不同文件夹中。我不想在此过程中将文件保存到 ec2。

是否可以将“s3cmd get s3://bucket/image”的结果通过管道传输到 var？它似乎没有打印到标准输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:41:42.343

如果您可以显示`s3cmd`在您的情况下产生的输出会更好。但是如果你真的想将命令的输出保存到一个变量中，你可以这样做：

```
$ a=$(s3cmd get s3://bucket/image) 
```

当您还想保存时`stderr`，您可以：

```
$ a=$(s3cmd get s3://bucket/image 2>&1) 
```

当只有`stderr`：

```
$ a=$(s3cmd get s3://bucket/image 2>&1 > /dev/null) 
```

# vb.net - 在 VB.net 中将 csv 数据转换为 DataTable

> ID：11118678
> 
> 赞同：6
> 
> 时间：2012-06-20T11:36:26.467
> 
> 标签：vb.net, csv, import, multidimensional-array, datatable

我正在尝试将存储为 csv 文件的大量整数导入到名为`BeamMap`. .csv 文件仅由整数组成，分隔符为`,`，数据周围没有引号（即 ，`1,3,-2,44,1`），以及换行符和回车符的行尾字符。我想要做的就是将每个整数放入具有适当行和列的 DataTable 单元格中（每行的列数相同），并且以后能够在我的代码中引用它。我真的不想要代码中绝对必要的任何东西（没有标题、标题、标题等），我需要它相当高效（csv 数组大约为 ~1000 x ~1000）。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T13:11:09.400

使用`OleDb`提供程序读取 CSV 并填充`DataTable`.

```
 Dim folder = "c:\location\of\csv\files\"
 Dim CnStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & folder & ";Extended Properties=""text;HDR=No;FMT=Delimited"";"
 Dim dt As New DataTable
 Using Adp As New OleDbDataAdapter("select * from [nos.csv]", CnStr)
       Adp.Fill(dt)
 End Using 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T12:01:00.270

这是一种需要严格格式的简单方法（正如您所提到的）：

```
Dim lines = IO.File.ReadAllLines(path)
Dim tbl = New DataTable
Dim colCount = lines.First.Split(","c).Length
For i As Int32 = 1 To colCount
    tbl.Columns.Add(New DataColumn("Column_" & i, GetType(Int32)))
Next
For Each line In lines
    Dim objFields = From field In line.Split(","c)
                 Select CType(Int32.Parse(field), Object)
    Dim newRow = tbl.Rows.Add()
    newRow.ItemArray = objFields.ToArray()
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-07T07:08:29.800

从映射驱动器获取文件并将检索到的数据放入数据集中：

```
Dim folder = "Z:\"
Dim CnStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & folder & ";Extended Properties=""text;HDR=No;FMT=Delimited"";"

Dim dssample As New DataSet
Using Adp As New OleDbDataAdapter("select * from [samplecsv.csv]", CnStr)
    Adp.Fill(dssample)
End Using

If dssample.Tables.Count > 0 Then
    'some code here
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:43:47.003

另外，不要忘记包括

```
Imports System.Data.OleDb 
```

如果您希望链接到 DataGridView（阅读后）：

```
Dim bs As New BindingSource
bs.DataSource = dt
DataGridView1.DataSource = bs 
```

# ruby-on-rails - Hartl 的 Rails 教程第 9 章练习 6

> ID：11118680
> 
> 赞同：7
> 
> 时间：2012-06-20T11:36:28.970
> 
> 标签：ruby-on-rails, rspec

[更新、显示和删除用户、练习](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec%3aupdating_deleting_exercises)

有没有办法为“创建”和“新建”等用户控制器操作创建 Rspec 测试？

我也不太清楚“创建”和“新建”这两个动作之间的区别。有人可以详细说明吗？

创建测试后，我将如何实现redirect_to root_path？我想我应该在 before_filter signed_in 部分中包含“新建”和“创建”操作，但这不会自动重定向到根目录。

我试图通过修改 users_controller.rb 文件来通过测试，如下所示：

```
 def create
    if signed_in?
      redirect_to root_path
    else
      @user = User.new(params[:user])
      if @user.save
        sign_in @user
        flash[:success] = "Welcome to the Sample App!"
        redirect_to @user
      else
        render 'new'
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T04:29:41.810

我为此做了一个之前的过滤器，似乎效果很好，对于我这样做的测试：

在 authentication_pages_spec.rb 上

```
describe "signin" do
  describe "authorization" do
    describe "for signed in users" do
      let(:user) { FactoryGirl.create(:user) }
      let(:new_user) { FactoryGirl.attributes_for(:user) }
      before { sign_in user }

      describe "using a 'new' action" do
        before { get new_user_path }
        specify { response.should redirect_to(root_path) }
      end

      describe "using a 'create' action" do
        before { post users_path new_user }
        specify { response.should redirect_to(root_path) }
      end         
    end
  end
end 
```

就像@WillJones 所说，有些人可能必须添加`no_capybara: true`到 before 块

在我的用户控制器上：

```
before_filter :signed_in_user_filter, only: [:new, :create]

def signed_in_user_filter
  redirect_to root_path, notice: "Already logged in" if signed_in?
end 
```

对于 new 和 create 动作之间的区别，它与[REST](http://old.thoughtsincomputation.com/posts/understanding-rest-in-rails-3)架构风格有关，但基本上，`new`是来自用户控制器的一个动作，它响应`GET`请求并且负责返回它响应的视图（在在这种情况下，一个新的用户表单）。`create`另一方面，它是一个响应`POST`请求的操作，它不呈现任何内容（它可以使用 javascript 响应，但这是一个高级主题）并且它负责创建新用户，就像操作的名称所暗示的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:55:44.557

1.  是的; 这部分开始于[7.16](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code%3abasic_signup_tests)和其他地方。
2.  一个实际上创建了一个用户 ( `create`)。一个是用于创建新用户的页面*(* ) `new`。
3.  不确定我是否理解这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:49:03.070

我也为此做了一个前置过滤器，但我的过滤器不同，我不明白它为什么起作用。

我的用户控制器有以下条目

```
 class UsersController < ApplicationController
.
.
  before_filter :logged_in_user, only: [:new, :create]
.
.
def logged_in_user
      redirect_to(root_path) if !current_user?(@user)
  end 
```

它与**rkrdo**的示例一样工作得很好，并且相应的测试通过了。但这是否意味着 current_user 与用户登录时的用户不同，反之亦然？在我看来，它们在第一种情况下应该相等，而在第二种情况下不应该。

# jquery - 使用 Html.ActionLink 生成 Jquery UI 选项卡链接

> ID：11118684
> 
> 赞同：1
> 
> 时间：2012-06-20T11:36:44.827
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-ui-tabs, actionlink

我正在尝试通过 ajax 加载数据的 Jquery UI 选项卡。链接以编程方式生成。

```
string LinkID = "";

<ul>
 @foreach (MyItem item in Model.ItemList)
 {
   <li>
    LinkID = "subcat" + ViewBag.F_ID + "-tabs-item" + item.ID + "-link";
    @Html.ActionLink( item.Name,           //Link Text
                     "GetItem",            //Action Name
                     "Items",              //Controller Name
                      //Route Values
                      new { C_ID = ViewBag.C_ID, D_ID = ViewBag.D_ID, E_ID = ViewBag.E_ID, F_ID = ViewBag.F_ID, G_ID = ViewBag.G_ID, Item_ID = item.ID }, 
                      //HTML Attributes
                      new { id = LinkID, @class = "ItemLoadViaAjax", title = item.Name })
   </li>   
  }
 </ul> 
```

* * *

生成的锚元素：

```
 <a class="ItemLoadViaAjax" 
     href="#Cadbury_Eclairs" 
     id="subcat11-tabs-item9-link" 
     title="Cadbury Eclairs">
     Cadbury Eclairs
  </a> 
```

该`href`值与 的值相同`title`，而不是从 ActionLink 生成的 URL。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:35:54.907

Try below. think you are passing values for routevalues parameter

```
@Html.ActionLink(linkText: item.Name, actionName: "GetItem", 
                  controllerName: "Items", 
                  RouteValues: new { C_ID = ViewBag.C_ID, D_ID = ViewBag.D_ID, E_ID =  ViewBag.E_ID, F_ID = ViewBag.F_ID, G_ID = ViewBag.G_ID, Item_ID = item.ID }
                  htmlAttributes: new { id = LinkID, @class = "ItemLoadViaAjax", title = item.Name },
routeValues: null) 
```

Working on ASPX Views.

```
<a class="ItemLoadViaAjax" href="/TRS/ControllerName/ActionName.aspx?C_ID=ViewBag.C_ID&amp;D_ID=ViewBag.D_ID&amp;E_ID=ViewBag.E_ID&amp;F_ID=ViewBag.F_ID&amp;G_ID=ViewBag.G_ID&amp;Item_ID=item.ID" id="LinkID" title="item.Name">LinkText</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:59:12.887

我不知道它发生的原因，但我`Html.ActionLink`用一个将值设置为 div 的 ID 并使用“onclick”函数调用另一个 Javascript 函数来执行 ajax 发布的`<a href..>`语句替换。`href`

# c# - 如何在 WindowsPhone 中将图像保存为 EmbeddedResource？

> ID：11118687
> 
> 赞同：0
> 
> 时间：2012-06-20T11:36:51.707
> 
> 标签：c#, windows-phone-7, xaml

我使用 PhotoChooserTask() 在我的 WindowsPhone 应用程序中加载图像。有没有办法将其更改为 EmbeddedResource ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:55:08.640

这是不可能的。

嵌入式资源包含在已编译、签名的二进制文件中。为此，您需要修改已编译的代码，然后使用受信任的证书对其进行签名。
由于平台的安全模型意味着只有作为市场认证过程的一部分签名的文件在手机上受信任才能使用，这意味着这绝对是不可能的。

当你说“我需要这样做”时——为什么？
如果您从其他地方（网络）获取文件，则无需将其保存为嵌入式资源即可在您的应用程序中使用它。

# iphone - 复制 Roambi App 的 Cardex 视图

> ID：11118689
> 
> 赞同：2
> 
> 时间：2012-06-20T11:36:56.900
> 
> 标签：iphone, ios, ipad, animation

我有兴趣复制在[Roambi App](http://itunes.apple.com/app/roambi-visualizer/id315020789?mt=8)中看到的 Cardex 视图。

我的意思是 Cardex

![这个图片](../Images/74ee1772a2fe3085a1e1f85e88a5f7ca.png)

请帮忙。

谢谢。

**编辑：** 我没有尝试过，因为我不知道该怎么做。如果我能得到一些帮助，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:36:49.253

您可以使用[Nick Lockwood 的](https://stackoverflow.com/users/422133/nick-lockwood)iCarousel，可在[此处](https://github.com/nicklockwood/iCarousel)下载。

使用 iCarousel，您可以创建如下效果：

![在此处输入图像描述](../Images/5eda23b5ac46bcf680e10500d80497f2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:55:52.913

好吧，我使用封面流重复了相同的操作，我不得不更改矩阵坐标。您可能会在 github 中找到封面流程代码

我认为这个链接可能会有所帮助。

[https://github.com/tuo/CoverFlow/tree/master/CoverFlow.xcodeproj](https://github.com/tuo/CoverFlow/tree/master/CoverFlow.xcodeproj)

# php - 添加空格以替换出现的标点符号，后跟字母数字单词，中间没有空格

> ID：11118691
> 
> 赞同：0
> 
> 时间：2012-06-20T11:36:58.570
> 
> 标签：php

在我的生物信息中，用户有时会在没有使用适当间距的情况下输入句子，如下所示：

```
$bio = 'Hey there,I'm Tom!And I'm 25'; 
```

我使用 preg replace 来修复逗号：

```
$bio = str_replace(",", ", ", $bio); 
```

哪个回声：

```
$bio = 'Hey there, I'm Tom!And I'm 25'; 
```

我如何对除 ' (from I'm) 之外的所有其他标点符号执行此操作？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:53:26.940

您可以将 preg_replace 与数组一起使用。

首先创建一个数组符号来替换，如：

```
$signs = array('/,/', '/!/', '/?/'); 
```

比另一个有替换的数组

```
$replacement = array(', ', '! ', '? '); 
```

现在将两个数组与 preg_replace 一起使用：

```
preg_replace($signs, $replacement, $bio); 
```

为确保下一个符号不是空白，您可以对每个字符使用更复杂的正则表达式，如下所示：

```
$signs = array('/,(\S)/', '/!(\S)/', '/?(\S)/');
$replacement = array(', $1', '! $1', '? $1'); 
```

[http://php.net/manual/de/function.preg-replace.php](http://php.net/manual/de/function.preg-replace.php)

# objective-c - 图像较大的 iCarousel 重叠

> ID：11118696
> 
> 赞同：0
> 
> 时间：2012-06-20T11:37:36.043
> 
> 标签：objective-c

实现 iCarousel 动画时，如何解决 iPad 中较大图像重叠的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:17:34.903

您可以更改以下属性。

```
iCarouselTranformOptionRadius 
```

**Rotary、Cylinder 和 Wheel 的半径以像素/点为单位进行变换。这通常是这样计算的，以便项目数（计数）完全适合指定的弧。您可以操纵此值来增加或减少项目间距（和圆的半径）。**

[如需更多参考，请在此处](https://github.com/AalokParikh/iCarousel)阅读自述文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:09:41.783

就像一个疯狂的猜测一样，您是否尝试过在轮播中的 UIImageViews 上`-setClipsToBounds:`设置？`YES`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:20:54.523

将此协议添加到您的类`<iCarouselDeprecated>` 然后实现

```
- (CGFloat)carouselItemWidth:(iCarousel *)carousel
{
    return 200.0;
} 
```

# c++ - 在运行时刻设置 bitset 的大小

> ID：11118699
> 
> 赞同：0
> 
> 时间：2012-06-20T11:38:02.550
> 
> 标签：c++, stl

我有一个简单的类，其宽度和高度成员字段定义了矩阵中的行数和列数。我有矩阵表示（仅需要 0 和 1），例如**bitset<> 字段**（我包括在内），我想在构造函数中设置 bitset 字段的大小。

```
Matrix(int w, int h)
{
    // fields to have size w*h
}

private:
    int width;
    int height;
    //bitset<unknown at the moment> fields; 
```

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:42:09.317

`std::vector<bool>`完全符合您的需要，每个值 1 位。

或者，您可以使用`boost::dynamic_bitset`（我认为它被称为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:40:19.147

您可以使用boost 中的[dynamic_bitset](http://www.boost.org/doc/libs/1_43_0/libs/dynamic_bitset/dynamic_bitset.html)来实现这一点。

# java - 使用 POI 读取 excel 文件 (xlsx) 时出现 java.lang.outofmemory 异常

> ID：11118703
> 
> 赞同：3
> 
> 时间：2012-06-20T11:38:11.660
> 
> 标签：java, excel, apache-poi, out-of-memory

我正在开发一个从 excel 文件 (xlsx) 读取数据的 Web 应用程序。我正在使用 POI 阅读 excel 表。问题是当我尝试读取 excel 文件时，服务器会抛出以下错误：

![在此处输入图像描述](../Images/b7ecddfba69210084d7443486b46292c.png)

我尝试读取的 excel 文件大小接近 80 MB。这个问题有什么解决办法吗？

实际上，用户在将文件保存到磁盘后正在上传文件和应用程序尝试读取文件。我用于测试的代码片段是：

```
 File savedFile = new File(file_path);

FileInputStream fis = null;
            try {

                fis = new FileInputStream(savedFile);
                XSSFWorkbook xWorkbook = new XSSFWorkbook(fis);
                XSSFSheet xSheet = xWorkbook.getSheetAt(5);

                Iterator rows = xSheet.rowIterator();
                while (rows.hasNext()) {
                    XSSFRow row = (XSSFRow) rows.next();
                    Iterator cells = row.cellIterator();

                    List data = new ArrayList();
                    while (cells.hasNext()) {
                        XSSFCell cell = (XSSFCell) cells.next();
                        System.out.println(cell.getStringCellValue());
                        data.add(cell);
                    }

                }
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T23:52:50.077

有一点会有所不同的是，在打开文件开始时。如果你有一个文件，那就把它传进去！使用 InputStream 需要将所有内容缓冲到内存中，这会占用空间。由于您不需要进行缓冲，因此不要！

如果您使用 POI 的最新夜间版本运行，那么这非常容易。您的代码变为：

```
File file = new File(file_path);
OPCPackage opcPackage = OPCPackage.open(file);
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

否则，它非常相似：

```
File file = new File(file_path);
OPCPackage opcPackage = OPCPackage.open(file.getAbsolutePath());
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

这会释放你一些内存，这可能就足够了。如果不是这样，并且您无法将 Java 堆空间增加到足以应付的程度，那么您将不得不停止使用 XSSF UserModel。

除了您一直在使用的当前友好的 UserModel 之外，POI 还支持较低级别的文件处理方式。这种较低级别的方法更难使用，因为您周围没有各种需要将整个文件存储在内存中的助手。但是，当您以流式方式处理文件时，它的内存效率要高得多。要开始使用，请参阅POI 网站上的[XSSF 和 SAX（事件 API）操作方法部分。](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)尝试一下，并查看各种示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:43:29.863

您可能应该更改 JVM 的设置。尝试添加`-Xmx1024 -Xms1024`到启动器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:43:15.403

您可以尝试增加您的 Java 堆大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:44:01.987

我认为你必须增加堆的大小。您可以通过编辑 catalina.bat 文件来完成。添加`-Xms1024m -Xmx1024m`到`CATALINA_OPTS`变量中。

*   Xms = 初始 Java 堆大小
*   Xmx = 最大 Java 堆大小

编辑：来自 Catalina.bat

```
 rem   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
rem                   "run" or "debug" command is executed.
rem                   Include here and not in JAVA_OPTS all options, that should
rem                   only be used by Tomcat itself, not by the stop process,
rem                   the version command etc.
rem                   Examples are heap size, GC logging, JMX ports etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T21:17:45.710

对您当前方法的改进可能是从 excel中读取大约 100 行*（用这个数字进行实验以获得最佳值）并在数据库中进行批量更新。*这会更快。

您还可以在代码中执行一些优化，将列表创建移出外循环*（用于读取行数据的循环）*

> 列表数据 = new ArrayList();

读取字符串缓冲区中一行中存在的所有单元格的内容（可能用“逗号”分隔），然后将其添加到数组列表**“数据”**

您正在向`XSSFRow`arraylist 添加一个类型的对象。存储excel单元格的整个对象是没有意义的。取出其内容并丢弃该对象。

稍后在将内容插入数据库之前，您可以拆分分隔的单元格内容并执行插入。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T14:23:03.553

我已经通过改变实施解决了这个问题。实际上，首先我从 Excel 文件中获取所有数据，并且数据存储在 ArrayList 类型中。之后我将数据插入数据库，这才是真正的问题。现在我根本不存储数据。当我从 ResultSet 中获得一条记录时，我立即将其插入 DB，而不是将其存储到 arraylist 中。我知道这个一个一个的插入不是一个好方法，但我暂时正在使用这种方法。将来如果我找到更好的，我肯定会切换到那个。谢谢大家。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-25T10:42:48.290

您最好将它们存储在文件中，然后尝试将它们加载到数据库中。这将避免单插入一个

# android - 如何调用 onNewIntent

> ID：11118709
> 
> 赞同：-4
> 
> 时间：2012-06-20T11:39:04.450
> 
> 标签：android

当 onCreate 的第一个意图完成并且浏览器关闭时，我想调用 onNewIntent，但我不知道我可以这样做。我在 android 开发人员和 goggling 中找到了，但我不明白。

有人可以给我看一个示例吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:44:21.537

您可以使用，

```
Intent in=new Intent(yourcurrentactivity.this, secondactivity.class);
starActivity(in); 
```

从您的当前活动中打开第二个活动类。

并在清单文件上添加活动标签。

# php - 使用 phpMailer 的 md5 密码

> ID：11118711
> 
> 赞同：1
> 
> 时间：2012-06-20T11:39:25.283
> 
> 标签：php

我使用以下代码...

```
 $mail = new PHPMailer();  
      $mail->IsSMTP(); // send via SMTP
      $mail->SMTPAuth = true; // turn on SMTP authentication
      $mail->Username = $USR_EMAIL; // SMTP username
      $mail->Password = $MAIL_PWD; // SMTP password 
```

我想问一些简单的问题.. 有没有办法向 phpMailer 传递一个以 md5 格式保存在数据库中的密码？phpMailer 是否支持任何其他类型的散列？是否有支持散列密码的发送电子邮件 php 脚本？我很害怕我会在任何地方存储一个没有某种加密的电子邮件密码..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T11:59:09.513

您必须将纯密码发送到 SMTP。散列函数是单向的，它们只是“混淆”输入，因此 SMTP 无法使用它对您进行身份验证。

您可以加密密码，可能是 AES，然后存储密文和秘密（可能作为环境变量），并将解码后的通行证传递给邮件程序。

例子：

```
<?php
$secret_key = 'supersecret key';
$password = 'somepass';

// encrypt
// calculate cipher, and store somewhere
$cipher = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $secret_key, $password, MCRYPT_MODE_ECB);

// use the cipher
$mail->Username = $USR_EMAIL; // SMTP username
$mail->Password = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $secret_key, $cipher, MCRYPT_MODE_ECB); // SMTP password
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T11:58:07.377

不幸的是，这不是 phpMailer 的支持问题，而是您的 SMTP 设置问题。在大多数情况下，您的 SMTP 服务器不知道如何处理密码散列 - 它需要未散列的密码，以便它可以检查自己的密码表，无论如何这些密码表不太可能存储在未加盐的 MD5 中。

您可以（如果您的 SMTP 服务器支持）通过安全连接发送密码（请参阅[PHPMailer：SMTP 错误：无法连接到 SMTP 主机](https://stackoverflow.com/questions/3477766/phpmailer-smtp-error-could-not-connect-to-smtp-host)以了解有关此问题的讨论）。但是，您仍然需要在未加密的情况下保存密码。根据您的托管程序包，一种替代方法是设置 SMTP，使其不通过用户名和密码对您进行身份验证——例如，通过使用正确配置的本地 sendmail 实例。

# c# - WebClient 使用凭据访问页面

> ID：11118712
> 
> 赞同：24
> 
> 时间：2012-06-20T11:39:36.560
> 
> 标签：c#, asp.net, webclient, credentials, defaultnetworkcredentials

我正在尝试访问同一域/同一 asp.net 应用程序上的网页，该网页受密码保护。用于触发此调用的网页和正在访问的网页的凭据相同。

这是代码，我不知道为什么我总是以登录表单html代码结束？

```
using (WebClient client = new WebClient())
{
    client.QueryString.Add("ID", "1040"); //add parameters
    //client.Credentials = CredentialCache.DefaultCredentials;
    //I tried to add credentials like this
    client.Credentials = new NetworkCredential("username", "password");

    string htmlCode = client.DownloadString("http://domain.loc/testpage.aspx");
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-20T11:48:11.517

我怀疑您尝试访问的网页使用了表单身份验证。这意味着如果您希望能够访问受保护的资源，则必须提供有效的身份验证 cookie。为了获得有效的身份验证 cookie，您必须首先通过向发出 cookie 的登录页面发送 POST 请求来验证自己。检索 cookie 后，您将能够在对受保护资源的后续请求中将其发送。您还应该注意，开箱即用`WebClient`不支持 cookie。出于这个原因，您可以编写一个自定义的 cookie 感知 Web 客户端：

```
public class CookieAwareWebClient : WebClient
{
    public CookieAwareWebClient()
    {
        CookieContainer = new CookieContainer();
    }
    public CookieContainer CookieContainer { get; private set; }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var request = (HttpWebRequest)base.GetWebRequest(address);
        request.CookieContainer = CookieContainer;
        return request;
    }
} 
```

现在您可以使用此客户端触发 2 个请求：

```
using (var client = new CookieAwareWebClient())
{
    var values = new NameValueCollection
    {
        { "username", "john" },
        { "password", "secret" },
    };
    client.UploadValues("http://domain.loc/logon.aspx", values);

    // If the previous call succeeded we now have a valid authentication cookie
    // so we could download the protected page
    string result = client.DownloadString("http://domain.loc/testpage.aspx");
} 
```

显然，由于 ASP.NET 的 ViewState 很糟糕，您可能需要在登录请求中发送一些其他参数。您可以执行以下操作：在 Web 浏览器中进行身份验证，并使用 FireBug 查看需要发送的确切参数和标头。

# actionscript-3 - 离开帧时从另一侧制作影片剪辑

> ID：11118714
> 
> 赞同：0
> 
> 时间：2012-06-20T11:39:53.410
> 
> 标签：actionscript-3, flash

所以我试图制作一个简单的脚本，它将包含一个视频......

而且我将能够随意拖动视频，但问题是......当它离开框架的边界时，我希望它继续在另一边播放，即使它只有一半或更少的视频...

我知道如何将它运送到另一边，但不知道它的一半或更少。

```
function everyFrame(event:Event):void {
    if (movie.x + 100 < 1)
        movie.x = 400;
} 
```

这是我试图实现的效果的图像... [http://i.imgur.com/w8E4s.png](http://i.imgur.com/w8E4s.png) 提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:40:08.600

在没有看到更多代码的情况下，我会说您需要设置 clipAndEnableScrolling。

```
clipAndEnableScrolling="true" 
```

尝试将其添加到您的视频所在的组（Group、HGroup 或 VGroup）。

根据我现在的理解进行编辑...：

当电影的右边缘接触屏幕的右边缘时，您将需要创建第二部电影并将其添加到舞台上，并在第一部电影的确定 x 和第一部电影的 y 处。我会说这样的话...

```
onMoveOfFirstMovie():void
{
    if(firstMovie.x + firstMovie.width > movieContainer.width)
    {
        if(secondMovie doesnt exist)
        {
            //create second movie if it isnt already on stage and set it's play position to the play position of first movie
        }

        secondMovie.y = firstMovie.y;
        secondMovie.x = firstMovie.x + firstMovie.width - movieContainer.width;
    }
} 
```

非常粗略的代码，但它应该是正确的。

# objective-c - 如何使用 ocmock 存根 AppDelegate 上的属性？

> ID：11118720
> 
> 赞同：1
> 
> 时间：2012-06-20T11:40:00.447
> 
> 标签：objective-c, ocmock

在我的应用委托类中，我有一个简单的属性

```
@property (strong, nonatomic) LoginAppDelegate *loginAppDelegate; 
```

然后我在这里卸载所有登录视图的应用程序委托功能，这样我就可以保持我的主应用程序委托类很小（ish）

然后在登录应用程序委托上，我有一种方法可以在主导航控制器上推送视图控制器

```
- (void)launchSomeOtherViewController {} 
```

痛苦的部分是当我在调用这个“启动”方法的视图控制器中时

```
- (void)callBackAfterSomeHttpMethodLetsSay
{
    [self.appDelegate.loginAppDelegate launchSomeOtherViewController];
} 
```

当我尝试对此进行模拟时，似乎我在应用程序委托上的存根不正确

```
- (void)testCallBackWithSignupTokenInvokesLaunchCompleteSignupViewControllerWithToken
{
    id mockLoginAppDelegate = [OCMockObject mockForClass:[LoginAppDelegate class]];
    id mockAppDelegate = [OCMockObject mockForClass:[AppDelegate class]];
    [[[mockAppDelegate stub] andReturn:mockLoginAppDelegate] loginAppDelegate];
    [[mockLoginAppDelegate expect] launchSomeOtherViewController];
    [self.sut callBackAfterSomeHttpMethodLetsSay];
    [mockLoginAppDelegate verify];
} 
```

当我通过 ocunit 运行它时的错误是通常的“未调用预期的方法”

所以我的问题与我存根的方式有关-我可以做一个存根来返回登录模拟，还是我需要手动进入getter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:16:05.977

看起来你没有让你`mockAppDelegate`对被测类可见。尝试添加：

```
[self.sut setAppDelegate:mockAppDelegate]; 
```

# android - Android：如何在屏幕上获取当前打开的应用程序名称

> ID：11118721
> 
> 赞同：1
> 
> 时间：2012-06-20T11:40:02.300
> 
> 标签：android

请建议我如何获取当前打开的应用程序名称，即使设备上有主屏幕，我也会发现“主屏幕已打开”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T11:50:56.987

干得好

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
List l = am.getRecentTasks(1, ActivityManager.RECENT_WITH_EXCLUDED);
Iterator i = l.iterator();
PackageManager pm = this.getPackageManager();
while (i.hasNext()) {
    ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
    try {
        CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(
        info.processName, PackageManager.GET_META_DATA));
        Log.w("LABEL", c.toString());
    } catch (Exception e) {
        // Name Not FOund Exception
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T15:06:45.320

您还可以使用以下代码列出正在运行的任务：

```
ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(ACTIVITY_SERVICE);
List li = am.getRunningTasks(100);
Iterator i = li.iterator();
PackageManager pm = getApplicationContext().getPackageManager();
while (i.hasNext()) {
    try {
        ActivityManager.RunningTaskInfo info = (ActivityManager.RunningTaskInfo)(i.next());
        String ac = info.baseActivity.getPackageName();
        CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(
        ac, PackageManager.GET_META_DATA));
        Log.v("asd", c.toString());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-04T07:20:01.253

使用**AccessibilityService**

*   您可以使用 AccessibilityService 检测当前活动的窗口。
*   在 onAccessibilityEvent 回调中，检查 TYPE_WINDOW_STATE_CHANGED 事件类型以确定当前窗口何时更改。
*   通过调用 PackageManager.getActivityInfo() 检查窗口是否为活动。

**我在 Android 2.2 (API 8) 到 Android 7.1 (API 25) 中测试和工作。**

```
public class MyAccessibilityService extends AccessibilityService {
    @Override
    protected void onServiceConnected() {
        super.onServiceConnected();

        //Configure these here for compatibility with API 13 and below.
        AccessibilityServiceInfo config = new AccessibilityServiceInfo();
        config.eventTypes = AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED;
        config.feedbackType = AccessibilityServiceInfo.FEEDBACK_GENERIC;

        if (Build.VERSION.SDK_INT >= 16)
            //Just in case this helps
            config.flags = AccessibilityServiceInfo.FLAG_INCLUDE_NOT_IMPORTANT_VIEWS;

        setServiceInfo(config);
    }
    @Override
    public void onAccessibilityEvent(AccessibilityEvent accessibilityEvent) {
        Log.d("ABC-",accessibilityEvent.getPackageName()+" -- "+accessibilityEvent.getClassName());
        if (accessibilityEvent.getEventType() == AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED) {
            if (accessibilityEvent.getPackageName() != null && accessibilityEvent.getClassName() != null) {
                ComponentName componentName = new ComponentName(
                        accessibilityEvent.getPackageName().toString(),
                        accessibilityEvent.getClassName().toString()
                );

                ActivityInfo activityInfo = tryGetActivity(componentName);
                boolean isActivity = activityInfo != null;
                if (isActivity)
                    Log.i("CurrentActivity", componentName.flattenToShortString());
            }
        }
    }

    private ActivityInfo tryGetActivity(ComponentName componentName) {
        try {
            return getPackageManager().getActivityInfo(componentName, 0);
        } catch (PackageManager.NameNotFoundException e) {
            return null;
        }
    }
    @Override
    public void onInterrupt() {

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T12:04:39.817

对我来说，上面的例子不起作用。所以我最终使用了这个：

```
ActivityManager am = (ActivityManager) this
            .getSystemService(ACTIVITY_SERVICE);

    List<ActivityManager.RecentTaskInfo> l = am.getRecentTasks(1,
            ActivityManager.RECENT_WITH_EXCLUDED);
    Iterator<ActivityManager.RecentTaskInfo> i = l.iterator();

    PackageManager pm = this.getPackageManager();

    while (i.hasNext()) {
        try {
            Intent intent = i.next().baseIntent;
            List<ResolveInfo> list = pm.queryIntentActivities(intent,
                    PackageManager.MATCH_DEFAULT_ONLY);

            CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(
                    list.get(0).activityInfo.packageName,
                    PackageManager.GET_META_DATA));

            Toast.makeText(this, "Application name: " + c.toString(),
                    Toast.LENGTH_LONG).show();

        } catch (Exception e) {
            Toast.makeText(this,
                    "Application name not found: " + e.toString(),
                    Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T11:49:29.160

有了这个，您可以获得当前的应用程序名称

```
 Resources appR = getApplicationContext().getResources(); 
 CharSequence txt = appR.getText(appR.getIdentifier("app_name","string", getApplicationContext().getPackageName()));
 System.out.println(txt+"  APp Name"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-21T03:30:45.693

只需使用此代码

```
getActivity().getApplicationInfo().packageName 
```

它为您提供应用程序信息，然后调用包名称。

# php - Codeigniter - 如何使用前一个条件进行第二个 MySQL 查询

> ID：11118732
> 
> 赞同：0
> 
> 时间：2012-06-20T11:40:47.867
> 
> 标签：php, mysql, codeigniter

嘿我有以下问题：

我有一个很长的 MySQL 查询，然后我想计算它返回的行数。

得到这个结果后，我想用一些限制再次制作它，并将我的结果按一列分组。

所以看起来：

```
/* 
query conditions....
query conditions....
query conditions....
query conditions....
query conditions....
query conditions....
query conditions....
*/

//first query

$query = $this->db->get();

$results = $query->result_array(); 

$this->db->select("FOUND_ROWS() as cnt");

$cnt_array = $this->db->get()->row_array(); //here is my number of rows

//second query and if instruction

        if($sth==0) { $this->db->group_by(...);}

        $this->db->limit($count, $from);

        $query = $this->db->get();
        $results = $query->result_array();

        $this->db->select("FOUND_ROWS() as cnt");

        $tot_cnt = $this->db->get()->row_array(); //now i want to have number of grouped results. 
```

但是第二个查询不起作用，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:49:57.817

您可以像这样编写多个查询

```
$query = $this->db->get();

$results = $query->result_array(); 

$sth = $this->db->select("FOUND_ROWS() as cnt");

if($sth){
    $qry2 =  $this->db->get();
    $result2 = $qry2->result_array(); 

    $sth2 = $this->db->select("FOUND_ROWS() as cnt");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:03:43.190

我对你的问题有点困惑。如果您想简单地运行完全相同的查询，但有时使用两个额外的命令 - 那么就可以了。

如果您想使用第一个查询的结果运行第二个查询 - 那么这将无济于事

```
function _generic_query()
{
    /* 
    query conditions....
    query conditions....
    query conditions....
    query conditions....
    query conditions....
    query conditions....
    query conditions....
    */
return;
}

function first_query()
{
    $this->_generic_query();

    $query = $this->db->get();
    $results = $query->result_array(); 
    $this->db->select("FOUND_ROWS() as cnt");
    $cnt_array = $this->db->get()->row_array(); //here is my number of rows
}

function second_query()
{
    $this->_generic_query();

    if($sth==0) { $this->db->group_by(...);}
    $this->db->limit($count, $from);
    $query = $this->db->get();
    $results = $query->result_array();
    $this->db->select("FOUND_ROWS() as cnt");
    $tot_cnt = $this->db->get()->row_array();
} 
```

# iphone - MBProgressHUD 编译时出现这么多错误

> ID：11118733
> 
> 赞同：1
> 
> 时间：2012-06-20T11:40:49.803
> 
> 标签：iphone, ios, ios4

我正在开发 iOS4.2

我已将 MBProgressHUD h/m 文件包含到我的 iphone 项目中，但是在运行时，我在 MBProgressHUD m 文件中遇到了很多错误，如下所示。

请参考下面的这张图片，这些是我遇到的错误。

谢谢你的帮助。

![这是错误](../Images/d8bd69a6a318e9634983e0156185a0d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:43:15.323

似乎您包含 .m 文件而不包含 .h 文件，我刚刚从我的项目中删除了 .h 文件并且我收到了相同的错误，请确保 .h 文件也包含在项目中

# c# - 按钮单击弹出窗口打开时带有按钮的下拉列表

> ID：11118741
> 
> 赞同：0
> 
> 时间：2012-06-20T11:41:23.147
> 
> 标签：c#, asp.net, c#-4.0, webforms

你能给我一个线索如何做到这一点吗？我有一个`DropDownList`，那`DropDownList`是装满的`ListItems`。之后`DropDownList`，有一个`Button`叫做*ADD NEW*。单击按钮时，会打开一个弹出窗口。如果某个项目不在 中`DropDownList`，我想添加它。在弹出框窗口中有一个`TextBox`和添加`Button`。

基本上，如果一个项目不在`DropDownlist`我想通过单击*添加新*按钮来添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:51:07.960

在弹出窗口中，当您输入项目并按添加按钮时，只需执行以下步骤：

```
 1\. Iterate through all the elements in dropdown and check if item you want to add exist or not
 2\. If item does not exist then add it to dropdown using this code:
     yourDropdown.items.Add(newitem); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:48:36.120

下面一行的东西......

```
string newItem = textbox1.Text;
if(ddlMyList.Items.FindByText(newItem) == null) //Means item not found
    {
    ddlMyList.Items.Add(new ListItem(newItem));
    } 
```

# c# - 从excel导入数据面临问题

> ID：11118744
> 
> 赞同：0
> 
> 时间：2012-06-20T11:41:41.147
> 
> 标签：c#, asp.net

我正在从 MS Excel 导入数据。我写的代码是，

```
var ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" +
    uploadfile.PostedFile.FileName + ";" + "Extended Properties=Excel 12.0;";
OleDbConnection objConn = new OleDbConnection(sConnectionString);

objConn.Open();
try
{
    var objCmdSelect = new OleDbCommand("select * from [Sheet1$]", objConn);
} 
```

等等。

我遇到了一个对我来说看起来很一般的错误

**Microsoft Office Access 数据库引擎找不到对象“Sheet1$”。确保对象存在并且正确拼写其名称和路径名**

*

> 我的工作表名称拼写正确，但为了我的确认，我在下面的代码 dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

```
if(dt == null)
{
  return null;
}

var excelSheets = new String[dt.Rows.Count];
int i = 0;

// Add the sheet name to the string array.
foreach(DataRow row in dt.Rows)
{
  excelSheets[i] = row["TABLE_NAME"].ToString();
  i++;
} 
```

* 但我的数据表为空。我的问题是连接已成功打开，但我无法从 excel 文件中读取数据。 **是否需要任何特殊身份验证。？** 因为我收到上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:00:25.440

相反，如果 Ace.OLEDB 您可以尝试使用 Microsoft.Jet.OLEDB，因为我遇到了类似情况，然后我切换到 Jet.OLEDB

```
    字符串 MyExelFile = "C:\Temp\Sample.xls";
    字符串 MyExcelSheet = "[Sheet1$]";
    string StrConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + MyExelFile + ";

    扩展属性=\"Excel 8.0；HDR=是；IMEX=1\""；
    String MySQLSelect = "select * from " + MyExcelSheet + "";
    数据表项=新数据表（）；

`System.Data.OleDb.OleDbConnection Cn = new System.Data.OleDb.OleDbConnection();
Cn.ConnectionString = StrConn;
System.Data.OleDb.OleDbDataAdapter Da = new System.Data.OleDb.OleDbDataAdapter
(MySQLSelect, Cn);
Cn.Open();
   Da.Fill(Items);
Cn.Close();
</pre>` 

```

# javascript - 如何使用复选框将 html 标签插入 div？

> ID：11118748
> 
> 赞同：2
> 
> 时间：2012-06-20T11:41:47.510
> 
> 标签：javascript, jquery, checkbox

我有一长串带有特定标签的复选框，如下所示：

```
<input type='checkbox' name='check[]' id='159' value='159' />
<label for='159'>Person 1</label>

<input type='checkbox' name='check[]' id='160' value='160' />
<label for='160'>Person 2</label> 
```

在这个表格下面我有六个像这样的div：

```
<div id="member1" class="member"></div>
<div id="member2" class="member"></div>
<div id="member3" class="member"></div>
<div id="member4" class="member"></div>
<div id="member5" class="member"></div>
<div id="member6" class="member"></div> 
```

有人帮我写了这个 JS 函数，这样当我点击一个复选框时，它的标签就会插入到第一个 div 中。这是它的样子：

```
$(function(){
$('#159').click(function(){
    if($(this).is(':checked')){
        $('#member1').text($('label[for="159"]').text());
    }
    else{
        $('#member1').text('');   
    }
});
}); 
```

问题是我不知道如何编辑此功能以适用于任何单击的复选框。目前它仅适用于 id 为 159 的复选框。第二个问题是该函数指定将其放入的 div。这个想法是，当第一个 div 为“满”时，下一个复选框会将标签插入第二个 div，然后是第三个，依此类推。

请注意，如果未选中该复选框，则标签将从 div 中删除，并且其下方 div 中的标签必须向上移动。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:44:03.590

试试这个：

```
 $(function(){
    $('input:checkbox').click(function(){
       var id = $(this).attr('id');
        if($(this).is(':checked')){
            $('#member1').text($('label[for="'+ id +'"]').text());
        }
        else{
            $('#member1').text('');   
        }
    });
    }); 
```

* * *

```
 $(function(){
    $('input:checkbox').click(function(){
       var id = $(this).attr('id');
        if($(this).is(':checked')){
          if($('#memebr1').text() == "") {
            $('#member1').text($('label[for="'+ id +'"]').text());
          } else {
            $('#member2').text($('label[for="'+ id +'"]').text())
          }
        }
        else{
            $('#member1').text('');   
        }
    });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:45:14.527

```
$(function(){
$('input[type=checkbox]').click(function(){
    if($(this).is(':checked')){
        $('#member1').text($('label[for="'+$(this).attr("id")+'"]').text());
    }
    else{
        $('#member1').text('');   
    }
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:11:35.343

试试这个。

[**现场演示**](http://jsfiddle.net/rajaadil/vBu6Y/5/)

```
 $(function() {

    $('input[type=checkbox][name=check\[\]]').click(function() {
        chkboxid = $(this).attr('id');
        if ($(this).is(':checked')) {

            $('#member' + eval($(this).index() + 1)).text($('label[for="' + chkboxid + '"]').text());

        }
        else {
            $('#member' + eval($(this).index() + 1)).text('');
        }
    });
});​ 
```

# android - 雅虎在 Android 中的集成

> ID：11118749
> 
> 赞同：1
> 
> 时间：2012-06-20T11:41:57.023
> 
> 标签：android, yahoo, yahoo-api

我打算将 Yahoo 集成到我的 Android 应用程序中，以获取用户的姓名和个人详细信息。如何将雅虎与安卓集成？

我花了几个小时寻找使用 OAuth 集成 Yahoo 登录的教程/示例 android 应用程序，但我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:01:35.423

看下面代码，需要Signpost库[Signpost库](http://code.google.com/p/oauth-signpost/downloads/list)

```
import oauth.signpost.OAuth;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;
import oauth.signpost.exception.OAuthCommunicationException;
import oauth.signpost.exception.OAuthExpectationFailedException;
import oauth.signpost.exception.OAuthMessageSignerException;
import oauth.signpost.exception.OAuthNotAuthorizedException;
import oauth.signpost.signature.HmacSha1MessageSigner;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;
import com.synapse.selfervices.R;

public class YahooScreen extends Activity {
    private static final String REQUEST_TOKEN_ENDPOINT_URL ="https://api.login.yahoo.com/oauth/v2/get_request_token";
    private static final String ACCESS_TOKEN_ENDPOINT_URL ="https://api.login.yahoo.com/oauth/v2/get_access_token";
    private static final String AUTHORIZE_WEBSITE_URL   ="https://api.login.yahoo.com/oauth/v2/request_auth";
    private static final int PIN_DIALOG = 0;
String CALLBACK_URL = OAuth.OUT_OF_BAND; // this should be the same as the
// SCHEME and HOST values in
// your AndroidManifest.xml file
   String CONSUMER_KEY = "";//
   String CONSUMER_SECRET = "";
   private CommonsHttpOAuthConsumer myConsumer;
   private CommonsHttpOAuthProvider myProvider;
   private String requestToken;
   private String accessToken;

  /** Called when the activity is first created. */
 @Override
  public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        callOAuth();
        showDialog(PIN_DIALOG);
        // createPinDialog().show();
}

private void callOAuth() {
        try {
                // retrieve the consumer token and then sign it
                myConsumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY,
                                CONSUMER_SECRET);

                myConsumer.setMessageSigner(new HmacSha1MessageSigner());

                HttpClient client = new DefaultHttpClient();
                // retrieve the provider by using the signed consumer token
                myProvider = new CommonsHttpOAuthProvider(
                                REQUEST_TOKEN_ENDPOINT_URL, ACCESS_TOKEN_ENDPOINT_URL,
                                AUTHORIZE_WEBSITE_URL, client);
                myProvider.setOAuth10a(true);
                String aUrl = myProvider.retrieveRequestToken(myConsumer,
                                CALLBACK_URL);

                requestToken = myConsumer.getToken();
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(aUrl)));
        } catch (Exception ex) {
                Toast.makeText(getApplicationContext(), ex.getMessage(),
                                Toast.LENGTH_LONG).show();
                Log.e(ex.getMessage(), ex.toString());
        }
}

// this is the callback function that will run when oauth authenticates
// successfully
@Override
protected void onNewIntent(Intent intent) {
        System.out.println("OnNewIntent...");
        Toast.makeText(getApplicationContext(), "OnNewIntent - It works!",
                        Toast.LENGTH_LONG).show();
        // whatever you want to do after authenticating goes here ....
}

AlertDialog createPinDialog() {
        LayoutInflater factory = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        // LayoutInflater factory = LayoutInflater.from(this);
        final View textEntryView = factory.inflate(R.layout.pin, null);
        final EditText pinText = (EditText) textEntryView
                        .findViewById(R.id.pin_text);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Twitter OAuth PIN");
        builder.setView(textEntryView);
        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                        if (pinText != null)
                                gotOAuthPin(pinText.getText().toString());
                        onResume();
                }
        });
        return builder.create();
}

private void gotOAuthPin(String pin) {
        SharedPreferences.Editor editor = getSharedPreferences("yahoo",
                        MODE_PRIVATE).edit();
        try {
                myProvider.retrieveAccessToken(myConsumer, pin);
                accessToken = myConsumer.getToken();

        } catch (OAuthMessageSignerException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (OAuthNotAuthorizedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (OAuthExpectationFailedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (OAuthCommunicationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        }
        if (accessToken != null && accessToken.length() > 0) {
                Toast.makeText(this, "Authorized", Toast.LENGTH_SHORT).show();
                HttpPost request = new HttpPost(
                                "http://social.yahooapis.com/v1/user/profile?format=json");
                StringEntity body = null;
                /*
                 * try { body = new StringEntity("city=hamburg&label=" +
                 * URLEncoder.encode("Send via Signpost!", "UTF-8")); } catch
                 * (UnsupportedEncodingException e1) { // TODO Auto-generated catch
                 * block e1.printStackTrace(); }
                 * body.setContentType("application/x-www-form-urlencoded");
                 * request.setEntity(body);
                 */

                try {
                        myConsumer.sign(request);
                } catch (OAuthMessageSignerException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
    } catch (OAuthMessageSignerException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                } catch (OAuthExpectationFailedException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                } catch (OAuthCommunicationException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                }

                System.out.println("Sending update request to Fire Eagle...");

                HttpClient httpClient = new DefaultHttpClient();
                HttpResponse response = null;
                try {
                        response = httpClient.execute(request);
                } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }

                Toast.makeText(
                                this,
                                "Response: " + response.getStatusLine().getStatusCode()
                                                + " " + response.getStatusLine().getReasonPhrase(),
                                Toast.LENGTH_SHORT).show();
        } else {
                Toast.makeText(this, "Not Authorized", Toast.LENGTH_SHORT).show();
        }
}

@Override
protected Dialog onCreateDialog(int id) {
        switch (id) {
        case PIN_DIALOG:
                LayoutInflater factory = LayoutInflater.from(this);
                final View textEntryView = factory.inflate(R.layout.pin, null);
                final EditText pinText = (EditText) textEntryView
                                .findViewById(R.id.pin_text);
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("OAuth PIN");
                builder.setView(textEntryView);
                builder.setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {
                                        public void onClick(DialogInterface dialog,
                                                        int whichButton) {
                                                if (pinText != null)
                                                        gotOAuthPin(pinText.getText().toString());
                                        }
                                });
                return builder.create();
        }

        return super.onCreateDialog(id);
}} 
```

# javascript - console.log 中的错误？

> ID：11118758
> 
> 赞同：5
> 
> 时间：2012-06-20T11:42:25.250
> 
> 标签：javascript, firefox, google-chrome, console, javascript-debugger

> **可能重复：**
> [Chrome 的 JavaScript 控制台是否懒于评估数组？](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)

我尝试以下代码：

```
var myList = new Object();
var item   = new Object();
item.text  = "item-1";
myList[3]  = item;

console.log(myList);
console.log(myList[3].text);

// Assign another object to the same entry
var item2   = new Object();
item2.text  = "item-2";
myList[3]  = item2;

console.log(myList);
console.log(myList[3].text); 
```

结果很奇怪：

```
* Object
  * 3: Object
      text: "item-2"

item-1

* Object
  * 3: Object
      text: "item-2"

item-2 
```

但是 - 如果我在一段时间后执行第二部分（使用 setTimeout），并展开第一个对象，我做对了，即：

```
* Object
  * 3: Object
      text: "item-1"

item-1

* Object
  * 3: Object
      text: "item-2"

item-2 
```

我觉得分享它很重要，因为我认为一个人可能会浪费很多时间来试图理解他的代码中的问题。如果有人提到了一个开放的错误或其他东西 - 请回复这张票。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T10:27:26.833

My view is that this is a horrendously irritating 'feature' that I really wish I could turn off, it makes debugging a nightmare, not knowing at which point in time something may have updated an object, whilst trying to establish exact object state at a give point in the code. The feature could be useful for 'watch points' etc, but not in something called a 'LOG' (the clue is in the name).

Consider this code fragment:

```
var person = {'name':'Tom'};
console.log( person);  //output the entire object variable
person.name = 'Thomas';
//the output is an object, whose 'name' value is 'Thomas', even though the log statement was placed before the value was changed to 'Thomas'. 
```

AND THEN:

```
var person = {'name':'Tom'};
console.log( person.name);    //changed to output a string variable
person.name = 'Thomas';
//the output here, however, has not dynamically updated and correctly outputs 'Tom' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T12:13:55.663

这是一个[已知的错误 (50316)](http://code.google.com/p/chromium/issues/detail?id=50316)，它会一次又一次地被报告，因为人们在报告之前没有查看 bugtracker：

*   [78325](http://code.google.com/p/chromium/issues/detail?id=78325)
*   [94887](http://code.google.com/p/chromium/issues/detail?id=94887)
*   [105559](http://code.google.com/p/chromium/issues/detail?id=105559)
*   [107828](http://code.google.com/p/chromium/issues/detail?id=107828)
*   [111020](http://code.google.com/p/chromium/issues/detail?id=111020)
*   [131124](http://code.google.com/p/chromium/issues/detail?id=131124)

可悲的是，没有关于是否/何时解决此问题的信息。在那之前，您需要先克隆对象，然后再将它们传递给`console.log()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:55:45.190

这是某些浏览器中控制台日志的已知问题/功能。

当您记录某些内容时，它可能不会立即转换为文本格式。如果日志存储了对您记录的对象的引用，那么当它实际显示在日志中时，它将转换为文本格式。

这样做的好处是记录某些内容对性能的影响非常小，直到您实际打开日志窗口来显示日志。

即使您在运行代码时打开了日志窗口，在您的函数运行时也不会发生更新（因为 Javascript 是单线程的），因此控制台窗口将显示函数末尾的值，当窗口更新时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:49:02.557

在我看来，这更像是一种比赛条件。由于您仅传递对 的引用`console.log()`，因此它所引用的值可能在实际记录时已更改值。然后，当您使用 setTimeout() 时，该值会在记录后发生变化。与其传递对 的引用`console.log()`，不如传递值的克隆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:51:23.317

我在最新版本的 Chrome 20.0.1132.57 m 上对这个“问题”做了一些实验。总结要点：-

*   执行代码时，console.log() 使用 as "> Object" 打印对对象的引用
*   单击三角形时显示对象的状态，与执行 console.log() 的代码行无关
*   如果要打印当前状态的对象，请打印一个克隆`console.log(JSON.parse(JSON.stringify(obj)));`

您可以使用这段代码在您自己的浏览器上进行测试：

```
window.onload = function() {chto = {a : 10, b : 20};
console.log('Open this object after 5 seconds')
console.log(chto);
console.log('Open this object before 5 seconds')
console.log(chto);
console.log('Console of the cloned object')
console.log(JSON.parse(JSON.stringify(chto)));
setTimeout(function(){ console.log('5 seconds up'); chto['b'] = 30; },5000 ) ; }; 
```

# bash - BASH - 如何获取名称中带有空格的文件夹的内容？

> ID：11118763
> 
> 赞同：0
> 
> 时间：2012-06-20T11:42:42.907
> 
> 标签：bash, variables

我可以使用以下内容来获取没有空格的文件夹的内容：

`files=~/Movies/MyFolder/MySubfolder*`

但是，如果文件夹名称中有空格，则以下内容不起作用：

`files=~/Movies/My\ Folder/My\ Subfolder/*`

我正在尝试回显文件夹内容，如下所示：

```
for f in "$files"
do
    echo "$f"
done 
```

我也尝试在路径周围加上引号：

`files=~/"Movies/My Folder/My Subfolder"/*`

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:43:56.647

```
#Works better, and recursively.
find ~/"Movies/My Folder/My Subfolder" -iname \*jpg | while read f ; do
    echo $f
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:33:21.730

使用数组：

```
shopt -s nullglob   # If the folder is empty, don't treat * literally
files=(~/Movies/My\ Folder/My\ Subfolder/*)
for f in "${files[@]}"; do
    echo $f
done 
```

或者，正如丹尼斯所说，直接迭代 glob（我错误地认为这行不通）：

```
shopt -s nullglob
for f in ~/Movies/My\ Folder/My\ Subfolder/*; do
    echo $f
done 
```

# c# - Windows CE 在 C# 中恢复其他应用程序窗口

> ID：11118767
> 
> 赞同：1
> 
> 时间：2012-06-20T11:43:06.990
> 
> 标签：c#, windows-ce

如何从我的应用程序中恢复其他应用程序窗口？我只知道此应用程序的进程名称。我搜索 .Net 3.5 的代码谢谢，希望你能回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:09:41.637

这取决于您对其他窗口的了解，但一般来说，您可以[P/Invoke`FindWindow`](http://www.pinvoke.net/default.aspx/coredll.FindWindowW)并传入窗口的标题。这将为您提供目标窗口的句柄。根据窗口的状态和您的愿望，您可以调用[`BringWindowToTop`](http://msdn.microsoft.com/en-us/library/aa452899),[`ShowWindow`](http://msdn.microsoft.com/en-us/library/aa453731)和/或[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/aa453662.aspx)（再次通过 P/Invoke）。

# android - BounceScrollRunnableDefault 在 LogCat 中被发送垃圾邮件

> ID：11118768
> 
> 赞同：3
> 
> 时间：2012-06-20T11:43:09.020
> 
> 标签：android, scrollview, logcat, android-overscoll

每当我运行我的应用程序并尝试在`ScrollView`我的 LogCat 中过度滚动时，都会收到超过 50 个条目的垃圾邮件，它们都在说类似的事情：

`run(), TimeFraction=0.785, mBounceExtent=31.378126`

全部带有标签：`BounceScrollRunnableDefault`

每个条目只有数字略有变化。

在`ScrollView`我已经设置`overScrollMode`为`never`.

所有这些调试输出是否会减慢应用程序的速度？有没有办法防止/抑制这个巨大的输出墙？

注意：我将 overScrollMode 设置为 never 的原因是因为我不想要 Android 生成的蓝色过度滚动发光。

# java - 为什么这个 Java 正则表达式不起作用？

> ID：11118771
> 
> 赞同：1
> 
> 时间：2012-06-20T11:43:21.223
> 
> 标签：java, regex

我有一个 Java 正则表达式，它从字符串中捕获堆栈异常：

```
((?s).+(?:Exception|Error)[^\n]++(?:\s+at .++)+) 
```

它[与](http://fiddle.re/e07v)我的输入字符串匹配：

```
FOO - org.omg.CORBA.MARSHAL: com.ibm.ws.pmi.server.DataDescriptor; IllegalAccessException  minor code: 4942F23E    
         at com.ibm.rmi.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:199)
         at com.ibm.rmi.iiop.CDRInputStream.read_value(CDRInputStream.java:1429)
         at com.ibm.rmi.io.ValueHandlerImpl.read_Array(ValueHandlerImpl.java:625)
         at com.ibm.rmi.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:273)
         at com.ibm.rmi.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:189)
         at com.ibm.rmi.iiop.CDRInputStream.read_value(CDRInputStream.java:1429)
         at com.ibm.ejs.sm.beans._EJSRemoteStatelessPmiService_Tie._invoke(_EJSRemoteStatelessPmiService_Tie.java:613)
         at com.ibm.CORBA.iiop.ExtendedServerDelegate.dispatch(ExtendedServerDelegate.java:515)
         at com.ibm.CORBA.iiop.ORB.process(ORB.java:2377)
         at com.ibm.CORBA.iiop.OrbWorker.run(OrbWorker.java:186)
         at com.ibm.ejs.oa.pool.ThreadPool$PooledWorker.run(ThreadPool.java:104)
         at com.ibm.ws.util.CachedThread.run(ThreadPool.java:137)< newline here > 
```

但如果我将模式扩展到此：

```
FOO - ((?s).+(?:Exception|Error)[^\n]++(?:\s+at .++)+)\n 
```

它[不再匹配](http://fiddle.re/42vc)。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:09:51.563

即使字符串末尾确实有换行符，它也不匹配，因为 final`\n`已经匹配`.++`（您正在使用`(?s)`选项）。由于`.++`贪婪所有格，它会将所有内容匹配到字符串的末尾而不回溯，因此`\n`总是会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:09:45.980

似乎最后一个表达式组正在捕获所有内容，包括其表达式中该字符串的结尾。因此，添加 \n 不会被发现，因为它已经是早期组的一部分。

因此，要测试使用：

FOO - ((?s).+(?:Exception|Error)([^\n]++)((?:\s+at .++)+))

您将看到它捕获的组。您会看到其中的最后一组包括 EOL 在内的所有内容。

# php - 用引号括起来的“at”符号在 PHP 中是什么意思？

> ID：11118772
> 
> 赞同：0
> 
> 时间：2012-06-20T11:43:22.410
> 
> 标签：php, arrays, file

我有这个代码：

```
$filePath = '/blah/image.jpg';
$data_array = array(
  "file_data"=>"@".$filePath,
); 
```

该`$data_array = array`构造是一个数组定义并`"file_data"=>"@".$filePath,`指定一个数组元素。

然后该数组用于设置 HTTP POST 请求：

```
curl_setopt($request, CURLOPT_POSTFIELDS, $data_array); 
```

`"@"`是什么`"@".$filePath`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:43:53.967

`@`这是一个附加到字符串的文字符号。结果是一个值`@/blah/image.jpg`

# actionscript-3 - As3 - 动作脚本 3 中的“src”代表什么？

> ID：11118773
> 
> 赞同：0
> 
> 时间：2012-06-20T11:43:22.800
> 
> 标签：actionscript-3, flash

您能告诉我“ **@src** ”在动作脚本 3 中代表什么吗？例如在这段代码中：

```
var videoURL = this.videoInfo.@src.toString();
            if (videoURL && videoURL != "") {
                this.videoView.load(videoURL);
            } 
```

我在谷歌上找不到它；）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:46:32.310

`src`代表“来源”。我相信这个`@`符号只是意味着它`src`是 的一个属性`videoInfo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:51:08.970

从提供的代码位来看 - 看起来 src 是 XML 标记中的一个属性，它具有视频的路径/文件名。视频是从粘贴上述代码的 XML 应用程序加载的吗？

# c++ - 外籍异常处理

> ID：11118781
> 
> 赞同：3
> 
> 时间：2012-06-20T11:43:35.947
> 
> 标签：c++, expat-parser

我一直在努力弄清楚为什么 StartElement 事件处理程序抛出的异常没有被我的应用程序捕获，该应用程序使用 expat 解析器（在 C 中）。应用程序只是终止说它找不到 catch 块，尽管我有所有的 catch 块。只是因为异常是从我自己的事件处理程序中抛出的，所以 expat 的 XML_Parse API 无法将其传递给我拥有所有 catch 块的代码。一位名为“Michael Anderson”的stackoverflow用户建议使用必要的gcc标志重建expat lib以使expat lib处理异常。有人可以让我知道那些标志是什么吗？或者建议一种更好的方法来处理事件处理程序中的错误，例如起始元素、结束元素等

如果我在注册的事件处理程序中遇到任何异常，我希望 XML_Parse API 返回 0。请帮忙。提前致谢。

这是代码：

```
try 
{  
   if( ! XML_Parse(.....) )
   {
        throw exception;
   }
}
catch(...)
{
} 
```

在工作场景中，如果XML_Parse遇到格式错误的xml文件，它会立即返回零，我进入if块并抛出异常，并且它被很好地捕获。但是在有问题的情况下，异常是从事件处理程序中抛出的，但是我的应用程序转储了核心，并且核心堆栈说它找不到 catch 并最终调用 std::terminate 并中止。现在，当我想从事件处理程序中抛出用户定义的异常时，如何使 XML_Parse 返回零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T21:22:53.737

根据 expat.h，当您在处理程序中遇到需要中止解析的错误时，您应该调用 XML_StopParser(parser, 0)。

XML_Parse 然后将返回 XML_FALSE。此时，您可以调用特定于应用程序的错误处理

# ruby-on-rails - 同时创建和更新记录时 PUT 还是 POST？

> ID：11118783
> 
> 赞同：0
> 
> 时间：2012-06-20T11:43:48.443
> 
> 标签：ruby-on-rails, http, post, nested-attributes, put

我有一个移动应用程序可以访问运行 Rails 3.x 应用程序的服务器。数据以 JSON 格式交换。

我有一个相当复杂的问题，我将在这里尝试简化。

在一种情况下，移动应用程序向数据库发布一条新的**销售**记录，其中包括对现有**订单**记录的更新。为了通过单个 HTTP 请求实现这一点，它通过嵌套属性将**订单**记录属性更新作为新**销售记录的一部分传递。**

销售的 Rails 模型包括以下内容：

```
attr_accessible :product_id, :order_id, :order_attributes
accepts_nested_attributes_for :order, :update_only => true 
```

Rails 路由是标准的。

由于发布**销售**的 http 请求将创建一个新记录（即它不包括现有的 sale_id），所以我使用 HTTP POST。

我可以发布一个新的**销售**记录（没有**订单**记录更新）就好了。

但是，当我包含嵌套属性来更新**订单**记录时，我得到 404 'not found'。

我*怀疑*这是因为现有**订单**的嵌套更新包含一个“id”，因此实际上应该是一个 PUT（正确路由）。

为了帮助诊断问题，我尝试将现有的工作非嵌套**销售**POST （不包含 id）更改为 PUT 请求，在这种情况下，它确实破坏了功能，我得到了 404 . 这表明服务器确实会将 PUT/POST 混淆报告为 404。

需要明确的是，我可以在其他情况下使用相同的代码使用嵌套属性成功发布更新，所以我相信问题不是实际的属性编码。

我很感激关于这是否是问题的想法，如果是这样，我能做些什么。

谢谢你。

# javascript - Web 应用程序模块的单元测试

> ID：11118787
> 
> 赞同：0
> 
> 时间：2012-06-20T11:44:02.140
> 
> 标签：javascript, backbone.js, jasmine, backbone-routing

我正在使用[Backbone.Marionette为子应用模块编写茉莉花单元测试](https://github.com/derickbailey/backbone.marionette)

有人可以给我一些想法，测试什么？

要测试的模块如下所示。

```
/*global define*/
define([
    'app',
    'marionette',
    'tasks/views/list',
    'tasks/views/detailedLayout'
], function (app, Marionette, ListView, DetailedLayout) {
    "use strict";

    var taskApp = new Marionette.Application({

        tasks: function () {
            var listView = new ListView();
            app.mainColumn.show(listView);
        },

        taskDetail: function () {
            app.rightColumn.show(new DetailedLayout());
            this.tasks();
        }

    });

    return taskApp;
}); 
```

* * *

我会做这样的事情，但我不确定这是否合适：

```
 describe('Task App', function () {

        beforeEach(function () {
            this.app = taskApp;
        });

        describe('When loading the application', function () {

            it('should be defined the tasks function', function () {
                expect(typeof this.app.tasks).toBeDefined();
            });

            it('should be defined the taskDetail function', function () {
                expect(typeof this.app.taskDetail).toBeDefined();
            });
        }); 
```

* * *

```
//app.js

var App = new Marionette.Application();

App.addRegions({
    header: '#header',
    sidebar: '#sidebar',
    mainColumn: '#main-column',
    rightColumn: '#right-column'
});

return App; 
```

# visual-studio - 为负载测试生成每个测试样本数据？

> ID：11118792
> 
> 赞同：1
> 
> 时间：2012-06-20T11:44:07.693
> 
> 标签：visual-studio, visual-studio-2010, sharepoint-2010, tfsbuild, load-testing

我有一组负载测试，每个测试 Sharepoint 站点的特定部分。如何在每次测试之前自动生成样本数据？

我知道负载测试允许我指定在特定虚拟用户的测试组合之前/之后运行的测试，但这些测试适用于特定于用户的设置，例如登录。我想为*所有*用户创建示例数据。

我可以将我的设置代码放入 Team Build 模板中，但这并未考虑使用示例数据的测试是否在正在运行的测试列表中。如果我修改测试列表，我还需要修改构建模板。我也不能将设置代码放入在负载测试之前运行的测试中，因为在访问 Sharepoint 的 API 需要 3.5 时，负载测试必须使用 .Net 4.0 框架运行。

我可以用 Powershell 重写我的示例数据生成逻辑，并从 .Net 4.0 单元测试开始。这是我最好的选择还是有更优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:37:09.133

我认为您的问题比 SharePoint 更与 TeamBuild 相关。简而言之，在 SharePoint 中设置（和拆卸）测试数据的最佳方法是将 PoSh 与 Microsoft.PowerShell.SharePoint 管理单元结合使用。

您可以从 TeamBuild 中的 Everywhere 启动 PowerShell 脚本。这实际上就是我扩展默认 TeamBuild 模板的方式。我创建了一个自定义构建模板，该模板包含许多 PoSh 钩子。在设置新项目时，您可以轻松地将脚本挂接到您需要的任何地方。

要真正独立于任何 .NET FX 版本，您可以使用 REST DataServices (ListData.svc) 创建示例数据

# facebook - 如何从 facebook 上的 magento 获取新产品的 RSS 源？

> ID：11118799
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:44:21.613
> 
> 标签：facebook, magento, magento-1.6

我已从后端管理面板启用 RSS 提要，

在前端复制 url “www.mydomain.com/rss//catalog/new/store_id/1/”并将其粘贴到 facebook 应用程序涂鸦中以获取提要。

但是，即使添加了越来越多的产品，我得到的是唯一的一个产品提要。

我已经搜索了很多，但仍然张开双手寻求答案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-01T08:28:40.640

我想让您知道，不支持 RSS Feed，但确实支持 CSV。在链接中：[https](https://www.facebook.com/business/a/online-sales/dynamic-product-ads?__mref=message_bubble) ://www.facebook.com/business/a/online-sales/dynamic-product-ads?__mref=message_bubble 它向您展示了如何使用 CSV 文件样本创建它。

# java - 爪哇。远程服务器返回 503 错误页面，其中包含一些文本。如何获取此文本？

> ID：11118806
> 
> 赞同：0
> 
> 时间：2012-06-20T11:44:50.517
> 
> 标签：java, http, connection, request, inputstream

以下服务器错误：

> 如果发生错误，将返回 HTTP 状态码 503（服务不可用）。MIME 类型将根据请求中指定的格式参数进行设置。返回页面的正文将包含字符串“Error:”，后跟一个包含更多详细信息的字符串。如果请求了 XHTML，则此消息将出现在文档中某处
> 
> 元素。如果请求纯文本，它将出现在文档的第一行。

因此，我发送带有错误参数的请求-> 服务器返回错误 503 和页面，其中包含描述问题所在的文本。

我使用下面的java代码：

```
static BufferedReader getReader(String urlString) throws IOException {

        HttpURLConnection connection;
        BufferedReader reader = null;
        URL url = new URL(urlString);

        connection = (HttpURLConnection) url.openConnection();

        reader = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        System.out.println(urlString);

        return reader;
    } 
```

当服务器返回 503 - java 抛出异常。但是，我怎样才能得到文本，服务器返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:48:10.880

类的用途`getResponseCode()`和`getResponseMessage()`方法`HttpURLConnection`。

在构建连接对象之后但在从连接获取流之前调用它们。

# jquery - Jquery加载html页面并沿路径发送数据

> ID：11118808
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:00.940
> 
> 标签：jquery

谁能告诉我，当我使用加载函数和目标 url 发送数据时，如何在 jquery 中检索数据。那么如何检索 person.html 中的数据变量...

代码：

```
data="name";
$("div").load("person.html",data); 
```

另一个是任何人都可以告诉我当我点击它时如何更改列表名称上的图标，假设我有`->ITEMS 1)item1 2)item2 3)item3`

假设如果我点击项目，箭头（->）应该像（<-）这样改变，项目应该分散..

这个有什么插件可以用吗。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:53:36.177

为了使用数据，您需要有一个可以从请求中检索数据的页面。例如，如果它是一个 php 文件：

JS：

```
$('div').load('person.php', {'first_name': 'John', 'last_name': 'Doe'}); 
```

PHP：

```
Your name is: <?php echo $_GET['first_name']; ?> <?php echo $_GET['last_name']; ?> 
```

# android - 为单个列表视图设置多个适配器

> ID：11118809
> 
> 赞同：5
> 
> 时间：2012-06-20T11:45:07.443
> 
> 标签：android, android-listview, adapter

是否可以为一个列表设置多个适配器？

例如

*   `list.setAdapter(adapter1);`

*   `list.setAdapter(adapter2);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:49:56.840

也许您可以尝试将多个适配器连接到单个适配器，如下所示

[android将多个适配器附加到一个适配器](https://stackoverflow.com/questions/7964259/android-attaching-multiple-adapters-to-one-adapter)

或者也许这个 [http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

如果我正确理解您的需要

请更新您想要它的原因，以便我们更好地理解

# image - 为列表图像使用精灵

> ID：11118810
> 
> 赞同：1
> 
> 时间：2012-06-20T11:45:14.187
> 
> 标签：image, list, background, sprite

我想将精灵用于列表背景图像。我见过一些这样做的方法，但它们都需要为每个列表项设置高度和/或宽度。我拥有的每个列表项的尺寸都会不同，所以我无法设置。

理想情况下，我希望能够设置一个精灵图像，然后选择仅显示其中的一部分，例如在左上角 50 像素 x 50 像素，但我希望列表元素的内容能够是任何高度和宽度。我还试图确保精灵图像与旁边的列表文本相比始终保持居中。

有任何想法吗？

# sql-server-2008 - 是否可以从 SQL Server 2008 导出数据库并将其导入 SQL Server 2005？

> ID：11118817
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:30.500
> 
> 标签：sql-server-2008, sql-server-2005, database-backups

我需要将数据库从 SQL Server 2008 移动到 2005，备份格式是否已更改，或者我可以在 SQL Server 2005 中导入导出的数据库吗？

该数据库具有表、视图和存储过程，并且没有使用任何 2008 特定功能。

如果不可能，`SQL-Server 2005 (90)`在这种情况下设置兼容模式会有所帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:58:41.063

在 SSMS 中选择您的数据库，右键单击，选择任务，选择生成脚本。在弹出的对话框中，启用所有选项，包括脚本数据，并确保选择“Script for SQL Server 2005”。在您的 SQL Server 2005 机器上执行生成的脚本。当然，这仅适用于相对较小的数据库。否则，您必须通过 bcp 导出/导入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:06:48.447

您将无法执行此操作 - 备份文件包含版本号，SQL 2005 将拒绝恢复备份。同样，您将无法分离和重新附加原始数据文件。

除了将 SQL 2005 升级到 2008 之外，您唯一的选择是使用 SSMS 生成脚本的能力导出 SQL 模式和存储过程，然后使用（例如）BCP 或 SSIS 包迁移数据。

将会有第三方工具可以帮助解决其中的一些问题（例如，Redgate 的 SQL 比较和 SQL 数据比较的组合）。但是，这是您必须研究的事情。

# z3 - 由于缺少 buddy/fdd.h 和 buddy/bdd.h，z3-4.0 中的定点示例不起作用

> ID：11118820
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:47.053
> 
> 标签：z3

我想在 z3 的定点（路径 Z3-4.0/examples/fixedpoints）中尝试该示例，但由于缺少 buddy/fdd.h 和 buddy/bdd.h（在 bdd_table.h 中定义），源文件不可编译。各位大佬能告诉我在哪里可以找到这些文件吗？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:22:57.460

是的，BuDDy 不是我们开发的。它是由 Jorn Lind 创建的。您可以从以下网址下载 BuDDy：http: [//sourceforge.net/projects/buddy/](http://sourceforge.net/projects/buddy/)

# makefile - 制定目标，取消目标？

> ID：11118822
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:49.693
> 
> 标签：makefile, rollback

由于 make 知道创建目标的所有依赖项，因此它（几乎）知道所有中间工件。是否有可以“回滚”或“取消”目标的制作版本？

（我知道它会删除由隐式规则创建的目标）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:00:00.790

大多数 Makefile 提供了`clean`目标，该目标会删除所有生成的文件。此外，`autoconf`-systems`automake`提供`distclean`，它也会删除由`configure`.

然而，这些不是自动目标；makefile 生成系统将生成的文件列表提供给`make`. 通常，`make`它不会跟踪它生成了哪些文件，因此它无法区分真正的源文件（它们是依赖项）和中间文件（它们也是依赖项）。甚至依赖图的叶子节点也不能用于区分，因为戳文件通常也没有依赖关系。

# java - java - 如何在java中的CRC16 modbus计算中传递长度？

> ID：11118824
> 
> 赞同：1
> 
> 时间：2012-06-20T11:45:51.393
> 
> 标签：java, crc

java - 如何在java中的CRC16 modbus计算中传递长度？

我在链接中找到了以下方法：

[http://www.codeproject.com/Articles/19214/CRC-16-Calculation](http://www.codeproject.com/Articles/19214/CRC-16-Calculation)

如何在第二个参数中传递长度值。

```
public int crc16(byte[] modbusframe,int Length)
 {
    int i;
    int index;
    int crc_Low = 0xFF;
    int crc_High = 0xFF;

    for (i = 0; i<Length; i++ )
    {
         index = crc_High ^ (char)modbusframe[i];
         crc_High = crc_Low ^ crc_table[index];
         crc_Low = (byte)crc_table[index+ 256];                             
    }

    return crc_High*256+crc_Low;        
 } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:08:23.430

初始化变量数组**modbusframe**的数量。

```
modbus_bytes[**0**]=device_address;
modbus_bytes[**1**]=data_type;
modbus_bytes[**2**]=(byte)start_address_higer;
modbus_bytes[**3**]=(byte)start_address_lower;
modbus_bytes[**4**]=0x00;
modbus_bytes[**5**]=length;

int crc_result=CRC.crc16(modbus_bytes,**6**); 
```

# javascript - extjs 4：如何将按钮添加到任何自定义表单

> ID：11118825
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:51.717
> 
> 标签：javascript, extjs

我目前正在尝试添加一个自定义按钮，当用户想要使用 EXTJS 4 添加新按钮时，该按钮将能够调用。

这是我想用来创建按钮的 TimeButton.js 文件

```
Ext.namespace("Ext.controls");

Ext.create('Ext.Button', {
text: 'Time',
renderTo: Ext.getBody(),
handler: function() {
    alert('The current time is '+Date())
}
});

Ext.reg('timebutton', Ext.controls.TimeButton); 
```

但是当我尝试将它添加到任何形式时，我会收到以下错误

```
types[config.xtype || defaultType] is not a constructor 
```

或者做这样的事情会更好吗

```
Ext.controls.TimeButton = Ext.extend(Ext.Panel,  {

initComponent: function(){

    Ext.apply(this, {                     
            frame: true
            ,height: 330    
            ,layout: 'border'
            ,layout: 'column'
            ,split: true
            ,cls: 'DocumentWindow'
            ,items: []

    }); 

    this.documentGrid = new Ext.controls.DocumentGrid({height: 220,
                agentId : this.agentId,
                columnWidth: 0.5})

    Ext.controls.DocumentPanel.superclass.initComponent.apply(this, arguments);

} 
```

据我了解，当尝试实例化（创建）一个不存在的组件时会发生这种情况，但我看不到错误可能在哪里！我发布的代码有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:08:51.740

`xtype`将您的按钮定义为一个类，通过提供属性注册它以供使用，`alias`并在父`items`容器中实例化它。[这](http://jsfiddle.net/o_nix/9BpTn/)是一个例子。

# android - 在 NotifyDataSetChanged 数组适配器期间 UI 冻结

> ID：11118826
> 
> 赞同：0
> 
> 时间：2012-06-20T11:45:51.937
> 
> 标签：android, listview, dialog, adapter

我正在从 facebook 搜索一些页面，然后下载他们的图片。我想在我的列表中立即查看它们，并在每次下载新图片时更新适配器。我在另一个活动中使用相同的方法并且它有效，但在这里我使用一个对话框，它冻结我的 UI 直到一切都完成，即使我在后台执行它。为什么？

```
private synchronized void getUserLikesImages() {AsyncTask<Void, Void, Bitmap> task = new AsyncTask<Void, Void, Bitmap>() {

        @Override
        public Bitmap doInBackground(Void... params) {
        for(...){
               //download one picture...
               FacebookeventsActivity.this.runOnUiThread(new Runnable() {
               public void run() {
                        pagesILikeArrayAdapter.notifyDataSetChanged();
               }
            });

        }
      };
   task.execute();
   } 
```

它可以工作，但是 UI 一直冻结到操作结束...我认为这可能是因为我的列表在一个对话框中并且我在 UIThread 上运行它，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:47:51.970

```
@Override
        public Bitmap doInBackground(Void... params) {
for(...){
//download one picture...

  }
 };

@Override
onPostExecute()
{
 pagesILikeArrayAdapter.notifyDataSetChanged();
} 
```

只需`onPostExecute()`从中添加并通知适配器..或者只是添加`onProgreesUpdate()`方法并定期`publishProgress()`从`doInBackGround()` 通知适配器中使用..

# android - Android 应用程序可以在 Nexus S 上写入数据，但不能在“/sdcard/filename”路径上的三星 S2 上写入数据？

> ID：11118830
> 
> 赞同：0
> 
> 时间：2012-06-20T11:46:21.140
> 
> 标签：android, android-sdcard

1.  我已给予必要的许可： `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`
2.  将路径硬编码为`"/sdcard/filename"`.

我猜 Nexus 没有外部 SD 支持，但 S2 有，我认为这可能会导致获取路径出现问题。我该如何优雅地处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T11:49:35.587

在每个 Android 设备上，您都可以像这样获取外部存储的路径

```
Environment.getExternalStorageDirectory() 
```

我有一个 Nexus 设备，它可以工作——也在我的旧里程碑上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:59:51.893

**这是创建自己的应用程序目录的示例用法：**

您应始终检查 SD 卡是否可用，因为它可以安装/连接到计算机或从设备中移除。

```
private void SetDirectory() {
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {

            extStorageDirectory = Environment.getExternalStorageDirectory().toString();
            File dbDirectory = new File(extStorageDirectory + "/yourAppName/whatever/");
            myDirectory.mkdirs();// Have the object build the directory

        } else if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED_READ_ONLY)) {

            //TODO Make some kind of allert or Toast to warn/notify the user that the SDcard is needed.
        }

    } 
```

您可以使用该`android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)`方法检查该卡是否在您的应用程序中的任何位置可用。

# iphone - iOS：以caf以外的其他格式录制音频

> ID：11118836
> 
> 赞同：2
> 
> 时间：2012-06-20T11:46:42.517
> 
> 标签：iphone, ios, audio-recording, caf

我正在做录音。我能够以 caf（核心音频格式）录制我的音频。现在我想在`.mp3`or中录制声音`.amr`。

我尝试了很多谷歌但没有找到任何东西。我不确定我的以下步骤是否有效：

> `.caf`将带有扩展名的音频写入文档目录
> 
> 从该文件中读取数据
> 
> 再次写入文件`.mp3 or .amr extention`

我 100% 怀疑这不会起作用，因为这只会用其他扩展名重新保存文件。这不会改变音频编解码器。

我认为要转换任何格式，无论是音频还是视频，我们都需要更改其编解码器和数据序列。

还请建议我任何不播放`.caf`文件的播放器。所以我可以确保我的文件转换成功。

**更新**还请让我知道，我用不同的扩展名重写数据的方式在我需要的方式上是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:54:13.903

您可能对[iPhoneExtAudioFileConvertTest](http://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/)示例感兴趣。
但是由于专利，该`MP3`格式不可用，也许您可​​以使用[LAME](http://lame.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:49:30.030

来自文档[基础知识：音频编解码器、支持的音频格式和音频会话](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6)

# spring-mvc - 如何在 Jetty 中启用 PUT 方法？

> ID：11118839
> 
> 赞同：2
> 
> 时间：2012-06-20T11:46:52.063
> 
> 标签：spring-mvc, backbone.js, jetty

我正在开发一个 Spring REST / Backbone 应用程序。

虽然 GET 效果很好，但我在使用 PUT 时遇到了问题（可能与 DELETE 相同）。

我的 Spring 控制器有以下方法：

```
@RequestMapping(value="/{id}", method = RequestMethod.PUT)
public void putItem( @PathVariable("id") String id, @RequestBody Item item) {...} 
```

但是当我尝试保存 Backbone 模型时，出现以下错误：

```
405 (HTTP method PUT is not supported by this URL) 
```

GET 映射在同一个控制器类中并使用相同的 url 注释（类级别）。

我的注释正确吗？我正在使用 Jetty 作为服务器，我是否需要以某种方式对其进行配置以允许 PUT 请求？

编辑：

假设这是一个 Jetty 配置问题，我将以下内容添加到 webdefault.xml

```
<web-resource-collection>
  <url-pattern>*.do</url-pattern>
  <http-method>GET</http-method>
  <http-method>HEAD</http-method>
  <http-method>PUT</http-method>
  <http-method>POST</http-method>
</web-resource-collection> 
```

在`<security-constraint>`定义里面。它的效果是现在 GET 方法返回 403 (Forbidden) - 所以就好像这个定义确实只是限制安全性而不是使它更自由的手段。我还尝试删除 GET 和 PUT 行，但它对我的原始 405 错误没有影响（当然它确实使 GET 再次工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:37:12.427

You need to make sure that GET POST PUT and DELETE verbs are enabled on the server. Your problem is not client side, so if you have access to server settings just make sure the above verbs are enabled. I am not familiar with jetty, but it looks as though it is not supported out of the box and would require some sort of your own handler. Here is the resource that I found after doing a quick search -> [JETTY - PUT DELETE](http://comments.gmane.org/gmane.comp.java.jetty.support/14965)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:51:05.260

我终于发现问题出在 *.do 模式上。

Backbone 在路径变量之前添加了 .do，因此它不起作用。我完全摆脱了后缀，现在它可以工作了！

# php - 在 PHP 中使用表单输入来填充嵌套对象

> ID：11118840
> 
> 赞同：0
> 
> 时间：2012-06-20T11:46:56.153
> 
> 标签：php, arrays, forms, variables

我正在尝试处理表单的提交结果，其中包含许多员工的数据。表单输入的名称类似于“employees[1]_firstName”，需要映射到 PHP 变量 $companydata->employees[1]->firstName

填充 $_POST 数组时，PHP 看到方括号，并尝试创建一个多维数组，但出错了（忽略左括号后的所有内容）

这复制了 $_POST 但没有损坏的数组键：请注意，我已经取出了一个 foreach 循环来简化问题。

```
$post_data = explode('&', file_get_contents("php://input"));
// Result: $post_data = array('employees%5B1%5D_firstName=Timothy'

list($key, $value) = explode('=', $post_data[0]);
$key = urldecode($key);
$value = urldecode($value);
// Result: $key = 'employees[1]_firstName',  $value = 'Timothy' 
```

但是，当我尝试使用可变变量时出现问题：

```
$post_key_parts = explode('_', $key);
// Result: $post_key_parts = array([0] => 'employees[1]', [1] => 'firstName')

$Companydata->$post_key_parts[0]->$post_key_parts[1] = $value;
// Expected result: Element [0] in array $employees => 'Timothy' 
```

实际结果是名称中带有方括号的变量'$employees[0]'，并且$employees 数组没有变化。在 {$post_key_parts[0]} 周围加上大括号并没有帮助。

我正在尝试找到一个灵活的解决方案，该解决方案也适用于不同长度的名称，例如：employees[0]_address_lines[2] 或 employees[0]_addresses[1]_postcode

我很高兴避免变量变量的罪恶，但我想不出一种优雅的方式来使用正则表达式或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:04:30.543

我建议您更改输入的名称。利用 PHP 的内置功能。`[]`为您创建一个数组，然后使用数组，因为您打算使用它们。

我有同样的问题并想出了这个：

```
//HTML part
<input name="employee_firstName[]">
<input name="employee_address[]">

//PHP part
<?php
$info = array("firstName", "address")
foreach ($info as $i) {
    foreach ($_POST["employee_".$i] as $k => $v) {
        $companydata->employees[$k]->$i = $v;
    }
}
?> 
```

**注意**我不认为你可以为之类的事情做到这一点`employees[0]_address_lines[2]`。或者也许尝试`employees[0][address_line][]`将它用作数组，但我不确定它是否有效。

# foursquare - 那么，您不允许从foursquare 的Venue Platform 复制数据吗？

> ID：11118844
> 
> 赞同：2
> 
> 时间：2012-06-20T11:47:19.457
> 
> 标签：foursquare

我正在阅读foursquare Venue Platform 的API 政策。

“您不得使用 API 向数据库中添加新地点或更改数据库中地点的位置详细信息。”

它向我提出了两个问题： 1\. 如果一个人将新地点等添加到他/她自己的数据库中，他们怎么知道？

1.  我听说foursquare（曾经）使用google maps api来检索位置信息，这是否意味着使用Google Map的数据来创建自己的基本数据库是可行的？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:56:44.847

基本上他们是在告诉您——您可以使用我们的 API 和数据库来创建出色的应用程序，但不要窃取我们的专有技术（数据库副本）。他们可能不会发现您是否复制了其中的几个，但是说​​-您根据完全复制的数据库创建了一家初创公司，然后他们可以起诉您并给您带来麻烦....

有关 Google 的使用，请参阅[此处](https://developers.google.com/maps/terms)的 Google 政策。

# javascript - javascript：严格模式和对象

> ID：11118845
> 
> 赞同：0
> 
> 时间：2012-06-20T11:47:21.513
> 
> 标签：javascript, object

我有一些构建对象的代码：

```
function gridObjConst(id, itemName, itemPrice, itemListPrice, width, height, imgName) {

    this.id = id;
    this.itemName = itemName;
    this.itemPrice = itemPrice;
    this.itemListPrice = itemListPrice;
    this.width = width; 
    this.height = height; 
    this.imgName = imgName;

    return this;
} 
```

我使用 w3schools 页面作为指南：[http ://www.w3schools.com/js/js_objects.asp](http://www.w3schools.com/js/js_objects.asp)

一切都很好。然后我在代码顶部添加了“use strict”，这个函数就坏了。Firebug 报告：这是未定义的 - this.id = id

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:52:11.250

这意味着您在没有`new`运算符的情况下调用构造函数。你需要这样做：

```
var myGridObjConst = new gridObjConst(); 
```

当您在没有`new`运算符的情况下调用该函数时，`this`指的是 Window，但在严格模式下它[不是](https://developer.mozilla.org/en/JavaScript/Strict_mode#.22Securing.22_JavaScript)，因此您的错误。

另请注意，您不需要`return this;`使用构造函数。`this`会自动退回。

* * *

正如@JoachimSauer 所指出的，在学习 JavaScript 时，您应该考虑使用 MDN 而不是 W3Schools。在您链接到的页面上的任何地方都没有提到原型，这一事实绝对是荒谬的。

# android - Android Apk 未在 Google Play 上发布

> ID：11118846
> 
> 赞同：0
> 
> 时间：2012-06-20T11:47:22.777
> 
> 标签：android, certificate, apk, uploading

我已经开发了 android 应用程序并导出为 APK 文件以在 google play 上发布。问题是当我尝试上传 apk 文件时出现“错误 `"The certificate that signed this apk is not valid until the future. Create a new certificate.`”

并且 Apk dnt 被上传，请任何人帮助我或告诉我问题出在哪里，我已将其导出为 apk 文件，它的证书信息是 eclips 中要求的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:50:04.093

我想你把你机器上的时间设置错了。也许比谷歌服务器早了一段时间。

看一下这个，

[我的窗户里的时间提前了 3 小时](http://www.basic4ppc.com/forum/basic4android-updates-questions/12175-cant-upload-apk-android-market.html)

[这也证明了](http://productforums.google.com/forum/#!category-topic/android-market/technical-help/2MEmWsP3j2E)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:51:30.203

证书可能有问题。证书指南可让您创建一个有效期为多年的证书，建议至少制作 25 年。仔细检查您是否确保这是正确的。

或者

尝试将您的系统时间向后移动一天并签署您的应用程序，应该是一个公平的解决方法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:49:10.440

您需要生成有效的证书。请参阅以下链接以签署您的应用程序以进行发布：

[应用签名和发布模式](http://developer.android.com/guide/publishing/app-signing.html#releasemode)

# java - 在我刚刚检索到的对象上休眠 StaleObjectStateException

> ID：11118847
> 
> 赞同：1
> 
> 时间：2012-06-20T11:47:27.957
> 
> 标签：java, hibernate

在我的部分代码中，我通过 Hibernate 从数据库中获取一个对象，更改一个字段并提交更改

```
 session = HibernateUtil.beginTransaction();
    Song song =SongCache.loadSongFromDatabase(session, songId);
    song.setLastModified(new Date(new File(song.getFilename()).lastModified() + 1));
    session.saveOrUpdate(song);
    session.getTransaction().commit(); 
```

歌曲类定义为，我也使用 Hibernate Envers 并且歌曲被审计

```
/**
 * A Song (or sound recording)
 */
@Audited
@Entity
public class Song
{
    @Id
    @GeneratedValue
    private Integer recNo;

    @Version
    private int version;

    @Basic
    private String filename;

    /**
     * Last Modified Date
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date lastModified;

    public Song(String file)
    {
        this.setFilename(file);
    }

    public Song()
    {

    }

    @Column(length = 1000)
    private String album;
  ......
} 
```

但有时我得到一个 StaleObjectStateException，我无法理解这是怎么发生的

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.jthink.songlayer.Song#1]
    at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:2359)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3010)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2908)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3237)
    at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:113)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:264)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:187)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:315)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at com.jthink.buzikmusik.analyse.analyser.SongSaver.saveSongToFile(SongSaver.java:286)
    at com.jthink.buzikmusik.analyse.analyser.SongSaver.saveChanges(SongSaver.java:75)
    at com.jthink.buzikmusik.analyse.analyser.SongSaver.call(SongSaver.java:70)
    at com.jthink.buzikmusik.analyse.analyser.SongSaver.call(SongSaver.java:45)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:18:46.353

我总是关闭会话，但是在 finally() 块中，这可能是在我将同一首歌曲的任务提交给另一个执行器服务之后。因此，如果此任务在第一个任务中的 finally block() 之前启动，则可能会出现问题，这就是问题所在。

# r - 删除函数内 data.table 的列

> ID：11118850
> 
> 赞同：6
> 
> 时间：2012-06-20T11:47:38.677
> 
> 标签：r, dataframe, data.table

我有以下示例：

```
irisDT <- as.data.table(iris)

mod <- function(dat) {
  dat[, index:=(1:nrow(dat))]
  setkey(dat, index)

  dat <- dat[2:10]

  dat[, index:=NULL]
  invisible()
}

mod(irisDT)
names(irisDT) # it contains index 
```

`mod()` 令我惊讶的是，调用函数后索引列仍然存在。当我删除该行时，情况并非如此`dat <- dat[2:10]`。我猜想，由于还不能通过引用删除行，因此创建了另一个 data.table。但是，我想删除原始data.table中的索引列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:50:02.503

好问题。 以通常的 R 方式由 更改`data.table` **时**复制。`<-`

它不是由包提供`:=`的`set*`功能（`setkey`, `setnames`, `setattr`）在更改时复制的。`data.table`

因此，决定副本与否的对象本身并没有什么特别之处`data.table`，它作为参数传递给函数，其方式与`data.frame`. 重要的是您在函数内部对其执行的操作。操作员在更改时复制，`<-`在`data.table`. `:=`另一方面，操作员通过引用进行分配。

正如您所说，（还）无法通过引用删除行，因此在此之前您需要使用标准 R 语法将副本分配回调用范围内的符号。

碰巧的是，昨晚的 LondonR 演讲中有一张幻灯片，现在在[主页](http://datatable.r-forge.r-project.org/)上的演示部分下（请参阅带有标题的幻灯片`copy()`）。

# oracle - SQL Plus 在不需要时修剪尾随空格

> ID：11118859
> 
> 赞同：2
> 
> 时间：2012-06-20T11:48:06.040
> 
> 标签：oracle, sqlplus

我将我的 pl/sql 代码写在一个文件中：

```
create or replace proc p1 as
begin
  null; <here i have lots of trailing spaces>
end;
/ 
```

当我在 sqlplus 中执行脚本时，过程 p1 不包括第 4 行中的空格。

我怎样才能保留这些空间？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:09:39.877

尝试：

```
set trim off
set trims off 
```

# ruby - 如何使用 Sinatra 从不同目录渲染模板和布局

> ID：11118871
> 
> 赞同：1
> 
> 时间：2012-06-20T11:48:58.753
> 
> 标签：ruby, sinatra, haml

我想将模板文件放在不同的目录中。(foo/, 酒吧/)

你如何使用 Sinatra 编写代码？

![图片](../Images/600391c00f20d509b29cf27a022c2877.png)

这种方式会出错。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T11:57:59.933

从[文档](http://www.sinatrarb.com/configuration.html)中：

```
set :views, Proc.new { File.join(root, "templates") } 
```

如果您想使用多个目录（也来自文档）：

```
set :views, ['views', 'templates']

helpers do
  def find_template(views, name, engine, &block)
    Array(views).each { |v| super(v, name, engine, &block) }
  end
end 
```

顺便说一句，您需要使用符号而不是字符串来引用模板。所以完整的代码是：

```
require 'rubygems'
require 'sinatra'
require 'haml'

set :views, ['foo', 'bar']

helpers do
  def find_template(views, name, engine, &block)
    Array(views).each { |v| super(v, name, engine, &block) }
  end
end

get '/' do
  haml :index, :layout => :bar
end 
```

你有这些文件：

```
foo/index.haml
bar/bar.haml 
```

# android - 如何使用消息功能（如 Android 中的短信）阻止应用程序

> ID：11118879
> 
> 赞同：0
> 
> 时间：2012-06-20T11:49:19.240
> 
> 标签：android

嗨，我想写一个应用程序，可以防止其他应用程序使用 android 手机的短信功能。这意味着除了安卓手机的短信功能，没有安装在手机上的应用程序可以发送短信。这怎么可能实现。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:51:46.523

幸运的是，这是不可能的，除非通过自定义固件。任何拥有该`SEND_SMS`权限的应用程序都非常欢迎用于`SmsManager`发送短信。

# scala - Scala 的`doto`

> ID：11118881
> 
> 赞同：11
> 
> 时间：2012-06-20T11:49:27.883
> 
> 标签：scala

Clojure 提供了一个宏调用`doto`，它接受它的参数和一个函数列表，并在本质上调用每个函数，前置（评估的）参数：

```
(doto (new java.util.HashMap) (.put "a" 1) (.put "b" 2))
-> {a=1, b=2} 
```

有没有办法在 Scala 中实现类似的东西？我设想具有以下形式的东西：

```
val something =
  doto(Something.getInstance) {
    x()
    y()
    z()
  } 
```

这将相当于

```
val something = Something.getInstance
something.x()
something.y()
something.z() 
```

可以使用`scala.util.DynamicVariable`s吗？

请注意，对于工厂方法，例如`Something.getInstance`，不可能使用常见的 Scala 模式

```
val something =
  new Something {
    x()
    y()
    z()
  } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T12:13:10.913

我认为库中没有内置这样的东西，但你可以很容易地模仿它：

```
def doto[A](target: A)(calls: (A => A)*) =
  calls.foldLeft(target) {case (res, f) => f(res)} 
```

用法：

```
scala> doto(Map.empty[String, Int])(_ + ("a" -> 1), _ + ("b" ->2))
res0: Map[String,Int] = Map(a -> 1, b -> 2)

scala> doto(Map.empty[String, Int])(List(_ + ("a" -> 1), _ - "a", _ + ("b" -> 2)))
res10: Map[String,Int] = Map(b -> 2) 
```

当然，只要您的函数返回正确的类型，它就可以工作。在您的情况下，如果该函数只有副作用（不是那么“scalaish”），您可以更改`doto`和使用`foreach`，而不是`foldLeft`：

```
def doto[A](target: A)(calls: (A => Unit)*) =
  calls foreach {_(target)} 
```

用法：

```
scala> import collection.mutable.{Map => M}
import collection.mutable.{Map=>M}

scala> val x = M.empty[String, Int]
x: scala.collection.mutable.Map[String,Int] = Map()

scala> doto(x)(_ += ("a" -> 1), _ += ("a" -> 2))

scala> x
res16: scala.collection.mutable.Map[String,Int] = Map(a -> 2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T13:36:17.733

在 Scala 中，执行此操作的“典型”方法是链接“tap”或“pipe”方法。这些不在标准库中，但经常这样定义：

```
implicit class PipeAndTap[A](a: A) {
  def |>[B](f: A => B): B = f(a)
  def tap[B](f: A => B): A = { f(a); a }
} 
```

然后你会

```
(new java.util.HashMap[String,Int]) tap (_.put("a",1)) tap (_.put("b",2)) 
```

这不像 Clojure 版本那样紧凑（或像 Scala 那样紧凑），但它几乎与可能得到的规范一样接近。

^(（注意：如果您想最小化添加这些方法的运行时开销，您可以制作`a`a`private val`并拥有`PipeAndTap`extend `AnyVal`；那么这将是一个“值类”，只有在您需要传递对象时才会转换为真正的类; 仅仅调用一个方法实际上并不需要创建类。）)

^(（第二点：在旧版本的 Scala 中，`implicit class`不存在。您必须单独编写`implicit def`将泛型转换为`a`的类和 an `PipeAndTap`。）)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T12:01:22.123

我认为，最接近的是在范围内导入此对象的成员：

```
val something = ...
import something._

x()
y()
z() 
```

在这篇文章中，您可以找到另一个示例（在“关于理论基础的小更新”部分）：

[http://hacking-scala.posterous.com/side-effecting-without-braces](http://hacking-scala.posterous.com/side-effecting-without-braces)

* * *

这种方法还有一个小优势 - 您可以导入单个成员并重命名它们：

```
import something.{x, y => doProcessing} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T12:15:23.560

我猜更简单：

```
val hm = Map [String, Int] () + ("a"-> 1) + ("b"-> 2) 
```

您的样品

```
val something =
  doto (Something.getInstance) {
    x()
    y()
    z()
  } 
```

看起来不是很实用，因为 - 结果是什么？我假设你有副作用。

```
Something.x().y().z() 
```

如果每次调用都产生下一个函数可以作用的类型，则可能是一种方法。

```
z(y(x(Something))) 
```

另一种产生结果。

还有一种`andThen`方法可以链接集合上的方法调用，您可能想看看。

对于您的地图示例，左折叠是另一种方法：

```
val hm = Map [String, Int] () + ("a"-> 1) + ("b"-> 2) 

val l = List (("a", 8), ("b", 7), ("c", 9))
(hm /: l)(_ + _)
// res8: scala.collection.immutable.Map[String,Int] = Map(a -> 8, b -> 7, c -> 9) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T16:50:50.410

好吧，我可以想到两种方法：将字符串作为参数传递，让宏更改字符串并编译它，或者简单地导入方法。如果 Scala 有无类型的宏，也许它们也可以使用——因为它没有它们，我不打算推​​测它。

无论如何，我将把宏观替代方案留给其他人。导入方法相当简单：

```
val map = collection.mutable.Map[String, Int]()
locally {
  import map._
  put("a", 1)
  put("b", 2)
} 
```

请注意，除了限制导入`locally`成员的范围外，它不会做任何事情。`map`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T18:38:38.907

链接多个动作的一种非常基本的方法是函数组合：

```
val f:Map[Int,String]=>Map[Int,String] = _ + (1 -> "x")
val g:Map[Int,String]=>Map[Int,String] = _ + (2 -> "y")
val h:Map[Int,String]=>Map[Int,String] = _ + (3 -> "z")

(h compose g compose f)(Map(42->"a"))
// Map[Int,String] = Map((42,a), (1,x), (2,y), (3,z)) 
```

但是，在这种情况下，它不是很实用，因为无法轻易推断出函数的类型......

# assembly - 如何关闭 LLVM 的集成汇编器？

> ID：11118887
> 
> 赞同：18
> 
> 时间：2012-06-20T11:49:40.693
> 
> 标签：assembly, llvm, clang

我有一个涉及手写汇编的项目——AT&T 语法，在 GCC 上工作得很好，但不是我做的，而且我对汇编知之甚少——在尝试用 Clang 构建它时出现了一个奇怪的问题。

LLVM 文档[提到](http://clang.llvm.org/compatibility.html#inline-asm)“大多数 X86 目标”使用 LLVM 的集成汇编器而不是系统汇编器；作为一种可能的解决方法，我想明确使用后者。我（好吧，谷歌）还没有成功地找到有关如何做到这一点的信息。

**问题：**有没有办法要求或者更确切地说是强制 Clang / LLVM 使用系统汇编器而不是集成的？

（我知道我总是可以去阅读 The Source™，但我想知道是否有记录在案的方法。）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-20T12:26:01.820

原来我在手册页中完全错过了这一点：

> `-integrated-as` `-no-integrated-as`
> 
> 用于分别启用和禁用集成汇编程序的使用。默认情况下是否打开集成汇编器取决于目标。

要在编译器调用时禁用它：

```
clang -no-integrated-as -c foo.c 
```

或者：

```
export CC="clang -no-integrated-as"
make 
```

# asp.net - 如何订阅html表单的点击事件？

> ID：11118890
> 
> 赞同：1
> 
> 时间：2012-06-20T11:49:47.990
> 
> 标签：asp.net, html, asp.net-4.0, google-checkout

我有一个谷歌结帐“立即购买”按钮，我想添加动态创建的信息以在点击时发送。我怎么做？

该按钮的html是：

```
<form action="https://sandbox.google.com/checkout/..." id="Form1" method="post" name="..." target="_top">
<input name="item_name_1" type="hidden" value="..." />
...
<input alt="" src="https://sandbox.google.com/checkout/buttons/buy.gif?merchant_id=..." type="image" />
</form> 
```

那么我要添加什么？（如果可能的话，我想通过 ASP.Net 代码来做到这一点。）

我尝试添加`onclick="Button1_Click"`，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:59:06.710

如果这是用于 Google Checkout，您应该考虑使用现有的[.Net 库用于 Google Checkout](https://developers.google.com/checkout/samplecode)。

[虽然上述建议可行，但此处记录](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API#create_checkout_cart)了正确（安全）的这样做方式。XML 替代方案（签名）在[此处](https://developers.google.com/checkout/developer/Google_Checkout_XML_API#create_checkout_cart)，其中之一允许您以安全的方式直接向 Google 发送 FORM POST。

通过客户端方法提交总是会使您容易受到篡改 - 它与仅向 Google 发布基本的 HTML 表单相比几乎没有什么区别（安全方面）。

* * *

**更新**：

> ...*不支持立即购买*...

归根结底，有两点使“立即购买”与任何其他“购物车”提交不同：

1.  图片
2.  立即购买的单件商品购买（相对于其他实施方式的一项或多项）。

[请参阅.Net 库中的](http://code.google.com/p/google-checkout-dotnet-sample-code/source/browse/examples/post_cart/simple.aspx)此示例代码。它应该给你所有你需要的......

* * *

**更新 2**：

图书馆没有任何“僵化”的地方。您不必使用其中的所有内容 - 您甚至可以利用已经为您创建的所有管道。

## 简单示例，使用 Google Checkout .Net 库实现立即购买

网络表单代码 (aspx)：

```
<p>Some ASP.net button:<br />
<asp:Button ID="Button1" runat="server" Text="BUY ME NOW" onclick="Button1_Click" /><br />

An ASP.NET Image Button using BUY NOW Image:<br />
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="https://checkout.google.com/buttons/buy.gif?merchant_id=[USE YOUR OWN MERCHANT ID]&amp;w=117&amp;h=48&amp;style=white&amp;variant=text&amp;loc=en_US" onclick="ImageButton1_Click" /> 
```

此时，这是您在浏览器中看到的内容：

![屏幕截图 Google Checkout 立即购买](../Images/a205148445dbd79b1ac64e69e032f1a0.png)

代码（内联或代码隐藏）：

```
using GCheckout.Checkout;
using GCheckout.Util;

....

protected void Button1_Click(object sender, EventArgs e)
{
    doSomething();
}

protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    doSomething();
}

private void doSomething()
{
    /**
     * Use the correct Merchant ID and Key based on GCheckout.EnvironmentType
     * You cannot mix/match sandbox and production id or key
     */
    CheckoutShoppingCartRequest Req = new CheckoutShoppingCartRequest("your_production_MID", "your_production_KEY", GCheckout.EnvironmentType.Production, "USD", 20);

    /**
     * Everything from this point is a copy and paste
     * from .net libary sample code
     * http://code.google.com/p/google-checkout-dotnet-sample-code/source/browse/examples/post_cart/simple.aspx
     */
    Req.AddItem("Mars bar", "Packed with peanuts", 0.75m, 2);

    //lets make sure we can add 2 different flat rate shipping amounts
    Req.AddFlatRateShippingMethod("UPS Ground", 5);

    //Add a rule to tax all items at 7.5% for Ohio
    Req.AddStateTaxRule("OH", 7.5, true);

    GCheckoutResponse Resp = Req.Send();
    if (Resp.IsGood)
    {
        Response.Redirect(Resp.RedirectUrl, true);
    }
    else
    {
        Response.Write("Resp.ResponseXml = " + Resp.ResponseXml + "<br>");
        Response.Write("Resp.RedirectUrl = " + Resp.RedirectUrl + "<br>");
        Response.Write("Resp.IsGood = " + Resp.IsGood + "<br>");
        Response.Write("Resp.ErrorMessage = " + Resp.ErrorMessage + "<br>");
    }
} 
```

## 重要的

以上只是**示例代码**，用于说明您可以使用 .Net 库做什么。**要遵守 Google Checkout 实施政策，请使用 ImageButton 实施**- 它可确保您使用的是 Google 的“立即购买”按钮（未更改等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:03:19.643

ASP 是一个服务器端脚本，因此您无法在页面加载后启动它。onlcick 属性用于启动 javascript。两种解决方法：

*   您可以做的是将其重定向到另一个页面，该页面重定向到 google checkout。
*   使用javascript和ajax，加载动态信息，使用javascript提交

# objective-c - 目标 C：解析 JSON 字符串

> ID：11118891
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:49:55.013
> 
> 标签：objective-c, json, parsing

我有一个字符串数据，我需要将其解析为字典对象。这是我的代码：

```
NSString *barcode = [NSString stringWithString:@"{\"OTP\": 24923313, \"Person\": 100000000000112, \"Coupons\":  [ 54900012445, 499030000003, 00000005662 ] }"];
NSLog(@"%@",[barcode objectFromJSONString]); 
```

在此日志中，我得到 NULL 结果。但是，如果我在 Coupons 中只传递一个值，我会得到结果。如何获得所有三个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:51:57.760

00000005662 可能不是一个正确的整数，因为它以零为前缀（这意味着它是八进制，IIRC）。尝试删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:02:27.590

西里尔是对的，这是权威的答案：

[JavaScript Object Notation (JSON) 的 application/json 媒体类型：2.4 个数字](https://www.rfc-editor.org/rfc/rfc4627#section-2.4)

> 数字的表示类似于大多数编程语言中使用的表示。一个数字包含一个整数部分，它可以以可选的减号为前缀，其后可以是小数部分和/或指数部分。
> 
> 不允许使用八进制和十六进制形式。 **前导零是不允许的。**

# c# - 异常：对象引用未设置为对象的实例。为什么？

> ID：11118892
> 
> 赞同：0
> 
> 时间：2012-06-20T11:49:56.617
> 
> 标签：c#, exception

你好在下面的代码中得到错误..![在此处输入图像描述](../Images/d74dd3b3f52fe287c486a9f4db0a8f67.png)

RefeshDataGridView() 方法是静态的。我在单独的线程中运行它以刷新网格并从 DB 表中获取最新数据。我将 dataGridView1 设为静态，因为方法 RefeshDataGridView() 使用它。谁能描述为什么会发生这个错误以及如何解决它？

**更新：**如果我使 dataGridView1 非静态，那么错误就消失了。但是我不能在静态方法中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:52:29.477

我想 dataGridView1 是`null`. 您必须实例化它或将它的实例作为参数传递给 RefreshDataGridView()。

# macros - 有没有办法以编程方式（使用宏）在 calc open office 中附加文件（.txt）？

> ID：11118893
> 
> 赞同：3
> 
> 时间：2012-06-20T11:49:56.820
> 
> 标签：macros, openoffice.org, openoffice-calc, openoffice-basic

我有一个 .txt 文件，我需要将其附加到工作表的列中，并且我有该文件的路径。所以我需要读取这个路径并以编程方式将文件附加到另一列中。有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T20:21:22.750

确实有！并且通过使用宏很容易做到。

**启用宏**

转到*工具 > 选项*菜单，然后单击*OpenOffice.org下的**安全*部分。在那里，单击*宏安全*按钮。现在在*安全级别*选项卡上，确保您的设置允许您运行宏。

 ***我的设置很低，因为我是我运行的所有宏的作者，如果您不确定这将是您的情况，您可能想要使用更高的设置。

**注意：**小心，如果你运气不好或生活在 90 年代，一个邪恶的宏可能会造成严重的伤害！

* * *

**创建新宏**

现在您可以运行它们，您必须创建一个新宏。OpenOffice 接受包括 Python 在内的多种语言，但由于您没有指定任何语言，我将在此处使用 OO 的基本版本。

转到*Tools > Macros > Organize Macros > OpenOffice.org Basic*，然后在文件树下添加一个新模块。给它一个有意义的名字。

![新的](../Images/fdf0dd5dac214a61dcc5f9e3ef217fc5.png)

* * *

**实际的宏**

创建新模块后，将弹出编辑器屏幕，在下面编写以下代码：

```
Sub DataFromFile
    Dim FileNo As Integer
    Dim CurrentLine As String
    Dim File As String
    Dim Msg as String
    Dim I as Integer

    ' Get the filename from the cell, in this case B1.
    currentSheet=ThisComponent.CurrentController.ActiveSheet
    fileName =  currentSheet.getCellRangeByName("B1").getString

    ' Create a new file handler and open it for reading
    FileNo = FreeFile
    Open fileName For Input As #FileNo

    I = 0

    ' Read file until EOF is reached
    Do While not eof(FileNo)
      ' Read line 
      Line Input #FileNo, CurrentLine   

      ' Define the range to put the data in as A4:A999 '
      curentCell = currentSheet.getCellRangeByName("A4:A999").getCellByPosition(0,I)

      ' Select the I-th cell on the defined range and put a line of the file there
      curentCell.String = CurrentLine

      'Increase I by one
      I = I + 1
    Loop

    Close #FileNo
End Sub 
```

要对其进行测试，只需创建一个文本文件并在其中放入一些内容，然后将其路径放在单元格 B1 上并运行宏。您可以通过多种方式运行宏，出于测试目的，只需使用用于创建模块的同一窗口上的“运行”按钮。这是预期的结果：

![预期成绩](../Images/3df1c80eefe48d7d785d7cc313e932df.png)

**注意**：如果您不熟悉 linux，请不要被那个文件路径吓倒，这就是它们在 linux 上的样子。这与 Windows 及其文件路径结构相同。

* * *

**进一步完善宏观**

我写了上面的代码，目的是让它尽可能容易理解，因此宏有很大的改进空间，例如：

*   能够显示在多列/单列/其他方面检索到的数据

从文件中检索数据后，您几乎可以以任何您想要的方式将其显示在电子表格中。如果您最初打算的方式没有得到解决，请告诉我，我将编辑答案。

*   每次要更新数据时都必须重新运行宏。

这很容易解决。有很多方法可以使宏执行自动化，我最熟悉的一种方法是让它在循环上运行，同时延迟 5 秒，并在文件加载后立即启动。

```
Sub Main
    Do While True
        DataFromFile()
        Wait(5000)
    Loop
End Sub 
```

从现在开始，您应该调用 Main sub 而不是 DataFromFile。

要使宏在启动时运行，请转到“*事件*”选项卡上的“*工具”>“自定义*”并从列表中选择*“打开文档*”，然后单击“*宏*”按钮。在选择宏的对话框中，选择*Main*。现在关闭文档，重新打开它，瞧！

 ****   使用单元格范围

如果您命名单元格区域并使用它们的名称而不是它们的绝对地址，则保留您的代码并对其进行更改会更容易。要命名一个范围（或单个单元格），您必须首先选择它，然后单击*Data > Define Range*为其命名，例如 B1 可以称为*'FilePath'*而 A4:A999 可以称为*'DataRange'*。这样，如果您需要更改它们，您不必更改宏，只需更改定义的范围名称。

不要忘记更新代码以查找范围而不是地址，例如，这段代码：

```
getCellRangeByName("A4:A999") 
```

将被重写为

```
getCellRangeByName("DataRange") 
```

*   错误检查

检查和处理错误或意外事件是个好主意。如果文件不存在怎么办？如果它大于定义的范围怎么办？

* * *

**进一步阅读**

[有关 OpenOffice Basic 宏文件的官方参考。](https://wiki.openoffice.org/wiki/Documentation/BASIC_Guide/Files_and_Directories_%28Runtime_Library%29)

[关于运行宏的不同方法的指南](https://wiki.openoffice.org/wiki/Documentation/OOoAuthors_User_Manual/Getting_Started/How_to_run_a_macro)

[宏编程的精彩介绍](http://www.openoffice.org/documentation/manuals/oooauthors/macros_intro_v1.pdf)******

# vb.net - 在VB.NET中用“”分割字符串

> ID：11118896
> 
> 赞同：7
> 
> 时间：2012-06-20T11:49:59.187
> 
> 标签：vb.net, split

假设这是我的字符串：

```
1 2 3 
```

我想用“”（空格）分割字符串并显示我字符串的每个时间部分。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T11:50:30.970

这将满足您的需要：

```
Dim str As String = "1 2 3"
Dim strarr() As String
strarr = str.Split(" "c)
For Each s As String In strarr
    MessageBox.Show(s)
Next 
```

# c# - 如何对字典进行序列化和反序列化 在 WinRT（C# 和 XAML 中的 Metro 应用程序）中？

> ID：11118910
> 
> 赞同：0
> 
> 时间：2012-06-20T11:50:31.360
> 
> 标签：c#, windows-runtime

几天来，我一直在尝试解决这个愚蠢的问题，并且正在努力解决这个问题。如果有人有一个可行的示例，我会很高兴，因为到目前为止我发现的那些都不起作用:(我可以序列化基本类型，但不是对象。我对 DataContractAttribute 等感到非常困惑。我得到的错误是：

> {“不应使用数据协定名称‘LocalStorage.Cat:http://schemas.datacontract.org/2004/07/SerializeListWinRT.DataModel’键入‘SerializeListWinRT.DataModel.LocalStorage+Cat’。考虑使用 DataContractResolver 或添加任何在已知类型列表中静态未知的类型 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。"}

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Storage;
using System.IO;
using System.Runtime.Serialization;
using Windows.Storage.Streams;

namespace SerializeListWinRT.DataModel
{
    class LocalStorage
    {
        [DataContractAttribute]
        public class Cat
        {
            [DataMember()]
            public String Name { get; set; }
        }

        static private Dictionary<string, object> _data = new Dictionary<string, object>();
        private const string filename = "items.xml";

        static public Dictionary<string, object> Data
        {
            get { return _data; }

        }

        static public T GetItem<T>(string key)
        {
            T result = default(T);

            if (_data.ContainsKey(key))
            {
                result = (T)_data[key];
            }

            return result;
        }

        static public bool ContainsItem(string key)
        {
            return _data.ContainsKey(key);
        }

        static async public Task Save()
        {
            await Windows.System.Threading.ThreadPool.RunAsync((sender) =>
            {
                LocalStorage.SaveAsync().Wait();
            }, Windows.System.Threading.WorkItemPriority.Normal);
        }

        static async public Task Restore()
        {
            await Windows.System.Threading.ThreadPool.RunAsync((sender) =>
            {
                LocalStorage.RestoreAsync().Wait();
            }, Windows.System.Threading.WorkItemPriority.Normal);
        }

        static async private Task SaveAsync()
        {
            _data.Add("cat", new Cat { Name = "Myname is" });
            _data.Add("dog", new Cat { Name = "Myname is" });

            StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
            IRandomAccessStream sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite);
            IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0);
            DataContractSerializer sessionSerializer = new DataContractSerializer(typeof(Dictionary<string, object>));
            sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
            await sessionOutputStream.FlushAsync();
        }

        static async private Task RestoreAsync()
        {
            StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.OpenIfExists);
            if (sessionFile == null)
            {
                return;
            }
            IInputStream sessionInputStream = await sessionFile.OpenReadAsync();
            DataContractSerializer sessionSerializer = new DataContractSerializer(typeof(Dictionary<string, object>));
            _data = (Dictionary<string, object>)sessionSerializer.ReadObject(sessionInputStream.AsStreamForRead());
        }
    }
} 
```

我是如何解决问题的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Storage;
using System.IO;
using System.Runtime.Serialization;
using Windows.Storage.Streams;

namespace SerializeListWinRT.DataModel
{
    class LocalStorage
    {   
        [KnownType(typeof(SerializeListWinRT.Cat))]
        [DataContractAttribute]
        public class Cat
        {
            [DataMember()]
            public String Name { get; set; }
        }

    static private Dictionary<string, object> _data = new Dictionary<string, object>();
    private const string filename = "ngt.xml";

    static public Dictionary<string, object> Data
    {
        get { return _data; }

    }

    static public T GetItem<T>(string key)
    {
        T result = default(T);

        if (_data.ContainsKey(key))
        {
            result = (T)_data[key];
        }

        return result;
    }

    static public bool ContainsItem(string key)
    {
        return _data.ContainsKey(key);
    }

    static async public Task Save<T>()
    {
        await Windows.System.Threading.ThreadPool.RunAsync((sender) =>
        {
            LocalStorage.SaveAsync<T>().Wait();
        }, Windows.System.Threading.WorkItemPriority.Normal);
    }

    static async public Task Restore<T>()
    {
        await Windows.System.Threading.ThreadPool.RunAsync((sender) =>
        {
            LocalStorage.RestoreAsync<T>().Wait();
        }, Windows.System.Threading.WorkItemPriority.Normal);
    }

    static async private Task SaveAsync<T>()
    {
        _data.Add("cat", new Cat { Name = "Myname is" });
        _data.Add("dog", new Cat { Name = "Myname is" });

        StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
        IRandomAccessStream sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite);
        IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0);
        DataContractSerializer sessionSerializer = new DataContractSerializer(typeof(Dictionary<string, object>), new Type[] { typeof(T) });
        sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
        await sessionOutputStream.FlushAsync();
    }

    static async private Task RestoreAsync<T>()
    {
        StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.OpenIfExists);
        if (sessionFile == null)
        {
            return;
        }
        IInputStream sessionInputStream = await sessionFile.OpenReadAsync();
        DataContractSerializer sessionSerializer = new DataContractSerializer(typeof(Dictionary<string, object>), new Type[] { typeof(T) });
        _data = (Dictionary<string, object>)sessionSerializer.ReadObject(sessionInputStream.AsStreamForRead());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:59:58.590

我通过添加 KnownType 属性解决了这个问题

```
 [KnownType(typeof(SerializeListWinRT.Cat))] 
```

但我以前没有这样做过，所以我不确定这是否是与 WinRT 相关的问题。哦，好吧，它现在可以工作了，但我仍然很好奇为什么你必须用 KnownType 属性来装饰..

# c# - 从 ASP.net MVC 路由获取 url 路径

> ID：11118914
> 
> 赞同：0
> 
> 时间：2012-06-20T11:50:45.990
> 
> 标签：c#, asp.net-mvc, routing, routes

我有一个看起来像这样的控制器：

```
public class PageController : Controller
{
    public ActionResult Render(string url)
    {
        //this is just for testing!
        return Content("url was " + url);
    }
} 
```

我正在尝试将 url 的值传递给控制器​​。例如：
[http ://www.site.com/products/something/else](http://www.site.com/products/something/else)

将“products/something/else”传递到我的 PageController 的渲染操作中。

这是因为我们使用“products/something/else”作为数据库中记录的唯一键（旧系统，不要问）

所以，我的结果查询将是这样的：

```
select * from foo where urlKey = 'products/something/else' 
```

到目前为止，我在 Global.asax 的 RegisterRoutes 部分中有这个：

```
routes.MapRoute("pages", "{*url}", new { controller = "Page", action = "Render", url="/" }); 
```

但这并没有按预期工作......

通过访问 www.site.com/products/something/else，传递到控制器的值是“home/index/0”
RegisterRoutes 中定义的唯一路由是问题中描述的路由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:11:06.257

下面的类匹配每条路线，但您可以根据需要进行修改。

```
public class LegacyRoute : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
      RouteData result = null;

      string url = httpContext.Request.RawUrl.Substring(1);

      result = new RouteData(this, new MvcRouteHandler());
      result.Values.Add("controller", "Page");
      result.Values.Add("action", "Render");
      result.Values.Add("url", url);

      return result;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
      return null;
    }
} 
```

在 Global.asax.cs

```
routes.Add(new LegacyRoute()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:09:32.163

希望这会有所帮助，我们的一条路线做了类似的事情，这是代码：

```
 routes.MapRoute(
            name: "Standard",
            url: "{controller}/{action}/{id}",
            defaults: new { id = UrlParameter.Optional, action = ControllersAndActions.TypicalController.IndexAction, page = 1 },
            constraints: new
            {
                controller = ControllersAndActions.ControllerConstraintExpression
            }
        ); 
```

# c++ - 结构与类

> ID：11118919
> 
> 赞同：14
> 
> 时间：2012-06-20T11:51:00.553
> 
> 标签：c++

今天，我很想在 C++ 中找到结构和类之间的一些区别。所以，我发现了一些不同之处：

1.  在结构中，默认情况下成员是公共的，而在类中是私有的。
2.  默认情况下，结构的继承是公共的，而在类的情况下是私有的。
3.  类可以参与模板，而结构不能。

单击此处查看在**模板**的情况下不能使用**结构代替****类。**[http://ideone.com/p5G57](http://ideone.com/p5G57)

 **```
template<struct T> void fun(T i)
{
    cout<<i<<endl;
}

int main()
{
    int i=10;
    fun<int>(i);
    return 0;
} 
```

它给出了错误：

```
prog.cpp:4: error: ‘struct T’ is not a valid type for a template constant parameter
prog.cpp: In function ‘void fun(T)’:
prog.cpp:4: error: ‘i’ has incomplete type
prog.cpp:4: error: forward declaration of ‘struct T’
prog.cpp: In function ‘int main()’:
prog.cpp:12: error: no matching function for call to ‘fun(int&)’ 
```

但是，如果将**struct**替换为**class**，则效果很好。见这里：http: [//ideone.com/K8bFn](http://ideone.com/K8bFn)

除了上述这些差异之外，当我在代码中替换`class`为时`struct`，代码可以完美运行而无需进行任何进一步的更改。

现在，我想知道，**还有更多的差异，我错过了，我应该知道吗？**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-20T11:52:15.457

没有其他区别，**但是**您指定的第三个不正确：

> 类可以参与模板，而结构不能。

在模板的情况下，`class`关键字只是语法糖，并不意味着类型必须是实际的类。通常，程序员更喜欢`typename`基本类型以及`class`类或结构，但这只是约定俗成的。

除此之外，您可以同时使用`class`和`struct`专门化模板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:56:08.423

有两个主要区别：

*   如果 base 没有访问说明符`class`，则在声明派生类时假定为 public，在`struct`声明类时假定为 private。

*   默认情况下，使用关键字 class 定义的类的成员是私有的。使用关键字定义的类的成员`struct`或`union`默认情况下是公共的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:10:25.767

默认情况下，结构只是一个所有成员都公开的类。

根据 C++ 编程语言（第 3 版）第 10.2.8 节：

> 根据定义，结构是一个类，其中的成员默认是公共的；那是
> 
> ```
> struct s{ ... 
> ```
> 
> 只是简写
> 
> ```
> class s { public: ... 
> ```

然后他继续说：

> 我通常更喜欢将 struct 用于所有数据都公开的类。我认为这样的类“不是很合适的类型，只是数据结构”。

**根据评论编辑**：

在第 15.3.2 节中它说：

> 基类的访问说明符可以省略。*在这种情况下，基默认为类*的私有基和*结构*的公共基。**

# javascript - Google Charts - 工具提示中的完整 html

> ID：11118920
> 
> 赞同：15
> 
> 时间：2012-06-20T11:51:03.310
> 
> 标签：javascript, charts, google-visualization

我正在尝试让 Google Charts 显示包含完整 HTML 的自定义工具提示。

我知道如何启用工具提示并传递适当的数据-问题是-即使`allowHTML`启用了选项，工具提示也会呈现为纯文本，因此例如我无法在工具提示中显示图片。

这是我要做什么的一个小例子：

我现在拥有的：[![工具提示中的纯文本](../Images/5e4fdc98cd3d93efa8111c7279e2f862.png)](http://imageshack.us/photo/my-images/840/wykrescx.png/)

我想要的是：[![工具提示中的图片](../Images/505c32bdbb3751521d9350b58baa9f23.png)](http://imageshack.us/photo/my-images/28/timelinew.png/)

解决此问题的一种方法是禁用工具提示，捕获 onmouseover 事件并使用另一个库（如线索提示）在光标处显示工具提示，但我想知道是否有更清洁、本机的方式来启用 Google Charts 中的这种功能。

另外请查看我关于图像作为谷歌图表中的点标记的其他问题。

**编辑：**

与此同时，我发现了一个非常好且相当便宜（每个网站许可 60 美元）的库，它涵盖了这个功能：[Highcharts 库](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/spline-symbols/)

正如您在示例中看到的，可以传递一个格式化工具提示的函数 - 我们可以很容易地为每个数据点添加一个特殊属性，其中包含一个可用于动态加载工具提示内容的 url。然后可以通过向系列中的每个数据点添加额外的属性来缓存工具提示。我已经以这种方式实现了它，并且效果很好。

希望最新的编辑对某人有所帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T16:51:39.080

[谷歌在这里](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/Cl7krTzXY0s)举了一个例子。

您需要将列指定为 html 工具提示：

```
data.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}}); 
```

您还需要将正确的选项传递给您的图表：

```
tooltip: {isHtml: true} 
```

我已经用折线图对此进行了测试，并且可以正常工作。

编辑：看起来（至少对于折线图）你必须使用[图表包装器](https://google-developers.appspot.com/chart/interactive/docs/reference#chartwrapperobject)才能工作。如果没有包装器，我无法让它遵守选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-27T19:53:03.747

这个功能非常模糊！如前所述，对我来说，关键是在使用 'addColumn()' 定义工具提示时添加 ", 'p': {'html': true}"；单独的 'draw()' 选项 'tooltip: {isHtml: true}' 是不够的。

在创建传递给“addRows()”的“graphItems”数组时，使用函数调用返回 HTML 字符串非常方便：

```
function myToolTip(row) {
    return '<div style="white-space: nowrap; padding:5px;"><b>' + row.name + '</b><br>' +
        '$' + row.worth + ' B, <b>' + _scope.sortBy + '</b>: ' + row[_scope.sortBy] + '</div>';
}

var graphItems = [];
angular.forEach(_scope.ForbesList, function(row, key) {
    graphItems.push([key, row.worth, myToolTip(row)]);
});

var data = new google.visualization.DataTable();
data.addColumn('number', 'Rank');
data.addColumn('number', 'Worth');
data.addColumn({type: 'string', role: 'tooltip', 'p': {'html': true}});
data.addRows(graphItems); 
```

更多信息： [https ://developers.google.com/chart/interactive/docs/customizing_tooltip_content#custom_html_content](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#custom_html_content)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-30T15:10:05.817

这目前对我有用：

第 1 步：确定这两个设置都在您的图表选项中：

```
// This line makes the entire category's tooltip active.
focusTarget: 'category',
// Use an HTML tooltip.
tooltip: { isHtml: true } 
```

第 2 步：将您的工具提示添加到图表列之一：

```
dataTable.addColumn({'type': 'string', 'role': 'tooltip' , 'p': {'html': true}}); 
```

第 3 步：在您的数据中，在相应列中添加工具提示的 HTML：

```
chartReading.push(chartSensorTooltip(obsDate, reading[1])); 
```

方法“chartSensorTooltip(date, number)”是我自己编写的一种 JS 方法，用于为每个值的工具提示正确格式化 HTML。您不需要编写这种方法，但正如上面有人建议的那样，这样做可以很容易地以相同的方式格式化所有工具提示。

FocusTarget 的事情让我大吃一惊。有人！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-26T07:25:19.450

我必须添加`{p: {html: true}}`到每一行数据而不是列，以及`isHtml`整个图表的选项。

# nhibernate - 为什么 NHibernate 的 adonet.batch_size 设置被忽略 - session.SetBachSize() 抛出异常？

> ID：11118923
> 
> 赞同：2
> 
> 时间：2012-06-20T11:51:09.757
> 
> 标签：nhibernate, exception, batch-file, bulk

我正在使用 NHibernate 并从我的本地 SQLExpress 数据库切换到 Oracle11g。

我的代码开始抱怨。会话对象方法 SetBatchSize() 引发 System.NotSupported 异常：

> > 没有为会话工厂定义批处理大小，禁用批处理。设置 adonet.batch_size = 1 以启用批处理。

它适用于 SQLExpress 数据库。好的，所以我添加了这个

```
<property name="adonet.batch_size">1</property> 
```

到配置，但它仍然抛出相同的异常。会话 Batcher 属性设置为此

> > 值：{NHibernate.AdoNet.NonBatchingBatcher}
> > 
> > 类型：NHibernate.Engine.IBatcher {NHibernate.AdoNet.NonBatchingBatcher}

如果我尝试在事务内部或外部设置批量大小，这没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:39:48.707

NHibernate 只有一些 RDBM 的批处理器。如果它没有为有问题的数据库找到一个，它默认为 nonbatchingbatcher，它根本无法批处理。你可以实现你自己的`IBatcher`.

# javascript - 如何通过 JavaScript 代码隐藏 jQuery-ui datepicker 中的 calendar-div？

> ID：11118924
> 
> 赞同：0
> 
> 时间：2012-06-20T11:51:24.820
> 
> 标签：javascript, jquery, jquery-ui, hide, uidatepicker

JQuery-ui 将生成一个带有“calendar-div”类的 div。可悲的是，这个 div 不是我的原始 div 中的子元素。因此，如果我有多个 Div，我无法获得属于原始日期选择器字段的日历 div。

我想通过 JavaScript 代码隐藏这个 div。是否有可能获取生成的 div 的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:22:53.640

我不确定你到底是什么意思`calender-div`。如果是单击日期选择器来源时显示的 div，您可能会得到这样的结果：

```
$(origin-selector).datepicker("widget") 
```

# wordpress - wordpress：前端完美运行时无法访问后端

> ID：11118928
> 
> 赞同：0
> 
> 时间：2012-06-20T11:51:36.417
> 
> 标签：wordpress

在 2 天之前，我为我的网站自动更新了 wordpress。

更新结束后，我尝试访问后端，但总是收到以下消息：

```
Fatal error: Call to undefined function wp_is_mobile() in /home/*******/public_html/wp-login.php on line 67 
```

你能告诉我该怎么做，如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:57:16.703

试试[http://wordpress.org/support/topic/fatal-error-wp-is-mobile](http://wordpress.org/support/topic/fatal-error-wp-is-mobile)。

[我也在这里](http://wpseek.com/wp_is_mobile/)找到了这个功能。您可以将其添加到您的函数文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T09:45:27.347

对于快速解决方案，在 functions.php 中添加以下代码

```
function wp_is_mobile() {
    static $is_mobile;

    if ( isset($is_mobile) )
        return $is_mobile;

    if ( empty($_SERVER['HTTP_USER_AGENT']) ) {
        $is_mobile = false;
    } elseif ( strpos($_SERVER['HTTP_USER_AGENT'], 'Mobile') !== false // many mobile devices (all iPhone, iPad, etc.)
        || strpos($_SERVER['HTTP_USER_AGENT'], 'Android') !== false
        || strpos($_SERVER['HTTP_USER_AGENT'], 'Silk/') !== false
        || strpos($_SERVER['HTTP_USER_AGENT'], 'Kindle') !== false
        || strpos($_SERVER['HTTP_USER_AGENT'], 'BlackBerry') !== false
        || strpos($_SERVER['HTTP_USER_AGENT'], 'Opera Mini') !== false
        || strpos($_SERVER['HTTP_USER_AGENT'], 'Opera Mobi') !== false ) {
            $is_mobile = true;
    } else {
        $is_mobile = false;
    }

    return $is_mobile;
} 
```

我做到了，现在它可以工作了

# iphone - 第一次选择 UITableView 时无法禁用突出显示？

> ID：11118932
> 
> 赞同：0
> 
> 时间：2012-06-20T11:51:57.083
> 
> 标签：iphone, objective-c, xcode, uitableview

我在以下方面都实施`cell.selectionStyle = UITableViewCellSelectionStyleNone;`了：

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath { } 
```

并在：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { } 
```

但是每一行在第一次被点击时都会得到蓝色的选择。如何完全禁用选择？

代码是这样的（单元格是自定义的）：

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{    
    CategoryCell *cell = (CategoryCell*)[tableView cellForRowAtIndexPath:indexPath];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;  
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:53:54.507

实施它`cellForRowAtIndexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //create cell
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

   return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:53:59.453

为您的表关闭" ["`allowsSelection`属性。](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/allowsSelection)

您可以通过编程方式或在 XIB / 故事板文件中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:54:51.387

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

您应该在 cellForRowAtIndexPath 中执行此操作

# facebook - Facebook 页面应用程序 - 喜欢和不喜欢

> ID：11118937
> 
> 赞同：-1
> 
> 时间：2012-06-20T11:52:14.263
> 
> 标签：facebook, facebook-like

我知道之前已经以各种方式对此进行了介绍 - 但是有没有办法在页面上为喜欢的用户显示一组内容，为不喜欢的用户显示另一组内容。

这种方法（[http://www.uksitebuilder.net/2011/05/create-facebook-secret-fan-page/](http://www.uksitebuilder.net/2011/05/create-facebook-secret-fan-page/)）似乎只在您第一次点击应用程序时有效，因此不利于回访。

我一直在谷歌搜索，但很难找到最新/当前的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:36:56.217

It's all in the [docs](https://developers.facebook.com/docs/authentication/pagetab/). Simply parse the **signed request** in your Tab and read out the page.liked property. It's `true` if the user liked the page and `false` if not.

**Edit_:** After seeing your comment, just save the "liked" state in a session variable. You should then use the JavaScript methods provided by Facebook to check if the user liked the page while browsing around in your App. You could then reload the page for example. You can read about FB.Event.subscribe in the [Facebook JavaScript SDK docs](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/).

# magento - 如何增加magento中追加销售产品的数量？

> ID：11118939
> 
> 赞同：4
> 
> 时间：2012-06-20T11:52:18.273
> 
> 标签：magento, magento-1.6

我在 magento 中创建了一个商店。我想在产品描述页面中增加追加销售产品的数量。目前它在前面显示 4 个产品，点击下一个链接后显示其他产品。我想把它改成5。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T12:29:57.703

upsell 块由布局中的一些布局更新 XML 在布局中调用`catalog.xml`，并且此限制被施加/评估`catalog/product_list_upsell`（又名`Mage_Catalog_Block_Product_List_Upsell`块实例。

```
<catalog_product_view translate="label">
    <!-- snip -->
    <reference name="content">
        <!-- snip -->
        <block type="catalog/product_list_upsell" name="product.info.upsell" as="upsell_products" template="catalog/product/list/upsell.phtml">
            <action method="setColumnCount"><columns>4</columns></action>
            <action method="setItemLimit"><type>upsell</type><limit>4</limit></action>
        </block>
        <!-- snip -->
    </reference>
    <!-- snip -->
</catalog_product_view> 
```

您可以使用上述信息和您的布局`local.xml`（如果您还没有它，请创建它）来覆盖该`item_limit`值：

```
<catalog_product_view>
    <reference name="product.info.upsell">
        <action method="setItemLimit"><type>upsell</type><limit>5</limit></action>
        <!--
        if you want them all rendered on one line, change the column_count as well:
        <action method="setColumnCount"><columns>5</columns></action>
        -->
    </reference>
</catalog_product_view> 
```

更多信息，[请参阅 Mage_Catalog_Block_Product_List_Upsell 类定义](http://svn.magentocommerce.com/source/branches/1.6/app/code/core/Mage/Catalog/Block/Product/List/Upsell.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T19:53:54.980

我认为这可能对至少使用更新版本的 magento (EE) 的人有用。

您可以制作一个更新脚本，这至少适用于企业版（1.14）：

```
$scope = '0';
$installer->setConfigData('catalog/enterprise_targetrule/upsell_position_limit', '5', 'default', $scope); 
```

# java - 如何将文本文件转换为 GPX 文件？

> ID：11118940
> 
> 赞同：2
> 
> 时间：2012-06-20T11:52:19.143
> 
> 标签：java, android, xml, gps, gpx

我有一个文本文件，其中包含用逗号分隔的不同点的纬度和经度，如下所示。我想把它转换成 GPX 文件，这样我就可以用它把坐标从这个文件发送到我的模拟器。如何通过 java 类做到这一点？我的文本文件如下。我通过在这个网站上手动标记点来制作这个文件 - [http://www.findlatitudeandlongitude.com/click-lat-lng-list/#.T-G4i7XztX8](http://www.findlatitudeandlongitude.com/click-lat-lng-list/#.T-G4i7XztX8)

```
28.499433450096404,77.4095070362091
28.49990488581077,77.40830540657043
28.500376319419054,77.40717887878418
28.50084775092117,77.40605235099792
28.5013191803171,77.40492582321167
28.501790607606893,77.40379929542542
28.502196033391538,77.40259766578674
28.502601457618425,77.40136384963989
28.503138878029674,77.40005493164062
28.503676295703638,77.39874601364136
28.504213710640236,77.39743709564209
28.504751122839448,77.39612817764282
28.505288532301247,77.39481925964355
28.505825939025602,77.39357471466064
28.50636334301247,77.39233016967773
28.506929028462302,77.39105343818665
28.507664415012268,77.39000201225281
28.50853178743081,77.38902568817139
28.509370869179346,77.38827466964722
28.510209944253397,77.38752365112305
28.511049012652865,77.38677263259888
28.51188807437762,77.3860216140747
28.512727129427535,77.38527059555054
28.513566177802456,77.38433718681335
28.51440521950231,77.38340377807617
28.515244254526948,77.38239526748657 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-17T11:29:18.363

**GPX 示例：**

```
<gpx xmlns="http://www.topografix.com/GPX/1/1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"
    version="1.1"
    creator="YourCompanyName">

     <wpt lat="Your latitude" lon="Your longitude">

       <time>Your Time</time>

       <name>Your Location name.</name>

    </wpt>

</gpx> 
```

gpx（GPS 交换格式）文件以*.gpx*扩展名结尾

您所要做的就是逐行读取文本文件并创建标签并将文件另存为 .gpx

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:25:40.043

看起来您并没有为自己解决问题付出很多努力。

请参阅[GPX 格式](http://www.topografix.com/gpx.asp)的文档。然后使用 Java 的 XML 实用程序从您的数据中写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T06:30:26.647

仅供参考，使用 awk 的解决方案： [https ://gist.github.com/PanJarda/9f6c6b49247a6132cc4c2ab70082302f](https://gist.github.com/PanJarda/9f6c6b49247a6132cc4c2ab70082302f)

# sql-server - 如何加密 SQL Server 2008 R2 中的列

> ID：11118943
> 
> 赞同：2
> 
> 时间：2012-06-20T11:52:32.903
> 
> 标签：sql-server, encryption, sql-server-2008-r2

我将为我的 SQL Server 使用共享主机。我想加密主键列（自动生成的 ID）和 varchar 列。我四处搜寻，发现了 TDE。但是，作为共享主机，我无法使用它。因此，正在寻找任何替代方案。数据已经存在于表中，因此现在无法从应用程序加密。并且有许多使用上述 varchar 列进行搜索的 SQL 语句。所以，性能也是一个问题。

谢谢，开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:20:30.420

> 加密主键列（自动生成的 ID）

如果它的 ID 被加密，你将如何找到记录？回答“我通过加密 ID 搜索”会取消您不加盐密钥的资格...

现在是真正的问题。您说您将在共享主机上进行部署，但您没有提及您期望加密将提供什么样的保护。问题是*密钥管理*。数据将使用密钥加密，服务器将需要以某种方式解密该 dtaa。无论您如何解决问题，用于解密所有其他密钥的根密钥*也将是*在共享主机上，因此您只会在获取数据的过程中遇到一点小问题。要设置围栏，必须从共享主机范围之外的某个地方检索密钥，例如。您的应用程序在与用户交互时会要求输入密码来解密根密钥，这在所有实际情况下都是不可能的。请注意，TDE 不会解决任何问题，因为信任根在 TDE 或列加密中存在相同的问题。如果您需要隐私，请使用私人托管。

并回答这个问题：

*   加密您使用的数据[`ENCRYPTBYKEY`](http://msdn.microsoft.com/en-us/library/ms174361.aspx)。
*   解密数据使用[`DECRYPTBYKEY`](http://msdn.microsoft.com/en-us/library/ms181860.aspx)
*   加密密钥应使用证书加密，证书应使用密码或数据库主密钥加密。请参阅[加密层次结构](http://msdn.microsoft.com/en-us/library/ms189586.aspx)。
*   您使用在会话中打开加密密钥[`OPEN SYMMETRIC KEY`](http://msdn.microsoft.com/en-us/library/ms190499.aspx)
*   您使用在会话中打开主密钥[`OPEN MASTER KEY`](http://msdn.microsoft.com/en-us/library/ms174433)
*   您可以通过创建散列并搜索散列来搜索加密的 dtaa，请参阅[索引加密数据](http://blogs.msdn.com/b/raulga/archive/2006/03/11/549754.aspx)

如果你使用列加密，你永远不会加密主键。这样做完全没有意义。在共享托管环境中要求任何形式的隐私都是白日梦。充其量，您唯一可以保护的就是意外的媒体丢失（托管硬盘出现在跳蚤市场）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:50:55.460

开发人员，我认为在您的情况下，唯一的选择是从应用程序加密。

或者，您可以重命名表，替换 VIEW 而不是重命名的表。加密所有现有数据：更新 real_table set field1 = call_encrypt_function(field1), field2 = call_encrypt_function(field2) 在该视图中，您可以从 real_table 中选择 call_decrypt_function(field1),call_decrypt_function(field2)。对于插入和更新，您需要掌握 INSTEAD OF INSERT 和 INSTEAD OF UPDATE 触发器。当然，您需要对这些对象使用 WITH ENCRYPTION。我在 XP_CRYPT 中看到了这种方法，但是我更喜欢免费的解决方案。SQL Server 免费提供基本的加密功能。

# asp.net - 在 Ajax TabContainer 中处理 ActiveTabChanged

> ID：11118945
> 
> 赞同：0
> 
> 时间：2012-06-20T11:52:48.783
> 
> 标签：asp.net, c#-4.0, ajaxcontroltoolkit

我有 TabContainer 并在 Page_load 方法中生成 TabPanel。每个选项卡都包含在 page_load 中创建的按钮。我如何处理 Ajax TabContainer 中的单击按钮，知道每个按钮都有 CommandName 和 CommandArgument。

# javascript - JSON.stringify 的 jquery 等效项

> ID：11118947
> 
> 赞同：67
> 
> 时间：2012-06-20T11:53:02.937
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

我在我的 javascript 代码中使用 jquery 作为库。但有时我不得不`JSON.stringify()`。

当我想保持我的代码与 IE 兼容时，我会使用
`$("head").append('<script type="text/javascript" src="../Includes/json2.js"></script>');`
它来`JSON.stringify()`工作。`jquery`for中没有等价物`JSON.stringify()`吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-20T11:56:56.760

jQuery 中没有这样的功能。使用`JSON.stringify`或替代任何具有类似功能的 jQuery 插件（例如[jquery-json](https://code.google.com/p/jquery-json/)）。

# perl - 如何访问远程服务器上的文件并在 perl 中获取文件数据作为返回值？

> ID：11118948
> 
> 赞同：0
> 
> 时间：2012-06-20T11:53:08.567
> 
> 标签：perl, ssh

我想编写一个 perl 脚本，它将读取远程服务器上的文件，更改文件内的一些参数并获取整个文件数据或特定数据作为返回值。

实际上我在想的是使用 cpan`openssh`实用程序创建一个 ssh 连接，然后在服务器端调用脚本，该脚本执行所有读取和更改参数值。但是这种方法的问题是我只会得到*成功*或*失败*作为返回值 - 而不是文件数据。

谁能告诉我如何实现这个功能？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:10:52.467

这是一种方法来做你所要求的`Net::SSH::Expect`

```
use Net::SSH::Expect;
my $ssh = Net::SSH::Expect->new (
      host => "some.example.net", 
      password=> 'your-password', 
      user => 'you', 
      raw_pty => 1
    );

my $login_output = $ssh->login();
if ($login_output !~ /Welcome/) {
    die "Login has failed. Login output was $login_output";
}
$ssh->exec("perl -i -pe 'tr/9/a/;' temp.txt");
my $cat=$ssh->exec("cat temp.txt");
print($cat); 
```

远程服务器上的文件 (temp.txt) 仅包含一行`0123456789` ，并且运行脚本具有此输出

```
$ perl /tmp/a.pl
012345678a 
```

这里的要点是，使用这个模块，我可以登录到远程机器并像在任何其他`ssh`会话中一样执行命令。

# javascript - Extjs 重置文件字段输入

> ID：11118949
> 
> 赞同：5
> 
> 时间：2012-06-20T11:53:08.890
> 
> 标签：javascript, file-upload, extjs

如何在 ExtJS 中重置文件字段输入？我在尝试：

```
//this - point on Ext.panel.Form

var form = this.getForm();
form.reset();

var filefield = this.getForm().getFields().get(0);
filefield.reset();

filefield.setValue('');

filefield.value = ''; 
```

但这些方法中没有一种是行不通的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T07:35:41.070

使用下面的代码会帮助你

```
function clearFileUpload(id){
    // get the file upload element
    fileField     = document.getElementById(id);
    // get the file upload parent element
    parentNod     = fileField.parentNode;
    // create new element
    tmpForm        = document.createElement("form");
    parentNod.replaceChild(tmpForm,fileField);
    tmpForm.appendChild(fileField);
    tmpForm.reset();
    parentNod.replaceChild(fileField,tmpForm);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-14T07:23:00.430

老帖子，但我也遇到了这个问题，我找到了一个更干净的解决方案。

首先确保文件字段设置了allowBlank：true。

然后你可以这样调用 setRawValue 方法：

```
 filefield.setRawValue(""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-16T09:33:07.187

您可能正在寻找的最简单的方法是：

```
filefield.fileInputEl.dom.value = ''; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T20:34:52.597

基于此答案：[HTML 输入文件选择事件在选择同一文件时未触发](https://stackoverflow.com/questions/12030686/html-input-file-selection-event-not-firing-upon-selecting-the-same-file)

在 Ext.ux.form.FileUploadField 组件的 bindListeners 函数下的 change 事件中添加以下代码。

```
var that = this;
setTimeout(function() {
    that.fileInput.dom.value = null;
    that.setValue(that.fileInput.dom.value);
}, 100); 
```

```
bindListeners: function(){
  this.fileInput.on({
    scope: this,
    mouseenter: function() {
      this.button.addClass(['x-btn-over','x-btn-focus'])
    },
    mouseleave: function(){
      this.button.removeClass(['x-btn-over','x-btn-focus','x-btn-click'])
    },
    mousedown: function(){
      this.button.addClass('x-btn-click')
    },
    mouseup: function(){
      this.button.removeClass(['x-btn-over','x-btn-focus','x-btn-click'])
    },
    change: function(){
      var v = this.fileInput.dom.value;
      this.setValue(v);
      this.fireEvent('fileselected', this, v);

      var that = this;
      setTimeout(function() {
        that.fileInput.dom.value = null;
        that.setValue(that.fileInput.dom.value);
      }, 100);
    }
  }); 
},
```

# assembly - MOV 指令限制

> ID：11118964
> 
> 赞同：1
> 
> 时间：2012-06-20T11:54:07.663
> 
> 标签：assembly, x86, mov

为什么不能直接将立即值移动到段注册表中（即 mov ds 10）？

另外，为什么不能直接复制段寄存器（即mov es，ds）？

```
.code
        mov AX,@data
        mov DS,AX 
```

为什么不能直接通过以下方式完成：

```
 mov DS, @data 
```

任何解释为什么它是这样设计的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:12:51.940

这里的主要问题是指令编码/解码

X86 具有可变长度的操作码。它们的范围可以从一个字节（如 nop）到几个字节，如 movl $0xdeadbeef, 0x12345678(%ebx,%edx,1) 之类的 12 个字节英特尔决定不包含没有真正优势的指令。mov 段寄存器，就是其中之一。很可能是因为段寄存器不必经常更改。

因此，这节省了指令编码的空间，因此它节省了芯片上的几个晶体管（与今天的晶体管转储相比，可能不会那么多）。

其他 ISA，如 ARM 或 MIPS，它们的指令具有固定的编码大小，通常允许对所有寄存器进行相同的操作。在 ARM 的情况下，甚至 PC 也是一个普通的寄存器，也可以读写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:58:27.560

因为不需要编辑那些注册表（除了在极少数情况下），因为它们是由操作系统设置的。那么为什么要浪费硅做一些无用的事情呢？

不过，您可以通过另一个临时注册表来编辑这些注册表。

# javascript - 是否可以手动计算（计算）生成的 css 样式？

> ID：11118965
> 
> 赞同：1
> 
> 时间：2012-06-20T11:54:10.780
> 
> 标签：javascript, jquery, html, css

是否可以手动计算元素上的结果 css 样式（无需渲染它）？

假设我应该有一个 HTML 结构：

```
<p style="some_style1">
  <span style="some_style2">
    <span style="some_style3">
       TEXT
    </span>
  </span>
</p> 
```

我知道关于 JS 对象的 some_style1、some_style2、some_style3 是什么（例如，我有每个元素的数据，例如`{font: 'Times New Roman' 12px bold; text-align: center;}`：）

我想手动（无需在浏览器中呈现整个结构）计算将影响“文本”的结果样式。

我应该使用什么算法（或解决方案）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:29:14.943

存在不需要在窗口中呈现的浏览器（**无头浏览器**）。您可以加载页面并查询您想要的内容。获取您所询问的内容并不比在普通浏览器中更容易。

[JCSSP](http://www.glazman.org/JSCSSP/)是一个用跨浏览器 JavaScript 编写的**CSS 解析器**，它可能是从头开始实现您想要的东西的第一步。给它一个样式表，它会告诉你浏览器会解析什么。您仍然必须管理：

*   DOM，
*   风格传承，
*   确定哪些规则适用于具有或不具有类、id、属性、兄弟姐妹等的给定元素
*   选择器的优先级
*   ETC

它的作者是 D. Glazman，他是 W3C CSS 小组的联合主席，也是 Kompozer、NVu 和 BlueGriffon 的开发者，因此它*应该能够*按预期解析 CSS :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:03:36.797

我能想到的最简单的事情是将整个内容包装在您设置`display: none`的容器中，并将其附加到 DOM。浏览器不会*呈现*它，但您将能够查询计算的样式。

下面是一个例子，展示了当结构没有连接到 DOM 时，jQuery 如何找不到样式信息，但是当它连接到 DOM 时，它可以：

```
jQuery(function($) {

  // Disconnected structure
  var x = $("<p style='color: red'><span style='padding: 2em'><span style='background-color: white'>TEXT</span></span></p>");

  // Get the span
  var y = x.find("span span");

  // Show its computed color; will be blank
  display("y.css('color'): " + y.css('color'));

  // Create a hidden div and append the structure
  var d = $("<div>");
  d.hide();
  d.append(x);
  d.appendTo(document.body);

  // Show the computed color now; show red
  display("y.css('color'): " + y.css('color'));

  // Detach it again
  d.detach();

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }
}); 
```

[现场复制](http://jsbin.com/ovumif)| [来源](http://jsbin.com/ovumif/edit)

我不能保证所有值都完全正确，您必须尝试一下；浏览器可能会推迟计算某些东西，直到/除非容器可见。如果你发现一些你想要的属性还没有计算出来，你可能不得不把`div`可见的，但离页的（`position: absolute; left: -10000px`）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:07:04.877

我发现了一些关于此的文章：[Can jQuery get all styles applied to an element](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element) on Stackoverflow。

这也是关于 quirksmode 的：获取显示以下功能的[样式：](http://www.quirksmode.org/dom/getstyles.html)

```
function getStyle(el,styleProp)
{
    var x = document.getElementById(el);
    if (x.currentStyle)
        var y = x.currentStyle[styleProp];
    else if (window.getComputedStyle)
        var y = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);
    return y;
} 
```

这允许您查询样式属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:13:05.513

样式按照它们定义的顺序相互覆盖：所以任何`some_style3`覆盖相同选择器的东西`some_style2`，比如说，都可以。否则，它将只是选择器集的并集。

**编辑**一些选择器不会覆盖，而是相对于先前的定义采取行动，所以你必须小心这一点。

# java - 如何在 WebDriver 自动化测试（java）中查看 json 对象

> ID：11118967
> 
> 赞同：0
> 
> 时间：2012-06-20T11:54:13.710
> 
> 标签：java, json, webdriver, opera

我为nodejs项目执行了selenium webdriver测试，无法查看opera（11.64）中的json对象。我得到一个模态框（下载文件），要求保存文件，但即使在下载后显示“没有为此扩展注册的应用程序”。对此有任何想法。当我添加 json 查看器扩展或 JsonHero 扩展时，我可以手动查看它。但我只有在执行测试时才会遇到这个问题（webdriver-version 2.21.0）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:38:49.270

使用 Opera 12，我在浏览器窗口中通过拖放打开本地 JSON 文件没有问题。

如果它是指向网页上 JSON 文件的链接，该文件的 mime 类型是什么？它由[RFC 4627](https://www.rfc-editor.org/rfc/rfc4627)定义。所以服务器应该发送。

```
Content-Type: application/json 
```

或者是其他东西？如果 Opera 不理解 application/json，您可以在 Preferences 中通过将此 mime 类型与浏览器本身相关联来教他。

# php - jquery.validate 不适用于选择框

> ID：11118970
> 
> 赞同：0
> 
> 时间：2012-06-20T11:54:26.830
> 
> 标签：php, jquery, css, cakephp-1.3

我正在尝试为我的表单提供验证规则。每个字段都可以正常工作，但对于选择框，它不会正常，，

```
<script type="text/javascript">
jQuery(document).ready(function() {

        jQuery('form#EnrollmentAccountHolderInformationForm').validate({
//           ignore: function(){
//              return $('form#EnrollmentAccountHolderInformationForm input:hidden, form#EnrollmentAccountHolderInformationForm select');
//           },
             debug: false,
            rules: {
                "data[Enrollment][personalinfo_source]": {
                required:true
                },
                "data[Enrollment][person_last_name]": {
                required:true
                }
          }
    }); 
```

这是我的选择框名称；- 数据[注册][个人信息来源]

这是选择框的代码：-

```
<h4 style="line-height:17px;">How did you hear <br/>about us?*</h4> 
                            <?php $options = array(
                                'Event Sponsorship' => 'Event Sponsorship',
                                'Internet'=>'Internet',
                                'Newspaper' => 'Newspaper',
                                'Outdoor Advertising' =>'Outdoor Advertising',
                                'Radio' => 'Radio',
                                'Telemarketing' => 'Telemarketing',
                                'Television' => 'Television',
                                'Social Media' =>'Social Media',
                                'Other'=>'Other');
                                 echo $this->Form->input('personalinfo_source',array('label'=>false,'id'=>'select','class' => "selectbox",'div'=>false,'options'=>$options, 'tabindex' => '16', 'empty' => 'Select','style' => "width:215px;"));
                            ?>
                            <div style="clear:both"> </div> 
```

帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:27:31.687

你检查你的 HTML 代码了吗？根据您的 php 代码（'id'=>'select'）。选择框 id 是“选择”而不是“EnrollmentAccountHolderInformationForm”，我不确定...

# encoding - Internetcodepage 和 Messagecodepage 的区别

> ID：11118974
> 
> 赞同：2
> 
> 时间：2012-06-20T11:54:43.913
> 
> 标签：encoding, outlook

在查看 Outlook 时，我可以找到两个属性告诉我 mailitem 有什么代码页

*   Internet 代码页属性
*   PR_MESSAGE_CODEPAGE -> 0x3FFD0003 这两个不同的代码页值的目的是什么？

在查看带有 HTML 正文的电子邮件时，HTML 中也可能有编码。

那么解释 HTML Body 的正确方法是什么？

在 UTF-8 编码的当前邮件中，internetcodepage 返回 65001（更正） PR_MESSAGE_CODEPAGE 返回（1252）并且 html encoding tat 表示 UTF-8

我可以依靠互联网代码页吗？另一位开发人员告诉我，这有时不会返回正确的值，但他没有这方面的示例。

那么查找邮件的 HTML 正文和/或主题的编码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:41:51.040

[请参阅我在http://social.msdn.microsoft.com/Forums/en/outlookdev/thread/d0608d5a-eef3-41cb-abc5-a6296fb92b3b](http://social.msdn.microsoft.com/Forums/en/outlookdev/thread/d0608d5a-eef3-41cb-abc5-a6296fb92b3b)的回复

* * *

> 如果您只处理 HTML 正文，请查看 HTML 标头以检查它是否指定了编码。
> 
> 对于其他属性（如果商店未启用 Unicode），我通常使用 PR_INTERNET_CPID。如果它不可用，那么我使用 PR_MESSAGE_CODEPAGE。
> 
> 我不知道是否有理由更喜欢一个而不是另一个......

# php - Joomla中的Virtuemart组件名，姓

> ID：11118983
> 
> 赞同：0
> 
> 时间：2012-06-20T11:55:32.513
> 
> 标签：php, joomla, content-management-system, virtuemart

名字，姓氏正在存储到数据库中。他们正在进入数据库，但没有正确存储值。检索时，它显示为 firstname,lastname 作为输出。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:33:15.757

假设您没有进行任何代码更改，则没有理由不正确存储它们。

要更改它们对用户的显示方式，您需要查看/编辑它们正在使用的各个位置。

1.  新创建的用户帐户维护是否正确显示/更新？
2.  发出的电子邮件在模板中（位置取决于您使用的版本），因此请找到它们，并根据自己的喜好进行调整。

# javascript - 使用 jQuery 从 XML 文件中检索数据

> ID：11118984
> 
> 赞同：1
> 
> 时间：2012-06-20T11:55:35.197
> 
> 标签：javascript, jquery, html, xml

**jQuery函数：**

```
function readXMLData(tagName){
    var result;
    function loadfail(){
        alert("Error");
    }

    function parse(document){
        $(document).find(tagName).each(function(){
            result = $(this).find('value').text();
        });
    }

    $.ajax({
        type: "GET",
        url: 'config.xml',
        dataType: 'xml',
        success: parse,
        error: loadfail
    });

    //alert(result);
    return result;
} 
```

**XML 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
    <host-prefix>
        <value>myprefix</value>
    </host-prefix>

    <host-url>
        <value>localhost</value>
    </host-url>

    <image-path>
        <value>imagePath</value>
    </image-path>
</config> 
```

我有这个 xml 文件，我需要从中检索数据以在另一个 jquery 函数中使用这些数据，我通过调用这个函数`readXMLData("host-prefix")`。

**问题：**如果我像上面提到的那样调用函数，它会返回`undefined`，无论我取消注释`alert(result)`in`readXMLData`函数，警报都会出现`undefined`文本但函数返回`myprefix`（真实结果）。一切正常。我需要从我的代码中删除警报（结果）我的功能仍然正常工作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:06:00.527

调用`readXMLData()`函数如下。由于 ajax 是异步的，它不会立即为您提供结果，因此，这就是它警告“未定义”的原因。

```
var result;
var requiredTagName;

function readXMLData(tagName)
{
         requiredTagName  = tagName;

         $.ajax({
            type: "GET",
            url: 'config.xml',
            dataType: 'xml',
            success: parse,
            error: loadfail
        });
}
   function loadfail()
   {
       alert("Error");
   }

   function parse(document)
   {
        $(document).find(requiredTagName).each(function(){
             result = $(this).find('value').text();
        });
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:04:21.957

您不应该尝试从 ajax 函数返回数据。Ajax 的定义是异步的，所以你永远不知道什么时候会返回结果，并且在返回之前不会停止执行。因此，您应该计划调用回调......例如：

```
function readXMLData(tagName, callback){
    var result;

    if(typeof callback != 'function) {
       return false;
    }

    function loadfail(){
        alert("Error");
    }

    function parse(document){
        $(document).find(tagName).each(function(){
            result = $(this).find('value').text();
            callback(result);
        });
    }

    $.ajax({
        type: "GET",
        url: 'config.xml',
        dataType: 'xml',
        success: parse,
        error: loadfail
    });

    // we return true or false which indicates that we fired off the request ok
    // and nothing more.
    return true;
} 
```

那么你要做的就是通过传入你需要调用的下一个函数来调用它，该函数获取结果并对其进行处理：

```
readXMLData("host-prefix", yourNextFunction); 
```

# php - PHP 的 Unicode 问题

> ID：11118990
> 
> 赞同：1
> 
> 时间：2012-06-20T11:55:53.360
> 
> 标签：php, file, unicode

我使用`dirscan`php 函数获取文件名数组，它返回如下数组：

```
[8] => ?????? ?????.js
[9] => ???????? ?????  ??? ?????.js
[10] => ???????? ???????????? ????????.js
[11] => ?????????? ???.js
[12] => A Contra Corriente.js
[13] => ABC-CLIO Serials Web.js
[14] => ACL.js 
```

前三个是其名称为西里尔字母的文件。我应该怎么做才能获得正确的文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:44:48.550

> 我正在使用win7 ntfs

抱歉，在 Windows 下运行的 PHP 不支持包含通用 Unicode 字符的文件名。它只能处理完全由当前代码页中的字符组成的文件名。

该代码页对您来说可能是 1252（西欧，类似于 ISO-8859-1），它不包含西里尔字母。如果您在俄语安装上运行它，那么您的代码页将是 1251，并且西里尔字符可以工作 - 但带重音的拉丁文会中断。

这是一个影响所有使用来自 MS C 运行时的标准 C stdio 库调用的应用程序的问题，包括 PHP、Java 和其他应用程序。（某些语言，如 Python，对使用 Windows 特定 API 而不是 C 标准库的 Unicode 文件名有特殊支持；有[请求 45517](https://bugs.php.net/bug.php?id=45517)将相同的内容引入 PHP，但不要屏住呼吸。）

在非 Windows 平台上，Unicode 倾向于通过使用 UTF-8 编码的字节字符串来支持，因此所有 Unicode 字符都可以正常工作。不幸的是，Windows 没有这种能力（代码页 65001 是一种 UTF-8，但严重损坏）。

# javascript - 如何在 Backbone.js 中刷新页面更改的异步视图？

> ID：11118991
> 
> 赞同：0
> 
> 时间：2012-06-20T11:55:57.703
> 
> 标签：javascript, backbone.js

我有一个应用程序只在 $(document).ready 中加载一次数据。集合视图和模型视图之间存在链接。视图具有异步架构，因此它们在页面刷新时呈现。但是当我点击链接时，什么都没有呈现，因为数据已经被获取并且没有事件被触发。是否有允许处理这两种情况的插件或技巧？

```
Backbone.Collection.prototype.lazyLoad = function (id) {
    var model = this.get(id);
    if (model === undefined) {
        model = new this.model({ id: id });
        this.add(model);
        model.fetch();
    }
    return model;
}

var Col = Backbone.Collection.extend({
    model: Model,
});

var Model = Backbone.Model.extend({});

var ColView = Backbone.View.extend({
    ...
    initialize: function () {
        this.collection.on('reset', this.render);
    }
});

var ModelView = Backbone.View.extend({
    ...
    initialize: function () {
        this.model.on('change', this.render);
    }
});

var AppRouter = Backbone.Router.extend({
    routes: {
        "": "colView",
        "col/:id": "modelView"
    },

    colView: function () {
        new ColView(collection: col);
    }

    modelView: function (id) {
        new modelView(model: col.lazyLoad('modelId'));
    }
});

$(document).ready(function () {
    col = new Col;
    col.fetch();
    app = new AppRouter();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:08:33.550

据我了解，您希望它渲染并显示视图，但是因为`col`已经被获取，所以这不会触发`change`您绑定到`ModelView's`渲染事件的事件。好吧，您总是可以自己调用 ModelView 的渲染。

```
modelView: function (id) {
    var view =  new modelView({ model: col.lazyLoad('modelId') });
    view.render();
} 
```

# admin - 阻止谷歌搜索您的管理部分

> ID：11118999
> 
> 赞同：1
> 
> 时间：2012-06-20T11:56:44.863
> 
> 标签：admin, google-search

在谷歌搜索时如何阻止谷歌在搜索结果中显示我们的网站管理部分？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:00:14.053

您的管理部分应受密码保护，因此 google bot 的进度不应超过登录页面。

如果您想禁用它，您可以使用**robots.txt**禁止访问管理部分。这是一个例子：

```
User-agent: *
Disallow: /admin 
```

检查此[链接](http://tools.seobook.com/robots-txt)以了解 robots.txt：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:02:16.117

如果可以公开访问，您可以使用 robots.txt 文件来规范他们将搜索的位置。也就是说，为什么您的管理部分可以公开访问？此外，这只适用于像谷歌这样遵循 robots.txt 规则的公司，一个不道德的公司可能不会。

[Google 关于 robots.txt 的信息](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt) [Wikipedia on robots.txt](http://en.wikipedia.org/wiki/Robots_exclusion_standard)