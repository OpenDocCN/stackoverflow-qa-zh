# StackOverflow 问答 10510000-10510999

# php - 在php中搜索缓慢

> ID：10510001
> 
> 赞同：-2
> 
> 时间：2012-05-09T04:48:35.190
> 
> 标签：php, mysql, search, full-text-search

我是 php 和 mysql 的新手。现在我面临一个问题是我需要在大型数据库中搜索数据，但是搜索一个单词需要 3 分钟以上，有时浏览器会显示超时。我使用 FULLTEXT 技术进行搜索，那么有什么解决方案可以减少搜索时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:55:30.530

为您随后更喜欢的表字段创建索引，即使需要一些内存空间查询结果也应该在更短的时间内返回最佳结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:58:03.180

这并不能直接回答您的问题，而是一个建议：

我在全文搜索中遇到了同样的问题，所以我切换到 SOLR：

[http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)

它是一个基于用 Java 编写的 Lucene 库的搜索服务器。它被一些最大规模的网站使用：

[http://wiki.apache.org/solr/PublicServers](http://wiki.apache.org/solr/PublicServers)

所以速度和可扩展性不是问题。但是，您无需了解 Java 即可实现它。它提供了一个可以查询的 REST 接口，甚至提供了以 PHP 数组格式返回搜索结果的选项。

下面是官方教程：

[https://builds.apache.org/job/Solr-trunk/javadoc/doc-files/tutorial.html](https://builds.apache.org/job/Solr-trunk/javadoc/doc-files/tutorial.html)

SOLR 搜索索引文件，因此您需要将数据库内容转换为 xml 或 json 文件。您可以为此使用数据导入处理程序扩展：

[http://wiki.apache.org/solr/DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)

要查询 REST 接口，您可以简单地使用`get_file_contents()`php 函数或 CURL。或者 SOLR 的 PHP sdk：

[http://wiki.apache.org/solr/SolPHP](http://wiki.apache.org/solr/SolPHP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:08:59.290

取决于你的数据库有多大。为您正在搜索的字段添加索引是第一件事。

我遇到了同样的问题，为该字段添加索引效果很好。

# java - 关于哈希表中的 doublevalue() 的混淆

> ID：10510002
> 
> 赞同：0
> 
> 时间：2012-05-09T04:48:41.780
> 
> 标签：java, casting, hashtable, type-conversion, unboxing

```
// Demonstrate a Hashtable
import java.util.*;
class HTDemo {
    public static void main(String args[]) {
        Hashtable balance = new Hashtable();
        Enumeration names;
        String str;
        double bal;
        balance.put("John Doe", new Double(3434.34));
        balance.put("Tom Smith", new Double(123.22));
        balance.put("Jane Baker", new Double(1378.00));
        balance.put("Todd Hall", new Double(99.22));
        balance.put("Ralph Smith", new Double(-19.08));

        // Show all balances in hash table.
        names = balance.keys();
        while(names.hasMoreElements()) {
            str = (String) names.nextElement();
            System.out.println(str + ": " +
            balance.get(str));
        }
        System.out.println();

        // Deposit 1,000 into John Doe's account
        ***bal = ((Double)balance.get("John Doe")).doubleValue();***
        balance.put("John Doe", new Double(bal+1000));
        System.out.println("John Doe's new balance: " +
        balance.get("John Doe"));
    }
} 
```

1.  行`bal = ((Double)balance.get("John Doe")).doubleValue();`内有什么用`doubleValue`？（我知道它将对象转换为双值）但是如果我没有这个程序运行就可以了。
2.  （如果我错了，请纠正我） `balance.get`在这里得到一个双值对象，`3434.34`并且（双）在它前面进行拆箱并将其转换为双值的双对象，那么如何以及为什么`doubleValue()`将这个双`3434.34`对象视为对象？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:01:23.513

我不确定我是否正确地回答了您的问题。我将尝试从我理解您的问题的角度进行解释。

1.  是的，你是对的，你不需要**doubleValue()**。这只是一种明确告诉 Java 拆箱的方式。如果您不使用`doubleValue()`，Java 会自动将其拆箱。因此，如果 Java 不支持将原始类型自动 [un] 装箱为相应的 Object 类型，那么您将需要`doubleValue()`返回`(Double)balance.get("John Doe")`一个 Object 而`bal`它是原始类型的变量。
2.  对于您问题的第二部分，在 Java`double`中是原始数据类型并且`Double`是对象类型。Java 集合 API，因此`Hashtable`只存储对象。它们不存储原始类型。因此，`balance.get()`返回一个对象。您将其转换为另一个类型的对象`Double`。`doubleValue()`由于 Java 提供了自动装箱/拆箱，因此该方法在这里是可选的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:54:40.900

集合仅适用于 OBJECT 类型，而不适用于原始类型，创建包装类的原因之一，您无法存储`3.4`但您可以存储`new Double(3.4)`，是的，正如您所说，您可以使用没有 doubleValue 的值，但它是一种标准方式做事。对于隐式调用和转换，在这种情况下，不同版本的 jvms/jre 的行为可能会略有不同，为了避免它们，您希望以标准方式进行操作，以免受到影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:25:12.567

> 1.  在行 bal = ((Double)b​​alance.get("John Doe")).doubleValue(); doubleValue 的用途是什么（知道它将对象转换为双精度值），但如果我没有这个程序运行，程序运行正常。

正确的。

> 1.  （如果我错了，请纠正我）`balance.get()`得到一个值为 3434.34 的双对象，并且（双）在它前面进行拆箱

没有。没有`(double)`。有`(Double)`。这会将其从`Object`to类型转换为`Double`。

> 并将其转换为双重对象

是的。

> 双重价值

不，它是一个对象而不是一个值。这句话毫无意义。

> 那么 doubleValue() 如何以及为什么将这个双精度 3434.34 视为对象？

它没有。它调用 Double.doubleValue() 返回一个`double`.

此代码根本不使用自动装箱。`doublevalue()`自从 Java 1.5 大约 5 年前问世以来，这段代码中的调用就已经过时了。它也不使用泛型。我怀疑您正在查看一些非常古老的代码。

# sql - 查询数组或创建临时数据库

> ID：10510006
> 
> 赞同：0
> 
> 时间：2012-05-09T04:49:02.763
> 
> 标签：sql, vb.net, arrays

有没有办法在 VB.net 中查询我的数组？我只需要一些临时的东西来查询它的报告，但我不想只为临时的东西创建一个外部数据库。我只需要能够说`select * from tempTable`等等等等。

任何帮助或链接都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:55:43.163

您可以使用 LINQ

```
Dim Report_Array As List(Of clsReport) = Get_Report_List

Dim Selected_Report As List(Of clsReport) = (From R As clsReport In Report_Array
                                             WHERE R.ReportName = 'ABC') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T04:56:24.283

您可以使用 LINQ 在 Vb.Net 中查询数组。请参阅文章[在 Visual Basic 中使用 LINQ to Objects](http://www.codeproject.com/Articles/26652/Using-LINQ-to-Objects-in-Visual-Basic)

```
Dim Birds() As String = {"Indigo Bunting", "Rose Breasted Grosbeak", _ 
                             "Robin", "House Finch", "Gold Finch", _
                             "Ruby Throated Hummingbird", _
                             "Rufous Hummingbird", "Downy Woodpecker"}

Dim list = From b In Birds _
           Where b.StartsWith("R") _
           Select b 
```

# iphone - 使用 NSURLConnection 下载不下载任何东西？

> ID：10510007
> 
> 赞同：0
> 
> 时间：2012-05-09T04:49:22.980
> 
> 标签：iphone, objective-c, path, download, nsurlconnection

我正在使用 NSURLConnection 从服务器下载 mp3 数据，我的代码在这里

```
- (IBAction)downloadData:(id)sender
 {

   NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
   NSURL *url = [[NSURL alloc] initWithString:@"http://viadj.viastreaming.net/start/psalmsmedia/ondemand/Nin%20snehamethrayo.mp3"];

   [request setURL:url];
   [url release];
   url = nil;

   NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

 }

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
 {
     responseData = [[NSMutableData alloc] init];
 }

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
 {
   [responseData appendData:data];
 }

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
 {
  [responseData release];
  [connection release];

 }

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
 {

  NSLog(@"Succeeded! Received %d bytes of data",[responseData
                                               length]);
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *fileName = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"myFile"];

  [responseData writeToFile:fileName atomically:YES];

  responseData = nil;
  self->imageConnection = nil;

  } 
```

我对下载的路径有点困惑。当我单击下载按钮时，我显示“成功！收到 1329 字节的数据”，但没有下载任何内容。需要一些帮助。我们将如何指定 iPhone 的本地路径来存储下载的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:48:09.450

```
- (IBAction)downloadData:(id)sender
{
  NSURL *url = [[NSURL alloc] initWithString:@"http://viadj.viastreaming.net/start/psalmsmedia/ondemand/Nin%20snehamethrayo.mp3"];
  NSMutableURLRequest   *theRequest_to = [NSMutableURLRequest requestWithURL:url];
  [url release];
  NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:theRequest_to delegate:self];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse*)response
{
  NSString *filepath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"snehamethrayo.mp3"]; // here you can set your filename which you can get from url 
  [[NSFileManager defaultManager] createFileAtPath:filepath contents:nil attributes:nil];
  file = [[NSFileHandle fileHandleForUpdatingAtPath:filepath] retain];// Here file is object of NSFileHandle and its declare in .h File
  [file seekToEndOfFile];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
  [file seekToEndOfFile];
  [file writeData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection 
{
 [file closeFile];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:07:07.093

我认为不需要任何代码更改。只需放置一个 nslog 并查看...

```
NSString *fileName = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"myFile"];
NSLog(@"%@",fileName); 
```

这将列出像这样的文件位置 /Users/me/Library/Application Support/iPhone Simulator/5.0/Applications/(your app)/Documents/myFile. 即下载的文件在您的文件夹中。

注意：不要忘记把文件格式ie

```
NSString *fileName = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"myFile.mp3"]; 
```

# http - 客户端基于 Web 的代理如何工作？

> ID：10510010
> 
> 赞同：1
> 
> 时间：2012-05-09T04:49:52.897
> 
> 标签：http, agent

我不确定我是否正确地问了这个问题。我指的是本地安装的软件，通常称为“代理”，它通过 HTTP 与某些主机保持定期通信。例如，当您安装 LogMeIn 时，代理会与 logmein.com 服务器保持通信，因此当您使用 Web 浏览器访问 logmein.com 并连接到代理时，服务器能够启动通信。然而，代理不是网络服务器，也没有任何端口转发到代理。那么，代理是否像破纪录一样不断地轮询服务器，“我可以帮助你吗？我可以帮助你吗？我可以帮助你吗？” 还是从代理到服务器的 http 连接以某种方式保持打开状态？我知道您可以保持 http 连接打开，但是 A）如何，B) 持续多长时间？特工是否需要表现得像一个不那么烦人的破纪录问：“我能帮你吗？然而？然而？然而？” 每个问题之间有更多的时间？还是代理可以询问一次并无限期地等待，只有在得知连接已断开时才再次询问？

底线是，我想创建一个小的示例程序，以尝试编写一个使用 HTTP 通过 Internet 进行通信的客户端/服务器应用程序。任何一方都需要能够发起命令/请求。代理可能会使用某种 API（可能是 RESTful）与服务器通信。当我开始实验时，我将使用 Perl。创建一个 Hello World 项目会很有趣，该项目将有多种语言的示例，适用于多种平台，如何编写代理以及如何与服务器通信。代理代码将做客户端的事情（例如确定公共 IP 地址）并将数据发送到服务器。服务器将对数据采取行动（例如，将 IP 地址存储在数据库中）。服务器还可以向代理发起命令（例如，嘿，代理！什么？

是否有任何现有的项目可以建模？任何现有的文件？也许我只是缺少术语，如果我只知道我所要求的一切都可以用 foo 这个词来概括，那么我可以在搜索中找到的大门就会敞开！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:16:23.357

我查看了 Ubuntu 的 Landscape 代码。它使用 Python 的 Twister——一个用于 HTML5 Websockets 的网络服务器。所以我想说我在答案中寻找的是Websockets（双向通信）。现在已经开辟了丰富的选项，node.js、twister、mojolicious 以及更多作为 Web 服务器的选项。事实证明，使用 Ajax 每隔几秒进行一次轮询是一个非常糟糕的主意——对 Web 服务器的压倒性抨击。保持连接打开。

# c++ - C# @ 符号前缀字符串的 C++ 等价物是什么？

> ID：10510014
> 
> 赞同：22
> 
> 时间：2012-05-09T04:50:05.710
> 
> 标签：c++, escaping

C# @ 符号前缀字符串的 C++ 等价物是什么？自动转义符号？

示例：`var howManySlashesAreThereIn = @"\\\\\\"`;

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-09T04:53:32.473

在 C++11 中，您可以使用原始字符串文字：

```
std::string s = R"(This\is\a\raw\string\literal)";

std::string s = R"*(This \one contains \a )", which would normally end the string)*"; 
```

这是关于它的[C++11 常见问题解答](http://stroustrup.com/C++11FAQ.html#raw-strings)，以及[参考](http://en.cppreference.com/w/cpp/language/string_literal).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T04:53:28.113

您正在寻找 C++ 的“原始字符串”功能，但它是最近才添加的（我相信是 C++11）。

```
std::string howManySlashesAreThereIn = R"(\\\\\\)"; 
```

它记录在`2.14.5 String lieterals`C++11 标准中，尽管这本书对你来说可能有点枯燥，所以我建议在`"raw string" c++`.

除了摆脱像 那样的逃逸加倍怪物之外`"\\\\nasbox\\sharename\\downloads\\super_sekrit_stuff"`，它还允许您绕过“添加`\n`字符并组合相邻字符串”的技巧，例如转弯：

```
htmlString =
    "<HTML>\n"
      "<HEAD>\n"
        "<TITLE>My page</TITLE>\n"
        "<META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=utf-8\">\n"
      "</HEAD>\n"
      "<BODY LINK=\"#0000ff\" VLINK=\"#800080\" BGCOLOR=\"#ffffff\">\n"
        "<P> </P>\n"
        "<PRE>\n"; 
```

变成更易读的东西（由于第二个变体中的空格，不*完全相同，但对于 HTML 来说完全没问题，因为在这种情况下它忽略了添加的空格）：*

```
htmlString = R"xyzzy(
    <HTML>
      <HEAD>
        <TITLE>My page</TITLE>
        <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
      </HEAD>
      <BODY LINK="#0000ff" VLINK="#800080" BGCOLOR="#ffffff">
        <P> </P>
        <PRE>
    )xyzzy"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T04:54:25.537

C++11 添加`raw`了至少有些相似的字符串文字。

```
R"(This is a raw literal)"; 
```

这些对正则表达式特别有用，例如：

```
R"@(\w+\d*)@" 
```

...作为传统文字，这将是：

```
"\\w+\\d*" 
```

尽管差异不是很大，但它可以有所作为，尤其是在较长的正则表达式中。

# casting - C++/CLI 类型转换运算符

> ID：10510018
> 
> 赞同：1
> 
> 时间：2012-05-09T04:50:33.640
> 
> 标签：casting, c++-cli, operator-overloading

我有两个班级：`testClass`和`castClass`：

```
class testClass
{
public:
    int field1;
    int field2;

    testClass(int f1, int f2) : field1(f1), field2(f2) {}
};

ref class castClass
{
    int i;
    int j;
public:
    castClass(int i, int j) : i(i), j(j) {}

    explicit static operator testClass (castClass% c)
    {
        return testClass(c.i, c.j);
    }
}; 
```

当我尝试：

```
castClass cc(1, 2);
testClass i = (testClass)cc; 
```

它编译得很好。

但是当我尝试转换为：

```
castClass% c = castClass(1, 2);
testClass j = (testClass)c; 
```

编译器抛出错误：

```
Error   1   error C2440: 'type cast' : cannot convert from 
'castClass' to 'testClass' 
```

为什么第二种情况是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:42:08.627

因为`castClass`是一个 ref 类，所以引用该类型对象的正常方法是使用`^`. 试试这个，它应该适合你。

```
ref class castClass
{
    int i;
    int j;
public:
    castClass(int i, int j) : i(i), j(j) {}

    explicit static operator testClass (castClass^ c)
    {
        return testClass(c->i, c->j);
    }
};

castClass^ cc = gcnew castClass(1, 2);
testClass i = (testClass)cc;

castClass^% c = gcnew castClass(1, 2);
testClass j = (testClass)c; 
```

# javascript - 如何使用backbone.js创建单独的模型、视图和控制器

> ID：10510021
> 
> 赞同：0
> 
> 时间：2012-05-09T04:50:46.253
> 
> 标签：javascript, backbone.js

*   我再次编辑我的代码，我收到以下 2 个错误：

1) Complex_collection 未定义

```
 model: Complex_model 
```

2) Complex_model 未定义

```
 model: Complex_model 
```

我正在使用主干 js 以下是我的代码，我通过使用主干.js 完成了此操作，但我的代码没有运行我想要使用主干 js 单独的模型、视图和控制器

//模型

```
(function(){ var Complex_model = Backbone.Model.extend({        
    sync:function() {},
    validate:function() {},
    url:function() {},          
    defaults :{
        name : null
    }    
});})(this); 
```

//看法

```
(function(){

FriendView = Backbone.View.extend({
    events :{
        'click #add-input' : 'add'
    },
    initialize: function(){
        this.collection = new Complex_collection(); // This is collection
        _.bindAll(this, 'render');
    },      
    add : function() {
        alert("hello");
        var friend_name = $('#input').val();
        this.collection.add({ name : friend_name });
    },
    render : function(){
        $("#friends-list").append("<li>"+ model.get("name")+"</li>");
    },      
});

var view = new FriendView(); })(this); 
```

//收藏

```
(function(){    

    var Complex_collection = Backbone.Collection.extend({

    model: Complex_model

});})(this); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:23:19.263

您不应在初始化代码中创建同一对象的新实例，您的代码应如下所示：

```
(function(){ 
    this.complex_model = Backbone.Model.extend({        
        sync:function() {},
        validate:function() {},
        url:function() {},      
    });
})(this);

// View

(function(){
    var vw = view = function(){};
    FriendView = Backbone.View.extend({
        events :{
            'click #add-input' : 'add'
        },
        initialize: function(){
            this.friendslist = new FriendList(); // This is your collection right?
            _.bindAll(this, 'render');
        },      
        add : function() {
            var friend_name = $('#input').val();
            this.friendslist.add({ name : friend_name });
        },
        render : function(){
            $("#friends-list").append("<li>"+ model.get("name")+"</li>");
        },      
    });
})(this);

// Collection
(function(){    this.complex_collection = Backbone.Collection.extend({
    model : complex_model
});})(this);

// Your main app
var view = new FriendView(); 
```

# java - http 404 tomcat4 日食 MAC

> ID：10510027
> 
> 赞同：0
> 
> 时间：2012-05-09T04:51:33.620
> 
> 标签：java, eclipse, jsp, http-status-code-404, tomcat6

我最近下载了 Tomcat 6 并将我使用的 eclipse 切换到 EE 版本。我无法让 eclipse 运行 JPA 项目，并且一直收到错误消息 HTTP 404。当我打开 Web 浏览器并输入[http ://localhost/8080/](http://localhost/8080/)我得到了 tomcat 6 信息页面，所以我认为服务器确实可以工作 eclipse 无法连接到它。

我已经进入首选项，并确保目录中服务器的路径是正确的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:58:15.223

如果您使用“您自己的”tomcat 实例，则必须在服务器配置视图中指定位置。看一下截图：

![在此处输入图像描述](../Images/9f58b47a9d11e97499f1c2b2126d1988.png)

我的实例位于`C:\TOMCT`. 希望有帮助

# android - 插入数据显示android中的sqlite错误

> ID：10510032
> 
> 赞同：0
> 
> 时间：2012-05-09T04:52:10.413
> 
> 标签：android, sqlite

我尝试插入用户并传递给登录表，它显示错误，我将用户名、密码作为构造函数传递给数据库类。现在我想在登录页面插入用户名和密码

```
 public class Database extends SQLiteOpenHelper{

private static final String DATABASE_NAME = "sample";
private static final int DATABASE_VERSION = 1;
private static final String INSPECTION_CREATE = "CREATE TABLE IF NOT EXISTS login ("
                        + "username TEXT," + "password TEXT);";

public Database(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);

    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS login");

}
 public void insert_datas(String user,String pass,String table_name){
        SQLiteDatabase db=this.getWritableDatabase();//in this line error comes

         ContentValues initialValues = new ContentValues();

            initialValues.put("user",user);
            initialValues.put("pass",pass);
            long n = db.insert(table_name,user,initialValues);

            System.out.println("n"+n);
            db.close();
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:07:00.637

你还没有创建你的数据库...... onCreate 方法是空的，我也没有看到你在其他任何地方使用你的表创建字符串。

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(INSPECTION_CREATE);
} 
```

您的 onUpgrade 也需要一点帮助（它会删除表但不会重新创建它）：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS login");
    onCreate(db);
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:11:16.900

使用 dbhelper 对象获取`SqliteDataBase`Object

```
DataBase dbhelper = new Database(context);

SQLiteDatabase db=dbhelper .getWritableDatabase(); 
```

# c++ - using-declaration 是否仅导入在 using-declaration 之上声明的重载？

> ID：10510042
> 
> 赞同：3
> 
> 时间：2012-05-09T04:53:47.713
> 
> 标签：c++, namespaces, scope, overloading, using-declaration

例如，GCC 和 clang 都无法编译以下代码：

```
struct S {};

namespace N
{
    void g(S);
}

using N::g;

namespace N
{
    void g(int);
}

int main()
{
    g(0);
} 
```

出现错误：

```
test.cpp: In function 'int main()':
test.cpp:17:8: error: could not convert '0' from 'int' to 'S'
     g(0);
        ^ 
```

暗示 using-declaration 仅导入在using-declaration 出现的点**上方**声明的重载，而不是可能稍后出现的重载（但在使用名称之前）。

这种行为正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T05:00:30.240

> **这种行为正确吗？**

是的，这种行为是正确的，并且按照 c++ 标准进行了很好的定义。

相关部分是C++11 标准的**第 7.3.3.11节：**

> 由 using-declaration 声明的实体应根据 using-declaration 处的定义在使用它的上下文中为人所知。在使用该名称时，不考虑在 using 声明之后添加到命名空间的定义。

```
[ Example:    
    namespace A {
        void f(int);
     }
    using A::f; // f is a synonym for A::f;
    // that is, for A::f(int).
    namespace A {
        void f(char);
    }
    void foo() {
        f(’a’); // calls f(int),
    } // even though f(char) exists.
    void bar() {
        using A::f; // f is a synonym for A::f;
        // that is, for A::f(int) and A::f(char).
        f(’a’); // calls f(char)
    }
 —end example ] 
```

# android - 当按下返回按钮返回主页活动时，Webview Activity 中的音乐会终止

> ID：10510047
> 
> 赞同：0
> 
> 时间：2012-05-09T04:54:14.163
> 
> 标签：android

我在 WebView（第二个活动）中编码播放 mp3（Flash Embedded），我可以像往常一样在 WebView 中播放音乐，但是当我按回按钮到第一个活动时，WebView 中的第二个活动中的音乐仍在播放，然后我去WebView 中的第二个 Activity 再次停止音乐，但它出现了新的 mp3 播放列表屏幕，我无法停止音乐。

那么，当我按下返回按钮到第一个活动（主屏幕）时，如何终止进程

最好的问候， 维拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:00:36.253

在你的课堂上写这个函数。实际上这将覆盖 onpause。

```
@Override
protected void onPause() {
    super.onPause();
    finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T04:30:06.480

这是唯一对我有用的东西。在生命周期方法中使用`destroy()`方法。`WebView``onPause()`

```
@Override
public void onPause(){
    super.onPause();
    wView.destroy();
} 
```

# ruby-on-rails - 如何使用 .js.erb 自动关闭颜色框

> ID：10510048
> 
> 赞同：0
> 
> 时间：2012-05-09T04:54:16.890
> 
> 标签：ruby-on-rails, colorbox

如何自动关闭颜色框，并留在页面上......既不重定向到另一个页面也不重新加载页面......我尝试使用

父.$.fn.colorbox.close(); 或 $.fn.colorbox.close(); 或 $.colorbox.close();

但那些都行不通

任何想法？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:17:34.237

这些都取决于情况。对于如何关闭颜色框没有其他答案，您的设置不正确。也许您正在加载两次颜色框或其他内容。没有足够的信息来确定为什么它在您的帖子中不起作用。考虑添加一个演示。

# javascript - 返回 False 不在表单上工作

> ID：10510049
> 
> 赞同：1
> 
> 时间：2012-05-09T04:54:20.587
> 
> 标签：javascript, jquery, html, ajax

我有一个我试图通过 AJAX 提交的登录表单。我有一个类似的注册表格，效果很好；但是，return false 语句不会触发。

我的登录表单如下所示：

```
 <form name="loginForm" id="loginForm" action="userSystem/userSystem.php" method="post">
    <div class="loginTable">
      <div class="loginRow">
        <div class="loginCell"><label for="username">Username:</label></div>
          <div class="loginCell"><input type="text" name=="username" id="loginFormUser"></div>
        </div>
      <div class="loginRow">
        <div class="loginCell"><label for="password">Password:</label></div>
          <div class="loginCell"><input type="password" name="password" id="loginFormPass"></div>
        </div>
      <div class="loginRow">
        <div class="loginCell">&nbsp;</div>
        <div class="loginCell"><input type="submit" name="submit" value="Log In" id="loginFormSubmit"></div>
      </div>
    </div>
  </form>
</section>
<section id="loginBarRegForm">
  <h1>Step Two</h1>
  <form name="regForm" id="regForm" action="usersystem/register.php" method="post">
    <div class="loginTable">
      <div class="loginRow">
        <div class="loginCell"><label for="r_username">Username:</label></div>
        <div class="loginCell"><input type="text" name="r_username" id="r_username"></div>
        <div class="loginCell"><span id="r_usernameFeedback"></span></div>
      </div>
      <div class="loginRow">
        <div class="loginCell"><label for="r_password">Password:</label></div>
        <div class="loginCell"><input type="password" name="r_password" id="r_password"></div>
        <div class="loginCell"><span id="r_passwordFeedback"></span></div>
      </div>
      <div class="loginRow">
        <div class="loginCell"><label for"r_vpassword">Verify Password</label></div>
        <div class="loginCell"><input type="password" name="r_vpassword" id="r_vpassword"></div>
        <div class="loginCell"><span id="r_vpasswordFeedback"></span></div>
        </div>
      <div class="loginRow">
        <div class="loginCell"><label for="email">Email:</label></div>
        <div class="loginCell"><input type="text" name="r_email" id="r_email"></div>
        <div class="loginCell"><span id="r_emailFeedback"></span></div>
        </div>
      <div class="loginRow">
        <div class="loginCell"></div>
        <div class="loginCell"><input type="submit" name="r_submit" value="Register" id="r_submit"></div>
        <div class="loginCell"></div>
        </div>
      </div>
  </form> 
```

以及单击提交按钮时我尝试执行的javascript

```
$("#loginFormSubmit").click(function() {
  form_data = {
    username: $("#loginFormUser").val(),
    password: $("#loginFormPass").val(),
    operation: "login",
    is_ajax: 1
  }

  $.ajax({
    type: "POST",
    url: "userSystem/userSystem.php",
    data: form_data,
    dataType: json,
    success: function(data) {
      if(data.success) {
        $("#loginBarLoginForm").fadeOut("slow");
        $("#userDetailsUsername").html(data.username);
        $("#userDetailsEmail").html(data.email);
        $("#userDetails").fadeIn('slow');
      } else {
        $("#loginbarLoginForm").fadeOut("slow");
        $("#loginBoxResponseDiv").html(data.message);
        $("#loginBoxResponseFrame").fadeIn("slow");
      }
    }
  });
  return false;
}); 
```

到目前为止，这是我开发的最深入的应用程序，但是对于为什么 return false 将在一个实例中起作用，而在另一个实例中不起作用，这只是没有意义。除了数据之外，它们几乎是相同的功能。

感谢您提供任何帮助 ：）

编辑：更新代码。

```
 $("#loginFormSubmit").click(function() {
    console.log("Click Event Firing");
    var form_data = {
        username: $("#loginFormUser").val(),
        password: $("#loginFormPass").val(),
        operation: "login",
        is_ajax: 1
    };
    console.log("variables Assigned " + form_data['username'] + " " + form_data ['password']);

    $.ajax({
        type: "POST",
        url: "userSystem/userSystem.php",
        data: form_data,
        success: function(data) {
            console.log("Ajax Working");
            if(data.success === true) {
            $("#loginBarLoginForm").hide();
                $("#loginBoxResponseDiv").html("<p>You have been loged in " + data.username + "!");
                $("#loginBoxResponseFrame").fadeIn("slow");
            } else {
                $("#loginBarRegForm").hide();
                $("#loginBoxResponseDiv").html(data.message);
                $("#loginBoxResponseFrame").fadeIn("slow");
            }
        }
    });
}); 
```

代码现在将返回 JSON 响应，但不会触发成功函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:56:53.523

`return false`在处理程序内部但在外部`ajax`以防止提交的默认操作。

```
$("#loginForm").on('submit',function() {  //attach handler to form
    form_data = {...}                     //form data
    $.ajax({...});                        //fire ajax
    return false;                         //prevent default action
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:58:23.457

return false 按要求工作，但问题是 Success 方法是一个回调，只要有来自服务器端的成功消息在 ajax 调用上，Jquery 就会隐式调用它，所以当时你没有任何句柄要从中获取值，因此您需要在另一个方法中定义您的逻辑并在此处进行方法调用，因为它是回调，您没有句柄来操作。

是的，如果您想返回`$.ajax()`调用以返回 false，则可以将 return false 语句删除到成功方法的范围之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:45:02.983

只是一个想法，但将输入的类型从“提交”更改为“按钮”。

而且，仅出于调试目的，不要动态分配点击事件。将您的 JS 更改为：

```
function NamedFunction() {
  form_data = {
    username: $("#loginFormUser").val(),
    password: $("#loginFormPass").val(),
    operation: "login",
    is_ajax: 1
  }

  $.ajax({
    type: "POST",
    url: "userSystem/userSystem.php",
    data: form_data,
    dataType: json,
    success: function(data) {
      if(data.success) {
        $("#loginBarLoginForm").fadeOut("slow");
        $("#userDetailsUsername").html(data.username);
        $("#userDetailsEmail").html(data.email);
        $("#userDetails").fadeIn('slow');
      } else {
        $("#loginbarLoginForm").fadeOut("slow");
        $("#loginBoxResponseDiv").html(data.message);
        $("#loginBoxResponseFrame").fadeIn("slow");
      }
    }
  });
  return false;
} 
```

然后将此添加到您的提交按钮

```
onclick="NamedFunction(); return false;" 
```

我不建议您保持这种方式，但也许通过这 2 个更改，您可以真正追踪正在发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:20:56.940

事实证明，一直以来，我只是在我的解决方案中遗漏了一些引号。我需要更换：

```
 dataType: json, 
```

和：

```
 dataType: "json", 
```

一旦我明白了，解决方案就到位了，现在我的用户无需刷新页面就可以登录。我在这个项目上还有很长的路要走，但感谢大家帮助我指明了正确的方向。我也很高兴自己能够找到答案；但是，如果不是因为我从 SO 社区收到了很好的帮助和提示，我永远不会有。你们是百万分之一！

最终的解决方案最终看起来像这样：

```
 $("#loginFormSubmit").click(function() {
    console.log("Click Event Firing");
    var form_data = {
        username: $("#loginFormUser").val(),
        password: $("#loginFormPass").val(),
        operation: "login",
        is_ajax: 1
    };
    console.log("variables Assigned " + form_data['username'] + " " + form_data ['password']);

    $.ajax({
        type: "POST",
        url: "userSystem/userSystem.php",
        dataType: "json",
        data: form_data,
        success: function(data) {
            console.log("Ajax Working");
            console.log("data.success: " + data.success);
            console.log("data.username: " + data.username); 
            if(data.success === true) {
                console.log("data.success was true");
                $("#loginBarLoginForm").hide();
                $("#loginBoxResponseDiv").html("<p>You have been loged in " + data.username + "!");
                $("#loginBoxResponseFrame").fadeIn("slow");
                $("#notLoggedIn").fadeOut("slow");
                $("#currentlyLoggedIn").fadeIn("slow");
                $.cookie("username", data.username, {expires: 7, path: "/"});
                $.cookie("id", data.id, {expires: 7, path: "/"});
                $.cookie("email", data.email, {expires: 7, path: "/"});
                $.cookie("user_level", data.user_level, {expires: 7, path: "/"});
                $.cookie("active", data.active, {expires: 7, path: "/"});
                $.cookie("reg_date", data.reg_date, {expires: 7, path: "/"});
                $.cookie("last_login", data.last_login, {expires: 7, path: "/"});
                $("#cookieUsername").html($.cookie("username"));
                $("#cookieID").html($.cookie("id"));
                $("#cookieEmail").html($.cookie("email"));
                $("#cookieUserLevel").html($.cookie("user_level"));
                $("#cookieActive").html($.cookie("active"));
                $("#cookieRegDate").html($.cookie("reg_date"));
                $("#cookieLastLogin").html($.cookie("last_login"));
            } else {
                console.log("data.success was false");
                $("#loginBarRegForm").hide();
                $("#loginBoxResponseDiv").html(data.message);
                $("#loginBoxResponseFrame").fadeIn("slow");
            }
        }
    });
}); 
```

# javascript - Backbone.Marionette vs Backbone-Boilerplate

> ID：10510050
> 
> 赞同：12
> 
> 时间：2012-05-09T04:54:24.023
> 
> 标签：javascript, backbone.js, marionette

我是 Backbone 的新手，正在尝试决定如何进行开发。

目前我想知道人们什么时候会使用backbone.marionette而不是backbone-boilerplate？

据我所知，Marionette 更具规范性，但这是大多数人在这里进行开发的方式吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-09T05:27:32.650

Marionette 自动化了很多关于我认为 Backbone 应该首先包含的视图的内务工作。Marionette 得到积极维护，发现它对我的项目非常有用和灵活。

在我看来，骨干样板更多是一种将代码组织成模块的方式，但不涉及主干视图。

您应该能够使用样板来组织代码，并使用 Marionette 来获得更易于管理的视图。我相信他们解决了补充问题。

Marionette 最近添加了一个 AMD 版本，因此它现在与 RequireJS 开箱即用兼容。

# django - Django 可以使用我设置的会话，但在 Web 浏览器的检查器中看不到

> ID：10510058
> 
> 赞同：0
> 
> 时间：2012-05-09T04:55:37.217
> 
> 标签：django, cookies, mongoengine

我使用`Django`with`MongoDB`作为后端数据库。

在`settings.py`我已经设置了这些代码：

```
SESSION_ENGINE = 'mongoengine.django.sessions'

'django.contrib.sessions.middleware.SessionMiddleware',

'django.contrib.sessions', 
```

在我的`view/user.py`（仅部分代码）中

```
 if user.password == password:
                    #add session information
                    if request.session.test_cookie_worked():
                        returnmsg = "COOKIE OK"
                    else:
                        returnmsg = "COOKIE ERR"
                    response = HttpResponse(returnmsg)
                    response.set_cookie("username", username)
                    request.session['username'] = username
                    user.log.append(UserLog(time=datetime.now(), ip=request.META['REMOTE_ADDR'], login=True))
                    user.save()
                    return response 
```

当我运行我的网站时，我可以通过此功能登录，其他需要验证我的会话设置的功能可以`username`从`response.session`.

但是 returnmsg 是`COOKIE ERR`，当我使用 Safari 的 Web Inspector 时，我在这里看不到任何会话或 cookie。

Django 将会话数据存储在哪里？它应该是客户端计算机上的编码cookie吗？如果它没有存储在我客户的计算机上，为什么`Django`仍然可以得到它？在我的代码中，我也试过直接设置一个cookie，它仍然不起作用。

有什么不对`MongoEngine`吗？我是否以错误的方式使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:07:28.620

You should set a test cookie first with `set_test_cookie()`, and then on a subsequent request check for it with `test_cookie_worked()`.

The function doesn't test if cookies work, it checks specifically if the test cookie was successfully set - which has a consequence of checking if cookies work.

Unless you use `set_test_cookie()`, `test_cookie_worked()` will always fail.

# algorithm - 查找所有 n 位二进制数，其中 r 个相邻数字为 1

> ID：10510060
> 
> 赞同：3
> 
> 时间：2012-05-09T04:55:54.360
> 
> 标签：algorithm, math, binary

让我用一个例子来解释。如果 n=4 且 r=2 表示所有 4 位二进制数，因此相邻的两个数字可以是 1。所以答案是 0011 0110 1011 1100 1101

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:45:53.703

> 问：我无法找出模式或算法。

提示：11 可以从位置 0、1 或 2 开始。在任一侧，数字必须为零，因此唯一的“空闲”数字位于剩余位置，并且可以循环遍历所有可能的值。

例如，如果有 n=10 个数字并且您正在寻找 r=3 个相邻的数字，则模式是

```
x01110y 
```

其中*x*和*y*可以循环遍历剩余五个自由数字的所有可能的后缀和前缀。请注意，在两侧，前导零和尾随零被丢弃，在*x0111*和*1110y*中留下六个空闲数字。

这是一个使用 Python 的示例：

```
from itertools import product

def gen(n, r):
    'Generate all n-length sequences with r fixed adjacent ones'
    result = set()

    fixed = tuple([1] * r + [0])
    for suffix in product([0,1], repeat=n-r-1):
        result.add(fixed + suffix)

    fixed = tuple([0] + [1] * r + [0])
    rem = n - r - 2
    for leadsize in range(1, rem):
        for digits in product([0,1], repeat=rem):
            result.add(digits[:leadsize] + fixed + digits[leadsize:])

    fixed = tuple([0] + [1] * r)
    for prefix in product([0,1], repeat=n-r-1):
        result.add(prefix + fixed)

    return sorted(result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:30:49.067

我将从简化问题开始。一旦你为最简单的情况找到了解决方案，就对其进行概括，然后尝试对其进行优化。

首先设计一个算法，找出给定数字是否有“r”个相邻的 1。一旦你有了它，蛮力的方法是遍历所有带有“n”位的数字，用你刚刚开发的算法检查每个数字。

现在，您可以寻找优化它。例如：如果您知道“r”是偶数还是奇数，您可以减少要查看的数字集。KNR 给出的计数 1 的算法是设置位数的顺序。因此，您排除了一半复杂度低于实际逐点比较的情况。也可能有更好的方法来减少这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:10:34.323

非常简单的递归解决方案的有趣问题。德尔福。

```
 procedure GenerateNLengthWithROnesTogether(s: string;
    N, R, Len, OnesInRow: Integer; HasPatternAlready: Boolean);
  begin
    if Len = N then
      Output(s)
    else
    begin
      HasPatternAlready := HasPatternAlready or (OnesInRow >= R);
      if HasPatternAlready or (N - Len > R) //there is chance to make pattern}
       then
        GenerateNLengthWithROnesTogether('0' + s, N, R, Len + 1, 0, HasPatternAlready);
      if (not HasPatternAlready) or (OnesInRow < R - 1) //only one pattern allowed
      then
        GenerateNLengthWithROnesTogether('1' + s, N, R, Len + 1, OnesInRow + 1, HasPatternAlready);
    end;
  end;

begin
  GenerateNLengthWithROnesTogether('', 5, 2, 0, 0, False);
end;

program output:
N=5,R=2
11000  01100 11010  00110
10110  11001 01101  00011
10011  01011

N=7, R=3
1110000 0111000 1110100 0011100
1011100 1110010 0111010 1110110
0001110 1001110 0101110 1101110
1110001 0111001 1110101 0011101
1011101 1110011 0111011 0000111
1000111 0100111 1100111 0010111
1010111 0110111 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:55:42.623

正如我在上面的评论中所说，我仍然不清楚输出集的全部限制。但是，可以改进下面的算法以涵盖您的最终情况。

在我描述算法之前，有一个观察结果：让*S*重复次数，`1`D*是*我们可以用来生成有效输出的所有可能后缀的集合。因此，位串（S 后跟 0 位，位串*D*后跟 0 位）是算法的有效输出。此外，所有字符串都是有效输出（是*右转*函数，右侧消失的位从左侧进入）。这些将生成位串到. 除了这些旋转之外，解决方案和是可以由该对生成的有效位串 ( *S*`m`*`S0D0`*`ror(S0D0, k)``0<=k<=n-m``ror`*`S0D0``0D0S``S0D1``1D0S`*, *D* )。****

 **因此，该算法只是简单地枚举所有有效的*D位字符串，并为每个 (* *S* , *D* ) 对生成上述集合。*如果在D*部分允许多个`m`1 一起使用，则为简单的位枚举。如果不是，它是一个递归定义，其中 D 是与和相同算法的输出集。*`n'=n-(m+2)``m' is each of {m, m-1, ..., 1}`*

 *当然，这个算法会产生一些重复。我能想到的情况是`ror(S0D0,k)`匹配其中一种模式`S0E0`，`S0E1`或`1E0S`。对于第一种情况，您可以停止为更大的`k`值生成更多输出。`D=E`生成器会处理这些。您也可以简单地删除其他两种情况，但您需要继续旋转。

* * *

我知道有答案，但我想看看算法在起作用，所以我实现了一个粗略的版本。事实证明，边缘情况比我意识到的要多。我没有为`family()`函数的最后两个产量添加重复检查，这会导致输出重复`11011`，但其中大部分都被消除了。

```
def ror(str, n):
    return str[-n:]+str[:-n]

def family(s, d, r):
    root = s + '0' + d + '0'
    yield root  # root is always a solution
    for i in range(1, len(d)+3):
        sol=ror(root, i)
        if sol[:r]==s and sol[r]=='0' and sol[-1]=='0':
            break
        yield sol
    if d[-r:]!=s: # Make sure output is valid
        yield s + '0' + d + '1'
    if d[:r]!=s:  # Make sure output is valid (todo: duplicate check)
        yield '1' + d + '0' + s

def generate(n, r):
    s="1"*r
    if r==0: # no 1's allowed
        yield '0'*n
    elif n==r: # only one combination
        yield s
    elif n==r+1: # two cases. Cannot use family() for this
        yield s+'0'
        yield '0'+s
    else:
        # generate all sub-problem outputs
        for rr in range(r+1):
            if n-r-2>=rr:
                for d in generate(n-r-2, rr):
                    for sol in family(s, d, r):
                        yield sol 
```

您可以将其用作`[s for s in generate(6,2)]`，或在循环中用作

```
for s in generate(6,3):
    print(s) 
```***

# android - 如何在单击按钮时更改按钮的名称？

> ID：10510062
> 
> 赞同：0
> 
> 时间：2012-05-09T04:55:59.117
> 
> 标签：android, button, onclick

在我的计算器应用程序中，我想要一个反向按钮，单击该按钮会更改其他按钮的文本。就像罪与罪相反等。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:02:10.947

您可以在该按钮的 onclick 事件中更改按钮的文本。比如说

```
Button btn = (Button)findViewById(R.id.button1);
btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

            if(btn.getText().toString().trim().equals("sin")){
                btn.setText("sin inverse");
            }else if(btn.getText().toString().trim().equals("sin inverse")){
                btn.setText("sin");
            }

            }
        }); 
```

我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:26:02.957

虽然其他答案完全正确地向您展示了如何重命名按钮，但我建议另一种设计更简洁的解决方案：为“sin”和“sin inverse”设置**不同的按钮**，并在单击“Inverse”时**使它们可见/不可见**按钮。这样您就可以编写干净的点击处理程序，而不必使用大量的“if (isInverseMode()...)”。

为了使其正常工作，您只需在 XML 布局文件中为反向操作声明一些附加按钮并将它们设置为`android:visibility="gone"`.

如果您随后将一个可见按钮设置为不可见，并将其旁边的下一个不可见按钮设置为在代码中可见，那么用户的效果看起来就像您交换了一个按钮（因此他只注意到按钮的文本发生了变化） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:02:48.247

这是可能的。

只需在按钮的 onClick 方法中重新设置按钮文本。

```
buttonId.setText("Your button text"); 
```

从您所说的来看，尽管听起来您想更改按钮功能以及文本...在这种情况下，您需要在 onClick 方法中放置一个 if 语句来处理两个按钮状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T05:46:09.973

在按钮上设置文本会随时提供帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T05:25:37.720

这段代码可以帮助你..

```
final Button btn = (Button)findViewById(R.id.button1);
btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

btn.setText(new StringBuilder(btn.getText().toString().trim()).reverse());
        }
    }); 
```

# javascript - Javascript对象引用链接到数组中的对象？

> ID：10510063
> 
> 赞同：8
> 
> 时间：2012-05-09T04:55:58.887
> 
> 标签：javascript

如果我有一个对象：

```
var array = [];
var theobject = null;

array.push({song:"The Song", artist:"The Artist"}, {song:"Another Song", artist:"Another Artist"}); 
```

我这样做：

```
for(var i = 0; i < array.length; i++)
if(array[i].song == "The Song") {
theobject = array[i];
break;
} 
```

如果我然后通过执行以下操作更改对象：

```
theobject.song = "Changed Name"; 
```

我遇到了问题，尽管我自己尝试仅将“theobject.song”设置为等于“Changed Name”，但 array[0].song 也设置为“Changed Name”。

我想要的是“theobject.song”变成“Changed Name”，而array[0].song 仍然是“The Song”。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T05:01:50.507

您将永远不会在循环中获得对您的对象的引用。尝试：

```
for(var i = 0; i < array.length; i++)
 if(array[i].song === "The Song") {
 theobject = array[i];
 break;
} 
```

这将提供对对象的引用，并且您将能够更改 objects`song`属性。

如果要使用对象的副本，则必须进行手动复制。例如

```
function clone(obj) {
  var copy = {};
  for (var attr in obj) {
   if (obj.hasOwnProperty(attr)) {
     copy[attr] = obj[attr];
   }
  }
  return copy;
} 
```

你的循环变成：

```
for(var i = 0; i < array.length; i++)
 if(array[i].song === "The Song") {
 theobject = clone(array[i]);
 break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-10T16:08:06.177

可以使用 Object.assign() 仅复制其值而无需引用。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

```
var array = [];
var theobject = null;

array.push({
  song:"The Song", 
  artist:"The Artist"
  }, 
  {
  song:"Another Song", 
  artist:"Another Artist"
});

for(var i = 0; i < array.length; i++)
  if(array[i].song == "The Song") {
    theobject = Object.assign( {}, array[i] );
    break;
  }

theobject.song = "Changed Name";

console.log( array );
console.log( theobject );
```

# android - 如何获得不同行的时间

> ID：10510064
> 
> 赞同：0
> 
> 时间：2012-05-09T04:56:03.473
> 
> 标签：android

我创建了一个应用程序，其中消息是从 Web 服务发送的。我将响应存储在列表视图中。当响应保存在列表视图中时，它为每一行提供相同的时间，我想要不同的最新时间，但较旧的时间不会改变。请给我一些想法。代码是

```
 public class WebMessageAdapter extends ArrayAdapter<WebMessageCore>{

        Context _Context;
        ArrayList<WebMessageCore> _WebMsgList;
        WebMessageCore _WebMsgCore;
        TextView _MsgContent;
        private LayoutInflater mInflater;
        ImageButton Arrow;
        GabrielApplication application;
        public WebMessageAdapter(Context context, int resource,
         ArrayList<WebMessageCore> contactList) {
            super(context, resource,  contactList);
            _Context = context;
            _WebMsgList = contactList;
            mInflater = LayoutInflater.from(context);
        }

        public int getCount() {
            return _WebMsgList.size();
        }

        public WebMessageCore getItem(int position) {
            return _WebMsgList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.custom_row_view, null);
                holder = new ViewHolder();
                holder.txtName = (TextView) convertView.findViewById(R.id.name);
                holder.txtmessage = (TextView) convertView.findViewById(R.id.meassage);
                holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);
                holder.txtdate=  (TextView ) convertView.findViewById(R.id.datetime);
               //holder.Arrow =  (ImageButton)convertView.findViewById(R.id.settingArrow);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            _WebMsgCore=_WebMsgList.get(position);
            holder.txtName.setText(_WebMsgCore.getName());
            holder.txtmessage.setText(_WebMsgCore.getMessage());
           holder.txtPhone.setText(_WebMsgCore.getMobileNo());
           Arrow.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    Intent newActivity =  new Intent(_Context, ContactInfoActivity.class);
                    _Context.startActivity(newActivity);
            /*      
            Intent intent = new Intent(_Context, ContactInfoActivity.class);
                    GabrielUtil.replaceContentView(application.getGroupContext(),
                            GBConstants.contact_info, intent);*/
                }
            });

           String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
           holder.txtdate.setText(currentDateTimeString);
            return convertView;

        }

        static class ViewHolder {
            TextView txtName;
            TextView txtmessage;
            TextView txtPhone;
            TextView txtdate;
            ImageButton Arrow;
        }
    }' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:26:26.157

线上的实际问题

```
String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date()); 
```

上面的行给出了相同的日期格式，例如 2012 年 5 月 9 日下午 4:36:12。因为该`getView()`方法在我的电脑上在 650 毫秒内执行，结果相同。时间可能会因电脑的配置而异。所以你可以尝试使用替换上面的行

```
 SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm:ss.SSS a");
        Date resultdate = new Date((new Date()).getTime());
        String currentDateTimeString = sdf.format(resultdate); 
```

# android - 如何启用拖动多个 ImageView？

> ID：10510067
> 
> 赞同：0
> 
> 时间：2012-05-09T04:56:21.787
> 
> 标签：android, touch, imageview

在我将多个添加`ImageViews`到 a`LinearLayout`并实现`onTouch`事件后，仅对最后添加`ImageView`的和之前`ImageViews`的所有不启用触摸。什么是可能的解决方案？

我已经尝试了来自 android 开发者博客的代码： [http ://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:21:33.230

该示例中的多点触控设计用于多点触控单个视图，而不是同时触控多个视图。

这可能会有所帮助：[Android 为多个 ImageViews 触发 onTouch 事件](https://stackoverflow.com/questions/5222688/android-firing-ontouch-event-for-multiple-imageviews)

如果您想提供多点触控 ImageView 的效果，您可能正在寻找的解决方案是在这些视图之上放置另一个视图，它允许您捕获所有触摸事件并将适当的操作传递给它下面的视图。

根据我的经验，使用 SurfaceView 并自己将图像渲染到视图要容易得多，但如果您想利用 View 的其他行为，这将不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:26:35.057

Android Launcher 应用支持使用触摸界面的可移动视图。Launcher 对象模型包括`DragLayer`、`DragSource`、`DragController`和等对象`DropTarget`。

使用这个概念有一个很好的关于[在 Android 中移动视图](http://blahti.wordpress.com/2011/02/10/moving-views-part-3/#comment-83)的教程。

看看那个，我认为它是你需要的。

# iphone - iPhone：如何在视图中随机播放按钮

> ID：10510070
> 
> 赞同：1
> 
> 时间：2012-05-09T04:56:36.237
> 
> 标签：iphone, objective-c, ios5

我有很多没有。我的视图上的按钮，我想洗牌按钮（改变位置）那么我怎样才能洗牌我的视图中的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:12:53.860

你可以这样做

1.  使用一组 CGPoints 创建一个数组，您需要将这些点存储为字符串。
2.  在 layoutSubViews 方法中设置如下：

    ```
     -(void)layoutSubViews{
       [self.subviews enumerateObjectsUsingBlock:^(id object, NSUInteger idx, BOOL *stop) {
          CGPoint newPoint = CGPointFromString([positionsArray objectAtIndex:idx]);
         object.frame = CGRectMake(newPoint.x,newPoint.y,object.frame.size.width,object.frame.size.height);
    }]; 
    ```

    }

3.  然后你需要洗牌位置数组中的位置，你可以在这里看到一个示例方法：[How to Shuffle an Array](http://iphonedevelopment.blogspot.com/2008/10/shuffling-arrays.html)

4.  现在，每次您需要洗牌时，您都可以`-(void)setNeedsLayout`在视图上调用。

还有更多选择，但这是我首先想到的。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:21:59.610

采用`arc4random()`

并更改按钮的位置

在你的`.h file`：`UIButton *buttonsarray[10];`

在你的`.m file`：

```
 // Make array of button using following way.I used this method to creates button and you can use yours.
 - (void)viewDidLoad {
     [super viewDidLoad];

      float y = 5;
      int x = 0;
      int count = 0;
      for (int i = 0 ; i < 10; i++)
     {
        count ++;
        buttonsarray[i] = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        buttonsarray[i].frame =  CGRectMake(x, y, 100, 100);
       [buttonsarray[i] setTitle:[NSString stringWithFormat:@"%d",i+1] forState:UIControlStateNormal];
         x = x + 105;
        [self.view addSubview:b[i]];
        if(count == 3)
       {
        count = 0;
        x = 0;
        y = y+ 105;
      }

    }
}

  // This function will soufflé your buttons
 - (IBAction)btnClicked:(id)sender
   {
     int n = 10;
     int swaper;
     for (int i = 0 ; i < 10 ; i++)
     {
       int r = arc4random()%n;
       if(r != swaper){
        swaper = r;
        CGRect r1 = buttonsarray[i].frame;      
        buttonsarray[i].frame = buttonsarray[swaper].frame;
        buttonsarray[swaper].frame = r1; 

        n--;
    }

  }
} 
```

希望对你有帮助..

# java - Facebook API / Android：带有图像附件的墙贴发布不起作用

> ID：10510071
> 
> 赞同：1
> 
> 时间：2012-05-09T04:56:46.363
> 
> 标签：java, facebook, facebook-graph-api, facebook-android-sdk

我有以下代码。

它可以工作并发布消息部分，但附件部分不起作用。我怀疑这与将 JSON 作为字符串传递有关。

脸书回归`"{"id":"23522646737635675"}`。所以它不是一个错误。

```
 Bundle params = new Bundle();

        params.putString("message", message);

        JSONObject attachment = new JSONObject();

        attachment.put("href", URLEncoder.encode("http://a.espncdn.com/photo/2010/0523/pg2_a_cricket_576.jpg"));
        attachment.put("name", "Cricket Fantasy");
        attachment.put("caption", "New team");
        attachment.put("description","Description about Application");

        JSONObject media = new JSONObject();

        media.put("type", "image");
        media.put("src", URLEncoder.encode("http://a.espncdn.com/photo/2010/0523/pg2_a_cricket_576.jpg"));
        media.put("href", URLEncoder.encode("http://a.espncdn.com/photo/2010/0523/pg2_a_cricket_576.jpg"));
        attachment.put("media", media);

        params.putString("attachement", attachment.toString());

        String response = mFacebook.request("me/feed", params, "POST"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:39:31.983

您不能将 json 编码的数据发送到 facebook，这样是行不通的。每个参数都应该在 POST 正文中。

此外，“附件”方式是一种旧方式，不再使用。它应该看起来像：

```
Bundle params = new Bundle();

params.putString("message", message);
params.put("name", "Cricket Fantasy");
params.put("caption", "New team");
params.put("description","Description about Application");
params.put("url", URLEncoder.encode("http://a.espncdn.com/photo/2010/0523/pg2_a_cricket_576.jpg"));

String response = mFacebook.request("me/feed", params, "POST"); 
```

使用 url 上传图片的官方参考可以在这里找到：[Uploading Photos to the Graph API via a URL](https://developers.facebook.com/blog/post/526/)。发布到提要的参数可以在[用户对象](http://developers.facebook.com/docs/reference/api/user/#posts)文档中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T10:46:05.613

```
Bundle params = new Bundle();
                   // params.putString("multipart/form-data", imgurl);
                    params.putByteArray("multipart/form-data",byteArray);

                    params.putString("caption", txtcaption.getText().toString());
                    /* make the API call */
                    new GraphRequest(
                            AccessToken.getCurrentAccessToken(),
                            "/me/photos",
                            params,
                            HttpMethod.POST,
                            new GraphRequest.Callback() {
                                public void onCompleted(GraphResponse response) {
                                    /* handle the result */
                                    Log.e("responseImagedata---", response.toString());

                                }
                            }
                    ).executeAsync(); 
```

# php - MYSQL SELECT 与 COUNT、FROM、WHERE、GROUP BY

> ID：10510072
> 
> 赞同：0
> 
> 时间：2012-05-09T04:56:49.810
> 
> 标签：php, mysql, select, count, group-by

我在向该查询添加 where 子句时遇到问题。我希望它从“SAT AM/SUN PM”列是“是”和“已确认”列是“是”的位置中进行选择。

这在没有 'WHERE shift_times='SAT AM/SUN PM' 的情况下有效——它不会输出任何内容：

```
 $query = "SELECT position, COUNT(confirmed) FROM volConfirm WHERE shift_times='SAT AM/SUN PM' GROUP BY position"; 

    $result = mysql_query($query) or die(mysql_error());

    // Print out result
    while($row = mysql_fetch_array($result)){
        echo "There are ". $row['COUNT(confirmed)'] ." ". $row['position'] ." " . $row['shift_times'] . " volunteers.";
        echo "<br />"; 
```

更多信息：该表包含以“是”或“0”（表示否）确认的记录，并且 shift_times 是 SAT AM/SUN PM 或 SAT PM/SUN AM。有几个不同的位置。我正在尝试显示最终结果，例如：

有：“SAT AM/SUN PM”的“30”“艺术”志愿者

有：“SAT PM/SUN AM”“30”“艺术”志愿者

理想情况下，行会旋转，所以下面的回声将是“SAT PM/SUN AM”的逆数据——但这似乎有点棘手......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:51:58.200

I changed your select statement to select and group by the shift times, so one row would be selected per position, per shift time. I added an alias of 'cnt' to your count() and updated the php to use cnt in the echo statement No closing bracket at the end of your while loop (could be a copy and paste issue)

```
$query = "SELECT COUNT(confirmed) as cnt
          , position
          , shift_times 
         FROM volConfirm 
         WHERE confirmed='yes'  
         GROUP BY shift_times, position
         order by shift_times, position"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result))
{
    echo "There are ". $row['cnt'] ." ". $row['position'] ." " . $row['shift_times'] . " volunteers.";
    echo "<br />";
} 
```

# c++ - size_t 在 C++ 中转换/强制转换为字符串

> ID：10510077
> 
> 赞同：8
> 
> 时间：2012-05-09T04:57:29.087
> 
> 标签：c++, string

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

如何`string`在 C++ 中将整数值转换为 a？

这是我尝试过的：

```
for(size_t i = 0;vecServiceList.size()>i;i++)
{
    if ( ! vecServiceList[i].empty() )
    {
        string sService = "\t" + i +". "+  vecServiceList[i] ;
    }
} 
```

这是错误：

```
invalid operands of types 'const char*' and 'const char [3]' to binary 'operator+' 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T05:07:27.787

您可以使用字符串流：

```
#include <sstream>

...

for (size_t i = 0; ... ; ...)
{
    std::stringstream ss;

    ss << "\t" << i << vecServiceList[i];

    std::string sService = ss.str();

    // do what you want with sService
} 
```

# protobuf-net - Protobuf-Net ArgumentNullException

> ID：10510081
> 
> 赞同：1
> 
> 时间：2012-05-09T04:57:41.380
> 
> 标签：protobuf-net

我试图使用 protobuf-net 发送一个类（称为 RPCMessage），其中包括另一个自定义类（称为 MessageArguments）的列表。我已经根据我希望参数的值类型（在本例中为浮点数）扩展了 MessageArguments 以具有不同的类。我收到以下异常：ArgumentNullException：已知类型不能为空。如果有帮助，我正在使用 .Net 3.5。

序列化代码：

```
public static void EncodeMessage(MessageType messageType, object messageClass, ref NetOutgoingMessage outMessage){
    byte[] serialised;

    var serializableObject = messageClass as RPCMessage;
    var memStream = new MemoryStream();
    Serializer.SerializeWithLengthPrefix(memStream, serializableObject,
    PrefixStyle.Base128);       
} 
```

存储消息的代码：

```
[Serializable,
ProtoContract,
ProtoInclude(3, typeof(FloatArgument))]
public class RPCMessage {
    [ProtoMember(1)]
    public byte code;
    [ProtoMember(2)]
    public List<MessageArgument> args;

    public RPCMessage(){}

    public RPCMessage (byte _code, List<MessageArgument> _args){
        code = _code;
        args = _args;
    }
} 
```

存储消息参数的代码：

```
[Serializable,
ProtoContract,
ProtoInclude(3, typeof(FloatArgument)))]
public class MessageArgument{
    [ProtoMember(1)]
    public byte id; 

    public MessageArgument(){}

    public MessageArgument(byte _id){
        id = _id;
    }
} 
```

最后，由

```
List<MessageArgument> args = new List<MessageArgument>();
args.Add(new FloatArgument(0, 1f));
MessageParser.EncodeMessage(type, new RPCMessage(0, args), ref outMessage); 
```

我知道我可能遗漏了一些基本的东西，但我一生都无法弄清楚那是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:39:23.053

我没有足够的能力来完全复制，但有一些观察：

*   `[ProtoInclude]`表示继承层次结构；不可能同时从and`FloatArgument`派生，因此我将假设（通过命名）包含 on是不正确的，应该删除`MessageArgument``RPCMessage``RPCMessage`
*   由于您使用的是`object`，因此您不能使用通用 API；改为尝试：

    ```
    Serializer.NonGeneric.SerializeWithLengthPrefix(memStream,
         serializableObject, PrefixStyle.Base128, 1); 
    ```

这然后成功地序列化和克隆。

# web - 如何分离liferay web server和application server

> ID：10510082
> 
> 赞同：1
> 
> 时间：2012-05-09T04:57:42.493
> 
> 标签：web, liferay

我需要将 liferay 分离为 apache web 服务器中的 web 组件，并将服务分离到 apache tomcat 中。谁能给我一些关于如何做同样事情的指示？

谢谢 L Raj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:18:38.857

Apache 无法执行任何 jsp 页面或 servlet，因此您只能将静态文件（如图像、css、js 等）与动态文件（jsp、servlet 等）分开。

因此，正如 Olaf 在他的评论中指出的那样，我们需要有关您的目标的更多信息或使用 Apache 功能来进行拆分。

此致。

# javascript - 查找 Javascript 函数是否有闭包

> ID：10510084
> 
> 赞同：1
> 
> 时间：2012-05-09T04:57:58.553
> 
> 标签：javascript, reflection, closures

有没有办法找到给定的函数引用是否有一个闭包并最终访问封闭的变量？我正在寻找类似于“参数”属性的东西，但徒劳无功。

**编辑**：给定功能的外部或内部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:02:17.280

不，你永远不会知道。这就是为什么使用闭包来模拟私有成员的原因，因为你永远不知道里面是什么，因此是“私有的”。

# php - PHP使用来自MYSQL问题的动态数据创建文本文件

> ID：10510087
> 
> 赞同：2
> 
> 时间：2012-05-09T04:58:16.063
> 
> 标签：php, text

我正在使用 mysql db 字段用 php 编写一个文本文件，这些字段本质上是动态的。我无法保持列宽不变，请查看以下数据和列以更好地了解我的意思。

文本文件输出：

```
 450 65445 90900 87954          112
              90900 45875 24565 15484          KA01 23232 
```

上面的 php 脚本：

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");

if ($quer2[DCNO1]>0){fwrite($fh, str_pad($quer2[DCNO1],19, " ", STR_PAD_LEFT));} if ($quer2[DCNO2]>0) {fwrite($fh, str_pad($quer2[DCNO2],6, " ", STR_PAD_LEFT));} if ($quer2[DCNO3]>0) {fwrite($fh, str_pad($quer2[DCNO3],6, " ", STR_PAD_LEFT));} if ($quer2[DCNO4]>0) {fwrite($fh, str_pad($quer2[DCNO4],6, " ", STR_PAD_LEFT));} 
fwrite($fh, str_pad($dchd2['PO_No'],13, " ", STR_PAD_LEFT));
$stringData = "\n";
fwrite($fh, $stringData);

if ($quer2[DCNO5]>0) {fwrite($fh, str_pad($quer2[DCNO5],19, " ", STR_PAD_LEFT));} if ($quer2[DCNO6]>0) {fwrite($fh, str_pad($quer2[DCNO6],6, " ", STR_PAD_LEFT));} if ($quer2[DCNO7]>0) {fwrite($fh, str_pad($quer2[DCNO7],6, " ", STR_PAD_LEFT));} if ($quer2[DCNO8]>0) {fwrite($fh, str_pad($quer2[DCNO8],6, " ", STR_PAD_LEFT));}
fwrite($fh, str_pad($dchd2['Vehicle_no'],20, " ", STR_PAD_LEFT));
$stringData = "\n";
fwrite($fh, $stringData);

fclose($fh); 
```

现在，如果列中的一个值为 0，那么由于我的 IF 条件，空间会被删除，在这种情况下，我如何计算空间并给出这些额外的空间。

如果在我的 IF 条件下其中一个值为 0，则文本文件输出：

```
 450 90900           112
              90900 45875 24565 15484          KA01 23232 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:07:05.943

使用制表位 ("\t")。它确保不同行上的每个项目从相同的列开始。

这意味着当 item 的长度为 2 个字符且无法填充 4 个空格选项卡时，将添加 2 个空格。

请记住：不同的编辑器对制表符有不同的概念，有些通常插入空格而不是制表符。

*编辑：*实际上更简单的解决方案是有一个 else 子句并写 str_pad("", 20);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:36:21.517

您的代码非常繁忙，请尝试通过一个可以在一个地方处理“0”的函数来集中所有代码。类似于下面的内容（此代码尚未经过测试，但应该会给您正确的想法。

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");

function writepad($str,$pad)
{
    global $fh;
    if($str==0) $str=" "; //handle the case where str is 0, replace it with a space
    fwrite($fh,str_pad($str,$pad,STR_PAD_LEFT));
}
writepad($quer2[DCNO1],19);
writepad($quer2[DCNO2],6);
writepad($quer2[DCNO3],6);
writepad($quer2[DCNO4],6);
writepad($quer2['PO_No'],13); 

fwrite($fh, "\n");

writepad($quer2[DCNO5],19);
writepad($quer2[DCNO6],6);
writepad($quer2[DCNO7],6);
writepad($quer2[DCNO8],6);
writepad($quer2['Vehicle_no'],20); 

fwrite($fh, "\n");

fclose($fh); 
```

# php - MYSQL 连接 - 唯一 ID 位于 1 个表中

> ID：10510088
> 
> 赞同：0
> 
> 时间：2012-05-09T04:58:21.240
> 
> 标签：php, mysql, sql

我有 2 个表我想以一种奇怪/危险/非动态的方式连接。我无法控制这些表。我正在尝试从一个包含**事件 ID**但**不包含类别 ID**的表中提取摘要，但我需要引用另一个表以确保所述事件在所述类别中。此表同时包含**事件 id**和**cat id**。我正在尝试加入他们，但我一直没有得到任何回报。

我知道这很危险，但我也可以控制类别，所以我知道除非我指定，否则我的类别 ID 不会改变。因为它会自动增加 - 我的类别将是 1、2、3。

**我的表的要点**

```
*events_vevent*

 - ev_id 
 - catid

 ---

*events_vevdetail*

 - evdet_id
 - summary 
```

**我的代码**

```
$data = array();
for($i = 0; $i < 3; $i++){
    $summary = array();
    $query_summary = mysql_query("SELECT events_vevdetail.summary FROM 
                     events_vevdetail, events_vevent 
                     WHERE 'events_vevent.evdet_id = $i' LIMIT 5") 
    or die(mysql_error());

    while(($row = mysql_fetch_array($query_summary)))
        $summary[] = $row[0];

    switch($i){
        case 0:
            $data['cat1'] = $summary;
            break;
        case 1:
            $data['cat2'] = $summary;
            break;
        case 2:
            $data['cat3'] = $summary;
            break;
    }
}

echo json_encode($data); 
```

**解释**

所以我要做的是：因为我知道类别 1 的 ID 始终为 0，所以我想提取最近的 5 个帖子，但只提取类别 ID 0 中的帖子。类别 2 和 3 也是如此。*现在我'得到空数组。*我觉得我需要 2 个 mysql 查询（每个表一个）然后进行比较，但我不是 100% 确定，宁愿以正确的方式而不是漫长的方式。

**tl;博士**是我的 MYSQL 对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:32:27.983

此查询将返回每个类别的前 5 条记录。

```
SELECT e1 . *
FROM events_vevent e1
LEFT OUTER JOIN events_vevent e2 ON 
( e1.catid = e2.catid AND e1.ev_id < e2.ev_id )
GROUP BY e1.ev_id
HAVING COUNT( * ) < 5
ORDER BY catid, ev_id DESC 
```

# java-me - 无法通过诺基亚 C 系列捕获图像并将其发送到 Web 服务器

> ID：10510091
> 
> 赞同：1
> 
> 时间：2012-05-09T04:58:39.460
> 
> 标签：java-me

我正在 J2ME 中制作应用程序，使用此应用程序用户将能够捕获图像并同时将该图像上传到 Web 服务器，但每当我在诺基亚 C 系列中使用此应用程序时，我无法捕获图像，并且无论何时通过计算机使用此应用程序都可以捕获图像但发送命令不起作用，请查看问题并解决此问题，并指导我需要做什么以使此应用程序对我有用和有用………… …….谢谢阿米特在这里

```
public class myMidlet extends MIDlet implements CommandListener{
private Display display;
private Form form;
private Command exit, back, capture, camera, send;
private Player player;
private VideoControl videoControl;
private Video video;

int status = 0;
byte localData[];

public myMidlet() {
display = Display.getDisplay(this);
form = new Form("My Form");
    exit = new Command("Exit", Command.EXIT, 0);
    camera = new Command("Camera", Command.SCREEN, 1);
    back = new Command("Back", Command.BACK, 2);
    capture = new Command("Capture", Command.SCREEN, 3);
    send = new Command("Send", Command.OK, 1);
    form.addCommand(camera);
    form.addCommand(exit);
    form.setCommandListener(this);
}

public void startApp() {
    display.setCurrent(form);
}

public void pauseApp() {}

public void destroyApp(boolean unconditional){
    notifyDestroyed();
}

public void commandAction(Command c, Displayable s){
    String label = c.getLabel();
    if (label.equals("Exit")){
        destroyApp(true);
    } else if (label.equals("Camera")) {
        showCamera();
    } else if (label.equals("Back"))
        display.setCurrent(form);
    else if (label.equals("Capture")) {
        video = new Video(this);
        video.start();

        form.addCommand(send);
        form.removeCommand(camera);
    }
    else if( label.equalsIgnoreCase("Send") ){
        try {
            startSendOperation();
        } catch (Exception ex) {
        }

    }

}
    public boolean uploadImage( String uri, byte[] rawImage)throws Exception
{

HttpConnection httpConnection;
OutputStream    out;

// Open connection to the script
httpConnection = (HttpConnection)Connector.open( uri );

// Setup the request as an HTTP POST and encode with form data
httpConnection.setRequestMethod( HttpConnection.POST );
httpConnection.setRequestProperty( "Content-type", "application/
x-www-form-urlencoded" );

// Encode the imagedata with Base64
String encoded = Base64.encode( rawImage ).toString();

// Build the output and encoded string
String    output    = "imgdata=" + encoded;

// Set the content length header
httpConnection.setRequestProperty("Content-Length", Integer.toString
((output.getBytes().length)));

// Open the output stream and publish data
out = httpConnection.openOutputStream();
out.write( output.getBytes() );

// Flush the buffer (might not be necessary?)
out.flush();

// Here you might want to read a response from the POST to make
// sure everything went OK.

// Close everything down
if( out != null )
if( httpConnection != null )
httpConnection.close();

// All good
return true;
}

public void startSendOperation() throws Exception{

    boolean res = uploadImage( "http://www.xxx.com/postFolder?", localData);

}

public void showCamera(){
    try{
        player = Manager.createPlayer("capture://video");
        player.realize();
        videoControl = (VideoControl)player.getControl("VideoControl");
        Canvas canvas = new VideoCanvas(this, videoControl);
        canvas.addCommand(back);
        canvas.addCommand(capture);
        canvas.setCommandListener(this);
        display.setCurrent(canvas);
        player.start();
    } catch (IOException ioe) {} catch (MediaException me) {}
}

    class Video extends Thread {
    myMidlet midlet;
    public Video(myMidlet midlet) {
        this.midlet = midlet;
    }

    public void run() {
        captureVideo();
    }

    public void captureVideo() {
        try {
            byte[] photo = videoControl.getSnapshot(null);
            localData = photo;
            Image image = Image.createImage(photo, 0, photo.length);

            form.append(image);
            display.setCurrent(form);
            player.close();
            player = null;
            videoControl = null;
        } catch (MediaException me) { }
    }
};
}

class VideoCanvas extends Canvas {
private myMidlet midlet;

public VideoCanvas(myMidlet midlet, VideoControl videoControl) {
    int width = getWidth();
    int height = getHeight();
    this.midlet = midlet;

    videoControl.initDisplayMode(VideoControl.USE_DIRECT_VIDEO, this);
    try {
        videoControl.setDisplayLocation(2, 2);
        videoControl.setDisplaySize(width - 4, height - 4);
    } catch (MediaException me) {}
    videoControl.setVisible(true);
}

public void paint(Graphics g) {
    int width = getWidth();
    int height = getHeight();

    g.setColor(255, 0, 0);
    g.drawRect(0, 0, width - 1, height - 1);
    g.drawRect(1, 1, width - 3, height - 3);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:35:13.513

在 ShowCamera 方法中，而不是

```
Manager.createPlayer("capture://video"); 
```

尝试使用

```
Manager.createPlayer("capture://image"); 
```

# javascript - HTML 5 验证表单缺少操作？

> ID：10510094
> 
> 赞同：0
> 
> 时间：2012-05-09T04:59:07.543
> 
> 标签：javascript, html

我有以下内容：

```
<form class="form" id="main-form" 
    data-entity="Page"
    data-action=@(action)
    data-href="/Admin/Contents/Json@(action)" > 
```

它可以找到并且我不需要任何操作，因为我使用 javascript 和 json 处理我的提交。但是 MVC 总是给我一个警告（绿色下划线）说。HTML5 验证，表单缺少操作。HTML5 中的表单元素是否无效而没有任何操作？我被要求提供一个似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:35:55.370

根据当前的 W3C HTML5 草案，[该`action`属性可以省略](http://www.w3.org/TR/html5/attributes-common-to-form-controls.html#form-submission-0)，默认为空字符串。我认为这里已经很长时间没有变化了。

# google-app-engine - mapreduce 的参数

> ID：10510095
> 
> 赞同：0
> 
> 时间：2012-05-09T04:59:13.950
> 
> 标签：google-app-engine, mapreduce

我正在使用 appengine 的 Java mapreduce 模块我收到以下信息消息

超出映射器配额。中止请求，直到配额被补充。如果您希望映射器作业更快完成，请考虑增加 mapreduce.mapper.inputprocessingrate（默认 1000）。

任务参数。
队列名称 = 默认
速率 = 1/s
bucketsize = 1

我有大约 2000 个 KIND 实体，我只是在 map() 调用中进行记录

需要提供哪些 mapreduce/task 参数来消除该信息消息。

-阿斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:50:56.270

I believe that this is a special quota in mapreduce implemented by the framework itself. It's designed to limit the speed that it can consume resources, so that mapreduce does not run through available app engine quota too quickly. It looks like it denotes the maximum overall rate of map() calls/second.

Try increasing the `mapreduce.mapper.inputprocessingrate` property in the configuration for your map job. Or, just to test, you can change the default, defined in `mapreduce/AppEngineJobContext.java`:

```
public static final int DEFAULT_MAP_INPUT_PROCESSING_RATE = 1000; 
```

# php - php查询不起作用

> ID：10510098
> 
> 赞同：-2
> 
> 时间：2012-05-09T04:59:32.803
> 
> 标签：php, mysql

我正在尝试创建一个给出警告的用户登录表单，这是我的所有脚本

连接.php

```
<?php

$con = mysql_connect("localhost" , "xxx" , "xxxxxx");
if(!$con)
{
    die('Could Not Connect' . mysql_error());
}
else
{
    echo "User Connect". "<br>";
}
mysql_select_db("xxxx" , $con)
or die('Error: could not connect' . mysql_error());

echo "Database connected" . "<br>";

function dbQuery($sql)
{
    return mysql_query($sql) or die('Query Failed. ' . mysql_error());
}

function dbAffectedRows()
{
    global $dbConn;
    return mysql_affected_rows($dbConn);
}

function dbFetchArray($result, $resultType = MYSQL_NUM)
{
    return mysql_fetch_array($result, $resultType);
}
function dbFetchAssoc($result)
{
    return mysql_fetch_assoc($result);
}
function dbFetchRow($result)
{
    return mysql_fetch_row($result);
}
function dbFreeResult($result)
{
    return mysql_free_result($result);
}
function dbNumRows($result)
{
    return mysql_num_rows($result);
}
function dbSelect($dbName)
{
    return mysql_select_db($dbName);
}

?> 
```

函数.php

```
<?php
require_once 'connect.php';
    $userName = $_POST['txtUserName'];
    $password = $_POST['txtPassword'];

//$sql = mysql_query("SELECT user_id FROM user WHERE user_name = '$userName' AND user_password = '$password'") or die('error in query!' . mysql_error()); 
$sql = "SELECT user_id FROM user WHERE user_name = '$userName' AND user_password = '$password'"; 

echo $result = dbQuery($sql);

    if(dbNumRows($result)==1){
        $row = dbFatchAssoc($result);
        echo '$row[user_id]';
        }

?> 
```

它在下面的connect.php中给出警告

> 警告：mysql_num_rows() 期望参数 1 是资源，在 connect.php 中给出布尔值

有人请帮助我，在此先感谢

我添加了整个警告表看看

( ! ) 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在 C:\wamp\www\tb_ad\connect.php 第 48 行调用堆栈中给出

```
#   Time    Memory  Function    Location
1   0.0032  367408  {main}( )   ..\function.php:0
2   0.0130  385640  dbNumRows( )    ..\function.php:15
3   0.0130  385672  mysql_num_rows ( )  ..\connect.php:48 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:07:18.090

Two things missing here; 1) Parameter sanitising and 2) error checking.

Without converting your app to [PDO](http://php.net/manual/en/book.pdo.php) (which you *really* should do), try the following

```
$sql = sprintf("SELECT user_id FROM user WHERE user_name = '%s' AND user_password = '%s'",
    mysql_real_escape_string($_POST['txtUserName']),
    mysql_real_escape_string($_POST['txtPassword']));
$result = mysql_query($sql);
if ($result === false) {
    throw new Exception(mysql_error());
} 
```

You should also be checking

*   If the request method is `POST`
*   If the `txtUserName` and `txtPassword` items are set in `$_POST`

For development, I'd also recommend putting this at the top of your script (or preferably setting these in `php.ini`)

```
ini_set('display_errors', 'On');
error_reporting(E_ALL); 
```

Also, storing plain text passwords is textbook bad. I suggest you do some more reading on software application security. Here's a starting point - [https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:12:09.703

`echo $result = dbQuery($sql);`如果查询的执行不成功，则此行返回 FALSE。

所以你应该添加类似的东西：

```
if (!$result)
{
    //handle the error
} 
```

# iphone - 如何在拆分视图中将选项卡图标和标题添加到选项卡项目

> ID：10510103
> 
> 赞同：0
> 
> 时间：2012-05-09T05:00:14.610
> 
> 标签：iphone, objective-c, uitabbarcontroller, uisplitviewcontroller, uitabbar

我正在实现一个基于拆分视图的应用程序。

我在左视图/根视图底部的应用程序中有 3 个用于 3 个根视图的选项卡。为此，我将三个视图控制器添加到应用程序删除的标签栏。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    RootViewController *tab1 = [[RootViewController alloc] init];
    DashboardViewController *tab2=[[DashboardViewController alloc] initWithNibName:@"DashboardViewController" bundle:nil];
    SendUpdatesViewController *tab3=[[SendUpdatesViewController alloc] initWithNibName:@"SendUpdatesViewController" bundle:nil];

    NSArray *tabViewArray=[[NSArray alloc] initWithObjects:tab1,tab2,tab3,tabBar,  nil];
    tabBar=[[UITabBarController alloc] init];
    [tabBar setViewControllers:tabViewArray];

    self.splitViewController.viewControllers = [NSArray arrayWithObjects:tabBar,_detailViewController, nil];

    self.window.rootViewController = self.splitViewController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在我需要为这些选项卡添加标题图标和相应的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:16:53.273

您可以使用 title-property 为您的视图控制器分配标题。默认情况下，这些标题显示在标签栏中。您还可以为每个控制器自定义 UITabbarItem。在此处阅读更多相关信息：http: [//developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/cl/UITabBarItem](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/cl/UITabBarItem)

一个好的解决方案是覆盖视图控制器中的“title”和“tabBarItem”属性的getter，利用惰性实例化来确保在第一次访问它们时正确设置属性。这样，您还可以将此代码包含在每个视图控制器的实现中。

# perl - 保持特定位数的简单 Perl 数学

> ID：10510109
> 
> 赞同：3
> 
> 时间：2012-05-09T05:01:32.583
> 
> 标签：perl, math

我正在尝试做一些简单的数学运算，例如

```
$example = (12 - 4); 
```

但我需要个位数的答案才能在它们前面有一个 0 所以 $example 应该是

```
08 not 8 
```

我知道我可以做类似的事情

```
if ($example < 10){
    $result = "0$example";
} 
```

但是我必须认为有一种方法可以指定在进行这样的简单数学运算时希望输出的位数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T05:12:07.843

我建议在打印到屏幕之前保存这样的格式。然后，您可以使用 printf 或 sprintf 来格式化您想要的数字。

```
my $example = 12 - 4;
printf("%02d", $example); 
```

将打印：

```
08 
```

要将其保存在字符串中以供以后使用 sprintf：

```
my $example = 12 - 4;
$formatted = sprintf("%02d", $example);

print "$formatted\n"; 
```

如果您需要填写小数位，请使用以下命令：

```
my $example = 12 - 4;
printf("%0.2f", $example); 
```

将打印：

```
8.00 
```

# java - Map or String[]?

> ID：10510118
> 
> 赞同：1
> 
> 时间：2012-05-09T05:02:41.330
> 
> 标签：java, arrays, string, performance, map

I am creating a Java EE client where I need to make a call to a node (js) server to get the response. So I made a single class through which requests are made to node server. Everytime I get a response, I need to send back the response code and the response itself. So I thought of creating a String array which would contain the response code and the response.

Here is my class:

```
import javax.ws.rs.core.MediaType;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.api.client.filter.LoggingFilter;
import com.sun.jersey.core.impl.provider.entity.StringProvider;

public class RequestHandler {

/**
 * Makes a HTTP Request for a given url. The type
 * determines which type of request, post or get,
 * will be made. The params cane be in form of
 * name=value pair or JSON format.
 * 
 * @param type Request method. 1 - Get, 2 - Post.
 * @param url url string to which request has to be 
 * made.
 * @param path path of the resource or service for a
 * url.
 * @param params request parameters. Can be either
 * name=value pair or JSON request.
 * 
 * @return String representation of the response.
 * 
 */
public static String[] makeRequest(int type, String url, String path, String params) {
    String[] response = new String[2];
    ClientResponse clientResponse = null;
    try {
        ClientConfig config = new DefaultClientConfig();
        config.getClasses().add(StringProvider.class); 
        Client client = Client.create(config);

        WebResource service =
                client.resource(url); 
        client.addFilter(new LoggingFilter());
        service.path("rest");

        // 1 - GET, 2 - POST
        switch (type) {
            case 1: {
                System.out.println("Making GET request to: " + url + path);
                System.out.println("Request Params: " + params);
                clientResponse = service.path(path).type(MediaType.APPLICATION_JSON_TYPE).accept(MediaType.APPLICATION_JSON).get(ClientResponse.class); //TODO Code to be corrected, include params
                break;
            }
            case 2: {
                System.out.println("Making POST request to: " + url + path);
                System.out.println("Request Params: " + params);
                clientResponse = service.path(path).type(MediaType.APPLICATION_JSON_TYPE).accept(MediaType.APPLICATION_JSON).post(ClientResponse.class, params);
                break;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        response[0] = "500";
        response[1] = "Internal Server Error";
        return response;
    }

    response[0] = String.valueOf(clientResponse.getStatus());
    response[1] = clientResponse.getEntity(String.class);

    System.err.println("Response status: " + response[0]);

    return response;
    }//end of makeRequest()

}//end of class 
```

But I am not convinced by creating too much string objects which would cause performance issues. So I thought of creating a Map which would send back the response code and the response.

```
response.put(500, "Internal Server Error"); 
```

But again, creating a map with integer and checking everytime the response code creates overhead of boxing and unboxing of Integer object, which again could result in performance.

```
HashMap<Integer, String> response = RequestHandler.makeRequest(2, urlString, "/login", params);

if (response.containsKey(500)) {
 return Message.INTERNAL_SERVER_ERROR;
} 
```

Which one should I use for better performance? Or is there any better alternative out of it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:09:28.243

Given that a `HashMap` contains an array, plus a bunch of housekeeping items (size, threshold, load factor), a `String[]` array is going to be smaller (and thus, by one measure, more efficient) than a `HashMap`.

However, avoid [premature optimisation](http://c2.com/cgi/wiki?PrematureOptimization).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:10:20.147

I don't think it makes much of a performance difference either way. But for clarity I would suggest using a `Enums` or `static final` variables since you already know all the possible codes before hand. A HashMap would be good if you needed to add/remove data dynamically but that doesn't apply in this case.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:10:47.753

I think that you can define your own response object like this:

```
class Response{
   int status;
   String msg;
} 
```

# bash - Copying parts of a line within a specific context using bash

> ID：10510121
> 
> 赞同：0
> 
> 时间：2012-05-09T05:02:54.423
> 
> 标签：bash, text

> **Possible Duplicate:**
> [To Find a Particular line and copying a specific content within the line using bash scripting](https://stackoverflow.com/questions/10513155/to-find-a-particular-line-and-copying-a-specific-content-within-the-line-using-b)

I have a file `system.mss` which contains blocks of information like this one:

```
BEGIN lmb_bram_if_ctnlr
PARAMETER INSTANCE = ilmb_cntlr_0
PARAMETER HW_VER = 3.00.b
PARAMETER C_BASEADDR = 0x00000000
PARAMETER C_HIGHADDR = 0x0003ffff
BUS_INTERFACE SLMB = ilmb_0
BUS_INTERFACE BRAM_PORT = ilmb_cntlr_0_BRAM_PORT
END 
```

I want to copy the value for `PARAMETER C_HIGHADDR` into another file, but only for this kind of block; there are other blocks in the file, starting with different `BEGIN` lines, I want to ignore.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:02:15.277

> 这就是`grep`为了

实际上，不，那`sed`是为了。更具体地说，范围寻址模式`sed`非常适合这种类型的问题。

```
sed -n '/BEGIN lmb_bram_if_cntrl/,/END/s/PARAMETER C_HIGHADDR = //p' system.mss 
```

意思是，在从第一个正则表达式开始到最后一个正则表达式结束的一系列行中，执行以下操作；如果`PARAMETER C_HIGHADDR =`找到，将其删除并打印该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:19:37.727

*尽管我的答案中的方法有效，但更好的方法是`sed`按照[@tripleee 的答案](https://stackoverflow.com/a/10512100/990363)使用。*

这就是`grep`目的。要仅获取总长度为 8 行的`PARAMETER C_HIGHADDR`内部块的值，请执行以下操作：`BEGIN lmb_bram_if_cntrl`

```
grep 'BEGIN lmb_bram_if_cntrl' -A 7 "path/to/system.mss" | grep 'PARAMETER C_HIGHADDR' | cut -d = -f 2- > "path/to/outfile" 
```

`outfile`将按照它们被发现的顺序写入值，即

```
0x0003ffff
0x0000ffff 
```

– 注意每一行都会有一个前导空格。如果这让您感到困扰，请添加

```
| cut -c 2- 
```

在写出文件之前。

# wcf - C# WCF Sessions with Asynchronous functions

> ID：10510122
> 
> 赞同：2
> 
> 时间：2012-05-09T05:03:09.887
> 
> 标签：wcf, session

What happens in the case of a wcf session that has created an asynchronous function (such as background automated emailing ) when the client closes session ie client.Close()/client.Abort()?

In otherwords if have some as below:

```
[OperationContract(IsOneWay = true, IsInitiating = true, IsTerminating = false)]
void RegisterUser(string user);

[OperationContract(IsOneWay = false, IsInitiating = false, IsTerminating = false)]
void SendEmails(T[] listofDetails);

[OperationContract(IsOneWay = false, IsInitiating = false, IsTerminating = true)]
void UnRegisterUser(); 
```

and SendEmails creates a task or async function (the async call isn't done client side) that sends off all the emails in the background. And the user Terminates the session before all the emails are finished sending? Does the session still stay open and wait or does it close and the emailing just keeps going until it finishes or what happens?

Thanks All
Sorry if the question is a bit ambiguous :/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:22:44.283

在您的示例中，您定义了一个名为 SendEmails 的请求-响应操作，该操作返回 void。这与异步操作不同。

我假设您正在操作方法中创建一个新的后台线程，然后该线程会消失并发送电子邮件。

在这种情况下，一旦操作方法完成执行，操作将返回 void 给调用者。如果客户端随后终止通道，则后台线程将继续其工作。

# python - Python - is there a more effective method to find these parameter values?

> ID：10510124
> 
> 赞同：1
> 
> 时间：2012-05-09T05:03:40.630
> 
> 标签：python, regex, beautifulsoup, lxml

currently using beautifulsoup to find this a tag which y value return:

and

```
Longitude = re.search("Longitude\=[\d]+\.[\d]+", str(y)).group(0) 
```

returns "Longitude=27.2115500"

is there a better way to return the values of BusinessName, Address, Latitude, Longitude, and AdvertiserID, where the value of y is:

```
<a href="http://maps.website.com/default.aspx?AdvertiserID=ZZ_13130030_5182_000761&amp;Latitude=-18.1320800&amp;Longitude=17.2115500&amp;BusinessName=ACME Ltd&amp;Address=55 Nowhere Rd In This Town&amp;telno=&amp;advertiser=location&amp;routeType=to&amp;origincoords=-18.1320800|17.2115500#tabs-2;" 
onclick="dcsMultiTrack('DCSext._mainreq','','DCSext.linktype','get directions','DCSext.linkplace','','DCSext.linkvalue','','DCSext.show_listingId','ZZ_13130030_5182_000761_8378972_IYMX','DCSext.show_zoningUsed','0','DCSext.show_resultNumber','2')" target="_blank">Get directions</a>''' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:18:58.460

利用[`urlparse`](http://docs.python.org/library/urlparse.html)

```
>>> import urlparse
>>> the_url = """
http://maps.website.com/default.aspx?AdvertiserID=ZZ_13130030_5182_000761&amp;Latitude=-18.1320800&amp;Longitude=17.2115500&amp;BusinessName=ACME Ltd&amp;Address=55 Nowhere Rd In This Town&amp;telno=&amp;advertiser=location&amp;routeType=to&amp;origincoords=-18.1320800|17.2115500#tabs-2;
"""
>>> query_string = urlparse.parse_qs(urlparse.urlparse(the_url)[4])
>>> query_string['AdvertiserID'][0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:17:26.077

您可以使用：读取`href`标签的属性`href = tag["href"]`，然后获取参数：

```
 from urlparse import urlparse
   o = urlparse(href)
   params = dict(query.split("=") for query in o.query.split("&")) 
```

那么你可以通过以下方式获得价值：

`params["Longitude"], params["BusinessName"]`， ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T16:30:39.657

在 Python 3.5 中：

```
import urllib
from urllib.parse import urlparse

url = 'http://tupagina.com/?var1=6e5d8&var2=40'
#url = str(request.get_full_path())
parsed = urlparse(url)
qs = urllib.parse.parse_qs(parsed.query)
var1 = qs['var1'][0]
var2 = qs['var2'][0] 
```

# jsp - org.apache.jasper.JasperException: java.lang.NullPointerException when JSP page refreshes, How to Handle?

> ID：10510125
> 
> 赞同：0
> 
> 时间：2012-05-09T05:04:15.683
> 
> 标签：jsp, session, nullpointerexception

In my jsp page some pure java code there i.e, scriptlet. After a long time when refresh it then it is throwing

```
org.apache.jasper.JasperException: java.lang.NullPointerException 
```

Sometimes not for a long time also it is throwing same Exception. and the JSP page is displaying empty page. So the user have only one option is Logout. So to avoid that and redirect him to one page that is error page. How to do it ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:34:22.167

形式我在这里得到的是，刷新会话值可能会在一段时间后变为 NULL，从而导致`NullPointerException`.

创建一个名为error page的JSP页面并设置

```
<%@page isErrorPage="true" %> 
```

在其他 JSP 页面中，

```
<%@page errorPage="error.jsp" %> 
```

因此，当您的 JSP 中发生任何运行时错误时，它将重定向到此页面。

注意：如果 JSP 有编译时错误，这不会重定向到错误页面。

# java - JPA: locking over @ManyToMany-relationship

> ID：10510126
> 
> 赞同：3
> 
> 时间：2012-05-09T05:04:32.927
> 
> 标签：java, jpa, glassfish, ejb, jta

Following situation: Using EJB on Glassfish, I have two entity classes: A and B. They are linked by a @ManyToMany relationship so I have an additional table A_B.

Now I'd like to work on an instance of A, i.e. also change some relations to class B. More precisely, I alter values in A from time to time, later (and in a different invocation of a Bean's method from the client) I want to submit the changes.

Therefor, I thought of using an optimistic lock on A's instance. The problem is: as the @ManyToMany relationship is stored in table A_B, A's entry in the DB would not alter, the version field would not get incremented, so summarized that approach does not work for me.

Locking entities in A_B would not work either as in a @ManyToMany new rows could be inserted that affect my two classes. I'd need some kind of range-based lock to achieve that no links between my instances of A and B are altered, added or deleted. Unfortunately, I did not find a proper solution for that problem.

What would be the best way to lock entities of A including all relationships to other entities?

# jquery - Combining jQuery :not and :nth-child selectors

> ID：10510128
> 
> 赞同：5
> 
> 时间：2012-05-09T05:05:23.223
> 
> 标签：jquery, jquery-selectors

```
$j('.select-all-these:not(.except-these):nth-child(3n)'); 
```

I'm trying to select every third item that doesn't have a particular class. This is my jQuery selector, but it doesn't work - it seems that the :nth-child selector ignores the :not selector. Am I doing it wrong?

As an example, this is how it should work:

```
.select-all-these.except-these
.select-all-these.except-these
.select-all-these.except-these
.select-all-these
.select-all-these.except-these
.select-all-these
.select-all-these <-- THIS ONE IS SELECTED
.select-all-these.except-these 
```

Thanks! :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T05:18:00.650

如何使用该方法来过滤结果呢？

```
$('.select-all-these:nth-child(3n)').not('.except-these'); 
```

这是一个要演示的小提琴：http: [//jsfiddle.net/ntNgC/](http://jsfiddle.net/ntNgC/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T06:31:10.277

我能看到完成这项工作的唯一方法是使用两个`filter()`调用：

```
$('.select').filter(
    function(){
        return !$(this).hasClass('dontselect');
    }).filter(
        function(i){
            return (i+1)%3 == 0; // unless you want a zero-based count, regular CSS is one-based
        }).css('color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jZD3E/)。

但是，您可以使用`filter()`带有外部变量的单个调用：

```
var count = 0;
$('.select').filter(
    function(){
        console.log(!$(this).hasClass('dontselect'));
        if (!$(this).hasClass('dontselect')){
            count++;
            return count%3 == 0;
        }
    }).css('color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jZD3E/2/)。

JS Perf 报告说[，毫无疑问，单个过滤器要快一点](http://jsperf.com/single-filter-vs-double-filter)，但只是非常、*非常*、***非常***边缘。

参考：

*   [`filter()`](http://api.jquery.com/filter/).
*   [`hasClass()`](http://api.jquery.com/hasClass/).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T05:22:24.820

更新：我认为这对于 nth-child 或其他 jQuery 选择器是不可能的。所以考虑使用更详细的解决方案：

```
var count = 0;
$('.select-all-these').each(function() {
    if(!$(this).hasClass('except-these')) {
        count++;
    }
    if(count === 3) {
        $(this).text('every 3rd element');
        count = 0
    }
});​ 
```

[http://jsfiddle.net/TJdFS/2/](http://jsfiddle.net/TJdFS/2/)（替代版本：http: [//jsfiddle.net/TJdFS/](http://jsfiddle.net/TJdFS/)）

:nth-child 计算所有匹配元素，忽略任何附加过滤器，如 :not。

请参阅 jquery 文档：

> :nth-child(n) 伪类很容易与 :eq(n) 混淆，尽管两者会导致匹配的元素截然不同。使用 :nth-child(n)，所有子元素都被计算在内，无论它们是什么，并且仅当指定的元素与附加到伪类的选择器匹配时才会被选中。使用 :eq(n) 仅计算附加到伪类的选择器，不限于任何其他元素的子元素，并且选择第 (n+1) 个（n 从 0 开始）。

例子：

```
<div class="select-all-these">1</div>
<div class="select-all-these except-these">2</div>
<div class="select-all-these except-these">3</div>
<div class="select-all-these">4</div>
<div class="select-all-these except-these">5</div>
<div class="select-all-these">6</div> 
```

JS：

```
$('.select-all-these:not(.except-these):nth-child(6)').text('nth-child counts all elements (1 based!)');
$('.select-all-these:not(.except-these):eq(1)').text('eq counts only matching elements (0 based!)'); 
```

结果：

```
1
2
3
eq counts only matching elements. (0 based!)
5
nth-child counts all elements (1 based!) 
```

[http://jsfiddle.net/nFtkE/2/](http://jsfiddle.net/nFtkE/2/) ​</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-13T18:29:42.493

最简单的方法=）

```
$('table tr:not(.class)').eq(1); 
```

祝你好运=)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T04:52:49.290

Nth-child 在处理组的过滤选择时可能会违反直觉。

使用 .each() 来绕过它的限制：

```
var count = 0;
$('.select-all-these:not(.except-these)').each(function(){
    if ( count++ % 2 == 0 ) $(this).css('color','red')
}) 
```

# hibernate - How to create a join table with additional columns

> ID：10510129
> 
> 赞同：0
> 
> 时间：2012-05-09T05:05:24.167
> 
> 标签：hibernate, hibernate-annotations

I have the following a user table and a contact table. What I would like to do is create a join table which would allow me to join a single user to 3 contact - Home address, Billing Address and Shipping address.

Currently I have a one to one mapping between user and user_address and then I have one to one mapping between user_address and each of the different address types.

I have played around with the many to many with extra columns, one to many but so far no success.

Is there any alternatives to the way I have done this?

One to One Mapping:

```
User.java

  /**
   * Relationship to the User Address - extension of User
   */
  @OneToOne(cascade = CascadeType.ALL, mappedBy = "user",fetch=FetchType.EAGER)
  private UserAddress userAddress; 
```

* * *

```
 UserAddress.java

    @Entity
    @Table(name = "a_user_address")
    @GenericGenerator(name = "user-primarykey", strategy = "foreign", parameters = @Parameter(name = "property", value = "user"))
    @Audited
    public class UserAddress extends Trackable implements Serializable
    {
        /**
         * The unique identifier associated with the user. References user(id).
         */
        @Id
        @GeneratedValue(generator = "user-primarykey")
        @Column(name = "user_id", unique = true, nullable = false)
        private Long userId;

        /**
         * 
         */
        @OneToOne
        @PrimaryKeyJoinColumn
        private User user;

    /**
     * The unique identifier associated with the user's home/profile address
     */
  @OneToOne(fetch=FetchType.LAZY, cascade=CascadeType.ALL)
  @JoinColumn(name="home_addr_id", nullable=true, updatable=true)
  @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
    private ContactInfo homeAddress;

    /**
     * The unique identifier associated with the user's billing address
     */
  @OneToOne(fetch=FetchType.LAZY, cascade=CascadeType.ALL)
  @JoinColumn(name="billing_addr_id", nullable=true, updatable=true)
  @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
    private ContactInfo billingAddress;

    /**
     * The unique identifier associated with the user's shipping address
     */
  @OneToOne(fetch=FetchType.LAZY, cascade=CascadeType.ALL)
  @JoinColumn(name="shipping_addr_id", nullable=true, updatable=true)
  @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
    private ContactInfo shippingAddress; 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:24:23.963

没有“带有额外列的连接表”之类的东西。如果有非连接相关的列，它本身就是一个实体，它应该被这样对待。你目前的策略是最好的。对此感到高兴:-)

# iphone - Xcode iPhone 中的搜索栏

> ID：10510131
> 
> 赞同：1
> 
> 时间：2012-05-09T05:05:43.053
> 
> 标签：iphone, contact

我在使用 Xcode Iphone 中的 SearchBar 时需要帮助。我在表格视图中有一个联系人列表。我在它上面有一个搜索栏。我显示联系人列表。我需要实现搜索以从联系人列表中过滤联系人。任何帮助对我都有很大用处。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:13:11.150

[在这里](http://jduff.github.com/2010/03/01/building-a-searchview-with-uisearchbar-and-uitableview/)查看分步教程

# iphone - Tab Bar appearing with no items

> ID：10510132
> 
> 赞同：0
> 
> 时间：2012-05-09T05:06:30.523
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller

I worked CoreData into my Tab Bar app and the CoreData functions are working (i.e. I can output information from it to the console). The problem is that my tab bar isn't working. When I run my app, it looks like this:

![enter image description here](../Images/f0c0c768c92d488e4d563cf443be9023.png)

It looks as if the tab bar itself is showing up but there aren't any items and it isn't displaying the table view. My storyboard looks like this:

![enter image description here](../Images/e46149217c27031c62dd63e52de20f92.png)

Here is the code for my AppDelegate:

AppDelegate.h

```
#import <UIKit/UIKit.h>

#import "JobsViewController.h"
#import "Job.h"
#import "Shift.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    NSManagedObjectContext *context = [self managedObjectContext];
    Job *job = [NSEntityDescription insertNewObjectForEntityForName:@"Job" inManagedObjectContext:context];
    job.employer = @"Calder Centre";
    job.jobTitle = @"Addictions Counsellor";
    job.regularRate = 25.9f;
    job.overtimeRate = 30.5f;
    job.deduction1 = 0.1f;
    job.deduction2 = 0.2f;
    job.deduction3 = 0.3f;
    job.deduction4 = 0.4f;
    job.deduction1Name = @"CPP";
    job.deduction2Name = @"IT";
    job.deduction3Name = @"Union Dues";
    job.deduction4Name = @"Other";

    Shift *shift = [NSEntityDescription insertNewObjectForEntityForName:@"Shift" inManagedObjectContext:context];
    shift.startDate = [NSDate date];
    shift.endDate = [NSDate date];

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }

    // Test listing all FailedBankInfos from the store
    NSFetchRequest *jobFetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *jobEntity = [NSEntityDescription entityForName:@"Job" inManagedObjectContext:context];
    [jobFetchRequest setEntity:jobEntity];
    NSArray *fetchedJobs = [context executeFetchRequest:jobFetchRequest error:&error];
    for (Job *job in fetchedJobs) {
        NSLog(@"Employer: %@", job.employer);
        NSLog(@"Title: %@", job.jobTitle);
    }

    NSFetchRequest *shiftFetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *shiftEntity = [NSEntityDescription entityForName:@"Shift" inManagedObjectContext:context];
    [shiftFetchRequest setEntity:shiftEntity];
    NSArray *fetchedShifts = [context executeFetchRequest:shiftFetchRequest error:&error];
    for (Shift *shift in fetchedShifts) {
        NSLog(@"Start Date: %@", shift.startDate);
        NSLog(@"End Date: %@", shift.endDate);
    }

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    UITabBarController *tabBarController = [[UITabBarController alloc]init];
    self.window.rootViewController = tabBarController;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

Here is the view controller:

JobsViewController.h

```
#import <UIKit/UIKit.h>
#import "Job.h"
#import "Shift.h"

@interface JobsViewController : UITableViewController

@property (nonatomic, strong) NSManagedObjectContext* managedObjectContext;
@property (nonatomic, strong) NSArray *listOfJobs;

@end 
```

JobsViewController.m

```
#import "JobsViewController.h"

@interface JobsViewController ()

@end

@implementation JobsViewController

@synthesize managedObjectContext, listOfJobs;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    self.navigationItem.rightBarButtonItem = self.editButtonItem;

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription 
                                   entityForName:@"Job" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];
    NSError *error;
    self.listOfJobs = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    self.title = @"Jobs";
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [listOfJobs count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"job";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    Job *job = [listOfJobs objectAtIndex:indexPath.row];
    cell.textLabel.text = job.jobTitle;
    cell.detailTextLabel.text = job.employer;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:57:06.453

这与核心数据无关。

您正在为非故事板项目使用来自应用程序委托模板的代码，但您正在使用故事板。您的 didFinishLaunching 方法中的代码正在创建一个新窗口和空选项卡栏控制器，它将覆盖您故事板中的任何内容。

摆脱之后的一切`self.window =`，除了`return YES;`。这是在基于 xib 的应用程序中使用的代码，如果您有情节提要，则不需要。

# python - SMTP AUTH using CRAM-MD5

> ID：10510133
> 
> 赞同：1
> 
> 时间：2012-05-09T05:06:40.407
> 
> 标签：python, smtp

Following the guideline given in [SMTP with CRAM-MD5 in Java](https://stackoverflow.com/questions/186827/smtp-with-cram-md5-in-java) I wrote a small program in Python to calculate the response when given the nonce as input:

```
import hashlib
from base64 import b64encode, b64decode 
import sys
from decimal import *

#MD5(('secret' XOR opad), MD5(('secret' XOR ipad), challenge))
#opad - 0x5C, ipad - 0x36.

def main(nonce):
   pwd = bytearray("password")

   for i in range(len(pwd)):
       pwd[i] = pwd[i] ^ 0x36

   m1 = hashlib.md5()
   m1.update(pwd.decode())
   m1.update(b64decode(nonce))

   m2 = hashlib.md5()

   pwd = bytearray("password")

   for i in range(len(pwd)):
       pwd[i] = pwd[i] ^ 0x5C

   m2.update(pwd.decode())
   m2.update(m1.hexdigest())

   print b64encode("username " + m2.hexdigest())

if __name__ == "__main__":
   if (len(sys.argv) != 2):
      print("ERROR usage: smtp-cram-md5 <nonce>")
   else:
     main(sys.argv[1]) 
```

However, the SMTP server rejects the response I give generated by this program. Can some one please point out what I am doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T22:05:55.913

CRAM-MD5 与 HMAC 的示例实现。用python2.7和python3.4测试。在 Python 3 上，可以通过将 hashlib.md5 替换为“md5”来避免导入 hashlib。

```
"""
doc-testing with example values from RFC 2195

>>> challenge = 'PDE4OTYuNjk3MTcwOTUyQHBvc3RvZmZpY2UucmVzdG9uLm1jaS5uZXQ+'
>>> user = 'tim'
>>> password = 'tanstaaftanstaaf'
>>> target_response = 'dGltIGI5MTNhNjAyYzdlZGE3YTQ5NWI0ZTZlNzMzNGQzODkw'
>>> actual_response = cram_md5(user, password, challenge)
>>> target_response == actual_response
True
"""

import base64
import hashlib
import hmac

def cram_md5(user, password, challenge):
    password = password.encode('utf-8')
    challenge = base64.b64decode(challenge)
    digest = hmac.HMAC(password, challenge, hashlib.md5).hexdigest()
    response = '{} {}'.format(user, digest).encode()
    return base64.b64encode(response).decode()

if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:15:26.817

您可以使用[hmac 模块](http://docs.python.org/py3k/library/hmac.html#module-hmac)来计算它，或者至少仔细检查您的输出。

您使用的是 Python2.x 还是 3.x？您也可能有一些字节/字符串问题。

具体来说，在字节处理之后 pwd.decode() 可能会给您带来垃圾，因为它试图理解不再是字符数据的东西。

您似乎还缺少将关键块扩展到散列函数输入块大小的倍数的步骤。

HMAC的[维基百科](http://en.wikipedia.org/wiki/HMAC)文章包含一个可能有用的 Python 小示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T22:44:28.270

我分析了您的代码并发现了错误：

1.  您不仅需要对密码进行异或运算，还需要对所有 64 字节进行异或运算
2.  由于 md5.update() 适用于二进制数据，因此不应解码密钥
3.  出于同样的原因，您需要调用 m1.digest() 而不是 m1.hexdigest()

您的代码与我的修复和 py3k 兼容性：

```
import hashlib
from base64 import b64encode, b64decode 
import sys

def main(nonce):
    pwd = bytearray('password'.encode('utf-8'))

    key = bytearray(64*b'\x36')

    for i in range(len(pwd)):
        key[i] ^= pwd[i]

    m1 = hashlib.md5()
    m1.update(key)
    m1.update(b64decode(nonce))

    m2 = hashlib.md5()

    key = bytearray(64*b'\x5c')

    for i in range(len(pwd)):
        key[i] ^= pwd[i]

    m2.update(key)
    m2.update(m1.digest())

    response = "username " + m2.hexdigest()
    print(b64encode(response.encode('utf-8')).decode('ascii'))

if __name__ == "__main__":
    if (len(sys.argv) != 2):
        print("ERROR usage: smtp-cram-md5 <nonce>")
    else:
        main(sys.argv[1]) 
```

免责声明：此代码仅对最长 64 字节的密码有效！（参见 RFC 2195）

# php - Upload File Image to server Failure

> ID：10510134
> 
> 赞同：0
> 
> 时间：2012-05-09T05:06:57.230
> 
> 标签：php, mysql

what i am trying to do is when an admin tries to create a new product to upload to the server an image of that and as it's name to be the product id.jpg. I have searched google with no result. The code seems to be right. Can someone help me please? I am using lamp as local test server.

```
<?php 
// Parse the form data and add inventory item to the system
if (isset($_POST['product_name'])) {

    $product_name = mysql_real_escape_string($_POST['product_name']);
    $price = mysql_real_escape_string($_POST['price']);
    $details = mysql_real_escape_string($_POST['details']); 
    $category = mysql_real_escape_string($_POST['category_choice']);
    $condition= mysql_real_escape_string($_POST['condition']);
    $supplier_choice= mysql_real_escape_string($_POST['supplier_choice']);
    $handling_time= mysql_real_escape_string($_POST['handling_time']);
    $weight= mysql_real_escape_string($_POST['weight']);
    $information_box= $_POST['information'];

    $pid = mysql_insert_id();
    // Place image in the folder 
    $newname = "$pid.jpg";
    move_uploaded_file( $_FILES['my_photo']['tmp_name'], "../inventory_images/$newname");

    header("location: products.php"); 
    exit();

} 
```

?>

```
 <form action="add_product.php" enctype="multipart/form-data" name="my_Form" id="my_Form" method="post">

            <tr>
                <td>Φωτογραφία</td>
                <td>
                    <label>
                        <input type="file" name="my_photo" id="my_photo"/>
                    </label>
                </td>
            </tr>

            <tr>
                <td>&nbsp;</td>
                <td>
                    <label>
                        <input type="submit" name="button" id="button" value="Αποθήκευση" />
                    </label>
                </td>
            </tr>

        </table>

        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:16:30.690

我认为，如果您精简代码以仅包含与问题相关的部分，那么您将获得更好的答案。完成此操作后，您可能会看到自己问题的答案。

例如，文件是否上传成功？如果不是，那么 mysql_xxx 代码和您的大部分表单与您的问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:23:39.143

如您所说，您正在使用lamp，请检查您上传文件的目录的权限。此外，还要检查您在目标路径中提到的所有文件夹的权限。

上传文件的目录和路径中的所有目录都必须有写权限。

如果 move_uploaded_file 不起作用，请尝试复制功能。还要检查您上传的路径是否正确。

# iphone - 如何在 iPhone sdk 的 MFMailComposer 中创建和附加 CSV 文件？

> ID：10510142
> 
> 赞同：5
> 
> 时间：2012-05-09T05:07:42.487
> 
> 标签：iphone, csv, mfmailcomposeviewcontroller

我创建了一个 csv 文件，并将其附加到 MFMailComposer，它显示给我的邮件编辑器，但是当我将它发送到用户电子邮件时，它没有显示我在电子邮件中附加的 csv 文件。我已使用此代码创建 csv 文件并在其中添加数据。

```
 NSMutableString *mainString=[[NSMutableString alloc]initWithString:@""];
        //NSMutableArray *section = [[NSMutableArray alloc] init];
        for(int i = 0;i<[NameArray count];i++)
        {
            NSString *string=[indexArray objectAtIndex:i];
            string=[string stringByReplacingOccurrencesOfString:@"\"" withString:@"\"\""];
            [mainString appendFormat:@"\"%@\"",string];

            string=[NameArray objectAtIndex:i];  
            string=[string stringByReplacingOccurrencesOfString:@"\"" withString:@"\"\""];
            [mainString appendFormat:@",\"%@\"",string];

            string=[typearray objectAtIndex:i];
            string=[string stringByReplacingOccurrencesOfString:@"\"" withString:@"\"\""];
            [mainString appendFormat:@",\"%@\"",string];

            [mainString appendFormat:@",\"%@\"",string];
            [mainString appendFormat:@"\n"];

        }

        NSLog(@"getdatafor csv:%@",mainString);

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
        NSString *documentsDirectoryPath = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectoryPath  stringByAppendingPathComponent:@"history.csv"];
//        filePath = [filePath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSData* settingsData;
        settingsData = [mainString dataUsingEncoding: NSASCIIStringEncoding];

        NSError *error;
        [settingsData writeToFile:filePath atomically:YES];
//            NSLog(@"writeok"); 
        NSData *mediaData = [NSData dataWithContentsOfFile:filePath options:NSDataReadingMapped   error:&error];

        NSLog(@"Length:%d Error:%@",[mediaData length],[error localizedDescription]); 
```

在这里，上面的代码运行良好我得到 [mediaData length] 我从这里附加 CSV 文件。

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    // Attach an image to the email
    NSString *path = [[NSBundle mainBundle] pathForResource:@"history" ofType:@"csv"];
    NSData *myData = [NSData dataWithContentsOfFile:path];

    // Fill out the email body text
    NSString *emailBody = @"history";
    [picker setMessageBody:emailBody isHTML:NO];
    [picker addAttachmentData:myData  mimeType:@"text/cvs" fileName:@"history"];

    [self presentModalViewController:picker animated:YES];
    [picker release]; 
```

上面的代码也可以正常工作。它向我显示了附加的 CSV 文件，但是当我通过电子邮件发送邮件时，接收者没有收到附加的 CSV 文件。这段代码有什么问题。？为什么接收方没有收到附件。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:55:29.053

```
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
mailer.mailComposeDelegate = self;
[mailer setSubject:@"CSV File"];

NSData *myData = [text dataUsingEncoding:NSUTF8StringEncoding];

[mailer addAttachmentData:myData mimeType:@"text/cvs" fileName:@"FileName"];

[self presentModalViewController:mailer animated:YES]; 
```

其中“**文本**”是一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:54:36.343

我已经通过在 MFMailComposeViewController 中附加文件和其他媒体属性解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T11:48:37.167

```
NSData *data=[[arr componentsJoinedByString:@","] writeToFile:@"Bhavesh.csv" atomically:YES encoding:NSUTF8StringEncoding error:NULL];
[mail addAttachmentData:data mimeType:@"text/csv" fileName:@"Bhavesh.csv"]; 
```

# objective-c - about self.view.frame

> ID：10510148
> 
> 赞同：0
> 
> 时间：2012-05-09T05:09:02.903
> 
> 标签：objective-c, ipad, frame

I have source allowing rotate interfaceOrientation. (in viewDidLoad)

```
CGPoint point;
NSInteger itemCount;

if (self.interfaceOrientation == UIInterfaceOrientationPortrait || self.interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
point.x = (self.view.frame.size.width - (100 * itemCount)) / 2
else
... 
```

In spite of running simulator in `UIInterfaceOrientationLandscapeLeft` mode, I have 768 pixel of `self.view.frame.size.width` (on iPad) so I can't have appropriate value of point.x

How I can access `self.view.frame` on rotating?

# c# - Moq 如何绕过对 base 的调用

> ID：10510149
> 
> 赞同：1
> 
> 时间：2012-05-09T05:09:22.057
> 
> 标签：c#, unit-testing, moq

```
public class MyClass: AbstractBase
{
    public override bool Init(IAppContext contextIn)
    {
        if (base.Init(contextIn))
        {
            //my code 
        }
    }
} 
```

我有一个上面给出的类，想为 Init 方法编写一个单元测试，并模拟了`IAppContext`. 如何使用 mock 绕过对 base 的调用？

这就是我正在做的事情：

```
Mock<IAppContext> mockContex = new Mock<IAppContext >();
MyClass myClassInstance - new MyClass ();
myClassInstance.Init(mockContex.object); 
```

`base.init`看起来像：

```
public virtual bool Init(IAppContext context_in) 
{
    if (context_in == null)
    {
        throw new ArgumentNullException("context_in", "IAppContext argument s null"); 
    } 
    this.myCommunication = context_in.getInterface<ICommunication>();
    if (this.myCommunication == null)
    { 
        throw new ArgumentNullException("myCommunication", "ICommunication argument is null");
    } 
    this.myStateManager = new IStateManager(this.myCommunication);
    if (this.myStateManager == null)
    { 
        throw new InvalidOperationException("Could not create the State Manager");
    }
    return true; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:17:59.707

您可以以返回 true`IAppContext`的方式设置您的模拟：`base.Init`

```
var communicationFake = new Mock<ICommunication>();
var appContextMock = new Mock<IAppContext>();

appContextMock
    .Setup(c => c.getInterface<ICommunication>())
    .Returns(communicationFake.Object); 
```

现在`base.Init`将`true`在使用 调用时返回`appContextMock`。

请注意，您不需要最后一次 null 检查 ( ) -失败`this.myStateManager == null`的唯一方法是抛出异常。`new IStateManager(this.myCommunication)`如果是这样，它无论如何都不会进入空检查部分。

# windows-phone-7 - ScheduledActionService.Find 抛出 ArgumentException

> ID：10510152
> 
> 赞同：5
> 
> 时间：2012-05-09T05:09:52.203
> 
> 标签：windows-phone-7

我在市场中部署了一个 Windows Phone 7 应用程序，该应用程序通过 PeriodicTask 后台代理更新其动态磁贴。

一位用户报告磁贴在工作一段时间后不再更新的问题。

当他们检查手机上的后台任务时，它被禁用，并且选中了“下次打开此应用程序时重新打开后台任务”复选框。

打开应用程序并再次尝试 pin 操作后，后台任务尚未恢复。

我怀疑这可能与我在 App Hub 中看到的两个崩溃报告有关：

> 问题功能：Microsoft.Phone.Scheduler.SystemNotificationInterop.CheckHr
> 
> 异常类型：ArgumentException
> 
> 堆栈跟踪：
> 
> 帧图像函数偏移
> 量 0 coredll.dll xxx_RaiseException 19
> 1 mscoree3_7.dll WatsonUnhandledManagedException 296
> 2 mscoree3_7.dll Dbg_NotifyManagedException 93
> 3 mscoree3_7.dll FirstPassException 1044
> 4 TransitionStub 0
> 5 Microsoft.Phone.Scheduler.SystemNotificationInterop.CheckHr 248
> 6 Microsoft.Phone.Scheduler.SystemNotificationInterop.GetNotificationByID 156
> 7 **Microsoft.Phone.Scheduler.ScheduledActionService.Find** 276
> 8 MyApp.Agents.TaskIsActive 60
> 9 MyApp.MainPage.SetupApplicationBar 44
> 10 MyApp.MainPage.MainPage_Loaded 100
> 11 MS.Internal.CoreInvokeHandler。调用事件处理程序3660
> 12 MS.Internal.JoltHelper.FireEvent 1348
> 13 mscoree3_7.dll IL_CallManaged 884
> 14 mscoree3_7.dll IL_CallDelegateInternal 176
> 15 mscoree3_7.dll makeComPlusCall 5255
> 16 mscoree3_7.dll makeComPlusCallReturnInt 21
> 17 0
> 18 agcore.dll CCoreServices::CLR_FireEvent 385

对 Microsoft.Phone.Scheduler.ScheduledActionService.Find 的调用会导致 ArgumentException。

我在调用 Find 方法时使用的名称参数来自 a `private const string`，因此每次调用的值都相同。

我应该抓住这个异常并假设后台代理不存在还是表明代理有问题？

在这个阶段，在模拟器中运行应用程序时，我无法重现异常。

* * *

> “当 [the] Background Agent 依次崩溃两次时，它会从调度中删除”

我尝试在每次调用时故意使 ScheduledAgent 崩溃，如下所示：

```
protected override void OnInvoke(ScheduledTask task)
{
    UpdateTile();

#if DEBUG
    // If we're debugging, fire the task again
    ScheduledActionService.LaunchForTest("MyScheduledTaskAgent", new TimeSpan(0, 0, 30));
    throw new Exception("Bang");
#endif

     NotifyComplete();
} 
```

这确实会导致后台任务在两次调用后在模拟器中的设置下关闭。但是，如果我重新打开对 ScheduledActionService.Find 的应用程序调用，则无一例外。我还可以删除失败的 PeriodicTask 并添加一个新实例而不会出现问题。

* * *

> “在手机设置中停用后台代理时，可能会引发异常。我认为在这种情况下，异常会在 ScheduledActionService.Add 上引发，而不是 ScheduledActionService.Find”

我在模拟器中试过这个。我从以下异常中得到`ScheduledActionService.Add(task);`：

System.InvalidOperationException - “BNS 错误：操作已禁用\r\n”

调用 ScheduledActionService.Find 仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:30:28.353

我设法在模拟器和连接到我的 PC 的手机上重现了 ArgumentException 和 StackTrace。

步骤是：

1.  在异常处理程序中围绕调用设置断点`ScheduledActionService.Find(TASK_NAME)`
2.  在连接了调试器的模拟器（或手机）中启动应用程序
3.  使用 pin 菜单项启动 PeriodicTask 后台代理。请注意，在调试模式下，我`ScheduledActionService.LaunchForTest(TASK_NAME, new TimeSpan(0, 0, 1));`在添加 PeriodicTask 后立即调用。
4.  导航到我的应用程序中的子页面。
5.  快速使用返回按钮返回主页面，然后再次退出应用程序。MainPage 上的 Loaded 事件调用`SetupApplicationBar()`，最终调用该`ScheduledActionService.Find()`方法。
6.  当应用程序关闭时，将发生异常。

> 异常类型：ArgumentException
> 
> 消息：E_INVALIDARG
> 
> 堆栈跟踪：
> 
> 在 Microsoft.Phone.Scheduler.SystemNotificationInterop.CheckHr(Int32 hr)
> 在 Microsoft.Phone.Scheduler.SystemNotificationInterop.GetNotificationByID(Guid notificationID)
> 在 Microsoft.Phone.Scheduler.ScheduledActionService.Find(String name)
> 在 SolarCalculator.Agents.TaskIsActive()
> 在 SolarCalculator.MainPage.SetupApplicationBar()
> 在 SolarCalculator.MainPage.MainPage_Loaded(Object sender, RoutedEventArgs e)
> 在 MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
> 在 MS.Internal.JoltHelper.FireEvent (IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)

鉴于应用程序正在关闭，我只是想弄清楚后台代理是否正在运行，我认为捕获异常并从我的`TaskIsActive()`方法返回 false 是安全的。

现在我知道来自 ArgumentException 的消息是 E_INVALIDARG 我发现[在 Windows Phone 7](https://stackoverflow.com/questions/8630168/setting-alarm-in-windows-phone-7)中设置警报描述了在 Application_Exit 事件中调用 ScheduleActionService 时遇到相同的错误。

# vb6 - Why is it wrong to exit a sub from inside of a error handler block?

> ID：10510158
> 
> 赞同：0
> 
> 时间：2012-05-09T05:10:46.207
> 
> 标签：vb6, error-handling

I read somewhere that exiting out of an error handling block is not recommended. Sadly they did not give an explanation why?

I was curious why is it so. I did find something related to this in the discussion at ["On Error Goto 0" before Exit Function](https://stackoverflow.com/questions/10395149/on-error-goto-0-before-exit-function) but not sure if that is the definitive answer. They talk about the Err object not being cleared. Is that the only issue and if so is there a work around?

Is this wrong? If it is, then what is the recommended way of exiting the function? I am not a huge supporter of go to statements, they make the code harder to follow.

```
 Private Sub Foo2()
        On Error Resume Next
            'Multiple lines of code

            If Not Foo(arg1,arg2) Then
                Exit Sub  'Can I exit here?
            End If

            'Multiple lines of code
        On Error GoTo 0
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:20:35.037

如果我正确理解您的问题，更好的方法是执行以下操作：

```
Private Sub Foo2()
    On Error Goto ErrHandler
        'Multiple lines of code

        If Not Foo(arg1,arg2) Then
            Exit Sub  'Can I exit here?
        End If

        Multiple lines of code

ErrHandler:
    Error handling mechanism here.
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:07:47.950

除了关于`On Error Resume Next`（注意他们！！）的警告之外，此代码没有任何问题。错误处理语句的范围是 Foo2 Sub，当你退出它时它会过期。当您在 For 块中调用另一个 Sub 时，就会出现危险，而后者本身可能会调用其他 Sub。*这些*潜艇将继承 On Error Resume Next，当从它们引发的错误被吞下时，它们会给你带来多年的噩梦......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:28:14.927

在我过去使用 VB6 的经验中，使用 Resume Next 并不是一个好主意。我从来没有用过它。我的代码尽最大努力避免错误，并且在发生错误的情况下，它总是会归结为错误处理程序块。您链接到的问题说明了我大量使用的 MZTools 的使用。

所以，我的观点是，Resume Next 代码很可能只是一个练习，而不是真正的生产代码。如果这是真的，那么您不必在 Exit Sub 之前清除 Err 对象，因为 Err 对象无论如何都不会包含任何内容。如果您确实遇到错误，它将转到 ErrorHandler 标签并从那里继续。我是那个处理程序，是的，理想情况下，您希望对 Err 对象做一些事情，然后适当地返回给调用者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:12:01.340

我会重新排列你的代码行，并确保退出子或退出函数总是出现在 ErrorHandler 之前：

```
Private Sub Foo2()
   On Error Goto ErrHandler

    'Multiple lines of code

    If Foo(arg1,arg2) Then

        'Multiple lines of code

    End If

    Exit Sub

  ErrHandler:
    Error handling mechanism here.
End Sub 
```

# excel - 使用 vba 进行数据验证

> ID：10510160
> 
> 赞同：0
> 
> 时间：2012-05-09T05:10:50.247
> 
> 标签：excel, excel-2003, vba

通常可以通过 vba 在 excel 中应用数据验证，但我遇到了一个特定问题

我正在使用间接方法来应用验证，通常当我不使用 vba 时，我会收到 excel 的警告“源当前评估为错误，你想继续吗？” （这是因为间接引用的单元格可能为空），现在我可以通过单击“是”轻松跳过 Excel 中的此错误

这是链接[http://www.contextures.com/xldataval02.html](http://www.contextures.com/xldataval02.html)（相关验证列表）

但是当我尝试使用 vba 执行相同的操作时，我遇到了运行时错误，没有友好的提示可以让我继续。我该如何处理这种错误。

错误恢复不起作用，因为那时 vba 根本不应用验证。

这是代码

```
Set rng = ThisWorkbook.Sheets("input").Range("AB11:AB65536")
With rng.Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:= _
    "=INDIRECT(cablecode&""_depth_""&$Q11&""_""&$Z11&""_values"")"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

cablecode 是一个静态命名范围

Q11 和 Z11 指的是该特定行中的输入

*depth*和*values*是普通字符串

cablecode 可以有两个值 = "is" 或 "iec"

Q11 可以是“xlpe”或“pvc”

Z11 可以是“al”或“c​​u”

由于我直接引用它的整个项目的电缆代码是恒定的，所以 Q11 和 Z11 对于不同的行可能是不同的，所以我单独引用它们

整个字符串是“is_depth_al_xlpe_values”类似不同的排列，并且所有命名范围都已经定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:48:48.620

I suppose the following line needs correction from

```
.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:= _
    "=INDIRECT(cablecode&""_depth_""&$Q11&""_""&$Z11&""_values"")" 
```

to

```
dim cellToBeReferred as string
cellToBeReferred = cablecode & "_depth_" & Range("$Q11").Value & "_" _
& Range("$Q11").Value & "_values"

.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:= _
    "=INDIRECT(" & cellToBeReferred  & ")" 
```

Taking the string out will help you debug the issue and figure what is the value of named range, you'd want to refer to. See what value `cellToBeReferred` results into and correct the concatenation using above.

**EDIT after reading OPs comment**

In that case, surround the `INDIRECT` with `ISERROR` and give a dummy cell reference. For e.g.

```
"=IFERROR(INDIRECT(" & cellToBeReferred  & "), Z1)" 
```

Where Z1 is a cell to be referred if `INDIRECT` fails.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-12T20:45:30.527

无法抑制 VBA 中的警告。暂时为参考单元格赋值，稍后将其清除。这将防止 UI 在选择“是”到“源当前评估为错误。您要继续”对话框时避免的运行时错误。

前任。

```
thisworkbook.range("Q11").value = "1"

'data validation - i.e. Formula1:="=INDIRECT(Q11)"

thisworkbook.range("Q11").value = "" 
```

# jira - 在 JIRA 中配置问题的权限

> ID：10510161
> 
> 赞同：0
> 
> 时间：2012-05-09T05:11:09.547
> 
> 标签：jira

我正在使用 JIRA，包括 Greenhopper。我创建了一些通用任务并分配给开发人员。我要求每个人都必须创建子任务（如编码、单元测试......）并分配给自己。之后，我看到开发人员可以修改由另一个人创建的任务。这对我来说真的是个问题。有没有人可以指导我如何配置使任务只能由创建的用户修改的权限。

# c# - 为什么我收到此错误，在 UpdatePanel 中找不到触发器的 ControlID？

> ID：10510162
> 
> 赞同：0
> 
> 时间：2012-05-09T05:11:10.757
> 
> 标签：c#, asp.net, .net, visual-studio-2010

这是非常糟糕的情况，有时在我的 Web 应用程序的某些页面中我会收到此错误：

在 UpdatePanel“UpdatePanel3”中找不到触发器 ID 为“BtnSubmit”的控件。

但是如果我再次构建并加载该页面，它会加载 corectlly，但之后如果我重新加载页面会再次出现错误，

为什么会这样？我该如何解决它，或者找到我的问题的细节？

在我的更新面板中，我没有触发 BtnSubmit，如果更新面板为真，我知道“ChildrenAsTriggers”属性的默认值，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:53:09.627

可能你正在这样做：

```
 <asp:UpdatePanel ID="UpdatePanel3" runat="server">
    <Triggers>
       <asp:AsyncPostBackTrigger ControlID="BtnSubmit" /> //since BtnSubmit not declared any where or BtnSubmit is not accessible for UpdatePanel3
    </Triggers>
    <ContentTemplate>
       <%-- Content--%>
    </ContentTemplate>
  </asp:UpdatePanel> 
```

尝试在 UpdatePanel3 可以访问的地方添加 Button(BtnSubmit)。您可以在更新面板或外部添加。

```
<asp:Button ID="BtnSubmit" runat="server" Text="Button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:35:22.183

坦克你@ashwini，但我发现我的母版页.cs文件已损坏，我删除了母版页并再次创建它，现在一切正常。这需要我的时间，因为我没有收到任何错误信息！感谢任何方式。

# java - 更改 ArrayList 中的字符串元素 > 正在更改 ArrayList 中的两个列表

> ID：10510164
> 
> 赞同：1
> 
> 时间：2012-05-09T05:11:20.257
> 
> 标签：java, arraylist

这是我正在使用的代码

```
 ArrayList<List<String>> sentanceParts = new ArrayList<List<String>>();

    int i;

    sentanceParts.add(Arrays.asList(sentance.split("\\s+")));
    sentanceParts.add(sentanceParts.get(0));
    System.out.printf( "%s\n", sentanceParts.get(1).get(0));

    for( i = 0; i < sentanceParts.get(0).size(); i++ ){
        sentanceParts.get(0).set(i, 
        sentanceParts.get(0).get(i).replaceAll( "[^aeiou]+", "" ));
        System.out.printf( "%s:%d\n",
                sentanceParts.get(1).get(i),
                sentanceParts.get(0).get(i).length() );
    } 
```

它正在输出这个

```
Type a sentance for analysis...
test case
e:1
ae:2 
```

应该是

```
Type a sentance for analysis...
test case
test:1
case:2 
```

为什么我的代码不这样做？我以为我设置的是 sentanceParts(0) 而不是 sentanceParts(1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:15:29.260

因为这条线：

```
sentanceParts.add(sentanceParts.get(0)); 
```

`sentanceParts`引用相同的`List<String>`两次。

如果要添加at 元素的*副本*，请编写：`List``0`

```
sentanceParts.add(new ArrayList<String>(sentanceParts.get(0))); 
```

# jquery - 如何使用 jquery 单击页面元素（或导致等效操作）？

> ID：10510165
> 
> 赞同：1
> 
> 时间：2012-05-09T05:11:43.047
> 
> 标签：jquery

我想使用 jQuery 单击下一页上的选项卡（或至少触发与单击相同的功能）。这是我尝试过的：

```
jQuery('ul.gk_tab_ul-style1 li.first').next().click(); 
```

我需要单击中间选项卡（“最终版本”）。我没有识别标签的好方法，除了它总是第二个标签。

如何使用 jquery 单击选项卡？

页面：[http ://www.fixoodle.com/fixes/899](http://www.fixoodle.com/fixes/899)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:34:37.247

.eq(n) 从 0 开始，您可以通过以下方式选择列表中的第二个选项卡

```
$('ul.gk_tab_ul-style1 li').eq(1) 
```

并使用触发器单击它

```
 $('ul.gk_tab_ul-style1 li').eq(1).trigger('click'); 
```

希望这会帮助你。更多关于[.eq() 的信息。](http://api.jquery.com/eq/)

# jrules - JRules Rules Studio 7.1.1 中的许可错误

> ID：10510168
> 
> 赞同：0
> 
> 时间：2012-05-09T05:12:12.127
> 
> 标签：jrules

我是 Ilog JRules 规则工作室的新手。使用 JRules Rules Studio 7.1.1，我正在使用 JUnit 测试用例测试 Rules 项目中的一个特定规则。我可以看到以下错误，我无法理解。

原因：ilog.jum.client700.IluSAMAccessDeniedException：格林威治标准时间 2012 年 5 月 8 日 12:31:34，SAM 3.0.0.1040：拒绝访问模块“RES4J”。如果您想检查您的访问密钥，请执行以下操作： java -cp [location]sam.jar ilog.jum.client700.IluSAMAccessKey -summary 为确保您正在检查有问题的密钥，请检查其摘要是否为 '4165df64e40f9c019099f9fc72d1bd79'

```
at ilog.jum.client700.IluSAM.<init>(IluSAM.java:569)
at ilog.jum.client700.IluSAM.createIluSAM(IluSAM.java:352)
at ilog.rules.res.xu.spi.IlrManagedXUConnectionFactory.verifyRESLicense(IlrManagedXUConnectionFactory.java:924)
... 47 more 
```

如果有人有任何想法，请帮助我。

提前致谢。哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:50:20.110

我得到了这个问题的原因。我正在尝试安装 Rules Studio 7.1.1 并使用 7.0.0 版的规则执行服务器。sam.jar 以及版本 7.0.0 的其他 jar，这导致了问题。RES 不适用于 Rules Studio 7.1.1 安装。所以我安装了版本 7.0.0，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:52:00.473

我不知道您使用的是哪个 WAS，但我建议您重新安装 RES。
该文档清楚地说明了如何安装 RES 和 RTS。

你说你是新人，所以我假设你刚刚下载了它，因此你的试用版是有效的。
否则，可能是因为它已过期，请仔细检查。

希望能帮助到你。

PS：检查我对您关于测试规则的其他问题的回答，因为您不需要 RES 来测试规则

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T17:03:58.903

[如何验证 JRules 模块是否已在 JRules 7 中安装并获得许可？](http://www-01.ibm.com/support/docview.wss?uid=swg21439091)

我有同样的问题，我通过用最新的替换所有 sam.jar 文件来修复它。

# python - 在数组中查找异常值，列表

> ID：10510169
> 
> 赞同：6
> 
> 时间：2012-05-09T05:12:50.943
> 
> 标签：python, algorithm, algorithmic-trading

我有数组形式的销售统计数据，可以根据这些数据计算标准偏差或平均值。

```
stats = [100, 98, 102, 100, 108, 23, 120] 
```

让我们说+-20％的差异是正常情况，**23**显然是一个特例。

找到这个不寻常值的最佳算法是什么（在任何语言、伪或任何原则中）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T05:15:37.420

您可以将它们转换为[Z 分数](http://en.wikipedia.org/wiki/Standard_score)并查找异常值。

```
>>> import numpy as np
>>> stats = [100, 98, 102, 100, 108, 23, 120]
>>> mean = np.mean(stats)
>>> std = np.std(stats)
>>> stats_z = [(s - mean)/std for s in stats]
>>> np.abs(stats_z) > 2
array([False, False, False, False, False,  True, False], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:16:31.377

计算平均值和标准偏差。将任何超过平均值 X 标准偏差的值视为“异常”（其中 X 可能在 2.5 到 3.0 左右）。

这个主题有很多变体。如果您需要一些在统计上确实合理的东西，您可能需要研究其中一些——它们可以消除诸如捍卫（例如）2.7 标准偏差作为分界线的任意选择之类的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T05:18:07.520

找到[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation)，位于 3 sigma 或 +- 3 sigma 之外的值是一个离谱的值......

理论上，+-3 sigma 的[置信度值](http://en.wikipedia.org/wiki/Confidence_band)超过 99%。

# c# - VS2010、C#、Python：运行时执行 Python 脚本文件

> ID：10510170
> 
> 赞同：0
> 
> 时间：2012-05-09T05:12:52.383
> 
> 标签：c#, python, windows, visual-studio-2010

我希望在 C# 中创建一个示例程序，它通过 USB 端口下载实时数据（即数据记录器）。C# 接受数据（十六进制或数字），然后自动下载一个 Python 文件（即 validatemethodA.ps），然后执行该文件。python接受来自C#代码的数据，然后对数据进行验证检查或进行复杂的计算并将结果返回给C#，其中数据显示在窗口窗体上并附加到文件中（通过C#）。

Python 是一个脚本，它不需要预先编译（在 c# 运行时），这意味着用户可以自由修改 python 脚本以优化 pass/fails 参数或计算结果，而无需返回 VS2010 编译整个程序。

这意味着我可以提供发布 C# 产品，并且只有用户可以修改 python 文件。

这是如何实现的？，是否有示例/演示，任何人都可以将我链接到这个解决方案，以便我可以试验这个概念证明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:30:33.587

你看过[IronPython](http://ironpython.net/)吗？

[Stack Overflow 上有大量信息，](https://stackoverflow.com/questions/tagged/ironpython)包括一些特别相关的问题，例如[IronPython - 从 C# 4.0 应用程序中的字符串加载脚本](https://stackoverflow.com/questions/2154320/ironpython-load-script-from-string-in-c-sharp-4-0-application)。

还有[更多](http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx)在[网络](http://www.ironpython.info/index.php/Using_Python_Classes_from_.NET/CSharp_IP_2.6)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:29:38.083

有几种方法可以做到这一点……一种是通过从 C# 程序调用系统调用来“脱壳”到 Python。在那里，您将希望使用 .NET 运行时 Process.Start 方法将 Python 解释器作为 C# 程序的子进程运行。

另一种选择是使用[IronPython 解释](http://ironpython.codeplex.com/)器在 C# 和 Python 之间进行更紧密的集成。IronPython (ipy)，是在.NET 中实现的python 解释器，ipy 可以运行Python 代码（与普通的“c”python 基本相同，但有一些不同），但也可以导入.NET 程序集并与.NET 运行时交互，直接地。

# html - Dojo 所见即所得编辑器和 Django 模板

> ID：10510172
> 
> 赞同：0
> 
> 时间：2012-05-09T05:12:58.070
> 
> 标签：html, django, dojo, editor, wysiwyg

我已将 Dojo 所见即所得编辑器添加到我的 django 管理面板中。当我键入多个空格时出现问题。当我将编辑器创建的语法输出到模板时，我会得到`&amp;nbsp;`每个额外空间。我假设它试图创建一个不间断的空间，但它在浏览器中呈现为`&nbsp;`.

有人知道为什么是这样吗？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:34:32.037

`&`我认为它的django 正在改变`&amp;`服务器端。如果它是一个简单的空间，django 会自行替换它`&nbsp;`。我不知道是否有任何功能可以关闭转义是 django 中的特定情况，你可以试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:47:00.707

经过一些研究，您想使用模板过滤器[安全](https://docs.djangoproject.com/en/1.1/ref/templates/builtins/#safe)地解决此问题。您可能还希望添加带有脚本的过滤器[removetags](https://docs.djangoproject.com/en/1.1/ref/templates/builtins/#removetags)作为删除潜在恶意 javascript 的选项。所以我的模板变量最终看起来像这样：`{{ var|removetags:"script"|safe }}`

# .htaccess - 我可以在 .htaccess 文件中使用嵌套的 if

> ID：10510174
> 
> 赞同：0
> 
> 时间：2012-05-09T05:13:10.870
> 
> 标签：.htaccess

我在我的 htaccess 文件中使用以下代码。（嵌套如果模块）它很好还是会产生任何问题。（请任何专家对此发表看法）

```
# Enable the client to receive both gzip-encoded content and a plain content.
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

<IfModule mod_setenvif.c>
#The following lines are to avoid bugs with some browsers
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html 
</IfModule>

</IfModule> 
```

先感谢您

问候，莫娜

# iphone - 如何在 Google 日历 API v3 中获取特定日期的日历数据？

> ID：10510176
> 
> 赞同：7
> 
> 时间：2012-05-09T05:13:27.303
> 
> 标签：iphone, objective-c, ios, api, google-calendar-api

如何在 Google calendar API v3 中获取特定日期的日历数据？在参数中，timeMax 和 timeMin 与事件的创建日期进行比较，而不是与事件的发生日期进行比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T19:14:58.243

timeMin 和 timeMax 根据我的活动日期工作。我将 api url 用于事件 > 列表。[您可以在google calendar api docs for events > list](https://developers.google.com/google-apps/calendar/v3/reference/events/list)页面底部运行实时测试以进行验证。请记住，日期格式应为 yyyy-mm-ddT00:00:00+00:00

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-02T23:36:39.207

php中的示例

```
$cal = new Google_Service_Calendar($client);
$optParams = array('timeMax' => '2014-12-03T23:59:59+00:00','timeMin' => '2014-12-02T00:00:01+00:00');

$events = $cal->events->listEvents('primary',$optParams); 
```

# iphone - 带分页的水平 UIScrollView

> ID：10510180
> 
> 赞同：2
> 
> 时间：2012-05-09T05:14:05.537
> 
> 标签：iphone, ios, ipad, uiviewcontroller

我正在 github 上寻找一个开源库，它执行水平 UIScrollView 和分页，就像 UITableView 那样（重用单元格）。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:19:31.380

用这个

[https://github.com/gmoledina/GMGridView](https://github.com/gmoledina/GMGridView)

我将它用于我自己的应用程序，效果很好，通过一些简单的调整，你可以让它做你想做的事。

它支持水平和垂直网格的分页，每页后返回值等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:35:46.743

有一些项目：

[https://github.com/TheVole/Horizo​​ntalTable](https://github.com/TheVole/HorizontalTable)

[https://github.com/rickharrison/RHHorizo​​ntalTableView](https://github.com/rickharrison/RHHorizontalTableView)

[https://github.com/andrewgubanov/OrientedTableView](https://github.com/andrewgubanov/OrientedTableView)

[https://github.com/alekseyn/EasyTableView](https://github.com/alekseyn/EasyTableView)

# sql - 想要来自 varchar2 数据类型列的数字数据

> ID：10510181
> 
> 赞同：0
> 
> 时间：2012-05-09T05:14:07.227
> 
> 标签：sql, oracle

我有一个`Product`列名称为 varchar2 数据类型的表`Value`，在此列中的值存储为

```
All,10:23,0.84522,1.245,10:54:68,
All,1:22:00,0.245,45:12:00 
```

等等

我们必须提取所有浮点值，如 (0.84522,1.245,0.245) 和以“：00”结尾的值，如 (1:22:00,45:12:00)。

我有以下查询，但它似乎不起作用；它给了我除字符之外的所有值。

```
select * from Product where Values BETWEEN to_char (0) and to_char (2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:00:03.153

试试这个查询：

```
select *
  from (select distinct regexp_substr(t.value, '[^,]+', 1, level) phrase
          from Product t
        connect by regexp_substr(t.value, '[^,]+', 1, level) is not null) ph
 where regexp_like(ph.phrase, '(\d+\.\d+)|(.+:00)') 
```

where 子句中的正则表达式可能需要一些调整

它的作用是——

1.  分隔所有短语（内部查询）
2.  仅选择符合您条件的那些

* * *

**更新**
如果您遇到性能问题，您可以尝试不同的方法：

```
create or replace type phrase_typ is object
(
  phrase varchar2(100)
)
;
/
create or replace type phrase_tab as table of phrase_typ;
/
create or replace function split_string(del in varchar2) return phrase_tab
  pipelined is

  phrase  varchar2(1000);
  str_t   varchar2(1000);
  v_del_i number;

  cursor c is with t as
    select value from product;

begin

  for r in c loop
    str_t := r.value;

    while str_t is not null loop

      v_del_i := instr(str_t, del, 1, 1);

      if v_del_i = 0 then
        phrase := str_t;
        str_t  := '';
      else
        phrase := substr(str_t, 1, v_del_i - 1);
        str_t  := substr(str_t, v_del_i + 1);
      end if;

      if regexp_like(phrase, '(\d+\.\d+)|(.+:00)') then
        pipe row(phrase_typ(phrase));
      end if;

    end loop;

  end loop;

  return;
end split_string;
/ 
```

现在您的查询应该如下所示：

```
select * from table(split_string(',')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:29:59.743

我认为这会奏效

```
select *
FROM  Product 
WHERE  
(Value LIKE '%:00' AND Value<>  'ALL') AND (Value BETWEEN  to_NUMBER (0) and to_NUMBER (2)) 
```

# c++ - 使用 OpenGL 和 gluLookAt 围绕球体旋转

> ID：10510186
> 
> 赞同：2
> 
> 时间：2012-05-09T05:15:21.503
> 
> 标签：c++, opengl, rotation, glu, glulookat

好的，所以我尝试单击并拖动以使用 C++ 和 OpenGL 围绕对象旋转。我的方法是使用以原点为中心的 gluLookAt 并通过使用球体的参数方程来获取眼睛的坐标 (eyex = 2* cos(theta) * sin(phi); eyey = 2* sin( theta) * sin(phi); eyez = 2* cos(phi);)。这很有效，因为我可以单击并水平旋转，但是当我尝试垂直旋转时，它会形成紧密的圆圈而不是垂直旋转。我试图通过使用相机的位置和沿 xz 平面成 90 度角的向量来获得向上向量，并取其叉积。我的代码如下：

```
double dotProduct(double v1[], double v2[]) {
    return v1[0]*v2[0] + v1[1]*v2[1] + v1[2]*v2[2];
}
void mouseDown(int button, int state, int x, int y) {
    if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN ) {
        xpos = x;
        ypos = y;
    }
}
void mouseMovement(int x, int y) {
    diffx = x - xpos;
    diffy = y - ypos;
    xpos = x;
    ypos = y;
}
void camera (void) {

    theta += 2*PI * (-diffy/glutGet(GLUT_SCREEN_HEIGHT));
        phi += PI * (-diffx/glutGet(GLUT_WINDOW_WIDTH));

    eyex = 2* cos(theta) * sin(phi);
    eyey = 2* sin(theta) * sin(phi);
    eyez = 2* cos(phi);

    double rightv[3], rightt[3], eyes[3];
    rightv[0] = 2* cos(theta + 2/PI) * sin(phi);
    rightv[1] = 0;
    rightv[2] = 2* cos(phi);
    rightt[0] = rightv[0];
    rightt[1] = rightv[1];
    rightt[2] = rightv[2];
    rightv[0] = rightv[0] / sqrt(dotProduct(rightt, rightt));
    rightv[1] = rightv[1] / sqrt(dotProduct(rightt, rightt));
    rightv[2] = rightv[2] / sqrt(dotProduct(rightt, rightt));

    eyes[0] = eyex;
    eyes[1] = eyey;
    eyes[2] = eyez;
    upx = (eyey/sqrt(dotProduct(eyes,eyes)))*rightv[2] + (eyez/sqrt(dotProduct(eyes,eyes)))*rightv[1];
    upy = (eyez/sqrt(dotProduct(eyes,eyes)))*rightv[0] + (eyex/sqrt(dotProduct(eyes,eyes)))*rightv[2];
    upz = (eyex/sqrt(dotProduct(eyes,eyes)))*rightv[1] + (eyey/sqrt(dotProduct(eyes,eyes)))*rightv[0];

    diffx = 0;
    diffy = 0;
} 
```

我有点基于[此](http://code.google.com/p/monocam/wiki/ZoomRotatePan#rotate)，但它不起作用，所以我尝试了我的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:26:17.693

这不完全是您这样做的方式的解决方案，但前几天我做了类似的事情。我是通过使用 DX 来完成的`D3DXMatrixRotationAxis`，`D3DXVec3TransformCoord`该`D3DXMatrixRotationAxis`方法背后的数学可以在下一页底部找到：[D3DXMatrixRotationAxis Math](http://www.siggraph.org/education/materials/HyperGraph/modeling/mod_tran/3drota.htm)如果您无法使用 DX，请使用此方法。这将允许您围绕您传入的任何轴旋转。在我的目标代码中，我跟踪一个方向和向上矢量，并且我只需围绕运动轴（在您的情况下为偏航和俯仰）旋转其中的每一个。

要实现这样的固定距离相机，我只需做当前相机位置和原点位置的点积（如果这永远不会改变，那么你可以简单地做一次。）然后将相机移动到原点旋转它的量然后，您需要将其移回新方向和向上值。

# html - 有效使用（锚标记）没有 href 属性？

> ID：10510191
> 
> 赞同：192
> 
> 时间：2012-05-09T05:15:40.073
> 
> 标签：html, anchor, semantic-markup, htmlbutton

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2012-05-09T05:34:30.790

nchor`<a>`元素只是指向或来自某些内容的锚点。最初，HTML 规范允许命名锚 ( `<a name="foo">`) 和链接锚 ( `<a href="#foo">`)。

命名锚格式不太常用，因为片段标识符现在用于指定`[id]`属性（尽管为了向后兼容，您仍然可以指定`[name]`属性）。[没有属性的`<a>`元素`[href]`仍然有效](http://www.w3.org/TR/2011/WD-html5-20110525/text-level-semantics.html#the-a-element)。

就语义和样式而言，`<a>`元素不是链接 ( `:link`)，除非它具有`[href]`属性。这样做的副作用是，默认情况下，没有的`<a>`元素不会`[href]`在跳位顺序中。

真正的问题是`<a>`元素本身是否是 a 的适当表示`<button>`。`link`在语义层面上， a和 a之间有明显的区别`button`。

按钮是单击时会导致动作发生的东西。

链接是导致当前文档导航发生变化的按钮。在片段标识符 ( ) 的情况下，发生的导航可能在文档内移动，或者在 url ( )`#foo`的情况下移动到新文档。`/bar`

由于链接是一种特殊类型的按钮，因此它们通常会覆盖其操作以执行替代功能。从一致性的角度来看，继续使用锚点作为按钮是可以的，尽管它在语义上不太准确。

如果您担心将`<a>`元素（或`<span>`，或`<div>`）用作按钮的语义和可访问性，则应添加以下属性：

```
<a role="button" tabindex="0" ...>...</a> 
```

[按钮角色](https://www.w3.org/WAI/PF/aria/roles#button)告诉用户特定元素被视为按钮，作为底层元素可能具有的任何语义的覆盖。

对于`<span>`和`<div>`元素，您可能希望为事件添加 JavaScript 键侦听器`Space`或`Enter`触发`click`事件。`<a href>`和`<button>`元素默认这样做，但非按钮元素不这样做。`click`有时将触发器绑定到不同的键更有意义。例如，Web 应用程序中的“帮助”按钮可能绑定到`F1`.

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-09T05:22:42.403

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-10-09T19:58:48.520

**是的，**`href`使用没有属性的锚标记是有效的。

> 如果该`a`元素没有`href`属性，则该元素表示一个占位符，用于放置链接，如果它是相关的，则仅包含该元素的内容。

是的，您可以使用`class`和 其他属性，**但您不能使用`target`、`download`、`rel`、`hreflang`和`type`**。

> 如果href 属性不存在，则必须省略`target`、`download`、`rel`、`hreflang`和属性。`type`

至于“*我应该吗？* ”部分，请参见第一个引文：“*如果相关链接可能会放置在哪里*”。所以我会问“*如果我没有 JavaScript，我会使用这个标签作为链接吗？* ”。如果答案是肯定的，那么**是的，你应该**使用`<a>`without `href`。如果不是，那么我仍然会使用它，因为生产力对我来说比边缘情况语义更重要，但这只是我个人的看法。

此外，您应该**注意**不同的[行为](https://stackoverflow.com/a/5292454/1293492)和[样式](http://jsfiddle.net/n7108p6L/)（例如，没有下划线、没有指针光标，而不是 a `:link`）。

来源：[W3C HTML5 推荐](http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-20T10:19:03.170

这是有效的。`data-toggle`例如，您可以使用它来显示模式（或响应和`data-target`属性的类似事物）。

就像是：

```
<a role="button" data-toggle="modal" data-target=".bs-example-modal-sm" aria-hidden="true"><i class="fa fa-phone"></i></a> 
```

在这里，我使用了 font-awesome 图标，它作为一个`a`标签而不是 a更好`button`，来显示一个模态。此外，设置`role="button"`使指针变为动作类型。如果没有`href`or `role="button"`，光标指针不会改变。

# java - 使用 JTextArea 在 java 中自定义复制、粘贴和删除

> ID：10510192
> 
> 赞同：0
> 
> 时间：2012-05-09T05:15:42.787
> 
> 标签：java, swing, copy, clipboard, paste

我有一些对象的数组列表`ArrayList<Object_Name>`，我想将其用作自定义剪贴板。有没有一种方法可以剪切、复制、粘贴和删除我在`JTextArea`使用此自定义剪贴板时输入的字符串？

# objective-c - 在 Mac 中使用 Enter 键调用不同的方法（目标 c）

> ID：10510199
> 
> 赞同：1
> 
> 时间：2012-05-09T05:16:34.460
> 
> 标签：objective-c, macos, osx-snow-leopard

我是 Objective c 编程的新手。我创建了一个应用程序，它的 UI 带有两个按钮“取消”和“确定”。单击“取消”时，应用程序必须终止并且单击“确定”必须执行某些任务。一切正常。我可以在这些按钮之间切换，并且可以通过单击空格按钮来调用所需的功能。我想要做的是，当焦点位于“取消”按钮（使用 Tab 键）然后从键盘单击 Enter 按钮时，我的应用程序应该终止，同样，当焦点位于“确定”按钮上时，单击 Enter 应该执行所需的功能。

我什至设置了“确定”和“取消”按钮的“setKeyEquivalent”属性，但我只能设置唯一的等效键。我还尝试读取按钮的标题或标签值，然后调用所需的功能，但它没有也没有用。

有人可以指导我如何使用输入按钮来根据 UI 中选择的按钮调用不同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:50:28.427

I think you don't want to set key equivalents for the buttons. You would want to override keyDown: and test for the enter key, then do the appropriate thing depending on which button had focus (which I think you could determine using NSWindow's firstResponder method).

# java - onPause() NullPointerException - 试图将数据写入数据库 onPause

> ID：10510203
> 
> 赞同：0
> 
> 时间：2012-05-09T05:17:14.693
> 
> 标签：java, android

当应用程序暂停时，我试图将一些变量数据写回数据库表，以供以后检索。我承认在这一点上是一个完整的菜鸟（我们都必须从某个地方开始）。

我的代码：

```
package com.android.dbtest;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

import android.R.layout;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.os.Environment;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.InputEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.SimpleCursorAdapter;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.Toast;

@SuppressWarnings("unused")
public class jobActivity extends Activity {   

public static final String LOG_TAG = "dbtest";

public SQLiteAdapter jobSave;
//public String buttText;
//SimpleCursorAdapter cursorAdapter;
//String cursor;    

public void onCreate(Bundle savedInstanceState) {        
super.onCreate(savedInstanceState);          
setContentView(R.layout.joblayout); 

final EditText jobIDInput = (EditText) findViewById(R.id.jobIDText);  
final EditText jobAddress = (EditText) findViewById(R.id.jobAddressText);  
final EditText jobPCInput = (EditText) findViewById(R.id.jobPostcodeText); 

jobIDInput.setText(String.valueOf(Property.jobId));
jobAddress.setText(String.valueOf(Property.jobAddress));
jobPCInput.setText(String.valueOf(Property.jobPostCode));

Log.v(LOG_TAG, "Property part 2:" + Property.jobAddress);

jobIDInput.addTextChangedListener(new TextWatcher(){

    @Override
    public void afterTextChanged(Editable id) {
        Property.jobId = jobIDInput.getText().toString();

    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        Property.jobId = jobIDInput.getText().toString();

    }

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        // TODO Auto-generated method stub

    }

});

jobAddress.addTextChangedListener(new TextWatcher(){

    @Override
    public void afterTextChanged(Editable id) {
        Property.jobAddress = jobAddress.getText().toString();

    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        Property.jobAddress = jobAddress.getText().toString();

    }

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        // TODO Auto-generated method stub

    }

});

jobPCInput.addTextChangedListener(new TextWatcher(){

    @Override
    public void afterTextChanged(Editable id) {
        Property.jobPostCode = jobPCInput.getText().toString();

    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {

    }

});

}

protected void onPause(){   

Log.v(LOG_TAG, "job state called");
saveJobState();
super.onPause();

}

private void saveJobState() {
// TODO Auto-generated method stub

String id = Property.jobId;
String jobAddress = Property.jobAddress;
String jobPostCode = Property.jobPostCode;

Log.v(LOG_TAG, "Paused");
jobSave.openToWrite();         // This is line 388
Log.v(LOG_TAG, "open to write ok");
jobSave.insertjob(id, jobAddress, jobPostCode);
jobSave.close();

}

} 
```

日志猫：

```
05-09 06:04:30.180: ERROR/AndroidRuntime(21996): FATAL EXCEPTION: main
05-09 06:04:30.180: ERROR/AndroidRuntime(21996): java.lang.RuntimeException: Unable to pause activity {com.android.dbtest/com.android.dbtest.jobActivity}: java.lang.NullPointerException
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2358)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2315)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.LocalActivityManager.performPause(LocalActivityManager.java:200)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:184)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:288)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:691)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.widget.TabHost.setCurrentTab(TabHost.java:341)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:140)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.view.View.performClick(View.java:2538)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.view.View$PerformClick.run(View.java:9152)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.os.Handler.handleCallback(Handler.java:587)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.os.Looper.loop(Looper.java:130)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.ActivityThread.main(ActivityThread.java:3691)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at java.lang.reflect.Method.invokeNative(Native Method)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at java.lang.reflect.Method.invoke(Method.java:507)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at dalvik.system.NativeStart.main(Native Method)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996): Caused by: java.lang.NullPointerException
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at com.android.dbtest.jobActivity.saveJobState(jobActivity.java:388)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at com.android.dbtest.jobActivity.onPause(jobActivity.java:375)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.Activity.performPause(Activity.java:3877)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2345)
05-09 06:04:30.180: ERROR/AndroidRuntime(21996):     ... 19 more 
```

我怀疑我的问题是'jobsave.openToWrite（）'没有指向任何东西，但它肯定在我的SQLiteAdapter中。

如果有人能阐明任何观点，我将非常感激！

编辑：-OpenTo 从 SQLiteAdapter 编写代码在下面添加。包 com.android.dbtest；

```
import android.content.ContentValues;
import android.util.Log;
import android.widget.SimpleCursorAdapter;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter { 
private SQLiteHelper sqLiteHelper; 
private SQLiteDatabase sqLiteDatabase;
private Context context;  
public SQLiteAdapter(Context c)
{  
    context = c;
}  

public SQLiteAdapter openToRead() throws android.database.SQLException 
{ 
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION); 
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this; 
} 

public SQLiteAdapter openToWrite() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase(); 
    return this;
    }

public class SQLiteHelper extends SQLiteOpenHelper 
{  
    public SQLiteHelper(Context context, String name,    CursorFactory factory, int version) 
    {  
        super(context, name, factory, version); 
        }
    public void onCreate(SQLiteDatabase db)
    {   
        Log.v (LOG_TAG, "Create " + SCRIPT_CREATE_DATABASE);
        // TODO Auto-generated method stub 
        Log.v (LOG_TAG, "Create DB: ");
        db.execSQL(SCRIPT_CREATE_DATABASE); 
        db.execSQL(SCRIPT_CREATE_COUNT);
        } 

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {  
        Log.w(LOG_TAG,
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + MYDATABASE_TABLE);
        db.execSQL("DROP TABLE IF EXISTS Count");
        onCreate(db);

}
    public void onPause(){
        updateAll();
    }
}
} 
```

为了使帖子显着缩短，我已经删除了数据库创建方法。另外，我 99.99% 确信它们可以工作，因为我能够发布和显示表格中的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:23:02.560

实际上，您错过了初始化`SQLiteAdapter jobSave`类的实例。并直接使用它的方法`openToWrite()`。所以首先初始化jobSave实例，然后使用方法`openToWrite()`。

**编辑：**

在您的活动的`onCreate()`编写代码行中，

```
jobSave = new SQLiteAdapter(this); 
```

现在再次运行你的代码，让我知道发生了什么..

# .net - 在 SSRS 中计算总和（表达式）

> ID：10510204
> 
> 赞同：1
> 
> 时间：2012-05-09T05:17:23.603
> 
> 标签：.net, reporting-services, expression

我已将表达式放在详细信息字段中：

```
=iif(Fields!ExRate.Value > 0,
     (Fields!ExRate.Value * Fields!SubsAmt.Value),
     Fields!SubsAmt.Value) 
```

我想把这个字段的总和放在底部。如何获取包含表达式的该字段的总和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:22:15.050

这里一个简单的解决方案是创建一个计算列，然后对其求和。
我认为有一个使用 的解决方案`sum`，但我不确定是否值得付出努力 - 我发现计算的列更具可读性，并且它们避免了重复的逻辑（您在列和摘要行上有）。

# javascript - js 文件中的一部分脚本与 firebug 控制台正常工作，但在页面中不起作用

> ID：10510209
> 
> 赞同：1
> 
> 时间：2012-05-09T05:17:52.027
> 
> 标签：javascript, jquery, firebug

我真的很困惑，我有一个包含很多脚本的 js 文件，它们都正常工作，我只是添加了新行：

```
$('.RemoveE').click(function () {
    alert('yap');
}); 
```

但这不起作用，我用firebug对其进行了测试，一切正常，我也尝试了另一个也不起作用的浏览器，我必须提到我`="ReomoveE button red"`通过脚本添加了带有CSS类的新按钮，这是我的js的一部分，包括新行并添加按钮：

```
// <reference path="../jquery-1.7.1.js" />
$(document).ready(function() {

    $('.RemoveE').click(function() {
        alert('yap');
    });

    //Add new Addable div
    $('.AddNewE').click(function() {

        var Target = $('.Addable:first');
        var TargetId = $(Target).attr('id');
        var Count = $('.Addable#' + TargetId).size();
        var CloneTarget = $(Target).clone();
        CloneTarget.find('input').val('');
        CloneTarget.insertAfter('.Addable:last');
        var TargetName = $(Target).find('input').attr('name');
        var CloneName = TargetName + '[1]';
        TargetName = TargetName + '[0]';
        $(Target).find('input').attr('name', TargetName);
        $(Target).find('span[class*="field-validation"]').attr('data-valmsg-for', TargetName);
        $(CloneTarget).find('input').attr('name', CloneName);
        $(CloneTarget).append($('<input type="button" class="RemoveE button red" value="remove" />'));

        (function($) {
            $.fn.updateValidation = function() {
                var form = this.closest("form").removeData("validator").removeData("unobtrusiveValidation");
                $.validator.unobtrusive.parse(form);
                return this;
            };
        })(jQuery);

        $(Target).updateValidation();
        $(CloneTarget).updateValidation();
    });
    ...
});​ 
```

所以你怎么看？问题出在哪里，为什么所有功能都正常工作，但这个新功能没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:24:07.720

您在元素存在之前添加了处理程序：

```
$('.RemoveE').click(function() {
    alert('yap');
});

//then later

$(CloneTarget).append($('<input type="button" class="RemoveE button red" value="remove" />')); 
```

尝试：

在创建时添加处理程序：

```
var newInput = $('<input type="button" class="RemoveE button red" value="remove" />')

newInput.click(function(){
    alert('yap');
});

$(CloneTarget).append(newInput) 
```

或委托`on()`

```
$(parent_of_RemoveE).on('click','.RemoveE',function() {
    alert('yap');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:28:05.647

您需要使用`.on()`or`.delegate()`这样它就可以收听您动态创建的任何新按钮

在此处查看示例代码

HTML

​<code><div id='test'></div>​​​​​​​​​​​​​​​​​​</code>

查询

```
​$(document).ready(function() { 
    $('#test').on('click','.removeE', function() {
     alert('yap');
    });

    $('#test').append('<input type="button" class="removeE" value="test"/>');
});​ 
```

[你可以在这里](http://jsfiddle.net/7KGwJ/)看到这个例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T05:33:41.977

**@Joseph**基本上说了什么。我评论了您的代码位以指出一些值得注意的事情。

```
$(document).ready(function () {

    $('.RemoveE').click(function () {
        alert('yap');
    });

    //Add new Addable div
    $('.AddNewE').click(function () {

        var Target = $('.Addable:first');
        var TargetId = $(Target).attr('id'); // Double wrapping in jQuery

         // ID are unique, selector makes little sense,
         // and `length` is preferable to `size()`
        var Count = $('.Addable#' + TargetId).size();
        var CloneTarget = $(Target).clone(); // Double wrapping in jQuery
        CloneTarget.find('input').val('');
        CloneTarget.insertAfter('.Addable:last');
        var TargetName = $(Target).find('input').attr('name'); // Double wrapping in jQuery

        // This seems a bit verbose...
        var CloneName = TargetName + '[1]';
        TargetName = TargetName + '[0]';
        $(Target).find('input').attr('name', TargetName); // Double wrapping in jQuery
        $(Target).find('span[class*="field-validation"]').attr('data-valmsg-for', TargetName); // Double wrapping in jQuery
        $(CloneTarget).find('input').attr('name', CloneName); // Double wrapping in jQuery
        $(CloneTarget).append($('<input type="button" class="RemoveE button red" value="remove" />')); // Double wrapping in jQuery
        // end verbosity

        (function ($) {
            $.fn.updateValidation = function () {
                // Don't need to chain `removeData()` twice,
                // as of jQuery 1.7 you can pass a list
                var form = this.closest("form").removeData("validator").removeData("unobtrusiveValidation");
                $.validator.unobtrusive.parse(form);
                return this;
            };
        })(jQuery);

        $(Target).updateValidation(); // Double wrapping in jQuery
        $(CloneTarget).updateValidation(); // Double wrapping in jQuery
    });

}); 
```

# c - 毫秒到 jiffies 的转换

> ID：10510210
> 
> 赞同：0
> 
> 时间：2012-05-09T05:17:54.993
> 
> 标签：c, linux, device-driver

我正在使用 msecs_to_jiffies(msecs) 来获得延迟。我需要 16 毫秒的延迟。但问题是函数返回 1 用于输入 1-10，2 用于 11-20，3 用于 21-30 等等。因此我无法设置适当的延迟。我只能将延迟设置为 10 毫秒。我无法更改 HZ 值，并且该功能也无法睡眠。

请提出解决此问题的方法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:32:53.477

您的系统 HZ 值似乎设置为 100。

如果您希望以低于系统 HZ 的分辨率暂停执行一段时间，您需要使用主板支持并在内核中启用的高分辨率计时器（使用 nsec 分辨率，而不是 jiffies）。有关如何使用它们的界面，请参见此处：http: [//lwn.net/Articles/167897/](http://lwn.net/Articles/167897/)

因此，要么将系统 HZ 更改为 1000 并获得 1 毫秒的 jiffie 分辨率，要么使用高分辨率计时器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T05:22:48.580

你*不能*睡整整 16 毫秒。您可以睡*至少*16 毫秒，但不能睡 16 毫秒。这不是 Linux（或任何其他桌面操作系统）的工作方式——它们不是实时操作系统，它们是以非确定性的方式安排的，你对此无能为力。

无论你想做什么，你都必须以另一种方式去做。根据您提供的少量信息，我只能说您尝试做的事情无法完成。

# html - 工作流如何实现内联编辑？

> ID：10510217
> 
> 赞同：8
> 
> 时间：2012-05-09T05:18:56.197
> 
> 标签：html, textarea, contenteditable, inline-editing

这是一个非常棒的 UI 功能，我可以在没有特定按钮的情况下点击编辑我的列表。它看起来像带有链接和标签突出显示的大型所见即所得编辑器。他们使用哪种 js 技术？Contenteditable 用于监视焦点，然后 textarea 用于编辑？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-09T20:49:03.983

我是创建 WorkFlowy 的两个人之一。当您在页面上移动鼠标时，我们有一个`opacity:0`文本区域，可以随时定位在您悬停的项目的文本上。它具有与基础内容完全相同的内容和格式。

当您单击时，它会聚焦文本区域，我们会制作它`opacity:1`，以及它正在模仿的内容`opacity:0`。然后当你输入时，我们会在 textarea 和目标内容之间同步内容。将来我们可能会转移到一个完全不可见的文本区域，因为这将启用富文本编辑。这就是许多基于 html 的 IDE 所做的。

# solaris - 如何在 solaris 上搜索库文件？

> ID：10510219
> 
> 赞同：0
> 
> 时间：2012-05-09T05:19:05.647
> 
> 标签：solaris, telnet

我想在程序中使用 openssl 库文件。Openssl 安装在服务器上，但我不知道叫什么名字。如何使用 telnet 在服务器上搜索它并将这些文件包含在我的程序中以成功运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:20:50.377

OpenSSL 由几个库文件组成。您可能需要`-lssl`或`-lcrypto`或其他人。如果它不在默认位置，请询问您的系统管理员它的安装位置。

# ios - 我可以以编程方式翻转整个显示内容，使其上下颠倒吗

> ID：10510221
> 
> 赞同：0
> 
> 时间：2012-05-09T05:19:17.610
> 
> 标签：ios

我在 iPad 上有一个教学应用程序，iPad 固定在桌子上。一边是老师，一边是学生。我希望老师进行他/她可以正常阅读的设置操作，然后让整个显示翻转，以便学生可以正常阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:31:49.450

是的，这是可能的，因为您必须`UIGestureRecognizer`在交换视图时使用这种类型的翻转，可以颠倒翻转，反之亦然，了解更多信息，请阅读这篇文章 [http://www.techotopia.com/index.php/Identifying_iPhone_Gestures_using_iOS_4_Gesture_Recognizers_ (Xcode_4)](http://www.techotopia.com/index.php/Identifying_iPhone_Gestures_using_iOS_4_Gesture_Recognizers_%28Xcode_4%29)

[http://mobiledevelopertips.com/event-handling/gestures-recognizers-tap-pinchzoom-rotate-swipe-pan-long-press.html](http://mobiledevelopertips.com/event-handling/gestures-recognizers-tap-pinchzoom-rotate-swipe-pan-long-press.html)

[http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/](http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/)

享受这可能会帮助您分配快乐的编码:)

**编辑** 您可以参考我的问题，这个问题的答案可以帮助您分配看到已接受的答案问题是[如何显示倾斜的图像视图？](https://stackoverflow.com/questions/10394376/how-to-display-imageview-tilted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:31:29.513

是的，这是可能的。您可以为此使用 CABasicAnimation -

```
CABasicAnimation* rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
rotationAnimation.toValue = // To extent that you want. 
```

还有其他几种方法可以实现这一目标。

# javascript - Javascript 控制订单表单的值

> ID：10510224
> 
> 赞同：1
> 
> 时间：2012-05-09T05:19:55.757
> 
> 标签：javascript, jquery, forms

我目前正在创建一个订单。但是，我一直停留在获得的价值上。这是一个产品订单，我想显示价格并根据用户选择计算数量。

例如，我有一个产品数量下拉列表，所以当用户选择一种产品时，价格 div 将显示一个值，如果用户选择 0，价格 div 将显示 $0。问题出在哪里？

```
var productValue = document.getElementById("e_Product");
var productQuantity = document.getElementById("e_Quantity");
var stringValue = productValue.options[productValue.selectedIndex].text;

if (stringValue == "Product Name" && productQuantity == 1) 
{
    var singleValue = "$800.00";
    $('#e_Price').val(singleValue);
}
else
{
    var singleValue1 = "$0.00";
    $('#e_Price').val(singleValue1);
} 
```

另外，在表单中，如何禁用输入字段的编辑功能？我发现当我获得这些产品的价值时，用户仍然可以在字段中输入他们想要的任何内容。

对于在输入字段中显示值，我觉得我只能使用 val() 来输出值，所以每次我都需要设置一个新变量来保存值，但是对于订单表格，我想在结束。就像用户选择产品、产品数量和运输选项一样，我需要获得所有这些费用的金额。

对不起表达，有点乱，几个问题放在一起，有点不知道我在做什么。

非常感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:31:22.890

使用全局变量

```
var singleValue = "$0.00";
if (stringValue == "Product Name" && productQuantity == 1) 
{
  singleValue = "$800.00";
$('#e_Price').val(singleValue);
}
else
{
 $('#e_Price').val(singleValue);
} 
```

对于禁用文本框（总金额字段）

```
$('#id').attr('disabled',true); 
```

或者

```
$('#id').attr('disabled','disabled'); 
```

# html - 删除最后一页的背景图片

> ID：10510225
> 
> 赞同：0
> 
> 时间：2012-05-09T05:19:57.320
> 
> 标签：html, css, wordpress

HTML

```
<div>
<ul class="menubar">
 <li>home</li>
 <li>product</li>
 <li>about us</li>
 <li>contact us</li>
</div> 
```

CSS

```
.menubar li
{
    float: left;
    position: relative; 
    display: block;
    text-decoration: underline;
    text-transform:capitalize
    background:url(../image/rightborder.png) no-repeat right center;
}

.menubar li:hover
{   

    background: #FF0000 ; 
    color: #FFFFFF;
} 
```

这项工作运行良好，但问题`background:url(../image/rightborder.png)`出在最后一个菜单“联系我们”之后。反正有没有关掉它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:21:24.620

只需将其添加到 CSS 中，它可能会有所帮助

```
.menubar li:last-child { background:none} 
```

但是在IE8以下不能正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:26:36.280

`class`为最后一项添加一个属性，比如说`<li class=last>contact us</li>`，然后添加规则`.menubar li.last { background-image: none; }`。

这适用于所有支持 CSS 的浏览器。虽然有点笨拙，但使用类选择器是最安全的，而且当它是单个列表时，笨拙因素是相当不相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:22:48.300

你也可以这样写：

```
.menubar li + li
{
    background:url(../image/rightborder.png) no-repeat left center;
} 
```

首先关闭你的**UL**

# ruby - Pcaprub 方法

> ID：10510248
> 
> 赞同：0
> 
> 时间：2012-05-09T05:23:05.827
> 
> 标签：ruby, networking, pcap

[我在这里](http://rubydoc.info/gems/pcaprub/0.11.2/frames.)查看了 pcaprub 的文档

我在文档站点上没有看到任何学习方法。这是一个非常薄的文档！我在哪里可以找到 Pcaprub 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:33:43.013

手册：[http](http://rubypcap.svn.sourceforge.net/viewvc/rubypcap/doc/index.html) ://rubypcap.svn.sourceforge.net/viewvc/rubypcap/doc/index.html 示例：[http](http://rubypcap.svn.sourceforge.net/viewvc/rubypcap/examples/) ://rubypcap.svn.sourceforge.net/viewvc/rubypcap/examples/ 更多：[http://sourceforge .net/apps/trac/rubypcap/](http://sourceforge.net/apps/trac/rubypcap/) Github 自述文件：[https ://github.com/shadowbq/pcaprub](https://github.com/shadowbq/pcaprub)

# html - 如何在增加圆圈内文字的同时增加一个圆圈？

> ID：10510251
> 
> 赞同：6
> 
> 时间：2012-05-09T05:23:26.290
> 
> 标签：html, css

我想在一个圆圈内有文字。文本增加时是否可以动态增加圆圈的大小？
[这是一个例子](https://jsfiddle.net/ThinkingStiff/mLW47)。
但是在这个例子中对我来说问题是只有宽度随着文本的增加而增加。

例如

```
.badge {
    background:             radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:    -moz-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:     -ms-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:      -o-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background: -webkit-radial-gradient( 5px -9px, circle, white 8%, red 26px );
    background-color: red;
    border: 2px solid white;
    border-radius: 12px; /* one half of ( (border * 2) + height + padding ) */
    box-shadow: 1px 1px 1px black;
    color: white;
    font: bold 15px/13px Helvetica, Verdana, Tahoma;
    height: 16px; 
    padding: 4px 3px 0 3px;
    text-align: center;
    min-width: 14px;
}

/* only needed for this sample */
.badge {
    float: left;
    left: 25px;
    margin: 6px;
    position: relative;
    top: 25px; 
}
```

```
<div class="badge">1</div>
<div class="badge">2</div>
<div class="badge">3</div>
<div class="badge">44</div>
<div class="badge">55</div>
<div class="badge">666</div>
<div class="badge">777</div>
<div class="badge">8888</div>
<div class="badge">9999</div>
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T06:08:59.940

我认为您需要使用javascript来调整高度以匹配宽度；您还应该使用 50% 作为边界半径。我修改[了你的例子](http://jsfiddle.net/trr2R/<br)。

```
$(document).ready(function(){$('.badge').each(function(){
    $(this).height($(this).width());
    $(this).css('line-height', $(this).height()+'px');
})});
```

```
.badge {
    background:             radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:    -moz-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:     -ms-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background:      -o-radial-gradient( 5px -9px, circle, white 8%, red 26px );
        background: -webkit-radial-gradient( 5px -9px, circle, white 8%, red 26px );
    background-color: red;
    border: 2px solid white;
    border-radius: 50%; /* one half of ( (border * 2) + height + padding ) */
    box-shadow: 1px 1px 1px black;
    color: white;
    font: bold 15px/13px Helvetica, Verdana, Tahoma;
    height: 16px; 
    padding: 3px;
    text-align: center;
    min-width: 16px;
}

/* only needed for this sample */
.badge {
    float: left;
    left: 25px;
    margin: 6px;
    position: relative;
    top: 25px; 
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div class="badge">1</div>
<div class="badge">2</div>
<div class="badge">3</div>
<div class="badge">44</div>
<div class="badge">55</div>
<div class="badge">666</div>
<div class="badge">777</div>
<div class="badge">8888</div>
<div class="badge">9999</div>
```

# iphone - NSFetchRequest 发布导致应用程序崩溃

> ID：10510256
> 
> 赞同：0
> 
> 时间：2012-05-09T05:24:22.353
> 
> 标签：iphone, memory-management, crash, memory-leaks, nsfetchrequest

静态分析器一直告诉我，我的请求对象的保留计数为 +1，仪器告诉我那里有泄漏。但是，无论我尝试在哪里发布它，它都会让我的应用程序崩溃。NSPredicate 对象也是如此。请帮忙，我正在努力赶上最后期限。

```
// Fetch Requests

// Method that returns an array of NSManagedObjects in the managedObjectContext with a predicate of who ordered

- (NSArray *)fetchDataWithEntity:(NSString *)entity andSortKey:(NSString *)key andPerson:(Person *)whoOrdered

{

 NSFetchRequest *request = [[NSFetchRequest alloc] init];

 NSEntityDescription *entityDescription = [NSEntityDescription entityForName:entity 

                                                                   inManagedObjectContext:managedObjectContext];

 request.entity = entityDescription;

 // Handling Sorting

 NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:key ascending:YES 

                                                                                 selector:@selector(compare:)];

 NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

 [request setSortDescriptors:sortDescriptors];

 [sortDescriptor release];

 [sortDescriptors release];

 // Handling Predicate

 if (whoOrdered) {

      NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@ == whoOrdered", whoOrdered];

      [request setPredicate:predicate];

 }

 NSError *error = nil;

 NSArray *mutableFetchResults = [managedObjectContext executeFetchRequest:request error:&error];

 //[request release];

 [error release];

 if (mutableFetchResults == nil) {

      // Handle the error

 }

 return mutableFetchResults; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:43:43.237

没有必要释放`error`对象，因为您不是它的所有者，并且您应该`request`在返回对象之前释放该对象，`mutableFetchResults`因为您正在使用它来创建它`alloc`，因此是它的所有者......

# ios - sizeToFit 不会触发带有长字的新行

> ID：10510264
> 
> 赞同：0
> 
> 时间：2012-05-09T05:25:28.153
> 
> 标签：ios, tableview, tableviewcell

我刚刚遇到了一个奇怪的问题，我有一个具有动态高度的自定义 tableview 单元格。虽然测试这一切似乎工作正常，但现在我正在将真实内容加载到其中似乎存在一些问题。

似乎某些文本不会触发 UILabel 中的新行

正确：[http](http://dl.dropbox.com/u/274185/Screen%20Shot%202012-05-09%20at%201.15.21%20PM.png) ://dl.dropbox.com/u/274185/Screen%20Shot%202012-05-09%20at%201.15.21%20PM.png 错误：[http://dl.dropbox.com/u/274185 /屏幕%20Shot%202012-05-09%20at%201.15.30%20PM.png](http://dl.dropbox.com/u/274185/Screen%20Shot%202012-05-09%20at%201.15.30%20PM.png)

正如您在错误示例中看到的那样，文本被推到了第二行，但标签的高度仍然只计算一行。

> item.project = @"另一个标题更长的测试项目（管理员/项目管理）";
> 
> item.project = @"测试项目（管理员/项目管理）";

我计算高度的方式是这样的：

```
// when creating the cell
cell.projectLabel.lineBreakMode = UILineBreakModeWordWrap;
cell.projectLabel.numberOfLines = 0;
[cell.projectLabel sizeToFit];

// in heightForRowAtIndexPath()
CGSize projectHeight = [item.project sizeWithFont:[UIFont boldSystemFontOfSize:13.0f] constrainedToSize:CGSizeMake(320.0f, CGFLOAT_MAX) lineBreakMode: UILineBreakModeWordWrap]; 
```

我尝试更改 lineBreakMode，但这似乎没有多大帮助

编辑：计算文本高度时出现问题，我使用了固定的 320 点，这是不正确的，在使用实际宽度后，高度计算正确。

```
CGSize projectHeight = [item.project sizeWithFont:[UIFont boldSystemFontOfSize:13.0f] constrainedToSize:CGSizeMake(cell.projectLabel.bounds.size.width, CGFLOAT_MAX) lineBreakMode: UILineBreakModeWordWrap]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:45:13.213

我*相信*sizeToFit 只会缩小视图的大小。您应该将标签的框架设置为足够高以容纳两行，然后调用 sizeToFit。这将在文本只有一行时缩小标签，但在文本为两行时保持其高度。

# php - 选择 where table < 400 给出不稳定的值

> ID：10510266
> 
> 赞同：0
> 
> 时间：2012-05-09T05:25:36.280
> 
> 标签：php, mysql, select

```
$sql = "(SELECT * FROM   table1 WHERE col1 LIKE  '%Computers%'
AND PRICE <= 400
AND  BUYURL IS NOT NULL
AND  IMAGEURL IS NOT NULL )
UNION
(SELECT DISTINCT * FROM  table2 WHERE col2 LIKE  '%desktop computer%' 
AND PRICE <= 400
AND  BUYURL IS NOT NULL
AND  IMAGEURL IS NOT NULL )
ORDER BY  PRICE ASC"; 
```

上面的查询返回“价格”有时超过 400 的值。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:31:21.627

作为临时解决方案，您可以使用：

```
AND CONVERT(price, DECIMAL) <= 400 
```

但我**强烈**建议您将其更改为`DECIMAL(10,2)`（其中 2 是您要存储的点之后的位数）

# php - 通过 htaccess 进行 301 重定向

> ID：10510268
> 
> 赞同：0
> 
> 时间：2012-05-09T05:25:55.690
> 
> 标签：php

我已将旧网站移至新域，但谷歌仍在显示我以前的链接，因此我制作了一个 htaccess 文件并进行了 301 重定向。以下是我的 htaccess 代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^old.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.old.com$
RewriteRule (.*)$ http://new.com/$1 [R=301,L] 
```

它将旧网址重定向到新网址，但不是逐页进行。意味着如果我要去 www.old.com/about.php 那么它会将我重定向到 www.new.com/ 但我希望 www.new.com/about.php 出现。

你能建议我如何使用正确的正则表达式以最少的工作来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:28:41.580

这将维护一切 - 查询字符串和请求路径：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^old.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.old.com$
RewriteRule ^(.*)$ http://new.com/$1 [R=301,L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:28:45.037

您根本不需要使用 mod_rewrite。只需使用：

```
<VirtualHost *:80>
    ServerName old.com
    ServerAlias www.old.com
    Redirect permanent / http://new.com/
</VirtualHost> 
```

该`Redirect`指令会自动保留`/`.

# c - 是否需要将 NULL 转换为结构指针类型以在 C 中进行分配/比较？

> ID：10510269
> 
> 赞同：2
> 
> 时间：2012-05-09T05:26:00.197
> 
> 标签：c, pointers, struct, null

我在学校的老师一直将**NULL**转换为**(struct foo *)**，然后再将其分配给指向结构 foo 的指针。例如：

```
struct foo {
   // smthg else
   struct foo *ptr;
};

struct foo *bar;
bar = (struct foo*)malloc(sizeof(struct foo));
bar->ptr = (struct foo *) NULL; 
```

让我感到困惑的是，他唯一一次测试该值是否为 NULL（检查链表是否已结束）他执行以下操作

```
if (aux->ptr != (struct foo *) NULL) {
   ...
} 
```

我问他为什么，如果要“增加” NULL 的大小以防止错误或其他什么。但是不，他告诉我（我认为非常不情愿）这是为了防止编译器可能出现一些错误（wtf？）。这真的有必要吗？

**编辑：**

他教的语言是 C。他可能不知道在 C 中强制转换 malloc 是不必要的。我想知道他只是小心还是无能。:P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T05:31:58.360

回答您的问题：不，没有必要强制`NULL`转换为特定的指针类型。编译器为它做了一个特殊情况，`NULL`并允许将其分配给任何指针类型，而不会出现指针类型转换警告。

同样，在与 比较时也不需要强制转换`NULL`：

```
if (aux->ptr != NULL) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T05:51:36.733

The correct form of

```
struct foo *bar = (struct foo*)malloc(sizeof(struct foo)); 
```

in C is always

```
struct foo *bar = malloc(sizeof *bar); 
```

Your professor is wrong and probably picked up bad habits from trying to use `malloc` in C++ (which is generally frowned upon, for good reasons).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T06:02:33.287

曾经有错误`#define NULL 0`的编译器具有并且 0 不是 (C89) C 标准所要求的空指针常量。这些天来，您不太可能遇到这样的编译器。

它曾经在上下文中很重要，例如`execl("cmd", "arg0", "arg1", NULL);`因为 NULL 需要是一个空指针常量，但是......这些天，NULL 是一个空指针常量，因此即使在那里也不需要强制转换。对于赋值操作，您可以只写`0`而不是强制转换 NULL。在`execl()`示例中，您不能只写 0；那是一个`int`并且不一定是空指针常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T05:38:13.843

没有必要将 NULL 强制转换为特定的指针类型，因为 NULL 被 #defined 为 0。我能想到的唯一原因是有教育意义的，因为在编写程序时记住对象和指针的类型是件好事.

在 C++ 中，您将使用 nullptr 进行初始化并使用 g++ -std=c++0x 进行编译

最后，有必要在 C++ 中转换 malloc 的返回值，而不是在 C 中。不过，在 C++ 中，您应该使用“new”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T05:28:01.610

在 C 中，`malloc`不需要将结果转换为变量类型。在 C++ 中，它必须是，否则你会得到一个编译时错误（不能隐式转换`void *`为`your_class *`）。

如果您的老师试图教您正确的编码原则，则需要演员表。如果你的老师试图教你 C 为 C++ 做准备，那么学习使用演员表是很有必要的。老师说“为了防止编译器可能出现一些错误”并没有什么“wtf”——你可能应该更经常地接受他的建议。假设你的教授是无知的*可能*不是要走的路。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-09T09:58:04.613

这个问题的正确答案是你的老师**没有错**，他/她**也不是无知**。他/她只是在教你好习惯。使用显式强制转换不是必须的，但至少有两个很好的理由应该这样做。

1.  *代码可移植性*

    使用显式转换可确保您的代码可在 ANSI C 编译器、前 ANSI 编译器以及最重要的非 ANSI C 兼容编译器之间**移植。**您的老师的代码不应该与任何编译器产生错误或警告，兼容或不兼容，过去、现在或未来。

    如果在早于 ANSI C 或不符合 ANSI 的任何平台上编译，请编写代码：

    ```
    pMyObject = NULL；

    ```

    在某些系统上，可能会生成编译器警告，如下所示：

    ```
    警告：“=”从“void*”转换为“struct foo*”
    警告：“=”从“int”转换为“struct foo*”

    ```

    编译器警告的目的是提醒您注意潜在的问题，因此即使使用单个警告进行编译的代码也不应被视为生产质量代码，除非通过显式强制转换来修复警告。

2.  *代码可读性*

    使用显式强制转换大大提高了可读性。例如，以下基于[Microsoft Windows SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)的真实世界示例：

    ```
    hMyWindow = CreateWindow(NULL, NULL, WM_OVERLAPPED, 0, 0, 100, 100, NULL, NULL, NULL, NULL);
    如果（hMyWindow == NULL）
        ...

    ```

    除非您参考 Microsoft Windows SDK，否则很明显您将无法理解传递给此函数的参数。但是，如果我写：

    ```
    hMyWindow = CreateWindow((LPCTSTR) NULL, (LPCTSTR) NULL, WM_OVERLAPPED, 0, 0, 100, 100, (HWND) NULL, (HMENU) NULL, (HINSTANCE) NULL, (LPVOID) NULL);
    如果 (hMyWindow == (HWND) NULL)
        ...

    ```

    然后我*马上就知道了*：1）变量的类型`hWindow`，2）返回类型`CreateWindow()`，3）每个函数参数的类型。几乎所有我需要知道的东西来理解这段代码，我不必扫描当前文件，或者寻找另一个头文件，或者浪费时间浏览互联网寻找 API 文档。这使得代码**自我记录**，如果您处于许多没有内置代码浏览支持的非图形环境之一，这一点尤其重要。

在 ANSI C99（ISO/IEC 9899:1999，第 6.5.16.1 节）中，ANSI 同意 NULL 指针常量的概念，并且将*NULL 指针常量*分配给类型化对象的指针是合法的。

然而，你的老师教你上述方法的真正原因是因为他/她只是像任何好老师一样，为现实世界做好准备，而在现实世界中，ANSI C 标准不是法律。它不必遵循，在*大多数*情况下也不会遵循。如果要获得财务利润或市场份额，编译器公司会忽略或扩展*任何标准。*此外，存在**许多**专有的计算机系统，其中一些来自世界上最大的制造商，其中安装了非 ANSI C 兼容的编译器并用于编译 C 程序，因为它们必须支持非标准硬件。

这就是为什么在执行任何涉及的指针操作时使用显式强制`NULL`转换是一个非常好的习惯。它将确保您的代码可以快速理解，编译干净，并在您以后遇到的各种平台和编译器工具中按预期工作。

# vimeo - 当页面上有另一个 iframe 时，Vimeo froogaloop api 不起作用

> ID：10510276
> 
> 赞同：1
> 
> 时间：2012-05-09T05:26:46.990
> 
> 标签：vimeo, froogaloop

很奇怪。当有另一个简单的 iframe 时，事件不会触发。我删除了 iframe - 它起作用了。

带有额外 iframe 的 html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<body>
<iframe id="player_2" src="http://player.vimeo.com/video/XXXXXXX?title=0&amp;byline=0&amp;portrait=0&amp;api=1&amp;player_id=player_2&amp;autoplay=1" width="782" height="413" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
<iframe src="/homestuff/googleads/index.html" width="1" height="1" style="border:0;" ></iframe>
<script src="/homestuff/froogaloop.min.js"></script>
<script src="/homestuff/vimeoapi-0905.js"></script>
</body>
</html> 
```

vimeo-0905.js 是我从游乐场复制的简单事件捕捉器。在没有 iframe 的情况下完美运行：

```
 (function(){

                // Listen for the ready event for any vimeo video players on the page
                var vimeoPlayers = document.querySelectorAll('iframe'),
                    player;

                for (var i = 0, length = vimeoPlayers.length; i < length; i++) {
                    player = vimeoPlayers[i];
                    $f(player).addEvent('ready', ready);
                }

                /**
                 * Utility function for adding an event. Handles the inconsistencies
                 * between the W3C method for adding events (addEventListener) and
                 * IE's (attachEvent).
                 */
                function addEvent(element, eventName, callback) {
                    if (element.addEventListener) {
                        element.addEventListener(eventName, callback, false);
                    }
                    else {
                        element.attachEvent(eventName, callback, false);
                    }
                }

                /**
                 * Called once a vimeo player is loaded and ready to receive
                 * commands. You can add events and make api calls only after this
                 * function has been called.
                 */
                function ready(player_id) {
                    console.debug('dsadsads');
                    // Keep a reference to Froogaloop for this player
                    var container = document.getElementById(player_id).parentNode.parentNode,
                        froogaloop = $f(player_id);
                        //apiConsole = container.querySelector('.console .output');

                    /**
                     * Sets up the actions for the buttons that will perform simple
                     * api calls to Froogaloop (play, pause, etc.). These api methods
                     * are actions performed on the player that take no parameters and
                     * return no values.
                     */
                    function setupSimpleButtons() {
                        var buttons = container.querySelector('div .simple'),
                            playBtn = buttons.querySelector('.play'),
                            pauseBtn = buttons.querySelector('.pause'),
                            unloadBtn = buttons.querySelector('.unload');

                        // Call play when play button clicked
//                        addEvent(playBtn, 'click', function() {
//                            froogaloop.api('play');
//                        }, false);

                        // Call pause when pause button clicked
                        addEvent(pauseBtn, 'click', function() {
                            froogaloop.api('pause');
                        }, false);

                        // Call unload when unload button clicked
//                        addEvent(unloadBtn, 'click', function() {
//                            froogaloop.api('unload');
//                        }, false);
                    }

                    /**
                     * Adds listeners for the events that are checked. Adding an event
                     * through Froogaloop requires the event name and the callback method
                     * that is called once the event fires.
                     */
                    function setupEventListeners() {

                        function onPause() {
                                froogaloop.addEvent('pause', function(data) {
//                                    if (data === 'player_2') $.fancybox.close();
//                                    alert(data);
                                });
                        }

                        function onFinish() {
                            if (1) {
                                froogaloop.addEvent('finish', function(data) {
//                                    if (data === 'player_2') $.fancybox.close();
//                                    console.debug('finished');
                                });
                            }
                            else {
                                froogaloop.removeEvent('finish');
                            }
                        }

                        function onPlayProgress() {
                            if (1) {
                                froogaloop.addEvent('playProgress', function(data) {
                                    console.debug(data);
                                });
                            }
                            else {
                                froogaloop.removeEvent('playProgress');
                            }
                        }

                        window.lastEventHouse = 0.10;
                        window.lastEventII = 0.1;
                        // Calls the change event if the option is checked
                        // (this makes sure the checked events get attached on page load as well as on changed)
                        onPause();
                        onFinish();
                        onPlayProgress();

                    }

                    /**
                     * Sets up actions for adding a new clip window to the page.
                     */
                    function setupAddClip() {
                        var button = container.querySelector('.addClip'),
                            newContainer;

                        addEvent(button, 'click', function(e) {
                            // Don't do anything if clicking on anything but the button (such as the input field)
                            if (e.target != this) {
                                return false;
                            }

                            // Gets the index of the current player by simply grabbing the number after the underscore
                            var currentIndex = parseInt(player_id.split('_')[1]),
                                clipId = button.querySelector('input').value;

                            newContainer = resetContainer(container.cloneNode(true), currentIndex+1, clipId);

                            container.parentNode.appendChild(newContainer);
                            $f(newContainer.querySelector('iframe')).addEvent('ready', ready);
                        });

                        /**
                         * Resets the duplicate container's information, clearing out anything
                         * that doesn't pertain to the new clip. It also sets the iframe to
                         * use the new clip's id as its url.
                         */
                        function resetContainer(element, index, clipId) {
                            var newHeading = element.querySelector('h2'),
                                newIframe = element.querySelector('iframe'),
                                newCheckBoxes = element.querySelectorAll('.listeners input[type="checkbox"]'),
                                newApiConsole = element.querySelector('.console .output'),
                                newAddBtn = element.querySelector('.addClip');

                            // Set the heading text
                            newHeading.innerText = 'Vimeo Player ' + index;

                            // Set the correct source of the new clip id
                            newIframe.src = 'http://player.vimeo.com/video/' + clipId + '?api=1&player_id=player_' + index;
                            newIframe.id = 'player_' + index;

                            // Reset all the checkboxes for listeners to be checked on
                            for (var i = 0, length = newCheckBoxes.length, checkbox; i < length; i++) {
                                checkbox = newCheckBoxes[i];
                                checkbox.setAttribute('checked', 'checked');
                            }

                            // Clear out the API console
                            newApiConsole.innerHTML = '';

                            // Update the clip ID of the add clip button
                            newAddBtn.querySelector('input').setAttribute('value', clipId);

                            return element;
                        }
                    }

                    setupEventListeners();

                }
            })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T07:36:20.260

我认为这部分`document.querySelectorAll('iframe')`是你的问题 - 你假装所有 iframe 都是 vimeo 的 api。尝试选择`player_2`它应该没问题。

# ios5 - 通过我自己的应用程序使用 ipad 发送短信

> ID：10510277
> 
> 赞同：1
> 
> 时间：2012-05-09T05:26:47.247
> 
> 标签：ios5, sms, ipad-3

我正在 ipad 上的 iOS 中构建一个记录约会的系统。安排约会后，需要将消息发送到安排时给定的号码。有没有办法可以通过 ipad 发送短信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:03:28.503

在 iOS 上留在应用程序中时无法发送 SMS。

您可以通过点击一个元素来允许用户发送短信，该元素会调出消息应用程序并允许您在那里发送短信，但不能在应用程序本身中发送。

但是，您可以使用自己的 Obc-C 解决方案（或用另一种语言，如 PHP 编写），通过消息网关发送消息。

一个例子是： http: [//net.tutsplus.com/tutorials/php/how-to-send-text-messages-with-php/](http://net.tutsplus.com/tutorials/php/how-to-send-text-messages-with-php/)

# javascript - 通过将href与javascript匹配来删除dom元素

> ID：10510279
> 
> 赞同：2
> 
> 时间：2012-05-09T05:27:02.333
> 
> 标签：javascript, dom

只有当 a href 完全匹配时，我才需要删除一些包含 img 的“a 标签”。这是需要删除的代码-

```
<a class="slideshow" href="?Action=thumbnail&Width=500&Height=500&algorithm=proportional" rel="lightbox[eventer]" onclick="myLightbox.start(this); return false;">
    <img src="?Action=thumbnail&Width=80&Height=80&algorithm=fill_proportional">
</a> 
```

所以如果href等于上面那个，'a tag'和'img'需要从dom中移除。

======编辑=======

我正在使用一个专有的 CMS，它会在标签内吐出`href`标签`src`，我实际上无法编辑围绕 url 的代码，这使得它有点棘手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T05:33:35.557

您可以使用适用于所有浏览器的这样的代码：

```
var links = document.getElementsByTagName("a"), item;
var urlBase = '?Action=thumbnail&Width=500&Height=500&algorithm=proportional';
var urlFull = window.location.href + urlBase;
for (var i = links.length - 1; i >= 0; i--) {
    item = links[i];
    if (item.href == urlFull || item.href == urlBase) {
        item.parentNode.removeChild(item);
    }
} 
```

注意：代码以相反的顺序遍历列表，因此当从 DOM 中删除项目并且活动节点列表发生更改时，它不会影响其余的遍历。

因为`item.href`通常会返回一个完全限定的 URL，而不是原始源 HTML 中的内容，所以我们针对完全限定匹配和我们在源 HTML 中所期望的内容对其进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T05:32:49.200

您可以使用[`querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)和[`removeChild()`](https://developer.mozilla.org/En/DOM/Node.removeChild)

```
var url = '?Action=thumbnail&Width=500&Height=500&algorithm=proportional',
    as = document.querySelectorAll('a[href="'+url+'"]'),
    i, node;

for(i=as.length;i--;){
    node = as[i];
    node.parentNode.removeChild(node);
} 
```

[支持 querySelectorAll](http://caniuse.com/#search=queryse)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T05:43:14.343

我喜欢约瑟夫的回答，但是如果您需要使用无法处理的浏览器，`querySelectorAll()`那么您可以使用以下内容：

```
var url = '?Action=thumbnail&Width=500&Height=500&algorithm=proportional',
    elems = document.getElementsByTagName( 'a' ),
    i = 0;
for ( ; i < elems.length; i++ ) {
    if ( elems[i].href && elems[i].href.indexOf( url ) !== -1 ) {
        elems[i].parentNode.removeChild( elems[i] );
    }
} 
```

# php - ajax 返回给我的是什么？（对php文件的ajax调用）

> ID：10510283
> 
> 赞同：0
> 
> 时间：2012-05-09T05:28:13.007
> 
> 标签：php, ajax

我对 ajax 几乎是全新的。这是一个 ajax 调用，我使用它使用名为“bridge.php”的 php 文档从 sql 数据库中检索信息。我似乎无法理解我从中得到了什么，如果有的话。它是一个数组吗？一个东西？我是不是因为在应该使用帖子时使用了 get 而没有得到任何回报？我试图取回的信息量不适合一次获取，但我通过电话发送的信息量小到足以容纳。

```
<script type="text/javascript">
    function refreshPro(namex){
        alert(namex);
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("port_work").innerHTML=xmlhttp.responseText;   //what is xmlhttp.responseText?
            }
        }
        xmlhttp.open("GET","../bridge.php?pro="+namex,true);
        xmlhttp.send();
    }
</script> 
```

现在对于 php(bridge.php)，它从 url 获取 get var 并查询数据库，我知道这部分本身可以正常工作......

```
<?php
$pro = $_GET["pro"];
$sql = "SELECT * FROM portfolio WHERE title LIKE \"%$pro%\"";

$result = mysql_query($sql);

while ($row = mysql_fetch_array($result)) {

?>

    <div id="portfolio_item">
        <h2><?php echo $row['title']; ?></h2>
        <img src="<?php echo $row['image_paths']; ?>" alt="<?php echo $row['title']; ?>" />
        <p id="portfolio_desc"><?php echo $row['description']; ?></p>
    </div>

<?php
}
?> 
```

是的，我已经完成了我的作业。我研究了另外两篇文章，但一篇开始谈论我一无所知的 JSON，另一篇似乎不太符合我的问题，但我仍然发现答案有点用。[从单独的文件返回 AJAX responseText](https://stackoverflow.com/questions/10279184/returning-ajax-responsetext-from-a-seperate-file)并且[Ajax 调用不从 php 文件返回数据](https://stackoverflow.com/questions/9805708/ajax-call-not-returning-data-from-php-file)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:39:23.547

您正在从服务器获取纯 HTML。responseText 变量是一个字符串，其中包含对 GET 请求的纯文本响应。

GET 请求与您在访问给定 URL 时通常执行的任何其他浏览器请求一样。`http://url/to/bridge.php?pro=<someValue>`因此，您可以通过使用您选择的浏览器访问来测试 bridge.php 脚本针对给定输入发送的内容。

您*返回的数据量无关紧要，使用 POST 或 GET 的 WRT 重要的是您要**输入*多少数据（GET 请求只能使用 255 个字符的数据，POST 在技术上是无限的）。

如果直接访问 bridge.php 脚本没有得到任何结果，这表明该脚本可能失败，导​​致 500 内部服务器错误代码。这不会被您的 javascript 代码捕获，因为您在对响应执行任何操作之前明确检查代码是否为 200（成功）。

我要补充：

```
 ... snip ...
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("port_work").innerHTML=xmlhttp.responseText;   
        }
        else 
        {
           alert('There was a ' + xmlhttp.status + ' error :(');
        }
    }
    ... snip ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:38:04.517

为此使用 jQuery 变得相当简单：

```
<script type="text/javascript" src="path/to/jquery.js">
<script type="text/javascript">
function refreshPro(namex)
{
    $.ajax({
      type: "GET",
      url: "../bridge.php",
      data: {
        pro: namex
      }
    }).done(function( msg )
    {
      $("#port_work").html(msg);
    });
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:45:34.540

首先只是从bridge.php 中回显0 或1 或任何该死的关键字'Hello world'。

编码

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
 alert(xmlhttp.responseText);
 } 
```

说如果一切顺利。IE 如果是 bridge.php 的路径，那么它将进入这个 if 条件。并会报警响应。

如果这可以完美运行，那么您的代码也可以正常工作。

另请参阅@ccKep 提到的答案。它很容易使用。

另外使用Mozilla firebug之类的工具。这样您就可以了解正在发生的事情。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T05:34:50.783

Ajax 在客户端而不是服务器上运行，因此您需要提供服务器的 url。这是行不通的：

```
xmlhttp.open("GET","../bridge.php?pro="+namex,true); 
```

可能有效的是：

```
xmlhttp.open("GET","http://yourhost.com/bridge.php?pro="+namex,true); 
```

# image - 您能帮我使用任意大小的字体，例如 Times New Roman、Tahoma

> ID：10510284
> 
> 赞同：1
> 
> 时间：2012-05-09T05:28:13.180
> 
> 标签：image, text, opencv, drawing, font-size

您能否告诉我使用 Times New Roman、Tahoma 等任意大小的字体，例如 10、11、15 等。我将绘制图像字符串并将其显示在窗口中。我正在使用 openCV

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:05:49.280

在 python 中使用带有内置字体的 opencv 如下所示：

```
import cv

image = cv.CreateImage((200,200), cv.IPL_DEPTH_8U, 1)
font = cv.InitFont(cv.CV_FONT_HERSHEY_SIMPLEX, 1, 1, shear=0, thickness=2, lineType=8)
cv.PutText(image, 'text', (65,100), font, (255,255,255))
cv.ShowImage("image with text", image)
cv.WaitKey(0) 
```

产生：

![在此处输入图像描述](../Images/dd1fe5872724d622eaaaf7242bfda7ec.png)

# webdriver - Selenium webdriver C# - 获取整页截图

> ID：10510285
> 
> 赞同：6
> 
> 时间：2012-05-09T05:28:13.290
> 
> 标签：webdriver, screenshot, selenium-webdriver

任何人都可以帮助我使用 Selenium webdriver 截取整页屏幕截图。我正在使用 c#/Nunit。我正在使用的当前方法不是完整的浏览器页面。

我正在使用下面的代码截取屏幕截图。

```
public void TakeScreenShot(IWebDriver webDriver,string testName,string className)
{          

string folderName = String.Format("{0}.{1}", className, testName);

// Create Screenshot folder
string createdFolderLocation = CreateFolder(folderName);

// Take the screenshot            
Screenshot ss = ((ITakesScreenshot)webDriver).GetScreenshot();            
string screenshot = ss.AsBase64EncodedString;
byte[] screenshotAsByteArray = ss.AsByteArray;

// Save the screenshot
ss.SaveAsFile((string.Format("{0}\\{1}",createdFolderLocation,testName + ".Jpeg")), System.Drawing.Imaging.ImageFormat.Jpeg);
ss.ToString();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-22T07:27:49.660

你可以使用这个包[https://www.nuget.org/packages/Noksa.WebDriver.ScreenshotsExtensions/](https://www.nuget.org/packages/Noksa.WebDriver.ScreenshotsExtensions/)

为了截取整个页面，使用 VerticalCombineDecorator：

```
var vcs = new VerticalCombineDecorator(new ScreenshotMaker());
var screen = _driver.TakeScreenshot(vcs); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T20:01:55.673

“整页”屏幕截图由 WebDriver 定义，包括浏览器中显示的整个页面，而不是浏览器镶边（URL 栏、工具栏、窗口大小调整句柄等）。如果您不关心在屏幕截图中获取完整的 DOM，则无需使用 WebDriver 来获取屏幕截图。您可以使用操作系统的 API 来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T00:57:57.053

在截屏之前尝试将浏览器窗口的大小更改为很大。我的尺寸比宽度小 10，比高度小 10。尝试加法而不是减法。

```
 driver = new FirefoxDriver(firefoxProfile);

    if (Config.MAXIMIZE_BROWSER_WINDOW)
    {
        driver.Manage().Window.Size = new System.Drawing.Size(System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Width - 10, System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height - 10);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-19T11:07:05.883

你可以试试这个

```
IWebDriver driver = new PhantomJSDriver();
driver.Navigate().GoToUrl("http://www.google.com");
((ITakesScreenshot)driver).GetScreenshot().SaveAsFile("image.png", ImageFormat.Png); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-01T16:25:42.107

Greetings from 2017))!

If the page size is larger than the screen size - you can use the PhantomJS driver ([PhantomJS download page](http://phantomjs.org/download.html))

```
var fileName = "test.png";
var size = new Size(800, 2000);
var url = "https://stackoverflow.com/";

using (var driver = new PhantomJSDriver())
{
    driver.Manage().Window.Size = size;
    driver.Navigate().GoToUrl(url);
    ((ITakesScreenshot)driver)
        .GetScreenshot()
        .SaveAsFile(fileName, ImageFormat.Png);

    driver.Close();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-04T06:59:10.900

我在我们的解决方案中使用了这个：

```
 public byte[] TakeScreenshot()
    {
      try
      {
        var getMaxSide = "return Math.max(document.body.scroll{0}, document.body.offset{0}, document.documentElement.client{0}, document.documentElement.scroll{0}, document.documentElement.offset{0})";
        var scrollHeight = (Driver as IJavaScriptExecutor).ExecuteScript(string.Format(getMaxSide, "Height"));
        var scrollWidth = (Driver as IJavaScriptExecutor).ExecuteScript(string.Format(getMaxSide, "Width"));
        Driver.Manage().Window.Size = new Size(int.Parse(scrollWidth.ToString()), int.Parse(scrollHeight.ToString()));
        return (Driver as ITakesScreenshot).GetScreenshot().AsByteArray;
      }
      catch
      {
        return Array.Empty<byte>();
      }
    } 
```

然后您可以使用结果将其附加到例如 Allure 或 NUnit 测试结果：

```
 private void AttachScreenshot()
    {
      var screenshot = _browser?.TakeScreenshot();
      if (screenshot.Length > 0)
      {
        // add screenshot to test results
        var path = DateTime.Now.Ticks.ToString() + ".png";
        File.WriteAllBytes(path, screenshot);
        TestContext.AddTestAttachment(path, "screenshot");

        // attach screenshot to Allure report
        AllureLifecycle.Instance.AddAttachment("screenshot", "image/png", screenshot);
      }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-01T21:17:24.520

试试这个，希望它对你有用。

```
public void TakeScreenshot(string SSName)
        {
            try
            {
                string path = "D:\\WorkSpace\\Screenshot\\";
                Screenshot ss = ((ITakesScreenshot)driver).GetScreenshot();
                ss.SaveAsFile((path + SSName), System.Drawing.Imaging.ImageFormat.Jpeg);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                throw;
            }
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-17T13:54:44.960

我记得 ((ITakesScreenshot)webDriver).GetScreenshot(); 获取整页截图，但如果您有一些 ajax 请求和其他加载元素，您可以添加滚动并在最后等待几秒钟，之后您将知道它获取了完整加载的页面截图。

```
 for (int second = 0;; second++)
        {
            if (second >= 4)
            {
                break;
            }

            ((IJavaScriptExecutor)Global.Driver).ExecuteScript("window.scrollBy(0,800)", string.Empty);
            Thread.Sleep(500);
        }

        Thread.Sleep(3000); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-12T07:18:47.943

根据@Michal Kalous 的回答，我创建了一个etension 课程。这也考虑了当前在寡妇中设置的字体大小和实际视口大小，并通过将 body.style.overflowY 设置为隐藏来移除垂直滚动条。

用法

```
RemoteWebDriver driver = new EdgeDriver();
driver.SetViewportSize(1200, 1200);

driver.Navigate().GoToUrl("https://www.bikereview.info/en/ktm-1290-super-duke-rr-innerhalb-von-48-minuten-ausverkauft.html");
Image tempImage = driver.TakeFullPageScreenshot();
tempImage.Save(@"c:\full.png", ImageFormat.Png);
driver.Close();
driver.Quit(); 
```

扩展类

```
using System;
using System.Drawing;
using System.IO;
using OpenQA.Selenium.Remote;
using System.Collections.ObjectModel;
using System.Runtime.InteropServices;
using OpenQA.Selenium;

namespace TestRenderHtmlToPng
{

    public static class RemoteWebDriverExtensions
    {

        public static Image TakeFullPageScreenshot(this RemoteWebDriver driver, int maxHeight = 10000)
        {

            //Screenshots depend on fontscaleing-property in windows
            double DpiScalingFactor = GetDpiScalingFactor();

            Bitmap fullPageScreenshot = null;
            using (var fullMs = new MemoryStream((driver.GetScreenshotOverflowHidden()).AsByteArray))
            {
                fullPageScreenshot = Image.FromStream(fullMs) as Bitmap;
            }
            var originalPageOffset = driver.GetPageOffset();

            var prevPageOffset = 0;
            var currentPageOffset = 0;
            var scrollLength = driver.GetWindowInnerHeight();

            while (fullPageScreenshot.Height < maxHeight)
            {
                prevPageOffset = driver.GetPageOffset().Y;

                driver.ScrollPageBy(0, scrollLength);
                System.Threading.Thread.Sleep(100);

                currentPageOffset = driver.GetPageOffset().Y;

                if (prevPageOffset == currentPageOffset)
                {
                    break;
                }
                var pageMovedBy = currentPageOffset - prevPageOffset;
                pageMovedBy = (int)(pageMovedBy * DpiScalingFactor);

                using (var ms = new MemoryStream(driver.GetScreenshotOverflowHidden().AsByteArray))
                {
                    Bitmap fullPageScreenshot1 = Image.FromStream(ms) as Bitmap;
                    using (var viewPortScreenshot = Image.FromStream(ms) as Bitmap)
                    {
                        var s = driver.Manage().Window.Size;

                        var croppedScreenshot = CropBitmapAtRect(viewPortScreenshot, new Rectangle(0, viewPortScreenshot.Height - pageMovedBy, viewPortScreenshot.Width, pageMovedBy));

                        var newFullPage = AppendBitmap(fullPageScreenshot, croppedScreenshot);

                        fullPageScreenshot.Dispose();
                        fullPageScreenshot = newFullPage;
                    }
                }
            }
            driver.ScrollPageTo(originalPageOffset.X, originalPageOffset.Y);
            return fullPageScreenshot;
        }

        private static Bitmap CropBitmapAtRect(Bitmap b, Rectangle r)
        {
            Bitmap nb = new Bitmap(r.Width, r.Height);
            using (Graphics g = Graphics.FromImage(nb))
            {
                g.DrawImage(b, -r.X, -r.Y);
                return nb;
            }
        }

        private static Bitmap AppendBitmap(Bitmap source, Bitmap target, int spacing = 0)
        {
            int w = Math.Max(source.Width, target.Width);
            int h = source.Height + target.Height + spacing;
            Bitmap bmp = new Bitmap(w, h);

            using (Graphics g = Graphics.FromImage(bmp))
            {
                g.DrawImage(source, 0, 0);
                g.DrawImage(target, 0, source.Height + spacing);
            }

            return bmp;
        }

        private static Screenshot GetScreenshotOverflowHidden(this RemoteWebDriver driver)
        {
            driver.ExecuteScript(@" document.body.style.overflowY = ""hidden"";");
            var s = driver.GetScreenshot();
            driver.ExecuteScript(@" document.body.style.overflowY = """";");
            return s;
        }

        private static void ScrollPageBy(this RemoteWebDriver driver, int x = 0, int y = 0)
        {
            driver.ExecuteScript(@"window.scroll(window.pageXOffset + arguments[0], window.pageYOffset + arguments[1]);", x, y);
        }
        private static void ScrollPageTo(this RemoteWebDriver driver, int x = 0, int y = 0)
        {
            driver.ExecuteScript(@"window.scroll(arguments[0], arguments[1]);", x, y);
        }

        public static void SetViewportSize(this RemoteWebDriver driver, int width, int height)
        {
            var jsGetPadding = @"return [ window.outerWidth - window.innerWidth,window.outerHeight - window.innerHeight ];";
            var paddingArray = driver.ExecuteScript(jsGetPadding) as ReadOnlyCollection<object>;
            driver.Manage().Window.Size = new Size(width + int.Parse(paddingArray[0].ToString()), height + int.Parse(paddingArray[1].ToString()));

        }

        private static Point GetPageOffset(this RemoteWebDriver driver)
        {
            var offsetArray = driver.ExecuteScript(@"return [window.pageXOffset, window.pageYOffset];") as ReadOnlyCollection<object>;
            var x = int.Parse(offsetArray[0].ToString());
            var y = int.Parse(offsetArray[1].ToString().Split(',')[0]);
            return new Point((int)x, (int)y);
        }
        private static int GetWindowInnerHeight(this RemoteWebDriver driver)
        {
            var Value = driver.ExecuteScript(@"return [window.innerHeight];") as ReadOnlyCollection<object>;
            return int.Parse(Value[0].ToString());

        }

        [DllImport("gdi32.dll")]
        private static extern int GetDeviceCaps(IntPtr hdc, int nIndex);
        public enum DeviceCap
        {
            VERTRES = 10,
            DESKTOPVERTRES = 117,

            // http://pinvoke.net/default.aspx/gdi32/GetDeviceCaps.html
            // https://stackoverflow.com/questions/5977445/how-to-get-windows-display-settings#answer-21450169
        }

        private static float GetDpiScalingFactor()
        {
            Graphics g = Graphics.FromHwnd(IntPtr.Zero);
            IntPtr desktop = g.GetHdc();
            int LogicalScreenHeight = GetDeviceCaps(desktop, (int)DeviceCap.VERTRES);
            int PhysicalScreenHeight = GetDeviceCaps(desktop, (int)DeviceCap.DESKTOPVERTRES);

            float ScreenScalingFactor = (float)PhysicalScreenHeight / (float)LogicalScreenHeight;

            return ScreenScalingFactor; // 1.25 = 125%
        }

    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-23T15:04:10.750

更改浏览器高度并不总是有效。这是我使用的解决方案。它滚动页面并组成整页屏幕截图。

```
public static Image TakeFullPageScreenshot(this RemoteWebDriver driver, int maxHeight = 10000)
    {
        Bitmap fullPageScreenshot = null;
        using (var fullMs = new MemoryStream((driver.GetScreenshot()).AsByteArray)) { 
            fullPageScreenshot = Image.FromStream(fullMs) as Bitmap;
        }
        var originalPageOffset = driver.GetPageOffset();

        var prevPageOffset = 0;
        var currentPageOffset = 0;
        var scrollLength = (int)(driver.Manage().Window.Size.Height / 1.5);
        while (fullPageScreenshot.Height < maxHeight)
        {
            prevPageOffset = driver.GetPageOffset().Y;

            driver.ScrollPageBy(0, scrollLength);
            System.Threading.Thread.Sleep(500);

            currentPageOffset = driver.GetPageOffset().Y;

            if (prevPageOffset == currentPageOffset)
            {
                break;
            }
            var pageMovedBy = currentPageOffset - prevPageOffset;
            using (var ms = new MemoryStream(driver.GetScreenshot().AsByteArray))
            {
                using (var viewPortScreenshot = Image.FromStream(ms) as Bitmap)
                {
                    var croppedScreenshot = CropBitmapAtRect(viewPortScreenshot, new Rectangle(0, viewPortScreenshot.Height - pageMovedBy, viewPortScreenshot.Width, pageMovedBy));
                    var newFullPage = AppendBitmap(fullPageScreenshot, croppedScreenshot);
                    fullPageScreenshot.Dispose();
                    fullPageScreenshot = newFullPage;
                }
            }
        }
        driver.ScrollPageTo(originalPageOffset.X, originalPageOffset.Y);
        return fullPageScreenshot;
    }

    public static Bitmap CropBitmapAtRect(Bitmap b, Rectangle r)
    {
        Bitmap nb = new Bitmap(r.Width, r.Height);
        using (Graphics g = Graphics.FromImage(nb))
        {
            g.DrawImage(b, -r.X, -r.Y);
            return nb;
        }
    }

    public static Bitmap AppendBitmap(Bitmap source, Bitmap target, int spacing = 0)
    {
        int w = Math.Max(source.Width, target.Width);
        int h = source.Height + target.Height + spacing;
        Bitmap bmp = new Bitmap(w, h);

        using (Graphics g = Graphics.FromImage(bmp))
        {
            g.DrawImage(source, 0, 0);
            g.DrawImage(target, 0, source.Height + spacing);
        }

        return bmp;
    }

    public static void ScrollPageBy(this RemoteWebDriver driver, int x = 0, int y = 0)
    {
        driver.ExecuteScript(@"window.scroll(window.pageXOffset + arguments[0], window.pageYOffset + arguments[1]);", x, y);
    }

    public static void ScrollPageTo(this RemoteWebDriver driver, int x = 0, int y = 0)
    {
        driver.ExecuteScript(@"window.scroll(arguments[0], arguments[1]);", x, y);
    }

    public static Point GetPageOffset(this RemoteWebDriver driver)
    {
        var offsetArray = driver.ExecuteScript(@"return [window.pageXOffset, window.pageYOffset];") as ReadOnlyCollection<object>;
        var x = (long)offsetArray[0];
        var y = (long)offsetArray[1];
        return new Point((int)x, (int)y);
    } 
```

# jsf-2 - 在选择布尔复选框上更改输入文本字段的颜色

> ID：10510286
> 
> 赞同：0
> 
> 时间：2012-05-09T05:28:25.690
> 
> 标签：jsf-2, primefaces

我有一个表单，其中有一个选择框和一个默认为红色的 inputtext 字段。

我想在选中该复选框时更改 inputtextfield 的颜色。

我怎样才能做到这一点？

我试图以这种方式实现，但无法改变颜色。

宝约：

```
private Boolean changeColor=false;
    private boolean sign1;

public void ChangeColorEvent(){
        System.out.println("inside color change event");

        changeColor=true;
        sign1=true;
        }

<h:outputText value="understood and Signed?: " />  
            <p:selectBooleanCheckbox  label="Yes" value="#{patient.sign1}" >
            <p:ajax update="hppa1" listener="#{patient.ChangeColorEvent}" /> 
            </p:selectBooleanCheckbox>
    <h:panelGroup>
    <p:inputText id="hppa" size="5" style="color:White;background:Red;" rendered="#{!patient.changeColor}" />
    <p:inputText id="hppa1" size="5" rendered="#{patient.changeColor}" style="color:White;background:Green;"/>
    </h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:14:42.547

您可以使用 Daniel 建议的方法。或者稍微不同的版本是这个

```
<p:inputText id="hppa1" size="5" style="#{patient.changeColor eq true ? 'color:White;background:Green;' : 'color:White;background:Red;'}"/> 
```

为您节省不必要的标记和处理！

更新：顺便说一句，如果您不需要`sign1`布尔标志的任何服务器端反射，您可以在 Javascript 中很好地处理这些事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:54:35.770

使用@Daniel 提到的**jQuery**的替代方法`styleClass`是这样的：在您的中定义样式类`css`：

```
.red {
    background-color: red;
}

.blue{
    background-color: blue;
} 
```

只有一个`p:inputText`（您在其中两个之间切换的方法确实是错误的）并添加一个`styleClass="red"`。

```
<p:inputText id="inputID" styleClass="red"/> 
```

然后定义这个函数：

```
<script type="text/javascript">
        function changeColor(param){
          if (jQuery("[id*="+param+"]").hasClass('red')){
              jQuery("[id*="+param+"]").removeClass('red');
              jQuery("[id*="+param+"]").addClass('blue');
          }
          else {
              jQuery("[id*="+param+"]").removeClass('blue');
              jQuery("[id*="+param+"]").addClass('red');

          }

        };
    </script> 
```

并将其用于`p:selectBooleanCheckbox`：

```
<p:selectBooleanCheckbox onchange="changeColor('inputID')"/> 
```

**注意 1：** `[id*="+param+"]`在 jQuery 中是因为 primefaces 添加`ids`到您的元素 ( `p:inputText`) 取决于包装它的内容（例如`form`，、、`dataTable`...）。有了`[id*="+param+"]`你基本上可以摆脱这些添加`ids`并找到你想要的`inputText`.

**注意 2：**如果您只想使用红色类，您可以使用：

```
function changeColor(param){
              jQuery("[id*="+param+"]".toggleClass('red'));       
            }; 
```

编辑：这种方法在您对@NikhilPatil 回答的评论中提到的初始阶段没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:07:40.350

开始将 id 添加到您的`<h:panelGroup id="myWrapper">`

并将其更改`p:ajax`为`<p:ajax update="myWrapper" ....`

您无法更新未呈现的元素...阅读此[类似问题](https://stackoverflow.com/a/10370268/617373)

或者，另一种解决方案（因为您使用的是primefaces）是将您更改`<h:panelGroup>`为`<p:outputPanel id="panel" autoUpdate="true">`并将其余部分保持原样

> 输出面板是一个具有多个用例的容器元素，此示例使用 autoUpdate outputPanel 来更新最初在页面上不存在并根据条件呈现的组件页面。

[输出面板](http://www.primefaces.org/showcase/ui/outputPanel.jsf)

但是您尝试更改颜色的方式是完全错误的...而不是隐藏和显示元素，您应该修改 ONE 元素的 css 属性...

像这样定义2个css类

```
.classOne{
    color:White;
    background:Red;
}

.classTwo{
    color:White;
    background:Green;
}

.classThree{
    color:White;
    background:Blue;
} 
```

并改变`styleClass=""`你的`<p:inputText id="hppa1"`

像这样

```
 <p:inputText id="hppa1" styleClass="#{patient.className}"..... 
```

添加`String changeColor`到您的 bean + getter/setter 并将其值从更改`classOne`为`classTwo`....

# html - 这是 -webkit-box-reflect 错误吗

> ID：10510290
> 
> 赞同：0
> 
> 时间：2012-05-09T05:28:51.450
> 
> 标签：html, css

当我使用反射-webkit-box-reflect 开发一个 div 图像框时，我发现底部的反射没有完全从图像的底部镜像。这取决于可用于反射的大小。

为了更好地说明问题：

[http://jsfiddle.net/mochatony/4B26Q/14/](http://jsfiddle.net/mochatony/4B26Q/14/)

两张图片有不同的反射，一张来自中间，一张来自图像底部，我希望反射来自底部。反射在某种程度上取决于可用的 html 高度，它的空间允许完整的阴影显示，它将反射底部的图像（您可以调整 html 面板的滑块来调整大小）。

无论可用空间如何，有没有办法从图像底部开始修复反射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:39:31.980

通过删除 box1 和 box2 中的宽度和高度来尝试相同的代码，如下所示：

```
#box1{
position:fixed;
margin-left:20%;
margin-top:0%;
-webkit-box-reflect: below;
} 
```

# android - 当前播放音乐的曲目信息

> ID：10510292
> 
> 赞同：34
> 
> 时间：2012-05-09T05:29:02.243
> 
> 标签：android

我正在实现一个与获取当前音乐曲目信息相关的应用程序。

我正在使用以下代码来获得它：

```
public class CurrentMusicTrackInfoActivity extends Activity {

    public static final String SERVICECMD = "com.android.music.musicservicecommand";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        IntentFilter iF = new IntentFilter();
        iF.addAction("com.android.music.metachanged");
        iF.addAction("com.android.music.playstatechanged");
        iF.addAction("com.android.music.playbackcomplete");
        iF.addAction("com.android.music.queuechanged");

        registerReceiver(mReceiver, iF);
    }

    private BroadcastReceiver mReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            String cmd = intent.getStringExtra("command");
            Log.v("tag ", action + " / " + cmd);
            String artist = intent.getStringExtra("artist");
            String album = intent.getStringExtra("album");
            String track = intent.getStringExtra("track");
            Log.v("tag", artist + ":" + album + ":" + track);
            Toast.makeText(CurrentMusicTrackInfoActivity.this, track, Toast.LENGTH_SHORT).show();
        }
    };

} 
```

它仅适用于某些手机。我想实现代码以获取所有 Android 设备（例如 HTC 和三星设备）中的当前音乐曲目信息。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-13T07:14:51.420

检查这是我的应用程序中使用的运行良好的

```
 iF.addAction("com.android.music.metachanged");

    iF.addAction("com.htc.music.metachanged");

    iF.addAction("fm.last.android.metachanged");
    iF.addAction("com.sec.android.app.music.metachanged");
    iF.addAction("com.nullsoft.winamp.metachanged");
    iF.addAction("com.amazon.mp3.metachanged");     
    iF.addAction("com.miui.player.metachanged");        
    iF.addAction("com.real.IMP.metachanged");
    iF.addAction("com.sonyericsson.music.metachanged");
    iF.addAction("com.rdio.android.metachanged");
    iF.addAction("com.samsung.sec.android.MusicPlayer.metachanged");
    iF.addAction("com.andrew.apollo.metachanged"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T17:41:16.320

这可能会有所帮助。我用它来获取我的一个应用程序中的音频文件的元数据：

```
String scheme = mAudioUri.getScheme();
String title = "";
String artist = "";
if(scheme.equals("content")) {
    String[] proj = {MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.ARTIST};
    Cursor cursor = this.getContentResolver().query(mAudioUri, proj, null, null, null);
    if(cursor != null && cursor.getCount() > 0) {
        cursor.moveToFirst();
        if(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE) != -1) {  
            title = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE));
            artist = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST));
        }
    }
} 
```

MediaStore.Audio.Media 类中有很多列，您可以使用它们来查找我认为的所需内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-25T22:44:39.777

Amazon MP3（Build 2.8.1）似乎在附加内容前加上 com.amazon.mp3 所以对于 com.amazon.mp3.metachanged 我使用了：

```
 String artist = "";
    String track = "";
    if (action.equals("com.amazon.mp3.metachanged")) {
        artist = intent.getStringExtra("com.amazon.mp3.artist");
        track = intent.getStringExtra("com.amazon.mp3.track");
    } else {
        artist = intent.getStringExtra("artist");
        track = intent.getStringExtra("track");

    } 
```

这对于检查额外名称很方便：

```
 Set<String> extrasList = intent.getExtras().keySet();

    for (String str : extrasList) {
        Log.d(TAG, str);
    } 
```

# windows - 使用什么逻辑生成应用程序挂起事件1002

> ID：10510296
> 
> 赞同：1
> 
> 时间：2012-05-09T05:29:18.657
> 
> 标签：windows, freeze

我想了解微软使用什么逻辑来识别应用程序是否已挂起，然后生成 eventid=1002，Source = Application hang。

此事件仅针对基于 UI 的应用程序生成还是也适用于 Windows 服务？

[http://www.microsoft.com/technet/support/ee/transform.aspx?ProdName=Windows+Operating+System&ProdVer=5.2&EvtID=1002&EvtSrc=Application+Hang&LCID=1033](http://www.microsoft.com/technet/support/ee/transform.aspx?ProdName=Windows+Operating+System&ProdVer=5.2&EvtID=1002&EvtSrc=Application+Hang&LCID=1033)

```
Event Information:
Product:    Windows Operating System
Event ID:   1002
Source: Application Hang
Version:    5.2
Symbolic Name:  ER_HANG_LOG
Message:    Hanging application %1, version %2, hang module %3, version %4, hang address 0x%5.

Explanation
The indicated program stopped responding. The message contains details on which program
and module stopped responding. A matching event with EventID 1001 might also appear in the
event log. This matching event displays information about the specific error that
occurred. 
```

# java - Java 线程池执行器监控

> ID：10510300
> 
> 赞同：8
> 
> 时间：2012-05-09T05:29:52.807
> 
> 标签：java, monitoring, threadpool

Java SE 6 文档中的 ThreadPoolExecutor 类具有以下[方法](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount%28%29)：

> `public int getActiveCount()`
> 
> 返回正在主动执行任务的线程的大致数量。

*这里的近似*和*主动执行*是什么意思？

是否有任何保证，如果在调用之前、期间和之后`getActiveCount()`

1.  *已从池中分配*N个线程用于任务执行，并且**
**   这*N*个线程中没有一个可用于进一步的任务分配，*

 *返回的整数`getActiveCount()`将恰好是*N*？

如果`getActiveCount()`不提供此保证，是否有任何其他方式可以更准确地获取此信息？

**之前的 SO 问题：**

我查看了[Thread Pool Executor Monitoring Requirement](https://stackoverflow.com/q/8198584/191776)和[How to tell if there is a available thread in a thread pool in java](https://stackoverflow.com/q/2657971/191776)，但他们没有回答我的查询。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T05:45:59.693

它是*近似*的原因是因为在计算过程中数字可能会发生变化；你是多线程的。在计算完成之前，现在可以有不同数量的线程处于活动状态（检查时处于非活动状态的线程现在处于活动状态）。

当您说“特定时间实例”时……这并不意味着什么。计算不是即时的。考虑到池的流体/动态性质，您得到的数字是最好的答案。

如果*碰巧*在池中没有线程更改状态时计算开始并完成，那么是的，该数字是“精确的”，但仅在池中的线​​程更改状态之前，这意味着它可能只是“精确”1ms（或更少）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:49:12.890

我认为您可能会通过引入 ThreadPoolExecutor 的实现中并不存在的“重新加入池”的概念来混淆事情。

每个工作线程都在不断地等待任务（它实际上位于阻塞队列的顶部）。每个任务进入其队列，该工作人员被“锁定”，然后运行任何任务前内务处理，然后运行实际任务，然后是任务后内务处理，然后工作人员被“解锁”。

activeCount() 为您提供处于“锁定”状态的线程数：请注意，这意味着它们实际上可能在调用 activeCount() 的精确时刻进行“内务处理”，但要算作“活动”，有必须是实际涉及的任务，或者即将执行、当前执行或刚刚执行。

这是否等同于你的“重新加入池”的概念我不确定——正如我所说，你似乎在发明一个概念，从 ThreadPoolExecutor 的角度来看，严格来说并不存在。*

# ios - 将 UIWebView 中的图像保存到 iOS 中的照片库中

> ID：10510303
> 
> 赞同：1
> 
> 时间：2012-05-09T05:30:22.767
> 
> 标签：ios, cocoa-touch

我想将 UIWebView 中的图像保存到 iOS 应用程序的照片库中。

我还阅读了 [http://stackoverflow.com/questions/6766671/how-to-saving-uiwebview-content-into-photo-library][1]

但我无法保存。我在保存方法中编写了以下代码。

```
- (IBAction)saveImage:(id)sender
{
    NSString *sizeOfImageByJs = [NSString stringWithFormat:@"document.body.scrollWidth;"
                                 "document.body.scrollHeight;"
                                 "window.innerWidth;"
                                 "window.innterHeight;"];

    NSString *urlToSave = [webViewOfPhoto stringByEvaluatingJavaScriptFromString:sizeOfImageByJs];

    NSURL *imageUrl = [NSURL URLWithString:urlToSave];
    NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
    UIImage *image = [UIImage imageWithData:imageData];

    UIImageWriteToSavedPhotosAlbum(image, self, nil, nil);
} 
```

它不保存任何东西。如何保存？谢谢。

# vb.net - 如何从 SQLite 表中获取值的总和？

> ID：10510308
> 
> 赞同：0
> 
> 时间：2012-05-09T05:30:49.030
> 
> 标签：vb.net, sqlite

我正在尝试收集出价并从列中分配平均值

我收到一个 InvalidCast Exception: Specified cast is not valid。在总和 +=

任何帮助将不胜感激

```
Dim sql As String = "SELECT " & Column & " FROM " & Table & " ;"
Dim dt As DataTable = SQLiteDatabase.GetDataTable(sql)
Column = Column.Replace("[", "")
Column = Column.Replace("]", "")
For Each row As DataRow In dt.Rows
    TotalSum += DirectCast(row(Column), Integer)
    Console.WriteLine("Calculating TotalSum {0}", TotalSum.ToString)
Next row 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-14T12:57:27.807

最终解决方案是这个

```
Dim suma As Double = 0.0R
For Each row As DataRow In dt.Rows
    Dim num As Double = 0R
    Double.TryParse(row(Column).ToString, num)
    suma += num
Next row 
```

在我的应用程序中，列可能包含 Stings，因为用户可以直接输入 SQL。我只使用 Double 类型，但整数是一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:41:40.207

检查这个

```
int suma = 0;

Dim dc as DataColumn = dt.Columns[0]  //Column to add
For Each row As DataRow In dt.Rows
          suma += int.Parse(row[dc]) 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:58:37.127

感谢您的好回复

我的修复是

```
 Try
        TotalSum += Convert.ToInt32(row(Column))
        Console.WriteLine("Calculating TotalSum {0}", TotalSum.ToString)
    Catch
    End Try 
```

尝试添加 Catch Block 以监视 vbNull。我只想要高于 0 的值

# android - 如何让 eclipse 手动连接到 Android 模拟器？

> ID：10510319
> 
> 赞同：4
> 
> 时间：2012-05-09T05:31:38.457
> 
> 标签：android, eclipse, android-emulator, emulation

很多时候 Eclipse 无法连接到我从 AVD 管理器打开的模拟器，只是自己启动了一个新的模拟器，（两个模拟器是相同的）:((。我怎样才能让 eclipse 找到模拟器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T05:35:42.970

有时重新启动 adb 可以解决您的问题

```
adb kill-server
adb start-server 
```

为了在 Windows 的命令行中更轻松地工作，请将 adb.exe 的路径添加到该 Windows 的路径中。例如将“;C:\Program Files\Android\android-sdk\platform-tools”添加到系统属性-> 高级-> 环境变量-> 系统变量-> 路径

设备连接出现问题的原因之一是 USB 电缆过长或键盘 USB 等两件式电缆。尝试通过短电缆将您的设备直接连接到 PC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:49:46.173

我想您可能会遇到手动启动的模拟器以某种方式断开连接的问题，并显示如下消息

`Error: emulator-5554 disconnected`

在 Eclipse 控制台视图中。stackoverflow 上有几个相关的问题和答案，例如[Why do I get a emulator-5554 disconnected message](https://stackoverflow.com/questions/2333273/why-do-i-get-a-emulator-5554-disconnected-message)，但对我来说，这些答案都没有帮助。

每当我看到断开连接的错误消息时，我都会关闭该模拟器并重新启动它。通常这已经“解决”了问题，它只适用于下一次尝试（对我来说）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-17T22:39:18.377

我也刚刚遇到这个问题。我同意 breceivemail，ADB 重置后重新连接到模拟设备，但有一个使用 Eclipse 的快捷方式：

在 DDMS 视图中 => 设备窗口 => 查看菜单（标题中的向下三角形）=> 重置 adb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:34:10.413

您可以通过更改运行配置手动选择目标设备。

运行 -> 运行配置 -> 选择您的应用程序 -> 目标选项卡 -> 选择“始终提示选择设备”

如果您的设备不可用，您至少不会启动新的模拟器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T08:06:58.403

如果模拟器仍然处于活动状态，您可以使用 adb 通过 tcp 连接到它。通过这种方式，您可以将断开连接的仿真器连接到开发系统的回送端口更高的一个端口，就像您使用 emulator-5554 时一样，您可以使用更高的端口连接到它。

```
adb connect localhost:5555 
```

这种技术存在一个问题，即仿真器控件变为非活动状态，并且开发人员无法向仿真器发送 GPS 坐标或 SMS 或调用。

有一种单击方法可以做到这一点

1.  打开记事本
2.  输入以下代码

    @echo 关闭

    亚行连接本地主机：5555

3.  将文件另存为 your_file_name.BAT

4.  将文件复制到 Android SDK/platform_tools
5.  创建一个快捷方式，给它一个自定义图标，在任何你喜欢的地方使用它

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-09T08:29:13.247

从 Eclipse 中打开 DDMS 视图，然后在“Emulator”选项卡中单击要连接的模拟器名称。

# bash - 如何使用 awk 从时钟命令（用于 crontab）切换小时和分钟的位置

> ID：10510323
> 
> 赞同：0
> 
> 时间：2012-05-09T05:32:01.213
> 
> 标签：bash, sorting, awk

我想使用一个命令来制作一个播放警报的 crontab（为我的妻子）。该程序称为 ipraytime，它会给出这样的输出。

```
$ ipraytime -u +2

Prayer schedule for,
City             : Custom
Latitude         : 021�� 25' 12" N
Longitude        : 039�� 49' 47" E
Angle Method     : Umm Al-Qurra University
TimeZone         : UTC+2.0
Qibla            : 061�� 45' 42" W of true North

     Date         Fajr    Shorooq   Zuhr     Asr    Maghrib   Isha 
--------------------------------------------------------------------
[09-05-2012]     4:19     5:43    12:16    15:35    18:48    20:18

Today's Imsaak    :   4:11
Tomorrow's Imsaak :   4:10
Tomorrow's Fajr   :   4:18 
```

我想要的是时间格式适合 crontab，这意味着我需要切换分钟和小时的位置。`19 4`取而代之。

我已发出此命令，但不知道如何进行该切换。

```
ipraytime -u +2| awk 'NR==12 {print $2"\n"$3"\n"$4"\n"$5"\n"$6"\n"$7}' | sed 's/:/ /g' 
```

这给了我这样的输出

```
4 19
5 43
12 16
15 35
18 48
20 18 
```

但我希望它是这样的

```
19 4
43 5
16 12
35 15
48 18
18 20 
```

因为这就是 crontab 正在使用的。我玩`sort`了一点，但也找不到解决方案。

（对不起，不好的话题..不知道如何为此写一个好的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:03:58.870

完全没有必要使用`sed`。

```
$ ipraytime -u +2 | awk -F ' +|:' 'NR == 12 {for (i = 2; i <= 12; i += 2) print $(i+1), $i}'
19 4
43 5
16 12
35 15
48 18
18 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:35:43.047

采用 `sed 's/\(.*\):\(.*\)/\2 \1/'`

命令：

```
ipraytime -u +2 | awk 'NR==12 {print $2"\n"$3"\n"$4"\n"$5"\n"$6"\n"$7}' 
 | sed 's/\(.*\):\(.*\)/\2 \1/' 
```

# hibernate - 使用 EHCache 在 Terracotta 配置中定位 Hibernate 会话工厂时出错

> ID：10510324
> 
> 赞同：0
> 
> 时间：2012-05-09T05:32:02.407
> 
> 标签：hibernate, ehcache

任何人都可以帮助我为什么应用程序服务器上会出现以下错误消息。我正在尝试使用 Terracotta 设置 EHCache。请提出任何线索，为什么会出现此消息。

```
[DEBUG][08/05/12 13:50:19.648][CacheByAmitNode8081] Running mbean initializer task for ehcache hibernate...
[DEBUG][08/05/12 13:50:19.766][CacheByAmitNode8081] Successfully registered bean
[ERROR][08/05/12 13:50:19.805][CacheByAmitNode8081] Error locating Hibernate Session Factory
java.lang.NullPointerException
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:36)
    at sun.reflect.UnsafeQualifiedObjectFieldAccessorImpl.get(UnsafeQualifiedObjectFieldAccessorImpl.java:20)
    at java.lang.reflect.Field.get(Field.java:358)
    at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.locateSessionFactory(ProviderMBeanRegistrationHelper.java:152)
    at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.run(ProviderMBeanRegistrationHelper.java:117)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
[DEBUG][08/05/12 13:50:19.815][CacheByAmitNode8081] SessionFactory is probably still being initialized... waiting for it to complete before enabling hibernate statistics monitoring via JMX 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:38:23.427

我今天遇到了同样的问题。这似乎是由第 152 行的 ProviderMBeanRegistrationHelper 类中的错误引起的

```
Map map = (Map) instancesField.get( null ); 
```

在第 146 和 147 行，我们有

```
Class factoryType = SessionFactoryRegistry.class;
Field instancesField = getField( factoryType, "sessionFactoryMap" ); 
```

所以我们知道 instanceField 是 SessionFactoryRegistry 类的实例中的一个字段，它恰好有一个可以从类中静态获取的实例

```
SessionFactoryRegistry.INSTANCE 
```

总之，我将第 152 行修改如下

```
Map map = (Map) instancesField.get( SessionFactoryRegistry.INSTANCE ); 
```

编译并替换了hibernate-ehcache jar文件中的类，异常消失了。我将就此提出问题。

# pthreads - 调用 pthread_cancel 后 pthread_Join 无法返回？

> ID：10510325
> 
> 赞同：1
> 
> 时间：2012-05-09T05:32:06.550
> 
> 标签：pthreads

我使用 Eclispse Indigo + CDT 8.0.2 + cygwin 开发了一个多线程系统，代码如下：

```
pthread_mutex_t mutexCmd = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t signalCmd = PTHREAD_COND_INITIALIZER;

void * Func(void * arg)
{
    int iStatus;
    while (1)
    {
        int a = 1;
        pthread_cleanup_push(pthread_mutex_unlock, &mutexCmd);
        pthread_mutex_lock(&mutexCmd);
        iStatus = pthread_cond_wait(&signalCmd, &mutexCmd);
        if (iStatus) {
                err_abort(iStatus, "signalCmd status error");
        }
        if(arg->Cmd != navi_Go) //Just a command tag;
        {
            pthread_mutex_unlock(&(pNaviCtrl->mutexCmd));
            continue;
        }
        //do some work
        //.....
        pthread_mutex_unlock(&mutexCmd);
        pthread_cleanup_pop(1);
    }
//pthread_detach(pthread_self());
return  NULL;
}

int main()
{
    int iStatus = 0;
    pthread = tid;
     iStatus = pthread_create(&tid;NULL, Func, NULL);
     if(iStatus)
    {
    err_abort(iStatus, "Start pthread error");
    }
    // do some work
    ...
    //Cancel thread
   void * retval;
   iStatus = pthread_cancel(tid) 
   iStatus = pthread_join(tid; &retval);
   if(iStatus){
        err_abort(iStatus,"Stop thread error");
    }
    return iStatus;
} 
```

程序运行的地方，它停在“iStatus = pthread_join(tid1; &retval);” 无法继续前进，我认为线程可能会死锁，但找不到原因。我想在调用 pthread_cancel() 之后，线程将退出并返回到 pthread_join()，谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:34:32.317

`pthread_cleanup_pop(1)`告诉 pthread 库不仅要从堆栈中弹出清理条目，还要执行它。因此该调用也将隐式调用：

```
pthread_mutex_unlock(&mutexCmd); 
```

由于您已经解锁了互斥锁，因此该调用具有未定义的行为（假设互斥锁类型为`PTHREAD_MUTEX_NORMAL`）。我想那个电话永远不会回来或其他什么。

请注意，您的代码在处理清理时还有其他问题 - 如果您执行`continue`for 循环，您将调用`pthread_cleanup_push()`第二次（或更多），这将添加另一个清理上下文。

可能还有其他问题（我不是很熟悉`pthread_cancel()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:57:12.293

不要将 cleanup_push 和 _pop 放在 while 循环中。不要多次打电话给他们。如果您查看它们，它们是将它们之间的代码包装在 { } 中的宏。他们设置了一个在您调用 pthread_cancel 时使用的 longjump。

# gwt - RequestFactory IllegalArgumentException:property

> ID：10510327
> 
> 赞同：0
> 
> 时间：2012-05-09T05:32:15.940
> 
> 标签：gwt, requestfactory

我从一个干净的请求创建一个代理，然后设置一些属性。它适用于其中一些人，但对于其他人，我得到一个`IllegalArgumentException`.

```
 MyRequest myRequest = myRequestProvider.get();
    MyProxy my = myRequest.create(MyProxy.class);
    my.setPaypal("xxx"); 
```

我进去`java.lang.IllegalArgumentException: paypal`了`com.google.web.bindery.event.shared.SimpleEventBus.doFire()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:25:37.347

我的代理类没有为该属性定义一个 getter `paypal`。通过添加吸气剂，异常消失了。希望能帮助到你。

# cakephp - 奇怪的方法 HtmlHelper::input 不存在

> ID：10510333
> 
> 赞同：-2
> 
> 时间：2012-05-09T05:32:34.177
> 
> 标签：cakephp

我不知道该怎么办我很困惑，因为我是 cakephp 世界的新手，有人可以帮助我吗？

这是 helper.php 第 179 行的代码

```
trigger_error(__d('cake_dev', 'Method %1$s::%2$s does not exist', get_class($this), $method), E_USER_WARNING); 
```

这是我的 add.ctp

```
 <h1>Add Inventory</h1>    
<form action="<?php echo $this->Html->url("/Stocks/add"); ?>" method="post">    

    <p>    
        ProductName:      
        <?php echo $this->Html->input('Stock/ProductName', array('size' => '40'))?>    
    </p>    
    <p>    
        Price:      
        <?php echo $this->Html->integers('Stock/Price', array('size' => '10'))?>    
    </p>    
<p>
   Quantity:
   <?php echo $this->Html->integers('Stock/Quantity', array('size' => '5'))?>
</p>
    <p>    
        <?php echo $this->Html->submit('Save') ?>    
    </p>    
</form> 
```

帮助 - ，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:38:13.547

```
$this->Html->input 
```

应该

```
$this->Form->input 
```

**因为它的 FormHelper 函数不是 HtmlHelper**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:37:29.243

是的，[HtmlHelper 没有`input`方法](http://api.cakephp.org/class/html-helper)。
看起来您正在寻找[FormHelper](http://api.cakephp.org/class/form-helper)。

# java - 在 Eclipse Virgo 中选择了 Sun JAX-WS 实现而不是 CXF

> ID：10510334
> 
> 赞同：1
> 
> 时间：2012-05-09T05:32:35.097
> 
> 标签：java, osgi, cxf, eclipse-virgo

我有非常明显的问题，但仍然没有找到解决方案。我有 OSGI 包，它使用 Apache CXF 作为客户端。问题是，然后我部署应用程序我收到此错误：

```
Constructor threw exception; nested exception is java.lang.ClassCastException: 
com.sun.xml.internal.ws.client.sei.SEIStub cannot be cast to 
org.apache.cxf.frontend.ClientProxy 
```

据我了解，发生此错误是因为在 Classpath 中加载了错误的 JAX-WS 实现。问题是：我如何确保加载了哪些 CXF 实现？

在 Apache Felix 中一切正常，我觉得这与 Virgo 默认加载比 Felix 更多的包有关。

我使用*cxf-2.6.0.jar*而不是*cfx-dosgi-ri*包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:02:24.027

通过将 apache servicemix jaxws-api 添加到 Virgo 存储库来解决此问题。然后我为我的包创建了计划，并在*cxf-2.6.0.jar*包之前启动了 jaxws-api。

# mysql - UNION附近的MySQL中的语法错误？

> ID：10510335
> 
> 赞同：6
> 
> 时间：2012-05-09T05:32:35.597
> 
> 标签：mysql, sql, syntax

```
SELECT * 
FROM Activity AA
WHERE AA.act_id IN 
((SELECT A.act_id 
  FROM Activity A 
  WHERE A.user_id = 'lhfcws')
 UNION
 (SELECT J.act_id 
  FROM Joinin J 
  WHERE J.user_id = 'lhfcws'))
ORDER BY AA.act_time 
```

> 错误消息：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在附近使用的正确语法`'UNION (SELECT J.act_id FROM Joinin J WHERE J.user_id = 'lhfcws')) ORDE' at line 7`

活动（act_id，user_id，act_name）
加入（act_id，user_id）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T05:57:17.170

您的错误的原因是 select 语句周围的括号。你应该把它写成：

```
SELECT * 
FROM Activity AA
WHERE AA.act_id IN 
(SELECT A.act_id 
  FROM Activity A 
  WHERE A.user_id = 'lhfcws'
 UNION
 SELECT J.act_id 
  FROM Joinin J 
  WHERE J.user_id = 'lhfcws')
ORDER BY AA.act_time 
```

但是请仔细阅读@Raphaël Althaus 改进查询的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:40:28.400

嗯，不要以为你需要这样的子查询

```
select * from Activity a
where a.user_id = 'lhfcws'
and exists (select null from Joinin j
where a.user_id = j.user_id); 
```

做同样的事情

也许你还需要一张支票

```
select * from Activity a
    where a.user_id = 'lhfcws'
    and exists (select null from Joinin j
    where a.user_id = j.user_id
    and a.act_id = j.act_id); 
```

根据@Jonathan Leffler 的（真实）评论

```
select * from Activity a
        where a.user_id = 'lhfcws'
        or exists (select null from Joinin j
        where j.user_id = 'lhfcws'
        and a.act_id = j.act_id); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-11T08:05:13.807

**在UNION**`ORDER BY`之前不要使用

# jquery - html div标签id

> ID：10510337
> 
> 赞同：0
> 
> 时间：2012-05-09T05:32:43.583
> 
> 标签：jquery, html

我的网页中有两个按钮。如果单击第一个按钮，Google 地图应该加载到一个 div 中。这可以通过在 div 中提供 Google 地图的 ID 来轻松完成，如下所示。

```
 <div id="map" /> 
```

现在我`<div>`在此之上还有另一个元素；如果单击第二个按钮，则此 div 应加载到与前一个相同的位置。我该怎么做呢？

```
<div id="table" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:56:57.200

尝试使用 jQuery 之类的

显示

```
 $('.target').show(); 
```

隐藏

```
$('.target').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:38:21.023

为此，您需要在第一次单击按钮时存储先前的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:30:53.587

您想将新内容加载到 DIV 中，还是只想在同一个地方显示内容？

如果要重新加载内容，则必须使用 AJAX 之类的东西来完成工作。如果你只想创建一个类似“标签”的效果，只需使用 CSS 的伪类元素。您可以在 CSS-Tricks.com 上找到有关这两个方面的更多信息

# python - 如何使用字符串变量中的列表名称

> ID：10510341
> 
> 赞同：2
> 
> 时间：2012-05-09T05:33:20.527
> 
> 标签：python, list, list-comprehension

我正在使用列表理解生成这两个列表。

```
lists = ['month_list', 'year_list']
for values in lists:
    print [<list comprehension computation>]

>>> ['2012', '2011', '2010', '2009', '2008', '2007', '2006', '2005', '2004', '2003']
>>> ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'] 
```

我想将这 2 个动态生成的列表附加到此列表名称中。
例如 ：

```
month_list = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']  
year_list = ['2012', '2011', '2010', '2009', '2008', '2007', '2006', '2005', '2004', '2003'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:35:50.520

在我看来，您应该使用引用而不是名称。

```
lists = [month_list, year_list] 
```

但是列表推导无论如何只能创建一个列表，因此您需要重新考虑您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:04:31.760

```
month_list = []
year_list = []
lists = [month_list, year_list]
dict = {0 : year_list, 1:month_list}

for i, values in enumerate(data[:2]):
    dict[i].append(<data>)

print 'month_list - ', month_list[0]
print 'year_list - ', year_list[0]

>>> month_list -  ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
>>> year_list -  ['2012', '2011', '2010', '2009', '2008', '2007', '2006', '2005', '2004', '2003'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T10:43:21.513

您可以将全局变量添加到模块的命名空间并使用此方法将值连接到它们：

```
globals()["month_list"] = [<list comprehension computation>] 
```

[阅读有关 Python 文档中命名空间的更多信息。](http://docs.python.org/release/1.5.1p1/ref/execframes.html)

或者您可以将这些列表存储在新字典中。

```
your_dictionary = {}
your_dictionary["month_list"] = [<list comprehension computation>] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T05:35:00.550

为什么首先使用字符串？

为什么不干...

```
lists = [month_list, year_list]
for list_items in lists:
    print repr(list_items) 
```

在你定义了这两个列表之后？

# c - C - char* 为空？

> ID：10510347
> 
> 赞同：1
> 
> 时间：2012-05-09T05:33:48.353
> 
> 标签：c

这可能很简单，但我不知道为什么我不能从这个 char* 中获取值。

这是我的问题：

```
static char* DIR_ENTRY_PATH = NULL; 
```

...

```
while (1) // infinite loop

    {

      // accept a client connection 

      clientFd = accept (serverFd, clientSockAddrPtr, &clientLen);

      if (fork() == 0) // Create child proc to get dir entry info 

        {

          //read dir entry info     
readInfo(clientFd);
printf("dpath: %s\n", DIR_ENTRY_PATH); //prints out the the correct value (DIR_ENTRY_PATH set in readInfo)
int test = 1;
      //get dir entry info and write back
      DIR *dir;
      struct dirent *entry; //pointer to dir entry
      struct stat stbuf; //contains file info

      if((dir = opendir(DIR_ENTRY_PATH)) == NULL){ //make sure entry is valid
        printf("error with dirent\n");
            exit(1);
      }
      else{
        printf("gathering directory entry info...\n");
        while((entry = readdir(dir)) != NULL){
            char *entryname = entry->d_name;
printf("path: %s\n", DIR_ENTRY_PATH); /*prints nothing out.. */ - PROBLEM IS HERE
printf("int: %d\n", test); //*prints 1 out.. */ 
```

...

读取信息（）：

```
//reads info from the client
void readInfo(int fdesc){
  int fd = fdesc;
  char str[200];

  readLine(fd, str); //read line in from socket
  DIR_ENTRY_PATH = str; 
  printf("received path: %s\n", DIR_ENTRY_PATH); //displays correct value
}
//reads a single line
int readLine(int fdesc, char *strng){
 int fd = fdesc;
 char *str = strng;
 int n;

 do{
   n = read(fd,str, 1); //read a single character
 }while(n > 0 && *str++ != 0);
 return (n>0); //return false if eoi
}//end readLine 
```

为什么我能得到 test int 的值而不是 dir_entry_path？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T05:37:15.640

您正在将指向局部变量的指针分配给全局变量，但是一旦函数返回，局部变量就消失了！

```
void readInfo(int fdesc){
  int fd = fdesc;
  char str[200];             // Local variable

  readLine(fd, str);
  DIR_ENTRY_PATH = str;      // Pointer assigned to global
  printf("received path: %s\n", DIR_ENTRY_PATH); //displays correct value
} 
```

函数返回后，局部变量未定义，其存储可被下一个函数重用等。

如何解决问题？有很多可能的方法，但最简单的可能是：

```
static char DIR_ENTRY_PATH[1024];

void readInfo(int fdesc){
  int fd = fdesc;
  char str[200];                  // Local variable

  readLine(fd, str);
  strcpy(DIR_ENTRY_PATH, str);    // Copy local string into global string

  printf("received path: %s\n", DIR_ENTRY_PATH); //displays correct value
} 
```

作为一个风格点，ALL_CAPS 通常表示一个宏或一个`enum`值（因为`enum`有点像`#define`使用 ALL_CAPS）。

我希望你有适当的界限检查`readLine()`。我对我的修改很懒惰，只是确保全局变量比局部变量长（五倍）。调成适合自己的。我还将使用 a`enum`作为缓冲区大小（和小写名称而不是`DIR_ENTRY_PATH`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:57:52.127

您可以根据您的意愿在调用 readInfo() 或函数 readInfo() 之前为全局指针 DIR_ENTRY_PATH 分配内存。

```
#define DIR_ENTRY_LEN 200

void readInfo(int fdesc){
....

// Add below code <br>
strncpy(DIR_ENTRY_PATH, str, DIR_ENTRY_LEN); 
```

# vb.net - 在 vb.net 的组框中添加复选框

> ID：10510348
> 
> 赞同：0
> 
> 时间：2012-05-09T05:33:48.603
> 
> 标签：vb.net

我有一个带有 12 个复选框的组框（包含一年中的月份）。我需要计算并在文本框中显示该值。

例如，如果选中一个复选框然后单击按钮计算，它应该能够在文本框中显示值 500，如果选中两个复选框，则总数应为 1000，如果三个复选框则总数应为 1500等等

我是这样开始的

```
 Dim counter As Integer = 0
    counter = counter + 500 
```

很长一段时间以来，我一直在为此烦恼:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:40:24.047

您可以使用 for 循环查看组框中的所有复选框

```
'Initialize the total value
Dim Total As Integer = 0

'Loop all controls in the group box
For Each ctrl As Control In GroupBox1.Controls

    'Only calculate if the control is a check box
    If TypeName(ctrl) = "CheckBox" Then

        'Validate if the checkbox is checked
        If CType(ctrl, CheckBox).Checked Then

            'Add 500 for each checked checkbox
            Total += 500
        End If

    End If

Next

TextBox1.Text = Total.ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:22:05.950

我想到了另外两个选择：

按照以下方式设置 .CheckedChanged 事件：

```
Private Sub Month_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles Ctrl1.CheckedChanged, Ctrl2.CheckedChanged, Ctrl3.CheckedChanged, ... etc.

if sender.checked then
    Total +=500
else
    Total-= 500
End if

end sub 
```

这样你就不需要计算按钮了。

我认为您也可以使用 CheckedListBox 并使用

```
Me.Ctrls.CheckedItems.Count * 500 
```

在计算按钮子或 SlectedIndexChanged 事件中但我没有尝试过

# jdbc - user_id 列中的 userid 值没有增加

> ID：10510350
> 
> 赞同：0
> 
> 时间：2012-05-09T05:34:10.660
> 
> 标签：jdbc

我在表中使用 user_id 列，并在每次注册新用户时将其递增 1。但是在U10之后，useId**没有增加**，并且在此之后每个新用户都有 userId U10。我正在使用 MySql，请建议如何解决这个问题，或任何其他方式来实现这一点。

下面是我生成**userId的代码**

```
 public int addUser(UserTO uto){
         int status=0;
         PreparedStatement ps1=null;
           PreparedStatement ps2=null;
            PreparedStatement ps3=null;
          Connection con=DBUtil.getMySqlConnection(); 
            String new_user_id=null;    
try{
     ps1=con.prepareStatement("select user_id from users order by user_id");   
    ResultSet rs1=ps1.executeQuery();   
    if(rs1.last()){
    int id=Integer.parseInt((rs1.getString(1).substring(1)));
    new_user_id="U"+(id+1);
          }
  else{

        new_user_id="U1";

    }
     uto.setUserid(new_user_id);

      ps3=con.prepareStatement("insert into users values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
     ps3.setString(1,uto.getUserid());
     ps3.setString(2,uto.getType());
     ps3.setString(3,uto.getUsername());
     ps3.setString(4,uto.getPassword());
     ps3.setString(5,uto.getFirstname());
     ps3.setString(6,uto.getMiddlename());
     ps3.setString(7,uto.getLastname());
     ps3.setString(8,uto.getPhone());
     ps3.setString(9,uto.getFax());
     ps3.setString(10,uto.getEmail());
     ps3.setString(11,uto.getJobtitle());
     ps3.setString(12,uto.getDepartment());
     ps3.setString(13,uto.getCompanyname());
     ps3.setString(14,uto.getLocation());
     ps3.setString(15,uto.getGender());
     ps3.setString(16,uto.getClientid());

     status=ps3.executeUpdate();         

   }catch(Exception e){
        e.printStackTrace();
   }finally{
         DBUtil.cleanup(ps1,con);
         DBUtil.cleanup(ps2,con);
         DBUtil.cleanup(ps3,con);
   }
return status; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:20:30.420

我认为这可能与您在这一行的字符串中添加一个整数有关，但我不确定，我对 java 不太了解：

```
new_user_id="U"+(id+1); 
```

但是，您可以跳过第一个查询并在随后的 INSERT 查询中生成 user_id，全部使用 SQL。就像是

```
INSERT INTO users VALUES(CONCAT("U", IFNULL(MAX((SELECT CAST(SUBSTRING(user_id, 2) AS UNSIGNED) FROM users)), 0) + 1), ?, ?, ?.... 
```

如果您这样做，您应该删除您为该查询绑定的第一个参数。

我不会问你为什么不使用 AUTO_INCREMENT 作为用户主 ID。

# mysql - Mysql 查询帮助 - 需要

> ID：10510351
> 
> 赞同：1
> 
> 时间：2012-05-09T05:34:15.940
> 
> 标签：mysql, database

表：taxonomy_term_data

```
tid   name
7     desert
10    indian 
```

表：taxonomy_index

```
nid   tid
13     7
10     7
10     10
12     7
14     10 
```

我需要一个 mysql 查询来获取具有“沙漠”和“印度”的 nid。这里的输出是nid = 10。有人可以帮助编写查询。我只是一个初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:38:09.367

```
SELECT nid
FROM  taxonomy_index
JOIN taxonomy_term_data USING (tid)
WHERE name IN ('desert', 'indian')
GROUP BY nid
HAVING COUNT(DISTINCT tid)  = 2 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/36ead/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:39:19.750

您可以通过 GROUP BY 和 HAVING 获得此答案：

```
SELECT nid
FROM taxonomy_index
WHERE tid IN (7, 10)
GROUP BY nid
HAVING COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T07:22:08.357

你可以用各种 SQL 写作风格来写它，如下所示：

1.

```
SELECT DISTINCT(i.nid)
FROM taxonomy_index i
INNER JOIN taxonomy_term_data d
ON i.tid = d.tid
AND (d.name = 'desert'
OR d.name = 'indian') 
```

2.

```
SELECT i.nid
FROM taxonomy_index i
INNER JOIN taxonomy_term_data d
ON i.tid = d.tid
AND (d.name = 'desert'
OR d.name = 'indian')
GROUP BY nid 
```

3.

```
SELECT i.nid
FROM taxonomy_index i, taxonomy_term_data d
WHERE i.tid = d.tid
AND d.name IN ('desert', 'indian')
GROUP BY nid 
```

4.

```
SELECT DISTINCT(nid)
FROM taxonomy_index
WHERE (tid = 7 
OR tid = 12) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:03:10.587

假设`(nid, tid)`组合是唯一的：

```
SELECT ta.nid
FROM taxonomy_index AS ta
  JOIN taxonomy_index AS tb
    ON tb.nid = ta.nid
WHERE ta.tid = 7
  AND tb.tid = 10 
```

# internet-explorer - IE浏览器中的按钮文本抖动

> ID：10510358
> 
> 赞同：0
> 
> 时间：2012-05-09T05:34:59.527
> 
> 标签：internet-explorer, button

我正在使用输入类型提交来形成帖子。当我单击 Firefox 中的提交按钮时，当我单击它时，按钮文本位置没有改变或晃动按钮看起来相同。

但是在 IE 浏览器中，当我单击按钮时，按钮文本一直在晃动。这是 IE 中的默认行为按钮还是我们可以解决这个问题？如果是，如何解决 IE 浏览器中的此按钮文本抖动问题？

谢谢，卡提克

# flash - 是 Actionscript 中这两次之间的时间

> ID：10510361
> 
> 赞同：0
> 
> 时间：2012-05-09T05:35:05.963
> 
> 标签：flash, actionscript

我希望能够在 Actionscript 3 中找出现在的时间/日期是否在星期一上午 10 点到下午 5 点之间。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:50:43.147

查看[Date](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html)类，我相信这有很多变体：

```
var now:Date = new Date();

if (now.day == 1 && now.hours >= 10 && now.hours <= 17)
{
    // it's a monday and you're probably at work (between 10am - 5pm)
} 
```

# jrules - 规则执行服务器安装

> ID：10510366
> 
> 赞同：0
> 
> 时间：2012-05-09T05:35:33.817
> 
> 标签：jrules

我是 JRules 的新手，我已经安装了 Ilog JRules studio core 7.1.1。这个 JRules Core 由两个模块组成。“规则工作室”和“规则执行服务器”。在安装时，似乎错过了“规则执行服务器”模块的安装。现在我需要“规则执行服务器”，但我没有 JRules Core 安装文件。有没有其他方法，我们可以在同一个安装文件夹中安装“规则执行服务器”？

提前致谢。

哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:45:27.850

正确，默认情况下 JRules 带有 Studio 和 RES。

RES 是您需要在 WAS 上部署的 WAR 文件。我认为默认情况下它只与凌乱的 WebSphere 一起提供，但您可以为 JBoss、WebLogic 等下载一些“捆绑包”。
程序 / Ilog Jrules / 文档 / 如何安装 RES - RTFM

可以使用 WebSphereCE，但这很糟糕。
它是默认提供的，您可以立即使用它，但您不想在现场甚至 POC 中使用它。
我们将这个伪 WAS 称为“Bernardo”，就像在 Zorro 中一样，因为它是无声的 :)

顺便说一句：您不需要 RES 来执行规则。特别是使用 JUnit，您可以导出规则应用程序或规则集（我不记得）并立即使用 POJO。
在 Studio 中创建一个名为“new java project for rules”的新项目，向导将创建您在本地执行规则所需的一切。
您只需要对 InputParameters 进行编码并检索 OutputParameters 即可进行断言。
EZ PZ 柠檬汁 :)

从那里您可以在“之前”JUnit 方法中加载 ruleapp，这有意义吗？
而是连接 RES 本身。

总而言之，如果我是你：
1/ 我会创建我提到的示例项目。所以我有代码示例。
2/我创建自己的规则应用程序（右键单击规则项目/导出/规则应用程序）并将其存储在某处。
3/ 准备我的 JUnit 类 - 断言 + “之前”方法
4/ 在没有 RES 的情况下在本地运行它
5/ 我很高兴作为拉里
6/ 现在我处理 RES 并配置它

希望它有帮助

# php - 使用 Drupal 7 难以运行对辅助数据库的附带调用

> ID：10510367
> 
> 赞同：0
> 
> 时间：2012-05-09T05:35:35.457
> 
> 标签：php, database, drupal, drupal-7, database-connection

我正在将数据从 OpenCart 迁移到 Drupal 7。我有专门为 Drupal 7 设置的主数据库。安装了 Drupal。我在同一台服务器上创建了一个辅助数据库，它是我将从中迁移的 OpenCart 数据库的副本。

我这样做是因为有很多重叠的表，老实说，我真的不想将这两个数据库合并在一起，因为我将在迁移产品和相关信息后立即转储 OpenCart 数据库。

无论如何，我发现即使 Drupal 7 很容易支持这一点，它似乎在您尝试在辅助数据库上执行任何查询的那一秒时就崩溃了。废话我的意思是“白屏死机”废话。如果我启用了开发模块的数据库查询日志记录，那么它会在 WSOD 上输出该信息的一些未格式化的行。

下面是我用来执行此操作的代码示例。如您所见，即使是一个简单的 select 语句也会完全炸毁。有谁知道为什么会发生这种情况？

我真的很想完成这项工作并使用 migrate 模块来完成。但是我即将举手，只是编写一个自定义脚本来连接到数据库并将所有数据输出为一个巨大的 XML 文件，然后希望 migrate 模块可以处理它（或将聚合数据导入临时在某些时候表）。

```
$query = Database::getConnection('opencart', 'opencart')->query("SELECT * FROM product");

if ($query != NULL) {
  $row = $query->execute()->fetchObject();
  echo "<pre>" . print_r($row, true) . "</pre>";
  echo "<pre>" . print_r($query, true) . "</pre>";
}
else {
  echo "Query is NULL.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:00:59.873

我以前这样做的方式是：

1- 编辑您的活动 settings.php 文件以将辅助数据库包含在您的 $databases 数组中。所以你会有类似的东西

```
$databases = array(
  'default'=> array(...),
  'secondary' => array(...),
); 
```

2-在您的代码中，使用`db_set_active('secondary');`You can then execute `db_query()`s 和可能的 s`db_select()`等。

3- 确保尽快将活动数据库切换回默认值。在切换回默认数据库之前，请注意您进行的函数调用。许多调用，如 t()，需要默认数据库，并且会取消它不活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:43:40.753

在同事的帮助下，我终于想通了。问题是几件事。首先，当我将 query() 函数链接到 Database::getConnection() 上时，我试图运行 execute() 函数。但是 query() 函数不支持这一点。相反，我只需要在 $query var 的末尾运行 fetchAssoc()。

当我尝试使用数据库提取层来执行这个复杂的查询时，由于某些函数返回的内容，我构建它是错误的。我一直尝试使用的 join 和 addExpression 函数只返回一个别名，即使它们修改了查询对象。我试图链接那些内联，但你不能。因此，通过在对象自己的非链接线上一次调用这些函数，我能够让它们工作。我仍然能够将我正在使用的字段和 groupby 链接在一起。

因此，为了让它与 migrate 模块一起工作，我刚刚切换回使用数据库抽象层并进行了我上面提到的更改。

感谢大家提出的所有有用的建议。

# android - 用固定纵横比surfaceview填充剩余空间

> ID：10510371
> 
> 赞同：10
> 
> 时间：2012-05-09T05:35:43.177
> 
> 标签：android

我想布局一个如下所示的视图，但我不知道如何去做：

*   屏幕底部是一个常规视图，具有固定大小（填充宽度和一些高度的 dp 数）
*   填充剩余的垂直空间，我想放置一个继承自 glSurfaceView 的自定义视图，其限制是它必须具有固定的纵横比，它将以编程方式设置，但在创建活动之前已知。（在这种情况下，假设它是 2:3 w:h）。

这是我想象的小图：

```
 .----------------------. 
 |   .--------------.   |  
 | b |              | b |  
 | g |              | g | 
 |   |              |   |  
 | i |  MySurface   | i | 
 | m |     View     | m | 
 | a |              | a | 
 | g |  (2:3 w:h)   | g | 
 | e |              | e | 
 |   *--------------*   | 
 |.--------------------.| 
 ||                    || 
 ||   SomeOtherView    || 
 ||                    || 
 |*--------------------*| 
 *----------------------* 
```

至于设置 MySurfaceView，我认为正常的 layout_width 和 layout_height 对我没有帮助，因为直到屏幕部分布局并`SomeOtherView`放置后我才知道可用的屏幕尺寸。

是否有一些`MySurfaceView`我想覆盖的功能，例如将作为参数传递可用的屏幕空间，让我决定如何设置视图的宽度和高度？

“通货膨胀”是我在这里寻找的正确术语吗？我认为这与我正在寻找的内容有关，但我并不真正了解术语。

[下面](https://stackoverflow.com/a/10522282/1236185)根据我的研究结果进行了更新，我认为可能是正确的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T18:49:28.410

做了更多的研究，我想我知道我需要做什么：

我想要覆盖的函数是`onMeasure(int widthSpec, int heightSpec)`，它由父级调用，并提供宽度和高度的建议（请参阅[View.MeasureSpec](http://developer.android.com/reference/android/view/View.MeasureSpec.html)）。我还设置了 xml 中`MySurfaceView`的 layout_width/height 。`wrap_content`然后当`onMeasure`被调用时，我可以计算可用的纵横比并根据需要设置视图的宽度和高度。

我为完成这项工作所做的第二件事是将我`MySurfaceView`的 FrameLayout 内部作为唯一的孩子。我最初`MySurfaceView`在一个带有`SomeOtherView`来自我的图像的 RelativeLayout 中。RelativeLayout 的问题在于，它不会以允许我修复纵横比的方式协商宽度/高度。

`onMeasure`在测量过程中被多次调用，RelativeLayout 的工作方式是它首先询问自定义视图的宽度而不告诉它可用的高度，然后返回并询问高度，而宽度被锁定为您指定的在第一遍 ( `MeasureSpec.EXACTLY`) 中。这使得无法生成特定比例的视图，因为您必须在知道可用高度之前确认宽度。

一旦进入 FrameLayout，我就没有这个问题，因为传递给的 MeasureSpecs`onMeasure`只具有限制`AT_MOST`。这意味着我可以在每次通过 onMeasure 期间自由更改宽度和高度，因此我最终可以在给定可用区域的情况下根据需要计算我的纵横比。

尚未确认这适用于所有情况，但希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:25:11.587

要设置 SurfaceView 的大小，您应该使用：

```
 // Set surfaceview size in px
private void setVideoSize(int width, int height) {
    LayoutParams params = (LayoutParams) mYourSurfaceView.getLayoutParams();
    params.height = height;
    params.width = width;
    mYourSurfaceView.setLayoutParams(params);
} 
```

如果你想知道屏幕的大小：

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
int width = display.getWidth(); 
int heigth = display.getHeight(); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-25T16:28:19.500

随着`ConstraintLayout`布局编辑器的引入，处理比率变得更加容易。

查看下面的 XML 片段：

```
<android.support.constraint.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="centerCrop"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:srcCompat="@drawable/bckg" />

    <FrameLayout
        android:id="@+id/mySurfaceView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#99000000"
        app:layout_constraintTop_toTopOf="@+id/imageView"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toTopOf="@+id/someOtherView"
        app:layout_constraintDimensionRatio="W,2:3" />

    <FrameLayout
        android:id="@+id/someOtherView"
        android:layout_width="0dp"
        android:layout_height="100dp"
        android:background="#AAFFFFFF"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toBottomOf="parent" />

</android.support.constraint.ConstraintLayout> 
```

这足以达到您要求的结果。请参阅下面的屏幕截图：

[![在此处输入图像描述](../Images/cd16ea2e10e24f0baf5f3675a0e485d2.png)](https://i.stack.imgur.com/tDQ7m.png)

[![在此处输入图像描述](../Images/1206377b7adc482428a2f2fbb74618ea.png)](https://i.stack.imgur.com/3kwDN.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:46:34.277

这将工作我已经测试过。

```
public class Test_stflowActivity extends Activity {
    SurfaceView sv = null;
    RelativeLayout rl = null;
    int current_width = 0;
    int current_height   = 0;
    boolean already_created = false;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        sv = (SurfaceView) findViewById(R.id.SurfaceView1);
        rl = (RelativeLayout) findViewById(R.id.relativeLayout3);
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                current_height = rl.getHeight();
                while (current_height == 0) {
                    current_height = rl.getHeight();
                }
                current_width  = rl.getWidth();
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        update_surface(current_height, current_width);
                    }
                });
            }
        });
        thread.start();
        already_created = false;
    }

    void update_surface(int current_height,int current_width) {
        if (already_created == false){

            // CALCULATE ASPECTED RATIO ACCORDING TO ABOVE HEIGHT AND WIDTH.
            int calculated_height = current_height/2;
            int calculated_width = current_width /2;
            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(calculated_height,
                                                                             calculated_width);
            lp.addRule(RelativeLayout.CENTER_IN_PARENT);
            sv.setLayoutParams(lp);
            sv.setVisibility(View.VISIBLE);
            already_created = true;
        }
        super.onResume();
    }
} 
```

这是我创建的布局。

```
<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="87dp"
        android:text="Button" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativeLayout3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/relativeLayout2"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >

    <android.view.SurfaceView
        android:id="@+id/SurfaceView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" android:layout_centerInParent="true" android:background="#ff0000" android:visibility="invisible"/>

</RelativeLayout> 
```

希望能帮助你解决。

# web-services - 如何使用 Web 服务 API 访问 SalesForce 用户配置文件？

> ID：10510373
> 
> 赞同：0
> 
> 时间：2012-05-09T05:35:48.090
> 
> 标签：web-services, salesforce

是否可以从 SalesForce WebService 读取用户列表或用户配置文件？我找不到任何允许从合作伙伴或企业 Web 服务 API 触摸用户集合的方法。binding.getUserInfo() 只允许我检索当前用户。但是所有用户呢？我的帐户允许我管理用户，我可以从 Web 用户界面查看它们。现在我需要从 Web 服务 API 中读取用户名等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:19:48.577

您可以对 User 和/或 Profile 对象使用 soql 查询，例如`select id,username from User`

# backup - 备份书签代码

> ID：10510381
> 
> 赞同：1
> 
> 时间：2012-05-09T05:36:43.957
> 
> 标签：backup, bookmarklet

嗨，如果我的主主机出现故障，我有书签代码可以从镜像备份位置加载脚本，它可以工作，但我想知道最好的方法，因为我知道我目前的做法可能不是最好的方法.

（**这是我的备用书签代码扩展的示例**）

```
javascript: (function () {
var scriptname = 'testscript';

function checkServerStatus() {
    var v = setTimeout(function () {
        loadscript('backupserver.hardiman.co.nz')
    }, 4500);
    var a = document.body.appendChild(document.createElement('img'));
    a.onload = function () {
        clearTimeout(v);
        loadscript('screepts.com')
    };
    a.src = 'http://screepts.com/ping.gif?' + Math.random();
}
checkServerStatus();

function loadscript(b) {
    var a = document.createElement('script');
    a.type = 'text/javascript';
    a.src = 'http://' + b + '/bm/' + scriptname + '.js?' + Math.random();
    document.getElementsByTagName('head')[0].appendChild(a)
}
})();` 
```

这是一个小书签：

```
<a href="javascript:%28function%28%29%7Bvar c%3D'testscript'%3Bfunction checkServerStatus%28%29%7Bvar v%3DsetTimeout%28function%28%29%7Bloadscript%28'backupserver.hardiman.co.nz'%29%7D,4500%29%3Bvar a%3Ddocument.body.appendChild%28document.createElement%28'img'%29%29%3Ba.onload%3Dfunction%28%29%7BclearTimeout%28v%29%3Bloadscript%28'screepts.com'%29%7D%3Ba.src%3D'http://screepts.com/ping.gif%3F'%2BMath.random%28%29%3B%7DcheckServerStatus%28%29%3Bfunction loadscript%28b%29%7Bvar a%3Ddocument.createElement%28'script'%29%3Ba.type%3D'text/javascript'%3Ba.src%3D'http://'%2Bb%2B'/bm/'%2Bc%2B'.js%3F'%2BMath.random%28%29%3Bdocument.getElementsByTagName%28'head'%29%5B0%5D.appendChild%28a%29%7D%7D%29%28%29%3B">Test Script</a> 
```

任何有关从备份服务器加载脚本的帮助或建议将不胜感激。

* * *

好的，对不起，我应该更具体地讨论这个问题。由于我的主机出现故障，我能够正确测试上述代码。我认为我唯一需要做的就是解析加载到脚本的服务器。

# python - 在 python(2.2.1) 中压缩文件夹及其内容

> ID：10510384
> 
> 赞同：0
> 
> 时间：2012-05-09T05:37:00.427
> 
> 标签：python, python-2.3

我有一个文件夹和文件夹内的一些文件。我需要压缩文件夹及其内容。例如：文件夹名称是“Help”，里面有大约 20 个文件。现在我需要将其设为“Help.zip”，其中包含 20 个文件。并且需要删除“帮助”文件夹。压缩后，只有 zip 文件夹应该可用。有人可以通过传递示例或链接来帮助我。因为我对 python 很陌生。

注意：我有一个非常旧的 Python 版本。它的 2.2.1 :(

# java - 如何使用预定义的 sqlite 数据库

> ID：10510393
> 
> 赞同：1
> 
> 时间：2012-05-09T05:37:55.713
> 
> 标签：java, android, database, sqlite

> **可能重复：**
> [如何使用我自己的 sqlite 数据库？](https://stackoverflow.com/questions/2387421/how-to-use-my-own-sqlite-database)
> [现有 SQLite 数据库的完整 Android 数据库助手类？](https://stackoverflow.com/questions/3548533/full-android-database-helper-class-for-existing-sqlite-database)

我是 android 新手，我已经使用 sqlite 数据库浏览器创建了数据库，现在我想在我的应用程序中使用这个数据库，那么执行此操作的步骤是什么，任何示例代码或任何帮助都将得到应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:44:29.693

按照[此博客中的说明进行操作](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

它将引导您完成将预先创建的数据库放入您的应用程序所需的所有步骤。

**编辑**

您在最初的帖子中没有提到您的数据库很大。在这种情况下，您可能想尝试[android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

我不知道它在哪里说，但我知道我已经看到 CommonsWare 的 Mark 评论说它会为你传输任何大小的文件。你压缩数据库，把它放在你的资产/数据库文件夹中，然后按照他们的指示编写你的数据库类，你应该很高兴。

# android - Android中的呼叫意图

> ID：10510395
> 
> 赞同：9
> 
> 时间：2012-05-09T05:37:58.837
> 
> 标签：android, android-intent, android-implicit-intent

怎么`call`按按钮制作？我将我的号码作为字符串从`EditText`. 这是我的示例代码：

```
String phone = editPhone.getText().toString();
btnPhone.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                call();
            }
        });
public void call() {
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse(phone));
        startActivity(callIntent);
    } catch (ActivityNotFoundException activityException) {
         Log.e("myphone dialer", "Call failed", e);
    }
} 
```

我将所有内容添加`permissions`到清单文件中。

但我得到`NullPointerexception`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-09T06:07:28.200

这种简单的方法应该适合您。

前任。

```
public class CallActivity extends Activity{
   String phone = "";

   onCreate()
   {
        btnPhone.setOnClickListener(new View.OnClickListener() { 
            @Override 
            public void onClick(View arg0) { 
                phone = editPhone.getText().toString(); 
                call(); 
            } 
        });    
   }

   public void call() {   
            Intent callIntent = new Intent(Intent.ACTION_CALL);          
            callIntent.setData(Uri.parse("tel:"+phone));          
            startActivity(callIntent);  
   }
} 
```

您可能正在使用`phone`超出范围的字符串变量。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T05:54:49.277

我认为您错过了 URI 中的“tel：”部分。

替换以下..

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse(phone));
        startActivity(callIntent); 
```

和

```
Intent callIntent = new Intent(Intent.ACTION_CALL,Uri.parse("tel:"+phone));
       startActivity(callIntent); 
```

或者

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:"+phone));
            startActivity(callIntent); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T06:11:54.367

请参阅下面的代码，它可能会对您有所帮助。

通话

```
EditText num = (EditText)findViewById(R.id.number_edit);
String uri = "tel:" + num.trim();
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

对于开放拨号器

```
Intent dial = new Intent();
dial.setAction("android.intent.action.DIAL");
dial.setData(Uri.parse("tel:"));
startActivity(dial); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-20T12:11:52.307

```
String PhoneNo="+923341234567"
Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + PhoneNo));
startActivity(intent); 
```

并在清单中添加权限

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T05:45:16.757

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse(phone));
startActivity(callIntent); 
```

以上是您在 android 中拨打电话号码的唯一方法，当您单击通话按钮时，会使用每个填充的电话号码启动“dilerpad”活动，如果您按下拨号键盘上的通话按钮，通话就会开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-22T09:42:15.320

```
Intent intent = new Intent(Intent.ACTION_CALL,Uri.parse("tel:" +"93");
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-22T10:32:14.813

试试这个

```
EditText num = (EditText)findViewById(R.id.phone_number);
String uri = "tel:" + num.trim();
Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse(uri));
startActivity(intent); 
```

# windows - 如何从另一个进程获取访问控制台缓冲区？附加控制台 ERROR_INVALID_PARAMETER

> ID：10510405
> 
> 赞同：1
> 
> 时间：2012-05-09T05:39:05.170
> 
> 标签：windows, delphi, winapi, console

我想访问另一个进程控制台的缓冲区（通过 AttachConsole），以调用 ReadConsoleOutput 等。

是一个 DOS 16 位应用程序。我不能使用管道，因为它不会连续写入输出（它模拟“windows”......如果你知道我的意思的话，就像 FAR 指挥官一样）。

所以我应该：

1) 启动应用程序 2) 获取进程 ID 3) 调用 AttachConsole(ProcId) 4) 调用 GetConsoleScreenBufferInfo 以获取大小 5) 调用 ReadConsoleOutput

问题出在 3：当我调用 AttachConsole 时，ir 返回 0，在调用 GetLastError 后它报告 ERROR_INVALID_PARAMETER 87 (0x57)。

AttachConsole 的唯一参数是 ProcessId，我用 ProcessExplorer 检查了它是正确的（它实际上是模拟应用程序的 ntvdm.exe 的 PID）。

德尔福代码：

```
function AttachConsole(dwProcessId: DWORD): Cardinal; external kernel32 name 'AttachConsole';

var
  Handle: HWND;

function EnumWindowsProc(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
var
  s: string;
  IsVisible, IsOwned, IsAppWindow: Boolean;
begin
  Result := True;//carry on enumerating

  IsVisible := IsWindowVisible(hwnd);
  if not IsVisible then
    exit;

  IsOwned := GetWindow(hwnd, GW_OWNER)<>0;
  if IsOwned then
    exit;

  IsAppWindow := GetWindowLongPtr(hwnd, GWL_STYLE) and WS_EX_APPWINDOW<>0;
  if not IsAppWindow then
    exit;

  SetLength(s, GetWindowTextLength(hwnd));
  GetWindowText(hwnd, PChar(s), Length(s)+1);
  if AnsiContainsText(s, '????.EXE') then // set windows name to search
    Handle := hwnd;
end;

procedure Test(Strings: TStrings);
var
  ProcessID: Cardinal;
begin
  Handle := 0;
  EnumWindows(@EnumWindowsProc, 0);
  Strings.Add('Handle: ' + IntToStr(Handle));
  if Handle <> 0 then
    SetForegroundWindow(Handle);
  Sleep(100);

  GetWindowThreadProcessId(Handle, @ProcessID);
  Strings.Add('ProcessId: ' + IntToStr(ProcessID));

  if AttachConsole(ProcessId) <> 0 then
    Strings.Add('Ok Attached')
  else
    Strings.Add('Error: ' + IntToStr(GetLastError));
end; 
```

在表单中放置备忘录和按钮。在 OnClick 调用 Test(Memo1.Lines)。

===== 编辑完整的解决方案 =====

```
function AttachAndGetConsoleHandle(ProcessId: Cardinal): Cardinal;
begin
  if not AttachConsole(ProcessId) then
    raise Exception.Create('AttachConsole error: ' + IntToStr(GetLastError));

  Result := GetStdHandle(STD_OUTPUT_HANDLE);

  if Result = INVALID_HANDLE_VALUE then
    raise Exception.Create('GetStdHandle(STD_OUTPUT_HANDLE) error: ' + IntToStr(GetLastError));
end;

procedure DettachConsole;
begin
  if not FreeConsole then
    raise Exception.Create('FreeConsole error: ' + IntToStr(GetLastError));
end;

function ReadConsole(ConsoleHandle: Cardinal): TStringList;
var
  BufferInfo: _CONSOLE_SCREEN_BUFFER_INFO;
  BufferSize, BufferCoord: _COORD;
  ReadRegion: _SMALL_RECT;
  Buffer: Array of _CHAR_INFO;
  I, J: Integer;
  Line: AnsiString;
begin
  Result := TStringList.Create;

  ZeroMemory(@BufferInfo, SizeOf(BufferInfo));
  if not GetConsoleScreenBufferInfo(ConsoleHandle, BufferInfo) then
    raise Exception.Create('GetConsoleScreenBufferInfo error: ' + IntToStr(GetLastError));

  SetLength(Buffer, BufferInfo.dwSize.X * BufferInfo.dwSize.Y);

  BufferSize.X := BufferInfo.dwSize.X;
  BufferSize.Y := BufferInfo.dwSize.Y;
  BufferCoord.X := 0;
  BufferCoord.Y := 0;
  ReadRegion.Left := 0;
  ReadRegion.Top := 0;
  ReadRegion.Right := BufferInfo.dwSize.X;
  ReadRegion.Bottom := BufferInfo.dwSize.Y;

  if ReadConsoleOutput(ConsoleHandle, Pointer(Buffer), BufferSize, BufferCoord, ReadRegion) then
  begin
    for I := 0 to BufferInfo.dwSize.Y - 1 do
    begin
      Line := '';
      for J := 0 to BufferInfo.dwSize.X - 1 do
        Line := Line + Buffer[I * BufferInfo.dwSize.X + J].AsciiChar;
      Result.Add(Line)
    end
  end
  else
    raise Exception.Create('ReadConsoleOutput error: ' + IntToStr(GetLastError));
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:55:20.877

定义应该是：

```
function AttachConsole(dwProcessId: DWORD): BOOL; stdcall; external
kernel32 name 'AttachConsole'; 
```

所以它后面的代码应该是：

```
if AttachConsole(ProcessId) then 
```

不能再帮你了。

# python - 使用 Python 检索 Outlook 数据

> ID：10510409
> 
> 赞同：0
> 
> 时间：2012-05-09T05:39:28.007
> 
> 标签：python, macos, email, outlook, reporting

我是一家初创公司的一员，负责管理公司的客户查询。目前我在 Mac 上使用 MSFT Outlook 来发送和接收邮件，至少在我们获得合适的票务工具之前是这样。

我的问题是我经常错过跟进客户的邮件。此外，整个报告方面是一场噩梦，到处都是多个 Excel 表格。

由于所有数据都存在于我的 Outlook 中（即发送的邮件、收到的回复、对话等），我想知道我是否可以从 Outlook 本身检索数据并设置报告。我一直在学习一点 Python 一直在寻找将 Python 连接到 Outlook 的方法。

我在这里遇到了 Python + COM 位：http: [//www.boddie.org.uk/python/COM.html](http://www.boddie.org.uk/python/COM.html) 但这是专门针对 Windows 机器的。

Mac 的替代品是什么？

非常感谢，

玩弄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:55:46.620

对于电子邮件格式和附加文件：

```
import email 
```

发送：

```
import smtplib 
```

用于接收：

```
import poplib # or
import imaplib 
```

所有模块都与 python 一起交付。

您将需要连接到邮件服务器并通过 google 找到完善的文档。

# java - 进入类实例化时，Eclipse 调试器转到本机代码

> ID：10510410
> 
> 赞同：9
> 
> 时间：2012-05-09T05:39:31.263
> 
> 标签：java, eclipse, debugging

我最近升级到 helios，现在每次我进入一个类的构造函数（例如`Cat myCat = new Cat();`）时，eclipse 调试器都会将堆栈显示为

![java堆栈跟踪进入实例化](../Images/193beb74263950d080e9b872d772fb6e.png)：

要获得实际的构造函数代码，我必须跳出几次，这很烦人。每个班级都会发生这种情况，尽管有堆栈，但我从未在控制台中看到任何错误消息。我该如何解决这个问题，以便它直接进入我的类的构造函数？

这只会在第一次使用该类时发生，甚至对于与当前类位于同一 src 文件中的类也是如此。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T23:02:56.940

Eclipse 在 Java 调试器首选项中有一个步骤过滤器首选项。它的默认首选项过滤掉了`java.lang.ClassLoader`，但这不起作用。这可能与最近安装并切换到使用 jre7 有关。为了解决我的问题，我添加了一个过滤器来单步执行`java.lang`包中的任何代码。

![在此处输入图像描述](../Images/221e563c6c83b4806d7a230164b7c210.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T06:03:26.513

我认为 ClassNotFoundException 只是作为类加载的一部分发生-问题是您设置了断点以在引发这些异常时触发。我的猜测是你的 Eclipse 版本默认开启了这个断点，而旧版本没有。

查看[此链接](http://www.popcornfarmer.com/gamedev/2009/01/eclipse-debug-error/)，它报告了类似的问题并提供了解决方案，即禁用该断点。

（为了教鱼等等，谷歌搜索词是“eclipse debugger launcher$appclassloader”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:51:32.587

从 Eclipse 中报告的堆栈跟踪来看，似乎 a`ClassNotFoundException`已初始化并被抛出，您编写的应用程序是否遇到任何问题？

你有没有在类的构造函数中设置断点？您根本无法进入构造函数？

您是使用`Class.forname()`还是导入来向 JRE 介绍该类？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T14:47:32.867

似乎对于我的学生使用运行 openjdk 的实验室机器，解决方案是在[https://stackoverflow.com/a/10525351/1449799](https://stackoverflow.com/a/10525351/1449799)中提到的相同首选项中添加一个步骤过滤器，但添加`jdk.*`

# .net - Windows 服务中的 WCF 托管问题

> ID：10510411
> 
> 赞同：2
> 
> 时间：2012-05-09T05:39:34.807
> 
> 标签：.net, wcf, rest

我创建了一个 REST WCF 服务。

首先我在控制台应用程序中托管，它工作正常。

然后我将它托管在 Windows 服务中。它抛出各种错误

以下是配置

```
<system.serviceModel>
<diagnostics>
  <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true" />
</diagnostics>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceMetadataBehavior">
      <serviceMetadata />
    </behavior>
    <behavior name="restServiceMetaBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>

  </serviceBehaviors>

  <endpointBehaviors>
    <behavior name="jsonEndpointBehavior">
      <enableWebScript />
    </behavior>
    <behavior name="wsHttpBinding" />
  </endpointBehaviors>
</behaviors>

<services>

<service behaviorConfiguration="restServiceMetaBehavior" name="StockPriceNotifierServiceImpl.StockNotifierServiceImpl">
<!--SOAP endpoint-->
  <endpoint address="net.tcp://localhost:8082/StockPriceService"
      binding="netTcpBinding" bindingConfiguration="" contract="StockPriceNotifierService.IStockNotifierService" />
  <endpoint address="net.tcp://localhost:8082/StockPriceService/mex" binding="mexTcpBinding" bindingConfiguration=""  contract="IMetadataExchange"/>

  <!--rest endpoint-->

  <endpoint address="http://localhost:8084/StockNotifierService"
      binding="webHttpBinding"  name="webhttp"
      contract="StockPriceNotifierService.IStockNotifierRestService" />
    <endpoint address="http://localhost:8084/StockNotifierService/mex"
     binding="mexHttpBinding" name="MexWebHttp" contract="IMetadataExchange" />
  </service>
</services> 
```

我试图排除故障，但没有成功。

以下是迄今为止采取的步骤

1.  初始错误->ServiceMetadataBehavior的HttpGetEnabled属性设置为true，HttpGetUrl属性是相对地址，但是没有http基地址。提供 http 基地址或将 HttpGetUrl 设置为绝对地址。分辨率 -> [http://social.msdn.microsoft.com/Forums/pl/wcf/thread/2fd858cb-8988-444f-868c-2ceea9cc9705](http://social.msdn.microsoft.com/Forums/pl/wcf/thread/2fd858cb-8988-444f-868c-2ceea9cc9705)，指定 HttpGetUrl

2.  AddressFilter 不匹配错误 -> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有“http://localhost:8084/StockService/MSFT/Price”的消息。检查发送方和接收方的 EndpointAddresses 是否一致。分辨率 -> 添加行为 ->[ServiceBehavior(AddressFilterMode=AddressFilterMode.Any)]

3.  现在 ContractFilter 不匹配异常 -> System.ServiceModel.FaultException：由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action '' 的消息。

好像我缺少一些基础知识，但到目前为止还没有任何线索。

合同

```
 [ServiceContract] //REST
  public interface IStockNotifierRestService
  {
    [OperationContract]
    [WebGet(UriTemplate = Routing.GetCurrentPriceRoute,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        RequestFormat = WebMessageFormat.Xml,
        ResponseFormat = WebMessageFormat.Json
        )]
    double GetCurrentPrice(string symbol);

 [ServiceContract]  //SOAP
 public interface IStockNotifierService:IStockNotifierRestService
  {
    [OperationContract]
    double GetPrice(String symbolname, DateTime timestamp);
  } 
```

执行

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant, 
        InstanceContextMode= InstanceContextMode.Single, AddressFilterMode=AddressFilterMode.Any)]

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class StockNotifierServiceImpl:IStockNotifierService
    {

        public double GetPrice(string symbolname, DateTime timestamp)
        {
            return 12.0;
        }

        public double GetCurrentPrice(string symbolname)
        {
            return 13.0;
        }
   } 
```

# image - 将 base64 字节数组转换为图像

> ID：10510416
> 
> 赞同：9
> 
> 时间：2012-05-09T05:40:23.690
> 
> 标签：image, jsp, base64

我有一个带有属性 id、desc 和 imageByteArray 的表单 bean。Struts 动作被执行，它重定向到一个 JSP，我想在其中访问这些 bean 属性，如 id、desc 并转换 imageByteArray 并将其显示为图像。我试过这篇[文章](https://stackoverflow.com/questions/943729/how-to-display-an-image-which-is-in-bytes-to-jsp-page-using-html-tags)，但这对我不起作用。

我使用 Base64 对字节数组进行编码 - 其中 this.bean.imageByteArray 指的是表单 bean

```
this.bean.setImageByteArray(new org.apache.commons.codec.binary.Base64().encode(imageInByteArr)); 
```

我试过这个，但没有工作

```
<img src="data:image/jpg;base64,<c:out value='${bean.imageByteArray}'/>" /> 
```

字节数组 (byte[] imageByteArray) 是指 base64 编码的 JPG 图像，我得到以下 img 标签作为输出，显然没有显示任何内容，

```
<img src="data:image/jpg;base64,[B@2e200e"> 
```

知道如何转换 base64 字节数组并在 JSP 中显示为图像吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T06:08:03.070

你得到的只是一个数组的 toString 输出。但是，您需要将字节数组转换为字符串。

您应该在 bean 中创建一个方法

```
 public String getByteArrayString()
{
   return new String(this.imageByteArray);
} 
```

并在您的 JSP 中引用它。

虽然从技术上讲，您应该为 base64 字节数组定义使用哪种编码，这不是必需的，因为所有字符都在标准的 7 位 ASCII 范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-06T07:16:40.400

DoubleMalt 的回答（在撰写本文时已被接受）是不幸的，因为它有点用两个错误来纠正。Apache Commons Codec 让做错事变得如此容易并没有帮助:(

Base64 基本上是从二进制数据到文本的编码 - 因此，它几乎总是应该用于将 a 转换`byte[]`为 a `String`。您的问题是您正在将 a 转换`byte[]`为另一个`byte[]`- 但您稍后想将该数据用作字符串。*以正确的方式转换一次*会更好。

现在您可以准确选择何时转换为 base64（和字符串）。您可以在 Java 代码中尽早完成，在这种情况下我会使用：

```
// Obviously you'd need to introduce a new method for this, replacing
// setImageByteArray
this.bean.setImageBase64(new Base64().encodeToString(imageInByteArr)); 
```

```
<img src="data:image/jpg;base64,<c:out value='${bean.imageBase64}'/>" /> 
```

或者，您可以只在 bean 中保留二进制数据，并在 JSP 中执行编码。我已经很久没有编写任何 JSP 了，所以我不打算在这里尝试为此编写代码。

但基本上，您需要决定您的 bean 是应该将原始二进制数据保留为`byte[]`，还是将 base64 编码的数据保留为`String`. 其他任何事情都是误导性的，IMO。

# sql-server-2008 - 从另一张桌子上获取年份

> ID：10510422
> 
> 赞同：1
> 
> 时间：2012-05-09T05:41:04.327
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一个名为“SALARY ON”的字段，其中输入的数据（年月）格式为“2012-01”（数据类型 varchar），位于名为 Table1 的表中。为了创建一个 sp，我只需要从上述表字段中获取 2012 . 我怎样才能做到这一点。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:49:30.983

在最简单的情况下，“SUBSTRING”和“CAST”将为您完成：

```
SELECT CAST(SUBSTRING([SALARY ON], 1, 4) AS INT) FROM SALARY 
```

这取决于日期是以 YYYY-MM 格式输入的事实。如果您在约束中检查这一点，那么上面的示例就可以了。否则，您需要在尝试转换之前进行一些模式检查：

```
SELECT CASE WHEN [SALARY ON] LIKE '[0-9][0-9][0-9][0-9]-[0-9][0-9]' THEN SUBSTRING([SALARY ON], 1, 4) AS INT) ELSE -1 END 
```

然后，您可以将所有年份返回为 -1 并向用户提出错误，将它们过滤掉，将它们写入日志文件等，具体取决于调用 sp 的环境。

# python - python代理在iframe中嵌入谷歌应用脚 本服务

> ID：10510425
> 
> 赞同：0
> 
> 时间：2012-05-09T05:41:22.453
> 
> 标签：python, twisted, reverse-proxy, google-apps-script

> 有“X-Frame-Options: SAMEORIGIN”标头阻止 Apps 脚本在不是来自 sites.google.com（或 docs.google.com）的页面中呈现

如何创建 python 代理以从 IFrame 工作。我怀疑代理需要替换 SAMEORIGIN 标记并使用 ajax 样式的 POST 命令。这对我来说是一个新的领域，以前不需要设置代理。

Google Apps 脚本页面示例： [https ://docs.google.com/macros/exec?service=AKfycbyrbgVS39Hf-RHYVPbnCKzf_uVaD0sGeFSKEqyRIw](https://docs.google.com/macros/exec?service=AKfycbyrbgVS39Hf-RHYVPbnCKzf_uVaD0sGeFSKEqyRIw)

这个代理解决方案看起来很接近： [如何让我的简单扭曲代理工作？](https://stackoverflow.com/questions/2269380/how-do-i-get-my-simple-twisted-proxy-to-work)

我找到了在 App Engine 上设置代理的说明，但是使用 ajax 样式的 POST 命令失败了： [http ://www.labnol.org/internet/setup-proxy-server/12890/](http://www.labnol.org/internet/setup-proxy-server/12890/)

这是一个已知的 Google Apps 脚本问题 #546 和 #522。大约 1 岁，大约有 100 人在寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:36:06.707

bs2grproxy 进行了一些小的更改。我在这里发布了解决方案： [http ://code.google.com/p/google-apps-script-issues/issues/detail?id=546#c104](http://code.google.com/p/google-apps-script-issues/issues/detail?id=546#c104)

变化：

在第 48 行下面的文件 bs2grproxy.py 中，“raise Exception('Unsupported ...”插入：

```
 scm = 'https' 
```

在第 134 行下方，“raise Exception('Requested ...”插入：

```
 if fetched:
                if resp.headers.get('Content-Type', '').find('html') >= 0:
                    resp.content = resp.content + '<style type="text/css"> .warning-panel {display: none;} </style>'
                    resp.headers['x-frame-options'] = 'IGNORE'
                    logging.info("warning-panel hidden and x-frame-options reset") 
```

您可能还需要在 bs2grproxy.py 中更改代理超时，如下所示：

```
resp = urlfetch.fetch(new_path, self.request.body, method, newHeaders, False, False, 30) 
```

涡流。

# delphi - delphi 2006，自定义组件中的 SynTaskDialog 编译错误

> ID：10510428
> 
> 赞同：2
> 
> 时间：2012-05-09T05:41:31.270
> 
> 标签：delphi, delphi-7, custom-component, delphi-2006

我正在为`delphi 7`and开发组件`delphi 2006`，该组件使用`SynTaskDialog.pas`来自[synopse](http://synopse.info/fossil/artifact/1cb0389fe7b026e5c96b2ab864cee6f48e6aedc9)，我已经成功使用了`SynTaskDialog.pas`in`delphi 7`组件，但是当我尝试使用它`delphi 2006`来创建组件包时。我收到一个错误

![在此处输入图像描述](../Images/e5358019099c4c32aa1fe9e56cd9a6b2.png)

我在[synopse.info/forum上找到了相同的解决方案](http://synopse.info/forum/viewtopic.php?id=253)

* * *

引用：

我找到了两种解决方法：

1.  用字符串数组替换指针数组，如

> ```
>  TD_ICONS_IDENT: array[TTaskDialogIcon] of string =(
>     '', SMsgDlgWarning, SMsgDlgConfirm, SMsgDlgError, SMsgDlgInformation,
>     '', SMsgDlgInformation); 
> ```

并删除一些 LoadResString 调用或

2.用函数替换指针数组

> ```
>  GetIconIdent(TTaskDialogIcon): Pointer 
> ```

* * *

但即使在那之后我也无法为组件编译包。这些错误来了

```
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SMsgDlgOK' from unit 'SynTaskDialog'
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SMsgDlgYes' from unit 'SynTaskDialog'
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SMsgDlgNo' from unit 'SynTaskDialog'
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SMsgDlgCancel' from unit 'SynTaskDialog'
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SMsgDlgRetry' from unit 'SynTaskDialog'
 [Pascal Error] E2201 Need imported data reference ($G) to access 'SCloseButton' from unit 'SynTaskDialog' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T06:22:32.033

为什么不问项目论坛的问题？

一个解决方案可能会增强这个开源单元的官方代码。

好的 - 它可以帮助我获得一些 SO 积分。;)

AFAIK 这个“E2001”问题已经被确定 - 看到[这个帖子](http://synopse.info/forum/viewtopic.php?pid=2850#p2850)应该已经在最新的主干中修复了。这听起来适用于 Delphi 7，但不适用于 Delphi 2006。

这是此编译器错误的潜在解决方法：

定义这样一个函数：

```
function IconMessage(Icon: TTaskDialogIcon): string;
begin
  case Icon of
    tiWarning:   result := SMsgDlgWarning;
    tiQuestion:  result := SMsgDlgConfirm;
    tiError:     result := SMsgDlgError;
    tiInformation, tiShield: result := SMsgDlgInformation;
    else result := '';
  end;
end; 
```

要这样使用：

```
if Inst='' then
  Inst := IconMessage(aDialogIcon); 
```

现在已[在项目主干中提交](http://synopse.info/fossil/info/90b1a2a4b3)。

感谢您使用我们的开源组件！

# sql - 在存储过程中使用变量

> ID：10510432
> 
> 赞同：-2
> 
> 时间：2012-05-09T05:41:45.637
> 
> 标签：sql, sql-server, database, stored-procedures

我正在使用 Microsoft SQL 服务器并编写一个包含许多选择语句的存储过程。在这里，我想要两个变量来保存两个 select 语句的结果，并且我想添加这两个变量以获得最终结果。请帮我这样做（语法和示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:08:56.063

下面是 SQL Server 的语法：

```
DECLARE @UserEmail Varchar(250)
DECLARE @LoginID INT 

SET @UserEmail  = 'a@b.org'

select @LoginID = LoginID from Login L
Where L.UserEmail = @UserEmail 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:31:46.050

您应该澄清您正在使用哪个数据库。在 MS SQL Server 中，您可以像这样使用临时表变量：

```
BEGIN

SELECT product_id,product_name INTO #temp1 FROM products;

SELECT product_id,product_name INTO #temp2 FROM products;

SELECT * FROM #temp1
UNION 
SELECT * FROM #temp2;

END 
```

MS SQL Server 中有几种类型的临时表变量。我使用过其中一种。要了解更多信息，只需在 Web 中搜索“MS SQL Server 临时表”即可。

编辑：这是另一个在 MS SQL Server 中使用另一种类型的临时表变量的示例。

```
DECLARE @temp1 TABLE (product_id INT,product_name VARCHAR(100));

    DECLARE @temp2 TABLE (product_id INT,product_name VARCHAR(100));

    INSERT INTO @temp1 SELECT product_id,product_name FROM products WHERE cat_id=1;

    INSERT INTO @temp2 SELECT product_id,product_name FROM products WHERE cat_id=2;

    SELECT product_id,product_name
    FROM @temp1
    UNION
    SELECT product_id,product_name
    FROM @temp2; 
```

# android - Android 4.0 的内核源代码 - Ice Cream Sandwich

> ID：10510433
> 
> 赞同：0
> 
> 时间：2012-05-09T05:41:46.340
> 
> 标签：android, linux-kernel, android-source, android-kernel

我已按照以下链接中的说明下载了 Android 4.0 源：http: [//source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)

我已经成功下载了源代码，没有任何问题。但是，我没有在其中找到内核源代码。后来我发现下面的链接有内核源。

source.android.com/source/building-kernels.html

但是，这些来源是特定于设备的，但以下内容除外：

```
$ git clone https://android.googlesource.com/kernel/common.git 
```

我对么？

实际上，我有自己的带有 ARM 926 EJ 处理器的主板，它在 2.6.10 内核版本上运行良好，并且在这个内核版本上运行良好。

我的想法是将 Android 4.0/早期版本移植到这个板上。我的想法如下。

1.  我将采用用于 Android 4.0 的最新内核并将我的补丁从 2.6.10 添加到最新的 android 内核并启动它。
2.  然后，我将添加 Android 用户空间源并尝试从我的板上启动 Android。

问题：我应该使用哪些内核源代码，即来自 kernel.org 或高于 common.git 的内核源代码？Android 4.0 是基于 2.6.29 内核版本吗？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:20:53.200

不，ICS 基于 Linux 内核 3.0.1。

你应该是对的`$ git clone https://android.googlesource.com/kernel/common.git`

我的来源：http: [//source.android.com/source/building-kernels.html](http://source.android.com/source/building-kernels.html)

# android - HttpURLConnection 异常

> ID：10510437
> 
> 赞同：1
> 
> 时间：2012-05-09T05:42:40.880
> 
> 标签：android, httpurlconnection

我有一种方法可以检查设备内的互联网连接。即使移动设备连接到 wifi/gprs，该方法也总是抛出异常。我需要在 xml 中添加任何权限还是代码出错了

```
public boolean checkConnectivity(String url)  {     

        try{                

            HttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();
            conn.setRequestMethod("HEAD");

                if(conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                        return true;
                }else{
                        return false;
                }

        }catch(Exception e) {
                System.out.println("myhttp exception");
                return false;
        }                           
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:45:22.123

将此添加到清单文件中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:54:12.030

您需要在您的 Android Manifest 文件中添加以下权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

另外，我建议使用连接管理器服务来执行此操作 [http://developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

# ios - 搜索显示控制器并点击取消按钮会导致搜索结果不呈现

> ID：10510439
> 
> 赞同：1
> 
> 时间：2012-05-09T05:42:50.520
> 
> 标签：ios, uisearchbar, uisearchbardelegate

我有一个实现 UISearchBarDelegate 和 UISearchDisplayDelegate 协议的 UITableViewController。我遇到了一个错误，如果我单击搜索栏中的取消按钮，它将不会呈现进一步的查询。

我可以像这样在重新加载数据之前输出我们的搜索结果： NSLog(@"here are search results %@",self.searchResults);
[self.searchDisplayController.searchResultsTableView reloadData];

作品：

1.  启动应用程序，在查询框中键入“SOM” - 结果返回正常

不工作：

1.  启动应用程序，在查询框中输入“SOM”（或其他任何内容）
2.  单击“取消”按钮（不是搜索框中的 x）
3.  在搜索栏中单击返回，然后键入“SOM” - 查询发生但不呈现到 searchResultsTableView

我是否有可能删除了 searchResultsTableView？还有其他想法会发生什么吗？

谢谢

**编辑 1** 不覆盖 searchBarCancelButtonClicked。嗯....如果我在 cellForAtIndexPath 中进行了一些调试，那么我可以看到它没有被调用。有什么办法可以取消设置 self.searchDisplayController.searchResultsTableView 使其不再存在？

# hibernate - jsf 标签无法在托管服务器上解析

> ID：10510443
> 
> 赞同：1
> 
> 时间：2012-05-09T05:43:09.680
> 
> 标签：hibernate, jsf-2, primefaces

问题是当我在本地服务器上运行我的 jsf 应用程序时，它运行时没有任何问题......但是当我在托管服务器上运行我的应用程序时，jsf 标签没有被解析......

我的网址模式是

```
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
 <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
   <welcome-file-list>
<welcome-file>faces/index1.xhtml</welcome-file>
</welcome-file-list> 
```

在我的本地服务器中，如果我给出[http://localhost:8080/applicationname](http://localhost:8080/applicationname)，它会直接重定向到我的索引页面。该应用程序工作正常...

但在托管服务器中，以下 url 返回“未找到请求资源”

```
http://domainname/applicationname/
http://domainname/applicationname/faces/index.xhtml 
```

But if give the url name without faces then the content works,not jsf functionality(jsf tags not parsed)...

```
http://domainname/applicationname/index.xhtml 
```

Any help would be appreciated. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:13:12.097

将 jsf jar 添加到托管服务器并确保它们位于类路径中，就像在本地环境中一样，并确保正在使用正确的 web.xml...

# jquery - 具有从中心缩放的 div 的可重复事件

> ID：10510445
> 
> 赞同：1
> 
> 时间：2012-05-09T05:43:16.840
> 
> 标签：jquery

我无法使此鼠标悬停事件可重复。这意味着每次您将鼠标悬停时，都会触发一个新实例并继续直到完成。

我也无法使其从中心缩放。

这是我的工作示例[http://jsfiddle.net/pcwuc/](http://jsfiddle.net/pcwuc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:52:48.887

您必须将精灵设置回其原始 css 值。它是隐藏的，因此您正在重新运行动画，但您看不到它。您想使用动画的回调将所有内容设置回默认值。

[http://jsfiddle.net/pcwuc/3/](http://jsfiddle.net/pcwuc/3/)

```
$("#header").mouseover(function() {
    $("#shine").animate({
        width: "300px",
        height: "300px",
        opacity: 0
    }, 3000, function() {
        $('#shine').css({
            width: 0,
            height: 0,
            opacity: 1,
            top: 200,
            left: 200
        });
    });
}); 
```

​或者，如果您希望能够一次发射多个，请克隆原件。

[http://jsfiddle.net/pcwuc/5/](http://jsfiddle.net/pcwuc/5/)

使用回调删除已触发的克隆，这样您就不会超载 DOM。

```
$("#header").mouseover(function() {
    var $shineCopy = $("#shine").clone();
    $shineCopy.appendTo('body').animate({
        width: "300px",
        height: "300px",
        opacity: 0
    }, 3000, function() {
        $(this).remove();
    });
});​ 
```

# facebook - Facebook Getting a Users Groups (Having Problems)

> ID：10510446
> 
> 赞同：0
> 
> 时间：2012-05-09T05:43:27.527
> 
> 标签：facebook, token

Ive searched high and low for an answer to this on here but havent been able to find anything. Please answer if you can, its appreciated.

**The Setup:**

Im learning how to work with the PHP Facebook API SDK by using one of the examples as a base. Im new to working with APIs so Im a little confused and have been having a problem trying to list a users groups.

**The Question:**

Ive got the app made. Ive got the proper permissions and extended permissions. I am able to get the users name and basic info.

我认为我的问题在于访问获取用户组所需的扩展权限所需的访问令牌。我不确定我是否正确地将其发送到 API。

*这就是我得到的：*

```
<?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {
        $access_token = $facebook->getAccessToken();
        $user_profile = $facebook->api('/me','GET');
        $user_groups = $facebook->api('/me/groups','GET', array( 'access_token=' => $access_token ));

        echo "Name: " . $user_profile['name'];
        echo "<br />";
        echo "Groups: " . $user_groups['name'];

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $args['scope'] = 'user_groups,user_likes';
        $login_url = $facebook->getLoginUrl($args);
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {

      // No user, print a link for the user to login
      $args['scope'] = 'user_likes,user_groups';
      $login_url = $facebook->getLoginUrl($args);
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?> 
```

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:55:56.510

我不太确定，但这里有几点：

1.  使用 facebook sdk 时没有理由手动添加访问令牌，这些将为您添加访问令牌。应该：

    $user_groups = $facebook->api('/me/groups','GET');

2.  *"/me/groups"*的 json 编码结果的格式与"/me *"*的格式完全不同。“/me”的结果只是一组键/值数据，“/me/groups”的结果被包装在一个“data”参数中，该参数是一个对象数组。正如[用户对象文档](http://developers.facebook.com/docs/reference/api/user/)中所述（在*组*连接下）：

    > 包含版本（old-0 或新 Group-1）、名称、id、管理员（如果用户是组的管理员）和书签顺序（在主页上的组书签列表中的什么位置，组为用户显示）。

3.  如果对 facebook 如何响应不同的查询有疑问，请使用[Graph Explorer 工具](http://developers.facebook.com/tools/explorer)来测试不同的查询并查看 facebook 返回的响应。例如[/me](http://developers.facebook.com/tools/explorer/?method=GET&path=me)的[结果和 /me/groups的结果](http://developers.facebook.com/tools/explorer/?method=GET&path=me/groups)

# c# - 带有自定义文件夹的 C# Microsoft 测试单元

> ID：10510447
> 
> 赞同：1
> 
> 时间：2012-05-09T05:43:30.407
> 
> 标签：c#, unit-testing, build

我想问一些关于 VS2010 测试项目的事情。我有一个包含配置文件的自定义文件夹的类库项目。然后我有一个测试项目，将用于测试类库。问题是每次我构建/运行测试时都没有在测试结果文件夹上创建配置文件夹。如何在我构建/运行测试时创建文件夹和文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:59:04.300

您应该使用*DeploymentItems*来引用您的测试所依赖的外部内容。

这是一个类似的 SO 帖子，其中包含有关如何操作的分步指南：[https ://stackoverflow.com/a/4604124/1373170](https://stackoverflow.com/a/4604124/1373170)

# ruby-on-rails - 无法使用 rake 销毁数据库

> ID：10510449
> 
> 赞同：0
> 
> 时间：2012-05-09T05:43:52.317
> 
> 标签：ruby-on-rails

我是 Rails 新手，在练习教程时出现以下错误。有任何想法吗..

```
$ rake destroy scaffold Microposts --trace
rake aborted!
Don't know how to build task 'destroy'
/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task_manager.rb:49:in `[]'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:115:in `invoke_task'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'

/home/keval/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T05:45:50.240

三重奏`rails destroy scaffold Microposts`

# python - Python：无法导入扩展 - Errno 2

> ID：10510450
> 
> 赞同：2
> 
> 时间：2012-05-09T05:43:52.293
> 
> 标签：python, mercurial, path, pythonpath

我在 Mac OS X Lion 上的 Python 环境中出现了奇怪的行为。像 Sublime Text（基于 Python）这样的应用程序不起作用（我最初认为这是一个应用程序错误），现在，在我安装 hg-git 后，每次我在 term 启动 HG 时都会收到以下错误：

`*** failed to import extension hggit from /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-package/hggit/: [Errno 2] No such file or directory`

所以这可能是 Python 环境设置错误。库和软件包已经到位。知道如何解决吗？

笔记：

*   我按照 hg-git 网站说明安装了 hg-git。
*   我还在我的 .hgrc 文件中添加了扩展名的确切路径：`hggit = /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-package/hggit/`
*   Python 是使用 Python 网站上的官方软件包安装的。
*   在术语中呼应`$PYTHONPATH`打印任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:45:33.767

“网站包”？您的意思是“站点包”吗？

# mysql - 如何在 mysql 结果中向前看

> ID：10510452
> 
> 赞同：1
> 
> 时间：2012-05-09T05:43:58.487
> 
> 标签：mysql, mysqli, next, key-pair

我有一个数组，其中包含对库存商品的“类别”、“组”和“子组”的 mysql 查询结果。我需要构建一个动态菜单，但我正在构建的数组的当前行的内容取决于下一行中的列。

我查找了很多示例，但所有示例都检查了数组的整行（mysql 行）我只想检查数组行中的一项（一个 mysql 列）。我需要类似的东西

```
for ( $ix = 0; $ix < (length(current_result) - 1); $ix++) {
  if (current_result[$ix, Catagory] = current_result[$ix + 1, Catagory]) {
     echo some code
  } else {
     echo some other code  
  }
}
some code to handle the last line of the array 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:54:13.363

假设您有一个关联的行数组，您只是缺少正确的数组语法：

```
for( .... ){
   $thiscat = $current_result[$ix]['Category'];
   $nextcat = $current_result[$ix+1]['Category'];
} 
```

# git - 强制“git push”覆盖远程文件

> ID：10510462
> 
> 赞同：951
> 
> 时间：2012-05-09T05:45:38.680
> 
> 标签：git, git-push

我想推送我的本地文件，并将它们放在远程仓库中，而不必处理合并冲突。我只希望我的本地版本优先于远程版本。

我怎样才能用 Git 做到这一点？

* * *

## 回答 #1

> 赞同：1293
> 
> 时间：2012-05-09T05:48:23.470

您应该能够通过使用强制对远程仓库进行本地修订

```
git push -f <remote> <branch> 
```

（例如`git push -f origin master`）。离开`<remote>`并将`<branch>`强制推送所有已设置的本地分支`--set-upstream`。

请注意，如果其他人共享此存储库，他们的修订历史将与新的冲突。如果他们在更改点之后有任何本地提交，他们将变得无效。

**更新**：我想我会添加一个旁注。如果您正在创建其他人将查看的更改，那么创建一个包含这些更改的分支并定期 rebase 以使它们与主开发分支保持同步并不少见。只需让其他开发人员知道这将定期发生，这样他们就会知道会发生什么。

**更新 2**：由于观众数量的增加，我想添加一些额外的信息，说明当您`upstream`遇到强制推送时该怎么做。

假设我已经克隆了您的 repo 并添加了一些提交，如下所示：

```
            D----E话题
           /
A----B----C开发

```

但是后来`development`分支被 a 击中`rebase`，这将导致我在运行时收到如下错误`git pull`：

```
拆包对象：100% (3/3)，完成。
来自 <repo-location>
 * 分支开发 -> FETCH_HEAD
自动合并 <文件>
CONFLICT（内容）：合并 <locations> 中的冲突
自动合并失败；修复冲突，然后提交结果。

```

在这里我可以解决冲突和`commit`，但这会给我留下一个非常丑陋的提交历史：

```
       C----D----E----F话题
      //
A----B-------------C'发展

```

使用它可能看起来很诱人，`git pull --force`但要小心，因为这会让你陷入搁浅的提交：

```
            D----E话题

A----B----C'发展

```

所以可能最好的选择是做一个`git pull --rebase`. 这将要求我像以前一样解决任何冲突，但对于每个步骤而不是提交我将使用`git rebase --continue`. 最后，提交历史看起来会更好：

```
            D'---E'主题
           /
A----B----C'发展

```

**更新 3：**您还可以将该`--force-with-lease`选项用作“更安全”的强制推送，[正如 Cupcake 在他的回答中提到的](https://stackoverflow.com/a/24768381/456814)：

> 如果远程上出现您未预料到的新提交（从技术上讲，如果您尚未将它们提取到远程跟踪分支中），使用“租约”强制推送允许强制推送失败，这在以下情况下很有用您不想意外覆盖您甚至还不知道的其他人的提交，而只想覆盖您自己的：
> 
> ```
> git push <remote> <branch> --force-with-lease 
> ```
> 
> `--force-with-lease`您可以通过阅读以下任何内容来了解​​有关如何使用的更多详细信息：
> 
> *   [`git push`文件](http://jk.gs/git-push.html)
> *   [Git：如何忽略快进并将原点 [分支] 恢复到较早的提交？](https://stackoverflow.com/questions/3166713/git-how-to-ignore-fast-forward-and-revert-origin-branch-to-earlier-commit/18505634#18505634)

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2014-07-15T21:21:01.173

## 你想强制推送

您基本上想要做的是强制推送您的本地分支，以覆盖远程分支。

如果您想对以下每个命令进行更详细的说明，请参阅下面的详细信息部分。使用 Git 强制推送基本上有 4 种不同的选项：

```
git push <remote> <branch> -f
git push origin master -f # Example

git push <remote> -f
git push origin -f # Example

git push -f

git push <remote> <branch> --force-with-lease 
```

如果您想对每个命令进行更详细的解释，请参阅下面我的长答案部分。

**警告：**强制推送将用您正在推送的分支的状态覆盖远程分支。在使用它之前确保这是你真正想要做的，否则你可能会覆盖你真正想要保留的提交。

# 强制推送详情

### 指定远程和分支

您可以完全指定特定的分支和远程。该`-f`标志是`--force`

```
git push <remote> <branch> --force
git push <remote> <branch> -f 
```

### 省略分支

当推送分支的分支被省略时，Git 将根据您的配置设置来计算它。在 2.0 之后的 Git 版本中，新的 repo 将具有默认设置来推送当前签出的分支：

```
git push <remote> --force 
```

而在 2.0 之前，新的 repos 将有默认设置来推送多个本地分支。有问题的设置是`remote.<remote>.push`和`push.default`设置（见下文）。

### 省略远程和分支

当远程和分支都被省略时，just 的行为`git push --force`由你的`push.default`Git 配置设置决定：

```
git push --force 
```

*   从 Git 2.0 开始，默认设置 ,`simple`基本上只会将您当前的分支推送到其上游远程对应部分。远程由分支的`branch.<remote>.remote`设置确定，否则默认为原始存储库。

*   在 Git 版本 2.0 之前，默认设置，`matching`基本上只是将所有本地分支推送到远程上具有相同名称的分支（默认为 origin）。

您可以通过阅读或[在线版本的 git-config(1) 手册页](http://jk.gs/git-config.html)来阅读更多`push.default`设置。`git help config`

### 用力推更安全`--force-with-lease`

如果远程上出现您未预料到的新提交（从技术上讲，如果您尚未将它们提取到远程跟踪分支中），使用“租约”强制推送允许强制推送失败，这在以下情况下很有用您不想意外覆盖您甚至还不知道的其他人的提交，而只想覆盖您自己的：

```
git push <remote> <branch> --force-with-lease 
```

`--force-with-lease`您可以通过阅读以下任何内容来了解​​有关如何使用的更多详细信息：

*   [`git push`文件](http://jk.gs/git-push.html)
*   [Git：如何忽略快进并将原点 [分支] 恢复到较早的提交？](https://stackoverflow.com/questions/3166713/git-how-to-ignore-fast-forward-and-revert-origin-branch-to-earlier-commit/18505634#18505634)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-05-09T06:00:57.320

另一种选择（避免任何可能对其他贡献者造成问题的强制推送）是：

*   将您的新提交放在专用分支中
*   重置你`master`的`origin/master`
*   将您的专用分支合并到`master`，始终保留来自专用分支的提交（这意味着在其之上创建新修订`master`将反映您的专用分支）。
    有关模拟. [_](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another/4912267#4912267)`git merge --strategy=theirs`

这样，您可以将 master 推送到远程，而无需强制执行任何操作。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-07-30T18:54:04.947

为我工作：

```
git push --set-upstream origin master -f 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-05T11:32:34.087

git push -f 有点破坏性，因为它会重置团队中其他任何人所做的任何远程更改。更安全的选择是 {git push --force-with-lease}。

{--force-with-lease} 所做的是拒绝更新分支，除非它是我们期望的状态；即没有人更新上游的分支。在实践中，这是通过检查上游 ref 是否符合我们的预期来工作的，因为 ref 是散列，并将父链隐式编码为它们的值。您可以准确地告诉 {--force-with-lease} 要检查的内容，但默认情况下会检查当前的远程参考。这在实践中意味着当 Alice 更新她的分支并将其推送到远程存储库时，分支的 ref 指向头将被更新。现在，除非 Bob 从远程进行拉取操作，否则他对远程的本地引用将过期。当他使用 {--force-with-lease} 进行推送时，git 将根据新远程检查本地 ref 并拒绝强制推送。{--force-with-lease} 仅在没有其他人在此期间将更改推送到远程时才有效地允许您强制推送。系上安全带是 {--force}。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-09-05T11:12:19.813

**使用 tortoisegit 的简单步骤**

GIT 提供本地文件提交并推送到 git 存储库。

脚步 ：

1) **stash 更改** 存储名称

2）**拉**

3)**存储弹出**

4)**提交** 1 个或多个文件并给出提交更改描述集作者和日期

5)**推**

# c++ - C++ 双指针到长指针的转换

> ID：10510468
> 
> 赞同：0
> 
> 时间：2012-05-09T05:46:00.863
> 
> 标签：c++, pointers

考虑下面的代码片段：

```
double * p = new double[16];

int value = 1;
void * q = p;
*((double *)q) = value;

int x = ((long *)p)[0];

cout << "Value of x for double * to long * = " << x << endl;

*((int *)q) = value  ;

x = ((long *)p)[0];

cout << "Value of x for int * to long * = " << x << endl; 
```

这里的输出分别是 0 和 1。谁能向我解释为什么？

另外，如果我直接访问指针处的值...即。p[0]，值在两种情况下都正确显示为 1。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:08:59.427

整数以直接二进制形式存储在内存中，因此您可以毫无问题`int`地进行转换。使用浮点二进制语法存储，其中一些位用于描述尾数，其他位用于描述指数（类似于科学记数法，即 5e2 = 500）。`long``doulbe`

如果您尝试将双精度数据用作双精度数据，则由于二进制存储值的方式不同，它将无法正确转换。

# javascript - MarkerClusterer is marker in cluster?

> ID：10510478
> 
> 赞同：6
> 
> 时间：2012-05-09T05:47:49.160
> 
> 标签：javascript, google-maps, google-maps-markers, markerclusterer

I put markers into clusters:

```
var markerClusterer = new MarkerClusterer(map, markers, {
    zoomOnClick : false,
    maxZoom : 13,
    gridSize : 100
}); 
```

And i have 15 markers. 10 of these are in clusters in the map. How to determine if the marker is in a clusters.

```
var clusteredMarkers = markerClusterer.getTotalMarkers();
for(i = 0; i < clusteredMarkers.length; i++) {
    if(isInCluster((clusteredMarkers[i])) {
        clusteredMarkers[i].infobox.close();        
    }
} 
```

How to define a function like isInCluster(marker) that infobox is open in only markers, that are not in any cluster (i.e. 5 infoboxes have to be visible)?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T10:58:01.883

将`MarkerClusterer`标记的地图设置为`null`是否在集群中，以便它不再显示在地图上。然后`MarkerClusterer`将标记的地图设置回`map`它不再在集群中的任何时间。您可以尝试检查每个标记：

```
var mapOptions = {            // Notice that mapZoom is not set
    center: new google.maps.LatLng( 19, 19 ),
    mapTypeId: google.maps.MapTypeId.ROADMAP };

map = new google.maps.Map( document.getElementById( "map_canvas" ), mapOptions );
var markerClusterer = new MarkerClusterer( map, markers, { ... });

//Whenever the map completes panning or zooming, the function will be called:
google.maps.event.addListener( map, "idle", function() {
    for ( var i = 0; i < markers.length; i++ ) {
        var mrkr = markers[i];
        if ( mrkr.getMap() != null ) {
            mrkr.infobox.open(); 
        }
        else {
            mrkr.infobox.close(); 
        }
    }
}

//Now that map, markerClusterer, and the "idle" event callback are in place,
//set the zoom, which will trigger the "idle" event callback 
//after the zoom activity completes,
map.setZoom( 19 ); //Or whatever is appropriate

//Thereafter, the callback will run after any pan or zoom... 
```

显然，标记的状态可能会在放大、缩小或任何其他视口更改后发生变化，因此您必须在视口更改后重新检查。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T12:00:03.063

看这个例子[http://88.196.132.133/markerclusterer/](http://88.196.132.133/markerclusterer/)，它不能与信息框一起正常工作。必须始终使用信息框显示所有标记（如果它们不在群集中）。问题还在于加载页面时所有信息框都会打开片刻。

# c# - How to create PPS file in Visual Studio 2010 using C#?

> ID：10510486
> 
> 赞同：1
> 
> 时间：2012-05-09T05:48:57.580
> 
> 标签：c#, asp.net, visual-studio-2010, powerpoint

I have worked on ASP.NET with C# but no experience in visual studio to make Microsoft Office Applications.

Can you please suggest how can I do the below task :
I want to make a PPS file (Microsoft Power Point) in Visual Studio 2010 using ASP.NET with C#.

Also I want to add images/pictures in pps file and will send the file in email.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:35:15.567

只需我的 2 美分，如果您要将 ASP.NET 应用程序部署到您无法控制的环境，请远离 Office 自动化。您可以使用不需要在服务器上安装Office 的[Office Open XML 。](http://www.microsoft.com/en-us/download/details.aspx?id=5124)我认为这比使用自动化要困难一些，但它是值得的，因为它是免费的，并且互联网上有大量资源。一个是[Open XML 开发者](http://openxmldeveloper.org/)网站。

同样的事情也适用于电子邮件发送，使用`System.Web.Mail`命名空间而不是 Outlook 自动化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:04:12.400

这是一些关于如何从 c# 自动创建 ppt 的好教程

[http://support.microsoft.com/kb/303718/](http://support.microsoft.com/kb/303718/)

从文章

[http://msdn.microsoft.com/hi-in/magazine/cc163471%28en-us%29.aspx](http://msdn.microsoft.com/hi-in/magazine/cc163471%28en-us%29.aspx)

[http://msdn.microsoft.com/en-us/library/bb960904%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb960904%28v=office.12%29.aspx)

这是一个简短的教程

[http://www.eggheadcafe.com/community/csharp/2/10068596/create-ppt-slides-through-cnet.aspx](http://www.eggheadcafe.com/community/csharp/2/10068596/create-ppt-slides-through-cnet.aspx)

这是发送带有附件的电子邮件的方法

[http://csharp.net-informations.com/communications/csharp-email-attachment.htm](http://csharp.net-informations.com/communications/csharp-email-attachment.htm)

我希望它能指导您完成正确的任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:55:05.123

发送电子邮件是不同的部分。使用`smtp`或任何其他协议发送电子邮件。要使用 C# 启动 pps，您可以在此处找到示例。[使用 C# 的 Power Point 自动化](http://dotnet23.blogspot.com/2010/07/1.html)。
您会在此处获得发送电子邮件示例。[发送邮件](http://www.c-sharpcorner.com/UploadFile/dchoksi/SendingMail02132007002923AM/SendingMail.aspx)

# iphone - How to perform two animation in OpenGLES (iPhone)?

> ID：10510489
> 
> 赞同：1
> 
> 时间：2012-05-09T05:49:45.900
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

Can you please tell me, how to perform both animation like (left to right, move the ball image) and (draw a line and move from top to bottom) at a time in OpenGLES (iPhone)?

Thanks in Advance

# ruby - Ruby Each Statement 卡在 while 循环中

> ID：10510492
> 
> 赞同：0
> 
> 时间：2012-05-09T05:50:02.547
> 
> 标签：ruby, while-loop, each

这里是 StackOverflow 的新手。我正在处理第一个欧拉问题，并遇到了一个问题，我可以让语句遍历数组。似乎这与我设置 while 循环的方式有关，但我无法弄清楚。

这是我的代码：

```
#euler problem 1

numbers = [3,5]
sum = 0
i=1
total=0

numbers.each do |number|
  while i * number < 10
    adder = i * number
    total += adder
    i += 1
    puts total
  end
end

puts total 
```

输出为 3 9 18 18

知道为什么它不处理数组编号中的 5 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:00:03.900

您的问题是`i`在块外声明，所以当`number`是五时，`i`已经是四，并且`while`循环的条件立即失败，因为`20 < 10`它是假的。试试这样：

```
numbers = [3,5]
sum = 0
total=0

numbers.each do |number|
  i = 1
  while i * number < 10
    #...
  end
end

puts total 
```

如果你在你的代码中放一点`puts`，你会看到发生了什么：

```
i = 1
numbers.each do |number|
  puts "#{number}\ti = #{i}"
  while i * number < 10
    puts "\ti = #{i}"
    adder = i * number
    total += adder
    i += 1
  end
end 
```

这将为您提供以下输出：

```
3   i = 1
    i = 1
    i = 2
    i = 3
5   i = 4 
```

你会看到问题`i`。

# jquery - Jquery utilities scripts, IE, External scripts

> ID：10510494
> 
> 赞同：1
> 
> 时间：2012-05-09T05:50:07.820
> 
> 标签：jquery, internet-explorer, cookies

I have a very strange problem. IE throws me error messages when I try to use - JqueryUtilities as $. Cookie. Problem only occurs when I try to access these functions from an external script. If I use these functions in a script page itself they work.

Any idea?

# git - 使用 git-svn 与主 svn 存储库的 git 工作流

> ID：10510495
> 
> 赞同：3
> 
> 时间：2012-05-09T05:50:18.933
> 
> 标签：git, git-svn

我在一个使用 SVN 作为修订控制的大团队中。

我在一个大团队的一个小组中，他们尝试使用 git 对该小组中的代码进行一些集成测试。

以下是我们想要为日常工作做的事情。

1.  A、B、C（小组中的人）做他们的编码工作。
2.  A,B,C 将工作签入 git branch `integration-test`。
3.  将最新更改从`SVN trunk`重新设置为`integration-test`
4.  构建镜像并进行集成测试。
5.  测试通过，A、B、C 将他们的代码签入“SVN”
6.  转到第 1 步

问题是：因为我们的更改已经`integration-test`在步骤 2 中提交到 git 分支。我们在步骤 5 中提交了更改`SVN`。因此，在下一轮的步骤 3 中，合并将与所有更改发生冲突。

那么，这种情况有没有好的做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T05:56:55.797

您将遇到的一个问题是它`git svn rebase`实际上重写了 git 存储库的提交历史记录。这将导致与从该回购中提取的任何人发生冲突。最好的解决方案是每个人都可以`git svn`自己访问 svn 存储库。

如果你想设置一个远程仓库以便共享分支，那么每个人都必须知道，如果远程 git 分支被重新设置为 svn，他们将不得不强制将新的修订历史应用到他们的本地 git 仓库。

其他人可以使用`git pull --force`. 尽管被警告，因为这将使更改点之后所做的任何提交无效。例如，假设我们有以下提交结构：

```
       D----E话题
      /
A----B----C----F大师

```

然后我们使用`git pull --force`更新我们的本地存储库，然后更改从 . 开始的提交的 sha1 `B`。我们的新结构将如下所示：

```
       D----E话题

A----G----H----我师傅

```

请注意提交`D`和`E`现在如何漂浮在奇妙的土地上？那是因为分支点现在不再与过去匹配`B`，而是现在`G`。

要解决这个问题，您需要确保您的本地分支点源自不会被运行更改的提交`git svn rebase`。强制拉远程后，您可以`git rebase`将本地分支更新到远程分支。

假设我们犯了从提交点创建分支的错误，这将导致上述浮动仙境。好吧，那么您必须在启动`git pull --force`. 像这样：

哎呀。`B`将被覆盖在`pull`.

```
       D----E话题
      /
A----B----C----F大师

```

好吧，那么我们只需要`git rebase A topic`在不会更改的提交上进行更改。

```
  D'---E'主题
 /
A----B----C----F大师

```

然后，一旦发生更改，我们就可以`git rebase G topic`将更改恢复到我们知道它们所在的位置。

```
       D'---E'主题
      /
A----G----H----我师傅

```

希望这可以解释尝试在 svn 存储库旁边运行中央访问 git 存储库的痛苦。

# jmeter - My panel has same link for each page

> ID：10510497
> 
> 赞同：1
> 
> 时间：2012-05-09T05:50:25.620
> 
> 标签：jmeter

Is it possible to set up the following scenario using JMeter?

For my web site i have set same link for every page and it is working fine for.but i am trying to test performance of this by using JMETER , jmeter provide no result to me, it is possible to record such type of script with the help of jmeter.

your response will be very help full to me.

Thanks.

# python - ProgrammingError: column "xxxxx" of relation "xxxx" does not exist

> ID：10510500
> 
> 赞同：1
> 
> 时间：2012-05-09T05:50:31.417
> 
> 标签：python, xml, database, psycopg2, openerp

I am using Openerp6.0 and I get the following error whenever i add a custom field in my openerp modules. Why does this error occurs..can anyone please help me??

for example:

```
ProgrammingError: column "x_brand" of relation "res_partner" does not exist
LINE 1: ...comment","website","lang","section_id","supplier","x_brand",... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:05:40.263

对于`res.partner`，您是否尝试过从`base`admin>modules 更新模块？

# iphone - 使用 UIImageWriteToSavedPhotosAlbum 保存图像时出现无法识别的选择器错误

> ID：10510506
> 
> 赞同：3
> 
> 时间：2012-05-09T05:51:15.697
> 
> 标签：iphone, ios, uigesturerecognizer, uiactionsheet, unrecognized-selector

一个 UILongPressGestureRecognizer 被添加到我的 imageView 中，并带有动作句柄LongPressOnPhotos。最相关的代码如下：

```
- (IBAction)handleLongPressOnPhotos:(UIImageView *)sender{
self.imageWillBeSaved = sender;
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Save the photo" otherButtonTitles: @"Go to the Original photo", nil];
actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
[actionSheet showInView:self.view]; 
[actionSheet release];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
switch (buttonIndex) {
    case 0:
        UIImageWriteToSavedPhotosAlbum(self.imageWillBeSaved.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);

        break;

    default:
        break;
}

}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
if (error != NULL)
{
    // handle error
}
else 
{
    // handle ok status
}
} 
```

单击操作表上的“保存照片”按钮时，出现错误消息：**-[UILongPressGestureRecognizer image]: unrecognized selector sent to instance 0x21c2a0** 代码有问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:05:43.570

只需替换前两行..

```
- (IBAction)handleLongPressOnPhotos:(UIImageView *)sender{
self.imageWillBeSaved = sender; 
```

和..

```
- (IBAction)handleLongPressOnPhotos:(UIGestureRecognizer *)sender{
self.imageWillBeSaved = sender.view; 
```

这应该有效......大卫很好地解释了为什么会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T05:57:50.347

您的发件人显然是 UILongPressGestureRecognizer。

触发手势识别器时触发的方法应如下所示

```
- (void)nameOfMethodHere:(UIGestureRecognizer *)gestureRecognizer; 
```

参数是识别器，而不是图像视图。如果识别器仅附加到一个视图，您可以通过`view`属性获得它。否则，您可以获取长按的位置并点击测试以获取视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T06:03:05.347

这是为了`UILongPressGestureRecognizer`

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(handleLongPress:)];
longPress.minimumPressDuration = 1.0;
[YOURVIEW addGestureRecognizer:longPress];
[longPress release]; 
```

这是 Selector for `UILongPressGestureRecognizer`，您的代码中的问题是，您`UIImageView`在 Selector 中作为参数传递`UILongPressGestureRecognizer`只是用这个编辑它..

```
- (void)handleLongPress:(UILongPressGestureRecognizer*)sender 
{ 
    if (sender.state == UIGestureRecognizerStateBegan) 
    {
         //YOUR CODE
    }
} 
```

# c# - c# error : length cannot be less than 0

> ID：10510507
> 
> 赞同：-3
> 
> 时间：2012-05-09T05:51:26.977
> 
> 标签：c#

I have a problem with my C# program: I have created a quiz with 10 questions and 10 images. I get this `Length cannot be less than zero.\r\nParameter name: length` at the line

```
int imageIndex = int.Parse(line.Substring(0, delimiter)); 
```

Even if in my notepad file I included the image index:

```
3:What is the foo in the bar? 
10:How can you add a widget? 
4:Why pick a bar over a foo? 
```

Here is the code:

```
if (nr >= questions.Count)
{
    button1.Enabled = false;
}
else
{
    Random r = new Random();
    int x;
    do   
    { 
        x = r.Next(questions.Count); 
    } 
    while (questions[x].displayed == true);

    textBox1.Text = questionText;
    radioButton1.Text = questions[x].answer1; 
    radioButton2.Text = questions[x].answer2;
    questions[x].displayed= true;
    current_question = x;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T05:58:38.807

你以前有这样的一行：

```
int delimiter = line.IndexOf(':'); 
```

...但是您没有检查返回值。`Substring`如果它是 -1，这意味着在该特定行中没有找到您的分隔符 - 但无论如何您都会将它传递给它。在使用它之前检查它的值`delimiter`——这样你就可以抛出一个更有用的异常（或者跳过这一行，或者你想做的任何事情）。

实际上，我建议您对代码进行重大更改-而不是保留`questions`为 a`List<string>`或其他任何内容，而是创建一个`Question`类。在阅读时解析文本行，在这一点上丢弃失败或抛出异常，而不是等到碰巧遇到错误的问题。然后，您可以拥有一个`List<Question>`这将使其余代码更简单。

您可能*还*希望保留`Queue<Question>`最初是完整列表副本的 a ，已打乱。当您想显示一个新问题时，只需从该队列中取出下一个元素。这样你就不需要在选择已经显示的问题时循环。（你可能想在类中包含一个`Index`or`QuestionNumber`属性`Question`，大概......）

请注意，它可能适用于您真正知道的所有行，但文件末尾有一些空行。您可能只想跳过空行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:54:58.603

子字符串参数是初始索引和长度。代码中的分隔符看起来不像长度。

[http://msdn.microsoft.com/en-us/library/aka44szs.aspx](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

更改以下

```
int delimiter = line.IndexOf(':'); 
int imageIndex = int.Parse(line.Substring(0, delimiter)); 
string questionText=line.Substring(delimiter + 1); 
pictureBox1.Image = imageList1.Images[imageIndex];  

textBox1.Text = questionText;
radioButton1.Text = questions[x].answer1;  
questions[x].displayed= true; 
current_question = x; 
```

至

```
int delimiter = line.IndexOf(':'); 
 if(!String.IsNullOrEmpty(line) && delimiter > 0 )
    {
        int imageIndex = int.Parse(line.Substring(0, delimiter)); 
        string questionText=line.Substring(delimiter + 1); 
        pictureBox1.Image = imageList1.Images[imageIndex];  

        textBox1.Text = questionText;
        radioButton1.Text = questions[x].answer1;  
        questions[x].displayed= true; 
        current_question = x; 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T06:38:00.720

```
private string copystring(string instr ,int start ,int length)
{
    return instr.Length >= (start + 1) 
        ? (instr.Length > (start + length) ? instr.Substring(start, length) : instr.Substring(start,instr.Length-start)) 
        : "";
} 
```

# javascript - 使用 beautifullsoup 和 python 从网站/文件中提取 .js 文件

> ID：10510509
> 
> 赞同：0
> 
> 时间：2012-05-09T05:51:35.120
> 
> 标签：javascript, python, beautifulsoup

我正在尝试使用 beautifulsoup 从网站获取 javascript“.js”文件。这是我目前正在使用的代码，它可以工作但在某些文件上丢失

```
jss = soup.findAll(name = 'script', attrs = { 'src': re.compile('\.js') }) 
```

例如 js 文件：

```
src=http://krebsonsecurity.com/wp-content/plugins/comment-rating-pro/ck-karma.js?ver=3.3.2 
```

然后它错过了。

任何人都知道能够提取 js 文件的最佳实现。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:54:45.503

删除对值的限制`src`（超出“拥有 src”）。：

```
re.compile('\.+') 
```

# java - 将 JBPM 5.3 部署到 JBoss 7.1.1 时出现警告

> ID：10510512
> 
> 赞同：2
> 
> 时间：2012-05-09T05:51:55.917
> 
> 标签：java, jboss, java-ee-6, jbpm

当我使用 JBPM 将我的应用程序部署到 JBoss 时，我收到以下警告：

```
 07:43:30,597 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015893: Encountered invalid class name 'org.xmlpull.mxp1.MXParser,org.xmlpull.mxp1_serializer.MXSerializer' for service type 'org.xmlpull.v1.XmlPullParserFactory' 
```

这个类来自 jbpm-human-task 的传递依赖 smack-3.0.4。

问题是我应该担心（我目前没有看到任何问题）如何避免这个警告？这个警告是什么意思？

亲切的问候

基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:22:41.847

1.  不用担心，除非您使用 jBPM jabber 工作项，否则警告不会影响 jboss 或您的应用程序的性能。
2.  该警告与显然与您的应用程序一起打包的 jbpm-workitems jar 中的依赖关系有关。如果您不使用 jbpm-workitems，删除该 jar 可能会修复错误。（或见 3。）
3.  [jboss 社区论坛上的这条评论](https://community.jboss.org/message/744927#744927)解释了 smack jar 中的配置文件格式不正确。您可以更改 smack jar 中的配置文件以使其消失。

# javascript - 在调整大小时调整弹出窗口的高度和宽度以保持纵横比

> ID：10510518
> 
> 赞同：0
> 
> 时间：2012-05-09T05:52:50.977
> 
> 标签：javascript, resize

我正在使用`window.open`函数打开一个弹出窗口

```
window.open('some_page.htm','','width=950,height=500'); 
```

现在我想要的是当用户尝试调整窗口大小时，应该保持纵横比，即如果宽度减小，那么相应的高度也应该减小，反之亦然。我只想计算新尺寸。到目前为止，我已经尝试过了

```
function ResizeWindow()
{
    var iOrignalWidth = 950;
    var iOrignalHeight = 500;
    var iOuterHeight = window.outerHeight;
    var iOuterWidth = window.outerWidth;

    var iNewOuterWidth = Math.round((iOrignalWidth / iOrignalHeight) * iOuterHeight);
    var iNewOuterHeight = Math.round((iOrignalHeight / iOrignalWidth) * iNewOuterWidth);

    alert("New Width: "+ iNewOuterWidth + "\t" + "New Height" + iNewOuterHeight);
} 
```

我知道那里有问题，因为我没有得到想要的结果。对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:21:33.043

您需要将宽度调整为高度或反之亦然，而不是两者兼而有之。在这段代码中，我假设您希望将宽度调整为高度：

```
function ResizeWindow()
{
    var iOrignalWidth = 1000;
    var iOrignalHeight = 500;
    var iOrginalRatio = iOrignalWidth/iOrignalHeight; // 2

    var iOuterWidth = window.outerWidth; // example: 1083
    var iOuterHeight = window.outerHeight; //example: 600

    var iNewOuterHeight = iOuterHeight; // 600
    var iNewOuterWidth = Math.round(iNewOuterHeight*iOrginalRatio); //600 * 2 = 1200

    alert("New Width: "+ iNewOuterWidth + "\t" + "New Height" + iNewOuterHeight);
}​ 
```

对于示例，我将原始宽度更改为 1000，但您可以在实际代码中将其改回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:21:05.883

您应该根据一个调整大小来保持纵横比。例如：

```
function ResizeWindow()
{
    var iOrignalWidth = 950;
    var iOrignalHeight = 500;
    var iOuterHeight = window.outerHeight; 
    var iOuterWidth = window.outerWidth;

    var w = (window.outerWidth  - iOrignalWidth) / iOrignalWidth; // for exam: (1280-950) / 950= 0.34
    var h = (window.outerHeight - iOrignalHeight) / iOrignalHeight; // for exam : (800 - 500) / 500= 0.60

    var newWidth;
    var newHeight;
    if (w<h)
    {
        // If percentage of width is less than percentage of height, Resize should be according to percentage of width.
        newWidth = iOrignalWidth * w * 100;
        newHeight = iOrignalHeight * w *100;
    }
    else
    {
        // If percentage of height is less than  percentage of width, Resize should be according to percentage of height.
        newWidth = iOrignalWidth * h * 100;
        newHeight = iOrignalHeight * h *100;
    }

    alert("New Width: "+ newWidth + "\t" + "New Height" + newHeight );

} 
```

这样可以始终保持纵横比。

# c# - 成员变量的 XML 序列化为 xmlnode

> ID：10510520
> 
> 赞同：1
> 
> 时间：2012-05-09T05:53:08.700
> 
> 标签：c#, xml, serialization

我有一些想要序列化为类的 XML。

```
<Group>
 <Employees>
     <Employee>
         <Name>Hari</Name>
         <Age>30</Age>
     </Employee>
     <Employee>
         <Name>Yougov</Name>
         <Age>31</Age>
     </Employee>
     <Employee>
         <Name>Adrian</Name>
         <Age>28</Age>
     </Employee>
</Employees > 
```

上面的 XML 可以很容易地在 C# 中实现。但是我偶然发现了我的要求，XML 的样子，

```
<Group>
 <Employees>
    <Hari Age=30 />
    <Yougov Age=31 />
    <Adrian Age=28 />
 </Employees >
</Group> 
```

`List<Employee>`员工在哪里`KeyValuePair<string, int>("Hari", 30)`

如何设计类和成员变量以获得上述序列化 XML？（前提是员工名单中不会有重复的名字）

任何帮助深表感谢。

*[序列化键值对](https://stackoverflow.com/questions/83232/is-there-a-serializable-generic-key-value-pair-class-in-net)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:07:46.220

在你的情况下，我会选择 Linq2Xml。

```
XDocument xDoc = XDocument.Load(......);
var emps = xDoc.Descendants("Employees").Elements()
    .Select(x => new Employee() { 
                        Name = x.Name.ToString(), 
                        Age = int.Parse(x.Attribute("Age").Value) 
                    })
    .ToList(); 
```

PS：`Age=30`无效。应该是`Age="30"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:03:25.583

将数据用作架构不是一个好主意；特别是，很多名称作为 xml 元素名称**无效**，而且：这不是好的做法（例如，它在模式验证方面几乎没有用处）。如果你想简洁，也许是这样的：

```
<Employees>
    <Add Name="Hari" Age="30" />
</Employees> 
```

或者

```
<Employees>
    <Employee Name="Hari" Age="30" />
</Employees> 
```

这可以简单地完成：

```
[XmlArray("Employees"), XmlArrayItem("Employee")]
public List<Employee> Employees {get;set;} 
```

和：

```
public class Employee {
    [XmlAttribute]
    public string Name {get;set;}
    [XmlAttribute]
    public int Age {get;set;}
} 
```

`XmlSerializer`不支持“内容作为元素名称”序列化程序，除非您`IXmlSerializable` ***从父元素***自己做所有事情（它必须来自父元素，因为`XmlSerializer`无法识别要在那里处理的子元素）。

# python - 在 python 中构建一个简单的 BlackVarianceSurface

> ID：10510523
> 
> 赞同：2
> 
> 时间：2012-05-09T05:53:24.207
> 
> 标签：python, quantlib, quantlib-swig

我正在尝试构建一个 BlackVarianceSurface 以便我可以将插值结果与我的进行比较。我所做的是

```
todaydate = Date(1, January, 2010) 
maturity=[]
for i in range(24):
  maturity.append(Date(1, January, 2010)+Period(i, Months))

k = range(10, 90, 10)
vol = abs(random.randn(24, 8)).transpose().tolist()

volsurf = BlackVarianceSurface(todaydate, TARGET(), maturity, k, vol, Actual365Fixed()) 
```

我正在使用 numpy 矩阵。它被包装到 quantlib 矩阵中了吗？有什么我做错了吗

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:55:03.113

不幸的是，QuantLib 包装器不采用 numpy 矩阵。在将它们传递给类构造函数之前，您必须将它们转换为简单的列表列表。

我在尝试您的代码时遇到的另外几个问题：

*   你必须转置矩阵。外部列表的 len() 必须等于罢工次数，内部列表的 len() 必须等于到期次数。
*   您使用的今天日期晚于大多数到期日（可能是上面的错字，或者复制/粘贴出错了？）。无论如何，构造函数将引发异常，因此您必须以一种或另一种方式修复您的日期。此外，您可能希望设置`Settings.instance().evaluationDate`为今天的日期。

# javascript - javascript淡入/淡出，在Firefox顶部淡出img轻弹

> ID：10510530
> 
> 赞同：1
> 
> 时间：2012-05-09T05:54:21.397
> 
> 标签：javascript, firefox, fadein, fadeout

我正在制作这个网站[http://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)和

我有一个淡入效果，其中第二个图像（newBg）站在第一个（bgImg）的顶部并淡入，然后我将src从第二个复制到第一个，所以现在它们都是相同的图像，然后将第二个的不透明度设置为 0，并在用户更改图像时重复。

这在 Opera 和 chrome 上运行良好，但在 Firefox 上，淡入淡出太慢了，并且淡出 img（正如我所说的那样并没有真正淡出，只是被覆盖）在动画结束时轻弹，出现然后消失.

我不确定是什么原因造成的，什么可能导致 Firefox 中的缓慢淡入淡出？

这是处理淡入淡出的代码：http: [//jsfiddle.net/VbjPc/1/](http://jsfiddle.net/VbjPc/1/)

任何帮助表示赞赏。

编辑 - - - - - -

我已经使用用于预加载图像的代码更新了 jsfiddle [http://jsfiddle.net/VbjPc/1/ 。](http://jsfiddle.net/VbjPc/1/)新代码在底部。我认为预加载是有效的，因为在图像加载之前什么都没有发生，你可以看出它们大约是 500kb，所以它们需要几秒钟才能加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:42:40.497

首次在 Web 浏览器中加载图像时，浏览器下载图像时会存在一定程度的延迟。

一般来说，大多数网站都有很多活动部分。当浏览器下载 HTML 文档时，浏览器将开始处理由 HTML 文档中的 HTML 元素表示的所有元素和事件。

例如，CSS 在遇到链接标签时开始加载。JavaScript 正在加载脚本元素。其他 HTML 元素被添加到 DOM。发生这种情况时，会触发向服务器发送请求以下载这些资源的事件。

将`img`标签添加到 DOM 时，会向服务器发送请求以检索由 src 属性标识的资源。图像完全下载后，将在页面上呈现。

假设我们正在使用适合网站大小的图像，当我们正常加载图像时，没有效果，我们不会真正注意到延迟，因为图像在下载完成后或多或少会立即显示。

但是，当我们添加诸如fadeIn 和fadeOut 之类的效果时，延迟的效果会变得非常明显。这是因为 JavaScript 事件实际上开始修改 img 元素的 CSS 属性，即使实际资源尚未准备好。

因此，当 DOM 元素被添加到 DOM 时，fadeIn 和 fadeOut 事件就会触发，而不是在图像加载完成时触发。换句话说，当图像仍在下载时，会发生fadeIn 或fadeOut 操作。这会产生不和谐的效果，因为部分褪色但未渲染的图像可能会突然出现，然后在其余部分缓慢褪色。

这个动作不是我们正在寻找的平滑、渐进的效果。

现在，您可能会注意到在您加载图像的第 2 次、第 3 次、第 4 次或第 n 次时不会发生这种情况。图像被浏览器缓存后，延迟大大降低，淡入淡出效果呈现应有的效果。平滑而渐进。

我在图像中淡入淡出时通常使用的技术是首先预加载它。虽然有一些库可以为您预加载所有图像，但在应用 fadeIn 事件之前，这里有一个非常简单、快速的预加载图像技术：

**将图像作为隐藏图像放置在 HTML 中：**

```
<!-- Hidden by default, but now preloaded for a smooth fadeIn effect -->
<img id="myImage" src="/images/myImage.png" style="display:none" /> 
```

**绑定点击事件时使用jQuery添加隐藏图片：**

如果图像在单击事件发生后会淡入，我发现这种技术非常有用：

```
// preload the image while registering the click event
$('<img id="myImage" src="/images/myImage.png" style="display:none" />')
    .append("body");

$('button').click(function() {
    $('#myImage').fadeIn();
}); 
```

**使用 jQuery 的 load 事件根据需要预加载图像：**

用户可能永远不会点击按钮来显示图像；因此，这是一种在请求图像时预加载图像的技术，但仍不会影响用户。如果用户决定不点击按钮，则永远不会从服务器请求资源。此外，由于我们在触发 fadeIn 事件之前等待图像加载，我们仍然可以获得我们正在寻找的平滑度，但在过程开始之前可能会有轻微的延迟。

```
// preload the image while registering the click event

$('button').click(function() {
    // place img element on page without specifying the src attribute
    $('<img id="myImage" style="display:none" />').append("body");

    // bind a load event to the image element so fadeIn doesn't start until
      // the image is completely downloaded
    $('#myImage').load(function() { 
        $(this).fadeIn();   // fade in the image
    });

}); 
```

# asp.net - 需要您的转换建议

> ID：10510538
> 
> 赞同：-3
> 
> 时间：2012-05-09T05:55:21.503
> 
> 标签：asp.net

我们有一个 VB6 Windows 应用程序，现在用户想用最新的 C# Asp.net/Asp.Net MVC 应用程序转换它。

如果无法使用 Asp.net Web 应用程序，那么我们可以选择 C# winform 应用程序。

我的问题是有哪些可用的迁移工具以及转换中的挑战是什么。

请建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:08:38.353

即使有这样的工具（我 99.99% 肯定没有），也不要使用它。这种自动转换从来都不是一个好主意。相反，从头开始重写应用程序，您最终会得到更好的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:35:07.023

我不知道有什么好的转换工具可以为您完成所有工作，而且您确实不想这样做。Web/MVC 应用程序的工作方式与 WinForms 应用程序完全不同。要转换为 C# WinForm 应用程序，您还需要手动执行此操作。

在不了解该应用程序的功能的情况下，我不能说您是否可以将其制作为网络应用程序，但理论上这是可能的。我过去曾将表单应用程序迁移到基于 Web 的应用程序，没有任何问题。但我确实必须自己做而不是使用工具。

# c++ - 简单的 Postgresql libpq 代码太慢？

> ID：10510539
> 
> 赞同：5
> 
> 时间：2012-05-09T05:55:29.330
> 
> 标签：c++, c, postgresql, libpq

我正在使用 libpq 研究 postgresql。下面给出的代码需要很多时间（代码末尾给出的时间）。

```
#include "stdafx.h"
#include <stdlib.h>
#include <libpq-fe.h>
#include <windows.h>

static void exit_nicely(PGconn *conn)
{
    PQfinish(conn);
    exit(1);
}

int _tmain(int argc, _TCHAR* argv[])
{
    const TCHAR *conninfo;
    PGconn     *conn;
    PGresult   *res;
    int nFields, i, j;

    if (argc > 1)
        conninfo = argv[1];
    else
        conninfo = _T("hostaddr=192.168.4.171 port=12345 dbname=mydb user=myname password=mypass");

    conn = PQconnectdb(conninfo);
    if (PQstatus(conn) != CONNECTION_OK)
    {
        fprintf(stderr, "Connection to database failed: %s",
                PQerrorMessage(conn));
        exit_nicely(conn);
    }

    /* Start a transaction block */
    res = PQexec(conn, "BEGIN");
    if (PQresultStatus(res) != PGRES_COMMAND_OK)
    {
        fprintf(stderr, "BEGIN command failed: %s", PQerrorMessage(conn));
        PQclear(res);
        exit_nicely(conn);
    }

    TCHAR szVal1[200];
    TCHAR szVal2[200];
    TCHAR szBuffer[200];

    TCHAR *paramValues[2];
    int paramLengths[2];
    int paramFormats[2] = {0,0};

    ExecStatusType eStatus;

    LARGE_INTEGER li;
    QueryPerformanceFrequency(&li);
    double dAppFreq = double(li.QuadPart)/1000.0;

    QueryPerformanceCounter(&li);
    LONGLONG siStartCounter = li.QuadPart;

    TCHAR szStmt[512] = {0};
    _tcscpy_s(szStmt, 512, _T("Insert50k"));
    Oid oidTypes[2] = {0,0};

    PGresult *pRes =    PQprepare(conn,
                        szStmt,
                        _T("insert into details values($1,$2);"),
                        2,
                        oidTypes);
    QueryPerformanceCounter(&li);
    LONGLONG siEndCounter = li.QuadPart;
    LONGLONG siLoop = 0;

    double dDiff = (siEndCounter - siStartCounter)/dAppFreq;
    printf("Prepared %.2lf\n", dDiff);

    for(int i=0; i<50000; i++)
    {
        _stprintf_s(szVal1, 200, _T("%d"), i);
        _stprintf_s(szVal2, 200, _T("Detail%d"), i);

        paramValues[0] = szVal1;
        paramValues[1] = szVal2;

        paramLengths[0] = _tcslen(szVal1);
        paramLengths[1] = _tcslen(szVal2);

        siStartCounter = siEndCounter;
        pRes = PQexecPrepared(conn,
                         szStmt,
                         2,
                         paramValues,
                         paramLengths,
                         paramFormats,
                         0);
        QueryPerformanceCounter(&li);
        siEndCounter = li.QuadPart;
        siLoop += (siEndCounter - siStartCounter);

        eStatus = PQresultStatus(res);
        if (!res ||  (eStatus != PGRES_COMMAND_OK) )
        {
            PQclear(res);
            exit_nicely(conn);
        } 
    }

    dDiff = siLoop/dAppFreq;
    printf("Inserted %.2lf\n", dDiff);

    siStartCounter = siEndCounter;

    _tcscpy_s(szBuffer,200, _T("select count(*) from programdetails;"));
    res = PQexec(conn, szBuffer);

    eStatus = PQresultStatus(res);
    if (!res ||  (eStatus != PGRES_TUPLES_OK) )
    {
        PQclear(res);
        exit_nicely(conn);
    }

    /* first, print out the attribute names */
    nFields = PQnfields(res);
    for (i = 0; i < nFields; i++)
        printf("%-15s", PQfname(res, i));
    printf("\n\n");

    /* next, print out the rows */
    for (i = 0; i < PQntuples(res); i++)
    {
        for (j = 0; j < nFields; j++)
            printf("%-15s", PQgetvalue(res, i, j));
        printf("\n");
    }

    QueryPerformanceCounter(&li);
    siEndCounter = li.QuadPart;
    dDiff = (siEndCounter - siStartCounter)/dAppFreq;
    printf("Printed %.2lf\n", dDiff);

    /* end the transaction */
    res = PQexec(conn, "COMMIT");
    PQclear(res);

    /* close the connection to the database and cleanup */
    PQfinish(conn);

    return 0;
} 
```

示例输出（以毫秒为单位）：

```
Prepared 0.55
Inserted 5527.52
count

50000
Printed 7.58 
```

这里的查询是先准备好的，然后再执行。这个简单的插入大约需要 5.5 秒。有没有更好的方法来做同样的事情，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:05:50.570

在 TCP 连接上，每个 INSERT 都会导致到数据库的 TCP 往返。在 5.5 秒内完成 50000 次插入意味着一次 TCP 往返需要约 0.1 毫秒。您必须将其与您的网络设备的 TCP 基准进行比较，但您可能无法期望使用这种方法更快。

您应该考虑`COPY FROM STDIN`而不是单独的 INSERT。在内部，这将缓冲内容，并且由于与服务器的往返次数少得多，您可能会看到相当大的速度提高。

有关与这种形式的 COPY 相关的 libpq API，请参见[http://www.postgresql.org/docs/current/static/libpq-copy.html](http://www.postgresql.org/docs/current/static/libpq-copy.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-25T14:35:30.257

我遇到了类似的问题，并将我的一系列插入转换为一个多行插入。尽管添加了很多字符串修饰和 strcat 调用，但这显着提高了性能：

```
1000 rows:
Individual Inserts: 22.609s
Multirow Insert: 1.217s 
```

代码位于[https://gist.github.com/Meekohi/11291680](https://gist.github.com/Meekohi/11291680)（还显示了将二进制数据插入一列的示例）

# java - 使用 jxl api 将新列插入到现有的 excel 文件中

> ID：10510543
> 
> 赞同：3
> 
> 时间：2012-05-09T05:56:01.413
> 
> 标签：java, jxl

我正在使用 jxl api 来编辑现有的 excel 文件。但是当我尝试添加一个新列并编写工作表时，它显示空指针异常。我正在使用的代码如下所示：

```
File file = new File("d:\\test.xls");
Workbook workbook;
WritableWorkbook copy = null;
if (file.exists()) {

    try {
        workbook = Workbook.getWorkbook(file);
        copy = Workbook.createWorkbook(new File("C:\\TEMP\\temp.xls"),
                workbook);
    } catch (BiffException e) {

        e.printStackTrace();
    } catch (FileNotFoundException fnf) {
        fnf.printStackTrace();

    } catch (IOException e) {

        e.printStackTrace();
    }

}   
WritableSheet sheet = copy.getSheet(0);

sheet.insertColumn(2); //this statement causes error  
                      //if I comment it the code works fine

try {
    copy.write();
    copy.close();
}
catch(Exception e)
{

    e.printStackTrace();
} 
```

请帮我解决这个问题并插入新列。

我能够成功编辑excel的单个单元格并写入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:40:01.357

上面的代码可以在我的电脑上正常运行。最好把异常信息告诉我们，把整个代码放在这里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T10:19:33.993

您使用的 api 可能不是最好的。我也遇到了这个问题（在 insertcolumn 行出现空指针异常），直到我下载[jexcelapi](http://sourceforge.net/projects/jexcelapi/files/jexcelapi/2.6.9%20%28Java%201.6%29/jexcelapi_2_6_9.zip/download)才找到任何解决方案。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T11:10:47.073

我们可以插入一个新单元格，从而像这样插入一个新行/列-

```
Workbook aWorkBook = Workbook.getWorkbook(new File("Originalfile.xls"));
        WritableWorkbook aCopy = Workbook.createWorkbook(new File("Originalfile.xls"), aWorkBook);
        WritableSheet aCopySheet = aCopy.getSheet(0);//index of the needed sheet
        WritableCell aWritableCell = aCopySheet.getWritableCell(1,1);//no need!
        jxl.write.Label anotherWritableCell =  new jxl.write.Label(1,12 ,"SUN");
                //position of the new cell in column,row
            //can be a new Label() or new Number() or new Formula

            aCopySheet.addCell(anotherWritableCell);

        aCopy.write();
        aCopy.close(); 
```

我不清楚 insertRow() 或 insertColumn() 方法的作用。希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:20:33.070

**使用jxl**是不可能的，你必须使用**apache poi** [http://poi.apache.org/](http://poi.apache.org/) （或者如果有其他东西的话）

使用 jxl，您只能读取或编写工作簿，而不能编辑现有的工作簿。您还可以复制工作簿并编辑新创建的。WritableWorkbook newWorkbook = Workbook.createWorkbook(newFile, workbookTemplate, wbSettings); 但是你会失去很多格式化ald all AutoFilters，这是我在使用jxl时遇到的问题。

很好的例子在这里 [http://poi.apache.org/spreadsheet/quick-guide.html](http://poi.apache.org/spreadsheet/quick-guide.html) [http://www.kodejava.org/browse/49.html](http://www.kodejava.org/browse/49.html)

# javascript - Android：在img标签中显示捕获的图像

> ID：10510547
> 
> 赞同：0
> 
> 时间：2012-05-09T05:56:20.767
> 
> 标签：javascript, android, html

我想在 html 页面的 img 标签中显示捕获的图像。我可以从 OnActivityResult 事件中通过**data.getData()获取 URI 值。**但我不知道我可以以哪种格式发送图像并在 img 标签中显示。请任何人帮助我

相机.java：

```
 public class Camera extends Activity 
    {
         private static final int CAMERA_REQUEST = 1888;
         private String selectedImagePath;
         WebView webview;
         String fileName = "capturedImage.jpg";
         private static Uri mCapturedImageURI; 

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
                webview=(WebView)findViewById(R.id.webView1);
        }

        public void TakePhoto()
        {   
                ContentValues values = new ContentValues();  
                values.put(MediaStore.Images.Media.TITLE, fileName);  
                mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
                Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI); 
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
        }       
        @Override
        public void onActivityResult(int requestCode, int resultCode, Intent data)
        {
            if (resultCode == RESULT_OK)
                {
                  if (requestCode == CAMERA_REQUEST) 
                  { 
                    selectedImagePath = getPath(mCapturedImageURI);
                webview.loadUrl("javascript:ReceivePhoto(\""+selectedImagePath+"\")");
                  }
                }
        }

        public String getPath(Uri uri) {
            String[] projection = { MediaStore.Images.Media.DATA };
            Cursor cursor = managedQuery(uri, projection, null, null, null);
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }

    } 
```

html:

```
 function CallBack(resultimage) 
 {
       myimg.src = resultimage;
 } 
```

重新加载照片活动后，在启动我的应用程序时，它显示“等待调试......”。我犯了什么错误？谁能帮帮我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:37:38.423

得到了解决方案。:-)

```
public class Camera extends Activity 
{
     private static final int CAMERA_REQUEST = 1888;
     private String selectedImagePath;
     WebView webview;
     String fileName = "capturedImage.jpg";
     FileOutputStream fo;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
            webview=(WebView)findViewById(R.id.webView1);
    }

    public void TakePhoto()
    {   

            Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
    }       
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK)
            {
              if (requestCode == CAMERA_REQUEST) 
              { 
                Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
            Random randomGenerator = new Random();randomGenerator.nextInt(100);
            String newimagename=randomGenerator.toString()+".jpg";
            File f = new File(Environment.getExternalStorageDirectory()
                                    + File.separator + newimagename);
            try {
                f.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //write the bytes in file

            try {
                fo = new FileOutputStream(f.getAbsoluteFile());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo.write(bytes.toByteArray());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            webview.loadUrl("javascript:ReceivePhoto(\""+f.getAbsolutePath()+"\")");
              }
            }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

} 
```

清单文件：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# javascript - 自定义 Jquery 数据表参数

> ID：10510552
> 
> 赞同：2
> 
> 时间：2012-05-09T05:56:57.827
> 
> 标签：javascript, jquery, datatable

我正在尝试更新我在函数外部`.datatable()`函数的 Jquery 数据表中创建的自定义参数。

我通过以下方式创建了自定义参数：

```
 var oTable = $('#reqAllQueriesTable')
        .dataTable(
                {
                "bProcessing": true,
                "bServerSide": true, 
                "sAjaxSource": "query/getQuery",
                "bFilter" : true,
                "bJQueryUI" : true,
                "sSearch": "Search",
                "sDom": '<"H"<"projectTeamTools">lrft>',
                "fnServerData": function ( sSource, aoData, fnCallback ) {
                            aoData.push( { "name": "myParam", "value": "myValue" } );
                                $.ajax( {
                                    "dataType": 'json', 
                                    "url": sSource, 
                                    "data": aoData, 
                                    "success": fnCallback
                                    } );
                        } 
                });

 $("div.projectTeamTools").html('Organize by Project Teams: <select id="projectTeams"><option value="1">Project Team</option><c:forEach var="projectTeam" items="${userProjectTeams}"><option value="${projectTeam.projectId}" onClick="javascript:onTeamSelect(this.value)">${projectTeam.projectName}</option></c:forEach></select>');  

 function onTeamSelect(teamId){
    alert(teamId +" Selected");
    //oTable.fnSettings().aoServerParams.push( { name: "aoTeamId", value: teamId } );
              //I want to update the parameter `myParam` here. 
              //Or create a new parameter 'aoTeamId', whichever is possible.
} 
```

这可能吗。请帮忙！

谢谢，桑米特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:34:55.143

不需要覆盖 fnServerData 参数。出于您的目的，使用类似于以下行的内容覆盖 fnServerParams 参数：

```
"fnServerParams": function ( aoData ) {
    aoData.push({ "name": "teamId", "value": $("#projectTeams").val() });
} 
```

# objective-c - 在目标 c 中创建整数维数组

> ID：10510553
> 
> 赞同：0
> 
> 时间：2012-05-09T05:56:59.960
> 
> 标签：objective-c, arrays, nsinteger

我想实现这样的事情，但由于 id 导致我在 add 中出错！

```
NSMutableArray *rgbarray = [[NSMutableArray alloc] init];
 NSInteger rgb[3];
            const CGFloat *components = CGColorGetComponents(cgcolor);
            CGFloat cgred = components[0];
            CGFloat cggreen = components[1];
            CGFloat cgblue = components[2];
            rgb[0] = cgred;
            rgb[1] = cggreen;
            rgb[2] = cgblue;

            [rgbarray addObject:rgb]; 
```

我想添加 rgb 而不是 id ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:07:43.383

您只能将指向对象实例的指针添加到`NSMutableArray`

您可以使用`NSDictionary`或创建自己的子类`NSObject`来包装 3 个值。

```
NSDictionary * rgbDictionary = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:cgred], @"cgred", [NSNumber numberWithFloat:cggreen], @"cggreen", [NSNumber numberWithFloat:cgblue], @"cgblue", nil];

[rgbarray addObject:rgbDictionary]; 
```

检索值

```
NSDictionary * rgbDictionary = [rgbArray objectAtIndex:0];
CGFloat cgred = [[rgbDictionary objectForKey:@"cgred"] floatValue];
CGFloat cggreen = [[rgbDictionary objectForKey:@"cggreen"] floatValue];
CGFloat cgblue = [[rgbDictionary objectForKey:@"cgblue"] floatValue]; 
```

我实际上会使用子类方法。由于您尝试使用 C 数组为您的值编写代码，因此该`NSDictionary`方法将使您摆脱错误。

# ios - 我的 Settings.plist 没有被正确读取

> ID：10510557
> 
> 赞同：1
> 
> 时间：2012-05-09T05:57:48.580
> 
> 标签：ios, plist, settings.bundle

所以我设置了一个 settings.plist 并且可以正确读取数据。现在我`PSTextFieldSpecifier`在设置中有 2 个，所以我给了他们一个不同的`Key`

现在，当我运行应用程序时，一个字段有效而另一个无效 - 用于检索两者信息的代码是相同的，这甚至在我交换密钥标识符时得到确认，但是一旦我更改其中一个名称对任何东西，它都会停止工作。- 当然，代码中的所有内容都会更新以反映这一点。

我已经粘贴了 plist 的代码，所以你可以看到它是相同的。有什么问题？？

```
 <dict>
        <key>AutocapitalizationType</key>
        <string>None</string>
        <key>AutocorrectionType</key>
        <string>No</string>
        <key>DefaultValue</key>
        <string></string>
        <key>IsSecure</key>
        <true/>
        <key>Key</key>
        <string>customer_ID_preference</string>
        <key>KeyboardType</key>
        <string>Alphabet</string>
        <key>Title</key>
        <string>Customer ID</string>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
    </dict>
    <dict>
        <key>AutocapitalizationType</key>
        <string>None</string>
        <key>AutocorrectionType</key>
        <string>No</string>
        <key>IsSecure</key>
        <true/>
        <key>Key</key>
        <string>password_preference</string>
        <key>KeyboardType</key>
        <string>Alphabet</string>
        <key>Title</key>
        <string>Password</string>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
    </dict> 
```

干杯

- -编辑 - -

所以到目前为止我已经发现由于某种原因 textFields 只接受数字 - 但是当我直接输入字母时它工作正常 - 那么我应该更改 settigns 捆绑功能/限制吗？

# jsf-2 - 从 URL 获取值时遇到错误 (javax.el.PropertyNotWritableException:)

> ID：10510560
> 
> 赞同：1
> 
> 时间：2012-05-09T05:57:53.067
> 
> 标签：jsf-2

我有一个页面，我正在使用 h:link 之类的

```
<h:link outcome="countryPages_View.xhtml">
    <img src="images/afghanistan.png" style="border: none;"/>
    <f:param name="SaarcCountryId" value="11" />
    <f:param name="once" value="true" />
    <f:param name="fromPage" value="homePage" />
</h:link>

<h:link outcome="countryPages_View.xhtml">
    <h:graphicImage  url="images/bangladesh.png" style="margin-left:10px;border: none" />
    <f:param name="SaarcCountryId" value="5" />
    <f:param name="once" value="true" />
    <f:param name="fromPage" value="homePage" />
</h:link> 
```

当我单击图像时，网址就可以了。URL变成了这样

```
http://localhost:8080/WIT/faces/countryPages_View.xhtml?SaarcCountryId=1&once=true&fromPage=homePage 
```

然后在我的页面上我得到这样的值

```
<ui:composition template="./WEB-INF/templates/layout.xhtml">
    <ui:define name="title">SAARC Country View</ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="SaarcCountryId" value="#{countryPages_Setup.cntryid}" />
            <f:viewParam name="once" value="#{countryPages_Setup.onse}" />
            <f:viewParam name="fromPage" value="#{countryPages_Setup.page}}" />
            <f:event type="preRenderView" listener="#{countryPages_Setup.beforeRenderPage}" />
        </f:metadata>
        <h:form id="countryPages" prependId="false">
            ....
        </h:form>

    </ui:define>
</ui:composition> 
```

我的豆子是这样的

```
@ManagedBean
@ViewScoped
public class CountryPages_Setup implements Serializable {
    private String cntryid;
    private String page;
    private String onse;

    public void beforeRenderPage(ComponentSystemEvent event) {
        System.out.println(page);
        System.out.println(onse);
        System.out.println(cntryid);        
    } //end of beforeRenderPage()

    //Constructor
    public CountryPages_Setup() {

    } //end of constructor

    // getter and setter
    public String getCntryid() {
        return cntryid;
    }
    public void setCntryid(String cntryid) {
        this.cntryid = cntryid;
    }
    public String getOnse() {
        return onse;
    }
    public void setOnse(String onse) {
        this.onse = onse;
    }
    ...
} //end of class CountryPages_Setup 
```

当我的页面加载时，我收到错误。

```
exception
javax.servlet.ServletException: javax.el.PropertyNotWritableException: /countryPages_View.xhtml @20,88 value="#{countryPages_Setup.page}}": Illegal Syntax for Set Operation

root cause
javax.faces.component.UpdateModelException: javax.el.PropertyNotWritableException: /countryPages_View.xhtml @20,88 value="#{countryPages_Setup.page}}": Illegal Syntax for Set Operation

root cause
javax.el.PropertyNotWritableException: /countryPages_View.xhtml @20,88 value="#{countryPages_Setup.page}}": Illegal Syntax for Set Operation 
```

为什么我收到此错误？我为我的视图参数制作了 setter 和 getter？同样，当页面加载时，首先是我的构造函数调用。我想在我的构造函数中使用这些 f:param 值。我认为在构造函数之后我的 beforeRenderPage() 方法会调用。如何在构造函数中获取这些值，以便在构造函数中使用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:14:38.033

表达式末尾有第二个括号：page }}

```
<f:viewParam name="fromPage" value="#{countryPages_Setup.page}}" /> 
```

# jquery - Struts 2 Jquery Ajax Form提交filenotfound错误

> ID：10510563
> 
> 赞同：2
> 
> 时间：2012-05-09T05:58:11.680
> 
> 标签：jquery, struts2, form-submit, ajaxform

我的jsp上有一个表格，看起来像

`<s:form action="registerUser" theme="simple" name="AddUserForm" id="AddUserFormID" method="post">`

在我的 struts.xml 中，我输入了动作“registerUser”和指向正确的 java 动作类的类名。我在 xml 中的结果参数是

`<result name="success" type="json"> <param name="includeProperties">JSON</param> </result>`

我正在使用此代码提交表单

```
 `<s j:submit formIds="AddUserForm" value="Submit" indicator="indicator" button="true" />` 
```

当我提交表单时，我可以看到请求正在通过，但我收到错误“Jsp 处理错误 JSPG0036E：无法找到资源 /pages/registerUser.jsp。”

请帮忙。

# extjs4 - Extjs：将值分配给商店中的隐藏字段

> ID：10510565
> 
> 赞同：1
> 
> 时间：2012-05-09T05:58:19.713
> 
> 标签：extjs4

> **可能重复：**
> [如何将存储值分配给隐藏字段](https://stackoverflow.com/questions/10515600/how-to-assign-store-value-to-hidden-field)

我在表单中有一个隐藏字段，我需要从商店分配值，但该值未分配给隐藏字段。

```
CProvider = new Ext.create('Ext.ux.form', {
{
                        xtype:'hiddenfield',  
                        name:'clearingHouseID',
                        store: loggedUser,
                        value: id
}
}); 
```

那么如何从存储中为隐藏字段分配值。

# python - 使用 pdb.set_trace() 时不支持 readline

> ID：10510574
> 
> 赞同：14
> 
> 时间：2012-05-09T05:59:17.550
> 
> 标签：python, readline, pdb, libreadline

我有一个运行 Python 2.6.X 的应用程序。以交互模式启动 Python 解释器（使用或不使用 virtualenv）：readline 支持工作（命令历史记录）。使用相同的 Python 解释器启动我的应用程序（virtualenv-ed 与否）：使用**pdb.set_trace()**时没有可用的 readline 支持：光标键不起作用。操作系统是Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:53:37.417

检查此配方以在 pdb 中启用 readline 支持

[http://code.activestate.com/recipes/498182-sane-tab-completion-in-pdb/](http://code.activestate.com/recipes/498182-sane-tab-completion-in-pdb/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-09T08:09:01.107

我有一个类似的问题，对我来说，解决方案是使用 django 附带的 set trace 命令而不是 pdb 包。

# php - 如何在apache服务器上存储数据？

> ID：10510576
> 
> 赞同：0
> 
> 时间：2012-05-09T05:59:27.133
> 
> 标签：php, apache

我是一名php开发人员。在 .NET 中，我们能够将数据存储在服务器中的一个变量中。

有可能我们可以在 apache 服务器中存储一个数组并得到它吗？

我现在在我的 WAMP 上使用 php_memcache.dll

```
$memcache_obj = memcache_connect('localhost',80);

memcache_set($memcache_obj, 'var_key', 'some variable', MEMCACHE_COMPRESSED , 0);

echo memcache_get($memcache_obj, 'var_key'); 
```

当我这样做时 memcache_set 返回 false 并给出警告

```
Notice: memcache_set() [function.memcache-set]: Server localhost (tcp 80) failed with: Failed reading line from stream (0) in abc file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:30:23.663

我认为有一个误解。

> 有可能我们可以在 apache 服务器中存储一个数组并得到它吗？

不是在 Apache 中，而是在[`memcached`](http://www.memcached.org/)（它也是一个服务器，又名“内存缓存守护进程”== memcached）中。
Apache 和 memcached 是不同的东西。它们共存。

> 我现在在我的 WAMP 上使用 php_memcache.dll

好的，这是 memcache 的客户端库。它为您提供 PHP 中的`memcache_set()`和`memcache_get()`函数。

它不会**自动**提供 memcache 服务器。[在此处阅读有关如何在 Windows 环境中设置 memcache 的信息。](https://pureform.wordpress.com/2008/01/10/installing-memcache-on-windows-for-php/)Memcache 最初并不是为了支持 windows 而开发的，但它有一个移植版本。

正确设置后，您将需要更改第一行：

```
$memcache_obj = memcache_connect('localhost',80); 
```

Port 80 is HTTP, which is served by Apache - memcache runs on port 11211 in most default setups:

```
$memcache_obj = memcache_connect('localhost', 11211); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:00:20.793

在 php5 中可以写入服务器变量（即 $_SERVER['foo']），但是在下一页请求时它将完全删除。要保存特定的用户变量，您可以使用 session_start() + $_SESSION 方法。当然，这仅适用于该特定用户。但是要让用户操作设置一个变量；然后可以与站点上的任何其他用户相关联，如果没有数据库存储，您将需要使用诸如[memcached](http://memcached.org/)之类的应用程序。

# ios - 在应用程序内启用或禁用 iPhone 推送通知

> ID：10510578
> 
> 赞同：27
> 
> 时间：2012-05-09T05:59:37.687
> 
> 标签：ios, swift, push-notification, unusernotificationcenter, usernotifications

我有一个可以接收推送通知的 iphone 应用程序。目前，我可以通过转到 iphone 设置/通知来禁用我的应用程序的推送通知。

但我想在我的应用程序中添加一个开关或按钮来启用或禁用推送通知。

可以做到，因为我在foursqure iphone应用程序中看到它做到了。他们在设置呼叫通知设置中有一个部分，用户可以为应用程序启用或禁用不同类型的通知。

我在网上找了一个合适的解决方案，但仍然没有找到方法。任何人都可以给任何想法如何做到这一点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-25T10:10:06.193

[**仅供参考 - 很少有用户报告它停止在 iOS 10 上运行**]

`registerForRemoteNotificationTypes`您可以通过分别调用和轻松启用和禁用应用程序中的推送通知`unregisterForRemoteNotificationTypes`。我已经尝试过了，它有效。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-09T06:03:38.017

首先是您`can not enable and disable` `push notification`在应用程序中。如果您找到了一些应用程序，那么必须有解决方法。

就像如果您想在应用程序内部进行操作，则使用一个标识符并根据推送通知启用和禁用按钮将其发送到服务器。因此，您的服务器端编码使用此标识符并根据该标识符工作。就像标识符一样，它是启用的，否则您的服务器将发送通知，否则不会。

您可以检查该用户设置`enable` 或`disable` `Push Notifications`使用以下代码。

启用或禁用 iPhone 推送通知

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (types == UIRemoteNotificationTypeNone) 
 // Yes it is.. 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-20T14:12:55.157

务实地说，可以通过注册和注销推送通知来启用和禁用推送通知。

**启用推送通知：**

```
if #available(iOS 10.0, *) {
   // For iOS 10.0 +
   let center  = UNUserNotificationCenter.current()
   center.delegate = self
   center.requestAuthorization(options: [.sound, .alert, .badge]) { (granted, error) in
        if error == nil{
           DispatchQueue.main.async(execute: {
                 UIApplication.shared.registerForRemoteNotifications()
           }) 
        }
   }
}else{
    // Below iOS 10.0

    let settings = UIUserNotificationSettings(types: [.sound, .alert, .badge], categories: nil)
    UIApplication.shared.registerUserNotificationSettings(settings)

    //or
    //UIApplication.shared.registerForRemoteNotifications()
} 
```

**委托方法**

```
@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -> Void) {

}

@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {

}

func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {
    // .. Receipt of device token
}

func application(_ application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: Error) {
    // handle error
} 
```

**禁用推送通知：**

```
UIApplication.shared.unregisterForRemoteNotifications() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-10T19:12:52.337

如果您`FireBase`用于向您的设备发送推送通知，您可以使用主题订阅在订阅的设备中启用推送通知，并在您不希望用户在已取消订阅的设备中接收推送通知时取消订阅用户的主题。

要为用户订阅某个主题，只需导入 Firebase，然后使用此方法：

```
Messaging.messaging().subscribe(toTopic: "topicName") 
```

并取消订阅用户使用：

```
Messaging.messaging().unsubscribe(fromTopic: "topicName") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T13:46:50.803

首先检查权限，然后进行相应的更改。

```
func checkPermission(completion: @escaping (_ isCameraPermissionOn: Bool) -> ()) {
        let current = UNUserNotificationCenter.current()
        current.getNotificationSettings(completionHandler: { permission in
            switch permission.authorizationStatus  {
            case .authorized:
                //If user allow the permission
                completion(true)
            case .denied:
                //If user denied the permission
                completion(false)
            case .notDetermined:
                //First time
                current.requestAuthorization(options: [.alert, .sound, .badge]) { granted, error in
                    if granted {
                        completion(true)
                    } else {
                        completion(false)
                    }
                }
            case .provisional:
                // @available(iOS 12.0, *)
                // The application is authorized to post non-interruptive user notifications.
                completion(true)
            case .ephemeral:
                // @available(iOS 14.0, *)
                // The application is temporarily authorized to post notifications. Only available to app clips.
                completion(true)
            @unknown default:
                print("Unknow Status")
            }
        })
    } 
```

称呼：

```
AppsPermissionCheckingManager.shared.checkPermission { isPermissionOn in
            DispatchQueue.main.async {
                if isPermissionOn == true {
                    //It's on
                } else {
                    //It's off
                }
            }
        } 
```

# php - PHP 正则表达式 2 种不同的模式和 2 种不同的替换

> ID：10510579
> 
> 赞同：2
> 
> 时间：2012-05-09T05:59:42.790
> 
> 标签：php, regex

我对正则表达式很陌生，我正在尝试将 2 个或多个逗号替换为一个并删除最后一个逗号。

```
 $string1=  preg_replace('(,,+)', ',', $string1);
    $string1= preg_replace('/,([^,]*)$/', '', $string1); 
```

我的问题是：有没有办法用一行正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:07:49.670

是的，当然这是可能的：

```
$result = preg_replace(
    '/(?<=,)   # Assert that the previous character is a comma
    ,+         # then match one or more commas
    |          # or
    ,          # Match a comma
    (?=[^,]*$) # if nothing but non-commas follow till the end of the string
    /x', 
    '', $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:05:24.943

不，这是不可能的，因为替换是不同的，并且两个逗号可能在也可能不在字符串的末尾。

也就是说，`preg_replace()`接受一系列模式和替换，因此您可以这样做：

```
preg_replace(array('/,,+/', '/,$/'), array(',', ''), $string1); 
```

请注意，我修改了第二个模式。希望有帮助。

# dos - 如何使用dos命令列出文件？

> ID：10510580
> 
> 赞同：22
> 
> 时间：2012-05-09T05:59:57.720
> 
> 标签：dos

我需要列出文件的名称并将其存储为文本文件！

我所做的是，我使用了以下 dos 命令

```
 x:\xyz> dir *.* > files.txt 
```

它的作用是，它存储目录 xyz 中存在的文件的名称以及文件的大小、时间和日期！

如何只获取文件名？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-09T06:01:33.290

尝试`dir /b`，对于*裸格式*。

`dir /?`将向您展示您可以使用该`dir`命令执行哪些操作的文档。这是我的 Windows 7 机器的输出：

```
C:\>dir /?
Displays a list of files and subdirectories in a directory.

DIR [drive:][path][filename] [/A[[:]attributes]] [/B] [/C] [/D] [/L] [/N]
  [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]] [/W] [/X] [/4]

  [drive:][path][filename]
              Specifies drive, directory, and/or files to list.

  /A          Displays files with specified attributes.
  attributes   D  Directories                R  Read-only files
               H  Hidden files               A  Files ready for archiving
               S  System files               I  Not content indexed files
               L  Reparse Points             -  Prefix meaning not
  /B          Uses bare format (no heading information or summary).
  /C          Display the thousand separator in file sizes.  This is the
              default.  Use /-C to disable display of separator.
  /D          Same as wide but files are list sorted by column.
  /L          Uses lowercase.
  /N          New long list format where filenames are on the far right.
  /O          List by files in sorted order.
  sortorder    N  By name (alphabetic)       S  By size (smallest first)
               E  By extension (alphabetic)  D  By date/time (oldest first)
               G  Group directories first    -  Prefix to reverse order
  /P          Pauses after each screenful of information.
  /Q          Display the owner of the file.
  /R          Display alternate data streams of the file.
  /S          Displays files in specified directory and all subdirectories.
  /T          Controls which time field displayed or used for sorting
  timefield   C  Creation
              A  Last Access
              W  Last Written
  /W          Uses wide list format.
  /X          This displays the short names generated for non-8dot3 file
              names.  The format is that of /N with the short name inserted
              before the long name. If no short name is present, blanks are
              displayed in its place.
  /4          Displays four-digit years

Switches may be preset in the DIRCMD environment variable.  Override
preset switches by prefixing any switch with - (hyphen)--for example, /-W. 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-09T06:03:30.850

如果您只想获取**文件名而不是目录名**，请使用：

```
dir /b /a-d > file.txt 
```

# php - 需要两个选择查询帮助

> ID：10510583
> 
> 赞同：0
> 
> 时间：2012-05-09T06:00:07.503
> 
> 标签：php, mysql, database

```
SELECT r.nid 
FROM recipe_node_ingredient r,recipe_ingredient ri 
WHERE r.`ingredient_id` = ri.id 
AND ri.name = 'carrot' 
AND r.nid NOT IN (SELECT r.nid 
                  FROM recipe_node_ingredient r,recipe_ingredient ri
                  WHERE  r.`ingredient_id` = ri.id AND ri.name = 'salt'); 
```

此查询将返回一个节点 ID..

此查询还返回一个节点 ID。

```
 SELECT nid 
 FROM  taxonomy_index JOIN taxonomy_term_data USING (tid) 
 WHERE name IN ('Desert."', 'Indian')
 GROUP BY nid HAVING COUNT(*) > 1 
```

是否可以在 MySQL 查询中检查两个返回节点 ID 是否相等..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:04:35.787

MYSQL 中没有任何内容可以检查查询中的某些内容是否相等（从不同查询返回的结果）
您的要求是业务逻辑。因此，您获取第一个查询的返回值和第二个查询的返回值，并在您的代码中进行比较！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:07:56.923

好吧，你可以尝试这样的事情：

```
SELECT *
FROM (SELECT r.nid
      FROM recipe_node_ingredient r,
           recipe_ingredient ri
      WHERE r.`ingredient_id` = ri.id
      AND   ri.name = 'carrot'
      AND   r.nid NOT IN (SELECT r.nid
                          FROM recipe_node_ingredient r,
                               recipe_ingredient ri
                          WHERE r.`ingredient_id` = ri.id
                          AND   ri.name = 'salt')) subSelect1,
     (SELECT nid
      FROM taxonomy_index 
        JOIN taxonomy_term_data USING (tid)
      WHERE name IN ('Desert."','Indian')
      GROUP BY nid
      HAVING COUNT(*) > 1) subSelect2
WHERE subSelect1.nid = subSelect2.nid 
```

如果您没有从此查询中得到结果，则 nid 不匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:25:18.600

如何使用 FULL OUTER JOIN 来比较结果？

```
SELECT
  nid, 
  IFNULL(from_recipe, 0) from_recipe, 
  IFNULL(from_taxonomy, 0) from_taxonomy
FROM
  (
    SELECT   r.nid, 1 AS from_recipe
    FROM     recipe_node_ingredient r
    WHERE    EXISTS (
               SELECT 1 FROM recipe_ingredient WHERE id = r.ingredient_id AND name = 'carrot'
             )
             AND NOT EXISTS (
               SELECT 1 FROM recipe_ingredient WHERE id = r.ingredient_id AND name = 'salt'
             )
  ) AS recipe
  FULL OUTER JOIN (
    SELECT   ti.nid, 1 AS from_taxonomy
    FROM     taxonomy_index td
             INNER JOIN taxonomy_term_data ti ON td.tid = it.tid
    WHERE    td.name IN ('Desert."', 'Indian')
    GROUP BY ti.nid 
    HAVING   COUNT(*) > 1
  ) AS taxonomy ON recipe.nid = taxonomy.nid
WHERE
  IFNULL(from_recipe, 0) + IFNULL(from_taxonomy, 0) = 1 
```

将`WHERE from_recipe + from_taxonomy = 1`返回仅在一个查询中的行。用于`= 2`查看另一半或完全关闭以查看哪个是哪个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:04:39.047

```
select if(select r.nid from recipe_node_ingredient r,recipe_ingredient ri where
r.`ingredient_id` = ri.id and ri.name = 'carrot' and r.nid 
NOT IN (select r.nid from recipe_node_ingredient r,recipe_ingredient ri
where  r.`ingredient_id` = ri.id and ri.name = 'salt') == (SELECT nid FROM  taxonomy_index JOIN taxonomy_term_data
 USING (tid) WHERE name IN ('Desert."', 'Indian')
 GROUP BY nid HAVING COUNT(*) > 1),'true','false') 
```

# jquery - jQuery循环动画跳过动画

> ID：10510587
> 
> 赞同：1
> 
> 时间：2012-05-09T06:01:00.070
> 
> 标签：jquery

首先，我尝试创建一个像这样的[小提琴](http://jsfiddle.net/KrisBraun/2ReGy/1/)循环动画：

```
function rotator() {
  $('#foo').stop(true).delay(500).fadeIn('slow').delay(2500).fadeOut('slow',rotator);
}
$('#foo').hide();
rotator();​ 
```

这似乎跳过了第一次迭代后的延迟。

所以我尝试了这个[小提琴](http://jsfiddle.net/KrisBraun/bW4GX/)：

```
function rotator() {
  $('#foo').stop(true).delay(500).fadeIn('slow').delay(2500).fadeOut('slow',rotator);
}
$('#foo').hide();
rotator();​ 
```

在这种情况下，fadeIn 似乎在第一次迭代后直接跳转到显示。

我难住了。所有这些操作都应该是 fx 队列的一部分。即使没有，我也无法解释为什么淡入会变成表演。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:07:00.153

这是否是您正在寻找的更多影响：

```
function rotator() {
    $( '#foo' ).delay( 500 ).fadeIn( 'slow', function() {
        $( this ).delay( 2500 ).fadeOut( 'slow', rotator );
    });
}
$('#foo').hide();
rotator(); 
```

更新：图我应该解释为什么你的代码有问题。在 jQuery 中，动画是异步的（即非阻塞的）。因此，您的代码同时对动画进行了排队，但只是在将来某个时候才运行。您必须在回调中运行以下动画，以确保在前一个动画完成之前它不会触发。

另一个更新：刚刚尝试了以下代码，它似乎工作。试一试：

```
function rotator() {
    $( '#foo' ).delay( 500 ).fadeIn( 'slow' ).delay( 2500 ).fadeOut( 'slow', rotator );
}
$('#foo').hide();
rotator(); 
```

试一试，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:05:48.673

第一个想法是淡入/淡出是异步的..所以你会立即进入下一个链式命令。

例如，在您的第一组代码中，如果您这样做：

```
function rotator() {
    $('#foo').stop(true).delay(500).fadeIn('slow', function(){
        $('#foo').delay(2500).fadeOut('slow',rotator);
    })
}
$('#foo').hide();
rotator();​ 
```

你会看到你的 2500 毫秒延迟。

# c# - 如何序列化数组？

> ID：10510589
> 
> 赞同：7
> 
> 时间：2012-05-09T06:01:13.757
> 
> 标签：c#, protobuf-net

症状：没有为类型定义序列化程序：System.Array

由于所有 C# 数组都继承自 Array 类，我认为这在 ProtoBuf-net 中是有效的

```
[ProtoMember(1)]
public Array SomeKindOfArray = new int[]{1,2,3,4,5};

[ProtoMember(2)]
public List<Array> SomeKindOfList = new List<Array>(); 
```

我应该向 RuntimeTypeModel 注册 Array 吗？

```
m.Add(typeof (Array), true);  // does not seem to help 
```

尝试：

```
new int[]{1,2,3,4} // works

(object)new int[] { 1, 2, 3, 4 } // does not work

(Array)new int[] { 1, 2, 3, 4 } // does not work 
```

另一种可能的解决方案（现在找不到 SO url）：

有一个基类型类项目的列表。

包装每种类型。例如

```
class TheBase{}

class ArrayOfInt { public int[] value;} 
```

然后将成为转换为包装器列表和从包装器列表转换的一种。有没有更简单的前进方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T06:12:42.363

protobuf-net 真的很想了解您正在序列化的数据；拥有 是不够的`Array`，因为它不能映射到任何 protobuf 定义。重复数据（从概念上讲，数组）在 protobuf 规范中具有非常简洁和非常具体的表示，这**不允许**在个人基础上说“[x]”的额外空间。在 protobuf 中，"of [x]" 预计是已经知道并*提前修复的*。

所以：

```
[ProtoMember(1)]
public int[] AnIntegerArray {get;set;}

[ProtoMember(2)]
public Customer[] ACustomerArray {get;set;} 
```

会正常工作。但`Array`根本行不通。

根据它的重要性，可能还有其他选项，例如（您可能想要调整名称！）：

```
[ProtoContract]
[ProtoInclude(1, typeof(DummyWrapper<int>)]
[ProtoInclude(2, typeof(DummyWrapper<Customer>)]
public abstract class DummyWrapper {
    public abstract Type ElementType {get;}
}
[ProtoContract]
public class DummyWrapper<T> : DummyWrapper {
    [ProtoMember(1)]
    public T[] TheData {get;set;}

    public override Type ElementType {get { return typeof(T); } }
} 
```

和：

```
[ProtoMember(1)]
public DummyWrapper TheData {get;set;} 
```

会工作，我怀疑（未经测试）。有了类，protobuf-net 可以使用一些额外的空间来实现继承（从技术上讲，protobuf 规范也不支持继承 - 这是 protobuf-net 挤入的垫片）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T06:12:25.063

你为什么不尝试像这样创建一个新的 ISerializable 对象

```
[Serializable()]    
public class ArrayOfInt : ISerializable 
{
    public Array ....etc 
```

并从接口 ISerializable 覆盖 GetObjectData()

# c# - LINQ DateTime 聚合与 GroupBy 和 Group By

> ID：10510591
> 
> 赞同：0
> 
> 时间：2012-05-09T06:01:54.220
> 
> 标签：c#, linq, datetime, linq-to-objects

我有一个间隔 30 分钟的 TimeInterval 数据列表，如下所示：

```
List<TimeInterval> testData = new List<TimeInterval>();
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-09 6:00:00 AM"), End = DateTime.Parse("2012-05-09 6:30:00 AM"), Value = 1 });
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-09 6:30:00 AM"), End = DateTime.Parse("2012-05-09 7:00:00 AM"), Value = 1 });
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-09 7:00:00 AM"), End = DateTime.Parse("2012-05-09 7:30:00 AM"), Value = 1 });
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-09 7:30:00 AM"), End = DateTime.Parse("2012-05-09 8:00:00 AM"), Value = 1 });
.....
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-10 7:00:00 AM"), End = DateTime.Parse("2012-05-10 7:30:00 AM"), Value = 20 });
testData.Add(new TimeInterval() { Start = DateTime.Parse("2012-05-10 7:30:00 AM"), End = DateTime.Parse("2012-05-10 8:00:00 AM"), Value = 10 });
................... up to N number of N number of years.

public class TimeInterval
    {
       public DateTime Start { get; set; }
       public DateTime End { get; set; }
       public decimal Value { get; set; }

    } 
```

有人可以建议将上述数据汇总到的最佳方法：

> 1.  小时
> 2.  天
> 3.  星期
> 4.  月
> 5.  年

[我在这里](https://stackoverflow.com/questions/10498831/linq-aggregate-30-minute-interval-to-hour)尝试了建议的解决方案，但似乎都没有满足上述要求。谢谢你的帮助。

对于上面给出的示例，Hour 的预期结果是：

```
Lists Of:

TimeInterval() { Start = DateTime.Parse("2012-05-09 6:00:00 AM"), End = DateTime.Parse("2012-05-09 7:00:00 AM"), Value = 2 }
TimeInterval() { Start = DateTime.Parse("2012-05-09 7:00:00 AM"), End = DateTime.Parse("2012-05-09 8:00:00 AM"), Value = 2 }
...
TimeInterval() { Start = DateTime.Parse("2012-05-10 7:00:00 AM"), End = DateTime.Parse("2012-05-10 8:00:00 AM"), Value = 2 } 
```

对于 Days，它将是当天的总数。对于一周，它将是一整周的总计等。基本上对给定聚合类型的值求和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:59:15.240

```
List<Interval> CreatHourIntervals(DateTime start, int count, int intervalValue, int val)
{
    return     Enumerable.Range(0,count)
               .Select(x=> new Interval
                               {
                                 StartDate = start.AddHours(x*intervalValue), 
                                 EndDate = start.AddHours((x + 1)*intervalValue),
                                 value = val
                               }
                         ).ToList(); 
} 
```

**描述**

**开始：**是间隔中第一项的开始日期。

**count：**是你想要的间隔数。

**intervalValue：**是间隔之间的差异，例如在小时的情况下，这可以在 1,12 之间变化（也可以是小数）。例如，如果您将其设置为`2`，则每个间隔长度为`2`小时。

对于其他类型，您可以自己编写相关方法。

# javascript - 浏览器通过浏览器扩展通过文件输入标签自动选择文件

> ID：10510593
> 
> 赞同：3
> 
> 时间：2012-05-09T06:02:05.520
> 
> 标签：javascript, browser, google-chrome-extension, firefox-addon

我想
通过 java 脚本通过 File 输入标签 <input type=file> 自动选择一个文件？

我知道这是安全问题，通常不允许。

但这是否允许通过扩展程序或任何浏览器中的任何形式，

因为我正在从事一个
需要发布具有多个值的表单的自动化项目，它具有上传功能，该功能首先上传文件然后发布表单（kijiji.ca）

并且需要这样做。

不需要特定于浏览器的任何具有自动化功能的浏览器，如 chrome、Firefox

# 进一步要求

嗨，弗拉基米尔，我让它按照弗拉基米尔在扩展范围中的建议工作。

你能告诉我是否需要自动选择多个文件我应该设置什么值。

我试着设置这个

```
input.value = '"D:\Temp\step1.jpg" "D:\Temp\step2.jpg" "D:\Temp\step3.jpg"' 
```

但它不接受它。虽然我可以将它设置为单个图像并且它需要它..

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:18:53.223

Firefox 扩展允许设置`input.value`属性，所以这样的事情会起作用：

```
input.value = "c:\\autoexec.bat";
input.form.submit(); 
```

但是，当使用附加 SDK 时，内容脚本可能没有必要的权限（需要测试）。在这种情况下，需要使用[chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/tutorials/chrome.html)并直接访问网页，而不是通过内容脚本。

至于 Chrome，那里的扩展程序无法访问文件系统 - 因此适用于网页的安全限制也适用于扩展程序。允许扩展设置文件上传小部件的值将是一个安全问题。所以我很确定这是不可能的。

# jquery - Jquery验证消息和规则不适用于所有字段

> ID：10510597
> 
> 赞同：1
> 
> 时间：2012-05-09T06:02:17.010
> 
> 标签：jquery, jquery-validate

我正在尝试添加超过 2 条规则和消息，但它不起作用..

```
$("#updateMemberProfileForm").validate({
            submitHandler: function(form) {
            },rules: {
                "member.memberphone" : {
                    required: true,
                    phoneUS: true
                },
                "member.memberfirstname" : {
                    required: true
                },
                "member.memberlastname" : {
                    required: true
                },
                "member.membermiddlename" : {
                    required: true
                }
            },
            messages:{
                "member.memberphone" : {
                    required: " * Phone no. required"
                },
                "member.memberfirstname" : {
                    required: " * firstname required"
                },
                "member.memberlastname" : {
                    required: " * lastname required"
                },
                "member.membermiddlename" : {
                    required: "* middlename required"
                }
            },
            errorElement: "span"
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:10:59.360

这样做

```
$("#AdditionalDetailsForm").validate({
        rules: {
            ignore: ":not(:visible)",
            Account_Number: {
                required: true
            },
            BaseJurisdiction: {
                required: true
            }
        },
        messages: {
            Account_Number: {
                required: "<br/> Please enter the field"
            },
            BaseJurisdiction: {
                required: "<br/> Please enter the field"
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:22:56.707

我认为您在消息中遗漏了某些内容。这是代码..

```
$("#updateMemberProfileForm").validate({
            submitHandler: function(form) {
            },rules: {
                "member.memberphone" : {
                    required: true,
                    phoneUS: true
                },
                "member.memberfirstname" : {
                    required: true
                },
                "member.memberlastname" : {
                    required: true
                },
                "member.membermiddlename" : {
                    required: true
                }
            },
            messages:{
                "member.memberphone" : {
                    required: " * Phone no. required",
                    phoneUS : "* Enter valid phone no."
                },
                "member.memberfirstname" : {
                    required: " * firstname required"
                },
                "member.memberlastname" : {
                    required: " * lastname required"
                },
                "member.membermiddlename" : {
                    required: "* middlename required"
                }
            },
            errorElement: "span"
        }); 
```

# ruby - Ruby OptionParser 抛出 MissingArgument

> ID：10510598
> 
> 赞同：0
> 
> 时间：2012-05-09T06:02:32.397
> 
> 标签：ruby, command-line-arguments, optionparser

让我先说两件事。

1) 我已经在 Stack Overflow 和 Google 上搜索过这个答案。
2) 今天是我第一次尝试弄乱 Ruby。

好吧酷。所以我正在尝试构建一个 Ruby 脚本，我可以使用 Homebrew 使用单个命令安装 MySQL、PHP、Redis 和 xdebug。这个命令看起来像：

`./phpserver.rb --with-php --with-mysql --with-xdebug --with-redis`

但是，当我运行上述命令时，我收到“缺少的参数：--with-redis”。如果我通过“--with-redis=1.0”强制使用 Redis 版本或者我不包含该选项，则此错误消失。

这些选项都不是强制性的（是的，我知道脚本还没有处理零选项）。

我完全被难住了，如果有一个明显的答案你想把我链接到那很好。我为我缺乏 Ruby 知识而道歉，这是一个帮助我首先进入 Ruby 的辅助项目。

这是我的脚本：

```
#!/usr/bin/ruby
prefix = `brew --prefix`.gsub("\n", "");
$LOAD_PATH << prefix+"/Library/Homebrew/"

# Required scripts
require 'optparse'
require 'global'

# Handle Ctrl+C
trap('INT') {
  opoo "Installation failed. Please try again!"
  exit!
}

# Start big try statement
begin

# Options
options = {}
OptionParser.new do |opts|
  banner = "\nUsage: phpserver.rb [options]\n\n"

  opts.banner = banner
  opts.on("--with-mysql=VERSION", "Install MySQL with VERSION",
          "Run `brew versions mysql` to see available versions.") do |v|
    options[:mysql] = v
  end
  opts.on("--with-php", "Install PHP") do |v|
    options[:php] = v
  end
  opts.on("--with-xdebug", "Install xdebug for PHP debugging") do |v|
    options[:xdebug] = v
  end
  opts.on("--with-redis=VERSION", "Install Redis with VERSION",
          "Run `brew versions redis` to see available versions.") do |v|
    options[:redis] = v
  end
  opts.on_tail("-h", "--help", "Show this message") do
    puts opts
    puts "\n"
    exit
  end
end.parse!

# Need to run brew update first?
ohai "Making sure Homebrew is up to do."
versions = `brew versions --compact a2ps`
if versions.include? "Please `brew install git` first"
  ohai "Need to install Git before the script can run; we'll do that for you."
  system 'brew install git'

  ohai "Now we need to pull down the Homebrew repository, we'll do that for you as well."
  system 'brew update'
elsif versions.include? "Please `brew update"
  ohai "Homebrew needs to be updated, we'll take care of that."
  system 'brew update'
end

# Tap them kegs!
if !File.directory?("#{prefix}/Library/Taps/josegonzalez-php")
  ohai "Tapping josegonzalez/homebrew-php"
  if system 'brew tap josegonzalez/homebrew-php'
    oh1 "Success!"
  else
    opoo "Failed to tap the keg. Please report this."
  end
else
  oh1 "The josegonzalez/homebrew-php keg has already been tapped. Continuing..."
end

# Installing MySQL?
if options[:mysql] != nil
  ohai "Installing MySQL."

  revert = false
  command = false
  if options[:mysql] != true
    versions = `brew versions mysql`

    errors = []
    versions.each do |version|
      if version.start_with? options[:mysql]
        revert = true
        command = version.gsub(options[:mysql], "").gsub(prefix+"/", "").strip!
        break
      else
        errors << "- "+version
      end
    end

    if command == false
      error = "Invalid MySQL version. The available versions for MySQL are:\n\n"
      error += errors.join()
      opoo error
    else
      %x(cd #{prefix} && #{command})
    end
  end

  system 'brew install mysql'

  if revert
    command = command.split(" ").last
    %x(cd #{prefix} && #{command})
  end
end

# Installing PHP?
if options[:php] != nil
  ohai "Installing PHP."

  install = 'brew install php';
  if options[:mysql] != nil
    install += ' --with-mysql';
  end
  if options[:php] == true or options[:php].to_f < 5.4
    install += ' --with-suhosin';
  end

  system install
end

# Installing xdebug?
if options[:xdebug] != nil
  ohai "Installing xdebug."
  system 'brew install xdebug-php'
end

# Installing Redis?
if options[:redis] != nil
  ohai "Installing Redis."
  system 'brew install redis'
end

rescue OptionParser::NeedlessArgument
  opoo "Invalid arguments. Run `./phpserver.php -h` for help."
rescue StandardError => message
  if !["exit"].include? message
    opoo message
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:26:45.853

您也应该收到有关缺少论点的投诉`--with-mysql`。来自[精美手册](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html#method-i-make_switch)：

> **长款开关：**
> 
> 指定采用强制、可选或无参数的长样式开关。它是以下形式的字符串：
> 
> ```
> "--switch=MANDATORY" or "--switch MANDATORY"
> "--switch[=OPTIONAL]"
> "--switch" 
> ```

所以你想使用`--with-mysql[=VERSION]`和类似的东西：

```
opts.on("--with-mysql[=VERSION]", "Install MySQL with VERSION",
        "Run `brew versions mysql` to see available versions.") do |v|
  options[:mysql] = v
end
#...
opts.on("--with-redis[=VERSION]", "Install Redis with VERSION",
        "Run `brew versions redis` to see available versions.") do |v|
  options[:redis] = v
end 
```

`options[:redis] = nil`如果你说`--with-redis`，`options[:redis] = '1.0'`如果你说，那会给你`--with-redis=1.0`。

# wpf - 如何在 WPF 中定义私有网格

> ID：10510613
> 
> 赞同：1
> 
> 时间：2012-05-09T06:04:25.053
> 
> 标签：wpf, private

当我在 xaml 中定义一个网格并使用 x:Name （如下面的代码）时，网格似乎是“内部的”。我可以在同一个项目中将它与 x:Name--'testGrid' 一起使用。

```
 <Grid x:Name="testGrid"></Grid> 
```

我的意思是为什么不将网格定义为“私有”，因为它是“内部的”，那么我们可以向它添加/删除子级，甚至可以改变它的行为？这对于“密封”类是否安全？

感谢您的时间和答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:22:51.220

使用[FieldModifier](http://msdn.microsoft.com/en-us/library/aa970905.aspx)属性。

**编辑**

仔细阅读文档后，没有办法将字段设为*private*。它是*公共*的（Public）或*内部*的（NonPublic）。

所以这不回答你的问题......

无论如何，您（或您的团队）不应该故意弄乱您自己的课程，所以可能*internal*虽然不完美，但“足够好”？

# ios - 动画 CALayer 锚点

> ID：10510616
> 
> 赞同：1
> 
> 时间：2012-05-09T06:04:43.283
> 
> 标签：ios, cocoa, core-animation, transform, calayer

我已经成功地为图层的位置和变换（旋转）设置了动画。

现在，我需要为锚点设置动画，但所有尝试都失败了！即使我这样做：

```
2012... App[6437:403] layer: 1, KeyPath: anchorPoint, fromValue: NSPoint: {1.05, 0.5}, toValue: NSPoint: {1.05, 0.5}, Duration: 2.5 
```

这是在为图层设置动画之前卡住的 NSLog。我得到的结果是图层在 X 轴上向左移动太远，然后回来......并重复（因为自动反转已打开）。

关于图层层次结构的注意事项：SuperLayer 有三个子图层，我将在其上应用动画。

为什么？锚点应该如何动画？

我的代码：

```
 NSArray* subKeyPath     = [keyPaths objectAtIndex:tag];
    NSArray* subToValue     = [toValues objectAtIndex:tag];
    NSArray* subDuration    = [durations objectAtIndex:tag];

    NSEnumerator* keyPathsEnum  = [subKeyPath objectEnumerator];
    NSEnumerator* toValuesEnum  = [subToValue objectEnumerator];
    NSEnumerator* durationsEnum = [subDuration objectEnumerator];

    NSString* keyPath;
    NSNumber* toValue;
    NSNumber* duration;

    while ((keyPath = [keyPathsEnum nextObject]) && (toValue = [toValuesEnum nextObject]) && (duration = [durationsEnum nextObject])) {
        CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:keyPath];

        id offsetToValue;
        if ([keyPath hasPrefix:@"position"]) {
        //I removed the position animation, since animating the anchorPoint should suffice
        } else if ([keyPath hasPrefix:@"anchorPoint"]) {
            //This was when I used anchorPoint.x float value         = [[subLayer valueForKeyPath:keyPath] floatValue] - ([toValue floatValue]/[[subLayer contents] size].width);
            offsetToValue       = [NSNumber valueWithPoint:CGPointMake(1.05, 0.5)];
            keyPath             = [keyPath substringToIndex:[keyPath length]-2];
        } else {
            offsetToValue       = toValue;
        }

...

        animation.toValue       = offsetToValue;
        animation.duration      = [duration floatValue];
        animation.fillMode      = kCAFillModeForwards;
        animation.repeatCount   = INFINITY;
        animation.autoreverses  = YES;
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

        [subLayer addAnimation:animation forKey:keyPath];

        //update the model

    } 
```

我尝试为“anchorPoint.x”keyPath 设置动画，结果相同:(

最后一点，我正在编写一个可可应用程序，但是在可可和可可触摸上设置 X 值的动画应该完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:01:41.090

你不会相信这一点（好像我从一开始就和你坐在一起）..

在没有设置`fromValue`. 但是，为锚点设置动画需要我将锚点设置`fromValue`为初始值！

```
animation.fromValue = [subLayer valueForKeyPath:keyPath]; 
```

# encoding - cygwin 的某些输出无法以错误的编码读取？

> ID：10510618
> 
> 赞同：2
> 
> 时间：2012-05-09T06:05:02.910
> 
> 标签：encoding, cygwin, character

我在 Win7-64 位上使用 cygwin，并将“zh_CN.UTF-8”作为默认语言环境设置。有时，cygwin 的某些输出无法通过错误的编码读取，如下所示：

```
[junit] ▒▒▒▒: ▒Ҳ▒▒▒▒▒▒޷▒▒▒▒▒▒▒▒▒ can't 
```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-18T07:39:53.860

虽然 sharajava 自己找到了解决方案，但不得不说，这个解决方案至少对我来说不是很可取。问题是如果您将文本的终端选项（`mintty`实际上是“CharSet”）更改为“GBK”，屏幕上会显示什么 UTF-8 字符？它们将是混乱的、不可读的代码。我在 VIM 上进行了实验，无论是中文欢迎文本还是包含中文字符的 UTF-8 编码源代码都显示为不可读的代码。这对我或大多数人来说是不可接受的。

最后，我想出了一种方法来绕过 Windows 命令提示符（即`cmd.exe`）的缺陷，并启用`mintty`运行 DOS 命令而不会受到混乱代码的影响。这是我的解决方案，可能会有所帮助。

测试环境：
操作系统：Win7 64位简体中文
Cygwin：64位
命令提示符：默认代码页936

配置：

*   将 Cygwin 的语言环境设置`zh_CN.UTF-8`为大多数人想要的
*   添加`Locale=zh_CN`并`Charset=UTF-8`使用`.minttyrc`UTF `mintty`-8 作为输出编码
*   添加`cmd /c chcp 65001`到`.bashrc`

现在您可以直接在 , 等`ipconfig`DOS命令上运行，甚至可以与`taskkill`,等linux 命令一起运行。每次登录 bash 时，它都会告诉您输出编码已暂时更改为 UTF-8 的意思。`help.exe``format.com``mintty``less``grep``Active code page: 65001``cmd.exe`

当 code-page of`cmd.exe`更改为 65001 时，`cmd.exe`将不再使用中文作为提示文本语言（改为英文），也不支持中文目录。这是一个缺陷，`cmd.exe`与它无关`mintty`。不知何故，设法输出了cp65001无法输出的`mintty`汉字。`cmd.exe`我无法解释这一点，无论如何，它有效。

要设置 cygwin 的语言环境，您可以将以下代码添加到您的`.bashrc`：

```
export LC_ALL=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8
export LANG=zh_CN.UTF-8 
```

另请参阅：
[Windows 命令行中的 Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how/388500#388500)
[我的应用程序打印国际字符，但我只看到灰色框](https://cygwin.com/faq-nochunks.html#faq.using.weirdchars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:42:42.223

[http://cygwin.com/faq-nochunks.html#faq.using.weirdchars](http://cygwin.com/faq-nochunks.html#faq.using.weirdchars)

只是这里的一些汉字造成的。

更改文本的终端选项，选择字符集为“GBK”。有用。

# mercury - 水星安装

> ID：10510629
> 
> 赞同：5
> 
> 时间：2012-05-09T06:06:47.467
> 
> 标签：mercury

[我已经从http://www.mercury.csse.unimelb.edu.au/download/release.html](http://www.mercury.csse.unimelb.edu.au/download/release.html)下载了 Mercury 11.07.1

并且还在我的 Windows 7 PC 上安装了 cygwin。但是我不知道如何安装水银。有没有人可以帮助我的安装指南？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T01:58:28.653

如果您解压缩 Mercury 下载文件，您会在新目录中找到十几个 README 文件。

有一个叫做 README.Cygwin，还有一些其他的 Windows 相关文件。这些应包含帮助您入门的说明和信息。（用记事本打开）

# jquery - 使用 jquery 从控制台（FIREBUG）获取值

> ID：10510630
> 
> 赞同：2
> 
> 时间：2012-05-09T06:06:49.497
> 
> 标签：jquery, console, firebug

是否可以使用 jQuery 读取 console.log 的输出？我的意思是，如果我使用console.log 在控制台（FIREBUG）中获得一些价值，有没有办法使用某种方式在jquery 函数中获得它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:09:00.180

不，但您可以简单地用自定义方法替换该方法。

```
var old_console_log = console.log;
var logged = [];
console.log = function() {
    var args = Array.prototype.slice.call(arguments);
    logged.push(args);
    old_console_log.apply(console, args);
} 
```

# java - 匹配字符串与包含冒号的正则表达式

> ID：10510633
> 
> 赞同：1
> 
> 时间：2012-05-09T06:07:20.043
> 
> 标签：java

我尝试匹配从不同文件解析的不同日期格式。例如，一种日期格式是：“Thu, 12 Nov 2009 14:17:44 -0000”

当我尝试将此字符串与第一个正则表达式匹配时，我得到一个真实的结果，当我使用第二个时，我得到一个错误的结果。

```
[A-Za-z]{3},\\s+\\d{2}\\s+[A-Za-z]{3}\\s+\\d{2}.*   (1\. regex)
[A-Za-z]{3},\\s+\\d{2}\\s+[A-Za-z]{3}\\s+\\d{2}:.*  (2\. regex) 
```

在我看来，两个正则表达式都应该匹配上述日期格式。我的失败在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:13:28.073

您似乎忘记了 4 位数的年份，因此第二个正则表达式不正确。

你的第一个正则表达式的最后一部分是匹配的前两位数字，`2009`然后是后面的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:15:42.077

我怀疑最后一部分“\s+\d{2}:.*”是为了匹配“14:”，但你忘记了年份。所以解析器需要一个“：”，但在 2009 年找到了第二个零。

你需要的是这样的：

```
[A-Za-z]{3},\\s+\\d{2}\\s+[A-Za-z]{3}\\s+\\d{4}\\s+\\d{2}:.*  (2\. regex) 
```

（我认为应该通过:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:23:38.850

你忘记了*年份*：

`"[A-Za-z]{3},\\s+\\d{2}\\s+[A-Za-z]{3} \\p{Digit}{4} (\\p{Digit}{2}:){2}[0-9][0-9].*";`

您还可以测试不同格式的*小时*。

# buffer - 配置缓冲区列表来存储非交错的音频数据？

> ID：10510639
> 
> 赞同：0
> 
> 时间：2012-05-09T06:07:53.017
> 
> 标签：buffer, core-audio, audiounit, audio-processing, extaudiofile

我有一个回调，我试图从音频图中的远程 I/O 单元捕获音频。在我的回调中，我有`AudioBufferList`一个`AudioUnitRender`函数，我需要存储来自两个通道的非交错数据。

**这是上下文的代码片段：**

```
//audiounit render function inside of a callback    
OSStatus status;
        status = AudioUnitRender(THIS.ioUnit,    
                                 ioActionFlags,
                                 inTimeStamp,
                                 0,
                                 inNumberFrames,
                                 &bufferList);

//want to initialize and configure bufferList to store non-interleaved data from both channels
...

//write audio data to disk 
    OSStatus result;
        if (*ioActionFlags == kAudioUnitRenderAction_PostRender) {
            result =  ExtAudioFileWriteAsync(THIS.extAudioFileRef, inNumberFrames, &bufferList);
            if(result) printf("ExtAudioFileWriteAsync  %ld \n", result);}
        return noErr; 
```

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:05:03.477

您应该创建一个`float**`数组并在您的渲染回调中延迟初始化它，使其具有与您传递的相同的缓冲区大小（根据需要重新调整它）。从那里您可以简单地复制到您需要的通道并在另一个通道中使用该数据（我猜您正在制作某种需要在通道之间进行交互的效果）。

不幸的是，这必然是一个全局变量，但由于 iOS 中对 AudioUnits 的限制，您可能只需要忍受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:35:31.427

您的缓冲区列表应初始化为

```
myBufferList.mNumberBuffers = 2; 
```

有关工作示例，请查看 Apple 的 MixerHost 示例。

# asp.net-mvc-3 - 输入标签上的 MVC3 ValidationFor（没有 EditorFor）

> ID：10510641
> 
> 赞同：1
> 
> 时间：2012-05-09T06:07:59.403
> 
> 标签：asp.net-mvc-3, editorfor

我有一个使用 IEnumerable 强类型的 MVC3 页面，它在页面上显示标题列表。在页面顶部，虽然我想要一个小表单，但我可以获取新标题的一些初始详细信息（开始日期、结束日期），然后将它们发送到编辑视图。

我让这一切都在使用顶级表单

接下来我想添加验证（基本上开始日期和结束日期是必填字段）并且我试图使用 ValidationMessageFor ，这就是事情开始失败的地方。我试图做一些不同的 ValidationMessageFor(x => (new Header().StartDate) 和类似的......然后走上了尝试改变

问题似乎是我无法将验证添加到

有推荐的方法来做这样的事情吗？有没有办法将验证添加到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:59:08.233

What I think you are looking for is Html.BeginCollectionItem. Check out this: [http://blog.codeville.net/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.codeville.net/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

# c - 多核CPU是否同时调度同一进程的多个线程

> ID：10510644
> 
> 赞同：-3
> 
> 时间：2012-05-09T06:08:09.823
> 
> 标签：c, linux

我从很久以前就有很大的问题。基本上我想知道是否有 N 个进程在 LINUX 系统上运行并且每个线程都有多个线程（在多核 CPU 上）。

在 LINUX os 中是否有一种可能性，即 linux 在同一实例上在同一实例上运行同一进程的多个线程。我有疑问，因为 linux 线程共享公共虚拟空间可能是 linux 必须同步线程，这可能是操作系统的负担，这就是我的想法。

如果 linux 不在同一时间安排相同的进程线程，我认为它可以提供更好的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:13:34.633

当然可以。如果不是这样，那么除了弥补程序员的弱点之外，应用程序首先是多线程的就没有什么意义了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:15:48.617

如果您有一个具有 N 个内核的系统，您可以通过并行化（划分）应用程序工作负载来利用它，比如说分成 m 个任务或线程。通过这样做，系统可以同时执行 n 个核之间的 m 个任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:28:26.150

是的，这当然是支持的，你怀疑这是一个相当复杂的负担。有关（很多）更多详细信息，请参阅此出色（非常详细）的内存管理概述： http: [//lwn.net/Articles/250967/](http://lwn.net/Articles/250967/)

# wpf - 突出显示在 xamdatagrid 中添加/更新的记录

> ID：10510657
> 
> 赞同：2
> 
> 时间：2012-05-09T06:09:23.723
> 
> 标签：wpf, wpf-controls, infragistics, xamdatagrid

我正在使用 XamDatagrid，

我使用 BindingList 来填充网格。

关于在背景上添加/更新记录时如何突出显示记录的任何想法。试图开发一个应用程序来持续监听正在发布的数据并将它们显示在 UI 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:49:16.727

去年年初，我在 Infragistics 论坛上发布了一个示例，该示例在数据更改时突出显示单元格： [http ://forums.infragistics.com/forums/p/50428/266192.aspx#266192](http://forums.infragistics.com/forums/p/50428/266192.aspx#266192)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:31:44.677

最简单的方法是将属性添加到您的数据项，例如。IsUpdated、IsAdded 然后创建一个cellstyle 触发器来监听这些属性。

# .net - MSI.DLL 函数加载 mscoree.dll 和 mscorwks.dll

> ID：10510664
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:10:19.297
> 
> 标签：.net, windows-installer

我正在使用 win32 控制台应用程序，而与 dotnet 框架没有任何依赖关系。

我正在使用来自 C:\Windows\System32\MSI.dll 的 MsiOpenPackage API。在执行 API 时，它会将 MSCOREE.dll 加载到我的进程中。

以下行将 mscorwks.dll 加载到我的进程中。

```
MsiDoAction(hInstall,_T("InstallValidate")); 
```

`MsiDoAction`是来自 MSI.dll 的其他 API。

如果我在没有安装点框架的干净 Windows XP 操作系统（服务包 2）中运行应用程序，那么这些 DLLS 不会加载到我的进程中，但我的应用程序工作正常。

如果系统中安装了 dotnet 框架，有谁知道为什么这些 mscorwks.dll 和 MSCOREE.dll 会加载到我的进程中？

我在纯 win32 控制台应用程序中的进程，与 dotnet 框架没有任何依赖关系。在启动进程时，这两个 dll 没有加载到我的进程中。它在执行函数`MsiOpenPackage`时`MsiDoAction`从 MSI.DLL 加载。

请帮助我如何停止将这些 DLL 加载到我的进程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:40:06.227

这可能是 Windows Installer 准备好支持操作 .NET 程序集（例如将程序集安装到 GAC）。我怀疑防止这种情况的唯一方法是在没有 .NET 框架的机器上运行。如果您根本不希望它在您的主进程中，也许您应该在辅助进程中完成您的 Msi 工作。

# c++ - 读取二进制文件时使用的变量问题

> ID：10510667
> 
> 赞同：0
> 
> 时间：2012-05-09T06:10:41.517
> 
> 标签：c++, binaryfiles

我正在编写一些串行端口代码，需要将文件的内容（二进制）读取到变量中。从[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)的“二进制文件”示例开始，我尝试打开一个 .jpg 文件：

```
#include <iostream>
#include <fstream>
using namespace std;

ifstream::pos_type size;
char * memblock;

int main () {
  ifstream file ("example.jpg", ios::in|ios::binary|ios::ate);
  if (file.is_open())
  {
    size = file.tellg();
    memblock = new char [size];
    file.seekg (0, ios::beg);
    file.read (memblock, size);
    file.close();

    cout << memblock << endl;

    delete[] memblock;
   }
 else cout << "Unable to open file";
 return 0;
} 
```

但是，控制台中仅打印前 4 个字符（32 位）。

但特别奇怪的是，将 ostream::write() 与所谓的错误变量“memblock”一起使用可以完美地工作：

```
ofstream fileOut ("writtenFile.jpg",ios::out|ios::binary);
fileOut.write(memblock,size);
fileOut.close(); 
```

即它创建一个新的.jpg 文件。

所以我的问题是为什么 memblock 变量*似乎*只包含前 4 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:14:33.650

您的二进制数据中可能有一个 0。`cout`是一个文本流，所以`memblock`看成一个字符串。如果它到达一个空字符，那么它认为字符串已经完成。

有关输出二进制数据的一些帮助引脚，请参阅此内容： [如何使 cout 以二进制模式运行？](https://stackoverflow.com/q/5654067/918124)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:17:04.003

嗯。快速浏览您引用的页面表明作者对 C++ 中的 IO 了解不多。避免它，因为它所说的大部分内容都是错误的。

其余的：`.jpg`不是文本格式，不能简单地输出到`cout`. 当然，当您使用`<<`时，输出会在第一个 `'\0'`字符处停止，但各种二进制数据可能会导致奇怪的效果：数据可能被解释为重新定位光标的转义序列、锁定键盘（实际上发生在我身上一次）等.这些问题即使你使用也会出现`std::cout.write()`（不会停在`'\0'`字符上）。如果您想可视化数据，最好的选择是某种二进制转储。（我使用类似下面的东西来可视化大块数据：

```
template <typename InputIterator>
void
process(
    InputIterator       begin,
    InputIterator       end,
    std::ostream&       output = std::cout )
{
    IOSave              saveAndRestore( output ) ;
    output.setf( std::ios::hex, std::ios::basefield ) ;
    output.setf( std::ios::uppercase ) ;
    output.fill( '0' ) ;
    static int const    lineLength( 16 ) ;
    while ( begin != end ) {
        int                 inLineCount = 0;
        unsigned char       buffer[ lineLength ] ;
        while ( inLineCount != lineLength && begin != end ) {
            buffer[inLineCount] = *begin;
            ++ begin;
            ++ inLineCount;
        }
        for ( int i = 0 ; i < lineLength ; ++ i ) {
            static char const *const
                                separTbl [] =
            {
                " ", " ", " ", " ",
                "  ", " ", " ", " ",
                "   ", " ", " ", " ",
                "  ", " ", " ", " ",
            } ; 
            output << separTbl[ i ] ;
            if ( i < inLineCount ) {
                output << std::setw( 2 )
                       << static_cast< unsigned int >(buffer[ i ] & 0xFF) ) ;
            } else {
                output << "  " ;
            }
        }
        output << " |" ;
        for ( int i = 0 ; i != inLineCount ; ++ i ) {
            output << (i < lengthRead && isprint( buffer[ i ] )
                       ?   static_cast< char >( buffer[ i ] ) 
                       :   ' ') ;
        }
        output << '|' << std::endl ;
    }
} 
```

（您还需要读入一个`std::vector<char>`，因此您不必担心释放内存。）

# ubuntu - ubuntu 11.04版本如何修改文件系统中root权限

> ID：10510672
> 
> 赞同：-2
> 
> 时间：2012-05-09T06:11:10.313
> 
> 标签：ubuntu, ubuntu-11.04

最近安装了11.04版本的ubuntu。想在文件系统的根目录中创建一个文件夹，但权限被拒绝。尝试使用 chown 和 chmod 但没有结果。

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:17:55.730

采用`sudo mkdir /yourdir`

sudo 表示您将以 root 权限执行此命令

或使用`sudo chmod`...相同的原则

# c# - 如何将 DataContext 定义从代码隐藏移动到 XAML？

> ID：10510673
> 
> 赞同：1
> 
> 时间：2012-05-09T06:11:14.843
> 
> 标签：c#, wpf, xaml, datacontext

我在代码隐藏中定义了一个包含属性的对象，并且希望将该对象设置为 xaml 中的数据上下文。

```
namespace WpfApplication4
{

    public partial class MainWindow : Window
    {
        public EquipInfo equip1;

        public MainWindow()
        {
            InitializeComponent();

            equip1 = new EquipInfo();
            //  setting here works fine but i want to do in xaml
            //textBox1.DataContext = equip1; 
        }
    }
} 
```

这是xaml代码..

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Text="{Binding Path=PIN}" Height="23" 
                 HorizontalAlignment="Left" Margin="172,208,0,0" 
                 Name="textBox1" VerticalAlignment="Top" Width="120" />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:31:00.507

您可以通过 XAML 将 DataContext 设置为公共属性。盲人就如何做到这一点给出了一个很好的例子。

您在 Post 中所做的不是设置 DataContext，而是将控件的 Text 属性绑定到窗口的属性。这仅在设置了 DataContext 时才有效。如果您不想执行 MVVM（不过我建议这样做），另一种方法是在 Binding 中引用特定元素：

1.) 将成员更改为 AutoProperty 或类似

```
public EquipInfo equip1 {get;set;} 
```

2.) 给你的窗口起个名字

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="myWin"
    Title="MainWindow" Height="350" Width="525"> 
```

2.) 按实例名称访问窗口属性

```
<TextBox Text="{Binding ElementName=myWin, Path=equip1.PIN}"/> 
```

另一方面，使用[MVVM](http://de.wikipedia.org/wiki/Model_View_ViewModel)**确实**会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:21:45.540

当您在代码隐藏中创建您的装备信息类时，为什么不在那里设置数据上下文？

不过你可以在 xaml 中创建一个数据上下文（那时你不需要代码隐藏的东西）

```
<TextBox Text="{Binding Path=PIN}">
     <TextBox.DataContext>
         <local:equip1/>
      </TextBox.DataContext>
 </TextBox> 
```

但请查看 MVVM 模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-01T16:09:40.507

*当您在代码隐藏中创建您的装备信息类时，为什么不在那里设置数据上下文？*

MVVM 的全部意义在于使用视图模型代理将 UI 与后面的代码分开。如果你要引用 ui 元素来设置它的数据上下文，你也可以引用它来设置它的值而忘记 mvvm。

# pdf-generation - 从 word 模板创建 PDF

> ID：10510675
> 
> 赞同：1
> 
> 时间：2012-05-09T06:11:22.700
> 
> 标签：pdf-generation, apache-poi

我有这个要求：

1.  使用 poi.jar 从模板生成 Word 文档。生成的文档将具有动态值以及所需的格式。

2.  将生成的文档原样转换为 PDF。我不想在生成 PDF 时再次应用任何格式。

是否有任何可用的开源 Java API 来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:58:30.337

[OpenOffice.org](http://www.openoffice.org/)提供了一个可以为您完成这项工作的[API 。](http://www.openoffice.org/api/)

请注意，这个问题已经在 StackOverflow（和网络）上回答了很多次，例如看这个[答案。](https://stackoverflow.com/questions/3022376/how-to-convert-ms-doc-to-pdf)

# android - Facebook 连接不工作

> ID：10510676
> 
> 赞同：0
> 
> 时间：2012-05-09T06:11:28.370
> 
> 标签：android, facebook

我已经在我的应用程序中集成了 Facebook。它适用于三星 Galaxy、HTC Desire、三星 Nexus 等许多手机。但它不适用于**AT&T Infuse**及其 OS 2.2.1。单击 Fb 登录按钮后，它转到 Facebook 登录屏幕（顶部的蓝色条，带有加载框的白色空白主屏幕）。在那里呆了大约 2 秒钟，然后没有任何消息就翻了回来。我再次按下 Facebook 登录并得到相同的行为。我有本机 fb 应用程序 android。Facebook 是否对 Locale、TimeZone 或其他任何类型的限制？请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:17:37.307

嗨，请替换**Facebook.java中的以下行**

```
public void authorize(Activity activity, final DialogListener listener) {
//      authorize(activity, new String[] {}, DEFAULT_AUTH_ACTIVITY_CODE,listener);//original
        authorize(activity, new String[] {}, FORCE_DIALOG_AUTH, listener);
    }

public void authorize(Activity activity, String[] permissions,
            final DialogListener listener) {
//      authorize(activity, permissions, DEFAULT_AUTH_ACTIVITY_CODE, listener); //original
        authorize(activity, permissions, FORCE_DIALOG_AUTH, listener);
    } 
```

使用此代码。可能是工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:22:08.390

问题是由于**Android 中的 Single Sign On**造成的。因此，您需要创建**HashKey**并使用 Facebook 帐户注册您的 App Key。参考请查看此链接。

[Facebook Android 中的登录错误问题](https://stackoverflow.com/questions/10299990/app-login-page-not-shown-android-facebook/10300641#10300641)。

# c# - 测试 IObservable 'dispatcher'

> ID：10510679
> 
> 赞同：2
> 
> 时间：2012-05-09T06:11:34.597
> 
> 标签：c#, system.reactive

我有几种不同“类型”的传入事件，我想将它们分派给不同的 IObservable，作为属性公开，但无需多次订阅底层 UDP。

```
public IObservable<TimeEvent> TimeEventChannel { get; private set; }
public IObservable<SpaceEvent> SpaceEventChannel { get; private set; }

Subject<TimeEvent> _TimeSubject = new Subject<TimeEvent>();
Subject<SpaceEvent> _SpaceSubject = new Subject<SpaceEvent>();

public EventDispatcher(IChannelListener listener)
{
    TimeEventChannel = _TimeSubject;
    SpaceEventChannel = _SpaceSubject;
    listener.Data.Subscribe(SwitchEvent);
}

private void SwitchEvent(AbstractEvent e)
{
    switch(e.EventType)
    {
        case EEventType.Time: _TimeSubject.OnNext(e as TimeEvent); break;
        case EEventType.Space: _SpaceSubject.OnNext(e as SpaceEvent); break;
    }
} 
```

（`listener.Data`是一个`IObservable<AbstractEvent>`）。

我遇到的问题是试图找出如何单独测试它（不连接到 UDP）

```
var spaceEvent = new SpaceEvent();
var udpSubject = new Subject<AbstractEvent>();
var mock = new Mock<IChannelListener>();
mock.SetupGet(listener => listener.Data).Returns(udpSubject);
var dispatcher = new EventDispatcher(mock.Object);

subject.OnNext(spaceEvent);
var result = dispatcher.SpaceEventChannel.SingleOrDefault(); 
```

就目前而言，最后一行的测试块，我很确定这是因为有些东西我从根本上不了解它是如何`Subject`工作的。

问题：我在想什么错？我应该如何测试这个特定的用例？我是否也在向后实施调度程序？

* * *

以防万一，这就是`ChannelListener`目前真实的样子：

```
public ChannelListener(UdpClient udpClient, FrameInterpreter frameInterpreter)
{
    Data = Observable.Defer(() => 
    {
        IPEndPoint ep = null;
        return Observable.FromAsyncPattern<byte[]>(
                    udpClient.BeginReceive,
                    i => udpClient.EndReceive(i, ref ep)
                )()
                .Select(bytes => frameInterpreter.ParseFrame(bytes));
    });
}

public IObservable<AbstractEvent> Data { get; private set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:35:16.740

我认为问题在于：

```
subject.OnNext(spaceEvent);
var result = dispatcher.SpaceEventChannel.SingleOrDefault(); 
```

尝试将其替换为：

```
AbstractEvent result = null;
dispatcher.SpaceEventChannels.Subscribe(e => result = e);
subject.OnNext(spaceEvent);
// ... 
```

问题是，当您调用 subject.OnNext 时，它会立即通过“管道”* *运行。因此，下一行的 SingleOrDefault 实际上锁定了文本，因为没有任何值“到达”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:00:51.217

您遇到的主要问题很简单。这一行：

```
listener.Data.Subscribe(SwitchEvent); 
```

返回一个`IDisposable`. 立即超出范围并被处置。所以`SwitchEvent`从不开火。您只需要将其保存在类`IDisposable`中的实例变量中`EventDispatcher`。

```
private IDisposable _subscription;

public EventDispatcher(IChannelListener listener)
{
    TimeEventChannel = _TimeSubject;
    SpaceEventChannel = _SpaceSubject;
    _subscription = listener.Data.Subscribe(SwitchEvent);
} 
```

我也会认真考虑改变`EventDispatcher`接受一个，`IObservable<AbstractEvent>`而不是`IChannelListener`如果这就是它真正需要的。你可以想象这也将是多么容易测试！

# asp.net - 复选框不会选中

> ID：10510680
> 
> 赞同：0
> 
> 时间：2012-05-09T06:11:42.347
> 
> 标签：asp.net, gridview, checkbox

我将此代码放在我的 中`gridview_SelectedIndexChanged`，但复选框仍然不会检查。如果我在gridview中选择的行之一上面有字母，我将如何更改代码`O`，复选框会自动检查？

```
protected void gvAuto_SelectedIndexChanged(object sender, EventArgs e)
{
    txtSurname.Text = gvAuto.SelectedRow.Cells[0].Text;
    txtFN.Text = gvAuto.SelectedRow.Cells[1].Text;
    txtOrg.Text = gvAuto.SelectedRow.Cells[2].Text;
    txtAdd.Text = gvAuto.SelectedRow.Cells[3].Text.Replace("&nbsp;", "");
    txtPosition.Text= gvAuto.SelectedRow.Cells[4].Text.Replace("&nbsp;", "");
    txtTelNum1.Text = gvAuto.SelectedRow.Cells[5].Text.Replace("&nbsp;", "");
    txtTelNum2.Text = gvAuto.SelectedRow.Cells[6].Text.Replace("&nbsp;", "");
    txtTelNum3.Text = gvAuto.SelectedRow.Cells[7].Text.Replace("&nbsp;", "");
    txtMobileNum.Text = gvAuto.SelectedRow.Cells[8].Text.Replace("&nbsp;", "");
    txtEmail1.Text = gvAuto.SelectedRow.Cells[9].Text.Replace("&nbsp;", ""); ;
    txtEmail2.Text = gvAuto.SelectedRow.Cells[10].Text.Replace("&nbsp;", "");
    txtEmail3.Text = gvAuto.SelectedRow.Cells[11].Text.Replace("&nbsp;", "");

    if (gvAuto.SelectedRow.Cells[12].Text.Replace("&nbsp;", "") == "")
    {
        cbCategory1.Checked = false;
    }
    else
    {
        cbCategory1.Checked = true;
    }

    txtValidate2.Text = gvAuto.SelectedRow.Cells[13].Text.Replace("&nbsp;", "");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:41:12.600

如果要测试该值`O`，可以将其缩短为：

```
//...
cbCategory1.Checked = (gvAuto.SelectedRow.Cells[12].Text == "O");
//... 
```

`cbCategory1`从您的问题来看，您的子控件`GridView`是否需要不同的解决方案有点不清楚。

尝试调试并进入您的事件处理程序并检查单元格值是否读取正确。

# c#-4.0 - iis 7 + http 自定义处理程序错误：无法加载文件或程序集系统找不到指定的文件

> ID：10510681
> 
> 赞同：1
> 
> 时间：2012-05-09T06:11:44.393
> 
> 标签：c#-4.0, iis-7, httphandler, filenotfoundexception

Windows vista 32 位 - C# - .NET 4 - sqlite - IIS 7

我正在构建一个小项目，其中包含一个自定义 HTTP 处理程序，用户可以在其中请求 XML 文件，项目将生成该文件并将其发送给用户。它应该足够灵活，可以发送其他东西，例如 json。

一切都很顺利，直到我不得不部署处理程序。我创建了一个库 (dll) 文件，其中包含提供所请求信息的逻辑。我打开了 IIS 管理器，并为调试 bin 文件创建了一个虚拟目录（后来我把它变成了一个应用程序。它没有任何区别）。

我已经遵循了无数的示例和教程，例如：

我从这个开始：http: [//support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)

[http://msdn.microsoft.com/en-us/library/bb515343.aspx](http://msdn.microsoft.com/en-us/library/bb515343.aspx)

msdn.microsoft.com/en-us/library/46c5ddfy.aspx

但没有运气。正如您可能已经阅读的那样，我没有使用任何 asp.net 网站，即使我确实有一个已添加到 bin 文件夹中的**web.config ，它看起来像这样：**

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true" />
    <directoryBrowse enabled="false" />
    <handlers accessPolicy="Read, Script, Execute">
      <add name="LigoManagedHandler" path="*" verb="*" type="Ligo.Service, Ligo" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
  </system.webServer>
</configuration> 
```

当我尝试在浏览器中运行处理程序时，出现以下错误：

```
Could not load file or assembly 'Ligo' or one of its dependencies. The system cannot find the file specified. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'Ligo' or one of its dependencies. The system cannot find the file specified. 
```

我在 IIS 管理器中尝试了很多可能的组合以使其正常工作（'httphandlers'、'经典模式'等等......）但我真的被卡住了。我在互联网上找到的信息没有多大帮助。

**我做错了什么或错过了什么才能让它发挥作用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:26:49.780

这个咆哮中的某些东西引发了一个想法，我偶然发现了答案。

所有这些教程中说放在`type="ClassName, AssemblyName"`Web.Config 中的 Handlers 部分的那一行是完全错误的。

我所做的只是将其更改为`type="AssemblyName.ClassName"`，并且在我创建的网站项目和 Web 应用程序项目中，一切都开始工作了。

我在集成模式下运行 IIS 7.5，所以 YMMV。

克雷格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:19:31.147

我想通了。我必须制作一个 asp.net 网站项目并将我的 dll 添加为对该项目的引用。

我读了这个帖子，它提供了这个在互联网上不清楚的信息。

[http://forums.asp.net/t/1088861.aspx/1?What+cause+the+quot+Could+not+load+type+quot+problem+](http://forums.asp.net/t/1088861.aspx/1?What+causes+the+quot+Could+not+load+type+quot+problem+)

应该说明没有aspnet网站项目就不可能制作httphandler。还是我弄错了？网上的例子不正确！或提供的信息太少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T23:32:41.150

我知道，这是一个旧线程。但是，几天来我一直在寻找答案，但没有找到一个明确的答案。所以，万一有人遇到类似的情况。

您可以将自定义 Http 处理程序创建为独立的类库项目并在 IIS 中使用它。

在 IIS 上使用 ASP4 集成模式添加新应用程序。将您编译的 DLL 放入**bin**文件夹中（这是我一直缺少的）。似乎很明显它应该在那里；花了一些时间来解决这个问题。:)

网络配置：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
  <system.webServer>
    <handlers>
      <add verb="*" path="*.ogg" name="test" type="Namespace.Classname"/>
    </handlers>
  </system.webServer>
</configuration> 
```

希望这可以帮助。干杯。

# select - Knockoutjs（2.1.0 版）：将布尔值绑定到选择框

> ID：10510683
> 
> 赞同：24
> 
> 时间：2012-05-09T06:11:54.883
> 
> 标签：select, knockout.js, boolean, knockout-2.0

我想使用 KO v2.1.0 将布尔值绑定到选择元素，但显然它不能按预期工作。

HTML 代码：

```
<select data-bind="value: state">
    <option value="true">On</option>
    <option value="false">Off</option>
</select> 
```

JavaScript 代码：

```
var model = {
    state: ko.observable(false)
};

ko.applyBindings(model) 
```

所以我希望选择框以初始值进入“关闭”位置，`false`但它处于“开启”状态。如果我输入 state:`ko.observable("false")`这将是正确的，但这不是我想要的。任何人都知道如何将布尔值绑定到带有 KO 的选择框？

jsfiddle：[https ://jsfiddle.net/greenlaw110/Ajm58/](https://jsfiddle.net/greenlaw110/Ajm58/)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-10T13:32:43.757

这是我们从这个论坛[帖子](https://groups.google.com/d/topic/knockoutjs/_-NzcCQreQ8/discussion)中探索的一个选项：

```
ko.bindingHandlers.booleanValue = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var observable = valueAccessor(),
            interceptor = ko.computed({
                read: function() {
                    return observable().toString();
                },
                write: function(newValue) {
                    observable(newValue === "true");
                }                   
            });

        ko.applyBindingsToNode(element, { value: interceptor });
    }
}; 
```

因此，我们使用自定义绑定在 UI 和我们的视图模型之间注入一个可写的计算 observable。这只是直接在您的视图模型中执行此操作的替代方法。

示例：[https ://jsfiddle.net/rniemeyer/H4gpe/](https://jsfiddle.net/rniemeyer/H4gpe/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T06:50:16.157

发生这种情况是因为 select 使用的是字符串，而不是任何阶段的布尔值。您应该尝试使用 ko.computed( ... ) 值。

在此处查看详细信息：[https ://jsfiddle.net/Ajm58/3/](https://jsfiddle.net/Ajm58/3/)

```
<select id="testSelect" data-bind="value: stateString">
    <option value="true">true</option>
    <option value="false">false</option>
</select>
​

var model = {
    state: ko.observable(false)
};

model.stateString = ko.computed({
    read: function() { return (this.state() ? "true" : "false"); },
    write: function(value) { this.state(value == "true"); }
}, model);

ko.applyBindings(model);

setTimeout(function() {
    model.state(true);    
}, 1500);

setTimeout(function() {
    $("#testSelect").val("false");
}, 3000); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-03T15:03:26.207

比其他答案容易得多：使用`options`-Binding。

答案在下面那种冗长的表达式中：

```
<select data-bind="options: [{text: 'On', value: true}, {text: 'Off', value: false}], value: lala1, optionsValue: 'value', optionsText: 'text'"> 
```

通过使用选项绑定，您几乎可以将所有内容分配给选项的值。我猜，将显式值绑定到选项绑定是相当不常见的，但在这种 2-way 情况下，这是合理的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T06:38:46.077

我想我得到了答案，将数字“1”和“0”分别放入选项值：

```
<select data-bind="value: state">
    <option value="1">On</option>
    <option value="0">Off</option>
</select> 
```

见[https://jsfiddle.net/greenlaw110/Ajm58/2/](https://jsfiddle.net/greenlaw110/Ajm58/2/)

# functional-programming - 代数数据类型的概念是否类似于 OO 语言中的类定义？

> ID：10510685
> 
> 赞同：6
> 
> 时间：2012-05-09T06:12:05.133
> 
> 标签：functional-programming, algebraic-data-types

这两个概念都允许创建新的数据类型。我能看到的唯一区别是，在函数式语言中，可以对代数数据类型执行模式匹配。但是 OO 语言没有类似的简洁特性。这是一个准确的说法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T13:49:01.323

[代数数据类型](https://stackoverflow.com/a/5917133/83805)之所以如此命名，是因为它们形成了“初始代数”，

```
+ represents sum types (disjoint unions, e.g. Either).
• represents product types (e.g. structs or tuples)
X for the singleton type (e.g. data X a = X a)
1 for the unit type ()
and μ for the least fixed point (e.g. recursive types), usually implicit. 
```

从这些运算符可以构造所有常规数据类型。代数数据类型还支持参数多态性——这意味着它们可以用作任何底层类型的容器，并具有静态的安全保证。此外，ADT 提供了用于引入和消除数据类型的统一语法（通过构造函数和模式匹配）。例如

```
-- this defines a tree
data Tree a = Empty | Node a (Tree a) (Tree a)

-- this constructs a tree
let x = Node 1 (Node 2 Empty) Empty

-- this deconstructs a tree
f (Node a l r) = a + (f l) + (f r) 
```

代数数据类型的丰富性和统一性，以及它们不可变的事实，将它们与 OO 对象区分开来，后者主要是：

*   仅代表产品类型（因此没有递归或求和类型）
*   不支持模式匹配
*   是可变的
*   不支持参数多态

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T06:39:08.857

我可以看到代数数据类型和 OO 样式类之间的三个主要区别，不包括（im）可变性，因为它会有所不同。

*   代数数据类型允许求和以及乘积，而 OO 风格的类只允许乘积。
*   OO 风格的类允许您将复杂数据项与其可接受的操作捆绑在一起，而代数数据类型则不允许。
*   代数数据类型不区分传递给构造函数的数据和存储在结果值中的数据，而 OO 风格的类可以（或可以）。

我故意从该列表中遗漏的一件事是子类型化。虽然绝大多数 OO 语言允许您对（非最终、非密封、当前可访问）类进行子类化，而绝大多数一般 ML 系列函数式语言不允许，但显然可以在假设的情况下完全禁止继承OO（或至少类 OO）语言，同样可以在代数数据类型中产生子类型和超类型；有关后者的有限示例，请参阅[O'Haskell 上的此页面](http://www.nt.ntnu.no/users/haugwarb/Programming/OHaskell/o_haskell_tutorial.html#sect4)，该页面已由[Timber接替](http://timber-lang.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T07:58:41.470

类不仅仅是一个类型定义——大多数 OO 语言中的类实际上是提供各种松散相关功能的厨房水槽功能。

特别是，类充当一种模块，为您提供数据抽象和命名空间。代数数据类型没有内置此功能，模块化通常作为单独的正交功能（通常是模块）提供。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T08:07:36.647

从某种意义上说，人们可以这样看。每种语言只有这么多的机制来创建用户定义的类型。在函数式（ML，Haskell 风格）语言中，唯一的一个就是创建 ADT。（Haskell 的 newtype 可以看作是 ADT 的退化案例）。在 OO 语言中，它是类。在过程语言中它是`struct`or `record`。

不言而喻，用户定义数据类型的语义因语言而异，而且从范式#1 中的语言到范式#2 中的语言更是如此。@Pharien's Flame 已经概述了典型的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-25T23:28:47.730

> **代数数据类型的概念是否类似于 OO 语言中的类定义？**
> 
> 在函数式语言中，可以对代数数据类型执行模式匹配。但是 OO 语言没有类似的简洁特性。这是一个准确的说法吗？

这是其中的一部分。

正如 Andreas 所说，类是从 Simula 派生的静态类型的面向对象语言（如 C++、Java 和 C#）中的厨房水槽功能。类是万事通，但在这方面没有任何特征：它们解决了许多问题。

将 vanilla ML 和 Haskell 与 C++、Java 和 C# 中的 OO 进行比较，您会发现：

1.  类可以包含其他类，而代数数据类型可以相互引用，但不能包含彼此的定义。
2.  类层次结构可以任意深，而代数数据类型只有一级深：类型包含其类型构造函数，仅此而已。
3.  新类可以从旧类派生，因此类是可扩展类型，而代数数据类型通常（但不总是）是封闭的。

所以 ADT 并不真正“类似于”类，因为它们只解决一个特定问题：深一层的类层次结构。从这个意义上说，我们可以看到两个近似的观察结果：

1.  ADT 需要组合而不是继承。
2.  类使扩展类型变得容易，但很难扩展成员函数集，而 ADT 使扩展类型上的函数变得容易，但很难扩展类型。

您还可以查看 GoF 设计模式。它们已经使用 C++ 中的类来表达。功能等价物并不总是 ADT，而是诸如 lambda 函数而不是命令模式和高阶函数（如`map`and`fold`而不是访问者模式等）。

# html - IE/FF 中缺少 Form Textarea Resize Icon/Handle？

> ID：10510689
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:12:28.807
> 
> 标签：html, css, twitter-bootstrap

我有一个带有文本区域的表单并在 css 中定义了 resize:both。

但是，IE 和 Firefox 上缺少调整大小手柄/图标，但在 Chrome 中可见。我该如何解决这个问题，或者这些浏览器不支持它。

请注意，我使用 Twitter Bootstrap CSS 作为我的 CSS 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:37:52.240

在 Firefox 14.0.1 中，当您以任何方式（颜色、宽度、样式等）更改文本区域上的 CSS 边框属性时，句柄就会消失。如果将其保留为默认值，则句柄是可见的。可能是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:48:55.490

查看[支持表](http://caniuse.com/#feat=css-resize)。IE 尚不支持。Firefox 中存在支持，我的测试刚刚证实了这一点——但与 Chrome 相比，该句柄不太明显：

![FF上具有调整大小句柄的Textarea](../Images/3e5ed4102413682e34e32a112f4ccf0d.png)

也许您的 CSS 代码中有其他内容会覆盖该设置，以影响 Chrome 而不是 Firefox 的方式。

# file - 如何检查文件或目录是否存在？

> ID：10510691
> 
> 赞同：150
> 
> 时间：2012-05-09T06:12:59.710
> 
> 标签：file, go

我想检查`./conf/app.ini`我的 Go 代码中是否存在文件，但我找不到这样做的好方法。

我知道 Java 中有一个 File: 方法`public boolean exists()`，如果文件或目录存在，则返回 true。

但是如何在 Go 中做到这一点？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-05-09T06:23:12.000

```
// exists returns whether the given file or directory exists
func exists(path string) (bool, error) {
    _, err := os.Stat(path)
    if err == nil { return true, nil }
    if os.IsNotExist(err) { return false, nil }
    return false, err
} 
```

编辑添加错误处理。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2012-05-09T06:15:36.980

你可以使用这个：

```
if _, err := os.Stat("./conf/app.ini"); err != nil {
    if os.IsNotExist(err) {
        // file does not exist
    } else {
        // other error
    }
} 
```

请参阅： http: [//golang.org/pkg/os/#IsNotExist](http://golang.org/pkg/os/#IsNotExist)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-11-16T04:20:33.093

更多的仅供参考，因为我环顾了几分钟，认为我的问题可以快速搜索。

> 如何检查路径是否代表 Go 中的现有目录？

这是我的搜索结果中最受欢迎的答案，但在这里和其他地方，解决方案只提供存在检查。要检查是否`path`代表现有目录，我发现我可以很容易地：

```
path := GetSomePath();
if stat, err := os.Stat(path); err == nil && stat.IsDir() {
    // path is a directory
} 
```

我的部分问题是我希望`path/filepath`包包含 isDir() 函数。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-06-28T07:35:32.500

检查文件是否存在的简单方法：

```
if _, err := os.Stat("/path/to/whatever"); os.IsNotExist(err) {
    // path/to/whatever does not exist
}

if _, err := os.Stat("/path/to/whatever"); err == nil {
    // path/to/whatever exists
} 
```

资料来源：

*   [mattes在](https://stackoverflow.com/users/2142441/mattes)[2014 年 8 月 6 日](https://gist.github.com/mattes/d13e273314c3b3ade33f)提出了这个要点
*   [Sridhar Ratnakumar](https://stackoverflow.com/users/55246/sridhar-ratnakumar)在 2012 年 9 月 21 日给出了[这个答案](https://stackoverflow.com/questions/12518876/how-to-check-if-a-file-exists-in-go/12518877#12518877)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T22:14:22.323

我使用以下函数检查我的目录是否有任何错误。它与以前的答案非常相似，但我认为不嵌套`if`s 会使代码更清晰。它用于从目录路径[`go-homedir`](https://github.com/mitchellh/go-homedir)中删除并返回更好的错误消息，但如果您不需要它们的功能，很容易将它们删除。`~`[`pkg/errors`](https://github.com/pkg/errors)

```
// validateDirectory expands a directory and checks that it exists
// it returns the full path to the directory on success
// validateDirectory("~/foo") -> ("/home/bbkane/foo", nil)
func validateDirectory(dir string) (string, error) {
    dirPath, err := homedir.Expand(dir)
    if err != nil {
        return "", errors.WithStack(err)
    }
    info, err := os.Stat(dirPath)
    if os.IsNotExist(err) {
        return "", errors.Wrapf(err, "Directory does not exist: %v\n", dirPath)
    }
    if err != nil {
        return "", errors.Wrapf(err, "Directory error: %v\n", dirPath)

    }
    if !info.IsDir() {
        return "", errors.Errorf("Directory is a file, not a directory: %#v\n", dirPath)
    }
    return dirPath, nil
} 
```

此外，重复@Dave C 的评论，如果您检查目录是否存在的原因是将文件写入其中，通常最好尝试打开它以处理之后的错误：

```
// O_EXCL - used with O_CREATE, file must not exist
file, err := os.OpenFile(fileName, os.O_RDWR|os.O_CREATE|os.O_EXCL, 0666)
if err != nil {
    return errors.WithStack(err)
}
defer file.Close() 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-01-23T02:52:02.480

有一种简单的方法可以检查您的文件是否存在：

```
if _, err := os.Stat("./conf/app.ini"); err != nil {
    if os.IsNotExist(err) {
        ..... //Shows error if file not exists
    } else {
       ..... // Shows success message like file is there
    }
} 
```

# c++ - 如何修改boost多索引的只读元素？

> ID：10510692
> 
> 赞同：2
> 
> 时间：2012-05-09T06:13:22.623
> 
> 标签：c++, boost, boost-multi-index

我刚刚注意到我无法在 boost 多索引容器元素中进行更改。这是真的？（基于以下简化代码）查看“更新”功能：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/random_access_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/member.hpp>
namespace sim_mob
{
enum TrafficColor
{
    Red =1,             ///< Stop, do not go beyond the stop line.
    Amber = 2,          ///< Slow-down, prepare to stop before the stop line.
    Green = 3,          ///< Proceed either in the forward, left, or right direction.
    FlashingRed = 4,    ///future use
    FlashingAmber = 5,  ///future use
    FlashingGreen = 6   ///future use
};
//Forward declarations
class Link
{
public:
    int aa;
};

//////////////some bundling ///////////////////
using namespace ::boost;
using namespace ::boost::multi_index;

typedef struct
{
    sim_mob::Link *LinkTo;
    sim_mob::Link *LinkFrom;
//  ColorSequence colorSequence;
    TrafficColor currColor;
} linkToLink;

typedef multi_index_container<
    linkToLink,
    indexed_by<                                                                    // index
        random_access<>,//0
        ordered_non_unique< member<linkToLink,sim_mob::Link *, &linkToLink::LinkTo> >,  // 1
        ordered_non_unique< member<linkToLink,sim_mob::Link *, &linkToLink::LinkFrom> >  // 2
    >
> links_map;
class Phase
{
public:
    typedef links_map::nth_index_iterator<1>::type LinkTo_Iterator;
    Phase(double CycleLenght,std::size_t start, std::size_t percent): cycleLength(CycleLenght),startPecentage(start),percentage(percent){
    };

    void update(double lapse)
    {
        links_map_[0].currColor = Red;
    }

    std::string name;
private:
    sim_mob::links_map links_map_;

};
}//namespace

int main()
{
    sim_mob::Phase F(100,70,30);
} 
```

无需通过整个程序。请注意，在更新方法中，我收到此错误： multiIndex$ c++ exp2.cpp exp2.cpp: In member function 'void sim_mob::Phase::update(double)': exp2.cpp:69:29: error : 在只读对象中分配成员 'sim_mob::linkToLink::currColor'

我刚刚在[boost 教程](http://www.boost.org/doc/libs/1_35_0/libs/multi_index/doc/tutorial/indices.html) 中读到迭代器只授予 const 访问权限。我该如何解决这个问题？谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T06:43:43.027

在多索引容器中更改元素的三种不同方式。您可以使用`links_map_.replace(iterator, new_value)`新元素替换现有元素。您可以使用`links_map_.modify(iterator, unaryFunctionObject)`修改器对象来更改元素。最后，如果成员变量不属于任何索引，您可以将其声明为`mutable`并直接更改它。在您的示例中，后者应该可以正常工作。

对于其他两种方式，请查看成员函数的规范和`replace`Boost.MultiIndex[文档](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/reference/ord_indices.html)。`modify`

**编辑：**在您的特定情况下，方法`mutable`可能如下所示：

```
struct linkToLink
{
    sim_mob::Link* LinkTo;
    sim_mob::Link* LinkFrom;
    // simplify write operations to this variable if used in a multi-index
    // container - bypassing the const-ness. This is possible, because the
    // variable is not part of any index.
    mutable TrafficColor currColor;
}; 
```

# php - 尝试使用 PHP cURL 从网站获取 HTML 不起作用

> ID：10510694
> 
> 赞同：0
> 
> 时间：2012-05-09T06:13:28.447
> 
> 标签：php

我正在尝试编写一个脚本，可以从我学校的日程搜索网页中检索 HTML。当我使用浏览器访问该网页时，我可以正常访问该网页，但是当我尝试使用 cURL 使其工作时，它会从重定向页面获取 HTML。当我改变

```
CURLOPT_FOLLOWLOCATION 
```

从真到假的变量，它只输出一个带有标题的空白页。

作为参考，我的 PHP 代码是

```
<?php
$curl_connection = curl_init('https://www.registrar.usf.edu/ssearch/');

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($curl_connection, CURLOPT_HEADER, true);
curl_setopt($curl_connection, CURLOPT_REFERER, "https://www.registrar.usf.edu/");

$result = curl_exec($curl_connection);

print $result;

?> 
```

我试图从 cURL 获取 HTML 的网站是[https://www.registrar.usf.edu/ssearch/](https://www.registrar.usf.edu/ssearch/)或[https://www.registrar.usf.edu/ssearch/search.php](https://www.registrar.usf.edu/ssearch/search.php)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:41:19.193

我又添加了 2 行，它现在保存了 cookie，这些 cookie 决定在您尝试抓取 shedule 的页面时是否重定向您。

```
$curl_connection = curl_init();
$url = "https://www.registrar.usf.edu/ssearch/search.php";
curl_setopt($curl_connection, CURLOPT_URL, $url);
curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt ($curl_connection, CURLOPT_COOKIEJAR, 'cookie.txt');//cookiejar to dump cookie infos.
curl_setopt ($curl_connection, CURLOPT_COOKIEFILE, 'cookie.txt');//cookie file for further reference from the site
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl_connection, CURLOPT_HEADER, true);
curl_setopt($curl_connection, CURLOPT_REFERER, "https://www.registrar.usf.edu/");
$result = curl_exec($curl_connection);
echo $result; 
```

另外，我还没有看到有人输入网址`curl_init`。

这是饼干：

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

www.registrar.usf.edu   FALSE   /   FALSE   0   PHPSESSID   eied78t0v1qlqcop0rdk214361
www.registrar.usf.edu   FALSE   /ssearch/   FALSE   1336718465  cookie_test cookie_set 
```

如果您想调试不工作的 curl 东西，请从开始，`var_dump(curl_getinfo($curl_connection));`下一个要检查的是 `curl_error($curl_connection);`

# com - 在wix中注册com dll

> ID：10510697
> 
> 赞同：9
> 
> 时间：2012-05-09T06:13:53.097
> 
> 标签：com, wix, wix3.5, wix3, heat

如果不是自注册。那么我们如何在使用 WIX 安装时执行 COM dll 注册？

根据[教程](http://wix.tramontana.co.hu/tutorial/com-expression-syntax-miscellanea/com-applications)，我使用了 ComPlusApplication 示例（非 .net dll）。但它不起作用。它无法注册。

我可以从命令行成功使用 regsvr32 注册。我读到了关于不为注册 com dll 创建自定义操作的信息。

那么最好的方法是什么？如果我们需要使用heat，我们在哪里编写命令并将结果wxs添加到主项目中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T13:57:00.333

我强烈建议使用 Wix 工具 Heat.exe 来收集注册 com 组件所需的所有数据，然后在 .wxs 文件中引用片段，如下所示：

```
 <ComponentGroupRef Id="FooBar.dll" /> 
```

或将其包含在您的 .wxs 文件中，如下所示：

```
 <?include FooBar.dll.wxi?> 
```

此方法使您可以完全控制 Com 组件的注册/注销期间发生的情况。

但是，您仍然可以在 Wix 项目中使用 Regsvr32。但它依赖于 COM 组件中 RegisterServer/UnregisterServer 函数的正确实现

```
 <CustomAction Id="RegisterFooBar" 
                  Directory="INSTALLDIR" 
                  ExeCommand='regsvr32.exe /s "[INSTALLDIR]FooBar.dll"'> 
    </CustomAction> 
    <CustomAction Id="UnregisterFooBar" 
                  Directory="INSTALLDIR" 
                  ExeCommand='regsvr32.exe /s /u "[INSTALLDIR]FooBar.dll"'> 
    </CustomAction> 
```

然后将您的操作添加到安装序列中。

```
 <InstallExecuteSequence> 
        <Custom Action="RegisterFooBar" After="InstallFinalize">NOT Installed</Custom>
        <Custom Action="UnregisterFooBar" After="InstallFinalize">REMOVE="ALL"</Custom>
    </InstallExecuteSequence> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T22:21:41.557

您可以尝试使用 heat.exe 程序，然后在您的 wix 代码中引用该片段。

heat.exe 文件 -gg -out

如：

heat.exe 文件 my.dll -gg -out my.wxs

附言。添加 -gg 开关将生成 guid，否则如果您想手动添加它们可以跳过它。

# .net - 如何将此 Backus–Naur 形式表达式转换为正则表达式 (.Net)？

> ID：10510700
> 
> 赞同：6
> 
> 时间：2012-05-09T06:13:59.423
> 
> 标签：.net, regex, bnf

表达式为：

```
N | ( 1 { A | B | C | D | E1 | E2 | E3 } ) 
```

表示描述符“N”或一个或多个列出的描述符，不重复。

我得到的最好的是：

```
@"^(N|(A|B|C|D|E1|E2|E3){1,})$" 
```

但这并不能防止重复。

```
@"^(N|(A{0,1}B{0,1}...)$" 
```

这可以防止重复，但随后需要元素的特定顺序，这也不是很好。

有任何想法吗？

（我实际上不确定 bnf 表达式本身是否不允许重复，但这正是我所需要的。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:19:32.850

好吧，你可以，但它并不漂亮：

```
Regex regexObj = new Regex(
    @"^           # Start of string
    (?:           # Either match...
     N            # N
    |             # or...
     (?:          # Match one of the following:
      A(?!.*A)    # A unless followed somewhere later by another A
     |            # or
      B(?!.*B)    # B unless...
     |            # etc. etc.
      C(?!.*C)
     |
      D(?!.*D)
     |
      E1(?!.*E1)
     |
      E2(?!.*E2)
     |
      E3(?!.*E3)
     )+           # one or more times
    )             # End of alternation
    $             # End of string", 
    RegexOptions.IgnorePatternWhitespace); 
```

此解决方案使用[否定前瞻断言](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:24:05.790

我不确定即使是.net `Regex`（比“常规语言”的最严格定义更强大）也可以做到这一点；无论如何，除非您要求仅使用 a ，否则`Regex`（在我看来）没有任何问题：

```
bool IsValid(string input)
{
    var Ns = input.Count(c => c == 'N');
    var As = input.Count(c => c == 'A');
    // etc
    var E1s = Regex.Matches(input, "E1").Count
    // etc

    var maxDescriptorCount = (new[] { As, ... ,E1s, ... }).Max();

    var isValid = 
        ((Ns == 1) && (maxDescriptorCount == 0))
        ||
        ((Ns == 0) && (maxDescriptorCount == 1))
        ;

    return isValid;
} 
```

它是解决问题的最短代码吗？不，它可读和可维护吗？我认同。

[（如果你愿意，你可以写一个带有签名的实用方法`int MaxN(params int[] numbers)`）]

# objective-c - Objective-c：覆盖所有子类的方法

> ID：10510702
> 
> 赞同：0
> 
> 时间：2012-05-09T06:14:09.720
> 
> 标签：objective-c, oop, overriding

我想覆盖UIViewController 的所有子类的`setTitle`方法？`UIViewController`我想自定义所有视图的标题文本颜色。如何在 Objective-C 中做到这一点？类别不是我认为推荐的方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:34:14.160

由于您已经指出类别不是这样做的推荐方法 - 而且 Apple 文档中的顾虑是有效的 - 一种简单可靠的方法是创建 UIViewController 的子类，将其用作一种模板，然后让您的所有其他视图控制器都继承自该“模板类”。

# qt - QAbstractItemModel 相对于 QStandardItemModel 的优势是什么？

> ID：10510703
> 
> 赞同：8
> 
> 时间：2012-05-09T06:14:14.267
> 
> 标签：qt, qt4, pyqt, qt-jambi, qtruby

我想使用模型存储自定义数据。为此，对于选择哪个项目模型进行子类化有点困惑。我需要澄清一下，哪个是子类化的最佳模型？而且我还需要 QAbstractItemModel 优于 QStandardItemModel 的优势吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:28:05.867

这取决于您的需求。如果`QStandardItemModel`您只想存储自定义数据并且不想编写自己的模型逻辑，请使用。这是通用的，您可以将其用于自定义数据而无需子类化。

另一方面，如果您想编写自己的模型逻辑，请选择`QAbstractItemModel`. 它是抽象类。这意味着，它没有实现任何行为，它只是一个“接口”。它告诉您您的模型应该实现哪些方法，因此它可以用作 Qt 中的另一个 ItemModel 类。

# c# - 使用 Log4net 和 Activator.CreateInstance

> ID：10510705
> 
> 赞同：1
> 
> 时间：2012-05-09T06:14:22.547
> 
> 标签：c#, logging, log4net, activator, createinstance

我正在使用 log4net 记录我的应用程序，

我有一个奇怪的问题，我有一些使用 Activator.CreateInstance 动态创建的类。

但是由于某种原因，类不写日志，

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:17:02.243

也许 Activator.CreateInstance() 正在为此类选择不同的构造函数？我经常遇到一个问题，我的类有两个构造函数，我忘记调用一个`: this(..)`，因此我的初始化逻辑没有设置。

# verilog - 在 Verilog 中将位数组拆分为更小的数组

> ID：10510712
> 
> 赞同：0
> 
> 时间：2012-05-09T06:14:59.813
> 
> 标签：verilog

这可能很容易，但遗憾的是我无法真正找到答案。假设我有...

```
input [31:0] controls; 
```

我将如何声明一个可以返回的位数组，它等于这些位的一部分，例如 6-0 或 31-25？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:37:15.940

我不确定我是否完全理解这个问题（这对我来说有点模糊），但你只是在寻找这个吗？

```
wire [6:0] controls_part;
assign controls_part = controls[31:25]; 
```

或者你能详细说明一下吗？

# jquery - 如何模糊除 (this) a:hover 之外的所有列表项文本

> ID：10510714
> 
> 赞同：4
> 
> 时间：2012-05-09T06:15:03.093
> 
> 标签：jquery, html, css

我正在努力做到这一点，因此当您将鼠标悬停在列表项上时，当前的 li 会弹出，并且所有其他列表项都会淡出或略微模糊。我更喜欢所有的css，有谁知道如何选择所有其他li，除了当前在css中选择的？

**更新**
我不相信这在 css 中是可能的，因此我试图在 jquery 中选择它。

继承人更新的代码与我不工作的 jquery 脚本 [http://jsfiddle.net/xKEHe/42/](http://jsfiddle.net/xKEHe/42/)

参考[Hide all but $(this) via :not in jQuery 选择器](https://stackoverflow.com/questions/1328314/hide-all-but-this-via-not-in-jquery-selector)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:36:07.347

你可以这样写：

```
ul:hover > #blah a{
    opacity:0.5;
    text-shadow: 0 0 2px #CACACA;
}
ul > #blah:hover a{
    color:#222;
    opacity:1;
    text-shadow:none;
} 
```

​</p>

检查这个：http: [//jsfiddle.net/xKEHe/46/](http://jsfiddle.net/xKEHe/46/)

# jqplot - JQPlot 条形图可以，但饼图不行——使用相同的输入数据

> ID：10510715
> 
> 赞同：1
> 
> 时间：2012-05-09T06:15:17.727
> 
> 标签：jqplot

我有以下代码来呈现条形图和饼图。两者都从服务器接收相同的 JSON 数据集，如下所示：A：115.00 B：55.00 C：0.00 D：29.04

由于某些原因，条形图能够呈现它。但饼图没有显示任何内容。

```
var AjaxDataRenderer = function(url, plot, options) {
    var ret;
    $.ajax({
        async: false, // Needed
        url: "getData.php",
        dataType:"json",
        success: function(data) { 
            ret = data;
        }
    });
    return ret;
};

var plot = $.jqplot('id-BarChart', [],{
    title: "TRIAL",
    dataRenderer: AjaxDataRenderer,
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        rendererOptions: {fillToZero: true}
    },
    series:[{color:'#5FAB78',label:"Actual"}],
    legend: {
        show: true, 
        placement: "insideGrid", 
        rendererOptions: { 
            textColor: "#FFFFFF", 
            fontSize: "10pt" 
        }},
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
            tickOptions: {
                angle: -30,
                fontSize: '10pt'
            }
        },
        yaxis: {
            min: 10,
            max: 300,
            tickOptions: {
                formatString: '$%d'
            }
        }
    }
});

var plot = $.jqplot('id-PieChart', [],{
    dataRenderer: AjaxDataRenderer,
    title: 'Expenditure pattern for this session',
    seriesDefaults: {
        renderer: jQuery.jqplot.PieRenderer, 
        rendererOptions: {
            padding: 8,          
            showDataLabels: true
            }
    }, 
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T01:22:32.247

做了一些调试，发现了以下作品。

这是我拥有的 PHP 代码：

```
$rows = array();
$rows1 = array();
$j = 1;
while($category = mysql_fetch_assoc($allCategories))
{
$current = 0 + $category['ExpenditureCurrent']; 
$toDate = 0 + $category['ExpenditureToDate'];       
$j += 1;    
$rows[] = array($category['Name'], $toDate);
$rows1[] = array($category['Name'], $current);
}
echo json_encode(array($rows,$rows1)); 
```

由于某些原因，条形图适用于这些：

```
 $current = $category['ExpenditureCurrent']; 
    $toDate = $category['ExpenditureToDate']; 
```

虽然饼图需要这些：

```
 $current = 0 + $category['ExpenditureCurrent']; 
    $toDate = 0 + $category['ExpenditureToDate']; 
```

# javascript - Uncaught SyntaxError: Unexpected token ::

> ID：10510716
> 
> 赞同：1
> 
> 时间：2012-05-09T06:15:28.447
> 
> 标签：javascript, syntax-error, mime, getjson

在我的应用程序中，我得到一个 Uncaught SyntaxError: Unexpected token : when using getJSON to fetch JSON from server.

这是我使用的 javascript：

```
$('#employeeListPage').bind('pageinit', function(event) {
    getEmployeeList();
});

setInterval ( "getEmployeeList()", 10000 );
var vanhadata = "";

function getEmployeeList() {
    $.getJSON(serviceURL + 'getemployees.php?autonumero=' + autonumero + 'callback=?', function(data) {
       if(JSON.stringify(data) != JSON.stringify(vanhadata)){ 
            $('#employeeList li').remove();
            employees = data.key;
            $.each(employees, function(index, employee) {
                $('#employeeList').append('<li><a href="keikka.html?id=' + employee.IND + '">' +
                    '<h4>' + employee.OSO + '</h4>' +
                    '<img src="pics/' + employee.TILA + '.png"/>' +
                    '<p>' + employee.AIKA + '</p>' +'</a></li>');
        });
            $('#employeeList').listview('refresh');

            if(vanhadata != "")
               alert("Uusia keikkoja!");       
            vanhadata = data;
        }
    });
} 
```

来自服务器的 JSON 响应似乎是正确的，但它显示错误并且没有显示任何数据。控制台还打印：`"Resource interpreted as Script but transferred with MIME type text/html:"`

这是 JSON 响应：

```
{
    "key": [
        {
            "NIMET": "Tuntematon",
            "PERHJAS": "0",
            "SAATTAJA": "0",
            "m_yht": "0",
            "OSO": null,
            "AIKA": "2010-03-11 10:00:00",
            "OSOITELAJI": "0",

        }
    ]
}UncaughtSyntaxError: Unexpectedtoken: 
```

和 getemployees.php：

```
<?php
 header('Content-Type: application/json; charset=UTF-8');

include 'config.php'; 

$number = $_GET['autonumero'] ;

$sql = "select * from table where number=\"$number\"";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $employees = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"key":'. json_encode($employees) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}

?> 
```

当修改 PHP 文件为：

```
 if ($_GET['callback'])
        print $_GET['callback']."(";

    echo '{"key":'. json_encode($results) .'}';  

  if ($_GET['callback'])
        print ")"; 

} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

我得到的回应是：

```
<br />
<font size='1'><table class='xdebug-error' dir='ltr' border='1' cellspacing='0' cellpadding='1'>
<tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Parse error: syntax error, unexpected T_CATCH in C:\Services\getemployees.php on line <i>40</i></th></tr>
</table></font> 
```

所以它根本不是 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:18:02.560

意外的标记不是`:`，而是该消息中的空白`:`。

您需要删除内部对象中的最后一个逗号。Internet Explorer 特别反对这些尾随逗号：它似乎表示“还有其他事情要来”，而其他浏览器使用逗号表示“那是结束”。

因为您正在使用`json_encode`它应该自动处理，所以您可能会提供错误的数据。检查从您的查询返回的数据：可能有空行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:52:40.083

强制您的 getemployees.php 打印内容类型`application/json`而不是纯文本

# android - 无法从服务启动活动

> ID：10510722
> 
> 赞同：0
> 
> 时间：2012-05-09T06:16:11.937
> 
> 标签：android, android-activity, service, handler, android-context

我面临一个问题，我无法从服务启动活动。当服务接收数据时，它会调用`handler.sendEmptyMessage(0)`发送处理程序消息。然后接收者开始新的活动。但现在活动无法开始。有人可以阅读下面的代码并给我一些建议吗？

```
package com.testBlueTooth;

import java.io.InputStream;
import android.app.Service;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.provider.SyncStateContract.Constants;
import android.util.Log;
import android.view.SurfaceView;
import android.widget.Toast;

public class ClsWaveDiagram extends Service{

private boolean isRecording = false;
private InputStream btInput = null;

public int rateX = 1;

public int rateY = 1;

public int baseLine = 0;

public ClsWaveDiagram(InputStream btInput, int rateX, int rateY,
        int baseLine) {
    this.btInput = btInput;
    this.rateX = rateX;
    this.rateY = rateY;
    this.baseLine = baseLine;
}

public void Start(SurfaceView sfv, Paint mPaint, int wait) {
    isRecording = true;
    new DrawThread(sfv, mPaint, wait).start();
}

public void Stop() {
    isRecording = false;
}

class DrawThread extends Thread {

    private int oldX = 0;
    private int oldY = 0;
    private SurfaceView sfv;
    private int X_index = 0;
    private Paint mPaint;
    private int wait = 50;

    public DrawThread(SurfaceView sfv, Paint mPaint, int wait) {
        this.sfv = sfv;
        this.mPaint = mPaint;
        this.wait = wait;
    }

    public void run() {
        while (isRecording) {
            try {

                byte[] temp = new byte[1024];

                int len = btInput.read(temp);
                Log.e("available", String.valueOf(len));

                System.out.println("alarm!");

                handler.sendEmptyMessage(0);

                if (len > 0) {
                    byte[] btBuf = new byte[len];
                    System.arraycopy(temp, 0, btBuf, 0, btBuf.length);
                    SimpleDraw(X_index, btBuf, rateX, rateY, baseLine);
                    X_index = X_index + (btBuf.length/rateX) - 1;
                    if (X_index > sfv.getHeight()) {
                        X_index = 0;
                    }
                }
                Thread.sleep(wait);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }   

    void SimpleDraw(int start, byte[] inputBuf, int rateX, int rateY,
            int baseLine) {
        if (start == 0)
            oldX = 0;

        byte[] buffer = new byte[inputBuf.length / rateX];
        for (int i = 0, ii = 0; i < buffer.length; i++, ii = i * rateX)
            buffer[i] = inputBuf[ii];

        Canvas canvas = sfv.getHolder().lockCanvas(
                new Rect(0, start, sfv.getWidth(), start + buffer.length));
        canvas.drawColor(Color.BLACK);

        for (int i = 0; i < buffer.length; i++) {
            int y = i + start;
            int x = (0xFF - (buffer[i] & 0xFF))

                    / rateY + baseLine;
            canvas.drawLine(oldX, oldY, x, y, mPaint);
            oldX = x;
            oldY = y;
        }
        sfv.getHolder().unlockCanvasAndPost(canvas);
    }
}
private Handler handler = new Handler(){
    public void handleMessage(android.os.Message msg) {
        Intent intent = new Intent();

        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        intent.setClass(ClsWaveDiagram.this.getApplicationContext(), AlertActivity.class);

        ClsWaveDiagram.this.startActivity(intent);

    };};

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

logcat 错误如下：

```
04-16 12:34:50.559: D/AndroidRuntime(3706): Shutting down VM
04-16 12:34:50.559: W/dalvikvm(3706): threadid=3: thread exiting with uncaught     exception (group=0x4001b170)
04-16 12:34:50.559: E/AndroidRuntime(3706): Uncaught handler: thread main exiting due     to uncaught exception
04-16 12:34:50.559: E/AndroidRuntime(3706): java.lang.NullPointerException
04-16 12:34:50.559: E/AndroidRuntime(3706):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at com.testBlueTooth.ClsWaveDiagram$1.handleMessage(ClsWaveDiagram.java:199)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at android.os.Looper.loop(Looper.java:123)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at java.lang.reflect.Method.invoke(Method.java:521)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-16 12:34:50.559: E/AndroidRuntime(3706):     at dalvik.system.NativeStart.main(Native Method)
04-16 12:34:50.590: I/dalvikvm(3706): threadid=7: reacting to signal 3
04-16 12:34:50.614: I/dalvikvm(3706): Wrote stack trace to '/data/anr/traces.txt'
04-16 12:34:54.789: E/available(3706): 2
04-16 12:34:54.789: I/System.out(3706): alarm!
04-16 12:34:54.903: E/available(3706): 20
04-16 12:34:54.903: I/System.out(3706): alarm!
04-16 12:34:59.034: E/available(3706): 1
04-16 12:34:59.034: I/System.out(3706): alarm! 
```

主要活动：

```
package com.testBlueTooth;

import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;

public class WaveDiagram extends Activity {
ClsWaveDiagram clsWaveDiagram;
SurfaceView sfvWave;
Paint mPaint;
InputStream btInput;
Context context = WaveDiagram.this;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wavediagram);

    sfvWave = (SurfaceView) this.findViewById(R.id.sfvWave);
    sfvWave.setOnTouchListener(new TouchEvent());

    mPaint = new Paint();
    mPaint.setColor(Color.GREEN);
    mPaint.setStrokeWidth(2);

    try {
        if (testBlueTooth.btSocket.getInputStream() != null) {
            clsWaveDiagram = new ClsWaveDiagram(
                    testBlueTooth.btSocket.getInputStream(),
                    3,
                    1,
                    sfvWave.getWidth()/2);

            clsWaveDiagram.Start(sfvWave, mPaint,80);
            Log.e("clsWaveDiagram","start");

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public void onDestroy()  
{  
    clsWaveDiagram.Stop();
    try {
        testBlueTooth.btSocket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    super.onDestroy();  
}
class TouchEvent implements OnTouchListener {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        clsWaveDiagram.baseLine = (int) event.getX();
        return true;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:33:13.710

试试这个希望它对你有帮助。

```
Intent intent = new Intent(this.ctx, AlertActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

this.ctx.startActivity(intent); 
```

[链接在这里](http://groups.google.com/group/phonegap/browse_thread/thread/2e66d2d4d2389ac0)

[标准服务代码在这里](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:23:09.363

`DrawThread`之前不要跑`Service.onStartCommand()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:26:13.310

在处理程序函数中，您只需像打击和尝试一样修改，

```
Intent intent = new Intent(ClsWaveDiagram.this, AlertActivity.class);

        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        ClsWaveDiagram.this.startActivity(intent); 
```

我想这会对你有所帮助。

# java - Java：如何调用名称存储在字符串变量中的函数

> ID：10510724
> 
> 赞同：3
> 
> 时间：2012-05-09T06:16:16.667
> 
> 标签：java, reflection, method-invocation

我有一个存储在变量中的通用字符串`String func = "validate";`，我想调用该名称的函数，即我需要调用`validate()`函数。
我的意思是说我会将变量传递给某个函数
`public void callFunc(String func){`
`....`
`}`
，所以上面的函数应该调用适当的函数，并将函数名作为参数传递给`callfunc()`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T06:19:30.457

您*可以*使用反射来做到这一点，例如

```
Method method = getClass().getMethod(func);
// TODO: Validation
method.invoke(this); 
```

当然，这是假设您要调用 on 上的方法`this`，并且它是一个实例方法。查看[`Class.getMethod`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)和相关的方法，连同它[`Method`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html)本身，以获取更多详细信息。您可能想要`getDeclaredMethod`，并且您可能需要使其可访问。

如果可能的话，我会看看你是否能想出一种避免这种情况的方法——反射往往会很快变得混乱。值得退后一步考虑这是否是最好的设计。如果您向我们提供有关大局的更多详细信息，我们或许可以提出替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:41:22.693

除了使用反射之外，还有另一种方法。您可以编写如下模式匹配：

```
switch (func) {
  case "validate": validate(); break;
  case "apply": apply(); break;
  default: break;
} 
```

但我同意乔恩的观点：尽量避免这种情况。如果您使用模式匹配，则必须应用更改两次。例如，如果添加另一个方法，则需要将其添加到函数命名方法和模式匹配中。

# ruby-on-rails-3.1 - 如何让 rails 不在供应商目录中预编译资产？

> ID：10510727
> 
> 赞同：1
> 
> 时间：2012-05-09T06:17:05.793
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

资产：预编译永远在我的应用程序上。我几乎从不将供应商目录中的资产直接发送给用户，因此我不需要对它们进行预编译。它们总是包含在 app/assets 目录中的另一个文件中。

如何让预编译器忽略供应商/资产中的资产？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T23:38:43.387

您可能希望确保`config.assets.precompile`application.rb 中的语句仅引用您要预编译的特定文件。如果此语句中未列出资产（js 或 css），则它不会被`rake assets:precompile`. 例如：

```
config.assets.precompile += ['public/public.js', 'public/public.css', 'admin/admin.js', 'admin/admin.css'] 
```

# android - 如何在android中创建一个android.graphicsPicture对象

> ID：10510731
> 
> 赞同：0
> 
> 时间：2012-05-09T06:17:27.307
> 
> 标签：android, canvas, image

我想使用 Canvas 类的 drawPicture(Picture picture, Rect dst) 方法。现在我不知道如何创建这个 Picture 对象。我想传入一个 9 个补丁图像文件作为 Picture 对象，该对象将保存在我的项目的 res/drawable 文件夹中。如何创建此图片对象？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:27:42.967

如果你想创建图片对象，那么你需要一个输入流： [图片类android SDK](http://developer.android.com/reference/android/graphics/Picture.html)

为什么你会选择这种方法是超出我的。但那是你的选择:-)

# iphone - 如何添加表格视图和 uibutton 作为我的主页

> ID：10510737
> 
> 赞同：0
> 
> 时间：2012-05-09T06:18:35.180
> 
> 标签：iphone, objective-c, cordova, phonegap-plugins

我需要在电话间隙上实现一个应用程序

我已经使用[http://wiki.phonegap.com/w/page/39991939/Getting-Started-with-PhoneGap-iOS-using-Xcode-4在 xcode 4.1 中实现了基本应用程序](http://wiki.phonegap.com/w/page/39991939/Getting-Started-with-PhoneGap-iOS-using-Xcode-4)

我的主页是

* * *

```
Hey it's phone gap
Dont know how to get started? check
phone gap start 
```

* * *

现在我需要在我的主页上显示一个表格视图和一个 ui 按钮

**如何在电话差距应用程序中为我的主页添加新课程？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:25:25.723

当我做我的第一个 PhoneGap 应用程序时，我还使用了 Sencha Touch，它是一个很棒的框架，它提供了像按钮、面板和列表这样的界面组件

[您可以在厨房水槽](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/list)中找到所有这些组件

[这是关于如何开始使用 Sencha Touch 2](http://www.sencha.com/learn/getting-started-with-sencha-touch-2)的教程

您还可以找到有关[如何创建 Sencha Touch 2 应用程序的教程](http://francisshanahan.com/index.php/2011/sencha-touch-2-0-mvc-in-5-minutes-or-less/)

希望这可以帮助

# mod-rewrite - 在 Joomla 问题中重写基础

> ID：10510742
> 
> 赞同：0
> 
> 时间：2012-05-09T06:19:18.577
> 
> 标签：mod-rewrite, joomla

我最近更改了服务器并移动了站点。早些时候，该站点位于服务器的根目录中。现在它在 public_html/joomla.com 文件夹下。

问题是我的所有链接都不起作用。他们抛出了 404 页面未找到错误。

我的 htaccess 读取如下内容

```
`#  mod_rewrite in use
########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]
#
########## End - Rewrite rules to block out some common exploits

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

# RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
#php_value post_max_size 5M
#php_value upload_max_filesize 5M
########## End - Joomla! core SEF Section
` 
```

我怀疑 reqritebase 问题 - 这是问题还是我怎样才能让所有链接恢复工作？

请尽快帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:38:28.353

替换这一行：

```
# RewriteBase / 
```

和 ：

```
RewriteBase /joomla.com 
```

# sharepoint-2007 - 通过共享点设计器部署解决方案 - 2007

> ID：10510746
> 
> 赞同：0
> 
> 时间：2012-05-09T06:19:40.033
> 
> 标签：sharepoint-2007, sharepoint-designer

我为我们的客户创建了一个 asp.net 页面。他要求我通过共享点设计器部署此页面，以便从他自己的 SharePoint 服务器中查看。

可以通过设计器软件部署解决方案。

这是项目的要求

1.  创建注册页面并将数据保存在sharepoint列表中

2.  它将有一些 jquery 文件和图像

我们使用的是sharepoint server 2007 版本。是否可以通过 SharepointDesigner2007 将这些文件和 .dll 推送到 GAC 中。

请提出一些答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:43:09.700

您不能使用 SharePint 设计器部署 DLL，而必须使用 WSP。签出[SharePoint 解决方案安装程序](http://sharepointinstaller.codeplex.com/)，它可以帮助您使安装更顺畅。

# eclipse - 从 diskfileupload 上传文件时出错

> ID：10510751
> 
> 赞同：0
> 
> 时间：2012-05-09T06:20:08.050
> 
> 标签：eclipse, apache, exception, tomcat

`import org.apache.tomcat.util.http.fileupload.DiskFileUpload;`

在我的 Eclipse 中说 import org.apache.tomcat.util.http.fileupload.DiskFileUpload 无法解析。甚至导入jar commons-fileupload-1.2.2

`import org.apache.tomcat.util.http.fileupload.FileItem;` `import org.apache.tomcat.util.http.fileupload.FileUpload;` `import org.apache.tomcat.util.http.fileupload.FileUploadException;`

但以上三个不会给出错误..为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:28:51.500

请检查您是否有`coyote.jar`或`tomcat-coyote.jar`在您的类路径中，因为此错误不是 `commons-fileupload-1.2.2.jar`错误。

# iphone - 如何从iphone获取所有通讯录联系人

> ID：10510754
> 
> 赞同：0
> 
> 时间：2012-05-09T06:20:43.527
> 
> 标签：iphone, addressbook

我是 iPhone 新手。我被困在我的项目中，主要是将所有地址簿联系人（姓名和电子邮件）放在我的项目中创建的表格视图中，这些联系人主要放在 iphone 设备中。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:58:22.047

```
NSMutableArray* contactsArray = [NSMutableArray new];

// open the default address book. 
ABAddressBookRef m_addressbook = ABAddressBookCreate();

if (!m_addressbook) 
{
    NSLog(@"opening address book");
}
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);
for (int i=0;i < nPeople;i++) 
{ 
    NSMutableDictionary* tempContactDic = [NSMutableDictionary new];
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
    CFStringRef firstName, lastName;
    firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    [tempContactDic setValue:name forKey:@"name"];
    //fetch email id
    NSString *strEmail;
    ABMultiValueRef email = ABRecordCopyValue(ref, kABPersonEmailProperty);
    CFStringRef tempEmailref = ABMultiValueCopyValueAtIndex(email, 0);
    strEmail = (__bridge  NSString *)tempEmailref;

    [tempContactDic setValue:strEmail forKey:@"email"];

     [contactsArray addObject:tempContactDic];

} 
```

所有联系人数据保存在联系人数组中。然后您可以根据需要使用此数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:27:09.377

使用地址簿 api 来执行此操作。在这里查看我的答案

[不使用联系人选择器的 iPhone 上的联系人列表](https://stackoverflow.com/questions/10496589/contact-list-on-iphone-without-using-contact-picker/10496623#10496623)

[有关更多详细信息，请在此处](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/)获取苹果文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T11:06:04.477

```
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h>

-(void)viewWillAppear:(BOOL)animated{

    NSMutableArray* contactsArray = [NSMutableArray new];

    ABAddressBookRef m_addressbook = ABAddressBookCreate();

    if (!m_addressbook)
    {
        NSLog(@"opening address book");
    }
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
    CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);
    for (int i=0;i < nPeople;i++)
    {
        NSMutableDictionary* tempContactDic = [NSMutableDictionary new];
        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
        NSLog(@"tempContactDic ios a ==%@",tempContactDic);
       CFStringRef firstName, lastName;
        firstName = (__bridge CFStringRef)((__bridge UILabel *)(ABRecordCopyValue(ref, kABPersonFirstNameProperty)));
        lastName  = (__bridge CFStringRef)((__bridge UILabel *)(ABRecordCopyValue(ref, kABPersonLastNameProperty)));
      //  [tempContactDic setValue:name forKey:@"name"];
        //fetch email id
        NSString *strEmail;
        ABMultiValueRef email = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFStringRef tempEmailref = ABMultiValueCopyValueAtIndex(email, 0);
        strEmail = (__bridge  NSString *)tempEmailref;

        [tempContactDic setValue:strEmail forKey:@"email"];

        [contactsArray addObject:tempContactDic];

    }

}
-(IBAction)getcontactlist:(id)sender{

         [self getContact];
}

-(IBAction)getContact {
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
    [self presentViewController:picker animated:YES completion:nil];

}

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker {
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    firstName.text = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    lastName.text = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);
    ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty);
    number.text = (__bridge NSString*)ABMultiValueCopyValueAtIndex(multi, 0);
    return YES;
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
    return NO;
} 
```

这段代码对我来说很好......

# javascript - 了解javascript的dom0事件模型

> ID：10510755
> 
> 赞同：0
> 
> 时间：2012-05-09T06:20:48.393
> 
> 标签：javascript, javascript-events

我试图表达我通过阅读一些文章所理解的内容`dom0 event model`。`javascript`如果其中有错误，请纠正我。

在 dom0 模型中，一个事件处理程序可以附加到一个元素。只能附加一个处理程序。当事件发生时，浏览器调用该事件处理程序。

有两种方法可以做到这一点

**1.内联模型**

处理程序被添加为元素的属性。例如`link element`（即`<a>`）有一个名为的属性`onclick`。我们添加一个函数 hello 像这样

```
<a href="#" onclick="hello();"> say hello </a>
...
<script type="text/javascript">
   function hello(){
      window.alert("Hello");
   }
</script> 
```

这个模型的问题是它是侵入性的，因为 hello() 被放在元素的主体中。

**2.传统模式**

不是在元素主体中添加事件处理程序作为元素的属性，而是通过脚本完成处理程序的添加/删除。处理程序分配给元素的属性，如下所示

```
<a href="#" id="hellolink">  say hello </a>
...
<script type="text/javascript">
    function hello(){
        window.alert("Hello");
    }
    //adding handler
    document.getElementById('hellolink').onclick=hello;
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:44:43.423

似乎是对的。

您可能想阅读： [http](http://www.cross-browser.com/talk/event_interface_soup.php) : //www.cross-browser.com/talk/event_interface_soup.php http://en.wikipedia.org/wiki/DOM_events#Traditional_model

对于传统模型中的代码，您应该有一个 window.onload 事件

所以

```
window.onload = function () {

    var el = document.getElementById('hellolink');
    if (el) {
        el.onclick = hello;
    }
}; 
```

取决于您使用的浏览器功能 hello 可能会接收元素对象，因此如果您使用 jQuery 之类的东西来处理您的 dom 事件，可能会更容易。

[http://api.jquery.com/click/](http://api.jquery.com/click/)

# asp.net - 时间跨度总小时数的格式字符串

> ID：10510765
> 
> 赞同：0
> 
> 时间：2012-05-09T06:21:48.300
> 
> 标签：asp.net

我在 Telerik Grid 中使用 TimeSpan。在该列的数据格式中，我只想要每行中的 total_hours 数据。我应该在那里使用什么 fromat_string？例如，如果我需要小时和分钟，我会使用“hh:mm”！但总小时数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:50:30.363

我不认为有默认格式来获取时间。我认为您必须能够定义一些自定义格式。（我不确定！）

如果您不想定义一些自定义格式，您可以这样做：
假设您的网格绑定到某个**ViewModel**对象，该对象将**Datetime**作为其属性之一。您可以再定义一个名为**NoOfHours**的属性。在此属性的 getter 中，您实际上可以从 Datetime 属性返回小时数。然后，您可以将网格的列绑定到**NoOfHours**属性。
然后你不需要使用任何格式。希望对你有帮助！

# ios - 具有多个表视图的拆分视图 MasterViewController

> ID：10510766
> 
> 赞同：1
> 
> 时间：2012-05-09T06:21:58.300
> 
> 标签：ios, ipad, uisplitviewcontroller

我有一个很好的拆分视图。但是，我希望能够深入了解我的 Master-Detail 视图的`UITableView`. 例如，我有一个年龄列表：`0, 1, 2, 3, 4, 5`. 当用户按下时，`3`我希望向一个新`UITableView`的显示所有 3 岁的孩子的名字。

理想情况下，我想使用 Storyboards 来完成此操作（链接添加按钮以将我带到下一个`UITableView`）。当我尝试添加视图时，它显示为全屏视图。如何使此视图显示在拆分视图的主部分中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:16:43.590

使用 Storyboard 时，如果您想拥有多个`UITableViews`以便允许用户向下钻取类别，则必须使用 Push Segue（将其设置为 Master）。确保您没有推送 a `UINavigationController`，而只是推送您想要列出的视图。然后，要返回只需使用`[self.navigationcontroller popViewControllerAnimated:YES];`.

**编辑：（按要求提供更多信息）** 因此，在 XCode/IB 中，当您在主视图上并右键单击并将其拖动到另一个视图时，您将看到不同的选择。您想选择 Push 而不是 Modal。这将允许它将新视图推送到堆栈上。您还可以将其目标设置为 Master，它将正确调整 IB 视图的大小。

此外，您不必总是使用按钮来连接视图。您还可以从视图控制器本身拖动到另一个视图控制器而不是按钮来查看控制器。然后在您的按钮代码中，您可以调用`[self performSegueWithIdentifier:@"someNameHere" sender:self];`转换。这使您可以在进入下一个屏幕之前进行检查和验证。

只需记住单击您的 segue 并为其命名（在属性视图中的标识符下）。然后添加函数 prepareForSegue:sender: 以便在传输之前传输任何变量或任何东西（我很少需要使用它）。

# sitecore - 在 SiteCore 的控制属性窗口中添加 TestLab 导航

> ID：10510772
> 
> 赞同：1
> 
> 时间：2012-05-09T06:22:20.953
> 
> 标签：sitecore, sitecore6, multivariate-testing

我在 Sitecore 测试实验室中添加了一个名为 HeroImage 的测试。我为测试添加了变量和值。然后我进入要添加测试的页面编辑器。然后我右键单击控件属性窗口。

在控制属性窗口中，我没有找到 TestLab 导航选项卡。而我在 Sitecore 中添加测试的一些示例中看到了 TestLab 导航选项卡。（[http://www.experimentsincode.com/?p=165](http://www.experimentsincode.com/?p=165)）。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T00:43:50.070

单击左上角的红色站点核心按钮，然后单击“应用程序选项”。要启用此功能。由于某种原因，默认情况下它不可见。

# java - JPA：查询子项时未反映父项更改

> ID：10510773
> 
> 赞同：0
> 
> 时间：2012-05-09T06:22:23.583
> 
> 标签：java, hibernate, jpa

我有两个实体`X`，`Y`定义如下。`Y`与 具有多对一关系`X`：

```
public class X {
    @Id
    @Column(name = "xId", unique = true, nullable = false, length = 50)
    private Integer id;
    @Column(name = "description", nullable = true, length = 50)
    private String description;
    ...
} 
```

和

```
public class Y {
    @Id
    @Column(name = "yId", unique = true, nullable = false, length = 50)
    private Integer id;
    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="x", nullable=false)
    private X x;
    ...
} 
```

当我更新实体`X`时，加载时所做的更改没有正确反映`Y`。假设 X 表上已经有一行值（1，“2222”）。第一次打印 Y 会将 X 显示为 (1, "2222")。然而，在提交之后，我看到数据库中的 X 表发生了变化，但是当再次查询时，Y 我仍然链接到旧版本的 X：

```
Y y = yDao.findById(ABC);
System.out.println(y);  // y.x.description is "2222"

xDao.beginTransaction();
X x = new X(1, "4444");
xDao.update(x);
xDao.commitTransaction();   

Y y2 = yDao.findById(ABC);  // y.x.description is still "2222" instead of "4444"
System.out.println(y2); 
```

我的结论是第二次从缓存中检索 Y。为了让 Y 意识到 X 已经改变，我缺少什么？

简而言之，y 等于 y2，这意味着我的第二个发现是从缓存中检索其信息？

为了让 Y 意识到 X 已经改变，我缺少什么？

添加输出sql：

```
Hibernate: // first findById()
    select
        y0_.yId as yId12_1_,
        y0_.address as address12_1_,
        y0_.x as x12_1_,
        x1_.xId as xId17_0_,
        x1_.description as descript2_17_0_ 
    from
        daoTest.Y y0_ 
    inner join
        daoTest.X x1_ 
            on y0_.x=x1_.xId 
    where
        y0_.yId=?
Y [id=11, x=X [id=1, description=0000]]   // System.out
Hibernate: // merge(x)
    select
        x0_.xId as xId5_0_,
        x0_.description as descript2_5_0_ 
    from
        daoTest.X x0_ 
    where
        x0_.xId=?
Hibernate: // commitTransaction()
    update
        daoTest.X 
    set
        description=? 
    where
        xId=?
Y [id=11, x=X [id=1, description=0000]]   //System.out, theres no select again 
```

GenericDAO 类

```
public class GenericDAOImpl<T, ID extends Serializable> implements
GenericDAO<T, ID> {

private EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistenceUnit");
private EntityManager em = emf.createEntityManager();

protected EntityManager getEntityManager() {
    if (em == null) {
        throw new IllegalStateException(
                "EntityManager has not been set on DAO before usage");           
    } else {        
        return em;
    }
}

public void refresh(T entity) {
    this.getEntityManager().refresh(entity);
}
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:56:05.580

你的每个 DAO 都有一个`EntityManagerFactory`和一个`EntityManager`. 我建议制作`EntityManagerFactory` `static`. 这样所有的实体管理者都来自同一个工厂。也许问题与二级缓存有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:24:59.337

更新记录后使用 EntityManager.flush() 方法。

这是刷新和刷新方法之间的区别。

```
 entityManager.flush();
// Calling this flush method will synchronize the database with the values
// taken from the entity object.

     entityManager.refresh();
// The refresh() method will refresh the entity object with the values taken from the database.
// All the updates that are done are lost. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:29:42.173

首先，这是正常和预期的行为。Hibernate 有一个一级缓存（Session），一旦在一级缓存中加载了某个实体，每次获取到该实体的引用时，都会从一级缓存中取出值。

您可以通过调用 EntityManager.refresh()（或 Session.refresh()）来刷新缓存中实体的状态。请注意，即使您这样做，如果您的事务的隔离级别为 REPEATABLE_READ，您仍可能获得实体的旧状态。

# android - Android：MapOverlay - 当前位置

> ID：10510774
> 
> 赞同：1
> 
> 时间：2012-05-09T06:22:29.687
> 
> 标签：android, overlay

我目前正在创建一个 Android 应用程序，该应用程序向用户显示其在 Google 地图上的当前位置。我目前正在使用它，因此会调出位置，放大。

但是，我希望定位准确。我试图尝试按照 HelloMapView 教程进行操作，但遇到了困难。如何修改教程所说的内容，以制作叠加层，显示当前位置？

另外，我收到了一个错误，其中 getDrawable 部分如下：

```
Drawable drawable = ((Object) this.getResources()).getDrawable(R.drawable.androidmarker);
ItemizedOverlay itemizedoverlay = new ItemizedOverlay(drawable, this);

Also, whereabouts do I paste this:
itemizedoverlay.addOverlay(overlayitem);
mapOverlays.add(itemizedoverlay); 
```

谢谢你。

# android - 调用 HttpURLConnection.connect() 后启动 TCP SYN 的长时间延迟

> ID：10510776
> 
> 赞同：0
> 
> 时间：2012-05-09T06:22:37.907
> 
> 标签：android, tcp, delay, connect, httpurlconnection

我使用 HttpURLConnection 访问服务器上的某些 php 文件。我确实得到了正确的结果，但是我的 GET 和响应之间的延迟非常长。我检查了像 stackoverflow 这样的网站，并尝试了一些技巧，比如 System.setProperty("http.keepAlive", "false"); setRequestProperty("连接", "关闭"); 但延迟仍然持续存在。然后我将我的 HTC 植根，安装 Shark，通过服务器捕获流量，并将 pcap 文件复制到我的 Wireshark。我比较了我的 logCat 和 Wireshark，发现我明确调用 HttpURLConnection.connect() 和 Android 传输的第一个 TCP SYN 之间有 20 秒的差距。

为了比较，我从 android 浏览器访问了服务器上的相同文件，它花了 < 2s ...

我的设备：HTC sense (Android 2.3.4)

我的代码（在 AsyncTask 中）是这样的：

```
System.setProperty("http.keepAlive", "false");

URL httpUrl = new URL(url);
HttpURLConnection connection = null;
connection = (HttpURLConnection) httpUrl.openConnection();

// prepare the request
if (connection != null) {
connection.setRequestProperty("connection", "close");
connection.setDoInput(true);
connection.setRequestMethod("GET");
connection.setUseCaches(false);
connection.setFollowRedirects(false);
connection.setRequestProperty("Accept-Encoding", "identity");
connection.setConnectTimeout(CONNECTION_TIMEOUT);  // doesn't seem to work anyway
connection.setRequestProperty("User-Agent", USER_AGENT);

connection.connect();

// get response here .... getContentEncoding(); getContentLength(); getHeaderFieldKey(); etc 
```

}

我已经在这个问题上工作了几天，在网上搜索，仍然没有任何线索。非常感谢您的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:15:49.147

我向 Google 项目提交了一份错误报告，他们已经复制了它。

[http://code.google.com/p/android/issues/detail?id=30664](http://code.google.com/p/android/issues/detail?id=30664)

等着瞧 。

# css - 更改煎茶触摸中的背景图像

> ID：10510777
> 
> 赞同：0
> 
> 时间：2012-05-09T06:22:44.150
> 
> 标签：css, sencha-touch, panel

我是煎茶触摸的初学者，所以我有一些基本问题。

我在 css 的面板中添加了背景图像：

```
#inputPanel{
    background:url(../i/input-bg.png) no-repeat left top;
} 
```

每次显示面板时，我都想更改背景图像：

```
this.inputPanel = new Ext.form.FormPanel({
    cls:'panel',
    id:'inputPanel',
    items:[],
    dockedItems:[],
    listeners:{
        beforeshow:function(){
            if(showImageAAA)
              // Change the background image to AAA
            else
              // Change the background image to BBB
        },
    }
}); 
```

有什么简单的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:31:53.017

我认为您可以设置面板的“样式”或“bodyStyle”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:42:39.383

你可以在下面做

```
this.inputPanel = new Ext.form.FormPanel({
    cls:'panel',
    id:'inputPanel',
    items:[],
    dockedItems:[],
    listeners:{
        beforerender:function(){
            if(showImageAAA)
              // Change the background image to AAA
               this.style="background:url(../i/input-bgAAA.png) no-repeat left top;";
            else
              // Change the background image to BBB
               this.style="background:url(../i/input-bgBBB.png) no-repeat left top;";
        },
    }
}); 
```

希望这有帮助！

# gwt - GWT：CheckBoxCell 和选择更改事件

> ID：10510785
> 
> 赞同：2
> 
> 时间：2012-05-09T06:23:22.480
> 
> 标签：gwt, checkbox, multipleselection

我正在使用以下构造函数在可编辑的数据网格中创建一个复选框单元格。

```
CheckboxCell(false, true) 
```

当我使用它并单击行中的任何位置时，不会触发选择更改事件，并且我正在使用**单选模型**。

当我使用时，

```
CheckboxCell(); 
```

选择更改事件在行上触发，但是，1）我们单击两次以选中或取消选中单元格。2）如果我们选中或取消选中复选框单元格，只要我点击任何地方，该值就会恢复。

我正在尝试找出解决方案，但尚未成功。任何帮助，将不胜感激。

我正在使用**GWT 2.4.0**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:23:50.817

问题是因为选择如果可能的话不要使用选择模型。并为复选框列添加字段更新器。我用过这个：

```
Column< GridReportFields, Boolean > cb = new Column< GridReportFields, Boolean >(new CheckboxCell() ) { 
                    @Override

        public Boolean getValue(GridReportFields object) {
            // TODO Auto-generated method stub
            return object.getCheckb();
        }
    };
    cb.setFieldUpdater(new FieldUpdater<GridReportFields, Boolean>() {

        @Override
        public void update(int index, GridReportFields object, Boolean value) {
            // TODO Auto-generated method stub
            object.setCheckb(value);
            dataGrid.redraw();
        }
    }); 
```

这里 gridReport 字段是我的模型类。setCheckb 是保存复选框值的布尔变量的设置器。

# pdf - iTextSharp XmlWorker：从右到左

> ID：10510786
> 
> 赞同：2
> 
> 时间：2012-05-09T06:23:38.927
> 
> 标签：pdf, itextsharp, itext, right-to-left, html-to-pdf

在与这个不太友好的 API 苦苦挣扎后，我终于取得了进展，但现在我遇到了一个非常讨厌的问题。我在我的 html 中的各个位置放置了“dir”属性的值是“rtl”..但 XMLWorker 似乎根本不尊重这一点。有谁知道解决方法？这是我的方法：

```
public static void Generate<TModel>(string templateFile, TModel model, string outputFile, IEnumerable<string> fonts)
        {
            string template = System.IO.File.ReadAllText(templateFile);
            string result = Razor.Parse(template, model);

            using (var fsOut = new FileStream(outputFile, FileMode.Create, FileAccess.Write))
            using (var stringReader = new StringReader(result))
            {
                var document = new Document();
                var pdfWriter = PdfWriter.GetInstance(document, fsOut);
                pdfWriter.InitialLeading = 12.5f;
                document.Open();

                var xmlWorkerHelper = XMLWorkerHelper.GetInstance();

                var cssResolver = new StyleAttrCSSResolver();
                //cssResolver.AddCss(cssFile);

                var xmlWorkerFontProvider = new XMLWorkerFontProvider();

                foreach (string font in fonts)
                {
                    xmlWorkerFontProvider.Register(font);
                }

                var cssAppliers = new CssAppliersImpl(xmlWorkerFontProvider);
                var htmlContext = new HtmlPipelineContext(cssAppliers);
                htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());

                PdfWriterPipeline pdfWriterPipeline = new PdfWriterPipeline(document, pdfWriter);
                HtmlPipeline htmlPipeline = new HtmlPipeline(htmlContext, pdfWriterPipeline);
                CssResolverPipeline cssResolverPipeline = new CssResolverPipeline(cssResolver, htmlPipeline);
                XMLWorker xmlWorker = new XMLWorker(cssResolverPipeline, true);
                XMLParser xmlParser = new XMLParser(xmlWorker);
                xmlParser.Parse(stringReader);

                document.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T10:47:59.207

我创建了一个示例来展示如何使用 XMLWorker 解析和显示 RTL 数据。[从这里下载](http://www.dotnettips.info/file/userfile?name=XMLWorkerRTLsample.cs)。

# vb.net - 在控制验证事件中设置焦点以控制验证事件时永不结束循环

> ID：10510787
> 
> 赞同：0
> 
> 时间：2012-05-09T06:23:41.937
> 
> 标签：vb.net, validation

我正在编写以下代码以验证必填字段帐号。通知。当错误发生时，用户的要求是重新关注字段：

```
If txtAccountNo = "" Then

    MessageBox.Show("Account no filed can't be left empty")
    txtAccountNo.SetFocus
    Exit Sub

End If 
```

它工作正常。但是假设用户不想填写表格并退出应用程序。消息框一直出现，直到用户输入帐号。

我怎样才能避免这种情况？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:48:08.800

设置一个标志以指示用户已看到消息框。检查标志以防止将来出现任何消​​息框。确保在将焦点设置回文本框*之前*设置了标志，例如

```
dim bMsgBox as boolean=false

If txtAccountNo = "" and bMsgBox = false Then

    MessageBox.Show("Account no filed can't be left empty")
    bMsgBox=true
    txtAccountNo.SetFocus
    Exit Sub

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:49:06.367

您可以将所有验证规则放在一个函数/过程/子程序中（我不熟悉 VB，主要是 C++/C# 用户）。然后只有在用户提交填写的数据时才调用此函数，并将焦点设置为未填写强制数据或输入无效数据的第一个控件。

假设您有一个需要填写 3 个控件的表单：

*   日期控制不是强制性的 - dteDate
*   必须的文本框 - txtAccoutInfo
*   文本框必填 - txtAddress

和 2 个按钮：

*   按钮保存和按钮取消。

当按下“保存”按钮时，您首先调用函数/过程来验证用户输入。如果输入的日期在 dteDate 中无效，则设置焦点并返回/退出函数；如果在 txtAccountInfo 中没有输入文本，则设置焦点并返回/退出函数；如果在 txtAddress 中没有输入文本，则将焦点放在它上面并返回/退出。

当按下“取消”时，您不会调用此函数，而只是退出。

# hibernate - Hibernate中的唯一约束冲突异常

> ID：10510788
> 
> 赞同：0
> 
> 时间：2012-05-09T06:23:49.550
> 
> 标签：hibernate

尝试插入表的两个或多个用户在 Hibernate 中获取唯一约束冲突异常。如何处理任何人都可以帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:19:43.587

如果要在具有唯一索引或约束的列中插入具有值的行，并且该列的插入值已存在于另一行中，则始终会出现此错误。这可能是多线程环境中并发访问的问题。

根据问题的来源，有一些解决它的策略：
- 使用生成器（序列或类似）生成唯一 ID。Hibernate 帮助您处理`<generator>`标签内的`<id>`标签。
- 使用`<version>`标签避免对同一实体的并发修改
- 编写一个生成唯一值的方法
- 将部分代码与 Java`synchronized`语句同步
- 使用无状态会话并在异常重试后插入新值
- 更正逻辑错误您的代码
-还有更多...

# linux - 在 Linux 中执行时显示错误的 Shell 脚本

> ID：10510789
> 
> 赞同：0
> 
> 时间：2012-05-09T06:23:50.783
> 
> 标签：linux, shell, shellexecute

脚本 ：

```
IMAGE=$imgvalue;
if  [ $imgvalue :=1 ]
then
    echo DO=ABC;
elif [ $imgvalue :=2 ]
then
    echo DO=ETC;
elif [ $imgvalue :=3 ]
then
    echo DO=XYZ;
else
    echo "$imgvalue is unsupported";
    exit 1; 
fi 
```

在上面的脚本中，`IMAGE=1`, `IMAGE=2`，`IMAGE=3`无论我分配的值是什么。它只显示`DO=ABC`。其他条件无效。谁能解释我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:10:46.323

如果`$imgvalue`不是空字符串，则您的第一个测试是语法错误，所以我假设它在您正在执行的测试中为空。在这种情况下，您的第一个测试相当于：

```
if [ :=1 ] 
```

这总是正确的，因为`:=1`它不是一个空字符串。你可能打算写：

```
if [ "$imgvalue" = 1 ] 
```

# java - 为列表获取 .class 在java中

> ID：10510790
> 
> 赞同：2
> 
> 时间：2012-05-09T06:23:54.350
> 
> 标签：java, generics

我有以下功能

编辑：将 int 更改为 Long 类

```
protected <T> ApiResponse<T> getApiResponse(Object obj, Class<T> clasx) 
```

我怎样才能通过`List<Long>`类作为第二个参数？

我可以通过`List<Long>.class`，但这不起作用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T06:28:08.050

[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)意味着你只能通过`List.class`.

从链接的文档中：

> 当泛型类型被实例化时，编译器通过一种称为类型擦除的技术来转换这些类型——在这个过程中，编译器会删除与类或方法中的类型参数和类型参数相关的所有信息。类型擦除使使用泛型的 Java 应用程序能够保持与在泛型之前创建的 Java 库和应用程序的二进制兼容性。
> 
> 例如，`Box<String>`被翻译为 type `Box`，称为原始类型——原始类型是没有任何类型参数的泛型类或接口名称。这意味着您无法找出泛型类在运行时使用的 Object 类型。无法进行以下操作：

```
public class MyClass<E> {
  public static void myMethod(Object item) {
    // Compiler error
    if (item instanceof E) {
        ...
    }
    E item2 = new E();       // Compiler error
    E[] iArray = new E[10];  // Compiler error
    E obj = (E)new Object(); // Unchecked cast warning
  }
} 
```

> 以粗体显示的操作在运行时是没有意义的，因为编译器在编译时删除了关于实际类型参数（由类型参数表示`E`）的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:25:31.017

你不能`int`进入`List`. 因为`T`这里应该是从`Object`.

`Integer`扩展自`Object`，但不是`int`。

# android - Android Widget Broadcast Receiver，自动更新Activity类

> ID：10510791
> 
> 赞同：0
> 
> 时间：2012-05-09T06:23:55.350
> 
> 标签：android, android-activity, android-widget, broadcastreceiver

我正在开发一个 android 小部件。小部件屏幕上有一个整数。例如 min=100 当我打电话时，我希望这个整数减少 10。

我的意思是当我打电话时，整数会自动更新为 90。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:50:59.673

制作一个接收器类来捕捉呼出的呼叫意图

```
<receiver android:name=".yourreceiver">
    <intent-filter>
       <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    </intent-filter>
</receiver> 
```

并更新 onReceive 中的小部件

```
RemoteViews updateViews  =Update your min value and create the remote` view;
        // Update the widget 
        ComponentName thisWidget = new ComponentName(context, YourWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(context);
        manager.updateAppWidget(thisWidget, updateViews); 
```

# linux - centos 磁盘上的可用空间未更新

> ID：10510794
> 
> 赞同：7
> 
> 时间：2012-05-09T06:24:02.493
> 
> 标签：linux, centos, storage

我是 linux 新手并使用 centos 系统，通过运行命令 df -H 显示 82%（如果已满），即只有 15GB 可用。

我想要一些额外的空间，所以使用 WINSCP 我已经完成了 shift 删除了 15G 记录。

并再次执行 df -H ，但仍然显示 15 GB 可用空间。但它所在的已删除文件的可用大小。

请帮助我找到解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:34:28.697

在大多数 unix 文件系统中，如果文件打开，操作系统会以正确的方式删除文件，但在文件关闭之前不会释放空间。为什么？因为打开它的用户仍然可以看到该文件。

另一方面，Windows 曾经抱怨它无法删除文件，因为它正在使用中，似乎在以后的化身中，资源管理器会假装删除该文件。

一些应用程序以与此事实相关的不良行为而闻名。例如，我必须处理一些无法正确关闭某些文件的 MySQL 版本，随着时间的推移，我可以发现 /tmp 中浪费了几 GB 的空间。

您可以使用 lsof 命令列出打开的文件 (man lsof)。如果问题与打开的文件有关，并且您可以负担得起重新启动，那么这很可能是解决问题的最简单方法。

# ruby-on-rails-3 - 刷新页面后显示Ajax删除的项目

> ID：10510795
> 
> 赞同：0
> 
> 时间：2012-05-09T06:24:04.413
> 
> 标签：ruby-on-rails-3, jquery

嗨，我是 rails 的新手，我正在使用 rails 3。我的问题是我想使用 ajax 从列表中删除图像。当我单击删除按钮时，图像在索引页面上仍然可见，但实际上它已被删除，但用户可以在刷新网页后看到更改。我希望它在使用 ajax 的同一页面上可见。任何人请帮助。谢谢...

我的控制器代码是：

```
def destroy
  logger.info params[:event].inspect
  @event = Event.find(params[:id])
  @event.destroy
  #redirect_to events_url
  respond_to do |format|
    format.html { redirect_to @event, :notice => 'Event deleted' }
    format.js
  end
end 
```

我的视图代码是：

```
**app/view/events/index.html.haml**
    - @events.each do |event|
      %ol.hoverbox
        %li.all{:id =>"event_#{event.id}"}
          = link_to image_tag(event.photo.url), event_path(event)
          .abc
            = event.name
            %br/ 
          .bca
            = event.start_date 
            |
            = event.start_time
            |
            = link_to "&nbsp;".html_safe, event_path(event), :remote => true, :method => :delete, :class => "del-16", :confirm=>"Are u sure?", :title => "Delete", :style => "text-decoration:none;" 
```

js的代码是：

```
*destroy.js.erb*
$("#event_#{event.id}").fadeOut().remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:02:19.720

我想你需要看看[这里](http://railscasts.com/episodes/136-jquery)

写这样的东西

**$("#event_#{event.id}").reset();** 在您的**destroy.js.erb**文件中。

我希望这会对你有所帮助。

谢谢。

# c# - XML 数据库的安全性

> ID：10510797
> 
> 赞同：1
> 
> 时间：2012-05-09T06:24:21.860
> 
> 标签：c#, .net, xml, security

在其中一个项目中，我们使用 XML 作为数据库。后来我们意识到数据的安全性是个问题。该应用程序的用户可以使用记事本修改任何数据。以下是我们可以做的几件事来保护数据库。

请注意，应用程序是用点网编写的。

1.  加密整个xml，程序会解密并使用它，同时保存加密并保存它。（性能问题）

2.  使用点网汇编我们可以加密节点。（性能问题和需要编写大量代码来加密和解密笔记。

有没有最好的方法来保护 XML 以使用户不能简单地使用记事本进行修改。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:09:32.540

如果 SQL Server 是一个选项并且您的主要目标是防止窥探数据，您可以利用 SQL Server 的 XML 处理和内置加密功能（例如证书、TDE 等）来处理加密。这将消除您所描述的大部分手动工作。

[http://technet.microsoft.com/en-us/library/bb510663.aspx](http://technet.microsoft.com/en-us/library/bb510663.aspx)

如果数据需要在整个过程中加密（例如，当它在应用程序的内存空间中时）或者如果数据在用户的机器上，那么基于 SQL 的加密将不实用或不够。

> 使用点网汇编我们可以加密节点。（性能问题和需要编写大量代码来加密和解密笔记。

我并不是说这是正确的解决方案，因为您没有提供足够的细节。但是，我认为您是在两个无效的假设下进行操作的。

*   .NET 中的加密非常强大，只需不到 100 行代码即可执行。您可以使用标准加密算法或与 Windows 证书服务集成。

*   当然会影响性能，但现代 CPU 在处理加密所需的数学运算方面做得非常出色。除非文件很大和/或您每秒处理数百个文件，否则我不会将设计基于性能问题。

最终，如果数据驻留在用户的机器上，那么最大的担忧将是密钥的位置和安全性。

# windows-phone-7 - 如何删除一页windows phone backstack？

> ID：10510798
> 
> 赞同：3
> 
> 时间：2012-05-09T06:24:24.167
> 
> 标签：windows-phone-7

我的 Backstack 有四个页面，A、B、C、D。现在，当我导航到 EI 搜索 Google 并找到一些人用来完成的页面时，我只想从我的应用程序 backstack 中删除 D Page。 `NavigationService.RemoveBackEntry()`但是它没有适合我，它将删除我的应用程序后台的所有页面。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:29:45.033

`NavigationService.RemoveBackEntry()`仅从 backstack 中删除最后一个条目，因此它应该适合您的需要。

[http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry%28v=vs.92%29.aspx)

> **此方法用于从返回堆栈中删除最近的条目**，如果没有更多条目要删除，则抛出 InvalidOperationException。**如果要删除多个项目，请多次调用此方法**。

# jquery - 相应的 同时悬停高亮

> ID：10510799
> 
> 赞同：0
> 
> 时间：2012-05-09T06:24:36.147
> 
> 标签：jquery, html, html-lists

好吧，有点奇怪，

我有 2 个 ul，每个都有相同数量的 li...

在 jQuery 中，我希望能够覆盖任一 ul li 并查看它，并且其对应的 li（来自另一个 ul）获得类“highlight”...

我虽然可以通过计算列表顶部的数字来完成？

仍然不知道该怎么做。

这是我正在寻找的视觉表示：

![在此处输入图像描述](../Images/33d7f11a4c3e5b406d4b59ba7e13edae.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:29:23.540

```
$('#list1 > li').hover(function() {
    $('#list2 > li').eq($(this).index()).addClass('hover');
}, function() {
    $('#list2 > li').eq($(this).index()).removeClass('hover');
}); 
```

或者，如果您想要双向：

```
$('.list > li').hover(function() {
    var idx = $(this).index();
    $('.list > li:nth-child('+(idx+1)+')').addClass('hover');
}, function() {
    var idx = $(this).index();
    $('.list > li:nth-child('+(idx+1)+')').removeClass('hover');
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/XNRux/](http://jsfiddle.net/ThiefMaster/XNRux/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:39:58.030

尝试这个：

```
$("ul.list1>li").hover(function(){
      var ind=$(this).index();
   $(this).css("background-color","red");
   $('ul.list2 li:eq('+ind+')').css("background-color","red");
},
function(){
    var ind=$(this).index();
  $(this).css("background-color","transparent");
   $('ul.list2 li:eq('+ind+')').css("background-color","transparent");
});

$("ul.list2>li").hover(function(){
    var ind=$(this).index();
   $(this).css("background-color","blue");
   $('ul.list1 li:eq('+ind+')').css("background-color","blue");
},
function(){
    var ind=$(this).index();
   $(this).css("background-color","transparent");
   $('ul.list1 li:eq('+ind+')').css("background-color","transparent");
}); 
```

这里是详细的[JSFiddle](http://jsfiddle.net/yNbxT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:30:02.313

```
$('li', 'ul.list1, ul.list2').hover(

function() {

    $('li:eq('+ $(this).index() +')', 'ul.list1, ul.list2').addClass('highlight');

},

function() {

    $('li:eq('+ $(this).index() +')', 'ul.list1, ul.list2').removeClass('highlight');

}); 
```

**[演示](http://jsfiddle.net/Pj9hH/2/)**

# javascript - 没有协议的 CSS 和 JS 链接

> ID：10510801
> 
> 赞同：0
> 
> 时间：2012-05-09T06:24:58.560
> 
> 标签：javascript, css, html

> **可能重复：**
> [在 <script src=“...”> 中用 // 替换是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

我最近越来越频繁地看到链接到没有协议的 CSS 和 JS 的网站：

```
<script src="//domain.cloudfront.net/file.js" type="text/javascript"></script> 
```

和 CSS

```
<link href="//domain.cloudfront.net/styles.css" media="screen" rel="stylesheet" type="text/css" /> 
```

这在所有浏览器中都有效吗？离开`http`或`https`意味着浏览器智能地决定使用哪个协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:28:49.223

是的。Paul Irish 有一篇很好的博客文章。[http://paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

它的基本目的是防止那些 IE 弹出窗口警告您，当您的主要协议是 https 但您使用 http 获取某些内容时，页面上的某些资源是“不安全的”。

# github - 用于 GitHub wiki 的离线 WYSIWYG Mediawiki 编辑器

> ID：10510802
> 
> 赞同：1
> 
> 时间：2012-05-09T06:24:59.980
> 
> 标签：github, wiki, mediawiki

这是我的第一篇文章，所以如果我说一些愚蠢的话，请放轻松。另外请指出这个问题的正确方向已在任何其他地方得到回答。我用谷歌搜索了一段时间，但没有得到满意的答案。

我是 GitHub 的忠实粉丝，每天都使用它来管理我所有的开源项目以及为工作的公司付费订阅。我大量使用 wiki 来制作文档并使用文本编辑器离线编辑大部分内容，并将其推送到 wiki 的 git 界面中。

我想知道您是否可以推荐任何好的离线和基于桌面的应用程序，通过提供图形所见即所得编辑器来帮助我加快工作流程。我可以加载文件并在类似界面的文字处理器中对其进行编辑，然后将其推送到 git 中。我不想要任何需要像 apache 这样的本地服务器设置的解决方案，这将是矫枉过正，而且 GitHub wiki 中已经有一个基于 Web 的编辑器。在 Linux 或 Mac OS X 上运行的任何东西对我来说都是好东西。

提前致谢。

**更新：**虽然 GitHub wiki 默认由*Markdown*提供支持，但我们使用*Mediawiki*语法，所以我会对 Mediawiki 图形编辑器感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T16:50:51.573

如果你是 Mac 用户[MouApp](http://mouapp.com/)效果最好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:33:12.300

由于 Wiki 是基于 Markdown 的，我个人只是将[TextMate](http://macromates.com/)与 Markdown 语法荧光笔一起使用，虽然您不会得到相同的结果（因为它没有呈现 HTML/CSS），但您会对文本及其内容有一种“感觉”去看看。这只是让你专注于写作。

如果你在 Windows 上，还有很多其他用于常用文本编辑器的 Markdown 插件（我过去曾[在](https://github.com/thomsmits/markdown_npp)Notepad++ 中使用过它）。

# php - 从 HTML 表格转换时在 CSV 中获得额外的行

> ID：10510803
> 
> 赞同：1
> 
> 时间：2012-05-09T06:25:03.340
> 
> 标签：php, html, dom, csv

我得到了这张照片中的 CSV 输出，它在数据之间插入了额外的空白行。可以修复吗？我试过修剪（）。但它没有用。

![紧迫的 ？](../Images/8c75690745b6719d5741686f7c781f55.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:32:45.080

尝试添加

```
if (!empty($td)) 
```

在每个 fputcsv() 调用之前。

TH 仅存在于第一次迭代中，而 TD 不存在于第一次迭代中，因此您可能会在每次迭代中添加空数据。

# .htaccess - .htaccess 从任何地方的每个 index.html 重定向到 www/index.php

> ID：10510805
> 
> 赞同：0
> 
> 时间：2012-05-09T06:25:09.467
> 
> 标签：.htaccess, redirect

我有一个网站这样说：

```
images / index.html  
images/nav / index.html  
styles/ index.html  
styles/images/ index.html  
js/ index.html 
index.php 
```

我想使用 .htaccess 重写模块从站点中任何位置的每个 index.html 重定向到 index.php

这是我测试过的，但没有让我得到想要的结果：

```
RewriteRule ^index\.htm$ index.php [NC,R] 
```

任何肝病将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:42:54.183

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(.*?)index\.html?$ %1/index.php [L,R,NC] 
```

# opencv - 使用 OpenCV GPU 进行人体检测的代码

> ID：10510815
> 
> 赞同：-4
> 
> 时间：2012-05-09T06:26:02.567
> 
> 标签：opencv, gpu, video-processing, face-detection, object-detection

目前我正在使用 OpenCV 和 GPU 在视频中进行实时人/人/事实检测。我需要用于视频处理和人体检测的 OpenCv 代码。请帮助我找到使用 Opencv 或任何其他编程在视频中进行人体检测的代码。非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:39:37.907

我已经在另一个 SOF 问题中讨论了执行此操作的一些选项：[人的图形识别](https://stackoverflow.com/questions/10231380/graphic-recognition-of-people)

`Face detection using Haar cascades`在那里，我提供`People detection using HOG descriptors`了 OpenCV Samples 的代码链接。你可以使用它们。

例如，下面是我使用该代码获得的人员检测结果：

![在此处输入图像描述](../Images/b251ed52cb2bae1c99185870ec3dd351.png)

但是人员检测可能有点慢。但幸运的是，OpenCV 附带了一些`GPU optimized functions`HOG 描述符函数和级联分类器函数。因此，您可以在 GPU 中实现上述两个示例。

在此处查看完整文档：[对象检测 GPU](http://opencv.itseez.com/modules/gpu/doc/object_detection.html#object-detection)

# cakephp - 无法保存记录

> ID：10510819
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:26:17.943
> 
> 标签：cakephp

我无法理解它不会更新或保存我放置的任何记录。你能告诉我有什么问题吗？

这是我的 StockController 函数`add`

```
function add()
{
    if (!empty($this->data['Stocks']))
    {
        if ($this->Stocks->Save($this->data['Stocks']))
        {
            ($this->flash('Your Inventory has been added! /Stocks/'));
        }
    }
} 
```

这是 add.ctp

```
 <h1>Add Inventory</h1>    
<form action="<?php echo $this->Html->url("/Stocks/add"); ?>" method="post">    

    <p>    
        ProductName:      
        <?php echo $this->Form->varchar('Stocks/ProductName', array('size' => '40'))?>    
    </p>    
    <p>    
        Price:      
        <?php echo $this->Form->integers('Stocks/Price', array('size' => '10'))?>    
    </p>    
<p>
   Quantity:
   <?php echo $this->Form->integers('Stocks/Quantity', array('size' => '5'))?>
</p>
    <p>    
        <?php echo $this->Form->submit('Save') ?>    
    </p>  

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:46:56.530

您没有提及您使用的是哪个版本的 CakePHP，并且您的示例中有相当多的非标准代码。

模型应该是单数的：

```
function add()
{
    if (!empty($this->data))
    {
        if ($this->Stock->Save($this->data))
        {
            ($this->flash('Your Inventory has been added! /Stocks/'));
        }
        else {
            debug($this->Stock->validationErrors);
        }
    }
} 
```

（我添加的 else 将显示任何验证错误）

您的表单字段名称格式不正确：

```
h1>Add Inventory</h1>    
  <?php echo $this->Form->create('Stock'); ?>

    <p>    
        ProductName:      
        <?php echo $this->Form->varchar('Stocks.product_name', array('size' => '40'))?>    
    </p>    
    <p>    
        Price:      
        <?php echo $this->Form->integers('Stock.price', array('size' => '10'))?>    
    </p>    
<p>
   Quantity:
   <?php echo $this->Form->integers('Stock.quantity', array('size' => '5'))?>
</p>
    <p>    
        <?php echo $this->Form->submit('Save') ?>    
    </p>  

<?php echo $this->Form->end('Submit'); ?> 
```

# regex - 使用正则表达式进行验证

> ID：10510822
> 
> 赞同：-2
> 
> 时间：2012-05-09T06:26:47.130
> 
> 标签：regex

字段名称最多可以有 15 个字符，并且只允许使用字母数字字符和连字符。不允许在字段中仅使用数值。
我怎样才能写一个上面所有的正则表达式应该工作。
, 是否有可能在 if else 阶梯中。没有正则表达式我怎么能实现这个验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:50:20.693

此表达式应匹配 1 到 15 个字母数字字符，而不是仅匹配数值。

```
^(?=.*[a-zA-Z\-])[a-zA-Z0-9\-]{1,15}$ 
```

您可以在下面的链接中了解有关“高级”正则表达式的更多信息。

[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:40:29.103

以下 reg exp 将只允许连字符和字母字符..如果您想要更多，只需修改它....

```
var reg = /^(?:[a-zA-Z]+-?)+$/ ;

$('#first_name').blur(function(){
    if(!$('#first_name').val())
        alert("please fill your firstname");
    else if(!reg.test($('#first_name').val()))
        alert('Only alphabets & hypen space allowed!');     
    else if($('#first_name').val().length > 15)
        alert('Enter your name between 15 characters ');    

}); 
```

我已经给出了使用 jquery 验证的例子......你也应该尝试以你自己的方式来满足你的要求......

# delphi - Delphi XE2、Intraweb 2.1.23 和 cookie

> ID：10510824
> 
> 赞同：1
> 
> 时间：2012-05-09T06:27:06.740
> 
> 标签：delphi, delphi-xe2, intraweb

我所做的一切都与 cookie 示例中的完全相同（此处显示为[http://www.atozed.com/intraweb/docs/Develop/Cookies.aspx](http://www.atozed.com/intraweb/docs/Develop/Cookies.aspx)），但它没有编译并且显示“[DCC Error] Login.pas (38): E2035 没有足够的实际参数”并将课程放在“WebApplication.Response.Cookies.Add”之后

我错过了什么？有没有我需要添加到用途的单位？

我使用 Delphi XE2 和 Intraweb 2.1.23 哦，我是 intraweb 的新手...

请帮忙谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:55:35.507

确保**httpapp**在您的 uses 子句中并尝试以下操作：

```
procedure TIWServerController.SetCookie;
var
  mCookie: TCookie;
begin
  mCookie := WebApplication.Response.Cookies.Add;
  with mCookie do begin
    Name:='mycookie';
    Value:='mycookievalue';
    Expires := Date + 30;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:44:28.227

这是一个工作代码块，它将在 Intraweb 12.2.8 XE2 中创建一个 Cookie

确保在您的 uses 子句中 添加**IW.HTTP.Cookie 。**

当然，您必须修改 TiwfrmMain 以匹配您的 iwform 并通过以下方式声明过程:)：procedure MakeCookie; 在你的

```
procedure TiwfrmMain.MakeCookie;
    var cookieMain: THttpCookie;

begin

 try
  cookieMain:=  THttpCookie.Create('email',editLogin.Text,'',Date + 999);
  WebApplication.Response.Cookies.Add(cookieMain);
  cookieMain.free;  
 except

 end;

end; 
```

然后您还可以通过以下方式获取它：

```
procedure TiwfrmMain.SetCookie;
begin
  try

    if WebApplication.Request.CookieFields.IndexOfName('email')> -1 then
    editLogin.Text := WebApplication.Request.CookieFields.Values['email'];

  except

  end;

end; 
```

开心:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-11-30T13:07:25.830

我的代码：

```
procedure SetCookie(AIWApplication: TIWApplication; AName, AValue: string; AExpiration: TDate);
var
   LCookie: TCookie;
begin
   AIWApplication.Response.Cookies.Add(LCookie);
 with LCookie do
 begin
   Name := AName;
   Value := AValue;
   Expires := AExpiration;
 end;
end; 
```

# javascript - 将经典的 Perlin Noise 移植到 JavaScript：获取周期性模式。为什么？（JsFiddle 示例）

> ID：10510828
> 
> 赞同：3
> 
> 时间：2012-05-09T06:27:32.827
> 
> 标签：javascript, noise, perlin-noise

我尝试将经典的 Perlin Noise (src: [http://mrl.nyu.edu/~perlin/doc/oscar.html#noise](http://mrl.nyu.edu/~perlin/doc/oscar.html#noise) ) 移植到 JavaScript - 用于科学目的。我不知道为什么，但我的代码会生成周期性模式而不是随机模式。

您可以在此处找到我的完整代码以及绘制到画布上的示例（精简到一维）：http: [//jsfiddle.net/YL77D/](http://jsfiddle.net/YL77D/)

我认为问题可以在“noise1”函数中找到：

```
sx = s_curve(rx0);

u = rx0 * g1[ p[ bx0 ] ];
v = rx1 * g1[ p[ bx1 ] ];

return lerp(sx, u, v); 
```

如果我的 x-seed 是 10.1、10.2、10.3 等。我认为 u 和 v 应该是相同的数字（u 应该基于 10，v 应该基于 11 - 所以 sx 介于两者之间）。我对吗？但在我的代码中，u 和 v 总是不同的。

有任何想法吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:58:18.250

一个问题可能是您使用的方式`Math.Random`：

```
p[i] = p[j = Math.floor(Math.random() % B)]; 
```

在 javascript中`Math.Random`返回一个介于 0 和 1 之间的浮点值。
`random`在 C 中返回一个介于 0 和 RAND_MAX 之间的整数值。

```
p[i] = p[j = random() % B]; 
```

# scala - Scala 视频资料

> ID：10510829
> 
> 赞同：0
> 
> 时间：2012-05-09T06:27:39.877
> 
> 标签：scala

我们计划在即将到来的项目中使用 Scala。我们都是这项技术的新手。哪里可以找到 Scala 开发 Web 基础应用程序的视频资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:57:11.017

看剧！框架。新的 2.0 版本是用 scala 编写的，支持很多惯用的 scala 用法，包括基于 scala 的模板。

[http://www.playframework.org/documentation/2.0.1/ScalaHome](http://www.playframework.org/documentation/2.0.1/ScalaHome)

[https://github.com/playframework/Play20/wiki](https://github.com/playframework/Play20/wiki)

[http://www.scoop.it/t/playframework](http://www.scoop.it/t/playframework)

不是所有的视频，但值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:44:58.887

[http://typesafe.com/resources/videos](http://typesafe.com/resources/videos)是类型安全视频素材的页面。我推荐使用Lift，虽然我根本没用过，但它真的很常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:00:08.750

这里有一些关于 scala 基础的视频：

*   [http://vimeo.com/24720874](http://vimeo.com/24720874)
*   [http://vimeo.com/25335827](http://vimeo.com/25335827)

对于使用 Lift 进行开发，您可以查看此截屏视频，它很好地介绍了框架

*   [http://vimeo.com/18496998](http://vimeo.com/18496998)

# wpf - 用vb.net在指定的行号Word插入分页符

> ID：10510833
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:28:00.527
> 
> 标签：wpf, vb.net, ms-word

我正在尝试从 vb.net 构建报告，这里是

```
Dim oWord As Word.Application
Dim oDoc As Word.Document
Dim oTable As Word.Table

    For Each dc As BSPLib.Bills.BillDeliverychallan In Bill.BillDCs

        Dim dcpara As Word.Paragraph
        dcpara = oDoc.Content.Paragraphs.Add(oDoc.Bookmarks.Item("\endofdoc").Range)
        dcpara.Range.Font.Bold = 5
        dcpara.Range.Text = "Delivery Challan: " & dc.DCName
        dcpara.Alignment = Word.WdParagraphAlignment.wdAlignParagraphLeft
        dcpara.Format.SpaceBefore = 12
        dcpara.Format.SpaceAfter = 2   '24 pt spacing after paragraph.
        dcpara.Range.InsertParagraphAfter()

        Dim count As Integer = dc.BillItems.Count

        Dim r As Integer
        oTable = oDoc.Tables.Add(oDoc.Bookmarks.Item("\endofdoc").Range, count + 1, 7)
        oTable.Range.ParagraphFormat.SpaceBefore = 2
        oTable.Range.ParagraphFormat.SpaceAfter = 0
        oTable.Columns(1).Width = oWord.CentimetersToPoints(0.89)
        oTable.Columns(2).Width = oWord.CentimetersToPoints(5.58)
        oTable.Columns(3).Width = oWord.CentimetersToPoints(2)
        oTable.Columns(4).Width = oWord.CentimetersToPoints(0.6)
        oTable.Columns(5).Width = oWord.CentimetersToPoints(1.7)
        oTable.Columns(6).Width = oWord.CentimetersToPoints(0.5)
        oTable.Columns(7).Width = oWord.CentimetersToPoints(2.01)
        For r = 1 To count
            'BQT TABLES 15  NOS @   25.00   =   375.00
            oTable.Cell(r, 1).Range.Text = dc.BillItems(r - 1).ItemSerial & "."
            oTable.Cell(r, 1).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
            oTable.Cell(r, 1).Range.Font.Bold = 0
            oTable.Cell(r, 2).Range.Text = dc.BillItems(r - 1).ItemName
            oTable.Cell(r, 2).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphLeft
            oTable.Cell(r, 2).Range.Font.Bold = 0
            oTable.Cell(r, 3).Range.Text = dc.BillItems(r - 1).Quantity & " " & dc.BillItems(r - 1).ItemMeasure
            oTable.Cell(r, 3).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
            oTable.Cell(r, 3).Range.Font.Bold = 0

            oTable.Cell(r, 4).Range.Text = "@"
            oTable.Cell(r, 4).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphCenter
            oTable.Cell(r, 4).Range.Font.Bold = 0
            oTable.Cell(r, 5).Range.Text = dc.BillItems(r - 1).PricePerUnit.ToString("F")
            oTable.Cell(r, 5).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
            oTable.Cell(r, 5).Range.Font.Bold = 0
            oTable.Cell(r, 6).Range.Text = "="
            oTable.Cell(r, 6).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphCenter
            oTable.Cell(r, 6).Range.Font.Bold = 0
            oTable.Cell(r, 7).Range.Text = dc.BillItems(r - 1).TotalFinal.ToString("F")
            oTable.Cell(r, 7).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
            oTable.Cell(r, 7).Range.Font.Bold = 0
        Next
        oTable.Cell(r + 1, 7).Range.Text = (dc.Total / dc.Days).ToString("F")
        oTable.Cell(r + 1, 7).Range.Font.Bold = 0
        oTable.Cell(r, 7).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
        oTable.Rows.Alignment = Word.WdRowAlignment.wdAlignRowLeft

        'Using a line break before my next table
        Dim oLineBreak1 As Word.Paragraph
        oLineBreak1 = oDoc.Content.Paragraphs.Add(oDoc.Bookmarks.Item("\endofdoc").Range)
        oLineBreak1.Format.SpaceAfter = 0
        oLineBreak1.Format.SpaceBefore = 0
        oLineBreak1.Range.Font.Size = 2

        oTable = oDoc.Tables.Add(oDoc.Bookmarks.Item("\endofdoc").Range, 1, 2)
        oTable.Range.ParagraphFormat.SpaceAfter = 0
        oTable.Range.ParagraphFormat.SpaceBefore = 0
        If dc.Days > 1 Then
            oTable.Cell(1, 1).Range.Text = "    From " & dc.FromDate.ToShortDateString & " To " & dc.ToDate & " --- " & dc.Days & " days" & " For: " & dc.ForDate
        Else
            oTable.Cell(1, 1).Range.Text = "    From " & dc.FromDate.ToShortDateString & " To " & dc.ToDate & " --- " & dc.Days & " day" & " For:" & dc.ForDate
        End If
        oTable.Cell(1, 1).Width = oWord.CentimetersToPoints(12.44)
        oTable.Cell(1, 2).Width = oWord.CentimetersToPoints(2.67)
        oTable.Cell(1, 2).Range.Text = dc.Total.ToString("F")
        oTable.Cell(1, 2).Range.Paragraphs.Alignment = Word.WdParagraphAlignment.wdAlignParagraphRight
        oTable.Rows.Alignment = Word.WdRowAlignment.wdAlignRowCenter

        'Dim break As Word.WdBreakType
        'End If
    Next 
```

问题是，如果 for each 循环中的数据扩展到下一页，我希望 for 循环中的整个数据移动到下一页。我想添加一个页数整数并通过开始和结束来验证它以确定和更改页面。问题是我不知道如何在指定的行号处插入分页符。分页符是`Word.WdBreakType.wdPageBreak`但如何在行号处插入它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:08:05.940

您可以将段落格式设置为“**保持在一起**”：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraph.keeptogether.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraph.keeptogether.aspx)

> 确定 Microsoft Word 重新分页文档时指定段落中的所有行是否保持在同一页面上。

这可确保段落的各个行不会跨两页分开。

您还需要使用“ **Keep with Next** ”：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraph.keepwithnext.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraph.keepwithnext.aspx)

> 确定当 Microsoft Word 重新分页文档时，指定的段落是否与后面的段落保持在同一页上。

这可确保各个段落不会在两页中彼此分开。

# jquery - 无论如何要让 Simple Modal jQuery 插件像 Pinterest modal 一样工作？

> ID：10510837
> 
> 赞同：0
> 
> 时间：2012-05-09T06:28:15.990
> 
> 标签：jquery, simplemodal

我正在尝试重新创建 Pinterest.com 模式的功能。我已经在我的网站上使用了 Simple Modal，所以我希望它可以以同样的方式使用。

我当前的代码：

jQuery：

```
$('#my-modal').modal({
     opacity: 95,
     overlayCss: { 
          backgroundColor: '#fff' 
     },
     position: [100, 0]
}); 
```

HTML：

```
<div id="my-modal" style="display:none">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus tellus risus, placerat nec sagittis non, egestas sed mauris. Nulla at porttitor enim. Nunc sit amet augue lacus, vitae molestie velit. Donec ac metus odio. Cras a leo nisl. Sed id ultricies lacus. Suspendisse imperdiet volutpat commodo. Nulla facilisi. Quisque sodales tortor at magna viverra ac porta risus gravida. Ut non nunc eu erat faucibus molestie a et neque. Fusce ornare metus non tortor accumsan commodo. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque congue faucibus commodo. Nullam posuere, leo et ultricies commodo, est augue rhoncus justo, vel posuere enim ligula mollis mi. Vivamus pretium pulvinar accumsan. Mauris eu risus magna, vitae sollicitudin mauris.

Aliquam erat volutpat. Mauris libero lacus, gravida rutrum sollicitudin at, convallis sit amet ante. Proin ac mi ac nunc sollicitudin congue sed a mauris. Maecenas eget vehicula magna. Cras congue ipsum varius diam porttitor et molestie magna vulputate. Quisque bibendum ornare porta. Nunc eu urna nec lectus fringilla mattis eu et ante. Proin sed felis mi, vitae sagittis odio. Vivamus metus odio, bibendum ut scelerisque ut, euismod nec ligula. Nullam id orci vitae nisi gravida congue nec non est. Pellentesque ut massa sit amet lacus laoreet congue. Maecenas eleifend nisi nisl. Vivamus tristique, lacus malesuada cursus consectetur, elit velit imperdiet risus, vel adipiscing purus sem vitae leo. Sed porta lectus eu tortor molestie rutrum.

Integer massa dolor, tempor in ultrices ac, interdum ut nisl. Aenean sed tellus quis massa porttitor blandit. Ut et nunc at mi semper feugiat. Ut vel lorem dolor. Nullam fermentum, augue quis lacinia ultricies, turpis risus euismod est, eu dapibus quam urna dapibus quam. Duis laoreet mattis tellus, at sollicitudin tellus rutrum sit amet. Sed malesuada, tortor sed faucibus eleifend, neque orci euismod libero, sed laoreet sapien dui pulvinar orci.

Sed sed ornare orci. Nunc tempus, leo quis venenatis vehicula, ipsum tellus pretium odio, quis ultrices sapien metus at quam. Nam id viverra leo. In elit dolor, tempor eu hendrerit et, pellentesque a justo. Proin metus dui, rhoncus et interdum sed, lobortis eget urna. Donec et sollicitudin sem. Pellentesque porta, nulla sed rhoncus hendrerit, magna augue vulputate mi, suscipit blandit felis massa sit amet ipsum.

In at urna arcu, ac placerat quam. Ut mattis sagittis dui consectetur lacinia. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus at ipsum ultricies lorem feugiat bibendum. Aliquam consectetur risus feugiat dui sagittis sed condimentum dui fringilla. Morbi enim velit, condimentum nec aliquam in, lobortis et neque. Pellentesque risus nisl, dapibus vel pulvinar ac, vestibulum in nibh.

Nulla gravida porttitor diam vitae faucibus. Sed tincidunt ante vitae dui gravida ut ultrices est dictum. Vivamus vehicula fermentum arcu. Fusce rhoncus, metus nec pulvinar vestibulum, magna tellus tempus justo, et tempor dui dui nec urna. Vestibulum vitae felis lectus. Etiam quis varius urna. Donec accumsan massa sed nunc elementum iaculis. Vestibulum at elit sed mi facilisis varius id at elit. Maecenas in justo urna, vel cursus elit. Integer ut magna sem, quis dapibus justo.

Vivamus ornare consequat malesuada. Donec porttitor suscipit ante, sed gravida elit tristique vitae. Nam euismod odio at nunc volutpat tristique. Duis at porttitor dolor. Curabitur scelerisque feugiat viverra. Etiam tempus, sapien aliquet gravida lacinia, lectus nibh posuere quam, et pharetra elit risus et erat. Donec viverra ornare tellus et eleifend. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nunc lacus ligula, dictum in hendrerit et, blandit et nisl. Integer dapibus interdum pharetra. Vestibulum metus leo, interdum fringilla semper accumsan, malesuada vel risus. Cras auctor molestie lobortis.

Nullam quis hendrerit mauris. Aenean lobortis leo ultricies sem tristique vel tempus eros fermentum. Duis fringilla velit nibh, blandit dignissim sem. Quisque posuere lorem et tellus sagittis in imperdiet erat consequat. Maecenas sit amet elit magna, in cursus arcu. Sed in purus fringilla orci imperdiet blandit. Cras interdum nibh eget ipsum scelerisque vel hendrerit dui accumsan. Proin molestie sollicitudin lacus id aliquam. Donec sit amet luctus augue. Ut nec libero massa. Fusce interdum orci eget diam ultricies sit amet laoreet magna placerat. Curabitur non mi lorem. Vestibulum in felis felis. Vestibulum sit amet sapien erat. Nunc congue enim quis nisi gravida dapibus. Vestibulum laoreet eros ac nulla fermentum sodales.

Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Quisque ultrices felis eget ligula sollicitudin fermentum. Morbi sit amet lorem at ante feugiat condimentum. Mauris porta, tortor eu dapibus accumsan, massa libero consectetur leo, eleifend tristique neque lacus eu risus. Aliquam tincidunt pulvinar purus sed imperdiet. Morbi laoreet lectus in risus placerat quis malesuada turpis placerat. Mauris enim diam, cursus non pharetra vitae, pharetra eget odio. Etiam adipiscing commodo ipsum vitae pretium. Proin laoreet mollis nibh et convallis. Vivamus elementum porttitor sapien, vitae luctus velit imperdiet non. Morbi non dui at felis accumsan porta et ut massa. Sed euismod mattis nisl a pharetra. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse potenti. Quisque quis viverra leo.

Curabitur mollis nunc quis metus congue accumsan. Donec blandit dui nec mi pulvinar at elementum est auctor. Suspendisse blandit pellentesque tellus, a molestie dolor euismod ac. Integer fringilla, magna et tincidunt pharetra, nisi lorem sagittis dolor, vel dapibus sapien enim et sapien. Curabitur nisi est, porta at pulvinar pulvinar, tempor ut magna. Etiam vel ornare urna. Sed lacus arcu, facilisis eget sollicitudin vel, rutrum in lorem. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras id turpis est. Nunc eleifend convallis mi condimentum tincidunt. Aliquam ac lacus odio. Quisque congue eleifend elit eget scelerisque. Vestibulum imperdiet tincidunt erat at tempor. 
</div> 
```

CSS：

```
#modal-profile { background: #fff; box-shadow: 0 0 3px #ccc; width: 500px; padding: 20px; border-radius: 10px; } 
```

它有两个问题：

> 1.  模态框上出现一个滚动条
> 2.  当我在模式之外滚动时，整个文档都会滚动

在 pinterest.com 上，当您在模式外部或内部滚动时，滚动的是模式。

无论如何要让 Simple Modal 像 Pinterest modal 一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:35:23.320

在你的 CSS 中的解决方案：
1\. 应用 height:auto 来修复滚动条`#my-modal {height:auto}`
2\. 应用 position:fixed 来修复滚动问题。这将滚动您的文档内容，但不会滚动您的模态框`#my-modal {position:fixed}`

# mysql - 从表中删除行对行数的奇怪依赖性

> ID：10510839
> 
> 赞同：1
> 
> 时间：2012-05-09T06:28:18.090
> 
> 标签：mysql, relational-database

我有一个表，其中包含属于其中一个列表的用户，该表现在大约有 23M 行。

表结构：

```
 CREATE TABLE `contacts` (
 `subscriber_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `list_id` int(10) unsigned NOT NULL,
 `account_id` int(10) unsigned NOT NULL,
 `subscriber_key` char(32) COLLATE utf8_unicode_ci NOT NULL,
 `email_address` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
 `first_name` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
 `last_name` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
 `ip` int(10) unsigned DEFAULT NULL COMMENT '\nThe ip address of the subscriber that we can get when he opens the \nthe email or subscribe using subsribe form.\nTheoretically it can be used to segment by Location (which is not correct if someone uses proxy).',
 `preferred_format` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'Preferred format of \n0 - HTML, \n1 -Text,\n2 - Mobile',
 `state` tinyint(4) NOT NULL DEFAULT '4' COMMENT '1 - subscribed2 - unsubscribed3 - cleaned4 - not confirmed, it means the user subscribed but has not confirmed it yet.',
 `unsubscribe_reason` tinyint(4) NOT NULL DEFAULT '0',
 `unsubscribe_reason_description` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
 `cause_of_cleaning` tinyint(4) NOT NULL DEFAULT '0' COMMENT '\nThis field is the cause of moving the subscriber to the \n0 - not used\n1 - spam complaint\n2 - hard bounce\n3 - several soft bounces',
 `date_added` datetime NOT NULL COMMENT 'The data when the subscriber was added. I suppose this field can be used in the conditions forming the segment',
 `last_changed` datetime NOT NULL,
 `unsubscribe_date` datetime DEFAULT NULL,
 PRIMARY KEY (`subscriber_id`),
 UNIQUE KEY `email_list_id` (`email_address`,`list_id`),
 KEY `FK_list_id` (`list_id`),
 CONSTRAINT `FK_list_id` FOREIGN KEY (`list_id`) REFERENCES `lists` (`list_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=42236572 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='\nEmails and other contact info about\nthe people' 
```

有时子表中可能有数据到具有附加字段的联系人，但在这种情况下（对于 list_id = 81）没有这样的数据。

请求

```
EXPLAIN SELECT *
FROM contancts
WHERE list_id =81 
```

表明：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  subscribers     ref     FK_list_id  FK_list_id  4   const   1 
```

当我尝试删除满足条件的行时：

```
DELETE
FROM contancts
WHERE list_id=81 
```

Tha 表现在有大约 3 个索引： 订阅者 0 PRIMARY 1 订阅者 ID A 23196385 NULL NULL BTREE
订阅者 0 email_list_id 1 email_address A 23196385 NULL NULL BTREE
订阅者 0 email_list_id 2 list_id A 23196385 NULL NULL BTREE
订阅者 1 FK_list_id 1 list_id A 17 NULL NULL BTREE

我看到删除满足条件的行数所花费的时间的奇怪依赖性：

```
2K rows - 0.0847 sec, 5K – 0.2856 , 10K – 21.3428 , 20K – 34.41, 50K – 61.2596, 
100K - 99.7257. 
```

我现在不清除在线列表，但将此操作排队，并在后台将其删除 1000 个订阅者。

但我想知道为什么时间从 5K 增加到 10K 行这么多。有人可以解释为什么会这样吗？

# android - 如何在整个android原生应用程序中维护服务器登录？

> ID：10510846
> 
> 赞同：5
> 
> 时间：2012-05-09T06:29:26.763
> 
> 标签：android, json, session, cookies, login

让我描述一下我的应用程序，我从网站 JSON url (Drupal website) 获取数据，数据是 JSON 格式。在我的应用程序中，登录功能完美运行。& 用户在服务器上经过验证。我还从服务器获取其他数据（JSON url）并显示在我的 android 应用程序中。 **现在，问题是我无法访问需要登录的页面的 JSON 数据，因为我的登录没有在整个 android 应用程序中维护。**

我在 stackoverflow 和谷歌上搜索了这些链接并尝试了但不知道如何在我的代码中使用它们：http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html)

[安卓会话管理](https://stackoverflow.com/questions/4224913/android-session-management)

[Android 中的 Http cookie 存储](https://stackoverflow.com/questions/8133329/http-cookie-store-in-android)

***这是来自 drupal 站点的空 JSON，无需登录。***

```
{
    "nodes": []
} 
```

这是来自 drupal 站点的 JSON -**登录后**( [http://www.mywebsite.com/user/login](http://www.mywebsite.com/user/login) ) 并重新加载站点上的页面[http://www.mywebsite.com/myaccount-page](http://www.mywebsite.com/myaccount-page) - 在**计算机 webbrowser**中。表示**计算机网络浏览器自动维护登录会话。**

```
{
"nodes": [
    {
        "node": {
            "Uid": "51",
            "Username": "anand",
            "Name": "anand",
            "Address": "\n\tAt- vadodara Nr. Kareli Baugh",
            "Date of Birth": "1998-08-20",
            "Occupation": "student",
            "Member Since": "36 weeks 6 days"
        }
    }
 ]
} 
```

**但在 android 应用程序中它不会自动执行此操作。** ***所以我想在 Android 中维护这个会话，这样我就可以登录到 android 应用程序，登录后重定向到另一个页面活动并在那里获取 JSON 数据。*** 这是我的代码：

**登录活动.java**

```
 public void onClick(View v) {

            String uName = editUser.getText().toString();
            String Password = editPass.getText().toString();

            if(uName.equals("") | Password.equals(""))
            {
                Toast.makeText(getApplicationContext(), "Enter the Username and Password",Toast.LENGTH_SHORT).show();
            }
            else{

                                     String strResponse = util.makeWebCall(loginURL,uName,Password);
                 System.out.println("=========> Response from login page=> " + strResponse);

                try{
                    if (strResponse.substring(KEY_SUCCESS) != null) {
                        txterror.setText("");

                         Intent inlogin = new Intent(LoginActivity.this,
                                post_myprofile.class);
                        inlogin.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(inlogin);

                        //finish();
                    }
                    else
                    {
                        txterror.setText("Username and Password Not valid !!!");
                    }
                }
                catch (Exception e) {
                    // TODO: handle exception
                }

            }

        }
    });

    btngotoregister.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent1 = new Intent(getApplicationContext(),
                    RegisterActivity.class);
            // intent.setFlags (Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent1);

        }
    });
 }
 } 
```

util.java 中的 makeWebCall 方法

**实用程序.java**

```
 public static String makeWebCall(String url, String uname,String pass)
{
    DefaultHttpClient client = new DefaultHttpClient();

    HttpPost post = new HttpPost(url);

     List<NameValuePair> params = new ArrayList<NameValuePair>();

     params.add(new BasicNameValuePair("username",uname));
        params.add(new BasicNameValuePair("password",pass));

    UrlEncodedFormEntity formEntity = null;
    try {
        formEntity = new UrlEncodedFormEntity(params);
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    post.setEntity(formEntity);

    try {
        //post.setEntity(new StringEntity(requestString));

        HttpResponse response = client.execute(post);
        System.out.println("=========> Responsehello => "+response);
        int statusCode = response.getStatusLine().getStatusCode();

        if (statusCode == HttpStatus.SC_OK)
        {
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
        }
        else
        {
            return "Hello This is status ==> :"+String.valueOf(statusCode);
        }
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
} 
```

现在使用此代码登录成功，并且我从服务器获得了详细的 JSON 响应。& page-activity 重定向到用户个人资料的第二页。在**第二页上，我没有得到用户配置文件 JSON 数据——如上所述，我得到的是空白 JSON，因为没有维护会话。**

这是第二页活动的代码。

**post_myprofile.java**

```
protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        String url = "http://www.cheerfoolz.com/myaccount-page";
        String strResponse = util.makeWebCall(url);

        try {
            JSONObject objResponse = new JSONObject(strResponse);

            JSONArray jsonnodes = objResponse
                        .getJSONArray(API.cheerfoolz_myprofile.NODES); 
```

util.java 中配置文件的 makewebcall 方法

实用程序.java

```
 public static String makeWebCall(String url) {

    DefaultHttpClient client = new DefaultHttpClient();

    HttpGet httpRequest = new HttpGet(url);
  //  HttpPost post = new HttpPost(url);

    try {

        HttpResponse httpResponse = client.execute(httpRequest);

         final int statusCode = httpResponse.getStatusLine().getStatusCode();

         if (statusCode != HttpStatus.SC_OK) {
          /*  Log.i(getClass().getSimpleName(),
                "Error => " + statusCode + " => for URL " + url);*/
            return null;
         }

         HttpEntity entity = httpResponse.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
    }
    catch (IOException e) {
        httpRequest.abort();
      // Log.w(getClass().getSimpleName(), "Error for URL =>" + url, e);
    }

    return null;

 }

public static String iStream_to_String(InputStream is1)
{
     BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
     String line;
     StringBuilder sb =  new StringBuilder();
     try {
        while ((line = rd.readLine()) != null) {
                sb.append(line);
         }
         rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     String contentOfMyInputStream = sb.toString();
     return contentOfMyInputStream;
}

} 
```

**我在这个页面上得到了空白的 JSON - 我上面已经提到过。那么如何在此用户配置文件活动中维护会话并获取数据？**

感谢收听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:47:34.260

最后它为我工作:)

我没有一直使用新的**DefaultHttpClient**，而是将其设为静态并仅使用一次。

```
static DefaultHttpClient client = new DefaultHttpClient(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T05:36:15.740

```
package com.velmurugan.vazbo_new.utility;
import android.webkit.CookieManager;
import android.webkit.CookieSyncManager;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpException;
import org.apache.http.HttpRequest;
import org.apache.http.HttpRequestInterceptor;
import org.apache.http.HttpResponse;
import org.apache.http.HttpResponseInterceptor;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.cookie.Cookie;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HttpContext;
import java.io.*;
import java.util.ArrayList;
import java.util.List;
/**
 * Created by velsans@gmail.com on 11/1/2015.
 */
public class SessionParser {
    public SessionParser(){
    }
    public static String makeWebCall(String url,List<NameValuePair> params  )
    {
        CommonClass.httpClient = new DefaultHttpClient();
        HttpPost post = new HttpPost(url);
        UrlEncodedFormEntity formEntity = null;
        try {
            formEntity = new UrlEncodedFormEntity(params);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        post.setEntity(formEntity);
        try {
            HttpResponse response = CommonClass.httpClient.execute(post);
            System.out.println("=========> Responsehello => "+response);
            int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode == HttpStatus.SC_OK)
            {
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                return iStream_to_String(is);
            }
            else
            {
                return "Hello This is status ==> :"+String.valueOf(statusCode);
            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }
    public static String makeWebCall(String url) {
        System.out.println("=========> Response url => "+url);
        HttpGet httpRequest = new HttpGet(url);
        try {
            HttpResponse httpResponse = CommonClass.httpClient.execute(httpRequest);
            final int statusCode = httpResponse.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) {
          /*  Log.i(getClass().getSimpleName(),
                "Error => " + statusCode + " => for URL " + url);*/
                return null;
            }
            HttpEntity entity = httpResponse.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
        }
        catch (IOException e) {
            httpRequest.abort();
            // Log.w(getClass().getSimpleName(), "Error for URL =>" + url, e);
        }
        return null;
    }
    public static String iStream_to_String(InputStream is1)
    {
        BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
        String line;
        StringBuilder sb =  new StringBuilder();
        try {
            while ((line = rd.readLine()) != null) {
                sb.append(line);
            }
            rd.close();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String contentOfMyInputStream = sb.toString();
        return contentOfMyInputStream;
    }
} 
```

# java - 更好地理解 Java I/O

> ID：10510847
> 
> 赞同：2
> 
> 时间：2012-05-09T06:29:27.867
> 
> 标签：java, apache-commons, java-io

在 Java 网络输入流中，为什么不建议这样做：

```
 PdfReader localPdfReader = new PdfReader(item.getinputStream()); 
```

其中 item 是`FileItem`从客户端上传的。相反，建议这样做：

```
ByteArrayOutputStream output = new ByteArrayOutputStream();
IOUtils.copy(item.getInputStream(), output); 
```

两者有什么区别？
**编辑**
我才知道这是因为这里的输入流是网络流。因此，一旦读取了一个字节，您就无法再读取它。所以你必须在使用它之前将它复制到内存（IOUtils）。我的问题是，在复制到内存时，您还必须逐字节读取流，对吗？那么为什么输入流不在那里关闭呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:34:53.157

java中的流使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。它用于通过包装（装饰）向流添加功能。我最喜欢的是使用`GZipStream`,`FileStream`来增加压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T06:35:54.907

我想区别在于**Reader 和 Inputstream**。在您的示例中，PDF 文档是二进制数据，不应逐字符传输，而应逐字节传输。查看同一论坛中的[此链接](https://stackoverflow.com/questions/4367539/what-is-the-difference-between-reader-and-inputstream)，了解有关 Reader 和 InputStream 的更多信息。尽管它提到了 Reader 对 Stream 的包装，但正如前面提到的二进制数据，这应该是不鼓励的。

编辑：1

让我们检查一下 Reader 和 InputStream 的 read 方法的工作方式

`Reader.read()` [返回](http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html#read%28%29)0 到 65535 范围内的整数（单个 16 位 Unicode 字符）

`InputStream.read()` [返回](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)数据的字节（8 位有符号二进制补码整数）

现在想象一下，如果您使用 Reader 读取二进制数据（即 8 位整数序列），您最终将读取两个字节 (8*2) 而不是假设它是一个字符。

我还没有看到代码， `PdfReader`所以不确定它是否使用`java.io.Reader`. 这种解释纯粹是为了`java.io.Reader/InputStream`。如果您分享一些链接或帖子，其中说明`PdfReader`如果以您提到的方式使用，我将不胜感激。

编辑：2

记住：

1.  从网络中，您只能读取一次流字节。
2.  如果您需要这些字节用于多个任务，最好将这些字节存储在数组中并多次使用同一个数组

如果你使用

`PdfReader localPdfReader = new PdfReader(item.getinputStream());`

然后 PdfReader 在内部从流中读取字节并使用它进行验证。它**不会**存储它以供进一步使用。

如果你使用

```
IOUtils 
```

它将字节从网络复制到一个字节数组，稍后可以使用该数组`PdfReader`以及 JDBC 调用将其存储在 DB 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T00:20:52.367

> 相反，这是推荐的

由谁推荐？为什么？自 1997 年以来，我从未在任何 Oracle 或 Sun 文档中看到过这样的声明。OTOH 有很多来自其他来源的错误信息。

*在某些情况下*可能会推荐它，即您必须多次读取数据的情况。这些情况非常罕见。

# wordpress - 使用 .htaccess 重定向 URL 的一部分

> ID：10510848
> 
> 赞同：0
> 
> 时间：2012-05-09T06:29:39.670
> 
> 标签：wordpress, .htaccess

我正在尝试将 301 重定向到新的类别名称：

[http://www.site.com/category1/post1/](http://www.site.com/category1/post1/) 到 [http://www.site.com/category1-new/post1/](http://www.site.com/category1-new/post1/)

还有其他页面在其 URL 中也带有“category1”，因此它必须完全是“/category1/”并且紧跟在域名之后。

我尝试了不同的模式，但它们总是以无限循环结束。

编辑：

代码：

```
RewriteCond %{HTTP_HOST} ^site-suchen.de$ [OR]
RewriteCond %{HTTP_HOST} ^www.site-suchen.de$
RewriteRule ^site\/(.*)$ "http://www.site-suchen.de\/site-new\/$1" [R=301,L] 
```

所以实际的网址：

```
http://www.site-suchen.de/site/post1 
```

需要重定向到

```
http://www.site-suchen.de/site-new/post1 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:29:45.983

这里重要的事情可能是您希望使用 ^ 和 $ 来标记您要匹配的字符串的开头和结尾。尽管这只是一个猜测，除非您发布一些您已经尝试过的代码。

```
RewriteRule ^category1/post1/$ category1-new/post1/ 
```

或者它可能是（我不记得你是否在模式和/或替换字符串中指定了 / ）：

```
RewriteRule ^/category1/post1/$ /category1-new/post1/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:51:28.427

你可以使用重定向匹配吗？

```
RedirectMatch 301 ^/(site1|site2|category1)(/.*|$) /$1-new$2 
```

从长远来看，此代码是可维护的，因为您只需在括号内添加新路径（ site1 site2 category1 等）

我在本地主机上试过这个，它应该可以解决你的问题

干杯!

# ssl - 如何验证正在进行的 ssl 会话的证书

> ID：10510850
> 
> 赞同：2
> 
> 时间：2012-05-09T06:29:47.857
> 
> 标签：ssl, openssl

我正在使用 SSL 创建安全连接并使用 CA 认证的证书。进行 ssl 会话后，我想检查证书的有效性，如果它无效，我需要中断所有正在进行的会话。

如何跟踪正在进行的 ssl 会话以检查使用此证书建立了多少会话。是否有任何 api 来跟踪 ssl 活动会话。

我是否应该使用 SSL_CTX_remove_session() 来终止 SSL 会话。或者是否有任何特定的 API 用于终止 openSSL 中的 SSL 会话。如果支持恢复，是否会保留此会话的单独副本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:01:56.843

连接到服务器后，您可以通过 `SSL_get_verify_result()` [查看手册页](https://www.openssl.org/docs/ssl/SSL_get_verify_result.html)获得证书验证结果。

`SSL_get_session()` [之后，您可以通过手册页](http://linux.die.net/man/3/ssl_get_session)获取连接的关联会话，并通过`SSL_CTX_remove_session()`.

这不会取消正在使用此会话的每个连接，但会确保没有新连接重用旧的（无效和删除的）会话。要关闭连接，请使用`SSL_shutdown()`.

不要忘记将 OCSP 和 CRL 检查添加到您的代码中。

如果您真的想跟踪使用过的会话，一种方法是包含您自己的会话处理回调，请参阅[会话处理文档](https://www.openssl.org/docs/ssl/SSL_CTX_sess_set_get_cb.html)并跟踪`SSL`需要终止的对象。

评论后编辑：

此代码应允许您随时重新检查证书，并重新检查 CRL 状态。

```
 X509_CRL *crl;
  /* load crl */
  FILE *fp = fopen(/*path to crl */, "r");
  d2i_X509_CRL_fp(dp, &crl);

  X509 *cert = SSL_get_peer_certificate(ssl); //ssl is your running connection
  X509_STORE *store = SSL_CTX_get_cert_store(ctx);
  /* add crls */
  X509_STORE_add_crl(store, crl);
  X509_VERIFY_PARAM *param = X509_VERIFY_PARAM_new();
  X509_VERIFY_PARAM_set_flags(param, X509_V_FLAG_CRL_CHECK);
  X509_STORE_set1_param(store, param);

  X509_STORE_CTX *csc = X509_STORE_CTX_new();
  X509_STORE_CTX_set_verify_cb(csc, /* your verify callback here */);
  X509_STORE_init(csc, store, cert, NULL);
  int ret = X509_verify_cert(csc); 
```

# jquery - 使用超大尺寸与 Cakephp 时不显示图像

> ID：10510852
> 
> 赞同：0
> 
> 时间：2012-05-09T06:30:05.730
> 
> 标签：jquery, cakephp-1.3, supersized

我目前正在为客户开发一个简单的网站。请求很简单，主页滑块应使用全屏宽度。所以我们决定使用[Supersized](http://buildinternet.com/project/supersized/)。但客户还希望将项目扩展到 CMS。所以我们的选择是cakephp。

现在我已经开发了静态站点（没有框架），它托管在[http://pyxis.co.in/unifi3/](http://pyxis.co.in/unifi3/) ... 而 cakephp 站点是[http://pyxis.co.in/unifi/](http://pyxis.co.in/unifi/)

您可以在使用 cakephp 时看到图像，即使它们出现在未显示的资源中。但是静态站点没有显示幻灯片的问题。

我已经尝试了很多东西，从 CSS 到 javascript 解决方案。但现在我不确定我在这里做错了什么。

你能把我从这个地狱里救出来吗？

谢谢你。

# java - 什么是缓存字符串？

> ID：10510857
> 
> 赞同：4
> 
> 时间：2012-05-09T06:30:56.497
> 
> 标签：java, c, string, java-native-interface

什么是*缓存字符串*？或者什么是*字符串缓存*？我在 JNI 中多次阅读过这个术语，但不知道它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:48:08.833

[缓存](http://en.wikipedia.org/wiki/Cache_%28computing%29)提高了性能（这对 JNI 很重要）并减少了内存使用。

这是一个简单的字符串缓存示例，如果您对简单的缓存算法如何工作感兴趣 - 但这实际上只是一个示例，我不建议您在代码中实际使用它：

```
public class StingCache {

    static final String[] STRING_CACHE = new String[1024];

    static String getCachedString(String s) {
        int index = s.hashCode() & (STRING_CACHE.length - 1);
        String cached = STRING_CACHE[index];
        if (s.equals(cached)) {
            return cached;
        } else {
            STRING_CACHE[index] = s;
            return s;
        }
    }

    public static void main(String... args) {

        String a = "x" + new Integer(1);
        System.out.println("a is: String@" + System.identityHashCode(a));

        String b = "x" + new Integer(1);
        System.out.println("b is: String@" + System.identityHashCode(b));

        String c = getCachedString(a);
        System.out.println("c is: String@" + System.identityHashCode(c));

        String d = getCachedString(b);
        System.out.println("d is: String@" + System.identityHashCode(d));

    }

} 
```

# android - Android：如何判断错误的位置

> ID：10510861
> 
> 赞同：1
> 
> 时间：2012-05-09T06:31:17.923
> 
> 标签：android, compiler-errors

在 Eclipse 中，我的代码将无法编译。项目名称旁边有一个红色 X，我收到修复我的应用程序的警告，但我没有被告知问题出在哪里。通常我会在控制台中看到错误并显示为红色，但偶尔不会显示错误消息。这令人沮丧，因为它很难找到错误。我怎样才能找出问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:37:56.543

通过双击展开项目并导航到每个文件。查看所有带有红十字标志的单个文件。您可以看到与有错误的行对应的红色标记。更好地查看源文件以及 .xml 文件

如果项目显示红色感叹号而不是叉号，最好查看项目的默认属性。很可能，目标 api 级别无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:04:29.060

在这些情况下，您会收到此消息异常：`Your project contains error(s), please fix it before running it`执行以下步骤：

**1）**重新启动eclipse并清理你的项目。如果问题仍未解决，请转到步骤 2

**2）**这也可能是由过时的“调试证书”引起的，修复如下：

删除您的调试证书`~/.android/debug.keystore`（在 Linux 和 Mac OS X 上）；该目录类似于`%USERPROFILE%\.android`Windows。

当您下次尝试构建调试包时，Eclipse 插件应该会生成一个新证书。您可能需要清理然后构建以生成证书。

**3）**在重建您的项目之前，从设备或模拟器中卸载您的应用程序

享受！

[我的参考](https://stackoverflow.com/a/4954351/779408)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:11:32.390

有时我也面临这个问题。我的方法是创建一个新项目，然后将所有内容复制并粘贴到新项目中。这些来自 Eclipse IDE 的未定义错误，因此您无能为力。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:35:59.330

删除 debug.keystore 文件。它位于 Android-SDK/AVDs/.android 下。

# c# - 如何使用 asp.net 直接打印我的网页而不出现打印对话框？

> ID：10510862
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:31:22.800
> 
> 标签：c#, printing

如何使用asp.net和c#.net直接打印我的网页而不打印对话框我的代码是

```
window.frames['iFramePdf'].print(); 
```

我已经单击打印按钮生成 pdf 文件并显示 iframe 并自动打印该 pdf 文件而没有打印对话框请帮助我任何人

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:34:22.780

通常没有办法从浏览器中做到这一点，以防止恶意页面逐页打印（例如）纯黑色。接受弹出对话框，或者不使用 html。

ASP.NET 根本没有涉及，因为这是（大概）客户端。

当然，另一种方法是使用专门的服务来下拉页面，然后从服务中打印（实际上，我的上一个雇主曾经使用这种方法进行大量打印；它工作得很好）——但这不是一个浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:15:52.613

我认为您可以使用 activeX 控件和 VBscript 绕过打印对话框。

```
<script language='VBScript'>
Sub Print()
   OLECMDID_PRINT = 6
   OLECMDEXECOPT_DONTPROMPTUSER = 2
   OLECMDEXECOPT_PROMPTUSER = 1
   call WB.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
End Sub
document.write "<object ID='WB' WIDTH=0 HEIGHT=0 CLASSID='CLSID:8856F961-340A-11D0-   A96B-00C04FD705A2'></object>"
</script> 
```

这取代了默认的打印功能。然后您可以使用javascript触发打印

```
window.print(); 
```

# ios - RubyMotion 是否适用于 facebook-ios-sdk？

> ID：10510863
> 
> 赞同：1
> 
> 时间：2012-05-09T06:31:24.663
> 
> 标签：ios, facebook, rubymotion

在购买 RubyMotion 之前，我想知道它是否支持 3rd 方 SDK，例如：`facebook-ios-sdk`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:48:23.943

虽然我没有彻底测试过，也不能代表所有 SDK/库，但我可以确认这个特定的 SDK 可以在 RubyMotion 项目中编译和工作。您只需要按照 RubyMotion 网站上的 CocoaPods 说明进行操作，并将以下内容添加到您的`Rakefile`:

```
require 'motion-cocoapods'

# In the setup block, add this:
app.pods do
  dependency 'Facebook-iOS-SDK'
end 
```

然后当你运行时`rake`，将编译支持。

# iphone - 在我的 main.m 中获取 EXC_BAD_ACCESS

> ID：10510869
> 
> 赞同：0
> 
> 时间：2012-05-09T06:31:56.277
> 
> 标签：iphone, ios, cocoa-touch

这是我收到错误的代码：

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {   
  currentElement = [elementName copy];
  NSLog(@"didEndElement : %@",currentElement);

  if ([currentElement isEqualToString:@"NewDataSet"]) {
    [dicEvent setObject:catIDArray forKey:@"term_id"];
    [dicEvent setObject:catArray forKey:@"cat_name"];
    [dicEvent setObject:catTimgArray forKey:@"thumb_nail_url"];
    [dicEvent setObject:catLimgArray forKey:@"large_image_url"];

    [xmlData addObject:[dicEvent copy]];  
  }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {
  if ([catArray count] == 0) {
    UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle:@"Data" 
                               message:@"No record found." 
                              delegate:self
                     cancelButtonTitle:@"OK" 
                     otherButtonTitles:nil]; 

    [alert show];     
    [alert release];
    [activityIndicator stopAnimating];
    activityIndicator.hidesWhenStopped = YES;
  }
  else {
    NSLog(@"adding category : %@", xmlData);
    [tblView reloadData];
  }
} 
```

并且当表加载时，我在此方法中遇到错误....它在行 return[xmlData count]; 上给出错误

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
  NSLog(@"[xmlData count] 2 : %d", [xmlData count]);
  return [xmlData count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:42:36.840

您发布的第一种方法存在内存泄漏。您创建了`elementName`字符串的副本，但从不释放它。此外，您还没有指定如何初始化`xmlData`，但我会冒险猜测并说您使用不拥有的数组对其进行了初始化。在你的`init`方法中，确保你有：

```
xmlData = [[NSMutableArray alloc] init]; 
```

这可确保您拥有该对象。在你的`dealloc`方法中，你也应该有`[xmlData release]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:42:59.947

```
NSMutableArray *xmlData = [[NSMutableArray alloc] init]; 
```

并将 NSLog 放入

# css - 箱形阴影分层

> ID：10510870
> 
> 赞同：1
> 
> 时间：2012-05-09T06:32:03.583
> 
> 标签：css, shadow

好的，所以当我意识到这一点时，我正在弄乱盒子阴影

[http://i.stack.imgur.com/I3E9E.png](http://i.stack.imgur.com/I3E9E.png)（抱歉无法发布图片）

导航栏被阴影覆盖，我试图在代码中将内容 ID 设置得越来越高，但它不会进入导航下方。如果不可能，有人可以帮我在除顶部之外的所有侧面制作阴影吗？

我用于阴影的代码如下。

```
box-shadow:0px 0px 15px rgba(0, 0, 0, 0.5); 
```

网页链接：[这里](http://www.jakebobjo.com/test2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:37:32.273

将此添加到您的CSS：

```
#nav {
    position: relative;
    z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:38:30.047

尝试使用 z-index 将内容框移动到标题层下方...

在你之后

```
box-shadow:0px 0px 15px rgba(0, 0, 0, 0.5); 
```

放

```
z-index:2; 
```

并且一定要添加

```
z-index:1; 
```

到你的标题 css ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:36:31.370

您可以将 y 轴定义为正数，然后它不应与您的标题重叠：

```
box-shadow:0px 5px 15px rgba(0,0,0,0.5); 
```

当然，底部比侧面要长一点，但是使盒子阴影更微妙（如`box-shadow:0px 5px 7px rgba(32,32,32,0.5)`）可能会更好。

**编辑：** #nav 的 z-index（如 Lollero 建议的）可能比这更好。

# java - jvm的抽象机器概念

> ID：10510874
> 
> 赞同：7
> 
> 时间：2012-05-09T06:32:37.520
> 
> 标签：java, jvm, vm-implementation

我试图理解将 java 实现为抽象机或虚拟机的真正优势，或者换句话说，将语言编译为抽象机语言的优势。就平台独立性而言，我正在考虑以下两种替代实现：

*   只是有一个解释器，它可以将 java 直接翻译成它正在运行的机器的机器代码，并且对于不同类型的机器有多个这样的解释器实现。

*   第一个选项在空间上效率不高，那么如何将源代码编译为一种中间语言，这种语言不是抽象机器的语言，而只是可以解释为机器代码的某种语言，然后具有此类解释器的多个实现。

如果不考虑性能，那么拥有抽象机器与这些选项相比如何。换句话说，如果 java 字节码不是虚拟机的语言，而只是某种中间语言会怎样。会失去哪些特性和好处（性能除外）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T07:13:51.803

字节码*只是*一种中间语言。

或者反过来：中间语言的实现是虚拟机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:02:01.623

如果 Java 在执行时直接转换为机器代码，您将失去编译器提供的类型安全特性。编译器不报告错误的事实保证了某些类型的错误不会在运行时发生；如果您删除编译器阶段，您会在运行时看到这些错误。

另一方面，Java 字节码*是*一种中间语言，即使它比其他语言高一点。JVM 部分通过解释和部分通过编译为机器代码来执行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T07:06:08.757

您所描述的本质上是 Java 和 JVM 目前所做的。Java 被编译成一种叫做*bytecode*的东西，它是一种中间语言（它看起来很像基于堆栈的机器的汇编）。然后 JVM 解释这个代码，在一个叫做[Just In Time (JIT) 编译](http://en.wikipedia.org/wiki/JIT_compilation)的过程中将它的一部分动态地翻译成机器代码。JVM 做其他有助于可移植性的事情（如管理并发和内存结构/管理）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T07:28:10.090

所有变体实际上都在实践中使用，这都是关于选择适当的折衷方案。

对于 Java - 方便许多平台分发，启动时间较慢：

*   编译为字节码的 Java 源代码
*   字节码解释和/或
*   字节码 JIT 编译为机器码

对于 JavaScript - 最方便的分发/需要做很多工作才能使其快速）：

*   JavaScript 源代码解析+解释或 JIT 编译为机器代码

对于 .NET - AOT 具有 VM 语言的所有优点，同时保持快速启动时间，但主要锁定在一种目标系统类型：

*   C#/F#/VB/...编译成IL（中间语言/另一种字节码）
*   .NET IL 代码解释和/或
*   .NET IL JIT 编译为机器码或
*   .NET IL AOT 编译（提前）（主要是 x86）和分布式编译

这只是最常用的，但是您可以将 javascript 编译为字节码，将 java 预编译为机器代码，您甚至可以像 GWT 一样将 Java 编译为 javascript，等等（只有很多工作才能使其可用）

# ios - Xcode 4.3.2 缺少 iOS 4.0 模拟器

> ID：10510876
> 
> 赞同：1
> 
> 时间：2012-05-09T06:32:51.073
> 
> 标签：ios, xcode, xcode4, ios-simulator, simulator

我有最新版本的 Xcode (4.3.2) 并设置`Deployment Target`为 4.0。但是没有iOS 4.0 模拟器只有4.3 及以上。

![在此处输入图像描述](../Images/231a3a55c8893510e41de21677bb34a1.png)

有没有简单的方法在 Xcode 中安装 iOS 4.0 模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:46:29.733

Apple 已停止在其 Xcode 4.3.2 SDK 中支持运行 iOS 4.3 之前操作系统的设备。因此，您可能需要安装以前的 Xcode SDK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T23:20:30.050

按照以下步骤添加（新）模拟器

1.  单击**模拟器**图标并打开模拟器列表。
2.  在列表的末尾，有一个添加新模拟器的选项“**添加附加模拟器**”。这将打开**“设备和模拟器”**窗口。
3.  切换到**“模拟器”**选项卡。
4.  模拟器选项卡中有三个字段。
5.  单击窗口左下角的**“+”图标。**
6.  模拟器名称：*在此处输入模拟器名称*
7.  设备类型：*从此下拉列表中**选择**iPad***
8.  操作系统版本：*从此下拉列表中选择操作系统版本*
9.  点击**“创建”**

一个新的模拟器将添加到您的模拟器选项列表中。

查看此快照以了解上述步骤的流程： [![在此处输入图像描述](../Images/e8577f008ba67682208ef88d624f0d41.png)](https://i.stack.imgur.com/4GkdY.png)

如果模拟器列表中没有模拟器/操作系统版本，您正在寻找，

1.  单击**模拟器**图标并打开模拟器列表。
2.  在列表的末尾，有一个添加新模拟器“**下载模拟器**”的选项。这将打开**“组件”**窗口（来自 Xcode >> 首选项）。
3.  从您需要下载的列表中选择/单击模拟器。

看这个快照： [![在此处输入图像描述](../Images/5d4bad61ae82b515b0637ab11546a8ab.png)](https://i.stack.imgur.com/D34su.png)

# delphi - 如何远程调试使用运行时包构建的 Win32 VCL 应用程序

> ID：10510877
> 
> 赞同：6
> 
> 时间：2012-05-09T06:32:59.833
> 
> 标签：delphi, delphi-xe2, remote-debugging

我编写了一个简单的 VCL win32 应用程序，它具有以下代码：

```
procedure TForm5.Button1Click(Sender: TObject);
begin
  ShowMessage('bingo');
end; 
```

我用运行时包编译了应用程序并打开了以下开关：

1.  调试信息 -> true
2.  包括远程调试符号 -> true
3.  断言、调试信息、本地 smbols、使用 debug dcus -> true

输出具有以下文件：

1.  项目1.exe
2.  项目1.rsm

这两个运行时包是：

1.  vcl160.bpl
2.  rtl160.bpl

我在 Button1Click 处理程序中设置了一个断点，如果我在调试器模式下运行应用程序，本地 IDE 调试器将停在那里。

接下来，我想尝试使用运行时包远程调试应用程序。

我将远程配置文件分配给 32 位 Windows 平台。测试连接适用于远程配置文件。PAServer 也在远程机器中启动。尝试使用 Delphi XE2 IDE 调试器运行应用程序时，我注意到 4 个文件被复制到远程计算机：

1.  项目1.exe
2.  项目1.rsm
3.  vcl160.bpl
4.  rtl160.bpl

但是，事件日志显示：

```
Module Load: Project1.exe. No Debug Info. Base Address: $00400000\. Process Project1.exe (1676) 
```

由于模块没有调试信息，所有断点将无法触发。

我尝试构建没有运行时包的单文件 .exe 应用程序。相同的远程调试器步骤工作，我可以远程调试应用程序。

是什么导致使用运行时包构建的应用程序远程调试失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:29:11.590

看起来您必须额外部署与使用的运行时包相对应的“.dcp”文件。

来自[调试器说明](http://docwiki.embarcadero.com/RADStudio/en/Release_Notes_for_XE2#Debugger_Notes)（XE2 的发行说明）：

> **通过将 .dcp 文件添加到应用程序部署来确保调试信息**
> 
> 如果您的 Delphi 应用程序与运行时包链接，则可能不会生成预期的调试信息。这适用于 Mac OS X 应用程序和远程 Win64 或远程 Win32 应用程序。解决方法是使用部署管理器添加与运行时软件包列表中的运行时软件包相对应的 .dcp 文件。例如，如果您使用 rtl，则必须部署 rtl.dcp 文件。
> 
> 使用位于 Embarcadero\Rad Studio\9.0\lib 目录中的 .dcp 文件，如下所示：
> 
> *   对于 OS X 应用程序：Embarcadero\Rad Studio\9.0\lib\osx\release
> *   对于远程 64 位 Windows 应用程序：Embarcadero\Rad Studio\9.0\lib\win64\release
> *   对于远程 32 位 Windows 应用程序：Embarcadero\Rad Studio\9.0\lib\win32\release

# jquery - 尝试使用 jQuery 查看 pdf、Doc、文本、图像文件

> ID：10510883
> 
> 赞同：3
> 
> 时间：2012-05-09T06:33:33.523
> 
> 标签：jquery, jquery-plugins

我想要打开/预览 pdf。使用 Jquery 的 doc、文本、图像文件...我的 Web 应用程序是使用 ASP.Net MVC 构建的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T06:43:50.107

检查github的这个链接它的javascript pdf查看器你可以在你的jquery中使用它。 [http://mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)

这是jquery中的pdf查看器插件列表列表

[http://www.jquery4u.com/javascript/javascriptjquery-pdf-viewer-plugins/](http://www.jquery4u.com/javascript/javascriptjquery-pdf-viewer-plugins/)

这是来自 jquery 网站的 jQuery 图像查看器插件代码它自己 - 它的厚框插件。

[http://jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)

如果您想在您的网站页面中显示 pdf - 在 .php 网站页面中，那么您可以使用 tcpdf php 类。

这是它的链接检查它。 [http://www.tcpdf.org/](http://www.tcpdf.org/)

这是pdfobject的链接

[http://pdfobject.com/](http://pdfobject.com/)

PDFObject 将 PDF 文件嵌入到 HTML 文档中

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:13:31.610

目前它非常基本，但我已经开始构建它：

[http://dev.funkynerd.com/projects/jquery-pdfdoc](http://dev.funkynerd.com/projects/jquery-pdfdoc)

# google-maps - 修复我所在地区类别错误的 Google 地方信息

> ID：10510887
> 
> 赞同：0
> 
> 时间：2012-05-09T06:33:49.490
> 
> 标签：google-maps, google-places-api

我正在开发一个应用程序，我需要一个人站立的商店，我开始使用 Google Places，但在我的城市中标记的地方在 google 数据库中的“类型”都是错误的，例如附近有一家餐馆“XYZ”这个名字现在出现在餐馆下面，但在一些“机构”类型中......有没有办法修复这些类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:52:15.773

所有地点都归类在该类型下，`establishment`直到 Google 有足够的关于某个地点的元数据将其归类为更具体的地点类型`bar`，例如`cafe`和`restaurant`。

可能会找到更多结果的解决方法是`keyword`在您的请求中使用参数，并将“餐厅”之类的值作为值。

例如

> [https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&keyword=restaurant&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&keyword=restaurant&sensor=false&key=YOUR_API_KEY)

根据[文档](http://code.google.com/apis/maps/documentation/places/)：该`keyword`参数与所有可用字段匹配，包括但不限于姓名、类型和地址，以及客户评论和其他第三方内容。

[您还可以按照此处](http://support.google.com/maps/bin/answer.py?hl=en&answer=171429)的说明更新商家信息以包含正确的类型。

# sql - 带有 Select * Like * 的 WebGrid

> ID：10510888
> 
> 赞同：0
> 
> 时间：2012-05-09T06:34:10.737
> 
> 标签：sql, razor, webmatrix, webgrid

我使用 WebGrid 来显示以下结果：

> select * from table where column like '**';

显示结果没有问题。

但是，如果我单击 WebGrid 的列名对结果进行排序，则会出现错误或页面上没有显示任何内容。

我该怎么做才能使 WebGrid 排序工作？

```
 @{
        Layout = "~/_SiteLayout.cshtml";
        Page.Title = "Test"; 

        var value = "";
        var sqlquery = "";
        var isvalid = true;
        var searchaskey = "";
        var grid = new WebGrid();

        if(IsPost)
        {
            value = Request.Form["input"];
            if(string.IsNullOrEmpty(value))
            {
                isvalid = false;
            }
            if (isvalid)
            {
                searchaskey = "'%" + value + "%'";
                sqlquery = "select * from joblist where JobCategory like " + searchaskey;
                var db = Database.Open("StarterSite");
                grid = new WebGrid( db.Query(sqlquery));
            }
        }
    }

<form method="post" action="Test.cshtml">
@value
@sqlquery
<div>
<input name="input" type="text" value=@value>
<button type="Submit">Submit</button>
</div>
</form>

    @{
        if(IsPost)
        {
            @grid.GetHtml(
                columns:grid.Columns(
                    grid.Column(columnName : "JobTitle",header:"  Job Title  "),
                    grid.Column(columnName : "JobCategory",header:"  Job Category  "),
                    grid.Column(columnName : "CompanyName",header:"  Company Name  "),
                    grid.Column(columnName : "PostedOn",header:"  Post Date  ")
                )
            )
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:41:33.707

webGrid 的工作方式是，当您单击要使用的列时，浏览器会返回到服务器以根据新的排序列查找新列表。但是，您的代码正在测试它是否是 POST，如果它不是帖子，则不返回任何结果。

要解决此问题，您的代码需要在 POST 上保存搜索条件，以便在后续 GET 中使用搜索条件。你会这样做

```
Session["MySavedSearchAsKey"] = searchaskey; 
```

然后，当有 GET 时，您会检查 Session["MySavedSearchAsKey"] 中是否有内容。如果是，请继续运行您的查询并生成 webGrid。如果它是空的，那么不要做任何事情。

最后，你的代码行

```
sqlquery = "select * from joblist where JobCategory like " + searchaskey; 
```

永远不要像这样构建一行 SQL。用 SQL 注入攻击来攻击这种类型的代码是微不足道的。反而，

```
sqlquery = "select * from joblist where JobCategory like %0";

results = db.Query( sqlquery, searchaskey); 
```

这称为参数化 SQL，是从代码与数据库对话的安全方式。%0 将替换为您在 Query 语句中传递的参数，因此它与您的查询完全相同，但只是以一种非常安全的方式。

祝你好运！

# c# - 我真的需要在收集时使用 AsQueryable() 吗？

> ID：10510890
> 
> 赞同：17
> 
> 时间：2012-05-09T06:34:15.630
> 
> 标签：c#, .net, linq, list, asqueryable

示例代码：

```
List<Student> Students = new List<Student>()   
{   
    new Student(101, "Hugo", "Garcia", new List<int>() { 91, 88, 76, 93 }),  
    new Student(102, "Rick", "Adams", new List<int>() { 70, 73, 66, 90 }),  
    new Student(103, "Michael", "Tucker", new List<int>() { 73, 80, 75, 88 }),  
    new Student(104, "Fadi", "Fakhouri", new List<int>() { 82, 75, 66, 84 }),  
    new Student(105, "Peter", "Barrows", new List<int>() { 67, 78, 70, 82 })  
};

var query = from student in Students
            where student.Marks.AsQueryable().All(m => m > 70)
            select student;

foreach (Student student in query)
{
    Console.WriteLine("{0} {1}<br />", student.FirstName, student.LastName);
} 
```

但是如果我将查询更改为

```
var query = from student in Students
            where student.Marks.All(m => m > 70)
            select student; 
```

这也有效并产生相同的结果，那么有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T06:42:31.547

对于来自远程源（如来自数据库）的对象，需要/推荐使用 IQueryable。

因为在内存集合中它是没有用的。

[AsQueryable](http://msdn.microsoft.com/en-us/library/bb507003.aspx)在要构建表达式树时使用。

我能想到最适合的场景。在您的示例中，假设您需要基于学生 ID 的数据库中的一些信息。

现在学生正在记忆收集中。您需要根据学生 ID 触发数据库查询。

```
 var studentList = Students.Select(s => s.Id).AsQueryAble().Select(i => remoteDBProvider.GetInfo(i)); 
```

对 studentList 的任何进一步操作都将从 IQueryAble 接口（查询表达式）调用，并且只会从数据源中获取那些应该作为最终查询结果返回的记录（只要数据源，`remoteDBProvider.GetInfo`示例中的返回值，支持[查询提供者](http://msdn.microsoft.com/en-us/library/bb546158.aspx)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T06:51:16.250

在你的情况下`List<Student>`，它没有任何区别，因为返回的`IQueryable<T>`将使用相同的方法进行查询，就好像你根本没有使用[`AsQueryable()`](http://msdn.microsoft.com/en-us/library/bb507003.aspx)过一样。

一些方法需要一个[`IQueryable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)参数。我认为`AsQueryable()`扩展方法对于那些场景最有用，当你需要传递一个`IQueryable<T>`但只有一个`IEnumerable<T>`.

MSDN 说`AsQueryable`：

> 如果 source 的类型 implements `IQueryable<T>`， `AsQueryable<TElement>(IEnumerable<TElement>)`则直接返回。否则，它返回一个`IQueryable<T>`通过调用等效查询运算符方法 in`Enumerable`而不是in 来执行查询的`Queryable`。

所以这意味着在你的情况下（`List<T>`不实现`IQueryable<T>`），你真的不需要`AsQueryable`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T06:39:26.723

它必须执行表达式树的构建方式。看这个：

> AsQueryable 是一种允许将查询转换为 IQueryable 实例的方法。当您对现有查询使用 AsQueryable 运算符并应用进一步的转换（例如应用过滤器或指定排序顺序）时，这些 lambda 语句将转换为表达式树。根据您使用的提供程序，表达式树将被转换为特定于域的语法，然后执行。在 Linq to SQL 提供程序的情况下，表达式树将被转换为 SQL 并在 SQL 服务器上执行。但是，如果您在未实现 IQueryable 且仅实现 IEnumerable 的查询上使用 AsQueryable 运算符，那么您对查询应用的任何转换都将自动回退到 IEnumerable 规范。这意味着通过使用 AsQueryable 标记查询，您可以获得 Linq to SQL 和 Linq to object 实现的好处。如果您现有的查询恰好实现了 IQueryable，则查询将由 Linq to SQL 提供程序转换为 SQL，否则查询将以 IL 代码形式在内存中执行。

参考[这里](http://weblogs.asp.net/zeeshanhirani/archive/2008/07/31/using-asqueryable-with-linq-to-objects-and-linq-to-sql.aspx)

# c# - c#中的多线程-共享文件访问

> ID：10510893
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:34:34.443
> 
> 标签：c#, multithreading

我有一个名为 WriteMsg 的方法，它被多个线程同时调用，但我得到一个异常 **java.nio.channels.OverlappingFileLockException**。我怎么能解决这个问题？我的代码类似于下面给出的。

```
public void WriteMsg(string Msg)
{
    Mutex objMutex = new Mutex(false, "ThreadLock");
    objMutex.WaitOne(); 
    using (StreamWriter sw = new StreamWriter(sPathName, true))
    {
        sw.WriteLine(Msg);
        sw.Flush();
        sw.Close();
    }
    objMutex.ReleaseMutex();
    objMutex.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:40:49.710

您是否可以将此方法标记为一次允许一个线程？然后，一旦前一个呼叫完成，就会进行下一个呼叫。

将此属性放在您的班级上：

```
[MethodImpl(MethodImplOptions.Synchronized)] 
```

和使用语句：

```
using System.Runtime.CompilerServices; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:42:42.753

哦，伙计，你甚至不知道你使用什么语言？

代码标记为 C#。错误消息是... java.nio.channels.OverlappingFileLockException。你猜怎么着——Java 不是 C#。Yopur 代码是 C#，但 Java 是个例外——怎么会？我强烈认为我们在这里看不到整个故事。C# 代码不会引发 Java 异常。

无论如何，重点是——不要同时从多个线程访问同一个文件，这意味着某种锁定机制。您使用 Mutex 的方法听起来很明智（但是鉴于您 CLELARY 在代码中使用 C#，Java 会在哪里进入游戏？）我会开始使用 ProcessExplorer 并找出 - 啊 - 什么是锁定文件。可能不是作者？READS 可能是其他东西吗？如果它超出了进程或其他原因，那么您的 Mutex 将无济于事。带有等待 + 重试的 try / catch 可能。

那说：

检查你的互斥锁。您在方法中创建互斥锁。WaitOne 永远不会等待。您需要在方法调用之间保留 Mutex，并确保所有调用都使用相同的 Mutex。现在你说“只有最低的号码才能进去”，但你给了每个人一张相同号码的票。Mutex 必须在所有调用者之间共享，因此不能在方法中定义。根据类设计，您需要一个实例变量、静态变量、字典 opf 互斥锁（由路径键控）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:44:54.430

1）假设您只想让所有`WriteMsg`调用一个接一个地运行，您不需要弄乱互斥锁，您可以使用 C# 的[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)语句，它包装了对`Monitor.Enter`and的调用`Monitor.Exit`。

2）由于您在`using`StreamWriter 上使用，因此无需手动刷新和关闭。

所以你的方法看起来像这样：

```
private object _lockObject = new object(); // shared by all threads.
public void WriteMsg(string Msg)
{
     lock (_lockObject)
     {
        using (StreamWriter sw = new StreamWriter(sPathName, true))
        {
            sw.WriteLine(Msg);
        }

     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:45:11.990

`Mutex`在每次调用这个函数时创建一个新的有什么意义？每个线程都是独立的`Mutex`......让`Mutex`所有线程共享。

# java - 使用 jUnit 测试单例

> ID：10510894
> 
> 赞同：2
> 
> 时间：2012-05-09T06:34:34.597
> 
> 标签：java, junit, singleton

我有一个工厂类来检索我的应用程序的配置：

```
public class ConfigurationFactory {
private static ConfigurationFactory configurationFactory = new ConfigurationFactory();

private Configuration configuration = null;

public static ConfigurationFactory getConfigurationFactory() {
        return configurationFactory;
    } 
```

还有一些 getConfiguration 方法，具体取决于我从哪里获取配置（文件、数据库、默认值等...）：

```
public Configuration getConfiguration(String path){...}
public Configuration getConfiguration(String database){...} 
```

我的问题是，当我对每种方法进行单元测试时，我必须重新启动单例以便从不同的源加载，所以我唯一想到的就是添加这个：

```
public void resetConfiguration() {
 this.configuration = null;
} 
```

而且我觉得我会因为这样做而在开发人员的地狱中燃烧:)

我的问题：有没有其他方法可以在不添加此方法的情况下做到这一点？

注意：我已经看到[了](https://stackoverflow.com/questions/3160413/how-can-i-use-junit-to-test-a-class-that-uses-a-singleton)，我不能使用像 Spring 或 Guice 这样的任何 DI 框架，管理层认为添加一个框架会使项目变得重量级，因为这个程序旨在作为服务器上的守护进程运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:51:36.900

我能想到的一些事情是

1.  使用类似`Easymock`或的模拟框架`Mockito`来模拟`ConfigurationFactory`并在其他调用区域中使用这个模拟对象。

2.  `ConfigurationFactory`在类中定义一个 setter并定义一个注释，`@TestPurpose`并使用它来覆盖单元测试中的单例对象。注释表示在应用程序流程中不应使用此功能，并且该功能仅用于 junit 目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:06:10.307

首先要解决的是你的单例不应该是静态的。这里有几篇文章向您展示如何做到这一点：

*   [恢复单例模式](http://beust.com/weblog/2011/03/10/rehabilitating-the-singleton-pattern/)。
*   [依赖注入](http://beust.com/weblog/2012/03/25/dependency-injection/)。

一旦你解决了这个问题，你将不再需要重置你的单例，因为你可以随意注入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T09:14:44.847

如果您不想使用建议的框架，您仍然可以拆分 'src' 和 'test-src' 并使用受保护的方法而不是公共方法。这并不理想，但可以防止调用该重置方法，同时使您能够进行测试。

*   src/main/myproject.myfactory.ConfigurationFactory
*   src/test/myproject.myfactory.TestConfigurationFactory

-> 在您的 JUnit 类中使用 @After 或 @AfterClass -方法调用重置

如果您在多个测试场景中都需要工厂，您还可以创建一个抽象的 BaseTest 类，其中包含一个 @AfterClass 方法来清理这些单例。

您也可以通过反射在您的测试代码中强制重置，并且根本不使用额外的重置方法，但我不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-06T13:40:38.740

例如，您可以使用反射

```
public void resetSingleton() throws Exception {
   Field instance = FormatterService.class.getDeclaredField("instance");
   instance.setAccessible(true);
   instance.set(null, null);
} 
```

看[一个例子](https://github.com/KyryloSemenko/staticFieldMock/blob/master/src/test/java/com/example/DriverSnapshotHandlerTest.java)

# php - 计算 12 周后的日期

> ID：10510896
> 
> 赞同：0
> 
> 时间：2012-05-09T06:34:49.670
> 
> 标签：php

我在变量“$date”中输入日期，现在我想计算从 $date 到 12 周后的日期，我如何使用 php 进行计算。我编写了以下 php 代码，但它的 nt 工作。任何人都可以告诉解决方案

```
$month = 2;
$year = 2012;

$date = date('Y/M/d',strtotime('First Saturday '.date('F o', @mktime(0,0,0, $month, 1, $year))));
echo $date;
echo "<br/>";
$newdate = strtotime ( '+12 week' , strtotime ( $date ) ) ;
$newdate = date ( 'Y-m-j' , $newdate );

echo $newdate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:37:53.797

试试这个希望它有帮助

```
$newdate = strtotime(date("Y-m-d", strtotime($date)) . " +12 week"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T06:46:29.307

```
$month = 2;
$year = 2012;

$date = date('Y/M/d',strtotime('First Saturday '.date('F o', @mktime(0,0,0, $month, 1, $year))));
echo $date;
echo "<br/>";
$newdate = strtotime ( strtotime ( $date ) . '+12 week' ) ;
$newdate = date ( 'Y/M/d' , $newdate );

echo $newdate; 
```

这应该是你要找的

# cruisecontrol.net - 巡航控制清除案例集成

> ID：10510903
> 
> 赞同：1
> 
> 时间：2012-05-09T06:35:33.273
> 
> 标签：cruisecontrol.net, clearcase

我正在尝试将透明外壳与巡航控制集成。我已成功集成它，但是当我检查透明外壳的任何更改时，构建不会自动发生。下面是我的 ccnet.config

```
 <sourcecontrol type="clearCase">
  <viewPath>M:\temp_view2\CDMVOB\Cruise</viewPath>
  <branch>main</branch>
  <autoGetSource>false</autoGetSource>
  <useLabel>false</useLabel>
  <useBaseline>false</useBaseline>
  <projectVobName>CDMVOB</projectVobName>
  <viewName>temp_view2</viewName>
  <executable>cleartool.exe</executable>
  <timeout>50000</timeout>
    <!--<modificationset> quietperiod=5</modificationset>-->
</sourcecontrol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:52:18.243

我通常看到的 CruiseControl 配置（如在[此线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=196843)或[CruiseControl wiki](http://cruisecontrolnet.org/projects/ccnet/wiki/ClearCase)中）使用：

```
<autoGetSource>true</autoGetSource> 
```

（为了扫描并获取源代码管理发布的新修订）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:51:55.717

[如果您希望它在更改时自动构建，](http://cruisecontrolnet.org/projects/ccnet/wiki/Trigger_Blocks)您至少需要在项目配置中使用它：

```
<triggers>
  <intervalTrigger />
</triggers> 
```

# iphone - 如何将两个浮点值相乘，结果必须显示在按钮标题上

> ID：10510904
> 
> 赞同：1
> 
> 时间：2012-05-09T06:35:33.210
> 
> 标签：iphone, objective-c

我有文本机器人，我希望当我在其中输入任何值（如 3）时，它应该乘以 12，并在按钮标题上自动显示 36，当我在文本字段中输入任何数字时，标题应该更改我正在添加以下代码，但它总是显示零我在 viewdidLoad 中添加此代码

```
 float monthText = [[monthTextField text] floatValue];
    float year=12;

float monthButtonTitle=monthText*year;

NSString *titleMonth = [NSString stringWithFormat:@"%d",monthButtonTitle];

[monthButton setTitle:titleMonth forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:38:55.167

```
 [NSString stringWithFormat:@"%f",monthButtonTitle]; 
```

实现**UITextFieldDelegate**

```
yourTextField.delegate = self // self maybe the controller; 
```

然后在方法中

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

获取您输入的新值

```
float v = [textField.text floatValue]; 
```

计算它，更新标签

如果你只允许输入数字，你可以这样做

```
textField.keyboardType = UIKeyboardTypeNumberPad;

#define NUMBERSPERIOD @"0123456789."

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
 NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:NUMBERSPERIOD] invertedSet];
 NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
 BOOL basicTest = [string isEqualToString:filtered];
 // Add any predicate testing here
 return basicTest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:39:33.083

```
 NSString *titleMonth =  [NSString stringWithFormat:@"%f",monthButtonTitle];

[monthButton setTitle:titleMonth forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:51:59.443

像这样向您的文本字段添加操作

```
[yourTextField addTarget:self action:@selector(textFieldTextDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

然后实现方法 textFieldTextDidChange: 像这样

```
- (void) textFieldTextDidChange:(UITextField *)tf {
    float monthText = [[tf text] floatValue];
    float year=12;
    float monthButtonTitle=monthText*year;
    NSString *titleMonth = [NSString stringWithFormat:@"%d",monthButtonTitle];
    [monthButton setTitle:titleMonth forState:UIControlStateNormal];
} 
```

# facebook - Facebook Actionscript API 'Facebook.Init()' 调用突然返回空会话对象。为什么？

> ID：10510907
> 
> 赞同：3
> 
> 时间：2012-05-09T06:35:58.333
> 
> 标签：facebook, flash, facebook-graph-api, facebook-actionscript-api

我在 Facebook 上有一款游戏已经成功运行了将近一年。今天早上它离线了，因为我的 Flash 客户端调用了 facebook-actionscript-api：

Facebook.init(app_id, handleLogin)

...函数，开始得到空响应。并且没有错误。调用了handleLogin() 回调函数handleLogin(response:Object, fail:Object):void ...但响应和失败对象都是空的。

它开始于 2012 年 5 月 8 日星期二（太平洋夏令时间）-（加利福尼亚时间）晚上 7 点之前（19:00）

有人见过这样的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:37:39.263

是的，我们也看到了与昨晚午夜相同的问题。我们仍然不确定问题的根本原因。试图与 facebook 互动以找出答案。

还有人得到这个吗？

更新：看起来在 facebook 错误中报告了类似的事情

[http://developers.facebook.com/bugs/440387422643581?browse=search_4faa2351ce3059948026603](http://developers.facebook.com/bugs/440387422643581?browse=search_4faa2351ce3059948026603)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:43:16.970

我知道 facebook 刚刚从权限中删除了离线访问权限......也许检查你没有在你的登录范围内请求它。我有一个问题，它弄乱了我的 Facebook 登录过程，但是在星期一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:15:30.483

您可以从此处下载临时固定 API 并替换 GrapApiWeb_1.8.1.swc

[http://www.superurchin.com/FacebookGraphApi_Superurchin.swc.zip](http://www.superurchin.com/FacebookGraphApi_Superurchin.swc.zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:51:04.780

Facebook 已经修复了这个错误，所以我们现在不必担心它。:)

[https://developers.facebook.com/bugs/295956663824256](https://developers.facebook.com/bugs/295956663824256)

# php - mysql：序列化关联数组

> ID：10510908
> 
> 赞同：-1
> 
> 时间：2012-05-09T06:36:07.080
> 
> 标签：php, mysql, serialization

我有一个关联数组，将它放入数据库（mysql）的最简单方法是什么？我的意思是序列化并放入 SINGLE 字段。请注意，序列化后，我需要能够反序列化字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:38:30.863

像这样的东西。

```
$arr=array("data","more data");
$result=mysql_real_escape_string(serialize($arr));
mysql_query("INSERT INTO table (serialized) VALUES ('{$result}')"); 
```

# android - Android：使用 ArrayAdapter 在 ListView 中替换颜色

> ID：10510910
> 
> 赞同：1
> 
> 时间：2012-05-09T06:36:08.413
> 
> 标签：android, android-listview, background-color, android-arrayadapter

> **可能重复：**
> [如何为列表视图中的每一行设置不同的背景颜色？](https://stackoverflow.com/questions/10479108/how-can-i-set-differnt-background-color-for-each-row-in-listview)

如何为列表视图项目添加不同的/alretnate 颜色？下面是我使用 ArrayAdapter 将项目添加到 ListView 的代码

```
list  = (ListView)findViewById(R.id.planetList);
adapter = new ArrayAdapter<String>(MyListViewActivity.this, R.layout.my_list_row, R.id.planetNameTextView);

for (int i = 0; i < planetNamesArray.length; i++) {
adapter.add(planetNamesArray[i]);
}
list.setAdapter(adapter); 
```

谁能指导我使用 ArrayAdapter 添加不同的背景颜色，因为我是 android 的新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:44:59.900

您首先需要使用自定义适配器，在其 getView() 方法中，您必须检查位置。

```
if(position % 2 == 0)
           row.setcolor(R.color.color1);
else 
      row.setcolor(R.color.color2); 
```

希望你明白这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T06:47:04.470

通过扩展创建自定义适配器类`BaseAdapter`。

完成此操作后，您将获得**getView()**方法，在该方法中，您可以对列表项所需的视图进行操作。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

  if(position[i]%2==0)
  {
     // even position color
  }
  else
  {
    // odd position color
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T06:43:26.197

使用Custome适配器..伪代码看起来像这样..

```
Class MyAdpater extends BaseAdapter{

public ColorAndData{

private Color color;
private Data data;
}
ColorAndData dataAndColor[];
public MyAdapter(ColorAndData[] data)
this.dataAndColor=data;

}

public view getView(View convertView)
{
dataAndColor.getColor() //and set color
dataAndColor.getdata() //and set data

} 
```

# nhibernate - NHibernate - 执行 SQL 来填充 DTO

> ID：10510913
> 
> 赞同：6
> 
> 时间：2012-05-09T06:36:20.400
> 
> 标签：nhibernate, fluent-nhibernate

我有一些实例用于报告执行 sprocs 比复杂的 QueryOver 语句更容易和简单的地方。

我有一个 DTO，而不是实体，它表示从查询返回的数据，并希望将查询结果填充到 DTO 中。我正在使用命名查询和 session.GetNamedQuery() 来执行查询。

1.  我必须为 DTO 创建映射文件吗？
2.  如果是这样，是否可以让 NHibernate/FluentNHibernate 知道它不应该为 DTO 创建表？我的单元测试使用 NH 的 SchemaExport 工具删除并创建模式，并且不想为 DTO 创建表

请注意，我不想使用 Projections 和 AliasToBean 投影 QueryOver/Linq 查询 - 我需要执行存储过程。

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T09:28:50.770

使用 CreateSQLQuery，以下将在没有任何映射文件的情况下工作。也许您可以尝试使用命名查询：

```
public class YourDto
{
    public int YourDtoId { get; set; }
    public string YourDtoTitle { get; set; }
} 
```

然后

```
var result = yourNhSession
    .CreateSQLQuery("select yourColumn1 as YourDtoId, yourColumn2 as YourDtoTitle from YOUR_TABLE")
    .SetResultTransformer(Transformers.AliasToBean<YourDto>())
    .List<YourDto>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:46:05.563

如果你想要最简单的解决方案，我建议你在你的架构中添加一个像[Dapper](http://code.google.com/p/dapper-dot-net/)这样的 micro/orm来做到这一点。它只是在您的项目中删除一个[文件](http://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs)并按照示例进行操作。对我来说，当你不得不做一些出于某种原因*超出实体逻辑*的事情时，它是与 NH 配对的最佳解决方案。

# shell - 双击linux中的shell脚本

> ID：10510914
> 
> 赞同：0
> 
> 时间：2012-05-09T06:36:20.897
> 
> 标签：shell

我在 linux 中创建了一个 shell 脚本，它将设置 shell 用户定义的变量，运行带有端口的 .jar 文件，并打开带有提到的端口的 firefox。

1.  脚本成功执行，当我通过终端执行脚本时它按预期工作（即 sh name.sh 或 ./name.sh）
2.  如果我双击 shell 脚本并从对话框窗口中单击“运行”按钮，则它按预期工作正常。
3.  如果我双击shell脚本并从对话框窗口中单击“在终端中运行”按钮，则它正在执行命令并且终端关闭，即使在终端关闭后jar进程不存在也是如此。

注意： .jar 在终端处于活动状态时运行，而不是在终端关闭后运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:40:25.303

尝试在脚本文件中导出变量。

例子： `export PATH=/PATH/TO/SET`

这将确保定义的变量在 shell 之外也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:39:42.937

你应该说`sh java -jar <<jarfile>>`这将在一个新的 shell 中打开 java 进程，它不会随着启动进程的终端关闭。

# winapi - “机器睡眠”+ WaitForSingleObject + 有限超时

> ID：10510915
> 
> 赞同：7
> 
> 时间：2012-05-09T06:36:27.480
> 
> 标签：winapi, mutex, waitforsingleobject

这里有一个奇怪的问题——但是：

如果我在具有 20 分钟超时的互斥锁上使用 WaitForSingleObject。然后，机器在等待时进入睡眠模式（或休眠）...... 12 小时后醒来——我对 WaitForSingleObject 的调用会超时吗？或者计时器会随着机器睡眠而暂停？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-12T08:50:08.870

根据[https://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx)， WaitForSingleObject 确实需要考虑在低功耗状态下花费的时间，但仅从Windows 8。所以在 Windows 7 上它应该像上面描述的那样运行，但在 Windows 8 和更高版本上，只有当系统已经在请求的时间内主动运行时，调用才会超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:15:04.037

刚刚在 Windows 7 上进行了 5 分钟超时和 10 分钟睡眠的测试。我在等待无尽的线程。

惊喜 -`WaitForSingleObject`我的机器唤醒后超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-17T20:21:10.267

摘自 MSDN：

Windows XP、Windows Server 2003、Windows Vista、Windows 7、Windows Server 2008 和 Windows Server 2008 R2：dwMilliseconds 值确实包括在低功耗状态下花费的时间。例如，当计算机处于睡眠状态时，超时**确实会**继续倒计时。

Windows 8、Windows Server 2012、Windows 8.1、Windows Server 2012 R2、Windows 10 和 Windows Server 2016：dwMilliseconds 值**不**包括在低功耗状态下花费的时间。例如，当计算机处于睡眠状态时，超时不会继续倒计时。

# bash - awk 对一列求和并在输入的每一行上打印该总和

> ID：10510917
> 
> 赞同：24
> 
> 时间：2012-05-09T06:36:40.130
> 
> 标签：bash, sed, awk, printf

我的`file.txt`样子是这样的：

```
1 12
2 18
3 45
4 5
5 71
6 96
7 13
8 12 
```

我可以这样总结第二列：

`awk '{ sum += $2 } END { print sum }' file.txt`

`272`

我可以在每一行打印那个总和的最简洁的方法是什么？这就是我所期待的：

```
1 12 272
2 18 272
3 45 272
4 5 272
5 71 272
6 96 272
7 13 272
8 12 272 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T07:04:36.047

一种标准的`awk`方式。

```
$ awk 'FNR==NR{sum+=$2;next}; {print $0,sum}' file.txt{,}
1 12 272
2 18 272
3 45 272
4 5 272
5 71 272
6 96 272
7 13 272
8 12 272 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T06:44:39.977

您可以使用：

```
awk -v xyzzy=$(awk '{sum+=$2}END{print sum}' file.txt)
    '{print $0" "xyzzy}' file.txt 
```

不幸的是，这意味着要通过信息*两次*，但是，由于您必须在获得总数之前执行一次，因此没有真正的解决方法。*任何*解决方案都将涉及在输出任何内容之前存储信息（无论是在数组中，还是返回到文件中）。

内部`awk`计算总数，外部`awk`将其分配给可以与每一行一起打印的变量。

将其应用于文件：

```
a 1
b 2
c 3
d 4
e 5 
```

给你，因为`1 + 2 + 3 + 4 + 5`等于`15`：

```
a 1 15
b 2 15
c 3 15
d 4 15
e 5 15 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T06:47:24.017

使用数组

```
{ 
    a[NR] = $0
    sum += $2
}
END {
    for (x = 1; x <= NR; x++) {
        print a[x], sum
    }
} 
```

输出

```
$ awk -f s.awk file.txt 
1 12 272
2 18 272
3 45 272
4 5 272
5 71 272
6 96 272
7 13 272
8 12 272 
```

[在Gnu awk 手册](http://www.gnu.org/software/gawk/manual/gawk.html#Arrays)中阅读更多内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T06:44:13.283

离题，但在 Perl 中你可以这样做：

```
perl -nale '$s+=$F[1];push(@a,$_);END{print $_." $s" for(@a);}' file.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T11:50:37.947

丑陋的解决方案：

```
awk '{printf "%s ", $0}{system(" awk \047 {sum+=$2}END{print sum} \047  file ")}' file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T01:17:24.573

awk，是的，头和粘贴。

```
$ yes "`<file.txt awk '{ sum += $2 } END { print sum }'`" | head -n `<file.txt wc -l` | paste -d ' ' file.txt - 
```

# hadoop - 如何确定hadoop作业挂起的原因？

> ID：10510922
> 
> 赞同：0
> 
> 时间：2012-05-09T06:37:42.460
> 
> 标签：hadoop

我有一个由 oozie 和 pig 脚本安排的 hadoop 作业，但问题是该作业始终处于挂起状态，我在 jobtracker/tasktracker 日志中看不到任何明确的错误/异常。

有没有人在如何确定根本原因方面有类似的经验？

这是来自作业跟踪器的日志，在任务跟踪器日志中没有找到有关此作业的任何内容：

```
2012-05-09 14:57:19,552 INFO org.apache.hadoop.mapred.JobQueuesManager: Job job_201205091453_0007 submitted to queue daily
2012-05-09 14:57:19,552 INFO org.apache.hadoop.mapred.JobTracker: Job job_201205091453_0007 added successfully for user 'mapred' to queue 'daily'
2012-05-09 14:57:19,552 INFO org.apache.hadoop.mapred.AuditLogger: USER=mapred  IP=10.40.31.234 OPERATION=SUBMIT_JOB    TARGET=job_201205091453_0007    RESULT=SUCCESS
2012-05-09 14:57:22,966 INFO org.apache.hadoop.mapred.JobInitializationPoller: Passing to Initializer Job Id :job_201205091453_0007 User: mapred Queue : daily
2012-05-09 14:57:24,086 INFO org.apache.hadoop.mapred.JobInitializationPoller: Initializing job : job_201205091453_0007 in Queue daily For user : mapred
2012-05-09 14:57:24,086 INFO org.apache.hadoop.mapred.JobTracker: Initializing job_201205091453_0007
2012-05-09 14:57:24,086 INFO org.apache.hadoop.mapred.JobInProgress: Initializing job_201205091453_0007
2012-05-09 14:57:24,239 INFO org.apache.hadoop.mapred.JobInProgress: jobToken generated and stored with users keys in /var/lib/hadoop-0.20/system/job_201205091453_0007/jobToken
2012-05-09 14:57:24,243 INFO org.apache.hadoop.mapred.JobInProgress: Input size for job job_201205091453_0007 = 48\. Number of splits = 1
2012-05-09 14:57:24,243 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201205091453_0007_m_000000 has split on node:/default-rack/hzs-ubt-elou
2012-05-09 14:57:24,243 INFO org.apache.hadoop.mapred.JobInProgress: job_201205091453_0007 LOCALITY_WAIT_FACTOR=1.0
2012-05-09 14:57:24,243 INFO org.apache.hadoop.mapred.JobInProgress: Job job_201205091453_0007 initialized successfully with 1 map tasks and 1 reduce tasks. 
```

看下面的截图，问题是 map/reduce 任务处于挂起状态超过 21 小时。

![hadoop webui的截图](../Images/864411aaf608840628183e01f97f2466.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T17:25:17.540

我建议您查看资源管理器日志。通常您可以在其中找到有用的信息。然后如果没有找到，请查看 namenode 日志。

# ruby-on-rails - 为什么 Rails 提供更少的时区支持？

> ID：10510930
> 
> 赞同：1
> 
> 时间：2012-05-09T06:38:45.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

世界上有230多个时区。

[http://en.wikipedia.org/wiki/List_of_time_zones_by_country](http://en.wikipedia.org/wiki/List_of_time_zones_by_country)

但是 Rails 只支持 142 个时区。

```
ActiveSupport::TimeZone.all.count
=> 142 
```

1.是否意味着Rails时区支持有限？

2.跳过剩余时区有什么具体原因吗？

谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:03:24.617

你试过了`rake time:zones:all`吗？

1.  不，Rails 时区支持不受限制。您拥有从 UTC -11:00 到 UTC +13:00 的所有区域。
2.  见 (1.)。Rails 中没有跳过的时区。

# php - 在 Localhost 中测试 LightOpenID

> ID：10510935
> 
> 赞同：0
> 
> 时间：2012-05-09T06:39:10.157
> 
> 标签：php, openid, wampserver, lightopenid, google-authentication

我正在使用 LightOpenID 在我的 PHP Web 应用程序中启用 Google 身份验证。

但是，当我在本地服务器上进行相同测试时，出现以下错误

```
( ! ) Fatal error: Uncaught exception 'ErrorException' with message 'You must have either https wrappers or curl enabled.' in C:\wamp\www\speakerdb\openid.php on line 94
( ! ) ErrorException: You must have either https wrappers or curl enabled. in C:\wamp\www\speakerdb\openid.php on line 94
Call Stack
#   Time    Memory  Function    Location
1   0.0006  366848  {main}( )   ..\index.php:0
2   0.0034  648640  LightOpenID->__construct( ) ..\index.php:4 
```

这在我的远程服务器上运行良好。我将在我的应用程序的每个页面中使用 LightOpenID 来检查用户是否已登录。我尝试将“localhost”作为域名但得到相同的错误。

我在我的 wamp 服务器上启用了 curl，但是当启用 curl 时，带有 LightOpenID 的页面不会运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:50:32.160

在 apache 和 PHP 配置上启用 SSL 模块并检查是否有效：

**php.ini：**

> 扩展=php_openssl.dll

**apache.conf：**

> LoadModule ssl_module 模块/mod_ssl.so

# php - 如何在数组中保持最多十个值？

> ID：10510938
> 
> 赞同：0
> 
> 时间：2012-05-09T06:39:28.540
> 
> 标签：php, arrays

每次用户访问页面时，页面 url 都会存储到数组会话中。我只想在数组中有 10 个元素。这样 10 个元素将保存 10 个最新访问的页面 url。这是我的代码：

```
if (empty($_SESSION['page'])) {
     $_SESSION['page'] = array_fill(0,10,'');
 }

 function trackPage($url) {
     array_unshift($_SESSION['page'],$url);
    array_pop($_SESSION['page']);
 }

trackPage($_SERVER['REQUEST_URI']); 
```

并告诉 mw 怎么写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:48:22.263

您的代码唯一缺少的是 session_start()，即：

```
<?php

session_start();

if (empty($_SESSION['page'])) {
     $_SESSION['page'] = array_fill(0,10,'');
 }

 function trackPage($url) {
     array_unshift($_SESSION['page'],$url);
    array_pop($_SESSION['page']);
 }

trackPage($_SERVER['REQUEST_URI']);

var_dump($_SESSION['page']);

?> 
```

我只添加了 var_dump 来监控会话信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:00:30.870

我添加了 if(array_search($url, $_SESSION['page'])=== false) 这段代码以避免多次重复条目

```
session_start();

if (empty($_SESSION['page'])) {
     $_SESSION['page'] = array_fill(0,10,'');
 }

 function trackPage($url) {
     if(array_search($url, $_SESSION['page'])=== false){
         array_unshift($_SESSION['page'],$url);
        array_pop($_SESSION['page']);
     }
 }

trackPage($_SERVER['REQUEST_URI']);

var_dump($_SESSION['page']); 
```

# vba - 为生成表单控制按钮的宏设置按钮位置

> ID：10510941
> 
> 赞同：2
> 
> 时间：2012-05-09T06:39:33.303
> 
> 标签：vba, excel, excel-2007

我目前将数据拆分为多个工作表，并允许用户选择他们在哪个工作表上运行宏。工作表用作多个系统之间的过滤

我有一个命名范围（dayList），将数据分组为天，并为每一天（day1、day2 等）创建一个新工作表。然后，每个工作表都必须应用另一个宏（屏幕数据），它将以完全相同的方式过滤每个工作表中的数据。

我正在尝试创建一个 UI，该 UI 将近似于用户能够单击命名范围中的一个单元格以运行该特定日期的宏。我目前正在使用的代码片段如下。

```
 Sheets("LaunchScreen").Activate
    Cells(rowCounter, 6).Value = "Day" & dayCounter
    ActiveSheet.Buttons.Add(538.5, 56.25, 48.75, 13.5).Name = "Day" & dayCounter
    ActiveSheet.Buttons("Day" & dayCounter).Select
    Selection.OnAction = "JoinTransactionAndFMMS" 
```

我循环这个以每天创建一个新按钮，然后将按钮名称作为参数传递给另一个宏，以在此工作簿中查找具有相同名称的工作表。

TLDR：我需要：

1.  使用 VBA 设置按钮的位置，最好将位置与单元格引用匹配，例如 `Range("A1").Button.Insert`
2.  将命名范围中的单元格引用传递给宏

一个优秀的菜鸟在这里过头了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:11:39.347

1) .Add 方法需要 4 个参数。前两个是获得按钮左上角的 TOP 和 LEFT 位置，第 3 个和第 4 个是按钮的高度和宽度设置。

因此，如果您知道要添加一个按钮并且参考是将其放置在单元格 C10（比 A1 更好的示例），那么可以这样做：

```
ActiveSheet.Buttons.Add(Range("C10").Top, Range("C10").Left, 48.75, 13.5).Name = "Day" & dayCounter 
```

* * *

2）您的宏必须首先设计为接受“传递”到其中的参数。所以，像

```
Sub MyMacro(MyRange As Range)
    MsgBox MyRange.Address
End Sub 
```

现在，您的其他宏可以调用**MyMacro**并且您必须在调用时传入参数：

```
Sub test2()
   Call MyMacro(Range("Animals"))
End Sub 
```

# java - 如何在过滤器中获取当前 Servlet 对象？

> ID：10510947
> 
> 赞同：0
> 
> 时间：2012-05-09T06:39:57.710
> 
> 标签：java, jakarta-ee, servlets, web, servlet-filters

我需要通过以下方式对特定的 Servlet 类对象做一些特殊的事情：

```
if (currentServlet instanceof SpecificServlet) {
      // do something special...
} 
```

但是我在 FIlter 中找不到获取 currentServlet 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:45:26.420

过滤器中没有*当前 servlet之类的东西。*事实上，有时过滤器本身会处理整个请求，并且不需要 servlet。

你想达到什么目标？请注意，如果您想在 servlet 上运行某些方法，您可能会得到意想不到的结果，因为 servlet 在多个并发请求之间共享。您可能需要某种间接方式，例如在过滤器中存储请求或会话属性并在 servlet 中检索它。

# 也可以看看

*   [如何在过滤器中获取 ServletConfig 对象](https://stackoverflow.com/questions/10191904)

# c++ - 缺少入口点 GdipDrawRectangleI

> ID：10510950
> 
> 赞同：0
> 
> 时间：2012-05-09T06:40:17.003
> 
> 标签：c++, visual-studio-2010, dll, gdi+

我在 Visual Studio 2010 中有使用 GDI+ 库的 C++ 应用程序。我已经完成了，我想编译发布版本。但是编译后，应用程序没有运行，只给我消息，入口点 GdipDrawRectangleI 在 crtdll.dll 中丢失。

我尝试下载并使用新的 crtdll.dll，但没有任何改变...

有什么问题？为什么它在调试模式下工作，而不是在发布？以及如何解决？

谢谢

# android - 如何覆盖 PackageInstaller 对话框？

> ID：10510951
> 
> 赞同：0
> 
> 时间：2012-05-09T06:40:24.153
> 
> 标签：android, android-dialog, android-package-managers

我正在尝试从 URL 更新我的应用程序，因为我通过服务器分发我的应用程序，而不是在 android 市场上发布应用程序。我成功更新了应用程序。但我不希望更新完成后出现的对话框。出现的对话框显示“已安装应用程序”，它有两个按钮 1）打开 2）完成。我不想要第二个按钮“完成”。我只想显示一个按钮，即“打开”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T06:48:02.940

这是不可能的。

这是标准的 android 程序，您不能更改安装应用程序的方式并强制用户按打开。（用户可以随时按 Home 或 Back 按钮）

- - - 编辑

您可以在 Package Installed Intent 上启动您的应用程序：

```
<receiver android:name=".IntentReceiver">
  <intent-filter>
    <action android:name="android.intent.action.PACKAGE_ADDED" />
    <action android:name="android.intent.action.PACKAGE_REPLACED"/>
    <action android:name="android.intent.action.PACKAGE_REMOVED" />
    <data android:scheme="package" />
  </intent-filter>
</receiver> 
```

广播接收器：

```
public class IntentReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Do your stuff here.
    }
} 
```

# sql - 什么时候使用SQL natural join 而不是join .. on？

> ID：10510952
> 
> 赞同：6
> 
> 时间：2012-05-09T06:40:24.783
> 
> 标签：sql

我正在为数据库考试学习 SQL，而我看到 SQL 的方式就是它在此页面上的样子：

[http://en.wikipedia.org/wiki/Star_schema](http://en.wikipedia.org/wiki/Star_schema) IE`join`写了方式`Join <table name> On <table attribute>`然后加入条件供选择。然而，我的课程书和学术机构给我的练习，在他们的例子中只使用自然连接。那么什么时候使用自然连接合适呢？如果查询也可以使用 JOIN .. ON 编写，是否应该使用自然连接？

感谢您的任何回答或评论

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T07:34:33.300

自然连接将在两个表中查找具有相同名称的列，并在结果中为找到的每一对添加一列。内连接允许您指定要使用任何列进行的比较。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T06:53:08.553

IMO，JOIN ON 语法比自然连接语法更具可读性和可维护性。自然连接是一些旧标准的遗留物，我尽量避免它像瘟疫一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T09:00:17.617

自然连接将在两个表中查找具有相同名称的列，并在结果中为找到的每一对添加一列。内连接允许您指定要使用任何列进行的比较。

JOIN 关键字在 SQL 语句中用于根据这些表中某些列之间的关系从两个或多个表中查询数据。

不同的连接

```
*  JOIN: Return rows when there is at least one match in both tables
* LEFT JOIN: Return all rows from the left table, even if there are no matches in the right table
* RIGHT JOIN: Return all rows from the right table, even if there are no matches in the left table
* FULL JOIN: Return rows when there is a match in one of the tables 
```

内连接 [http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

完全加入 [http://www.w3schools.com/sql/sql_join_full.asp](http://www.w3schools.com/sql/sql_join_full.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T20:32:00.283

自然连接被认为是令人厌恶的，因为它不允许限定键列，这使得它变得混乱。因为你永远不知道哪些“公共”列被用于连接两个表，只需查看 sql 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-09T11:35:45.510

NATURAL JOIN 匹配表之间的任何共享列名，而 INNER JOIN 仅匹配给定的 ON 条件。

连接通常可以互换并且通常产生相同的结果。但是，有一些重要的考虑因素需要考虑：

*   如果 NATURAL JOIN 找不到匹配的列，则[返回叉积](https://stackoverflow.com/questions/14548543/natural-join-if-no-common-attributes/14798931)。如果模式被修改，这可能会产生灾难性的结果。另一方面，INNER JOIN 将返回“列不存在”错误。这更**容错**。

*   INNER JOIN使用其 ON 子句**自文档，从而产生更清晰的查询，向读者描述表模式。**

*   INNER JOIN 产生**可维护和可重用**的查询，其中列名可以随着用例或表模式的更改而换入和换出。

*   如果他们被迫定义 ON 谓词，程序员可以更快地**注意到列名不匹配（例如 item_ID 与 itemID）。**

否则，NATURAL JOIN 仍然是快速、即席查询的好选择。

# esb - Mule ESB 可以部署在 Application Server 中

> ID：10510953
> 
> 赞同：6
> 
> 时间：2012-05-09T06:40:26.413
> 
> 标签：esb, mule

我可以在任何应用服务器上部署 Mule。如果是这样，我们如何部署 Mule 示例。

我已将我的 eclipse 配置为运行 JBoss，并且 Mule Flows 不会部署在 JBOss 服务器中。同步给出错误（空指针）。

但是当我作为 Mule 应用程序运行时，它运行良好，但会启动 Mule 服务器。

Mule 在生产中是如何部署的？我们是否需要生产环境中的 Mule 服务器与应用程序服务器一起工作？

我们是否可以将所有应用程序打包在一个（ESB + 应用程序）中并将其部署在应用程序服务器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:11:09.113

您可以选择 Mule 的生产部署：

*   使用 Mule 独立作为您的首选，因为它包含所有模块/传输，是生产级（控制脚本......）并支持热应用程序重新加载。
*   如果您的部署环境迫使您在应用程序服务器（如 JBoss）上进行部署，[请将您的 Mule 应用程序打包为 Web 应用程序](http://www.mulesoft.org/documentation/display/MULE3USER/Embedding+Mule+in+a+Java+Application+or+Webapp#EmbeddingMuleinaJavaApplicationorWebapp-EmbeddingMuleinaWebapp)(WAR)。

如果您决定将 Mule 应用程序打包为 WAR，我强烈建议您使用 Maven 来执行此操作，因为它们的每个 Mule 模块/传输都需要大量依赖项。手动处理这将是疯狂的。

还要确保使用[Servlet 入站端点](http://www.mulesoft.org/documentation/display/MULE3USER/Servlet+Transport+Reference)而不是 HTTP 入站端点，否则 Mule 将在 Web 容器内打开另一个 HTTP 服务器。您希望 Mule 将 servlet 容器用于其入站 HTTP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:35:20.573

是的你可以。您可能需要查看[Embedding Mule in a Java Application 或 Webapp](http://www.mulesoft.org/documentation/display/MULE3USER/Embedding+Mule+in+a+Java+Application+or+Webapp)手册页，以及[Deploying Mule as a Service to Tomcat](http://www.mulesoft.org/documentation/display/MULE3USER/Deploying+Mule+as+a+Service+to+Tomcat)。

# android - 从所有数据库行中提取值进行计算

> ID：10510959
> 
> 赞同：0
> 
> 时间：2012-05-09T06:40:50.883
> 
> 标签：android, database, sqlite

我已经在我的项目中实现了一个数据库，并遵循了几个教程，能够提取数据并在列表视图中显示。但是，我无法搜索并找到解决当前问题的方法。

我在一个表中有两列。这些列是：**TABLE_UNITS**和**TABLE_PRICE**，它们在表**TABLE**中。我想显示一个组合的组合，其中每一行、UNITS 和 PRICE 必须相乘，并且将为数据库中存在的每一行添加这个小计。为了更清楚：

单位 ---- 价格 ----**总计**

50------------5------------ **250**

20------------10---------- **200**

总计 -------- **450**

所以问题是，我如何将所有这些信息提取到一个字符串中，然后计算，然后获取下一行，进行相同的计算并获得总计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:47:17.217

也许这个查询可以帮助你：

```
Cursor c = db.rawQuery("SELECT TABLE_UNITS, TABLE_PRICE,
           (TABLE_UNITS * TABLE_PRICE) AS TOTAL FROM table;", null); 
```

总计，您需要运行一个单独的查询：

```
Cursor c = db.rawQuery("SELECT SUM(TABLE_UNITS * TABLE_PRICE) AS GRAND_TOTAL
           FROM table;", null); 
```

# jquery - jquery datepicker date +1 增加 10 天

> ID：10510967
> 
> 赞同：2
> 
> 时间：2012-05-09T06:41:32.003
> 
> 标签：jquery

我有以下代码

```
$("#in").datepicker({
    minDate: 0,
    onSelect: function (dateText, inst) {
        dateText = new Date(dateText);
        dateText = dateText.getDate()+1;
        $('#out').datepicker("option", 'minDate', dateText);
    }
}); 
```

示例： [https ://jsfiddle.net/ANYTA/1/](https://jsfiddle.net/ANYTA/1/)

但是，`out`日期选择器添加了 10 天而不是 1 天。可以修改什么以使其按预期工作？非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:45:04.003

```
dateText = dateText.setDate(dateText.getDate()+1); 
```

* * *

**笔记**

```
somedate.setDate(days); 
```

1.  ***天***是整数

2.  预期值为***1-31***，但允许使用其他值：

      2.1) 0 将导致上个月的最后一个小时

       2.1) -1 将导致上个月最后一小时之前的一小时

3.  当月份有 31 天时，则 32 将导致下个月的第一天

4.  如果月份有 30 天，则 32 将导致下个月的第二天

* * *

你的代码应该

```
$("#in").datepicker({
    minDate: 0,
    onSelect: function(dateText, inst) {
       var actualDate = new Date(dateText);
       var newDate = new Date(actualDate.getFullYear(), actualDate.getMonth(), actualDate.getDate()+1);
        $('#out').datepicker('option', 'minDate', newDate );
    }
});

$("#out").datepicker(); 
```

**[演示](https://jsfiddle.net/ANYTA/4/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T06:43:37.673

尝试：

```
dateText.setDate(dateText.getDate() + 1); 
```

getDate 返回一个月中的 1-31 天，因此添加一个没有意义。

setDate 设置月份中的某一天，因此，如果您将一天添加到该月的某一天，那么您实际上是在添加一天。

（此外，setDate 足够聪明，可以处理翻转，即 1 月 31 日 + 1 == 2 月 1 日）

# linux - 在 Unix shell 中，如何检查用户的权限，如果用户没有权限，如何产生错误信息？

> ID：10510970
> 
> 赞同：0
> 
> 时间：2012-05-09T06:42:01.163
> 
> 标签：linux, shell, unix

我正在尝试编写一个能够执行一些内置命令的脚本，例如：cp、rm、ls 或其他。菜单可能是这样的：

1.  列出当前目录
2.  重命名文件
3.  删除文件
4.  出口

当您执行诸如“ls -la $currentdirectory”之类的命令时，它将显示当前目录的几乎所有信息。

所以：如果用户没有权限这样做，（用户没有权限“LS”那个目录。

什么命令可以检查权限？如果该用户没有权限，如何产生错误消息？干杯希望得到这个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:48:08.397

您不需要任何单独的命令来确定目录/文件的权限。`ls`本身会输出一条错误消息。

例如，我剥夺了所有人的所有权限，

```
chmod 000 some_folder
ls some_folder/
ls: some_folder/: The file access permissions do not allow the specified action. 
```

*类 Unix 系统中的大多数*命令如果没有足够的权限来完成工作，就会自动出错并显示错误消息！底层框架将负责不允许特权不足的用户/应用程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:48:00.633

```
grep -i umask ~/.profile /etc/profile 
```

# jetty - Zeus（负载均衡器）将如何处理关闭的连接

> ID：10510971
> 
> 赞同：0
> 
> 时间：2012-05-09T06:42:05.337
> 
> 标签：jetty, load-balancing, zeus

目前，我们遇到了一个超时问题。我们的应用基于 Jetty，使用 Zeus 作为负载均衡。maxIdleTime 在 jetty.xml 中设置为默认值 30000。当请求/连接超过 30 秒时，连接状态将变为 TIME_WAIT，但我们在浏览器端收到 HTTP 500 Internal Error。

我猜 HTTP 500 错误来自 Zeus，但我想确认一下：Zeus 将如何处理关闭的连接？或者码头服务向宙斯发送500？如果是这样，我该如何确认？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:46:55.437

解决这里发生的事情的可靠方法是在负载平衡器和码头服务器之间使用 ethereal 或 tcpdump 之类的东西来嗅探数据包，您可以使用 firebug 或 chrome 开发人员工具之类的网络工具来查看是什么发生在连接的那一侧。您还可以在码头侧打开调试以查看它具体在做什么。

无论如何，如果您达到超时设置，那么您需要增加这些设置或决定一个适当的策略来处理它们以避免此类问题，假设您不希望浏览器上出现 500 错误。

# php - 自动关注 Twitter 用户

> ID：10510972
> 
> 赞同：0
> 
> 时间：2012-05-09T06:42:20.927
> 
> 标签：php, twitter, twitter-oauth

```
$follows_faelazo = $twitteroauth->get('friendships/exists', array('user_a' => $_SESSION['username'], 'user_b' => 'faelazo'));
if($follows_faelazo){
    echo 'You are following @faelazo! Proceed to unfollow...';
    $twitteroauth->post('friendships/destroy', array('screen_name' => 'engmohamed_'));
} 
```

有了这段代码，我可以自动让一个 twitter 用户登录我的网站来关注我的帐户，但是我怎样才能关注 twitter 用户。就像我需要扭转这个过程，以便我可以自动关注登录的用户，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:13:09.073

是的。

`$twitteroauth`是使用您的用户令牌/秘密创建的，因此所有操作都会`$twitteroauth`影响他的帐户。

只需`$twitteroauth`使用您的令牌/秘密创建另一个对象。（您可以在 dev.twitter.com 中的某个地方获取它们，也可以自己使用您的应用程序并提取它们（如果您收集它们））

# math - 两条线之间的碰撞检测

> ID：10510973
> 
> 赞同：0
> 
> 时间：2012-05-09T06:42:28.620
> 
> 标签：math, geometry, collision-detection

这是一个相当简单的问题。我需要一个方程来确定两条二维线是否相互碰撞。如果他们这样做，我还需要知道碰撞的 X 和 Y 位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:52:50.307

把它们都放在[一般形式](http://en.wikipedia.org/wiki/Linear_equation#General_form)中。如果 A 和 B 相同，则它们是平行的。否则，创建两个联立方程并求解 x 和 y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:08:20.553

让**A**和**B**用这个参数形式表示：**y = mx + b**
其中**m**是直线的斜率*现在在***A**和**B**
平行的情况下，它们的*斜率*应该相等

 *******否则它们将在T(x,y)**点相互碰撞
为了找到**T**点的坐标，您必须求解一个简单的方程：

**A: y = mx + b**
**B: y = Mx + B**
**y(A) = y(B)**意思是：**mx + b = Mx + B**这产生**x = (B - b)/(m - M)**和把**x**放到**A**
线我们发现**y = ((m*(B - b))/(m - M)) + b**

 ******所以 : **T : ((B - b)/(m - M) , ((m*(B - b))/(m - M)) + b)*************

# ios - UIViewController 没有在 Storyboard 中保持状态

> ID：10510976
> 
> 赞同：1
> 
> 时间：2012-05-09T06:42:36.107
> 
> 标签：ios, design-patterns, ios5, uiviewcontroller, uistoryboard

我有一个 iOS5 故事板应用程序，当在初始视图控制器“A”中按下特定按钮时，我正在使用它将视图控制器“B”推送到导航堆栈上。按下按钮“B”后，会加载一些从 Web 服务中提取的数据。

当用户点击返回导航按钮然后按下按钮返回到'B'时，B已经完全重置。我知道这是重新创建 ViewController B 的故事板。我该如何阻止这种情况发生？我正在寻找正确的设计模式来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:01:18.160

只是为了澄清为什么会发生这种情况。一旦你点击后退按钮，viewController 'B' 就会被推离堆栈，从而从内存中删除。为了避免这种情况，您必须在 AppDelegate 中创建指向 viewController 'B' 的强指针属性。然后在 viewWillAppear 中，检查该属性是否为空，如果是，则正常设置其值。如果不是，那么您知道您已经准备好 viewController，并且您可以使用它。

# google-app-engine - URL 模式中的 GAE webapp2 unicode 标志

> ID：10510980
> 
> 赞同：2
> 
> 时间：2012-05-09T06:42:48.027
> 
> 标签：google-app-engine, url, unicode, python-2.7

我希望能够接受带有 unicode 字母数字字符串的 URL：

```
/Search/hello
/Search/hablé
/Search/我会明白 
```

[编辑]*我意识到 URL 将采用 URI 百分比编码，但根据我的尝试，webapp2 模块似乎对百分比编码进行了解码，所以我的问题仍然存在。*

作为提醒，我使用的是 GAE 1.6.5、webapp2 和 python 2.7。

在 python 中，我将使用以下正则表达式并设置 re.UNICODE 标志以匹配上述网址：

```
(?u)/Search/[\w]+ 
```

但是，我不知道如何在 Webapp2 WSGIApplication URL 模式中设置 unicode 标志。以下：

```
app = webapp2.WSGIApplication([ ('(?u)/Search/([\w]+)', SearchHandler), ... ]) 
```

似乎只匹配 /Search/hello 而其他两个都不匹配，我认为这意味着未设置 unicode 标志。难道我做错了什么？这支持吗？

# asp.net - 如何使用asp.net自动完成扩展器获得完整的自动完成列表？

> ID：10510982
> 
> 赞同：0
> 
> 时间：2012-05-09T06:43:03.193
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个 Ajax 自动完成扩展器，它工作正常。但是，我想在该文本框的焦点上显示整个列表。

有没有办法使用 Ajax 自动完成扩展器来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:44:46.733

设置属性 minimumprefixlength = 0 。

# c# - 名称不能以“1”字符开头，十六进制值 0x31。第 2 行，位置 2

> ID：10510983
> 
> 赞同：11
> 
> 时间：2012-05-09T06:43:08.777
> 
> 标签：c#, xml, xmldocument

在 C# 应用程序中加载 XML 文件时，我得到

> 名称不能以“1”字符开头，十六进制值 0x31。第 2 行，位置 2。

XML 标记的开头是这样的。

```
<version="1.0" encoding="us-ascii" standalone="yes" />
<1212041205115912> 
```

我不应该不惜一切代价更改这个标签。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T06:45:18.933

您应该更改标签名称，因为您编写的标签名称违反[了 xml 标准](http://www.w3schools.com/xml/xml_elements.asp)。只是为了记住这里有趣的部分：

## XML 命名规则

XML*元素* **必须**遵循以下命名规则：

*   名称可以包含字母、数字和其他字符
*   **名称不能以数字或标点符号开头**
*   名称不能以字母 xml（或 XML，或 Xml 等）开头
*   名称不能包含空格

可以使用任何名称，不保留任何字词。

作为解决您维护标准问题的建议：

1.  使用一个属性，即 <`Number value="1212041205115912"/>`
2.  为标签添加前缀，即`<_1212041205115912/>`

当然，您可以通过编写自己的格式解析器来维护您提出的结构，但我可以说这将是一个非常糟糕的主意，因为将来有人可能会扩展格式并且不会很高兴看到看起来的文件xml 实际上不是，他/她会[为此生气](http://www.codinghorror.com/blog/2008/06/coding-for-violent-psychopaths.html)。此外，如果您想要自定义格式，请使用更简单的格式，我的意思是：如果不是官方认可的格式，使用一些 '<' 和 '>' 混淆文本文件不会增加任何价值，最好使用类似的东西一个简单的纯文本文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T07:11:44.410

如果**你绝对不能改变它**，例如。出于某种原因，该格式已经广泛使用，并被其他系统/客户/其他任何人使用。

由于它是一个无效的 xml 文档，请在解析之前尝试清理它。例如。制作一个正则表达式，用 <IMessedUp>number</IMessedUp> 替换所有 <number> 标签，然后解析它。

有点不确定的方法，但我会解决你的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T11:00:19.197

如果您需要处理此文档，请停止将其视为 XML，并放弃使用 XML 工具处理它的任何想法。您正在处理专有格式，您需要编写自己的工具来处理它。如果您想要使用 XML 技术的好处，您将不得不重新设计您的文档，使它们成为有效的 XML。

# asp.net-mvc - ASP.NET MVC 拆分成多个项目

> ID：10510990
> 
> 赞同：1
> 
> 时间：2012-05-09T06:43:36.733
> 
> 标签：asp.net-mvc, fubumvc

是否可以在多个项目中拥有 ASP.NET MVC 区域？例如：

```
Admin area - MyProject.Admin project
Forum area - MyProject.Forum project
etc... 
```

从我的标题来看，开箱即用是不可能的，但可以使用 MVCContrib 的便携式区域。FubuMVC 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:30:09.987

> FubuMVC 可以做到这一点吗？

FubuMVC 允许您使用 Bottles 打包控制器、视图、资产等（在概念上类似于 Areas，但更好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T06:52:27.130

> 从我的标题来看，开箱即用是不可能的

你没听错。问题在于将视图嵌入到单独的程序集中。虽然不可能开箱即用，但您绝对可以如[本文](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)所示实现它。

> 但可以使用 MVCContrib 的便携式区域

是的。

> FubuMVC 可以做到这一点吗？

我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:51:10.557

这是我编写的便携式区域设置的示例。您可以使用 contrib 使用 MVC 非常轻松地打包它们。做到这一点并不难。

[http://elegantcode.com/2012/04/06/mvc-portable-areas/](http://elegantcode.com/2012/04/06/mvc-portable-areas/)

# jquery - 为什么我的 JQuery UI Datepicker 只有在单击时才翻译？

> ID：10510998
> 
> 赞同：1
> 
> 时间：2012-05-09T06:44:11.227
> 
> 标签：jquery, jquery-ui, localization, calendar

此行位于我的 JavaScript 之上并执行：

```
jQuery(function($) {
    $.datepicker.setDefaults($.datepicker.regional['de']);
}); 
```

我在 document-ready 函数内的同一个文件中初始化我的日历：

```
// #transports-calendar is a div
$("#transports-calendar").datepicker({
    onSelect: function() {
        // Some stuff
    }
}); 
```

在我的 HTML 页面上，包含以下脚本：

```
<script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui.js" type="text/javascript"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.dialogextend.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.blockUI.js" type="text/javascript"></script>        
<script src="/Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>            
<script src="/Scripts/tooltip.js" type="text/javascript"></script>
<script src="/Scripts/tooltip.dynamic.js" type="text/javascript"></script>
<script src="/Scripts/tooltip.slide.js" type="text/javascript"></script>
<script src="/Scripts/core.js" type="text/javascript"></script>
<script src="/Scripts/core-functionality.js" type="text/javascript"></script>   
<script src="/Scripts/core-extensions.js" type="text/javascript"></script>  
<script src="/ModuleScripts/jquery.ui.datepicker-de.js" type="text/javascript"></script> 
```

一切都很好，但正如标题中提到的，DatePicker 只有在单击时才会被翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:58:29.317

可能值得一试的是在调用 datepicker 函数时应用区域设置，如下所示：

```
$("#transports-calendar").datepicker(
    $.datepicker.regional['de']
); 
```

然后像这样设置onselect事件......

```
$("#transports-calendar").datepicker("option", "onSelect", function (date) {
   // Some stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:44:05.213

```
$("#transports-calendar").datepicker({
    onSelect: function() {
        // Some stuff
    }
});

$("#transports-calendar").trigger('click'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T23:26:21.507

您不需要手动`setDefault`翻译，因为它会在您包含翻译 js 文件时自动发生。

我有点担心您包含的所有 js 文件。这些文件是否包含相同的内容？特别是考虑到您还包括各个插件文件。他们可能会互相冲突吗？

```
<script src="/Scripts/jquery-ui.min.js" type="text/javascript"></script>
<script src="jquery-ui/ui/jquery-ui-1.8.20.custom.js"></script> 
```

当您调用时，日期选择器设置会立即更改`setDefault`。但是，直到需要它们时才会使用它们，例如单击以显示它或调用它的方法时。

还有`.datepicker("refresh")`一个会强制重绘日期选择器。该方法不会自动调用，`setDefault`但可能是您实际需要的。