# StackOverflow 问答 11960000-11960999

# python - 使用装饰器更新包装器时遇到错误

> ID：11960007
> 
> 赞同：8
> 
> 时间：2012-08-14T20:12:30.300
> 
> 标签：python, decorator, attributeerror, functools

在尝试使用装饰器更新函数的包装器时，我遇到了一个相当神秘的（至少对我而言）错误消息。有什么想法可以解决这个问题吗？

我试图使我的代码尽可能通用，以便它也适用于其他情况。

```
def decorator(d):
    """Make function d a decorator: d wraps a function fn."""

    def _d(fn):
        return functools.update_wrapper(d(fn), fn)
    functools.update_wrapper(_d, d)
    return _d

@decorator
def f(fn):
    """Converts the string fn to a function and returns it.
    Because of the @decorator decorator, _f.__name__ should
    be identical to f.__name__"""

    f.__name__ = fn
    def _f(fn):
        return eval(fn)
    return _f

g = f('x**2')
print g.__name__ 
```

期望的输出：

```
>>>x**2 
```

实际输出：

```
Traceback (most recent call last):
  File "C:\python\swampy-2.0\testcode.py", line 18, in <module>
    g = f('x**2')
  File "C:\python\swampy-2.0\testcode.py", line 6, in _d
    return functools.update_wrapper(d(fn), fn)
  File "C:\Python27\lib\functools.py", line 33, in update_wrapper
    setattr(wrapper, attr, getattr(wrapped, attr))
AttributeError: 'str' object has no attribute '__module__' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T20:46:49.937

装饰器将函数作为参数并返回另一个“装饰”函数。您正在传递一个字符串并尝试返回一个实际上是函数工厂的函数。 `functools.wraps`并`functools.update_wrapper`期待一个功能。函数对象将具有`__module__`属性，而实例`str`没有`__module__`属性。

你想从字符串“x**2”生成一个函数吗？

您的实施`decorator`是不必要的。只需使用`functools.wraps`：

```
def f(fn):
    """Converts the string fn to a function and returns it."""
    @functools.wraps(fn)
    def _f(fn):
        return eval(fn)
    return _f 
```

但是，在这种情况下，您不需要装饰器，而是需要函数工厂。

```
def factory(exp):
    def f(**kwargs):
        return eval(exp, globals(), kwargs)
    f.__name__ = exp
    return f 
```

现在你可以像这样使用它：

```
>>> x_squared = factory("x**2")
>>> x_squared(x=7)
49 
```

警告：外科医生已确定这`eval`对您的健康有害

# android - 你如何从不同的列表中挑选一个微调器？

> ID：11960008
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:12:32.183
> 
> 标签：android, arrays, string, list, spinner

截至目前，我所拥有的只是一个带有三个选项的微调器，我想做的是，如果选择了选项一，那么从 list1 中随机选择一个，选项 2 从列表 2 中选择，依此类推，我有一小部分编写的代码足以声明微调器并用选择填充它，我从这里去哪里？谢谢是提前！

这是我的xml上的代码：

```
 <Spinner
    android:id="@+id/alcohol"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:prompt="@string/prompt" /> 
```

然后这是我的 .java 文件：

```
 setContentView(R.layout.activity_options);
 // Set Alcohol Spinner
    Spinner spinner = (Spinner) findViewById(R.id.alcohol);
 // Create an ArrayAdapter using the string array and a default spinner layout
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
         R.array.alcohol, android.R.layout.simple_spinner_item);
 // Specify the layout to use when the list of choices appears
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 // Apply the adapter to the spinner
 spinner.setAdapter(adapter); 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:01:03.287

我认为从微调器中选择时需要获取该项目。如果是这样，请尝试此操作。

```
 spinner.setOnItemSelectedListener(new listener_Of_spinner()); 
```

// 用于选择房间的 Spinner 的监听器实现

```
public static class listener_Of_spinner implements OnItemSelectedListener 
{    static String getSelectedItem;
   public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) 
   {   
      // By using this you can get the position of item which you have selected from the dropdown 
      getSelectedItem = (parent.getItemAtPosition(pos)).toString();
   }
   public void onNothingSelected(AdapterView<?> parent) 
    {           
      // Do nothing.
    }
}; 
```

希望这可能有用

# maven - 如何在 TestNG for ie 之前执行代码。构建测试套件

> ID：11960009
> 
> 赞同：0
> 
> 时间：2012-08-14T20:12:38.363
> 
> 标签：maven, selenium, testng, ota, test-suite

我正在使用 Selenium2 + TestNG + Maven2 + 很多其他的东西。我想做的是在测试执行时即时构建 testng.xml（xml 套件），因为我会通过 OpenTestArchitecture (OTA) 从 HP ALM QC 中读取这些测试。无论如何告诉maven和surefire不要立即启动TestNG，而是在某处调用main方法，我可以通过它构建我的测试套件

```
XmlSuite xs = new XmlSuite();
XmlTest xt = new XmlTest(xs);
...
TestNG tng = new TestNG();
tng.setXmlSuites(suites);
tng.run(); 
```

目的还在于捕获所有类型的异常，以便能够通过 OTA 将 TestNG 的结果写回到 HP ALM QC 中。最近我有一个 String.format 异常，它杀死了我的整个脚本，因为它发生在我的 TestNG @AfterMethod

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:29:56.723

我认为最好的方法是在预集成测试生命周期阶段进行操作，然后在那里准备好 testng.xml，然后您就可以运行集成测试了。完整的事情可以通过

```
mvn verify 
```

您可以从简单的概念证明开始。

# android - 使用 LoaderManager 刷新 ListFragment

> ID：11960010
> 
> 赞同：2
> 
> 时间：2012-08-14T20:12:43.483
> 
> 标签：android, android-listview

我有一个 ListFragment 类作为我的活动的子类，并且`PreferenceActivity`我有一个设置来更改我拥有的 5 个可能的列表视图中的 2 个的排序，但是当我返回到带有列表视图的活动时，`onCreateLoader`不会再次调用所以列表保持不变。

更改设置值后如何更新列表？

我的一个例子`onCreateLoader`

```
if(pref.getString(Preferences.CAL_SORT, "1").equals("1")){
                return new CursorLoader(getActivity(),CalendarEvents.EVENTS_URI,
                        new String[] {CalendarEvents.EVENT_ID,CalendarEvents.EVENT_READ,CalendarEvents.EVENT_SUBJECT,
                            CalendarEvents.EVENT_COMPANY_NAME,CalendarEvents.EVENT_START}
                        ,null,null,CalendarEvents.EVENT_COMPANY_NAME+" COLLATE LOCALIZED ASC," /*+ julianday("*/+CalendarEvents.EVENT_START/* + ")"*/ + " COLLATE LOCALIZED DESC");
            }else{
                return new CursorLoader(getActivity(),CalendarEvents.EVENTS_URI,
                        new String[] {CalendarEvents.EVENT_ID,CalendarEvents.EVENT_READ,CalendarEvents.EVENT_SUBJECT,
                            CalendarEvents.EVENT_COMPANY_NAME,CalendarEvents.EVENT_START}
                        ,null,null,CalendarEvents.EVENT_COMPANY_NAME+" COLLATE LOCALIZED ASC," /*+ julianday("*/+CalendarEvents.EVENT_START/* + ")"*/ + " COLLATE LOCALIZED ASC");
            } 
```

我知道我可以调用`notifyDatasetChange()`适配器，但适配器对外部活动不可见。我应该在我的`ContentProvider`

这就是我的班级的结构

```
public class MainActivity extends FragmentActivity {

    public static class ListViews extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor>{
        public Loader<Cursor> onCreateLoader(int arg0,Bundle arg1){
        }
    }

    public void onResume(){
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T20:28:43.367

您必须调用[getLoaderManager().restartLoader(int, Bundle, LoaderCallbacks)](http://developer.android.com/reference/android/app/LoaderManager.html#restartLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29)。`onCreateLoader()`您可以根据`Loader`提供的`Bundle`.

[请参阅http://developer.android.com/reference/android/app/LoaderManager.html](http://developer.android.com/reference/android/app/LoaderManager.html)上的示例，过滤器更改时如何使用它。要检测首选项更改，您可以使用[SharedPreferences.OnSharedPreferenceChangeListener](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)。

# c++ - 居民纹理？

> ID：11960014
> 
> 赞同：1
> 
> 时间：2012-08-14T20:13:08.410
> 
> 标签：c++, windows, opengl, textures

什么是 OpenGL 中的常驻纹理？我正在阅读的这本书的作者没有解释常驻纹理背后的想法以及它们的真正作用。他基本上说我希望所有纹理都是驻留的，非驻留纹理不好。

帮助我理解这个主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:23:33.540

常驻纹理是仍存储在活动内存中的纹理。换句话说，OpenGL 不必为要激活的纹理腾出空间来调整内存。

您可以调用一个 OpenGL 函数来查看纹理是否处于活动状态：

```
GLboolean glAreTexturesResident(GLsizei n, 
const GLuint * textures, 
GLboolean * residences); 
```

有关该功能的更多信息： [glAreTexturesResident](http://www.opengl.org/sdk/docs/man/xhtml/glAreTexturesResident.xml)

以及关于常驻纹理的详细文章： [Understanding and Using OpenGL Texture Objects](http://www.gamasutra.com/view/feature/131768/understanding_and_using_opengl_.php?print=1)

# git - git 使用 git rm 命令删除不在 .gitignore 中的文件

> ID：11960020
> 
> 赞同：0
> 
> 时间：2012-08-14T20:13:28.053
> 
> 标签：git

我有这样的结构

```
SDI
|-.gitignore
\-webapp 
```

在 SDI/webapp/app 目录中，当我运行时`git rm -r --cached .`，我看到这样的文件已删除

```
rm 'webapp/app/views/MyStuff/myGroups.html'
rm 'webapp/app/views/MyStuff/userAdd.html'
rm 'webapp/app/views/MyStuff/userEdit.html'
rm 'webapp/app/views/auth/Secure/login.html'
rm 'webapp/app/views/errors/404.html'
rm 'webapp/app/views/errors/500.html'
rm 'webapp/app/views/main.html'
rm 'webapp/app/views/tags/auth/check.tag'
rm 'webapp/app/views/tags/generic.html'
rm 'webapp/app/views/tags/text.html' 
```

我`.gitignore contents`的如下

```
eclipse/
tmp/
bin/
tools/play-1.2.5/framework/pym/ 
```

为什么它会删除我的所有文件？`git config file.mode false`与我过去做过的其他存储库相比，我确实拥有这个存储库中唯一独一无二的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:15:47.630

*   In 实际上并没有删除文件，它只是从索引中删除更改。您的工作空间保持不变。
*   它这样做，因为你告诉它这样做。

[http://www.kernel.org/pub/software/scm/git/docs/git-rm.html](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)

> **从索引中删除文件**，或者从工作树和索引中删除文件。git rm 不会仅从您的工作目录中删除文件。（没有选项可以仅从工作树中删除文件并将其保留在索引中；如果您想这样做，请使用 /bin/rm。）被删除的文件必须与分支的尖端相同，并且不能在索引中暂存对其内容的更新，尽管可以使用 -f 选项覆盖默认行为。当给出 --cached 时，暂存的内容必须匹配分支的尖端或磁盘上的文件，从而允许仅从索引中删除文件。

和

> **-r** 给定前导目录名称时允许递归删除。

和

> **--cached** 使用此选项仅从索引中取消暂存和删除路径。工作树文件，无论是否修改，都将被单独保留。

我不知道，您想要实现什么（因为您没有告诉），但是该命令确实可以做到，它应该做什么以及应该以它应该的方式。

`.gitignore``git add`“just”告诉 git 在递归调用（例如`git add .`，或）时不要向索引添加更改`git commit -a`，或者在`git status`（可能还有其他工具，但这是最常见的用例）中显示它们。因为无论如何都不应该暂存对此文件的更改，因此`git rm`不会影响它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:34:38.627

它不是删除您的文件，而是取消暂存它们。您忽略的文件将被忽略。所以不用担心。如果要删除忽略的文件，可以

```
git clean -xdf 
```

更新：

如果您确实有一个您关心的文件，一种更安全的方法（如评论中所述）是

```
git stash -u && git clean -xdf 
```

# java - 间歇性 SSL 握手错误

> ID：11960021
> 
> 赞同：3
> 
> 时间：2012-08-14T20:13:32.467
> 
> 标签：java, security, ssl, active-directory, weblogic

我们有 SSL 问题，我 99% 这不是您通常的证书信任存储旋转木马。

我们有一个 Weblogic 服务器试图通过 LDAPS 与 Active Directory 建立 SSL 连接，底层 SSL 实现是 JSSE。

有时，它有效。通常在重新启动 Weblogic 后几个小时。

之后我们开始收到 SSL 握手错误，打开 SSL 调试，我们看到：

> [ACTIVE] ExecuteThread: '10' for queue: 'weblogic.kernel.Default (self-tuning)', 处理异常: java.net.SocketException: Connection reset [ACTIVE] ExecuteThread: '10' for queue: 'weblogic.kernel .Default (self-tuning)', SEND TLSv1 ALERT: fatal, description = unexpected_message [ACTIVE] ExecuteThread: '10' for queue: 'weblogic.kernel.Default (self-tuning)', WRITE: TLSv1 Alert, length = 32 [ACTIVE] ExecuteThread: '10' for queue: 'weblogic.kernel.Default (self-tuning)', 异常发送警报: java.net.SocketException: Broken pipe

到目前为止，我已经尝试了以下方法来理解/复制它：

*   通过 OpenSSL 连接并加载证书 - 每次都可以正常工作
*   通过加载证书的安全 ldapsearch 连接 - 每次都可以正常工作
*   通过自定义测试 Java 客户端连接 - 每次都可以正常工作
*   使用 Wireshark 和私钥解密 SSL 握手。

我注意到 Wireshark 的“糟糕”握手是在客户端发送 Change Cipher Spec 后，完成的消息 AD 不会以实物形式回复。更重要的是，Wireshark 无法解密 SSL 握手，失败：

> ssl_decrypt_pre_master_secret 错误 pre_master_secret 长度（109，预期 48） dissect_ssl3_handshake 无法解密 pre master secret

注意 当 SSL 握手完美运行时，Wireshark SSL 解密也能完美运行。

我看不到 SSL 握手的好坏有任何显着差异，直到 AD 服务器没有响应。

在这一点上，我被难住了......我真的很难理解为什么这会在某些时候失败并在剩下的时间里工作，在这一点上，我真的只是希望对可能发生的事情提出一些建议。

哦，是的，差点忘了。Active Directory 事件日志中有错误：

> 事件 ID：36888 引发了以下致命警报：20。内部错误的状态为 960。

经过一番研究，我设法发现对应于 SSL“BAD_RECORD_MAC”错误。

在这一点上我唯一的理论是，由于某种原因，错误的公钥被用于加密握手......我看不出为什么服务器（和 Wireshark）无法解密完成的消息。

谢谢！

更新：

我比较了坏情况和好情况，两种情况下的密码规范是相同的：TLS_RSA_WITH_AES_128_CBC_SHA。我还比较了来自客户端和服务器端的数据包，除了正常的以太网和 IP 协议差异外，它们看起来都是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T08:38:47.363

因此，经过大量的研究、实验和灵魂探索。我们最终将此问题追溯到我们用来连接外部系统的第三方库。在初始化时，它会将自身添加为 JSSE 默认提供者之前的安全提供者。我不知道为什么这会继续破坏所有后续的 SSL 连接......但确实如此。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:29:27.277

据我了解，您的问题是间歇性的。也就是说，您可以通过 SSL 连接到 AD，但有时您会注意到此错误。所以我猜证书问题[错误LDAPS](http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/9376684a-8210-45f0-86d6-589f615a6985/)不是你的问题。

根据您的描述，我只能想到以下几点：
首先，您在这里没有提供太多实际细节，而是您的评论：

> 注意 当 SSL 握手完美运行时，Wireshark SSL 解密也能完美运行。

给我一个提示，密码套件在坏情况下是不同的。请注意，即使您拥有私钥，wireshark 也无法通过 DHE 生成的密钥解密连接。
因此，如果密码套件在坏情况和好情况下确实不同（例如 RSA 与 DHE），您应该查看您的调查。
此外，按照您描述的方式，问题似乎发生在重新谈判期间。也许重新协商被禁用，您可以启用它？它被认为是不安全的，一般可以在服务器中配置

# css - 我可以在除内部之外的其他地方添加 CSS 表吗？

> ID：11960022
> 
> 赞同：0
> 
> 时间：2012-08-14T20:13:34.977
> 
> 标签：css

我是某种 wiki 的编辑。我没有对 Web 服务器的完全访问权限。

我唯一能做的就是在页面内添加 html。

所以，我知道我可以做到这一点：

```
 <head>
     <link rel="stylesheet" type="text/css" href="mystyle.css" />
  </head> 
```

或这个 ：

```
 <head><style>
       my css copy pasted here
  </style></head> 
```

但我无法访问 <head>

我想做这样的事情：

```
 <div>
      <link rel="stylesheet" type="text/css" href="mystyle.css" />
  </div> 
```

只是这样是行不通的。我几乎可以肯定我想做的事情是不可能的，但是在放弃这个想法之前，我想在这里检查一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:17:01.450

该`<style>`标签也可以用于`<body>`，因此您可以将 a`<style type="text/css">`放在正文中。

```
<body>
    <style type="text/css">
    css goes here
    </style>
</body> 
```

但是，请记住 CSS 的放置位置会影响其层叠方式。您可能需要注意这一点。

还要记住，虽然大多数浏览器会接受这个，但它是无效的 HTML，HTML5 不允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:20:47.973

我不认为你可以直接做到这一点，但有一个技巧。

您可以使用 javascript 动态添加 CSS 文件：

```
<body>

    <script>
        var link = document.createElement('link');
        link.setAttribute('rel',  'stylesheet');
        link.setAttribute('href', 'mystyle.css');
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

</body> 
```

但认为它是一种 hack，我不建议在生产中使用它。如果这是你的直接工作，你应该要求更多的权力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:20:55.657

在当前版本的 HTML5 中，如果样式标签具有“作用域”属性，您可以将样式标签添加到 div 标签中。W3-validator 尚未反映此更改。

而且无论这些东西是否有效，我测试的所有浏览器在添加到正文时都会呈现内联样式和链接样式。

是的，您的挑战将是找到一种方法来防止 wiki 软件将标签括号更改为 html 实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T20:16:24.770

您几乎可以在 HTML 的任何地方使用样式。请注意，某些位置优先于其他位置。 [http://stevenclark.com.au/2008/07/27/external-embedded-and-inline-css/](http://stevenclark.com.au/2008/07/27/external-embedded-and-inline-css/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T20:16:37.770

您可以使用 jQuery [http://www.rickardnilsson.net/post/2008/08/02/Applying-stylesheets-dynamically-with-jQuery.aspx](http://www.rickardnilsson.net/post/2008/08/02/Applying-stylesheets-dynamically-with-jQuery.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T20:17:45.333

显然它在 HTML5 中有效，但在 HTML4 中无效。我认为最大的风险（除了被浏览器忽略之外）是在页面加载时应用的样式的闪光。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T20:18:03.033

[当它包含“rel”时，您不能在正文中使用链接元素。](http://developers.whatwg.org/semantics.html#the-link-element)你只能在头脑中使用它。

# android - 检查广播接收器权限编程

> ID：11960030
> 
> 赞同：0
> 
> 时间：2012-08-14T20:14:24.057
> 
> 标签：android, android-intent, broadcastreceiver, android-permissions

我有一个用于 C2DM（旧）消息的广播接收器，例如

```
 <receiver android:name=".C2DMRegistrationReceiver">
           <!-- Receive the actual message -->
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.RECEIVE" />
              <category android:name="com.test" />
          </intent-filter>
          <!-- Receive the registration id -->
          <intent-filter>
              <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
              <category android:name="com.test" />
          </intent-filter>
         <intent-filter>
              <action android:name="REGISTRY_RETRY" />
              <category android:name="com.test" />
          </intent-filter>
    </receiver> 
```

出于安全原因，您应该声明此接收器的权限，例如

```
<receiver android:name=".C2DMRegistrationReceiver" permission="com.google.android.c2dm.permission.SEND"> 
```

我的问题是我的 3\. Intent Filter 没有收到呼叫，因为我强制执行 com.google.android.c2dm.permission.SEND 权限。

所以我的问题：有没有办法为一个广播接收器定义 2 个权限，或者我可以在我的 onReceive 代码中为调用者强制执行权限？

我试过

```
 private boolean checkC2DMPermission(Context context) {
    String permission = "com.google.android.c2dm.permission.SEND";
    context.enforceCallingPermission(permission, "Keine C2DM Permission");
    return true;
  } 
```

我还测试 `context.checkCallingPermission(permission)`了它的 -1 用于 C2DM 注册意图。Enforce 给了我一个 SecurityException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T14:39:37.093

我知道这个问题很老，但我遇到了同样的问题，这出现在谷歌搜索中，所以我们开始吧。

简短的回答是你不能。

上述[方法](http://developer.android.com/reference/android/content/Context.html#checkCallingPermission(java.lang.String))适用于执行 IPC 时，例如使用 AIDL的[绑定服务。](http://developer.android.com/guide/components/bound-services.html)

广播接收器未执行 IPC，因此您无法从广播接收器获取发送者权限。

要强制执行权限，您必须在清单中声明广播接收器的权限。这是可行的，因为 Android 在将其传递给接收者之前会强制执行所需的权限。

权限对于接收器中的所有操作都是通用的。为了解决这个问题，您可以按照@CommonsWare 的建议将广播接收器拆分为单独的类。

# sql - 使用 OpenQuery 插入会导致大量碎片

> ID：11960033
> 
> 赞同：0
> 
> 时间：2012-08-14T20:14:47.003
> 
> 标签：sql, sql-server, sql-server-2008, tsql, fragmentation

我每天使用以下代码将表从 Oracle DB 导入 SQL Server：

```
TRUNCATE TABLE mytable

INSERT INTO mytable (firstname, lastname, city, state)
SELECT * FROM OPENQUERY (mylinkedserver, 'SELECT firstname, lastname, 
city, state FROM mylinkedtable') 
```

以上导致“mytable”上的非聚集索引出现大量碎片（90% 到 99%）。如果我运行下面的代码

```
SELECT * INTO mytesttable
FROM mytable

TRUNCATE TABLE mytable

INSERT INTO mytable
SELECT * FROM mytesttable

DROP TABLE mytesttable 
```

我的非聚集索引的碎片率在 1% 到 3% 之间。这是什么原因造成的？这两个语句都在截断表并将新数据插入到空白表中。

# objective-c - 更改传递给 OpenAL 的音频数据的字节顺序

> ID：11960042
> 
> 赞同：2
> 
> 时间：2012-08-14T20:15:25.570
> 
> 标签：objective-c, c, endianness, openal

我在我正在开发的 iOS 应用程序中使用 OpenAL，我们的客户给了我们一堆大端格式的音频文件。我的问题是 OpenAL 只播放 little-endian 格式。

所以我认为我需要做的就是找到音频数据并将其反转，对吗？

我用于提取音频数据的代码（取自 OpenAL 教程）：

```
-(void)addSound:(NSString*)theSound
{
// get the full path of the file
NSString* fileName = [[NSBundle mainBundle] pathForResource:theSound ofType:@"caf"];
// first, open the file
NSLog(@"fileNAme is ===== %@", fileName);
AudioFileID fileID = [self openAudioFile:fileName];

// find out how big the actual audio data is
UInt32 fileSize = [self audioFileSize:fileID];

// this is where the audio data will live for the moment
unsigned char * outData = malloc(fileSize);

// this where we actually get the bytes from the file and put them
// into the data buffer
OSStatus result = noErr;
result = AudioFileReadBytes(fileID, false, 0, &fileSize, outData);
NSLog(@"OUT DATA IS == %d", outData);
AudioFileClose(fileID); //close the file

if (result != 0) NSLog(@"cannot load effect: %@",fileName);

NSUInteger bufferID;
// grab a buffer ID from openAL
alGenBuffers(1, &bufferID);

// jam the audio data into the new buffer
alBufferData(bufferID,AL_FORMAT_STEREO16,outData,fileSize,44100);

// save the buffer so I can release it later
[bufferStorageArray addObject:[NSNumber numberWithUnsignedInteger:bufferID]];

NSUInteger sourceID;

// grab a source ID from openAL
alGenSources(1, &sourceID);

// attach the buffer to the source
alSourcei(sourceID, AL_BUFFER, bufferID);
// set some basic source prefs
alSourcef(sourceID, AL_PITCH, 1.0f);
alSourcef(sourceID, AL_GAIN, 1.0f);

//alSourcei(sourceID, AL_LOOPING, AL_TRUE);

// store this for future use
[soundDictionary setObject:[NSNumber numberWithUnsignedInt:sourceID] forKey:theSound];

// clean up the buffer
if (outData)
{
    free(outData);
    outData = NULL;
}
} 
```

我想`unsigned char * outdata;` 这是我需要反转的（当然是在将音频文件数据加载到其中之后），但我不知道该怎么做。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:49:06.907

在这种情况下，您应该`ExtAudioFileRead`在配置`ExtAudioFile`' `AudioConvertor`s 格式后使用。它将为您节省大量时间。如果您知道所有输入文件都具有相同的样本格式，您可能会自行更换。

`ExtAudioFile`位于 OS X 和 iOS 上的 AudioToolbox.framework 中（基本上是上面`AudioFile`具有更高级别功能的一层），您可以通过包装一个`AudioFile`.

`AudioConvertor`也可以不使用`ExtAudioFile`.

在某些情况下，您可以只使用 OS X`afonvert`实用程序将它们交换到 LE，并在不增加（不必要的）编程挑战的情况下完成它。

为数组编写自己的字节序交换例程并不难——它只是耗时、乏味，而且您通常需要确保它*快速*且能够支持不自然对齐的样本数据。这涉及：

```
for (each sample) {
  reverse order of bytes in sample
} 
```

W'rkncacnter 提供了这个链接：[Convert big endian to little endian when reading from a binary file](https://stackoverflow.com/questions/3823921/convert-big-endian-to-little-endian-when-reading-from-a-binary-file)

如果自然对齐，您可以使用该方法。并且您需要在输入时看到的每种尺寸和样本描述的变体。操作系统还提供了`OSSwap`例程，但这些例程并不处理所有示例格式——它们专注于内置类型。

# c++ - C++：当使用位集数组（正确！）代替位集变量时，程序似乎不起作用

> ID：11960046
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:15:43.390
> 
> 标签：c++, debugging, bitset

编辑

//出于工作目的，编辑了其中的一些代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T04:46:15.217

我不太确定我理解为什么需要将 8bpp 图像拆分为单色图像，但是如果将 save_bmp 函数更改为以下内容，它至少会生成“有效”的图像

```
void save_bmp(char *fname, BITMAPFILEHEADER *header, BITMAPINFOHEADER *info, 
    std::bitset<N> *image) 
{ 
    FILE *file_ptr = fopen(fname, "wb"); 
    fwrite(header, sizeof(BITMAPFILEHEADER), 1, file_ptr); 
    fwrite(info, sizeof(BITMAPINFOHEADER), 1, file_ptr);   
    fwrite(&create_palette(0,0,0), sizeof(RGBQUAD), 1, file_ptr);   
    fwrite(&create_palette(255,255,255), sizeof(RGBQUAD), 1, file_ptr);   

    //fwrite(image, N, 1, file_ptr); 
    unsigned char * b = pack(image);
    fwrite(b,N/8,1,file_ptr);
    delete[] b;

    fclose(file_ptr); 
} 
```

std:bitset 是一个对象而不是缓冲区。由于您已经有一个打包函数将位集打包到缓冲区中，因此使用它而不是尝试将对象写入文件似乎很自然。

# twitter - 推特可以查看您的密码吗？

> ID：11960050
> 
> 赞同：4
> 
> 时间：2012-08-14T20:15:58.410
> 
> 标签：twitter, passwords

我见过多个“允许此应用程序与 twitter 一起运行”的东西，但没有一个：

*   查看您的推特密码

在“此应用程序将能够”下

例子：

![在此处输入图像描述](../Images/10f46348910b32e60885784f06a582d6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T20:17:09.773

没有推特永远不会让人们看到你的密码......他们只是为了让你确信没有人会看到你的密码......

他们永远不会共享密码。而且，密码肯定会在数据库中散列，因此它们几乎不可能解密

# permissions - 分布式应用程序中基于角色的权限

> ID：11960053
> 
> 赞同：1
> 
> 时间：2012-08-14T20:16:09.250
> 
> 标签：permissions, distributed, roles, access-control, rbac

我正在开发一个应用程序，该应用程序由在不同机器上运行的不同语言（其中包括 Java 和 C#）编写的模块组成（目前，在 LAN 内；所以它不是一个大的，但尽管如此，它是分布式的）。我们正在寻求一种合理的方法来实现功能的基于角色的权限（以配置谁有权调用功能的哪个部分）。

目前，这是通过一个自定义数据库表来解决的，该表将用户名映射到他们被允许使用的对话元素的 GUI ID（不是我的想法，以防万一你想知道......）并且我们的模块之一具有“管理”功能设置这些值。我有一种感觉，但不太确定，直接写入这个表不是一个好方法，特别是对于并发写入（'admin'模块的）和读取（虽然数据库事务应该提供并发处理......但是在这种情况下这是否足够？）。

所以我的想法将是一个中央服务（最好用 C# 编写，但 Java 也可以，如果它的框架为此提供更好的支持），所有模块都可以访问，设置和读取权限。然后，该服务可以防止并发问题。当然，在它的背后，它仍然会使用一个数据库来存储权限。

您如何看待这种方法，服务不会成为瓶颈吗？但这对我来说“感觉”是对的。我觉得不对的是从头开始做这件事，就像重新发明轮子一样。该服务是否类似于 (ASP).NET 提供的身份验证和授权子框架？甚至活动目录？但它的关注点似乎更粗粒度（文件、目录、打印机，而不是应用程序内的函数……）。你能告诉我你在这个话题上的经历吗？
提前谢谢了！

以下是我在搜索过程中发现的一些提示：
[http://en.wikipedia.org/wiki/Role-based_access_control](http://en.wikipedia.org/wiki/Role-based_access_control)
[使用 ADFS 和 WIF 存储基于角色的权限](https://stackoverflow.com/questions/11017258/storage-of-role-based-permissions-using-adfs-and-wif)
[设计基于权限的安全模型](https://stackoverflow.com/questions/6650262/designing-a-permissions-based-security-model)
[最佳基于角色的访问控制 (RBAC)数据库模型](https://stackoverflow.com/questions/190257/best-role-based-access-control-rbac-database-model)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:36:59.410

如果您正在寻找即用型解决方案，我建议您利用[LDAP设施。](http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)Active Directory 不仅是支持此协议的一种解决方案，您甚至可以使用开源的解决方案。但是考虑到常见和通用的解决方案，您可能会失去性能。我不记得我使用的支持 LDAP 的开源存储，但它看起来很慢。因此，最好的方法可能是实现您自己的可扩展且高度可用的存储即服务。

# c++ - Qt & shared_pointer：执行错误

> ID：11960055
> 
> 赞同：1
> 
> 时间：2012-08-14T20:16:18.273
> 
> 标签：c++, qt, shared-ptr, smart-pointers

我尝试使用**tr1**的**shared_ptr**和**Qt 4.8.2**但我遇到了一些麻烦。这是我的代码：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <string>
#include <tr1/memory>
using namespace std::tr1;

#include <QHBoxLayout>
#include <QVBoxLayout>
#include <QTreeView>
#include <QListView>
#include <QWidget>

#include <iostream>
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{

    shared_ptr<QHBoxLayout> mainLayout(new QHBoxLayout);

    shared_ptr<QTreeView> mainFeeds(new QTreeView);

    mainLayout->addWidget(mainFeeds.get());
    shared_ptr<QWidget> mainWidget (new QWidget);
    mainWidget->setLayout(mainLayout.get()); // <--- this line

    shared_ptr<QWidget> rightWidget(new QWidget);
    shared_ptr<QVBoxLayout> rightLayout(new QVBoxLayout);

    shared_ptr<QListView> rightItems(new QListView);
    rightLayout->addWidget(rightItems.get());

    shared_ptr<QListView> rightPreview(new QListView);
    rightLayout->addWidget(rightPreview.get());

    rightWidget->setLayout(rightLayout.get());
    mainLayout->addWidget(rightWidget.get());

    this->setCentralWidget(mainWidget.get());
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

和输出（我使用 Qt Creator）：

> 正在启动 /path/myproject-build-desktop-Qt_4_8_2_in_PATH_ *local* _Release/myproject... 程序意外完成。/path/myproject-build-desktop-Qt_4_8_2_in_PATH_ *local* _Release/myproject 以代码 0 退出

当我评论标记的行时，程序运行但我有一个空窗口。

我有两个问题：

1.  为什么这条线会出错？
2.  在 Qt 中使用智能指针（实际上是构建健壮的 C++ 代码）是正确的方法吗？

为了您的帮助，提前，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:23:57.747

要回答您的第二个问题，不，您尝试将 shared_ptrs 与 Qt 一起使用的方式不起作用。

您的共享指针在函数末尾超出范围（这会破坏指向的对象，因为它们是管理对象生命周期的唯一且因此是最后一个 shared_ptr ），而 Qt 对象仍在抓住指向具有的对象的原始指针刚刚被删除。因此，仅出于这个原因，当 Qt 尝试使用无效对象时，您的代码将无法正常工作。那是未定义的行为。

此外，Qt 自己进行资源管理。您将指向子对象的原始指针传递给其父对象，当父对象超出范围时，父对象将负责删除子对象。所以此时，无论如何都会调用子对象的析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:33:57.297

Qt 以自己的方式管理对象的生命周期。当你 make `A`child of 时`B`，`A`将`delete`'d 时`B`销毁。

所以，在这一行

```
mainWidget->setLayout(mainLayout.get()); 
```

你做`mainLayout`的孩子`mainWidget`。

正如`mainWidget`after 声明的那样`mainLayout`，它将首先被删除。也`mainLayout`将被删除。但随后`shared_ptr`会尝试`mainLayout`再次删除。

在`Qt`您使用智能指针时应该非常小心。Qt 内存管理通常获取对象的所有权（但并非总是如此）。此外，您可能更喜欢使用本机`Qt`智能指针

*   [`QPointer`](http://qt-project.org/doc/qt-4.8/qpointer.html)作为一周指针`QObject`
*   [`QScopedPointer`](http://qt-project.org/doc/qt-4.8/qscopedpointer.html)作为`std::unique_ptr`等的替代品
*   [`QSharedPointer`](http://qt-project.org/doc/qt-4.8/qsharedpointer.html)/[`QExplicitlySharedPointer`](http://qt-project.org/doc/qt-4.8/qexplicitlyshareddatapointer.html)用于粉碎指针。

# c# - 问号出现而不是空格

> ID：11960060
> 
> 赞同：2
> 
> 时间：2012-08-14T20:16:47.227
> 
> 标签：c#, .net, character-encoding

我有一个 CSV 文件。在写字板中查看时，某些行的末尾有空格。在 C# 中通过 File.ReadAllText(filename) 读取时，空格显示为 ?。这可能是什么原因造成的？

我想消除这个空格，但使用正则表达式不起作用，因为问号正在混淆数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:18:03.127

很可能是写字板显示为空格的字符实际上是非 ASCII 字符，或者文件使用了您在 C# 程序中不期望的编码。

在十六进制编辑器中查看该文件。

如果您没有方便的十六进制编辑器，您可以使用[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)将文件作为字节数组读取，并在您看到问号的位置附近查找超出可打印 ASCII 值范围的字节值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:28:27.203

您使用什么编码来读取文件？

默认编码 (UTF-8) 将高于 0x7F（十进制 127）的代码点表示为 2 个或更多八位字节。代码点 0xA0（十进制 160）以 UTF-8 编码为 0xC2A0。

当解码器读取八位字节 0xA0 时，这表明它是在两个八位字节中编码的代码点的引入八位字节。你得到的值是编码 0xA0 所代表的代码点？？在哪里 '？？' 是下一个八位字节的十六进制值。

您需要使用正确的编码读取文件。不知道文件的来源，很难知道。假设是 Windows 环境，最可能的嫌疑人将是以下编码之一：

*   “标准”窗口代码页，windows-1252
*   ISO-8859-1 又名 Latin-1
*   ISO-8859-2 又名 Latin-2

你可以这样得到一个实例：

```
Encoding windows1252 = Encoding.GetEncoding( "windows-1252" ) ;
Encoding latin1      = Encoding.GetEncoding( "iso-8859-1"   ) ;
Encoding latin2      = Encoding.GetEncoding( "iso-8859-2"   ) ; 
```

用法类似于：

```
 Encoding windows1252Encoding = Encoding.GetEncoding( "windows-1252" ) ;

    using ( TextReader tr = new StreamReader( @"c:\foo\bar\bazbat.csz" , windows1252Encoding ) )
    {
        string line ;
        while ( null != (line=tr.ReadLine()) )
        {
            process( line ) ;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:17:53.653

> 这可能是什么原因造成的？

Unicode 字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-27T07:38:26.083

我知道这是一篇旧帖子，但分享我的修复，所以它可能对某些人有用。

我遇到了类似的问题。当 .CSV 文件发布时，我想读取文件并提取内容。

这样做时，所有空白字符都被转换为����</p>

var contentAsString = Encoding.UTF7 .GetString(contentAsByteArray, 0, contentAsByteArray.Length - 1);

添加正确的编码类型，解决了我的问题。

首先我将文件作为字节数组读取，然后应用编码类型。

# excel - 如何在 Excel 中制作甘特图？

> ID：11960069
> 
> 赞同：0
> 
> 时间：2012-08-14T20:17:03.763
> 
> 标签：excel, gantt-chart

我正在尝试生成一个类似于甘特图的图表，该图表有效地显示了项目内团队的所有任务的 1 行信息。

[此链接](http://www.mediafire.com/?k5ms4a99o856crj,3q4xn4x24m70p6c,h0sbe6h4lu206)包括：

*   显示我想要实现的目标的链接图像。
*   一个允许我使用一些名为 Tableau 的软件生成图像的工作表。但是，理想情况下，我希望能够使用 excel 2010 做类似的事情，因为 Tableau 服务器的成本很高。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:01:18.873

新的数据栏/迷你图功能提供了制作甘特图和资源直方图的好方法，这是一个示例：

![在此处输入图像描述](../Images/568552b493020f30e73abd985b590d88.png)

实现此目的的一种方法是首先设置您的表，称为 A 说，然后创建数据栏，将最小和最大公式设置为等于定义的名称 Min:=MIN(A[Start])-A[@Start] 和 Max :=MAX(A[End])-A[@Start]+1。

您可以使用格式刷单独复制下来进行传播。为资源创建单独的范围并将列迷你图添加到单元格后，如图所示。

# javascript - Javascript变量似乎不会设置

> ID：11960073
> 
> 赞同：1
> 
> 时间：2012-08-14T20:17:11.067
> 
> 标签：javascript

在这个简化的小提琴中，我试图重新设置 "token" 的值以在后续表单提交中使用，但是尽管设置了值，但在下一次通过时，'token' 仍然设置为 QWERTY 的初始值.

```
var token = '';

function pollServer(token) {

    alert("Calling with token: " + token);

    alert("OLD: " + token);
    token = "ASDFG"; // new token
    alert("NEW: " + token);

}

function onsubmit_action() {

    alert("A: " + token);

    if (token === '') {
        // set the initial token
        token = 'QWERTY';
    }

    alert("B: " + token);
    pollServer(token);
    event.preventDefault();

}​ 
```

演示：http: [//jsfiddle.net/tUtRH/](http://jsfiddle.net/tUtRH/)

警报应该去：

```
<submit form>
A:
B: QWERTY
Calling with token: QWERTY
OLD: QWERTY
NEW: ASDFG

<submit form>

A: ASDFG 
```

相反，在第二次提交表单后，我得到：

```
A: QWERTY 
```

任何打在脸上的耳光或泼在我头上的冷水都将不胜感激。（显然，此代码已被剥离以涵盖最低限度的情况，这实际上是一堆获取/设置令牌等的轮询/AJAX 调用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:19:11.403

`pollServer`您的问题是调用参数 to `token`。

发生的事情是，在`pollServer`您内部设置的是本地的`token`，而不是全局的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:19:18.423

Javascript 是函数范围的。通过将令牌参数传递给函数`pollServer`，您正在创建一个名为的局部变量`token`，它将被使用而不是全局变量。

这是关于 SO 的最常见的 JS 问题之一。那和异步变量时序分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T20:19:35.903

您有一个全局变量 ，`token`它被函数参数 屏蔽`token`，因此函数内部的赋值对函数外部没有影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T20:32:15.257

JavaScript 中的原始变量是按值传递的 [1]。您应该使任何函数（例如您的 pollServer()）函数不仅接受参数，而且返回修改后的值，并让调用者使用函数的返回值。更像：

```
function pollServer(token) {
   token = 'new value';
   return token;
}

function something_else() {
   var token = 'old value';
   token = pollServer(token);
   if (token != 'old value) {
       alert('Success!');
   }
} 
```

[1] [http://snook.ca/archives/javascript/javascript_pass/](http://snook.ca/archives/javascript/javascript_pass/)

# jquery - 使用 jquery 发送表单值

> ID：11960075
> 
> 赞同：0
> 
> 时间：2012-08-14T20:17:19.473
> 
> 标签：jquery

我正在尝试将特定表单数据发送到 php 更新脚本以修改我们数据库中存储的值，我如何传递隐藏值和检查值。

```
<?php do { ?>
 <form>
<p> <?php echo $row_tasks['dept']; ?> / <?php echo $row_tasks['descrip']; ?> 
  <input type="checkbox" name="check" id="status" value="<?php echo $row_tasks['id']; ?   >">
  <input type="hidden"   id="tid" value="<?php echo $row_tasks['id']; ?>" />
  <input type="submit" name="update" id="update" value="Submit" />
 </p>
 </form>
 <?php } while ($row_tasks = mysql_fetch_assoc($tasks)); ?>
 <script>
  function showValues() {
  var str = $("form").serialize();
  $("#results").text(str);
 }
$(":checkbox, :radio").change(showValues);
$("select").change(showValues);
showValues();
 </script>
 <script type="text/javascript">
 $('form').submit(function() {
  alert($(this).serialize());
return false;
 });
 </script>
 <p><tt id="results"></tt></p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:37:34.880

给隐藏的输入一个名字..

# c# - 避免数据上下文中的匿名类型？

> ID：11960076
> 
> 赞同：1
> 
> 时间：2012-08-14T20:17:23.727
> 
> 标签：c#, wpf, linq, xaml, datagrid

我有这个数据网格

```
<DataGrid Grid.Row="3" Name="DataGrid6S" AutoGenerateColumns="False" VerticalScrollBarVisibility="Auto">
    <DataGrid.Columns>
    <DataGridTextColumn Header="ID" Width="50" Binding="{Binding ID}" Visibility="Collapsed"></DataGridTextColumn>
        <DataGridTextColumn Header="Name" Width="200" Binding="{Binding Name}"></DataGridTextColumn>
        <DataGridTextColumn Header="Text" Width="200" Binding="{Binding Text}"></DataGridTextColumn>
        <DataGridTemplateColumn Header="Edit" Width="*">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Click="Button_Click" >View Details</Button>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

由以下代码填充：

```
class Test {
        public int W { get; set; }
        public string X { get; set; }
        public string Y { get; set; }
    }

public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();

        List<Test> testList = new List<Test>();
        testList.Add(new Test() { W = 0, X = "hello", Y = "one" });
        testList.Add(new Test() { W = 1, X = "hello", Y = "two" });
        testList.Add(new Test() { W = 2, X = "hello", Y = "three" });
        testList.Add(new Test() { W = 3, X = "hello", Y = "four" });

        var query =
            from values in testList
            select new { ID = values.W, Name = values.X, Text = values.Y };

        DataGrid6S.ItemsSource = query;

    }

    private void Button_Click(object sender, RoutedEventArgs e) {
        var obj = ((FrameworkElement)sender).DataContext;
        // Can't access values because it's of an anoymous type.
        // What do I have to do to be able to access the values stored here?

    }
} 
```

单击按钮时，我想知道单击该按钮的行的ID，但由于行是使用匿名类型初始化的，所以我找不到，我该怎么做才能找出点击行的ID？

注意：这是一个简化版本，假设查询由 5 个连接和一个 where 子句组成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:20:47.710

为什么要在查询中使用匿名类型？你已经有了一个很好的对象，它可以保存你需要的所有数据，完全按照你所拥有的格式。你通过将其转换为匿名查询来明确删除所有有用的信息。只需设置`testList`为数据源并`Test`在按钮单击中访问项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:22:20.427

只需创建一个命名类型并选择它的实例，匿名类型适用于仅在创建它们的范围内编辑的对象。另外为什么不`Test`直接使用该类？唯一的区别是属性名称。另外不要忘记将`DataContext`转换为您的命名类型，因为它是`object`.

# git - 如何自动让 git 将本地分支推送到不同的远程分支

> ID：11960078
> 
> 赞同：2
> 
> 时间：2012-08-14T20:17:30.270
> 
> 标签：git

我有一个部署分支，它与我的 master 不同，它包含各种仅限服务器的资产文件，我不想在开发中污染我的 master，但我想推送到我的服务器上的 master。目前，每次我想推送我的代码时，我都会输入以下 git 命令：

```
git push heroku deploy:master 
```

如何修改我的 .git/config 文件，以便我可以使用

```
git push heroku 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:20:10.443

你必须`deploy`跟踪`heroku/master`。这可以通过

```
git branch --set-upstream deploy heroku/master 
```

[`git branch`](http://www.kernel.org/pub/software/scm/git/docs/git-branch.html)有关详细信息，请参阅文档。

另一种选择：在你的第一个之后`git push heroku deploy:master`，你可以扔掉你的`deploy`分支（`git checkout master && git branch -D deploy`）然后再次创建`deploy`：`heroku/master`

```
git checkout -b deploy heroku/master 
```

这将自动设置跟踪。

[Git Book](http://git-scm.com/book/en/Git-Branching-Remote-Branches#Tracking-Branches)和[git ready](http://gitready.com/beginner/2009/03/09/remote-tracking-branches.html)中也讨论了跟踪的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:42:26.157

Set your config so that you don't have to worry about it

```
git config --global push.default tracking 
```

Now each time you push, it will set up the tracking for subsequent pushes.

# django - 带有简单缩略图的衬垫合身

> ID：11960079
> 
> 赞同：7
> 
> 时间：2012-08-14T20:17:31.810
> 
> 标签：django, thumbnails, easy-thumbnails

我正在使用简单的缩略图为我的网站制作缩略图。我想从 1500x1023 像素的图像创建缩略图。所需缩略图的大小为 100x100 像素。我想要的是缩略图显示整个徽标，而不是裁剪或拉伸。我已经看到这被称为填充合身 - 与作物相反。例如，对于这张图片，我们会在顶部添加 236px 的空白，在底部添加 237px 的空白，然后调整大小。有没有办法用简单的缩略图做到这一点？如果没有，关于如何解决这个问题的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T23:54:04.920

感谢 Timmy O'Mahony 建议创建一个处理器来进行填充。这是遇到类似问题的人的代码。为了让它工作，你需要在设置中这样的东西：

```
THUMBNAIL_PROCESSORS = (
    'easy_thumbnails.processors.colorspace',
    'common.thumbnail_processors.pad_image',
    'easy_thumbnails.processors.autocrop',
    'easy_thumbnails.processors.scale_and_crop',
    'easy_thumbnails.processors.filters') 
```

然后你可以将它添加到 common/thumbnail_processors.py （或任何地方）

```
import Image

def pad_image(image, **kwargs):
    """ Pad an image to make it the same aspect ratio of the desired thumbnail.
    """

    img_size = image.size
    des_size = kwargs['size']
    fit = [float(img_size[i])/des_size[i] for i in range(0,2)]

    if fit[0] > fit[1]:
        new_image = image.resize((image.size[0],
            int(round(des_size[1]*fit[0]))))
        top = int((new_image.size[1] - image.size[1])/2)
        left = 0
    elif fit[0] < fit[1]:
        new_image = image.resize((int(round(des_size[0]*fit[1])), 
            image.size[1]))
        top = 0
        left = int((new_image.size[0] - image.size[0])/2)
    else:
        return image

    # For transparent
    #mask=Image.new('L', new_image.size, color=0)
    #new_image.putalpha(mask)

    # For white
    new_image.paste((255, 255, 255, 255))

    new_image.paste(image, (left, top))
    return new_image 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T02:46:06.307

非常感谢你的回答，乔希！这正是我几周以来一直在寻找的东西。但是，您的解决方案神秘地不适用于某些图像。

这是该缩略图处理器的（功能齐全）修订版： [https ://bitbucket.org/bercab/cmsplugin-nivoslider/src/b07db53c1ce4/cmsplugin_nivoslider/thumbnail_processors.py](https://bitbucket.org/bercab/cmsplugin-nivoslider/src/b07db53c1ce4/cmsplugin_nivoslider/thumbnail_processors.py)

# java - Calendar.getInstance().getTime() 是否会给我与 new Date() 不同的答案？

> ID：11960082
> 
> 赞同：9
> 
> 时间：2012-08-14T20:17:46.637
> 
> 标签：java

我正在尝试整合一些非常混乱的代码，但我想确保我不会破坏事情。在某些地方，我看到一个创建为的日期，`Calendar.getInstance().getTime()`而在其他地方，它只是`new Date()`. 如果我将它们全部转换为`new Date()`或者是否有某些原因我可能想要使用另一个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T20:37:06.967

理论上不会，因为 java.util.Date 和 java.util.Calendar.getInstance() 最终都使用 System.currentTimeMillis() 来返回当前时间。

但是，Calendar 实现会考虑其他因素，例如语言环境，或者语言环境是 JP 还是 TH……您可以在这两个类的源代码中看到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:36:21.560

我认为两者都会返回相同的：

`Calendar.getInstance().getTime()`：返回一个表示此日历时间值的 Date 对象（从 Epoch 的毫秒偏移量（1970 年 1 月 1 日 00:00:00.000 GMT (Gregorian).)”）。

`new Date()`：内部使用 System.currentTimeMillis()，分配一个 Date 对象并对其进行初始化，以便它表示分配它的时间，测量到最接近的毫秒。当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。

我检查过：

```
public static void main(String[] args) {
    Date date = new Date();
    Date date1 = Calendar.getInstance().getTime();

    System.out.println(date +" = " + date1);

} 
```

输出 ：

```
Wed Aug 15 02:45:15 IST 2012 = Wed Aug 15 02:45:15 IST 2012 
```

# c++ - 为什么是这个62的结果？

> ID：11960085
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:17:54.530
> 
> 标签：c++, c, operators

我唯一想到的是，MULT((3+2)(5*4))= 100 而不是 62？有人可以解释一下吗？

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>
#define ADD(x1, y1) x1 + y1
#define MULT(x1,y1) x1 * y1

int _tmain(int argc, _TCHAR* argv[])
{
    int a,b,c,d,e,f,g;
    a=2;
    b=3;
    c=4;
    d=5;
    e= MULT(ADD(a,b),MULT(c,d));
    printf("the value of e is: %d\n", e);
    system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T20:19:21.427

当宏展开时，这：

```
MULT(ADD(a,b),MULT(c,d)) 
```

变成：

```
a + b * c * d 
```

其中，用它们的值替换变量，相当于：

```
2 + 3 * 4 * 5 
```

这个表达式的值，根据优先级规则计算，是 62，因为乘法的优先级高于加法。

不要为此目的使用宏：使用函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-14T20:19:34.477

由于缺少`()`s，你最终得到：

```
e = a + b * c * d; 
```

因为：

```
MULT(ADD(a,b),MULT(c,d)) -> MULT(a + b,c * d) -> a + b * c * d 
```

所以，

```
e = 2 + 3 * 4 * 5 = 2 + 60 = 62 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T20:23:18.557

避免在 C++ 中使用宏

这样做可以解决您的问题：

```
#define ADD(x1, y1) ((x1) + (y1))
#define MULT(x1,y1) ((x1) * (y1)) 
```

但不要这样做。

而是使用函数（必要时使用内联函数）。

```
int ADD(int x1, int y1) {
    return x1+y1;
} 
```

# solrnet - 无法连接到 solr 服务器

> ID：11960090
> 
> 赞同：0
> 
> 时间：2012-08-14T20:18:12.383
> 
> 标签：solrnet

我们用 Solr 服务器设置了一个 linux 机器，一位同事编写了一个 java 程序来与它交互以进行搜索。我被要求做同样的事情，但是我们的另一个产品使用 .net，所以我从[google solrNet](http://code.google.com/p/solrnet/)下载了文档和示例文件。我将 web.config 文件的 solrUrl 键更新为现有 solr 服务器的地址 (http://192.168.10.26:8983/solr)，希望可以开始针对已经设置和配置的服务器进行测试。但是，当我运行示例应用程序时，出现以下错误。

> 无法连接到 Solr。请确保 Solr 正在“http://192.168.10.26:8983/solr/alex/admin”上运行或更改 web.config 中的地址，然后重新启动应用程序。

不幸的是，其他程序员不知道我应该尝试什么，所以，这里有人有什么想法吗？是否需要为 .net 客户端设置 linux 服务器上的某些内容？或者？？？谢谢。

# html - 从jsp引用css

> ID：11960095
> 
> 赞同：0
> 
> 时间：2012-08-14T20:18:46.413
> 
> 标签：html, css, jsp, href

我在下面有jsp页面`WebContent/WEB-INF/forms/login.jsp`-

```
<html>
<head>
<link rel="stylesheet" href=/Styles/Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
</body>
</html> 
```

`Site.css`位于`WebContent/Styles`。当我加载时`login.jsp`，我看到 css 不会影响 . 怎么写`href`正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:22:54.693

您可以使用

```
<link rel="stylesheet" href="../../Styles/Site.css" type="text/css" /> 
```

或者如果您的页面位于[http://yoursite.com/path/to/WebContent/WEB-INF/forms/login.jsp](http://yoursite.com/path/to/WebContent/WEB-INF/forms/login.jsp)，您可以使用

```
<link rel="stylesheet" href="/path/to/WebContent/Styles/Site.css" type="text/css" /> 
```

# c++ - for循环初始化中的括号

> ID：11960097
> 
> 赞同：1
> 
> 时间：2012-08-14T20:18:55.060
> 
> 标签：c++, syntax, for-loop, initialization, parentheses

```
for (int i(0); i < 10; ++i) { ... } 
```

`int i(0)`标准 C++ 中是否始终允许 for 循环初始化程序中的语法？

它可以很好地编译`g++ -std=c++98`，但在标准细节方面我不信任编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T20:22:47.970

是的。这是一个简单的变量声明（语言语法中的*简单声明*），在 C++ for 循环的*for-init 语句*中明确允许（与当时的 C 相对）。

特别是，在语言语法中，以下是等价的（都是*simple-declarations*）：

```
int i(0);
int i = 0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T20:51:09.623

*以下是《C++ 编程语言*》附录 A中语法的相关部分：

```
iteration-statement:
    ...
    for (for-init-statement condition_opt; expression_opt) statement

for-init-statement:
    ...
    simple-declaration

simple-declaration:
    decl-specifier-seq_opt init-declarator-list_opt;

init-declarator-list:
    init-declarator
    init-declarator-list , init-declarator

init-declarator:
    declarator initializer_opt

initializer:
    = initializer_clause
    ( expression-list ) 
```

所以是的，`for (int i(0); ...`标准 C++ 中一直允许使用该语法。

# wcf - WCF NetTcpBinding 安全性

> ID：11960098
> 
> 赞同：4
> 
> 时间：2012-08-14T20:18:59.740
> 
> 标签：wcf

我有一个 WCF 服务，它使用带有消息安全性和用户名身份验证的 NetTcpBinding。在此之前，我使用的是 WsHttpBinding，但我切换到了 NetTcp，因为我可以使用回调。

我的服务配置如下所示：

```
<service behaviorConfiguration="WcfServiceLibrary1.ServiceBehavior" name="WcfServiceLibrary1.Service">

    <endpoint
            address="net.tcp://localhost:9000/Design_Time_Addresses/WcfServiceLibrary1/Service/"
            binding="netTcpBinding"
            bindingConfiguration="NetTCPbinding"
            contract="WcfServiceLibrary1.IService"
            name="NetTCPBinding">
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service/" />
      </baseAddresses>
    </host>
  </service>
</services>
<bindings>
  <netTcpBinding>
    <binding name="NetTCPbinding">
      <security mode="Message">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </netTcpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="WcfServiceLibrary1.ServiceBehavior">
      <serviceCredentials>
        <serviceCertificate findValue="ServerCert" 
                            storeLocation="CurrentUser" 
                            storeName="TrustedPeople" 
                            x509FindType="FindBySubjectName" />
        <userNameAuthentication 
          userNamePasswordValidationMode="MembershipProvider" 
          membershipProviderName="CustomMembershipProvider" />
      </serviceCredentials>
      <!-- To avoid disclosing metadata information, 
      set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="True" />
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="MyRoleProvider" />
      <!-- Logs when an authentication failure -->
      <serviceSecurityAudit auditLogLocation="Application" 
                            suppressAuditFailure="true" 
                            serviceAuthorizationAuditLevel="Failure" 
                            messageAuthenticationAuditLevel="SuccessOrFailure" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我假设使用服务凭据（在本例中为证书），以便服务可以签署它发送给客户端的所有数据，以便客户端可以知道它正在与正确的服务进行通信。

客户端配置如下：

```
<behaviors>
  <endpointBehaviors>
    <behavior name="messageSecurityBehavior">
      <clientCredentials>
        <clientCertificate storeLocation="CurrentUser" 
                           storeName="TrustedPeople" 
                           x509FindType="FindBySubjectName" 
                           findValue="ClientCert" />
        <serviceCertificate>
          <authentication certificateValidationMode="None" />
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors>
<bindings>
  <netTcpBinding>
    <binding name="NetTCPBinding" closeTimeout="00:01:00" openTimeout="00:01:00"
                receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false"
                transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="65536">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
          enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </netTcpBinding>

</bindings>
<client>
  <endpoint address="net.tcp://localhost:9000/Design_Time_Addresses/WcfServiceLibrary1/Service/"
            binding="netTcpBinding" bindingConfiguration="NetTCPBinding"
            contract="IService" name="NetTCPBinding" behaviorConfiguration="messageSecurityBehavior">
    <identity>
      <certificate encodedValue="AwAAAAEAAAAUAAAAQerRMlEg2a66HMxD/8El6LutassgAAAAAQAAAOwBAAAwggHoMIIBVaADAgECAhAzOWVhNWUzM2Y5MzUwNzFhMAkGBSsOAwIdBQAwIjELMAkGA1UEBhMCVVMxEzARBgNVBAMTClNlcnZlckNlcnQwHhcNMTIwMTE3MTk1NDQ2WhcNMjUwOTI1MTk1NDQ2WjAiMQswCQYDVQQGEwJVUzETMBEGA1UEAxMKU2VydmVyQ2VydDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAs6SaYi3pDDIOuXeCe7HgOOTvOpwajKdxM8MzZpkK3l+DqkriMQUx9DT5I9WZvNK5FMuorLueG5adWkTgWpvttC7Sp8CJ//A+PbPewiAU4L3Txln6dX3jHZFd99LY/58/2AzY8ln2NykQFzz1DdmVeyShG9ktVsX82Ogz60lzpeUCAwEAAaMnMCUwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDgYDVR0PBAcDBQD6AAAAMAkGBSsOAwIdBQADgYEAMGQ7fIW34CYjybCc0gWOLaxeRFiNHmX/dgxqPIWGgg3uc0avz1GHJ3uMHcPAZBKcw9QpbccALpqZxZzkDBxufWjRni+8XCzeAKUqaB7XaJTYYUYBbz7/2+EuaAw7/vF4JTtZGWhPkHZZcX5+Oyo2ktK0z24MfXP2Ggy+IsQJ2JM=" />
    </identity>
  </endpoint>
</client> 
```

所有这一切都很好。我读过服务证书用于加密客户端凭据和消息。那为什么我们需要 AlgorithmSuite 中指定的算法呢？它加密什么？

我需要很好地理解这一点，以便我可以在我的论文中解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:35:46.363

证书导致用于加密消息的*密钥*（我不确定它是直接用作密钥本身，还是用于协商密钥）。AlgorithmSuite 确定[算法](http://msdn.microsoft.com/en-us/library/system.servicemodel.security.securityalgorithmsuite.aspx)，该算法将使用该密钥来加密消息。

* * *

***为什么**需要指定算法？*
因为您需要告诉 WCF*它应该如何*加密您的消息。使用的算法也在 SOAP 消息中标识，因为接收方必须知道使用什么算法来解密消息。请注意，如果您没有明确设置算法，它仍然会有一个值，NetTcp 的默认 Basic256 ( [source](http://msdn.microsoft.com/en-us/library/ms731309) )。

如果您启用消息跟踪，您会在 SOAP 正文中看到类似这些行的内容，以便为您的服务操作执行适当的（加密的）操作：

```
<e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" /> 
```

如果您将 AlgorithmSuite 更改为`Basic128`上述内容，则会`aes128-cbc`在 Algorithm 属性的后半部分显示。

在消息跟踪中，就在与您的服务操作对应的操作之前，`http://schemas.xmlsoap.org/ws/2005/02/trust/...`范围内将有几个操作来协商所有安全选项。在 WCF MSDN 中的[消息安全](http://msdn.microsoft.com/en-us/library/ms733137)页面上，您可以看到 WCF 使用 WS-Security 规范。有关此规范的更多信息，您可以访问我找到[WS-Security 2004 规范 (pdf)的](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0.pdf)[页面](https://www.oasis-open.org/standards#wssv1.0)。如果您需要论文的官方参考资料，这也可能很有用。

***它加密什么**？*
该算法对凭据和消息进行加密（使用在证书帮助下获得的密钥），就像您已经说过的那样:-)。如果启用[消息跟踪](http://msdn.microsoft.com/en-us/library/ms751526.aspx)，您可以看到这一点：凭据和消息正文都将使用所选算法进行加密。

* * *

免责声明：我仍然处于 WCF 学习曲线的斜率中，所以如果您的论文成绩取决于此，您最好仔细检查我的声明：D

# c++ - 在 Qt 项目中使用 mciSendString

> ID：11960101
> 
> 赞同：1
> 
> 时间：2012-08-14T20:19:14.790
> 
> 标签：c++, qt, mcisendstring

我正在尝试使用 mciSendString 函数在 Qt 中打开和关闭 cd 托盘。这是代码：

```
#include <windows.h>
MCIERROR mciSendString(LPCTSTR lpszCommand, LPTSTR lpszReturnString, UINT cchReturn, HANDLE hwndCallback);
void OpenCD()
{
    mciSendString((LPCTSTR)"set cdaudio door open",(LPTSTR)NULL, (UINT)0, (HANDLE)NULL);
}
void CloseCD()
{
    mciSendString((LPCTSTR)"set cdaudio door closed",(LPTSTR)NULL, (UINT)0, (HANDLE)NULL);
} 
```

但我收到此错误：“未定义对 `mciSendStringW(wchar_t const*, wchar_t*, unsigned int, void*)' 的引用”如何修复此错误并毫无问题地使用 mciSendString 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:30:53.597

尝试将下一行之一添加到 pro-file：

```
LIBS += path_to_lib/Winmm.lib 
```

或者

```
LIBS += path_to_lib/Winmm.dll 
```

你也可以包括 Mmsystem.h 和 Windows.h

[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757161%28v=vs.85%29.aspx)
例如：
Pro 文件包含从已安装 SDK 到 lib 文件的链接：

```
LIBS += $$quote(C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0A\\Lib\\WinMM.lib) 
```

在 cpp 文件中：

```
#include "Windows.h"
#include "mmsystem.h"
//MCIERROR mciSendString(LPCTSTR lpszCommand, LPTSTR lpszReturnString, UINT cchReturn, HANDLE hwndCallback);
...
void MainWindow::on_pushButton_clicked() {
   mciSendString((LPCTSTR)"set cdaudio door open",(LPTSTR)NULL, (UINT)0, (HWND__*)0);
} 
```

# sqlite - SQLite 查询 - 大型数据集非常慢

> ID：11960103
> 
> 赞同：2
> 
> 时间：2012-08-14T20:19:19.883
> 
> 标签：sqlite, system.data.sqlite

我目前正在运行一个如下所示的查询：

```
 Select Name from Location Where Created > (long value of date)
    and 
    Created < (long value of date) and LocationContainer = 'a string' 
```

日期的长值表示自 Epoch 以来的毫秒数，我们使用它来存储日期。

我有一个建立在`LocationContainer`, 按该顺序创建的索引。

我有一个返回 130 万行的查询，但它也需要大约 40 秒才能运行。那正确吗？由于我要查询的字段已编入索引，因此该查询不应该快得多吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:30:49.123

您是否尝试过更改 where 表达式的顺序？我绝不是专家，但我相信 where 子句中的表达式需要按照它们在复合索引中定义的顺序来指定列。所以你的查询应该变成这样的：

```
SELECT Name FROM Location
WHERE LocationContainer = 'a string'
  AND Created > (long value of date)
  AND Created < (long value of date) 
```

本质上，如果您有一个由 A、B、C 列组成的复合索引。where 子句按该顺序指定列 A、B、C 或 A、B 的查询将使用索引。

# math - 如何在不丢失边缘的情况下旋转图像

> ID：11960108
> 
> 赞同：2
> 
> 时间：2012-08-14T20:19:41.230
> 
> 标签：math, opencv, rotation, javacv

我想在 JavaCV/OpenCV 中以可变角度（如 22°）旋转一些图像。目前我使用 `cvWarpAffine()`.

我的问题是，旋转后我失去了图像的边缘，所以我必须使 dst.image 更大并移动中心点。在[这个页面上](http://actionscripthowto.com/bounding-box-of-a-rotated-rectangle/)，我找到了一些 AS-Code 来计算图像的新尺寸。但我不知道如何用 JavaCV/OpenCV 实现它

及时我有以下代码：

```
public CvMat rotateImage(int angle) {
    CvPoint2D32f center = new CvPoint2D32f(input.cols() / 2.0F,
            input.rows() / 2.0F);

    CvMat rotMat = cvCreateMat(2, 3, CV_32F);
    cv2DRotationMatrix(center, angle, 1, rotMat);
    CvMat dst = cvCreateMat(input.rows(), input.cols(), input.type());
    cvWarpAffine(input, dst, rotMat);
    return dst;

} 
```

有人有想法吗？

问候

**//更新**

不知道……有事。如果我计算旋转图像，我的结果具有正确的尺寸，但它主要是黑色（0 和 360° 有效）......这是代码：

```
public CvMat rotateImage(float angle) {
    CvPoint2D32f center = new CvPoint2D32f(input.cols() / 2.0F,
            input.rows() / 2.0F);
    CvBox2D box = new CvBox2D(center, cvSize2D32f(input.cols() - 1,
            input.rows() - 1), angle);
    CvPoint2D32f points = new CvPoint2D32f(4);
    cvBoxPoints(box, points);
    CvMat pointMat = cvCreateMat(1, 4, CV_32FC2);
    pointMat.put(0, 0, 0, points.position(0).x());
    pointMat.put(0, 0, 1, points.position(0).y());
    pointMat.put(0, 1, 0, points.position(1).x());
    pointMat.put(0, 1, 1, points.position(1).y());
    pointMat.put(0, 2, 0, points.position(2).x());
    pointMat.put(0, 2, 1, points.position(2).y());
    pointMat.put(0, 3, 0, points.position(3).x());
    pointMat.put(0, 3, 1, points.position(3).y());
    CvRect boundingRect = cvBoundingRect(pointMat, 0);

    CvMat dst = cvCreateMat(boundingRect.height(), boundingRect.width(),
            input.type());

    CvPoint2D32f centerDst = new CvPoint2D32f(center.x()
            + (dst.cols() / 2.0F), center.y() + (dst.rows() / 2.0F));

    CvMat rotMat = cvCreateMat(2, 3, CV_32F);
    cv2DRotationMatrix(centerDst, angle, 1, rotMat);
    CvMat trans = cvCreateMat(3, 3, CV_32F);
    cvZero(trans);
    trans.put(0, 2, dst.cols() / 2.0F);
    trans.put(1, 2, dst.rows() / 2.0F);

    trans.put(0, 0, 1);
    trans.put(1, 1, 1);
    trans.put(2, 2, 1);

    CvMat newRot = cvCreateMat(3, 3, CV_32F);
    cvZero(newRot);
    for (int i = 0; i < 2; i++) {
        for (int j = 0; j < 3; j++) {
            newRot.put(i, j, rotMat.get(i, j));
        }
    }

    newRot.put(2, 2, 1);
    cvMul(trans, newRot, newRot, 1);

    cvWarpPerspective(input, dst, newRot);
    // cvWarpAffine(input, dst, dstRotMat);

    return dst;

} 
```

`rotMat`看起来像：

```
[ 0.9396926, 0.34202015, -311.1334
 -0.34202015, 0.9396926, 601.47485 ] 
```

（`trans`组织图片的大小为 1428x928px）：

```
[ 1.0, 0.0, 836.0
0.0, 1.0, 699.0
0.0, 0.0, 1.0 ] 
```

和`newRot`

```
[ 0.9396926, 0.0, -260107.52
-0.0, 0.9396926, 420430.94
0.0, 0.0, 1.0 ] 
```

我找不到错误

**//更新2**

```
public CvMat rotateImage(float angle) {
    CvPoint2D32f center = new CvPoint2D32f(input.cols() / 2.0F,
            input.rows() / 2.0F);
    CvBox2D box = new CvBox2D(center, cvSize2D32f(input.cols() - 1,
            input.rows() - 1), angle);
    CvPoint2D32f points = new CvPoint2D32f(4);
    cvBoxPoints(box, points);
    CvMat pointMat = cvCreateMat(1, 4, CV_32FC2);
    pointMat.put(0, 0, 0, points.position(0).x());
    pointMat.put(0, 0, 1, points.position(0).y());
    pointMat.put(0, 1, 0, points.position(1).x());
    pointMat.put(0, 1, 1, points.position(1).y());
    pointMat.put(0, 2, 0, points.position(2).x());
    pointMat.put(0, 2, 1, points.position(2).y());
    pointMat.put(0, 3, 0, points.position(3).x());
    pointMat.put(0, 3, 1, points.position(3).y());
    CvRect boundingRect = cvBoundingRect(pointMat, 0);

    CvMat dst = cvCreateMat(boundingRect.height(), boundingRect.width(),
            input.type());

    // CvPoint2D32f centerDst = new CvPoint2D32f(((dst.cols()-input.cols()
    // )/ 2.0F),(( dst.rows()-input.rows()) / 2.0F));

    CvMat rotMat = cvCreateMat(2, 3, CV_32F);
    cv2DRotationMatrix(center, angle, 1, rotMat);
    CvMat trans = cvCreateMat(3, 3, CV_32F);
    cvZero(trans);
    trans.put(0, 2, (dst.cols() - input.cols()) / 2.0F);
    trans.put(1, 2, (dst.rows() - input.rows()) / 2.0F);

    trans.put(0, 0, 1);
    trans.put(1, 1, 1);
    trans.put(2, 2, 1);

    CvMat newRot = cvCreateMat(3, 3, CV_32F);
    cvZero(newRot);
    for (int i = 0; i < 2; i++) {
        for (int j = 0; j < 3; j++) {
            newRot.put(i, j, rotMat.get(i, j));
        }
    }

    newRot.put(2, 2, 1);
    cvMul(trans, newRot, newRot, 1);

    cvWarpPerspective(input, dst, newRot);
    // cvWarpAffine(input, dst, rotMat);

    System.out.println(rotMat);
    System.out.println(trans);
    System.out.println(newRot);

    return dst; 
```

在 1 度时，矩阵看起来像：

`rotMat`：

```
 [ 0.9998477, 0.017452406, -8.338219
 -0.017452406, 0.9998477, 12.534734 ] 
```

`trans`

```
 [ 1.0, 0.0, -8.0
  0.0, 1.0, -12.0
  0.0, 0.0, 1.0 ] 
```

`newRot`

```
 [ 0.9998477, 0.0, 66.70575
   -0.0, 0.9998477, -150.41681
   0.0, 0.0, 1.0 ] 
```

**最终的**

Hammer 指令的工作 JavaCode：

```
public CvMat rotateImage(float angle) {
    CvPoint2D32f center = new CvPoint2D32f(input.cols() / 2.0F,
            input.rows() / 2.0F);
    CvBox2D box = new CvBox2D(center, cvSize2D32f(input.cols() - 1,
            input.rows() - 1), angle);
    CvPoint2D32f points = new CvPoint2D32f(4);
    cvBoxPoints(box, points);
    CvMat pointMat = cvCreateMat(1, 4, CV_32FC2);
    pointMat.put(0, 0, 0, points.position(0).x());
    pointMat.put(0, 0, 1, points.position(0).y());
    pointMat.put(0, 1, 0, points.position(1).x());
    pointMat.put(0, 1, 1, points.position(1).y());
    pointMat.put(0, 2, 0, points.position(2).x());
    pointMat.put(0, 2, 1, points.position(2).y());
    pointMat.put(0, 3, 0, points.position(3).x());
    pointMat.put(0, 3, 1, points.position(3).y());
    CvRect boundingRect = cvBoundingRect(pointMat, 0);

    CvMat dst = cvCreateMat(boundingRect.height(), boundingRect.width(),
            input.type());

    CvMat rotMat = cvCreateMat(2, 3, CV_32FC1);
    cv2DRotationMatrix(center, angle, 1, rotMat);

    double y_1 = ((boundingRect.width() - input.cols()) / 2.0F)
            + rotMat.get(0, 2);
    double y_2 = ((boundingRect.height() - input.rows()) / 2.0F + rotMat
            .get(1, 2));

    rotMat.put(0, 2, y_1);
    rotMat.put(1, 2, y_2);

    cvWarpAffine(input, dst, rotMat);

    return dst;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:11:43.557

opencv 已经具有查找边界矩形的功能，这是您链接到的代码正在执行的操作。这是一个使用它的例子

```
std::vector<cv::Point2f> points;
points.push_back(cv::Point2f(0,0));
points.push_back(cv::Point2f(13,0));
points.push_back(cv::Point2f(0,11));
points.push_back(cv::Point2f(10,10));

cv::Rect rectangle = cv::boundingRect(points); 
```

返回的矩形的左上角位于 (0,0)，宽度为 14，高度为 12，这是包含每个点的最小尺寸。您需要的步骤如下

1.  获取图像所有 4 个角的坐标。
2.  通过仿射变换变换每个坐标。
3.  将这些点传递给 cv::boundingRect 以获得边界矩形。

boundingRect 返回的矩形的尺寸是您的目标图像需要的尺寸。不考虑边界矩形的位置，只考虑它的尺寸。

**编辑**

第二个问题是将旧图像的中心与新图像的中心对齐。如果一个矩形的尺寸改变了 dw 和 dh 那么

```
centerNew.x = centerOld.x+dw/2;
centerNew.y = centerOld.y+dh/2; 
```

因此，您需要将整个旧图像向右移动 dw/2 并向下（正 y）dh/2。这个运动可以被包裹到你的仿射变换中。您希望每个像素都被变换扭曲，然后被矩阵平移

```
tran_mat = [1,0,dw/2,
            0,1,dh/2] 
```

要将两者结合起来，它们需要相乘

NewWarp = tran_mat*old_warp;

不幸的是，您不能将它们相乘，因为它们的尺寸不匹配。在这种情况下，通过添加 [0,0,1] 作为新的第三行，将它们都转换为 3x3 矩阵。然后它们可以相乘。然后，您可以将该矩阵传递给 cv::warpPerspective 或通过删除底行（仍应为 [0,0,1]）将其转换回仿射变换。

**编辑 2** 我认为你有两个问题。第一的

```
cv2DRotationMatrix(centerDst, angle, 1, rotMat); 
```

centerDst 应该代表输入图像的中心，应该是

```
CvPoint2D32f center = new CvPoint2D32f(input.cols() / 2.0F,input.rows() / 2.0F); 
```

所以把你的电话改成

```
cv2DRotationMatrix(center, angle, 1, rotMat); 
```

此外，放入平移矩阵的变量需要是图像 1 的中心和图像 2 的中心之间的距离。有几种计算方法，但是

```
trans.put(0, 2, dst.cols() / 2.0F);
trans.put(1, 2, dst.rows() / 2.0F); 
```

不是其中之一。这会给你中心的运动

```
trans.put(0, 2, (dst.cols()-input.cols()) / 2.0F);
trans.put(1, 2, (dst.rows()-input.rows()) / 2.0F); 
```

我会想象大部分屏幕都是黑色的，因为您正在将整个图像从屏幕上转换出来。

**编辑3**

我只是自己编写并测试了它。这是我的代码。在没有从 Matx 到 pt 和返回的所有转换的情况下，可能有一种更优雅的方式来执行此操作，但这对我有用。它使用的是 c++，但它仍然清楚地显示了这个过程。只要找出你偏离这个的地方

```
cv::Mat im; //your image
cv::Matx23d rot = getRotationMatrix2D(cv::Point2f(im.cols/2,im.rows/2),45,1);
cv::Matx31d tl(0,0,1);
cv::Matx31d tr(im.cols,0,1);
cv::Matx31d bl(0,im.rows,1);
cv::Matx31d br(im.cols,im.rows,1);

std::vector<cv::Point2f> pts;
cv::Matx21d tl2 = rot*tl;
cv::Matx21d tr2 = rot*tr;
cv::Matx21d bl2 = rot*bl;
cv::Matx21d br2 = rot*br;
pts.push_back(cv::Point2f(tl2(0),tl2(1)));
pts.push_back(cv::Point2f(tr2(0),tr2(1)));
pts.push_back(cv::Point2f(bl2(0),bl2(1)));
pts.push_back(cv::Point2f(br2(0),br2(1)));

cv::Rect bounds = cv::boundingRect(pts);

cv::Matx33d tran(1,0,(bounds.width-im.cols)/2,
                 0,1,(bounds.height-im.rows)/2,
                 0,0,1);
cv::Matx33d rot33;
for(int i = 0; i < 6; i++)
    rot33(i) = rot(i);
rot33(2,0) = 0;
rot33(2,1) = 0;
rot33(2,2) = 1;
cv::Matx33d combined = tran*rot33;
cv::Matx23d final;
for(int i = 0; i < 6; i++)
    final(i) = combined(i);

cv::Size im_size(bounds.width,bounds.height);
cv::warpAffine(im, drawing_image,final, im_size); 
```

**编辑4**

```
rotation = 45 deg;
width = 300 height = 287

rotation matrix
[0.7071067811865476, 0.7071067811865475, -57.18228688765842;
 -0.7071067811865475, 0.7071067811865476, 147.9497474683058]

translation matrix
[1, 0, 58;
 0, 1, 64;
 0, 0, 1]

combined matrix
[0.7071067811865476, 0.7071067811865475, 0.8177131123415791;
-0.7071067811865475, 0.7071067811865476, 211.9497474683058] 
```

这是原始图像

![原始图像](../Images/b1279b58d29055222b02367cf3adf33f.png)

在这里它使用我发布的代码旋转了 45 度。

![45 度的图像](../Images/dd3896f4c50043a80d6473c1f89b896f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T20:14:27.633

锤子的回答对我有用。虽然它给出了一个错误。只需要稍微改变一下语法。这是对我有用的功能。

```
Mat rotateImage(Mat im, double angle){
cv::Matx23d rot = getRotationMatrix2D(cv::Point2f(im.cols/2,im.rows/2),angle,1);
cv::Matx31d tl(0,0,1);
cv::Matx31d tr(im.cols,0,1);
cv::Matx31d bl(0,im.rows,1);
cv::Matx31d br(im.cols,im.rows,1);

std::vector<cv::Point2f> pts;
cv::Matx21d tl2 = rot*tl;
cv::Matx21d tr2 = rot*tr;
cv::Matx21d bl2 = rot*bl;
cv::Matx21d br2 = rot*br;
pts.push_back(cv::Point2f(tl2(0),tl2(1)));
pts.push_back(cv::Point2f(tr2(0),tr2(1)));
pts.push_back(cv::Point2f(bl2(0),bl2(1)));
pts.push_back(cv::Point2f(br2(0),br2(1)));

cv::Rect bounds = cv::boundingRect(pts);

cv::Matx33d tran(1,0,(bounds.width-im.cols)/2,0,1,(bounds.height-im.rows)/2,0,0,1);
cv::Matx33d rot33;
for(int i = 0; i < 2; i++)
    for(int j=0; j<3; j++)
        rot33(i,j) = rot(i,j);

rot33(2,0) = 0;
rot33(2,1) = 0;
rot33(2,2) = 1;
cv::Matx33d combined = tran*rot33;
cv::Matx23d finall;
for(int i = 0; i < 2; i++)
    for(int j=0; j<3; j++)
        finall(i,j) = combined(i,j);

cv::Size im_size(bounds.width,bounds.height);
Mat drawing_image;
cv::warpAffine(im, drawing_image,finall, im_size);

return drawing_image;
} 
```

# spring - POST 方法读取查询参数而不是表单字段

> ID：11960110
> 
> 赞同：0
> 
> 时间：2012-08-14T20:19:49.367
> 
> 标签：spring, tomcat, spring-mvc

我有jsp，它有方法action="POST"。最初，这个 jsp 通过一个控制器（Spring）在 URL 中使用查询字符串 param1=paramValue1 调用。（例如 /thisJsp.jsp?param1=paramValue1）。Spring 在这里使用了 GET 方法，因此会读取查询参数。

后来我会通过javascript设置一个隐藏的表单输入字段$（'#param1'）.val（paramValue2）来提交（）。

我的问题是回到控制器，它注册方法操作是 POST，但是当我执行 request.getParameter("param1") 时，它总是返回 paramValue1。

使用 Fiddler，我看到 param1=paramValue2 已注册，这意味着它是在 submit() 上设置的。

我错过了什么？

我正在使用 Tomcat 服务器和 Spring 2.0.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:31:58.920

你能看到 POST 要去的 URL 吗？您的表单可能会或可能不会设置其“操作”属性。如果没有设置，那么它将 POST 到页面当前所在的相同 URL。这可能会导致您发布到查询字符串中带有 ?param1=paramValue1 的 URL，但随后在帖子正文中也有 param1=paramValue2 的情况。您可以更改表单，以便将其操作设置为“/thisJsp.jsp”而没有查询字符串，这可能会解决您的问题。

通常，在请求中多次包含相同的命名参数是有效的，无论是 GET 还是 POST。您也可以尝试在控制器中调用 request.getParameterValues("param1") ，这将返回一个字符串数组。这将是一个很好的测试，看看您是否确实传递了 param1 的两个值。

# php - 如何使用 htaccess 将旧域的查询字符串传递给新域

> ID：11960111
> 
> 赞同：1
> 
> 时间：2012-08-14T20:19:50.810
> 
> 标签：php, .htaccess

例如：

```
http://www.old-domain.com/news.php?NewsID=30888&test=3 
```

到：

```
http://www.new-domain.com/?NewsID=30888&test=3 
```

我只需要获取新域上的参数而不是页面'news.php'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:26:10.530

当您使用重定向或重写时，默认情况下会发生这种情况。例如，在`old-domain.com`域的文档根目录中的 htaccess 文件中：

```
Redirect 301 /news.php http://www.new-domain.com/ 
```

任何转到的查询字符串（例如`?NewsID=30888&test=3`）`/news.php`将自动附加到`http://www.new-domain.com/`.

与 mod_rewrite 相同：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?old-domain.com$ [NC]
RewriteRule ^news.php$ http://www.new-domain.com/ [L,R=301] 
```

* * *

编辑：有价值的信息：

> 在我的情况下，它可能出现在除news.php之外的任何页面，所以它不是基于news.php的。我只需要可能来自任何页面的新域上的参数。例如：`old-domain.com/pagename.php?var1=data1&var2=data2`到`new-domain.com/?var1=data1&var2=data2`

那将是：

```
RedirectMatch 301 ^/(.*) http://www.new-domain.com/ 
```

或者

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?old-domain.com$ [NC]
RewriteRule ^ http://www.new-domain.com/ [L,R=301] 
```

就像我在回答中所说的那样，实际路径是无关紧要的。**查询字符串会自动附加，您无需执行任何特殊操作**。

# iphone - 获取点击手势以链接回不带返回按钮的第一个视图？

> ID：11960112
> 
> 赞同：0
> 
> 时间：2012-08-14T20:19:53.243
> 
> 标签：iphone, ios, ios4, sdk

目前我有一个主视图和一个详细视图。在详细信息中，有一张我添加了 TapGestureRecognizer 的图像。然后在 TapGestureRecognizer 上，我添加了一个 segue 推回主视图。问题出在模拟器中，当我单击图像时，它会将我带到主视图，但导航器项中的后退按钮显示详细视图的名称。

我希望点击手势链接回第一个主视图。而不是使用后退按钮链接到主视图。我怎么能这样做呢？我认为这与准备 Segue 有关。

有什么帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:29:44.280

只需弹出视图控制器。调用方法：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

它会回到之前的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:00:48.230

花了几个小时，但我发现我不需要转场，而只需要在课堂上处理点击手势：

```
 UITapGestureRecognizer *singleFingerTap =
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                                action:@selector(handleSingleTap:)];
        [self.view addGestureRecognizer:singleFingerTap];

    }

    - (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
        //The event handling method
        [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

# node.js - Express + node.js：打包为 tar 的大型目录的服务非常慢

> ID：11960121
> 
> 赞同：2
> 
> 时间：2012-08-14T20:20:12.463
> 
> 标签：node.js, express

我刚开始玩 Web 开发，node.js + express 帮助我在我不那么强大的嵌入式系统上快速建立了一个简单的服务器。但是，当尝试将 270MB 目录作为 tarfile 提供时，我的解决方案的性能一点也不好。

在获得有关 irc 的帮助后，我尝试使用 fstream 和 node-tar 提供文件，如下所示：

```
fstream.Reader({ type: "Directory" , path: mydir }).pipe(tar.Pack({})).on("error", function(){ res.statusCode = 500; res.end('Unable to create tarball'); }).pipe(res) 
```

它可以工作，但是将 270MB 的文件下载到我的 PC 需要大约 20 分钟。作为一个实验，我尝试在目标上压缩文件夹，然后将其 scp'ed 到我的 PC 上。这花了 1 分 12 秒 + 2 分 17 秒，这有很大的不同。

（我尝试使用 node-static 提供预压缩文件，但我的嵌入式系统内存不足）

知道是什么让 express+node.js 解决方案如此缓慢吗？

**更新一些基准测试：**

我怀疑使用另一个网络服务器对于静态文件服务会更好，但我认为它不能解释这里的巨大差异。

对文件夹进行基准测试，生成 64MB tar

**手动**：
*46 秒*

```
# on server:
tar -cf foo.rar <folder>  
# on client
scp root@<ip>/path/to/foo.rar . 
```

**fstream + node-tar：直接**
*4 分 25 秒*

```
fstream.Reader({type: "Directory", path: dir}).pipe(tar.Pack({})).on("error", function(){res.statusCode = 500; res.end('Unable to create tarball');}).pipe(res); 
```

**fstream + node.tar：首先流式传输到文件，然后提供文件**
*1 分 11 秒*

```
fstream.Reader({type: "Directory", path: dir}).pipe(tar.Pack({})).on("error", function(){res.statusCode = 500; res.end('Unable to create tarball');}).pipe(fstream.Writer('/tmp/test.rar').on("close", function() {
    var rs = fs.createReadStream('/tmp/test.rar');
    rs.on('data', function(data) {
        res.write(data);
    });
    rs.on('end', function() {
        res.end();
    });
})); 
```

# c# - 如何在不处理错误或保留以前数据的情况下重新打开已关闭的表单？

> ID：11960142
> 
> 赞同：0
> 
> 时间：2012-08-14T20:22:06.160
> 
> 标签：c#, forms, show, dispose

我有一个主窗体（Form1）和一个辅助窗体（AddProd）。在 Form1 上，我有一个打开 AddProd 的按钮。这是事件代码。

```
private void button69_Click(object sender, EventArgs e)
    {
        pIdVal = Convert.ToInt32(dataGridView2.SelectedRows[0].Cells[0].Value);
        editAdd = true;
        addProd.Show();
    } 
```

“pIdVal”是一个 int，表示要显示的所选记录的 ID。“editAdd”是一个布尔值，它将告诉 AddProd 用户是否希望编辑选定的信息或添加新信息。

我遇到的问题是，当用户在编辑、添加或取消后关闭 AddProd 时，如果我使用 this.Close()，表单就会被释放。除非我重新启动整个程序，否则不允许再次打开 AddProd。如果我尝试重新打开它，我会收到一条错误消息，上面写着“无法访问已处置的对象。对象名称：'AddProd'。” 我也尝试使用 this.Hide() 代替 this.Close()。它使我无法得到已处理的错误。但是，如果我选择一条新记录，然后再次打开 AddProd，则先前选择的记录中的数据仍在文本框中。

为了帮助更好地理解我的问题。Form1 显示产品的 dataGridView 供用户查看。然后用户可以选择一行数据进行编辑，或者用户可以添加新的数据行。一旦用户选择了一行，他们就会按下 Edd/View(button69) 按钮。这将打开 AddProd，其中包含填充了所选行数据的文本框。一旦用户编辑或查看数据并关闭 AddProd，他们选择了不同的行并再次按下 Edd/View 按钮。只有这一次，显示的数据是先前选择的行的数据，而不是当前选择的行。当然，除非我使用 this.Close()。在这种情况下 AddProd 不会重新打开，它只是错误。

对不起，如果我有点重复。我只是想确保这个问题没有问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:26:36.830

只需创建一个 AddProd 的新实例：

```
private void button69_Click(object sender, EventArgs e)
{
    pIdVal = Convert.ToInt32(dataGridView2.SelectedRows[0].Cells[0].Value);
    editAdd = true;
    AddProd addProd = new AddProd();
    addProd.Show();
} 
```

# java - 未找到文件异常 - 仅基于文本的文件

> ID：11960147
> 
> 赞同：0
> 
> 时间：2012-08-14T20:22:31.783
> 
> 标签：java, filenotfoundexception

完整编辑：是的，我觉得我所看到的明显不是针对不从事这个项目的人，所以这可能会惹恼一些人，但我将在这里重置细节。

最初：- 我的 Eclipse IDE 工作区中有一系列文本文件、图像文件和声音文件。当我从 IDE 运行应用程序时，一切都很闪亮。使用 File 和 Scanner 类（见下文）加载基于文本的文件（在此实例中为 .DAT），并且由 slick2d 加载图像和声音（见下文）：

```
// Loading a text based file from the IDE workspace
Scanner scanner = new Scanner(new File("text/intro1.DAT"));

// Loading an image and a sound as handled by slick2d
Image background = new Image("images/backgrounds/menuBG.jpg");
Sound bgm = new Sound("sounds/music/MainMenuTheme.wav"); 
```

到目前为止，一切正常，但是......

导出：- 当我将文件导出到可运行的 jar 时，没有任何文本、声音和图像随之导出。我做了一些研究并了解到，如果库的 /lib 文件夹中包含的内容将被导出。这有两个影响：

*   这破坏了 IDE 中的所有链接。看到现在一切都存在于 ./lib/...
*   但是，由于 lib 的内容直接导出到 jar 的顶层（至少当我使用 Eclipse 和 JarSplice 这样做时），这*修复*了差异。至少在我试图解决的问题之前。

问题：- 查看上面的代码，文本文件夹和声音文件夹在生成的导出 jar 中位于完全相同的级别。自从他们都工作的IDE以来，那个和路径字符串没有改变。现在，在导出到可运行的 jar 之后，所有声音和图像文件都已由 slick2d 成功加载，但所有基于文本（.DAT）的文件现在在运行时都会导致 FileNotFound 异常，即使它们的访问权限尚未改变了。

显然，直接意义上的路径没有问题，因为图像和声音仍在加载，但错误仍然存​​在。

我以错误的方式访问文件？slick2d 如何自我管理和尝试以我的方式访问文件之间是否存在某种冲突？

希望这更清楚一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:40:49.433

Since you said the files have moved I'm going to guess you would want something like this

```
File file = new File("lib/text/intro1.DAT");
Scanner scanner = new Scanner(file);

Scanner scanner = new Scanner(new File("lib/text/intro1.DAT")); 
```

Relative file paths (file paths that don't start with '/' or a drive letter) start at the root of the project/jar.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:41:32.463

当指定文件的相对路径时，java 解释相对于当前工作目录的相对路径。当前工作目录是您运行 java 命令的地方。

您应该指定文件相对于该目录的位置。

例子：

```
 File located at: drive1/files/yourfile
   java run in: drive1/aDir/

   In this case you should specify the file's location as: ./../files/yourfile 
```

# c# - 处理列表或数组中的项目组

> ID：11960148
> 
> 赞同：1
> 
> 时间：2012-08-14T20:22:38.700
> 
> 标签：c#, .net-2.0

我有一串文本，其中的项目用分号分隔。可能有一个、几个或数百个这样的项目。

我需要分批处理这些项目，最多 100 个。我可以使用数组或列表，两者都可以。但是，LINQ 不是一种选择。

我可以想出笨拙的方法来做到这一点，但是有没有一种既高效又紧凑的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:30:12.040

用这个

```
public static IEnumerable<IEnumerable<T>> Batch<T>(IEnumerable<T> collection, 
                                                   int batchSize)
{
    List<T> nextbatch = new List<T>(batchSize);
    foreach (T item in collection)
    {
        nextbatch.Add(item);
        if (nextbatch.Count == batchSize)
        {
            yield return nextbatch;
            nextbatch = new List<T>(batchSize);
        }
    }
    if (nextbatch.Count > 0)
        yield return nextbatch;
} 
```

并使用它

```
var result = Batch("item1;item2;item3".Split(';'), 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:31:07.610

你甚至不想一次在内存中存储超过 100 个，你可以使用循环遍历前 100 个匹配项`String.Split`：

```
string input; //your string
int i;
string[] inputArray; //tring split on semicolon goes here
while(true)
{
    inputArray = input.Split(new char[]{";"}, 101) //only split on first 101 times
    if (inputArray.Count <= 100) //last iteration
    {
        for (i = 0; i < inputArray.Count; i++)
            SendEmail(inputArray[i]);
        break;
    }
    else //will have left over for another loop
    {
        for (i = 0; i < 100; i++)
            SendEmail(inputArray[i]);
        input = inputArray[100];
    }
}; 
```

我确信有一些方法可以优化这一点，但基本思想 - 使用`count`特性`Split`来避免与它们一起工作 - 可能是解决问题的最佳方法。

# algorithm - 描述我的算法

> ID：11960160
> 
> 赞同：3
> 
> 时间：2012-08-14T20:23:34.610
> 
> 标签：algorithm, math, sequence, pseudocode

**概述**

我在这里一个陌生的地方。我写了一个算法，现在不确定如何记录它。我正在寻求将这种逻辑转化为精确描述的帮助。

**细节**

我有一种方法可以将可变数量的组作为输入并输出大量结果。结果的数量随组中项目的分布和组的数量而变化。我可以计算将这样创建的结果数：

*在伪代码中：*

`(# of groups -1) * (# items in group 1) * (# items in group 2) * ... * (# items in group n)`

*用英语：*

组数减一，乘以第 1 组的项目数，乘以第 2 组的项目数，乘以第 3 组的项目数……等等。

**问题**

上面的伪代码和英文描述都显得笨拙。

我如何更简洁地描述这个算法？有没有简洁的数学公式？或者可以用更准确的词来描述吗？更好的伪代码？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:29:52.673

您可以使用[大写的 Pi 符号](https://en.wikipedia.org/wiki/Multiplication#Capital_Pi_notation)来非常简洁地表达这一点。将组建模为集合并使用[基数符号](https://en.wikipedia.org/wiki/Cardinality)表示`# of items in group`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:31:17.173

就像 (N-1)*Mult(k(i))(i 从 0 到 N-1)

数学：**组的直接乘积**

去这里： [http ://en.wikipedia.org/wiki/Direct_product_of_groups](http://en.wikipedia.org/wiki/Direct_product_of_groups)

并寻找：

```
===Finite direct products=== 
```

![在此处输入图像描述](../Images/0bd92ad4076f4c82cf19f8bd07281b1f.png)

不要忘记乘以 N-1 ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:38:40.980

这是我的出发点：

(n-1) * (跨集 1..n 的基数乘积) 其中 n = 组数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T21:21:49.910

这对我来说是最清楚的，可能大多数人都有 OO 背景而不是抽象数学学位。

```
(# of groups - 1) * (group1.size) * (group2.size) * ... * (groupN.size) 
```

# c# - 当子窗口打开时，如何在 C# 中禁用父窗口？

> ID：11960161
> 
> 赞同：0
> 
> 时间：2012-08-14T20:23:37.470
> 
> 标签：c#, wpf, window, showdialog

我创建了一个计时器类来监视软件的许可证。当发生错误时，我调用 ShowDialog() 来显示我的自定义窗口窗体。我的问题是如何禁用父窗口？这是我的问题的一个简单示例。正如您所看到的，一旦 MessageBox 弹出，您仍然可以从 MainForm 窗口键入。

MainForm1.cs 文件

```
using System;  
using System.Collections.Generic;  
using System.ComponentModel;  
using System.Data;  
using System.Drawing;  
using System.Linq;  
using System.Text;  
using System.Windows.Forms;  

namespace TestProject  
{  
    public partial class MainForm1 : Form  
    {  
        public MainForm1()  
        {  
            InitializeComponent();  
        }  

        private void MainForm1_Load(object sender, EventArgs e)  
        {  
            TimerClass1 timer = new TimerClass1();  
        }  
    }  
} 
```

消息框.cs 文件

```
using System;  
using System.Collections.Generic;  
using System.ComponentModel;  
using System.Data;  
using System.Drawing;  
using System.Linq;  
using System.Text;  
using System.Windows.Forms;  

namespace TestProject  
{  
    public partial class MessageBox : Form  
    {  
        public MessageBox()  
        {  
            InitializeComponent();  
            this.label1.Text = "Hello There";  
            this.button1.Text = "OK";  
            this.button1.DialogResult = System.Windows.Forms.DialogResult.OK;  
        }  
    }  
} 
```

TimerClass1.cs 文件

```
using System;  
using System.Collections.Generic;  
using System.Linq;  
using System.Text;  
using System.Timers;  
using System.Windows;  

namespace TestProject  
{  
    class TimerClass1  
    {  
        Timer _timer;  
        public TimerClass1()  
        {  
            _timer = new Timer(1);  
            _timer.Elapsed +=new ElapsedEventHandler(_timer_Elapsed);  
            _timer.Enabled = true;  
        }  

        private void _timer_Elapsed(object sender, ElapsedEventArgs e)  
        {  
            _timer.Stop();  
            MessageBox msg = new MessageBox();  
            msg.ShowDialog();  
            _timer.Start();  
        }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:29:47.893

您在`MessageBox`单独的线程上显示，因此它不会显示为主窗口的模式对话框。您需要在主 UI 线程上显示它：

```
 private void _timer_Elapsed(object sender, ElapsedEventArgs e)  
    {  
        _timer.Stop();  
        Application.Current.Dispatcher.Invoke(new Action(
        () => {
            MessageBox msg = new MessageBox();  
            msg.ShowDialog();  
        }));
        _timer.Start();  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:30:44.787

要修复它，只需更改以下内容：

TimerClass1.cs 文件

```
using System;  
using System.Collections.Generic;  
using System.Linq;  
using System.Text;  
//using System.Timers;  
using System.Windows; 
```

然后修复因切换到 Windows.Forms.Timer（您需要的那个）而导致的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:39:13.427

将**父表单**作为参数发送到您的计时器，并显示如下对话框应该可以解决问题：

**MainForm1.cs**文件

```
TimerClass1 timer = new TimerClass1(this); 
```

**TimerClass1.cs**文件

```
..
private Form ParentForm {get; set;}
..
public TimerClass1(Form parentForm)           
{
..
this.ParentForm = parentForm;
..   
}
..
private void _timer_Elapsed(object sender, ElapsedEventArgs e)           
{
..
 msg.ShowDialog(this.ParentForm);
..
} 
.. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T20:27:20.913

您需要某种方法从 TimerClass1 访问 MainForm1。完成此操作后，您可以在 MainForm1 上创建并调用一个方法，该方法将禁用表单本身或表单上的控件。

# php - 不要换行 (\n)

> ID：11960162
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:23:43.547
> 
> 标签：php

```
echo 'kar\nthic'; 
```

我的问题：这就是为什么我没有得到新的线路。我在哪里做错了。我在谷歌试过，但我没有得到正确的答案。输出应如下所示。

```
kar
thic 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T20:24:15.297

您需要使用双引号来换行，因为转义序列**仅**在双引号内解释：

```
echo "kar\nthic"; 
```

从[手册](http://php.net/manual/en/language.types.string.php)：

> 指定字符串的最简单方法是将其括在单引号中（字符 '）。
> 
> 要指定文字单引号，请使用反斜杠 () 对其进行转义。要指定文字反斜杠，请将其加倍 (\)。所有其他反斜杠实例将被视为文字反斜杠：这意味着您可能习惯的其他转义序列，例如 \r 或 \n，将按指定的字面输出而不是具有任何特殊含义。

接着：

> 如果字符串用双引号 (") 括起来，PHP 将为特殊字符解释更多的转义序列。

`"\n"`请注意，浏览器在显示内容时会**忽略**换行符，您需要使用`<br />`在 HTML 输出中放置换行符，或使用以下[`nl2br()`](http://php.net/nl2br)函数：

```
echo nl2br( "kar\nthic"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:24:30.367

尝试：

```
echo "kar<br>\nthic"; 
```

HTML 中不显示换行符。

（编辑包括双引号 - 好点，nickb）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T20:28:18.760

```
echo "kar\nthic";
//or
echo 'kar<br>thic';
//or
echo '<pre>';
echo 'kar\nthic';
echo '</pre>';
// best way
echo nl2br( "kar\nthic"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T14:41:42.120

只是为了提供一些附加信息，`\n`如果您要输出到文本文件，该字符将创建一个新行，如下所示：

```
file_put_contents( "out_file.txt", "kar\nthic"); 
```

# jquery - -moz-transform 停用数据表标题中的排序选择字段

> ID：11960165
> 
> 赞同：5
> 
> 时间：2012-08-14T20:24:02.673
> 
> 标签：jquery, css, firefox, jquery-datatables

我的网页中生成了一个 jQuery 数据表。由于它太大，我曾经`zoom:0.8;`在谷歌浏览器中修复它的大小。

但这并没有为 Firefox 做，所以我添加`-moz-transform: scale(0.8);`到 CSS 表中。在 Chrome 中一切仍然正常，但如果 Firefox 现在正确显示数据表，我似乎无法再更改`sorting`标题中的值。我可以单击查看项目列表，但无法单击它们（没有任何反应）。除了在我的 css 文件中添加一行之外，我没有修改任何其他内容。

我怎样才能解决这个问题？

[jsbin](http://live.datatables.net/etacop/edit#preview)

[jsfiddle](http://jsfiddle.net/Ff7GF)

注意：Bugzilla 中也有一个[类似的已知错误，尽管它在 2008 年被报告，但仍未修复。](https://bugzilla.mozilla.org/show_bug.cgi?id=455170)找到解决这个问题的方法会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:22:08.740

`l`在声明我的数据表的第一个实例时，我从我的`sDom`属性中删除了。

`<table>`然后，我在代码中的标记之前添加了这个：

```
<div class="selectLength">
    <span>Show</span>
    <select id="Length">
        <option value='5'>5</option>
        <option value='10'>10</option>
        <option value='25'>25</option>
        <option value='50'>50</option>
    </select>
    <span>elements in the datatable.</span>
</div> 
```

这是与此相关的javascript（需要[jQuery](http://www.jquery.com)）：

```
$('#Length').change(function() {
    var displayLength = $('#Length option:selected').val();
    var oSettings = $('.adminTable').dataTable().fnSettings();
    oSettings.iDisplayLength = displayLength;
    $('.adminTable').dataTable().fnDraw();
}); 
```

# c# - 升级 NServiceBus 后“找不到程序集”

> ID：11960170
> 
> 赞同：1
> 
> 时间：2012-08-14T20:24:20.483
> 
> 标签：c#, asp.net, nservicebus

对于我们即将发布的版本，我们已从 NServiceBus 3.0.3 升级到 3.2.7。我们在本地或 QA 测试期间没有遇到任何问题，但是在暂存环境中进行测试时，我们无法启动引用 NServiceBus 的 IIS 托管的 Web 服务。

分期机器使用与 QA 相同的软件；视窗 2008R2、IIS7.5

事件日志有两个错误。首先是事件 1026（.NET 运行时）

> 应用程序：w3wp.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：NServiceBus.Unicast.Queuing.FailedToSendMessageException 堆栈：在 NServiceBus.Unicast.Queuing.Msmq.MsmqMessageSender.NServiceBus.Unicast.Queuing.ISendMessages.Send(NServiceBus.Unicast.Transport.TransportMessage, NServiceBus.Address) 在 NServiceBus.Unicast。 UnicastBus.SendSubscribeMessageWithRetries(NServiceBus.Address, NServiceBus.Unicast.Transport.TransportMessage, System.String, Int32) 在 NServiceBus.Unicast.UnicastBus+<> *c_DisplayClass8.b*_7(System.Object) 在 System.Threading.ExecutionContext.runTryCode(System.Object) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 在 System.Threading.ExecutionContext.Run(System.Threading .ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 在 System.Threading.ThreadPoolWorkQueue.Dispatch() 在 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback( )

随后是事件 1326 (ASP.NET 4.0.30319.0)

> 发生未处理的异常，进程终止。
> 
> 应用程序 ID：默认域
> 
> 进程号：10180
> 
> 异常：System.Runtime.Serialization.SerializationException
> 
> 消息：找不到程序集“NServiceBus.Core，版本=3.2.0.0，文化=中性，PublicKeyToken=9fc386479f8a226c”。
> 
> StackTrace：在 System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly() 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name) 在 System.Runtime.Serialization.Formatters.Binary。 System.Runtime.Serialization.Formatters.Binary 的 ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable) ._ *BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped 记录) 在 System.Runtime.Serialization.Formatters.Binary。*_BinaryParser.Run()
> 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage) 在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler , Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage) 在 System.AppDomain.Deserialize(Byte[] blob) 在 System.AppDomain.UnmarshalObject(Byte[] blob)

我检查了 bin 文件夹，它们确实包含正确版本的 NServiceBus.dll 和 NServiceBus.Core.dll（两者都是相同的版本，3.2.7）。

我感觉很困惑，我想我已经检查了明显的事情。会不会是它正在尝试加载多个版本的 NServiceBus（即一些未更新的参考？）。但是，这应该是 QA 中已经存在的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T09:33:04.893

虽然是一个老问题，但我遇到了这个问题，我有一个*解决方法*。

首先[启用融合日志记录](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net)。确保进程可以写入日志文件夹。

接下来，检查进程正在查找的位置。就我而言，它只是在搜索`file:///c:/windows/system32/inetsrv/`，所以我在那里添加了 dll `NServiceBus.Core.DLL`，现在我可以看到真正的问题。

我的猜测是后台线程上发生了未处理的异常（第一个错误），然后将其序列化并传递给主线程，主线程试图反序列化它，但找不到程序集（第二个错误）。第二个错误杀死了应用程序池，意味着我丢失了真正的错误。

此解决方法仅解决第二个错误，而不是原始问题。话虽如此，到目前为止，这足以让我让应用程序再次运行并找到对我来说真正的错误是 MSMQ 内存不足。所以我重新启动了 MSMQ，它已经开始工作了。`NServiceBus.Core.DLL`然后我从新位置删除，该应用程序仍在运行。

记录输出：

```
The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll

=== Pre-bind state information ===
LOG: User = IIS APPPOOL\TenBagsFull
LOG: DisplayName = NServiceBus.Core
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: NServiceBus.Core | Domain ID: 1
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///c:/windows/system32/inetsrv/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = w3wp.exe
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///c:/windows/system32/inetsrv/NServiceBus.Core.DLL.
LOG: Attempting download of new URL file:///c:/windows/system32/inetsrv/NServiceBus.Core/NServiceBus.Core.DLL.
LOG: Attempting download of new URL file:///c:/windows/system32/inetsrv/NServiceBus.Core.EXE.
LOG: Attempting download of new URL file:///c:/windows/system32/inetsrv/NServiceBus.Core/NServiceBus.Core.EXE.
LOG: All probing URLs attempted and failed.
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-26T15:31:53.737

我们今天遇到了这个错误，我们的融合日志输出几乎与上面发布的条目 Iain 相同。我们的解决方法是清除 MSMQ 的事务性死信消息队列并重新启动应用程序池。

1.  转到计算机管理 > 服务和应用程序 > 消息队列 > 系统队列，然后选择事务性死信消息。
2.  右键单击，选择“所有任务”，然后选择“清除”。
3.  重新启动您的应用程序池。

# java - Can Spring's PropertyPlaceholderConfigurer read an entire properties file in code, not as a bean?

> ID：11960172
> 
> 赞同：0
> 
> 时间：2012-08-14T20:24:28.573
> 
> 标签：java, spring

Can Spring's PropertyPlaceholderConfigurer class read an entire properties file and resolve all the placeholders automatically for you? I know that the normal method of doing this is to create a PropertyPlaceholderConfigurer bean and do this when the application context starts up, but I'm in a situation where I need to do it before I start up the context.

I was hoping for a convenience method like

```
// Return filtered properties from user input file
Properties getProperties(FileInputStream myPropertiesFile); 
```

I don't see anything like that in the Spring docs but I can't tell if that's because I'm looking in the wrong place or it doesn't exist.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:13:49.183

Do you simply want to create an instance of the `PropertyPlaceholderConfigurer` give it the location of a load of resource files and then have it create a `Properties` instance containing all properties that it found?

If that is the case there is a `protected` method that you could potentially use.

```
/**
 * Return a merged Properties instance containing both the 
 * loaded properties and properties set on this FactoryBean.
 */
protected Properties mergeProperties() throws IOException 
```

So you could create your own custom `PropertyPlaceholderConfigurer` and then use this method to return all properties. i.e.

```
public class MyPropertyPlaceholderConfigurer extends PropertyPlaceholderConfigurer {

    public Properties getAllProperties() throws IOException {
        return super.mergeProperties();
    }
} 
```

There might be a more efficient way to do this, but I couldn't find one at the moment. If I find anything else will let you know.

# java - 在 OpenGL 中平铺 3D 形状的子纹理

> ID：11960173
> 
> 赞同：0
> 
> 时间：2012-08-14T20:24:29.640
> 
> 标签：java, opengl, 3d, textures, tiling

我有一个纹理，它是一个由较小纹理组成的网格，我无法在此应用程序中将其拆分为单个文件。我需要将这些子纹理平铺在模型上。

分割几何体可能有效，但会增加场景复杂性，并且如果生成细三角形，可能会引入视觉伪影。

在运行时分配从原始纹理复制的新纹理可能会起作用，但会增加纹理内存的使用，并且如果主纹理发生变化（我无法在此应用程序中检测到），则会涉及陈旧数据。

如果真的没有办法直接绑定子纹理以允许 OpenGL 平铺工作，那么下一个最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:06:29.787

如果您需要这样做，正确的方法是使用片段着色器直接平铺您的纹理坐标。

> 这似乎是大材小用，可能会干扰应用程序现有的渲染管道

它会干扰的唯一方法是如果您不使用片段着色器。如果你不是……你应该是。

现代硬件设计通常不再添加固定功能；这一切都是为了给着色器更多的权力和选择。如果您需要某个功能，“在着色器中编码”通常是正确的解决方案。

但是，如果您不允许使用着色器，唯一的选择就是按照您的建议修改您的几何图形。

# ruby-on-rails - 我可以避免重写设计控制器吗？

> ID：11960176
> 
> 赞同：0
> 
> 时间：2012-08-14T20:24:42.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我有一个标准的设计编辑用户表单：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
  <%= f.password_field :password, :autocomplete => "off" %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <p>Current Photo</p>
  <%= image_tag @user.photo.url %>

   <%= f.file_field :photo %>

  <div><%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
  <%= f.password_field :current_password %></div>

  <div><%= f.submit "Update" %></div>
<% end %> 
```

现在，Rails 显然是因为这条线而抱怨：`<%= image_tag @user.photo.url %>`因为在设计控制器的编辑操作中没有@user。通常，我只需将 @user = current_user 放入控制器即可完成。

目标是在用户上传新照片之前向用户展示他们当前的照片是什么。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:30:35.953

如果用户是唯一将使用设计的资源，您可以使用`resource.photo.url`.

如果有一些不同的类将通过设计进行身份验证，但没有照片，您可以使用`resource.respond_to?(:photo)`像这样包含照片和照片字段：

```
<% if resource.respond_to?(:photo) %>
  <p>Current Photo</p>
  <%= image_tag resource.photo.url %>

  <%= f.file_field :photo %>
<% end %> 
```

这样，您仅在类具有照片属性时才包含照片信息

# javascript - 在脚本标签中使用 ID 属性有什么意义？

> ID：11960180
> 
> 赞同：13
> 
> 时间：2012-08-14T20:25:00.630
> 
> 标签：javascript, html, dom

基本上我要问的是给我的脚本标签一个 id 属性有什么意义？由于这种标识，它们内部的例程是否可以被不同地调用或引用？这会导致使脚本/页面表现得有趣的任何问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T20:29:05.020

这`id`只是`<script>`DOM 树中标签的另一个访问器。理论上，您可以使用`document.getElementById()`检索`<script>`节点并将其删除或添加其他属性（尽管我不相信您可以在`src`属性加载到 DOM 后对其进行修改）。但是，这些`id`操作不需要 —— 它也可以被任何 DOM 函数访问`getElementsByTagName("script")`。

如果您确实需要`<script>`使用 DOM 操作来访问标签，这`id`会更容易一些。否则，几乎没有什么好处¹。

* * *

¹这对于向*任何*`id`DOM 节点添加属性来说是正确的，尽管影响呈现的节点也可以从 CSS 中受益，这与标签不同...*`id``<script>`*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T21:10:33.663

正如前面的答案所提到的，一旦脚本标签中的代码运行，它的结果将不会通过替换/删除脚本节点来撤销。

但是如果代码到现在还没有运行，那么 id 会很有用。以下是这样一个脚本标签：

```
<script id="code1" type="text/myjs">.....</script> 
```

由于浏览器不知道这种类型的脚本，它会忽略它的执行，但标签和它的代码仍然在 DOM 中可用。

工作示例：http: [//jsfiddle.net/sv_in/rt9Q2/](http://jsfiddle.net/sv_in/rt9Q2/)

这主要用于客户端模板。一个模板，例如[Mustache.js](https://github.com/janl/mustache.js)，存储在这样的脚本标签中。当需要编译时，使用它的id从tag中获取。这种方法的优点是视图（模板）和模型（包含要在视图中显示的数据的 js 变量）是完全分开的。

除了这种做法，脚本标签的 id 没有通用用途

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:29:45.350

为您的脚本标签提供 id 没有任何意义，页面上的脚本只是按照它们在页面上的顺序执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T20:38:48.437

向脚本元素添加 id 属性有两个特定目的：
1\. 您可以在阅读网页源代码时识别您的脚本；
2\. HTML 参考说您应该能够覆盖可识别元素的内容（但经验告诉我们，很少有浏览器真正做到这一点）。

例如，如果您已经有一个 id="myParticularScript" 的脚本，那么添加一个具有相同 id 的新脚本元素应该替换旧的，加载您在 src 属性中指定的任何新（或相同）源。

虽然我在动态加载 javascripts 方面的经验证明新脚本确实会加载到浏览器中，但我测试过的浏览器都没有设法替换拥有相同 id 的旧元素。

这样就剩下第一个目的：易于识别。在我的工作中，我们使用系统来生成网页，我们并不总是知道哪个脚本（或 css 链接，就此而言）是由哪个组件添加的。我们通过向脚本标签和 css 链接标签添加 id 来解决这个问题 - 我们能够识别并追溯到我们的系统的 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T09:14:12.720

这对于检查服务器中 src url 属性中资源文件的存在可能很有用。对于缓存清除，需要尊重 .js 和 .css 文件的文件名。这将有助于检查服务器中的文件名是否已更改，然后通过代码重新加载

```
$window.location.reload() 
```

代码示例（angularjs）：

```
service.reloadApplication = function () {
    var script = document.getElementsById("scriptAppMin");                  
    if (!!script.getAttribute('src') &&       doesFileExist(script.getAttribute('src')) == false)
                            $window.location.reload();                                                             
    }

 function doesFileExist(fileUrl) {
    var xhr = new XMLHttpRequest();
    xhr.open('HEAD', fileUrl, false);
    xhr.send();
    return !(xhr.status == "404");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T22:26:12.740

没有人提到的一个用途：`id="test"`属性设置`test`指向元素本身的全局变量。看：

[![id 作为全局变量](../Images/d8fee49be9a331b58f8ccf5bdfa08a28.png)](https://i.stack.imgur.com/IOAy2.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-22T20:56:06.573

我发现了一个非常新颖的用途，可以为`script`标签提供 ID。我在我的网站中嵌入[了 tawk.to](https://www.tawk.to/)脚本来显示它的聊天小部件。问题是，当我想打印页面时，小部件并没有隐藏。因此，您会在打印预览的每个页面上看到重复的小部件，通常会遮盖页面内容！

为了解决这个问题，我首先观察了widget是如何添加的。我发现小部件是在脚本标签之后添加的。但是小部件（封装在`div`标签中）没有任何类，它有一个随机生成的 ID，每次都不同。

必须有另一种方法来抓住那个小部件（`div`标签），而不依赖于 JavaScript 技巧。就在那时我了解到 CSS 有一个[“相邻兄弟”](https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_selectors)或“下一个兄弟”选择器，令人惊讶的是，它具有非常好的浏览器支持。

所以首先，**我给了 script 标签的 ID**。

```
<script type="text/javascript" id="tawk-to-script"> 
```

然后我**使用 ID**和下一个兄弟选择器将 CSS 应用到小部件。

```
@media print {
  script#tawk-to-script + div {
    display: none !important;
  }
} 
```

中提琴！问题解决了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-08T13:34:04.537

我`script` `id`在书签中使用了标签；我`script`通过 Javascript 将元素`DOM`添加到`div`; 然后使用它；& 当/如果用户点击`Close`我添加的按钮`div`；我通过 ID 找到这个`script`元素并从 DOM 中删除它以离开我找到的页面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-16T10:00:13.530

当您考虑延迟加载脚本时，它们可能会派上用场。另外，我记得我曾经在脚本标签上使用一个 ID 来促进元内容的更改，每个状态更改（它是一个单页应用程序）。

使用脚本标签上的 ID，您可以检查特定实例上是否存在具有特定 ID 的脚本标签是否存在于 DOM 中。如果它不存在，并且如果您的路线要求它存在，那么您可以加载它（在某些条件下）。

假设有一个脚本需要延迟加载。让我们以一些聊天小部件为例。可能会出现这样的情况，您可能会倾向于仅加载聊天小部件，并且仅在用户碰巧单击聊天按钮时才加载。

在这里，您将懒惰地加载聊天。因此，可能的情况是：“如果用户单击聊天按钮，则将聊天小部件 js 注入 DOM”。

简单的？当然好。但是，考虑一下用户再次单击聊天按钮的情况。会发生什么？将再次注入相同的脚本，但您当然不希望这种情况发生，是吗？

因此，假设聊天小部件 js 通过以下方式进入 DOM：

```
<script id="chatWidgetScript" src="...whatever..."></script> 
```

解决聊天按钮上的“第二次点击”问题的一个很好的解决方案是查看脚本是否已经存在于 DOM 中，如果存在，不要让相同的脚本两次附加到 DOM 中。

因此，您的按钮可能是：

```
<button onclick="loadChatWidget()"> Chat! </button> 
```

您的 loadChatWidget() 函数可能是：

```
loadChatWidget(){
     if(document.getElementById("chatWidgetScript")){
          //chat script is already there in the DOM, no need to load it again.
          return;
     }

     /* 
     if document.getElementById("chatWidgetScript") returns null, this would 
     mean that the chat widget isn't there in the DOM, and you might want to 
     load the same now.
     */

     // LOAD SCRIPT HERE
} 
```

这只是在脚本标签上使用 ID 的一种方式，它也很有用！*

# ios - Xcode 4.2 没有在侧边栏中显示一些支持文件

> ID：11960181
> 
> 赞同：0
> 
> 时间：2012-08-14T20:25:01.680
> 
> 标签：ios, xcode, file, xcode4.2

我遇到了 XCode 和我的支持文件的问题。我试图用较新的版本（相同的文件名）替换几个图像，虽然这些文件绝对可以被我的项目访问（它们在应用程序中使用时显示），但它们在左侧的导航器选项卡中不可见，我也无法在我的文档的项目文件夹中找到它们。当我尝试拖入最新版本时，它说该文件已经存在。有没有办法刷新导航器以显示我的所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:55:16.613

您是否可能将它们错误地放置在另一个文件夹中？您是否尝试在计算机上搜索图像？找到文件后，将图像复制到项目的资源文件夹或您想要的任何位置。首先在您的计算机上执行此操作。然后，将它们拖放到 xcode 中。让我知道它是否有效。

# getscript - 如何用jquery执行外部脚本

> ID：11960182
> 
> 赞同：0
> 
> 时间：2012-08-14T20:25:13.480
> 
> 标签：getscript

我想在页面加载后执行广告脚本。我知道我必须使用这样的东西：

```
$(window).bind("load", function() {
$.getScript('http://anetwork.ir/showad/?adwidth=468&adheight=60&aduser=1341223032', function() {
    // callback function
    alert('external script loaded!');
  });
}); 
```

但它不工作，虽然警报加载。也没有问题

```
$(window).bind("load", function() 
```

问题必须来自 $.getScript 。我还必须补充一点，外部脚本输出如下内容：

```
document.write('<iframe scrolling="no" width="468" height="60" frameborder="0" src="http://anetwork.ir/showad/c.php?adwidth=468&adheight=60&aduser=1341223032"> 
```

');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:39:11.683

只需使用

```
$(window).load(function() {
   // this will be executed when the page has finished loading
} 
```

如果脚本有问题而不是加载函数有问题，请继续阅读。

`$.getScript`是 ajax 调用的快捷方式。[您可以在http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)上的文档中找到更多相关信息。由于[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，无法加载脚本。您必须使用`JSONP`才能从不同的域加载脚本。您可以在这篇[文章](https://stackoverflow.com/questions/3839966/can-anyone-explain-what-jsonp-is-in-layman-terms/3840118#3840118)中找到更多详细信息。

# java - 更改密码 LDAP Java

> ID：11960188
> 
> 赞同：0
> 
> 时间：2012-08-14T20:26:15.350
> 
> 标签：java, ldap, tivoli

我需要制定一种方法来更改 IBM TDS 中的用户密码，我必须比较用户是否提供了正确的用户密码，然后进行更改。我有用户名、旧密码和新密码作为参数。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:29:38.530

使用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/)。

*   BIND 请求将验证现有密码是否正确 - 无需比较密码，如果密码与存储在目录服务器数据库中的密码匹配，则 BIND 请求将返回结果代码为零
*   使用修改操作或密码修改扩展请求来更改密码

### 也可以看看

*   [密码修改扩展请求](http://ff1959.wordpress.com/2011/11/12/ldap-password-modify-extended-request/)

# javafx-2 - JavaFX 原生打包：https 请求抛出“SunTlsRsaPremasterSecret KeyGenerator 不可用”

> ID：11960195
> 
> 赞同：0
> 
> 时间：2012-08-14T20:26:47.877
> 
> 标签：javafx-2

我正在使用 JavaFX 2.2 开发人员预览版（Build 19）的新“本机打包”功能。我可以成功构建安装程序（.exe）。但是，一旦我启动了使用该安装程序部署的 JavaFX 应用程序，我执行的每个 HTTPS 请求都会出现以下异常：

```
javax.net.ssl.SSLKeyException: RSA premaster secret error
    at sun.security.ssl.RSAClientKeyExchange.<init>(RSAClientKeyExchange.java:114)
...
Caused by: java.security.NoSuchAlgorithmException: SunTlsRsaPremasterSecret KeyGenerator not available
    at javax.crypto.KeyGenerator.<init>(KeyGenerator.java:158)
... 
```

当我从 Eclipse 启动我的代码时，或者当我启动应用程序表单命令行时，一切正常。该问题仅在我启动安装程序部署的应用程序时出现。

我怎样才能避免这个异常？

我写了一些演示代码来显示问题。

Java FX 应用程序：

```
package dk.bundleDemo;

import java.net.HttpURLConnection;
import java.net.URL;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;
import org.apache.log4j.Logger;

public class RunBundleTest extends Application {

    private static Logger log = Logger.getLogger(RunBundleTest.class);

    @Override
    public void start(Stage primaryStage) throws Exception {
        AnchorPane root = new AnchorPane();
        Label statusLable = new Label();
        String statusText = "Status is: ";
        root.getChildren().add(statusLable);
        Scene scene = new Scene(root, 200, 200);
        primaryStage.setScene(scene);
        primaryStage.show();

        try {
            URL url = new URL("https://www.google.com");
            HttpURLConnection conn = (HttpURLConnection)url.openConnection();
            Integer responseCode = conn.getResponseCode();
            statusLable.setText(statusText + responseCode.toString());
        }
        catch (Exception e) {
            log.error("error while connecting", e);
        }
    }

    public static void main(String[] args) {
        launch(args);
    }   
} 
```

用于创建安装程序的 Ant 脚本：

```
<project name="JavaFXSample" default="build and deploy" basedir="."
         xmlns:fx="javafx:com.sun.javafx.tools.ant">

    <target name="build and deploy">

        <property name="applet.width" value="500"/>
        <property name="applet.height" value="500"/>
        <property name="application.title" value="BundleTest"/>
        <property name="application.vendor" value="TestVendor"/>
        <property name="build.classes.dir" value=".\bin"/>
        <property name="basedir" value="."/>
        <property name="dist.dir" value="..\..\BundleTest"/>
        <property name="javafx.lib.ant-javafx.jar" value="C:\Program Files\Java\jdk1.7.0_06\lib\ant-javafx.jar"/>

        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
                uri="javafx:com.sun.javafx.tools.ant"
                classpath="${javafx.lib.ant-javafx.jar}"/>

        <fx:application id="bundleTest"
                name="bundleTest"
                mainClass="dk.bundleDemo.RunBundleTest"
                />

        <fx:resources id="appRes">
            <fx:fileset dir="lib" includes="*.jar"/>
        </fx:resources> 

        <fx:jar destfile="lib\RunBundleTest.jar">
            <fx:application refid="bundleTest"/>

            <fx:resources refid="appRes"/>

            <manifest>
                <attribute name="Implementation-Vendor"
                        value="${application.vendor}"/>
                <attribute name="Implementation-Title"
                        value="${application.title}"/>
                <attribute name="Implementation-Version" value="1.0"/>
            </manifest>

            <fileset dir="${build.classes.dir}"/>
        </fx:jar>

        <fx:deploy width="${applet.width}" height="${applet.height}"
                outdir="${basedir}/${dist.dir}" embedJNLP="true"
                outfile="${application.title}"
                nativeBundles="all"
                >

            <fx:application refId="bundleTest"/>

            <fx:resources refid="appRes"/>            

            <fx:info title="${application.title}"
                    vendor="${application.vendor}"/>

        </fx:deploy>

</target>
</project> 
```

有关 JavaFX 原生打包的更多信息： [https ://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx](https://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:46:24.903

问题是 JavaFX 2.2 开发人员预览中的一个错误：http: [//javafx-jira.kenai.com/browse/RT-23889](http://javafx-jira.kenai.com/browse/RT-23889)

# c# - MVC 文本框回发问题

> ID：11960198
> 
> 赞同：0
> 
> 时间：2012-08-14T20:27:13.650
> 
> 标签：c#, asp.net-mvc-3

我有一个文本框，用户可以输入搜索条件。我还有一个复选框来过滤掉记录。我希望他们能够在复选框上进行搜索，而不必在文本框中输入任何内容。每次我将文本框留空并点击搜索时，它都会将焦点返回到文本框并且不会点击控制器。

```
@using (Html.BeginForm("Index", "Ebooks")) {
    <div class="editor-label">
        Enter Author, ISBN, Title or Imprint
    </div>
    <div class="editor-field">
        <p>Enter author, isbn, title or imprint. Use commas to seperate criteria.</p>
        @Html.TextBoxFor(model => model.SearchFor)
        <br />
        @Html.LabelFor(model => model.deniedBook)
        @Html.CheckBoxFor(model => model.deniedBook)
        <input type="submit" value="Search"  />         
    </div>                          
} 
```

模型：

公共类 ItemListViewModel {

```
 public ItemListViewModel() {
        this.Page = 1;
        this.StartPosition = 0;
        this.EndPosition = 0;
        this.TotalResults = 0;
        this.TotalPages = 0;
        this.SearchFor = string.Empty;
        this.deniedBook = false;

    }

    public ItemListViewModel(int count, int pageSize, int page, string searchFor) {
        int startPos = (page == 1) ? 1 : ((page - 1) * pageSize) + 1;
        decimal totalPages = (decimal)count / (decimal)pageSize;

        this.StartPosition = startPos;
        this.EndPosition = ((startPos + pageSize) > count) ? count : (startPos - 1) + pageSize;
        this.TotalResults = count;
        this.Page = page;
        this.TotalPages = (int) Math.Ceiling(totalPages);
        this.SearchFor = searchFor;
    }

    public ItemListViewModel(int count, int pageSize, int page, string searchFor, bool deniedBooks)
    {
        int startPos = (page == 1) ? 1 : ((page - 1) * pageSize) + 1;
        decimal totalPages = (decimal)count / (decimal)pageSize;

        this.StartPosition = startPos;
        this.EndPosition = ((startPos + pageSize) > count) ? count : (startPos - 1) + pageSize;
        this.TotalResults = count;
        this.Page = page;
        this.TotalPages = (int)Math.Ceiling(totalPages);
        this.SearchFor = searchFor;
        this.deniedBook = deniedBooks;
    }

    public int StartPosition { get; set; }
    public int EndPosition { get; set; }
    public int TotalResults { get; set; }
    public int Page { get; set; }
    public int TotalPages { get; set; }
    [Required(ErrorMessage="Please enter a search string before submitting the form.")]
    public string SearchFor { get; set; }
    public IEnumerable<Object> Objects { get; set; }
    public IEnumerable<ObjectImage> ObjectImages { get; set; }
    public bool deniedBook { get; set; }
} 
```

控制器：

[HttpPost] public ActionResult Index(ItemListViewModel model) { if (model == null) throw new ArgumentOutOfRangeException("model", model, "必须提供参数");

```
 // This action will cache the list if needed then pass the model through the querystring to the search Action
        // Using this method to allow for "back button" compatibility and direct links to searches and pages

        model = PrepareResults(model);

        // Make sure we have records to return
        if (model.TotalResults > 0)
        {
            model = LoadResultSet(model);
            return View("Index", model);
        }
        // If we're still here there were no records

        ViewBag.Message = "No eBooks were found that match the search criteria '" + model.SearchFor + "'.";
        return View("Index", model);
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:05:22.243

> 每次我将文本框留空并点击搜索时，它都会将焦点返回到文本框并且不会点击控制器。

`SearchFor`模型需要您的属性：

```
[Required(ErrorMessage="Please enter a search string before submitting the form.")]
public string SearchFor { get; set; } 
```

因此，如果您将其留空，验证失败也就不足为奇了。如果您启用了客户端验证（通过包含`jquery.validate`and`jquery.validate-unobtrusive`脚本），控制器甚至不会被命中，因为验证将发生在客户端上。

如果您不希望需要此属性，则应`Required`从中删除该属性。

# c# - 使用以下语句有什么好处？

> ID：11960202
> 
> 赞同：3
> 
> 时间：2012-08-14T20:27:32.097
> 
> 标签：c#, default

最近，我遇到了以下几行：

```
StringBuilder sb = default(StringBuilder);
sb = new StringBuilder(); 
```

我会简单地写下这样的陈述

```
StringBuilder sb = new StringBuilder(); 
```

使用 default(StringBuilder) 语句有什么好处？

基于所有很好的反馈，我提出了一个新问题。

**编辑：** 你能看到做这样的事情的优点或缺点吗？（它确实编译）

```
var sb = default(StringBuilder); 
```

再次提到，我相信我们正在研究是否存在范围问题，但最大的问题可能是对象未正确初始化。你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:32:06.487

一般来说，什么都没有。没有理由初始化变量，然后在下一行代码中设置它。你的第二个陈述更干净。

拆分声明和赋值的理由很少。这通常仅在涉及范围问题时才需要，例如尝试围绕分配使用异常处理：

```
StringBuilder sb = null;

try
{
    // Using a statement that may throw
    sb = GetAStringBuilder();
}
catch
{
    //...
}

// The compiler will warn about a potentially 
// uninitalized variable here without the default assignment
if (sb != null)  
{
    //... 
```

在这种情况下，您需要将两者分开，因为您在本地范围内进行分配 (the `try`)。

如果不是这种情况，那么最好将它们放在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:32:19.967

没有任何优势；第二个片段更简洁，更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T20:42:36.970

The default keyword is often used with the initialization of generic types, where one cannot be certain whether we are dealing with a value type (initialized e.g. to zero) or a reference type (initialized to null). As per other answers, in the example you provided, there is little purpose either initializing StringBuilder and reassigning it immediately, nor using the default keyword.

In .net 3.5 there is one additional convention which you may come across, viz:

```
var sb = new StringBuilder(); 
```

Here the type of sb is inferred from the RHS of the assignment.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T20:38:37.297

`default`只有当您开发一个使用参数化类型的泛型类时，使用的优势才会出现。有时，不知道该类型是引用类型、值类型还是结构。`default`关键字返回`null`引用类型和数值`0`类型。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)

# oracle11g - 为什么 oracle 包不允许表或视图声明

> ID：11960204
> 
> 赞同：0
> 
> 时间：2012-08-14T20:27:37.050
> 
> 标签：oracle11g, package

在 oracle 包中，我们可以声明函数和过程以对它们进行逻辑分组。现在为什么一个包不允许表和视图，而只允许函数和过程？或者更重要的是，我如何在逻辑上对表和视图进行分组以便更好地理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:26:28.897

因为没有多大意义。使用您的 IDE 的前缀、后缀和功能来查看您喜欢的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:32:39.127

函数和过程都是代码。它们被编译（在您创建它们时或按需）。它们是暂时的，可以丢弃、重新编译。如果您的包具有状态，则每个会话都可以拥有自己的包副本。

表是永久的数据结构。它们没有被编译。您不声明表，而是创建它。把一个放在一个包裹里是没有意义的。

如果您想要一种可视化表之间关系等的方法，您可以尝试 SQL Developer 中的[Data Modeler](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)。

# php - 如何构建一个复杂的 URL/提要，将内部选项包装在括号中？

> ID：11960208
> 
> 赞同：0
> 
> 时间：2012-08-14T20:27:52.003
> 
> 标签：php, url, mochi

我正在尝试构建一个用于连接到 api 的提要生成器。我试图挂钩的 API 以以下格式构建 URL：

```
http://the.apiurl.com/f/query/?q=((((((rating%3A%3E%3D3)%20and%20rev_enabled)%20and%20not%20tags%3Arandomtag)%20and%20languages%3Aen)%20and%20this_enabled)%20and%20that_enabled)%20and%20this_also_enabled&_id=xxxx&limit=100 
```

如您所见，内部提要选项用括号括起来。如果您要拉出其中一个内部选项，您仍然会留下必须用括号括起来的其他选项吗？

是否有一些 PHP 绝地思维技巧可以优雅地实现这一最终结果？或者我是否必须简单地构建一个非常长的 if/else/ifelse 循环？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:04:34.287

好吧，我花了一些时间来解决这个问题。我能想到的最好的如下。基本上，该函数接受一个填充了必要参数的键/值对的数组。它首先遍历参数/s 以找到总计数，然后在前端应用必要的括号。然后它通过一系列循环解析参数并根据需要附加它们。

该解决方案特定于 Mochi Feed API，但如果您稍作调整，它可以以其他方式使用。

```
// Accepts: $params (array) - An array which contains all of the filter options we are trying to account for.
function process_feed($params=null) {

    // Grab our feed's base URL
    $url = 'http://the.apiurl.com/f/query/?q=';

    // The items stored in this array can be set to a boolean value (true or false)
    $bool_queries = array('rev_enabled', 'this_enabled', 'this_also_enabled');

    // The items stored in this array can be set to an integer, string, etc...
    $return_queries = array('languages', 'omit_tags', 'tags', 'category', 'limit');

    // Grab the parameter/filter count
    $size = count($params);

    // We have enough filters to go custom
    if ($size > 1) {

        // Loop through and place the appropriate amount of opening parens
        for ($x = 0; $x < ($size-1); $x++) { $url .= '('; }

        $i = 0;

        foreach ($params as $key=>$value) {

            if ($i < ($size-1)) {

                if (in_array($key, $bool_queries)) {
                    $url .= $key.')%20and%20';
                } else {

                    // special NOT case
                    if ($key == 'omit_tags') {
                        $url .= 'not%20tags%3A'.$value.')%20and%20';
                    } else {
                        $url .= $key.'%3A'.$value.')%20and%20';
                    }
                }

            } else {
                if (in_array($key, $bool_queries)) {
                    $url .= $key;
                } else {
                    // special NOT case
                    if ($key == 'omit_tags') {
                        $url .= 'not%20tags%3A'.$value;
                    } else {
                        $url .= $key.'%3A'.$value;
                    }
                }
            }

            $i++;
        }

    } else if ($size == 1) {

        foreach ($params as $key=>$value) {
            if (in_array($key, $bool_queries)) {
                $url .= $key;
            } else {
                // special NOT case
                if ($key == 'omit_tags') {
                    $url .= 'not%20tags%3A'.$value;
                } else { 
                    $url .= $key.'%3A'.$value;
                }
            }
        }
    }

    if (isset($params['limit'])) {
        $url .= '&partner_id=' . $our_partner_key . '&limit=' . $limit;
    } else {
        $url .= '&partner_id=' . $our_partner_key;
    }

    if(isset($url)) {
        return $url;
    }

    return false;
} 
```

# javascript - 针对单个类功能而不是整个类组

> ID：11960217
> 
> 赞同：1
> 
> 时间：2012-08-14T20:28:54.240
> 
> 标签：javascript, jquery

我有一个脚本，单击时会显示更多信息，再次单击时会隐藏信息。问题是，当单击它时，它会显示和隐藏所有具有相同类名的 div 的信息，而不仅仅是单击的那个。我环顾四周，我认为我需要在其中的某处添加“this”，以便它只影响单击的对象。有人可以解释我做错了什么以及如何达到这种效果吗？

Javascript

```
 <script type="text/javascript"> 
   this$(document).ready(function(){
   $(".toggle").click(function(){
      $(".hiddenDiv").slideToggle("slow");
        });
   });
  </script> 
```

HTML

```
 <span class="toggle" onClick='return false'>
            <h4 class='arrow'>Group Health Insurance</h4>
        </span>

        <div class='hiddenDiv'>
            <p><img src="../images/group.jpg" border="0" alt="Group Insurance" align="left" hspace="5" />Group health insurance coverage is a policy that is purchased by an employer and is offered to eligible employees of the company blah blah blah</p>
        </div>
        <hr />
        <span class="toggle" onClick='return false'>
            <h4 class='arrow'>Insurance</h4>
        </span>

        <div class='hiddenDiv'>
            <p><img src="../images/group.jpg" border="0" alt="Group Insurance" align="left" hspace="5" />More info about other types of insurance blah blah blah</p>
        </div>
        <hr /> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:31:42.587

`this`在点击处理程序中使用关键字。

```
<script type="text/javascript"> 
   $(document).ready(function(){
   $(".toggle").click(function(){
      $(this).slideToggle("slow");
        });
   });
  </script> 
```

这会将点击处理程序应用于该类的所有元素，`.toggle`但仅在导致事件的特定元素上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:34:53.100

只需用这个替换脚本。如果它不起作用，请将 $(this) 替换为 $this。它应该工作。

```
 <script type="text/javascript"> 
       $(document).ready(function(){
            $(".toggle").click(function(){
                 $(this).next().slideToggle("slow");
            });
       });
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:35:41.090

看起来您正在尝试使用`hiddenDiv`该类切换下一个兄弟姐妹的样式。

您可以使用以下方法获取与选择器匹配的元素的下一个兄弟[`.next`](http://api.jquery.com/next/)：

```
$myEl.next('.hiddenDiv'); 
```

由于您正在寻找被点击按钮的下一个兄弟，您可以`this`在点击处理程序中使用来获取该按钮。

```
$(document).ready(function(){
    $(".toggle").click(function(){
        $(this).next(".hiddenDiv").slideToggle("slow");
    });
}); 
```

# php - 选择 .. where ... 或从 2 个表中选择

> ID：11960221
> 
> 赞同：1
> 
> 时间：2012-08-14T20:29:05.397
> 
> 标签：php, mysql

我需要一些帮助，我有这 2 张桌子：

```
table "clients"
+------+-------------+-----------+
   id  |  email      |  otherinfo|
+------+-------------+-----------+
   1   |test@ts.ts   |   .....   |
+------+-------------+-----------+
   2   |test2@.ts.ts |   ....    |
+------+-------------+-----------+

table "comptes"
+------+-------------+---------------+
   id  |  login      |   id_clients  | 
+------+-------------+---------------+
 1     |     test    | 1             |
+------+-------------+---------------+
 1     |     test2   | 2             |
+------+-------------+---------------+
 etc.  |    etc.     |       etc..   |
+------+-------------+---------------+ 
```

在我的网站中，当用户创建帐户时，他会提供两个表的信息。所以我想在添加之前测试数据库中是否存在 LOGIN 或 EMAIL，就像这样

```
'select clients.email,comptes.login    
from clients,comptes     
where clients.email='test2@.ts.ts'
 or comptes.login ='test'; 
```

但是这个查询返回空结果，我厌倦了其他组合但没有给出正确的结果。所以我在这里搞砸了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:33:42.997

您需要使用 JOIN 来告诉 mysql 数据是如何相关的： http: [//dev.mysql.com/doc/refman/5.6/en/join.html](http://dev.mysql.com/doc/refman/5.6/en/join.html)

例如：

```
SELECT clients.email, comptes.login
  FROM clients 
  JOIN comptes ON clients.id = comptest.id_clients
 WHERE clients.email='test2@.ts.ts'
    OR comptes.login ='test'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:34:01.827

您需要明确标识您的 JOIN 字段。逗号分隔的连接语法使用起来真的很糟糕（IMO），并且会产生意想不到的结果。在您的情况下，它试图在两个 id 列上加入两个表。所以试试这个

```
SELECT clients.email, comptes.login
FROM clients INNER JOIN comptes on clients.id = comptes.id_clients
WHERE clients.email='test2@.ts.ts' OR comptes.login = 'test'; 
```

请注意，在这种情况下，您将返回两行，因为您的 WHERE 子句最终将为您提供客户端 ID 1 和 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:39:00.683

您根本不需要加入即可查看它们是否存在。以下查询返回任何匹配记录的 id：

```
select c.id, 'email' as matchtype
from clients c
where c.email = <email>
union all
select c.id, 'login' as matchtype
from comptes c
where c.login = <login> 
```

这会为您提供匹配的 id 并告诉您重复项出现的位置（如果感兴趣的话）。如果您只想使用 0 或 1 标志来指定是否存在重复项，请执行以下操作：

```
select count(*) as numdups
from ((select c.id, 'email' as matchtype
       from clients c
       where c.email = <email>
      )
      union all
      (select c.id, 'login' as matchtype
       from comptes c
       where c.login = <login>
     )
    ) t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T20:34:39.003

```
SELECT cl.email, co.login
FROM clients AS cl
    INNER JOIN comptes AS co ON cl.id = co.id_clients
WHERE cl.email =  'test2@.ts.ts' OR co.login = 'test' 
```

# actionscript-3 - AS3。麦克风录制的持续时间少于原始声音

> ID：11960222
> 
> 赞同：0
> 
> 时间：2012-08-14T20:29:05.873
> 
> 标签：actionscript-3, flash, audio, microphone, recording

在我的 as3 应用程序中，我使用 Microphone 类捕获声音输入。但我遇到了问题。

我录制的持续时间少于原始声音。如果将麦克风设备放在扬声器附近，则很容易重现此问题。

我开始使用 Sound 类播放本地 mp3，并将麦克风样本放入字节数组中。之后，我将带有麦克风样本的字节数组保存到本地文件（原始数据）中，并将该文件加载到 Audacity。我还加载到 Audacity 原始 mp3 文件。

[图片](http://i45.tinypic.com/2a77rpy.png)显示了 Audacity 中显示的两个声波。 ![图片显示了 Audacity 中显示的两个声波。](../Images/7959b34a5aa3e947295a1f0daebc1fde.png)

我希望在 Audacity 中看到两个同步的声波——录音和原始声音。但是我看到录制结束时不同步增加了。最后我看到不同的持续时间。

还有一件事情。我有两台电脑供我测试。如果我以速率 44100 初始化麦克风，则在第一台计算机上会出现此问题，但如果我设置速率 22050 问题则没有。在第二台计算机上完全没有问题 - 既不是 44100 的速率，也不是 22050 的速率。

有人遇到这个问题吗？为什么会出现这种情况？

希望得到您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:23:08.453

这是一件非常困难的事情。有很多变量在起作用 - 麦克风何时开始录音、何时开始播放、何时停止等等。您几乎无法从 AS3 API 中获取显示开始和停止时间的信息。

一般来说，您通常可以指望从您要求播放开始到声音实际从扬声器发出时的延迟大于您开始收听录制样本的延迟。在上面的示例中，您可以看到这一点。问题不在于麦克风录音迟到了，尽管它看起来是这样。相反，问题在于音频播放开始于麦克风之后，因此麦克风在开始时记录了一些相对静音。因此，当您将麦克风录音放回播放轨道时，您会首先看到静音，然后是录制的播放，给人一种麦克风迟到的错误印象。

另一方面，您必须应对从麦克风拾取声音到 SampleDataEvent 与 Flash 中的这些样本一起到达之间的非常大的延迟。当您收到该事件时，您可能会收到很久以前录制的样本 - 甚至可能是半秒或更长时间。这意味着如果您同时停止录制和播放，您将切断麦克风中尚未到达的任何样本，即使它们来自音频播放的实际时间. 您最好的选择是不要在播放的同时关闭麦克风，而是继续检查 SampleDataEvent 处理程序中记录的总字节的长度，以及当它最终与声音文件一样长时（可能加上一个数量考虑到之前讨论的播放延迟），

# windows - 在 Windows 上使用 pahole（来自 dwarves 包）

> ID：11960238
> 
> 赞同：0
> 
> 时间：2012-08-14T20:30:15.987
> 
> 标签：windows, windows-7, elf, dwarf

有没有办法在 Windows 系统上轻松配置/安装 dwarves Linux 软件包/工具？我需要在将在 Windows 系统上运行的自动化脚本中使用 pahole 命令。

我对 Linux 系统不太熟悉，但我能够让 pahole 命令在运行 Ubuntu Linux 的系统上运行。我不确定如何将这个包从 Linux 移植到 Windows。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:28:57.020

在 cygwin 下编译它可能会取得一定程度的成功，但是，自述文件中所述的唯一支持的平台是 Mandriva、Debian 和 Fedora（尽管它们似乎与基于版本的产品完全不同步。）这可能潜在地表示没有其他人尝试过。

我也不确定对侏儒刺伤进行跨平台分析有什么好处。IDA 反汇编程序可能确实为 ELF 和 DWARF 提供了某种支持，所以也许这可以帮助你？

# segue - 详细信息披露指标/prepareForSegue

> ID：11960239
> 
> 赞同：3
> 
> 时间：2012-08-14T20:30:17.803
> 
> 标签：segue

我已经有一段时间没有做过任何 iOS 编程了，所以请原谅我这个简单的问题。我已经搜索过了，也许我只是在想这个。

我有一个名为 ShowStreamDetails 的 segue，将动态原型单元格连接到一个详细视图，该视图显示...所选单元格的详细信息。现在我不知道细节披露按钮会很麻烦。如果我选择单元格，它会正常工作并将对象传递到详细视图。如果我按下详细信息披露指示器，它将转到详细信息视图，然后该视图显示列表中的第一项，而不是单元格中列出的实际项目。所以，这就是我所拥有的。

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:   
(NSIndexPath *)indexPath
{
  [self performSegueWithIdentifier:@"ShowStreamDetails" sender:[self.tableView cellForRowAtIndexPath:indexPath]];
} 
```

和准备继续：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([[segue identifier] isEqualToString:@"ShowStreamDetails"]) 
    {
        StreamsDetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.streams = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
} 
```

如何将其添加到 prepareForSegue: 以便它传递正确的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:15:33.670

我刚刚遇到了这个问题，并设法弄清楚 sender 参数是用于详细披露的 UITableView 单元格。

所以只要做这样的事情：

```
UITableViewCell* cell = (UITableViewCell*)sender;
IndexPath* iPath = [self.tableView indexPathForCell: cell]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T01:14:04.397

@voidref 有正确的想法。

问题是当用户点击详细信息披露按钮时，单元格没有被选中。所以`-indexPathForSelectedRow`返回 nil，对于数组索引，它被视为零。

相反，您想找到其披露按钮触发了 segue 的单元格的索引路径。因此，您的第二个代码块应如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([[segue identifier] isEqualToString:@"ShowStreamDetails"]) 
    {
        StreamsDetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.streams = [self.dataController objectInListAtIndex:[self.tableView indexPathForCell:sender].row];
    }
} 
```

此外，与您的原始问题没有直接关系，但您不需要实施`-tableView:accessoryButtonTappedForRowWithIndexPath:`. 相反，只需在情节提要中将原型单元格的附件类型设置为 Detail Disclosure，然后从原型单元格中的附件按钮控制/双指/右键拖动到详细视图控制器，然后将生成的 segue 命名为“ShowStreamDetails”。

即使附件按钮可以说是“发送者”，`sender`参数也会自动设置为表格视图单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-03T10:53:52.420

斯威夫特版本：

```
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if let shooterController = segue.destination as? UIShooterViewController {
        if let cell = sender as? UITableViewCell, let indexPath = tableView.indexPath(for: cell) {
            let matchShooter = fetchedResultsController.object(at: indexPath)
            shooterController.setEntity(matchShooter.shooter, new: false)
        }
    }
} 
```

发件人包含点击了披露指示符的单元格。

# c++ - 将带有 json 字符串的帖子发送到服务器

> ID：11960245
> 
> 赞同：0
> 
> 时间：2012-08-14T20:30:45.517
> 
> 标签：c++, c, ios5, android-ndk

我想编写可以在 C++ 中运行在 android 和 ios 上的应用程序。我需要与服务器进行很多通信。如何将帖子发送到服务器？有没有像 Java 中的 HttpPost 这样的类？我对 C++ 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:32:56.023

您可以使用[libcURL](http://curl.haxx.se/libcurl/)与 HTTP(s) 服务器进行通信。

**编辑**

我还将推荐[JsonCpp](http://jsoncpp.sourceforge.net/)用于 json 处理，我发现它对于简单的任务来说既简单又有用。

# google-earth-plugin - 用户选择了在 Tour Player 期间显示的 Google 地球叠加层？

> ID：11960249
> 
> 赞同：0
> 
> 时间：2012-08-14T20:30:54.497
> 
> 标签：google-earth-plugin

Google 地球网络插件是否支持允许用户： 1\. 使用复选框选择要显示的多个地图叠加层，然后 2\. 单击链接以开始 Tour Player 游览，在 #1 中选择的所有地图叠加层都是在游览中显示？

我可以做#1，也可以做#2，但我想不出办法让#1 中的选择显示在#2 中。

这是我为这个项目创建的原型网站：http: [//www.ppacg.org/google_earth/tours-4/](http://www.ppacg.org/google_earth/tours-4/)

如果这是可能的，我将不胜感激任何建议。如果这是不可能的，我将非常感激听到这个消息，以便我可以继续采用不同的方法。

谢谢！

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:18:49.350

假设“显示”是指“可见”，那么一切都应该按您的预期工作。

我无法在您的演示站点中加载任何图层，但是例如，如果我加载具有一些地标或叠加层的 KML (data.kml)，然后加载带有 Tour (tour.kml) 的 KML，并且然后我进入游览并开始播放游览，data.kml 中的内容仍然可见。

作为一个示例，您可以通过粘贴另一个示例的一部分（例如加载良好的 KML）来修改[播放游览的游乐场示例。](http://code.google.com/apis/ajax/playground/#playing_tours)您会注意到加载导览时内容不会消失。

关于您的内容是否具有时间属性有一些警告，但这里似乎不太可能出现这种情况。

# objective-c - 分配按钮以在 Cocoa 中搜索计算机文件

> ID：11960252
> 
> 赞同：0
> 
> 时间：2012-08-14T20:30:57.710
> 
> 标签：objective-c, macos, cocoa

您将如何编写一个按钮来在 Mac 上搜索文件，以便用户可以选择一个文件？该程序将要求用户选择要发送到外部设备的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:41:47.717

Sounds like you want to use the `NSOpenPanel` ([reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOpenPanel_Class/Reference/Reference.html)) to allow the user to select a file.

You use it like this:

```
NSOpenPanel *openPanel = [NSOpenPanel openPanel];
// Configure the panel if necessary using openPanel.whatever = something;
NSInteger result = [openPanel runModal];
if (result == NSOKButton)
{
    NSURL *url = openPanel.URL;
    NSAssert(url.isFileURL, @"Expected a file!");
    NSString *filename = url.path;
} 
```

# meteor - 在 Meteor 应用程序中设置 Textarea 值的正确方法是什么？

> ID：11960260
> 
> 赞同：3
> 
> 时间：2012-08-14T20:31:26.907
> 
> 标签：meteor

目前，如果代码包含类似

```
<div>{{some_value}}</div> 
```

完美运行。然而

```
<textarea>{{some_val}}</textarea> 
```

仅当光标不在文本框中时有效

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T00:06:37.080

这是故意的 Meteor 行为。在文档中：

> 手写应用程序中的另一个棘手问题是元素保存。假设用户在一个元素中输入文本，然后包含该元素的页面区域被重绘。用户可能会遇到颠簸，因为焦点、光标位置、部分输入的文本和重音字符输入状态将在重新创建时丢失。
> 
> 这是 Meteor 自动解决的另一个问题。只需确保您的每个可聚焦元素都具有唯一的 id，或者在具有 id 的最近的父级中具有唯一的名称。Meteor 将保留这些元素，即使它们的封闭模板被重新渲染，但仍会更新它们的子元素并复制任何属性更改。

Meteor 不会更新具有焦点的`<input>`or `<textarea>`，因为在许多情况下，如果用户尝试输入某些内容，这会对用户造成很大的干扰（想象一下，当突然被覆盖时，您正在字段中键入一个段落）。但是，这确实意味着用户在与另一个用户“冲突”或其他反应性更改时不会获得更新。如果你想覆盖这个行为，你可能有一个隐藏的`<div>`或一个 js 数据元素，你可以使用它来为你的应用程序进行适当的更新（也许标记有一个新值或简单地覆盖它）。这种碰撞并非易事，可能需要根据情况采取不同的行为。也许未来版本的 Meteor 会为我们提供一些工具来简化处理。有关更多背景信息，请参阅[这个帖子](https://stackoverflow.com/a/12090339/406226)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:15:44.670

`<textarea>{{some_val}}</textarea>`当该领域获得和失去焦点时，对我来说都很好。

我希望你在做，

`Template.mytemplate.some_val = "Whatever you want to write";`

或者

```
Template.mytemplate.some_val = function() {
    var someValue = "Whatever you want to write"; // Can also get from DB
    return someValue;
} 
```

与模板，

```
<template name="mytemplate">
    <textarea>{{some_val}}</textarea>
</template> 
```

# mysql - Heroku grails 应用程序无法连接到 mysql RDS“URI 中的错误方案”

> ID：11960263
> 
> 赞同：2
> 
> 时间：2012-08-14T20:31:40.947
> 
> 标签：mysql, grails, heroku, rds

我想从 java/grails 应用程序连接到 mysql RDS 实例。我收到这种错误：

```
[main] ERROR heroku.HerokuBeanPostprocessor - Problem updating DataSource: wrong scheme in URI: mysql://USER:PASSWORD@q-qa-dev.cctpl5gym4kp.us-east-1.rds.amazonaws.com/qservice_dev
2012-08-14T15:23:33+00:00 app[web.1]: java.lang.IllegalArgumentException: wrong scheme in URI: mysql://USER:PASSWORD@q-qa-dev.cctpl5gym4kp.us-east-1.rds.amazonaws.com/qservice_dev 
```

我可以连接“heroku sql”并毫无问题地向数据库发出请求。

# iphone - 当我在我的 iPhone 项目中添加 facebook sdk 时编译错误

> ID：11960267
> 
> 赞同：0
> 
> 时间：2012-08-14T20:31:52.557
> 
> 标签：iphone, ios, facebook

[我从这个链接https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)下载了 facebook sdk，在这个示例项目中存在一些示例项目，这些 hackbook 完全满足了我的需求，但是当我在我的项目中添加文件并调用此行之后，编译错误来了

`Facebook *ff = [[Facebook alloc] initWithAppId:@"my_app_ID" andDelegate:self]`;

编译器说了一些类似“_sqlite3_open_v2”的东西，引用自“

请帮助我，我只想在 Facebook 上发布状态，请提供任何帮助....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:16:34.830

此错误与 Facebook SDK 无关。我认为您在程序中使用了 sqlite 包装器，并且您没有正确链接它。

如果您使用的是 sqlite 包装器，请确保您链接到 SQLite 库！在 Xcode 中项目窗口的左窗格中，展开 Targets，单击您的目标，然后使用 command-i 获取信息。在“常规”选项卡下，您将看到“链接库”。验证 libsqlite3.0.dylib 是否在此处的列表中，如果没有，请单击“加号”图标并添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:29:49.897

我遇到过同样的问题。请按照此处第 5 步中的说明进行操作：

[https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project)

基本上隐藏在所有这些步骤和文本中的是一些重要信息，您必须遵循这些信息才能正确添加框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:14:31.367

xcode/Build Settings 其他链接标志 -lsqlite3.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T01:20:01.297

这不是 Facebook 错误。这其实和wrapper有关，把两者联系起来有错误。

顺便说一句，我在 Facebook 开发部门的一个小组工作。由于已经收到奇怪的反馈，我们正在寻找对我们的一些新功能（包括时间线）的意见。为什么不花一点时间让我们知道您的想法？您的意见似乎对我们有用。我们期待您的回音！在这里查看：http: [//tinyurl.com/8qj95sa](http://tinyurl.com/8qj95sa)

# iphone - 如何从 AppDelegate 启动设置应用程序？

> ID：11960268
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:31:53.630
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, uiapplication

> **可能重复：**
> [从另一个应用程序打开设置应用程序](https://stackoverflow.com/questions/5655674/opening-the-settings-app-from-another-app)

我打电话给：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=WIFI"]]; 
```

但它没有推出任何东西。我想启动设置应用程序并转到 WI-FI 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:54:22.650

我不相信这是可能的。在早期的 iO​​S 版本中，有一个有效的 url 模式，但 Apple 在 iOS 5 中禁用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:13:01.323

# ios - 有没有办法为 tableView 中的项目分配数字以在数学方程式中使用？

> ID：11960269
> 
> 赞同：1
> 
> 时间：2012-08-14T20:31:56.663
> 
> 标签：ios, math, tableview

我正在制作一个执行大量数学运算的应用程序。我希望用户能够从 tableView 中选择一个活动。然后我有一个方程，需要为用户看不到的每个活动分配一个数字。例如，如果 tableView 有项目 - Running、Jumping、Skipping。假设每个活动都有数字 Running= 5，Jumping = 10，Skipping= 15。然后用户选择一个活动，比如说跑步。然后，该应用程序将提取数字 5 并将其用于等式中，例如 10*（活动）。

有没有办法做到这一点？如果您对这个问题感到困惑，请说些什么，我会尽力澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:35:28.217

您可以使用自定义子类`UITableViewCell`或将信息存储在每个单元格的`tag`属性中（也就是说，如果您没有将其用于其他任何事情）。`didSelectRowAtIndexPath`然后在收到回调时简单地检索此信息。

应该注意的是，将这些信息存储在单元本身中违反了 MVC（模型-视图-控制器）设计模式。虽然这不会对项目的成功造成不利影响，但这样做并不被认为是良好的编码实践。您真的应该尝试将信息存储在您保留在后端的某个数据模型中，然后将其绑定到控制器中的单元格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:41:34.100

你可以通过两种方式做到这一点：

1.  将相应的值设置为单元格的标签。喜欢`cell.tag = 5;`跑步。当用户点击`cell`检索标签并计算时。
2.  编写一个方法，当您传递活动标签时将返回活动值。当您点击一个单元格时，调用一个函数，例如：`int valueAct = [self getActivity:cell.textLabel.text];`这将返回它的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:44:50.447

您不需要在单元格内分配值。请记住，您在单元格中填充了诸如跑步、跳跃和跳跃之类的文本，并且这些数据存储在某个地方。维护每个活动的值以及单元格文本同样容易，也许在字典中。

当用户选择一个活动时，您将获得索引路径。只需查找数据中的值。

如果您每次都添加或更改数据，它们都将在一个地方。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSDictionary *dict = [plistDataArray objectAtIndex:indexPath.row];
  NSLog(@"Points: %@", [dict objectForKey:@"points"]);

} 
```

示例列表

```
<array>
  <dict>
    <key>label</key>
    <string>Running</string>
    <key>points</key>
    <number>10</number>
  </dict>
  <dict>
    <key>label</key>
    <string>Jumping</string>
    <key>points</key>
    <number>5</number>
  </dict>
</array> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T20:35:01.623

使用`tag`单元格的属性。

# machine-learning - 用于 Web 应用程序的 SVM

> ID：11960273
> 
> 赞同：4
> 
> 时间：2012-08-05T12:53:50.363
> 
> 标签：machine-learning

我正在做一个训练文本分类器的项目，我需要创建一个 Web 应用程序来让用户输入文本进行分类。目前所有代码都是用 Python 编写的，我正在使用 scikit-learn 库。为了让我的 Python 代码在服务器上运行，我在 heroku 上安装 scikit-learn 时遇到了问题。我不介意改变一切（Python 语言、Flask web 框架、scikit 学习库、heroku web-app 托管服务），我只需要让这个东西工作:)

你们在 CV 社区中是否有任何人在制作使用在线学习库的网络应用程序方面有任何经验？Web 应用程序托管应该是免费的，因为这个项目不是商业的，而且在幕后有 Python 会非常好。

NB 库应该支持的分类器是多类 svm 和朴素贝叶斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:10:36.910

试试[谷歌应用引擎](https://developers.google.com/appengine/docs/whatisgoogleappengine)怎么样？它有 python（2.5 和 2.7）并且可以是[免费](http://cloud.google.com/pricing/)的。

# magento - Magento 控制器重定向星符号

> ID：11960282
> 
> 赞同：6
> 
> 时间：2012-08-14T20:32:26.127
> 
> 标签：magento

有人可以解释整个 magento 控制器中用于重定向的星斜线符号吗？

核心代码的使用似乎不一致，我找不到任何体面的文档可以解释这种符号的最正确用法。

如果对我的要求有任何疑问。

就是这种重定向方式：

```
$this->_redirect('/');
$this->_redirect('*/*/');
$this->_redirect('*/*'); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T20:42:21.710

从左到右：

*   frontname（与路由器关联）
*   控制器
*   行动

当指定星号时，它将使用上面那些的 -current- 值。

因此，假设您在`adminhtml/catalog/list`页面上，重定向到`*/*/something`将带您到`adminhtml/catalog/something`等:)

# c++ - 无法将带有俄语字符的 wstring 写入文件

> ID：11960286
> 
> 赞同：0
> 
> 时间：2012-08-14T20:32:55.977
> 
> 标签：c++, linux, wstring, wofstream

我正在尝试在 Linux 中使用以下代码中的 C++ 代码编写 wstrings（俄语）：

```
ofstream outWFile;
outWFile.open("input.tab");
outWFile<< WStringToString(w->get_form());
outWFile<<"\t";
outWFile<<WStringToString(w->get_tag());

std::string WStringToString(const std::wstring& s)
{
    std::string temp(s.length(),' ');
    std::copy(s.begin(), s.end(), temp.begin());
    return temp;
} 
```

input.tab 内容无效

我已经尝试执行 stackoverflow 中建议的操作，包括 [无法将 std::wstring 写入 wofstream](https://stackoverflow.com/questions/5104329/unable-to-write-a-stdwstring-into-wofstream) 但是我没有帮助。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:42:42.210

I think you will be better using directly the wstring content.

```
outWfile.write(w->get_tag()->data(), w->get_tag()->size()*sizeof(wchar_t));
// I used data() assuming the string and wstring methods are the same?
// Anyhow, get the pointer to wstring's data here. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:36:04.380

您的转换函数有问题：它最终会弄乱所有代码点为 128/256 或更大的字符（取决于您的语言环境）。

改为使用`wcstombs`（确保使用 UTF-8 语言环境）。

# r - 删除 r 中的异常值

> ID：11960287
> 
> 赞同：1
> 
> 时间：2012-08-03T19:53:10.927
> 
> 标签：r, outliers

我有大量来自 excel 文件（保存为 csv）的数据，其中包含试验（X）和时间（Y）。我知道有一个代码可以通过使用卡方测试代码在试验中取出单个异常值。但是，我希望能够取出数据集中具有异常值的整个列，同时保持文件中的其他数据不变。我很难找到/想出一个允许这样做的代码。有什么建议吗？！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T20:20:46.683

鉴于您对@user603 的回复，我推测您想从数据集中删除整个*X 变量*，即使只有一个观察值在该变量上存在异常值。这在 R 中是微不足道的。使用您的首选策略来识别异常值并将其分配给变量：

```
outs = c(...)
data = data[,-outs] 
```

或者，您可以不将这些变量包含在模型公式中，并保留 data.frame 原样。

* * *

另一方面，我认为这是一个非常糟糕的主意，并且我怀疑一定有一些混乱促使您相信这是您应该做的事情。让我列出一些事情：

1.  将协变量视为具有异常值通常是没有意义的。我们通常认为异常值存在于*响应变量*中。在这种情况下，一种可能性是删除*行*（即`data = data[-outs,]`）。
2.  如果您确实有异常值，则删除观察结果通常是您可能选择的最糟糕的选择。[使用健壮的损失函数](http://www.ats.ucla.edu/stat/r/dae/rreg.htm)会好得多，例如 Tukey 的 bisquare。

# sql - 访问基于计数结果和条件更新的 SQL 更新

> ID：11960289
> 
> 赞同：0
> 
> 时间：2012-08-14T20:33:03.857
> 
> 标签：sql, join, conditional, ms-access-2010

昨天我在这个 SQL 语句上得到了帮助，它工作得非常好......现在我正在尝试使用这个查询中的数据来更新不同表上的两列。

这是我的查询：

```
SELECT x.TechID,
       Count(*) AS cnt,
       tblEmployeeData.LName,
       tblEmployeeData.Pernr,
       tblEmployeeData.Occurrences,
       tblEmployeeData.Standing
FROM   tblEmployeeData
       INNER JOIN tblOccurrence AS x
         ON tblEmployeeData.TechID = x.TechID
WHERE  ( ( ( x.OccurrenceDate ) BETWEEN Dateadd("m", -6, Date()) AND Date() )
         AND ( ( EXISTS (SELECT *
                         FROM   tblOccurrence AS y
                         WHERE  y.TechID = x.TechID
                                AND Dateadd ("d", -1, x.[OccurrenceDate]) = y.[OccurrenceDate]) ) = False ) )
GROUP  BY x.TechID,
          tblEmployeeData.LName,
          tblEmployeeData.Pernr; 
```

我想要做的是获取结果并更新 tblEmployeeData 两列。一列 (tblEmployeeData.Occorrences) 将是由 'cnt' 表示的值......然后是困难的部分...... tblEmployeeData.Standing 列将使用来自 'cnt' 的值进行更新，如下所示：

```
0-3 = "Good"
4-5 = "Verbal Warning"
6-7 = "Written Warning"
8 = "Final Written Warning"
9+ = "Termination" 
```

这已经是一个很大的 SQL 语句了，这超出了我的想象！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:46:03.343

您可以将查询包装在另一个查询中：

```
SELECT TechID, Rank FROM Rank,
(SELECT x.TechID, Count(*) AS cnt, tblEmployeeData.LName, 
    tblEmployeeData.Pernr, tblEmployeeData.Occurrences, tblEmployeeData.Standing
FROM tblEmployeeData
INNER JOIN tblOccurrence AS x ON tblEmployeeData.TechID = x.TechID
WHERE (((x.OccurrenceDate) Between DateAdd("m",-6,Date()) And Date())
  AND ((Exists     
    (SELECT * FROM tblOccurrence AS y  WHERE y.TechID = x.TechID AND DATEADD 
    ("d", -1, x.[OccurrenceDate]) = y.[OccurrenceDate]))=False))
GROUP BY x.TechID, tblEmployeeData.LName, tblEmployeeData.Pernr) a
WHERE a.Cnt BETWEEN Rank.Low And rank.High 
```

这个想法是您将查询与`Rank`表一起使用，如下所示：

```
Low High    Rank
0   3       Good
4   5       Verbal Warning
6   7       Written Warning
8   8       Final Written Warning
9   99      Termination 
```

编辑重新评论

这对我来说是一个粗略的模型

```
SELECT a.TechID, tblRank.Rank FROM tblRank, (SELECT x.TechID, Count(*) AS cnt, tblEmployeeData.LName, 
    tblEmployeeData.Pernr, tblEmployeeData.Occurrences, tblEmployeeData.Standing
FROM tblEmployeeData
INNER JOIN tblOccurrence AS x ON tblEmployeeData.TechID = x.TechID
WHERE (((x.OccurrenceDate) Between DateAdd("m",-6,Date()) And Date()) AND ((Exists     
    (SELECT * FROM tblOccurrence AS y  WHERE y.TechID = x.TechID AND DATEADD 
    ("d", -1, x.[OccurrenceDate]) = y.[OccurrenceDate]))=False))
GROUP BY x.TechID, tblEmployeeData.LName, tblEmployeeData.Pernr, tblEmployeeData.Occurrences, tblEmployeeData.Standing) a
WHERE a.Cnt BETWEEN tblRank.Low And tblrank.High 
```

# javascript - 使用 Three.js 加载模型

> ID：11960291
> 
> 赞同：4
> 
> 时间：2012-08-14T20:33:14.397
> 
> 标签：javascript, three.js

我有一个 3ds 格式的 3d 模型。我将其转换为 obj 格式，然后转换为 js 格式。现在我想将它加载到另一个 js 文件中。这是我的加载代码：

```
var loader = new THREE.JSONLoader();
loader.load( { model: "untitled.js", callback: createScene } );

function createScene( geometry ) {

geometry.materials[0][0].shading = THREE.FlatShading;
geometry.materials[0][0].morphTargets = true;

var material = new THREE.MeshFaceMaterial();

var mesh = new THREE.Mesh( geometry, material );
mesh.scale.set(50, 50, 50);

scene.addObject( mesh );
} 
```

Web 开发者控制台显示错误：TypeError: a.split is not a function Three.js:119

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:00:04.253

应该是这样的：

```
loader.load( "untitled.js", createScene ); 
```

# php - 什么会导致通过 PHP 上传的图像在浏览器中显示，但在 Windows 资源管理器中不显示？

> ID：11960292
> 
> 赞同：1
> 
> 时间：2012-08-14T20:33:17.967
> 
> 标签：php

此 PHP 脚本上传一个图像文件，当图像已上传到目录时，它可以在浏览器中查看，但是当我在 Windows 资源管理器中导航到该图像时，我无法查看它。造成这种情况的原因是什么，为什么图像会以这种方式表现？

```
$valid_formats = array("jpg", "png", "gif", "bmp","jpeg");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
$name = $_FILES['photoimg']['name'];
$size = $_FILES['photoimg']['size'];
if(strlen($name)) {
    list($txt, $ext) = explode(".", $name);
    if(in_array($ext,$valid_formats)) {
        if($size<(1024*1024)) {
            $actual_image_name = time().".".$ext;
            $tmp = $_FILES['photoimg']['tmp_name'];
//This is where the image upload is executed.
            if(move_uploaded_file($tmp, $path.$actual_image_name)) {
                chmod($path.$actual_image_name, 0777);
                    echo "<img src='".$path.$actual_image_name."' class='preview' width='306px'>";
            }
            else {
                echo "failed";
            }
        }
        else {
            echo "Image file size max 1 MB";
        }
    }
    else {
        echo "Invalid file format..";
    }
}
else {
    echo "Please select image..!";
    exit;
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:47:47.310

如果你在 windows 界面中编写 php，那么我认为你不需要 chmod，chmod 仅适用于 Linux 基础。同时帮助自己解决[这个问题](http://www.ibm.com/developerworks/opensource/tutorials/os-php-graphic/section10.html)。

# c# - 在 C# 中使用 WriteFile 与 HID 设备通信时，我的程序停止

> ID：11960293
> 
> 赞同：4
> 
> 时间：2012-08-14T20:33:18.887
> 
> 标签：c#, file-io, usb, pinvoke, hid

在与我的 HID 设备的数据传输会话结束时，我的软件有大约 20% 的机会在函数 WriteFile 上停止。

这是用 C# 编写的，我不知道为什么会这样。每个数据包 20% 的错误率根本无法接受，我很难深入了解它，我想知道这是否与我的声明或数据类型有关？

这是进口

```
[DllImport("kernel32.dll")] 
    static public extern int WriteFile(int hFile, ref byte lpBuffer, int nNumberOfBytesToWrite, ref int lpNumberOfBytesWritten, int lpOverlapped); 
```

这是对正在停止的函数的调用

```
Result = USBSharp.WriteFile(hidHandle, ref outputReportBuffer[0], outputReportBuffer.Length, ref NumberOfBytesWritten, 0); 
```

句柄被确认是有效的，其余的都是不言自明的......

该函数永远不会返回。我已经在几个不同的位置在线查找了这个问题，但几乎没有人的修复适用于我。如果它失败了，我只会线程化它并重新调用它，但是在数百个数据包上做这 20% 的时间简直是……糟糕。

我正在使用 Windows 7、C#、.NET 4.0，并且 HID 设备没有停止它仍然处于活动状态并正在运行 - 不仅如此，整个数据传输都正常进行，并且此调用发生在最后完成事务和然后停止（即使我已经拥有所有数据）。不幸的是，我不能忽略交易的最后一部分，因为这些数据需要 100% 维护，否则用户会发生糟糕、糟糕、糟糕的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:16:47.163

如果问题仍然存在，那么您可以考虑实施超时机制：

```
var stream= new FileStream(hidHandle,FileAccess.Write,false);
var waitEvent= new ManualResetEventSlim();

void Write(byte[] report, int timeout){
    waitEvent.Reset();
    stream.BeginWrite(report,0,report.Lenght,(ar)=>{stream.EndWrite(ar);waitEvent.Set();},null);
    waitEvent.Wait(timeout);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:26:50.113

听起来像是 USB 驱动程序库中的问题。这是您的情况下唯一的唯一变量。（例如，很多人使用带有 USB 驱动器的 WriteFile 没有任何问题）。

我建议您联系 Florian Leitner 寻求支持，或寻找其他连接 USB 设备的方法。Forian 详细说明了它使用[USBSharp](http://www.lvr.com/hidpage.htm)类和[Scott Hanselman 的文章](http://msdn.microsoft.com/coding4fun/someassemblyrequired/isthatyou/default.aspx)，所以也许这些都是很好的替代品。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T16:31:29.350

很难猜出这里出了什么问题，但是，这里有一些重要的检查/尝试：

检查您是否从不安全的上下文中调用 CreateFile **、***WriteFile*。 [阅读有关不安全代码](http://msdn.microsoft.com/en-us/library/chfa2zb8%28v=vs.71%29.aspx)的更多信息 并让这个不安全的上下文使用 unsafe 关键字，如下所示：

 **```
unsafe static void writeMyFile(...){
...
} 
```

还要检查项目属性中的选项（允许不安全代码），如下所示： ![允许不安全的代码](../Images/865de7dbb6bb19b86627137260b781ef.png)

我希望这将有所帮助。**

# forms - 多对多输入表单访问中的重复

> ID：11960295
> 
> 赞同：0
> 
> 时间：2012-08-14T20:33:24.887
> 
> 标签：forms, ms-access, many-to-many, databound

我有三张桌子

```
tblContact - ContactID(Primary Key), Last_Name, First_Name, MailingID,
             Phone, Mail_List
tblAddress - AddressID(primary Key), Address
tblMailingAddress - MailingID(Primary Key),ContactID, AddressID 
```

每个联系人可以有多个地址，并且每个地址可以由另一个联系人共享

当我在 Access 中为联系人创建输入表单时，我想在一个表单中包含他们的姓名和地址，但我担心“Jane Smith”何时与地址已存储在 tblAddress 中的“John Smith”结婚，“Jane Smith”是一个新联系人，但她的地址已经存在，所以我不希望用户能够再次在表中添加地址。

我正在使用绑定表单，所以我担心在将其保存为另一个地址之前，我可能无法在 tblAddress 中搜索该地址。

在我的 frmEditContact 上，我使用 SQL 语句为每个联系人的每个可用地址填充一个组合框，但是在 frmAddContact 添加地址时，它是一个绑定的 txtbox...。

我可以这样进行吗？如何阻止用户再次添加地址？

# f# - FSI 和 F# 中的外部程序启动和输出重定向

> ID：11960297
> 
> 赞同：2
> 
> 时间：2012-08-14T20:33:32.193
> 
> 标签：f#

我有以下代码：

```
let p = new System.Diagnostics.Process();
printfn "installing %A" "installing"
p.StartInfo.FileName <- "powershell.exe";
p.StartInfo.Arguments <- ("/c notepad.exe")
p.StartInfo.RedirectStandardOutput <- true
p.StartInfo.UseShellExecute <- false
p.Start() 
printfn "result ?"
printfn "result %A" (p.StandardOutput.ReadToEnd())
printfn "done" 
```

奇怪的是，它在打印结果之前等待我在 FSI 窗口中按 Enter 键。

这可能是一件小事，但我怎样才能消除这种行为？

我在 MSDN 上找不到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T14:43:30.457

在 VS 中的 F# Interactive 中（突出显示代码并按 Alt+Enter）或使用“fsi Script.fsx”（Visual Studio 2013 / .NET 4.5.1）从 shell 运行它时，我都看不到这种行为。

我确实必须在开关中添加“-executionpolicy remotesigned”以避免异常（即使在普通的 PS shell 中，这已经设置），但如果您没有 PowerShell 配置文件，这可能不会发生在您身上。

我看到的是：

```
(Notepad opens)
installing "installing"
result ?
(I close notepad)
result ""
done 
```

我正在运行以下代码`fsi Script.fsx`。我在 PowerShell 窗口和普通的 CMD 提示符下都试过了。

```
let p = new System.Diagnostics.Process();
printfn "installing %A" "installing"
p.StartInfo.FileName <- "powershell.exe";
p.StartInfo.Arguments <- ("-executionpolicy remotesigned /c notepad.exe")
p.StartInfo.RedirectStandardOutput <- true
p.StartInfo.UseShellExecute <- false
p.Start() 
printfn "result ?"
printfn "result %A" (p.StandardOutput.ReadToEnd())
printfn "done" 
```

# sql - SQL Server 动态计算总和

> ID：11960304
> 
> 赞同：0
> 
> 时间：2012-08-14T20:33:58.423
> 
> 标签：sql, sql-server, sum, union

我正在编写一个查询，该查询创建两个表的联合的聚合，但我需要联合的第二个表来处理一些列（总和），我不确定这样做的确切方法。这不是存储过程的一部分，因此没有变量。详情如下：

```
select t.col1, t.col2, t.col3 FROM (
    select d.col1, d.col2, d.col3 FROM table1 d
    join another_table
      on ...
    join different table
      on ...

    UNION ALL

    select a.col1, a.col2, a.col3 FROM table2 a
        join another_table
          on ...
        join different table
          on ...
    WHERE
       /*datetime restricitons */

) t 
```

所以这就是问题所在：表 a 和表 d 中的 col3 是相同的数据，除了表 b 中它是一个总值，每个新添加的行都是根据前一行计算的。（我无法控制这些表）。

在联合之后，表 a 中的 30 左右额外的行被添加到表 d 中的行的末尾，唯一的问题是表 a 不是累积值，它本身就是每行。

理想情况下，在联合期间，我想取表 d 的 col3 值中的最后一行，然后从表 a 添加的第一行将是表 d 的 col3 中的 val +/- 表 a 的 col3 中的值。

我希望我对此进行了充分的解释，我知道有办法做到这一点，我只是不确定如何应用它。

以下是两个物理表的示例，以及输出聚合的外观和应该是什么样的：

表d： ![工会的第一张桌子](../Images/180c10778940109f22d3b5b8cdd846ef.png)

表一：

![联合中的第二张桌子](../Images/1fcc2ea8c21ef1942a5fc401cc2dcb70.png)

输出表：REDISH 行来自表 d，而 BLUE 来自表 a。

![最终输出（聚合）](../Images/4ead9a7fab47518916e9afa1cccebce7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:01:08.837

好的，我有点好奇你真正想要什么样的输出，因为即使蓝色的东西是正确的，我也无法想象你给出的示例结果的用途，所以我想建议一种方法来获得纠正蓝色的东西，让你决定是否要包括红色的东西。

我们需要识别表 A 中的列，除了 col3 不是 col3 但实际上是 col3 的总和，用于标识表 D 中数据类型的任何列，我假设它是列 TYPE。由于此运行总计需要包含先前的数据而不是后续数据，因此我们还需要某种日期时间或序列列，因此我将此列称为 DATE

```
select alias_a.ID, alias_a.TYPE, alias_a.DATE, sum(b.VALUE) as Accum
from a alias_a join (
    select TYPE, col3 as VALUE from a where DATE <= alias_a.DATE
    ) b ON alias_a.TYPE = b.TYPE 
```

现在可以将此数据与表 D 连接以获取数据：

```
select d.TYPE, ..., x.ID, x.DATE, (d.col3 + x.Accum) as RUNNING_TOTAL
from d join (
    select alias_a.ID, alias_a.TYPE, alias_a.DATE, sum(b.VALUE) as Accum
    from a alias_a join (
        select TYPE, col3 as VALUE from a where DATE <= alias_a.DATE
        ) b ON alias_a.TYPE = b.TYPE
) x on d.TYPE = x.TYPE 
order by d.TYPE, x.DATE 
```

这有帮助吗？

# java-me - 在 Lwuit J2ME 中的容器内滚动图像和文本区域

> ID：11960308
> 
> 赞同：0
> 
> 时间：2012-08-14T20:34:12.323
> 
> 标签：java-me, scroll, textarea, containers, lwuit

我想将带有文本区域（Y 轴）的图像放在框布局容器中，如果用户按下向下按钮向下滚动，我希望容器作为一个对象滚动，因此图像在滚动时上升并且用户滚动文本区域内容的其余部分。我知道如何将图像和文本区域添加到容器中，但我不知道如何做其余的事情。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:31:54.677

为此，您必须执行以下步骤。

1.  将表单的可滚动属性设置为 false。
2.  将容器的 scrollableY 属性设置为 true。
3.  将表单的布局设置为 BorderLayout。
4.  将容器添加到 BorderLayout.CENTER 中的窗体。

# amazon-s3 - 为上传和 Refinery CMS 设置 Amazon S3

> ID：11960309
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:34:13.070
> 
> 标签：amazon-s3, refinerycms

我需要有关使用 S3 Amazon 服务设置 Refinery cms 以进行 Web 上传的帮助。我已经复制了 config/application.rb 这段代码：

```
module My-Site
class Application < Rails::Application
  ...
      ENV['S3_KEY']='key-i-got-from-amazon'
      ENV['S3_SECRET']='secret-key-i-got-from-amazon'
      ENV['S3_BUCKET']='My-Site_production'
   end
end 
```

（另外，我不是来自美国，所以我不知道如何设置 S3_REGION 变量。有地区列表吗？）

好的 - 然后我将它全部添加到 GIT，然后我执行了：git push heroku master。

而且我认为一切都会很好，但是当我尝试制作新的博客文章并上传图片时 - 在图片上传窗口上我得到：“我们很抱歉，但出了点问题”。

谁能帮我解决这个问题？我将非常感激，这已经困扰我好几天了。

提前致谢，

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:29:59.163

要设置您应该使用的区域：ENV['S3_REGION']='region-name'，但我认为这不会解决您的问题。

要查看区域名称，请浏览您在 S3 上的任何资产并查看其属性，您将看到链接 url。

# mobile - 当前移动浏览器的最大宽度是多少？

> ID：11960316
> 
> 赞同：0
> 
> 时间：2012-08-14T20:34:30.697
> 
> 标签：mobile, width, detection

我正在使用来自[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)的脚本来检测是否正在移动浏览器上查看网站。

如果网站在移动浏览器上，我会展示一个精简的简单幻灯片。如果它是一个普通的浏览器，我会展示一个非常棒的超级幻灯片。我想优化我的图像，使它们在移动幻灯片上尽可能小。我的移动幻灯片是响应式的，所以它会缩小以适应任何窗口，但我不想让它最初变得比它绝对必须的大。

**有谁知道当前移动浏览器阵列的最大宽度是多少？[或者更确切地说，使用http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)脚本检测到的移动设备的最大宽度？**

*顺便说一句，我不是要在浏览器中加载页面后如何检测宽度。*

谢谢！！

*编辑....*

我想你们误解了我的问题。我正在使用最大宽度：100%。我的图像可以缩放以适应任何屏幕尺寸。而且，我确定是显示简单的幻灯片还是复杂的。这是我的逻辑：

```
If the user is using a mobile device (based on the device detector)
    show a simple slideshow
Else the use is NOT using a mobile device (based on the device detector)
   If this is a small screen (based on media queries)
       show a simple slideshow
   Else this is a large screen (based on media queries)
       show a complex slideshow
   End If (based on media queries)
End If (based on the device detector) 
```

为什么还要费心使用移动检测呢？因为即使对于小屏幕，我只在小屏幕上显示简单的、低文件大小的幻灯片，来自复杂、图像重、高文件大小的幻灯片的图像仍然被下载 (http://cloudfour.com/examples/mediaqueries /图像测试/）。我的媒体查询确定要显示哪个幻灯片不会使用户不必下载当前未显示的幻灯片图像。之所以使用它，是因为简单的幻灯片在小屏幕上看起来比复杂的要好。使用移动检测屏幕可确保不会下载未显示的图像。

当我的图像设置为 100% 宽度并且会缩小以适应任何尺寸时，为什么我要关心当前移动设备上的最大宽度是多少？因为 900 像素宽的图像比 600 像素宽的图像具有更大的文件大小。如果我知道图像需要的最大宽度是多少，我可以将幻灯片保存到最初的那个大小，从而节省一些额外的带宽。你们有没有在移动设备上观看过幻灯片？减缓！

如果有人能指出我正确的统计数据，我将不胜感激。我用谷歌搜索，但找不到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:50:58.787

部署软件后，答案几乎肯定会改变。

它还取决于您是指像素还是屏幕分辨率像素（Retina 显示器对它们的定义不同）。

也许最好坚持检测移动浏览器（如果您不喜欢正在使用的脚本，请参阅，例如： [Detecting mobile browsers on the web?](https://stackoverflow.com/questions/3632165/detecting-mobile-browsers-on-the-web?rq=1)），然后让用户选择使用更高分辨率的图像。

或者，您可以尝试检测*带宽*，这确实是您正在优化的目标；“移动”只是对此的一个代理，并且与它只有适度的相关性。

# javascript - 如何使用 jQuery Mobile 手动触发页面创建？

> ID：11960317
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:34:33.550
> 
> 标签：javascript, jquery, mobile, jquery-mobile, mobile-website

我正在使用一个 MVC js lib (emberjs)，它将动态创建和更改页面（视图）。如何使用 jQuery Mobile 手动触发页面创建？

这是我的 jsFiddle - [http://jsfiddle.net/mattkime/Aczye/3/](http://jsfiddle.net/mattkime/Aczye/3/)

创建一个带有页眉和页脚的 jQuery Mobile 页面。在 1 秒的 setTimeout 之后，该页面从 DOM 中移除并插入新内容但无法显示。你会看到我失败的代码。

（注意，路由已关闭，因为它由 ember 处理）

如何让新标记显示为 jQuery Mobile 增强页面？

代码：

```
/** disables jQM routing **/
$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
});

// removes hidden pages
$('div[data-role="page"]').live('pagehide', function (event, ui) {
    $(event.currentTarget).remove();
});

var pageTwo = '<div id="pageTwo" data-role="page"><div data-role="header"><h1>header2</h1></div> <div data-role="content">...</div><div data-role="footer" data-position="fixed"><h1>footer2</h1></div></div>';

setTimeout(function(){
    $('#pageOne').remove();
    $('body').append(pageTwo);
    $('#pageTwo').page();
    //alert($('#pageTwo').length);
    //$.mobile.changePage($('#pageTwo'));
},1000); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:40:49.073

Don't remove page 1, otherwise it won't be possible to transition from it to page 2.

[http://jsfiddle.net/Aczye/4/](http://jsfiddle.net/Aczye/4/)

```
/** disables jQM routing **/
$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
});

// removes hidden pages
$(document).delegate('div[data-role="page"]', 'pagehide', function (event, ui) {
    $(event.currentTarget).remove();
});

var pageTwo = '<div id="pageTwo" data-role="page"><div data-role="header"><h1>header2</h1></div> <div data-role="content">...</div><div data-role="footer" data-position="fixed"><h1>footer2</h1></div></div>';

setTimeout(function(){
    //$('#pageOne').remove();
    $('body').append(pageTwo);
    $.mobile.changePage("#pageTwo");
    //alert($('#pageTwo').length);
    //$.mobile.changePage($('#pageTwo'));
},1000); 
```

Edit: updated to using `.delegate` for futureproofing. left `.bind` due some jQuery mobile versions still requiring older versions of jquery.

# sas - 将部分文本文件导入 SAS

> ID：11960318
> 
> 赞同：0
> 
> 时间：2012-04-24T20:47:08.510
> 
> 标签：sas

我有一个文本文件，它是一个包含我需要的表格的出版物，但还有一堆我不需要的其他东西，包括文本段落。我如何能够将我需要的表提取到 sas 数据集中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:13:02.160

您可以将文本文件中的每一行作为一个非常大的字符 var 输入。使用 PRXMATCH，您可以使用正则表达式测试此行。根据文本文件的构成，您可以根据 Regex 匹配有条件地控制数据集的创建。

# android - 如何在 Android 上保护数据库（加密）密码？

> ID：11960326
> 
> 赞同：2
> 
> 时间：2012-08-14T20:34:53.293
> 
> 标签：android, database, security, password-protection

我有一个数据库，其中包含只能由我的应用程序访问的私人信息。我在资产文件夹中添加了我的数据库文件，该文件夹在应用程序第一次运行时被复制到应用程序数据库目录，但是任何其他应用程序都可以访问“资产”目录和“数据”目录（在根设备上）所以我决定加密数据库。Android 默认 SQLite 数据库不提供数据加密，所以我决定使用 SQLCipher for android [http://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)。

现在我已经成功地加密了数据库，我可以使用特定的密码访问它。但问题仍然存在......我应该在哪里存储这个密码？以便它只能由我的应用程序访问。

1.  无法对其进行硬编码，因为即使它被混淆，反编译后也可以访问它。
2.  也不能将其存储在文件系统中（资产/原始）
3.  不能要求用户输入，因为用户可能是黑客

它是独立的应用程序，完全没有服务器交互

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T20:40:02.180

`Can't ask the user to enter it as the user could be a hacker`那么您将无法安全地存储它。由于您已经确定的相同原因，特别是您的代码可以被反编译，您存储它的任何可访问的位置都可以通过反编译找出并因此由具有正确访问权限的任何代码检索。

用户提供的东西存储在用户存储它的任何地方——大概在他或她的脑海中。这不是软件可以访问的东西，因此非常适合降低恶意软件攻击的风险。如果输入的密码有效，您无法知道用户是否被授权，但是您可以定义策略，例如最小密钥长度、最大输入尝试次数（在引入一些延迟或其他锁定之前）等.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T01:30:30.407

我不确定这个答案有多准确，但仍然发布它，因为我想从 Android 极客那里得到一些回应

考虑到 C 代码难以反编译，我使用 Android NDK 编写了一个简单的原生 C 库（.so），其中包含生成密码的算法。仅当应用程序由我的证书签名时才会执行该算法。如果有人在任何其他应用程序中重新使用此库，它不会返回密码，因为证书不匹配。我从这篇文章中得到了这个想法：http: [//digital-identity.dk/2010/12/protecting-ip-in-android-applications/](http://digital-identity.dk/2010/12/protecting-ip-in-android-applications/)

这就是我获得证书的方式：

```
void Java_dk_digitalidetity_android_SomeClass_SomeMethod(JNIEnv* env, jobject obj) {
   // this.getPackageManager()
    jclass cls = (*env)->GetObjectClass(env, obj);
    jmethodID mid = (*env)->GetMethodID(env, cls, "getPackageManager", "()Landroid/content/pm/PackageManager;");
   jobject packageManager = (*env)->CallObjectMethod(env, obj, mid);

  // this.getPackageName()
   mid = (*env)->GetMethodID(env, cls, "getPackageName", "()Ljava/lang/String;");
   jstring packageName = (jstring) (*env)->CallObjectMethod(env, obj, mid);

  // packageManager->getPackageInfo(packageName, GET_SIGNATURES);
   cls = (*env)->GetObjectClass(env, packageManager);
   mid = (*env)->GetMethodID(env, cls, "getPackageInfo", "(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;");
   jint flags = GET_SIGNATURES;
   jobject packageInfo = (*env)->CallObjectMethod(env, packageManager, mid, packageName, flags);

  // packageInfo->signatures
   cls = (*env)->GetObjectClass(env, packageInfo);
   jfieldID fid = (*env)->GetFieldID(env, cls, "signatures", "[Landroid/content/pm/Signature;");
   jobject signatures = (*env)->GetObjectField(env, packageInfo, fid);

 // signatures[0]
   jobject signature = (*env)->GetObjectArrayElement(env, signatures, 0);

 // signature->toByteArray()
   cls = (*env)->GetObjectClass(env, signature);
   mid = (*env)->GetMethodID(env, cls, "toByteArray", "()[B");
   jbytearray certificate = (*env)->CallObjectMethod(env, signature, mid);
} 
```

# enums - (playframework 2.0.2-java) EBean - 使用枚举值查询时没有 ScalarType 注册错误

> ID：11960329
> 
> 赞同：1
> 
> 时间：2012-08-14T20:35:03.147
> 
> 标签：enums, playframework, playframework-2.0, ebean

我有角色实体类：

```
@Entity
public class Role extends Model {

    @Id
    @Constraints.Required
    public Integer id;

    @Constraints.Required
    @Formats.NonEmpty
    @Enumerated(EnumType.STRING)
    public RoleNameEnum name; // name is enum value
} 
```

在一些测试中，我尝试按角色查找用户：

```
List<User> users = User.findByRole(Role.findByRoleName(RoleNameEnum.ADMIN)); 
```

其中方法`findByRoleName()`如下：

```
public static List<User> findByRole(Role role) {
    return find.where().eq("role", role).findList();
} 
```

我收到错误：

```
[error] Test UserTest.findUsersByRole failed: No ScalarType registered for class models.Role
[error]     at com.avaje.ebeaninternal.server.persist.Binder.bindObject(Binder.java:183)
[error]     at com.avaje.ebeaninternal.server.query.CQueryPredicates.bind(CQueryPredicates.java:162)
[error]     at com.avaje.ebeaninternal.server.query.CQuery.prepareBindExecuteQuery(CQuery.java:413)
[error]     at com.avaje.ebeaninternal.server.query.CQueryEngine.findMany(CQueryEngine.java:198)
[error]     at com.avaje.ebeaninternal.server.query.DefaultOrmQueryEngine.findMany(DefaultOrmQueryEngine.java:104)
[error]     at com.avaje.ebeaninternal.server.core.OrmQueryRequest.findList(OrmQueryRequest.java:344)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServer.findList(DefaultServer.java:1469)
[error]     at com.avaje.ebeaninternal.server.querydefn.DefaultOrmQuery.findList(DefaultOrmQuery.java:906)
[error]     at com.avaje.ebeaninternal.util.DefaultExpressionList.findList(DefaultExpressionList.java:201)
[error]     at models.User.findByRole(User.java:63)
[error]     at UserTest$4.run(UserTest.java:62)
[error]     at play.test.Helpers.running(Helpers.java:294)
[error]     at UserTest.findUsersByRole(UserTest.java:58) 
```

有人知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:37:16.837

最快的解决方案，假设您映射 EnumValue 与枚举名称完全相同：

```
public enum RoleNameEnum {
    @EnumValue("REGULAR")
    REGULAR,
    @EnumValue("ADMIN")
    ADMIN
} 
```

然后你可以实现 findByRole 方法如下：

```
public static List<User> findByRole(Role role) {
    return find.where().eq("role", role.name()).findList();
} 
```

其中魔术只是使用映射的字符串值而不是角色名称的枚举实例。

我在 ebean 问题跟踪器上发布了一个错误：[http](http://www.avaje.org/bugdetail-427.html) ://www.avaje.org/bugdetail-427.html，binder应该检测枚举对象并将其自动解释为它的映射值。

编辑：

如果您需要除了简单枚举值之外的其他映射，这里是使用 @EnumValue 注释获取值集的实用程序代码

```
public static <T extends Enum<T>> String serialize(T theEnum) {
    try {
        for (Field f : theEnum.getDeclaringClass().getDeclaredFields()) {
            if (theEnum.equals(f.get(theEnum))) {
                EnumValue enumValue = f.getAnnotation(EnumValue.class);
                if (enumValue != null)
                    return enumValue.value();
            }
        }
    } catch (Exception e) {
    }
    return null;
} 
```

然后你可以使用 serialize 方法实现 findByRole

```
public static List<User> findByRole(Role role) {
    return find.where().eq("role", serialize(role)).findList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T07:05:03.570

看起来问题是您有一个角色列表，而不是您的用户的单个属性。

```
@Constraints.Required
@ManyToMany
public List<Role> roles = new ArrayList<Role>(); 
```

要查询该列表，请尝试：

```
public static List<User> findByRole(Role role) {
    return find.where().in("roles", role).findList();
} 
```

# oracle - Oracle API：什么 API 用于 oracle iExpense 应用程序

> ID：11960330
> 
> 赞同：0
> 
> 时间：2012-08-14T20:35:14.183
> 
> 标签：oracle

在创建费用报告时，我试图找出 iExpense 应用程序使用了哪些 API。我试着在网上寻找这些，但没有运气。我希望在我的移动应用程序中使用这些 API。

任何人都可以建议找出相同的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:47:48.810

Oracle iExpense 是整个 Oracle 应用产品套件（即 ERP）的一部分。我认为除了在使用 iExpense 的 Oracle Apps 的现有许可安装上之外，您不会在任何地方找到 iExpense API。即使你找到了，你最终还是会用 iExpense 中的基本 API 驱动的逻辑编写自己的 API。

# wcf - 从代码配置 WCF 和 StructureMap ServiceHostFactory

> ID：11960331
> 
> 赞同：2
> 
> 时间：2012-08-14T20:35:25.223
> 
> 标签：wcf, structuremap

我正在创建一个自定义 ServiceHost 对象并从代码中对其进行配置。我的服务正在使用 InstanceContextMode.Single 和 ConcurrencyMode.Multiple 并托管在 Windows 服务中。

正如许多博客/文章[（此处）](http://lostechies.com/jimmybogard/2008/07/30/integrating-structuremap-with-wcf/)所述，跨实例共享 StructureMap 容器需要使用自定义的 InstanceProvider、ServiceBehavior 和 ServiceHostFactory。

我的初始化代码如下所示。我不使用配置文件。

```
var baseAddress = ConfigurationManager.AppSettings["BaseAddress"];
var port = Int32.Parse(ConfigurationManager.AppSettings["Port"]);

Host = new MyServiceHost(typeof(MediaFileServicePrivate), new Uri(string.Format(baseAddress, port)));

var binding = new NetTcpBinding();
Host.AddServiceEndpoint(typeof(IMediaFileServicePrivate), binding, string.Format(baseAddress, port)); 
```

如何告诉服务使用我的自定义服务主机工厂？我能找到的所有示例都从配置文件中配置它。

ServiceHostFactory 是否仅用于 IIS/WAS 托管方案？如果是这样，我如何将 SM 用于自托管的 InstanceContextMode.Single 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:38:46.707

这个问题没有回答吗？基本上你告诉它在 wcf 标记中使用你的 servicefactory

`<%@ ServiceHost Language="C#" Debug="true" Service="WcfWithDI.Service1" CodeBehind="Service1.svc.cs" Factory="WcfWithDI.MyServiceFactory"%>`

我在这里有一个示例项目，全部与自定义提供程序（和结构图） [https://github.com/billCreativeD/WCF_With_DI](https://github.com/billCreativeD/WCF_With_DI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:12:53.623

不幸的是，说“服务使用工厂”是没有意义的。您将使用 Ninject 工厂来创建您的服务：

```
var factory = new NinjectServiceHostFactory();

var address = new Uri(_baseAddress, path);
ServiceHostBase host = factory.CreateServiceHost(typeName, new[] {address});

var binding = new NetTcpBinding();
host.AddServiceEndpoint(typeof(TheType), binding, string.Format(baseAddress, port)); 
```

.svc 文件中的指令用于告诉 .NET 如何实例化您的服务。

# php - 是否可以用整数表示字符？

> ID：11960336
> 
> 赞同：0
> 
> 时间：2012-08-14T20:35:41.700
> 
> 标签：php, mysql

```
$rowgp="select name,m3,dpsd,phc,jtk from 2sem3 where rno='$rno'";
$resultrow=mysql_query($rowgp);

while($row=mysql_fetch_array($resultrow)){
   echo  $row['m3'] ." ". $row['oops'];
   $one = $row['m3'];
   $two = $row['oops']
} 
```

在上面的代码中，变量`$one`包含从 a 到 d 的字符（这些是字段中存在的字符`m3`）。如果 char 为 'a'，则应为 1；如果 'b' 则为 2（c=3，d=4，依此类推）。如果不使用 if 或 switch 语句，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T20:38:42.337

```
$chars = range('a', 'z');
$nums = array_flip($chars);
echo $nums[$one] + 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:41:27.420

可以使用[ord()](http://php.net/manual/en/function.ord.php)

```
echo (ord($row['m3']) - ord('a') + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:38:49.123

```
$lookup = array('a'=>1, 'b'=>2, 'c'=>3, 'd'=>4);

$rowgp="select name,m3,dpsd,phc,jtk from 2sem3 where rno='$rno'";
$resultrow=mysql_query($rowgp);
while($row=mysql_fetch_array($resultrow)){
echo  $row['m3'] ." ". $row['oops'];
$one = $lookup[$row['m3']];
$two = $row['oops']
} 
```

# google-apps-script - ScriptDb 中的 id 有多独特（来自 getId()）？

> ID：11960348
> 
> 赞同：1
> 
> 时间：2012-08-14T20:36:49.963
> 
> 标签：google-apps-script

显然，该 id 在脚本实例中是唯一的，但该 id 在用户的所有脚本中是唯一的吗？对于域（对于 Google Apps）？还是它在整个宇宙中都是独一无二的（即谷歌）？

如果数据在应用程序之间共享，id 可以是唯一的参考号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:31:30.413

谷歌已经确认它只是该脚本独有的：

[Apps 脚本办公时间问题](https://developers.google.com/live/shows/ahNzfmdvb2dsZS1kZXZlbG9wZXJzcg4LEgVFdmVudBjKhd8CDA/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:43:11.930

ScriptDB ID 对于预定义脚本的存储数据是唯一的。其余的是未定义的行为，依赖它不是很可靠。在非危急情况下是可能的，但**我不建议**根据

*   当前时间。`var now = new Date();`
*   当前应用程序 ID。主要是存在，但不是 100% 的情况。`var id = UiApp.getActiveApplication().getId();`
*   当前用户 ID。`var user = Session.getActiveUser().getUserLoginId();`
*   几个随机数。`Math.random();`

要获取 ID，需要将所有内容连接到字符串中，计算字符串摘要并使用 Base64 对结果进行编码。但这个解决方案并不是真正的随机值，最好让 Google 创建一个生成真正唯一 UUID 的函数。

代码是

```
function getUniqueId() {
  var now = new Date();
  var id = UiApp.getActiveApplication().getId();
  var randStr = '';
  for (var i = 0; i < 10; i++) {
    randStr += Math.random();
  }
  var user = Session.getActiveUser().getUserLoginId();
  var str = '' + now + id + randStr + user;
  var digets = Utilities.computeDigest(Utilities.DigestAlgorithm.SHA_256, str);
  var res = Utilities.base64Encode(digets);
  res = res.substr(0, res.length - 2);
  return res;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T02:04:37.470

**根据OP的回答/兆字节的评论进行编辑**

您似乎只能依赖 ID 在当前 ScriptDb 数据库中是唯一的。存储数据库对象时，[文档](https://developers.google.com/apps-script/scriptdb)说它被分配了一个“不透明的、不可变的字符串值”，并且它是一个[“唯一标识符”](https://developers.google.com/apps-script/class_scriptdbmap#getId)。

这是一个很好的问题，即该 ID 在整个域中是唯一的，还是在所有事物中都是唯一的*（编辑 - 似乎我们不能依赖任何一种情况）*。

# r - ggplot、构面和系列中的颜色变化

> ID：11960352
> 
> 赞同：0
> 
> 时间：2012-08-14T20:37:27.343
> 
> 标签：r, ggplot2, reshape2

我的传感器数据如下所示：

```
tm <- seq(1,17)
chg <-    c(13.6,13.7,13.8,13.9,14.1,14.2,14.4,14.6,14.7,14.9,14.9,15.0,15.0,13.7,13.7,13.6,13.7)
batt_A <- c(   1,   1,   1,   1,   1,   1,   1,   1,   1,   2,   2,   2,   2,   3,   3,   0,   0)
batt_B <- c(   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   1)
bus    <- c(12.4,12.5,12.4,11.7,11.6,12.2,12.4,11.8,11.7,11.5,12.1,12.0,11.6,11.5,11.4,12.6,12.5)
pwr <- data.frame(tm,batt_A,batt_B,chg,bus) 
```

我想在单独的方面面板中创建两个折线图（chg 和总线对 tm）。扭曲的是，我还希望每条线都着色以表示它正在跟踪的电池。所以如果batt_A>0，它正在充电，我希望充电线是绿色的；如果batt_A==0，它在公共汽车上，我希望公共汽车线路是绿色的。batt_B 相同，除了线条是蓝色（或任何颜色）。

我得到了融化+刻面组合，但是如何添加颜色？

（ps：我正在使用构面，因为在同一时间尺度上还有 6 个传感器在变化，我想全部观看）

有了下面安德烈的回答，我得到了这个解决方案，但重新编码很可怕：

```
mpwr <- melt(pwr, id.vars=1:3)

mpwr$batt <- ''
mpwr$batt <- ifelse(mpwr$batt_A>0 & mpwr$variable=="chg", "A", mpwr$batt)
mpwr$batt <- ifelse(mpwr$batt_B>0 & mpwr$variable=="chg", "B", mpwr$batt)
mpwr$batt <- ifelse(mpwr$batt_A==0 & mpwr$variable=="bus", "A", mpwr$batt)
mpwr$batt <- ifelse(mpwr$batt_B==0 & mpwr$variable=="bus", "B", mpwr$batt)
mpwr$batt <- as.factor(mpwr$batt)

ggplot(mpwr, aes(x=tm, group=1)) + 
   geom_line(aes(y=value, colour=batt)) +
   geom_line(aes(y=value, colour=batt)) +
   facet_grid(~variable) +
   scale_colour_discrete("Charging") 
```

数据处理可以清理，但我想我在那里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:53:35.363

类似于以下内容：

```
library(reshape2)
library(ggplot2)

mpwr <- melt(pwr, id.vars=1:3)

ggplot(mpwr, aes(x=tm, group=1)) + 
  geom_line(aes(y=value, colour=factor(batt_A!=0))) +
  geom_line(aes(y=value, colour=factor(batt_B!=0))) +
  facet_grid(~variable) +
  scale_colour_discrete("Charging") 
```

![在此处输入图像描述](../Images/b1a0d86dff0508b07fcbb6bfc19141a3.png)

# dojo - 滚动时dojo DataGrid没有进入下一页

> ID：11960358
> 
> 赞同：0
> 
> 时间：2012-08-14T20:38:03.913
> 
> 标签：dojo, dojox.grid.datagrid

这是我的代码：

```
 <script>
require(["dojox/grid/DataGrid", "dojo/store/Memory","dojo/data/ObjectStore", "dojo/store/JsonRest", "dojo/_base/xhr", "dojo/domReady!"], 
        function(DataGrid, Memory, ObjectStore, JsonRest, xhr){

    var gridSimple,
        store,
        dataStore;

    function createGrid(){

        gridSimple = new DataGrid({
            store: dataStore,
            structure: [
                { name: "Name", field: "name", width: "84px" },
                { name: "Last name", field: "lastName", width: "84px" },
                { name: "e-mail", field: "email", width: "120px" }
            ],
            rowsPerPage: 20,
            autoHeight:15,
            selectionMode: "single"     
        }, "grid");

        gridSimple.startup();
    }

    function init(){
        store = new JsonRest({target:  "/users/"});
        dataStore = ObjectStore({objectStore: store});  
        createGrid();
    }

    init();
});
</script>               

    <div id="grid">

    </div> 
```

我正在获取第一页（正在发送 Range 标头），但是当向下滚动时没有任何反应，dojo 没有发送下一个请求。不知道我做错了什么。

我在 Firefox 14.0.1 上，顺便说一句，使用鼠标滚轮滚动真的很慢。我也试过 chrome，没有得到下一页，但至少鼠标滚轮工作得很好。

道场版本：1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:57:19.383

问题是我必须在我的回复中添加下一个标题：

```
response.addHeader("Content-Range", "items " + from + "-" + to + "/" + total); 
```

我不知道这个。这就是他们所说的“REST Paging 标准”。[http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html#id7](http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html#id7)

另一方面，Firefox 的滚动速度非常缓慢。不会在 chrome 中发生。

这是错误报告：

[http://bugs.dojotoolkit.org/ticket/15487](http://bugs.dojotoolkit.org/ticket/15487)

因此，在 Firefox 首选项>高级>中取消选中“使用平滑​​滚动”。

# visual-studio-2010 - 从 Visual Studio 2010 中删除包时遇到问题

> ID：11960360
> 
> 赞同：0
> 
> 时间：2012-08-14T20:38:25.397
> 
> 标签：visual-studio-2010, nuget-package

我不小心通过“工具”菜单中的“管理 NuGet 包”工具向我的 VS2010 MVC 3 项目添加了一个包，我想删除它，但是经过一些研究，我似乎无法弄清楚如何去做。

我曾尝试在解决方案中打开“管理 NuGet 包”工具，但似乎没有卸载选项，所以我在网上搜索并找到了以下[关于安装和卸载包的文章](http://blogs.msdn.com/b/timlee/archive/2010/11/11/using-the-library-package-manager-with-add-on-libraries-in-visual-studio.aspx)。它提到右键单击项目并选择“添加包库引用”选项，但这不存在。我确实注意到该示例的项目是网站类型，而我的不是因为我使用的是 MVC 项目模板的修改版本。

无论如何，我再次在线搜索并发现多次提到以管理员身份启动 VS2010，然后在“管理 NuGet 包”工具中应该可以使用卸载选项，但这并没有改变任何内容，也没有出现卸载选项。

谁能建议可能是什么问题以及如何删除这个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:47:46.153

这是文档的[链接：](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)

转到标题为删除软件包的部分，您可以使用控制台卸载所需的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:57:18.407

在 Library Package Manager 中，单击 Installed Packages 选项卡，然后在要删除的包上单击 Manage。清除要从中卸载包的解决方案/项目的复选框，然后单击确定。

或者，打开包管理器控制台并输入“uninstall-package YourPackageName”。

# html - 如何将 li 中的文本换行与 ul 的宽度一样长？

> ID：11960362
> 
> 赞同：6
> 
> 时间：2012-08-14T20:38:35.053
> 
> 标签：html, css

我希望每个文本中的每个文本都`<li>`具有与`<ul>`. 但不知何故，它不起作用，文本只是继续前进......我在这里的某个地方读到，给出`<ul>`宽度可以解决问题，但在我的情况下它不起作用。这是我的 HTML：

```
<div id="chat-wrapper" style="display:none;">
<div id="main-content">
    <div id="user-list-wrapper">
        <b>USERS</b>

        <ul id="user-list">
        </ul>

    </div>

        <div id="messages-main">
            <ul id="messages"></ul>
        </div>
<input id="message-input" placeholder="Your message here!" autofocus="autofocus"/>
<input type="button" id="datasend" value="send"/>
 </div> 
```

这是我的 CSS：

```
#user-list-wrapper {
    float:left;
    width:100px;
    border-right:1px solid black;
    height:300px;
    overflow:scroll-y;
}

#login-wrapper {
    margin-left:auto;
    margin-right:auto;
    width:50%;
}

#messages-main {
    height:320px; 
    width:950px; 
    overflow:none;
    float:left;
    margin-left:20px;
}
#message-input {
    width:500px; 
    outline:none; 
    height:100px;
    margin-left:300px;
    line-height:100px;
}
#datasend{
}
#main-content {
    width:100%;
    height: 350px;
}
#messages {
    list-style-type:none;
    margin:0;
    width:900px;
}
#messages li {
    width:100%;
    padding:3px;
    border-bottom:1px solid #CCC;
}
#user-list {
    padding:0;
}
#user-list li{
    padding:3px;
    list-style:none;
    border-bottom:1px solid #CCC;
} 
```

但这对我不起作用。在我的情况下，我必须做什么才能实现我想要的？谢谢。

**更新：**我添加了我拥有的确切代码。

**更新2：文字也超过了`#main-content`。**所以它不仅是`<ul>`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T20:43:44.333

如果您使用的是 css3，您可以尝试添加

```
word-wrap: break-word; 
```

到 li css

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:43:34.317

You need to put 100% for li element. Here's an example, [http://jsfiddle.net/HQPGS/](http://jsfiddle.net/HQPGS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:59:32.447

您可以为 li 放置“宽度：继承”并为 ul 设置宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T07:15:26.173

您必须向 li 添加 3 个 css 属性才能实现：

```
li {
    overflow:hidden; 
    white-space:no-wrap; 
    text-overflow:ellipsis;
} 
```

但是列表样式类型会随着选项“溢出：隐藏”而消失，我不知道如何让它出现。

# c++ - libtorrent 未解决的外部

> ID：11960365
> 
> 赞同：0
> 
> 时间：2012-08-14T20:38:40.683
> 
> 标签：c++, compilation, unresolved-external, libtorrent

编译链接到 libtorrent.lib 的程序时出现以下错误。我试过用不同的设置编译 libtorrent，我试过启用/禁用 DHT、不推荐使用的功能等。

> 错误 LNK2019：未解析的外部符号“void __cdecl libtorrent::rel_performancetimer_pools_nolog_resolvecountries_deprecated_dht_ext_(void)”

这里有没有人熟悉 libtorrent，或者任何人都可以提供摆脱这个错误的任何建议吗？我没有看到我需要链接到的任何其他库。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T13:02:46.560

我花了两天时间，终于发现了一个问题。此函数的名称“void rel_performancetimer_pools_nolog_resolvecountries_deprecated_dht_ext_”由描述您当前偏好的部分组成。例如，dht_ 表示您正在使用 DHT，nolog_ 表示您已关闭 TORRENT_LOGGING 指令。问题是：此设置仅适用于发布配置！rel_ 表示 release_。在 libtorrent 0.16.11 上这个问题仍然没有解决。我已将此文本放在文件 build_config.hpp 的第 40 行：

```
#ifdef _DEBUG
#define TORRENT_DEBUG
#endif 
```

这是在发布和调试配置中使用 libtorrent 编译我的项目的方法，无需进行任何更正。请 Arvid 将这 3 行包含到您的下一个版本的 libtorrent 中。感谢，来自俄罗斯的伊利亚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:36:30.073

问题是我在项目中的定义与 libtorrent 编译中的配置/定义不一致，所以一些宏调用了一个不存在的函数。

# java - 更改字体后如何将字体更改回默认值

> ID：11960368
> 
> 赞同：0
> 
> 时间：2012-08-14T20:38:42.567
> 
> 标签：java, android

在我正在创建的应用程序中，我创建了一个更改应用程序字体的选项，一切正常，但我不知道如何在按下默认选项时将其设置回默认值，某处是否有默认 ttf 文件?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:43:38.513

您可以使用

```
 myTextView.setTypeface(Typeface.DEFAULT); 
```

# fluent-nhibernate - FluentNHibernate - 为 HasMany-Relations 设置 Cache().ReadWrite() 的约定

> ID：11960369
> 
> 赞同：0
> 
> 时间：2012-08-14T20:38:44.507
> 
> 标签：fluent-nhibernate, conventions

我正在寻找一种在约定中设置`.Cache().ReadWrite()`-Relations`HasMany()`的方法。我不使用自动映射。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:05:38.630

使用 FNH 1.3 这是可能的

```
public class CacheConvention : IHasManyConvention
{
    public void Apply(IOneToManyCollectionInstance instance)
    {
        instance.Cache.ReadWrite();
    }
} 
```

不知道是什么时候引入的

# r - R中的系数名称不匹配

> ID：11960373
> 
> 赞同：0
> 
> 时间：2012-05-17T19:37:15.467
> 
> 标签：r, survey, matching

我确信这是一个简单的问题，但我对 R 的基本理解阻碍了我。它可能与不等于变量名称的字符串有关......

我正在尝试使用调查包与对比进行交互。

se_race4 是一个因子变量，有 4 个类别：“1）非西班牙裔白人”、“2）黑人”、“3）西班牙裔”、“4）其他”

我像这样运行模型：

```
mod1 <- lm(sysbp ~ pmper10*se_race4 + age_baseline, data=mydata) 
```

然后我看一些对比：

```
svycontrast(mod1,c("pmper10"=1) 
```

以下命令有效：

```
svycontrast(mod1,c("pmper10"=1,"pmper10:se_race42) Black"=1))
svycontrast(mod1,c("pmper10"=1,"pmper10:se_race43) Hispanic"=1))
svycontrast(mod1,c("pmper10"=1,"pmper10:se_race44) Other"=1)) 
```

但这不是（即使 'z' 看起来就像上面的字符串）：

```
for(z in grep("pmper10:se_race4",names(coef(mod1)),value=TRUE)) {
    svycontrast(mod1,c("pmper10"=1, z=1))
} 
```

R给了我错误：

```
Error in match.names(names(coef(stat)), contrasts) : names not matched 
```

我错过了什么？

编辑：结果`names(coef(mod1))`：

```
[1] "(Intercept)"                 "pmper10"                    
[3] "se_race42) Black"            "se_race43) Hispanic"        
[5] "se_race44) Other"            "age_baseline"               
[7] "pmper10:se_race42) Black"    "pmper10:se_race43) Hispanic"
[9] "pmper10:se_race44) Other" 
```

结果`names(c("pmper10"=1, z=1))`

```
 [1] "pmper10" "z" 
```

的结果`z`

```
[1] "pmper10:se_race44) Other" 
```

这看起来不太对！我如何让“z”变成z的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:46:02.713

此错误告诉您 vector`contrasts`应该与 vector 匹配`names(coef(stat))`，但它不匹配。

如果您寻求`svycontrast`帮助：

```
svycontrast(stat, contrasts, ...) 
```

`stats`是你的`mod1`并且`contrasts`是向量`c("pmper10"=1, z=1)`。

键入`names(coef(mod1))`and `names(c("pmper10"=1, z=1))`，查看错误在哪里。

您应该将`for`命令替换为：

```
sapply(grep("pmper10:se_race4",names(coef(mod1)),value=TRUE), function(z) {
    svycontrast(mod1,c("pmper10"=1, paste(z)=1))
}) 
```

编辑：

这不是最优雅的解决方案，但似乎有效：

```
sapply(grep("pmper10:se_race4",names(coef(mod1)),value=TRUE), function(z) {
    contrasts <- c(1,1)
    names(contrasts) <- c("pmper10",z)
    svycontrast(mod1,contrasts)
}) 
```

# asp.net-mvc-3 - 无法在 Visual Studio 2010 中调试

> ID：11960376
> 
> 赞同：4
> 
> 时间：2012-08-14T20:39:00.153
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我突然无法在VS中调试。我正在开发一个 MVC 应用程序。我没有对应用程序设置进行任何更改。我只是修改了一个类中的一个属性，就像我做过很多次一样。

我正在弹出

> 未启用调试
> 
> 此页面无法在调试模式下运行，因为 Web.config 文件中未启用调试。你想干什么？
> 
> (.)修改 Web.config 文件以启用调试。
> 
> ( ) 无需调试即可运行。

我的 Web.Config 文件中有编译 debug="true" targetFramework="4.0" 。显然启用了调试。我已经重新启动VS，重新启动，但同样的事情。

当我说立即时，我的意思是在大约 10 分钟内从一个调试会话到另一个调试会话。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:48:14.393

复制别人对您的问题的修复，看看是否有帮助：

通过注册/安装 ASP.NET 4.0 解决了这个问题

c:\windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

如果您使用的是 32 位，请将 Framework64 更改为 Framework。链接[无法在 Web 服务器上开始调试](http://www.visualwebgui.com/Developers/Forums/tabid/364/forumid/27/threadid/46210/scope/posts/Default.aspx)

试试看是否有效

# javascript - HTML显示/隐藏元素JS不起作用

> ID：11960380
> 
> 赞同：0
> 
> 时间：2012-08-14T20:39:21.073
> 
> 标签：javascript, html, hide, show

我想要做的是，当用户在一个内容框中选中单选框时，它将显示下一个。当我使用 javascript 执行此操作时，所有框都在彼此内部并且搞砸了这是我的整个代码，因此您可以看到 css 等。

```
<html>
    <head>
        <style>
        html, body {
            background-image:initial;
            background-repeat-x:initial;
            background-repeat-y:initial;
            background-repeat:no-repeat;
            background-attachment:initial;
            background-position:initial initial;
            background-position-x:initial;
            background-position-y:initial;
            background-origin:initial;
            background-clip:initial;
            background-color:#EEEEEE;
            font-family:'Source Sans Pro', sans-serif;
            color:#262626;
            margin:25px;
        }
        .texts {
            position:relative;
            z-index:1;
            -webkit-border-top-left-radius:5px;
            border-top-left-radius:5px;
            -o-border-top-left-radius:5px;
            -ms-border-top-left-radius:5px;
            -moz-border-radius-topleft:5px;
            -webkit-border-top-right-radius:5px;
            border-top-right-radius:5px;
            -o-border-top-right-radius:5px;
            -ms-border-top-right-radius:5px;
            -moz-border-radius-topright:5px;
            -webkit-border-bottom-right-radius:5px;
            border-bottom-right-radius:5px;
            -o-border-bottom-right-radius:5px;
            -ms-border-bottom-right-radius:5px;
            -moz-border-radius-bottomright:5px;
            -webkit-border-bottom-left-radius:5px;
            border-bottom-left-radius:5px;
            -o-border-bottom-left-radius:5px;
            -ms-border-bottom-left-radius:5px;
            -moz-border-radius-bottomleft:5px;
            width:25%;
            font-family:Montserrat, sans-serif;
            font-size:14px;
            text-align:center;
            border:1px solid #818181;
            padding:10px;
        }
        .title {
            margin:-10;
            background-image:url(images/blue.png);
            height:20px;
            padding-bottom:10px;
            padding-top:6px;
            text-align:center;
            font-family:Montserrat, sans-serif;
            font-size:16px;
            -webkit-border-top-left-radius:5px;
            border-top-left-radius:5px;
            -o-border-top-left-radius:5px;
            -ms-border-top-left-radius:5px;
            -moz-border-radius-topleft:5px;
            -webkit-border-top-right-radius:5px;
            border-top-right-radius:5px;
            -o-border-top-right-radius:5px;
            -ms-border-top-right-radius:5px;
            -moz-border-radius-topright:5px;
        }
        .button {
            background-image:url(images/blue.png);
            background-repeat-x:repeat;
            background-repeat-y:no-repeat;
            background-repeat:repeat-x;
            background-attachment:initial;
            background-position:initial initial;
            background-position-x:initial;
            background-position-y:initial;
            background-origin:initial;
            background-clip:initial;
            background-color:#000000;
            -webkit-border-top-left-radius:5px;
            border-top-left-radius:5px;
            -o-border-top-left-radius:5px;
            -ms-border-top-left-radius:5px;
            -moz-border-radius-topleft:5px;
            -webkit-border-top-right-radius:5px;
            border-top-right-radius:5px;
            -o-border-top-right-radius:5px;
            -ms-border-top-right-radius:5px;
            -moz-border-radius-topright:5px;
            -webkit-border-bottom-right-radius:5px;
            border-bottom-right-radius:5px;
            -o-border-bottom-right-radius:5px;
            -ms-border-bottom-right-radius:5px;
            -moz-border-radius-bottomright:5px;
            -webkit-border-bottom-left-radius:5px;
            border-bottom-left-radius:5px;
            -o-border-bottom-left-radius:5px;
            -ms-border-bottom-left-radius:5px;
            -moz-border-radius-bottomleft:5px;
            color:#F0FFF0;
            cursor:pointer;
            border:1px solid #0774B9;
            padding:8px 35px 8px 35px;
        }
        .button:hover {
            background-image:url(images/blue_hover.png);
            background-repeat-x:repeat;
            background-repeat-y:no-repeat;
            background-repeat:repeat-x;
            background-attachment:initial;
            background-position:initial initial;
            background-position-x:initial;
            background-position-y:initial;
            background-origin:initial;
            background-clip:initial;
            background-color:#000000;
        }
        .button:active {
            background-image:url(images/blue_click.png);
            background-repeat-x:repeat;
            background-repeat-y:no-repeat;
            background-repeat:repeat-x;
            background-attachment:initial;
            background-position:initial initial;
            background-position-x:initial;
            background-position-y:initial;
            background-origin:initial;
            background-clip:initial;
            background-color:#000000;
        }
        .label_check {
            -webkit-appearance:none;
            background-color:#FAFAFA;
            box-shadow:rgba(0, 0, 0, 0.046875) 0px 1px 2px, rgba(0, 0, 0, 0.046875) 0px -15px 10px -12px inset;
            -webkit-border-top-left-radius:50px;
            border-top-left-radius:50px;
            -o-border-top-left-radius:50px;
            -ms-border-top-left-radius:50px;
            -moz-border-radius-topleft:50px;
            -webkit-border-top-right-radius:50px;
            border-top-right-radius:50px;
            -o-border-top-right-radius:50px;
            -ms-border-top-right-radius:50px;
            -moz-border-radius-topright:50px;
            -webkit-border-bottom-right-radius:50px;
            border-bottom-right-radius:50px;
            -o-border-bottom-right-radius:50px;
            -ms-border-bottom-right-radius:50px;
            -moz-border-radius-bottomright:50px;
            -webkit-border-bottom-left-radius:50px;
            border-bottom-left-radius:50px;
            -o-border-bottom-left-radius:50px;
            -ms-border-bottom-left-radius:50px;
            -moz-border-radius-bottomleft:50px;
            display:inline-block;
            position:relative;
            border:1px solid #CACECE;
            padding:6px;
        }
        .label_check:checked {
            background-color:#E9ECEE;
            color:#99A1A7;
            box-shadow:rgba(0, 0, 0, 0.046875) 0px 1px 2px, rgba(0, 0, 0, 0.046875) 0px -15px 10px -12px inset, rgba(255, 255, 255, 0.0976563) 15px 10px -12px inset, rgba(0, 0, 0, 0.0976563) 0px 0px 10px inset;
            border:1px solid #ADB8C0;
        }
        .label_check:checked::after {
            content:' ';
            width:6px;
            height:6px;
            -webkit-border-top-left-radius:50px;
            border-top-left-radius:50px;
            -o-border-top-left-radius:50px;
            -ms-border-top-left-radius:50px;
            -moz-border-radius-topleft:50px;
            -webkit-border-top-right-radius:50px;
            border-top-right-radius:50px;
            -o-border-top-right-radius:50px;
            -ms-border-top-right-radius:50px;
            -moz-border-radius-topright:50px;
            -webkit-border-bottom-right-radius:50px;
            border-bottom-right-radius:50px;
            -o-border-bottom-right-radius:50px;
            -ms-border-bottom-right-radius:50px;
            -moz-border-radius-bottomright:50px;
            -webkit-border-bottom-left-radius:50px;
            border-bottom-left-radius:50px;
            -o-border-bottom-left-radius:50px;
            -ms-border-bottom-left-radius:50px;
            -moz-border-radius-bottomleft:50px;
            position:absolute;
            top:3px;
            background-image:initial;
            background-repeat-x:initial;
            background-repeat-y:initial;
            background-repeat:no-repeat;
            background-attachment:initial;
            background-position:initial initial;
            background-position-x:initial;
            background-position-y:initial;
            background-origin:initial;
            background-clip:initial;
            background-color:#99A1A7;
            box-shadow:rgba(0, 0, 0, 0.296875) 0px 0px 10px inset;
            left:3px;
            font-size:32px;
        }

        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link href="http://fonts.googleapis.com/css?family=Montserrat"
        rel="stylesheet" type="text/css">
        <title>Frooloo, the free face morphing software</title>
        <script type="text/javascript">
        function showStuff(id) {
            document.getElementById(id).style.display = 'block';
        }
        </script>
    </head>
    <body>
        <center>
            <h1>Logo Here!</h1>
            <br>
        </center>
        <span id="1" style="display: block;">
            <div class="texts">
                <div class="title">
                    <strong>Step 1</strong>
                    <br>
                    <br>
                </div>Press "Allow" when you are asked for access to your camera.
                <br>
                <label class="label_check">
                    <input name="sample_check1" id="sample_check1" value="1" type="radio"
                    nclick="showStuff('3');  />
    Done?
        </label></div></span>
    <br>
                        <span id=" 2 " style="display: none; "><div class="texts ">

                                        <div class="title " >
                        <strong>Step 2</strong><br><br>
                    </div>

    Make sure your webcam is facing you and your volume is up, so you can hear the beep to let you know analyzing is done.<br>
    <label class="label_check " >
        <input name="sample_check2 " id="sample_check2 " value="1
                    " type="radio " onclick="showStuff( '3'); />Done?</label>
            </div>
        </span>
        <br>
        <span id="3" style="display: none;">"
            <div class="texts">
                <div class="title">
                    <strong>Step 3</strong>
                    <br>
                    <br>
                </div>A black dot will appear in the area to the right, stare at that black
                dot and DO NOT move your head, the software is analyzing your face. You
                can move after you hear a beep. This process will start when you check
                the box below.
                <br>
                <label class="label_check">
                    <input name="sample_check3" id="sample_check3" value="1" type="radio"
                    />Ready?</label>
            </div>
        </span>
        <div class="img">
            <img src="images/dot.png" img="" style="position:absolute; left:610px; top:120px; ">
        </div>
        <script>
        $('body').hide();
        $('body').fadeIn(1000);
        </script>
        <script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>
        <script type="text/javascript">
        var pageTracker = _gat._getTracker("UA-301801-11");
        pageTracker._trackPageview();
        </script>
    </body>

</html> 
```

这是执行此操作的代码部分：

```
<center>
    <h1>Logo Here!</h1>
    <br>
</center>
<span id="1" style="display: block;">
    <div class="texts">
        <div class="title">
            <strong>Step 1</strong>
            <br>
            <br>
        </div>Press "Allow" when you are asked for access to your camera.
        <br>
        <label class="label_check">
            <input name="sample_check1" id="sample_check1" value="1" type="radio"
            onclick="showStuff('2');  />
    Done?
        </label></div></span>
    <br>
                        <span id=" 2 " style="display: none;
            "><div class="texts ">

                                        <div class="title " >
                        <strong>Step 2</strong><br><br>
                    </div>

    Make sure your webcam is facing you and your volume is up, so you can hear the beep to let you know analyzing is done.<br>
    <label class="label_check " >
        <input name="sample_check2 " id="sample_check2 " value="1
            " type="radio " onclick="showStuff( '3'); />Done?</label>
    </div>
</span>
<br>
<span id="3" style="display: none;">"
    <div class="texts">
        <div class="title">
            <strong>Step 3</strong>
            <br>
            <br>
        </div>A black dot will appear in the area to the right, stare at that black
        dot and DO NOT move your head, the software is analyzing your face. You
        can move after you hear a beep. This process will start when you check
        the box below.
        <br>
        <label class="label_check">
            <input name="sample_check3" id="sample_check3" value="1" type="radio"
            />Ready?</label>
    </div>
</span> 
```

这是JS函数，

```
<script type="text/javascript">
    function showStuff(id) {
        document.getElementById(id).style.display = 'block';
    }
</script> 
```

这是发生了什么，去这个链接看看`http://188.165.208.144/~seegee/planz/real/morph.php`

应该有 3 个内容框在另一个之上，但是当我这样做时，会发生这种情况，是的，那个黑点应该在那里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:46:58.080

ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:04:01.757

Scrappedcola 是对的。

对于你的第二个问题，有一个额外的报价，因为你有

```
<span id="a3" style="display: none;">"<div class="texts" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:47:35.450

ID 不应以数字开头（请参阅此[帖子](https://stackoverflow.com/questions/5672903/can-i-have-a-div-with-id-as-number)）。除此之外，当您`<div>`使用内联元素 ( `<span>`) 包装块元素 ( ) 时，您可能会遇到各种浏览器的问题。

您的 onclick 缺少引号：`onclick="showStuff('2');`应该是`onclick="showStuff('2');"`

# dependency-injection - 遗留系统中的 DI 容器和自定义范围状态

> ID：11960387
> 
> 赞同：2
> 
> 时间：2012-08-14T20:40:03.023
> 
> 标签：dependency-injection, inversion-of-control, ioc-container, state, legacy-code

我相信我了解 DI / IoC 容器的基本概念，并使用它们编写了几个应用程序并阅读了很多堆栈溢出答案以及 Mark Seeman 的书。在某些情况下我仍然遇到了麻烦，尤其是在将 DI 容器集成到尚未真正使用 DI 原则的大型现有架构中时（想想大泥球）。

我知道理想的情况是每个操作都有一个组合根/对象图，但在遗留系统中，如果没有重大重构，这可能是不可能的（只有代码的新部分和一些选择重构的旧部分可能具有通过构造函数注入的依赖项和系统的其余部分使用容器作为服务定位器与新部件进行交互）。这实际上意味着一个操作深处的堆栈跟踪可能包括多个对象图，其中在新子系统（单个对象图直到退出旧段）和传统子系统（服务定位器调用在某个点以在DI 容器）。

有了（可能有问题，我可能想多了，或者完全错误地假设这种混合架构是一个好主意）假设，这是实际的问题：

假设我们有一个线程池执行在数据库（或任何外部位置）中定义的各种类型的预定作业。每种单独类型的计划作业都实现为继承公共基类的类。当作业启动时，它会收到有关应将其日志消息写入哪些目标以及应使用的配置的信息。配置可以通过将值作为方法参数传递给任何需要它们的类来处理，但是如果作业实现大于 10-20 个类，它似乎不太方便。

日志记录是更大的问题。作业调用的子系统可能还需要将内容写入日志，通常在示例中，这仅通过在构造函数中请求 ILog 实例来完成。但是在这种情况下，当我们直到运行时才知道细节/实现时，它是如何工作的呢？自从：

*   由于调用链中的（非 DI 容器控制）遗留系统段（-> 可能存在多个单独的对象图），子容器不能用于注入特定子范围的自定义记录器
*   手动属性注入基本上需要更新完整的调用链（包括所有遗留子系统）

帮助更好地理解问题的简化示例：

```
Class JobXImplementation : JobBase {
    // through constructor injection
    ILoggerFactory _loggerFactory;
    JobXExtraLogic _jobXExtras;

    public void Run(JobConfig configurationFromDatabase)
    {
        ILog log = _loggerFactory.Create(configurationFromDatabase.targets);
        // if there were no legacy parts in the call chain, I would register log as instance to a child container and Resolve next part of the call chain and everyone requesting ILog would get the correct logging targets
        // do stuff
        _jobXExtras.DoStuff(configurationFromDatabase, log);
    }
}

Class JobXExtraLogic {
    public void DoStuff(JobConfig configurationFromDatabase, ILog log) {
        // call to legacy sub-system
        var old = new OldClass(log, configurationFromDatabase.SomeRandomSetting);
        old.DoOldStuff();
    }
}

Class OldClass {
    public void DoOldStuff() {
        // moar stuff 
        var old = new AnotherOldClass();
        old.DoMoreOldStuff();
    }
}

Class AnotherOldClass {
    public void DoMoreOldStuff() {
        // call to a new subsystem 
        var newSystemEntryPoint = DIContainerAsServiceLocator.Resolve<INewSubsystemEntryPoint>();
        newSystemEntryPoint.DoNewStuff();
    }
}

Class NewSubsystemEntryPoint : INewSubsystemEntryPoint {
    public void DoNewStuff() {
        // want to log something...
    }
} 
```

我相信你现在已经明白了。

通过 DI 实例化旧类是不可能的，因为它们中的许多使用（通常是多个）构造函数来注入值而不是依赖项，并且必须一个一个地重构。调用者基本上隐式地控制对象的生命周期，这是在实现中假设的（它们处理内部对象状态的方式）。

我有哪些选择？在这种情况下，您可能会看到哪些其他类型的问题？在这种环境中尝试仅使用构造函数注入是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:51:23.163

好问题。一般来说，我会说当只有一部分代码对 DI 友好时，IoC 容器会失去很多有效性。

像[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)和[.NET 中的依赖注入](http://www.manning.com/seemann/)这样的书都谈到了梳理对象和类以使 DI 在您描述的代码库中可行的方法。

让系统接受测试将是我的首要任务。我会选择一个功能区域作为开始，一个对其他功能区域几乎没有依赖的功能区域。

我认为从构造函数注入转移到有意义的 setter 注入没有问题，它可能为您提供构造函数注入的垫脚石。添加属性通常比更改对象的构造函数更具侵入性。

# r - Error with Cauchy prior for MCMClogit

> ID：11960390
> 
> 赞同：1
> 
> 时间：2012-08-06T10:20:23.750
> 
> 标签：r

I am trying to estimate a Bayesian logistic model with with a weakly informative Cauchy prior with location=0 and scale=2.5 ([Gelman et al, 2008](http://www.stat.columbia.edu/~gelman/research/published/priors11.pdf)). I am using `MCMClogit` in the `MCMCpack` package:

```
df = read.csv("http://dl.dropbox.com/u/1791181/MCMC.csv")#Read in data
library(MCMCpack)

logpriorfun <- function(beta, location, scale){
  sum(dcauchy(beta, location, scale, log=T))
} #From the MCMCpack documentation
mcmc.logit = MCMClogit(SECONDARY.LEVEL ~ AGE + SEX + as.factor(DISTRICT), 
                       tune=.25, 
                       user.prior.density=logpriorfun, location=0, scale=2.5, log=T,
                       mcmc=10000, 
                       data=df) 
```

But I keep getting the error message below:

```
Error in MCMClogit(SECONDARY.LEVEL ~ AGE + SEX + as.factor(DISTRICT),  :
  REAL() can only be applied to a 'numeric', not a 'NULL' 
```

I can't see any obvious problem with either the code or the data. The code runs fine if I take out the prior option. I would appreciate any pointers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-29T14:50:56.040

虽然我不知道问题的原因，但我相信说您可以`MCMClogit`使用不同的种子重新运行以获得有效的后验估计是相对节省的。如果您使用相同的种子重新运行，错误将再次发生。在蒙特卡洛/重新​​采样设置中，使用`tryCatch`随机种子设置`MCMClogit`以避免崩溃似乎是明智之举。

# magento - Magento：何时单独使用 Mage::getResourceModel()

> ID：11960395
> 
> 赞同：1
> 
> 时间：2012-08-14T20:41:00.897
> 
> 标签：magento

`Mage::getResourceModel()`除了使用集合时，是否有任何情况需要 Magento 开发人员使用？

我现在在 Magento 开发了一段时间，还没有遇到需要自己使用的情况`Mage::getResourceModel()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:18:25.500

当您使用不属于标准 CRUD 模式的模型/资源模型对，并且您想直接调用资源模型的公共方法时。

代码库中的一些示例（在我的脑海中）

```
Mage/Admin/Model/Session.php
100:                $this->setAcl(Mage::getResourceModel('admin/acl')->loadAcl());
138:            $this->setAcl(Mage::getResourceModel('admin/acl')->loadAcl());

Mage/Adminhtml/Block/Catalog/Product/Attribute/Set/Main.php
179:        $configurable = Mage::getResourceModel('catalog/product_type_configurable_attribute')
191:            $nodeChildren = Mage::getResourceModel('catalog/product_attribute_collection')
233:        $collection = Mage::getResourceModel('catalog/product_attribute_collection')
243:        $attributes = Mage::getResourceModel('catalog/product_attribute_collection') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:24:33.270

`getResourceModel`当您只想获取资源模型实例时应该使用（这也是对集合的某种优化，但集合是资源模型真的很愚蠢）。例如，为了获取资源模型，您可以使用：

```
Mage::getModel('my_module/path_to_resource_model'); 
```

此代码使用名称创建模型`My_Module_Model_Path_To_Resource_Model`。但这不是一个好的解决方案，因为您可以在 config.xml 中指定资源模型类前缀（例如在 Mage_Cms 中）：

```
............................................
        <models>
            <cms>
                <class>Mage_Cms_Model</class>
                <resourceModel>cms_mysql4</resourceModel>
            </cms>
            <cms_mysql4>
<!-- ----> --> <class>Mage_Cms_Model_Mysql</class>
............................................ 
```

但是当您使用`Mage::getResourceModel`系统读取资源模型类前缀时（并且您将来可以更改它）。因此，第一个代码片段可以重写为：

```
Mage::getResourceModel('my_module/model'); 
```

# python - How to add numbers in column two if column one is the same in Python?

> ID：11960397
> 
> 赞同：0
> 
> 时间：2012-08-14T20:41:07.360
> 
> 标签：python, list

If I have sample input:

```
Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,2 
```

How can I get output like following:

```
Apples,7
Oranges,12 
```

Thanks.

Edit: I'm using Python 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:44:52.900

使用默认字典。

```
from collections import defaultdict

d=defaultdict(int)
with open('inputfile') as f:
    for line in f:
        fruit,num = line.split(',')
        #could also use `fruit,num,*rest = line.split(',')` 
        #for a little more robustness at the expense of 
        #backward compatability
        d[fruit]+=int(num) 
```

您也可以使用该`csv`模块来解析文件中的列，但在这种情况下，这对我来说似乎有点过分了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T20:46:36.060

[计数器](http://docs.python.org/library/collections.html#collections.Counter)是专门为此设计的。

```
# I'm assuming you have a list or iterable of lines like this
file="""Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,2""".split('\n')

# Here's the code under that assumtion
from collections import Counter
from functools import reduce
from operator import add
tally = reduce(add, (Counter({x[0]: int(x[1])}) for x in (x.split(',') for x in file)))

# To demonstrate
for name in tallies:
print('%s,%s' % (name, tallies[name])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:55:05.960

```
strs="""Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,2"""

dic={}
for x in strs.split():
    key=x.split(',')[0]
    val=int(x.split(',')[1])    
    dic[key]=dic.get(key,0)+val

print(dic)  #prints {'Apples': 7, 'Oranges': 12} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T20:47:21.940

```
from collections import defaultdict
result = defaultdict(int)
lines = """
Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,12
"""
for k in lines.splitlines():
    result[k.split(",")[0]]+=int(k.split(",")[-1] or 0)#account for '' cases...
print result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T20:47:51.907

```
stuff = """
Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,2
"""

# Holds mapping from fruit->count    
total = {}

# Process input    
lines = stuff.strip().splitlines()

for x in lines:
    name, _, count = x.partition(",")
    total.setdefault(name, 0)
    total[name] += int(count)

# Output
for k, v in sorted(total.items()):
    print("{},{}".format(k, v)) 
```

（这台机器上没有安装 Python 3，但上面应该可以工作，可能需要稍作调整）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T13:31:34.583

不喜欢groupby？

```
data = """\
Apples,2
Apples,4
Apples,1
Oranges,10
Oranges,2""".splitlines()

from itertools import groupby

groups = groupby((line.split(',') for line in data), key=lambda x:x[0])
table = dict((k,sum(map(int,(x[1] for x in vals)))) for k,vals in groups)
for item in table.items():
    print '%s,%d' % item 
```

印刷：

```
Apples,7
Oranges,12 
```

# r - R中的一些基本问题为回归示例编写R脚本

> ID：11960399
> 
> 赞同：0
> 
> 时间：2012-04-24T16:21:33.797
> 
> 标签：r

首先我想指出我对R不是很熟悉，如果以下问题之一很清楚，很抱歉。

我的动机是编写一个简单的 R 脚本，其中应包含：

1.  导入数据
2.  做形式 $ Y=aX+bZ+intercept$ 的回归
3.  一些计算
4.  输出

现在这是我的问题：

1.  这是一个非常普遍的问题：如果我编写了 R 脚本，那么我必须使用 source(name.R) 加载它，对吗？必须有额外的命令来执行脚本吗？
2.  假设我用 进行回归`lm`，这样`fit<-lm(Y~X+Z,data=database)`会给出一个不错的输出。我真正想要的是将模型的系数保存在向量中。我怎样才能做到这一点？这将是一个 3 维向量`(intercept, a, b)`。**编辑**我试过了`coefficient<-coefficient(fit)`。这不起作用！`coefficient`不是数值向量。还有名称，即截距和下面的第一个元素的值。
3.  如果我想在脚本的最后打印出系数和一些计算，我该怎么做？只写`print(....)`？

我非常感谢您的帮助，希望我考虑了这个论坛中的所有规则和约定，因为这是我的第一个问题。如果没有，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:39:48.797

> 如果我编写了 R 脚本，那么我必须使用 source(name.R) 加载它，对吗？必须有额外的命令来执行脚本吗？

如果您的脚本直接调用命令，则不会

例如，如果 name.R 包含

```
a <- 1:10
plot(a, a^2, t="l") 
```

然后 source("name.R") 会直接生成一个图

但是，如果 name.R 包含

```
myfunction <- function()
   {
   a <- 1:10
   plot(a, a^2, t="l")
   } 
```

然后采购它只会加载该功能。然后，您将不得不调用`myfunction()`以获取情节。

> 假设我用 lm 做了回归，比如 fit<-lm(Y~X+Z,data=database) 这给出了一个很好的输出。我真正想要的是将模型的系数保存在向量中。我怎样才能做到这一点？这将是一个 3 维向量（截距，a，b）
> 如果我想在脚本的最后打印出系数和一些计算，我该怎么做？只写打印（....）？

```
 print(coef(fit)) 
```

会给你你需要的（你可以将它们存储在一个数组中`model.coef <- coef(fit)`）

此外，运行可能会很有趣

```
 summary(fit) 
```

查看`?coef`并`?summary`了解更多信息

# objective-c - Strange behaviour when in edit mode and a custom cell.editingAccessoryView

> ID：11960401
> 
> 赞同：1
> 
> 时间：2012-08-14T20:41:17.657
> 
> 标签：objective-c, xcode, uitableview

I'm using a UITableView for an application I'm building. When the UITableView goes to editing mode, the table cells display a textfield over the cell, as defined here:

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
  NSString *cellLabel = [cellDetails objectAtIndex:indexPath.row];
  NSString *cellData = [movieDictionary objectForKey:cellLabel];
  float x = cell.textLabel.frame.origin.x + 80;
  float y = cell.textLabel.frame.origin.y + 5;
  float w = cell.textLabel.frame.size.width - 80;
  float h = cell.textLabel.frame.size.height - 10;
  UITextField *editField = [[UITextField alloc] initWithFrame:CGRectMake(x, y, w, h)];
  editField.text = [[NSString alloc] initWithFormat:@"%@", cellData];
  editField.tag = EDIT_FIELD_TAG;
  if (indexPath.row == 1) {
    editField.keyboardType = UIKeyboardTypeNumberPad;
  }
  editField.delegate = self;
  editField.borderStyle = UITextBorderStyleRoundedRect;
  cell.editingAccessoryView = editField;
} 
```

Then, in the `setEditing` implementation:

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated {
  NSString *msg;
  if(!editing) {
    for (int i = 0; i <5; i++) {
        UITableViewCell *cell = [self.table cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
        UITextField *tf = [cell.subviews objectAtIndex:2];
        if(i==1) {
            if([tf.text intValue] == 0) {
                msg = @"The year you entered is not valid. Please enter a valid year.";
            }
        }
        if(!msg) {
            [movieDetails replaceObjectAtIndex:i withObject:tf.text];
            [movieDictionary setObject:tf.text forKey:[cellDetails objectAtIndex:i]];
        }
    }
    if(((NSString *)[movieDetails objectAtIndex:0]).length == 0) msg = @"The title you entered is not valid. Please enter a valid title.";
    if(((NSString *)[movieDetails objectAtIndex:1]).length == 0) msg = @"The year you entered is not valid. Please enter a valid year.";
    if(((NSString *)[movieDetails objectAtIndex:2]).length == 0) msg = @"The director you entered is not valid. Please enter a valid director.";
    if(((NSString *)[movieDetails objectAtIndex:3]).length == 0) msg = @"The cast you entered is not valid. Please enter a valid cast.";
    if(((NSString *)[movieDetails objectAtIndex:4]).length == 0) msg = @"The genre you entered is not valid. Please enter a valid genre.";
    if(!msg) {
        movie.movie_title = [movieDetails objectAtIndex:0];
        movie.movie_year = [[movieDetails objectAtIndex:1] intValue];
        movie.movie_director = [movieDetails objectAtIndex:2];
        movie.movie_cast = [movieDetails objectAtIndex:3];
        movie.movie_genre = [movieDetails objectAtIndex:4];
        [self.table reloadData];
        [self.table setEditing:editing animated: YES];
        [super setEditing:editing animated: YES];
        [self updateMovie];
    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"An error occurred!" message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
    }
  } else {
    [self.table setEditing:editing animated: YES];
    [super setEditing:editing animated: YES];
  }
} 
```

Now, the strange thing happens when I enter edit mode for the second time consecutively. The first time, the editing style displays correctly, as seen here:

![Correct edit mode](../Images/6ccf62e199e89b5aff98e8e6375daa9c.png)

However, once I return from the editing mode and enter it again, the cells look like this:

![Faulty edit mode](../Images/cfe209cd2815b0788fe21e939fcaf553.png)

Has anyone encountered this before?

EDIT: `cellForRowAtIndexPath` implementation:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }
  NSString *cellLabel = [cellDetails objectAtIndex:indexPath.row];
  NSString *cellData = [movieDictionary objectForKey:cellLabel];
  cell.textLabel.text = [[NSString alloc] initWithFormat:@"%@ %@", cellLabel, cellData];
  cell.editingAccessoryType = UITableViewCellAccessoryNone;
  cell.accessoryType = UITableViewCellAccessoryNone;
  return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:52:55.340

您似乎不符合表视图数据源*协议*，您应该在哪里返回`UITableViewCell`使用：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3acellForRowAtIndexPath%3a)）

不是通过创建自定义附件视图。`cellForRowAtIndexPath`当表格处于编辑模式时，使用返回不同单元格（带有文本字段而不是标签的单元格）的最佳方法。

# php - 正则表达式 php 以缩短 url

> ID：11960405
> 
> 赞同：-4
> 
> 时间：2012-08-14T20:41:42.287
> 
> 标签：php, regex

我有这样的网址

url = [http://mysite1.com/some/path/to/file/](http://mysite1.com/some/path/to/file/) {width}x{height}/image.jpg

我想从网址中取出 {width}x{height} 以便我有

```
http://mysite1.com/some/path/to/file/image.jpg 
```

我怎么能用 php 中的正则表达式做到这一点谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:45:50.597

这个正则表达式应该这样做：

```
$url = 'http://mysite1.com/some/path/to/file/123x456/image.jpg';
$result = preg_replace('#/[0-9]+x[0-9]+#', '', $url);

echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:48:49.040

搜索

```
^(http.*[//])(.*)[//](.*jpg)$ 
```

并替换为

```
\1\3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:07:42.637

```
$url = 'http://mysite1.com/some/path/to/file/{width}x{height}/image.jpg';

echo str_replace("/{width}x{height}", "", $url); 
```

输出：

> [http://mysite1.com/some/path/to/file/image.jpg](http://mysite1.com/some/path/to/file/image.jpg)

# r - 在 R 中创建多年的十分位数数据？

> ID：11960410
> 
> 赞同：1
> 
> 时间：2012-04-26T15:55:15.860
> 
> 标签：r

我在 R 中有一个这样的数据集：

```
SchoolName  Year  Grade  Other_cols_not_of_interest
School1     1998  152
School2     1998  156
School3     1999  158 
```

对于 1998-2011 年的每一年，我想计算*可用*学校数据的十分位数。（一年内可能有 40 所学校的数据，而另一年只有 20 所学校的数据。）

这是我想看到的输出：

```
Decile  Year   Value
D1      1998   100
D2      1998   110
D3      1998   125
[...]
D10     1998   170
D1      1999   105
[...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:18:34.670

```
schoolDat <- data.frame(
  'SchoolName' = rep(paste('School',1:10), each=10),
  'Year' = rep(1998:2007, 10),
  'Grade' = rpois(100, 100)
  )

tapply(schoolDat$Grade, schoolDat$Year, quantile, probs=0:10/10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:36:34.453

这是使用`plyr`包的版本，它将在具有 3 列的数据框中返回结果。

```
dat <- data.frame('SchoolName' = rep(paste('School', 1:10), each=10),
              'Year' = rep(1998:2007, 10),
              'Grade' = rpois(100, 100))

require(plyr)
d <- ddply(dat, .(Year), summarise, decile_grade=quantile(Grade, 0:10/10), 
       decile_val=0:10/10)

head(d)
>   Year decile_grade decile_val
  1 1998         81.0        0.0
  2 1998         90.0        0.1
  3 1998         93.4        0.2
  4 1998        100.3        0.3
  5 1998        104.8        0.4
  6 1998        106.5        0.5 
```

# python - Head First Design Patterns - Strategy Pattern - Python

> ID：11960413
> 
> 赞同：8
> 
> 时间：2012-08-14T20:42:09.213
> 
> 标签：python, design-patterns, strategy-pattern

This is my first attempt at the Strategy Design Pattern.

I have no architectural experience using Python, so constructive comments would be welcome.

I'm posting this to Stack-Over-Flow because I would have found it useful as a sanity check this morning. Evidently, I am supposedly not providing enough context for this thread (the dreaded validation phrase) so I'm going to have to Quack like a Duck.

Quack, Quack, Quack :-)

```
#!/usr/bin/env python

"""
    Head First Design Patterns - Strategy Pattern
    My attempt to implement the Strategy Pattern, described in Chapter 1.

    Sanity Warning:  I am currently learning Python, so please don't expect the
    exquisite design, planning, construction, and execution of the Curiosity mission.

    Expect Ducks... Quacking...

    Design Principle: "Favour composition over inheritance" 

    To the Pythonista community: What is the most elegant, readable, and simplest way
    of implementing the HFDP Strategy Pattern?
"""

import abc

"""

Abstract Base Classes

Duck > QuackBehaviour > FlyBehaviour

"""

class Duck(object):
    __metaclass__ = abc.ABCMeta

    def __init__(self):
        self.quackBehaviour = None;
        self.flyBehaviour = None;

    @abc.abstractmethod
    def display(self):
        pass

    def performQuack(self):
        self.quackBehaviour.quack()

    def performFly(self):
        self.flyBehaviour.fly()

    def swim(self):
        print "All ducks float, even decoys!"

class QuackBehaviour(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def quack(self):
        """All sub classes agree to quack"""
        pass

class FlyBehaviour(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def fly(self):
        """All sub classes agree to fly"""
        pass

"""

Sub class implementations

MallardDuck > Quack > MuteQuack > SqueakQuack > FlyWithWings > FlyNoWay > FlyRocketPowered

"""

class MallardDuck(Duck):
    def __init__(self):
        Duck.quackBehaviour = Quack()
        Duck.flyBehaviour = FlyWithWings()

    def display(self):
        print "I'm a real Mallard Duck"

class Quack(QuackBehaviour):
    def quack(self):
        print "Quack"

class MuteQuack(QuackBehaviour):
    def quack(self):
        print "<< Silence >>"

class SqueakQuack(QuackBehaviour):
    def quack(self):
        print "Squeak"

class FlyWithWings(FlyBehaviour):
    def fly(self):
        print "I'm flying!!"

class FlyNoWay(FlyBehaviour):
    def fly(self):
        print "I can't fly"

class FlyRocketPowered(FlyBehaviour):
    def fly(self):
        print "I'm flying with a rocket!"

"""

Cue Space Odyssey Opening...

"""

if __name__ == '__main__':
    mallard = MallardDuck()
    mallard.display()
    mallard.performQuack()
    mallard.performFly()
    mallard.flyBehaviour = FlyRocketPowered()
    mallard.performFly()

"""

Output:

I'm a real Mallard Duck
Quack
I'm flying!!
I'm flying with a rocket!

""" 
```

# django - django：如何根据 GenericForeignKey 的字段进行查询？

> ID：11960422
> 
> 赞同：50
> 
> 时间：2012-08-14T20:42:39.883
> 
> 标签：django, generic-foreign-key

我是使用 GenericForeignKey 的新手，我无法让它在查询语句中工作。表格大致如下：

```
class Ticket(models.Model):
    issue_ct = models.ForeignKey(ContentType, related_name='issue_content_type')
    issue_id = models.PositiveIntegerField(null=True, blank=True)
    issue = generic.GenericForeignKey('issue_ct', 'issue_id')

class Issue(models.Model):
    scan = models.ForeignKey(Scan) 
```

扫描创建一个问题，一个问题生成一些票，我将问题作为票表的外键。现在我有一个 Scan 对象，我想查询与此扫描相关的所有票证。我首先尝试了这个：

```
tickets = Tickets.objects.filter(issue__scan=scan_obj) 
```

这是行不通的。然后我尝试了这个：

```
issue = Issue.objects.get(scan=scan_obj)
content_type = ContentType.objects.get_for_model(Issue)
tickets = Tickets.objects.filter(content_type=content_type, issue=issue) 
```

还是不行。我需要知道如何在 django 中进行此类查询？谢谢。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-14T20:48:59.700

`Ticket.issue`您定义的字段将帮助您从一个`Ticket`实例转到`Issue`它所附加的实例，但它不会让您倒退。您已经接近第二个示例，但您需要使用该`issue_id`字段 - 您无法查询`GenericForeignKey`（它只是帮助您在有`Ticket`实例时检索对象）。试试这个：

```
from django.contrib.contenttypes.models import ContentType

issue = Issue.objects.get(scan=scan_obj)
tickets = Ticket.objects.filter(
    issue_id=issue.id,
    issue_ct=ContentType.objects.get_for_model(issue).id
    ) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-10T16:00:58.850

通过创建与`GenericForeignKey`共享的第二个模型来过滤罐子。首先将Ticket拆分为抽象模型和具体模型。`db_table``Ticket`

```
class TicketBase(models.Model):
    issue_ct = models.ForeignKey(ContentType, related_name='issue_content_type')
    issue_id = models.PositiveIntegerField(null=True, blank=True)

    class Meta:
        abstract = True

class Ticket(TicketBase):
    issue = generic.GenericForeignKey('issue_ct', 'issue_id') 
```

然后创建一个也子类化的模型`TicketBase`。这个子类将具有所有相同的字段，除了`issue`定义为`ForeignKey`. 添加自定义`Manager`允许将其过滤为单个`ContentType`.

由于此子类不需要同步或迁移，因此可以使用`type()`.

```
def subclass_for_content_type(content_type):
    class Meta:
        db_table = Ticket._meta.db_table

    class Manager(models.Manager):
        """ constrain queries to a single content type """
        def get_query_set(self):
            return super(Manager, self).get_query_set().filter(issue_ct=content_type)

    attrs = {
        'related_to': models.ForeignKey(content_type.model_class()),
        '__module__': 'myapp.models',
        'Meta': Meta,
        'objects': Manager()
    }
   return type("Ticket_%s" % content_type.name, (TicketBase,), attrs) 
```

# r - What is the equivalent of the R command "source" in Stata?

> ID：11960424
> 
> 赞同：3
> 
> 时间：2012-04-24T15:13:42.637
> 
> 标签：r, stata

I am an R enthusiast struggling the land of Stata. I have encountered the following problem in my attempts to "translate" from R to Stata:

In R, so that my script files don't get too big and crazy I like to write them in smaller parts and then have one main R script that reads in the smaller ones e.g.

1.  `source("script-1.R")`
2.  code blah1
3.  code blah2
4.  `source("script-2.R")` etc......

I would like to do the same thing in Stata and have tried doing

1.  `do "script-1.do"`
2.  code blah1
3.  code blah2
4.  `do "script-2.do"` etc......

However, I find that if I create a macro in `script-1.do` e.g. `local bird 1` The object/macro bird is not accessible in the main script or accessible to `script-2.do`. If I try to display the contents of `bird` in the main script, it's just empty.

Why is this? Any advice?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T16:57:15.523

Try using `include`. You can read about the differences between `include` and `do` (or `run`) here:

> [. help include](http://stata.com/help.cgi?include)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T14:54:08.233

Stata macros fall into two groups: `local` and `global`. The `local` ones only exist in the process in which they were defined (which can be an interactive session, do-file, or a `program`). If you defined something in `script-1.do`, it will only exist there, and you would have to explicitly `return` it to be visible elsewhere. (Do-files cannot really do that though; you'd have to define a `program, rclass` to return values, and breaking the chunks of code into `program`s is a good practice.) Avoid `global` macros unless absolutely, unavoidably necessary.

R has some control over the scope of its objects, but it isn't nearly any good compared to Stata's control over the macros. The variables and the data set are still global in Stata, and you cannot have more than one data set at a time. One other thing you will be pleasantly surprised with Stata is parameter passing by reference, which saves a lot of memory as compared to R's passing by value. So different packages have different strengths, and it would be short-sighted to say that one is better than the other.

Having said that, Keith's suggestion to use `include` is right on spot. I just tried to explain the "why" part of your question. Also, if what you need to exchange between the programs is a number, you can store it in an explicitly named `scalar` that will be visible to all processes.

# asp.net - 用asp.net连接sql server的连接字符串是什么？

> ID：11960429
> 
> 赞同：-2
> 
> 时间：2012-08-14T20:43:07.017
> 
> 标签：asp.net, ado.net

我需要连接数据库服务器（SQL Server 2005）的所有连接字符串，例如服务器名称、密码、用户名，我不知道如何将 ASP.NET 与 SQL Server 2005 数据库连接 - 给我一个完美的连接要连接的字符串。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:43:55.717

[http://connectionstrings.com/sql-server-2005#p1](http://connectionstrings.com/sql-server-2005#p1)

# regex - 为什么 (?i:abc) 是 flex 中无法识别的规则

> ID：11960430
> 
> 赞同：3
> 
> 时间：2012-08-14T20:43:12.830
> 
> 标签：regex, flex-lexer

为什么以下规则不被识别？

```
(?i:abc) { return TOKEN; } 
```

我想为不区分大小写的“abc”匹配返回 TOKEN。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:51:44.560

检查 flex 的版本。我们需要 2.5.34 或更高版本才能正常工作。回答者：@Alan Curry。

# vb.net - 在文本文件 vb.net 中写多行带引号

> ID：11960431
> 
> 赞同：0
> 
> 时间：2012-08-14T20:43:14.410
> 
> 标签：vb.net, string, quotes, writer

嗨有没有更简单的方法可以在一个文件中写入多行，其中包含引号和其他类似的东西，或者是这样做的唯一方法

```
 Dim objwriter As New System.IO.StreamWriter(AppsDir & "EthIPChanger.bat")
            objwriter.WriteLine("@echo off")
            objwriter.WriteLine("netsh interface ip set address name=""" & "Local Area Connection""" & " static " & TB_EthIPAddress.Text & " " & TB_EthSubnetMask.Text & " " & TB_EthDefaultGateway.Text & " 1")
            objwriter.WriteLine("netsh interface ip set dns """ & "Local Area Connection""" & " static " & TB_EthDNS1.Text)
            objwriter.WriteLine("ipconfig /all > """ & AppsDir & "NetworkInfo.txt""")
            objwriter.WriteLine("echo hi > """ & AppsDir & "CheckLen.txt""")
            objwriter.Close() 
```

我知道如果你使用 python 你可以做 """ 然后在里面做任何事情并以 """ 结束

vb.net中是否存在类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:31:03.920

如果您使用 objwriter.Write - 那么您可以自己提供 vbcrlf - 然后您可以在一个写入语句中放置多个“行”。

例如：

```
Dim str2write As string
str2write  = "firstline" and Chr(34) & Chr(34) & vbcrlf
str2write &= Chr(34) & "second line" and Chr(34) & vbcrlf & vbcrlf
objwriter.write(str2write)
objwriter.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:29:56.553

您可以尝试使用 StringBuilder：

```
 Dim objwriter As New System.IO.StreamWriter(AppsDir & "EthIPChanger.bat")
    Dim textToWrite As New System.Text.StringBuilder

    With textToWrite
        .Append("@echo off")
        .AppendFormat("netsh interface ip set address name={0}Local Area Connection{0} static {1} {2} {3} 1", Chr(34), TB_EthIPAddress.Text, TB_EthSubnetMask.Text, TB_EthDefaultGateway.Text)
        .AppendFormat("netsh interface ip set dns {0}Local Area Connection{0} static {1}", Chr(34), TB_EthDNS1.Text)
        .AppendFormat("ipconfig /all > {0}{1}{2}{0}", Chr(34), AppsDir, TB_EthDNS1.Text)
        .AppendFormat("echo hi > {0}{1}{2}{0}", Chr(34), AppsDir, CheckLen.Text)
    End With

    objwriter.WriteLine(textToWrite.ToString)
    objwriter.Close() 
```

# delphi - Windows 服务 + 在系统托盘中运行应用程序

> ID：11960432
> 
> 赞同：4
> 
> 时间：2012-08-14T20:43:19.047
> 
> 标签：delphi, windows-services, delphi-2010, system-tray

我有一个在服务器上运行的 Delphi 应用程序。这个应用程序对我的数据库进行了一些关键的工作，这些工作在其他应用程序中使用并在用户登录到 Windows 时执行。一切正常，但是，服务器的管理员有时会重新启动服务器并且没有登录到 Windows。服务器停留在 Windows 登录中，我的应用程序没有启动。

经过一个小的研究，我决定创建一个 Windows 服务来启动我的应用程序，甚至在用户登录 Windows 之前。但是，我有两种形式。一个表单显示我的应用程序正在执行的当前进程，另一个编辑一个用于配置第一个表单的 .ini 文件。

我需要做的是创建一个服务，在用户登录 Windows 之前和登录后启动我的应用程序，显示我的表单或打开它，但将其最小化到系统托盘。

是否可以使用具有此行为的 Windows 服务并将我的表单最小化到系统托盘？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T21:59:18.990

从 Vista 开始，服务根本无法显示 UI（包括系统托盘图标），并且在早期版本中不鼓励这样做。在所有版本的 Windows 中，您应该将 UI 分离到其自己的非服务应用程序中，该应用程序可由登录用户运行，管理该用户托盘的系统托盘图标，并根据需要使用与后端服务通信任意数量的可用 IPC 机制（管道、套接字、COM、RPC、WCF 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:40:06.137

好吧，您可以在服务中拥有一个表单，但必须以管理员身份运行，并且必须设置为交互式服务。

我使用 SVCOM 创建了带有托盘图标和可以最小化到系统托盘的表单的漂亮服务。

看看这里：[http ://www.aldyn.ru/products/index.html](http://www.aldyn.ru/products/index.html)

希望这可以帮助

# jquery-ui - How to avoid conflict between Jquery-ui Autocomplete and PHP Selenium WebDriver functional test when typing an ampersand?

> ID：11960433
> 
> 赞同：0
> 
> 时间：2012-08-14T20:43:22.893
> 
> 标签：jquery-ui, selenium, webdriver, phpunit

I'm writing a functional test in PHPUnit using Selenium WebDriver.

I need to do this:

`$searchBox->send_keys("bath & body");` to simulate typing into a text box.

When I run the test, I see it type `bath body` instead, skipping the ampersand.

I eventually narrowed the problem down to one part of Jquery-ui Autocomplete that was interfering. The [source option](http://jqueryui.com/demos/autocomplete/#option-source).

If I temporarily remove the 'source' option, the test runs fine.

All other javascript could remain in place and work fine.

Of course it doesn't make sense to remove the 'source' option; it's required.

Does anyone know what the problem is and whether there is a workaround?

P.S. This question started here: [https://stackoverflow.com/a/11957421/470749](https://stackoverflow.com/a/11957421/470749)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:05:58.363

I've got the same problem on java. Resolved it by define a new String like this:

*String amp = Keys.chord(Keys.SHIFT, "7");*

the code will simulate the key combination `SHIFT`+`7` avoiding the issue. Don't know how realize it on PHP, but hope it could be useful to you.

# asp.net - .NET 2 / VB：RequestValidation = false 替代品

> ID：11960437
> 
> 赞同：0
> 
> 时间：2012-08-14T20:43:37.390
> 
> 标签：asp.net, .net, vb.net

我遇到了一个 Web 应用程序的问题，该应用程序经常仅使用一个 aspx 页面就出现以下样式错误：

```
Browser: IE
Url Referrer: redacted
User Host 1.1.1.1
User Host Name: 1.1.1.1
Last Error: System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (ctl11$lbl="...na Redacte w..."). at System.Web.HttpRequest.ValidateString(String s, String valueName, String collectionName) at System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, String collectionName) at System.Web.HttpRequest.get_Form() at System.Web.HttpRequest.get_HasForm() at System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) at System.Web.UI.Page.DeterminePostBackMode() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) at System.Web.UI.Page.ProcessRequest() at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) at System.Web.UI.Page.ProcessRequest(HttpContext context) at ASP.pages_front_closingques_default_aspx.ProcessRequest(HttpContext context) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
Stack Trace: at System.Web.HttpRequest.ValidateString(String s, String valueName, String collectionName) at System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, String collectionName) at System.Web.HttpRequest.get_Form() at System.Web.HttpRequest.get_HasForm() at System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) at System.Web.UI.Page.DeterminePostBackMode() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) at System.Web.UI.Page.ProcessRequest() at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) at System.Web.UI.Page.ProcessRequest(HttpContext context) at ASP.pages_front_closingques_default_aspx.ProcessRequest(HttpContext context) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
Source: System.Web
Message: A potentially dangerous Request.Form value was detected from the client (ctl11$lbl="...na Redacte w..."). 
```

通常，我怀疑用户一定做了一些愚蠢的事情，比如在其中放置了一个 HTML 标签，但是这种情况经常发生，并且电子邮件中没有报告任何 HTML 标签。

我知道我可以使用该指令*关闭* ，但这也是不可取的，因为我想要一些验证，而不是过度敏感的验证。`ValidateRequest``RequestValidation="false"` `Page`

有什么方法可以覆盖的默认实现`ValidateRequest`？有没有人遇到`ValidateRequest`过错误地产生错误？最后，有人知道`ValidateRequest`even 的实现是什么样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:15:17.403

由于您说误报仅来自一个页面，因此我将启用站点级别的 web.config 设置，并仅禁用此页面的页面级别验证。

然后你需要对页面上的用户输入负责：

*   对所有字段进行自己的（服务器端）验证，例如正则表达式等。
*   在写出之前对任何已知是用户输入的数据进行清理，例如使用[WPL](http://wpl.codeplex.com/)。

# media - 媒体基础编码器 MF_E_TRANSCODE_NO_MATCHING_ENCODER

> ID：11960440
> 
> 赞同：0
> 
> 时间：2012-08-14T20:43:39.450
> 
> 标签：media, h.264, encoder, wmv, ms-media-foundation

我正在尝试从 wmv 转换为 mp4。首先我需要实施我的 IMFTransform 来做到这一点吗？我需要将视频转换为 MFVideoFormat_I420 吗？

据我所知，如果您正确创建拓扑，这应该会自动处理。所以我创建了我的个人资料，显示在

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff819476%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819476%28v=vs.85%29.aspx)

但我得到一个 MF_E_TRANSCODE_NO_MATCHING_ENCODER。我有Windows 7，所以我应该有编码器。

还有谁知道该教程的源代码在哪里。它不在 SDK 示例下。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:57:03.800

您不显示代码 - 没有人知道出了什么问题。

看看这个转码示例，它带有源代码，并且完全符合您的要求：从 ASF 转码为 MP4。

[http://blogs.msdn.com/b/mf/archive/2009/12/02/mfsimpleencode.aspx](http://blogs.msdn.com/b/mf/archive/2009/12/02/mfsimpleencode.aspx)

> MFSimpleEncode.exe - 这是一个命令行工具，可将文件从一种媒体格式转码为另一种媒体格式。如果您编写自己的转码应用程序，将提供源代码作为参考。此工具使用 Windows 7 中引入的 Media Foundation 转码 API。
> 
> 例子：
> 
> 1.  将 ASF 转码为 MPEG-4：
>     
>     
>     
>     MFSimpleencode.exe –i Input.wmv –o output.mp4 –p TranscodeProfileMPEG4.xml

# java - Java 从 1.4 升级到 6

> ID：11960443
> 
> 赞同：2
> 
> 时间：2012-08-14T20:43:44.163
> 
> 标签：java, jboss, ejb, upgrade

我正在使用 Jboss 2.4.11，如果我将 JDK 从 1.4 升级到 6 jboss 服务器将如何处理应用程序？在升级过程中，我应该开始调查哪些常见的事情。我正在查看 Oracle 的文档和 stackoverflow 中与 jdk 6 向后兼容 v1.4 相关的其他帖子。我的问题更具体到使用 Jboss 服务器。该应用程序还使用 ejb 1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:00:13.623

我建议从一个一致的系统转移到另一个系统。甚至 JBoss 4 也需要 JDK1.6 的特殊版本。Java 5 将 MBeans 引入了 VM，而旧版本的 JBoss 使用 MBeans 进行配置。由于单个 VM 中不能有 MBean 服务器，因此在迁移到 java5 时这是一个大问题。由于仍然支持 EJB 1.1，我建议至少迁移到 JBoss 4.2，因为这仍然与旧版本类似，而 JBoss 7 则完全不同。

唯一能真正帮助你让迁移变得有点窒息的是测试。至少有相当多的集成测试。

# android - 递归编译目录下的所有cpp文件

> ID：11960445
> 
> 赞同：0
> 
> 时间：2012-08-14T20:44:07.653
> 
> 标签：android, makefile

我正在编写一个用于在 Android 中编译 jni 代码的 make 文件。我希望能够递归地编译驻留在特定文件夹下的所有 cpp 文件。

我怎样才能做到这一点？我尝试使用通配符命令，但没有得到我需要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:16:01.060

Android make 系统有一个 gmake 宏来处理这个问题。请参阅`doc\ANDROID-MK.html`NDK 中的文档。这是一个摘录：

```
all-subdir-makefiles
  Returns a list of Android.mk located in all sub-directories of
  the current 'my-dir' path. For example, consider the following
  hierarchy:

    sources/foo/Android.mk
    sources/foo/lib1/Android.mk
    sources/foo/lib2/Android.mk

  If sources/foo/Android.mk contains the single line:

    include $(call all-subdir-makefiles)

  Then it will include automatically sources/foo/lib1/Android.mk and
  sources/foo/lib2/Android.mk

  This function can be used to provide deep-nested source directory
  hierarchies to the build system. Note that by default, the NDK
  will only look for files in sources/*/Android.mk 
```

# jsp - 如何在jsp页面的URL中传递变量而不是值

> ID：11960449
> 
> 赞同：0
> 
> 时间：2012-08-14T20:44:33.330
> 
> 标签：jsp, url, url-parameters

我有一个字符串`var2="ASDFDE"`，其值不断变化。现在我想`variable(row_id)`在 URL 中传递它。为此我可能需要写

```
action=action.jsp?var1=var2 
```

在我检索行时的动作 jsp 页面中

```
out.println("Row_ID from previous jsp page is: "+request.getParameter("var1")); 
```

它打印出来

来自上一个 jsp 页面的 Row_ID 是：var2 而我想要的是来自上一个 jsp 页面的 Row_ID 是：ASDFDE

我怎么做？如何在不提及其值的情况下通过 URL 传递变量，以便将该字符串的当前值传递到下一个 jsp 页面。

如果不能通过 URL 完成，那么还有什么替代方法。如果有人可以用这个例子解释一下，那将非常有帮助，我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:52:59.250

查看会话如何工作

```
session.setAtribute('var1','value');
String var1=session.getAtribute('var1') ; 
```

# ruby-on-rails - ruby 更改字符串的内容

> ID：11960452
> 
> 赞同：0
> 
> 时间：2012-08-14T20:45:00.197
> 
> 标签：ruby-on-rails, ruby, regex, string

我正在做数据处理，一项任务是获取人员分布的统计信息。比如说名字为“john doe”的人，他们分布在不同的州、ca、ar 和 ny，以及不同的年龄组、20 多岁、30 多岁等。{1,2} 或 {3} 是人们的 id。

```
"john doe" => "ca:tw#2{1,2}:th#1{3};ar:tw#1{4}:fi#1{5};ny:tw#1{6};" 
```

现在，如果我想获得年龄 tw 在 ca 的 john doe 的 id，我应该如何获得它们？也许使用正则表达式？如果我想给它添加一个新的id，比如100，现在它变成了

```
"john doe" => "ca:tw#3{1,2,100}:th#1{3};ar:tw#1{4}:fi#1{5};ny:tw#1{6};" 
```

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:57:27.087

在程序中为此使用字符串是没有意义的。您可以在存储字符串时从字符串中读取数据，或者以这种方式将其写回，但您应该以易于操作的方式存储它。例如：

```
data = {
  "john doe" => {
    "ca" => {
      "tw" => [1,2],
      "th" => [3]
    },
    "ar" => {
       "tw" => [4],
       "fi" => [5]
    },
    "ny" => { 
       "tw" => [6]
    }
  }
} 
```

鉴于此，20 多岁的加利福尼亚 John Doe 的 id 为`data['john doe']['ca']['tw']`. 这种 John Doe 的数量是`data['john doe']['ca']['tw'].length`; 第一个 id 是`data['john doe']['ca']['tw'][0]`，第二个是`data['john doe']['ca']['tw'][1]`。您可以使用 ; 添加 id 100 到它`data['john doe']['ca']['tw'] << 100`。100 将是 的值`data['john doe']['ca']['tw'][2]`。

但是，如果我正在写这篇文章，我可能会使用实际数字作为年龄范围键（20、30、50），而不是那些晦涩的字母前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:18:10.977

如果你想坚持字符串操作，你可以使用正则表达式和 gsub。

这是一种方法。它可以使用一些清理（例如错误处理、重构等），但我认为它会让你开始。

```
def count(details, location, age_group)
    location_details = /#{location}(.+?);/.match(details)[1]
    age_count = /#{age_group}#(\d+)\{/.match(details)[1]
    return age_count.to_i
end

def ids(details, location, age_group)
    location_details = /#{location}(.+?);/.match(details)[1]
    age_ids = /#{age_group}#\d+\{(.+?)\}/.match(details)[1]
    return age_ids
end

def add(details, location, age_group, new_id)
    location_details = /#{location}(.+?);/.match(details)[1]
    new_count = count(details, location, age_group) + 1
    new_ids = ids(details, location, age_group) + ',' + new_id
    location_details.gsub!(/#{age_group}#\d+\{(.+?)\}/, "#{age_group}##{new_count}{#{new_ids}}")
    details.gsub!(/#{location}(.+?);/, "#{location}#{location_details};")
end 
```

您可以看到它产生了您想要的结果（至少在功能上，不确定性能）：

```
names = {"john doe" => "ca:tw#2{1,2}:th#1{3};ar:tw#1{4}:fi#1{5};ny:tw#1{6};"}
puts count(names["john doe"], 'ca', 'tw')
#=> 2
puts ids(names["john doe"], 'ca', 'tw')
#=> 1,2
names["john doe"] = add(names["john doe"], 'ca', 'tw', '100')
puts names["john doe"]
#=> ca:tw#3{1,2,100}:th#1{3};ar:tw#1{4}:fi#1{5};ny:tw#1{6}; 
```

# r - 对于 nlmer 模型，我可能做错了什么来获得“错误：s > 0 is not TRUE”？

> ID：11960453
> 
> 赞同：1
> 
> 时间：2012-04-18T13:40:49.760
> 
> 标签：r

我正在尝试学习 lme4，并且我会预先承认，我的统计学术培训是 20 多年前在 SAS（北卡罗来纳州）的家中进行的传统 ANOVA 设计。我现在有大约 4-5 年的 R 经验，但主要是使用传统的一般线性模型，所有因素都被视为固定效应。

我现在想估计一个用于淡水贻贝实验的 von Bertalanffy 生长模型的参数。壳长每年对已知个体 (ID) 测量一次，为期 4 年，因此这是一个重复测量设计。最终，我想添加一个主要处理因素和一个裂区因素。但是，目前我无法运行简化模型。我正在使用的 R 代码是：

```
VBGF <- function(Linf, k, age, age.0) {
  Linf * (1-exp(-k*((age-age.0))))
}
VBGF <- deriv(L ~ VBGF, namevec=c("Lin", "k", "age.0"), function.arg=VBGF)
mod1 <- nlmer(L ~ VBGF(Linf,k,AGE,age.0) ~ (Linf+k+age.0|ID), 
              mussels,
              start=c(50,0.1,-11),
              verbose=TRUE) 
```

我收到以下错误，并且我完全没有成功找到它的含义的参考。

```
Error: s > 0 is not TRUE 
```

这可能是我忽略了一些简单的事情，所以我提前为我的无知道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:13:12.317

导致函数错误的行`nlmer`是

```
stopifnot(length(start$fixef) > 0, s > 0, inherits(data, 
    "data.frame"), nrow(data) > 1) 
```

通过查看代码，我得到的印象`s`是列表中的名称数量`start`。在您的情况下，您提供了一个`vector`没有名称的名称，这可能会导致错误。

帮助页面说

```
start: a named list of starting values for the parameters in the
      model. (..) 
```

所以他们对它必须有名字这一事实非常具体。在示例中，您将看到它们还为参数命名。

```
## nonlinear mixed models
(nm1 <- nlmer(circumference ~ SSlogis(age, Asym, xmid, scal) ~ Asym|Tree,
             Orange, start = c(Asym = 200, xmid = 725, scal = 350))) 
```

# javascript - Backbone.js 视图在创建期间的生命周期

> ID：11960455
> 
> 赞同：7
> 
> 时间：2012-08-14T20:45:03.913
> 
> 标签：javascript, jquery, backbone.js

我是backbone.js 的新手，对前端工作也有些陌生，还没有完全弄清楚生命周期是如何工作的。

我们有一个 Django 后端，它为我们提供了 html 模板，我们基本上只将其用作框架。所有逻辑都在 Backbone 视图中处理。

我目前遇到的问题是我正在尝试绘制图形，但绘图函数没有找到基于 id 的视图，因为它在渲染函数期间不存在，但我不知道有一种方法可以在以后的阶段实现这一点。

页面完全加载后，我尝试在 Chrome 控制台中手动创建视图并且它可以工作：

```
 var main = new MainView();
   main.showChart(); 
```

风景：

```
 var ChartView = Backbone.View.extend({

     title: 'Chart',

     initialize: function() {

    // This assures that this refers to this exact view in each function
    // (except within asynchronous functions such as jquery each)
    _.bindAll(this);

    // Saving parameters given by parent
    this.index = this.options.index;

    // Retrieve the template from server
    var template = _.template(getTemplate('chart.html'));

    // Compile the template with given parameters
    var compiledTemplate = template({'title': this.title});

    // Set the compiled template to this instance's el-parameter
    this.$el.append(compiledTemplate);

    // Rendering the view
    this.render();
 },

   render: function() {

    var self = this;

    // Draw the graph when the page is ready
    $(function(){
        self.drawGraph('chart1', this.line1Data);
    });

    // Render function should always return the instance
    return this;
},

drawGraph : function(chartId, lineData) {

    Morris.Line({
          element: chartId,
          data: [
            {y: '2012', a: 100},
            {y: '2011', a: 75},
            {y: '2010', a: 50},
            {y: '2009', a: 75},
            {y: '2008', a: 50},
            {y: '2007', a: 75},
            {y: '2006', a: 100}
          ],
          xkey: 'y',
          ykeys: ['a'],
          labels: ['Series A']
    });
}, 
```

});

创建位置：

```
 var chartWidgetView = new WidgetView({'contentView': new ChartView()});
    this.initializeWidget(chartWidgetView);
    this.$el.append(chartWidgetView.el); 
```

有人可以向我澄清一下：

1.  Backbone 如何实际处理视图的创建？有哪些不同的阶段？
2.  我应该如何处理这种情况，例如，html 模板中的元素会在我的代码的哪一点存在，以便我可以为它调用绘图函数？
3.  还是我的架构存在根本缺陷？我应该尝试以完全不同的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T03:57:36.617

FWIW，我认为你在正确的轨道上。但是正如您的问题所指出的那样，您只是有一些问题。

严格来说，主干视图中并没有太多的生命周期。当您实例化一个时，它会调用初始化。除此之外，由您决定视图的生命周期。什么时候渲染。什么时候渲染的`el`会被附加到 DOM 上，什么时候会从 DOM 中移除，什么时候会被关闭和销毁。这一切都取决于您希望如何使用视图。

当然，您可以做一些事情并添加一些事情来使这个生命周期更容易理解。例如，有一些很棒的框架位于主干之上。我建议将 LayoutManager、Thorax、Chaplin 和我自己的 Marionette 作为起点。

不过，更重要的是，您所描述的插件很可能依赖于 DOM 中的 HTML 元素，然后才能运行该插件。这对于视觉插件来说很常见，因为它们经常需要捕获位置信息、css 信息、相关项目的位置等。

您可以做一些非常简单的事情来促进这些类型的插件并使其工作。我在这里写了一点博客：http: [//lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/](http://lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/) - 希望这会帮助你顺路。

具体来说，您要查看的是`onShow`方法的想法。这不是 Backbone 自己理解的方法。这是一个您必须添加到您的视图和应用程序中的概念。但好消息是这很容易。只需将方法添加到您的视图中，然后在正确的时间调用它：

```
 var AnotherView = Backbone.View.extend({
  onShow: function(){
    this.$el.layout({ appDefaultStyles: true});
  }
});

// instantiate the view
var view = new AnotherView();

// render it
view.render();

// attach it to the DOM
$("#someDiv").html(view.el);

// now that it has been attached to the DOM
// you can call your DOM-dependent plugins
view.onShow(); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:11:54.540

只是看了一眼，我认为问题在于模板在渲染之前没有从服务器返回，因此它不会出现。您可以使用 jQuery 的`deferred`对象解决此问题（请参阅[此参考资料](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)）。尝试在末尾做类似的事情`initialize`：

```
this.deferredTemplate = $el.append(compiledTemplate);

this.deferredTemplate.done(function() {
  this.render();
}); 
```

另请参阅 Derick Bailey 关于bone.js 中的延迟的文章：http: [//lostechies.com/derickbailey/2012/02/09/asynchronously-load-html-templates-for-backbone-views/](http://lostechies.com/derickbailey/2012/02/09/asynchronously-load-html-templates-for-backbone-views/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:44:21.157

您正在创建 el 但未将其附加到 DOM，我怀疑图表仅在 DOM 中搜索要附加到的元素。在调用 drawGraph 之前，您需要将其附加到 DOM。

至于 Backbone 视图的创建，我认为获得深入视图的最佳方法是简单地阅读带注释的源代码，实际上并没有那么长。

# java - 在我们的 Java 应用程序中从 Word 粘贴时出现奇怪的字符

> ID：11960456
> 
> 赞同：4
> 
> 时间：2012-08-14T20:45:05.707
> 
> 标签：java, swing, awt, clipboard

我们有一个 Java 应用程序在从 Word 粘贴到其文本字段之一时遇到字符编码问题。这只发生在 IE8 中，我假设以前的 IE 版本。我最初添加的用于解决此问题的 replaceAll Java 过滤器适用于所有最新的浏览器。IE8是问题。

问题的一个例子：

“双引号”从 Word 粘贴到文本字段中。保存条目后，引号将转换为下面的字符。每次新保存后，角色都会发生变化并且数量会增加。

第一次保存：“双引号”

第二次保存：â¢Âœdouble quotesÃ¢ÂÂ

第三次保存：ÃƒÂ¢Ã‚Â‚Âœ双引号ÃƒÂ¢Ã‚ÂÃ‚Â

第四次保存：ÃƒÂƒÃ‚Â¢ÃƒÂ‚Ã‚ÂÃƒÂ‚‚Âœ双引号ÃƒÂƒÃ‚Â¢ÃƒÂ‚Ã‚ÂÃƒÂ‚Ã‚Â

所以引号和撇号是我们主要关心的问题。我们还希望项目符号列表在此文本字段中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:51:54.323

Microsoft Word 不使用标准双引号 (")，它们使用改变其“方向”的双引号，看起来像这样：“”。格式化的双引号与普通双引号有很大不同，在放在一个普通的文本框中。

# data-mining - 如何通过 Matlab 中的函数“xlsread”在 Excel 中提取具有给定名称的行？

> ID：11960459
> 
> 赞同：0
> 
> 时间：2012-03-31T06:52:25.207
> 
> 标签：data-mining, matlab, excel

我有 100 张 Excel 财务报表表来提取选定的数据。例如，第一张表来自 A 公司，其“总资产”项目在 A10 中，但在第二张表中，“总资产”项目在 A17 中，第三张在 A12 中......

因此，每个财务报表的项目在其 Excel 表中都有不同的位置。有什么办法可以通过指定他们的名字来提取它们，例如“总资产”、“其他收入资产”等，然后我就不需要一一阅读它们的位置了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:14:43.293

基本上，您需要阅读工作表，搜索该术语，然后将该位置用作锚点。如果一旦找到该术语，格式从那里相对一致，则应该没问题。您可能会搜索[File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/)，但我什么也没找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:23:41.140

好吧 - 让*你*个人不必阅读很简单。但是您的程序将不得不这样做——因为 excel 没有这种方式的任何快捷方式。

我通常使用这样的结构：

```
[~,~,table] = xlsread('myfile.xls');
labels = table(:,1);
labels(~cellfun(@ischar,labels))={''}; % just sanitizing
index = ismember(labels,'Total assets');
table_line = table(index,:) 
```

# c# - 如何确定为接口的不同实现调用哪个存储库？

> ID：11960460
> 
> 赞同：3
> 
> 时间：2012-08-14T20:45:22.583
> 
> 标签：c#, domain-driven-design, ddd-repositories

我刚开始使用 DDD，并且对对象和存储库的接口有疑问。假设我有以下对象

```
public interface IPerson { ... }

public class Student 
{
    double gpa;
    ...
}

public class Teacher
{
    double salary; ...
} 
```

然后我也有两个存储库，例如

```
public class StudentRepository :IRepository { public void Save(Student) }

public class TeacherRepository :IRepository { public void Save(Teacher) } 
```

我的问题是，假设我有一个名为 people 的 IPerson 对象列表，有没有一种方法可以让我做类似 repository.Save(persons) 的事情？无需使用反射来确定 IPerson 实际是什么类型。

我目前有另一堂课

```
PersonRepository :IRepository 
{
     public void Save(IPerson person)
     {
          if(Person is Student)
          {
               new StudentRepository.Save(person as Student);
          }
          else if(Person is Teacher)
          { ....}
      }
} 
```

然后我可以调用 personRepository.Save(persons); 然而，这并不像是构建事物的最佳方式。我该如何改进这个设计？

谢谢

编辑：

我正在寻找的是，假设我收到一个名为 person 的 IPerson 对象。我不一定知道它是什么实现，我只想调用 repository.Save(person) 并让它调用正确的存储库。有没有办法在不使用某种带有反射的 switch 语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:52:52.060

考虑使用通用存储库

```
class Repository<T> :IRepository<T>
{
     public void Save(T entity)
     {
         ...
     }
} 
```

用法

```
IRepository<Student> repo1 = new Repository<Student>();
repo1.Save(new Student());

IRepository<Teacher> repo2 = new Repository<Teacher>();
repo2.Save(new Teacher()); 
```

* * *

接下来，您可以使用 IoC 容器和 DI 来传递存储库而不是创建它们

在*顶层*，比如在*main*方法或*global.asax中*

```
IRepository<Student> studentRepo = IoC.Current.Resolve<IRepository<Student>>(); 
```

稍后在需要保存数据的类中，传入`IRepository<Student> studentRepo`构造函数

```
class Foo
{
    private IRepository<Student> repo

    Foo(IRepository<Student> repo)
    {
        this.repo = repo;
    }

    public void Save(Student s)
    {
        repo.Save(s);
    }
} 
```

## 编辑

您可以将保存操作移至`IPerson<T>`

```
class Person<T> : IPerson<T>
{
    private IRepository<T> repo;

    Person(IRepository<T> repo)
    {
        this.repo = repo;
    }

    public void Save()
    {
        repo.Save<T>();
    }
} 
```

因此，当您派生`Teacher`并`Student`从`Person<T>`您传递通讯员`T`时，例如

```
class Student : Person<Student>
{
    private IRepository<Student> repo;

    Person(IRepository<Student> repo):base(repo)
    {
       ...
    }    
} 
```

这将使您能够在没有反射的情况下使用 List 或切换功夫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:50:27.423

您可能有一个带有 C# 泛型的方法

```
interface Repository<TEntity> where TEntity : class {

    void Save(TEntity entity);    
} 
```

但我不鼓励拥有泛型（如泛型，而不是 C# 泛型）存储库。存储库接口应该是域驱动的并且特定于您的实体。请考虑 Greg Young 的这篇[文章](http://codebetter.com/gregyoung/2009/01/16/ddd-the-generic-repository/)。

~~也不清楚为什么你有实体的接口（`IPerson`）。接口通常是在应用程序的[接缝](https://softwareengineering.stackexchange.com/a/132565/33794)处创建的。您是否计划实施不止一种 IPerson？~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T20:55:54.653

两种可能的方法。

一、特定于域类型的接口

```
interface IStudentRepository
interface ITeacherRepository
class StudentRepository : IStudentRepository
class TeacherRepository : ITeacherRepository 
```

二、通用接口

```
interface IRepository<T>
class StudentRepository : IRepository<Student>
class TeacherRepository : IRepository<Teacher> 
```

# sql - 案例陈述性能（是否可以从另一个案例陈述中引用另一个案例陈述？）

> ID：11960466
> 
> 赞同：0
> 
> 时间：2012-08-14T20:45:45.097
> 
> 标签：sql, tsql, subquery, case

我有一个关于子查询和案例陈述的问题

**我在同一个查询中有两个 case 语句：**

*   一个有一个子查询，用于确定列是否匹配。
*   我希望对方检查 [在其他检查中] 是否匹配，然后标记一个值。
*   但是，t-SQL 不允许我在第二个 case 语句中引用我的第一个字段（从 case 语句生成）。
*   这迫使我将子查询添加到我的第二个 case 语句中并取消第一个 case 语句
*   当我这样做时，我的查询从 13 秒变为 2.5 分钟
*   当我从查询中完全删除子查询时，运行需要 8 秒

**问题一：**同一个查询的后续case语句中是否可以引用case语句生成的字段？

**问题 2：**为什么当我在一个独立的 case 语句中有子查询时，我的查询只多花 5 秒，而当该子查询在一个有 4-5 个其他检查的 case 语句中时，我的查询多花 2 分钟？

**第一个案例陈述**

```
CASE WHEN (SELECT xxx.xxx from xxx) THEN 'Y' 
     END AS "Match_Ind", 
```

**第二个案例陈述**

```
CASE WHEN condition 1 = true THEN 'cond1'
    WHEN condition 2 = true THEN 'cond2'
    WHEN Match_Ind = 'Y' THEN 'matched'
    END AS "Match Detail" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:52:45.767

您是否尝试过以下方式：

```
select case Bar1 ... end as Bar2, ...
  from ( select case Foo1 ... end as Bar1, ... from ... ) 
```

它可以根据`JOIN`需要与其他表一起编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:54:48.263

您应该考虑发布您的完整查询，但如果您想`CASE`在另一个`CASE`语句中引用第一个查询的结果，那么您可以将其包装为`SELECT`类似于以下内容：

```
select 
    CASE 
        WHEN condition 1 = true THEN 'cond1'
        WHEN condition 2 = true THEN 'cond2'
        WHEN Match_Ind = 'Y' THEN 'matched'
    END AS Match Detail
from 
(
    SELECT CASE 
        WHEN conditionHere -- (SELECT xxx.xxx from xxx)
        THEN 'Y' 
        END AS Match_Ind,
        othercols
    from yourtable
) x 
```

# excel - QueryTables.Add 更改行高

> ID：11960468
> 
> 赞同：0
> 
> 时间：2012-08-14T20:45:53.063
> 
> 标签：excel, vba

我有以下..

```
With ActiveSheet.QueryTables.Add(Connection:="URL;" & qurlname, Destination:=DataSheet.Range(Cells(row_stock + iMax, 29), Cells(row_stock + 199, 29)))
    .BackgroundQuery = True
    .TablesOnlyFromHTML = False
    .Refresh BackgroundQuery:=False
    .SaveData = True
End With 
```

执行后，有问题的行的高度从最初的 15 修改为 11.25，显然是所选字体的最小值。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:39:49.283

我不知道为什么 querytables 会更改行高或如何防止它，但我确实设法更改了一些东西，以便将 querytables 结果放在不同的工作表中。将该工作表中的单元格复制到主工作表使行高保持不变。

# c# - Parallel.For - 异常行号似乎错误

> ID：11960470
> 
> 赞同：1
> 
> 时间：2012-08-14T20:46:17.080
> 
> 标签：c#, task-parallel-library

运行此程序时，有时异常有一个堆栈跟踪，它起源于以“throw new Exception...”开头的行，但有时它有一个堆栈跟踪，起源于 Parallel.For 委托的第一个大括号。为什么会有那个行号？

```
using System.Collections.Concurrent;
using System.Threading.Tasks;
using System;
public class J
{
    public static void Main()
    {
        ConcurrentDictionary<string, int> exceptions = new ConcurrentDictionary<string, int>();

        Parallel.For(0, 10, (i, s) =>
        { //this is line 55
            try
            {
                throw new Exception("blah"); //line 58
            }
            catch (Exception e)
            {
                string estring = e.ToString();
                exceptions.TryAdd(estring, 0);
                lock (exceptions)
                {
                    exceptions[estring] += 1;
                }
            }
        });

        foreach (var entry in exceptions)
        {
            Console.WriteLine("==============" + entry.Value + " times");
            Console.WriteLine(entry.Key);
        }
    }
} 
```

这是奇怪的输出

```
==============3 times
System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 55
==============7 times
System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
Press any key to continue . . . 
```

我修改了代码以在 e.ToString() 之前包含 System.Threading.Thread.CurrentThread.ManagedThreadId。我必须运行它大约 20 次才能重现它，在第 55 行生成异常。从下面的输出中，我可以看到 Goz 是对的；它在一些并行任务中使用了主线程（线程 ID 1），但是它从主线程获得了两次正确的行号，然后从主线程获得了一次错误的行号。所以还是很神秘。

```
==============3 times
5 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
==============1 times
6 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
==============2 times
1 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
==============1 times
1 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 55
==============2 times
4 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
==============1 times
3 - System.Exception: blah
   at J.<>c__DisplayClass5.<Main>b__4(Int32 i, ParallelLoopState s) in Program.cs:line 58
Press any key to continue . . . 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:49:45.230

Parallel.For 是一个奇怪的调试对象。您看到的行号是指 lambda 块本身（即它发生在此处的某处）。

我曾经设法解决的最好的问题是行号取决于哪个线程抛出异常。从主线程抛出异常似乎是正确的......

会喜欢一个比这更好的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:50:01.833

`.pdb`如果文件与 .dll 不同步，则可以关闭断点。尝试清洁并重建。如果这不起作用，请手动删除 Windows 资源管理器中的文件并重新构建。

# jquery - 动态创建的复选框的事件处理程序不起作用

> ID：11960471
> 
> 赞同：0
> 
> 时间：2012-08-14T20:46:25.933
> 
> 标签：jquery

我想对所有五个复选框使用我自己的事件处理程序。我在代码中创建了一个复选框，然后将其克隆了四次。

我对这段代码的问题：我可以选中和取消选中第一个复选框（代码中的复选框）。但是第一个复选框不使用我的事件处理程序，而是使用它自己的（我在 "$('input:checkbox').live('click', function (event) {..." 代码中设置了一个断点，它是如果我单击第一个复选框，则永远不会到达。其他四个框到达我的事件处理程序，但如果我只单击一个，则所有四个框都会被选中。如果第一个框（代码中的那个）被选中，我只能选中四个框如果第一个框未选中，我只能取消选中它们。似乎有很多我不明白的副作用。这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1 /DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script>
</head>
<body onfocus="readvalues()">
<div id="mypage" data-role="page" data-theme="a">
<script>
$(document).ready(function () {
   $('input:checkbox').live('click', function (event) {       
    event.preventDefault();
    event.stopPropagation();
    if ($(this).prop('checked')) {
         $(this).prop('checked', false);
         //$(this).removeAttr('checked');
         $(this).checkboxradio("refresh");
         //$(this).attr("checked",false).checkboxradio("refresh");
     } else {
         $(this).prop('checked', true);    
         //$(this).attr('checked', true);
         $(this).checkboxradio("refresh");
     }
     //$(this).prop('checked', true);    
     //$(this).attr('checked', true).checkboxradio('refresh');
     $(this).checkboxradio("refresh");
     //$(selector).trigger('create');    
   });
});    
</script>

  <div data-role="fieldcontain" id="fieldcontainid">
    <fieldset data-role="controlgroup" id="fieldsetid">
       <div id="sample">
       <input id="checkboxsample" class="custom" type="checkbox" data-iconpos="left" name="checkboxsample">
       <label id="labelsample" for="checkboxsample">Test</label>
       </div>
       <div id="existing"></div>
    </fieldset>
  </div>
<script>
readvalues = function()
{

    var existing = document.getElementById('existing');
    existing.textContent = '';

    for (i=0; i<=3; i++)  
    {  
        var clonecheckbox = $("#sample").clone(false);
        $("#existing").append(clonecheckbox);
        clonecheckbox.attr("id",i.toString());
        $("#"+i.toString()).children().children().eq(0).attr("id","cb"+i.toString());
        $("#"+i.toString()).children().children().eq(0).attr("name","cb"+i.toString());

        $("#"+i.toString()).children().children().eq(1).attr("id","label"+i.toString());
        $("#"+i.toString()).children().children().eq(1).attr("for","cb"+i.toString());
    }
}
</script>
</div>
</body>
</html> 
```

为了使用我自己的事件处理程序四个所有五个复选框，我需要在我的代码中做哪些更改？我检查/取消选中复选框的事件处理是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:49:32.373

`live`不推荐使用方法和`:checkbox`选择器，请尝试使用该`on`方法，还请注意，当您克隆输入时，您应该`IDs`在附加它们之前更改它们，具有多个元素的 ID 会使您的标记无效，一种解决方案是使用类而不是 ID。

```
$(document).on('change', 'input[type="checkbox"]', function(){
  // ...
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:51:19.327

将代码移动到函数并将其绑定到原始代码：

```
$(document).ready(function () {
   $('input:checkbox').on('click', doTheWork);
}); 

function doTheWork(event)   {
        event.preventDefault();
        event.stopPropagation();
        if ($(this).prop('checked')) {
             $(this).prop('checked', false);
             //$(this).removeAttr('checked');
             $(this).checkboxradio("refresh");
             //$(this).attr("checked",false).checkboxradio("refresh");
         } else {
             $(this).prop('checked', true);    
             //$(this).attr('checked', true);
             $(this).checkboxradio("refresh");
         }
         //$(this).prop('checked', true);    
         //$(this).attr('checked', true).checkboxradio('refresh');
         $(this).checkboxradio("refresh");
         //$(selector).trigger('create');    
       } 
```

然后，当您创建复选框时，只需执行以下操作：

```
clonecheckbox.click(doTheWork); 
```

# java - （Jasper 报告）- 如果文本内容不适合工作表，则分页

> ID：11960476
> 
> 赞同：1
> 
> 时间：2012-08-14T20:47:07.657
> 
> 标签：java, jasper-reports, report

我正在添加指向使用虚构信息生成[的报告的链接](https://docs.google.com/open?id=0B5IUExS3QCR9TFZOczNwRV9rS0U)，以防有人想查看演示文稿。

从第 5 页可以看出，打印了三个文本，但第三个不完全适合。其余部分显示在第 6 页。我需要将其完整打印在第 6 页（**注意：**破折号用于划分字段的末尾）。

发现: `isStretchWithOverflow`,`isPrintWhenDetailOverflows`和, 就像 `splitType`把乐队一样`Prevent`。但这并没有按预期工作。

还有其他提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:27:31.577

`splitType`我通过设置为解决了这个问题`Prevent`。

# java - JPA CriteriaQuery 需要 begin() 和 commit() 吗？

> ID：11960477
> 
> 赞同：1
> 
> 时间：2012-08-14T20:47:18.123
> 
> 标签：java, jakarta-ee, jpa, commit, criteriaquery

关于 JPA 的基于 CriteriaQuery 的查询，我有一个简单的问题要问？我在 Java EE 示例 (http://docs.oracle.com/javaee/6/tutorial/doc/giqsq.html) 中注意到

```
entityManager.getTransaction().begin() 
```

和

```
entityManager.getTransaction().commit() 
```

不使用。

结果，这些操作在进行查询时是否由 CriteriaQuery 隐式处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:25:11.087

如果您只使用没有 EJB 的 JPA，那么您需要像自己一样控制事务，这意味着编写 transation().begin()、commit() 等。但是您使用 JPA 和 EJB 就像 oracle 的教程一样，您不需要在方法中编写 transation().begin()、commit() 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T05:29:34.237

Criteria 对事务没有任何作用，普通的 JPQL 查询或命名查询也没有。事务是单独控制的，您可以将操作（例如查询）作为事务性或非事务性执行。显然，Java EE 通常会为您启用事务，而在 Java SE 中，您必须自己放置它们——但这与您使用的任何查询机制是分开的。

# c - 插入排序什么都不做

> ID：11960484
> 
> 赞同：0
> 
> 时间：2012-08-14T20:48:14.490
> 
> 标签：c, windows, algorithm, sorting, lcc-win32

我昨天写了下面的插入排序（我3天前开始学习C）。出于某种原因，排序不会修改数组**AT ALL**。

```
#include <stdio.h>
int *insert(int arr[], int index, int item);
int *isort(int arr[]);
int main() {
    int a[17] = {1, 2, 9, 5, 3, 2, 1, 6, 5, 9, 0, 1, 3, 4, 2, 3, 4};
    int *b = isort(a);
    for (int i = 0; i < 17; i += 1) {
        printf("%d ", b[i]);
    }
    return 0;
}
int *insert(int arr[], int index, int item) {
    --index;
    while (index >= 0 && item < arr[index]) {
        arr[index + 1] = arr[index];
        --index;
    }
    arr[index + 1] = item;
    return arr;
}
int *isort(int arr[]) {
    for (int i = 1; i < sizeof(arr) - 1; i++) {
        arr = insert(arr, i, arr[i]);
    }
    return arr;
} 
```

我想它可能是我的编译器，因为我正在运行一个非 unix 机器上的编译器：lcc-win，但我不确定。我在这里缺少一些基本的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:49:36.697

```
int *isort(int arr[]) {
    for (int i = 1; i < sizeof(arr) - 1; i++) {
        arr = insert(arr, i, arr[i]);
    }
    return arr;
} 
```

在这个函数`sizeof(arr)`中实际上返回的是指针的大小而不是数组的大小。

在 C 中，一个特殊规则说数组参数实际上被调整为相应指针类型的参数。

那是：

```
int *isort(int arr[]) { /* ... */ } 
```

相当于：

```
int *isort(int *arr) { /* ... */ } 
```

要解决此问题，请在函数中添加一个采用数组大小​​的新参数：

```
int *isort(int arr[], size_t size) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:15:52.997

如前所述，第一个问题是 isort 函数在指针上使用 sizeof 运算符。乍一看，C 处理数组的方式有点奇怪。数组的名称是指向其第一个元素的指针。因此，当您像这样调用 isort 时：

```
int *b = isort(a); 
```

您只是将指向数组的指针推入堆栈。在isot的定义中，

```
int *isort(int arr[]) 
```

将 arr 声明为指向 int 的指针，就像

```
int *isort(int *arr) 
```

C 在这方面更加令人困惑：如果您说过：

```
int *isort(int arr[17]) 
```

arr 变量**仍然**只是一个指向 int 的指针……这里的“17”被丢弃了！即使使用这种语法，sizeof(arr) 仍然是指向 int 的指针的大小。

在 32 位系统 (ILP32) 上，sizeof(arr) 将始终为 4，无论数组有多大。

因此，需要将数组的大小传递给 isort。一个很好的通用方法是定义这样的宏：

```
#define NITEMS(arr) (sizeof(arr)/sizeof(arr[0])) 
```

这将计算任何类型数组中的元素数。

您的下一个问题更多的是一种风格，而不是实际的错误：

```
arr = insert(arr, i, arr[i]); 
```

这将调用插入函数并引用“arr”。通过该引用修改数组，然后返回指向该数组的指针。它总是和你一开始发送的指针相同，所以这个赋值实际上什么也没做，没有害处。就像我说的，风格问题，而不是代码错误。

最后一个问题是您的 isort 函数会短暂停止（在您纠正 sizeof 问题之后），因为您从 1 变为 sizeof-1。这是一个固定版本：

```
#include <stdio.h>
#define NITEMS(arr) (sizeof(arr)/sizeof(arr[0]))

int *insert(int arr[], int index, int item);
int *isort(int arr[], size_t nitems);
int main() {
    int a[17] = {1, 2, 9, 5, 3, 2, 1, 6, 5, 9, 0, 1, 3, 4, 2, 3, 4};
    int *b = isort(a, NITEMS(a));
    for (int i = 0; i < NITEMS(a); i += 1) {
        printf("%d ", b[i]);
    }
    printf("\n");
    return 0;
}

int *insert(int arr[], int index, int item) {
    --index;
    while (index >= 0 && item < arr[index]) {
        arr[index + 1] = arr[index];
        --index;
    }
    arr[index + 1] = item;
    return arr;
}

int *isort(int arr[], size_t nitems) {
    for (int i = 1; i < nitems; i++) {
        insert(arr, i, arr[i]);
    }
    return arr;
} 
```

# c# - WCF 用户名密码验证器缓存

> ID：11960487
> 
> 赞同：2
> 
> 时间：2012-08-14T20:48:24.240
> 
> 标签：c#, wcf, authentication, .net-4.0

我浏览了互联网，但没有运气，我试图找到一种合适的方法在服务端缓存用户名和密码令牌，因此每次连接到服务时，我都不必创建数据库连接。

这就是我想要实现的目标：

```
public class ServiceAuth : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        var user = Repository.Authenticate(userName, password);

        if (user != null)
        {
            // Perform some secure caching
        }
        else
            throw new FaultException("Login Failed");
    }
} 
```

使用 UserNamePasswordValidator 在 C# 4.0 WCF 中验证凭据时是否可以使用缓存？

如果是这样，有人可以给我一些关于如何实现这一目标的线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:26:40.800

我想要求超级用户不要删除答案，因为这可以帮助其他想要找到解决问题的人..！

我已经使用键值对字典集合进行缓存实现了以下 CUSTOM 安全管理器。希望这可以帮助

```
public class SecurityManager : UserNamePasswordValidator
{
    //cacheCredentials stores username and password
    static Dictionary<string, string> cacheCredentials = new Dictionary<string, string>();
    //cacheTimes stores username and time that username added to dictionary.
    static Dictionary<string, DateTime> cacheTimes = new Dictionary<string, DateTime>();

    public override void Validate(string userName, string password)
    {
        if (userName == null || password == null)
        {
            throw new ArgumentNullException();
        }
        if (cacheCredentials.ContainsKey(userName))
        {
            if ((cacheCredentials[userName] == password) && ((DateTime.Now - cacheTimes[userName]) < TimeSpan.FromSeconds(30)))// &&  timespan < 30 sec - TODO
                return;
            else
                cacheCredentials.Clear();
        }
        if (Membership.ValidateUser(userName, password))
        {
            //cache usename(key) and password(value)
            cacheCredentials.Add(userName, password);
            //cache username(key), time that username added to dictionary 
            cacheTimes.Add(userName, DateTime.Now);
            return;
        }
        throw new FaultException("Authentication failed for the user");       
    }
} 
```

# windows-8 - 有任何 WinRT iCommand/CommandBinding 实施示例吗？

> ID：11960488
> 
> 赞同：15
> 
> 时间：2012-08-14T20:48:42.213
> 
> 标签：windows-8, winrt-xaml

将命令抽象到视图模型中是 XAML/MVVM 项目的宝贵实践。我明白了。而且，我在 WinRT 中看到了 ICommand；但是，我们如何实施呢？我还没有找到真正有效的样本。有人知道吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T05:23:14.920

我一直最喜欢的是 Microsoft 模式和实践团队提供的 DelegateCommand。它允许您创建一个键入的命令：

```
MyCommand = new DelegateCommand<MyEntity>(OnExecute);
...
private void OnExecute(MyEntity entity)
{...} 
```

它还提供了一种引发 CanExecuteChanged 事件的方法（禁用/启用命令）

```
MyCommand.RaiseCanExecuteChanged(); 
```

这是代码：

```
public class DelegateCommand<T> : ICommand
{
    private readonly Func<T, bool> _canExecuteMethod;
    private readonly Action<T> _executeMethod;

    #region Constructors

    public DelegateCommand(Action<T> executeMethod)
        : this(executeMethod, null)
    {
    }

    public DelegateCommand(Action<T> executeMethod, Func<T, bool> canExecuteMethod)
    {
        _executeMethod = executeMethod;
        _canExecuteMethod = canExecuteMethod;
    }

    #endregion Constructors

    #region ICommand Members

    public event EventHandler CanExecuteChanged;

    bool ICommand.CanExecute(object parameter)
    {
        try
        {
            return CanExecute((T)parameter);
        }
        catch { return false; }
    }

    void ICommand.Execute(object parameter)
    {
        Execute((T)parameter);
    }

    #endregion ICommand Members

    #region Public Methods

    public bool CanExecute(T parameter)
    {
        return ((_canExecuteMethod == null) || _canExecuteMethod(parameter));
    }

    public void Execute(T parameter)
    {
        if (_executeMethod != null)
        {
            _executeMethod(parameter);
        }
    }

    public void RaiseCanExecuteChanged()
    {
        OnCanExecuteChanged(EventArgs.Empty);
    }

    #endregion Public Methods

    #region Protected Methods

    protected virtual void OnCanExecuteChanged(EventArgs e)
    {
        var handler = CanExecuteChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }

    #endregion Protected Methods
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:14:24.793

查看[RelayCommand](https://github.com/MyToolkit/MyToolkit/blob/master/src/MyToolkit/Command/RelayCommand.cs)类（仅 METRO 代码）。该`NotifyPropertyChanged`课程可以在[这里](https://github.com/MyToolkit/MyToolkit/blob/master/src/MyToolkit/Model/ObservableObject.cs)找到。该类`NotifyPropertyChanged`仅用于允许绑定`CanExecute`并使用`RaiseCanExecuteChanged`.

原始的中继命令类可以在[这里找到](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T02:24:05.097

不幸的是，似乎没有为您实现它的本机类。如果您想自己实现该接口并不太复杂，并且流行的**MVVM Lite**工具包包含其自己的**RelayCommand**版本。您可以通过右键单击 References 并选择“Manage NuGet Packages”将 MVVM Lite 添加到您的项目中。如果您没有此选项，请在**Tools -> Extensions and Updates**下启用 Nuget 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T04:36:12.883

我一直在寻找 XAML-MVVM 命令的最小端到端实现，但还没有找到。

因此，按照#Rico 的回答，我最终得到了以下作为最小 RelayCommand 的工作。我在一个大型项目中使用了类似的最小版本。

```
public class RelayCommand : System.Windows.Input.ICommand {

    readonly Action<object> execute; 

    public RelayCommand(Action<object> execute) {
        this.execute = execute;
    }

    public bool CanExecute(object parameter) {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter) {
        this.execute(parameter);
    }
} 
```

`CanExecute`较大的 RelayCommand 类似乎提供了对and的更多控制`CanExecuteChanged`，但您不需要它来开始 - 而且您可能根本不需要它。

要在视图模型中使用它：

```
class ViewModel : INotifyPropertyChanged {

    << ... snip VM properties and notifications ...>>

    public RelayCommand DoSomethingCommand {
        get {
            return new RelayCommand(param => {
                this.DoSomething(param as AType);
                Debug.WriteLine("Command Executed");
            });
        }

    }
} 
```

（我们不需要命令的 INotifyPropertyChanged，但任何视图模型通常都会实现它。）

最后，XAML...

```
 <Grid>
        <!-- Set the data context here, for illustration. -->
        <Grid.DataContext>
            <local:ViewModel/>
        </Grid.DataContext>
        <!-- A sample control bind to a property -->
        <TextBlock 
             Text="{Binding AProp}"/>
        <!-- Bind a command -->
        <Button Command="{Binding DoSomethingCommand}" CommandParameter="foo">Change!</Button>
    </Grid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-29T20:57:20.197

[我在https://code.msdn.microsoft.com/windowsapps/Working-with-ICommand-690ba1d4](https://code.msdn.microsoft.com/windowsapps/Working-with-ICommand-690ba1d4)找到了这个非常好的示例

```
<Page.Resources> 
        <local:MyCommandsCollection x:Key="MyCommands" /> 
</Page.Resources> 

   <Button Width="280" 
            Height="59" 
            Margin="513,280,0,0" 
            HorizontalAlignment="Left" 
            VerticalAlignment="Top" 
            Command="{Binding MyFirstCommand}" 
            CommandParameter="{Binding Text, 
                                       ElementName=myTextBox}" 
            Content="Execute Command" /> 

public class MyCommandsCollection 
{ 
    public MyCommand MyFirstCommand 
    { 
        get { return new MyCommand(); } 
    } 
} 

public class MyCommand : ICommand 
    { 
        public bool CanExecute(object parameter) 
        { 
            return true; 
        } 

        public event EventHandler CanExecuteChanged; 

        public async void Execute(object parameter) 
        { 
            MessageDialog message = new MessageDialog( 
                "The command is executing, the value of the TextBox is " + parameter as String); 
            await message.ShowAsync(); 
        } 
    } 
```

我用 x:Bind 试过了，效果很好。我所需要的只是在我的 ViewModel 中公开一个属性，该属性返回“MyCommand”类的一个新实例，这一切都很好。

由于我在我的 XAML 中设置 DataContext，我不需要弄乱任何“MyCommandCollection”的东西。耶编译绑定。

# r - 无法使用solve（）或ginv（）反转R中的矩阵

> ID：11960489
> 
> 赞同：1
> 
> 时间：2012-06-14T18:43:54.153
> 
> 标签：r, optimization, matrix, matrix-inverse

### tl/dr

有谁知道允许使用 tikhonov 正则化求解线性系统的函数或例程？更一般地说，正确求解线性系统的函数或例程，无论是条件良好还是病态？

### 细节

我在使用 R 标准函数 solve 和 ginv 找到正确的逆矩阵时遇到了很大的问题。我不明白为什么 solve 或 ginv 无法正确反转某些矩阵。例如，反转以下矩阵 $X$ $(4 \times 4)$：

```
[r1] 112    114.02675   -99.0725    48.21424
[r2] 114.02675  116.09108   -100.91021  49.01754
[r3] -99.0725   -100.91021  89.97304    -39.267
[r4] 48.21424   49.01754    -39.267         26.11804 
```

给出了这个奇怪的结果 $X^{-1}$ ：

```
[r1]  7581993.46   -7459378.79  -46534.6234 -66885.6052
[r2] -7459378.79   7338753.44   45787.7223  65800.3842
[r3] -46534.62     45787.72 290.6085    407.4297
[r4]  66885.61     65800.38 407.4297    592.1243 
```

MS Excel 提供了这个是正确的：

```
[r1] 290607.5736   -285895.9835 -1773.086548    -2570.2266
[r2] -285895.9835  281267.2032  1749.988341 2524.997062
[r3] -1773.086548  1749.988341  15.81951395 12.59978592
[r4] -2570.2266    2524.997062  12.59978592 24.81554691 
```

我知道这是正确的解决方案，因为 $XX^{-1}$ 给出了单位矩阵（不是用solve或ginv计算的逆矩阵）。

1.  有人有解释吗？

2.  如何计算正确的逆矩阵`R`？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-13T02:30:02.557

我刚看到这个问题。让我分享一些信息：

我使用 Microsoft R open v. 4.0。看看我的结果：

```
> a = c(112,    114.02675,   -99.0725,    48.21424,
+ 114.02675,  116.09108,   -100.91021,  49.01754,
+ -99.0725,   -100.91021,  89.97304,    -39.267,
+ 48.21424,   49.01754,    -39.267,         26.11804)
> 
> matA = matrix(a, ncol=4)
> matA
          [,1]       [,2]       [,3]      [,4]
[1,] 112.00000  114.02675  -99.07250  48.21424
[2,] 114.02675  116.09108 -100.91021  49.01754
[3,] -99.07250 -100.91021   89.97304 -39.26700
[4,]  48.21424   49.01754  -39.26700  26.11804
> 
> solve(matA)
            [,1]        [,2]        [,3]        [,4]
[1,]  290607.572 -285895.982 -1773.08654 -2570.22659
[2,] -285895.982  281267.202  1749.98833  2524.99705
[3,]   -1773.087    1749.988    15.81951    12.59979
[4,]   -2570.227    2524.997    12.59979    24.81555 
```

# c++ - 是否可以调试打印当前函数的调用者？

> ID：11960493
> 
> 赞同：1
> 
> 时间：2012-08-14T20:48:49.197
> 
> 标签：c++, debugging, callstack

> **可能重复：**
> [打印 C 或 C++ 中的调用堆栈](https://stackoverflow.com/questions/3899870/print-call-stack-in-c-or-c)

通常在调试代码时，我需要弄清楚谁在调用我在其中放置了调试语句的函数。我知道它`__FUNCTION__`的计算结果是当前函数的名称，但是是否有类似的东西会给我被调用者的名称? 或者也许打印出调用堆栈？

信息必须可用。如果我输入一个会发生段错误的断言或代码，我会得到一个显示整个调用堆栈的堆栈跟踪。堆栈跟踪打印代码从哪里获得该信息？

如果您无法生成与平台无关的解决方案，那么可以在 x86_64 Ubuntu 12.04 上编译的东西`gcc`就可以了。为其他平台提供解决方案的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:00:38.810

这取决于操作系统。

在 Linux 和 gcc 上，使用`backtrace(3)`. 对于 Windows，请参阅[这个 SO question](https://stackoverflow.com/questions/5693192/win32-backtrace-from-c-code)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:54:28.083

堆栈跟踪通过遍历调用堆栈以查找返回地址并遍历可执行文件以查找返回地址返回到哪个函数来获取该信息。那里没有便携的东西。没有找到来电者的一​​般方法。您可以做的最好的事情是在调试器下运行并设置断点以在调试代码触发时触发。

此外，`__FUNCTION__`它不是标准 C++ 的一部分。在我看来，这是一个 GNU 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:08:07.413

它不会给你调用者的*名字*，但内部函数`_ReturnAddress()`通常会返回一个指向调用者的指针。

# sql-server - 如果根据字段中的日期和值未找到所有记录，则 Sql 返回 false

> ID：11960498
> 
> 赞同：0
> 
> 时间：2012-08-14T20:49:03.953
> 
> 标签：sql-server

对不起，如果这不是太清楚，但很难总结。

`Holiday`具有一个名为Table的字段的`hDate` 表`TimeSheet``tsDate,Code`

样本数据

```
 Holiday
   7/4/2012
   12/24/2012
   12/25/2012
   12/26/2012 
```

样本数据

```
 TimeSheet
   12/27/2012,W
   12/24/2012,H
   12/25/2012,W 
```

我需要根据日期范围验证 Holiday 表中日期范围之间的每条记录是否存在于 Timesheet 表中，并且它们具有为 Code 输入的 H 值

因此，如果传入的日期范围是 12/24-12/30，那么结果应该为空，因为 12/26 的时间表中不存在任何数据，并且 12/25 中有一个代码 W。所以基本上我需要一个存在查询来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:25:53.737

您可以尝试以下 SQL。它从左外连接计算代码 <> 'H' 和 tsDate = null 的数量。如果计数 > 0，则返回 false。

```
DECLARE @Holiday TABLE
(
    hDate DATETIME NOT NULL
)

DECLARE @TimeSheet TABLE
(
    tsDate DATETIME, 
    Code NCHAR(1)
)

INSERT INTO @Holiday (hDate)
VALUES ('2012-07-04'), ('2012-12-24'), ('2012-12-25'), ('2012-12-26')

INSERT INTO @TimeSheet (tsDate, Code)
VALUES ('2012-12-27', 'W'), ('2012-12-24', 'H'), ('2012-12-25', 'W')

DECLARE @StartDate DATETIME = '2012-12-24'
DECLARE @EndDate DATETIME = '2012-12-30'

SELECT 
    CASE WHEN COUNT(1) = 0 THEN 'TRUE' ELSE 'FALSE' END AS 'BooleanResult'
FROM
    (
        SELECT hDate 
        FROM @Holiday 
        WHERE hDate BETWEEN @StartDate AND @EndDate
    ) H 
    LEFT JOIN @TimeSheet TS
    ON TS.tsDate = H.hDate
WHERE 
    TS.Code != 'H' OR TS.tsDate IS NULL and 'H' not in (select doecode from timesheet 
where timesheet.tsdate = TS.tsDate 
```

# cakephp - CakePHP 发现没有正确返回 - 缺少模型名称

> ID：11960500
> 
> 赞同：1
> 
> 时间：2012-08-14T20:49:21.150
> 
> 标签：cakephp, cakephp-2.0

在模型上执行查找后，我希望结果是格式

```
Array
(
    [0] => Array
        (
            [ModelName] => Array
                (
                    [id] => 83
                    [field1] => value1
                    [field2] => value2
                    [field3] => value3
                )    
        )
) 
```

但是，我似乎得到的是

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [id] => 83
                    [field1] => value1
                    [field2] => value2
                    [field3] => value3
                )

        )
) 
```

请注意缺少的型号名称。

自从迁移到我现在可以完全控制的配置非常糟糕的 VPS 后，我才遇到这个问题。

我的问题是，我想不出任何会导致这个问题的东西。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:00:55.363

[结果与此](https://stackoverflow.com/questions/1408663/cakephp-can-model-findall-return-results-without-model-name)非常相似。

问题再次出在过时的 pdo_mysql 版本上。

这可以通过运行来检查

`strings -f pdo_mysql.so | grep ': table'`

如果没有结果，那么 pdo_mysql 很可能是由于安装过时的，例如

```
pecl install pdo_mysql 
```

我的修复很简单

```
yum install php53-mysql 
```

我希望这对某人有所帮助。

# java - Android中的动态与XML布局？

> ID：11960501
> 
> 赞同：17
> 
> 时间：2012-08-14T20:49:23.847
> 
> 标签：java, android, android-layout, netbeans-7, android-xml

我是 Android 开发的新手，并且已经开始创建自己的 UI。我看到您可以像这样动态创建它（[动态布局](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);
    TextView tv = new TextView(this);
    tv.setText("Name");
    ll.addView(tv);
    EditText et = new EditText(this);
    ll.addView(et);
    Button b = new Button(this);
    b.setText("Ok");
    ll.addView(b);
} 
```

但我也看到 netbeans 有一个文件*Resources->layout->main.xml*。因此，您可以为 UI 创建 XML 布局（[声明 XML 布局](http://developer.android.com/guide/topics/ui/declaring-layout.html)）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Hello World, AndroidTest"
    />
</LinearLayout> 
```

所以我的问题是我应该使用哪个？Android 开发中动态与 XML 布局的推荐和优缺点是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-14T20:59:35.493

使用布局 XML 资源文件。

首先，资源集（例如，`res/layout-land/`除了 `res/layout/`Java 中的等价物是一组讨厌的`if`or`switch`语句。

其次，有一些工具可以帮助您成功创建这些布局资源。即使 Eclipse 的拖放式 GUI 构建不是您喜欢的（例如，您使用的是 NetBeans），Lint 也会帮助您指出布局中的缺陷，它只会指出布局中的一个子集。等效的 Java 代码。

第三，它往往更简洁，因此如果您手动输入这些内容，XML 将减少输入。

第四，您将找到的所有示例代码中大约 98% 将使用布局 XML 文件，并且您在 StackOverflow（和其他支持资源）上找到的所有 UI 答案中大约 98% 将假定您使用布局 XML 文件。虽然您可以自由地避免使用 XML（也许您在小时候受到尖括号的攻击或其他什么），但与大多数 Android 开发人员所做的相比，您将逆流而上，与潮流抗争。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T21:00:46.353

我建议您在项目的大部分部分使用 xml 布局。您可以将布局放在不同的文件夹中，例如：

layout-land -> 用于横向

布局端口 -> 用于纵向

layout-v15 -> 安卓版本 >= 15

layout-sw600dp -> 用于特定宽度的屏幕

使用这些资源分类器，您可以快速地在布局中拥有多种类型，以支持各种 Android 设备，而无需编写大量额外代码。

在我看来，这是使用 xml 资源与动态创建所有布局相比的最大优势。有关更多信息，请参阅[有关资源的此链接](http://developer.android.com/guide/topics/resources/available-resources.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:11:52.143

基于 XML 的布局取决于强制转换，因为您必须使用：

```
 Button myButton = (Button) findViewById(R.id.my_button); 
```

所以你有一个铸造和耗时的 XML 搜索。当您使用 UI 的动态创建时，管理它要困难得多。你必须组织一切，但你不需要投那么多。

我更喜欢第三种解决方案 - [RoboGuice](http://code.google.com/p/roboguice/) 它使用依赖注入模式，你不关心强制转换并且创建应用程序更快。也更灵活。考虑您有一个普通的文本字段。然后您要将其更改为文本区域。在 RoboGuice 中，只需进行 2 次更改（使用更改除外）。使用 Context 也更快（Context 是非常消耗内存的对象，存储对它的引用是编码错误的标志）。

所以我的建议是：使用 XML，因为它管理 UI 很简单。使用[RoboGuice](http://code.google.com/p/roboguice/)快速编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T21:02:03.290

好吧，我在 xml 中声明 mu UI（99% 的时间），因为这样工作对我来说更容易。

分离 UI 和 Code 逻辑是一种很好的做法，XML 更容易描述 UI（考虑使用[这个旧的设计](http://www.droiddraw.org/)器或切换到 Eclipse IDE 和它的设计器）

此外，一个 android 应用程序可以有多种设计（用于手机和平板电脑），用 Java 手动编码会很痛苦

简单地说，使用 XML

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T21:02:16.880

在大多数情况下，我更喜欢 XML，因为它允许您将内容与代码分开，并且编辑起来更简洁，尤其是当项目变得很大并且您忘记了前段时间编写的内容时。使用 XML 和样式也可以让您在整个应用程序中获得一致的外观和感觉。它还允许布局系统处理繁重的工作，并且您最终不会得到引用活动上下文的视图。（这很糟糕，当您旋转并重新创建活动时）。总体而言，它往往是一个更快的选择，如果您可以在 XML 中做到这一点，那么它比我喜欢的要快。大多数 android 架构/教科书似乎也遵循此设置。（参见 Android 开发文档，CommonsWare 的 Mark Murphy）

Dynamic 的好处是它能够以更高级的方式自定义一些东西，并且可以相当容易地修复一些布局问题。除此之外还有一些好处，但我更喜欢先用 XML 做所有事情，如果不能做或者很难，那就用代码做。有些事情在 XML 中比在代码中更容易完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T21:04:47.727

这完全是你自己的选择。您可能会发现大多数 Android 开发人员使用 XML 来编写他们的应用程序布局，因为这是专门为此设计的。然而，我个人来自游戏开发背景，并不真正需要 Android 提供的 UI 小部件，所以当我使用 UI 小部件时，我只是用 java 编写代码。

我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-13T10:18:35.203

这是一个相当晚的回应，但有人会发现它很有帮助。我目前正在制作一个**库**，可让您使用在服务器上声明的动态布局。你可以在这里找到它：[https ://github.com/jelic98/dynamico](https://github.com/jelic98/dynamico)

# flyway - 为什么是版本计数器而不是时间戳

> ID：11960504
> 
> 赞同：3
> 
> 时间：2012-08-14T20:49:35.037
> 
> 标签：flyway

为什么 Flyway 使用版本号而不是时间戳？这应该如何与更大且可能分散的团队一起工作？

我是否必须向所有团队成员发送电子邮件，宣布我现在为我保留版本号 xy？如果两个开发人员都使用相同的版本号会怎样？如果在另一个更高的版本号已经被签入之后，一个较低的版本号被签入到版本控制中（并由集成数据库上的构建服务器执行）怎么办？

我习惯了 mybatis-migrations，它是在 rails (>=2.1) 中的迁移之后紧密建模的，其中使用时间戳而不是版本号。现在我认为时间戳更有意义：我不必担心版本号，并且很容易检测到乱序迁移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:58:18.037

这里有很多问题。我会尽力回答他们。

Flyway 的版本控制系统非常灵活。不管你的版本是1.0、20120816115123还是2012.8.16.11.51.23。因此，如果您愿意，您可以自由使用时间戳。

保留版本号可以很简单，只需将您的姓名添加到白板、一张纸或 Wiki 页面上的数字旁边。

Flyway 会检测到多个相同版本的迁移，并报错。

无序迁移支持目前是[请求的#1 问题](http://code.google.com/p/flyway/issues/detail?id=138)，并将包含在即将发布的 1.8 版本中。

# ios - 如何在 iOS 模拟器中获取 Mobile Safari 的崩溃日志？

> ID：11960507
> 
> 赞同：2
> 
> 时间：2012-08-14T20:49:39.253
> 
> 标签：ios, ios-simulator, mobile-safari

如果 Mobile Safari 在 iOS 模拟器中崩溃，在哪里可以找到崩溃日志？

（Apple 会希望将这些附加到您的错误报告中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:49:39.253

查找`MobileSafari_*.crash`以`~/Library/Logs/DiagnosticReports/`.

（`open ~/Library/Logs/DiagnosticReports/`在终端中执行，然后按修改日期排序。）

# java - 如何将 JTable 中的布尔值与 JGoodies 绑定

> ID：11960511
> 
> 赞同：5
> 
> 时间：2012-08-14T20:49:48.413
> 
> 标签：java, swing, binding, jtable, jgoodies

我想绑定到我的 bean`boolean`的列中有七个值。`JTable`

我该如何绑定它们？

那里的所有`JTable`绑定示例都集中在绑定表选择上，但我只关心它们的值是什么`booleans`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T15:21:32.777

您需要实现自己的数据模型。我给你一个简单的例子来展示使用的想法。看一下 getColumnClass 方法。

用法：table.setModel(new DataModel(myData));

```
class DataModel extends AbstractTableModel
{

    public DataModel(Object yourData){
         //some code here
    }

    @Override
    public int getRowCount() {
        return yourData.rows;
    }

    @Override
    public int getColumnCount() {
        return yourData.colums;
    }

    @Override
    public Class<?> getColumnClass(int col) {
        if (col == myBooleanColumn) {
            return Boolean.class;
        } else {
            return null;
        }
    }

    @Override
    public boolean isCellEditable(int row, int col) 
    {
        return col >= 0;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {

        return yourData.get(rowIndex,columnIndex);
    }

    @Override
    public void setValueAt(Object aValue, int row, int col) {           

    yourData.set(aValue,row,col)    

        this.fireTableCellUpdated(row, col);  
    }
} 
```

希望这可以帮助。

# sql - 过度使用 Oracle With 子句？

> ID：11960512
> 
> 赞同：7
> 
> 时间：2012-08-14T20:49:50.503
> 
> 标签：sql, oracle, oracle11g, common-table-expression

我正在为我当前的雇主编写许多报告查询，利用 Oracle 的`WITH`条款允许自己创建简单的步骤，每个步骤都是面向数据的转换，它们相互依赖以执行复杂的任务。

今天引起我注意的是，过度使用该`WITH`子句可能会对 Oracle 服务器的资源产生负面影响。

谁能解释为什么过度使用 Oracle`WITH`子句会导致服务器崩溃？或者指出一些我可以研究适当用例的文章？我开始`WITH`大量使用该子句来为我的代码添加结构并使其更易于理解。我希望在这里有一些信息丰富的回复，我可以继续有效地使用它。

如果一个示例查询会有所帮助，我将在今天晚些时候尝试发布一个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:54:47.440

基于此：[http](http://www.dba-oracle.com/t_with_clause.htm) ://www.dba-oracle.com/t_with_clause.htm看起来这是一种避免使用临时表的方法。然而，正如其他人会注意到的那样，这实际上可能意味着更重、更昂贵的查询，这将对数据库服务器造成额外的消耗。

它可能不会“崩溃”。这有点戏剧化。更有可能它会变慢，使用更多内存等。这对您公司的影响将取决于数据量、处理器数量、处理量（使用`with`或不使用）

# javascript - 使用jquery更改嵌套在随机html元素中的html元素

> ID：11960523
> 
> 赞同：0
> 
> 时间：2012-08-14T20:50:27.983
> 
> 标签：javascript, jquery

我有一个 JQuery 函数，它在充满 DIV 的页面中随机选择一个 DIV。我正在尝试修改该函数，以便它检查嵌套在随机 DIV 中的 H3 标记的长度。如果 H3 标记内的字符串长度超过 10 个字符（包括空格），则该函数应截断该字符串并将 H3 的内容替换为这个新的较短字符串并显示它。

示例：（jQuery）

```
if ($('#main').length !== 0) {
    var new_item = $('#main div').eq(Math.floor(Math.random() * $('#main div').length));    
    new_item.css('display','block');
} 
```

（html文件）

```
<div id="main">
  <div id="m1" style="display:none;">
    <h3>Apples are red</h3>
  </div>
  <div id="m2" style="display:none;">
    <h3>Oranges are orange</h3>
  </div>
  <div id="m3" style="display:none;">
    <h3>Bananas are yellow</h3>
  </div>
</div> 
```

（期望的输出 - 如果 DIV#m2 被随机选择，用户会看到什么）

橙子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:53:51.290

```
$(new_item).find('h3').text($(new_item).find('h3').text().substr(0,10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:59:00.357

您已经有了获取随机`div`元素的代码。您要添加的部分相当简单：

```
var h3_item = new_item.children("h3");
h3_item.html(h3_item.html().substring(0, 10)); 
```

# css - 将页脚保持在页面底部

> ID：11960525
> 
> 赞同：1
> 
> 时间：2012-08-14T20:50:37.270
> 
> 标签：css, html

当我使用`bottom:0;`时，如果我没有足够的内容，页脚就在它应该在的位置，但是如果我有用户必须在页面上滚动的内容，则页脚保持在原位并且一旦滚动，页脚就在中间屏幕。

当我不使用`bottom:0;`并且确实有填充屏幕的内容时，页脚在它应该在的位置，但是如果我没有足够的内容，页脚不在它应该在的位置并且在页面中间的某个位置.

它们都起作用，但只有在满足某些条件时才起作用。我怎样才能让它总是在它应该有内容或没有内容的底部？

```
.footer{
    background-color:#99C;
    background-repeat: repeat;
    width:100%;
    position:absolute;
    bottom:0;
}

html,body{ 
    padding:0;
    height:100%;
    width: 100%;
    margin:0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:55:11.393

在这里，试试这个[网站](http://peterned.home.xs4all.nl/examples/csslayout1.html)，它解释了如何去做。

还有一个例子

HTML：

```
<html>
    <head></head>
    <body>
        <div id="container">
        <div id="header"></div>
        <div id="content"></div>
        <div id="footer"></div>
    </div>
    </body>
</html> 
```

CSS：

```
html,body {
    margin:0;
    padding:0;
    height:100%;
}

div#container {
    position:relative;
    margin:0 auto;
    width:750px;
    height:auto !important;
    height:100%;
    min-height:100%;
}

div#header {
    height:150px;
    background-color:red;
}

div#content {
    padding-bottom:150px;
    height:800px;
    background-color:green;
}

div#footer {
    position:absolute;
    width:100%;
    bottom:0;
    height:150px;
    background-color:blue;
} 
```

JSFiddle：http: [//jsfiddle.net/gdy8K/](http://jsfiddle.net/gdy8K/)

请注意，`#header`和`#content`高度只是为了`div`使用一些空间。这`#footer`空间是必要的，应该与`#content` `padding-bottom`. `background-color`也只是为了演示。

您还应该注意，如果您使用的是 asp.net，请不要忘记您的内容通常位于`form`标签中。您必须`form`像这样添加第一个 css 规则

```
html,body,form {
    margin:0;
    padding:0;
    height:100%;
} 
```

# c# - Google Drive - 如何从代码中清空垃圾（以编程方式）？

> ID：11960526
> 
> 赞同：4
> 
> 时间：2012-08-14T20:50:40.860
> 
> 标签：c#, google-drive-api

请帮助我将项目与 Google Drive 集成。问题是 Google Drive 垃圾文件夹永远不会被清空，因此最终由于空间不足，Google Drive 与桌面同步停止工作。

我需要将垃圾箱配置为不保留已删除的文件（首选选项）或从 C# 代码（不太首选）或其他编程语言（最后的选项）中以编程方式清空它。

如何从代码或脚本或其他任何内容中清空 Google Drive 垃圾？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:04:43.857

Google Drive API 没有公开清空垃圾箱的方法，但它有一种`delete`永久删除文件的方法，而不会将它们发送到垃圾箱中：

[https://developers.google.com/drive/v2/reference/files/delete](https://developers.google.com/drive/v2/reference/files/delete)

您还可以通过检查[文件资源](https://developers.google.com/drive/v2/reference/files)`trashed`的标签从垃圾箱中检索文件，然后调用它们。`delete`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-20T18:36:28.080

这是一个较短的版本，我尝试使用上述解决方案，但没有运气。

```
function emptydrivetrash() {
  Drive.Files.emptyTrash();
} 
```

您所要做的就是在资源菜单-> 谷歌高级服务和谷歌开发者控制台中启用 de drive api...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T11:35:38.970

这是一个完整的解决方案：

1）在您的驱动器上创建一个空脚本

2）粘贴以下代码：

```
function doGet() {
  try{
  authorize();    
  var key = "YOUR DEVELOPER KEY";
  var params = {method:"DELETE",
                oAuthServiceName: "drive",
                oAuthUseToken: "always"
               };  
  UrlFetchApp.fetch("https://www.googleapis.com/drive/v2/files/trash?key="+key,     params);  
  }
  catch(error)
  {
    MailApp.sendEmail("<some email>", "EMPTY TRASH BIN ERROR:<br>"+error);    
    return;
  } 
}

function authorize() {
  var oauthConfig = UrlFetchApp.addOAuthService("drive");
  var scope = "https://www.googleapis.com/auth/drive";
  oauthConfig.setConsumerKey("anonymous");
  oauthConfig.setConsumerSecret("anonymous");
  oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?     scope="+scope);
  oauthConfig.setAuthorizationUrl("https://accounts.google.com/OAuthAuthorizeToken");    
  oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");  
} 
```

3) 将脚本部署为 Web 应用程序

4) 点击顶栏的时钟，创建一个调用doGet方法的触发器

这将为创建触发器的用户清空垃圾箱。

# php - 从包含秒的整数中获取小时/天/周的乘数值

> ID：11960527
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:50:57.280
> 
> 标签：php

我在这样的字段中存储总秒数：

乘数 x 小时以秒 (60*60)
或
乘数 x 天以秒 (60*60*24)
或
乘数 x 周以秒 (60*60*24*7)

用户可以输入一个乘数（一个整数值）。小时、日和周是固定值，因此用户只能选择其中一个选项。

我提供的 API 只允许将此整数值存储为总秒数。

检索此值时，如何确定他们输入的乘数值是什么以及它是否属于小时、日或周？

我目前正在用 PHP 开发这篇文章。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:58:16.337

你说乘数必须是一个整数 - 然后你可以检查星期和日期的可分性，看看是否是输入的。

如果 (total_seconds / seconds_in_week) 是整数，他们可能会选择“周”
如果 (total_seconds / seconds_in_day) 是整数，他们可能会选择“日”
，否则，他们肯定会选择秒。

即使他们确实选择了 14 天之类的东西，但无论如何最好在几周内显示出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:38:27.950

也许我可以建议这样的功能：-

```
/**
 * Given number of seconds will calculate if likely
 * multiplier is weeks, days, hours or seconds
 *
 * @param int $period
 * @return string representing possible chosen multiplier
 */
function getMultiplier($period)
{
    $hour = 60*60;
    $day = $hour * 24;
    $week = $day * 7;

    if($period >= $week && $period % $week == 0){
        return $period/$week . " weeks";
    }
    if($period >= $day && $period % $day == 0){
        return $period/$day . " days";
    }
    if($period >= $hour && $period % $hour == 0){
        return $period/$hour . " hours";
    }
    return "$period seconds";
} 
```

像这样使用它：-

```
echo getMultiplier(60 * 60 * 23); 
```

将输出

> 23 小时

# c# - 在 ZedGraph 中定位 ImageObj

> ID：11960531
> 
> 赞同：-1
> 
> 时间：2012-08-14T20:51:12.373
> 
> 标签：c#, winforms, zedgraph

我正在使用 ZedGraph 绘制一些数据。我需要显示折线图的标记区域。为此，我使用了一个红色感叹号。

我希望感叹号出现在图表的上边框上方，如下图所示。感叹号应随着图表的水平滚动而滚动，但即使在垂直滚动时也应保持固定在图表的上边框上方。

到目前为止，我已经尝试过这个（出现在`form_shown`事件中）：

```
ZedGraph.ImageObj io = new ZedGraph.ImageObj(global::ZedGraphJunk.Properties.Resources.alarm, 0d, -0.08d, 5d, 21d);
io.IsVisible = true;
io.IsScaled = false;
io.Location.CoordinateFrame = ZedGraph.CoordType.XScaleYChartFraction;

this.MasterZedGraph.GraphPane.GraphObjList.Add(io);
this.MasterZedGraph.Refresh(); 
```

这几乎可以工作，除了如果窗口调整大小并变高，感叹号就会消失。这是因为`-0.08d`告诉 ZedGraph 将其绘制在图表的上边框上方，但位置是相对于整个窗格（包含图表的整个区域）的大小。因此，如果窗格变大，ImageObj 的 y 位置会使其远离图表的上边框。

有没有办法固定感叹号的位置，以便无论窗格大小如何，它都保持在图表的顶部边框上方？

![在此处输入图像描述](../Images/c190a61ff2947933477e5bbdf83bad68.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:52:18.523

看起来像扩展 ImageObj 类并覆盖 Draw 方法应该可以解决问题。

几天后我会将此标记为答案，但我对其他解决方案持开放态度。

# facebook - 确认 Facebook 访问令牌？

> ID：11960532
> 
> 赞同：1
> 
> 时间：2012-08-14T20:51:16.790
> 
> 标签：facebook, facebook-graph-api, devise

我们使用 Facebook JS SDK 来验证用户对我们的应用程序的身份，然后将该信息发送到服务器后端以将我们的用户登录到应用程序（我们支持多种形式的身份验证，但我们只能支持使用客户端流程的 FB） .

FB 能够正确登录，我能够对用户和其他所有内容进行身份验证，但是有一个问题我不知道如何处理，而且我很难在文档中找到任何关于它的内容。Facebook 发回一个`accessToken`除了`id`. 我的问题是，如何在服务器端验证`accessToken`给定的正确`id`？我想确保用户发送给我们的数据与 Facebook 发送给他们的数据相匹配，我无法想象这是不寻常的，但我似乎找不到任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:19:42.070

在来自 Facebook 的响应中应该是一个[signed_request](https://developers.facebook.com/docs/authentication/signed_request/)字符串，它可以验证数据的真实性并解码为用户生成用户 ID 和 oauth 令牌。

将此与其他响应一起传递给您的服务器端代码应该可以让您非常轻松地验证所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:56:15.807

我可以从另一个问题中建议这个答案！它使用try-catch。这可能是验证身份验证和权限是否有效的唯一方法！这就是他们在示例中的做法

[Facebook OAuthException：（＃1）](https://stackoverflow.com/questions/9124996/facebook-oauthexception-1/11834038#11834038)

我不认为 facebook 提供任何其他的检查方式

# html - 自动增长表格单元格和里面的内容可编辑的 div

> ID：11960536
> 
> 赞同：0
> 
> 时间：2012-08-14T20:51:24.910
> 
> 标签：html, css

是否可以制作与其大小相关的自动增长表格单元格 - contenteditable div？

**CSS：**

```
table {
    border:1px solid;
    border-collapse:collapse;
    width:350px;
}
td {
    border: 1px solid;
    position:relative;
    padding:0px;
    height:100px;
}
div {
    width:100%;
    height:100%;
    margin: 0;
    padding:0;  
    position:relative;  
    border: 1px solid red;
} 
```

**html:**

```
<table>
    <tr>
        <td><div contenteditable>one</div></td>
        <td><div contenteditable>two</div></td>
    </tr>
    <tr>
        <td><div contenteditable>three</div></td>
        <td><div contenteditable>four</div></td>
    </tr>
</table> 
```

在我的示例中，表格单元格不会改变它自己的大小并且 div 内容重叠。

[http://jsfiddle.net/wxduS/](http://jsfiddle.net/wxduS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:46:20.853

修改后的 CSS：

```
table {
    border:1px solid;
    border-collapse:collapse;
    width:350px;
    table-layout:fixed;
}

td {
    position:relative;
    padding:0px;
    border: 1px solid red;
    vertical-align: top;
}

div {
    width:100%;
    height:100%;
    min-height:100px;
    margin: 0;
    padding:0;    
    word-wrap:break-word;
} 
```

和[小提琴](http://jsfiddle.net/wxduS/12/)。

# c# - 设置一个类以包含对象列表

> ID：11960537
> 
> 赞同：1
> 
> 时间：2012-08-14T20:51:32.097
> 
> 标签：c#, web-services, class

我在 C# 中设置一个类来保存我将从 Web 服务调用接收到的响应。我正在使用 RestSharp 处理 JSON 数据的调用/解析。

Web 服务文档将响应描述为：

```
OUTPUT: JSON object similar to example below.
    {
        "response":"[success] or [failed]",
        "messages":"Process succeeded.",
        "logonkey":"[logon key]",
        "tokenkey":"[security token]",
        "reccount":"1",
        "filelist":
            {
            "fileid":"12345",
            "status":"N",
            "filename":"data.tar",
            "fulfilled":"2012-06-15"
        }
    } 
```

我的问题是如何在我的类中定义 filelist 数组元素？

我在想这样的事情：

```
public class Files
{
    public string Response { get; set; }
    public string Messages { get; set; }
    public string LogonKey { get; set; }
    public string TokenKey { get; set; }
    public int RecordCount { get; set; }
    public List<FileList>
}

public class FileList
{
    public string FileID { get; set; }
    public string Status { get; set; }
    public string Filename { get; set; }
    public DateTime Fulfilled { get; set; }
} 
```

但是，我对“public List”语句有疑问。

任何有关处理这种情况的最佳方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:07:45.247

你也忘了给它一个名字，例如试试这个

```
public List<FileList> MyFavouriteList {get;set;}. 
```

一个属性被声明为这样的“访问修饰符”、“类型”、“标识符（或名称）”、“getter 和 setter”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:57:22.170

JSON 示例中的文件列表看起来不像对象列表。相反，它是一个单一的对象。你可以试试，

```
public class Files
{
    public string Response { get; set; }
    public string Messages { get; set; }
    public string LogonKey { get; set; }
    public string TokenKey { get; set; }
    public int RecordCount { get; set; }
    public FileList File   {get; set; }
} 
```

如果您确定 JSON 中的文件列表确实是对象列表，您可以尝试，

```
public List<FileList> Files   = new List<FileList>(); 
```

# r - 从 R 中的 HTML 片段中提取 URL

> ID：11960540
> 
> 赞同：2
> 
> 时间：2011-09-02T08:32:01.397
> 
> 标签：r

给定以下示例：

```
sites=c('site 1','site 2')
link=c('<a href="http://example.com/path">This website</a>', '<a href="http://example.com/path2">That website</a>')
w=data.frame(link,sites)
w
                                             link      sites
<a href="http://example.com/path">This website</a>   site 1
<a href="http://example.com/path2">That website</a>  site 2 
```

如何应用将解析 html 片段以提取 url 和链接文本并将它们弹出到数据框中的单独列中的正则表达式？因此，例如，给定上面的示例，我需要做什么才能生成如下所示的数据框：

```
 url          name     sites
http://example.com/path    This website   site 1
http://example.com/path2   That website   site 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-09-02T09:34:42.240

这是使用包中的`htmlTreeParse`函数的解决方案`XML`（即，没有正则表达式）

```
R> library("XML") 
R> htp <- htmlTreeParse(link)
R> t(sapply(seq_along(link),
+           function(i) c(url=unname(htp$children$html[[1]][[i]]$attributes),
+                         name=htp$children$html[[1]][[i]]$children$text$value,
+                         sites=sites[i])))
     url                        name           sites   
[1,] "http://example.com/path"  "This website" "site 1"
[2,] "http://example.com/path2" "That website" "site 2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T14:11:18.023

替代解决方案`rvest`：

```
library(rvest)

sites <- c('site 1','site 2')
link <- c('<a href="http://example.com/path">This website</a>', 
          '<a href="http://example.com/path2">That website</a>')
w <- data.frame(link, sites)

anchors <- html_nodes(read_html(paste0(w$link, collapse="")), "a")

data.frame(url=html_attr(anchors, "href"),
           name=html_text(anchors),
           sites=w$sites)
##                        url         name  sites
## 1  http://example.com/path This website site 1
## 2 http://example.com/path2 That website site 2 
```

# crystal-reports - Crystal Reports - 记录的流布局视图

> ID：11960545
> 
> 赞同：0
> 
> 时间：2012-08-14T20:51:57.583
> 
> 标签：crystal-reports, report

全部，

我在 VS2010 中使用水晶报表。我想执行一个查询，将记录列为行，并作为您喜欢的子查询，在类似于流布局（.Net/Java 样式）的内容中显示记录。

我正在执行一个存储过程来获取我的数据，例如：

```
SELECT Table1.Field1 AS Title
       Table2.Field1 AS RowRecord1
       Table2.Field2 AS RowRecord2
       Table3.Field1 AS DataRecord

FROM Table1 
JOIN Table2 ON Table1.id = Table2.table1_id
JOIN Table3 ON Table2.id = Table3.table2_id 
```

所以 Table1 是顶级父级，Table2 是中间级，Table3 有我想要以不同方式显示的子数据 - 不是连续显示。

所以选择中的虚拟数据将如下所示：

```
Title      RowRecord1    RowRecord2   DataRecord
My Test    Some Row1     Test 1       D1
My Test    Some Row1     Test 1       D2
My Test    Some Row1     Test 1       D3
My Test    Some Row1     Test 1       D4
My Test    Some Row1     Test 1       D5
My Test    Some Row2     Test 222     D1
My Test    Some Row2     Test 222     D2
My Test    Some Row2     Test 222     D3 
```

所以我希望整体报告如下所示：

```
**My Test** 

Some Row1   Test 1

D1   D2   D3   D4
D5

Some Row2   Test 222

D1   D2   D3 
```

DataRecord 将从左到右（单个值）填充该部分 - 在流布局中。

理想情况下，如果可能的话，我想知道如何在 Crystal 中做到这一点。如果没有，我会听取其他想法或解决方案。我已经尝试了一些无济于事的事情，并且还没有在网上找到任何东西。

谢谢，

安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:08:10.183

我认为这样的事情应该有效：

Crystal 中的第一组 by `Title`, `RowRecord1`,`RowRecord2`

然后创建三个公式：

**在最深的组标题中放置：**

```
WhilePrintingRecords;
Global numberVar count := 0;
StringVar ConCat:= ""; 
```

**详细部分：**

```
WhilePrintingRecords;
StringVar ConCat;
Global NumberVar count;

   if ((count Mod 4) = 0) then
       ConCat:= ConCat & {DBTABLE.DataRecord} & ChrW(13) //adds a line break
   else 
       Concat := Concat & {DBTABLE.DataRecord};
   count := count + 1    

   ConCat 
```

**在组页脚中**

```
WhilePrintingRecords;
StringVar ConCat;
Concat; 
```

# html - 如何在 Visual Studio 中删除特定的 HTML 标记

> ID：11960546
> 
> 赞同：2
> 
> 时间：2012-08-14T20:51:59.930
> 
> 标签：html, visual-studio-2010, tags

我需要将文本从 Microsoft Powerpoint 复制/粘贴到 Visual Studio 2010 的 aspx 页面。当我复制文本时，它会复制几个不需要的标签（如样式标签、跨度、p 标签等）。如何在 Visual Studio 中清理复制的文本？我还安装了 Resharper，它对删除不需要的标签有用吗？例如，我想从文档中删除所有样式标签或删除所有跨度标签。我想在一个命令中清理/删除不需要的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:18:30.633

粘贴文本后，很难自动确定不需要的标签和实际的标签，也许复杂的用正则表达式替换全部会起作用。但是有一些方法可以复制/粘贴纯文本，请看这里：[如何在没有富文本格式的情况下复制和粘贴代码？](https://stackoverflow.com/questions/122404/how-to-copy-and-paste-code-without-rich-text-formatting).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T01:02:01.917

到目前为止，现在有一种简单的方法可以删除特定的 HTML 标签。我建议您使用 Notepad++ 的查找和替换功能，您可以轻松地编写正则表达式来替换标签。另外，我建议您使用这些链接来清理您的 HTML [WordToHTML](https://wordhtml.com/) [CleanHTML](https://word2cleanhtml.com/)。我希望这可以帮助您解决部分问题。

# jquery - Jquery 滑块范围在 iPad 上不起作用

> ID：11960553
> 
> 赞同：8
> 
> 时间：2012-08-14T20:52:40.110
> 
> 标签：jquery, slider, touch, range, device

下面是我的 Jquery 滑块范围（最小-最大）代码，拖动在台式计算机上工作正常，但是当我在 iPad 上测试时，它不起作用。任何人都可以帮我解决这个问题吗？

不幸的是，我无法附上图片。下面是滑块范围图，

=====(>)=======(<)=====

```
var maxValue,myRequest,isDown=false,setUrl;
setUrl = "/search_type/filter.php";

$( "#slider-range" ).slider({
    range: true,
    min: 0,
    max: 500,
    step:25,
    orientation: "horizontal",
    values: [ 0,500 ],
    slide: function( event, ui ) {

    if(ui.values[1] === 500)
    {
        maxValue = 500+"+";
    }
    else
    {
        maxValue = ui.values[1];
    }
        $( "#priceRange" ).val( "£" + ui.values[ 0 ] + " to £" + maxValue );
    }
});

// AJAX CALL 
$("#slider-range").find('a').mousedown(function(){
    isDown=true;
});
$(document).mouseup(function(){
    if(isDown)
    {
        return setAjaxRequest();
    }
});

// Decoration drag image
$( "#slider-range" )
.find('.ui-slider-handle')
.eq(0).addClass('a-right').end()
.eq(1).addClass('a-left');

//Default this is 
    $( "#priceRange" )
    .val( "£" + $( "#slider-range" )
    .slider( "values", 0 ) + " to £" + $( "#slider-range" )
    .slider( "values", 1 )+'+');
    return true; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T20:59:51.133

试试这个[http://touchpunch.furf.com/](http://touchpunch.furf.com/)

我用于一个项目，它解决了我在 ipad 和触摸设备上遇到的问题

也可以在[cdnjs中使用](https://cdnjs.com/libraries/jqueryui-touch-punch)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T13:08:19.487

按照建议，我使用[了 http://touchpunch.furf.com/](http://touchpunch.furf.com/)

它工作得很好！

进入我使用的 HTML 页面：

```
<script src="_js/jquery-1.9.1.min.js"></script>
<script src="_js/jquery-ui-1.10.1.custom.min.js"></script>
<script src="_js/jquery.ui.touch-punch.min.js"></script> 
```

我用来创建滑块范围的 JavaScript 代码：

```
var slider = $( "#dv_sliderrange" ).slider({
        range: true,
        orientation: 'horizontal',
        min: 0,
        max: 10000,
        step: 10,
        values: [ 0, 10000 ],
        // Update my own form fields with the Slider values
        slide: function( event, ui ) {
            $( "#fd_amount0" ).val( "$ " + ui.values[ 0 ]);
            $( "#fd_amount1" ).val( "$ " + ui.values[ 1 ]);
        }
    }).draggable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T21:29:18.423

非常感谢您的回答。我尝试了该解决方案，起初它对我不起作用。然后我意识到我还有一个破坏功能的 js 文件。这是 jquery 进度条 js。我删除它工作得很好。

# solr - 具有多个匹配行的 Solr 数据导入仅导入第一行

> ID：11960562
> 
> 赞同：1
> 
> 时间：2012-08-14T20:53:24.730
> 
> 标签：solr, lucene, dataimporthandler

我的 solr 数据导入 config.xml 看起来像这样

```
<document>
      <entity name="users" pk="id"
         query="select id, user_name, site_id from users"
         deltaQuery = "select id from users where updated &gt;= '${dataimporter.last_index_time}'"
         deltaImportQuery = "select id, user_name, site_id from users where id = ${dataimporter.delta.id}">
         <field column="id" name="id"/>
         <field column="name" name="user_name"/>
         <field column="site_id" name="site_id"/>
         <entity name="prefs" pk="id"
               query="select pref_value from user_preferences where user_id = '${users.id}'"
               deltaQuery="select id from user_preferences where updated &gt;= '${dataimporter.last_index_time}'"
               parentDeltaQuery="select user_id as id from user_preferences where id = ${prefs.id}">
            <field column="pref_value" name="pref_value" />
         </entity>
      </entity>
   </document> 
```

每个用户可以有多个偏好。现在它只导入它找到的第一个 user_preference。如何导入所有用户首选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:36:34.110

1.  确保 pref_value 是 schema.xml 中的多值字段
2.  我不认为您可以在内部实体中使用 parentDeltaQuery 和 deltaQuery，它们仅适用于父实体。

# python - 从电子邮件收件箱中提取 URL

> ID：11960563
> 
> 赞同：2
> 
> 时间：2012-08-14T20:53:27.630
> 
> 标签：python, email, url, extract

好的，我正在尝试做的事情有些混乱，所以我再次这样做。我正在寻找一个脚本来针对我的收件箱运行，它将在电子邮件正文中为我提供发件人地址、主题和 URL。我遇到的问题是脚本的 URL 解析正在从电子邮件中提取所有 URL，而不仅仅是从正文中提取。这是一个例子

收件人：Tom@mail.com

来自：Joe@test.com

主题：确认你的考试成绩

请前往以下网址确认您的考试成绩。WWW.test.com/confirmation 再次感谢您的意见。

签

Joe（Joes 签名的一部分有图像）图像的 URL 是 [http://www.test.com/wp-content/uploads/_client_image/66-dcfc0fc8.png](http://www.test.com/wp-content/uploads/_client_image/66-dcfc0fc8.png)

我希望我的输出是

来自：Joe@test.com

主题：确认您的考试成绩

网址：WWW.test.com/confirmation

我得到了这个

来自：Joe@test.com

主题：确认你的考试成绩

网址：WWW.test.com/confirmation，http: [//www.test.com/wp-content/uploads/_client_image/66-dcfc0fc8.png](http://www.test.com/wp-content/uploads/_client_image/66-dcfc0fc8.png)

这是我的脚本

```
import re
import mailbox
import urlparse

mbx=mailbox.mbox("Mail Box Path")

url_pattern = re.compile('''["']http://[^+]*?['"]''')

for k, m in mbx.iteritems():
    print "From %s\n" % m['from']
    print "Subject %s\n" % m['subject']
    print "URL %s\n" % url_pattern.findall(m.as_string()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:02:28.530

签名算作​​电子邮件的正文 - 因此您无法真正将它们分开。

如果您确定电子邮件中只有一个您关心的链接，您可以尝试只查看您匹配的第一个 URL - 但没有一种（可靠的）方法可以确保您只与电子邮件的正文，而不是签名。

[甚至有人就此写了一篇论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.11.2718)——这非常困难，尤其是当您无法控制所处理电子邮件的格式时。

# javascript - 何时指定与主干中的集合/视图关联的模型

> ID：11960564
> 
> 赞同：1
> 
> 时间：2012-08-14T20:53:30.217
> 
> 标签：javascript, backbone.js

这不是很重要，但我想知道什么被认为是最佳实践，因为我已经看到它以两种方式完成。

在视图（或集合）声明中绑定模型：

```
var FooView = Backbone.View.extend({
    model : fooModel
}); 
```

仅在初始化时与绑定模型：

```
App.views.foo = new FooView({ model : fooModel }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:57:26.877

在第一种情况下，您将所有未来`FooView`实例关联到同一个模型，因为您在类级别进行关联。我从未见过使用这种方法。

第二种情况是我唯一使用的，也是我见过的唯一一种。在这种情况下，您将*View*的*具体实例与 Model*的具体实例相关联。

### 更新

您无法将 View 和 Model 之间的关联与 Collection 和 Model 之间的关联进行比较。

```
var FooCollection = Backbone.Collection.extend({
  model : FooModel
}); 
```

注意我正在使用`FooModel`（与类相关）而不是`fooModel`与具体实例相关。

在 Collection 中是在 Class 级别完成的，因为这种关联不是与具体的 Model 实例，而是与 Model 类，因此 Collection 能够实例化这个具体 Model 类的实例，并且还可以访问诸如此类的类`Model.urlRoot`属性.

# jquery - JQuery 和 JQuery mobile 完全初始化后如何运行 jquery 命令？

> ID：11960572
> 
> 赞同：0
> 
> 时间：2012-08-14T20:53:58.977
> 
> 标签：jquery, jquery-mobile

出于某种原因，我在 JQuery Mobile 中的选择菜单之一似乎初始化然后消失了。

如果我使用命令

```
$('[id$=status]').selectmenu(); 
```

并将其绑定到一个按钮并按下按钮（所以它在一切都初始化后发生）然后选择菜单重新初始化并且一切正常。

我知道它的hack-y，但我想在页面上的所有其他内容完成初始化后运行这一行，以便它自动显示。

我尝试将它添加到 $(document).ready ，但这似乎有点太早了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:47:55.483

只需使用：

> `$(document).bind('pageinit')`

这就是我在 jQuery MObile 文档上找到的：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# javascript - 从帖子返回后，Javascript重定向不起作用

> ID：11960578
> 
> 赞同：0
> 
> 时间：2012-08-14T20:54:27.157
> 
> 标签：javascript, jquery

我正在使用拖放来更新用户头像，我几乎已经完成了，非常非常卡住并且需要帮助。

我对java不是很有经验..当用户拖放一个新图像时，它会被写入数据库并正确上传。我想做的所有我认为非常简单的事情就是让帖子窗口通过 Json 返回图像已上传，然后刷新将显示用户新头像的页面。

```
 <script id="template-upload" type="text/x-jquery-tmpl">
  <tr class="template-upload{{if error}} ui-state-error{{/if}}">
    <td class="preview"></td>
    <td class="name">{{if name}}${name}{{else}}Untitled{{/if}}</td>
    <td class="size">${sizef}</td>
    {{if error}}
        <td class="error" colspan="2"><b>Error</b> :
            {{if error === 'maxFileSize'}}File too large! <br><small>(Files must be under 3Mb)</small>
            {{else error === 'minFileSize'}}File too small! <br><small>(The file must be greater than 50Kb)</small>
            {{else error === 'acceptFileTypes'}}Invalid file type! <br><small>(Upload pictures only)</small>
            {{else error === 'maxNumberOfFiles'}}Max number of files exceeded
            {{else}}${error}
            {{/if}}
        </td>
    {{else}}
        <td class="progress"><div></div></td>
        <td class="start"><button>start</button></td>
    {{/if}}
    <td class="cancel"><button>cancel</button></td>
  </tr>
 </script>
<script id="template-download" type="text/x-jquery-tmpl">       

<tr class="template-download{{if error}} ui-state-error{{/if}}">
    {{if error}}
        <td></td>
        <td class="name">${name}</td>
        <td class="size">${sizef}</td>
        <td class="error" colspan="2"><b>Error</b> :
            {{if error === 1}}File exceeds upload_max_filesize (php.ini directive)
            {{else error === 2}}File exceeds MAX_FILE_SIZE (HTML form directive)
            {{else error === 3}}File was only partially uploaded
            {{else error === 4}}No File was uploaded
            {{else error === 5}}Missing a temporary folder
            {{else error === 6}}Failed to write file to disk
            {{else error === 7}}File upload stopped by extension
            {{else error === 'maxFileSize'}}File is too big
            {{else error === 'minFileSize'}}File is too small
            {{else error === 'acceptFileTypes'}}Filetype not allowed
            {{else error === 'maxNumberOfFiles'}}Max number of files exceeded
            {{else error === 'uploadedBytes'}}Uploaded bytes exceed file size
            {{else error === 'emptyResult'}}Empty file upload result
            {{else}}unknown error has occured.<br><small>(Try again later)</small>
            {{/if}}

        </td>
    {{else}}        

<td class="preview">
            {{if thumbnail_url}}
            THIS IS WHERE I WANT THE REDIRECT TO BE SO THAT NEW AVATAR IS DISPLAYED
                <a href="${url}" target="_blank"><img src="${thumbnail_url}" width="80" height="80"></a>
            {{/if}}
  </td>
        <td class="name">
            <a href="${url}"{{if thumbnail_url}} target="_blank"{{/if}}>${name}</a>
        </td>
        <td class="size">${sizef}</td>
        <td colspan="2"></td>
    {{/if}}
    <td class="delete">
        <button data-type="${delete_type}" data-url="${delete_url}">Sil</button>
    </td>
  </tr>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:56:21.967

JavaScript 重定向采用以下形式：

```
<script type="text/javascript">
    window.location = "http://www.google.com/"
</script> 
```

**改变这个：**

```
 <td class="preview">
        {{if thumbnail_url}}
        {window.location("http://www.mymusicwall.co.uk/avatar.asp");}                
        {{/if}}
    </td> 
```

**对此：**

```
 <td class="preview">
        {{if thumbnail_url}}
        {<script type="text/javascript">window.location("http://www.mymusicwall.co.uk/avatar.asp");</script>}                
        {{/if}}
    </td> 
```

**编辑**

我不熟悉您的模板系统，但您需要将重定向放在模板之外。您可以将事件处理程序附加到您想要重定向之后的任何操作，然后`window.location`在该事件处理程序中运行上述讨论。请务必检查您的控制台是否有错误，因为我确信这是您尝试的方法不起作用的主要原因。

# jquery - Jquery .unbind 和 .html 不起作用

> ID：11960579
> 
> 赞同：0
> 
> 时间：2012-08-14T20:54:29.963
> 
> 标签：jquery

下面的代码假设删除#approve 和#deny 并在按下其中一个链接时回显用户按下的内容。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    $('#approve').click(function(){
            $('#approve').unbind('click');
            $('#deny').unbind('click');
            $('.rare').html('Approved!');
        });
        return false;
    });
    $('#deny').click(function(){
            $('#approve').unbind('click');
            $('#deny').unbind('click');
            $('.rare').html('Denied!');
        });
        return false;
    });
})
</script>
</head>
<body>
<div class="rare">
    <a href id="approve">Approve</a>
    <a href id="deny">Deny</a>
</div>
</body>
</html> 
```

但它似乎不起作用，我是 jquery 的新手，所以我不明白为什么它不起作用。jquery 托管在我的谷歌上

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T20:57:24.030

你的嵌套看起来坏了，试试这个：

```
$(function(){

    $('#approve').click(function(){
        $('#approve').unbind('click');
        $('#deny').unbind('click');
        $('.rare').html('Approved!');
        return false;
    });

    $('#deny').click(function(){
        $('#approve').unbind('click');
        $('#deny').unbind('click');
        $('.rare').html('Denied!');
        return false;
    });
}) 
```

此外，我不会对您返回 false 的原因做出假设，但如果您想阻止默认`click`事件行为，这是首选方法：

```
$('#deny').click(function(e){
    // Absorb click
    e.preventDefault();
    $('#approve').unbind('click');
    $('#deny').unbind('click');
    $('.rare').html('Denied!');
}); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:58:27.703

如果这正是您的代码，您应该在 firbug/IE 的控制台中遇到错误。您过早地关闭了准备好的函数`$(function(){`，并且在函数之外有一些挂起`})`和返回值。

您的代码可能应该是：

```
$(function(){
    $('#approve').click(function(){
            $('#approve').unbind('click');
            $('#deny').unbind('click');
            $('.rare').html('Approved!');
    });
    $('#deny').click(function(){
            $('#approve').unbind('click');
            $('#deny').unbind('click');
            $('.rare').html('Denied!');

    });
}); 
```

# machine-learning - 类的 WEKA 分类似然性

> ID：11960580
> 
> 赞同：6
> 
> 时间：2012-08-14T20:54:33.693
> 
> 标签：machine-learning, weka

我想知道 WEKA 中是否有一种方法可以为分类输出一些“最佳猜测”。

我的场景是：例如，我使用交叉验证对数据进行分类，然后在 weka 的输出中我得到类似的信息：这些是该实例分类的 3 个最佳猜测。我想要的是，即使实例未正确分类，我也会得到该实例的 3 或 5 个最佳猜测的输出。

例子：

类别：A、B、C、D、E 实例：1...10

输出将是：实例 1 90% 可能是 A 类，75% 可能是 B 类，60% 可能是 C 类。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T16:11:15.077

Weka 的 API 有一个名为 Classifier.distributionForInstance() 的方法，可用于获取分类预测分布。然后，您可以通过降低概率对分布进行排序，以获得您的前 N ​​个预测。

下面是一个打印出来的函数：（1）测试实例的真实标签；(2) 来自classifyInstance() 的预测标签；(3) 来自distributionForInstance() 的预测分布。我已经将它与 J48 一起使用，但它应该与其他分类器一起使用。

输入参数是序列化模型文件（您可以在模型训练阶段创建并应用 -d 选项）和 ARFF 格式的测试文件。

```
public void test(String modelFileSerialized, String testFileARFF) 
    throws Exception
{
    // Deserialize the classifier.
    Classifier classifier = 
        (Classifier) weka.core.SerializationHelper.read(
            modelFileSerialized);

    // Load the test instances.
    Instances testInstances = DataSource.read(testFileARFF);

    // Mark the last attribute in each instance as the true class.
    testInstances.setClassIndex(testInstances.numAttributes()-1);

    int numTestInstances = testInstances.numInstances();
    System.out.printf("There are %d test instances\n", numTestInstances);

    // Loop over each test instance.
    for (int i = 0; i < numTestInstances; i++)
    {
        // Get the true class label from the instance's own classIndex.
        String trueClassLabel = 
            testInstances.instance(i).toString(testInstances.classIndex());

        // Make the prediction here.
        double predictionIndex = 
            classifier.classifyInstance(testInstances.instance(i)); 

        // Get the predicted class label from the predictionIndex.
        String predictedClassLabel =
            testInstances.classAttribute().value((int) predictionIndex);

        // Get the prediction probability distribution.
        double[] predictionDistribution = 
            classifier.distributionForInstance(testInstances.instance(i)); 

        // Print out the true label, predicted label, and the distribution.
        System.out.printf("%5d: true=%-10s, predicted=%-10s, distribution=", 
                          i, trueClassLabel, predictedClassLabel); 

        // Loop over all the prediction labels in the distribution.
        for (int predictionDistributionIndex = 0; 
             predictionDistributionIndex < predictionDistribution.length; 
             predictionDistributionIndex++)
        {
            // Get this distribution index's class label.
            String predictionDistributionIndexAsClassLabel = 
                testInstances.classAttribute().value(
                    predictionDistributionIndex);

            // Get the probability.
            double predictionProbability = 
                predictionDistribution[predictionDistributionIndex];

            System.out.printf("[%10s : %6.3f]", 
                              predictionDistributionIndexAsClassLabel, 
                              predictionProbability );
        }

        o.printf("\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T20:57:19.297

我不知道你是否可以在本地做到这一点，但你可以得到每个班级的概率，对它们进行排序并取前三个。

您想要的函数是`distributionForInstance(Instance instance)`返回`double[]`每个类的给出概率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:45:01.250

当您计算实例的概率时，您究竟是如何做到的？

我已经在[此处](https://stackoverflow.com/questions/11118167/weka-predictive-value-of-attributes/12045612#12045612)发布了新实例的 PART 规则和数据，但就手动计算而言，我不太确定如何执行此操作！谢谢

编辑：现在计算：

私人浮动[] getProbDist（字符串拆分）{

// 接受诸如 (52/2) 之类的内容，这意味着 52 个实例正确分类，2 个错误分类。

```
 if(prob_dis.length > 2)
        return null;

    if(prob_dis.length == 1){
        String temp = prob_dis[0];
        prob_dis = new String[2];
        prob_dis[0] = "1";
        prob_dis[1] = temp; 
    }

    float p1 = new Float(prob_dis[0]);
    float p2 = new  Float(prob_dis[1]);
    // assumes two tags
    float[] tag_prob = new float[2];

    tag_prob[1] = 1 - tag_prob[1];
    tag_prob[0] = (float)p2/p1;

// returns double[] as being the probabilities

return tag_prob;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:00:13.043

一般不会。并非所有分类器都提供您想要的信息——在大多数情况下（例如决策树），决策是明确的（尽管可能不正确），但没有置信度值。您的任务需要能够处理不确定性的分类器（例如朴素贝叶斯分类器）。

从技术上讲，最简单的做法可能是训练模型，然后对单个实例进行分类，Weka 应该为您提供所需的输出。一般来说，您当然也可以为实例集执行此操作，但我不认为 Weka 提供了开箱即用的功能。您可能必须自定义代码或通过 API 使用它（例如在 R 中）。

# javascript - 通过循环排列内容？

> ID：11960581
> 
> 赞同：0
> 
> 时间：2012-08-14T20:54:45.763
> 
> 标签：javascript, arrays, loops, image-gallery, preloading

我正在尝试预加载图像库中的所有图像，并找到了一个不错的简单代码（第一个代码示例）。

我想尝试让画廊尽可能地充满活力。**有没有办法循环浏览图库中的所有图像，以便可以预加载所有图像？**

首先是用于预加载所有图像以供参考的代码。其次是我正在努力的工作。

```
// code for preloading images
var images = [
    'bigPics/1.jpg',
    'bigPics/2.jpg'
];

$(images).each(function() {
    var image = $('<img />').attr('src', this);
}); 
```

.

```
 // code I'm trying to re-work

    // this give me the number of images in the gallery
    var numberOfChildren = $(".thumb").length;

// then I want to loop through all of the images that make up the array as above and output???
    for (var i=0; i<numberOfChildren; i++)
      {
      var images = [ 'bigPics/' + i + '.jpg' ];
      }

    $(images).each(function() {
        var image = $('<img />').attr('src', this);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:02:16.640

怎么样...

```
$( '.thumb' ).each(function ( i ) {
    $( '<img>' ).attr( 'src', 'bigPics/' + i + '.jpg' );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:00:06.233

我认为您想做的事情就像这个 SO 问题中解释的那样： [Javascript load background-image asynchrously](https://stackoverflow.com/questions/6206435/javascript-load-background-image-asynchrously)

# php - PHP preg_replace_callback，只替换1个反向引用？

> ID：11960584
> 
> 赞同：3
> 
> 时间：2012-08-14T20:54:49.343
> 
> 标签：php, regex, string, replace

使用`preg_replace_callback`，是否可以只替换一个反向引用？还是我必须全部退回？

我只是想用引号包裹令牌的默认值。

```
$str = 'This is a {$token|token was empty}';
$str = preg_replace_callback('~{\$\w+\|(.*)?}~i', function($match) {
    //$match[1] is "token was empty"
    //I want to just replace $match[1], but it needs me to return the whole thing
}, $str); 
```

我是否必须获取更多的反向引用，以便能够构建一个新版本的令牌并返回它，我不能只替换反向引用 1？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:08:14.477

> 我是否必须获取更多的反向引用，以便能够构建一个新版本的令牌并返回它，我不能只替换反向引用 1？

你有两个选择：

1.  如您所说，使用额外的反向引用来构造替换字符串，或者
2.  使用环视仅匹配您要替换的部分。

通常我建议使用第一种方法，因为第二种方法效率较低，并且在某些情况下可能导致无效匹配（当前瞻和后向可能重叠时）。在这种情况下，不会有问题。

第二个选项的示例是：

```
preg_replace_callback('~{\$\w+\|\K(?:[^{}]+)?(?=})~i', function($match){
    // $match[0] contains what used to be the first capturing group.
    // return the value you want to replace it with
    // (you can still use the capturing group if you want, but it's unnecessary)
}); 
```

*   `\K`是一种从实际匹配中排除它之前的所有内容的方法（就像我们在那里有一个可变长度的lookbehind）。
*   `(?=})`是一个前瞻，表示以下必须是 a`}`但不将其包含在它自己的匹配中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:17:19.397

你会想使用这样的正则表达式，而不是：

```
~\{\$(\w+?)(?:\|(.+?))?\}~i 
```

然后，您可以轻松查看传递给回调的内容：

```
$str = 'This is a {$token|token was empty}';
$str = preg_replace_callback('~\{\$(\w+?)(?:\|(.+?))?\}~i', function($match) {
    var_dump($match);
    exit;
}, $str); 
```

输出：

```
array(3) {
  [0]=>
  string(24) "{$token|token was empty}"
  [1]=>
  string(5) "token"
  [2]=>
  string(15) "token was empty"
} 
```

从那里，您可以检查是否`$match[1]`已设置，如果已设置，则返回其值，否则返回`$match[2]`：

```
$foo = 'foo';
$str = 'Foo: {$foo|not set}, Bar: {$bar|not set}';
$str = preg_replace_callback('~\{\$(\w+?)(?:\|(.+?))?\}~i', function($match) {
    if (isset($GLOBALS[$match[1]])) {
        return $GLOBALS[$match[1]];
    } else {
        return $match[2];
    }
}, $str);
var_dump($str); 
```

输出：

```
string(22) "Foo: foo, Bar: not set" 
```

**注意：**我在`$GLOBALS`这里仅用于演示目的。如果可能的话，我建议使用 PHP 5.4 的闭包绑定，因为那时你可以为闭包分配一个特定的对象作为上下文（例如你的模板/视图对象或任何包含你试图替换的变量） . 如果你不使用 PHP 5.4，你也可以使用语法`function($match) use ($obj)`，`$obj`你的上下文在哪里，然后检查`isset($obj->{$match[1]})`你的闭包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:54:47.227

我最近想出了一种更简单的方法来做到这一点。例如; 如果我想匹配`\w+\d+\w+`并且只更改数字。

```
$value = preg_replace_callback('~(\w+)(\d+)(\w+)~', function($match) {
    $match[2] = $match[2] * 2;//Do whatever I want to $match[2]
    return $match[1] . $match[2] . $match[3];
}, $value); 
```

很干净！

# python - 在 ConfigParser 中定义对象值列表

> ID：11960585
> 
> 赞同：2
> 
> 时间：2012-08-14T20:54:54.780
> 
> 标签：python, config

定义配置文件并使用 ConfigParser 定义一堆对象初始值（又名：构造函数值）来解析它的最佳方法是什么

例子：

```
[Person-Objects]
Name: X
Age: 12
Profession: Student
Address: 555 Tortoise Drive

Name: Y
Age: 29
Profession: Programmer
Address: The moon 
```

然后能够在 Python 中解析它，这样我就可以得到类似的东西：

```
People = []
for person in config:
    People.append(person)
Person1 = People[0]
print Person1.Profession     # Prints Student 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:40:16.980

您可以执行以下操作：

```
[person:X]
Age: 12
Profession: Student
Address: 555 Tortoise Drive

[person:Y]
Age: 29
Profession: Programmer
Address: The moon 
```

然后在您的代码中：

```
config = ConfigParser()
config.read('people.ini')
people = []

for s in config.sections():
    if not s.startswith('person:'):
         continue

    name = s[7:]
    person = dict(config.items(s))
    person['name'] = name

    people.append(person) 
```

# php - 为什么 Doctrine 2 找不到我的实体？

> ID：11960591
> 
> 赞同：0
> 
> 时间：2012-08-14T20:55:28.913
> 
> 标签：php, doctrine-orm

我试图通过制作一个从我的数据库中获取信息的非常简单的脚本来学习使用[Doctrine 2 。](http://www.doctrine-project.org/)问题是我找不到任何解释 Doctrine 如何查找和使用我的映射实体的文档。所以当它抱怨它没有找到一个实体时，我不知道该怎么做才能解决这个问题。考虑我的 www 文件夹中的以下结构：

*   教义/
*   实体/
*   *   人.php
*   我的TestPage.php

**人.php**

```
<?php

/** @Entity @Table(name="person")*/
class person
{
    /**
     * @Id @Column(type="integer")
     */
    protected $uid;
}
?> 
```

**我的TestPage.php**

```
<?php
    require "Doctrine/Doctrine/ORM/Tools/Setup.php";

    $lib = "Doctrine";
    Doctrine\ORM\Tools\Setup::registerAutoloadDirectory($lib);

    use Doctrine\ORM\Tools\Setup,
        Doctrine\ORM\EntityManager;

    $paths = array("/Entities");

    $isDevMode = true;

    $dbParams = array("driver" => "pdo_mysql",
        "host" => "myhost.ca",
        "user" => "Shawn",
        "password" => "noneofyourbusiness",
        "dbname" => "testDB");

    $config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);
    $em = EntityManager::create($dbParams, $config);

    $qb = $em->createQueryBuilder();
    $qb->select(array('uid'))
        ->from('person', 't');
    $query = $qb->getQuery();

    $result = $query->getResult();
    echo $result;
?> 
```

当我访问 myTestPage.php 时，我收到以下错误消息：

> 致命错误：未捕获的异常 'Doctrine\ORM\Query\QueryException' 带有消息 '[Semantical Error] line 0, col 24 near 'person': Error: Class 'person' is not defined。在第 47 行的 C:\wamp\www\Doctrine\Doctrine\ORM\Query\QueryException.php

问题似乎是Doctrine找不到person.php，但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:21:08.993

我不完全知道“re1_chercheur”是什么意思，但是当我尝试你的代码时，它抱怨没有定义人，所以我把它包括在内并且它起作用了。当然，这应该通过使用某种自动加载器来解决，但我认为教义也有一些解决方案。我没有使用他们的自动加载器，因为我有我自己的，它使用符合 PSR 的自动加载器。

同样在您的选择中，如果您只想要“uid”，请使用“t.uid”。"t" 是 person 类的别名，因此在查询的其他地方，您将使用 "t" 来获取它的属性（您可以执行 ->where("t.uid = someNumber")） . 如果你想要整个对象使用 select("t");

我发现[教义文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/index.html)很有帮助，只要确保你按照它的布局顺序进行，你很快就会掌握它的窍门。

我知道这不是一个确切的答案，但也许它为您指明了正确的方向。

# ruby-on-rails - Rails 教程：命名路由和登录表单

> ID：11960594
> 
> 赞同：0
> 
> 时间：2012-08-14T20:55:32.107
> 
> 标签：ruby-on-rails, railstutorial.org

我正在阅读 rails 教程 (railstutorial.org)，并注意到在验证发生时登录表单存在问题。我执行此操作的路线是：

```
match '/signin',  to: 'sessions#new' 
```

当验证发生时，页面的 URL 将切换到 /sessions。我的会话控制器如下所示：

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = "Invalid email/password combination"
      render 'new'
    end
  end 
```

我的问题是如何让这个经过验证的表单仍然显示为 /signin 的 url。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:16:28.403

如果你想继续使用 restful 路由（这是 Rails 的当前和长期标准），你不能。如果您不介意偏离这条路径，您可以创建一些自定义路由，而不是使用“正常”资源样式路由。

首先，您必须更改控制器并将登录操作从`create`方法移动到`new`方法（这是 /signin 路由到的）：

```
class SessionsController < ApplicationController
  def new
    if request.post?
      user = User.find_by_email(params[:session][:email])
      if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_back_or user
      else
        flash.now[:error] = "Invalid email/password combination"
      end
    end
  end
end 
```

这意味着初始的 GET /signin 请求和最终的 POST /signin 请求都将由相同的操作处理。如果检测到 POST，它将尝试登录用户并在成功时重定向。如果发出了 GET 请求，它将简单地将表单呈现为正常。

然后您必须更改您的登录表单 (app/views/sessions/new.html.erb) 以使用登录路径而不是正常路由：

```
<% form_tag '/signin' do %>
  ....
<% end -%> 
```

那应该这样做。

# python - 金字塔烧杯相对于原生金字塔会话管理的优势

> ID：11960601
> 
> 赞同：2
> 
> 时间：2012-08-14T20:56:10.467
> 
> 标签：python, authentication, pyramid

使用 pyramid_beaker 而不是只使用类似`AuthTktAuthenticationPolicy`会话身份验证的东西有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:13:21.617

`AuthTktAuthenticationPolicy`仅发布加密的身份验证 cookie，并且在技术意义上与会话无关。您只能使用它来安全地识别用户仍然是在早期 HTTP 连接期间登录的同一实体。cookie 包含在每个 HTTP 请求上重新识别用户所需的所有信息。`AuthTktAuthenticationPolicy`cookie 与[`mod_auth_tkt`Apache 模块](http://www.openfusion.com.au/labs/mod_auth_tkt/)兼容。

`pyramid_beaker`另一方面，会话使用 cookie 将返回的浏览器连接与一些持久的服务器端信息联系起来。使用这样的会话允许您的应用程序将任意数据与未存储在浏览器中的网站访问者相关联。

请参阅Wikipedia 上的[Webserver 会话管理](https://en.wikipedia.org/wiki/Session_%28computer_science%29#Web_server_session_management)

# python - 如何向 PYTHONPATH 添加一些东西？

> ID：11960602
> 
> 赞同：26
> 
> 时间：2012-08-14T20:56:09.890
> 
> 标签：python, django, django-haystack, pythonpath, pysolr

我将一个包（称为 pysolr 2.0.15）下载到我的计算机上，以便与 Haystack 一起使用。说明要求我将 pysolr 添加到我的 PYTHONPATH 中。

这到底是什么意思呢？提取 pysolr 文件后，我运行了命令 python setup.py install ，仅此而已。那做了什么，我还需要做什么吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-14T21:05:35.960

pythonpath 告诉 python 要查找模块，例如，您可能已经编写了一个要在多个应用程序中使用的库，并将其存储在路径 /mylibs/python/ 中，然后您必须将该路径添加到 python 的 pythonpath找到它。

如果你已经下载了一个 python 模块或库（我不太确定这里的命名约定）并且你只是将它保存在你计算机上的一个随机位置，那么你必须将它添加到你的 pythonpath 中。

但是，如果您使用的是 easy_install 或 PIP，那么您不必担心。

要在 *nix 系统中向 python-path 添加一些内容，请编写：

```
export PYTHONPATH=$PYTHONPATH:/<path_to_modules> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-15T12:23:57.000

也许，将 pysolr 的路径添加到 sys.path 会起作用。将其放在django 项目的settings.py 或**init .py 中：**

```
PYSOLR_PATH = '/path/to/pysolr/'
import sys
if not PYSOLR_PATH in sys.path:
    sys.path.append(PYSOLR_PATH) 
```

sys.path 是一个字符串列表，用于指定模块的搜索路径。

# javascript - !== 和 != 之间的区别

> ID：11960603
> 
> 赞同：2
> 
> 时间：2012-08-14T20:56:13.230
> 
> 标签：javascript

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)
> [Javascript 运算符 !==](https://stackoverflow.com/questions/1889260/javascript-operator)

`!=`和有什么区别`!==`？

你能给我一个例子，说明 using`!=`给出的结果不是 using`!==`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T20:57:23.433

```
alert(1 != true);
alert(1 !== true); 
```

第一个是假的，第二个是真的。

*   `!=`接受 1 等于 true，null 等于 false 和其他一些（因为在比较时会自动转换这些值）。
*   `!==`只接受“真正的”等式（即比较值和类型）。

[例子](http://jsfiddle.net/paska/CKh9R/)

# mysql - DBIx::Class 测试 mysql 日期时间函数

> ID：11960608
> 
> 赞同：2
> 
> 时间：2012-08-14T20:56:34.010
> 
> 标签：mysql, perl, datetime, catalyst, dbix-class

我正在使用[DBIx::Class](https://metacpan.org/module/DBIx::Class)并且我想根据插入的日期选择行。以下是我的查询：

```
$rows = $c->model("DB::Test")->search(
{
    "DAYOFYEAR(entry_time)"=>$day_of_year,
}); 
```

但是这不起作用，因为 DBIx::Class 将`DAYOFYEAR(entry_time)`其视为一列。无论如何我可以让它使用这个价值吗？我知道有时将其设为标量，例如`\'DAYOFYEAR(entry_time)'`适用于某些情况，但我已经尝试过，但它不起作用。有谁知道我可以做到这一点的方法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:05:06.400

使用`\`and`'DAYOFYEAR(entry_time)'`是正确的方法，也是[FAQ](https://metacpan.org/module/DBIx::Class::Manual::FAQ)的一部分。

> [我如何] **.. 使用左侧的 SQL 函数进行搜索？**
> 
> 要在比较的左侧使用 SQL 函数，您当前需要使用文字 SQL：

```
->search( \[ 'YEAR(date_of_birth) = ?', [ plain_value => 1979 ] ] ); 
```

> 注意：部分`plain_value`中的字符串`[ plain_value => 1979 ]`应该与列的名称相同（如果函数的返回值的类型与列的类型相同，则执行此操作）或者对于当前为函数的情况被视为一个虚拟字符串（使用`plain_value`或类似的东西来传达意图是一个好主意）。该值目前仅在处理特殊列类型（BLOB、数组等）时才有意义，但将来可能会改变。

# mysql - BASH中如何判断mysql中是否有用户？

> ID：11960610
> 
> 赞同：1
> 
> 时间：2012-08-14T20:56:41.623
> 
> 标签：mysql, bash

如何确定 BASH 中的 mysql 中是否有用户？

```
if [ "$NAME_USER" == ???? ]; then
  echo "User exists in MySQL"
else
  echo "User no exists in MySQL"
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:37:06.360

```
while read User; do
    if [[ "$NAME_USER" == "$User" ]]; then
        echo "$User exists in MySQL"
        break
    fi
done < <(mysql -B -N -e 'use mysql; SELECT `user` FROM `user`;')

if [[ "$NAME_USER" != "$User" ]]; then
    echo "$NAME_USER does not exists in MySQL"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:57:45.177

您可以附上一个脚本来进行 mysql 查询，然后解析输出。

# jquery - 在 jquery 模态对话框 onclick 中加载外部 php 文件

> ID：11960619
> 
> 赞同：8
> 
> 时间：2012-08-14T20:57:24.790
> 
> 标签：jquery, modal-dialog

当用户单击链接时，我试图打开一个 jquery 模式对话框。然后我想将一个外部 php 文件加载到对话框中。我正在使用这个 jquery：

```
$(document).ready(function() { 
     $('#register').dialog({
         title: 'Register for LifeStor',
         resizable: true,
         autoOpen:false,
         modal: true,
         hide: 'fade',
         width:350,
         height:275,
      });//end dialog   
      $('#reg_link').click (function() {
          open: (function(e) {
             $('#register').load ('register.php');
        });
      }); 
    }); 
```

这个html：

```
<div id="register"></div> 
```

在 .css 文件中设置为 display:none 。

更进一步，在表单内部，链接被称为：

```
<td><font size="2">Not registered? <a href="#" name="reg_link">Sign-Up!</a></td> 
```

（我会将表格更改为 div）。

这段代码我没有收到任何错误，但是当我单击链接时没有任何反应。我从其他堆栈溢出帖子中获得了上述大部分内容。我错过了什么吗？表格 html 有干扰吗？

问候...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T21:21:01.863

在您的链接中

```
<a href="#" name="reg_link">Sign-Up!</a> 
```

你有`name="reg_link"`那个应该是`id="reg_link"`，即

```
<a href="#" id="reg_link">Sign-Up!</a> 
```

所以它将与以下代码一起使用

```
$('#reg_link').click(function(e) {
    e.preventDefault();
    $('#register').load('register.php');
}); 
```

要使其成为对话框，您可以使用

```
$(document).ready(function() { 

     var dlg=$('#register').dialog({
        title: 'Register for LifeStor',
        resizable: true,
        autoOpen:false,
        modal: true,
        hide: 'fade',
        width:350,
        height:275
     });

     $('#reg_link').click(function(e) {
         e.preventDefault();
         dlg.load('register.php', function(){
             dlg.dialog('open');
         });
      }); 
}); 
```

[**只是一个例子**](http://jsfiddle.net/YDdqP/3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:02:38.230

加载页面后创建对话框[`.load()`](http://api.jquery.com/load/)，将容器的内容替换为新内容

你的点击处理程序有语法错误，看起来你传递了一个函数和一个对象的组合作为参数，它应该是一个正常的函数。像

```
$('selector').click (function() {
     //code
}); 
```

此外，您的`<a>`元素`reg_link`的名称不是 id

```
$(document).ready(function() { 
    $('#reg_link').click (function() {
        $('#register').load ('register.php', function(){
            $('#register').dialog({
                title: 'Register for LifeStor',
                resizable: true,
                modal: true,
                hide: 'fade',
                width:350,
                height:275,
            });//end dialog   
        });
    });
});

<td><font size="2">Not registered? <a href="#" name="reg_link" id="reg_link">Sign-Up!</a></td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:05:29.893

我对该`.dialog()`功能并不完全熟悉，但是您使用`.click()`错误。部分问题是关于花括号的一些混淆`{}`。它们用于两个完全独立的事情，而您在这里将两者混合在一起。

花括号的第一个用途是表示块的内部：循环内部、条件内部、函数内部。例如：

```
// some code in the global scope
function something()
{
    // some different code within this function block
}
// function's done, we're back in global scope 
```

第二种用途是用于对象或关联数组的 JSON（JavaScript 对象表示法），其中属性或值与以下格式的名称或键配对：

```
var jsonSomething = {
    key1: value1,
    key2: value2,
    etc: etcvalue,
}; 
```

当您编写 时`$('#reg_link').click (function() {`，您打开的是带有花括号的功能块，而不是启动 JSON。因此，当您编写时`open:`（好像这*是*一个 JSON 并且您正在设置`open`密钥），某些事情肯定不会按照您期望的方式工作（我很惊讶......有点......没有错误，实际上）。您需要在这些花括号中编写的是函数代码。在这种情况下，它可能只是这样：

```
$('#reg_link').click (function() {
    $('#register').load ('register.php');
}); 
```

一般来说，jQuery 经常使用这两个版本，并且经常将它们混合在一起（接受 JSON 作为参数的函数，或包含函数回调作为条目的 JSON），因此了解哪个是哪个非常重要*。*

编辑：一些谷歌搜索：`.dialog()`建议您还需要在之后调用它`.load()`，这意味着该块应如下所示：

```
$('#reg_link').click (function() {
    $('#register').load ('register.php').dialog(/*argument(s) here*/);
}); 
```

根据您自己的代码，`.dialog()`实际上是一个将 JSON 作为参数的函数示例，因此假设该位正确，完整代码如下所示：

```
$('#reg_link').click (function() {
    $('#register').load ('register.php').dialog({
        title: 'Register for LifeStor',
        resizable: true,
        autoOpen: false,
        modal: true,
        hide: 'fade',
        width:350,
        height:275,
    });
}); 
```

# regex - while 循环内的正则表达式语句仅匹配并打印几个预期匹配项之一

> ID：11960622
> 
> 赞同：0
> 
> 时间：2012-08-14T20:57:33.823
> 
> 标签：regex, perl

我已经为此苦苦挣扎了一段时间，我想知道我是否遗漏了一些明显的东西。

作为编程学习/实践，我正在尝试编写一个简单的脚本来计算限制酶消化混合物的成分。但是，首先我需要获得一份酶储备浓度列表。

我从 New England Biolabs[酶页面](http://www.neb.com/nebecomm/tech_reference/restriction_enzymes/buffer_activity_restriction_enzymes.asp?)中提取了所有单独的页面，我使用当前脚本的目标是提取酶的名称和公司提供的浓度。

此示例适用于 EcoRI 的本地副本（链接包含在提交的底部）。

```
use warnings;
use strict;
open(FILE,'productR0101.asp');
my $line;
my $counter;
my $array1;
my $array2;
my $array3;
my $concentration;
my @array4;
$counter = 1;

while ($line = <FILE>) {
    chomp($line);

    if ($counter == 6 ){
        $array1 = $line;
        $counter++;
    }
    else{
        $counter++;
    }

    if ($line =~ m/.{8}units.ml/g) {
        (@array4) =$line =~ m/.{8}units.ml/g;
        print @array4;
    }
}
print "\n".$array1;
exit; 
```

每个文件在文件的第六行都有酶名称，所以我只拉了整行。但是，浓度在不同的位置，所以我的方法是一次读取一行文件，并匹配`units/ml`标签。

我的想法是它应该打印出每一行的匹配，如果有的话，每次 while 循环运行时，有效地产生一串单独的打印语句。

这就是我搞砸的地方。该文件中有六个不同的位置带有`units/ml`标签：三个 for`20,000`和三个 for `100,000`。

我期待打印六个不同的结果，但是当我运行它时，只`100,000 units/ml`返回一个结果。

我已经尝试了各种修复。我尝试连接字符串，尝试将其存储为字符串，尝试将其连接到另一个从未被该`(@array4) = $line =~ m/.{8}units.ml/g`行触及的数组上，它要么破坏它，要么给出相同的结果。

最后，我为任何奇怪的约定道歉。我还在学习 Perl，我的第一次编程经验是使用 MATLAB。

此外，存在`$array1`,`$array2`等是因为我试图准确跟踪放在哪里；我的目的是在我让它正常工作后清理它。

那么有人对我做错了什么有任何想法吗？

编辑：数据源是每个酶页面的源代码。对于此示例，如果您查看[页面源代码](http://www.neb.com/nebecomm/products/productR0101.asp)，您将获得我提供给脚本的完整输入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:15:48.883

是`20,000 units/ml`在行的开头吗？因为在这种情况下，`.{8}`将无法匹配 - 点不匹配换行符，并且`20,000_`只有 7 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:15:24.940

我们确实需要查看您正在处理的数据，但看起来您只存储了*最后一次*出现的`/units.ml/`in，`@array4`因为您正在逐行读取文件。

如果您补充您的问题，我将添加到此答案中，但现在我需要知道

*   您的数据是什么样的

*   神秘`/.{8}/`是为了什么

*   您是否知道`$array1`,`$array2`和`$array3`, 是*标量*，并且是非常糟糕的变量名称？

现在，这里是使用惯用 Perl 重写您的代码，以及`$.`计算为最近读取的文件的行号的变量

```
use strict;
use warnings;

open my $file, '<', 'productR0101.asp' or die $!;

my $array1;
my @array4;

while (my $line = <$file>) {

  chomp $line;

  $array1 = $line if $. == 6;

  if ($line =~ m/.{8}units.ml/) {
    @array4 = $line =~ m/.{8}units.ml/g;
    print "@array4\n";
  }
}

print "\n".$array1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:24:46.793

我无法完全重现您报告的仅获得 100,000 单位/毫升结果之一的行为，因为我不确定您的输入数据是什么。但是，我认为问题在于正则表达式没有任何捕获。您应该在要返回给@array4 的正则表达式匹配部分周围加上括号。所以代替这个：

```
@array4 = $line =~ m/.{8}units.ml/g; 
```

试试这个：

~~@array4 = $line =~ m/(.{8})units.ml/g;~~

```
@array4 = $line =~ /(.{8})units.ml/; 
```

编辑：您也不想使用 m/ 和 /g 修饰符。

# java - JUDDI：（/juddiv3/services）不可用

> ID：11960627
> 
> 赞同：1
> 
> 时间：2012-08-14T20:57:53.277
> 
> 标签：java, tomcat, uddi, juddi

[按照此处http://thoughtsasaservice.wordpress.com/tag/juddi/](http://thoughtsasaservice.wordpress.com/tag/juddi/)的说明安装 juddi 服务器后， 我可以在此处进入主界面：

```
http://localhost:8181/juddiv3/ 
```

但是当我点击（查看服务列表）时，我发现 404 错误

```
HTTP Status 404 - /juddiv3/services
type: Status report
message: /juddiv3/services
description: The requested resource (/juddiv3/services) is not available. 
```

此外，当我进入

```
http://localhost:8181/pluto/portal/jUDDI 
```

我发现了这个错误：

```
 Error rendering portlet.

org.apache.pluto.PortletContainerException: Unable to obtain the servlet context for the portlet app context path [/uddi-portlets]. Make sure that the portlet app has been deployed, and that cross context support is enabled for the portal app.
    at org.apache.pluto.core.PortletContainerImpl.getPortletAppContext(PortletContainerImpl.java:429)
    at org.apache.pluto.core.PortletContainerImpl.doRender(PortletContainerImpl.java:155)
    at org.apache.pluto.driver.tags.PortletTag.doStartTag(PortletTag.java:152)
    at org.apache.jsp.WEB_002dINF.themes.portlet_002dskin_jsp._jspx_meth_pluto_005fportlet_005f0(portlet_002dskin_jsp.java:105)
    at org.apache.jsp.WEB_002dINF.themes.portlet_002dskin_jsp._jspService(portlet_002dskin_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.WEB_002dINF.themes.pluto_002ddefault_002dtheme_jsp._jspx_meth_c_005fforEach_005f0(pluto_002ddefault_002dtheme_jsp.java:472)
    at org.apache.jsp.WEB_002dINF.themes.pluto_002ddefault_002dtheme_jsp._jspx_meth_c_005fwhen_005f0(pluto_002ddefault_002dtheme_jsp.java:428)
    at org.apache.jsp.WEB_002dINF.themes.pluto_002ddefault_002dtheme_jsp._jspx_meth_c_005fchoose_005f0(pluto_002ddefault_002dtheme_jsp.java:389)
    at org.apache.jsp.WEB_002dINF.themes.pluto_002ddefault_002dtheme_jsp._jspService(pluto_002ddefault_002dtheme_jsp.java:227)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.apache.pluto.driver.PortalDriverServlet.doGet(PortalDriverServlet.java:151)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

请指教。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:38:09.117

错误消息表明并非所有 jUDDI 的 web 应用程序都已成功部署。检查 catalina.out，因为在您发布之前可能还有更多问题。

请记住，jUDDI 对其底层软件（如 JDK、MySQL 和 Tomcat）非常敏感。

[确保您的版本与http://thoughtsasaservice.wordpress.com/2011/07/22/how-to-install-juddi-on-tomcat/](http://thoughtsasaservice.wordpress.com/2011/07/22/how-to-install-juddi-on-tomcat/)中描述的版本完全相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T02:14:38.013

我建议从 Apache jUDDI 网站下载预打包的版本。最新版本 (3.1.5) 可以工作，但是我认为 portlet 不能工作。

或者，您可以从主干获取源代码并构建具有全新用户界面的 3.2。

编辑：如果启动页面有效，而服务列表无效，则可能表明您正在使用不同的肥皂堆栈（Apache CXF 除外）。如果这是真的，那么它可能在不同的 url 上列出服务。

# objective-c - CGRectIntersection 需要标量类型？

> ID：11960629
> 
> 赞同：0
> 
> 时间：2012-08-14T20:57:59.357
> 
> 标签：objective-c, compiler-errors

我正在尝试检查来自 a 的对象`NSMutableArray`与另一个对象的碰撞（使用 a `CGRect`），但它一直说该方法需要标量类型？！

这是引发错误的方法：

```
-(void) checkSquareToCircleCollisions{
    NSMutableArray *array = [squares getSquares];

    for(int i = 0; i < [squares getCount]; i++){
        Square *s = [array objectAtIndex: i];
        CGRect rect1 = [player getRect];
        CGRect rect2 = [s getRect];

        //if(CGRectIntersection(rect1, rect2)){
            //[player setAlive: NO];
       // }

    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:12:13.867

使用[`CGRectIntersectsRect`](https://developer.apple.com/library/etc/redirect/xcode/ios/30c85e/documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectIntersectsRect)，不使用`CGRectIntersection`。

`CGRectIntersectsRect`返回一个布尔值：如果矩形相交，则返回 YES。 `CGRectIntersection`返回`CGRect`两个矩形之间的重叠（如果有）。

```
if (CGRectIntersectsRect(playerRect, squareRect)) {
    player.alive = NO;
} 
```

# c++ - C ++迭代智能指针向量

> ID：11960631
> 
> 赞同：11
> 
> 时间：2012-08-14T20:58:14.380
> 
> 标签：c++, stl, vector, smart-pointers

我有一个具有此功能的类：

```
typedef boost::shared_ptr<PrimShapeBase> sp_PrimShapeBase; 

class Control{
     public:
         //other functions
         RenderVectors(SDL_Surface*destination, sp_PrimShapeBase);
     private:
         //other vars
          vector<sp_PrimShapeBase> LineVector;

};

//the problem of the program

void Control::RenderVectors(SDL_Surface*destination, sp_PrimShapeBase){
    vector<sp_PrimShapeBase>::iterator i;

    //iterate through the vector
    for(i = LineVector.begin(); i != LineVector.end(); i ++ ){
      //access a certain function of the class PrimShapeBase through the smart
      //pointers
      (i)->RenderShape(destination); 

    }
} 
```

编译器告诉我 boost::shared_ptr 类没有名为“RenderShape”的成员，我觉得这很奇怪，因为 PrimShapeBase 类当然具有该功能，但位于不同的头文件中。这是什么原因？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T20:59:25.447

你不是说

```
(*i)->RenderShape(destination); 
```

?

`i`是迭代器，`*i`是`shared_ptr`，`(*i)::operator->()`是对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T21:00:48.537

那是因为`i`是一个迭代器。取消引用它一次会给你智能指针，你需要双重取消引用它。

```
(**i).RenderShape(destination); 
```

或者

```
(*i)->RenderShape(destination); 
```

# c++ - 调整模板对象的矢量大小时出错

> ID：11960635
> 
> 赞同：0
> 
> 时间：2012-08-14T20:58:34.987
> 
> 标签：c++, templates, hash, vector, resize

我正在尝试创建模板对象的向量向量。当我尝试调整内部向量的大小并且我无法制作错误消息的头部或尾部时会发生错误。我不知道它从哪里得到 HashTable::Item::Item。有什么建议么？

> /usr/include/c++/4.4.6/bits/stl_vector.h(552)：错误：没有构造函数实例“HashTable::Item::Item [with Key=int, Value=Varvalue]”匹配参数列表调整大小(size_type __new_size, value_type __x = value_type())
> 
> ```
>  detected during:
>        instantiation of "void std::vector<_Tp, _Alloc>::resize(std::vector<_Tp, _Alloc>::size_type={size_t={unsigned long}}, std::vector<_Tp, _Alloc>::value_type) [with _Tp=HashTable<int, Varvalue>::Item, _Alloc=std::allocator<HashTable<int, Varvalue>::Item>]" at line 118 of "main.cc" 
> ```

以下是相关代码：

```
#define VECLEN 16
类 Varvalue
{
上市：
        字符数据[32]；
};模板
类哈希表
{
私人的：
    类项目
    {
    上市：
        布尔有效；
        钥匙钥匙；
        价值价值；
        项目 *下一个；

        Item(const Key k, const Value v, Item *b = 0, bool val = true):
            键（k），值（v），下一个（b），有效（val）{}
    };

```
vector<vector<Item> > table;
    int tableSize;
    HashTable(const int s): tableSize(s)
    {
            table.resize(tableSize);
            for(int i=0; i<table.size(); i++)
                  table[i].resize(VECLEN);       // <<-- error line 118
    } 
```

}

int main()
{
    HashTable<int, Varvalue> htable(nkeys);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:01:02.367

`Item`没有默认构造函数，因此您需要为`resize`a提供 2 个参数`vector<Item>`。后一个参数应该是`Item`填充向量的“默认值”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:11:20.317

在 C++ 中，当您声明一个类并且不提供构造函数时，会自动生成一个默认构造函数（没有任何输入参数）。当您使用输入参数声明构造函数时，您不会获得默认构造函数。在您的情况下，您确实为`item`需要 k 和 v 作为输入参数的类声明了一个构造函数，但您没有提供它们，因此要么声明一个没有输入参数的构造函数，`item`要么提供 k 和 v。

# css - 如何使 div 在其他两个 div 之间拉伸其高度并将其内容居中

> ID：11960636
> 
> 赞同：4
> 
> 时间：2012-08-14T20:58:35.907
> 
> 标签：css, html, height

我想制作一个包含 3 个部分的单列布局

第 1 部分：页眉 第 2 部分：从页眉下方延伸到页脚开头的内容部分，其内容在其自身内垂直和水平居中 第 3 部分：始终位于浏览器窗口底部的页脚。

问题：

我无法让内容 div 延伸到页脚/底部 div 的开头。如果我输入 height:100% 它会自动延伸到整个页面的末尾。

还想将这个中间 div 中的内容垂直和水平居中 - 尽管我还没有尝试这样做。

也不明白为什么标题文本的背景不是彩色的。即使子标题 div 被定义了背景颜色的标题 div 封装。

谢谢！

[http://jsbin.com/ixipug/1/edit](http://jsbin.com/ixipug/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

html {
    height: 100%;

}

body {

    height: 100%;
    margin-left: 20px;
    margin-top:0px;
    margin-bottom: 0px;

}

#containerHeaderContent {
   min-height:100%;
   height: auto;
   height: 100%;
   margin: 0 auto -1.5em;
}

.push {
height: 1em;
}

.header {
    background-color: aqua;
    padding-top:20px;
    }

.subheader-left {

    float:left;
    font-family: serif;
    font-size: 20px;
    text-align: left;
}

.subheader-right{

    float: right;
    font-family: sans-serif;
    font-size: 12px;
    padding-right: 20px;}

.middleSection {
    padding-top: 10px;
    clear:both;
    width:100%;
    height auto;
    background-color: #e8e7e7;

}

.bottom{
background-color: red;
position: absolut;
height: 1em;
font-size: small;

}
.bottom-left {

    float:  left;
    font:   sans-serif;
    left:   20px;
}

.bottom-right {

    float:      right;
    right:      15px;
    font-style: italic;
    color:      #8e8e8e;
    font-size:  11px;
}

</style>

<title>XYZ</title>

</head>
<body>

<div id="containerHeaderContent">

    <div class="header">
        <div class="subheader-left">XYZ</div>
        <div class="subheader-right">LOREM</div>
    </div>

 <div class="middleSection">Content Vertical and Horizontally Centered inside DIV</div> 

<div class="push"></div>

</div>

<div class="bottom">
    <div class="bottom-left">
        <span class="about">
            <span class="bold">XYZ</span> is a project by XZY.&nbsp;&nbsp;&#124;&nbsp;
            <span="address">Website Information</span> &mdash; <a href="mailto:info@info.eu">info@info.com</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

        </span>
</div>

<div class="bottom-right">
    <span class="openinghours">Open by Appointment</span><span class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sponsored by XYZ</span>
</div>
</div>

</body>
</html><!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T21:57:46.043

# 2018 年更新

使用 flexbox 或 css 网格。这是一个弹性盒示例。Css 网格可能更简单，但支持率仍然很低：

```
body, html { padding: 0; margin: 0; }
header { background: #faa; }
article { background: #afa; }
footer { background: #aaf; }

.page {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
}

article {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}
```

```
<div class="page">
  <header>header content</header>
  <article>main content</article>
  <footer>footer content</footer>
</div>
```

* * *

无需使用表！一些简单的 css 会做得很好。

演示：http: [//jsbin.com/azivip/2/edit](http://jsbin.com/azivip/2/edit)

html标记：

```
<body>
  <div id="content">
    <div id="header">
      This is the header
    </div>
    <div id="inner">
      This is the body
     </div>
    <div id="footer">
      this is the footer
    </div>
  </div>
</body> 
```

CSS：

```
body{
  height:100%;
  padding:0px;
  margin:0px;
}
    #content{
      position:relative;
      bottom:0px;
      width:100%;
      height:100%;
    }
        #header{
          position:relative;
          bottom:0px;
          width:100%;
          height:100px;    /* Edit for height of header*/
          background:#f00;
        }
        #inner{
          width:100%;
          text-align:center;
          position: absolute; 
          top: 50%;
          display: table-cell; 
          vertical-align: middle;
        }
        #footer{
          position:absolute;
          bottom:0px;
          width:100%;
          height:100px;   /* Edit for height of footer */
          background:#0f0;
        } 
```

为了在`#inner`多行内容中保持垂直居中，您需要使用 Javascript/jQuery。下面是一个示例脚本，它“拉起”`#inner`恰到好处的居中量。

```
var mrgntop = -Math.floor($("#inner").height() / 2);
$("#inner").css({"margin-top":mrgntop}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:13:58.343

`<table>`是您在这种情况下需要使用的。HTML 将如下所示，基本上：

```
<table class = "wrapper">
    <tr><td class = "header">I'm the header.</td></tr>
    <tr><td valign = "middle" class = "content">Some content. Some content. More content. More content. Content is great. Content is a great thing to talk about when trying to insert random content to elaborate behavior. Content.</td></tr>
    <tr><td class = "footer">I'm the footer.</td></tr>
</table> 
```

示例 CSS：

```
html, body, .wrapper {
   height: 100%;   
}
.header {
    height: 100px; /*This value can be anything*/
}
.content {
    text-align: center;
}
.footer {
    height: 100px;
} 
```

演示：[jsFiddle](http://jsfiddle.net/n8sZ7/2/)。请注意内容如何垂直和水平居中。

希望有帮助！

# android - 绕过插入物理键盘时禁用 android 键盘

> ID：11960637
> 
> 赞同：0
> 
> 时间：2012-08-14T20:58:39.333
> 
> 标签：android, keyboard, android-softkeyboard

将读卡器用于将连接到安卓设备的 POS 系统。插入时似乎禁用了android软件键盘。

有没有办法定义是否禁用/启用每个控件的android键盘或绕过android软键盘被禁用的方法？

谢谢，

W

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:00:26.547

`((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE))
.showSoftInput(editText, 0);`

以上强制软键盘可见。祝你好运

# mysql - 如果选择部分匹配该行的列之一，则触发对该行列的更新

> ID：11960643
> 
> 赞同：0
> 
> 时间：2012-08-14T20:59:27.203
> 
> 标签：mysql

为了更清楚：

表格*thetable* `(id int, username varchar(30), password varchar(30), last_successful_login timestamp, last_unsuccessful_login timestamp, another_variable varchar(30))`有以下一行：(1, "tgh", "pass", 0, 0, "another")

**1) 错误的用户/通行证对，但有一行与*用户名***

我想用AND`select id from thetable where username="tgh" and password="wrongpass" and another_variable="another";`更新`last_unsuccessful_login`所有行的列（这是唯一的，不能有两行（“tgh”，“another”）对。但是可以有（“tgh”，“another2”）。 ) 到.`username="tgh"``another_variable="another"``CURRENT_TIMESTAMP`

因此，示例行将是`(1, "tgh", "pass", 0, CURRENT_TIMESTAMP, "another")`，**在*不完全*匹配的*“选择”*查询***之后。*

 *更清楚地说，我试图避免只在表上运行额外的更新`username="tgh"`，`another_variable="another"`即`update thetable set last_unsuccessful_login=CURRENT_TIMESTAMP where username="tgh" and another_variable="another";`，根据选择的结果。

**2) 正确的用户/通行证对**

另外，如果所有三个`username`and`password`都`another_variable`匹配，这次我想将 设置`last_successful_login`为`CURRENT_TIMESTAMP`。

这将使示例行 `(1, "tgh", "pass", CURRENT_TIMESTAMP, 0, "another")

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:57:03.673

您的问题的简短回答是否定的，SELECT 语句不可能导致或触发更新。（这里需要注意的是 SELECT 语句可以调用可以执行 UPDATE 的 FUNCTION（MySQL 存储程序）。）

您无法绕过发布 UPDATE 语句；UPDATE 语句必须从某个地方发出，而 SELECT 语句不能“触发”它。

可以使用单个 UPDATE 语句根据密码列中的当前值检查提供的密码，并设置 last_successful_login 和 last_unsuccessful_login 列，例如：

```
UPDATE thetable 
   SET last_successful_login = 
       IF(IFNULL(password,'')='wrongpass',CURRENT_TIMESTAMP,0)
     , last_unsuccessful_login = 
       IF(IFNULL(password,'')='wrongpass',0,CURRENT_TIMESTAMP)
 WHERE username='tgh' 
   AND another_variable='another' 
```

因此，您可以先发出 UPDATE 语句；然后发出 SELECT 语句。

如果您想尽量减少到数据库的“往返”次数，以增加复杂性为代价（让其他人更难弄清楚发生了什么），您可以将 UPDATE 语句放入存储的程序中。如果你把它放到一个函数中，你可以设置返回值来表示登录是否成功。

```
SELECT udf_login('username','wrongpass','another') 
```

因此，从您的应用程序看来，您正在执行登录检查，但被调用的函数可以执行 UPDATE。

```
CREATE FUNCTION `udf_login`
( as_username         VARCHAR(30)
, as_password         VARCHAR(30)
, as_another_variable VARCHAR(30) 
) RETURNS INT
READS SQL DATA
BEGIN
   UPDATE `thetable`
      SET `last_successful_login` = 
          IF(IFNULL(`password`,'')=IFNULL(as_password,''),CURRENT_TIMESTAMP,0)
        , `last_unsuccessful_login` = 
          IF(IFNULL(`password`,'')=IFNULL(as_password,''),0,CURRENT_TIMESTAMP)
    WHERE `username` = as_username
      AND `another_variable` = as_another_variable;

   -- then perform whatever checks you need to (e.g)
   --     SELECT IFNULL(t.password,'')=IFNULL(as_password,'') AS password_match
   --       FROM `thetable` t
   --      WHERE t.username = as_username
   --        AND t.another_variable = as_another_variable
   -- and conditionally return a 0 or 1
   RETURN 0;
END$$ 
```*

# jquery - JQuery vs 同源策略

> ID：11960646
> 
> 赞同：2
> 
> 时间：2012-08-14T20:59:35.207
> 
> 标签：jquery, ads, same-origin-policy

我在我的网站上使用了一个广告内容提供商，我真的很喜欢它的简单实施，但是有时他们的广告会播放烦人的视频和音频，即使他们承诺会阻止这些东西-_-。

我尝试编写一个递归 javascript/JQuery 函数来深入研究 IFrame 并查找和禁用任何 Flash 视频对象，但我最终了解到“同源策略”的复杂性，它不会让我深入研究任何 IFrame不属于我自己的网站。我也想过从广告中提取 HTML 并通过我的服务器运行以进行验证，但是 1\. 广告几乎每次点击页面时都会旋转 2\. 如果我显示来自的 HTML，我认为它不会计算在内广告没有正确通过内容提供商的网站，并且 3\. 我不希望我的服务器上的开销放在首位。

我已向广告内容提供商的客户服务部门发送了一封电子邮件，但我希望能够在必要时自行解决此问题。我能做些什么来阻止这种情况，而不是阻止我一半的创收广告试图找出哪些有视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:02:52.053

您可以尝试代理广告的负载。但实际上，你对广告做的任何事情都可能违反广告公司的服务条款。（从他们的角度想一想：如果他们知道你在搞乱他们的广告，他们愿意给你钱吗？）

大多数广告供应商确实提供了某种程度的定制（例如，竞争对手的广告不会出现在您的网站上），所以这可能是您应该追求的。要么，要么获得不同的广告提供商。

# vb.net - 没有编辑器字段项不保存

> ID：11960649
> 
> 赞同：0
> 
> 时间：2012-08-14T20:59:59.293
> 
> 标签：vb.net, asp.net-mvc-3, razor

我试图让用户创建一个对象并将其保存到数据库中。我已经正确地搭建了所有脚手架等，并将我的控件修改为以下内容：

```
 Function Create(id As Integer) As ViewResult
        ViewBag.id = id
        Dim job As Job = New Job
        job.CustomerId = id
        job.JobAmount = 0
        job.JobDate = Date.Now()
        job.JobStatus = "Active"
        Return View(job)
    End Function 
```

然后返回以下视图：

```
 @ModelType Laundry.Job

        @Code
            ViewData("Title") = "Create"
        End Code

        <h2>Create</h2>

        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

        @Using Html.BeginForm()
            @Html.ValidationSummary(True)
            @<fieldset>
                <legend>Job</legend>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.JobDate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.JobDate)
                    @Html.ValidationMessageFor(Function(model) model.JobDate)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.BillId)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.BillId)
                    @Html.ValidationMessageFor(Function(model) model.BillId)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.CustomerId)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.CustomerId)
                    @Html.ValidationMessageFor(Function(model) model.CustomerId)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.JobStatus)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.JobStatus)
                    @Html.ValidationMessageFor(Function(model) model.JobStatus)
                </div>

                <p>
                    <input type="submit" value="Create" />
                </p>
            </fieldset>
        End Using

        <div>
            @Html.ActionLink("Back to List", "Index")
        </div> 
```

我创建了一个作业实例并将其通过控制器传递给视图，以便默认某些值。具体来说，我需要创建一个带有传递给控制器​​的 id 的作业对象，但我不希望用户能够编辑这个 id（他们不应该看到这个）。我想如果我只是从我的观点中删除以下内容：

```
 <div class="editor-label">
                    @Html.LabelFor(Function(model) model.CustomerId)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.CustomerId)
                    @Html.ValidationMessageFor(Function(model) model.CustomerId)
                </div> 
```

该对象仍会使用我在控制器中设置的 customerId 保存，但是如果我在保存时删除此代码，它将 customerid 保存为 0，并且当它在那里正常工作但用户可以查看和编辑它时，它似乎会保存。

我这样做正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:04:10.647

> 我不希望用户能够编辑这个 id（他们不应该看到这个）

用于`@Html.HiddenFor(Function(model) model.CustomerId)`此。它将值从视图保存到控制器，但对用户不可见。

# php - 使用 PHP 在 Mysql 表中插入多行

> ID：11960650
> 
> 赞同：0
> 
> 时间：2012-08-14T21:00:01.603
> 
> 标签：php, mysql, record

我在这里修复。我的代码不会使用一种形式将多个数据插入到 mysql 表中。这是我的代码-

```
<?php
if (isset($_POST['submitted'])) {
  include('config.php');
  foreach($_POST['name'] as $row=>$nam) {
    $name=$nam;
    $class=$_POST['class'][$row];
    echo "<br/>" . $name . "<br/>" . $class;
    $sql="INSERT INTO multiple (name, class) VALUES ('$name','$class')";
  }
  if (!mysql_query($sql)) die('Error: ' . mysql_error());
  echo "1 record added";
}
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<label>Name1:
<input id="name" name="name[]" type="text">
<input type="hidden" name="submitted" value="true" />
</label>
<label> Class1:
<input id="class" name="class[]" type="text">
</label>
<label>Name2:
<input id="name" name="name[]" type="text">
</label>
<label>Class2:
<input id="class" name="class[]" type="text">
</label>
<label>Name3:
<input id="name" name="name[]" type="text">
</label>
<label>Class3:
<input id="class" name="class[]" type="text">
</label>
<label>Name4:
<input id="name" name="name[]" type="text">
</label>
<label>Class4:
<input id="class" name="class[]" type="text">
</label>
<label>Name5:
<input id="name" name="name[]" type="text">
</label>
<label>Class5:
<input id="class" name="class[]" type="text">
</label>
<input value="Add" type="submit">

</form> 
```

当我按下提交按钮时，mysql 表中没有插入任何内容。仅创建空字段。如果我插入 5 个文本字段，我会在 sql 表中得到 5 个空字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:09:38.803

我认为您的插入查询有问题.....尝试这样

```
$query = mysql_query("INSERT INTO category VALUES('','$name','$class','')") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:27:33.950

Imroz，您在发布表单时将其`[]`用作输入元素（而不是 id）名称的一部分，`name="class[]"`它会构建一个数组。PHP 可以识别的 post 对象是`$_POST['class']`

但是作为一个数组意味着你必须在将它插入数据库之前处理它略有不同，因为你不能只是（也许你可以）将一个数组放入数据库

如果你这样做了

```
for($x=0;$x < count($_POST['class']); $x++)
{
    echo $_POST['class'][$x].'<br>';
} 
```

您将能够从带有名称的输入中看到您发布的所有输入`class[]`

当然，这是您整体需要做的一个核心示例，但我只是想表达您发布的数据的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:52:46.537

你有`}`错误的地方。

右`}`后`$sql=`应移到后`echo "1 record added";`

我重新格式化您的代码以使用正确的缩进并且错误很明显。

# c# - Ado.net provider 2.0 for .C# .net provider 4.0

> ID：11960659
> 
> 赞同：0
> 
> 时间：2012-08-14T21:00:46.337
> 
> 标签：c#, sqlite

我在我的 c# 应用程序 .net 框架 4.0 中使用 Sqlite ADO.NET 提供程序 2.0。

`Question1:`这个 .dll 是否带有备份数据库功能？如果用户想要备份，看来我必须获取源代码并编写自己的备份功能。或者它已经提供了，我只需要使用它？

```
Question2 : 
```

我尝试从该网站下载最新版本的 Sqlite ADO.NET 提供程序（第 3.5/4.0 行）

```
http://www.sqlite.org/download.html/ 
sqlite-dll-win32-x64-3071300.zip 
```

附加dll作为参考后，它仍然说

```
 Version v2.0.50727\. 
Description: ADO.NET 2.0 Data Provider for SQLite. Is this correct stable version or is there a recent one to be used. 
```

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:04:59.130

对于问题 1：ADO.NET 提供程序并不***意味着***具有备份功能。这是 RDBMS 软件应该具备的。ADO.NET 只是一个用于简化与 RDBMS 通信的工具。
- 但是，SQLLite 备份记录在[http://www.sqllite.org/backup.html](http://www.sqllite.org/backup.html)

对于#2，我没有看到任何问题 - 只是声明您收到了来自 Visual Studio 的警告。但根据我所看到的，你**会**得到一个错误。您正在尝试为 .NET 3.5 或更高版本使用 SqlLite 提供程序，并且您的 .NET 项目设置为 2.0。将您的应用程序升级到 3.5 或更高版本，或者寻找较旧的 .dll 以下载和使用。

作为***一般经验法则***，在 .NET 项目中，您可以使用为较旧版本的框架指定的 .dll 文件，但不能使用为较新版本指定的 .dll。

# java - Java Quartz Ibatis Cron 问题

> ID：11960661
> 
> 赞同：0
> 
> 时间：2012-08-14T21:00:54.490
> 
> 标签：java, mysql, quartz-scheduler, ibatis

我有一个使用 ibatis 行处理程序的 java webapp 来加载一个非常大的数据集（innodb 表中的 100 万行）。该过程由石英调度程序作为每晚的 cron 作业运行。但是，在它处理 6 分钟后，它会因以下堆栈跟踪而死亡：

```
WARN [DefaultQuartzScheduler_Worker-8] MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(168) | Could not invoke method 'doBatch' on target object [org.myCron@4adb34]
org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation: encountered SQLException [  
--- The error occurred in org/myCron/mySqlMap.xml.  
--- The error occurred while applying a result map.  
--- Check the mySqlMap.outputMapping.  
--- The error happened while setting a property on the result object.  
--- Cause: com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.io.EOFException

STACKTRACE:

java.io.EOFException
        at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1903)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2402)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2860)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:771)
        at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1289)
        at com.mysql.jdbc.RowDataDynamic.nextRecord(RowDataDynamic.java:362)
        at com.mysql.jdbc.RowDataDynamic.next(RowDataDynamic.java:352)
        at com.mysql.jdbc.ResultSet.next(ResultSet.java:6106)
        at org.apache.commons.dbcp.DelegatingResultSet.next(DelegatingResultSet.java:168)
        at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:592)
        at com.ibatis.common.jdbc.logging.ResultSetLogProxy.invoke(ResultSetLogProxy.java:47)
        at $Proxy10.next(Unknown Source)
        at com.ibatis.sqlmap.engine.execution.SqlExecutor.handleResults(SqlExecutor.java:380)
        at com.ibatis.sqlmap.engine.execution.SqlExecutor.handleMultipleResults(SqlExecutor.java:301)
        at com.ibatis.sqlmap.engine.execution.SqlExecutor.executeQuery(SqlExecutor.java:190)
        at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.sqlExecuteQuery(GeneralStatement.java:205)
        at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithCallback(GeneralStatement.java:173)
        at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithRowHandler(GeneralStatement.java:133)
        at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryWithRowHandler(SqlMapExecutorDelegate.java:649)
        at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryWithRowHandler(SqlMapSessionImpl.java:156)
        at com.ibatis.sqlmap.engine.impl.SqlMapClientImpl.queryWithRowHandler(SqlMapClientImpl.java:133)
        at org.springframework.orm.ibatis.SqlMapClientTemplate$5.doInSqlMapClient(SqlMapClientTemplate.java:267)
        at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:165)
        at org.springframework.orm.ibatis.SqlMapClientTemplate.queryWithRowHandler(SqlMapClientTemplate.java:265)
        at org.myCron.doBatch(MyCron.java:57)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:592)
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:248)
        at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:165)
        at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:66)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:191)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:516)

** END NESTED EXCEPTION ** 
```

堆栈跟踪非常模糊。我看到的唯一提示是“在结果对象上设置属性时发生错误”。结果对象只有两个属性：一个字符串和一个整数。它们都允许空值，但我的选择语句表明它们都没有任何空值。它们都有一个适当的 getter/setter（这是有道理的，因为该过程在死亡之前成功运行了一段时间）。每次 cron 运行时，它都会在随机点死亡（因此它不会卡在特定的行上）。

注意 - 方法“doBatch”确实存在，因为它是启动 cron 进程的方法。如果找不到 doBatch，则无法成功处理前一千行。

我也试过在石英之外运行这项工作，它也在那里失败了。我们尝试增加 MySQL net_read_timeout、net_write_timeout 和 delay_insert_timeout，但这些设置都没有解决问题。我还尝试将 log4j 设置设置为 DEBUG，但没有得到任何有用的信息。

关于我可以尝试什么的任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:10:25.887

听起来 MySQL 出于某种原因关闭了连接。检查 MySQL 日志，看看是否有任何显示。如有必要，打开 MySQL 的各种日志记录选项。

此外，开始从您的应用程序打印调试数据（包括时间戳） - 只需打印所有内容，然后查看最后一个操作是什么 - 也许您的代码中有一些很少触发的条件存在错误。

即每次与 MySQL 交谈时，都在之前和之后记录它。

# javascript - 如何使用 jQuery 存储前端数据？

> ID：11960663
> 
> 赞同：0
> 
> 时间：2012-08-14T21:00:59.203
> 
> 标签：javascript, jquery

这是一个相当广泛的问题，而不是特定于代码的。我正在寻找知道如何实施此要求的人的意见

我正在构建一个音乐应用程序，人们可以在其中排队音乐对象。一个音乐对象看起来像

> ```
> url:
> name:
> views: 
> ```

用户可以通过单击列表来排队播放这首歌。此时我想建立一个音乐对象队列，然后开始播放。一个非常相似的例子是grooveshark所做的： ![在此处输入图像描述](../Images/0a9d4193792372a8880a44dce29c2be9.png)

我非常想实现具有以下功能的相同功能

*   即使浏览器关闭也能保持队列
*   能够检索任何队列（如果存在）
*   能够随机播放，强制队列中的对象按顺序播放

我对此很陌生，所以不知道在哪里存储这些数据。请帮助我了解我需要学习什么来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:04:54.637

这是一个相当广泛的问题！如果您正在开发 HTML5 应用程序，您可能希望研究 DOM 存储设施，例如`localStorage`和`sessionStorage`（主要关注`localStorage`您的需求/系统要求）：[https ://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

以下是一些有用的资源/信息：

[http://ejohn.org/blog/dom-storage/](http://ejohn.org/blog/dom-storage/)

[http://viralpatel.net/blogs/introduction-html5-domstorage-api-example/](http://viralpatel.net/blogs/introduction-html5-domstorage-api-example/)

[http://msdn.microsoft.com/en-us/library/cc197062(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc197062(v=vs.85).aspx)

如果您不希望查看 cookie：[https](https://developer.mozilla.org/en-US/docs/DOM/document.cookie) ://developer.mozilla.org/en-US/docs/DOM/document.cookie但是，由于数量的限制，我怀疑`cookies`会为您提供您需要/想要的东西可以存储/保存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:04:56.713

localstorage 是你最好的选择

[http://www.w3schools.com/html5/html5_webstorage.asp](http://www.w3schools.com/html5/html5_webstorage.asp)

但是您可以使用以下方法进行 polyfill 并使其与非 html5 浏览器一起使用：

[https://gist.github.com/350433](https://gist.github.com/350433)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:05:39.637

如果您可以仅针对 HTML5 浏览器，您可能需要查看以下内容：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T22:39:00.903

正如其他人所回答的那样，`localStorage`可能是您最好的选择..但是，如果您不想这样做，则不必直接使用它。查看 AmplifyJS' `amplify.store`，这是一个很好的包装器`localStorage`，`sessionStorage`易于使用，并使用功能检测在不支持 localStorage 的浏览器上优雅地降级（我忘记了它使用的是什么，但它会存储您的数据。也许是 cookie？ )

总之，值得研究。 [http://amplifyjs.com/api/store/](http://amplifyjs.com/api/store/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T10:28:43.020

我过去曾为此使用过[jStorage 。](http://www.jstorage.info/)它是一个不错的插件，它提供了一个围绕可用的本地存储和 Internet Explorer 旧版本中的 userData 行为的包装器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T21:28:21.733

由于我看不到对旧版浏览器支持的要求，我建议远离 localStorage，因为它有一些问题，比如它正在执行文件 IO 并且它是同步的。

相反，您可以查看 indexedDB，它有点难使用，但据我所知，在各个方面都更好。

[https://developer.mozilla.org/en-US/docs/IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)

# php - 检查 PHP 语法错误？

> ID：11960666
> 
> 赞同：13
> 
> 时间：2012-08-14T21:01:12.987
> 
> 标签：php, syntax-error, token

好吧，我在这里遇到了一些麻烦。我需要检查一些 PHP 的语法错误。我注意到这一点需要从命令行运行：

`php -l somefile.php`

但是，有没有办法从 PHP 文件本身中运行它？我一直在寻找并认为我可以通过将`parse_str`函数输入到 $_GET 中以某种方式使用函数来完成此任务，但不太了解它是如何工作的。

其他人告诉我使用`token_get_all()`php 函数来确定这一点。

但我不知道如何用任何方法做到这一点？有人可以在这里给我一些示例代码来开始吗？我不认为使用`eval()`是要走的路，虽然我有一个`eval($code)`工作，但如果有 PHP 语法错误，我不认为我应该运行脚本。

一如既往，非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:10:36.303

你可以简单地这样做`shell_exec()`：

```
$output = shell_exec('php -l /path/to/filename.php'); 
```

这为您提供了字符串中命令行操作的输出`$output`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-29T07:25:46.213

检查退货状态更安全`php -l`

```
$fileName = '/path/to/file.php';
exec("php -l {$fileName}", $output, $return);

if ($return === 0) {
    // Correct syntax
} else {
    // Syntax errors
} 
```

看[这个小提琴](https://www.tehplayground.com/026v6OSCW8y1eakr)看看它在行动

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-07T19:16:39.510

我用`token_get_all`这个。我在数据库中有一些 PHP 代码。在保存之前，我做

```
function is_valid_php_code_or_throw( $code ) {
        $old = ini_set('display_errors', 1);
        try {
                token_get_all("<?php\n$code", TOKEN_PARSE);
        }
        catch ( Throwable $ex ) {
                $error = $ex->getMessage();
                $line = $ex->getLine() - 1;
                throw new InvalidInputException("PARSE ERROR on line $line:\n\n$error");
        }
        finally {
                ini_set('display_errors', $old);
        }
} 
```

奇迹般有效。仅语法。没有缺失变量、类型不兼容等。

`InvalidInputException`是我自己的。你可以做任何事情，或者返回一个布尔值，或者自己处理异常。

我不确定是否`display_errors`有必要。那是在某个时候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:03:01.277

[php_check_syntax](http://php.net/manual/en/function.php-check-syntax.php)应该可以解决问题。如果您正在运行 PHP >= 5.05，请参阅评论部分中的第一条评论以了解实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-17T05:14:23.660

为什么要使用外壳？

```
function syntax_is_valid($code)
{
    try
    {
        @eval($code);
    }
    catch (ParseError $e)
    {
        return false;
    }

    return true;    
} 
```

或者使用`$e->getMessage()`以获取更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-14T10:12:33.817

我会这样做：

```
$php_file = 'The path to your file';
if(substr(`php -l $php_file`, 0, 16) == 'No syntax errors') {
    // Correct syntax
} else {
    // Error
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-10T02:47:22.720

您可以使用它`exec`来检查语法错误。

```
$tempFile = path/of/file
$syntaxParseError = strpos(exec('php -l '.$tempFile), 'No syntax errors detected') === false;` 
```

不幸的是，这不会给您行号或告诉您有关错误的任何信息。为此，您需要在您的服务器上安装静态分析器[是否有用于 PHP 文件的静态代码分析器 [如 Lint]？](https://stackoverflow.com/questions/378959/is-there-a-static-code-analyzer-like-lint-for-php-files?noredirect=1&lq=1)或编写自己的解析器。

注意。`token_get_all()`不会自行确定任何内容，但它对制作解析器很有用。

# asp.net - 在 .NET f/w 4.0 和 VS2010 构建的应用程序中使用 ASP.NET MVC 4 和 Web API 组件

> ID：11960670
> 
> 赞同：-1
> 
> 时间：2012-08-14T21:01:26.587
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

对于与 ASP.NET MVC 和 web api 相关的各种 .NET 软件组件的版本级别，我有点困惑。现在我知道 VS2012 和 .NET f/w 4.5 即将“真正实现” RTM，但我不想在一段时间内（如 6 个月或更长时间）进行这种升级。我现在正在编写一个新应用程序，其初始版本（由咨询客户决定）必须是 .NET f/w 4.0 并使用 VS2010（是的，我知道您可以使用 VS2012 向下定位，但在这种情况下，这不是我的选择- 作为顾问，您有时会被规定必须用于合同的工具/版本等）。所以最后到了我问题的关键——我刚刚在 MSDN 上看到 Mike Wasson 的一篇文章，写于 2012 年 1 月/2 月的时间范围内，看起来他使用的是 VS2010 和 .NET f/w 4.0，但演示了利用 ASP.NET MVC 4 的新 Web API 技术。因此可以在 .NET f/w 4.0 和 VS2010 的上下文中安装 ASP.NET MVC 4 组件，并利用 Web API 组件？如果这是真的，我可能想要处理这个特定的项目，而不仅仅是使用 ASP.NET MVC 3（并且根本不使用 Web API 的东西），这是我认为我需要做的。只是我想使用 ASP.NET MVC 4 和/或 Web API 的东西，必须在 9 月 12 日之前使用 .NET f/w 4.5 RC 和 VS2012 RC（或 9 月 12 日之后的 RTM）。这不正确吗？我可能想要处理这个特定的项目，而不仅仅是使用 ASP.NET MVC 3（并且根本不使用 Web API 的东西），这是我认为我需要做的。只是我想使用 ASP.NET MVC 4 和/或 Web API 的东西，必须在 9 月 12 日之前使用 .NET f/w 4.5 RC 和 VS2012 RC（或 9 月 12 日之后的 RTM）。这不正确吗？我可能想要处理这个特定的项目，而不仅仅是使用 ASP.NET MVC 3（并且根本不使用 Web API 的东西），这是我认为我需要做的。只是我想使用 ASP.NET MVC 4 和/或 Web API 的东西，必须在 9 月 12 日之前使用 .NET f/w 4.5 RC 和 VS2012 RC（或 9 月 12 日之后的 RTM）。这不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:09:03.597

> 因此可以在 .NET f/w 4.0 和 VS2010 的上下文中安装 ASP.NET MVC 4 组件

当然。在撰写本文时它是 RC，但您可以从此处下载并安装它：[http](http://www.asp.net/mvc/mvc4) ://www.asp.net/mvc/mvc4 （从此处下载 VS2010 的独立安装程序可执行文件：http: [//www.microsoft。 com/en-us/download/details.aspx?id=29935](http://www.microsoft.com/en-us/download/details.aspx?id=29935)）

即使它达到 RTM，您也可以在 VS2010 中使用它。当然，您将无法在 VS2010 中使用 .NET 4.5 特定功能（例如`async`/ `await`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:06:00.680

您可以将 mvc 4 和 web api 与 .net 4.0 一起使用。您不能在其中使用 .net 4.5 的功能，但所有其他功能都可以使用。

# php - php 简单特定的 ksort

> ID：11960671
> 
> 赞同：0
> 
> 时间：2012-08-14T21:01:47.080
> 
> 标签：php, reverse, sorting

我想对一个数组进行排序，例如：

```
$k = array (
    "2135p" => "toto",
    "2137l" => "tosdgsto",
    "2135p^2211i" => "sdf",
    "2135p^2211i^2224o" => "sdf",
    "2137l^2365c" => "sdff"
); 
```

使用此命令->`"2137l", "2137l^2365c", "2135p", "2135p^2211i", "2135p^2211i^2224o"`

krsort 不这样做

它用于显示插入评论 id

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:06:32.877

您可能需要实现自己的`uksort()`实现来获得所需的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:05:50.643

通过标志`krsort()`，`SORT_NUMERIC`它应该工作。

交替使用该`uksort()`函数：[http](http://us3.php.net/manual/en/function.uksort.php) ://us3.php.net/manual/en/function.uksort.php并定义您自己的比较器。

# javascript - 方法不在另一个方法内部调用

> ID：11960672
> 
> 赞同：0
> 
> 时间：2012-08-14T21:01:56.960
> 
> 标签：javascript, jquery, methods

我正在尝试制作一个名为*Dialogo*的对象。这个想法是创建一些函数，然后在另一个方法本身内部调用它们。看一看：

```
function Dialogo(tamano){
    this.tamano = tamano;

    this.cerrar = function(){
        $('#dialogo_fondo').remove();
    };

    this.mostrar = function(){
        var dialogo_fondo = $('<div>').attr({id: 'dialogo_fondo' });
        $('body').fadeIn("slow", function(){$(this).append(dialogo_fondo);});
        $('#dialogo_fondo').css( {"width": $(window).width(), "height": $(window).height()});
        $('#dialogo_fondo').click(function(){ 
            this.cerrar(); 
        });
    };  
} 
```

使用 jquery 1.7.2。根据代码，当我点击**#dialogo_fondo**元素时，它应该被删除，因为在点击事件中触发了**cerar()**方法。但它不起作用。你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:03:28.370

`this`在`mostrar`声明中指向匿名函数实例，用 . 检查它`console.log(this);`。因此，您需要创建对外部对象的另一个引用`var that = this;`并改用它：

```
function Dialogo(tamano){
    var that = this; // <--- here is the magic

    this.tamano = tamano;

    this.cerrar = function(){
        $('#dialogo_fondo').remove();
    };

    this.mostrar = function(){
        var dialogo_fondo = $('<div>').attr({id: 'dialogo_fondo' });
        $('body').fadeIn("slow", function(){$(this).append(dialogo_fondo);});
        $('#dialogo_fondo').css( {"width": $(window).width(), "height": $(window).height()});
        $('#dialogo_fondo').click(function(){ 
            that.cerrar(); // <---- use "that", not "this"
        });
    };  
} 
```

# asp.net - 详细信息视图中的隐藏字段 - aspnet 会员用户 ID

> ID：11960673
> 
> 赞同：0
> 
> 时间：2012-08-14T21:01:57.863
> 
> 标签：asp.net, detailsview, boundfield

我有一个小细节视图，我可以在其中向我的数据库添加一些数据。

详细信息视图的代码：

```
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
    DataSourceID="orderSqlDataSource" DefaultMode="Insert" Height="50px" 
    Width="333px" DataKeyNames="ID" CellPadding="4" ForeColor="#333333" 
    GridLines="None" oniteminserted="DetailsView1_ItemInserted" 
                onprerender="DetailsView1_PreRender">
    <CommandRowStyle BackColor="#E2DED6" Font-Bold="True" />
    <EditRowStyle BackColor="#E9ECF1" />
    <FieldHeaderStyle BackColor="#E9ECF1" Font-Bold="True" />
    <Fields>
        <asp:BoundField DataField="userid" HeaderText="Azonosító" 
            SortExpression="userid" ReadOnly="True" />
        <asp:BoundField DataField="quantity" HeaderText="Mennyiség (kg)" 
            SortExpression="quantity" />
        <asp:TemplateField HeaderText="Mit rendel" SortExpression="Mit rendel">
            <InsertItemTemplate>
                <asp:DropDownList ID="ordertypeDropDownList" runat="server" 
                    DataSourceID="ordertypeDDLSqlDataSource" DataTextField="name" 
                    DataSource='<%# Bind("ordertype") %>'
                    SelectedValue='<%# Bind("ordertype") %>'
                    DataValueField="ID">
                </asp:DropDownList>
                <asp:SqlDataSource ID="ordertypeDDLSqlDataSource" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:dotnetConnectionString %>" 
                    SelectCommand="SELECT [name], [ID] FROM [product]"></asp:SqlDataSource>
            </InsertItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowInsertButton="True" CancelText="Mégsem" 
            InsertText="Elküld" />
    </Fields>
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" 
        HorizontalAlign="Center" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
</asp:DetailsView> 
```

以下是 page_load 事件的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (User.Identity.IsAuthenticated)
        {
            MembershipUser user = Membership.GetUser(User.Identity.Name);
            string userID = user.ProviderUserKey.ToString();
            ((TextBox)DetailsView1.Rows[0].Cells[1].Controls[0]).Text = userID;
        }
    } 
```

如您所见，我从 page_load 填充了第一个 boundfield。问题是第一个boundfield（用户ID，或我的母语“azonosító”）由于数据库而很重要，但我不想让用户看到他/她的用户ID。如果我将边界字段隐藏（可见 = false），则无法使用 page_load 中的代码访问它。当字段被隐藏时，我如何将当前用户 ID 绑定到该字段，或者如何在没有 ID 绑定字段的情况下完成这项工作？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:29:51.543

如果用户不需要知道或与您正在插入的值交互，那么将参数值注入到`DetailsView`发送到数据源控件的插入调用中是很容易的。只需使用如图所示的`DetailsView.Inserting`事件`DetailsViewInsertEventArgs`参数。

代码：

```
 protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {
        if (User.Identity.IsAuthenticated)
        {
            MembershipUser user = Membership.GetUser(User.Identity.Name);
            string userID = user.ProviderUserKey.ToString();
            e.Values.Add("userid", userID);
        }
    } 
```

如您所料，此方法使 BoundField 完全没有必要:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:05:11.300

使用模板字段并放置标签并将其与用户标识绑定。您可以访问代码隐藏中的标签，无论它是不可见的。

```
<asp:DetailsView   runat="server"  ID="dv" >
<Fields>
        <asp:TemplateField Visible="false" >
            <ItemTemplate>
                <asp:Label ID="lb" runat="server" Text='<%# Bind("userid") %>' />
            </ItemTemplate>
        </asp:TemplateField>
</Fields>
</asp:DetailsView> 

// In your code behind 
string userid = ((Label)dv.Rows[0].FindControl("lb")).Text(); // give the correct index 
```

# oracle11g - ORA-00955: 名称已被现有对象使用

> ID：11960674
> 
> 赞同：2
> 
> 时间：2012-08-14T21:02:00.690
> 
> 标签：oracle11g

在 oracle 11G 中，我想永久删除用户，即不应该保留该用户的任何痕迹，并且我不应该收到这样的“现有对象”错误 - ORA-00955：名称已被现有对象使用，当我尝试使用其表重新创建该用户。

请帮助我做到这一点。谢谢。

编辑 -

使用表和列创建用户的命令

```
CREATE USER Products identified by discounted
GRANT ALL PRIVILEGES TO Products
CREATE TABLE Cars(Brand varchar(25),Model varchar(25)) 
```

以上是完全删除用户并完全重新创建用户的命令

```
DROP USER PRODUCTS CASCADE
CREATE USER Products identified by discounted
GRANT ALL PRIVILEGES TO Products
CREATE TABLE Cars(Brand varchar(25),Model varchar(25)) 
```

导致异常 -

```
java.sql.SQLSyntaxErrorException: ORA-00955: name is already used by an existing object 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T02:48:35.937

你没有说你登录的用户是什么用户，但我会假设它是 SYS 或具有几乎神一样特权的人。

在最后一行中，您`CARS` *在当前架构*中创建表，而不是在产品架构中。你可能想要的是：

```
CREATE TABLE products.cars(brand varchar2(25), model varchar2(25)); 
```

从您之前的尝试来看，汽车表可能仍然存在于当前模式中。您可以通过以下方式判断它是否存在于任何地方：

```
SELECT owner, object_name, object_type FROM all_objects WHERE object_name = 'CARS'; 
```

附带说明一下，将所有权限授予普通用户并不是一个好主意，但我认为这是用于测试程序。此外，最好使用`VARCHAR2`而不是`VARCHAR`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T00:28:17.710

你的问题太笼统了。根据我的理解，如果您使用以下脚本，您可以删除用户创建的所有对象 -

```
drop user USERNAME cascade; 
```

[文档](http://docs.oracle.com/html/A85397_01/statem9d.htm)

要成功执行此操作，您不应为此用户打开连接。

# javascript - 如何在 Django Form 中使用 Jquery 脚本的值？

> ID：11960685
> 
> 赞同：2
> 
> 时间：2012-08-14T21:02:29.900
> 
> 标签：javascript, jquery, python, django, django-templates

我有一个以下 Jquery 代码，它创建了一个`Time Picker`：

```
<input class="time" type="text" name="start" id="start" />
$('input.time').timepicker(); 
```

我想使用这个时间选择器值，它出现在 Django-Forms 的文本中。

我的`models.py`：

```
class UsertTime(models.Model):
user = models.ForeignKey(User, blank=False)
data = models.CharField(max_length=30)
timestamp = models.DateTimeField(blank=True, null=True) 
```

我的`forms.py`：

```
class UserTimeForm(forms.ModelForm):
    class Meta:
    model = UserTime 
```

在我的`template.html`：

```
<form action="" method="POST">
{{ form.as_p }}
<input type="submit" value="{% trans "Add " %}" /> <a href="{% url host_list %}">{% trans "Cancel" %}</a>
</form>

<input class="time" type="text" name="start" id="start" />
$('input.time').timepicker(); 
```

现在我应该如何通过书面输入填写该`timestamp`字段。`Jquery`以下是 Jquery 代码的参考链接：

> [Jquery 示例的链接](http://archive.plugins.jquery.com/project/timepicker)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:35:10.423

我也可能是误解；但是，您能否不仅检查该输入的输出`form.as_p`并对其进行操作，而不是`$('input.time')`

```
$('#id_timestamp').timepicker() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:15:22.740

这不起作用：

```
<input class="time" type="text" name="start" id="start" value="{{form.timestamp}}" /> 
```

抱歉，我不是 Django 专家。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:16:37.547

除非，我严重误解了你，否则请使用`val()`：

```
$('#id_timestamp').val($('#time').val()) 
```

# android - 如何限制 Android 的本机内存使用量？

> ID：11960686
> 
> 赞同：0
> 
> 时间：2012-08-14T21:02:32.000
> 
> 标签：android, testing, memory-leaks, process, native

我正在测试本机库中的内存泄漏。测试用例如下所示：

```
while (true) {
  doIt();
} 
```

每次`doIt()`执行时，都会泄漏少量内存，因此应用程序崩溃需要很长时间。

我的问题是：如何降低允许应用程序使用的本机内存，以便我可以更快地使应用程序崩溃？

# visual-studio-2010 - Win API（打印机）-winspool.h

> ID：11960688
> 
> 赞同：1
> 
> 时间：2012-08-14T21:02:34.247
> 
> 标签：visual-studio-2010, visual-studio, winapi, visual-c++, printing

我使用 win api 和 winspool.h 中的一些函数来使用我的打印机。OpenPrinter/StartDoc/等函数...

我可以打印，一切看起来都很好。唯一的问题，或我无法解决的问题是关于边距。我的打印机似乎添加了一些奇怪的底部边距，并且一些接近底部的图像/文本被切断了。我想删除这个边距，我可以从其他程序中使用打印设置来删除它们。但我无法从我的代码中找到如何做到这一点。就像是：

```
dc->margin = &rect;

or:
dc->margin->bottom_margin = 0; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:17:56.973

您可以获得打印机边距。寻找 PHYSICALOFFSETX 和 PHYSICALOFFSETY。通常人们得到它，然后他们从利润中减去他们需要的东西。

但是打印图片的窗口程序可以打印没有任何边距。我找不到它是如何做到的信息。我认为这是未记录的功能。

# java - jax-rs response.getEntity 不工作

> ID：11960693
> 
> 赞同：4
> 
> 时间：2012-08-14T21:03:11.287
> 
> 标签：java, jersey, jax-rs

我想使用 javax.ws.rs.core.Response 来发送和接收 Card 实体对象。但我不知道如何将内容转换回 Card 对象。

我的 testCreate() 方法应该执行 create(Card card) 方法，接收回 json 并将其转换为卡片对象。但不知何故，我总是得到类型不匹配，或者它说 getEntity() 方法不能像这样执行：response.getEntity(Card.class)。

有谁知道我必须如何正确处理响应，以便我可以再次将返回的 json 实体转换为 Card 对象？

这是我的 CardResource 方法：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response create(Card card) {
    Card c = dao.create(card);
    if(c.equals(null)) {
        return Response.status(Status.BAD_REQUEST).entity("Create failed!").build();
    }

    return Response.status(Status.OK)
            .entity(c)
            .type(MediaType.APPLICATION_JSON)
            .build();
} 
```

这里是我的 CardResourceTests 类

```
@Test
public void testCreate() {
    boolean thrown = false;
    CardResource resource = new CardResource();

    Card c = new Card(1, "Cardname", "12345678", 1, 1, 
            "cardname.jpg", new Date(), new Date());        

    try {
        Response result = resource.create(c);
        System.out.println(result.getEntity(Card.class)); // not working!!!
        if(result.getStatus() != 200) {
            thrown = true;
        }
    } catch(Exception e) {
        e.printStackTrace();
        thrown = true;          
    }

    assertEquals("Result", false, thrown);
} 
```

这里是我的 Card.class

```
@XmlRootElement
@PersistenceCapable(detachable="true")
public class Card {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private Integer id;

@Persistent
private String name;

@Persistent
private String code;

@Persistent 
private Integer cardProviderId; 

@Persistent 
private Integer codeTypeId;

@Persistent
private String picturePath;

@Persistent
private Boolean valid;

@Persistent 
private Date mobCreationDate;

@Persistent
private Date mobModificationDate;

@Persistent
private Date creationDate;  

@Persistent
private Date modificationDate;

public Card() {
    this.setId(null);
    this.setName(null);
    this.setCode(null);
    this.setCardProviderId(null);       
    this.setCodeTypeId(null);
    this.setPicturePath(null);
    this.setMobCreationDate(null);
    this.setMobModificationDate(null);
    this.setCreationDate(null);
    this.setModificationDate(null);
}

public Card(Integer id, String name, String code, Integer cardProviderId, 
    Integer codeTypeId, String picturePath,
    Date mobCreationDate, Date mobModificationDate) {
    this.setId(id);
    this.setName(name);
    this.setCode(code);
    this.setCardProviderId(cardProviderId);     
    this.setCodeTypeId(codeTypeId);
    this.setPicturePath(picturePath);
    this.setMobCreationDate(mobCreationDate);
    this.setMobModificationDate(mobModificationDate);
    this.setCreationDate(new Date());
    this.setModificationDate(new Date());
}

public Key getKey() {
    return key;
}

public void setKey(Key key) {
    this.key = key;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getCode() {
    return code;
}

public Integer getCardProviderId() {
    return cardProviderId;
}

public void setCardProviderId(Integer cardProviderId) {
    this.cardProviderId = cardProviderId;
}

public void setCode(String code) {
    this.code = code;
}

public Integer getCodeTypeId() {
    return codeTypeId;
}

public void setCodeTypeId(Integer codeTypeId) {
    this.codeTypeId = codeTypeId;
}

public String getPicturePath() {
    return picturePath;
}

public void setPicturePath(String picturePath) {
    this.picturePath = picturePath;
}

public Date getCreationDate() {
    return creationDate;
}

public void setCreationDate(Date creationDate) {
    this.creationDate = creationDate;
}

public Date getModificationDate() {
    return modificationDate;
}

public void setModificationDate(Date modificationDate) {
    this.modificationDate = modificationDate;
}

public Date getMobCreationDate() {
    return mobCreationDate;
}

public void setMobCreationDate(Date mobCreationDate) {
    this.mobCreationDate = mobCreationDate;
}

public Date getMobModificationDate() {
    return mobModificationDate;
}

public void setMobModificationDate(Date mobModificationDate) {
    this.mobModificationDate = mobModificationDate;
}

public Boolean getValid() {
    return valid;
}

public void setValid(Boolean valid) {
    this.valid = valid;
}
} 
```

这里是我的 CardDAO 课程

```
public class CardDAO {
private final static Logger logger = Logger.getLogger(CardDAO.class.getName()); 

public Card create(Card card) {
    PersistenceManager pm = PMF.get().getPersistenceManager();

    Card c = new Card(card.getId(), card.getName(), card.getCode(), 
        card.getCardProviderId(), card.getCodeTypeId(), card.getPicturePath(),
        new Date(), new Date());

    try {
        pm.makePersistent(c);
    } catch(Exception e) {
        logger.severe("Create failed: " + e.getMessage());
        return null;
    } finally {
        pm.close();
    }

    return c;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:16:23.050

您的 Card 类是否使用`@XmlRootElement`和`@XmlElement`注释来启用**JAXB**将 JSON 映射到 POJO/从 POJO 映射？

参见示例：

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Book {
    @XmlElement(name = "id")
    String id;
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:56:31.760

我不确定调用带注释的 Web 服务方法是否正确，就像使用参数的简单方法一样。尝试从您的`CardResource`类中删除所有注释并像类方法一样调用此方法。

# javascript - 在javascript中测量websockets数据输入/输出的大小

> ID：11960696
> 
> 赞同：2
> 
> 时间：2012-08-14T21:03:32.577
> 
> 标签：javascript, json, node.js, websocket, benchmarking

我想编写一个测试来测量通过 websockets 从 node.js 服务器发送的数据的大小/数量，但我不知道如何去做。消息采用 JSON 格式。有没有一种方法可以测量 JSON 大小或任何可以提供帮助的模块？

我经常发送大量数据，并想测量每秒的数据吞吐量。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:25:00.830

我发现最好的方法是使用像[WireShark](http://www.wireshark.org)这样的协议分析器。

# jquery - 将 HTML 附加到父级中的第一个空 div

> ID：11960697
> 
> 赞同：8
> 
> 时间：2012-08-14T21:03:43.973
> 
> 标签：jquery, html

我已经在这里搜索了一段时间，但找不到任何关于此的内容。我拥有的是父 div 中的一组 div。当用户单击比较复选框时，我想将包含数据缩略图的 HTML 附加到第一个空 div。所以如果用户点击三个东西进行比较，第一个将进入 div1，第二个进入 div2，依此类推。我希望在 JQuery 中执行此操作。

以下是我所拥有的：

```
<div id="my_cars_compare" class="my_cars_expanded" style="height: 45px;">   
<span class="my_cars_heading">
    X cars added to My Cars <span class="expand_it">Expand</span>
</span>
    <div id="my_cars_1" class="my_cars_empty first"></div>
    <div id="my_cars_2" class="my_cars_empty"></div>
    <div id="my_cars_3" class="my_cars_empty"></div>
    <div id="my_cars_4" class="my_cars_empty"></div>
    <div id="my_cars_5" class="my_cars_empty"></div>
    <div id="my_cars_6" class="my_cars_empty"></div>
    <input type="submit" value="Compare" class="btn_compare" />
    <br clear="all" />
</div> 
```

查询：

```
$(document).ready(function()
{
$('.compare_click').click(function() {
var dataThumbnail = $(this).parent('td').find('img.clicked').attr('data-thumbnail');

var my_cars_count = $('.my_cars_expanded').children('div').length;

for ( my_cars_count >= 6 ) {

    $('.my_cars_expanded').find('div:empty').append('<div class="my_cars_details" style="position: relative;"><div class="my_cars_delete"><img src="btn_mycars_close_overlay.png" /></div><div class="my_cars_photo"><img src="'+dataThumbnail+'" width="67px" /></div></div>');   
};

});
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T21:08:16.570

您可以使用`:first`选择器，`div:empty`选择所有空的 div 标签：

```
$('.my_cars_expanded').find('div:empty:first').append('...'); 
```

你的循环的语法`for`就像`if`语句，我想你想使用一个`if`语句。

```
var my_cars_count = $('.my_cars_expanded').find('div:empty').length;
if ( my_cars_count > 0 ) {
     $('.my_cars_expanded').find('div:empty:first').append('...');   
}; 
```

# c# - Facebook Like/Send 按钮在网站页面之间不一致

> ID：11960698
> 
> 赞同：0
> 
> 时间：2012-08-14T21:03:44.823
> 
> 标签：c#, facebook-like, facebook-c#-sdk

我已经实现了 Facebook Like 和 Send 按钮插件。看，我认为公平地说这应该是相当简单的，并且已经完成了这个过程，我很高兴是这样。

我现在遇到一个问题，导致我难以解决。

问题在于插件的显示和功能不一致。它适用于我们的某些网站页面，但对其他页面完全无效。

**在插件不起作用的页面上，发送按钮不会出现，当单击赞按钮时，它会非常短暂地打开赞对话框并立即将其关闭，而不会记录任何赞操作**

我已经通过 Facebook Debugger 工具检查了所有网站页面，并且所有页面都使用正确的 Open Graph Meta Tags 等正确抓取...

在这个阶段，我想知道是否有人遇到过这个问题？我知道今年发送按钮存在问题，但我的理解是这些问题已经解决......

显示**不正确**的网站网址是：[http ://www.todaysdeals.ie/Deal.aspx?dlid=441](http://www.todaysdeals.ie/Deal.aspx?dlid=441)

**正确**显示的网站网址是：[http ://www.todaysdeals.ie/Deal.aspx?dlid=439](http://www.todaysdeals.ie/Deal.aspx?dlid=439)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:33:19.763

在我看来，问题在于您如何声明按钮代码。您在 FBXML 代码中指定了 90px 的宽度，但 Facebook 似乎忽略了这一点，并将其代码呈现为 150px。

我的猜测是在错误的页面上，您在此页面上获得了大量的喜欢，并且它将按钮包装到 div 的隐藏区域中。

我首先将 FBXML 代码中的宽度增加到至少 176 像素，然后看看会发生什么。

# c# - Windows 应用程序在调试时不会崩溃，否则会崩溃

> ID：11960699
> 
> 赞同：3
> 
> 时间：2012-08-14T21:03:56.710
> 
> 标签：c#, visual-studio-2010, debugging, dll, crash

我有一个调用外部 .dll 的 Windows 应用程序。过了一会儿，我注意到了与用户编组有关的致命错误。网上有一个消息来源，由于该特定错误，我将目标更改为 x86 而不是 AnyCPU。我这样做了，现在每当我让应用程序运行时，它都会退出调试模式并使应用程序崩溃。但是，如果我在 .dll 调用之后立即设置断点，并跳过每一行，直到我再次获得对应用程序的控制权，它就不会崩溃。有什么具体的原因可能导致这种情况吗？有人调试过这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:26:41.830

解决问题的步进代码通常是原始代码中时序问题的症状。如果外部资源异步加载，它不会出现在调试器中当前线程的堆栈上，但可以被调用。跳过代码会导致流程延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:40:37.730

谢谢大家的建议！幸运的是，我最终让它工作（对它为什么工作的了解很少），但将构建目标更改为专门的 x86 机器而不是“AnyCPU”。这是一个网站建议的，现在找不到了：\ 希望这对其他人有所帮助，而不是遇到类似的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:38:09.010

我认为这类事情的最常见原因是未初始化的变量。它们拾取内存中的任何内容，并且调试器的存在可以轻松更改堆栈中未使用部分中的内容——当调用下一个例程时，该内存将成为局部变量。检查 DLL 代码。

请注意，您的“修复”让我更加怀疑这是真正的答案。

（然后还有一个非常疯狂的调试器问题的案例。很久以前，我遇到了一个案例，即如果您单步执行，调试器将无效值加载到段寄存器中没有问题。）

# jquery - 从 jQuery 调用的 aspNetCompatibilityEnabled WCF 服务的性能问题

> ID：11960700
> 
> 赞同：1
> 
> 时间：2012-08-14T21:03:57.443
> 
> 标签：jquery, asp.net, wcf, asp.net-ajax

我的应用程序中有一个 aspNetCompatibilityEnabled WCF 服务。

我正在像这样进行ajax调用（最后直接调用WCF服务）-

```
 $.ajax({
            url: '~/WCFServices/MyService.svc/GetAllFoo',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: {.............//Omitted/////// },
            dataType: 'json',
            type: 'GET',
            success: function (msg, status) {
                   .............//Omitted///////
            },
            error: function (xhr, status, err) {
                   .............//Omitted///////
            }
        }); 
```

这种方法一切正常。但是，当我在生产中使用它时，当负载很高时，就会出现性能问题。

使用一些工具，我发现 /System.ServiceModel.Activation.ServiceHttpHandlerFactory+ServiceHttpHandler 大约需要 20 秒。

我不确定为什么会这样，以及可以做些什么来提高性能。非常感谢任何帮助/指针。

附加信息 - 应用程序托管在 IIS 7.5 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:00:20.833

您似乎将应用程序托管在 IIS 中。`aspNetCompatibilityEnabled`启用[后可以获得](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)IIS 功能对非 http 协议（如`net.*`.

有几个[缓慢的问题](https://stackoverflow.com/questions/4040986/why-its-so-slow-when-a-wcf-client-connects-to-the-service)，例如 IIS 启动，[首先调用 WCF 服务](http://www.codeproject.com/Tips/114132/WCF-First-Call-Slow)。

# javascript - ExpressJS 服务器 - 如何处理多个域

> ID：11960705
> 
> 赞同：31
> 
> 时间：2012-08-14T21:04:22.533
> 
> 标签：javascript, node.js, express

我在 Express 上玩弄了一下，我想知道，“最正确”的方法是处理链接到同一服务器的多个域。

假设我们有

*   foo.com
*   酒吧网
*   baz.com

都指向`111.222.333.444`. 那台机器正在运行带有 Express 的 NodeJS。我目前的解决方案如下所示：

```
var express = require( 'express' ),
    app     = module.exports = express.createServer(),
// ... more lines ...
app.get( '/', routes.index.bind( app ) ); 
```

到目前为止，这非常简单。到目前为止，唯一的例外是在我的`app.configure`通话中，我没有拨打`.use( express.static() )`. 那是因为该`.routes.index()`方法现在看起来像这样：

```
var fs    = require( 'fs' ),
// ... more lines ...

exports.index = function( req, res ) {
    var host = /(\w+\.)?(.*)\.\w+/.exec( req.header( 'host' ) ),
        app  = this;

    switch( host[ 2 ] ) {
        case 'foo':
            app.use( express.static( '/var/www/foo' ) );
            fs.readFile( '/var/www/foo/index.html', 'utf8', fileReadFoo );
            break;
        case 'bar':
            app.use( express.static( '/var/www/bar' ) );
            fs.readFile( '/var/www/bar/index.html', 'utf8', fileReadBar );
            break;
        case 'baz':
            // ... lines ...
            res.render( 'index', { title: 'Baz Title example' } );
            break;
        default:
            res.send('Sorry, I do not know how to handle that domain.');
    }

    function fileReadFoo( err, text ) {
        res.send( text );
    }

    function fileReadBar( err, text ) {
        res.send( text );
    }
}; 
```

这里发生的是，我分析`req.header`条目`host`并解析域名。基于此，我调用该`.static()`方法，以便*Express*可以提供正确的静态资源等，此外，我只是简单地读取并发送*index.html*文件的内容。我也尝试使用*Jade*来提供纯*HTML 文件*，但*Jade*`include`中的指令只接受相对路径。

 *但是，这确实有效，但我不确定这是否是一个好习惯。

欢迎任何建议/帮助。

* * *

**更新**

我想我需要更清楚地说明这一点。无论如何，我都不是初学者。我非常了解 ES 和 NGINX 等其他服务器的工作原理。我正在寻找关于 NodeJS/Express 的正确之处的合格答案。如果为此使用 Node/Express 没有任何意义，请详细说明。如果使用 Node/Express 有更好的方法，请解释一下。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-14T22:43:59.657

Vadim[的想法几乎是正确的](https://stackoverflow.com/questions/11960705/expressjs-server-how-to-handle-multiple-domains#comment15940267_11960962)。[`vhost`您可以配置如何使用中间件](http://www.senchalabs.org/connect/vhost.html)响应每个域：

```
// `baz.com`
var app = express.createServer();
app.get( '/', routes.index );

// ...

express.createServer()
    .use( express.vhost( 'foo.com', express.static( '/var/www/foo' ) ) )
    .use( express.vhost( 'bar.net', express.static( '/var/www/bar' ) ) )
    .use( express.vhost( 'baz.com', app ) )
    .use( function( req, res ) {
        res.send('Sorry, I do not know how to handle that domain.');
    })
    .listen( ... ); 
```

`routes.index`然后可以简化为仅处理`baz.com`请求：

```
exports.index = function( req, res ) {
    // ... lines ...
    res.render( 'index', { title: 'Baz Title example' } );
}; 
```

**编辑**

至于对比：

这`switch`将首先有效地完成，并将确定如何基于`host`- 处理所有请求，类似于：

```
express.createServer().use(function( req, res, next ) {
    switch( req.host ) {
        case 'foo.com': express.static( '/var/www/foo' )( req, res, next ); break;
        case 'bar.net': express.static( '/var/www/bar' )( req, res, next ); break;
        case 'baz.com': app.handle( req, res, next ); break;
        default: res.send( ... );
    }
}).listen( ... ); 
```

它允许您在启动时设置堆栈，以便任何中间件立即可用：

```
server.stack = [
    express.vhost( 'foo.com', ... ),
    express.vhost( 'bar.net', ... ),
    express.vhost( 'baz.com', ... ),
    [Function]
]; 
```

这些也反映了您可能遇到的 2 个可能的问题来源：

**没有过滤器的相同堆栈**

每个`Application`只有 1 个中间件堆栈，您使用的所有中间件都直接添加到`app.use(...)`. 尽管添加了一些条件，你仍然得到：

```
app.stack = [
    // ...,
    app.router,
    express.static( '/var/www/foo' ),
    express.static( '/var/www/bar' )
]; 
```

并且条件不会改变`static`中间件的响应方式——即通过`req.path`，而不是`req.host`——只有当它们在堆栈中开始响应时。

**堆栈状态**

而且，如果在*发出*`static`另一个请求之前没有添加中间件，那么我认为它们不会立即可用：

 *```
// GET http://foo.com/file 404
app.stack = [ app.router ]

// GET http://foo.com/ 200
app.stack = [ app.router, express.static( '/var/www/foo' ) ]

// GET http://foo.com/file 200
app.stack = [ app.router, express.static( '/var/www/foo' ) ] 
```

这也可能意味着相同的`static`中间件可以多次添加到堆栈中：

```
// 3x GET http://foo.com/
app.stack = [
    app.router,
    express.static( '/var/www/foo' ),
    express.static( '/var/www/foo' ),
    express.static( '/var/www/foo' )
] 
```

并且它们的添加取决于其他请求也表明可能存在竞争条件：

```
// was `foo.com` or `bar.net` first?
app.stack = [
    app.router,
    express.static( ? ),
    express.static( ? )
] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-14T22:55:57.650

我喜欢使用[bouncy](https://github.com/substack/bouncy)作为前端反向代理——这让你可以将完全不同的 express 堆栈作为不同的服务器进程运行（每个都有不同的特性并且为了健壮性而分开）......

然后您可以决定如何路由到不同的端口，它适用于 WebSockets。

```
var bouncy = require('bouncy');

bouncy(function (req, bounce) {
    if (req.headers.host === 'bouncy.example.com') {
        bounce(8000);
    }
    else if (req.headers.host === 'trampoline.example.com') {
        bounce(8001)
    }
}).listen(80); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T19:42:00.630

**如果不知道意味着您必须**在同一进程中运行主机的限制，很难回答这个问题，所以我会回应其他人所说的话，但希望能提供更多背景信息。

与 node 做的“最正确”的事情是在多个进程中运行主机并在另一个进程中反向代理请求。在同一个进程中运行多个站点充满了问题，其中最重要的是一个崩溃，使它们全部崩溃并需要重新启动整个过程。Node 的理念非常类似于 unix，它鼓励将程序保持小而独立。如果您将流程分开，您将获得应用程序的自然隔离。如果您追求单体设计，则必须编写和维护逻辑以将日志记录与不同站点分开，并且错误处理逻辑将变得更加复杂。毫无疑问，在其他情况下，您需要基于主机分支逻辑，但您的应用程序设计将鼓励而不是阻止这种情况。

如果你不喜欢其他技术栈（或者担心 nginx 目前在稳定分支中缺乏对 websockets 的支持），那么有一些用 nodejs 编写的可靠反向代理，包括 nodejitsu 的[http-proxy](https://github.com/nodejitsu/node-http-proxy)，它在他们的Joyent 的云和[弹性](https://github.com/substack/bouncy)（在另一个答案中提到）上的生产 PaaS 堆栈具有较少的功能，但我相信正在浏览器的生产中使用。

bouncy 的作者实际上甚至暗示它是[设计 nodejs 系统中最重要的架构模式之一](http://www.quora.com/What-are-some-best-architecture-practices-when-designing-a-nodejs-system)。您可能还会注意到，他的回答已得到一些核心节点提交者的支持。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T21:23:37.683

我使用[nginx](http://nginx.org/)作为 node.js 的前端服务器。它是组织域、静态内容交付、负载控制和许多其他强大功能的最佳解决方案。绝对不需要在节点事件循环中这样做。这将决定您的应用程序的速度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-18T19:05:22.197

由于 Express 使用[Connect](http://www.senchalabs.org/connect/middleware-vhost.html)，我很确定您可以使用 Connect 的虚拟主机中间件。它的操作类似于其他产品上的其他 vhost 模块。我没有多个域来测试并向您展示正确的代码，但我认为它是这样的：

```
express.createServer()
.use(express.vhost('hostname1.com', require('/path/to/hostname1').app)
.use(express.vhost('hostname2.com', require('/path/to/hostname2').app)
.listen(80) 
```

如果您发现一台 Express 服务器不够用，请考虑使用 API 中的 Node.Cluster。如果这还不够，那么当前的做法是在您的 Express 服务器前面放置一个 asnyc 反向代理（例如 Nginx），并将代理指向您的 Express 服务器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-18T20:38:13.223

我不建议首先使用 Express。事实上，即使对于单个域，使用 Node 的 http 模块，也可以轻松编写一个具有 Express 所具有的所有功能的应用程序。

对于多个域，一旦您获得主机名，您就可以自定义您的路由或中间件或您想调用的任何名称。只要您在任何应用程序中都没有任何阻塞调用，您的单节点进程将服务的域数量是无关紧要的。如果 CPU 使用率成为瓶颈，您可以使用同一进程的集群。

如果您有内存中的会话数据，则无法进行集群。您将需要另一个进程来维护管理该特定会话的实例的状态。这一切都取决于您如何管理状态、状态的持久性等。

总的来说，除非提供其他细节，否则答案并不简单。我提供了一个单独的答案，而不是评论，因为我相信太多的开发人员使用 Express，从而限制了他们的灵活性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-18T00:10:59.757

有点逆流而上，我不得不说我不明白做这样的事情有什么意义。Node.js 有一个单一的流程设计约束。对于一个 Web 应用程序来说，限制 IO 是一项艰巨的工作，更不用说少数几个了。试图通过拥有多个应用程序来抽象它会使代码过于复杂，使其不可读。单个应用程序中的错误可能会影响所有应用程序。这是一个非常不稳定的配置。

如果你想看看你能不能做到，我想答案是肯定的。像 vhost 这样的东西[在这里](https://stackoverflow.com/a/11961884/780027)建议在另一个答案中。另一方面，我可能会采用某种关注点分离并限制我的应用程序。如果要将其放置在同一个服务器框中，我将执行以下操作：

1.  可用核心数 -1 将是我将绑定到单个服务器的域数。
2.  每个核心都将拥有一个绑定到它的 node.js 进程。它将实现覆盖单个网站的单个 Web 应用程序。
3.  备用核心将包含某种“路由器”，要么是 nginx 解决方案，要么是另一个路由数据的 node.js/express 应用程序。

简而言之，不要想着做大，想着做大。

缺点：这是一种不同的缩放方式。你只能从一个盒子里取出这么多果汁。当我们谈论“多盒”环境时，我不确定如何扩展这个想法。**

# linux - Linux 挂载失败并出现错误传输端点未连接

> ID：11960706
> 
> 赞同：2
> 
> 时间：2012-08-14T21:04:24.287
> 
> 标签：linux, shell, mount, s3fs

有时，由于未知原因，Linux 服务器上的 Amazon S3 Fuse 挂载会全天失败。唯一的解决办法是`umount`再到`mount`目录。我尝试编写以下 shell 脚本，当手动卸载它时它可以工作并重新安装，但我了解到当链接失败但实际上并未卸载时必须有一些其他“状态”。

原始错误：

```
[root@app3 mnt]# cd s3fs
[root@app3 s3fs]# ls
ls: cannot access amazon: Transport endpoint is not connected
amazon
[root@app3 s3fs]# umount amazon 
[root@app3 s3fs]# mount amazon/ 
```

Shell 脚本尝试检查挂载并在失败时重新挂载（在手动测试中工作但失败）：

```
 #!/bin/bash

   cat /etc/mtab | grep /mnt/$1 >/dev/null
   if [ "$?" -eq "0" ]; then
        echo /mnt/$1 is mounted.
   else
        echo /mnt/$1 is not mounted at this time.
        echo remounting now...
        umount /mnt/$1
        mount /mnt/$1
   fi 
```

* * *

1.  如果我手动卸载目录并运行测试，为什么 shell 脚本会起作用，但是当传输端点失败时，测试返回 true 并且不会发生重新安装？
2.  解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T08:50:08.463

我知道这是旧的，但它可能会帮助其他人面临这个问题。我们遇到了类似的问题，我们的存储桶被随机卸载并出现“传输端点未连接”错误。

我没有使用“cat /etc/mtab”，而是使用“df -hT”，它适用于我的脚本。问题是它陷入了这种奇怪的状态，半挂载，“mtab”仍然认为它是挂载的；但我仍然不知道为什么。

这是我正在使用的代码：

```
#!/bin/bash

如果 [ $(df -hT | grep -c s3fs) != 1 ]
然后
        # 先卸载
        卸载 /path/to/mounted/bucket；

        # 重新挂载
        /usr/local/bin/s3fs 存储桶名称 /path/to/mount/bucket -o noatime -o allow_other;

        echo "s3fs 已关闭";

        # 也许在这里发送电子邮件让你知道它已经失败了
菲

```

还要确保以 root 身份运行脚本，否则将无法卸载/重新安装。

# magento - Magento：_setResourceModel 覆盖以更改集合名称

> ID：11960714
> 
> 赞同：0
> 
> 时间：2012-08-14T21:05:00.510
> 
> 标签：magento

请有人可以向我展示**真实世界**的示例，说明何时建议覆盖 _setResourceModel 以提供不同的集合名称。

我发现 magento 提供了为“_collection”使用自定义词的选项，但绝对没有证据表明它曾经做过，这很有趣。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-14T21:46:58.923

如果您使用多个数据存储，您可能希望为 _collection 使用不同的名称

（例如：如果您使用的是 MySql 和 MongoDB）。

逾越节

# spring-mvc - Spring-MVC 3.1：将请求从一个控制器功能转发到另一个

> ID：11960719
> 
> 赞同：11
> 
> 时间：2012-08-14T21:05:22.840
> 
> 标签：spring-mvc

我正在使用 Spring 3.1。我有一个控制器函数，它接收通过 FORM 提交的命令对象（数据持有者）并进行一些处理：

```
@RequestMapping(value = "/results", method = RequestMethod.POST)
public String toResultsScreen(@ModelAttribute("ssdh") SearchScreenDataHolder ssdh,
                                  BindingResult bindingResult,    
                                  ModelMap model,                
                                  HttpSession session) {

    if (bindingResult.hasErrors()) {
        logger.debug("Error returning to /search screen");
        return "search";
    }

    netView = "results";

    // do stuff

    return nextView;         

} // end function 
```

一些用户想以编程方式制作 GET 链接以从我们的站点获取信息，我想设置另一个处理程序来处理该请求。它将创建该命令对象 ( ssdh ) 的新安装，并使用通过 GET 请求发送的参数填充它。然后它将它传递给上面的处理程序。像这样的东西：

```
@RequestMapping(value = "/pubresult")
public String toPublicResultsScreen(ModelMap model,    
                                   HttpSession session,             
                                   @RequestParam (required=true) String LNAME,   
                                   @RequestParam (required=false)String FNAME){

    Search search = new Search(usertype);

    // Capture the search parameters sent by HTTP
    ssdh.setLast_name(LNAME);
    ssdh.setFirst_name(FNAME);

    // To Do:  "forward this data holder, ssdh to the controller function quoted first

    return nextView;         

} // end function 
```

我的问题是如何将我的命令/数据持有者对象转发到第一个控制器函数，这样我就不必以任何方式将代码更改为第一个控制器函数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T21:15:00.397

您可以使用`RedirectAttributes`Spring MVC 3.1 中引入的对象，并使用要保留以进行重定向的数据填充它。它称为 PRG (POST/Redirect/GET) 模式。

```
@RequestMapping(value="/saveUserDetails.action", method=RequestMethod.POST)
public String greetingsAction(@Validated User user,RedirectAttributes redirectAttributes){
    //setting attributes 
    redirectAttributes.addFlashAttribute("firstName", user.getFirstName());
    redirectAttributes.addFlashAttribute("lastName", user.getLastName())
    return "redirect:success.html";
} 
```

我写了一些关于如何使用它的技术文章。我相信它会给你更多的细节：

[http://www.tikalk.com/java/redirectattributes-new-feature-spring-mvc-31](http://www.tikalk.com/java/redirectattributes-new-feature-spring-mvc-31)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T21:38:33.680

您应该能够在 ModelAttribute 中设置 ssdh 并简单地将其转发回来，这样，RequestDispatcher 应该能够将其映射回`/results`处理程序：

```
@RequestMapping(value = "/pubresult")
public String toPublicResultsScreen(ModelMap model,    
                                   HttpSession session,             
                                   @RequestParam (required=true) String LNAME,   
                                   @RequestParam (required=false)String FNAME, Model model){

  Search search = new Search(usertype);
  // Capture the search parameters sent by HTTP
  ssdh.setLast_name(LNAME);
  ssdh.setFirst_name(FNAME);
  model.addAttribute("ssdh", ssdh);

  return "forward:/results";         

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-28T17:40:31.600

利用

> org.springframework.web.servlet.view.RedirectView

spring 包中的类重定向到 spring MVC 控制器中的不同页面。[Baeldung 博客页面有更多详细信息](https://www.baeldung.com/spring-redirect-and-forward)

示例代码：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public RedirectView mainMethod() {
    return new RedirectView("/login");
}

@RequestMapping(value = "/login", method = RequestMethod.GET)
public ModelAndView mainLogin() {
    ModelAndView model = new ModelAndView("login");
    return model;
} 
```

# scala - “for (i <- 1 to x; j <- 1 to y)”实际上如何增加Scala中的变量？

> ID：11960722
> 
> 赞同：2
> 
> 时间：2012-08-14T21:05:33.890
> 
> 标签：scala, syntax, for-loop

下面的循环如何递增？

```
for(i <- 1 to 3; j <- 1 to 3) print((10 * i + j) + " ") 
```

是否有使用 'to' 的隐式计数器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T21:16:51.630

`for`实际上是应用一堆集合方法的简写。特别是，如果您不使用`yield`，则选择器中的每个语句`for`都将转换为`foreach`。所以

```
for (i <- 1 to 3; j <- 1 to 4) f(i,j) 
```

变成

```
(1 to 3).foreach{ i => (1 to 4).foreach{ j => f(i,j) } } 
```

`foreach`是所有集合上的一个方法——`Range`包括在内，它`1 to 3`变成了——它循环遍历集合中的每个项目，每次调用一个提供的函数。A`Range`的项目是列出的数字（在这种情况下包括端点）-实际上，实际上`Range`并没有将数字存储在单独的列表中，因此它的主要目的正是为这种迭代保存数字范围.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:07:44.737

在 scala 中，该`for`构造类似于 Java 中的“foreach”构造。以下设置`i`为给定 Iterable 中的每个连续项目。

```
scala> for(i <- Seq(1, 2, 3)) println(i)
1
2
3 
```

`to`运算符，如`1 to 3`构造`Range`从 1 到 3的a：

```
scala> 1 to 3
res3: scala.collection.immutable.Range.Inclusive = Range(1, 2, 3) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:17:23.003

存在从 Int 到 RichInt 的隐式转换。

RichInt 定义了返回 Range 的函数 to()。

Range 是一个集合，并且具有 foreach()，因此它可以用于 for 理解（这只是 foreach() 的语法糖）。

# xml - 弹性列表排序不起作用

> ID：11960725
> 
> 赞同：0
> 
> 时间：2012-08-14T21:05:43.230
> 
> 标签：xml, actionscript-3, apache-flex, filtering, flex4.5

我的 xml 看起来像这样：

```
<feed title="'.$item->title.'" category="'.$categoryname.'">
<item category="'.$categoryname.'">
<title category="'.$categoryname.'">'.htmlspecialchars($item2->title).'</title>'
<description category="'.$categoryname.'">'.htmlspecialchars($item2->description).'</description>
<pubdate category="'.$categoryname.'">'.$item2->pubDate.'</pubdate>');
</item>
</feed> 
```

我的过滤功能看起来像这样

```
private function handleCategories(event:Event):void{

            filter = event.currentTarget.selectedValue;
            feedData.filterFunction = categoryFilter;
            feedData.refresh();

        }
            protected function categoryFilter(item:XML):Boolean
            {
                return item.@category == filter;
                trace(filter);
} 
```

当我加载到我的列表中时，它会正确显示，但是当我过滤（单击单选按钮）时，它会一直显示相同的列表。您在上面看到的跟踪会返回正确的类别，所以这不是问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:17:25.363

你有类似的东西吗

```
<fx:Declarations>
    <s:RadioButtonGroup change="handleCategories(event)" />
    <s:XMLListCollection id="feedData" />
</fx:Declarations> 
```

或者：

```
[Bindable]
private var feedData:XMLListCollection; 
```

? 你有任何编译器或运行时警告吗？

# c# - 根据动态磁贴的内容跳转到 Metro 中的特定应用程序上下文？

> ID：11960726
> 
> 赞同：1
> 
> 时间：2012-08-14T21:05:47.937
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, live-tile

我想知道是否可以根据单击活动磁贴的内容跳转到某些特定的应用程序上下文或位置。换句话说，是否可以在启动时根据动态磁贴的状态将一些信息传递到应用程序中？

如果可能的话，解释或解释的链接会膨胀！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:19:05.807

您可以将深层链接的[辅助磁贴](http://msdn.microsoft.com/en-us/library/windows/apps/hh465372.aspx)固定到应用中的特定位置。当用户从辅助磁贴启动您的应用程序时，您的应用程序将被传递您在创建磁贴时设置的参数。请参阅[辅助 Tile 类构造函数](http://msdn.microsoft.com/en-us/library/windows/apps/hh701602.aspx)“参数”参数。收到参数后，您可以在应用程序中随意使用它们（例如，导航到特定位置）。有关更多详细信息，请参阅[此示例](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)。

至于根据动态磁贴中*当前*显示的内容导航到应用程序内的不同区域，这是不可能的。主磁贴将始终将应用程序启动到默认页面，辅助磁贴将始终传递磁贴中定义的参数。无法根据显示的内容传递条件参数。例如，无法根据正在显示的一系列图像中的哪个图像导航到不同的位置。

# android - 从 onResume 继续播放 VideoView

> ID：11960730
> 
> 赞同：22
> 
> 时间：2012-08-14T21:06:02.827
> 
> 标签：android, android-videoview

我有一个 VideoView，当我启动电子邮件意图时它会暂停。完成电子邮件意图后，我希望 videoView 继续播放，但是，它会从头开始。

```
@Override
public void onPause() {
    Log.d(TAG, "onPause called");
    super.onPause();
    videoView.pause();
}
@Override
public void onResume() {
    super.onResume();
    Log.d(TAG, "onResume called");
    videoView.start();//resume() doesnt work
} 
```

我怎样才能让 videoView 从它停止的地方恢复。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-14T21:17:49.227

那这个呢：

```
@Override
public void onResume() {
    super.onResume();
    Log.d(TAG, "onResume called");
    videoView.seekTo(stopPosition);
    videoView.start(); //Or use resume() if it doesn't work. I'm not sure
}

// This gets called before onPause so pause video here.
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    stopPosition = videoView.getCurrentPosition(); 
    videoView.pause();
    outState.putInt("position", stopPosition);
} 
```

然后在你的 onCreate() 中调用 bundle 中的 stopPosition 并在全局范围内设置它

```
@Override
protected void onCreate(Bundle args) {
    super.onCreate(args);
    if( args != null ) {
        stopPosition = args.getInt("position");
    } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-12T16:38:54.040

使用`seekTo`会在恢复视频时产生轻微的闪烁效果。更好的方法是使用`pause()`类的`start()`方法，`MediaPlayer`而不是使用`VideoView`. 的`start()`方法`VideoView`从头开始重新开始视频，但如果之前调用了该`start()`方法，`MediaPlayer`则恢复视频的方法。`pause()`

这是官方 android 文档所说的

> 公共无效开始（）
> 
> 在 API 级别 1 中添加 开始或恢复播放。如果之前已暂停播放，则播放将从暂停的位置继续。如果播放已停止，或以前从未开始，则播放将从头开始。

您可以获得`MediaPlayer`与`VideoView`in `OnPreparedListener`of相关联的`VideoView`。

```
public class MainActivity extends Activity {

    private MediaPlayer mMediaPlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        VideoView videoView = (VideoView) findViewById(R.id.videoView1);
        videoView.setVideoPath(path);
        videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                mMediaPlayer = mp;

            }
        });
    }

} 
```

然后可以在对象本身上调用后续`pause()`和方法。`resume()``MediaPlayer`

```
//To pause the video
 mMediaPlayer.pause();

//To resume the video
mMediaPlayer.start(); 
```

非常简单而有效的解决方案。希望能帮助到你！

# c# - 了解空合并运算符 (??)

> ID：11960732
> 
> 赞同：9
> 
> 时间：2012-08-14T21:06:03.780
> 
> 标签：c#, nullable, null-coalescing-operator

我有一个`WebControl`实现`.Value`返回 Nullable<decimal> 的 getter/setter的自定义

这是一个客户端过滤的文本框（`TextBox`包含 javascript 和一些用于设置/获取值的服务器端逻辑的子类）

这是该控件的 getter 和 setter：

```
public decimal? Value
{
    get
    {
        decimal amount = 0;
        if (!decimal.TryParse(this.Text, NumberStyles.Currency, null, out amount))
        {
            return null;
        }
        else
        {
            return amount;
        }
    }
    set
    {
        if (!value.HasValue)
        {
            this.Text = "";
        }
        else
        {
            this.Text = string.Format("${0:#,##0.00}", value);
        }
    }
} 
```

我看到的问题是该语句的输出：

```
decimal Amount = uxAmount.Value ?? 0M; 
```

`uxAmount.Value`当返回 10000时，我看到金额设置为“0” 。

这按我的预期工作（请原谅外壳的变化）：

```
decimal? _Amount = uxAmount.Value;
decimal amount = _Amount ?? 0; 
```

当调用在 Linq2Sql 数据上下文中定义的 UDF 函数以及空合并运算符时，我也看到了这种行为（最近），也就是说，我知道我的 UDF 调用返回了预期值，但我得到的是 RHS 值。

让我更加困惑的是，如果我在手表中评估 uxAmount.Value，我会得到 10000 的类型`Nullable<decimal>`。

以下是我尝试过的一些表达方式：

```
decimal? _Amount = uxAmount.Value; //10000
decimal amount = _Amount ?? 0; //10000
decimal amount2 = _Amount ?? 0M; //10000
decimal Amount = uxAmount.Value ?? 0M; //0 
```

然后我在上面 4 之后添加了这个表达式

```
decimal amount3 = (uxTaxAmount.Value) ?? 0M; 
```

现在

```
decimal Amount = uxAmount.Value ?? 0M; //10000
decimal amount3 = (uxAmount.Value) ?? 0M; //0 
```

似乎最后一次调用总是 0，但是(根据上面的 getter/setter 使用 a`uxAmount.Value`解析出来的值是稳定的。我在断点处停止，没有其他线程可以操纵这个值。`.Text``TryParse`

请注意使用 M 后缀将常量强制为十进制，因为它是整数，我怀疑存在类型转换问题。

有任何想法吗？

LHS 和 RHS 的值似乎都是稳定且已知的。

--edit-- 一些来自 VS2010 的屏幕截图

![单步执行显示 amount3 值的代码](../Images/2ed076edf8cc45930ed0228a1670a3f0.png)

![观看对话框和有关变量状态的更多详细信息](../Images/0b54cdd63fed555257abae6fee179bd4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:43:23.297

看看这个类似的问题

[在可空类型上使用合并空运算符会更改隐式类型](https://stackoverflow.com/questions/10170592/using-coalescing-null-operator-on-nullable-types-changes-implicit-type?rq=1)

为什么不做

```
decimal amount = uxTaxAmount.Value.HasValue ? uxTaxAmount.Value.Value : 0M 
```

鉴于最近的编辑和评论，这不是对原始海报问题的正确答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:51:20.990

（这个答案是根据我上面的评论构建的。）

你确定调试器会正确地向你显示这个吗？您是否尝试过进一步降低某些行以确保您具有更新的值`amount3`？

我确定这只是调试器的问题。有时你必须更进一步。也许翻译后的代码 (IL) 有一些优化会混淆调试器（或者我会知道什么）。但是如果没有调试器，值将在您期望的时候准确更新。

我见过其他有经验的开发人员对类似的情况感到困惑，所以我知道调试器在查看对局部变量的赋值时有时会落后“一行代码”。也许有人可以找到讨论这个的链接？

# actionscript-3 - 根据数据网格中行和列的值，如何使 Datagrid 的基于图像的 itemRenderer 可见或不可见？

> ID：11960736
> 
> 赞同：0
> 
> 时间：2012-08-14T21:06:23.710
> 
> 标签：actionscript-3, apache-flex, itemrenderer

描述与标题基本相同。这是我不久前发表的一篇相关文章：[为什么基于图像的 itemRenderer 总是可见的？](https://stackoverflow.com/questions/11959854/why-would-an-image-based-itemrenderer-always-be-visible/11959969#11959969) 基本上，在这种情况下，用于 itemRenderer 列的 dataField 是“正在进行的”，我想将 itemRenderer 和/或其图像设置为 true 或 false，具体取决于该行中正在进行的值。如果 itemRenderer 是基于标签的，我可以将文本设置为不同的值，这取决于它。但是，某些特定属性（例如可见）是有问题的。到目前为止，我发现的关于使用状态的文档很难理解，我什至不确定这些文档是否适用于此。我该怎么做呢？顺便说一下，当前代码如下：

```
<mx:DataGridColumn dataField="ongoing" id="ongoing" headerText="">
<mx:itemRenderer>
    <mx:Component>
        <mx:Image source="logo.jpg">
            <mx:Script>
                <![CDATA[
                    override public function set data(value:Object):void {
                        super.data = value;
                        super.visible = (value.ongoing != 'False');
                    }
                ]]>
            </mx:Script>
        </mx:Image>
    </mx:Component>
</mx:itemRenderer>
</mx:DataGridColumn> 
```

我也尝试过使用设置可见覆盖。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:17:35.623

gokiさん可以在这里大致找到答案：

[http://www.fxug.ne​​t/modules/xhnewbb/viewtopic.php?topic_id=2229](http://www.fxug.net/modules/xhnewbb/viewtopic.php?topic_id=2229)

至少目前，我实际上必须将源设置为图像或空白字符串才能使其正常工作（看起来他正在尝试做一些稍微不同的事情），但它确实有效。

编辑：这两行代码替换了他弄乱可见属性的地方：

```
var property0:SetProperty = new SetProperty(this, "source", "");
var property1:SetProperty = new SetProperty(this, "source", "dot.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:28:45.483

这没有任何意义，尤其是在 Datagrid 中。如果您不想显示数据，请使用集合的过滤器功能对其进行过滤。否则你有空单元格。

此外，您正在处理组件生命周期：在数据中设置可见将在组件实际呈现之前调用 - 因此没有效果。如果您使用的是 vanilla 对象并且没有类，则属性值的更改也不会产生任何影响。

在站点注释上：布尔值应该是布尔值，没有字符串和内联渲染器会导致一些范围问题，这就是为什么我建议使用单独的组件定义（又名 .as 或 .mxml 文件）。

# html - 具有可变列的固定宽度表

> ID：11960739
> 
> 赞同：0
> 
> 时间：2012-08-14T21:06:44.147
> 
> 标签：html, css, css-tables

我有一个固定宽度的表格 ( `style="width: 100%"`)，其中动态数据被放入单元格中。数据在宽度方面变化很大，有些字符串超出了表格的长度，没有空格。因此，我习惯于`table { table-layout:fixed; word-wrap: break-word; }`将文本包装在列中，并防止表格超出页面宽度。

但是，这会导致列等间距，这不是对我的表格空间的最佳使用，导致一些单元格被包裹了两到三次，而另一些单元格在所有空间中只有一个单词。

有没有办法保持最大表格宽度，打破单词，并利用浏览器对可变宽度列的布局优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:50:16.730

如果您有一个您总是希望比其他列更大的列，您应该使用 eg 来表示`<td width="40%">`。此外，如果有一列总是很小，您也可以为其设置宽度。你给浏览器的线索越多，布局看起来就越好。

# css - 简单不编译

> ID：11960741
> 
> 赞同：5
> 
> 时间：2012-08-14T21:07:15.413
> 
> 标签：css, less

我正在使用“simpleLESS”程序将我的 .less 文件即时编译成 .css 文件。

真的很棒！

然而，仅仅使用了几天后，'simplLESS' 停止将 .less 复制到 .css 文件中。我尝试重新安装，重新下载然后重新安装，尝试其他目录，其他 .less 文件，尝试手动重新编译 - 但没有任何效果。

有没有人经历过这个？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:09:23.633

简单的错误处理总是很糟糕！而不是告诉你出了什么问题，它就是行不通！所以这就是我要做的：当 Simpless 不显示错误时，我使用[Winless](http://winless.org/)来查找错误，并在修复它之后返回到 Simpless。注意：我使用 Simpless 是因为它与 @import .less 文件一起工作得很好，而 Winless 则不行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T21:22:19.510

我似乎找到了问题所在。我有以下代码：

```
#result{
   .result_padding;

   .icon{
      height: 17px;
      width: 23px;
    }
} 
```

但是，实际上没有定义“.result_padding”。简单的编译器应该已经发现了这一点，但我想这是一个错误。无论如何，删除这条线后 - 它起作用了。

# gwt - GWT 事件处理程序阻塞 UI

> ID：11960742
> 
> 赞同：1
> 
> 时间：2012-08-14T21:07:23.670
> 
> 标签：gwt

我是 GWT 的新手。我创建了一个基于 MVP 的项目（如此[处](https://developers.google.com/web-toolkit/articles/mvp-architecture)所述），它使用了许多自定义事件。有几个小部件（10+）监听一些全局事件并在事件处理程序中执行一些操作（包括写入 DOM）。

我发现 UI 会阻塞并且在一个事件的每个处理程序完成处理之前不会更新。这会导致 UI 在页面加载和导致小部件更新的任何其他事件时执行缓慢。

我用纯 JavaScript/jQuery 创建了一个类似的项目，这不是该项目的问题。事实上，用户界面非常快。我在这里做错了什么？文档指出 GWT 的性能非常好，所以我必须得出结论，我只是做错了。

一个例子，我有一个下拉菜单选择一个日期预设（如昨天或上周）。发生这种情况时，我在模型中设置选定的预设，如下所示：

```
 public void setDateRange(DatePreset dateRange) {
    this.dateRange = dateRange;
    eventBus.fireEvent(new DateChangedEvent(dateRange));
} 
```

每个小部件都可以访问相同的事件总线并注册以处理 DateChanged 事件。每个小部件都需要进行大量的逻辑和处理（包括进行 ajax 调用），然后使用正确的数据更新自身。

```
 @Override
public void onDateChanged(DateChangedEvent event) {
    DatePreset dateRange = event.getDate();
    … additional processing and logic
    … ajax call
} 
```

经过一些基本分析后，我确定每个小部件需要大约 100-150 毫秒才能完成处理（这意味着 UI 延迟超过一到两秒）。当我说阻塞时，我的意思是我选择日期预设的下拉菜单甚至不会关闭（我看到旋转轮），直到一切完成。

我该怎么做才能让它运行得更快（并且没有 UI 阻塞）？我对任何想法持开放态度。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:59:15.737

在开发人员模式下测量项目的速度可能是这种极度缓慢的原因。

如果将应用程序部署到应用服务器，或者`&gwt.codesvr=127.0.0.1:9997`在 devmode 中从 url 末尾删除部分，则可以检查应用程序的实际速度。

# pointers - 在 Go 中将 **T 转换为 *unsafe.Pointer

> ID：11960743
> 
> 赞同：6
> 
> 时间：2012-08-14T21:07:28.030
> 
> 标签：pointers, type-conversion, go, unsafe-pointers

如何将类型变量转换`**T`为`*unsafe.Pointer`?

下面的示例将给出编译错误：

> 无法将 &ptr (type **s) 转换为 type *unsafe.Pointer

```
package main

import (
    "sync/atomic"
    "unsafe"
)

type s struct {
    value int
}

func main(){
    var ptr *s
    a := &s{42}

    old := ptr
    atomic.CompareAndSwapPointer(
        (*unsafe.Pointer)(&ptr), // &unsafe.Pointer(ptr)
        unsafe.Pointer(old),
        unsafe.Pointer(a))
} 
```

如果我切换`(*unsafe.Pointer)(&ptr)`到`&unsafe.Pointer(ptr)`，我会得到这个编译错误：

> 不能取 unsafe.Pointer(ptr) 的地址

附言。我选择做一个例子，`sync/atomic`因为这是你实际上必须进行这种转换的一种情况。

**编辑**

一种不正确的解决方案是使用临时变量：

```
up := unsafe.Pointer(ptr)
atomic.CompareAndSwapPointer(&up, ... 
```

在编译时，CAS 只会交换存储在`up`而不是`ptr`. 正如 zeebo@#go-nuts 所指出的，这不是预期的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T22:14:34.683

mcef@#go-nuts 发布了如何转换 **T 的答案：

> (*unsafe.Pointer)(unsafe.Pointer(ptr))，其中 ptr 的类型为 **T。

zeebo@#go-nuts 提供了一个工作示例（经许可在此处发布）：

```
package main

import (
    "fmt"
    "sync/atomic"
    "unsafe"
)

type T struct {
    value int
}

func Swap(dest **T, old, new *T) bool {
    udest := (*unsafe.Pointer)(unsafe.Pointer(dest))
    return atomic.CompareAndSwapPointer(udest,
        unsafe.Pointer(old),
        unsafe.Pointer(new),
    )
}

func main() {
    x := &T{42}
    n := &T{50}
    fmt.Println(*x, *n)

    p := x
    Swap(&x, p, n)
    fmt.Println(*x, *n)
} 
```

# javascript - 一个事件流如何针对 gui 的特定对象？

> ID：11960750
> 
> 赞同：1
> 
> 时间：2012-08-14T21:07:53.843
> 
> 标签：javascript, flash, html, events, flow

我正在开发一个 javascript 框架，用于在 html 画布上使用基本复合模式创建带有嵌套精灵的简单动画。

我一直在对 Clutter 和 Flash（非常相似的结构）的工作进行建模。“舞台”包含屏幕上的所有项目，即“DisplayObjects”。这些可以聚合在“DisplayObjectContainer”中，该“DisplayObjectContainer”继承自“DisplayObject”。“舞台”本身也是一个“DisplayObjectContainer”。所有这些都继承自“EventDispatcher”。

在过去几天的大部分时间里，我都在阅读这些系统的事件流，并在各种开源项目中搜索示例。

据我了解，当一个事件被调度时，它应该遵循一定的传播路径：它从舞台流到显示对象层次结构（“捕获”阶段），直到它到达该事件的“目标”，然后“气泡”支持显示层次结构。如果这还不够清楚，这里的图像应该有助于解释：

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e4f.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e4f.html)

[http://docs.clutter-project.org/docs/clutter/1.4/event-flow.png](http://docs.clutter-project.org/docs/clutter/1.4/event-flow.png)

我无法理解其中的一个方面，我无法判断是我自己还是我认为的不清楚：

假设我正在处理点击。我单击显示并使用浏览器的本机事件处理来检索单击的 x/y 坐标，然后将其发送到显示层次结构以确定我单击了哪个对象。

到目前为止，这是我代码中的“捕获”阶段。但这与文档说目标在进入事件流时应该已经附加到事件完全不一致。

我真的应该遍历我的显示项目图两次吗？

对此问题的任何建议或专业知识将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:06:22.033

有趣的问题！是的，我相信你需要先遍历你的`DisplayList`第一个来计算事件`target`，然后再开始`capture`你的事件流阶段。从未设计过事件系统，我对此并不完全确定，但也许当您计算`target`对象时，您可以缓存分层路由并将其用作事件流的基础，而不是`DisplayList`再次遍历。

我认为，如果您从实现的角度而不是在设计事件系统（以及现有事件系统的术语）的抽象中考虑，那么您不清楚的一点会更明显。想象一下，一个小部件由一个父对象和许多需要对鼠标单击做出反应的子项组成。您可能决定只侦听父对象上的事件，但根据事件起源的目标对象做出反应。在`ActionScript`中，如果您使用事件流的捕获阶段，您的处理程序将在事件目标到达之前触发，但在这种情况下，目标是事件对象的基本属性。

正如评论中所建议的那样，可能值得查看[easeljs的](http://www.createjs.com/#!/EaselJS)[源代码](https://github.com/CreateJS/EaselJS/blob/master/src/easeljs/)，因为它声称提供“Flash 开发人员熟悉的”API。但是，请注意，由于性能原因，easeljs 目前不支持功能齐全的事件流（请参阅[此处](https://github.com/CreateJS/EaselJS/issues/140)）。

我的两便士；事件流很难理解（更不用说设计了），实现功能齐全的事件系统可能与您创建轻量级库的目标不一致。`bubbling`我建议您在此阶段保持简单，仅在发现需要时添加诸如事件之类的功能。

# python - 使用 pymongo 从 mongo 检索文档时的有序属性？

> ID：11960755
> 
> 赞同：2
> 
> 时间：2012-08-14T21:08:01.990
> 
> 标签：python, mongodb

当我将以下文档存储到 mongo 中时，类似于：

```
{
name: Somename,
profile: Someprofile
} 
```

当我使用 find_one() 时：

我得到类似的结果：

```
{
profile: Someprofile,
_id: 35353432326532(random mongo id),
name: Somename
} 
```

在 python 中是否有某种方式，当我在 find_one 之前或之后做某事时，我可以得到一个 json 字符串的结果，该字符串的排序如下：

```
{
_id: 35353432326532(random mongo id),
name: Somename,
profile: Someprofile
} 
```

我尝试使用如下所示的 OrderedDict，但似乎没有帮助。

```
somedocument = db.mycollection
theordereddict = OrderedDict(data_layer.find_one())
print str(theordereddict) 
```

如何以关于属性的正确顺序获取输出字符串？在我将文档插入数据库之前，这个顺序是由其他东西决定的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:53:42.833

与@Mike Steder 的回答基本相同，但可能不那么花哨且更清晰：

```
import json
from collections import OrderedDict

theordereddict = OrderedDict()
d = data_layer.find_one()
for k in sorted(d.keys()):
    theordereddict[k] = d[k]

json.dumps(theordereddict) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:20:01.287

`collections.OrderedDict`不排序键它只是*保留*顺序，您需要按照要检索它们的顺序将键插入其中。

```
d = data_layer.find_one()
def key_function(tuple):
    """This defines the sort order for the sorted builtin"""
    return tuple[0]
sorted_dict = collections.OrderedDict((k,v) for k, v in sorted(d.items(),
                                                               key=key_function)) 
```

也就是说，它看起来`print str(sorted_dict)`并没有给你你想要的输出。我认为您需要手动构建排序的字符串表示形式。例如：

```
s = "{" + ",".join(["%s:%s" for k,v in sorted(d.items(), key=key_function)]) + "}" 
```

# ios - iphone上的系统声音不播放

> ID：11960757
> 
> 赞同：1
> 
> 时间：2012-08-14T21:08:04.550
> 
> 标签：ios, system, audio

我想播放系统声音，但我什么也没听到：

```
- (void) play_system_sound
{
    NSLog(@"Play system sound");

    SystemSoundID soundID;
    NSString *path = [[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] pathForResource:@"Tock" ofType:@"aiff"];
    NSLog(@"path = %@", path );
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:path], &soundID);
    AudioServicesPlaySystemSound(soundID);
    AudioServicesDisposeSystemSoundID(soundID);
    NSLog(@"Play system sound DONE");
} 
```

我什么也听不见。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:23:40.327

之后`AudioServicesPlaySystemSound(soundID)`，不要`AudioServicesDisposeSystemSoundID(soundID)`立即打电话。

尝试这个 ：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] pathForResource:@"Tock" ofType:@"aiff"];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:path], &soundID);
}

-(void)dealloc
{ 
    AudioServicesDisposeSystemSoundID(soundID);
}

- (void)play_system_sound
{
    AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T03:40:19.673

我不知道你是否解决了这个问题，但对我来说，在 iOS 7 上，有时`(__bridge CFURLRef)`强制转换不起作用，在这种情况下，如果你打印`(__bridge CFURLRef)[NSURL fileURLWithPath:path]`出`0x0`. 这导致`AudioServicesCreateSystemSoundID()`. 函数的返回值是类型`OSStatus`。如果失败，该函数将返回`-50`，这意味着一个或多个参数无效。（如果执行成功，则返回`0`。）

我通过使用 C 样式函数获取文件的路径解决了这个问题：

```
 CFBundleRef mainBundle = CFBundleGetMainBundle ();
    CFURLRef soundFileUrl;

    soundFileUrl = CFBundleCopyResourceURL(mainBundle, CFSTR("fileName"), CFSTR("wav"), NULL);
    AudioServicesCreateSystemSoundID(soundFileUrl, &soundID); 
```

# git - 如何将相同的编辑推送到 git 中的不同分支？

> ID：11960762
> 
> 赞同：2
> 
> 时间：2012-08-14T21:08:34.347
> 
> 标签：git, git-workflow

我有一个 Git 存储库，它有一个 master 分支。现在我想创建在每个分支（例如数据库）中具有相同更改的不同分支。所以我可以在**master**中有这些文件：

*   一个.java
*   b.java
*   数据库-1.xml

和两个分支，称为**branch-1**和**branch-2**，带有这些文件：

*   一个.java
*   b.java
*   数据库分支 1.xml

和

*   一个.java
*   b.java
*   数据库分支 2.xml

现在，让我在 中找到一个错误`a.java`，显然我想修复它并在每个分支中提交相同的更改。我怎样才能实现我的目标？

**注意**：数据库文件必须保持不同，其他文件将始终相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:13:54.677

合并。但最好在只有 database-1.xml 的公共起点更改文件 a.java，否则它将被破坏。

樱桃采摘是另一种方式。但是以这种方式管理分支机构很快就会变得难以管理。

这就提出了关于部署配置的问题。您不应该仅仅因为您的配置会根据您的部署位置而发生变化而进行分支。使 database.xml 根本不起作用。依靠部署脚本或涂抹/清理脚本来根据您的部署位置调整配置 - 甚至在本地。

这意味着配置应该具有您需要的结构，但仅在需要的区域进行调整 - 通常只是一个连接字符串。

想想当您需要调整必须跨越所有分支的数据库文件中的某些内容时会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:23:25.860

可能的解决方案取决于您的工作流程。

**选项 1：重写历史**
如果您**不将分支推送到远程存储库，您可以在***主*分支上提交错误修复，因为这是文件的共同起点`a.java`。之后，您可以重新调整每个分支以包含此更改。

**选项 1a：仅重写主题分支的历史**
另一个工作流基于约定。您可以在推送*主*分支时将主题分支推送到服务器。惯例是，这些主题分支**永远不会合并到主**分支中，并且**允许重写历史**。主题分支可以是一个开发人员私有的，也可以在其他人之间共享。对于后一种情况，小组必须在变基发生之前和之后进行协调。主题分支工作完成后，分支会根据*主*分支重新设置基础，并且可以轻松应用快进分支。

**选项 2：Cherry pick**
如果您将分支推送到远程存储库，则不建议重写历史记录。简而言之，您唯一的选择是在每个分支的顶部提交一个错误修复。为了避免两次做同样的工作，`git cherry-pick`推荐的命令是（正如亚当和阿尔伯特已经说过的那样）。

**选项 3：将 master 合并回每个主题分支**
这是亚当答案的 git 部分。*您可以在master*分支上提交错误修复，这是受影响文件的公共起点。然后，您可以将*master*合并回主题分支。这实际上与使用同时在*主*分支上发生的所有更改更新主题分支相同。这个缺点是您不能单独选择错误修复。这是`git cherry-pick`允许的（参见选项 2）。

**注意：**
如果您**不**打算**合并**两个分支，您实际上可以`database-1.xml`为每个分支上的特定配置使用相同的文件。

**项目设置**
除了使用 git 的不同方式之外，我完全同意 Adam 的回答，因为您绝对应该重新考虑您的项目设置并创建一个允许您指定不同环境的配置文件。一个很好的例子是您可能知道的 RubyOnRails 项目的数据库配置文件。

```
// Rails project: config/database.yml

development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: myapp_production
  pool: 5
  username: username
  password: password
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:13:19.617

尝试`git-cherry-pick`应用特定的提交：[git-cherry-pick](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

# django - 仅从没有实例逻辑的模型表单中提取表单

> ID：11960763
> 
> 赞同：0
> 
> 时间：2012-08-14T21:08:37.560
> 
> 标签：django, forms, modelform

有没有一种明显的方法可以在没有实例设置逻辑的情况下将 a`ModelForm`转换为常规？`Form`

我有一个更新/创建 ModelForm 视图，我想`SearchView`通过使用来自完全相同的字段列表的输入来查询模型，但它会导致所需字段和类型出现问题，因为它会立即`ModelForm`将数据附加到`self.instance`。

我最终侵入了元类以获得我想要的东西，但我觉得我很容易在我的眼睛覆盖某些功能之前错过一些解决方案。我真的不喜欢提取核心 django 代码......

其他形式的hackery 会比复制和粘贴整个元类更可取。

```
class ModelFormMetaclass(type):
    def __new__(cls, name, bases, attrs):
        formfield_callback = attrs.pop('formfield_callback', None)
        try:
            parents = [b for b in bases if issubclass(b, ModelToForm)] #<-- here
        # ... rest of class

class ModelToForm(BaseForm):
    __metaclass__ = ModelFormMetaclass 
```

更新：

它似乎`ModelForm._post_clean()`负责实例构造/相关字段验证。

目前，我正在禁用`_post_clean()`并查看它将带我去哪里。

# ruby-on-rails - Spree 管理面板中的自定义选项卡

> ID：11960765
> 
> 赞同：3
> 
> 时间：2012-08-14T21:08:46.327
> 
> 标签：ruby-on-rails, ruby, spree

我无法将我的控制器绑定到创建的管理员面板选项卡。我究竟做错了什么？

路线.rb

```
match '/admin/pimport', :to => 'spree/admin/pimport#index', :as => :pimport 
```

覆盖/pimport_tab.rb

```
Deface::Override.new(
  :name => "pimport_tab",
  :virtual_path => "spree/layouts/admin",
  :insert_bottom => "[data-hook='admin_tabs'], #admin_tabs[data-hook]",
  :text => '<%= tab :pimport %>'
) 
```

控制器/spree/admin/pimport_controller.rb

```
module Spree
  module Admin
    class PimportController < Spree::Admin::BaseController
      def index
      end
    end
  end
end 
```

我的意见/狂欢/管理员/pimport/index.html.erb 是空白的。

* * *

在`http://localhost:3000/admin/pimport`我收到此错误时：

```
NoMethodError in Spree/admin/pimport#index 
```

它显示

```
/Users/artemaminov/.rvm/gems/ruby-1.9.3-p194@rails327spree/gems/spree_core-1.1.3/app/views/spree/layouts/admin.html.erb 
```

其中第 35 行提出：

```
undefined method `admin_pimport_path' for #  ActionDispatch::Routing::RoutesProxy:0x007f88d5aacca0> 
```

提取的源代码（大约第 35 行）：

```
<div id="admin-menu" data-hook>
  <ul data-hook="admin_tabs">
    <%= render :partial => 'spree/admin/shared/tabs' %>
    <%= tab(:promotions, :url => spree.admin_promotions_path) %><%= tab :pimport %>
  </ul>
  <br class="clear">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:38:47.453

在 routes.rb 中应该写：

```
Spree::Core::Engine.routes.prepend do
  match '/admin/pimport', :to => 'admin/pimport#index', :as => :pimport
end 
```

或使用命名空间：

```
Spree::Core::Engine.routes.prepend do
  namespace :admin do
    match '/pimport', :to => 'pimport#index', :as => :pimport
  end
end 
```

# zend-framework - Zend View Helper 函数 URL 重定向到错误的控制器

> ID：11960766
> 
> 赞同：0
> 
> 时间：2012-08-14T21:08:47.960
> 
> 标签：zend-framework

我刚开始使用 Zend Framework，我遇到了一些问题，当我使用 URL 函数时，它位于“painel”布局中名为“menu-gerenciador”的占位符内，这是我在“painel”中使用的默认布局控制器（/gerenciador/painel）它呈现正确的网址：

这：

```
<a href="<?php echo $this->url(array("module" => "gerenciador", "controller" => "usuarios", "action" => "listar")); ?>"> 
```

变成这样：

```
<a href="/gerenciador/usuarios/listar"> 
```

但是当我点击这个链接时，我被重定向回 /gerenciador/painel

我的应用程序目录：

```
-application
--configs
--forms
--layouts
--modules
---default
----controllers
-----IndexController
-----LoginController
----models
----views
---gerenciador
----controllers
-----PainelController
-----UsuariosController
----models
----views
-data
-public
-library
-tests 
```

面板控制器：

```
class Gerenciador_PainelController extends Zend_Controller_Action
{

public function init()
{
    $this->_helper->layout->setLayout('painel'); 

    $auth = Zend_Auth::getInstance();

    if(!$auth->hasIdentity()) {
        $this->_redirect($this->view->url(array('module' => 'default', 'controller' => 'login')));
    }

    $this->view->usuario = $auth->getIdentity();
}

public function preDispatch()
{
    $this->view->render('painel/menu.phtml');
}

public function indexAction()
{

}

public function logoutAction() 
{
    $auth = Zend_Auth::getInstance();
    $auth->clearIdentity();

    $this->_redirect($this->view->url(array('module' => 'default', 'controller' => 'index', 'action' => 'index')));       
}

} 
```

Painel 菜单（女巫在 Painel 布局内的占位符中（有链接））：

```
<?php $this->placeholder('menu-gerenciador')->captureStart() ?>

<div id="menu-painel">
    <h3><a href="#">Gerenciador</a></h3>
    <div>
        <ul class="menulista">
            <a href="<?php echo $this->url(array("module" => "gerenciador", "controller" => "painel")); ?>">
                <li>Inicial</li>
            </a>
            <a href="<?php echo $this->url(array("module" => "gerenciador", "controller" => "usuarios", "action" => "listar")); ?>">
                <li>Usuarios</li>
            </a>
            <li>Banner</li>
            <li>Pagina Empresa</li>
            <li>Configuracoes</li>
        </ul>
    </div>
</div>

<?php $this->placeholder('menu-gerenciador')->captureEnd() ?> 
```

最后是 Usuarios 控制器，它应该通过链接重定向：

```
<?php

class Gerenciador_UsuariosController extends Zend_Controller_Action
{

    public function init()
    {
        $this->_helper->layout->setLayout('painel');

        $this->view->headLink()->appendStylesheet($this->view->baseUrl('css/bootstrap/bootstrap.css'));

        $auth = Zend_Auth::getInstance();

        if($auth->hasIdentity()) {
            $this->_redirect($this->view->url(array('module' => 'default', 'controller' => 'login'), null, TRUE));
        }
    }

    public function indexAction()
    {
        $this->_redirect($this->view->url(array(
            "module"     => "gerenciador",
            "controller" => "usuarios",
            "action"     => "listar"
        )));
    }

    public function listarAction()
    {
        $model = new Gerenciador_Model_Usuario();

        $this->view->listaUsu = $model->listar();    
    }

} 
```

我已经尝试将重置参数 TRUE 放在我的 URL 函数中，但这也不起作用。我不知道为什么它一直重定向到同一页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:31:02.360

在 init 方法中的 Usuarios Controller 中，您有以下行：

```
if($auth->hasIdentity()) { 
```

那不应该是：

```
if(!$auth->hasIdentity()) { 
```

否则登录的用户总是被重定向离开该控制器

# ios - 将 UITextfield 放入 NSMutableArray 的问题

> ID：11960770
> 
> 赞同：1
> 
> 时间：2012-08-14T21:09:03.530
> 
> 标签：ios

我使用 NSArray 进行了这项工作，直到我意识到我需要将一个字符串插入到数组中。现在我将其更改为 NSMutableArray，但我的语法有问题。我可以在 NSMutable 数组中使用 componentsJoinedByString 吗？

```
 NSString *item;
    int numofSeg;
    int needSeg;
if (textfield.text == @"::") {
        numofSeg = 0;

    }
    NSMutableArray *dlist = [[NSMutableArray alloc]init];
    //take string from textfield and split it into a list on colons.
    dlist = [textfield.text componentsSeparatedByString:@":"];
    //run through list to count how many segments. Non blank ones.
    for (item in dlist) {
        if (item != @""){
            numofSeg = numofSeg + 1;
            NSLog(@"%@",numofSeg);
        }
    }
    //determine number of segments
    needSeg = 8 - numofSeg;
    while (needSeg > 0) {
        //insert 0000 at blank spot
        [dlist insertString:@"0000" atIndex:@""];
        needSeg = needSeg - 1;
    }
    for (item in dlist) {
        if (item == @"") {
            //remove blank spaces from list
            [dlist removeAllObjects:item];
        }
    }
    //join the list of times into a string with colon
    NSString *joinstring = [dlist componentsJoinedByString:@":"];
    NSLog(@"%@",joinstring); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:19:55.983

我不认为`NSMutableArray`有一个方法叫做`insertString:atIndex:`. 您可能应该`insertObject:atIndex:`改用。

你到底得到了什么错误？

**编辑：**

如果您只使用`NSMutableArray`to insert `@"0000"`before `@" "`，那么您可以简单地执行以下操作：

```
string = [string stringByReplacingOccurrencesOfString:@" " withString:@" 0000"]; 
```

或类似的东西。无需使用`NSMutableArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:44:43.027

我终于弄明白了。这就是我最终用来解决这个问题的方法：

```
NSString *z = @"0000";
z =  [z stringByAppendingString:@""]; 
```

# asp.net - 链接按钮单击在更新面板中不起作用

> ID：11960771
> 
> 赞同：3
> 
> 时间：2012-08-14T21:09:07.497
> 
> 标签：asp.net, ajax, updatepanel

```
<div id="TrainingSearchGridContainer" class="mt_20">
   <asp:UpdatePanel runat="server" ID="UpdatePanelCountryRegions" UpdateMode="Conditional">
                    <ContentTemplate>
&nbsp;
<asp:DropDownList runat="server" ID="ProductDropDown"></asp:DropDownList>
<asp:DropDownList runat="server" ID="DateDropDown"></asp:DropDownList>

<asp:DropDownList runat="server" ID="CountryDropDown" AutoPostBack="True" OnSelectedIndexChanged="LoadRegions"></asp:DropDownList>
<asp:DropDownList runat="server" ID="StateDropDown"></asp:DropDownList>
    <asp:LinkButton ID="SearchBtn" runat="server" OnClick="StartSearch">
    <span class="blueButton2css3"><span class="btnspan">
        <asp:Literal ID="SearchButtonText" runat="server"></asp:Literal></span></span>
</asp:LinkButton>
</ContentTemplate>
    <Triggers>
 <asp:asyncpostbacktrigger controlid="SearchBtn" eventname="Click" /> 
```

但是由于某种原因，当我单击该按钮时，没有任何反应，如果我删除更新面板，则该按钮可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:18:22.207

问题是您使用的是 AsyncPostBackTrigger 而不是 PostbackTrigger。当控件位于更新面板之外时使用 AsyncPostBackTrigger，您的链接按钮存在于更新面板中，因此您应该使用 PostBackTrigger。

```
 <asp:PostBackTrigger ControlID="SearchBtn" /> 
```

# python - 检测断开持久卷曲连接

> ID：11960773
> 
> 赞同：4
> 
> 时间：2012-08-14T21:09:25.713
> 
> 标签：python, curl

我应该在哪里检查 pycurl 持久连接中的断开连接？

在我的脚本中的某个地方，连接正在死亡/超时/抛出错误，但脚本保持打开状态。我需要检测问题，以便重新启动脚本。

我们正在连接 gnip（社交媒体数据提供商）

我的代码在这里：[https ://gist.github.com/3353033](https://gist.github.com/3353033)

我已经阅读了 libcurl 的选项并通读了 php curl_setopts 文档，因为它们也利用了 libcurl。

```
class Client:  
    time_start = time.time()
    content = ""
    def __init__(self,options):
        self.options = options  
        self.buffer = ""  
        self.conn = pycurl.Curl()  
        self.conn.setopt(pycurl.USERPWD, "%s:%s" % (USER, PASS))  
        self.conn.setopt(pycurl.ENCODING,'gzip')
        self.conn.setopt(pycurl.URL, STREAM_URL)  
        self.conn.setopt(pycurl.WRITEFUNCTION, self.on_receive)  
        self.conn.setopt(pycurl.FOLLOWLOCATION,1)
        self.conn.setopt(pycurl.MAXREDIRS, 5)
        self.conn.setopt(pycurl.COOKIEFILE,"cookie.txt")
        try:
            self.conn.perform()  
        except Exception,e:
            print e.message

    def on_receive(self, data):
        self.buffer += data  

        if data.endswith("\r\n") and self.buffer.strip():  
            if(self.triggered()):
                if(len(self.buffer) != 0 ):
                    try:
                        SaveThread(self.buffer).start()
                    except Exception, e:
                        print "something i commented would have told you there was an error"
                        system.exit(1) 
                self.buffer = ""

    def triggered(self):
        # First trigger based on size then based on time..
        if (len(self.buffer) > SAVE_FILE_LENGTH):
            return True
        time_end = time.time()
        if (((time_end - self.time_start) > ROLL_DURATION)):  #for the time frame 
            self.time_start=time.time()
            return True
        return False 
```

编辑：我已经修复了要点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:52:09.220

上面的代码`system.exit(1)`应该是对的`sys.exit(1)`吧？

除此之外，您是否还有更多`except`可能捕获由`SystemExit`引发的异常的裸条款`sys.exit(1)`？

# php - 面向对象的 PHP 数组 - 从 OO PHP 数据创建“位置”列表

> ID：11960777
> 
> 赞同：0
> 
> 时间：2012-08-14T21:10:07.190
> 
> 标签：php, arrays, oop

我正在使用 FedEx 的 API 为他们的商店查找“下车”位置，然后我将使用地图 API (Google) 显示这些位置。

API 正在工作，但是我遇到了麻烦，因为我不熟悉面向对象的数组。

我想将数组中的值存储为唯一变量，以便可以将它们传递给我的地图 API。

我正在尝试完成以下操作：

```
<?php

// MY "IDEAL" solution - any other ideas welcome
// (yes, reading up on Object Oriented PHP is on the to-do list...)

$response = $client ->fedExLocator($request);

if ($response -> HighestSeverity != 'FAILURE' && $response -> HighestSeverity != 'ERROR')
{
    $response -> BusinessAddress -> StreetLines[0] = $location_0;
    $response -> BusinessAddress -> StreetLines[1] = $location_1;
    $response -> BusinessAddress -> StreetLines[2] = $location_2;
}

?> 
```

工作联邦快递代码示例：

```
<?php

$response = $client ->fedExLocator($request);

if ($response -> HighestSeverity != 'FAILURE' && $response -> HighestSeverity != 'ERROR')
{
    echo 'Dropoff Locations<br>';
    echo '<table border="1"><tr><td>Streetline</td><td>City</td><td>State</td><td>Postal Code</td><td>Distance</td></tr>';
    foreach ($response -> DropoffLocations as $location)
    {
        if(is_array($response -> DropoffLocations))
        {
            echo '<tr>';
            echo '<td>'.$location -> BusinessAddress -> StreetLines. '</td>';
            echo '<td>'.$location -> BusinessAddress -> PostalCode. '</td>';
            echo '</tr>';
        }
        else
        {
            echo $location . Newline;
        }
    }
    echo '</table>';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:15:50.397

好的，据我所知，该`$response`对象有两个成员：`$response->HighestSeverity`，它是一个字符串，以及`$response->DropoffLocations`，它是一个数组。`$response->DropoffLocations`只是一个数组，表面*上*没有什么花哨的。您可以使用方括号（例如等）引用其条目`$response->DropoffLocations[0]`，或者像他们所做的那样，使用`foreach`.

除了它是对象的成员这一事实之外，关于数组的唯一“面向对象”是它的条目是对象，而不是简单的值。

结果，您将索引放在错误的位置（并且`DropoffLocations`完全丢失）。而不是，例如，这个：

```
$response -> BusinessAddress -> StreetLines[0] = $location_0; 
```

您应该为`$response->DropoffLocations`自己建立索引，然后从每个条目中提取成员变量，如下所示：

```
$response -> DropoffLocations[0] -> BusinessAddress -> StreetLines = $location_0; 
```

不过，请注意@PeterGluck 的评论。您不太可能将该值*设置*为任何值。

# php - 如何在 symfony2 表单选择元素中更改选项名称

> ID：11960779
> 
> 赞同：2
> 
> 时间：2012-08-14T21:10:27.537
> 
> 标签：php, forms, symfony

我运行此代码来获取我的选择控件，它工作正常。

```
 $builder
        ->add('access', 'entity', array(
            'label' => 'Behörigheter',
            'multiple' => true,   // Multiple selection allowed
            'expanded' => true,   // Render as checkboxes
            'property' => 'name',
            'class'    => 'BizTV\ContainerManagementBundle\Entity\Container',
            'query_builder' => function(\Doctrine\ORM\EntityRepository $er) use ($company) {
                $qb = $er->createQueryBuilder('a');
                $qb->innerJoin('a.containerType', 'ct');
                $qb->where('a.containerType IN (:containers)', 'a.company = :company');
                $qb->setParameters( array('containers' => array(1,2,3,4), 'company' => $company) );
                $qb->orderBy('ct.id', 'ASC');

                return $qb;
            }
        )); 
```

现在我希望能够为复选框自定义标签，前几天我了解到，通过将属性更改为 select_label 并在实体中定义该函数，您可以完成此操作，但是使用此查询它不起作用。

这是因为我要加入吗？有没有办法实现它？

这是不起作用的代码

```
 $builder
        ->add('access', 'entity', array(
            'label' => 'Behörigheter',
            'multiple' => true,   // Multiple selection allowed
            'expanded' => true,   // Render as checkboxes
            'property' => 'select_label',
            'class'    => 'BizTV\ContainerManagementBundle\Entity\Container',
            'query_builder' => function(\Doctrine\ORM\EntityRepository $er) use ($company) {
                $qb = $er->createQueryBuilder('a');
                $qb->innerJoin('a.containerType', 'ct');
                $qb->where('a.containerType IN (:containers)', 'a.company = :company');
                $qb->setParameters( array('containers' => array(1,2,3,4), 'company' => $company) );
                $qb->orderBy('ct.id', 'ASC');

                return $qb;
            }
        )); 
```

在我拥有的实体中：

```
public function getSelectLabel()
{
    return $this->name . ' (' . $this->parent->getName() . ')';
} 
```

它适用于另一种具有 SELECT（单选）控件的表单，但不适用于这个......

我得到的错误是

致命错误：在第 190 行的 /var/www/biztv_symfony/src/BizTV/ContainerManagementBundle/Entity/Container.php 中的非对象上调用成员函数 getName()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:19:12.463

哦，对不起，我有一些对象没有定义 $this->parent，我重写了我的 name 函数，如下所示，它工作正常。

```
public function getSelectLabel()
{
    if (isset($this->parent)) {
        return $this->name . ' (' . $this->parent->getName() . ')';
    }
    else {
        return $this->name;
    }
} 
```

谢谢大家！

# java - Java：Method.invoke (this, args) NullPointerException

> ID：11960780
> 
> 赞同：0
> 
> 时间：2012-08-14T21:10:32.560
> 
> 标签：java, nullpointerexception

我发布了[这个](https://stackoverflow.com/questions/11958036/java-read-from-config-file-efficiently-perform-tests-based-on-values)问题，基本上相当于尝试将字符串映射到 Java 中的函数。我试图通过创建`HashMap <String, Method>`一个`NullPointerException`. 我在 my 中声明方法`HashMap`如下：`mypackage.MyClass.class.getMethod ("methodName", args)`，其中是与 的参数对应`args`的对象数组。我已经为此工作了几个小时，我开始感到非常沮丧。如果有人有任何建议，我将不胜感激！`Class``methodName`

```
HashMap <String, Method> myMethods = new HashMap <String, Method> (); 
Class [] args = {param1.class, param2.class, param3.class}; 
myMethods.put ("aKey", mypackage.MyClass.class.getMethod ("aMethod", args)); 
Method thisTest = myTests.get (thisKey);
Object [] args1 = {param1, param2, param3};
String thisResult = (String) thisTest.invoke (this, args1); // NPE occurs in this line

Aug 14, 2012 10:37:36 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
        at mypackage.MyClass.myMethod (MyClass.java:61)
        at org.apache.jsp.myMethod_jsp._jspService(getZabbix_jsp.java:70)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:40:38.117

在处理反射时，您需要非常**小心。**

`Class`参数必须与您正在搜索的声明完全匹配`method`。

例如，如果您有一个`method`采用`interface`of 的a 并且您在您的 中`MyAwesomeInterface`实现它，则在查找该方法时不能使用引用 of 。`interface``MyAwesomeImplementation``class``MyAwesomeImplementation`

例如

```
getClass().getMethod("doAwesomeness", new Class[] {MyAwesomeImplementation.class}); 
```

不会工作。这个需要`MyAwesomeInterface.class`

我把这个小例子放在一起，效果很好

```
public String methodToBeInvoked(String value, int iValue) {

    return "You said " + value + " with " + iValue;

}

public MethodInvocation() {

    Map<String, Method> myMethods = new HashMap<String, Method>(25);
    try {

        Method method = getClass().getMethod("methodToBeInvoked", new Class[]{String.class, int.class});

        myMethods.put("invoke", method);

        System.out.println(myMethods.get("invoke").invoke(this, "Hello", 100));

    } catch (Exception exp) {

        exp.printStackTrace();

    }
} 
```

我怀疑`class`您用于查找方法的参数与方法声明不匹配。

确保当您查找它以及尝试将其从地图中拉出时不是，这将有助于缩小问题`method`范围`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:41:15.130

虽然没有显示 Map 的总体`myTests`，但它显然不包含`thisTest`导致 NPE 的测试方法。

这里要做的第一件事是检查这个 Map 的内容，以确保它包含请求的密钥。

此外，在您尝试调用该方法以防止它爆炸之前，值得拥有一个[保护子句。](http://blog.mafr.de/2009/06/12/a-case-for-guard-clauses/)`thisTest`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:42:56.900

此行只能在 thisResult 为 null 的情况下产生 NPE，这反过来意味着 thisKey 未在 myTests 中初始化。使用“aKey”而不是 thisKey，它应该可以工作。

# asp.net - http 客户端 - 异常行为

> ID：11960784
> 
> 赞同：0
> 
> 时间：2012-08-14T21:10:40.280
> 
> 标签：asp.net, httpclient, asp.net-web-api

我有以下代码，有时我发布的处理程序会在我得到响应之前超时（我不想扩展默认超时值）。当发生这种情况时，如果有一个 InnerExceptions，则会抛出 AggregateException：

[0] {“任务被取消。”} System.Exception {System.Threading.Tasks.TaskCanceledException}

```
 var _httpClient = new HttpClient();
    var _content = new StringContent("thecontent");
    var responseMessagePost = _httpClient2.PostAsync("http://localhost:50643/handler1.ashx", _content).Result; 
```

这是正确的行为吗？

我期望变量 responseMessagePost 具有 RequestTimeout = 408 的状态代码。例如，当我执行以下操作时，不会引发异常并且我得到 NotFound = 404 的状态代码。为什么行为不同？

```
var httpClient = new HttpClient();
var _content = new StringContent("thecontent");
var _responseMessagePost = httpClient.PostAsync("http://localhost:50643/handlerdoesnotexist.ashx", _content).Result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:05:40.180

您得到的超时异常是由于 HTTP 客户端放弃等待服务器产生响应。当服务器放弃等待客户端完成其请求时，408 是来自服务器的响应。

据我所知，您要查找的内容没有状态代码。如果服务器能够返回状态码，那么客户端就不需要超时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:00:11.543

我遇到了同样的错误并将其追踪到我的 HttpClient 超时。默认超时为 100 秒。我在 HttpClient 的创建中添加了以下内容。

 `````
HttpClient httpClient = new HttpClient();
httpClient.Timeout = TimeSpan.FromMinutes(10); 
`````

# python - 带有 pythons libghmm 库的 ImportError

> ID：11960786
> 
> 赞同：0
> 
> 时间：2012-08-14T21:10:49.320
> 
> 标签：python, linux, import, importerror, hidden-markov-models

我已按照[安装](http://ghmm.org/)说明安装 GHMM 库。但是，我仍然收到以下错误：

```
Python 2.6.6 (Apr 11 2011, 15:50:32) 
[GCC 4.4.4 20100726 (Red Hat 4.4.4-13)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import ghmm
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ghmm.py", line 112, in <module>
    import ghmmwrapper
  File "ghmmwrapper.py", line 25, in <module>
    _ghmmwrapper = swig_import_helper()
  File "ghmmwrapper.py", line 17, in swig_import_helper
    import _ghmmwrapper
ImportError: libghmm.so.1: cannot open shared object file: No such file or directory 
```

我试图将我的`LD_PRELOAD_PATH`变量更改`/usr/local/lib`为无济于事。

此外，当我尝试定位 libghmm 时，我得到以下信息，因此这些库肯定存在：

```
% locate libghmm
/usr/local/lib/libghmm.a
/usr/local/lib/libghmm.la
/usr/local/lib/libghmm.so
/usr/local/lib/libghmm.so.1
/usr/local/lib/libghmm.so.1.0.0 
```

有任何想法吗？

# asp.net - 如何使用 ASP.NET Repeater 去除尾随逗号？

> ID：11960791
> 
> 赞同：6
> 
> 时间：2012-08-14T21:10:57.423
> 
> 标签：asp.net

使用 VS 2010 C# ASP.NET 和 SQL Server 2008 R2

我正在使用中继器从 SQL 服务器检索数据。

我想用逗号分隔值。

我的代码是：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="ConnectionString">
    <ItemTemplate>
        <%# Eval("DataValue").ToString() %>, 
    </ItemTemplate>
</asp:Repeater> 
```

我得到：

```
1, 2, 3, 
```

虽然我不想要尾随逗号并得到：

```
1, 2, 3 
```

摆脱尾随逗号的最佳做法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T21:13:47.473

您可以尝试使用分隔符：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="ConnectionString">
    <ItemTemplate><%# Eval("DataValue").ToString() %></ItemTemplate>
    <SeparatorTemplate>, </SeparatorTemplate>
</asp:Repeater> 
```

您可能需要注意间距以使其正常工作。

# c# - 从 Hashtable 中获取随机 keyValue

> ID：11960800
> 
> 赞同：4
> 
> 时间：2012-08-14T21:12:01.043
> 
> 标签：c#, performance

我有一个我不知道的 Hashtable 的内容是什么。

现在我想从中获得一个 Key 和 value；

我使用 hashtable 是因为它的速度，因为 hashtable 的内容超过 4,500,000 KeyValuePair 所以我不能使用 GetEnumerator 它降低程序速度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:28:03.277

你使用一个`List<TKey>`：

```
Dictionary<string, string> dict = ... your hashtable which could be huge

List<string> keys = new List<string>(dict.Keys);
int size = dict.Count;
Random rand = new Random();
string randomKey = keys[rand.Next(size)]; 
```

我们只是创建一个`List<TKey>`其元素指向内存中与哈希表的键相同的位置，然后我们从该列表中选择一个随机元素。

如果你想从哈希表中获取一个随机元素值，这应该很简单，给定一个随机键。

```
string randomeElement = dict[randomKey]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T07:28:32.940

> 我不能使用 GetEnumerator 降低程序速度”

那是个问题。您已经接受了一个遍历所有条目的答案，并且还将键复制到一个新列表中，因此尚不清楚您是否已经放弃了该要求*。*

一种在内存和速度上肯定会更有效的方法是迭代整个字典，但在任何时候保留一个随机元素，并优化我们可以廉价获得计数的集合。这是一个扩展方法，它将对.NET中的*任何通用序列执行此操作：*

```
public static T RandomElement<T>(this IEnumerable<T> source,
                                 Random rng)
{
    // Optimize for the "known count" case.
    ICollection<T> collection = source as ICollection<T>;
    if (collection != null)
    {
        // ElementAt will optimize further for the IList<T> case
        return source.ElementAt(rng.Next(collection.Count));
    }

    T current = default(T);
    int count = 0;
    foreach (T element in source)
    {
        count++;
        if (rng.Next(count) == 0)
        {
            current = element;
        }            
    }
    if (count == 0)
    {
        throw new InvalidOperationException("Sequence was empty");
    }
    return current;
} 
```

因此，对于`Dictionary<TKey, TValue>`您最终会以`KeyValuePair<TKey, TValue>`这种方式结束-或者您可以`Keys`先进行投影：

```
var key = dictionary.Keys.RandomElement(rng); 
```

（有关这方面的问题，请参阅我的[文章`Random`](http://csharpindepth.com/Articles/Chapter12/Random.aspx)。）

*如果您想要一个真正的伪随机密钥，而不仅仅是一个任意*密钥（您可以通过获取序列中的第一个密钥来获得，那么我认为您不会比 O(n) 做得更好）另有说明）。

请注意，将键复制到列表中，如 Darin 的回答，当然可以更有效地获取*多个*随机元素。这一切都取决于您的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:50:31.250

随机密钥必须有多随机？

哈希表没有定义存储它们的项目的顺序，所以你可以抓住第一个项目。它不是*真正*随机的，但也不是插入顺序或排序顺序。这会足够随机吗？

```
Dictionary<string, string> dict = GetYourHugeHashTable();

KeyValuePair<string, string> randomItem = dict.First();
DoAComputation(randomItem.Key, randomItem.Value);
dict.Remove(randomItem.Key); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T00:12:01.623

使用 Linq，您可以：

```
Dictionary<string, string> dicto = new Dictionary<string, string>();

Random rand = new Random();

int size = dicto.Count;

int randNum = rand.Next(0, size);

KeyValuePair<string, string> randomPair = dicto.ElementAt( randNum );

string randomVal = randomPair.Value; 
```

例如，

```
string tmp = dicto.ElementAt( 30 ).Value; 
```

将 Dicto 中第三十项的值复制到字符串 tmp。

在内部，我认为它一次遍历一个密钥对，直到它到达第三十个，而不是全部复制它们，因此您不需要将所有元素加载到内存中。

我不确定你不知道内容是什么意思。

你不知道dicto的KeyValuePair中的类型吗？或者只是不知道dicto中的值是什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T13:20:48.300

Hashtable.Keys 会给你一个指向内部键列表的指针。那是快速的。从 Hashtable 中删除一个项目也是一个 O(1) 操作，因此即使有大量项目，这也会很快。

你可以做一个这样的循环（我认为没有理由在你的问题中使用随机）；

```
var k = Hashtable.Keys(); // Will reflect actual contents, even if changes occur

while (k.Count > 0 )
{
 var i = Keys.First();
 {
       Process(i);
       Hashtable.Remove(i)  
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T01:06:34.737

好吧，如果您知道您将针对哪个版本的 .NET BCL（即，如果它已修复），您总是可以深入了解它的内部结构，`Dictionary<TKey, TValue>`以找出它如何私下存储其密钥并使用它来随机抽取一个。

例如，使用我目前在工作笔记本电脑上安装的 Mono 版本，我看到该`Dictionary<TKey, TValue>`类型有一个名为的私有字段`keySlots`（我假设如果您使用的是 Windows，这对您来说会有所不同）。使用这些知识，您可以实现如下所示的函数：

```
static readonly Dictionary<Type, FieldInfo> KeySlotsFields = new Dictionary<Type, FieldInfo>();

public static KeyValuePair<TKey, TValue> GetRandomKeyValuePair<TKey, TValue>(this Random random, Dictionary<TKey, TValue> dictionary, Random random = null)
{
    // Here's where you'd get the FieldInfo that you've identified
    // for your target version of the BCL.
    FieldInfo keySlotsField = GetKeySlotsField<TKey, TValue>();

    var keySlots = (TKey[])keySlotsField.GetValue(dictionary);

    var key = (TKey)keySlots[random.Next(keySlots.Length)];

    // The keySlots field references an array with some empty slots,
    // so we need to loop until we come across an existing key.
    while (key == null)
    {
        key = (TKey)keySlots[random.Next(keySlots.Length)];
    }

    return new KeyValuePair<TKey, TValue>(key, dictionary[key]);
}

// This happens to work for me on Mono; you'd almost certainly need to
// rewrite it for different platforms.
public FieldInfo GetKeySlotsField<TKey, TValue>()
{
    Type keyType = typeof(TKey);

    FieldInfo keySlotsField;
    if (!KeySlotsFields.TryGetValue(keyType, out keySlotsField))
    {
        KeySlotsFields[keyType] = keySlotsField = typeof(Dictionary<TKey, TValue>).GetField("keySlots", BindingFlags.Instance | BindingFlags.NonPublic);
    }

    return keySlotsField;
} 
```

在您的情况下，这可能是一个合适的解决方案，或者它可能是一个可怕的想法。只有您有足够的上下文来进行该调用。

至于上面的示例方法：我个人喜欢将扩展方法添加到`Random`类中，以实现任何涉及随机性的功能。那只是我的选择；显然你可以走不同的路线。

# iphone - UIWebview 中的 Youtube 视频不起作用

> ID：11960804
> 
> 赞同：0
> 
> 时间：2012-08-14T21:12:07.123
> 
> 标签：iphone, objective-c, ios, uiwebview, youtube

使用此代码在 UIWebView 中播放 YouTube 视频

```
- (void)embedYouTube {

UIWebView *webView = [[[UIWebView alloc] initWithFrame:self.view.bounds] autorelease];
webView.autoresizesSubviews = YES;
webView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth); 
// iframe
videoHTML = [NSString stringWithFormat:@"\
             <html>\
             <head>\
             <style type=\"text/css\">\
             iframe {position:absolute; top:50%%; margin-top:-130px;}\
             body {background-color:#000; margin:0;}\
             </style>\
             </head>\
             <body>\
            <iframe width=\"560%%\" height=\"315px\" src=\"%@\"http://www.youtube.com/embed/j9CukQje2qw\" frameborder=\"0\" allowfullscreen></iframe>\
             </body>\
             </html>", videoURL];

             [videoView loadHTMLString:videoHTML baseURL:nil];

} 
```

当我单击此 LaunchVideo UIButton 时，它会在 iOS 设备上显示黑屏

```
-(void)LaunchVideo:(id)sender
{
self.videoURL = @"http://www.youtube.com/embed/j9CukQje2qw";

WebViewController *webViewController = [[[WebViewController alloc] initWithNibName:nil bundle:nil] autorelease];

webViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
webViewController.videoURL = self.videoURL;

[self presentModalViewController:webViewController animated:YES];

} 
```

如果有人能指出我在这段代码中遗漏了什么或做错了什么。为什么 youtube 视频没有显示。不使用界面生成器以编程方式进行。从网上得到这个项目代码。在 ios 设备上尝试了这个项目代码，它适用于该项目，但是当在我的项目中应用它的代码时，它就不起作用了。唯一的区别是他的 web 项目代码使用了界面生成器，而我正在以编程方式进行操作。我不明白。

请帮助此代码有什么问题。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T01:19:25.010

这是将 youtube 视频加载到您的应用程序中的另一种方法。首先，将 UIWebView 放入您的界面并将其调整为您希望视频显示的大小（将有一个按钮使其全屏显示），然后为其制作一个 IBOutlet，以便您可以更改其隐藏属性（到让它弹出并消失）这是一些代码。在代码中使用了一个名为 webviewshow 的方法，它调用了一个简单的方法，基本上只是说 webview.hidden = NO; webviewbutton.hidden = 否；然后还有一个按钮，当点击时，它也会弹出一个按钮，使 web 视图消失。这是将 youtube 视频加载到网络视图中的代码

```
// Create your query ...
    NSString* searchQuery = [NSString stringWithFormat:@"http://www.youtube.com/embed/j9CukQje2qw];

    // Be careful to always URL encode things like spaces and other symbols that aren't URL friendly
    searchQuery = [searchQuery stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];

    // Now create the URL string ...
    NSString* urlString = searchQuery;

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];

    [webView loadRequest:request]; currentTimer= [NSTimer      scheduledTimerWithTimeInterval:2 target:self selector:@selector(webviewshow) userInfo:nil repeats:NO];; 
```

它会等待 2 秒（大多数连接的通常等待时间），直到显示 Web 视图，因此页面已加载，用户无需观看加载。

然后当你想让视频消失时，像这样关闭网络视图

```
- (void) makewebviewGoAway {webview.hidden = YES; webviewbutton.hidden = YES;} 
```

希望这会有所帮助。如果您需要进一步的帮助或解释，请对此发表评论。

# haskell - 在 Haskell 中实现 Iota

> ID：11960809
> 
> 赞同：8
> 
> 时间：2012-08-14T21:12:37.483
> 
> 标签：haskell, scheme, implementation, iota

Iota 是一种非常小的“编程语言”，只使用一个组合器。我有兴趣了解它的工作原理，但是以我熟悉的语言查看实现会很有帮助。

我找到了一个用 Scheme 编写的 Iota 编程语言的实现。不过，我在将其翻译成 Haskell 时遇到了一些麻烦。这很简单，但我对 Haskell 和 Scheme 都比较陌生。

您将如何在 Haskell 中编写等效的 Iota 实现？

```
(let iota ()
  (if (eq? #\* (read-char)) ((iota)(iota))
      (lambda (c) ((c (lambda (x) (lambda (y) (lambda (z) ((x z)(y z))))))
           (lambda (x) (lambda (y) x)))))) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T23:16:07.270

我一直在自学这些东西，所以我当然希望我能做对……

正如 nm 所提到的，Haskell 的类型对于这个问题非常重要。类型系统限制了可以形成的表达式，特别是 lambda 演算的最基本类型系统禁止自我应用，这最终为您提供了一种非图灵完备的语言。图灵完备性被添加到基本类型系统*之上*，作为语言的额外功能（`fix :: (a -> a) -> a`运算符或递归类型）。

这并不意味着你不能在 Haskell 中实现它，而是这样的实现不会只有一个操作符。

**方法#1：**从这里实现[第二个示例单点组合逻辑基础](http://en.wikipedia.org/wiki/Combinatory_logic#One-point_basis)，并添加一个`fix`函数：

```
iota' :: ((t1 -> t2 -> t1)
          -> ((t5 -> t4 -> t3) -> (t5 -> t4) -> t5 -> t3)
          -> (t6 -> t7 -> t6)
          -> t)
         -> t
iota' x = x k s k 
    where k x y = x
          s x y z = x z (y z)

fix :: (a -> a) -> a
fix f = let result = f result in result 
```

现在您可以用`iota'`和编写任何程序`fix`。解释这是如何工作的有点复杂。（**编辑：**请注意，这`iota'`与`λx.x S K`原始问题中的不同；它`λx.x K S K`也是图灵完备的。在这种情况下，`iota'`程序将与`iota`程序不同。我已经尝试过`iota = λx.x S K`Haskell 中的定义；它类型检查，但是当您尝试`k = iota (iota (iota iota))`并`s = iota (iota (iota (iota iota)))`遇到类型错误时。）

**方法#2：**可以使用这种递归类型将无类型的 lambda 演算表示法嵌入到 Haskell 中：

```
newtype D = In { out :: D -> D } 
```

`D`基本上是一种类型，其元素是从`D`到的函数`D`。我们必须`In :: (D -> D) -> D`将一个`D -> D`函数转换为一个普通的`D`，并`out :: D -> (D -> D)`做相反的事情。因此，如果我们有`x :: D`，我们可以通过 do 自行应用它`out x x :: D`。

给它，现在我们可以写：

```
iota :: D
iota = In $ \x -> out (out x s) k
    where k = In $ \x -> In $ \y -> x
          s = In $ \x -> In $ \y -> In $ \z -> out (out x z) (out y z) 
```

`In`这需要来自and的一些“噪音” `out`；Haskell 仍然禁止您将 a`D`应用于 a `D`，但我们可以使用`In`and`out`来解决这个问题。你实际上不能对 type 的值做任何有用的事情`D`，但你可以围绕相同的模式设计一个有用的类型。

* * *

**编辑：** iota 基本上是`λx.x S K`, where`K = λx.λy.x`和`S = λx.λy.λz.x z (y z)`. 即，iota 采用两个参数的函数并将其应用于 S 和 K；因此，通过传递一个返回其第一个参数的函数，你得到 S，并通过传递一个返回其第二个参数的函数，你得到 K。所以如果你可以用 iota 编写“返回第一个参数”和“返回第二个参数”，你可以用iota写S和K。但是[S 和 K 足以获得图灵完备性](http://en.wikipedia.org/wiki/Combinatory_logic#Completeness_of_the_S-K_basis)，因此您也可以在讨价还价中获得图灵完备性。事实证明，您可以使用 iota 编写必要的选择器函数，因此 iota 足以实现图灵完备。

因此，这将理解 iota 的问题简化为理解 SK 演算。

# c# - 如果值是某物，则更新 c# 字典对象中的值

> ID：11960811
> 
> 赞同：1
> 
> 时间：2012-08-14T21:12:46.300
> 
> 标签：c#, asp.net

如果值是什么，我正在尝试更新 c# 字典对象中的值。

```
Dictionary<string, int> Section = new Dictionary<string, int>()
{
            {"a", 1},
            {"b", 0},
            {"c", 2},
            {"d", 0},
            {"e", 0},
            {"f", 0},
}; 
```

1.  我想遍历 Section 对象，如果 value= 2 我想将其设置为 1
2.  我想将值 = 1 从第 4 个元素设置到结束。（即，从“d”到“f”）

谢谢，

普拉文

我试过了，

```
foreach(var item in Section)
{
   if(item.value == 2)
   {
     item.value == 1;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:15:29.367

> *   我想遍历 Section 对象，如果 value= 2 我想将其设置为 1

您可以查看 Dictionary 项目，并根据需要更改值。

这可能是这样的：

```
var itemsToEdit = Section.Where(kvp => kvp.Value == 2).Select(kvp => kvp.Key).ToList();
foreach(var item in itemsToEdit)
     Section[item] = 1; 
```

> *   我想将值 = 1 从第 4 个元素设置到结束。（即，从“d”到“f”）

意识到，一旦将值放入字典中，它们就会失去所有排序。字典本质上是一个无序的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:30:33.533

您不能修改`foreach`.

但是，您可以遍历派生集合！注意`ToList()`创建一个单独的集合（`Where()`只是包装原始集合）：

```
foreach (var item in Section.Where(kvp => kvp.Value == 2).ToList())
{
    Section[item.Key] = 1;
} 
```

其次，我们首先对列表进行排序，然后跳过前三个元素以获取第四个元素：

```
foreach (var item in Section.OrderBy(kvp => kvp.Key).Skip(3).ToList())
{
    Section[item.Key] = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:26:08.320

第一个：

```
foreach (var key in Section.Where(item => item.Value == 2).Select(item => item.Key).ToList())
{
    Section[key] = 1;
} 
```

第二：

```
foreach (var key in Section.Keys.Where(k=>String.Compare(k, "d", StringComparison.Ordinal)>=0).ToList())
{
    Section[key] = 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:32:28.167

```
int index = 0;
foreach (int value in Section.Values) {

  if ((index > 3) || (value == 2)) { 
    Section[index] = 1; 
  }

  index++;
} 
```

或者

```
for (int i = 0; i < Section.Count; i++) {
  if ((i > 3) || (Section[i] == 2)) {
    Section[i] = 1;
  }
} 
```

# cakephp - CakePHP：$this->set(...) 在视图中是空的？

> ID：11960812
> 
> 赞同：0
> 
> 时间：2012-08-14T21:12:51.680
> 
> 标签：cakephp

我似乎无法弄清楚如何使用路由参数和设置功能。这是我所做的：

配置/routes.php：

```
Router::connect('/professions/:linkname', array('controller' => 'professions', 'action' => 'display')); 
```

控制器/专业控制器.php：

```
public function display($linkname = null) {
    $this->set('test', $linkname);
    //$this->set('profession', $this->findByLinkname($linkname));
} 
```

查看/专业/display.ctp：

```
<?php echo $test; ?> 
```

当我打开 /professions/test 时，页面是空的。为什么？（如您所见， $test 只是一个测试。我注释掉了我真正打算做的事情。但这也不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:27:08.647

好的，RFTM...在官方书籍中找到它。必须像这样指定传递参数：

```
Router::connect('/professions/:linkname', array('controller' => 'professions', 'action' => 'display'), array('pass' => array('linkname')); 
```

现在它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:37:37.470

它详细解释了如何执行您在 CakePHP Book 中提出的要求：

[http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action](http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action)

或者，根据 Eike 的回答（但以不那么粗鲁的方式），试试这个：

```
Router::connect(
    '/professions/:linkname',
    array(
        'controller' => 'professions',
        'action' => 'display'
    ),
    array(
        'pass' => array(
            'linkname'
        )
    )
); 
```

显然，如果这更容易或者更符合您的喜好，您可以将所有这些放在一条线上。

# iphone - 如何调用“关闭飞行模式”通知

> ID：11960813
> 
> 赞同：13
> 
> 时间：2012-08-14T21:12:52.760
> 
> 标签：iphone, objective-c, ios, cocoa-touch

在许多应用程序中，例如邮件应用程序，如果设备处于飞行模式，则会弹出一条通知，显示“关闭飞行模式或使用 Wi-Fi 访问数据”。

我认为如果我的应用程序尝试访问互联网，它会自动调用，但事实并非如此。有没有特殊的方法可以做到这一点，或者如果没有，我如何检查设备是否处于飞行模式并提供指向设置的链接以禁用它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-21T09:01:23.453

如果您将`UIRequiresPersistentWifi`密钥添加到您的`Info.plist`并将其设置为`YES`，那么如果您处于飞行模式，您将在启动时获得标准的“关闭飞行模式...”弹出窗口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-10T08:39:36.010

我在我的应用程序中测试。我发现它变了。"UIRequiresPersistentWifi" => "应用程序使用 Wi-Fi"。我希望它会帮助某人。

[![xCode 目标属性](../Images/59344c09c36bc4be48a992224a21f331.png)](https://i.stack.imgur.com/PWr2s.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T22:50:29.887

您可以在应用启动时使用苹果的可达性框架来检查网络连接。看一下这个

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

我有一个用于reachbiltiy API 的包装类，以使其更易于使用。（ASIHTTPRequest 也有一个）。

[https://github.com/daltoniam/GPHTTPRequest](https://github.com/daltoniam/GPHTTPRequest)

请参阅 GPReachable 类以检查连接性。至于对话框提示，不确定是否有办法推送到设置应用程序。任何问题让我知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-10T23:00:45.110

如果您想要标准的*关闭飞行模式或使用 Wi-Fi 访问数据 [设置 | 行]*

1.  `info.plist`通过单击`+`顶部的标志在您的中添加新属性。
2.  新属性被调用`UIRequiresPersistentWiFi`（这类似于上面的帖子，但需要准确，否则它不会注册）
3.  将类型从 更改`String`为`Boolean`
4.  将值从 更改`NO`为`YES`
5.  清理并重建您的应用程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T21:44:41.853

看看[这个](http://blogs.oreilly.com/iphone/2009/01/bring-airplane-mode-control-ba.html)。显然，`Airport control was moved by Apple into a separate framework`

似乎没有标准的方法来通知用户重新打开飞行模式。正如你所提到的，这显然不是很优雅，所以我认为苹果删除了这个功能。

# java - “kill -QUIT process_id”如何工作？

> ID：11960818
> 
> 赞同：8
> 
> 时间：2012-08-14T21:13:10.607
> 
> 标签：java, multithreading

我只是好奇。kill 的手册页说 QUIT，也就是信号 #3，是一个“核心”信号。对于 Java 进程，它似乎所做的只是转储线程信息。那么，QUIT 是用词不当吗？仅仅是JVM实现了一个转储线程的singal 3处理程序吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T21:33:23.273

QUIT*可以说*是 Java 的误称。但是根据这个论点，如果允许应用程序更改信号处理程序的默认行为，则*任何信号名称都可能是用词不当。*

实际上，UNIX 信号名称和它们实际所做的对应关系一直有点模糊和脆弱。然而，30 多年来，开发人员一直在处理这个“问题”，而这并不是一个真正的问题。

是的，Java 线程堆栈转储行为是由 JVM 实现的。默认的 UNIX / LINUX 行为是创建进程的内存转储，除非这被其他因素禁止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T21:17:36.183

是的，JVM 捕获#3 信号来转储线程。默认情况下，对于普通的 unix 进程，它会转储内核（即获取进程的内存快照并将其写入文件）并退出。

对于 Java，这不是很有帮助，因此它会改为执行线程转储。

# data-structures - 带 FIFO 检索的集合

> ID：11960825
> 
> 赞同：0
> 
> 时间：2012-08-14T21:13:28.420
> 
> 标签：data-structures, collections, linked-list

GRE CS：哪种数据结构最适合实现具有以下三个特征的值集合？

*   从集合中检索和删除项目`FIFO`
*   集合中的项目数量没有先验限制。
*   相对于内存地址所需的存储空间而言，项目的大小很大。

这是一道选择题，答案如下：

*   (A) 带头尾指针的单链表
*   (B) 双向链表，只有一个头指针
*   (C) 阵列
*   (D) 二叉树
*   (E) 哈希表

我认为（C）、（D）和（E）是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:46:42.090

`A`似乎是正确的答案。因为项目是在 FIFO 中删除的，所以您只需要对集合中的第一个和最后一个元素进行操作。A、C 和 E 都允许在恒定时间内这样做。

项目数量没有限制。这意味着 C 和 E 不再像 A 一样好，因为您最终将需要重新调整数组或哈希表的大小，因为它变大或分配的内容远远超过您开始时的需要。使用链接列表，您可以随时轻松添加。

物品的尺寸很大。这只是进一步表明 A 是正确的，因为在存储结构中添加链接地址并不重要。

# latex - 在 Stata 和 estout 中停止乳胶数学字符的转义

> ID：11960831
> 
> 赞同：2
> 
> 时间：2012-08-14T21:13:50.683
> 
> 标签：latex, stata

如果变量标签具有这样的字符，Stata 中的[estout命令将始终转义下划线。](http://repec.org/bocode/e/estout/index.html)例如，在一个简单的回归之后运行它，然后

```
qui sum res, d
estadd scalar test = r(mean) 
```

并输出到 tex 文件：

```
esttab using "filename.tex", stats(r2 test, labels("\$R^2\$"  "\$T_i\$")) se r2  
star(* 0.10 ** 0.05  *** 0.01) label   replace   fragment nomtitles  
coeflabels(_cons "$\alpha\$") nonumbers  tex 
```

`$T\_i$`将在`filename.tex`输出中创建一个字符串。尝试使用标签`\$\beta`=char(95)'{HML}\$` 会导致相同的行为。显然，'outreg2' 命令足够聪明，如果它看到它处于数学模式，它不会转义这个字符，但 estout 没有继承这种行为。有没有一种聪明的方法来阻止下划线的逃逸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T04:20:59.760

要使用下划线等乳胶字符，只需在[esttab](http://repec.org/bocode/e/estout/hlp_estout.html#substitute)末尾添加“替换”选项即可。对于下划线，您的标签看起来像

```
label var "\$\beta_i\$" 
```

所以添加

```
...substitute(\_ _) 
```

到“estadd”命令。

# java-me - 如何更改诺基亚全触摸 lwuit 表单标题颜色

> ID：11960836
> 
> 赞同：4
> 
> 时间：2012-08-14T21:14:08.803
> 
> 标签：java-me, lwuit, nokia, nokia-s40

我想更改基于诺基亚 lwuit 的全触摸表单的标题颜色，我尝试了 setTitleComponent 方法，但它不起作用。另请检查以下链接 [http://projects.developer.nokia.com/LWUIT_for_Series_40/wiki/UsingSeries40FullTouchFeatures](http://projects.developer.nokia.com/LWUIT_for_Series_40/wiki/UsingSeries40FullTouchFeatures) 其中提到我们无法设置标题样式，但这意味着我们也无法更改 bgcolor 或将自定义图像放入标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:25:46.413

请注意，在将 LWUIT 用于 40 系列端口时，运行 LWUIT 应用程序的默认方式是在 40 系列全触控设备中使用正常大小的画布。因此，40 系列镀铬显示在画布顶部。并且没有办法自定义它（除了标题文本）。

如果您想为标题提供品牌元素，选项有： 1\. 在 Series 40 标题栏下方创建一个附加标签 2\. 全屏运行应用程序。我们计划为此创建一个高级 API，但目前已经可以使用以下技巧：((GameCanvas) (javax.microedition.lcdui.Display.getDisplay(this)).getCurrent()).setFullScreenMode(true ); 在后一种选择中，您当然会失去 Series 40 全触控布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:17:39.343

使用 lwuit 源，如果需要，您可以更改方法的可见性，这是​​我过去使用渐变颜色的示例

```
 form.getTitleComponent().getStyle().setBackgroundType(Style.BACKGROUND_GRADIENT_LINEAR_VERTICAL);
        form.getTitleComponent().getStyle().setBackgroundGradientEndColor(Color.GRADIENT_END);
        form.getTitleComponent().getStyle().setBackgroundGradientStartColor(Color.GRADIENT_START);
        form.getTitleComponent().getStyle().setFgColor(Color.WHITE);
        form.getTitleComponent().getStyle().setPadding(10,10,0,0);
        form.getTitleComponent().getStyle().setFont(font); 
```

这`Color`是我用于颜色代码的自定义类，你可以使用你的。

# asp.net - NumericUpDown 扩展器不会保持锚定

> ID：11960837
> 
> 赞同：0
> 
> 时间：2012-08-14T21:14:09.007
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个像这样的 ajax NumericUpDown 扩展器：

```
<div style="float: left;">
     <asp:TextBox ID="txtFixedCost" runat="server" CssClass="app_textbox" Width="100px"
          Height="15px" Text="40" MaxLength="2" />
     <asp:NumericUpDownExtender ID="NumericUpDownExtender1" runat="server" TargetControlID="txtFixedCost"
          Maximum="100" Minimum="0" Width="50" />
</div> 
```

问题是文本框/扩展器控件在滚动时不会保持锚定在页面上。它们随着滚动而移动。我怎样才能让这些控件保持不变？非常感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:55:49.280

使用`position:fixed`外部 div 的样式

# ios - 在 UITableView 中为 UIImageView 调用手势识别器

> ID：11960839
> 
> 赞同：0
> 
> 时间：2012-08-14T21:14:21.520
> 
> 标签：ios

我有一个带有自定义单元 TaskCell 的 UITableView。TaskCell 具有 checkboxImageView ，我希望当用户单击 checkboxImageView 时会触发一个方法。由于某种原因，它总是触发 didSelectTableView 委托方法。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"TaskCell";

    Task *task = [tasks objectAtIndex:[indexPath row]];

    TaskCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[TaskCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];        
    }

    [cell bindTo:task];

    return cell;
}

TaskCell.m: 

-(void) prepareGestureRecognizers 
{
    UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onSingleTap:)];
    singleTapGestureRecognizer.delegate = self; 
    singleTapGestureRecognizer.numberOfTapsRequired = 1; 

    self.checkboxImageView.userInteractionEnabled = YES;

    [self.checkboxImageView addGestureRecognizer:singleTapGestureRecognizer];
}

-(void) onSingleTap:(UITapGestureRecognizer *) sender 
{
    NSLog(@"single tap!");
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(void) bindTo:(Task *)task
{
    [self prepareGestureRecognizers];

    self.titleLabel.text = task.title;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:39:06.583

如果您在 中添加手势识别器，则以`TaskCell.m`下行

```
singleTapGestureRecognizer.delegate = self; 
```

将`delegate`识别器的设置为单元格，而不是您的控制器。您应该在控制器文件中添加识别器，以便`delegate`正确设置。

我不确定这是否可行，因为我自己没有尝试过，但是您可以尝试在情节提要中设置识别器并让它成为`@property`您的单元格。然后，您可以在控制器文件中将委托设置为您的控制器。

# c# - Monotouch 的 AForge.Net 过滤器替代品

> ID：11960841
> 
> 赞同：2
> 
> 时间：2012-08-14T21:14:25.360
> 
> 标签：c#, ios, mono, xamarin.ios

有什么选择吗？我无法让它为 Monotouch 工作。似乎 AForge*.dll 缺少一些功能。现在，我正在研究 OpenCV，但对于这样一个简单的问题来说它太复杂了。但仍然很有趣:)

好吧，没有问题`System.Drawing.Bitmap`，我已经从[github.com/mono/](http://github.com/mono/)构建了它并且它有效。但是存在与 AForge 框架相关的错误。当我尝试通过`Bitmap Apply (Bitmap image)`from应用过滤器时`AForge.Imaging.Filters.BaseFilter`，出现错误：

> 错误 CS0584：内部编译器错误：找不到方法：'AForge.Imaging.UnmanagedImage.CollectActivePixels'。(CS0584) (项目名称)

另外，当我尝试使用`AForge.Imaging.Filters.Sepia`or`Invert`时，编译器找不到它们：

> 错误 CS0584：内部编译器错误：无法导入类型`AForge.Imaging.Filters.Sepia' from` AForge.Imaging，版本=2.2.4.0，文化=中性，PublicKeyToken=ba8ddea9676ca48b' (CS0584) (projectName)

有趣的是`AForge.Imaging.Filters.Grayscale`发现。

以下是产生这些错误的代码：

这会产生“**无法导入类型**”错误：

```
partial void showFilters (MonoTouch.Foundation.NSObject sender)
    {
        UIActionSheet sheet = new UIActionSheet ("Filters");
        // @TODO: I'll hardcode filters for now, but in future it should be refactored out.
        sheet.AddButton ("Grayscale");
        sheet.AddButton ("Sepia");
        sheet.AddButton ("Invert");
        sheet.Clicked += 
            (sndr, e) => {
            var ev = (UIButtonEventArgs)e;
            switch (ev.ButtonIndex) {
            case 0:
                imageView.Image = ImageProcessor.process (imageView.Image, new Grayscale(0.2125, 0.7154, 0.0721));
                break;
            case 1:
                imageView.Image = ImageProcessor.process (imageView.Image, new Sepia());
                break;
            case 2:
                imageView.Image = ImageProcessor.process (imageView.Image, new Invert());
                break;
            }
            imageView.Image.SaveToPhotosAlbum((image, error) => {
                var o = image as UIImage;
                Console.WriteLine("error:" + error);
            });
        };
        sheet.ShowInView (this.View);
    } 
```

前 3 个函数产生“ **Method not found: 'AForge.Imaging.UnmanagedImage.CollectActivePixels'.** :

```
 #region methods
    static public Bitmap process (String fileName, IFilter filter)
    {
        if (File.Exists (fileName)) {
            Bitmap bitmap = Bitmap.FromFile (fileName);
            Bitmap image = (Bitmap) filter.Apply (bitmap);
            return image;
        } else {
            throw (new FileNotFoundException());
        }
    }

    static public Bitmap process (String fileName, FiltersSequence seq)
    {
        if (File.Exists (fileName)) {
            Bitmap image = Bitmap.FromFile (fileName);
            image = seq.Apply (image);
            return image;
        } else {
            throw (new FileNotFoundException());
        }
    }
    #region iOS
    static public UIImage process (UIImage capturedImage, IFilter filter)
    {
        Bitmap bitmap = getBitmapFromUIImage (capturedImage);
        Bitmap image = (Bitmap) filter.Apply (bitmap);
        UIImage result = getUIImageFromBitmap (image);
        return result;
    }

    static public Bitmap getBitmapFromUIImage (UIImage capturedImage)
    {
        NSData imageData = capturedImage.AsPNG();
        Byte[] byteArray = new Byte[imageData.Length];
        System.Runtime.InteropServices.Marshal.Copy (imageData.Bytes,
                                                     byteArray,
                                                     0,
                                                     Convert.ToInt32 (imageData.Length));
        MemoryStream stream = new MemoryStream (byteArray);
        Bitmap bitmap = new Bitmap (stream, false);
        return bitmap;
    }

    static public UIImage getUIImageFromBitmap (Bitmap bitmap)
    {
        Byte[] byteArray;
        MemoryStream stream = new MemoryStream();
        bitmap.Save(stream);
        stream.Close();
        byteArray = stream.ToArray();
        NSData imageData = NSData.FromArray(byteArray);
        return UIImage.LoadFromData(imageData);
    }
    #endregion iOS
    #endregion methods

} 
```

以及完整的错误列表：

```
Error CS0584: Internal compiler error: Could not import type `AForge.Imaging.Filters.Sepia' from `AForge.Imaging, Version=2.2.4.0, Culture=neutral, PublicKeyToken=ba8ddea9676ca48b' (CS0584) (tryingImageProcessing)
Error CS0584: Internal compiler error: Could not import type `AForge.Imaging.Filters.Invert' from `AForge.Imaging, Version=2.2.4.0, Culture=neutral, PublicKeyToken=ba8ddea9676ca48b' (CS0584) (tryingImageProcessing)
Error CS0584: Internal compiler error: Method not found: 'AForge.Imaging.UnmanagedImage.CollectActivePixels'. (CS0584) (tryingImageProcessing)
Error CS0266: Cannot implicitly convert type `object' to `System.Drawing.Bitmap'. An explicit conversion exists (are you missing a cast?) (CS0266) (tryingImageProcessing) 
```

我没有说最后一个错误，因为它很容易修复，但我不明白它为什么会出现。它哭泣着：

```
Bitmap image = ((BaseFilter) filter).Apply (bitmap); 
```

以及我使用的每一行`Apply`.

[这是项目本身（Monodevelop，压缩）。](http://dump.bitcheese.net/files/awitaje/ImageProcessing.zip/preview)

**答案：** [Monodevelop。未找到从程序集浏览器可见的方法。(CS0584)](https://stackoverflow.com/questions/11983272/monodevelop-method-that-visible-from-assembly-browser-not-found-cs0584)

# highcharts - 通过 JSON 将多个动态系列和轴添加到 Highcharts

> ID：11960843
> 
> 赞同：0
> 
> 时间：2012-08-14T21:14:50.117
> 
> 标签：highcharts, highstock

像许多 Highstock 用户一样，我们的数据是通过 Ajax 查询从数据库中检索出来的。系列数据集都是基于时间的，但有不同的用途和数据范围。

我可以在图表中添加多个系列没问题。效果很好。但是，如何*动态地*（强调动态地）将伴随轴添加到这些系列（轴标题和范围）？我已经搜索了文档和论坛，但无法确切了解如何将*新*轴与*新*系列相关联。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:14:35.093

The only way to do this (as far as I know) is to add multiple empty axes to your chart, and then set them programmatically. It's a hack - but it works:

[http://livecoding.io/3431916](http://livecoding.io/3431916)

# python - 用 py2exe 运行 CGI

> ID：11960846
> 
> 赞同：0
> 
> 时间：2012-08-14T21:15:09.153
> 
> 标签：python

这可能听起来很奇怪，但我似乎无法在任何地方找到示例.. 我正在尝试通过 CGI 在本地运行脚本，但我正在尝试通过 py2exe 将其作为 .exe 运行。

所以想法是您单击可执行文件并在本地启动 CGI 并运行脚本，而无需在机器上安装任何 python，您可以在浏览器中拉出本地网站，脚本正在生成网页。

所以我可以让所有这些东西在我安装了 python 的机器上工作，我创建了一个脚本，它导入我创建的用于启动 CGI 的 cgi 脚本并导入我想要显示的 python 脚本，我可以看到两者的编译版本它创建的 dist。但从这里我不知道去哪里，因为通常我只会通过本地主机 ping cgi-bin/script.py 文件夹，它会显示在我的浏览器中。

我的问题：CGI 和脚本可以在本地运行并显示为可执行文件，而机器上没有 python。并且创建了 bdist.win32 的额外构建文件是否需要以某种方式调用？

我假设在主程序中的某个地方我应该通过 html“显示”脚本，但不太确定在哪里执行此操作？我得到'cgi script is not a plain file ('//') 错误.. 不确定那个。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:34:52.563

我通过导入*webbrowser*然后打开本地 url 部分解决了这个问题

```
webbrowser.open_new('http://localhost:8086') #proper url here 
```

但正是 CGI 让我发疯。出于某种原因，当浏览到 python 脚本时，它不会执行 - 我只是得到代码，即使原始 python 脚本正确定义了 cgi_directories （它们确实与 python 脚本一起工作）。我希望这会有所帮助，至少。这是整个脚本：

```
#!/usr/bin/env python

import webbrowser
import BaseHTTPServer
import CGIHTTPServer

server = BaseHTTPServer.HTTPServer
handler = CGIHTTPServer.CGIHTTPRequestHandler
server_address = ("", 8008)
handler.cgi_directories = ["/cgi"]
httpd = server(server_address, handler)
webbrowser.open_new("http://localhost:8008/cgi/script.py");
httpd.serve_forever() 
```

# android - 每个导航项的自定义布局

> ID：11960850
> 
> 赞同：0
> 
> 时间：2012-08-14T21:15:25.377
> 
> 标签：android, navigation, android-actionbar, selected

嗨，我想让两个项目具有自定义布局，另一个保留初始布局。我的问题是有更好的方法，然后为每个项目使用片段。

我的代码看起来像这样

```
if(actionBar.getSelectedNavigationIndex() == 0){

            android.app.FragmentManager fragmentManager = getFragmentManager();
            FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
            TimePickerFragment timePickerFragment = new TimePickerFragment();
            fragmentTransaction.add(R.id.container, timePickerFragment);
            fragmentTransaction.commit();
        } else if(actionBar.getSelectedNavigationIndex() == 1)
            android.app.FragmentManager fragmentManager1 = getFragmentManager();
            FragmentTransaction fragmentTransaction1 = fragmentManager.beginTransaction();
            fragmentTransaction.add(R.id.container, initialFragment);
            fragmentTransaction.commit();
        } else if(actionBar.getSelectedNavigationIndex() == 2)
            android.app.FragmentManager fragmentManager2 = getFragmentManager();
            FragmentTransaction fragmentTransaction2 = fragmentManager.beginTransaction();
            fragmentTransaction.add(R.id.container, initialFragment);
            fragmentTransaction.commit();
        } else if(actionBar.getSelectedNavigationIndex() == 3)
            android.app.FragmentManager fragmentManager3 = getFragmentManager();
            FragmentTransaction fragmentTransaction3 = fragmentManager.beginTransaction();
            fragmentTransaction.add(R.id.container, initialFragment);
            fragmentTransaction.commit();
        }  else if(actionBar.getSelectedNavigationIndex() == 4)
            android.app.FragmentManager fragmentManager4 = getFragmentManager();
            FragmentTransaction fragmentTransaction4 = fragmentManager.beginTransaction();
            DatePickerFragment datePickerFragment = new DatePickerFragment();
            fragmentTransaction.add(R.id.container, datePickerFragmen);
            fragmentTransaction.commit();
        }  else if(actionBar.getSelectedNavigationIndex() == 5)
            android.app.FragmentManager fragmentManager5 = getFragmentManager();
            FragmentTransaction fragmentTransaction5 = fragmentManager.beginTransaction();
            fragmentTransaction.add(R.id.container, initialFragment);
            fragmentTransaction.commit();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:39:42.573

你没注意到你有6次重复码吗？

```
android.app.FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
TimePickerFragment timePickerFragment = new TimePickerFragment();
fragmentTransaction.add(R.id.container, /* Put here fragment variable generated by your defined conditions */);
fragmentTransaction.commit(); 
```

# ruby-on-rails - Heroku 应用程序错误 - 崩溃

> ID：11960852
> 
> 赞同：0
> 
> 时间：2012-08-14T21:15:27.887
> 
> 标签：ruby-on-rails, deployment, heroku

不知道为什么我的应用程序不断崩溃。谁能诊断我的问题？这是我的日志：

```
 2012-08-14T20:45:26+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-14T20:45:29+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 13851`
2012-08-14T20:45:34+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-14T20:45:34+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-08-14T20:45:35+00:00 app[web.1]: => Booting WEBrick
2012-08-14T20:45:35+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-14T20:45:35+00:00 app[web.1]: => Call with -d to detach
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:587:in `block in <class
:Engine>'
2012-08-14T20:45:35+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:13851
2012-08-14T20:45:35+00:00 app[web.1]: Exiting
2012-08-14T20:45:35+00:00 app[web.1]: /app/config/initializers/devise.rb:3:in `<top (required)>': uninitialized constant Devise (NameError)
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:587:in `each'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-14T20:45:35+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-14T20:45:35+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
2012-08-14T20:45:35+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-14T20:45:37+00:00 heroku[web.1]: Process exited with status 1
2012-08-14T20:45:37+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-14T20:46:33+00:00 heroku[router]: Error H10 (App crashed) -> GET sleepy-sands-3221.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-14T20:46:34+00:00 heroku[router]: Error H10 (App crashed) -> GET sleepy-sands-3221.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:24:09.993

阅读您的日志。它尝试加载设计的方式有问题。

处理这个问题的一个问题：

[为什么在运行 webrick 服务器时出现未初始化的常量设计名称错误？](https://stackoverflow.com/questions/6551946/why-do-i-get-uninitialized-constant-devise-name-error-when-running-webrick-serve)

# mahout - mahout0.7 是否仍然支持内存和 MR KMeans 集群？

> ID：11960855
> 
> 赞同：0
> 
> 时间：2012-08-14T21:15:45.207
> 
> 标签：mahout, k-means

mahout-0.7 是否仍支持内存中和 MR KMeans 集群？在其早期版本中，它具有用于内存集群的 KmeansClusterer 和用于 MapReduce 集群的 KmeansDriver。但是，KmeansClusterer 似乎已从 mahout0.7 中删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:16:59.180

是的，内存中的 KMeans 已从 Mahout 0.7 中删除。您可以在 Mahout in Action 的示例中看到有关如何使用 MR KMeans 的示例，这些示例[适用于 Mahout 0.7](https://github.com/tdunning/MiA/tree/mahout-0.7)。

# mysql - Perl DBI 选择使用 bind_columns 提供错误的值

> ID：11960858
> 
> 赞同：0
> 
> 时间：2012-08-14T21:15:49.903
> 
> 标签：mysql, perl, crypt

我有这个 Perl 代码：

```
my $cmd = "
  SELECT COUNT(id)
  FROM tblUsers
  WHERE UPPER(username) = UPPER(?) AND password = ?
";

db_connect();
my $sql = $dbh->prepare($cmd);

my $count = 2;

$sql->execute(
  $args{login_username},
  crypt($args{login_password}, $args{login_username})
) or die "SQL Error: ".$sql->errstr;

$sql->bind_columns(\$count);
$sql->fetch; 
```

它返回 0，但应该返回 1

如果我输出以下内容：

```
$msg = "wrong username/password: $count;$args{login_username};$args{login_password};" . crypt($args{login_password}, $args{login_username}); 
```

我得到：

```
wrong username/password: 0;skeniver;password;skh9dtk2bCasY 
```

这`crypt`部分正是我在数据库中所拥有的。在 MySQL 中运行相同的值返回计数 1。

我真的无法弄清楚这里出了什么问题。

有没有其他人看到我缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:33:01.840

假设您`select`返回一个非`0`值并假设列`password`中`tblUsers`有`skh9dtk2bCasY`for `username`= `skeniver`，请尝试

```
 $sql->execute($args{login_username}, crypt($args{login_password},$args{login_username}))
        or die "SQL Error: ".$sql->errstr;
 $count = $sql->fetchrow_array(); 
```

或者，如果查询有可能返回多行，那么 -

```
$sql->execute($args{login_username}, crypt($args{login_password},$args{login_username}))
        or die "SQL Error: ".$sql->errstr;
while (($count) = $sql->fetchrow_array()){                          
    print "Count is: $count\n"; 
} 
```

# android - android在textview中显示一个分数

> ID：11960859
> 
> 赞同：2
> 
> 时间：2012-08-14T21:15:54.390
> 
> 标签：android, textview

我似乎无法找到一种在文本视图中轻松显示分数的方法。让我更清楚一点，我需要在文本视图中使用数字超过数字的分数，然后应该能够在同一个文本视图中添加更多文本。我已经看到了这个链接[Android - 使用 unicode 显示分数](https://stackoverflow.com/questions/2920726/android-displaying-fractions-using-unicode)

而且该解决方案效果不佳，尤其是在将其播放到警报对话框中时，格式会丢失。

我也试过这个

```
 SpannableStringBuilder test = new SpannableStringBuilder();
    SpannableString content = new SpannableString("3");
    content.setSpan(new UnderlineSpan(), 0, content.length(), 0);
    test.append(content);
    test.append("\n");
    test.append("56"); 
```

这很好用，但是如果我需要向该行添加更多内容，它将显示在底部，我需要它在顶行。如果我尝试插入顶行，那么底行将移动，因为 textview 居中（它也不会通过以任何特定方式对齐文本视图来工作，因为我可能在分数之前有文本）.. *我不想要多个文本视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:03:36.973

解决方案是使用链接中的这种 html 格式。但是，您必须在顶部和底部添加额外的空间以防止其被切断。

```
 SpannableStringBuilder test = new SpannableStringBuilder();
  test.append("\n");
  test.append(Html.fromHtml("<sup>5</sup>/<sub>9</sub>"));
  test.append("\n"); 
```

# android - 是什么导致了 Android 中的 MotionEvent.ACTION_CANCEL？

> ID：11960861
> 
> 赞同：44
> 
> 时间：2012-08-14T21:16:01.620
> 
> 标签：android, debugging, motionevent

我正在调试 Android 上的一些触摸处理内容，并试图弄清楚为什么发送到我的视图的 MotionEvent`onTouchListener`包含*取消*操作。我无法找到任何有关其原因的文档，并希望有人能指出我调试此问题的正确方向 - 错误代码、源代码或一些常识。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-14T21:29:37.960

这是你想要的：

“ACTION_CANCEL 发生在父级控制该动作时，例如，当用户在列表视图上拖得足够多时，它将开始滚动，而不是让您按下其中的按钮。您可以在视图组中找到有关它的更多信息文档：[onInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)。”

希望这是您正在寻找的答案：

资源：[运动事件](http://developer.android.com/reference/android/view/MotionEvent.html)、[堆栈溢出](https://stackoverflow.com/questions/5240719/whats-the-different-between-action-cancel-and-action-up-for-motionevent)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-04-05T00:14:23.910

你只需要打电话

```
requestDisallowInterceptTouchEvent(true); 
```

在父视图上，像这样 -

```
 @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            view.getParent().requestDisallowInterceptTouchEvent(true);
            switch(motionEvent.getActio){
            }

            return false; 

         } 
```

来源：[onInterceptTouchEvent，onTouchEvent只见ACTION_DOWN](https://stackoverflow.com/questions/12592610/onintercepttouchevent-ontouchevent-only-see-action-down)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-26T14:41:48.793

`ACTION_CANCEL`由祖先触发，通知所有后代他们失去`onTouch`控制，它将负责处理下一个`onTouch`事件。通常它是当后代在`onTouch`or`onTouchEvent`方法中返回 true 时引起的，但在那之后，在手势的下一个触摸事件期间，祖先在或方法中返回 true`onInterceptTouchEvent()`

[[触摸事件流程]](https://stackoverflow.com/a/57222691/4770877)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-26T09:32:53.097

在我的情况下，TouchDelegate 有所帮助。

[https://medium.com/android-news/android-change-touch-area-of-view-by-touchdelegate-fc19f2a34021](https://medium.com/android-news/android-change-touch-area-of-view-by-touchdelegate-fc19f2a34021)

```
private fun changeTouchableAreaOfView(view: View, extraSpace: Int) {
val parent = view.parent as View
Observable.just(parent)
        .observeOn(AndroidSchedulers.mainThread())
        .subscribeOn(AndroidSchedulers.mainThread())
        .subscribe {
            val touchableArea = Rect()
            view.getHitRect(touchableArea)
            touchableArea.top -= extraSpace
            touchableArea.bottom += extraSpace
            touchableArea.left -= extraSpace
            touchableArea.right += extraSpace
            parent.touchDelegate = TouchDelegate(touchableArea, button)
        }

/* In case you don't want to use Rx java
parent.post {
    val touchableArea = Rect()
    button.getHitRect(touchableArea)
    touchableArea.top -= extraSpace
    touchableArea.bottom += extraSpace
    touchableArea.left -= extraSpace
    touchableArea.right += extraSpace
    parent.touchDelegate = TouchDelegate(touchableArea, button)
}
*/ 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T21:29:46.193

当拖动移出视图矩形时，您会得到 ACTION_CANCEL

# javascript - 谷歌地图 - 用户选择不允许位置

> ID：11960863
> 
> 赞同：-1
> 
> 时间：2012-08-14T21:16:15.280
> 
> 标签：javascript, google-maps, google-maps-api-3

我面临这样一种情况，用户不想让系统使用谷歌位置 api 将地图放在他们的中心。

**如果用户选择不使用该位置，我需要设置一个默认值。有没有办法做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:41:04.110

就在这里！谷歌地图使用 navigator.geolocation.getCurrentPosition() 方法来获取您当前的位置。此方法允许成功回调（当用户说是时）和错误回调（当用户说否时）。检查浏览器是否支持地理定位也很好。下面展示了如何使用它

```
 if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(hasGeolocation, noGeolocation)
        } else {
            geolocationNotSupported();
        }

        function hasGeolocation() {
            console.log("yeah!")
        }

        function noGeolocation() {
            console.log("user said no!")
        }

        function geolocationNotSupported() {
            console.log("this browser does not support geolocation")
        } 
```

google maps api docs 上还有一个示例，可以在 google maps 使用情况下显示这一点 [https://developers.google.com/maps/articles/geolocation](https://developers.google.com/maps/articles/geolocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:22:33.517

当您初始化地图时，您正在定义[地图选项](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)。此时只需定义“中心”选项。

# c# - 从 Windows 为应用程序读取 Xml 文件路径

> ID：11960864
> 
> 赞同：0
> 
> 时间：2012-08-14T21:16:15.623
> 
> 标签：c#, xml, windows, winforms, directory

我将文件放在位于项目根目录下的目录名称 XMLpackage 中。在运行时，我需要通过传递路径来读取文件。通过将我的文件放在调试文件夹中，我能够阅读。但是在这个特定的 XMLpackage 文件夹中，我无法阅读它。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:27:17.163

将文件属性“复制到输出”更改为“不复制”以外的值
要获取文件路径，请尝试，

```
Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "XMLpackage", "file1.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:57:22.780

尝试这个。右键单击解决方案资源管理器中的文件，然后单击属性。如图所示，将“复制到输出目录”更改为“始终复制”。

您可以访问该文件，如

```
 string f = System.IO.File.ReadAllText(@"XMLpackage\TableScripts.xml"); 
```

![在此处输入图像描述](../Images/2fb8e60e104d4995fd14db28b4dafbe6.png)

# c# - 如何在一个 XML 文件中添加来自不同类的数据？

> ID：11960870
> 
> 赞同：0
> 
> 时间：2012-08-14T21:16:35.690
> 
> 标签：c#, c#-4.0

我有三个类，我想在一个 XML 文件中添加所有类数据？

第一类是：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public override string ToString()
    {
        return FirstName + " " +LastName + " "  +Email;
    }
} 
```

第二类是：

```
public class Student:Person
{

    public Student()
    {
    }
    public double AssessmentGrade { get; set; }
    public double AssignmentGrade { get; set; }

    public override string ToString()
    {
        return base.ToString() + "," +AssessmentGrade + "," + AssignmentGrade;
    }
} 
```

第三类是：

```
public class Teacher:Person
{
    public string RoomNumber
    {
        get;
        set;
    }

    public override string ToString()
    {
        return base.ToString() + "," + RoomNumber;
    }
} 
```

我也创建了一个 DB 类，将所有数据存储在 XML 文件中。

```
 private const string path = @"Persons.xml";

    Public static void SavePersons(List<Person> Persons)
    {
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.IndentChars = ("   ");

        XmlWriter xmlOut = XmlWriter.Create(path, settings);
        xmlOut.WriteStartDocument();
        xmlOut.WriteStartElement("Persons");

        foreach (Person person in Persons)
        {
            Student student = new Student();
            Teacher teacher = new Teacher();

            xmlOut.WriteStartElement("Person");
            xmlOut.WriteAttributeString("Email", person.Email);
            xmlOut.WriteElementString("Firstname", person.FirstName);
            xmlOut.WriteElementString("Lastname", person.LastName);
            xmlOut.WriteElementString("AssessmentGrade",
                                      student.AssessmentGrade.ToString());
            xmlOut.WriteElementString("AssignmentGrade", 
                                      student.AssignmentGrade.ToString());
            xmlOut.WriteElementString("Room", teacher.RoomNumber.ToString());

            xmlOut.WriteEndElement();

        }
        xmlOut.WriteEndElement();
        xmlOut.Close();
    } 
```

现在的问题是如何在同一个 XML 中添加学生类和教师类。我尝试添加但它不起作用。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:09:26.627

从我在您的代码中可以看到，这三行应该是错误的。：

```
xmlOut.WriteElementString("AssessmentGrade", student.AssessmentGrade.ToString());
xmlOut.WriteElementString("AssignmentGrade", student.AssignmentGrade.ToString());
xmlOut.WriteElementString("Room", teacher.RoomNumber.ToString()); 
```

这是因为您在上面声明了新的学生和教师对象，但没有提供 AssessmentGrade/AssignmentGrade/RoomNumber 的值。

我明白你的问题是什么吗？

```
student.AssessmentGrade = 90; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:11:42.750

我认为您想要做的是单独存储`Person`，但在同一个文件中，并使用相同的逻辑`Student`？`Teacher`也许是这样的：

```
foreach (Person person in Persons)
{
    // Edit: After reading the comment below, I 
    // updated the methods to return an XmlWriter. This
    // way, you should be able to contiune working with the 
    // same instance:
    if(typeOf(Student).IsInstanceOfType(person)){
        xmlOut = AppendStudentInfo(person, xmlOut);
    }else if(typeOf(Teacher).IsInstanceOfType(person){
        xmlOut = AppendTeacherInfo(person, xmlOut);
    }else{
        xmlOut = AppendPersonInfo(person, xmlOut);
    }
}

xmlOut.WriteEndElement();
xmlOut.Close();

(...) 
```

然后创建三个辅助方法来写入数据。这是学生的示例：

```
// (Edit: Updated to return an XmlWriter)
private XmlWriter AppendStudentInfo(Person person, XmlWriter xmlOut){

    Student student = (Student) person;
    // For teacher, use this instead:
    // Teacher teacher = (Teacher) person;

    xmlOut.WriteStartElement("Student");
    xmlOut.WriteAttributeString("Email", student.Email);
    xmlOut.WriteElementString("Firstname", student.FirstName);
    xmlOut.WriteElementString("Lastname", student.LastName);
    xmlOut.WriteElementString("AssessmentGrade",
                              student.AssessmentGrade.ToString());
    xmlOut.WriteElementString("AssignmentGrade", 
                              student.AssignmentGrade.ToString());
    xmlOut.WriteEndElement();

    // (Edit: Updated to return an XmlWriter)
    return xmlOut;
} 
```

现在对于`Teacher`，您将执行相同的操作，但使用该类型而不是`Student`，并包括与教师类型相关的字段（即`Room`，而不是`AssignmentGrade`and `AssessmentGrade`）。

对于 Person，您也可以这样做，但只包括存在于 class 中的字段`Person`。

我没有测试过这段代码，但相信它应该或多或少是正确的。希望这类似于您正在寻找的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:12:31.963

使用 DataContractSerializer 对 xml 格式的数据进行序列化：

```
Public static void SavePersons(Persons persons)
{
  var serializer = new DataContractSerializer(typeof(Persons));
  // Create a FileStream to write with.
  FileStream fs = new FileStream("file.xml", FileMode.Create);
  using (fs)
  {
     ser.WriteObject(fs, p);
  }
} 
```

班级人员：

```
[KnownType(typeof(Student))] 
[KnownType(typeof(Teacher))]
[DataContract]
public class Persons
{
    [DataMember]
    public IEnumerable<Person>{get;set;}
} 
```

另一个例子：[MSDN文章](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx#Mtps_DropDownFilterText)

# android - 查找与纬度/经度跨度一起使用的缩放级别

> ID：11960872
> 
> 赞同：1
> 
> 时间：2012-08-14T21:16:45.847
> 
> 标签：android, android-mapview

我知道要包含在视图中的纬度和经度的跨度。我不想用`zoomToSpan()`，我想用`animateTo()`。在实际到达该位置之前，有没有办法确定地图的缩放级别？基本上将跨度的范围转换为缩放级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:24:14.723

这是对其进行逆向工程的一种方法：

1.) 创建一个带有地图视图的测试应用程序并记录每个缩放级别的跨度值（使用 Logcat）。

2.) 在您的真实应用程序中，创建一个从跨度值到缩放级别的 HashMap，并使用您在步骤 1 中收集的数据填充它。

3.) 所以现在，您所要做的就是找出所需的跨度值对应的缩放值，这可以通过使用在步骤 2 中创建的 HashMap 进行查找来有效地完成。

# php - 欧元符号转换为问号

> ID：11960874
> 
> 赞同：0
> 
> 时间：2012-08-14T21:16:50.317
> 
> 标签：php, html, database, utf-8

我在数据库中有一个欧元符号。当我想在我的网站上打印它时，它会显示一个问号。

它来自文本字段-> 数据库-> 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:22:09.103

您的数据库不是 UTF-8。

这可能会有所帮助：

```
mysqli_query($conn, "SET NAMES utf8"); 
```

或者这个查询：

```
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8 
```

此外，在您的 HTML 页面中包含此`<meta />`标记：`<head>`

```
<meta charset="UTF-8" /> 
```

# c++ - 从模板类派生？

> ID：11960877
> 
> 赞同：1
> 
> 时间：2012-08-14T21:16:58.340
> 
> 标签：c++, templates

我正在尝试使用以下代码，但无法完成。

任何人都可以看到问题吗？

```
class IResourceJob
{
public:
   virtual ~IResourceJob() {}

   virtual void execute() = 0;
};

template<typename T>
class ResourceJob : public IResourceJob
{
public:
   void execute()
   {
      static_assert(false, "Specialised ResourceJob<T> not defined!");
   }
};

template<>
class ResourceJob<int>
{
public:
   void execute()
   {
       // test.
   }
}; 
```

以下用法会产生编译错误：

```
IResourceJob* job = new ResourceJob<int>; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:19:42.833

对于任何无法实例化的模板，编译器都会给出错误。对于您的类模板的成员函数（我假设您的意思`static_assert`），这是正确的，因此编译器可以为您提供诊断。

您想让条件依赖`T`并巧妙地使其*在实例化时*始终评估为 false 。例如像

```
template<typename T>
struct always_false : std::false_type {};

template<typename T>
class ResourceJob : public IResourceJob
{
public:
   void execute()
   {
      static_assert(always_false<T>::value, 
        "Specialised ResourceJob<T> not defined!");
   }
}; 
```

由于编译器无法知道用户是否会对其进行专门化`always_false`（当然您不会），因此它不能再提前拒绝模板。

我也怀疑您是否要将 static_assert 放入`execute`，因为您的错误消息表明`ResourceJob`作为一个整体需要专门化。所以把`static_assert`成员函数的外面放到类体中。如果您*不*希望用户专门化整个模板，而只专门化成员函数，则用户需要说

```
// either "inline" and in the header, or not "inline" and in the .cpp file, but then 
// put this into the header: template<> void ResourceJob<int>::execute();
template<> inline void ResourceJob<int>::execute() {

} 
```

`execute`这将提供模板将使用的替代定义if `T`is `int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:20:12.987

```
IResourceJob* job = new ResourceJob<int>; 
```

失败，因为该类`ResourceJob<int>`不是从 派生的`IResourceJob`。

代码应该是

```
template<>
class ResourceJob<int> : public IResourceJob
{
     public:
     void execute()
     {
         // test.
     }
 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:20:41.880

您还需要派生模板专业化，如：

```
template<>
class ResourceJob<int> : public IResourceJob
{ /* ... */ }; 
```

# c# - 在更改其源之前将 null 分配给转发器的 DataSource

> ID：11960879
> 
> 赞同：2
> 
> 时间：2012-08-14T21:17:17.447
> 
> 标签：c#

我有一个非常古老的记号：每当我为中继器设置数据源时，我总是首先将其设置为空。

```
this.rptMyRepeater.DataSource = null; //is this line necessary?
this.rptMyRepeater.DataSource = pNewSource;
this.rptMyRepeater.DataBind(); 
```

我什至不记得我为什么开始这样做，但我确信如果我没有先分配 null，我会遇到一些与数据绑定对象无法正确绑定相关的丑陋问题。

几年过去了，新的框架版本出现了，也许是一些旧的错误，或者我完全错了。

是否需要在设置之前将 null 分配给数据绑定对象的 DataSource 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:30:34.750

`null`当您要在下一行重新分配同一成员时，我看不出该分配有什么好处。

`DataSource`一个带有`set`访问器的属性会引入有趣的副作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:34:02.477

阅读评论后，Ray Cheng 对 Jeppe 的回答的评论并等待有证据证明这是必要的，我得出的结论是否定的，在重新分配之前没有必要将 null 分配给 DataSource。

# android - 从 App Icon 启动动态壁纸

> ID：11960884
> 
> 赞同：0
> 
> 时间：2012-08-14T21:17:39.387
> 
> 标签：android, xml, live-wallpaper

我正在尝试从应用程序图标和动态壁纸列表中启动我的动态壁纸。它可以从实时列表中使用，但从应用程序图标中它会中断。

以下是两者的代码：

```
 <service
        android:label="@string/appName"
        android:name=".LiveService"        
        android:permission="android.permission.BIND_WALLPAPER"
        >

        <intent-filter android:priority="1">
            <action android:name="android.service.wallpaper.WallpaperService" />
        </intent-filter>

        <meta-data android:name="android.service.wallpaper" android:resource="@xml/wallpaper" />
    </service> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:34:05.160

您不能自己启动 WallPaperService。系统管理对您的服务和引擎的所有调用。目前没有办法让你的壁纸作为“应用程序”运行。

当前的修复似乎是在桌面上安装一个图标，将它们引导到动态壁纸列表。

# video - 视频 Qos 分析工具

> ID：11960885
> 
> 赞同：0
> 
> 时间：2012-08-14T21:17:40.583
> 
> 标签：video, video-streaming

是否有任何开源工具可以捕获视频流延迟、抖动、帧丢失……一些开源视频分析。

礼萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:06:56.617

我知道了。我们可以使用 Wireshark 来监控性能。

[http://wiki.wireshark.org/RTP](http://wiki.wireshark.org/RTP)

# java - 关闭超出范围的 Android 对话框

> ID：11960886
> 
> 赞同：0
> 
> 时间：2012-08-14T21:17:41.943
> 
> 标签：java, android, listview, dialog

**背景：**我有一个对话框，我用三个 ListView 填充，当用户从其中一个 ListView 中选择一个项目时，对话框应该自行关闭。ListView 项目也有长点击行为。此对话框没有按钮。我对显示这些 ListViews 没有任何问题。

**目标：**我想做的是关闭对话框，超出我扩展布局的 Java 方法的范围。

**问题：**我不太确定如何做到这一点。目前我的 onClick 方法如下所示：

```
trigFunctionList.setOnItemClickListener(new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id)
        {
            String text = trigFunctionStrings.get(position);
            input.append(text + "(");
            sysInput += text + "(";
        }
    }); 
```

这*超出了*我声明对话框的方法的范围。我想保持这种方式，但我不知道如何。这样的事情可能吗？如果是这样，请提前感谢您提供的答案。

# python - 在Python中使用bitarray从文件中读取带有标题的二进制文件

> ID：11960889
> 
> 赞同：1
> 
> 时间：2012-08-14T21:17:56.873
> 
> 标签：python, header, bitarray

我编写了一个程序，它使用 bitarray 0.8.0 将位写入二进制文件。我想在这个二进制文件中添加一个标题来描述文件里面的内容。

我的问题是我认为bitarray的“fromfile”方法必须从头开始读取文件。我可以做一个解决方法，以便读取程序获取标题，然后重写一个仅包含二进制部分的临时文件（bitarray tofile），但这听起来不太有效。

有没有办法正确地做到这一点？

我的文件可能如下所示，其中明文是标题，二进制数据是位数组信息：

...{(0, 0): '0'}{(0, 0): '0'}{(0, 0): '0'}�������������� ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ��������...

编辑：

阅读回复后，我尝试了以下操作：

```
bits = ""
b = bitarray()
with open(Filename, 'rb') as file:
    #Get header
    byte = file.read(1)
    while byte != "":
        # read header
        byte = file.read(1)
    b.fromfile(file)
    print b.to01()
    print "len(b.to01())", len(b.to01()) 
```

长度为 0，“to01()”的打印为空。但是，标题的打印很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:21:26.993

> 我的问题是我认为bitarray的“fromfile”方法必须从头开始读取文件。

这很可能是错误的；它与大多数其他文件读取例程一样，可能从文件中的当前位置开始，并在 EOF 处停止。

**编辑：**

从文档中：

> 来自文件（f，[n]）
> 
> > 从文件对象 f 中读取 n 个字节并将它们附加到解释为机器值的位数组中。当 n 被省略时，在到达 EOF 之前读取尽可能多的字节。

# objective-c - 如果使用 CGRect 变量代替 CGRectMake，动画将不起作用

> ID：11960890
> 
> 赞同：0
> 
> 时间：2012-08-14T21:18:02.237
> 
> 标签：objective-c, ios, cocoa-touch, uiviewanimation

我有一个动画将图像向右移动，然后在我松开按钮时停止。我需要图像的帧在不同时间有所不同，所以我使用 CGRect 变量代替 myImageView.frame = CGRectMake。但是当我使用可变图像时，每次我放手时都会跳回到原来的位置，而不是像往常一样停在原地。

```
if (myInt == 2) {
    MyCGRect = CGRectMake(myImageView.frame.origin.x,myImageView.frame.origin.y,18,42);
} else {
    MyCGRect = CGRectMake(myImageView.frame.origin.x,myImageView.frame.origin.y,35,28);
}

-(IBAction)holdToMakeImageMove:(id)sender
{
//!!!!!This Works!!!!!!
myImageView.frame = CGRectMake(myImageView.frame.origin.x,myImageView.frame.origin.y,18,42);

//!!!!!!THIS doesnt work

myImageView.frame = MyCGRect;

//...animation

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T21:32:56.237

例如，这段代码对我有用。将按钮框架从 (0,800,50,50) 更改为 (0,0,100,100)

```
@interface ViewController ()
...
@property (nonatomic, assign) CGRect myRect;
...
@end

@implementation ViewController
...
@synthesize myRect = _myRect;
...
- (void)viewDidLoad {
    [super viewDidLoad];

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(0, 800, 50, 50)];
    [btn addTarget:self action:@selector(avvia:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn];

    self.myRect = CGRectMake(100, 0, 100, 100);
}
...
- (void)avvia:(id)sender {
    ((UIButton *)sender).frame = self.myRect;
}
...
@end 
```

# charts - JQPlot Y 轴标签偏移

> ID：11960900
> 
> 赞同：1
> 
> 时间：2012-08-14T21:18:50.650
> 
> 标签：charts, jqplot, offset, overlap

我的 JQPlot 图表当前正在正确呈现所有内容，但唯一的问题是图表与刻度标签重叠。无论如何我可以抵消标签以防止这种情况发生或简单的选项更改？我在 JQPlot 网站上没有找到任何关于此的信息，因此我们将不胜感激。这是一些示例代码：

```
var moduleTypesChart = $.jqplot("moduleTypesChart",[moduleTypesCount], {
                            title:'<h2>Module Types Distribution</h2>',
                            seriesColors:["darkred"],
                            seriesDefaults:{
                                renderer:$.jqplot.BarRenderer,
                                rendererOptions: {fillToZero: true, varyBarColor: false}
                            },
                            axesDefaults:{
                                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                                tickOptions:{
                                    angle: -15,
                                    textColor:'black',
                                    labelPosition:'middle',
                                    fontFamily:"Arial",
                                    fontWeight:"bold"
                                }
                            },
                            axes: {
                                xaxis: {
                                    renderer: $.jqplot.CategoryAxisRenderer,
                                    ticks: moduleTypes
                                }
                            },
                            grid: {
                                background:'Gainsboro',
                                gridLineColor:'LightSteelBlue'
                            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:28:36.460

您可以通过修改 CSS 来做到这一点。

在您的 jqPlot 目录中有两个文件：`jquery.jqplot.css`和`jquery.jqplot.min.css`

里面是一个用于 y 轴标签的 CSS 类：

```
.jqplot-yaxis-label {
    margin-right: 20px;
    font-size: 11pt;
    position: absolute;
} 
```

您可以增加右边距以避免与刻度重叠。

请记住确保链接到 HTML 文档头部中的这些文件之一，例如：

```
<link rel='stylesheet' type='text/css' href='/DHTML/jqplot/jquery.jqplot.css'> 
```

# bash - 删除下一行与特定模式匹配的行

> ID：11960902
> 
> 赞同：3
> 
> 时间：2012-08-14T21:19:07.577
> 
> 标签：bash

我有一个以下简单的脚本，用于从 irc 日志中解析出日期（由 irssi 创建）

```
#!/bin/bash                                                                                  
query=$1

grep -n $query logfile > matches.log 
grep -n "Day changed" logfile >> matches.log

cat matches.log | sort -n 
```

它产生如下输出：

```
--- Day changed Tue Jul 03 2012
--- Day changed Wed Jul 04 2012
--- Day changed Thu Jul 05 2012
16:54 <@Hamatti> who let the dogs out
--- Day changed Fri Jul 06 2012
--- Day changed Sat Jul 07 2012
--- Day changed Sun Jul 08 2012
12:11 <@Hamatti> dogs are fun 
```

但由于我只对找出实际比赛的日期感兴趣，所以我想过滤掉所有这些

```
--- Day changed XXX XXX dd dddd 
```

下一行没有时间戳的行。所以这个例子应该输出

```
--- Day changed Thu Jul 05 2012
16:54 <@Hamatti> who let the dogs out
--- Day changed Sun Jul 08 2012
12:11 <@Hamatti> dogs are fun 
```

摆脱所有无用的虚假信息。

编辑。在 T. Zelieke 的回答之后，我意识到我可以使它更像一个单行，所以我现在使用以下内容来保存日志文件免于被迭代两次。

```
query=$1
egrep "$query|Day changed" logfile |grep -B1 "^[^-]" |sed '/^--$/d' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:27:39.190

```
grep -B1 "^[^-]" data |sed '/^--$/d' 
```

这用于`grep`过滤不以破折号 ( `"^[^-]"`) 开头的行。`-B1`要求在比赛前打印紧接的行。
不幸的是`grep`，然后将每个匹配项（两行对）分隔`--`一行。因此，我通过管道输出`sed`以摆脱那些 superflouos 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:51:28.587

这是一个使用awk的。

```
awk -v query="$1" '/^--- Day changed/{day=$0;next} $0 ~ query {if (day!=p) {print day;p=day}; print}' 
```

每次找到“Day changed”行时，它都会将其存储在变量中`day`。然后，当它找到与查询匹配的内容时，它首先输出当前存储的日期行。如果同一天有多个匹配项，则该变量`p`用于确定是否已经打印了日线。

# javascript - 取消隐藏后导航到 div 的一部分

> ID：11960903
> 
> 赞同：0
> 
> 时间：2012-08-14T21:19:08.870
> 
> 标签：javascript, html, javascript-events

我将如何导航到隐藏的 div 的一部分，然后通过设置 display:block 来发现它？

我已经尝试保存我想要到达的位置并使用 document.location.scrollTop 以及在 div 中的特定元素上调用 scrollTo() 。由于 div 已经加载，我认为它会在页面完全重新渲染之前立即执行代码。

页面的或多或少功能准系统示例：生产代码中有一些警告，例如切换中的动画转换（实际上可能是问题）

调用导航/转换功能后，我这样做：

```
<html>
<head>
<script> function swapper(id){
document.getElementById('list').style.display = 'none'; 
document.getElementById('detail').innerHTML = 'some details about ' + id;       document.getElementById('detail').style.display = 'block';
} </script>
</head>        
 <body>
     <button id="backbutton" onclick="document.getElementById('list').style.display = 'block'; document.getElementById('detail').style.display = 'none';">Back</button>                
       <div id="list" style="display:block;">
             <ul>
                   <li id="1" onclick=swapper(1)>1</li>
                   <li id="2" onclick=swapper(2)>2</li>
             </ul>
       </div>
       <div id="detail" style="display:none;"></div>
 </body> 
```

​</p>

# c - C CUDA 代码中的访问冲突

> ID：11960905
> 
> 赞同：0
> 
> 时间：2012-08-14T21:19:12.927
> 
> 标签：c, cuda

代码编译没有错误，但调试时出现访问冲突消息。任何人都可以指出下面的代码有什么问题吗？

我的代码实际上运行了同一方程的 1000 个实例的 1000 次迭代，它是一个递归非线性方程。目的只是为了欣赏并行运行多个（迭代）方程的能力。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <conio.h>
#include <cuda.h>
#include <cutil.h>
#include <time.h> 

#define TOTAL_THREADS 1024
#define THREADS_PER_BLOCK 256
#define TOTAL_BLOCKS 4
#define VALUES_PER_THREAD 1000
#define THETA_VALUES_PER_THREAD 15

__global__ void my_compute(float *y_d, float *theta_d, float *u_d) 
{
   int offset = ((blockIdx.x * blockDim.x) + threadIdx.x) * VALUES_PER_THREAD;
   int theta_offset = ((blockIdx.x * blockDim.x) + threadIdx.x) * THETA_VALUES_PER_THREAD;

   for (int i = 7; i < 1000; i++) {
      y_d[offset + i] = theta_d[theta_offset + 0] * y_d[offset + i - 1] +
                        theta_d[theta_offset + 1] * y_d[offset + i - 3] +
                        theta_d[theta_offset + 2] * u_d[offset + i - 5] * u_d[offset + i - 4] +
                        theta_d[theta_offset + 3] + 
                        theta_d[theta_offset + 4] * u_d[offset + i - 6] +
                        theta_d[theta_offset + 5] * u_d[offset + i - 4] * y_d[offset + i - 6] +
                        theta_d[theta_offset + 6] * u_d[offset + i - 7] +
                        theta_d[theta_offset + 7] * u_d[offset + i - 7] * u_d[offset + i - 6] +
                        theta_d[theta_offset + 8] * y_d[offset + i - 4] +
                        theta_d[theta_offset + 9] * y_d[offset + i - 5] +
                        theta_d[theta_offset + 10] * u_d[offset + i - 4] * y_d[offset + i - 5] +
                        theta_d[theta_offset + 11] * u_d[offset + i - 4] * y_d[offset + i - 2] +
                        theta_d[theta_offset + 12] * u_d[offset + i - 7] * u_d[offset + i - 3] +
                        theta_d[theta_offset + 13] * u_d[offset + i - 5] +
                        theta_d[theta_offset + 14] * u_d[offset + i - 4];
   }
}

int main(void) 
{
   float y[1000000];
   FILE * fpoo;
   FILE * u;
   float theta[15000];
   float u_data[1000000];
   float *y_d;
   float *theta_d;
   float *u_d;
   cudaEvent_t start, stop;
   float time;

   cudaEventCreate(&start);
   cudaEventCreate(&stop);

   //memory allocation
   cudaMalloc((void **) &y_d, 1000000 * sizeof(float));
   cudaMalloc((void **) &theta_d, 15000 * sizeof(float));
   cudaMalloc((void **) &u_d, 1000000 * sizeof(float));
   cudaEventRecord(start, 0);

   // importing data for theta and input of model//
   fpoo = fopen("c:\\Fly_theta.txt", "r");
   u = fopen("c:\\Fly_u.txt", "r");

   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 15; j++)
         fscanf(fpoo, "%f\n", &theta[15 * i + j]);
   } 
   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 1000; j++)
         fscanf(u, "%f\n", &u_data[1000 * i + j]);
   }
   //initialising past input with the value of zero//
   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 8; j++)
         y[8 * i + j] = 0;
   }
   cudaMemcpy(y_d, y, 1000000 * sizeof(float), cudaMemcpyHostToDevice);

   cudaMemcpy(theta_d, theta, 15000 * sizeof(float), cudaMemcpyHostToDevice);
   cudaMemcpy(u_d, u_data, 1000000 * sizeof(float), cudaMemcpyHostToDevice);

   //calling kernel function//
   my_compute <<< 4, 256 >>> (y_d, theta_d, u_d);

   cudaMemcpy(y, y_d, 1000000 * sizeof(float), cudaMemcpyDeviceToHost);

   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 1000; j++)
         printf("%f", y[1000 * i + j]);
   } 
   cudaEventRecord(stop, 0);
   cudaEventSynchronize(stop);
   cudaEventElapsedTime(&time, start, stop);
   cudaEventDestroy(start);
   cudaEventDestroy(stop);
   printf("Time to generate:  %3.1f ms \n", time);

   cudaFree(y_d);
   cudaFree(theta_d);
   cudaFree(u_d);

   fclose(u);
   fclose(fpoo);

   //fclose();
   _getche();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:59:35.853

尤金是当场的。问题是 theta_d 的原始分配：

theta_d 的字节大小应为：

```
 THREADS_PER_BLOCK * TOTAL_BLOCKS * THETA_VALUES_PER_THREAD * ELEMENT_SIZE = 
 256 * 4 * 15 * 4 =  61440 
```

确保您选择的访问模式可以访问数组的所有元素。在应用程序中，theta_d 被声明为：

```
cudaMalloc((void **) &theta_d, 15000 * sizeof(float)); 
```

实际上，theta_d 的大小只有 60000 字节。结果，内核将在字节 60000 之后的所有访问中遇到错误。

一种解决方案是根据您已经#defined 的常量来调整分配的大小。如果将 15000 替换为“THREADS_PER_BLOCK * TOTAL_BLOCKS * THETA_VALUES_PER_THREAD”，它将正确调整分配的大小。尝试以下主要功能：

```
int main(void) 
{
   float y[1000000];
   FILE * fpoo;
   FILE * u;
   float theta[THREADS_PER_BLOCK * TOTAL_BLOCKS * THETA_VALUES_PER_THREAD];
   float u_data[1000000];
   float *y_d;
   float *theta_d;
   float *u_d;
   cudaEvent_t start, stop;
   float time;

   cudaEventCreate(&start);
   cudaEventCreate(&stop);

   //memory allocation
   cudaMalloc((void **) &y_d, 1000000 * sizeof(float));
   cudaMalloc((void **) &theta_d, THREADS_PER_BLOCK * TOTAL_BLOCKS * THETA_VALUES_PER_THREAD* sizeof(float));
   cudaMalloc((void **) &u_d, 1000000 * sizeof(float));
   cudaEventRecord(start, 0);

   // importing data for theta and input of model//
   fpoo = fopen("c:\\Fly_theta.txt", "r");
   u = fopen("c:\\Fly_u.txt", "r");

   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 15; j++)
         fscanf(fpoo, "%f\n", &theta[15 * i + j]);
   } 
   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 1000; j++)
         fscanf(u, "%f\n", &u_data[1000 * i + j]);
   }
   //initialising past input with the value of zero//
   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 8; j++)
         y[8 * i + j] = 0;
   }
   cudaMemcpy(y_d, y, 1000000 * sizeof(float), cudaMemcpyHostToDevice);

   cudaMemcpy(theta_d, theta, THREADS_PER_BLOCK * TOTAL_BLOCKS * THETA_VALUES_PER_THREAD* sizeof(float), cudaMemcpyHostToDevice);
   cudaMemcpy(u_d, u_data, 1000000 * sizeof(float), cudaMemcpyHostToDevice);

   //calling kernel function//
   my_compute <<< 4, 256 >>> (y_d, theta_d, u_d);

   cudaMemcpy(y, y_d, 1000000 * sizeof(float), cudaMemcpyDeviceToHost);

   for (int i = 0; i < 1000; i++) {
      for (int j = 0; j < 1000; j++)
         printf("%f", y[1000 * i + j]);
   } 
   cudaEventRecord(stop, 0);
   cudaEventSynchronize(stop);
   cudaEventElapsedTime(&time, start, stop);
   cudaEventDestroy(start);
   cudaEventDestroy(stop);
   printf("Time to generate:  %3.1f ms \n", time);

   cudaFree(y_d);
   cudaFree(theta_d);
   cudaFree(u_d);

   fclose(u);
   fclose(fpoo);

   //fclose();
   _getche();
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:21:36.737

您可能有堆栈溢出。

尝试`static`在数组声明中添加说明符：

```
static float y[1000000];
static float theta[15000];
static float u_data[1000000]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:41:01.047

我尝试使用 Toolkit 5.0 中的 cuda-gdb 和集成的 cuda-memcheck 编写代码。

它向我展示的是，在块 (3,0,0) 的线程 (232,0,0) 上，theta_offset 是 15000 - 根据我对您的代码的期望，它看起来永远不会超过 14999（theta_d 大小是15000 所以这是可以使用的最大索引）

请注意，4 个块 * 256 个线程 * 15 个元素/线程 = 15360。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:26:27.247

守则确实是正确的。用于从文件读取数据的“fopen for loops”未按预期读取数据。所以我把它改成了下面的循环。我的代码现在运行完美。感谢所有做出贡献的人。

// 导入 theta 的数据和模型的输入

```
fpoo= fopen("c:\\Fly_theta.txt","r");

u= fopen("c:\\Fly_u.txt","r");

        for(int j=0;j<15;j++)
            {
                fscanf(fpoo,"%f\n",&theta[j]);
            }
         for(int i=1;i<1000;i++)
         {
             for(int j=0;j<15;j++)
             {
                theta[15*i+j]=theta[j];
             }
         }
        for(int j=0;j<1000;j++)
            {
                fscanf(u,"%f\n",&u_data[j]);
            }
        for(int i=1;i<1000;i++)
         {
             for(int j=0;j<1000;j++)
             {
                u_data[1000*i+j]=u_data[j];
             }
        } 
```

# python - 如何提示用户将他们的谷歌帐户与我的应用程序关联？

> ID：11960907
> 
> 赞同：2
> 
> 时间：2012-08-14T21:19:17.947
> 
> 标签：python, google-app-engine, python-2.7, google-drive-api

我想知道我应该如何提示用户从我的应用程序登录/连接到他们的谷歌帐户，以便我可以使用他们的电子邮件和密码访问他们的文档/驱动器。我有一个在我的桌面上运行的应用程序，它连接到一个谷歌帐户的驱动器，并创建一个电子表格，然后访问它以获取信息。目前我必须硬编码电子邮件和密码。

我听说过 gaema，但听起来不太对劲。另外我不知道它是否有所作为，但这个应用程序只在我的笔记本电脑上，而不是在谷歌服务器上运行。虽然它不应该......我认为。

PS我是谷歌应用引擎和python的新手，甚至是stackoverflow，所以请不要讨厌我的菜鸟问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:36:29.747

向用户询问他们的用户名和密码绝不是一个可接受的解决方案，我相信他们不会愿意给你。相反，您需要使用某种授权流程，通常是 OAuth 2.0。

[本文](https://developers.google.com/drive/examples/python)介绍了一个使用 GAE 的 Google Drive 的完整示例应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:24:17.137

所以 AppEngine 使与 Google 帐户相关的东西变得非常容易（惊喜 :) ）。看看这里的文档[https://developers.google.com/appengine/docs/python/users/overview](https://developers.google.com/appengine/docs/python/users/overview)。这解释了用户服务，您可以在其中请求用户使用其 Google 凭据登录。例如（直接来自文档）：

```
from google.appengine.api import users
from google.appengine.ext import webapp

class MyHandler(webapp.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if user:
            greeting = ("Welcome, %s! (<a href=\"%s\">sign out</a>)" %
                        (user.nickname(), users.create_logout_url("/")))
        else:
            greeting = ("<a href=\"%s\">Sign in or register</a>." %
                        users.create_login_url("/"))

        self.response.out.write("<html><body>%s</body></html>" % greeting) 
```

这会检查用户是否使用他们的 Google 帐户登录，如果没有则向他们显示登录 URL。执行“魔术”的部分是`users.create_logout_url('/')`和`users.create_login_url('/')`方法。他们创建了一个指向用户可以登录的特殊 URL 的链接（您无需进行任何额外的格式化/编码）。然后将它们重定向回您的站点（“/”将它们发送到您的主页，但您可以更改）。希望这可以帮助！

**编辑**：正如@Wooble 指出的那样，这不会授予您的应用程序访问用户数据的权限 - 它只会根据用户服务提供的信息为您提供一些关于用户的基本信息。为了允许您的应用程序访问 Google Drive 数据，@SebastianKreft 提供的链接显示了一个执行身份验证的示例应用程序。可以在[此处](https://developers.google.com/drive/about-auth)找到有关将 OAuth 与 Drive 结合使用的其他一般信息。简而言之，用户需要授予您的应用程序访问其数据的权限，并且它通过 OAuth 令牌执行此操作（请参阅文档以获得比我能给出的更好的解释）。

# javascript - OnFocus OnBlur 与 ASP.NET

> ID：11960909
> 
> 赞同：1
> 
> 时间：2012-08-14T21:19:33.033
> 
> 标签：javascript, asp.net, html

我真的不明白为什么这对我来说很难开始工作：

*   [http://jsfiddle.net/jp2code/qCExy/](http://jsfiddle.net/jp2code/qCExy/)

它最终会进入一个 ASP.NET 控件，所以我相信我需要将 Javascript 传递给`<textarea>`控件的 ID。

它不起作用。

因此，在 jsFiddle 中，我尝试对名字和姓氏使用标准控件，但它们也不起作用。

**编辑：**

我一直在玩 jsFiddle，看来我`jsOnFocus`的从未被调用（警报永远不会触发）。但是，我能够从其他人那里运行一个小脚本，使多行文本框清晰并重置 - 我似乎无法找到从 javascript 函数调用它的方法：

```
 function jsOnFocus(obj) {
      alert("Inside the jsOnFocus.");
      if (obj.Value==obj.defaultValue)
          obj.Value="";
  }
  function jsOnBlur(obj) {
      if (obj.Value==="")
          obj.Value=obj.defaultValue;
  } 
```

​ 这里是 HTML。

```
 <table>
    <tr><td>Message:</td><td>&nbsp;</td></tr>
    <tr>
      <td>&nbsp;</td>
      <td>
        <textarea name="txtMsg" rows="6" cols="30"
          onfocus="if(this.value==this.defaultValue)this.value='';" 
          onblur="if(this.value==='')this.value=this.defaultValue;">[Write your message here or call my voice number at (555) 222-1234.]</textarea>
      </td>
    </tr>
    <tr>
      <td>Test1:</td>
        <td><input type="text" name="txtTest1" 
          onfocus="jsOnFocus(txtTest1)" 
          onblur="jsOnBlur(txtTest1)" value="Test1" /></td>
    </tr>
    <tr>
      <td>Test2:</td>
  <td><input type="text" name="txtTest2" 
          onfocus="if(this.value=='Test2'){this.value=''};" value="Test2" /></td>
    </tr>
    <tr>
      <td>Test3:</td>
        <td><input type="text" name="txtTest3" 
          onfocus="if(this.value==this.defaultValue)this.value='';" 
          onblur="if(this.value==='')this.value=this.defaultValue;" value="Test3" /></td>
    </tr>
  </table>​ 
```

“消息”有效，但我想让代码在我可以放置在我的“js”文件中并在其他对象上使用的 javascript 中运行。

“Test1”是尝试调用 javascript，但它不起作用。

“Test2”**有效**，但它**没有**使用“Message”中的技术。

“Test3”**有效**，它**确实**使用了“Message”中的技术。

有谁知道如何使这段代码在 javascript 而不是内联 html 中工作？

jsFiddle 链接：http: [//jsfiddle.net/jp2code/qCExy/10/](http://jsfiddle.net/jp2code/qCExy/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:44:19.117

代码背后：

```
 string strUserName = "User Name";
            string strPassword = "Password";

            txtUserName.Text = strUserName;
            txtPassword.Text = strPassword;

            txtPassword.Attributes.Add("onblur", "PasswordBlur(this, '" + strPassword + "');");
            txtUserName.Attributes.Add("onblur", "UserNameBlur(this, '" + strUserName + "');");

            txtUserName.Attributes.Add("onfocus", "UserNameFocus(this, '" + strUserName + "');");
            txtPassword.Attributes.Add("onfocus", "PasswordFocus(this, '" + strPassword + "');"); 
```

Java 脚本：

```
function UserNameBlur(txtElem, strUserName) {
    if (txtElem.value == '') txtElem.value = strUserName;
}
function PasswordBlur(txtElem, strPassword) {
    if (txtElem.value == '') txtElem.value = strPassword;
}
function UserNameFocus(txtElem, strUserName) {
    if (txtElem.value == strUserName) txtElem.value = '';
}
function PasswordFocus(txtElem, strPassword) {
    if (txtElem.value == strPassword) txtElem.value = '';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:02:50.437

我用你的小提琴玩了一下。我是 jsfiddle 的新手，所以我不敢尝试保存我的更改。

无论如何，有一些事情会阻止**Test1**框工作。首先，将小提琴中“JavaScript”块中的脚本添加到页面中，如下所示（通过查看结果部分中的源代码进行检查）：

```
<script type='text/javascript'>//<![CDATA[ 
    window.addEvent('load', function() {
        function jsOnFocus(obj) {
            alert("Inside the jsOnFocus.");
            if (obj.Value==obj.defaultValue)
                obj.Value="";
        }
        function jsOnBlur(obj) {
            if (obj.Value==="")
                obj.Value=obj.defaultValue;
        }
    });//]]>  
</script> 
```

因此，您的函数不在您可以像尝试那样调用它们的*范围内（因为缺少更精确的术语）。*

为了解决这个问题，我直接在 Html 部分中将脚本添加为`<script>`块。

javascript 代码本身也存在一个小问题。*value*属性被称为，而`value`不是`Value`。

此外，我更改了输入上的`onfocus`and`onblur`属性以传递`this`给函数。如果需要，您当然可以将其更改为传递一个 id，然后使用该 id 查找控件。在这种情况下，请确保控件**具有**指定的 id。

无论如何，这是小提琴 Html 部分的结果代码：

```
<script type="text/jscript">
    function jsOnFocus(obj) {
        if (obj.value==obj.defaultValue)
            obj.value="";
    }
    function jsOnBlur(obj) {
        if (obj.value==="")
            obj.value=obj.defaultValue;
    }
</script>
<table>
  <tr><td>Message:</td><td>&nbsp;</td></tr>
  <tr>
    <td>&nbsp;</td>
    <td>
      <textarea name="txtMsg" rows="6" cols="30" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value==='')this.value=this.defaultValue;">[Write your message here or call my voice number at (555) 222-1234.]</textarea>
    </td>
  </tr>
  <tr>
    <td>Test1:</td>
      <td><input type="text" name="txtTest1" onfocus="jsOnFocus(this)" onblur="jsOnBlur(this)" value="Test1" /></td>
  </tr>
  <tr>
    <td>Test2:</td>
      <td><input type="text" name="txtTest2" onfocus="if(this.value=='Test2'){this.value=''};" value="Test2" /></td>
  </tr>
  <tr>
    <td>Test3:</td>
      <td><input type="text" name="txtTest3" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value==='')this.value=this.defaultValue;" value="Test3" /></td>
  </tr>
</table> 
```

# oauth - 通用 OAuth - 有可能吗？

> ID：11960912
> 
> 赞同：0
> 
> 时间：2012-08-14T21:19:50.897
> 
> 标签：oauth

我正在尝试构建一个应用程序，用户可以在其中指定网站的 URL，我的页面将转到该 URL 并获取信息。如果 URL 需要用户身份验证才能访问信息，那么我想使用 OAuth 1.0 来做到这一点。

问题是，我在 OAuth 教程中看到了这一点，据我所知，我的应用程序必须已经以某种方式注册到我从中请求信息的页面。我的理解是，对于我希望我的用户能够使用的任何页面，我必须自己单独访问该页面并注册我的应用程序。完成后，它会给我一个消费者密钥和秘密，我将它们硬编码到我的页面中，然后在我访问请求 URL、授权 URL 和访问 URL 时使用它们。当然，这对我没有好处，因为我希望我的用户能够指定任意页面来访问信息，然后向这些页面提供他们的凭据，以便让我的应用程序访问它们的信息。

此外，据我所知，我需要知道三个 URL：

*   请求 URL，我将消费者密钥/秘密对发送到该 URL，以便接收新的未经授权的请求令牌。
*   授权 URL，我使用请求令牌和 oauth_callback 的查询参数引导用户访问。用户将被重定向出我的网页，登录到外部站点，授予我访问权限，然后被重定向回 oauth_callback 中指定的 URL，并提供有关他们是否授权我的请求的信息。
*   我将授权请求令牌发送到的访问 URL，期望获得访问令牌作为回报。

然后，一旦我拥有了所有这些，我就可以使用访问密钥/秘密对作为用户名和密码。我将它们存储在与用户相关的 cookie 中，并在以后访问网站上的信息时使用它们。在网站的交易结束时，它会在我的请求中查找该信息，如果我正确地包含它，那么我将被允许访问我喜欢的任何用户数据。

我正在尝试做的事情 - 提供对网站的通用 OAuth 访问权限 - 可能吗，还是需要我作为应用程序所有者向服务器注册我的应用程序才能获得对它的 OAuth 访问权限？如果可能，那么我如何获取请求 URL、授权 URL 和访问 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:42:20.380

这真的不可能。以下是您将遇到的问题的简短列表：

1.  您需要为所有网站提供应用程序令牌（例如，您的应用程序向资源所有者注册）。这不是你可以即时做的事情
2.  来自不同资源所有者的 OAuth URL 方案不一致。Twitter 的 OAuth URL 结构与 Google 的不同，而 Google 的 URL 结构与 Foursquare 不同。如果不对其进行硬编码，实际上不可能找出 URL
3.  范围。当您为许多资源所有者进行 OAuth 注册时，您需要指定一个范围。你怎么知道范围应该是什么

# wcf - 未从 WCF REST 服务获得预期结果（新手）

> ID：11960914
> 
> 赞同：0
> 
> 时间：2012-08-14T21:19:54.767
> 
> 标签：wcf, web-services, rest

我是 WCF Web 服务的新手。我正在尝试测试我的简单 hello world web 服务。现在，我正在做自我托管。我正在启动主机应用程序，打开浏览器并输入资源的地址。我还运行 Fiddler 并使用 Composer 创建了一个请求。在这两种情况下，我都会收到“您已创建服务”。链接到我的 .wsdl 的页面。

我期待在我的响应中看到“Hello World”文本或具有“...Hello world”的网页。

我错过了什么？还是我只是误解了这个过程？

应用程序配置

```
<?xml version="1.0"?>
<configuration>

    <system.serviceModel>
      <services>
         <service name="My.Core.Services.GreetingService" behaviorConfiguration="MyServiceTypeBehaviors">
            <host>
               <baseAddresses>
                 <add baseAddress="http://localhost:8080/greeting"/>
               </baseAddresses>
            </host>
            <endpoint name="GreetingService" binding="webHttpBinding" contract="My.Core.Services.IGreetingService"/>
            <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
       </service>
    </services>

    <behaviors>
       <serviceBehaviors>
            <behavior name="MyServiceTypeBehaviors" >
                <serviceMetadata httpGetEnabled="true" />
            </behavior>
       </serviceBehaviors>
    </behaviors>
   </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

主机代码

```
using System;
using System.ServiceModel;
using My.Core.Services;    

namespace My.Service.Host
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var host = new ServiceHost(typeof(GreetingService)))
            {
                host.Open();
                Console.WriteLine("The service is ready.");
                Console.WriteLine("Press <ENTER> to terminate service.");
                Console.WriteLine();
                Console.ReadLine();
                host.Close();
            }
        }
} 
```

}

Hello World 合同和服务

```
using System.ServiceModel;
using System.ServiceModel.Web;

namespace My.Core.Services
{
   [ServiceContract]
   public interface IGreetingService
   {
      [OperationContract]
      [WebGet(UriTemplate = "/")]
      string GetGreeting();
   }
}

using System.Collections.Generic;

namespace My.Core.Services
{
    public class GreetingService : IGreetingService
    {
        public string GetGreeting()
        {
             return "Greeting...Hello World";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:50:39.100

如果我理解正确，您可以在以下网址看到您的 wsdl 链接

```
http://localhost:8080/greeting 
```

为了现在调用您的端点，您需要像这样将其添加到 url

```
http://localhost:8080/greeting/GetGreeting/ 
```

我不完全确定为什么你有 UriTemplate 东西，但我猜测你可能只是从一个例子中复制粘贴它。除非您有要定义的特定查询字符串参数，否则您并不真正需要它，而且它往往会使事情复杂化，所以我建议您将其取出。这意味着您的界面看起来像这样......

```
[ServiceContract]
public interface IGreetingService
{
   [OperationContract]
   [WebGet]
   string GetGreeting();
} 
```

...然后您可能会丢失网址上的最后一个“/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:12:40.977

I figure out the problem. When I use the url: "http://localhost:8080/greeting" the server sends the temp page. When I add the backslash "/" on the end of the url it execute my service. so, "http://localhost:8080/greeting/" works and sends me the "...Hello World" back.

# python - 一个Django页面的持续更新内容

> ID：11960916
> 
> 赞同：1
> 
> 时间：2012-08-14T21:19:58.573
> 
> 标签：python, django

我有一个数据库来存储每秒生成的一些行。我想更新网站，每个新内容到达数据库，我不想刷新页面，而是向当前页面添加新行。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:28:02.157

您应该使用 AJAX 查询，两种技术之一：

1.  定期更新页面请求（并用 JavaScript 中的结果更新表格；后端保持纯 django）；或者
2.  使用长轮询（一种通常称为“彗星”的技术）来保持与服务器的连接打开并在有更新时接收服务器事件。在为请求/响应模式设计的框架中，后端可能有点棘手；[但是您可以在此处](https://stackoverflow.com/questions/5614274/need-help-understanding-comet-in-python-with-django)找到有关如何在 python 中执行此操作的线索。

# android - 如何以编程方式获取一个 ImageView 的高度和宽度并将其设置为 android 中的另一个 ImageView

> ID：11960919
> 
> 赞同：0
> 
> 时间：2012-08-14T21:20:09.353
> 
> 标签：android, android-imageview

这是代码

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@color/white" >

<ImageView
    android:id="@+id/first_imageview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dip"
    android:layout_marginTop="5dip"
    android:src="@drawable/frame" />

  <ImageView
     android:id="@+id/second_imageview"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@id/first_imageview"
     android:layout_alignLeft="@id/first_imageview"         
     android:scaleType="fitXY" />
</RelativeLayout> 
```

现在我需要检测高度和宽度，`first_imageview`然后将其设置为`second_image_view`. 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:26:43.763

你可以设置

```
android:layout_alignRight="@id/inside_imageview"
android:layout_alignBottom="@id/inside_imageview" 
```

这将确保第二个图像视图与第一个具有相同的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:28:09.830

就像是：

```
second_image_view.getLayoutParams().height = first_image_view.getHeight();
second_image_view.getLayoutParams().width = first_image_view.getWidth(); 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:45:22.667

这行代码应该这样做：

```
secondImageView.setLayoutParams(new ViewGroup.LayoutParams(
                         firstImageView.getWidth(), firstImageView.getHeight())); 
```

如果您希望使用 xml 来执行此操作，您可以按照 Chitranshu 的回答。

# c# - 新创建的标签不会显示 GUI

> ID：11960924
> 
> 赞同：0
> 
> 时间：2012-08-14T21:20:45.297
> 
> 标签：c#, user-interface

我在让我的标签出现在 gui 中时遇到了一些问题……有什么想法吗？

```
private void addNewExcerciseButton_Click(object sender, EventArgs e)
        {

            int y = 305;
            int x= 61;

            string tempExcercise = excerciseTextBox.Text;
            excerciseTextBox.Clear();

           Label[] excerciseLabels = new Label[numExercises];

           for (int i = 0; i < numExercises; ++i)
           {
                excerciseLabels[i] = new Label();
                excerciseLabels[i].Text = ToString("{0}. {1}", i + 1, tempExcercise);;
                excerciseLabels[i].Location = new System.Drawing.Point(x, y);
                x += 10;
                y += 10;

                ++numExercises;
           }
} 
```

提前致谢。

numExercises 是全局的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:22:41.350

您必须将每个新标签添加到可见控件（例如您的表单）所包含的控件集合中。您正在创建和设置它们，但它们在控制层次结构中之前还不是 GUI 的一部分。

在设置标签的位置后添加以下行：

```
this.Controls.Add(exerciseLabels[i]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:22:08.380

您需要将标签添加到 GUI：

```
this.Controls.Add(excersizeLabels[i]); 
```

作为旁注，使用数组没有意义。

# r - R `scan` 函数的哪一部分允许数据输入？

> ID：11960925
> 
> 赞同：0
> 
> 时间：2012-08-14T21:20:46.137
> 
> 标签：r, function

我已经键入`> scan`查看`scan()`函数的主体，但我无法弄清楚它的哪一部分可能负责用户输入数据的可能性。

（如果我们调用函数，`x=scan()`我们可以创建`x`，在空行时按回车结束交互）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:28:57.137

这一点在这里：

```
.Internal(scan(file, what, nmax, sep, dec, quote, skip, nlines, 
        na.strings, flush, fill, strip.white, quiet, blank.lines.skip, 
        multi.line, comment.char, allowEscapes, encoding)) 
```

这是函数返回之前的最后一段代码。这是对 的调用`.Internal`，一些执行扫描的 C 代码。

来自`?.Internal`：

```
.Internal performs a call to an internal code which is built in 
to the R interpreter. 
```

# hadoop - 从同一节点统计数据读取的 Hadoop 映射任务

> ID：11960927
> 
> 赞同：0
> 
> 时间：2012-08-14T21:20:58.043
> 
> 标签：hadoop, mapreduce, hdfs

我目前正在使用 Hadoop。我想知道是否可以获得有关给定作业的地图任务是从自己的节点还是从其他节点读取数据的信息。我知道 HDFS 分布在所有节点之间，但是是否有任何计数器/指标可以说明，对于给定的作业和给定的 map 任务，从 amp 任务正在运行的同一节点读取了多少数据，以及多少数据是通过网络读取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:19:58.737

Hadoop 没有计数器来告诉您本地读取了多少数据以及通过网络读取了多少数据。

您唯一能做的就是组合不同的标准计数器，并在此基础上获得本地和网络读取数据的近似值。

*   DATA_LOCAL_MAPS：作业中映射任务的数量，使用本地数据（机器本地）。

*   RACK_LOCAL_MAPS：与输入数据在同一机架中的节点上运行的映射任务的数量。

*   OTHER_LOCAL_MAPS：在与其输入数据所在的机架不同的机架中的节点上运行的任务数。

*   MAP_INPUT_BYTES：告诉您所有地图任务（整个作业）总共消耗了多少数据

*（您应该检查您的 hadoop 分配的计数器的确切名称）

考虑到**EACH** map 处理**一个**输入拆分并且默认输入拆分大致相等，您可以使用以下公式找到本地处理的数据总量：

```
 DATA_LOCAL_MAPS * MAP_INPUT_BYTES/(DATA_LOCAL_MAPS + RACK_LOCAL_MAPS +
                                             OTHER_LOCAL_MAPS) 
```

乘法的第二项给出每个映射任务的输入字节数

# objective-c - NSString 总是返回 nil

> ID：11960929
> 
> 赞同：0
> 
> 时间：2012-08-14T21:21:07.573
> 
> 标签：objective-c, ios, nsstring

有人可以帮我弄清楚我可能会错过什么吗？

我收到了这个错误，看起来很简单，但我不知道它来自哪里！有几篇关于它的帖子。但似乎没有一个相关。我所做的只是，

设置属性，

```
@property (weak, nonatomic) NSString * rate; 
```

在我看来DidLoad，

```
self.rate = @"bananas";
NSLog(@"self.rate %@",self.rate); 
```

我不断进入控制台-> self.rate (null)

非常感谢任何帮助谢谢！

努诺

ps 我还尝试设置一个字符串指针并尝试分配]init]（但我真的没有看到任何原因导致问题出现，事实并非如此）......到目前为止没有成功。

此外，属性是@synthesized

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:46:10.557

就像@Guven 说的那样，当我不应该**使用@synthesize 时，我真的在设置一个setter 。**

我没有意识到我在代码中有一个“旧”方法 setRate。

谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:22:33.203

使您的财产成为强大的财产

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:30:22.403

**可能的解决方案：**

1.（只要没有其他东西有指向它的强指针）

```
@property (strong, nonatomic) NSString * rate ;        //or use (copy, nonatomic), depends.. 
```

*2.你忘了

```
@synthesize rate = _rate; 
```

3.self 为零

*编辑：*

4.setter/getter 越野车

*修正 2.，正如 Rob 在下面的评论中指出的那样：

> “从 Xcode 4.4 开始，@synthesize 是可选的。在早期版本中，这将是一个编译错误”

# c++ - 基类构造五次

> ID：11960931
> 
> 赞同：-2
> 
> 时间：2012-08-14T21:21:22.007
> 
> 标签：c++, class, constructor

这个“基”类为 b 、 medium1 和 medium2 构造。当我使用“顶级”类时，它的构造量增加了 2 倍。共构建 5 次（写入屏幕 5 次）。

**问题：** 我可以在“基”类中更改什么以使其只构造一次。？

```
#include "stdafx.h"
#include<stdlib.h> 

class base
{
public:
    base(){x=5;printf(" %i ",x);}
    int x;
}b;

class medium1:public base{}m1;

class medium2:public base{}m2;

class top:public medium1,medium2{};

int main() {
    top ten;
    getchar();
    return 0;
} 
```

虚拟基类的陷阱是什么？感谢您回答我的琐碎问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:26:09.910

不可能`base`只构造一次而不是全部五个原始构造。您的程序中有*四个*包含子对象的完整对象`base`。这立即意味着无论你做什么，你都会有至少*四个* `base`结构。

此外，其他答案中提到的使用虚拟继承的建议实际上需要对*其他*类进行更改，而不是对`base`类进行更改。同时，您的问题坚持要对`base`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T21:23:28.760

当你创建一个类时，它只会构造`base`一次。`top`

```
class medium1:virtual public base{};
class medium2:virtual public base{}; 
```

其余的来自您创建对象`b`和. 您不能真正阻止调用基类的析构函数，因为**这就是您告诉编译器要做的事情**。如果您不想创建对象，请不要从中派生。`m1``m2`**`base`**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:23:29.557

您可以将其[设为](http://www.parashift.com/c++-faq/virtual-inheritance-ctors.html)[`virtual`基类](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)，但这会带来[一大堆](http://www.parashift.com/c++-faq/virtual-inheritance-abcs.html) [陷阱](http://www.gotw.ca/publications/mill07.htm)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T21:23:48.683

`base`如果您使用虚拟继承，您可以拥有一个类对象：

```
class medium1:virtual public base{}m1;

class medium2: virtual public base{}m2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T21:34:32.553

这让你只需要两个电话，但我认为既然你有双重继承，那是你能得到的最好的。如果您消除了定义中的变量`b`，`base`那么您就在那里。 [http://codepad.org/pn016D7b](http://codepad.org/pn016D7b)

```
#include<stdlib.h> 

class base
{
public:
    base(){x=5;printf(" %i ",x);}
    int x;
}b;

class medium1:virtual public base 
{
public:
    medium1():base(){};
};

class medium2:virtual public base{};

class top:virtual public medium1,medium2{};

int main() {
    top ten;
    getchar();
    return 0;
} 
```**

# oracle11g - 使用 Oracle 11g 中的动态查询，大括号 { } 是否可以保护我免受 sql 注入？

> ID：11960940
> 
> 赞同：1
> 
> 时间：2012-08-14T21:21:52.817
> 
> 标签：oracle11g, sql-injection

读这个：

[https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

在动态 sql 部分，它有多种，例如：

```
So, if you had an existing Dynamic query being generated in your code that was going to Oracle that looked like this:
 String query = "SELECT user_id FROM user_data WHERE user_name = '" + req.getParameter("userID") 
 + "' and user_password = '" + req.getParameter("pwd") +"'";
 try {
     Statement statement = connection.createStatement( … );
     ResultSet results = statement.executeQuery( query );
 }
You would rewrite the first line to look like this:
Codec ORACLE_CODEC = new OracleCodec();
 String query = "SELECT user_id FROM user_data WHERE user_name = '" + 
   ESAPI.encoder().encodeForSQL( ORACLE_CODEC, req.getParameter("userID")) + "' and user_password = '"
   + ESAPI.encoder().encodeForSQL( ORACLE_CODEC, req.getParameter("pwd")) +"'";
And it would now be safe from SQL injection, regardless of the input supplied. 
```

但后者是说：

```
Oracle 10g escaping

An alternative for Oracle 10g and later is to place { and } around the string to escape the entire string. However, you have to be careful that there isn't a } character already in the string. You must search for these and if there is one, then you must replace it with }}. Otherwise that character will end the escaping early, and may introduce a vulnerability. 
```

我没有看到示例，但这是否意味着我可以使用大括号而不是`Codec ORACLE_CODEC`....etc.？有人有例子吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:37:02.710

不，这不是注射预防技术。100% 确保您不会受到注入攻击的唯一方法是对需要插入查询的所有用户输入使用准备好的语句和绑定参数。比这还少，你几乎只是在掷骰子。

# javascript - 如何使用 jQuery 验证插件忽略输入字段的“远程”验证

> ID：11960941
> 
> 赞同：2
> 
> 时间：2012-08-14T21:21:54.687
> 
> 标签：javascript, jquery

我试图忽略使用 jQuery 验证插件的表单的“远程”验证属性，因此我可以在提交表单而不是字段的 onBlur 时启用它。我有以下代码，但出现语法错误。我该如何解决？

```
$(document).ready(function() 
{ 
        $("#checkNameForm").validate( {
        "onkeyup":false,
        "rules":{
            "Name":{
                "required":true,
                "minlength":5,
                "maxlength":10,
                "remote":"\/abc\/def\/checkname"
            }
        },
        "messages":{
            "Name":{
                "required":"Please enter a Name.",
                "remote":"Name is already in use."
            }
        },
        "ignore":"input[
            remote
        ]   ",
        success:function(label) {
             label.addClass("success"); 
        },
        "validClass":"success"
    } ); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:32:36.003

在忽略选项内部有换行符是问题所在：

[jsFiddle](http://jsfiddle.net/styson/LMP5W/2)

```
$(document).ready(function() 
{ 
        $("#checkNameForm").validate( {
        onkeyup: false,
        rules: {
            "Name": {
                "required":true,
                "minlength":5,
                "maxlength":10,
                "remote":"\/abc\/def\/checkname"
            }
        },
        messages: {
            "Name": {
                "required":"Please enter a Name.",
                "remote":"Name is already in use."
            }
        },
        ignore: "input[remote]",
        success: function(label) {
            label.addClass("success"); 
        },
        "validClass":"success"
    } ); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T05:24:48.387

您可以使用这种更简单的方法从元素中删除远程验证： `$('#myfield').rules('remove', 'remote');`

# berkeley-db - java.lang.UnsatisfiedLinkError：java.library.path 中没有 db_java-4.2

> ID：11960942
> 
> 赞同：1
> 
> 时间：2012-08-14T21:21:56.950
> 
> 标签：berkeley-db, loadlibrary, unsatisfiedlinkerror

我正在尝试从 java 代码访问 Berkeley DB 数据库文件（比如 Test.db），然后想从中读取所有对。我正在使用`com.sleepycat.db.*`and`com.sleepycat.bdb.*`包（*注意：不是 Oracle Berkeley DB JE*）来完成这项任务。对于实现，我完全按照[BerkeleyDB Java API 教程中的描述进行了操作](http://www-rohan.sdsu.edu/doc/BerkeleyDB/ref/bdb_tut/intro.html)

所以，当我从 Eclipse 运行这个项目时，我得到了这个错误

`Exception in thread "main" java.lang.UnsatisfiedLinkError: no db_java-4.2 in java.library.path`

并且从堆栈跟踪中，此异常的来源发生在这一行

```
env = new DbEnv(0); 
```

我试图从java命令设置它

`$java -D<name>=<value>`

但它仍然没有用。

我的目标是**将这个项目导出到一个 jar 文件中，并用它来读取任何地方的 BDB**。任何知道如何摆脱这种情况的人，我感谢您的帮助。如果我也可以重定向到任何工作教程以从 Java 代码访问 Berkeley DB，那就太好了。谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:26:12.070

解决方案：经过大量工作后，我发现我正在开发的 Sleepycat API 使用的是通过 JNI 用 C/C++ 编写的本机库。安装在我的 PC 上的 Berkeley DB 没有共享对象文件 db_java-4.2（准确地说，文件名为 libdb_java-4.2），这意味着该 BDB 未针对 java API 进行配置。

因此，解决方案是通过启用 java 配置再次从头开始安装 BDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T21:55:18.680

我有同样的问题。

就像 kk_Pulla 提到的， sleepycat API 使用通过 Java Native Interface 用 C/C++ 编写的本地库。因此，进行 Sleepycat API 调用意味着 java 代码最终将调用已编译的 C/C++ 代码。

如果您收到“java.lang.UnsatisfiedLinkError: no db_java-4.2 in java.library.path”错误，那么至少在我的情况下，您可能没有在项目中包含相关的本地库。

我会描述我为解决这个问题所做的工作。首先让我描述一下我的环境。

1.  Linux 机器上的 IntelliJ maven Java 项目。
2.  构建 Berkeley DB 版本 18.1.40。
3.  Berkeley 构建在配置阶段包含了 --enable-java 开关。
4.  我通过 Intellij 菜单文件 > 项目结构将 db.jar（在 build_unix 目录中找到）作为模块依赖项包含在内。我在左侧窗格的项目设置下选择了模块，然后在依赖项选项卡下我添加了 db.jar 文件作为依赖项。

这是我遇到 UnsatisfiedLinkError 之前项目的状态。为了解决这个问题，我将本机库（位于 unix_build/.libs 目录中）添加到项目中。你可以通过选择文件菜单>然后项目结构来做到这一点。在项目设置下的左窗格中选择库，然后单击右窗格上的 + 号以添加本机库的目录。

这解决了我的问题。

# mysql - MySQL - 每个值都在哪里

> ID：11960945
> 
> 赞同：1
> 
> 时间：2012-08-14T21:22:12.693
> 
> 标签：mysql

以下查询选择输入“完成”的所有工作单元（第 7 行的子查询）。这很好用......当只有一个输入时。我该如何更改它，以便它要求*每个*输入都在子查询返回的集合中，而不仅仅是要存在的输入之一？

```
SELECT workunits.ID 
FROM workunits 
LEFT JOIN workunitInputs ON workunits.ID = workunitInputs.workunitID 
WHERE workunits.ID NOT IN (SELECT workunitID FROM jobworkunitassoc) 
AND ( 
    workunitInputs.inputID IN ( 
        SELECT workunitOutputs.outputID 
        FROM workunitOutputs 
        LEFT JOIN workunits ON workunitOutputs.workunitID = workunits.ID 
        LEFT JOIN jobworkunitassoc ON workunits.ID = jobworkunitassoc.workunitID 
        LEFT JOIN jobs ON jobworkunitassoc.jobID = jobs.ID 
        WHERE jobs.done = 1 
    ) 
    OR workunitInputs.inputID IS NULL 
) 
GROUP BY workunits.ID 
```

谢谢，伊斯特万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:47:53.393

将该条款更改为：

```
AND ( 
    workunitInputs.inputID NOT IN ( 
        SELECT workunitOutputs.outputID 
        FROM workunitOutputs 
        LEFT JOIN workunits ON workunitOutputs.workunitID = workunits.ID 
        LEFT JOIN jobworkunitassoc ON workunits.ID = jobworkunitassoc.workunitID 
        LEFT JOIN jobs ON jobworkunitassoc.jobID = jobs.ID 
        WHERE jobs.done != 1 
    ) 
```

这是基于逻辑重言式：Y 中的所有 X === !Y 中没有 X

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:13:35.917

这个查询对我有用，虽然它可能不是最好的解决方案：http: [//pastebin.com/g9qBjQGU](http://pastebin.com/g9qBjQGU)

# asp.net - 将 HTML（或经典 ASP）转换为 ASP.NET

> ID：11960960
> 
> 赞同：0
> 
> 时间：2012-08-14T21:23:31.100
> 
> 标签：asp.net, html, sql-server-2008

我想知道是否有办法将 HTML 模板转换为 ASP.NET？我正在尝试将包含 Javascript 和 CSS 文件的 HTML 编写的网站模板转换为 ASP.NET，以便我可以连接到 SQL Server 数据库。

我对 ASP.NET 的编码经验有限，因此不胜感激！

我也可以访问 ASP 模板，但不幸的是它不是 ASP.net。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:37:58.453

恐怕您必须为此熟悉 .NET，但是我喜欢许多其他人在过去必须这样做……尽管现在您有许多其他因素，例如您是否要迁移到基于 Webforms 的 ASP.NET 应用程序或 ASP.NET MVC 应用程序。

您可以将 HTML 内容放入 .aspx 页面，但是您将不得不学习 .NET 的基础知识，可能还需要学习 ADO.NET、LINQ to SQL、nHibernate 等内容才能连接到数据库。

这可能会有所帮助，但它已经很老了：[http ://www.asp.net/web-forms/videos/migrating/migrating-from-classic-asp-to-aspnet](http://www.asp.net/web-forms/videos/migrating/migrating-from-classic-asp-to-aspnet)

Microsoft 确实有很多信息可以帮助您进行这种过渡... [http://www.asp.net/get-started](http://www.asp.net/get-started)

这不是我意识到的最佳答案，但您将不得不采取一些学习曲线，谁知道呢，您最终可能会喜欢 .NET、C#、VB*等……*相信我，它不会是这么难！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:32:01.983

没有简单的方法来做你所要求的。您可以将其保存为 .aspx 页面而不是 .html，但如果不进行编码调整，您无法神奇地将其连接到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:35:05.560

只需创建一个新的 aspx 页面并将内容复制到 aspx 文件即可。在 aspx 页面中保留原始 Html 标签应该不会遇到任何问题，但是如果您需要对 cs 文件执行某种逻辑，那么您可能需要将 Html 标签更改为 asp 标签。这应该很容易。

要将其连接到数据库，您可能想从 cs 文件连接它。

# java - 是什么导致 JSessionID 随每个请求而变化？

> ID：11960961
> 
> 赞同：6
> 
> 时间：2012-08-14T21:23:36.000
> 
> 标签：java, jsf, jakarta-ee, glassfish, ejb

我有一个在 Glassfish 3.1.2 上运行的 JSF 2、EJB 3.1、CDI 应用程序。我注意到 jsession id 总是在变化：对于我发送到服务器的每个请求，重新调整的页面都包含带有新 jsession id 的 links ()，即使请求已经包含 jsession id

我不认为这是正常的，但我不知道是什么导致了这种行为。

我已经配置：

```
<session-config>
    <session-properties>
        <property name="enableCookies" value="false" />
        <property name="enableURLRewriting" value="true" />
    </session-properties>
</session-config> 
```

但其他一切都是默认的，我没有任何奇怪的配置或自定义 jsession 生成的东西。-- 有谁知道什么可以触发 Glassfish/JSF 更改 sessionId？

例子：

该应用程序有一个显示在每个页面上的菜单。jsf 页面包含以下内容：

`<h:link outcome="/search/search">search</h:link>`

现在我描述请求和响应。请求是简单的 HTTP GET 请求。响应总是包含完整的页面。不涉及阿贾克斯。

1.  经过一些基本身份验证。

2.  用户进入起始页面，它包含一个菜单，其中包含一个指向搜索页面的链接，并且该链接具有 jsession id（所有其他链接具有相同的 jsessionId） - 详细信息；

    *   要求：`http://localhost:8080/myApp/start/start.xhtml`
    *   回复内容：`<a href="/myApp/search/search.xhtml;jsessionid=8df431e2275052cf2348a4cb793e">search</a>`
3.  用户点击该链接；返回的页面再次包含菜单，但现在所有链接都有另一个 sessionjd - 详细信息：

    *   要求`http://localhost:8080/myApp/suche/teilnehmer_suche.xhtml;jsessionid=8df431e2275052cf2348a4cb793e`
    *   回复内容：`<a href="/myApp/search/search.xhtml;jsessionid=8ebeefb6df144a2fee97d87a51e6">...`
4.  用户再次单击该链接：jsession id 再次更改

    *   要求`http://localhost:8080/myApp/suche/teilnehmer_suche.xhtml;jsessionid=8df431e2275052cf2348a4cb793e`
    *   回复内容：`<a href="/myApp/search/search.xhtml;jsessionid=8f4021c2fa628ce3b9c12c545cc4">...`

我可以一次又一次地单击该链接（以及所有其他链接），但 jsession id 每次都更改。

* * *

更奇怪的是：在将配置更改为使用 cookie 而不是 urlRewriting 之后，我发现即使对于资源文件也会发生这种行为：

客户端请求 start.xml 没有 jsession id，服务器`Set-Cookie JSESSIONID=a68d3d9260d7ea5fd36a7713eb80; Path=/myapp; HttpOnly`在响应头中返回。

之后客户端请求css页面，`Cookie JSESSIONID=a68d3d9260d7ea5fd36a7713eb80`服务器发回css文件，但响应头包含一个新的会话ID：`Set-Cookie JSESSIONID=a68d550e5093e246b01ba4220cd3; Path=/myapp; HttpOnly`

# java - 使用 Netbean 完成代码

> ID：11960965
> 
> 赞同：0
> 
> 时间：2012-08-14T21:23:48.960
> 
> 标签：java, netbeans

当我按*CTRL-Space*完成输入函数时，有一个关于它刚刚填写的方法的参数的建议。是否有可以接受该建议的击键。

例如，如果我键入*setD*然后*按 Ctrl-Space*，它将填充*setDeliveryDate()*的设置器，并且*GregorianCalendar*在括号上方显示为黄色。我怎样才能让它也填写*GregorianCalendar*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:29:17.023

使用箭头键选择您想要的自动完成，然后按 Enter...

# php - 带有 While 循环的 PHP 表单仅发送最后一个 $_POST 复选框

> ID：11960966
> 
> 赞同：1
> 
> 时间：2012-08-14T21:23:51.803
> 
> 标签：php, mysql, forms, for-loop, while-loop

我有一个 PHP 表单，它从数据库中提取数据，按行打印出来，然后允许用户检查他们需要哪些项目。保存时，只有最后一个选项被发送到 $_POST。这是我的代码：

```
global $dbc; 

$afQuery = "SELECT fid, facility_name, city, state, country, phone from facilities 
            WHERE uid = '123'
            AND fid != '456'
            GROUP BY fid;";
        $afResult = $dbc->query($afQuery,__FILE__,__LINE__);
        $i = 0;
        while ($affiliated = $dbc->fetch($afResult)) {      
            ++$i;
            echo '<div class="action" style="float:left;">';
                echo '<input type="checkbox" name="affiliated[afid]" id="afid" value="'.$affiliated->fid.'">';
            echo '</div>';
            echo '<div class="facility-name">';
                echo '<input type="hidden" id="facility-name '.$i.'" name="affiliated[facility_name]" value="'.$affiliated->facility_name.'" />';
                echo $affiliated->facility_name;
            echo '</div>';
            echo '<div class="facility-location">';
                echo '<input type="hidden" id="facility-location '.$i.'" name="affiliated[facility_location]" value="'.$affiliates->city. ', ' . $affiliated->state . ' ' . $affiliated->country.'" />';
                echo $affiliated->city. ', ' . $affiliated->state . ' ' . $affiliated->country;
            echo '</div>';
            echo '<div class="facility-phone">';
                echo '<input type="hidden" id="facility-phone '.$i.'" name="affiliated[facility_phone]" value="'.$affiliated->phone.'" />';
                echo $affiliated->phone;
            echo '</div>';
            echo '<div class="clear"></div>';
            echo '<input type="hidden" id="update" name="update" value="' . $affiliated->fid . '" />';
        } 
```

`$dbc->fetch`相当于`mysql_fetch_assoc`。

我正在尝试将这些值保存到`$affiliated`数组中，但它应该为每个选定的项目提供子数组，因此我可以将数据库中的每个值存储在单独的行中。我在哪里想念它？我在while循环中尝试了一个foreach，但我没有成功。

谢谢你的帮助！

*** 更新 ***

我遵循@Pinetree 的建议并添加`$i`如下：

`<input type="checkbox" name="affiliated[afid]['.$i.']" id="afid" value="'.$affiliated->fid.'">`

但是，现在我收到以下输出：

```
Array
(
    [afid] => Array
        (
            [1] => 5289
            [2] => 5290
            [3] => 5291
            [4] => 5292
        )

    [facility_name] => Array
        (
            [1] => Test Company
            [2] => Test Company 2
            [3] => Test Company 3
            [4] => Test Company 4
        )

    [facility_location] => Array
        (
            [1] => Address, State US
            [2] => Address, State US
            [3] => Address, State US
            [4] => Address, State US
        )

    [facility_phone] => Array
        (
            [1] => 555-555-5555
            [2] => 555-555-5555
            [3] => 555-555-5555
            [4] => 555-555-555
        )

) 
```

我需要这个看起来像这样，所以我可以将每个完整的行插入到数据库中的表中：

```
Array
    (
        [0] => Array
            (
                [afid] => 5289
                [facility_name] => Test Company
                [facility_location] => Address, ST USA
                [facility_phone] => 555-555-5555
            )

    [1] => Array
        (
            [afid] => 5290
            [facility_name] => Test Company 1
            [facility_location] => Address, ST USA
            [facility_phone] => 555-555-5555
        )
) 
```

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:34:11.870

如果我理解正确，您将回显多行输入。如果是这种情况，您对每一行的输入使用相同的名称。当帖子发生时，它只会取最后一个值。您可以为每个输入名称添加另一个“[]”：

```
'<input name="affiliated[afid][]"/>' 
```

甚至将 $i 放入其中：

```
'<input name="affiliated[afid]['.$i.']"/>' 
```

在帖子中，您将拥有：

```
affiliated
    afid
        1: val
        2: val
        3: val
        ...
    facility_name
        1: val
        2: val
        3: val
        ...
    ... 
```

整数对应于原始形式的行。所以 afid[1] 和 facility_name[1] 来自表格（和表格）中的同一行

编辑：要让数组恢复到它们在表单中的格式：

```
$affiliated = array();
foreach($_POST['affiliated']['afid'] as $k => $v) {
    $affiliated[] = array(
        'afid' => $v,
        'facility_name' => $_POST['affiliated']['facility_name'][$k] // same key here
         // other fields
    );
} 
```

**重要编辑**：

由于您有复选框，因此请务必在输入名称中显式设置索引：

```
'<input name="affiliated[afid]['.$i.']"/>' 
```

如果未选中复选框，则不会发布复选框，并且文本字段和类似字段会发布，因此您可能会遇到一种情况，例如，第二个 POSTED 复选框（如果从 0 开始，则索引 1）将映射到 $_POST 中的第二行，但复选框实际上位于表单本身的第三或第四行，并且之前的复选框未发布

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:27:09.973

`$affiliated`不是一个数组，它是一个对象，并且您每次通过循环都（重新）设置它：

```
while ($affiliated = $dbc->fetch($afResult)){...} 
```

此外，`input`通常 DOM 元素 ID 不能包含您正在生成的空格：

```
echo '<input type="hidden" id="facility-name '.$i.'" 
```

# ruby - 机械化帖子，提交 2 次

> ID：11960967
> 
> 赞同：1
> 
> 时间：2012-08-14T21:23:54.280
> 
> 标签：ruby, post, mechanize

我对机械化很陌生……而且我还在学习。

我想知道是否有人可以帮助我解决我遇到的这个问题。

我正在通过 Firefox 使用 Web 开发人员工具包来找出表格，但我在执行此操作时遇到了一些麻烦。

我试图发布提交的网站有 2 个提交按钮。整个页面主要是 javascript 和 jquery 代码，所以为了解决这个混乱，我发现我需要像这样直接将信息发布到页面......

```
 @page = Mechanize.new{|agent| agent.user_agent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:9.0a2) Gecko/20111101 Firefox/9.0a2'} 
 @page.post("http://www.somepage.do",'name1' => '1','name2' => '2', 'name3' => '3') 
```

页面上有多个按钮显示为图像文件，没有可用的直接链接：

```
 <input id="btn1" type="image" title="Search" src="images/img/common/btn.gif" name="button1">
   <input id="btn2" type="image" title="Search" src="images/img/common/btn.gif" name="button2"> 
```

当我从网站上拉出表格时……我明白了……

```
ID='btn1', name = 'btn1', type ='image', 'value' = '' 
```

我知道我是否有直接链接...我应该发布类似...

```
 @page.post("http://www.somepage.do/button2.html", 'name1' => '1','name2' => '2', 'name3' => '3') 
```

但是由于大部分页面都是用 javascript 完成的，所以很难找到东西。

欢迎任何帮助或建议。提前致谢。

**编辑：**

好的...我刚刚发现了一些事情...当我

```
@page.post("http://www.somepage.do",'name1' => '1','name2' => '2', 'name3' => '3') 
```

由于某些奇怪的原因，“name1”和“name2”没有填充到表单中。
我直接从网站上获取了这些名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:30:33.420

既然您提到您使用的是 Firefox，请安装[HTTPFox](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)插件并使用它来分析当您单击提交按钮时提交按钮发布到 Web 服务器的内容。这样，您可以通过使用值填充表单甚至向表单添加更多输入字段（如果 javascript 在提交之前添加任何额外字段）来轻松模仿 Javascript 正在执行的操作。我已经在提交时进行大量 javascript 表单处理的网站上成功使用了这种技术。

# e-commerce - 如何使用 Shopify 和 Liquid 在我的主页上显示我的所有产品？

> ID：11960968
> 
> 赞同：2
> 
> 时间：2012-08-14T21:23:55.327
> 
> 标签：e-commerce, liquid, shopify, liquid-layout

我可以在我的 index.liquid 页面（主页）上使用一个简单的 Liquid 标记片段来显示我拥有的所有产品，并使每个图像成为相应产品信息页面的链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:49:26.763

大多数主题在其主页上显示一个集合。使用该功能，不要添加代码。

要使您的主页集合包含商店中的所有产品，请将其设置为具有诸如产品价格 > 0 等条件的智能集合。

如果您的商店中有超过 50 种产品，您可以通过将 Liquid 标签添加到您的 templates/index.liquid 文件来为您的主页添加分页。有关如何在 Shopify 主题中完成分页的灵感，请查看您的 templates/collection.liquid 文件。

您的主题可能对主页上显示的主页集合中的产品数量施加了一些限制。如果是这种情况，您会在 templates/index.liquid 文件中找到如下所示的代码：

```
{% for product in collections.frontpage.products limit: 12 %} 
```

删除限制属性。

# sharepoint-2010 - 部署步骤中发生错误添加解决方案

> ID：11960971
> 
> 赞同：1
> 
> 时间：2012-08-14T21:24:19.180
> 
> 标签：sharepoint-2010, sandbox-solution

我正在开发沙盒解决方案 SharePoint 2010（SharePoint Online 项目）。

我得到的错误是

```
Error   19  Error occurred in deployment step 'Add Solution': This solution contains invalid markup or elements that cannot be deployed as part of a sandboxed solution. Solution manifest for solution 'c353c02e-f7b0-4c58-b7c6-066adf1d7e0c' failed validation, file manifest.xml, line 3, character 4: The element 'Solution' in namespace 'http://schemas.microsoft.com/sharepoint/' has invalid child element 'CodeAccessSecurity' in namespace 'http://schemas.microsoft.com/sharepoint/'. List of possible elements expected: 'FeatureManifests, Assemblies, ActivationDependencies' in namespace 'http://schemas.microsoft.com/sharepoint/'.
        0   0   Starwood_Forms 
```

我在 Visual Studio 中的清单文件（Package.package）看起来像这样

```
<Solution xmlns="http://schemas.microsoft.com/sharepoint/" SolutionId="c353c02e-f7b0-4c58-b7c6-066adf1d7e0c" SharePointProductVersion="14.0">
  <CodeAccessSecurity>
    <PolicyItem>
      <PermissionSet class="NamedPermissionSet" version="1" Description="Permission set for ProjectNameHere.">
        <IPermission class="AspNetHostingPermission" version="1" Level="Minimal" />
        <IPermission class="SecurityPermission" version="1" Flags="Execution,ControlPrincipal,ControlAppDomain,ControlDomainPolicy,ControlEvidence,ControlThread" />
        <IPermission class="Microsoft.SharePoint.Security.SharePointPermission, Microsoft.SharePoint.Security, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" version="1" ObjectModel="True" />
        <IPermission class="System.Security.Permissions.EnvironmentPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1" Read="UserName" />
        <IPermission class="System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1" Read="$AppDir$" Write="$AppDir$" Append="$AppDir$" PathDiscovery="$AppDir$" />
      </PermissionSet>
      <Assemblies>
        <Assembly Name="ProjectNameHere" />
      </Assemblies>
    </PolicyItem>
  </CodeAccessSecurity>
  <Assemblies>
    <Assembly Location="ProjectNameHere.dll" DeploymentTarget="GlobalAssemblyCache">
      <SafeControls>
        <SafeControl Assembly="ProjectNameHere, Version=1.0.0.0, Culture=neutral, PublicKeyToken=7e39ecec9e69afb4" Namespace="ProjectNameHereWebPart" TypeName="*" />
      </SafeControls>
    </Assembly>
  </Assemblies>
  <FeatureManifests>
    <FeatureManifest Location="ProjectNameHere_Feature2\Feature.xml" />
  </FeatureManifests>
</Solution> 
```

如果我从“解决方案”元素中删除“CodeAccessSecurity”标签，则解决方案将从 VS 部署和激活，没有任何问题。我无法从网络激活解决方案，我试过了。

该解决方案包含一个 Web 部件，它使用 LINQ 从其他列表中获取数据 + 在列表中创建一个新的列表项。

我在“解决方案”中添加了“CodeAccessSecurity”标签，因为没有它我得到一个错误

```
The type initializer for 'Microsoft.SharePoint.Linq.Resources' threw an exception. 
Error Source: Microsoft.SharePoint.Linq 
Stack Trace:    at Microsoft.SharePoint.Linq.Resources.GetString(String resourceId, Object[] args)
   at Microsoft.SharePoint.Linq.EntityTracker.ProcessAssociatedEntity(NewEntityRef newEref, Stack`1 visited, PropertyMap pm, Object lookupEntity)
   at Microsoft.SharePoint.Linq.EntityTracker.ProcessAssociatedEntities(NewEntityRef newEref, ITrackOriginalValues origVals, Stack`1 visited)
   at Microsoft.SharePoint.Linq.EntityTracker.SubmitNewEntity(NewEntityRef newEref, Stack`1 visited)
   at Microsoft.SharePoint.Linq.EntityTracker.SubmitNewEntities()
   at Microsoft.SharePoint.Linq.EntityTracker.SubmitChanges(ConflictMode failureMode, Boolean systemUpdate)
   at Microsoft.SharePoint.Linq.DataContext.SubmitChanges(ConflictMode failureMode, Boolean systemUpdate)
   at Microsoft.SharePoint.Linq.DataContext.SubmitChanges()
   at Starwood.Forms.TaskForceNeedWebPart.TaskForceNeedWebPart.btnSubmit_Submit(Object sender, EventArgs e) 
Target Site: System.String GetString(System.String, System.Object[]) 
Help Link:  
Data Begin Information 

Data End Information 

Writing inner exception details.

Error Message: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
Error Source: mscorlib 
Stack Trace:    at System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet)
   at System.Security.CodeAccessPermission.Demand()
   at System.Reflection.Assembly.VerifyCodeBaseDiscovery(String codeBase)
   at System.Reflection.Assembly.GetName(Boolean copiedName)
   at Microsoft.SharePoint.Linq.Resources.GetResourceManager()
   at Microsoft.SharePoint.Linq.Resources..cctor() 
Target Site: Void Check(System.Object, System.Threading.StackCrawlMark ByRef, Boolean) 
Help Link:  
Data Begin Information 

Data End Information 
```

当代码尝试创建新列表项时，我收到上述错误。

我正在使用沙盒可视化 Web 部件。

如果我从“解决方案”中删除“CodeAccessSecurity”子元素但我无法创建新的列表项，则该解决方案被激活，没有任何问题。我正在使用 LINQ to SharePoint 创建一个新的列表项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:21:12.490

如果我不使用数据上下文来创建新的列表项，那么以下代码可以完美运行

```
 SPList list = objWeb.Lists.TryGetList("ListName");
                        SPListItem newListItem = list.AddItem();
                        newListItem["Department"] = new SPFieldLookupValue(int.Parse(ddlDepartment.SelectedValue), ddlDepartment.SelectedItem.Text);

                        newListItem.Update(); 
```

如果您有任何其他想法，请告诉我

# php - php：发送 10% 的流量

> ID：11960972
> 
> 赞同：0
> 
> 时间：2012-08-14T21:24:26.043
> 
> 标签：php, random, numbers, web-traffic

我的代码：

```
$random_number = mt_rand(1,100);

if ($random_number <= 10){
    header('Location: http://www.site1.com');
} else {
    header('Location: http://www.site2.com');
}

exit; 
```

不用说，如果你有很多流量，这似乎很有效，但是当你每天只有 1000 个独立用户时，这个百分比会徘徊在 35% 到 40% 左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:30:02.200

要更准确地分配流量，请使用负载均衡器或在代码中增加计数器。

[这](http://www.suspekt.org/2008/08/17/mt_srand-and-not-so-random-numbers/)是一篇关于为什么`mt_rand`不那么随机的好文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:42:02.970

如果你想做一些 A/B 测试，[有一个比盲目随机选择更好的方法，](http://www.jmduke.net/blog/bandit)而且它并不是真的更复杂。

# kinect - `.oni` 样本/测试文件资源

> ID：11960973
> 
> 赞同：5
> 
> 时间：2012-08-14T21:24:32.687
> 
> 标签：kinect, openni, ofxkinect

是否有任何在线示例`.oni`文件资源可用作使用 OpenNI 框架和其他自然交互设备的应用程序的测试数据？

例如，如果有一个资源有一个、两个、十个人，那就太好了。如果没有，这似乎很奇怪或很遗憾，除非开发人员喜欢在他们的 Kinect 前反复跳舞。

我[从匹兹堡大学找到了两个，](http://www.cs.pitt.edu/~chang/1635/proj11/)我目前正在研究 OpenNi 源代码/测试。

# ruby-on-rails - 如何在 Rails 3 中创建动态根？

> ID：11960977
> 
> 赞同：6
> 
> 时间：2012-08-14T21:24:41.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我的 webapp 中有管理员和普通用户。我想让他们的根（/）根据他们是谁而不同。可以从许多不同的页面访问根目录，因此如果我可以在 routes.rb 文件中实现这一点会容易得多。这是我当前的文件。

```
ProjectManager::Application.routes.draw do
  root :to => "projects#index"
end 
```

有人可以将我链接到一个可以告诉我前进方向的例子吗？有没有办法将逻辑放入路由文件中？感谢所有的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-07T11:10:53.260

您可以为根路由创建控制器。

```
class RoutesController < ActionController::Base
  before_filter :authenticate_user!

  def root
    root_p = case current_user.role
      when 'admin'
        SOME_ADMIN_PATH
      when 'manager'
        SOME_MANAGER_PATH
      else
        SOME_DEFAULT_PATH
      end

    redirect_to root_p
  end
end 
```

在您的 routes.rb 中：

```
 root 'routes#root' 
```

PS 示例需要使用[Devise](https://github.com/plataformatec/devise)，但您可以根据需要对其进行自定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T16:34:52.537

有几个不同的选项：

**1\. 路由文件中的 lambda（不是很随意）**

[前面解释过](https://stackoverflow.com/a/11963819/1536309)

**2\. 基于前置过滤器在应用程序控制器中重定向（这是最佳选择，但您的管理路由不会位于根目录）**

源[导轨指南 - 路由](http://guides.rubyonrails.org/routing.html#using-root)

您将有两条路线和两个控制器。例如，您可能有一个`HomeController`，然后是一个`AdminController`。每一个都会有一个`index`动作。

你的`config/routes.rb`文件会有

```
namespace :admin do
  root to: "admin#index"
end

root to: "home#index" 
```

命名空间方法为您提供了一个路由，`/admin`并且常规根可以在`'/'`

然后是安全的；在您的管理控制器中添加一个 before_filter 来重定向任何非管理员，并且在您的家庭控制器中，您可以重定向任何管理员用户。

**3.根据用户角色动态改变布局。**

在您的 root 将要访问的同一控制器中，添加一个更改布局的辅助方法。

```
layout :admin_layout_filter
private
def admin_layout_filter
  if admin_user?
    "admin"
  else
    "application"
  end
end

def admin_user?
  current_user.present? && current_user.admin?
end 
```

然后在您的布局文件夹中，添加一个名为`admin.html.erb`

来源：[rails guides - 布局和路由](http://guides.rubyonrails.org/layouts_and_rendering.html#the-layout-option)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:12:36.170

您不能真正动态地更改根，但有几种方法可以伪造它。

您想要的解决方案需要在您的应用程序控制器或“默认”根控制器中进行。最干净/最简单的解决方案就是让您的应用程序控制器重定向到仅针对该页面运行的 before 过滤器中的适当操作。然而，这将导致用户的 url 发生变化，并且他们将不再真正位于根目录。

您的第二个选择是让您指定为根的方法在您正在寻找的任何条件下呈现不同的视图。但是，如果这需要对逻辑进行任何重大更改，而不仅仅是加载单独的视图，那么您最好重定向。

# javascript - 使用 setTimeout 进行 Javascript 重定向

> ID：11960981
> 
> 赞同：4
> 
> 时间：2012-08-14T21:25:14.970
> 
> 标签：javascript, redirect, settimeout

我有一个按钮，我想运行一段脚本然后重定向，但是什么也没发生

我有另一个页面使用类似的代码并且有效。但这一个不起作用

工作代码：

```
<a href="javascript:void(0);" onclick='$.get("features.php",{ cmd: "confirm_order", id: "<?php echo $o_id; ?>", name: "<?php echo $_SESSION['user_name']; ?>" email: "<?php echo $_SESSION['user_email']; ?>"};setTimeout("window.location.href=order.php?order_id=<?php echo $o_id;?>", 100);' class="button"> 
```

已经在不同页面上运行的代码：

```
<a href="javascript:void(0);" onclick='$.get("features.php",{ cmd: "remove", id: "<?php echo $o_id; ?>", prod: "<?php echo $row_prod['prod_id']; ?>" });setTimeout("window.location.href=window.location.href", 100);'> 
```

现在我知道这与我的 setTimeout 有关，我只是不确定我做错了什么。

**编辑**

现在链接：

```
<a href="javascript:void(0);" class="button confirm">Confirm</a> 
```

链接下方的代码：

```
<script type="text/javascript">
$('a .confirm').on('click',function(e){
    $.get("features.php",{
        cmd: "confirm_order",
        id: "<?php echo $o_id; ?>",
        name: "<?php echo $_SESSION['user_name']; ?>",
        email: "<?php echo $_SESSION['user_email']; ?>"
    });
    setTimeout(
        function(){
            window.location = "order.php?order_id=<?php echo $o_id;?>" 
        },
    100);
});
</script> 
```

仍然无法正常工作，并且正在`\"`代码中呈现

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:34:58.680

我同意 Felix Kling 的评论，即您不应该向 html 属性添加那么多代码。我看到您正在使用 jQuery，所以为什么不将其添加到您的 javascript 代码中：

```
$('a .button').on('click',function(e){
    $.get("features.php",{ 
          cmd: "confirm_order",
          id: "<?php echo $o_id; ?>",
          name: "<?php echo $_SESSION['user_name']; ?>", // you were missing this comma 
          email: "<?php echo $_SESSION['user_email']; ?>"
        }).done(function(){
             window.setTimeout( function(){
                 window.location = "order.php?order_id=<?php echo $o_id;?>";
             }, 100 );
        }); // you where missing this parenthesis          

  e.preventDefault(); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:27:30.147

尝试将您的文件名放在两者之间`"`（您可以使用 转义它`\"`）：

```
setTimeout("window.location.href=\"order.php?order_id=<?php echo $o_id;?>\";", 100); 
```

你的文件名是一个字符串。否则 JavaScript 会期望一个变量。这就是为什么`setTimeout("window.location.href=window.location.href;", 100);`有效。

我认为还缺少一个逗号：

```
name: "<?php echo $_SESSION['user_name']; ?>" email: "<?php echo $_SESSION['user_email']; ?>" 
```

应该`name: "<?php echo $_SESSION['user_name']; ?>", email: "<?php echo $_SESSION['user_email']; ?>"`

您还缺少括号。尝试将您的代码更改为：

```
<a href="javascript:void(0);" onclick='$.get("features.php",{ cmd: "confirm_order", id: "<?php echo $o_id; ?>", name: "<?php echo $_SESSION['user_name']; ?>", email: "<?php echo $_SESSION['user_email']; ?>"});setTimeout("window.location.href=\"order.php?order_id=<?php echo $o_id;?>\";", 100);return false;' class="button"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-12T05:32:00.057

试试这个

```
<script type="text/JavaScript">
redirectTime = "1500";
redirectURL = "http://www.natural-environment.com";
function timedRedirect() {
    setTimeout("location.href = redirectURL;",redirectTime);
}
</script> 
```

# iphone - 如何从这个结构中获取数据，JSONKit

> ID：11960982
> 
> 赞同：0
> 
> 时间：2012-08-14T21:25:18.743
> 
> 标签：iphone, ios, jsonkit

以下是位于 json.txt 的内容

```
{
    "data": [
        {
            "keyId": 3,
            "title": "This is a fundraiser 1",
            "budget": "1000",
            "users": {
                "user": [
                    {
                        "id": "3",
                        "first_name": "A1",
                        "last_name": "A11",
                        "is_owner": "false"
                    },
                    {
                        "id": "2",
                        "first_name": "B1",
                        "last_name": "B11",
                        "is_owner": "true"
                    }
                ]
             }      
        }
    ]
} 
```

我正在做什么来获得`idKey`并且是`title``budget`

```
@implementation Account
@synthesize arr;
-(void)parse {
             NSString *filePath    =   [[NSBundle mainBundle] pathForResource:@"fundraiser_json" ofType:@"txt"];
             NSString *jsonString  =   [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

             NSDictionary    *dict =   [jsonString objectFromJSONString];
             self.arr              =   [dict objectForKey:@"data"];

             for ( NSDictionary  *acc in self.arr ) {

                 Account  *account     =   [[Account alloc] init];

                 [account setKeyID:   [acc objectForKey:@"keyId"]];
                 [account setTitle:   [acc objectForKey:@"title"]];
                 [account setBudget:  [acc objectForKey:@"budget"]]; 
             } 
    } 
```

然后我试图访问`users`并获取其中的每个信息，`user`但我不能

有人可以帮助我如何访问和获取这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:48:42.353

访问用户数据的方式与访问帐户数据的方式相同。在 JSON 对象的嵌套结构中，用户是您帐户的属性。该对象是一个字典，它有一个属性“user”，它是一个数组。该数组的每个元素都是一个具有四个属性的对象：id、first_name、last_name 和 is_owner。

所以当你解析你的对象时，它只是一堆嵌套的 NSDictionaries 和 NSArrays。你可以这样做：

```
...
for ( NSDictionary  *acc in self.arr ) {

    NSDictionary *users = (NSDictionary*)[acc objectForKey:@"users"];
    NSArray *userArray = (NSArray*)[users objectForKey:@"user"];

    for (NSDictionary *user in userArray) {
        NSString *id = [user objectForKey:@"id"];
        NSString *firstName = [user objectForKey:@"first_name"];
        // etc.
    }
 } 
```

编辑：我写这个答案是为了按照你在问题中的方式解析你的 JSON，但是如果你可以控制这个结构，你最好（并且更有意义）将 users 属性作为一个数组直接包含用户数据字典。也许这就是您最初打算做的事情，也是您在获取数据时遇到困难的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:45:29.267

当您将字符串转换为 JSON 对象时，它会生成一个树结构的数据类型，其中包含可变字典和数组。NSJSONSerialization[类文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)很好地总结了它。

我想如果你想访问例如列表中第一个用户的名字，你需要编写方法调用：

```
[[[[acc objectForKey:@"users"] objectForKey:@"user"] objectForKey:@"first_name"] objectAtIndex:0]; 
```

我不确定我是否理解您的问题或解决了它。

# objective-c - 当您在带有数组的数组中调用方法 removeAllObjects 时会发生什么？

> ID：11960984
> 
> 赞同：2
> 
> 时间：2012-08-14T21:25:30.057
> 
> 标签：objective-c, arrays

假设我有一个`NSMutableArray *sasquatch`里面有一些数组。

在 ARC 中，如果我调用`[sasquatch removeAllObjects];`这是否会导致 sasquatch 数组中的所有数组都为零？这样 sasquatch 数组的数组中的对象也都被删除并释放等等？

因为我不知道我是否应该这样做：

```
 for (NSArray *animalPlanetSearchingFor in sasquatch){
[animalPlanetSearchingFor removeAllObjects];
} 
```

在我打电话之前`[sasquatch removeAllObjects];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:27:41.663

它不会递归地清空所有数组——它会在删除时减少它们的引用计数。当数组的引用计数为 0 时，将删除所有对象。他们自己清理。

iow,`sasquatch`的子数组没有改变——有一个例外：如果`sasquatch`持有对该子数组的最后一个引用。在这种情况下，元素（大脚野人的子数组）将被释放。

> 在 ARC 中，如果我调用 [sasquatch removeAllObjects]; 这会导致 sasquatch 数组中的所有数组都为零吗？

好吧，它只是向`release`每个元素发送一个更改`count`（等等）。`NSArrays`不能容纳`nil`元素——这是被禁止的。

因此，如果您创建`copy`数组 - 然后将添加对子数组的引用，并且您将延长子数组的生命周期，因为副本现在也持有引用。

> 这样 sasquatch 数组的数组中的对象也都被删除并释放等等？

如果 sasquatch 持有最后一个引用，则子数组将在那时被释放。请记住，自动释放池中也可能存在引用，因此您的销毁顺序没有明确定义——即使在最简单的情况下也是如此。

另一种看待它的方式：`sasquatch`当它的最后一个引用丢失时，其中的所有内容及其子数组（递归）都将被销毁——*只有当*每个元素都是最后一个持有的引用时。

简而言之——`removeAllElements`在这两种情况下都不需要调用来进行清理。

# c++ - 无法按 NULL 字节 (\0) 拆分

> ID：11960985
> 
> 赞同：1
> 
> 时间：2012-08-14T21:25:33.263
> 
> 标签：c++, sockets

我遇到了 C++ 和套接字的问题。我正在尝试拆分（基本上，读取）NULL字节（“\ 0”），因为这是Flash终止的内容。我也在试着写这个。据我所知，拆分工作正常。

我的问题是我无法成功将 PACKET + \0 写入 Flash 客户端，我相信问题出在服务器端。我对 C++ 很陌生，所以我无法调试，而且我在其他地方几乎没有帮助（通常是因为我问过的人不知道），或者我被那些人指出来了。对于此事，我将不胜感激，在此先感谢。

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sstream>
#include <string>
#include <thread>
int intPort = 8080;
int resSocket;
struct sockaddr_in strctAddr;
void log(std::string strText, std::string strType = "INFO"){
        time_t rawtime;
        struct tm * timeinfo;
        char buffer [80];
        time(&rawtime);
        timeinfo = localtime(&rawtime);
        strftime(buffer, 50, "%c",timeinfo);
        std::cout << "[" << buffer << "][" << strType << "] > " << strText << std::endl;
} 
void error(std::string strError){
        log(strError, "SHUTDOWN");
        exit(1);
}
/* initialize() method
 * Starts up server by setting up a socket() and bind()ing to intPort to listen() for clients
*/
int initialize(int intPort){
        std::stringstream objStringStream;
        objStringStream << intPort;
        log("Initializing socket server");
        resSocket = socket(AF_INET, SOCK_STREAM, 0);
        if(resSocket < 0) error("Could not create socket.");
        bzero((char *) &strctAddr, sizeof(strctAddr)); //I'm pretty sure this clears strctAddr or something
        strctAddr.sin_family = AF_INET; //sets socket as AF_INET
        strctAddr.sin_addr.s_addr = INADDR_ANY; //sets socket address to "0"
        strctAddr.sin_port = htons(intPort); //sets socket port to the value of intPort
        setsockopt(resSocket, SOL_SOCKET, SO_REUSEADDR, (struct sockaddr *) &strctAddr, sizeof(strctAddr));
        if(bind(resSocket, (struct sockaddr *) &strctAddr, sizeof(strctAddr)) < 0) //Binds socket
                error("Could not bind");
        listen(resSocket, 5);
        log("Listening for clients on " + objStringStream.str(), "FINE");
        return 1;
}
/* write()'s strData to resSock */
int sendPacket(int resSock, char* strData){
        int intWrite;
        strcat(strData, "\0");
        log("Sending packet: " + std::string(strData), "SEND");
        intWrite = write(resSock, strData, strlen(strData));
        return intWrite;
}
/* handles resSock's data (strData) */
void handleData(int resSock, char* strData){
        char * chData;
        chData = strtok(strData, "\0");
        while(chData != NULL){
                std::string strPacket = chData;
                log("Received data: " + std::string(strPacket), "RECV");
                if(strPacket.compare("<policy-file-request/>") == 0){
                        log("Policy request received");
                        std::string strSend = "<cross-domain-policy><allow-access-from domain='*' to-ports='*'/></cross-domain-policy>";
                        char chSend[6486];
                        strcpy(chSend, strSend.c_str());
                        sendPacket(resSock, chSend);
                }
                chData = strtok(NULL, "\0");
        }
}
/* handles resSock's incoming data and disconnections */
void handleClient(int resSock){
        char chBuffer[6486];
        int intRead;
        while(true){
                bzero(chBuffer, 6486);
                intRead = read(resSock, chBuffer, 6486);
                if(chBuffer == NULL) continue;
                if(intRead <= 0){
                        log("Client disconnected");
                        close(resSock);
                        break;
                } else {
                        handleData(resSock, chBuffer);
                }
        }
}
/* accept()'s incomming connections and spawns a thread for each of them */
void listenToClients(){
        while(true){
                std::stringstream objStringStream;
                struct sockaddr_in clntAddr;
                socklen_t intClients = sizeof(clntAddr);
                int resClient = accept(resSocket, (struct sockaddr *) &clntAddr, &intClients);
                if(resClient < 0) log("Failed to accept client", "ERROR");
                char floatIP[INET_ADDRSTRLEN];
                inet_ntop(AF_INET, &clntAddr.sin_addr, floatIP, sizeof floatIP);    
                objStringStream << floatIP;    
                log("New client connected (IP: " + objStringStream.str() + ")");
                std::thread objThread(handleClient, resClient);
                objThread.detach();
        }
}
int main(){
        initialize(intPort);
        listenToClients();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:35:29.947

1 删除`strcat(strData, "\0");`，它什么都不做。

2 将写入更改为：

```
write(resSock, strData, strlen(strData)+1); 
```

这将包括您正在寻找的 NUL 字符。

3 将签名更改`sendPacket`为`int sendPacket(int resSock, const char* strData)`。

4 将调用更改`sendPacket`为

```
std::string strSend = "<cross-domain-policy><allow-access-from domain='*' to-ports='*'/></cross-domain-policy>";
sendPacket(resSock, strSend.c_str()); 
```

甚至更简单：

```
sendPacket(resSock, "<cross-domain-policy><allow-access-from domain='*' to-ports='*'/></cross-domain-policy>"); 
```

5 最后，重组一切以传递`const std::string&`，并`c_str()`在最后可能的时刻调用。在编写良好的 C++ 程序中几乎没有裸指针的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:31:54.363

该行`strcat(strData, "\0");`不做任何事情，因为`"\0"`它是一个空字符串 - C 风格的字符串总是在第一个停止，`\0`无论它包含多少。将单个字符附加到`std::string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:34:46.300

完全重写答案

```
std::string strSend = "<cross-domain-policy><allow-access-from domain='*' to-ports='*'/></cross-domain-policy>";
sendPacket(resSock, strSend.c_str()); 
```

那边的strcpy没用。像这样使用它并修改您的 sendPacket 函数以发送`strlen(strData)+1`（因为字符串的 .c_str 末尾已经有`\0`NULL 终止符。但 strlen 只计数**到**那个，不包括空值。

但是，您可能只希望此标头部分具有此行为。

# windows - 使用批处理（排序和删除）管理 Windows 目录

> ID：11960989
> 
> 赞同：0
> 
> 时间：2012-08-14T21:26:19.210
> 
> 标签：windows, file-io, batch-file, command

我想创建一个批处理文件，它将对目录中的文件（基于创建日期）进行排序，并且只保留 x 个最新文件。

这些文件的名称中也有一个日期/时间（即file201208140322），所以如果可以通过将当前日期/时间与子字符串进行比较来做到这一点，我也对此持开放态度。

有人可以帮我执行命令吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:46:36.833

您可以使用`DIR /O-D /B /A-D`获取按修改时间降序排序的文件列表，然后将此命令的输出提供给`FOR /F`以便您可以处理这些文件。使用`SET /A`您可以增加一个计数器来跟踪我们到目前为止看到的文件数量，并且在此计数器达到某个阈值后，您可以开始删除所有后续条目。

这是一个执行此操作的批处理文件：

```
@ECHO OFF
SETLOCAL
SET PROCESSED_COUNT=0
SET SKIP_FIRST=5
SET START_PROCESSING=0
FOR /F %%f IN ('dir /o-d /b /a-d') DO CALL :process %%f
ENDLOCAL
GOTO :eof

:process
IF %PROCESSED_COUNT%==%SKIP_FIRST% SET START_PROCESSING=1
SET /A PROCESSED_COUNT=%PROCESSED_COUNT% + 1
IF %START_PROCESSING%==0 GOTO :eof
ECHO Delete file #%PROCESSED_COUNT%: %1
GOTO :eof 
```

这个主题还有其他可能的变化，所以上面不是唯一的解决方案。

# stored-procedures - Cognos 需要查询 oracle 存储过程并取回一个结果集

> ID：11960999
> 
> 赞同：0
> 
> 时间：2012-08-14T21:27:11.693
> 
> 标签：stored-procedures, oracle11g, cognos

我正在使用报告引擎（Cognos 框架管理器）为我的 oracle OLTP 数据库建模以生成报告。通常这是在 cognos 框架管理器中重新创建表和关系的简单过程。我们正在使用 oracle OLTP db，没有单独的 Datamart 仅用于 cognos 报告。

现在……对于某些报表，不能简单地通过查询表格来获取字段……这涉及到一个复杂的逻辑。因此，为此目的，我正在创建一个执行逻辑的存储过程。我希望 cognos 可以直接执行存储过程并获得所需的结果集。但是在 oracle stoerd 过程中，要获得结果集并不容易。cognos可以处理这个吗？如果不是，有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:17:39.783

您可以在 Framework Manager 中创建存储过程查询主题。

[以下是步骤。](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_fm.8.4.1.doc/ug_fm_i_stored_procedure_query_subjects.html)

该过程必须在 Framework Manager 中运行，以获取该过程可能返回的结果集的描述。