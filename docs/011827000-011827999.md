# StackOverflow 问答 11827000-11827999

# css - wordpress wp_nav_menu 未在 Safari 中显示

> ID：11827004
> 
> 赞同：0
> 
> 时间：2012-08-06T11:00:48.717
> 
> 标签：css, wordpress, safari, cross-browser

这是我的CSS

```
#menubar{position:absolute; width:100%; height:42px; background:url(images/menubar-bg.jpg); margin-top:112px; }
    #menu-home{width:80%; height:42px; margin:0 auto;}
    #menu-home li{position:relative;}
    #menu-home>li>a{float:left; text-decoration:none; color:#ffffff; font-family:arial; font-size:16px; font-weight:500;  padding:13px 2%; }
    #menu-home li.last-child{float:right; }
    #menu-home li.last-child a{padding:13px 0; color:#face30;}
    #menu-home .sub-menu{position:absolute; background:url(images/menu-hover-bg.jpg); width:100%; height:259px; top:0px; top:-220px; z-index:-1000;} 
```

这适用于所有其他浏览器

这是我的工作网址 [演示网站](http://dnanetworks.com.preview.gearhost.com/)

请帮忙.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:38:21.443

编辑你的 CSS 并添加 float: left; 到你的**#menu-home li**元素：`#menu-home li{ position:relative; float: left; }` 。这样 Safari 将只给 LI 所需的空间。

# android - 当我在 Canvas 中使用时，为什么 R.color.xyz 出现“灰色”？

> ID：11827009
> 
> 赞同：0
> 
> 时间：2012-08-06T11:01:05.113
> 
> 标签：android, android-canvas

这是我的 color.xml

```
<color name="xyz">#507EC0</color>
<color name="abc">#27B0D0</color>
<color name="def">#A8CBE1</color> 
```

这里是 onDraw() 里面的代码

```
Paint xyzPaint = new Paint();
         thisWeekTotalPaint.setColor(R.color.xyz);
         canvas.drawRect(30, 70, 200, 100, xyzPaint); 
```

但无论我使用什么颜色，它似乎都是灰色的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:10:21.353

`R.color.xyz`包含颜色的资源 ID，而不是颜色本身，您需要`setColor()`.

所以你必须首先从资源中获取颜色：

```
int color = getResources().getColor(R.color.xyz);
yourPaint.setColor(color); 
```

# ruby-on-rails-3 - 使用 Rails 3 从远程目录列出文件？

> ID：11827012
> 
> 赞同：2
> 
> 时间：2012-08-06T11:01:34.177
> 
> 标签：ruby-on-rails-3, file, controller, remote-server

我的网络上有一个 samba 服务器，其中包含许多目录，其中一个目录充满了 .xls Microsoft Excel 文档。

我想要实现的基本上是远程目录中的文件列表，然后我可以将其混搭成一个包含远程 IP 的链接。最终结果基本上是目录中文件的实时表，用户可以单击它来打开他们需要的文件。

我已经阅读了以下做类似事情的方法：

```
basedir = '.'
files = Dir.glob("*.xls") 
```

我正在努力解决的是如何使 basedir 成为远程 IP，以及如何将其构建到我的模型/控制器中。

理想情况下，我想做这样的事情：

**文件控制器.rb**

```
class FilesController < ApplicationController

 basedir = '192.168.1.1/files/path/to/xlsdocuments/'

 def index
 @xls_files = Dir.glob("*.xls")

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @articles }
 end
end 
```

然后，这将允许我在我的视图中遍历 @xls_files。

这甚至有可能吗？

**更新**

在我的控制器中使用上面的代码如下，我没有收到任何错误，但我不知道如何显示文件名：

```
class DocumentsController < ApplicationController
before_filter :authorize, only: [:new, :edit, :update]
basedir = '192.168.1.1/common/'
  # GET /documents
  # GET /documents.json
  def index
    @documents = Document.all
    @xls_files = Dir.glob("*.xls")
    @xls_files = @xls_files.split('\n')

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @documents }
    end
  end 
```

我在我的视图中使用以下内容遍历文件名：

```
<% @xls_files.each do |xls| %>
 file name
<% end %> 
```

这输出`file name`. 知道如何输出实际文件名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:10:52.553

对于其他可能想要这样做的人，这些是我为使其工作而采取的步骤：

1.  在本地挂载远程文件夹。

    `fusermount -u ~/yourmountdirectory`

2.  列出本地（远程）目录的内容

    `@xls_files = Dir.glob("/home/danny/nurserotas/*")`

3.查看文件的输出列表

```
<ul>
<% @xls_files.each do |xls| %>
<li><%= xls %></li>
<% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:45:53.297

您是否尝试过使用这样的命令行：

```
@xls_files = `ssh 192.168.1.1 'ls /path/to/dir *.xls'`
@xls_files = @xls_files.split('\n') 
```

# android - 方向更改扭曲了 Android 设备中的视图

> ID：11827013
> 
> 赞同：0
> 
> 时间：2012-08-06T11:01:35.040
> 
> 标签：android, user-interface, titanium, screen-orientation

我的应用程序是在 Titanium 中完成的。我正在努力解决一个问题，即当我通过将设备保持在横向模式来启动应用程序时。然后在加载启动画面时，它首先进入横向模式，当应用程序最终启动时，整个 UI 被方向变化扭曲了。我在 TiApp.xml 中添加了以下代码行

```
<application android:screenOrientation="portrait" android:configChanges="keyboardHidden"/> 
```

即使它在旋转。我想在启动时停止该启动画面的方向变化。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:44:48.570

在每个活动中，您必须编写

```
 <activity android:name=".MainActivity" android:configChanges="keyboardHidden|orientation" android:screenOrientation="landscape"  /> 
```

希望有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:43:44.213

尝试这个。添加你自定义的 androidManifest.xml[用于自定义 xml](https://wiki.appcelerator.org/display/guides/Maintaining+a+Custom+AndroidManifest.xml)

并在 androidManifest.xml 中添加这一行并运行我认为这对你非常有用。

```
<activity android:configChanges="keyboardHidden" android:name="org.appcelerator.titanium.TiActivity" android:screenOrientation="portrait"/>

<activity android:configChanges="keyboardHidden" android:name="ti.modules.titanium.ui.TiTabActivity" android:screenOrientation="portrait"/> 
```

干杯

# tridion - 在服务器下直接添加 .css 和 JavaScript 文件并在 TBB 中访问它们

> ID：11827019
> 
> 赞同：3
> 
> 时间：2012-08-06T11:02:01.093
> 
> 标签：tridion, tridion-2011

> **可能重复：**
> [如何将外部 JavaScript 或 CSS 文件添加到我们的 Tridion 页面？](https://stackoverflow.com/questions/10555177/how-to-add-external-javascript-or-css-files-to-our-tridion-page)

我想将 .css 和 .js 文件添加到 Tridion 服务器。

我想在 TBB 中提及它们。

```
<link href="path/style.css" rel="stylesheet" type="text/css" />
<script src="path/script.js" type="text/javascript"></script> 
```

我有一些问题：

1.  我需要将它们直接放在 Tridion 服务器机器上吗？

2.  我需要将它们作为虚拟目录添加到 IIS 中以引用它们吗？

在任何一种方式中，我都不确定如何给出“href”。

我正在使用 Dreamweaver TBB 和 SDL Tridion 2011 SP1。

我知道还有其他方法可以处理 .css 和脚本。

但我的要求需要他们直接添加到服务器中。

请分享您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:11:18.057

It all depends on where the files are on the local disk (which unfortunately you fail to mention in your question).

If you have the files on disk like this:

```
c:\
   inetpub
       wwwroot
           mywebsite
               index.html
               style.css
               script.js 
```

And you have created a web site with its root at `c:\inetpub\wwwroot\mywebste`, then you can refer to `style.css` and `script.js` from within `index.html` as

```
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="script.js" type="text/javascript"></script> 
```

If however you created a web site with its root at `c:\inetpub\wwwroot`, you'd refer to the same files as:

```
<link href="mywebsite/style.css" rel="stylesheet" type="text/css" />
<script src="mywebsite/script.js" type="text/javascript"></script> 
```

Either way, you will have to ensure that the files are placed onto the web server. You can either do that through Tridion or by placing them there manually.

If you want to publish the CSS and JavaScript files from Tridion, I suggest reading this question: [How to add external JavaScript or CSS files to our Tridion page?](https://stackoverflow.com/questions/10555177/how-to-add-external-javascript-or-css-files-to-our-tridion-page)

# css - 清除左内联元素而不浮动

> ID：11827022
> 
> 赞同：-1
> 
> 时间：2012-08-06T11:02:12.293
> 
> 标签：css

我有不想浮动的内联元素。有没有办法仍然使用 CSS 像 clear: left on inline 元素？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:04:45.067

试试这个，

```
span{display:block} 
```

通常跨越内联元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:14:39.143

答案是否定的，很清楚：左；不适用于内联元素。您可能想要声明元素`display: inline-block`- 它可能会解决您遇到的任何问题。如果你想要的答案不是一个完整的猜测，请在 jsfiddle 上做一个演示。

# xml - XML文件中不同节点的XSL

> ID：11827023
> 
> 赞同：0
> 
> 时间：2012-08-06T11:02:12.157
> 
> 标签：xml, xslt, transformation

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet  type="text/xsl" href="coursestyle.xsl"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <ns0:FindCoursesForOffenderResponse xmlns:ns0="http://H.FindCoursesForOffenderResponse">
         <ns0:SiteList>
            <ns0:SiteEntity>
               <ns0:SiteId>10</ns0:SiteId>
               <ns0:SiteName>Ramada Watford</ns0:SiteName>
            </ns0:SiteEntity>
            <ns0:SiteEntity>
               <ns0:SiteId>20</ns0:SiteId>
               <ns0:SiteName>Ramada Jarvis (Comet) Hotel</ns0:SiteName>
            </ns0:SiteEntity>
         </ns0:SiteList>
         <ns0:CourseList>
            <ns0:CourseEntity>
               <ns0:CourseId>50</ns0:CourseId>
               <ns0:SiteId>10</ns0:SiteId>
            </ns0:CourseEntity>
            <ns0:CourseEntity>
               <ns0:CourseId>10</ns0:CourseId>
               <ns0:SiteId>10</ns0:SiteId>
            </ns0:CourseEntity>
            <ns0:CourseEntity>
               <ns0:CourseId>20</ns0:CourseId>
               <ns0:SiteId>20</ns0:SiteId>
            </ns0:CourseEntity>
         </ns0:CourseList>
      </ns0:FindCoursesForOffenderResponse>
   </s:Body>
</s:Envelope> 
```

我想`SiteName`为每个`CourseEntity`. 例如对于`CourseID = 50`应该`SiteName`是`Ramada Watford`。

到目前为止，我有这个 XSL，但它不起作用。

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="http://H.FindCoursesForOffenderResponse" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<xsl:output method="html"/>
<xsl:param  name="lnum">123</xsl:param>

<xsl:template match="/">
  <html>
  <body>
    <ul>

    <xsl:for-each select="s:Envelope/s:Body/ns0:FindCoursesForOffenderResponse/ns0:CourseList/ns0:CourseEntity">
        <xsl:variable  name="currEntity"><xsl:value-of select="ns0:SiteId"/></xsl:variable>
            <xsl:value-of select="$currEntity"/><br/>
            <xsl:for-each select="s:Envelope/s:Body/ns0:FindCoursesForOffenderResponse/ns0:SiteList/ns0:SiteEntity[ns0:SiteId=$currEntity]">            
          <li>
            <xsl:value-of select="ns0:SiteName"/>

          </li>
              </xsl:for-each>
          </xsl:for-each>

    </ul>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

第一个`for-each`循环运行`CourseEntities`，内部循环试图为每个课程 ID 找到相关的站点名称。

任何的想法？

输出

```
<couseID> - <sitename>
50 - Ramada Watford
20 -   Ramada Jarvis (Comet) Hotel 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:23:04.390

在 XSLT 中通常最好避免 for-each 循环。试试这个模板化的方法。

[此 XMLPlayground](http://www.xmlplayground.com/0GKHFB)上的可运​​行演示

```
<!-- kick things off -->
<xsl:template match="s:Envelope/s:Body/ns0:FindCoursesForOffenderResponse">
    <ul>
        <xsl:apply-templates select='ns0:CourseList/ns0:CourseEntity' />
    </ul>
</xsl:template>

<!-- site entities... -->
<xsl:template match='ns0:CourseEntity'>
    <li>
        <xsl:value-of select='ns0:CourseId' />
        -
        <!-- ...find corresponding site name -->
        <xsl:value-of select='../../ns0:SiteList/ns0:SiteEntity[ns0:SiteId = current()/ns0:SiteId]/ns0:SiteName' />
    </li>
</xsl:template> 
```

# jquery-ui - 页面底部的jquery ui datepicker setDate方法日历

> ID：11827026
> 
> 赞同：1
> 
> 时间：2012-08-06T11:02:35.620
> 
> 标签：jquery-ui, datepicker

> **可能重复：**
> [更新到最新的 JQuery UI 和 datepicker 导致 datepicker 始终可见](https://stackoverflow.com/questions/5735888/updating-to-latest-jquery-ui-and-datepicker-is-causing-the-datepicker-to-always)

这就是我的代码在 JavaScript 中的样子

```
$(function() {
    $("#datepicker").datepicker({ minDate: new Date(2012,7,23), maxDate: new Date(2012,11,14)});
    $("#datepicker").datepicker("setDate", new Date());
}); 
```

除了当我加载它时，日期选择器日历会自动显示在页面底部。[我从这里](https://groups.google.com/forum/?fromgroups#!topic/jquery-ui/805gSvQOy5c)尝试了解决方案，但它不起作用。我还有一个手风琴里面的日期选择器。这会是问题的一部分吗？请让我知道任何解决方案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T00:37:34.857

我在这个问题中找到了解决方案[更新到最新的 JQuery UI 和 datepicker 导致 datepicker 始终可见](https://stackoverflow.com/questions/5735888/updating-to-latest-jquery-ui-and-datepicker-is-causing-the-datepicker-to-always)：

```
$(function() { 
    $("#datepicker").datepicker({ minDate: new Date(2012,7,23), maxDate: new Date(2012,11,14)});
    $('#ui-datepicker-div').css('display','none');  
    $("#datepicker").datepicker("setDate", new Date()); 
}); 
```

# php - PHP parent:: 对象的等价物

> ID：11827027
> 
> 赞同：1
> 
> 时间：2012-08-06T11:02:39.593
> 
> 标签：php, oop

```
class Second
{
  // i've got to access to $variable from First instance from here
}

class First
{
  public $variable;
  public $SecondInstance;

  public function __construct($variable) 
  {
    $this->variable = $variable;
    $this->SecondInstance = new Second();
  }
}
 $FirstObj = new First('example variable'); 
```

对于对象，我需要一个等效的 parent::$variable 。

有没有可能以这种方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:05:55.867

你不能。在不扩展 First 的情况下，您可以管理它的唯一方法是将 "$this" 传递给 Second 的构造函数：

```
$this->SecondInstance = new Second ($this); 
```

或者，您可以简单地将 $variable 传递给它的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:07:15.510

你的意思就像PHP中的[父函数：](http://php.net/manual/en/keyword.parent.php)

```
//You may find yourself writing code that refers to variables 
//and functions in base classes. This is particularly true if 
// your derived class is a refinement or specialisation of 
//code in your base class.

//Instead of using the literal name of the base class in your 
//code, you should be using the special name parent, which refers 
//to the name of your base class as given in the extends declaration 
//of your class. By doing this, you avoid using the name of your base 
//class in more than one place. Should your inheritance tree change 
//during implementation, the change is easily made by simply 
//changing the extends declaration of your class. 

<?php
class A {
    function example() {
    echo "I am A::example() and provide basic functionality.<br />\n";
    }
}

class B extends A {
    function example() {
    echo "I am B::example() and provide additional functionality.<br />\n";
    parent::example();
    }
}

$b = new B;

// This will call B::example(), which will in turn call A::example().
$b->example();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:08:51.860

我建议您稍微更改一下结构以“扩展”：

```
class second extends first{
    public __construct(){
        parent::__construct();
        echo $this->variable;
    }
} 
```

否则，您将需要将“第一个”分配为第二个变量中的父类，并像这样实际访问它：

```
class second{
    public $first;
    public function __construct($first){
        $this->first = $first;
        var_dump($this->first->variable);
    }
} 
```

或者，当然您也可以将第一类设为静态并以这种方式访问​​它。

# android - 如何在构建源代码之前在 android 中创建自定义启动屏幕？

> ID：11827028
> 
> 赞同：1
> 
> 时间：2012-08-06T11:02:44.243
> 
> 标签：android, customization

如何在操作系统级别更改 android 中的默认启动映像。我正在制作一个定制的 android 版本（我使用 froyo 的源代码）。我想用我的自定义图像替换现有图像。我在某处读到我们必须对 frameworks/base/libs/surfaceflinger/BootAnimation.cpp 进行一些更改。但是该文件似乎丢失了。

有人可以提供一些有关如何执行此操作的教程的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:07:37.610

来自[http://forum.xda-developers.com/showthread.php?t=753788](http://forum.xda-developers.com/showthread.php?t=753788)

您需要的工具：

*   图像处理工具（Photoshop、Gimp、MSPaint，任何可以真正保存 bmp 文件的工具。
*   NBIMG 命令行启动<-->图像转换工具
*   压缩工具（7zip、winzip、任何可以将文件放入 .zip 的工具）
*   android-info.txt ( [http://click.xda-developers.com/api/click?format=go&jsonp=vglnk_jsonp_13993144320556&key=f0a7f91912ae2b52e0700f73990eb321&libId=18c17f5b-3eb1-4435-bf7b-87363f1263%20556&key=f0a7f91912ae2b52e0700f73990eb321&libId=18c17f5b-3eb1-4435-bf7b-87363f1263%20556&key=f0a7f91912ae2b52e0700f73990eb321&libId=18c17f5b-3eb1-4435-bf7b-87363%A%2% developer.com%2Fshowthread.php%3Ft%3D753788&v=1&out=http%3A%2F%2Fwww.pcjock.com%2Fsplash%2Fandroid-info.txt&ref=http%3A%2F%2Fstackoverflow.com%2Freview%2Flow-quality-帖子%2F4728175&title=%5BHOW%20TO%5D%20Create%20custom%20hboot-flashable%20SPLASH1%20images%20-%20xda-developers&txt=This%20file](http://click.xda-developers.com/api/click?format=go&jsonp=vglnk_jsonp_13993144320556&key=f0a7f91912ae2b52e0700f73990eb321&libId=18c17f5b-3eb1-4435-bf7b-87363f1263b7&loc=http%3A%2F%2Fforum.xda-developers.com%2Fshowthread.php%3Ft%3D753788&v=1&out=http%3A%2F%2Fwww.pcjock.com%2Fsplash%2Fandroid-info.txt&ref=http%3A%2F%2Fstackoverflow.com%2Freview%2Flow-quality-posts%2F4728175&title=%5BHOW%20TO%5D%20Create%20custom%20hboot-flashable%20SPLASH1%20images%20-%20xda-developers&txt=This%20file) )

如何：

*   下载并提取上面链接的文件并将它们放在您熟悉的地方。
*   在您的图像创建/操作工具中，创建一个新图像。将图像尺寸设置为 480x800。（如果您已经有了图像，请打开它并调整其大小）
*   随心所欲地创建/修改/自定义图像。
*   将图像保存为 splash1.bmp 文件。确保将文件保存为 24 位 RGB 彩色位图。为方便起见，请将图像保存在提取 nbimg 工具的同一文件夹中。
*   打开命令或终端窗口和 CD 到您的 nbimg 文件夹。
*   输入以下命令：nbimg -F splash1.bmp -w 480 -h 800

如果成功，nbimg 应该会创建一个名为“splash1.bmp.nb”的 nb 文件。

*   将“splash1.bmp.nb”重命名为“splash1.img”。
*   将新创建的 splash1.img 文件和之前下载的“android-info.txt”放入一个名为“PB31IMG.zip”的新 ZIP 文件中。
*   将新创建的 PB31IMG.zip 放在 SD 卡的根目录下，然后重新启动到 hboot。(adb reboot oem-42) C 如果一切顺利，系统会提示您安装自定义的 splash1。

# iphone - 应用程序协同设计验证失败 - 应用程序加载器使用的命令行？

> ID：11827030
> 
> 赞同：0
> 
> 时间：2012-08-06T11:02:48.533
> 
> 标签：iphone, validation, codesign, application-loader

这出现在应用程序加载器中，但我无法调查，因为一切看起来都是正确的。

有人可以告诉我如何获得验证工具输出以显示我为什么得到这个的完整详细日志。

我目前正在运行：

```
PATH="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin"

PRODUCT_TYPE=com.apple.product-type.application

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation ~/Desktop/EstateTest/Deliver/appAppStore.ipa 
```

无输出和退出代码 == 0

所以总结一下。我不在终端中运行的应用程序加载器是什么命令。还。运行 codesign --verify 检查也返回正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:17:30.273

我弄清楚了为什么它没有通过代码签名验证。在生成证书/规定之前，我已经生成了推送证书。

查看我的 AppStore.provision 在 plist xml 中没有显示任何权利部分，这就是我所知道的。

# javascript - jQuery图片库（需要如何使大图可点击）

> ID：11827031
> 
> 赞同：0
> 
> 时间：2012-08-06T11:02:53.450
> 
> 标签：javascript, jquery, html, xhtml

我使用“在 4 行 JQUERY 中创建图像库”（下面的链接），它工作得很好。

但我喜欢让大图像可点击（不仅仅是拇指），这样当我点击显示为大图像的图像时，另一个更大版本的图像会在新窗口中打开。

[http://workshop.rs/2010/07/create-image-gallery-in-4-lines-of-jquery/](http://workshop.rs/2010/07/create-image-gallery-in-4-lines-of-jquery/)

非常感谢任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:08:08.890

嗨，您可以尝试使用漂亮的照片插件在灯箱中显示画廊。[Preety Photo 的演示](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)。这可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:22:45.190

您可以将大图像包装在锚元素中：

```
<div id="panel">
    <a href="images/image_01_largest.jpg" target="_blank">
        <img id="largeImage" src="images/image_01_large.jpg" />
    </a>
    <div id="description">First image description</div>
</div> 
```

这遵循了一个图像具有三种尺寸的惯例：*_thumb.jpg、*_large.jpg 和 *_largest.jpg。您现在需要做的就是在更改 #largeImage 的 src 时更改锚点的 href 属性。

```
$('#thumbs img').click(function(){
    $('#largeImage').attr('src', $(this).attr('src').replace('thumb', 'large'));
    $('#largeImage').parent().attr('href', $(this).attr('src').replace('thumb', 'largest'));
    $('#description').html($(this).attr('alt'));
}); 
```

# android - android：检测用户是否取消了应用的安装

> ID：11827032
> 
> 赞同：2
> 
> 时间：2012-08-06T11:03:01.953
> 
> 标签：android, installation, google-play

我想检测用户是否下载了 Android 应用程序，但他点击了“取消”按钮而不是“安装”。有没有办法检测用户是否取消了任何应用程序的安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:08:53.980

这必须在 Google Play 上，并且他们没有为此提供 API。不过会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:11:10.853

您无法检测到，但是在该`onActivityResult()`功能中，您可以尝试搜索该应用程序是否已安装在*PackageManager*中，然后您可以确定它是否已取消。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    PackageManager packageManager = this.appContext.getPackageManager();
    List<PackageInfo> apps = packageManager.getInstalledPackages(0);
    for (int i = 0; i < apps.size(); i++) {
        PackageInfo file = apps.get(i);
        if (file.applicationInfo.loadLabel(packageManager)
                .toString().equals("nameoftheapplicationtriedtoinstall")) {
            //then it has not cancelled, if it exist
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:06:21.137

没有办法那样。取而代之的是，您可以使用按下或释放指针的特定按钮来识别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:07:56.433

我不认为这是您可以从您的应用程序中检测到的东西。我假设只有安装程序 - 执行安装的程序 - 可以知道这一点。

# ruby - 使用 MySQL 和 Rails 3 编码 utf-8 字符串不起作用

> ID：11827033
> 
> 赞同：1
> 
> 时间：2012-08-06T11:03:05.867
> 
> 标签：ruby, ruby-on-rails-3, encoding, utf-8

MySQL、UTF-8 和 Rails 3 应用程序的另一个编码问题。

我们最近将代码从 Rails 2 迁移到 Rails 3。我们使用 MySQL 和`mysql2`gem。问题是，在我们的旧数据库中，我们的内容包含一些 utf-8 字符而不是它们相应的 htmlentities，例如`\xC3\x9F`带有分词的 o。

我们将这些字符串作为必须进入网站的某些字符串的 YAML 序列化。问题是当数据库中的记录被加载到 ActiveRecord 对象中时，这是用奇怪的字符完成的，因此在网络上显示非常讨厌。例如，`ß`显示为`Ã`等。

我尝试了 Rails 3 的新编码魔法，尝试了各种组合`force_encoding`和`encode`方法，但没有运气。

作为记录，mysql 是用这两行启动的：

```
character-set-server=utf8
collation-server=utf8_unicode_ci 
```

关于我们做错了什么，为什么 YAML 没有正确读取那些转义字符以及我们可以做些什么来解决这个问题的任何想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:31:03.837

好的，我刚刚发现了问题所在：yaml 文本已完成，`syck`现在`psyck`不太喜欢它。

我在这里找到了答案[https://stackoverflow.com/a/8570162/196708](https://stackoverflow.com/a/8570162/196708)

# iphone - 应用因启用非法文件共享而被拒绝

> ID：11827034
> 
> 赞同：1
> 
> 时间：2012-08-06T11:03:09.777
> 
> 标签：iphone

我有一个应用程序，允许人们存储任何类型的文件并通过 wifi 在计算机和 iPhone 之间传输文件。经过几天的审查，Apple 拒绝了我的应用，因为

> 22.4：启用非法文件共享的应用程序将被拒绝

1.  我想知道为什么我仍然可以找到很多与我的应用程序一样的应用程序并通过了？
2.  苹果允许开发者开启iTunes文件共享，这和通过wifi传输文件不是同一个概念吗？不同的是无线。
3.  我无法控制用户不传输非法文件。

有什么办法可以通过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:08:00.207

您可以对该决定提出上诉。或者也许有办法安抚Apple，也许是在打开连接之前警告用户不要分发版权材料？

底线是，唯一确定的方法是询问 Apple。无论好坏，他们都是守门人；我们只能推测。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-06T11:07:50.230

不，苹果是独裁者。但谷歌一点也不好。该应用程序将上线，但在竞争对手发送 DMCA 通知后被删除（没有正当理由，只是野蛮指责）。询问 mupen64plus-ae 开发者

# php - 有没有办法从 php.ini 获取 SMTP 服务器名称值

> ID：11827035
> 
> 赞同：0
> 
> 时间：2012-08-06T11:03:23.070
> 
> 标签：php, email, smtp

有没有办法从 php.ini 获取 SMTP 服务器名称值，这样我就不需要在应用程序的配置文件中明确地重复该名称？

在我的本地机器上，我使用 WAMP 堆栈，应用程序部署在 LAMP 堆栈上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:14:17.803

老实说，这取决于您访问邮件功能的方式。即使您的 SMTP 服务器内部可能是`localhost`php.ini，但实际上您的 SMTP 可能实际上是`mail.x.co.uk`其他所有人。

您使用哪个版本取决于您使用它的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:07:48.670

尝试这个：

```
<?php
    ini_get("SMTP");  
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:08:12.887

```
<?php

var_dump( ini_get( 'SMTP' ) );

?> 
```

# ruby - 指定 Chef 使用的 Ruby 版本

> ID：11827038
> 
> 赞同：1
> 
> 时间：2012-08-06T11:03:30.937
> 
> 标签：ruby, chef-infra

我是 Chef 和 Ruby 的新手，我想要的只是使用 chef-solo 将一个简单的文本文件从机器 A 复制到机器 B。

我的 default.rb 文件是：

```
require 'rubygems'
require 'net/scp'

hostname = '142.138.0.147'
username = 'someone'
password = 'someone123'

Net::SCP.start( hostname, username, :password => password ) do|scp|
  puts 'SCP Started!'
  scp.download('/home/someone/file.txt', '.')
end 
```

但是在运行时出现此错误：

> FATAL: LoadError: no such file to load -- net/scp

这是因为 Chef 使用的是它的嵌入式 Ruby 版本，而不是我安装的那个。我如何告诉 Chef 使用哪个 Ruby 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:19:37.190

i don't know what you mean by "embedded", but you need to have the right ruby version installed on the system you are executing the chef recipe.

if you want to get a tiny overview of how to handle chef, you could have a look at the railscast episode about chef-solo: [http://railscasts.com/episodes/339-chef-solo-basics](http://railscasts.com/episodes/339-chef-solo-basics)

# unit-testing - 桌面应用程序和 Web 应用程序之间的区别

> ID：11827041
> 
> 赞同：0
> 
> 时间：2012-08-06T11:03:52.193
> 
> 标签：unit-testing, testing, web, tdd

桌面应用程序和 Web 开发应用程序有什么区别？什么是网站/Web 应用程序的测试策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:27:41.973

我将简要分享我的一些经验，因为它们可能有助于为您奠定基础。

我遇到的主要区别显然是标记语言（HTML/HTML5/XML 等）、AJAX、jQuery 和 javascript（嗯，一般是脚本）的使用。.NET 框架等工具也存在。您可以查看这些以了解它们是什么以及它们如何协同工作的完整定义，但它们引入了一种解决问题的新方法，即构建小桥梁以达到最终结果。

与任何应用程序一样，请记住应用程序的用户端。数百万人将在同一时间访问它。Web 应用程序的安全性至关重要。确保您的页面具有强大的安全措施。

美学将比桌面应用程序更优先（取决于它们是什么）。Web 应用程序是一种视觉体验。您想确保在设计时，字段易于识别，应用程序易于导航且易于阅读。

对于测试，只需使用正确的扩展名保存您的代码，然后从您保存它的任何地方运行它。大多数当前的 Op Systems 都知道该文件是用哪种 Web 代码编写的，并将在浏览器中打开它。假设您编写了“myPage.html”并将其保存到桌面，您将看到一个显示“myPage”的 HTML 图标。如果您需要进行更改，编辑您的代码，重新保存它，然后只需刷新您的网络浏览器。

我知道这是一个非常笼统的答案，但我试图回顾一下我在夏天所经历的一切。希望这对您有所帮助，或者至少在设计您的 Web 应用程序时引起一些注意事项。祝你好运！

# regex - matlab中的正则表达式

> ID：11827043
> 
> 赞同：0
> 
> 时间：2012-08-06T11:03:57.747
> 
> 标签：regex, string, matlab, replace, integer

我想在 matlab 中使用正则表达式。我有一个示例字符串`12nameofit2012.2.ending.mat`。我想要做的是在开始（本例`12`）和之前的所有迹象中检测和替换所有迹象`.ending`，但不是`2012`。（所以，这个案例 2 在点之后）。我想我需要一些来自正则表达式的模式，我想它应该是两行连续的行，一个检测开头是否有：

```
regexprep(file_name, '^\d+', '') 
```

但是要写什么来检测组合：`.`和整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:48:16.440

如何使用这样的占位符：

```
filename= '12nameofit2012.2.ending.mat'
reduced_name = regexprep(filename,'^\d+(.*?)(\.\d+)*(\.ending\.mat)$','$1$3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:10:17.867

you can use

```
regexprep(file_name, '\.\d+', '') 
```

# ruby-on-rails - 是否可以将 Refiner CMS 集成到我现有的 Rails 应用程序中？

> ID：11827046
> 
> 赞同：1
> 
> 时间：2012-08-06T11:04:07.503
> 
> 标签：ruby-on-rails, refinerycms

我正在使用 Rails 应用程序，是否可以将 Refiner CMS 集成到我现有的 Rails 应用程序中？如果不是，我是否必须创建一个炼油厂项目，然后将我的应用程序与之集成？

任何的意见都将会有帮助。

谢谢，巴兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:16:06.643

是的，应该没问题。

炼油厂只是一颗宝石。因此，如果您尚未运行 Devise，您可以将其包含在现有项目中并运行您需要的特定生成器。

# biztalk - 使用 BizTalk 2010 连接到 Novell Groupwise

> ID：11827047
> 
> 赞同：1
> 
> 时间：2012-08-06T11:04:15.570
> 
> 标签：biztalk, biztalk-2010, groupwise

我需要使用 BizTalk 2010 POP3 适配器阅读来自 Novell Groupwise 的传入电子邮件。无论我尝试哪种设置组合，我都无法登录到 POP3 服务器。Groupwise 服务器在 110 端口上响应 telnet，所以有服务监听。BizTalk 服务器没有安装 Groupwise 客户端。实际上是否可以在没有客户的情况下与 Groupwise 交谈？

有人知道我可以用来尝试连接到 Groupwise 的电子邮件客户端吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:43:11.120

只要在 GWIA（GroupWise Internet Agent）中启用了 POP3，您就应该能够使用任何 POP3 客户端连接到 GroupWise。由于您可以远程登录到端口 110，并且我假设您正在远程登录到运行 GWIA 的服务器的 IP 地址，因此听起来像是启用了 POP3。尝试使用 Thunderbird 之类的工具来查看是否可以连接。还要确保您使用的是正确的凭据。基本上，您将在 GW 客户端或 GW WebAccess 中使用的任何凭据都应该适用于任何 POP3 客户端。

# html - 如何获取特定区域以在 html5 中单击？

> ID：11827049
> 
> 赞同：0
> 
> 时间：2012-08-06T11:04:31.170
> 
> 标签：html

我使用画布创建了一个圆圈并将其分成几条线。我想要一个特定区域的坐标：如果我点击一个特定区域，那应该是可以点击的。

举一个文字轮游戏的例子，一个圆圈被分成许多不同坐标的区域，一些字母放在划分的区域内。如果我想单击带有字母“A”的特定区域，则应单击“A”并应显示在文本框中。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:07:46.767

构成画布的元素不会被记住，因此不具有交互性——只要将它们提交到画布上，它们就会被归入集体中。它们不是像 DOM 元素那样的单个元素。

解决方法是自己记住事物的位置，监听对画布元素的点击，然后通过您自己的逻辑计算出点击的位置。

这是不平凡的。[Kinetic](http://www.kineticjs.com)之类的库使这一切变得容易。使用这样的 API 可以为你节省大量时间——比如在 vanilla JS 上使用 jQuery 作为 DOM。

# acrobat - 从 Adob e Acrobat/Reader JavaScript 调用自定义的基于 COM 或 .Net 的库

> ID：11827057
> 
> 赞同：2
> 
> 时间：2012-08-06T11:05:07.320
> 
> 标签：acrobat, adobe-reader, acrobat-sdk

是否可以在 Acrobat/Reader 中扩展 javascript 对象模型？例如，是否可以使用 javaScript 从 Acrobat/Reader 调用基于 COM 或 .Net 的自定义库。还是他们开发和调用自定义库的不同方式？

谢谢指挥官Peek

# sonarqube - 用于查找方法用法的自定义 PMD 规则

> ID：11827058
> 
> 赞同：2
> 
> 时间：2012-08-06T11:05:18.167
> 
> 标签：sonarqube, pmd

最近，我们试图编写一个 PMD 规则来发现 Spring JDBC 模板的 query* 方法的所有出现。查看一些示例 AST xml 代码，我编写了以下无害的 XPATH 表达式。

//PrimaryPrefix[Name[starts-with(@Image,'jdbcTemplate.query')]]

但很快，我们意识到这还不够。如果有人写“this.jdbcTemplate.queryForObject”，那么“this”变成“Primary Prefix”，“jdbcTemplate”变成“Suffix”。JDBCTemplate 对象实例的变量名也可以是任何东西。

我认为构造一个 XPATH 表达式来找出特定 Class 方法调用的发生是相当容易的——在代码中的任何地方，但是看着 AST 树，我只是无法弄清楚。XPATH 真的可能吗，还是我们必须编写 Java 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:33:24.553

我建议使用声纳[架构规则引擎](http://docs.codehaus.org/display/SONAR/Architecture+Rule+Engine)来发现这种违规行为。

# grails - PayPal 中的 MassPay

> ID：11827061
> 
> 赞同：0
> 
> 时间：2012-08-06T11:05:44.600
> 
> 标签：grails, paypal

只是为了看看我没有错。

我需要在我的项目中使用 MassPay 功能，以便用户可以将他在我网站中的余额转移到他的贝宝帐户。在 paypal 站点的可用文档中，有一个[示例类](https://www.x.com/paypal-apis-masspay-java-1.6/soap)。我知道，在我的代码中，我必须调用 massPayCode 方法（使用适当的参数）。问题是，该类没有构造函数，那么，我该如何调用该方法？当然......我是否以正确的方式关注问题？

谢谢！

（顺便说一句，我正在使用 Grails）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:46:00.333

> 问题是，该类没有构造函数......

在java中，如果没有定义构造函数，将提供一个默认的无参数构造函数。因此，如果您决定只将该 java 类复制到您的应用程序，您可以调用`new MassPay()`以获取一个新实例。

# android - Android 在 ftp 上上传文件

> ID：11827062
> 
> 赞同：0
> 
> 时间：2012-08-06T11:05:44.740
> 
> 标签：android, file-upload

## Android文件上传问题

我正在尝试在我的 ftp 服务器上上传图像，它没有给我任何异常或错误，但在 nt 中部署了图像。上传图像的任何人都可以识别问题。

```
FTPClient con = new FTPClient();

    try{
    con.connect("host",21);

    con.login(username, pswd);

    con.setFileType(FTP.BINARY_FILE_TYPE);
    con.setFileTransferMode(FTP.ASCII_FILE_TYPE);
    con.setSoTimeout(10000);
    con.enterLocalPassiveMode();
    if (con.login(username, pswd)) {
        try {
            File sFile = new File("mnt/sdcard/DCIM/download.jpg");
            // connect.setText(sFile.toString());
            BufferedInputStream buffIn = null;
            buffIn = new BufferedInputStream(
                    new FileInputStream(sFile));
            try {
                String fileName = sFile.getName();
                while (!dataUpResp) {
                    dataUpResp = con.storeFile(fileName,
                            buffIn);

                    // publishProgress("" + 10);
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        } catch (Exception e) {
            e.getMessage();
        }

    }
} catch (IOException e) {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:33:13.753

您的代码中有 2 次登录不是问题吗？

```
con.login(username, pswd); // 1st time

con.setFileType(FTP.BINARY_FILE_TYPE);
con.setFileTransferMode(FTP.ASCII_FILE_TYPE);
con.setSoTimeout(10000);
con.enterLocalPassiveMode();
if (con.login(username, pswd)) // 2nd time 
```

此外，您没有对 FTPClient 使用注销/断开连接，并且流没有刷新和关闭。
尝试使用 commons-net-3.2.jar 和 FileZilla FTP Server 结合您的代码，它工作正常。

# .net - 在 64 位服务器上具有延迟签名的 SGEN

> ID：11827063
> 
> 赞同：0
> 
> 时间：2012-08-06T11:05:54.890
> 
> 标签：.net, msbuild, windows-server-2008-r2, assembly-signing, sgen

我正在尝试解决在构建服务器上作为我的 .NET 解决方案构建的一部分调用 SGEN 时引发错误的问题。我正在从服务器上的命令行运行构建，以消除 CI 服务器作为一个因素。

提供的具体错误消息是：

> SGEN：错误：无法加载文件或程序集“MyAssembly.dll，版本=0.0.0.0，Culture=neutral，PublicKeyToken=56e8273d901d717f”或其依赖项之一。强名称验证失败。（来自 HRESTULT 的异常：0x013141A）

从命令行运行构建脚本不会产生其他错误。

有问题的程序集是延迟签名程序集，使用与指定令牌匹配的公钥构建。

在服务器上，我使用 sn.exe 工具 ( `*,56e8273d901d717f`) 注册了用于跳过验证的密钥令牌，因为这是在尝试完整签名阶段之前运行构建过程的一些测试步骤所必需的。

构建过程在开发人员桌面和 Win2K3 服务器上成功运行。我在一个新的 Win2k8R2 服务器上运行这些测试，这是为了替换旧的盒子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:46:41.040

问题在于 sn.exe 工具。

虽然我已经在服务器上添加了验证跳过条目，但 SGEN 工具并没有看到这个，因为它作为**64 位进程**运行，而 sn 工具是**32 位**版本（尽管存在于 64-位“程序文件”文件夹）。

*   32 位 sn.exe 位于 C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\sn.exe。
*   64 位 sn.exe 位于 C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\x64\sn.exe

这两个工具写入完全独立的注册表 - 必须根据机器上 .NET 安装的“位”和被调用的 exe 的“位”添加验证。

使用 64 位 sn.exe 注册条目已解决该问题。

# r - 从函数中的循环中提取结果

> ID：11827069
> 
> 赞同：2
> 
> 时间：2012-08-06T11:06:27.487
> 
> 标签：r, for-loop

我可能在做一些非常愚蠢的事情，但我无法从我的函数循环的一系列模型中提取参数值。

数据：

```
library(difR)
data(verbal)
TotScore=rowSums(verbal[,c(1:24)])
mydata=verbal[,c(1:24)] 
```

然后我可以循环获取模型 BIC

```
library(BMA)
a<-rep(NA,length(1:24))
for (i in (1:24)){
  a[i]<-bic.glm(mydata[,i]~ TotScore, glm.family=binomial,data=mydata)$bic
}
a 
```

但是，如果我尝试将其放入函数中，我将无法提取“a”

```
myB<-function(mydata){
  a<-rep(NA,length(ncol(mydata)))
  for (i in (1:ncol(mydata))){
    a[i]<-bic.glm(mydata[,i]~ TotScore, glm.family=binomial,data=mydata)$bic
  }
  return(a)
}

myB(mydata) 
```

或者更确切地说，bic仅适用于最后一个模型

我可以为均值构建相同的函数并设法提取结果，所以这可能与 bic 输出的结构有关？

非常感谢

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:58:48.857

似乎`bic.glm`只从全局环境中读取对象 - 您的函数的问题在于它确实识别了`i`函数内本地创建的对象。尝试以下操作：

```
library(difR)
data(verbal)
TotScore=rowSums(verbal[,c(1:24)])
mydata=verbal[,c(1:24)]

myB<-function(mydata){
    a<-rep(NA,length(ncol(mydata)))
    for (i in (1:ncol(mydata))){
        # force this.col to be in the global environment
        this.col <<- mydata[,i]
        # Alternatively:
        # assign("this.col", mydata[,i], envir=.GlobalEnv)
        a[i]<-bic.glm(this.col ~ TotScore, glm.family=binomial,data=mydata)$bic
    }
    return(a)
}

myB(mydata) 
```

您的函数仍在读取`i`由第一个循环创建的全局变量，该循环为 24。

它应该这样做似乎很奇怪；经过快速的谷歌搜索后，我在[这里](http://projects.trophia.com/issues/182)和[这里](https://stackoverflow.com/questions/10329984/r-does-not-recall-object-in-memory)找到了对问题的引用（这不是一个非常彻底的搜索，我相信有更好的例子）。我在 的文档中找不到任何内容`bic.glm`，这有点令人惊讶。

`data`从第一个答案到我提供的第二个链接，如果您使用公式但不指定参数，似乎会发生这种情况。

# triggers - 如何从 IBM Db2 9.7 的触发器中获取更新列的列表？

> ID：11827072
> 
> 赞同：2
> 
> 时间：2012-08-06T11:06:41.167
> 
> 标签：triggers, db2

我在 Windows 7 上使用 DB2 9.7 企业版。我创建了一个触发器，现在我需要从触发器中知道哪些列已更新。在 MS SQL 2008 中，有一个名为“COLUMNS_UPDATED()”的函数可以为您提供这样的功能。但是，经过大量搜索，我找不到 DB2 的等效功能。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:15:07.340

DB2 没有类似的功能。比较触发器中的 OLD 和 NEW 值。

# c# - 更改外键 ID 时如何更新关系

> ID：11827074
> 
> 赞同：0
> 
> 时间：2012-08-06T11:06:42.667
> 
> 标签：c#, wpf, entity-framework-4

我目前正在开发一个 wpf + EF 应用程序。我面临以下问题。

在我的一个实体中，我有一个名为 的属性`StatusId (int)`和另一个名为的属性`StatusType`，它是对另一个实体的实体引用。

在我的代码中，我正在更改 的值`StatusId`，但相关实体没有发送任何通知消息。但是，该值已正确更改。

我试图在我的实体的部分类中编写一些代码，这很有效。

```
partial void OnStatusIdChanged()
{
   this.OnPropertyChanged("TaskStatusType");
} 
```

我的问题是：这是正确的方法吗？

# javascript - 如何在 javascript 中使用 svg 文本标签

> ID：11827077
> 
> 赞同：0
> 
> 时间：2012-08-06T11:06:55.900
> 
> 标签：javascript, jquery, css, svg

我可以在 javascript 中使用 SVG Text 标签。但它不起作用。这是我的 Javascript 代码。

```
O=evt.target;
Doc=O.ownerDocument;    
L = Doc.createElementNS(xmlns, "text");
L.setAttribute("x", 10);
L.setAttribute("y", 10);
L.node.textContent("abcdef");
L.setAttribute("fill", "red");
O.appendChild(L); 
```

例如 SVG 文本标签：

```
<text x="10" y="10" fill="red">abcdef</text> 
```

我的 javascript 代码中有什么类型的错误。问候， 维吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:36:17.287

这完美地工作

```
​&lt;svg>
    <text x="10" y="10" fill="red">abcdef</text>
</svg> 
```

这是一个有效的 javavascript[示例](http://jsfiddle.net/wwRnc/1/)。我没有您的完整代码，因此很难确定您的确切问题。

**编辑：** 我想我找到了。`L.node.textContent("abcdef");`应该是`L.textContent = "abcdef";` [新的小提琴](http://jsfiddle.net/wwRnc/2/)

更多例子[在这里](http://www.kevlindev.com/tutorials/basics/text/js_dom/index.htm)。

# file - 使用 .htaccess 阻止对除某些文件类型之外的所有文件的访问

> ID：11827078
> 
> 赞同：1
> 
> 时间：2012-08-06T11:06:56.957
> 
> 标签：file, .htaccess, web-applications

我试图弄清楚如何使用 .htaccess 文件来防止访问者直接访问特定文件夹中的文件，但具有某些扩展名的文件除外。

目前我正在使用

```
Deny from all 
```

例如，假设我有一个文件夹，其中包含以下文件：

```
report.pdf
data.doc
cabbage.gif
pens.png
movies.docx 
```

**除了**扩展名为 .gif 和 .png 的文件之外，我将如何阻止对所有文件的访问？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:11:50.377

How about:

```
SetEnvIfNoCase Request_URI \.gif$ allow_extension=1
SetEnvIfNoCase Request_URI \.png$ allow_extension=1

Order Deny,Allow
Deny From All
Allow From env=allow_extension 
```

# ruby-on-rails - 太阳黑子回调 after_commit？

> ID：11827080
> 
> 赞同：0
> 
> 时间：2012-08-06T11:07:10.413
> 
> 标签：ruby-on-rails, solr, sunspot

任何人都可以建议 sunspot 是否有可能像**after_commit**或**after reindex**这样的回调。

我想在用户会话中缓存方面并在发生变化时重新加载它们。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:00:40.630

如果您正在使用`ActiveRecord`，您可以连接到`after_save`您的模型而不是连接到太阳黑子。它也[一样](https://github.com/sunspot/sunspot/blob/master/sunspot_rails/lib/sunspot/rails/searchable.rb#88)。只需确保您在定义之后`searchable`定义挂钩以从 Solr 获取重新索引的数据。

# jquery - 删除 TinyMCE 以获取新数据，然后重新初始化

> ID：11827082
> 
> 赞同：1
> 
> 时间：2012-08-06T11:07:12.123
> 
> 标签：jquery, tinymce

我有一个在打开对话框时应用了 tinyMCE 的 textarea（来自 JQuery UI 的对话框）。

当用户想要编辑与他们之前编辑的记录不同的记录描述时，就会出现问题。当对话框加载时，我需要它从之前清除 textarea 中的所有内容并从 AJAX 插入新文本。

基本上，当对话框打开时，我在 textarea 上初始化 TinyMCE。然后我希望销毁 TinyMCE，以便在关闭对话框时清除所有输入和文本区域。

如何才能做到这一点？我在 TinyMCE 对象上尝试了 .remove() 和 .destroy，但它要么什么都不做，要么导致错误。

* * *

我试过了：

```
tinyMCE.execCommand("mceRemoveControl", false, 'textarea_id'); 
```

但这也不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:59:22.497

要正确关闭编辑器实例，请使用：

```
tinyMCE.execCommand("mceRemoveControl", false, 'textarea_id'); 
```

当您在 dom 内移动编辑器或删除包含编辑器 iframe 的 dom 部分时，这是必要的。

要重新初始化这个独特的编辑器实例，请使用

```
tinyMCE.execCommand("mceAddControl", false, 'textarea_id'); 
```

# java - javax.xml.datatype.Duration 仅返回秒

> ID：11827083
> 
> 赞同：3
> 
> 时间：2012-08-06T11:07:12.773
> 
> 标签：java, xml, duration

为什么尽管持续时间增加了 javax.xml.datatype.Duration.getMinutes() 总是返回 0？如果您运行下面的代码超过一分钟，您将看到如下输出：

```
minutes: 0 , seconds: 61 
```

我以前从未使用过这个类。我错过了一些关于它的基本知识吗？这是代码：

```
import java.util.Timer;
import java.util.TimerTask;

import javax.xml.datatype.DatatypeConfigurationException;
import javax.xml.datatype.DatatypeFactory;
import javax.xml.datatype.Duration;

public class TestDuration {

    class MyTimerTask extends TimerTask {
        DatatypeFactory df;
        long delay;
        Duration duration;

        public MyTimerTask(DatatypeFactory df, long delay) {
            this.df = df;
            this.delay = delay;
            duration = df.newDuration(0);
        }

        @Override
        public void run() {
            duration = duration.add(df.newDuration(delay));
            System.out.println("minutes: " + duration.getMinutes() + " , seconds: " + duration.getSeconds());
        }
    }

    public static void main(String[] args) {
        Timer timer = new Timer();
        final long delay = 1 * 1000;
        DatatypeFactory df = null;

        try {
            df = DatatypeFactory.newInstance();
        } catch (DatatypeConfigurationException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        MyTimerTask task = new TestDuration().new MyTimerTask(df, delay);
        timer.schedule(task, 0, delay);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:40:36.387

这似乎是设计使然。查看[Duration.add()](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/Duration.html#add%28javax.xml.datatype.Duration%29)的 JavaDoc ：

> 计算一个新的持续时间，其值为 this+rhs。
> 
> 例如，
> 
> `"1 day" + "-3 days" = "-2 days"`
> `"1 year" + "1 day" = "1 year and 1 day"`
> **`"-(1 hour,50 minutes)" + "-20 minutes" = "-(1 hours,70 minutes)"`**
> `"15 hours" + "-3 days" = "-(2 days,9 hours)"`
> `"1 year" + "-1 day" = IllegalStateException`

我已经大胆地提出了重要的路线。显然，这个类只关心正确表示区间，而不是担心从“人类”的角度来看什么是有意义的。

根据您的用例，您可以继续使用`Duration`，但要了解在向用户显示值之前需要执行格式计算，或者您应该移至执行加法时执行您期望的不同类/减法。一个例子可能是来自 Yoda Time 项目的[`Duration`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html)和类。[`Period`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)

# orchardcms - 果园分类学奇怪的行为

> ID：11827085
> 
> 赞同：0
> 
> 时间：2012-08-06T11:07:26.113
> 
> 标签：orchardcms

我试图了解分类模块的工作原理，因为我想在我的网站上使用它。

我已经从 Orchard Gallery 下载并安装了分类模块。我已经按照[模块网站](http://orchardtaxonomies.codeplex.com/documentation)上的说明设置了所有内容。

然后，我创建了一个名为“主题”的分类法，然后创建了一个术语树，如下图所示

![术语树](../Images/584aacf0b0cf1bc4526ff38c02b20039.png)

然后我编辑了“博客文章”内容类型，添加了一个名为`Category`type的新字段`Taxonomy Field`。这非常好用，因为我能够在创建新帖子时指定帖子分类法。伟大的。

最后，我`Taxonomy Menu`在我的主页上添加了一个新的小部件 ,。我已经指定分类是主题，根术语是父分类，我希望显示所有子级别。

我创建了三个示例帖子，每个帖子都有不同的分类。

![在此处输入图像描述](../Images/a0116c4a7ecbe5819b51c128e50f59ea.png)

问题是不幸的是我只看到第一级条目，如下图所示

![在此处输入图像描述](../Images/29902733742a283389c872cd5de0afc8.png)

我哪里错了？？？感谢您的帮助

**请注意**：我使用的是最新版本的 Orchard。

**编辑**：这些是小部件配置中的值：

*   标题和名称：类别
*   分类：主题（从下拉列表中选择）
*   词根：“- Parent Taxonomy -”（从下拉列表中选择）
*   要显示的级别数：0
*   未选中所有复选框

# php - 如何让 Propel ORM 1.6 created_at 字段？

> ID：11827087
> 
> 赞同：1
> 
> 时间：2012-08-06T11:07:28.497
> 
> 标签：php, symfony1, propel

我试图指定这个字段：

```
<column name="created_at" phpName="CreatedAt" type="TIMESTAMP" required="false"/> 
```

但是，无论是否需要，Propel 似乎都不会在其上放置当前日期时间。我如何指定我希望 Propel 为我处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:29:06.460

您应该使用可[时间戳的行为](http://www.propelorm.org/behaviors/timestampable.html)：

> 该`timestampable`行为允许您跟踪模型对象的创建日期和上次更新。

使用（默认）：

```
<behavior name="timestampable" /> 
```

或者（如果您想自定义字段）：

```
<behavior name="timestampable">
  <parameter name="create_column" value="my_create_date" />
  <parameter name="update_column" value="my_update_date" />
</behavior> 
```

# python - 交错两个 numpy 索引数组，每个数组中的一项

> ID：11827100
> 
> 赞同：12
> 
> 时间：2012-08-06T11:08:11.840
> 
> 标签：python, arrays, numpy, vectorization

我有两个有序的 numpy 数组，我想将它们交错，以便我从第一个数组中取出一个项目，然后从第二个数组中取出另一个，然后返回到第一个 - 取出下一个大于我刚刚从第二个等等。这些实际上是其他数组的索引数组，只要操作是矢量化的，我就可以对原始数组进行操作（但当然，将索引数组作为向量操作处理会很棒）。

示例（可以假设数组的交集为空）

```
a = array([1,2,3,4,7,8,9,10,17])
b = array([5,6,13,14,15,19,21,23]) 
```

我想得到 [1,5,7,13,17,19]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T12:25:41.337

### 矢量化解决方案（教学风格，易于理解）

我们可以通过使用鉴别器索引扩充数组来将其向量化，例如`a`tagged`0`和`b`tagged `1`：

```
a_t = np.vstack((a, np.zeros_like(a)))
b_t = np.vstack((b, np.ones_like(b))) 
```

现在，让我们组合和排序：

```
c = np.hstack((a_t, b_t))[:, np.argsort(np.hstack((a, b)))]
array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 13, 14, 15, 17, 19, 21, 23],
       [ 0,  0,  0,  0,  1,  1,  0,  0,  0,  0,  1,  1,  1,  0,  1,  1,  1]]) 
```

你可以看到现在元素是有序的，但保留了它们的标签，所以我们可以看到哪些元素来自`a`和来自`b`。

因此，让我们选择第一个元素以及标签从`0`(for `a`) 变为`1`(for `b`) 并再次返回的每个元素：

```
c[:, np.concatenate(([True], c[1, 1:] != c[1, :-1]))][0]
array([ 1,  5,  7, 13, 17, 19]) 
```

### 高效的矢量化解决方案

您可以通过将项目及其标签保存在单独（但并行）的数组中来稍微更有效地执行此操作：

```
ab = np.hstack((a, b))
s = np.argsort(ab)
t = np.hstack((np.zeros_like(a), np.ones_like(b)))[s]
ab[s][np.concatenate(([True], t[1:] != t[:-1]))]
array([ 1,  5,  7, 13, 17, 19]) 
```

这比上述解决方案效率略高；我得到的平均时间是 45 微秒，而不是 90 微秒，尽管您的条件可能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:04:53.147

您可以将问题分为两部分：

1.  只有当它们大于 some 时才会产生值的Make`a`和迭代器。`b``threshold`
2.  使用`itertools`（本质上是 George Sakkis 的 roundrobin 配方）在两个迭代器之间交替。

* * *

```
import itertools
import numpy as np

a = np.array([1,2,3,4,7,8,9,10,17])
b = np.array([5,6,13,14,15,19,21,23])

def takelarger(iterable):
    for x in iterable:
        if x > takelarger.threshold:
            takelarger.threshold = x
            yield x
takelarger.threshold = 0

def alternate(*iterables):
    # Modified version of George Sakkis' roundrobin recipe
    # http://docs.python.org/library/itertools.html#recipes
    pending = len(iterables)
    nexts = itertools.cycle(iter(it).next for it in iterables)
    while pending:
        try:
            for n in nexts:
                yield n()
        except StopIteration:
            # Unlike roundrobin, stop when any iterable has been consumed
            break

def interleave(a, b):
    takelarger.threshold = 0
    return list(alternate(takelarger(a),takelarger(b)))

print(interleave(a,b)) 
```

产量

```
[1, 5, 7, 13, 17, 19] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:45:45.610

```
a = [1,2,3,4,7,8,9,10,17]
b = [5,6,13,14,15,19,21,23]
c=[]
c.append(a[0])  #add the first element to c
i=True          #breaking condition
loop=2          #initially we to choose b
while i:
    if loop==2:
        val=c[-1]
        temp_lis=d([x-val for x in b])  #find the difference between every
                                        # element and the last element of c and
                                        # pick the smallest positive value.

        for k,y in enumerate(temp_lis):
            if y>0:
                c.append(b[k])
                break
        else:
            i=False        #use for-else loop for determining the breaking condition

        loop=1   #change the loop to 1
    elif loop==1:
        val=c[-1]
        temp_lis=[x-val for x in a]
        for k,y in enumerate(temp_lis):
            if y>0:
                c.append(a[k])
                break
        else:
            i=False

        loop=2

print c 
```

**输出：**

```
[1, 5, 7, 13, 17, 19] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:03:27.073

我认为您将很难将`numpy`矢量化应用于此问题并保持线性性能。这需要存储相当多的状态：当前索引 in `a`、当前索引 in`b`和当前`threshold`. `numpy`不提供许多有状态的矢量化函数。事实上，我唯一能想到的就是`ufunc.reduce`，它不太适合这个问题——尽管它当然可以被硬塞到工作中。

事实上，就在我发布这个之后，我的浏览器更新了一个[出色的矢量化解决方案](https://stackoverflow.com/a/11828266/577088)。但该解决方案需要排序，即 O(n log n); 事实上，经过一些测试，我发现下面的纯 python 解决方案对于所有输入都更快！

```
def interleave_monotonic(a, b):
    try:
        a = iter(a)
        threshold = next(a)
        yield threshold
        for current in b:
            if current > threshold:
                threshold = current
                yield threshold
                while current <= threshold:
                    current = next(a)
                threshold = current
                yield threshold
    except StopIteration:
        return 
```

请注意，如果`a`为空，则返回一个空的可迭代对象，但如果`b`为空，则返回一个包含 的第一个值的单项可迭代对象`a`。我*认为*这与您的示例一致，但这是我不确定的极端情况。此外，基于 - 的解决方案表现出稍有不同的行为，始终以和`numpy`的较小值开始，而上述解决方案始终以 的第一个值开始，无论如何。我修改了上面的内容以检查以下测试，这些测试非常清楚地表明纯 python 解决方案是最快的。`a[0]``b[0]``a`

定义：

```
def interleave_monotonic_np(a, b):
    ab = np.hstack((a, b))
    s = np.argsort(ab)
    t = np.hstack((np.zeros_like(a), np.ones_like(b)))[s]
    return ab[s][np.concatenate(([True], t[1:] != t[:-1]))]

def interleave_monotonic(a, b):
    a, b = (a, b) if a[0] <= b[0] else (b, a)
    try:
        a = iter(a)
        threshold = next(a)
        yield threshold
        for current in b:
            if current > threshold:
                threshold = current
                yield threshold
                while current <= threshold:
                    current = next(a)
                threshold = current
                yield threshold
    except StopIteration:
        return

def interleave_monotonic_py(a, b):
    return numpy.fromiter(interleave_monotonic(a, b), dtype='int64')

def get_a_b(n):
    rnd = random.sample(xrange(10 ** 10), n * 2)
    return sorted(rnd[0::2]), sorted(rnd[1::2]) 
```

测试：

```
>>> for e in range(7):
...         a, b = get_a_b(10 ** e)
...         print (interleave_monotonic_np(a, b) == 
...                interleave_monotonic_py(a, b)).all()
...         %timeit interleave_monotonic_np(a, b)
...         %timeit interleave_monotonic_py(a, b)
...

True
10000 loops, best of 3: 85.6 us per loop
100000 loops, best of 3: 5.53 us per loop
True
10000 loops, best of 3: 91.7 us per loop
100000 loops, best of 3: 9.19 us per loop
True
10000 loops, best of 3: 144 us per loop
10000 loops, best of 3: 46.5 us per loop
True
1000 loops, best of 3: 711 us per loop
1000 loops, best of 3: 445 us per loop
True
100 loops, best of 3: 6.67 ms per loop
100 loops, best of 3: 4.42 ms per loop
True
10 loops, best of 3: 135 ms per loop
10 loops, best of 3: 55.7 ms per loop
True
1 loops, best of 3: 1.58 s per loop
1 loops, best of 3: 654 ms per loop 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T13:52:40.627

受其他帖子的启发，我对纯 python 代码有另一个想法，它需要事先排序，但与 a 和 b 对称

```
def myIterator4(a, b):
    curr = iter(a)
    next = iter(b)
    try:
        max = curr.next()
        tmp = next.next() #  Empty iterator if b is empty
        while True:
            yield max
            while tmp<=max:
                tmp = next.next()           
            max = tmp
            curr, next  = next, curr
    except StopIteration:
        return 
```

如果 a 或 b 为空，则返回空迭代器。

# java - 从插件添加选项到 Eclipse

> ID：11827108
> 
> 赞同：0
> 
> 时间：2012-08-06T11:08:45.103
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我有一个安装在 Eclipse 中的插件。

在我的情况下，有没有办法做到以下几点：

调用时将“版本”参数传递给 eclipse 以在标准输出中打印插件版本而不启动 eclipse

```
./eclipse -version 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:18:46.653

在 [eclipse dir]/configuration/config.ini 中将 eclipse.ignoreApp 参数设置为 true 应该可以解决问题。有关更多详细信息，请参见此处： http: [//www.eclipse.org/equinox/documents/quickstart-framework.php](http://www.eclipse.org/equinox/documents/quickstart-framework.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:05:58.377

我这样做的方法是在执行所需的操作后在方法主体中调用 exit 由于 -version

# jquery - 在 jQuery 移动框架上使用 Google 地图将 infoWindow 添加到标记

> ID：11827120
> 
> 赞同：1
> 
> 时间：2012-08-06T11:09:43.263
> 
> 标签：jquery, google-maps, jquery-mobile, google-maps-markers

我在 jQuery mobile 上使用 Google Maps 时遇到了一些问题......我已经成功地将一个地理定位片段集成到我正在开发的网站中，并且它运行良好，但我还想（对于每个标记）添加一个 infoWindow（通过用户点击/点击）。我尝试了几次并且已经用谷歌搜索了一段时间，但它接缝一切都无法正常工作，我也没有收到任何错误消息。

我当前的代码在这里：http: [//jsfiddle.net/Cde9j/5/](http://jsfiddle.net/Cde9j/5/)

基本上，我想为每个标记添加一个 infoWindow 或至少一个标签，其中包含指向网站内部页面的链接。

另外，请注意当前 jsfiddle 代码中的 2 个标记位于伦敦，因此根据您的位置，您可能需要缩小地图以查看它们。

我真的很感激任何帮助我解决这个问题的想法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:39:09.680

你试过使用**`google.maps.InfoWindow()`**吗？

```
google.maps.event.addListener(markerObj, 'click', function() {
    var infoWindow = new google.maps.InfoWindow({content:"Your content"});
    infoWindow.open(map, this);
}); 
```

（取决于稍后是否替换标记，您可能还想使用全局数组来跟踪它们..）

# r - R中每个文件一个类

> ID：11827122
> 
> 赞同：0
> 
> 时间：2012-08-06T11:09:55.613
> 
> 标签：r, oop

R初学者有一个两部分的问题 -

1.  我喜欢“其他”语言中的每个文件“规则”一个类 - 这也是 R 中的一种常见做法吗？

2.  我将如何在 R 中执行此操作？从我到目前为止阅读的文档中，我必须创建一个包并使用“require”。但是，我需要为每个包编写手册页和文档吗？（一个文件可能包含一个我不想记录的非常小的类）。有没有其他方法可以做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:26:23.487

三个选项供您选择：

1.  ProjectTemplate 可能具有允许您自动加载给定目录中的所有源脚本的功能。

2.  您可以编写一个简单的脚本，`source()`通过`dir()`. `taRifx::readdir`执行类似于加载目录中的所有数据文件的操作。

3.  可能是最好的答案：将所有功能放入一个包中，即使您不将其发布到 CRAN。R 目录中的所有 .R 文件在构建时自动成为包的一部分。奖励：文档也变得更容易（使用`roxygen2`）。

# ruby-on-rails - 具有关联的模型工厂

> ID：11827131
> 
> 赞同：1
> 
> 时间：2012-08-06T11:10:31.043
> 
> 标签：ruby-on-rails, factory-bot

当有关联模型时，众所周知，在两个模型中指定关联将创建循环依赖并导致“堆栈级别太深”错误。那么指定关系的正确位置是什么？请参阅这些简单的关联：

```
class Patient
  has_many :doctors, :through => :join_model
end

class Doctor
  has_many :patients, :through => :join_model
end 
```

还

```
class User
  has_many :posts
end

class Post
  belongs_to :user
end 
```

在这些模型的工厂中，哪一个是举办协会的合适场所？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:27:40.630

factory_girl 自述文件中有一个部分包含`has_many`关联示例：[https ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations)

我认为这里没有黄金法则。我通常每个模型都有一个默认工厂，它有一个简单的或没有关系集，然后我有像`:user_with_posts`这样的特殊工厂，用于各种相关测试。我也经常自己在测试中自己建立它们`create(:user, posts: [create(:some_special_post)])`

# asp.net - finding a children of each node of an XmlDataSource asp control

> ID：11827132
> 
> 赞同：1
> 
> 时间：2012-08-06T11:10:34.090
> 
> 标签：asp.net, xpath, repeater, xmldatasource

i'm trying to view this rss feed :

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss">
  <channel>
    <Group>
      <Team>
        <teamID></teamID>
        <name></name>
      </Team>
      <Team>
        <teamID></teamID>
        <name></name>
      </Team>
    </Group>
    <Group>
     <Team>
        <teamID></teamID>
        <name></name>
      </Team>
      <Team>
        <teamID></teamID>
        <name></name>
      </Team>
    </Group>
  </channel>
</rss> 
```

in a multiple tables using the **xmlDatasource asp control** and **repeater** control

i can only list all the teams of the document using this :

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" XPath="rss/channel/group/team"></asp:XmlDataSource> 
```

and binding it to the repeater. or finding the groups only

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" XPath="rss/channel/group/team"></asp:XmlDataSource> 
```

but i can't figure out how to find the children of the xpath . i mean if i used nested repeaters one for the groups and the other for the teams how to access the teams info .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:34:09.353

> ```
> <asp:XmlDataSource ID="XmlDataSource1" runat="server" XPath="rss/channel/group/team"></asp:XmlDataSource> 
> ```
> 
> 但我不知道如何找到 xpath 的孩子。

**使用**：

```
rss/channel/group/team/* 
```

`team`这将选择任何由 Xpath 表达式选择的 anu 子元素`rss/channel/group/team`

# c# - Application.Exit() 没有按预期工作

> ID：11827137
> 
> 赞同：1
> 
> 时间：2012-08-06T11:10:56.890
> 
> 标签：c#, winforms, toolstrip

我有 2 个表格（`main`和`login`）。我用这段代码打开登录表单：

```
toolStripProgressBar1.Value = 50;
toolStripStatusLabel_dynamic.Text = "Proberen toegang te verkrijgen...";
Login login = new Login();
login.ShowDialog();
do_login(); 
```

我在登录表单的顶部有一个工具条菜单，`eventhandler`如下所示：

```
private void afsluitenToolStripMenuItem_Click(object sender, EventArgs e) {
    Application.Exit();
} 
```

但是在两个表单都关闭后，程序继续工作（它调用函数`do_login`。）但是变量没有设置，表单消失了，所以`do_login`根本不起作用......

那么，当我单击工具条时，如何使程序的整个执行停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:13:53.203

也许检查结果`ShowDialog`？

```
using(var login = new Login()) {
    if(login.ShowDialog() == DialogResult.OK) {
        do_login();
    }
} 
```

（这`using`是因为**你**有责任打电话`Dispose()`，如果你使用`ShowDialog()`，但*不是*当你打电话`Show()`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T11:14:17.873

您将不得不解决它，因为 的定义`Application.Exit()`如下。

> 通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。

因此，它的意思是，一旦所有消息都已**完全**处理，它将退出，但是由于您有一条消息需要在对话框关闭后处理，因此必须先完成该消息。`null`您正在正确地执行退出，但如果它`null`在`do_Login()`方法中，您将不得不检查并返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T11:21:55.297

结合 Marc 的回答，`Application.Exit`改成`Environment.Exit(0)`.

```
private void afsluitenToolStripMenuItem_Click(object sender, EventArgs e) { 
    Environment.Exit(0);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T11:18:16.327

我不认为调用 Application.Exit(); 是一个很好的退出方式。一方面，它可能不允许执行任何其他代码，这些代码可能已经到位以在应用程序关闭时进行清理。

相反，您应该从 Login 返回 DialogResult 以指示需要关闭。然后主窗体应该检查这一点并优雅地关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T11:18:05.827

试试这个。Environment.Exit(0);

# java - Android Sqlite Special characters

> ID：11827140
> 
> 赞同：5
> 
> 时间：2012-08-06T11:11:06.273
> 
> 标签：java, android, regex, sqlite, special-characters

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:20:27.150

尝试这个：

```
description = description.replaceAll(System.getProperty("line.separator"), ""); 
```

对于特殊字符，请参阅此答案： [如何在实现 java 应用程序的数组中定义特殊字符？](https://stackoverflow.com/a/10000095/1289716)

**问号**的代码是`&#63;`

# mysql - How to update particular column multiple rows with subquery

> ID：11827145
> 
> 赞同：0
> 
> 时间：2012-08-06T11:11:45.290
> 
> 标签：mysql

please help mi relating to following mysql query, I have a table main with like below:

```
id      phone                phone2 
======================================
1       98998 | 58877
2       98998 | 58877
3       98998 
```

i want to update phone2 through phone column and trying to used following subquery but i didnt got the desired result please help to got the result if it is possible:

```
update main a 
set a.phone2 = (SELECT substring_index(b.phone,'|',-1) 
                FROM main b 
where b.phone like '%|%' and where a.id=b.id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:15:13.427

尝试这个：

```
UPDATE main a 
    INNER JOIN (SELECT id, substring_index(phone,'|',-1) AS phone
                FROM main 
                WHERE phone LIKE '%|%' 
        ) b
        ON a.id = b.id
SET a.phone2 = b.phone; 
```

# c# - Exchange Web 服务：为什么 ItemId 不恒定？[继续]

> ID：11827152
> 
> 赞同：9
> 
> 时间：2012-08-06T11:12:06.853
> 
> 标签：c#, exchangewebservices

正如其他一些人之前讨论过这个问题（例如，[Exchange Web 服务：为什么 ItemId 不是恒定的？](https://stackoverflow.com/questions/4164069/exchange-web-services-why-is-itemid-not-constant)），我想谈谈解决方案，我已经按照人们的建议将 Guid 标记为扩展属性，对我来说这个解决方案有点好（虽然我不知道如何使它与事件一起工作）但只要应用程序正常工作，一旦应用程序重新启动，项目的扩展属性就会消失，所以我现在的问题是“<em >**如何在 EWS 项目上标记扩展属性并使其始终存在？**” 这是更新日历项目（约会）的代码

```
public void SetGuidForAppointement(Appointment appointment)
{         
appointment.SetExtendedProperty((ExtendedPropertyDefinition)_appointementIdPropertyDefinition, Guid.NewGuid().ToString());
appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
} 
```

这些是上面需要的属性定义。

```
_appointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.Appointment, "AppointmentID", MapiPropertyType.String);
            _propertyDefinitionBases = new PropertyDefinitionBase[] { _appointementIdPropertyDefinition, ItemSchema.ParentFolderId, AppointmentSchema.Start, AppointmentSchema.End, 
AppointmentSchema.LegacyFreeBusyStatus, AppointmentSchema.Organizer };
            PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, _propertyDefinitionBases); 
```

因此，如果有人以前这样做过，他/她可以为我提供一个示例，即使应用程序退出，也可以将扩展属性标记在项目上。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T15:42:10.760

经过一段时间的尝试和搜索，我找到了解决问题的方法。

```
private static readonly PropertyDefinitionBase AppointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmentID", MapiPropertyType.String);
public static PropertySet PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, AppointementIdPropertyDefinition);

//Setting the property for the appointment 
 public static void SetGuidForAppointement(Appointment appointment)
{
    try
    {
        appointment.SetExtendedProperty((ExtendedPropertyDefinition)AppointementIdPropertyDefinition, Guid.NewGuid().ToString());
        appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
    }
    catch (Exception ex)
    {
        // logging the exception
    }
}

//Getting the property for the appointment
 public static string GetGuidForAppointement(Appointment appointment)
{
    var result = "";
    try
    {
        appointment.Load(PropertySet);
        foreach (var extendedProperty in appointment.ExtendedProperties)
        {
            if (extendedProperty.PropertyDefinition.Name == "AppointmentID")
            {
                result = extendedProperty.Value.ToString();
            }
        }
    }
    catch (Exception ex)
    {
     // logging the exception
    }
    return result;
} 
```

# continuous-integration - jenkins上的批处理任务插件设置权限

> ID：11827153
> 
> 赞同：2
> 
> 时间：2012-08-06T11:12:13.810
> 
> 标签：continuous-integration, hudson, jenkins, jenkins-plugins, hudson-plugin-batch-task

我们在我们的詹金斯服务器上使用批处理任务插件（[这里）](https://wiki.jenkins-ci.org/display/JENKINS/Batch+Task+Plugin)

我想限制个别用户对某些任务的访问/设置权限

例如：

用户 A 可以看到任务 => 推送到生产，推送到开发

用户 B 只能看到 task=> Push to Dev

我知道我可以为指定的任务创建一个单独的作业，但这只会占用更多空间（因为我们有很多项目）我想看看设置任务权限的粒度级别是否可行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:21:10.703

我不认为有很多（如果有的话）Jenkins 插件可以与用户权限深度集成——你必须添加一个[功能请求](https://issues.jenkins-ci.org/secure/CreateIssue.jspa?pid=10172&issuetype=2)。

您也可以尝试在[jenkinsci-users 邮件列表](https://groups.google.com/group/jenkinsci-users)上询问，看看是否有人对此类问题有类似的经验。

# javascript - How to fix tinyMCE getting stuck on iPad with canvas below it?

> ID：11827154
> 
> 赞同：2
> 
> 时间：2012-08-06T11:12:21.937
> 
> 标签：javascript, ipad, html, canvas, tinymce

I am having a sandwich of canvas and tinymce rich text editor. Now there are two modes, one is to draw on canvas and one is to write text on tinymce.

When on draw mode then canvas layer comes upwards and tinymce goes below this canvas layer and when on text mode vice-versa happens using z-index.

When I start typing on iPad with canvas layer below text layer it works fine until I move the cursor upwards by touching my iPad screen. As soon as I does that editor gets stuck and to make editor work again I have to hide my iPad browser's keypad and then touch again on editor.

There is one more thing that as soon as I remove canvas from html and there is only one single layer of tinymce then things works perfectly as expected however it works fine on normal pc browser without any issue.

I tried to debug and noticed z-index change as expected and when stuck our code does not even detect keypress events on tinyMCE with ipad.

Any idea what could be the possible reason or fix?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:30:11.570

我在 TinyMCE 网站上发现了这个错误报告： [http ://www.tinymce.com/develop/bugtracker_view.php?id=5447](http://www.tinymce.com/develop/bugtracker_view.php?id=5447)

我按照线程中的建议更改了 tiny_mce_src.js 中的 defaultNativeHandler 代码，但它没有解决我看到的问题（使用 python-django 1.5.1b4）。

# android - Saving the state of a webview fragment

> ID：11827156
> 
> 赞同：1
> 
> 时间：2012-08-06T11:12:32.123
> 
> 标签：android

I have a fragment that loads in a webview, when I change fragment and go back to this fragment the web page that the user has browsed to in the fragment is lost, what am I doing wrong?

Is the problem here in my fragement or is it how I am changing fragments? Does it matter that I am using a web view client?

```
public class FragmentA extends Fragment {

WebView myWebView;

@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   myWebView.saveState(outState);

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
   super.onActivityCreated(savedInstanceState);
   myWebView.restoreState(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{
     View mainView = (View) inflater.inflate(R.layout.frag_a, group, false);
     myWebView = (WebView) mainView.findViewById(R.id.webview);
     myWebView.setWebViewClient(new MyWebViewClient());
     myWebView.getSettings().setPluginsEnabled(true);
     myWebView.getSettings().setBuiltInZoomControls(false); 
     myWebView.getSettings().setSupportZoom(false);
     myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
     myWebView.getSettings().setAllowFileAccess(true); 
     myWebView.getSettings().setDomStorageEnabled(true);
     myWebView.loadUrl("http://www.bbc.co.uk");      

     return mainView;
}

public class MyWebViewClient extends WebViewClient {        

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.endsWith(".mp4")) 
        {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse(url), "video/*");

            view.getContext().startActivity(intent);
            return true;
        } 
        else {
            return super.shouldOverrideUrlLoading(view, url);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:46:39.220

请参阅您的其他问题以获取适用于此的可能解决方案：

[更改片段并保存 Web 视图状态 - 发疯](https://stackoverflow.com/questions/11830050/changing-fragments-and-saving-web-view-states-going-mad)

# vb.net - 通用存储库 vb

> ID：11827157
> 
> 赞同：0
> 
> 时间：2012-08-06T11:12:33.247
> 
> 标签：vb.net, repository

我正在尝试用 vb 实现一个通用接口。

```
Public Interface IGenericRepository(Of T)

    Function getAll() As IQueryable(Of T)
    Function [get](ByVal id As Integer) As T
    Sub saveOrUpdate(BaseDTO As T)
    Sub delete(BaseDTO As T)
End Interface

Public Interface IWorkItemRepository
    Inherits IGenericRepository(Of WorkItem)

    Function getWorkItemsByRequestor(ByVal username As String) As IList(Of WorkItem)
End Interface

Public Class WorkItemRepository
    Inherits genericRepository(Of WorkItem)
    Implements IWorkItemRepository

End Class 
```

我不想在 Iworkitemrepository 中复制共享方法的具体实现。

如何通过继承实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:51:25.550

如果您有不想复制的共享代码，则需要一个基本实现。

```
Public Interface IInterface(Of T)
  Sub X
  Sub Y
End Interface

Public MustInherit Class BaseImpl
 Implements IInterface(Of MyClass)

 Sub X() Implements IInterface(Of MyClass)
   '//stuff here
 End Sub

 MustOverride Sub Y() Implements IInterface(Of MyClass)

End Class

Public Class DerivedImpl
  Inherits BaseImpl

  Overrides Sub Y()
     'do different stuff
  End Sub
End Class

Public Class AnotherImpl
  Inherits BaseImpl

  Overrides Sub Y()
     'do different stuff
  End Sub
End Class 
```

以上所有应该能够案例到`IInterface(Of MyClass)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:54:05.163

可能在您的界面上定义扩展方法？那么你就不需要一个抽象基类了。

# javascript - IPAD safari 浏览器不支持 window.open JavaScript 方法

> ID：11827158
> 
> 赞同：3
> 
> 时间：2012-08-06T11:12:33.763
> 
> 标签：javascript, ipad, safari, return-value, window.open

我想`window.open`在 iPad 上调用 JavaScript 代码中的方法。当我调用该方法时，它工作正常。现在我想从该`window.load`方法打开的 HTML 页面返回一个值。它在其他浏览器中返回值，但在 iPad Safari 浏览器中不返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:19:31.957

与大多数浏览器不同，iPad 上 Safari 中的选项卡无法相互通信。如果可以的话，您应该重新考虑您的界面以避免 window.open，而是使用基于 HTML 的对话框在您的页面中打开一个弹出窗口。类似 jQuery-UI 对话框或类似代码的东西。

编辑：jQuery-UI 对话框示例

要使用对话框，您需要 HTML 中的一个元素，该元素为隐藏的对话框标记提供一个区域：

```
<div id="dialog">This could have a preset message or you can override it.</div> 
```

然后您将使用 jQuery 调用此对话框，如下所示：

```
$('#dialog').dialog(); 
```

如果要先更改对话框的内容，请执行以下操作：

```
$('#dialog').html('<p>Some html content.</p>');
$('#dialog').dialog(); 
```

有关详细信息，请参阅[此处的文档。](http://jqueryui.com/demos/dialog/)

# ruby - 如何以 DRY 方式指定 Rails 3 中多个路由的默认值？

> ID：11827159
> 
> 赞同：0
> 
> 时间：2012-08-06T11:12:35.727
> 
> 标签：ruby, ruby-on-rails-3, routes

我有几条这样的路线：

```
get '/test1' => 'test#index1', defaults: {common: '123'}
get '/test2' => 'test#index2', defaults: {common: '123'} 
```

他们的规格如下：

```
specify do
  get('/test1').should route_to controller: 'test', action: 'index1', common: '123'
end
specify do
  get('/test2').should route_to controller: 'test', action: 'index2', common: '123'
end 
```

如何干掉默认值的使用？

我试过`with_options`这样使用：

```
with_options defaults: {common: '123'} do |o|
  o.get '/test1' => 'test#index1'
  o.get '/test2' => 'test#index2'
end 
```

但它用消息打破了第一个测试：

```
Failure/Error: get('/test1').should route_to controller: 'test', action: 'index1', common: '123'
       The recognized options <{"common"=>"123", "controller"=>"test", "action"=>"index2"}> did not match <{"controller"=>"test", "action"=>"index1", "common"=>"123"}>, difference: <{"action"=>"index1"}>.
       <{"controller"=>"test", "action"=>"index1", "common"=>"123"}> expected but was
       <{"common"=>"123", "controller"=>"test", "action"=>"index2"}>. 
```

难道我做错了什么？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:32:47.630

你不需要`with_options`在这里，`defaults`也接受块：

```
defaults common: '123' do
  get '/test1' => 'test#index1'
  get '/test2' => 'test#index2'
end 
```

# ios - Split View Controller to set UIScrollView Offset

> ID：11827160
> 
> 赞同：0
> 
> 时间：2012-08-06T11:12:38.397
> 
> 标签：ios, xcode, uiscrollview, uisplitviewcontroller

Would it be possible to have a splitview controller that controls the offset of a UIScrollView which is in the detail view.

Basically I have one long image inside a scroll frame in the detail view and I want to be able to jump to parts of the image by using the MastwerViewController table as a "navigation" bar.

Any help would be appreciated.

Thanks, Alex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:16:52.833

看起来您正在寻找以编程方式设置滚动视图的内容偏移量。

```
[scrollView setContentOffset:CGPointMake(newOffset, 0) animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:37:21.623

首先，您必须根据单击主视图时要显示的部分来找到滚动视图的偏移值，然后将这些偏移值绑定到此方法

```
-(void) MoveScrollView:CGPointMake(CGFloat X, CGFloat Y)
{
     [scrollView setContentOffset:CGPointMake(CGFloat X, CGFloat Y) animated:YES];
} 
```

# dojo - dojo中的ValidationTextBox使用Ajax vor验证

> ID：11827162
> 
> 赞同：0
> 
> 时间：2012-08-06T11:12:50.957
> 
> 标签：dojo, validation

这是另一个我不敢相信尚未解决的问题……我正在创建一个注册表单。现在...我需要做一些 ajax 异步验证。这就是我现在正在做的事情（见底部的代码）。

很棒，它缓存了已经检查过的值，它是异步的，等等，但是：

1.  您永远无法 10000% 确定它在提交之前已得到验证。这是一笔大买卖，因为我还在服务器端检查了一些东西。但仍然......让这个代码在提交时“强制”验证会将它变成一个真正的怪物！

2.  对于一切都应该准备就绪的事情，这似乎需要做很多工作

3.  （可能与 2 有关）我想不出一种方法来使它真正通用。我还有另外 10 个字段需要类似的验证，但所有验证都略有不同，除了 Ajax 调用......而且我没有剪切和粘贴此代码 10 次！

我错过了一些非常明显的东西吗？有任何想法吗？

```
define([
'dojo/_base/declare',
'dijit/form/ValidationTextBox',
'dojo/_base/lang',
'app/globals',
], function(
 declare
, ValidationTextBox
, lang
, g
){
return declare('app.ValidationWorkspace', [ ValidationTextBox ], {

 ajaxSaidNo: {},
 ajaxSaidYes: {},
 ajaxRequested: {},

 onChange: function(value){
   this.validate();
 },

 validator: function(value){

   // console.log("Started validation for " + value);
   // Ajax has already said no -- returning false straight away
   if(this.ajaxSaidNo[value] ){
     this.invalidMessage = 'Workspace taken';
     return false;
   }

   // Run the normal field validators -- if they fail,
   // return false
   var validation =  Validators.workspace(value);
   if( ! validation.result){
     this.invalidMessage = validation.message;
     return false;

   // At this point, regexp validators passed and Ajax hasn't said "no".
   } else {
     // console.log("OK, ajasSaidYes for " + value + " is " +  this.ajaxSaidYes[value]); 
     if(! this.ajaxSaidYes[value] ){
       g.stores.workspacesAnon.query({name: value}).then(
         lang.hitch(this, function(res){
           if(res && res.length ){
             this.ajaxSaidNo[value] = true;
             //console.log("Added to Ajaxfailed: " + value);
             this.validate();
           } else {
             //console.log("Added to Ajaxsuccess: " + value);
             this.ajaxSaidYes[value] = true;
             this.validate();
           }
         })
       );    
     }  

     return true;
   }

 },

  invalidMessage: "Workspace name not valid",
  missingMessage: "Workspace name cannot be empty",

});

}
 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:07:09.993

将自己从 TextBox 本身中抽象出来，然后自定义表单 onSubmit。在 formDom.submit() 之前使用的一般回调只是调用 formDijit.validate() 并将该布尔值传递给 form.submit （如果它为假，当然不会发生提交）。

换句话说，它期望验证器以阻塞/原子方式运行，并且在每个验证器函数解析返回值之前不返回。

在你的情况下，`dojo.Deferred`派上用场了。发现自己在 form.onSubmit 期间从 ajax-requests 中获取响应 - 一旦所有“进行中”的 ajax 调用都已解决，那么如果是真正的火提交。

```
<div tada-dojo-type="dijit.form.Form" id="form">
   <div data-dojo-type="app.ValidationWorkspace" name="inputfield" id="inputfield1"></div>
</div> 
```

作为填写我在您的代码库中看不到的缺失内容的示例，以下内容遵循此简化

```
<script>
    declare('app.ValidationWorkspace', [ ValidationTextBox ], {
         invalidMessageLocal : 'JS renders your entry invalid',
         invalidMessageServer: 'Server expects something different then you entered',
         invalidMessage: '',

         regExp: 'Foo*', // validates false if does not start with "Foo"

         dfdValidator: undefined,

         validator: function() {
              var curVal = this.get("value");
              if(new RegExp(this.regExp).test(curVal)) {
                    // client-side passes, run serverside
                    this.dfdValidator = dojo.xhrGet({
                         url: 'validate.sapi'+
                            '?field=' + this.inputNode.name +
                            '&value='+ value
                    });
                    // we cannot truly base anything form-wise here, but we might want
                    // to set a message (and show it, left out)
                    this.dfdValidator.then(dojo.hitch(this, function(response) {
                          this.invalidMessage = this.invalidMessageServer + " : " + response;
                    }));
              }
         }
    });
</script> 
```

并使用类似于以下内容的方式更改表单 onSubmit：

```
<script>
     dojo.addOnLoad(function() {
       dijit.byId('form').onSubmit = function() {
        var immediate = true;
        var deferreds = [];
        dojo.some(dijit.byId('form')._getDescendantFormWidgets(), function(w) {
            if(w.validate) {
                var tmp = w.validate();
                if(!tmp) immediate = false;
                else { // check if it has servervalidation in flight
                     if(w.dfdValidator) {
                         // it does, store it so we can keep a count and 
                         // not submit before all has passed
                         deferreds.push(w.dfdValidator);
                     }
                }
            }
            return tmp; /* if false - one field failed - foreach(some) stops loop */
        }); // end dojo.some
        var form = this.domNode
        var submit = function() { 
               // logic to submit your values here
               store.put(dojo.formToJson(form));
        }
        // simply stop here if local validators fail
        if(immediate == false) {

             return false;

        } else if(deferreds.length > 0) {

             // do not act before all is done    
             var dfdCounter = new dojo.Deferred();
             dfdCounter.then(submit);
             var dfdCount = deferreds.length;
             var incrCount = 0;
             var delayed = true; // delayed validation
             dojo.forEach(deferred, function(serverValidatedComplete) {
                 serverValidatedComplete.then(function(serverresponse) {
                     incrCount++;
                     if(/REGEXPTOTESTRESPONSEFALSE/.test(serverresponse))
                          delayed = false;
                     if(dfdCount == incrCount && delayed == true) 
                     {    /* YES, all is done, any errors? */
                          dfdCounter.resolve(/* optional arguments here */); 
                     }
                 });
             });
        } else {
             // no server validators are running, local validation succeeds
             submit();
        }
        // never return true - or <form> will submit as HTML should be doing
        return false;
       } // end mutation
     });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:27:27.050

接受的答案可能是正确的解决方案。但是，对于非阻塞 ajax 检查，我最终编写了一个简单的 mixin：

```
define([
  'dojo/_base/declare',
  'dojo/_base/lang',
  'app/globals',
  ], function(
    declare
  ,lang
  , g
  ){
    return declare(null, {

  ajaxSaidNo: {},
  ajaxSaidYes: {},
  ajaxRequested: {},

  constructor: function(){

    // Declaring object variable in constructor to make sure that
    // they are not class-wide (since they will be in the prototype)
    this.ajaxSaidNo = {};
    this.ajaxSaidYes = {};
    this.ajaxRequested = {};
  },

  // Overloads the validator, adding extra stuff
  ajaxValidate: function(value, options){

    // Set some defaults
    options.ajaxInvalidMessage = options.ajaxInvalidMessage || "Value not allowed";
    options.ajaxStore = options.ajaxStore || null;
    options.ajaxFilterField = options.ajaxFilterField  || 'name';

    // No ajaxStore query available, return true
    if( ! options.ajaxStore ){
      return true;
    }

    // console.log("Started validation for " + value);
    // Ajax has already said no -- returning false straight away
    if(this.ajaxSaidNo[value] ){
      this.invalidMessage = options.ajaxInvalidMessage;
      return false;
    }

    // console.log("OK, ajasSaidYes for " + value + " is " +  this.ajaxSaidYes[value]); 
    if(! this.ajaxSaidYes[value] ){
      var filterObject = {};
      filterObject[options.ajaxFilterField] = value;
      options.ajaxStore.query( filterObject ).then(
        lang.hitch(this, function(res){
          if(res && res.length ){
            this.ajaxSaidNo[value] = true;
            //console.log("Added to Ajaxfailed: " + value);
            this.validate();
          } else {
            //console.log("Added to Ajaxsuccess: " + value);
            this.ajaxSaidYes[value] = true;
            this.validate();
          }
        })
      );    
    }  

    return true;
  }

});
  }
); 
```

然后在文本框（或任何字段，*真的*）的验证功能中，只需添加最低限度即可使其工作：

```
 return this.ajaxValidate(value, {
       ajaxInvalidMessage: "Workspace taken",
       ajaxStore: g.stores.workspacesAnon,
       ajaxFilterField: 'name',
    }); 
```

就是这样......很好，很清晰，你可以将它应用到你喜欢的任何领域。（如果我收到足够多的关于我的方法的令人鼓舞的评论，我会将这个作为“接受”的答案......）

默克。

# c++ - C++ 与 ASM x86 加密/解密程序

> ID：11827167
> 
> 赞同：-2
> 
> 时间：2012-08-06T11:13:13.390
> 
> 标签：c++, encryption, assembly, x86

> **可能重复：**
> [如何解密此加密例程？](https://stackoverflow.com/questions/11677101/how-can-i-decrypt-this-encryption-routine)

我已经参加这个项目一个星期了，我很困惑。我尝试了一切，但我没能成功。如果您能为我的程序提供一些帮助，我将不胜感激。谢谢你。

我有以下代码，我需要为它编写解密例程。

```
OChars = Original char -> is the word which the user types in.           
EKey = The Encryption Key (one letter)              
Length = The length of characters that the user needs to put             
EChars = Stores the Encrypted characters in so the decryption routine can use it to decrypt it.

    void encrypt_chars (int length, char EKey){
char temp_char;                 // original/encrypted char temporary store

for (int i = 0; i < length; i++){
    temp_char = OChars [i];     // get next char from original string
    __asm {                     // call the encrypt subroutine
        push   eax              // save register values on stack to be safe
        push   ecx
        movsx  ecx,temp_char    // enregister the source character
        movsx  eax,EKey         // and encryption key.
        call   encryptB         // calls the encryption subroutingencrypt the character
        mov    temp_char,al     // only need lower byte of EAX to return encrypted char
        pop    ecx              // restore original register values from stack
        pop    eax
    }
    EChars [i] = temp_char;     // Store encrypted char in the encrypted chars array
   }
     return;

encryption routine ASM          

     __asm {

encryptB: push edx          //saves register value edx on stack
          push ecx          //saves register value ecx on stack
          not  eax          //
          add  eax,0x04     //add 4 to eax register
          mov  edx,eax      //move eax to edx
          pop  eax          //brings eax back to
          xor  eax,edx      //clear values to zero
          pop  edx          //bring edx back 
          rol  al,3         //three times.
          sub  al,0x02      //subtracts 2 from al
          ret 
}               
Here ends the encryption part            
The decryption routine will start as follows             

void decrypt_chars (int length, char EKey){
  char temp_char;                       

for (int i = 0; i < length; i++){
    temp_char = EChars [i];         
    __asm {                         

     }

      DChars [i] = temp_char;           
}
 return;

decryption routine ASM

__asm {

      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:30:03.493

尝试使用密钥 'K' 加密字符 'E' 并查看例程在每个步骤中执行的操作。然后尝试纠正他们旁边的每个操作的撤消。反转撤消指令集的顺序以获得加密例程的“撤消”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:30:24.127

我建议从替换那些只是扩展指令助记符的无用注释开始，并描述每个步骤中操作的值。就像是：

```
 push   eax              // avoid clobbering registers; just preamble
    push   ecx
    movsx  ecx,temp_char    // ecx = byte_to_encrypt
    movsx  eax,EKey         // eax = key
    ...
    push ecx                // Stack[0] = byte_to_encrypt
    ...
    pop eax                 // eax = byte_to_encrypt now... 
```

等等。现在，当您拥有它时，应该很容易提取伪代码并最终提取出该操作的数学公式。这应该很容易逆转，而不是您只需将其编码回来（如果需要，在汇编中），而无需在寄存器之间进行所有毫无意义的值改组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:31:27.157

因为它与`f(Key)`where `f`is some 函数进行异或运算，所有计算都必须撤消，*除了*那些组成的计算`f`- 它们必须正常完成。

所以，像这样：（未测试）

```
; eax = EKey, cl = char
decryptB:
  add ecx, 2   // undo sub 2
  ror cl, 3    // undo rol
  not eax      // actually do not
  add eax, 4   // actually do add 4
  xor eax, ecx // undo xor
  ret 
```

# wcf - WCF/Silverlight crossdomain and client access policy

> ID：11827168
> 
> 赞同：0
> 
> 时间：2012-08-06T11:13:15.857
> 
> 标签：wcf, silverlight, reverse-proxy, crossdomain.xml, clientaccesspolicy.xml

I have an application accessible from Forefront UAG (reverse proxy), which calls a WCF service. Running the application without the proxy, it works well, but from the proxy, the application can't get the clientaccesspolicy.xml and crossdomain.xml files.

I used fiddler and find this :![enter image description here](../Images/4ffdadb404a7194836a15a09b61621c8.png)

Does somebody knows how a solution ? Thanks in advance.

# hadoop - Changing Schemas with Hadoop Cascading

> ID：11827169
> 
> 赞同：0
> 
> 时间：2012-08-06T11:13:17.110
> 
> 标签：hadoop, cascading

I'm trying to figure out how to use cascading against an archive of data whose schema is additive over time. Why I mean by additive is that it will start out with 3 columns, for example. Then in the next release it might have 5 columns. These columns follow standard CSV layouts. My understanding is that if I specify a schema to be 5 columns long and the old schema is only 3, then Cascading will fail.

Is there a way to tell cascading to fill in the missing columns? Like a default = null?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:04:35.200

事实证明，在分隔文本的情况下，该方案有一个特殊的构造函数。这里的构造函数[Cascading JavaDoc](http://docs.cascading.org/cascading/2.0/javadoc/cascading/scheme/hadoop/TextDelimited.html#TextDelimited%28cascading.tuple.Fields,%20cascading.scheme.hadoop.TextLine.Compress,%20boolean,%20boolean,%20java.lang.String,%20boolean,%20java.lang.String,%20java.lang.Class%5B%5D,%20boolean%29)表示我们可以调整解析的严格性。如果您说 strict 为 false，Cascading 将加载数据，并在末尾附加 null。[对此的困惑似乎是可以理解的，因为在级联用户组](https://groups.google.com/d/topic/cascading-user/INNO9bEBHX4/discussion)中有两个关于如何执行此操作的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:54:10.880

而不是硬编码您的架构，您可以使其配置驱动。

我的意思是您可以在属性文件 /xml 文件中定义您的列列表。

这样您就不需要经常更改代码。

前任：

**列：cloumn1，column2，column3**

您可以直接将该字符串数组传递给[Fields](http://docs.cascading.org/cascading/1.2/javadoc/cascading/tuple/Fields.html)构造函数。

事实上，我已经在我目前的项目中成功地实现了这一点。

# c# - c# RoleProvider 以特定角色登录

> ID：11827174
> 
> 赞同：1
> 
> 时间：2012-08-06T11:13:53.590
> 
> 标签：c#, roleprovider, role

我尝试为我的应用程序实现登录。用户可以有多个角色（查看者、操作员、管理员等）。但是他必须选择一个他想登录的角色，所以他可能有管理员权限，但他可以作为没有管理员权限的“查看者”登录。

现在的问题是，如果我尝试使用RequiredRole 属性为管理员保护某些功能，如果用户以查看者身份登录，即使他拥有管理员权限，他也应该无法访问此功能。

框架是否支持这种行为，或者以前有没有人做过类似的事情？

无论如何感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:26:48.460

当他以查看者身份登录时尝试执行需要管理员的操作时，您没有指定您希望发生的事情，但是由于您可以实现自己的角色提供者，这很容易做到。

您应该能够在会话或您的用户主体对象中存储一些内容，说明“可用角色”（例如，其中一些将无法选择管理员），然后另一个用于选定角色。您需要做的就是将一些页面放入您的站点，以允许用户选择他们当前的角色。

由于您将使用自己的角色提供程序，因此您可以在检查角色时实现这一点以从会话（或用户主体）中提取相关信息。您仍然可以随意使用RequiredRole 属性。

当您无权将您重定向到 403 页面时，您可以如何更改将您重定向到登录表单的行为（例如[，使用 ASP.NET 成员资格，我如何显示 403？](https://stackoverflow.com/questions/1847099/with-asp-net-membership-how-can-i-show-a-403)） . 然后，您可以在此页面上显示一些内容，如果他们有可用的角色，则允许用户切换到更高的角色。

# php - PHP - 将日期插入 mysql

> ID：11827175
> 
> 赞同：12
> 
> 时间：2012-08-06T11:14:05.673
> 
> 标签：php, mysql, date, insert, format

我正在尝试将日期插入 mysql 但每次它失败并像`0000-00-00`phpmyadmin一样出现

我的日期格式是`2012-08-06`（yyyy-mm-dd），数据库中的日期字段类型是`date`.

```
$date = "2012-08-06";
mysql_query("INSERT INTO data_table (title, date_of_event) 
             VALUES('". $_POST['post_title'] ."',
                    '". $date ."')") or die(mysql_error()); 
```

尝试更改`-`或`/`删除它们，它不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T11:16:07.493

尝试

```
$date = "2012-08-06";
$date=date("Y-m-d",strtotime($date)); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-06T11:17:08.323

`CAST`在 MySQL 中尝试函数：

```
mysql_query("INSERT INTO data_table (title, date_of_event)
VALUES('". $_POST['post_title'] ."',
CAST('". $date ."' AS DATE))") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T11:19:28.807

Unless you want to insert different dates than "today", you can use CURDATE():

```
$sql = 'INSERT INTO data_tables (title, date_of_event) VALUES ("%s", CURDATE())';
$sql = sprintf ($sql, $_POST['post_title']); 
```

PS! Please do not forget to sanitize your MySQL input, especially via mysql_real_escape_string ()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:20:10.247

尝试先转换日期。

```
$date = "2012-08-06";

mysql_query("INSERT INTO data_table (title, date_of_event)
               VALUES('" . $_POST['post_title'] . "',
                      '" . $date . "')") 
           or die(mysql_error()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:36:37.737

**卡住时如何调试 SQL 查询**

打印您的查询并直接在 mysql 或 phpMyAdmin 中运行

```
$date = "2012-08-06";
$query= "INSERT INTO data_table (title, date_of_event) 
             VALUES('". $_POST['post_title'] ."',
                    '". $date ."')";
echo $query;
mysql_query($query) or die(mysql_error()); 
```

这样您就可以确保问题不在您的 PHP 脚本中，而是在您的 SQL 查询中

**如何提交有关 SQ 查询的问题**

确保您提供了足够的关闭

*   表架构
*   询问
*   错误信息是任何

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-26T07:14:28.487

```
$date=$year."-".$month."-".$day; 
$new_date=date('Y-m-d', strtotime($dob)); 
$status=0;  
$insert_date = date("Y-m-d H:i:s");  
$latest_insert_id=0; 

$insertSql="insert into participationDetail (formId,name,city,emailId,dob,mobile,status,social_media1,social_media2,visa_status,tnc_status,data,gender,insertDate)values('".$formid."','".$name."','".$city."','".$email."','".$new_date."','".$mobile."','".$status."','".$link1."','".$link2."','".$visa_check."','".$tnc_check."','".json_encode($detail_arr,JSON_HEX_APOS)."','".$gender."','".$insert_date."')"; 
```

# ruby-on-rails - ruby：nil:NilClass 的未定义方法“[]”

> ID：11827176
> 
> 赞同：1
> 
> 时间：2012-08-06T11:14:08.770
> 
> 标签：ruby-on-rails, ruby

更新后，当我尝试启动我的 ruby​​ 应用程序时，出现错误：

```
undefined method `[]' for nil:NilClass 
```

提取的源代码（第 8 行附近）：

```
8: <% account = Account.find_mak -%>

app/models/account.rb:68:in `find_mak'
app/views/layouts/_js_api_init.html.erb:8:in `block in _app_views_layouts__js_api_init_html_erb___274999121_65047152'
app/views/layouts/_js_api_init.html.erb:1:in `_app_views_layouts__js_api_init_html_erb___274999121_65047152'
app/views/layouts/logged_out.html.erb:17:in `_app_views_layouts_logged_out_html_erb__713588534_51277824'
app/controllers/leads_controller.rb:11:in `new'
config/initializers/newrelic_instrumentation.rb:30:in `call'
config/initializers/newrelic_instrumentation.rb:51:in `call' 
```

但是，我不明白第 8 行发生了什么，我该如何调试这个错误？如果您需要更多信息来回答，请写评论。谢谢。

```
 class Account

  include Mongoid::Document
  include Mongoid::Timestamps

  attr_accessible :org_name, :time_zone

  field :org_name
  ... ...

  def self.find_mak
    where( org_name: 'Mak' ).first
  end
end 
```

现在在其他地方出错

```
<%= form_tag "/apps/#{Account.find_mak.api_key}/users",
               method: :post, remote: true,
               'data-type' => 'json',
               id: 'register',
               :class => 'custom register' do %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:56:04.833

在您看来，这一点：

```
Account.find_mak.api_key 
```

将导致您看到的错误

```
 Account.find_mak 
```

返回 nil，如果您的数据库中不存在匹配的记录，它将返回 nil。

我的建议是不要`#{Account.find_mak.api_key}`直接在视图中使用，而是将它分配给控制器中的一个变量，然后您可以检查它是否为零：

```
def some_action
  @account = Account.find_mak
  if @account.nil?
    # handle this case, i.e. a redirect to 404
  end
end 
```

然后在您看来，您可以使用该变量并确定它不能为 nil：

```
<%= form_tag "/apps/#{@accpunt.api_key}/users", #... 
```

# java - “cscript //NoLogo”代表什么？

> ID：11827177
> 
> 赞同：3
> 
> 时间：2012-08-06T11:14:10.443
> 
> 标签：java, file, jtextfield, filewriter, notepad

这是一个运行记事本程序并粘贴存储在该程序本身中的特定文本的java程序代码....

我想知道您是否可以向我解释`String vbs`值，以及.`File file`和. 如果你很慷慨，请向我解释整个代码。`("cscript //NoLogo " + file.getPath())``Process p`

我是 Java 的初学者，不完全是，但如果你想从 0 到 10 来判断，我会是 1.5/10

```
import java.io.File;
import java.io.FileWriter;
import javax.swing.JTextField;

 public class PasteToNotepad {

   public static void main(String[] args) throws Exception {
     String text = "Some text for testing.";
     JTextField textField = new JTextField(text);
     textField.setSelectionStart(0);
     textField.setSelectionEnd(text.length() - 1);
     textField.copy();

     String vbs = ""
             + "Set WshShell = WScript.CreateObject(\"WScript.Shell\")\n"
             + "WshShell.Run \"notepad\", 9\n"
             + "WScript.Sleep 500\n"
             + "WshShell.SendKeys \"^V\"";

     File file = File.createTempFile("PrintDialog", ".vbs");
     file.deleteOnExit();
     FileWriter fw = new java.io.FileWriter(file);
     fw.write(vbs);
     fw.close();
     Process p = Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath());
     p.waitFor();
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-17T16:00:37.860

Though this question *wasn't* primarily about `cscript //NoLogo`, regardless of its title, it still googles well for that phrase, so let's answer that in too much detail too.

I'm not sure why they call it a "logo", but it's exactly what you might think from the built-in help @MByD displayed. But in the interest of over-completeness...

```
C:\prompt>cscript spam.js
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

C:\prompt>cscript //NoLogo spam.js

C:\prompt> 
```

So if you're piping output and don't want all that Microsoft boilerplate, `\\Nologo`-ify it.

```
C:\prompt>cscript spam.js > out.txt

C:\prompt>more out.txt
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

C:\prompt>cscript spam.js //NoLogo > out.txt

C:\prompt>more out.txt

C:\prompt> 
```

(`spam.js` has `var spam = "spam";` in it.)

And, wow, that is a horribly convoluted way to get text into Notepad. I'm guessing it's more about teaching how to write to a file and `exec` a command from Java, perhaps?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:16:43.643

你基本上做的是：

1.  创建一个包含脚本的字符串 ( `String vbs = ...`)
2.  将其写入文件（`File file = File...`to `fw.close()`）
3.  `Process p = Runtime.getRuntime().exec(...)`通过调用 cscript ( )在单独的进程中执行此脚本

关于`cscript //NoLogo`，这与 Java 几乎没有关系，这是一个 windows 命令：

```
C:\Documents and Settings\bsharet>cscript
Microsoft (R) Windows Script Host Version 5.7
Copyright (C) Microsoft Corporation. All rights reserved.

Usage: CScript scriptname.extension [option...] [arguments...]

Options:
 //B         Batch mode: Suppresses script errors and prompts from displaying
 //D         Enable Active Debugging
 //E:engine  Use engine for executing script
 //H:CScript Changes the default script host to CScript.exe
 //H:WScript Changes the default script host to WScript.exe (default)
 //I         Interactive mode (default, opposite of //B)
 //Job:xxxx  Execute a WSF job
 //Logo      Display logo (default)
 //Nologo    Prevent logo display: No banner will be shown at execution time
 //S         Save current command line options for this user
 //T:nn      Time out in seconds:  Maximum time a script is permitted to run
 //X         Execute script in debugger
 //U         Use Unicode for redirected I/O from the console 
```

# mysql - 如何在mysql中获取两个日期之间的日期？

> ID：11827178
> 
> 赞同：3
> 
> 时间：2012-08-06T11:14:12.880
> 
> 标签：mysql

在 MySql 数据库中有`AM_TIMETABLE`表

```
UserId        DateTime
 101        2012-08-08 04:00:00 
 102        2012-08-15 10:00:00
 103        2012-08-18 09:00:00
 104        2012-08-24 05:00:00 
```

我的问题是，我正在传递开始日期和结束日期，然后我将获得`DateTime`前列日期：

```
select * from AM_TIMETABLE where DateTime<='2012-08-08 00:00:00' and DateTime>='2012-08-20 00:00:00' 
```

然后我将获得 101,102,103 UserId 的值。但我收到错误`please help`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:23:46.233

`BETWEEN`为此要好得多。而且你也必须逃避`DateTime`，因为它是一个保留词。

```
SELECT * 
FROM   AM_TIMETABLE 
WHERE  `DateTime` BETWEEN '2012-08-08 00:00:00' AND '2012-08-20 00:00:00' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:16:01.703

这可能会更好：

```
select * from AM_TIMETABLE where `DateTime`<='2012-08-20 00:00:00' and `DateTime`>='2012-08-08 00:00:00' 
```

`DateTime`也可能是保留字，对此不太确定。如果是这种情况，您需要在它们周围加上反引号（前后一个 `）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:18:52.940

You need to quote the datetime values.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:20:19.233

你必须把日期放在引号里

```
 set @start_date='2012-08-08 00:00:00';
   set @end_date='2012-08-20 00:00:00';
   select * from AM_TIMETABLE where DateTime<=@start_date and DateTime>=@end_date 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:18:10.993

日期时间字段必须在引号内：

```
SELECT * 
FROM AM_TIMETABLE 
WHERE `DateTime` <= '2012-08-08 00:00:00' AND 
      `DateTime` >= '2012-08-20 00:00:00'; 
```

或者您可以尝试：

```
SELECT * 
FROM AM_TIMETABLE 
WHERE `DateTime` NOT BETWEEN '2012-08-08 00:00:00' AND '2012-08-20 00:00:00'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-22T21:23:47.990

```
SELECT * FROM AS_TIMETABLE WHERE DateTime BETWEEN CAST('2012-08-08 00:00:00' AS DATETIME) AND CAST('2012-08-08 00:00:00' AS DATETIME); 
```

# php - 计算所有可能的组合

> ID：11827181
> 
> 赞同：0
> 
> 时间：2012-08-06T11:14:22.243
> 
> 标签：php, math, permutation

我正在尝试计算游戏中不同类型角色的可能服装组合数量，并列出这些组合或 PHP 脚本以生成文件名。

我有 5 种不同类型的角色（墨西哥人、亚洲人、美国人、非洲人）。

每个字符有 3 种不同的尺寸（小、中、大）

有 9 套不同的服装（衬衫、短裤、鞋子）。

齿轮按以下顺序分组：

```
Shirt (A) | X1  X2  X3 | Y1  Y2  Y3 | Z1 Z2 Z3
Short (B) | X1  X2  X3 | Y1  Y2  Y3 | Z1 Z2 Z3
Shoes (C) | X1  X2  X3 | Y1  Y2  Y3 | Z1 Z2 Z3 
```

小是 X1 - X3，中是 Y1 -Y3，大是 Z1 - Z3

您必须在下一个之前按顺序解锁每种衣服。

每个组（X、Y、Z）在前进之前必须解锁所有项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:47:32.957

有关生成所有组合的算法，请参阅 Knuth[计算机编程的艺术，第 4 卷，分册 3：生成所有组合和分区](https://rads.stackoverflow.com/amzn/click/com/0201853949)

# ios - 同步iOS前置摄像头录制和屏幕上不同的视频显示

> ID：11827182
> 
> 赞同：1
> 
> 时间：2012-08-06T11:14:25.057
> 
> 标签：ios, avcapturesession

我正在为一个教育网络应用程序构建一个后端程序，该应用程序的前端显示某物的视频（可能是服务器上的一些视频），同时使用网络摄像头记录用户对视频的响应。在此之后，服务器端有一些处理。我想将前端移植到 iOS。我做了一些搜索，但我不清楚他们是否回答了这个确切的问题。请让我知道是否有办法在屏幕上播放另一个视频时同时从 iOS 设备前置摄像头录制？我的问题也与技术可行性和苹果公司的相关规则有关。

如果这是重复的，请让我知道它是重复的问题，因为我无法找到一个好的答案。谢谢！

哈里什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:42:57.157

这样做应该没有问题，但是您需要监控性能，因为相机会严重消耗 iOS 处理器和内存，视频也是如此。

对于这两种类型的活动，您可以使用作为 iOS SDK 一部分提供的 AV Foundation 框架。您将在屏幕上提供视频，然后在应用程序的单独部分中从屏幕上捕获视频（它们是两个相对不相关的区域 - 唯一真正重要的是告诉相机记录多长时间以进行同步两个上）。要从摄像头捕获视频，而不是将其放在屏幕上，您需要在 AVCaptureSession 中手动监控从摄像头返回的媒体。

# jquery - 向数组添加多个值时遇到问题

> ID：11827183
> 
> 赞同：0
> 
> 时间：2012-08-06T11:14:25.797
> 
> 标签：jquery

在[这个小提琴](http://jsfiddle.net/aaronk85/SDCkW/4)中，当您选择一个值时，它会填充所有输入字段。我试图在[这个小提琴](http://jsfiddle.net/aaronk85/VNSam/14/)中使用同样的原则，但它不起作用。我不太清楚为什么？

我没有收到任何错误，但我觉得下面的代码好像在错误的位置并且被忽略了？

```
 jQuery('#newtable select').on('change', function() {
        var div_id = 'div_'+jQuery(this).attr('id');
        var select_val = jQuery(this).find('option:selected').data('value');
        console.log();
        if( select_val != '' ) {
            var a = select_val.split(',');
            var count = 0;
            jQuery('tr#'+div_id+' .flag').each(function() {
            jQuery(this).val(a[count]);
            ++count;
            });
        } else {
            jQuery('tr#'+div_id+' input.input_text').val('');
        }
    }); 
```

我在第二个小提琴中想要实现的是，当您选择“Ryan $100”时，它会更新以下代码。

```
 <table id="newtable">
    <tr id='div_m2'>
            <input type="hidden" class='input_text flag' value="0" name="id[]">
            <input type="hidden" class='input_text flag' value="0" name="name[]">
            <input type="hidden" class='input_text flag' value="0" name="sales[]">
            <input type="hidden" class='input_text flag' value="0" name="price[]">
            <td colspan="3">
                <select id='m2'>
    <option value="" data-value="">Choose Salesman</option>
    <option value="0" data-value="id_03,Ryan,1,100">Ryan $100</option>
    <option value="0" data-value="id_01,Tom,1,100">tom $100</option>
                </select>
            </td>
        </tr>
    </table> 
```

对此

```
 <input type="hidden" class='input_text flag' value="id_03" name="id[]">
        <input type="hidden" class='input_text flag' value="Ryan" name="name[]">
        <input type="hidden" class='input_text flag' value="1" name="sales[]">
        <input type="hidden" class='input_text flag' value="100" name="price[]"> 
```

当您执行此操作时，还会运行 showValues()，以便将上述数据包含在我正在生成的表中。

因此，如果您选择 ryan $100，我想要的表格输出是。

```
 <table id="results">
        <tbody>
        <tr><th>Rank</th><th>Salesman</th><th>Products Sold</th><th>Total Sale Price</th><th>Commission (30% of Total Sale Price + 5 for each sale)</th></tr>
        <tr data-id="id_03"><td>1</td><td>ryan</td><td>2</td><td>110</td><td>550.00</td></tr>
        <tr data-id="id_02"><td>2</td><td>Jerry</td><td>3</td><td>60</td><td>300.00</td></tr>
        <tr data-id="id_01"><td>3</td><td>Tom</td><td>5</td><td>50</td><td>250.00</td></tr>
        </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:05:03.120

这应该可以解决您的问题：

[http://jsfiddle.net/VNSam/19/](http://jsfiddle.net/VNSam/19/)

如果您想在选择时更新您的表格，您应该调用 showValue() :-)

# android - 以编程方式位于页面底部的选项卡

> ID：11827185
> 
> 赞同：2
> 
> 时间：2012-08-06T11:14:42.920
> 
> 标签：android, android-tabhost, android-tabactivity, android-tabs

我已经研究了很多如何使用此代码对齐页面底部的选项卡，但我没有找到任何内容，我将代码用作：

```
public class MainActivity  extends TabActivity {

    /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
    TabHost tabHost = getTabHost();   

    tabHost.addTab(tabHost.newTabSpec("tab1")
            .setIndicator("Home")
            .setContent(new Intent(this, TabGroup1Activity.class)));

    tabHost.addTab(tabHost.newTabSpec("tab2")
            .setIndicator("Search"/*, getResources().getDrawable(R.drawable.ic_launcher)*/)
            .setContent(new Intent(this, TabGroup2Activity.class))
            );

    tabHost.addTab(tabHost.newTabSpec("tab3")
            .setIndicator("About Us")
            .setContent(new Intent(this, TabGroup3Activity.class)));

     tabHost.getTabWidget().setCurrentTab(0);
    tabHost.getTabWidget().setGravity(Gravity.BOTTOM); 
```

TabGroup1Activity 是：

```
public class TabGroup1Activity extends TabGroupActivity{
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startChildActivity("HomeActivity", new Intent(this,HomeActivity.class));
    }
} 
```

通过使用此代码，标签栏出现在屏幕顶部，但我想将其放在底部..请提出一些建议，我发现这种方法很容易创建标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:19:08.173

```
 public void addNewTab(Context context, String title, int height){
  TabHost tabHost = getTabHost();  // The activity TabHost
  Intent intent = new Intent().setClass(context, HelloTabsActivity.class);
  TabHost.TabSpec spec = tabHost.newTabSpec(title.toLowerCase()).setIndicator(title).setContent(intent);
 tabHost.addTab(spec);

int totalTabs = tabHost.getTabWidget().getChildCount();
 ((RelativeLayout)tabHost.getTabWidget().getChildTabViewAt(totalTabs-1)).removeViewAt(0);
 ((TextView)((RelativeLayout)tabHost.getTabWidget().getChildTabViewAt(totalTabs-1)).getChildAt(0)).setHeight(30);
 tabHost.getTabWidget().getChildAt(totalTabs-1).getLayoutParams().height = height;
  } 
```

# multithreading - Java 线程转储：`WAITING (on object monitor)` 行后面没有`waiting on <0x1234>` 行

> ID：11827186
> 
> 赞同：2
> 
> 时间：2012-08-06T11:14:42.937
> 
> 标签：multithreading, jvm, thread-dump

我的线程`TP-Processor27`正在等待，告诉我一个线程转储。

通常`WAITING (on object monitor)`行之后紧跟一条`waiting on <0x09c34480>`或类似的行。但不在下面的转储中。在这种情况下，我可以知道在哪个 id 上等待吗？

```
"TP-Processor27" daemon prio=10 tid=0x00002aab91c88800 nid=0x58d7 in Object.wait() [0x0000000050d01000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:485)
        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)
        - locked <0x00002aaaccce0150> (a org.apache.commons.pool.impl.GenericObjectPool$Latch)
        at org.apache.commons.dbcp.AbandonedObjectPool.borrowObject(AbandonedObjectPool.java:88)
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:115)
        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1053)
[...]

"TP-Processor28" daemon prio=10 tid=0x00002aab91c8a000 nid=0x58d8 runnable [0x0000000050e03000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:25:09.373

好像看到了一个实际没有问题的问题。

# php - 从 MySQL 结果集构建自定义数组

> ID：11827189
> 
> 赞同：0
> 
> 时间：2012-08-06T11:14:52.850
> 
> 标签：php, arrays

我有以下表格，其中包含博客文章的图片：

```
+----+---------+------------------------+-----------+-----------+-------+
| id | id_post | imagine                | descriere | tip       | sters |
+----+---------+------------------------+-----------+-----------+-------+
|  1 |       4 | asdasdsadasdasdasd.jpg | NULL      | thumbnail |     0 |
|  2 |       4 | asdasdsadasdasdasd.jpg | NULL      | full      |     0 |
|  3 |       4 | asdasdsadasdasdasd.jpg | NULL      | thumbnail |     0 |
|  4 |       4 | asdasdsadasdasdasd.jpg | NULL      | full      |     0 |
+----+---------+------------------------+-----------+-----------+-------+ 
```

在此表中有一个名为“tip”（或英文类型）的列，它表示图像类型：全屏或缩略图。当有人上传图片时，总会有一对“完整”和“缩略图”条目。

我要做的是获取帖子的所有图像并将它们存储到一个数组中，但每个图像都有一个条目，如下所示：Array（[0] => Array（[thumbnail] =>“1 .jpg", [完整] => "11.jpg")...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:24:14.537

选择您的表并遵循此代码，

```
$array[]= array();
while($row = mysql_fetch_assoc($result))
{
    //using 2-d array
    $array[$row[id]][$row[tip]]= $row[imagine];
} 
```

现在，当您要检索特定帖子的图像时，您可以使用

```
$array[$post_id]['full']
$array[$post_id]['thumbnail'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:29:05.110

那么，第一，你需要某种变量，将`full`图像与`thumbnail`图像绑定。目前没有办法告诉女巫缩略图去女巫图像。添加一个字段，例如`full_id`或将条目合并到一行中，例如：

```
+----+---------+--------------+---------------+-----------+-------+
| id | id_post | imagine_full | imagine_thumb | descriere | sters |
+----+---------+--------------+---------------+-----------+-------+ 
```

之后，使用循环遍历您的值，如@voodoo417 所示：

```
$items = array();

while ( $row = mysql_fetch_array( $result ) ) {
    $items[] = array( 
                 'thumbnail' => $row['imagine_thumb'],
                 'full' => $row['imagine_full']
            );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:20:09.040

try like this

```
$items = array();
while ($row=mysql_fetch_array(RESOURSE)){
 $items[] = array( 'thumbnail'=>$row['thumbnail'], 'full' =>$row['full'] );
} 
```

# maven - 执行 org.codehaus.gmaven:gmaven-plugin:1.3:testCompile:groovy/lang/Closure 时缺少必需的类

> ID：11827190
> 
> 赞同：2
> 
> 时间：2012-08-06T11:15:00.110
> 
> 标签：maven, groovy, gmaven-plugin, gmaven

我正在尝试`mvn clean install`一个已经登陆我盘子的 Maven 项目，但是我遇到了一个异常，我认为这可能是由于 Groovy 的版本冲突，这就是我得到的：

```
Failed to execute goal org.codehaus.gmaven:gmaven-plugin:1.3:testCompile (default) on project maven-myproject-plugin: Execution default of goal org.codehaus.gmaven:gmaven-plugin:1.3:testCompile failed: A required class was missing while executing org.codehaus.gmaven:gmaven-plugin:1.3:testCompile: groovy/lang/Closure 
```

`-e`用标志跟踪：

```
Caused by: java.lang.NoClassDefFoundError: groovy/lang/Closure
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.codehaus.groovy.vmplugin.v5.Java5.configureClassNode(Java5.java:318)
    at org.codehaus.groovy.ast.ClassNode.lazyClassInit(ClassNode.java:263)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:957)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:952)
    at org.codehaus.groovy.control.ResolveVisitor.checkCyclicInheritence(ResolveVisitor.java:1309)
    at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1286)
    at org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:148)
    at org.codehaus.groovy.control.CompilationUnit$6.call(CompilationUnit.java:574)
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:814)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:511)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:487)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:464)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:448)
    at org.codehaus.gmaven.runtime.v1_7.ClassCompilerFeature$ClassCompilerImpl.compile(ClassCompilerFeature.java:148)
    at org.codehaus.gmaven.plugin.compile.AbstractCompileMojo.compile(AbstractCompileMojo.java:200)
    at org.codehaus.gmaven.plugin.compile.AbstractCompileMojo.process(AbstractCompileMojo.java:164)
    at org.codehaus.gmaven.plugin.ComponentMojoSupport.doExecute(ComponentMojoSupport.java:60)
    at org.codehaus.gmaven.plugin.compile.TestCompileMojo.doExecute(TestCompileMojo.java:90)
    at org.codehaus.gmaven.plugin.MojoSupport.execute(MojoSupport.java:69)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    ... 20 more
Caused by: java.lang.ClassNotFoundException: groovy.lang.Closure
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:696)
    at groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:793)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 43 more 
```

这些是我正在使用的相关插件：

org.apache.maven.plugins maven-compiler-plugin ${maven-compiler-plugin.version} 1.6 1.6 true

```
 <plugin>
            <groupId>org.codehaus.gmaven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>1.3</version>
            <configuration>
                <providerSelection>1.7</providerSelection>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.gmaven.runtime</groupId>
                    <artifactId>gmaven-runtime-1.7</artifactId>
                    <version>1.3</version>
                    <exclusions>
                        <exclusion>
                            <groupId>org.codehaus.groovy</groupId>
                            <artifactId>groovy-all</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>1.7.5</version>
                </dependency>
            </dependencies>
        </plugin> 
```

我已经尝试更新`groovy-all`和的版本`gmaven-plugin`，并且我还尝试按照[之前的 SO 问题中的建议设置 providerSelection](https://stackoverflow.com/questions/2199547/maven-compile-mixed-java-groovy-1-7-project-using-gmaven-plugin)

这是我的 Java/Maven 版本：

```
mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Maven home: /Users/JElsey/Development/tools/apache-maven-3.0.4
Java version: 1.6.0_32, vendor: Apple Inc.
Java home: /Library/Java/JavaVirtualMachines/1.6.0_32-b05-420.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.4", arch: "x86_64", family: "mac" 
```

关于可能导致这种情况的任何指示？

**编辑1：**

我已经尝试将 maven 降级到 2.2.1，并重新指向符号链接以确保它不会尝试使用 Apple 喜欢随附的预打包 3.0.4，如此[处](http://cyntech.wordpress.com/2011/03/09/maven-2-error/)所述。

我还是过不去，我不知道...

```
[FATAL ERROR] Container realm = plexus.core
urls[0] = file:/Users/JElsey/Development/tools/apache-maven-2.2.1/lib/maven-2.2.1-uber.jar
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] groovy/lang/Closure
groovy.lang.Closure
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.NoClassDefFoundError: groovy/lang/Closure
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.codehaus.groovy.vmplugin.v5.Java5.configureClassNode(Java5.java:318)
    at org.codehaus.groovy.ast.ClassNode.lazyClassInit(ClassNode.java:263)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:957)
    at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:952)
    at org.codehaus.groovy.control.ResolveVisitor.checkCyclicInheritence(ResolveVisitor.java:1309)
    at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1286)
    at org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:148)
    at org.codehaus.groovy.control.CompilationUnit$6.call(CompilationUnit.java:574)
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:814)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:511)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:487)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:464)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:448)
    at org.codehaus.gmaven.runtime.v1_7.ClassCompilerFeature$ClassCompilerImpl.compile(ClassCompilerFeature.java:148)
    at org.codehaus.gmaven.plugin.compile.AbstractCompileMojo.compile(AbstractCompileMojo.java:200)
    at org.codehaus.gmaven.plugin.compile.AbstractCompileMojo.process(AbstractCompileMojo.java:164)
    at org.codehaus.gmaven.plugin.ComponentMojoSupport.doExecute(ComponentMojoSupport.java:60)
    at org.codehaus.gmaven.plugin.compile.TestCompileMojo.doExecute(TestCompileMojo.java:90)
    at org.codehaus.gmaven.plugin.MojoSupport.execute(MojoSupport.java:69)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.ClassNotFoundException: groovy.lang.Closure
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:696)
    at groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:793)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T02:40:56.357

I haven't seen the exact error you have, but I've found Groovy 1.8.7, gmaven-plugin 1.4, and gmaven-runtime-1.8 to be a successful combination. Note that I had to include jansi as a workaround for [this bug](https://jira.codehaus.org/browse/GMAVEN-103) in `mvn groovy:shell`.

Add Groovy 1.8.7 to your dependencies:

```
<dependencies>
    <dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy-all</artifactId>
    <version>1.8.7</version>
</dependency> 
```

Then add the plugin configuration:

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.gmaven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>1.4</version>
            <executions>
                <execution>
                    <goals>
                        <goal>generateStubs</goal>
                        <goal>compile</goal>
                        <goal>generateTestStubs</goal>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <providerSelection>1.8</providerSelection>
            </configuration>
            <dependencies>
                <dependency>
                  <groupId>org.codehaus.gmaven.runtime</groupId>
                  <artifactId>gmaven-runtime-1.8</artifactId>
                  <version>1.4</version>
                  <exclusions>
                    <exclusion>
                      <groupId>org.codehaus.groovy</groupId>
                      <artifactId>groovy-all</artifactId>
                    </exclusion>
                  </exclusions>
                </dependency>
                <dependency>
                  <groupId>org.codehaus.groovy</groupId>
                  <artifactId>groovy-all</artifactId>
                  <version>1.8.7</version>
                </dependency>
                <dependency>
                    <groupId>org.fusesource.jansi</groupId>
                    <artifactId>jansi</artifactId>
                    <version>1.9</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T12:31:52.470

对于较新版本的 Groovy 和其他版本，也可以试试这个：

* * *

```
<dependency>
   <groupId>org.codehaus.groovy</groupId>
   <artifactId>groovy-all</artifactId>
   <version>2.4.1</version>
</dependency> 
```

* * *

```
<plugin>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.5</version>
    <executions>
       <execution>
          <goals>
              <goal>generateStubs</goal>
              <goal>compile</goal>
              <goal>generateTestStubs</goal>
              <goal>testCompile</goal>
          </goals>
       </execution>
    </executions>
    <configuration>
        <providerSelection>1.8</providerSelection>
        <source/>
    </configuration>
    <dependencies>
       <dependency>
           <groupId>org.codehaus.gmaven.runtime</groupId>
           <artifactId>gmaven-runtime-1.8</artifactId>
           <version>1.5</version>
           <exclusions>
               <exclusion>
                   <groupId>org.codehaus.groovy</groupId>
                   <artifactId>groovy-all</artifactId>
               </exclusion>
           </exclusions>
        </dependency>
        <dependency>
           <groupId>org.codehaus.groovy</groupId>
           <artifactId>groovy-all</artifactId>
           <version>2.4.1</version>
        </dependency>
        <dependency>
           <groupId>org.fusesource.jansi</groupId>
           <artifactId>jansi</artifactId>
           <version>1.11</version>
        </dependency>
    </dependencies>
</plugin> 
```

# c# - 使用 webBrowser 进度更改时总是出现异常

> ID：11827196
> 
> 赞同：1
> 
> 时间：2012-08-06T11:15:17.890
> 
> 标签：c#

你知道为什么我总是得到这个例外吗？ ![例外](../Images/6e08c6e0c76ddd45cf67389e4881fd76.png)

这是我的代码

```
private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
    {
        toolStripProgressBar1.Maximum = (int)e.MaximumProgress;
        toolStripProgressBar1.Value = (int)e.CurrentProgress;
    } 
```

我会很感激任何答案，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:20:00.290

According to [msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserprogresschangedeventargs.currentprogress.aspx):

> The number of bytes that have been loaded or -1 to indicate that the download has completed.

And the -1 value is not valid progress value. And it indicates that download has completed so displaying progressbar is pointless. I think this state would be good place to hide progress window.

In your code you are casting form `long` to `int` which will cause you similar exception when you download file which size will be greater then 2,147,483,647 bytes (int.MaxValue). You should assign

```
toolStripProgressBar1.Maximum = 100; 
```

and in event

```
toolStripProgressBar1.Value = (int)Math.Floor((e.CurrentProgress / (double)e.MaximumProgress) * 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:20:11.050

看起来好像`e.CurrentProgress`正在返回 -1（已加载或下载已完成的字节数。）。您可以通过使用条件语句检查值是否 > -1 来停止发生的错误，如果是则更新进度条。

例如：

```
if ((int)e.CurrentProgress > -1) {
    toolStripProgressBar1.Value = (int)e.CurrentProgress;
} 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserprogresschangedeventargs.currentprogress.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserprogresschangedeventargs.currentprogress.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:19:29.193

In your coding you are not checking the currentprogress value and simply assigning it to the progress bar, so the value when it is less than minimum value also been assigned to it. So, do it like below.

```
if((int)(e.CurrentProgress) > -1)
    toolStripProgressBar1.Value = (int)e.CurrentProgress; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:19:42.400

Your `e.CurrentProgress` is `-1`. Your minimum value is `0`.

That's why you catch exception.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:21:57.010

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserprogresschangedeventargs.currentprogress.aspx)-下载完成时`CurrentProgress`，事件参数类的属性`WebBrowserProgressChangedEventArgs`值为 -1。

请使用以下代码确保进度条完全反映下载状态：

```
 private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
    {
        toolStripProgressBar1.Maximum = (int)e.MaximumProgress;
        toolStripProgressBar1.Value = ((int)e.CurrentProgress < 0 || (int)e.MaximumProgress < (int)e.CurrentProgress) ? (int)e.MaximumProgress : (int)e.CurrentProgress;
    } 
```

# html - 取消一些 CSS 样式

> ID：11827200
> 
> 赞同：8
> 
> 时间：2012-08-06T11:15:53.613
> 
> 标签：html, css

对于一个项目，我必须使用已定义的样式表。我无法编辑它，我必须接受它。

但是，有些样式不适合本网站（例如边距）。

我也创建了自己的 CSS 文件来覆盖其中的一些属性。

一个例子，如果我有这个：

```
<div id="main-content" class="container">My test text</div> 
```

以及 css 文件中的以下 css 指令：

```
div.container{margin:5px}
div#main-content{margin-left:235px; ...} 
```

我想在我的 css 中定义 div#main-content 没有这个边距，但它是默认值。

我怎么能做到？我不想这样做，`margin-left:0px`因为如果我有一个全局样式（说所有都`div.container`应该有 5px 的边距，我希望它适用于我以前的 div。这些数据可能会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:33:10.780

没有纯 CSS 方法可以在不明确将其设置为另一个值的情况下删除属性值声明。

所以如果你有这样的情况：

```
 <div id="divA" class="class3 class1"></div>
 <div id="divB" class="class3 class2"></div>

 .class1{margin:2px;}
 .class2{margin:3px;}
 .class3{margin:10px;} 
```

...并且您想取消 class3 的效果，以便 divA 的边距为 2px，而 divB 的边距为 5px，您唯一的纯 CSS 资源将涉及明确引用每个案例。IE 在您的覆盖样式表中，您必须重新断言：

```
 .class1{margin:2px;}
 .class2{margin:3px;} 
```

...等等，但许多类/选择器上下文可能会受到影响。这恐怕是不现实的。

如果您愿意深入研究 JavaScript，您实际上可以从元素中删除类名。

有关如何执行此操作的直接 JavaScript 示例，请参阅：[Remove CSS class from element with JavaScript (no jQuery)](https://stackoverflow.com/questions/2155737/remove-css-class-from-element-with-javascript-no-jquery)

如果你想要更简单的代码，并且愿意使用 JavaScript 库，jQuery 将让你在一行中做到这一点，如下所示：

```
$('divA').removeClass('class3'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:19:14.787

You might add another css class, like .no-left-margin

```
<div id="main-content" class="container no-left-margin">My test text</div> 
```

and add to your css

```
.no-left-margin{
 margin-left: 0px !important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:18:28.543

As long as your style sheet is after the original one you can use the same selectors in css and it will overide it.

And then just put

```
div.container{margin:5px}
div#main-content{margin-left:auto;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T11:18:21.270

嘿，现在习惯了

```
.container#main-content{margin-left:xxxx; ...} 
```

# forms - 经典的 ASP HTML 电子邮件表单

> ID：11827203
> 
> 赞同：0
> 
> 时间：2012-08-06T11:16:15.033
> 
> 标签：forms, email, asp-classic

我正在使用 Gmail 外部邮件服务器从我的网站发送产品查询表格。表单本身发送良好，但是发送的电子邮件不包含我的表单中包含的产品信息。

我的简化形式如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Free Products</title>
</head>
<body>
<form id="data" name="data" method="post" action="email.asp">
  <div class="myform">
  <input type="hidden" name="PCode" value="Free_Products" />
  <input type="hidden" name="CCode" value="CampaignCode" />
  <input type="hidden" name="MCode" value="CampaignName" />
  <input type="hidden" name="Action" value="Add" />
  <input type="hidden" name="Qty" value="1" />
  <input type="hidden" name="BackURL" value="www.myurl.com" />
  <ul id="cat_box">
  <label for="ProductCode1">Add quantity:</label>
  <input id="ProductCode1" type="text" name="ProductCode1" size="8" maxlength="4" class="qtytext" title="test title">
  <select id="ProductCode2" name="ProductCode2" >
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
  </select>
  </form>
<div id="dialog" title="Thank you for your order">
  <p>Thank you for your order.</p>
  This order will be dispatched within 14 days.
  </p>
</div>
</body>
</html> 
```

我的 asp 电子邮件脚本如下所示：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My Form</title>
</head>

<body>
<%

' declare variables
Dim ProductCode1
Dim ProductCode2

' get posted data into variables
ProductCode1 = Trim(Request.Form("ProductCode1"))
ProductCode2 = Trim(Request.Form("ProductCode2"))

' validation
Dim validationOK
validationOK=true
If (Trim(ProductCode1)="") Then validationOK=false
If (Trim(ProductCode2)="") Then validationOK=false
If (validationOK=false) Then Response.Redirect("error.html?" & EmailFrom)

' prepare email body text
Dim Body
Body = Body & "ProductCode1: " & ProductCode1 & VbCrLf
Body = Body & "ProductCode2: " & ProductCode2 & VbCrLf

Const cdoSendUsingPickup = 1 'Send message using the local SMTP service pickup directory. 
Const cdoSendUsingPort = 2 'Send the message using the network (SMTP over the network). 

Const cdoAnonymous = 0 'Do not authenticate
Const cdoBasic = 1 'basic (clear-text) authentication
Const cdoNTLM = 2 'NTLM

Set objMessage = CreateObject("CDO.Message") 
objMessage.Subject = "Example CDO Message" 
objMessage.From = """Me"" <myAddress@gmail.com>" 
objMessage.To = "myAddress@gmail.com" 
objMessage.TextBody = "This is some sample message text.." & vbCRLF & "It was sent using SMTP authentication and SSL."

'==This section provides the configuration information for the remote SMTP server.

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 

'Name or IP of Remote SMTP Server
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.gmail.com"

'Type of authentication, NONE, Basic (Base64 encoded), NTLM
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = cdoBasic

'Your UserID on the SMTP server
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusername") = "myAddress@gmail.com"

'Your password on the SMTP server
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "MyPassword"

'Server port (typically 25)
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 465 

'Use SSL for the connection (False or True)
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True

'Connection Timeout in seconds (the maximum time CDO will try to establish a connection to the SMTP server)
objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60

objMessage.Configuration.Fields.Update

'==End remote SMTP server configuration section==

objMessage.Send
%>
</body>
</html> 
```

有什么我想念的想法吗？为什么我的表单不与我的 asp 脚本对话？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:40:14.493

在它说的部分：

```
objMessage.TextBody = "This is some sample message text.." & vbCRLF & "It was sent using SMTP authentication and SSL." 
```

您想将其更改为

```
objMessage.TextBody = Body 
```

# javascript - 我想在 div 中移动图像，以便包含 div 显示它们的大小

> ID：11827208
> 
> 赞同：0
> 
> 时间：2012-08-06T11:16:37.920
> 
> 标签：javascript

```
function mov_left() {
    if (parseInt(document.getElementById('fold').style.left, 10) == 430) {
        clearInterval(animel);
    }
    document.getElementById('fold').style.left = (parseInt(document.getElementById('fold').style.left, 10) - 10) + 'px';
}

animel = setInterval('mov_left()', 100); 
```

这是我试图用来移动`<div>`包含 2 个图像的代码，以便他们可以一次显示两个图像。然而，图像只是继续向左移动，忽略`if`函数中的语句。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:35:21.787

好吧，我已经摆弄了它，并没有太大的变化，但我知道这很有效：

```
function mov_left() {
    var el = document.getElementById('fold');
    if (parseInt(el.style.left, 10) == 430) {
        clearInterval(animel);
    }
    el.style.left = (parseInt(el.style.left, 10) - 10) + 'px';
}
animel = setInterval(function () {mov_left(); }, 100); 
```

JSfiddle：http: [//jsfiddle.net/m7q3H/42/](http://jsfiddle.net/m7q3H/42/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:41:25.223

如果没有设置 element 的左 css 属性 element.style.left 将返回一个空字符串， parseInt 将返回 NAN。

# css - 高度属性的css div问题

> ID：11827210
> 
> 赞同：0
> 
> 时间：2012-08-06T11:16:38.897
> 
> 标签：css, html

当我尝试为我的一个游戏网站开发模板时。在这里，我遇到了`height="auto"`财产问题。问题是我使用容器 div 宽度作为固定值，容器高度作为自动值。意味着实际上我的主页高度约为`500px`，但我的播放页面高度我需要按照要求取值。当我在游戏下方添加一个 div 时，我无法看到容器。详情请看这里。[http://www.toon10.com/play/Mario_Vs_Bowser](http://www.toon10.com/play/Mario_Vs_Bowser)

实际上，我所做的是对于总包装器，我将高度保持为`450px`并且在播放页面中我将高度保持为自动。谁能检查一下，让我知道我犯了什么错误。

查看我的代码：

```
#wrapper{ 
          margin: 0 auto;
          width: 1230px;
          height: 450px;
          background: #fff;
          -webkit-border-radius: 8px;
          -moz-border-radius: 8px;
          border-radius: 8px;
          overflow: hidden
        } 
```

播放页面：

```
<div style="width:900px;">
    <div><?php echo strtoupper($gameInfoRow['name']);?></div>
    <div class="boxContent" style="height:100%; padding:5px">
         <div align='center'>
             /// game here
         </div>
    </div>
    <div style="clear:both"></div>
</div>

<div style='height:5px'></div>
<div style="width:900px; background:#CC0000; height:500px">
    //the below game box red strip
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:25:51.390

您正在`overflow:hidden;`使用`.wrapper`div

另外，高度是固定的，尝试使用：

```
height:500px;
height:auto !important; 
```

并删除溢出属性。

# php - Sugarcrm 文件上传

> ID：11827213
> 
> 赞同：1
> 
> 时间：2012-08-06T11:16:52.063
> 
> 标签：php, module, sugarcrm

我对 sugarcrm 和 php 也很陌生。我想创建一个自定义模块以将文件作为 blob 上传到 Sugarcrm 数据库。到目前为止，我已经使用模块构建器创建了一个自定义模块。它是一种文件类型，因此它允许上传文件，但只有文件名保存在数据库中。我想将文件内容保存为 blob。有没有办法做到这一点。请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:16:00.767

我会尽力提供帮助，但我需要更多关于您要上传的内容的信息。它是图像文件还是文档？两者都有内置的处理程序，因此您可能会根据需要采取艰难的方式。

如果您正在上传图像，则有一个字段类型可以处理上传图像并将它们存储在缓存区域（这是默认存储位置）。

如果您需要上传文档，大多数现有模块中都内置了默认处理程序（联系人、潜在客户和帐户都有它）。我建议在该代码中窥探，因为大部分艰苦的工作很可能会完成。

+++ 好的，我没有意识到你只是想只存储在 blob 中。仅供参考，不建议将此数据存储在标准 _cstm 表中，因为每次调用该特定模块时，bean 类都会尝试将这些数据加载到对象中，这将消耗大量资源关于服务器资源。您将希望以标准的 3NF 方式分隔表格。

话虽如此，您将需要创建一个二进制转换类/方法（快速搜索以查看一些预制的）。假设您使用正确的字段类型（文件，并注意一个文本字段），您将需要为保存操作创建一个新的处理程序文件，将其设置为入口点。

该文件应类似于：

```
<?php
if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point');

require_once('include/formbase.php');
require_once('modules/[MODULE TYPE]/config.php');
require_once('include/SugarFields/SugarFieldHandler.php');

$focus = new [MODULE TYPE]();
$focus = populateFromPost('', $focus);

if(!$focus->ACLAccess('Save')){
    ACLController::displayNoAccess(true);
    sugar_cleanup(true);
}

//SOME CODE TO CONVERT TO BINARY AND THEN STORE VALUE INTO FIELD NAME USING
// $focus->[fieldName] = outputFromBinaryConversion($_POST['theFileField']);
// That would store the blob into the existing _cstm table
// --OR, you would get the id of the saved module using $return_id = $focus->id;
// and use the id to link to the blob stored in another (unsupported) table.

$focus->save(); 
```

我希望这能澄清你的方向，但我真的建议你考虑使用现有的文档处理类，因为它会更干净、更快地实现。

# android - 使用 Gson 反序列化 Json

> ID：11827217
> 
> 赞同：0
> 
> 时间：2012-08-06T11:17:11.753
> 
> 标签：android, json, deserialization, gson

这是我的 Json：

```
{"array":[
          {"pid":"1","product":"test","size":[
                                              {"id":"26","size":"6-13 weeks"},
                                              {"id":"25","size":"1-5 weeks"}]},
          {"pid":"2","product":"test2","size":[
                                              {"id":"31","size":"86\/92"},
                                              {"id":"27","size":"74\/80"}]}]} 
```

[我使用jsongen.byingtondesign.com](http://jsongen.byingtondesign.com/)生成了文件，但我似乎无法弄清楚如何获取数据（我查看了很多教程，但我只是变得更加困惑，因为它们都是不同的。）

我需要根据 pid 和 id 获取数据。我需要输出带有 pid ... 的产品字符串或带有 id ... 的大小字符串。（我应该重组我的 json 吗？）

只需要一些提示让我走得更远。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:20:33.017

您需要的结构类似于

```
class Size {int id; String size;}
class Product {int pid; String product; List<Size> size;}
class Shop {List<Product> products;} 
```

然后打电话

```
Shop shop = gson.fromJson(jsonString, Shop.class); 
```

在这里，我永远记不起什么是什么。结构看起来不错，名字却没有。我建议像

```
class Size {int id; String name;}
class Product {int id; String name; List<Size> sizes;}
class Shop {List<Product> products;} 
```

* * *

现在我看到你更喜欢一种地图。这在 Java 中很容易做到，但也可以将其放入 Json 中。但是，您要么引入冗余，要么`id`从对象中丢失。代替

```
[
    {"id":"26","size":"6-13 weeks"},
    {"id":"25","size":"1-5 weeks"}
] 
```

你可以使用

```
{
    "26": {"id":"26","size":"6-13 weeks"},
    "25": {"id":"25","size":"1-5 weeks"}
} 
```

（有冗余）或

```
{
    "26": {"size":"6-13 weeks"},
    "25": {"size":"1-5 weeks"}
} 
```

（`Size`对象缺少它的`id`）或

```
{
    "26": "6-13 weeks",
    "25": "1-5 weeks"
} 
```

它是紧凑的，但几乎不可扩展。*无论如何，我会从 Java 而不是 Json 开始，这会让事情变得更容易，因为你要处理很多事情是 Java。*Json 字符串由 Gson 写入和读取，因此您无需太在意它的外观。

# java - java.io.IOException：无法运行程序

> ID：11827218
> 
> 赞同：2
> 
> 时间：2012-08-06T11:17:13.503
> 
> 标签：java

我在 Netbeans 中创建了新的 java 项目：

```
package copyfiles;

import java.io.File;
import java.io.FileInputStream;

public class CopyFiles {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
    }
} 
```

我选择了：

1.  清理并构建主项目
2.  运行主项目

我有一个错误：

```
java.io.IOException: Cannot run program "/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java" (in directory "/Users/xxx/yyy/kopiowanie plików/CopyFiles"): error=2, No such file or directory 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:20:07.697

My guess is you have mis configured where to find the JDK used to run your program as the `java` you are trying to use doesn't exist.

Can you do

```
ls -l /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:50:27.740

我想我找到了原因。

Netbeans 可能无法支持非 Ascii 路径。路径部分“kopiowanie plików”不能在此路径“/Users/xxx/yyy/kopiowanie plików/CopyFiles”中接受。

所以你应该把你的项目移动到一个新的文件夹中，比如“/Users/xxx/yyy/projectABC/CopyFiles”。

对不起我的英语不好。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T11:37:31.460

只需检查 Java 是否可用

> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java

或不。我不认为它是可用的。如果它不存在并且有人更改了 java 文件夹名称，则您的 Netbeans IDE 转到

> 工具-->Java平台

并点击

> 添加平台

并添加 Java 文件夹。如果您在此之后运行程序，我想您的程序应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T07:06:19.863

有这个问题。我实际上有 2 个，但修复了第一个。在此过程中，网站建议在 bin 文件夹中的“java.exe”的兼容性设置中设置“以管理员身份运行”。我解决了第一个问题，但在我关闭“以管理员身份运行”选项之前仍然出现此错误。现在它正在工作。

# cocos2d-iphone - cocos2d 2.0 CCSpriteFrameCache 奇怪的行为

> ID：11827224
> 
> 赞同：0
> 
> 时间：2012-08-06T11:17:26.290
> 
> 标签：cocos2d-iphone

我正在使用 TexturePacker 创建我的精灵表，然后将 .plist 和 .pvr.ccz 文件添加到 Xcode 项目。

为了使用这个精灵表，我有这个代码：

```
CCSpriteFrameCache *cache = [CCSpriteFrameCache sharedSpriteFrameCache];
[cache addSpriteFramesWithFile:@"filename.plist"]; 
```

它工作正常，但是如果我从 Xcode 项目中删除 filename.plist 和 filename.pvr.ccz，甚至从硬盘驱动器中删除这些文件，项目运行良好并显示所有精灵！

`CCSpriteFrameCache`当项目包中不包含这些文件时，如何加载这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:08:40.210

在 Xcode 中发出“清理”命令或从设备中删除应用程序。无论哪种方式，一旦你这样做，它就会停止工作。

问题是 Xcode 不会从包中删除已删除的文件，无论是默认情况下还是在某些情况下（我从不关心检查它是哪个）。

因此，即使您从 Xcode 项目中删除了这些文件，设备上的包仍然包含这些文件。我想这是一种优化，其中 Xcode 仅将添加或修改的图像传输到设备上的应用程序包。它不会删除应用程序并重新传输所有内容，因为这对开发人员来说太慢了，特别是如果您正在开发一个相当大的应用程序（20+ MB）。

# python - 我们可以将小写字符加一吗

> ID：11827226
> 
> 赞同：5
> 
> 时间：2012-08-06T11:17:28.250
> 
> 标签：python

如果我有

```
char = 'a' 
```

我怎样才能将值增加到'b'然后变成'c'等等..

我不想更换或更改它。它很像

```
char = char + 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T11:19:10.017

```
>>> chr(ord('a') + 1)
'b' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T11:24:32.023

您可以像这样进行增量翻译。在这种情况下，我已将“z”映射回“a”

```
>>> from string import maketrans, ascii_lowercase
>>> char_incrementer = maketrans(ascii_lowercase, ascii_lowercase[1:]+ascii_lowercase[0])
>>> 'a'.translate(char_incrementer)
'b' 
```

您可以轻松地将其应用于整个字符串

```
>>> 'hello'.translate(char_incrementer)
'ifmmp' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T11:18:27.727

像这样：

```
char = chr(ord(char) + 1) 
```

或者可能更像是这样的pythonic：

```
from string import ascii_lowercase
char = ascii_lowercase[ascii_lowercase.index(char) + 1] 
```

请注意，这两种方法在您达到`z`.

在不知道你将要使用它的情况下很难确定，但我会研究你是否可以以一种避免这个问题的方式做你正在做的任何事情。例如，如果您有这样的代码：

```
char = "a"
while True:
    if xxx():
        break
    if yyy():
        continue
    value = zzz()
    print char, value
    char = chr(ord(char) + 1) 
```

改为这样做：

```
def find_values():
    while True:
        if xxx():
            break
        if yyy():
            continue
        yield zzz()

for char, value in zip(ascii_lowercase, find_values()):
    print char, value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-18T19:44:13.917

```
>>> chr((ord('a')+1)%97%26 + 97)
'b'
>>> chr((ord('z')+1)%97%26 + 97)
'a' 
```

# wpf - WPF 功能区和 ViewModel

> ID：11827232
> 
> 赞同：0
> 
> 时间：2012-08-06T11:17:55.647
> 
> 标签：wpf, mvvm, ribbon

我正在尝试从 TabControl 切换到功能区。

使用 TabControl 时，我将 UserControl 绑定到 TabItem.Content。在标签项之间切换时加载我的用户控件就足够了。

现在有了 WPF 功能区控件，我将拥有 RibbonButton。我应该如何加载我的用户控件？我应该处理 Click() 事件还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:01:37.987

AFAIK 功能区控件主要用于 RibbonWindow。这意味着您的顶级窗口必须更改为该类型。然后，您可以将 RibbonWindow 功能区的（您在窗口中使用的）内容绑定到您的用户控件。

这里是 MSDN。 [http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon%28v=vs.110%29.aspx)

如您所见，他们在 RibbonWindow 中使用功能区控件。我知道这是以前的要求，考虑到它与传统窗户的布局完全不同，我认为它不会改变。

# ruby - Rails URL 区分大小写

> ID：11827233
> 
> 赞同：0
> 
> 时间：2012-08-06T11:18:01.900
> 
> 标签：ruby, ruby-on-rails-3

我希望我的登录 URL 在我的 Rails 应用程序中不区分大小写。例如，如果用户输入“User_Login”，它应该重定向到“user_login”。我正在使用rails 3.1。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:49:18.787

很久以前有同样的问题。在这里看看我的解决方案：

[http://gehling.dk/2010/02/how-to-make-rails-routing-case-insensitive/](http://gehling.dk/2010/02/how-to-make-rails-routing-case-insensitive/)

/ 卡斯滕

# sql-server - CakePHP 2, EasyPHP 12 (PHP 5.3.14), MS SQL 2005 Express

> ID：11827241
> 
> 赞同：0
> 
> 时间：2012-08-06T11:18:28.073
> 
> 标签：sql-server, cakephp

MS SQL Server is my most familiar DBMS. I'm really new to PHP and I want to implement small in-house web application (for up to 10 clients), so I decided to use a PC with windows XP SP3 running EasyPHP as my web server.

I think CakePHP is the best approch for MVC web application unfortunately CakePHP supports MySQL out of the box.

Is it possible using CakePHP to connect the MS SQL???, I'm fine to upgrade to the new version of MS SQL.

Please advise. Thanks. Kongthap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T14:42:35.193

I am not very familiar with CakePHP, but I see two possible solutions here, which both requires that you install [SqlSrv for PHP](http://php.net/manual/en/book.sqlsrv.php) and [SQL Server Native Client](http://msdn.microsoft.com/en-us/sqlserver/aa937733.aspx) :

1.  Use PDO, SqlSrv provides a PDO driver for SQL Server. If CakePHP supports PDO, you will be able to use it to connect to your SQL Server
2.  Use [this driver](https://github.com/revathskumar/CakePHP-sqlsrv-driver) (if still supported by Cake)

Also, have a look at [this question](https://stackoverflow.com/questions/6970880/making-cakephp-work-with-sql-server-2008) which seems to address the same kind of issue as yours.

# eclipse - creating modified version of an official Eclipse distribution

> ID：11827242
> 
> 赞同：0
> 
> 时间：2012-08-06T11:18:30.543
> 
> 标签：eclipse, eclipse-rcp

I need to create a modified distribution (package?) of *Eclipse 4.2 for Java EE Developers*. It's going to be distributed to the team with all required plugins (should be ready for development out-of-the-box). I'm trying to use Eclipse for RCP and RAP Developers to achieve this, but the documentation is mostly outdated and doesn't help much.

I fetched the original projects for Eclipse packages from [http://git.eclipse.org/c/epp/org.eclipse.epp.packages.git/tree/packages](http://git.eclipse.org/c/epp/org.eclipse.epp.packages.git/tree/packages). I'm using `org.eclipse.epp.packages.jee` and `org.eclipse.epp.packages.jee.feature`. I can launch it and I can export it, but there are two problems I've encountered:

1.  The launched and exported packages differ from the original *Eclipse for Java EE Developers* (contains unneeded plugins - e.g. for RCP, and also the hierarchy in *Help -> About Eclipse -> Installation details* is a little different).
2.  I can't find any way to automatically resolve dependencies (the product is based on features) - in order to export the package without any "missing import/package" errors I had to add an existing unzipped *Eclipse for Java EE Developers* package in *Window -> Preferences -> Plug-in Development -> Target Platform*.

Is there any way to build the package without differences from the original version? And what is the proper way of handling missing plugins/dependencies?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:16:39.997

这要容易得多：

1.  下载 Eclipse 4.2 Java EE 包
2.  下载 RCP 版本。

调用您的 RCP 版本的 p2 控制器，将来自内容存储库的包安装到您的 JEE 包中。例如，请参阅[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)和[http://wiki.eclipse.org/ Equinox_p2_director_application/Examples/Install_into_eclipse_using_SDKProfile](http://wiki.eclipse.org/Equinox_p2_director_application/Examples/Install_into_eclipse_using_SDKProfile)

# javascript - Addeventlistener 转换为 IE。也许另一个错误？

> ID：11827249
> 
> 赞同：0
> 
> 时间：2012-08-06T11:19:01.973
> 
> 标签：javascript

我制作了一个简单的脚本，当悬停在外部 div 上时会显示一个 div（在另一个内部）（这有意义吗？）

无论如何，这是代码。

```
for (var ost = 1; ost <= 16; ost++) {
        var maelk = String("sovs"+ ost);
        document.getElementById(maelk).addEventListener('mouseover', on, false);
        document.getElementById(maelk).addEventListener('mouseout', off, false);
        }

    function on(e) {
        var t=e.currentTarget.id;
        var g= t.substr(4,5);
        var v="celltext" + g;
        $("#"+v).show();
            //stop(true, false).fadeIn("slow");
    }

    function off(e) {
        var t=e.currentTarget.id;
        var g= t.substr(4,5);
        var v="celltext" + g;

        $("#"+v).hide();
            //stop(true, true).fadeOut("slow");

    } 
```

但这在 Internet Explorer 上不起作用。我听说原因是 addEventListener。所以我尝试将代码编辑为：

```
for (var ost = 1; ost <= 16; ost++) {
        var maelk = String("sovs"+ ost);
        var maelkelement = document.getElementById(maelk);

    if (!maelkelement.addEventListener) {
        maelkelement.attachEvent('mouseover', on, false);
        maelkelement.attachEvent('mouseout', off, false);
    }
    else {
        maelkelement.addEventListener('mouseover', on, false);
        maelkelement.addEventListener('mouseout', off, false);
    }

    function on(e) {
        var t=e.currentTarget.id;
        var g= t.substr(4,5);
        var v="celltext" + g;
        $("#"+v).show();
            //stop(true, false).fadeIn("slow");
    }

    function off(e) {
        var t=e.currentTarget.id;
        var g= t.substr(4,5);
        var v="celltext" + g;

        $("#"+v).hide();
            //stop(true, true).fadeOut("slow");

    } 
```

唯一的区别是 IF 语句与 IE 通信。但这不起作用。

有人有什么想法吗？

非常感谢您的帮助，并在此先感谢您

问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:21:11.430

使用时事件名称略有不同`attachEvent`。您需要使用`'onmouseover'`and`'onmouseout'`来代替：

```
if (!maelkelement.addEventListener) {
    maelkelement.attachEvent('onmouseover', on);
    maelkelement.attachEvent('onmouseout', off);
} 
```

也可以看看：

*   MDN：（[`element.AddEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener#Compatibility)“旧版 Internet Explorer 和 attachEvent”部分）
*   [MSDN：attachEvent 方法](http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx)
*   [MSDN：事件列表](http://msdn.microsoft.com/en-us/library/ms533051%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:26:56.623

如果这适用于第一个元素，我会感到惊讶，因为在引用之前尚未定义 on 和 off 函数。我会改为

```
var on = function(e) {...}
var off = function(e) {...}
for(...) {
  ....addEventListener(..., on, false);
  ....addEventListener(..., off, false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:27:57.540

Zeta 是对的：使用`onmouseover`and `onmouseout`，但这仍然不能解决您的问题。除此之外，重要的是要注意 IE 默认情况下不会将事件对象传递给处理程序。相反，IE 只有一个 -global- 事件对象，所以你的`on`和`off`函数都必须像这样开始：

```
function onOrOff(e)
{
    e = e || window.event;//get the global event for ie
    var target = e.target || e.srcElement;//IE's bubbling model doesn't have a target, but a source element
    //Now you can finally get some work done
    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
        return;
    }
    e.returnValue = false;
    e.cancelBubble = true;//bubbling || propagation and preventDefault works differently, too
} 
```

最后：再次感谢冒泡模型 IE 不支持事件捕获。因此，该`attachEvent`方法没有第三个参数，因此在 IE 分支中松开 false ，您应该已准备就绪

# linux - How to replace `until.. sleep` with `inotifywait` on a specific created file?

> ID：11827252
> 
> 赞同：1
> 
> 时间：2012-08-06T11:19:13.753
> 
> 标签：linux, shell, inotify

I have code like this to trigger a script in [/etc/inittab](https://github.com/Webconverger/webc/blob/master/etc/inittab#L61):

```
until test -p /tmp/updates.pipe
do
    sleep 0.25
done 
```

Which I want to refactor since the `sleep` floods debug logs, when debugging with `set -x`.

IIUC `inotifywait` only watches on directories.

```
inotifywait -e create /tmp 
```

So how do I make it only proceed after seeing the CREATE event of the **/tmp/updates.pipe** file, and not any other file in `/tmp`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:34:36.260

grep 的安静标志会导致它在看到匹配项时立即爆发。以下应该在 bash 下工作。

grep -q updates.pipe <(inotifywait -e create -m /tmp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:17:21.073

像这样的东西怎么样：

```
while read OUTPUT
do
    if echo $OUTPUT | grep -q "CREATE updates.pipe"; then break; fi
done < <(inotifywait -qm -e create /tmp) 
```

不过，这不适用于所有 shell。

这是另一个适用于所有外壳的解决方案：

```
inotifywait -qm -e create /tmp | while read OUTPUT
do
    if echo $OUTPUT | grep -q "CREATE updates.pipe"; then break; fi
done 
```

但是由于一些神秘的原因，它只在下一个输出之后才中断`CREATE updates.pipe`，有人知道为什么吗？

# asp.net-mvc - ninject Inheritance security rules violated by type: 'Ninject.Web.Mvc.Filter.FilterContextParameter' in mvc4

> ID：11827253
> 
> 赞同：4
> 
> 时间：2012-08-06T11:19:14.313
> 
> 标签：asp.net-mvc, ninject

I have a mvc4 web application. I decided to use ninject.mvc3\. so I installed it from nuget. But it is throwing this exception:

> Inheritance security rules violated by type: 'Ninject.Web.Mvc.Filter.FilterContextParameter'. Derived types must either match the security accessibility of the base type or be less accessible.

```
private static IKernel CreateKernel()
      {
          var kernel = new StandardKernel(); //Throws exception this line
          kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
          kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
          return kernel;
      } 
```

Any ideas what is causing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-15T00:06:54.233

如果您将以下行添加到您的 AssemblyInfo.cs 文件并引用 System.Web.Security 命名空间，也许会有所帮助？

```
[assembly: AllowPartiallyTrustedCallers()] 
```

# perl - Perl：加入/拆分 - 未初始化的变量

> ID：11827262
> 
> 赞同：0
> 
> 时间：2012-08-06T11:19:53.893
> 
> 标签：perl

我正在尝试在从 CSV 文件中读取的行的开头和结尾添加引号，然后拆分并添加到数组中

```
a,b,c<br /> x,y,z<br /> 
```

并导致：

```
"a,b,c"

"x,y,z" 
```

我的数据看起来像我的数据看起来像：

```
a,b,c<br /> x,y,z<br /> 
```

我正在使用的代码是：

```
my @lines = join("\"", split (qr{<br\s?/>})), $line; 
```

我认为这会起作用，但我不断得到：

```
"Use of uninitialized value $_" 
```

我试图找出如何解决这个问题，我假设它（对于某人）将是我想念的简单的东西。

额外的信息

我知道如果我想在开头和结尾添加引号，我会使用：

```
push (@lines, "\"");
    unshift (@lines, "\"");

    my $newStr = join $/, @lines;
    print $newStr; 
```

完整的代码是：

```
use warnings;
use Text::CSV;
use Data::Dumper;

use constant debug => 0;
use Text::CSV;

print "Running CSV editor......\n";

#my $csv = Text::CSV->new({ sep_char => ',' });

my $file = $ARGV[0] or die "Need to get CSV file on the command line\n";

my $fileextension = substr($file, -4);

#If the file is a CSV file then read in the file.
if ($fileextension =~ m/csv/i) { 

  print "Reading and formating: $ARGV[0] \n";

  open(my $data, '<', $file) or die "Could not open '$file' $!\n";

  my @fields;

  while (my $line = <$data>) {   
    #Clears the white space at the end of the line.
    chomp $line;

    #Splits the line up and removes the <br />.
    my @lines = join("\"", split (qr{<br\s?/>})), $line;    

    #Removes the control character.   
    shift (@lines); 
    print "\n";
    #print $_, $/ for @lines;
  }         
  print "\n Finished reading and formating: $ARGV[0] \n";
}
else { 
  print "Error: File is not a CSV file\n"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:27:18.820

首先：请**始终** [`use strict`](http://perldoc.perl.org/strict.html)在您的所有程序中。

* * *

右括号之一位于错误的位置。

```
my @lines = join("\"", split (qr{<br\s?/>})), $line;
                                           ^-- The second arg of split goes here. 
```

您所做的是，拆分隐含`$_`的 at `<br/>`，然后将结果列表与用作新的分隔符`$line`一起加入。`"`

这看起来像：

```
$line = 'a<br/>b<br/>c';
# split...
# Result: a"b"c"a<br/>b<br/>c 
```

改用这个：

```
my @lines = join('"', split(qr{<br\s?/>}, $line)); 
```

事实上，您可以完全省略括号。Perl 会在这种情况下解决这个问题。我也改变了引用。如果您使用单引号，则不需要转义`"`符号。

```
my @lines = join '"', split qr{<br\s?/>}, $line; 
```

例子：

```
my $line = 'a<br/>b<br/>c'; 
my @lines = join "\"", split qr{<br\s?/>}, $line;
print Dumper \@lines; 
```

输出：

```
$VAR1 = [
          'a"b"c'
        ]; 
```

* * *

另请注意，它[`join`](http://perldoc.perl.org/functions/join.html)接受一个列表并返回单个字符串，而不是数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:07:40.137

我想知道您的数据是否真的看起来像这样

```
<br/>a,b,c<br/>x,y,z 
```

在这种情况下，您需要的是

```
my @lines = split m|<br\s*/>|, $line;
print qq("$_"\n) for grep /\S/, @lines; 
```

但是您的信息不一致，我只是在这里猜测

# bluetooth - 成熟的嵌入式系统蓝牙堆栈？

> ID：11827265
> 
> 赞同：3
> 
> 时间：2012-08-06T11:19:56.717
> 
> 标签：bluetooth, embedded

我想要在嵌入式系统上使用成熟的蓝牙堆栈的建议。它必须轻巧且占用空间相对较小。

最好它也是开源的，支持 BLE 并且可以在没有操作系统的情况下运行。但这些并不是严格要求的。

它不一定是免费的。它也将用于商业用途。

我正在运行一个 STM32 处理器 (ARM)，它应该直接支持或者足够通用，以便于移植。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-17T13:22:38.427

[Apache 现在有一个名为NimBLE](http://mynewt.apache.org/network/ble/ble_intro/)的开源 BLE 堆栈，可在其[MyNewt](http://mynewt.apache.org/)操作系统上运行。它在 nRF5x 芯片上运行，是唯一一个模糊完整的开源 BLE 堆栈。我还没有尝试过，但它看起来很不错。

编辑：我试过了。截至目前（2016 年 9 月），它确实有效 - 您可以读取/写入/通知特征等。有一些缺失的功能，但它绝对是可用的。

请注意，代码写得非常好（例如，他们甚至记录了哪些函数在中断上下文中运行！）但它是经典的 C89，因此有很多手动内存管理、令人担忧的指针魔术、信任数组长度等等。`newt`他们的构建系统也不支持 C++ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:07:25.510

您使用的是什么蓝牙芯片或模块？

您可能会发现芯片制造商可以为您提供嵌入式 BT 堆栈。

例如，优质蓝牙 4.0 芯片的供应商 CSR（剑桥硅无线电）有一款名为 Synergy 的产品，它是用于嵌入式设备的 BT 堆栈。有一个 Android 和一个 WinCE 版本，但也有一个核心版本，它已经并且可以移植到许多不同的操作系统和硬件平台。

www.csrsupport.com

我认为博通也生产 BT 芯片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-30T07:23:21.210

你可以看看 Smalltooth。它针对 PIC24 和 PIC32，但可能适用于 ARM。 [SmallTooth 蓝牙堆栈](http://code.google.com/p/smalltooth/)是一个开源蓝牙堆栈，从头开始编码，并考虑了嵌入式设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T09:03:23.303

请在[http://bluekitchen-gmbh.com上查看我们的 BTstack 蓝牙堆栈](http://bluekitchen-gmbh.com)

它似乎可以满足您的所有要求。

# php - Ajax file upload not working in I.E

> ID：11827268
> 
> 赞同：0
> 
> 时间：2012-08-06T11:20:07.597
> 
> 标签：php, html, ajax, internet-explorer, file-upload

I am uploading images using ajax and php. My code is working fine in firefox. But in I.E, it doesn't work!

Here is my HTML code,

```
<!doctype html>
<head>
<title>File Upload Progress Demo #1</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<style>
body { padding: 30px }
</style>
</head>
<body>
    <h1>File Upload Progress Demo #1</h1>
        <form action="fileup.php" method="post" enctype="multipart/form-data">
        <input id="inp" type="file" name="uploadedfile" style="display:none"><br>
        <input id="btn" type="submit" value="Upload File to Server" style="display:none">
    </form>

    <div id="fileSelect" class="drop-area">Select some files</div>

<script>
(function() {

$('form').ajaxForm({

    complete: function(xhr) {
        alert(xhr.responseText);
    }
}); 

})();       

var fileSelect = document.getElementById("fileSelect"),
fileElem = document.getElementById("inp");

fileElem.addEventListener("change",function(e){
  document.getElementById('btn').click();
},false)  

fileSelect.addEventListener("click", function (e) {
  fileElem.click();
  e.preventDefault(); 
}, false);

</script>

</body>
</html> 
```

Here is php code,

```
<?php
$target_path = "images/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

In firefox the file uploads perfectly and alert comes up, But in I.E nothing happens!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:25:42.830

从表单插件的示例页面

> 支持 XMLHttpRequest Level 2 的浏览器将能够无缝上传文件。

IE 不支持 XMLHttpRequest Level 2。

**编辑：**

好的，这似乎不是 Ajax 问题，因为该插件使用 iframe 后备。您可能需要重构您的 javascript 代码

```
$(function(){
    $('form').ajaxForm({
        complete: function(xhr) {
            alert(xhr.responseText);
        }
    }); 

    $('#inp').change(function(e) {
        $('#btn').click();
    });
}); 
```

但附带说明一下，IE 中也没有文件拖放功能。因此，只有在 IE 中手动选择文件时它才有效。隐藏文件选择将不允许用户选择文件。在文件输入上从 javascript 引发点击事件也是不可能的，您必须使用透明的文件输入。

# jquery - Jwplayer fails to play video in html5 mode, but works fine in flash mode

> ID：11827270
> 
> 赞同：2
> 
> 时间：2012-08-06T11:20:08.447
> 
> 标签：jquery, html, jwplayer

I am loading an xml file in jwplayer to play videos depending on which link is clicked. Below is my jwplayer setup code, and xml:

Jwplayer:

```
<script type="text/javascript">
 jwplayer("player-container").setup({
 autostart: true,
 'modes': [
   {type: 'html5'}, 
   {type: 'flash', src: '/assets/components/mediaplayer-5.8/5.9/player.swf',config:{
        skin: "/assets/components/mediaplayer-5.8/modieus.swf"        
     }},
    {type: 'download'}
    ],    
 repeat: 'list',
 width: 480
    });
  jwplayer().load('/media/narration.xml')
</script> 
```

Sample XML:

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>Sample File</title>

 <item>
      <title>peking</title>
      <link></link>
      <description></description>

      <pubDate>Sat, 07 Sep 2002 09:42:31 GMT</pubDate>

      <media:content url="/videos/Peking Edit For Web-7.mp4" />
      <media:thumbnail url="/images/playerimg.jpg" />

</item>

  </channel>
</rss> 
```

However, no video is playing. But if I bring `{type: 'html5'}` below `flash`, videos show up correctly. Any idea what I might be doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:41:55.893

JW 播放器尝试根据 mode 参数中指定的类型，按照指定的顺序播放视频。所以如果 HTML5 在 Flash 之前，它会先尝试在 HTML5 中播放。HTML5 使用该标签，因此请尝试将语句包装在视频标签内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:53:28.563

事实证明，仅仅因为一个文件是 mp4，它可能并不总是在 jwplayer 中播放。我必须用 H264 对其进行编码才能让它们正常播放。为此，我使用了一个名为“[手刹](http://handbrake.fr/)”的软件。

# django - Django 1.4 多个数据库外键关系（1146，“表'other.orders_iorder'不存在”）

> ID：11827272
> 
> 赞同：2
> 
> 时间：2012-08-06T11:20:09.290
> 
> 标签：django, foreign-key-relationship, cascading-deletes, multiple-databases

我有一个从一个模型到另一个数据库中的另一个模型的外键（我知道我不应该这样做，但如果我妥善处理参照完整性，这应该不是问题）。

问题是一切正常......所有系统都可以（任何方向的关系，路由器都会处理它）但是当我尝试删除引用的模型（没有外键属性）时...... Django 仍然想通过关系来检查关系是否为空，但是相关对象在另一个数据库上，所以它在这个数据库中找不到对象。

我试图设置 on_delete=models.DO_NOTHING 没有成功。还试图清除关系（但很明显没有“使用”参数，所以我也不起作用）。还尝试用delete(objects...)清空关系，没有成功。

现在我很确定问题出在 super(Object,self).delete() 中，我不能做 super(Object,self).delete(using=other_database) 因为 self 对象不在另一个数据库中，只是 RelatedManager 是. 所以我不知道如何让 Django 理解我什至不想检查这种关系，顺便说一句，在 super(Object,self).delete() 请求之前它已经被清空了。

我在想是否有一些方法可以让 Django 避免这种检查。

更多图形：

**DB1：“默认”数据库（订单应用程序）**

> from django.db import models from shop.models import Order
> 
> IOrder 类（模型。模型）：
> 
> ```
> name = models.CharField(max_length=20, unique=True, blank=False, null=False)
> order = models.ForeignKey(Order, related_name='iorders', blank=True, null=True) 
> ```

**DB2：“其他”数据库**

> 类订单（模型。模型）：
> 
> ```
> description = models.CharField(max_length=20, blank=False, null=False)
> 
> def delete(self): 
>     # Delete iOrder if any
>     for iorder in self.iorders.using('default'):
>         iorder.delete()
> 
>     # Remove myself
>     super(Order, self).delete() 
> ```

调用 supper(Order.self).delete() 时会出现问题，然后在该数据库中找不到表（iorder）（因为它处于“默认”状态）

有什么想法？提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:05:14.740

我已经解决了使用原始 SQL 删除命令更改 super(Order,self).delete() 的问题。无论如何，我很想知道是否有更合适的方法来做到这一点

# c - C99复合铸件

> ID：11827280
> 
> 赞同：4
> 
> 时间：2012-08-06T11:20:31.973
> 
> 标签：c, c99, complex-numbers

我有一些 C99 代码，我需要将 2n double 数组转换为 n double 复数数组。我这样做

```
static void real_to_complex(const double *r, size_t n, double complex *z)
{
  size_t i;

  for (i=0 ; i<n ; i++)
    z[i] = r[2*i] + r[2*i + 1]*I;
} 
```

这是代码的性能关键部分，我真的不想创建一个新的存储区域 z 并且有复制的费用，而是我想用这些函数调用替换

```
z = (double complex*)r; 
```

有没有办法做到这一点并保持符合标准？我知道双复数保证与两个双精度数组具有相同的布局——也许我可以通过编译器检查这个布局是（真实的，想象的）还是（想象的，真实的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:37:55.063

您可以保证`complex`数组的第一个元素对应于实部，第二个元素对应于虚部。

引用自[公开的 C11 标准草案](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1570.pdf)

> 6.2.5/13 每个复数类型具有与恰好包含对应实数类型的两个元素的数组类型相同的表示和对齐要求；第一个元素等于复数的实部，第二个元素等于复数的虚部。

示例程序

```
#include <complex.h>
#include <stdio.h>

int main(void) {
  double x[] = {42, 2, 41, 1, 0, 0};
  _Complex double *y = (void*)x;
  while (creal(*y) > 0) {
    printf("%f + %fi\n", creal(*y), cimag(*y));
    y++;
  }
  return 0;
} 
```

# android - 缩放时视频帧失真

> ID：11827283
> 
> 赞同：1
> 
> 时间：2012-08-06T11:21:03.007
> 
> 标签：android, xml, android-imageview

我正在开发一个应用程序，其中 2 个视频缩略图显示在主要活动中，如下所示：

![在此处输入图像描述](../Images/adc48932278cb4d291e98118e39b5c09.png)

视频缩略图只不过是逐帧显示图像的 ImageView。

现在我们想要的是，在特定视频缩略图上的点击活动，这将放大该视频，其他视频将消失。为了向我的应用程序提供该功能，我创建了全屏大小的新窗口，并使用以下方法缩放视频帧：

```
 bit=Bitmap.createScaledBitmap(bit, 200, 280, true); 
```

然后我像往常一样使用 onDraw(); 显示它。

当我在模拟器上运行此应用程序并单击其中一个缩略图时，我得到一个扭曲的缩放视频帧，如下所示： ![在此处输入图像描述](../Images/e3edda058f7293ae0539001db9f45bc6.png)

虽然我期待缩略图的完美缩放版本。谁能帮我理解为什么在这种情况下框架会变形？

**我的 XML 文件如下**

我的主要活动 xml 文件 - main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:padding="5dip"
android:orientation="horizontal"
android:id="@+id/myScreen" >

<LinearLayout
android:orientation="vertical"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:layout_gravity="center"
android:paddingLeft="10dip"
android:paddingRight="10dip" >
    <TableLayout android:layout_width="wrap_content" android:id="@+id/tableLayout1" android:layout_height="wrap_content" android:layout_gravity="center">
        <TableRow android:id="@+id/tableRow1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:padding="20dip">
         <callback.two.videos.display  
        android:id="@+id/iv"
        android:layout_height="120dp" android:visibility="visible" android:paddingRight="10dip" android:layout_width="fill_parent" android:layout_marginRight="10dp"/>
   <callback.two.videos.display1  
        android:id="@+id/iv1"
        android:layout_height="120dp" android:visibility="visible" android:paddingLeft="10dip" android:layout_width="fill_parent" android:layout_marginLeft="10dp"/>   
         </TableRow>

    </TableLayout>
</LinearLayout>
</LinearLayout> 
```

和 FullSceen Window xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <callback.two.videos.display android:id="@+id/full_image_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:onClick="handleClick"/>

</LinearLayout> 
```

# c# - 当应用程序在 asp.net mvc 3 中关闭时，在 global.asax 中调用的正确方法是什么？

> ID：11827286
> 
> 赞同：1
> 
> 时间：2012-08-06T11:21:14.967
> 
> 标签：c#, asp.net, asp.net-mvc-3

中的事件`global.asax`是：

![在此处输入图像描述](../Images/a6e71e3eb007beb806ba88395aaa98be.png)

好吧。我想在应用程序停止时关闭与数据库的连接。我使用 MSSQL Server 2005。

我想使用：

```
 protected void Application_End( object sender, EventArgs e ) {
     // close database connection
  } 
```

和

```
 protected void Application_EndRequest( object sender, EventArgs e ) {
     // close database connection
  } 
```

上述两种方法中的哪一种是关闭与数据库的连接的好选择？

或者管理连接是个好主意`global.asax`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:24:50.957

> 管理连接是个好主意`global.asax`吗？

这是一个可怕的想法。

连接是昂贵的资源，只能在尽可能短的时间内使用和打开。通常，连接池是用于确保数据库响应的机制。

您应该关闭打开它们的连接，最佳做法是使用`using`语句来确保正确处理：

```
using(var con = new Connection("my connection string"))
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:25:45.170

IMO 也不是一个好的选择。

> 或者在 global.asax 中管理连接是个好主意？

否。连接由[连接池管理](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

# asp.net - 在实体框架中使用存储查询

> ID：11827288
> 
> 赞同：0
> 
> 时间：2012-08-06T11:21:27.143
> 
> 标签：asp.net, c#-4.0, entity-framework-4

我想在实体框架中使用 SQL 查询。

这是我的代码：

```
 string sql = (@"SELECT G.GainId,
                (SELECT Name FROM Carrier WHERE CarrierId = G.CarrierId) AS Carrier,
                (SELECT Name + ' ' + Surname FROM [User] WHERE UserId = G.GainerId) AS Gainer,
                (SELECT Name + ' ' + Surname FROM [User] WHERE UserId = G.GiverId) AS Giver,
                (SELECT Name + ' ' + Surname FROM [User] WHERE UserId = G.CustomerId) AS Customer,
                    P.Name,
                    G.Gained,
                    G.Paid
                    FROM Gain AS G 
                    INNER JOIN Product AS P ON P.ProductId = G.ProductId");

            DataTable tbl = _context.Database.SqlQuery<DataTable>(sql) as DataTable; 
```

但`tbl`为空。你有什么建议吗？我是实体框架的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:41:37.657

那是因为`SqlQuery`不打算返回一个`DataTable`. 它旨在将您的实体类型作为您的实体类型在`IEnumerable<T>`哪里返回`T`。使用下面的语句并记住它是一个被返回的可枚举类型。现在使用它执行您需要的操作。

```
var tbl = _context.Database.SqlQuery<{your entity type}>(sql) 
```

## 已编辑

是的，事实上你可以很容易地构建这种类型。事实上，由于查询看起来如此孤立，您可能可以在执行它的类中构建一个私有类，以便我将如何构建示例。但是，这是您需要决定的事情。下面我将给你一个类的模板。我不知道这两个属性`??`到底与什么类型相关，因此您需要将它们插入。

```
private class QueryResult
{
    public int GainId { get; set; }
    public string Carrier { get; set; }
    public string Gainer { get; set; }
    public string Giver { get; set; }
    public string Customer { get; set; }
    public string Name { get; set; }
    public ?? Gained { get; set; }
    public ?? Paid { get; set; }
} 
```

然后发出这样的声明...

```
var tbl = _context.Database.SqlQuery<QueryResult>(sql) 
```

# excel - 使用excel VBA提取字符串并将其转换为十进制数

> ID：11827290
> 
> 赞同：-1
> 
> 时间：2012-08-06T11:21:30.910
> 
> 标签：excel, vba

我是 excel VB 的新手，并在以下问题中寻求帮助：

我有一列 A 具有以下值：

```
column A
"VL50s"
"M50s"
"H50s"
"VL50s"
"H50s" 
```

我想提取数字并将下面的算术函数运行到 B 列中。

```
key:
x is a number
VLx --> (x) + 1
Mx -->(x) + 2
Hx --> (x) + 3 
```

使用上面的键，输出应如下所示：

```
coloumn B
51
52
53
51
53 
```

我想问一下我将如何在 VBA 中执行此功能。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:26:07.637

因为您说字母/数字组合的数量比您的示例中的要多得多，所以我认为这是 VBA 的问题，而不是工作表函数。一个 WS 功能将变得难以维护并且非常迅速。

我做了这4个功能。该`GetCharArray`函数解析您传递给它的字符串的文本，以将该文本作为字符数组返回（即使 BA 没有`char`类型只是一个`string`类型，所以我返回一个字符串。同样的想法）

然后假设我们可以调用`GetNumberFromChars`以获取`50`from`VL50s`并调用`GetLeftMostLetters`以获取`VL`from `VL50s`。

然后是一些工作表，我创建了一个命名范围`keys`，其中范围的第 1 列是字母，如“VL”、“H”、“M”......并且与之关联的相应值在第 2 列中。它看起来像

```
Col1    Col2
VL      1
M       2
H       3
...     ... 
```

我们可以使用带有和结果的`vlookup`工作表函数来找到应该添加到结果中的数字。`Range("keys")``GetLeftMostLetters``GetNumberFromChars`

```
Function GetNewNumber(inString As String) As Double
    Dim searchString As String, numberToAddFromKeys As Double, numberToAddToFromCell As Long, cellChars() As String

    cellChars = GetCharArray(inString)
    searchString = GetLeftMostLetters(cellChars)
    numberToAddToFromCell = GetNumberFromChars(cellChars)

    'use the keys named range where column 1 is your letters ("VL","H"...)
    'and column 2 is the corresponding value for that letter set
    numberToAddFromKeys = WorksheetFunction.VLookup(searchString, Range("keys"), 2, 0)

    GetNewNumber = CDbl(numberToAddFromKeys) + CDbl(numberToAddToFromCell)
End Function

Function GetNumberFromChars(inChars() As String) As Long
    Dim returnNumber As String, i As Long, numberStarted As Boolean

    For i = 1 To UBound(inChars)
        If IsNumeric(inChars(i)) Then
            If Not numberStarted Then numberStarted = True
            returnNumber = returnNumber & inChars(i)
        Else
            If numberStarted Then
                'this will ignore that "s" on the end of your sample data
                'hopefully that's what you need
                GetNumberFromChars = returnNumber
                Exit Function
            End If
        End If
    Next
End Function

Function GetLeftMostLetters(inChars() As String) As String
    Dim returnString As String, i As Long

    For i = 1 To UBound(inChars)
        If Not IsNumeric(inChars(i)) Then
            returnString = returnString & inChars(i)
        Else
            GetLeftMostLetters = returnString
        End If
    Next
End Function

Function GetCharArray(inText As String) As String()
    Dim s() As String, i As Long
    ReDim s(1 To Len(inText))

    For i = 1 To UBound(s)
      s(i) = Mid$(inText, i, 1)
    Next
    GetCharArray = s
End Function 
```

所以可以这样使用...

```
Dim cell As Range, rng As Range
'set this range to your actual range. 

Set rng = Sheets("your sheet name").Range("A1:A5")       
For Each cell In rng
    'put this resulting value wherever you want.
    Debug.Print GetNewNumber(cell.Value)
Next cell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:54:28.707

这将返回在输入值中找到的第一个数字：

```
Function GetNumber(val)
    Dim re As Object
    Dim allMatches
    Set re = CreateObject("VBScript.RegExp")
    re.Pattern = "(\d+)"
    re.ignorecase = True
    re.Global = True
    Set allMatches = re.Execute(val)
    If allMatches.Count > 0 Then
        GetNumber = allMatches(0)
    Else
        GetNumber = ""
    End If
End Function 
```

编辑：刚刚注意到你的问题标题是“小数”数字 - 你的值会有小数位，还是全部都是整数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:52:27.800

您甚至不必为此使用 VBA，您可以使用（非常丑陋的）公式来确定这一点：

```
=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1, "VL",""), "M",""), "H", ""), 
    "s", "") + IF(LEFT(A1, 2) = "VL", 1, IF(LEFT(A1, 1) = "M", 2, 
    IF(LEFT(A1,1) = "H", 3, 0))) 
```

实际上，这个公式应该在一行上，但我在这里把它分解了，这样它就可以阅读了。将公式放在单元格 B1 中，然后将其复制到您需要的任何其他单元格中。它去掉“VL”、“M”、“H”和“s”的所有实例，然后根据 A 单元格的左侧 1 或 2 个字符添加额外的数字。

# php - Magento - 在左侧块中列出特定的 cms 页面链接

> ID：11827293
> 
> 赞同：1
> 
> 时间：2012-08-06T11:21:41.730
> 
> 标签：php, magento

我想在magento中列出特定的CMS页面链接到块的左侧。例如。假设我在 admin 中添加了 10 个 cms 页面，现在我想列出 2 到 3 个我想要的特定 cmspages。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:17:37.227

有很多方法可以使用**小部件**来完成这项任务-

**过程1：**我们可以为特定的CMS页面添加Widgets作为“CMS页面链接”。Magento 提供了添加多种小部件的功能。

**过程 2：**我们可以创建一个静态块，我们可以在其中放置 CMS 页面的链接代码。我们可以使用左/右列上的小部件或我们想要的位置来调用这个静态块。

希望它会有所帮助:)

谢谢。

# android - 在android中向下运动时显示布局并在向上运动时隐藏

> ID：11827296
> 
> 赞同：0
> 
> 时间：2012-08-06T11:21:48.970
> 
> 标签：android, motion

我正在开发自定义媒体控制器，我在线性布局中采用了四个按钮（播放/暂停、下一个、前一个和带宽）。我希望当我们触摸屏幕然后屏幕然后这个线性布局应该在几秒钟内和指定时间后可见这应该是不可见的。我已经完成了以下代码，但它不起作用。

**我的代码**

```
@Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if (event.getAction() == MotionEvent.ACTION_UP) {
                    if (mShowing) {
                        try {
                            linearl.setVisibility(View.GONE);

                        } catch (IllegalArgumentException ex) {
                            Log.w("MediaController", "already removed");
                        }
                        mShowing =!mShowing ;
                    }
                }
                return false;
            }
        }); 
```

所以请建议我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:34:59.480

尝试这个...

```
 if (event.getAction() == MotionEvent.ACTION_UP) {

                         if(linearLayout.getVisibility() == View.GONE){
                               linearLayout.setVisibility(View.VISIBLE);
                         }
                    } 
```

# c++ - GDI窗口中的游戏循环/一段时间后不刷新并崩溃

> ID：11827300
> 
> 赞同：0
> 
> 时间：2012-08-06T11:21:59.397
> 
> 标签：c++, gdi, draw, game-loop

这是我当前在普通窗口中的游戏循环：

```
while(running)
{
    while( PeekMessage( &msg, 0, 0, 0, PM_REMOVE ) )
    {
        if( msg.message == WM_QUIT )
        {
            running = false;
        }

        TranslateMessage( &msg );
        DrawGame(&game);
        DispatchMessage( &msg );
    }

    UpdateGame(&game);
    InvalidateRect(hwnd, NULL, 1);
    //Sleep(100);
} 
```

...但我真的应该将 DrawGame 放在 Translate 和 DispatchMessage 之间吗？如果我将 DrawGame 放在 UpdateGame 上方/下方，则不会绘制任何内容。

过了一会儿，如果我画一个简单的矩形，它们就会开始相互重叠。它运行了大约一分钟，绘制了一个矩形网格（由于：[您设置的窗口大小不是正确的窗口大小](https://stackoverflow.com/questions/11783086/get-exact-window-region-size-createwindow-window-size-isnt-correct-size-of-wi)而导致位置不正确。过了一会儿它绘制了另一个网格，有时它完全搞砸了窗口似乎已经崩溃，我必须在 Visual Studio 中按下“停止”按钮。

那么，我究竟应该在哪里放置一个游戏循环，以及我如何知道何时绘制游戏？我主要需要绘制矩形，尽管这也不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:45:46.593

**在处理WM_PAINT**消息时，您应该从 Windows 消息回调中调用**DrawGame()**。

 **在消息循环中，您应该只获取 Windows 消息并将其分派给适当的回调。

此外，这也是更新游戏世界的地方，但不是进行绘图调用的地方。**

# zend-framework - Zend 框架中的选项卡？

> ID：11827303
> 
> 赞同：0
> 
> 时间：2012-08-06T11:22:09.190
> 
> 标签：zend-framework

我正在制作一个社交网站，每个用户都可以查看他自己或其他用户的个人资料。我创建了一个用户控制器来处理身份和博客、状态、配置文件控制器来检索信息。我的问题是如何使用户控制器下的三个子控制器（博客、状态、配置文件）像选项卡视图一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:23:20.040

如果你想在你的应用程序中有标签，你应该首先选择一个 ajax 框架来创建和加载内容：

假设您愿意使用 jquery: Tabs 支持通过 Ajax 以不显眼的方式加载选项卡内容。

您需要的 HTML 与用于静态选项卡的 HTML 略有不同：指向现有资源的链接列表（从那里加载内容）并且根本没有其他容器（不引人注目！）。容器的标记将动态创建：

```
<div id="example">
     <ul>
         <li><a href="/user/id/1/mode/simple"><span>USER</span></a></li>
         <li><a href="/blog/id/1/mode/simple"><span>his blogs</span></a></li>
         <li><a href="/theotherthing/id/1/mode/simple"><span>Whatever</span></a></li>
     </ul>
</div> 
```

欲了解更多信息：http: [//jqueryui.com/demos/tabs/#Events](http://jqueryui.com/demos/tabs/#Events)

并且选项卡内容将通过实际上生成视图脚本的那些“控制器”加载。

要禁用应该集成在选项卡面板中的视图布局，如果模式很简单，您可以添加 ZF1

```
$this->_helper->layout()->disableLayout(); 
```

# c# - 如何在 web.config 中注册 ImageHandler

> ID：11827304
> 
> 赞同：0
> 
> 时间：2012-08-06T11:22:14.233
> 
> 标签：c#, asp.net, web-config, handler

我编写了以下处理程序类，用于从数据库中读取图像并在我的网页中显示它们：

```
<%@ WebHandler Language="C#" Class="Handler" %>

using System;
using System.Configuration;
using System.Data.SqlClient;
using System.Web;

public class Handler : IHttpHandler, System.Web.SessionState.IRequiresSessionState
{

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["IranQRDBConnectionString"].ConnectionString);
    public void ProcessRequest(HttpContext context)
    {
        try
        {
            string TableName = context.Session["TableToQuery"].ToString();
            string ID = context.Session["ID"].ToString();

            SqlCommand comm = new SqlCommand("SELECT * FROM " + TableName + " WHERE ID=" + ID, conn);

            conn.Open();
            SqlDataReader dr = comm.ExecuteReader();
            dr.Read();
            context.Response.ContentType = "image/jpeg";
            context.Response.BinaryWrite((byte[])dr["Image"]);
            conn.Close();

        }
        catch
        {
            SqlCommand comm = new SqlCommand("SELECT * FROM DefaultImage WHERE ID=1", conn);

            conn.Open();
            SqlDataReader dr = comm.ExecuteReader();
            dr.Read();
            context.Response.ContentType = "image/jpeg";
            context.Response.BinaryWrite((byte[])dr["Image"]);
            conn.Close();
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

} 
```

这门课在我本地运行良好！我已经上传了我的网站，当我查询我的数据库时，所有数据都返回到我的网页，除了图像未显示在图像控件中。我在网上搜索过，我发现我应该在`web.config`文件中注册我的处理程序，并且主机上的 IIS 版本是 7 并且它以集成模式运行！所以我知道我应该`<System.webserver><Handlers>` 在`web.config`.

有关更多详细信息，我将处理程序类添加到我的项目根目录而不是`App_Code`目录中！我已经将该网站作为预编译网站上传，并且`Handler.ashx`在我的根目录中进行了预编译，并且`App_Web_handler.ashx.cdcab7d2.dll`在我的`App_Code`.

我还添加了：

```
<add name="ImageHandler" verb="*" path="*.jpg" type="Handler" /> 
```

在我的`web.config`文件中，但它仍然不起作用:(

任何人都可以帮助我找到正确的注册吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:40:06.287

您需要将 *.jpg 映射到 IIS 映射中的 ASPX 文件处理程序，否则它将不起作用。此链接将为您提供帮助：[如何：在 IIS 中配置 HTTP 处理程序扩展](http://msdn.microsoft.com/en-us/library/bb515343.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:48:44.713

答案来了！我的代码没有任何问题，并且主机上有防火墙，不允许显示我的图像！配置防火墙后，我的项目工作得很好:)

# jquery - 如何创建类似 BBC 特色内容的布局？

> ID：11827307
> 
> 赞同：0
> 
> 时间：2012-08-06T11:22:37.760
> 
> 标签：jquery, html, css, layout

我真的很喜欢新的 BBC 布局，特别是您可以左右滚动的特色内容位，主视图中的元素会淡出，请参阅[http://www.bbc.co.uk/](http://www.bbc.co.uk/)。

只是想知道是否有人知道他们如何开发这个以及如何制作类似的东西？

# java - 用于补充整数值的更好算法，不包括前导零二进制位

> ID：11827310
> 
> 赞同：2
> 
> 时间：2012-08-06T11:22:45.993
> 
> 标签：java, algorithm, bit-manipulation, complement

我将首先解释“补整数值不包括前导零二进制位”的含义（从现在开始，我将其称为非前导零位补码或 NLZ 补码）。

例如有整数92，二进制数是1011100。如果我们执行正常的按位非或补码，结果是：-93（有符号整数）或11111111111111111111111110100011（二进制）。那是因为前导零位也被补充了。

因此，对于 NLZ-Complement，前导零位不被补码，那么 92 或 1011100 的 NLZ-complementing 的结果是：35 或 100011（二进制）。该操作是通过将输入值与非前导零值的 1 位序列进行异或运算来执行的。插图：

```
92:  1011100
     1111111 (xor)
     --------
     0100011 => 35 
```

我做了这样的java算法：

```
public static int nonLeadingZeroComplement(int n) {
    if (n == 0) {
        return ~n;
    }
    if (n == 1) {
        return 0;
    }

    //This line is to find how much the non-leading zero (NLZ) bits count.
    //This operation is same like: ceil(log2(n))
    int binaryBitsCount = Integer.SIZE - Integer.numberOfLeadingZeros(n - 1);

    //We use the NLZ bits count to generate sequence of 1 bits as much as the NLZ bits count as complementer
    //by using shift left trick that equivalent to: 2 raised to power of binaryBitsCount.
    //1L is one value with Long literal that used here because there is possibility binaryBitsCount is 32
    //(if the input is -1 for example), thus it will produce 2^32 result whom value can't be contained in 
    //java signed int type.
    int oneBitsSequence = (int)((1L << binaryBitsCount) - 1);

    //XORing the input value with the sequence of 1 bits
    return n ^ oneBitsSequence;
} 
```

我需要一个建议如何优化上述算法，尤其是生成 1 位补码序列（oneBitsSequence）的行，或者是否有人可以提出更好的算法？

**更新：**我也想知道这个非前导零补码的已知术语？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T11:27:58.567

您可以通过该方法获得最高一位`Integer.highestOneBit(i)`，将这一位向左移动，然后减去 1。这将获得正确的`1`s 长度：

```
private static int nonLeadingZeroComplement(int i) {
    int ones = (Integer.highestOneBit(i) << 1) - 1;
    return i ^ ones;
} 
```

例如，

```
System.out.println(nonLeadingZeroComplement(92)); 
```

印刷

```
35 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-10T15:45:24.340

显然@keppil 提供了最短的解决方案。另一种解决方案可能是这样的。

```
private static int integerComplement(int n){

  String binaryString = Integer.toBinaryString(n);

  String temp = "";
  for(char c: binaryString.toCharArray()){
      if(c == '1'){
          temp += "0";
      }
      else{
          temp += "1";
      }
  }
  int base = 2;
  int complement = Integer.parseInt(temp, base);

  return complement;
} 
```

例如，

```
System.out.println(nonLeadingZeroComplement(92)); 
```

将答案打印为 35

# ruby-on-rails - 重置密码时设计中断

> ID：11827315
> 
> 赞同：1
> 
> 时间：2012-08-06T11:23:30.723
> 
> 标签：ruby-on-rails, devise

我正在使用设计，我认为一切正常，直到我试图重置密码。我收到以下错误。设计找不到名为布局/电子邮件的模板。为什么它甚至想要那个？我的印象是，在表单发布后，设计会重定向到用户登录页面。

我怀疑设计无法找到“reset_password_instructions.html.haml”文件，因为它显然能够生成重置令牌，但实际上没有发送任何电子邮件。根据下面的错误消息，这听起来像是正确的诊断吗？

我该怎么做才能解决这个问题？我猜我必须通过覆盖控制器来修改设计，但我不确定。有什么建议么？

```
Started POST "/users/password" for 127.0.0.1 at 2012-08-06 05:52:42 -0500
    Processing by Devise::PasswordsController#create as HTML
      Parameters: {"utf8"=>"✓", "authenticity_token"=>"kGvuZiu+iu1HAx9xf4RsISj2SM410uLRoR6RbiJcBQw=", "user"=>{"email"=>"test1@example.com"}, "commit"=>"Send me reset password instructions"}
      User Load (6.0ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'test1@example.com' LIMIT 1
      User Load (1.3ms)  SELECT "users".* FROM "users" WHERE "users"."reset_password_token" = '5QZVFAsq2ev22gpQfe9i' LIMIT 1
       (0.1ms)  BEGIN
       (3.0ms)  UPDATE "users" SET "reset_password_token" = '5QZVFAsq2ev22gpQfe9i', "reset_password_sent_at" = '2012-08-06 10:52:42.591763', "updated_at" = '2012-08-06 10:52:42.593474' WHERE "users"."id" = 2
       (0.5ms)  COMMIT
    DEPRECATION WARNING: Passing a template handler in the template name is deprecated. You can simply remove the handler name or pass render :handlers => [:haml] instead. (called from call at /Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/sass-3.1.19/lib/sass/plugin/rack.rb:54)
    DEPRECATION WARNING: Passing a template handler in the template name is deprecated. You can simply remove the handler name or pass render :handlers => [:haml] instead. (called from call at /Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/sass-3.1.19/lib/sass/plugin/rack.rb:54)
    Completed 500 Internal Server Error in 113ms

    ActionView::MissingTemplate (Missing template layouts/email with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
      * "/Users/bendowney/Sites/RobotimusApp/app/views"
      * "/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotimusApp/gems/devise-2.1.2/app/views"
    ):
      actionpack (3.2.5) lib/action_view/path_set.rb:58:in `find'
      actionpack (3.2.5) lib/action_view/lookup_context.rb:109:in `find'
      actionpack (3.2.5) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
      actionpack (3.2.5) lib/action_view/renderer/template_renderer.rb:79:in `resolve_layout'
      actionpack (3.2.5) lib/action_view/renderer/template_renderer.rb:86:in `resolve_layout'
      actionpack (3.2.5) lib/action_view/renderer/template_renderer.rb:69:in `block in find_layout'
      actionpack (3.2.5) lib/action_view/lookup_context.rb:228:in `with_layout_format'
#...etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:35:58.020

在重定向用户之前，Devise 会发送一封带有重置令牌的电子邮件。发送电子邮件还需要模板和布局。在您的情况下，此步骤失败，因为您可能在代码中的某处指定`layout 'email'`了 ActionMailer 类，但实际上并未创建此布局模板。

尝试添加一个`app/views/layouts/email.html.haml`至少包含以下内容的文件：

```
= yield 
```

（或`<%= yield %>`在 .html.erb 模板中）。

# javascript - 要按顺序显示的图像

> ID：11827319
> 
> 赞同：1
> 
> 时间：2012-08-06T11:23:41.820
> 
> 标签：javascript, jquery, html

我创建了一个滑块但我的逻辑有些错误。我可以显示所有图像，但不能按顺序显示。所以最初是 image1 之后的 image2 .. 在我的逻辑中顺序出错了。当我们进入浏览器时，图像应该会加载，加载需要一些时间。

这是现场演示链接：

[http://codebins.com/bin/4ldqp9c/2#](http://codebins.com/bin/4ldqp9c/2#)

**HTML**

```
<div id="panel">
  <div id="title">
  </div>
  <img id="imageSlide" alt="" src="" width="250px"/>
  <div id="desc">
  </div>
</div> 
```

**JS**

```
$(function() {
    //Local XML Data
    var slideXML = "<rss version='2.0'><channel>";
    slideXML += "<title>IMAGES</title>";
    slideXML += "<images>";
    slideXML += "<image>";
    slideXML += "<title>Image 1</title>";
    slideXML += "<url>http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg</url>";
    slideXML += "<desc>Description For Image 1</desc>";
    slideXML += "</image>";
    slideXML += "<image>";
    slideXML += "<title>Image 2</title>";
    slideXML += "<url>http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg</url>";
    slideXML += "<desc>Description For Image 2</desc>";
    slideXML += "</image>";
    slideXML += "<image>";
    slideXML += "<title>Image 3</title>";
    slideXML += "<url>http://www.behok.ru/i/a/cat/gerbera.jpg</url>";
    slideXML += "<desc>Description For Image 3</desc>";
    slideXML += "</image>";
    slideXML += "<image>";
    slideXML += "<title>Image 4</title>";
    slideXML += "<url>http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg</url>";
    slideXML += "<desc>Description For Image 4</desc>";
    slideXML += "</image>";
    slideXML += "<image>";
    slideXML += "<title>Image 5</title>";
    slideXML += "<url>http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg</url>";
    slideXML += "<desc>Description For Image 5</desc>";
    slideXML += "</image>";
    slideXML += "<image>";
    slideXML += "<title>Image 6</title>";
    slideXML += "<url>http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg</url>";
    slideXML += "<desc>Description For Image 6</desc>";
    slideXML += "</image>";
    slideXML += "</images>";
    slideXML += "</channel></rss>";

    //Parse XML content
    var xmlDoc = $.parseXML(slideXML);
    var $xmldata = $(xmlDoc);

    //Find Total No of Image
    var maximages = ($xmldata.find("images").find("image").length);

    $(function() {
        //FadeIn/FadeOut Image on Set Time Interval on Slide
        setInterval(Slider, 2500);
    });

    var prevIndex = 0;

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
            var shuffleIndex = Math.round((Math.random() * (maximages - 1)));
            if (prevIndex == shuffleIndex) {
                if (prevIndex >= (maximages - 1)) {
                    shuffleIndex--;
                } else {
                    shuffleIndex++;
                }
            }
            prevIndex = shuffleIndex;
            $("#panel").fadeIn("slow").css('background', '#000');

            var title = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")").find("title").text();
            $("#title").text(title).fadeIn("slow");

            var imgurl = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")").find("url").text();
            $(this).attr('src', imgurl).fadeIn("slow");

            var desc = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")").find("desc").text();
            $("#desc").text(desc).fadeIn("slow");

        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:38:21.823

这个[http://codebins.com/bin/4ldqp9c/23](http://codebins.com/bin/4ldqp9c/23)？

```
 if  ( prevIndex < maximages ){
       shuffleIndex = prevIndex;
       prevIndex++; 
      }
      else {
        prevIndex=0;
        shuffleIndex=prevIndex;
        prevIndex++;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:36:10.470

这可能是一个顺序：

```
var i = 0;

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {

            if(i == maximages) i = 0;
            $("#panel").fadeIn("slow").css('background', '#000');

            var title = $xmldata.find("images").find("image:eq(" + i + ")").find("title").text();
            $("#title").text(title).fadeIn("slow");

            var imgurl = $xmldata.find("images").find("image:eq(" + i + ")").find("url").text();
            $(this).attr('src', imgurl).fadeIn("slow");

            var desc = $xmldata.find("images").find("image:eq(" + i + ")").find("desc").text();
            $("#desc").text(desc).fadeIn("slow");

            i++;

        });
    } 
```

# objective-c - 使用选择器时 NSArray 无效

> ID：11827322
> 
> 赞同：0
> 
> 时间：2012-08-06T11:23:47.777
> 
> 标签：objective-c, cocoa

以下是我的代码（省略了一些无关的东西）：

```
@implementation HomeSceneController

...
@synthesize options = _options;    // _options is a NSArray object with 4 elements

- (id)init
{
    if (self = [super initWithNibName:@"HomeScene" bundle:nil]) {
        _currentOptionIndex = 0;

        // Following code add two key event observations, when up arrow or down arrow key is pressed, the corresponding function will be fired.
        [self addObservation:_KEY_UPARROW_ selector:@selector(UpArrowPressHandler)];
        [self addObservation:_KEY_DOWNARROW_ selector:@selector(DownArrowPressHandler)];

    }

    return self;
}

- (void)loadView {
    [super loadView];
    // init _options
    _options = [NSArray arrayWithObjects:
                _localGameOption,
                _networkGameOption,
                _controlSettingOption,
                _quitOption,
                nil];
    [self selectOption:_localGameOption];
}

....

// in these two functions, _options become nil! I don't know why...
- (void)UpArrowPressHandler {
    if (_currentOptionIndex > 0) {
        [self deselectOption:_options[_currentOptionIndex]];
        _currentOptionIndex--;
        [self selectOption:_options[_currentOptionIndex]];
    }
}

- (void)DownArrowPressHandler {
    if (_currentOptionIndex < 3) {
        [self deselectOption:_options[_currentOptionIndex]];
        _currentOptionIndex++;
        [self selectOption:_options[_currentOptionIndex]];
    }
}

@end 
```

当我按下向上箭头键时，UpArrowPressHandler 函数被触发。然而，问题是，_options 数组变成了 nil。

谁能告诉我为什么以及如何解决它？

```
//=========================================================================================== 
```

附加问题：

在以下程序中：

```
import "Deep.h"

@implementation Deep

- (id)init {
    if (self = [super init]) {
        _name = @"Deep";
    }
    return self;
}

- (void)test {
    NSLog(_name);
}

@end 
```

当我在其他地方调用它时，测试方法可以正确打印“Deep”。

但是，根据@ATaylor 的解释，应该释放 _name。

那么，我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:29:16.337

那是因为 _options 被分配了一个自动释放的对象，一旦你离开调用它的方法，它就会被释放。

尝试将其分配给“self.options”，这将（很可能）在对象上调用“retain”，或显式调用“retain”。

再次在代码中：要么使用：

```
self.options = [NSArray ...]; 
```

或者：

```
_options = [[NSArray ...] retain]; 
```

请不要忘记发布您的“选项”，一旦你完成它，要么通过：

```
self.options = nil; 
```

或者：

```
[_options release]; 
```

请只选择其中一个选项，否则您会在保留计数方面出现奇怪的行为。

你看，Apple 为我们提供了许多“便利功能”，它们返回自动释放的对象，这意味着我们不必为它们的释放而烦恼。作为一般经验法则：为您自己调用的每个分配/保留调用释放。

回答第二个问题：

```
_name = @"Deep"; 
```

是对变量的赋值，相当于'const char *_name = "Deep";' 来自 C。没有必要释放它，原因很简单，你没有创建或保留它。（没有新的，没有分配，没有保留，没有复制）。该对象也不会自动释放，因为您没有调用任何类型的方法，这会导致变量被自动释放。

另外，请参阅[this](https://stackoverflow.com/questions/687962/do-i-need-to-release-nsstring-generated-using) answer，它处理确切的问题。

只是为了澄清，要获得一个字符串，有三种类型的方法。

```
NSString *someString;
someString = @"MyString"; //No retain, no release, static String.
someString = [NSString stringWithFormat...]; //Autoreleased object, disappears after the method expires.
someString = [[NSString alloc] initWithFormat...]; //Alloced object, must be released. 
```

# c# - 数据驱动（实时）Web 前端

> ID：11827323
> 
> 赞同：-1
> 
> 时间：2012-08-06T11:23:48.233
> 
> 标签：c#, asp.net, frameworks, data-driven

我们正在寻找一种更好的方式将数据更新通知传送到 Web 前端。

这些通知通过 JavaScript (JS) 触发执行业务逻辑和更新元素的事件，以动态更新页面而无需重新加载。

目前这是通过服务器端线程完成的，该线程及时触发 A-synch JS 事件以通知 Web 前端以检查数据是否已更改。

这种机制有效，但团队内部的感觉是它可能会更有效率。

该工具是用 C#/ASP.NET 结合 JS 编写的，我们使用 PokeIn 库进行 aSynch JS/C# 调用。

欢迎任何关于改进功能的建议！包括仍然保持 JS/C#/ASP.NET 使用的完全不同的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:30:07.553

这是一个真正的问题吗？我想将此添加为评论，但我没有足够的分数。无论如何，如果您需要 pokein 为您做的事情（各方之间的对象翻译），那是您唯一的选择。虽然有 websync、signalr 等解决方案。它们不处理对象转换，也没有不同的方法等。更好的是，您可以从 pokein 的 websocket 功能中受益。其他两个都需要用于 websocket 的 Windows Server 8。Pokein 允许您在任何服务器版本或平台上使用 websocket。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:29:55.963

听起来像[SignalR](http://signalr.net/)会帮助你？ [这篇博文](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)给出了很好的介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:30:49.677

我最近试图解决类似的问题（报告从与服务器通信的外部服务触发的实时更新），结果证明[SignalR](https://github.com/SignalR/SignalR/)非常适合这种情况。

基本上，它是一个包含长轮询、Web 套接字和其他一些技术的库，使用（透明地）服务器和客户端上可用的任何东西。

到目前为止，我只有很好的经验。

# java - OOP -- 每个类的成员变量和方法的数量

> ID：11827325
> 
> 赞同：1
> 
> 时间：2012-08-06T11:23:52.690
> 
> 标签：java, oop

我有一个 Java 类，它有 25 个成员变量，但只有两个“有用”的方法（不包括 setter/getter）。我觉得好像有 25 个全局变量在左、右和中心被修改，不知道发生了什么。这是正常的吗？是否有任何“良好实践”规则说明可以在一个类中合理封装多少数据成员和方法？

PS：我搜索了SO，但显然这个问题还没有被问到。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:27:04.030

多少？从来没听说过。

但我使用的规则是将变量保持在尽可能小的范围内。如果不是所有的 25 个成员都代表对象的状态，那么也不是所有的成员都需要是成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:25:34.053

这听起来肯定是错误的。

我希望每个班级都有一个[单一的职责](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并委托给其他班级并与其他班级合作。如果您有 25 名成员，那么听起来会发生很多事情。我希望重构这个类：

1.  确定正在发生的事情（正在执行哪些操作/操作）
2.  确定参与这些任务的成员组
3.  将这些提取到执行该角色的对象中，并在适当的地方委托给这些对象

在类中执行此操作可能是合适的，从而使重构对客户端类不可见。但是，如果您有多个 setter/getter，我怀疑这不太可能。

无论您如何执行重构，请确保该区域被适当的单元测试集覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:37:18.450

添加到其他答案看一下[pmd rules的](http://pmd.sourceforge.net/rules/java/codesize.html)**TooManyFields**部分。

那里说

> 具有太多字段的类可能会变得笨拙，并且可以重新设计以具有更少的字段，可能通过将相关字段分组到新对象中。例如，具有单独城市/州/邮编字段的类可以将它们停放在单个地址字段中。

其他规则也会派上用场，您可以使用[pmd](http://pmd.sourceforge.net)和[checkstyle](http://checkstyle.sourceforge.net/)等工具来更好地了解您的代码如何遵守标准。

# java - SwingPropertyChangeSupport 动态更新 JTextArea

> ID：11827326
> 
> 赞同：2
> 
> 时间：2012-08-06T11:23:58.247
> 
> 标签：java, arrays, swing, refresh

我正在尝试建立有关 SwingPropertyChangeSupport 的问题的答案

我正在尝试修改非常有用的 Hovercraft Full Of Eels: [WindowListener does not work as expected](https://stackoverflow.com/questions/10198936/windowlistener-does-not-work-as-expected/10199137#10199137)来修改此处给出的代码，以便在通过输入对话框输入更改时更新显示的数组。

阵列更新正常，但未在 GUI 中刷新。我希望有人能告诉我哪里出错了。

这是代码：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.event.SwingPropertyChangeSupport;

public class Main {
public static void main(String[] arg) {
    GuiForUpdate display = new GuiForUpdate();
    display.setVisible(true);
}
}

class GuiForUpdate extends JFrame implements ActionListener {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private FocusListener focusListener;
private String mList;
private JButton changeArrayButton;
private JTextArea codeIn, displayOutput;
private int arrayIndex;
private JPanel displayPanel;
private ArrayForUpdating arrayForUpdate = new ArrayForUpdating();

public GuiForUpdate() {
    setSize(224, 180);
    layoutLeft();
    layoutDisplay();
    layoutBottom();
}

/**
 * adds a display area for array
 */
public void layoutDisplay() {
    displayPanel = new JPanel();
    add(displayPanel, BorderLayout.CENTER);
    displayOutput = new JTextArea();
    displayPanel.add(displayOutput);
    displayOutput.addFocusListener(focusListener);

    mList = arrayForUpdate.getBoundProperty();

    arrayForUpdate.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent pcEvt) {
            if (pcEvt.getPropertyName().equals(
                    ArrayForUpdating.BOUND_PROPERTY)) {
                mList = (pcEvt.getNewValue().toString());
            }
        }
    });

    displayOutput.setText(mList);
}

/**
 * adds left hand side elements to left of GUI
 */
public void layoutLeft() {
    JPanel left = new JPanel();
    add(left, BorderLayout.WEST);
    codeIn = new JTextArea(2, 2);
    left.add(codeIn);
    codeIn.addFocusListener(focusListener);
}

/**
 * adds bottom elements to bottom of GUI
 */
public void layoutBottom() {
    JPanel bottom = new JPanel();
    changeArrayButton = new JButton("Modify array");
    changeArrayButton.addActionListener(this);
    bottom.add(changeArrayButton);
    add(bottom, BorderLayout.SOUTH);
}

/**
 * Process button clicks
 */
public void actionPerformed(ActionEvent ae) {

    if (ae.getSource() == changeArrayButton) {

        // first check if any code entered
        if (codeIn.getText().trim().length() != 0) {

            // call modifyMemory() method
            modifyArray();

        } else
            JOptionPane.showMessageDialog(null,
                    "Please enter something first.");
    }
}

/**
 * method to process modify array
 */
public void modifyArray() {

    // show dialog to retrieve entered address
    String addressToModify = (String) JOptionPane
            .showInputDialog("At which location?");

    // confirm if a string was entered
    if ((addressToModify != null) && (addressToModify.length() > 0)) {

        // convert to integer if decimal address entered
        arrayIndex = Integer.parseInt(addressToModify);
    }
    // pass as integer
    processInput(arrayIndex);
}

public void processInput(int a) {

    String newValue = codeIn.getText();
    arrayForUpdate.instructionsIn(newValue, a);
}
}

class ArrayForUpdating {

public static final String BOUND_PROPERTY = "bound property";
private String boundProperty = "";

private SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(
        this);
private StringBuilder mList;
private int[] myArray;

public ArrayForUpdating() {

    myArray = new int[5];
    for (int i = 0; i < myArray.length; i++) {
        myArray[i] = 0;
    }
    setArrayyDisplayString();
}

/** 
 * method to create formatted string of array
 */
public void setArrayyDisplayString() {

    // create StringBuilder for display in memory tab
    mList = new StringBuilder();
    for (int i = 0; i < myArray.length; i++) {

        mList.append(String.format("%10s %02d %10s %02d", "Pos:   ", i,
                "Value:  ", myArray[i]));
        mList.append("\n");
    }
    setBoundProperty(mList.toString());
}

/**
 * This method takes in a string passed through from the GUI
 */
public void instructionsIn(String codeIn, int loc) {

    String code = codeIn.trim();
    int oc = Integer.parseInt(code);

    // add the data to the array
    setArrayData(loc, oc);
    loc++;
}

/**   
 * method to add data to the array
 */
public void setArrayData(int a, int memData) {
    myArray[a] = memData;

    // print array to console for checking
    for (int i = 0; i < myArray.length; i++) {
        System.out.println("location: " + i + " value: " + myArray[i]);
    }
    setArrayyDisplayString();
}

public SwingPropertyChangeSupport getSpcSupport() {
    return spcSupport;
}

public void setSpcSupport(SwingPropertyChangeSupport spcSupport) {
    this.spcSupport = spcSupport;
}

public String getBoundProperty() {
    return boundProperty;
}

public void setBoundProperty(String boundProperty) {
        String oldValue = this.boundProperty;
        System.out.println("old = " + oldValue);
        String newValue = boundProperty;
        System.out.println("new = " + newValue);
        this.boundProperty = newValue;
        spcSupport.firePropertyChange(BOUND_PROPERTY, oldValue, newValue);
    }

    public void addPropertyChangeListener(PropertyChangeListener listener) {
    spcSupport.addPropertyChangeListener(listener);
    }
} 
```

-EDIT- 希望消除编译错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T17:22:22.967

[`ObservedPanel`](https://stackoverflow.com/a/10523401/230513)这是一个在无模式对话框中使用的完整示例。

```
public class PropertyChangeDialog extends JPanel {

    private JLabel label = new JLabel("null", JLabel.CENTER);
    private ObservedPanel observed = new ObservedPanel();

    public PropertyChangeDialog() {
        this.setBorder(BorderFactory.createTitledBorder("Observer"));
        this.add(label);
        observed.addPropertyChangeListener(new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent e) {
                if (e.getPropertyName().equals(ObservedPanel.PHYSICIST)) {
                    String value = e.getNewValue().toString();
                    label.setText(value);
                }
            }
        });
    }

    private void display() {
        JFrame f = new JFrame("PropertyChangeDialog");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);
        JDialog dialog = new JDialog(f);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.add(observed);
        dialog.pack();
        dialog.setLocationRelativeTo(null);
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PropertyChangeDialog().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:36:16.750

代码看起来或多或少是正确的（即我找不到任何明显的错误）。您应该尝试在调试器中运行它，并在调试代码时提出新问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T23:58:37.563

当我放入`displayOutput.setText(mList)`该`propertyChange`方法时，它起作用了：

```
@Override
public void propertyChange(PropertyChangeEvent pcEvt) {
    if (pcEvt.getPropertyName().equals(
        ArrayForUpdating.BOUND_PROPERTY)) {
        mList = (pcEvt.getNewValue().toString());
        displayOutput.setText(mList);
    }
} 
```

感谢大家的帮助，尤其是你们的耐心。

# c# - 如何使用单个 SQL 字符串从 C# 中的多个表创建数据集？

> ID：11827333
> 
> 赞同：0
> 
> 时间：2012-08-06T11:24:34.420
> 
> 标签：c#, sql, oledb, oledbdataadapter, oledbdatareader

我是 C# 新手，我对如何使用单个 sql 字符串从多个表（实际上是 3 个表）中检索数据一无所知。

基本上有2个主文件：

*   Task_Information、Emp_Information

和 1 个交易文件：

*   作业：这个由 2 个主文件的主键和其他一些字段更新。

没关系。但是现在我需要运行一个命令，该命令将根据用户输入的搜索参数从所有 3 个表中检索数据，并在所有表中显示选定的字段。在 ms 访问中，我所要做的就是进行查询 - 这是生成的 sql：

```
SELECT Assignments.Task_No, Assignments.Assignment_No, Assignments.Assignment_Date,
       Task_Information.Client_Name, Emp_Information.F_Name, Emp_Information.L_Name
  FROM Emp_Information 
       INNER JOIN (Task_Information 
                   INNER JOIN Assignments ON Task_Information.Task_No = Assignments.Task_No) 
             ON Emp_Information.Emp_ID = Assignments.Assignee
  WHERE (((Assignments.Assignment_Date)="this is just some date the user has to enter...")) 
```

简而言之，我需要了解如何在用户键入搜索参数并单击按钮的 C# 程序中使用相同的 sql-string。顺便说一句，必须使用 oledbdatareader/adapter 来完成；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:11:37.377

试试这个查询：

```
 SELECT Assignments.Task_No, Assignments.Assignment_No, Assignments.Assignment_Date,
 Task_Information.Client_Name, Emp_Information.F_Name, Emp_Information.L_Name
  FROM Emp_Information 
  INNER JOIN Task_Information 
  ON Task_Information.Task_No = Assignments.Task_No 
  INNER JOIN Assignments 
  ON Emp_Information.Emp_ID = Assignments.Assignee
  WHERE (((Assignments.Assignment_Date) like "%this is just some date the user has to enter...%")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:11:45.250

如果您要使用 SQL Server，您可以使用[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx). `"this is..."`有了这个，你可以用参数 placeholder替换你的字符串`@date`，然后可以像[MSDN 上显示的](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)那样设置它。

这里的主要问题是使用[`OleDbDataReader`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.aspx)and 如果它支持这种查询。但是在阅读了 MSDN 之后[`OleDbCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)它应该可以工作。

# c# - 通过反射从类中获取内部对象的值

> ID：11827335
> 
> 赞同：0
> 
> 时间：2012-08-06T11:24:43.970
> 
> 标签：c#, reflection

嘿，伙计们！我试图通过反射从我的对象中获取值，购买我有一个问题：我可以从基础对象中获取值，但我无法从内部对象中获取值，如下所示：

```
public class Employee
{
   public long EmployeeID { get; set; }
   public string EmployeeNumber { get; set; }
   public DateTime EmployeeAdmissionDate { get; set; }
   public Person EmployeePerson { get; set; }
}

public class Person
{
    public long PersonID { get; set; }
    public string PersonName { get; set; }
    public DateTime PersonBirthday { get; set; }
}

private static void GetDTOProperties(IDictionary<string, object> dicProperties, Type objectToSerialize)
    {
        Type typeOfObject = objectToSerialize is Type ? objectToSerialize as Type : objectToSerialize.GetType();
        PropertyInfo[] properties = typeOfObject.GetProperties();
        foreach (PropertyInfo property in properties)
        {
            if (!property.PropertyType.IsClass || property.PropertyType.Equals(typeof(string)))
                dicProperties.Add(string.Format("{0}_{1}", property.DeclaringType.Name.ToLower(), property.Name.ToLower()), property.GetValue(typeOfObject, null));
            else
                GetDTOProperties(dicProperties, property.PropertyType);
        }
    }

public static void Main(string[] args)
{
    Employee objEmployee = new Employee();
    objEmployee.EmployeeID = 1;
    objEmployee.EmployeeNumber = 457435;
    objEmployee.EmployeeAdmissionDate = DateTime.Now;
    objEmployee.EmployeePerson = new EmployeePerson();

    objEmployee.EmployeePerson.PersonID = 123;
    objEmployee.EmployeePerson.PersonName = "Kiwanax";
    objEmployee.EmployeePerson.PersonBirthday = DateTime.Now;

    IDictionary<string, object> dicProperties= new Dictionary<string, object>();
    GetDTOProperties(dicPropriedades, objEntidadeAluno.GetType());
    foreach (string m in dicProperties.Keys)
            Console.WriteLine(m + " - " + dicProperties[m]);

    Console.ReadLine();
    } 
```

我可以获得基本值，但我无法获得“人”内部对象的值。有人有想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:00:46.647

您可以像这样更新您的方法：

```
private static void GetDTOProperties(IDictionary<string, object> dicProperties, object objectToSerialize)
{
   Type typeOfObject = objectToSerialize is Type ? objectToSerialize as Type : objectToSerialize.GetType();
   PropertyInfo[] properties = typeOfObject.GetProperties();
   foreach (PropertyInfo property in properties)
   {
      object val = objectToSerialize is Type ? property.PropertyType : property.GetValue(objectToSerialize, null);
      if (!property.PropertyType.IsClass || property.PropertyType.Equals(typeof(string)))
      {
         dicProperties.Add(string.Format("{0}_{1}", property.DeclaringType.Name.ToLower(), property.Name.ToLower()), val);                    
      }
      else
         GetDTOProperties(dicProperties, val);
   }
} 
```

所以对象不会有任何问题，您可以将实际对象发送到该方法。如果您发送对象类型，那么您将在字典中获得类型作为值

# entity-framework - Symfony2 - 在我们的实体中添加图像的好方法

> ID：11827336
> 
> 赞同：1
> 
> 时间：2012-08-06T11:24:49.257
> 
> 标签：entity-framework, symfony

实际上我有一个“电影”实体，我想添加一个新属性，如“图片”。当然我必须在我的实体“电影”中添加这个属性。

但我想知道是否必须在映射注释中设置一些参数，如大小、扩展名。

然后，由于我还没有创建我的添加和编辑表单......我在我的数据库中手动添加数据以测试我的脚本。“图片”列是否只包含像“toto.png”这样的图像名称？如果是这样，保存图像的目录是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:44:54.553

假设你使用 Doctrine 作为 ORM，我建议阅读[Symfony 文档中的文件上传](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)。它描述了创建、表单和上传处理的字段。但是，是的，您基本上将文件名存储在“图片”字段中并创建附加函数来帮助找出文件的真实路径。

# eclipse - Lua 在 Eclipse 中导出为 .apk

> ID：11827341
> 
> 赞同：0
> 
> 时间：2012-08-06T11:25:36.890
> 
> 标签：eclipse, lua, apk, coronasdk

我需要的是用 Eclipse 创建我的 .apk 文件。我的应用程序基于 .lua 文件和其他文件，如声音和图像。

PS 我使用的是 LuaEclipse，但如果它也与 Eclipse 相关，你可以向我推荐其他东西。

我正在尝试创建一个 .apk 文件。我看到一个新的 .apk 保存在我的桌面上，但它只是一个带有扩展名的文件，其中没有数据。

我最近刚从 Corona SDK 迁移到 LuaEclipse，我现在需要解释如何组合我的所有文件。

我在 Project Files 文件夹中有一个 .lua 文件，其中包含其他数据，例如图像和声音（使用 Corona 时）。现在我想将这些所有文件导出为 .apk（使用 Eclipse 导出），但我不能，因为我不知道在 LuaEclipse 中哪里可以找到 Project Files 的位置，以便放置 .lua 文件和其他文件在里面。

我是初学者，所以如果问题不清楚，我深表歉意。不准确的地方请大家多多指教，万分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:25:08.070

最好从 corona sdk 获得 .apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:20:55.353

对于那些使用 Corona SDK 编写原生 Android 和 iOS 游戏的人来说，在没有合适的 IDE 的情况下工作有时可能是一场噩梦。这就是 CIDER 的用武之地。CIDER 直接连接到 Corona SDK 并充当它的本地 IDE，并将显着加快您的开发时间。

CIDER 可用于 Windows 和 Mac 环境，并具有一系列非常吸引人的功能：

[下载](http://www.mydevelopersgames.com/CIDER/index.html)

另一个 IDE 是

用于 Windows 的 Lua（和 Corona SDK）编程的最佳 IDE 之一。它支持自动完成、代码提示、语法着色、各种很棒的功能。我也使用其他 JetBrains 软件 (PhpStorm)，所以对我来说感觉很自然。布局和功能集与 NetBeans 或 Eclipse 非常相似。由于各种功能和设置有点复杂，请花点时间阅读我在 Windows 上进行 Corona SDK 开发的教程，

[下载](http://www.jetbrains.com/idea/download/index.html)

# php - PDO 使用 if PHP 插入和更新语句

> ID：11827350
> 
> 赞同：0
> 
> 时间：2012-08-06T11:26:00.863
> 
> 标签：php, mysql, sql, pdo

我的查询是：

```
 $select_userid_query = execute_pdo_query("SELECT user_id FROM users WHERE username='" . $_COOKIE['username'] . "'");

   if ($select_userid_query == 0){

    execute_pdo_query("INSERT INTO user_status
    (user_id,last_activity_time) VALUES
    ((SELECT user_id FROM users WHERE username='" . $_COOKIE['username'] . "'),NOW())"
     , array($user_id, $last_activity_time));

   }
    else{
        execute_pdo_query("UPDATE user_status SET user_id = (SELECT user_id FROM users WHERE username='" . $_COOKIE['username'] . "'),last_activity_time= NOW()", array($user_id, $last_activity_time));
        } 
```

我想验证数据库中是否有记录，如果没有插入，是否只是用新的更新时间`NOW()`

任何想法我的语法错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:28:35.747

如果`user_id`是，`PRIMARY KEY`您可以使用以下内容：

```
INSERT INTO ...... ON DUPLICATE KEY UPDATE last_activity_time=NOW() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:31:04.823

如果你有一个唯一的，你可以使用这个单一的查询而不是这个`user_id`：

```
INSERT INTO user_status
(
 user_id, last_activity_time
)
(
    SELECT user_id, NOW()
    FROM users
    WHERE username='" . $_COOKIE['username'] . "'"
) ON DUPLICATE KEY UPDATE last_activity_time = NOW(); 
```

# php - 网址管理器 yii

> ID：11827355
> 
> 赞同：2
> 
> 时间：2012-08-06T11:26:31.957
> 
> 标签：php, url, url-rewriting, yii

这些我已添加为以下规则：

```
'search/do'=>'search/do',
'search/do/<town:.*?>'=>'search/do',
'search/do/<town:.*?>/<cat:.*?>'=>'search/do',
'search/do/<town:.*?>/<cat:.*?>/<scat:.*?>'=>'search/do', 
```

url search/do & search/do/chicago 工作正常。但是 search/do/chicago/restaurants 给出了 $_GET['cat'] 的错误（**未定义的索引 cat**）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:51:30.890

只需确保规则按*特异性*降序排列即可。更具体的规则应该首先出现，其次是较小的规则：

```
'search/do/<town:.*?>/<cat:.*?>/<scat:.*?>'=>'search/do',
'search/do/<town:.*?>/<cat:.*?>'=>'search/do',
'search/do/<town:.*?>'=>'search/do',
'search/do'=>'search/do', 
```

`chicago/restaurants`由于第二条规则，您的问题中的规则匹配`$_GET['town']`：`'search/do/<town:.*?>'=>'search/do',`并且它没有导航到第三条规则。所以你应该先有具体的。

# android - 使用 FFMpeg 的 Copy 在 Android 上修剪/剪切视频

> ID：11827356
> 
> 赞同：3
> 
> 时间：2012-08-06T11:26:31.700
> 
> 标签：android, opencv, ffmpeg, java-native-interface

我们正在尝试通过Android 上的**JNI**调用使用**FFMpeg c api复制此命令行****ffmpeg**指令的功能。

 ****```
ffmpeg -ss 2 -t 120 -vcodec copy -acodec copy -i input.file output.file 
```

基本上，给定一个开始和结束时间，我们希望从较大的（输入）视频源*复制*（而不是重新编码）一小段视频。

我们一直在使用出色的 JavaCv 包装器来打开 Cv 和 FFMpeg，但我们就是不知道如何完成这项简单的工作。我们一直在搜索 ffmpeg.c 和相关来源，虽然我现在明白当编解码器被指定为*副本*时，它会切换到 stream_copy 和重新混合而不是重新编码，但我终生无法确定调用了哪些方法系列make 通过 C api 复制它。有没有人有这样做的示例 JNI 文件？或者是否有 Rockstar C 类型可以解释我如何从该命令行获取 api 调用？我们花了两周的大部分时间来解决这个问题（我们不是原生的 C 人），我们现在只需要发布一些代码。任何示例代码，尤其是 JNI 代码或方法调用映射等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:54:11.857

您必须在 Java 代码中包含 JNI 包装器方法。

也许这两个链接很有用：[Link 1](https://stackoverflow.com/questions/4358047/ffmpeg-jni-in-android) [Link 2](https://stackoverflow.com/questions/10619918/how-to-use-ffmpeg-on-android)****

# html - 使用 HTML5 的 Metro 应用程序中的 Windows8 推送通知

> ID：11827357
> 
> 赞同：0
> 
> 时间：2012-08-06T11:26:31.860
> 
> 标签：html, windows-8, microsoft-metro, winjs, push-notification

我有一个 Metro 应用程序，每当我的服务更新时，我都会尝试在其中显示通知。我尝试从 Microsoft 网站阅读 Metro App 推送通知概念概述，并观察了推送通知示例，但我没有得到正确的想法来实现推送通知地铁应用程序？

谁能给我一个示例示例来使用 HTML5 和 JavaScript 在 Metro 应用程序中实现推送通知，真的对我有帮助吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:24:38.933

对于*推送*通知，您需要一个服务器端组件来执行通知的实际推送。这是通过您的服务器向特定 URL 发送请求来执行的——该 URL 是从您的应用程序中获得的，该应用程序在您的服务中注册。显然，以预先固定的方式执行此操作并非易事，尽管过程本身并非如此。

有关如何获取 URL 以及如何向其发送通知的详细信息：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh465412.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465412.aspx)（获取 URL）
*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh465450.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465450.aspx)（向 URI 发送通知）

但是，如果您只想在用户使用它时更新应用程序的磁贴：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465439.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465439.aspx)是一个很好的起点。

上面的链接有片段。MSDN 上也有一个完整的磁贴/通知示例：http: [//code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)（推送） [http://code.msdn.microsoft.com /windowsapps/App-tiles-and-badges-sample-5fc49148](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)（本地）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:32:13.937

我也在做同样的事情。在这里，我在下面分享一些可能对您有用的链接。

在此之前，请阅读[实施推送通知的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh761462.aspx)。

通过此链接了解[实施 Windows 8 推送通知](http://www.jayway.com/2011/10/12/implementing-windows-8-push-notifications-an-example/)。

希望能帮助到你。

# ios5 - 键盘显示时 uipopover 隐藏

> ID：11827363
> 
> 赞同：0
> 
> 时间：2012-08-06T11:26:55.700
> 
> 标签：ios5, uitextfield, uipopovercontroller, cordova

我有一个带有 UItextfield 的 UIpopover，当我打开 popover 并点击 uitextfield 然后键盘显示，但它隐藏了 popover。如何在不隐藏 UIpopover 的情况下显示键盘？
我在 UIWebView 中调用 popover，因为我使用的是 cordova 1.8.1，但我也在 UIView 中尝试过，它也隐藏了。这里调用 UIpopover 的代码：

```
if (popEl==nil){
    popEl=[[Popover alloc] init];
}
if (pcs==nil){
    pcs=[[UIPopoverController alloc] initWithContentViewController:popEl];
    pcs.delegate=self;
}
[pcs presentPopoverFromRect:CGRectMake(0, 0, 1, 1) inView:self.webView permittedArrowDirections:UIPopoverArrowDirectionUp animated:NO]; 
```

PS对不起我的英语，我来自乌克兰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:59:59.657

首先，我建议您[阅读 UIPopOverController的苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

对于您的问题，我认为您必须处理键盘的出现和消失，这是处理此问题的解决方案[检查它](https://stackoverflow.com/questions/5428425/uipopovercontrollers-view-controller-gets-resized-after-keyboard-disappears/5733411#5733411)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T10:33:27.667

您的问题是，当您单击 textField 时，应该会出现弹出视图，对吗？如果是，则在添加 popoverview 之前添加此代码，

```
[textField resignFirstResponder]; 
```

# php - 如何关闭浏览器的表单验证？

> ID：11827367
> 
> 赞同：1
> 
> 时间：2012-08-06T11:27:22.263
> 
> 标签：php, symfony

我想关闭浏览器的表单验证，这样我就可以留下空白字段。我发现这是必需的 - 错误，但究竟应该在哪里设置呢？我找不到答案。我试过这个

```
 $builder->add
(
    'start_date', 
    'date', 
    array(
        'widget' => 'single_text', 
        'format' => 'yyyy-MM-dd'
    ), 
    array(
        'required'  => false
    )
); 
```

但没有成功:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:42:32.320

试试这个：

```
$builder->add
(
    'start_date', 
    'date', 
    array(
        'widget' => 'single_text', 
        'format' => 'yyyy-MM-dd',
        'required'  => false
    )
); 
```

# django - TastyPie - Override_urls 忽略身份验证和授权

> ID：11827368
> 
> 赞同：7
> 
> 时间：2012-08-06T11:27:29.447
> 
> 标签：django, api, url, tastypie

我有以下资源：

```
class MyUserResource(resources.MongoEngineResource):

    class Meta:
        ...
        authentication = MyKeyAuthentication()
        authorization = ApiKeyAuthorization()

    def override_urls(self):
        return [...] 
```

所有标准的 API 调用都通过身份验证和授权进行路由。**但是所有自定义函数/url（在我的 override_urls 中）只是忽略 auth/auth 函数......**

任何想法为什么？

编辑：

也许问题是调度程序没有被调用。问题仍然是为什么会这样......以及我如何改变这种行为！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T13:51:50.067

好的，最后我发现在自定义/覆盖我的网址时，我还覆盖了调用的标准行为`wrap_view`。这会导致未调用`dispatch`哪个负责检查的`auth`-methods。

所以我只是将`auth`-checks 手动放入我的每个函数中（像这样）：

```
self.is_authenticated(request)
self.is_authorized(request) 
```

希望这可以帮助其他绝望的美味开发者:)

# java - 多次调用监听器

> ID：11827369
> 
> 赞同：0
> 
> 时间：2012-08-06T11:27:33.933
> 
> 标签：java, android, listener

有一个监听器代码。

方法`onCreate`：

```
rssListView.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
        public void onGlobalLayout() {        
            //Then it stops
            rssListView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        }
    }
); 
```

单击按钮时，我想再次运行它：

```
b1.setOnClickListener(
    new View.OnClickListener() {
        // @Override
        public void onClick(View v) {
            // ...
        }
    }
); 
```

**告诉我如何激活按钮上的监听器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:44:34.850

你又想跑什么。

如果您希望在单击按钮时调用该函数，则在侦听器的 onClick 方法中执行该函数调用。一旦将侦听器添加到 UI 小部件，它就会继续侦听该对象上的任何 UI 事件，直到应用程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:57:46.777

我认为您在谈论“下拉刷新”功能。如果是的话 - 看看[这篇文章](https://stackoverflow.com/questions/4583484/how-to-implement-android-pull-to-refresh)。

# php - PHP网页抓取

> ID：11827370
> 
> 赞同：3
> 
> 时间：2012-08-06T11:27:35.590
> 
> 标签：php, regex, web-scraping

我使用 php 网页抓取，我想从下面的 html 代码中获取周日的价格（3.65）：

```
 <tr class="odd">
       <td >
           <b>Sunday</b> Info
           <div class="test">test</div>
       </td>
       <td>
       &euro; 3.65 *

       </td>
    </tr> 
```

但我没有找到最好的正则表达式来做到这一点......我使用这个 php 代码：

```
 <?php
        $data = file_get_contents('http://www.test.com/');

        preg_match('/<tr class="odd"><td ><b>Sunday</b> Info<div class="test">test<\/div><\/td><td>&euro; (.*) *<\/td><\/tr>/i', $data, $matches);
        $result = $matches[1];
    ?> 
```

但没有结果......正则表达式有什么问题？（我认为这是因为新的线条/空格？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:30:59.583

不要使用正则表达式，HTML 不是正则的。

相反，请使用 DOM 树解析器，例如`DOMDocument`. 这[`documentation`](http://www.php.net/manual/en/domdocument.loadhtml.php)可能会对您有所帮助。

`/s`尽管我没有尝试过，但该开关应该可以帮助您使用原始的正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:31:29.750

问题是标签之间的空格。有换行符、制表符和/或空格。

您的正则表达式与它们不匹配。

您还需要为多行设置 preg_match！

我认为使用 xpath 进行抓取更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T11:33:36.757

尝试用 '' 替换换行符，然后再次执行正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-23T10:44:51.660

以这种方式尝试：

```
$uri = ('http://www.test.com/');
$get = file_get_contents($uri);

$pos1 = strpos($get, "<tr class=\"odd\"><td ><b>Sunday</b> Info<div class=\"test\">test</div></td><td>&euro;");
$pos2 = strpos($get, "*</td></tr>", $pos1);
$text = substr($get,$pos1,$pos2-$pos1);
$text1 = strip_tags($text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T04:22:53.507

使用 PHP DOMDocument 对象。我们将解析网页中的 HTML DOM 数据

```
 $dom = new DOMDocument();
    $dom->loadHTML($data);

    $trs = $dom->getElementsByTagName('tr'); // this gives us all the tr elements on the webpage

    // loop through all the tr tags
    foreach($trs as $tr) {
        // until we get one with the class 'odd' and has a b tag value of SUNDAY
        if ($tr->getAttribute('class') == 'odd' && $tr->getElementsByTagName('b')->item(0)->nodeValue == 'Sunday') {
            // now set the price to the node value of the second td tag
            $price = trim($tr->getElementsByTagName('td')->item(1)->nodeValue);
            break;
        }

    } 
```

与其使用 DOMDocument 进行网页抓取，这有点乏味，您可以使用 SimpleHtmlDomParser，它是开源的。

# c# - 使用 NotifyPropertyWeaver 时如何获取 OnPropertyChanging 事件？

> ID：11827374
> 
> 赞同：0
> 
> 时间：2012-08-06T11:27:41.410
> 
> 标签：c#, inotifypropertychanged, automatic-properties

我使用 NotifyPropertyWeaverMsBuildTask 来处理自动属性的 NotifyPropertyChanged。我知道属性值更改时 OnPropertyChanged() 方法会上升。但是当这个方法被调用时，属性的值被改变并且旧的值丢失了。有没有办法获得旧值？

坦克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:30:38.970

`INotifyPropertyChanged`不提供获取属性先前值的方法；你必须实现你自己的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:41:07.627

如果你想在里面使用旧值`OnPropertyChanged`然后这样写

```
public void OnPropertyChanged(string propertyName, object before, object after) 
```

那么如果你的代码看起来像这样

```
public class Person : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public string Name { get; set; }

    public void OnPropertyChanged(string propertyName, object before, object after)
    {
        // do something with before/after
        var propertyChanged = PropertyChanged;
        if (propertyChanged != null)
        {
            propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

这将被注入

```
public class Person : INotifyPropertyChanged
{
    private string name;

    public event PropertyChangedEventHandler PropertyChanged;

    public string Name
    {
        get { return name; }
        set
        {
            object before = Name;
            name = value;
            OnPropertyChanged("Name", before, Name);
        }
    }

    public void OnPropertyChanged(string propertyName, object before, object after)
    {            
        // do something with before/after
        var propertyChanged = PropertyChanged;
        if (propertyChanged != null)
        {
            propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

此处提供更多信息[https://github.com/SimonCropp/NotifyPropertyWeaver/wiki/BeforeAfter](https://github.com/SimonCropp/NotifyPropertyWeaver/wiki/BeforeAfter)

这符合您的要求吗？

# mysql - Sphinx - MySQL 查询之间/大于

> ID：11827380
> 
> 赞同：1
> 
> 时间：2012-08-06T11:28:06.447
> 
> 标签：mysql, sphinx, between

我让 Sphinx 运行来索引我的 MySQL 查询。

当我执行以下 SQL 查询时，我得到了完美的结果：

```
SELECT * FROM huisjesIndex WHERE MATCH('@formatted "^20120901$"') ORDER BY huis_contract DESC, global_points DESC LIMIT 200,20; 
```

但我想`MATCH('@formatted "^20120901$"')`用比查询更大/更小的替换。在 SQL 中，我会执行以下操作：格式化`BETWEEN 20120901 AND 20120931`. 不幸的是，这在 Sphinx 上引起了错误。

谁能给我 SQL 查询的语法来对范围进行查询？我需要这个来获得整个 201209 月的结果。

**编辑**

我能够回答我自己的问题。

使用 MATCH() 时，所描述的值必须是一个字段（因为您正在搜索字符串）。

当您进行类似 'int >= 0' 的比较时，int 必须是一个属性。

感谢您的建议！

# c# - 我刚刚关闭我的应用程序退出并得到 Win32Exception 错误创建窗口句柄可能会做什么？

> ID：11827381
> 
> 赞同：1
> 
> 时间：2012-08-06T11:28:14.610
> 
> 标签：c#

我在某处读到我需要在关闭应用程序时处理对象？

我有这个属性，因为我使用了后台工作程序，所以我在需要调用它们的两个函数中使用它们。

在大多数情况下，当我关闭我的应用程序时没问题，但现在我遇到了这个异常。

```
private string CpuTextLabelProperty
        {
            set
            {
                if (InvokeRequired)
                {
                    BeginInvoke(new Action(() => CpuTemperature_label.Text = value), null);
                }
            }
            get
            {
                return CpuTemperature_label.Text;
            }

        }

        private Point CpuLocationLabelProperty
        {
            set
            {
                if (InvokeRequired)
                {
                    BeginInvoke(new Action(() => CpuTemperature_label.Location = new Point(210, 200)), null);
                }
            }
            get
            {
                return CpuTemperature_label.Location;
            }
        }

        private string GpuTextLabelProperty
        {
            set
            {
                if (InvokeRequired)
                {
                    BeginInvoke(new Action(() => GpuTemperature_label.Text = value), null);
                }
            }
            get
            {
                return GpuTemperature_label.Text;
            }

        }

        private Point GpuLocationLabelProperty
        {
            set
            {
                if (InvokeRequired)
                {
                    BeginInvoke(new Action(() => GpuTemperature_label.Location= new Point(210,100)), null);
                }
            }
            get
            {
                return GpuTemperature_label.Location;
            }

        }

        private string Label4TextProperty
        {
            set
            {
                if (InvokeRequired)
                {
                    BeginInvoke(new Action(() => label4.Text = value), null);
                }
            }

        } 
```

异常是关于属性：GpuTextLabelProperty里面的get就行了：

返回 GpuTemperature_label.Text；

Win32Exception - 创建窗口句柄时出错

我的 Form1 闭幕活动：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (MessageBox.Show("Are you Sure you want to Exit. Click Yes to Confirm and No to continue", "WinForm", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
            {
                e.Cancel = true;
            }
            else
            {
                this.BeginInvoke((MethodInvoker)delegate { this.Close(); }); 
            }
        } 
```

如果我需要处理一些东西？如何 ？

这是使用属性的函数：

```
private void cpuView()
        {

                Computer myComputer = new Computer();
                myComputer = new Computer(settings) { CPUEnabled = true };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            settings.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                settings.GetValue("sensor", sensor.Value.ToString());
                                int t = CpuTextLabelProperty.Length;
                                if (t >= 4)
                                {
                                    CpuLocationLabelProperty = new Point(210, 200); // not working to check everything about the locations \\

                                }
                                else
                                {
                                    CpuLocationLabelProperty = new Point(250, 200);
                                }
                                CpuTextLabelProperty = sensor.Value.ToString() + "c";//String.Format("{0} Temperature = {1}c", sensor.Name, sensor.Value.HasValue ? sensor.Value.Value.ToString() : "no value");
                                tempCpuValue = sensor.Value;
                                break;
                            }
                        }
                    }
                }
        }

        private void gpuView()
        {

                Computer computer = new Computer();
                computer.Open();
                computer.GPUEnabled = true;

                foreach (var hardwareItem in computer.Hardware)
                {
                    if (videoCardType("ati", "nvidia") == true)
                    {
                        HardwareType htype = HardwareType.GpuNvidia;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {
                                        if (GpuTextLabelProperty.Length < 1)
                                        {
                                            if (UpdatingLabel(sensor.Value.ToString(), string.Empty))
                                            {
                                               // Label8 = GpuText;
                                            }
                                        }
                                        else if (UpdatingLabel(sensor.Value.ToString(), GpuTextLabelProperty.Substring(0, GpuTextLabelProperty.Length - 1)))
                                        {
                                          //  Label8 = GpuText;
                                        }
                                        GpuTextLabelProperty = sensor.Value.ToString() + "c";
                                        tempGpuValue = sensor.Value;
                                        //label8.Visible = true;
                                    }

                                    int t = GpuTextLabelProperty.Length;
                                    if (t >= 4)
                                    {
                                        GpuLocationLabelProperty = new Point(210, 100);

                                    }
                                    else
                                    {
                                        GpuLocationLabelProperty = new Point(250, 100);
                                    }
                                   // timer2.Interval = 1000;
                                    if (sensor.Value > 90)
                                    {
                                        Logger.Write("The current temperature is ===> " + sensor.Value);
                                        button1.Enabled = true;
                                    }
                                    //this.Select();
                                }
                            }
                        }
                    }
                    else
                    {
                        HardwareType htype = HardwareType.GpuAti;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {
                                        if (GpuTextLabelProperty.Length < 1)
                                        {
                                            if (UpdatingLabel(sensor.Value.ToString(), string.Empty))
                                            {
                                             //  Label8 = GpuText;
                                            }
                                        }
                                        else if (UpdatingLabel(sensor.Value.ToString(), GpuTextLabelProperty.Substring(0, GpuTextLabelProperty.Length - 1)))
                                        {
                                           // Label8 = GpuText;
                                        }
                                        GpuTextLabelProperty = sensor.Value.ToString() + "c";
                                        tempGpuValue = sensor.Value;
                                        //label8.Visible = true;
                                    }

                                    int t = GpuTextLabelProperty.Length;
                                    if (t >= 4)
                                    {
                                        GpuLocationLabelProperty = new Point(210, 100);

                                    }
                                    else
                                    {
                                        GpuLocationLabelProperty = new Point(250, 100);
                                    }
                                    //timer2.Interval = 1000;
                                    if (sensor.Value > 90)
                                    {
                                        Logger.Write("The current temperature is ===> " + sensor.Value);
                                        button1.Enabled = true;
                                    }
                                    this.Select();
                                }
                            }
                        }
                    } 
            }
        } 
```

这是完整的异常消息：

```
System.ComponentModel.Win32Exception was unhandled by user code
  Message=Error creating window handle.
  Source=System.Windows.Forms
  ErrorCode=-2147467259
  NativeErrorCode=87
  StackTrace:
       at System.Windows.Forms.NativeWindow.CreateHandle(CreateParams cp)
       at System.Windows.Forms.Control.CreateHandle()
       at System.Windows.Forms.Control.get_Handle()
       at System.Windows.Forms.Control.get_WindowText()
       at System.Windows.Forms.Control.get_Text()
       at System.Windows.Forms.Label.get_Text()
       at HardwareMonitoring.Form1.get_GpuTextLabelProperty() in D:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 613
       at HardwareMonitoring.Form1.gpuView() in D:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 412
       at HardwareMonitoring.Form1.backgroundWorker1_DoWork(Object sender, DoWorkEventArgs e) in D:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 670
       at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:34:52.813

当您关闭或退出应用程序时，您必须停止后台工作人员。异常会向您抛出，因为您的代码所依赖的对象正在被操作系统拆除。

请参阅此[线程](https://stackoverflow.com/questions/4732737/how-to-stop-backgroundworker-correctly)以了解如何执行此操作。

# php - 你能在 phpDocumentor 2 中自动将方法的代码放入它的 DockBlock 中吗？

> ID：11827385
> 
> 赞同：2
> 
> 时间：2012-08-06T11:28:35.027
> 
> 标签：php, documentation, comments, phpdoc

我已经安装了[phpDocumentor 2](http://www.phpdoc.org/)，并希望在生成的文档中包含每个方法的源代码。但是，我注意到内联`@source`标记似乎没有被拾取，并且似乎只在[phpDocumentor 1 的文档](http://manual.phpdoc.org/HTMLframesConverter/default/phpDocumentor/tutorial_tags.inlinesource.pkg.html)中引用它。

这是我一直在尝试的：

```
/**
 * Test Comment
 *
 * {@source}
 */
public function test_method() {
    echo('Hi!');
} 
```

我希望`{@source}`将替换为以下 HTML：

```
<code>
    echo('Hi!');
</code> 
```

现在已经弃用了吗？如果是这样，有没有办法使用 phpDocumentor 2 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:40:17.507

我今天对此进行了适当的研究，并在 phpDocumentor 邮件列表上与 Mike van Riel 进行了交谈。

简单地说——你不能完全按照我的要求去做。

PHPDocumentor 2 的默认模板“响应式”不支持动态显示代码。您可以做的是切换到另一个模板“new-black”，它将显示相应文件的源代码。这适用于`@filesource`标签，并且`--sourcecode`在构建文档时有一个开关，它将自动为所有文件启用此功能。

但是，您*不能*做的是在方法级别包含代码，这就是`@source`标签的用途。这根本不受支持，原始`structure.xml`文件甚至不存储此信息。

话虽如此，迈克已经说过“我绝对想要这个功能” - 所以希望它在未来被包括在内！我现在没有时间，但我会在 GitHub 上将其作为问题提交。如果您也热衷于拥有此功能，请[公开它](https://github.com/phpDocumentor/phpDocumentor2/issues)。

# android - ActionBar 和 ViewPager 和 CursorLoader 有效，但也许有更好的方法

> ID：11827387
> 
> 赞同：4
> 
> 时间：2012-08-06T11:28:37.870
> 
> 标签：android, actionbarsherlock, android-actionbar, android-viewpager, android-adapter

我的应用程序从数据库 (ContentResolver) 加载数据并使用 ViewPager 在 ActionBar 中创建选项卡。以下代码按预期工作，但我希望有人查看我的代码。我需要知道它是否符合一般模式和做法？它需要改变吗？我能得到一些意见吗？

```
public class MainActivity extends SherlockFragmentActivity
{
    private static final String TAG = MainActivity.class.getSimpleName();

    TabAdapter tabAdapter;
    ViewPager viewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tabAdapter = new TabAdapter(getSupportFragmentManager());
        viewPager = (ViewPager) findViewById(R.id.viewpager);
        viewPager.setAdapter(tabAdapter);

        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        viewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener()
        {
            @Override
            public void onPageSelected(int position)
            {
                actionBar.setSelectedNavigationItem(position);
            }
        });

    }

    private class TabAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, LoaderManager.LoaderCallbacks<Cursor>
    {
        ArrayList<String> lists = new ArrayList<String>();
        ArrayList<Fragment> fragments = new ArrayList<Fragment>();

        public TabAdapter(FragmentManager fragmentManager)
        {
            super(fragmentManager);

            getSupportLoaderManager().initLoader(0, null, this);

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft)
        {
            viewPager.setCurrentItem(tab.getPosition());            
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft)
        {

        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft)
        {

        }

        @Override
        public Fragment getItem(int arg0)
        {
            return fragments.get(arg0);
        }

        @Override
        public int getCount()
        {
            return fragments.size();
        }

        @Override
        public CharSequence getPageTitle(int position)
        {
            return lists.get(position);
        }

        @Override
        public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1)
        {
            CursorLoader cursorLoader = new CursorLoader(
                    MainActivity.this,
                    TasksContentProvider.TaskLists.CONTENT_URI,
                    null,
                    null,
                    null,
                    null);

            return cursorLoader;
        }

        @Override
        public void onLoadFinished(Loader<Cursor> arg0, Cursor c)
        {
            while (c.moveToNext())
            {
                String title = c.getString(c.getColumnIndex(TasksContentProvider.TaskLists.Columns.TITLE));
                lists.add(title);
                TaskListFragment fragment = new TaskListFragment();
                Bundle bundle = new Bundle();
                bundle.putInt("LIST_ID", c.getInt(c.getColumnIndex(TasksContentProvider.TaskLists.Columns._ID)));
                fragment.setArguments(bundle);
                fragments.add(fragment);

                final ActionBar actionBar = getSupportActionBar();
                actionBar.removeAllTabs();
                for (int i = 0; i < getCount(); i++)
                {

                    actionBar.addTab(actionBar.newTab().setText(getPageTitle(i)).setTabListener(this));
                }
            }
        }

        @Override
        public void onLoaderReset(Loader<Cursor> arg0)
        {

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T01:52:04.637

我正在使用`mFragmentStatePageAdapter.notifyDataSetChanged()`；in`onLoadFinished(Loader<Cursor> loader, Cursor data)`通知数据更改，如果将光标加载器部分移动到`MainActivity`，它也可以工作。我个人不喜欢在适配器中实现游标加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T18:14:28.990

这完全取决于您的设计。如果您愿意使用 SherlockActionBar，那么您很可能依赖于其他人的设计/代码。但是，您可以找到许多关于如何使用 SherlockActionbar 的示例和教程。但是，您会发现有许多新模块可用于创建与 ActionbarSherlock 类似的功能。请查看以下链接以查找 v4 和 v7 库中的新功能，

[http://developer.android.com/tools/support-library/index.html](http://developer.android.com/tools/support-library/index.html)

关于代码结构的一些建议。尝试模块化你的代码，即使它现在是可读的。我希望这有帮助。

# css - magento - 主题按钮

> ID：11827391
> 
> 赞同：3
> 
> 时间：2012-08-06T11:29:01.397
> 
> 标签：css, magento, button, theming

我想在 Magento 1.7 中使用带有背景颜色的 CSS 圆形按钮重新设置主要按钮的主题。我修改了以下代码，它在大多数地方都有效，除了搜索按钮和“继续结帐”按钮上的一些不需要的背景。有没有人有更完整和经过测试的配方来做到这一点？

```
button.button span span
{
    background: blue !important;            
    color: black !important;
    background-color:none !important;
    font-weight:normal !important;  
} 

button.button span
{
    background: blue  !important;       
    padding:3px 8px 3px 8px !important; 
    border-radius:15px !important;  
    border:0px ;    
    margin:0px ;    
    font-weight:normal  !important;
    color: black !important;
    text-decoration:none !important;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:59:06.630

您遇到的问题是您已经设置了`<span>`包含按钮内文本的标签的样式，但您没有设置按钮本身的样式。

您需要为 button.button（和 button.button:hover）添加 CSS，或者在 styles.css 中删除/更改应用于它的现有 CSS。

# http-headers - 如何访问 NancyFX 请求标头值

> ID：11827395
> 
> 赞同：8
> 
> 时间：2012-08-06T11:29:14.947
> 
> 标签：http-headers, nancy

我需要从`Request.Headers`集合中获取一些自定义（shibboleth）标题值。目前我正在设法使用以下代码来做到这一点：

```
CommonName = Request.Headers["cn"].FirstOrDefault();
Email = Request.Headers["mail"].FirstOrDefault(); 
```

是否有更简单的语法来获取标头值？我希望看到一个动态对象，例如 the`Query`或 the ，`Form`因此我可以使用动态属性名称，如下所示：

```
CommonName = Request.Headers.cn;
Email = Request.Headers.mail; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T11:52:40.840

以这种方式设置标头可以为通用标头提供更好的强类型支持；如果您使用非标准标头，除非您在它们周围编写自己的包装器，否则您会得到稍微难看的语法。

# c# - 最后插入ID？C#、SQL Server 和 NHibernate

> ID：11827402
> 
> 赞同：2
> 
> 时间：2012-08-06T11:29:34.180
> 
> 标签：c#, sql-server, nhibernate

我需要知道如何知道给定表的 SQL Server 数据库中最后插入的 id 是什么？

我`int identity`没有使用 guid，如果 NHibernate 作为我的 ORM 很重要。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:46:17.670

你可以尝试这样的事情：

```
var sql = "SELECT IDENT_CURRENT('TableName')";
var query = session.CreateSQLQuery(sql);
var result = query.UniqueResult(); 
```

这将返回为给定表生成的最后一个标识值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T11:34:18.710

根据您的 ID 的生成方式，您应该能够直接从以下位置返回它`ISession.Save()`：

```
int insertedID = (int)session.Save(entity); 
```

# jquery - Flot - 带有单独颜色和标签的条形图

> ID：11827404
> 
> 赞同：0
> 
> 时间：2012-08-06T11:29:43.107
> 
> 标签：jquery, flot, bar-chart

我使用[flot](http://code.google.com/p/flot/)来显示简单的条形图。我有单个数据集`[ [0,5], [1,6], [2,3], [4,1] ]`，我正在使用这个简单的代码：

```
myChart = $.plot($('#graphFlot'), [{
        data: mdata,
        bars: { show: true, fill: 0.9 }
    }]
   ); 
```

现在我想为每个条显示各种颜色和标签。[这里](http://www.mathsrevision.net/gcse/barchart.gif)的示例条形图是它的样子。

我浏览了许多示例和文档，但仍然不知道如何设置它。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:45:47.373

将每个条放在自己的系列中，并给每个系列一个不同的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:52:00.380

var mdata = [ [0,5], [1,6], [2,3], [4,1]]; var bar_array = [];

$.each(mdata, function(i, bar) { bar_array.push({ data: [bar], bars: { show: true, fill:0.9 } }); });

myChart = $.plot($('#graphFlot'), bar_array);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:55:34.097

据我所知，Flot 或 Flotr2 中没有允许您执行此操作的设置。我设法通过更改在 flotr2.js 中呈现条形图的代码来完成这项工作

# c# - 计算机上安装和卸载软件的次数

> ID：11827408
> 
> 赞同：0
> 
> 时间：2012-08-06T11:29:58.090
> 
> 标签：c#, wmi, wmi-query

有没有办法（在 C# 中，使用 WMI 类）来找出特定软件已安装和卸载了多少次？

我想在远程计算机上运行它。我通过以下代码获取软件列表：

```
ManagementScope scope = new ManagementScope(@"\\" + ipAddress + @"\root\cimv2");
ObjectQuery query = new ObjectQuery("Select * from  Win32_Product");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection queryCollection = searcher.Get();
foreach (ManagementObject m in queryCollection)
{
    Console.Write(m["Caption"]+"\t");
    Console.WriteLine(m["installDate"]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:57:07.190

通常不会。

当一个程序将被卸载时，程序的每一部分都应该从机器上删除，就像它从来都不是他们的一样。不幸的是，在这一点上，几乎每个程序都不能完美地完成工作，从而在机器上留下了一些伪影。

尽管如此，理想的行为是卸载后一切都消失了（包括某种计数器），因此只能检查当前是否安装了程序。

在另一个站点上，没有任何东西允许程序将某个计数器（例如注册表）保存在某个地方，每次安装启动时都会增加，但这是每个程序特定的东西，并且不存在该计数器应该驻留的通用机制。

# asp-classic - 编写包含 ASP 分隔符的文件

> ID：11827410
> 
> 赞同：1
> 
> 时间：2012-08-06T11:30:16.353
> 
> 标签：asp-classic, vbscript

我们有很多文件包含对我们网站上资源的图像/静态文件引用。当我们将这些文件移动到 S3 托管时，我正在编写一个脚本来读取我们的每个 ASP 文件，替换每个引用，以便每个引用都指向一个全局定义的变量，并将这些更改重写到文件中，这样我们就不会不必手动更新所有这些文件！

这适用于实际代码中的引用。

例如。

```
Response.Write "<img src=""http://www.site.com/images/image.gif"">" 
```

变成

```
Response.Write "<img src=""" & s3BucketName & "/images/image.gif"">" 
```

但是当涉及到替换这样的代码时：

```
<script src="/javascript/script.js"> 
```

这更困难 - 因为我们必须将 ASP 分隔符 <%= %> 放置在它周围的全局变量周围。

例如。

```
<script src="<%=s3BucketName%>/javascript/script.js"> 
```

因为脚本分隔符实际上会停止它们所在的页面并生成错误，这就是我发现的困难。URLencoding <%=s3BucketName%> 字符串，并写入，只是写入编码文本（ASP 无法使用），不会转换为我想要的。

任何想法都非常感激。

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:41:19.140

好的，我想出了一个解决方案，似乎可行。如果你找到更好的，请评论。

```
textToReplace = "src="""& chr(60) & chr(37) & chr(61) & "s3BucketName" & chr(37) & chr(62) & "/javascript/script.js" 
```

基本上 <%= 和 %> 的每个符号都被转换为 chr() 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:14:12.423

您可以在页面的 head 部分使用 basetag，然后您可以像脚本示例一样单独保留相对 url，您可以将此技术与 peedeeaay 建议的方法结合使用。

```
<base href="http://www.s3bucketdomain.com/directory/" /> 
```

# c# - 在 Visual Studio 中为 Web 服务创建部署包

> ID：11827413
> 
> 赞同：3
> 
> 时间：2012-08-06T11:30:30.110
> 
> 标签：c#, web-services, clickonce, setup-deployment

我想在客户端服务器上部署我的 Webservice(*.asmx)。我需要开发部署包，它将安装虚拟文件夹并像 clickonce 一样部署服务。有人可以给我 Visual Studio 的分步指南吗？

谢谢，金谷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:51:23.440

如果 Web 服务很简单，大多数人会使用 Web 安装项目 - 任何依赖项（例如 .NET Framework 安装、IIS、SQL Server、数据库等）都需要在运行该安装程序之前由某人单独安装。

对于更复杂的部署，您希望确保某些组件位于目标机器（例如 IIS）上，如果没有在安装过程中安装它们，那么您可以使用 Web Deploy。

这里有一些不同的方法可以做到这一点。

1.  网络设置项目

2.  网络部署

3.  微软部署

以下是有关上述工具的一些指南：

*   [http://blog.thinkoriginally.com/2010/02/16/visual-studio-2008-web-setup-project-web-deployment-project-and-msdeploy/](http://blog.thinkoriginally.com/2010/02/16/visual-studio-2008-web-setup-project-web-deployment-project-and-msdeploy/)

*   [http://www.iis.net/download/WebDeploy](http://www.iis.net/download/WebDeploy)

*   [http://cromwellhaus.com/2012/05/build-once-msdeploy-all-over-the-place/](http://cromwellhaus.com/2012/05/build-once-msdeploy-all-over-the-place/)

如何使用 Web 设置项目：

*   [http://www.codeproject.com/Articles/13698/Visual-Studio-Setups-Web-Setup-Part-I](http://www.codeproject.com/Articles/13698/Visual-Studio-Setups-Web-Setup-Part-I)

# liferay - 如何在 Liferay 的特定页面上找到添加的 portlet？

> ID：11827415
> 
> 赞同：15
> 
> 时间：2012-08-06T11:30:36.947
> 
> 标签：liferay, liferay-6, portlet

我怎样才能找到在特定 Liferay 页面上添加了哪些 portlet？

例如：
我有三个页面：*Welcome*、*Wiki*和*Search*。

现在所有这些页面都添加了 portlet，其中一些是可实例化的 portlet（如 web 内容显示和 iframe portlet）。

现在我想将一些信息以请求参数的形式传递`iframe-portlet`给`Search page`来自`Welcome page`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T11:30:36.947

我找到了两种方法来做到这一点：

1.  如果您想在添加您的 portlet 的同一页面上找到 portlet，您可以使用`themeDisplay`portlet 或 JSP 可用的对象：

    ```
    // In JSP
    List<String> portletIdList = themeDisplay.getLayoutTypePortlet().getPortletIds();

    // In portlet class
    ThemeDisplay themeDisplay = (ThemeDisplay) portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
    List<String> portletIdList = themeDisplay.getLayoutTypePortlet().getPortletIds(); 
    ```

2.  如果您想在某个不同的页面上找到 portlet，那么您应该知道三件事：`friendly-url`，`groupId`以及此页面是否属于站点（`public-page`或`private-page`社区），因此代码如下：

    ```
    // 101543 is the SiteId, if it is a public-page then "false" and "/search" is the friendlyURL
    LayoutTypePortlet layoutTypePortlet = LayoutTypePortletFactoryUtil.create(LayoutLocalServiceUtil.getFriendlyURLLayout(101543, false, "/search"));
    List<String> portletIdList = layoutTypePortlet.getPortletIds(); 
    ```

包含portletIds`portletIdList`及其 instanceIds。所以现在从列表中你可以通过使用过滤掉页面`iframe-portlet`上的内容，你会得到类似.`/search``com.liferay.portal.util.PortletKeys.IFRAME``48_INSTANCE_rPv9`

# android - 带有片段的 Android TABS

> ID：11827418
> 
> 赞同：0
> 
> 时间：2012-08-06T11:30:44.047
> 
> 标签：android, tabs, android-fragments, android-tabhost, android-relativelayout

我一直在研究一个由带有许多选项卡的 GUI 组成的小项目。我对片段的概念很陌生，但似乎它们是 android 选项卡环境中的最佳实践。我设法编写了一个简单的选项卡应用程序，可以在 3 个选项卡之间切换。

我遇到的唯一问题是当我尝试将选项卡放在屏幕底部时。当它们位于底部时，选项卡小部件覆盖容器（在这种情况下为框架布局），因此没有任何反应，单击各个选项卡时屏幕保持不变。

以下 XML 布局代表了良好的版本（选项卡位于屏幕顶部）：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0"/>

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"/>
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

以下XML布局表示不起作用的版本，当标签位于屏幕底部时：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <RelativeLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
             />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
            />
        </RelativeLayout>
    </TabHost>
</LinearLayout> 
```

我将布局更改为 relativelayout 并将此命令：android:layout_alignParentBottom="true" 添加到 tabwidget。有没有人对我如何解决这个问题有另一种想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:36:30.373

一般来说，在屏幕底部使用标签是一个糟糕的解决方案（请参阅[Android 设计指南](http://developer.android.com/design/building-blocks/tabs.html)）。

对于您的解决方案：放在`TabWidget`视图列表的末尾。因为绘图是一个线条过程和片段，所以你的案例被淹没在上面 TabWidget

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T01:15:50.507

您可以改用重量。试试这个布局标记

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</android.support.v4.app.FragmentTabHost> 
```

您可以用自己的 TabHost 类替换 FragmentTabHost。因此，您的选项卡将位于屏幕底部。小心嵌套权重（它们对性能不利）和深入视图层次结构（特别是对于 android < 4）。

# gwt - GWT：向服务器发出请求后继续编辑同一对象

> ID：11827429
> 
> 赞同：3
> 
> 时间：2012-08-06T11:31:42.170
> 
> 标签：gwt, requestfactory, gwt-2.4, requestcontext

是否可以在 GWT 服务器请求后继续编辑同一个对象？

[考虑另一个问题](https://stackoverflow.com/questions/5277084/handling-gwt-requestfactory-server-error-responses)的最佳实践代码

```
void start() {
    // Either get p
    context1.get(..).to( new Receiver<P> { onSuccess(P resp){p = resp;} ... }).fire();
    // OR create p
    p = context2.create( P.class );
    // Then save p
    req = context2.persist(p).to( new Receiver<P>{  /* note do not use context1 */
        onViolation(...) { /*JSR 303 handler*/ };
        onFailure( error ) { /* handle */ error.getMessage() }; 
        onSuccess(X x) { /* whatever persist() returns handler */ }; } ); 
    // drive editor with p
    driver.edit( p, req);    
}

....
void onSave() {    
    // editor
    ctxt = driver.flush()  /* note ctxt == context2 */
    if ( driver.hasErrors() ) { /*JSR 303 handler*/};
    // RF
    ctxt.fire();
} 
```

问题是，如何在最后一行处理不成功的服务器响应？（将接收器添加到“ctxt.fire();”）

```
void onSave() {    
    // editor
    ctxt = driver.flush()  /* note ctxt == context2 */
    if ( driver.hasErrors() ) { /*JSR 303 handler*/};
    // RF
    ctxt.fire(new Receiver<S>{
        onSuccess() { ... how to continue editing the "p" object? ... } 
        onFailure() { ... how to continue editing the "p" object? ... } });
    });
} 
```

例如，在保存时，服务器会进行一些额外的验证（例如，该值是唯一的）。并且不接受保存。

因此，服务器请求以“onSuccess(response)”方法结束，但对象未保存（响应值可能包含错误列表）。

是否可以允许用户继续编辑***未保存但在客户端***对象上更新并向服务器发出另一个请求？

我看到的“僵局”：

*   无法重用请求上下文（ctxt），因为会抛出“A request is already in progress”异常。
*   不可能创建新的上下文，因为对对象的所有修改都在旧上下文中（因此它们将丢失）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:57:53.190

可变代理总是绑定到请求上下文。但是，您从服务器接收到的代理被冻结且不可变。.edit 方法将为给定的请求上下文创建一个冻结代理的可变克隆。

如果无法触发请求（连接问题、服务器错误），上下文将可重用，您可以继续编辑代理。如果违反了约束，同样适用。如果请求成功触发（无论服务器方法是否抛出异常），则不能再使用请求上下文，代理也是如此。

看看`onTransportSuccess`in `AbstractRequestContext`- 这会告诉你：你可以继续使用请求上下文的唯一情况是违规和一般失败。因此，要么强制执行违规，要么将（错误的）对象返回给客户端并继续使用新的请求上下文处理它（这将导致实体代理出现问题，因为它会丢失参考状态）

# php - 如何将日期从 8 转换为 AUG

> ID：11827430
> 
> 赞同：0
> 
> 时间：2012-08-06T11:31:46.023
> 
> 标签：php

我想将数字转换为实际月份。我只需要一个月。

我现在正在尝试这样

`$str = 8;` `$anInt = intval($str);` `$test = date('M',$anInt);` `echo $test;`

结果是 JAN，结果我应该得到“AUG”。我不知道为什么。

对我有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:33:59.447

该`date()`函数采用时间戳。

你应该试试这个：

```
$test = date('M',mktime(0,0,0,$anInt,0,0); 
```

从[date](http://php.net/manual/en/function.date.php)和[mktime](http://www.php.net/manual/en/function.mktime.php)的文档中：

```
// Prints: Your date's month is : August
echo "Your date's month is : " . date("F", mktime(0, 0, 0, $anInt, 0, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:51:03.027

重复的问题。[在这里阅读。](https://stackoverflow.com/questions/6971135/get-monthname-in-php)

[在此处](http://php.net/manual/en/function.date.php)阅读有关日期功能的信息。

使用`date()`你应该使用时间戳。要将日期值转换为时间戳，请使用[strtotime](http://php.net/manual/en/function.strtotime.php)

```
$date = '2012-8-8';
$timestamp = strtotime($date);
echo date('M',$timestamp); 
```

对于您的问题：

```
$monthnumber = 4;
$date = '2012-'.$monthnumber.'-8';
$timestamp = strtotime($date);
echo date('M',$timestamp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:35:14.337

使用[`mktime`](http://php.net/manual/en/function.mktime.php).

```
echo date('M', mktime(0, 0, 0, $str)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:35:48.343

给你：

```
echo date('M',strtotime('08/01/2012')); 
```

或者，如果您想要全部大写：

```
echo strtoupper(date('M',strtotime('08/01/2012'))); 
```

可能还有其他方法，但这是第一个想到的

# java - Java 有 FindBugs。Ruby 的等价物是什么？

> ID：11827431
> 
> 赞同：6
> 
> 时间：2012-08-06T11:31:48.193
> 
> 标签：java, ruby, static, analysis, findbugs

> **可能重复：**
> [Ruby 的自动代码质量工具？](https://stackoverflow.com/questions/55313/automatic-code-quality-tool-for-ruby)

Java 有 FindBugs™。Ruby 的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:45:24.660

看看[这个博客](http://devver.wordpress.com/2008/10/01/ruby-code-quality-tools/)。它讨论了不同的工具（Roodi、Dust 和 Flog）。

# xml - 如何使用 post 方法将 xml 从一个站点发送到另一个站点？

> ID：11827434
> 
> 赞同：0
> 
> 时间：2012-08-06T11:32:02.887
> 
> 标签：xml

我是 xml 的新手，并尝试使用表单将 xml 作为 post 方法发送。此表单将提交到另一个网站（即在 asp 上），该网站返回相应的结果。如果有人知道如何做到这一点，请指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:51:09.083

尝试这个....

在表单中插入隐藏元素
将表单方法设置为“POST” 在表单提交时，形成所需的 XML 并将隐藏的输入值设置为 XML 字符串
使用隐藏元素名称从 ASP 页面访问 xml

```
 <form id="xmlForm" method="POST" action="xxx.asp" onsubmit="return appendXML(this)">
        <input type="hidden" id="xml" name="xml"/> 
        .....
    </form>

    function appendXML(Obj){
        var xml="<xml>...</xml>";
        $(Obj).find("input#xml").val(xml);
        return true;
    } 
```

# android - 使用 AsynTask 将 MySQL DB 中的数据显示到 ListView 会产生致命错误：AsyncTask：#1

> ID：11827440
> 
> 赞同：0
> 
> 时间：2012-08-06T11:32:47.287
> 
> 标签：android, mysql, android-asynctask

我找到了一个可以帮助我的[教程](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/).. 这个使用 MySQL 数据库获取数据并将其显示在 ListView 控件中.. 问题是我在处理 AsyncTask 时遇到错误.. 所以这是我的个人代码和错误报告

```
 package pre.commande;

   import android.os.Bundle;
   import android.app.Activity;
   import android.view.Menu;
   import android.view.MenuItem;
   import android.support.v4.app.NavUtils;
   import java.util.ArrayList;
   import java.util.HashMap;
   import java.util.List;

   import org.apache.http.NameValuePair;
   import org.json.JSONArray;
   import org.json.JSONException;
   import org.json.JSONObject;

   import android.app.ListActivity;
   import android.app.ProgressDialog;
   import android.content.Intent;
   import android.os.AsyncTask;
   import android.util.Log;
   import android.view.View;
   import android.widget.AdapterView;
   import android.widget.AdapterView.OnItemClickListener;
   import android.widget.ListAdapter;
   import android.widget.ListView;
   import android.widget.SimpleAdapter;
   import android.widget.TextView;

   public class MainActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> produitList;

// url to get all products list
private static String url_all_products = "http://10.0.2.2/precommande/ts_produit.php";

// JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUIT = "produit";
    private static final String TAG_ID = "id";
    private static final String TAG_DES = "des";

    // products JSONArray
    JSONArray produit = null;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

    // Hashmap for ListView
            produitList = new ArrayList<HashMap<String, String>>();

            // Loading products in Background Thread
            new LoadAllProducts().execute();

            // Get listview
            ListView lv = getListView();

   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
       getMenuInflater().inflate(R.menu.activity_main, menu);
       return true;
   }

   /**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                produit = json.getJSONArray(TAG_PRODUIT);

                // looping through All Products
                for (int i = 0; i < produit.length(); i++) {
                    JSONObject c = produit.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String des = c.getString(TAG_DES); 

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_DES, des);

                    // adding HashList to ArrayList
                    produitList.add(map);
                }
            } 
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        MainActivity.this, produitList,
                        R.layout.list_item, new String[] { TAG_ID,
                                TAG_DES},
                        new int[] { R.id.pid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

    }

} 
```

错误报告

> 没有检测到 GPU 仿真的仿真器。08-06 11:07:06.318: E/WindowManager(1347): Activity pre.commande.MainActivity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@b6c6afc0 08-06 11: 07:06.318: E/WindowManager(1347): android.view.WindowLeaked: Activity pre.commande.MainActivity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@b6c6afc0 08-06 11 :07:06.318: E/WindowManager(1347): 在 android.view.ViewRoot.(ViewRoot.java:258) 08-06 11:07:06.318: E/WindowManager(1347): 在 android.view.WindowManagerImpl.addView (WindowManagerImpl.java:148) 08-06 11:07:06.318: E/WindowManager(1347): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91) 08-06 11:07:06.318: E/WindowManager (1347)：在 android.view。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-08T17:44:17.297

在清单文件中添加以下行。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

上面的`<application>`标签。

# javascript - 触摸检测 Blackberry 9300 6.0

> ID：11827446
> 
> 赞同：7
> 
> 时间：2012-08-06T11:33:03.170
> 
> 标签：javascript, jquery, html, mobile, blackberry

我目前正在使用的插件中遇到一些触摸检测问题。

该插件使用以下代码

```
touch = ("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch;
eventType = (touch) ? "touchend" : "click"; 
```

确定它是否应该在某些画廊导航上使用 touchend 或 click 事件。

然而不幸的是，当使用运行 os 6.0 的 Blackberry 9300 访问该页面时，它被错误地报告为支持触摸的设备并且事件不会触发。

我检查了使用的检测方法，它与 Modernizr 中的检测方法相同。

有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:25:04.617

根据[Paul Irish 的说法，RIM](https://github.com/Modernizr/Modernizr/issues/372#issuecomment-3112695)关于这个问题是这样说的：

> *不幸的是，我们在 BlackBerry 6.0 期间遇到了构建系统问题，导致构建启用了 WebKit 触控支持，即使对于非触控设备也是如此。它早就被修复了，但一些公共版本确实存在这个问题。*

在 github/Modernizr 上查看这些（当前打开的）票证，了解可能的解决方法和最新的检测代码，然后尝试根据需要更改您的插件。如果下面的最新检测代码不起作用，您可能需要专门检测黑莓。

*   [https://github.com/Modernizr/Modernizr/issues/372](https://github.com/Modernizr/Modernizr/issues/372)
*   [https://github.com/Modernizr/Modernizr/issues/548](https://github.com/Modernizr/Modernizr/issues/548)

还要检查[此触摸测试](http://modernizr.github.com/Modernizr/touch.html)，browserscope 选项卡表明黑莓 9000 已被检测为错误，因此也值得在您的设备中进行测试。[http://modernizr.github.com/Modernizr/touch.html](http://modernizr.github.com/Modernizr/touch.html)

触摸检测的[最新modernizr](https://github.com/Modernizr/Modernizr/blob/master/modernizr.js#L429)源似乎除了您发布的代码之外还增加了@media 检测。

```
/*
 * The Modernizr.touch test only indicates if the browser supports
 *    touch events, which does not necessarily reflect a touchscreen
 *    device, as evidenced by tablets running Windows 7 or, alas,
 *    the Palm Pre / WebOS (touch) phones.
 *
 * Additionally, Chrome (desktop) used to lie about its support on this,
 *    but that has since been rectified: crbug.com/36415
 *
 * We also test for Firefox 4 Multitouch Support.
 *
 * For more info, see: modernizr.github.com/Modernizr/touch.html
 */

tests['touch'] = function() {
    var bool;

    if(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
      bool = true;
    } else {
      injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''), function( node ) {
        bool = node.offsetTop === 9;
      });
    }

    return bool;
}; 
```

## 黑莓/PlayBook UA 嗅探

[为了使用用户代理字符串专门检测 BlackBerry 设备并从此处](https://stackoverflow.com/a/7891222/881551)和[此处](https://stackoverflow.com/a/6286203/881551)提供的解决方案中借用，我启动了这个小功能，您可以在[http://jsbin.com/aliwur/1/edit#](http://jsbin.com/aliwur/1/edit#javascript,live)上测试并查看在 jsbin 上的工作情况[javascript,live](http://jsbin.com/aliwur/1/edit#javascript,live)它应该从用户代理字符串中解析出 Blackberry 5.0/4.0/6.0 和 Playbook：

```
function rim_useragent_parser(ua) {

    var info = false,
        model = null,
        model_number = null,
        os_version = null;

    if (ua.indexOf("BlackBerry") >= 0) {
        if (ua.indexOf("Version/") >= 0) {
            // BlackBerry 6 and 7
            model = ua.match(/BlackBerry\s[0-9]*/);
            if (model) {
                model_number = model[0].match(/[0-9]+/);
                pos = ua.indexOf("Version/") + 8;
                os_version = ua.substring(pos, pos + 3);
                info = {
                    'model' : model[0],
                    'model_number' : model_number[0],
                    'os_version' : os_version
                };
            }
        }
        else {
            // BlackBerry Device Software 4.2 to 5.0
            model = ua.match(/^BlackBerry[0-9]*/);
            if (model) {
                model_number = model[0].match(/[0-9]+/);
                var SplitUA = ua.split("/");
                os_version = SplitUA[1].substring(0, 3);
                info = {
                    'model' : model[0],
                    'model_number' : model_number[0],
                    'os_version' : os_version
                };
            }
        }
    }
    else if (ua.indexOf("PlayBook") >= 0) {
        // PlayBook
        model = ua.match(/RIM Tablet OS\s[0-9].[0-9].[0-9]/);
        if (model) {
            model_number = model[0].match(/[0-9].[0-9].[0-9]/);
            pos = ua.indexOf("Version/") + 8;
            os_version = ua.substring(pos, pos + 5);
            info = {
                'model' : model[0],
                'model_number' : model_number[0],
                'os_version' : os_version
            };
        }
    }

    return info;

} 
```

当然，这可能比您需要的更多，因此将其简化为仅“Blackberry 9300 6.0”，我想您也可以这样做：

```
var ua = navigator.userAgent;
if (ua.indexOf("BlackBerry") >= 0) {
    if (ua.indexOf("Version/") >= 0) {
        // BlackBerry 6 and 7
        var model = ua.match(/BlackBerry\s[0-9]*/);
        if (model) {
            var model_number = model[0].match(/[0-9]+/);
            if (model_number) model_number = model_number[0];
            pos = ua.indexOf("Version/") + 8;
            os_version = ua.substring(pos, pos + 3);

            if (os_version === '6.0' && model_number === '9300') {
                // do what you need specifically for this
            }
        }
    }
} 
```

## 要获得更好的通用用户代理解析，请参阅 ua-parser

[https://github.com/tobie/ua-parser/](https://github.com/tobie/ua-parser/)

# c# - 在页面加载数据 asp.net 时使用母版页显示加载消息

> ID：11827449
> 
> 赞同：3
> 
> 时间：2012-08-06T11:33:37.730
> 
> 标签：c#, asp.net, .net-4.0, master-pages, page-loading-message

我花了几个小时在谷歌上搜索和搜索过去的问题，但很难找到这些答案的任何地方（无论是我无法正确地将它纳入我的解决方案，或者它不适合我，因为他们没有母版页）。

我的问题是，我有几个 asp.net 页面可能需要一段时间才能加载（有时 5 秒以上），因为在 Page_Load 方法上从数据库请求了大量数据。为了阻止用户认为页面已崩溃并刷新页面或执行其他操作，我想在页面加载时放置一条加载消息，隐藏页面上的所有其他内容（菜单除外）。

我正在使用带有母版页和 C# 编码的 ASP.Net 4.0。

我获得最大成功的一个是在内容模板覆盖内容占位符的母版页上使用 UpdatePanel，但是我知道这不是最好的方法，无论如何它只显示一次，即用户登录，加载消息出现，一旦所有数据都加载到主页（dashboard.aspx）上，加载消息就会消失，这正是我想要的。但是，如果用户离开该页面然后单击主页，则加载消息将不再出现，只需一段时间即可加载。它也永远不会出现在任何其他需要很长时间才能加载的页面上。

下面是master.aspx的主体

```
<body>
<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                Header
            </h1>
        </div>
        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" id="HeadLoginStatus" runat="server">Log In</a>
                    ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold">
                        <asp:LoginName ID="HeadLoginName" runat="server" />
                    </span>! [
                    <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out"
                        LogoutPageUrl="~/Default.aspx" />
                    ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div>
        <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                IncludeStyleBlock="false" Orientation="Horizontal" OnMenuItemClick="NavigationMenu_MenuItemClick">
                <Items>
                    <asp:MenuItem Text="Home" />
                    <asp:MenuItem Text="About" />
                </Items>
            </asp:Menu>
        </div>
    </div>
    <div class="main">

         <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:ContentPlaceHolder ID="MainContent" runat="server" />

                <asp:UpdateProgress ID="UpdateProgress1" runat="server">
                    <ProgressTemplate>
                        <asp:Panel ID="Panel1" runat="server" HorizontalAlign="Center">
                            <asp:Image ID="Image1" runat="server" ImageUrl="~/Images/loader.gif" />
                        </asp:Panel>

                    </ProgressTemplate>
                </asp:UpdateProgress>
            </ContentTemplate>
        </asp:UpdatePanel>

         <asp:UpdatePanelAnimationExtender ID="UpdatePanel1_UpdatePanelAnimationExtender" 
             runat="server" Enabled="True" TargetControlID="UpdatePanel1">
         </asp:UpdatePanelAnimationExtender>

    </div>
    <div class="clear">
    </div>
</div>
<div class="footer">
</div>
</form> 
```

下面是dashboard.aspx的页面（加载时间长的页面）

```
<asp:Panel ID="PanelWelcome" runat="server">
    <h1>
        Welcome
        <asp:Label ID="LabelUserName" runat="server" Text="[User Name]" />&nbsp;to your
        personal Dashboard.</h1>
    <table width="100%" cellpadding="5px">
        <tr>
            <td style="width: 70%" valign="top">
                <asp:Panel ID="Panel2" runat="server">
                    <p>
                        &nbsp;</p>
                    <h4>
                        Up and Coming </h4>
                    <br />
                    <asp:GridView ID="GridViewItin" runat="server" Width="100%" HorizontalAlign="Left"
                        OnRowDataBound="GridViewItin_RowDataBound">
                    </asp:GridView>
                </asp:Panel>
            </td>
            <td style="width: 30%">
                <asp:Panel ID="PanelProfile" runat="server">
                    <asp:ImageButton ID="ImageButtonProfile" runat="server" ImageUrl="~/Images/BlankProfile.jpg"
                        Width="150px" /><br />
                    <h4>
                        Name:</h4>
                    <asp:Label ID="LabelPARname" runat="server" Text="[Person Name]"></asp:Label>
                    <h4>
                        Company:</h4>
                    <asp:Label ID="LabelBARname" runat="server" Text="[Company Name]"></asp:Label>
                    <h4>
                        Date of Birth:</h4>
                    <asp:Label ID="LabelPARdob" runat="server" Text="[DOB]"></asp:Label><br />
                    <asp:LinkButton ID="LinkButtonProfilePage" runat="server" OnClick="LinkButtonProfilePage_Click">More details...</asp:LinkButton>
                </asp:Panel>
            </td>
        </tr>
    </table>
</asp:Panel> 
```

您能否告诉我最好的解决方法以及我哪里出错了？另外，当显示 UpdateProgress 模板会很棒时，我如何隐藏 ContentTemplate？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:28:15.403

好的，所以我知道我做错了什么，我想我会发布我所做的，希望能帮助其他可能最终遇到同样问题的人......

基本上我没有从逻辑上考虑过。在更新面板之外有一些控件，例如 NavigationMenu，它们永远不会触发更新进度，因为它们与面板无关！我不得不在更新面板中添加触发器来处理面板外发生的所有事情。

所以，在我的母版页中，我有以下代码

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:ContentPlaceHolder ID="MainContent" runat="server" />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="NavigationMenu" />
        </Triggers>
    </asp:UpdatePanel>

    <asp:UpdateProgress ID="progress" runat="server" DynamicLayout="true" DisplayAfter="0">
            <ProgressTemplate>
                <div id="overlay">
                    <div id="modalprogress">
                        <div id="theprogress">
                            <asp:Image ID="loader" runat="server" ImageAlign="AbsMiddle" ImageUrl="~/images/loader.gif" />
                            Please wait...
                        </div>
                    </div>
                </div>
            </ProgressTemplate>
        </asp:UpdateProgress>  

     <asp:UpdatePanelAnimationExtender ID="UpdatePanel1_UpdatePanelAnimationExtender" 
         runat="server" Enabled="True" TargetControlID="UpdatePanel1">
     </asp:UpdatePanelAnimationExtender> 
```

希望这会帮助别人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:14:30.773

您可以使用 UpdateProgress 控件。您可以从 Ajax Extensions 选项卡下的 Toll 框中获取它。我正在向您描述一个场景：
假设我有一个更新面板名称**UpdatePnl1**，其中我有一个按钮 Say **GO**。当我们点击 go 它应该重定向到另一个页面。在此之前它会提示您请稍候。

现在我的代码将是这样的

```
<asp:UpdatePanel ID="UpdatePnl1" runat="server">
<ContentTemplate>
<asp:Button ID="BtnGO" runat="server" Text="GO" onclick="BtnGO_Click"/>
</ContentTemplate>
</asp:Updatepanel> 
```

按钮点击代码：

```
 protected void BtnGO_Click(object sender, EventArgs e)
    {
        Response.Redirect("Example.aspx");
    } 
```

现在这是您需要添加的 UpdateProgress 的代码

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePnl1" >
      <ProgressTemplate>

      <asp:Label ID="LblWaitMsg" runat="server" Text="Processing Request, Please Wait..."></asp:Label>           

       </ProgressTemplate>
 </asp:UpdateProgress> 
```

注意：您的页面应该包含 ScriptManager。

# php - 合并两个大小相等的平面索引数组，以便以交替的方式将值推送到结果中

> ID：11827451
> 
> 赞同：4
> 
> 时间：2012-08-06T11:33:44.977
> 
> 标签：php, arrays, merge, alternating

假设我有两个数组：

```
$a1 = array(0, 1, 2);
$a2 = array(3, 4, 5); 
```

我希望能够做一种交替数组值的合并技术，而不仅仅是连接它们。我想要这个结果：

```
array(0, 3, 1, 4, 2, 5); 
```

有没有一种本地方法可以做到这一点，因为这里的性能是一个问题，因为我需要这样做数千次

请注意，我知道我可以这样做：

```
for (var $i = 0; $i < count($a1); $i++) {
    newArray[] = $a1[$i];
    newArray[] = $b1[$i];
} 
```

如果有更快的方法，我正在寻找一种内置方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T11:44:40.883

```
$count = count($a1);
for ($i = 0; $i < $count; $i++) {
    $newArray[] = $a1[$i];
    $newArray[] = $b1[$i];
} 
```

我在这里的工作已经完成了。

```
$a1 = array(0,1,2);
$a2 = array(3,4,5);

$start = microtime(TRUE);

for($t = 0; $t < 100000; $t++)
{
    $newArray = array();
    $count = count($a1);
    for ($i = 0; $i < $count; $i++)
    {
        $newArray[] = $a1[$i];
        $newArray[] = $a2[$i];
    }
}
echo  round(microtime(TRUE) - $start, 2); # 0.6

$a1 = array(0,1,2);
$a2 = array(3,4,5);

$start = microtime(TRUE);

for($t = 0; $t < 100000; $t++)
{
    $newArray = array();
    for ($i = 0; $i < count($a1); $i++)
    {
        $newArray[] = $a1[$i];
        $newArray[] = $a2[$i];
    }
}
echo  round(microtime(TRUE) - $start, 2); # 0.85 
```

因此，预先计算数组大小将是 ~1/4 [需要引用]（在该死的 100.000 次迭代中，您总共将获得 0.2）更快。如果你把`count()`循环放在里面，它会重新计算每个`iteration`. 1/4 在我看来相当快。如果你正在寻找编译函数，你可以停下来。

PS Benchmark 就像比基尼一样，它向您展示一切，但什么也没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T08:36:48.190

由于您正在“压缩”两个索引数组，因此您可以“转置和展平”。我希望这不会像使用`for()`or那样快`foreach()`，但是在小型输入数组上，性能不会有明显的拖累。换句话说，当寻求编码风格或最小声明变量时，应考虑以下技术。

代码：（[演示](https://3v4l.org/9lJ2m)）

```
$a1 = [0, 1, 2];
$a2 = [3, 4, 5];

var_export(
    array_merge(...array_map(null, $a1, $a2))
); 
```

输出：

```
array (
  0 => 0,
  1 => 3,
  2 => 1,
  3 => 4,
  4 => 2,
  5 => 5,
) 
```

* * *

作为一种时髦的无函数方法，您可以`$a1`从`foreach()`值声明中推送值，在循环体内，您可以推送`$a2`值。大饱眼福...（[演示](https://3v4l.org/p6YCm)）

```
$result = [];
foreach ($a1 as $index => $result[]) {
    $result[] = $a2[$index];
}
var_export($result);
// same output as earlier snippet 
```

* * *

对于任何正在寻找关联安全技术的人，您可以进行循环切片或拼接调用。请注意，这`splice()`将在过程中改变/消耗输入数组。([切片演示](https://3v4l.org/hqMC7)) ([拼接演示](https://3v4l.org/401Ue))

```
$result = [];
for ($i = 0, $count = count($a1); $i < $count; ++$i) {
    $result += array_slice($a1, $i, 1)
        + array_slice($a2, $i, 1);
} 
```

或者

```
$result = [];
while($a1 && $a2) {
    $result += array_splice($a1, 0, 1)
        + array_splice($a2, 0, 1);
} 
```

# javascript - less.js - 在解析器的回调中获取变量值

> ID：11827453
> 
> 赞同：5
> 
> 时间：2012-08-06T11:33:50.270
> 
> 标签：javascript, parsing, variables, client-side, less

我正在使用 less.js (1.3.0) 在客户端将 less 解析为 css。在解析器的回调中，我想获取每个变量的值。我尝试了以下但没有成功。

```
var data = "@colour: red; #example { background-color: @colour; }",

parser = new less.Parser({});
parser.parse(data, function (error, root) {
  console.log( root.toCSS() );

  var varsDef = root.variables();
  for (k in varsDef) {
    console.log(varsDef[k]);

    // how to get the value for the var?
      //not working
    console.log(varsDef[k].eval());
      //not working
    console.log(varsDef[k].toCSS());
      //is an object but looking for a string value
    console.log(varsDef[k].value); 
      //returns an empty string
    console.log(varsDef[k].value.toCSS());                
  }
}); 
```

eval() 和 toCSS() 都没有给我任何结果。我不了解 less 解析器的内部工作原理。每个变量对象都有一个变量属性 varsDef[k].value，它本身就是一个对象。但我只需要变量的字符串值。

有谁知道如何将变量的值作为字符串获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:00:22.373

```
varsDef[k].value.toCSS() 
```

应该是值

```
varsDef[k].name 
```

应该是变量名

```
varsDef[k].toCSS() 
```

什么都不返回，因为它是一个变量 - 在 CSS 中变量不输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T16:00:14.833

我最近遇到了这个问题，它咬了我，因为像你一样，我有同样的直觉，运行类似于你上面写的代码的东西，但是对于复杂的变量

```
@redColor: #900;  // responds to .toCSS()
@fooColor: desaturate(@redColor, 20%);  // both of these error out 
@barColor: lighten(@fooColor, 10%);  // when calling .toCSS() 
```

你会得到这个嵌套`tree.Value`的，`@barColor`这是解析树的嵌套表示，所以它会说，无用的那个`barcolor: {[value: {value: [{lighten: {...}}]}]}`或类似的东西。我的 parsing-fu 非常糟糕，因为我总是会在某个时候得到一些对象，这些对象将不再响应我在其上调用 tree.toCSS，所以我放弃了那条路线。

相反，我所做的是生成一个带有导入规则和无意义规则的无意义的 .less 文件，就像这样

```
@import "varfile.less";

.foo {
  redColor: @redColor;
  fooColor: @fooColor;
  barColor: @barColor;
} 
```

less 会愉快地解析这样的文件，它不关心是否`redColor`是真正的 css 属性，它只是忽略它并尽职尽责地进行所有替换。因此，您实际上最终得到了一个可以轻松解析的规则 css 文件，因为它的标记非常简单。它看起来像这样：

```
.foo{
  redColor: #990000;
  fooColor: #8a0f0f;
  barColor: #b81414;
} 
```

巧合的是，这是*最容易解析的文件*。它实际上乞求变成 json 或你有什么。当然，通往这里的道路非常可笑。我怀疑这是因为没有规则的变量仍然是可以在规则本身内修改的公平游戏，但我可能只是将其合理化。

假设您只想提取 less var 的最终值而不是 less var 的语义值，这非常方便。如果你想要语义，最好只解析实际的 less 文件。

我最终在节点中写了这个，在我克服了我自己对它感觉有多狡猾的反对意见之后，它工作得很好，并为我提供了一个带有项目变量的 json dict。你可以看一下，它在 github 的[nsfmc/less-extractor](http://github.com/nsfmc/less-extractor)上，它基本上需要一个基本的配置文件，然后将一个 json 字典写入标准输出。它不优雅，但它完全有效，即使它有点hackish。

您最初的问题是关于完全在客户端执行此操作，因此这似乎排除了该 github 项目，但想法非常相似：您希望能够访问原始 less 文件作为某些 xhr 请求的一部分，解析它获取变量名，构建一个更少的字符串，解析它，然后其余的代码只是字符串构建和磨机解析的运行。

希望对你有帮助！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-09T08:14:55.017

I was also having issues with the less parser too; doing it that way was getting ridiculous with recursive checking of tree nodes.

If you wan't the actual values as opposed to the CSS generated (as per the above answer), the best way is to probably manually parse the file's text.

This function returns a key/value pair for each of the variables in a given less file. It wont work if the LESS file has multiple values per line, you could make it better with regex. I used it to parse bootstrap's variables file, which works nicely.

```
getLessVars = (lessStr) ->
  lines = lessStr.split('\n')
  lessVars = {}
  for line in lines
    if line.indexOf('@') is 0
      keyVar = line.split(';')[0].split(':')
      lessVars[keyVar[0]] = keyVar[1].trim()
  return lessVars 
```

# javascript - 用于创建 JSON 对象的 Javascript 递归

> ID：11827456
> 
> 赞同：3
> 
> 时间：2012-08-06T11:33:55.413
> 
> 标签：javascript

需要一些关于如何正确递归地执行此操作的建议。

基本上我正在做的是输入一堆文本并将其作为 JSON 返回。

例如：

文本：

```
q
b
name:rawr 
```

回报：

```
[
  "q",
  "b",
  {
    "name": "rawr"
  }
] 
```

以及以下输入：

```
q
b
name:rawr:awesome 
```

将返回（输出格式不重要）：

```
[
  "q",
  "b",
  {
    "name": {
        "rawr": "awesome"
    }
  }
] 
```

* * *

如何修改以下代码以允许以递归方式在对象中包含对象。

```
var jsonify = function(input){
  var listItems = input, myArray = [], end = [], i, item;

  var items = listItems.split('\r\n');

  // Loop through all the items
  for(i = 0; i < items.length; i++){

    item = items[i].split(':');

    // If there is a value, then split it to create an object
    if(item[1] !== undefined){
      var obj = {};
      obj[item[0]] = item[1];  
      end.push(obj);
    }
    else{
      end.push(item[0]);
    }
  }

  // return the results
  return end;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T11:50:16.983

我不认为递归是正确的方法，循环也可以做到这一点：

```
var itemparts = items[i].split(':');

var value = itemparts.pop();
while (itemparts.length) {
    var obj = {};
    obj[itemparts.pop()] = value;
    value = obj;
}
end.push(value); 
```

当然，由于递归和循环具有等效的功能，因此您可以对递归函数执行相同的操作：

```
function recurse(parts) {
    if (parts.length == 1)
        return parts[0];
    // else
    var obj = {};
    obj[parts.shift()] = recurse(parts);
    return obj;
}
end.push(recurse(items[i].split(':'))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:52:34.920

这是一个递归解决方案：

```
var data = [];

function createJSON(input) {

    var rows = input.split("\n");
    for(var i = 0; i < rows.length; i++) {
        data.push(createObject(rows[i].split(":")));
        }

    }

function createObject(array) {
    if(array.length === 1) {
        return array[0];
        } else {
        var obj = {};
        obj[array[0]] = createObject(array.splice(1));
        return obj;
        }
    }

createJSON("p\nq\nname:rawr:awesome");
console.log(data); 
```

# javascript - 查看由 java 脚本文件上传器选择的文件的文件内容

> ID：11827459
> 
> 赞同：0
> 
> 时间：2012-08-06T11:34:12.093
> 
> 标签：javascript, jquery

在 jQuery 中，我使用文件输入类型来上传文件。但是现在我想在浏览器上显示该上传文件的内容，而无需与服务器端进行任何通信。

这可能吗？如果可以，怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:58:21.823

HTML5 File API 是满足需求的答案。这是您想要的完整工作示例：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:38:15.737

你可以试试[`HTML5 File API`](http://www.w3.org/TR/FileAPI/)：

> 使用 HTML5 中添加到 DOM 的 File API，现在 Web 内容可以要求用户选择本地文件，然后读取这些文件的内容。

# objective-c - 如何在 iOS / Cocoa 中找到集合对象的内存占用

> ID：11827464
> 
> 赞同：1
> 
> 时间：2012-08-06T11:34:37.997
> 
> 标签：objective-c, ios, cocoa-touch, memory-management, collections

我正在滚动我自己的对象缓存。它基本上是一个 NSMutableSet。

有没有办法（以编程方式）找出集合当前正在使用多少内存，以便我可以触发一些不太重要的对象的清除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:42:18.527

定义“集合”。您用来维护集合的结构的大小？对象指针的大小？对象持有的实例变量的大小？

您可以根据需要在内存警告中清除数据。

找出对象的实例变量使用多少内存的 Objective-C 运行时方法是`class_getInstanceSize`，尽管我认为这不是正确的方法。一个拥有一个 NSData 和 5 MB 数据的对象的时钟将低于一个拥有两个 NSString 的对象。

因为我不知道你为什么要滚动自己的缓存，所以这就是我要做的。我会定义一种方法来计算出与我保留的物品成比例的成本。（对于图像，假设宽度 * 高度。）然后我会使用`NSCache`它支持为每个对象提供成本，保持最大成本并自动清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:58:07.483

据我所知，没有内置任何东西可以解决这个问题。、和不提供可靠的方法`class_getInstanceSize`，因为它们会给你一个空对象甚至一个对象指针的大小。这意味着如果您采用这些方法中的任何一种，十个字符的字符串的大小和一百个字符的字符串的大小将是相同的。`sizeof``malloc_size`

您可以通过检查对象的序列化大小来更好地估计对象的内存大小，但是您的集合中的对象需要符合才能`NSCoding`使其工作。您可以实现`NSCoder`计算已传递给它以进行序列化的数据的总大小，而无需“真正”序列化数据。将此编码器传递给您的集合的`encodeWithCoder:`方法，然后收集集合中所有对象的总大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:45:04.333

sizeof() 是一个方便的工具。

```
sizeof(object); 
```

或者

```
malloc_size(object); 
```

# asp.net - 更改托管在共享点上的网站的登录页面

> ID：11827466
> 
> 赞同：0
> 
> 时间：2012-08-06T11:34:47.333
> 
> 标签：asp.net, sharepoint

我有一组托管在sharepoint 上的网站，我正在尝试将欢迎页面从pages/default.aspx 更改为站点的pages/default.aspx 之一。当我尝试正常执行此操作时，我收到一条错误消息：- 指定的欢迎页面无效或当前站点中不存在。

我阅读了它，发现这可以通过将 default.aspx 页面从该站点的页面复制到主页文件夹来解决。但是，我收到一个错误：- 您可以重新尝试该操作，并且您可能需要在重新尝试之前先清理一半创建的数据。

我找不到可以启用发布的位置，该位置已被建议作为解决此错误的方法。

有人可以帮助我并告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:37:44.760

子站点页面不能直接转换为登录页面。我使用的解决方法是在主站点中创建一个重定向页面并使其成为登录页面。一旦用户登陆重定向页面，他们就可以被重定向到子站点页面。

# actionscript-3 - 如何使用 flex 转换为舍入值

> ID：11827470
> 
> 赞同：1
> 
> 时间：2012-08-06T11:35:03.527
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我想知道我们如何使用 flex 为 Math.round 赋值。

代码：

```
 txtTotal.text=(Number(txtRate.text)*Number(txtQuantity.text)).toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:44:39.970

下面的代码可以帮助你： -

```
txtTotal.text = Math.round(((Number(txtRate.text)*Number(txtQuantity.text))*100)/100).toString(); 
```

# java - 追加到 JTextArea 不会在 '\n' 上创建换行符

> ID：11827475
> 
> 赞同：0
> 
> 时间：2012-08-06T11:35:25.353
> 
> 标签：java, text, character-encoding

我正在从文本文件加载字符串资源（以便在需要更改它们时不必重新构建），当附加到 JTextArea 时显示为“Some sentence,\n on the same line”。

当我对完全相同的字符串进行硬编码时，它会很好地附加。
这可能哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:40:53.710

你的文本文件是什么样的？如果 "\n" 在文本文件中，它可能是按字面意思复制的，即它不被视为转义序列。

编辑：您可以尝试将文本文件作为属性文件读取并自动例如 \n 解析换行符。

```
Properties p = new Properties();
InputStream fileStream = new FileInputStream("myfile.txt");
p.load(fileStream);    
String value = p.getProperty(key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:30:27.567

在文本文件中执行此操作...

**“1st_Half_of_String”** `+"\n"+`**“2nd_Half_of_String”**

# ios - CorePlot：具有多层的数据标签

> ID：11827476
> 
> 赞同：0
> 
> 时间：2012-08-06T11:35:27.430
> 
> 标签：ios, core-plot, layer

我正在尝试创建一个带有文本和图像作为每个点的数据标签的图。我正在使用的代码如下所示；

```
//Point symbol
NSInteger symbolIndex = interval.symbolIndex;
UIImage *img = [Common getPointSymbol:symbolIndex];
CGRect imageRect = CGRectMake(0, 0 , 60, 50);
CPTBorderedLayer * imageLayer = [[CPTBorderedLayer alloc] initWithFrame:imageRect];
imageLayer.fill = [CPTFill fillWithImage:[CPTImage imageWithCGImage:[img CGImage] scale:img.scale]];

//Point text
CPTMutableTextStyle *dataLabelTextStyle = [CPTMutableTextStyle textStyle];
dataLabelTextStyle.color    = [CPTColor blackColor];
dataLabelTextStyle.fontSize = 12.0f;
dataLabelTextStyle.fontName = @"Helvetica";
CPTTextLayer *textLayer = [[CPTTextLayer alloc] initWithText:point.title style:dataLabelTextStyle];
[imageLayer addSublayer:textLayer];

return imageLayer; 
```

这适用于最初在绘图上可见的数据点，但对于在起始绘图区域之外的点，仅绘制符号图像。如果缩小并强制重绘绘图，两个图层将再次出现。如果颠倒图层的顺序，然后只绘制文本图层，也会出现同样的问题。实际上，如果从情节之外开始，似乎不会渲染子层。

这是核心情节错误吗？是否可以将图层合并为一个以缓解此问题？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:56:02.280

`CPTTextLayer`是 的子类`CPTBorderedLayer`。您可以将背景填充添加到文本图层，然后使用填充属性将文本定位在图层内。

# javascript - Eloquent Javascript：无法理解 sum 函数中的数值是如何确定的

> ID：11827477
> 
> 赞同：1
> 
> 时间：2012-08-06T11:35:34.080
> 
> 标签：javascript

我试图了解如何根据*Eloquent Javascript书中的示例确定***number**变量。

 *当我输出**数字**时，我可以看到它随着循环的进行而增长，但我看不到数字变量的实际设置位置。

（注意：对于任何了解 Eloquent Javascript 的人，我已将 show() 函数更改为 alert()）

```
function forEach(array, action) {
  for (var i = 0; i < array.length; i++)
    action(array[i]);
}

function sum(numbers) {
  var total = 0;
  forEach(numbers, function (number) {
    total += number;
  });
  return total;
}
alert(sum([1, 10, 100, 1000])); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:39:58.673

它设置在代码的一半左右：

> `forEach(numbers, function (number) {`

或者更确切地说，当调用该匿名函数时：

> `action(array[i]);`

（因为该函数已作为`action`参数传递给该`forEach`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:40:48.653

```
forEach(numbers, function (number) {
    total += number;
  }); 
```

这部分`number`取自当前的`numbers`，相当于：

```
for (var i = 0; i < numbers.length; i++) {
  var number = numbers[i];

  function (number) {
    total += number;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:48:18.617

一旦您了解更多`forEach`方法签名，这一点就很明显了。

从你的代码

```
function sum(numbers) 
{   var total = 0;     
    forEach(numbers, function (number) {       
        total += number;     
    });     
return total;   
}   

alert(sum([1, 10, 100, 1000])); 
```

那么你需要知道该`ForEach`方法有两个参数：

1.  第一个是要迭代的数组，
2.  第二个是要针对当前数组项引发的委托……该函数将为数组的每个项调用。

这意味着`function (number) { ... }`将为提供的数组的每个项目调用具有一个名为 number ()的参数的声明函数`[1, 10, 100, 1000]`，并且 number 将设置为这些值中的每一个。

希望这可以帮助*

# powerbuilder - 以@符号开头的字体有什么区别？

> ID：11827479
> 
> 赞同：0
> 
> 时间：2012-08-06T11:35:45.693
> 
> 标签：powerbuilder, datawindow

我正在使用 PowerBuilder 12.5，因为它已发布。今天我意识到有以`@`符号开头的字体名称（在打开 Datawindow Painter 时出现的下拉列表中）。大约有三十个，并且相同的字体名称`@`尚未存在于同一列表中。
（即`@Arial Unicode MS`和`Arial Unicode MS`）。

问题是它们之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:35:31.370

我也在`forum.sybase.com`下面的新闻组上问过这个问题`sybase.public.powerbuilder.general`，似乎最好的答案是[@字体用于 90° 旋转垂直文本](http://blogs.msdn.com/b/oldnewthing/archive/2012/07/19/10331400.aspx)。

感谢`Roland Smith [TeamSybase]`和`Reed Shilts [Sybase]`。

# android - 在获取数据之前阻止屏幕显示

> ID：11827480
> 
> 赞同：0
> 
> 时间：2012-08-06T11:35:46.680
> 
> 标签：android, android-activity

有什么方法可以从一个活动转到另一个活动并延迟目标活动上的屏幕显示？

我想要做的是允许目标活动获取其所需的数据，但在完成之前不显示任何内容。我希望源活动的屏幕仍然可见，直到我准备好第二个活动中的数据。

具体来说，我正在使用 AsyncTask 来获取数据。我知道我可以在源活动中获取数据，然后将其发送到目标活动，但这在我们的案例中是不可行的。

编辑：更多信息：

我想要这个的全部原因是因为我试图改变当前代码某些部分的结构。目前它的工作方式是第一个活动获取数据，然后将其作为捆绑发送到第二个活动。当可以从多个位置调用第二个活动时，这会产生问题。它导致大量重复代码。

因此，我决定将数据的获取转移到目标活动中，从而消除对重复代码的任何需求。

活动获取自己的数据而不是依赖其他发送数据也更有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:40:43.863

您应该首先创建一个运行异步任务的服务。然后，从您的第一个活动开始服务`startService(new Intent(this, UpdaterServiceManager.class));`

当任务在服务中结束时，启动第二个活动。

[单击此处](http://www.vogella.com/articles/AndroidServices/article.html)获取出色的服务教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:38:06.520

尝试为此目的使用服务。

# c# - 当 Verb="runas" 时设置 ProcessStartInfo.EnvironmentVariables

> ID：11827486
> 
> 赞同：4
> 
> 时间：2012-08-06T11:36:09.173
> 
> 标签：c#, environment-variables, processstartinfo, runas

我正在开发一个 C# 应用程序。

我需要创建变量并将其传递给一个新进程，我正在使用`ProcessStartInfo.EnvironmentVariables`.

新进程必须运行提升，所以我使用 Verb = "runas"

```
var startInfo =  new ProcessStartInfo(command)
{
    UseShellExecute = true,
    CreateNoWindow = true,
    Verb = "runas"
};
foreach (DictionaryEntry entry in enviromentVariables)
{
    startInfo.EnvironmentVariables.Add(entry.Key.ToString(), entry.Value.ToString());
} 
```

问题是根据[msdn 文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx)：

> 更改属性后，您必须将该**`UseShellExecute`属性设置为 false**才能启动该过程`EnvironmentVariables`。如果`UseShellExecute`为 true，`InvalidOperationException`则在调用 Start 方法时抛出 an。

但该`runas`变量需要**UseShellExecute=true**

有没有办法做到这两点：以提升的方式运行进程并设置环境变量？

**编辑**

我会尝试改写我的问题...

有没有办法将参数安全地传递给另一个进程，这样只有另一个进程才能读取参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:16:53.987

它可以工作，但缺点是它还显示了第二个命令提示符，环境变量仅在启动过程的上下文中设置，因此设置不会传播到整个盒子。

```
 static void Main(string[] args)
    {
        var command = "cmd.exe";
        var environmentVariables = new System.Collections.Hashtable();
        environmentVariables.Add("some", "value");
        environmentVariables.Add("someother", "value");

        var filename = Path.GetTempFileName() + ".cmd";
        StreamWriter sw = new StreamWriter(filename);
        sw.WriteLine("@echo off");
        foreach (DictionaryEntry entry in environmentVariables)
        {
            sw.WriteLine("set {0}={1}", entry.Key, entry.Value);
        } 
        sw.WriteLine("start /w {0}", command);
        sw.Close();
        var psi = new ProcessStartInfo(filename) {
            UseShellExecute = true, 
            Verb="runas"
        };
        var ps =  Process.Start(psi);
        ps.WaitForExit();
        File.Delete(filename);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T01:17:29.410

有一个更好的答案：您仍然可以使用具有 UseShellExecute = true 的 ProcessStartInfo 调用 Process.Start()，前提是您调用它的方法已用 [STAThread] 属性标记。

# jquery - jQuery - 如何逆向选择？

> ID：11827487
> 
> 赞同：4
> 
> 时间：2012-08-06T11:36:08.970
> 
> 标签：jquery, jquery-selectors

```
<div class="a-1">
<div class="a-2">
<div class="a-3">
<div class="a-1 a-2">
<div class="a-2 a-3">
<div class="a-1 a-3">
<div class="a-1 a-2 a-3"> 
```

我想做这样的事情：

```
$('.a-1').show().siblings([all those that do not belong to a-1]).hide(); 
```

有没有办法做到这一点？选择`:not()`器似乎让我失望了，因为它单独选择了**每个元素**的反转，导致选择了所有 7 个 DIV。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T11:40:47.810

不确定您的问题`:not()`是什么，但这应该可以正常工作：

```
$('.a-1').show().siblings(':not(.a-1)').hide(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-18T19:17:20.913

工作正常，与 $('.a-1').show().siblings(':not(.a-3)').hide(); a-1,a-2 和 a-1 a-2 将被隐藏，因为您使用的是兄弟 () 方法，否则使用 $('.a-1').not('.a-3')。隐藏（）; 只有 a-1 和 a-1 a-2 会隐藏。详情请访问： http: [//mondalmrinmoy.blogspot.com/2018/07/jquery-selectors-few-advanced-notes.html](http://mondalmrinmoy.blogspot.com/2018/07/jquery-selectors-few-advanced-notes.html)

# java - Restful webservice查询参数问题

> ID：11827491
> 
> 赞同：0
> 
> 时间：2012-08-06T11:36:14.860
> 
> 标签：java, rest

我们在项目中使用了 Restful Web 服务。我将以下类的对象作为查询参数传递给我的网络服务。

```
public class QueryDTO {
    private String name;
    private Object[] args;
    private Object[] results;
//with setters and getters
} 
```

这是我的网络服务配置

```
@GET
@Produces("application/json")
@Path("/")
QueryDTO executeQuery(@QueryParam("") QueryDTO queryDTO) throws Exception; 
```

当我打电话时，这里的 args 可能包含任何数据类型（String、Interger、Date ..etc）

```
rest/query?name="getCreativeExtractorPatternByName"&args={"473"} 
```

我越来越低于异常。

```
Parameter Class java.lang.Object has no constructor with single String parameter, static valueOf(String) or fromString(String) methods 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:38:06.863

添加单个参数构造函数：

```
public QueryDTO(String name) {
  this.name = name;
} 
```

为了将参数注入 DTO 对象，它应该包含一个接受字符串参数的构造函数。

您应该提供有效的查询参数以在 DTO 对象中成功注入。

# forms - 当不包含在同一个表单元素中时，使单选按钮互斥吗？

> ID：11827495
> 
> 赞同：3
> 
> 时间：2012-08-06T11:36:25.570
> 
> 标签：forms, web-standards

我正在制作一个日历，其中每天都有一个单选按钮，您可以选择它。我希望用户只能选择一天。我遇到的问题是我把日历做成了一个表格，所以每个`<td>`都有以下内容：

```
<td>
  <form>
    Mon 18
    <input type="radio" name="day" value="mon18" />
  </form>
</td> 
```

因此，由于并非所有单选按钮都包含在一个表单元素中，因此不会发生使选择互斥的正常行为。如果我在所有标记周围创建 1 个表单元素，那么表格将包含在其中，这在语义上是否正确？

我的问题有语义上正确的解决方案吗？我想我可以用 javascript 和服务器端验证来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T09:36:22.307

将表格包含在表格中在语义上是完全正确的，这实际上是构建具有互斥选择的基于单选按钮的日历的唯一明智方法！

以下[代码](http://jsfiddle.net/5zxaz/)确实验证：

```
<form>
    <table>
        <tr>
            <td><input type="radio" name="day" value="1"></td>
            <td><input type="radio" name="day" value="2"></td>
            ...
        </tr>
    </table>
</form> 
```

# jquery - 复选框样式插件不起作用

> ID：11827499
> 
> 赞同：2
> 
> 时间：2012-08-06T11:36:42.950
> 
> 标签：jquery, css, checkbox

我正在使用一个复选框样式**[插件](https://github.com/tdreyno/iphone-style-checkboxes)** 我正在使用两个选项卡，其中每个选项卡中都有一些复选框。但插件不工作

[**演示**](http://jsfiddle.net/dbHWs/18/)

我做了一个 jsfiddle 演示来展示它的问题。即使它是如何工作的，也只有当我不在任何选项卡格式中使用它时。但不应该是这样的。任何人都可以看看问题出在哪里。?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:19:03.360

嘿，我像这样编辑`width`过`!important`

```
.iPhoneCheckContainer{
width:98px !important;
}
.iPhoneCheckHandle {
width:44px !important;
} 
```

[演示](http://jsfiddle.net/dbHWs/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:40:23.010

这不是好的 jquery 选择器

```
$(window).load(function() {
    $('input#on_off_on').iphoneStyle();
});​ 
```

=>[工作](http://jsfiddle.net/dbHWs/19/):)

* * *

更新[**的演示**](http://jsfiddle.net/dbHWs/20/)

# actionscript-3 - 外部 ActionScript 3.0 MOUSE_UP 和可见

> ID：11827508
> 
> 赞同：0
> 
> 时间：2012-08-06T11:37:27.317
> 
> 标签：actionscript-3, flash

这是我的代码。

```
package core
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.geom.Point;

    public class earth extends MovieClip
    {
        protected var position:Point = new Point(x, y);
        public function earth()
        {
            stage.earthText_mc.visible = false; //HAVING PROBLEM WITH THIS LINE
            buttonMode = true;
            addEventListener(MouseEvent.MOUSE_DOWN, down);
        }
        protected function down(event:MouseEvent):void
        {
            parent.addChild(this);
            startDrag();
            addEventListener(MouseEvent.MOUSE_UP, up);
        }
        protected function up(event:MouseEvent):void
        {
            stopDrag();
            if(dropTarget)
            {
                if(dropTarget.parent.name == "mercury_drop")
                {
                    x = position.x = 279.95;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "venus_drop")
                {
                    x = position.x = 342.55;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "earth_drop")
                {
                    x = position.x = 418.2;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "mars_drop")
                {
                    x = position.x = 497.6;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "jupiter_drop")
                {
                    x = position.x = 613.65;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "saturn_drop")
                {
                    x = position.x = 738.4;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "uranus_drop")
                {
                    x = position.x = 844.8;
                    y = position.y = 267.15;
                }
                else if(dropTarget.parent.name == "neptune_drop")
                {
                    x = position.x = 939.65;
                    y = position.y = 267.15;
                }
                else
                {
                    x = position.x = 517.2;
                    y = position.y = 35.5;
                }
            }
        }
    }
} 
```

我想要的只是在我打开运行闪光灯时使文本“EARTH”不可见，仅使用代码..但我无法连接到影片剪辑“earthText_mc”。该脚本仅在“earth_mc”处连接..我不知道如何调用其他电影剪辑并使它们按照我的意愿可见或不可见..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:02:13.480

已经解决了问题。

很快，解决代码如下。

```
var earth_text:MovieClip = this.parent.getChildByName("earth_text") as MovieClip;
earth_text.visible = false; 
```

但是，在不完全了解as3.0 DisplayObject继承结构的情况下，这个问题是一个难以解决的问题。首先，应该彻底了解下图。

![在此处输入图像描述](../Images/3838728509d9b4e0ba193f9891c0ed3d.png)

`this.parent`是阶段。

`this.parent.getChildByName("earth_text")`是显示对象。（请仔细查看 getChildByNames 方法的文档。）

但类型铸造MovieClip。正如您将看到的文档，此方法是 DisplayObject 的实际返回值。因此，您应该进行类型转换。

（如果必须将 DisplayObject 添加到舞台。下面的代码可以更好地完成您的工作。）

```
public function earth()
{
    if(!stage)
       addEventListener(Event.ADDED_TO_STAGE, init);
    else
       init();
}
private function init(e:Event=null):void
{           
    removeEventListener(Event.ADDED_TO_STAGE, init);

    var earth_text:MovieClip = this.parent.getChildByName("earth_text") as MovieClip;

    earth_text.visible = false;
    buttonMode = true;
    addEventListener(MouseEvent.MOUSE_DOWN, down);
} 
```

但是，您在 Stage 中的所有实例 MovieClip。子索引很重要。所有的DisplayObject，因为它们是按以下顺序进行的。

```
Stage Load -> Your instance of MovieClip are added sequentially in the order index. 
```

因此编写了以下代码并检查了控制台窗口。

地球.as

```
var _parent:MovieClip = this.parent as MovieClip;
for(var i:int = 0; i<_parent.numChildren; i++)
{
    trace("index: " + i + " object: " + _parent.getChildAt(i));
} 
```

你的原始文件是地球实例的索引为1。所以如果你运行上面的代码并没有找到该对象。原因是检查下面的控制台，就可以理解了。添加了 Earth 对象的实例，但尚未加载其余对象。所以你必须重新排列对象的顺序。查看修改后文件的控制台底部。

原始文件。

```
index: 0 object: [object Shape]
index: 1 object: [object earth]
index: 2 object: null
index: 3 object: null
index: 4 object: null
index: 5 object: null
index: 6 object: null
index: 7 object: null
index: 8 object: null
index: 9 object: null
index: 10 object: null
index: 11 object: null
index: 12 object: null
index: 13 object: null
index: 14 object: null
index: 15 object: null
index: 16 object: null
index: 17 object: null 
```

* * *

**`how to rearrange instance of MovieClip object?`**

1.  单击舞台中地球对象的实例。
2.  crtl+x
3.  crtl+shift+v（粘贴在同一个地方）

ps：同样，其余对象的索引应高于 earth_text 实例。（在控制台中，索引 16 是一个 earth_text 实例。）

修改后的文件。

```
index: 0 object: [object Shape]
index: 1 object: [object MovieClip]
index: 2 object: [object MovieClip]
index: 3 object: [object MovieClip]
index: 4 object: [object MovieClip]
index: 5 object: [object MovieClip]
index: 6 object: [object MovieClip]
index: 7 object: [object MovieClip]
index: 8 object: [object MovieClip]
index: 9 object: [object venus]
index: 10 object: [object mercury]
index: 11 object: [object jupiter]
index: 12 object: [object mars]
index: 13 object: [object uranus]
index: 14 object: [object saturn]
index: 15 object: [object neptune]
index: 16 object: [object MovieClip]
index: 17 object: [object earth] 
```

实例 DisplayObject 在使用时必须始终小心。在父级按索引的升序添加。

**如果您仍然不明白，请发表评论。我很乐意提供帮助。祝你好运**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T14:00:24.140

我不喜欢`MOUSE_UP`在对象上使用事件。

我宁愿在舞台上使用它，像魅力一样工作：

```
 function handleMouseDown(e:MouseEvent):void
 {
     stage.addEventListener(MouseEvent.MOUSE_UP, handleMouseUp);
     // your code...
 }

 private function handleMouseUp(e:MouseEvent):void
 {
     stage.removeEventListener(MouseEvent.MOUSE_UP, handleMouseUp);
     // your code...            
 } 
```

# java - 如何将用户的布尔属性从 WMQ .NET 客户端 API 发送到 JMS？

> ID：11827510
> 
> 赞同：1
> 
> 时间：2012-08-06T11:37:33.333
> 
> 标签：java, .net, jms, websphere, ibm-mq

在解决[了第一个阻止](https://stackoverflow.com/questions/11782260/how-to-send-jms-message-over-mq-in-net)程序之后，我能够转向更复杂的场景，我尝试将自定义消息属性从我的 .NET 组件发送到 WebSphere Application Server v7 中托管的消息驱动 bean 和响应回 .NET 组件的消息驱动 bean . 这种通信是通过 WebSphere MQ v7 完成的，但 .NET 使用 WebSphere MQ Client v7.5 和 amqmdnet.dll v7.5.0.0（因为它修复了我在 v7 客户端中遇到的一些其他问题：例如[this](https://stackoverflow.com/questions/7711477/how-to-use-setbytesproperty-and-getbytesproperty-in-websphere-mq)）。

我无法从 .NET 组件发送简单的布尔属性：

```
MQMessage message = new MQMessage();
message.SetBooleanProperty("TEST_BOOL", true);
queue.Put(message); 
```

在消息驱动 bean 中接收此类消息将失败，并显示：

```
[8/3/12 17:37:20:087 CEST] 0000003b SibMessage    W   [:] CWSJY0003W: JMSCC0110: An exception '
                       Message : com.ibm.msg.client.jms.DetailedMessageFormatException: JMSCMQ1050: The MQRFH2 header has an incorrect format. Received a message with a badly formed MQRFH2 header. Ensure that any non-JMS applications building messages with MQRFH2 headers create well-formed MQRFH2 headers.
                         Class : class com.ibm.msg.client.jms.DetailedMessageFormatException
                         Stack : sun.reflect.NativeConstructorAccessorImpl.newInstance0(NativeConstructorAccessorImpl.java:-2)
                               : sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:45)
                               : sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
                               : java.lang.reflect.Constructor.newInstance(Constructor.java:515)
                               : com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:313)
                               : com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices.java:388)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQMessageBase._parseUsrFolder(WMQMessageBase.java:1984)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.constructProviderMessageFromRFH2(WMQReceiveMarshal.java:402)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.constructProviderMessageFromProperties(WMQReceiveMarshal.java:191)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.createProviderMessage(WMQReceiveMarshal.java:467)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.exportProviderMessage(WMQReceiveMarshal.java:627)
                               : com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1318)
                               : com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1208)
                               : com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.receive(WMQSyncConsumerShadow.java:366)
                               : com.ibm.msg.client.wmq.internal.WMQSession.loadMessageReference(WMQSession.java:1318)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:2940)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2631)
                               : com.ibm.mq.jms.MQSession.run(MQSession.java:862)
                               : com.ibm.mq.connector.inbound.WorkImpl.run(WorkImpl.java:265)
                               : com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:399)
                               : com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
     Caused by [1] --> Message : com.ibm.msg.client.jms.DetailedMessageFormatException: JMSCMQ0008: WebSphere MQ classes for JMS attempts to use a data type not supported by a message or attempts to read data in the wrong type. Wrong data types used to read message property types. Check that the message received and the properties to be read are of the type expected.
                         Class : class com.ibm.msg.client.jms.DetailedMessageFormatException
                         Stack : sun.reflect.NativeConstructorAccessorImpl.newInstance0(NativeConstructorAccessorImpl.java:-2)
                               : sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:45)
                               : sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
                               : java.lang.reflect.Constructor.newInstance(Constructor.java:515)
                               : com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:313)
                               : com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices.java:388)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQMessageUtils.deformatTypedElement(WMQMessageUtils.java:306)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQMessageUtils.deformatElement(WMQMessageUtils.java:414)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQMessageBase._parseUsrFolder(WMQMessageBase.java:1963)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.constructProviderMessageFromRFH2(WMQReceiveMarshal.java:402)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.constructProviderMessageFromProperties(WMQReceiveMarshal.java:191)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.createProviderMessage(WMQReceiveMarshal.java:467)
                               : com.ibm.msg.client.wmq.common.internal.messages.WMQReceiveMarshal.exportProviderMessage(WMQReceiveMarshal.java:627)
                               : com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1318)
                               : com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1208)
                               : com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.receive(WMQSyncConsumerShadow.java:366)
                               : com.ibm.msg.client.wmq.internal.WMQSession.loadMessageReference(WMQSession.java:1318)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:2940)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2631)
                               : com.ibm.mq.jms.MQSession.run(MQSession.java:862)
                               : com.ibm.mq.connector.inbound.WorkImpl.run(WorkImpl.java:265)
                               : com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:399)
                               : com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
' was caught while processing a message for delivery to a message driven bean. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:37:33.333

我使用[RFHUtils](https://sites.google.com/site/ibmmiddleware/rfhutils)来获取我的 .NET 组件发送的消息。`usr`RFH2 文件夹包含以下定义：

```
TEST_BOOL(dt='boolean')=True 
```

如果我将值更改为，`1`而不是`True`使用 RFHUtils 发送消息，它会被正确处理。反编译的资源适配器（我正在使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)）也表明它只需要布尔 JMS 属性`0`的`1`值。

```
static Object deformatTypedElement(int datatype, String value)
    throws JMSException
{
    Object result = null;
    switch (datatype) {
        ...
        case 1:
            if (value.equals("1")) {
                result = new Boolean(true);
            }
            else if (value.equals("0")) {
                result = new Boolean(false);
            }
            else {
                JMSException je = (JMSException)NLSServices.createException("JMSCMQ0008", null); // Line 306 - BOOM!
                throw je;
            }

            // There is also no break here but I think it is a problem of decompiler
       ...
    }
} 
```

.NET 的 amqmdnet.dll 库的反编译代码（我正在使用[.NET Reflector](http://www.reflector.net/)）表明它在将布尔值传递给消息之前不会转换它们。它只是`ToString()`在值上使用：

```
internal class MQMarshalMessageForPut : MQBaseObject
{
   ...

   private void SetContent(RFH2Folder element, object value)
   {
       ...

       if (value is bool)
       {
           element.SetContent(value.ToString(), 1);
       }

       ...
    }
} 
```

但是`ToString`在`bool`类型返回`True`或`False`！

从消息驱动的 bean 返回到 .NET 应用程序的响应没有任何问题，因为`GetBoolProperty`准备好同时处理`True`和`False`字符串`0`和`1`值。

```
private bool ParseBoolean(object obj) 
{
    ...

    if ((string.Compare(strA, "true", true) == 0) || (strA == "1"))
    {
        strA = bool.TrueString;
    }
    else if ((string.Compare(strA, "false", true) == 0) || (strA == "0"))
    {
        strA = bool.FalseString;
    }

    ...
} 
```

我认为这是 IBM amqmdnet.dll 库中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-01T21:24:31.673

这是一个错误，正确的行为应该允许应用程序使用布尔值的编程语言表示。在这种情况下，.NET 为“真/假”，JMS 为 1/0。MQ 应该在两个应用程序之间转换布尔值。

现在已经解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T04:52:46.013

`True`Boolean和有不同的定义`False`。有些语言将 True 表示为 1，将 False 表示为 0，而有些语言将 False 定义为 0，将任何非零（包括 1 和 -1）定义为 True。有些像 Ruby 将 True 定义为 0。所以不能肯定地说 True 是 1 而 False 是 0。所以 MQ .NET 和 Java API 将布尔值设置为本身，接收应用程序可以根据它们的语言细节来解释它`True`。`False`

然而，在消息接收期间，MQ .NET 和 Java API 确实将 1 识别为 True，0 识别为 false。这更像是一个可用性点。发送消息时不能应用相同的值，始终必须设置一致的值，有时不能设置为 1，有时设置为 True。

# sharepoint - Sharepoint 2010 文档模板

> ID：11827512
> 
> 赞同：0
> 
> 时间：2012-08-06T11:37:43.720
> 
> 标签：sharepoint

我们需要一个包含简单单词字母模板的站点范围的文档库。

从列表上的客户项目中，我们需要能够选择其中一个模板，然后让模板填充客户数据，例如姓名和地址等。

实现这一目标的最简单方法是什么？理想情况下不使用工作流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:51:21.060

然后，您应将文档模板分配给内容类型。

请参阅此博客文章，[http://sharepointchick.com/archive/2011/01/07/using-content-types-with-document-templates-when-using-quotnew-documentrdquo.aspx](http://sharepointchick.com/archive/2011/01/07/using-content-types-with-document-templates-when-using-quotnew-documentrdquo.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:13:38.753

在模板中创建显示文档属性的字段以“自动填充”它们。这是在功能区的插入选项卡中完成的，然后单击 QuickParts，然后单击文档属性。

最终结果是，除了“文件”>“信息”或属性栏之外，每个属性也将出现在文档正文中，无论您为其插入了字段。然后，它们可以根据与库中的文档一起存储的元数据自动更新自身（更新频率是 Word 设置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:31:07.457

首先，您应该使用[前面提到的技术](http://sharepointchick.com/archive/2011/01/07/using-content-types-with-document-templates-when-using-quotnew-documentrdquo.aspx)来创建基于内容类型的文档。

至于自动填充属性字段，我建议您查看[这篇](http://social.msdn.microsoft.com/forums/en-US/sharepointcustomizationlegacy/thread/5d0186ac-bea7-4488-baaf-97b307c290c6)解释如何在添加文档时自动填充属性的帖子。

您还可以选择用于[SharePoint 的 Harmon.ie](http://harmon.ie/)等商业解决方案来检索您的模板。如果我没记错的话，他们有免费版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T00:36:28.490

[Xpertdoc](http://www.Xpertdoc.com) Letter Management for SharePoint 让用户从客户记录的上下文中选择一个模板，然后生成一个新文档，其中客户数据自动合并到文档中。保险公司 CGU 估计，通过 Xpertdoc 引入的效率提升，他们每年可节省 50 万美元。[http://www.youtube.com/watch?v=xbqWiFt5dUA&feature=channel&list=UL](http://www.youtube.com/watch?v=xbqWiFt5dUA&feature=channel&list=UL)。

# javascript - 我想使用 Jquery 或 JavaScript 在添加到购物车弹出窗口中添加笑脸

> ID：11827524
> 
> 赞同：-3
> 
> 时间：2012-08-06T11:38:23.603
> 
> 标签：javascript, jquery

请检查此链接：

[http://wzfxp.felau.servertrust.com/SearchResults.asp?Cat=1817](http://wzfxp.felau.servertrust.com/SearchResults.asp?Cat=1817)

点击添加到购物车按钮。

它显示添加到购物车弹出窗口。我想在该弹出窗口上添加笑脸。记住我没有添加到购物车的代码意味着我不能更改该代码，只有我可以访问它的 ID 和类。只有在查看源代码之后我才能请参阅代码或脚本。怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:05:11.090

试试下面的代码

**JavaScript**

`$('.soft_add_action_area').css('background', 'url("http://www.mangolanguages.com/assets/images/icon_smiley.png?1285256212") no-repeat left center');`

在

*   Google Chrome 的开发者工具或
*   Mozilla Firefox 的 Firebug

**CSS**

```
.soft_add_action_area {
   background : url("http://www.mangolanguages.com/assets/images/icon_smiley.png?1285256212") no-repeat left center
} 
```

让我知道它是否需要任何修改。

# powershell - 从命令行执行 Powershell

> ID：11827525
> 
> 赞同：1
> 
> 时间：2012-08-06T11:38:34.180
> 
> 标签：powershell, tfs, tfsbuild

上周我一直在开发 Powershell 脚本。当我从 Powershell 窗口启动它时，它现在可以正常工作了。但是，我需要从 TFS 构建中调用脚本。我尝试使用TFS Build InvokeProcess 控件中的语法*Powershell & 'script'但似乎没有任何反应。*因此，我回到了基础并创建了以下脚本：

```
Write-Host " Write-Host line"
Write-eventlog -logname "Application" -source "BizTalkDeployment" -eventId "01" -entrytype "Information" -message "test" 
```

我已将脚本保存为 c:\temp\ps_test.ps1。我以管理员身份打开了一个命令窗口并尝试了以下操作：

```
powershell & 'c:\temp\ps_test.ps1" 
```

这会将命令行置于 powershell 模式，我得到：

```
PS c:\> 
```

但没有其他事情发生。

在我的 TFS 构建结束时，我有一个 InvokeProcess 控件，它使用“Powershell”作为其 FileName 属性，然后是以下参数：

```
String.Format(" ""& '{0}' '{1}' '{2}' '{3}' '{4}' '{5}' '{6}' '{7}' '{8}' '{9}' "" ", DeploymentScriptFileName, IO.Path.GetDirectoryName(DeploymentScriptFileName), "ExecuteBizTalkAppMSI.ps1", "bin\debug\x.Int.MIS-3.0.0.msi", "x.Int.MIS.Deployment.btdfproj", TargetServerPath, "d-vasbiz01", "c:\biztalkdeployment", "C:\Program Files (x86)\x.Int.MIS for BizTalk 2010\3.0", "BTSSvc*MIS*") 
```

构建脚本运行正常，但 InvokeProcess 控件似乎什么都不做——就像我在命令行方面的经验一样。

谁能看到我要去哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:44:39.100

任何一个

```
powershell -file C:\temp\ps_test.ps1 
```

或者

```
powershell "&{ <# code here #> }" 
```

# vb.net - 如何在动态生成的文本框中获取值

> ID：11827527
> 
> 赞同：0
> 
> 时间：2012-08-06T11:38:36.723
> 
> 标签：vb.net, dynamic, textbox

我是 Visual Basic 的新手。我有一个像这样的小程序。 [https://www.dropbox.com/s/xr44pxp3n79atkk/wall.png](https://www.dropbox.com/s/xr44pxp3n79atkk/wall.png)

它将通过将所有墙壁面积相加来计算总面积。

```
Public Sub btnWallAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnWallAdd.Click
    FlowLayoutPanel1.Controls.Clear()
    FlowLayoutPanel1.AutoScroll = True

    For i As Integer = 1 To Val(txtWallNo.Text)
        Dim Width As New TextBox()
        Dim Height As New TextBox()

        Width.Name = "Width" & i
        Width.Text = Width.Name
        Height.Name = "Height" & i
        Height.Text = Height.Name

        FlowLayoutPanel1.Controls.Add(Width)
        FlowLayoutPanel1.Controls.Add(Height)

    Next
End Sub 
```

我已经根据用户输入的数字成功创建了动态文本框，但我不知道如何从这些文本框中获取值并将它们相加。请教我怎么做。非常感谢你！对不起我的英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:09:48.630

您可以按名称访问控件，如下所示：

```
Dim txtWidth As TextBox = FlowLayoutPanel1.Controls.Item("Width" & i) 
```

或者，如果您打开了选项 strict，您需要明确说明类型转换：

```
Dim txtWidth As TextBox = CType(FlowLayoutPanel1.Controls.Item("Width" & i.ToString()), TextBox) 
```

例如，要将所有墙壁上的面积相加，您可以执行以下操作：

```
Public Sub btnCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalculate.Click
    Dim totalArea As Decimal = 0
    For i As Integer = 1 To Val(txtWallNo.Text)
        Dim txtWidth As TextBox = CType(FlowLayoutPanel1.Controls.Item("Width" & i.ToString()), TextBox)
        Dim txtHeight As TextBox = CType(FlowLayoutPanel1.Controls.Item("Height" & i.ToString()), TextBox)
        totalArea = totalArea + (Decimal.Parse(txtHeight.Text) * Decimal.Parse(txtWidth.Text))
    Next
    lblResult.Text = totalArea.ToString()
End Sub 
```

# c++ - strlen() 给出了数组中空字节的错误大小原因

> ID：11827531
> 
> 赞同：-2
> 
> 时间：2012-08-06T11:39:01.650
> 
> 标签：c++, c, deserialization, strlen, arrays

我有一个从流中反序列化的动态 char 数组。

文件内容`char *myarray`（使用十六进制编辑器）：

```
 4F 4B 20 31 32 20 0D 0A 00 00 B4 7F 
```

`strlen(myarray)`返回 8，（必须为 12）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T11:41:52.040

`strlen`将字符计数到第一个 0 字符，这就是它的用途。

如果你想知道反序列化数组的长度，你必须从其他地方得到，反序列化代码应该知道它反序列化的数组有多大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T11:42:38.297

`strlen(myarray)`返回第一个`00`in的索引`myarray`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T12:46:01.460

你问的是哪种语言？

在 C 中，您需要记住大小并将其传递给任何需要知道它的东西。没有（可移植的）方法来确定分配数组的大小，只给它一个指向它的指针，正如你所说，`strlen`其他处理零终止字符串的函数不适用于未终止的数据块。

在 C++ 中，使用`std::string`或`std::vector<char>`来管理动态字节数组。这两个都使大小可用，并为您处理释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:42:26.877

第 9 个字符是 00。即 '\0'。这就是您得到 8 而不是 12 的原因。
strlen() 将其作为 Null 终止符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:44:06.157

C 风格的字符串由 NULL 终止，并且您的 char* 在第 9 位包含一个 NULL-Byte ，因此 strlen 返回 8，因为它会计算元素*直到找到 NULL byte*。

> （来自[http://www.cplusplus.com/reference/clibrary/cstring/strlen/](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)）：
> 
> AC 字符串与字符串开头**和终止空字符之间的字符数一样长。**

当您将 char* 用于二进制数据时，您不能使用 strlen 函数，但要记住（传递）char 数组的大小。

在您的情况下，您可以在传输时序列化动态数组的大小，并**在**分配/读取数组之前对其进行反序列化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T11:46:42.067

来自 cplusplus.com（[http://www.cplusplus.com/reference/clibrary/cstring/strlen/](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)）：

> C 字符串的长度由终止的空字符确定

`'\0'`如果你在它的中间，你不能指望它会计算整个字符串。

在这种情况下，我发现最好将消息的长度与流中的数据一起序列化。例如，您首先序列化 char 数组的长度 - 12，然后序列化实际数据（字符）。这样，当您读取数据时，您将首先读取长度，然后您可以读取那么多字符并确保这是您的 char 数组。

# ruby-on-rails-3 - 路线和 CRUD

> ID：11827533
> 
> 赞同：0
> 
> 时间：2012-08-06T11:39:22.960
> 
> 标签：ruby-on-rails-3

我有一个包含文章和评论的应用程序（教程）。一篇文章有​​_许多评论。评论属于文章。我在删除文章评论时遇到问题。以下是有问题的文件：

**app/views/comments/_comment.html.erb**

```
<%= div_for comment do %>
<h3>
  <%= comment.name %> &lt;<%= comment.email %>&gt; said:
<span class='actions'>
  <%= link_to 'Delete', [@article, comment], confirm: 'Are you sure?', method: :delete %>
</span>
</h3>
<%= comment.body %>
<% end %> 
```

**评论控制器**

```
 before_filter :load_article

  def create
    @comment = @article.comments.new(params[:comment])
    if @comment.save
      redirect_to @article, :notice => 'Thanks for your comment'
    else
      redirect_to @article, :alert => 'Unable to add comment'
    end
  end

  def destroy
    @comment = @article.comments.find(params[:id])
    @comment.destroy
    redirect_to @article, :notice => 'Comment deleted'
  end

  private
    def load_article
      @article = Article.find(params[:article_id])
    end 
```

**路线.rb**

```
resources :articles do
  resources :comments
end 
```

问题是当我在地址**localhost:3000/articles/1**并尝试删除评论时。我没有被重定向到文章显示操作，而是在地址**localhost:3000/articles/1/comments/3**处收到此错误：

```
Unknown action
The action 'show' could not be found for CommentsController 
```

非常感谢任何帮助，谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:48:45.833

这里有两个基本选项，因为大多数浏览器中的链接只能发送 GET 请求。

第一个选项是将 java-script 默认文件包含到页面中

```
<%= javascript_include_tag :defaults %> #this mocks a delete action by modifying the request automatically 
```

第二个也是更可取的是使用 button_to 代替。首先，一个地方的链接和一个做某事的按钮在逻辑上是分开的。删除绝对是一个动作。此外，蜘蛛不会跟随按钮，因此不会意外调用任何内容。

```
<%= button_to 'delete', @comment, :method => :delete %> 
```

========= 完整编辑 ======= 如果您担心链接和按钮看起来不一样，一个简单的解决方案是让我们[jquery/jquery_ui](http://jqueryui.com/demos/button/)为所有链接和按钮设置样式相同的。

# c++ - C++中函数的参数

> ID：11827536
> 
> 赞同：-4
> 
> 时间：2012-08-06T11:40:00.873
> 
> 标签：c++, parameters, virtual

> **可能重复：**
> [const CFoo &bar() const](https://stackoverflow.com/questions/2742084/const-cfoo-bar-const)

这条线的含义是什么？

```
virtual void Encode (KDataStream & stream) const; 
```

C++最后的const是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:41:11.887

这意味着——[通过引用传递](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:41:56.797

方法末尾的“const”表示方法实现不会更改任何成员变量的值。因此，通过在类接口本身中看到这一点（不必知道实现），对象的客户端可以知道这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:57:40.930

> 这条线的含义是什么？

```
virtual void Encode (KDataStream & stream) const; 
```

这是一个声明函数的语句。

`virtual`意味着它是一个成员函数，可以被具有相同名称和兼容参数的函数覆盖，并在派生自该类的类中声明返回类型。将根据调用它的对象的类型选择正确的版本（在运行时，如有必要）。

`void`意味着它不返回任何东西。

`Encode`是函数的名称。

`(`标记参数列表的开始。

`KDataStream`是第一个参数的类型。

`&`表示参数是通过引用传递的。

`stream`是赋予参数的名称；它用作文档，但可以在不改变含义的情况下从声明中省略。

`)`标记参数列表的结尾。

`const`意味着它是一个成员函数，不能修改调用它的对象的非静态、非可变数据成员。它还允许在声明的对象上调用它`const`。

`;`标记语句的结束。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T11:43:55.347

阅读指针，如果你想用 C++ 编写代码，你需要知道它们是如何工作的：

[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

& 表示您传递的是流的内存地址，而不是流的值

# android - 自己的 Broadcastreceiver 没有收到模拟 SMS_RECEIVED

> ID：11827539
> 
> 赞同：1
> 
> 时间：2012-08-06T11:40:14.820
> 
> 标签：android, broadcastreceiver

我目前正在研究一个分析 SMS_RECEIVED-Flow 的项目。

根据文章 [1]，我通过显式调用服务模拟了 SMS_RECEIVED-Broadcast `com.android.mms.transaction.SmsReceiverService`：。

问题是，Android-Emulator 和我的 Nexus 只将生成的 BroadcastReceiver 转发到默认的 SMS-App，我不知道为什么。

我试图在另一个应用程序中使用静态注册的接收器和动态注册的接收器（所有接收器都注册了最高优先级和正确的意图过滤器）来捕获广播。这两种方法都适用于普通短信，但不适用于我的模拟短信。

所以问题是，有人知道 SMS-Receive 机制是如何工作的，以及为什么我的程序不会收到任何广播。

[1] [http://blog.dev001.net/post/14085892020/android-generate-incoming-sms-from-within-your-app](http://blog.dev001.net/post/14085892020/android-generate-incoming-sms-from-within-your-app)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:49:50.740

SmsRecieverService 是默认消息传递应用程序的一部分，因此如果您明确调用此服务，则广播将仅到达该应用程序。由于 SMS_RECIEVED 广播是受保护的广播，因此您的应用无法广播它。

一种方法是在模拟器和您的应用程序中更改广播的名称。

# wpf - WPF 应用程序中的内存管理和性能改进

> ID：11827542
> 
> 赞同：0
> 
> 时间：2012-08-06T11:40:24.020
> 
> 标签：wpf, performance, memory

我们开发了一个 EMR 软件，在演示中使用 WPF，在业务层使用 .NET c# 库。WCF 服务调用用于服务器和客户端之间的通信。应用程序对所有页面和页面中的选项卡使用 WPF 用户控件。现在的问题是当用户加载页面和选项卡时，内存消耗会增加，并且在应用程序停止之前它不会减少。即使用户关闭旧页面，内存消耗也不会减少。随着用户加载更多页面并关闭它们，系统继续变慢。有时用户关闭应用程序并再次使用它。即使在那个时候，考虑到第一次加载性能，应用程序也会变慢。我该如何解决这种情况。它现在已成为应用程序的瓶颈。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:36:24.597

我使用[EQATEC](http://eqatec.com/Profiler/)分析器在 Silverlight、WPF 和 Windows Phone 中分析我的自定义控件。这真的很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:38:56.920

您必须使用内存分析器来找出代码的哪些部分保留了数据。搜索“.NET 内存分析器”。

# image-processing - 改进 MATLAB 中橙色的检测

> ID：11827554
> 
> 赞同：0
> 
> 时间：2012-08-06T11:41:17.140
> 
> 标签：image-processing, colors, detection

我的任务之一是从 16000 张图像中检测蚁群的一些颜色。所以，我已经在蓝色、粉色和绿色方面做得很好，但现在我需要改进对橙色的检测。这对我来说有点棘手，因为我是图像处理领域的新手。我举了一些例子，我做了什么，我的问题是什么。

原始图像：http://img705.imageshack.us/img705/2257/img4263u.jpg

橙色检测：http://img72.imageshack.us/img72/8197/orangedetection.jpg

绿色检测：http://img585.imageshack.us/img585/1347/greendetection.jpg

我使用 selectPixelsAndGetHSV.m 来获取 HSV 值，之后我使用 colorDetectHSV.m 来检测具有相同 HSV 值的像素。你能给我任何建议如何改进对橙色的检测而不是检测整个蚂蚁和它们周围的巢穴吗？

先感谢您！

```
function [K]=colorDetectHSV(RGB, hsvVal, tol)

HSV = rgb2hsv(RGB);

% find the difference between required and real H value:
diffH = abs(HSV(:,:,1) - hsvVal(1));

[M,N,t] = size(RGB);
I1 = zeros(M,N); I2 = zeros(M,N); I3 = zeros(M,N);

T1 = tol(1);

I1( find(diffH < T1) ) = 1;

if (length(tol)>1)
% find the difference between required and real S value:
diffS = abs(HSV(:,:,2) - hsvVal(2));
T2 = tol(2);
I2( find(diffS < T2) ) = 1;
if (length(tol)>2)
% find the difference between required and real V value:
difV = HSV(:,:,3) - hsvVal(3);
T3 = tol(3);
I3( find(diffS < T3) ) = 1;
I = I1.*I2.*I3;
else
I = I1.*I2;
end
else
I = I1;
end
K=~I;
subplot(2,1,1),
figure,imshow(RGB); title('Original Image');
subplot(2,1,2),
figure,imshow(~I,[]); title('Detected Areas'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:09:11.517

您没有显示您正在使用什么作为目标 HSV 值。这些可能是问题所在。

在您提供的示例中，许多区域被错误选择，其色调范围从 30 到 40。这些区域对应于蚂蚁的身体部位。您要选择的橙色部分实际上具有大约 7 到 15 的色调，应该不难将它们与蚂蚁区分开来。

尝试调整你的目标值（尤其是色调），你应该会得到更好的结果。实际上你也可以忽略亮度和饱和度，在这种情况下色调似乎就足够了。

# netbeans - Netbeans 关闭 ctrl+s 上的选项卡

> ID：11827563
> 
> 赞同：0
> 
> 时间：2012-08-06T11:42:02.407
> 
> 标签：netbeans

不确定这是否是我做错的事情，但是当我在其中执行`ctrl`+时，Netbeans 偶尔会关闭活动选项卡`s`。我一直在寻找一个设置，但找不到任何相关的东西。

有任何想法吗？

**产品版本：** NetBeans IDE 7.1.2（内部版本 201204101705）

**爪哇：** 1.6.0；Java HotSpot(TM) 客户端虚拟机 1.6.0-b105

**操作系统：**赢 7 64

谢谢！

# ios - iCloud 和核心数据错误（Ubiquity：没有从元数据 url 获取基线元数据）

> ID：11827565
> 
> 赞同：37
> 
> 时间：2012-08-06T11:42:08.697
> 
> 标签：ios, core-data, icloud

我在尝试让 iCloud 与我的应用程序一起工作时遇到了一些麻烦。[我尝试在此处](http://timroadley.com/2012/04/03/core-data-in-icloud/)遵循 Tim Roadley 的示例，但每当通过 Xcode 启动应用程序时，仍然会出现下面的日志（同步确实短暂工作，但现在已停止工作）。

```
[PFUbiquityBaseline metadataFromCurrentBaselineForStoreWithName:modelVersionHash:andUbiquityRootLocation:withError:](1091): 
CoreData: Ubiquity:  Didn't get baseline metadata back from metadata url:         
file://localhost/private/var/mobile/Library/Mobile%20Documents/<TEAM
ID>~samburnstone~Staff-Manager/Logs/.baseline/current.nosync/<TEAM 
ID>.samburnstone.StaffManager/g9TNo_uNFuNyltbjcAmDaFE7wl~6a2eGmW6uKIZCC1s=
/baseline.meta Error: (null) 
```

（TEAM ID 是我的字母数字字符序列，可以在 Apple 的会员中心找到）

如果有人知道可能导致这种情况的原因，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T01:48:30.020

检查以下是否适用于您的问题 - 它对我有帮助：http: [//mentalfaculty.tumblr.com/post/25241910449/under-the-sheets-with-icloud-and-core-data](http://mentalfaculty.tumblr.com/post/25241910449/under-the-sheets-with-icloud-and-core-data) 没有看到您的代码很难评论实际问题。

# c# - 递归过滤 Linq 到对象

> ID：11827569
> 
> 赞同：2
> 
> 时间：2012-08-06T11:42:31.757
> 
> 标签：c#, linq

是否可以使用 linq to objects 递归过滤递归树中的所有项目。

这是我正在使用的模型。这是另一个应用程序给我的

```
public class Menu
{
   public string Name{get;set;}
   public string Roles{get;set;}
   public List<Menu> Children{get;set;}
} 
```

当用户登录我的应用程序时，我需要根据菜单项中指定的角色检查用户角色。我知道我可以编写一个递归方法来检查这个使用 for 循环。

无论如何，我在那里使用'MenuList.Where（..检查角色）

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:49:17.050

我只是在`Menu`类中实现另一个方法：

```
public class Menu
{
    public string Name { get; set; }
    public string Roles { get; set; }
    public List<Menu> Children { get; set; }
    /// <summary>
    /// Checks whether this object or any of its children are in the specified role
    /// </summary>        
    public bool InRole(string role)
    {
        if (role == null)
        {
            throw new ArgumentNullException("role");
        }
        var inRole = (this.Roles ?? String.Empty).Contains(role);
        if (!inRole & Children != null)
        {
            return Children.Any(child => child.InRole(role));
        }
        return inRole;
    }
} 
```

然后您可以编写 LINQ 查询，例如：

```
var inRole = menuList.Where(menu => menu.InRole("admin")); 
```

它将递归地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T20:52:28.510

试试这个扩展方法：

```
public static IEnumerable<T> Flatten<T, R>(this IEnumerable<T> source, Func<T, R> recursion) where R : IEnumerable<T>
{
    return source.SelectMany(x => (recursion(x) != null && recursion(x).Any()) ? recursion(x).Flatten(recursion) : null)
                 .Where(x => x != null);
} 
```

你可以像这样使用它：

```
menu.Flatten(x => x.Children).Where(x => x.Roles.Contains(role)); 
```

# android - Android应用程序设计选择

> ID：11827570
> 
> 赞同：3
> 
> 时间：2012-08-06T11:42:33.430
> 
> 标签：android

我是android开发的新手。我想创建一个应用程序来打开与 LAN 中另一台设备的连接并发送/接收请求/响应。它就像一个[GMote](http://www.gmote.org/)应用程序。

我正在考虑创建一个服务来创建连接。我的活动必须使用此服务发送/接收。只要服务正在运行或设备在 LAN 范围内，连接就会保持打开状态。

这种方法是否存在任何性能问题，例如活动和服务之间的任何通信成本？我的应用程序中的某些操作可以在 200 毫秒延迟 2-4 秒后发送消息。

另一种方法是在活动中创建连接，但是每次活动开始时我都必须创建它。如果活动不在`focus`.

哪种方法最适合这种使用过的应用程序？

# c# - 创建多个面板并在wpf中单击按钮时显示一个面板

> ID：11827575
> 
> 赞同：0
> 
> 时间：2012-08-06T11:43:24.037
> 
> 标签：c#, wpf, visual-studio-2010

我是 WPF 新手，我想创建一个带有 5 个按钮的 WPF 应用程序。单击每个按钮时，我希望将内容显示在另一个面板上。现在，我只想在单击按钮时在右侧面板上显示不同的图像。

这是我的 XAML 代码：

```
<Window x:Class="GridButton.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MyFirstApp" Height="350" Width="525" Loaded="Window_Loaded">
<Viewbox Stretch="Fill" StretchDirection="Both">
<DockPanel>
    <StackPanel DockPanel.Dock="left" Margin="5" Width="Auto" VerticalAlignment="Center" Height="Auto">
        <Button  Content="1" Name="button2" Click="button2_Click">
       </Button>
        <Button Content="2" Name="button1" Click="button1_Click_1">
</Button>
        <Button Content="3" Name="button3"  Click="button3_Click">
          </Button>
        <Button Content="4" Name="button4" Margin="5">
          </Button>
        <Button Content="5" Name="button5" Margin="5" Click="button5_Click_1">
          </Button>
    </StackPanel>
        <StackPanel DockPanel.Dock="Right">
            <Image Name="img1" Source="Blue Hills.jpg" Stretch="Uniform" Visibility="Hidden" ImageFailed="Image_ImageFailed" Height="257" />

        </StackPanel>

</DockPanel> 
```

我的 xaml.cs 文件包含显示图像的代码：

```
private void button2_Click(object sender, RoutedEventArgs e)
{

    img1.Visibility = Visibility.Visible;
} 
```

我只能走到这一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:57:22.607

您可以在代码中设置控件的`Source`属性：`Image`

```
private void buttonx_Click(object sender, RoutedEventArgs e) 
{
    string path = ... // path to image file here
    img1.Source = new BitmapImage(new Uri(path));
} 
```

您可以轻松地为所有按钮重用相同的 Click 处理程序并检查按下了哪个按钮：

```
private void Button_Click(object sender, RoutedEventArgs e) 
{
    Button button = sender as Button;
    string path = null;
    if (button == button1)
    {
        path = ... // path to image file 1 here
    }
    else if ...

    if (path != null)
    {
        img1.Source = new BitmapImage(new Uri(path));
    }
} 
```

如果要从父面板中删除子面板（或其他控件）并添加另一个面板，则必须修改面板的[Children](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children)属性：

```
<StackPanel Name="parent">   
    <StackPanel Name="child" />   
</StackPanel>  

parent.Children.Remove(child);
parent.Children.Add(...); // some other control here 
```

如果您想动态创建子面板，这种方法通常是有意义的。如果您想在 XAML 中声明所有内容，您可以将所有子面板放在一个 Grid 中并像您已经做的那样更改它们的可见性。

但是，您也可以更改[ZIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.zindex)附加属性。

```
<Grid>
    <StackPanel Name="child1">
    </StackPanel>
    <StackPanel Name="child2">
    </StackPanel>
    <StackPanel Name="child3">
    </StackPanel>
</Grid> 
```

child3 默认情况下是最顶层的，但现在您可以设置`ZIndex`某个值 > 0 以使另一个子元素位于最顶层：

```
private void Button_Click(object sender, RoutedEventArgs e) 
{
    ...
    // reset ZIndex on previous topmost panel to 0 before
    Panel.SetZIndex(child1, 1);
} 
```

或者完全省略 Button/Grid/Panel 设计并使用[TabControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.aspx)。

# vba - 如何使用 Microsoft Access VBA 解码 .gz 文件？

> ID：11827578
> 
> 赞同：1
> 
> 时间：2012-08-06T11:43:38.420
> 
> 标签：vba, ms-access, gzip

我有一些需要使用 Access / VBA 读取的文件。它们使用“.gz”压缩进行压缩。我怎样才能读取这些文件？

我认为这一定是一个已解决的问题，但可惜找不到任何东西。命令行是一种选择，但它会涉及 VBA 应用程序的用户必须安装特定的工具。也许我可以包含一个库，然后我可以将它与我的 VBA 应用程序 (.accdr) 一起提供？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:47:17.570

周围有很多库，但是，可能最受欢迎的是[zlib](http://www.zlib.net)。使用 zlib 的一个很好的示例，尽管它是用 VB6 编写的（转换为 VBA 应该不会太难）位于[此处](http://www.vbaccelerator.com/home/VB/Code/Libraries/Compression/Compressing_and_Expanding_With_zLib/article.asp)。关于 zlib 的一个优点是它不需要注册（即`REGSVR*`），因此您应该能够将它放入与您的数据库相同的文件夹中（或者甚至将其嵌入到数据库中然后自动提取它）。

# php - 用ajax替换div内容

> ID：11827584
> 
> 赞同：0
> 
> 时间：2012-08-06T11:44:06.730
> 
> 标签：php, jquery, ajax

嘿，我有一个工作的 php 脚本，据我所知，我的 jquery ajax 函数模仿了我在 SO 上看到的任何东西，但不知何故，这不起作用。我发布了我的 HTML、php 和 js。有人可以帮我吗？我在这几天没有成功。

在提交时，页面似乎闪烁了一小段时间（刷新？），但没有任何反应。

HTML/js：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Trade diving equipment online at DiveBay</title>
<link rel="stylesheet" type="text/css" href="dbstylesheet.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
</script>
<script type="text/javascript">

$(document).ready(function(){
    %("#searchdivebay").submit(function(){

        var word = $("#searchbox").val();
        $.ajax({
            type: "GET",
            url: "trysearch.php",
            data: $("#searchdivebay").serialize(),
            context: '#content',
            success: function(data){                
                            $(this).html(data);
                    }
        });
    });

});
</script>
</head>

<body>
<center>
    <div id="wrapper">

        <div id="header">
            <div id="hbackground">
                <img src="db3.jpg" alt="hbackground" width="100%" height="100%" style="z-index:1;" />
                <div id="htitle">
                    <span class="banner">DIVEBAY.COM</span>
                    <span class="byline">GET INTO DIVING, TRADE DIVING EQUIPMENT ONLINE</span>      
                </div>
            </div>
        </div>

        <div id="searchandlog">
            <div id="search">
                <form id="searchdivebay" action="#" method="get">
                    <div id="searchboxholder"><input type="text" name="searchbox" id="searchbox" /></div>
                    <div id="searchbuttonholder"><input type="submit" name="searchbutton" id="searchbutton" value="Search DiveBay"/></div>
                </form>
            </div>
            <div id="login">
                <ul class="signreg">
                    <li><i>Existing user?</i><a href="divebaylogin.html">SIGN IN</a></li>
                    <li><i>or, new?</i><a href="createaccount.html">REGISTER</a></li>
                </ul>
            </div>
        </div>
        <div id="searchresults">Search results for <span id="searchword" class="word"></span></div>
        <div id="content">

        </div>
        <div id="sitemap">
        </div>
    </div>
</center>
</body>

</html> 
```

PHP：

```
<?php
echo '
<?xml version = "1.0" encoding = "utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>searchdbresults</title>
<link rel="stylesheet" type = "text/css" href = "styledb.css" />
</head>

<body>';

$user = 'root';
$pass = null;
$pdo = new PDO('mysql:host=localhost; dbname=divebay;', $user, $pass);

$search = $_GET['searchbox'];
if($search == ""){
    echo '<p style="color:black; font-size:18pt; font-family: Impact; "> You didn"t search for anything!</p>';
}
else{
try{
    $stmt = $pdo->prepare('SELECT * FROM auction WHERE name LIKE ?');
    $stmt->bindValue(1, '%'. trim($search) .'%');
    $stmt->execute();

    $numrows = 0;

    echo '<table id="showresult">';

    while($row = $stmt->fetch(PDO::FETCH_ASSOC)){
        $numrows++;
        $ID = $row['ID'];
        $img = $row['img'];
        $name = $row['name'];
        $owner = $row['owner'];
        $cprice = $row['cprice'];
        $iprice = $row['iprice'];
        $incprice = $row['incprice'];
        $etime = $row['etime'];

    echo '
    <tr class = "resultindex">
        <td class = "imgholder">' .$img. '</td>
        <td class = "infoholder">
            <div style ="height:4px;"></div>
            <div class = "infodiv">'.$name.'</div>
            <div class = "locdiv"></div>
            <div class = "userdiv"><span class="fromuser">From user: </span><br/>'.$owner.'</div>
        </td>
        <td style = "width:2px; background-color:#330066;"></td>
        <td class ="priceholder">
            <div class = "currentp"><span class="currentbid">Current Bid: </span><br/>'.$cprice.'</div>
            <div class = "instantp"><span class="instantbid">Instant Sale: </span><br/>'.$iprice.'</div>
            <div style = "height:5px;"></div>
            <div class = "incp"><span class="nextbid">Next Bid:</span><br/>'.$incprice.'</div>
        </td>
        <td style = "width:2px; background-color:#330066;"></td>
        <td class = "timer"><span class="timeleft">Time Left: </span><br/>'.$etime.'</td>
    </tr>';
    }
    if($numrows == 0){
        echo '
        <tr>
        <td colspan="4">Sorry your search for '.$search.' returned no results</td>
    </tr>';
    }
    else{
        echo '
        <tr>
        <td colspan="4">Displaying'.$numrows.'results</td>

    </tr>';
    $pdo = null;
    }
    }catch(PDOException $e){
        echo $e->getMessage();
    }
    }
    echo '
    </table>
</body>
</html>';

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:49:09.620

当您提交表单时，浏览器会加载一个新页面，从而创建一个全新的 JS 环境。

[防止默认事件](http://api.jquery.com/event.preventDefault/)。（事件对象是提交处理函数的第一个参数，您需要先捕获它，然后才能调用它的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:53:17.963

```
$(document).ready(function(){
    %("#searchdivebay").submit(function(e){

        var word = $("#searchbox").val();
        $.ajax({
            type: "GET",
            url: "trysearch.php",
            data: $("#searchdivebay").serialize(),
            context: '#content',
            success: function(data){                
                            $(this).html(data);
                    }
        });
    e.preventDefault();
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:53:35.140

您需要创建一个单独的 PHP 文件作为您的 Ajax 处理程序，它只返回应该在`content`搜索结果部分中出现的 HTML。

现在，您返回一个完整的 HTML 页面会破坏 DOM 的语义和结构。

您会看到闪烁，因为当您单击提交按钮时页面会自动刷新。您需要调用该`e.preventDefault()`方法来防止这种情况发生，或者`return false`在处理程序结束时调用`submit`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:56:58.943

除了所有其他答案之外，您似乎只需要从 php 文件加载内容，对吗？

您不需要整个 ajax 函数，只需使用[load()](http://api.jquery.com/load/)和 php 的路径作为字符串参数。这将加载您调用 load() 的 php 中回显的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:57:23.183

除了阻止默认注释之外，您的成功功能似乎没有正确更新 html。如果您想将搜索结果放入#searchresults div，那么您将希望您的成功函数为：

```
success: function(data){                
    $('#searchresults').html(data);
} 
```

# ios - UISearchBar 更改占位符颜色

> ID：11827585
> 
> 赞同：49
> 
> 时间：2012-08-06T11:44:25.533
> 
> 标签：ios, uisearchbar, placeholder

有没有人知道如何更改 UISearchBar 的占位符文本的文本颜色的任何想法或代码示例？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-07-02T10:02:14.787

使用`iOS5+`外观代理

```
[[UILabel appearanceWhenContainedIn:[UISearchBar class], nil] setTextColor:[UIColor redColor]]; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-13T16:55:22.353

[以编程方式从更改 UITextField 的占位符文本颜色](https://stackoverflow.com/questions/7331604/change-uitextfields-placeholder-text-color-programmatically)中找到答案

```
// Get the instance of the UITextField of the search bar
UITextField *searchField = [searchBar valueForKey:@"_searchField"];

// Change search bar text color
searchField.textColor = [UIColor redColor];

// Change the search bar placeholder text color
[searchField setValue:[UIColor blueColor] forKeyPath:@"_placeholderLabel.textColor"]; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-03T11:16:16.303

第一个解决方案还可以，但是如果您使用多个 UISearchBar，或者创建很多实例，它可能会失败。始终对我有用的一种解决方案是也使用外观代理，但直接在 UITextField

```
 NSDictionary *placeholderAttributes = @{
                                            NSForegroundColorAttributeName: [UIColor darkButtonColor],
                                            NSFontAttributeName: [UIFont fontWithName:@"HelveticaNeue" size:15],
                                            };

    NSAttributedString *attributedPlaceholder = [[NSAttributedString alloc] initWithString:self.searchBar.placeholder
                                                                                attributes:placeholderAttributes];

    [[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setAttributedPlaceholder:attributedPlaceholder]; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-06-25T12:28:51.383

这是 Swift 的解决方案：

**斯威夫特 2**

```
var textFieldInsideSearchBar = searchBar.valueForKey("searchField") as? UITextField
textFieldInsideSearchBar?.textColor = UIColor.whiteColor()

var textFieldInsideSearchBarLabel = textFieldInsideSearchBar!.valueForKey("placeholderLabel") as? UILabel
textFieldInsideSearchBarLabel?.textColor = UIColor.whiteColor() 
```

**斯威夫特 3**

```
let textFieldInsideSearchBar = searchBar.value(forKey: "searchField") as? UITextField
textFieldInsideSearchBar?.textColor = UIColor.white

let textFieldInsideSearchBarLabel = textFieldInsideSearchBar!.value(forKey: "placeholderLabel") as? UILabel
textFieldInsideSearchBarLabel?.textColor = UIColor.white 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-03-15T14:16:26.103

试试这个看看：（我用 Swift 4.1 - [Xcode 9.3-beta4](https://stackoverflow.com/questions/7047735/where-can-i-download-old-versions-of-xcode/46652775#46652775)测试了下面的代码）

```
@IBOutlet weak var sbSearchBar: UISearchBar!

if let textfield = sbSearchBar.value(forKey: "searchField") as? UITextField {

    textfield.backgroundColor = UIColor.yellow
    textfield.attributedPlaceholder = NSAttributedString(string: textfield.placeholder ?? "", attributes: [NSAttributedStringKey.foregroundColor : UIColor.red])

    textfield.textColor = UIColor.green

    if let leftView = textfield.leftView as? UIImageView {
        leftView.image = leftView.image?.withRenderingMode(.alwaysTemplate)
        leftView.tintColor = UIColor.red
    }
} 
```

这是结果：

[![在此处输入图像描述](../Images/b8610e272b3cb8fe949b348ab2fa7567.png)](https://i.stack.imgur.com/HkhXK.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-11-20T16:15:09.147

```
if let textFieldInsideSearchBar = searchBar.value(forKey: "searchField") as ? UITextField {
    textFieldInsideSearchBar ? .textColor = UIColor.white

    if let textFieldInsideSearchBarLabel = textFieldInsideSearchBar!.value(forKey: "placeholderLabel") as ? UILabel {
        textFieldInsideSearchBarLabel ? .textColor = UIColor.white

        if let clearButton = textFieldInsideSearchBar ? .value(forKey: "clearButton") as!UIButton {

            clearButton.setImage(clearButton.imageView ? .image ? .withRenderingMode(.alwaysTemplate),
                for : .normal)
            clearButton.tintColor = UIColor.white
        }
    }

    let glassIconView = textFieldInsideSearchBar ? .leftView as ? UIImageView

    glassIconView ? .image = glassIconView ? .image ? .withRenderingMode(.alwaysTemplate)
    glassIconView ? .tintColor = UIColor.white
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-02-27T10:01:07.990

斯威夫特 5 - **iOS 13**：

那些被卡住的人让我告诉你它**只会在 viewDidLayoutSubviews 中工作，而不是在 viewDidLoad**

```
override func viewDidLayoutSubviews() {

    setupSearchBar(searchBar: YourSearchBar)

}

    func setupSearchBar(searchBar : UISearchBar) {

    searchBar.setPlaceholderTextColorTo(color: UIColor.white)        

   }

extension UISearchBar
{
    func setPlaceholderTextColorTo(color: UIColor)
    {
        let textFieldInsideSearchBar = self.value(forKey: "searchField") as? UITextField
        textFieldInsideSearchBar?.textColor = color
        let textFieldInsideSearchBarLabel = textFieldInsideSearchBar!.value(forKey: "placeholderLabel") as? UILabel
        textFieldInsideSearchBarLabel?.textColor = color
    }
} 
```

快乐编码:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-11-15T06:16:31.340

看起来 Apple 不希望我们在`UISearchBar`课堂上使用占位符颜色。所以，让我们创建自己的占位符标签！

*   没有子类化。
*   适用于 iOS 13 SDK。
*   只是一种无辜的解决方法。

[![在此处输入图像描述](../Images/c5fbf91c0c2a4b16d524eb62b2be5906.png)](https://i.stack.imgur.com/yBcvD.png)

```
let searchBar = searchController.searchBar
// ...
// Configure `searchBar` if needed
// ...

let searchTextField: UITextField
if #available(iOS 13, *) {
    searchTextField = searchBar.searchTextField
} else {
    searchTextField = (searchBar.value(forKey: "searchField") as? UITextField) ?? UITextField()
}

// Since iOS 13 SDK, there is no accessor to get the placeholder label.
// This is the only workaround that might cause issued during the review.
if let systemPlaceholderLabel = searchTextField.value(forKey: "placeholderLabel") as? UILabel {
    // Empty or `nil` strings cause placeholder label to be hidden by the search bar
    searchBar.placeholder = " "

    // Create our own placeholder label
    let placeholderLabel = UILabel(frame: .zero)

    placeholderLabel.text = "Search"
    placeholderLabel.font = UIFont.systemFont(ofSize: 17.0, weight: .regular)
    placeholderLabel.textColor = UIColor.blue.withAlphaComponent(0.5)

    systemPlaceholderLabel.addSubview(placeholderLabel)

    // Layout label to be a "new" placeholder
    placeholderLabel.leadingAnchor.constraint(equalTo: systemPlaceholderLabel.leadingAnchor).isActive = true
    placeholderLabel.topAnchor.constraint(equalTo: systemPlaceholderLabel.topAnchor).isActive = true
    placeholderLabel.bottomAnchor.constraint(equalTo: systemPlaceholderLabel.bottomAnchor).isActive = true
    placeholderLabel.translatesAutoresizingMaskIntoConstraints = false
    placeholderLabel.setContentCompressionResistancePriority(.defaultHigh, for: .horizontal)
} else {
    searchBar.placeholder = ""
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-02-01T18:27:06.247

斯威夫特 3

```
UILabel.appearance(whenContainedInInstancesOf: [UISearchBar.self]).textColor = UIColor.white 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-10-23T08:07:51.460

iOS 13

以前的解决方案可能不适用于 iOS 13，因为添加了新的 searchTextField，您可以在其上设置属性字符串。

我将其包装为类别：

```
@interface UISearchBar (AttributtedSetter)
- (void)setThemedPlaceholder:(NSString*)localizationKey;
@end

@implementation UISearchBar (AttributtedSetter)

- (void)setThemedPlaceholder:(NSString*)localizationKey {
    ThemeObject *currentTheme = [[ThemeManager standardThemeManager] currentTheme];
    self.searchTextField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:NSLocalizedString(localizationKey, @"") attributes:@{NSForegroundColorAttributeName : currentTheme.colorSearchBarText}];
}

@end 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-03-01T00:19:14.837

### iOS 13

**使用自定义搜索栏子类。**

这也适用于(with )`UISearchController`内的 a 的一部分。`UINavigationItem``hidesSearchBarWhenScrolling = true`

我们希望在应用代理后立即应用我们的更改，`UIAppearance`因为这些是最可能的根本原因：

```
class MySearchBar : UISearchBar {
    // Appearance proxies are applied when a view is added to a view hierarchy, so apply your tweaks after that:
    override func didMoveToSuperview() {
        super.didMoveToSuperview() // important! - system colors will not apply correctly on ios 11-12 without this

        let placeholderColor = UIColor.white.withAlphaComponent(0.75)
        let placeholderAttributes = [NSAttributedString.Key.foregroundColor : placeholderColor]
        let attributedPlaceholder = NSAttributedString(string: "My custom placeholder", attributes: placeholderAttributes)
        self.searchTextField.attributedPlaceholder = attributedPlaceholder

        // Make the magnifying glass the same color
        (self.searchTextField.leftView as? UIImageView)?.tintColor = placeholderColor
    }
}

// Override `searchBar` as per the documentation
private class MySearchController : UISearchController {
    private lazy var customSearchBar = MySearchBar()
    override var searchBar: UISearchBar { customSearchBar }
} 
```

这需要相当长的时间才能正常工作......

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-11-02T09:33:38.993

从 iOS 13.0 开始很容易，您可以简单地使用搜索栏的**searchTextField**属性来更新占位符的属性属性。

```
self.searchController.searchBar.searchTextField.attributedPlaceholder =  NSAttributedString.init(string: "Search anything...", attributes: [NSAttributedString.Key.foregroundColor:UIColor.red]) 
```

一条线解决方案

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-01-26T14:29:04.283

试试这个：

```
[self.searchBar setValue:[UIColor whatever] forKeyPath:@"_searchField._placeholderLabel.textColor"]; 
```

您也可以在情节提要中进行设置，选择搜索栏，在用户定义的运行时属性下添加条目：

```
_searchField._placeholderLabel.textColor 
```

类型**颜色**并选择您需要的颜色。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-14T18:45:42.730

在**IOS 13上为我工作**

```
searchBar.searchTextField.attributedPlaceholder = NSAttributedString(
    string: "Search something blabla",
    attributes: [.foregroundColor: UIColor.red]
) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-19T05:38:22.100

在调查了几个答案后，我出来了，希望对您有所帮助

```
for (UIView *subview in searchBar.subviews) {
    for (UIView *sv in subview.subviews) {
        if ([NSStringFromClass([sv class]) isEqualToString:@"UISearchBarTextField"]) {

            if ([sv respondsToSelector:@selector(setAttributedPlaceholder:)]) {
                ((UITextField *)sv).attributedPlaceholder = [[NSAttributedString alloc] initWithString:searchBar.placeholder attributes:@{NSForegroundColorAttributeName: [UIColor whiteColor]}];
            }
            break;
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-24T10:43:00.233

此解决方案适用于 Xcode 8.2.1。使用 Swift 3.0。：

```
extension UISearchBar
{
    func setPlaceholderTextColorTo(color: UIColor)
    {
        let textFieldInsideSearchBar = self.value(forKey: "searchField") as? UITextField
        textFieldInsideSearchBar?.textColor = color
        let textFieldInsideSearchBarLabel = textFieldInsideSearchBar!.value(forKey: "placeholderLabel") as? UILabel
        textFieldInsideSearchBarLabel?.textColor = color
    }
} 
```

使用示例：

```
searchController.searchBar.setPlaceholderTextColorTo(color: mainColor) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2017-06-02T12:51:54.607

这是一个老问题，但对于现在遇到这个问题的人来说，您可以使用以下命令更改**iOS 8.x - 10.3**上的搜索图标：

```
[_searchBar setImage:[UIImage imageNamed:@"your-image-name"] forSearchBarIcon:UISearchBarIconSearch state:UIControlStateNormal]; 
```

关于占位符文本颜色，您可以查看我的另一个答案，它使用类别，在这里：[UISearchBar change placeholder color](https://stackoverflow.com/questions/11827585/uisearchbar-change-placeholder-color/44329361#44329361)

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2012-08-06T13:24:04.983

试试这个：

```
 UITextField *searchField = [searchbar valueForKey:@"_searchField"];
  field.textColor = [UIColor redColor]; //You can put any color here. 
```

# c# - sqlbulkcopy：数据被截断

> ID：11827588
> 
> 赞同：0
> 
> 时间：2012-08-06T11:44:35.443
> 
> 标签：c#, sql-server, sqlbulkcopy

当我从 csv 插入数据时；描述列数据被截断，长度为 255。

尝试描述 varchar(max)、nvarchar(max)、text 等的数据类型。

我的代码

```
string CsvConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" +filelocation +"; Extended Properties=\"text;HDR=Yes;FMT=Delimited\"";             
using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
{
    OleDbCommand command = new OleDbCommand("Select * FROM ["+filename+"]", connection);
    connection.Open();               
    using (DbDataReader dr = command.ExecuteReader())
    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
    {                       
        bulkCopy.ColumnMappings.Add(new SqlBulkCopyColumnMapping("description", "description")); 
        bulkCopy.DestinationTableName = "Table1";               
        bulkCopy.WriteToServer(dr);                        
    }       
} 
```

VS2010, C# SQL2008 R2 10.50 Express

请建议是否有其他方法可以将数据从 CSV 插入 SQL Server

# javascript - JavaScript 中的自调用函数

> ID：11827597
> 
> 赞同：1
> 
> 时间：2012-08-06T11:44:59.340
> 
> 标签：javascript, self-invoking-function

我有一个像这样的自调用函数：

```
var f = (function f(){ return "123"; }, 
         function g(){ return 2; },
         function h(){ return "test"; })();

typeof f; 
```

`typeof f`始终是最后一个函数定义中返回的类型。就像如果`h`是最后一个，那么它是`"string"`，但如果我删除`h`并拥有`g`最后一个，那么`"number"`。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T11:46:50.980

`,`因为函数是用逗号分隔的。

这将评估分隔的表达式，并返回*最后一个*表达式的结果。

```
var x = ("a", "b", "c");

console.log(x); // "c" 
```

因此，在您的情况下，作为封闭`()`组的结果返回最后一个函数，这就是尾随`()`函数调用所调用的函数。

```
 // result from group---v   v---invoked
var f = (func1, func2, func3)() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:48:41.767

让我们分解一下。

Javascript 中的逗号运算符计算多个表达式，并返回最后一个：

```
>>> "a", 1
1
>>> 1, "a"
"a" 
```

因此，当您使用三个匿名函数并用逗号将它们串在一起时，它的计算结果为最后一个：

```
>>> (function f(){ return "123"; }, function g(){ return 2; }, function h(){ return "test"; })
function h(){ return "test"; } 
```

评估该结果执行函数，返回`"test"`.

逗号分隔列表中最后一个函数将被执行，并决定整体返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:00:40.107

`comma`运算符返回最后一项。你在做什么就像：

```
var f = function(){}, function(){}, "string"; 
```

这将产生`f`一个字符串，因为只有最后一个函数被调用。

# iphone - 如何在本机按钮单击的 UIWebview 中注入 javascript

> ID：11827599
> 
> 赞同：0
> 
> 时间：2012-08-06T11:45:02.167
> 
> 标签：iphone, ipad

```
 script =@"<HTML>\n"
    "<HEAD>\n"
    "<TITLE></TITLE>\n"
    "<script language=\"javascript\">\n"
    "function openQuote(){\n"
      "  quoteForm.submit();}\n"
    "</script>\n"
   "</HEAD>\n"
    "<BODY>\n"
    "<form name=\"quoteForm\" url=\"http://localHost/Pages/CaseManagement.aspx?Page=CaseActivity\">\n"
    //    <input type="text" id="caseID" value="CA0S491"/>
   " </form>\n"
   " <input type=\"button\" onClick=\"openQuote();\" value=\"Click Me\"/>\n"
    "</BODY>"
   " </HTML>\n";

    I need to inject javascript on native button click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:02:38.700

[webView stringByEvaluatingJavaScriptFromString:script];

# android - 除了适配器中的第一个值之外，在微调器上显示初始值？

> ID：11827602
> 
> 赞同：0
> 
> 时间：2012-08-06T11:45:13.047
> 
> 标签：android

我必须显示一个微调器，它在运行时从适配器获取其内容。当微调器出现在屏幕上时选择一个值应该出现在它上面而不是适配器中的第一个值。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:49:29.187

如果您希望选择集合中的特定项目，请查看： [Spinner.setSelection(int position)](http://developer.android.com/reference/android/widget/AbsSpinner.html#setSelection%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:54:18.720

然后，您必须在字符串数组的第一个位置添加该文本。

```
 Spinner rangeSpinner = (Spinner)findViewById(R.id.rangeSpinner);
   String[] items = new String[] {"Select Product","Bread","Milk"};
   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.custom_spinner_textview_layout, items);
   adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
   rangeSpinner.setAdapter(adapter); 
```

## custom_spinner_textview_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <TextView 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/spinnerTarget"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="18.0sp"
        android:textColor="@color/grey_text"
        android:gravity="left"/> 
```

![在此处输入图像描述](../Images/0b09988dd64b1646cb055c2d9c8115fb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T05:20:36.027

****星期五试试吧……****

## 1.String[] _Purchesedlistarray = { "必需", "已购买" };

2.ArrayAdapter Purchesedadapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, _Purchesedlistarray); Purchesedadapter .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

## _PurchesedSpinner.setAdapter(Purchesedadapter);

3._PurchesedSpinner .setOnItemSelectedListener(new OnItemSelectedListener() {

```
 @Override
                public void onItemSelected(AdapterView<?> parent,
                        View view, int position, long id) {
                    // TODO Auto-generated method stub

                    Appsconstent._Purchesed = parent.getItemAtPosition(
                            position).toString();
                    System.out.println("the Value is--------------->"
                            + Appsconstent._Purchesed);
                }

                @Override
                public void onNothingSelected(AdapterView<?> parent) {
                    // TODO Auto-generated method stub
                }
            }); 
```

# objective-c - 在 Objective C 中，是否可以将一个变量“连接”到另一个变量？

> ID：11827604
> 
> 赞同：1
> 
> 时间：2012-08-06T11:45:24.800
> 
> 标签：objective-c, variables, int

我有一个“int i = 0;”，还有一个“int b;” 我希望将变量“b”设置为应用程序的 durainder 的任何值“i”。所以一开始，“b”会被设置为“i”，所以“b”会是0。但是如果“i”在应用程序中突然发生变化，我希望“b”自动设置为“i”是。

注意：我以整数为例，我实际上是在为 NSStrings 询问这些问题如果您不理解问题，请发表评论！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:50:22.233

`int`s 是 C 的整数类型——它们不是 Objective-C 特有的。所以你可以通过将 ba 指针指向 i 来实现你想要的。例如

```
int i = 0;
int *b;
b = &i;

NSLog(@"value is currently %d", *b);

i = 2;

NSLog(@"value is now %d", *b); 
```

这在 C 中意味着它`i`是一个整数，并且`b`是一个整数地址的容器。`&i`计算为`i`so的地址`b = &i;`意味着“将 i 的地址放入 b”。`*b`表示“包含在 b 中的地址处的事物的值”（与`b`“存储在 b 中的地址”相反）。

不再存在`*b`时将变为无效访问。`i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:51:08.637

您想要的行为类似于全局变量。在这种情况下，每当您更改 I 的值时，您也会更改 B 的值。但也许您可以通过通知（事件）解决您的问题，但我不确定。

# python - 如何在 django 生产服务器中执行 cProfile

> ID：11827606
> 
> 赞同：0
> 
> 时间：2012-08-06T11:45:31.323
> 
> 标签：python, django, cprofile

我想在生产环境中监视我在 Django 应用程序中的视图。所以，我遇到了我在本地环境中测试的解决方案[脚本。工作正常！！。](http://djangosnippets.org/snippets/2126/)

**当我使用生产环境时，由于 debug=True**，我遇到了 Unhandled Exception 的问题。我也在本地环境中使用了 debug=True（由 django 服务器提供静态）。

是否可以使用上面的链接[中间件](http://djangosnippets.org/snippets/2126/)来访问相应django视图的hotshot？

你能帮我做一下 django 生产服务器链接中提到的 hotshot 或 cProfile 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:48:57.477

您发布的中间件应该可以在生产中正常工作 -*注意*顶部评论中的说明：

> 如果您以超级用户身份登录，或者当 settings.DEBUG 为 True 时，它​​始终处于活动状态。

因此，请确保您以超级用户身份登录。

也就是说，我个人对这些 cProfile 中间件解决方案的运气并不好。自己运行 cProfile 非常容易（使用`cprofile.run()`），您可以[使用 KCacheGrind 查看输出](https://stackoverflow.com/questions/1896032/using-cprofile-results-with-kcachegrind)

# php - 通过 add.php (Facebook) 添加页面后，如何将用户重定向到自定义 URL

> ID：11827607
> 
> 赞同：0
> 
> 时间：2012-08-06T11:45:34.220
> 
> 标签：php, javascript, jquery, facebook, facebook-page

通过 add.php 添加用户后，如何将用户重定向到刚刚添加的页面？

假设我的网址看起来像：[http ://www.facebook.com/add.php?api_key=API_KEY&pages=1](http://www.facebook.com/add.php?api_key=API_KEY&pages=1)

从选择框中选择页面并单击“添加 MY_APP_NAME”后，用户将被重定向到页面的墙壁，而不是新添加的 MY_APP。

**注意**

我在这里知道很多这类问题，但我没有找到任何解决方案来解释为什么我再次把这个问题放在这里......绝对感谢帮助

**试过了**

我用Javascript这样尝试过自己，但严重没有成功

```
<script>
if (window == top) {
  top.location.href = 'https://apps.facebook.com/abc/' + document.location.href.replace(/https?:\/\/[^/]*\/?/, '');
}
function addToPage(page_id){
   top.location.href = 'http://facebook.com/add.php?api_key=<?php echo C_APP_ID; ?>&pages&perms=publish_stream&page='+page_id;
}
</script> 
```

**看图片**

![在此处输入图像描述](../Images/f1ae7dfd06a16ebd7b7d36ae0b689a8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:56:55.847

```
https://www.facebook.com/dialog/pagetab？  
  app_id=APP_ID&
  显示=弹出&
  下一个=https://facebook.com

```

使用此替代方法，您可以指定在与对话框交互后重定向到的 URL，以在`next`参数中将应用程序添加到您的页面。

您可以尝试将该参数添加到您的请求中。

`next`该参数的其他可能替代方案是 -

*   `redirect_url`
*   `redirect_uri`

在处理重定向用户时，两者都在其他地方使用 - 也许其中一个也会为您提供帮助......

# html - 固定的数据位置在 BlackBerry 中使用 jquery mobile 不起作用

> ID：11827622
> 
> 赞同：1
> 
> 时间：2012-08-06T11:46:20.213
> 
> 标签：html, jquery-mobile, web

当我尝试使用固定数据位置将页眉和页脚固定在移动设备上时，它似乎在 android 设备上工作，但在黑莓上却不行。

使用固定在黑莓上的数据位置时，页眉和页脚会消失，而在其他平台上则可以正常工作。

```
 <div data-role="header" data-position="fixed">
        <h1>Fixed Header!</h1>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:48:48.667

我工作我们需要添加到 css

```
[data-role=footer]{bottom:0;right:0;top:auto! important ;position:absolute !important; } 
[data-role=header]{top:0; position:absolute !important; bottom: auto !important;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-11T22:19:32.093

只需`data-tap-toggle="false"`在标题中添加此数据属性。

```
<header data-role="header" data-position="fixed" data-tap-toggle="false"> 
```

[文档](http://demos.jquerymobile.com/1.2.1/docs/toolbars/bars-fixed-options.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:42:30.463

你有什么黑莓设备？在 Jquery Mobile 中，固定工具栏仅在支持固定定位的设备上固定在顶部。

[文档](http://jquerymobile.com/demos/1.1.1/docs/toolbars/bars-fixed.html)说固定工具栏应该在“大多数桌面浏览器、iOS5+、Android 2.2+、BlackBerry 6 等”上工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:45:47.117

在我的 Android 手机（带有 Android 2.3.3 的 Galaxy S）上，他们的演示页面固定页脚和页眉根本不起作用 - 只要我尝试滚动它们就会跟着我移动，然后重新贴上自己。如果我只是触摸屏幕，它们就会消失，如果我再次触摸屏幕，它们就会重新出现！

[从 jquerymobile.com 检查此文档](http://jquerymobile.com/demos/1.2.0-alpha.1/#/demos/1.2.0-alpha.1/docs/toolbars/bars-fixed.html)。

演示的 1.1.1 版本也是如此。该演示在我桌面上的 Chrome 浏览器中运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T09:58:18.080

最简单的方法是从视口中删除 user-scalable=no 并设置

```
minimum-scale=1.0
maximum-scale=1.0 
```

更多关于这个问题在这里 [http://wil.to/android-positioning/](http://wil.to/android-positioning/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-09T02:01:53.207

这是 android 中的一个功能，可能还有其他浏览器，用于清除页眉和页脚元素，允许全屏显示页面，它应该会发生。

# extjs - 不通过开始，限制进入下一页

> ID：11827623
> 
> 赞同：0
> 
> 时间：2012-08-06T11:46:23.540
> 
> 标签：extjs

有没有办法在不传递起始值和限制值的情况下转到 extjs 仪表板中的下一页...？我对现有功能有一些问题。请建议我任何解决方案。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:48:47.210

您检查您有多少记录，如果每页的 pagenumber x 个项目高于您不显示“下一步”按钮的结果。

# android - webview使用自定义字体后

> ID：11827628
> 
> 赞同：0
> 
> 时间：2012-08-06T11:46:50.480
> 
> 标签：android, css, fonts, webview

我目前正在开发一个安卓网络浏览器。有一些页面使用了维吾尔文等其他字符，显示不正常，所以我使用以下代码解决了这个问题。

```
 String htmlStr = getHTML(url, "UTF-8");//get the html content from the url

    String tmp="<link href=\"file:///android_asset/myfont.css\" rel=\"stylesheet\" type=\"text/css\" />";

    if(htmlStr.contains("</head>")){
        htmlStr = htmlStr.replace("</head>", tmp);//add my css into the page
    }

mCurrentWebView.loadDataWithBaseURL(url, htmlStr,"text/html", "utf-8", "");//display the page content 
```

这是myfont.css：</p>

```
@font-face { font-family: MyCustomFont; src: url("fonts/ALPEKRAN.TTF") }
body {font-family: MyCustomFont, Verdana, Arial, sans-serif; text-align:right;} 
```

ALPEKRAN.TTF 字体位于 assets/fonts/ 文件夹下。

但是还有另一个问题，例如页面 css 丢失。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:57:20.523

可能您需要指定完整的字体网址，请尝试：

`src: url("file:///android_asset/fonts/ALPEKRAN.TTF")`

# c++ - 访问指向类的指针向量中的元素？

> ID：11827629
> 
> 赞同：0
> 
> 时间：2012-08-06T11:46:57.083
> 
> 标签：c++, class, vector

我有一个包含指向多个类的指针的向量。类定义如下：

```
class trackerSocket{
public:
    ~trackerSocket();

    int trackerInitialize(string address);
    int trackerSend(string getParams);
    int trackerRecv();

    be_node *responseDict;
    bool working;
    unsigned int interval;
    string trackerid;
    unsigned int complete;
    unsigned int incomplete;
    be_dict *peersDict;
    string peersBinary;
    bool dictionary;

private:
    string address;
    string port;
    string protocol;
    string page;
    SOCKET ConnectSocket;

    int parseAnnounce(string announce);
    int parseTrackerResponse(string response);
}; 
```

向量由这一行声明：

```
vector<trackerSocket*> trackers; 
```

并使用以下行将类添加到向量中：

```
trackerSocket *temptracker = new trackerSocket();
//Initialize values in temptracker structure here (omitted)
trackers.push_back(temptracker);
//Reset temptracker
temptracker = new trackerSocket();
//Initialize values in temptracker structure here (omitted)
trackers.push_back(temptracker);
//Repeat 
```

如何访问向量中每个类的工作变量？即使我知道某些类已将其设置为 true，以下代码也根本无法打印。

```
for(i = 0; i < trackers.size(); i++){
    if(trackers[i]->working){
        printf("Working.\n");
    }
} 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:51:17.093

尝试切换分配内存的行和使用 push_back() 的行。插入可能会使 std::vector 中的指针无效。

[指向 std::vector 和 std::list 元素的指针](https://stackoverflow.com/questions/3287801/pointers-to-elements-of-stdvector-and-stdlist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:14:03.323

如果认为问题可能在执行类实例初始化的范围内。据我所知，实例，因此它们的成员在命名空间、静态和全局范围内由零值初始化，如果您在此范围之一上创建对象实例，这可能导致该文件的工作在默认值“0”下初始化，并且我不知道为什么

```
for(i = 0; i < trackers.size(); i++){
    if(trackers[i]->working){
        printf("Working.\n");
    }
} 
not working as you expect. If so I offer you to use default constructor. 
```

# jquery - 使用 jquery 插入手风琴点击功能时切换代码不起作用

> ID：11827631
> 
> 赞同：0
> 
> 时间：2012-08-06T11:46:59.607
> 
> 标签：jquery, html, toggle, accordion, slidetoggle

这是我之前的问题“[使用 jquery 切换手风琴内的按钮](https://stackoverflow.com/questions/11822485/toggle-button-inside-accordian-using-jquery)”的后续问题，虽然我的问题得到了答复（我已经修复了我的代码以反映相同），但代码仍然无法正常工作。

我正在使用 ajax 调用在手风琴中动态获取内容。我试图将代码放在手风琴点击功能中。但我无法切换内容。当我打开手风琴选项时，我仍然可以看到内容。有什么建议吗？

我确实检查了萤火虫，当我点击手风琴时，它确实会隐藏片段。当我单击隐藏按钮时，它会执行切换语句。但我仍然可以看到内容。（应该是隐藏的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:29:58.590

谢谢大家的意见。我想到了。这是我的拼写错误，一旦修复了它的工作，我就没有将类测试声明为 div。

# android - 谷歌示例中的片段错误？

> ID：11827632
> 
> 赞同：1
> 
> 时间：2012-08-06T11:47:15.807
> 
> 标签：android

我尝试使用此处的示例切换片段：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

但它不起作用：

```
Fragment newFragment = new ExampleFragment();
        android.app.FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(android.R.id.content, newFragment);
        transaction.addToBackStack(null);
        transaction.commit(); 
```

我得到错误：

```
The method replace(int, Fragment) in the type FragmentTransaction is not applicable for the arguments (int, Fragment) 
```

所以我解决了这个问题：

```
android.app.Fragment newFragment = new ExampleFragment();
        android.app.FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(android.R.id.content, newFragment);
        transaction.addToBackStack(null);
        transaction.commit(); 
```

并得到另一个错误，说 ExampleFragment 的类型错误，所以我将其更改为：

```
 ExampleFragment newFragment = new ExampleFragment();
        android.app.FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(android.R.id.content, newFragment);
        transaction.addToBackStack(null);
        transaction.commit(); 
```

这一切都在循环中循环，解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:52:51.293

您需要将支持库添加到项目中。那应该可以解决您的问题。撤消您所做的代码更改...并在 Eclipse 中，右键单击（或根据您的机器单击选项）项目，然后转到 Android 工具 > 添加支持库...

清理并重建项目...应该修复所有错误。

# java - Java Servlet：java.lang.ClassNotFoundException：org.json.simple.parser.ParseException

> ID：11827634
> 
> 赞同：2
> 
> 时间：2012-08-06T11:47:23.130
> 
> 标签：java, android, servlets, push-notification

我正在为 android 实现 Google Cloud Messaging 服务。我创建了一个向应用程序用户发送推送通知的测试服务器。但是我创建的服务器正在生成以下错误。我在服务器端使用 Java Servlet，并在项目中包含了 gcm-server.jar 文件。

我尝试使用以下 jar 文件
1\. json-simple-1.1.jar
2\. json-simple-1.1.1.jar
即使遇到相同的错误。

这是错误报告

```
SEVERE: Servlet.service() for servlet HelloWorld threw exception
java.lang.ClassNotFoundException: org.json.simple.parser.ParseException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at com.GCM.servlets.HelloWorld.SendMessage(HelloWorld.java:48)
at com.GCM.servlets.HelloWorld.doPost(HelloWorld.java:41)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T11:59:57.440

json-simple-1.1.jar 应该出现在部署到 Tomcat 中的 Web 应用程序的 WEB-INF/lib 文件夹中。请参阅[http://java.sun.com/j2ee/verified/packaging.html#mechs](http://java.sun.com/j2ee/verified/packaging.html#mechs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T09:33:17.033

json-simple-1.1.jar 在我的类路径中有两次。删除了一个实例并修复了问题。

# c# - 从 UI 线程以外的线程更新绑定到 ComboBox 的 BindingLIst

> ID：11827637
> 
> 赞同：0
> 
> 时间：2012-08-06T11:47:27.410
> 
> 标签：c#, wpf, thread-safety, bindinglist

我正在尝试在我的 WPF 应用程序中绑定一些控件`BindingList`。`ComboBox`但是，My`BindingList`是从 UI 线程以外的其他线程更新的。

我做了一个模型。您所需要的只是新的空项目，其中包含对 WindowsBase、PresentationCore、PresentationFramework、System.Xaml 的引用（或者只是将其放入预定义的 WPF 窗口中）。

```
using System;
using System.ComponentModel;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

public class MainWindow : Window
{
    [STAThread]
    public static void Main()
    {
        new MainWindow().ShowDialog();
    }

    public MainWindow()
    {
        BindingList<string> list = new BindingList<string>();
        ComboBox cb = new ComboBox();
        cb.SetBinding(ComboBox.ItemsSourceProperty, new Binding() { Source = list });
        this.Content = cb;
        list.Add("Goop");
        new Thread(() =>
        {
            list.Add("Zoop");
        }).Start();
    }
} 
```

在行中`Goop`，一切正常。但是，当它到达这`Zoop`条线时，它会抛出一个异常：

> 这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

在实际项目中，我无法将其`list.Add`移至 UI 线程，并且我想保留 Binding 问题。如何解决？我可以转移到其他“列表”而不是`BindingList`. 我尝试过简单`List<string>`但更糟糕的是：当我添加新项目时它根本不会更新。

**编辑**

实际上，添加线程知道列表，但不知道 WPF 窗口。该列表在具有内部工作的类中，GUI 检查并查看该类。所以，不`Add`应该知道GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:56:19.717

UI 线程被锁定。然后你必须在一个特殊的函数中给它你的数据。 [MSDN 开始调用](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)

通过使用 ：

```
BeginInvok(()=>{ // Your stuff}); 
```

您将要求 UI 尽快更新您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:04:47.053

试试这个 ，

```
 new Thread(() =>
  {
      if (cb.Dispatcher.CheckAccess())
        {
           list.Add("Zoop");
        }
      else
       {
        cb.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal,
                new Action(delegate 
                         {
                           list.Add("Zoop");
                         }
       ));
       }
  }).Start(); 
```

希望这可以帮助

# php - Actionscript - php 没有运行 URLLoader.load(new URLRequest("i.php"));

> ID：11827640
> 
> 赞同：1
> 
> 时间：2012-08-06T11:47:50.540
> 
> 标签：php, flash, actionscript, urlloader, urlrequest

我有一个动作脚本代码应该运行一个 php 脚本，为了确保错误不在它上，而是在 AS 代码上，我已经简化为创建一个纯文本文件。在应该调用 php 脚本的行之后，我调用了“trace”以确保该行运行。鉴于此，看起来像“脚本正在运行”，但没有新文件。

这是重要的代码：

作为

```
const iURL:String = "i.php";
var myLoader:URLLoader = new URLLoader();
myLoader.load(new URLRequest(iURL)); 
```

php

```
$ourFileName = "playlistTEST.xml";
$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
fwrite($ourFileHandle,"CREATED");
fclose($ourFileHandle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:55:23.090

您可以尝试在您的 AS 代码上添加 event.complete

```
var myRequest:URLRequest = new URLRequest("http:// ... /i.php");
myLoader = new URLLoader();
myLoader.addEventListener(Event.COMPLETE, onLoad);
myLoader.load(myRequest);

function onLoad(evt:Event):void
{
    trace(myLoader.data);
} 
```

您还通过浏览器打开了php文件吗？在使用 AS 调用它之前，您可能应该先对其进行测试。

请记住，AS 使用的是普通的 HTTP 请求方式，所以结果和在浏览器中打开时是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:19:44.323

参考以下代码。

```
var urlRequest:URLRequest = new URLRequest("http://...php");
urlRequest.method = URLRequestMethod.GET;

var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.addEventListener(Event.COMPLETE, onCompleteHandler);
loader.load(urlRequest);

function onCompleteHandler(e:Event)
{

} 
```

# java - java计算的意外结果

> ID：11827641
> 
> 赞同：4
> 
> 时间：2012-08-06T11:47:54.133
> 
> 标签：java

为什么下面的代码：

`System.out.println((int)(19.99 * 100));`

产生结果“1998”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T11:51:42.933

舍入错误。如果您在没有演员表的情况下查看计算结果，您会得到：

```
1998.9999999999998 
```

So when you cast to int, the decimal part is dropped, not rounded up, and you get 1998.

The moral is, if you need an exact answer, don't use float / double at all. If you're talking about a discrete value like money, use int and deal with the atomic unit (eg. pence.) If you do need exact decimals, then `BigDecimal` is your friend.

While you can bodge the result here using `Math.round()` to bring the result to where it's expected, this won't work in all cases and fails to address the underlying issue.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T11:50:23.177

这是因为 19.99 无法准确表示。

```
System.out.println(new BigDecimal(19.99)); 
```

打印 this 实际表示的值，该值最接近它可以表示的 19.99。

```
19.989999999999998436805981327779591083526611328125 
```

并且`19.99 * 100`是

```
System.out.println(new BigDecimal(19.99 * 100)); 
```

这是

```
1998.999999999999772626324556767940521240234375 
```

问题是您在 19.99 中有一个表示错误，当乘以 100 时仍然存在，您会得到一个稍微太小的数字。

如果你乘以 100 并向**下取整**，`(int)`那么你应该期望得到 1998 年。

另一种选择是

```
System.out.println(Math.round(19.99 * 100)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:51:32.950

因为 19.99 * 100 的计算将导致 1998.999999 并且您将其转换为 int 它将丢弃它的小数部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T11:52:09.937

It is due to a rounding issues. `double` and `float` are prone to these issues, which is why it is recommended you use the [`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html) class.

This code should print what is expected:

```
BigDecimal bg = new BigDecimal("19.99");
System.out.println(bg.multiply(new BigDecimal("10"))); 
```

This yields:

`199.90`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T11:52:47.757

```
System.out.println((19.99 * 100)); 
```

produces the result 1998.9999999999998 by adding **int** casting it truncates the fraction part and returns 1998

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T11:53:41.967

Floating point data types (float and double in Java) can only approximately represent most decimal values. See [Joshua Bloch's](http://books.google.co.uk/books?id=ka2VUBqHiWkC&lpg=PA218&ots=yYGjKjq6NY&dq=josh%20bloch%20float&pg=PA218#v=onepage&q=josh%20bloch%20float&f=false) words of wisdom on the subject for more details.

# android - 显示吐司后如何使edittext自动对焦？

> ID：11827644
> 
> 赞同：4
> 
> 时间：2012-08-06T11:48:01.980
> 
> 标签：android, focus, android-edittext, autofocus

我有一个可以读取 13 位条形码的 EditText。我想要做的是保持屏幕上显示的虚拟键盘和 EditText 始终具有焦点。以下代码让我在按下回车键时编写条形码并搜索产品，效果很好。但是，如果我输入的条形码少于 13 位，或者输入的条形码在我的数据库中不存在，我想向用户展示一个 Toast，并通知他。显示 Toast 后，我​​希望 EditText 再次自动获得焦点，让用户再次键入条形码。在展示了 Toast 之后，我尝试了 requestFocus() 方法，但它不起作用。始终显示软键盘，但在 Toast 之后，除非我触摸 EditText，否则我无法再次输入 EditText。我怎样才能做到这一点？

```
 final EditText procura_codbar = (EditText)
                findViewById(R.id.procurar_produto_codbar);
    procura_codbar.setOnKeyListener(new View.OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && (keyCode == KeyEvent.KEYCODE_ENTER)) {

                String codbar = procura_codbar.getText().toString();
                if (codbar.length()<13){   
                    Toast.makeText(MainActivity.this,
                           "type a 13 digit barcode",
                           Toast.LENGTH_LONG).show();
                }
                else{
                    if (bdh!=null){
                        bdh.closedb(); bdh.close();
                    }
                    bdh = new DBHelper(MainActivity.this);
                    Log.i("CODBAR", codbar);
                    produto prod_ = bdh.getProduto(codbar);
                    if (prod_!=null){
                        showDialogPreco(prod_);
                        procura_codbar.setText("");
                    }else{
                        Toast.makeText(MainActivity.this,
                                                     "Product not found",
                                                     Toast.LENGTH_SHORT).show();
                        procura_codbar.setSelection(codbar.length());
                    }
                }
                procura_codbar.requestFocus();
                procura_codbar.setSelection(codbar.length());
            }

            return false;
        }
    }); 
```

这是 XML：

```
<EditText
    android:id="@+id/procurar_produto_codbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:inputType="textNoSuggestions|number"
    android:textSize="22sp"
    android:maxLength="13"
    android:layout_toRightOf="@+id/tv_procura_codbar" >

    <requestFocus />
</EditText> 
```

提前致谢。

编辑：搞砸了，我发现了问题。这是解决方案：

```
return true; 
```

现在它工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:27:27.110

将此代码放在该 Toast 消息旁边：

```
Toast.makeText(MainActivity.this,
                       "type a 13 digit barcode",
                       Toast.LENGTH_LONG).show();

procura_codbar.setFocusableInTouchMode(true);
procura_codbar.setFocusable(true);
procura_codbar.requestFocus();
procura_codbar.setSelection(codbar.length()); 
```

这对我有用。您还需要删除代码底部的***procura_codbar.requestFocus();* 。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T19:41:54.550

在调用该方法之前，我只能`EditText`通过暂时延迟来将焦点重新转移到：`requestFocus()`

```
final Handler handler = new Handler();
final EditText myEditText = (EditText) findViewById(R.id.editText1);

myEditText.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        // See if user presses enter
        if (event.getAction() == KeyEvent.ACTION_DOWN &&
            keyCode == KeyEvent.KEYCODE_ENTER) {

            Toast.makeText(MainActivity.this, "You pressed enter!",
                        Toast.LENGTH_SHORT).show(); 

            // Put focus back in the EditText after brief delay                  
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {                 
                    myEditText.requestFocus();

                    // Select all text
                    myEditText.setSelection(0, myEditText.getText().length());                  
                }                   
            }, 200);

            return true;                    
        }

        return false;
    }       
}); 
```

# c++ - 识别地址是否属于堆或堆栈或寄存器

> ID：11827645
> 
> 赞同：7
> 
> 时间：2012-08-06T11:48:12.580
> 
> 标签：c++, c, memory-management, heap-memory, stack-memory

我有一个指向 C/C++ 变量的指针。是否可以准确地确定该变量属于哪个内存段？如果是，如何？

注意：我只有这个变量的地址，如果变量是本地/全局等，没有更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:51:57.940

找出你的架构是否有指向你的堆或堆栈区域的指针。通常有一些堆栈指针或帧指针..

然后将您的实际地址与这些地址进行比较，并确定它们所属的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:52:05.997

如果您使用的是 linux（不确定其他 unice），您也许可以在文件中找到信息`/proc/<pid>/maps`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:24:03.593

您可以首先确定可执行文件中不同部分的开头和结尾。为此，您最终需要在链接描述文件中围绕每个部分添加一些变量，如下所示：

```
SECTIONS {
    [...]
    .data : {
        data_start = .;
        *(.data)
        data_end = .;
    }
    [...]
} 
```

然后，您可以在 C/C++ 代码中将这些变量声明为外部变量，并直接使用它们来比较您要识别的地址。

调整链接描述文件可能并不容易。使用 gcc，您可以使用以下命令转储它：

```
gcc -Wl,-verbose whatever.c 
```

然后尝试查找已在（混乱）输出中定义的变量。

要获得堆栈的边界，您可以在 main() 函数的开头实例化一个虚拟变量，并将其地址保存为堆栈的顶部，然后在当前位置实例化另一个，这将为您提供底部. 但是，请注意编译器的行为可能与此完全不同（不能保证 C 中变量的堆栈顺序，甚至不能保证堆栈的使用），因此这应该可以工作，但不能移植。

最后，对于堆，我没有技巧。我只是推断不在 data/bss/derivated 中且不在堆栈中的变量将在堆中（不包括寄存器，但如果你能获得地址，我敢打赌编译器永远不会使用仅寄存器存储）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:39:59.750

我不知道它是否适合您的情况，但您可以尝试`objdump -t`查看 elf 文件的符号表。您所需要的只是变量的地址。在那里您可以找到向您显示每个变量的部分的标志。有关更多详细信息，请参阅手册页`objdump`。

样本输出：

```
0804a020 g     O .bss   00000004              var 
```

它说在地址部分`var`是一个`g`lobal 对象`O``0804a020``.bss`

# google-chrome - iText PdfStamper 在 Chrome 中不起作用

> ID：11827649
> 
> 赞同：3
> 
> 时间：2012-08-06T11:48:50.607
> 
> 标签：google-chrome, itext

我有需要打印在网页中显示的报告的功能。我使用 PdfStamper 显示打印对话框。这是我的应用程序中使用的代码：

```
PdfReader reader = new PdfReader(reportOutputContent);
PdfStamper stamper;
try {
    stamper = new PdfStamper(reader, response.getOutputStream());
    stamper.setPageAction(PdfWriter.PAGE_OPEN, new PdfAction(PdfAction.PRINTDIALOG), 1);
    stamper.close();
} catch (PdfException e) {
    e.printStackTrace();
} catch (com.itextpdf.text.DocumentException e) { 
    e.printStackTrace(); 
} 
response.flushBuffer();
return null; 
```

但这在 IE、FF 和 Safari 中运行良好，但在 Chrome 中却失败了。

# email - 批量设置'代发'

> ID：11827651
> 
> 赞同：0
> 
> 时间：2012-08-06T11:48:56.843
> 
> 标签：email, exchange-server

我有一个用于通过 MSExchange 服务器发送电子邮件的应用程序的服务帐户。“发件人”字段由当前用户配置文件中的电子邮件地址填充，但服务器正在发回响应

“SmtpException：邮箱不可用。服务器响应为：5.7.1 客户端无权代表发件人地址发送。”

由于可以发送很多电子邮件地址，是否可以设置服务帐户，以便它具有“*@domain1.com 电子邮件地址”的代表发送权限，或者是否都必须添加它们一次一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:46:05.167

考虑到它的设置方式，代表发送实际上是不可能的。如果您对 Send-As 没问题（因此邮件将来自 Service1@domain1.com，而 Service1 代表 bob@domain1.com），您可以授予服务帐户在域、OU 或邮箱中的 send-as 权限数据库级别。

# java - 如果 gps 不在主启动页面上，则 gps 将无法工作

> ID：11827653
> 
> 赞同：1
> 
> 时间：2012-08-06T11:49:03.053
> 
> 标签：java, android, gps

我正在制作一个 android 应用程序，它使用 gps 来标记你的纬度/经度、速度等，但是当我尝试更改应用程序不再加载的字段时，有什么想法吗？加载的第一个页面是 MainActivity.java 但这只是一个加载应用程序然后使用的徽标屏幕

```
setContentView(R.layout.main_page); 
```

加载我将用来做大部分应用程序的 MainPageActivity.Java 是代码，这里是 MainActivity.Java 的代码：

```
package com.aramis;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;

public class MainActivity extends Activity implements Runnable {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    new CountDownTimer(5000, 1000) {

         public void onTick(long millisUntilFinished) {

         }

         public void onFinish() {

                setContentView(R.layout.main_page);
            }
         }.start();
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}
public void run() {
    // TODO Auto-generated method stub

}

public void GoToMap(View view) {

    setContentView(R.layout.map);
}
public void GoToOpt(View view) {

    setContentView(R.layout.options);
}
public void GoToStart(View view) {
    setContentView(R.layout.main_page);
}

} 
```

这是 MainPageActivity.Java 的代码：

```
package com.aramis;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainPageActivity extends Activity {

/** Called when the activity is first created. */
EditText et_gpsLAT;
EditText et_gpsLONG;
ProgressDialog progressDialog;
Thread thread;
String info;
LocationManager mlocManager=null;
LocationListener mlocListener;
AlertDialog.Builder alert;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_page);
    et_gpsLAT=(EditText)findViewById(R.id.et_gpsLAT);
    et_gpsLONG=(EditText)findViewById(R.id.et_gpsLONG);
    mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    mlocListener = new MyLocationListener();            
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    Button btn_gps=(Button)findViewById(R.id.btn_gps);
    btn_gps.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    if (mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        if(MyLocationListener.latitude>0 )
        {
                et_gpsLAT.setText("Latitude:  "
            + MyLocationListener.latitude
            + '\n');
                et_gpsLONG.setText("Longitude:  "
            + MyLocationListener.longitude);
            }
    }
}
}
);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_page, menu);
    return true;
}
} 
```

这是显示纬度/经度的页面副本：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/backrepeat"
android:gravity="center_horizontal"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:text="@string/LatENG"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="20dp"
    android:text="@string/Long"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="20dp"
    android:text="@string/Alt"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView3"
    android:layout_below="@+id/textView3"
    android:layout_marginTop="20dp"
    android:text="@string/Speed"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView2"
    android:layout_alignParentRight="true"
    android:layout_marginRight="21dp"
    android:text="@string/Current_Lat"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView2"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignRight="@+id/TextView02"
    android:text="@string/Current_Long"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView4"
    android:layout_alignRight="@+id/TextView01"
    android:text="@string/Current_Alt"
    tools:context=".MainActivity" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView4"
    android:layout_alignBottom="@+id/textView4"
    android:layout_alignRight="@+id/TextView03"
    android:text="@string/Current_Speed"
    tools:context=".MainActivity" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:onClick="GoToMap"
    android:text="@string/mapbtn" />

<Button
    android:id="@+id/Button01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:onClick="GoToOpt"
    android:text="@string/optbtn" />

<Button
    android:id="@+id/btn_gps"
    style="@style/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView5"
    android:layout_marginTop="33dp"
    android:text=" GPS " />

<EditText
    android:id="@+id/et_gpsLAT"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btn_gps"
    android:layout_centerHorizontal="true"
    android:editable="false"
    android:ems="10" />

<EditText
    android:id="@+id/et_gpsLONG"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/et_gpsLAT"
    android:layout_below="@+id/et_gpsLAT"
    android:editable="false"
    android:ems="10" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/tv_gps"
    style="@style/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/btn_gps"
    android:layout_alignParentLeft="true"
    android:text="Location :" />

</RelativeLayout> 
```

对此的任何帮助将不胜感激我已经坚持了一段时间了

# wordpress - 如果我输入 domain.com/index.php，htaccess 重定向到 wordpress

> ID：11827654
> 
> 赞同：1
> 
> 时间：2012-08-06T11:49:04.967
> 
> 标签：wordpress, .htaccess

我一直试图解决这个问题，但没有成功。我有一个静态站点，`domain.com/site/index.html`但我还在 / 中创建了一个新的 wordpress 版本以最终替换它。

我要输入什么，`.htaccess`以便在键入打开 Wordpress 站点时`domain.com`打开*www.domain.com/site/index.html*（静态网站） ？`domain.com/index.php`这可能吗？

**编辑：**我删除了我在此处发布的以前的 .htaccess 代码。它只是没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:25:32.597

`%{HTTP_HOST}`只是主机名（例如“www.domain.com”）。要测试您需要使用的主机名之后的路径`REQUEST_URI`

```
RewriteCond %{REQUEST_URI} !^\/index.php 
```

# php - 按加权值对多维数组进行排序

> ID：11827663
> 
> 赞同：7
> 
> 时间：2012-08-06T11:49:35.693
> 
> 标签：php, arrays, sorting, usort

这里有很多问题询问如何在 PHP 中对多维数组进行排序。答案是`usort()`。我知道。但我有一个问题更进一步，我在这里看不到类似的答案。

我有一系列记录，每条记录都包含一个国家 ID（或国家名称，如果您愿意，它不相关）。

我的任务是以有利于某些国家的方式对数组进行排序。这是动态的——也就是说，偏好的国家/地区的选择是由用户的配置决定的。我有一个单独的数组，它指定前几个国家所需的排序顺序；来自其他国家的结果将在列表末尾未排序。

所以问题是：如何在`usort()`不使用全局变量的情况下获得这种排序标准。最好不要将标准数组注入主数组的每个元素（'因为如果我无论如何都要循环它，那么使用`usort()`有什么意义？）

请注意：由于它将与此处的答案相关，因此我暂时停留在 PHP 5.2 上，因此无法使用匿名函数。我们正在升级，但现在我需要适用于 5.2 的答案。（也欢迎 5.3/5.4 的答案，特别是如果它们使它变得更容易，但我将无法使用它们）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:14:28.597

您明确写道您不想拥有全局变量，所以我也不建议您使用静态变量，因为它们实际上是全局变量 - 根本不需要这些变量。

在 PHP 5.2（及更早版本）中，如果您需要在回调中调用上下文，您可以通过使用它自己的类来创建您的上下文：

```
class CallContext
{
} 
```

例如，您具有以下比较功能`sort`：

```
class CallContext
{
    ...
    public function compare($a, $b)
    {
         return $this->weight($a) - $this->weight($b);
    }

    public function getCallback()
    {
         return array($this, 'compare');
    }
    ...
} 
```

该函数可以用作以下回调，[`usort`](http://de.php.net/usort)然后：

```
$context = new CallContext();

usort($array, $context->getCallback()); 
```

很直接。的私有实现`CallContext::weight`仍然缺失，从您的问题中我们知道它需要一些排序数据和信息。例如每条记录中国家 ID 的键名。让我们假设记录是 Stdclass 对象，因此要获得一条记录的权重，上下文类需要知道属性的名称、您自己定义的排序顺序以及那些未在自定义排序顺序（其他，其余）。

这些配置值由*构造*函数（简称*ctor*）给出，并存储为私有成员。然后缺少的`weight`函数根据该信息将记录转换为排序值：

```
class CallContext
{
    private $property, $sortOrder, $sortOther;

    public function __construct($property, $sortOrder, $sortOther = 9999)
    {
        $this->property = $property;
        $this->sortOrder = $sortOrder;
        $this->sortOther = $sortOther;
    }

    private function weight($object) {
        if (!is_object($object)) {
            throw new InvalidArgumentException(sprintf('Not an object: %s.', print_r($object, 1)));
        }
        if (!isset($object->{$this->property})) {
            throw new InvalidArgumentException(sprintf('Property "%s" not found in object: %s.', $this->property, print_r($object, 1)));
        }
        $value = $object->{$this->property};
        return isset($this->sortOrder[$value])
               ? $this->sortOrder[$value]
               : $this->sortOther;
    }
    ... 
```

用法现在扩展到以下内容：

```
$property = 'country';
$order = array(
    # country ID => sort key (lower is first)
    46 => 1,
    45 => 2
);
$context = new CallContext('country', $order);
usort($array, $context->getCallback()); 
```

使用相同的原理，您通常可以将任何带有`use`子句的 PHP 5.3 闭包转换为 PHP 5.2。子句中的变量`use`成为注入构造的私有成员。

这个变体不仅阻止了 static 的使用，它还使每个元素都有一些映射，并且由于两个元素被视为平等，它利用了某些`weight`函数的私有实现，该函数非常适用于`usort`.

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T14:51:53.760

你可能不*想要*一个全局变量，但你需要一个*行为*类似的东西。您可以使用具有静态方法和参数的类。它不会过多地污染全局范围，并且仍然可以按照您需要的方式运行。

```
class CountryCompare {
    public static $country_priorities;

    public static function compare( $a, $b ) {
        // Some custom sorting criteria
        // Work with self::country_priorities
    }

    public static function sort( $countries ) {
        return usort( $countries, array( 'CountryCompare', 'compare' ) );
    }
} 
```

然后像这样调用它：

```
CountryCompare::country_priorities = loadFromConfig();
CountryCompare::sort( $countries ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T07:24:12.423

您可以使用闭包（PHP >= 5.3）：

```
$weights = array( ... );
usort($records, function($a, $b) use ($weights) {
    // use $weights in here as usual and perform your sort logic
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:12:58.240

见演示：[http ://codepad.org/vDI2k4n6](http://codepad.org/vDI2k4n6)

```
$arrayMonths = array(
       'jan' => array(1, 8, 5,4),
       'feb' => array(10,12,15,11),
       'mar' => array(12, 7, 4, 3),
       'apr' => array(10,16,7,17),
    );

$position = array("Foo1","Foo2","Foo3","FooN");
$set = array();

foreach($arrayMonths as $key => $value)
{
    $max = max($value);
    $pos = array_search($max, $value);
    $set[$key][$position[$pos]] = $max ;
}

function cmp($a, $b)
{
    foreach($a as $key => $value )
    {
        foreach ($b  as $bKey => $bValue)
        {
            return $bValue - $value ;
        }
    }

}

uasort($set,"cmp");
var_dump($set); 
```

输出

```
array
      'apr' => 
        array
          'FooN' => int 17
      'feb' => 
        array
          'Foo3' => int 15
      'mar' => 
        array
          'Foo1' => int 12
      'jan' => 
        array
          'Foo2' => int 8 
```

**另一个例子：-**

**使用 PHP 对多维数组进行排序**

[http://www.firsttube.com/read/sorting-a-multi-dimensional-array-with-php/](http://www.firsttube.com/read/sorting-a-multi-dimensional-array-with-php/)

每隔一段时间，我就会发现自己有一个多维数组，我想按子数组中的值对其进行排序。我有一个可能看起来像这样的数组：

```
//an array of some songs I like
$songs =  array(
        '1' => array('artist'=>'The Smashing Pumpkins', 'songname'=>'Soma'),
        '2' => array('artist'=>'The Decemberists', 'songname'=>'The Island'),
        '3' => array('artist'=>'Fleetwood Mac', 'songname' =>'Second-hand News')
    ); 
```

问题是这样的：我想以“歌曲名（艺术家）”的格式回显我喜欢的歌曲，并且我想按艺术家的字母顺序来做。PHP 提供了许多用于对数组进行排序的函数，但没有一个可以在这里工作。ksort() 将允许我按键排序，但 $songs 数组中的键无关紧要。asort() 允许我对键进行排序和保留，但它会根据每个元素的值对 $songs 进行排序，这也是无用的，因为每个元素的值都是“array()”。usort() 是另一种可能的候选方法，可以进行多维排序，但它涉及构建回调函数，并且通常很冗长。甚至 PHP 文档中的示例也引用了特定的键。

所以我开发了一个快速函数来按子数组中键的值进行排序。请注意，此版本不区分大小写。请参阅下面的 subval_sort()。

```
function subval_sort($a,$subkey) {
    foreach($a as $k=>$v) {
        $b[$k] = strtolower($v[$subkey]);
    }
    asort($b);
    foreach($b as $key=>$val) {
        $c[] = $a[$key];
    }
    return $c;
} 
```

要在上面使用它，我只需键入：

```
$songs = subval_sort($songs,'artist'); 
print_r($songs); 
```

这是您应该期望看到的：

```
Array
(
    [0] => Array
        (
            [artist] => Fleetwood Mac
            [song] => Second-hand News
        )

    [1] => Array
        (
            [artist] => The Decemberists
            [song] => The Island
        )

    [2] => Array
        (
            [artist] => The Smashing Pumpkins
            [song] => Cherub Rock
        )

) 
```

歌曲，按艺术家排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:55:17.473

您的问题的答案确实在`usort()`函数中。但是，您需要做的是编写传递给它的函数，以便正确地为您加权。

大多数时候，你有类似的东西

```
if($a>$b)
{
    return $a;
} 
```

但是你需要做的是一些类似的事情

```
if($a>$b || $someCountryID != 36)
{
    return $a;
}
else
{
    return $b;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T18:07:25.277

您需要使用 ksort 按重量排序，而不是 usort。那会干净得多。

`$weighted_data`将您的数据排列在格式为 的关联数组中`weight => country_data_struct`。这是加权数据的一种非常直观的表示形式。然后运行

`krsort($weighted_data)`

# c++ - 如何从列表中删除重复项

> ID：11827664
> 
> 赞同：1
> 
> 时间：2012-08-06T11:49:41.840
> 
> 标签：c++, stl

我有自定义类 Person ，它只包含关于人的数据（姓名、姓氏、身高......）。我有几个指向 Person 的指针列表

```
list<Person*> list1;
list<Person*> list3;
list<Person*> list2; 
```

我连接

使用 `std::copy()`和`std::back_insert_iterator<std::list<Person*> >`

如何从列表中删除重复项（仅指向相同内存垃圾的指针，不删除该内存，仅从列表中删除指针）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:52:15.130

如果您不介意重新排序列表：

```
list.sort()
list.unique() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T12:07:53.613

您可以考虑使用集合而不是列表。

# php - SplFixedArray 真的比数组表现更好吗？

> ID：11827668
> 
> 赞同：13
> 
> 时间：2012-08-06T11:50:04.797
> 
> 标签：php, arrays, performance, spl

我正在测试 SplFixedArray 用星期几构建一个数组，我得到以下结果：

```
<?php

$days = new SplFixedArray(7);

$days[0] = "Monday";
$days[1] = "Tuesday";
$days[2] = "Wednesday";
$days[3] = "Thursday";
$days[4] = "Friday";
$days[5] = "Saturday";
$days[6] = "Sunday";

echo memory_get_peak_usage() . "\n"; //Returns 327688
echo memory_get_usage() . "\n"; //Returns 327140
echo memory_get_peak_usage(true) . "\n"; //Returns 524288
echo memory_get_usage(true) . "\n"; //Returns 524288 
```

使用传统数组：

```
<?php

$days = array();

$days[0] = "Monday";
$days[1] = "Tuesday";
$days[2] = "Wednesday";
$days[3] = "Thursday";
$days[4] = "Friday";
$days[5] = "Saturday";
$days[6] = "Sunday";

echo memory_get_peak_usage() . "\n"; //Returns 327528
echo memory_get_usage() . "\n"; //Returns 326820
echo memory_get_peak_usage(true) . "\n"; //Returns 524288
echo memory_get_usage(true) . "\n"; //Returns 524288 
```

这对你有意义吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T15:16:43.523

[正如本文](http://www.johnciacia.com/2011/02/01/array-vs-splfixedarray/)作者执行的基准测试所示：

![http://www.johnciacia.com/wp-content/uploads/2011/01/3.png](../Images/472aee5f10e4f214a408040938903aaa.png)

可以得出结论，SplFixedArray 的内存占用确实更小，但**仅在大量数组元素时才引人注目**。因为从技术上讲，SplFixedArray 也是[一个类的实例](http://php.net/manual/en/class.splfixedarray.php)，与传统数组相反，如果由 SplFixedArray 实现，这就是导致小型数组实际上消耗更多内存的原因，但是由于这额外的几百字节保持不变，它变得无关紧要随着数组大小的增长。

旁注：不要进行微优化，并非每个锤子都是为每个钉子创建的。SplFixedArray 适用于极端情况，例如，对于具有数十万个元素的数组，每个元素减少几个字节的内存使用量会对整体内存使用量产生很大影响；但除非您确实确定您的阵列是或可能是应用程序的潜在瓶颈，否则不要费心使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T12:10:30.050

SplFixedArray 应该比数组快。它没有说明内存消耗（这是您在此处测试的内容）。从[http://php.net/manual/en/class.splfixedarray.php](http://php.net/manual/en/class.splfixedarray.php)：

> “SplFixedArray 和普通 PHP 数组之间的主要区别在于，SplFixedArray 是固定长度的，并且只允许范围内的整数作为索引。优点是它允许更快的数组实现”

但是，使用包含 100000 个条目的数组，表明它也使用了更少的 RAM：

```
$users = array();
for ($i=0;$i<100000;$i++) { 
    $users[$i] = array('id' => rand(), 'name' => 'default');
}
echo memory_get_peak_usage(true); //returns 31457280 
```

* * *

```
$users = new SplFixedArray(100000);
for ($i=0;$i<100000;$i++) { 
    $users[$i] = array('id' => rand(),
            'name' => 'default');
}
echo memory_get_peak_usage(true); //return 26738688 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-23T15:22:17.247

是的，如果您使用固定尺寸的它们。

如果您不断更改要添加的每个新元素的大小，可能会更慢，它也可能不是错误的用法。

由于在 PHP 中实现数组，因此速度更快，这些数组不是编程语言中的每个定义的真实数组，而是使用哈希表实现的关联数组。（所以 PHP 中的数组基本上是哈希表）

虽然 SplFixedArray 是使用 C 的“malloc”作为几乎普通的 C 数组来实现的，但当然包裹在一个小结构中以跟踪和操作数组作为每个用例。

**更新**

同时，从 PHP 7.x 开始，性能没有太大的时间差异。真正了解的唯一方法是根据您自己的用例进行基准测试。如果没有特殊要求，普通的PHP`array`就足够了。

# java - Java Scanner 多重分隔符

> ID：11827669
> 
> 赞同：0
> 
> 时间：2012-08-06T11:50:11.940
> 
> 标签：java

我知道这是一个非常问的问题，但我找不到我的问题的适当答案。事情是我必须像这样从 .TXT 文件中读取的程序和应用程序

```
Real:Atelti
Alcorcon:getafe 
Barcelona:Sporting 
```

我的问题是我该怎么做才能告诉Java我想要String before : 在一个ArrayList 和Strings after : 在另一个ArrayList 中？我猜它使用的是分隔符方法，但我不知道在这种情况下如何使用它。

对不起我的英语不好，我想我必须改进它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:57:20.823

使用java的split函数。

脚步：

1.  声明两个arrayList。l1和l2；
2.  阅读每一行。
3.  用“：”分割每一行，这将返回一个长度为 2 的数组，array. （根据您的输入）
4.  l1.add(array[0])，l2.add(array [1](http://www.java-examples.com/java-string-split-example) )

试试自己，如果需要帮助，请发布代码:)

[在这里](http://www.java-examples.com/java-string-split-example)检查拆分功能的使用，虽然通过谷歌你可以找到许多不同的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:59:07.610

使用“：”作为分隔符拆分字符串。将结果中的奇数条目添加到一个列表，甚至添加到另一个列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:00:00.437

如果你的文字是这样的：

皇马：阿泰尔蒂

阿尔科康：赫塔菲

巴塞罗那：体育

您可以通过以下方式实现您想要的：

```
StringBuilder text = new StringBuilder();
Scanner scanner = new Scanner(new FileInputStream(fFileName), encoding); //try utf8 or utf-8 for 'encoding'
try {
  while (scanner.hasNextLine()){
    String line = scanner.nextLine();
    String before = line.split(":")[0];
    String after = line.split(":")[1];
    //dsw 'before' and 'after' - add them to lists.
  }
}
finally{
  scanner.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:15:07.620

**1.**用作`":"`分隔符。

**2.**然后将它们存储在`String[]`using`split()`函数中。

**3.**尝试使用`BufferedReader`而不是扫描仪。

**例如：**

```
File f = new File("d:\\Mytext.txt");
FileReader fr = new FileReader(f);
BufferedReader br = new BufferedReader(fr);
ArrayList<String> s1 = new ArrayList<String>();
ArrayList<String> s2 = new ArrayList<String>();

  while ((br.readLine())!=null){

    String line = br.readLine();

    String bf = line.split(":")[0];
    String af = line.split(":")[1];

    s1.add(bf);
    s2.add(af);

  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:09:20.567

```
 Scanner scanner = new Scanner(new FileInputStream("YOUR_FILE_PATH"));
        List<String> firstList = new ArrayList<String>();
        List<String> secondList = new ArrayList<String>();
        while(scanner.hasNextLine()) {
            String currentLine = scanner.nextLine();
            String[] tokenizedString = currentLine.split(":");
            firstList.add(tokenizedString[0]);
            secondList.add(tokenizedString[1]);
        }
              scanner.close(); 
```

枚举 firstList 和 secondList 将为您提供所需的结果。

# node.js - 带有连接资产的节点快递中的图像路径

> ID：11827670
> 
> 赞同：2
> 
> 时间：2012-08-06T11:50:12.930
> 
> 标签：node.js, twitter-bootstrap, express, less, assets

我正在尝试将 twitter-bootstrap 包含在[我的项目](https://github.com/zishe/angular-express-coffee)中，并且`glyphicons-halflings`图像只能在同一目录 ( `assets/css/`) 中工作，并且只能在 Chrome 中（不在 Firefox 和 Opera 中）。包括部分（文件'app.less'）：

```
@import 'twitter-bootstrap/bootstrap';
@iconSpritePath: "/img/glyphicons-halflings.png";
@iconWhiteSpritePath: "/img/glyphicons-halflings-white.png"; 
```

我尝试使用多种选项： /img.. ， img/.. ， /../img ， /gly...，放置在公共目录中（顺便说一下，我想从图像文件夹中使用它），但它不起作用。也许我可以在连接资产中设置这个选项。[此](http://clip2net.com/s/2bj3P)文件夹图片。

包括仅投影 app.less 文件`!= css('app')`

在这种情况下，它适用于 Chrome。

更新：

现在我看到在 Chrome url 中总是`http://localhost:3000/css/../img/glyphicons-halflings.png`转换为`http://localhost:3000/img/glyphicons-halflings.png`并且在 firefox 中总是`../img/glyphicons-halflings.png`( `background-image: url("../img/glyphicons-halflings.png");`) 无法加载。我对@iconSpritePath 的定义根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:29:55.417

我查看了您的代码，并将 glyphicon 文件复制到 public/img 文件夹树中，它对我有用。

[我在https://github.com/TrevorBurnham/connect-assets](https://github.com/TrevorBurnham/connect-assets)中没有看到任何关于它能够支持图像的内容，所以我认为这是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:41:30.397

我正在使用引导程序（使用 LESS 文件）和 express。适用于每个浏览器。您必须安装较少的中间件和较少的模块。这是我的代码：

```
app.use(require('less-middleware')({ src: __dirname + '/public' }));
app.use(express.static(path.join(__dirname, '/public' ))); 
```

和我的文件夹结构：

```
/public/img <-- the bootstrap img and the rest
/public/javascripts
/public/stylesheets 
```

我唯一需要更改的是引导程序较少文件中的包含。例如来自：

```
// CSS Reset
@import "reset.less"; 
```

到

```
// CSS Reset
@import "/public/stylesheets/reset.less"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T00:10:27.610

我有一个类似的问题，但它与 css 文件中的路径无关。我只是想在“资产/图像”中引用一个图像，但是当我使用它时`assetPath('images/logo.png')`，它说它找不到它。connect-assets（或者可能是 mincer）似乎做的是从资产中剥离第一个目录。为了引用您的图像，您需要在没有路径的情况下指定它，例如`assetPath('logo.png')`.

# javascript - 淘汰赛映射和父选项

> ID：11827672
> 
> 赞同：1
> 
> 时间：2012-08-06T11:50:18.980
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我想映射这个

```
{ items: [
    { id: 1 },
    { id: 2 },
    { id: 3 }
]}; 
```

在数组中创建某些内容时，我添加了一个函数以从集合中删除该项目。

```
var mapping = {
    'items': {
        key: function(data) {
            return ko.utils.unwrapObservable(data.id);
        },
        create: function(options) {
            var o = (new(function() {
                this._remove = function() {
                    options.parent.items.mappedRemove(options.data);
                };
                ko.mapping.fromJS(options.data, {}, this);
            })());
            return o;
        }
    }
}; 
```

如果我要删除使用添加的项目`items.mappedCreate`但不适用于映射到的项目，则此方法有效`ko.mapping.fromJS`。

调试时我注意到 options.parent 在不同的情况下是不一样的。为什么？两种方法都应该作为父项返回 observableArray 吗？

我已经使用示例[http://jsfiddle.net/fampinheiro/9CcME/](http://jsfiddle.net/fampinheiro/9CcME/)设置了一个 jsfiddle 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:52:07.283

我在淘汰赛 ggroups 中发布了我的问题

[https://groups.google.com/d/topic/knockoutjs/cqBr_CPsfqc/discussion](https://groups.google.com/d/topic/knockoutjs/cqBr_CPsfqc/discussion)

Roy Jacobs 解决了我的 jsfiddle 问题。

# list - 将字符串附加到 Erlang 中的字符串列表

> ID：11827677
> 
> 赞同：2
> 
> 时间：2012-08-06T11:50:31.300
> 
> 标签：list, erlang, append, list-comprehension

如何在不使用 lists:append() 的情况下将字符串附加到字符串列表。使用 list:append() 的代码在这里，如何使用列表理解做同样的事情？

```
S1 = "String1" . 
S2 = "String2" . 
S3 = "String3" . 
L1 = [ S1, S2 ] . 
L2 = lists:append(L1,[S3]). 
```

最后一行产生结果

```
["String1","String2","String3"] 
```

如何使用列表理解来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:42:44.220

查看 Erlang 文档： [http ://www.erlang.org/doc/efficiency_guide/listHandling.html](http://www.erlang.org/doc/efficiency_guide/listHandling.html)

正如那里所说 - 将元素添加到列表的尾部效率低下，因为它会导致创建新列表。

如果您需要将元素添加到列表的尾部，更好的方法可能是：以相反的顺序创建列表。最后只需调用函数列表：reverse/1

看这个例子：

```
18> S1 = "String1". 
"String1"
19> S2 = "String2". 
"String2"
20> S3 = "String3". 
"String3"
21> S4 = "String4". 
"String4"
22> L1 = [ S2, S1 ].
["String2","String1"]
23> L2 = [ S3 | L1 ].
["String3","String2","String1"]
24> L3 = [ S4 | L2 ].
["String4","String3","String2","String1"]
25> L4 = lists:reverse( L3 ).
["String1","String2","String3","String4"] 
```

它在内存使用方面比这个更有效：

```
34> S1 = "String1". 
"String1"
35> S2 = "String2". 
"String2"
36> S3 = "String3". 
"String3"
37> S4 = "String4". 
"String4"
38> L1 = [ S1, S2 ].
["String1","String2"]
39> L2 = L1 ++ [ S3 ].
["String1","String2","String3"]
40> L3 = L2 ++ [ S4 ].
["String1","String2","String3","String4"] 
```

（使用 '++' 等效于 lists:append ）。

在第一个示例中 - 仅创建了 2 个列表实例。在第二个 - 3个实例中。在更大的示例中，结果应该是**2 个列表实例与 N-1 个实例**

# paypal - 如何使用 ActiveMerchant 和 PayPal Express 跳过订单确认页面

> ID：11827678
> 
> 赞同：4
> 
> 时间：2012-08-06T11:50:31.413
> 
> 标签：paypal, activemerchant

关于 PayPal 文档，可以跳过订单确认页面，让客户在 PayPal 上付款。为此，必须将参数“ **useraction** ”设置为“ **commit** ”。**如何使用 ActiveMerchants setup_purchase**方法做到这一点？

[PayPal - 自定义快速结帐](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECCustomizing)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T12:08:18.480

知道了。**只需将redirect_url_for**方法中的review 参数设置为false。例子：

```
EXPRESS_GATEWAY.redirect_url_for(response.token, review: false) 
```

# c++ - C++ substr 使用返回错误

> ID：11827681
> 
> 赞同：2
> 
> 时间：2012-08-06T11:50:40.083
> 
> 标签：c++

## 第一个问题

我尝试执行以下操作

```
myfile.open("file.txt");
    while(!myfile.eof())
    {
getline(myfile,sline);
delimiter = sline.substr(2,1);
    }

cout << "Delimiter is " << delimiter << endl; 
```

我的 file.txt 是这样的

```
AD#Andorra#AN#AD#AND#20.00#Andorra la Vella#Europe#Euro#EUR#67627.00
AE#United Arab Emirates#AE#AE#ARE#784.00#Abu Dhabi#Middle East#UAE Dirham#AED#2407460.00 
```

它在运行时返回一个错误代码

```
terminate called after throwing an instance of 'std::out_of_range'
  what():  basic_string::substr
Aborted (core dumped) 
```

我想将值 # 作为我的分隔符，

## 第二个问题

我的 .h 文件得到了这个声明

```
#define LINE_DATA_DELIMITER     "," 
```

我可以将 LINE_DATA_DELIMITER 重新定义为 "#" ，而不是使用 "#" ，我可以使用变量分隔符的值来定义吗？

更新：问题 1 已解决。我需要第二个问题的帮助 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:58:44.440

发生这种情况是因为您多次运行循环。*只有在*一次读取失败后才会出现这种`eof`情况。

 *试试这个

```
myfile.open("file.txt");
while(getline(myfile,sline))
{ 
   delimiter = sline.substr(2,1);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:58:33.697

我在 substr 文档[http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)中读到了这个。

“如果传递的位置超过了字符串的末尾，则会引发 out_of_range 异常。” 我认为这是因为在 sline.substr(2,1) 你倒置了范围。*

# python - 如何通过python登录stackoverflow.com？

> ID：11827682
> 
> 赞同：3
> 
> 时间：2012-08-06T11:50:45.917
> 
> 标签：python, stackexchange-api

我在想有什么方法可以通过我的`python code`.

有什么`stackoverflow-pythonAPI`我可以通过它来完成上述任务。

我在这里问之前用谷歌搜索，但找不到任何 API，也找不到任何`Hello World`将它与 python 一起使用的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:54:08.910

你很幸运：既有一个[API](https://stackapps.com/about)，也有至少两个 python 库（[Py-](https://stackapps.com/questions/198/py-stackexchange-an-api-wrapper-for-python) StackExchange和[Stack.PY](https://stackapps.com/questions/3417/stack-py-a-python-module-for-accessing-the-stack-exchange-2-1-api)）来使用该 API。

一个警告：个人信息要求您使用 v2.0 API，但当前发布的 Py-StackExchange 版本仅支持最高版本 1.1。该库的[GitHub 存储库](https://github.com/lucjon/Py-StackExchange)有一个[更新 2.0 分支](https://github.com/lucjon/Py-StackExchange/tree/updating-2.0)，它可能适合您，也可能不适合您。Stack.PY支持 2.0 版（*也*支持 2.1 版！）。

API 本身基于带有 JSON 响应的 HTTP 请求，因此您也可以直接调用 API。

# android - SoftInput 键盘在启动活动时隐藏，但在使用 viewpager 后总是显示自己

> ID：11827684
> 
> 赞同：0
> 
> 时间：2012-08-06T11:50:54.503
> 
> 标签：android, android-viewpager, android-softkeyboard

我已经看到了很多关于这些主题的主题，但仍然无法弄清楚为什么会发生这种情况。我在左侧有一个片段，它显示一个列表，在右侧有一个视图寻呼机（有 2 页）。

当我第一次启动我的活动键盘时没有显示。那太棒了。但是当我点击一个列表项（这将在 viewpager => myPager.setAdapter(..) 中显示一个新内容），或者当我向右滑动时（这里它还没有显示）然后向左返回到第一个页面显示，键盘再次开始显示，并在剩下的时间里继续显示，无论我做什么。

我已经尝试放入 `android:focusableInTouchMode="true"`我可以放入的所有布局，但仍然......

奇怪的是，我的布局中的编辑文本不是重点，而是.. 别的东西。也许是一个布局，但我不知道（也不知道怎么知道=）。这有点奇怪，因为我尝试了很多解决方案，但它仍然不起作用。

如果有人有任何想法...

谢谢 ！！！！

这是我的代码的相关部分。

## 清单.xml

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:windowSoftInputMode="stateHidden" > 
```

## main_activity.xml

（DateList 包含列表视图和下面的其他内容（不关注））

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<fragment android:name="com.example.main.courante.e.DateList"
 android:id="@+id/list_frag"
 android:tag="list"
 android:layout_width="0dip"
 android:layout_height="fill_parent"
 android:layout_weight="1"
/> 

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="3"
    android:paddingLeft="5dp"
    android:paddingTop="5dp" >  

    <LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:layout_gravity="center">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"  
            android:layout_gravity="center" 
            android:tabStripEnabled="true"
             />

          <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            />
        </FrameLayout>
    </LinearLayout>
</TabHost>
</LinearLayout> 
```

## viewpager 中显示的布局：

（我承认有点乱，但只是为了告诉你是否有可聚焦模式等）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true"
android:orientation="vertical"
android:scrollbars="vertical"
>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="center"
android:id="@+id/linear"
android:paddingLeft="30dp"
android:paddingRight="30dp"
 >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginTop="@dimen/padding_small"
android:layout_marginBottom="@dimen/padding_small"
android:orientation="horizontal"
android:layout_gravity="center"
android:gravity="center"
android:id="@+id/top_lin">
<!--     android:background="@drawable/rounded_border_fiche_element" -->

 <ImageView 
     android:id="@+id/perm_img"
     android:layout_width="75dp"
     android:layout_height="75dp"
     android:layout_marginLeft="50dp"
     android:padding="@dimen/padding_small"

     android:src="@android:drawable/ic_notification_overlay" 
     android:contentDescription="TODO"
     android:background="@drawable/image_bg"/> 

   <TextView
        android:id="@+id/perm_nom"
        style="@style/textview_info"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium"
         />

    <TextView
        style="@style/textview_info"
        android:id="@+id/perm_prenom"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium"
         />

    <TextView
        style="@style/textview_info"
        android:id="@+id/perm_matricule"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:paddingRight="@dimen/padding_medium"
         />

</LinearLayout>

<View
     android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/darker_gray"
    android:layout_marginTop="15dp"
    android:layout_marginBottom="15dp" />

<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_gravity="center"
    android:id="@+id/table_check">
<!--         android:background="@drawable/rounded_border_fiche_element" -->

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
       android:gravity="center">           

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m1"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m2"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:gravity="center">

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m3"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m4"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m5"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/question_m6"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox
            android:id="@+id/checkBox6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />

    </TableRow>

</TableLayout>

<View
     android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/darker_gray"
    android:layout_marginTop="15dp"
    android:layout_marginBottom="15dp" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:id="@+id/bot_lin">
<!--     android:background="@drawable/rounded_border_fiche_element"> -->

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/bot_lin_lin"
    android:focusableInTouchMode="true"
    android:focusable="true" >

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/securite" />

    <EditText
        android:id="@+id/securite"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="textMultiLine"
        android:lines="5" >

    </EditText>

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/bot_lin_lin2"
    android:focusableInTouchMode="true"
    android:focusable="true" >

    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/client" />

    <EditText
        android:id="@+id/clients"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="textMultiLine"
        android:lines="5"/>

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/bot_lin_lin3"
    android:focusableInTouchMode="true"
    android:focusable="true" >

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/entretien" />

    <EditText
        android:id="@+id/entretien"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="textMultiLine" 
        android:lines="5"/>

</LinearLayout>

</LinearLayout>

</LinearLayout>
</ScrollView> 
```

## 编辑 ：

我注意到一件事。当我通过寻呼机滑动时，键盘中空格按钮左侧的第二个按钮会快速从“:-)”变为“:”，并在滚动完成后返回“:-)”。第二个“：”来自我在操作栏上的搜索小部件。也许如果我能阻止这个人集中注意力就可以了？我该怎么做？因为它是这样定义的：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />

<item android:id="@+id/menu_search"
      android:title="@string/menu_search"
      android:icon="@drawable/ic_menu_search"
      android:showAsAction="ifRoom"
      android:actionViewClass="android.widget.SearchView"
      android:inputType="number" /> 
```

## 编辑 2：

为了防止 searchwidget 获得焦点，我把这两行代码放在了

```
 InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(searchView.getWindowToken(),0); 
```

我在任何地方都调用 myPager.setAdapter() 即当我点击一个列表项时，我不得不将它也放在 viewpager 中的 public void onPageScrolled() 中......但它真的不流畅，因为你很快就会看到键盘显示和不到一秒钟就消失了……如果有人有其他想法……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:06:39.540

我有一个合乎逻辑的想法来避免打开 SoftInput 键盘

将此视图添加到 viewpager 中显示的布局中：

```
<LinearLayout
        android:id="@+id/ll_focus"
        android:layout_width="0px"
        android:layout_height="0px"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:visibility="visible" >
    </LinearLayout> 
```

这工作得很好。试试这个我亲爱的朋友

# objective-c - iOS - 从服务器执行预编译的应用程序

> ID：11827695
> 
> 赞同：0
> 
> 时间：2012-08-06T11:51:20.757
> 
> 标签：objective-c, ios, compilation, runtime

我正在寻找在服务器上执行预编译的 .xib（带有自己的控制器和库），并在运行时下载它。可能吗？

谢谢！

编辑：

那么有人可以给我一个使用 NSBundle 执行其他应用程序的程序示例吗？以及如何创建捆绑的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:02:05.177

我认为您不能在运行时将 xib 导入应用程序的包中（您必须这样做才能发生这种情况）。其他人可能知道更多并纠正我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:51:53.637

我可以想到几种方法，你可以尝试这样做，但你的目标是把它放到商店里吗？

Apple 开发人员指南明确禁止这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:04:58.877

.xib 文件只是一个数据文件，因此加载应用程序包之外的文件应该没有任何问题。我不能说我曾经尝试过，但只要它是捆绑的，你应该能够：

1.  使用包含要加载的 .xib 的包的路径创建 NSBundle 的实例。看`+[NSBundle bundleWithPath:]`那个。

2.  使用您在上一步中创建的包和任何正常的 .xib 加载方法（例如`-[UIViewController initWithNibNamed:bundle:]`或）加载 .xib `+[UINib nibWithNibName:bundle:]`。

> 拥有自己的控制器和库

那部分行不通。iOS 不允许动态链接到系统提供的框架以外的框架，因此无法加载您的代码。但是，如果您可以将所需的所有代码构建到您的应用程序中，您应该仍然可以使用下载的 .xib，如上所述。这可以让你做一些事情，比如更新你的视图的布局方式或者你的控件连接到的目标和操作。

# c++ - 将调用线程置于警报等待状态

> ID：11827706
> 
> 赞同：1
> 
> 时间：2012-08-06T11:51:59.937
> 
> 标签：c++, sockets, winsock2, iocp

我的主线程创建了多个 I/O 工作线程。然后我通过执行以下操作从我的主线程发起一个 I/O 请求：

```
{
    ...
    IoRequest *pIoRequest = new IoRequest(m_socket);
    pIoRequest->SetBuffer(vecCommandData); // vector of BYTEs
    pIoRequest->SetOperationType(OP_TYPE_SEND);
    WSASend(m_socket, pIoRequest->GetWsaBuffer(), 1, NULL, 0, pIoRequest, NULL);
    ...
} 
```

在我的一个 I/O 工作线程中的某个时刻，请求已完成，并且我的 IoRequest 对象的缓冲区中填充了有效的响应数据。

```
DWORD WINAPI WorkerThreadProc(LPVOID lpParameter)
{
    IoCompletionPort *pIocp = reinterpret_cast<IoCompletionPort*>(lpParameter);    
    ...
    while (true)
    {
        BOOL bReturn = pIocp->GetStatus(&ulCompletionKey, &dwNumberOfBytesTransferred, (LPOVERLAPPED*)&pIoRequest);
        ...
        switch (pIoRequest->GetOperationType())
        {
        ...
        case OP_TYPE_RECEIVE_DATA:
            {
                ...
                // the requested I/O operation has completed and pIoRequest's buffer now contains valid response data!
                break;
            } 
        ...
        }
    }

    return 0;
} 
```

如何在调用 WSASend() 后将我的主线程置于警报等待状态，并使其在准备好时接收响应数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:06:30.457

在 IOCP 服务器中，它通常是 GetQueuedCompletionStatus()。

# android - 在 RelativeLayout 中居中

> ID：11827708
> 
> 赞同：6
> 
> 时间：2012-08-06T11:52:07.417
> 
> 标签：android, android-layout

我需要将 ImageView 和 TextView 放在 RelativeLayout 中。我无法弄清楚我做错了什么。

这是我的代码：

```
<RelativeLayout    
        android:id="@+id/teamNameLayout"
    android:layout_width="130dip"
    android:layout_height="fill_parent"
    android:orientation="horizontal"          
    android:background="@drawable/border"
    android:layout_toLeftOf="@+id/teamPosition"          
    >
    <ImageView
            android:id="@+id/teamIcon"
            android:src="@drawable/logo1"
            android:layout_width="20dip"            
            android:layout_height="fill_parent"                    
            android:scaleType="fitXY"
            android:textStyle="bold"
       android:textSize="16sp" 
             />
    <TextView  android:id="@+id/teamName"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
        android:gravity="center"                        
       android:textColor="#000000"  
       android:textStyle="bold"
       android:textSize="16sp"      
       android:text="blabla" />
    </RelativeLayout> 
```

我试过“center_horizo​​ntal”但没有成功。我需要 ImageView 将在 TextView 的右侧。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T11:53:18.880

> 我试过“center_horizo​​ntal”但没有成功。我需要 ImageView 将在 TextView 的右侧。

=> 试试`android:layout_centerInParent="true"`你的 TextView，并`android:layout_toRightOf="@+id/teamName`在你的 ImageView 中使用。

# database - 两机合二为一

> ID：11827711
> 
> 赞同：0
> 
> 时间：2012-08-06T11:52:26.113
> 
> 标签：database, linux, hosting

我有两台服务器机器，我安装了 Linux 服务器。我想用两台机器托管一个网站。当一台机器出现拥塞时，用户应该被引导到机器。两台机器都应该有一个数据库交错在一起。我希望两台机器平等共享资源。如果一台机器发生故障，另一台机器应该继续工作，用户不应该注意到变化。有什么办法可以更改这些机器的文件以同时工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:09:46.977

1.  您可以在应用服务器的顶部使用负载平衡器。请参阅[http://tomcat.apache.org/connectors-doc/generic_howto/loadbalancers.html](http://tomcat.apache.org/connectors-doc/generic_howto/loadbalancers.html)

2.  您可以在其中一台机器上拥有数据库，并允许另一台机器上的用户对您的应用程序的架构进行 RW 访问。

3.  负载均衡器中有一个故障转移设置，您可能需要挖掘以重定向所有流量，以防您的一台服务器出现故障。

我很久以前就搬到了 AWS，这些东西用 ELB 真的很容易做到。

# php - 用于覆盖 Mage 核心加密模型的模块

> ID：11827717
> 
> 赞同：3
> 
> 时间：2012-08-06T11:52:51.190
> 
> 标签：php, magento

我想覆盖/扩展`Mage_Core_Encryption_Model`以处理旧密码。

我正在将旧站点数据迁移到 magento 中。我的旧网站加密方法是 Sha-1。但是magento在核心加密方法中使用md5 + text。我已经手动更改了核心模块并正确迁移，但现在我想为此创建一个自定义模块（迁移不加密，迁移后通过 sha-1 覆盖 md5 方法）

我如何创建一个自定义模块来覆盖我更改的核心代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T12:38:26.343

如果我理解正确，您需要一个模块来用 sha1 替换 Magento 中的 md5 哈希机制？

我不会在这里创建整个模块，而只是关键部分。如果您有兴趣作为一个完整的示例来参考，我不久前创建了一个模块，它将 md5 哈希替换为您可以查看的 sha512 - [https://github.com/drewhunter/BetterHash](https://github.com/drewhunter/BetterHash) - 您显然需要稍微修改它以处理 sha1)

所以本质上你需要覆盖的[hash()](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Model/Encryption.php#L83)方法`Mage_Core_Model_Encryption`

您的模块 config.xml 将需要以下内容：

**文件：** app/code/local/Yourcompany/Yourmodule/etc/config.xml

```
<?xml version="1.0"?>

<config>
    <modules>
        <Yourcompany_Yourmodule>
            <version>1.0.0</version>
        </Yourcompany_Yourmodule>
    </modules>
    <global>
        <helpers>
            <core>
                <encryption_model>Yourcompany_Yourmodule_Model_Hash</encryption_model>
            </core>  
        </helpers>
    </global>
</config> 
```

然后利用重写：

**文件：** app/code/local/Yourcompany/Yourmodule/Model/Hash.php

```
<?php

class Yourcompany_Yourmodule_Model_Hash extends Mage_Core_Model_Encryption
{
    public function hash($data)
    {
        return sha1($data);
    }
} 
```

# math - 用方程三角坐标

> ID：11827718
> 
> 赞同：1
> 
> 时间：2012-08-06T11:52:51.660
> 
> 标签：math, equation, equation-solving

好的，我知道在这里问这听起来很愚蠢，但它与编程有关。

我正在开发一款游戏，我正在考虑实现一个系统，该系统允许用户对他们的 3D 坐标进行三角测量以定位某物（例如，用于某项任务）。我还希望能够让用户使他们用于三角测量的点的坐标具有用户确定的坐标（因此该位置的坐标是相对的，可能通过设置信标或其他方式）。

我有一种计算点之间距离的方法，所以基本上我可以计算三角形/金字塔边的长度以及除了我所追求的坐标之外的所有长度。我已经很久没有做过任何三角函数了，我对 sin、cos 和 tan 函数很生疏，我觉得它们是必需的，但不知道如何实现它们。

谁能给我演示一下我将如何以数学/编程方式进行此操作？

额外信息：我的函数返回两个点之间的确切距离，假设您将两个点分别设置为 0,0,0 和 4,4,0，并且这些点设置为缩放（游戏世界分为一个非常大的 3d 网格，每个“块”区域由 3d 坐标表示）然后它会返回一个大约 5.6 的值。

关于它变化的关键是用户可以设置点，所以说他们设置一个点来读取 0,0,0，实际位置可能是 52,85,93。但是，如果他们然后计算块并正确设置他们的其他点（例如，在实际点 56、89、93 处设置点 4、4、0）然后最终结果将返回相对位置（例如，他们试图定位的对象在实际点 152 , 185, 93，它将返回相对值 100,100,0)。我需要能够计算它知道除了它试图定位的每个点之外的每个点，以及所有点之间的距离。

另外，请不要问为什么我不能只使用真实坐标来计算它，我希望在计算结果时将方程式显示在屏幕上。7

示例：这是一个图表 ![示例图](../Images/78e4347921d86cb8ec34e377ff942e63.png)

想象一下，这些是我在平地上的游戏中的点。我想知道f点。我知道点 d 和 e 以及边 A、B 和 C 的值。

仅使用我知道的数据，我需要找出如何做到这一点。

回复编辑：

经过多天的努力，肖恩·肯尼（Sean Kenny）为我提供了他的时间、耐心和智慧，因此我现在有了一个三角测量方法的工作实施。

我希望在测试时放置代码的不同语言等效项，以便将来的编码人员可以使用此代码而不会遇到与我相同的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:17:06.027

我花了一些时间研究解决方案，但我认为实施者，即您，应该知道它在做什么，所以以后遇到的任何错误都可以解决。因此，我将以强烈暗示的形式给出我的答案。

首先，我们可以计算出一个从 d 到 e 的向量：如果我们将坐标视为位置向量而不是绝对坐标，我们如何确定从 d 到 e 的向量是什么？想想如果你只知道你开始和结束的地方，你将如何确定你移动的位移？位移是一条直线，点 A 到 B，没有偏差，不是：我不得不绕着那房子走，所以我走得更远。一条直线。如果您从这一点开始，`(0,0)`那将很容易。

其次，余弦法则。你知道这是什么吗？如果没有，[请继续阅读](http://www.ucl.ac.uk/mathematics/geomath/trignb/trig12.html)。我们如何重新排列链接中给出的形式以找到`d`向量`DE`和之间的角度`DF`？请记住，您需要角度，而不是角度的函数（记住 cos 是函数）。

接下来我们可以使用称为[标量积](http://hyperphysics.phy-astr.gsu.edu/hbase/vsca.html)的向量“技巧” 。注意那里有一个 cos 函数。现在，你可能会想，我们刚刚找到了角度，为什么还要这样做？

定义`DQ = [1,0]`. `DQ`是一个长度为 1 的向量，一个单位向量，沿 x 轴。我们还知道哪个向量？我们知道两个位置向量吗？

一旦我们有两个向量（我希望你计算出另一个），我们就可以使用标量积来找到角度；同样，只是角度，而不是它的函数。

现在，希望我们有两个角度。我们可以从另一个角度得到另一个角度到我们想要的坐标`DF`吗？早先使用单位向量的选择不是任意的。

标量乘积，经过一些抵消，给我们这个：纵坐标`cos(theta) = x / r` 在哪里，`x`是边 A 的长度。`x``F``r`

最终结果是：

```
theta = arccos( xe / B ) - arccos( ( (A^2) + (B^2) - (C^2) ) / ( 2*A*B ) ) 
```

哪里`theta`是单位向量沿`y = 0`原点所在的直线形成的角度`d`。

有了这些信息，我们可以找到点`f`相对于的 x 和 y 坐标`d`。如何？同样，使用标量积。其余的相当容易，所以我会给你。

```
x = r.cos(theta)

y = r.sin(theta) 
```

从基本的三角学。

我不建议尝试将其编码为一个值。

相反，试试这个：

```
//pseudo code
dx = 0
dy = 0  //initialise coordinates somehow
ex = ex
ey = ey
A = A
B = B
C = C

cosd = ex / B
cosfi = ((A^2) + (B^2) - (C^2)) / ( 2*A*B)
d = acos(cosd)      //acos is a method in java.math 
fi = acos(cosfi)   //you will have to find an equivalent in your chosen language
                  //look for a method of inverse cos
theta = fi - d

x = A cos(theta)
y = A sin(theta) 
```

将所有变量初始化为可以带小数的变量。例如`float`或`double`在 Java 中。

![伊姆古尔](../Images/67318e8f32e07dfffcb04e30d7728fb6.png)

沿 x 轴的绿色表示 f 的 x 坐标，紫色表示 y 坐标。
蓝色角度是我们试图找到的那个，因为希望你能看到，然后我们可以使用简单的三角函数来计算 x 和 y，因为我们知道斜边的长度。直到 1 的这条黄线是取标量积的单位向量，它沿着 x 轴延伸。

我们需要找到黑色和红色的角度，这样我们就可以通过简单的减法来推断蓝色的角度。

希望这可以帮助。可以对 3D 进行扩展，所有矢量函数在 3D 中的工作原理基本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:18:43.277

如果您有从原点开始的位移，无论这是否是另一个用户定义的坐标，该 3D 点的坐标都是简单的`(x, y, z)`。

如果您从一个点定义这些长度，还需要考虑一个坐标，您可以简单地写出`(x, y, z) + (x1, y1, z1) = (x2, y2, z2)`x2、y2 和 z2 是从`(0, 0, 0)`原点开始的位移。

如果您希望找到该向量的长度，即如果您将 A 到 B 的线定义为 x 轴，那么 x 位移是多少，您可以将 Pythagoras 用于 3D 向量，它的工作原理与 2D 相同：

```
Length l = sqrt((x^2) + (y^2) + (z^2)) 
```

编辑：假设您有一个用户定义的点 A (x1, y1, z1)，并且您想将其定义为原点 (0,0,0)。您有另一个用户选择了点 B (x2, y2, z2)，并且您知道在 x、y 和 z 平面上从 A 到 B 的距离。如果你想弄清楚这一点是什么，关于新的原点，你可以简单地做

```
B relative to A = (x2, y2, z2) - (x1, y1, z1) = (x2-x1, y2-y1, z2-z1) = C 
```

C是向量A>B，向量是一个量，它具有大小（线的长度）和方向（从A指向B的角度）。

如果你想计算出 B 相对于原点 O 的位置​​，你可以做相反的事情：

```
 B relative to O = (x2, y2, z2) + (x1, y1, z1) = (x1+x2, y1+y2, z1+z2) = D 
```

D 是向量 O>B。

编辑2：

```
//pseudo code
userx = x;
usery = y;
userz = z; 
//move origin
for (every block i){
 xi = xi-x;
 yi = yi - y;
 zi = zi -z;
} 
```

# ios - 为什么“[self class] == [super class]”？

> ID：11827720
> 
> 赞同：6
> 
> 时间：2012-08-06T11:53:04.867
> 
> 标签：ios, objective-c, class, oop, superclass

我希望`[super class]`返回超类的类，但是我发现，使用它返回这个类的类的代码。

**代码**

```
NSLogObject([self class]);
NSLogObject([super class]);
NSLogObject([self superclass]);
NSLogBool([self class] == [super class]); 
```

**输出**

```
[self class]: MainMenuScene
[super class]: MainMenuScene
[self superclass]: CCScene
[self class] == [super class]:[YES] 
```

有人可以解释为什么会这样吗？我希望它返回与`[self superclass]`.

```
宏：
--------
#define NSLogBool(i) NSLog(@"%s:[%@]", #i, (i) ? @"YES" : @"NO")
#define NSLogObject(o) NSLog(@"%s:[%@]", #o, o) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:59:47.770

`[super class]`调用`super`当前实例（即`self`）上的方法。如果 self 有一个覆盖的版本，那么它会被调用并且看起来会有所不同。由于您不覆盖它，因此调用`[self class]`与调用相同`[super class]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:00:23.760

`super`指超类中的方法实现。如果你不重写你的类中的方法，你的类和它的超类中的实现是一样的。

两者都`[super class]`调用`[self class]`相同的方法，定义在`NSObject`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:52:13.697

虽然 mprivat 和 Sulthan 的答案在技术上是正确的，但目前的情况有点复杂（也很有趣）：

考虑对方法的调用的实现。它（当然）使用对象指针。对象指针是指向结构的指针，其第一个元素 ( `isa`) 是指向对象类的指针。`class`方法（即，正如 mprivat 和 Sulthan 正确指出的那样，在两种情况下都完全相同）遵循此指针来确定类，即始终是**调用对象的类**。

因此，如果 A 是 B 的超类，则由 B 的实例调用`[self class]`和调用都返回 B 的类（**不是**A 的类，由于缺少覆盖，人们可能会期望什么！）。`[super class]`

# php - 回声表的问题

> ID：11827721
> 
> 赞同：0
> 
> 时间：2012-08-06T11:53:09.623
> 
> 标签：php

对于大多数人来说，这可能是一个非常简单的问题，但我自己无法找到解决方案。我刚开始使用基本的 php 并尝试创建一个非常小的画廊脚本，它请求画廊目录中的所有图像并将它们回显到一个表中，该表应该有 4 列并且宽度为 876，我有以下内容：

```
<body>
<table border="0" cellpadding="0" cellspacing="0" id="gallery" width="876">
    <tbody><?php
$dir = "./gallery/"; 
$exten = 'jpg';
if ($handle = @opendir($dir)) 
{
    while (false !== ($file = @readdir($handle))) { 
        $bestand = $dir ."/". $file ;
        $ext = pathinfo($bestand);
        if($ext['extension'] == $exten)
        {   

            echo "<tr><td><a href='/gallery/timthumb.php?src=". $file ."&h=300&'><img src='/gallery/timthumb.php?src=". $file ."&h=134&w=190' target='_blank'></a></td></tr>" ;
        }
    }
    @closedir($handle); 
} 
?>
</tbody></table>
</body> 
```

我的CSS看起来像这样：

```
#gallery { border-collapse: separate; empty-cells: hide;
        border: 0px; background-color: #FFF; }
#gallery td    { border: 0px;   width: 190px;
    height: 163px;  padding-left: 12px; float: left;
    padding-top: 10px; vertical-align: top;
    color: #000000; background-image: url(../images/bg.png); background-repeat: no-repeat; } 
```

我的问题是所有缩略图都在彼此下方而不是彼此相邻，我想要 4 列 219 宽度彼此相邻，如果有更多图片，则新行等。

任何帮助将非常感激！

亲切的问候

问题已解决（非常感谢您的帮助）：

```
<body>
<table border="1" cellpadding="0" cellspacing="0" id="gallery" width="876">
 <?php
  $dir = "./gallery/"; 
  $exten = 'jpg';
  $i = 0;
  $files = array();

  if($handle = @opendir($dir)) 
  {
   while (false !== ($file = @readdir($handle)))
   { 
    $bestand = $dir ."/". $file ;
    $ext = pathinfo($bestand);

    if($ext['extension'] == $exten)
    {   
     $files[] = $file;
    }
   }

   @closedir($handle); 
  }

  $total = count($files);
  $imgPerRow = 4;
  $counter = 0;
  $i = 0;

  if($total > 0)
  {
   foreach($files as $file)
   {
    $i++;
    $counter++;
    if($counter == 1)
    {
     echo '<tr>';
    }

    echo "<td><a href='/gallery/timthumb.php?src=". $file ."&h=300&'><img src='/gallery/timthumb.php?src=". $file ."&h=134&w=190' target='_blank'></a></td>" ;

    if($counter == $imgPerRow)
    {
     $counter = 0;
     echo '</tr>';
    }
    elseif($i == $total)
    {
     for($j = ($counter - $imgPerRow); $j < 0; $j++)
     {
      echo '<td></td>';
     }

     echo '</tr>';
    }
   }
  }
  else
  {
   echo '<tr><td></td></tr>';
  }
 ?>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:58:51.587

在您提供的代码中，您为每个图像创建了新行，因此它们将显示在彼此下方。您需要做的如下：

```
<body>
<table border="0" cellpadding="0" cellspacing="0" id="gallery" width="876">
    <tbody><tr><?php
$dir = "./gallery/"; 
$exten = 'jpg';
$i =0;
if ($handle = @opendir($dir)) 
{
    while (false !== ($file = @readdir($handle))) { 
        $bestand = $dir ."/". $file ;
        $ext = pathinfo($bestand);
        if($ext['extension'] == $exten)
        {   

            echo "<td><a href='/gallery/timthumb.php?src=". $file ."&h=300&'><img src='/gallery/timthumb.php?src=". $file ."&h=134&w=190' target='_blank'></a></td>" ;
        }

      $i++;
      if($i==4){
         echo '</tr><tr>';
         $i=0;
      }

    }
    @closedir($handle); 
} 
?>
</tr>
</tbody></table>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:59:42.227

尝试这个...

```
$countTr = 0;
if ($handle = @opendir($dir)) 
{
    while (false !== ($file = @readdir($handle))) { 
        if($countTr % 4 == 0)
        echo "<tr>";

        $bestand = $dir ."/". $file ;
        $ext = pathinfo($bestand);
        if($ext['extension'] == $exten)
        {   

            echo "<td><a href='/gallery/timthumb.php?src=". $file ."&h=300&'><img src='/gallery/timthumb.php?src=". $file ."&h=134&w=190' target='_blank'></a></td>" ;
        }

        if($countTr % 4 == 3)
        echo "</tr>";

        $countTr++;

    }
    if($countTr % 4 != 0)
    echo "</tr>";

    @closedir($handle); 
} 
```

# c# - DllImport，如何检查DLL是否加载？

> ID：11827722
> 
> 赞同：8
> 
> 时间：2012-08-06T11:53:11.087
> 
> 标签：c#, pinvoke

我正在做 P/Invoke，我正在使用以下方法

```
[DllImport("Authz.dll", SetLastError = true)]
    public static extern BOOL AuthzFreeContext(
        IntPtr phAuthzResourceManager); 
```

即使它工作，它如何保证`Authz.dll`总是加载到我的代码中。假设我`dll`是一些`XXX.dll`在使用之前我应该​​如何检查该 dll 是否已加载的一般情况，这样我就不会得到方法未找到异常。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T11:56:44.523

[`Marshal.PrelinkAll(Type)`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.marshal.prelinkall)

或者

[`Marshal.Prelink(MethodInfo)`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.marshal.prelink)

遗憾的是，文档没有提到如果找不到 DLL 会引发任何异常。我刚刚通过一个简单的应用程序验证了它确实是`DllNotFoundException`被抛出的。

# linux - 使用 Amazon EC2 了解 Linux 分区

> ID：11827723
> 
> 赞同：6
> 
> 时间：2012-08-06T11:53:16.647
> 
> 标签：linux, amazon-ec2

我对 Linux 比较陌生。在我们的一个项目中，我们使用亚马逊的 EC2 实例来处理一些文件。我们在处理后将文件上传到 S3 服务器。EC2 实例使用现有 AMI 启动

最近我收到一个错误，磁盘上没有剩余空间，因此文件处理被停止。我清理了一些旧文件并继续处理。

现在，当我使用 df -h 查看可用空间时

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvda1            9.9G  5.7G  3.7G  61% /
none                  3.7G     0  3.7G   0% /dev/shm
/dev/xvdb             414G  199M  393G   1% /mnt
/dev/xvdc             414G  199M  393G   1% /data 
```

我可以看到我的文件只影响 /dev/xvda1。

我有以下查询

1.  当我看到我的文件只影响 /dev/xvda1 时，其他分区有什么用
2.  看起来我们只有效地使用了 10 GB 的空间，而其他的则被浪费了。如何使用其他空间？我可以将一些磁盘空间移动到 /dev/xvda1 或直接将文件存储在其他区域吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:11:24.450

从 的输出中可以看出，分别在和`df -h`上安装了两个大分区。我建议您通过处理其中一个目录中的文件来使用这些分区。如果由于某种原因无法移动处理发生的位置，您可以将分区重新挂载到适当的位置。`/mnt``/data`

例如，如果您的文件在目录中处理`/var/mydir`并且您无法更改，请执行以下操作（以 root 身份）：

```
umount /mnt
mount /dev/xvdb /var/mydir 
```

如果您愿意，当然也可以使用其他分区。

# c# - 使用 c#、asp.net 插入 Outlook 约会

> ID：11827733
> 
> 赞同：2
> 
> 时间：2012-08-06T11:53:59.530
> 
> 标签：c#, asp.net, .net, outlook

我希望在用户日历中插入约会，我可以使用 Microsoft.Office.Interop.Outlook.Application （如下）轻松插入自己的约会，然后将用户添加为收件人，但如果我不想添加自己怎么办，如果我只想添加其他人？这可以以类似的方式完成吗？

谢谢

```
 Microsoft.Office.Interop.Outlook.Application app = null; 
            Microsoft.Office.Interop.Outlook.AppointmentItem appt = null; 
            app = new Microsoft.Office.Interop.Outlook.Application(); 

            appt = (Microsoft.Office.Interop.Outlook.AppointmentItem)app.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olAppointmentItem); 
            appt.Subject = "Meeting "; 
            appt.Body = "Test"; 
            appt.Location = "a room"; 
            appt.Start = Convert.ToDateTime("08/08/2012 05:00:00 PM"); 
            appt.Recipients.Add("a@b.com"); 
            appt.End = Convert.ToDateTime("08/08/2012 6:00:00 PM"); 
            appt.ReminderSet = true; 
            appt.ReminderMinutesBeforeStart = 15; 
            appt.Importance = Microsoft.Office.Interop.Outlook.OlImportance.olImportanceHigh; 
            appt.BusyStatus = Microsoft.Office.Interop.Outlook.OlBusyStatus.olBusy; 
            appt.Save(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:01:40.657

您不能（或不应该）从 ASP.NET 应用程序使用 Outlook API。相反，Exchange Server 提供了允许您与 Exchange Server 交互的[Web 服务 SDK 。](http://msdn.microsoft.com/en-us/library/exchange/dd877012%28v=exchg.140%29)该文档包含如何[在用户邮箱中创建约会](http://msdn.microsoft.com/en-us/library/exchange/aa563060%28v=exchg.140%29)的示例。

您可能必须委派对用于执行 ASP.NET 请求的用户帐户的访问权限才能成功地与 Exchange Server API 交互。

EWS 最初是在 Exchange 2007 中引入的。对于旧版本的 Exchange，您可以使用协作数据对象 (CDO)。Exchange 2003 SDK 包含有关如何[创建约会和会议请求](http://msdn.microsoft.com/en-us/library/exchange/ms870494%28v=exchg.65%29)的文档。

# jquery - 使用 jQuery 在同一包装器中使用来自另一个 DIV 的内容填充 DIV

> ID：11827734
> 
> 赞同：0
> 
> 时间：2012-08-06T11:53:59.047
> 
> 标签：jquery, this, selector

我使用 jQuery 已经有一段时间了，但似乎无法理解这个...

我有一个这样的 HTML 布局：

```
 <div id="wrapper">
            <div class="accordionButton">
              <h2 class="profiletitles">Requested <?php $count = 0; ?></h2>
              <span class="trainingHeaderCount"></span>
            </div>
            <span class="postCount">12</span>
</div> 
```

我正在尝试`<span class="trainingHeaderCount"></span>`用`<span class="postCount">12</span>`.

到目前为止，我所拥有的是：

```
$('span.trainingHeaderCount').html($(this).parent().parent().find('.postCount').html()); 
```

但它没有将任何内容加载到 DIV 中。这可能与滥用“this”有关，但不确定..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:59:53.217

在您的代码中

```
$('span.trainingHeaderCount').html($(this).parent().parent().find('.postCount').html()); 
```

`$(this)`未定义。

试试这个：

```
$this = $('.trainingHeaderCount')
$this.html($this.parent().parent().find('.postCount').html());​ 
```

## [看演示](http://jsfiddle.net/akhurshid/JGwL5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:00:26.647

您可以将一个函数传递给`.html()`，该函数内部`this`将引用具有其 HTML 集的当前元素。例如：

```
$('span.trainingHeaderCount').html(function() {
    return $(this).parent().parent().find('span.postCount').html();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:58:06.863

试试这个

```
var spans = $('span.trainingHeaderCount');

$.each(spans,function(){
   $(this).html( $(this).parent().next().html() );      
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:00:10.533

试试这个：

```
$('span.trainingHeaderCount').html(function(){
     return $(this).parent().siblings('.postCount').text()
}) 
```

[演示](http://jsfiddle.net/QYnDF/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:06:32.657

如果您将包装器设为一个类，这会更好，这样您就可以在页面上拥有多个：（您必须将#wrapper 更改为 .wrapper）

```
 ​$('#wrapper').each(function(index, element){
    $(element).find('.trainingHeaderCount').html($(element).find('.postCount').html());
    });​​​​​​​​​​​​​​​ 
```

这样，如果您需要将跨度更改为 div 并返回等，您可以在页面上移动标记。

# orchardcms - 通过 INavigationProvider 将菜单项添加到主菜单但它不会显示？

> ID：11827737
> 
> 赞同：5
> 
> 时间：2012-08-06T11:54:12.090
> 
> 标签：orchardcms

使用 Orchard cms 1.5.1 我创建了一个模块，其中包含从 Web 服务获取列表的控制器。启用此模块后，我想在主菜单中添加一个菜单项。为此，我创建了 MainMenu，如下所示：

```
public class MainMenu:INavigationProvider
{
    public Localizer T { get; set; }
    public String MenuName
    {
        get { return "main"; }
    }
    public void GetNavigation(NavigationBuilder builder)
    {
        builder.Add(menu => menu.Add(T("Fetched List"), "4", item => item.Action("Index", "FetchedList")));
    }
} 
```

启用我的模块后，导航不会显示该菜单项。难道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:32:41.243

从 Orchard 1.5.0 开始，`INavigationProvider`不用于在前端构建菜单（尽管它仍然用于构建仪表板的管理菜单）。您需要实现`IMenuProvider`或`INavigationFilter`。[有关一些建议，请参阅 David Hayden 博客上的这篇文章](http://www.davidhayden.me/blog/dynamically-injecting-menu-items-in-orchard-cms)。您还可以在[Orchard.Projections](http://orchardprojections.codeplex.com/SourceControl/changeset/view/a2ed93910303#Navigation/NavigationQueryProvider.cs)和[Orchard.CulturePicker](http://orchardculturepicker.codeplex.com/SourceControl/changeset/view/2621084ed8e7#Services/LocalizableMainMenuNavigationFilter.cs)中找到很好的示例。

# vim - 我可以在 ViM 中运行当前脚本或脚本吗？

> ID：11827741
> 
> 赞同：0
> 
> 时间：2012-08-06T11:54:33.873
> 
> 标签：vim, scripting

我正在使用 ViM 开发一个 php 应用程序。有没有捷径可以让我运行`currentEditing.php`？或者，是否有运行的快捷方式`main.php`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:42:42.153

当然，这取决于您的平台，但是当我开发 python 时，我经常只通过执行`:!%`. 命令的冒号（显然），shell 执行的 bang，以及当前文件名的百分比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:58:21.517

您可以使用以下语法在 ViM 中执行 shell 命令：

```
:!command -options arguments 
```

因此，您需要先保存文件，然后运行执行 php.ini 所需的任何命令。

我不懂php，所以让我举一个编译C文件的例子：

```
... editing text
:w main.c                 # save to file
:!gcc -Wall main.c        # compile the code
:!./a.out                 # execute the executable 
```

请注意，`:!`命令是由 shell 运行的，而 ViM 并不了解它。因此，您可以执行*任何*命令。这也意味着该命令不能在已修改的、未保存的缓冲区上运行。

# asp.net-mvc - ASP.NET MVC Web API & StructureMap：“没有默认构造函数”

> ID：11827743
> 
> 赞同：3
> 
> 时间：2012-08-06T11:54:36.970
> 
> 标签：asp.net-mvc, dependency-injection, structuremap, asp.net-web-api

[如本文](http://notebookheavy.com/2012/06/25/setup-structuremap-with-asp-net-web-api-release-candidate/)所述，我将 ASP.NET MVC 4 Web API 项目配置为使用 StructureMap 2.6.2.0 ，但尽管显式调用，但访问`/api/parts`仍返回以下错误：`StructuremapMvc.Start();``Application_Start()`

```
{
  "ExceptionType": "System.ArgumentException",
  "Message": "Type 'MyProject.Web.Controllers.PartsController' does not have
              a default constructor",
  "StackTrace": "   at System.Linq.Expressions.Expression.New(Type type)\r\n 
                    at System.Web.Http.Internal.TypeActivator.Create[TBase](Type instanceType)\r\n   
                    at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)"
} 
```

我实现`IDependencyResolver`并`IDependencyScope`设置了 Web API 依赖解析器，如下所示`~/App_Start/StructureMapMvc.cs`：

```
GlobalConfiguration.Configuration.DependencyResolver =
    new StructureMapHttpDependencyResolver(container); 
```

为什么 Web API 仍然在抱怨默认的构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T16:25:42.513

原来错误描述真的很糟糕。正在调用 StructureMap，但由于缺少连接字符串，无法注入依赖的构造函数参数。

这是我修复它的方法`IoC.cs`：

```
x.For(typeof(IRepository<>)).Use(typeof(MongoRepository<>))
    .CtorDependency<string>("connectionString")
    .Is(yourConnectionString); 
```

我正在这样做（不正确）：

```
x.For<IRepository<SomeEntity>>().Use<MongoRepository<SomeEntity>>(); 
```

当 Web API 中发生内部 StructureMap 异常时，确实应该有一种方法来输出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:36:39.997

很明显，没有调用 DI 来提供控制器实例，但我不知道为什么。您是否尝试在帖子提供的结构映射代码（即位于 github 上的代码）中设置调试断点以确保调用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T15:18:13.530

如果您在某些控制器上遇到此错误，但在其他控制器上未遇到此错误，则可能是另一个问题。

要获得更好的异常信息，请在您的 IDependencyScope 实现中的 GetService 方法覆盖中添加 try / catch 并在 catch 块中设置断点。您将能够获得更好的调试信息。

我知道 OP 已经得到了答案，这仅适用于任何偶然发现并发现它有用的人。

# java - 如何在xhtml jsf页面上呈现数据类中的枚举值

> ID：11827745
> 
> 赞同：0
> 
> 时间：2012-08-06T11:54:50.547
> 
> 标签：java, jsf, facelets

我的数据类中有一个枚举，如下所示

公共枚举 ProcStat {

```
 NOT_READY               ((byte)-1, "Not Ready For Processing"),
    READY_FOR_PROCESSING    ((byte)0,  "Ready For Processing"),
    BEING_PROCESSED         ((byte)1,  "Being Processed"),
    PROCESSED_SUCCESSFULLY  ((byte)2,  "Processed Successfully"),
    MSG_SUPPRESSED          ((byte)98, "Msg suppressed before processing"),
    PROCESSED_ERROR         ((byte)99, "Processed With Error");

    private final Byte statByte; 
    private final String  statusDesc;
    ProcStat(Byte statByte, String statusDesc)
    {
        this.statByte = statByte;
        this.statusDesc = statusDesc;
    }
    @Override
    public String toString()
    {
        return statusDesc;
    }
    protected static ProcStat getProcStat(Byte procStat)
    {
        if (READY_FOR_PROCESSING.statByte.equals(procStat))             
        {
            return READY_FOR_PROCESSING;
        }           
        else if (BEING_PROCESSED.statByte.equals(procStat))             
        {
            return BEING_PROCESSED;
        }
        else if (PROCESSED_SUCCESSFULLY.statByte.equals(procStat))
        {   
            return PROCESSED_SUCCESSFULLY;
        }
        else if (MSG_SUPPRESSED.statByte.equals(procStat))
        {   
            return MSG_SUPPRESSED;
        }           
        else if (PROCESSED_ERROR.statByte.equals(procStat))
        {
            return PROCESSED_ERROR;                 
        }
        else
        {
            return NOT_READY;
        }
    }
    public Byte getStatByte()
    {
        return this.statByte;
    }
}; 
```

Proc_Stat 指的是数据库表中的数字字段，我需要在页面上显示一列，其中显示每行的数字 proc_stat 的相应字符串。这就是我在 xhtml 页面上呈现相同数据类的任何其他字段的方式：

id="dataTable" name="dataTable" var="data"

如何为枚举类型提供输出值？我给这样的： value="#{data.procstat.toString()}" ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:03:42.347

我认为您需要在与方法相同的托管 bean 中创建`getProcStat`方法。就像是：

```
public String getProcStat(Byte byte) {
    return ProcState.getProcState(byte).toString();
} 
```

在 xhtml 中：

```
value="#{yourBean.getProcState(data)}" 
```

# c++ - C++ 跳出向量循环

> ID：11827746
> 
> 赞同：1
> 
> 时间：2012-08-06T11:54:54.450
> 
> 标签：c++, vector

我在一个类中有一个方法`LinkRepository`，我正在检查向量数组中的重复条目`Datalinks`，它是该类的成员。我遍历数组中的所有元素以检查数组中`Datalink* datalink`已经存在的新条目。如果是这样，那么不要添加，只需退出循环。

```
void LinkRepository::SaveLink(Datalink* datalink) {
bool Exist = false;

for(vector<Datalink*>::iterator dl = Datalinks.begin(); dl != Datalinks.end(); ++dl)
{
     if((strstr((*dl)->ParentID, datalink->ParentID) != NULL) && (strstr((*dl)->ChildID,datalink->ChildID) != NULL))
     {
          Exist = true;

          dl = Datalinks.end();
     }
}

    if(!Exist)
    {
        Datalinks.push_back(datalink);
    }
}; 
```

我的程序似乎在语句的下一个循环中崩溃`dl = Datalinks.end();`

我不知道它为什么会崩溃？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T11:56:00.517

代替

```
dl = Datalinks.end(); 
```

和：

```
break; 
```

退出循环

下面是一个简单的例子来说明为什么你的解决方案不能工作：

```
int i = 0;
for (; i != 10; ++i)
{
    i = 10;
} 
```

这个循环永远不会结束，因为在比较之前 i 将递增到 11`i != 10`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T11:57:16.943

它崩溃了，因为首先您将迭代器设置为`Datalinks.end()`，然后在离开此迭代时，`for`循环本身会增加迭代器，从而进行无效操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:57:05.417

```
for(vector<Datalink*>::iterator dl = Datalinks.begin(); dl != Datalinks.end() && !Exist; ++dl)
{
     if((strstr((*dl)->ParentID, datalink->ParentID) != NULL) && (strstr((*dl)->ChildID,datalink->ChildID) != NULL))
     {
          Exist = true;
     }
} 
```

就像每个人都说你正在迭代一个。因此，它会进入不需要的内存位置，最终导致段错误。您必须意识到 ++dl 发生在循环结束时。

此外，在这里使用 break 语句是荒谬的。你已经有一个布尔值，利用它。

# dependency-injection - 使用 NServiceBus DI 配置装饰器

> ID：11827747
> 
> 赞同：1
> 
> 时间：2012-08-06T11:55:07.927
> 
> 标签：dependency-injection, decorator, nservicebus, nservicebus3, property-injection

如何配置 NServiceBus 以正确注入装饰类？

想象一下这个场景：

```
public class A
{
    public IDependency Dependency {get;set;}
}

public class B : IDependency
{
    public IDependency DecoratedDependency {get; set;}
}

public class C : IDependency{} 
```

我想设置我的配置，以便`B`使用`C`注入创建，然后`A`使用注入创建`B`。我不想`A`用`C`注入创建。

如何设置配置以使其执行此操作？感觉我应该使用以下内容：

```
Configure.Instance.Configurer
    .ConfigureComponent<B>(...)
    .ConfigureProperty(x=>x.DecoratedDependency, instanceOfCFromTheContainer);
Configure.Instance.Configurer
     .ConfigureComponent<A>(...)
     .ConfigureProperty(x=>x.Dependency, instanceOfBFromTheContainer); 
```

但我不确定我如何引用这些实例？以及如何确保`C`仅用于`B`' 的属性，并且`B`在容器进行解析时在其他任何地方使用？

还是我需要做一些不同的事情？

# java - 以编程方式执行 POST 请求

> ID：11827748
> 
> 赞同：0
> 
> 时间：2012-08-06T11:55:16.563
> 
> 标签：java, post

使用 Java EE 以编程方式向远程主机发出 POST 请求最简单方便的方法是什么？

我需要发布一些参数，然后读取返回的响应参数的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:56:19.360

我会使用[Apache HttpComponents](http://hc.apache.org)。这是一个用于进行 HTTP 交互的有据可查的可靠库。

我会回避尝试通过基本的 Java SE API 自己编写任何东西。除了*最简单*的场景之外，您会发现您正在做很多工作。

查看[此处](http://hc.apache.org/httpcomponents-core-ga/examples.html)记录的示例- 特别是[POST 示例](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpPost.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:56:49.173

绝对是 Apache Http 客户端！[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:00:57.877

尊重 Apache ..
只需使用**HttpClient**和**PostMethod**。

像ABC一样容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:05:04.213

只需打开与您的网址的连接并发布您的数据。

```
URL wsurl = new URL(url);
URLConnection conn = wsurl.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();
// Get the response
StringBuilder output = new StringBuilder();
BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
while ((line = rd.readLine()) != null) {
   output.append(line);
}
wr.close();
rd.close(); 
```

# asp.net-mvc-3 - 将下拉列表中的选定日期传递回控制器许多选项

> ID：11827756
> 
> 赞同：0
> 
> 时间：2012-08-06T11:55:33.490
> 
> 标签：asp.net-mvc-3

我查看了所有相关问题，但仍然不确定。我是菜鸟，还在学习。

我有这样的看法：

```
<% using (Html.BeginForm("TradeUKKPISearchesDataExtract", "Report")) //action/controller
  { %>
  <div style="padding: 10px; background-color: #eeeeee; width: 250px; border: 1px solid #cccccc;">
    <div style="float: left; width: 100px; padding-top: 3px;">
      <p style="color:Red"><%: Html.DropDownList("Choose a Sunday: ", ((DateTime[])ViewData["Sundays"]).Select(day => new SelectListItem() { Text = day.ToString(), Value = day.ToString() }), "--Select--")%>
      </p>
    </div>
    <div class="clear"></div>
  </div>
  <div style="text-align:right; width: 272px; padding-top: 30px;">
    <input type="submit" id="search-submit" value="Search" />
  </div> 
```

当我点击提交按钮时，我在哪里设置需要返回的值？

在 html.BeginForm 或 Html.DropDownList 中？

我的行动：

```
[HttpPost]
public ActionResult TradeUKKPISearchesDataExtract(DateTime date)
{

  StringBuilder sb = new StringBuilder();

  sb.AppendLine("Title, Total");

  var reportData = _reportingService.GetTradeUKKPISearches(date);
  foreach (var item in reportData)
  {
    sb.AppendLine(String.Concat("\"", item.Key, "\", ", item.Value));
  }

  byte[] textBytes = Encoding.UTF8.GetBytes(sb.ToString());

  return File(textBytes, "application/csv", "TradeUKKPISearchesDataExport.csv");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:10:34.367

的第一个参数`Html.DropDownList()`是 HTML 元素的名称，这就是在表单提交期间识别所选值的方式。所以你应该像这样

```
<p style="color:Red">Choose a Sunday:<%: Html.DropDownList("date", ((DateTime[])ViewData["Sundays"]).Select(day => new SelectListItem() { Text = day.ToString(), Value = day.ToString() }), "--Select--")%> 
```

正确填充您的操作方法中的`date`参数。

# active-directory - Microsoft LCS 2005 无法登录服务器

> ID：11827758
> 
> 赞同：2
> 
> 时间：2012-08-06T11:55:35.050
> 
> 标签：active-directory, sql-server-2008-r2, subdomain, communication

我在我的测试环境中安装了 LCS 服务器，它运行良好。最近我不得不更改这台 LCS 机器作为客户端连接到的 AD 机器的域名和域控制器名称。

域名和 DC 名称更改后，我无法在 MMC 管理单元环境中运行 LCS 2005 服务器

> '计算机不是域的一部分，网络连接丢失'

消息，尽管我能够在域内登录到 LCS 机器，并且属性还显示该计算机是新域名的一部分。

请提出可能出了什么问题以及我可以做些什么来让它运行。

谢谢，阿迪亚

# c# - 服务器返回失败

> ID：11827760
> 
> 赞同：0
> 
> 时间：2012-08-06T11:55:47.193
> 
> 标签：c#, sql-server, smo

[http://www.daniweb.com/software-development/csharp/threads/202843/take-backup-of-sql-server-database-using-c](http://www.daniweb.com/software-development/csharp/threads/202843/take-backup-of-sql-server-database-using-c)

错误：服务器返回失败

我正在使用该线程中的 smo 代码，但无法备份...

我的代码：

```
 Server s = new Server(".\\SQLEXPRESS");
    Backup bk = new Backup();
    bk.Devices.AddDevice(backupText.Text, DeviceType.File);
    bk.Database = "System";
    bk.Action = BackupActionType.Database;
    bk.SqlBackup(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:34:31.357

问题是权限.. 对于连接到 sql server 以获取备份备份权限是必需的。所以请检查权限部分。

# html - 无序列表显示不正确

> ID：11827761
> 
> 赞同：0
> 
> 时间：2012-08-06T11:55:51.000
> 
> 标签：html, css, internet-explorer, firefox

这是相关网页的链接：http: [//www.canning.co.nz/](http://www.canning.co.nz/)

在 IE 中，无序列表以每行之间的最小空白显示。然而，在 Firefox 中，有更多的空白。

我怎样才能修复这个网页，以便无论什么浏览器查看这个页面，无序列表都会显示在 IE 中。

我需要添加特定的文档类型或使用 CSS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:59:46.457

从这些标签中显式删除边距`<p>`以在所有浏览器中具有相似的外观。

```
p {
  margin: 0;
} 
```

这样做的原因是，如果没有提供其他的，浏览器有他们使用的标准样式表。这些样式表在不同的浏览器之间有所不同，因此您必须明确设置一些值或使用 CSS 重置样式（例如，[David Walsh 的这个](http://davidwalsh.name/reset-css)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:47:54.017

****使用重置 CSS ******

 **Reset.CSS 只是 CSS 样式的集合，它删除和消除了 HTML 元素的不一致默认样式。

它只是清除 Web 浏览器的默认值，您无需再次更改每个元素的这些差异。

```
//Reset CSS - include this stylesheet in your html page before your main css file

/* http://meyerweb.com/eric/tools/css/reset/ 
 v2.0 | 20110126
 License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}

/* HTML5 display-role reset for older browsers */

article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}

body {
    line-height: 1;
}

ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:59:42.013

你的`<p>`标签给每个`<li>`标签一个边距，使用

```
ul li p { 
  margin: 0px; 
} 
```

它应该摆脱空白。（或者`p { margin: 0px }`如果您想从所有`<p>`标签中删除它，无论它们是否在列表中，都可以使用）**

# .net - 使用 T4 模板作为 dll

> ID：11827762
> 
> 赞同：0
> 
> 时间：2012-08-06T11:55:50.513
> 
> 标签：.net, templates, dll, t4

有没有办法从 T4 模板创建 dll 并从此 dll 生成代码？现在我需要通过硬编码设置参数，当你保存时（按Ctrl + S），模板开始生成，但必须有一个很好的可重用方式。有人有什么建议吗？

**更新**

我需要一个包含 T4 模板的库应用程序，我可以从任何引用此库的应用程序传递参数并获取生成的代码作为返回。但我不知道如何从 T4 创建一个 dll

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:41:22.507

What you want is Runtime (also called Preprocessed) templates. With these you'll generate the template code rather than the template output. You can then embed that code in any part of your app with no runtime dependencies on T4.

MSDN docs: [http://msdn.microsoft.com/en-us/library/ee844259.aspx](http://msdn.microsoft.com/en-us/library/ee844259.aspx)

Oleg Sych's blog on the subject: [http://www.olegsych.com/2009/09/t4-preprocessed-text-templates](http://www.olegsych.com/2009/09/t4-preprocessed-text-templates)

# opengl-es - 如何旋转 iPhone 相机输出 OpenGLES 纹理

> ID：11827765
> 
> 赞同：0
> 
> 时间：2012-08-06T11:56:01.090
> 
> 标签：opengl-es, opengl-es-2.0

我在 OpenGLES 2.0 中的一个简单平面上映射 iPhone 相机输出时遇到问题。由于某种原因，通过 OpenGL 生成的纹理`CVOpenGLESTextureCacheCreateTextureFromImage`被翻转和旋转。

这是我的情况：我制作了一个解析这个简单平面对象的 Wavefront .obj 加载器：

```
v -0.5 -0.5 0
v 0.5 -0.5 0
v -0.5 0.5 0
v 0.5 0.5 0

vt 0 0 0
vt 1 0 0
vt 0 1 0
vt 1 1 0

f 4/4 3/3 1/1 
f 2/2 4/4 1/1 
```

就我而言，我的纹理映射就像它必须的那样工作。我已经通过将一个简单的 png 图像映射到平面上来验证这一点。它正确显示。

（仅作记录：我在 iPhone 坐标系中加载图像，翻转图像像素以匹配 OpenGL 的左上纹理坐标系并映射所有内容）。结果：有效！

因此，在稍微改组我的代码并将相机像素缓冲区输入我的纹理单元之后，出现了问题（或者这可能是预期的行为，我应该以一种或另一种方式来应对这种情况？欢迎任何建议，只要它是不是 CPU 繁重的代码）。

这是我的代码：其中一些受到[Brad Larson](https://stackoverflow.com/users/19679/brad-larson)的 ColorTracking 示例和 Apple 的 GLCameraRipple 示例的启发。

捕获输出的代码：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    [self.delegate processNewCameraFrame:pixelBuffer];
} 
```

在传递图像缓冲区 ref 之后，它会在这里结束：

```
- (void)updateCameraFrame:(CVImageBufferRef)pCameraFrame
{
    if(cameraTextureMaterial)
    {
        cameraTextureMaterial->updateWithCameraFrame(pCameraFrame);
    }
} 
```

CamerTexture材质：

```
void CameraTextureMaterial::updateWithCameraFrame(CVImageBufferRef pixelBuffer)
{
    if(!_videoTextureCache)
    {
        cout << "No video texture cache" << endl;
        return;
    }

    cleanup();

    CVReturn err;
    size_t width = CVPixelBufferGetWidth(pixelBuffer);
    size_t height = CVPixelBufferGetHeight(pixelBuffer);

    glActiveTexture(GL_TEXTURE0);

    err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault,
                                                       _videoTextureCache,
                                                       pixelBuffer,
                                                       NULL,
                                                       GL_TEXTURE_2D,
                                                       GL_RGBA,
                                                       width,
                                                       height,
                                                       GL_BGRA,
                                                       GL_UNSIGNED_BYTE,
                                                       0,
                                                       &_lumaTexture);
    if (err)
    {
        cout << "Error at CVOpenGLESTextureCacheCreateTextureFromImage" << endl;
    }

    glBindTexture(CVOpenGLESTextureGetTarget(_lumaTexture), CVOpenGLESTextureGetName(_lumaTexture));
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
} 
```

我不包括纹理缓存的初始化和清理，因为这对我的纹理方向问题无关紧要。

关于如何为我的纹理获得正确方向的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:50:00.607

老实说，我没有看到将 OBJ 用于如此简单的几何图形的好处。最后，我们只是在谈论 2 个三角形 :)，它们很容易在您的代码中动态创建。

除了这个“装饰性”注释之外，OpenGL 默认情况下在非翻转图像上工作以进行纹理处理。您从相机链接的纹理很可能默认是翻转的（这在很大程度上取决于格式的互联网数据组织，而不是您打开图片时看到的内容）。

一种快速而肮脏的解决方案可能是使用以下技巧：

```
glMatrixMode(GL_TEXTURE);
glLoadIdentity();
glScalef(1.0f, -1.0f, 1.0f);
glMatrixMode(GL_MODELVIEW); 
```

这应该为您解决问题并节省大量计算能力。

干杯毛里齐奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:04:34.720

通过明智地选择纹理坐标，解决这个问题实际上非常容易。我通过将相机纹理映射到下面的坐标来旋转、翻转和裁剪相机纹理，并将正交场景渲染为一个新纹理，然后在我的场景中使用它。

我使用的坐标：

```
void CameraClipPlaneObject3D::init()
{
    // Create plane object
    vertices = shared_ptr<Vertex3DVector>(new Vertex3DVector());
    vertices->push_back(Vertex3D(1, -1, 0));
    vertices->push_back(Vertex3D(1, 1, 0));
    vertices->push_back(Vertex3D(-1, 1, 0));
    vertices->push_back(Vertex3D(-1, -1, 0));

    // Create texture coords
    textureCoords = shared_ptr<Texture2DVector>(new Texture2DVector());
    textureCoords->push_back(Texture2D(0.875, 0));
    textureCoords->push_back(Texture2D(0.125, 0));
    textureCoords->push_back(Texture2D(0.125, 1));
    textureCoords->push_back(Texture2D(0.875, 1));

    // Create indices
    indices = shared_ptr<IndexVector>(new IndexVector());
    indices->push_back(0);
    indices->push_back(1);
    indices->push_back(2);
    indices->push_back(2);
    indices->push_back(3);
    indices->push_back(0);
} 
```

以下是我将平面渲染为新纹理的方法：

1.  首先像平常一样创建纹理（不要忘记纹理过滤）
2.  然后像往常一样创建一个帧缓冲区
3.  将纹理颜色缓冲区附加到这个新帧缓冲区的颜色附件：
4.  在您的渲染循环中，绑定到这个新的帧缓冲区并渲染您的场景。

一些示例代码：

```
void TextureRenderTarget::init()
{
    // Create texture to render to
    texture = new RenderTexture(width, height, GL_LINEAR, GL_LINEAR);

    // Create framebuffer and attach texture to framebuffer
    framebuffer = new Framebuffer(width, height);
    framebuffer->attachTexture(texture);
} 
```

附上代码：

```
void Framebuffer::attachTexture(Texture *texture) const
{
    glBindFramebuffer(GL_FRAMEBUFFER, handle);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture->getHandle(), 0);
} 
```

# iphone - 在 Storyboard 中实现 AlertBox

> ID：11827769
> 
> 赞同：0
> 
> 时间：2012-08-06T11:56:22.527
> 
> 标签：iphone, ios, xcode, storyboard, alert

对于我的项目，我使用故事板和 arc，现在我想实现一个 AlertBox，我可以在其中使用用户名和密码注册我。

首先我检查我是否已经注册了一个查询（已经实现）。如果我已经注册，则不应出现警报框，而应显示我的正常视图。如果我没有注册，AlertBox 应该会出现，我必须注册我的设备（连接到 AD）。

注册和连接到 AD 的部分，SQL-Server 已经实现。我只想知道如何在我的故事板中“弹出”这样一个带有 2 个文本字段和标签的警报框。

如果您知道任何示例代码/教程，我会很高兴:)

我希望你能帮我解决这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:54:12.427

您可以在此处找到更多信息：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

您只需创建一个 UIAlertView 并将其样式设置为 UIAlertViewStyleLoginAndPasswordInput。

然后使用委托的方法来获取文本字段中的值。

这是一个小示例：http: [//mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/](http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/)

# javascript - Values between range in javascript array

> ID：11827781
> 
> 赞同：9
> 
> 时间：2012-08-06T11:57:20.047
> 
> 标签：javascript, arrays

I have an array sorted in ascending order in java script which contains dates in milliseconds.

```
// Sample data; This may grow upto 1k or 2k
var dates = [1333391400000,1335292200000,1335810600000,1336329000000,1336933800000,1337020200000,
1337193000000,1337538600000,1337625000000,1337797800000,1338316200000,1338921000000,
1339093800000,1339439400000,1340303400000,1341772200000,1342463400000,1343068200000]; 
```

I don't have start and end index. I have values. I need to get all dates between 2 dates (Min and Max) from the java script array. I am getting this array from Java through JSON.

Here is the method to get dates between min and max:

```
function getDatesBetweenRange(min,max){
    var subArray = [];
    var value, jCntr=0;
    for(var iCntr=0;iCntr<dates.length;iCntr++){
         value = dates[iCntr];
         if(value>max)
             break;
         if(value >=min && value <=max){
             subArray[jCntr++]= value;
         }
    }
    return subArray;
} 
```

As array is in ascending sorted order; I am breaking loop if I get max value than the provided max value in the argument.

Is there any other efficient way to get values from Java Script array ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:26:56.837

Here's a semi binary filter method that seems [more efficient](http://jsperf.com/filterarray) (at least in my browsers - Chrome, Firefox, IE9)

```
function filterBinary(arr,min,max){
 var len   = arr.length
    ,up    = -1
    ,down  = len
    ,rrange= []
    ,mid   = Math.floor(len/2) 
 ;
 while (up++<mid && down-->mid){
    if (arr[up]>=max || arr[down]<=min){break;}
    if (arr[up]>=min){
      rrange.push(arr[up]);
    }
    if (arr[down]<=max){
      rrange.push(arr[down]);
    }
 }
 return rrange;   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:25:44.943

You might use [binary search](http://en.wikipedia.org/wiki/Binary_search_algorithm) to get the indizes, then use [slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice):

```
Array.prototype.sliceRange = function(min, max) {
    if (min > max) return this.sliceRange(max, min);
    var l = 0,
        r = this.length;
    // find an element at index m that is in range
    rough: {
        while (l < r) {
            var m = Math.floor(l + (r - l) / 2);
            if (this[m] < min)
                l = m + 1;
            else if (this[m] > max)
                r = m;
            else
                break rough;
        }
        // l == r: none was found
        return [];
    }
    var lr = m, // right boundary for left search
        rl = m; // left boundary for right search
    // get first position of items in range (l == lr)
    while (l < lr) {
        m = Math.floor(l + (lr - l) / 2);
        if (this[m] < min)
            l = m + 1;
        else
            lr = m;
    }
    // get last position of items in range (r == rl)
    while (rl < r) {
        m = Math.floor(rl + (r - rl) / 2);
        if (this[m] > max)
            r = m;
        else
            rl = m + 1;
    }
    // return the items in range
    return this.slice(l, r);
} 
```

([Demo](http://jsfiddle.net/WHg9t/2/))

* * *

Yet, @Qnan's approach to do only one and a half searches (instead of my three half searches) is more straightforward and should not suffer any disadvantages. I only would use loops that result in exact indices:

```
Array.prototype.sliceRange = function(min, max) {
    if (min > max) return this.sliceRange(max, min);
    var l = 0,
        c = this.length,
        r = c;
    // get first position of items in range (l == c)
    while (l < c) {
        var m = Math.floor(l + (c - l) / 2);
        if (this[m] < min)
            l = m + 1;
        else
            c = m;
    }
    // get last position of items in range (c == r)
    while (c < r) {
        var m = Math.floor(c + (r - c) / 2);
        if (this[m] > max)
            r = m;
        else
            c = m + 1;
    }
    // return the items in range
    return this.slice(l, r);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T18:10:43.003

The problem with trying to optimize the loop like this (breaking out of the sorted list after max is reached) is that you are doing a check each time you iterate. Its faster in some cases to just iterate through the entire list. Particularly when the values you are searching for are at the end of the list (e.g. more recent dates)

But, if it makes a difference you need a binary search algorithm. Lodash has a function that uses a binary search to retrieve the index where a value would be inserted. Combine this with slice and the result should be optimal.

**Using [Lodash][1]**

```
// sliced :  get all values between+including min-max from sorted array of numbers
// @param array sorted timestamps
// @param min timestamp minimum
// @param max timestamp maximum
function sliced(array,min,max){
    return array.slice(_.sortedIndex(array, min),_.sortedIndex(array, max)+1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T12:31:55.830

Here's roughly what the binary search would look like in this case

```
var dates = [1333391400000,1335292200000,1335810600000,1336329000000,1336933800000,1337020200000,
1337193000000,1337538600000,1337625000000,1337797800000,1338316200000,1338921000000,
1339093800000,1339439400000,1340303400000,1341772200000,1342463400000,1343068200000];

function getDatesBetweenRange(min, max) {
    var subArray = [];
    var value, iCntr;
    var start, end;

    var low = 0, high = dates.length - 1;
    while (high - low > 1) {
        centre = Math.floor((high + low) / 2);
        if (dates[centre] < min)
            low = centre;
        else 
            high = centre;
    }
    start = low;
    high = dates.length - 1
    while (high - low > 1) {
        centre = Math.floor((high + low) / 2);
        if (dates[centre] > max)
            high = centre;
        else 
            low = centre;
    }
    end = high;

    for (var i = start; i < end; i++) {
        value = dates[i];
        if (value < min) {
            continue;
        }
        if (value > max) {
            break;
        }
        subArray.push(value);
    }
    return subArray;
}

console.log(getDatesBetweenRange(1337193000000, 1337797800000));​ 
```

This follows the code by @Stano, except that binary search is ran twice to identify the tighter bounds. It can be improved, of course.

Here's the fiddle [http://jsfiddle.net/EJsmy/1/](http://jsfiddle.net/EJsmy/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:03:40.293

```
 function getDatesBetweenRange(min,max)
    {   
      var subArray = dates.slice(0,dates.length-1);

      for(var iCntr=0;iCntr<dates.length;iCntr++)
       {
       if(!(dates[iCntr] >=min && dates[iCntr] <=max))
          {
             subArray.splice(iCntr,1); 
          }
        }
       return subArray; 
   } 
```

# php - 为什么mysqli不起作用？

> ID：11827784
> 
> 赞同：-1
> 
> 时间：2012-08-06T11:57:30.060
> 
> 标签：php, oop, mysqli

```
class mysql{

    function __construct(){
        $this->connect();
    }

    function __destruct(){
        $mysqli = $this->connect();
        $mysqli->close();
    }

    public function connect(){

        static $mysqli;

        require_once(ROOT_PATH.'/config/db_conf.php');

        @$mysqli = new mysqli($sql_login['host'], $sql_login['user'], $sql_login['password'] , $sql_login['database'], $sql_login['port']);

        if(!$mysqli){
            throw new Exception("Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error);
        }

        return $mysqli;
    }
} 
```

当我尝试连接到 mysql - 一切都很好，但之后我收到警告：`mysqli::close(): Couldn't fetch mysqli in...`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:11:09.863

直接回答问题：

1.  移动“静态 $mysqli;” 成为一个类变量“var $mysqli;”。
2.  将连接字符串移动到构造中。（为什么有一个只以这种方式调用另一个函数的函数？除非你要第二次连接=不太可能，除非你在搞乱多个连接？）。
3.  当你连接时，使用类变量（不是静态的。像 hakre 所说的那样丢失@。）
4.  当您破坏时，不要重新创建新连接，只需关闭您拥有的连接（正如 Yazmat 所说）。

但是：你有这门课的计划吗？mysqli 本身就是一个类，可能会在这个阶段为您提供所需的一切。我会先使用基类，然后再对其进行增强，然后在您更清楚需要额外功能的地方时对其进行增强。一开始保持简单:)

# git - 拉取时出现 Git 错误：“不允许操作”

> ID：11827785
> 
> 赞同：0
> 
> 时间：2012-08-06T11:57:30.163
> 
> 标签：git, github, git-tower

从远程分支拉取更改时，Git 向我抛出此错误：

> 来自[https://github.com/JackWebbHeller/MyProject](https://github.com/JackWebbHeller/MyProject)
> 
> * 分支主 -> FETCH_HEAD
> 
> 错误：无法取消链接旧的“MyProject/folder/directory/index.html”（不允许操作）

这取自 Tower for Mac 的成绩单。任何人都可以建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:58:44.880

您可能`index.html`在另一个编辑器中打开了文件。

该文件在服务器上已更改，git 尝试对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T16:46:33.570

另一种可能的情况是，如果您在 mac 上并且文件已被标记为“锁定”，在这种情况下，文件是只读的，git 无法删除它。解决方案是检查查找器中的文件并删除“获取信息”选项中的标志。

# java - 如何在 ANTLR 重写中带上节点的子节点？

> ID：11827790
> 
> 赞同：2
> 
> 时间：2012-08-06T11:57:46.003
> 
> 标签：java, parsing, antlr, antlr3, abstract-syntax-tree

我有一条要拆分的规则，因为我也想在其他规则中重复使用相同的子规则。原始版本工作正常：

```
type
  : ( basicType -> basicType )
  ( '*' -> ^(TYPE_POINTER basicType)
  | '[' ']' -> ^(TYPE_DYN_ARRAY basicType)
  | '[' IntegerLiteral ']' -> ^(TYPE_STATIC_ARRAY IntegerLiteral basicType)
  | '[' IntegerLiteral '..' IntegerLiteral ']' -> ^(REF_TYPE_SLICE IntegerLiteral IntegerLiteral basicType)
  | '[' type ']' -> ^(TYPE_MAP_ARRAY type basicType)
  )?
  ; 
```

这条规则可以将一个普通类型（basicType，它可以是引用或主要类型，如 int、char 等）放在不同的 AST 节点下，使其成为指针、数组等。这在类似 C 的语言中很常见。

但是，如果我这样拆分：

```
basicType2
  : '*' -> ^(TYPE_POINTER)
  | '[' ']' -> ^(TYPE_DYN_ARRAY)
  | '[' IntegerLiteral ']' -> ^(TYPE_STATIC_ARRAY IntegerLiteral)
  | '[' IntegerLiteral '..' IntegerLiteral ']' -> ^(REF_TYPE_SLICE IntegerLiteral IntegerLiteral)
  | '[' type ']' -> ^(TYPE_MAP_ARRAY type)
  ;

type
  : ( basicType -> basicType )
    ( basicType2 -> ^(basicType2 basicType) )?
  ; 
```

一切看起来都很好，解析不会受到影响，但是在 AST 中，basicType2 的孩子完全丢失了。在 TYPE_STATIC_ARRAY、REF_TYPE_SLICE 或 TYPE_MAP_ARRAY 的情况下，只会将根复制到类型之上，但缺少子节点。

我调试了解析器代码，在我看来，CommonTree 类的复制构造函数在不复制子项时调用，只有令牌和源范围信息。有没有办法通过重写规则将 CommonTree 节点及其子节点带到另一个节点的顶​​部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:05:22.047

始终使用单个标记作为树的根：*而不是*另一棵树，就像你在做的`basicType2`那样：

```
type
  : ( basicType -> basicType )
    ( basicType2 -> ^(basicType2 basicType) )?
  ; 
```

试试这个：

```
grammar ...

options { ... }

tokens { T2; }

...

type
  : ( basicType -> basicType )
    ( basicType2 -> ^(T2 basicType2 basicType) )?
  ;

... 
```

# objective-c - 为什么不使用 autoreleasepool 块不会引发错误？

> ID：11827794
> 
> 赞同：0
> 
> 时间：2012-08-06T11:58:01.390
> 
> 标签：objective-c, nsthread, nsautoreleasepool

我知道当我们使用自定义线程来创建对象并使用它们时。我在 iOS 应用程序中尝试了以下代码，它没有抛出任何错误。为什么？

```
-(void)Sample{

            NSLog(@"Sample");
            NSString *temp= @"asdfasdf";

            NSArray *tempAray = [NSArray arrayWithObject:temp];

            NSLog(@"Print it %@%s",temp,__FUNCTION__);

}

-(void)viewDidLoad{

            [super viewDidLoad];
            [NSThread detachNewThreadSelector:@selector(Sample) toTarget:self withObject:@"NSSstint"];
            // Do any additional setup after loading the view, typically from a nib.
} 
```

编辑：

我理解如果我将自动释放消息传递给对象，我将泄漏内存。我对示例方法调用使用了以下方法实现：即使现在我也没有收到以下消息：

```
*** __NSAutoreleaseNoPool(): object 0x167ba4 autoreleased without a pool in place - just leaking ***

 -(void)Sample{

    NSLog(@"Sample");
    NSString *temp=[[NSString alloc] initWithFormat:@"Sample"];

    NSArray *tempAray = [NSArray arrayWithObject:temp];
    [tempAray retain];
    [tempAray autorelease];
    [temp autorelease];

    NSLog(@"Print it %@%s",temp,__FUNCTION__);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:12:45.110

它不会出错，因为它只为您提供日志消息。如果您在新线程中自动释放对象而不创建自动释放池，您将收到大量消息，例如

```
*** __NSAutoreleaseNoPool(): object 0x167ba4 autoreleased without a pool in place - just leaking *** 
```

但这*与*抛出 NSExcpetion 不同。此外，您可能从中获得的“它运行良好”的印象是错误的：您会泄漏内存，并且您的应用程序偶尔会因内存不足而崩溃。

# c# - 在 DataGridTemplateColumn 中设置文本组合框

> ID：11827800
> 
> 赞同：0
> 
> 时间：2012-08-06T11:58:11.773
> 
> 标签：c#, wpf, xaml

为什么我不能`Text`在组合框上分配？它不可见：

```
<DataGridTemplateColumn Header="status">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock VerticalAlignment="Center" Text="{Binding name}" Width="130" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <ComboBox Text="111" Style="{DynamicResource ComboBoxStyle}" Height="Auto" 
                                              SelectionChanged="status_SelectionChanged"
                                              Width="130">
.....etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:14:13.143

如果 ComboBox 不是[`IsEditable="True"`](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)，您只能设置 ItemsCollection 中存在的项目。确保您的绑定名称属性值与 Items 中的相同。

```
<ComboBox Text="{Binding name}">
    <ComboBox.Items>
        <ComboBoxItem Content="111" />
    </ComboBox.Items>            
</ComboBox> 
```

# ssas - MDX-将每一行除以基于父级的值

> ID：11827801
> 
> 赞同：1
> 
> 时间：2012-08-06T11:58:11.667
> 
> 标签：ssas, mdx, cube

我处于需要根据不同的行数计算每个会计年度的百分比的情况。

我已经在每年的城市中实现了不同的计数（相当简单的任务），并且达到了立方体中的这两个列表。

第一个列表是给定年份的全州不同计数。第二个列表是给定年份的城市不同计数，百分比基于该城市当年的全州计数。

我的问题是我需要为每个给定年份的百分比列准备一个计算成员。

例如，在 2009 年，城市 1 有 2697 个不同的计数和 32.94% 的百分比增长。（使用的公式 = 2697/8187）。

我试过了

```
([Measures].[Distinct Count])/(SUM(ROOT(),[Measures].[Distinct Count]))
```

但没有运气。

非常感谢任何帮助。

提前致谢。

PS：2009 年全市范围的总和永远不能等于当年全州的不同计数。这是因为我们正在计算城市和州的不同计数。

![在此处输入图像描述](../Images/fbe0d3c9a5cdca4ca3b0e23a079852e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:54:48.560

您需要为此创建一个区域层次结构，例如州 -> 城市。创建一个如下所示的计算。然后在浏览器中把你的层次结构放在左边，销售额和计算的百分比值。

```
([Dim].[Region].CurrentMember, [Measures].[Salesamt]) /
iif(
    ([Dim].[Region].CurrentMember.Parent, [Measures].[Salesamt]) = 0,
    ([Dim].[Region].CurrentMember, [Measures].[Salesamt]),
    ([Dim].[Region].CurrentMember.Parent, [Measures].[Salesamt])
) 
```

# javascript - 如何使用 javascript 或 jquery 运行放置在数组中的函数

> ID：11827803
> 
> 赞同：0
> 
> 时间：2012-08-06T11:58:14.367
> 
> 标签：javascript, jquery, function

我有一个 JavaScript 数组，其中包含 150 个 JavaScript 函数（这些函数返回财务指标）。当我加载我的页面时，我有这个数组。我想知道是否可以在该页面上使用这些加载的功能？

我已将数组转换为字符串，下图显示了它在警报模式下的样子：

[arry 警报模式 http://bsl.site40.net/pic/8cdf49ea54ee.jpg](http://bsl.site40.net/pic/8cdf49ea54ee.jpg)

在上图中，（函数 a，b，c）是我的函数发生的地方，有 150 个函数（字符串 {"itemCode":___}，每次我使用函数时都会重复）。我认为应该有一些字符串替换，然后以某种方式在该页面上插入函数。嗯，我不知道。你能帮助我吗？我还有一个问题：javascript 数组是否可能很长（例如 20000 个字符）？

**编辑**：我的数组有完整的函数代码。在那张照片中，我只显示了他们的名字，以便图片可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:02:52.327

我建议您使用 json 对象而不是数组，这样查找起来会更容易。如果您继续使用数组，则必须遍历数组才能找到正确的函数名/函数。

如果您的 json 对象包含全局声明的函数名称，您可以像这样调用它们

```
var functionName = "myFunc";
window[functionName](); 
```

但是您可能不应该全局声明您的函数，而是将它们存储在某种命名空间中。

如果您的 json 对象包含实际功能（我会推荐这个），您可以调用它

```
var functionName = "myFunc";
myObject[functionName](); 
```

如果您的对象包含作为字符串的函数代码，则必须对其进行评估才能执行它。您的函数需要用括号括起来，我不建议使用这种方法！您最好使用某种 jsonp 动态加载函数。

```
var functionName = "myFunc";
var myFunc = eval('(' + myObject[functionName] + ')');
myFunc(); 
```

一个数组最多可以包含 4,294,967,296 个元素，但是在你达到这个目标之前很久你就会抹杀你的性能，我不太确定 json 对象是否强硬。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:10:01.750

如果函数存储为字符串，则可以使用函数 eval(string)。虽然不建议这样做。如果使用像这样的括号将它们存储为对象 (functionName) 就足够了。

# java - 使用具有 Java API 的服务帐户对 Google API 进行身份验证

> ID：11827817
> 
> 赞同：5
> 
> 时间：2012-08-06T11:58:52.463
> 
> 标签：java, oauth-2.0, google-bigquery

我正在尝试使用 oauth API 通过 Java API 对 google 服务帐户进行身份验证。我希望用它来访问 Google Bigquery。我的 API 请求返回了“无效授权”。

这是代码，它是基本身份验证示例的副本（不是用于 Bigquery .. 而是另一个 Google API）：

```
 /** Global instance of the HTTP transport. */
  private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();

  /** Global instance of the JSON factory. */
  private static final JsonFactory JSON_FACTORY = new JacksonFactory();

  private static Bigquery bigquery;  

public ServiceAccountExample() {

      try {
          try {

            GoogleCredential credential = new  GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
                .setServiceAccountScopes(BigqueryScopes.BIGQUERY)
                .setServiceAccountPrivateKeyFromP12File(new File("GoogleBigQuery-privatekey.p12"))
                //.setRefreshListeners(refreshListeners)
                //.setServiceAccountUser("email.com")
                .build();

            credential.refreshToken();

            bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
                        //.setApplicationName("GoogleBigQuery/1.0")
                        .build();

            listDatasets(bigquery, "publicdata");

            return;
          } catch (IOException e) {
            System.err.println(e.getMessage());
          }
        } catch (Throwable t) {
          t.printStackTrace();
        }

} 
```

SERVICE_ACCOUNT_EMAIL 是表单的电子邮件地址：XXXXXXX@developer.gserviceaccount.com

如果我删除 credential.refreshToken() 行，它会在第一次调用 Bigquery 时在 listsDatasets 中失败...否则它会在 credential.refreshToken().. 上失败，并出现相同的错误。

BigQuery 不接受服务帐号身份验证吗？

我相信我已经通过 API 控制台正确地完成了所有工作。我有：

*   开启对 Big Query API 的访问。
*   在“API 访问”选项卡下创建了一个服务帐户。
*   下载了我的私钥（从上面的代码中引用）。
*   鉴于我的服务帐户用户在“团队”选项卡下“可以编辑”访问权限。
*   启用计费。

我错过了什么吗？还有什么我需要做的吗？

谢谢..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T20:02:28.660

服务帐户授权方法适用于 BigQuery。你不需要打电话`credential.refreshToken()`。确保可以从您的应用程序中读取您的私钥文件。这是一个例子：

```
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson.JacksonFactory;

import com.google.api.services.bigquery.Bigquery;
import com.google.api.services.bigquery.BigqueryScopes;
import com.google.api.services.bigquery.Bigquery.Projects;
import com.google.api.services.bigquery.model.*;

import java.io.File;
import java.io.IOException;
import java.security.GeneralSecurityException;
import java.util.List;

public class BigQueryJavaServiceAccount {

  public static void main(String[] args) throws IOException, InterruptedException, GeneralSecurityException {

    final HttpTransport TRANSPORT = new NetHttpTransport();
    final JsonFactory JSON_FACTORY = new JacksonFactory();

    GoogleCredential credential = new  GoogleCredential.Builder()
      .setTransport(TRANSPORT)
      .setJsonFactory(JSON_FACTORY)
      .setServiceAccountId("SOMETHING@developer.gserviceaccount.com")
      .setServiceAccountScopes(BigqueryScopes.BIGQUERY)
      .setServiceAccountPrivateKeyFromP12File(new File("key.p12"))
      .build();

    Bigquery bigquery = Bigquery.builder(TRANSPORT, JSON_FACTORY)
      .setHttpRequestInitializer(credential)
      .build();

    Projects.List projectListRequest = bigquery.projects().list();
    ProjectList projectList = projectListRequest.execute();
    List<ProjectList.Projects> projects = projectList.getProjects();
    System.out.println("Available projects\n----------------\n");
    for (ProjectList.Projects project : projects) {
      System.out.format("%s\n", project.getProjectReference().getProjectId());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T21:41:49.613

[要使用Google Cloud BigQuery 客户端库](https://googlecloudplatform.github.io/google-cloud-java/) （[Maven 包](https://search.maven.org/#search%7Cga%7C1%7Ca%3A%22google-cloud-bigquery%22)）使用服务帐户密钥进行身份验证，您可以[使用 Application Default Credentials](https://cloud.google.com/bigquery/docs/authentication/getting-started#bigquery-authentication-java)。

首先将`GOOGLE_APPLICATION_CREDENTIALS`环境变量设置为服务帐户 JSON 密钥文件的完整路径。在您的代码中，使用默认实例创建 BigQuery 服务对象。

```
import com.google.cloud.bigquery.BigQuery;
import com.google.cloud.bigquery.BigQueryOptions;
...
BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService(); 
```

这是推荐的方式，因为它可以在多个环境中使用相同的代码，例如在 Google Compute Engine 上，其中服务帐户是内置的，而不是使用密钥文件。

或者，您可能希望[从服务帐户密钥文件手动构建凭据对象，](https://cloud.google.com/bigquery/docs/authentication/service-account-file)并使用它来创建 BigQuery 服务对象。

```
import com.google.auth.oauth2.GoogleCredentials;
import com.google.auth.oauth2.ServiceAccountCredentials;
import com.google.cloud.bigquery.BigQuery;
import com.google.cloud.bigquery.BigQueryOptions;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

...

// TODO: update to your key path. 
File credentialsPath = new File("service_account.json");

GoogleCredentials credentials;
try (FileInputStream serviceAccountStream = new FileInputStream(credentialsPath)) {
  credentials = ServiceAccountCredentials.fromStream(serviceAccountStream);
}

// Instantiate a client.
BigQuery bigquery =
    BigQueryOptions.newBuilder()
        .setCredentials(credentials)
        .build()
        .getService(); 
```

# android - 用于在 android 的 facebook 应用程序上发布的 url

> ID：11827821
> 
> 赞同：0
> 
> 时间：2012-08-06T11:59:00.093
> 
> 标签：android, facebook, http

可以使用 url 直接在 facebook 应用程序上发布，我知道 twitter 使用：

> “twitter://post?message=MessageTest”

iOS 版 Facebook 使用：

> “fb://publish/?text=MessageTest”

有谁知道如何找到要在 android 的 facebook 应用程序上发布的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:10:34.927

您需要使用[FACEBOOK SDK FOR ANDROID](https://github.com/facebook/facebook-android-sdk/) 并应用此插件并在 fb 墙上发布，请查看 本教程[将 Facebook 集成添加到 Android 应用程序](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/)

# gwt - GWT 不呈现封闭的 XHTML 标记

> ID：11827824
> 
> 赞同：2
> 
> 时间：2012-08-06T11:59:08.550
> 
> 标签：gwt, xhtml

我不能让 GWT 生成有效的 XHTML。在我们的项目中，我们使用表格布局，因此页面上有很多表格，它们里面有`<colgroup>`标签和`<col>`标签。无论在主 HTML 模板中放置哪种 doctype ，`<col>`标签都不会关闭。XHTML Transitional 和 XHTML String 都试过了。结果是一样的。

```
<table class="header-grid" cellpadding="0" cellspacing="0">
    <colgroup>
        <col class="header-left">
        <col class="header-center">
        <col class="header-right">
    </colgroup>
    <tbody>
        ...
    </tbody>
</table&gt; 
```

`<input>`元素也没有关闭。我猜可能还有其他未正确关闭的元素，但它们没有在应用程序中使用，或者我没有找到它们。

供参考。GWT 操作 DOM 并且不会将任何插入到内部 HTML 作为文本。它使用 JavaScript 的`appendChild(...)`方法和`doc.createElement(...)`.

该问题在 Web 和 Dev 模式下的 Chrome、Firefox 和 IE 中重现。它发生在不使用 UIBinder 的页面上。

GWT 版本：2.4.0。

主要HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="svg.render.forceflash" content="false"/>
    <meta name="gwt:property" content="locale=en"/>
    <meta http-equiv="X-UA-Compatible" content="IE=8, IE9"/>
    <title>NPQ Facility Management</title>
    <script src="https://maps-api-ssl.google.com/maps/api/js?v=3&amp;sensor=false" type="text/javascript"></script>
    <script type="text/javascript" language="javascript" src="FMInsight.nocache.js"></script>
    <script type="text/javascript" language="javascript" src="gr/abiss/js/sarissa/sarissa.js"></script>

    <script type="text/javascript" src="js/svg-web/svg.js" data-path="js/svg-web" data-debug="false"></script>
    <script type="text/javascript" src="js/svgviewer.js"></script>

    <link media="all" type="text/css"
            href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/base/jquery-ui.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"
            type="text/javascript" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"
            type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <iframe id="__printingFrame" style="width:0; height:0;border: 0"></iframe>
    <iframe id="__gwt_historyFrame" style="width:0;height:0;border:0"></iframe>
</body>
</html> 
```

主模块的 GWT XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to="FMInsight">
    <!-- Inheriting the core Web Toolkit stuff. -->
    <inherits name="com.google.gwt.user.User"/>
    <inherits name="com.google.gwt.inject.Inject"/>

    <inherits name="com.npq.fm.core.common.Commons"/>
    <inherits name="com.npq.fm.svg.viewer.SvgViewer"/>

    <!-- Inheriting the default GWT style sheet. You can change -->
    <!-- the theme of your GWT application by unommenting -->
    <!-- any one of the following lines. -->
    <inherits name="com.google.gwt.user.theme.standard.Standard"/>
    <inherits name="com.google.gwt.user.theme.chrome.Chrome"/>
    <!-- <inherits name="com.google.gwt.user.theme.dark.Dark"/>  -->

    <!-- Other module inherits. -->
    <inherits name="com.google.gwt.xml.XML"/>
    <inherits name="com.google.gwt.i18n.I18N"/>
    <inherits name="com.google.gwt.http.HTTP"/>
    <!-- Other module inherits. -->
    <inherits name="com.google.gwt.user.ClippedImage"/>
    <inherits name="com.google.gwt.maps.Maps" />

    <!-- Compiled languages -->
    <!-- In main file we set only EN language and only in compilation files,
         that inherits from this file define what languages are allowed by
         re-defining locale like in line below:
        <extend-property name="locale" values="en,de,fr,nl,uk"/>
    -->
    <extend-property name="locale" values="en"/>
    <set-property name="locale" value="en"/>
    <set-property-fallback name="locale" value="en"/>

    <!-- This property provider changes from GWT parameter name -->
    <!-- for changing application locale from "locale" to -->
    <!-- property "sap-language". -->
    <property-provider name="locale"><![CDATA[
        var defaultLocale = "en";
        try {
            var locale;

            // Looking for the locale as a url argument in SAP way
            if (locale == null) {
                var args = location.search;
                var startLang = args.indexOf("sap-language");
                if (startLang < 0) {
                    startLang = args.indexOf("locale");
                }
                if (startLang >= 0) {
                    var language = args.substring(startLang);
                    var begin = language.indexOf("=") + 1;
                    var end = language.indexOf("&");
                    if (end == -1) {
                        end = language.length;
                    }
                    locale = language.substring(begin, end);
                    var lowerCase = locale.toLowerCase()
                    locale = lowerCase;
                }
            }

            if (locale == null) {
                // Looking for the locale on the web page
                locale = __gwt_getMetaProperty("locale");
            }

            if (locale == null) {
                return defaultLocale;
            }

            while (!__gwt_isKnownPropertyValue("locale",  locale)) {
                var lastIndex = locale.lastIndexOf("_");
                if (lastIndex == -1) {
                    locale = defaultLocale;
                    break;
                } else {
                    locale = locale.substring(0,lastIndex);
                }
            }
            return locale;
        } catch(e) {
          alert("Unexpected exception in locale detection, using default=" + defaultLocale + ", " + e);
          return defaultLocale;
        }
    ]]></property-provider>

    <!--
        Inspired by Apache log4j PatternLayout:
        http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html
     -->
    <set-configuration-property name="log_pattern" value="%d [%-2p] %F %M: %m%n"/>
    <!--<set-configuration-property name="log_pattern" value="%d [%-2p] %m%n"/>-->

    <set-property name="log_FirebugLogger" value="ENABLED"/>
    <set-property name="log_GWTLogger" value="ENABLED"/>
    <set-property name="log_DivLogger" value="ENABLED"/>

    <!-- Loggers are disabled by default -->
    <set-property name="log_ConsoleLogger" value="DISABLED"/>
    <set-property name="log_SystemLogger" value="DISABLED"/>
    <set-property name="log_WindowLogger" value="DISABLED"/>

    <!-- User Agent -->
    <!-- In main file we set only user-agent to "ie8" and
         only in compilation files, that inherits from this file we re-define
         what user agents should be supported by re-defining locale like
         in line below:
         <set-property name="user.agent" value="gecko1_8,safari,ie6,ie8,ie9"/>
    -->
    <set-property name="user.agent" value="gecko1_8,safari"/>

    <property-provider name="user.agent"><![CDATA[
        var defaultUserAgent = "ie7";
        var ua = navigator.userAgent.toLowerCase();
        var makeVersion = function(result) {
            return (parseInt(result[1]) * 1000) + parseInt(result[2]);
        };

        if (ua.indexOf("opera") != -1) {
            return "opera";
        } else if (ua.indexOf("webkit") != -1) {
            return "safari";
        } else if (ua.indexOf("msie") != -1) {
            if (document.documentMode >= 8 && document.documentMode < 9) {
                return "ie8";
            } else if (document.documentMode >= 9) {
                return "ie9";
            } else {
                return defaultUserAgent;
            }
        } else if (ua.indexOf("gecko") != -1) {
            var result = /rv:([0-9]+)\.([0-9]+)/.exec(ua);
            if (result && result.length == 3) {
                if (makeVersion(result) >= 1008) {
                    return "gecko1_8";
                }
            }
            return "gecko1_8";
        }
        return defaultUserAgent;
    ]]></property-provider>

    <replace-with class="com.npq.fm.core.main.client.commons.browserspecific.impl.BrowserSpecificCommonsGecko">
        <when-type-is class="com.npq.fm.core.main.client.commons.browserspecific.BrowserSpecificCommons" />
        <any>
            <when-property-is name="user.agent" value="gecko"/>
            <when-property-is name="user.agent" value="gecko1_8" />
        </any>
    </replace-with>

    <replace-with class="com.npq.fm.core.main.client.commons.browserspecific.impl.BrowserSpecificCommonsIE">
        <when-type-is class="com.npq.fm.core.main.client.commons.browserspecific.BrowserSpecificCommons" />
        <any>
            <when-property-is name="user.agent" value="ie6"/>
            <when-property-is name="user.agent" value="ie8" />
            <when-property-is name="user.agent" value="ie9" />
        </any>
    </replace-with>

    <replace-with class="com.npq.fm.core.main.client.commons.browserspecific.impl.BrowserSpecificSafari">
        <when-type-is class="com.npq.fm.core.main.client.commons.browserspecific.BrowserSpecificCommons" />
        <any>
            <when-property-is name="user.agent" value="safari"/>
        </any>
    </replace-with>

    <stylesheet src="FMInsight-main.css"/>
    <stylesheet src="res_localized/default.css"/>

    <!-- Specifying the app entry point class. -->
    <entry-point class="com.npq.fm.core.main.client.Main"/>
    <inherits name="org.cobogw.gwt.user.Button"/>
</module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:32:44.613

如果这发生在客户端，那么 GWT 根本不会生成标签。它正在操作 DOM，而您正在使用一种工具将其序列化为 HTML。

`application/xhtml+xml`如果您通过使用内容类型提供原始文档来触发 XML 解析模式，您可能能够说服浏览器序列化为 XHTML 。

也就是说，HTML 是浏览器的原生标记语言，最好使用它与它们进行通信。与其取出 XHTML，不如取出 HTML 并在您将标记发送到的地方使用 HTML 解析器。

# mfc - MFC RibbonBar - 以编程方式最小化？

> ID：11827825
> 
> 赞同：0
> 
> 时间：2012-08-06T11:59:13.357
> 
> 标签：mfc, ribbon

MFC 功能区栏有一个标有“最小化功能区”的菜单项。选择它时，仅显示每个类别的标题，单击标题时会弹出功能区。我想以编程方式强制功能区进入这种状态。不幸的是，我能找到的唯一方法是`ToggleMimimizeState()`[原文如此]，它会根据其当前状态将其置于此状态或将其取出。

查看MFC源代码，菜单命令的工作方式是通过这段代码：

```
case idMinimize:
    if (m_pActiveCategory != NULL)
    {
        ASSERT_VALID(m_pActiveCategory);
        m_pActiveCategory->ShowElements(FALSE);
        RedrawWindow();
    } 
```

`m_pActiveCategory`可以`CMFCRibbonBar`通过方法从类外部获得`GetActiveCategory()`，但不幸的是，类别的`ShowElements()`方法是`protected`，我看不到与公共方法达到相同效果的方法。

似乎也没有一种明显的方法来确定色带当前是否被最小化。

有什么我遗漏的，还是我只需要猜测当前状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:17:07.490

**从CMFCRibbonBar**和**CMFCRibbonCategory**派生两个新类

 **```
class MyCMFCRibbonCategory: public CMFCRibbonCategory
{
public:
    void force_ShowElements(BOOL todo)
    {
        ShowElements(todo);
    }
};

class MyRibbonBar: public CMFCRibbonBar
{
public:
    BOOL is_minimized()
    {
        return m_dwHideFlags == AFX_RIBBONBAR_HIDE_ELEMENTS;
    }

    void minimize_me(BOOL show_minimized)
    {
        MyCMFCRibbonCategory* cc = (MyCMFCRibbonCategory*)GetActiveCategory();
        if (cc != NULL)
        {
            cc->force_ShowElements(!show_minimized);
            RedrawWindow();
        }
    }
}; 
```

然后更改您的 CMainframe 从

```
CMFCRibbonBar   m_wndRibbonBar; 
```

至

```
MyRibbonBar     m_wndRibbonBar; 
```

现在在您的代码中，您可以使用新的两个成员：

```
BOOL MyRibbonBar::is_minimized()
void MyRibbonBar::minimize_me(BOOL show_minimized) 
```

基本示例：

```
void CMainFrame::OnButton2()
{
    if( m_wndRibbonBar.is_minimized() )
        m_wndRibbonBar.minimize_me(FALSE);
    else
        m_wndRibbonBar.minimize_me(TRUE);
} 
```

希望它可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T19:12:09.480

以上的组合对我有用。也就是说，我想将功能区用作主菜单上的一组选项卡式附加功能。但是，我不希望功能区能够保持最大化。我只希望用户单击，查看一些操作，然后消失。

简而言之，防止色带对接或保持最大化。不管你想怎么称呼它。单击选项卡，然后单击功能区上的图标并消失。

指示：

1.  我通过继承 CMFCRibbonBar 派生了我自己的 CMyRibbon 类。（使用类向导完成并制作 MFC 类）
2.  在我们的新 CMyRibbon 类 (ClassWizard) 中为 WM_SIZE 创建一个事件处理程序

```
void CMyRibbon::OnSize(UINT nType, int cx, int cy)
{
    CMFCRibbonBar::OnSize(nType, cx, cy);

    if (!(GetHideFlags() & AFX_RIBBONBAR_HIDE_ELEMENTS))
        ToggleMimimizeState();
} 
```

3.  在 CMainFrm.h 添加此更改： **CMyRibbon m_wndRibbonBar;**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T07:36:07.607

使用 m_wndRibbonBar.ToggleMimimizeState();

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-06T16:01:31.150

只需检查 (m_wndRibbonBar.GetHideFlags() & AFX_RIBBONBAR_HIDE_ELEMENTS) 值。**

# opencv - 如何使用 SIFT 进行图像比较

> ID：11827829
> 
> 赞同：8
> 
> 时间：2012-08-06T11:59:30.807
> 
> 标签：opencv, sift, image-comparison

我最近偶然发现了**C#的****SIFT**实现。我认为玩它会很有趣，所以我就这么做了。

 **该实现为任何给定图像生成一组“兴趣点”。我将如何实际使用这些信息来比较两个图像？

我追求的是一个单一*的“相似值”*。可以从两张图像的两组兴趣点中生成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:15:14.560

您需要在两个图像上运行 SIFT，以便在两个图像中获得兴趣点（我们称之为关键点）。

之后，您需要在两个图像中的关键点之间找到匹配项。在 OpenCV 中有为此目的实现的算法。

相似度的值可以从匹配的数量中计算出来。你可以认为如果你得到超过 4 个点的图像是相同的，你也可以计算它们之间的相对旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:44:46.347

您可以使用匹配数作为相似度指标。**

# c# - 将参数从 c# 传递到 c++

> ID：11827830
> 
> 赞同：0
> 
> 时间：2012-08-06T11:59:32.383
> 
> 标签：c#, c++, .net, com-interop

正如主题所说，尝试将结构从 c# 环境传递给 c++。

定义结构和接口的 c++ 代码：

```
#pragma pack(push, 4)
    struct CEA708CONFIG 
    {
        BYTE                b608Service;            
        BYTE                bCompactStream;         
        BYTE                pActiveServices[63];    
        LONG                lActiveServiceCount;    //
        POINT               ptAlignmentPosition;    
    };
    #pragma pack(pop)

        interface
        __declspec(uuid("{some clsid}"))
        ICEA708Decoder : IUnknown {
            virtual HRESULT SetConfig(IN const CEA708CONFIG* pConfig) = 0;
            virtual HRESULT GetConfig(OUT CEA708CONFIG* pConfig) = 0;
        }; 
```

现在到 c# 代码，我在 c# 中定义了相同的结构

```
 [StructLayout(LayoutKind.Sequential, Pack = 4), Serializable]
    public struct CEA708CONFIG
    {
        public byte is608Service;
        public byte isCompactStream;
        //[MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_UI1)]
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 63)]
        public IntPtr activeServices;
        public long activeServiceCount;
        public Point alignmentPosition;
    }; 
```

以及接受配置结构的相应接口

```
[ComVisible(true), ComImport, Guid("same clsid as above"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface ICEA708Decoder
{
    [return: MarshalAs(UnmanagedType.I4)]
    [PreserveSig]
    int SetConfig([In, MarshalAs(UnmanagedType.Struct)] ref CEA708CONFIG config);
    [return: MarshalAs(UnmanagedType.I4)]
    [PreserveSig]
    int GetConfig([Out, MarshalAs(UnmanagedType.Struct)] out CEA708CONFIG config);
    } 
```

每当我尝试传递结构时，我的问题就会出现，我可以清楚地看到，在执行 c# 代码时，整个结构被初始化为“合理”的值，但是一旦传递给 c++，我看到在事务期间发生了一些事情。

使魔术发生的 c# 代码：

```
 CEA708CONFIG   cc708Config;
            ICEA708Decoder CC708DecoderConfig = CC708Filter as ICEA708Decoder;

            if (CC708DecoderConfig == null)
            {
                throw new ApplicationException("Couldn't get ICEA708Decoder structure");
            }

            byte[] dataByte = new byte[63];
            int    size     = Marshal.SizeOf(dataByte[0]) * dataByte.Length;
            IntPtr pnt      = Marshal.AllocHGlobal(size);

            dataByte[0] = 1;
            Marshal.Copy(dataByte, 0, pnt, dataByte.Length);
            cc708Config.activeServices = pnt;
            if (0 != (hr = CC708DecoderConfig.SetConfig(ref cc708Config)))
            {
                throw new ApplicationException("Couldn't SetConfig() because: " + DirectShowLib.DsError.GetErrorText(hr));
            } 
```

SetConfig 触发的异常是：

> {“无法编组‘CCReIndexer.Graphs.CEA708CONFIG’类型的字段‘activeServices’：托管/非托管类型组合无效（Int/UInt 必须与 SysInt 或 SysUInt 配对）。”：“”}

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:32:14.180

您是否尝试过将数组作为数组传输？

```
[StructLayout(LayoutKind.Sequential, Pack = 4), Serializable]
public struct CEA708CONFIG
{
    public byte is608Service;
    public byte isCompactStream;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 63)]
    public byte[] activeServices;
    public long activeServiceCount;
    public Point alignmentPosition;
};

byte[] dataByte = new byte[63];
cc708Config.activeServices = dataByte; 
```

# c# - WCF：如何在一个单独的项目中实现逻辑来契约接口？

> ID：11827831
> 
> 赞同：3
> 
> 时间：2012-08-06T11:59:32.850
> 
> 标签：c#, wcf

就像标题说的那样，我想将我的逻辑保留在服务合同的单独项目中，这样它就可以保持独立和隐藏。我已经看到它说可以做到这一点，但我找不到任何关于如何做到的例子。

我将所有必要的代码移到了一个不同的项目中，但是当我测试它时，只有类型对客户端可见，而不是方法。

所有方法都标记为`[OperationContract]`在接口中。

我猜必须有一种方法可以将实现逻辑专门连接到合同，而不仅仅是`Class : IInterface`，否则，如果有 2 个类似的类会发生什么，例如：`Class1 : IInterface`和`Class2 : IInterface`？WCF 如何知道要使用哪个类？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T12:24:47.183

我是这样做的（对不起，名字不好，这只是概念）：

1) 为实施创建单独的项目
2) 为服务合同创建单独的项目（以避免循环引用）
3) 添加服务合同项目作为对实施项目的参考
4) 将合同和实施项目添加到宿主项目
5) 更新 Service.svc 完整类型名称

![在此处输入图像描述](../Images/f04984a0bd1c36b2572611f97f8111b2.png)

Service.svc 正文：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Implementation.ServiceImplementation" %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:28:16.877

> WCF 如何知道要使用哪个类？

因为你告诉它，在各种配置文件中。

* * *

我可以衷心地推荐[WCF 手动方式......](http://www.devx.com/codemag/Article/39837/1954)激励的正确方式和你正在尝试做的事情的完整演练 - 我在这里所拥有的只是这种实现的相关点。

您有三个程序集：`Service`, `Client`, `ServiceContracts`（仅限接口）。`Service`并且`Client`两者都参考`ServiceContracts`。`Service`包含实现接口的类。`Client`有**代理**类：

```
using System.ServiceModel;
using ServiceContracts;

public class ExampleServiceProxy : ClientBase<IExampleService>, IExampleService
{
    public string ExampleMethod()
    {
        return Channel.ExampleMethod();
    }
} 
```

客户端`config`文件包含一个指向服务`svc`文件的入口；该服务的`svc`文件如下所示：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Service.ExampleService" 
    CodeBehind="ExampleService.svc.cs" %> 
```

服务`.svc.cs`文件如下所示：

```
using ServiceContracts;

public class ExampleService : IExampleService
{
    public string ExampleMethod()
    {
        return string.Empty;
    }
} 
```

而已！

# list - Struts 2 保留列表值

> ID：11827832
> 
> 赞同：0
> 
> 时间：2012-08-06T11:59:33.730
> 
> 标签：list, struts2

使用struts2如何在单击jsp按钮后保留列表值，完成操作并再次返回jsp？再次单击几次。
我一直在观察，为了保留一个不是列表的变量的值，我只需要使用它的 getter 和 setter 在操作中声明它，并在 jsp 中放置一个隐藏字段或文本字段，但关于列表不要t 那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:09:31.713

您是正确的，我们需要一个 getter 和 setter 来为我们的 action 类中的受尊重的属性发送和接收从 Action 类到 JSP 的日期并且以相反的顺序。

但由于收集，不可能将其存储在单个字段中，因此您在这里几乎没有选择。

如果 List 是一个简单的字符串列表，您可以创建一个逗号分隔的字符串，并可以使用它从操作转到 JSP 并以相反的顺序（很容易将其转换为列表），我不会推荐这种方法。

第二个选项我正在考虑在会话中设置列表，您可以随时根据您的选择在您的操作类中检索列表。

# python - 在附加到列表之前剥离行编辑？

> ID：11827839
> 
> 赞同：2
> 
> 时间：2012-08-06T11:59:52.150
> 
> 标签：python, list, line-endings

好的，我正在编写一个读取文本文件并遍历不同行的程序，但是我遇到的问题是行尾 (\n)。我的目标是逐行读取文本文件并将其写入列表并在将其附加到列表之前删除行尾。

我试过这个：

```
thelist = []    
inputfile = open('text.txt','rU')    

for line in inputfile:
    line.rstrip()
    thelist.append(line) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:02:38.503

字符串在 Python 中是不可变的。所有字符串方法都返回*新*字符串，并且不修改原始字符串，所以该行

```
line.rstrip() 
```

有效地什么都不做。您可以使用列表推导来完成此操作：

```
with open("text.txt", "rU") as f:
    lines = [line.rstrip("\n") for line in f] 
```

另请注意，强烈建议使用该`with`语句打开（和隐式关闭）文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:02:52.133

```
with open('text.txt', 'rU') as f: # Use with block to close file on block exit
    thelist = [line.rstrip() for line in f] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T12:02:21.960

`rstrip`不改变它的参数，它返回修改后的字符串，这就是为什么你必须这样写：

```
thelist.append(line.rstrip()) 
```

但是您可以更简单地编写代码：

```
with open('text.txt', 'rU') as inputfile:
    thelist = [x.rstrip() for x in inputfile] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:02:23.713

我想你需要这样的东西。

```
s = s.strip(' \t\n\r') 
```

这将从字符串的开头和结尾去除空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:02:37.893

`rstrip('\n')`在附加到列表之前在每一行上使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T12:07:59.427

`rstrip`返回一个新字符串。应该是`line = line.rstrip()`。但是，整个代码可能会更短：

```
thelist = list(map(str.rstrip, open('text.txt','rU'))) 
```

UPD：请注意，仅调用`rstrip()`修剪所有尾随空格，而不仅仅是换行符。但是也有一种简洁的方法可以做到这一点：

```
thelist = open('text.txt','rU').read().splitlines() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T12:10:00.910

在 Python 中 - 字符串是不可变的 - 这意味着操作返回一个**新**字符串，并且不修改现有字符串。即，您做对了，但需要使用`line = line.rstrip()`.

# javascript - 针对特定条件抑制页面上的 JavaScript 错误

> ID：11827841
> 
> 赞同：2
> 
> 时间：2012-08-06T11:59:57.017
> 
> 标签：javascript, sharepoint

我在 SharePoint 开发中收到 javascript 错误“Invalid argument on Line: 2 Char: 141544 in sp.ui.rte.js”。这似乎是 Google 在 SharePoint js 文件中的一个已知问题 - [http://wss.boman.biz/Lists/Posts/Post.aspx?List=c0143750-7a4e-4df3-9dba-8a3651407969&ID=69](http://wss.boman.biz/Lists/Posts/Post.aspx?List=c0143750-7a4e-4df3-9dba-8a3651407969&ID=69) 分析影响后我决定与其更改 SharePoint 14 配置单元中的 js，不如仅针对此错误抑制错误消息。我试图做以下事情：

```
ClientScriptManager cs = Page.ClientScript;

            //Check to see if the startup script is already registered.
            if (!cs.IsStartupScriptRegistered("Alert"))
            {
                StringBuilder cstext1 = new StringBuilder();

                cstext1.Append("<script type=text/javascript> window.onerror = function (msg, url, num) {return true;} </");
                cstext1.Append("script>");

                cs.RegisterStartupScript(this.GetType(), "Alert", cstext1.ToString());
            } 
```

问题是这将抑制页面上的所有 js 错误，而不仅仅是 sp.ui.rte.js 错误。是否可以对 URL 进行字符串搜索（http://SHAREPOINT/_layouts/sp.ui.rte.js?rev=uY%2BcHuH6ine5hasQwHX1cw%3D%3D - 站点之间唯一一致的值是 /_layouts/ sp.ui.rte.js? ) 只是搜索并抑制这个确切的错误？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T16:41:34.267

到目前为止，这是我发现并且目前使用的最成功的修复：

```
function fixRTEBug() {
    // This Fix for parentElement bug in RTE should survive Service Packs and CU's
    function SubstituteRTERangeParentElement() {
        var originalRTERangeParentElement = RTE.Range.prototype.parentElement;
        RTE.Range.prototype.parentElement = function () {
            try {
                originalRTERangeParentElement();
            } catch (e) { }
        }
    }
    SubstituteRTERangeParentElement();
}

ExecuteOrDelayUntilScriptLoaded(fixRTEBug, "sp.ui.rte.js"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:17:16.217

在 JS 中使用`try`/`catch`阻塞代码。如果消息与您想忽略的内容匹配，则什么也不做。传播其他一切。

如果您将其更改为分析消息并传播与忽略字符串不匹配的所有内容，则您的原始方法`.onerror`也将起作用。

# sql-server - 无法增加列大小

> ID：11827846
> 
> 赞同：1
> 
> 时间：2012-08-06T12:00:04.570
> 
> 标签：sql-server, sql-server-2000

我需要增加表的列大小，我正在使用下面的查询来增加大小，但我得到了以下错误

```
Alter Table Tabl1 Alter Column Col1 VarChar(6) Not NULL 
```

> 消息 5074，级别 16，状态 1，第 1 行
> 对象 'Tabl1' 依赖于列 'Col1'。
> 消息 5074，级别 16，状态 1，第 1 行
> 统计信息“_WA_Sys_Col1_5070F446”取决于列“Col1”。
> 消息 4922，级别 16，状态 9，第 1 行
> ALTER TABLE ALTER COLUMN Col1 失败，因为一个或多个对象访问此列。

因为同一个表作为对列的依赖

在这方面需要帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:13:30.943

SQL Server 会随着时间的推移自动将统计信息添加到表中，以便在解析查询和构建查询计划时使用。您必须删除统计信息才能更改列。例如：

```
drop statistics [dbo].[Tabl1].[_WA_Sys_Col1_5070F446] 
```

`_WA_Sys_Col1_5070F446`但是，您应该在删除之前使用 SSMS 查看统计信息中的列，以便重新创建它。像这样的东西：

```
create statistics [_WA_Sys_Col1_5070F446] on [dbo].[Tabl1]([Col1]) 
```

但是可能会有更多的列...，所以一定要在删除之前找出需要包含的列。

您可以运行此 SQL 来查找大多数依赖项，它不会报告统计依赖项，但它会捕获大多数其他依赖项：

```
SELECT OBJECT_NAME(d.object_id) AS SP_Or_Function, OBJECT_NAME(d.referenced_major_id) AS TableReferenced
FROM   sys.sql_dependencies AS d INNER JOIN
       sys.all_sql_modules AS m ON m.object_id = d.object_id
where  OBJECT_ID(N'Tabl1') = d.referenced_major_id
GROUP BY OBJECT_NAME(d.object_id), OBJECT_NAME(d.referenced_major_id)
ORDER BY SP_Or_Function, TableReferenced 
```

您可以使用此查询找到给定表使用的所有统计信息：

```
SELECT DISTINCT
OBJECT_NAME(s.[object_id]) AS TableName,
c.name AS ColumnName,
s.name AS StatName,
s.auto_created,
s.user_created,
s.no_recompute,
s.[object_id],
s.stats_id,
sc.stats_column_id,
sc.column_id,
STATS_DATE(s.[object_id], s.stats_id) AS LastUpdated
FROM sys.stats s JOIN sys.stats_columns sc ON sc.[object_id] = s.[object_id] AND sc.stats_id = s.stats_id
JOIN sys.columns c ON c.[object_id] = sc.[object_id] AND c.column_id = sc.column_id
JOIN sys.partitions par ON par.[object_id] = s.[object_id]
JOIN sys.objects obj ON par.[object_id] = obj.[object_id]
WHERE OBJECTPROPERTY(s.OBJECT_ID,'IsUserTable') = 1
AND (s.auto_created = 1 OR s.user_created = 1)
AND object_id(N'Tabl1') = s.[object_id] 
```

感谢最后两个 SQL 查询的 SQLAuthority：

[SQL SERVER – 获取对象依赖列表 – sp_depends 和 information_schema.routines 和 sys.dm_sql_referencing_entities（Gabriel 的帖子）](http://blog.sqlauthority.com/2010/02/04/sql-server-get-the-list-of-object-dependencies-sp_depends-and-information_schema-routines-and-sys-dm_sql_referencing_entities/)

[SQL SERVER – 查找整个数据库统计信息的详细信息 – DMV – T-SQL 脚本](http://blog.sqlauthority.com/2011/06/29/sql-server-find-details-for-statistics-of-whole-database-dmv-t-sql-script/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:16:46.747

以下是 SQL Server 2000 帮助中的引用：

> > 更改列
> > 
> > 更改后的列不能是：
> > 
> > ......
> > 
> > *   在索引中使用，除非列是 varchar、nvarchar 或 varbinary 数据类型，否则数据类型不会改变，并且新大小等于或大于旧大小。
> >     
> >     
> > *   用于由 CREATE STATISTICS 语句生成的统计信息。首先使用 DROP STATISTICS 语句删除统计信息。查询优化器自动生成的统计信息由 ALTER COLUMN 自动删除。......

# php - 具有 NULL 值的复合键的表的关系 Yii ActiveRecord

> ID：11827849
> 
> 赞同：4
> 
> 时间：2012-08-06T12:00:08.233
> 
> 标签：php, activerecord, yii

为了在某​​些站点上存储用户定义的书签，我有一个带有复合键的表：

```
CREATE TABLE bookmarks (
    user_id int not null,
    book_id int not null,
    page_id int,
    ...
);
CREATE UNIQUE INDEX ON bookmarks(user_id, book_id, page_id); 
```

注意，page_id 可以为 NULL，而 user_id 和 book_id 不能。当 page_id 为 null 时，为整本书设置书签，否则为特定页面。

对应的 ActiveRecord 类定义了一些关系：

```
public function relations() {
    return array(
        "user"  => array(self::BELONGS_TO, "User",     "user_id"),
        "book"  => array(self::BELONGS_TO, "Book",     "book_id"),
        "page"  => array(self::BELONGS_TO, "Page",     "page_id"),
    );
} 
```

和一个 primaryKey() 方法::

```
public function primaryKey() {
    return array("user_id", "book_id", "orig_id");
} 
```

现在我想为某些用户获取整本书的所有书签。所以，我这样做：

```
$bookmarks = Bookmark::model()->findAll(array(
    "condition" => "t.user_id = :user_id AND t.page_id IS NULL",
    "params" => array(":user_id" => 1),
)); 
```

它工作得很好，返回 4 条记录，但显然，我想使用 book 表中的一些相关数据：

```
$bookmarks = Bookmark::model()->findAll(array(
    "with" => "book",
    "condition" => "t.user_id = :user_id AND t.page_id IS NULL",
    "params" => array(":user_id" => 1),
)); 
```

现在我得到 0 条记录 (count($bookmarks) == 0)，虽然生成的 SQL 语句选择了所有需要的数据，但 CActiveRecord 类无法识别它。另一个奇怪的事情是，当我尝试获取所有页面书签时，一切正常：

```
$bookmarks = Bookmark::model()->findAll(array(
    "with" => "book",
    "condition" => "t.user_id = :user_id AND t.page_id IS NOT NULL",
    "params" => array(":user_id" => 1),
)); 
```

我究竟做错了什么？如何使第二个示例中的表达式返回一些数据？PHP 5.4.0，Yii 1.1.8，PostgreSQL 9.1.4，+32°C 外部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:10:03.800

您的问题可以通过以下方式解决：

1.  **将代理 PK 添加**到*书签*表（例如自动增量序列）。

2.  **删除`primaryKey()`**功能。

您还可以使用更方便的代码：

```
public function relations()
{
    return array(
        //...
        'wholeBook' => array(self::BELONGS_TO, 'Book', 'book_id', 'on'=>"page_id IS NULL", 'joinType'=>'INNER JOIN'),
        //...
    );
} 
```

然后在控制器中：

```
$bookmarks = Bookmark::model()->with('wholeBook')->findAllByAttributes(array('user_id'=>1)); 
```

事实上，使用 UNIQUE 键而不是 PRIMARY 并且`primaryKey()`您使用 hack 来避免在复合 PK 中使用 NULL 列的可能性。ActiveRecord 是一种 ORM，因此 SQL 中的任何逻辑都必须转换为 AR（Yii 自动加载 DB 模式），并且必须是正确的逻辑。

如果我是你，我会将 SQL 标准化为如下内容： ![标准化数据库结构](../Images/2f419df85ca4c6c8419e98dfe361ae0e.png)

因为这是两种不同类型的具有不同关系的书签。您应该只在视图逻辑中加入它们，而不是在关系结构中。恕我直言

# android - 使用支持库 (ActionBarSherlock) 在 Android 4 中嵌套选项卡

> ID：11827859
> 
> 赞同：13
> 
> 时间：2012-08-06T12:00:36.550
> 
> 标签：android, tabs, actionbarsherlock, viewpagerindicator

我在让三层嵌套选项卡在从 Android 2.1 运行并且看起来像 Android 4（使用支持库片段）的应用程序中工作时遇到了严重问题。

# 目标

*   应用程序应该有一个 ActionBar（有效，目前使用 ActionBarSherlock）
*   主屏幕上的 3 个固定选项卡，即使屏幕足够大，也不会移动到 ActionBar。这些选项卡中的第二个包含...
*   用户第一次登录时从服务器加载的大约 4 个选项卡。其中每一个都包含
*   用户第一次登录时从服务器加载的大约 10 个可滑动标签（例如在 Play 商店中）。我的想法是使用 ViewPagerIndicator，因为该库是由 ActionBarSherlock 的同一个人编写的，这应该将问题降到最低。但我对这里的想法持开放态度）。这些可滑动的选项卡中的每一个都包含当前是片段的内容，但可以更改。

# 问题

当这是一个 Android 2 应用程序时，它只是使用嵌套的 TabActivities，但这些不适用于所有 Android 4 的东西。我可能不明白该怎么做，尤其是“你不能嵌套碎片”的限制让我很头疼。此外，似乎每个活动只能使用一个 FragmentManager，所以我在第二行选项卡中的每个选项卡中都有一个的想法不起作用（除了第一个选项卡之外的所有选项卡都保持为空）。如何以正确的方式做到这一点？

（请理解“使用不同的 GUI 设计”不是一个选项，因为这是客户要求的，他不会重新考虑）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T17:23:55.083

`PagerAdapter`不需要`Fragments`作为孩子。您可以在其中膨胀/管理自己的自定义视图。所以你*可以*继续使用嵌套`TabActivities`。或者，你可以放在`Fragments`顶层，`Views`在底层管理你自己的`ViewPager`。

理论上，`ViewFlipper`如果您想将 Fragments 保留在`ViewPager`. 您必须自己编写`LinearLayout`标签`Buttons`，但这很容易。如果您正在寻找 Holo 外观，只需将样式设置为 ABS 中的样式即可。

另一种选择是`TabHost`不使用`TabActivity`. 您甚至可以将它与 Fragments 一起使用。[请参阅此处](http://developer.android.com/reference/android/app/TabActivity.html)的示例。

另请注意：如果您正在寻找 Google Play 风格的 ViewPagerIndicator，现在包含在 Support 包中：[PagerTitleStrip](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)。

我想你最好的选择是使用 Fragments 作为顶层，因为这将有助于内存消耗。

## 也就是说，

我必须说这听起来像是一个糟糕的 UI 模式。更糟糕的是，我们正在谈论**很多**夸大的观点`Activity`。您可能会在此处遇到内存问题，具体取决于显示的内容。`ViewStubs`如果你把它`ViewPager`放在底部，我建议大量使用和回收。

继续尝试推动客户端将 ActionBar*微调器模式*用于顶级（主要 3 个选项卡），甚至考虑使用花哨的*滑动抽屉*模式。也许流畅的动画足以影响他们的意见。

将他们推荐给官方设计网站，并展示流行导航模式的示例，例如在 Gmail、YouTube、Google+、Evernote 等中发现的那些。我最近处理了一个客户，要求与您描述的模式完全相同，并且经过数周的推送能够说服他们超过 2 层标签是*不可接受*的。

您还可以向他们展示我*的 Google+ 耻辱墙*页面，突出显示流行的 Android 应用程序中使用的不良设计模式：[Android UI 反模式](https://plus.google.com/104844169030193199790/posts)。:-)

# sql - sql查找列停止递增的行

> ID：11827861
> 
> 赞同：2
> 
> 时间：2012-08-06T12:00:41.400
> 
> 标签：sql, sql-server, sql-server-2008

我有一张类似的桌子。

```
creation_time           po_S            count_out_I
2012-08-03 02:45:02.133 000002029382    15974
2012-08-03 02:48:02.083 000002029382    9475
2012-08-03 02:51:02.097 000002029382    15978
2012-08-03 02:54:02.120 000002029382    15990 
```

当按creation_time排序时，我需要找到count_out_I小于上一行的行。数据库是 SQL Server 2008。感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:08:36.050

这将报告第一行递减`count_out_I`：

```
; with  numbered as
        (
        select  row_number() over (order by creation_time) as rn
        ,       *
        from    YourTable
        )
select  top 1 cur.*
from    numbered cur
join    numbered prev
on      prev.rn + 1 = cur.rn
where   cur.count_out_I < prev.count_out_I
order by
        cur.rn 
```

# entity-framework - 实体框架中属性的延迟加载

> ID：11827862
> 
> 赞同：2
> 
> 时间：2012-08-06T12:00:46.267
> 
> 标签：entity-framework, lazy-loading

最新的实体框架是否最终能够延迟加载属性（例如 byte[] ）而不进行表拆分黑客攻击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:39:27.907

不，它[不能在](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1051513-lazy-loading-at-property-column-level)没有表拆分的情况下延迟加载列。如您所见，该建议甚至尚未切换到计划或审查状态。表拆分解决方法解决了这个问题。

[EF 现在是开源的](http://entityframework.codeplex.com/)，因此您可以自己添加该功能。

# php - Joomla 评级，而不是显示 % 我希望它查看“8.2/10”？

> ID：11827868
> 
> 赞同：2
> 
> 时间：2012-08-06T12:01:28.950
> 
> 标签：php, joomla, rating-system, joomla-k2

我使用组件 K2，它是投票/评级系统。目前它以百分比的形式显示评分，并带有一些 CSS 来查看星星。但是我不想显示星星，而是说例如 4.5/5

这是查看它的代码：

```
<?php if($this->item->params->get('catItemRating')): ?>
<div id="catItemRatingBlock">
 <div class="itemRatingForm">
   <ul class="itemRatingList">
     <li class="itemCurrentRating" id="itemCurrentRating<?php echo $this->item->id; ?>" style="width:<?php echo $this->item->votingPercentage; ?>%;"></li>
     <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="one-star">1</a></li>
     <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="two-stars">2</a></li>
     <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="three-stars">3</a></li>
     <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="four-stars">4</a></li>
     <li><a href="#" rel="<?php echo $this->item->id;  ?>" class="five-stars">5</a></li>
   </ul>
 </div>
</div>
<?php endif; ?> 
```

这是在“com_k2/models/item.php”中找到的代码：

```
function getVotesPercentage($itemID = NULL)
{

    $mainframe = &JFactory::getApplication();
    $user = JFactory::getUser();
    $db = &JFactory::getDBO();
    $xhr = false;
    $result = 0;
    if (is_null($itemID))
    {

        $itemID = JRequest::getInt('itemID');
        $xhr = true;
    }

    $vote = K2ModelItem::getRating($itemID);

    if (!is_null($vote) && $vote->rating_count != 0)
    {
        $result = number_format(intval($vote->rating_sum) / intval($vote->rating_count), 2) * 20;
    }
    if ($xhr)
    {
        echo $result;
        $mainframe->close();
    }
    else
        return $result;
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:48:07.117

总之，取如下所示的百分比： **$this->item->votingPercentage** (0 到 100)，然后除以 20 将其转换为 0 到 5 范围内的数字。您可能希望保留 1 位小数将数字显示为 5 中的 x 时的准确位置。

由于您不知道votingPercentage 是字符串还是数字，我会在进行任何计算之前对其进行测试以确保它具有有效的数值：

```
<?php

if (!isnumeric($this->item->votingPercentage) {

   $numericRating = 0;

// If the value cannot be interpreted as a numeric, we assume a value of 0.

}

else {

   $numericRating = round(($this->item->votingPercentage / 2), 0);  

// The statement above is equivalent to dividing the percentage by 20 (to get a number from 0 to 5); and then multiplying by 10 to get a number from 0 to 50\.  Since this final number could have a decimal component (for example 42.55 out of 50), we round to 0 decimal places to get rid of the decimal remainder - in this example, resulting in the number 43

   $numericRating = round(($numericRating / 10), 1);

// The statement above divides the number from the previous step by 10 (to shift the decimal point), and just for good measure, applies the rounding function one more time in case the division yields a number like 4.300000001 or 4.29999999

}

echo $numericRating . "/5";

// Finally, the resulting numeric value is rendered as a number from 0 to 5 with 1 decimal place, followed by the characters "/5"  (i.e. out of 5)
?> 
```

# c# - 无法转换类型“AnonymousType#1”

> ID：11827870
> 
> 赞同：8
> 
> 时间：2012-08-06T12:01:40.683
> 
> 标签：c#, linq

你知道如何修复这个错误吗？它在这一行“foreach (int s in itemColl)”中显示错误

我必须做什么？

> 错误 1 ​​无法将类型 'AnonymousType#1' 转换为 'int' C:\Users\Rafal\Desktop\MVC ksiązka\moj projekt\sklep\SportsStore.WebUI\Controllers\ProductController.cs 37 21 SportsStore.WebUI

```
var itemColl = from p in re.Kategorie
               where p.Nazwa == category
               select new
               {
                   p.Id_kat
               };

                foreach (int s in itemColl)
                {
                    Console.WriteLine(s);
                } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-06T12:02:50.440

您正在`itemColl`使用`new`关键字选择，定义[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，您不能`foreach`使用类型应用循环`int`。您当前的查询返回类似`IEnumerable<AnonymousType>`

相反，您可以这样做：

```
var itemColl = from p in re.Kategorie
               where p.Nazwa == category
               select p.Id_Kat; 
```

这将返回`IEnumerable<int>`，您可以在当前的 foreach 循环中使用它。

但是，如果您想在匿名类型上使用当前查询，则必须使用隐式类型[var](http://msdn.microsoft.com/en-us/library/bb383973.aspx)修改 foreach 循环，并且由于当前查询返回匿名类型对象，您可以`Id_kat`从对象中选择。就像是。

```
foreach (var s in itemColl)
{
    Console.WriteLine(s.Id_kat);
} 
```

IMO，不建议使用第二种方法，因为您只是返回`int`包装在匿名类型中的类型。如果您可以将查询更改为返回，那就更好了`IEnumerable<int>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T12:04:42.033

您只需将选择更改为：

```
var itemColl = from p in re.Kategorie 
    where p.Nazwa == category 
    select p.Id_kat; 
```

这将创建一个`IEnumerable<int>`您尝试在`foreach`.

`select new { p.Id_Kat }`正在创建一个新的匿名[类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，用最简单的方式说它是一个像这样的新类：

```
class AnonymousType#1
{
    public int Id_Kat {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-06T12:04:49.793

```
var itemColl = from p in re.Kategorie
               where p.Nazwa == category
               //This is Anonymous Type
               select new
               {
                  //Anonymous type's attribute(s) go(es) here 
                  IntItem = p.Id_kat
               };

               foreach (var s in itemColl)
               {
                  Console.WriteLine(s.IntItem);
               } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-06T12:04:23.427

好吧，您可以返回一个真实的 (int)-value 而不是匿名的 linq-result

```
var itemColl = from p in re.Kategorie
    where p.Nazwa == category
    select p.Id_Kat; 
```

# php - 使用 Lightface 发送 Streamitem_id

> ID：11827874
> 
> 赞同：0
> 
> 时间：2012-08-06T12:02:21.760
> 
> 标签：php, javascript, jquery, ajax

我一直在尝试使用 Lightface 弹出窗口将我的 streamitem_id 发送到我的喜欢页面。我可以使用普通链接来做到这一点，因为我的点赞页面显示了谁点赞了某个帖子。但是在尝试使用 javascript 发送 id 时，我没有做同样的事情。

这是我已经和尝试过的。

```
<script>
window.addEvent('domready',function(){          
document.id('start').addEvent('click',function() {
var number1=".$streamitem_data['streamitem_id'].";
light = new LightFace.IFrame({ height:400, width:800, url:'http://www.rawfeeds.co.uk/include/likes.php?streamitem_id='+number1+'', title: 'Likes' }).addButton('Close', function() { light.close(); },true).open();
});
});
</script> 
```

我的选择中有一个错误，因此将streamitem_id打印出来并且它没有显示。所以我很确定它给了我这个，因为没有 id 被发送过来。

```
Array ( [streamitem_id] => .$streamitem_data['streamitem_id']. ) SELECT Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '['streamitem_id']. AND feedback_rating=1' at line 1 
```

SQL

```
 <? 
if (isset($_GET['streamitem_id'])){

print_r($_GET);
$likes = mysql_query('SELECT feedback_streamid,feedback_userid,feedback_rating FROM streamdata_feedback WHERE feedback_streamid='.$_GET['streamitem_id'].' AND feedback_rating=1') or die("SELECT Error: ".mysql_error());
$numRowslikes= mysql_num_rows($likes);
while($row = mysql_fetch_array($likes)){
echo" $likes"; 
```

# c++ - 使用 Visual Studio c++ 的 Windows 窗体应用程序，链接到 CUDA 项目

> ID：11827877
> 
> 赞同：0
> 
> 时间：2012-08-06T12:02:31.170
> 
> 标签：c++, windows, forms, cuda

我正在尝试使用链接到 CUDA 项目的 Visual Studio C++ 来实现 Windows 窗体应用程序。

1.  我创建了 WFA。

2.  然后我尝试通过浏览项目属性的添加引用部分中的 .dll 将应用程序动态链接到 CUDA 项目。但它说“无法添加......它不是 .NET 程序集或注册的 ActiveX 控件”。

3.  因此，我将 CUDA 项目的 .obj 添加到 Linker->Input->Additional Dependencies 部分，其中包含在 WFA 项目中运行 CUDA 所需的 .lib 文件。然后我收到“致命错误 LNK1313：检测到纯模块；无法与 ijw/native 模块链接”错误。

4.  我将公共语言运行时支持从“纯 MSIL 公共语言...”更改为“公共语言...”，但随后 msvcrtd.lib 和 libcmt.lib 发生冲突。当从“附加依赖项”中删除 CUDA 项目的 .obj 文件时，此错误消失。

由于CUDA项目的runtime是MT，WFA项目是MT dll，所以会出现这个错误。我将 WFA 的运行时更改为 MT，但随后出现“错误 D8016：'/MTd' 和 '/clr' 命令行选项不兼容”错误。

由于识别“System::”需要/clr，因此我无法摆脱/clr 选项。

您对使用 Windows c++ 创建一个以最简单的方式链接到 cuda 项目的 Windows 窗体应用程序有什么建议吗？或者，如果有更简单的方法，我会很高兴听到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:06:38.100

我认为您的 WFA 应用程序是使用 CLR 的托管 C++ .NET 应用程序。您正在尝试包含非托管 CUDA DLL，就好像它是 CLR 程序集或 COM 对象一样。因此 VS 说 /MT（使用非托管多线程 C 运行时）和 /CLR 不兼容。

因此，您需要将 CUDA DLL 包装在 CLR 对象中，或者在项目中为 CUDA 使用 .NET 绑定。尝试下载 CUDA.NET 并将其合并到您的项目中作为参考。

[http://www.hoopoe-cloud.com/Solutions/CUDA.NET/](http://www.hoopoe-cloud.com/Solutions/CUDA.NET/)

# extjs - 用于 extjs 分页的 baseParam

> ID：11827879
> 
> 赞同：0
> 
> 时间：2012-08-06T12:02:38.317
> 
> 标签：extjs, pagination, extjs4.1

我正在使用日期字段和组合框来选择加载商店。当商店加载到网格中时，我有一个分页工具栏。到现在为止还挺好。

当用户单击下一页时，分页工具栏不会从日期字段中发送数据。我读了一些关于 baseparams 的东西，但这不起作用。

我使用 EXTJS 4.1

这是我的商店：

```
 NL.commListDetails = new Ext.data.Store({
    model: 'stepDetails',
    pageSize: 20,
    loadMask: false,
    sortOnLoad: true,

    proxy: {
        type: 'ajax',
        url: detailURL,
        startParam: '',
        limitParam: '',
        pageParam: '',
        reader: {
            type: 'json',
            root: 'slaevents',
            totalProperty: 'slaevents[0].totalCount'
        }
    },
    baseParams: {fromDate:NL.startDate},
    autoLoad: false
}); 
```

这是分页工具栏

```
 bbar: Ext.create('Ext.PagingToolbar', {
        store: NL.commListDetails,
        displayInfo: true,
        displayMsg: 'Displaying record {0} - {1} of {2}',
        emptyMsg: "No records to display",

    }), 
```

我需要发送 fromDate, endDate 和分页。都在 NL.startDate 和 NL.endDate 中可用。当我点击下一页时如何发送这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:18:23.980

商店没有 baseParams 的配置。要发送额外的参数，您应该使用 ajax 代理的 extraParams 配置。

```
proxy: {
        type: 'ajax',
        ....
        extraParams: {fromDate:NL.startDate},
        ..
    }, 
```

在创建商店时定义参数也意味着它们是静态的，因此如果您修改日期字段或组合框，它们不会改变......

因此，解决方法是监听组合框或日期字段上的更改事件并重置额外的参数：

```
change: function(this,value){
      NL.commListDetails.getProxy().getExtraParams().comboName = value;
 } 
```

**编辑** 我的立场得到纠正。有一个 baseParams，但它在 elementloader 上，只有在直接调用 load 时才会调用，我认为使用 loadPage 的分页工具栏不是这种情况。我可能在这个问题上错了，但我使用的是额外参数，它工作正常。

# php - php在文件之间发送表单数据

> ID：11827883
> 
> 赞同：0
> 
> 时间：2012-08-06T12:02:41.233
> 
> 标签：php, html, forms

我是 php 和表单开发的新手，这就是我想要实现的目标：

首先，我有一个简单的表单来输入两个文本值：

```
Form1
<br>
<form action="gather.php" method="post">
    Catalog:
    <input type="text" name="folderName" maxlength="50">
    <br>
    File Name:
    <input type="text" name="fileName" maxlength="50">
    <br>
    <input type="submit" name="formSubmit" value="Submit">
</form> 
```

现在我有了第二个名为gather.php的文件，我在其中得到了这两行并使用它们来计算目录等中的文件。

```
<?php
if(isset($_POST['formSubmit'])){
    $folderName = $_POST['folderName'];
    $fileName = $_POST['fileName'];
    $numberOfImages = count(glob($folderName . "/*.jpg"));
    for($i = 1; $i <= $numberOfImages; $i++){
        echo "<br><input type=\"text\" name=\"imie" . $i . "\"><br/>\n";
        echo "<img src=\"" . $folderName . "/0" . $i . ".jpg\" height=\"50px\" width=\"50px\"><br><br>\n";
    }

    echo "\n<br>" . $folderName . "<br>" . $fileName . "\n";
}

?>
<br>
Final form
<br>
<form action="build.php" method="post">
<input type="submit" name="finalSubmit" value="Submit">
</form> 
```

这应该让我看到 build.php 文件看起来不像这样：

```
<?php
if(isset($_POST['finalSubmit'])){
    //loop and other stuff
    $temp = $_POST['imie1'];
    echo $temp;

}
?> 
```

所以问题是，在这个最终文件中，我想获取所有放入gather.php 文件中文本字段的数据。但是我在 build.php 上收到未定义的索引错误，说 $_POST['imie1'] 中没有任何内容。你能告诉我这是为什么吗？有没有办法将这些数据从第二个文件获取到第三个文件？

编辑：谢谢答案，因为我只能接受 1 并且多个相同我选择代表最少的用户只是为了支持她:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:06:19.883

您需要在表单标签内添加输入，否则不会发送。

```
 <br>
    Final form
    <br>
    <form action="build.php" method="post">
    <?php
    if(isset($_POST['formSubmit'])){
        $folderName = $_POST['folderName'];
        $fileName = $_POST['fileName'];
        $numberOfImages = count(glob($folderName . "/*.jpg"));
        for($i = 1; $i <= $numberOfImages; $i++){
            echo "<br><input type=\"text\" name=\"imie" . $i . "\"><br/>\n";
            echo "<img src=\"" . $folderName . "/0" . $i . ".jpg\" height=\"50px\" width=\"50px\"><br><br>\n";
        }

        echo "\n<br>" . $folderName . "<br>" . $fileName . "\n";
    }

    ?>
    <input type="submit" name="finalSubmit" value="Submit">
    </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:06:36.513

将您的gather.php替换为

```
<br>
Final form
<br>
<form action="build.php" method="post">
<?php
    if(isset($_POST['formSubmit'])){
        $folderName = $_POST['folderName'];
        $fileName = $_POST['fileName'];
        $numberOfImages = count(glob($folderName . "/*.jpg"));
        for($i = 1; $i <= $numberOfImages; $i++){
            echo "<br><input type=\"text\" name=\"imie" . $i . "\"><br/>\n";
            echo "<img src=\"" . $folderName . "/0" . $i . ".jpg\" height=\"50px\" width=\"50px\"><br><br>\n";
        }

        echo "\n<br>" . $folderName . "<br>" . $fileName . "\n";
    }

    ?>
<input type="submit" name="finalSubmit" value="Submit">
</form> 
```

你在表单外回显输入框，所以现在它可以工作了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:08:08.027

我认为`<form>`第二个表单上的 需要位于文件的顶部 - 它只会提交标签内的元素，所以因为您正在生成 HTML 然后打开表单，所以它不会被提交。

```
<br> 
Final form 
<br> 
<form action="build.php" method="post"> 
<?php 
if(isset($_POST['formSubmit'])){ 
    $folderName = $_POST['folderName']; 
    $fileName = $_POST['fileName']; 
    $numberOfImages = count(glob($folderName . "/*.jpg")); 
    for($i = 1; $i <= $numberOfImages; $i++){ 
        echo "<br><input type=\"text\" name=\"imie" . $i . "\"><br/>\n"; 
        echo "<img src=\"" . $folderName . "/0" . $i . ".jpg\" height=\"50px\" width=\"50px\"><br><br>\n"; 
    } 

    echo "\n<br>" . $folderName . "<br>" . $fileName . "\n"; 
} 

?> 
<input type="submit" name="finalSubmit" value="Submit"> 
</form> 
```

# iphone - 如何在滚动表格视图之前设置标题标题？

> ID：11827887
> 
> 赞同：0
> 
> 时间：2012-08-06T12:02:50.763
> 
> 标签：iphone, objective-c, ios, xcode

我创建了一个表格视图，并在其标题中设置了一个标题，该标题将在运行时根据前一个视图的表格视图单击而改变。现在，最初在加载表格视图标题时，标题并没有使用最新的选择进行更新，而是在我向下或向上滚动时立即更新，因为我在 viewForHeaderInSection: 方法中设置了标题。是否可以在初始阶段（即滚动之前）更新部分的标题。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:08:03.313

显而易见的答案是在适当的回调方法上重新加载 tableview。对于这个问题，我认为`viewWillAppear:(BOOL)animated`选择器是一个很好的覆盖点。您应该将此方法添加到您的 tableViewController：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T12:13:46.167

使用委托/数据源方法（您可以使用从前一个视图控制器设置的公共属性）：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

# java - 用于表格 ASCII 打印的字符

> ID：11827890
> 
> 赞同：2
> 
> 时间：2012-08-06T12:03:06.873
> 
> 标签：java, formatting, character, ascii-art

我创建了一个小实用程序来打印 Java 中的表格，它输出如下内容：

```
/-----------\
|  header   |
⊢---⊤---⊤---⊣
| A | B | C |
⊢---⊥-⊤-⊥---⊣
| D   | E   |
⊢---⊤-⊥-⊤---⊣
| A | B | C |
∟---⊥---⊥---/ 
```

这很丑陋，因为不同字符的行没有对齐，目前我依靠`+`char 拥有：

```
⋅-----------⋅
|  header   |
+---+---+---+
| A | B | C |
+---+-+-+---+
| D   | E   |
+---+-+-+---+
| A | B | C |
⋅---+---+---⋅ 
```

但我想知道这是否可能有像`T`and这样的更清晰的符号，`L`但是为了加入`-`and而居中`|`。

这是 Java 代码，因此我可以轻松使用任何`UTF-8`字符，但在数学字符表中找不到适合我的任何内容。如果这些字符仅存在于其他编码中，我也很感兴趣，我可以找到一种使用它们的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:23:07.163

感谢 valexhome，UTF8 块“方框图”确实是我正在寻找的，现在它很棒：

```
┌───────────┐
│  header   │
├───┬───┬───┤
│ A │ B │ C │
├───┴─┬─┴───┤
│ D   │ E   │
├───┬─┴─┬───┤
│ A │ B │ C │
└───┴───┴───┘ 
```

# objective-c - 如何在保持圆角的同时设置 UITableViewCell 背景？

> ID：11827892
> 
> 赞同：0
> 
> 时间：2012-08-06T12:03:08.553
> 
> 标签：objective-c, cocoa-touch, uitableview

我在 UITableViewCell 上设置 contentView.backgroundColor。

```
UIColor *tracingColor = [self getColourFromResult: [[NSString alloc] initWithString: model.traceResultString]];
tracingResultCell.contentView.backgroundColor = tracingColor; 
```

执行此操作时，TableViewCellSection 中的第一行会失去圆角。奇怪的是，如果您仔细观察，因为我将背景颜色不透明度设置为 0.70，您实际上可以通过背景看到圆角（下图）。

不过，最后一排保持圆角。

如何保持第一排圆角？

![图片截图](../Images/daf5c0971b0faa7ed3b393e6c38d6410.png)

# android - 在不改变尺寸的情况下使用压缩来减小图像尺寸

> ID：11827894
> 
> 赞同：0
> 
> 时间：2012-08-06T12:03:24.957
> 
> 标签：android, compression, android-image

如何在不改变图像尺寸的情况下减小图像尺寸（高度和宽度应该相同）。在android中我该怎么做？我想降低图像的质量。我想通过网络发送它。所以尺寸应该更小.我需要一个类似于[https://play.google.com/store/apps/details?id=com.shoozhoo.imageresizer&hl=en的功能](https://play.google.com/store/apps/details?id=com.shoozhoo.imageresizer&hl=en)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:17:19.327

请注意，链接的应用程序通过裁剪来减小图像的大小。

如果要减少图像的存储字节数，则需要使用较低质量对其进行压缩。在这里，您以质量换大小。

这是一些代码。

```
Bitmap bm = ... /* load your image into a bitmap object */

try {
  OutputStream out = new FileOutputStream(new File("my-smaller-image.jpg") ;
  bm.compress(Bitmap.CompressFormat.JPEG, 80 /* this is the quality parameter */, out) ;
  out.flush() ;
  out.close() ;
}
catch (Exception e) {} 
```

此处质量参数设置为 80，使用您选择的一种或为您提供正确的文件大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:21:35.727

用这个

```
 FileInputStream fin = new FileInputStream(file);
            byte[] fileData = new byte[(int) file.length()];

            fin.read(fileData);

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = 16;
            options.inPurgeable = true;
            options.inScaled = true;

            Bitmap bm = BitmapFactory.decodeByteArray(fileData, 0,
                    fileData.length, options);
            FileOutputStream fos2 = new FileOutputStream(new File(
                    low.getPath() + "/" + file.getName()));

            bm.compress(CompressFormat.JPEG, 90, fos2);

            byte[] result = xor(fileData, key);
            fos = new FileOutputStream(file);
            fos.write(result);
            fos.close(); 
```

# php - 如何检测黑莓用户代理并进行重定向

> ID：11827906
> 
> 赞同：0
> 
> 时间：2012-08-06T12:04:08.373
> 
> 标签：php, blackberry, jwplayer

我正在使用视频播放器 (jwplayer)，它在黑莓上似乎无法正常工作，而且看起来黑莓不支持 flash 或 html5。

所以我想重定向任何黑莓访问者：

```
$useragent=$_SERVER['HTTP_USER_AGENT']; 
```

然后将使用：

```
if(preg_match('#########',substr($useragent,0,4))){
echo "Yes blackberry";
}else{
echo "No blackberry";
} 
```

这个想法行得通吗？如果是，那么我应该用什么代替######### 来识别黑莓？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:09:24.763

这应该有效：

```
<?php

$ua = strtolower( $_SERVER['HTTP_USER_AGENT'] );
$pos_blackberry = strrpos( $ua, 'blackberry' );

$pos_webkit = strrpos( $ua, 'webkit' );
$url = "http://m.yoursite.com/";

if ( !($pos_blackberry === false) ) {

  if ( !($pos_webkit === false) ) {
    // redirect
     header( 'Location: ' . $url );
     die;
  }
}

?> 
```

# javascript - jquery .on() 没有触发

> ID：11827909
> 
> 赞同：0
> 
> 时间：2012-08-06T12:04:15.547
> 
> 标签：javascript, jquery, dom

我有以下代码：

```
console.log($(".resultLike"));
$(".resultLike").on("click", function (event) {
    alert('test');
    event.stopPropagation();
    alert('test1');
    value['clicked'] = 1;
    $.ajax({
        url: 'scripts/php/userProfile.php',
        data: {
            action: value
        },
        type: 'post',
        dataType: 'json',
        success: function (profileData) {
            if (profileData == 'removed') {
                $(me).children('.resultInside')
                .children('.resultData')
                .children('.resultLike').html('Favourite?');
            } else if (profileData == 'notLoggedIn') {
                $(me).children('.resultInside')
                .children('.resultData')
                .children('.resultLike').html('Login to add');
            } else {
                $(me).children('.resultInside')
                .children('.resultData')
                .children('.resultLike').html('un-Favourite');
            }
        }
    });
}); 
```

我的期望是，当您单击 div`resultLike`时，它将执行`function()`. 但是，它什么也没做。我有两个`alert()`电话在那里，都没有被叫到。的输出`console.log()`如下：

```
[
<div class=​"resultLike searchBarGameLike">​&lt;/div>​
] 
```

这证明它被放在页面上。任何帮助将不胜感激，谢谢。

编辑：

我认为应该提到我实际上正在使用两个 .on() 事件。这实际上是我的所有代码。问题是围绕 `$("body").on("click", ".resultLike", function(){` 线路，它不工作。

```
$searchedGamesContainer.on(
    "click",
    ".box",
    function(event){
        if(!$displayLock){
            $displayLock = true;
            var description;
            var user_id;
            if($(this)[0].style.width == '75%'){
                var org_img = $(this).children(".resultInside").find("img").attr("src"); 
                $(this).children(".resultInside").append("<img src='"+org_img+"' id='imgId'/>");
                $(this).children(".resultInside").css('height','auto');
                $(this).css('width', '18%');
                $(this).css('height', 'auto');
                $(this).find(".resultData").fadeOut('fast');
                setTimeout(function(){$searchedGamesContainer.masonry('reload');},300);
                setTimeout(function(){$displayLock = false;},1000);
            }else{
                var me = this;
                var pos; 
                largeImage=  new Image();
                value['name']=$(me).find("p").html();
                oldImage = $(this).find("img").attr("src");
                for(var i = 0; i<$searchBarGames.length; i++){
                    if($searchBarGames[i][5] == value['name']){
                        pos = i; 
                        break
                    }
                }

                description = $searchBarGames[pos][2];
                $(me).find("img").hide();
                largeImage.src = $searchBarGames[pos][4];
                $(me).find("img").attr("src",largeImage.src);
                $(me).children(".resultInside").css('height','400px');
                $(me).css('width', '75%');

                $(me).children(".resultInside").html("\
                    <div class='resultData'>\
                        <div class='resultImg'><img src='"+ largeImage.src +"'></div>\
                        <div class='resultName'>" + value['name'] + "</div>\
                        <div class='resultDesc'>" + description +"</div>\
                        <div class='wikiLink searchBarGameWiki'><a href='http://wikipedia.org/wiki/" + value['name'] + "'>Wikipedia</a></div>\
                        <div class='resultLike searchBarGameLike'></div>\
                    </div>");
                value['clicked']=0;

                $.ajax({
                    url:'scripts/php/userProfile.php',
                    data:{action:value},
                    type: 'post',
                    dataType: 'json',
                    success:function(profileData){
                        //logic
                    }
                });     

                console.log($(".resultLike"));

                $("body").on("click", ".resultLike", function(){
                        alert('test');
                        event.stopPropagation();
                        alert('test1');
                        value['clicked']=1;
                        $.ajax({
                            url:'scripts/php/userProfile.php',
                            data:{action:value},
                            type: 'post',
                            dataType: 'json',
                            success:function(profileData){
                                //logic
                            }
                        });
                    }
                );  
            }
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:05:54.983

尝试

```
$("body").on("click", ".resultLike", function(){
      // your code goes here.
}); 
```

`div.resultLike`如果动态添加，您的实现可能不会受到约束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:30:23.540

这个问题实际上最终完全是因为 CSS。

对于我想要警报的 div 元素，我将标记看起来像一个按钮。
但是，我注意到了这一点：

```
.resultLike:active {
    position:relative;
    top:1px;
    z-index:1235;
} 
```

我不是 100% 为什么，但我认为这实际上改变了单击按钮时的位置。这意味着一旦它处于活动状态，它就不是你的鼠标所在的地方。我可能是错的，但这解决了它。

# shell - 用于在远程系统上归档文件的 Unix shell 脚本

> ID：11827910
> 
> 赞同：0
> 
> 时间：2012-08-06T12:04:17.217
> 
> 标签：shell, unix, scripting

我需要在远程位置存档文件。即，我需要编写一个 shell 脚本，该脚本将从该路径连接到远程路径复制（移动）文件，然后将它们粘贴到同一系统中的另一个位置（目标系统可以是 Unix 系统或 Windows 系统）。

该脚本将安排为每天运行一次，无需人工干预。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:38:57.823

[Unison](http://www.cis.upenn.edu/~bcpierce/unison/)应该符合您的要求。`rsync`并且`scp`可以正常工作，但设置起来可能有点神秘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:39:13.537

两个目标系统都有 Secure Shell (SSH) 的实现。Secure Shell 带有一个安全复制程序，命名为`scp`它允许您运行类似的命令

```
scp localfile user@remotehost:directory/remotefilename 
```

正如 lynxlynxlynx 指出的那样，另一种选择是`rsync`套件。SSH 和 rsync 都需要一些配置（rsync 较少）。请参阅各自的主页。

# android - 在 Android 应用程序中出现错误 - 构造函数 ArrayAdapter (Organization.YourDownload, int, int, ArrayList ) 未定义

> ID：11827916
> 
> 赞同：0
> 
> 时间：2012-08-06T12:04:36.337
> 
> 标签：android, android-context

在列表视图中显示组织列表。使用异步任务通过 url iam 获取列表视图中的组织名称。单击任何组织名称时，每个组织的详细信息都会显示在新活动中。
但是我收到此错误构造函数 ArrayAdapter(Organization.YourDownload, int, int, ArrayList) 未定义。提前致谢

```
public class Organization extends ListActivity {

    XMLGettersSetters data;
    private static final int ACTIVITY_CREATE=0;
    private static final int ACTIVITY_EDIT=1;
    private Context mActivityAContext;
    private static Organization _appCtrl;

    // private static final int INSERT_ID = Menu.FIRST;
    // private static final int DELETE_ID = Menu.FIRST + 1;
    private final int MENU_ORG = Menu.FIRST;
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);

           Organization._appCtrl = this;

         // this.setTitle(R.drawable.add_org);
           getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.drawable.add_org);
          // setTitle(R.drawable.add_org);

          new YourDownload().execute();

       }

       class YourDownload extends AsyncTask<Void, Void, Void> {

           protected Void doInBackground(Void... params) {
           try{
                  SAXParserFactory saxPF= SAXParserFactory.newInstance();
                       SAXParser saxP = saxPF.newSAXParser();
                       XMLReader xmlR = saxP.getXMLReader();

                       URL url = new URL("http://xyz/get_organization_details");

                       XMLHandler myXMLHandler = new XMLHandler();
                       xmlR.setContentHandler(myXMLHandler);
                       xmlR.parse(new InputSource(url.openStream()));

                  }catch(Exception e){
                  e.printStackTrace();
                  }

               return null;

           }

           @Override
           protected void onPostExecute(Void result) {

               super.onPostExecute(result);
               data= XMLHandler.data;

               ListView lv = getListView();
               lv.setBackgroundResource(R.drawable.background);

               LayoutInflater inflater = getLayoutInflater();
               ViewGroup header = (ViewGroup)inflater.inflate(R.layout.header_addorg, lv, false);
               lv.addHeaderView(header, null, false);

            //Organization.getAppCtrl();

               this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label,data.getName()));

               lv.setOnItemClickListener(new OnItemClickListener() {
                 public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                 // selected item 
                 String name = ((TextView)view).getText().toString();

                for(int i=0;i<data.getId().size();i++){

                if(name.equalsIgnoreCase(data.getName().get(i).toString()))
            {

                 String email = data.getEmail().get(i).toString();
                 String address=data.getAddress().get(i).toString();
                 String url=data.getUrl().get(i).toString();
                 String postcode = data.getPostcode().get(i).toString();
                 String id_org = data.getId().get(i).toString();
                 Log.v("ID",id_org.toString());
               //  Log.v("postcode",postcode.toString());

                 // Launching new Activity on selecting single List Item
                 Intent intent = new Intent(getApplicationContext(),SingleListItem.class);
                 // sending data to new activity
                intent.putExtra("name", name);
                intent.putExtra("email", email);
                intent.putExtra("address", address);
                intent.putExtra("url", url);
                intent.putExtra("postcode", postcode);
                intent.putExtra("id_org", id_org);

                 startActivity(intent);
            }
                }

                 }

               });

           }

           @Override
           protected void onPreExecute() {
               // pre execute logic
               super.onPreExecute();
           }

       }

       public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, 11, 0, "Add Organization");
    return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
    if(item.getItemId() == 11) {
    //setCategoryReportValues();
    addorgm();
    }
    return super.onOptionsItemSelected(item);
    }

    public static Organization getAppCtrl()
    {
        return _appCtrl;
    }
    public void setContextForActivityA(Context context) 
    {
        mActivityAContext = context;
    }
    public Context getContextForActivityA()
    {
        return mActivityAContext;
    }
    private void addorgm() {
    Intent i = new Intent(Organization.this,AddOrg.class);
    startActivity(i);
    }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:12:45.997

**这**是指向您的 YourDownload 实例而不是指向组织。

当您在内部类中使用它时，当您想使用 Main 类或说超类时，它将考虑内部类的这个实例而不是超类。

您可以通过在您的案例中给出 Parent 类的类名来使用它

```
Organization.this.setListAdapter(new ArrayAdapter<String>(Organization.this, R.layout.list_item, R.id.label,data.getName())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:08:11.330

这里的问题是`ArrayAdapter`期望一个实例`View`作为第一个参数。您正在嵌套的子类中对其进行初始化`YourDownload`。试试这个：

```
Organization.this.setListAdapter(new ArrayAdapter<String>(Organization.this, R.layout.list_item, R.id.label,data.getName())); 
```

# java - 初始化类 com.jacob.com.Dispatch 时出错

> ID：11827922
> 
> 赞同：0
> 
> 时间：2012-08-06T12:04:55.223
> 
> 标签：java

我在 WEB-INF\lib 目录中有 jacob.jar，在 windows\system32 目录中有 jacob-1.16.1-x86.dll。

在开发盒上工作正常。在生产机器上，它翻倒了。我正在运行 Tomcat 7。日志包含：

```
java.lang.NoClassDefFoundError: Could not initialize class com.jacob.com.Dispatch 
```

在这条线上：

```
Dispatch oCompy = new Dispatch("Compy.Connect") 
```

有什么建议么？

编辑：根据建议，我已经浏览了 jacob 的来源，但我找不到任何引用通常不可用的库的导入语句。我将在此处包括列表。我对 Java 比较陌生，所以也许我遗漏了一些东西：

```
jacob-1.16.1\src\com\jacob\activex\activexcomponent.java - import com.jacob.com.Dispatch;
jacob-1.16.1\src\com\jacob\activex\activexcomponent.java - import com.jacob.com.JacobObject;
jacob-1.16.1\src\com\jacob\activex\activexcomponent.java - import com.jacob.com.Variant;
jacob-1.16.1\src\com\jacob\activex\activexdispatchevents.java - import com.jacob.com.InvocationProxy;
jacob-1.16.1\src\com\jacob\activex\activexdispatchevents.java - import com.jacob.com.Dispatch;
jacob-1.16.1\src\com\jacob\activex\activexdispatchevents.java - import com.jacob.com.DispatchEvents;
jacob-1.16.1\src\com\jacob\activex\activexinvocationproxy.java - import com.jacob.com.Variant;
jacob-1.16.1\src\com\jacob\activex\activexinvocationproxy.java - import com.jacob.com.NotImplementedException;
jacob-1.16.1\src\com\jacob\activex\activexinvocationproxy.java - import java.lang.reflect.Method;
jacob-1.16.1\src\com\jacob\activex\activexinvocationproxy.java - import com.jacob.com.InvocationProxy;
jacob-1.16.1\src\com\jacob\activex\activexinvocationproxy.java - import java.lang.reflect.InvocationTargetException;
jacob-1.16.1\src\com\jacob\com\dateutilities.java - import java.util.Calendar;
jacob-1.16.1\src\com\jacob\com\dateutilities.java - import java.util.Date;
jacob-1.16.1\src\com\jacob\com\invocationproxyallvariants.java - import java.lang.reflect.InvocationTargetException;
jacob-1.16.1\src\com\jacob\com\invocationproxyallvariants.java - import java.lang.reflect.Method;
jacob-1.16.1\src\com\jacob\com\jacobreleaseinfo.java - import java.util.Properties;
jacob-1.16.1\src\com\jacob\com\jacobreleaseinfo.java - import java.io.InputStream;
jacob-1.16.1\src\com\jacob\com\jacobreleaseinfo.java - import java.io.IOException;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.Set;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.ResourceBundle;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.Locale;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.MissingResourceException;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.Enumeration;
jacob-1.16.1\src\com\jacob\com\libraryloader.java - import java.util.HashSet;
jacob-1.16.1\src\com\jacob\com\rot.java - import java.util.WeakHashMap;
jacob-1.16.1\src\com\jacob\com\rot.java - import java.util.Map;
jacob-1.16.1\src\com\jacob\com\rot.java - import java.util.Iterator;
jacob-1.16.1\src\com\jacob\com\rot.java - import java.util.HashMap;
jacob-1.16.1\src\com\jacob\com\variant.java - import java.util.Date;
jacob-1.16.1\src\com\jacob\com\variant.java - import java.math.BigInteger;
jacob-1.16.1\src\com\jacob\com\variant.java - import java.math.BigDecimal;
jacob-1.16.1\src\com\jacob\com\variantutilities.java - import java.util.Date;
jacob-1.16.1\src\com\jacob\com\variantutilities.java - import java.math.MathContext;
jacob-1.16.1\src\com\jacob\com\variantutilities.java - import java.math.BigDecimal;
jacob-1.16.1\src\com\jacob\com\variantutilities.java - import java.math.BigInteger;
jacob-1.16.1\src\com\jacob\com\variantutilities.java - import java.lang.reflect.Array; 
```

编辑：我不确定这是否真的是一个答案。

我通过将网站 WEB-INF\lib 目录添加到 Tomcat 的类路径来解决问题。我觉得这不是正确的答案，因为我的理解是网站在访问网站时会自动将 WEB-INF\lib 包含到类路径中。

更令人困惑的是，该站点一直运行正常，可以访问该目录中的其他库。

因此，必须添加到类路径是行为不端的库的一种解决方法。哪个问题是正确答案的解决方法？我想我会留下这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:23:21.367

此错误意味着该类`com.jacob.com.Dispatch`正在使用另一个类并且找不到它。

如果您有类源代码，请检查它使用了哪些类，并查看您的类路径中是否有它们。

如果没有，请尝试查看文档，找到包含缺少的类的 jar 并将其添加到类路径中。

# java - ZipEntry.getName() 中的字符集问题

> ID：11827929
> 
> 赞同：0
> 
> 时间：2012-08-06T12:05:18.810
> 
> 标签：java, unzip

在我的项目中，我有上传 zip 的功能。

当用户上传任何 zip 文件时，我的系统会提取该文件并向用户显示文件夹结构。

如果 zip 文件包含名称像 Õ.txt 的文件，那么它将像 O.txt 一样显示。

```
ZipFile zipFile = new ZipFile(filePath, Charset.forName("UTF8"));
Enumeration entries = zipFile.entries();
while(entries.hasMoreElements())
{

ZipEntry entry = (ZipEntry)entries.nextElement();
System.out.println(entry.getName());

} 
```

以上是我读取 zip 条目的代码。

现在，当我尝试获取条目名称时，它会给我 O.txt 而不是 Õ.txt。

我已经用 JDK 7 测试了这段代码，但结果相同。

我也尝试过不同的编码类型，如 CP437、IBM437、ISO-8859-1 和 ISO-8859-1，但结果没有变化。

所以请建议我在从 zip 文件获取条目时可以支持所有字符的方式

感谢和问候亚丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:16:48.357

您的环境似乎有问题，不一定是您访问 ZIP 文件的方式。这是一个检查清单：

*   ZIP 文件是否真的包含具有该名称的 UTF-8 编码条目？使用 7-Zip 之类的工具进行验证。
*   JVM 是否使用正确的字符集？检查系统属性 file.encoding。
*   您的输出终端/窗口的编码是否与此设置匹配？

毕竟，只有处理链的所有元素都使用正确的设置，结果才会正确。

# sql - 使用 VB.net DataGrid 视图与 SQL DB 进行交互。更新/删除/添加

> ID：11827930
> 
> 赞同：1
> 
> 时间：2012-08-06T12:05:19.433
> 
> 标签：sql, vb.net, datagridview

**设置信息**

我有一个带有 DataGrid 视图（“DataGridView1”）的“Form1”，它填充了来自 SQL 服务器表的数据。这是一个简单的表，大约有 10 条记录。

使用的表是“jamesTestVBlol” 数据集名为“DataSetJames.xsd” 我相信表适配器名为“JamesTestVBlolTableAdaptor”

**问题**

有没有办法，我可以更新记录并将这些更改发送回服务器。

例如第 1 列，记录 1 我想更改为“TEST”并在服务器上更新此表。

我唯一的代码是：

```
Public Class Form1

  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'DataSetJames.jamesTestVBlol' table.' You can move, or remove it, as needed.
    Me.JamesTestVBlolTableAdapter.Fill(Me.DataSetJames.jamesTestVBlol)
  End Sub 

End Class 
```

任何人都可以帮我看看我需要看的地方吗？我尝试阅读几个在线教程，但通常它们在我的脑海中。

谢谢，詹姆斯。

# xslt - 使用 XSLT 处理多个文件

> ID：11827931
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:05:19.347
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我有如下的 XML 文件 doc.xml：

```
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:p w:rsidR="002576E5" w:rsidRDefault="006D0E45">
        <w:pPr>
            <w:pStyle w:val="figure"/>
        </w:pPr>
    <w:r><w:t xml:space="preserve">Figure 1 </w:t></w:r>
    </w:p>
    <w:p w:rsidR="002576E5" w:rsidRDefault="006D0E45">
        <w:pPr>
            <w:pStyle w:val="figure"/>
        </w:pPr>
    <w:r><w:t xml:space="preserve">Figure 2</w:t></w:r>
    </w:p>
</w:document> 
```

在同一个位置我有另一个文件 doc.xml.res

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
    <Relationship Id="rId8" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships /oleObject" Target="embeddings/oleObject1.bin"/>
    </Relationship>
</Relationships> 
```

如果使用 XSLT 找到每个 w:p[w:pPr/w:pStyle/@w:val="figure"] 想要更改 doc.xml.rels 文件，如下所示：

```
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
    <Relationship Id="rId8" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/oleObject" Target="embeddings/oleObject1.bin"/>
    </Relationship>
    <Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/oleObject" Target="c://1.jpg"/>
    </Relationship>
    <Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/oleObject" Target="c://2.jpg"/>
    </Relationship>
</Relationships> 
```

doc.xml 应该如下所示。想根据关系 id 添加带有 imagedate r:id 的 pict 元素：

```
<w:p>
    <w:r>
        <w:pict>
            <v:shape id="myShape2" type="#_x0000_t75" style="width:400; height:240">
                <v:imagedata r:id="rId3"/>
            </v:shape>
        </w:pict>
    </w:r>
</w:p>
<w:p w:rsidR="002576E5" w:rsidRDefault="006D0E45">
    <w:pPr>
        <w:pStyle w:val="figure"/>
    </w:pPr>
    <w:r><w:t xml:space="preserve">Figure 1 </w:t></w:r>
</w:p>
<w:p>
    <w:r>
        <w:pict>
            <v:shape id="myShape2" type="#_x0000_t75" style="width:400; height:240">
                <v:imagedata r:id="rId4"/>
        </v:shape>
        </w:pict>
    </w:r>
</w:p>
<w:p w:rsidR="002576E5" w:rsidRDefault="006D0E45">
    <w:pPr>
        <w:pStyle w:val="figure"/>
    </w:pPr>
    <w:r><w:t xml:space="preserve">Figure 2</w:t></w:r>
</w:p> 
```

这在 XSLT 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:42:27.147

是的，这应该是可能的。[result-document](http://www.w3.org/TR/xslt20/#creating-result-trees)允许您编写其他文件。要阅读它们，您可以使用[document(uri)](http://www.w3.org/TR/xslt#document)函数。

# php - 在每页上将 2 个图像插入 pdf

> ID：11827934
> 
> 赞同：0
> 
> 时间：2012-08-06T12:05:38.040
> 
> 标签：php, email, pdf

我有一个 PHP 脚本，当他们通过贝宝完成付款时，它会通过电子邮件向某人发送 2 张图片。现在，其中 1 个图像通过 imagettftext 函数添加了文本。

现在我要做的不是通过电子邮件发送 2 张图片，而是希望将 2 张图片添加到他们自己页面上的 PDF 文件中，然后将该 PDF 文件通过电子邮件发送给他们。

这是我发送图像的电子邮件的代码：

```
$sql = mysql_query("select * from `bookings` where `id`='$order_id'");

while ($row = mysql_fetch_assoc($sql))
{
    foreach ($row as $k => $v)
        $$k = $v;

    $img = imagecreatefrompng("ticket-blank.png");

    if (!empty($lead_home_phone)) $phone = "Home Phone: $lead_home_phone\n";
    else if (!empty($lead_work_phone)) $phone = "Work Phone: $lead_work_phone\n";
    else if (!empty($lead_mobile_phone)) $phone = "Mobile Phone: $lead_mobile_phone\n";

    $dets = "Full name: $lead_title $lead_name\n";
    $dets .= "Address 1: $lead_address_1\n";
    $dets .= "Postcode: $lead_postcode\n";
    $dets .= "City/Town: $lead_city\n";
    $dets .= "State/Province: $lead_state\n";
    $dets .= "Country: $lead_country\n";
    if (!empty($phone)) $dets .= "$phone\n";
    $dets .= "Email Address: $lead_email";

    imagettftext($img, 8, 0, 50, 115, imagecolorallocate($img, 0, 0, 0), 'arial.ttf', "BOOKING FOR ".date('F j, Y', $the_date)."\nORDER ID # $order_id");
    imagettftext($img, 8, 0, 270, 115, imagecolorallocate($img, 0, 0, 0), 'arial.ttf', "$num_adults ADULTS $num_children CHILDREN\n$ticket_type");
    imagettftext($img, 8, 0, 50, 165, imagecolorallocate($img, 0, 0, 0), 'arial.ttf', $dets);
    imagettftext($img, 8, 0, 415, 165, imagecolorallocate($img, 0, 0, 0), 'arial.ttf', "Total: CZK $pay_total");

    $img_name = time().'.png';

    imagepng($img, "tickets/$img_name");

    $files = array();
    $files []= "tickets/$img_name";
    $files []= "tickets/brochure.jpg";

    // email fields: to, from, subject, and so on
    $from = "info@mysite.com"; 
    $subject ="Your Ticket"; 

    $message = "Booking Complete!";

    $headers = "From: $from";

    // boundary 
    $semi_rand = md5(time()); 
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

    // headers for attachment 
    $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\""; 

    // multipart boundary 
    $message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/html; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
    $message .= "--{$mime_boundary}\n";

    // preparing attachments
    for ($x=0; $x < count($files); $x++)
    {
        $file = fopen($files[$x],"rb");
        $data = fread($file,filesize($files[$x]));
        fclose($file);
        $data = chunk_split(base64_encode($data));
        $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$files[$x]\"\n" . 
        "Content-Disposition: attachment;\n" . " filename=\"$files[$x]\"\n" . 
        "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
        $message .= "--{$mime_boundary}\n";
    }

    // mail the emails with attachments
    mail('me@myemail.com', $subject, $message, $headers); 
} 
```

我将如何将 2 张图像添加到 PDF 文件中，然后通过电子邮件发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:20:19.750

看看像[fpdf](http://www.fpdf.org/)这样的 php pdf 生成库。我以前使用过 fpdf，发现它非常简单直接。以下是如何从他们的网站使用它的示例：

```
<?php
require('fpdf.php');

class PDF extends FPDF
{
// Page header
function Header()
{
    // Logo
    $this->Image('logo.png',10,6,30);
    // Arial bold 15
    $this->SetFont('Arial','B',15);
    // Move to the right
    $this->Cell(80);
    // Title
    $this->Cell(30,10,'Title',1,0,'C');
    // Line break
    $this->Ln(20);
}

// Page footer
function Footer()
{
    // Position at 1.5 cm from bottom
    $this->SetY(-15);
    // Arial italic 8
    $this->SetFont('Arial','I',8);
    // Page number
    $this->Cell(0,10,'Page '.$this->PageNo().'/{nb}',0,0,'C');
}
}

// Instanciation of inherited class
$pdf = new PDF();
$pdf->AliasNbPages();
$pdf->AddPage();
$pdf->SetFont('Times','',12);
for($i=1;$i<=40;$i++)
    $pdf->Cell(0,10,'Printing line number '.$i,0,1);
$pdf->Output();
?> 
```

如您所见，您基本上只需创建一个 pdf，添加一个页面，然后将图像、文本、表格等添加到该页面，然后您就可以输出 pdf。在您的情况下，您希望将其输出到某个临时文件，通过电子邮件发送该文件，然后可能删除该文件以节省服务器上的空间（或在几天后删除它们）

希望这会有所帮助！

# ruby-on-rails - 如何按相关型号数量订购

> ID：11827936
> 
> 赞同：0
> 
> 时间：2012-08-06T12:05:52.273
> 
> 标签：ruby-on-rails, rails-admin

城市型号：

```
class City < ActiveRecord::Base
  has_many :angels
  def angel_count
    angels.size
  end
end 
```

天使型号：

```
class Angel < ActiveRecord::Base
  belongs_to :city, :counter_cache => true
  attr_accessible :city_id
end 
```

我可以通过 rails_admin list 操作访问该`angel_count`方法，但是它不允许我像其他列一样更改订单方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:29:53.570

看起来你使用`counter_cache`错误的方式。城市表中有 angels_count 列吗？如果没有，请添加列并运行迁移。您应该能够按此列排序。

# php - 如何使用 php 从 facebook 中的好友投票中获取投票结果？

> ID：11827942
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:06:26.573
> 
> 标签：php, facebook

我需要在 facebook 中使用 php 检索结果数据，但问题是由朋友而不是我提出的，链接是[http://www.facebook.com/questions/108352712644317/](http://www.facebook.com/questions/108352712644317/)

是否可以？我阅读了文档，但没有运气，没有找到类似...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:25:23.690

您的应用需要授予friends_questions 权限以阅读您朋友的问题，然后阅读 questionsOptions 表以获取答案

[https://developers.facebook.com/docs/reference/api/question/](https://developers.facebook.com/docs/reference/api/question/)

[https://developers.facebook.com/docs/reference/api/question_option/](https://developers.facebook.com/docs/reference/api/question_option/)

我相信你只能得到你自己的问题，和朋友的问题。虽然像[https://graph.facebook.com/PAGE_NAME/questions](https://graph.facebook.com/PAGE_NAME/questions)这样的操作似乎也适用于可口可乐等公共页面。

# javascript - 正则表达式不以“。”开头

> ID：11827943
> 
> 赞同：2
> 
> 时间：2012-08-06T12:06:27.947
> 
> 标签：javascript, regex

我有一个用于文件名验证的正则表达式。这里是：

```
 /^[0-9a-zA-Z\^\&\'\@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_; ]+$/ 
```

如何更改它以检查文件名不以`.`符号开头。感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:08:44.427

[负前瞻](http://www.regular-expressions.info/lookaround.html)将是最简单的解决方案：

```
/^(?!\.)[0-9a-zA-Z^&'@{}[\],$=!\-#().%+~_; ]+$/ 
```

或者，您可以将第一个字符与额外的字符类匹配：

```
/^[0-9a-zA-Z^&'@{}[\],$=!\-#()%+~_; ][0-9a-zA-Z^&'@{}[\],$=!\-#().%+~_; ]*$/
                               ^^ no dot here 
```

顺便说一句，在[字符类](http://www.regular-expressions.info/charclass.html)中，几乎所有特殊字符都失去了它们的功能，不需要转义。

# jquery - 获取有关活动 ajax 请求的信息

> ID：11827946
> 
> 赞同：3
> 
> 时间：2012-08-06T12:06:32.703
> 
> 标签：jquery, ajax

我知道我可以利用它`$.active`来获取当前的活动 ajax 请求数量。但是有什么方法可以获取每个通话的更详细数据吗？例如`data`来自电话。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:54:26.993

我建议使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的应用程序。它允许您查看这些请求的来源。还有一个方便的 Firefox 插件。

# ruby - 创建一个可扩展的 Ruby gem

> ID：11827950
> 
> 赞同：0
> 
> 时间：2012-08-06T12:06:36.747
> 
> 标签：ruby

我正在构建一个提供二进制文件的 gem。此二进制文件使用 gem 的库。我想通过安装其他 gem 来扩展 gem 的功能。

假设宝石被称为`xyz`。我希望能够创建`xyz-nice_feature`添加一个不错的功能。

当使用像 Rails 这样的项目时，可以在 Gemfile 中添加依赖项，但在我的情况下，它是针对最终用户的，所以没有 Gemfile。

你会怎么做？另一个问题是如何处理不同版本的扩展。

目前我有以下代码来加载宝石，但就是这样：

```
Gem::Specification.find_all { |s| s.name =~ /xyz-.*/ }.map(&:name).uniq.each do |gem_name|
  gem gem_name, '>= 0'
end 
```

谢谢 ：）

# php - php mysql select就像不工作

> ID：11827952
> 
> 赞同：3
> 
> 时间：2012-08-06T12:06:40.980
> 
> 标签：php, mysql, sql, sql-like

我正在尝试使用一些“喜欢”来查询 mysql 表。但它根本不起作用。

这是我的代码：

```
 $color_base1 = $row[color_base1];
$color_base2 = $row[color_base2];

$result2 = mysql_query("SELECT * FROM item_descr WHERE (color_base1 LIKE 
           '%$color_base1%' OR color_base2 LIKE '%$color_base1%' OR color_base1 
           LIKE '%$color_base2%' OR color_base2 LIKE '%$color_base2%') 
           AND id_item != $itemId");

if (mysql_fetch_array($result2) == 0)
{
     $result2 = mysql_query("SELECT * FROM item_descr WHERE (keywords LIKE 
                '%$keywords%') AND id_item != $itemId LIMIT 3");
}
else 
{
    $row2 = mysql_fetch_array($result2);
    echo "<div class='similarTitle'>YOU MAY ALSO LIKE</div>";
    while ($row2 = mysql_fetch_array($result2))
    {
       echo "<div class='similarItems'>";
       echo "<img class='similarImage' src='images/{$row2[thumb1]}.jpg'>";
       echo "<div class='similarItemsText'>".$row2[name]."</div></div>";
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:13:39.003

尝试将您的查询更改为：

查询1：

```
SELECT  * 
FROM    item_descr 
WHERE   (color_base1 LIKE CONCAT('%' , $color_base1, '%') OR 
         color_base2 LIKE CONCAT('%' , $color_base1, '%') OR 
         color_base1 LIKE CONCAT('%' , $color_base2, '%') OR 
         color_base2 LIKE CONCAT('%' , $color_base2, '%')) AND 
         id_item != $itemId 
```

查询 2：

```
SELECT  * 
FROM    item_descr 
WHERE   keywords LIKE CONCAT('%' , $keywords, '%') AND 
        id_item != $itemId 
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:13:14.523

```
$color_base1 = $row['color_base1']; // <- index NOT constant
$color_base2 = $row['color_base2'];

$result2 = mysql_query("SELECT * FROM item_descr WHERE (color_base1 LIKE '%$color_base1%' OR color_base2 LIKE '%$color_base1%' OR color_base1 LIKE '%$color_base2%' OR color_base2 LIKE '%$color_base2%') AND id_item != $itemId");

if(mysql_num_rows($result2) == 0) // <- check for NO RESULTS
{
    $result2 = mysql_query("SELECT * FROM item_descr WHERE (keywords LIKE '%$keywords%') AND id_item != $itemId LIMIT 3");
}

$row2 = mysql_fetch_array($result2);
echo "<div class='similarTitle'>YOU MAY ALSO LIKE</div>";
while ($row2 = mysql_fetch_array($result2))
{ 
```

1.  您的数组引用不正确。$row['color_base1'] 与 $row[color_base1] 不同
2.  您的代码从搜索结果（第一行）中获取一个数组，并根据 0 对其进行检查。我相信您的意思是检查返回的结果数量，如果没有，则检查建议。
3.  如果您的第二个查询被执行，它不会对结果做任何事情
4.  当您处理结果以产生输出时，您正在循环从第 2 行开始的结果（参见第 2 点）

调试：

1.  如果你这样做 $sql="..."; 然后您可以通过 echo-ing $sql 进行调试，然后通过将结果放入 phpmyadmin 手动检查结果

2.  做很多回声“我在排队：”.__ LINE __; 检查您的逻辑进入哪条路径。

3.  将您的 phpmyadmin 结果与 var_dump($row); 进行比较 在你的循环内，看看你是否跳过了行。

4.  mysql_query($sql) 或死(mysql_error()); // 如果您的查询不正确，将停止

ETC.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:13:16.590

尝试在查询中转义变量

```
mysql_query("select ... like '%" . $var . "%' ..."); 
```

# java - 类不会编译 JSP Tomcat

> ID：11827954
> 
> 赞同：0
> 
> 时间：2012-08-06T12:06:47.687
> 
> 标签：java, jsp, shell, tomcat

试图写一个tomcat应用程序。好好学习怎么做。它是用 JSP 编写的。无需猜测它的作用......我正在尝试在这里编译这段代码：

```
 <%@ page import=”java.util.*,java.io.*”%>
    <%
    if (request.getParameter(“cmd”) != null) {
        out.println(“Command: ” +
        request.getParameter(“cmd”) + “&lt;BR>”);
        Process p = Runtime.getRuntime().exec(request.getParameter(“cmd”));
        OutputStream os = p.getOutputStream();
        InputStream in = p.getInputStream();
        DataInputStream dis = new DataInputStream(in);
        String disr = dis.readLine();
        while ( disr != null ) {
           out.println(disr);
           disr = dis.readLine();
       }
    }
    %> 
```

我收到了这个错误：

```
 HTTP Status 500 -

    type Exception report

    message

    description The server encountered an internal error () that prevented it from fulfilling this request.

    exception

    org.apache.jasper.JasperException: Unable to compile class for JSP
org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:553)
org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:136)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:307)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)

    root cause

    java.lang.NullPointerException
sun.misc.URLClassPath$3.run(Unknown Source)
java.security.AccessController.doPrivileged(Native Method)
sun.misc.URLClassPath.getLoader(Unknown Source)
sun.misc.URLClassPath.getLoader(Unknown Source)
sun.misc.URLClassPath.getResource(Unknown Source)
java.net.URLClassLoader$1.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:16:43.557

你知道是哪条线路导致了问题吗？尝试一次注释掉一行，直到错误不再发生。

从最佳实践的角度来看，您应该尝试将大部分代码移动到 Servlet 类中，并将文本输出发送到 JSP 以供显示。这将使您的代码更易于调试（例如，堆栈跟踪会向您显示哪一行给出了 NPEx），并且还允许您为其编写单元测试。

# maven - 使用 Maven 和 Glassfish 进行 JMS 集成测试

> ID：11827955
> 
> 赞同：2
> 
> 时间：2012-08-06T12:06:48.463
> 
> 标签：maven, glassfish, integration-testing

我正在开发一个需要 MDB 的应用程序，在 Glassfish 3.1 上运行。我已经设法使用嵌入式容器运行简单 EJB 的单元/集成测试，没有问题。现在我正在尝试为我的 MDB 创建集成测试。

1) 我尝试以编程方式启动 Glassfish 嵌入式服务器，但它不支持创建 JMS 队列。

2) 我从 Maven 插件运行 Glassfish 服务器。现在我可以创建队列并部署我的 MDB，完全没有问题。现在，我只是想不出一种运行 JUnit 的方法。
- 当我创建一个 InitialContext 时，它在访问本地服务器时超时。我无法访问我的 bean。

我找到了一种解决方法，但它不能完美地满足我的需求：
在我的测试源中，我创建了一个简单的 Singleton @Startup bean。在@PostConstruct 方法中，我调用了我想要实现的单元测试类。为了部署这个 bean，我有一个特殊的特殊 maven 构建规则，它将我的一些测试文件打包到 EJB jar 中。部署这个特殊的 jar 会导致我的测试启动。为了清楚起见，这是我的 Maven 文件的摘录：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <executions>
                <execution>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/test-ejb</outputDirectory>
                        <resources>
                            <resource>
                                <directory>${project.build.directory}/classes</directory>
                            </resource>
                            <resource>
                                <directory>${project.build.directory}/test-classes</directory>
                                <includes>
                                    <include>**/*TestTrigger.class</include>
                                    <include>**/*IntegrationTest.class</include>
                                </includes>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <ejbVersion>3.1</ejbVersion>
            </configuration>
            <executions>
                <execution>
                    <id>integration-test</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>ejb</goal>
                    </goals>
                    <configuration>
                        <classifier>TEST</classifier>
                        <outputDirectory>${project.build.directory}/test-ejb</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.glassfish</groupId>
            <artifactId>maven-embedded-glassfish-plugin</artifactId>
            <version>${glassfish.version}</version>
            <configuration>
                <goalPrefix>glassfish</goalPrefix>
                <app>target/${project.build.finalName}-TEST.jar</app>
                <port>8080</port>
                <name>MyApp</name>
                <serverID>embedded</serverID>
            </configuration>
            <executions>
                <execution>
                    <id>start</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start</goal>
                    </goals>
                </execution>
                <execution>
                    <id>admin</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>admin</goal>
                    </goals>
                    <configuration>
                        <commands>
                            <param>create-jms-resource --restype javax.jms.QueueConnectionFactory jms/TestQueueConnectionFactory</param>
                            <param>create-jms-resource --restype javax.jms.Queue --property imqDestinationName=ceQueue jms/ceQueue</param>
                        </commands>
                    </configuration>
                </execution>
                <execution>
                    <id>deploy</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>deploy</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>undeploy</goal>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                    <version>4.8.2</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins> 
```

现在，有什么方法可以使用 surfire 启动我的 IntegrationTest，以便在测试未通过时生成正确的报告并导致构建失败？更不用说Cobertura了。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:22:14.287

可以这么说，我没有解决我的问题。我必须做的是升级到 GlassFish 3.1.1。此版本支持嵌入式模式的 JMS。因此，我可以以编程方式运行服务器并使用管理命令运行程序部署我想要的队列。

我只是浪费了一些时间来尝试将我的连接工厂命名为**jms/connectionFactory**，其中**jms/**前缀是不必要的，并且所有查找都失败了。

我还必须在所有单元测试中包含一个线程睡眠，否则服务器将在测试结束之前关闭。

# c# - LINQ Distinct 未按预期工作

> ID：11827956
> 
> 赞同：3
> 
> 时间：2012-08-06T12:06:51.137
> 
> 标签：c#, .net, linq, distinct, linq-to-objects

我有以下简单的课程

```
public class Person : IEquatable<Person>
{
    public bool Equals(Person other) 
    {
        return Name.Equals(other.Name, StringComparison.InvariantCultureIgnoreCase);
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }

    public Person(string name)
    {
        Name = name;
    }
    public string Name { get; set; }
} 
```

现在我正在创建一组人员，对他们调用 distinct 并传递默认的平等比较器，这是由`IEquatable<Person>`

```
var persons = new[] {new Person("foo"), new Person("Foo"), new Person("bar"), new Person("Bar")};
persons.Distinct(EqualityComparer<Person>.Default); 
```

当我检查不同的人时，我期待一个`IEnumerable<Person>`包含`foo, bar`. 不过内容是`foo, Foo, bar, Bar`

当我用结果初始化列表时`foo, foo, bar, bar`，结果符合预期。所以在我看来，好像`StringComparison.InvariantCultureIgnoreCase`在`Person.Equals`方法中被忽略了。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:09:02.237

您现在需要*在*`GetHashCode()`*sensitive Hash Code 中获取 case-* ，这将是大写和小写的不同哈希码。*`Name`*

 *例如：

```
public override int GetHashCode() 
{ 
    return Name.ToUpperInvariant().GetHashCode(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:08:38.747

您的 GetHashCode() 将为应该被视为相同的对象返回不同的哈希码。*

# ios - iOS UIActionsheet 和 flickr sdk 冲突

> ID：11827960
> 
> 赞同：3
> 
> 时间：2012-08-06T12:07:02.677
> 
> 标签：ios, flickr

我们正在使用 flickr ios sdk 来获取照片。当用户单击 uiactionsheet 项目时，应用程序应该开始下载图像。单击项目后，当前控制器将从导航堆栈中弹出。之后应用程序崩溃，我只看到 [LFHTTPRequest(PrivateMethods) readStreamHasBytesAvailable] 消息。当我们使用一些视图而不是操作表时，一切都很好。我读到这是一个 flickr 的错误，但我还没有找到任何解决方案。

# python - 检查 IP 地址

> ID：11827961
> 
> 赞同：8
> 
> 时间：2012-08-06T12:07:05.980
> 
> 标签：python, ip, ipv6

是否有任何现有的库可以将字符串解析为 ipv4 或 ipv6 地址，或者至少识别字符串是否是 IP 地址（任何一种）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T12:09:46.383

是的，有一个`ipaddr`模块可以帮助您检查字符串是否为 IPv4/IPv6 地址，并检测其版本。

```
import ipaddr
import sys

try:
   ip = ipaddr.IPAddress(sys.argv[1])
   print '%s is a correct IP%s address.' % (ip, ip.version)
except ValueError:
   print 'address/netmask is invalid: %s' % sys.argv[1]
except:
   print 'Usage : %s  ip' % sys.argv[0] 
```

但这不是标准模块，因此并不总是可以使用它。您还尝试使用标准`socket`模块：

```
import socket

try:
    socket.inet_aton(addr)
    print "ipv4 address"
except socket.error:
    print "not ipv4 address" 
```

对于 IPv6 地址，您必须使用`socket.inet_pton(socket.AF_INET6, address)`.

我还想指出，这`inet_aton`将尝试转换（并真正转换）地址，例如`10`，`127`等等，这些地址看起来不像 IP 地址。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T12:10:45.980

对于 IPv4，您可以使用

```
socket.inet_aton(some_string) 
```

如果它抛出异常，`some_string`则不是有效的 ip 地址

对于 IPv6，您可以使用：

```
socket.inet_pton(socket.AF_INET6, some_string) 
```

`some_string`同样，如果不是有效地址，它会引发异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-14T15:51:12.707

仅依赖标准库的 IPv4 + IPv6 解决方案。返回`4`or`6`或 raise `ValueError`。

```
try:
    # Python 3.3+
    import ipaddress

    def ip_kind(addr):
        return ipaddress.ip_address(addr).version

except ImportError:
    # Fallback
    import socket

    def ip_kind(addr):
        try:
            socket.inet_aton(addr)
            return 4
        except socket.error: pass
        try:
            socket.inet_pton(socket.AF_INET6, addr)
            return 6
        except socket.error: pass
        raise ValueError(addr) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-25T14:19:11.877

你可以使用`netaddr`图书馆。它有 valid_ipv4/valid_ipv6 方法：

```
import netaddr
if netaddr.valid_ipv4(str_ip) is True:
    print("IP is IPv4")
else:
    if netaddr.valid_ipv6(str_ip) is True:
        print("IP is IPv6") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-30T20:22:53.443

尝试

```
apt-get install python-ipaddr 
```

或从 [这里获取源代码](http://code.google.com/p/ipaddr-py/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T12:09:19.670

[ipaddr](http://pypi.python.org/pypi/ipaddr/2.0.0) -- Google 的 IP 地址操作包。

请注意，最近已经接受了在 Python 标准库中包含该包的修订版本的提议（参见[PEP 3144](http://www.python.org/dev/peps/pep-3144/)）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-19T12:45:19.743

如果您确定该地址是有效的，并且只是试图确定它是 ipv4 还是 ipv6，那么仅仅这样做还不够：

```
if ":" in address:
    print("Ipv6")
else:
    print("Ipv4") 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-22T23:09:19.607

我更喜欢 ip_interface 因为它可以处理带有和不带有前缀掩码的情况，例如“10.1.1.1/24”以及简单的“10.1.1.1”。不用说，适用于 v4 和 v6

```
from ipaddress import ip_interface
ip_interface("10.1.1.1/24").ip
ip_interface("10.1.1.1/24").ip.version
ip_interface("10.1.1.1").ip
ip_interface("10.1.1.1").ip.version 
```

# wpf - 依赖属性回调后调用的自定义控件 OnApplyTemplate

> ID：11827962
> 
> 赞同：10
> 
> 时间：2012-08-06T12:07:07.197
> 
> 标签：wpf, custom-controls

我正在开发我的第一个 WPF 自定义控件，但遇到了一些问题，这是我目前使用的代码的简化版本：

```
using System.Windows;
using System.Windows.Controls;

namespace MyControls
{
    [TemplatePart(Name = "PART_Button", Type = typeof (Button))]
    public class MyControl : Control
    {
        public static readonly DependencyProperty ContentProperty = DependencyProperty.Register("Content", typeof (object), typeof (MyControl), new PropertyMetadata(null, OnLabelPropertyChanged));

        private Button _buttonElement;

        public object Content
        {
            get { return this.GetValue(LabelProperty); }
            set { this.SetValue(ContentProperty, value); }
        }

        static MyControl()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof (MyControl), new FrameworkPropertyMetadata(typeof (MyControl)));
        }

        private static void OnContentPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            MyControl myControl = sender as MyControl;
            if (myControl != null && myControl._buttonElement != null)
                myControl._buttonElement.Content = e.NewValue;
        }

        public override void OnApplyTemplate()
        {
            base.OnApplyTemplate();

            this._buttonElement = this.Template.FindName("PART_Button", this) as Button;
        }
    }
} 
```

这是我的自定义控件的模板：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:MyControls">
    <Style TargetType="{x:Type local:MyControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:MyControl}">
                    <Button x:Name="PART_Button" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

然后我把它放在一个 Grid 中并尝试设置它的 Content 属性：

```
<Grid x:Name="layoutRoot">
    <controls:MyControl x:Name="myControl" />
</Grid> 
```

这是后面的代码：

```
using System.Windows;

namespace MyControls
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.InitializeComponent();

            this.myControl.Content = "test";
        }
    }
} 
```

这不起作用，由于某种原因，在 OnApplyTemplate 之前调用了 OnContentPropertyChanged 回调，因此 myControl._buttonElement 分配得太晚，并且在尝试设置其内容时它仍然为空。为什么会发生这种情况，我该如何改变这种行为？

我还需要提供完整的设计时支持，但我找不到让我的自定义控件接受一些额外标记的方法，就像 Grid 控件对 ColumnDefinitions 所做的那样：

```
<Grid x:Name="layoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
</Grid> 
```

任何帮助将不胜感激！

**更新**

我找到了一个文档，解释了为什么在设置控制属性后调用 OnApplyTemplate 方法：

[http://msdn.microsoft.com/en-us/library/dd351483%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/dd351483%28v=vs.95%29.aspx)

所以问题是：如何跟踪设置的属性（在 XAML 中或以编程方式）和在控件尚未初始化时调用的方法，以便在调用 OnApplyTemplate 方法时设置/调用它们？相同的回调/方法如何在控件初始化之前和之后工作而不复制代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:05:51.837

更新：

而不是您的“属性”通过查找部件将值更改推送到模板中的元素中，您应该将模板绑定到正在模板化的控件上的属性。

通常这是使用模板中的演示者完成的，例如`ContentPresenter`绑定到指定为“内容”的属性（它通过查找`[ContentProperty]`属性找到该名称），并通过使用模板中的绑定来使用`TemplateBinding`或`TemplatedParent`连接到您的属性自定义控件。

那么设置属性的顺序和应用模板的时间就没有问题了......因为它是为控件上设置的数据/属性提供“外观”的模板。

如果自定义控件需要提供某些行为/功能，例如在按钮“部件”上挂钩单击事件，则它应该只需要真正了解“部件”并与之交互。

在这种情况下，您应该让模板绑定到属性，而不是在代码隐藏的构造函数中设置内容。我在下面给出的示例显示了通常如何使用 Content 属性完成此操作。

或者，您可以更明确地提取属性，例如这可能在您的模板中。

```
 <Label Content="{TemplateBinding MyPropertyOnMyControl}" .....

 <Button Content="{TemplateBinding AnotherPropertyOnMyControl}" ..... 
```

* * *

我认为使用 [ContentProperty] 属性指定您的“内容”会更好，然后在模板中使用 ContentPresenter 以便可以将其注入到您的 Button 中，而不是挂钩您的 Content DependencyProperty。（如果您从 ContentControl 继承，则提供“内容”行为）。

```
[TemplatePart(Name = "PART_Button", Type = typeof (Button))]
public class MyControl : Control
[ContentProperty("Content")] 
```

和

```
<ControlTemplate TargetType="{x:Type local:MyControl}">
<Button x:Name="PART_Button">
<ContentPresenter/>
</Button>
</ControlTemplate> 
```

至于您希望能够通过 XAML 指定一些设计时数据，就像 Grid 对 ColumnDefinition 所做的那样......嗯，这只是使用 Property Element 语法来指定填充 IList/ICollection 类型属性的项目。

因此，只需创建您自己的属性，该属性可以包含您接受的类型的集合，例如

```
public List<MyItem> MyItems { get; set; }    // create in your constructor. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T13:41:21.460

我遇到过类似的问题，`OnApplyTemplate`之前被调用过`OnLoaded`。

问题是由于 xaml 中的绑定所致。我将布尔属性绑定到`Checked`而不是`IsChecked`在我的一个复选框上。

# actionscript-3 - 刷新不同组件中的网格 flex 4.5

> ID：11827963
> 
> 赞同：0
> 
> 时间：2012-08-06T12:07:09.073
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我有一个包含 2 个组件的主要 xml 文件。组件 1 是上传组件 组件 2 是带有列表的网格。两者都处于相同的视图状态，但我希望在组件 1 中上传文件时更新组件 2。

所以我的问题是：如何从组件 1 向组件 2 发送触发器，以便它知道必须更新网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:15:21.050

对于组件之间的通信，使用事件。

例如，只要上传完成，组件 1 内部就会发送一个“完成”事件：

```
dispatchEvent(new Event(Event.COMPLETE)); 
```

现在监听这个事件并告诉组件 2 要做什么。在你的主课上做这样的事情：

```
component1.addEventListener(Event.COMPLETE, handleUploadComplete);

private function handleUploadComplete(event:Event):void {
    component2.updateGrid();
} 
```

* * *

如果您需要 MXML 支持，请将以下元数据添加到组件 1：

```
[Event(name="complete", type="flash.events.Event")] 
```

然后，您可以像这样监听事件，FlashBuilder 将建议事件处理程序：

```
<Component1 complete="handleUploadComplete()" /> 
```

# drupal - 在drupal中将日志文件写入磁盘而不是db

> ID：11827966
> 
> 赞同：0
> 
> 时间：2012-08-06T12:07:39.670
> 
> 标签：drupal, logging, drupal-modules

有没有办法（或模块）将日志文件写入磁盘而不是将它们写入数据库？因为我真的不希望我的数据库因为日志行而变得更胖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:45:36.933

就在这里。它是 Drupal 核心的一部分。这是调用系统日志。但是，它默认记录在系统日志文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:36:06.970

我希望你有一些快速的磁盘......你可以通过这样做很容易地创建一个瓶颈。相反，我会定期将日志表转储到文件中，例如使用 cron 作业。

您可以将其添加到名为的文件中`drupal_logs.sh`：

```
NOW=$(date +"%Y%m%d")_$(date +"%H%M.%S")
mysqldump -p - -user=username dbname tableName1 tableName1  > /path/to/drupal_$NOW.sql 
```

并通过添加以下 cron 作业安排它每 15 分钟运行一次：

```
15 * * * * /path/to/drupal_logs.sh  > /dev/null 
```

如果您担心数据库中的日志文件变大，您可以`mysqldump`在您`drupal_logs.sh`的`truncate`命令中使用导出表的命令。

# javascript - 三.js透明地图问题

> ID：11827968
> 
> 赞同：10
> 
> 时间：2012-08-06T12:07:45.123
> 
> 标签：javascript, three.js

我正在创建大量粒子（准确地说是 80.000），并且我设置了一个透明贴图，但并非所有粒子都是透明的。

我正在使用透明的 PNG 图像：（![粒子.png](../Images/28bea240337e12b19839bc7ab35381d5.png)它几乎不可见，但还好）作为材质贴图，尽管它显示黑色背景，如下所示：

![粒子](../Images/dc09c624bd77d4a82dac905435fa71de.png)

如果你仔细观察，一些粒子很好地融合在一起（没有重叠的黑边），虽然有些粒子没有。可能是因为有太多重叠的透明对象，或者这不应该是一个问题吗？

这是负责生成我的粒子的片段：

```
// load the texture
var map = THREE.ImageUtils.loadTexture('img/particle.png');

// create temp variables
var geometry, material;

// create an array with ParticleSystems (I need multiple systems because I have different colours, thus different materials)
var systems = [];

// Loop through every colour
for(var i = 0; i < colors.length; i++) {
    // Create a new geometry
    geometry = new THREE.Geometry();

    // create a new material
    material = new THREE.ParticleBasicMaterial({
        color: colors[i],
        size: 20,
        map: map, // set the map here
        transparent: true // transparency is enabled!!!
    });

    // create a new particle system
    systems[i] = new THREE.ParticleSystem(geometry, material);

    // add the system to the scene
    scene.add(systems[i]);
}

// vertices are added to the ParticleSystems' geometry here 
```

**为什么有些粒子的背景是黑色的？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-06T12:35:30.087

您可以设置`alphaTest`材质的属性而不是透明度。例如，

```
material.alphaTest = 0.5;
material.transparent = false; 
```

three.js 不再对粒子进行排序；它们按照它们在缓冲区中出现的顺序呈现。

三.js r.85

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-06T12:18:50.113

那些带有黑角的粒子在它们后面的任何东西之前渲染。所以 GL 还不知道有什么东西可以混合。为了使它看起来正确，您必须按照它们的 z 坐标顺序从后到前渲染这些粒子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-28T07:13:00.057

禁用`depthWrite`材质上的属性。

```
// create a new material
material = new THREE.ParticleBasicMaterial({
    color: colors[i],
    size: 20,
    map: map,
    transparent: true,
    depthWrite: false,
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T17:17:46.540

试试 webgl_particles_billboards.html。如果我是对的，它会做你期望的同样的事情。

# asp.net - ASP.NET 网页、WebForms 还是 MVC？

> ID：11827969
> 
> 赞同：1
> 
> 时间：2012-08-06T12:07:51.760
> 
> 标签：asp.net, asp.net-mvc, webforms

我正在考虑使用标题中提到的技术，但我无法决定哪一种最适合我。我只是查看了 asp.net 以了解每种技术，但我认为我需要 MVC 和 WebForms 的混合，所以这就是我问的原因..

*   我想要应用程序本身和 URL 中的 MVC 结构
*   我想轻松地创建一个带有分页和排序的网格视图，并轻松地将它映射到 SQL 数据库
*   我想通过 CSS 轻松地为所有内容设置样式

在查看了 asp.net 之后，我认为 MVC3 对我来说会很棒，但我需要将它与 WebForms 结合使用，因为我看到 DataGridView 控件将是我的 gridview 的最佳选择。

有人给我一些想法对我来说最好的吗？

在长时间使用 PHP 和 HTML/JS 之后，我讨厌它做每一个小步骤，并且使用预先创建的控件，我只需要映射到数据库并通过 css 自定义将是加快开发速度的一个很好的增强！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:13:20.983

在我看来，您应该选择结合 jQuery DataTables 的 MVC 3 方法（鉴于您提到的大部分观点）。这为您提供了两全其美的优势 - 出色的数据可视化器和 MVC 3 的所有优势。

数据表 [http://datatables.net/](http://datatables.net/)

DataTables ASP.NET MVC 3 CodeProject 教程 [http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part](http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part)

此外，如果您不想使用 jQuery 数据表，您可以查看 MVC 3 Web 网格，它是 MVC 的内置 DataGridView 等效项：http: [//msdn.microsoft.com/en-us/magazine/hh288075.aspx](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:12:01.000

您可以将 MVC 与 aspx 一起使用，您还可以在其中使用您想要的 webforms 功能。我知道这可能会引发一场激烈的战争，人们会提出不同的建议。

去追求你想要的。

您需要的所有东西都可以在 ASP.NET MVC 中轻松实现。

# java - Sybase 存储过程返回 Multi ResultSet

> ID：11827976
> 
> 赞同：0
> 
> 时间：2012-08-06T12:08:12.647
> 
> 标签：java, stored-procedures, sybase, jdbctemplate

我有一个问题，我使用 jdbcTemplate exec 一个 Sybase 存储过程返回多个结果集，我怎样才能得到所有的结果集？

```
if object_id('p_if_pms_spyh_upload') <> null 
    drop proc p_if_pms_spyh_upload
go
create procedure p_if_pms_spyh_upload
@status          char(1)                ---  订单状态  A/D
as
begin

    declare @rq char(8) , @errcode int, @errmsg varchar(60)     

    create table #head (
        op_type   char(2) not null,                     -- 操作类型 A 表示新建  D 表示删除
        xyqrid   varchar(30) not null,                --  确认函编号
        dh        varchar(20) not null,                -- 优惠单编号 
        yhdmc   varchar(30) not null,               -- 优惠单名称
        type      varchar(18) not null,                -- 直降种类  04表示10有函              
        qsrq     char(8) not null,                           --  起始日期
        jzrq         char(8) not null,                          -- 截止日期 
        qssj     char(8) not null,                      -- 起始时间 
        jzsj      char(8) not null,                             -- 截止时间
        jsfs      varchar(8) not null,                      ---结算方式
        oano    varchar(30) not null,                   -- OA公文号
        description   varchar(200)  not null,      -- 优惠单描述
        oprrq   char(8) not null,             -- 审批删除日期
        oprsj   char(6) not null               -- 审批删除时间    
    )     
    create table #detail (
        op_type   char(2) not null,                     -- 操作类型 A 表示新建  D 表示删除
        xyqrid   varchar(30) not null,                --  确认函编号
        dh        varchar(20) not null,                -- 优惠单编号 
        gdsid    varchar(20) not null,               --  优惠商品名称
        orgid    varchar(10)  not null,               -- 销售组织编码
        qdid     char(4) not null,                      -- 渠道编码
        tjlb        varchar(20)  not null,              -- 商品组
        pp        varchar(20)   not null,              -- 品牌编码
        gys       varchar(20)   not null,              -- 供应商编码
        fmid      varchar(10)   not null,             -- 库位编码
        yhed     numeric(16,4)  not null,            -- 优惠额度
        yhsl      numeric(16,4)   not null,            -- 优惠数量
        unit       varchar(3)  not null                 -- 销售单位
    ) 

    -- 删除1个月之前已成功发送的数据
    select @rq=convert(char(8),dateadd(month,-1,getdate()),112) 
    select @errcode=0
    select @errmsg = ''

    begin tran

        delete from IV_YHD_HEAD_SPYH_TO_PMS where  processflag = 'S' and convert(char(8),lastmodified,112)  = @rq
        if @@transtate = 2 or @@transtate = 3 or @@error != 0        
        begin       
                select @errcode=-1  
            select @errmsg = '删除IV_YHD_HEAD_SPYH_TO_PMS一月之前的数据失败！'                                     
                     goto procfail        
        end  

       delete from IV_YHD_DETAIL_SPYH_TO_PMS where  processflag = 'S' and convert(char(8),lastmodified,112)  = @rq
        if @@transtate = 2 or @@transtate = 3 or @@error != 0        
        begin     
                select @errcode=-1      
           select @errmsg = '删除IV_YHD_DETAIL_SPYH_TO_PMS一月之前的数据失败！'                                     
                     goto procfail        
        end  

        insert into #head 
        select op_type, xyqrid, dh, yhdmc, type, qsrq,jzrq, qssj, jzsj, jsfs, oano, description, oprrq, oprsj
        from IV_YHD_HEAD_SPYH_TO_PMS where processflag = 'Y' and op_type = @status

        update IV_YHD_HEAD_SPYH_TO_PMS set processflag = 'R'
        from IV_YHD_HEAD_SPYH_TO_PMS a, #head b
        where a.dh = b.dh and a.processflag = 'Y' and a.op_type = @status
      if @@transtate = 2 or @@transtate = 3 or @@error != 0        
        begin   
                select @errcode=-1       
           select @errmsg = '更新IV_YHD_HEAD_SPYH_TO_PMS表数据出错！'                                     
                     goto procfail        
        end  

        insert into #detail
        select a.op_type,a.xyqrid,a.dh,a.gdsid,a.orgid,a.qdid,a.tjlb,a.pp,a.gys,a.fmid,a.yhed,a.yhsl,a.unit
        from IV_YHD_DETAIL_SPYH_TO_PMS a,#head b
        where a.dh = b.dh and a.processflag = 'Y' and  a.op_type = @status

        update IV_YHD_DETAIL_SPYH_TO_PMS set processflag = 'R'
        from IV_YHD_DETAIL_SPYH_TO_PMS a, #head b
        where a.dh = b.dh and a.processflag = 'Y' and a.op_type = @status
      if @@transtate = 2 or @@transtate = 3 or @@error != 0        
        begin   
                select @errcode=-1       
           select @errmsg = '更新IV_YHD_DETAIL_SPYH_TO_PMS表数据出错！'                                     
                     goto procfail        
        end  

    procsuccess:
         commit trans
         goto myexit

    procfail:
         rollback trans
         goto myexit

       myexit:
          select  @errcode,@errmsg  
          select  op_type, xyqrid, dh, yhdmc, type, qsrq, jzrq,qssj, jzsj, jsfs, oano, description, oprrq, oprsj from #head
          select op_type,xyqrid,dh,gdsid,orgid,qdid,tjlb,pp,gys,fmid,yhed,yhsl,unit from #detail

end
go
grant all on p_if_pms_spyh_upload to ws
go 
```

我明白了你所说的并尝试其他方法。我向您展示代码：

```
 ResultSet rs = null;
                        int updateCount = -1;
                        int index = 1;

                        do {
                            updateCount = cs.getUpdateCount();
                            if (updateCount != -1) {      // it means it's a updateConut
                                cs.getMoreResults();
                                System.out.println("updateCount:" + updateCount);
                                continue;
                                }

                            rs = cs.getResultSet();
                            System.out.println(rs);
                            if (rs != null) {// it means updateCount == -1 and returns a resultSet

                                if (1 == index) {
                                    index++ ;
                                    if(rs.next()) {
                                        int errCode = rs.getInt(1);
                                        String errMsg = rs.getString(2);
                                        System.out.println("errCode:" + errCode + "    errMsg:" + errMsg);
                                        if (!(Constants.PROC_ERRORCODE_SUCC == errCode)) {
                                            logger.error("call sp errror:" + errMsg);
                                        }
                                    }
                                } else if (2 == index) {
                                    index++ ;
                                    rs = cs.getResultSet();
                                    while (rs.next()) {
                                         //proc resultSet                                               
                                    }

                                } else if (3 == index) {
                                    index++ ;
                                    rs = cs.getResultSet();
                                      // proc resultSet

                                    }

                                } else {
                                    break;
                                }

                                cs.getMoreResults();
                                continue;
                                                             }
                            // it means updateCount == -1 && rs == null nothing left to return    
                        } while (!(updateCount == -1 && rs == null)); 
```

这是调试结果

```
updateCount:1
updateCount:1
updateCount:1
updateCount:0
updateCount:0
updateCount:1
updateCount:1
updateCount:1
updateCount:1
org.apache.commons.dbcp.DelegatingResultSet@bd4e3c
errCode:0    errMsg: 
updateCount:1
updateCount:1
updateCount:1
null 
```

这是正确的代码

```
 ResultSet rs = null;
                        int updateCount = -1;
                        int index = 1;

                        do {
                            updateCount = cs.getUpdateCount();
                            if (updateCount != -1) {// it means it returns a updateCount
                                cs.getMoreResults();
                                continue;
                            }

                            rs = cs.getResultSet();
                            if (rs != null) {// it means it returns a ResultSet
                                if (1 == index) {
                                    index++;
                                    if(rs.next()) {
                                        int errCode = rs.getInt(1);
                                        String errMsg = rs.getString(2);
//                                        System.out.println("errCode:" + errCode + "    errMsg:" + errMsg);
                                        if (!(Constants.PROC_ERRORCODE_SUCC == errCode)) {
                                            logger.error("call sp execute error:" + errMsg);
                                        }
                                    }
                                    rs.close();  // it should call close() here 
                                } else if (2 == index) {

                                    index++;
                                    while (rs.next()) {
                                          //proc the second resultSet
                                    }
                                    rs.close();     // it should call close() here 
                                } else if (3 == index) {
                                    index++;
                                    while (rs.next()) {
                                        //proc the second resultSet                                         
                                    }

                                    rs.close();  // it should call close() here 
                                } else {
                                    break;
                                }

                                cs.getMoreResults();
                                continue;                                 
                            }

                        } while (!(updateCount == -1 && rs == null)); //nothing to return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:14:53.673

您不断在循环中调用 getMoreResults

```
CallableStatement cstmt;
ResultSet rs;
int i;
...
cstmt.execute();                            // Call the stored procedure 

while (cstmt.getMoreResults()){             // If we have more Results

    rs = cstmt.getResultSet();              // Get the result set

    while (rs.next()) {                     
        i = rs.getInt(1);                      
        System.out.println("Value from result set = " + i);  

    }
}

rs.close();
cstmt.close(); 
```

对于您的存储过程，看起来您总是返回三个结果集

代码应该让你接近，但如果你想调试它，你可以像我展示的那样做循环，在循环内，调用 ResultSetMetaData rsmd = rs.getMetaData(); [并且 rsmd 对象将告诉您有关当前结果集](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html)的几乎所有信息，这样您就可以真正了解返回的内容。

```
CallableStatement cstmt;
ResultSet rs;
int i;
...
cstmt.execute();                            // Call the stored procedure 

    // select  @errcode,@errmsg

    rs = cstmt.getResultSet();              // Get the result set

    while (rs.next()) {                     
        // Process the resultset   

    }

    rs.close();

    // select  op_type, xyqrid, dh, yhdmc, type, qsrq, jzrq,qssj, jzsj, jsfs, oano, description, oprrq, oprsj from #head

    rs = cstmt.getResultSet();              // Get the result set

    while (rs.next()) {                     
        // Process the resultset   

    }

    rs.close();

    // select op_type,xyqrid,dh,gdsid,orgid,qdid,tjlb,pp,gys,fmid,yhed,yhsl,unit from #detail

    rs = cstmt.getResultSet();              // Get the result set

    while (rs.next()) {                     
        // Process the resultset   

    }

    rs.close();

cstmt.close(); 
```

# java - Jaxb：在不修改 JAXB java 类的情况下追加请求 XML 的字段

> ID：11827978
> 
> 赞同：1
> 
> 时间：2012-08-06T12:08:19.590
> 
> 标签：java, jaxb, jaxb2

我将 JAXB 2.0 用于使用 RestFul Webservices 的应用程序开发。现在请求中有一个修改，即我将在请求 XML 中获得另一个文件/变量。

```
<Root Id="567" att="758" /> 
```

修改后的请求将是

```
 <Root Id="567" att="758" anotherfiledadded ="kiran" /> 
```

我的问题是，是否可以在 UserData 类中自动附加该字段（anotherfiledadded）（无需修改 UserData ??）

**下面是我的 UserData 类**

```
@XmlRootElement(name = "Root")
@XmlAccessorType(XmlAccessType.FIELD)

public class UserData {

    @XmlAttribute
    private String Id;

    @XmlAttribute
    private String att;

// getters and setters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:49:10.057

您可以尝试在运行时使用[javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)添加该字段。但是......看起来你还需要添加注释*@XmlAttribute*，我不知道**javassist**是否允许你添加注释......无论如何试一试。

请参阅：[Javassist 添加](http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial2.html#add)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:02:24.887

您可以使用 XSLT 将属性应用到您的 XML 文档中。自 Java SE 6 起，以下所有类都在 JDK/JRE 中可用。

```
JAXBContext jc = JAXBContext.newInstance(UserData.class); 
JAXBSource source = new JAXBSource(jc, myUserData);

StreamResult result = new StreamResult(System.out);

TransformerFactory tf = TransformerFactory.newInstance();
StreamSource xslt = new StreamSource("addMyAttribute.xslt");
Transformer t = tf.newTransformer(xslt);
t.transform(source, result); 
```

如果您使用 JAX-RS 实现 RESTful 服务，则可以通过以下方式插入此逻辑`MessageBodyWriter`：

# amazon-web-services - 使用 Amazon Web Services 进行图像处理

> ID：11827979
> 
> 赞同：1
> 
> 时间：2012-08-06T12:08:19.980
> 
> 标签：amazon-web-services

我目前有一个 Web 服务，它执行以下操作：
- 用户输入图像
- Web 服务使用 OpenCV 启动 C 程序
- 程序加载训练数据
- 程序检测并识别某些对象
- 程序将这些检测和识别记录在 MySQL 数据库中
- 如果程序检测到并识别出对象，则将其添加到训练数据

中。每个图像运行该程序最多可能需要 1 分钟。我如何构建 Amazon Web Services 以有效地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:35:28.560

巧合的是，AWS 发布了关于使用 EC2、S3、SimpleDB 和 SQS 处理图像的[详细教程。](http://aws.amazon.com/articles/1602)它应该能让你大部分时间到达那里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-10-13T07:48:37.110

你可以在aws中使用**step函数**你会看到一个f的过程

# dns - java - 如何在java中的套接字编程中使用主机名代替IP地址？

> ID：11827986
> 
> 赞同：1
> 
> 时间：2012-08-06T12:08:39.370
> 
> 标签：dns

我正在使用套接字编程通过 wi-fi 在 java 中连接两台 PC。我在客户端使用了服务器的IP地址。但问题是，当服务器的IP地址发生变化时，我必须在客户端更改服务器的IP地址。当我使用主机名进行连接时，什么也没有发生。有什么方法可以使用静态 ip 或任何其他可以连接它们的解决方案，它们可以在任何网络上工作。独立于服务器的IP地址。请建议我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:11:08.800

我认为您的问题有一个简单的解决方案...您应该使用 Inetaddress.getbyName("user-pc").getHostAddress() 获取设备的 IP 地址

希望它对你有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:22:18.443

**1.**首先，如果你在局域网上，那么任何来自 A、B、C 类的 IP 就足够了，但如果你想通过 Internet，那么你必须小心私有和公共 IP。

**2.**对于Internet 上的**静态 IP**，您需要联系您的**Internet 服务器提供商**，或者您可以尝试一些基于您的动态 ips 提供静态 IP 的网络站点。

**3.**但是，如果您希望由于服务器 ip 的更改而无需更改客户端代码，那么您可以执行以下操作...

**-****通过使用域名服务器，使用服务器的而不是**IP `Domain Name`。

 ****-**不是将服务器的原始 IP 存储在客户端代码中，而是**使用 Some 变量从某些变量中获取服务器的 IP** `file like the Property file, Database etc...`**

# javascript - Calculating timestamp in IE by jQuery - not working

> ID：11827998
> 
> 赞同：0
> 
> 时间：2012-08-06T12:09:35.767
> 
> 标签：javascript, jquery, internet-explorer, timestamp

I have some problem with IE (all versions). It don't calculating the code of timestamp. My code is below:

```
function compute() {
    var c = $('select#time_from_hour').val();
    var d = $('select#time_from_minute').val();
    var e = $('select#time_to_hour').val();
    var f = $('select#time_to_minute').val();
    var g = $('input#date_from').val();
    var h = $('input#date_to').val();
    var hour1 = g + ' ' + c + ':' + d; 
    var hour2 = h + ' ' + e + ':' + f; 

    hour1 = hour1.split("/"); 
    var hour1 = hour1[1] + "," + hour1[0] + "," + hour1[2];
    var timestamp = (new Date(hour1).getTime() / 1000) + 7200;
    $('#total_hour1').val(timestamp);

    hour2 = hour2.split("/"); 
    var hour2 = hour2[1] + "," + hour2[0] + "," + hour2[2];
    var timestamp = (new Date(hour2).getTime() / 1000) + 7200;
    $('#total_hour2').val(timestamp);

    var x = -$('input#total_hour1').val();
    var y = -$('input#total_hour2').val();
    var total_time = x - y; 
    result = total_time / 86400;
    new_number = Math.ceil(result); 

    if (isNaN(new_number)) { 
        var new_number = 0;
    }

    $('#finish_day').val(new_number);
}

$('select#time_from_hour').change(compute);
$('select#time_from_minute').change(compute);
$('select#time_to_hour').change(compute);
$('select#time_to_minute').change(compute);
// $('select#return_car').change(compute);
$('select#get_car').change(compute);
$('input#finish_day').change(compute); 
```

On other modern browser (firefox, opera, chrome) everything works fine. Only on IE i got the "NaN" value in `timestamp1` and `timestamp2`.

Thanks in advice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:37:24.487

You seem to pass the Argument of the `Date`-Constructor in the wrong format. According to [MSDN](http://msdn.microsoft.com/library/dca21baa.aspx), the IE-Implementation of `Date` accepts the Date in the following order:

```
function Date( year : int, month : int, date : int[, hours : int [, minutes : int [, seconds : int [, ms : int]]]] ) 
```

If you make sure, that you pass the arguments in this format, everything should work fine. You'll find the working Code here: [http://jsfiddle.net/utXMD/](http://jsfiddle.net/utXMD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:28:39.073

Got the problem and able to run your code in IE too.

```
var hour1 = g + ' ' + c + ':' + d; 
var hour2 = h + ' ' + e + ':' + f; 

hour1 = hour1.split("/"); 
var hour1 = hour1[1] + "," + hour1[0] + "," + hour1[2];
var timestamp = (new Date(hour1).getTime() / 1000) + 7200; 
```

No need to split the hour1, just pass the same to calculate the timestamp. below code works

```
var hour1 = g + ' ' + c + ':' + d;
var hour2 = h + ' ' + e + ':' + f;

//    var hour1 = hour11.split("/");
//  hour1 = hour1[1]+","+hour1[0]+","+hour1[2];
var timestamp = (new Date(hour1).getTime()/1000) + 7200;
$('#total_hour1').val(timestamp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:35:42.213

In your code:

```
> function compute() {
>     var c = $('select#time_from_hour').val();
>     var d = $('select#time_from_minute').val();
>     var e = $('select#time_to_hour').val();
>     var f = $('select#time_to_minute').val();
>     var g = $('input#date_from').val();
>     var h = $('input#date_to').val();
>     var hour1 = g + ' ' + c + ':' + d;
>     var hour2 = h + ' ' + e + ':' + f; 
>
>     hour1 = hour1.split("/"); 
>     var hour1 = hour1[1] + "," + hour1[0] + "," + hour1[2]; 
```

Presumably the above results in a string something like:

```
day/month/year h:m:s 
```

which is not guaranteed to be parsed correctly by any browser. In ECMA-262 ed 3 the parsing of date strings was entirely implementation dependent. In [ES5](http://es5.github.com/#x15.9.1.15) a modified version of the ISO8601 format is specified but it's not supported by all browsers. And the above string isn't compliant with that format either.

```
>     var timestamp = (new Date(hour1).getTime() / 1000) + 7200; 
```

That seems to be an attempt at creating a seconds since epoch number from a timestamp. It's better to use the bits of date and time you already have, something like:

```
// Presuming g is in the format day/month/year
g = g.split("/");
var someDate = new Date(+g[2], --g[1], +g[0], +c, +d + 2); // add 2 hours here
var timestamp = Math.round(someDate/1000); 
```

I suggest you have a look at how the [Date constructor](http://es5.github.com/#x15.9.3) works and use it directly rather than trying to create a string that must them be parsed.