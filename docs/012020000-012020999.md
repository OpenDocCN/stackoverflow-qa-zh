# StackOverflow 问答 12020000-12020999

# excel - Generating test data in Excel for an EAV table

> ID：12020009
> 
> 赞同：0
> 
> 时间：2012-08-18T15:59:10.620
> 
> 标签：excel

This is a pretty complicated question so be prepared! I want to generate some test data in excel for my EAV table. The columns I have are:

user_id, attribute, value

Each user_id will repeat for a random number of times between 1-4, and for each entry I want to pick a random attribute from a list, and then a random value which this can take on. Lastly I want the attributes for each id entry to be unique i.e. I do not want more than one entry with the same id and attribute. Below is an example of what I mean:

```
user_id attribute   value
100001  gender      male
100001  religion    jewish
100001  university  imperial
100002  gender      female
100002  course      physics 
```

Possible values:

```
attribute   value
gender      male
            female
course      maths
            physics
            chemistry
university  imperial
            cambridge
            oxford
            ucl
religion    jewish
            hindu
            christian
            muslim 
```

Sorry that the table above messed up. I don't know how to paste into here while retaining the structure! Hopefully you can see what I'm talking about otherwise I can get a screenshot.

How can I do this? In the past I have generated random data using a random number generator and a VLOOKUP but this is a bit out of my league.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:15:01.430

My approach is to create a table with all four attributes for each ID and then filter that table randomly to get between one and four filtered rows per ID. I assigned a random value to each attribute. The basic setup looks like this:

![randomized eav table with lookup table](../Images/597846de0daaf069e5e471e00d9df01d.png)

To the left is the randomized eav table and to the left is the lookup table used for the randomized values. Here's the formulas. Enter them and copy down:

Column A - Establishes a random number every four digits. This determines the attribute that must be selected:

```
=IF(COUNTIF(C$2:C2,C2)=1,RANDBETWEEN(1,4),A1) 
```

Column B - Uses the formula in A to determine if row is included:

```
=IF(COUNTIF(C$2:C2,C2)=A2,TRUE,RANDBETWEEN(0,1)=1) 
```

Column C - Creates the IDs, starting with 100,001:

```
=(INT((ROW()-2)/4)+100000)+1 
```

Column D - Repeats the four attributes:

```
=CHOOSE(MOD(ROW()-2,4)+1,"gender","course","university","religion") 
```

Column E - Finds the first occurence of the Column D attribute in the lookup table and selects a randomly offset value:

```
=INDEX($H$2:$H$14,(MATCH(D2,$G$2:$G$14,0))+RANDBETWEEN(0,COUNTIF($G$2:$G$14,D2)-1)) 
```

When you filter on the TRUEs in Column B you'll get your list of one to four Attributes per ID. Disconcertingly, the filtering forces a recalculation, so the filtered list will no longer say TRUE for every cell in column B.

If this was mine I'd automate it a little more, perhaps by putting the "magic number" 4 in it's own cell (the count of attributes).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:17:48.283

There are a number of ways to do this. You could use either perl or python. Both have modules for working with spreadsheets. In this case, I used python and the openpyxl module.

```
# File:  datagen.py
# Usage: datagen.py <excel (.xlsx) filename to store data>
# Example:  datagen.py myfile.xlsx

import sys
import random
from openpyxl import Workbook
from openpyxl.cell import get_column_letter

# verify that user specified an argument
if len(sys.argv) < 2:
    print "Specify an excel filename to save the data, e.g myfile.xlsx"
    exit(-1)

# get the excel workbook and worksheet objects
wb = Workbook()
ws = wb.get_active_sheet()

# Modify this line to specify the range of user ids
ids = range(100001, 100100)

# data structure for the attributes and values
data = { 'gender':      ['male',    'female'], 
         'course':      ['maths',   'physics',  'chemistry'],
         'university':  ['imperial','cambridge','oxford',   'ucla'],
         'religion':    ['jewish',  'hindu',    'christian','muslim']}

# Write column headers in the spreadsheet          
ws.cell('%s%s'%('A', 1)).value = 'user_id'
ws.cell('%s%s'%('B', 1)).value = 'attribute'
ws.cell('%s%s'%('C', 1)).value = 'value'

row = 1

# Loop through each user id
for user_id in ids:
    # randomly select how many attributes to use
    attr_cnt = random.randint(1,4)
    attributes = data.keys()
    for idx in range(attr_cnt):
        # randomly select attribute
        attr = random.choice(attributes)
        # remove the selected attribute from further selection for this user id
        attributes.remove(attr)
        # randomly select a value for the attribute
        value = random.choice(data[attr])
        row = row + 1
        # write the values for the current row in the spreadsheet
        ws.cell('%s%s'%('A', row)).value = user_id
        ws.cell('%s%s'%('B', row)).value = attr
        ws.cell('%s%s'%('C', row)).value = value

# save the spreadsheet using the filename specified on the cmd line
wb.save(filename = sys.argv[1]) 
print "Done!" 
```

# windows-runtime - Windows 8 应用程序支持的 URI 方案

> ID：12020014
> 
> 赞同：4
> 
> 时间：2012-08-18T15:59:53.757
> 
> 标签：windows-runtime, windows-store-apps, uri, winrt-xaml, winjs

Windows 8 应用程序支持哪些 URI 方案？我看到了对[ms-appx: 和 ms-appdata: 的](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781215.aspx)引用，以及一些很少提到的[ms-resource:](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)但我找不到任何可以作为方案列表的文档（尽管我认为我过去看过一个） . 我想知道[URL.createObjectURL](http://msdn.microsoft.com/en-us/library/windows/apps/hh453196.aspx)是否返回一些其他方案，但我看不到 XAML 应用程序的版本。[http://msdn.microsoft.com/en-us/library/windows/apps/Hh781215.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781215.aspx)。WinRT 中是否支持任何其他 URI 方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T16:17:27.870

我相信[Metro js 计划。](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)也适用于 xaml。

此处列出了其中一些用于 xaml 应用程序的内容：[如何加载文件资源](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322%28v=win.10%29.aspx)（用于 XAML 应用程序）

`ms-resource:`此处列出了 xaml 应用程序：[ResourceLoader.GetStringForReference](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.resources.resourceloader.getstringforreference.aspx)

**Metro 应用程序中可用的 URI：**

**一般形式**

```
<scheme>://<domain name>/<path> 
```

**Http**

```
http://www.contoso.com/images/logo.png 
```

**应用程序包**

```
ms-appx:
ms-appx:///default.html
ms-appx-web: 
```

> 通过此方案引用的内容是从本地包中加载的，但运行时具有 Web 上下文的能力和限制。

**文件系统**

不能直接使用。要使用，获取一个`IStorageItem`然后使用`URL.createObjectURL`

```
file:// 
```

**应用程序数据**

```
ms-appdata:// 
```

**资源**

```
ms-resource:// 
```

**依赖包**

```
<domain name>: 
```

**[WebSocket](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh994399%28v=win.10%29.aspx)的 URI**

`ws:`对于未加密和`wss:`加密。像这样使用：

```
webSocket = new MessageWebSocket();
await webSocket.ConnectAsync("wss://www.example.com"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T16:15:56.447

现在似乎有一篇关于 Windows 开发中心的文章专门针对[URI 方案](http://msdn.microsoft.com/en-us/library/windows/apps/jj655406.aspx)。

# c++ - 删除布局中的小部件

> ID：12020015
> 
> 赞同：6
> 
> 时间：2012-08-18T15:59:57.140
> 
> 标签：c++, qt, delete-operator

如果我们在布局中`delete widget`运行会发生什么？`widget`如果这个案例写在文档中，请给我链接（我没找到）。

代码示例：

```
QLabel *l1 = new QLabel("1st");
QLabel *l2 = new QLabel("2nd");
QVBoxLayout *layout = new QVBoxLayout;
layout->addWidget(l1);
layout->addWidget(l2);

QWidget *mainWidget = new QWidget;
mainWidget->setLayout(layout);
mainWidget->show();

delete l1;
l2->deleteLater(); 
```

`l1`对于和会发生什么不同的事情`l2`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:22:20.317

我相信您所做的几乎相同，尽管两者都不会按照您应该做的方式正确地从布局中删除。它们仍然在布局中作为不良参考（如果我没记错的话）

第一个现在只是删除该项目。一旦控件返回事件循环，第二个将删除它。但实际上，人们通常从布局中删除项目的方式是将它们从布局中取出（给它一个自我调整的机会），然后删除项目及其小部件（如果你愿意的话）。

```
QLayoutItem *child;
while ((child = layout->takeAt(0)) != 0) {
    delete child->widget();
    delete child;
} 
```

同样，`child->widget()`仅当您想要销毁已添加的小部件时，才需要删除小部件 ( )，以及持有它的布局项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:47:53.473

> QLayout 监听 ChildRemoved 类型的事件并相应地删除项目。简单地删除小部件是安全的。

@FrankOsterfeld[在](https://stackoverflow.com/users/299399/frank-osterfeld) [这里](https://stackoverflow.com/questions/12020015/deleting-widget-that-is-in-layout#comment16041799_12021142)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:11:50.540

不要在连接有活动插槽的 Qobjects 上使用 delete l1，你会遇到崩溃。使用：l1->hide(); l1->deleteLater(); 这对我来说可以

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T18:45:35.627

通常，我不喜欢删除 Qt 小部件，而是将它们从适当的布局中删除。[（如果您设置Delete on close window 属性，](https://doc.qt.io/qt-5/qt.html#WidgetAttribute-enum) Qt 将删除它自己的小部件。 ）调用 delete 和稍后删除之间的区别在于`delete`，普通的 C++[删除操作](http://en.wikipedia.org/wiki/Delete_%28C++%29)将调用析构函数并释放与对象关联的内存。

[如Qt 文档](https://doc.qt.io/qt-5/qobject.html#deleteLater)`deleteLater()`中所讨论的，该方法在进入事件循环时删除对象。

# google-chrome - chrome扩展程序可以连接到桌面中的后端应用程序吗

> ID：12020016
> 
> 赞同：0
> 
> 时间：2012-08-18T16:00:02.803
> 
> 标签：google-chrome, desktop-application

chrome扩展有什么方法可以在桌面上使用命令行应用程序获取/设置参数？不使用 npnpi 吗？也许是http？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:06:47.200

不，出于安全原因，没有任何可行的方法来做到这一点。但是，您可以注册自定义协议，`example://`并在客户端系统上安装程序来处理您的自定义协议。希望这可以帮助！

# javascript - 如何检查网页没有被使用？喜欢聊天中的理想

> ID：12020018
> 
> 赞同：-2
> 
> 时间：2012-08-18T16:00:06.853
> 
> 标签：javascript, jquery

我想检查用户是否有几秒钟没有使用页面？？可以使用 javascript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:03:57.327

您可以安装[鼠标移动事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/window.onmousemove)和计时器。在鼠标移动中，您使用当前时间设置一个变量，并在计时器中检查您多久没有看到任何鼠标事件。

当然，您还应该设置一个[keydown 处理程序](https://developer.mozilla.org/en-US/docs/DOM/window.onkeydown)来查看用户是否正在使用键盘。

显然，没有办法知道用户是否只是在仔细阅读页面......有时阅读仍然有资格“使用”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:15:53.083

取决于您如何定义“未使用”，但可以说当用户切换选项卡或更改浏览器时。

您可以使用 jQuery 轻松捕获此 evan。请注意，下面的代码只是想法，如果有错误，它可能无法在没有调试的情况下运行，但你可以看到我的意思

```
var seconds=0;
var notLooking=false;
$(window).blur(function(){
   check();
});
$(window).focus(function(){
   absent=false;
   seconds=0;
});

function check(){
   if( seconds > 10 && absent ){
      alert("dude you should monitor your chat, you are absent too long!!!");
      seconds=0;
      absent=false;
   }else{
     if( absent ){
        setTimeout(check, 1000);
     }else{
       //user is back
       absent=false;
       seconds=0;
     }

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:04:27.417

您必须弄清楚“未使用”是什么意思。现代浏览器的一种常见方法是查看页面选项卡是否具有焦点。您可以使用窗口事件`focus`并`blur`为此。另请参阅： [https ://stackoverflow.com/a/6184276/362536](https://stackoverflow.com/a/6184276/362536)

# python - 如何列出networkx中的特定节点/边缘？

> ID：12020020
> 
> 赞同：6
> 
> 时间：2012-08-18T16:00:16.683
> 
> 标签：python, graph, traversal, networkx

假设图中有一个树状结构`networkx`：

```
n-----n1----n11
 |     |----n12
 |     |----n13
 |           |----n131 
 |----n2             | 
 |     |-----n21     X
 |     |-----n22     |
 |            |----n221 
 |----n3

      n4------n41
      n5 
```

1.  如何列出具有“子节点”及其深度的所有节点，这里：n，n1，n13，n2，n22，n4
2.  如何列出没有“子节点”的所有节点，这里：n11，n12，n21，n41，n5
3.  如何列出孤儿节点，这里：n5 以及如何列出“孤儿”边，不属于根 n 边，这里是 n4-n41，
4.  如何列出具有超过 2 个“子节点”的节点，此处为 n，n1
5.  如果n131，n221在节点遍历中存在边，会出现无限循环怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T17:39:04.227

图构建：

```
>>> import networkx as nx
>>> G = nx.DiGraph()
>>> G.add_edges_from([('n', 'n1'), ('n', 'n2'), ('n', 'n3')])
>>> G.add_edges_from([('n4', 'n41'), ('n1', 'n11'), ('n1', 'n12'), ('n1', 'n13')])
>>> G.add_edges_from([('n2', 'n21'), ('n2', 'n22')])
>>> G.add_edges_from([('n13', 'n131'), ('n22', 'n221')])
>>> G.add_edges_from([('n131', 'n221'), ('n221', 'n131')]
>>> G.add_node('n5') 
```

1.  使用[out_degree](http://networkx.lanl.gov/reference/generated/networkx.DiGraph.out_degree.html#networkx.DiGraph.out_degree)函数查找所有具有子节点的节点：

    ```
    >>> [k for k,v in G.out_degree().iteritems() if v > 0]
    ['n13', 'n', 'n131', 'n1', 'n22', 'n2', 'n221', 'n4'] 
    ```

    请注意，n131 和 n221 也出现在此处，因为它们彼此都有优势。如果你愿意，你可以过滤掉这些。

2.  所有没有子节点的节点：

    ```
    >>> [k for k,v in G.out_degree().iteritems() if v == 0]
    ['n12', 'n11', 'n3', 'n41', 'n21', 'n5'] 
    ```

3.  所有孤立节点，即度数为 0 的节点：

    ```
    >>> [k for k,v in G.degree().iteritems() if v == 0]
    ['n5'] 
    ```

    要获取所有孤立的“边”，您可以获取图形的组件列表，过滤掉不包含的组件`n`，然后只保留有边的组件：

    ```
    >>> [G.edges(component) for component in nx.connected_components(G.to_undirected()) if len(G.edges(component)) > 0 and 'n' not in component]
    [[('n4', 'n41')]] 
    ```

4.  具有 2 个以上子节点的节点：

    ```
    >>> [k for k,v in G.out_degree().iteritems() if v > 2]
    ['n', 'n1'] 
    ```

5.  如果你遍历树，你不会得到一个无限循环。NetworkX 具有对此稳健的遍历算法。

# android - 在 Android 中读取 Soap 服务

> ID：12020021
> 
> 赞同：0
> 
> 时间：2012-08-18T16:00:19.263
> 
> 标签：android, soap

我是android世界的新手，我在我的代码中使用soap服务，我不知道如何从url读取soap服务到我的代码中。这是一个链接[http://www.livedrive.com/ResellersService/ResellerAPI.asmx?op=SubDomainValid](http://www.livedrive.com/ResellersService/ResellerAPI.asmx?op=SubDomainValid)。

谁能让我知道我需要为这些变量输入什么值 private static String NAMESPACE = ""; 私有静态字符串 METHOD_NAME = ""; 私有静态字符串 SOAP_ACTION = ""; 私有静态字符串 URL = "";

我如何解析数据？问候 Mehroze

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:50:25.447

让 SOAP 在 android 中工作的最简单方法是使用像[wsdl2code](http://wsdl2code.com)这样的服务。您需要做的就是将您的 asmx url 放在那里，它将生成在 android 中使用它所需的所有类。

我确实遇到了一些问题，但以下步骤解决了我的问题

1.  将 VER11 更改为 VER12
2.  注释掉那些说 addMapping 的行，除非你将一个类传递给服务

每当我使用肥皂时，我几乎都会使用 wsdl2code

# python - 如何在 django 的单独行上显示此数组 [45,70,65] 的每个内容

> ID：12020028
> 
> 赞同：1
> 
> 时间：2012-08-18T16:02:02.063
> 
> 标签：python, django

如何`[45,70,65]`在 Django 中的单独行上显示数组的每个内容？任何时候我使用

```
{% for keep in keep1 %}
    {{ keep }}
{% endfor %} 
```

它一直显示`40 70 65`在三个不同的行上，*即*

```
40 70 65
40 70 65
40 70 65 
```

但我想要的是

```
40
70
65 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:11:00.150

如果您要输出到 HTML（我想您是），您将需要`<br/>`模板中的元素或`<pre>`标签：

```
{% for keep in keep1 %}
    {{ keep }}<br />
{% endfor %} 
```

或者

```
<pre>
    {% for keep in keep1 %}
    {{ keep }}
    {% endfor %}
</pre> 
```

空白字符（空格、换行符*等*）[在 HTML 中有特殊处理](http://www-sul.stanford.edu/tools/tutorials/html2.0/whitespace.html)，换行符本身通常不显示。

不过，如上所述，我仍然有兴趣查看您的视图代码。看起来像

```
keep1 = [[45,70,65], [45,70,65], [45,70,65]] 
```

从你的输出，这不是你想要的。也许是列表理解的错误或其他什么？

# objective-c - 表视图未正确更新

> ID：12020030
> 
> 赞同：0
> 
> 时间：2012-08-18T16:02:14.717
> 
> 标签：objective-c, ios

我的项目很大，我不确定是哪个代码段导致了问题，所以我只描述一下问题。我有一个初始视图，它是`UITableView.`这个视图有一个`navigation bar`，其中一个按钮是一个“ `edit`”按钮。按下“编辑”按钮会将您带到一个模态视图控制器，其中还有另一个 UITableView。这`UITableView`具有它是一个清单的属性`table view`（其中可以选择[选中]或取消选择多个项目。一旦您完成选择项目，它将所选对象的数组保存到`NSUserDefault.`现在，您回到原始页面，其中你选择的东西的数组应该显示在`UITableView`. 我将提供`UITableView`数据的数组更改为从`NSUserDefaults`.`[tableView reloadData]`什么都没有改变。我真的很感激任何提示。如果你们认为您知道代码的哪一部分让我感到悲伤，请回复，我会发布它。谢谢（顺便说一句，我知道我应该把主要`view controller`的`delegate`）`modal view controllers`。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:39:12.660

`[[NSUserDefaults standardUserDefaults] synchronize];`在模态视图控制器中进行更改后调用。这将保存更改。

确保每次重新加载表格行时更新单元格内容。

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    Bleh *data = (Get your data for this row);

    cell.textLabel.text = data.myValue;
    cell.imageView.image = data.myImage;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T11:23:21.207

当您从方法调用返回时，尝试重新加载您`tableview`的`viewwillappear``modelviewcontroller`

```
- (void)viewWillAppear:(BOOL)animated{
[yourTableView reloadData];
} 
```

# ios - 尝试从 URL 调用 JSON 数据时 SIGABRT 崩溃

> ID：12020031
> 
> 赞同：0
> 
> 时间：2012-08-18T16:02:19.963
> 
> 标签：ios, xcode, json, sigabrt

我正在开发一个将 JSON 数据带入 TableView 的应用程序。但是在 JSON 操作的代码开始的那一刻，应用程序崩溃并出现 SIGABRT 错误。下面是我正在使用的代码（当然，出于安全原因，减去了实际的 URL）：

```
// START - CONNECT TO JSON FILE ON SERVER AND DOWNLOAD INFORMATION
- (void)fetchTags
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"URL goes here..."]];

        NSError* error;
        //tags = how many objects there are in the JSON file containing data
        tags = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error]; 
```

NSDictionary *tagz = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

```
 tags = [tagz objectForKey:@"name"];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}
// END - CONNECT TO JSON FILE ON SERVER AND DOWNLOAD INFORMATION

//START - NUMBER OF ROWS TO GENERATE
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tags.count;
}
//END - NUMBER OF ROWS TO GENERATE

// START - PULL IN INFORMATION FROM JSON AND DISPLAY IN CELLS
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TagCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *tag = [tags objectAtIndex:indexPath.row];
    NSString *name = [tag objectForKey:@"name"];

        if ([tag objectForKey:@"name"] != NULL)

    cell.textLabel.text = name;

    return cell;
    }
// END - PULL IN INFORMATION FROM JSON AND DISPLAY IN CELLS 
```

这是 URL 指向的 JSON 数据： {"sessionid": "0.97880095305420120818085118", "option2": "", "logonresult": "ACCEPT", "projects": [{"projid": 2012011101, "name": "\u5909\u66f4\u5c65\u6b74\u30c6\u30b9\u30c8"}, {"projid": 2011101401, "name": "20111014-01"}, {"projid": 201111001, "name": "\u5c3e \u7530\u90b8\u30ea\u30d5\u30a9\u30fc\u30e0" }], "option1": ""}

这是崩溃时返回的完整错误：2012-08-19 00:32:59.421 CameraTest[2141:707] -[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x16f750 2012-08-19 00:32:59.423 CameraTest[ 2141:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x16f750”

谁能发现我做错了什么或向我推荐可能有帮助的教程？

提前致谢！

编辑：放置在 (void)fetchTags 中的以下代码修复了崩溃，但我仍然遇到问题，因为数据没有被拉入我的单元格：

```
 NSDictionary *tagz = [NSJSONSerialization JSONObjectWithData:data
                                                         options:kNilOptions
                                                           error:&error];

    tags = [tagz objectForKey:@"name"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:14:31.873

我很确定那`tags`是一个`NSArray`或一个`NSMutableArray`，它应该是一个`NSDictionary`。

您的应用程序崩溃的原因是由于`[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];`返回 NSDictionary 对象并且`NSDictionary`没有该`objectAtIndex:`方法，因此会触发异常。

你可以这样做：

```
NSDictionary *tagz = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

tags = [tagz objectForKey:@"name"]; 
```

# jquery - 无法提交克隆的表单

> ID：12020034
> 
> 赞同：3
> 
> 时间：2012-08-18T16:03:26.080
> 
> 标签：jquery, submit, clone, forms

我有一个表格，其中每一行对应一个表格。虽然标记无效（`<form>`标签`<tr>`紧随其后），但提交按钮按预期工作（即它们提交包含表单）。到现在为止还挺好。

现在我准备一个新行附加到上面提到的表中。它隐藏在一个单独的表中。当按下“添加年份”按钮时，我`tr`使用表单克隆并将其附加到表格中。但是惊喜来了：新创建的提交按钮没有提交。（我在没有克隆的情况下尝试了同样的方法，没有区别。）

以下是代码片段（包含在[JSFiddle](http://jsfiddle.net/9j4fx/1/)中）：

## HTML

```
<div id="min" style="display:none">2010</div>

<div id="div_newyr" style="display:none">
<table>
    <tr>
<form action="" method="post" name="form1" id="form1">
        <td class="td_yr">
            <span></span>
            <input type="hidden" name="yr" value="" />
        </td>
        <td><input type="submit" name="sub_close" value="Close" /></td>
</form>
    </tr>
</table>
</div>

<table>
<tbody id="tb_yrs">
    <tr>
<form action="" method="post" name="form2" id="form2">
        <td class="td_yr last">
            <span>2010</span>
            <input type="hidden" name="yr" value="2010" />
        </td>
        <td><input type="submit" name="sub_close" value="Close" /></td>
</form>
    </tr>

</tbody>
<tbody>    
    <tr>
        <td><input type="button" id="but_newyr" value="Add a year" /></td>
    </tr>
</tbody>
</table> 
```

## JS

```
jQuery(document).ready(function() {
    $('#but_newyr').click(function() {
        var firstYear = parseInt($('div#min').html());
        firstYear--;
        newRow = $('#div_newyr').find('tr').clone(true);
        newRow.find('td.td_yr').children('span').html(firstYear).next('input').val(firstYear);

        $('#tb_yrs').append(newRow);
        $('div#min').html(firstYear);
    });
});

//added on a tip from a deleted answer
$(document).on('click', "input[type=submit]" ,function(){
    $(this).closest('form').submit();
}); 
```

如果我让要克隆的表单可见，以便在克隆之前检查它是否有效，我可以提交该表单。所以，问题是：原始表单和附加/克隆表单或提交按钮有什么区别？

（只是一个旁注：附加的行开始于 Chrome 下的第二个单元格 - 但我认为它与提交无关。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:49:56.107

尝试

```
$(this).closest('tr').find('form').submit(); 
```

代替

```
$(this).closest('form').submit(); 
```

但更好的是避免无效标记，并且：

1.  不要使用表格进行布局
2.  不要使用`form`元素 - 使用 jQuery按需[序列化和提交行](http://api.jquery.com/serialize/)

# c++ - C++ - 找不到过程入口点？

> ID：12020037
> 
> 赞同：2
> 
> 时间：2012-08-18T16:03:44.207
> 
> 标签：c++, dll, entry-point

我在使用 Visual Studio 2012 的 Windows 8 上。我在 C++ 中使用 gtkmm，我正在尝试显示一个 gui。当我第一次启动我的程序时，我的程序甚至没有到达 main 方法，我收到一个错误对话框，上面写着“程序入口点？_Init@locale@std@@CAPAV_Locimp@12@XZ 无法位于 RemoteController.exe 中” ，这是我的应用程序的名称。在尝试找到此错误的解决方案后，我注意到的第一件事是它将我的可执行文件称为 dll。我见过的其他有此错误的人似乎没有这样做。我真的不明白发生了什么，因为它只是无缘无故地随机开始这样做。我尝试解决问题的步骤是： 1\. 在 C++ 主方法和 Windows 主方法之间切换。（我确保相应地更改子系统设置）。2.创建一个新项目并将我的代码粘贴到其中。

我真的不知道它有什么问题。我最好的猜测是它一定与 gtkmm 有关，但它正在工作，然后随机停止工作，而我没有更改代码。

# javascript - 扩展主干对象

> ID：12020045
> 
> 赞同：0
> 
> 时间：2012-08-18T16:04:35.940
> 
> 标签：javascript, backbone.js, prototype, underscore.js, extending

我需要使用一些自己的成员来扩展主要的主干功能（视图、模型、路由器）。但是，以下内容无法正常工作：

```
Backbone.View.prototype.foo = ["bar"]; 
```

诚然，表达

```
testView = new Backbone.view.extend({})
testView2 = new Backbone.view.extend({})
alert(testView.foo.length); 
```

状态 1 但设置

```
testView2.foo.push("blah"); 
```

还将字符串添加到 testView.foo 因为引用是相同的。

任何人都知道如何扩展这些对象？

提前致谢 ：）

狮子座

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:10:34.593

通常您不会扩展标准视图，而是创建自己的基本视图类型。您应该避免更改 Backbone 原型上的值。

```
var BaseView = Backbone.View.extend({
  foo: null,
  initialize: function(options){
    this.foo = ["bar"];

    Backbone.View.prototype.initialize.apply(this, arguments);
  }
});

var testView = new BaseView();
var testView2 = new BaseView();
console.log(testView.foo.length); // prints '1'
console.log(testView2.foo.length); // prints '1'    

testView2.foo.push("blah");

console.log(testView.foo.length); // prints '1'
console.log(testView2.foo.length); // prints '2' 
```

# php - 无论如何要检测用户是否使用php关闭浏览器？

> ID：12020047
> 
> 赞同：1
> 
> 时间：2012-08-18T16:05:45.850
> 
> 标签：php, file, browser, delete-file

> **可能重复：**
> [在 PHP 中检测浏览器退出](https://stackoverflow.com/questions/10849561/detecting-browser-exit-in-php)

我的服务器中有一些与用户相关的文件，我希望在用户关闭浏览器或离开我的页面时删除它们。是否可以？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:07:53.640

不仅仅是 PHP。

PHP 在服务器端运行，并且在用户有机会关闭浏览器时已经完成了对页面的处理。您可以从技术上检测 PHP 是否仍在处理页面并且用户使用特定配置关闭它。然而，这并不理想。见[`connection_aborted()`](http://www.php.net/manual/en/function.connection-aborted.php)。

您需要做的是使用 JavaScript 建立一个长轮询连接，并在服务器端对其进行监控。然后，您将了解该窗口何时关闭。该连接可以与您的 PHP 脚本建立，允许 PHP 检查`connection_aborted()`. 请注意，您需要为此进行设置[`ignore_user_abort()`](http://www.php.net/manual/en/function.ignore-user-abort.php)，或相应地配置 PHP.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:10:24.143

您可以使用 javascript 每隔几秒对 .php 文件进行一次 ajax 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:10:28.307

PHP 是 **服务器** 端，因此在大多数情况下，仅使用 PHP 是不可能的。一个可能的解决方案是让 cronjob 每晚运行并删除旧文件。

# java - Java 的 switch 在底层是如何工作的？

> ID：12020048
> 
> 赞同：31
> 
> 时间：2012-08-18T16:05:47.500
> 
> 标签：java, switch-statement

Java 的 switch 语句在底层是如何工作的？它如何将正在使用的变量的值与案例部分中给出的值进行比较？它使用`==`or`.equals()`还是完全不同的东西？

我主要对 1.7 之前的版本感兴趣。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-18T16:15:37.273

**两者都不。**它使用[`lookupswitch`](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.1.9.lookupswitch)JVM 指令，本质上是一个表查找。看一下以下示例的字节码：

```
public static void main(String... args) {
  switch (1) {
  case 1:
    break;
  case 2:
    break;
  }
}

public static void main(java.lang.String[]);
  Code:
   Stack=1, Locals=1, Args_size=1
   0:   iconst_1
   1:   lookupswitch{ //2
                1: 28;
                2: 31;
                default: 31 }
   28:  goto    31
   31:  return 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T16:13:32.550

正如您从[这个答案](https://stackoverflow.com/a/4922990/465378)中看到的那样，Java `switch`（至少在 1.7 之前）并不总是编译成`==` *or* `.equals()`。相反，它使用表查找。虽然这是一个非常小的微优化，但在进行大量比较时，查表几乎总是会更快。

请注意，这仅用于`switch`检查密集键的语句。例如，检查枚举值的所有可能性可能会产生这个主要实现（内部称为`tableswitch`）。

如果检查更稀疏的密钥集，JVM 将使用替代系统，称为`lookupswitch`. 相反，它将简单地比较各种键和值，基本上`==`对每种可能性进行优化比较。为了说明这两种方法，请考虑以下两个 switch 语句：

```
switch (value1) {
case 0:
    a();
    break;
case 1:
    b();
    break;
case 2:
    c();
    break;
case 3:
    d();
    break;
}

switch (value2) {
case 0:
    a();
    break;
case 35:
    b();
    break;
case 103:
    c();
    break;
case 1001:
    d();
    break;
} 
```

第一个示例很可能使用表查找，而另一个示例（基本上）使用`==`比较。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-18T16:15:39.203

[从这里](https://stackoverflow.com/questions/1061101/java-if-vs-switch)复制

> 在字节码中有两种形式的 switch：tableswitch 和 lookupswitch。一个假设一组密集的键，另一个是稀疏的。请参阅 JVM 规范中关于编译开关的说明。对于枚举，找到序数，然后代码继续作为 int 情况。我不完全确定 JDK7 中关于 String little 功能的建议开关将如何实现。
> 
> 然而，大量使用的代码通常在任何合理的 JVM 中编译。优化器并不完全愚蠢。不用担心，按照通常的启发式方法进行优化。

你会在[这里找到详细的答案](https://stackoverflow.com/questions/1061101/java-if-vs-switch)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T16:10:18.367

**1.**在出现之前`Java 7`是`"=="`，因为我们可以使用**integer和char来做switch case，而且因为它们是原始**的，所以必须是`"=="`。

**2.** from `Java 7`, **String 也可以在 switch case**中使用，并且 String 是一个`object`,`".equals"`被使用。

我想添加这个......这`"=="`是用来**比较**的`Object Reference` `Variable`，**而不是 Object 本身**。使用`".equals"`我们**比较对象**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T16:14:00.110

> 开关适用于 byte、short、char 和 int 原始数据类型。它还适用于枚举类型（在 Enum Types 中讨论）、String 类和一些包装某些原始类型的特殊类：Character、Byte、Short 和 Integer。(Java 1.6)

虽然将原语与 进行比较`==`，但该`switch`方法肯定会在 Java 1.6（及更早版本）中使用这种比较。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-18T16:09:18.197

如果使用 pre 1.7 Java 我假设它使用

> ==

因为对于 int 你不能做 equals 例如，在枚举的情况下，equals 和 == 将返回相同

**编辑**

我的假设是错误的，它使用了一个查找表，在字节码中它想要：

```
 tableswitch 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-18T16:12:14.013

如果您使用原始类型，例如整数，那么 java 将使用`==`它们来比较它们如果您使用的是字符串，那么 java 将使用该`equals()`方法来测试字符串是否相等。如果您使用带有枚举的 switch 语句，那么`==`和`equals()`都是相同的，所以使用哪个并不重要。

# objective-c - 我是否必须发布以这种方式生成的深度复制的 NSMutableDictionary？

> ID：12020056
> 
> 赞同：1
> 
> 时间：2012-08-18T16:06:16.183
> 
> 标签：objective-c, ios

我正在用这个做 NSMutableDictionary 的深拷贝：[https ://stackoverflow.com/a/5453600/555690](https://stackoverflow.com/a/5453600/555690)

像这样：

```
NSMutableDictionary *myCopy = [originalMutableDictionary mutableDeepCopy]; 
```

我必须释放`myCopy`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:15:06.770

我假设您没有使用ARC。答案**应该是**“是”，因为它是用副本创建的。在此处查看 NARC 规则：

[在 Objective-C 中是否需要在方法的末尾释放参数？](https://stackoverflow.com/questions/2865185/do-you-need-to-release-parameters-of-methods-at-the-end-of-them-in-objective-c)

在那个特定的代码中，它`ret`是使用创建的，`dictionaryWithObjects`所以它已经被自动释放了，但是还有一个额外`retain`的被显式调用。所以答案是……仍然是“是”，这遵循*[所有权政策](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html#//apple_ref/doc/uid/TP40008195-CH27-SW3)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:44:44.177

代码`retain`在创建时将 a 添加到返回值，并且在返回之前不平衡它：

```
NSMutableArray *ret = [[NSMutableArray arrayWithObjects:cArray count:count] retain];

// The newly-created array retained these, so now we need to balance the above copies
for (unsigned int i = 0; i < count; ++i)
    [cArray[i] release];

return ret; 
```

这符合 Cocoa[命名约定](http://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html#//apple_ref/doc/uid/TP40008195-CH27-SW3)和内存管理规则，即`mutableCopy`名称中包含的方法返回一个拥有的值。

你通过这种方法得到的字典确实是你所有的，必须由你释放。

请注意，上面片段中的中间行确保字典中包含的对象仅由字典本身拥有；您不对这些直接负责。当字典被销毁时，它们将被释放。

# firefox - Shadowbox 在 Firefox 中不起作用

> ID：12020058
> 
> 赞同：1
> 
> 时间：2012-08-18T16:06:24.337
> 
> 标签：firefox, drupal, shadowbox

我有一个奇怪的问题。我已将 shadowbox 插件集成到我的 drupal web 中，它适用于 Opera、Chrome 和 IE9，但不适用于 Firefox 14。

我注意到在 Firefox 中`rel="shadowbox"`属性没有添加到图像的链接中，所以这应该是原因。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:06:55.157

Shadowbox 的整个想法（通常）是，如果您将其添加`rel="shadowbox"`到链接，它将显示 Shadowbox。您确定没有在 Firefox 中添加该属性吗？因为如果这是原因，您可能在服务器端做了一些非常奇怪的事情。

您是否尝试使用某些客户端代码添加属性？因为那时可能在 Shadowbox 注册其事件绑定之后执行该代码。您可能会考虑更改该代码以真正将阴影框添加到链接，而不仅仅是设置属性。Shadowbox 提供了一个相当不错的 API 来做到这一点。

# javascript - jquery焦点模糊传递参数

> ID：12020060
> 
> 赞同：5
> 
> 时间：2012-08-18T16:06:38.667
> 
> 标签：javascript, jquery, javascript-events

我似乎无法`defaultValue`在我的`.blur()`函数中访问该变量。我尝试了各种东西，但没有运气。到目前为止，我只得到一个空对象。怎么了？

```
jQuery(document).ready(function(){

    jQuery('#nameInput, #emailInput, #webInput').focus(function(){      
        var defaultValue = jQuery(this).val();
        jQuery(this).val("");
    })
    .blur(function(defaultValue){   
         if(jQuery(this).val() == ""){
             jQuery(this).val(defaultValue);
         }
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-19T18:19:01.677

看起来问题是关于将数据传递到 .blur 或 .focus 事件。每个 jQuery API - [http://api.jquery.com/blur/](http://api.jquery.com/blur/)

```
blur( [eventData ], handler(eventObject) ) 
```

所以如果你想传递数据——你可以向事件发送一个参数——它将在事件对象中显示为数据。

看到这个小提琴了解更多信息

[http://jsfiddle.net/dekajp/CgP2X/1/](http://jsfiddle.net/dekajp/CgP2X/1/)

```
var p = {
    mydata:'my data'
};

/* p could be element or whatever */
$("#tb2").blur(p,function (e){
    alert('data :'+e.data.mydata);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T17:32:41.200

因为您的代码是错误的 :-) 您在函数 ( ) 中定义了 var `var defaultValue`，然后立即将其清除。

有两种解决方案：在绑定模糊事件之前将您的 var 定义为全局 var，或者将其存储在对象 liket his 的数据中（我推荐）：

```
$(document).ready(function(){
    $('#nameInput, #emailInput, #webInput').focus(function(){      
        $(this).val("").data('defaultValue',jQuery(this).val());
    }).blur(function(defaultValue){   
        if($(this).val() == ""){
            $(this).val($(this).data('defaultValue'));
        }
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T16:16:14.830

在我看来，您不了解 JavaScript 的基础知识。

首先 JS 中的变量被本地化到函数的作用域，所以你不能在一个函数中声明变量并`var`在另一个函数中访问它

其次，你不能将任何东西传递给 DOM-event handler，除了 event-object，这是由 DOM 规范定义的，有时你可以使用jQuery 方法`event data`的参数。`blur`

尝试这个：

```
jQuery(document).ready(function(){
    var defaultValue;
    jQuery("#nameInput, #emailInput, #webInput").focus(function(){      
        defaultValue = jQuery(this).val();
        jQuery(this).val("");
    })
    .blur(function(){   
        if(jQuery(this).val() == ""){
            jQuery(this).val(defaultValue);
        }
     }); 

 }); 
```

首先，您需要区分`blur`方法（函数）和`handler`（函数），它们是`blur`. 您试图将`defaultValue`确切地传递给处理程序，但这无法完成。在处理程序内部`defaultValue`是相等的`eventObject`，所以你可以做 smth like `console.log(defaultValue.timeStamp)`，你会看到 smth like`123482359734536`

在您的方法中，您甚至不能对将在调用时设置的原因使用`event.data`参数（附加处理程序）。您需要在两个处理程序之外声明 a ，因此它们对它们都是可见的`blur``blur``var`

你可以考虑阅读一些关于 JS 的综合书籍。

我读了 Nicolas Zakas 的“Professional JaveScript For Webdevelopers”。有一个新版本

# iphone - 如何获取 id 类型属于哪个类型

> ID：12020065
> 
> 赞同：0
> 
> 时间：2012-08-18T16:06:52.883
> 
> 标签：iphone, ios

我怎样才能得到一个id类型属于哪个类型。并取决于类型来做不同的方法

```
-(id)initWithImage:(id)texture
{
   if(texure == NSString)
    {
       do fun1;
    }

     if(texture == NSMutableArray)
     {
       do fun2;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:09:04.810

`[texture isMemberOfClass: [NSString class]]`

（或者 isKindOfClass 如果您也想为子类返回 YES）

# node.js - 从脚本（nodejs）运行时如何让rsync识别ssh publickey

> ID：12020073
> 
> 赞同：5
> 
> 时间：2012-08-18T16:07:57.360
> 
> 标签：node.js, rsync

这里奇怪的问题。

通过 ssh 运行调用 rsync 的脚本会抛出异常

> “权限被拒绝（公钥）。rsync：连接意外关闭（到目前为止收到0字节）[接收者]”

奇怪的是：

1.  ssh user@host 有效，所以 ssh 密钥都设置正确
2.  将脚本生成的命令记录并粘贴到终端中
3.  从脚本运行 whoami 显示正确的用户，并且环境通过 process.env 传递给 spawn 实例
4.  从脚本运行 ssh user@host 不会抛出错误并返回缓冲区，所以这似乎有效
5.  运行脚本（它只是执行已经测试过的命令）会引发上述错误

    ```
    var spawn = require('child_process').spawn;
    spawn('rsync', [
        '-avc',
        '--delete',
        '"'+src+'"' , 
        '--link-dest="'+path.join(dest, folder_name)+'"',
        '"'+path.join(dest, 'latest/')+'"'
        ],{ 
            cwd: process.cwd(),
            env: process.env
    }); 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:13:32.753

尝试指定密钥的路径

```
rsync -avz -e "ssh -i /home/thisuser/cron/thishost-rsync-key" remoteuser@remotehost:/remote/dir /this/dir/ 
```

# vb.net - 添加一个 XElement 并指定一个命名空间

> ID：12020077
> 
> 赞同：0
> 
> 时间：2012-08-18T16:08:47.870
> 
> 标签：vb.net, linq, excel, xelement

我正在尝试使用 linq 读取和修改一些 Excel XML，首先我获取名为**Datagrid**的工作表 从那里我选择第一行（使用索引）现在我想在该行中找到属性为**atrHeader的单元格**

```
 Dim dg = From item In root...<ss:Worksheet> Select item Where item.@ss:Name = "Datagrid"
    Dim r = From item In dg...<Table>...<Row> Select item Where item.@ss:Index = 1 row
    Dim cell = From item In r...<Cell> Select item Where item.@ecProperty = "atrHeader" 
```

在这一点上一切都很好。现在我想做的是创建一个新单元格并将其插入到找到的单元格之前。

```
 Dim newCell As New XElement("cell", 123)
    cell.First.AddBeforeSelf(newCell) 
```

保存文件后，我看到了它应该在的新值

```
 <cell xmlns="">123</cell> 
```

但是我需要它像

```
 <ss:Cell>123</ss:Cell> 
```

如果我在创建新元素时尝试使用“ss:cell”，我会收到一个 RTE 说“:”不能被包含

我的代码顶部已经有以下导入语句：

```
Imports <xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"> 
```

初始 XML

```
 <ss:Worksheet ss:Name="Datagrid">
    <ss:Table ss:ExpandedColumnCount="17" ss:ExpandedRowCount="5" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15">
      <ss:Row ss:Index="1" ss:AutoFitHeight="0">
        <ss:Cell ecProperty="model_name" ss:StyleID="styleReadOnly">
          <ss:Data ss:Type="String">Joe's Project</ss:Data>
        </ss:Cell>
        <ss:Cell ss:Index="6" ss:StyleID="styleColumnDescription">
          <ss:Data ss:Type="String">Type</ss:Data>
        </ss:Cell>
        <ss:Cell ecProperty="atrHeader" ss:Index="7">
          <ss:Data ss:Type="String">blank</ss:Data>
        </ss:Cell>
      </ss:Row>
      <ss:Row ss:AutoFitHeight="0" ss:Index="2">
        <ss:Cell ecProperty="email_address" ss:StyleID="styleBiDirectional">
          <ss:Data ss:Type="String">joe@ec.com</ss:Data>
        </ss:Cell>
        <ss:Cell ss:Index="6" ss:StyleID="styleColumnDescription">
          <ss:Data ss:Type="String">Full Path</ss:Data>
        </ss:Cell>
        <ss:Cell ecProperty="atrHeader" ss:Index="7">
          <ss:Data ss:Type="String">blank</ss:Data>
        </ss:Cell>
      </ss:Row>
    </ss:Table>
  </ss:Worksheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:28:19.203

导入命名空间仅允许您在处理 XML 文字和查询 (AFAIK) 时获得设计时支持。这使您可以像以前一样编写查询并创建文字元素。您也可以将 your 创建`newCell`为文字。

```
Dim newCell = <ss:cell>123</ss:cell> 
```

否则，您需要一个`XNamespace`来创建您的元素。

```
Dim ss As XNamespace = "urn:schemas-microsoft-com:office:spreadsheet"
Dim newCell As New XElement(ss + "cell", 123) 
```

# php - 将移动插件与不太知名的 CMS 一起使用

> ID：12020079
> 
> 赞同：0
> 
> 时间：2012-08-18T16:09:01.870
> 
> 标签：php, mobile, plugins, content-management-system

我正在尝试确定我是否面临错误或只是由于较小、不太知名的 CMS 而导致功能不足。

我有一个网站 (http://tinyurl.com/c8djrvr)

在 CMS 设置上激活移动插件时，在移动设备上查看网站结构时，肯定会针对移动设备进行优化，但样式会丢失。

由于我的技能仅限于基本的 HTML 和 CSS，我对 php 和 CMS 结构的了解较少。有没有办法知道网站在移动设备上查看时是否尝试使用样式表？

平台中有许多 CSS 表格。他们都没有说“mobile.css”或类似的东西。

有没有办法知道我是否面临错误或缺乏功能？是哪个？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:48:30.743

问题解决了。当我使用它的默认名称上传插件文件夹时，该插件工作，这是一个晦涩的文本字符串。

查看基于此平台的其他站点，我注意到他们必须将插件名称更改为“mobile”，以便 css 中的链接引用链接到移动样式表。

我将插件文件夹的名称更改为“mobile”，现在它可以工作了——以防其他人有这个问题。

# algorithm - 值循环的最小排序

> ID：12020083
> 
> 赞同：2
> 
> 时间：2012-08-18T16:09:08.743
> 
> 标签：algorithm, sorting, graph

给定一个序列，如：

```
1,2,1,2,1,1,1,2,1,2,1,3,1,2,1,2,1,3 
```

获得最小排序的**有效**方法是什么：

```
1,1,1,2,1,2,1,3,1,2,1,2,1,3,1,2,1,2 
```

蛮力方法很明显，所以请不要推荐它 - 除非提供令人信服的证据证明蛮力方法是唯一的方法！

**更多详情**

我有一个生成数字列表的算法。该算法的输出是一个列表/数组，但从逻辑上讲，数字代表一个循环，其中只有元素的相对顺序很重要。为了存储这些循环以供以后比较，我想以这样一种方式存储它们，即存储的一维数字列表代表循环中元素的最小顺序。图片将是最有帮助的：

![环形](../Images/a9dfecae751f972d66cdec28423b7937.png)

这个循环描述了 T tetromino 周围的路径，其中 1 是向前移动，2 是右转，3 是左转。不管你从哪里开始，甚至你往哪个方向走，按照这 18 步的顺序，你都会得到一个 T tetromino。产生此循环的算法的输出将返回具有任意起点和方向的元素。所以返回的数组可能是：

**任意初始排序：**

```
1,2,1,2,1,1,1,2,1,2,1,3,1,2,1,2,1,3 
```

![任意顺序](../Images/ed7935765857d499c31611cc0b938216.png)

但是，有一个最低订购量。它可以从两个不同的电路中获得，反映了 T tetromino 是对称的事实：

**最低订购量：**

```
1,1,1,2,1,2,1,3,1,2,1,2,1,3,1,2,1,2 
```

![最低订购量](../Images/f68196ff1b7079847c7f532a0189ecbf.png)

**蛮力**

显而易见的蛮力方法是构造所有可能的排序并取最小值。我的问题是是否有更聪明、更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:34:18.637

这是一个经过充分研究的问题，称为[字典最小字符串旋转](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)。

与朴素算法的 O(n*n) 相比，更好的算法都在 O(n) 时间内运行。

# asp.net - 将 WSDL 转换为 WCF Web 服务。WCF WSDL 与原始 WSDL 不匹配

> ID：12020088
> 
> 赞同：1
> 
> 时间：2012-08-18T16:09:19.600
> 
> 标签：asp.net, wcf, web-services, wsdl

我已将 WSDL 转换为 WCF Web 服务。但是，当我运行 WCF 服务并检查 WSDL 时，它与最初用于创建服务的 WSDL 不匹配。为什么？

可在[此处](http://www.caqh.org/SOAP/WSDL/)找到用于创建 WCF Web 服务的原始 WSDL (CORERule2.2.0.wsdl) 和 XSD (CORERule2.2.0.xsd) 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:26:15.103

您从 Web 服务获得的 WSDL 由 WCF 自动生成。您可以在以下帖子中找到关于它的简明解释：[WCF 元数据](http://www.danrigsby.com/blog/index.php/2008/05/27/wcf-metadata/)。

如果您没有更改 Web 服务中的任何内容，则生成的 WSDL 应该包含与原始 WSDL 中的合同相同的合同。

如果您确实需要将相同的 WSDL 提供回您的客户，那么您可以通过使用 ServiceMetadataBehavior 上的 ExternalMetadataLocation 属性来提供一个外部 WSDL。

# jquery - 等待为 angularjs 中的选择生成新选项

> ID：12020089
> 
> 赞同：1
> 
> 时间：2012-08-18T16:09:30.177
> 
> 标签：jquery, angularjs

我有一个使用 AngularJS 设置为某个表达式的`select`元素。`ng-options`如果选项发生变化，那么我需要确保用于显示`select`元素的 jQuery 插件*也*刷新。因此，如果选项发生了变化，那么我需要进行刷新调用。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:21:05.113

我不确定这是否是您要问的，但是：如果您想观察模型的变化，请使用`scope.$watch:`

```
 scope.$watch('name', function(newVal) {
     // do something with the new value of scope.name
   }); 
```

但是，如果您专门使用选择，那么一定要检查 angular-ui，正如 Dan Doyon 所建议的那样。它有一个插件可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:15:00.347

我会引导你使用[angular-ui](http://angular-ui.github.com/)，我们有一个通用指令 ui-jq 可以做你想做的事。基本问题是 angular 不知道您的 jquery 插件会更新 angular 的模型。通常，您需要监听外部事件并使用[$scope.apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope)让 Angular 知道。

# iphone - NSString（带有方法调用：stringWithContentsOfFile）

> ID：12020092
> 
> 赞同：2
> 
> 时间：2012-08-18T16:10:15.340
> 
> 标签：iphone, cocoa

```
NSBundle *bundle = [NSBundle bundleForClass : [self class]];
NSString *f_path = nil;

if ((f_path = [bundle pathForResource : @"about_screen" ofType:@"html" inDirectory:@"html"]) != nil)
{                      
    NSLog(@" f_path found" );  
    NSString *ns_string = [NSString stringWithContentsOfFile : f_path
                                    encoding                 : NSUTF8StringEncoding
                                    error                    : NULL
                           ];
    NSLog(@" string = %@", ns_string);  
}
else
{
    NSLog(@" f_path not found" );

}

// *** if the following assignment is commented off, there will be an error. ***
ns_string =
@"<!DOCTYPE html PUBLIC \"-//IETF//DTD HTML 2.0//EN\"><HTML><HEAD><TITLE>minimal test </TITLE></HEAD><BODY bgcolor = \"silver\"><H1>Hi</H1><P>This is very minimal \"hello world\" test document.</P> </BODY></HTML>"; 

[web_view loadHTMLString : ns_string  baseURL : nil]; 
```

考虑上面的代码段。

出于测试目的，我将文件“about_screen.html”的内容设置为与上面代码中分配给 ns_string 的字符串相同。因此，如果“NSString stringWithContentsOfFile”按预期工作，则可以将 ns_string“in-line”赋值注释掉而不会产生任何影响。

我的问题是：内联分配按预期工作，但没有它，将会出现运行时错误。

错误是：

> -[About_Screen dataUsingEncoding:]：无法识别的选择器发送到实例 0x6eddf70'

另请注意声明：

> NSLog(@" 字符串 = %@", ns_string);

总是输出正确的字符串，所以嵌入的 html 文件被找到并被正确读取。

希望熟悉这方面的人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:04:39.713

这个答案实际上来自@bbamhart 的评论。我认为问题是由于 NSUTF8StringEncoding 参数引起的，因为它经常通过谷歌搜索相关主题出现。

问题的真正原因是关于变量范围。ns_string 不应在任何条件块中声明。（因为该变量通常无法在块外访问。）

最重要的解决方案是将声明移出块。

# objective-c - 如何覆盖 Points to Pixels iOS 特性并以正确的尺寸绘制图像？

> ID：12020099
> 
> 赞同：0
> 
> 时间：2012-08-18T16:10:37.080
> 
> 标签：objective-c, ios, uiimageview, resolution

我有一个 64 像素 x 64 像素的 redSquare.png 文件，分辨率为 326ppi。我将它绘制在我的视图控制器窗口的左上角，如下所示：

```
myImage = [UIImage imageNamed:@"redSquare.png"];

myImageView = [[UIImageView alloc] initWithImage:myImage];

[self.view addSubview:myImageView]; 
```

鉴于 iPhone 4S 的屏幕分辨率为 960x640 (326ppi)，应该有足够的空间容纳 9 个以上的正方形，以便在第一个正方形旁边放置。然而，只有 4 个以上的空间。即正方形画得比我的测量值要大。

```
// even tried resizing UIImageView in case it was 
// resizing my image to a different size, by adding
// this next line, but no success there either :
myImageView.frame = CGRectMake(0, 0, 64, 64); 
```

我相信这与设备“翻译”*我的*像素的方式有关。我在 Apple 的[文档](https://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW1)中读到了**点与像素**之间的区别，但它没有提到如何解决这个问题。我知道我以像素为单位进行测量。我应该用点来衡量吗？我怎么能这样做？我究竟如何调整我的图像大小，以便它可以在它旁边再容纳 9 个相同大小的正方形（即在同一水平线上..）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:14:25.203

要在 Retina 显示器上以全分辨率显示图像，它需要`@2x`附加到其名称的末尾。在实践中，这意味着您应该将当前使用`redSquare@2x.png`的图像和 32x32 像素的图像版本保存为`redSquare.png`.

完成此操作后，无需更改代码。将根据设备的功能显示适当的图像。这将允许您的应用在 Retina 和非 Retina 设备上正确呈现。

# android - 不清楚 sp 是如何工作的（缩放像素）

> ID：12020100
> 
> 赞同：4
> 
> 时间：2012-08-18T16:10:36.987
> 
> 标签：android, android-layout, android-ui

> **可能重复：**
> [Android 中 px、dp、dip 和 sp 的区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

所以我知道我应该`sp`只使用文本字体大小。现在，我不明白他们到底在做什么。假设我`TextView`在正常屏幕尺寸的布局中具有以下属性：

```
android:textSize="17dp" 
```

如果我用这个替换它：

```
android:textSize="17sp" 
```

发生什么了？在可视化编辑器中，它看起来没有什么不同？

我猜如果我有一个符合正常尺寸布局的 3.2" 屏幕和一个也符合我的正常尺寸布局的 4.0" 屏幕，那么如果我使用`sp`，文本的大小会稍微放大吗？是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:20:15.937

使用 sp 呈现的文本与可访问性选项更兼容，例如，如果用户启用高对比度模式或普遍增加文本的大小。由于 sp 也与密度无关，这是 sp 和 dp 之间的唯一区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:18:36.630

我不想开始一个关于它的新线程，所以请查看已经回答的线程。您的问题主要在评论中得到解答。[Android中px、dp、dip和sp的区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

# php - CakePhp 上的 RUpdate/刷新会话变量

> ID：12020102
> 
> 赞同：1
> 
> 时间：2012-08-18T16:11:16.967
> 
> 标签：php, session, cakephp, cakephp-1.2

我遇到了 Cake Sessions 的问题。

在我的一种观点中，我正在使用`$session->read('User.image')`

当用户登录时，会创建会话并且一切正常。但是当用户更新图像时，Session 变量不会更新。

我正在尝试在保存新图像的控制器中执行以下操作：

```
$this->User->save($data);
$this->Session->delete('User.image');
$this->Session->write('User.image', $data['User']['image']); 
```

如果我在控制器中正确打印`$this->Session->read('User.image')`，更新的值会正确显示。但标题中的图像与之前相同，直到用户再次登录。

我已经更改了配置，因此 cake 可以将会话文件保存在 cake tmp 文件夹中，这样我就可以毫无问题地编写......但这似乎还不够。

如何在整个应用程序中刷新 Session 变量？我在蛋糕 1.2 分支

谢谢！！

# arrays - 样式表数组？

> ID：12020103
> 
> 赞同：2
> 
> 时间：2012-08-18T16:11:27.713
> 
> 标签：arrays, symfony, twig, assetic

来自[Symfony](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)

有一个例子：

```
{% stylesheets '@AcmeFooBundle/Resources/public/css/example.css' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %} 
```

我怎么能实现一个变量？还是数组？

**我知道，没有官方的方法。**

我可以使用一个`Twig Extension`吗？还是其他的？？

谁有我的例子？？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:14:47.453

刚刚注意到资产 1.1 支持[variables](http://jmsyst.com/blog/asset-variables-in-assetic)。尽管有一些限制——所有可能的值都需要在编译时知道——所以你需要将样式的值存储在你的配置文件中。

事实上，它只是一种语法糖，它不是纯变量，但在许多情况下它可能会有所帮助。

# c# - 为什么在声明 ActionResult 时使用 `virtual`

> ID：12020105
> 
> 赞同：3
> 
> 时间：2012-08-18T16:11:39.603
> 
> 标签：c#, asp.net-mvc-3

我正在查看一个`MVC3 nuget`包中的一些代码，我注意到控制器中使用了一些方法`virtual`，比如`public virtual ActionResult WhatEver()`我一直看到的其他方法，`public ActionResult WhatEver2()`。

为什么有人会这样做？有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:16:12.567

唯一可能的好处是您可以在继承类中覆盖该方法。

如果不了解有关库的详细信息以及此方法在其中的位置，很难说它的具体好处是什么。假设它是一个 CMS 库，并且 ActionResult 返回一个对话框。将该方法标记为虚拟可能允许您（库的使用者）将控制器子类化并以某种方式修改对话框的行为。

# c - 使用 openssl 在标准输出 RSA 加密文本上打印

> ID：12020106
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:11:56.170
> 
> 标签：c, unix, openssl, rsa

我正在使用这部分代码

```
char encrypted_text[1024];
RSA_public_encrypt(sizeof(message), message, encrypted_text, rsa, RSA_PKCS1_OAEP_PADDING);
printf("encrypted text: %s\n", encrypted_text); 
```

optput 是这样的：

> �v0��뷾��s�E�Z��N\����6~��:�&���� /����~ͯ���L��d�Ǡ�� E��[�h�U.vH2F1Qb^)�g�,a�Ҩ�x vU|�>�ˢ=W�ő�� �\��g

可以消除�符号？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T16:19:10.033

该字符串打印不好，因为它是二进制数据，而不是文本。它并不意味着人类可读。

使二进制数据文本友好的一种常见方法是对其进行**[base64 编码](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)**。Base64 编码将二进制数据转换为一串 ASCII 字符。编码的文本仍然不是人类可读的，所以当你打印它时它仍然看起来像 gobbledygook，但它至少在视觉上很容易，很容易粘贴到文本文件中，很容易通过电子邮件发送。

有关在 C 中进行 base64 编码/解码的方法，请参阅[此 Stack Overflow 问题。](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)

# reporting - 我可以（ab）使用 SQL-Server Analysis Services 创建用户生成的报告吗？

> ID：12020117
> 
> 赞同：0
> 
> 时间：2012-08-18T16:13:31.627
> 
> 标签：reporting, ssas, reportbuilder, ssas-2008

问题：

我们（也就是我，一个人）应该实现“**用户生成**的报告”（最多1个月，月底/新月初展示）。

问题 1：
所谓用户，是指**没有**任何技术技能的用户，例如 SQL 或 VBA。

问题 2：
技术只是 .NET，所以我不能使用 Java（以及基于 Java 的东西，比如 Jasper）

问题 3：
应该可以导出到 Excel（我的意思是 XLS 或 XLSX，而不是 XML 或 CSV）

问题 4：
数据分组应该是可能的（多组）

问题 5：
数据库是 Microsoft SQL-Server（推测是 2008 R2，但最终可能是 2008 R1 或 2005）

额外的“问题”：
基于 Web，使用 ASP.NET WebForms，但如果无法使用 Web，也可以基于桌面

* * *

现在除了那些要求和时间限制的荒谬之外......

一种解决方案是由 SSRS（SQL-Server 报告服务）提供的报告生成器。但是，有一些缺点，我认为这些缺点非常严重：

1.  创建报表的用户基本上仍然需要了解 SQL（左、右、内、外连接及其后果）。由于用户可能不理解其中的区别，如果他们没有得到或得到错误的结果（例如空列上的内部联接），他们只会责怪我。

2.  创建报告的用户对数据库/数据结构一无所知（例如软删除、持续日期）。此外，垃圾进垃圾出可能会成为一个问题，包括错误的数据等......

3.  如果他们要创建一个矩阵，并且要对未舍入的值进行小计**求和**，则总计的总和不会与小计的总和相匹配，因为报告将在逗号后仅显示 2 位数字（因此将值四舍五入到 2 位）用于小计，但它将根据所有值的总和（未四舍五入）而不是小计的总和（四舍五入）计算总数。同样，他们会为此责备我或数据或报告生成器。

4.  由于报表生成器不会在添加一个带有连接的附加表后显示结果数，因此用户将无法判断他们是否拥有正确的记录数，这将不可避免地导致错误的结果。再一次，他们会责怪我。

5.  日期过滤器：需要应用它们，但不一定在 where 中，而是在 join 中。报表生成器不支持。不可能创建这样一份严肃的报告。

6.  状态：如前所述，我们使用软删除和状态字段为 99 的已删除记录。where 中的过滤状态是危险的，有时必须发生在 join 中。同样，报表生成器不支持这一点，除非您使用原始 SQL，因为用户不会了解 SQL，所以这毫无意义。

7.  安装报表生成器需要管理员权限，或者客户公司的 IT 部门来安装它。以及适用于相应 ReportBuilder 的相应 .NET 框架，以及适用于相应 Report-Server 的相应 ReportBuilder，因为 SQL-Server 2005 Reporting Service 不适用于 SQL-Server 2008 Reporting Services 的报告，而 SQL 2008 R1 不适用于R2。这也要求所有能够做到这一点的用户都处于某个 SQL-Server 报告服务报告生成器用户角色中，这要求 IT 部门将用户放入适当的活动目录组中，到目前为止，该组从未与任何我们的客户。另外，我不相信 IT 部门知道他们安装了适当的 ReportBuilder，如果他们同意安装的话。

* * *

现在我曾经（很久以前）碰巧在 youtube 上查看了 SSAS（SQL-Server 分析服务）的演示文稿。
但是我再也找不到链接了。
但无论如何，我没有任何 SSAS 经验，只有 SSRS。

我认为有可能以这样的方式滥用 SSAS，用户可以通过 Excel 连接到它，并获取数据并或多或少地像他们想要的那样对它们进行汇总。此外，他们将能够看到原始数据。

我可以预先准备一些查询表中的原始数据（我也可以通过数据集使用 reportbuilder）。

有没有人足够了解 SSAS 来告诉我在这段时间内这是否可行？
如果分析服务器和 Excel 版本 (2007/2010) 所需的加载项与所有分析服务器版本兼容，或者从 Excel 2007 访问 2008 R2 或从 Excel 2010 访问 SSAS-2005 时出现问题。

或者我是否一定会遇到 SSAS 比 ReportBuilder 更多的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:45:35.203

如果您的问题是 SSAS 是否是解决您问题的合理方法，我的回答是肯定的。SSAS 的好处在于，一般而言，数据以业务用户易于理解的方式建模，并且可以在 Excel 中轻松操作以生成各种报表，而无需了解查询语言。对于任何版本的 SSAS，您都可以使用 Excel 版本 2007 或 2010。这不需要加载项 - 提供程序已内置于两个 Excel 版本中。此外，通过将模型放入 SSAS，您实际上可以通过各种工具更容易地访问您的数据 - 如果您愿意，可以使用 Excel 或 SSRS 或各种第 3 方工具。换句话说，与报表生成器相比，您不会限制使用此方法的选项，而是扩展您的选项。

也就是说，使用 SSAS 可能很简单，也可能很困难。这取决于您正在使用的数据类型以及必须添加到模型中的任何计算的复杂性。你是否能在你有空的时间内实现你的目标，这不是我能回答的问题。这实际上取决于您拥有的数据类型和用户需要的报告类型。

我可以为您指出一些资源。我为 TechNet 写了一篇文章作为温和的介绍：[http](http://technet.microsoft.com/en-us/magazine/ee677579.aspx) ://technet.microsoft.com/en-us/magazine/ee677579.aspx 。它是为 SSAS 2008 编写的，但原则适用于 SSAS 2005、SSAS 2008、SSAS 2008 R2 和 SSAS 2012。

如果您喜欢视频介绍，请参阅[http://channel9.msdn.com/Blogs/rdoherty/Demo-Developing-a-SQL-Server-2008-R2-Analysis-Services-Database](http://channel9.msdn.com/Blogs/rdoherty/Demo-Developing-a-SQL-Server-2008-R2-Analysis-Services-Database)开始。您可以在 channel9 上找到很多关于 SSAS 的免费视频资料。只需搜索 SSAS。

# sqlite - Tableview 和 Sqlite 数据库

> ID：12020121
> 
> 赞同：0
> 
> 时间：2012-08-18T16:13:34.527
> 
> 标签：sqlite, ios5

我正在开发一个银行存折类型的 iOS 应用程序。我在数据库中插入记录时遇到问题，它应该按照日期按时间顺序排列，如下所示。

假设我从 ATM 取款 20 美元，日期是 2011 年 12 月 20 日，现在总余额是 200 美元。

```
 *date*               *amount*        *type*      *balance*     *counter*
  12/20/11              $20             ATM          $200         1
  12/21/11              $30             Deposit      $230         2
  12/23/11              $30             ATM          $200         3
  10/01/11              $100            ATM          $100         4 
```

现在它应该显示在表视图中以及在 sqlite 数据库中更新。像这样：

```
 *date*               *amount*        *type*      *balance*     *counter*
  10/01/11              $100            ATM          $120          1
  12/20/11              $20             ATM          $100          2
  12/21/11              $30             Deposit      $130          3
  12/23/11              $30             ATM          $100          4 
```

正如我在 2011 年 12 月 20 日之前提到的，余额是 220 美元。将有任意数量的交易。请让我知道如何解决。我被这个问题困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:01:57.067

您应该在 sql 查询中使用“Order by”

更多信息 [http://www.w3schools.com/sql/sql_orderby.asp](http://www.w3schools.com/sql/sql_orderby.asp)

# javascript - 带有匹配的 Javascript 正则表达式

> ID：12020123
> 
> 赞同：1
> 
> 时间：2012-08-18T16:13:43.527
> 
> 标签：javascript, regex

我正在尝试从带有正则表达式的字符串中提取一个数字，因为我被告知这将是我想要做的最好的方法。

这是字符串：

```
http://domain.com/uploads/2011/09/1142_GF-757-S-white.jpg&h=208&w=347&zc=1&q=90&a=c&s=&f=&cc=&ct= 
```

我正在尝试从字符串中的（高度）中提取 208 。所以我知道我必须在表达式中寻找“&h =”，但我不知道在那之后该怎么做。我怎样才能在那个和下一个“&”之间进行匹配，但也不包括它们......

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:16:05.517

正则表达式匹配`h`包含整数值的 url 参数。

```
[&?]h=(\d+) 
```

Javascript：

```
var match = /[&?]h=(\d+)/.exec(url_string);
alert(match[1]); 
```

了解更多关于[正则表达式](http://www.regular-expressions.info/tutorial.html)的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:32:56.890

要获取整个`h=xxxx`参数，您可以使用这个通用函数（您可以在其他地方重用它以用于其他目的）并将所需的密钥传递给它：

```
function getParameterFromURL(url, key) {
    var re = new RegExp("[&?]" + key + "=([^&]*)");
    var matches = url.match(re);
    if (matches) {
        return(matches[1]);
    }
    return(null);
}

var url = "http://domain.com/uploads/2011/09/1142_GF-757-S-white.jpg&h=208&w=347&zc=1&q=90&a=c&s=&f=&cc=&ct=";
var parm = getParameterFromURL(url, "h"); 
```

有关工作演示，请参阅[http://jsfiddle.net/jfriend00/86MEy/ 。](http://jsfiddle.net/jfriend00/86MEy/)

# javascript - $.getJSON 使其结果全局化

> ID：12020125
> 
> 赞同：0
> 
> 时间：2012-08-18T16:13:49.860
> 
> 标签：javascript, jquery

我正在使用 jQuery 函数`$.getJSON`从服务器端获取一些数据，代码如下：

```
function (){
  $.getJSON("someURI",function(result){
    //this alert works fine
    alert(result.msg) 
  });

  // this prints the data as undefined
  alert(result.msg); 
} 
```

如何更改返回的“结果”的范围`$.getJSON`以使其全局化..以使第二个警报打印其值不是未定义的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:16:29.333

你不能。AJAX 是异步的，这意味着您只能在回调内部访问`result`变量。`success`您可以将其设为全局，但请记住，紧跟在`$.getJSON`调用之后的行将在回调执行**之前**`success`被调用，使其变得无用。

所以没有全局变量，在回调中使用 AJAX 调用的结果：

```
function () {
    $.getJSON('someURI', function(result){
        // only here you can hope to consume the results of an AJAX call
        alert(result.msg) 
    });
} 
```

这就是 AJAX 的工作原理。AJAX 中的 A 代表异步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:19:20.943

这是一个异步调用..所以您必须等到服务器响应...在您的情况下，外部警报将未定义，因为服务器尚未响应...此外，范围`result`仅限于`callback function`，无法访问...

你可以这样做：

```
var myJSON;
var serverResponded = 0;

function () {
    $.getJSON("someURI", function (result) {
        //this alert works fine
        myJSON = result.msg;
        serverResponded = 1;
    });
    setTimeout(function () {
        if (serverResponded) {
            alert(myJSON);
        }
    }, 500);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T16:21:01.857

该`$.getJSON`调用是 Ajax 调用的快捷方式，“Ajax”代表“<strong>Asynchronous JavaScript and XML”。

假设您添加`var globalResult`并且您`globalResult = result;`在成功函数中执行了一个。因此，当您`globalResult`在回调之外进行调用时，`globalResult`还不会被分配。所以，如果你*真的*必须在外面处理它，你可以检查它是否分配了一个名为 的函数`setInterval`，但这太过分了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T16:19:20.563

将其保存到另一个类似这样的变量中

```
function (){
var something;
  $.getJSON("someURI",function(result){
    //this alert works fine
    alert(result.msg) 
    something = result
  }); 
```

如果您希望它的范围在您的函数包装器之外，请执行以下操作

```
var something;
function (){
  $.getJSON("someURI",function(result){
    //this alert works fine
    alert(result.msg) 
    something = result
  }); 
```

# c++ - SDL-1.2.15 中的 SDL lib 文件夹在哪里？

> ID：12020128
> 
> 赞同：1
> 
> 时间：2012-08-18T16:14:24.680
> 
> 标签：c++, sdl

我正在尝试运行 SDL hello world 示例。到处都是，我必须将 SDL 的 lib 文件夹复制到其他地方。但是 SDL-1.2.15 中没有 lib 文件夹。

已经搜索过这个但没有找到任何东西。还尝试使用 lib 文件夹跳过该步骤，但没有构建，因为它找不到库。我究竟做错了什么？

使用 Windows 7 64 位。

我做了什么：

将 include 的内容复制到我的 mingw 包含目录中。这样我就可以在源文件中包含 SDL 而不会出现编译器错误。

链接的 SDL 库“SDL”。

将 .dll 添加到`C:\Windows\System32`和`C:\Windows\SysWOW64`

代码编译但失败：

`c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find -lSDL`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:22:45.850

啊。找到了。我不得不下载开发包：SDL-devel-1.2.15-mingw32.tar.gz

# java - 如何通过简单地将字符串写入套接字来设置/格式化 HTTP 标头

> ID：12020131
> 
> 赞同：0
> 
> 时间：2012-08-18T16:14:40.253
> 
> 标签：java, http

仅使用核心 Java API，我试图发送带有正确格式的 HTTP 标头的响应。使用我当前的代码，我可以看到客户端收到了我的响应，但我认为我没有包含所有信息，因为当我向 Web 浏览器客户端返回 404 错误时，Web 浏览器只会显示一个空白页面。如果我尝试使用 curl，我也看不到让我知道错误的 curl。这是我目前对响应所做的事情：

outputStream.write("HTTP/1.1 404 Not Found".getBytes());

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T16:23:30.970

HTTP 响应由三部分组成

1.  初始状态行，即您发送的内容
2.  响应标头（带有`Content-Type`, `Content-Length`, `Last-Modified`,`Cookie`等响应标头）
3.  响应正文 - （具有用户友好内容的实际 HTML，它告诉用户发生了什么。

您只发送第一个。

您应该发送的一个示例是

```
HTTP/1.1 404 Not Found
Date: Fri, 18 Aug 2012 13:24:45 GMT
Content-Type: text/HTML
Content-Length: 90

<html><head><title>Page not found</title></head><body>The page was not found.</body></html> 
```

另外，不要忘记最后关闭套接字。

[本页](http://www.jmarshall.com/easy/http/)以简单易懂的方式描述了 HTTP 响应。

**编辑**

需要注意的是，响应中的每一行都必须用`CR`和`LF`字符分隔。因此，您还应该在调用`getBytes()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:28:50.857

当您给出 404 错误时，您应该包含内容供浏览器显示。包括一个 Content-Length 和 Content-Type 属性，然后是一些供浏览器显示的 html 内容。还要记住在写入流后刷新流。正确的响应可能如下所示：

```
String response = "HTTP/1.1 404 Not Found\r\n" +
    "Content-Length: 22\r\n" +
    "Content-Type: text/html\r\n\r\n" +
    "<h1>404 Not Found</h1>";
outputStream.write(response.getBytes());
outputStream.flush(); 
```

每个标题后应该有一个回车和一个换行符（\r\n），并且在标题完成后有两个\r\n，这样您就可以指示内容即将出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:28:13.743

添加换行符并关闭连接有助于我的浏览器并`curl`理解响应：

```
outputStream.write("HTTP/1.1 404 Not Found\n".getBytes());
outputStream.close(); 
```

...以及最小的“工作”响应：

```
outputStream.write("HTTP/1.1 200 OK\n\nHello, world!".getBytes())
outputStream.close() 
```

# php - 将许多网址替换为链接

> ID：12020134
> 
> 赞同：0
> 
> 时间：2012-08-18T16:15:12.410
> 
> 标签：php, url, hyperlink, str-replace, preg-match-all

这是我的代码：

```
$post = $_POST['test'];
$pattren='/((([http]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\/+=&#?;%@,.\w_]*)#?(?:[\w]*)?))/';
preg_match_all( $pattren, $post, $matches);

foreach($matches[0] as $match) {
    $images[]= "<a href=\"$match\" target=\"_blank\" >$match</a> ";
}

for ($i = 0, $c = count($images); $i < $c; $i++) {
    $html_links = str_replace($pattren,$images[$i], $post);
}

echo $html_links; 
```

我正在尝试从中获取所有 url`$post`并将它们转换为链接，但是出了点问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:29:18.740

这段代码有很多问题，包括：

不知道你的正则表达式 ( `$pattren`) 是从哪里得到的，但对我来说它看起来完全是胡言乱语 -`[http]{3,9}:`意思是“任何字符 'h'、't' 或 'p'，重复 3 到 9 次，然后用冒号” - 所以它会匹配“thppppppt：”，这在我看来不太像 URL 的开头。

`str_replace`与正则表达式无关，因此`str_replace($pattren, ...`在输入中查找该正则表达式的文本。

实际上，我不确定您希望在该循环中发生什么替换，因为您已经复制`$match`到字符串的正确部分。

`$html_links`每次围绕第二个循环时，您都会覆盖变量。也不需要 2 个循环，除非没有显示代码 - 您可以简单地在`foreach`循环中构建字符串并完全取消`$images`数组。

而且，顺便说一句，你拼错了“模式”，并且为你的花括号使用了不一致的约定——有些人更喜欢单独的`{`一行，有些人喜欢`for`/ `foreach`，但你已经管理了每一个。[不过，这些都不会影响代码]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:20:32.840

使用[preg_replace()](http://php.net/preg_replace)

```
$post = $_POST['test'];
$pattren='%\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))%s';
$html_links = preg_replace($pattren, '<a href="$1" target="_blank">$1</a>', $post);
echo $html_links; 
```

[从这里](https://stackoverflow.com/a/11641499/204701)更新了一个好的模式。

# objective-c - NSString isEqualTo 数据包不起作用？

> ID：12020138
> 
> 赞同：1
> 
> 时间：2012-08-18T16:15:27.213
> 
> 标签：objective-c, tcp

我有一个 python 聊天服务器，iPhone 是服务器的客户端。我向 Python 服务器发送了一条消息，iPhone 收到了它，然后 NSLogs 就可以了。但如果我使用：

```
if ([output isEqualToString:@"hello"]) {
    NSLog(@"Hello!");
} 
```

但它什么也没做（我已经在聊天中打招呼了）。输出`NSString`格式如下：

```
NSStirng * output = [[NSString alloc] initWithBytes:buffer length:NSUTF8StringEncoding]; 
```

我可以很好地 NSLog 它，但我不能使用 if 语句。有谁知道解决方案？谢谢！

**我是数据包编程的新手，所以请原谅我的无知。顺便说一句，我正在使用 TCP 数据包**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:41:20.770

我敢打赌，`length`“你好”不是`NSUTF8StringEncoding`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:38:28.700

试试看

```
 NSString * output =@"hardeep"; 

if ([output caseInsensitiveCompare:@"Hardeep"] == NSOrderedSame) {
    NSLog(@"YES");
}else
    NSLog(@"NO"); 
```

# c++ - 出于对 SO 中旧帖子的好奇，如何使用智能指针进行类型擦除

> ID：12020143
> 
> 赞同：1
> 
> 时间：2012-08-18T16:15:46.260
> 
> 标签：c++, c++11

我遇到了[Xeo的一种较旧的思考](https://stackoverflow.com/users/500104/xeo)[类型擦除技术](https://stackoverflow.com/questions/5450159/type-erasure-techniques)，我开始想知道，应该如何修改该代码以使其与and一起使用。`std::unique_ptr'ers``std::shared_ptr'ers`

帖子中的代码可以在[这里](http://ideone.com/hwe0H)找到。如果输入包含的内容`unique_ptrs`并且其中的数据`shared_ptr'ers`变成垃圾，则代码将无法编译。我尝试的是从模板化基类继承的类，所以它也可能有点复杂。现在，这主要是出于好奇，因为我开始怀疑这是否会很困难（在一般情况下），因为这在存储复杂对象时会变得很方便，例如，`std::vector`当[Boost.Any](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)不可用时。

编辑：我注意到在测试时我的代码中有一个错误，代码可以正常工作`shared_ptr'ers`（内容不是垃圾），虽然不是`unique_ptr'ers`. 然后，为什么不将这种类型的新实例`Any_Virtual`（如 Xeo 提供的代码）存储到`std::unique_ptr'ers`.

我想那么问题将是：

1.  如何修改它`Any_Virtual`以便它可以使用`std::unique_ptr`？
2.  哪个设计更好，一个`std::vector<Any_Virtual>`对象，`Any_Virtual`一个智能指针在哪里，还是一个`std::vector<std::unique_ptr<Any_Virtual>>`对象？或者它甚至重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:03:53.273

当您使用类型擦除时，类型必须满足一组要求才能与类型擦除容器兼容：这组称为模型。特别是，`holder<T>::clone`复制的成员`*this`反过来要求`held_`（类型`T`，被擦除的类型）是可复制构造的。因此，您的类型擦除类的模型是可复制构造的。

但是，包含 an 的类型`std::unique_ptr`将不能开箱即用地复制构造。

如果不知道您想要实现什么，就没有明显的解决方法。也许您真的希望模型不那么严格，例如它可能只需要可移动构造（包含 an 的类型`std::unique_ptr`可以很容易地实现，开箱即用）。或者也许你真的希望那些确实持有`std::unique_ptr`s 的类型是可复制构造的。

在我看来，你可以用类型擦除做的最糟糕的事情是妥协，并有条件地对模型进行操作，这取决于被擦除的类型本身是否支持这样的操作。在这里，这意味着如果复制一个`Any_Virtual`值碰巧包含一个不可复制构造的擦除类型的值，则会导致异常。

也许更令人担忧的是，您大量获得垃圾`std::shared_ptr`s 的事实表明您的实现`Any_Virtual`或使用它存在问题。您**绝对不**应该假设单独使用`std::shared_ptr`与`Any_Virtual`单独使用有问题，但使用*任何*与`Any_Virtual`. 由于我没有注意到实现中的问题（但我很容易忽略了一些东西），我想看一个展示问题的程序示例。

# ruby-on-rails - NilClass 的未定义方法“model_name”：简单登录 Rails 中的类

> ID：12020147
> 
> 赞同：0
> 
> 时间：2012-08-18T16:15:57.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我收到此错误：

```
 NoMethodError in Sessions#login

Showing c:/Documents and Settings/OverDuka/Desktop/controle/controle/app/views/sessions/login.html.erb where line #5 raised:

undefined method `model_name' for NilClass:Class

Extracted source (around line #5):

2: <% if flash[:note]%>
3: <%= flash[:note] %>
4: <%end%>
5: <%=form_for @user do |f| %>
6: Nome: <%= f.text_field :name %>
7: Senha: <%= f.password_field :password %>
8: <%= f.submit %> 
```

我做了一个简单的登录系统，但这不起作用，我的控制器是：

```
class SessionsController < ApplicationController

  def login
        @user = User.where(params[:name],params[:password]).first
     if @user
          session[:user_id] = @user.id
          flash[:note] = 'Voce esta logado.'
          redirect_to finances_url
     else
       flash[:note] = 'Falha no login.'
     end
  end

  def destroy
  end
end 
```

我的路线是

```
 match 'login' => 'sessions#login', :as => :login
  resources :finances 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:22:40.797

您的 @user 变量不正确，请为您的会话控制器尝试此操作。此外，将“has_secure_password”添加到您的用户模型

```
class SessionsController < ApplicationController
   def new
   end

  def create
     user = User.find_by_email(params[:email])
     if user && user.authenticate(params[:password])
        session[:user_id] = user.id
          redirect_to finances_url, notice: 'Voce esta logado.'
     else
         flash.now.alert = 'Falha no login.'
        render "new"
       end
    end

 def destroy
     session[:user_id] = nil
      redirect_to root_url, notice: "Logged out!"
  end 
```

那么在你看来

```
<%= form_tag sessions_path do %>
   <div class="field">
     <%= label_tag :email %><br />
    <%= text_field_tag :email, params[:email] %>
 </div>
 <div class="field">
  <%= label_tag :password %><br />
   <%= password_field_tag :password %>
 </div>
  <div class="actions"><%= submit_tag "Log In" %></div>
  <% end %> 
```

在您的路线中

```
 get 'login', to: 'sessions#new', as: 'login'
   get 'logout', to: 'sessions#destroy', as: 'logout'
  resources :sessions 
```

# ios5 - 在 iOS4 上显示点击聚焦方形视觉指示器，但在 iOS5 上不显示

> ID：12020148
> 
> 赞同：1
> 
> 时间：2012-08-18T16:16:00.630
> 
> 标签：ios5, ios4, uiimagepickercontroller

我有一个 UIImagePickerControler 实例，我已经对其进行了自定义，以允许我使用自己的 buttonBar 而不是 Apple 的默认值。

这是实现代码。

```
- (void)presentCameraPicker
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) 
    {
    photoPicker = [[UIImagePickerController alloc] init];
    photoPicker.delegate = self;
    photoPicker.allowsEditing = NO;
    photoPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    photoPicker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;
    photoPicker.showsCameraControls = NO;

    cameraOverlayVC.view.frame = CGRectMake(0, 426, 320, 54);

    [photoPicker.cameraOverlayView addSubview:cameraOverlayVC.view];
    [self presentModalViewController:photoPicker animated:YES];

    }
} 
```

我已经在 iOS4（iPodTouch 4th Gen 上的 4.3）和 iOS5（iPhone 4S 上的 5.1）这两个版本上对其进行了测试。在 iOS4 上，当 UIImagePicker 出现在屏幕上时，我可以点击实时取景图像，我可以获得点击对焦功能（和 AE）和默认的焦点方形视觉指示器，就像在 Apple 的相机应用程序中一样。在 iOS5 上，我获得了相同的点击对焦功能，但没有视觉指示器。我可以添加一个新的叠加视图来模拟 Apple 的视觉指示器，但在 iOS4 上我会在屏幕上获得两个叠加的视觉指示器。

任何解决此问题的想法或建议将不胜感激。

# windows - 如何将变量的值保留在使用“延迟扩展本地”模式的 Windows 批处理脚本之外？

> ID：12020152
> 
> 赞同：13
> 
> 时间：2012-08-18T16:16:07.673
> 
> 标签：windows, path, batch-file, environment-variables

**上下文**：我需要调用一个 Windows 批处理脚本，该脚本将通过在其末尾`PATH`添加另一个路径“ ”来更新我，但是：`xxx`

*   没有任何重复
    （如果我将 ' `xxx`' 添加到 PATH 之类的 ' `aaa;xxx;bbb`'，我需要一个更新`PATH`的 ' `aaa;bbb;xxx`'）
*   没有任何聚合
    （我可以重复调用脚本而不会以' `aaa;bbb;xxx;xxx;xxx;...`'结束）

我试过的：

以下功能负责处理任何重复并完成工作

```
:cleanAddPath -- remove %~1 from PATH, add it at the end of PATH
SETLOCAL ENABLEDELAYEDEXPANSION
set PATH=!PATH:%~2=!
set PATH=!PATH:;;=;!
set PATH=%PATH%;%~2
set P=!P:;;=;!
echo %PATH%
echo -------------
ENDLOCAL  
exit /b 
```

但是，它需要[**延迟扩展**本地模式](http://ss64.com/nt/delayedexpansion.html)，这意味着：在脚本的末尾（或这里，在函数的末尾`cleanAddPath`），**设置的任何内容`%PATH%`都会被丢弃**。

我可以要求用户（我为此编写脚本）启动他们`cmd`的`cmd /V:ON`选项（激活延迟扩展，否则默认关闭），但这不切实际。

如何按照我上面描述的方式修改变量，并且在调用所述脚本*后*`PATH`仍然在我当前的 DOS 会话中更新它？

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T16:16:07.673

“ [DOS - Function Collection](http://www.dostips.com/DtCodeFunctions.php) ”页面给出了一个很好的例子，说明一个函数如何在 DOS 中返回一个值，即使在使用[延迟扩展](http://ss64.com/nt/delayedexpansion.html)模式时也是如此：

以下函数将通过添加更新您想要的任何变量`PATH`：

```
:cleanAddPath -- remove %~2 from %~1, add it at the end of %~1
SETLOCAL ENABLEDELAYEDEXPANSION
set P=!%~1!
set P=!P:%~2=!
set P=!P:;;=;!
set P=!P!;%~2
set P=!P:;;=;!
(ENDLOCAL & REM.-- RETURN VALUES
  SET "%~1=%P%"
)
exit /b 
```

注意使用的路径连接。正如[杰布](https://stackoverflow.com/users/463115/jeb) [评论](https://stackoverflow.com/questions/12020152/how-to-keep-the-value-of-a-variable-outside-a-windows-batch-script-which-uses/12020153#comment16267108_12020153)：

> 如果您的路径包含像 in 之类的 & 符号，则该行`set P=%P%;%~2`至关重要`C:\Documents&Settings`。
> 最好更改设置“ `P=!P!;%~2`”。

这`SET "%~1=%P%"`是允许记住（在由 表示的变量中`%~1`）您使用延迟扩展功能设置的值的部分。
我最初使用 `SET "%~1=%P%" !`，但[jeb](https://stackoverflow.com/users/463115/jeb) [评论](https://stackoverflow.com/questions/12020152/how-to-keep-the-value-of-a-variable-outside-a-windows-batch-script-which-uses/12020153#comment16267108_12020153)：

> 该命令`SET "%~1=%P%" !`可以简化`SET "%~1=%P%"`为尾随感叹号仅在延迟扩展模式下（如果您`%P%`之前准备好）具有（良好）效果。

要更新您的`PATH`变量，您可以使用以下命令调用您的函数：

```
call :cleanAddPath PATH "C:\my\path\to\add" 
```

对于您当前的 DOS 会话，它会在离开该脚本后持续存在。

[dbenham](https://stackoverflow.com/users/1012053/dbenham)的[答案](https://stackoverflow.com/a/12020237/6309)指向一个更强大的答案（赞成），但在我的情况下，这个脚本就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:27:41.317

问题并不像你想象的那么简单。有许多问题可能会在您的代码到达终点之前破坏您的代码，因为它需要跨越`ENDLOCAL`障碍返回更新的值。

我已经回答了这个问题，作为我为类似问题提供的答案的扩展。请参阅[如何检查 %PATH% 中是否存在目录？](https://stackoverflow.com/a/8046515/1012053). 在那个答案中，我提供了大量使问题复杂化的问题。
链接答案底部的代码显示了如何可靠地添加路径，如果它已经不存在`PATH`，它还演示了如何可靠地返回跨越`ENDLOCAL`障碍的值。

***以下编辑来自 VonC，试图将答案实际放在这里，而不仅仅是答案的链接。我会保留编辑，但如果没有完整链接答案的上下文，我很难理解。***

[答案演示了如何可靠地返回值]使用`set "%~1=%var%" !`技巧（尾随' `!`'）

该线程包括：

> > 我不清楚。最后一个引号后面的感叹号如何影响变量内容？
> 
> 延迟扩展的简单规则是：
> 对于行中的每个字符，请执行以下操作：

*   如果是插入符号 ( `^`)，则下一个字符没有特殊含义，插入符号本身将被删除
*   如果是感叹号，搜索下一个感叹号（此处不观察脱字符号），然后展开到变量的内容
*   如果在此阶段没有找到感叹号，则丢弃结果，使用前一阶段的结果（对于插入符号很重要）

> 因此，此时差异应该很明显，即使感叹号在一行中没有其他效果，插入符号也会被删除。
> 例子：

```
@echo off
setlocal EnableDelayedExpansion

echo one caret^^
echo none caret^^  !

set "var1=one caret^"
set "var2=none caret^" !

echo !var1!
echo !var2!
----- OUTPUT ----
one caret^
none caret
one caret^
one caret 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-26T17:06:09.140

耶！最终使用以下测试代码完成了这项工作：

```
@echo off
Setlocal enabledelayedexpansion

Set p="hello world"

( endlocal & rem return

   Set "a1=%p%"

)

Set a1 
```

这输出：

```
a1="hello world" 
```

我在测试中使用延迟扩展而不使用任何！的原因是因为它仍然影响 set 的工作方式，并且我正在为所有人测试的批次延迟扩展。

感谢您的帮助：o）

PS 我尝试对本地和外部环境使用相同的变量名，但这破坏了代码。因此使用了 2 个名称。*

# c++ - 在另一个类中包含一个类

> ID：12020157
> 
> 赞同：0
> 
> 时间：2012-08-18T16:16:36.167
> 
> 标签：c++, class, templates, include, inclusion

因此，我尝试使用刚刚在 LinkedList 类中编写的 Node 类，但出现以下错误：

```
Symbol 'Node' could not be resolved 
```

在下面的代码中。

```
#ifndef LINKEDLIST_H_
#define LINKEDLIST_H_

#include "Node.h"

template<class T>
class LinkedList {

    private:
        //Data Fields-----------------//
        Node<T> head;
        Node<T> tail;
};

#endif /* LINKEDLIST_H_ */ 
```

Node的声明如下：

```
#ifndef NODE_H_
#define NODE_H_

template<class T>
class Node { 
```

更新：

所以我的 Node 类被包含在我的 LinkedList 中仍然存在问题。但是我发现通过将这两个类放在一个头文件中，我没有问题。所以它必须意味着问题完全在于包含......这让我感到困惑，因为这让它看起来像是像我这样的 C++ 初学者不知道的基于语言的细微差别......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:23:01.690

为什么在#include "Node.h" 之后有分号，这就是问题所在。
编辑：您可以做的事情来排除故障：

1.  内联类定义，
    即用类的实际定义替换#include语句（仅用于测试）
2.  检查您的标头保护（例如 # ifndef LINKEDLIST_H_
    尝试重命名它们或完全删除它们（再次仅用于测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:09:56.007

所以这只是随机开始为我工作......我不知道问题是什么，但它现在工作......我正在使用带有 eclipse 的 CDT，它不是 C++ 开发最稳定的东西。所以我的猜测是它以某种方式与此有关....

# ruby-on-rails - Rails 中的 SEO 友好网址

> ID：12020160
> 
> 赞同：1
> 
> 时间：2012-08-18T16:17:06.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在为最后几分钟的假期建立一个网站。

现在我正忙于建立 seo 友好的 url。每最后一分钟都有一个国家和一个城市。我想让网址看起来像这样的方式如下：

**对于每个国家/地区所有最后几分钟的页面：**
“domain.com/last-minutes-spain”<br />
**对于每个城市所有最后几分钟的页面：**
“域.com/last-minutes-spain/barcelona “<br />
每个国家/地区所有最后几分钟的页面 url 工作正常，但每个城市页面的 url 不正常。

我的路线（我正在使用friendly_id gem）：

```
match '/last-minutes-:id' => 'countries#show', :as => 'show_country'
match "/last-minutes-:country_id/:id" => 'city#show', :as => 'show_city' 
```

国家控制器.rb：

```
def show
  @country = Country.find(params[:id])
end 
```

国家/地区/show.html.erb：

```
<% @country.cities.each do |c| -%>
  <%= link_to(c.title, show_city_path(c.slug)) %><br />
<% end -%> 
```

c.slug 用于friendly_id gem

显示城市路径（每个城市的最后几分钟）显示如下：
“domain.com/last-minutes-barcelona/spain”<br />

所以这个城市和国家都在错误的地方。有谁知道如何正确处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T20:27:36.223

你真正想做的是看看在你的模型中覆盖 to_param。

每当有任何调用尝试构建涉及模型的路径时，都会在模型实例上调用 to_param 方法以确定如何在 URL 中引用它。换句话说，您的路线中对应于 :id 的部分。如果您简单地覆盖此方法，则可以返回任何您想要的东西。最简单的方法是将整数 ID 保留为第一个值。像这样的东西：

```
def to_param
  return "#{self.id}-#{self.text_for_seo}"
end 
```

而已。事实上，我昨天就为此录制了一个演练。很快，第一件事就是您正在尝试的内容。然后继续解释如何扩展它以支持加密的数据库 ID： [http ://www.youtube.com/watch?v=UW_s9ejrCsI](http://www.youtube.com/watch?v=UW_s9ejrCsI)

# ruby - 对象作为新类中的变量？红宝石

> ID：12020162
> 
> 赞同：0
> 
> 时间：2012-08-18T16:17:16.370
> 
> 标签：ruby, oop

我正在做一些在互联网上找到的初学者类型的 OOP 练习。目前我的任务是创建两个类：

*   人：带有变量：姓名、姓氏、年龄。
*   歌曲：带变量：标题、作者（人物类型）、发行日期

问题是如何创建这个 Person 类型变量。我试过这个：

```
class Person
  attr_accessor :name, :surname, :age

  def initialize name, surname, age = nil
    @name, @surname, @age = name, surname, age
  end
end

class Song
  attr_accessor :tite, :author, :date_of_issue

  def initalize title, author , date_of_issue
    @title, @author, @date_of_issue = title, Person.new, date_of_issue
  end
end 
```

当我尝试创建新对象时：

```
 song1 = Song.new("All_you_need_is_love", "The_beattles", 1967) 
```

我得到：

> ArgumentError：参数数量错误（0 代表 2）

所以我有两个想法：

1.  我的`Song`课程代码错误

2.  `song1`对象初始化错误（因为参数数量）

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:22:42.760

**您应该在Song**`initialize`中正确拼写。还要考虑**Person**构造函数至少需要 2 个参数。

# android - android：限制播放的声音总数？

> ID：12020164
> 
> 赞同：2
> 
> 时间：2012-08-18T16:17:41.087
> 
> 标签：android, audio, limit, playback

我的应用播放选定数量的短声音（存储在 res/raw 中）。声音是在包含这些声音的数组 soundfileFR[] 中随机选择的。单击按钮即可播放选定数量的声音，使用“for”循环播放一个接一个的声音。该应用程序运行得非常好......除了，由于某种未知的原因，它永远不会连续播放超过 30 个这些声音，即如果我启动应用程序并选择“35”作为要播放的声音数量，它不会播放最后五个声音。或者，如果我首先选择“20”，它会播放所有声音，然后我选择“12”，它不会播放最后 2 个声音。

每个声音都是一个“.wav”，仅重约 50 Ko。有某种内存限制吗？我是否需要在每个声音之间“重置”媒体播放器（？）？如果有怎么办？

“for”循环如下：

```
for (int n = 1; n <= totalNb; n++) {
    final int randomNb;

    final int nn = n;

    randomNb = (int)(Math.floor(Math.random()*(10))); // random nb between 0 and 9                              

    handlerH.postDelayed(new Runnable(){

        public void run() {

        mp = MediaPlayer.create(getBaseContext(), soundfileFR[randomNb]);  // initializes a sound for folder res/raw

            mp.seekTo(0); 
            mp.start();  // plays the sound

            pgbSpoken.setProgress(nn);  // incrementation of the progressBar

        }

    },
    initialdelay + n * intervalrep);    

} // end of "for" 
```

谢谢您的帮助。

皮埃尔

# javascript - 文件下载完成回调

> ID：12020168
> 
> 赞同：9
> 
> 时间：2012-08-18T16:18:12.770
> 
> 标签：javascript

我希望能够纯粹在客户端跟踪文件下载的进度，尤其是文件下载完成。

是否有 JavaScript API 允许我在文件下载完成时定义回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:24:00.973

不，使用纯 JavaScript 是不可能的。虽然有一些技术涉及使用来自服务器的 cookie 和来自客户端的持续轮询。我在这里举例说明：

> [控制器操作完成后使用 Javascript 隐藏图像 MVC3](https://stackoverflow.com/a/11674502/29407)

# javascript - 如何使用鼠标单击选择多个项目？

> ID：12020169
> 
> 赞同：4
> 
> 时间：2012-08-18T16:18:33.120
> 
> 标签：javascript, jquery, css, jquery-ui

这是默认的 jQueryUI 显示为网格布局（[这里是演示](http://jqueryui.com/demos/selectable/#display-grid)）。使用鼠标指针时，我可以一次选择一个。我必须`Ctrl`用于多项选择。如何仅使用鼠标指针一次编辑多个选择的代码？

### CSS

```
<style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; }
    #selectable li { margin: 3px; padding: 1px; float: left; width: 100px; height: 80px; font-size: 4em; text-align: center; }
</style> 
```

### JavaScript

```
<script>
    $(function() {
        $( "#selectable" ).selectable();
    });
</script> 
```

### HTML

```
 <div class="demo"> 
   <ol id="selectable">
     <li class="ui-state-default">1</li>
     <li class="ui-state-default">2</li>
     <li class="ui-state-default">3</li>
     <li class="ui-state-default">4</li>
     <li class="ui-state-default">5</li>
     <li class="ui-state-default">6</li>
     <li class="ui-state-default">7</li>
     <li class="ui-state-default">8</li>
     <li class="ui-state-default">9</li>
     <li class="ui-state-default">10</li>
     <li class="ui-state-default">11</li>
     <li class="ui-state-default">12</li>
   </ol>
 </div><!-- End demo -->

 <div class="demo-description">
   <p>To arrange selectable items as a grid, give them identical dimensions and float them using CSS.</p>
 </div><!-- End demo-description --> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T16:53:21.440

在线找到此代码。那是你要求的吗？

[使用 Ctrl 进行多选](http://jsfiddle.net/ZfevM/99/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:54:18.657

老实说，`Ctrl`用于选择多个项目的 + 左键单击是非常标准的 UI 行为，并且内置于[jQueryUI Selectable](http://jqueryui.com/demos/selectable/)中。您是否还知道您可以左键单击并将焦点拖动到多个项目上以选择它们？

但是，我可以看到提供相关行为的优势，那么如何使用左键单击或拖动来选择，然后左键单击并拖动以*取消选择*？

这可能不是最有效的方法，但在玩过内置回调之后，我想出了一些似乎可行的方法。根据您问题中的代码，我已连接到内置回调函数以存储选择的内容并处理选择删除。JavaScript 在下面重复，但[**在此处演示**](http://jsfiddle.net/ALmkj/1/)。

### JavaScript

```
var $currentlySelected = null;
var selected = [];

$('#selectable').selectable({
    start: function(event, ui) {
        $currentlySelected = $('#selectable .ui-selected');
    },
    stop: function(event, ui) {
        for (var i = 0; i < selected.length; i++) {
            if ($.inArray(selected[i], $currentlySelected) >= 0) {
              $(selected[i]).removeClass('ui-selected');
            }
        }
        selected = [];
    },
    selecting: function(event, ui) {
        $currentlySelected.addClass('ui-selected'); // re-apply ui-selected class to currently selected items
    },
    selected: function(event, ui) {
        selected.push(ui.selected); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T17:09:22.013

[http://jqueryui.com/demos/button/#checkbox](http://jqueryui.com/demos/button/#checkbox) 看起来像你要找的东西

# actionscript-3 - Flash 的 Horizo ntalList 之类的组件

> ID：12020175
> 
> 赞同：0
> 
> 时间：2012-08-18T16:18:58.193
> 
> 标签：actionscript-3, itemrenderer, horizontallist

我正在用 ActionScript 3.0 开发一个 Flash 应用程序。我需要一个组件来使用 ItemRenderer 水平渲染我的项目。我用fl.controls.List垂直做这个，发现Flex应用有Horizo​​ntalList，但是不能迁移到Flex。

是否有我可以使用的组件或如何创建一个？

更新：

我尝试了 1 行的 TileView，但是当项目数大于组件的宽度时，它会导致列重叠。如何实现类似 overflox: hidden in Actionscript 3.0 的功能？

# c++ - C++ Win32 without C Runtime library dependency but with malloc, free atd

> ID：12020181
> 
> 赞同：1
> 
> 时间：2012-08-18T16:20:02.710
> 
> 标签：c++, windows, runtime, malloc, msvcrt

I want to reduce size of my win32 applications programmed in MS Visual Studio C++ and I also want to have guaranteed compatibility on all Windows version (XP and upper without Visual C++ Redistributable Package). I used `/MT` and `/NODEFAULTLIB` parameter to reduce file size and get rid of C Run-Time library. But I lost access to functions like malloc, free, strcat, strstr, etc... What is the best approach to bypass this problem?

I'm thinking about this alternatives:

1.  Use LoadLibrary("msvcrt.dll") and GetProcAddress() to dynamic load pointer to this functions from standard windows library
2.  Program this function by myself for example replace malloc with VirtualAlloc(), free with VirtualFree() etc..

Or is it some other solution for my problem? Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:39:56.013

I'll probably never understand why people want to do that (PCs are not exactly embedded platforms with all their size issues), but there's basically three options:

*   don't use any standard functions, except for what the compiler offers as intrinsics/builtins
*   make your own library
*   use some third party library such as [http://www.codeproject.com/Articles/15156/Tiny-C-Runtime-Library](http://www.codeproject.com/Articles/15156/Tiny-C-Runtime-Library)

# php - 关联数组与关联数组

> ID：12020182
> 
> 赞同：-2
> 
> 时间：2012-08-18T16:20:06.563
> 
> 标签：php

我在关联数组中创建了一个关联数组。然而，当我想增加元素的报酬时，我遇到了一个问题。PHP代码如下：

```
$assoc_in_assoc['Manager']['name'] ="Jim";
$assoc_in_assoc['Manager']['pay'] = 7000;
$assoc_in_assoc['Manager']['Location'] ="2nd Flooe";
$assoc_in_assoc['Accountant']['name'] ="Mr Mike";
$assoc_in_assoc['Accountant']['pay'] = 4000;
$assoc_in_assoc['Accountant']['Location'] ="Account Office";
$assoc_in_assoc['Accountant']['Special Skills'] ="Charterd Accountant";

// Lets give each one a raise of 1000 dollars
foreach ($assoc_in_assoc as $rec){
echo "<pre>";
$rec['pay'] = $rec['pay']+ 1000;
echo print_r($rec);
echo "</pre>";
}// end for each
echo "<pre>"; echo "<hr/>";
echo print_r($assoc_in_assoc);
echo "</pre>";
?> </body> </html> 
```

有人可以建议如何在不转换数组结构的情况下增加工资吗？

我通过将数组的结构从关联更改为关联数组 ... 到索引数组中的关联数组来解决了这个问题。

解决方案：

```
<html> <head> </head> <body> <?php 
echo "Associative array with in Associative array";

$assoc_in_assoc['0']['appointment'] ="Manager";
$assoc_in_assoc['0']['name'] ="Jim";
$assoc_in_assoc['0']['pay'] = 7000;
$assoc_in_assoc['0']['Location'] ="2nd Flooe";
$assoc_in_assoc['1']['appointment'] ="Accountant";
$assoc_in_assoc['1']['name'] ="Mr Mike";
$assoc_in_assoc['1']['pay'] = 4000;
$assoc_in_assoc['1']['Location'] ="Account Office";
$assoc_in_assoc['1']['Special Skills'] ="Charterd Accountant";

// Lets give each one a raise of 1000 dollars
$count=0;
foreach ($assoc_in_assoc as $rec){
echo "<pre>";
$assoc_in_assoc[$count]['pay'] += 1000;
$count++;
echo "</pre>";
}// end for each
echo "<pre>"; echo "<hr/>";
echo print_r($assoc_in_assoc);
echo "</pre>";
?> </body> </html> 
```

任何人都可以指导我详细了解 PHP 数组讨论的来源吗？不仅是介绍，还有数组各个方面的详细讲解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:24:07.410

您可以做其他事情来保持与以前相同的结构。您可以执行以下操作，而不是执行简单的 foreach：

```
foreach($assoc_in_assoc as $key => $rec){
    $assoc_in_assoc[$key]['pay'] += 1000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:23:59.547

我建议您阅读 PHP 主页上的数组。 [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

你有两个选择：

首先，`foreach`有两个论点！另一个参数是数组的键，它是普通数组的整数索引，以及关联数组的键。`$count`您可以使用另一个，而不是在第二个示例中跟踪。

```
foreach ($assoc_in_assoc as $key => $rec){
  echo "<pre>";

  $assoc_in_assoc[$key]['pay'] = $rec['pay'] + 1000;

  echo print_r($rec);    
  echo "</pre>";
}// end for each 
```

其次，您可以`foreach`通过引用创建循环并执行您正在执行的操作。

```
foreach ($assoc_in_assoc as &$rec){
  echo "<pre>";

  $rec['pay'] = $rec['pay'] + 1000;

  echo print_r($rec);    
  echo "</pre>";
}// end for each 
```

# command-line-interface - Cordova 2.0.0 错误 OSX

> ID：12020184
> 
> 赞同：0
> 
> 时间：2012-08-18T16:20:31.580
> 
> 标签：command-line-interface, cordova, osx-mountain-lion, cordova-2.0.0

# Cordova 2.0.0 错误 OSX

来电：`sudo ./create ~/cordovatest com.christopherdebeer.test01 testapp`*

*   当在dmg的`/bin/`文件夹中解压时`Cordova-2.0.0``phonegap-phonegap-2.0.0-0-g2dbbdab.zip`

返回以下错误：

```
/Volumes/Cordova-2.0.0/bin/replaces: line 28: tmpFile: Read-only file system mv: tmpFile: No such file or directory 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:23:01.690

## 来自freenode上#phonegap的回答

我试图在`./create`文件仍在文件中时运行该`.dmg`文件。复制到我的主目录等解决了这个问题。

感谢 freenode.net 上#phonegap 上的@michi_ 的回答。

# django - Django：从 MEDIA_URL 迁移到 STATIC_URL

> ID：12020186
> 
> 赞同：0
> 
> 时间：2012-08-18T16:20:43.817
> 
> 标签：django

从 Django 1.3 开始，引入了 STATIC_URL 的概念来将使用媒体文件与 css 和 js 文件分开。

我已经设置了我的`STATIC_ROOT = '/home/user/project/static/'`和 `STATIC_URL = '/static/'`。

在我的 base.html 中，我改变了这样的路径：

```
<link href="{{ STATIC_URL }}bootstrap/css/bootstrap.min.css" rel="stylesheet"> 
```

在`url.py`我添加了以下两行：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
...
urlpatterns += staticfiles_urlpatterns() 
```

我的视图使用 RequestCONtext 呈现模板：

```
return render(request, 'main_page.html', variables) 
```

但是在开发中，运行runserver时我仍然得到404。

```
[18/Aug/2012 17:12:04] "GET /static/jquery/jquery-1.8.0.min.js HTTP/1.1" 404 1682 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:30:21.923

设置.py

```
PROJECT_DIR = os.path.dirname(os.path.abspath(__file__))

MEDIA_ROOT = os.path.join(PROJECT_DIR, 'site_media')
MEDIA_URL = '/site_media/'
STATIC_URL = '/static/'

if DEBUG:
    STATIC_ROOT = os.path.join(PROJECT_DIR, 'static')
else:
    STATICFILES_DIRS = (
        os.path.join(PROJECT_DIR, 'static'),
    ) 
```

网址.py

```
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
        url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
    ) 
```

那应该工作:)

# c++ - 包括 在每个班级中都会导致开销？

> ID：12020190
> 
> 赞同：2
> 
> 时间：2012-08-18T16:21:02.170
> 
> 标签：c++, qt, header

当我创建实现 QWidget、QGraphicsView、QGraphicsItem 等的类时...我总是只包含 QtGui 而不是 QtWidget、QGraphicsView 等...这是不好的做法吗？是否有任何性能成本？因为这个，构建时间会更长吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T16:32:53.827

如果`QtGui`头文件包含所有其他头文件，那么*编译*时间会更长，因为编译器预处理器必须读取更多文件，并且编译器本身将有更多类/结构来解析和跟踪。但是，*链接*时间，更重要的是*运行时间* 不会受到影响。

# php - 无法获取 fb 用户的个人资料图片

> ID：12020192
> 
> 赞同：0
> 
> 时间：2012-08-18T16:21:21.383
> 
> 标签：php, facebook, user-profile

我想将用户的个人资料图片放在另一张图片上，我尝试使用以下代码检索用户个人资料图片

```
$url='https://graph.facebook.com/'.$uid.'/picture?type=large';
$userpic = imagecreatefromjpeg($url);
imagejpeg($userpic, "xyz.jpg", 100); 
```

但我收到了这个错误：

```
imagecreatefromjpeg() [function.imagecreatefromjpeg]: Cannot read image data in /home/a3111484/public_html/fb/index.php 
```

我也尝试过`file_get_contents()`，但在这种情况下，只会创建一个空的 jpg 文件。

请帮我找出问题所在。

我也尝试了 cURL 方式，但得到了这个错误：

```
Warning: curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in /home/a3111484/public_html/fb/index.php on line 31 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:07:37.717

我认为这将满足您的需求：

```
<?php
$q = $_GET['q'];
$img = imagecreatefromstring(file_get_contents('https://graph.facebook.com/'.$q.'
   /picture?type=large'));
Header( "Content-type: image/jpeg");
imagejpeg($img);
imagedestroy($img); 
```

这在我的网站上以`facebook_img.php`.

我使用如下代码将图像添加到页面：

```
printf('<meta property="og:image" content="/path/to/facebook_img.php?q=%s" />', $fb_user_id); 
```

@IMSoP：您需要做一些像这样复杂的事情，因为`id/picture`API 端点会返回 301 重定向到照片网址。

# silverlight - 根据条件更改要使用的 DataTemplate

> ID：12020194
> 
> 赞同：1
> 
> 时间：2012-08-18T16:21:22.607
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我有 3 个用户控件

控制 1
控制 2
控制 3

我有一个包含 ItemsControl 的堆栈面板

```
<UserControl.Resources>
  <DataTemplate x:Key="Template1">  
      <my:UserControl1 Height="117"/>              
 </DataTemplate>    
 <DataTemplate x:Key="Template2">
  <my:UserControl3 Height="117"/>            
 </DataTemplate>    
 <DataTemplate x:Key="Template3">
   <my:UserControl3 Height="117"/>            
  </DataTemplate>    
</UserControl.Resources>  

<StackPanel Name="stackPanel3" Orientation="Vertical" VerticalAlignment="Bottom" Width="Auto">
  <ItemsControl ItemsSource="{Binding BlocksForMonth.Blocks}" ItemTemplate="{StaticResource Template1}">      
  </ItemsControl>
</StackPanel> 
```

BlocksForMonths.Blocks 是视图模型的列表。Blocks 类有一个名为 ClipType 的属性。如果clipType 为1，我想使用Template1。如果是 2，我想使用模板 2。如果是 3，我想使用模板 3

这些模板包含不同的用户控件

我怎样才能通过绑定来做到这一点？

我考虑了 1 个带有 3 个控件的模板，但我不知道如何绑定可见性？

在这个 XAML 中，我绑定到一个列表而不是单个项目

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:16:25.797

我会将 3 个控件放在同一个模板中，并使用 Visibility 来显示正确的一个。我要做的是构建一个 IValueConverter 来转换决定值（您的情况是 ClipType）并将其与 ConverterParameter 进行比较。如果它们相等，则返回 Visibility.Visible，否则返回 Visibility.Collapsed。

```
<UserControl.Resources>
    <my:ClipTypeToVisibilityConverter x:Key="converter"/>
    <DataTemplate x:Key="Template">
        <StackPanel>  
            <my:UserControl1 Height="117" Visibility={Binding ClipType, Converter={StaticResource converter}, ConverterParameter=1} />              
            <my:UserControl2 Height="117" Visibility={Binding ClipType, Converter={StaticResource converter}, ConverterParameter=2} />            
            <my:UserControl3 Height="117" Visibility={Binding ClipType, Converter={StaticResource converter}, ConverterParameter=3} />            
        </StackPanel>
    </DataTemplate>    
</UserControl.Resources>  

<StackPanel Name="stackPanel3" Orientation="Vertical" VerticalAlignment="Bottom" Width="Auto">
      <ItemsControl ItemsSource="{Binding BlocksForMonth.Blocks}" ItemTemplate="{StaticResource Template}">      
      </ItemsControl>
</StackPanel> 
```

此示例假定 ClipType 属性位于正在显示的列表中的每个项目视图模型上。

这是一个 C# 示例转换器。

```
 public class ClipTypeToVisibilityConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
                var clipType = value.ToString();

                if (clipType == (string)parameter))
                    return Visibility.Visible;

                return Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

对不起，一切都是空气代码。但我想你明白了。

# jquery - 更改 div 的大小

> ID：12020200
> 
> 赞同：0
> 
> 时间：2012-08-18T16:22:04.417
> 
> 标签：jquery, html

我目前对 div 的大小有疑问。我想让 Div 大于其实际内容大小。如果有人可以帮助我，我会很高兴的。

[http://jsfiddle.net/58VHE](http://jsfiddle.net/58VHE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:39:57.793

可能你打算写这样的东西：

```
.textbox {width:400px;}
.div {overflow:visible; width:200px; background-color:#f8f8f8;}
p {width:400px; display:none; padding:10px 5px; background-color: #f8f8f8;}
#toggle{padding:2px 5px;}

$("#toggle").focus(function() {
    $("p").slideDown("fast");
});

$("#toggle").blur(function() {
    $("p").slideUp("fast");
});​ 
```

顺便说一句，您的`input`标签可能缺少结束元素`/>`

看看这个[jsfiddle](http://jsfiddle.net/58VHE/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:35:15.123

您可以使用 CSS 属性来做到这一点`padding`。

```
.div {
    height:20px; 
    padding: 10px; 
    width:200px; 
    background-color:#f8f8f8;
} 
```

1.  示例：[JsFiddle](http://jsfiddle.net/58VHE/11/)
2.  有关填充的更多信息：[info](http://www.w3schools.com/css/css_padding.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:30:46.097

您为 div 定义了固定高度。只需将其删除，它就会延伸到内容的高度。如果您更喜欢明确定义 div 尺寸，或者增加高度。

# c# - “剔除”单元测试的功能

> ID：12020201
> 
> 赞同：2
> 
> 时间：2012-08-18T16:22:35.697
> 
> 标签：c#, unit-testing, testing

我有各种方法，我想使用 Visual Studio 的 C# 内置单元测试功能进行单元测试。事情进展得很顺利，但我遇到了一个场景，我想“存根”对特定函数调用的依赖。

即，我有一些采用以下格式的方法：

```
public class ClassWithMethodsIWantToUnitTest 
{
    public void myFcn(object someArg)
    {
        ...
        LoggerService.Instance.LogMessage("myMessage");
        ...
    }
} 
```

所以基本上，我希望我的单元测试能够简单地验证对“LogMessage”的调用是否已经发生。我不想实际检查日志文件或任何东西。我想要一种方法来查看 LoggerService 行是否已被击中并执行。

LoggerService 是一个单例，如果可能的话，我不想仅仅为了单元测试而修改代码。

根据这个问题的格式，在我看来，应该有可能以某种方式控制我的单元测试中的代码。换句话说，有没有办法让我制作一个伪造的 LogMessage 版本，以便我可以将它用于我的单元测试？如果可能的话，我不希望调用“真正的” LogMessage 函数。我只想测试代码是否命中了调用该函数的路径。

这有道理吗？这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T16:25:38.330

这当然是有道理的，不是一个未知的问题。

不幸的是，您可能需要更改代码，以便它接受*依赖注入*。也就是说，在测试时，您应该能够*注入*特制的测试对象（模拟）而不是真实的东西。在您的情况下，这可能意味着能够设置`LoggerService.Instance`为特殊的模拟对象。

您需要的第二件事是您将测试的假记录器实例。您可能需要一个模拟，这是一个可以设置来检查调用者行为的特殊对象。周围有几个模拟框架，我真的建议你使用一个而不是尝试自己动手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T16:57:03.157

Anders 的回答绝对是解决问题的“规范”方式，但在 .NET 4.5 中，还有第二种选择：

假货框架。

它允许您将“假”程序集添加到您的单元测试项目中，该程序集接受委托来代替方法的实际实现。这是一个使用示例`File.ReadAllText`

```
 [TestMethod]
    public void Foo()
    {
        using (ShimsContext.Create())
        {
            ShimFile.ReadAllTextString = path => "test 123";
            var reverser = new TextReverser();
            const string expected = "321 tset";
            //Act
            var actual = reverser.ReverseSomeTextFromAFile(@"C:\fakefile.txt");
            //Assert
            Assert.AreEqual(expected, actual);
        }
    } 
```

该测试方法正在做的是暂时（在 的范围内）用我提供的 lambda`ShimsContext`替换实现。`File.ReadAllText`在这种情况下，任何时候`ReadAllText`调用它都会返回字符串“test 123”。

它比常规 DI 慢，但如果您完全依赖于单例的特定实现，它可能正是您所需要的。[在此处](http://blog.dotnetdude.net/2012/05/testing-untestable-with-vs11-fakes.html)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T16:59:49.067

安德斯所说的。

几个流行的模拟框架是[Moq](http://code.google.com/p/moq/)和[RhinoMocks](http://ayende.com/wiki/Rhino+Mocks.ashx)

并且您将更改您的代码，以便将记录器依赖项注入到您的类中：

```
public class ClassWithMethodsIWantToUnitTest 
{
      public ClassWithMethodsIWantToUnitTest(ILoggerService logger)
      {}

      public void myFcn(object someArg)
      {
         ...
          logger.LogMessage("myMessage");
         ...
      }
} 
```

或类似的东西。DI 框架可以在需要时将记录器自动注入到类中。本质上是一个 DI 框架自动调用

```
new ClassWithMethodsIWantToUnitTest(LoggerService.Instance); 
```

# css - IE9中的CSS浮动

> ID：12020204
> 
> 赞同：0
> 
> 时间：2012-08-18T16:22:43.073
> 
> 标签：css, forms, internet-explorer, css-float

我有以下结构：

```
<form>
<ul>
<li>
<label for="#id">Item</label>
<input type="text" id="#id"/>
</li>
<li>
<label for="#id">Item</label>
<input type="text" id="#id"/>
</li>
</ul>
</form> 
```

在标签上使用以下 css：

```
width: 250px;
float: left;
display: block; 
```

在所有浏览器中，我都有：

```
label input
label input 
```

在 IE9 中，我得到了类似的东西：

```
label input
      label
input 
label input 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:31:05.963

您可以清除 li 的浮动，您的问题就解决了

```
label {
    width: 250px;
    float: left;
    display: block;
}

li {
    clear: both;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:52:35.323

漂浮时需要清除：

CSS清除修复：

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

对您的 html 的更改：

```
<form>
 <ul>
  <li class="clearfix">
   <label for="id">Item</label>
   <input type="text" id="id">
  </li>
 <li class="clearfix">
   <label for="id1">Item</label>
   <input type="text" id="id1">
  </li>
 </ul>
</form> 
```

一些备注，你的ID错了，必须以字母开头。

# android - Android - 在短时间内拍摄许多相机照片

> ID：12020207
> 
> 赞同：2
> 
> 时间：2012-08-18T16:22:49.487
> 
> 标签：android, android-camera

我有一个 Android 应用程序，它需要在大约 1 或 2 秒内拍摄尽可能多的相机照片。

我想到了两种可能：

1) 拍摄各种照片 2 秒。

2) 录制 2 秒视频并提取帧图像。

你建议哪个选项？

您认为使用当前的硬件每秒至少有 5 张图像是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:28:30.793

我建议第二个。因为如果相机的快门速度较低，应用程序无法在一两秒内拍摄多张照片。所以更好地捕捉视频和提取帧。但问题是视频质量低于图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:37:02.003

最快的方法是使用视频功能（每秒多帧）。

但是，如果您想拥有总部图片，则取决于您的设备：

这应该有助于：

[Android相机takePicture()方法执行时间](https://stackoverflow.com/questions/6722733/android-camera-takepicture-method-execution-time?rq=1)

[http://www.workreloaded.com/2011/06/how-to-use-the-android-camera/](http://www.workreloaded.com/2011/06/how-to-use-the-android-camera/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:34:21.300

我很确定从视频中提取帧会很模糊，至少在物体或手机移动时是这样。只需拍摄视频并暂停以进行检查。

# php - 如何在 PHP 中创建 websockets 服务器？

> ID：12020222
> 
> 赞同：7
> 
> 时间：2012-08-18T16:24:39.110
> 
> 标签：php, javascript, websocket, server-side, http-protocols

我已经在互联网上搜索了大约两天，试图了解 Web 套接字是如何工作的，我在 Javascript 和 PHP 方面相对较新，因为我大约在两三个月前开始。

我对什么是 Http 协议以及如何与我一直在阅读的服务器执行“握手”感到非常困惑。所以不幸的是，我很难问一个比标题中更具体的问题。

然而，比起标题中的问题，我更想要一个能够全面教我 Web 套接字的资源，例如书籍或在线教程。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T17:01:24.773

一般来说，套接字只是可以发送数据的 TCP 流。HTTP 建立在它们之上。WebSockets 构建在 HTTP 之上/与 HTTP 并行构建，并允许将数据实时地来回发送到浏览器。标准套接字可以做到这一点，但浏览器具有严格的安全性，这使得使用标准套接字与它们进行通信变得困难。

当您需要从浏览器到服务器的持久连接、实时应用程序或推送通知之类的事情时，WebSockets 很有用。

不幸的是，我对 PHP 实现了解不多，但看起来这里有一个库：[http ://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

就个人而言，我会回避在 PHP 中做这样的事情，因为 PHP/Apache 可能非常繁重，并且由于在有人查看页面时套接字总是打开的，服务器资源可能很快就会用完。

很多人喜欢将 NodeJS 与 socket.io 一起使用，因为这样您就可以在服务器和浏览器上使用 JavaScript，但实际上这取决于偏好。我会查看 Socket.IO 并找到一种具有良好客户端的语言。

看起来这个问题也可能有用。[将 PHP 与 Socket.io 一起使用](https://stackoverflow.com/questions/6398887/using-php-with-socket-io)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:31:07.207

这个符合要求吗？

[http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)

如果没有，我可以找到另一个。

# security - 跨站请求伪造 Yii,PHP

> ID：12020226
> 
> 赞同：0
> 
> 时间：2012-08-18T16:25:22.663
> 
> 标签：security, web, yii, csrf

我正在尝试在 yii 中实现 CSRF 验证。我已经编写了自己的课程，除了我的 post 变量（用于表单）不包含 token 之外，一切正常。我应该自己在 post 变量中设置令牌吗？Yii 文档指出 post 变量由每个表单中的隐藏字段设置。它是否也需要在表格中进一步实施？我知道令牌不存在，因为我通过转储它们看到了 Post 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:10:14.367

我想您需要的只是在您的配置中启用 CSRF 验证并使用 CHtml 进行表单（[Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.security#cross-site-request-forgery-prevention)）。这是您在配置中需要的：

```
'components'=>array(
    'request'=>array(
        'enableCsrfValidation'=>true,
    ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:31:08.283

除了启用 CSRF 验证之外，您还需要将 Yii CSRF 令牌放入表单中。我遇到的最简单的方法之一是使用 CHtml `beginForm`，它将它作为生成表单标签的一部分。更多信息在这里：[http ://www.yiiframework.com/doc/api/1.1/CHtml#beginForm-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#beginForm-detail)

# php - 从 MYSQL 更新到 MYSQLI

> ID：12020227
> 
> 赞同：12
> 
> 时间：2012-08-18T16:25:31.003
> 
> 标签：php, mysql, mysqli

因此，由于 MYSQL 已被弃用，并且每个人都不断告诉我更新，我认为是时候这样做了。

但由于我不习惯 mysqli_*，它对我来说似乎很陌生。当我有一个用 Mysql 编码的整个站点时，这不是一个简单的编辑。

所以我想知道：我如何将下面的代码转换为 Mysqli？只是为了在处理查询数据库时给我和其他任何人一个好的起点。

```
$sql_follows="SELECT * FROM friends WHERE user1_id=".$_SESSION['id']." AND status=2 OR user2_id=".$_SESSION['id']." AND status=2";
$query_follows=mysql_query($sql_follows) or die("Error finding friendships");
if($query_follows>0){
} 
```

**编辑：**在阅读和编辑我的整个网站时，上面转换为 MYSQLI_ 的代码会像这样..

```
 $Your_SQL_query_variable= mysqli_query($connectionvariable,"SELECT * FROM friends WHERE user1_id=".$_SESSION['id']." AND status=2 OR user2_id=".$_SESSION['id']." AND status=2")) {
        printf("Error: %s\n", $mysqli->error);
    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-18T16:56:01.673

您可以从这里下载转换器工具：

[https://github.com/philip/MySQLConverterTool](https://github.com/philip/MySQLConverterTool)

它生成的代码非常粗糙，主要是因为它使用`$GLOBAL`变量实现默认数据库链接参数的方式。（这也使得在有人使用通过转换器的代码时很容易识别。）

这里还有一个 MySQL Shim 库：

[https://github.com/dshafik/php7-mysql-shim](https://github.com/dshafik/php7-mysql-shim)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:32:53.733

改造最好的地方是看php参考库。非常易于使用，并会告诉您您需要知道的一切：

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

# git - git：查看日志和移动文件的变化

> ID：12020232
> 
> 赞同：1
> 
> 时间：2012-08-18T16:26:33.240
> 
> 标签：git, git-log, file-move

我在 git 中有文件并想检查它的历史记录：提交更改时的提交以及此提交之间的确切更改。

但：

1.  我知道我在过去的git历史中已经重命名了文件
2.  甚至可能在目录之间移动。

检查我要检查的内容的最简单方法是什么？

PS我知道这个问题：[移动文件上的git diff？](https://stackoverflow.com/questions/5730460/git-diff-on-moved-file)，但是如果您记性不好并且不记得所有以前的文件名，则无法回答该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:12:03.050

要检查文件的历史记录，即使是跨文件移动或重命名，最好使用：

```
git log --follow FILENAME 
```

# android - Sherlock Activity 中的两行 ListView

> ID：12020233
> 
> 赞同：2
> 
> 时间：2012-08-18T16:26:45.057
> 
> 标签：android, listview, actionbarsherlock

我正在开发的应用程序正在使用 ActionShercklockBar，

在主要活动（SherlockActivity）上，我有一个带有搜索字段的栏、一个 ListView（每行有两个条目）和一个微调器

问题是，当我开始使用 android 时，我发现的所有教程都要求我的活动从 ListActivity 扩展

但我的正在扩展 SherlockActivity 所以我对如何实现这两行条目有点困惑

任何人都可以将我指向网络上的资源或提供一些输入吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:42:50.693

您不必从 ListActivity 扩展即可使用 ListView。只需在您的布局中放置一个 ListView，然后在您的活动的 onCreate 方法中设置它的 ListAdapter。这是一个显示这种 ListView 样式的示例： [http ://windrealm.org/tutorials/android/android-listview.php](http://windrealm.org/tutorials/android/android-listview.php)

对于每行 2 行条目，您需要自定义列表，以便设置显示的每个项目的布局。查看此示例中的 OrderAdapter 和 getView 方法实现：http: [//www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:39:57.697

您的问题的答案是使用 SherlockListActivity 类和您为 listView 提供的适配器，在 getView() 方法中，您必须创建一个包含两行的自定义视图。网上有很多关于如何在列表视图中创建自定义项目的教程，所以请看一下。

但是，如果您仍然感到困惑，请写信给我，我将使用真实的示例代码编辑我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:33:36.120

我和你有同样的问题，我在主要活动中有 ActionShercklockBar 和 ListViews。我所做的是使用 ListAdapter 从主要活动中的 SherlockListActivity 扩展，它运行良好

# c# - 使用 asp.net 在单个域上设置多个站点

> ID：12020238
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:27:55.160
> 
> 标签：c#, asp.net

我正在寻找一种解决方案来处理具有多个目录的多个站点，例如博主目录结构，例如：

```
asp.com/site1
asp.com/site2
asp.com/site3 
```

我怎样才能实现这一点，将不同的站点启动到不同的目录/文件夹？我知道我需要做一些事情来配置文件但是什么？？？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:31:02.343

我认为您正在寻找的是 IIS 中的虚拟目录。查看有关如何在 IIS7 中设置它们的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/bb763173.aspx](http://msdn.microsoft.com/en-us/library/bb763173.aspx)

或者去这个页面看看如何在其他 IIS 版本中设置它们：

[http://msdn.microsoft.com/en-us/library/ms178477.aspx](http://msdn.microsoft.com/en-us/library/ms178477.aspx)

# android-ndk - Windows 上的 ndk-gdb

> ID：12020245
> 
> 赞同：2
> 
> 时间：2012-08-18T16:28:22.197
> 
> 标签：android-ndk, gdb

我试图通过在带有 android-ndk-r8b 的 Windows 机器上运行 ngk-gdb 来调试我的应用程序的 jni 部分。我正在为 Eclipse 使用 cygwin 和 c/c++ 插件。我的设备是galaxy s，android 2.3.7

我所做的是按照[Using Eclipse for Android C/C++ Debugging](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)的说明进行操作，但我坚持运行 ndk-gdb，出现此错误：

```
Device CPU ABIs: armeabi-v7a armeabi
ERROR: The device does not support the application's targetted CPU ABIs!
       Device supports:  armeabi-v7a armeabi
       Package supports: 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T22:18:59.897

我最近遇到了这个问题，就我而言，这是一个 cygwin 问题。make 没有安装在 cygwin 中，这在 ndk-gdb 脚本中进一步产生了问题。使用 cygwin setup.exe 安装 make 后（在 Devel 下选择 make - 根据另一个建议，我还在 Shells 下安装了 tcsh），“ABIS targetted by application:”行显示了应用程序的目标 ABI。

没有制作：

```
/cygdrive/c/work/android/android-ndk-r8b-windows/android-ndk-r8b/ndk-gdb: line 105: make: command not found  
ABIs targetted by application:  
Device API Level: 15  
Device CPU ABIs: armeabi-v7a armeabi  
ERROR: The device does not support the application's targetted CPU ABIs!  
       Device supports:  armeabi-v7a armeabi  
       Package supports: 
```

正确安装 make ：

```
ABIs targetted by application: armeabi-v7a  
Device API Level: 15  
Device CPU ABIs: armeabi-v7a armeabi  
Compatible device ABI: armeabi-v7a 
```

位于 jni 文件夹中的 Application.mk 可用于指定应用程序的目标 ABI - 示例：

```
APP_ABI := armeabi-v7a
APP_OPTIM := debug 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:04:19.777

对于像我这样使用 Android 4.3 更新的 Nexus（设备）的所有其他人，存在阻碍本机代码调试的错误。（我尝试了在 SO 上找到的所有内容：）

> 1.  要么根您的设备并尝试
> 2.  [或在此处](https://developers.google.com/android/nexus/images)更新 nexus 4.3 工厂映像（据报道这是由 google android dev 工作的）
> 3.  或等待 Android 4.4 更新到您的设备（因为尚未打包发布，Google 已在源代码树中识别并修复了错误）

# c++ - DirectX 相机定位（第三人称视角）

> ID：12020246
> 
> 赞同：0
> 
> 时间：2012-08-18T16:28:28.750
> 
> 标签：c++, directx-10

我正在创建一个 3d 飞行游戏并使用 DXUTCamera 作为我的视图。

我可以让相机拍摄角色位置，但我想以第三人称观看我的角色。

这是我第一人称视角的核心

```
//Put the camera on the object.                     

        D3DXVECTOR3 viewerPos;
        D3DXVECTOR3 lookAtThis;
        D3DXVECTOR3 up         ( 5.0f, 1.0f, 0.0f );
        D3DXVECTOR3 newUp;
        D3DXMATRIX matView;

        //Set the viewer's position to the position of the thing.

        viewerPos.x = character->x;   viewerPos.y = character->y;
        viewerPos.z = character->z;

        // Create a new vector for the direction for the viewer to look

        character->setUpWorldMatrix();
        D3DXVECTOR3 newDir, lookAtPoint;
        D3DXVec3TransformCoord(&newDir, &character->initVecDir,
                                      &character->matAllRotations);

        // set lookatpoint

        D3DXVec3Normalize(&lookAtPoint, &newDir);
        lookAtPoint.x += viewerPos.x;
        lookAtPoint.y += viewerPos.y;
        lookAtPoint.z += viewerPos.z;

        g_Camera.SetViewParams(&viewerPos, &lookAtPoint); 
```

那么有人知道如何将相机移动到第三人称视角吗？最好是定时的，这样相机运动就会有一个平稳的动作。（我希望我可以编辑这段代码而不是引入另一个相机类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T18:12:42.000

好吧，我相信我可以在理论上帮助您从第一人称视角转变为第三人称视角。很抱歉我不能给你实际的代码，但我是用手机打字的。您必须将您的视图开始的点稍微放在播放器后面，并让lookAtPoint 来查看播放器。另外，一定要让 , x , y 和 z 按照第三人称的逻辑移动。希望有帮助。如果它根本没有帮助，我很抱歉，但是用手机打字对我来说有点困难，我无法解释它真的很好。

# c# - 没有成功绑定图像

> ID：12020248
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:28:29.847
> 
> 标签：c#, wpf, image, xaml, data-binding

我正在尝试将主窗口上的图像与一个字符串（存储在另一个类中）绑定，该字符串表示我要显示的图像的文件路径。

但是什么都没有出现。。

这是我的主窗口代码 xaml 代码：

```
<HierarchicalDataTemplate x:Key="categoryTemplate"
        ItemsSource="{Binding Path=Items}" 
        ItemTemplate="{StaticResource animalTemplate}">
        <Grid MouseEnter="DockPanel_MouseEnter" MouseLeave="DockPanel_MouseLeave">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="30" />
                <ColumnDefinition Width="16" />
            </Grid.ColumnDefinitions>

            <Image HorizontalAlignment="Center" Source="{Binding Path=IconFilePath}" VerticalAlignment="Center" Width="16" Height="16" Grid.Column="0" />
            <TextBlock Text="{Binding Path=Name}" Margin="5,0,0,0" FontWeight="Bold" FlowDirection="{Binding Path=FlowDirection}" FontSize="14" HorizontalAlignment="Stretch" Grid.Column="1" />
            <Border CornerRadius="2" Background="Lavender" Grid.Column="2" Margin="0,0,5,0">
                <TextBlock Text="30" Foreground="DodgerBlue" HorizontalAlignment="Center" FontWeight="Bold" FontSize="13" />
            </Border>
            <aea:MenuButton Margin="0,0,2,0" Opacity="0" HorizontalAlignment="Right" Grid.Column="3" SnapsToDevicePixels="False" Width="16" Height="16" DisplayStyle="Text" IsEnabled="True" IsDropDownOpen="False">
                <aea:SplitButtonItem IsSelected="True" Visibility="Collapsed">
                    <Image HorizontalAlignment="Center" Source="Assets\FeedMenu.png" VerticalAlignment="Center"/>
                </aea:SplitButtonItem>
                <aea:SplitButtonItem Tag="{Binding Path=me}" Selected="Subscription_MarkAllAsRead">Mark all as Read</aea:SplitButtonItem>
                <aea:SplitButtonItem Tag="{Binding Path=me}" Selected="Subscription_AddAllToFavorites">Add all to Favorites</aea:SplitButtonItem>
                <aea:SplitButtonItem Tag="{Binding Path=me}" Selected="Subscription_ReadAllLater">Read all Later</aea:SplitButtonItem>
                <aea:SplitButtonItem Tag="{Binding Path=me}" Selected="Subscription_OpenAllBrowser">Open all in browser</aea:SplitButtonItem>
            </aea:MenuButton>
        </Grid>

        <!--<TextBlock Text="{Binding Path=Name}" FontWeight="Bold"/>-->
    </HierarchicalDataTemplate> 
```

这是我的另一堂课：

```
 public string IconFilePath { get; private set; }
    public Subscription()
    {
        this.IconFilePath = @"C:\Users\Din\Din\Programming\Webs\Ended Projects\CodeCaged\Products\Read 360\Read 360\Read 360\bin\Release\feeds\1.ico";
    } 
```

先谢谢了，

丁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:31:26.550

您是相对于的绑定，[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)因此您需要确保它是该类的实例。还要检查[绑定错误](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)，这个小上下文就不多说了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:08:25.717

如果没有完整的代码清单来说明这个控件是如何设置的（例如，DataContext 在哪里以及如何设置？以及“项目”列表是如何填充的？）

但从表面上看，您似乎希望从 Items 元素中同时获得“Name”和“IconFilePath”，所以要确认 Subscription Class 定义了 IconFilePath 和 Name？

像[Snoop](http://snoopwpf.codeplex.com/)这样的工具可以在运行的应用程序可视树中自动显示绑定错误；我希望它在这种情况下列出这样的内容。

此外，为了减少可能的头痛（这很可能是问题所在），可能值得为您的数据类提及[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。否则，您的数据类的属性**更改**不会自动传播。

# actionscript-3 - 在非矩形对象周围添加黑色和白色边距 - 通过使用过滤器？

> ID：12020253
> 
> 赞同：0
> 
> 时间：2012-08-18T16:28:54.653
> 
> 标签：actionscript-3, actionscript, filter, selection, margin

ActionScript 中是否有*编程*方式（可能通过使用[显示过滤器](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7dba.html)）在对象周围添加白色边框，然后是深色边框，如下图所示？或者是否已经通过 Photoshop 或类似工具将边框添加到图形资源中？

![在此处输入图像描述](../Images/4bf4990716572d7caecef7e5d96f7149.png)

上图是游戏 Magic Land (c) Wooga 的截图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:40:41.407

是的，您可以使用两个 GlowFilter 来实现此目的：

```
displayObject.filters = [new GlowFilter(0xffffff, 1, 4, 4, 10, 2), 
                         new GlowFilter(0x0, 1, 1.5, 1.5, 10, 2)]; 
```

您可能想对这些值进行一些试验。

*   厚度主要由模糊值控制（在上面的示例中，白色为 4，黑色为 1.5）。
*   由于我们真的不想要模糊的外观，我们需要使用高强度（上例中为 10）。
*   使用高强度时，通常最好将质量从默认的 1 设置为 2，否则笔画会看起来有点像素化。在这种情况下，您需要稍微降低强度。

# php - 如何避免我的页面 php 中的通知？

> ID：12020254
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:28:56.337
> 
> 标签：php, html

我正在使用 html 和 php 开发一个页面 web，但是当我运行我的代码时，我会在我的页面中获得这样的通知

```
 1345224199 [INFO]: Connecting to tcp://192.168.1.6:5222 
   1345224199 [VERBOSE]: Socket is ready; send it. 
   1345224199 [VERBOSE]: SENT: 
   1345224199 [VERBOSE]: Successfully sent 112 bytes. 
   1345224199 [VERBOSE]: Disconnecting...  
   1345224199 [VERBOSE]: Socket is ready; send it. 
   1345224199 [VERBOSE]: SENT: 
   1345224199 [VERBOSE]: Successfully sent 16 bytes. 
   1345224199 [VERBOSE]: RECV: 
   1345224199 [VERBOSE]: RECV: DIGEST-MD5PLAINANONYMOUSCRAM-MD5zlib 
   1345224199 [DEBUG]: Calling features_handler 
   1345224199 [VERBOSE]: Socket is ready; send it. 
   1345224199 [VERBOSE]: SENT: 
   1345224199 [VERBOSE]: Successfully sent 73 bytes. 
   1345224199 [DEBUG]: EVENT: end_stream 
```

如何避免在我的网页中显示此通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:32:28.173

看起来您正在使用 CURL 并已`verbose`设置为开启。尝试设置`CURLOPT_VERBOSE`为false：

```
curl_setopt($ch , CURLOPT_VERBOSE, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:46:28.713

试试看`$loglevel=XMPPHP_Log::LEVEL_ERROR`，它只会显示错误，或者`$loglevel=null`什么都不显示。

```
<?php
    error_reporting(0);
    include("xmpphp/XMPPHP/xmpp.php");
    $conn = new XMPPHP_XMPP('192.168.1.65','5222','admin','admin', 'xmpphp','emna-pc', $printlog=true, $loglevel=XMPPHP_Log::LEVEL_ERROR);
    try {.....}
    catch (XMPPHP_Exception $e) { 
        die($e->getMessage()); 
    }
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T16:35:26.780

由于您允许显示的错误报告级别，您会收到通知。在您的开发站点上打开它是一个好主意，但在您的生产站点上应该完全关闭它。
关闭所有错误：

```
error_reporting(0); 
```

打开所有错误：

```
error_reporting(E_ALL); 
```

# position - 如何使用 CursorAdapter 按值设置 Spinner 选择

> ID：12020260
> 
> 赞同：2
> 
> 时间：2012-08-18T16:29:25.253
> 
> 标签：position, spinner, android-cursoradapter

我有一个从数据库中填充的微调器。我想选择默认选择列表中的哪个项目。我需要找出列表（CursorAdapter）中的哪个项目具有“默认离开”值并将其设置为所选值。

```
 Spinner away_team_spinner = (Spinner)findViewById(R.id.away_team_spinner);
    DatabaseHelper db = new DatabaseHelper(this);
    Cursor team_list = db.getTeams(p_game_level);
    startManagingCursor(team_list);

    String[] team_name = new String[]{colTeamName};
    int[] to = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapter =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, team_list, team_name, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    away_team_spinner.setAdapter(adapter);

    //// HERE IS WHERE MY ERRORS START ////

    Log.i("NEW_GAME","Before set arrayadapter");
    CursorAdapter adapter_choose = (CursorAdapter)away_team_spinner.getAdapter();
    Log.i("NEW_GAME","Before set setSelection");
    away_team_spinner.setSelection(adapter_choose.getPosition("Default Away")); 
```

这是我在这个网站上搜索找到的“解决方案”。但是，我不能将“getPosition”与 CursorAdapter 对象一起使用。我尝试了 ArrayAdapter，但是在“设置 arrayadapter 之前”之后的行注释错误“android.widget.SimpleCursorAdapter 无法转换为 android.widget.ArrayAdapter”。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T05:07:36.640

您是否考虑过运行 for 循环，直到找到位置然后以这种方式设置适配器位置？生病起草一些代码然后测试它，我正在做类似的事情

好吧，这只是成功了，享受吧！

```
 int cpos = 0;

    for(int i = 0; i < simpleCursorAdapter.getCount(); i++){
      cursor.moveToPosition(i);
      String temp = cursor.getString((your column index, an int));
      if ( temp.contentEquals(yourString)){
        Log.d("TAG", "Found match");
        cpos = i;
        break;
      }
    }
    spinner.setSelection(cpos); 
```

# hibernate - 一段时间后Spring安全登录不起作用

> ID：12020267
> 
> 赞同：1
> 
> 时间：2012-08-18T16:30:53.297
> 
> 标签：hibernate, spring-mvc, spring-security, jpa-2.0

我正在使用 spring security 和 spring mvc 3.0.5 和 mysql (hibernate+jpa)。spring 安全性工作得很好，但过了一段时间它停止工作并且有效的登录尝试导致登录错误，在尝试相同的凭据 3 到 4 次后登录开始工作。这是我已知的问题还是有人可以给我一些指示在哪里看？先感谢您。

# c - 结构混乱

> ID：12020275
> 
> 赞同：-3
> 
> 时间：2012-08-18T16:32:21.137
> 
> 标签：c, function, compiler-construction, struct, scanf

我想通过将它们与给定的结构数组进行比较来创建一个函数，该函数获取一本书的标题和作者并返回 0 或 1（如果可用或不可用）..... 编译器显示：

```
structs.c:10:28: error: expected ‘)’ before ‘title’
structs.c: In function ‘main’:
structs.c:59:21: error: expected expression before ‘bookRecord’
structs.c:60:13: error: expected expression before ‘bookRecord’
structs.c:61:9: warning: implicit declaration of function ‘requestBook’
structs.c:61:23: error: expected expression before ‘bookRecord’ 
```

这是代码：

```
 #include<stdio.h>           
  #include <stdlib.h>
  #include <string.h>

 #define TRUE 1
 #define FALSE 0

 #define NUM_BOOKS 5

 int requestBook(bookRecord title[],bookRecord author[]){    /* compiler error :10*/
          int i;
          for(i=0;i<=NUMBOOKS;i++){
                  if(strcmp(stacks[i].tittle ,bookRecord.title[0]) == 0 &&                                                                              
                  strcmp(stacks[i].author     ,bookRecord.author[0]) == 0 ){

                  return 1;
                   }
           }
                   return 0;
  }

         typedef struct {
        int minute; 
        int hour;   
         } timeT;

    typedef struct {

       char title[50];  
       char author[50];     
       int year;        
       int isOut;                   
       timeT time;      
       int isBlank;         
  } bookRecord;

  /* given array of struct */

    bookRecord stacks[NUM_BOOKS]=
       {
       {"C How To Program", "Deitel", 2006, FALSE, {0,  0}, TRUE} ,
       {"The Old Capital", "Yasunari Kawabata", 1996, FALSE, { 0, 0}, TRUE},
       {"", "", 0, FALSE, {0,0}, FALSE},
       {"", "", 0, FALSE, {0,0}, FALSE},
       {"", "", 0, FALSE, {0,0}, FALSE}
       };

 int main (int argc, char*argv[]) { 
    int t;

    scanf("%s ",bookRecord.title[0]);         /* compiler error :59*/
    scanf("%s",bookRecord.author[0]);     /* compiler error :60*/

     t=requestBook(bookRecord.title[0], bookRecord.author[0]);   /* compiler error :61
     printf("%d",t);

     return 0;
 } 
```

任何帮助表示赞赏！

////////////////////////////////////////

如果您想查看最终解决方案，请访问 STRUCT CONFUSION(2) 它是重复的

////////////////////////////////////////

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:40:59.243

你的代码有几个问题。

1.  在函数中使用它们*之后*声明结构。`requestBook`
2.  在`requestBook`函数中，您引用了迄今为止未声明的变量`stacks`。
3.  在`requestBook`函数中，您使用*类型* `bookRecord`作为变量。

可能还有更多，但这是我在第一次阅读时能找到的。

**编辑：**

其他几个问题：

1.  在`requestBook`函数中，您循环*一次到多次*。请记住，数组索引从零到 (number_of_entries - 1)。
2.  您也可以使用类型`bookRecord`作为变量`main`。
3.  当您错误使用时`bookRecord`，您不会得到结构或字符串，您只会得到字符串中的第一个字符`title`和`author`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:41:32.437

你在这条线上有问题：

> if(strcmp(stacks[i].title,bookRecord.title[0]) == 0 &&
> strcmp(stacks[i].author,bookRecord.author[0]) == 0)

您在第一个 strcmp 函数中拼错了“title”。

# php - Ajax分页sql查询

> ID：12020282
> 
> 赞同：0
> 
> 时间：2012-08-18T16:33:23.537
> 
> 标签：php, mysql, ajax, pagination

我正在开发一个需要对 sql 数据库结果进行分页的网站。这个想法是这样的，用户可以单击带有每个美国州代码的提交按钮，以查看该州用户留下的所有评论。例如点击 NY 应该显示所有来自 NY 的人的评论，点击 TX 应该显示所有 TX 等等。在一个大列表中显示结果是可行的，但我现在想对这些结果进行分页。我目前正在使用位于其自己的 paginate.php 文件中的此代码，每次显示新状态时都需要重新更新该文件：

```
<?php

...

$rs_result = mysql_query($sql); 
$row = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages = ceil($total_records / 10); 

for ($i=1; $i<=$total_pages; $i++) { 

echo "<a href='?page=".$i."'>".$i."</a> ";

}; 
?> 
```

代码本身并不完全有效，因为它会使页面刷新。这样做会丢失先前单击哪个状态的记忆。如何更改它以使用 Ajax，这样我就不需要刷新页面。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:43:46.153

您需要将结果包装在`DIV`具有分配 ID 的 a 中，并将 URL 更改为指向 javascript 函数（我会推荐[jQuery](http://www.jquery.com)）。该函数必须获取将在该 div 中显示的数据。

例如：

```
<div id="results">
</div> 

<?php
    for ($i=1; $i<=$total_pages; $i++) { 
        echo "<a href='?page=".$i."' onclick="getPage('".$i."'); return false;">".$i."</a> ";
    }; 
?>

// and script

// the script asks result.php for page and returns html result.
<script type="text/javascript">
    function getPage(page){
        $("#results").load("result.php", { page: page } );
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:42:14.547

您要做的是使用您在 href 属性中的相同内容进行 AJAX 调用。响应后获取数据并将其放入页面上的 html 元素中。查看[jQuery 的加载](http://api.jquery.com/load/)方法。

哦，是的，只是为了让我们的小动作继续进行。您应该尝试停止使用 mysql_query() 并开始使用 mysqli。mysql 已弃用，不再受支持。：/

# c# - C#中继承和实现有什么区别

> ID：12020286
> 
> 赞同：27
> 
> 时间：2012-08-18T16:34:17.087
> 
> 标签：c#

我有以下代码：

```
public class HitController : MonoBehaviour, ICentroidHitListener 
```

我理解的方式。HitController 继承自 MonoBehaviour 并实现 ICentroidHitListener 中的方法。

但是，如果我只想实现 ICentroidListener 中的方法，我该如何编写代码呢？我是这样编码的吗：

```
public class HitController : ICentroidHitListener 
```

在这种情况下，看起来 HitController 继承自 ICentroidHitListener

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-18T16:36:49.090

如果是接口，`:`则实现该接口。如果它是一个类，`:`则从该类继承。

因此`HitController : ICentroidHitListener`是正确的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T16:37:13.563

通常，无法使用`:`语法区分接口和类。

`I`这就是为所有接口添加前缀很重要的原因。

您提供的代码`public class HitController : ICentroidHitListener`, 是正确的，您的代码的读者应该能够轻松快速地推断出它是基于`I`前缀的接口。

取自[这里](http://msdn.microsoft.com/en-us/library/ms173156.aspx)：

> 当一个类或结构实现一个接口时，该类或结构为该接口定义的所有成员提供一个实现。接口本身不提供类或结构可以以继承基类功能的方式继承的功能。但是，如果基类实现了接口，则派生类会继承该实现。据说派生类隐式地实现了接口。

取自[这里](http://msdn.microsoft.com/en-us/library/ms173149.aspx)：

> 继承使您能够创建新的类来重用、扩展和修改在其他类中定义的行为。其成员被继承的类称为基类，继承这些成员的类称为派生类。派生类只能有一个直接基类。但是，继承是可传递的。如果 ClassC 是从 ClassB 派生的，而 ClassB 是从 ClassA 派生的，则 ClassC 会继承 ClassB 和 ClassA 中声明的成员。

在 C# 中，与 C++ 等语言相反，不允许[多重继承](http://en.wikipedia.org/wiki/Multiple_inheritance)，这意味着一个类不能从多个其他类继承。相反，一个类*可以*实现多个接口。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T16:57:45.397

“继承”意味着扩展现有行为。接口没有行为，您必须实现接口中定义的方法/属性的所有行为。因此，您“实现”了一个接口，并且不能真正从它继承任何东西。

如果你从其他东西继承，你继承了它的所有具体行为。如果某个其他类实现了一个接口，则您不必也实现该接口。现在，“实现”该接口的类可以使这些接口实现中的一个或多个“抽象”；在这种情况下，您将被迫实现您所派生的类的抽象成员。但是，您不必实现该接口——您从基础继承该接口。您可以将接口包含在派生类型的“基类列表”中，但这不是必需的。

通过这个标记，您还将“实现”一个完全抽象的类。但是，很少有人会使用该术语。大多数情况下，“接口”是 .NET 中的语法糖；但它确实具有 IL 级别的支持。例如，完全抽象的基类在语义上与接口相同。

接口让你确保你唯一能做的就是定义一个接口而不是行为（一个抽象类可以有行为）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T16:37:36.110

如果我理解正确，您所问的答案是“是”。

在第一个示例中，您从基类 ( )*继承并**实现*接口 ( ')。 `MonoBehavior`*`ICentroidHitLIstener`*

 *您可以访问类中的所有成员，并且您的`MonoBehavior`类必须为接口中定义的所有成员提供实现。`HitController``HitController``ICentroidHitListener`

在第二个示例中，您只实现了`ICentroidHitListener`接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T16:48:08.893

这很容易。
继承正在为您获得基类特性。
实现是根据指定的协议创建功能。

class:class 和 interface:interface 是继承，
class:interface 是实现，
class:abstract_class 既是实现又是继承。*

# javascript - 为什么只能用点表示法引用表格？

> ID：12020289
> 
> 赞同：4
> 
> 时间：2012-08-18T16:34:32.480
> 
> 标签：javascript, html, dom, syntax

这似乎是一个简单的初学者问题，但我无法在任何地方找到答案。

假设我有这个 HTML：

```
<form name="myForm">
   <input type="text" name="myTxt">
</form> 
```

然后我可以使用以下javascript

```
document.myForm.myTxt.value = 'foo'; 
```

但是如果我有一个 div 而不是一个表单呢？

```
<div name="myDiv">
   <span name="mySpan"></span>
</div> 
```

为什么我不能在这里做同样的事情，比如

```
document.myDiv.mySpan.innerHTML = "bar"; 
```

似乎应该可以这样做，而不必使用 getELementById()，但我无法使其工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T16:41:06.263

由 W3C 设计。

真的没什么好争论的。您可以通过 访问页面上所有表单的 HTMLCollection `document.forms`，就像您可以使用 图像`document.images`、小程序`document.applets`、链接`document.links`和锚点一样`document.anchors`。

[http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-1689064](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-1689064)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:43:13.853

您发布的语法是针对表格的，具体来说..它只适用于表格..

您将需要使用以下行使其适用于 div...

```
document.getElementsByName("myDiv")[0].getElementsByTagName("span")[0].innerHTML = "bar"; 
```

还有其他方法可以做到这一点......

# java - 自动存储 JSF 页面的 html 代码

> ID：12020291
> 
> 赞同：0
> 
> 时间：2012-08-18T16:34:42.877
> 
> 标签：java, html, jsf, servlet-filters

我有一个 JSF (IceFaces 1.8.2) 网站。我需要以下功能： 当显示特定的 JSF 页面时，我想将其 HTML 代码存储在数据库中。我尝试使用 Servlet 过滤器来捕获代码（使用 HttpResponseWrapper 对象，因为它写在 SUN 网页和很多教程中），但响应总是空的。有人可以帮助我吗？

这是doFilter：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
    throws IOException, ServletException {  

    Wrapper responseWrapper = new Wrapper((HttpServletResponse)response);
    chain.doFilter(request, responseWrapper);
    //I just want the output on stdout at the moment...
    System.out.println(responseWrapper.toString());
    PrintWriter out = response.getWriter();
    out.write(responseWrapper.toString()); 
    } 
```

这是包装器：

```
public class Wrapper extends HttpServletResponseWrapper{
    private CharArrayWriter writer;
    public Wrapper(HttpServletResponse response){
        super(response);
        writer = new CharArrayWriter();
}

public PrintWriter getWriter(){
    return (new PrintWriter(writer));
}

public String toString(){
    return writer.toString();
}

public char[] toCharArray(){
    return (writer.toCharArray());
 }
} 
```

和 web.xml：

```
<filter>
  <filter-name>MyFilter</filter-name>
  <filter-class>foo.myfilter</filter-class>
</filter> 
<filter-mapping>
  <filter-name>MyFilter</filter-name>
  <url-pattern>*.iface</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:33:24.190

也许 JSF 发送一个重定向，或者使用`response.getOutputStream()`? 尝试在所有方法中设置断点`HttpServletResponseWrapper`以发现 JSF 调用的方法。

# xcode - 你如何在 UIWebView 中连接 scrollViewDidScroll？

> ID：12020293
> 
> 赞同：1
> 
> 时间：2012-08-18T16:35:16.183
> 
> 标签：xcode, ios5, uiwebview

当 UIWebView 中的 UIScrollView 滚动时，我正在尝试执行操作。我想连接 scrollViewDidScroll 方法来执行此操作，但这并未在 UIWebViewDelegate 中公开。我觉得我应该能够让我的控制器也实现 UIScrollViewDelegate，但这似乎搞砸了 UIWebView，因为这应该是 UIScrollView 的委托。

# android - Android SingleTask 不工作

> ID：12020295
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:35:27.837
> 
> 标签：android

我的应用程序中有多个活动。其中两个是 LoginActivity，第二个是 SettingsActivity。用户登录到设置活动并从设置活动中注销应用程序。应用程序的流程是 LoginActivity -> HomeActivity -> SettingsActivity 。用户在设置活动中从应用程序中调用注销。我在设置活动上调用完成并创建登录活动的意图。这很好用，但是当我按下登录活动的背面时，会出现家庭活动。我希望一旦 LoginActivity 出现后退按钮应该将应用程序从应用程序中取出。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:46:44.480

答案在于[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)。您需要做的就是将标志设置为您的意图，如下所示

```
Intent i = new Intent(this, LoginActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i);
finish(); 
```

那几乎应该做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:47:00.550

我相信这就是您正在寻找的：

[如何清除 Android Stack 的活动？](https://stackoverflow.com/questions/4190429/how-to-clear-the-android-stack-of-activities)

我不会太在意它实际上并没有完成（）你的 LoginActivity 的事实——这实际上是一个非常正常的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T17:16:03.057

我必须使用 .FLAG_ACTIVITY_CLEAR_TASK 才能工作。我读到这在 API 版本 11 之后受支持，这些是否适用于所有以前的版本。其次，我如何使用 Manifest 文件中的这些而不是 java 代码？intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);

# ruby-on-rails - 如何防止更新 Rails 中的单个属性？

> ID：12020296
> 
> 赞同：2
> 
> 时间：2012-08-18T16:35:36.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, models, controllers, before-save

提交表单时，如何防止Rails中单个属性被更新？所有其他属性都应该更新。

是`before_save`，`attr_reader`还是其他方式？

如果使用`before_save`，如何访问属性哈希？

导轨 3.0.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:04:06.957

退房**[`attr_protected`](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected)**。

```
Class YourModel << ActiveRecord::Base

  attr_protected :the_one_column, as: :update

  # ...
end 
```

现在作为调用的一部分`update_attributes`，您将指定`:update`角色，例如

```
klass = YourModel.find(some_id)
klass.update_attributes(params[:your_model], as: :update) 
```

如果`:the_one_column`设置在`params`传递给中`update_attributes`，它会抛出一个错误。

正如@Beerlington 在他对您的问题的评论中提到的那样，您还应该查看**[attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)**。通常最好花 30 分钟时间检查应用程序白名单属性的所有模型，而`attr_accessible`不是使用`attr_protected`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T06:08:44.793

其他选项只是在您的控制器中执行此操作：

```
klass.update_attributes( params[:your_model].except(:attributes_to_avoid) ) 
```

# ios - 使用 iOS6 设备归档应用程序失败

> ID：12020297
> 
> 赞同：1
> 
> 时间：2012-08-18T16:35:39.713
> 
> 标签：ios, compilation, store, archive

我终于意识到为什么“存档”选项是灰色的。我需要选择一个 iOS 设备。

我目前拥有的唯一设备上安装了 iOS6。

尝试存档应用程序时，它会显示以下内容：

> ld：警告：忽略文件/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o，文件是为armv7构建的不是被链接的架构（armv6）：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o ld：入口点（开始）未定义。通常在 crt1.o 中用于架构 armv6 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

但是我想支持armv6。我该怎么办？

编辑：我尝试将目标从 iOS4.0 更改为 iOS 4.2 并说以下内容：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo：/Users/airrider3/Library/Developer/Xcode/DerivedData/TRGame-fvkoniflczyexwhcnmjvozqbuozd/Build/Intermediates/ArchiveIntermediates/AppStore/ IntermediateBuildFilesPath/TRGame.build/Release-iphoneos/iOSGame.build/Objects-normal/armv7/Kipos 和 /Users/airrider3/Library/Developer/Xcode/DerivedData/TRGame-fvkoniflczyexwhcnmjvozqbuozd/Build/Intermediates/ArchiveIntermediates/AppStore/IntermediateBuildFilesPath/TRGame .build/Release-iphoneos/iOSGame.build/Objects-normal/armv7/Kipos 具有相同的架构（armv7），不能在同一个胖输出文件命令/Applications/Xcode.app/Contents/Developer/Platforms/ iPhoneOS.platform/Developer/usr/bin/lipo 失败，退出代码为 1

编辑：我现在设法将 armv7 存档到 iOS 4.0。它会工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:57:19.543

IOS6不能存档，需要降级到最新的官方版本才能存档。

编辑：

> 更新到 iOS 6 测试版的设备无法恢复到早期版本的 iOS。注册的开发设备将能够升级到未来的 beta 版本和最终的 iOS 6 软件。

[https://developer.apple.com/devcenter/ios/index.action#](https://developer.apple.com/devcenter/ios/index.action#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:02:49.013

我想到了。我只需要添加“armv6”，而不是添加“armv6 armv7”，因为“armv7”的代码已经用其他默认的奇怪代码编写了。

这就是为什么它告诉我们正在构建两个 armv7。

感谢大家的帮助，不管怎样！

# ruby-on-rails - Rails 无法识别生产中的路线，但使用识别路径做得很好

> ID：12020303
> 
> 赞同：1
> 
> 时间：2012-08-18T16:36:16.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个非常复杂的路由方案，当我使用控制台对其进行测试时一切都很好，但在生产中爆炸并出现路由错误：没有路由匹配。

路线

```
resources :sports, :only => [ :show ] do
  member do
    get ':page', :to => 'sports#facilities'
  end
end

resources :provinces, :path => '', :only => [ :show ] do
  resources :municipalities, :path => '', :only => [ :show ] do
    resources :neighbourhoods, :path => '', :only => [ :show ] do
      resources :sports, :only => [ :show ] do
        member do
          get ':page', :to => 'sports#facilities'
        end
      end
    end
    resources :sports, :only => [ :show ] do
      member do
        get ':page', :to => 'sports#facilities'
      end
    end
  end

  resources :sports, :only => [ :show ] do
    member do
      get ':page', :to => 'sports#facilities'
      get 'deals'
    end
  end
end 
```

这就是我要查看路线是否被正确识别的方法：

```
1.9.3p194 :001 > r = Rails.application.routes
 => #<ActionDispatch::Routing::RouteSet:0x007fa7f3a0edb0> 
1.9.3p194 :002 > r.recognize_path( '/milano/milano/sports/tennis' )
 => {:action=>"show", :controller=>"sports", :province_id=>"milano", :municipality_id=>"milano", :id=>"tennis"} 
1.9.3p194 :003 > r.recognize_path( '/milano/milano/sports/tennis/1' )
 => {:controller=>"sports", :action=>"facilities", :province_id=>"milano", :municipality_id=>"milano", :id=>"tennis", :page=>"1"} 
1.9.3p194 :004 > r.recognize_path( '/sports/tennis/1' )
 => {:controller=>"sports", :action=>"facilities", :id=>"tennis", :page=>"1"} 
```

当我在生产中尝试相同的操作时，我看到 :page 为 nil，并且路径无法识别。这是完全相同的页面。更奇怪的是，如果页面有语法错误或其他什么，它引发的异常是页面内部引发的异常，当我修复它时，我有一个路由错误......

传递给控制器​​的参数是 {:controller=>"sports", :action=>"facilities", :id=>"tennis", :page=>nil}，即使我使用 / 2 /3。

有人经历过这样的事情，可以帮助我吗？

导轨是 3.2.7

提前致谢。

# ios - 如何将base64字符串解码/转换为NSData？

> ID：12020307
> 
> 赞同：4
> 
> 时间：2012-08-18T16:36:23.930
> 
> 标签：ios, xcode, nsstring, base64

你好我想弄清楚如何将iOS应用程序中的base64字符串转换/解码为NSData，这样我就可以解密我加密的数据。

[可以在这里](https://stackoverflow.com/a/9537527/708807)找到我用于将 NSData 转换为 base 64 字符串的方法是否有类似的方法来创建将 base 64 字符串解码/转换为 NSData 的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T17:38:19.190

这就是我一直在寻找的。

```
+ (NSData *)base64DataFromString: (NSString *)string
{
unsigned long ixtext, lentext;
unsigned char ch, inbuf[4], outbuf[3];
short i, ixinbuf;
Boolean flignore, flendtext = false;
const unsigned char *tempcstring;
NSMutableData *theData;

if (string == nil)
{
    return [NSData data];
}

ixtext = 0;

tempcstring = (const unsigned char *)[string UTF8String];

lentext = [string length];

theData = [NSMutableData dataWithCapacity: lentext];

ixinbuf = 0;

while (true)
{
    if (ixtext >= lentext)
    {
        break;
    }

    ch = tempcstring [ixtext++];

    flignore = false;

    if ((ch >= 'A') && (ch <= 'Z'))
    {
        ch = ch - 'A';
    }
    else if ((ch >= 'a') && (ch <= 'z'))
    {
        ch = ch - 'a' + 26;
    }
    else if ((ch >= '0') && (ch <= '9'))
    {
        ch = ch - '0' + 52;
    }
    else if (ch == '+')
    {
        ch = 62;
    }
    else if (ch == '=')
    {
        flendtext = true;
    }
    else if (ch == '/')
    {
        ch = 63;
    }
    else
    {
        flignore = true; 
    }

    if (!flignore)
    {
        short ctcharsinbuf = 3;
        Boolean flbreak = false;

        if (flendtext)
        {
            if (ixinbuf == 0)
            {
                break;
            }

            if ((ixinbuf == 1) || (ixinbuf == 2))
            {
                ctcharsinbuf = 1;
            }
            else
            {
                ctcharsinbuf = 2;
            }

            ixinbuf = 3;

            flbreak = true;
        }

        inbuf [ixinbuf++] = ch;

        if (ixinbuf == 4)
        {
            ixinbuf = 0;

            outbuf[0] = (inbuf[0] << 2) | ((inbuf[1] & 0x30) >> 4);
            outbuf[1] = ((inbuf[1] & 0x0F) << 4) | ((inbuf[2] & 0x3C) >> 2);
            outbuf[2] = ((inbuf[2] & 0x03) << 6) | (inbuf[3] & 0x3F);

            for (i = 0; i < ctcharsinbuf; i++)
            {
                [theData appendBytes: &outbuf[i] length: 1];
            }
        }

        if (flbreak)
        {
            break;
        }
    }
}

return theData;
} 
```

# java - Eclipse 中的 Java 控制台，但如果使用 Jar 怎么办？

> ID：12020309
> 
> 赞同：0
> 
> 时间：2012-08-18T16:36:41.697
> 
> 标签：java

所以，

我在 Eclipse 中做了一个小游戏，它会生成一个 1 - 1000 的随机数，当在 Eclipse 中播放时，它会在 Eclipse 控制台中播放，但是如果我想在没有 Eclipse 的情况下播放它怎么办？没有控制台出现？有人知道如何解决这个问题吗？编辑：我想要一个新的 GUI 而不是 CMD。

Grts PS：如果您需要源代码的特定部分，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:42:00.830

1) 您可能应该将程序导出为 .jar 文件。

这不是绝对必要的 - 但它更好。听起来你已经做到了:)

2) 导出 .jar 之前一定要在 Eclipse 中指定主类

3) 一旦你*有了*.jar，你可以：

```
 a) execute "java -jar myjar.jar" from a command prompt (for a console-mode program)    
   b) execute "javaw2 -jar myjar.jar" from a command prompt (for a Swing/GUI program) 
```

4) 你也可以在 Windows 中使用 javaw 设置“文件关联”，这样你就可以双击 .jar 来执行它：

*   [在 Windows 上运行 JAR 文件](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:55:06.527

如果你想要一个 GUI，你必须自己开发一个。没有我听说过的“Java 控制台 GUI”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T17:01:23.087

似乎 OP 想要将控制台输出重新路由到他选择的位置，而不是打开一个实际的 shell。

[这是重新路由标准输出的一种方法。](http://another-lazy-blogger.blogspot.com/2008/04/did-you-ever-got-frustrated-with.html)

您可以将其发送到字符串、流、文件等，然后自己将其打印到窗口中。

# iis - 在 IIS 下的 HTTPS 网站中允许来自外部网站的非 ssl 内容

> ID：12020316
> 
> 赞同：0
> 
> 时间：2012-08-18T16:37:31.560
> 
> 标签：iis, ssl, cross-domain

我最近将我的网站置于 SSL 之下。我已经能够调整网站，使大部分内容都在 SSL 下，但是一些数据，如 Twitter 头像，在 http 网站上，所以我收到了警告，至少在 Chrome 中。

IIS 中是否有允许从网站域之外的页面获取非 SSL 数据的策略？

它取决于浏览器、源代码还是服务器设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:41:20.457

我相信它会，但浏览器通常会抱怨不安全的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:53:50.580

如果您插入直接 HTTP 链接，浏览器会抱怨（这是正确的）。一种选择是将数据缓存在服务器上并将其作为服务器的“自己的”链接发送。

# css - JSBIN 与 LESS CSS

> ID：12020319
> 
> 赞同：3
> 
> 时间：2012-08-18T16:37:42.007
> 
> 标签：css, less, jsbin

是否可以使 LESS CSS 与 JSBIN 一起使用？

在添加库下，我们可以添加 Less 1.1.3，但我不确定是否或如何使其工作。

测试：

[http://jsbin.com/idekiz/1/edit](http://jsbin.com/idekiz/1/edit)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T00:43:56.390

JSBin 已经支持 LESS。在 CSS 窗格中，只需单击大**CSS**，就会出现一个下拉菜单。LESS 是选项之一。

![在此处输入图像描述](../Images/5e320e482ea98dcb04c479cdfec0eede.png)

### [JSBin](http://jsbin.com/idekiz/3/)

# java - 使用基类实例化派生类有什么好处？爪哇

> ID：12020320
> 
> 赞同：0
> 
> 时间：2012-08-18T16:37:41.803
> 
> 标签：java, class, instantiation

> **可能重复：**
> [为什么在 Java 中使用接口名称声明变量？](https://stackoverflow.com/questions/1484445/why-are-variables-declared-with-their-interface-name-in-java)
> [列表应该如何转换为它们的具体实现？](https://stackoverflow.com/questions/11867217/how-should-lists-be-cast-to-their-conrecte-implementations)

例子：

```
Map<Integer, Integer> map = new HashMap<Integer, Integer>(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:39:19.063

这通常是为了让您稍后可以在另一个实现中交换，并且仍然让代码运行相同。例如，如果您随后决定使用 a`TreeMap`而不是 a `HashMap`，您只需更改实例化步骤，其余代码仍然可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:39:39.890

它是一种编程实践，称为[对接口编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T16:44:23.517

您可以在不影响其余代码的情况下切换实现（例如，在您的示例中切换到 a `TreeMap`），因为它将使用基类，即`Map`.
它将您的代码解耦，并且被认为是针对接口而不是具体实现进行编码的良好编程实践

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T16:50:27.373

[契约式设计](http://en.wikipedia.org/wiki/Design_by_contract)或“接口编程”是确保您的代码仅使用接口公开的属性/方法的原则，更重要的是，在任何给定时间使用一个主要接口。如果您一次使用多个接口，这通常表示耦合更紧密。

通常，您也不应该直接在代码中实例化对象。您应该将该工作委托给外部实体，以便使用的实现的任何更改都可以在一个地方完成。

有一篇 Dobb 博士的期刊文章指出应该禁止使用“new”关键字（确切的标题类似于“new is verboten”），但我现在找不到指向它的链接。

# ejb - 为什么当我将托管 bean 转换为 SFSB 时会得到 TwoPhaseCoordinator.afterCompletion - SynchronizationImple 返回失败

> ID：12020322
> 
> 赞同：0
> 
> 时间：2012-08-18T16:37:50.040
> 
> 标签：ejb, jboss7.x, cdi, stateful-session-bean

当会话超时时，我的 @SessionScoped WorkflowManager 托管 bean 能够重置状态，从而导致显示欢迎启动屏幕。将@Stateful 添加到 WorkflowManager 后，欢迎屏幕并没有始终如一地显示，而且从查看 server.log 来看，会话实际上并没有以一致的方式正确超时。当浏览器在会话超时后发出请求时， ViewExpiredExceptionHandler 应该重定向到启动屏幕。相反，出现的是以下堆栈跟踪和警告：

```
11:56:31,705 WARN  [com.arjuna.ats.jta] (http--127.0.0.1-8443-7) ARJUNA016029: SynchronizationImple.afterCompletion - failed for org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization@b344a2 with exception: java.lang.IllegalStateException: JBAS014531: Cache entry {[71, -15, 7, -59, -96, 28, 64, 76, -124, 16, -84, 49, 117, 10, -19, 21]} is not in use

at org.jboss.as.ejb3.cache.impl.backing.NonPassivatingBackingCacheImpl.release(NonPassivatingBackingCacheImpl.java:134) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.cache.impl.backing.NonPassivatingBackingCacheImpl.release(NonPassivatingBackingCacheImpl.java:56) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.cache.spi.impl.AbstractCache.release(AbstractCache.java:76) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.cache.spi.impl.AbstractCache.release(AbstractCache.java:39) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor.releaseInstance(StatefulSessionSynchronizationInterceptor.java:197) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor.access$200(StatefulSessionSynchronizationInterceptor.java:50) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization.afterCompletion(StatefulSessionSynchronizationInterceptor.java:271) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.afterCompletion(SynchronizationImple.java:96)

at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.afterCompletion(TwoPhaseCoordinator.java:402)

at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:103)

at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:164)

at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1165)

at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)

at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)

at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:92) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:232) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ejb3.component.stateful.StatefulComponentIdInterceptor.processInvocation(StatefulComponentIdInterceptor.java:52) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]

at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

at com.patrac.controller.statemachine.WorkflowManager$$$view7.getCurrentWorkflow(Unknown Source) [Patrac-ejb.jar:]

at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source) [:1.7.0_03]

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]

at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]

at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:111) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at com.patrac.controller.statemachine.WorkflowManager$Proxy$_$$_Weld$Proxy$.getCurrentWorkflow(WorkflowManager$Proxy$_$$_Weld$Proxy$.java) [Patrac-ejb.jar:]

at com.patrac.controller.statemachine.WorkflowManager$Proxy$_$$_WeldClientProxy.getCurrentWorkflow(WorkflowManager$Proxy$_$$_WeldClientProxy.java) [Patrac-ejb.jar:]

at sun.reflect.GeneratedMethodAccessor41.invoke(Unknown Source) [:1.7.0_03]

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]

at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]

at javax.el.BeanELResolver.getValue(BeanELResolver.java:302) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]

at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.7-jbossorg-2.jar:]

at org.apache.el.parser.AstValue.getValue(AstValue.java:169) [jbossweb-7.0.13.Final.jar:]

at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.13.Final.jar:]

at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.TagAttributeImpl.getObject(TagAttributeImpl.java:329) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.TagAttributeImpl.getValue(TagAttributeImpl.java:295) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:134) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:107) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:112) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at com.sun.faces.facelets.tag.jsf.core.ViewHandler.apply(ViewHandler.java:182) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]

at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:195) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at com.sun.faces.facelets.tag.jstl.core.ChooseOtherwiseHandler.apply(ChooseOtherwiseHandler.java:79) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.jstl.core.ChooseHandler.apply(ChooseHandler.java:110) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:220) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]

at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]

at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]

at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]

at com.patrac.filter.NoCacheFilter.doFilter(NoCacheFilter.java:46) [classes:]

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]

at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]

at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]

at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]

at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]

at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:897) [jbossweb-7.0.13.Final.jar:]

at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:626) [jbossweb-7.0.13.Final.jar:]

at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2039) [jbossweb-7.0.13.Final.jar:]

at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03]

11:56:31,845 WARN  [com.arjuna.ats.arjuna] (http--127.0.0.1-8443-7) ARJUNA012127: TwoPhaseCoordinator.afterCompletion - returned failure for SynchronizationImple< 0:ffffc0a80164:a75277:502fb8ae:9f6, org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization@b344a2 >

11:56:31,855 WARNING [com.patrac.controller.exceptionhandler.ViewExpiredExceptionHandler] (http--127.0.0.1-8443-7) Attempt to access an expired view: /index.xhtml from remote host: 127.0.0.1 
```

会话超时后，应销毁 WorkflowManager，并且来自客户端的下一个请求应导致创建新的 WorkflowManager。当 WorkflowManager 是托管 bean 时，这就是它工作得很好的方式。那么，为什么 JBoss 会尝试恢复之前被破坏的 WorkflowManager？我能做些什么来解决这个问题？

**编辑：**

```
@Override
public void handle() throws FacesException
{
    for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();)
    {
        ExceptionQueuedEvent event = i.next();
        ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
        Throwable t = context.getException();
        if (t instanceof ViewExpiredException)
        {
            ViewExpiredException vee = (ViewExpiredException) t;
            FacesContext fc = FacesContext.getCurrentInstance();
            Logger logger = Util.getLogger(this.getClass().getName());
            ExternalContext externalContext = fc.getExternalContext();
            String remoteHost = ((HttpServletRequest)externalContext.getRequest()).getRemoteHost();
            logger.warning("Attempt to access an expired view: " + vee.getViewId()
                            + " from remote host: " + remoteHost);
            NavigationHandler nav = fc.getApplication().getNavigationHandler();
            try
            {
                nav.handleNavigation(fc, null, "index?faces-redirect=true");
                fc.renderResponse();
            }
            finally { i.remove(); }
        }
    }
    // At this point, the queue will not contain any ViewExpiredEvents.
    // Therefore, let the parent handle them.
    getWrapped().handle();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:46:46.353

在进行网络搜索“IllegalStateException: JBAS014531”时，我遇到了[这个线程](https://community.jboss.org/message/723104 "缓存条目未使用")，它讨论了对 SFSB 的并发访问问题如何导致抛出异常。注意我的堆栈跟踪中的以下条目：

```
at com.patrac.controller.statemachine.WorkflowManager$$$view7.getCurrentWorkflow(Unknown Source) [Patrac-ejb.jar:] 
```

我开始研究会话超时后的当前工作流程——欢迎工作流程。果然，我看到在之前的代码重构之后，我无意中在 Welcome 工作流程中留下了以下未使用的注入，这没有引起注意：

```
@Inject WorkflowManager workflowManager; 
```

欢迎工作流扩展工作流，它已经引用了 WorkflowManager。因此，它似乎是尝试并发访问的可能候选者。删除未使用的 @inject 后，我​​没有注意到服务器日志中的警告。

# java - Android 我可以为这样的游戏使用什么引擎？

> ID：12020323
> 
> 赞同：-2
> 
> 时间：2012-08-18T16:37:50.850
> 
> 标签：java, android

我可以使用什么引擎来制作游戏？ [http://www.keepbusy.net/play.php?id=zombie-trailer-park](http://www.keepbusy.net/play.php?id=zombie-trailer-park)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:41:56.717

从这里您可以获得 8 个适用于 android 的开源游戏引擎。

[http://ntt.cc/2011/05/08/8-open-source-android-game-engines.html](http://ntt.cc/2011/05/08/8-open-source-android-game-engines.html)

您可以选择满足您要求的任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:44:33.080

我建议使用[AndEngine](http://www.andengine.org/blog/)。它用于 2D 游戏并且已经存在了一段时间。在写我自己的之前，我个人使用了它。它是开源的，并且有一些很好的示例可供您学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:49:59.143

如果您熟悉代码，我建议您从头开始编写这样的游戏。机制看起来非常简单，并且引擎不会提供您无法自己编写代码的功能。它会更灵活，你会通过直接解决一些问题来学习更多。只要确保你有一个干净的设计并保持它易于管理。

你似乎想要一些关于如何开始的指示，所以我会为你的游戏推荐一个基本框架。创建一个封装游戏对象的类。它应该有坐标、宽度、高度等；游戏中所有对象共有的任何字段或方法。使用派生类来实现所有特定行为。确保您了解 OOP 以及它是如何在 Java 中实现的。

您需要将游戏对象存储在列表或数组中。根据您的实现，为所有对象设置一个列表/数组可能是有意义的，或者可能是两个列表/数组，一个友好的，一个敌人的，或其他一些设置。你需要决定哪个最有意义。要回答有关距离的具体问题，在示例中，您可以只取僵尸和对方僵尸的 x 坐标之间的绝对差，看看它是否在攻击范围内。

# image - 字节数组到 IPictureDisp

> ID：12020332
> 
> 赞同：0
> 
> 时间：2012-08-18T16:38:29.267
> 
> 标签：image, vb6, menu, icons, bytearray

我在资源字典中有一个图像，我想将它作为带有 SetMenuBitMaps API 的菜单的图标，所以我在资源字典中有图像的字节数组，如何将字节转换为 IPictureDisp？我找到了这个 ：

```
 Private Declare Function CreateStreamOnHGlobal Lib "ole32.dll" (ByRef hGlobal As Any, ByVal fDeleteOnResume As Long, ByRef ppstr As Any) As Long
Private Declare Function OleLoadPicture Lib "olepro32.dll" (ByVal lpStream As IUnknown, ByVal lSize As Long, ByVal fRunMode As Long, ByRef riid As GUID, ByRef lplpObj As Any) As Long
Private Declare Function CLSIDFromString Lib "ole32.dll" (ByVal lpsz As Long, ByRef pclsid As GUID) As Long
Private Const SIPICTURE As String = "{7BF80980-BF32-101A-8BBB-00AA00300CAB}"
Public Function PictureFromArray(ByRef b() As Byte) As IPicture
      On Error GoTo errorhandler

      Dim istrm As IUnknown
      Dim tGuid As GUID

      If Not CreateStreamOnHGlobal(b(LBound(b)), False, istrm) Then
        CLSIDFromString StrPtr(SIPICTURE), tGuid
        OleLoadPicture istrm, UBound(b) - LBound(b) + 1, False, tGuid, PictureFromArray
      End If

      Set istrm = Nothing
      Exit Function
    errorhandler:
      Debug.Print "Could not convert to IPicture!"
    End Function 
```

但它对我不起作用，它总是返回“Nothing”。

# javascript - 从 javascript 发布到 chatter

> ID：12020334
> 
> 赞同：1
> 
> 时间：2012-08-18T16:38:37.527
> 
> 标签：javascript, rest, salesforce, salesforce-chatter

我想从 javascript 发布到 chatter。我正在创建的应用程序是一个浏览器扩展，因此它不特定于特定域。单击按钮时，javascript 会进行 oAuth 舞蹈，并发布到 chatter。这可能吗，因为会不会受到同源政策的影响。

你能发布一些链接，我可以从哪里开始并提供一些指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:32:16.593

您正在编写 Chrome 扩展程序吗？这篇文章可能会对您有所帮助-对于喋喋不休，您必须根据 SFDC 文档减少 api_scope ...

[http://www.anupshinde.com/salesforce-rest-api-chrome-extension](http://www.anupshinde.com/salesforce-rest-api-chrome-extension)

# java - 从休眠验证器获取错误并将其绑定到 Swing

> ID：12020342
> 
> 赞同：0
> 
> 时间：2012-08-18T16:40:05.980
> 
> 标签：java

我做了丰富的应用程序。我正在使用休眠验证器作为我的验证器。Emm 我有问题，关于如何从休眠验证器获取错误消息并将其绑定到我的挥杆。谢谢你的评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:43:16.537

为什么您不能得到错误消息并将其作为标签显示在 Swing UI 上？

[ConstraintViolation.getMessage()](http://docs.oracle.com/javaee/6/api/javax/validation/ConstraintViolation.html#getMessage%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:53:39.533

使用注释的消息字段将消息作为属性文件中的键提供。

假设属性文件包含以下

> test.username.empty = 提供的用户名不正确。

然后你可以提供

```
 @NotNull(message="test.username.empty")
 private String username 
```

现在您可以收集从属性文件中查找的所有消息并显示它们

# c - 将数组传递给函数并在 Arduino 中使用 sizeof

> ID：12020344
> 
> 赞同：6
> 
> 时间：2012-08-18T16:40:34.000
> 
> 标签：c, arduino

我是 Arduino [padawan](http://en.wiktionary.org/wiki/padawan#Noun)学习者。我想将一个字节数组传递给一个函数并获取数组的大小。

```
byte data[] = {
    B00000000,
    B00000001,
    B00000011,
    B00000111
};

Serial.println(sizeof(data)); // ----------------------> displays 4 
```

当我将它传递给函数`sizeof`时返回 2。如何让它在函数中也返回 4？

```
writeData(data);

void writeData(byte data[]) {
    Serial.println(sizeof(data)); // -------------------> displays 2
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T16:52:56.657

例如，当将数组作为参数传递时，编译器不再具有数组的大小。相反，数组作为指针传递，并且在`writeData`操作中`sizeof`获取指针的大小，而不是它指向的数组（或其他）。

# ios - LLVM、GCC 4.2 和 Apple LLVM 编译器 3.1 之间的区别

> ID：12020349
> 
> 赞同：10
> 
> 时间：2012-08-18T16:40:47.607
> 
> 标签：ios, compiler-construction, llvm, llvm-gcc

**LLVM GCC 4.2 和 Apple LLVM 编译器 3.1 之间的主要区别是什么？**

我对编译器相当陌生，因此感谢您提供任何帮助。此外，我对这两个编译器如何影响游戏性能特别感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T18:19:29.130

区别在于技术和速度。

当 Apple 开始从 GCC 的编译器和工具链过渡时，CLANG 还很年轻且有缺陷，因此 LLVM 被构建为 GCC 的后端，以促进其最终替代。因此，代码进入并由 GCC 编译成某种中间形式，但被发送到 LLVM 以提供最终的机器代码和打包。

最终，LLVM，尤其是 CLANG 已经足够成熟，可以彻底取代 GCC，这为编译提供了惊人的速度提升，并提高了机器代码输出的质量（尽管许多人认为 GCC 仍然以牺牲速度为代价产生更好的代码） .

但是为了解决您对游戏性能的担忧：虽然 CLANG 可能会提供“更好”的编译体验，但性能并不是编译器的工作。虽然优化和简化是编译过程的一部分，但人们仍然编写滞后游戏或产生浪费堆栈的无限循环这一事实表明，*性能*是你的工作。编译器只能做这么多，剩下的就看你了。编译器的类型或供应商也不会成就或破坏您的游戏，也不会影响帧速率或可用性。您应该阅读有关 ARM 体系结构的低级优化。一些关于[NEON](http://wanderingcoder.net/2010/07/19/ought-arm/)和[工具](http://llvm.org/pubs/2010-04-NeustifterProfiling.pdf)的文章比学习“为编译器优化”对你有好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:52:46.873

另一个区别：Clang 支持大部分**C++11**。GCC 4.2-Apple 将不支持 C++11。

# python - AppEngine/Python：为什么没有捕获到异常？

> ID：12020350
> 
> 赞同：3
> 
> 时间：2012-08-18T16:40:55.073
> 
> 标签：python, google-app-engine, try-catch, wsgi

我正在尝试编写一个 Google-Appengine 应用程序，该应用程序在禁用数据存储写入时会很好地失败

目前我的 main() 看起来像这样：

```
def main():
    make_datastore_readonly()
    try:
        run_wsgi_app(application)
    except CapabilityDisabledError:
        run_wsgi_app(NoWrite) 
```

* * *

如果我将 main 设置为：

```
def main():
    run_wsgi_app(application) 
```

引发异常时，我的应用程序会显示回溯。

* * *

如果我将 main 设置为：

```
def main():
    run_wsgi_app(NoWrite) 
```

它将正确显示我的错误消息（尽管对于每个请求）。

* * *

回到我修改过的 main 版本，这个：

```
def main():
    make_datastore_readonly()
    try:
        run_wsgi_app(application)
    except CapabilityDisabledError:
        run_wsgi_app(NoWrite) 
```

我仍然没有收到我的错误消息，而是得到如下所示的回溯：

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 703, in __call__
    handler.post(*groups)
  File "/Users/kevin/Sche/main.py", line 232, in post
    me.put();
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1074, in put
    return datastore.Put(self._entity, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py", line 579, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py", line 556, in PutAsync
    return _GetConnection().async_put(config, entities, local_extra_hook)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1553, in async_put
    return make_put_call(base_req, pbs, extra_hook)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1543, in make_put_call
    self.__put_hook, user_data)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1188, in make_rpc_call
    rpc.make_call(method, request, response, get_result_hook, user_data)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 519, in make_call
    self.__service, method, request, response, self.__rpc)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 207, in Call
    function(service, call, request, response)
  File "/Users/kevin/Sche/main.py", line 18, in hook
    raise CapabilityDisabledError('Datastore is in read-only mode')
CapabilityDisabledError: Datastore is in read-only mode 
```

所以，我的问题是，为什么没有捕捉到异常？

编辑：

这个函数来自[这个 StackOverflow 答案](https://stackoverflow.com/questions/2283824/app-engine-sdk-devserver-read-only-mode)

```
def make_datastore_readonly():
  """Throw ReadOnlyError on put and delete operations."""
  def hook(service, call, request, response):
    assert(service == 'datastore_v3')
    if call in ('Put', 'Delete'):
      raise CapabilityDisabledError('Datastore is in read-only mode') //Line 18
  apiproxy_stub_map.apiproxy.GetPreCallHooks().Push('readonly_datastore', hook, 'datastore_v3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:11:42.270

该`main`功能仅注册此应用程序。因此，异常不会在 main 函数中引发。因此，该`try ... catch`语句将不起作用。

处理这个异常的方法是定义一个新的 RequestHandler。然后，所有想要具有此功能的请求都应该来自新的 RequestHandler。

## 例如：

```
Class MyRequestHandler(RequestHandler):
    def get(self):
        try:
            self.get_handler()
        except CapabilityDisabledError:
            pass

class MyRequest(MyRequestHandler):
    def get_handler(self):
        # ....
        pass 
```

# jquery - Rails 3 JQuery排序选择列表

> ID：12020355
> 
> 赞同：0
> 
> 时间：2012-08-18T16:41:11.520
> 
> 标签：jquery, ruby-on-rails-3, coffeescript

我在 Rails 3 中使用 CoffeeScript 中的构建将项目从一个选择列表移动到另一个选择列表并返回。这适用于以下代码：

```
$ ->
   $('#add').click (event) ->
     $('#geo_country_exclude option:selected').remove().appendTo('#geo_country_include');  

   $('#remove').click (event) ->
     $('#geo_country_include option:selected').remove().appendTo('#geo_country_exclude'); 
```

选择列表的代码：

```
<%= select :geo, :country_exclude, @countries, {}, {:multiple => true, :size => 15} %>
<%= select :geo, :country_include, @countries, {}, {:multiple => true, :size => 15} %> 
```

问题是它将一个新项目附加到列表的末尾。我希望列表再次按字母顺序排序。我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:55:45.560

基本上，您需要将`<option>`s 从 target中拉出`<select>`，将选项添加到该数组，手动对其进行排序，然后将 target `<select>`s `<option>`s 替换为排序列表。jQuery 对这类事情没有多大帮助，但[低级 DOM 版本](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)并不是非常困难，如下所示：

```
exc = $('#geo_country_exclude')[0]
inc = $('#geo_country_include')[0]

by_option_value = (a, b) ->
    return +1 if(a.value > b.value)
    return -1 if(a.value < b.value)
    return  0

mv = (from, to) ->
    # to.options looks like an array and smells like an array but
    # it isn't an array so we employ the standard arrayification trick.
    opts = [].slice.call(to.options)
    # Move the <option>
    opts.push(from.options[from.selectedIndex])
    from.remove(from.selectedIndex)
    # Sort and replace.
    to.remove(0) for i in [ 0 ... to.options.length ]
    to.add(opt) for opt in opts.sort(by_option_value)

$('#add'   ).click (event) -> mv(exc, inc)
$('#remove').click (event) -> mv(inc, exc) 
```

您可能需要调整`by_option_value`比较功能，并且您可能希望在`<select>`移动后调整 s 中的选定项目，但您可以轻松地对其进行排序。

演示：http: [//jsfiddle.net/ambiguous/qRw3K/](http://jsfiddle.net/ambiguous/qRw3K/)

如果您需要处理多选，那么只需稍作修改即可`mv`：

```
mv = (from, to) ->
    opts = [].slice.call(to.options)
    while from.selectedIndex >= 0
        opts.push(from.options[from.selectedIndex])
        from.remove(from.selectedIndex)
    to.remove(0) for i in [ 0 ... to.options.length ]
    to.add(opt) for opt in opts.sort(by_option_value) 
```

您只需要将`opts.push`and包裹`from.remove`在一个`while`小循环中。

演示：http: [//jsfiddle.net/ambiguous/qRw3K/1/](http://jsfiddle.net/ambiguous/qRw3K/1/)

# c++ - 文字类型，无符号负数

> ID：12020359
> 
> 赞同：0
> 
> 时间：2012-08-18T16:41:27.433
> 
> 标签：c++, literals, unsigned

C++ Primer 说：

> 我们可以独立指定签名者和整数文字的大小。如果后缀包含 U，则文字具有无符号类型，因此带有 U 后缀的十进制、八进制或十六进制文字具有适合文字值的最小类型 unsigned int、unsigned long 或 unsigned long long

当一个人宣布

`int i = -12U;`

我理解的方式是 -12 被转换为`unsigned`自身的版本（`4294967284`），然后分配给`int`，由于翻转，结果是一个非常大的正数。

这似乎不会发生。请问我错过了什么？

`cout << i << endl; // -12`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:43:17.430

您将 unsigned int 分配回有符号 int，因此它会再次转换。

就像你这样做：

```
int i = (int)(unsigned int)(-12); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:43:43.590

`u`有效地比 更紧密地结合`-`。你得到`-(12u)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:25:38.727

`12`具有 int 类型和值 12。

`12U`具有 unsigned int 类型和值 12。

`-12U`具有 unsigned int 类型和值`std::numeric_limits<unsigned int>::max()`+ 1 - 12。

`int i = -12U;`应用实现定义的转换将 -12U 转换为 int 类型。

# java - Java，简化检查 int 数组是否包含 int

> ID：12020361
> 
> 赞同：110
> 
> 时间：2012-08-18T16:41:49.210
> 
> 标签：java, arrays, int, contains

基本上我的伙伴一直在说我可以通过使用不同的方法来检查一个 int 数组是否包含一个 int 来缩短我的代码，尽管他不会告诉我它是什么 :P。

当前的：

```
public boolean contains(final int[] array, final int key) {
    for (final int i : array) {
        if (i == key) {
            return true;
        }
    }
    return false;
} 
```

也尝试过这个，尽管由于某种原因它总是返回 false。

```
public boolean contains(final int[] array, final int key) {
    return Arrays.asList(array).contains(key);
} 
```

谁能帮帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-18T16:50:57.943

您可以简单地[`ArrayUtils.contains`](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#contains(int%5B%5D,%20int))从 Apache Commons Lang 库中使用。

```
public boolean contains(final int[] array, final int key) {     
    return ArrayUtils.contains(array, key);
} 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-12-31T05:52:06.293

这是Java 8解决方案

```
public static boolean contains(final int[] arr, final int key) {
    return Arrays.stream(arr).anyMatch(i -> i == key);
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-08-18T16:45:55.450

It's because `Arrays.asList(array)` returns `List<int[]>`. The `array` argument is treated as one value you want to wrap (you get a list of arrays of ints), not as vararg.

Note that it *does* work with object types (not primitives):

```
public boolean contains(final String[] array, final String key) {
    return Arrays.asList(array).contains(key);
} 
```

or even:

```
public <T>  boolean contains(final T[] array, final T key) {
    return Arrays.asList(array).contains(key);
} 
```

But you cannot have `List<int>` and autoboxing is not working here.

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-07-16T16:39:15.953

Guava 为原始类型提供了额外的方法。其中有一个 contains 方法，它采用与您相同的参数。

```
public boolean contains(final int[] array, final int key) {
    return Ints.contains(array, key);
} 
```

您不妨静态导入番石榴版本。

参见[Guava Primitives Explained](http://code.google.com/p/guava-libraries/wiki/PrimitivesExplained "番石榴原语解释")

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-08-18T16:50:00.330

另一种方式：

```
public boolean contains(final int[] array, final int key) {  
     Arrays.sort(array);  
     return Arrays.binarySearch(array, key) >= 0;  
} 
```

这会修改传入的数组。您可以选择复制数组并处理原始数组，即`int[] sorted = array.clone();`
，但这只是短代码的一个示例。运行时是`O(NlogN)`你的方式`O(N)`

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2014-12-16T13:13:39.623

我知道现在已经很晚了，但请尝试`Integer[]`代替`int[]`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-22T08:54:51.983

1.一次性使用

```
List<T> list=Arrays.asList(...)
list.contains(...) 
```

2.如果您使用多次，请使用 HashSet 来考虑性能。

```
Set <T>set =new HashSet<T>(Arrays.asList(...));
set.contains(...) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-26T13:15:34.673

您可以使用以下 Java 8 代码将原始 int 数组转换为整数数组列表，

```
List<Integer> arrayElementsList = Arrays.stream(yourArray).boxed().collect(Collectors.toList()); 
```

然后使用`contains()`方法检查列表是否包含特定元素，

```
boolean containsElement = arrayElementsList.contains(key); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-18T13:33:22.963

尝试这个：

```
public static void arrayContains(){
    int myArray[]={2,2,5,4,8};

    int length=myArray.length;

    int toFind = 5;
    boolean found = false;

    for(int i = 0; i < length; i++) {
        if(myArray[i]==toFind) {
            found=true;
        }
    }

    System.out.println(myArray.length);
    System.out.println(found); 
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-20T04:14:44.387

您可以使用`java.util.Arrays`类通过以下方法转换对象`T[?]`中的数组：`List<T>``contains`

```
Arrays.asList(int[] array).contains(int key); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-29T19:44:17.767

**这在java 8中有效**

```
public static boolean contains(final int[] array, final int key)
{
return Arrays.stream(array).anyMatch(n->n==key);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-16T14:48:08.610

```
private static void solutions() {
    int[] A = { 1, 5, 10, 20, 40, 80 };
    int[] B = { 6, 7, 20, 80, 100 };
    int[] C = { 3, 4, 15, 20, 30, 70, 80, 120 };

    List<Integer> aList = Arrays.stream(A).boxed().collect(Collectors.toList());

    List<Integer> cList = Arrays.stream(C).boxed().collect(Collectors.toList());
    String s = "";
    for (Integer a : C) {
        if (aList.contains(a) && cList.contains(a)) {
            s = s.concat(String.valueOf(a)).concat("->");
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-19T01:48:25.593

# Java 9+

```
public boolean contains(final int[] array, final int key) {
    return List.of(array).contains(key);
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-08-18T17:18:22.987

`.contains`根据您的 int 数组的大小，如果您使用集合而不是一次遍历数组一个元素，您将获得更好的性能：

```
import static org.junit.Assert.assertTrue;
import java.util.HashSet;

import org.junit.Before;
import org.junit.Test;

public class IntLookupTest {

int numberOfInts = 500000;
int toFind = 200000;
int[] array;

HashSet<Integer> intSet;

@Before
public void initializeArrayAndSet() {
    array = new int[numberOfInts];
    intSet = new HashSet<Integer>();
    for(int i = 0; i < numberOfInts; i++) {
        array[i] = i;
        intSet.add(i);
    }
}

@Test
public void lookupUsingCollections() {
    assertTrue(intSet.contains(toFind));
}

@Test
public void iterateArray() {
    assertTrue(contains(array, toFind));

}

public boolean contains(final int[] array, final int key) {
    for (final int i : array) {
        if (i == key) {
            return true;
        }
    }
    return false;
}
} 
```

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2012-08-18T17:15:42.123

尝试`Integer.parseInt()`这样做......

```
public boolean chkInt(final int[] array){
    int key = false;

    for (Integer i : array){

          try{

                   Integer.parseInt(i);
                   key = true;
                   return key;

             }catch(NumberFormatException ex){

                   key = false;

                   return key;

              }

     }
} 
```

# c# - 实体未验证

> ID：12020362
> 
> 赞同：1
> 
> 时间：2012-08-18T16:41:55.867
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我的 Designer.cs 如下，

```
namespace CeremonyApp
{
    . . .

   [EdmEntityTypeAttribute(NamespaceName="CeremonyDBModel", Name="GuestParty")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]    
    public partial class GuestParty : EntityObject
    {
          . . .
    }

   . . .
} 
```

我正在验证具有以下代码`(GuestParty)`的模型中的实体，`(Validation.cs)`

```
namespace CeremonyApp.Models
{    
    public class Validation
    {        
        [Required(ErrorMessage = "Testing")]        
        public String TableNo { get; set; }
    }

    [MetadataType(typeof(Validation))]
    public partial class GuestParty
    {
    }
} 
```

我的问题是，如果我把at放进`[MetadataType(typeof(Validation))]`去，它可以工作，但如果我把它放在这里，就像上面的代码一样。为什么 ？`Designer.cs``GuestParty class``Validation.cs`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:47:42.890

命名空间不同。将部分类和元数据移回命名空间 CeremonyApp。

# c - 多线程应用程序中的 printf 笑话？

> ID：12020366
> 
> 赞同：0
> 
> 时间：2012-08-18T16:42:29.010
> 
> 标签：c, pthreads, printf

下面的代码怎么能

```
while(1) {
  client_name_len = sizeof(struct sockaddr_in);
  newsockfd = accept(sockfd, (struct sockaddr *)&client_name, &client_name_len);
  if (newsockfd < 0) {
    perror("ERROR on accept");
    printf("Finished\n");
    close(sockfd);
    exit (EXIT_FAILURE);
  }
  printf("a:");
  pthread_t thread1;
  int *addr = (int*)malloc(sizeof(int));
  *addr = newsockfd;
  pthread_create( &thread1, NULL, &ProcessClient, (void*)addr);
} 
```

产生以下输出：

```
a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:ERROR on accept: Too many open files
a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:a:Finished 
```

问题是`perror("ERROR on accept")`,`printf("Finished\n")`和`printf("a:")`在同一个线程中执行，但输出是混合的。

ProcessClient 不输出任何内容，也不创建任何线程。 `sockfd`是一个标准的监听 tcp 套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:49:28.973

和是缓冲 I/O 到标准输出`printf("a:");`。`printf("Finished\n");`

`perror("ERROR on accept");`是无缓冲（或立即刷新）的 I/O 到 stderr。

所以在'ed`a:`之后出现的许多 '之前`ERROR on accept: Too many open files`实际上是`printf()`'ed，但是缓冲使它们稍后出现在控制台上。

有关解决问题的详细信息和方法，请参见[https://stackoverflow.com/a/3746795/12711](https://stackoverflow.com/a/3746795/12711)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:05:27.770

正如迈克尔指出的那样，第一个问题是您使用了两个不同的流（stdout 和 stderr），一个是缓冲的，另一个是无缓冲的。但是，您还将输出分解为多个 stdio 调用，这使其成为非原子的。我会建议将其替换为`perror`：

```
printf("ERROR on accept: %s\n", strerror_l(errno)); 
```

或将其他`printf`调用切换为使用`fprintf`on `stderr`，以便您在写入哪个流时保持一致。

然后，为了使其具有原子性，请`flockfile(f)`在函数的开头和`funlockfile(f)`返回之前调用（其中`f`替换为您选择使用的任何一个）`stdout`。`stderr`或者，如果您仍然想同​​时使用两者，则可以将它们都锁定...

# c# - C# DataGridView (CheckBox) 单元格单击多个回调

> ID：12020367
> 
> 赞同：3
> 
> 时间：2012-08-18T16:42:41.113
> 
> 标签：c#, datagridview, checkbox, callback, toggle

[C#，Visual Studio 2008，Windows 7 64]

我的课堂上有一个*DataGridView*。此数据网格视图使用*DataGridViewCheckBoxColumn*，因此每个单元格都包含一个复选框。

这是其中一行的屏幕截图：

![DataGridView 复选框](../Images/d30fda21d83992635d76ea51d0321777.png)

我希望能够检测用户是否选择了单元格（在单元格中的某个位置，但不在复选框的顶部）。我还想检测用户是否选中了该复选框。为此，我的代码必须为这两个事件设置回调：

```
this.CellClick += cellClick; // callback when the user selects a cell
this.CellContentClick += cellContentClick; // callback when the user selects a checkbox 
```

以下是回调方法：

```
 private void cellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        toggleCellCheck(e.RowIndex, e.ColumnIndex);
    }

    private void cellClick(object sender, DataGridViewCellEventArgs e)
    {
        toggleCellCheck(e.RowIndex, e.ColumnIndex);
    }

    private void toggleCellCheck(int row, int column)
    {
        bool isChecked = (bool)this[column, row].EditedFormattedValue;
        this.Rows[row].Cells[column].Value = !isChecked;
    } 
```

（*注意：*如您所见，*toggleCellCheck*方法获取复选框值并将其切换为选中->未选中或未选中->选中。）

当用户单击不是复选框的单元格中的任何位置时，只会触发一个回调，*cellClick*。随后调用*toggleCellCheck*方法并翻转复选框状态。

这是我想要的确切行为。

我遇到的问题是，当用户直接单击复选框时，**两个**事件都按以下顺序触发：*cellClick*然后*cellContentClick*。

执行的两个回调都会导致复选框*选中*状态在第一个回调之后切换，然后在第二个回调之后再次切换。最终结果当然是复选框*选中*状态没有改变。

有什么方法可以配置*DataGridView*类来阻止两个回调被触发？或者，有没有一种方法可以检测（在*cellContentClick*方法中）这是*第二个*回调，或者回调是通过单击复选框生成的，然后直接退出而不调用*toggleCellCheck*？

我在想类似以下的事情：

```
private void cellContentClick(object sender, DataGridViewCellEventArgs e)
{
    // if sender/sender child/etc. is of type checkbox then return because
    // _cellClick_ has already been called to change the checkbox checked property
    // something like the following:
    //
    // if (typeof(sender) == CheckBox) return;
    // else toggleCellCheck(e.RowIndex, e.ColumnIndex);
} 
```

谢谢！

简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:42:10.880

您不应该需要单元格内容单击处理程序 - 选中复选框时会调用单元格单击。

看来您的最终目标是使网格响应单击的单元格内容以及实际单击的复选框¹。

为此，只需使用以下内容附加到单元格单击事件：

```
void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1.Columns[e.ColumnIndex].Name == "checkboxcolumn")
    {
        Console.WriteLine("Click");
        bool isChecked = (bool)dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue;
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = !isChecked;
        dataGridView1.EndEdit();
    }
} 
```

* * *

^(1.)我建议不要进行这种 ui 修改 - DataGridView 等控件的默认行为已广泛传播并经过良好测试。更改它们通常是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:14:52.270

```
private void dataGridView2_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    DataGridViewCheckBoxCell dgvcell = (DataGridViewCheckBoxCell)dataGridView2[e.ColumnIndex, e.RowIndex]; 
    if ( ( Convert.ToBoolean(dataGridView2[e.ColumnIndex, e.RowIndex].Value ) == true ) )
             { 
                 dgvcell.Value = CheckState.Unchecked;
                 lst_box2.Items.Add(dataGridView2.Rows[e.RowIndex].Cells["ItemName"].Value.ToString());
                 lst_box1.Items.Remove(dataGridView2.Rows[e.RowIndex].Cells["ItemName"].Value.ToString());
            } 
            else 
            { 
                lst_box1.Items.Add(dataGridView2.Rows[e.RowIndex].Cells["ItemName"].Value.ToString());
                lst_box2.Items.Remove(dataGridView2.Rows[e.RowIndex].Cells["ItemName"].Value.ToString());
                dgvcell.Value = CheckState.Checked;
            } 

} 
```

# c - C将char数组打印为浮点数

> ID：12020369
> 
> 赞同：2
> 
> 时间：2012-08-18T16:43:08.727
> 
> 标签：c, floating-point, unions

我正在尝试将 4 个元素的 char 数组打印为浮点数。编译器（gcc）不允许我写`z.s={'3','4','j','k'};`main() 函数，为什么？

```
#include <stdio.h>

union n{
    char s[4];
    float x;
};
typedef union n N;

int main(void)
{
    N z;
    z.s[0]='3';
    z.s[1]='4';
    z.s[2]='j';
    z.s[3]='k';
    printf("f=%f\n",z.x);
    return 0;
} 
```

上面程序的输出是：`f=283135145630880207619489792.000000`，一个远大于浮点变量可以存储的数字；以科学计数法，输出应该是`4.1977085E-8`. 那么有什么问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T16:50:18.930

`z.s={'3','4','j','k'};`会将一个数组分配给另一个数组。C 不允许这样做，尽管您可以声明第二个和`memcpy`第一个。

单精度 IEEE 浮点可以存储的最大有限值是 3.4028234 × 10^38，因此 283135145630880207619489792.000000，大约为 2.8313514 × 10^26 绝对在范围内。

假设您的字符在其他方面是正确的，那么下意识的猜测是您的字节顺序错误。

编辑：如果从左到右取 34jk，因为在大端机器上是：

```
0x33 0x34 0x6a 0x6b
= 0011 0011, 0011 0100, 0110 1010, 0110 1011 
```

所以：

```
sign = 0
exponent = 011 0011 0 = 102 (dec), or -25 allowing for offset encoding
mantissa = [1] 011 0100 0110 1010 0110 1011 = 11823723 / (2^23) 
```

所以这个值大约是 4.2 × 10^-8，这就是你想要的。

在小端：

```
0x6b 0x6a 0x34 0x33 
= 0110 1011, 0110 1010, 0011 0100, 0011 0011

sign = 0
exponent = 110 1011 0 = 214 (dec) => 87
mantissa = [1]110 1010 0011 0100 0011 0011 = 15348787 / (2^23) 
```

所以这个值大约是 2.8 * 10^26，这是你的程序输出的。这是一个安全的结论，你在一个小端机器上。

然后总结：机器之间的字节顺序不同。你想以相反的方式使用你的字节——试试`kj43`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:57:47.147

你实际看到的是 {'k' 'j' '4' '3'}

# c# - 动态加载用户控件

> ID：12020376
> 
> 赞同：0
> 
> 时间：2012-08-18T16:43:58.517
> 
> 标签：c#, asp.net, web-services, rest

我正在尝试在 Web 服务中加载用户控件，但它不执行 Load_Page()。

我尝试使用：

```
HttpContext.Current.Server.Execute(page, text, false); 
```

但它返回一个 NullException。这是我的代码：

```
public string Controle(string url)
    {
        Page page = new Page();
        UserControl userControl = (UserControl)page.LoadControl(url);
        //userControl.EnableViewState = false;
        HtmlForm form = new HtmlForm();
        form.Controls.Add(userControl);
        page.Controls.Add(form);
        StringWriter text = new StringWriter();
        HtmlTextWriter htmltext = new HtmlTextWriter(text);
        userControl.RenderControl(htmltext);
        return text.ToString();
    } 
```

希望很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:12:21.157

您需要使用执行类似操作的方法初始化控件

> this.Load += Page_Load;

请参阅这篇文章，它准确地解释了实现这一目标需要做什么。请务必阅读说明部分；”***一个警告：*** ” [http://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx](http://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx) 这个相关的帖子也将能够提供帮助： [Page_Load 未在 UserControl 中触发](https://stackoverflow.com/questions/5083905/page-load-not-firing-in-usercontrol)

# .htaccess - 重定向匹配前缀模式的文件和文件夹

> ID：12020381
> 
> 赞同：2
> 
> 时间：2012-08-18T16:44:34.010
> 
> 标签：.htaccess, mod-rewrite

我正在尝试使用 .htaccess 文件将所有请求重定向到以 4 个数字（例如 2012）开头的目录中的子文件夹和子文件到另一个目录。

例如，

```
/results/2005-09-19-xxx/* to /event/2005-09-19-xxx/* 
```

和

```
/results/2005-09-20-file.ext to /event/2005-09-20-file.ext 
```

但不是

```
/results/anything-else/* 
```

从我查看的文档中，我相信我需要使用 RewriteCond 和 RewriteRule。我一直在努力寻找一种方法来匹配最初的 4 个数字，并且仍然在重定向的链接中使用它们。

我花了很多时间试图找到这个问题的解决方案，任何帮助或建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:10:02.500

你真的不需要重写条件，试试这个重写规则：

```
RewriteRule ^results/([0-9]{4}.*)$ /event/$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:50:04.980

这应该可以解决问题：

```
RewriteRule ^result/([0-9]{4})-([0-9]{2})-([0-9]{2})(.+)$ event/$1-$2-$3$4 [L] 
```

这种模式是： 4 个数字破折号 2 个数字破折号 2 个数字休息，以您可以在以后需要时轻松理解和操作的方式编写。符合模式的所有内容都将被重写 - 其余部分将照常工作

例子：

```
result/2012-02-02-abcd.ext 
```

符合模式并将被重写为

```
event/2012-02-02-abcd.ext 
```

# macos - 在 Mac OS 山狮上设置 Subversion 服务器（可以通过浏览器访问，但无法从 subversion 中签出）

> ID：12020382
> 
> 赞同：2
> 
> 时间：2012-08-18T16:45:01.537
> 
> 标签：macos, installation, osx-mountain-lion, svn-server

一些细节（也许对某些人有用）：

**板载**：mac mini + 山狮 + Server.app。

**问题**：我确实可以通过浏览器访问我的 subversion 存储库，但无法通过命令行访问它以进行结帐（例如）。

***我已经完成了***：

1.  **从 Mac OS Lion获取 mod_dav_svn.so**和mod_authz_svn.so**并将**其放入`/usr/libexec/apache2`

2.  接下来，在**/Library/Server/Web/Config/apache2/webapps中创建****com.site.svn.plist**：

     **> ```
    > <?xml version="1.0" encoding="UTF-8"?>
    > <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    > <plist version="1.0">
    > 
    > <dict> 
    >   <key>name</key>
    >   <string>com.site.svn</string>
    >   <key>includeFiles</key>
    >   <array>
    >       <string>/private/etc/apache2/svn_configs/svn_config.conf</string>
    >   </array>
    >     <key>requiredModuleNames</key>
    >   <array>
    >       <string>dav_svn_module</string>
    >       <string>authz_svn_module</string>
    >   </array>
    >   <key>sslPolicy</key>
    >   <integer>1</integer>
    >   </dict>
    > </plist> 
    > ```** 
***   **我已将****mod_dav_svn.so**和**mod_authz_svn.so**的LoadModule(s) 添加到**/Library/Server/Web/Config/apache2/httpd_server_app.conf**中：

    > ```
    > LoadModule dav_svn_module libexec/apache2/mod_dav_svn.so
    > LoadModule authz_svn_module libexec/apache2/mod_authz_svn.so 
    > ```

    *   **我创建了****/private/etc/apache2/svn_configs/svn_config.conf**：

    > ```
    > <Location /svn/repo1>
    > 
    >         DAV svn
    >         AuthName "Subversion auth"
    >         SVNPath /Users/someUser/Repositories/Repo1Repo
    > 
    >         <Limit GET HEAD OPTIONS CONNECT POST PROPFIND PUT DELETE PROPPATCH MKCOL COPY MOVE LOCK UNLOCK>
    >                 Require group repo1users
    >         </Limit>
    > 
    >         AuthType Basic
    >         Require group repo1users
    > 
    > </Location> 
    > ```

    *   **我已经**从终端执行：** 

 **> webappctl 启动 com.site.svn

之后我**可以**通过`https://site/svn/repo1`

但是当我试图颠覆结帐系统时，系统给了我：

 `> ````
> >>>svn co https://site/svn/repo1
> Authentication realm: <https://site:443> UserWebDAV Gateway
> Password for 'someUser': 
> svn: access to 'https://site/svn/repo1' forbidden 
> ````

 `**你知道我为什么会遇到这种情况吗？**

PS 权利

> ```
> /Users/someuser/Repositories
> /Users/someuser/Repositories/Repo1Repo
> /Users/someuser/Repositories/Repo1Repo/* 
> ```

是**777**，**所有者/组**- **_www:_www**

我已经习惯了-我阅读了[http://www.themacosxserveradmin.com/2011/01/lion-server-and-svn.html](http://www.themacosxserveradmin.com/2011/01/lion-server-and-svn.html)并尝试将其集成到山狮中。

**谢谢你的想法。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:29:26.210

花了几天时间处理同样的问题。虽然我的配置不完全相同，但应该足够接近以帮助您完成您正在尝试做的事情。能够将身份验证问题与为 Wiki 启用 WebDAV（在服务器应用程序中）相关联。如果您禁用 WebDAV 支持，那么一切都会开始工作。就我而言，我选择在自定义端口（8080 或 8443）上简单地在 Apache 中创建额外的侦听器，并将所有与 SVN 相关的配置指令放在那里，因此所有内容都本地化在一个地方。

祝你好运！``**

# windows-phone-7 - WP7 从异步 HttpWebRequest 获取返回值

> ID：12020385
> 
> 赞同：1
> 
> 时间：2012-08-18T16:45:25.280
> 
> 标签：windows-phone-7, asynchronous, httpwebrequest

我写了这段代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        HttpWebRequest request = SendRequests.CreateRequest(serverTextBox.Text);
        IAsyncResult result = request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);
    }

    private void ReadWebRequestCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        try
        {
            HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

            using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
            {
                string results = httpwebStreamReader.ReadToEnd();
                loginValue = Parser.ParseLoginValue(results);
            }
            myResponse.Close();
        }
        catch (WebException we)
        {
            //
        }
    } 
```

我此时的问题是，单击按钮后，我需要 BeginGetResponse 的返回值（此处为 loginValue）才能继续执行应用程序。我知道这违背了异步调用的全部意义，但是，有一种方法可以在继续主线程之前等待结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:04:25.693

不幸的是，您已经回答了自己的问题。在 Windows Phone 上，无法进行同步 Web 调用。

但你真的不需要。如果您的用户在等待来自网络的响应时确实无事可做，请使用进度条（或者更好，使用系统中的全局进度条尝试）拍打半透明覆盖并遵守。

相比之下，如果您正在等待来自互联网的同步调用返回（在移动设备上可能需要很长时间），UI 将被锁定，用户会认为应用程序已挂起（从技术上讲，这是真的）。

异步是你的朋友。玩得开心。

# c++ - 初始化多个指针时出现运行时错误

> ID：12020387
> 
> 赞同：0
> 
> 时间：2012-08-18T16:45:39.737
> 
> 标签：c++

这可能只是我对 c++ 的不理解，但为什么这段代码会给我一个运行时错误？如果我没有初始化 someInt2 或者我没有指定 aClass 有一个 int 成员，我不会收到错误消息。

```
using namespace std;

class aClass
{
  int someint;
  public:
  aClass()
  {
    someint=4;
  }
};

int bFunc()
{
  return 4;
}

aClass aFunc()
{
  aClass class1=aClass();
  return class1;
}

int main()
{
  int * someInt2;
  *someInt2=bFunc();
  aClass * thisClass;
  cout << "Got here" << endl;
  *thisClass=aFunc();
  cout << "Not here" << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:47:14.750

```
int * someInt2;
*someInt2=bFunc(); 
```

未定义的行为。你没有`someInt2`指出任何有意义的地方。

编辑：“似乎正常运行”是“未定义的行为”可能的事情之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:49:36.180

```
 int * someInt2; 
```

是一个未初始化的指针，但您正在尝试为其指向的内容分配一个值。您需要分配一些内存或简单地使用`int`变量来存储函数的返回值。

# iphone - 将文件下载到iphone中的应用程序目录

> ID：12020388
> 
> 赞同：0
> 
> 时间：2012-08-18T16:45:42.313
> 
> 标签：iphone, ipad, uiwebview, nsdata, writetofile

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:35:59.190

似乎您在此代码中多次执行相同的操作。例如，您创建一个新的 NSURLRequest 对象，即使已经在委托方法内部传递了一个对象？在创建新的 NSURLConnection 后，您还运行同步 dataWithContentsOfURL 方法吗？您还将一些数据附加到属性中，只是对该属性不做任何事情？

您可能想要做的是在 UIWebView 应该加载时创建一个新的异步 NSURLConnection 。从那里，允许 UIWebView 加载该页面。在您的委托方法内部，不是将数据附加到某个属性，而是将下载的数据附加到文件中。连接完成下载后，显示您的警报，通知用户数据已下载并保存。

# matlab - Need a method to store a lot of data in Matlab

> ID：12020389
> 
> 赞同：0
> 
> 时间：2012-08-18T16:45:46.993
> 
> 标签：matlab, file-io, large-data

I've asked this before, but I feel I wasn't clear enough so I'll try again.

I am running a network simulation, and I have several hundreds output files. Each file holds the simulation's test result for different parameters.

There are 5 different parameters and 16 different tests for each simulation. I need a method to store all this information (and again, there's a lot of it) in Matlab with the purpose of plotting graphs using a script. suppose the script input is parameter_1 and test_2, so I get a graph where parameter_1 is the X axis and test_2 is the Y axis.

My problem is that I'm not quite familier to Matlab, and I need to be directed so it doesn't take me forever (I'm short on time).

How do I store this information in Matlab? I was thinking of two options:

1.  Each output file is imported separately to a different variable (matrix)
2.  All output files are merged to one output file and imprted together. In the resulted matrix each line is a different output file, and each column is a different test. Problem is, I don't know how to store the simulation parameters Edit: maybe I can use a dataset?

So, I would appreciate any suggestion of how to store the information, and what functions might help me fetch the only the data I need.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:36:40.240

如果您仍然想尝试使用 matlab 解决此问题，您可以遍历所有文件并逐个导入它们。您可以使用该功能创建文件夹内容的列表

```
ls(name) 
```

你可以像这样导入数据：

```
A = importdata(filename) 
```

如果您的数据在 txt 文件中，您应该考虑这个[Prev Q](https://stackoverflow.com/questions/3584003/acquire-data-from-text-files-in-matlab?rq=1 "上一个？")

避免使您的工作区混乱的一个好策略是将它们全部导入一个矩阵中。因此，如果您有一个名为 VAR 的矩阵，那么 VAR{1,1}.{1,1} 可能是您放置测试结果的位置，而 VAR{1,1}.{2,1} 可能是您放置模拟的位置第一个文件的参数。我认为这比制作数据结构更简单。只需确保将信息统一放置在数组的相同索引中即可。您还可以通过参数与测试来组织您的 VAR 行 v col。

这更符合您的第一个建议

> 每个输出文件分别导入到不同的变量（矩阵）

您的第二个建议似乎没有必要，因为您可以遍历您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:29:05.717

您可以使用该命令`save`来存储您的数据。它非常方便，并且可以存储您的硬盘可以容纳的尽可能多的数据。

文档在那里： http: [//www.mathworks.fr/help/techdoc/ref/save.html](http://www.mathworks.fr/help/techdoc/ref/save.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:59:56.660

描述文本文件的格式。因为如果它具有系统格式，那么您可以`dlmread`在 matlab 中使用或类似的命令并读取矩阵中的文本文件。从那里，您可以轻松地进行绘图。如果您尝试在 excel 中执行此操作，它会比从文本文件中读取要慢得多。如果速度对您来说是个问题，我建议您不要使用 Excel。

# kineticjs - Kinetic JS 将画布放置在错误的位置

> ID：12020393
> 
> 赞同：0
> 
> 时间：2012-08-18T16:46:25.713
> 
> 标签：kineticjs

我正在编写一个基于 Web 的绘图应用程序并将其迁移到 kineticjs。我正在使用 [1] 中给出的示例

我遇到的问题是我在画布左侧的表格中有绘图控件，而 kineticjs 对此并不满意。以前，当我在 html 中声明自己的画布时，我使用了：

```
<div id="design">
  <canvas id="canvas" width="600" height="250" style="border:1px solid black;">
    <p>Sorry: Browser does not support Graphics Canvas</p>
  </canvas>
</div> 
```

并使用 css 将其显示为一个块，向左浮动，使其位于绘图控件旁边。为了转移到 Kineticjs，我删除了 canvas 元素，并保持原样，使用完全相同的 css 控制它。现在在 Java 脚本中：

```
var stage = new Kinetic.Stage({
      container: "design",
      width: 578,
      height: 200
    }); 
```

Kinetic完全糊涂了。我已经从 [1] 复制了示例代码，我得到了一个带有三角形和圆形的画布，但是画布离右边很远，鼠标事件的热点位于页面的中心，在不同的位置. 因此，Kinetic 认为形状所在的位置和绘制它们的位置是两个不同的位置，两者都不在绘图控件旁边。

[1] [http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:07:03.783

KineticJS 实际上在您的“设计”元素中创建画布，因此请确保您已删除与全局画布样式和设计 div 的子项相关的所有样式。

# c# - 使用 doDynamicCompression 时从 byte[] 获取 HTML 字符串

> ID：12020394
> 
> 赞同：0
> 
> 时间：2012-08-18T16:46:26.713
> 
> 标签：c#, asp.net-mvc-3

我有一个响应过滤器，我使用以下代码从字节数组中获取 HTML 字符串。

```
public override void Write(byte[] buffer, int offset, int count) {
    var html = Encoding.UTF8.GetString(buffer);
    // do stuff
} 
```

如果我像下面的代码在 web.config 中将 doDynamicCompression 设置为 true，则字符串如下[所示](http://cl.ly/IoZn)

```
 <system.webServer>
    <urlCompression doDynamicCompression="true" /> 
```

有没有一种安全的方法来获取可以压缩和不压缩的 HTML 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:27:51.940

您可以使用它`GZipStream`来解压缩内容，但是由于您随后在响应过滤器中处理结果，因此您不再有压缩（但您有标题说您这样做），因此您必须进行压缩它的工作再次。

这意味着您失去了自动为您完成它的所有优势。

出于这个原因，我建议您编写自己的过滤器来自己处理压缩（我发现的一个问题是您不想在刷新过滤器时刷新使用的 gzipstream，尽管您仍然应该刷新输出流）。

（如果一大段文本以块的形式发送并且块以字符的方式结束，那么您的代码将如何处理它？）

# debian - 在 debian 中打开/转发端口

> ID：12020396
> 
> 赞同：0
> 
> 时间：2012-08-18T16:46:42.583
> 
> 标签：debian, portforwarding

我想将我的vps（debian）中的postgres从我的电脑与pgadmin3连接起来。我的问题是5432端口没有打开！我试图用这个命令打开它

```
iptables -A INPUT -p tcp --dport 5432 -j ACCEPT 
```

但我的问题没有解决！

```
aminpy@lenovo ~ $ telnet vps_ip 5432
Trying vps_ip...
telnet: Unable to connect to remote host: Connection refused 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:42:05.897

向互联网上的每个人开放该端口可能不是一个好主意。我会改用 SSH 端口转发，它将通过加密隧道透明地传递所有数据。使用这样的命令：

```
ssh -L 15432:localhost:5432 vps-host 
```

然后，与您机器上端口 15432 的连接将转发到 vps-host 上的端口 5432。请注意，命令中的 localhost 是从 vps-host 看到的主机名，而不是您的客户端计算机。

有关更多信息，请参阅 ssh 的手册页。

# git - Git - 从一个远程仓库拉取，推送到另一个：我可以推送遥控器的名称吗？

> ID：12020399
> 
> 赞同：9
> 
> 时间：2012-08-18T16:46:50.033
> 
> 标签：git, version-control, git-remote

我希望将 git 与多个远程存储库一起使用。我有我的中央 git 服务器（又名`origin`），以及我的本地开发机器。我想做的是从 kernel.org 的 git repo 中下载最新的 linux 内核。然后我将进行一些更改，然后将整个修改后的 repo 推送到我自己的 git 服务器上。

我已经成功地做到了这一点（只需执行几次 git remote add ——一次用于原点，一次用于 kernel.org）。但是，如果我从头开始克隆源，我无法将 kernel.org 视为远程。

有没有办法推送`remote add`命令？还是每次我希望从 kernel.org 中提取更改（在新机器上），我是否必须手动添加它？

此外，当我创建本地分支时，我让它跟踪来自 kernel.org 的远程分支。由于我在新克隆上看不到 kernel.org 作为远程，这是否意味着该分支不再跟踪 kernel.org？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:54:35.153

```
git push origin --mirror 
```

会将所有本地参考推送到原点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:05:54.377

如果您每次都克隆，您将丢失该存储库配置中的内容。这包括`reflog`、`stash`和仅举几例`remotes`。`rerere cache`不要这样做。推拉不会移动这些人工制品。你从推拉中得到的只是引用和满足它所需的对象。远程设置不会被传播。克隆是每次回购操作一次。您实际上根本不能使用克隆。`git init`您可以使用然后手动添加遥控器，`git remote add`然后创建一个空仓库`git fetch`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:12:11.693

正如其他答案中所述，我想要做的事情并不能真正在 Git 中完成（共享遥控器）。所以我打算做的是避免在开发人员机器上需要 3rd 方遥控器。我将创建一个与 kernel.org 远程分支相同的本地分支。然后我会将这个本地分支推送到我的 git 服务器（源）。然后我将创建一个 cron 脚本，它将：

*   克隆我在上面创建的分支。
*   为 kernel.org 添加一个遥控器
*   执行 git pull 以更新分支
*   添加、提交和推送

这意味着我将在我自己的 git 服务器上拥有 kernel.org 分支的副本，可以在我们的本地团队中正常跟踪它。然后所有合并都可以正常进行...

你认为呢？

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T23:58:51.183

“共享遥控器”并不完全可能。不过你可以试试这个。

1.  将 shell 脚本放在`scripts/`repo 的根（或）目录中。例如，称它为`git-bootstrap`.

2.  在脚本中，添加遥控器，如下所示：

    #!/usr/bin/env bash

    git 远程添加上游 git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git

    # 请注意，您不需要添加`origin`克隆时设置的遥控器。

3.  在新机器上克隆后，运行`git-bootstrap`脚本。

# javascript - 如何在不使用 Javascript 的情况下实现此布局？

> ID：12020401
> 
> 赞同：1
> 
> 时间：2012-08-18T16:47:02.157
> 
> 标签：javascript, css

我想要一个基本的全宽布局，右侧有一个 250 像素的侧边栏。这大致是我想要的：

```
<-------Content-------><--250px sidebar-->
<---------------100% width---------------> 
```

如果没有 Javascript 或表格，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:54:17.190

```
<div style="float: left">
  ..... content ......
<div>
<div style="float: right; width: 250px;">
 ..... sidebar .....
</div>
<div class="clear"></div>
... other content 
```

这是 class="clear" 的 CSS：

```
div.clear {
    clear:both;
} 
```

当你看到你有多少空间时，你可以设置第一个 div 的宽度。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:55:32.527

是的当然：

见[http://jsfiddle.net/whTwg/4/](http://jsfiddle.net/whTwg/4/)

HTML：

```
<div id="wrapper">
    <div id="sidebar-wrapper">
        <div id="sidebar">Sidebar</div>
    </div>
    <div id="main-wrapper">
        <div id="main">Main</div>
    </div>
</div> 
```

CSS：

```
#wrapper{
    overflow:hidden;
}
#main-wrapper{
    overflow:hidden;
}
#sidebar-wrapper{
    float:right;
    width:250px;
    max-width:50%;/* You should set a max-width */
}
/*Here you can add borders, paddings and margins */
#main{
    background:#aaf;
    border:10px solid blue;
}
#sidebar{
    background:#faa;
    border:10px solid red;
} 
```

注意：`#wrapper{overflow:hidden}`您可以`<div style="clear:both"></div>`在`main-wrapper`.

**编辑**：

你是对的，我忘了补充`#main-wrapper{overflow:hidden;}`。我已经修复了链接和代码。

# c# - 将命令行参数传递给 Beyond Compare

> ID：12020403
> 
> 赞同：3
> 
> 时间：2012-08-18T16:47:08.570
> 
> 标签：c#, beyondcompare

我有一个文件列表`dataGridView`，我希望能够从中选择 2 个（我可以弄清楚如何检查 selectedRows 计数）并将这些文件传递给 Beyond Compare 3 进行比较。我浏览了他们的支持页面，但找不到这样做的方法。

在程序中，我需要打开应用程序 (BC3) 并将参数中的 2 个文件路径传递给应用程序以开始比较。

我只是`System.Diagnostics.Process.Start(bc3.exe path)`用来推出无与伦比的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T16:59:08.697

查看他们的[支持页面](http://www.scootersoftware.com/support.php?zz=kb_vcs)以配置版本控制系统。一般语法似乎是

> "C:\Program Files\Beyond Compare 3\bcomp.exe" %1% %2% /lefttitle="%3%" /righttitle="%4%"

所以看起来你需要传递四个参数，分别是左右文件，然后是左右标题。所以你会想要使用[两个参数](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)的形式`Start`

```
System.Diagnostics.Process.Start("C:\Program Files\Beyond Compare 3\bcomp.exe",
     "file1.txt file2.txt /lefttitle=\"foo\" /righttitle=\"bar\"") 
```

我目前没有安装BC3，所以我没有测试过上面的，但它应该非常接近。

关于将 BC 与 git、svn 等集成的 SO，还有其他各种问题。它们将为您提供从命令行启动 BC 的其他示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T17:06:48.020

以下对我有用。

```
string bc3 = @"C:\Program files (x86)\Beyond Compare 3\bcompare.exe";

Process.Start(bc3, @"c:\temp\File1.cs c:\temp\File2.cs" ); 
```

或者如果您的文件名中有空格

```
Process.Start(bc3, @"""c:\temp\File 1.cs"" ""c:\temp\File 2.cs""" ); 
```

# c++ - 如何克服 C++ 对嵌入式系统缺乏工具支持？

> ID：12020404
> 
> 赞同：9
> 
> 时间：2012-08-18T16:47:13.373
> 
> 标签：c++, real-time

**问题不在于 Linux 内核。这也不是 C 与 C++ 的辩论。**

我做了一项研究，在我看来，C++ 在嵌入式系统的异常处理和内存分配方面缺乏工具支持：

[为什么linux内核没有用C++实现？](https://stackoverflow.com/q/520068/341970) 除了公认的答案，另请参阅[Ben Collins 的答案](https://stackoverflow.com/a/520614/341970)。

[C++ 上的 Linus Torvalds](http://harmful.cat-v.org/software/c++/linus)：

> “[...] 任何为 C++ 设计内核模块的人都是 [...]
> (b) 一个看不到自己在写什么的 C++ 顽固分子，反正就是 C”
> 
> “ - 整个 C++ 异常处理的东西从根本上被破坏了。对于内核来说*尤其如此*
> `。 - 任何喜欢将内存分配之类的东西隐藏在背后的编译器或语言对于内核来说都不是一个好的选择。”`

 `[联合打击战斗机 C++ 编码标准](http://www.stroustrup.com/JSF-AV-rules.pdf)：

> “不得使用 AV Rule 208 C++ 异常”

* * *

1.  异常处理和内存分配是 C++ 显然缺乏工具支持的唯一点（在这种情况下）吗？

2.  要解决异常处理问题，是否必须在异常被抛出后直到被捕获的时间提供限制？

3.  你能解释一下为什么内存分配是个问题吗？如何克服这个问题，必须做什么？

*正如我所看到的，在这两种情况下，都必须在编译时*为发生的不平凡的事情提供上限，并且取决于运行时的事情。

* * *

**回答：**

1.  不，动态演员表也是一个问题，但[它已经解决了](http://www.stroustrup.com/fdc_jcse.pdf)。

2.  基本上[是](http://www.stroustrup.com/abstraction-and-machine.pdf)的。必须通过分析所有抛出路径来限制处理异常所需的时间。

3.  [请参阅嵌入式系统编程](http://www.stroustrup.com/Programming/25_embedded.ppt)中幻灯片“如何在没有新事物的情况下生活”中的解决方案。简而言之：预分配（全局对象、堆栈、池）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T17:06:47.017

嗯，有几件事。首先，您必须记住，STL 完全建立在 OS 例程、C 标准库和动态分配之上。当您编写内核时，没有动态内存分配给您（您正在提供它），没有 C 标准库（您必须提供一个构建*在内核之上的*库），并且您正在提供系统调用。还有一个事实是，C 与程序集的互操作非常好且容易，而 C++ 与程序集的交互非常困难，因为 ABI 不一定是常量，名称也不一定。由于名称修饰，您会获得全新的复杂性。

然后，您必须记住，在构建操作系统时，您需要了解和控制内核使用的内存的各个方面。在 C++ 中，有很多隐藏结构是您无法控制的（vtables、RTTI、异常），它们会严重干扰您的工作。

换句话说，Linus 的意思是，使用 C 语言，您可以轻松理解正在生成的程序集，并且非常简单，可以直接在机器上运行。尽管 C++ 可以，但您总是需要设置相当多的上下文，并且仍然需要做一些 C 来接口程序集和 C。另一个原因是在系统编程中，您需要确切地知道方法是如何被调用的。C 具有非常详细的 C 调用约定，但在 C++ 中，您必须`this`处理名称修改等。

简而言之，这是因为 C++ 无需您请求即可完成工作。

根据@Josh 的评论，C++ 在你背后做的另一件事是构造函数和析构函数。它们增加了进入和退出堆栈帧的开销，最重要的是，使程序集互操作更加困难，因为当您销毁 C++ 堆栈帧时，您必须调用其中每个对象的析构函数。这很快就会变得丑陋。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-18T20:14:00.777

为什么某些内核在其代码库中拒绝 C++ 代码？政治和偏好，但我离题了。

现代操作系统内核的某些部分是用 C++ 的某些子集编写的。在这些子集中，主要是异常和 RTTI 被禁用（有时也不允许多重继承和模板）。

在 C 语言中也是如此。某些特性不应该在内核环境中使用（例如 VLA）。

当我们谈论内核代码（或嵌入式代码）时，除了异常和 RTTI 之外，C++ 中的某些特性受到了严厉的批评。这些是 vtable 和构造函数/析构函数。他们在引擎盖下带来了一些代码，这似乎被认为是“坏的”。如果你不想要一个构造函数，那么就不要实现一个。如果您担心使用带有构造函数的类，那么也要担心必须用来初始化结构的函数。C++ 的好处是，除了忘记释放内存之外，您真的不能忘记使用 dtor。

但是 vtables 呢？

当您实现一个包含扩展点的对象时（例如，一个 linux 文件系统驱动程序），您实现的就是一个带有虚拟方法的类。那么，为什么有一个 vtable 这么糟糕呢？当您对 vtable 所在的页面有特定要求时，您必须控制此 vtable 的放置。据我回忆，这与linux无关，但在windows下，代码页可以被分页，当你从一个太高的irql调用一个分页函数时，你会崩溃。但是你真的必须注意你调用了什么函数，当你处于高 irql 时，不管它是什么函数。如果您在这种情况下不使用虚拟呼叫，您也不必担心。在嵌入式软件中，这可能会更糟，因为（很少）您需要直接控制代码所在的代码页，

那么为什么这么多人如此坚持“在内核中使用 C”呢？

因为他们要么被工具链问题烧毁，要么被过度热情的开发人员在内核模式下使用最新的东西烧毁。

可能内核模式的开发者比较保守，C++是个太新奇的东西……

* * *

为什么内核模式代码中不使用异常？

因为他们需要为每个函数生成一些代码，在代码路径中引入复杂性并且不处理异常对于内核模式组件是不利的，因为它会杀死系统。

在 C++ 中，当抛出异常时，堆栈必须展开，并且必须调用相应的析构函数。这至少涉及一些开销。这几乎可以忽略不计，但确实会产生成本，这可能不是您想要的。（请注意，我不知道展开表的实际成本是多少，我想我读到没有异常运行时没有成本，但是......我想我必须查一下）。

不能抛出异常的代码路径可以更容易推理，然后可能。所以 ：

```
int f( int a )
{
   if( a == 0 )
      return -1;

   if( g() < 0 )
      return -2;
   f3(); 

   return h();
} 
```

在这个函数中，我们可以推断每条退出路径，因为我们可以很容易地看到所有返回，但是当启用异常时，函数可能会抛出，我们不能保证函数采用的实际路径是什么。这是代码的确切点可能会做一些我们无法立即看到的事情。（当启用异常时，这是糟糕的 C++ 代码）。

第三点是，您希望用户模式应用程序崩溃，当发生意外情况时（例如内存耗尽），用户模式应用程序应该崩溃（释放资源后）以允许开发人员调试问题或至少获得一个好的错误信息。您永远不应该在内核模式模块中有未捕获的异常。

请注意，这一切都可以克服，Windows 内核中存在 SEH 异常，因此第 2+3 点在 NT 内核中并不是真正的好点。

* * *

内核中的 C++ 没有内存管理问题。例如，NT 内核头文件为 new 和 delete 提供重载，它允许您指定分配的池类型，但在其他方面与用户模式应用程序中的 new 和 delete 完全相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T19:57:10.243

我真的不喜欢语言战争，并且投票决定再次关闭它。但不管怎么说...

> 嗯，有几件事。首先，您必须记住，STL 完全建立在 OS 例程、C 标准库和动态分配之上。当您编写内核时，没有动态内存分配给您（您正在提供它），没有 C 标准库（您必须提供一个构建在内核之上的库），并且您正在提供系统调用。还有一个事实，即 C 与程序集的互操作非常好且容易，而 C++ 与程序集的交互非常困难，因为 ABI 不一定是恒定的，名称也不一定是恒定的。由于名称修饰，您会获得全新的复杂性。

不，使用 C++，您可以声明具有`extern "C"`（或可选`extern "assembly"`）调用约定的函数。这使得名称与同一平台上的其他所有内容兼容。

> 然后，您必须记住，在构建操作系统时，您需要了解和控制内核使用的内存的各个方面。在 C++ 中，有很多隐藏结构是您无法控制的（vtables、RTTI、异常），它们会严重干扰您的工作。

编写内核功能时必须小心，但这不仅限于 C++。当然，您不能将`std::vector<byte>`其用作内存分配的基础，但也不能`malloc`用于此目的。您不必为所有 C++ 类使用虚函数、多重继承和动态分配，对吗*？*

> 换句话说，Linus 的意思是，使用 C 语言，您可以轻松理解正在生成的程序集，并且非常简单，可以直接在机器上运行。尽管 C++ 可以，但您总是需要设置相当多的上下文，并且仍然需要做一些 C 来接口程序集和 C。另一个原因是在系统编程中，您需要确切地知道方法是如何被调用的。C 有非常详细的 C 调用约定，但是在 C++ 中，你需要处理这个，名称修改等。

Linus 可能声称他可以发现每个调用`f(x)`并立即看到它调用`g(x)`,`h(x)`和`q(x)`20 层深度。仍然`MyClass M(x);`是一个很大的谜，因为它可能在他背后调用一些未知的代码。把我弄丢了。

> 简而言之，这是因为 C++ 无需您请求即可完成工作。

如何？如果我为一个类编写构造函数和析构函数，那是因为我**要求**执行代码。不要告诉我C可以在*不*执行一些代码的情况下神奇地复制一个对象！

> 根据@Josh 的评论，C++ 在你背后做的另一件事是构造函数和析构函数。它们增加了进入和退出堆栈帧的开销，最重要的是，使程序集互操作更加困难，因为当您销毁 C++ 堆栈帧时，您必须调用其中每个对象的析构函数。这很快就会变得丑陋。

构造函数和析构函数不会在你背后添加代码，它们仅在需要时才会出现。只有在需要时才调用析构函数，例如在需要释放动态内存时。不要告诉我没有这个 C 代码可以工作。

* * *

Linux 和 Windows 都缺乏对 C++ 的支持的一个原因是，很多从事内核工作的人早在 C++ 可用之前就已经在这样做了。我看到来自 Windows 内核开发人员的帖子认为实际上并不需要 C++ 支持，因为用 C++ 编写的设备驱动程序*非常少。*第 22 条军规！

* * *

> 异常处理和内存分配是 C++ 显然缺乏工具支持的唯一点（在这种情况下）吗？

在没有妥善处理的地方，不要使用它。您不必到处*使用*多重继承、动态分配和抛出异常。如果返回错误代码有效，那很好。去做！

> 要解决异常处理问题，是否必须在异常被抛出后直到被捕获的时间提供限制？

不，但是您*不能*在内核中使用应用程序级别的功能。使用 a 实现动态内存`std::vector<byte>`不是一个好主意，但谁会真正尝试呢？

> 你能解释一下为什么内存分配是个问题吗？如何克服这个问题，必须做什么？

*在实现*内存管理的函数下面的层上使用取决于内存分配的标准库功能 将是一个问题。`malloc`使用调用来 实现`malloc`同样愚蠢。但谁会尝试呢？`

# drupal - 如何主题化数组的元素？

> ID：12020409
> 
> 赞同：0
> 
> 时间：2012-08-18T16:47:43.753
> 
> 标签：drupal

我在 Drupal 7 安装中有这个数组，它超出了属于特定词汇 id 的术语列表：

```
<?php print render($content['taxonomy_vocabulary_3']); ?> 
```

现在，它将结果输出到列表中，我想在逗号分隔的行中输出它。

现在，我想我可以用 foreach 语句来做到这一点？

[在阅读文档](http://api.drupal.org/api/drupal/modules%21taxonomy%21taxonomy-term.tpl.php/7)后，我已经尝试过了，但它什么也没输出：

```
foreach($taxonomy_vocabulary_3 as $id=>$tag) {
echo "$tag, " ;
} 
```

我查看了 Devel 模块告诉我的关于该数组的内容，它向我展示了这一点：

```
taxonomy_vocabulary_3 (Array, 1 element)
    und (Array, 2 elements)
        0 (Array, 1 element)
            tid (String, 3 characters ) 141
        1 (Array, 1 element)
            tid (String, 3 characters ) 320 
```

但正如您所看到的，它在每种情况下都显示术语 id，而不是术语名称......

你有什么建议？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:00:45.633

你得到的是一个构建数组 - 这意味着

```
$content['taxonomy_vocabulary_3']['#theme'] 
```

将是用于呈现词汇表的主题函数。如果你想改变输出，你有两个很好的解决方案。

*   覆盖主题中的标准主题函数——这将改变对该主题函数的所有调用的输出——在这种情况下，所有词汇表的呈现方式。
*   将值更改`#theme`为您喜欢的主题功能 - 这可能是您在主题中定义的自定义主题功能。

有关如何呈现术语的帮助，您可以查看原始主题功能的实现方式 - 您可以查看[Drupal API 文档](http://api.drupal.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T05:09:20.600

您可以加载该术语，然后打印它的标题。

```
foreach($vocabulary as $tid) {
  $term = taxonomy_term_load($tid);
  // print whatever you want from this object.
  print $term->title . ', '; 
} 
```

[taxonomy_term_load](http://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_term_load/7 "taxonomy_term_load")

# python - 在python中对多级dict进行排序

> ID：12020410
> 
> 赞同：3
> 
> 时间：2012-08-18T16:47:52.313
> 
> 标签：python, sorting, dictionary

我需要按“sales_min”键的值对以下字典进行排序：

```
mydict = {
    'NATION': {'sales_max': 1000, 'sales_min': 500, ...}, 
    'LOCAL':  {'sales_max': 250, 'sales_min': 0, ...},
    'REGION': {'sales_max': 500, 'sales_min': 250, ...}, 
    ...
} 
```

我还没有找到一个很好的方法来做到这一点。任何建议表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T16:51:31.780

```
>>> collections.OrderedDict(sorted(mydict.iteritems(), key=lambda (k, v):
       v['sales_min']))
OrderedDict([('LOCAL', {'sales_max': 250, 'sales_min': 0}), ('REGION', {'sales_max': 500, 'sales_min': 250}), ('NATION', {'sales_max': 1000, 'sales_min': 500})]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T16:49:29.910

请注意，您实际上无法对字典进行排序，因为字典没有定义的顺序。但是您可以将其转换为排序列表：

```
sorted(mydict.items(), key = lambda x: x[1]['sales_min']) 
```

他们 lambda 从`items()`列表中获取一个元素并返回销售最小值。通过将此函数作为关键参数传递，python 将按此排序。

# c++ - 在这种情况下如何重载“+”运算符，

> ID：12020416
> 
> 赞同：-2
> 
> 时间：2012-08-18T16:48:56.760
> 
> 标签：c++, visual-studio, visual-c++, visual-c++-2005

由于此错误，我试图重载 + 运算符：

> tools.cpp(147) : error C2679: binary '+' : no operator found 它采用'CSchemaString' 类型的右手操作数（或没有可接受的转换）

代码是：

```
// I TRIED THIS TO OVERLOAD + OPERATOR
CSchemaString operator +(const CVisuComm& CVisuComm::TabCCUImess, 
                         const CSchemaString&       GetPriority);

//THE CODE AT WHICH THE ERROR IS RETURNED, 
//error C2679: binary '+' : no operator found which takes 
//a right-hand operand of type 
//'CSchemaString' (or there is no acceptable conversion)
CVisuComm::TabCCUImess[CVisuComm::nbCCUImess++]=
                        "RECONFIGURATION SOLUTION N° " +config.GetPriority();

//THE VARIOUS TYPES ARE
//CVisuComm-------class CVisuComm
//TabCCUImess-----static CString 
//nbCCUImess------static int nbCCUImess
//config----------CConfig_State_ChangeType 
//GetPriority-----CSchemaString 
```

但它会引发同样的错误

> 错误 C2751：“CVisuComm::TabCCUImess”：无法限定函数参数的名称

所以请提出正确的方法来重载运算符。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:33:06.053

第二条错误消息为您提供了线索：`the name of a function parameter cannot be qualified`

您的第一个参数名称应该只是一个名称。目前它是用类名限定的。

代替：`const CVisuComm& CVisuComm::TabCCUImess`

也许应该是：`const CVisuComm& Comm`

# java - 当一个对象被分配给另一个对象时会发生什么

> ID：12020417
> 
> 赞同：9
> 
> 时间：2012-08-18T16:48:59.067
> 
> 标签：java, object

```
public class DrumKitTestDrive {
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Echo e1 = new Echo();
    Echo e2 = new Echo();
//      **e2 = e1;**

    int x=0;
    while( x < 4 ){
        e1.hello();
        e1.count = e1.count + 1;
        if(x==3){
            e2.count = e2.count + 1;
        }
        if(x>0){
            e2.count = e2.count + e1.count;
        }
        x = x + 1;
    }
    System.out.print(e2.count);
    }
}

class Echo {
    int  count = 0;

    void hello(){
        System.out.println("Hellooooo....");
    }
} 
```

此代码的输出将是：

```
Hellooooo....
Hellooooo....
Hellooooo....
Hellooooo....
10 
```

但是，如果我在运行代码时删除注释，`// e2= e1;`系统将打印*24*而不是*10*。我不明白为什么会这样？

我的理解是系统只会将实例的值复制`e1`到`e2`实例中。如果系统会这样做，结果将保持不变，因为两个对象属于同一类。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-18T16:51:35.353

> 我的理解是系统只会将 e1 实例的值复制到 e2 实例中。

不，当你`e2 = e1`复制对象*引用*时——你不是在复制对象——所以变量`e1`和`e2`都指向*同一个对象*。

因此，当您进行增量时，它们都在增加相同的计数字段。

只有在没有分配的情况下`e2 = e1`，增量才会发生在两个不同的实例上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T16:54:02.053

这是Java的基本原则之一。每个变量，只是某个对象的句柄。执行

```
e1=e2 
```

不复制对象的值，它指向`handles`创建的第二个对象。您实例化的第一个`Echo`对象现在根本没有被引用，并且将在下次 gc 运行时被垃圾收集。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T16:53:34.447

将一个对象分配给另一个对象只是分配对象引用（或多或少的指针）。它不会复制成员变量等。

您需要阅读有关[克隆](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sugexp=les;&gs_nf=1&tok=fPNNP7J3M1z4x17yNHBNmA&cp=8&gs_id=f&xhr=t&q=java%20clone&pf=p&safe=off&output=search&sclient=psy-ab&oq=java%20clo&gs_l=&pbx=1&qscrl=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=8171fb77536c4765&biw=1680&bih=989&ion=1)的信息。从 wiki for Java 的第一段`clone()`：

> 在 Java 中，对象是通过引用变量来操作的，并且没有用于复制对象的操作符——赋值操作符复制的是引用，而不是对象。clone() 方法提供了这个缺失的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-21T15:26:15.577

尝试为方法 Echo 创建构造函数，并将另一个对象作为参数。并将参数对象的值分配给该对象。IE '''

```
Echo(Echo echo) {
  this.count = echo.count;
} 
```

'''

然后将节点 e2 创建为：

```
Echo e2 = new Echo(e1); 
```

# php - PHP从PHP中的用户函数返回

> ID：12020418
> 
> 赞同：-1
> 
> 时间：2012-08-18T16:49:10.347
> 
> 标签：php, function, variables

是否可以（以某种格式）返回一个包含 PHP 函数信息的变量

例如。

```
function setuplogin($email,$pwd){
    if(!$email || !$pwd){ return $error = 'not possible'; }
} 
```

所以在它被调用的页面上

```
<?php echo $error;?> 
```

会工作

编辑：

不可能简单地回显该函数，因为同样的函数也可以设置为 `return $success = 'congrats';`并在页面上调用`<?php echo $success;?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:54:51.653

函数只能返回一个值（任何类型）。你对那个值做什么——例如，根据返回的值将它分配给一个变量或不同的变量——完全是调用者的工作，函数不能影响这一点。

当然，你的函数可以通过赋值来创建一个全局变量，`$GLOBALS['whatever']`但这**非常难看**，如果你从另一个函数调用你的函数，它甚至不会按照你想要的方式工作。另一个缺点是您总是必须为*所有*变量分配一些东西 - 否则您最终会得到可能未定义的变量，具体取决于函数所做的事情，并且需要`isset()`使用这些变量检查代码。

因此，您尝试做的事情不可能以干净的方式进行。最接近的是重新排列一个数组：

```
function foo() {
    return array('success' => ..., 'error' => ...);
} 
```

然后调用者可以做例如`$result = foo();`然后使用`$result['success']`和`$result['error']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:51:16.383

您可以只设置函数以吐出您想要的变量，而无需使用“变量”。

```
function setuplogin($email,$pwd){
if(!$email || !$pwd){ return 'not possible'; }
} 
```

```
<?php echo setuplogin(); ?> 
```

或者您可以使用全局变量并在函数外部调用 $error：

```
$error = "";
function setuplogin($email,$pwd){
global $error;
if(!$email || !$pwd){ $error = 'not possible'; }
}

<?php echo $error; ?> 
```

当然，第二个假设您将在回声之前调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:23:43.787

听起来你想要的是能够返回多个东西：函数是成功还是失败，以及随之而来的消息。您可以通过返回一个数组来做到这一点：

```
return array('success' => true, 'message' => 'well done'); 
```

调用者可以这样做：

```
$result = setuplogin(...);
echo $result['message']; 
```

# javascript - jqGrid：对本地数据进行排序清除网格

> ID：12020419
> 
> 赞同：0
> 
> 时间：2012-08-18T16:49:24.987
> 
> 标签：javascript, jqgrid

我在这里发现了类似但不相同的问题；他们发布的答案都没有解决这个问题。

我使用`addJSONData`. 当您单击列标题进行排序时，网格将被擦除。Web 控制台/firebug 中没有错误。稍后调用添加的数据`addJSONData`至少按所选列排序。

我的配置：

```
jQuery('#attributes').jqGrid({
    sortable:true,
    datatype:"local",
    colNames: cols,
    colModel: colmods,
    cmTemplate: {width:155, align:"left"},
    multiselct: false,
    shrinkToFit:false,
    caption: "Node Attributes",
    scroll: true,
    footerrow: true,
    userDataOnFooter: true,
    rowNum: -1
}); 
```

我唯一的想法是保存数据`onSortCol`并将其重新加载到`loadComplete`. 不过我不太喜欢这样。我尝试了`rowNum: 9007199254740992`,`loadonce: true`和其他的各种组合。

我已经尝试过 jqGrid 版本 4.2.0 和 4.4.0 （`rowNum: -1`再次支持）。

*编辑*：清除数据的行是`emptyRows`sortData 函数中的位：

```
 if(ts.p.scroll) {
            var sscroll = ts.grid.bDiv.scrollLeft;
            emptyRows.call(ts, true, false);
            ts.grid.hDiv.scrollLeft = sscroll;
        } 
```

似乎应该在这种情况发生之前保存数据，但我不熟悉此代码以了解数据的实际位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:51:16.810

我有一个类似的问题。我偶然发现了一个修复。设置 loadonce: true 后，如果您点击寻呼机中的刷新按钮然后尝试排序，则可以正常工作。

所以我通过执行以下操作强制单击刷新按钮：`$(".ui-icon-refresh").trigger('click');`

我在 onClose 事件上运行了这个，因为这符合我的要求。你可以在这里查看我对这个问题的全部解释：[Make 'Search' remote and all other things (sorting, pagination, etc) local in jqGrid](https://stackoverflow.com/questions/11936149/make-search-remote-and-everything-else-sorting-pagination-etc-local-in-jqg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T02:15:03.753

我是 jqGRid 的新手（我 3 天前才开始使用它......）但是，如果您使用本地，您是否还必须指定 loadonce:true 才能进行排序和分页工作？

# php - jQuery倒计时日期

> ID：12020428
> 
> 赞同：0
> 
> 时间：2012-08-18T16:50:25.807
> 
> 标签：php, jquery, mysql

有谁知道我如何使用 Jquery 来更新 td id jailtimer 中的内容。我需要它倒计时直到它达到 0

例子

00:00:02

00:00:01

00:00:00 完成

```
<?php
$sql = "SELECT * FROM jail ORDER BY id DESC";
$query = mysql_query($sql) or die(mysql_error());
$count = mysql_num_rows($query);
$i = 1;
while($row = mysql_fetch_object($query)) {
$jail_oname = htmlspecialchars($row->username);
$jail_otimeleft = htmlspecialchars($row->time_left);
$oleft = $jail_otimeleft - time();
if ($oleft < '0'){
$sql = "DELETE FROM jail WHERE username='".$jail_oname."'";
$query = mysql_query($sql)  or die(mysql_error());
}
?>
<table>
<tbody>
<tr>
<td id="jailtimer"><?php echo date( "00:i:s", $jail_otimeleft - time() ); ?></td>
</tr>
</tbody>
</table> 
```

这是一个将数据放入mysql表的代码

```
<?
if ($_POST['Failcaptcha']){
    $jailtime = 1500;
        $Time_Jail=time()+ $jailtime;
    echo "<p id=\"MyStatus\">You clicked the wrong button you goto jail for 25 Minutes!</p>";
    mysql_query("INSERT INTO `jail` ( `id` , `username` , `time_left` , `reason` , `bust_able` )
    VALUES ('', '$username', '$Time_Jail', 'Failed captcha', '1')");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:44:19.540

这是一个[小提琴](http://jsfiddle.net/sm2aY/1/)，展示了如何在 jquery 中很容易地使时钟向前或向后运行。享受。

HTML代码是：

```
<div class="time"></div>
<div class="backtime"></div> 
```

这是JS代码：

```
$(function(){
    var $currentDate = new Date().getTime();
    setInterval(function(){
         $(".time").text(new Date());
        console.log(new Date().setTime($currentDate));
         $currentDate = $currentDate - 1000;
        $(".backtime").text(new Date($currentDate) );        
    },1000);
});​ 
```

这将在 GUI 上显示剩余时间，但不会更新数据库。我假设您不想每秒都往返于服务器。我建议你去掉“time_left”栏，只使用“release_date”，意思是“什么时候发布？”

如果需要更多解释，请告诉我。

# ffmpeg - 寻找最快的视频编码器，将网络摄像头流式传输到 ipad

> ID：12020430
> 
> 赞同：12
> 
> 时间：2012-08-18T16:50:44.987
> 
> 标签：ffmpeg, video-streaming, html5-video, gstreamer, vlc

我正在寻找编码网络摄像头流的最快方法，该流将在 html5 视频标签中可见。我正在使用 Pandaboard：[http](http://www.digikey.com/product-highlights/us/en/texas-instruments-pandaboard/686#tabs-2) ://www.digikey.com/product-highlights/us/en/texas-instruments-pandaboard/686#tabs-2作为硬件。可以使用gstreamer、cvlc、ffmpeg。我将使用它来驱动机器人，因此视频流中需要的延迟最少。质量不一定很好，也不需要音频。此外，这仅适用于一个客户端，因此带宽不是问题。迄今为止最好的解决方案是使用带有 mpjpeg 的 ffmpeg 给我大约 1 秒的延迟。有更好的吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T05:58:00.650

我已经被问过很多次了，所以我会尝试笼统地回答这个问题，而不仅仅是针对 mjpeg。在系统中获得非常低的延迟需要一些系统工程工作以及对组件的理解。

我能想到的一些简单的顶级调整是：

确保编解码器配置为最低延迟。编解码器（尤其是嵌入式系统编解码器）将具有低延迟配置。启用它。如果您使用的是 H.264，它是最有用的。大多数人没有意识到按照标准要求，H.264 解码器需要在显示帧之前对其进行缓冲。Qcif 最多 16 帧，720p 最多 5 帧。第一帧的输出有很多延迟。如果您不使用 H.264，请确保您没有启用 B 图片。这增加了获取第一张图片的延迟。

由于您使用的是 mjpeg，我认为这对您不太适用。

编码器也会有一个速率控制延迟。（称为初始化延迟或 vbv buf 大小）。将其设置为提供可接受质量的最小值。这也将减少延迟。将其视为编码器和解码器之间的比特流缓冲区。如果您使用的是 x264，那将是 vbv 缓冲区大小。

一些简单的其他配置： 使用尽可能少的 I 图片（大内期）。我的图片很大，增加了通过网络发送的延迟。这在端到端延迟在 1 秒或更长范围内的系统中可能不是很明显，但是当您设计需要 100 毫秒或更短的端到端延迟的系统时，这和其他几个方面都会发挥作用。还要确保您使用的是低延迟音频编解码器 aac-lc（而不是 heaac）。

在您的情况下，为了降低延迟，我建议远离 mjpeg 并至少使用没有 B 图片的 mpeg4（简单配置文件）或最好是 H.264 基线配置文件（x264 提供零延迟选项）。您将获得较低延迟的简单原因是您将获得较低的比特率后编码以发送数据并且您可以进入全帧率。如果您必须坚持使用 mjpeg，那么在没有使用开源组件的编解码器和系统提供更高级的功能支持的情况下，您可以获得的效果非常接近。

另一方面是将内容传输到显示单元。如果您可以使用 udp，与 tcp 相比，它将大大减少延迟，尽管根据网络条件有时可能会丢失。您提到了 html5 视频。我很好奇您如何对 html5 视频标签进行实时流式传输。

还有其他方面可以调整，我会放在高级类别中，需要系统工程师尝试各种事情

操作系统中的网络缓冲是什么？出于性能原因，操作系统还会在发送数据之前对其进行缓冲。调整它以获得性能和速度之间的良好平衡。

您使用的是 CR 还是 VBR 编码？虽然 CBR 非常适合低抖动，但如果编解码器提供，您也可以使用 capped vbr。

您的解码器可以开始解码部分帧吗？因此，您不必担心在将数据提供给解码器之前对其进行分帧。尽快将数据推送到解码器。

你能做字段编码吗？在输出第一张图片之前将帧编码时间减半。

每当切片可立即通过网络发送时，您可以使用回调进行切片编码吗？

使用了我在上述所有方法中工作过的低于 100 毫秒的延迟系统。有些功能在开源组件中可能不可用，但如果你真的需要它并且有热情，你可以继续实施它们。

编辑：我意识到你不能为 ipad 流媒体解决方案做很多上述事情，并且由于 hls 也有限制你可以实现的延迟。但我希望当您需要任何低延迟系统时，它会在其他情况下证明是有用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-16T14:20:52.893

我们遇到了类似的问题，在我们的案例中，有必要对外部事件进行计时并将它们与视频流同步。我们尝试了几种解决方案，但这里描述的解决方案解决了问题并且延迟极低：

[Github 链接](https://gist.github.com/tzicatl/2409785)

它使用[gstreamer](http://gstreamer.freedesktop.org)转码为 mjpeg，然后将其发送到小型 python 流服务器。这样做的好处是它使用标签而不是它可以被大多数现代浏览器查看，包括 iPhone。

由于您需要 <video> 标签，一个简单的解决方案是使用 http-launch。这是我们尝试过的所有解决方案中延迟最低的，因此它可能对您有用。请注意，ogg/theora 将无法在 Safari 或 IE 上运行，因此希望针对 Mac 或 Windows 的用户必须修改管道以使用 MP4 或 WebM。

另一个看起来很有前途的解决方案，gst-streaming-server。我们根本找不到足够的文档来使它值得追求。如果有人可以询问有关如何使用它的 stackoverflow 问题，我将不胜感激！

# java - 实例变量正在变为空

> ID：12020437
> 
> 赞同：2
> 
> 时间：2012-08-18T16:51:58.310
> 
> 标签：java, debugging

我正在开发基于 SWT 的 GUI 应用程序。我有一个私有的对象变量。此变量在应用程序运行时的某个时间变为空。我想知道如何设置看门狗类型的调试，以便我知道哪个线程使其为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T16:58:12.283

最简单且独立于 IDE 的方法是将变量封装在 setter / getter 对后面，并在代码中添加一条语句以监视设置值`null`：

曾是：

```
public MyObject obj; 
```

改成：

```
private MyObject obj;
public MyObject getObj() {
    return obj;
}
public void setObj(MyObject val) {
    if (val == null) {
        // Add a log debug statement, and set a breakpoint here
    }
    obj = val;
} 
```

封装你的变量通常是一件好事，通常证明在调试上下文之外也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:06:59.173

**1.**我认为您在谈论`Object Reference Variable`某种类型的对象。

在其 setter 方法中检查值。

**例如：**

```
CustomObject cObject;

public void setObject(CustomObject o){

       if(o.equals(null)){

              // Save it in log, Sysout it... etc.
       }
        else{

              cObject = o;

         }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:22:28.420

我想您正在使用 Eclipse 来调试您的应用程序。

对于 Eclipse，您可以设置一个断点进行访问和修改，这里是快速步骤：

1.  关注私有变量的行。选择运行菜单 -> 切换断点。（如果您使用默认键映射，您可以按 Ctrl+Shift+B）
2.  Show Breakpoints View by Window menu -> Show View -> Other... Breakpoints
3.  单击您切换的变量，右键单击并取消选中访问选项。只保留修改。
4.  在调试模式下运行应用程序。

您应该能够看到变量的修改。

# mysql - 我无法通过 ruby on rails 连接到远程 mysql 服务器

> ID：12020438
> 
> 赞同：2
> 
> 时间：2012-08-18T16:52:21.600
> 
> 标签：mysql, ruby-on-rails, ruby, amazon-ec2

我有一个非常奇怪的问题。我在亚马逊 ec2 服务器上设置了 mysql 数据库。我已经适当地打开了亚马逊防火墙和我的路由器防火墙，因此我可以通过端口 3306 进行连接。我可以通过命令行从我的 linux VM 轻松连接到 ec2 服务器，如下所示：

```
me@me-VirtualBox:~/host/workspace/rails-apps/sm$ mysql -h redacted.amazonaws.com -u redacted -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4012389
Server version: 5.5.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

所以连接有效。这验证了我可以成功打穿防火墙，并且没有因为在VM内部运行而导致的搞笑业务。所以现在我从 ruby​​ 中尝试如下

```
require 'rubygems'
require 'mysql'

mycon = Mysql::new("redacted.amazonaws.com", "redacted", "redacted", "redacted")

symres = mycon.query("select * from symbols where symbol = \"AAPL\";")  

symres.each do |symbol|
  puts symbol[0].to_s
end

mycon.close 
```

这会在命令行打印出“AAPL”。所以一切都从红宝石的角度来看。现在我尝试使用 ruby​​ on rails 进行连接。

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: redacted
  pool: 5
  username: redacted
  password: redacted
  host: redacted.amazonaws.com 
  port: 3306 
```

因此，我使用“rails server”命令启动了 rails 服务器。WebBRICK 启动正常并显示此

```
me@me-VirtualBox:~/host/workspace/rails-apps/sm$ rails server
=> Booting WEBrick
=> Rails 3.2.7 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-08-18 10:00:08] INFO  WEBrick 1.3.1
[2012-08-18 10:00:08] INFO  ruby 1.8.7 (2011-06-30) [x86_64-linux]
[2012-08-18 10:00:14] INFO  WEBrick::HTTPServer#start: pid=9977 port=3000 
```

我打开浏览器窗口并连接到

```
http://localhost:3000 
```

在铬。铬无限旋转。启动 WebBRICK 的控制台窗口中不会出现任何消​​息。这就是我在 rails 日志中看到的全部内容：

```
Started GET "/" for 127.0.0.1 at Sat Aug 18 09:39:47 -0600 2012
Connecting to database specified by database.yml 
```

我让它静置 5 分钟，没有任何反应。我必须用 ctrl-c 杀死 WebBRICK。

关于可能发生的事情，我唯一的线索是在 webrick 关闭后，我尝试使用 mysql 进行连接，如上所示，我收到此错误：

```
me@me-VirtualBox:~/host/workspace/rails-apps/sm$ mysql -h redacted.amazonaws.com -u redacted -p
Enter password: 
ERROR 1129 (HY000): Host 'redacted.co.comcast.net' is blocked because of many    connection errors; unblock with 'mysqladmin flush-hosts' 
```

因此，这表明 ruby​​ on rails 无法连接（可能在重试的循环中），并且亚马逊服务器上的 mysql db 检测到了这一点并阻止了该主机的连接。所以我登录亚马逊主机，运行flush-hosts命令，可以从命令行或ruby脚本连接。但我永远无法连接铁轨。

Rails 版本：3.2.7 Ruby 版本：1.8.7 My SQL 服务器版本：5.5.20

有任何想法吗？我不知道如何调试导轨内的连接错误可能是什么。我没有收到堆栈跟踪、崩溃或任何可以帮助我调试正在发生的事情的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:56:20.620

尝试编写一个简单的 ruby​​ 脚本来测试 mysql2 gem（看起来您已经测试过 mysql，但您的 rails 应用程序使用 mysql2）。

此外，尝试使用 ruby​​-debug 或其他调试器逐步执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:36:34.930

终于得到了这个堆栈跟踪：

看起来有一个内部错误，然后导致 rails 再次连接到数据库......导致死锁：

```
ActiveRecord::ConnectionTimeoutError (could not obtain a database connection within 5 seconds (waited 5.40695462 seconds). The max pool size is currently 25; consider increasing it.):
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:258:in `block (2 levels) in checkout'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
  /home/ubuntu/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
  /home/ubuntu/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
  activerecord (3.2.11) lib/active_record/query_cache.rb:67:in `rescue in call' 
```

# silverlight - XML 命名空间中不存在标签“DataTrigger”？

> ID：12020439
> 
> 赞同：0
> 
> 时间：2012-08-18T16:52:24.090
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我遇到了一个非常烦人的错误

[错误 175 XML 命名空间“ http://schemas.microsoft.com/winfx/2006/xaml/presentation](http://schemas.microsoft.com/winfx/2006/xaml/presentation) ”中不存在标记“DataTrigger” 。

我正在使用带有 Silverlight 5 的 Visual Studio 2010。据我所知，参考资料还可以，但显然不行，有人可以告诉我是什么原因造成的吗

我相信这可能会解决我之前提出的另一个问题，但由于此错误而无法对其进行测试

[根据条件更改要使用的 DataTemplate](https://stackoverflow.com/questions/12020194/change-datatemplate-to-use-depending-on-condition)

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"             
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:iv="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  

mc:Ignorable="d"    
>
<UserControl.Resources>
  <DataTemplate x:Key="SelectControl">
    <ContentControl Content="{Binding}">
        <ContentControl.Style>
            <Style TargetType="ContentControl">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding BlockType}" Value="Locked">
                        <Setter Property="DataTemplate"
                                Value="{StaticResource LockedClip}" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding BlockType}" Value="Unlocked">
                        <Setter Property="DataTemplate"
                                Value="{StaticResource UnlockedClip}" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding BlockType}" Value="Unlock">
                        <Setter Property="DataTemplate"
                                Value="{StaticResource UnlockClip}" />
                    </DataTrigger>                      
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</DataTemplate>

<DataTemplate x:Key="LockedClip">
  <my:SingleLockedFlexBlock Height="117"/>            
</DataTemplate>    

<DataTemplate x:Key="UnlockedClip">
  <my:SingleLockedFlexBlock Height="50"/>            
</DataTemplate>    

 <DataTemplate x:Key="UnlockClip">
   <my:SingleLockedFlexBlock Height="200"/>            
 </DataTemplate> 
```

希望有人能阐明这一点吗？

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:16:04.433

`DataTrigger`Silverlight 默认不支持，但您可以使用[Blend Preview for SL5](http://www.microsoft.com/en-us/download/details.aspx?id=9503)中的 SDK来获得相应的行为。

你可能想看看：

*   [*Silverlight 中的表达式 SDK–DataTrigger 示例*](http://blogs.catapultsystems.com/asills/archive/2011/05/11/expression-sdk-in-silverlight-datatrigger-example/)博客文章
*   [](http://www.nileshgule.com/2011/08/ngtweet-part-9-data-triggers-in.html)*Silverlight博客文章 [*中的数据触发器*](http://www.nileshgule.com/2011/08/ngtweet-part-9-data-triggers-in.html)*
**   SO 问题[*什么是 Silverlight 中 DataTrigger 的替代品*](https://stackoverflow.com/q/3529508/650012)。*

 *XAML 代码明智，我相信您需要更改以下内容：

```
<Style.Triggers>
    <DataTrigger Binding="{Binding BlockType}" Value="Locked">
        <Setter Property="DataTemplate"
            Value="{StaticResource LockedClip}" />
    </DataTrigger>
    ... 
```

进入以下：

```
<iv:Interaction.Triggers>
    <ei:DataTrigger Binding="{Binding BlockType}" Value="Locked">
        <ei:ChangePropertyAction PropertyName="DataTemplate"
            Value="{StaticResource LockedClip}" />
    </ei:DataTrigger>
    ... 
```*

# database-design - 处理数据库中的现金流

> ID：12020440
> 
> 赞同：-3
> 
> 时间：2012-08-18T16:52:27.507
> 
> 标签：database-design

处理数据库中现金收入和支出的正确方法是什么？

例子：

```
id, user_id, datetime        , value, flow (IN, OUT), notes
 1, 1      , 08/18/2012 16:35,  500,              IN, Invoice 0019 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:02:53.067

如果您想查看一些示例模型以了解这是如何完成的，请转到 Database Answers。

[http://www.databaseanswers.org/data_models/](http://www.databaseanswers.org/data_models/)

其中一些模型处理现金。您可以在自己的模型中借鉴从这些模型中获得的想法。

# javascript - javascript 正则表达式语法高亮

> ID：12020444
> 
> 赞同：0
> 
> 时间：2012-08-18T16:52:49.340
> 
> 标签：javascript, jquery, regex

我已经让自己成为一个自定义的 javascript 语法荧光笔

```
<p id="data">// return
function getdata() {
    // return hi
     return "Hi";
}</p>
data = $('p#data').html();
data = data.replace(/\/\/.*$/gm, "<font color=#878A85>$&</font>");
data = data.replace(new RegExp(getRegx('return'), 'gmi'), "<font color=#C97F00>$&</font>");
$('p#data').html(data); 
```

现在，我的问题是它将替换评论中的 return 关键字还有一种方法可以避免这种情况以及如何为每一行编号我不想使用任何预先构建的脚本，因为我只会使用 php脚本我不想要更多的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:59:55.140

尝试使用负前瞻`/return(?!.*<\/font>)$/`

```
<p id="data">
    // return
    function getdata() {
       // return hi
       return "Hi";
    }
</p>
data = $('p#data').html();
data = data.replace(/\/\/.*$/gm, "<font color=#878A85>$&</font>");
data = data.replace(new RegExp(getRegx('return(?!.*<\/font>$)'), 'gmi'), "<font color=#C97F00>$&</font>");
$('p#data').html(data); 
```

# php - 连续调用 2 个 curl 请求失败。“需要长度”

> ID：12020447
> 
> 赞同：0
> 
> 时间：2012-08-18T16:53:12.777
> 
> 标签：php, curl

我正在尝试使用代码点火器在 PHP 中创建一个谷歌融合表。这是我的代码：

```
{
    $this->load->library('curl');

    $token_url = 'https://www.google.com/accounts/ClientLogin';

    //set username and password
    $email = "xxxx@gmail.com";
    $pass = "yyyyyy";

    $request_body = array("accountType" => "HOSTED_OR_GOOGLE",
                            "Email" => $email,
                            "Passwd" => $pass,
                            "service" => "fusiontables",
                            "source" => "fusiontables.GoogleFusion",
                        );

    $resp = $this->curl->simple_post($token_url, 
                                     $request_body, 
                                     array(CURLOPT_HTTPHEADER => array('Content-Type: application/x-www-form-urlencoded'))
                                     );  
    $response = explode("=", $resp);

    $token =  $response[3];

    echo "token = ". $token . "<br>";

$url = "http://tables.googlelabs.com/api/query";
    //$token = 'DQBBBLcAAABtXliIIvSrim6JpcrxFF23EKVEJHlrDob2TICiFGUISmUd6UXN3Y19MqvYozPuY973kPafpVEReFR8geHHpNGPeO2PGLr8aqQa__v2rZLR4XB0WwoNb0ksa2WWgve2tocgkfwFY4OjQkcbSqUZJbxPBNk5vYGT6kL9hZNNJRZX-XYhUGfYiGlpNyWA0Pe2ql23PsUVRKWotYjgTIKOzO_p6zEAbaEkoxZkpsioXQQqMTM2QFf-hKjYcbOai80IAQI';

    print_r($this->curl->info);

    $post_data = array(
                        "sql"=>"CREATE TABLE 'table123' (word: STRING, geom: LOCATION, timestamp: DATETIME)",
                        );  

    $resp = $this->curl->simple_post(   $url,
                                        $post_data,
                                        array(CURLOPT_HTTPHEADER => array('Content-Type: application/x-www-form-urlencoded', "Authorization: GoogleLogin auth=" . $token))
                                    );

    echo "<br>";
    print_r($this->curl->info);
echo "<br>";
    print_r($resp);
} 
```

我正在使用以下 curl 库 - [https://github.com/philsturgeon/codeigniter-curl](https://github.com/philsturgeon/codeigniter-curl)，而且奇怪的是，如果我取消注释硬编码的令牌行，整个事情就可以了。如果需要，我已经提供了信息，但底线是我收到错误 411“需要长度”，并且从打印出来的信息中，第二个请求中似乎没有请求的元数据（即 Content-Type）。

这是第一个请求的信息：

```
Array ( [url] => https://www.google.com/accounts/ClientLogin   
    [content_type] => text/plain   
    [http_code] => 200   
    [header_size] => 275   
    [request_size] => 268   
    [filetime] => -1   
    [ssl_verify_result] => 0   
    [redirect_count] => 0   
    [total_time] => 0.206787   
    [namelookup_time] => 4.3E-5   
    [connect_time] => 0.034345   
    [pretransfer_time] => 0.07166   
    [size_upload] => 124   
    [size_download] => 818   
    [speed_download] => 3955   
    [speed_upload] => 599   
    [download_content_length] => 818   
    [upload_content_length] => 0   
    [starttransfer_time] => 0.20675   
    [redirect_time] => 0   
    [certinfo] => Array ( )   
       ) 
```

第二个，缺少元数据：

```
Array ( [url] => http://tables.googlelabs.com/api/query   
        [content_type] =>   
        [http_code] => 411   
        [header_size] => 0   
        [request_size] => 538   
        [filetime] => -1   
        [ssl_verify_result] => 0   
        [redirect_count] => 0   
        [total_time] => 0.107731   
        [namelookup_time] => 0.000849   
        [connect_time] => 0.054077   
        [pretransfer_time] => 0.054085   
        [size_upload] => 97   
        [size_download] => 0   
        [speed_download] => 0   
        [speed_upload] => 900   
        [download_content_length] => -1   
        [upload_content_length] => 0   
        [starttransfer_time] => 0.107711   
        [redirect_time] => 0   
        [certinfo] => Array ( )   
          ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:17:06.597

弄清楚了。

代替：

```
$token =  $response[3]; 
```

和

```
$token =  trim($response[3]); 
```

对明智的人（不是我，很明显）说的话总是要注意你的空白。

# objective-c - UITableViewDataSource 方法

> ID：12020449
> 
> 赞同：0
> 
> 时间：2012-08-18T16:53:22.467
> 
> 标签：objective-c, xcode, cocoa-touch, methods, protocols

这是**UITableViewDataSource**协议的**CellForRowAtIndexPath**方法。我在一个网站上看到了那个代码。

 **```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *TableIdentifier = @"SimpleTableItem";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:TableIdentifier];

        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:TableIdentifier];
        }

        cell.textLabel.text = [playersReady objectAtIndex:indexPath.row];
        return cell;
} 
```

***我的问题是：***

1.  为什么在这里定义时`cell`写了`= [tableView dequeueReusableCellWithIdentifier:TableIdentifier];`？那是什么意思？如果我评论了该代码，一切都会好起来的。**那个代码是为了什么？**嗯……

2.  如果等于（**SimpleTableItem**`cell` ） ，`if`语句如何等于？**写那段代码是为了什么？**`nil``cell``TableIdentifier`

*****   为什么`TableIdentifier`等于**SimpleTableItem**？**为了什么？****** 

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:01:39.177

iPhone没有很多内存。但即使在现代计算机上，您也不希望为表格中的*每个单元格初始化一个新单元格。*那只是浪费内存。因此，Apple 提出了可重复使用电池的想法。您只需初始化几个填满屏幕的单元格（表格视图）。然后，当用户向下滚动时，一些新的单元格将出现在屏幕底部，但同时其他单元格将在屏幕顶部消失。因此，您可以简单地获取这些单元并重复使用它们。

幸运的是 UITableView 为你管理这个。当您需要在该方法中设置一个新单元格时，您所要做的就是询问表格视图是否有任何可以重用的单元格。如果有可重用的单元格， dequeueReusableCellWithIdentifier: 将返回其中一个。但是如果还没有可用的（通常是当你第一次用初始单元格填充表格视图时）它将返回 nil。因此，您必须测试 cell 是否为 nil，如果是这种情况，则必须从头开始创建一个新的 cell。

在 iOS 6.0 上，有一个新方法`dequeueReusableCellWithIdentifier:forIndexPath:`总是返回一个有效的单元格（如果还没有可重用的单元格，它会为您创建单元格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:08:43.363

表格视图仅创建那些可以在屏幕上一次显示的单元格。在此系统重用单元格以节省内存之后。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 20;
}

-(UITableViewCell *)tableView:(UITableView *)tableViewL cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableViewL dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    NSLog(@"Cell == nil so create a new cell....");

}else {
     NSLog(@"Reuse Cell ");
}
 return cell;

} 
```

CellIdentifier 用于识别单元格，例如，如果您在第 12 个单元格的前十个表格上添加标签，则添加一个按钮，当您重用单元格时会出现问题。因此我们需要创建一个不同的单元格以在单元格上添加按钮并为其提供标识符细绳。******

# ms-access - 从 Excel 2010 连接到 Access 时出错

> ID：12020452
> 
> 赞同：0
> 
> 时间：2012-08-18T16:53:36.363
> 
> 标签：ms-access, windows-7, excel, vba

我在 Excel 2000 中编写了以下 VBA 代码，以创建与 WindowsXP 中具有工作组安全性的 Access 2000 的连接。一切正常，直到我们迁移到 Windows7 数据库仍在 Access2000 中。

打开与数据库的连接后，似乎密码值已从 ADODB 连接字符串中消除。下面代码的第一个 debug.print 语句返回一个包含密码和用户名的字符串，但第二个 debug.print 语句只显示用户 ID 参数的值。结果，当我尝试创建记录集时，我收到一条错误消息，指出我没有权限访问数据。

按照与 Windows XP 中的 Excel 2000 完全相同的过程，ADODB 连接字符串没有消除密码值，我能够打开记录集。

有什么建议么？

```
Public Function sDbConnection() As String
Dim sString  As String
Dim sConnection As String
Dim conn As ADODB.Connection

Set conn = New ADODB.Connection
conn.Provider = "Microsoft.Jet.OLEDB.4.0;"

' Provide path to the system Db
conn.Properties("Jet OLEDB:System database") = "S:\UTL\RscMgmt\SECURE.MDW"

' Username and password to the secured access database
conn.Properties("Password") = "MyPassword"
conn.Properties("User Id") = "MyUserID"

Debug.Print conn.ConnectionString

' Open a connection to the Access 2000 db and return the connection string
conn.Open "Data Source=" & "S:\UTL\RscMgmt\GasPortfolio 2000.mdb" & ";"
sConnection = conn.ConnectionString
Debug.Print sConnection
sDbConnection = sConnection
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T06:18:09.117

尝试使用“ **Microsoft.ACE.OLEDB.12.0** ”提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:03:09.763

如果您使用的是 64 位版本的 Win 7，则该`Microsoft.Jet.OLEDB.4.0`提供程序将不起作用，因为它仅适用于 32 位系统。

[该网站](http://www.connectionstrings.com/articles/show/using-jet-in-64-bit-environments)列出了一些您可以实施的解决方法。

# python - 分配中的Python'if'可以接受吗？

> ID：12020454
> 
> 赞同：4
> 
> 时间：2012-08-18T16:53:42.933
> 
> 标签：python

星期五，我与某人讨论了以下构造：

```
class C(....

c = C()
d = C()
...

(c if some_boolean else d).some_function_of_class_C() 
```

这种 if 语句是否可以接受/鼓励？

问题是与我一起工作的很多人都有 C 经验，但没有那么多 Python 经验，并且不习惯这种说法（就像列表理解一样）。但是，Python 不是 C，我认为应该利用 Python 语言的优点。或不？

（顺便说一句，我使用普通的函数名和变量名，但这只是为了保持这个示例的样本。此外，我不仅调用 f() 还调用了更多函数（如 f().g() ，我在这种情况下必须完全重复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T16:57:08.280

您的代码在技术上没有任何问题，但看到这样的代码有点奇怪和令人惊讶。

将您的语句分成两个单独的语句可以提高可读性：

```
c = c1 if some_boolean else c2
c.some_function_of_class_C() 
```

你选择的可怕的变量名仍然让它看起来很糟糕。但更改变量名也有助于提高可读性：

```
vehicle = plane if distance > 1000 else car
vehicle.travel() 
```

在我看来，这*比*你最初提出的更具可读性，而且只做了很小的改动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:56:57.530

它在语法和语义上都是有效的，但它肯定不是 Pythonic。考虑改用策略模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T16:59:04.067

从长远来看，用一种语言编写代码但使用另一种语言的风格和限制绝不是一个好主意。您的 python 代码应该始终是[pythonic](http://chrisarndt.de/talks/rupy/2008/output/slides.html)。

也就是说，确保您的代码是可读的，假设阅读代码的人理解 python 语法，或者至少足以谷歌其余部分。

# c++ - 对 vtable 的未定义引用

> ID：12020462
> 
> 赞同：1
> 
> 时间：2012-08-18T16:54:30.760
> 
> 标签：c++, class, inheritance, abstract-class

我已经开始学习 C++，我已经知道 C 和 Java。我开始学习它是因为我想开始使用面向对象的编程。

但是，我被代码困住了，因为编译器会生成“对 Actor 的 vtable 的未定义引用”。在这里，您有生成相同错误的代码，而不是原始错误，因为它不太清楚。我真的不知道是什么原因造成的。

```
struct Actor
{
     int x, y;
     virtual void move();
};

struct Player : Actor
{
     Player(int a, int b)
     {
        x = a;
        y = b;
     }

     void move();
     void draw();
};

void Player::move()
{
    ++x;
};

main()
{
    Actor *act;

    act = new Player(10, 20);
} 
```

这个问题可能很愚蠢，我不知道，我到处挖，但没有找到可以解决我的问题的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T16:57:50.333

您需要创建`virtual void move();`一个纯虚函数：

```
virtual void move() = 0; 
```

或`Actor::move()`为基类定义

```
void Actor::move() 
{
    // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:58:32.733

在演员定义

```
virtual void move() = 0; 
```

代替

```
virtual void move(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:30:40.933

错误*undefined reference to vtable*通常意味着声明了虚函数但未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T20:45:14.143

@Maxim 在您的情况下提供了答案，但更笼统地说（来自@Maxim 提供的链接）：

> 解决方案是确保定义了所有不纯的虚拟方法。请注意，即使声明为纯虚函数，也必须定义析构函数。

让我停下来的是上面引用的最后一句话，乍一看并不明显。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T07:47:31.327

对于每个具有虚函数的类，在 vtable 中创建的类的条目进一步具有指向所有虚函数的指针。

因为发生了一个虚拟的 void move(); 基类中的声明，编译器查找类定义（即）vtable 中的相应条目，因为您尚未定义，所以此处不可用。

所以纯虚函数将解决错误。

# javascript - Javascript字符串对象VS只是字符串

> ID：12020463
> 
> 赞同：2
> 
> 时间：2012-08-18T16:54:36.203
> 
> 标签：javascript, prototype

好的，首先，我不打算寻求一种`Object`将`String`.

但我面临这样的问题：

```
String.prototype.foo = function() {
    return this;
};

var rawString = "abcde";

var fooString = "abcde".foo();

console.log(typeof(rawString) + ': ', rawString);
console.log(typeof(fooString) + ': ', fooString); 
```

或者你喜欢的[jsfiddle](http://jsfiddle.net/GAWRc/)。

另外，附上截图：

![Javascript 中的怪事。](../Images/cd7835e0d69cb576b4c3be2a3a6c0d15.png)

* * *

如您所见，我在原型方法中几乎什么都没做`foo`，我只是`return this`。

但结果`typeof`完全不同

为什么是这样？我怎样才能返回`abcde`而不是返回`{0: "a"...}`？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T17:02:24.093

`this`引用，所以你需要像这样`String Object`返回它

```
return this.toString(); 
```

反过来，它创建原始字符串版本并返回它。

# android - android中的动画垂直滑动菜单

> ID：12020468
> 
> 赞同：6
> 
> 时间：2012-08-18T16:54:56.320
> 
> 标签：android, menu, android-animation, sliding

我需要在android中制作一个滑动垂直菜单，如下所示。用户向上或向下滑动屏幕以选择相关项目，并且所选项目必须大于其他项目。我怎么能在android中做到这一点？任何想法都会很棒。

![在此处输入图像描述](../Images/8812d63b24cb4281e2257fec50b3371d.png)

编辑：

我非常绝望，需要一些帮助。如何在安卓中做到这一点？ [http://iphone2020.wordpress.com/2012/06/10/uitableview-tricks/](http://iphone2020.wordpress.com/2012/06/10/uitableview-tricks/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:47:14.527

这可能可以通过使用该`Camera.setTranslate`功能来实现。有关类似问题，请参阅[Android：具有重叠行的垂直 ListView](https://stackoverflow.com/questions/10211835/android-vertical-listview-with-overlaped-rows)和[Android：垂直 3d 列表视图（带有解决方案）](https://stackoverflow.com/questions/10025270/android-vertical-3d-listview)

# jquery - jQuery的CSS定位问题

> ID：12020470
> 
> 赞同：0
> 
> 时间：2012-08-18T16:55:10.080
> 
> 标签：jquery, css, positioning, fixed

只是想在 CSS 定位问题上得到您的帮助。这是代码笔上代码的链接... [http://codepen.io/anon/pen/FKdLq](http://codepen.io/anon/pen/FKdLq)

当您单击“最新消息”时，文本会滑入和滑出，但实际按钮本身保持静态。我想要的是“最新消息”按钮在单击时与文本一起滑动但无法弄清楚：|

整个事情需要固定在右侧的浏览器窗口中。

任何帮助，将不胜感激。

PS 我对 jQuery 非常陌生，我的 jQuery 代码“干净”吗？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:07:06.690

只要确保您也在为“按钮”（由 an 定义`h2`，我相信）设置动画。它可以在你的函数中被引用`this`，因为它是被点击的。这是您的 JS 的固定版本：

```
$(function() {
    $("aside h2").toggle(function(){
            $('.box').animate({ right:"-350"});
            $(this).animate({right:"0"});
        },function(){
            $('.box').animate({ right:"-5"});
            $(this).animate({right:"271"});
    });
}); 
```

希望以任何方式有所帮助！

# jquery - AutoComplete Google Maps API - 直接 JSON 调用

> ID：12020476
> 
> 赞同：1
> 
> 时间：2012-08-18T16:56:04.113
> 
> 标签：jquery, autocomplete, google-places-api

我正在尝试开发一个使用 Google Places API 的 jQuery 移动应用程序。本质上，我正在做的是向 jQuery 移动页面添加输入，然后将其连接到 Google Places 以自动完成地址，并可能获取该地址的坐标。

我在[修改此处提供的演示](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)方面取得了初步成功，这些演示利用 Google 自己的“地点库”中的自动完成功能。然而，从 UI 的角度来看，在移动设备上这个实现是行不通的——你需要点击一个相对较小的结果，并且点击手机上的返回按钮并不会选择第一个结果。

输入： [http ://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile](http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile)

非常适合我的需要，只是我现在尝试使用自动完成 API 通过 Google Places API 返回数据。请参阅我正在使用的示例 API 调用：

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Amoeba&types=establishment&sensor=true&key=myKeyHERE](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Amoeba&types=establishment&sensor=true&key=myKeyHERE)

但是，这不会返回任何 GEO 信息 - 只是地址。我需要使用其他方法或调用吗？通过本机[（Places Library）实现](https://developers.google.com/maps/documentation/javascript/places#adding_autocomplete)，我可以访问一大堆数据，它不需要 API 密钥，也不需要在界限内工作。不确定重新地理编码结果集是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:05:55.070

我发现在执行上述操作后需要另一个调用，'reference' 字段在初始 JSON 响应中返回。我可以将结果缓存为我需要的唯一地理位置。尽管您的建议肯定被视为另一种潜在的解决方案，但我更喜欢这种对 UI 行为的额外控制，即使它是以额外的 API 请求为代价的。

无论如何，已经给了你一个不错的建议来回答你的荣誉。

[https://developers.google.com/places/documentation/#PlaceDetailsRequests](https://developers.google.com/places/documentation/#PlaceDetailsRequests)

[https://maps.googleapis.com/maps/api/place/details/json?reference=CmRYAAAAciqGsTRX1mXRvuXSH2ErwW-jCINE1aLiwP64MCWDN5vkXvXoQGPKldMfmdGyqWSpm7BEYCgDm-iv7Kc2PF7QA7brMAwBbAcqMr5i1f4PwTpaovIZjysCEZTry8Ez30wpEhCNCXpynextCld2EBsDkRKsGhSLayuRyFsex6JA6NPh9dyupoTH3g&sensor=true&key=[yourKey]](https://maps.googleapis.com/maps/api/place/details/json?reference=CmRYAAAAciqGsTRX1mXRvuXSH2ErwW-jCINE1aLiwP64MCWDN5vkXvXoQGPKldMfmdGyqWSpm7BEYCgDm-iv7Kc2PF7QA7brMAwBbAcqMr5i1f4PwTpaovIZjysCEZTry8Ez30wpEhCNCXpynextCld2EBsDkRKsGhSLayuRyFsex6JA6NPh9dyupoTH3g&sensor=true&key=%5ByourKey%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T01:51:28.767

您不能在 javascript 中执行跨域 json 请求，因此无法访问 /json 端点。

您应该做的是回到您最初的想法，然后将自动完成建议的样式设置为更适合移动设备。

```
.pac-container is the class for the suggest area
.pac-item is the class for each item in the suggest area 
```

# itunes - 支持广告的应用程序的 iTunes 屏幕截图？

> ID：12020480
> 
> 赞同：1
> 
> 时间：2012-08-18T16:56:30.713
> 
> 标签：itunes, app-store-connect

我有一个付费应用程序，并且我正在介绍此广告的免费、广告支持版本。大多数屏幕底部都有 AdMob 横幅。

我应该在 iTunes 中使用什么作为屏幕截图？

*   带有实际广告的屏幕截图？
*   广告应该在的空白区域的屏幕截图（在飞行模式下拍摄）？
*   付费版本的屏幕截图，没有广告并且屏幕上有更多数据？

我在 iTunes 中浏览了很多广告支持的应用程序。他们中的绝大多数都没有在屏幕截图中显示任何广告，也没有空白的广告空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:02:23.840

我个人不会修改我的截图。如果我删除广告，我几乎觉得我在欺骗用户下载我的应用程序。不过很多人感觉不一样。

# node.js - 为 LocomotiveJS 应用程序（NodeJS / Express）实施/强制 SSL

> ID：12020482
> 
> 赞同：0
> 
> 时间：2012-08-18T16:56:43.723
> 
> 标签：node.js, ssl, locomotivejs

[随着像LocomotiveJS](http://locomotivejs.org)这样的MVC 框架现在可用于 NodeJS / Express，我只是想知道如何在应用程序的一部分上实现 SSL？

例如，电子商务应用程序。

我需要所有 /checkout 控制器来强制使用 SSL。

我已经阅读过这样的教程，[但](http://elias.kg/post/14971446990/force-ssl-with-express-js-on-heroku-nginx)不确定如何使用 Locomotive 来实现这一点，因为 Express 被有效地“包装”了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:51:30.437

目前，Locomotive 不直接支持 SSL，但根据Locomotive 的创建者 Jared Hanson[在 4 月发布的 Google Groups 帖子，](https://groups.google.com/group/locomotivejs/tree/browse_frm/month/2012-04/7b66b30f2a863a50?rnum=1&_done=/group/locomotivejs/browse_frm/month/2012-04?#doc_ccf6ba08009c4e75)应该很快就会支持。

> 目前，我一直将 Locomotive 放在终止 SSL 的代理后面。但是，我将很快为此添加一个命令行选项，以获得直接支持。

也就是说，如果您想要一个完全基于节点的解决方案而不使用代理，那么目前您需要在 Locomotive 中编辑 Express 实例。我已经测试了以下内容，并且运行良好。

在撰写本文时，`npm install locomotive`使用 Express 2.x，尽管 github 上的最新版本已更新为使用 Express 3.x。

如果您将 Locomotive 与 Express 2.x 一起使用，那么我认为您必须`/locomotive/lib/locomotive/index.js`在第 180 行附近进行编辑，使其看起来像：

```
var sslOptions = {
    cert : fs.readFileSync('/path/to/your/ssl-cert/dev.crt')
  , key  : fs.readFileSync('/path/to/your/ssl-key/dev.key')
};

var self = this
  , server = express.createServer(sslOptions)
  , entry; 
```

此外，您可能仍希望侦听 HTTP 并将所有流量重定向到 HTTPS。坚持使用所有基于节点的解决方案，您可以简单地在结束时启动另一个 Express 服务器`/locomotive/lib/locomotive/cli/server.js`，将其所有流量重定向到 HTTPS，例如

```
 ...
    debug('booting app at %s in %s environment', dir, env);
    locomotive.boot(dir, env, function(err, server) {
    if (err) { throw err; }
    server.listen(port, address, function() {
      var addr = this.address();
      debug('listening on %s:%d', addr.address, addr.port);
    });

    // add an http server and redirect all request to https
    var httpServer = require('express').createServer();
    httpServer.all('*', function(req, res) {
      res.redirect('https://' + address + ':' + port + req.url);
    });
    httpServer.listen(80); // probably change based on NODE_ENV
  });
} 
```

最后，启动服务器：

```
$ lcm server -p 443 # again, probably use different port in development 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:00:18.727

所有这些框架都基于 Express 之上，后者基于具有 HTTPS 支持的 connect。

无论如何，在现实生活中，您可能希望有一个 nginx/或其他代理为您处理 https。

# c - 核心转储不工作

> ID：12020484
> 
> 赞同：2
> 
> 时间：2012-08-18T16:57:00.683
> 
> 标签：c, macos, gdb, segmentation-fault, core

当我运行带有段错误的程序时，我收到一条错误消息**Segmentation fault: 11**。出于某种原因，我没有收到（核心转储）消息。我尝试运行 shell 命令`ulimit -c unlimited`，但我仍然得到同样的错误，它并没有说核心转储。我是 GDB 的新手，所以我用一个简单的程序进行了尝试：

```
/* coredump.c */
#include <stdio.h>
int main (void) {
  int *point = NULL;
  *point = 0;
  return 0;
} 
```

但是当我使用编译时：

```
gcc coredump.c -g -o coredump 
```

运行它，它仍然说`segfault: 11`

它是否仍在我不知道的地方创建核心转储？我希望能够使用**gdb coredump core**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:06:09.783

看看这个链接：

*   [当进程出现分段错误时，如何在 Linux 中生成核心转储？](https://stackoverflow.com/questions/17965/generate-a-core-dump-in-linux)

选项包括：

*   ulimit -c 无限制（默认 = 0：不生成核心文件）

*   转储的目录必须是可写的。默认情况下，这是进程的当前目录，但可以通过设置 /proc/sys/kernel/core_pattern 来更改。

*   在某些情况下，/proc/sys/fs/suid_dumpable 中的内核值可能会阻止生成内核。

*   其他选项的“人核心”

*   `find / -name core -print 2> /dev/null`在文件系统中搜索核心文件

我*假设*您正在运行 Linux，并且我*假设*您在具有写入权限的目录中执行 .exe。

所以我的前两个猜测是1）“ulimit -c unlimited”没有设置，或者被覆盖，或者2）核心文件正在生成，但是去“其他地方”。

上述建议应该有所帮助。请发回你找到的东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T00:08:41.957

如果您正在运行从 shell 崩溃的程序，那么您应该遵循 Apple 技术说明[TN2124中的指导方针，我在对](http://developer.apple.com/library/mac/#technotes/tn2124/_index.html#//apple_ref/doc/uid/DTS10003391-CH1-SECCOREDUMPS)[SO2207233](https://stackoverflow.com/questions/2207233/how-to-enable-full-coredumps-on-os-x)的回答中发现了这些指导方针。

有几个关键点：

1.  您需要设置`ulimit -c unlimited`（`bash`相同的效果，不同的命令`tcsh`）。
2.  您需要设置`/cores`目录的权限，以便您可以在其中创建文件。默认权限为 1775；您需要 1777。1 表示已设置粘性位。
3.  然后创建核心转储，`/cores`并以 PID 为后缀（`/cores/core.5312`例如）。

如果您希望以图形方式启动的程序在崩溃时转储核心，那么您需要创建它（`/etc/launchd.conf`如果它不存在），并`limit core unlimited`在文件中添加一行。再次，请参阅技术说明中的信息以获取更多详细信息。

* * *

看它; 核心转储是巨大的！考虑这个不是很复杂或很大的程序：

```
#include <stdio.h>
int main(void)
{
    int *i = 0;
    int j = 0;
    printf("i = %d, j = %d, i / j = %d\n", *i, j, *i / j);
    return 0;
} 
```

由此产生的核心转储接近 360 MB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:07:13.520

有时核心文件不存储在当前目录中，可能遵循不同的命名规则

```
sysctl -a | grep kern.core 
```

可能会提示您的核心文件的存储位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:07:20.557

使用 gcc，如果添加标志：

```
gcc -g -dH 
```

您应该能够生成核心转储

-g 标志产生一些与 gdb 一起使用的调试信息，并且 -dH 标志在出现错误时产生核心转储

# .htaccess - .htaccess 制作友好的网址

> ID：12020490
> 
> 赞同：0
> 
> 时间：2012-08-18T16:57:39.963
> 
> 标签：.htaccess, url, friendly-url

我在制作友好 URL 时遇到问题。我需要将 url 从转换`http://blabla.eu/stats_details?date=01-2012` 为`http://blabla.eu/stats_details/01-2012`. 除了最后一个重写规则之外，其他重写规则都可以正常工作。问题是什么？

这是代码`.htaccess`：

```
AddDefaultCharset utf-8

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^admin/users/$    /admin/users/view.php [L]
RewriteRule ^admin/loans/$    /admin/loans/view.php [L]
RewriteRule ^stats_details/(.*)$ stats_details.php?date=$1 [L,QSA]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-21T19:10:19.273

我认为这必须工作，尝试粘贴

RewriteBase 上的 RewriteEngine /

```
 # Removes index.php from ExpressionEngine URLs
    RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
    RewriteCond %{REQUEST_URI} !/system/.* [NC]
    RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,NE,L]

    # Directs all EE web requests through the site index file
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# vb.net - 在 Vb.net 中保存和加载对象

> ID：12020497
> 
> 赞同：0
> 
> 时间：2012-08-18T16:59:15.537
> 
> 标签：vb.net

我需要将程序中的一个对象（该对象存储数据）保存到硬盘驱动器，以便下次程序启动时加载它

我曾尝试使用序列化和 xml 文件输出，但我似乎无法使其正常工作，因为我拥有的数据不是“字符串”对象类型。

我考虑过使用文件打开/放置/获取，但 MSDN 建议不要这样做，因为它比序列化效率低得多。

任何可以实现我的目标的简单加载/保存功能？

在此先感谢马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:31:58.923

我发现我需要在序列化之前将对象转换为二进制数据。

对于其他人，这是我的功能

```
'Imports
Imports System.IO
Imports System.Text
Imports System.Collections
Imports System.Runtime.Serialization.Formatters.Binary
Imports System.Runtime.Serialization

'Functions
Public Function Load()
    If My.Computer.FileSystem.FileExists(mstrSaveFile) Then
        Dim fs As Stream = New FileStream(mstrSaveFile, FileMode.Open)
        Dim bf As BinaryFormatter = New BinaryFormatter()
        mstrData = CType(bf.Deserialize(fs), CType(mstrData))
        fs.Close()
    End If
    Return True
End Function

Public Function Save()
    If My.Computer.FileSystem.FileExists(mstrSaveFile) = True Then
        My.Computer.FileSystem.DeleteFile(mstrSaveFile)
    End If
    Dim fs As Stream = New FileStream(mstrSaveFile, FileMode.Create)
    Dim bf As BinaryFormatter = New BinaryFormatter()
    bf.Serialize(fs, mstrData)
    fs.Close()
    Return True
End Function 
```

# c# - SvnSystemException: 无法打开文件 '...\format': 拒绝访问

> ID：12020504
> 
> 赞同：1
> 
> 时间：2012-08-18T17:00:33.710
> 
> 标签：c#, asp.net, svn, sharpsvn

我使用 sharpSvn 从自己的 Web 应用程序获取 SVN 存储库中的最后一个版本。

这就是我获得最新版本的方式：（C#）

```
using (SvnClient client = new SvnClient())
{
    client.CheckOut(new Uri("file://#URL#/"), "c:\\FOLDER");
 } 
```

在 Visual Studio 上运行时，工作正常，但是当我尝试从 iis Web 应用程序获取最新版本时抛出此异常：

“SharpSvn.SvnSystemException：无法打开文件 '\URL\format'：访问被拒绝。”

我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:32:42.343

您的网络服务器使用的用户帐户（可能类似于“IWAM_*”）需要在 #URL# 目录上具有读取权限才能从那里结帐。

仅仅签出它不需要对该目录的写权限。

确保 new Uri() 的参数采用以下格式

*   `file:///C:/some/dir`对于 C:\some\dir
*   `file://server/share/dir`对于 \server\share\dir
*   `http://server/svn/repos`对于 Subversion 存储库（例如[SvnEdge](http://www.collab.net/products/subversion)）

在您可以将目录用作 file:// 样式存储库之前，您应该使用`svnadmin create`或在 SharpSvn 中创建一个存储库`SvnRepositoryClient.CreateRepository()`。

# c#-4.0 - 沙发床。需要帮助来运行示例代码

> ID：12020506
> 
> 赞同：0
> 
> 时间：2012-08-18T17:01:16.200
> 
> 标签：c#-4.0, nosql, memcached, couchbase, memcachedb

我已经安装了 Couchbase 服务器。相同的屏幕截图如下

参考图片 1 ( [https://docs.google.com/open?id=0B8I81mZUeK_XdUhRUkFmZ1lNdU0](https://docs.google.com/open?id=0B8I81mZUeK_XdUhRUkFmZ1lNdU0) )

参考图片 2 ( [https://docs.google.com/open?id=0B8I81mZUeK_XOC1Rb0N6Q29kYUU](https://docs.google.com/open?id=0B8I81mZUeK_XOC1Rb0N6Q29kYUU) )

现在按照下面链接中提到的说明，我创建了示例代码
[http://www.couchbase.com/docs/couchbase-sdk-net-1.1/stage1.html](http://www.couchbase.com/docs/couchbase-sdk-net-1.1/stage1.html)

我的代码的Web.config如下

参考图片 3（[https://docs.google.com/open?id=0B8I81mZUeK_XbFRMUnMwLWxBdGM](https://docs.google.com/open?id=0B8I81mZUeK_XbFRMUnMwLWxBdGM)）

我尝试使用 8091 和 11211 的端口号。但仍然面临同样的问题。问题如下

当我运行相同的代码->创建用户->它似乎正在被保存。（因为它没有抛出任何错误）

参考图片 4 ( [https://docs.google.com/open?id=0B8I81mZUeK_XUjdYRlkzQjlURWs](https://docs.google.com/open?id=0B8I81mZUeK_XUjdYRlkzQjlURWs) )

当我们在创建用户后运行登录页面时，我将用户设为空。（我确定我输入了正确的用户名和密码）

参考图片 5 ( [https://docs.google.com/open?id=0B8I81mZUeK_XZ3FLclB2MjRhM0E](https://docs.google.com/open?id=0B8I81mZUeK_XZ3FLclB2MjRhM0E) )

参考图 6（[https://docs.google.com/open?id=0B8I81mZUeK_XNU5iMHNMc1RQd2c](https://docs.google.com/open?id=0B8I81mZUeK_XNU5iMHNMc1RQd2c)）

参考图片 7 ( [https://docs.google.com/open?id=0B8I81mZUeK_XTjNuaWR6ZW9acU0](https://docs.google.com/open?id=0B8I81mZUeK_XTjNuaWR6ZW9acU0) )

我现在有 2 个问题

1）如何解决上述问题（无法设置/无法获取值）

2）在管理页面（http://localhost://8091/index.html）中有没有，我可以看到键和值？

笔记：-

1）我在我的机器上以管理员权限运行

2）没有防火墙问题，因为我已确保禁用防火墙以进行测试

3）在网络配置中，我尝试了 8091 和 11211 端口。

请帮我解决这个问题

您可以从以下链接下载我的代码以供参考

[https://docs.google.com/open?id=0B8I81mZUeK_Xck9fV2t3TnFJamc](https://docs.google.com/open?id=0B8I81mZUeK_Xck9fV2t3TnFJamc)

提前致谢

=========================================

我也遵循了下面提到的链接中提到的说明。（根据我对这个问题的第一个答案）

[http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html#couchbase-bestpractice-cloud-ip](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html#couchbase-bestpractice-cloud-ip)

您可以在我下面的屏幕截图中看到相同的内容

图片 8 [ [https://docs.google.com/open?id=0B8I81mZUeK_XaFZOYWNIaFNIOXc](https://docs.google.com/open?id=0B8I81mZUeK_XaFZOYWNIaFNIOXc) ]

图片 9 [ [https://docs.google.com/open?id=0B8I81mZUeK_Xdk41VWFPLLTNaVU0](https://docs.google.com/open?id=0B8I81mZUeK_Xdk41VWFPLTNaVU0) ]

图 10 [ [https://docs.google.com/open?id=0B8I81mZUeK_XWDVZaFc0ck5ZRnM](https://docs.google.com/open?id=0B8I81mZUeK_XWDVZaFc0ck5ZRnM) ]

在我的管理页面中，我经常收到一条警告消息。您可以在我的以下链接（屏幕截图）中看到该消息。可能是这个原因。如果是如何纠正

[https://docs.google.com/open?id=0B8I81mZUeK_XRkNKQ05CTngxWjA](https://docs.google.com/open?id=0B8I81mZUeK_XRkNKQ05CTngxWjA)

我仍然无法读/写沙发底座。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:14:26.920

如果 IP 发生变化，您可能需要为 Windows 应用解决方法，请参阅此处的部分：http: [//www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html#couchbase- bestpractice-cloud-ip](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html#couchbase-bestpractice-cloud-ip)

# javascript - Node.js / nowjs - 很多用户

> ID：12020511
> 
> 赞同：0
> 
> 时间：2012-08-18T17:01:29.410
> 
> 标签：javascript, node.js, nowjs-sockets

我在 nowjs 中创建了一个服务器，大约有 80 个用户在线，它变得很慢，有时人们会断开连接。我听说我必须改变工人人数。但是怎么做呢？这是一个解决方案吗？或者也许还有其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:35:34.243

由于您提到将日志数据写入文件并且更大，因此请确保您使用的是正确的节点异步文件 i/o，因此不会阻塞——可以与可选回调一起使用。更好的是，创建写入流是可行的方法（Node 非常适合它的异步文件流功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:14:49.933

您可能遇到了扩展问题，80 个用户对我来说似乎很低。
你确定你没有在你的服务器端做任何可能阻塞的逻辑吗？任何数学或需要太多时间的东西？

如果您有缩放问题，您可能需要水平缩放您的应用程序。为此，您必须使用节点集群之类的东西来让多个工作人员处理工作，并使用 Redis 或 Mongo 来处理共享数据，也许可以在节点集群中使用消息。

我还没有把 now.js 推到那么远。我不知道在这种情况下它会如何处理。

# android - Android 不会自动旋转

> ID：12020513
> 
> 赞同：0
> 
> 时间：2012-08-18T17:01:39.850
> 
> 标签：android, android-layout

我在 Eclipse 中创建了一个备用布局

```
res/layout-land/main.xml 
```

我正在使用 Hello Android 3rd Edition 来学习 Android。

我错过了什么吗？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.oneorangetree.sudoku"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Sodoku"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".About"
            android:label="@string/about_title"
            android:theme="@android:style/Theme.Dialog">            
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:04:38.183

在设备上设置“显示”中有一个设置“自动旋转”。检查它是否已激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:39:56.523

您可以使用`Ctrl`+ `F12`。

在此处查看可能的选项 [单击此处](http://developer.android.com/tools/help/emulator.html#KeyMapping)

# asp.net-mvc - ASP MVC 如何使用集合字段更新数据库条目

> ID：12020518
> 
> 赞同：0
> 
> 时间：2012-08-18T17:02:40.013
> 
> 标签：asp.net-mvc, model-view-controller, binding, model

对于下面的附加示例，如何正确保存更新的模型？我害怕一些疯狂的东西，比如自定义模型绑定等。我想优雅地解决这个问题。

**模型**

```
public class Artist     {
    public int ArtistId { get; set; }
    public string ArtistName { get; set; }
    public virtual ICollection<Album> ArtistAlbums { get; set; }
}

public class Album     {
    public int AlbumId { get; set; }
    public string AlbumName { get; set; }
} 
```

**来自创建视图的片段**

```
<input type="text" name="ArtistAlbums" />
<input type="text" name="ArtistAlbums" /> 
```

**这是创建**操作

```
public ActionResult Create(Artist newArtist, IEnumerable<string> ArtistAlbums)     {
    foreach (var album in ArtistAlbums)         {
      newArtist.ArtistAlbums.Add(new Album { AlbumName = album });
    }
    db.Entry(newArtist).State = EntityState.Added;
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

**这是我的编辑视图**

```
@foreach (var album in Model.ArtistAlbums)    {
    <div>@album.AlbumName</div>
    <input type="text" name="ArtistAlbums" />
} 
```

**这是我的编辑操作**

```
[HttpPost]
public ActionResult Edit(Artist artist, IEnumerable<string> ArtistAlbums)  {
    foreach (var album in ArtistAlbums)         {
      artist.ArtistAlbums.Add(new Album { AlbumName = album });
    }
    // An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key.
    //db.Entry(artist).State = EntityState.Modified;

    // this one update my Artist entry, but not my Albums for this entry.
    // var oldArtist = db.Artists.Find(artist.ArtistId);
    // db.Entry(oldArtist).CurrentValues.SetValues(artist);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:57:14.050

在您的编辑操作中：

```
ArtistAlbums.ToList().ForEach(album=>artist.ArtistAlbums.Add(new Album { AlbumName = album }));
    db.Artists.Attach(artist);
    db.ObjectStateManager.ChangeObjectState(artist,EntityState.Modified);
    db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T13:47:03.307

试试这个......评论中的解释

```
[HttpPost]
public ActionResult Edit(Artist artist, IEnumerable<string> ArtistAlbums)
{
    // First detach the object with same key
    Artist tbd = db.Artists.Find(artist.Id);
    ((IObjectContextAdapter)db).ObjectContext.Detach(tbd);

    foreach (var album in ArtistAlbums)
    {
      artist.ArtistAlbums.Add(new Album { AlbumName = album });
    }

    // The above error should not occur now.
    db.Entry(artist).State = EntityState.Modified;
    db.SaveChanges();

    return RedirectToAction("Index");
} 
```

# android - Android HTML5 游戏音频自动播放

> ID：12020520
> 
> 赞同：2
> 
> 时间：2012-08-18T17:03:20.947
> 
> 标签：android, html, html5-audio

我正在开发一个 Android 应用程序，其中包括一个使用 LimeJS 的 HTML5 游戏！我的情况是：

当我打开与 WebView 一起运行的 HTML5 活动时，会播放游戏中的音频，然后按回退出活动。并且当 HTML5 Activity 有声音退出后通知通知时，之前播放的游戏中的音频将再次播放！

在 LogCat 中，当游戏音频开始时得到这个：

```
AudioFocus  requestAudioFocus() from android.media.AudioManager@42e84518Handler (android.webkit.HTML5Audio) {42d93ef8} 
```

我想知道如何从 HTML5Audio 停止这个音频焦点。

# c - 奇怪的分段错误

> ID：12020521
> 
> 赞同：0
> 
> 时间：2012-08-18T17:03:22.383
> 
> 标签：c, multidimensional-array, segmentation-fault

我定义了一个随机函数 ( `int random(int sup, int seed)`)，它返回一个介于 0 和`sup-1`. 我已经定义了一个结构点，其中 pos_parents 和 population 是二维数组。交换函数交换 v 数组的元素，它是一个“索引”数组。所有这些都是为了从总体成员中将 par_n 成员分类到 pos_parents 中，而不对同一成员进行两次分类。

这给出了分段错误。

如果我用一个显式值替换`r`里面的变量`population[v[r]][j]`，那么它所有的功能。这怎么可能？我已经尝试了随机功能，它似乎没有任何问题。

此外，当发生分段错误时， printf 甚至不会在第一个循环中激活。

```
point population[pop_size][array_size];
point pos_parents[4*par_n][array_size];
int v[pop_size];

for (i=0; i<4*par_n;i++)
    v[i]=i;

for(t=0;t<time_limit;t++) //The cycle of life
{
    for(i=0;i<4*par_n;i++)
    {
        r=random(pop_size-i,i);
        printf("%d\t",r);

        for(j=0;j<array_size;j++)
        {
            pos_parents[i][j]=population[v[r]][j];
        }
        swap(&(v[r]),&(v[pop_size-1-i]));
    } 
```

执行时 i type 3(route locations-array size), 8(pop_size), 1(time limit), 1 (par_n)

这是整个代码（不到150行），总是插入1到time_limit，因为我还没有完成循环。 [https://docs.google.com/open?id=0ByylOngTmkJddVZqbGs1cS1IZkE](https://docs.google.com/open?id=0ByylOngTmkJddVZqbGs1cS1IZkE)

PS我正在尝试编写一个进化算法，用于路线优化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:33:21.027

循环`v[i] = i;`from`0`到`4 * par_n`，但`v`它是一个大小为 的数组`pop_size`。这看起来像是一个等待罢工的越界问题。对于 in 中的计数器`i`也是如此`r = random(pop_size - i, i);`，因为`i`在 中使用`v[i]`。

# jquery - jQuery错误无法识别的表达式

> ID：12020522
> 
> 赞同：2
> 
> 时间：2012-08-18T17:03:21.993
> 
> 标签：jquery

我有一些代码在引用 jQuery 1.7.2 的特定源解决方案上完美运行

现在我将此源代码复制/粘贴到另一个引用 jQuery 1.8.0 的解决方案

我不知道 jQuery 版本是否是我的问题的根源，但我收到了一个错误：**无法识别的表达式**

这是源代码：

```
$('#ScreenshotsTable tr.#' + screenshotID).remove(); 
```

其中 screenshotID （例如）等于 7。

如您所见，我想从表格中删除一行。

知道为什么我收到错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:05:25.020

您应该`.`从选择器中删除：

```
$('#ScreenshotsTable tr#' + screenshotID).remove(); 
```

ID 是唯一的，您可以编码：

```
$('#'+screenshotID).remove(); 
```

[请注意，如果页面的文档类型不是 HTML5，则 ID 必须以字母开头。]

# java - 由于错误，无法在 cmd 上签署 apk 文件

> ID：12020523
> 
> 赞同：1
> 
> 时间：2012-08-18T17:03:36.953
> 
> 标签：java, android, cordova

我正在尝试签署由 Phonegap 在 Windows 7 系统中创建的 .apk 文件。

这是我正在运行的内容：

> jarsigner -verbose -keystore C:\Users\myuser\Desktop\myCertificate.keystore C:\folder\myapp.apk myKey

然后我被要求输入密码，我输入正确。最后我得到：

> jarsigner：无法打开 jar 文件：C:\myapp.apk

我正在按照[此处的说明进行操作](http://www.londatiga.net/it/how-to-sign-apk-zip-files/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:11:54.073

也许 apk 不在您提供的路径上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T04:37:48.380

尝试这些说明，并确保将文件名放在引号中（如果它们有空格）。

[http://developer.android.com/tools/publishing/app-signing.html#releasemode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T20:05:25.593

我无法让 jarsigner 使用 Android 的文档或类似线程中发布的任何解决方法来签署我的 APK。相反，我可以`ant release`使用此处找到的说明使用命令对我的应用程序进行签名：[如何在 Google Play 商店中签名和发布 Phonegap 应用程序](http://www.adamwadeharris.com/sign-publish-phonegap-app-google-play-store-windows/)。

简而言之：

1）使用您的密钥库信息创建一个`ant.properties`文件，如下所示：`platforms/android`

`key.store=/Users/username/Documents/path/to/my-release-key.keystore key.alias=app_name`

2）运行这些命令

`phonegap build android cd platforms/android ant release`

# android - startVoiceRecognitionActivity 上的空指针

> ID：12020524
> 
> 赞同：0
> 
> 时间：2012-08-18T17:03:43.587
> 
> 标签：android, nullpointerexception

我一直在研究以下代码：

```
package com.lorenjz.phoneremotefive;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.os.IBinder;
import android.speech.RecognizerIntent;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.util.Log;
import android.widget.Toast;

public class BlueInterface extends Service implements TextToSpeech.OnInitListener{
    static VoiceStuff carpart;
    Context context;
    private TextToSpeech tts;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub

        return null;
    }
    @Override
    public void onCreate(){
        super.onCreate();
        Log.d("interface","interface onStart called");
        carpart = new VoiceStuff(context);
        tts = new TextToSpeech(this, this);

        PackageManager pm = getPackageManager();
        List <ResolveInfo> activities = pm.queryIntentActivities(new Intent (RecognizerIntent.ACTION_RECOGNIZE_SPEECH),0);
        if (activities.size()!=0){
            Log.d("interface","Speach stuff ready to go");
        }
        else{
            Log.d("interface","Speach stuff not present");
        }
    }

    public static void startListening(Context context){
        Log.d("interface","Start Listening called");

        carpart.startVoiceRecognitionActivity(context);

    }

    private class VoiceStuff extends Activity implements TextToSpeech.OnInitListener{
        List<ResolveInfo> systemActivities=null;
private VoiceStuff(Context context){

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("interface","onCreate in voice stuff class called");

}

    private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    public void startVoiceRecognitionActivity(Context context){

          //super.startVoiceRecognitionActivity(context);
           Log.d("Main","method called");
        Intent myCrap = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        myCrap.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        myCrap.putExtra(RecognizerIntent.EXTRA_PROMPT,"Speak your command now");
        startActivityForResult(myCrap,VOICE_RECOGNITION_REQUEST_CODE);

       }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
           if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
           // Fill the list view with the strings the recognizer thought it could have heard
           ArrayList<String> matches = data.getStringArrayListExtra(
           RecognizerIntent.EXTRA_RESULTS);
           String stupid = matches.get(0);
           //Toast.makeText(MainRemote.this,"" + stupid, Toast.LENGTH_SHORT).show();
           if (stupid.equals("home")) {
               //getSpeech(1);
        } 
           if (stupid.equals("map")) {
               //getSpeech(2);
        } 

           //mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,matches));

           super.onActivityResult(requestCode, resultCode, data);
           }
}

       //super.onActivityResult(requestCode, resultCode, context);
public void myStuff(int requestCode, int resultCode, Intent data) {
       if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
       // Fill the list view with the strings the recognizer thought it could have heard
       ArrayList<String> matches = data.getStringArrayListExtra(
       RecognizerIntent.EXTRA_RESULTS);
       String stupid = matches.get(0);
       //Toast.makeText(MainRemote.this,"" + stupid, Toast.LENGTH_SHORT).show();

       //mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,matches));
       }

} //closes VoiceStuff
public void speakOut(String speakPlz) {
     Log.d("interface","speak has been called");
    //String text = txtText.getText().toString();

    tts.speak(speakPlz, TextToSpeech.QUEUE_FLUSH, null);
}

public void onInit(int status) {
    // TODO Auto-generated method stub

}
    }

    public void onInit(int status) {
        // TODO Auto-generated method stub

    }
} 
```

当我尝试调试代码时，调试器告诉我，当该行`startActivityForResult(i,VOICE_RECOGNITION_REQUEST_CODE);`正在执行时`i`，`VOICE_RECOGNITION_REQUEST_CODE`无法解析为变量。我正在使用一个内部类来弄乱这两个变量的事实吗？

在这里编辑是 LogCat：

```
 08-19 10:18:53.221: D/interface(18165): my crap:  Intent { act=android.speech.action.RECOGNIZE_SPEECH (has extras) }
08-19 10:18:53.221: D/interface(18165): VOICE_RECOGNITION_REQUEST_CODE:  1234
08-19 10:19:43.651: D/AndroidRuntime(18165): Shutting down VM
08-19 10:19:43.651: W/dalvikvm(18165): threadid=1: thread exiting with uncaught exception (group=0x41bc7300)
08-19 10:19:43.674: E/AndroidRuntime(18165): FATAL EXCEPTION: main
08-19 10:19:43.674: E/AndroidRuntime(18165): java.lang.NullPointerException
08-19 10:19:43.674: E/AndroidRuntime(18165):    at android.app.Activity.startActivityForResult(Activity.java:3351)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at android.app.Activity.startActivityForResult(Activity.java:3312)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at com.lorenjz.phoneremotefive.BlueInterface$VoiceStuff.startVoiceRecognitionActivity(BlueInterface.java:111)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at com.lorenjz.phoneremotefive.BlueInterface.startListening(BlueInterface.java:74)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at com.lorenjz.phoneremotefive.MainRemote$1.handleMessage(MainRemote.java:306)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at android.os.Looper.loop(Looper.java:137)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at android.app.ActivityThread.main(ActivityThread.java:4745)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at java.lang.reflect.Method.invokeNative(Native Method)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at java.lang.reflect.Method.invoke(Method.java:511)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-19 10:19:43.674: E/AndroidRuntime(18165):    at dalvik.system.NativeStart.main(Native Method) 
```

# java - 如何创建通用数组？

> ID：12020527
> 
> 赞同：4
> 
> 时间：2012-08-18T17:04:31.540
> 
> 标签：java, arrays, generics, instantiation

> **可能重复：**
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

`T[]`如何在 Java中创建类型数组？我不能使用`Arrays.newInstance()`，因为我没有`Class<T>`. `newInstance`某处有通用版本吗？

我的方法原型如下：

```
public <T> T[][] distribute(T ... balls) {
   T[][] answer = ????

   // filling answer with data

   return answer;

} 
```

**更新**

对不起，在上面的例子中，我可以从`balls`. 但是假设我没有这样的变量。

```
public <T> T[][] distribute() {
   T[][] answer = ????

   // filling answer with data

   return answer;

} 
```

或者

```
class<T> {
   public T[][] distribute() {

      T[][] answer = ????

      // filling answer with data

      return answer;

   }
} 
```

**更新2**

此示例也不起作用：

```
public abstract class GenericArray<T> {

abstract public T create();

public T[] gen1() {
    T[] ans = (T[]) new Object[3];
    ans[0] = create();
    ans[1] = create();
    ans[2] = create();
    return ans;
}

public Integer[] gen2() {
    Integer[] ans = new Integer[3];
    ans[0] = new Integer(0);
    ans[1] = new Integer(0);
    ans[2] = new Integer(0);
    return ans;
}

public static void main(String[] args) {

    GenericArray<Integer> a = new GenericArray<Integer>() {

        @Override
        public Integer create() {
            return new Integer(0);
        }
    };

    Integer[] b = a.gen2();
    Integer[] c = a.gen1(); // this causes ClassCastException

    System.out.println("done");

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T17:09:10.283

**1.** `Arrays`不是**_** `Generic`

**2.这就是****在编译期间和运行时检查**`Arrays`的原因，其中可以是**Generic**并且**仅在编译时检查**....**`Collections`**

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:09:57.130

`(T[][]) new Object[size][size]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:39:14.810

你问的是不可能的。一个数组**在运行时就知道它的组件类型**，不同组件类型的数组就是不同的运行时类型。这就是为什么在创建数组时，需要在运行时知道组件类型。

由于您的方法是通用的 over ，因此调用者可以在每次调用此方法时向编译器`T`指示它想要使用的方法。`T`所以想想这是多么荒谬：

```
String[][] foo = this.<String>distribute();
Integer[][] bar = this.<Integer>distribute(); 
```

右侧的编译代码对于这两行是相同的。这些`.<String>`东西只是对编译器的提示，不会影响编译的代码。所以这意味着`distribute()`必须返回一个既是`String[][]`and的东西`Integer[][]`（然后在运行时检查它，因为`String[][]`and`Integer[][]`是具体化的运行时类型）。唯一可以满足的值是`null`。

（你可能会问，为什么返回的方法不会出现这个问题`List<T>`？答案是，与数组不同，在运行时只有一个类`List`。而列表在运行时不知道它们的组件类型。所以 a和`new ArrayList<Foo>()`a*正好运行时**相同*。所以他们没有这个问题。）`new ArrayList<Bar>()`

 *这里发生的另一个类比：因此数组类型具有遵循其组件类型继承的继承模式。`Integer[][]`的子类也是如此`Object[][]`。事实上，它们`T[][]`都是`Object[][]`. 因此`Object[][]`，让我们考虑一个非数组类，而不是它的子类，`MyBaseClass`它有一堆子类。然后，您基本上要问的是能够一般地创建一个未知子类的实例`MyBaseClass`（由类型参数确定）。

```
<T extends MyBaseClass> T distribute() {
    T answer = //...?
    return answer;
} 
```

我希望你能明白为什么这是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:11:00.353

Do:`T[][] answer = (T[][]) new Object[][];`
`T`无论如何都会被编译器擦除到`Object`. 当然你需要知道数组的大小。

更新：
在您的新示例中，您在此处遇到异常：
`Integer[] c = a.gen1(); // this causes ClassCastException`
因为您正在尝试将 an`Object[]`转换为`Integer[]`. 不可能。
你得到的是一个`Object[]`但包含`Integer`引用。所以你需要这样做：

```
Object[] c = a.gen1();
for(Object n:c){  
    Integer nn = (Integer) n;  
} 
```

这没关系，因为`n`它是一个`Integer`.
但作为一般规则：如果您需要收集参数化类型对象，只需使用`ArrayList`. 在您甚至没有实际`class`通过反射实例化数组的示例中，这是唯一明智的选择*******

# opengl - 来自帧缓冲区的正确深度图值

> ID：12020533
> 
> 赞同：1
> 
> 时间：2012-08-18T17:05:44.457
> 
> 标签：opengl, depth

我目前从帧缓冲区获取深度图，但是值停留在 0.0 或 1.0 或更高。如何获得 0.0 和 1.0 之间的深度？

此外，我在片段着色器中将深度图作为 sampler2D 访问。

```
 modelsDepthTextureId = glGenTextures();
    glBindTexture(GL_TEXTURE_2D, modelsDepthTextureId);
    glTexImage2D( GL_TEXTURE_2D, 0, GL14.GL_DEPTH_COMPONENT24, screenWidth, screenHeight, 0,
        GL_DEPTH_COMPONENT, GL_INT, (java.nio.ByteBuffer) null);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:07:58.890

```
float linearize(float depth) {
    float zNear = 0.1;
    float zFar = 100.0;

    return (2.0 * zNear) / (zFar + zNear - depth * (zFar - zNear));
} 
```

深度以指数方式保存在深度纹理中。需要使用适当的近值和远值对上面的代码进行线性化。

# javascript - SlideOut 后下拉菜单截断

> ID：12020534
> 
> 赞同：0
> 
> 时间：2012-08-18T17:05:54.380
> 
> 标签：javascript, html, css, drop-down-menu, html-lists

我正在使用一个下拉菜单，我修改它以使用动画，例如使用 onmouseover 和 onmouseout 的 SlideOut 和 FadeIn。问题是在所有嵌套列表中悬停几次后出现，这导致第二个嵌套列表被切断。
您可以通过从“nav 1”移动到“nav 2”并快速返回来复制错误。

[链接到 jsFiddle](http://jsfiddle.net/WfkCY/2/embedded/result,js,html,css/ "jsFiddle")

截屏截图：http:
[//dl.dropbox.com/u/53879403/screenshot.png](http://dl.dropbox.com/u/53879403/screenshot.png)
请感谢您的任何建议/批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:26:00.777

请看这个小提琴：http: [//jsfiddle.net/SuRJ9/](http://jsfiddle.net/SuRJ9/)

我更改的代码：

```
function slideDown(toSlide) {
    currentHover(toSlide);
    $($(toSlide).children('ul')[0]).slideDown('medium',
        function(){   $(this).css('overflow','visible') });
} 
```

我在完成动画后添加了`overflow`重置。由 jQuery设置以制作滑动动画。`visible``overflow``hidden`

另外，请不要使用`onmouseout="slideUp(this)"`and `onmouseover="slideDown(this)"`，这是一种突兀的 JavaScript 并且是一种糟糕的技术。您应该使用 jQuery 分配这些事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:33:46.767

`$.fadeOut/In()`在运行动画之前应用某些样式。这些在动画完成时被移除。

您`fadeOutNav()`正在调用 stop(true) ，如果在 fadeOut() 或 fadeIn() 工作时完成，将保留它们应用于元素的样式。在这种情况下溢出：隐藏在父 ul 上。您可以移除停止并让效果冒泡，或将 a`.css('overflow','')`添加到您的链中。

# iphone - 如何在 iOS 应用中制作自定义委托

> ID：12020539
> 
> 赞同：3
> 
> 时间：2012-08-18T17:06:50.257
> 
> 标签：iphone

在 iPhone 中，每个 UIControl 都有预定义的委托方法，但是我们将如何创建自己的自定义委托方法

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-18T17:13:02.347

在你的头文件之前`@interface`，插入

```
@protocol YourDelegate <NSObject> 

@optional
- (void) anOptionalDelegateFunction;

@required
- (void) aRequiredDelegateFunction;

@end 
```

和下`@interface`

```
@property (nonatomic, assign) id<YourDelegate> delegate;
// Remember to synthesize in implementation file 
```

现在你可以调用你的 .m 文件

```
[delegate aRequiredDelegateFunction]; 
```

在委托中

*   像往常一样包含`<YourDelegate>`在 .h 文件中
*   在 .m 中，将具有自定义委托的类的委托属性分配给`self`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T13:58:01.593

创建自定义委托和协议 iOS | Swift 和 Objective-C

协议

协议是指定代理将实现的接口的方法列表。我们可以使用两种委托：Option 和 Required。它们很容易解释，但不同之处在于Required会抛出一个错误，让你知道你的类不符合协议。默认情况下还需要协议方法，因此如果您希望它是可选的，请不要忘记该可选关键字。如果您使用的是 swift，如果您需要可选方法，还需要添加 @objc 前缀。

**迅速**

```
//
//  MyTimer.swift
//  SwiftProtocol
//
//  Created by Barrett Breshears on 10/11/14.
//  Copyright (c) 2014 Sledge Dev. All rights reserved.
//

import UIKit

// set up the MyTimerDelegate protocol with a single option timer function
@objc protocol MyTimerDelegate{
       optional func timerFinished()
}

class MyTimer: UIViewController {

   // this is where we declare our protocol
   var delegate:MyTimerDelegate?

   // set up timer variables and labels
   var timer:NSTimer! = NSTimer()
   var labelTimer:NSTimer! = NSTimer()
   var timerLabel:UILabel! = UILabel()
   var timerCount = 0
   var duration = 0

   override func viewDidLoad() {
      super.viewDidLoad()

      // Do any additional setup after loading the view.
      timerLabel = UILabel(frame: self.view.frame)
      timerLabel.textAlignment = NSTextAlignment.Center
      self.view.addSubview(timerLabel)
   }

    override func didReceiveMemoryWarning() {
       super.didReceiveMemoryWarning()
       // Dispose of any resources that can be recreated.
   }

   func startTimer(timerDuration:Double){
       self.duration = Int(timerDuration)
       timerLabel.text = String(format: "%d", duration)

       timer = NSTimer.scheduledTimerWithTimeInterval(timerDuration, target: self, selector: Selector("timerFired:"), userInfo: nil, repeats: false)

       labelTimer = NSTimer.scheduledTimerWithTimeInterval(1.0, target: self, selector: Selector("updateLabel:"), userInfo: nil, repeats: true)

       }

             timer.invalidate()
       }
       if(labelTimer.valid){
           labelTimer.invalidate()
       }
        // ************************************** \\
        // ************************************** \\
        // This is the important part right here
       // we want to call our protocol method
       // so the class implementing this delegate will know
       // when the timer has finished
       // ************************************** \\
       // ************************************** \\
       delegate?.timerFinished!()

     }

    func updateLabel(timer:NSTimer){
      duration = duration - 1
      timerLabel.text = String(format: "%d", duration)
    }

        /*
       // MARK: - Navigation

       // In a storyboard-based application, you will often want to do a little preparation before navigation
     override func prepareForSegue(segue: UIStoryboardSegue!, sender: AnyObject!) {
      // Get the new view controller using segue.destinationViewController.
     // Pass the selected object to the new view controller.
    }
    */

} 
```

这是一个非常简单的例子，但这就是正在发生的事情。UIViewController 有一个启动计时器方法，它设置了两个计时器：一个在总时间完成时触发，另一个每秒触发一次以更新计时器标签。当总持续时间计时器完成时，将调用 timerFired 方法，这就是我们运行委托的 timerFinished 方法的地方。现在让我们用 Objective-C 做同样的事情。

**Objective-C**

```
 //
   //  MyTimer.h
   //  ObjectIveCProtocol
   //
   //  Created by Barrett Breshears on 10/11/14.
   //  Copyright (c) 2014 Sledge Dev. All rights reserved.
   //

   #import 

   // set up the MyTimerDelegate protocol with a single option timer finished function
   @protocol MyTimerDelegate 
   @optional
    -(void)timerFinished;

   @end

   @interface MyTimer : UIViewController
   // this is where we declare our protocol
   @property (nonatomic, strong) id delegate;
   // set up timer variables and labels
   @property (nonatomic, strong) NSTimer *timer;
   @property (nonatomic, strong) NSTimer *labelTimer;
   @property (nonatomic, strong) UILabel *timerLabel;
   @property (nonatomic, assign) int timerCount;
   @property (nonatomic, assign) int duration;

   - (void)startTimer:(float)duration;

   @end

   //
   //  MyTimer.m
   //  ObjectIveCProtocol
   //
   //  Created by Barrett Breshears on 10/11/14.
   //  Copyright (c) 2014 Sledge Dev. All rights reserved.
   //

    #import "MyTimer.h"

    @interface MyTimer ()

    @end

    @implementation MyTimer

    - (void)viewDidLoad {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
        _timer = [[NSTimer alloc] init];
        _labelTimer = [[NSTimer alloc] init];
        _timerCount = 0;
        _duration = 0;

        _timerLabel = [[UILabel alloc] initWithFrame:self.view.frame];
        [self.view addSubview:_timerLabel];
        [_timerLabel setTextAlignment:NSTextAlignmentCenter];

    }

    - (void)didReceiveMemoryWarning {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (void)startTimer:(float)duration{
       _duration = (int)duration;
       _timerLabel.text = [NSString stringWithFormat:@"%d", _duration];

       _timer = [NSTimer scheduledTimerWithTimeInterval:duration target:self selector:@selector(timerFired:) userInfo:nil repeats:NO];

        _labelTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabel:) userInfo:nil repeats:YES];

     }

    - (void)timerFired:(NSTimer *)timer {
          if ([_timer isValid]) {
               [_timer invalidate];
          }
          _timer = nil;
          if ([_labelTimer isValid]) {
              _labelTimer invalidate];
          }
          _labelTimer = nil;
          // ************************************** \\
          // This is the important part right here
          // we want to call our protocol method here
          // so the class implementing this delegate will know
         // when the timer has finished
         // ************************************** \\
         [_delegate timerFinished];
     }

     - (void)updateLabel:(NSTimer *)timer{
          _duration = _duration - 1;
          _timerLabel.text = [NSString stringWithFormat:@"%d", 
          _duration];
      }

 @end 
```

所以同样的事情只是语法不同。UIViewController 有一个启动计时器方法，它设置了两个计时器：一个在总时间完成时触发，另一个每秒触发一次以更新计时器标签。当总持续时间计时器完成时，将调用 timerFired 方法，这就是我们运行委托的 timerFinished 方法的地方。

***代表们***

现在我们已经设置了所有协议，我们所要做的就是实现它们。我们将通过创建一个委托来做到这一点。委托是一个符合协议的变量，类通常使用它来通知事件，在这种情况下是计时器完成。为此，我们将协议添加到类声明中，让我们的类知道它必须遵守委托。然后我们将委托方法添加到我们的类中。

**迅速**

```
 //
     //  ViewController.swift
     //  Swift-Protocol

     //  Created by Barrett Breshears on 10/11/14.
     //  Copyright (c) 2014 Sledge Dev. All rights reserved.

     import UIKit

      // add our MyTimerDelegate to our class
     class ViewController: UIViewController, MyTimerDelegate {

            var timer:MyTimer = MyTimer()

            override func viewDidLoad() {
               super.viewDidLoad()

               timer.view.frame = self.view.frame
               // ************************ \\
               // This is where we let the delegate know 
               // we are listening for the timerFinished method
               // ************************ \\
               timer.delegate = self
               self.view.addSubview(timer.view)
               timer.startTimer(10.0)        
           }

           override func didReceiveMemoryWarning() {
                 super.didReceiveMemoryWarning()
                 // Dispose of any resources that can be recreated.
             }

          // ************************ \\
          // This is where our delegate method is fired
           // ************************ \\
          func timerFinished(){
              timer.startTimer(10.0)
              println("Hey my delegate is working")
          }

  } 
```

所以这里重要的是我们将 timer.delegate 设置为 self 以便调用 ViewController 的方法 timerFinished() 类。

**Objective-C**

```
 //
        //  ViewController.h
        //  ObjectIveCProtocol
        //
        //  Created by Barrett Breshears on 10/10/14.
        //  Copyright (c) 2014 Sledge Dev. All rights reserved.

         #import 
         #import "MyTimer.h"

         // add our MyTimerDelegate to our class
         @interface ViewController : UIViewController 

         @property (nonatomic, strong) MyTimer *timer;

         @end

         //  ViewController.m
         //  ObjectIveCProtocol
         //  Created by Barrett Breshears on 10/10/14.
         //  Copyright (c) 2014 Sledge Dev. All rights reserved.

         #import "ViewController.h"

         @interface ViewController ()

         @end

         @implementation ViewController

            - (void)viewDidLoad {
                 [super viewDidLoad];
                 // Do any additional setup after loading the view, typically from a nib.
                 _timer = [[MyTimer alloc] init];
                 _timer.view.frame = self.view.frame;
                 _timer.delegate = self;
                 [self.view addSubview:_timer.view];
                 [_timer startTimer:10.0];

             }

             - (void)didReceiveMemoryWarning {
                  [super didReceiveMemoryWarning];
                  // Dispose of any resources that can be recreated.
            }
             -(void)timerFinished{
                   [_timer startTimer:10.0];
                   NSLog(@"Hey my delegate is working!");
              }

            @end 
```

当我们运行代码时，我们看到计时器标签被添加并设置为 10 秒计时器。它倒计时，当它到达 0 时通知视图控制器，重新启动计时器并打印“嘿，我的代表正在控制台中工作”。

如果您对代码有任何疑问或发现本教程有帮助，请在下面的评论中告诉我！我很感激反馈。也不要忘记在推特上关注我。我一直在寻找 iOS 开发者来发推文。

如果您想关注允许，您可以在此处从 GitHub 下载项目：

[https://github.com/barrettbreshears/objective-c-protocol](https://github.com/barrettbreshears/objective-c-protocol)

或者，

[https://github.com/barrettbreshears/swift-protocol](https://github.com/barrettbreshears/swift-protocol)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-18T17:12:11.117

在您的班级中创建一个 id 对象委托。创建一个 getter 和 setter，以便其他类可以将自己设置为委托。在您的班级中添加以下内容：

```
@interface MyClass (Private)
-(void)myDelegateMethod;
@end 
```

然后在你想要回调到委托类的任何函数中执行以下操作：

```
if ( [delegate respondsToSelector:@selector(myDelegateMethod)] ) {
[delegate myDelegateMethod];
} 
```

# c# - 为什么要同时使用值类型和引用类型

> ID：12020544
> 
> 赞同：0
> 
> 时间：2012-08-18T17:07:19.570
> 
> 标签：c#

我知道黑白值类型和引用类型的区别。但为什么我们两者都需要？我们可以使用引用类型而不是值类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:19:16.323

实际上，您可以构建一种只知道引用类型的语言。值类型的存在主要是出于效率原因。例如，将数值类型和 bool 类型实现为值类型会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:36:34.667

要了解值类型，首先必须了解存储位置和引用类型的概念。

对象一般使用字段来表示其状态，运行代码一般使用变量和参数来表示其状态。这些东西，以及阵列槽，统称为“存储位置”。

引用类型的存储位置保存一个对象标识符，或者一个特殊的“空”值。这样的存储位置实际上并不保存对象——只是可以用来快速定位它们的标识符。声明为接口类型（例如`ICollection<T>`）的存储位置保存对已知实现指定接口（或“null”）的对象的引用。

复制引用类型的存储位置只是复制标识符。它对引用对象的物理状态没有任何影响。从概念上讲，这可能看起来很简单，但可能很棘手。问题在于，虽然引用类型的存储位置在物理上保存了一个对象标识符，但从语义上讲，这样的存储位置可用于捕获对象的以下任何方面：

1.  它的身份（特别是当它与持有对同一对象的引用的其他存储位置相关时）
2.  其不变的特性
3.  其可变特性

当然，在物理上，引用类型的存储位置保存对象的标识。尽管如此，这些位置通常在语义上用于保存其他信息。例如，考虑一个对象`George`包含一个`thing`类型为 的字段`ICollection<integer>`。这样的存储位置将保存对整数集合的引用，这将允许枚举它们，并且可能允许也可能不允许添加或删除事物。`George`的内容如何影响的状态`thing`？它可能以多种方式影响国家。

1.  `George` 可能期望 `thing` 拥有某种不可变集合的身份——它总是会返回相同的一组数字。如果碰巧存在多个包含相同数字的不可变集合，则 `George` 的状态不会受到哪些集合被 `thing` 标识的影响。它的状态仅仅取决于不可变的内容。
2.  `George` 可能在 `thing` 中存储了对它创建的可变列表的引用，并且它不与任何其他对象共享。`George` 期望 `thing` 引用的列表将保存它放在那里的任何东西，而不是其他任何东西。在这种情况下，`George` 不会关心它的集合是否被另一个具有相同可变特征的集合替换。它只是对该集合的可变内容感兴趣。
3.  有可能 `George` 不关心 `thing` 引用的集合的内容，但它的工作是为该集合添加东西，以使其他关心内容的对象受益。在这种情况下，集合的身份是最重要的——'thing' 必须持有对与期望看到 'George' 添加的东西的对象相同的集合的引用。
4.  最后，George 可能对可变内容和 `thing` 引用的对象的身份都感兴趣。如果 `George` 是期望其集合从其他对象接收项目的对象，则这种情况将适用。

请注意，在上述所有四种情况下，存储位置的类型完全相同。没有关于该存储位置的声明表明它的哪些方面很重要。进一步注意，许多复杂性源于类引用通常会封装可变状态和身份这一事实。如果存储位置没有封装身份的概念，事情会简单得多。

输入值类型。如果一个存储位置的类型是值类型结构，例如：

```
结构点3d
{
  公共双 X,Y,Z;
  Point3d（双 X，双 Y，双 Z）
  {
    这个.X = X; 这个.Y = Y; 这个.Z = Z;
  }
}

```

该存储位置将保存该结构的字段的内容（在这种情况下，为fields 、和`double`中的三个值。如果一个类具有该类型的字段，则该字段表示的状态将是其中保存的三个数字。不像类对象，等价可能取决于内容，也可能不取决于内容，结构类型没有这种歧义。两个暴露字段结构（有时称为 PODS--Plain Old Data Structures）如果它们是相同的类型，并且如果它们对应字段是等价的。`X``Y``Z`

尽管类可以做许多值类型不能做的事情，但这种能力会造成混乱、歧义和复杂性。例如，如果想对一个类的状态进行“快照”，就必须知道它的字段的哪些方面对其状态很重要。如果类对象的状态`Larry`依赖于`Mike`它所引用的对象的可变状态，那么拍摄`Larry`' 状态的快照也需要拍摄`Mike`' 状态的快照（并存储对该快照的引用在副本的所有字段中，`Larry`其中原件`Larry`将包含对`Mike`) 的引用。相比之下，复制暴露字段结构很容易。只需复制其所有字段。

暴露字段结构是出色的数据持有者，但有几个限制：

1.  一个结构（无论是公开字段还是私有字段）可以保存可变数量的数据的唯一方法是保存对保存数据且永远不会更改的对象的引用。由于结构无法知道其某个字段是否包含对对象的唯一现存引用，因此它无法知道是否有任何引用被期望它们不会改变的事物所持有。
2.  虽然结构可以在自己的方法中修改自身，但编译器有时会在结构的副本而不是原始结构上执行结构方法。虽然这通常被认为是避免可变结构的原因，但这样的问题只影响会修改*自身*的结构。它不会影响将其字段暴露给直接外部修改的结构。

假设一个类的状态取决于 5,000 个 3-d 点。如果该`Point3d`类型将成为一个类，则必须使该`Point3d`类型不可变，或者保留对它的 5,000 个实例的唯一现存引用。如果`Point3d`类型是不可变的，那么任何时候想要改变由此指示的状态的任何方面，都必须创建一个全新的`Point3d`实例并放弃旧的实例。如果类型是可变的，那么任何时候想要将一个点的坐标暴露给外部代码，都必须复制`X`、`Y`和`Z`值。这两种选择似乎都不是很令人愉快。

制作`Point3d`暴露字段结构可以消除这两个问题。由于 a`Point3d`只不过是`X`,`Y`和`Z`, 一个包含 5,000 个对象的数组`Point3d`将只包含 15,000 个数字。将 any 暴露`Point3d`给外界将自动复制三个关联的数字。如果一个人希望在不影响其他人的情况下改变`Z`a 的坐标`Point`，那没问题 - 如果`Point`存储在一个数组中，可以通过以下方式将 9.8 添加到数组插槽 4 的 Z 坐标

```
  MyArray[4].Z += 9.8;

```

如果`Point`存储在其他类型的集合中，事情会有点尴尬，但还不错：

```
  Point3d temp = MyArray[4];
  温度.Z += 9.8;
  MyArray[4] = 温度；

```

比`Point3d`上课方便多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:28:38.160

我认为我能想到的最简单的解释方法是：

值类型表示不变的值。无论是哪个对象，它都`1`将永远存在`1`，并且`3.14159265359`永远存在`3.14159265359`。并`8/18/2012 17:23 UTC`代表一个始终相同的确切时刻。因此，我可以使用这些值创建一千个不同的`int`对象`DateTime`，并且无论它们在哪里以及如何使用它们，它们总是完全相同的。

但是，即使规格相同，引用类型也不总是相同的。我可以在给定的地址建造一所房子，然后把计划交给一个朋友，他可以建造另一栋完全相同规格、同样大小、甚至同样景观和同样大小院子的房子，但不管你多么努力地建造它们看起来一样，两栋房子仍然永远不会完全一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:17:37.170

好吧，也许您错过的差异之一是值类型在堆栈中分配，而引用类型在堆中分配。这会产生很大的性能差异（因为一个是间接访问的指针，另一个是值本身）。

**编辑：** 我提到堆和堆栈是错误的，如评论中所示。正确的说法应该是 Eric Lippert[在这里](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)所说的：

*“在桌面 CLR 上的 C# 的 Microsoft 实现中，当值是局部变量或临时值，不是 lambda 或匿名方法的封闭局部变量，并且方法体不是时，值类型存储在堆栈中一个迭代器块，并且抖动选择不注册该值。”*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T17:21:08.940

值类型`value`直接存储。

例如：

```
//I and J are both of type int
I = 20;
J = I; 
```

这里，`int`是一个值类型，这意味着上面的语句将导致内存中的两个位置。对于值类型的每个实例，都会分配单独的内存并将其存储在堆栈中。它提供快速访问，因为值位于堆栈上。

引用类型存储`reference`到值。

例如：

```
Vector X, Y; //Object is defined. (No memory is allocated.)
X = new Vector(); //Memory is allocated to Object. //(new is responsible for allocating memory.)
X.value = 30; //Initialising value field in a vector class.
Y = X; //Both X and Y points to same memory location. //No memory is created for Y.
Console.writeline(Y.value); //displays 30, as both points to same memory
Y.value = 50;
Console.writeline(X.value); //displays 50. 
```

**注意：**如果变量是引用的，则可以通过将其值设置为 null 来指示它不引用任何对象。

引用类型存储在堆上，它提供相对较慢的访问，因为值位于堆上。

# ruby-on-rails - Model.all 中的 Where 子句

> ID：12020545
> 
> 赞同：0
> 
> 时间：2012-08-18T17:07:19.917
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ 新手，有以下几点：

```
students = Student.all(:order => "score DESC",
            :limit => 5) 
```

但是，我也想在其中添加一个 where 子句，但出现错误“未知键：位置”。我的`student`表引用了一个`exam`表 ( `t.references :exam`)，它有一个`date`字段，所以我需要执行以下操作：

```
students = Student.all(:where => "exam.date='01/01/2012'",
                       :order => "score DESC",
                       :limit => 5) 
```

如何`where`在方法中使用子句`all`并且是`exam.date='01/01/2012'`正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T17:19:08.973

带参数的[`all`](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-all)方法是一个 pre-Rails 3 API，`all(*args)`等效于[`find(:all, *args)`](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find)，它采用以下`:conditions`选项：

```
students = Student.all(:conditions => "exam.date='01/01/2012'",
                       :order => "score DESC",
                       :limit => 5) 
```

不过，通常首选使用 Rails 3 的可链接关系方法：

```
students = Student.where("exam.date='01/01/2012'").order('score DESC').limit(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:10:26.903

你应该使用`#where`方法：

```
students = Students.where('exam.date = ?', '01/01/2012').all(order: 'score DESC', limit: 5) 
```

# android - 如何管理从本地移动应用程序调用 Play2!-Scala REST 服务发送的用户请求的身份验证/授权

> ID：12020549
> 
> 赞同：10
> 
> 时间：2012-08-18T17:07:43.480
> 
> 标签：android, scala, authentication, playframework-2.0

我一直在研究 Play2!Scala 文档，了解为用户请求实现身份验证/授权的可能方法，我必须说我有点迷失了。我想了解更多关于从移动设备发送的请求如何在 Play2!Scala 支持的 REST 服务上进行身份验证/授权的信息。

首先，似乎 Play2/scala 有很多 auth-modules ：例如[t2v 的 Play20-auth](https://github.com/t2v/play20-auth)。但问题是，这些解决方案基于在客户端存储 cookie。那正确吗 ？**从纯 Web**的角度来看，这很有意义：请求是从浏览器发送的，服务器可以将 cookie 存储在客户端等。

现在，如果我有一个本机移动应用程序（在 IOS 或 Android 上）并且我只是调用一个由 Play2!Scala 应用程序支持的 REST 服务。在这种情况下，我没有使用浏览器，因此服务器无法在客户端应用程序上存储 cookie。

我还能使用[t2v 的 Play20-auth](https://github.com/t2v/play20-auth)等模块进行授权/身份验证吗？

处理这种事情的最佳做法是什么？

任何帮助将不胜感激，在此先感谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T18:58:06.417

好的，这是为了认证，然后登录是分开的，你可以使用自己的系统或者openID之类的东西。问题是如何存储用户被认证的。

保护您的 REST 服务的主要思想是使用在服务器端使用用户标识符签名的身份验证令牌。它会这样：

1.  用户输入一个 ID/密码
2.  一个休息方法检查这个，如果它是有效的，将一个令牌发送回手机。您将其存储在您的应用程序中
3.  每次调用您的 REST API 时，您都会发送用户 ID 和令牌，并检查服务器上的令牌。

您有两种生成和检查令牌的解决方案：

1.  令牌基本上是用户 ID，与您自己的一些盐（无论您想要什么秘密消息）连接，然后在您的服务器上使用私钥签名。就我个人而言，我使用 HMAC-SHA256 完成了此操作（在我的 scala 代码中使用 javax.crypto）。如果有人尝试使用您的 REST API，他们将无法生成令牌，因为他们不知道您的私钥或秘密。每次您在 REST API (3) 上收到请求时，您只需重新计算哈希值并将其与作为令牌发送的哈希值进行比较。
2.  另一个解决方案是在数据库中为每个用户存储一个随机数，而不是带有用户 ID 的 HMAC。这将是您的令牌。每次收到请求时，您都会在数据库中检查该用户的秘密令牌，并查看它是否与查询中的相同。

这将创建无限令牌，因此您的用户将永远不会被注销，您可以很容易地为这些解决方案添加到期日期：

1.  如果使用 HMAC，则输入您的令牌（在签名之前）当前日期。例如，如果您想要一个 24 小时的会话，您可以执行以下操作：

    ```
    val format = new SimpleDateFormat("d/M/yyyy");  
    isoFormat.setTimeZone(TimeZone.getTimeZone("UTC"));  
    val date = format.format(new Date());  
    val token = calculateHMAC(userID + date + secret); 
    ```

    对于较短/较长的时期，您可以更改格式以包含更多或更少，以便每次生成令牌以检查它时，您都属于同一时期。

2.  对于随机数/数据库解决方案，您只需存储随机令牌的创建日期，然后查看它是否在您喜欢的时间段内。

如果您使用来自第三方的 OpenID（或类似）标识，则必须向加载 openID 提供程序页面的用户显示 WebView，您只需确保身份验证后的重定向页面包含生成的隐藏在某处的令牌（例如在标题中），然后使用您的应用程序代码提取它。

这很容易自己实现，但是我已经看到了一个用于 play2 的插件来处理令牌身份验证： [https](https://github.com/orefalo/play2-authenticitytoken) ://github.com/orefalo/play2-authenticitytoken （从未使用过个人）和一个用于无状态身份验证的插件： [https:// github.com/blendlabs/play20-stateless-auth](https://github.com/blendlabs/play20-stateless-auth)

对于登录位，您不必实现它，那里有很好的模块可供使用：

*   [https://github.com/joscha/play-authenticate](https://github.com/joscha/play-authenticate)
*   [https://github.com/jaliss/securesocial](https://github.com/jaliss/securesocial)

# ios - UIPickerView didSelectRow 事件滞后或完全删除

> ID：12020552
> 
> 赞同：1
> 
> 时间：2012-08-18T17:08:45.360
> 
> 标签：ios, opengl-es, event-handling, uipickerview

我有一个 UIPickerView didSelectRow 消息仅在长时间延迟后发送的情况。在某些情况下，它们根本不会被发送。

上下文：我的应用程序在用户旋转轮子以选择某些内容时执行了一些繁重的动画计算和渲染工作。你可以转动轮子，它看起来工作正常；however, when a row is selected, the didSelectRow message takes several seconds to reach my delegate. 有时，我的代表永远不会收到消息。

显然，它与计算负载有关。但是，我不明白的是，为什么消息不能在帧之间“偷偷溜走”。这些消息不是在某个地方排队吗？

如果他们没有排队，有没有办法在帧之间轮询选择器？

# javascript - Javascript 对象与 setInterval

> ID：12020555
> 
> 赞同：0
> 
> 时间：2012-08-18T17:09:13.267
> 
> 标签：javascript, function, object, raphael

当我在寻找一个仅使用 Javascript 实现的模拟时钟的好例子时，我发现[**了这个**](http://www.emanueleferonato.com/2010/12/11/javascript-analog-clock-with-no-images-and-no-css/)由 Emanuele Feronato 编写的有趣时钟，它使用了一个非常强大的 Javascript 库，名为[Raphaël](http://raphaeljs.com/)

我玩了一段时间，然后我想在这些时钟上有多个不同时间的时钟，可能是根据不同的时区，但这里不是这种情况。

所以我所做的是创建单独的时钟对象并设置不同的时间。它起作用了，但是当脚本遇到 setInterval() 函数时问题就来了，它并没有真正起作用，时钟的指针没有旋转。

我不太擅长 Javascript 内置函数，也找不到防止此问题的解决方案，无论如何我在这里发布我的代码。

```
function createClocks(){
     /* for the time being assume these Date objects are unique */
     var diffDate_01 = new Date();
     var diffDate_02 = new Date();

     /* create separate clock Objects */ 
     var clok_01 = new clock(diffDate_01);
     var clok_01 = new clock(diffDate_02);

     /* calling update_clock function wrapped within setInterval to make the clock's hand rotatable */ 
     setInterval("clok_01.update_clock(diffDate_01)", 1000);
     setInterval("clok_01.update_clock(diffDate_02)", 1000);

}

function clock(diffDate){
        /* this is the place where the base implementation of the clock stands I removed the setInterval("update_clock()",1000); because I want to call it from outside as per Object separately */

        function update_clock(diffDate){
            var now = diffDate;
            var hours = now.getHours();
            var minutes = now.getMinutes();
            var seconds = now.getSeconds();
            hour_hand.rotate(30*hours+(minutes/2.5), 100, 100);
            minute_hand.rotate(6*minutes, 100, 100);
            second_hand.rotate(6*seconds, 100, 100);

        }
 } 
```

对于 HTML 部分，我正在创建动态时钟`<div>`标签，并将所有这些标签附加到`<div>`HTML 文档正文中存在的标签中。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T17:11:13.253

请，请永远不要使用字符串`setInterval()`。这会导致范围问题和潜在的其他问题。

当您使用字符串时，该字符串会`eval()`在全局范围内进行评估。因此，它无法访问您的任何局部变量。还有许多其他问题，包括您没有使 update_clock 成为时钟对象的方法这一事实。

这是一个工作、重写和清理的代码版本，它更加面向对象并支持几种新方法：http: [//jsfiddle.net/jfriend00/wKVC7/](http://jsfiddle.net/jfriend00/wKVC7/)

而且，这是代码：

```
function clock(id, initialTime) {
    // we store each clock in global map clock.clocks
    // create global clock map if it doesn't already exist
    clock.clocks = clock.clocks || {};
    // store this newly created clock in the map
    clock.clocks[id] = this;
    this.id = id;

    // canvas for this clock (remembered as an instance variable)
    this.canvas = Raphael(id, 200, 200);

    // draw clock face
    var clockFace = this.canvas.circle(100,100,95);
    clockFace.attr({"fill":"#f5f5f5","stroke":"#444444","stroke-width":"5"})  

    // draw clock tick marks
    var start_x, start_y, end_x, end_y;
    for(i=0;i<12;i++){
        start_x = 100+Math.round(80*Math.cos(30*i*Math.PI/180));
        start_y = 100+Math.round(80*Math.sin(30*i*Math.PI/180));
        end_x = 100+Math.round(90*Math.cos(30*i*Math.PI/180));
        end_y = 100+Math.round(90*Math.sin(30*i*Math.PI/180));    
        this.canvas.path("M"+start_x+" "+start_y+"L"+end_x+" "+end_y);
    }

    // draw the three hands (hour, minutes, seconds)
    // save each path as an instance variable
    this.hour_hand = this.canvas.path("M100 100L100 50");
    this.hour_hand.attr({stroke: "#444444", "stroke-width": 6});
    this.minute_hand = this.canvas.path("M100 100L100 40");
    this.minute_hand.attr({stroke: "#444444", "stroke-width": 4});
    this.second_hand = this.canvas.path("M100 110L100 25");
    this.second_hand.attr({stroke: "#444444", "stroke-width": 2}); 

    // draw center pin
    var pin = this.canvas.circle(100, 100, 5);
    pin.attr("fill", "#000000");    

    // update with the actual time
    this.drawTime(initialTime);
 }

clock.prototype = {
    // start the clock running automatically
    start: function() {
        // we have just one global timer running
        // check to see if it is going - if not start it
        if (!clock.timer) {
            clock.timer = setInterval(function() {
                var clocks = clock.clocks;   // get global map
                for (var i in clocks) {
                    if (clocks.hasOwnProperty(i)) {
                        if (clocks[i].running) {
                            clocks[i].update();
                        }
                    }
                }
            }, 1000);
        }
        // if we weren't already running, start this clock
        if (!this.running) {
            var now = new Date();
            this.timeOffset = now - this.currentTime;
            this.update();
            this.running = true;
        }

        return(this);
    },

    // stop the clock
    stop: function() {
        this.running = false;
    },

    destroy: function() {
        this.stop();
        delete clock.clocks[this.id];
    },

    // update the clock according to time of day
    update: function() {
        var now = new Date();
        this.drawTime(new Date(now - this.timeOffset));
    },   

    // update the clock - if no time is passed in, then it will use the current time
    drawTime: function(customDate) {
        var now = customDate || new Date();
        var hours = now.getHours();
        var minutes = now.getMinutes();
        var seconds = now.getSeconds();
        this.hour_hand.rotate(30*hours+(minutes/2.5), 100, 100);
        this.minute_hand.rotate(6*minutes, 100, 100);
        this.second_hand.rotate(6*seconds, 100, 100);
        this.currentTime = now;
    }
};
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:14:24.970

这是行不通的，因为您`diffDate`以错误的方式通过。

要实际传递您的变量，请使用以下命令：

```
var update_clock=(function (diffDate)
    {return function{
        var now = diffDate;
        var hours = now.getHours();
        var minutes = now.getMinutes();
        var seconds = now.getSeconds();
        hour_hand.rotate(30*hours+(minutes/2.5), 100, 100);
        minute_hand.rotate(6*minutes, 100, 100);
        second_hand.rotate(6*seconds, 100, 100);

    }
})(diffDate); 
```

然后你可以这样称呼它：

```
window.setInterval(update_clock,1000) 
```

# c# - Windows 8 的 mvvmlight 中缺少 EventToCommand 行为 - 解决方法？

> ID：12020559
> 
> 赞同：6
> 
> 时间：2012-08-18T17:09:43.950
> 
> 标签：c#, windows-8, mvvm-light, winrt-xaml

问题真的说明了一切:)

我正在使用 MVVM Light 在 XAML/C# 中编写一个 Windows 8 应用程序，我注意到 EventToCommand 功能尚未实现。

有没有人可以建议的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-27T12:48:08.427

[您现在可以使用Visual Studio 2013](http://msdn.microsoft.com/en-us/library/windows/apps/dn457340.aspx)的 Behaviors SDK (XAML) 完成 EventToCommand 过去所做的事情，而无需使用其他工具（@localJoost 的[WinRTBehaviors](http://winrtbehaviors.codeplex.com/)在帮助我们所有人之后现在已被弃用）：

![在此处输入图像描述](../Images/ed2355a88a66cd453b90f555008a83d2.png)

其使用示例如下：

```
<Slider x:Name="Sl_VolumeSilder">
        <Interactivity:Interaction.Behaviors>
            <Core:EventTriggerBehavior EventName="ValueChanged">
                <Core:InvokeCommandAction Command="{Binding OnSliderValueChangedCommand}" CommandParameter="{Binding ElementName=Sl_VolumeSilder, Path=Value}"/>
            </Core:EventTriggerBehavior>
        </Interactivity:Interaction.Behaviors>
</Slider> 
```

引用交互性和核心的地方：

```
xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
xmlns:Core="using:Microsoft.Xaml.Interactions.Core" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T19:00:03.957

查看 LocalJoost 使用 Reactive Extensions 编写的 EventToCommand 行为：http: [//dotnetbyexample.blogspot.be/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html](http://dotnetbyexample.blogspot.be/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T18:23:16.630

我刚刚就该问题发表了一篇博文，请参阅我的条目。

[http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html](http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html)

使用来自@localJoost 的 WinRTBehaviors 和 Win8nl

# cakephp - HABTM 无法与相关表中的 VARCHAR 主键建立关系

> ID：12020563
> 
> 赞同：1
> 
> 时间：2012-08-18T17:09:56.693
> 
> 标签：cakephp, has-and-belongs-to-many

我有一个具有多个 HABTM 关系的架构。在这个阶段我烘烤了几乎所有的代码来测试模式。

我注意到，除非相关表具有 INT 主键，否则 HATBM 关系无法正确实现。

我需要使用一些 VARCHAR(50) 的 PK。如果 PK 为 VARCHAR(50)，HABTM 似乎无法正确更新连接表。

有人知道解决方法吗？我在 Centos 6.3 上使用 cake 2.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:03:00.217

CakePHP 仅原生支持使用`INT`或`CHAR(36)`主键。为了`VARCHAR(50)`用作 PK，您需要使用该[`$primaryKey`](http://book.cakephp.org/2.0/en/models/model-attributes.html#primarykey)属性并在模型函数（例如`beforeSave`）或控制器中对您的 PK 进行任何生成/操作：

```
if($this->data) {
  $this->data['SomeModel'][$this->SomeModel->primaryKey] = 'your key value';
} 
```

# c# - Plinq、Cores 和 WithDegreeOfParallelism？

> ID：12020568
> 
> 赞同：8
> 
> 时间：2012-08-18T17:10:29.177
> 
> 标签：c#, .net, .net-4.0, plinq

据我了解，Plinq 按核心数决定要打开多少线程（每个线程在不同核心上的线程上）。

```
__________

  Core 1
  Core 2
  Core 3
  Core 4
___________ 
```

因此，如果我有一个 Plinq 任务找到所有前 1000 个素数，Plink 将打开一个新任务`Thread on each Core`以最大限度地提高效率。

所以在这里，每个核心将运行在 1000/4 个数字上，即寻找素数的逻辑。

但是，我读过`IO`应该使用类似的阻塞操作，`WithDegreeOfParallelism`这样 cpu 就不会认为这是一个密集的 cpu 操作，并且它允许使用`more`线程而不是`cores`.

问题 ：

1）它准确吗？我理解正确吗？

2）如果我`WithDegreeOfParallelism (7)`这样设置，它肯定会使用所有 4 个核心，但其他 3 个呢？(7-4) 他们会跑到哪里去？在哪个核心/秒上？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T18:42:39.903

首先，.Net 不会选择哪个内核执行哪个线程，操作系统会选择。如果系统上没有运行其他 CPU 密集型应用程序，您可以预期每个线程将在单独的内核上执行。但是，如果有其他应用程序，操作系统可能会决定在单个内核上运行所有线程，并在它们之间切换。

它甚至比这更复杂。线程通常不在单个内核上运行，操作系统一直在将其从内核切换到内核。例如，看一下任务管理器中的以下屏幕截图，它显示了单线程 CPU 密集型应用程序的执行。

![任务管理器 CPU 使用率截图](../Images/f4a87a3365e56ebae4133121a3083077.png)

您会注意到单线程在我的所有 4 个内核上执行，并且在它运行的几秒钟内使用了每个内核的大约 25%。

.Net 不知道您计算机的 CPU 使用率，因此它假定执行 CPU 密集型工作的最佳线程数与内核数相同。

我不知道 PLINQ 究竟是如何工作的，但我不希望在您的示例中每个内核都能准确生成 1000/4 素数。如果一个线程已经产生了它的素数份额，而另一个线程还没有完成，那么让第一个线程保持空闲是没有效率的。

是的，对于 IO 操作，最佳线程数不取决于内核数，因此您应该手动设置并行度。（不要忘记最佳线程数可能是 1；硬盘在顺序读取时最快，而不是在多个文件之间来回查找。）

如果你设置`WithDegreeOfParallelism(7)`它肯定会使用 7 个*线程*（同样，不能保证核心数量）。操作系统将决定如何在您的 4 个内核上运行这 7 个线程。如果所有这些线程都是 CPU 密集型的，那么它很可能会为每个线程分配 4/7 ≈ 57 % 的内核。如果它们是 IO 绑定的，它将在任何可用的内核上执行刚刚唤醒（未阻塞）的线程的代码。

并且`WithDegreeOfParallelism()`确实设置了线程的确切数量，而不是它们的最大数量，请参见 Stephen Toub's [*`ParallelOptions.MaxDegreeOfParallelism`vs PLINQ's`WithDegreeOfParallelism`*](https://devblogs.microsoft.com/pfxteam/paralleloptions-maxdegreeofparallelism-vs-plinqs-withdegreeofparallelism/)。

# python - Python - 十进制到整数低字节然后高字节

> ID：12020573
> 
> 赞同：2
> 
> 时间：2012-08-18T17:11:04.650
> 
> 标签：python, integer, hex, byte, decimal

您好，我是 Python 的新手，但我已经对它感兴趣了 2 年。我想制作机器人，我正在尝试`pyserial`在搅拌机上使用 Python。但是我发现了一个问题，在谷歌和这个网站上寻找答案 2 小时后，我发现我可能是智障，因为我无法解决它。我想它还没有被问到。

我正在使用 devantech sd84 伺服控制器并通过 USB 端口和串行设备控制它，所以我使用`pyserial`. 问题是我希望 Python 从用户输入之间获取一个十进制值`400`-`2200`我知道该怎么做，但我需要 Python 将其显示为两个字节并先发送低字节，然后发送高字节。例如*（伪代码，因为我还不知道如何编程）*：

```
 #ask for a decimal number between a range (the range does not really matters)
    x = raw_input('\tInsert a number between 400-2200:') #Insert a number between 400-2200: 1500
    #show it as hex
    hex(x) #5dc
    #put it in two bytes and in this case add a zero(?) I don't know how to do that.
    0xDC 0x05
    #add it to a 16-bit integer to send it to the servo controller via the virtual serial port(?) i also don't know how to do that. 
   ser.write('\xAA\xA0\x55\x01\x01\x02\xDC\x05') 
```

为了具有相同控制器的人的兴趣，我将解释 16 位整数前三个字节是同步`(\xAA\xA0\x55)`的，然后是命令 SET_SERVO（位置）（\x01）的类型，然后 1 的通道 1-84 是（\x01）然后是在这种情况下的字节数为 2 (\x02) 和伺服位置低字节，然后是高字节 (\xDC\x05)，现在我用应用程序在我的 iPod 中计算，然后我手动插入哈哈哈愚蠢的事情，让他为我做这件事。

现在我将发布我为测试目的而制作的代码，它在通道 1 中制作了一个伺服器，它以不同的速度运行它的全范围，并用西班牙语打印有趣的东西，而伺服器“跳舞”我手动计算了位置并插入它们哈哈哈听起来像历史为了我。

```
 # -*- coding: utf-8 -*-
    #Pablo P. 2012 "bailecillo"
    #mueve un servo en el canal 1 a través de todo su recorido e imprime frases mientras dicho servo "baila"
    import serial
    import time
    # Para cambiar de Sistema Operativo cambiar puerto 
    #en la siguiente línea: Win COM# linux /dev/ttyS# /dev/ttyUSB#
    # #=un número asignado por tu sistema.
    port='COM3'
    sync='\xAA\xA0\x55'
    SET_SERVO='\x01'
    GET_SERVO='\x02'
    SET_SPEED='\x03'
    SET_MODE='\x04'
    GET_MODE='\x05'
    SET_AD_CNT='\x06' #Controla el número de canales analógicos.
    GET_AD_CNT='\x07' #Devuelve el número de canales analógicos actuales.
    GET_INPUT='\X08' # Devuelve el estado de una entrada.
    GET_ADC='\X09' #Devuelve el valor de un canal analógico.
    GET_VERSION='\x0A' #Devuelve la versión del procesador seleccionado.
    GET_BULK='\x15' #Usado para test en fábriica.
    TEST='\X16' #Usado para test en fábrica.
    ser = serial.Serial(port, baudrate=115200, bytesize=8, parity='N', stopbits=2,timeout=1)

   print "Hola! me alegro de verte."
   time.sleep(2)

   if ser.isOpen():
print "Estado del puerto: Correcto."
time.sleep(1)
print "Procedo a enviar modo del canal 1 y posicion(es) del mismo."
time.sleep(3)
print "Comprobando sistemas de baile..."
ser.write(sync+SET_MODE+'\x01\x01\x19')
ser.write(sync+SET_SERVO+'\x01\x02\x98\x08') #izda
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x90\x01') #derecha
time.sleep(1)
ser.write(sync+SET_SPEED+'\x01\x01\x10')
ser.write(sync+SET_SERVO+'\x01\x02\x78\x05') #centro
time.sleep(2)
print "Vamos a bailar!"
time.sleep(2)
print "preparados..."
time.sleep(1)
print "listos..."
time.sleep(1)
print "Yaaaa!!"
ser.write(sync+SET_SERVO+'\x01\x02\x98\x08') #izda
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x90\x01') #derecha
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x98\x08') #izda
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x90\x01') #derecha
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x98\x08') #izda
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x90\x01') #derecha
time.sleep(3)
ser.write(sync+SET_SERVO+'\x01\x02\x78\x05') #centro
time.sleep(3)
ser.write(sync+SET_SPEED+'\x01\x01\x00')
ser.close()
time.sleep(1)
print "Todo el proceso completado correctamente."

    else:
        print "El puertito está cerrado"

    print "Hasta Luego :D" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T17:20:03.007

这就是为什么不熟悉 Python 的程序员应该查看[libref](http://docs.python.org/library/index.html)的原因。

```
>>> struct.pack('<h', 1500)
'\xdc\x05' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:26:21.220

这应该创建一个对应于输入整数 x 的十六进制字符串

```
hex_list = ['%02X' % int((hex(int(hex(x)[2:],16) >> i & 0xff)[2:]),16) for i in (0,8)]

string = ''
for element in hex_list:
    string = string + '\\x' + element

string.decode('string_escape') 
```

或者

```
hex_list = ''.join(["\\x" + ('%02X' % int((hex(int(hex(x)[2:],16) >> i & 0xff)[2:]),16) )  for i in (0,8)]).decode('string_escape') 
```

# variables - Lua 用于范围内的变量

> ID：12020574
> 
> 赞同：12
> 
> 时间：2012-08-18T17:11:11.450
> 
> 标签：variables, printing, lua, range

我似乎无法让它工作。我来自 Python，所以我尝试使用相同的语法来处理它，但不出所料，它不起作用：

```
var = 4

for var in range(2,20) do
print ("var is in range")
      end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-18T17:55:36.177

如果要测试值是否在范围内，请使用

```
if var>=2 and var<=20 then
   print ("var is in range")
end 
```

如果你想要一个循环，使用

```
for var=2,20 do
   print(var)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T05:12:53.003

`range`你可以很容易地编写你的函数：

```
function range ( from , to )
    return function (_,last)
            if last >= to then return nil
            else return last+1
            end
        end , nil , from-1
end 
```

# clojure - Resolve 函数在 ClojureScript 中引发错误，但在 Clojure 中没有

> ID：12020576
> 
> 赞同：11
> 
> 时间：2012-08-18T17:11:44.523
> 
> 标签：clojure, clojurescript

以下程序在 Clojure 中按预期工作，但在 ClojureScript 中引发错误。我想知道这是一个错误还是 ClojureScript 中根本没有该功能，或者我是否需要重新考虑我尝试这样做的方式。非常感谢您提前提供的帮助。

```
; Clojure...
(defn foo [x] x)
(defn foobee [x] (str (foo x) "bee"))

(println
  ((resolve (symbol (str "foo" "bee"))) "bizzee"))

;=> bizzeebee

; ClojureScript...
(defn foo [x] x)
(defn foobee [x] (str (foo x) "bee"))

(.log js/console
  ((resolve (symbol (str "foo" "bee"))) "bizzee"))

;=> Exception in thread "main" java.lang.IllegalArgumentException: Don't know how to create ISeq from: clojure.lang.Symbol 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T17:22:46.443

`resolve`ClojureScript 中不存在。事实上，ClojureScript 没有 Vars。

可以通过各种 hack（例如使用命名空间对象）调用名称是动态构造的函数，`aget`但是除非导出所有相关符号，否则可以保证破坏高级编译。此外，即使使用更宽松的编译设置，目前也没有人享受官方支持。

# symfony - 在 Symfony2.1 中保护一个 slug

> ID：12020577
> 
> 赞同：0
> 
> 时间：2012-08-18T17:11:46.233
> 
> 标签：symfony

## 你如何在 Symfony2.1 中保护一个 slug？

恶意用户可以附加`";rm -rf *"`到 id 值并删除整个网站。在 symfony2.1 中，有没有一种简单的方法来保护 slug？

我试图以这种方式确保身份。

```
/**
 * The idea is to check that the slug cart_id is an id and not
 *
 * @Route("/{cart_id}/show", name="show_cart")
 * @Template()
 */
public function showCartAction($cart_id)
{

    if (!preg_match("/^[0-9]{2}$/", $cart_id))
    {
       throw new \Exception("the id is not correct");
    }

    $cart = $this->getCartManager()
        ->getCart($cart_id);

    return array(
        'cart'=> cart
    );
} 
```

**你觉得这有必要吗？你会这样做吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:38:22.757

您可以通过在注释中添加要求来确保`cart_id`始终接受整数。`@Route`例如

```
/**
 * @Route("/{cart_id}/show", name="show_cart", requirements={"cart_id" = ("\d+")})
 * @Template()
 */ 
```

但是攻击者通过 sql-injection 执行恶意查询的可能性仍然几乎为零，因为 Doctrine2 使用 PDO 准备语句和参数化查询。有关参数化查询的预准备语句的更多信息，请参见[此处](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php/60496#60496)和[此处](https://stackoverflow.com/a/134138/1218997)。

# nlp - 将主题标签分类为主题或类别。例如：#FIFA -> SPORTS , VIDEO_GAMES

> ID：12020580
> 
> 赞同：2
> 
> 时间：2012-08-18T17:11:59.230
> 
> 标签：nlp, classification, text-processing

是否有公共 API 或 Java 库可以将 Twitter Hashtags 从有限集中分类为主题/类别。

我需要根据他们的主题标签找到每个 Twitter 帖子的主题。例如：

/#FIFA12 会将这篇文章归类为 VIDEO_GAMES/GAMES 或 ENTERTAINMENT 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:40:01.080

我不知道有什么 API 可以做到这一点，但一种方法是查看映射到 Wikipedia 标题的主题标签。例如，维基百科中有一个“FIFA12”标题（重定向到不同的页面）。除非字符串不明确，否则您应该能够将大量主题标签映射到 Wikipedia 标题。

一旦你有了标题，你就可以遍历维基百科图并获得父子类别关系。例如 FIFA12 在维基百科中被归类为以下类别。

```
2011 video games
Electronic Arts games
EA Sports games
PlayStation 2 games
PlayStation 3 games
PlayStation Portable games
IOS games
Xbox 360 games
Wii games
Nintendo 3DS games
Windows games
Video games developed in Canada
Association football video games
Sports video games with career mode
Video games set in 2011 
```

这些类别中的每一个都会有更多的父母。例如“2011 电子游戏”有父母

```
2011 works
21st-century video games
2011 in video gaming
2011 software 
```

您可能可以在每个广度优先搜索级别使用带有阈值（例如 2+）的“多数票”来减少需要分析的节点数量。在某些时候，您可以想出一个启发式方法来停止。例如，“视频游戏”类别与 FIFA12 相距三跳，并且可以通过多条路径到达。提出最佳启发式方法并非易事，但这里有一些很容易实现的成果。

# javascript - 没有错误时的错误处理？

> ID：12020582
> 
> 赞同：0
> 
> 时间：2012-08-18T17:12:02.830
> 
> 标签：javascript, jquery, error-handling

我有以下代码在页面上显示用户的邮政编码（如果你读过我最近的任何问题，它们都与此有关）。邮政编码通常会显示，除非在浏览器不支持地理定位的某些环境中。在这些情况下，页面不显示任何内容，并且没有错误记录到控制台。

JS

```
function getZipCode(geolocation) {
    if (geolocation) {
        geolocation.getCurrentPosition(function (position) {
           $.getJSON(
               "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $(function () {
                        $('#zip').text(data.address.postalcode);
                    });
                }
            );
        });
    }
} 
```

HTML

```
<div id="zip"></div> 
```

有什么方法可以处理这个错误并在脚本没有返回结果时显示错误信息？我正在考虑将文本放在两者之间`#zip`，但是浏览器确实支持它的用户会在加载时看到该文本，即使它会改变，这将是一个糟糕的用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:14:10.623

您的脚本不会通过 if (geolocation) 检查。

简单地做

```
if (geolocation) {
//do stuff
}
else {
//notify user that his browser doesnt have geolocation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:28:33.777

`geolocation.getCurrentPosition()`接受一个可选`errorCallback`参数。使用它来显示错误。

# c - c内存子分配器，结构、链表和指针转换有问题

> ID：12020586
> 
> 赞同：-1
> 
> 时间：2012-08-18T17:12:34.437
> 
> 标签：c, pointers, memory-management, casting, struct

我正在尝试制作一个内存子分配器并对其进行初始化，我认为我错误地处理了指针。该子分配器分配一块内存，然后将其与放置在前面字节中的 32 字节“标题”分开以指示其大小。

标头应该是一个循环双链表。因此，在第一次初始化时，结构中的 next 和 prev 值都指向自身。

一直在努力工作几个小时很累，现在对指针感到非常沮丧..

```
typedef unsigned char byte;
static byte *memory = NULL;

struct header;

typedef struct _header {
    int size;
    struct header * next;
    struct header * prev;
}header;

static header* free_list_ptr;

void allocator_init(u_int32_t size){

    memory = (byte*) malloc(size);

    //initialize free_list_ptr;
    free_list_ptr = (header*) memory;

    free_list_ptr->size = size;
    free_list_ptr->prev = free_list_ptr; //error: assignment from incompatible pointer type
    free_list_ptr->next = free_list_ptr; //error: assignment from incompatible pointer type
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:25:28.657

您需要`free_list_ptr`使用 address-of 运算符 ( `&`) 分配地址：

```
free_list_ptr.prev = &free_list_ptr; 
```

[编辑以更正成员引用语法。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:19:07.910

您的声明`free_list_ptr`不是指针。它有类型`header`。我想你想要

```
static header *free_list_ptr; 
```

# asp.net - 继承或覆盖控制器以检查用户角色

> ID：12020588
> 
> 赞同：0
> 
> 时间：2012-08-18T17:12:59.673
> 
> 标签：asp.net, asp.net-mvc, roleprovider

我有根据用户 ID 和用户角色返回真或假的函数。

我有几个动作结果的控制器。

例如

```
 public class DemoController : Controller
  {
     public ActionResult Index(){}

     public ActionResult Contact(){}
  } 
```

所以我想，每次当用户使用这个动作时，检查用户是否在角色中。

我知道我可以做到

```
[Authorize(Roles = "Administrator")]
public ActionResult JustAdmins(){} 
```

但是这种方式，每次用户访问这个动作，都是一个额外的 SQL 查询。

我想在 MemCached 中存储用户角色，所以我的功能就像

```
 public static bool IsCompany(Guid UserID)
 {

    //if (get from cache != null && get from cache == "Role")
    // return true
    //if (get from DB != null && get from DB == "Role")
    //return true

    return false;
 } 
```

但是我怎样才能继承控制器中的所有动作来检查这个功能呢？

提示：也许覆盖 OnActionExecuting 或类似的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:19:25.803

您可以编写一个`RoleProvider`从默认继承的自定义并覆盖[GetRolesForUser](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.getrolesforuser.aspx)方法：

```
public class CachingRoleProvider: THE_ROLE_PROVIDER_YOU_ARE_CURRENTLY_USING
{
    public override string[] GetRolesForUser(string username)
    {
        string[] roles;
        if (TryCheckFromYourCacheIfUserIsInRole(username, out roles))
        {
            // the roles for this user were retrieved from the cache
            return roles;
        }

        // no roles retrieved from the cached => query the base role provider
        roles = base.GetRolesForUser(username);

        // Store the retrieved roles into the cache so that on subsequent calls
        // you no longer need hit the base role provider for this user
        PutRoleInCacheForUser(username, roles);

        return roles;
    }
} 
```

显然，通过这样做，您完全承认如果某些外部进程修改了基本角色提供程序使用的数据存储中的角色，您可能会失去同步，因为现在您正在读取缓存的角色，而不是来自数据存储的角色。因此，在这种情况下，您可能需要放置一些同步机制来清除给定用户名的缓存数据。

# php - 合并两个数组 - 第一个按顺序排列 第二个随机排列

> ID：12020592
> 
> 赞同：2
> 
> 时间：2012-08-18T17:13:58.700
> 
> 标签：php, arrays

我将以下数组合并为一个。第二个数组`$ads`随机插入到第一个数组 中`$EM_Events`，但插入的项目在插入时始终保持在一起。我希望将它们随机插入到第一个数组中，而不是呆在一起，也不要改变第一个数组的顺序。我错过了什么？

```
$EM_Events = EM_Events::get( array(
'scope'=>'future', 
'limit'=>6,
'category'=>'6'
));

$ads = EM_Events::get( array(
'scope'=>'future', 
'limit'=>2,
'category'=>'56'
));

$offset = array_rand($EM_Events);
array_splice($EM_Events, $offset, 0, $ads); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:18:20.157

`array_splice`只会在数组中的某个偏移处执行一次插入，因此正如您所说，您的第二个数组将保持在一起。

您将需要遍历第二个数组的所有元素并依次插入每个元素。类似（未经测试）：

```
foreach ( $ads as $ad ) {
    $offset = array_rand($EM_Events);
    array_splice($EM_Events, $offset, 0, $ad);
} 
```

也许

```
while ( $ad = array_pop($ads) ) {
    $offset = array_rand($EM_Events);
    array_splice($EM_Events, $offset, 0, $ad);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T17:28:20.100

您要做的是，第二个数组是随机的，您尝试将其包含在第一个数组中的随机位置。但是在你随机化第二个数组之后，使第一个数组的偶数空间为空，即 $EM_EVENTS(0),$EM_EVENTS(1),$EM_EVENTS(2),$EM_EVENTS(3) 中的元素现在保存在 $ EM_EVENTS(1),$EM_EVENTS(3),$EM_EVENTS(5) 等，偶数空间使用循环填充。由于数组已经随机化，因此您可以获得所需的输出。清除？

# android - 在 Android 中显示多个对话框

> ID：12020593
> 
> 赞同：1
> 
> 时间：2012-08-18T17:14:03.210
> 
> 标签：android, multithreading, dialog

我有一个场景，我的应用程序尝试连接到服务器，同时显示 ProgressDialog，以便用户知道它正在联系服务器。但是，如果由于某种原因连接失败或拒绝，那么我想显示另一个对话框，说明连接被服务器拒绝或其他原因。

我正在做的是，显示 ProgressDialog 然后尝试与服务器连接，如果它抛出异常，那么我会显示 AlertDialog 并显示错误消息。但它不起作用，当我在 ProgressDialog 之后立即调用 AlertDialog 时，代码会抛出异常。我也关闭 ProgressDialog 然后启动 AlertDialog 但不起作用。

我需要改变我的方法还是我的代码有问题？这是我在代码中所做的

```
ProgressDialog pg = ProgressDialog.show(this, null, "Contacting server. Please wait...", false);

ConnectionThread ct = new ConnectionThread(web);
ct.setProgressDialog(pg);
ct.setErrorDialog(dialog);
ct.start(); 
```

这是 ConnectionThread 类，通过 webAccess 类尝试连接到服务器

```
public class ConnectionThread extends Thread {

    private WebAccess _webAccess;
    private ProgressDialog _progressDialog;
    private AlertDialog _alertDialog;

    public ConnectionThread(WebAccess webAccess) {
        _webAccess = webAccess;
    }

    public void setProgressDialog(ProgressDialog dialog) {
        _progressDialog = dialog;
    }

    public void setErrorDialog(AlertDialog dialog) {
        _alertDialog = dialog;
    }

    @Override
    public void run() {
        try {
            _webAccess.invoke();
            _progressDialog.dismiss();

        } catch (Exception ex) {
                _progressDialog.cancel();
            _alertDialog.show();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:53:57.860

您无法显示来自后台线程的对话框。这已经在另一个问题[线程](https://stackoverflow.com/questions/4432453/popping-up-a-dialog-from-a-non-ui-thread)中得到了回答。

无论如何尝试使用处理程序或在[ui 线程](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)上运行可运行。

# ios - 如何从 ViewDidLoad 中的 alertview 获取 texfield 值？xcode iOS 5

> ID：12020595
> 
> 赞同：0
> 
> 时间：2012-08-18T17:14:13.213
> 
> 标签：ios, xcode, ipad, csv

如何从 viewdidload 函数中的 alertview 获取文本字段值？我想在另一个函数中使用它...假设警报视图文本是 myAlertviewText，然后我想在不同的函数中使用它

```
NSString *outputfilename = [documentDirectory stringByAppendingPathComponent:myAlertviewText.text]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:22:54.380

这其实很简单，使用 UIAlertView 的委托方法之一，就可以直接获取文本视图的文本值。假设您使用了输入警报视图。

```
- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        //lets say this is the cancel button
    }else if (buttonIndex == 1){
        NSString *myString = [[alertView textFieldAtIndex:0] text];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:10:46.880

如果您使用的是您自己添加了 textField 的自定义警报视图，请为该 textField 提供一个唯一的标记值 (kTextFieldTag)。现在在你`viewDidLoad`做如下（如果你的警报显示，否则你会得到零字符串）：

```
-(void)viewDidLoad
{
    UITextField *txtTemp = [m_alertViewObject viewWithTag:kTextFieldTag];

    NSString *strTextFiledValue = txtTemp.text;
} 
```

# java - Java - 将图像转换为图标/ImageIcon？

> ID：12020597
> 
> 赞同：18
> 
> 时间：2012-08-18T17:14:29.813
> 
> 标签：java, image, imageicon

我有一个 Image 对象，我想将其转换为 Icon 或 ImageIcon 以添加到 JTextPane。我该怎么做呢？（这是在 JAVA 中）

澄清：我的“图像”是图像对象的实例，而不是文件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-18T17:22:59.817

有什么问题[`new ImageIcon(Image)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.awt.Image%29)？

```
Image img = ...
ImageIcon icon = new ImageIcon(img); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T17:29:25.413

将图像添加到您的 JTextPane 文档中：

```
Image image = ImageIO.read(new File("myImage.jpg"));

StyleContext context = new StyleContext();
StyledDocument document = new DefaultStyledDocument(context);

Style labelStyle = context.getStyle(StyleContext.DEFAULT_STYLE);

Icon icon = new ImageIcon(image);
JLabel label = new JLabel(icon);
StyleConstants.setComponent(labelStyle, label);

document.insertString(document.getLength(), "Ignored", labelStyle);

JTextPane textPane = new JTextPane(document); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:12:23.423

```
ImageIcon icon=null; 

ImageIcon imageicon = new ImageIcon("C:\\Winter.jpg");

if (imageicon != null) {

    if (imageicon.getIconWidth() > 60) {
        System.out.println(jLabel1.getWidth());
        icon = new ImageIcon(imageicon.getImage().getScaledInstance(26, -1, Image.SCALE_DEFAULT));
    } else {
        icon = imageicon;
}

jLabel1.setIcon((Icon) icon); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:17:27.490

尝试这个...

```
Toolkit t = Toolkit.getDefaultToolkit();

Image i = t.getImage("icon.gif");

setIconImage(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-01T17:00:14.440

将图像转换为图标，例如将 Icon 设置为 netbeans 中的 jLable，我使用以下代码使其成为真：

```
JLabelname.setIcon(new javax.swing.ImageIcon(getClass().getResource("/slip/images/null_phot.png"))); 
```

# jaxb - JAXB 默认行为是什么意思？

> ID：12020602
> 
> 赞同：1
> 
> 时间：2012-08-18T17:15:09.553
> 
> 标签：jaxb, marshalling, unmarshalling

我对 JAXB 很陌生，我对 JAXB 的默认行为感到困惑，我的理解是：

如果可能，JAXB 会尝试通过自动检测所涉及的类来创建 JAXBContext。例如，JAXB 可以读取与预期不完全匹配的 XML 文档。这是 JAXB 解组器的默认行为。例如，如果我们有一个 Foo 类：

```
@XmlRootElement
class Foo{
  @XmlAttribute
  String name;
  @XmlElement
  String title;
} 
```

Foo 类是以下文档的代表性 Java 类：

```
<foo name=” element-value”&gt;
    <title>some title</title>
</foo> 
```

然后，如果我们有以下文档的 XML 实例，其中元素的内容由 Foo 类表示。

```
<anotherTagName  name=”element-value”&gt;
    <title>some title</title>
</anotherTagName> 
```

我们可以将其解组为 Foo 类，使用带有 'expectedType' 参数的解组方法版本，如下所示：

```
JAXBElement<Foo> root = um.unmarshal(new StreamSource(new File(“output.xml”)),   
                                     Foo.class);
 Foo foo = root.getVlaue(); 
```

这是 JAXB 的默认行为吗？我明白了还是我迷路了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:32:57.490

> 这是 JAXB 的默认行为吗？

是的，这是预期的 JAXB 行为。如果您指定要解组的类，您将收到该类型的一个实例，该实例包装在一个`JAXBElement`包含根元素信息的实例中。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)

# javascript - 使用Javascript基于下拉菜单选择填充输入字段

> ID：12020606
> 
> 赞同：1
> 
> 时间：2012-08-18T17:15:55.307
> 
> 标签：javascript, mysql, select, input

在 MySQL 数据库中，我有一个包含项目 ID、名称和默认价格的项目表。我希望有一个表格，其中包含表中所有项目的下拉菜单，可将输入字段中的价格更改为所选项目的默认价格。我将如何使用 Javascript 来执行此操作？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:25:52.747

HTML：

```
<select>
    <option>Select an item</option>
    <option data-price="20.00" value="1">Item 1</option>
    <option data-price="15.00" value="2">Item 2</option>
    <option data-price="24.00" value="3">Item 3</option>
</select>

<input type="text" id="price"> 
```

​ JavaScript（使用 jQuery）：

```
​$('select').on('change', function() {
    $("select option:selected").each(function () {
        $('#price').val('$' + $(this).attr('data-price'));
    });    
});​​​​​​​​ 
```

并查看这个 jsFiddle 的工作示例：http: [//jsfiddle.net/chnUn/](http://jsfiddle.net/chnUn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:26:06.257

使用[jQuery](http://docs.jquery.com/Downloading_jQuery)，您可以执行以下操作：

```
$("#DropDownId").change(function ()
{
    var selectedItem = $(this).val();

    if (selectedItem != null && selectedItem != '')
    {
          $("#InputId").val(selectedItem);
    }      
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:26:21.460

从您的服务器获取您需要显示的所有内容（最好是 JSON 格式）

并像这样生成你的`select`元素..

```
<select id="mySelect">
<option name="item1ID" defaultPrice="defaultPrice1" >ItemName1</option>
<option name="item2ID" defaultPrice="defaultPrice2" >ItemName2</option>
<option name="item3ID" defaultPrice="defaultPrice3" >ItemName3</option>
<option name="item4ID" defaultPrice="defaultPrice4" >ItemName4</option>
<option name="item5ID" defaultPrice="defaultPrice5" >ItemName5</option>
</select> 
```

您可以获得默认价格，例如

```
$("#mySelect").on('change',function(){
alert($(this).attr('defaultPrice');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:29:38.740

你的服务器端语言是什么？

我会做这样的事情：

```
<script language="javascript">
var items = new Array();

<?
$res = mysql_query("SELECT id, name, price FROM ITEM_TABLE");

while($item_object = mysql_fetch_object($res)) {
    ?>
        items[<? echo $item_object->id; ?>] = "<? echo $item_object->price; ?>";
        ('#item_drop_down').append('<option value=' + <? echo $item_object->id; ?> + '>' + <? echo $item_object->name; ?> + '</option>');
    <?
}

?>

('#item_drop_down').Change('#item_price_input').text(items[('#item_drop_down').value()]);

</script> 
```

其中下拉菜单是 item_drop_down，您想要输入的价格是 item_price_input。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T17:31:39.797

创建选择下拉菜单，如下所示，其中选项值 = 商品价格

```
<select name="item_list" id="item_list" onchange="update_txt()">
<option value="">Select item</option>
<option value="10"> item1</option>
<option value="20">item2</option>
</select>
<input type="text" id="item_price" value=""> 
```

JS：

```
function update_txt(){
price = document.getElementById('item_list').selectedIndex.value;
document.getElementById('item_price').value = price;
} 
```

# php - 在扩展中使用 $wgScriptPath

> ID：12020609
> 
> 赞同：1
> 
> 时间：2012-08-18T17:16:04.273
> 
> 标签：php, mediawiki

我想`$wgScriptPath`在我正在构建的 mediawiki 扩展中使用该变量。每当我访问该变量时，我都会收到错误“未定义的变量：wgScriptPath”。
有谁知道在 mediawiki 扩展中访问这些类型变量的正确方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:34:22.337

您是否将其声明为全局？

```
function foo() {
    echo $wgScriptPath; // this will echo the local variable in the 
                        // function's scope, which of course does not exist
}

function foo() {
    global $wgScripPath;
    echo $wgScriptPath; // this will echo the global variable
} 
```

# objective-c - 在 iPhone 中沿 2 个点计算新位置不准确

> ID：12020611
> 
> 赞同：1
> 
> 时间：2012-08-18T17:16:20.907
> 
> 标签：objective-c, math, geometry

假设我有 2 分`(x1,y1)o----------------o(x2,y2)`。

我想要做的是在我沿着直线移动距离（x1，y1）的距离d时获取新坐标。然而我意识到，我离 (x1,y1) 越远，新坐标开始变得越来越不准确（即它偏离原线）。我的解决方案基于[https://math.stackexchange.com/questions/25286/2d-coordinates-of-a-point-along-a-line-based-on-d-and-m-中提供的最后一个答案我在哪里搞砸](https://math.stackexchange.com/questions/25286/2d-coordinates-of-a-point-along-a-line-based-on-d-and-m-where-am-i-messing)。我在这里做错了什么吗？或者objective-c中是否有一个可以做同样事情的类？

谢谢！

```
float signu, signv;
float x, y;
float x1 = cp1.x;
float y1 = cp1.y;
float x2 = cp2.x;
float y2 = cp2.y;
float d = noOfSteps*pixelsPerStep;
float m = (y2-y1)/(x2-x1);
float u = d/ABS(sqrt(m*m+1));
float v = m*u;
if(x1-x1<=0)
    signu = -1;
if(y2-y1<=0)
    signv = -1;
x = x1 + signu*u;
y = y1 + signv*v; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:38:49.453

试试向量代数的标准方法：

```
Norm = sqrt((x2-x1)*(x2-x1) + (y2-y1)*(y2-y1))
Assert Norm != 0

//components of direction vector
Dir_X = (x2 - x1) / Norm
Dir_Y = (y2 - y1) / Norm

x = x1 + d * Dir_X
y = y1 + d * Dir_Y 
```

# c++ - C中main函数的第四个参数指向什么？

> ID：12020612
> 
> 赞同：3
> 
> 时间：2012-08-18T17:16:28.043
> 
> 标签：c++, c, arguments, main

我们有

```
int main(int argc, char** argv, char** envc) 
```

对于普通人。但我想知道是否有任何其他参数 main 可以代替这些。如果有的话，它指向什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T17:20:11.050

好吧，这是细分：

*   `argc`-- C标准
*   `argv`-- C标准
*   `env`-- 适用于大多数 UNIX 和 MS Win，但不是标准的
*   `apple`-- Mac OSX 和 Darwin 作为第四个参数传递的其他信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T17:30:45.443

C 和 C++ 中的答案不同：

*   在 C++ 中，`main`必须始终返回`int`. 每个实现都必须接受`()`和`(int, char**)`签名。实现*可以*接受任何其他签名。*如果*接受的签名以 开头`int, char**, ...`，*则应*具有通常的含义。（另外，`main`获取 C 链接，不能被重载，不能是模板，也不能被调用。）

*   在 C 中，`main`可以采用任何形式。但是，每个实现都必须接受`int(void)`和`int(int, char**)`类型。

正如您所注意到的，某些环境支持并符合这些准则的一个流行签名是`int main(int argc, char * argv[], char * env[])`，其中第三个参数包含指向环境的指针。其他扩展是可以想象的；检查您平台的文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T17:20:02.917

只有 argc 和 argv 是标准参数。之后的任何事情都取决于您的系统和编译器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T17:23:24.260

我认为这回答了你的问题：

[http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B](http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T18:00:33.043

它是标准的扩展：
但它应该提供对环境的访问：

```
int main(int argc, char** argv, char** envc)
{
    // It is an array of pointers to C-String
    // The array is terminated with a NULL pointer.
    // So you can loop over with it like this.
    for(int loop = 0;envc[loop] != NULL; ++loop)
    {
        fprintf(stdout, "%s\n", envc[loop]);
    }
} 
```

*   argc：argv 中有效元素的数量
*   argv：用于命令行参数的 C 字符串数组。
*   envc：环境的 C 字符串数组（由 NULL 指针终止）。

最好使用`getenv`：

```
char * getenv ( const char * name ); 
```

[http://www.cplusplus.com/reference/clibrary/cstdlib/getenv/](http://www.cplusplus.com/reference/clibrary/cstdlib/getenv/)

# android - 每个活动顶部的导航栏

> ID：12020619
> 
> 赞同：0
> 
> 时间：2012-08-18T17:17:56.653
> 
> 标签：android, navigation, indicator

我想将导航栏放在每个活动的顶部（参见：截图）。导航栏应该有两个按钮（上一个和下一个活动）和活动指示器。我已经看到了一些关于 SO 的解决方案（使用包含、片段、操作栏），但是哪一个是最好的，或者可能有人有另一种选择？

![在此处输入图像描述](../Images/a62a5a653bbae183b421d3c0801a0638.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:44:00.337

此功能由[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)类提供。您提供片段而不是活动，您可以在提供的视图之间快速有效地水平滚动。您将只使用一项活动，因此您的导航栏将始终可见。唯一会改变的部分是 ViewPager 的页面。

至于您的导航栏，有几个选项。您可以提供自己的视图实现，但您必须为更改页面创建一个侦听器，该侦听器将为 ViewPager 设置当前页面。这是最复杂的方法。

另一种解决方案是使用[ActionBarSherlock](http://actionbarsherlock.com/)，您会发现它在很多方面都很有用。在那里，您可以将操作栏的导航与您的 ViewPager 连接起来。此解决方案是最简单且最强大的解决方案。在[Google IO](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/HomeActivity.java)应用程序中，您可以看到它是如何完成的。家庭活动是您应该关注的。此解决方案的问题是您将获得导航器的预定义视图。

最后一个可能最适合您的解决方案是尝试使用[Page Indicator](http://viewpagerindicator.com/)，这可以简化您的导航栏实现。

这里提到的一切都在 ViewPager 上，所以一定要使用它。我不知道任何其他更好的解决方案。问题是您希望如何实现导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:12:11.400

我同意[Commonsware](https://stackoverflow.com/users/115145/commonsware)和[MartinSVK](https://stackoverflow.com/users/862024/martinsvk)。我会邀请您试用[http://code.google.com/p/sherlock-demo/](http://code.google.com/p/sherlock-demo/)上的代码示例。正如上述两张海报所提到的，它使用 ViewPager 让您在 Fragment 之间水平滑动。但它也使用 Tab 导航，它在屏幕顶部提供视觉指示，正如您最初要求的那样。关于 Android UI 创建的想法，你真的应该花几分钟浏览一下[http://developer.android.com/design](http://developer.android.com/design)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T17:28:33.807

我的选择是创建共享活动类（例如 BaseActivity）并覆盖设置基本布局的 onCreate 方法。子类应该使用 setContent 代替 setContentView

```
public class BaseActivity extends Activity {
    private LayoutInflater mInflater;

    @Override
    public void onCreate(Bundle b) {
         super.onCreate(b);
         setContentView(R.layout.base);
    }

    public void setContent(View content) {
         setContentPart(R.id.baseContentContainer, content);
    }

    public void setContent(int contentLayoutId) {
        setContentPart(R.id.baseContentContainer, contentLayoutId);
    }

    private void setContentPart(int containerId, int layoutId) {
        final LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        setContentPart(containerId, inflater.inflate(layoutId, null));
    }

    private void setContentPart(int containerId, View view) {
        final ViewGroup vg = (ViewGroup) findViewById(containerId);
        vg.setVisibility(view != null ? View.VISIBLE : View.GONE);
        vg.removeAllViews();
        if (view != null) vg.addView(view, layoutFillParent);
    }

    public LayoutInflater getLayoutInflater() {
        if (mInflater == null) mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return mInflater;
    }

} 
```

# tomcat - 如何在 Amazon EC2 中为 Tomcat 上传库

> ID：12020622
> 
> 赞同：3
> 
> 时间：2012-08-18T17:18:19.850
> 
> 标签：tomcat, amazon-ec2, amazon-web-services, tomcat7

我需要将一个库上传到我的 Tomcat 文件夹（在 EC2 实例中）。我一直做的是：

```
scp -r -i /home/path_to_key/key.pem /home/path_to_file/file.jar  ec2-user@my_address.compute.amazonaws.com:/home/ec2-user 
```

如果我在“用户”文件夹（或其子文件夹）中上传文件，这将有效。如果我想在 /opt/tomcat7/lib/ 中上传文件怎么办？我收到此错误：

```
scp: /opt/tomcat7/lib/file.jar: Permission denied 
```

任何人都可以帮助我吗？谢谢，安德里亚内格里

编辑：

```
totale 140
drwxr-xr-x 10 tomcat7 tomcat7           4096 17 lug 00:30 .
drwxr-xr-x  5 root    root              4096  6 gen  2012 ..
-rw-r--r--  1 tomcat7 tomcat7             18 28 lug  2011 .bash_logout
-rw-r--r--  1 tomcat7 tomcat7            176 28 lug  2011 .bash_profile
-rw-r--r--  1 tomcat7 tomcat7            124 28 lug  2011 .bashrc
drwxr-xr-x  2 tomcat7 tomcat7           4096 17 lug 00:30 bin
drwxr-xr-x  3 tomcat7 tomcat7           4096 18 ago 15:35 conf
drwxr-xr-x  2 tomcat7 tomcat7           4096 17 lug 00:30 endorsed
-rw-r--r--  1 tomcat7 tomcat7            121 28 lug  2011 .kshrc
drwxr-xr-x  2 tomcat7 tomcat7           4096 17 lug 00:30 lib
-rw-r--r--  1 tomcat7 tomcat7          56797 20 nov  2011 LICENSE
drwxrwxr-x  2 tomcat7 elasticbeanstalk  4096 18 ago 18:01 logs
-rw-r--r--  1 tomcat7 tomcat7           1192 20 nov  2011 NOTICE
-rw-r--r--  1 tomcat7 tomcat7           8824 20 nov  2011 RELEASE-NOTES
-rw-r--r--  1 tomcat7 tomcat7          10597 20 nov  2011 RUNNING.txt
drwxr-xr-x  2 tomcat7 tomcat7           4096 17 lug 00:30 temp
drwxr-xr-x  3 tomcat7 tomcat7           4096 18 ago 15:39 webapps
drwxr-xr-x  3 tomcat7 tomcat7           4096 18 ago 15:35 work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:58:19.063

您需要设置适当的权限，以便 ec2 用户可以写入目标目录。如果您发布这两个命令的输出，我会尽力帮助您：

```
id
sudo ls -al /opt/tomcat7 
```

**编辑：**根据您的输出，我认为正确的做法是将 ec2-user 添加到“tomcat7”组，然后授予该组对目录的写访问权限：

```
sudo usermod -a -G tomcat7 ec2-user
sudo chmod -R g+w /opt/tomcat7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:32:52.137

这是针对您的问题的另一种解决方案的解释[Amazon Ec2 FTP 写入权限](https://stackoverflow.com/questions/10337951/amazon-ec2-ftp-write-permission)

“ec2 用户无权在 /var/lib/tomcat6/webapps/ 中写入文件。只有 root 用户可以这样做。您有两种方法可以这样做：

1) 使用 filezilla 将文件复制到 /home/ec2-user/。现在通过 putty SSH 进入 linux 机器。使用命令 sudo -s 更改为 root 用户。然后使用命令 cp -i RealEstateERP.war /var/lib/tomcat6/webapps/ 将文件从 /home/ec2-user 复制到 /var/lib/tomcat6/webapps/。

2) 通过 putty SSH 进入 linux 机器。使用命令 sudo -s 更改为 root 用户。使用命令 chmod 777 /var/lib/tomcat6/webapps/ 向 /var/lib/tomcat6/webapps/ 上的所有用户提供写入权限。然后直接从filezilla复制文件到目录。”

希望有帮助。

# java - 更新 JFrame

> ID：12020627
> 
> 赞同：3
> 
> 时间：2012-08-18T17:18:44.047
> 
> 标签：java, swing, jlabel, countdowntimer

我有一个`JFrame`我想在其上模拟倒计时（如火箭发射）。`setVisible(false)`因此，我通过隐藏各种控件 ( ) 并显示带有文本的 a来设置框架`JLabel`（这是应该倒计时的文本：3、2、1、Go）。

上面的文字`JLabel`从“3”开始。我的意图是让程序的执行等待 1 秒，然后将文本更改为“2”，再等一秒，更改为“1”，等等）。最后，我隐藏`JLabel`并重新显示所有控件，一切正常进行。

我在做什么是行不通的。它似乎在等待正确的时间，完成后，我的 JFrame 看起来很棒并且按预期工作。但是在倒计时方法的 4 秒内，我看到的只是一个白色的 JFrame。不是我想要的 3、2、1。

这是我的代码。谁能看到我做错了什么？谢谢！

```
public void countdown() {
    long t0, t1;        

    myTest.hideTestButtons(true);
    myTest.repaint();

    t0 =  System.currentTimeMillis();
    do {
        t1 = System.currentTimeMillis();
    } while ( (t1 - t0) < 1000);

    myTest.TwoSeconds();
    myTest.repaint();
    t0 =  System.currentTimeMillis();
    do {
        t1 = System.currentTimeMillis();
    } while ( (t1 - t0) < 1000);

    myTest.OneSecond();
    myTest.repaint();
    t0 =  System.currentTimeMillis();
    do {
        t1 = System.currentTimeMillis();
    } while ( (t1 - t0) < 1000);

    myTest.Go();
    myTest.repaint();
    t0 =  System.currentTimeMillis();
    do {
        t1 = System.currentTimeMillis();
    } while ( (t1 - t0) < 1000);

    myTest.hideTestButtons(false);
    myTest.repaint();
}

public void TwoSeconds() {
    lblCountdown.setText("2");
}

public void OneSecond() {
    lblCountdown.setText("1");
}

public void Go() {
    lblCountdown.setText("Go!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:27:50.013

您将需要使用[javax.swing.Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)对您的应用程序进行计时。

发生的事情是您在一个线程上运行所有内容 - 因此 UI（在单独的线程上运行）没有机会更新。

如果您想了解其工作原理的示例，可以查看以下答案：[https ://stackoverflow.com/a/1006640/1515592](https://stackoverflow.com/a/1006640/1515592)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:34:18.530

改用 a `Timer`。在大多数情况下，非常不鼓励主动等待。以下是您需要集成的代码类型：

```
final Timer ti = new Timer(0, null);
ti.addActionListener(new ActionListener() {
    int countSeconds = 3;

    @Override
    public void actionPerformed(ActionEvent e) {
        if(countSeconds == 0) {
            lblCountdown.setText("Go");
            ti.stop();
        } else {
            lblCountdown.setText(""+countSeconds);
            countSeconds--;
        }
    }
});
ti.setDelay(1000);
ti.start(); 
```

# php - 正则表达式查找所有单词以两个斜杠开头

> ID：12020631
> 
> 赞同：1
> 
> 时间：2012-08-18T17:19:15.183
> 
> 标签：php, regex, pattern-matching

我想在`<body>`标记示例之后找到所有以两个斜杠开头的字符：-

```
http://www
// this is first comment
<body>
<div>
// this is comment
<p>//this is another comment. 
```

所以我想同时匹配两者：

```
// this is comment.
//this is another comment. 
```

但不是：

```
//www
// this is first comment 
```

这只是一个例子，它可能还包含数字和括号。语言 php 只想要正则表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:38:20.827

您可以使用此 PHP 代码：

```
$html = <<< EOF
http://www
// this is first comment
<body>
<div>
// this is comment
<p>//this is another comment.
EOF; 
```

### 解决方案 1：负前瞻

```
if (preg_match_all('~//(?!.*?<body>)[^\n]*~is', $html, $arr))
   print_r($arr); 
```

### 解决方案 2：没有前瞻

```
$html = preg_replace('#^.*?<body>#is', '', $html);
if (preg_match_all('~//[^\n]*~', $html, $arr))
   print_r($arr); 
```

### 输出：

```
Array
(
    [0] => Array
        (
            [0] => // this is comment
            [1] => //this is another comment.
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:23:02.433

你可以用这个模式做到这一点：

```
(?<!http:)\/\/(\s?[\w\.])+ 
```

[例子](http://regexr.com?31sfo)

# php - php floor a number 为 18 的倍数

> ID：12020633
> 
> 赞同：-1
> 
> 时间：2012-08-18T17:19:16.167
> 
> 标签：php, floor

如何创建一个函数以使地板的所有数字为 18 的倍数？

例子：

```
3 => 0

17 => 0

19 => 18

43 => 36

69 => 54 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T17:21:36.273

```
$a = 19;
$a -= $a % 18; // => 18 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:39:44.673

通过使用模运算符 (%)

```
 $a % $b = gives the remainder of $a divided by $b. 
```

在你的情况下，

```
 $a = 3;
 $a = $a - ($a % 18); 
```

# flash - ActionScript 中 EventListener 的返回值

> ID：12020638
> 
> 赞同：0
> 
> 时间：2012-08-18T17:19:55.603
> 
> 标签：flash, actionscript, event-listener

我想从 HTML 执行 ActionScript 函数并将值返回给 HTML。但是flash中的功能需要addEventListener。所以我不知道如何返回值，因为主函数完成得比 EventListener 函数快。显然事件函数除了 void 之外没有返回其他东西的能力，但也许有一些技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:39:36.877

假设您不需要立即返回返回值以使*javascript*工作，您可以轮询 flash 直到它准备好，然后读取返回值。

```
flash.execute();
var checkInterval = setInterval(function() {
    if (flash.isReady()) {
        clearInterval(checkInterval);
        var returnValue = flash.getReturnValue();
    }
}, 100); 
```

在 Flash 中，execute() 将“就绪”布尔值设置为 false（可以通过 isReady() 从 javascript 中读取），然后启动异步操作。完成后，flash 会存储返回值，该返回值可以通过 getReturnValue() 从 javascript 中读取，最后将准备好的布尔值更改为 true。

这假设您不需要调用并行执行命令。在这种情况下，您可以为每个执行提供一个 id，并将其发送到 execute()、isReady() 和 getReturnValue()，并通过按 id 分隔内部异步调用让 flash 处理并行请求。

# ios - CCLabelTTF 文本对齐

> ID：12020656
> 
> 赞同：1
> 
> 时间：2012-08-18T17:21:41.313
> 
> 标签：ios, cocos2d-iphone, text-alignment, cclayer, cclabelttf

我有一个模仿按钮的类。它包含一个标签，我试图将其居中对齐（水平）。无论我尝试什么，标签都停留在左侧，让我认为这比看起来更复杂。这是唯一的初始化/设置代码：

```
-(CCButtonLayer*)initWithText:(NSString*)text bgColor:(ccColor4B)color width:(GLfloat)width height:(GLfloat)height {
    self = [super initWithColor:color width:width height:height];
    self.lbl = [CCLabelTTF labelWithString:text fontName:@"Marker Felt" fontSize:22];
    self.lbl.horizontalAlignment = kCCTextAlignmentCenter;
    [self.lbl setHorizontalAlignment:kCCTextAlignmentCenter];
    self.lbl.color = ccc3(0,0,0);
 //   self.lbl.contentSize = CGSizeMake(width, height); // no effect anyway
    self.lbl.anchorPoint = CGPointZero;
    self.lbl.position = CGPointZero;
    [self addChild:self.lbl];
    return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:39:25.650

我删除了标签的对齐属性并手动对齐它。很明显，我看不到的事情正在发生，也许正如你所说的@LearnCocos2D还有另一个偏移量

```
// this worked
CGSize textSize = [self.lbl.string sizeWithFont:[UIFont fontWithName:fontName size:fontSize]];
self.lbl.anchorPoint = CGPointZero;
self.lbl.position = ccp(textSize.width /2.0f, textSize.height/2.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:43:16.890

```
self.lbl.anchorPoint = CGPointZero;
self.lbl.position = CGPointZero; 
```

正是这两行决定了标签的位置。

尝试将它们设置为：

```
self.lbl.anchorPoint = ccp(0.5, 0.5);  //This is default, you could omit
self.lbl.position = ccp(self.contentSize.width / 2.0f, self.contentSize.height / 2.0f); 
```

我假设“self”是按钮，此时它的内容大小已设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:49:46.837

正如詹姆斯所说，改变锚点会影响对齐。所以不要分配 CGPointZero 因为这会使左下角与父位置对齐。

您仍然没有看到任何变化的事实可能表明您没有考虑标签的位置实际上是对父位置的偏移。现在，如果您也更改了父级的锚点，则标签的位置将是父级左下角的偏移量。

长话短说：保持锚点不变。除了标签，您可以使用anchorPoint 来影响对齐。

# python - 如何在 PIL 中打开来自 Internet 的图像？

> ID：12020657
> 
> 赞同：27
> 
> 时间：2012-08-18T17:21:45.930
> 
> 标签：python, python-imaging-library, urllib2

我想在互联网上找到图像的尺寸。我尝试使用

```
from PIL import Image
import urllib2 as urllib
fd = urllib.urlopen("http://a/b/c")
im = Image.open(fd)
im.size 
```

[如this answer](https://stackoverflow.com/a/6014074/159388)中所建议，但我收到错误消息

```
addinfourl instance has no attribute 'seek' 
```

我检查并返回的对象`urllib2.urlopen(url)`似乎没有根据`dir`.

那么，我必须做些什么才能将图像从 Internet 加载到 PIL 中？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-18T17:46:37.137

您可以考虑使用[`io.BytesIO`](http://docs.python.org/library/io.html#buffered-streams)前[向兼容性](http://dictionary.reference.com/browse/forward+compatibility)。
Python 3 中不存在 StringIO 和 cStringIO 模块。

```
from PIL import Image
import urllib2 as urllib
import io

fd = urllib.urlopen("http://a/b/c")
image_file = io.BytesIO(fd.read())
im = Image.open(image_file) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-17T15:53:23.547

使用 Python `requests`：

```
from PIL import Image
from StringIO import StringIO
import requests

r = requests.get("http://a/b/c")
im = Image.open(StringIO(r.content))
im.size 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-18T17:47:35.717

使用相同的示例，只需使用 StringIO 将缓冲区包装到适当的类似文件的对象中：

```
from PIL import Image
import urllib2 as urllib
from StringIO import StringIO

fd = urllib.urlopen("http://a/b/c")
im = Image.open(StringIO(fd.read()))
im.size 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-29T10:31:15.277

这个[拉取请求](https://github.com/python-pillow/Pillow/pull/1151#issuecomment-87346557)增加了对 Pillow（友好的 PIL 分支）原生流处理的支持，并且应该从 2.8.0 版本开始提供。这允许使用[urllib](https://docs.python.org/2/library/urllib2.html)更简单地打开远程文件：

```
from PIL import Image
import urllib2
Image.open(urllib2.urlopen(url)) 
```

...或使用[请求](http://docs.python-requests.org/en/latest/)：

```
from PIL import Image
import requests
Image.open(requests.get(url, stream=True).raw) 
```

正如[mjpieters 在 PR](https://github.com/python-pillow/Pillow/pull/1151#issuecomment-87346557)请求中提到的那样，它不会自动解码`gzip`响应，因此，如果您正在下载由于任何原因进一步压缩的图像，您必须`decode_content=True`在访问之前在响应对象上设置`.raw`.

```
response = requests.get(url, stream=True)
response.raw.decode_content = True
image = Image.open(response.raw) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-18T17:37:23.557

[`urllib`文档](http://docs.python.org/library/urllib#urllib.urlopen)提到返回的对象不`urlopen`支持`seek`操作。

> 该模块提供了一个用于通过万维网获取数据的高级接口。特别是，urlopen() 函数类似于内置函数 open()，但接受通用资源定位器 (URL) 而不是文件名。有一些限制——它只能打开 URL 进行阅读，并且没有可用的查找操作。

但是，该[`PIL.open`](http://www.pythonware.com/library/pil/handbook/image.htm#open)功能明确要求它。

> **打开**
> 
> Image.open(infile) => 图像
> 
> Image.open(infile, mode) => 图像
> 
> 打开并识别给定的图像文件。这是一个惰性操作；在您尝试处理数据（调用 load 方法强制加载）之前，不会从文件中读取实际的图像数据。如果给出了模式参数，它必须是“r”。
> 
> 您可以使用字符串（表示文件名）或文件对象。在后一种情况下，**文件对象必须实现 read、seek 和 tell 方法**，并以二进制模式打开。

尝试使用`cStringIO`将字符串转换为类文件对象的模块。

```
from PIL import Image
import urllib2 as urllib
import cStringIO

fd = urllib.urlopen("http://a/b/c")
image_file = cStringIO.StringIO(fd.read())
im = Image.open(image_file)
im.size 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-12T08:45:10.063

这个答案是 4 年前的，但它仍然在 Google 中名列前茅。在 Python3 中，我们有简单的解决方案。

```
from urllib.request import urlopen
img =Image.open(urlopen('http://dl.iplaypython.com/images/banner336x280.jpg'))
new_img =img.resize((300,500),Image.ANTIALIAS)
new_img.save('url.jpg','jpeg') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-20T07:12:19.733

使用请求库并以字节形式获取输出

```
import requests
import io

response = requests.get("https://i.imgur.com/ExdKOOz.png")
image_bytes = io.BytesIO(response.content) 
```

# java - 如何使用 iText 为我的 (pdf-) 文本添加背景颜色以使用 Java 创建它

> ID：12020658
> 
> 赞同：4
> 
> 时间：2012-08-18T17:21:51.673
> 
> 标签：java, pdf, layout, itext, background-color

起初：我对可用于创建 pdf 的框架的了解并不是最好的，请在回答时记住这一点。

**我需要一个框架/库，我可以使用它在 java 中创建 pdf 文件并（重要！）将文本放置在某些 x 和 y 坐标处。经过大量研究，我体验到我可以通过 iText 实现这一点。**

这是一个简单的代码片段，它基本上显示了我现在正在用 iText 中的文本做什么。您可以简单地将其复制到您的编程环境中，您只需要 iText jar（可在此处下载：http: [//sourceforge.net/projects/itext/files/latest/download](http://sourceforge.net/projects/itext/files/latest/download?source=files) ?source=files ）

```
import java.io.FileOutputStream;

import com.itextpdf.text.Document;
import com.itextpdf.text.pdf.BaseFont;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfWriter;

public class PDFTesting {

public static void main(String[] args) {
    Document document = new Document();
    try {
        PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream("output.pdf"));
        document.open();
        PdfContentByte cb = writer.getDirectContent();

        int x = 100; 
        int y = 500; 

        String text = "Hello"; 

        // now we can place content elements on the page
        BaseFont bf = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        cb.saveState();
        cb.beginText();
        cb.moveText(x, y);
        cb.setFontAndSize(bf, 12);
        cb.showText(text);
        cb.endText();
        cb.restoreState();

    } catch (Exception e) {
    }

    document.close();
}
} 
```

我增加了将我的数据源中的文本添加到此方法的可能性，它真的很好用。结果对我来说看起来很有希望，所以目前我只剩下一项任务：

**我需要将特定的背景颜色添加到我正在移动和放置在上面显示的方法中的文本（不是字体颜色！）中。**

我的研究没有为我提供有关此任务的任何适合初学者的信息，因此如果您能帮助我解决此问题，我将非常高兴。

如果可能：**您能否修改我的示例，为添加的示例文本添加背景颜色？**我想我和其他人（将来可能会在阅读此主题时遇到同样的问题）将从中受益最大。

如果您需要更多信息或对我有其他建议，请随时与我联系。

感谢您的每一个回答，并认为您正在与我分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:59:58.480

我找到了我的问题的解决方案。

```
Chunk textAsChunk = new Chunk(text, textFont);
textAsChunk.setBackground(new BaseColor(120, 200, 50));

ColumnText.showTextAligned(cb, Element.ALIGN_LEFT, new Phrase(textAsChunk), x, y, 0); 
```

你在一个块中定义你的文本（块只是最小的一段文本）并给这个块你的文本以及字体（它还包括你的文本的大小）。在您的块上，您可以设置背景颜色，总体而言，您将使用显示的“showTextAligned”方法将其添加到文档中。

x 和 y 在这里指定坐标，cb 代表 PdfContentByte。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T17:29:30.733

使用`setBackgroundColor()`方法

**在此处查看此示例：**

[http://www.kodejava.org/examples/837.html](http://www.kodejava.org/examples/837.html)

# git - Gerrit 代码审查推送到空仓库不起作用

> ID：12020672
> 
> 赞同：8
> 
> 时间：2012-08-18T17:23:51.167
> 
> 标签：git, push, gerrit, fast-forward

我安装并配置了我自己的 Gerrit 服务器。我使用 Gerrit 的 web gui 创建了一个存储库。我可以使用“git”命令成功克隆这个空存储库，所以配置似乎很好。接下来，我：

1.  配置了我的访问权限：`git config --global user.email ...`, `git config --global user.name ...`,

2.  添加了遥控器：`git add remote origin myUser@myGitHost:29418/project.git`,

3.  创建并提交文件：`git add file`， git `commit -m "first commit"`。

到现在为止还挺好。

但是，当我尝试将其推送到我的仓库时，我得到了输出：

```
myUser@myGitHost:~/project$ git push origin master
Counting objects: 7, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (6/6), 525 bytes, done.
Total 6 (delta 0), reused 0 (delta 0)
remote: Processing changes: refs: 1, done
To ssh://myUser@myGitHost:29418/project.git
 ! [remote rejected] master -> master (can not update the reference as a fast forward)
error: failed to push some refs to 'ssh://myUser@myGitHost:29418/project.git' 
```

我试图寻找解决方案。" `git pull origin master`" 不起作用。`-f`使用选项推送也不起作用。

谁能帮我？

编辑： push -f 的输出：

```
myUser@myGitHost:~/project$ git push -f origin master
Counting objects: 7, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (6/6), 525 bytes, done.
Total 6 (delta 0), reused 0 (delta 0)
remote: Processing changes: refs: 1, done
To ssh://myUser@myGitHost:29418/project.git
 ! [remote rejected] master -> master (can not update the reference as a fast forward)
error: failed to push some refs to 'ssh://myUser@myGitHost:29418/project.git' 
```

我所说的“git pull origin master”的意思是人们提到的最解决方案是在推送之前进行拉取，例如：[http ://rip747.wordpress.com/2009/04/20/git-push-rejected -非快进/](http://rip747.wordpress.com/2009/04/20/git-push-rejected-non-fast-forward/)。这个拉输出：

```
myUser@myGitHost:~/project$ git pull origin master
From ssh://myGitHost:29418/project
 * branch            master     -> FETCH_HEAD
Already up-to-date. 
```

但是当我推送时，输出仍然是一样的：

> 无法将参考更新为快进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T16:17:23.420

您是否试图绕过 Gerrit 的代码审查功能？如果没有，请尝试`git push origin HEAD:refs/for/master`

# asp.net - 无法让 div 对齐

> ID：12020674
> 
> 赞同：0
> 
> 时间：2012-08-18T17:24:00.457
> 
> 标签：asp.net, css

我无法让两个 div 水平对齐

这是我的 aspx 母版页中的 html；

```
 <div class="hdrimg">
           </div>
           <div class="rightofhdrimg">
                <asp:ContentPlaceHolder ID="HeaderRight" runat="server">  </asp:ContentPlaceHolder>
           </div> 
```

这是CSS（我使用的是CSS3）；

```
.hdrimg
{
width: 680px;
margin-left: 8px;
height: 130px;
background-color: White;
background-image: url('Images/Banner/WebsiteHeader8.13.2012.jpg');
background-repeat: no-repeat;
background-size: 100%;
-moz-border-radius-bottomleft: 1em;
-webkit-border-bottom-left-radius: 1em;
border-bottom-left-radius: 1em;
 -moz-border-radius-bottomright: 1em;
-webkit-border-bottom-right-radius: 1em;
border-bottom-right-radius: 1em; 
```

}

```
.rightofhdrimg
{
float: right;
display: inline-block;
background-color: #008000 ;
height: 190px;
width:240px;
-moz-border-radius: 6px;
-webkit-border-radius: 6px;
border-radius: 6px; 
```

}

标题图像右侧的 div 应该是一个绿色的背景矩形，但它的顶部边缘是标题图像的底部边缘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:36:25.007

您可以将第一个 div 向左浮动并假设有足够的宽度来容纳它们应该在顶部对齐。

[http://jsfiddle.net/Z93dM/](http://jsfiddle.net/Z93dM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:32:49.110

您可以添加`position: absolute;`到您的 div 中。这将允许将它们的位置设置在相对于浏览器窗口的固定位置。

```
.myDiv{
position: absolute;
top: 30px;
} 
```

在[www.w3schools.com上了解更多信息](http://www.w3schools.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:40:55.897

没有什么比这更重要的了。**您可以在.hdrimg**上**定义****float**的css 属性，如下所示：

 ****```
.hdrimg {
  //existing stuff
  float:left;
} 
```

它将按预期运行。但请记住，两个 div 都必须有足够的宽度空间，以便它们可以适应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T18:08:42.353

```
<div>
   <div class="hdrimg" style="float: left;">
      <asp:ContentPlaceHolder ID="HeaderRight" runat="server">         
    </div>
    <div class="rightofhdrimg">
    </div>
</div> 
```****

# python - 在 Tornado 中捕获 PIL 异常

> ID：12020676
> 
> 赞同：1
> 
> 时间：2012-08-18T17:24:35.207
> 
> 标签：python, python-imaging-library, tornado

捕捉错误不会部分起作用！

我要做的是检测用户上传的是真实图片还是伪造图片*（例如重命名为的文本文件`.jpeg`）*。

```
try:
    image = Image.open(StringIO.StringIO(buf=avat))
    type = image.format
    (x, y) = image.size
    print x, y
    if x < y:
        orientation = "portrait"
    else:
        orientation = "paysage" 
    pref = str(time.time())
    nomf = pref.replace(".", "") 
    nomfich = nomf+"."+type
    self.fs = GridFS(self.db)
    avatar_id = self.fs.put(avat, content_type=avctype, filename=nomfich)
except IOError, TypeError:
    self.redirect("/erreur-im") 
```

这是显示在`http://localhost:8000/erreur-im`

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\tornado-2.3.post1-py2.7.egg\tornado\web.py", line 1023, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "G:\Mon projet\sog-emouk\handlers.py", line 101, in get
    avctype = self.db.users.find_one()["avctype"]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

在这里，我想做的是将用户重定向到一个页面，告诉他们用户必须使用图片图片。

当我改变结果`self.redirect`时`self.write("please upload....")`，结果很奇怪：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\tornado-2.3.post1-py2.7.egg\tornado\web.py", line 1023, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "G:\Mon projet\sog-emouk\handlers.py", line 153, in post
    user={"pseudo":pseudo, "orientation":orientation, "avctype":avctype, "password":password, "email":email, "tel":tel, "commune":commune, "coord":coord, "statut":statut, "telf":telf, "avatar":avatar_id, "acheteur":[], "vendeur":[]}
UnboundLocalError: local variable 'orientation' referenced before assignment 
```

所以，我猜`self.redirect`这里有一些奇怪的地方，因为`self.write`在捕获异常后执行代码*（实际上由于文本文件，image.size 不知道）*。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:23:56.193

此回溯表明您正在重定向到在两个地方再次抛出未捕获异常的代码。看到这个：`avctype = self.db.users.find_one()["avctype"]`和

```
user={"pseudo":pseudo, "orientation":orientation, "avctype":avctype, "password":password, "email":email, "tel":tel, "commune":commune, "coord":coord, "statut":statut, "telf":telf, "avatar":avatar_id, "acheteur":[], "vendeur":[]} 
```

查看两个回溯：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\tornado-2.3.post1-py2.7.egg\tornado\web.py", line 1023, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "G:\Mon projet\sog-emouk\handlers.py", line 101, in get
    avctype = self.db.users.find_one()["avctype"]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

和

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\tornado-2.3.post1-py2.7.egg\tornado\web.py", line 1023, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "G:\Mon projet\sog-emouk\handlers.py", line 153, in post
    user={"pseudo":pseudo, "orientation":orientation, "avctype":avctype, "password":password, "email":email, "tel":tel, "commune":commune, "coord":coord, "statut":statut, "telf":telf, "avatar":avatar_id, "acheteur":[], "vendeur":[]}
UnboundLocalError: local variable 'orientation' referenced before assignment 
```

因此，我认为您在初始化应用程序和请求处理程序的应用程序中存在错误。

此外，您还可以[查看](https://stackoverflow.com/questions/266648/python-check-if-uploaded-file-is-jpg) 如何检查文件是否实际上是 jpeg。事实上，您可以检查其他媒体文件格式 avi、rm 等检查前四个字符。

# html - 和标签 100% 高度失败

> ID：12020677
> 
> 赞同：6
> 
> 时间：2012-08-18T17:24:44.430
> 
> 标签：html, css, margin, padding, document-body

`<html>`我有一个应用程序，它要求我使用 CSS 将and`<body>`标记的高度设置为 100%，如下所示（ [JSFiddle 版本](http://jsfiddle.net/spryno724/QQvdw/1/)）：

```
html, body {
  display: block;
  height: 100%;
  margin: 0px;
  padding: 0px;
  width: 100%;
}

body {
  background-color: #141414;
  overflow-x: hidden;
  overflow-y: auto;
} 
```

我已经包含了为这些标签设置样式的所有 CSS。但是，我**总是**有一个滚动条，它可以让我向下滚动大约 20 像素，而不管页面内容的实际大小。这个问题也存在于任何尺寸的屏幕上。

我可以在这些屏幕截图中看到原因。请注意，body 的 ID 为`#container`，但这仅用于 JS 定位，而不是 CSS 样式：

![在此处输入图像描述](../Images/f5be52e91cc09346aedc1517d77c8d42.png)

同一页面的 3D 透视图，显示`<body>`标签从标签顶部向下滑动`<html>`：

![在此处输入图像描述](../Images/eb2d752ce8d5a297016779c307a588ab.png)

由于我在这些标签上没有任何边距或填充，并且由于页面顶部附近的任何 HTML 元素都没有任何边距或填充来将`<body>`标签向下推，所以我真的被卡住了。

如何修复 CSS 以使`<body>`标签与页面顶部齐平？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:48:32.500

尝试

```
header {
    margin: 0px 17% 0px 17%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:50:28.920

最可能的原因是[利润率下降](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)。`padding: 0.01px`你可以通过添加到你的身体来“解决”这个问题。

希望我第二次尝试回答这个问题不会像我第一次那样愚蠢 XD

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-19T17:28:08.430

好像你有一个新行或和之间的`<html>`空格`<body>`......

试试这个：

```
<html><body>
    ...
</body></html> 
```

代替：

```
<html>
<body>
    ...
</body>
</html> 
```

# css - CSS - 存在 Margin-Top 时忽略 Margin-Bottom

> ID：12020680
> 
> 赞同：1
> 
> 时间：2012-08-18T17:25:16.567
> 
> 标签：css

我有一个场景，我将多个 DIV 与 margin-top 和 margin-bottom 堆叠在一起，但是当我有 margin-top 时，我发现 margin-bottom 被忽略了。我无法解释它是如何发生的。

html

```
<div class='box'>
<div class='item'>1</div>
<div class='item'>2</div>
<div class='item'>3</div>
<div class='item'>4</div>
<div class='item'>5</div>
<div class='item'>6</div>
<div class='item'>7</div>
<div class='item'>8</div>
</div>​ 
```

css

```
.box{
    width:100%;
    height:300px;

}

.item{
    list-style: none;
    display:block;
    margin-top:20px;
    margin-bottom:20px;
    width:100%;
    height:50px;                
    background-color:red;
} 
```

如果我将项目设置为浮动：左，那么它能够正确禁用边距底部。

CSS by div 向左浮动

```
.item{
    list-style: none;
    float:left;
    display:block;
    margin-top:20px;
    margin-bottom:20px;
    width:100%;
    clear:both;
    height:50px;                
    background-color:red;
}     ​ 
```

这是 jsfiddle[链接](http://jsfiddle.net/mochatony/5bgkG/19/)以更好地说明它。用chrome和firefox测试。有人可以解释它是如何发生的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:46:55.130

详细说明我有点简洁的评论：

想象一下你有这样的代码：

```
<body>
    <p>A paragraph</p>
    <p>Another paragraph</p>
    <p>A final paragraph</p>
</body> 
```

你的CSS是：

```
p {
    margin-top: 10px;
    margin-bottom: 10px;
} 
```

如果没有发生边距折叠，您最终会在顶部有 10 像素的边距，在底部有 10 像素的边距，但段落之间的边距通常是**20**像素，这通常不是必需的。

为了解决这个问题，浏览器将顶部和底部边距折叠在一起，因此段落（或任何其他块级元素）之间的间隙等于顶部和底部边距中较大的一个。

这就是您的代码所发生的情况。

# email - PHP邮件无法通过

> ID：12020682
> 
> 赞同：0
> 
> 时间：2012-08-18T17:25:48.147
> 
> 标签：email, php

我试图将我的网站上的联系人邮寄到我的 hotmail 帐户，但它似乎没有通过，即使在垃圾邮件中也没有出现，我会在这里发布我的代码，也许有人知道如何调整它（至少）进入我的垃圾邮件。

我也不想使用任何 php 邮件服务或类似的东西，所以请不要推荐它们。

**编辑：**工作代码（使用 phpMailer）

```
 <?php
require_once('phpmailer/class.phpmailer.php');
define('GUSER', 'youtGmail@gmail.com); // GMail username
define('GPWD', 'gmailPassword'); // GMail password

    function smtpmailer($to, $from, $from_name, $subject, $body) { 
        global $error;
        $mail = new PHPMailer();  // create a new object
        $mail->IsSMTP(); // enable SMTP
        $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
        $mail->SMTPAuth = true;  // authentication enabled
        $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
        $mail->Host = 'smtp.gmail.com';
        $mail->Port = 465; 
        $mail->Username = GUSER;  
        $mail->Password = GPWD;           
        $mail->SetFrom($from, $from_name);
        $mail->Subject = $subject;
        $mail->Body = $body;
        $mail->AddAddress($to);
            if(!$mail->Send()) {
                $error = 'Mail error: '.$mail->ErrorInfo; 
                return false;
            } else {
                $error = 'Message sent!';
                return true;
            }
    }

if(isset($_POST['submit'])) {

    if(trim($_POST['contactname']) == '') {
        $hasError = true;
    } else {
        $name = trim($_POST['contactname']);
    }

    if(trim($_POST['subject']) == '') {
        $hasError = true;
    } else {
        $subject = trim($_POST['subject']);
    }

    if(trim($_POST['email']) == '')  {
        $hasError = true;
    } else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
        $hasError = true;
    } else {
        $email = trim($_POST['email']);
    }

    if(trim($_POST['message']) == '') {
        $hasError = true;
    } else {
        if(function_exists('stripslashes')) {
            $comments = stripslashes(trim($_POST['message']));
        } else {
            $comments = trim($_POST['message']);
        }
    }

    if(!isset($hasError)) {

     $emailTo = 'your@email.com';
     smtpmailer($emailTo, $email, 'Company', $name, $subject, $comments);
     $emailSent = true;

    }
}
?> 
```

**编辑：**有人建议我为此使用 SMTP，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:31:27.300

您从哪个域发送电子邮件？受信任`.com`的邮件还是电子邮件服务器可能将其识别为垃圾邮件的邮件？像这样的域通常是免费的。

如果没有，我会检查您的 php.ini 文件以确保它已[正确配置](https://stackoverflow.com/a/9689896/663604)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:32:19.697

您可以尝试多种方法来改善电子邮件接收。您可以尝试设置您的 X-mailer 标头，使用域密钥，如果一切都失败了，只需从 google smtp 帐户向您发送邮件。我强烈建议使用 google smtp 帐户 + php mailer 之类的东西。我对那个解决方案没有任何问题。

这是一个关于如何使用gmail+phpmailer通过smtp发送邮件的教程：

[http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/](http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/)

# javascript - 什么是 javascript 执行上下文中的形参列表？

> ID：12020686
> 
> 赞同：0
> 
> 时间：2012-08-18T17:26:00.953
> 
> 标签：javascript

我想知道什么是 javascript 执行上下文中的形式参数列表。例如说我有这样的功能

```
function test(a, b, c) {
    var d, e;
} 
```

当这个函数被激活时，形式参数列表是什么？它会只是 a、b 和 c 还是 d 和 e 也会在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:31:53.213

形式参数是作为函数输入提供的值，因此在您的情况下，形式参数只有：a、b 和 c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:30:19.093

a、b 和 c 是参数，d 和 e 只是局部变量。

你想用这个解决什么问题？

# emacs - 为什么 (set-mark-command) 会抛出错误？

> ID：12020691
> 
> 赞同：1
> 
> 时间：2012-08-18T17:26:27.613
> 
> 标签：emacs, elisp

我将我的转发词自定义为 vim-like 'w' follow [this](https://stackoverflow.com/questions/3931837/modifying-emacs-forward-word-backward-ward-behavior-to-be-like-in-vi-vim)，这工作正常，除了 MSf 不再选择文本。
所以，我写了这个函数：

```
(defun forward-to-word-with-selection (arg)
  (interactive "p")
  (if (not (eq last-command 'forward-to-word-with-selection))
      (progn (message "Mark Set")
             (set-mark-command))
    (forward-to-word arg)))

(global-set-key (kbd "M-F") 'forward-to-word-with-selection) 
```

但是，我得到了一个混乱的错误：

![在此处输入图像描述](../Images/5cf96c2420df29ee0c55709f718880b7.png)

然后我逐步运行这个函数（使用 Cc Ce，任何其他更好的调试方法都很好，因为我是 elisp 的新手），这个错误是由于（set-mark-command）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:45:29.723

您不想自己操纵标记。只需指定“^”即可进行交互。我已经提交了一个带有补丁的错误以在 Emacs 中修复它，但您可以定义自己的包装器：

```
(defun forward-to-word-w (arg)
  "wrapper to work with shift-select-mode"
  (interactive "^p")
  (forward-to-word arg)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:34:41.343

`set-mark-command`接受一个包含前缀参数的原始形式的参数。这就是`C-@`根据您给它的前缀参数的类型而不同的行为方式。

您可能不想在代码中调用此函数，您可能想使用`push-mark`.

# php - magento 用大图替换缩略图

> ID：12020692
> 
> 赞同：0
> 
> 时间：2012-08-18T17:26:44.477
> 
> 标签：php, magento

任何人都可以分享一个用大图像替换缩略图的快速提示吗？

我的“media.phtml”代码的快速片段如下所示：

```
<p class="product-image">
    <?php
        $_img = '<img src="'.$this->helper('catalog/image')->init($_product, 'image')->resize(265).'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" />';
        echo $_helper->productAttribute($_product, $_img, 'image');
        ?>
</p>
<?php endif; ?>
<?php if (count($this->getGalleryImages()) > 0): ?>
<div class="more-views">
    <h2><?php echo $this->__('More Views') ?></h2>
    <ul class="cf zoom-gallery"> 
    <?php
    foreach ($this->getGalleryImages() as $_image): ?>
        <li>
            <a class="zoom-thumbnail" style="width:<?php echo $arrMedia ["width"]; ?>px;" class="cloud-zoom-gallery"  href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize($arr ["Owidth"], $arr ["Oheight"]); ?>" target="_popUp" data-easyzoom-source="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize($arr ["Owidth"], $arr ["Oheight"]); ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"><img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize($arrMedia ["width"], $arrMedia ["height"]); ?>" width="<?php echo $arrMedia ["width"]; ?>" height="<?php echo $arrMedia ["height"]; ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a>
        </li>
    <?php endforeach; ?>
    </ul>
</div> 
```

完整代码位于[此处](http://pastebin.com/i9v7MaMG)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:47:34.873

你的意思是这样的？：

```
$( ".zoom-thumbnail" ).on( 'click', function ( event ) {

  event.preventDefault();

  $( ".product-image img" ).attr( 'src', event.target.href );

} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:46:41.697

[这个链接](http://blog.hqdipace.com/image-switcher-in-magento-product-thumb/)帮助我实现了我想要的。希望它会帮助某人。

解决方案如下：

```
<a class="zoom-thumbnail" style="width:<?php echo $arrMedia ["width"]; ?>px;" class="cloud-zoom-gallery" href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" title="<?php echo $_product->getName();?>" onclick="$('image').src = this.href; return false;"  title="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"><img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize($arrMedia ["width"], $arrMedia ["height"]); ?>" width="<?php echo $arrMedia ["width"]; ?>" height="<?php echo $arrMedia ["height"]; ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a> 
```

# ruby-on-rails-3 - 设计功能测试 - 没有会话数据

> ID：12020694
> 
> 赞同：0
> 
> 时间：2012-08-18T17:27:44.417
> 
> 标签：ruby-on-rails-3, devise, functional-testing

在将设计安装到我的应用程序后，我正试图让我的功能测试再次运行。该应用程序仍然可以完美运行，但由于某种原因，在我使用“sign_in @user”后，数据在会话中，但在我尝试“get :index”之类的操作后，设计（看守）会话数据不再存在

```
test "should get index" do
  @user = FactoryGirl.create(:user)
  session[:session_id] = 4
  session['warden.user.user.key'] = sign_in @user
  puts session
  get :index
  puts session
  assert_response :success
  assert_not_nil assigns(:departments)
end 
```

我手动设置了会话 ID 和“warden.user.user.key”，但 session_id 在第二个 puts 会话中，但不是“warden.user.user.key”。无论我是否调用“sign_in @user”，它总是会重定向为“您需要先登录或注册才能继续”警报

编辑 - 我正在使用带有 mm-devise 的设计（因为我使用的是 MongoDB 和 Mongoapper）

感谢您的帮助 - 原来是没有清除数据库的问题。创建用户的方式并没有相互覆盖，但是哪个用户将登录是模棱两可的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:19:38.663

当我使用 Cucumber 时，我认为你应该像我在这里做的那样：

```
# This gives you the login_as(@user) method when request object is not present
include Warden::Test::Helpers
Warden.test_mode!
After { Warden.test_reset! }

Given /^I am an authenticated user$/ do
  @current_user = FactoryGirl.create(:user)
  login_as(@current_user, :scope => :user)
end 
```

...并清理您的用户工厂以删除您可能拥有的任何凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:25:15.460

在第一个 puts 会话中，“warden.user.user.key”的值显示什么？

# c# - 如何在 wp7 中的全景页面之间导航

> ID：12020696
> 
> 赞同：0
> 
> 时间：2012-08-18T17:27:48.503
> 
> 标签：c#, windows-phone-7

我为 wp7 创建了一个全景应用程序。我只想在全景页面之间导航。就像我创建了一些图像，如果我点击了任何图像，那么它应该被导航到第三页眉或第四页眉。有人可以帮我吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-18T19:34:08.340

假设您的全景控件具有属性 x:Name="myPanorama"。

现在要导航 beetwen PanoramaItem，您必须设置“SelectedIndxex”属性：

```
myPanorama.SelectedIndex = 4; 
```

# css - 如何防止图标/精灵在流体设计中移动

> ID：12020699
> 
> 赞同：0
> 
> 时间：2012-08-18T17:28:11.420
> 
> 标签：css, sprite, fluid

我想阻止我的图标在我的流畅设计中移动。标题响应宽度变化，它占用大约 500 px 的高度，它应该适合背景的某些区域（在我的情况下是一个插图滚动“，但是当我调整窗口大小并且标题收缩时，精灵最终会移动离开滚动位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:20:47.380

这是给你的文章：

[http://coding.smashingmagazine.com/2012/08/13/coding-qa-with-chris-coyier-responsive-sprites-responsive-font-sizing-media-query-efficiency-more/](http://coding.smashingmagazine.com/2012/08/13/coding-qa-with-chris-coyier-responsive-sprites-responsive-font-sizing-media-query-efficiency-more/)

它解决了这个问题：

```
"Is there a preferred/suggested way of handling responsive sprites at all for multiple resolutions and image scaling? Is this even possible?" 
```

# mysql - 一行（用户）分配给不同表和数据库中的多行 - mysql

> ID：12020700
> 
> 赞同：0
> 
> 时间：2012-08-18T17:28:12.370
> 
> 标签：mysql, relational-database, row

在 mysql 中拥有一张包含用户（已注册）的表

我只是想为每个人分配不同表中的任何行和其他数据库中的不同表。

我想为每个用户创建带有指向此行的链接的独立表。

例如：

> Table my_user // 有两列
> 
> id_of_table id_of_row

但恐怕不是很好的解决方案。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:38:04.310

为什么不将 user_id 列添加到您想要它们的所有表中？如果您需要一个可以查找所有用户拥有的表的中心位置，您可以通过命名约定（添加“user_owned”或其他东西）来完成，或者创建一个包含所有用户拥有的表的表名的表。

# javascript - 这个脚本似乎不起作用

> ID：12020701
> 
> 赞同：-1
> 
> 时间：2012-08-18T17:28:13.907
> 
> 标签：javascript, jquery, html

我将这个 jQuery 脚本保存在记事本中，并将其保存为“test.HTML”，但似乎无法正常工作。它在 jsfiddle 中完美运行，但不能作为 .HTML 文件。如果有人可以提供帮助，那就太好了。

这是 jsfiddle 中的工作脚本 - [http://jsfiddle.net/58VHE/28/](http://jsfiddle.net/58VHE/28/)

[这是保存为 .HTML - http://goo.gl/WXwQ3](http://goo.gl/WXwQ3)后无法运行的脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:31:04.063

您没有添加 jQuery 库（jsfiddle 在他们的测试页面中自动为您添加）

# php - PHP MSSQL Distinct 不工作

> ID：12020705
> 
> 赞同：2
> 
> 时间：2012-08-18T17:28:20.153
> 
> 标签：php, sql-server, select

**我在Id、State、City**表中有三列。每个州包含几十个城市。我要做的就是选择独特的状态并获取它们的 ID。

```
SELECT DISTINCT(State) FROM LocationTable; 
```

这非常有效，但我也需要获得 Id。我试过：

```
SELECT DISTINCT(State), Id FROM LocationTable 
```

和

```
SELECT State, Id FROM LocationTable GROUP BY State, Id 
```

但它仍然不返回唯一状态。基本上我需要让这个 MySQL 查询在 MSSQL 上运行：

```
SELECT UNIQUE(State), Id FROM LocationTable; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:35:26.253

基于安德鲁的回答：

`DISTINCT`适用于整个数据集，而不仅仅是它之后的列。

```
SELECT distinct State, MAX(Id) 
FROM LocationTable 
GROUP BY state 
```

会给你最大的`Id`数字。但是，就像 Andrew 所说，您必须选择如何限制`Id`您正在检索的内容。

有关工作示例，请参见此：[http ://sqlfiddle.com/#!3/f5b42/5](http://sqlfiddle.com/#!3/f5b42/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:31:09.413

尝试 distinct 作为关键字，而不是函数：

```
SELECT DISTINCT State,Id FROM LocationTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:31:46.737

```
SELECT State, Id FROM LocationTable GROUP BY State, Id 
```

当它找到 2 个匹配但具有不同 ID 的状态时，您希望它做什么？它将返回状态两次，每个 ID 一次。

我怀疑你的数据是这样的：

```
 ID, State, City
  1   WA    Seattle
  2   WA    Tacoma 
```

当您说您想要该州的 ID 时，您将不得不选择想要的 ID、最大值、最小值等。该州没有单一的 ID。

对评论的回应：可能是这样的......

```
Select max(cast(id as binary(16)), state from locationtable group by state 
```

但我认为 ID 的有效性在这里确实存在问题，您将如何处理 ID，它将仅用于 1 行，而不是该状态的所有行。（现在要处理它是一个唯一标识符字段的事实）

# java - 服务器端口 1099 和 4447 有什么区别？

> ID：12020709
> 
> 赞同：2
> 
> 时间：2012-08-18T17:28:44.243
> 
> 标签：java, jboss, ejb, jboss7.x

我是 EJB3.x 和 JBoss 的新手，所以这可能是一个真正的基本问题。我之前已经完成了本教程，它工作正常[http://theopentutorials.com/examples/java-ee/ejb3/how-to-create-a-simple-ejb3-project-in-eclipse-jboss-7-1 /](http://theopentutorials.com/examples/java-ee/ejb3/how-to-create-a-simple-ejb3-project-in-eclipse-jboss-7-1/)。我在文献中读到，对于此类工作，使用的是命名服务的端口 1099，而不是用于 HA JRMP 的端口 4447。

所以我也尝试了1099端口，它不起作用。JBoss 服务器似乎没有打开该端口。我使用 TCPView 和 telnet 来检查它。

我想象以下问题：

1) 为什么我可以使用端口 4447 而不是 1099？

2）为什么JBoss服务器不尝试打开和使用1099端口？

该代码与示例中的代码完全相同，并且没有更改 JBoss 服务器的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-21T11:18:53.073

来自此处的 JBoss 7 文档：[https ://docs.jboss.org/author/display/AS71/JNDI+Reference](https://docs.jboss.org/author/display/AS71/JNDI+Reference)

> “AS 7.1 支持两种不同类型的远程 JNDI。不再支持以前 JBoss 版本中使用的基于 jnp 的旧 JNDI 实现。”

这两种类型是**remote**和**ejb**。

对于遥控器，它解释说：

> “远程：协议使用 JBoss 远程处理协议从服务器本地 JNDI 中查找项目。”

所以 JBoss 7 不再监听 (HA)JNDI 端口。

此处提供了有关远程 EJB 调用的更多信息：

[https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:59:09.917

我用过`Jboss 4.0,4.3,5.0`，其中每一个`1099`都是`JNDI`端口。`server.xml`您可以在`config`jboss 的目录中找到哪些端口用于哪个服务。

# php - PHP 文件上传器图像过滤器

> ID：12020711
> 
> 赞同：1
> 
> 时间：2012-08-18T17:28:49.047
> 
> 标签：php

好的，所以我找到了一个上传脚本，并添加了适合我的会话的调整。如果会话未登录，它会回显图像，但如果会话已登录，则显示文件上传器。问题是，有人可以将有害的 PHP 脚本上传到这里，我只希望它用于图像。有什么建议可以只制作我的代码图像吗？我尝试添加过滤器，但这不起作用。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Upload your own picture of Bouncy!</title>
</head>
<style type='text/css'>
body {
background-image:url('../membership/sitebg.png');
background-repeat:repeat-x;
background-color:#ffffff;
}

a {
color: #093D03;
text-shadow:0px 0px 5px #ffffff;
}

a:visited {
color: #093D03;
}

a:active {
color: #093D03;
}

a:hover {
color: #1AFF00;
}
</style>
<?php
session_start();

if ($_SESSION['loggedin'] == true) 
{
echo "<br />";
echo "<br />";
echo "<center><font face='arial'>Welcome to the funny picture uploader,<b> ".$_SESSION['username'];
echo "</b><br /><a href='http://x.org/membership/logout.php'>Logout</a> | <a href='#'>More</a> | <a href='http://x.org'>Home</a>";
echo "<br />";
echo "<br />";
                    $max_no_img=1; // Maximum number of images value to be set here
                    echo "<form method=post action='' enctype='multipart/form-data'>";
                    echo "<table border='0' width='400' cellspacing='0' cellpadding='0' align=center>";
                    for($i=1; $i<=$max_no_img; $i++)                             {
                    echo "<tr><td>Images $i</td><td>
                    <input type=file name='images[]' class='bginput'></td></tr>";
                                                                                 }
                          echo "<tr><td colspan=2 align=center><input type=submit value='Add Image'></td></tr>";
                          echo "</form> </table>";
      while(list($key,$value) = each($_FILES['images']['name']))
                                                                                                      {
          //echo $key;  
          //echo "<br>";
          //echo $value;
          //echo "<br>";
      if(!empty($value)){   // this will check if any blank field is entered
      $filename =rand(100000000000000,10000000000000000000).$value;    // filename stores the value

      $filename=str_replace(" ","-",$filename);// Add _ inplace of blank space in file name, you can remove this line

      $add = "pictures/$filename";   // upload directory path is set
      //echo $_FILES['images']['type'][$key];     // uncomment this line if you want to display the file type
      //echo "<br>";                             // Display a line break
      copy($_FILES['images']['tmp_name'][$key], $add); 
      echo "<center><b>Your picture will be stored at:</b></center> ";
      echo "<center><a href='http://bouncygames.org/$add'>Click here to view your image!</a></center>";
          //  upload the file to the server
      chmod("$add",0777);                 // set permission to the file.
        }                                                                                               }
} else {
echo "<br /><center><img src='sorry.png'><br />
<a href='x'><img src='button-to-join.png'></a>
</center>";
}
?> 
```

我的问题： **我怎样才能让这个只上传图片？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:37:55.303

为了`<input type="file" name="file" id="file" />`

我得到文件类型`$type = $_FILES["file"]["type"]`

您也可以这样做，然后通过简单的`if($type == "jpeg" || $type == "png")`方式决定是否接受该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T19:30:09.280

在这里你可以看到我对类似问题的解决方案：首先我使用一个隐藏的表单字段，因为它被发送到同一个页面，也就是 web 表单所在的页面。

```
<ul id="pictures">
<li><input type="file" name="files[]"><input type="hidden" name="send"></li>
<?php 
if (isset($_POST['send']))
{
    if(count($_FILES['files']['name']))
    {
        foreach ($_FILES['files']['name']as $datei)
        {
    $upload_folder = 'images/'; //Das Upload-Verzeichnis
    $filename = pathinfo($_FILES['datei']['name'], PATHINFO_FILENAME);
    $extension = strtolower(pathinfo($_FILES['datei']['name'], PATHINFO_EXTENSION));

    //Checking the file extension.
    $allowed_extensions = array('png', 'jpg', 'jpeg', 'gif');
    if(!in_array($extension, $allowed_extensions)) {
        die("<li>Ungültige Dateiendung. Nur png, jpg, jpeg und gif-Dateien sind erlaubt</li>");
    }

    //Checking the file size
    $max_size = 500*1024; //500 KB
    if($_FILES['datei']['size'] > $max_size) {
        die("<li>Bitte keine Dateien größer 500kb hochladen</li>");
    }

    //Checking the EXIF-data
    if(function_exists('exif_imagetype')) { //exif_imagetype erfordert die exif-Erweiterung
        $allowed_types = array(IMAGETYPE_PNG, IMAGETYPE_JPEG, IMAGETYPE_GIF);
        $detected_type = exif_imagetype($_FILES['datei']['tmp_name']);
        if(!in_array($detected_type, $allowed_types)) {
            die("<li>Nur der Upload von Bilddateien ist gestattet</li>");
        }}}
    }

    //Path for uploading
    $new_path = $upload_folder.$filename.'.'.$extension;

    //New filename, file already exists.
    if(file_exists($new_path)) { 
        $id = 1;
        do {
            $new_path = $upload_folder.$filename.'_'.$id.'.'.$extension;
            $id++;
        } while(file_exists($new_path));
    }

    //Alright, move the file to its destination.
    move_uploaded_file($_FILES['datei']['tmp_name'], $new_path);
    echo '<li>Bild erfolgreich hochgeladen: <a href="'.$new_path.'">'.$new_path.'</a></li>';

}

?> 
```

这个脚本我找到了一个网络搜索。

# c# - 暂停循环直到事件

> ID：12020725
> 
> 赞同：0
> 
> 时间：2012-08-18T17:31:08.797
> 
> 标签：c#, events, for-loop

我正在从关闭文档的 for 循环中调用一个线程。问题是，循环继续并尝试在线程中的代码完成之前打开另一个文档。如何暂停循环并等待文档关闭事件。谢谢。

编辑

这是我的代码...

```
 public void OpenFile()
    {
        for (int i = 0; i < 3; i++)
        {
            if (i != 1)
            {
                try
                {
                    uiApp.OpenAndActivateDocument(TargetPath(i));
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
            ThreadPool.QueueUserWorkItem(new WaitCallback(CloseDoc));
        }
    }

    static void CloseDoc(object stateInfo)
    {
        try
        {
            SendKeys.SendWait("^{F4}");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

我尝试在 CloseDoc 之后添加 'Thread.Sleep(3000)'，但没有成功。看起来“手动/自动重置事件类中的等待方法”将是我最好的选择。@GAPS你能详细说明吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:34:33.943

如果您必须等待每个线程完成，您可以在一个线程中调用所有代码。如果您想避免冻结 UI - 创建一个方法：

```
public void DoWork()
{
   foreach(/*  your code here*/)
   {
      // do work with documents
   }
} 
```

并在非ui线程上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:34:28.953

如果没有看到您的代码，我无法回答您的具体情况，但请查看 lock 关键字和/或等待句柄

请参阅此链接：

[http://msdn.microsoft.com/en-us/library/ms173179.aspx](http://msdn.microsoft.com/en-us/library/ms173179.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:37:45.870

尝试使用此代码

```
 private object verrou = new object();

 for(int i = 0; i < index; i++)
 {
       lock (verrou )
        {
            // Access thread-sensitive resources.
        }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:41:50.837

请详细说明您的问题...暂时回答您的问题，我建议您`waitone`使用`manual/auto reset event classes`. 您可以通知您的等待线程您的文档已关闭，然后您可以继续。

[自动复位](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

[手动复位](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)

# macos - vmware fusion 中没有 netwotk 选项

> ID：12020732
> 
> 赞同：0
> 
> 时间：2012-08-18T17:31:50.687
> 
> 标签：macos, windows-xp, vmware, vmware-fusion

我有一个 10.5.8 版本的 macbook。我正在尝试将 vmware fusion 与 windows xp 一起使用。

我在我的 mac 环境中有一个非常好的互联网连接，但是当我进入 xp 时我没有连接。我已经看到了各种解决问题的方法，但是当你进入 xp 菜单栏 - > 虚拟机 - > 设置时还没有看到：当我按下网络时，那里什么也没有。+是灰色的，你不能按它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:22:44.587

导航到“虚拟机”菜单并选择`(Re)install VMWare Tools`。这将为您的客户操作系统安装相关的网络和显示驱动程序。它可能会触发或需要重新启动您的来宾 VM，但请先尝试该选项。

之后，您将有几个网络选项。选择`NAT`是否要利用 MacBook 的网络连接/IP。选择`Bridged`是否希望 Windows VM 占用其自己的 IP 地址。

![在此处输入图像描述](../Images/525a982dc79e20085505c49aa5991427.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:34:45.070

您可能缺少guest (windoiws) xp 系统的guest-additions。您的 mac 环境可能没有为 xp 中的以太网控制器提供适当的驱动程序。

# c++ - CMake 不再找到静态 Boost 库

> ID：12020736
> 
> 赞同：8
> 
> 时间：2012-08-18T17:32:03.760
> 
> 标签：c++, boost, cmake

我正在开发一个依赖 Boost 的大型 C++ 项目。该项目使用 CMake 构建在各种平台上。在我的 Windows 机器上，我使用 CMake 2.8.9、Visual Studio 2010 和 Boost 1.50.0（从源代码构建）。

多年来，我一直在使用 CMake 和 Boost 没有问题，Boost 版本早在 1.33。**现在，突然 CMake 不再找到 Boost 库**。我的机器上唯一改变的是我最近安装了 Visual Studio 2012，但我认为这与问题没有任何关系（另一方面，据我记得，这是*唯一*已经改变）。

这是我用来调用 CMake 的命令行：

```
cmake ..\src -DBOOST_ROOT=..\..\boost -DQT_QMAKE_EXECUTABLE=..\..\qt-4.8.0\bin\qmake.exe 
```

这曾经完美无缺，但现在输出：

```
-- Building for: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler using: Visual Studio 10
-- Check for working CXX compiler using: Visual Studio 10 -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:1191 (message):
  Unable to find the requested Boost libraries.

  Boost version: 1.50.0

  Boost include path: C:/franz/dev/boost

  The following Boost libraries could not be found:

          boost_date_time
          boost_filesystem
          boost_regex
          boost_system
          boost_thread

  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
  directory containing Boost libraries or BOOST_ROOT to the location of
  Boost.
Call Stack (most recent call first):
  CMakeLists.txt:114 (find_package)

-- Found OpenGL: opengl32
-- Looking for Q_WS_X11
-- Looking for Q_WS_X11 - not found.
-- Looking for Q_WS_WIN
-- Looking for Q_WS_WIN - found
-- Looking for Q_WS_QWS
-- Looking for Q_WS_QWS - not found.
-- Looking for Q_WS_MAC
-- Looking for Q_WS_MAC - not found.
-- Found Qt4: C:/franz/dev/qt-4.8.0/bin/qmake.exe (found version "4.8.0")
-- Configuring incomplete, errors occurred! 
```

显然，它*确实*找到了我的 Boost 安装，因为它报告了正确的路径和版本号。

以下是 的内容`C:\franz\dev\boost\stage\lib`：

```
08/18/2012  05:20 PM           360,294 libboost_chrono-vc100-mt-1_50.lib
08/18/2012  05:19 PM         1,529,418 libboost_chrono-vc100-mt-gd-1_50.lib
08/18/2012  05:20 PM           600,900 libboost_date_time-vc100-mt-1_50.lib
08/18/2012  05:19 PM         2,064,420 libboost_date_time-vc100-mt-gd-1_50.lib
08/18/2012  05:20 PM             5,478 libboost_exception-vc100-mt-1_50.lib
08/18/2012  05:19 PM            39,634 libboost_exception-vc100-mt-gd-1_50.lib
08/18/2012  05:20 PM           857,020 libboost_filesystem-vc100-mt-1_50.lib
08/18/2012  05:20 PM         4,289,814 libboost_filesystem-vc100-mt-gd-1_50.lib
08/18/2012  05:21 PM         5,811,696 libboost_graph-vc100-mt-1_50.lib
08/18/2012  05:14 PM        14,388,384 libboost_graph-vc100-mt-gd-1_50.lib
08/18/2012  05:21 PM           406,742 libboost_iostreams-vc100-mt-1_50.lib
08/18/2012  05:14 PM         1,260,032 libboost_iostreams-vc100-mt-gd-1_50.lib
08/18/2012  05:21 PM         6,886,724 libboost_locale-vc100-mt-1_50.lib
08/18/2012  05:14 PM        22,056,376 libboost_locale-vc100-mt-gd-1_50.lib
08/18/2012  05:22 PM         1,395,280 libboost_math_c99-vc100-mt-1_50.lib
08/18/2012  05:15 PM         4,095,066 libboost_math_c99-vc100-mt-gd-1_50.lib
08/18/2012  05:23 PM         1,410,172 libboost_math_c99f-vc100-mt-1_50.lib
08/18/2012  05:15 PM         4,113,830 libboost_math_c99f-vc100-mt-gd-1_50.lib
08/18/2012  05:23 PM         1,376,096 libboost_math_c99l-vc100-mt-1_50.lib
08/18/2012  05:15 PM         4,056,498 libboost_math_c99l-vc100-mt-gd-1_50.lib
08/18/2012  05:22 PM         5,832,008 libboost_math_tr1-vc100-mt-1_50.lib
08/18/2012  05:15 PM        14,472,628 libboost_math_tr1-vc100-mt-gd-1_50.lib
08/18/2012  05:22 PM         6,115,696 libboost_math_tr1f-vc100-mt-1_50.lib
08/18/2012  05:15 PM        15,004,588 libboost_math_tr1f-vc100-mt-gd-1_50.lib
08/18/2012  05:22 PM         5,779,786 libboost_math_tr1l-vc100-mt-1_50.lib
08/18/2012  05:15 PM        14,362,836 libboost_math_tr1l-vc100-mt-gd-1_50.lib
08/18/2012  05:25 PM           215,242 libboost_prg_exec_monitor-vc100-mt-1_50.lib
08/18/2012  05:18 PM         1,226,324 libboost_prg_exec_monitor-vc100-mt-gd-1_50.lib
08/18/2012  05:23 PM         6,425,284 libboost_program_options-vc100-mt-1_50.lib
08/18/2012  05:16 PM        20,124,142 libboost_program_options-vc100-mt-gd-1_50.lib
08/18/2012  05:24 PM         5,722,808 libboost_python-vc100-mt-1_50.lib
08/18/2012  05:17 PM        21,947,816 libboost_python-vc100-mt-gd-1_50.lib
08/18/2012  05:24 PM            83,144 libboost_random-vc100-mt-1_50.lib
08/18/2012  05:17 PM           406,482 libboost_random-vc100-mt-gd-1_50.lib
08/18/2012  05:21 PM        10,473,946 libboost_regex-vc100-mt-1_50.lib
08/18/2012  05:13 PM        34,561,778 libboost_regex-vc100-mt-gd-1_50.lib
08/18/2012  05:25 PM        11,650,480 libboost_serialization-vc100-mt-1_50.lib
08/18/2012  05:17 PM        30,379,304 libboost_serialization-vc100-mt-gd-1_50.lib
08/18/2012  05:25 PM           987,732 libboost_signals-vc100-mt-1_50.lib
08/18/2012  05:18 PM         3,898,264 libboost_signals-vc100-mt-gd-1_50.lib
08/18/2012  05:20 PM            83,032 libboost_system-vc100-mt-1_50.lib
08/18/2012  05:19 PM           415,800 libboost_system-vc100-mt-gd-1_50.lib
08/18/2012  05:25 PM        10,058,306 libboost_test_exec_monitor-vc100-mt-1_50.lib
08/18/2012  05:18 PM        23,818,324 libboost_test_exec_monitor-vc100-mt-gd-1_50.lib
08/18/2012  05:26 PM           847,252 libboost_thread-vc100-mt-1_50.lib
08/18/2012  05:18 PM         2,633,358 libboost_thread-vc100-mt-gd-1_50.lib
08/18/2012  05:26 PM           178,456 libboost_timer-vc100-mt-1_50.lib
08/18/2012  05:18 PM           861,732 libboost_timer-vc100-mt-gd-1_50.lib
08/18/2012  05:26 PM        10,943,274 libboost_unit_test_framework-vc100-mt-1_50.lib
08/18/2012  05:18 PM        26,280,564 libboost_unit_test_framework-vc100-mt-gd-1_50.lib
08/18/2012  05:26 PM        46,920,182 libboost_wave-vc100-mt-1_50.lib
08/18/2012  05:19 PM        98,744,066 libboost_wave-vc100-mt-gd-1_50.lib
08/18/2012  05:25 PM         9,000,488 libboost_wserialization-vc100-mt-1_50.lib
08/18/2012  05:18 PM        20,631,532 libboost_wserialization-vc100-mt-gd-1_50.lib 
```

正如我们所见，Boost 是使用 Visual Studio 2010 (vc100) 使用多线程运行时构建的静态库。

这是我指定时 CMake 的输出`-DBoost_DEBUG=1`：

```
-- Building for: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler using: Visual Studio 10
-- Check for working CXX compiler using: Visual Studio 10 -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:566 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53;1.52.0;1.52;1.51.0;1.51;1.50.0;1.50;1.49.0;1.49;1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:568 ] Boost_USE_MULTITHREADED = TRUE
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:570 ] Boost_USE_STATIC_LIBS =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:572 ] Boost_USE_STATIC_RUNTIME =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:574 ] Boost_ADDITIONAL_VERSIONS =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:576 ] Boost_NO_SYSTEM_PATHS =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:644 ] Declared as CMake or Environmental Variables:
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:646 ]   BOOST_ROOT = ../../boost
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:648 ]   BOOST_INCLUDEDIR =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:650 ]   BOOST_LIBRARYDIR =
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:652 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53;1.52.0;1.52;1.51.0;1.51;1.50.0;1.50;1.49.0;1.49;1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:705 ] Include debugging info:
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:707 ]   _boost_INCLUDE_SEARCH_DIRS = ../../boost/include;../../boost;C:/boost/include;C:/boost;C:\Program Files (x86)/boost/include;C:\Program Files (x86)/boost;/sw/local/include
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:709 ]   _boost_PATH_SUFFIXES = boost-1_56_0;boost_1_56_0;boost-1_56;boost_1_56;boost-1_55_0;boost_1_55_0;boost-1_55;boost_1_55;boost-1_54_0;boost_1_54_0;boost-1_54;boost_1_54;boost-1_53_0;boost_1_53_0;boost-1_53;boost_1_53;boost-1_52_0;boost_1_52_0;boost-1_52;boost_1_52;boost-1_51_0;boost_1_51_0;boost-1_51;boost_1_51;boost-1_50_0;boost_1_50_0;boost-1_50;boost_1_50;boost-1_49_0;boost_1_49_0;boost-1_49;boost_1_49;boost-1_48_0;boost_1_48_0;boost-1_48;boost_1_48;boost-1_47_0;boost_1_47_0;boost-1_47;boost_1_47;boost-1_46_1;boost_1_46_1;boost-1_46_0;boost_1_46_0;boost-1_46;boost_1_46
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:734 ] location of version.hpp: C:/franz/dev/boost/boost/version.hpp
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:753 ] version.hpp reveals boost 1.50.0
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:785 ] guessed _boost_COMPILER = -vc100
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:795 ] _boost_MULTITHREADED = -mt
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:838 ] _boost_RELEASE_ABI_TAG = -
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:840 ] _boost_DEBUG_ABI_TAG = -gd
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:883 ] _boost_LIBRARY_SEARCH_DIRS = ../../boost/lib;../../boost/stage/lib;C:/franz/dev/boost/lib;C:/franz/dev/boost/../lib;C:/franz/dev/boost/stage/lib;C:/boost/lib;C:/boost;C:\Program Files (x86)/boost/boost_1_50_0/lib;C:\Program Files (x86)/boost/boost_1_50/lib;C:\Program Files (x86)/boost/lib;C:\Program Files (x86)/boost;/sw/local/lib
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:961 ] Searching for DATE_TIME_LIBRARY_RELEASE: boost_date_time-vc100-mt-1_50;boost_date_time-vc100-mt;boost_date_time-mt-1_50;boost_date_time-mt;boost_date_time
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:993 ] Searching for DATE_TIME_LIBRARY_DEBUG: boost_date_time-vc100-mt-gd-1_50;boost_date_time-vc100-mt-gd;boost_date_time-mt-gd-1_50;boost_date_time-mt-gd;boost_date_time-mt;boost_date_time
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:961 ] Searching for FILESYSTEM_LIBRARY_RELEASE: boost_filesystem-vc100-mt-1_50;boost_filesystem-vc100-mt;boost_filesystem-mt-1_50;boost_filesystem-mt;boost_filesystem
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:993 ] Searching for FILESYSTEM_LIBRARY_DEBUG: boost_filesystem-vc100-mt-gd-1_50;boost_filesystem-vc100-mt-gd;boost_filesystem-mt-gd-1_50;boost_filesystem-mt-gd;boost_filesystem-mt;boost_filesystem
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:961 ] Searching for REGEX_LIBRARY_RELEASE: boost_regex-vc100-mt-1_50;boost_regex-vc100-mt;boost_regex-mt-1_50;boost_regex-mt;boost_regex
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:993 ] Searching for REGEX_LIBRARY_DEBUG: boost_regex-vc100-mt-gd-1_50;boost_regex-vc100-mt-gd;boost_regex-mt-gd-1_50;boost_regex-mt-gd;boost_regex-mt;boost_regex
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:961 ] Searching for SYSTEM_LIBRARY_RELEASE: boost_system-vc100-mt-1_50;boost_system-vc100-mt;boost_system-mt-1_50;boost_system-mt;boost_system
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:993 ] Searching for SYSTEM_LIBRARY_DEBUG: boost_system-vc100-mt-gd-1_50;boost_system-vc100-mt-gd;boost_system-mt-gd-1_50;boost_system-mt-gd;boost_system-mt;boost_system
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:961 ] Searching for THREAD_LIBRARY_RELEASE: boost_thread-vc100-mt-1_50;boost_thread-vc100-mt;boost_thread-mt-1_50;boost_thread-mt;boost_thread
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:993 ] Searching for THREAD_LIBRARY_DEBUG: boost_thread-vc100-mt-gd-1_50;boost_thread-vc100-mt-gd;boost_thread-mt-gd-1_50;boost_thread-mt-gd;boost_thread-mt;boost_thread
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:1107 ] Boost_FOUND = FALSE
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:1191 (message):
  Unable to find the requested Boost libraries.

  Boost version: 1.50.0

  Boost include path: C:/franz/dev/boost

  The following Boost libraries could not be found:

          boost_date_time
          boost_filesystem
          boost_regex
          boost_system
          boost_thread

  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
  directory containing Boost libraries or BOOST_ROOT to the location of
  Boost.
Call Stack (most recent call first):
  CMakeLists.txt:114 (find_package)

-- Found OpenGL: opengl32
-- Looking for Q_WS_X11
-- Looking for Q_WS_X11 - not found.
-- Looking for Q_WS_WIN
-- Looking for Q_WS_WIN - found
-- Looking for Q_WS_QWS
-- Looking for Q_WS_QWS - not found.
-- Looking for Q_WS_MAC
-- Looking for Q_WS_MAC - not found.
-- Found Qt4: C:/franz/dev/qt-4.8.0/bin/qmake.exe (found version "4.8.0")
-- Configuring incomplete, errors occurred! 
```

这是处理 Boost 的顶级 CMakeLists.txt 文件中的部分：[https ://github.com/jupiter-jazz/appleseed/blob/95b045bf06c731cd331d68f6c2515f1acefc1b42/src/CMakeLists.txt#L100](https://github.com/jupiter-jazz/appleseed/blob/95b045bf06c731cd331d68f6c2515f1acefc1b42/src/CMakeLists.txt#L100)

我也尝试指定`BOOST_LIBRARYDIR`而不是`BOOST_ROOT`, 无济于事。

**同样，这多年来一直在 Windows、Linux 和 Mac OS X 的许多变体上完美运行。我正在寻找它突然停止工作的原因。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T18:15:02.647

在您的调试输出中，它看起来`Boost_USE_STATIC_LIBS`没有设置，但您正在寻找静态提升库。

尝试再次运行 CMake，但`-DBoost_USE_STATIC_LIBS=ON`添加到命令中。

实际上，您的[CMakeLists.txt 将其包装在另一个变量`USE_STATIC_BOOST`](https://github.com/jupiter-jazz/appleseed/blob/95b045bf06c731cd331d68f6c2515f1acefc1b42/src/CMakeLists.txt#L106)中。将其设置为`ON`应该具有相同的效果。

# mysql - MYSQL 使用 UPDATE，WHEN THEN 带有 NULL 值

> ID：12020744
> 
> 赞同：1
> 
> 时间：2012-08-18T17:33:09.670
> 
> 标签：mysql

我试图弄清楚为什么我没有从我正在运行的 MySQL 查询中得到结果。

我试图`NULL`在查询中用数字替换一个值，但我不知道我做错了什么。

这是我的查询：

```
UPDATE Details
SET HowHear_ID = CASE HowHear_ID
  WHEN '' THEN 25   
  WHEN NULL THEN 25                         
  WHEN 7  THEN 25
  WHEN 8  THEN 5
  WHEN 16 THEN 25
  WHEN 17 THEN 16
END
WHERE HowHear_ID IN ('',NULL,7,8,16,17) 
```

此查询将影响除`NULL`值之外的所有内容。

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:35:00.307

SQL 中没有任何值会相等（或“不相等”）`NULL`。理解以下真值表：

```
NULL = NULL yields NULL   -- not FALSE!
NULL != NULL yields NULL  -- not TRUE!
[ANY] = NULL yields NULL  -- not FALSE!
[ANY] != NULL yields NULL -- not TRUE! 
```

由于以下是等价的...

```
[expression] IN (a, b, c)
[expression] = ANY (a, b, c)
[expression] = a OR [expression] = b OR [expression] = c 
```

...您不能`NULL`放在`IN predicate`. `NULL`有趣的是，当您将a 放在右侧时，情况会变得更糟`NOT IN predicate`：

```
[expression] NOT IN (a, b, c)
[expression] != ANY (a, b, c)
[expression] != a AND [expression] != b AND [expression] != c 
```

如果`b`是`NULL`，则整个表达式将变为`NULL`（或可能`FALSE`），但绝不会变为`TRUE`。`NOT IN (subselect)`谓词也是如此！所以，永远不要这样做：

```
[expression] NOT IN (NULL, 1, 2) 
```

在您的情况下，正确的解决方案使用 a`NULL predicate`代替。做这个：

```
UPDATE Details
SET HowHear_ID = CASE 
  WHEN HowHear_ID = ''    THEN 25   
  WHEN HowHear_ID IS NULL THEN 25  -- Use a NULL predicate here
  WHEN HowHear_ID = 7     THEN 25
  WHEN HowHear_ID = 8     THEN 5
  WHEN HowHear_ID = 16    THEN 25
  WHEN HowHear_ID = 17    THEN 16
END
WHERE HowHear_ID IN ('',7,8,16,17)
   OR HowHear_ID IS NULL           -- Use a NULL predicate here 
```

或这个：

```
WHERE COALESCE(HowHear_ID, '') IN ('',7,8,16,17) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:38:38.443

您无法`NULL`在`WHERE`子句中引用并获得您期望的结果。`NULL`与其他值的行为不同。

如果需要引用它，则需要使用该`isnull()`函数。

在你的情况下，你会写这样的东西：

```
WHERE HowHear_ID IN ('',7,8,16,17) or isnull(HowHear_ID) 
```

顺便说一句，您还没有指定字段的数据类型。我假设它是一个整数。在这种情况下，检查零而不是空字符串可能会更好？（如果它不是整数，那么也许应该是）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T17:38:38.630

你可以用

```
WHERE HowHear_ID IN ('',7,8,16,17) OR HowHear_ID IS NULL 
```

# android - Android Share Intent 使用 AsyncTask

> ID：12020748
> 
> 赞同：2
> 
> 时间：2012-08-18T17:33:24.773
> 
> 标签：android, android-asynctask, share

我真的不知道如何在我的代码中实现共享意图。有人可以帮助我，我需要重写整个代码吗？我将 AsyncTask 用于我的共享意图。我想使用分享意图分享我的图像。请检查我下面的代码，"The method startActivity(Intent) is undefined for the type ShareImageTask" 缺少某些内容。

ShareImageTask.class

```
 public class ShareImageTask extends AsyncTask<String , String , String>
{
    private Context context;
    private ProgressDialog pDialog;
    String image_url;
    URL myFileUrl;
    String myFileUrl1;
    Bitmap bmImg = null;
    Intent share;

    public ShareImageTask(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

        super.onPreExecute();

        pDialog = new ProgressDialog(context);
        pDialog.setMessage("Downloading Image ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub

        try {  

            myFileUrl = new URL(args[0]);
            HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();   
            conn.setDoInput(true);   
            conn.connect();     
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is); 
        }
        catch (IOException e)
        {       
            e.printStackTrace();  
        }
        try {       

            String path = myFileUrl.getPath();
            String idStr = path.substring(path.lastIndexOf('/') + 1);
        File filepath = Environment.getExternalStorageDirectory();
        File dir = new File (filepath.getAbsolutePath() + "/Wallpaper/");
            dir.mkdirs();
            String fileName = idStr;
            File file = new File(dir, fileName);
            FileOutputStream fos = new FileOutputStream(file);
            bmImg.compress(CompressFormat.JPEG, 75, fos);   
            fos.flush();    
            fos.close();     
            share = new Intent(Intent.ACTION_SEND);
            share.setType("image/jpeg");

            share.putExtra(Intent.EXTRA_STREAM,file);

            context.startActivity(Intent.createChooser(share, "Share Image")); 
        }
        catch (Exception e)
                {
                    e.printStackTrace();  
                }

        return null;   
    }

    @Override
    protected void onPostExecute(String args) {
        // TODO Auto-generated method stub
                pDialog.dismiss();

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T17:36:12.400

用这个：

```
context.startActivity(Intent.createChooser(share, "Share Image")); 
```

因此，您在 AsyncTask 中指向 Activity 的上下文，而不是指向 AsyncTask 本身。现在你正在调用一个方法`AsyncTask::startActivity()`，但它不存在。因为您在内部类中，所以您必须拥有要调用的对象`startActivity()`。那是`context`你设置的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:39:44.993

您应该在 onPostExecute（将在 UI 线程上运行）中从您的 Activity 实例调用 startActivity(Intent)，例如

```
class MyActivity {
  public class ShareImageTask extends AsyncTask<String , String , String> {
      . . .
    @Override
    protected String doInBackground(String... args) {
        . . . 
        return file;
    }

    @Override
    protected void onPostExecute(String args) {
        // TODO Auto-generated method stub
        pDialog.dismiss();
        share = new Intent(Intent.ACTION_SEND);
        share.setType("image/jpeg");

        share.putExtra(Intent.EXTRA_STREAM, file[0]);

        startActivity(Intent.createChooser(share, "Share Image")); //<<--The 

    }

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:18:28.043

Android 开发者博客有一篇关于使用意图共享内容的文章：[http ://android-developers.blogspot.com/2012/02/share-with-intents.html](http://android-developers.blogspot.com/2012/02/share-with-intents.html)

# c - ANSI C - 多余的结构定义？

> ID：12020752
> 
> 赞同：1
> 
> 时间：2012-08-18T17:33:59.533
> 
> 标签：c, struct

我在[这个 .c 文件](http://knking.com/books/c2/programs/stackADT3.c)中看到了这段代码。

```
struct node {
  Item data;
  struct node *next;
};

struct stack_type {
  struct node *top;
}; 
```

创建两个结构体有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:36:50.403

它可以使代码更清晰地区分整个堆栈和单个节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T17:37:06.067

他们正在寻求实现一个堆栈。每个节点都包含一个指向下一个节点的指针，但每个节点不包含指向栈顶的指针。只有堆栈结构将存储指向堆栈顶部的指针。如果堆栈中的每个节点都指向顶部，则每个节点都必须针对每次推送或弹出进行修改。不必要的顶部指针也会浪费内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T17:41:37.560

通过这种方式，他们可以突出显示作为一个整体在堆栈上工作的函数。Prototype 将期望一个实例`struct stack_type`- 你不会（假设）`struct node`从堆栈中间传递。

# scala - Scala：检查对象是否为数字

> ID：12020753
> 
> 赞同：14
> 
> 时间：2012-08-18T17:34:02.543
> 
> 标签：scala, numeric, typeclass

模式匹配是否可以检测某物是否为`Numeric`? 我想做以下事情：

```
class DoubleWrapper(value: Double) {
  override def equals(o: Any): Boolean = o match {
    case o: Numeric => value == o.toDouble
    case _ => false
  }
  override def hashCode(): Int = value ##
} 
```

但当然这并没有真正起作用，因为它不是和之类`Numeric`的东西的超类型，它是一个类型类。我也不能做类似的事情，因为必须符合合同。`Int``Double``def equals[N: Numeric](o: N)``o``Any``equals`

那么如何在不列出每个已知`Numeric`类的情况下做到这一点（包括，我猜，我什至可能不知道的用户定义的类）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:34:50.903

原始问题无法解决，这是我的理由：

要确定一个类型是否是类型类的实例（例如 Numeric），我们需要隐式解析。隐式解析在编译时完成，但我们需要在运行时完成。目前这是不可能的，因为据我所知，Scala 编译器不会在编译的类文件中留下所有必要的信息。要看到这一点，可以编写一个测试类，其中包含一个包含局部变量的方法，该变量具有隐式修饰符。移除修饰符后编译输出不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:57:03.257

您是否使用`DoubleWrapper`添加方法`Double`？那么它应该是一个透明类型，即您不应该保留实例，而是定义要返回的 pimped 方法`Double`。这样你就可以继续使用`==`为原语定义的东西，它已经做了你想要的( `6.0 == 6`yield `true`)。

* * *

好的，如果没有，如何

```
override def equals(o: Any): Boolean = o == value 
```

如果您相应地构造`equals`其他包装器的方法，您最终应该再次比较原始值。

另一个问题是您是否*应该*为有状态包装器提供这样的`equals`方法。我不认为可变对象根据它们所持有的值之一应该是相等的——你很可能会遇到麻烦。

# spring - Guava 的注解支持

> ID：12020754
> 
> 赞同：0
> 
> 时间：2012-08-18T17:34:03.290
> 
> 标签：spring, annotations, guava

像 Spring 类这样的 Guava 库中是否支持注释[`AnnotationUtils`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/annotation/AnnotationUtils.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:24:14.180

目前不是，不是，但也许您可能想提交[功能请求](https://code.google.com/p/guava-libraries/issues/entry)？

# java - Java OpenFaces css

> ID：12020755
> 
> 赞同：0
> 
> 时间：2012-08-18T17:34:03.273
> 
> 标签：java, css, openfaces

我试图让 JSP 网页与 OpenFaces 一起运行，但是当我运行我的页面时，我得到的外观与 OpenFaces 演示页面不同。就好像 OpenFaces css 没有加载一样。除了将库添加到我的项目并使用如下示例代码之外，我还需要做些什么特别的事情：

**索引.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:o="http://openfaces.org/">
<h:head>

</h:head>
<h:body>

    <h:form>
        <o:dataTable styleClass="dataTable" value="#{personController.personList}" var="person">
            <o:column>
                <f:facet name="header">Name</f:facet>  
                <h:outputText value="#{person.name}"/>
            </o:column> 
            <o:column>
                <f:facet name="header">Number</f:facet>  
                <h:outputText value="#{person.no}"/>
            </o:column> 
            <o:column>
                <f:facet name="header">Address</f:facet>  
                <h:outputText value="#{person.address}"/>
            </o:column> 
        </o:dataTable>
    </h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:33:02.783

当您以这种方式声明 DataTable 而不指定任何与样式相关的属性时，您将获得组件的默认外观（类似于[此演示](http://openfaces.org/demo/datatable/DataTable_sortingAndSelection.jsf)中的外观）。

不支持更改整个组件的外观，但取而代之的是，组件有很多样式属性。[第一个 DataTable 演示](http://openfaces.org/demo/datatable/DataTable_general.jsf)页面上的表格是使用组件的属性自定义的（请参阅此演示的[源代码](https://github.com/openfaces/OpenFaces/blob/master/liveDemo/core/resources/datatable/DataTable_general_core.xhtml#L27)）。

# c# - 在 C# 程序中嵌入外部可执行文件并在不创建新文件的情况下运行它

> ID：12020758
> 
> 赞同：1
> 
> 时间：2012-08-18T17:34:19.540
> 
> 标签：c#, load, exe, embedded-resource, execution

> **可能重复：**
> [如何调用 .Net 程序集中嵌入资源的 exe？](https://stackoverflow.com/questions/72615/how-do-i-invoke-an-exe-that-is-an-embedded-resource-in-a-net-assembly)

如何在我的 C# 中嵌入一个外部可执行文件（我想是通过资源，但我不知道其他方式，所以这个问题也需要这个选项）并在主运行程序中运行这个程序而不将它写入磁盘。

怎么可能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:38:46.233

尽管 Hans 发表了评论，但我认为这很容易*（假设代码有足够的权限来做到这一点）。本质上，您想伪造本地驱动器（或网络驱动器，如果它适用于您的恶意代码）。

通过在您自己的程序中实现 DAV 并使用 WebDAV 客户端将网络路径指向该机器，可以轻松创建网络驱动器。

本地驱动器也应该是可能的（我也不确定是否有任何 .Net 实现可用），例如实现[Minifilter Driver](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541591%28v=vs.85%29.aspx)并设置它，但我强烈怀疑没有办法让它从唯一的可执行文件运行。 ..

*简单如“不需要大量*不受支持*的黑客攻击”，不考虑时间估计和必要的知识水平。

# ios - 视图中的iOS静态表？

> ID：12020771
> 
> 赞同：3
> 
> 时间：2012-08-18T17:36:11.480
> 
> 标签：ios, iphone, objective-c, ios5

抱歉，如果这是一个非常愚蠢的问题，但我是 iOS 新手。我正在尝试这样做：

![在此处输入图像描述](../Images/080e1a58e1b6ffd4fa1617866262ba69.png)

表格单元格是静态的，因为内容不应更改（选项始终相同）。我还需要在下方放置提交和取消按钮，并用图像替换红色背景。

我的问题是，我收到错误消息：

> 静态表视图仅在嵌入 uitableviewcontroller 时有效

所以我的问题是，我将如何在我的视图中嵌入一个表格，就像任何其他元素一样？

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:55:19.693

有两个相对简单的选项可以构建这样的屏幕：

1.  使您的控制器成为`UITableViewController，在静态部分的底部添加两个部分，并将[带有按钮的自定义单元格](https://stackoverflow.com/a/1244332/335858)放入这两个部分中，或者
2.  在代码中定义表的静态内容。

对于选项 1，您的屏幕外观会略有变化，但仅当您有许多单元格时才重要，这会迫使带有按钮的部分离开屏幕，直到用户滚动。

第二种选择需要编写一些代码，但不要太多，以免给您带来太多不便。

# c# - SqlConnections，Parallel.For，一个旧的 C# 应用程序和随机挂起初始化 SqlConnections

> ID：12020773
> 
> 赞同：7
> 
> 时间：2012-08-18T17:36:12.793
> 
> 标签：c#, multithreading, sql-server-2008-r2, freeze, sqlconnection

我的问题：本周早些时候，我接到了加快我们程序中的一项任务的任务。我看了看，立即想到在该任务中为函数使用并行 foreach 循环。

我实现了它，遍历了函数（包括所有子函数）并更改了 SqlConnections（和其他东西），因此它能够并行运行。我开始了整个事情，一切都进行得又好又快（仅此一项就将完成该任务的时间减少了约 45%）

现在，昨天我们想用更多数据尝试同样的事情......我遇到了一些奇怪的问题：每当调用并行函数时，它就可以工作......但有时其中一个线程会挂起至少 4分钟（超时设置为一分钟，用于连接 AND 命令）。

如果我在此期间暂停程序，我会看到该循环中只有一个线程仍然处于活动状态并且它挂起

```
connection.Open() 
```

大约 4 分钟后，程序继续运行而没有抛出错误（除了输出框中的一条消息，说某处发生了异常，但它没有被我的应用程序捕获，而是在 SqlConnection/SqlCommand 对象的某处）。

我可以杀死 MSSQLServer 上的所有连接而不会发生任何事情，MSSQLServer 在这 4 分钟内什么也不做，所有连接都是空闲的。

这是用于向数据库发送更新/插入/删除语句的过程：

```
int i = 80;
bool itDidntWork = true;
Random random = new Random();
while (itDidntWork && i > 0)
{
    try
    {
        using (SqlConnection connection = new SqlConnection(sqlConnectionString))
        {
            connection.Open();
            lock (connection)
            {
                command.Connection = connection;
                command.ExecuteNonQuery();
            }

            itDidntWork = false;
        }
    }
    catch (Exception ex)
    {
        if (ex is SqlException && ((SqlException)ex).ErrorCode == -2146232060)
        {
            Thread.Sleep(random.Next(500, 5000));
        }
        else
        {
            SqlConnection.ClearAllPools();
        }

        Thread.Sleep(random.Next(50, 110));
        i--;
        if (i == 0)
        {
            writeError(ex);
        }
    }
} 
```

以防万一：在较小的数据库上可能会发生死锁（错误号 2146232060），所以如果发生死锁，我必须让冲突语句在不同的时间发生。即使在小型数据库/小型服务器上也能很好地工作。如果错误不是由死锁引起的，则很可能是连接有问题，所以我正在清理所有断开的连接。

存在用于执行标量、填充数据表/数据集（是的，应用程序很*旧*）和执行存储过程的类似函数。

是的，所有这些都在并行循环中使用。

有人知道那里会发生什么吗？或者关于如何找出那里发生了什么的想法？

*编辑命令对象：

它被赋予函数，命令对象在被赋予函数时总是一个新对象。

关于锁：如果我把锁收起来，我会收到几十个“连接已关闭”或“连接已打开”错误，因为 Open() 函数只是从 .NET 的连接池中获取一个连接。锁确实按预期工作。

示例代码：

```
using(SqlCommand deleteCommand = new SqlCommand(sqlStatement))
{
    ExecuteNonQuerySafely(deleteCommand); // that's the function that contains the body I posted above
} 
```

*编辑 2

我必须更正：它挂在这个

```
command.Connection = connection; 
```

至少我猜是这样，因为当我暂停应用程序时，“步骤”标记是绿色的并且亮着

```
command.ExecuteNonQuery(); 
```

说那是接下来要执行的语句。

*编辑 3 只是为了确保我刚刚开始了另一个测试，连接对象周围没有任何锁……需要几分钟才能得到结果。

*编辑4好，我错了。我删除了锁定语句并且......它仍然有效。也许我第一次尝试它时有一个重用的连接或其他东西。谢谢你指出来。

*edit 5 我感觉这只发生在对特定数据库过程的一次特定调用中。~~我不知道为什么。在 C# 方面，该调用与其他调用没有区别，请~~ *参见编辑 6*。而且由于它当时没有执行该语句（我猜。也许有人可以纠正我。如果在调试模式下，一行是绿色标记（而不是黄色）它还没有执行该语句但等待该行之前的语句完成，对吗？）这很奇怪。

*edit 6 有 3 个命令对象一直被重复使用。它们是在并行函数之上定义的。我不知道那有多糟糕。它们仅用于调用一个存储过程（每个存储过程调用不同的过程），当然具有不同的参数和新的连接（通过上述方法）。

~~*edit 7 好的，实际上只有当一个特定的存储过程被调用时。除了它挂在连接对象的分配上（下一行标记为绿色）。试图找出造成这种情况的原因是atm。~~

*edit 8 是的，它只是发生在另一个命令中。就是这样。

*编辑 9 好的。问题解决了。“挂起”实际上是设置为 10 分钟（！）的 CommandTimeouts。它们只为两个命令设置（我在编辑 7 中提到的一个和我在编辑 8 中提到的一个）。由于我在重组命令以使它们像 devundef 建议的那样时找到了它们，因此我将他的答案标记为解决我的问题的答案。此外，他关于限制我的 for 循环使用的线程数量的建议进一步加快了进程。

特别感谢 Marc Gravell 解释了一些东西并在星期六和我一起呆在这里；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:08:18.143

我认为问题可以在您的编辑 6 中找到：*编辑 6：...3 命令对象一直被重复使用*。

在并行循环内使用的任何数据都必须在循环内创建，或者必须具有适当的同步代码，以确保一次只有 1 个线程可以访问该特定对象。我在`ExecuteNonQuerySafely`. a）锁定连接在那里没有效果，因为连接对象是在方法内部创建的。b) 锁定命令并不能保证线程安全 - 可能您在将命令参数锁定在方法内之前设置了命令参数。如果在调用之前锁定命令A`lock(command)`将起作用`ExecuteNonQuerySafely`，但是在并行循环中锁定不是一件好事 - 毕竟这是反并行的定义，最好完全避免这种情况并为每次迭代创建一个新命令。更好的是做一些重构`ExecuteNonQuerySafely`，它可以接受回调操作而不是 SqlCommand。例子：

```
public void ExecuteCommandSafely(Action<SqlCommand> callback) {
   ... do init stuff ...
   using (var connection = new SqlConnection(...)) {
      using (var command = new SqlCommand() {
         command.Connection = connection;
         try{
            callback(command);
         }
         ... error handling stuff ...
      }          

   }

} 
```

并使用：

```
ExecuteCommandSafely((command) => {
   command.CommandText = "...";
   ... set parameters ..
   command.ExecuteNonQuery();
}); 
```

最后，您在并行执行命令时遇到错误这一事实表明，在这种情况下并行执行可能不是一件好事。您正在浪费服务器资源来获取错误。连接很昂贵，请尝试使用该`MaxDegreeOfParalellism`选项来调整此特定循环的工作负载（请记住，最佳值将根据硬件/服务器/网络/等而变化。）。该`Parallel.ForEach`方法具有接受`ParallelOptions`参数的重载，您可以在其中设置要为该参数并行执行的线程数（[http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions。 maxdegreeofparallelism.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)）。

# xml - 如何通过 Magento 中自定义模块的 config.xml 更改模板？

> ID：12020780
> 
> 赞同：0
> 
> 时间：2012-08-18T17:36:56.263
> 
> 标签：xml, magento, module

我的模块的 config.xml 的这个内容。

我想通过这个模块更改单页模板文件。

如果我更改 onepage.xml 中的代码，它是有效的，但我想用我的模块来做这个。

这段代码有什么问题？

```
<config>
    <modules>
        <Mynamespace_Mymodule>
            <version>1.0</version> 
        </Mynamespace_Mymodule>
    </modules>
    <frontend>
        <layout>
            <checkout_onepage_index>
                <reference name="checkout.onepage">
                    <action method="setTemplate"><template>mynamespace/mymodule/onepage.phtml</template></action>
                </reference>
            </checkout_onepage_index>
        </layout>
    </frontend>
</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:10:53.910

您不能从 config.xml 调用布局

你说：我在 onepage.xml 中更改代码 -> 看起来你的意思是 checkout.xml 这是定义术语。我们可能对模块有不同的定义。

假设你在`app/code/local/[Mynamespace]/[Mymodule]` 你`[Mymodule]`的调用中有模块`mymodule.xml` 你说它是从你的模块调用的吗？

1）如果是，那么您可以在您的`config.xml`

```
<config>
    <modules>
        <Mynamespace_Mymodule>
            <version>1.0</version> 
        </Mynamespace_Mymodule>
    </modules>
    <frontend>
        <layout>
            <updates>
                <mymodule>
                    <file>mymodule.xml</file>
                </mymodule>
            </updates>
        </layout>
    </frontend>
</config> 
```

该代码将调用名为`mymodule.xml` 的布局然后在其中创建布局文件`app/design/frontend/[base/default]/[default/yourtheme]/layout/mymodule.xml`

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <checkout_onepage_index>
        <reference name="checkout.onepage">
            <action method="setTemplate"><template>mynamespace/mymodule/onepage.phtml</template></action>
        </reference>
    </checkout_onepage_index>
</layout> 
```

2）如果没有 -> 你的模块定义只是文件下的文件`app/code/local/[Mynamespace]/[Mymodule]`，那么你需要重写 Onepage 的块

`config.xml`

```
<config>
    <modules>
        <Mynamespace_Mymodule>
            <version>1.0</version> 
        </Mynamespace_Mymodule>
    </modules>
    <global>
        <blocks>
            <checkout>
                <rewrite>
                    <onepage>Mynamespace_Mymodule_Block_Checkout_Onepage</onepage>
                </rewrite>
            </checkout>
        </blocks>
    </global>
</config> 
```

使用该配置，您`Mage_Checkout_Block_Onepage`将被重写`Mynamespace_Mymodule_Block_Checkout_Onepage`（只要您保持目录结构匹配，您就可以更改名称）。

例如，您的文件将被放入：`app/code/local/[Mynamespace]/[Mymodule]/Block/Checkout/Onepage.php`

最后你`app/code/local/[Mynamespace]/[Mymodule]/Block/Checkout/Onepage.php`会是这样的：

```
class Mynamespace_Mymodule_Block_Checkout_Onepage extends Mage_Checkout_Block_Onepage
{
    public function __construct()
    {
        parent::__construct();
        $this->setTemplate('mynamespace/mymodule/onepage.phtml');
    }
} 
```

# javascript - 为什么我在使用 RequireJS 时同时收到“$jQval 未定义”和“$.validator.unobtrusive 未定义”？

> ID：12020783
> 
> 赞同：0
> 
> 时间：2012-08-18T17:37:12.290
> 
> 标签：javascript, jquery, validation, requirejs, unobtrusive

这让我困惑了几个小时。当脚本位于非requirejs javascript文件中时，它可以正常工作。当我将它与 RequireJS 一起使用时，它无法工作并在问题标题中给我错误消息（尽管是萤火虫控制台）。

在尝试重构为模块之前，我只是想让它与 RequireJS 一起“工作”。

Html 正在正确呈现。脚本加载正确。此外，我正在使用 require-jquery.js 包下载，它在所有页面的布局模板中都被引用。

**主.js**：

```
require.config({
   paths: {
       "maximum-filesize": "modules/validation/maximum-filesize"
   }
});

require(["maximum-filesize", "domReady!"], function (maxFileSize) {
}); 
```

**最大文件大小.js**

```
require.config({
paths: {
    "jquery-validate": "libs/jquery/jquery.validate",
    "jquery-validate-unobtrusive": "libs/jquery/jquery.validate.unobtrusive"
    }
});

define(["jquery", "jquery-validate", "jquery-validate-unobtrusive", "domReady!"], function ($) {

    $.validator.unobtrusive.adapters.add(
        'filesize', ['maxsize'], function(options) {
            options.rules['filesize'] = options.params;

            if (options.messages) {
                options.messages['filesize'] = options.message;
            }
        });

        $.validator.addMethod('filesize', function (value, element, params) {
        if (element.files.length < 1) {
            // No files selected
            return true;
        }

        if (!element.files || !element.files[0].size) {
            // This browser doesn't support the HTML5 API
            return true;
        }

        return element.files[0].size < params.maxsize;
        }, '');
}); 
```

**编辑 1**

我只是尝试注释掉所有上述代码，并用一个简单的替换它：

```
 $('#Name').val("Hello"); 
```

这会在#Name 文本框中正确呈现“Hello”，因此 JQuery 正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:59:49.450

您应该使用 requires shim 选项来告诉要求在 jquery 验证之前加载 jquery。否则加载顺序未定义。

另一个可能的问题是调用 requirejs.config 2 次。Requirejs 在合并配置时遇到问题

# android - 有哪些工具可以为 android 提供 apk 保护（防止逆向和重新打包）？

> ID：12020785
> 
> 赞同：4
> 
> 时间：2012-08-18T17:37:28.893
> 
> 标签：android, security, apk, packer

似乎我公司的一个成功应用程序已被重新打包为 torjan 并在 3rd 方市场（谷歌播放之外）上分发。我正在寻找一种强大的解决方案，以保护我们的应用程序在未来免受此类问题的影响。

到目前为止，我已经看到：

*   [http://www.droidactivator.org/](http://www.droidactivator.org/)
*   [http://www.androidlicenser.com/](http://www.androidlicenser.com/)

但似乎两者都没有提供全面的解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:47:03.747

我认为您从错误的角度看待它。不确定您的确切情况，但通常重新打包的应用程序不是“逆向工程”。即恶意软件的家伙几乎不关心您的应用程序的内部结构。特洛伊木马可以简单地附加在您的应用程序的入口点，在这种情况下，木马程序将执行，然后继续运行您的应用程序。在这种情况下，混淆不会做任何事情，只会减慢您的应用程序的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T06:42:38.997

基本上，有 5 种方法可以保护您的 APK 被破解/反转/重新打包：

1.隔离Java程序

最简单的方法是让用户无法访问Java Class 程序。这是最基本的方式，它有多种具体的方式来实现。例如，开发者可以将关键的Java Class放在服务器上，客户端通过访问服务器的相关接口来获取服务，而不是直接访问Class文件。所以黑客没有办法反编译Class文件。目前，通过接口提供的标准和协议服务越来越多，如HTTP、Web Service、RPC等，但也有很多应用不适合这种保护。例如，独立程序中的 Java 程序是无法隔离的。

2.加密类文件

为了防止Class文件被直接反编译，很多开发者都会对一些关键的Class文件进行加密，比如注册号、序列号管理等相关类。在使用这些加密的类之前，程序需要先解密这些类，然后将这些类加载到JVM中。这些类可以通过硬件或软件解密。

开发人员经常通过自定义的 ClassLoader 类加载加密类（Applet 不支持自定义的 ClassLoader，因为安全原因）。Customed ClassLoader 将首先找到加密类，然后解密它们。最后将解密的类加载到 JVM。自定义类加载器是这个保护方法中非常重要的一个类。因为它本身没有加密，所以它可能是黑客的第一个目标。如果已经攻克了相关的解密密钥和算法，那么加密的类就可以很容易地被解密。

3.转换为原生代码

将程序转换为本机代码也是防止反编译的有效方法。因为本机代码通常很难被反编译。开发人员可以将整个应用程序转换为原生代码，也可以只转换关键模块。如果只是转换模块的关键部分，Java程序在使用这些模块时需要JNI技术调用。在使用这种方法保护Java程序时，它放弃了Java的跨平台特性。对于不同的平台，我们需要维护不同版本的原生代码，这会增加软件支持和维护的工作量。但对于一些关键模块，有时这种方案往往是必要的。为了保证这些原生代码不会被修改或替换，开发人员经常需要对这些代码进行数字签名。在使用这些原生代码之前，开发人员经常需要对这些本地代码进行身份验证，以确保这些代码没有被黑客更改。如果签名检查通过，则开发者可以调用相关的 JNI 方法。

4.代码混淆

代码混淆是对Class文件进行重新组织和处理，使处理后的代码与未处理的代码完成相同的功能（语义）。但是混淆后的代码很难反编译，即反编译后的代码很难理解，因此反编译人员很难理解真正的语义。理论上，如果黑客有足够的时间，混淆代码仍有可能被破解。甚至有些人正在开发去混淆工具。但从实际情况来看，由于混淆的多元化发展，混淆理论的成熟，Java代码混淆后可以很好地防止反编译。

5.在线加密

APK Protect ( [http://www.apkprotect.com/](http://www.apkprotect.com/) ) 是 APK 的在线加密网站。提供Java代码和C++代码保护，达到反调试和反编译效果。操作过程简单易行。

我建议您使用最后一种方法，因为它可以为您节省更多时间。我试过了。操作非常简单，不会花很长时间。

# ruby - 有没有限制/钳位数字的方法？

> ID：12020787
> 
> 赞同：32
> 
> 时间：2012-08-18T17:37:53.413
> 
> 标签：ruby, clamp

我写了以下代码，它保持`x`在范围内`(a..b)`。在伪代码中：

```
(if x < a, x = a; if x > b, x = b) 
```

在 Ruby 中，它会是这样的：

```
x = [a, [x, b].min].max 
```

由于它是非常基本且有用的功能，我想知道在 ruby​​ 中是否有本地方法可以做到这一点。

从 Ruby 2.3.3 开始，显然没有这样的方法，那么最短/更易读的方法是什么？

我发现：

```
x = [a, x, b].sort[1] 
```

到目前为止，但我不确定它是否更具可读性。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-18T23:13:09.273

Ruby 2.4.0 引入[`Comparable#clamp`](https://ruby-doc.org/core-2.4.0/Comparable.html#method-i-clamp)：

```
523.clamp(0, 100)        #=> 100 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-27T14:39:52.240

我自己的答案：不

然而

```
x = [a, x, b].sort[1] 
```

是一个解决方案。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-07T20:10:35.863

我这样做了：

```
class Numeric
  def clamp min, max
    [[self, max].min, min].max
  end
end 
```

所以每当我想夹住任何东西时，我都可以打电话：

```
x.clamp(min, max) 
```

我觉得这很可读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-18T03:08:33.563

这是我从实际实现中大量借鉴的解决方案：

```
unless Comparable.method_defined? :clamp
  module Comparable
    def clamp min, max
      if max-min<0
        raise ArgumentError, 'min argument must be smaller than max argument'
      end
      self>max ? max : self<min ? min : self
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-26T14:06:00.870

在我看来，目前最吸引人的解决方案是排序选项：

```
[min,x,max].sort[1] 
```

当您不介意猴子修补现有的核心类时。我认为范围类是钳位方法的良好候选者

```
class Range
  def clamp(v)
    [min,v,max].sort[1]
  end
end

(min..max).clamp(v) 
```

或普通数组对象。我不喜欢这样，因为钳位函数仅适用于 3 元素数组

```
class Array
    def clamp
      sort[1]
    end
end 
```

你可以这样称呼它：

```
[a,x,b].clamp 
```

# javascript - 为什么使用 do-while 而不是简单的 if 语句

> ID：12020789
> 
> 赞同：1
> 
> 时间：2012-08-18T17:38:02.560
> 
> 标签：javascript, if-statement, do-while

谁能告诉我为什么在下面的代码中使用 do/while lop 而不是简单的 if 语句：

```
function prev(elem){
do {
    elem = elem.previousSibling;
} while(elem && elem.nodeType != 1);
    return elem;
} 
```

为什么不：

```
function prev(elem){
if(elem && elem.nodeType != 1) {
    elem = elem.previousSibling;
    return elem;
} 
```

使用 do/while 有优势吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:40:04.580

`do-while`将运行一次并在语句为真时继续运行，而`if-statement`只会运行一次。

在这种情况下，它可能是等效的（取决于代码和数据的设置方式），但通常就是这样`do-whiles`使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:49:45.793

如果您希望某些内容不断重复直到满足某个条件，请使用`do`、`for`或`while`语句。如果您只想检查一次，请使用该`if`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:51:10.410

如果您使用 do while 循环，那么您的语句将至少执行一次。然后检查一个条件，如果条件不满足，则不再执行该语句。但是，如果您使用其他选项，则检查第一个条件，如果满足条件，则语句仅执行一次。否则它们甚至不会被执行一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:55:25.503

```
A While or Do While statement is a continuous loop until a condition is met.  
An If, Then, Else/Else If is a simple evaluative statement rather than a loop. 
```

这里`do-while`将至少运行一次，并将执行直到满足 while 条件。
但是在 中`if-statement`，它会先检查条件，并且只会执行一次并返回响应。

# php - 从数据库中修剪值

> ID：12020795
> 
> 赞同：0
> 
> 时间：2012-08-18T17:38:14.417
> 
> 标签：php, mysql

```
$quiztotal = mysql_query('SELECT id,username,qname,quizpercentage FROM quiz');

echo '<table><tr><th>USERNAME</th>
                 <th>QUIZ NAME</th>
                 <th>PERCENTAGE</th>
                 <th>GRADE</th>
                 <th>POINTS</th></tr>';
while($row = mysql_fetch_array($quiztotal))
{
    $username = $row['username'];
    $qtotal = $row['quizpercentage'];
    $defaultsetting = mysql_query('SELECT id,letter,percentage,points FROM default');
    while($row = mysql_fetch_array($defaultsetting))
    {
        $letter = $row['letter'];
        $percentage = $row['percentage'];
        $points = $row['points'];
        echo '<tr><td>'.$username.'</td>
                  <td>'.qtotal.'</td>';
                  echo 'td>';
                    if(qtotal == $percentage)
                    {
                      echo $letter;
                    }
                  echo '</td>';
                  echo '<td>';
                  if($letter)
                  {
                     echo $points;
                  }
                  echo '</td></tr>';
    }
} 
```

测验表

```
id    username   quizpercentage
1        35          66%
2        47          78%
3        53          90%     
4        56          96%
5        4           45% 
```

默认表

```
 id     letter   percentage     points
   1        A         >=85         4.00
   2        B         80-84        3.67
   3        C         83-75        2.65
   4        D         74-55        2.00 
```

这里 >=85 没有从 85% 到 100% 开始，而 80-84 是 80%、81% 和 84% 我如何正确匹配，比如假设用户得分 88%，我如何为每个用户打分，如果等级是 A/B/C/D 我也应该显示分数 我需要像这样的输出

```
 USERNAME      QUIZ NAME         PERCENTAGE      GRADE   POINTS
   35           TestSeries          85%            A       4.00
   47           TestSeries          70%            C       2.65
   53           preliminary         62%            D       2.00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:53:11.843

您无法使用现有的表结构轻松完成此操作，您需要进行一些更改。第一个是更改`Quiz`表格，以便该字段`QuizPercentage`包含一个数字（不带“%”符号）。无论如何都应该这样做，因为格式化属于网页，而不是数据库。

下一步将在表中添加两列`default`（这真的是名字吗？如果是，它也不是一个好名字）。两个新列将如下： - `PercentageFrom int` -`PercentageTo int`

它们将分别包含每个分数范围的最小值和最大值。这意味着您的表格将如下所示：

```
 id     letter   percentage     points  PercentageFrom  PercentageTo
   1        A         >=85         4.00        85           100
   2        B         80-84        3.67        84            84
   3        C         83-75        2.65        75            83
   4        D         74-55        2.00        55            74 
```

现在您只需将`Quiz`表与`Scores`表连接起来并获取您需要的数据。

```
SELECT
  Q.id
  ,Q.username
  ,Q.qname
  ,Q.quizpercentage
  ,S.Letter
  ,S.Points
FROM
  Quiz Q
  JOIN
  Scores S ON
    (Q.quizpercentage BETWEEN S.PercentageFrom AND PercentageTo) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:49:41.463

您的默认设置只有人类可读，它应该如下所示：

```
id     letter   percentage_from percentage_to     points
1        A         85           100               4.00
2        B         80           84                3.67
3        C         75           79                2.65
4        D         55           74                2.00 
5        E         0            54                2.00 
```

那么您的查询可能类似于：

```
$quiztotal 
= mysql_query(
'SELECT quiz.id, quiz.username,quiz.qname, default.letter, default.points
 FROM quiz, default 
 where quiz.quizpercentage <= defaut.percentage_to
 and quiz.quizpercentage  >= defaut.percentage_from'); 
```

你会得到你想要的所有信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:41:38.900

查看`CASE`语法：[http ://dev.mysql.com/doc/refman/5.0/en/case-statement.html](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)

# ios - 计算 UIBezierPath 的宽度和高度？

> ID：12020804
> 
> 赞同：4
> 
> 时间：2012-08-18T17:38:42.960
> 
> 标签：ios, uibezierpath

我正在创建许多 umorphic UIBezierPaths。我需要计算 UIBezierPath 的宽度和高度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T18:01:23.117

您可以使用以下代码行获取高度。

```
myPath.bounds.size.height; 
```

而对于宽度...

```
myPath.bounds.size.width; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:45:50.677

对于与贝塞尔曲线相关的所有内容，我不能推荐足够多的[这个站点](http://processingjs.nihongoresources.com/bezierinfo/)，其中包含与您的问题相关的一[整章。](http://processingjs.nihongoresources.com/bezierinfo/#bounds)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-29T05:54:45.560

在迅速 4：

```
myPath.cgPath.boundingBox.width
myPath.cgPath.boundingBox.height 
```

# java - 线程优于 Runnable 的优势

> ID：12020805
> 
> 赞同：4
> 
> 时间：2012-08-18T17:38:44.493
> 
> 标签：java, multithreading

> **可能重复：**
> [Java：“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/java-implements-runnable-vs-extends-thread)

1）为什么Java语言同时提供Thread和Runnable？2) 线程相对于可运行的优势是什么（为什么 Java 不能只提供可运行的） 3) 我们可以进行可运行的睡眠，给它一个 id 等吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T17:41:20.530

**1.**线程是一个类，当你说`.start()`你创建一个`thread of execution` **附加到线程类的实例时。**调用 Runnable的`run()`方法，使其在**上执行任务** `thread of execution`，该`start()`方法快速返回。

**2.** `Runnable`是`task`指派给的`newly created thread of execution`。

**3.**所以**没有Thread类，你就不能运行你的Runnable。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T17:42:38.937

1) Thread 是一个类并且包含功能 - 而 runnable 是一个接口，因此只是实现类要遵守的“合同”。由于 Runnable 只是一个接口，您需要实例化一个线程来包含它。而线程已经包含产生线程的能力。

2) 实现 Runnable 是建议的方式，因为如果你扩展 Thread 你不能扩展其他任何东西（Java 不支持多重继承）。您可以在一个类上有多个接口，因此您可以拥有 Runnable + 许多其他接口，还可以扩展另一个基类

3）您从 Runnable 的实例化中获取线程并使其休眠 - this.sleep()

# javascript - 获取数组以更改类的值

> ID：12020807
> 
> 赞同：1
> 
> 时间：2012-08-18T17:39:09.170
> 
> 标签：javascript, impress.js

本质上，这是在函数内部：

```
// Adding in an array of gradients
var bg = ["gradient-0", "gradient-1", "gradient-2", "gradient-3", "gradient-4", "gradient-5", "gradient-6", "gradient-7", "gradient-8"];

var i = 0, len = bg.length;
for (; i < len;) {
    body.classList.add(bg[i++]);
} 
```

现在，它会同时吐出渐变（1、2、3 等）。

**我要做的是使用 impress.js 更改每个“幻灯片”的背景**

（[http://bartaz.github.com/impress.js/#/bored](http://bartaz.github.com/impress.js/#/bored)）

*我已经将它从 1 更改为 2，并在过渡时从 1 更改为 2，但在每次过渡时更改颜色都无济于事。*

# android - 使用 Android 应用内购买实现模块系统

> ID：12020810
> 
> 赞同：1
> 
> 时间：2012-08-18T17:39:38.403
> 
> 标签：android, sqlite, in-app-purchase

我有一个关于 Android 应用内购买的问题。但首先，一些关于我正在尝试做的事情的信息......

我的应用程序有一组“模块”，这些“模块”排列在这样排列的 SQLite 数据库中。这些模块仅通过一列来区分，该列指定特定条目所属的模块。我想做的是创建一个应用内购买系统，用户可以在其中下载其他内容“模块”。

安排和处理这些数据的最佳方式是什么？保持数据库设置并以某种方式实现一个将应用内购买添加到数据库的系统是一个好主意吗？如果用户删除应用程序或应用程序数据，是否可以跟踪这一点？我想让这个系统尽可能地动态化，这样就不会向用户显示一条消息，说如果他们已经购买并安装了它，还有其他可用内容。

我的应用程序的开发尚未开始，因此可以轻松探索任何其他数据排列。出于参考目的，每个“模块”将有大约 50-60 个条目，并且计划有 5-20 个“模块”之间的任何地方，因此会有大量数据。

很抱歉一下子问了这么多问题。如果您需要任何屏幕截图来更好地了解数据，或者如果我在解释我想要做什么方面做得不够好，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:48:56.633

对我来说，听起来您需要服务器端的用户帐户。在那里，您可以跟踪有关用户的必要信息，例如他/她购买了什么等。换句话说，数据库位于远程位置，而不是在应用程序中，因此您可以根据需要删除和重新安装，并且数据仍然可用。

为了识别用户，这将有所帮助：http: [//developer.android.com/training/id-auth/identify.html](http://developer.android.com/training/id-auth/identify.html)

# django - 在 Django admin 中一次添加多个模型对象

> ID：12020815
> 
> 赞同：2
> 
> 时间：2012-08-18T17:40:27.397
> 
> 标签：django, django-admin

除了 django 管理员使用的一次一个对象的标准方法之外，我还想允许我的 django 管理员用户一次为我的一个模型添加多个对象。

我正在考虑修改模型的 change_form.html 模板，以便它使用表单集[（如这里所建议的那样）](https://stackoverflow.com/questions/5048188/django-admin-add-page-want-to-add-multiple-objects-on-one-page) ——尽管我还不确定如何实现这一点。

请注意，我没有添加多个子对象，因此我不能为此使用内联。

解决这个问题的最佳方法是什么？

# javascript - CSS/Javascript 中的树形图像布局

> ID：12020817
> 
> 赞同：0
> 
> 时间：2012-08-18T17:40:44.230
> 
> 标签：javascript, css, layout, tree, image-scaling

我希望将图像排列在树层次结构中，每个子节点位于父节点下方，顶部对齐其他子节点。每个节点应该允许任意数量的子节点。理想情况下，是这样的：

[![盒子网格](../Images/3414df0adafd116dd17039175b4951de.png)](https://i.stack.imgur.com/Z4zqt.png)

请注意，这与[Masonry](http://masonry.desandro.com/)或 Isotope 不同，后者允许较低图像跨越较高图像的边缘。然而，任何数量的图像的自动调整大小当然是可取的。

作为第一次尝试，我从这个 CSS 开始：

```
img.first-row {
    max-width: 100%;
    vertical-align: top;
}
img.second-row {
    max-width: 24%;
    vertical-align: top;
}
img.third-row {
    max-width: 8%;
    vertical-align: top;
} 
```

仅当您在第一行有 1 张图像，在第 2 行有 4 张图像，在第 3 行有 3 张图像时，这才有效。此外，第三行并没有真正停留在第二行的第一张图片下方，如果您没有超过 3 张图片，它看起来就是这样。

所以有多个部分：

1.  树形布局的递归嵌套，可以容纳任何内容。

2.  自动调整图像大小以适应布局。

3.  在 HTML 文档中完成此操作的方法。我对 Javascript、CSS、jQuery 或其他什么东西并不特别。只要保持树形布局，图像也不必特别紧密地组合在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:14:43.940

你所追求的听起来像是某种经过修改的树图可视化算法。你是对的，使用同位素你不能强制执行这种分层布局。也许[在 github 上查看一下](https://github.com/lrgalego/jquery-treemap)您可以适应的 jQuery 方法。[这些 JavaScript](http://thejit.org/docs/files/Treemap-js.html)库可能很有用。而[这里的这个工具包](http://prefuse.org/)使用了Java和Flash。或者可以考虑[这个](http://www.treemap.com/)可以部署在互联网上的交互式 Java 小程序。

# c# - 亚马逊视频点播 API

> ID：12020820
> 
> 赞同：9
> 
> 时间：2012-08-18T17:40:56.133
> 
> 标签：c#, vb.net, amazon-web-services, amazon, amazon-product-api

我正在尝试编写一个可以从 Amazon 的 VoD 服务中获取结果的 C#/.NET 应用程序。我找到了这篇文章：

[Amazon API - 即时视频结果](https://stackoverflow.com/questions/8014934/amazon-api-instant-video-results)

它建议我使用亚马逊产品广告 API 来获取此信息。我一直在查看亚马逊的入门指南和互联网上的各个地方，但我没有运气。很多信息似乎已经过时了。看起来最新的 API 版本是 2011 年 8 月。也许这些例子是在此之前的。

有没有人有任何关于如何从 C# 使用这个 API 的最新示例（VB.NET 也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:38:51.180

如果您只是在寻找商品列表，请使用亚马逊产品广告 API [BrowseNodeLookup](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/BrowseNodeLookup.html)，使用 BrowseNodeId 等于 2676882011。根据[此](https://forums.aws.amazon.com/thread.jspa?threadID=91368)的结果应该是

```
<BrowseNode>
<BrowseNodeId>2858778011</BrowseNodeId>
<Name>Amazon Instant Video</Name>
<NewReleases>
<NewRelease>
<ASIN>B007R0XM88</ASIN>
<Title>We Bought A Zoo</Title>
</NewRelease><NewRelease>
<ASIN>B007PKOKTK</ASIN>
<Title>Hop</Title>
</NewRelease> 
```

但是根据多个来源，BrowseNodeID 可能会在没有通知的情况下更改，因此最好的方法是不时遍历所有节点并找到有效的节点。在这里，您将找到来自 Google Cache for [Amazon Instant Video的输出](http://webcache.googleusercontent.com/search?q=cache%3a-uMssbtSCEAJ%3awww.browsenodes.com/node-2233263011.html%20&cd=4&hl=pl&ct=clnk&gl=pl)

# python - python int() 函数

> ID：12020821
> 
> 赞同：8
> 
> 时间：2012-08-18T17:41:14.423
> 
> 标签：python, int

*如果将小数（例如 49.9）*发送到`next`变量，则下面的代码会显示错误。你能告诉我为什么吗？为什么`int()`将其转换为整数？

```
next=raw_input("> ")
how_much = int(next)
if how_much < 50:
    print"Nice, you're not greedy, you win"
    exit(0)
else:
    dead("You greedy bastard!") 
```

如果我不使用`int()`或`float()`只使用：

```
how_much=next 
```

然后它移动到“else”，即使我将输入作为`49.8`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T17:57:35.103

正如其他答案所提到的，`int`如果字符串输入不能转换为 int（例如浮点数或字符），则操作将崩溃。您可以做的是使用一些辅助方法来尝试为您解释字符串：

```
def interpret_string(s):
    if not isinstance(s, basestring):
        return str(s)
    if s.isdigit():
        return int(s)
    try:
        return float(s)
    except ValueError:
        return s 
```

所以它将接受一个字符串并尝试将其转换为 int，然后浮点数，否则返回字符串。这只是查看可转换类型的一般示例。如果您的值从该函数中返回仍然是一个字符串，那将是一个错误，然后您需要向用户报告并要求新的输入。

`None`如果它既不是浮点数也不是整数，可能会返回一个变体：

```
def interpret_string(s):
    if not isinstance(s, basestring):
        return None
    if s.isdigit():
        return int(s)
    try:
        return float(s)
    except ValueError:
        return None

val=raw_input("> ")
how_much=interpret_string(val)
if how_much is None:
    # ask for more input? Error? 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T17:43:21.963

`int()` *仅*适用于看起来像整数的字符串；对于看起来像浮点数的字符串，它将失败。改为使用`float()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T17:49:28.300

整数（`int`简称）是您用 0、1、2、3 ... 计算的数字，以及它们的负数 ... -3、-2、-1 是没有小数部分的数字。

因此，一旦您引入了小数点，您就不会真正处理整数。你正在处理有理数。Python float 或[decimal](http://docs.python.org/library/decimal.html)类型是您想要表示或近似这些数字的类型。

您可能习惯于自动为您执行此操作的语言（Php）。然而，Python 有一个明确的偏好，即强制代码是[显式的而不是隐式](http://www.python.org/dev/peps/pep-0020/)的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-17T01:47:08.307

```
import random
import time
import sys
while True:
    x=random.randint(1,100)
    print('''Guess my number--it's from 1 to 100.''')
    z=0
    while True:
        z=z+1
        xx=int(str(sys.stdin.readline()))
        if xx > x:
            print("Too High!")
        elif xx < x:
            print("Too Low!")
        elif xx==x:
            print("You Win!! You used %s guesses!"%(z))
            print()
            break
        else:
            break 
```

在此，我首先将 number 字符串化`str()`，将其转换为无法操作的数字。然后，我`int()`将它整数化，使其成为一个可操作的数字。我刚刚在我的 IDLE GUI 上测试了你的问题，它说 49.8 < 50。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T17:46:09.047

使用[float()](http://docs.python.org/library/functions.html#float)代替[int()](http://docs.python.org/library/functions.html#int)以便您的程序可以处理小数点。另外，不要使用next() ，`next`因为它是[Python 的内置函数](http://docs.python.org/library/functions.html#next)。

此外，您发布的代码丢失`import sys`并且定义为`dead`

# ruby-on-rails - 在 Ruby on Rails 中测试缺少关联对象

> ID：12020824
> 
> 赞同：0
> 
> 时间：2012-08-18T17:41:19.293
> 
> 标签：ruby-on-rails

这是我之前的一个问题的后续，因为我正在围绕 Ruby on Rails 弯曲我的大脑。

我有显示在网页上的项目，具体取决于它们的状态是否允许显示，使用命名范围 - 如果文档状态（“待售”、“已售”、“已删除”等）设置了 show_latest_items 标志为 1，它将允许在页面上显示关联的项目：

```
class Item < ActiveRecord::Base
  belongs_to :status
  scope :show_latest_items, joins(:status).where(:statuses => {:show_latest_items => ["1"]})
end

class Status < ActiveRecord::Base
  has_many :items
end 
```

这是它当前的显示方式

```
<% latest_items = Items.show_latest_items.last(30) %>
<% latest_items.each do |i| %>
  :
<% end %> 
```

所以这一切都很好，但我现在只想显示有关联照片的项目。

```
class Item < ActiveRecord::Base
  has_many :item_photos
end

class ItemPhoto < ActiveRecord::Base
  belongs_to :item
end 
```

所以在我看来，我应该使用命名范围，能够拉回要显示的项目列表，然后使用 .present 过滤它们？或.any？方法。奇怪的是：

```
<% latest_items = Items.show_latest_items.where(:item_photos.any?).last(30) %> 
```

返回错误：

```
undefined method `any?' for :item_photos:Symbol 
```

然而：

```
<% latest_items = Items.show_latest_items.where(:item_photos.present?).last(30) %> 
```

不会出错，但它也不会过滤掉没有照片的项目。

我尝试了各种其他方法，以及尝试自定义查找器、为照片编写名称范围，但没有什么意义重大。我应该从不同的角度来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:00:03.057

```
:item_photos.any? 
```

这不起作用，因为 Ruby 的[Symbol](http://www.ruby-doc.org/core-1.9.3/Symbol.html)没有`any?`方法。

```
.where(:item_photos.present?) 
```

这不会执行您所追求的过滤，因为您正在调用评估为[`.present?`](http://api.rubyonrails.org/classes/Object.html#method-i-present-3F)的 Symbol ，从而使条件真正`:item_photos``true`

```
.where(true) 
```

尝试简单

```
<% latest_items = Items.show_latest_items.joins(:item_photos).last(30) %> 
```

用于此的 SQL`.joins(:item_photos)`将是`INNER JOIN`，导致结果中省略`Item`没有关联实例的实例。`ItemPhoto`

# jenkins - jenkin 的 selenium 网格上的 Chromedriver 插件遇到错误

> ID：12020828
> 
> 赞同：2
> 
> 时间：2012-08-18T17:41:41.977
> 
> 标签：jenkins, selenium-grid, jenkins-plugins, selenium-chromedriver

Jenkins 在 Linux 上运行，我已经设置了一个节点/从属 (localhost) 来运行。当我没有chromedriver插件时，节点可以运行并且在线。使用插件我得到一个错误：

```
 Installing chromedriver to /var/jenkins/tools/chromedriver
    ERROR: Unexpected error in launching a slave. This is probably a bug in Jenkins.
    java.lang.NullPointerException
        at org.jenkinsci.plugins.chromedriver.DownloadableImpl.getType(DownloadableImpl.java:91)
        at org.jenkinsci.plugins.chromedriver.DownloadableImpl.select(DownloadableImpl.java:78)
        at org.jenkinsci.plugins.chromedriver.DownloadableImpl.resolve(DownloadableImpl.java:35)
        at org.jenkinsci.plugins.chromedriver.ComputerListenerImpl.process(ComputerListenerImpl.java:43)
        at org.jenkinsci.plugins.chromedriver.ComputerListenerImpl.preOnline(ComputerListenerImpl.java:34)
        at hudson.slaves.SlaveComputer.setChannel(SlaveComputer.java:370)
        at hudson.slaves.SlaveComputer.setChannel(SlaveComputer.java:317)
        at hudson.plugins.sshslaves.SSHLauncher.startSlave(SSHLauncher.java:454)
        at hudson.plugins.sshslaves.SSHLauncher.launch(SSHLauncher.java:293)
        at hudson.slaves.SlaveComputer$1.call(SlaveComputer.java:200)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
    ERROR: Connection terminated
    java.io.IOException: Unexpected termination of the channel
        at hudson.remoting.SynchronousCommandTransport$ReaderThread.run(SynchronousCommandTransport.java:50)
    Caused by: java.io.EOFException
        at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2570)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1314)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
        at hudson.remoting.Command.readFrom(Command.java:90)
        at hudson.remoting.ClassicCommandTransport.read(ClassicCommandTransport.java:59)
        at hudson.remoting.SynchronousCommandTransport$ReaderThread.run(SynchronousCommandTransport.java:48) 
```

我做错了什么，您如何解决此问题或有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:47:51.173

看起来像这样被报告：[JENKINS-12765](https://issues.jenkins-ci.org/browse/JENKINS-12765)

# mysql - Mysql Query：当数字有连字符时，数字范围之间

> ID：12020833
> 
> 赞同：0
> 
> 时间：2012-08-18T17:42:23.590
> 
> 标签：mysql, sql

我有一个如下表，我正在尝试获取`reg_number`介于`01-01-02-000002`AND之间的所有值`01-01-02-000004`

```
id  name               reg_number
1   Charlie Sheen      01-01-02-000001
2\.  John Cryer         01-01-02-000002
3\.  Roger Federar      02-02-02-000001
4\.  Jason Stathum      01-01-02-000003
5\.  Robert De Niro     01-01-02-000004 
```

我已经尝试了以下代码来实现这一点，但它不起作用。是因为我有连字符`reg_number`吗？如果可以，请告诉我解决此问题的方法吗？谢谢 ：）

```
SELECT * FROM mytable 
WHERE reg_number >='01-01-02-000002' AND reg_number <= '01-01-02-000004' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:04:49.527

我刚刚在[SQL Fiddle](http://sqlfiddle.com/#!2/76dc9/1/0)上构建了它，它可以工作。

代码是：

```
create table mytable (
      id int,
      name varchar(255),
      reg_number varchar(255)
  );

insert into mytable
    select 1, 'Charlie Sheen', '01-01-02-000001' union all
    select 2, 'John Cryer', '01-01-02-000002' union all
    select 3, 'Roger Federar', '02-02-02-000001' union all
    select 4, 'Jason Stathum', '01-01-02-000003' union all
    select 5, 'Robert De Niro', '01-01-02-000004' 
```

然后是您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:04:28.813

代码如何不起作用？你会得到哪个结果？对我有用的是：

```
set @reg_number = '01-01-02-000003'; 
select @reg_number >='01-01-02-000002' AND @reg_number <= '01-01-02-000004'; 
```

结果为真。

# java - 如何检查是否按下了大写锁定键？

> ID：12020835
> 
> 赞同：8
> 
> 时间：2012-08-18T17:42:28.833
> 
> 标签：java, capslock

好吧，在这被标记为可能的重复之前，我已经尝试了以下代码：

```
Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK) 
```

它总是对我返回 false [见下文]。有人可以确认这是否应该工作，我是否在滥用它，或者它是否已知被破坏？如果它实际上是坏的，有没有人有更好的方法来使用？

**编辑：**

好吧，刚刚又发现了一些东西。它似乎只是返回了我的程序启动开始时的状态。如果我打开程序启动它，它会说它打开，反之亦然。这是我的代码：

```
while (true) {
    boolean isOn = Toolkit.getDefaultToolkit().getLockingKeyState(
        KeyEvent.VK_CAPS_LOCK);
    System.out.println("Caps lock is now: " + (isOn ? "ON" : "off"));
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
    }
} 
```

这总是打印出它开始的任何内容

（例如，如果我从大写锁定开始，即使我之后立即将其关闭，它也会打印：

> 大写锁定现在：打开
> 
> 大写锁定现在：打开
> 
> 大写锁定现在：打开
> 
> 大写锁定现在：打开

等等，如果我从它开始，无论如何它都会打印出来）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:26:52.823

翻来覆去，我想`getLockingKeyState()`可能是坏了。

您可以尝试[KeyboardUtils](http://jna.java.net/javadoc/platform/com/sun/jna/platform/KeyboardUtils.html)，但看起来这意味着您必须承担 JNA 开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-15T14:44:08.127

看起来这总是被破坏或至少从 Java 1.3 开始（参见[Bug 4414164](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=4414164)）。

不确定对于其他平台，但对于**Windows** ，我可以这样说：可以检测到 Caps Lock 的状态更改，但前提是您的 awt 客户端具有焦点。但是，有一种解决方法对我有用：

```
boolean isCapsLockOn() {
    java.awt.Robot robot = new java.awt.Robot();
    robot.keyPress(KeyEvent.VK_CONTROL);
    robot.keyRelease(KeyEvent.VK_CONTROL);
    return Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK);  
} 
```

约束：你的 awt 应用必须在调用`isCapsLockOn`.

注意：您的机器人可能会按下对您的应用程序无害的任何其他键。可能取决于您的用例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-22T09:42:18.303

```
public void checkOnOff() {
    Thread th = new Thread() {
        public void run() {
            for (;;) {
                if (Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK)) {
                    jLabel4.setForeground(Color.red);
                    jLabel4.setText("CAPSLOCK is ON");
                } else {
                    jLabel4.setText(null);
                }
                try {
                    sleep(100);
                } catch (InterruptedException ex) {
                    Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
                }                    
            }
        }
    };th.start();
} 
```

# node.js - 通过 node.js 和 AJAX 客户端之间的 HTTP 流推送 JSON 字符串

> ID：12020836
> 
> 赞同：0
> 
> 时间：2012-08-18T17:42:30.023
> 
> 标签：node.js, multipart-mixed-replace

我从 IP 摄像机那里得到了这个想法，他们使用多部分标头发送 JPEG 帧，还使用 ​​XML 来发送运动检测等事件。数据在随机时刻以一种方式流动，并且在一些超时后必须与服务器建立新连接。我之前已经为这些设备制作了客户端应用程序，但从未使用 AJAX，现在我正在尝试在 node.js 中制作类似的服务器

我知道我可以使用 socket.io，但我现在只是对使用这种方式感兴趣。可能吗？

这将每秒在有边界的块中写入当前日期，并在 telnet 中正常工作。

```
var http = require('http');
http.createServer(function(request, response) {
    response.writeHead(200, {
        'Content-Type': 'multipart/x-mixed-replace; boundary=boundary',
        'Access-Control-Allow-Origin' : '*',
        'Connection': 'keep-alive'
    });

    setInterval(function () {
        response.write('--boundary\r\n', 'ascii');
        response.write('Content-Type: text/plain\r\n', 'ascii');
        response.write('\r\n', 'ascii');
        var date = new Date();
        response.write(date.toString() + '\r\n\r\n', 'ascii');
    }, 1000);
}).listen(8080); 
```

将记录当前就绪状态的 AJAX 连接

```
var url = "http://localhost:8080";      
var xhr = $.ajax({
              'url': url,
              'success' : function(html) {
                    $('body').append(html);
               }
            });

xhr.onreadystatechange = function() {
     console.log(xhr.readyState,xhr.status,xhr.responseText);
} 
```

我得到的只是就绪状态“4”和状态“0”，也在我的网络工具中看到“已取消”标题错误。

当我丢失 multipart/x-mixed-replace 并将其推送到正常的 HTTP 连接时，我得到多个就绪状态“3”但没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:07:16.197

jQuery 几乎肯定会在它创建的 XHR 上设置自己的内部`readystatechange`处理程序，而您正在覆盖它。改为使用`xhr.addEventListener('readystatechange', function() { ...`。

# java - ImageView 背景在按钮单击时不会平滑更改

> ID：12020838
> 
> 赞同：0
> 
> 时间：2012-08-18T17:42:54.667
> 
> 标签：java, android

我正在编写一个简单的应用程序，它会在单击按钮时随机更改应用程序背景。

我有一个数组列表，其中包含应用程序应使用的 5 个 id 图像：

```
 ArrayList<Integer> imageID = new ArrayList<Integer>();
    imageID.add(R.drawable.frame_blue);
    imageID.add(R.drawable.frame_green);
    imageID.add(R.drawable.frame_lilac);
    imageID.add(R.drawable.frame_pink);
    imageID.add(R.drawable.frame_yellow); 
```

我的布局 xml 文件中有两个按钮用于*next*和*previous*。单击时两者都应更改应用程序背景。

我从此数组列表更改图像背景：

```
iM.setBackgroundResource(imageID.get(r.nextInt(5))); 
```

我的布局 xml 看起来像：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/parentLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="76dp"
        android:onClick="previous"
        android:text="Previous" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentRight="true"
        android:onClick="next"
        android:text="Next" />

</RelativeLayout> 
```

按钮点击一切正常，ImageView 背景变化如我所料，但问题是背景变化不顺畅。

它挂了一段时间。可能是主 ui 线程将被阻塞 1 或 2 秒，这看起来像应用程序挂起。

挂起意味着：一些时间按钮保持点击几秒钟。

我试过 asynctask 没有成功。有没有办法让它顺利改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:18:37.207

您需要使用缓存以节省时间，而不是每次像这样的图像时膨胀：`Drawable image_frame_green = getResources().getDrawable( R.drawable.frame_green);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:01:00.297

您是否尝试过将所有可绘制对象预加载到缓存中，然后不设置背景资源，而是直接将背景可绘制对象设置为背景。

# ruby-on-rails - MacVim 没有启动我的 Rails 服务器 vim-ruby-debugger

> ID：12020840
> 
> 赞同：0
> 
> 时间：2012-08-18T17:43:18.620
> 
> 标签：ruby-on-rails, vim, macvim, vim-plugin

我尝试为我的 rails 项目添加一个好的调试器，我发现 vim-ruby-debugger 是我最喜欢的编辑器 VIM 的最佳选择。这与 ubuntu 完美配合。

但是当我尝试为我的 Mac 配置它时，调试器会提示一条已启动的消息，但 rails 服务器已关闭。

这就是我所做的。

*   安装 gem ruby​​-debug-ide
*   使用病原体安装插件 vim-ruby-debugger
*   将我的 .vimrc 修改为

让 g:ruby_debugger_progname = 'mvim'
让 g:ruby_debugger_debug_mode = 1
让 g:ruby_debugger_builtin_sender = 0

当我尝试将 Rails 看成 **:Rdebugger**
时，它说 Debugger 已启动，但它没有启动我的服务器。

有什么我需要额外配置的吗？

# php - Twig - 指示宏内部对宏的错误使用

> ID：12020844
> 
> 赞同：1
> 
> 时间：2012-08-18T17:43:38.573
> 
> 标签：php, twig, template-engine

有没有一种从宏内部指示错误使用 Twig 宏的好方法？

例如：

```
{% macro _name_to_size(input) %}{% spaceless %}

    {% set size %}
        {% if input == 'small' %}20{% endif %}
        {% if input == 'medium' %}40{% endif %}
        {% if input == 'large' %}60{% endif %}
    {% endset %}

    {% if not size|trim|length %}
        {# tell user that something is wrong #}
    {% endif %}

    {{ size }}

{% endspaceless %}{% endmacro %} 
```

编辑：

谢谢您的回答。我最终得到了这样的东西（你有可能不会在浏览器中错过这样的东西）：

```
{% macro error(message) %}
    {% set notification %}
        <div style="
            background-color: {{ background }} !important;
            display: block !important;
            height: 100% !important;
            left: 0 !important;
            overflow: none !important;
            position: fixed !important;
            top: 0 !important;
            width: 100% !important;
            z-index: 1000 !important;
        ">
            <div style="
                background-color: {{ foreground }} !important;
                color: white !important;
                display: block !important;
                font-size: 4em !important;
                line-height: 1.6em !important;
                left: 0 !important;
                position: relative !important;
                text-align: center !important;
                top: 32% !important;
                z-index: 1100 !important;
            ">{{ message }}</div>
        </div>
    {% endset %}
    {{ notification }}
    <script>
        var messageDiv = document.createElement("div");
        messageDiv.innerHTML = "{{ notification|e('js') }}";
        document.body.appendChild(messageDiv);
    </script>
{% endmacro %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:22:23.087

您可以打印错误消息，但这是您可以从模板中做的最好的事情。

如果您想要一个更好的选择，请编写一个 twig 扩展来创建一个函数来执行您希望宏执行的操作。你可以在那里抛出异常。

# php - 如何从图像中获取颜色？

> ID：12020846
> 
> 赞同：-2
> 
> 时间：2012-08-18T17:43:48.703
> 
> 标签：php, javascript, jquery

如何从图像中获取颜色？喜欢[这个网站](http://www.cssdrive.com/imagepalette/index.php)吗？我想知道我怎样才能得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:05:17.017

这是一个基于 Csongor Zalatnai 的 PHP 类的图像颜色提取 [http://www.phpclasses.org/package/3370-PHP-Extracts-the-most-common-colors-used-in-images.html](http://www.phpclasses.org/package/3370-PHP-Extracts-the-most-common-colors-used-in-images.html)

在线示例 [http://www.coolphptools.com/color_extract](http://www.coolphptools.com/color_extract)

您可以使用它来提取 HEX 格式的颜色配置文件

# css - 如何仅填充文本背景（创建标志）

> ID：12020848
> 
> 赞同：0
> 
> 时间：2012-08-18T17:44:14.880
> 
> 标签：css

我正在尝试使用 css 创建一个标志问题是我的文本在中间和有文本的区域之间，没有背景颜色，所以看起来很尴尬。请看附上的图片 ![当前图像](../Images/30a7850303e65b5290b873004d6f9ada.png)

代码：

```
.Caption {
    position: relative;
    font-size: 16px;
    line-height: 18px;
    padding-bottom: 16px;
}

.Caption span {
    display: block;
    clear: both;
    content: '.';
    position: relative; left: -25px;
    border-top: 25px solid navy;
    border-left: 26px solid transparent;
    border-bottom: 25px solid navy;
    float: right;
    margin-top: -40%;
    margin-right: 2%;
} 
```

**累** 了我尝试使用背景属性，但它不仅背景为红色，而且前面部分也是如此。我希望前面部分是透明的，并用颜色填充文本部分。查看下面的图片，看看它是如何远离文本区域的，这里是它的代码

```
.Caption span {
    display: block;
    clear: both;
    content: '.';
    background-color:red;
    position: relative; left: -25px;
    border-top: 25px solid navy;
    border-left: 26px solid transparent;
    border-bottom: 25px solid navy;
    float: right;
    margin-top: -40%;
    margin-right: 2%;
} 
```

![红色在文本之外被扩展](../Images/6dfd990873330078dac328304e28e602.png)

**HTML**

```
<span class="Caption">up to 50% off</span> 
```

**期望的结果** 我试图摆脱最后一张图像左侧的红色三角形（漏斗等）。这样只有文本有背景

# c - 用于内存子分配器的 C 编程循环列表

> ID：12020852
> 
> 赞同：1
> 
> 时间：2012-08-18T17:44:52.363
> 
> 标签：c, memory-management, linked-list, circular-list

我正在尝试构建一个内存子分配器。我对下面的代码有一些错误，它告诉我：

```
free_list_ptr->next = &firstByte;
free_list_ptr->prev = &firstByte; 
```

我收到 gcc 错误警告`warning: assignment from incompatible pointer type`

```
//primitive variable of byte as char, always positive.
typedef unsigned char byte;
static byte *memory = NULL;

struct header;

typedef struct _header {
    int signiture;
    int size;
    struct header* next;
    struct header* prev;
} header;

static header *free_list_ptr;

void allocator_init(u_int32_t size){

    memory = (byte*) malloc(size);

    //initialize free_list_ptr;
    free_list_ptr = (header*) memory;

        header* firstByte = (header*) memory;

    free_list_ptr->size = size;

    //error here: warning: assignment from incompatible pointer type
    free_list_ptr->prev = &firstByte;
    free_list_ptr->next = &firstByte;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T18:08:27.523

这很可能是错误的：

```
struct header;               // forward declare "struct header"

typedef struct _header {
    int signiture;
    int size;
    struct header* next;     // refer to the forward declared "struct header"
    struct header* prev;
} header;                    // declare type-alias "header" 
```

改为

```
typedef struct header header; // forward declaration of both

struct header {
    int signiture;
    int size;
    header* next;
    header* prev;
}; 
```

在 C`struct header`和`typedef`ed`header`中，存在两个不同的名称空间。您转发声明`struct header`但您从未定义它。

此外，以 开头的标识符`_`通常是为内部保留的，所以你不应该将它们用于你自己的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:48:35.483

改变

```
 free_list_ptr->prev = &firstByte; 
```

到

```
 free_list_ptr->prev = firstByte; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:50:26.813

`&firstByte`是一个`header**`。 `free_list_ptr->prev`是一个`header*`。

您可以通过以下方式解决您的问题（您肯定会摆脱警告）：

```
free_list_ptr->prev = firstByte;
free_list_ptr->next = firstByte; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:51:16.137

这应该是

```
free_list_ptr->prev = firstByte;
free_list_ptr->next = firstByte; 
```

由于 next 和 prev 已经是头指针，给它们分配另一个头指针（firstByte）的**地址**会导致错误。

# objective-c - 目标-c：对（NSInteger）自身进行转换是否危险？

> ID：12020855
> 
> 赞同：0
> 
> 时间：2012-08-18T17:45:15.297
> 
> 标签：objective-c

施放“（NSInteger）self”是否危险？

我需要区分两个视图，而不是使用标签值。

如果它很危险，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:56:21.667

你的意思是你有两个`UIView`指针，你想知道它们是否指向同一个对象？只需使用`==`. 无需投射它们。如果您的意思是别的，您需要提供更多详细信息来说明“区分两个视图”的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:49:53.823

忽略 ARC 可能经历的抽搐，将`self`（或任何其他指针）投射到`integer`. 然而，转向另一个方向是极其危险的。

而且 Objective-C 有足够多的奇怪的角落和黑暗的走廊，很难很有信心地说`self`强制转换为整数将以有用的方式重现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:25:57.530

该`NSObject`协议声明了[`isEqual:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCCECDG)一种用于比较对象的方法。如果它们的内容相等，则类可以覆盖它以将其实例定义为相等；否则两个实例将比较为不相等。

这是您真正应该用来区分对象的方法，而不是直接比较它们的指针值。但是，这样做是安全的。

# android - Android Widgets：无法保留旧值

> ID：12020859
> 
> 赞同：3
> 
> 时间：2012-08-18T17:46:32.067
> 
> 标签：android, widget, android-pendingintent

我会让它变得简单。我有我的小部件代码。我的小部件布局包含一个带有一个按钮的线性布局。在我的小部件代码中，我初始化了一个包含一些值的字符串列表。当我单击小部件中的按钮时，我必须使用更多值更新我的列表。

所以，这是我的代码，

```
List<String> myList = null;
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
myList = new List<String>();
myList.add("1");
myList.add("2");
...
Intent intent = new Intent(context, getClass());
intent.setAction("CALL_UPDATE");
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
views.setOnClickPendingIntent(R.id.button, pendingIntent);
....
}

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals("CALL_UPDATE")) {
        Toast.makeText(context, "Intent received"+myList , 2000).show();
    }
} 
```

单击按钮时，onReceive() 会正确接收广播。问题是，在 onReceive() 上，我看到我的列表为 null 而不是其中的一些值，因为之前添加了一些字符串对象。

任何人都可以帮忙吗？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:04:09.077

文档说：

> 这对你在 onReceive(Context, Intent) 实现中可以做的事情有重要的影响：***任何需要异步操作的东西都不可用***，因为你需要从函数返回来处理异步操作，但此时 BroadcastReceiver 是不再活动，因此系统可以在异步操作完成之前自由地终止其进程。
> 
> ***特别是，您可能不会***在 BroadcastReceiver 中显示对话框或绑定到服务。对于前者，您应该改用 NotificationManager API。对于后者，您可以使用 Context.startService() 向服务发送命令。

和：

> onReceive() 通常在其进程的主线程中调用，因此您不应该在其中执行长时间运行的操作（在考虑接收器被阻塞和候选被杀死之前，系统允许超时**10 秒**） ）。您不能在 onReceive() 的实现中启动弹出对话框。

**编辑**：
AppWidgetProvider 是一个`BroadcastReceiver`，它的实例（以及它的字段）将在它的生命周期后被删除。当你在 HomeScreen 中创建一个新的小部件实例时，`onUpdate`AppWidgetProvider`onReceive`调用和这个 AppWidgetProvider 实例的列表不为空。但是在调用之后onReceive（例如 10 秒）此实例将被删除。当您单击按钮时，将创建 AppWidgetProvider 的第二个实例，并且它的列表为空。
您可以保存`public static field`课程列表并在需要时检索它。

# eclipse - 有没有办法停止在 python 项目中生成 ruby 存根？

> ID：12020867
> 
> 赞同：1
> 
> 时间：2012-08-18T17:47:44.287
> 
> 标签：eclipse, aptana

我有一个大型项目，包括 python 和 javascript 代码，它不时地尝试为 ruby​​ 核心生成存根。该项目根本没有 ruby​​ 代码。但是 Eclipse/Aptana Studio 每隔一段时间就会决定生成存根，这需要一个多小时。严重地。我什至没有夸大其词。

所以当然我已经尝试了很多方法来试图阻止这个过程。结果很简单，它必须在我的项目再次可用之前完成。在该过程结束时，eclipse“.project”文件最终会有一个“rubyspect”条目，我们总是删除它，因为只要其他人对具有 ruby​​ 方面的项目执行“git pull”，他们的环境还花费了一个多小时来生成 ruby​​ 存根。

我已经看到一些关于取消过程中的错误的讨论，但问题似乎仍然来自实际使用 ruby​​ 的人。同样，这只是一个 python 和 javascript 项目。

是否有任何解决方法可以停止此过程，一旦我再次启动 eclipse，就不会导致重新启动该过程？

附录：使用的Eclipse版本是Juno，AptanaStudio版本是3.2.0

第二个附录：我刚刚升级到 AptanaStudio 版本是 3.2.1。同样的问题仍然存在，但没有提到红宝石核心——它只是说“重建”。完成后，一个小时后，它仍然为项目添加了 ruby​​aspect。

——杰夫

# php - PHP 升级到 v.5.3 中断包括？

> ID：12020868
> 
> 赞同：3
> 
> 时间：2012-08-18T17:48:06.653
> 
> 标签：php

我被要求修复几天前还不错的网站，但由于主机将 PHP 升级到 v.5.3，现在无法包含文件

对于每个包含，我现在都会收到两个警告，如下所示：

> 警告：include_once(file.php) [function.include-once]：无法打开流：第 2 行的 /home/content/anotherFile.inc.php 中没有这样的文件或目录
> 
> 警告：include_once() [function.include]：无法在 /home/content/anotherFile.inc.php 中打开 'file.php' 以包含 (include_path='.:/usr/local/php5_3/lib/php') 2号线

我真的不想重写网站。有没有办法修复路径？它在共享主机上，我无法修改 php.ini

我快速搜索了一下，发现 PHP 5.3 出现了问题，而 5.3.1 则消失了…… Bug？

有哪些可能的解决方案？

* * *

更新：我认为问题出在代码上。它是几年前写的，$_GET 值被用作 $value。更改为 $_GET['value'] 似乎解决了一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:30:26.863

看来问题是由[不推荐使用的 php.ini 设置](http://php.net/manual/en/security.globals.php)引起的：`register_globals = on`。

这将导致您的`$GET`变量被提取并像您在编辑中描述的那样全局可用。

在 php 5.3 中，此设置已弃用但尚未删除，因此在重构时，您可以再次将其重新打开，以便您的站点再次运行。**但是**，请注意，您确实需要删除此设置，因为它存在安全风险，并且已在 php 5.4 中完全删除。

# python - 数组数组（Python/NumPy）

> ID：12020872
> 
> 赞同：22
> 
> 时间：2012-08-18T17:48:33.063
> 
> 标签：python, arrays, numpy

我正在使用 Python/NumPy，并且我有两个数组，如下所示：

```
array1 = [1 2 3]
array2 = [4 5 6] 
```

我想创建一个新数组：

```
array3 = [[1 2 3], [4 5 6]] 
```

并将项目附加到它。例如，如果要附加的新项目是：

```
array4 = [7 8 9]
array5 = [10 11 12] 
```

那么现在 array3 将是一个包含两行两列的数组，如下所示：

```
array3= [[1 2 3], [4 5 6]
         [7 8 9], [10 11 12]] 
```

我似乎有问题，因为我的数组元素没有用逗号分隔。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T18:12:31.197

您编写不带逗号的数组似乎很奇怪（这是[MATLAB 语法](http://www.scipy.org/NumPy_for_Matlab_Users)吗？）

您是否尝试过阅读[NumPy 关于多维数组的文档](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html)？

似乎 NumPy 有一个[“类似 Python”的附加方法来将项目添加到 NumPy n 维数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.append.html?highlight=append#numpy.append)：

```
>>> p = np.array([[1,2],[3,4]])

>>> p = np.append(p, [[5,6]], 0)

>>> p = np.append(p, [[7],[8],[9]],1)

>>> p
array([[1, 2, 7], [3, 4, 8], [5, 6, 9]]) 
```

它也[已经回答了](https://stackoverflow.com/a/877564/484127)......

从[MATLAB 用户的文档中](http://www.scipy.org/NumPy_for_Matlab_Users)：

您可以使用矩阵构造函数，它采用矩阵 MATLAB 文字形式的字符串：

```
mat("1 2 3; 4 5 6")

or

matrix("[1 2 3; 4 5 6]") 
```

请试一试，告诉我进展如何。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-08T15:50:27.193

在创建不带逗号的列表时会遇到问题。转换数据应该不会太难，以便它使用逗号作为分隔符。

一旦你有逗号，这是一个相对简单的列表创建操作：

```
array1 = [1,2,3]
array2 = [4,5,6]

array3 = [array1, array2]

array4 = [7,8,9]
array5 = [10,11,12]

array3 = [array3, [array4, array5]] 
```

测试时我们得到：

```
print(array3)

[[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]] 
```

如果我们使用索引进行测试，它可以正确读取由 2 行和 2 列组成的矩阵：

```
array3[0][1]
[4, 5, 6]

array3[1][1]
[10, 11, 12] 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T08:31:42.090

如果文件只是由制表符分隔的数值，请尝试使用 csv 库： [http](http://docs.python.org/library/csv.html) ://docs.python.org/library/csv.html （您可以将分隔符设置为 '\t'）

如果您有一个文本文件，其中每一行代表矩阵中的一行，并且整数由空格\制表符分隔，并由 'arrayname = [...]' 语法包裹，您应该执行以下操作：

```
import re
f = open("your-filename", 'rb')
result_matrix = []
for line in f.readlines():
    match = re.match(r'\s*\w+\s+\=\s+\[(.*?)\]\s*', line)
    if match is None:
        pass # line syntax is wrong - ignore the line
    values_as_strings = match.group(1).split()
    result_matrix.append(map(int, values_as_strings)) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-11-28T03:22:13.323

a=np.array([[1,2,3],[4,5,6]])

a.tolist()

上面提到的 tolist 方法将返回嵌套的 Python 列表

# php - PHP PDO 未命名的绑定变量与令牌数不匹配

> ID：12020874
> 
> 赞同：0
> 
> 时间：2012-08-18T17:48:37.143
> 
> 标签：php, mysql, exception, pdo

我尝试使特定的 MySQL 查询与 PDO 未命名的占位符一起工作，我怀疑这个问题可能与第三个问号周围的“”有关，但我就是想不通。

我得到了异常：'无效的参数号：绑定变量的数量与令牌的数量不匹配'

为了便于阅读，这里去掉了函数的相关部分，try-catch之类的。在我将其更改为 PDO-MySQL 之前，使用包含简单字母数字字符串的 $column 和 $mytype 调用函数，这些字符串在早期的纯 MySQL 代码中运行良好，所以它们应该没问题。

```
define('SQL_TABLE', 'mytable');

function listThem($column, $mytype) {

   # These lines succeed
   $databaseHandle = new PDO('mysql:host=' . SQL_HOST . ';dbname=' . SQL_DATABASE, SQL_USER, SQL_PASSWORD);
   $databaseHandle->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

   # The following three lines cast the exception
   $input = array(SQL_TABLE, $column, $mytype);
   $statementHandle = $databaseHandle->prepare('SELECT *, ((100 * likes) / (dislikes + 1)) '
      . "AS rating FROM ? WHERE ? REGEXP '?' ORDER BY rating DESC;");
   $statementHandle->execute($input);

   # . . .  more code here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:59:49.627

您不能使用准备好的语句将表或字段名称绑定为参数。参数绑定仅适用于值。

您需要将它们构建到字符串中。只要确保正确过滤值即可。

此外，您不需要使用“？”，绑定参数可以解决这个问题。

# html - 怪癖模式困境

> ID：12020876
> 
> 赞同：0
> 
> 时间：2012-08-18T17:48:57.467
> 
> 标签：html, quirks-mode

我正在尝试编写一个 js 小部件，它将显示在不同的网站上。问题是，很多时候，小部件将在不会提供正确文档类型声明的网站上使用，因此将以 quirksmode 呈现页面。当小部件以 quirksmode 呈现时，UI 会中断。我如何编写在怪癖模式和标准模式下都一样的 HTML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:52:53.787

您无法控制主机站点使用的模式，但您可以使用`iframe`其中呈现小部件的模式。

# java - 每个线程使用唯一 ID 并将其释放以供重用

> ID：12020878
> 
> 赞同：1
> 
> 时间：2012-08-18T17:49:23.833
> 
> 标签：java, multithreading, synchronization

下面是其中的代码`run method`，我总是试图同时通过制作 a 来获取它`unique id from the availableExistingIds`，但在某些情况下我发现，我正在获取并且 id 是我认为任何时候都不应该出现的情况。`releasing``linked list order``NoSuchElementException``zero few times`

```
class IdPool {
    private final LinkedList<Integer> availableExistingIds = new LinkedList<Integer>();

    public IdPool() {
        for (int i = 1; i <= 1000; i++) {
            availableExistingIds.add(i);
        }
    }

    public synchronized Integer getExistingId() {
        return availableExistingIds.removeFirst();
    }

    public synchronized void releaseExistingId(Integer id) {
        availableExistingIds.add(id);
    }
}

class ThreadNewTask implements Runnable {
    private IdPool idPool;
    private int id;

    public ThreadNewTask(IdPool idPool) {
        this.idPool = idPool;
    }

    public void run() {
        try {
            id = idPool.getExistingId();
            //Anything wrong here?  
                    if(id==0) {
                        System.out.println("Found Zero");
                    }
            someMethod(id);
        } catch (Exception e) {
            System.out.println(e);
        } finally {
            idPool.releaseExistingId(id);
        }
    }

    // This method needs to be synchronized or not?
            private synchronized void someMethod(Integer id) {
                System.out.println("Task: " +id);
                // and do other calcuations whatever you need to do in your program
            }
} 
```

**问题陈述：-**

如何`zero id case`在我的代码中避免这种情况？我可以得到 id = 0 的一种情况是 id 池耗尽（空）。发生这种情况时，该行：

```
id = idPool.getExistingId(); 
```

将失败并带有`NoSuchElementException`. 在这种情况下，finally 块将运行：

```
idPool.releaseExistingId(id); 
```

但是 id 仍然会`default value of 0`因为第一行失败而得到它。所以我最终“释放”`0`并将其添加回 id 池，即使它从未在池中开始。然后以后的任务可以合法地取 0。这就是我不需要的。谁能建议我如何在我的代码中克服这种情况？我总是希望 id 应该在`1 to 1000`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:00:10.087

你为什么不修改你的代码，这样当没有可用的 id 时它不会崩溃，而是等待一个可用？

否则，每次你有太多线程同时工作时，池都会被耗尽，你将不得不处理很多失败的线程。同步工作也会自动为您处理。

编辑：这是修改后的代码

```
class ThreadNewTask implements Runnable {
  private BlockingQueue<Integer> pool;
  private int id;

  public ThreadNewTask(BlockingQueue<Integer> pool) {
    this.pool = pool;
  }

  public void run() {
    try {
        id = pool.take();
        someMethod(id);
    } catch (Exception e) {
        System.out.println(e);
    } finally {
        pool.offer(id);
    }
  }

  private void someMethod(Integer id) {
    System.out.println("Task: " +id);
            // and do other calcuations whatever you need to do in your program
  }
} 
```

然后你用这样的东西初始化池：

```
LinkedList<Integer> availableExistingIds = new LinkedList<Integer>();
for (int i = 1; i <= 1000; i++) {
  availableExistingIds.add(i);
}
BlockingQueue<Integer> pool = new ArrayBlockingQueue<Integer>(1000, false, availableExistingIds); 
```

# python - Python：将文件转换为 base64 编码

> ID：12020885
> 
> 赞同：27
> 
> 时间：2012-08-18T17:49:58.303
> 
> 标签：python

这是我的代码：

```
import base64

with open('/Users/Bob/test.txt') as f:
    encoded = base64.b64encode(f.readlines())
    print(encoded) 
```

我以[base64 文档](http://docs.python.org/library/base64.html)为基础。但是，当我尝试使用 Python 2.7.1 和 Python 3.2.2 运行它时，出现错误：

```
 import base64
  File "/Users/Bob/test.txt'", line 4, in <module>
    encoded = base64.b64encode(f.readlines())
AttributeError: 'module' object has no attribute 'b64encode' 
```

为什么找不到`b64encode`属性？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-18T17:50:47.470

您有一个名为的脚本`base64.py`，它隐藏了 stdlib 模块。重命名它。

# java - Arrays.asList(int[]) 如何返回 List ?

> ID：12020886
> 
> 赞同：16
> 
> 时间：2012-08-18T17:50:10.700
> 
> 标签：java

在做简单的程序时，我注意到了这个问题。

```
int[] example = new int[10];
List<Integer> exampleList = Arrays.asList(example);// Compilation error here 
```

编译错误返回为`cannot convert from List<int[]> to List<Integer>`. 但是`List<int>`在java中是不允许的，为什么会出现这种编译错误呢？

我不是在这里质疑自动装箱，我只是想知道如何`Arrays.asList`返回`List<int[]>`。

asList 实现是

```
public static <T> List<T> asList(T... a) {
return new ArrayList<T>(a);
} 
```

所以它将 int[] 视为 T 这就是发生这种情况的原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T17:53:29.223

中的基础整数没有自动自动装箱`Arrays.asList`。

*   `int[]`实际上是一个对象，而不是一个原始的。

*   这里`Arrays.asList(example)`返回`List<int[]>`。`List<int>`确实是无效的语法。

*   你可以使用：

    List<Integer> exampleList = Arrays.asList(ArrayUtils.toObject(array));

    使用 Apache Commons `ArrayUtils`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:36:41.357

签名`<T> List<T> asList(T... os)`涉及泛型类型`T`。泛型类型的范围仅涵盖引用类型（包括数组类型），而不包括原始类型。因此在调用`Arrays.asList(ints)`中只能解析为.`int[] ints``T``int[]`

在更高级别上， 的目的`Arrays.asList`是提供数组的**列表视图**。这意味着数组保持不变，其元素可通过实现的对象获得`List`。但是，`List`s 只能包含对象，而您的数组包含原始`int`s。这使得该数组无法通过`List`接口公开。

无论如何，如果您正在寻找一种优雅的语法来创建列表`Integers`，请编写`Arrays.asList(1,2,3)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T18:04:50.663

`Arrays.asList(...)`完美地将对象数组转换为这些对象的列表。

此外，`Arrays.asList(...)`在 Java 5 中使用 varag 构造定义，或者，换句话说，它可以接受未定义数量的参数，在这种情况下，它将所有这些参数视为数组的成员，然后返回`List`包含这些元素的实例。

```
List<Object> objList = Arrays.asList(obj1, obj2, obj3); 
```

这意味着您可以创建一个包含单个元素的列表：

```
List<Object> objList = Arrays.asList(obj1); 
```

由于`List<int>`在 Java 中是不允许的，因此当您使用`int[]`数组作为参数时，`Arrays.asList`它会将其视为列表的单个元素，而不是`int`. 这是因为数组在 Java 中本身就是对象，而`int`（和任何其他原语）不是。

因此，在转换原始数组时，`Arrays.asList`将尝试返回原始数组列表：

```
List<int[]> intArrayList = Arrays.asList(new int[]{ 1, 2, 3 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T18:02:17.753

数组是java中的对象，而不是原始类型。请注意，它说的是`List<int[]>`(int-arrays 列表)，而不是`List<int>`.

# ios - 如何在 Xcode 4.1.1 中拥有多个横向视图

> ID：12020892
> 
> 赞同：0
> 
> 时间：2012-08-18T17:51:06.563
> 
> 标签：ios, objective-c, uiviewcontroller, orientation, landscape

好的，所以我想要 3 个视图，并且所有视图都是横向的，但我希望其中 2 个仅处于横向，并且我希望其中仅 1 个处于纵向。当我这样做时，他们都以肖像形式出现。我正在使用故事板。

我在 .m 文件中有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeLeft)
        return YES;

    return NO;
} 
```

我将它设置为目标和 plist 中的左侧横向，我有“初始界面方向”和“支持的方向横向左侧”。我已经尝试了一切，但没有任何效果，请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:50:29.693

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight);

} 
```

将此添加到您希望在横向模式下拥有的每个视图控制器。希望这会帮助你。

# heroku - heroku 和域名约定

> ID：12020896
> 
> 赞同：1
> 
> 时间：2012-08-18T17:51:21.160
> 
> 标签：heroku, dns

（尝试服务器故障，所以要在这里尝试）

[嗨，我最近在http://davidmjohnson.me](http://davidmjohnson.me)上设置了我的 octopress 博客。这个域工作正常，但是当我尝试[http://www.davidmjohnson.me](http://www.davidmjohnson.me)时，我得到一个“heroku no app found”。为什么www不工作。非常感谢您的解释。我在 dnsimple 购买了我的域名。我是否需要将重定向从“http://www.dav...”添加到“http://dav...”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:01:32.247

我猜你需要在 heroku CLI 应用程序中配置这个域（和任何子域）（相当于 ssh 进入机器并更改 nginx/apache 位置/虚拟主机配置）。

我看到他们在参考文献中有一个关于此的条目： [https ://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

[从文档中](https://devcenter.heroku.com/articles/custom-domains#subdomains-wwwmydomaincom)详细说明：

> 子域 (www.mydomain.com)
> 
> 对于您要设置的每个子域，使用将子域指向适用的 Heroku 主机名的 CNAME 记录配置您的 DNS 提供商。
> 
> 如果应用程序在 Cedar 上，则将子域 CNAME 到 myapp.herokuapp.com 如果是 Bamboo，则 myapp.heroku.com
> 
> **在 DNSimple**中，Cedar 应用程序的 CNAME 记录条目如下所示： ![在此处输入图像描述](../Images/aecae1a2524e92de574fceef5699bf17.png)
> 
> 您可以使用 host 命令确认您的 DNS 配置正确：$ host www.example.com
> 
> www.example.com 是 myapp.herokuapp.com 的别名。
> 
> myapp.herokuapp.com 是 ar.herokuapp.com 的别名。
> 
> ar.herokuapp.com 是 argon-stack-1879049447.us-east-1.elb.amazonaws.com 的别名。
> 
> argon-stack-1879049447.us-east-1.elb.amazonaws.com 的地址为 107.20.157.144
> 
> ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:59:23.793

其实，应该是反过来的。将 CNAME 指向 Heroku 应用程序是更好的做法，因为 Heroku 应用程序没有真正的“静态”IP。由于裸域需要 A 记录，将裸域指向 Heroku 应用程序会使一切变得不那么稳定。所以最好的做法是将你的裸域转发到一个“www”子域，然后将“www”CNAME 指向你的 Heroku 应用程序。

Heroku 在[这里](https://devcenter.heroku.com/articles/custom-domains)详细介绍了这一点。

# xcode4.4 - 在硬盘上哪里可以找到 Xcode 开发人员库？

> ID：12020900
> 
> 赞同：1
> 
> 时间：2012-08-18T17:51:40.487
> 
> 标签：xcode4.4

我在哪里可以在硬盘上找到 Xcode 4.4 中的开发人员库？谢谢！！！我想复制它并保存在闪存驱动器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:27:42.877

我找到了！~/库/开发者/共享/文档/DocSets/

# html - 如何国际化html页面

> ID：12020901
> 
> 赞同：4
> 
> 时间：2012-08-18T17:52:04.740
> 
> 标签：html, spring, internationalization, resourcebundle

有没有办法根据用户区域设置国际化 html 页面？我有一个使用 html 页面开发的网站，但现在我被要求用 4 种不同的语言将该网站国际化。

我知道如何通过资源包使用 Spring Framework 来做到这一点，但我想知道是否有办法使用 HTML 页面做类似的事情，这样你只需要编写考虑国际化的代码并继续添加要选择的资源包基于用户访问网站时的用户区域设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-08T16:21:20.540

我刚刚开发了一个稍微轻一点的解决方案，使用 CSS 内容属性： [https](https://github.com/k-yak/stati18n) ://github.com/k-yak/stati18n 看看，所有信息都在自述文件中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T08:15:23.790

这个怎么样？

[http://code.google.com/p/jquery-i18n-properties/](http://code.google.com/p/jquery-i18n-properties/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T16:16:33.240

或者这个怎​​么样？

[国际化在 JavaScript 中是如何工作的？](https://stackoverflow.com/questions/3084675/internationalization-in-javascript)

如果你不能做 Javascript，你将不得不使用某种形式的模板或调度。那分别是：

1.  使用 JSP 和 Spring 的 Message taglib（或任何其他支持 i18n 的模板语言）
2.  对于每个语言环境，您将复制一个语言环境目录中的所有 HTML 页面，然后根据该语言环境分派到该目录（我不推荐这样做）。

我个人所做的是使用几乎不是模板语言的 jMustache，然后对于每个页面（或许多页面）我将拥有请求控制器，它将请求区域设置的所有翻译加载到我提供给 jMustache 的 Map 对象中（参见选项我在这里回答的 2 个：[https](https://stackoverflow.com/a/10004113/318174) ://stackoverflow.com/a/10004113/318174 ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T15:58:31.063

如果您保持网站静态，您最终将拥有网站的多个副本，除非您可以使用 javascript 动态修改页面。但是，您还希望 URL 中包含语言代码以保存状态并有利于 SEO。

我开发了这个免费的解决方案。[http://www.sitetran.com/](http://www.sitetran.com/)

# bash - 不区分大小写的参数扩展

> ID：12020902
> 
> 赞同：2
> 
> 时间：2012-08-18T17:52:36.067
> 
> 标签：bash

我的问题是，我尝试在变量的开头剥离一个字符串。我已经完成`shopt -s exglob`了扩展模式匹配。

```
 a="HelloDolly"
    echo "${a#[A-Z]+([a-z])}" 
```

我认为这`+([a-z])`意味着尽可能多的小写字母。那`[A-Z]+([a-z])`应该匹配`Hello`

应该返回多莉，但我`lloDolly`回来了。如果`/`试一试`#`_

```
 echo "${a/[A-Z]+([a-z])}" 
```

我什么也得不到。看起来参数扩展不区分大小写。

感谢所有能给我提示的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:49:48.580

使用单个 #，您可以获得最短的匹配。“他”是一个大写字母和一个或多个小写字母的最短匹配。切换到双#以获得最长的匹配“你好”

```
echo "${a##[A-Z]+([a-z])}" 
```

为了避免基于语言环境的字符范围解释问题，请改用字符类：

```
echo "${a##[[:upper:]]+([[:lower:]])}" 
```

# python - Python 中的“图像服务网络框架”？

> ID：12020906
> 
> 赞同：2
> 
> 时间：2012-08-18T17:53:12.260
> 
> 标签：python, image, frameworks, webserver, static-files

我正在计划一个 iOS 应用程序，它需要一个能够有效地提供图像文件并根据它获得的请求执行一些动态操作的服务器后端（例如读取和写入数据存储，例如 Redis）。我最满意，因此更喜欢用 Python 编写后端。

我查看了很多 Python Web 框架/服务器选项，其中包括 Flask、Bottle、static 和 Tornado。共同点似乎是它们要么只支持提供静态文件作为开发时的便利，不鼓励在生产中使用它，要么是高效的静态文件服务器，但并不真正适合动态框架类的东西。这并不是说它们不能充当后端，但乍一看，它们似乎都有些尴尬。

简而言之，我需要一个专门提供 JPEG 而不是生成 HTML 的 Web 框架。我很确定不存在这样的事情，但现在我希望有人可以提出一个解决方案，该解决方案可以在不以它们不适合的方式弯曲使用过的 Python 应用程序的情况下工作。

**规格和实际要求**

我将提供给客户端的图像存在于文件系统中的浅层目录层次结构中。实际的文件名对客户端是不可见的。服务器将在启动时读取目录层次结构，为每个文件分配一个数字 ID，并将请求路由到控制器方法，然后实际为图像文件提供服务。以下是客户希望在不同情况下访问图像的一些示例：

1.  随机（示例 URL 路径`/image/random`：）
2.  随机，每个文件只有一次（`/image/random_unique`），当文件用完时会产生一些合适的非 200 HTTP 状态码
3.  在任一方向上依次（`/image/0`,`/image/1`等`/image/2`）

等等。此外，还有一些 URL 端点，用于诸如评级、图像信息和其他元数据，以及一些特定于客户端的信息（客户端将向服务器“注册”，因此也需要一些逻辑）。这些数据很可能存在于 Redis 数据存储中。

总而言之，后端需要擅长提供 image/jpeg 和 application/json（它也会生成）。可扩展性和并发性要求是适度的，至少从一开始就是这样（这不是 App Store 应用程序，用于临时或企业分发）。

我不希望应用程序依赖重定向。也就是说，我不想要一个模型，其中对 URL 的请求将返回重定向到另一个由 nginx 作为单独的静态文件服务器支持的 URL，只留下 Python 后端的图像选择逻辑。相反，来自客户端的 URL 请求应始终返回 image/jpeg，并在必要时在自定义 HTTP 标头中包含元数据。我指定它是因为它是一种避免从 Python 提供静态文件的方法，我想到了，其他人也可能想到 ;-)

鉴于这些信息，您认为哪种解决方案是好的选择，为什么？或者这是我需要为现有项目编写重要扩展的东西？

* * *

**编辑**：我一直在考虑这个问题。我不希望重定向，因为它们需要的多个请求固有的延迟，另外我想从客户端抽象出文件名，但我想知道这样的事情是否可能：

![建议的请求流图](../Images/a3d1f8e4ae79a10887112f53b79b7a3c.png)

这是不言自明的，但想法是 Python 程序由 nginx（或任何服务角色）提供请求信息，仔细考虑，然后告诉 nginx 使用文件系统中的特定文件响应客户端的请求. 它这样做了。客户端对于请求是如何完成的并不明智，它只是接收到具有正确内容类型的响应。

在我看来，这将是非常理想的，但有可能吗？如果不使用 nginx，也许还有别的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:52:38.450

`I don't want a model where a request to a URL would return a redirect to another URL that is backed by, say, nginx as a separate static file server, leaving only the image selection logic for the Python backend.`

我认为 Nginx 用于提供静态服务，而 python 用于确定图像 url 是[更好的解决方案](https://serverfault.com/questions/331256/why-do-i-need-nginx-and-something-like-gunicorn)。

不过，如果您不想这样做，我建议您使用任何 Python Web 框架（如 Django）并编写您的`models`并将它们转换为`REST resources`（例如使用[django-tastypie](https://github.com/toastdriven/django-tastypie/)）和/或返回一个`base64`编码图像，然后您可以在其中解码你的`iOS`客户。

参考：

[解码 Base64 图像](https://stackoverflow.com/questions/2323128/python-convert-string-in-base64-to-image-and-save-on-filesystem)

[TastyPie](https://stackoverflow.com/questions/10153355/how-to-make-tastypie-give-the-url-of-a-file-instead-of-its-path)默认返回路径，您可能需要做额外的工作才能将图像 blob 存储在表中或编写更多代码以返回`base64`编码的图像字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:59:41.623

我已经使用 Django 一年多了，它是我用来做所有指甲的锤子。您可以使用一些数据库图像存储和 django 的内置 orm 和 url 路由（使用正则表达式）来做到这一点。如果您将图像存储在数据库中，您将自动获取唯一 ID 集。根据[this](https://stackoverflow.com/questions/3801379/how-can-i-use-redis-with-django) stackoverflow answer，您可以将redis与django一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:37:34.643

你可能想看看[Tornado](http://www.tornadoweb.org/)或[Twisted](http://twistedmatrix.com/trac/)等异步服务器之一。

# android - 从 Windows 读取 android 短信中的消息

> ID：12020907
> 
> 赞同：2
> 
> 时间：2012-08-18T17:53:12.197
> 
> 标签：android, windows, windows-7, android-ndk

我正在尝试从 Win 7 机器读取存储在我的 Android 手机中的 SMS（开始）。我还没有弄清楚我可以/应该使用的 API/接口。我可以接受任何语言。希望有人能指出我正确的方向。它不需要像 API 那样直接。我也可以接受某种黑客攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:00:01.637

我想到了两种解决方案，

1.  如果您的手机是`rooted`，请使用`adb pull`，`SMS Database`它在`Contacts`包装中

2.  编写一个带有 a 的 Android 应用程序`BroadcastReceiver`来监听新消息。当一个新的出现时，将其信息记录到一个文件中。用于`adb`获取此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:29:39.380

我认为没有任何 API 可以读取消息。

也许你可以做到这一点。

编写一个将打开 Localsocket 并进行监听的应用程序。然后通过 adb，您必须从 Windows 7 打开同一个套接字。您必须通过此套接字传输数据。

# java - 如何在特定的时间内在单独的线程中运行任务并返回结果？

> ID：12020909
> 
> 赞同：0
> 
> 时间：2012-08-18T17:53:36.353
> 
> 标签：java, time, concurrency

如何在特定时间内运行线程并在时间过去时返回一些结果？

到目前为止，我能想到的最好的解决方案是手动测量时间。但也许有更优雅、开箱即用的解决方案？ 

我有一个算法，可以在每次迭代中改进以前的解决方案。我想在预定义的时间内在单独的线程中运行此代码。当时间过去时，应该返回最好的（最新的）解决方案。

由于我想返回解决方案，我不能只使用[`Future#get(long timeout, TimeUnit unit)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)- 它会导致`TimeoutException`. 在“控制”线程一段时间后中断线程也是如此 - 在这种情况下，`Future`将被取消并返回`null`。

我目前的解决方案如下：

定时器逻辑：

```
private class ExecutionTimer {

    private final long executionTimeLimit;

    private long startTime;

    // accepts execution time limit in _miliseconds_
    public ExecutionTimer(final int executionTimeLimit) {
        this.executionTimeLimit = TimeUnit.MILLISECONDS.toNanos(executionTimeLimit);
    }

    public void start() {
        this.startTime = System.nanoTime();
    }

    public boolean hasElapsed() {
        return (System.nanoTime() - startTime) >= executionTimeLimit;
    }
} 
```

...和工作线程：

```
 private class WorkerThread implements Callable<Double> {

        private final ExecutionTimer executionTimer;

        public WorkerThread(final int executionTimeLimit) {
            this.executionTimer = new ExecutionTimer(executionTimeLimit);
        }

        @Override
        public Double call() throws Exception {
            executionTimer.start();

            double partialSolution = 0;
            while (!executionTimer.hasElapsed()) {
                // let's imagine that here solution is improved ;)
                partialSolution = new Random().nextDouble(); 
            }
            return partialSolution;
        }
    } 
```

**编辑：** 工作线程可以无限期地工作而不会从外部中断它 - 这很好，因为算法总是可以改进以前的解决方案（当然经过一些显着的时间改进相对较小）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:56:12.457

您可以将中间结果存储在共享线程安全变量中（例如`volatile double`在您的情况下） - 当您的未来超时时，您可以从该变量中检索最新的计算值。

换句话说：

*   如果`future.get(...)`返回一个值，则使用它
*   如果您得到 a `TimeoutException`，则通过调用 检索该值，该值`yourWorkerThread.getLatestValue();`返回`volatile double latestValue`在每个循环中更新的 a ，而不是您的 local `partialSolution`。

或者，[这篇文章](https://stackoverflow.com/questions/10580646/how-to-stop-excuting-a-method-after-say-1-sec-of-time)指向 Guava 库和其他解决方案（所有这些都归结为我评论中讨论的 2 个选项）。请注意，[Guava 在内部](http://grepcode.com/file/repo1.maven.org/maven2/com.google.guava/guava/r09/com/google/common/util/concurrent/SimpleTimeLimiter.java#130)使用带有超时的未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:35:06.853

考虑使用[Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html) & [TimerTask](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)

```
import java.util.TimerTask;
import java.util.concurrent.Callable;
import java.util.concurrent.atomic.AtomicBoolean;

public class Solver implements Callable<Double> {

    private final AtomicBoolean running = new AtomicBoolean(true);

    public void stop() {
        this.running.set(true);
    }

    @Override
    public Double call() throws Exception {
        Double answer = null;
        while (this.running.get()) {
            answer = keepImproving();
        }
        // TODO Auto-generated method stub
        return answer;
    }

}

class Schedular extends TimerTask {

    private final Solver solver;

    public Schedular(Solver solver) {
        this.solver = solver;
    }

    @Override
    public void run() {
        this.solver.stop();
    }

} 
```

使用类似下面的东西

```
final Solver solver = new Solver();
Schedular schedular = new Schedular(solver);
final Timer timer = new Timer();
timer.schedule(schedular, 0, TimeUnit.MINUTES.toMillis(1));

ExecutorService executor = // get a executor somehow
final Future<Double> future = executor.submit(solver);
final Double answer = future.get();
System.out.println(answer); 
```

* * *

这个想法是使用`Timer`&`TimerTask`触发停止信号，以便算法停止改进答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:18:55.943

我建议使用生产者-消费者模式：

负责培养结果的算法不断产生新的更好的结果，并将它们放入共享线程安全资源中。

对此结果感兴趣的客户端会在每个预定义的时间间隔使用此资源，在您的问题中设置为超时。

资源本身可以是一个流（例如 BlockingQueue）或单个变量。

这具有很容易推理的优点，它定义了清晰的边界并且非常灵活。例如：客户端只要完全没有结果就可以阻塞，或者只要没有新的和改进的结果就可以阻塞。生产者消费者模式的所有变体，只需调整生产者通知条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T17:57:58.243

您可以使用普通的 Future.get()，它会无限期地等待。

# c# - 指向非托管 C++ 代码的 CLI 指针

> ID：12020914
> 
> 赞同：2
> 
> 时间：2012-08-18T17:54:12.087
> 
> 标签：c#, c++, wrapper, command-line-interface

我正在开发我的第一个 C++/CLI 包装器，并且对 wrt 指针感到非常困惑。在我拥有的特定项目中，我试图包装一个非托管 C++ dll，以便可以在 C# 应用程序中使用它。这里有两个目标：（1）能够在我的应用程序中使用该库，以及（2）学习这样做。在这个网站和谷歌上进行了数小时的搜索，得到了一堆接近的答案；我似乎无法一路走到那里。我试图合并的非托管库是键值存储“LevelDB”（我知道至少有一个 .NET 包装器，但就像我说的那样，我正在尝试学习这一点）。

下面的代码是 CLI 包装类的开头，*就像用非托管代码一样编写。*也就是说，这在功能上是我想要完成的。毫不奇怪，这会产生以下编译器错误：

```
cannot convert parameter 3 from 'cli::interior_ptr<Type>' to 'leveldb::DB **' 
```

当我开始时，我天真地认为我可以/应该用固定指针替换 DB* 指针，比如

```
pin_ptr<leveldb::DB*> db 
```

但这会产生类似的错误并且不起作用。与内部指针和句柄的其他组合（如果我理解正确，这里不适用，因为库是非托管的）也没有工作。我将不胜感激任何指出我正确方向的建议。任何对好的帖子/文章的引用也会很棒，但请包括一两个词来说明如何适应我的情况，因为在阅读了大量的文章之后，我似乎离得更近了。谢谢！

示例包装类：

```
#pragma once
#include "leveldb/db.h"

using namespace System;

namespace Wrapper
{
    public ref class DBWrapper 
    {
        leveldb::DB* db;

    public:
        DBWrapper()
        {
            leveldb::Options options;
            options.create_if_missing = true;
            leveldb::Status status = leveldb::DB::Open(options, "/tmp/testdb", &db);
        }

        ~DBWrapper() 
        {
            delete db;
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T18:37:50.537

使用局部变量：

```
DBWrapper()
{
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB* local_db(nullptr);
    leveldb::Status status =leveldb::DB::Open(options, "/tmp/testdb", &local_db);
    db = local_db;
} 
```

正在构造的对象（由 指向`this`）可以被垃圾收集器移动，因此成员变量没有固定地址。

# iphone - 来自文本字段的钛移动日期选择器

> ID：12020915
> 
> 赞同：1
> 
> 时间：2012-08-18T17:54:30.573
> 
> 标签：iphone, titanium

我想做以下事情：当人们点击一个文本字段时，他们会看到一个日期选择器。他们点击顶部的“完成”按钮，日期选择器消失，他们又回到了表单上。如何使用适用于 iphone ios 的钛移动来完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T06:21:24.810

您可以使用 Textbox AddeventListener 和 Animation 功能。喜欢

```
var donebtn = Ti.UI.createButton({
title : "Done",

});

var toolbar_pick    = Ti.UI.iOS.createToolbar({
      backgroundColor : "#f00",
      bottom        : -50,
      items       :[donebtn],
      barColor      :'#000',

});

var _date = Ti.UI.createPicker({
    type:Ti.UI.PICKER_TYPE_DATE,
    minDate : new Date,
    bottom :-320 ,
});
donebtn.addEventListener('focus',function(){
     _date.animate({bottom:-270, duration: 500});
     toolbar_pick.animate({bottom:-50, duration: 500});

});
textbox.addEventListener('click',function(){
    _date.animate({bottom:0, duration: 500});
    toolbar_pick.animate({bottom:266, duration: 500});

});
win.add(_date);
win.add(toolbar_pick); 
```

只是例如可以使用自己的要求。

捷运

# java - 如何禁用 JXTaskPane

> ID：12020917
> 
> 赞同：1
> 
> 时间：2012-08-18T17:55:04.787
> 
> 标签：java, swingx

所以我有 3 个可折叠的 JXTaskPanes，我想要做的是一次只显示一个任务窗格，即如果用户单击任务窗格 #1、#2 和 #3 折叠并且 #1 展开等。

我无法将 actionlistener 添加到 JXTaskPanes，因为它不存在。我尝试了鼠标侦听器，但它非常有问题（并不总是有效：有时它不会是其中之一）

基本上，我需要一种方法，例如，在展开 #1 时折叠任务窗格 #2 和 #3。
有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:52:41.070

对这个问题很好奇，我做了更多的谷歌搜索，偶然发现了[这个](http://layerxml.wordpress.com/2010/09/29/auto-collapsing-jxtaskpane/)可能感兴趣的博客

# javascript - 在 Javascript 中检查自定义 ActiveX 插件

> ID：12020918
> 
> 赞同：0
> 
> 时间：2012-08-18T17:55:15.920
> 
> 标签：javascript, internet-explorer, activex

我正在开发一个 Web 应用程序，它安装插件并检查我构建的更大 Web 应用程序的其他要求。但是，我在检查自定义 ActiveX 控件时遇到了问题。我可以通过尝试使用标记对其进行实例化来检查它`<OBJECT>`，但是如果用户缺少它，它会尝试安装插件，而我只需要返回一个 JavaScript 布尔值，无论控件是否已安装。我一直在寻找一个简单的解决方案，但我找不到任何有效的方法。任何想法，将不胜感激。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:06:14.757

你可以说：

```
try {
    new ActiveXObject(...);
} catch {
    // Not installed. 
} 
```

[http://msdn.microsoft.com/en-us/library/7sw4ddf8(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/7sw4ddf8(v=vs.94).aspx)

# php - 在CPanel中安装pear包

> ID：12020921
> 
> 赞同：0
> 
> 时间：2012-08-18T17:55:30.310
> 
> 标签：php, linux, hosting, cpanel

我在我的 CakePHP 应用程序中使用 PHP PEAR 包的一些功能，例如`Mail`，`Image_Text`等等。

我从 godaddy 那里得到了一个 linux 主机。当我将我的应用程序部署到服务器时，它没有工作。如何在服务器上安装 PHP Pear 包及其扩展？

我是否必须联系支持人员，或者我可以在最后完成？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:11:57.203

如果你有一个带有 cPanel/WHM 和 Go Daddy 的服务器，你可以通过 EasyApache 添加 Pear。

1.  以“root”用户身份登录 WHM。
2.  在查找框中键入简单。
3.  单击 EasyApache（Apache 更新）。
4.  保留默认值，然后单击根据配置文件开始自定义。
5.  保留默认值，然后单击下一步。
6.  保留默认值，然后单击下一步。
7.  保留默认值，然后单击下一步。
8.  单击详尽的选项列表。
9.  单击 pear，然后单击保存并构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:46:01.407

您需要先安装 pear。将需要 SSH 访问权限，否则您需要联系您的主机为您安装它。cPanel 在 CentOS 上运行，网上有很多教程可以在 CentOS 上安装 Pear。例如“yum install pear”。

访问 WHM 也可能会有所帮助。（cPanels 帐户控制器）。

[http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/PhpPearPackages](http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/PhpPearPackages)

# rspec2 - 如何获取我的规范中找到的 minitest capture_io 方法？

> ID：12020925
> 
> 赞同：1
> 
> 时间：2012-08-18T17:56:07.220
> 
> 标签：rspec2, testunit, minitest

这是我的`spec/helper.rb`文件：

```
require 'minitest/autorun'
require 'minitest/spec'
require_relative '../lib/launcher'

class MiniTest::Spec
  include MiniTest::Assertions
end 
```

这是规范文件：

```
require 'helper'

describe Launcher do
  it "should get the stdout" do
    out, err = capture_io do
      warn "You did a bad thing"
    end
    err.should =~ /bad/
  end
end 
```

但是当我运行规范时：

```
± rake spec                                                                                                          
/Users/millisami/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S rspec ./spec/launcher_spec.rb -Ispec:lib
F

Failures:

  1) Launcher should be a launcher for cloud
     Failure/Error: out, err = capture_io do
     NoMethodError:
       undefined method `capture_io' for #<RSpec::Core::ExampleGroup::Nested_1:0x000001012a4840>
     # ./spec/launcher_spec.rb:5:in `block (2 levels) in <top (required)>'

Finished in 0.00044 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/launcher_spec.rb:4 # launcher should be a launcher for cloud
rake aborted!
/Users/millisami/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S rspec ./spec/launcher_spec.rb -Ispec:lib failed

Tasks: TOP => spec 
```

但是当我使用默认的 MiniTest::Unit 方式执行此操作时，它有效吗？为什么不是规范方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:53:42.300

您的 spec_helper.rb 应该看起来更像这样：

```
require 'minitest/unit'
RSpec.configure do |c|
  c.include MiniTest::Assertions
end 
```

# c# - 从文本中获取某个字符串

> ID：12020928
> 
> 赞同：0
> 
> 时间：2012-08-18T17:56:40.137
> 
> 标签：c#

你如何从这些数据中得到这个字符串？（粗体部分是我想要的）

```
Id: 20 - Cow Amt: **10**

Id: 25 - Example Amt: **5** 
```

我制作此代码以删除除 ID 号之外的所有其他内容

```
id = id.Replace("Id: ", "")

If (id.ToString.Length > 5) Then
    id = id.Substring(0, id.IndexOf("-") - 1).Trim() 
```

但现在我也想获得 Amt: 号码。到目前为止的代码结果是这样的：

> 20

它只是打印出 id。但是你怎么得到10？所以它看起来像这样：

> 20 10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:24:43.880

尝试以下

> ```
> var subjectString = "Id: 20 - Cow Amt: 10";
> 
> string[] values = Regex.Split(subjectString, @"\D+");
> 
> foreach (string value in values)
> {
>     int number;
>     if (int.TryParse(value, out number))
>     {
>         Console.WriteLine(value);
>     }
> } 
> ```

记住要包括`using System.Text.RegularExpressions;`在顶部的参考文献中

# android - 根据屏幕大小选择最合适的布局 xml 文件

> ID：12020929
> 
> 赞同：0
> 
> 时间：2012-08-18T17:56:42.520
> 
> 标签：android, android-layout, android-widget

我想知道您是否可以根据手机屏幕的大小选择不同的布局 xml。我试着更清楚，我制作了更多的布局 xml 文件，我希望我的应用程序处理这个语句

```
setContentView (R.layout.main) 
```

首先验证显示的大小，因此您设置最合适的布局 xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:06:50.560

你看过[这个](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)页面了吗？

您可以查询设备屏幕的大小，然后选择要用于该大小屏幕的 xml 布局...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:10:52.243

您实际上可以做的是：

为每个所需的配置创建一个新文件夹，并使用限定符命名该文件夹。

如果您希望您的应用程序针对不同的屏幕尺寸具有不同的**main.xml**布局，您应该在项目中创建以下文件夹。

```
/res/layout-small
/res/layout-normal
/res/layout-large
/res/layout-xlarge 
```

在每个文件夹中都有不同的**main.xml**文件布局（或您想要的任何资源）。Android 将选择与正在运行您的应用程序的设备匹配的设备。

您甚至可以为绘图甚至语言的不同配置添加不同的资源。

更多信息：http: [//developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

# sql-server - SQL Server：分布式事务冲突

> ID：12020933
> 
> 赞同：2
> 
> 时间：2012-08-18T17:57:07.553
> 
> 标签：sql-server, distributed-transactions

给定一个 SQL 脚本：

1.  开始交易。它从服务器 X 启动
2.  从涉及表 A 的查询中选择到表 B（= 新表）
3.  将表 A 选择到表 C 中（= 新表）
4.  犯罪。

没有错误发生。这还不是分布式事务，因为一切都发生在一台服务器上。

现在让我们说 3\. 变成：

1.  将表 A 选择到表 C 中，但表 C 在不同的服务器上（我必须这样做，`EXECUTE('SELECT * INTO ...') AT [remoteserver]`因为 FROM 子句中允许使用 3 前缀语法，但 INTO 子句中不允许使用）

现在 SQL Server 告诉我这条语句 (3) 与（现在分布式的）事务中的另一条语句产生了冲突。

为了向您展示错误来自哪里并证明分布式事务确实在我的设置上有效，**我现在注释掉第 2 步）**！

现在整个事情都起作用了。所以步骤 2) 使问题发生。但是步骤 2) 基本上只对表 A 和其他一些表进行连接选择以生成表 B，仅此而已。

为什么在这种情况下（在分布式事务版本中）不能顺利执行步骤 3），但相同的非分布式事务版本可以完美运行？又可能有什么冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:37:14.607

看起来查询 2 和查询 3 不兼容。要找出原因，请调查每个查询导致哪些锁定。一种方法是：

1.  开始交易
2.  运行查询 2（或 3）
3.  可以在视图中找到锁`sys.dm_tran_locks`。
4.  回滚或提交，没关系

也许您可以将生成的锁附加到您的问题中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:55:47.803

好了朋友们。发现了问题，很有意思。那是另外一回事。我没有**提到**我也创建了表A，因为我认为它与问题无关，所以：

将步骤 2) 替换为

```
2) Create Table A **with** a primary key. 
```

现在非分布式版本可以工作，分布式版本**不能**（即第 3 步）。

将步骤 2) 替换为

```
2) Create Table A with **no** primary key 
```

现在**两个**版本都可以正常工作。

但我真的不在乎，因为当我在事务**之前**的某处创建**带有**主键的表时，整个事情*也有效。*只是事务中用create table语句创建主键导致3）分布式版本不工作**。**

 ******如果有人知道为什么请写在这里:)******

# java - Java：如果我在编程时卡住了，我怎么知道在哪里查看文档？

> ID：12020934
> 
> 赞同：2
> 
> 时间：2012-08-18T17:57:30.253
> 
> 标签：java, documentation

这是我以前经历过的一个真实的例子，这让我思考和质疑这个谜团。

**之前：**我不知道如何仅通过使用类的名称来动态实例化一个类。

**之后：**我查看了别人的 Java 源代码，决心寻找与上述无关的东西，比如如何进行碰撞检测，只是偶然发现了一段代码，它正确回答了我关于如何实例化一个类的问题动态的。

有问题的代码是这样的：

```
A a = (A) Class.forName("A").newInstance(); 
```

`A`Java 源文件的名称在哪里， `A.java`.

从这里开始，我不仅对它感兴趣，而且开始怀疑，如果只给 Java 语言文档，Java 程序员如何学习所有这些。

如果他们正在练习 Java 语言，他们如何知道在文档中的何处查找？我知道新手 Java 程序员从专家 Java 程序员那里获得一些经验，但是如果专家 Java 程序员一开始不知道在哪里寻找文档，他们从哪里学到所有**这些**？

还是他们只是从第 1 页阅读到文档的末尾，并尽可能地紧跟其后，然后从那里开始？这将需要很长时间才能完成，这将是一项令人印象深刻的壮举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:11:09.903

通常你在谷歌上搜索 Java 文档……它们会将你发送到包含它的 Oracle 网站。[http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

在某些情况下，只有 API 是必需的，但是当您需要完整的示例时，您可以搜索代码示例或片段，或者您想要自行解决的问题（即“java 实例化类”）。

在动态实例化的问题上，可以做很多 ClassLoader 的事情，但最基本的例子与你找到的类似......但有一个问题。

当您在代码中引用 A 类时，jvm 会自动为您加载它。当你这样做

```
A a = (A)Class.forName("A").newInstance(); 
```

您将参考您已经掌握的 A 类。

您可以做的是创建一个您要实例化的类必须实现的接口，如下所示：

```
String classPath = ...
AInterface a = (AInterface)Class.forName(classPath).newInstance(); 
```

你从那里使用它。

但是你必须记住添加 try-catch 块，因为 newInstance 方法只会在运行时尝试实例化它时知道被引用的类是否有默认构造函数，如果没有就会有异常。

构造函数本身抛出的异常也是如此，它将被封装并返回给你。

# html - 简单的 2 列布局

> ID：12020936
> 
> 赞同：0
> 
> 时间：2012-08-18T17:57:44.543
> 
> 标签：html, css, css-float

在[这个页面](http://festivals.ie/festival/show/1/electric-picnic-2012)的底部，有两列。右栏包含推特供稿，左栏显示 YouTube 视频和评论部分。这些列由以下 HTML 和 CSS 创建

```
.leftCol {
    margin-right: 365px;
}

.rightCol {
    float: right;
    margin-bottom: 10px;
    width: 355px;
}

<div class="rightCol">
<div>

<div class="leftCol">
<div> 
```

但是由于我不明白的原因，左侧栏不会滑入右侧栏左侧的空白空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T18:05:57.083

只需`clear: both;`从`<h2 class="banner bgImage video">`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:05:44.173

`.leftCol`将您的样式更改为：

```
.leftCol {
    float: left;
    width: 365px;
} 
```

边距在左列右侧产生空间错觉。

# java - 我应该如何命名 Java 包？

> ID：12020938
> 
> 赞同：3
> 
> 时间：2012-08-18T17:57:51.270
> 
> 标签：java, github, package, sourceforge

> **可能重复：**
> [Java 中的个人/爱好项目使用什么包命名约定？](https://stackoverflow.com/questions/292169/what-package-naming-convention-do-you-use-for-personal-hobby-projects-in-java)

我正在学习 Java，但发现了一个问题。我的包裹需要一个域名，但我没有。我不想使用我的电子邮件地址。那么我应该在 SourceForge 或 GitHub 上创建一个帐户并使用它吗？如果是这样，哪一个是最好的？或者还有其他更好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:03:11.030

使用的常见命名方案如下（`|`手段或）：

`country`| `org`| `com`. `name`. `applicationName`.`subpackages`

`Name`是公司或您的名字。在`applicationName`你开始你所有的子包之后（这就是我最后的意思）例如 `util`，`ui`等等`db`

例如，如果您是来自英格兰的 John Dave，请使用`en.jdave.smartapp.ui.core.forms`. 或来自德国的 Marcus German：`de.mgerman.smartapp.ui.core.forms`等

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T18:20:55.177

一般Profession根据那里的反向站点名称使用包名称例如 **`com.site_name.applicaton_name`**

# jquery - jquery/html：针对 jquery 生成的单个 iframe 的多个链接

> ID：12020939
> 
> 赞同：2
> 
> 时间：2012-08-18T17:57:55.257
> 
> 标签：jquery, css, html, jquery-ui

我有一个使用 css/html/jquery 的基本覆盖设置，它是这样的：

```
<a class="activator" id="activator" style="" href="#">hello</a>

<div class="overlay" id="overlay" style="display:none;"></div>
<div style="display: none;" class="box" id="box">
     <a class="boxclose" id="boxclose">X</a>
      <iframe src="http://url" style="position: absolute; top: 0px; right: 0px; left: 0px; bottom: 0px;"></iframe>
</div>

     <script type="text/javascript" src="http://goo.gl/LKdBi"></script>
     <script type="text/javascript">
        $(function() {
            $('#activator').click(function(){
                $('#overlay').fadeIn('fast',function(){
                    $('#box').show('fast');
                });
            });

            $('#boxclose').click(function(){
                $('#box').hide('fast',function(){
                    $('#overlay').fadeOut('fast');
                });
            });

        });
    </script> 
```

这允许单击的链接打开一个简单的覆盖，可以通过单击 X 来关闭该覆盖。

我的问题是，我希望有多个链接可以点击打开自己的叠加层或使用相同的链接（我认为使用相同的 iframe 是可行的）。对于我正在尝试的东西，有没有更简单的方法？除了对我拥有的每个不同链接进行单独调用之外，我还无法弄清楚。

编辑：

理想情况下，我会有 5 个左右的链接，每个链接在单击时都会打开覆盖并显示它指向的 url。然后可以通过单击背景或“X”来关闭覆盖。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:02:14.820

您正在寻找[最接近的（）](http://api.jquery.com/closest/)和[下一个（）](http://api.jquery.com/next/)函数。此外，由于您将有多个链接，因此您将需要使用类。这些方面的东西应该适合你：

```
$(function() {
    $('.activator').click(function(){
        $(this).next('.overlay').fadeIn('fast', function(){
            $(this).next('.box').show('fast');
        });
    });

    $('.boxclose').click(function(){
        $(this).closest('.box').hide('fast',function(){
            $(this).closest('.overlay').fadeOut('fast');
        });
    });
}); 
```

因为你只想要一个 iframe 和覆盖。这是一个适合您的简化版本：

**HTML**：

```
<a class="activator" href="http://www.google.com/">hello</a>
<a class="activator" href="http://www.bing.com/">hello</a>

<div class="overlay" style="display:none;"></div>
<div class="box" style="display: none;">
    <a class="boxclose">X</a>
    <iframe class="frame" style="position: absolute; top: 0px; right: 0px; left: 0px; bottom: 0px;> </iframe>
</div> 
```

**Javascript**：

```
$(function() {
    $('.activator').click(function(e){
        e.preventDefault();
        $('.frame').attr("src", this.href);

        $('.overlay').fadeIn('fast', function(){
            $('.box').show('fast');
        });
    });

    $('.boxclose').click(function(){
        $('.box').hide('fast',function(){
            $('.overlay').fadeOut('fast');
        });
    });
}); 
```

[现场演示](http://jsfiddle.net/XcxYP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:02:59.607

您可以使用以下类：

```
$(function() {
      $('.activator').click(function(){
          $(this).next('.overlay').fadeIn('fast',function(){
             $(this).find('.box').show('fast');
          });
      });

      $('.boxclose').click(function(){
          $(this).parent().hide('fast',function(){
              $(this).closest('.overlay').fadeOut('fast');
          });
      });
}); 
```

# jquery - jQuery 交换 div 顺序

> ID：12020942
> 
> 赞同：0
> 
> 时间：2012-08-18T17:58:06.210
> 
> 标签：jquery

我有几个 div，我希望能够通过使用按钮重新排序。这些按钮将被称为“上移”和“下移”。

我想隐藏第一个 div 上的“上移”按钮和最后一个 div 上的“下移”按钮（如果只有一个 div，则隐藏两者）。容器内不能有 div、1、2 或多个。

HTML 看起来像这样：

```
<div id="container">
    <div id="div0">
        <button class="btn-move-up">Move up</button>
        <button class="btn-move-down">Move down</button>
    </div>
    <div id="div1">
        <button class="btn-move-up">Move up</button>
        <button class="btn-move-down">Move down</button>
    </div>
    <div id="div2">
        <button class="btn-move-up">Move up</button>
        <button class="btn-move-down">Move down</button>
    </div>
</div> 
```

我将如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T18:02:02.603

我建议：

```
$('button').click(
    function(e) {
        e.preventDefault();
        var parent = $(this).closest('div');
        if ($(this).hasClass('btn-move-up')) {
            parent.insertBefore(parent.prev('div'));
        }
        else if ($(this).hasClass('btn-move-down')) {
            parent.insertAfter(parent.next('div'));
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/maUGM/1/)。

编辑添加省略的功能（隐藏相关按钮）：

```
function firstAndLast(container) {
    if (!container) {
        return false;
    }
    else {
        container.find('button:disabled').prop('disabled', false);
        container.find('button.btn-move-up:first').prop('disabled', true);
        container.find('button.btn-move-down:last').prop('disabled', true);
    }
}

firstAndLast($('#container'));

$('button').click(
    function(e) {
        e.preventDefault();
        var parent = $(this).closest('div'),
            grandparent = $(this).closest('#container');
        if ($(this).hasClass('btn-move-up')) {
            parent.insertBefore(parent.prev('div'));
            firstAndLast(grandparent)
        }
        else if ($(this).hasClass('btn-move-down')) {
            parent.insertAfter(parent.next('div'));
            firstAndLast(grandparent)
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/maUGM/2/)。

编辑关于`button`元素实际上没有被使用的启示。相反，我们现在使用`a`元素：

```
function firstAndLast(container) {
    if (!container) {
        return false;
    }
    else {
        container.find('a.disabled').removeClass('disabled')
        container.find('a.btn-move-up:first').addClass('disabled');
        container.find('a.btn-move-down:last').addClass('disabled');
    }
}

firstAndLast($('#container'));

$('a').click(
    function(e) {
        var that = $(this);
        if (!that.hasClass('disabled')) {
            e.preventDefault();
            var parent = $(this).closest('div'),
                grandparent = $(this).closest('#container');
            if ($(this).hasClass('btn-move-up')) {
                parent.insertBefore(parent.prev('div'));
                firstAndLast(grandparent)
            }
            else if ($(this).hasClass('btn-move-down')) {
                parent.insertAfter(parent.next('div'));
                firstAndLast(grandparent)
            }
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/maUGM/3/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`closest()`](http://api.jquery.com/closest/).
*   ['查找（）`](http://api.jquery.com/find/)。
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`hasClass()`](http://api.jquery.com/hasClass/).
*   [`insertAfter()`](http://api.jquery.com/insertAfter/).
*   [`insertBefore()`](http://api.jquery.com/insertBefore/).
*   [`:last`选择器](http://api.jquery.com/last-selector/)。
*   [`prop()`](http://api.jquery.com/prop/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:51:05.810

这是已接受答案的干净版本，并进行了一些更正。

```
function firstAndLast(container) {

    if (!container) {

        return false;

    } else {

        container.find('a.btn-move-up, a.btn-move-down').show();
        container.find('a.btn-move-up:first').hide();
        container.find('a.btn-move-down:last').hide();
    }
}

firstAndLast($('#container'));

$('.btn-move-up, .btn-move-down').click(function(e) {

    e.preventDefault();

    var parent = $(this).closest('div'), grandparent = $(this).closest('#container');

    if ($(this).hasClass('btn-move-up')) {

        parent.insertBefore(parent.prev('div'));
        firstAndLast(grandparent);

    } else if ($(this).hasClass('btn-move-down')) {

        parent.insertAfter(parent.next('div'));
        firstAndLast(grandparent);
    }
}); 
```

# php - echo 内的 PHP 代码

> ID：12020947
> 
> 赞同：0
> 
> 时间：2012-08-18T17:58:38.253
> 
> 标签：php, magento, echo

我有以下代码在 Magento 中显示价格。

```
<?php echo $this->getPriceHtml($_product); ?> 
```

我必须将此代码放在 echo 中，但我无法让它工作。

我在尝试

```
echo "$this->getPriceHtml ($_product)"; 
```

它只是在页面上显示 ()。

我尝试了其他组合，但我想不出其他任何东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T18:00:30.700

使用单引号将阻止 $vars 被解释：

```
echo '$this->getPriceHtml ($_product)'; 
```

或者转义 $ 符号：

```
echo "\$this->getPriceHtml (\$_product)"; 
```

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

或者，如果通过回显你的意思是你想要得到类似的东西

```
The price is 123.00 
```

然后做：

```
echo "The price is {$this->getPriceHtml($_product)}"; 
```

甚至 ：

```
echo sprintf("The price is %s", $this->getPriceHtml($_product)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:20:42.950

你为什么不使用这个？

$_product->getFinalPrice() 或

如果你想要格式化的顺序那么你为什么不使用这个 number_format($pr->getPrice(), 2)

如果你想要货币格式的价格，那么你也可以使用它 Mage::helper('core')->currency($pr->getPrice());

希望它会帮助你。:)

# c++ - C++ 计算时间间隔

> ID：12020948
> 
> 赞同：2
> 
> 时间：2012-08-18T17:58:48.860
> 
> 标签：c++, unix, time, g++, clock

我想计算程序中发生的一些事件之间的时间间隔（1 秒的 1/10）。因此，我使用`clock`函数来满足这些需求，如下所示：

```
 clock_t begin;
    clock_t now;
    clock_t diff;

    begin = clock();

    while ( 1 )
    {
        now = clock();
        diff = now - begin;
        cout << diff / CLOCKS_PER_SEC << "\n";
        //usleep ( 1000000 );
    }; 
```

我希望程序打印`0`1 秒，然后打印 1 秒`1`，然后打印`2`1 秒。依此类推……实际上它打印`0`了大约 8 秒，然后打印了大约 8 秒，`1`依此类推……

顺便说一句，如果我添加`usleep`命令程序每秒只打印 1 次，它只会打印`0`很长时间......

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:05:14.557

该`clock()`函数返回为您的程序收取的 CPU 时间量。当您在`usleep()`通话中被阻止时，不会向您收取任何时间，这很清楚为什么您的时间似乎从未增加。至于为什么您似乎要花 8 秒来收取一秒的费用——您的系统内还有其他事情正在发生，消耗您想要消耗的 CPU 时间，但您必须共享处理器。`clock()`不能用来衡量实时的流逝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:39:51.817

如果您能够使用 boost，请查看[Boost Timers](http://www.boost.org/doc/libs/1_50_0/libs/timer/doc/cpu_timers.html)库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:03:35.110

我敢打赌，您的打印对标准输出非常重要，以至于旧打印正在缓冲。缓冲区正在增长，控制台的输出跟不上您的紧密循环。通过添加睡眠，您可以让缓冲区有时间刷新和赶上。因此，即使它进入您的程序 8 秒，您的打印内容也是 8 秒前的。

我建议将实际时间戳放入打印语句中。查看时间戳是否明显滞后于实际时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T18:01:15.173

也许您必须将其类型转换为加倍。

```
cout << (double)(diff / CLOCKS_PER_SEC) << "\n"; 
```

整数四舍五入，在您的情况下可能为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T19:15:15.833

阅读有关该`time()`功能的信息。

# java - JProgressBar 没有进展

> ID：12020949
> 
> 赞同：1
> 
> 时间：2012-08-18T17:58:52.743
> 
> 标签：java, swing, jprogressbar

所以我正在尝试制作一个下载器，它用进度条显示下载进度。但我遇到了问题，因为它实际上并没有更新进度条。基本上它保持白色，当它应该是蓝色的时候。如果有人可以提供帮助，代码如下。

```
JProgressBar progressBar = new JProgressBar(0, ia);
con.add(progressBar, BorderLayout.PAGE_START);
con.validate();
con.repaint();
progressBar = new JProgressBar(0, ia);
progressBar.setValue(0);
System.out.print("Downloading Files");
while ((count = in.read(data, 0, downloadSpeed)) != -1){
    fout.write(data, 0, count);
    if (count >= 2){
        progressBar.setString("Downloading : " + ia + " @ " + count + "Kbs per second");
    } else {
        progressBar.setString("Downloading : " + ia + " @ " + count + "Kb per second");
    }
    progressBar.setValue(count);
    con.add(progressBar, BorderLayout.PAGE_START);
    try{
        Thread.sleep(1000);
    } catch (Exception e){}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:22:57.593

正如@happyburnout 指出的那样，您最好在单独的线程中处理您下载的内容，使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)可能是您正在做的事情的最佳解决方案。

主要原因是您阻止[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)(AKA EDT) 运行，从而阻止处理任何重绘请求（和其他 UI 重要事项）。

你应该通读

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [工作线程和 Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

现在这几乎直接取自 API 文档，但给出了 a`SwingWoker`和 a的基本概念`JProgressBar`

工人”...

```
public class Worker extends SwingWorker<Object, Object> {

    @Override
    protected Object doInBackground() throws Exception {

        // The download code would go here...
        for (int index = 0; index < 1000; index++) {

            int progress = Math.round(((float)index / 1000f) * 100f);
            setProgress(progress);

            Thread.sleep(10);

        }

        // You could return the down load file if you wanted...
        return null;

    } 
```

“进度窗格”

```
public class ProgressPane extends JPanel {

    private JProgressBar progressBar;

    public ProgressPane() {

        setLayout(new GridBagLayout());
        progressBar = new JProgressBar();

        add(progressBar);

    }

    public void doWork() {

        Worker worker = new Worker();
        worker.addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if ("progress".equals(evt.getPropertyName())) {
                    progressBar.setValue((Integer) evt.getNewValue());
                }
            }

        });

        worker.execute();

    }

} 
```

记住 Swing 的黄金法则

*   永远，永远，永远不要从`Thread`除 EDT 之外的任何其他地方更新 UI 组件
*   总是在不同的地方执行耗时的任务`Thread`
*   （关于布局管理器的一些东西，一些东西 - 这更像是个人的事情；））

您将在 Swing 中度过愉快而轻松的时光：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:01:57.443

与 SwingWorker 组合使用。在此处查看示例： [SwingWorker 和进度条](http://www.java2s.com/Tutorial/Java/0240__Swing/SwingWorkerandProgressBar.htm)

@Hovercraft：你是对的。请允许我参考[JavaDoc 的相应 SwingWorker 页面](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)，我认为这最好地说明了这种情况。

# jquery - 为什么我在读取 cookie 值时遇到问题？

> ID：12020951
> 
> 赞同：0
> 
> 时间：2012-08-18T17:59:14.573
> 
> 标签：jquery, cookies

这是我在这个网站上的第一篇文章，期待一个好的解决方案。我已经创建了一个垂直手风琴式菜单 HTML 结构，如下所示，我想要的是当我单击任何在页面刷新时也应该处于活动状态的 ul 的子链接时，这里一切顺利，但 cookie 值我没有正确获得（在萤火虫中检查它），我正在使用 jquery cookie 插件。

提前致谢。

html:

```
<div class="left-nav">
  <h3>Main one</h3>
  <ul>
    <li><a href="link">Sub one-1</li>
    <li><a href="link">Sub one-2</li>
  </ul>
  <h3>Main Two</h3>
  <ul>
    <li><a href="link">Sub two-1</li>
    <li><a href="link">Sub two-2</li>
  </ul>
</div> 
```

查询：

```
var checkCookie = $.cookie("nav-item");
if (checkCookie != "") {
  $('.left-nav > ul > li > a:eq('+ checkCookie +')').parent().parent().show();
} else {
  $('.left-nav > ul > li > a:eq('+ 0 +')').parent().parent().show();
}

$('.left-nav > ul > li > a').click(function (){
  var navIndex = $('.left-nav > ul > li > a').index(this);
  $.cookie("nav-item", navIndex);
  $('.left-nav > ul > li > a').removeClass('active');
  $(this).addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:47:56.367

尝试这个：

```
var myCookie = document.cookie;

$("h3").click(function(){
   var myIndex = $(this).index();
   myCookie = "menuActive="+myIndex;
});

//Read which menu its active

var thisCookie = myCookie.split("menuActive=");
var cookieData = thisCookie[1];
var cookieResult = unescape(cookieData);

$("left-nav ul").hide();
$("left-nav ul").eq(cookieResult).show(); 
```

# android - Android Gallery - 缓存请求刷新

> ID：12020958
> 
> 赞同：1
> 
> 时间：2012-08-18T17:59:58.830
> 
> 标签：android, caching, android-gallery

这应该是关于**MEDIA RESCAN的常见问题解答**

我的环境：

安卓 4.1.1

com.android.gallery3d 是用于管理缓存和缩略图的图库应用程序包。

画廊首选项位于：/data/data/com.google.android.gallery3d/shared_prefs/com.google.android.gallery3d_preferences.xml

```
<map>
<string name="pref_camera_recordlocation_key">none</string>
<int name="editor-update-image/*" value="312" />
<boolean name="prefs_sync_on_wifi_only" value="true" />
<string name="system_release">4.1.1</string>
<boolean name="pref_camera_first_use_hint_shown_key" value="false" />
<int name="cache-up-to-date" value="1" />   ** tried changing this **
<int name="editor-update-video/*" value="312" />
<int name="external_storage_fsid" value="-1" />
<int name="picasasync.prefetch.clean-cache" value="0" />
<boolean name="has-editor-image/*" value="true" />
<string name="pref_camera_jpegquality_key">superfine</string>
<int name="pref_version_key" value="5" />
<boolean name="pref_video_first_use_hint_shown_key" value="false" />
<int name="packages-version" value="312" />
<boolean name="has-editor-video/*" value="false" />
</map> 
```

来自“cooliris”的旧版本 CacheService 的 API 在[这里...](http://srcrr.com/android/Gallery3D/10/reference/com/cooliris/cache/CacheService.html)

**我的问题：**

我的应用程序做了两件事：

1.  将新电影（ mimetype= video/* ，文件扩展名= .3gp ）插入 /mnt/sdcard/Movies

2.  依赖于“刷新”版本的 Gallery3D 缩略图，以便向（G+、Youtube 等）提供完整的共享上下文

**问题是画廊缓存在重新启动之前不会刷新**

在我的应用程序将电影插入到手机上存储电影的目录后，我无法找到一种方法在画廊应用程序中获取新插入电影的缩略图以在合理的间隔内显示。我不相信我需要实现自己的缓存。我只想找到会强制 Gallery3D 应用程序刷新自己的缓存的界面或首选项切换。缓存刷新将新电影的拇指放入正常的画廊列表中。使用刷新后的新拇指，用户拥有新电影的完整社交共享菜单。如果没有缓存刷新，Gallery 应用程序中没有 THUMBNAIL，并且我的应用程序中项目的 mime/类型的本地上下文菜单（视频/*、.3gp）不包括 G+、youtube 等。请参见下图画廊的理想状态' s 刷新后的操作栏上下文菜单。请注意，在刷新之前，G+ 和 Youtube 不在我的应用程序中电影项目的上下文菜单中，并且该项目的 Thumb 还没有在画廊应用程序中。令人沮丧的是，如果您等待的时间足够长，则拇指总是会出现在 Gallery 应用程序中。

我尝试切换 SYNC 的 Google 帐户数据设置。

我已经尝试手动编辑“缓存最新”的画廊首选项，将其设置为 false。

我没有尝试从我的第三方应用程序请求 Gallery3D.CacheService 的意图。那会是……

```
Intent i = new Intent();
i.setClassName("CacheService", "com.google.android.cache.CacheService"); (pkg , class)
startService(i); 
```

但是，我没有实现的确切类名，所以我不能确定从我的应用程序中请求那个 service.intent，我认为我在重启后浏览 logcat 时看不到它？我可以记录应用程序的cooliris 源版本，但我认为此时这不是很好，因为JB 已经重构了com.google.android 版本。

重新启动/刷新后的缩略图中包含 G+、Youtube、完整社交的所需上下文... ![在此处输入图像描述](../Images/0c75f456f98085aed5de5d7c86c01f70.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:54:19.550

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/waOFIm899II](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/waOFIm899II)

问错问题了。。

应该问“如何强制重新扫描媒体”

# iphone - 在不使用地图的情况下布置 GPS 坐标

> ID：12020964
> 
> 赞同：1
> 
> 时间：2012-08-18T18:00:32.770
> 
> 标签：iphone, objective-c, ios, mkmapview, coordinates

我正在尝试创建一个显示一堆坐标而不使用地图的视图。
用户的坐标应该在屏幕的中心（在圆圈的中间），
其余的坐标将根据他们的真实纬度和经度相对布局。

像这样的东西：

![在此处输入图像描述](../Images/4393a9b2f55e30c607b09a56d5ef7a24.png)

我知道我不能这样做，`MKMapKit`因为这将违反 Google 许可证，所以我需要一种方法来自己放置和管理坐标。

做这样的事情的最佳做法是什么？我应该如何将坐标转换为屏幕点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:06:46.753

我会这样做：

1）我首先在用户的当前位置进行规范化（将其转换为 0,0，然后将相同的转换应用于其余坐标）。

2) 完成后，使用距离函数找出列表中的哪个坐标离您当前位置最远。

3）使用最远的坐标来确定视图的比例。

4) 根据您在#3 中得出的比例计算所有位置的 X 和 Y 屏幕坐标

# php - 带有 json 的 php web 服务

> ID：12020971
> 
> 赞同：1
> 
> 时间：2012-08-18T18:01:26.530
> 
> 标签：php, mysql, json, web-services

我是 PHP 和 JSON 的新手，根据教程，我制作了一个简单的 Web 服务，它返回 mysql 数据库表的内容。

输出为 JSON，数据库字符集为 UTF-8。我的问题是，当我尝试运行它时，它会抛出 404 错误，并且不会告诉我错误在哪里。知道可能出了什么问题吗？

PHP文件如下：

```
<?php
  ini_set("display_errors", 1);
  error_reporting(E_ALL);
  $link = mysql_connect($mysql_host,$mysql_user,$mysql_password) or die("cannot connect to the DB");
  mysql_select_db($mysql_database,$link);
  $query = "select...";
  $result=mysql_query($query) or die (mysql_error("error "));
  $num=mysql_numrows($result);
  $rows=array();
  while($r=mysql_fetch_assoc($result)){
      $rows[]=$r;
  }
  echo json_encode($rows);
?> 
```

任何的想法？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:28:14.337

在前面添加以下行`json_encode()`

```
header('Content-type: application/json'); 
```

那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:01:05.310

在此，我编写了我的 php Web 服务代码。按照这个。希望它会帮助你。

关联 ：

`http://stackoverflow.com/questions/12702128/json-parsing-in-iosphp`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T18:05:00.637

您确定要使用 JSON 吗？您还可以使用 SOAP-NuSOAP 和 WSDL 来创建 Web 服务。例如，请参阅 [使用 PHP SOAP 和 WSDL 技术和 NuSOAP 在 5 分钟内创建 PHP Web 服务](http://greatgandhi.wordpress.com/2009/11/25/create-a-php-webservice-in-5min-using-php-soap-and-wsdl-technology-nusoap/)。

# php - 对 wordpress 网站进行编码以保护代码（例如混淆）

> ID：12020974
> 
> 赞同：1
> 
> 时间：2012-08-18T18:02:01.150
> 
> 标签：php, wordpress, obfuscation, ioncube, zend-guard

我只是想知道是否有人使用 Zend Guard/Ion Cube 来编码一个 Wordpress 应用程序——我已经制作了一个自定义的 WP CMS，并且正在考虑将它放在我无法控制的外部服务器上。

我想知道这将如何影响以下事情：

*   网站的一般速度
*   这需要专用托管吗？共享主机的任何问题
*   任何独特/特殊的服务器要求？
*   更新 wordpress 核心的能力，同时仍然保持所有编码

有没有人有任何使用 Zend Guard 或类似服务的经验，如果有的话，您在此过程中遇到了什么问题，对于“localhost”开发来说这有多容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:53:20.607

我可以谈谈离子立方体：

您可以轻松地对部分代码进行编码，甚至是单个脚本。只要它没有以不允许包含非编码（或一般外来的）文件的方式编码，它就不会影响整个系统（但默认情况下此功能是关闭的）。

至于性能提升 - 它主要取决于脚本文件的大小 - 增益越大越明显

至于托管 - 用户只需要 ioncube 加载器。大多数主机包括。共享的默认提供它，或者可以根据要求启用。其他人，如 VPS 用户等可以手动安装，加载程序是免费的。

# javascript - 带有 jQ uery 和 AJAX 的 JS 变量的生命周期

> ID：12020978
> 
> 赞同：0
> 
> 时间：2012-08-18T18:02:26.817
> 
> 标签：javascript, variables, deferred, lifetime

我目前正在尝试解决 AJAX 的异步行为。问题是，我有未指定数量的 AJAX 调用，我都必须等待。我正在使用 jQuery 创建一个延迟对象，一旦最后一个 ajax 调用完成，包括其成功处理程序，该对象就会手动解析。工作正常，但是：似乎发生所有事情的函数在 then() 函数执行之前已经终止（并清除了在该函数中声明的所有变量）。我只能通过全局声明所需的变量用户来解决这个问题。

如果我声明

```
$().click(function() {
     /* inside here */ 
     var users = [];
}); 
```

然后它不起作用。控制台声明未声明 var users。（见代码示例）。

什么是解决此问题的干净方法？全局声明所有需要的变量对我来说似乎不是很好。

[用我的代码示例链接到 jsfiddle](http://jsfiddle.net/8NtqG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:45:55.517

您需要在所有函数都可以访问它的范围内声明该变量。由于您的`getGroupMembers`函数位于全局范围内，因此您的`users`变量必须如此。将其移动到`ready`or`click`范围内，您可以将变量声明为本地变量。

但是，将请求的结果作为参数传递给`resolve`：

```
$(document).ready(function() {
    $('#message_send').click(function() {
        var deferred = getGroupMembers({
            page: 1,
            per_page: 100
        });
        deferred.then(function(users) {
            console.log(users);
        });
    });
});

function getGroupMembers(querydata) {
    var users = [];
    var deferredObject = new $.Deferred();
    …
    // some asynchronous tasks, callbacking either
        deferredObject.resolve(users);
    // or
        deferredObject.reject();
    …
    return deferredObject.promise();
} 
```

对于一些语法糖，您不妨只使用 Ajax Deferred 的[`pipe`方法](http://api.jquery.com/deferred.pipe/)。

* * *

递归管道方法：

```
function getGroupMembers(querydata) {
    return $.ajax({
        url: "/echo/json/",
        dataType: "json",
        data: querydata,
        cache: false
    }).pipe(function(data) {
        var user = data.response.UserActions,
            users = [];
        for (var u = 0; u < user.length; u++) {
            users.push(user[u].user.id);
        }
        if (querydata.page < data.meta.total_pages) {
            querydata.page++;
            return getGroupMembers(querydata).pipe(function(nextusers) {
                return users.concat(nextusers);
            });
        } else {
            return users;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:11:16.423

你可以用闭包解决这个问题，但我建议看看 async.js

如果要将 ajax 调用的最后响应传递给下一个函数

```
https://github.com/caolan/async#series 
```

如果您一个接一个地运行 ajax 可能是一个更好的选择是瀑布

[https://github.com/caolan/async#waterfall](https://github.com/caolan/async#waterfall)

瀑布与系列相同，但如果任何功能失败/系列没有则停止

如果运行多个 ajax 调用并等待它们全部完成

[https://github.com/caolan/async#parallel](https://github.com/caolan/async#parallel)

# performance - 哈希表 - 为什么它比数组快？

> ID：12020984
> 
> 赞同：68
> 
> 时间：2012-08-18T18:03:10.697
> 
> 标签：performance, algorithm, hash, hashtable

在我为每个元素都有一个键并且我不知道数组中元素的索引的情况下，哈希表的性能优于数组（O(1) vs O(n)）。

这是为什么？我的意思是：我有一个密钥，我对其进行散列..我有散列..算法不应该将此散列与每个元素的散列进行比较吗？我认为内存配置背后有一些技巧，不是吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-19T09:17:19.743

> 在我为每个元素都有一个键并且我不知道数组中元素的索引的情况下，哈希表的性能优于数组（O(1) vs O(n)）。

哈希表搜索在平均情况下执行 O(1)。在最坏的情况下，哈希表搜索执行 O(n)：当您有冲突并且哈希函数总是返回相同的槽时。人们可能会认为“这是一个遥远的情况”，但一个好的分析应该考虑到它。在这种情况下，您应该遍历数组或链表 (O(n)) 中的所有元素。

> 这是为什么？我的意思是：我有一个密钥，我对其进行散列..我有散列..算法不应该将此散列与每个元素的散列进行比较吗？我认为内存配置背后有一些技巧，不是吗？

你有一个键，你散列它..你有散列：元素所在的散列表的索引（如果它之前已经找到）。此时您可以访问 O(1) 中的哈希表记录。如果负载因子很小，则不太可能在那里看到多个元素。因此，您看到的第一个元素应该是您正在寻找的元素。否则，如果您有多个元素，则必须将在该位置找到的元素与您正在寻找的元素进行比较。在这种情况下，您有 O(1) + O(number_of_elements)。

在平均情况下，哈希表搜索复杂度为 O(1) + O(load_factor) = O(1 + load_factor)。

请记住，在最坏的情况下 load_factor = n。因此，在最坏的情况下，搜索复杂度为 O(n)。

我不知道您所说的“内存配置背后的技巧”是什么意思。在某些观点下，哈希表（具有其结构和通过链接解决冲突）可以被认为是一种“聪明的技巧”。

当然，哈希表的分析结果可以用数学来证明。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-08-18T18:09:46.830

**使用数组**：如果您知道该值，则必须平均搜索一半的值（除非已排序）才能找到其位置。

**使用哈希**：位置是根据值生成的。因此，再次给出该值，您可以计算插入时计算的相同哈希值。有时，超过 1 个值会导致相同的散列，因此实际上每个“位置”本身就是散列到该位置的所有值的**数组**（或链表）。在这种情况下，只需要搜索这个小得多（除非它是一个坏哈希）的数组。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-18T18:05:45.193

哈希表有点复杂。他们根据哈希值将元素放入不同的*桶中。*在理想情况下，每个桶中的物品很少，空桶也不多。

一旦知道了密钥，就可以计算哈希。根据哈希，您知道要查找哪个存储桶。并且如上所述，每个桶中的项目数应该相对较少。

哈希表在内部做了很多神奇的事情，以确保存储桶尽可能小，同时不会为空存储桶消耗太多内存。此外，很大程度上取决于密钥 -> 哈希函数的质量。

维基百科提供了[非常全面的哈希表描述](http://en.wikipedia.org/wiki/Hash_table)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-04-02T18:35:10.140

哈希表不必比较哈希中的每个元素。它将根据密钥计算哈希码。例如，如果 key 是 4，那么 hashcode 可能是 - 4*x*y。现在指针确切地知道要选择哪个元素。

而如果它是一个数组，它必须遍历整个数组来搜索这个元素。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-13T07:20:04.240

> 为什么 [它] [哈希表通过键执行查找比数组 (O(1) vs O(n))] 更好？我的意思是：我有一个密钥，我对其进行散列..我有散列..算法不应该将此散列与每个元素的散列进行比较吗？我认为内存配置背后有一些技巧，不是吗？

一旦你有了哈希，它就可以让你计算桶数组中的“理想”或预期位置：通常：

> 理想桶 = 哈希 % num_buckets

那么问题是另一个值可能已经散列到该桶，在这种情况下，散列表实现有两个主要选择：

1）尝试另一个桶

2）让几个不同的值“属于”一个桶，也许通过让桶持有指向值链表的指针

对于实现 1，称为[*开放寻址*或*封闭散列*](https://en.wikipedia.org/wiki/Open_addressing)，您可以跳过其他存储桶：如果您发现自己的价值，那就太好了；如果您找到一个从未使用过的存储桶，那么您可以在插入时将您的值存储在其中，或者您知道在搜索时永远找不到您的值。如果您遍历替代存储桶的方式最终多次搜索同一个存储桶，则搜索可能会比 O(n) 更糟；例如，如果您使用[*二次探测*](https://en.wikipedia.org/wiki/Quadratic_probing)，您尝试理想的桶索引 +1，然后 +4，然后 +9，然后 +16 等等 - 但您必须避免使用例如越界桶访问`% num_buckets`，所以如果有 12 个桶，那么 Ideal+4 和 Ideal+16 搜索同一个桶。跟踪搜索了哪些存储桶可能会很昂贵，因此也很难知道何时放弃：实现可以是乐观的，并假设它总是会找到值或未使用的存储桶（冒着永远旋转的风险），它可以有一个计数器，并且在尝试的阈值之后要么放弃，要么开始逐个桶的线性搜索。

对于实现 2，称为[*封闭寻址*或*单独链接*](https://en.wikipedia.org/wiki/Hash_table#Separate_chaining)，您必须在所有散列到理想存储桶的值的容器/数据结构中进行搜索。这有多有效取决于使用的容器类型。通常预计在一个桶中碰撞的元素数量会很少，这对于具有非对抗性输入的良好散列函数来说是正确的，并且通常即使是平庸的散列函数也足够真实，尤其是对于具有素数的桶。因此，尽管具有 O(n) 搜索属性，但通常使用链表或连续数组：链表易于实现和操作，并且数组将数据打包在一起以获得更好的内存缓存局部性和访问速度。最糟糕的情况是，表中的每个值都散列到同一个桶中，而该桶中的容器现在保存了所有值：*桶的*容器。如果散列到相同存储桶的元素数量超过阈值，一些 Java 哈希表实现已经开始使用二叉树，以确保复杂性永远不会比 O(log2n) 差。

Python 哈希是 1 = 开放寻址 = 封闭哈希的示例。C++[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)是封闭寻址 = 单独链接的示例。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-07T06:33:28.003

散列的目的是为底层数组生成一个索引，这使您能够直接跳转到有问题的元素。这通常通过将散列除以数组的大小并取余数来完成`index = hash%capacity`。

散列的类型/大小通常是足以索引所有 RAM 的最小整数。在 32 位系统上，这是一个 32 位整数。在 64 位系统上，这是一个 64 位整数。在 C++ 中，这分别对应于`unsigned int`和`unsigned long long`。迂腐的 C++ 在技术上为其原语指定了最小大小，即至少 32 位和至少 64 位，但这不是重点。为了使代码可移植，C++ 还提供了一个`size_t`原语对应于适当的无符号整数。在编写良好的代码中，您会在索引到数组的 for 循环中看到很多类型。在像 Python 这样的语言的情况下，整数原语可以增长到它需要的任何大小。这通常在名为“Big Integer”的其他语言的标准库中实现。为了解决这个问题，Python 编程语言简单地将您从`__hash__()`方法返回的任何值截断为适当的大小。

在这一点上，我认为值得对智者说一说。无论您是在最后还是在沿途的每一步计算余数，算术的结果都是相同的。截断相当于计算余数模 2^n，其中 n 是您保持不变的位数。现在你可能认为在每一步计算余数是愚蠢的，因为你在每一步都会产生额外的计算。然而，情况并非如此，原因有两个。首先，从计算上讲，截断非常便宜，远比广义除法便宜。其次，这是真正的原因，因为第一个是不够的，即使在没有它的情况下，索赔通常也会成立，在每个步骤中取剩余部分会使数量（相对）小。所以而不是像`product = 31*product + hash(array[index])`，你会想要类似的东西`product = hash(31*product + hash(array[index]))`。内部 hash() 调用的主要目的是获取可能不是数字的东西并将其转换为一个，而外部 hash() 调用的主要目的是获取可能过大的数字并将其截断。最后我会注意到，在像 C++ 这样整数基元具有固定大小的语言中，这个截断步骤会在每次操作后自动执行。

现在是房间里的大象。您可能已经意识到散列码通常比它们对应的对象小，更不用说从它们派生的索引通常更小，两个对象完全有可能散列到同一个索引。这称为哈希冲突。`set`由 Python或`dict`C++ 之类的哈希表支持的数据结构`std::unordered_set`或`std::unordered_map`主要以两种方式之一处理此问题。第一个称为[分离链接](https://en.wikipedia.org/wiki/Hash_table#Separate_chaining)，第二个称为[开放寻址](https://en.wikipedia.org/wiki/Hash_table#Open_addressing)。在单独链接中，用作哈希表的数组本身就是一个列表数组（或者在某些情况下，开发人员觉得很花哨，其他一些数据结构，如[二叉搜索树](https://en.wikipedia.org/wiki/Binary_search_tree)），并且每次元素散列到给定索引时，它都会被添加到相应的列表中。在开放寻址中，如果一个元素散列到一个已经被占用的索引，则数据结构会探测到下一个索引（或者在某些情况下，开发人员觉得很花哨，一个由其他函数定义的索引，如[二次探测](https://en.wikipedia.org/wiki/Quadratic_probing)的情况) 依此类推，直到它找到一个空槽，当它到达数组的末尾时当然会环绕。

接下来谈谈负载系数。在增加或减少负载因子时，当然存在固有的空间/时间折衷。负载因子越高，表占用的空间越少；然而，这是以增加性能降低冲突的可能性为代价的。一般来说，使用单独链接实现的哈希表对负载因子的敏感度低于使用开放寻址实现的哈希表。这是由于称为[聚类的现象](https://en.wikipedia.org/wiki/Primary_clustering)其中，开放寻址哈希表中的簇在正反馈循环中趋于变得越来越大，这是因为它们越大，它们就越有可能包含新添加元素的首选索引。这实际上是为什么前面提到的逐渐增加跳跃距离的二次探测方案通常是首选的原因。在负载因子大于 1 的极端情况下，开放寻址根本无法工作，因为元素的数量超过了可用空间。也就是说，大于 1 的负载因子通常非常罕见。在编写 Python`set`和`dict`类时，最大负载因子为 Java 的 2/3，而 C++ 的最大负载因子`java.util.HashSet`为`java.util.HashMap`3/4 `std::unordered_set`，`std::unordered_map`最大负载因子为 1 的蛋糕。不出所料，Python 的哈希表支持的数据结构处理与开放寻址的冲突，而它们的 Java 和 C++ 对应物使用单独的链接来处理冲突。

最后评论一下桌子的大小。当超过最大负载因子时，哈希表的大小当然必须增加。由于这需要重新索引其中的每个元素，因此将表增长固定数量是非常低效的。这样做会在每次添加新元素时产生订单大小操作。[此问题的标准修复方法与大多数动态数组](https://en.wikipedia.org/wiki/Dynamic_array)实现所采用的方法相同。在我们需要扩大表格的每一个点上，我们只需将其大小增加其当前大小。不出所料，这被称为表加倍。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-08-18T18:11:57.530

我想你在那里回答了你自己的问题。“算法不应该将此哈希与每个元素的哈希进行比较”。当它不知道您正在搜索的内容的索引位置时，它就是这样做的。它比较每个元素以找到您要查找的元素：

例如，假设您在一个字符串数组中寻找一个名为“Car”的项目。您需要检查每个项目并检查 item.Hash() == "Car".Hash() 以找出您要查找的项目。显然，它总是在搜索时不使用散列，但这个例子就成立了。然后你有一个哈希表。哈希表的作用是创建一个稀疏数组，或者有时像上面提到的那样创建一个桶数组。然后它使用 "Car".Hash() 来推断你的 "Car" 项目在稀疏数组中的实际位置。这意味着它不必搜索整个数组来查找您的项目。

# vb.net - SendKeys 无法正常工作 VB.NET

> ID：12020987
> 
> 赞同：0
> 
> 时间：2012-08-18T18:03:44.833
> 
> 标签：vb.net

我想按 VB.NET 的回车键...我尝试了很多代码，但没有一个工作。
我试过：

```
SendKeys.Send("(Enter)")  

SendKeys.Send(Keys.Enter)

SendKeys.Send("Enter") 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:11:38.717

我没有尝试过，但是从 MSDN 库中的这个链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)

...您应该使用：

```
SendKeys.Send("{ENTER}") 
```

或者

```
SendKeys.Send("~") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:14:39.603

除了 Andy 所说的之外，Visual Basic 还内置了一些默认常量。尝试使用它们，`vbCrLf`否则`vbCR`它们都会起作用。

IE

```
SendKeys.Send(vbCrLf) 
```

或者

```
SendKeys.Send(vbCr) 
```

# css - 无法修复 iframe 高度

> ID：12020988
> 
> 赞同：0
> 
> 时间：2012-08-18T18:03:50.137
> 
> 标签：css, html, iframe

我有以下示例代码：

```
<style type="text/css">
.div_class
{
position:absolute;
border:1px solid blue;
left:50%;
margin-left:-375px;
margin-top:100px;
height:300px;
width:500px;
overflow:hidden;
}
.iframe_class
{
position:relative;
border:1px solid red;
height:100%;
margin-left:-218px;
margin-top:-110px;
}
</style>
<div class="div_class">
<iframe src="http://www.w3schools.com/" class="iframe_class" />
</div> 
```

在上面的代码中， a`div`包含 an `iframe`，其中只有一部分（从位置 [x=218,y=110] 开始）必须显示。正如你所看到的，我已经放置`height:100%`了`iframe`这意味着它需要`div`. 这就是问题开始的地方。iframe 被裁剪。IE。iframe 的右边框和下边框随着重新定位而移动。

**我想要的：**即使在重新定位 iframe 之后，我希望右边框和下边框分别与 div 的右边框和下边框重合。我该怎么做？

**笔记：**

1.  [http://www.w3schools.com/](http://www.w3schools.com/)仅作为示例。在我的实际代码中，iframe 源将由 PHP 脚本决定。
2.  我无法将 iframe 高度设置为**218+document_height_of_iframe_src**，因为正如我所说，src 是由后端脚本动态决定的。所以**document_height_of_iframe_src**对我来说是未知的。**document_width_of_iframe_src**也是如此。
3.  我必须在不使用 JavaScript 的情况下完成这一切。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:13:28.127

边距和边框样式不包含在元素宽度/高度中。所以他们有自己的布局空间。`iframe_class`要修复它，请像这样向' 的容器 ( )添加底部填充`div_class`。

```
.div_class
{
position:absolute;
border:1px solid blue;
left:50%;
margin-left:-375px;
margin-top:100px;
height:300px;
width:500px;
overflow:hidden;
/*added to compensate iframe border (top+bottom)*/
padding-bottom:2px;
}
.iframe_class
{
position:relative;
border:1px solid red;
height:100%;
/*removed. messed the layout.
margin-left:-218px;
margin-top:-110px;
*/
} 
```